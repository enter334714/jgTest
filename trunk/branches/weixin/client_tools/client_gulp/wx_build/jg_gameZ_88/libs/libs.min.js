var Laya=window.Laya=function(F$b,F$y){var F$D={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(F$y,F$j){return 1==arguments.length?F$D.__presubstr.call(this,F$y):F$D.__presubstr.call(this,F$y,0<F$j?F$j:this.length+F$j)},__init:function(F$y){F$y.forEach(function(F$y){F$y.__init$&&F$y.__init$()})},__isClass:function(F$y){return F$y&&(F$y.__isclass||F$y==Object||F$y==String||F$y==Array)},__newvec:function(F$y,F$j){var F$t=[];F$t.length=F$y;for(var F$k=0;F$k<F$y;F$k++)F$t[F$k]=F$j;return F$t},__extend:function(F$y,F$j){for(var F$t in F$j)if(F$j.hasOwnProperty(F$t)){var F$k=Object.getOwnPropertyDescriptor(F$j,F$t),F$T=F$k.get,F$Y=F$k.set;F$T||F$Y?F$T&&F$Y?Object.defineProperty(F$y,F$t,F$k):(F$T&&Object.defineProperty(F$y,F$t,F$T),F$Y&&Object.defineProperty(F$y,F$t,F$Y)):F$y[F$t]=F$j[F$t]}function F$A(){F$D.un(this,"constructor",F$y)}F$A.prototype=F$j.prototype,F$y.prototype=new F$A,F$D.un(F$y.prototype,"__imps",F$D.__copy({},F$j.prototype.__imps))},__copy:function(F$y,F$j){if(!F$j)return null;for(var F$t in F$y=F$y||{},F$j)F$y[F$t]=F$j[F$t];return F$y},__package:function(F$y,F$j){if(!F$D.__packages[F$y]){F$D.__packages[F$y]=!0;var F$t=F$b,F$k=F$y.split(".");if(1<F$k.length)for(var F$T=0,F$Y=F$k.length-1;F$T<F$Y;F$T++){var F$A=F$t[F$k[F$T]];F$t=F$A||(F$t[F$k[F$T]]={})}F$t[F$k[F$k.length-1]]||(F$t[F$k[F$k.length-1]]=F$j||{})}},__hasOwnProperty:function(F$y,F$j){return F$j=F$j||this,Object.hasOwnProperty.call(F$j,F$y)||function F$y(F$j,F$t){if(Object.hasOwnProperty.call(F$t.prototype,F$j))return!0;var F$k=F$t.prototype.__super;return null==F$k?null:F$y(F$j,F$k)}(F$y,F$j.__class)},__typeof:function(F$y,F$j){if(!F$y||!F$j)return!1;if(F$j===String)return"string"==typeof F$y;if(F$j===Number)return"number"==typeof F$y;if(F$j.__interface__)F$j=F$j.__interface__;else if("string"!=typeof F$j)return F$y instanceof F$j;return F$y.__imps&&F$y.__imps[F$j]||F$y.__class==F$j},__as:function(F$y,F$j){return this.__typeof(F$y,F$j)?F$y:null},__int:function(F$y){return F$y?parseInt(F$y):0},interface:function(F$y,F$j){F$D.__package(F$y,{});var F$t=F$D.__internals,F$k=F$t[F$y]=F$t[F$y]||{self:F$y};if(F$j){var F$T=F$j.split(",");F$k.extend=[];for(var F$Y=0;F$Y<F$T.length;F$Y++){var F$A=F$T[F$Y];F$t[F$A]=F$t[F$A]||{self:F$A},F$k.extend.push(F$t[F$A])}}var F$X=F$b,F$I=F$y.split(".");for(F$Y=0;F$Y<F$I.length-1;F$Y++)F$X=F$X[F$I[F$Y]];F$X[F$I[F$I.length-1]]={__interface__:F$y}},class:function(F$y,F$j,F$t,F$k){if(F$t&&F$D.__extend(F$y,F$t),F$j)if(F$D.__package(F$j,F$y),F$D.__classmap[F$j]=F$y,0<F$j.indexOf(".")){if(0==F$j.indexOf("laya.")){var F$T=F$j.split(".");F$k=F$k||F$T[F$T.length-1],F$D[F$k]&&console.log("Warning!,this class["+F$k+"] already exist:",F$D[F$k]),F$D[F$k]=F$y}}else"Main"==F$j?F$b.Main=F$y:"MainWX"==F$j?F$b.MainWX=F$y:(F$D[F$j]&&console.log("Error!,this class["+F$j+"] already exist:",F$D[F$j]),F$D[F$j]=F$y);var F$Y=F$D.un,F$A=F$y.prototype;F$Y(F$A,"hasOwnProperty",F$D.__hasOwnProperty),F$Y(F$A,"__class",F$y),F$Y(F$A,"__super",F$t),F$Y(F$A,"__className",F$j),F$Y(F$y,"__super",F$t),F$Y(F$y,"__className",F$j),F$Y(F$y,"__isclass",!0),F$Y(F$y,"super",function(F$y){this.__super.call(F$y)})},imps:function(F$y,F$j){if(!F$j)return null;var F$T=F$y.__imps||F$D.un(F$y,"__imps",{});function F$Y(F$y){var F$j,F$t;if((F$j=F$D.__internals[F$y])&&(F$T[F$y]=!0,F$t=F$j.extend))for(var F$k=0;F$k<F$t.length;F$k++)F$Y(F$t[F$k].self)}for(var F$t in F$j)F$Y(F$t)},superSet:function(F$y,F$j,F$t,F$k){var F$T=F$y.prototype["_$set_"+F$t];F$T&&F$T.call(F$j,F$k)},superGet:function(F$y,F$j,F$t){var F$k=F$y.prototype["_$get_"+F$t];return F$k?F$k.call(F$j):null},getset:function(F$y,F$j,F$t,F$k,F$T){F$y?(F$k&&(F$j["_$GET_"+F$t]=F$k),F$T&&(F$j["_$SET_"+F$t]=F$T)):(F$k&&F$D.un(F$j,"_$get_"+F$t,F$k),F$T&&F$D.un(F$j,"_$set_"+F$t,F$T)),F$k&&F$T?Object.defineProperty(F$j,F$t,{get:F$k,set:F$T,enumerable:!1,configurable:!0}):(F$k&&Object.defineProperty(F$j,F$t,{get:F$k,enumerable:!1,configurable:!0}),F$T&&Object.defineProperty(F$j,F$t,{set:F$T,enumerable:!1,configurable:!0}))},static:function(F$t,F$k){for(var F$T=0,F$y=F$k.length;F$T<F$y;F$T+=2)if("length"==F$k[F$T])F$t.length=F$k[F$T+1].call(F$t);else{function F$j(){var F$j=F$k[F$T],F$y=F$k[F$T+1];Object.defineProperty(F$t,F$j,{get:function(){return delete this[F$j],this[F$j]=F$y.call(this)},set:function(F$y){delete this[F$j],this[F$j]=F$y},enumerable:!0,configurable:!0})}F$j()}},un:function(F$y,F$j,F$t){return F$t||(F$t=F$y[F$j]),F$D.__propun.value=F$t,Object.defineProperty(F$y,F$j,F$D.__propun),F$t},uns:function(F$j,F$y){F$y.forEach(function(F$y){F$D.un(F$j,F$y)})}};return F$b.console=F$b.console||{log:function(){}},F$b.trace=F$b.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),F$D}(window,document);!function(F$y,F$j,F$t){F$t.un,F$t.uns,F$t.static,F$t.class,F$t.getset,F$t.__newvec}(window,document,Laya),function(F$A,F$j,F$N){F$N.un,F$N.uns;var F$I=F$N.static,F$D=F$N.class,F$W=F$N.getset;F$N.__newvec;F$N.interface("laya.runtime.IMarket"),F$N.interface("laya.filters.IFilter"),F$N.interface("laya.display.ILayout"),F$N.interface("laya.resource.IDispose"),F$N.interface("laya.runtime.IPlatform"),F$N.interface("laya.resource.IDestroy"),F$N.interface("laya.runtime.IConchNode"),F$N.interface("laya.filters.IFilterAction"),F$N.interface("laya.runtime.ICPlatformClass"),F$N.interface("laya.resource.ICreateResource"),F$N.interface("laya.runtime.IConchRenderObject"),F$N.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var F$m=function(){function F$Y(){}return F$D(F$Y,"laya.utils.RunDriver"),F$Y.FILTER_ACTIONS=[],F$Y.pixelRatio=-1,F$Y._charSizeTestDiv=null,F$Y.now=function(){return Date.now()},F$Y.getWindow=function(){return F$A},F$Y.getPixelRatio=function(){if(F$Y.pixelRatio<0){var F$y=F$G.context,F$j=F$y.backingStorePixelRatio||F$y.webkitBackingStorePixelRatio||F$y.mozBackingStorePixelRatio||F$y.msBackingStorePixelRatio||F$y.oBackingStorePixelRatio||F$y.backingStorePixelRatio||1;(F$Y.pixelRatio=(F$G.window.devicePixelRatio||1)/F$j)<1&&(F$Y.pixelRatio=1)}return F$Y.pixelRatio},F$Y.getIncludeStr=function(F$y){return null},F$Y.createShaderCondition=function(F$y){var F$j="(function() {return "+F$y+";})";return F$N._runScript(F$j)},F$Y.fontMap=[],F$Y.measureText=function(F$y,F$j){var F$t=F$Y.hanzi.test(F$y);if(F$t&&F$Y.fontMap[F$j])return F$Y.fontMap[F$j];var F$k=F$G.context;F$k.font=F$j;var F$T=F$k.measureText(F$y);return F$T||(F$T={width:16,height:16}),F$t&&(F$Y.fontMap[F$j]=F$T),F$T},F$Y.getWebGLContext=function(F$y){},F$Y.beginFlush=function(){},F$Y.endFinish=function(){},F$Y.addToAtlas=null,F$Y.flashFlushImage=function(F$y){},F$Y.drawToCanvas=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$My.create("2D"),F$X=new F$H(F$t,F$k,F$A);return F$K.renders[F$j]._fun(F$y,F$X,F$T,F$Y),F$A},F$Y.createParticleTemplate2D=null,F$Y.createGLTextur=null,F$Y.createWebGLContext2D=null,F$Y.changeWebGLSize=function(F$y,F$j){},F$Y.createRenderSprite=function(F$y,F$j){return new F$K(F$y,F$j)},F$Y.createFilterAction=function(F$y){return new F$M},F$Y.createGraphics=function(){return new F$r},F$Y.clear=function(F$y){F$S._context.ctx.clear()},F$Y.cancelLoadByUrl=function(F$y){},F$Y.clearAtlas=function(F$y){},F$Y.isAtlas=function(F$y){return!1},F$Y.addTextureToAtlas=function(F$y){},F$Y.getTexturePixels=function(F$y,F$j,F$t,F$k,F$T){return null},F$Y.skinAniSprite=function(){return null},F$Y.update3DLoop=function(){},F$I(F$Y,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),F$Y}(),F$k=(F$W(1,F$N,"alertGlobalError",null,function(F$y){var F$Y=0;F$G.window.onerror=F$y?function(F$y,F$j,F$t,F$k,F$T){F$Y++<5&&F$T&&alert(F$T.stack||F$T)}:null}),F$N.init=function(F$y,F$j,F$t){for(var F$k=[],F$T=2,F$Y=arguments.length;F$T<F$Y;F$T++)F$k.push(arguments[F$T]);if(!F$N._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=F$N._arrayBufferSlice),F$N._isinit=!0,F$G.__init__(),F$x.__init__(),F$r.__init__(),F$N.timer=new F$c,F$N.scaleTimer=new F$c,F$N.loader=new F$Iy,F$E.__init__(),F$T=0;for(var F$A=F$k.length;F$T<F$A;F$T++)F$k[F$T].enable&&F$k[F$T].enable();return F$$.__init__(),F$X.__init__(),F$F.__init__(),F$a.beginCheck(),F$N._currentStage=F$N.stage=new F$ny,F$N.stage.conchModel&&F$N.stage.conchModel.setRootNode(),F$N._getUrlPath(),F$N.render=new F$S(0,0),F$N.stage.size(F$y,F$j),F$K.__init__(),F$l.__init__(),F$z.instance.__init__(F$N.stage,F$S.canvas),F$ey.__init__(),F$Q.autoStopMusic=!0,F$p.__init__(),F$S.canvas}},F$N._getUrlPath=function(){var F$y=F$G.window.location,F$j=F$y.pathname;F$j=F$j&&":"==F$j.charAt(2)?F$j.substring(1):F$j,F$w.rootPath=F$w.basePath=F$w.getPath("file:"==F$y.protocol?F$j:F$y.protocol+"//"+F$y.host+F$y.pathname)},F$N._arrayBufferSlice=function(F$y,F$j){var F$t=new Uint8Array(this,F$y,F$j-F$y),F$k=new Uint8Array(F$t.length);return F$k.set(F$t),F$k.buffer},F$N._runScript=function(F$y){return F$G.window[F$N._evcode](F$y)},F$N.stage=null,F$N.timer=null,F$N.scaleTimer=null,F$N.loader=null,F$N.version="1.8.6",F$N.render=null,F$N._currentStage=null,F$N._isinit=!1,F$N.isDebug=!1,F$N.MiniAdpter={init:function(){F$A.navigator&&F$A.navigator.userAgent&&-1<F$A.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},F$I(F$N,["conchMarket",function(){return this.conchMarket=F$A.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=F$A.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function F$y(){}return F$D(F$y,"Config"),F$y.WebGLTextCacheCount=500,F$y.atlasEnable=!1,F$y.showCanvasMark=!1,F$y.animationInterval=50,F$y.isAntialias=!1,F$y.isAlpha=!1,F$y.premultipliedAlpha=!0,F$y.isStencil=!0,F$y.preserveDrawingBuffer=!1,F$y}()),F$b=function(){function F$b(){this._events=null}F$D(F$b,"laya.events.EventDispatcher");var F$y=F$b.prototype;return F$y.hasListener=function(F$y){return!!(this._events&&this._events[F$y])},F$y.getListener=function(F$y){return this._events?this._events[F$y]:null},F$y.event=function(F$y,F$j){if(!this._events||!this._events[F$y])return!1;var F$t=this._events[F$y];if(F$t.lock)F$t.queue||(F$t.queue=[]),F$t.queue.push(F$j);else{var F$k;for(F$t.lock=!0,F$t.cursor=F$t.head;F$t.cursor;)(F$k=F$t.cursor).recover?(F$t.head=F$t.tail=F$t.cursor=null,console.error("node is recover："+F$k.id)):(F$t.cursor=F$k.next,F$k.once&&F$b.delNode(F$t,F$k),F$k.method&&(null!=F$j?F$k.args?F$k.method.apply(F$k.caller,F$k.args.concat(F$j)):F$j instanceof Array?F$k.method.apply(F$k.caller,F$j):F$k.caller?F$k.method.call(F$k.caller,F$j):F$N.recordError("事件派发错误","node.caller:"+F$k.caller+"node.method:"+F$k.method+"data:"+F$j+"node.prev"+F$k.prev):F$k.method.apply(F$k.caller,F$k.args)),F$k.once&&F$b.recoverHandler(F$k));F$t.lock=!1,!F$t.head&&this._events&&this._events[F$y]==F$t&&delete this._events[F$y],F$t.queue&&F$t.queue.length&&this.event(F$y,F$t.queue.shift())}return!0},F$y.on=function(F$y,F$j,F$t,F$k){return this._createListener(F$y,F$j,F$t,F$k,!1)},F$y.once=function(F$y,F$j,F$t,F$k){return this._createListener(F$y,F$j,F$t,F$k,!0)},F$y._createListener=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$Y&&(F$Y=!0),F$Y&&this.off(F$y,F$j,F$t,F$T);var F$A=F$b.createHandler(F$j||this,F$t,F$k,F$T);this._events||(this._events={});var F$X=this._events,F$I=F$X[F$y];return F$I?F$I.tail?(F$A.prev=F$I.tail,F$I.tail.next=F$A,F$I.tail=F$A):F$I.head=F$I.tail=F$A:F$X[F$y]={head:F$A,tail:F$A,cursor:null,lock:!1},this},F$y.off=function(F$y,F$j,F$t,F$k){if(void 0===F$k&&(F$k=!1),!this._events||!this._events[F$y])return this;for(var F$T=this._events[F$y],F$Y=F$T.head;F$Y;){if((!F$j||F$Y.caller===F$j)&&F$Y.method===F$t&&(!F$k||F$Y.once)){F$b.delNode(F$T,F$Y),F$T.cursor==F$Y&&(F$T.cursor=F$Y.next),F$b.recoverHandler(F$Y);break}F$Y=F$Y.next}return this},F$y.offAll=function(F$y){var F$j=this._events;if(!F$j)return this;if(F$y)this._recoverHandlers(F$j[F$y]),delete F$j[F$y];else{for(var F$t in F$j)this._recoverHandlers(F$j[F$t]);this._events=null}return this},F$y._recoverHandlers=function(F$y){if(F$y){for(var F$j=F$y.head;F$j;){F$b.delNode(F$y,F$j);var F$t=F$j.next;F$b.recoverHandler(F$j),F$j=F$t}F$y.cursor=null}},F$y.isMouseEvent=function(F$y){return F$b.MOUSE_EVENTS[F$y]},F$b.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},F$b.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},F$b.delNode=function(F$y,F$j){F$j.prev?F$j.prev.next=F$j.next:F$y.head=F$j.next,F$j.next?F$j.next.prev=F$j.prev:F$y.tail=F$j.prev},F$b.createHandler=function(F$y,F$j,F$t,F$k){var F$T=500<F$b._freeHandler.length?F$b._freeHandler.shift():null;if(F$T)if(F$T.recover)F$T.recover=!1,F$T.caller=F$y,F$T.method=F$j,F$T.args=F$t,F$T.once=F$k;else{var F$Y="";try{arguments.propertyIsEnumerable.caller}catch(F$y){F$Y=F$y.stack}var F$A=F$T.caller?(F$T.caller.__proto__&&F$T.caller.__proto__.constructor&&F$T.caller.__proto__.constructor.name)+"|"+F$T.caller.__className+"|"+F$T.caller.name:"",F$X=F$T.method?F$T.method.name:"";F$N.recordError("EventDispatcher重复创建","caller="+F$A+"  method="+F$X+"  stack="+F$Y),F$T={id:++F$b._nodeCount,caller:F$y,method:F$j,args:F$t,once:F$k,recover:!1}}else F$T={id:++F$b._nodeCount,caller:F$y,method:F$j,args:F$t,once:F$k,recover:!1};return F$T.prev=F$T.next=null,F$T},F$b.recoverHandler=function(F$y){if(F$y.recover){if(F$b._errorCount<5){F$b._errorCount++;var F$j="";try{arguments.propertyIsEnumerable.caller}catch(F$y){F$j=F$y.stack}var F$t=F$y.caller?(F$y.caller.__proto__&&F$y.caller.__proto__.constructor&&F$y.caller.__proto__.constructor.name)+"|"+F$y.caller.__className+"|"+F$y.caller.name:"",F$k=F$y.method?F$y.method.name:"";F$N.recordError("EventDispatcher重复回收","id="+F$y.id+"  caller="+F$t+"  method="+F$k+"  stack="+F$j)}F$y.caller=F$y.method=F$y.args=F$y.prev=null}else F$y.recover=!0,F$y.caller=F$y.method=F$y.args=F$y.prev=F$y.next=null,F$b._freeHandler&&F$b._freeHandler.length<3e3&&F$b._freeHandler.push(F$y)},F$b._freeHandler=[],F$b._nodeCount=0,F$b._errorCount=0,F$b}(),F$C=function(){function F$T(F$y,F$j,F$t,F$k){this.once=!1,void(this._id=0)===F$k&&(F$k=!1),this.setTo(F$y,F$j,F$t,F$k)}F$D(F$T,"laya.utils.Handler");var F$y=F$T.prototype;return F$y.setTo=function(F$y,F$j,F$t,F$k){return this._id=F$T._gid++,this.caller=F$y,this.method=F$j,this.args=F$t,this.once=F$k,this},F$y.run=function(){if(null==this.method)return null;var F$y=this._id,F$j=this.method.apply(this.caller,this.args);return this._id===F$y&&this.once&&this.recover(),F$j},F$y.runWith=function(F$y){if(null==this.method)return null;var F$j=this._id;if(null==F$y)var F$t=this.method.apply(this.caller,this.args);else F$t=this.args||F$y.unshift?this.args?this.method.apply(this.caller,this.args.concat(F$y)):this.method.apply(this.caller,F$y):this.method.call(this.caller,F$y);return this._id===F$j&&this.once&&this.recover(),F$t},F$y.clear=function(){return this.caller=null,this.method=null,this.args=null,this},F$y.recover=function(){0<this._id&&(this._id=0,this.clear())},F$T.create=function(F$y,F$j,F$t,F$k){return void 0===F$k&&(F$k=!0),new F$T(F$y,F$j,F$t,F$k)},F$T._gid=1,F$T}(),F$f=function(){function F$y(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}F$D(F$y,"laya.display.BitmapFont");var F$j=F$y.prototype;return F$j.loadFont=function(F$y,F$j){this._path=F$y,this._complete=F$j,F$N.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],F$C.create(this,this.onLoaded))},F$j.onLoaded=function(){this.parseFont(F$Xy.getRes(this._path),F$Xy.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},F$j.parseFont=function(F$y,F$j){if(null!=F$y&&null!=F$j){this._texture=F$j;var F$t=F$y.getElementsByTagName("info");if(!F$t[0].getAttributeNode)return this.parseFont2(F$y,F$j);this.fontSize=parseInt(F$t[0].getAttributeNode("size").nodeValue);var F$k,F$T=F$t[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(F$T[0]),parseInt(F$T[1]),parseInt(F$T[2]),parseInt(F$T[3])],F$k=F$y.getElementsByTagName("char");var F$Y=0;for(F$Y=0;F$Y<F$k.length;F$Y++){var F$A=F$k[F$Y],F$X=parseInt(F$A.getAttributeNode("id").nodeValue),F$I=parseInt(F$A.getAttributeNode("xoffset").nodeValue)/1,F$b=parseInt(F$A.getAttributeNode("yoffset").nodeValue)/1,F$D=parseInt(F$A.getAttributeNode("xadvance").nodeValue)/1,F$l=new F$d;F$l.x=parseInt(F$A.getAttributeNode("x").nodeValue),F$l.y=parseInt(F$A.getAttributeNode("y").nodeValue),F$l.width=parseInt(F$A.getAttributeNode("width").nodeValue),F$l.height=parseInt(F$A.getAttributeNode("height").nodeValue);var F$r=F$Dy.create(F$j,F$l.x,F$l.y,F$l.width,F$l.height,F$I,F$b);this._maxWidth=Math.max(this._maxWidth,F$D+this.letterSpacing),this._fontCharDic[F$X]=F$r,this._fontWidthMap[F$X]=F$D}}},F$j.parseFont2=function(F$y,F$j){if(null!=F$y&&null!=F$j){this._texture=F$j;var F$t=F$y.getElementsByTagName("info");this.fontSize=parseInt(F$t[0].attributes.size.nodeValue);var F$k=F$t[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(F$k[0]),parseInt(F$k[1]),parseInt(F$k[2]),parseInt(F$k[3])];var F$T=F$y.getElementsByTagName("char"),F$Y=0;for(F$Y=0;F$Y<F$T.length;F$Y++){var F$A=F$T[F$Y].attributes,F$X=parseInt(F$A.id.nodeValue),F$I=parseInt(F$A.xoffset.nodeValue)/1,F$b=parseInt(F$A.yoffset.nodeValue)/1,F$D=parseInt(F$A.xadvance.nodeValue)/1,F$l=new F$d;F$l.x=parseInt(F$A.x.nodeValue),F$l.y=parseInt(F$A.y.nodeValue),F$l.width=parseInt(F$A.width.nodeValue),F$l.height=parseInt(F$A.height.nodeValue);var F$r=F$Dy.create(F$j,F$l.x,F$l.y,F$l.width,F$l.height,F$I,F$b);this._maxWidth=Math.max(this._maxWidth,F$D+this.letterSpacing),this._fontCharDic[F$X]=F$r,this._fontWidthMap[F$X]=F$D}}},F$j.getCharTexture=function(F$y){return this._fontCharDic[F$y.charCodeAt(0)]},F$j.destroy=function(){if(this._texture){for(var F$y in this._fontCharDic){var F$j=this._fontCharDic[F$y];F$j&&F$j.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},F$j.setSpaceWidth=function(F$y){this._spaceWidth=F$y},F$j.getCharWidth=function(F$y){var F$j=F$y.charCodeAt(0);return this._fontWidthMap[F$j]?this._fontWidthMap[F$j]+this.letterSpacing:" "==F$y?this._spaceWidth+this.letterSpacing:0},F$j.getTextWidth=function(F$y){for(var F$j=0,F$t=0,F$k=F$y.length;F$t<F$k;F$t++)F$j+=this.getCharWidth(F$y.charAt(F$t));return F$j},F$j.getMaxWidth=function(){return this._maxWidth},F$j.getMaxHeight=function(){return this.fontSize},F$j.drawText=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A,F$X=this.getTextWidth(F$y),F$I=0;"center"===F$T&&(F$I=(F$Y-F$X)/2),"right"===F$T&&(F$I=F$Y-F$X);for(var F$b=0,F$D=0,F$l=F$y.length;F$D<F$l;F$D++)(F$A=this.getCharTexture(F$y.charAt(F$D)))&&(F$j.graphics.drawTexture(F$A,F$t+F$b+F$I,F$k),F$b+=this.getCharWidth(F$y.charAt(F$D)))},F$y}(),F$X=function(){function F$t(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=F$t._TF_EMPTY}F$D(F$t,"laya.display.css.Style");var F$y=F$t.prototype;return F$y.getTransform=function(){return this._tf},F$y.setTransform=function(F$y){this._tf="none"!==F$y&&F$y?F$y:F$t._TF_EMPTY},F$y.setTranslateX=function(F$y){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.translateX=F$y},F$y.setTranslateY=function(F$y){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.translateY=F$y},F$y.setScaleX=function(F$y){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.scaleX=F$y},F$y.setScale=function(F$y,F$j){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.scaleX=F$y,this._tf.scaleY=F$j},F$y.setScaleY=function(F$y){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.scaleY=F$y},F$y.setRotate=function(F$y){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.rotate=F$y},F$y.setSkewX=function(F$y){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.skewX=F$y},F$y.setSkewY=function(F$y){this._tf===F$t._TF_EMPTY&&(this._tf=new F$T),this._tf.skewY=F$y},F$y.destroy=function(){this.scrollRect=null},F$y.render=function(F$y,F$j,F$t,F$k){},F$y.getCSSStyle=function(){return F$jy.EMPTY},F$y._enableLayout=function(){return!1},F$W(0,F$y,"scaleX",function(){return this._tf.scaleX},function(F$y){this.setScaleX(F$y)}),F$W(0,F$y,"transform",function(){return this.getTransform()},function(F$y){this.setTransform(F$y)}),F$W(0,F$y,"translateX",function(){return this._tf.translateX},function(F$y){this.setTranslateX(F$y)}),F$W(0,F$y,"translateY",function(){return this._tf.translateY},function(F$y){this.setTranslateY(F$y)}),F$W(0,F$y,"scaleY",function(){return this._tf.scaleY},function(F$y){this.setScaleY(F$y)}),F$W(0,F$y,"block",function(){return 0!=(1&this._type)}),F$W(0,F$y,"skewY",function(){return this._tf.skewY},function(F$y){this.setSkewY(F$y)}),F$W(0,F$y,"rotate",function(){return this._tf.rotate},function(F$y){this.setRotate(F$y)}),F$W(0,F$y,"skewX",function(){return this._tf.skewX},function(F$y){this.setSkewX(F$y)}),F$W(0,F$y,"paddingLeft",function(){return 0}),F$W(0,F$y,"paddingTop",function(){return 0}),F$W(0,F$y,"absolute",function(){return!0}),F$t.__init__=function(){F$t._TF_EMPTY=new F$T,F$t.EMPTY=new F$t},F$t.EMPTY=null,F$t._TF_EMPTY=null,F$t}(),F$$=function(){function F$j(F$y){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=F$h.create(F$j.defaultColor),this.family=F$j.defaultFamily,this.stroke=F$j._STROKE,this.size=F$j.defaultSize,F$y&&F$y!==F$j.EMPTY&&F$y.copyTo(this)}F$D(F$j,"laya.display.css.Font");var F$y=F$j.prototype;return F$y.set=function(F$y){this._text=null;for(var F$j=F$y.split(" "),F$t=0,F$k=F$j.length;F$t<F$k;F$t++){var F$T=F$j[F$t];switch(F$T){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<F$T.indexOf("px")&&(this.size=parseInt(F$T),this.family=F$j[F$t+1],F$t++)}},F$y.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},F$y.copyTo=function(F$y){F$y._type=this._type,F$y._text=this._text,F$y._weight=this._weight,F$y._color=this._color,F$y.family=this.family,F$y.stroke=this.stroke!=F$j._STROKE?this.stroke.slice():F$j._STROKE,F$y.indent=this.indent,F$y.size=this.size},F$W(0,F$y,"password",function(){return 0!=(1024&this._type)},function(F$y){F$y?this._type|=1024:this._type&=-1025}),F$W(0,F$y,"color",function(){return this._color.strColor},function(F$y){this._color=F$h.create(F$y)}),F$W(0,F$y,"italic",function(){return 0!=(512&this._type)},function(F$y){F$y?this._type|=512:this._type&=-513}),F$W(0,F$y,"bold",function(){return 0!=(2048&this._type)},function(F$y){F$y?this._type|=2048:this._type&=-2049}),F$W(0,F$y,"weight",function(){return""+this._weight},function(F$y){var F$j=0;switch(F$y){case"normal":break;case"bold":this.bold=!0,F$j=700;break;case"bolder":F$j=800;break;case"lighter":F$j=100;break;default:F$j=parseInt(F$y)}this._weight=F$j,this._text=null}),F$W(0,F$y,"decoration",function(){return this._decoration?this._decoration.value:null},function(F$y){var F$j=F$y.split(" ");switch(this._decoration||(this._decoration={}),F$j[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=F$j[0]}F$j[1]&&(this._decoration.color=F$h.create(F$j)),this._decoration.value=F$y}),F$j.__init__=function(){F$j.EMPTY=new F$j(null)},F$j.EMPTY=null,F$j.defaultColor="#000000",F$j.defaultSize=12,F$j.defaultFamily="Arial",F$j.defaultFont="12px Arial",F$j._STROKE=[0,"#000000"],F$j._ITALIC=512,F$j._PASSWORD=1024,F$j._BOLD=2048,F$j}(),F$T=function(){function F$y(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return F$D(F$y,"laya.display.css.TransformInfo"),F$y}(),F$r=function(){function F$l(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,F$S.isConchNode){this._nativeObj=new F$A._conchGraphics,this.id=this._nativeObj.conchID}}F$D(F$l,"laya.display.Graphics");var F$y=F$l.prototype;return F$y.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},F$y.clear=function(F$y){void 0===F$y&&(F$y=!1);var F$j=0,F$t=0;if(F$y){var F$k=this._one;if(this._cmds){for(F$t=this._cmds.length,F$j=0;F$j<F$t;F$j++)!(F$k=this._cmds[F$j])||F$k.callee!==F$S._context._drawTexture&&F$k.callee!==F$S._context._drawTextureWithTransform||(F$k[0]=null,F$l._cache.push(F$k));this._cmds.length=0}else F$k&&(!F$k||F$k.callee!==F$S._context._drawTexture&&F$k.callee!==F$S._context._drawTextureWithTransform||(F$k[0]=null,F$l._cache.push(F$k)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(F$j=0,F$t=this._vectorgraphArray.length;F$j<F$t;F$j++)F$i.getInstance().deleteShape(this._vectorgraphArray[F$j]);this._vectorgraphArray.length=0}},F$y._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},F$y._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new F$t,this._graphicBounds._graphics=this)},F$y._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},F$y._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},F$y.getBounds=function(F$y){return void 0===F$y&&(F$y=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(F$y)},F$y.getBoundPoints=function(F$y){return void 0===F$y&&(F$y=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(F$y)},F$y._addCmd=function(F$y){this._cmds=this._cmds||[],F$y.callee=F$y.shift(),this._cmds.push(F$y)},F$y.setFilters=function(F$y){this._saveToCmd(F$S._context._setFilters,F$y)},F$y.drawTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){if(void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),void 0===F$A&&(F$A=1),!F$y||F$A<.01)return null;F$k||(F$k=F$y.sourceWidth),F$T||(F$T=F$y.sourceHeight),F$A=F$A<0?0:1<F$A?1:F$A;var F$X,F$I=!F$S.isWebGL&&(F$G.onFirefox||F$G.onEdge||F$G.onIE||F$G.onSafari)?.5:0,F$b=F$k/F$y.sourceWidth,F$D=F$T/F$y.sourceHeight;return F$k=F$y.width*F$b,F$T=F$y.height*F$D,F$y.loaded&&(F$k<=0||F$T<=0)?null:(F$j+=F$y.offsetX*F$b,F$t+=F$y.offsetY*F$D,this._sp&&(this._sp._renderType|=512),F$j-=F$I,F$t-=F$I,F$k+=2*F$I,F$T+=2*F$I,F$l._cache.length?((F$X=F$l._cache.pop())[0]=F$y,F$X[1]=F$j,F$X[2]=F$t,F$X[3]=F$k,F$X[4]=F$T,F$X[5]=F$Y,F$X[6]=F$A):F$X=[F$y,F$j,F$t,F$k,F$T,F$Y,F$A],F$X.callee=F$Y||1!=F$A?F$S._context._drawTextureWithTransform:F$S._context._drawTexture,null!=this._one||F$Y||1!=F$A?this._saveToCmd(F$X.callee,F$X):(this._one=F$X,this._render=this._renderOneImg),F$y.loaded||F$y.once("loaded",this,this._textureLoaded,[F$y,F$X]),this._repaint(),F$X)},F$y.cleanByTexture=function(F$y,F$j,F$t,F$k,F$T){if(void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),!F$y)return this.clear();if(this._one&&this._render===this._renderOneImg){F$k||(F$k=F$y.sourceWidth),F$T||(F$T=F$y.sourceHeight);var F$Y=F$k/F$y.sourceWidth,F$A=F$T/F$y.sourceHeight;F$k=F$y.width*F$Y,F$T=F$y.height*F$A,F$j+=F$y.offsetX*F$Y,F$t+=F$y.offsetY*F$A,this._one[0]=F$y,this._one[1]=F$j,this._one[2]=F$t,this._one[3]=F$k,this._one[4]=F$T,this._repaint()}else this.clear(),F$y&&this.drawTexture(F$y,F$j,F$t,F$k,F$T)},F$y.drawTextures=function(F$y,F$j){F$y&&this._saveToCmd(F$S._context._drawTextures,[F$y,F$j])},F$y.fillTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){if(void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y="repeat"),F$y){var F$X=[F$y,F$j,F$t,F$k,F$T,F$Y,F$A||F$P.EMPTY,{}];F$y.loaded||F$y.once("loaded",this,this._textureLoaded,[F$y,F$X]),this._saveToCmd(F$S._context._fillTexture,F$X)}},F$y._textureLoaded=function(F$y,F$j){F$j[3]=F$j[3]||F$y.width,F$j[4]=F$j[4]||F$y.height,this._repaint()},F$y.fillCircle=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$t.bitmap.enableMerageInAtlas=!1;var F$X=new Float32Array(2*(F$A+1)),F$I=new Float32Array(2*(F$A+1)),F$b=new Uint16Array(3*F$A),F$D=2*Math.PI/F$A,F$l=0;F$X[0]=F$k,F$X[1]=F$T,F$I[0]=F$k/F$t.width,F$I[1]=F$T/F$t.height;for(var F$r=2,F$$=0;F$$<F$A;F$$++){var F$W=F$Y*Math.cos(F$l)+F$k,F$z=F$Y*Math.sin(F$l)+F$T;F$X[F$r]=F$W,F$X[F$r+1]=F$z,F$I[F$r]=F$W/F$t.width,F$I[F$r+1]=F$z/F$t.height,F$l+=F$D,F$r+=2}for(F$$=F$r=0;F$$<F$A;F$$++)F$b[F$r++]=0,F$b[F$r++]=F$$+1,F$b[F$r++]=F$A+1<=F$$+2?1:F$$+2;this.drawTriangles(F$t,F$y,F$j,F$X,F$I,F$b)},F$y.drawTriangles=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){void 0===F$X&&(F$X=1),this._saveToCmd(F$S._context.drawTriangles,[F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b])},F$y._saveToCmd=function(F$y,F$j){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=F$j,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(F$j)),F$j.callee=F$y,this._repaint(),F$j},F$y.clipRect=function(F$y,F$j,F$t,F$k){this._saveToCmd(F$S._context._clipRect,[F$y,F$j,F$t,F$k])},F$y.fillText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){void 0===F$A&&(F$A=0),this._saveToCmd(F$S._context._fillText,[F$y,F$j,F$t,F$k||F$$.defaultFont,F$T,F$Y])},F$y.fillBorderText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){this._saveToCmd(F$S._context._fillBorderText,[F$y,F$j,F$t,F$k||F$$.defaultFont,F$T,F$Y,F$A,F$X])},F$y.strokeText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._saveToCmd(F$S._context._strokeText,[F$y,F$j,F$t,F$k||F$$.defaultFont,F$T,F$Y,F$A])},F$y.alpha=function(F$y){F$y=F$y<0?0:1<F$y?1:F$y,this._saveToCmd(F$S._context._alpha,[F$y])},F$y.setAlpha=function(F$y){F$y=F$y<0?0:1<F$y?1:F$y,this._saveToCmd(F$S._context._setAlpha,[F$y])},F$y.transform=function(F$y,F$j,F$t){void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),this._saveToCmd(F$S._context._transform,[F$y,F$j,F$t])},F$y.rotate=function(F$y,F$j,F$t){void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),this._saveToCmd(F$S._context._rotate,[F$y,F$j,F$t])},F$y.scale=function(F$y,F$j,F$t,F$k){void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0),this._saveToCmd(F$S._context._scale,[F$y,F$j,F$t,F$k])},F$y.translate=function(F$y,F$j){this._saveToCmd(F$S._context._translate,[F$y,F$j])},F$y.save=function(){this._saveToCmd(F$S._context._save,[])},F$y.restore=function(){this._saveToCmd(F$S._context._restore,[])},F$y.replaceText=function(F$y){this._repaint();var F$j=this._cmds;if(F$j){for(var F$t=F$j.length-1;-1<F$t;F$t--)if(this._isTextCmd(F$j[F$t].callee))return F$j[F$t][0].toUpperCase?F$j[F$t][0]=F$y:F$j[F$t][0].setText(F$y),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=F$y:this._one[0].setText(F$y),!0;return!1},F$y._isTextCmd=function(F$y){return F$y===F$S._context._fillText||F$y===F$S._context._fillBorderText||F$y===F$S._context._strokeText},F$y.replaceTextColor=function(F$y){this._repaint();var F$j=this._cmds;if(F$j)for(var F$t=F$j.length-1;-1<F$t;F$t--)this._isTextCmd(F$j[F$t].callee)&&(F$j[F$t][4]=F$y,F$j[F$t][0].toUpperCase||(F$j[F$t][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=F$y,this._one[0].toUpperCase||(this._one[0].changed=!0))},F$y.loadImage=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=this;void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0);var F$X=F$Xy.getRes(F$y);function F$I(F$y){F$y&&(F$A.drawTexture(F$y,F$j,F$t,F$k,F$T),null!=F$Y&&F$Y.call(F$A._sp,F$y))}F$X?F$I(F$X):F$N.loader.load(F$y,F$C.create(null,F$I),null,"image")},F$y._renderEmpty=function(F$y,F$j,F$t,F$k){},F$y._renderAll=function(F$y,F$j,F$t,F$k){for(var F$T,F$Y=this._cmds,F$A=0,F$X=F$Y.length;F$A<F$X;F$A++)(F$T=F$Y[F$A]).callee.call(F$j,F$t,F$k,F$T)},F$y._renderOne=function(F$y,F$j,F$t,F$k){this._one.callee.call(F$j,F$t,F$k,this._one)},F$y._renderOneImg=function(F$y,F$j,F$t,F$k){this._one.callee.call(F$j,F$t,F$k,this._one),2305!==F$y._renderType&&(F$y._renderType|=1)},F$y.drawLine=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$Y&&(F$Y=1);var F$A=0;F$S.isWebGL&&(F$A=F$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$A));var F$X=F$Y%2==0?0:.5,F$I=[F$y+F$X,F$j+F$X,F$t+F$X,F$k+F$X,F$T,F$Y,F$A];this._saveToCmd(F$S._context._drawLine,F$I)},F$y.drawLines=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=1);var F$Y=0;if(F$t&&!(F$t.length<4)){F$S.isWebGL&&(F$Y=F$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$Y));var F$A=F$T%2==0?0:.5,F$X=[F$y+F$A,F$j+F$A,F$t,F$k,F$T,F$Y];this._saveToCmd(F$S._context._drawLines,F$X)}},F$y.drawCurves=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=1);var F$Y=[F$y,F$j,F$t,F$k,F$T];this._saveToCmd(F$S._context._drawCurves,F$Y)},F$y.drawRect=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){void 0===F$A&&(F$A=1);var F$X=F$Y?F$A/2:0,F$I=F$Y?F$A:0,F$b=[F$y+F$X,F$j+F$X,F$t-F$I,F$k-F$I,F$T,F$Y,F$A];this._saveToCmd(F$S._context._drawRect,F$b)},F$y.drawCircle=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$Y&&(F$Y=1);var F$A=F$T?F$Y/2:0,F$X=0;F$S.isWebGL&&(F$X=F$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$X));var F$I=[F$y,F$j,F$t-F$A,F$k,F$T,F$Y,F$X];this._saveToCmd(F$S._context._drawCircle,F$I)},F$y.drawPie=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){void 0===F$X&&(F$X=1);var F$I=F$A?F$X/2:0,F$b=F$A?F$X:0,F$D=0;F$S.isWebGL&&(F$D=F$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$D));var F$l=[F$y+F$I,F$j+F$I,F$t-F$b,F$k,F$T,F$Y,F$A,F$X,F$D];F$l[3]=F$o.toRadian(F$k),F$l[4]=F$o.toRadian(F$T),this._saveToCmd(F$S._context._drawPie,F$l)},F$y.drawPoly=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$Y&&(F$Y=1);var F$A=0,F$X=!1;F$S.isWebGL&&(F$A=F$i.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(F$A),F$X=!(6<F$t.length));var F$I=F$T?F$Y%2==0?0:.5:0,F$b=[F$y+F$I,F$j+F$I,F$t,F$k,F$T,F$Y,F$A,F$X];this._saveToCmd(F$S._context._drawPoly,F$b)},F$y.drawPath=function(F$y,F$j,F$t,F$k,F$T){var F$Y=[F$y,F$j,F$t,F$k,F$T];this._saveToCmd(F$S._context._drawPath,F$Y)},F$W(0,F$y,"cmds",function(){return this._cmds},function(F$y){this._sp&&(this._sp._renderType|=512),this._cmds=F$y,this._render=this._renderAll,this._repaint()}),F$l.__init__=function(){if(F$S.isConchNode){for(var F$y=laya.display.Graphics.prototype,F$j=F$G.window.ConchGraphics.prototype,F$t=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],F$k=0,F$T=F$t.length;F$k<=F$T;F$k++){var F$Y=F$t[F$k];F$y[F$Y]=F$j[F$Y]}F$y._saveToCmd=null,F$j.drawImageS&&(F$y.drawTextures=function(F$y,F$j){if(F$y&&F$y.loaded&&F$y.bitmap&&F$y.source){var F$t=F$y.uv,F$k=F$y.bitmap.width,F$T=F$y.bitmap.height;this.drawImageS(F$y.bitmap.source,F$t[0]*F$k,F$t[1]*F$T,(F$t[2]-F$t[0])*F$k,(F$t[5]-F$t[3])*F$T,F$y.offsetX,F$y.offsetY,F$y.width,F$y.height,F$j)}}),F$y.drawTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){if(void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),void 0===F$A&&(F$A=1),F$y)if(F$y.loaded){if(F$y.loaded&&F$y.bitmap&&F$y.source&&(F$k||(F$k=F$y.sourceWidth),F$T||(F$T=F$y.sourceHeight),F$A=F$A<0?0:1<F$A?1:F$A,F$k=F$k-F$y.sourceWidth+F$y.width,F$T=F$T-F$y.sourceHeight+F$y.height,!(F$k<=0||F$T<=0))){F$j+=F$y.offsetX,F$t+=F$y.offsetY;var F$X=F$y.uv,F$I=F$y.bitmap.width,F$b=F$y.bitmap.height;F$X[4]<F$X[0]&&F$X[5]<F$X[1]?this.drawImageM(F$y.bitmap.source,F$X[4]*F$I,F$X[5]*F$b,(F$X[0]-F$X[4])*F$I,(F$X[1]-F$X[5])*F$b,F$j,F$t,F$k,F$T,F$Y,F$A):this.drawImageM(F$y.bitmap.source,F$X[0]*F$I,F$X[1]*F$b,(F$X[2]-F$X[0])*F$I,(F$X[5]-F$X[3])*F$b,F$j,F$t,F$k,F$T,F$Y,F$A),this._repaint()}}else F$y.once("loaded",this,function(){this.drawTexture(F$y,F$j,F$t,F$k,F$T,F$Y)})},F$y.fillTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){if(void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y="repeat"),F$y&&F$y.loaded){var F$X,F$I=F$S._context.ctx,F$b=F$y.bitmap.width,F$D=F$y.bitmap.height,F$l=F$y.uv;F$X=F$y.uv!=F$Dy.DEF_UV?F$I.createPattern(F$y.bitmap.source,F$Y,F$l[0]*F$b,F$l[1]*F$D,(F$l[2]-F$l[0])*F$b,(F$l[5]-F$l[3])*F$D):F$I.createPattern(F$y.bitmap.source,F$Y);var F$r=0,F$$=0;F$A&&(F$j+=F$A.x%F$y.width,F$t+=F$A.y%F$y.height,F$r-=F$A.x%F$y.width,F$$-=F$A.y%F$y.height),this._fillImage(F$X,F$j,F$t,F$r,F$$,F$k,F$T)}}}},F$l._cache=[],F$l}(),F$t=function(){function F$M(){this._cacheBoundsType=!1}F$D(F$M,"laya.display.GraphicsBounds");var F$y=F$M.prototype;return F$y.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},F$y.reset=function(){this._temp&&(this._temp.length=0)},F$y.getBounds=function(F$y){return void 0===F$y&&(F$y=!1),(!this._bounds||!this._temp||this._temp.length<1||F$y!=this._cacheBoundsType)&&(this._bounds=F$d._getWrapRec(this.getBoundPoints(F$y),this._bounds)),this._cacheBoundsType=F$y,this._bounds},F$y.getBoundPoints=function(F$y){return void 0===F$y&&(F$y=!1),(!this._temp||this._temp.length<1||F$y!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(F$y)),this._cacheBoundsType=F$y,this._rstBoundPoints=F$o.copyArray(this._rstBoundPoints,this._temp)},F$y._getCmdPoints=function(F$y){void 0===F$y&&(F$y=!1);var F$j,F$t,F$k=F$S._context,F$T=this._graphics.cmds;if((F$j=this._temp||(this._temp=[])).length=0,F$T||null==this._graphics._one||(F$M._tempCmds.length=0,F$M._tempCmds.push(this._graphics._one),F$T=F$M._tempCmds),!F$T)return F$j;(F$t=F$M._tempMatrixArrays).length=0;var F$Y=F$M._initMatrix;F$Y.identity();for(var F$A,F$X,F$I=F$M._tempMatrix,F$b=NaN,F$D=NaN,F$l=NaN,F$r=NaN,F$$=NaN,F$W=NaN,F$z=0,F$V=F$T.length;F$z<F$V;F$z++)if((F$A=F$T[F$z]).callee)switch(F$A.callee){case F$k._save:case 7:F$t.push(F$Y),F$Y=F$Y.clone();break;case F$k._restore:case 8:F$Y=F$t.pop();break;case F$k._scale:case 5:F$I.identity(),F$I.translate(-F$A[2],-F$A[3]),F$I.scale(F$A[0],F$A[1]),F$I.translate(F$A[2],F$A[3]),this._switchMatrix(F$Y,F$I);break;case F$k._rotate:case 3:F$I.identity(),F$I.translate(-F$A[1],-F$A[2]),F$I.rotate(F$A[0]),F$I.translate(F$A[1],F$A[2]),this._switchMatrix(F$Y,F$I);break;case F$k._translate:case 6:F$I.identity(),F$I.translate(F$A[0],F$A[1]),this._switchMatrix(F$Y,F$I);break;case F$k._transform:case 4:F$I.identity(),F$I.translate(-F$A[1],-F$A[2]),F$I.concat(F$A[0]),F$I.translate(F$A[1],F$A[2]),this._switchMatrix(F$Y,F$I);break;case 16:case 24:F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[0],F$A[1],F$A[2],F$A[3]),F$Y);break;case 17:F$Y.copyTo(F$I),F$I.concat(F$A[4]),F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[0],F$A[1],F$A[2],F$A[3]),F$I);break;case F$k._drawTexture:F$X=F$A[0],F$y?F$A[3]&&F$A[4]?F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1],F$A[2],F$A[3],F$A[4]),F$Y):(F$X=F$A[0],F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1],F$A[2],F$X.width,F$X.height),F$Y)):(F$b=(F$A[3]||F$X.sourceWidth)/F$X.width,F$D=(F$A[4]||F$X.sourceHeight)/F$X.height,F$l=F$b*F$X.sourceWidth,F$r=F$D*F$X.sourceHeight,F$$=0<F$X.offsetX?F$X.offsetX:0,F$W=0<F$X.offsetY?F$X.offsetY:0,F$$*=F$b,F$W*=F$D,F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1]-F$$,F$A[2]-F$W,F$l,F$r),F$Y));break;case F$k._fillTexture:F$A[3]&&F$A[4]?F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1],F$A[2],F$A[3],F$A[4]),F$Y):(F$X=F$A[0],F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1],F$A[2],F$X.width,F$X.height),F$Y));break;case F$k._drawTextureWithTransform:var F$n;F$n=F$A[5]?(F$Y.copyTo(F$I),F$I.concat(F$A[5]),F$I):F$Y,F$y?F$A[3]&&F$A[4]?F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1],F$A[2],F$A[3],F$A[4]),F$n):(F$X=F$A[0],F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1],F$A[2],F$X.width,F$X.height),F$n)):(F$X=F$A[0],F$b=(F$A[3]||F$X.sourceWidth)/F$X.width,F$D=(F$A[4]||F$X.sourceHeight)/F$X.height,F$l=F$b*F$X.sourceWidth,F$r=F$D*F$X.sourceHeight,F$$=0<F$X.offsetX?F$X.offsetX:0,F$W=0<F$X.offsetY?F$X.offsetY:0,F$$*=F$b,F$W*=F$D,F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[1]-F$$,F$A[2]-F$W,F$l,F$r),F$n));break;case F$k._drawRect:case 13:F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[0],F$A[1],F$A[2],F$A[3]),F$Y);break;case F$k._drawCircle:case F$k._fillCircle:case 14:F$M._addPointArrToRst(F$j,F$d._getBoundPointS(F$A[0]-F$A[2],F$A[1]-F$A[2],F$A[2]+F$A[2],F$A[2]+F$A[2]),F$Y);break;case F$k._drawLine:case 20:F$M._tempPoints.length=0;var F$C;F$C=.5*F$A[5],F$A[0]==F$A[2]?F$M._tempPoints.push(F$A[0]+F$C,F$A[1],F$A[2]+F$C,F$A[3],F$A[0]-F$C,F$A[1],F$A[2]-F$C,F$A[3]):F$A[1]==F$A[3]?F$M._tempPoints.push(F$A[0],F$A[1]+F$C,F$A[2],F$A[3]+F$C,F$A[0],F$A[1]-F$C,F$A[2],F$A[3]-F$C):F$M._tempPoints.push(F$A[0],F$A[1],F$A[2],F$A[3]),F$M._addPointArrToRst(F$j,F$M._tempPoints,F$Y);break;case F$k._drawCurves:case 22:F$M._addPointArrToRst(F$j,F$_.I.getBezierPoints(F$A[2]),F$Y,F$A[0],F$A[1]);break;case F$k._drawPoly:case F$k._drawLines:case 18:F$M._addPointArrToRst(F$j,F$A[2],F$Y,F$A[0],F$A[1]);break;case F$k._drawPath:case 19:F$M._addPointArrToRst(F$j,this._getPathPoints(F$A[2]),F$Y,F$A[0],F$A[1]);break;case F$k._drawPie:case 15:F$M._addPointArrToRst(F$j,this._getPiePoints(F$A[0],F$A[1],F$A[2],F$A[3],F$A[4]),F$Y)}return 200<F$j.length?F$j=F$o.copyArray(F$j,F$d._getWrapRec(F$j)._getBoundPoints()):8<F$j.length&&(F$j=F$e.scanPList(F$j)),F$j},F$y._switchMatrix=function(F$y,F$j){F$j.concat(F$y),F$j.copyTo(F$y)},F$y._getPiePoints=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$M._tempPoints;F$M._tempPoints.length=0,F$Y.push(F$y,F$j);var F$A=(F$T-F$k)%(2*Math.PI)/10,F$X=NaN,F$I=F$k;for(F$X=0;F$X<=10;F$X++)F$Y.push(F$y+F$t*Math.cos(F$I),F$j+F$t*Math.sin(F$I)),F$I+=F$A;return F$Y},F$y._getPathPoints=function(F$y){var F$j,F$t,F$k=0,F$T=F$M._tempPoints;for(F$T.length=0,F$j=F$y.length,F$k=0;F$k<F$j;F$k++)1<(F$t=F$y[F$k]).length&&(F$T.push(F$t[1],F$t[2]),3<F$t.length&&F$T.push(F$t[3],F$t[4]));return F$T},F$M._addPointArrToRst=function(F$y,F$j,F$t,F$k,F$T){void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0);var F$Y,F$A=0;for(F$Y=F$j.length,F$A=0;F$A<F$Y;F$A+=2)F$M._addPointToRst(F$y,F$j[F$A]+F$k,F$j[F$A+1]+F$T,F$t)},F$M._addPointToRst=function(F$y,F$j,F$t,F$k){var F$T=F$P.TEMP;F$T.setTo(F$j||0,F$t||0),F$k.transformPoint(F$T),F$y.push(F$T.x,F$T.y)},F$M._tempPoints=[],F$M._tempMatrixArrays=[],F$M._tempCmds=[],F$I(F$M,["_tempMatrix",function(){return this._tempMatrix=new F$U},"_initMatrix",function(){return this._initMatrix=new F$U}]),F$M}(),F$Y=function(){function F$y(){}F$D(F$y,"laya.events.Event");var F$j=F$y.prototype;return F$j.setTo=function(F$y,F$j,F$t){return this.type=F$y,this.currentTarget=F$j,this.target=F$t,this},F$j.stopPropagation=function(){this._stoped=!0},F$W(0,F$j,"stageY",function(){return F$N.stage.mouseY}),F$W(0,F$j,"charCode",function(){return this.nativeEvent.charCode}),F$W(0,F$j,"touches",function(){var F$y=this.nativeEvent.touches;if(F$y)for(var F$j=F$N.stage,F$t=0,F$k=F$y.length;F$t<F$k;F$t++){var F$T=F$y[F$t],F$Y=F$P.TEMP;F$Y.setTo(F$T.clientX,F$T.clientY),F$j._canvasTransform.invertTransformPoint(F$Y),F$j.transform.invertTransformPoint(F$Y),F$T.stageX=F$Y.x,F$T.stageY=F$Y.y}return F$y}),F$W(0,F$j,"keyLocation",function(){return this.nativeEvent.keyLocation}),F$W(0,F$j,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),F$W(0,F$j,"altKey",function(){return this.nativeEvent.altKey}),F$W(0,F$j,"shiftKey",function(){return this.nativeEvent.shiftKey}),F$W(0,F$j,"stageX",function(){return F$N.stage.mouseX}),F$y.EMPTY=new F$y,F$y.MOUSE_DOWN="mousedown",F$y.MOUSE_UP="mouseup",F$y.CLICK="click",F$y.RIGHT_MOUSE_DOWN="rightmousedown",F$y.RIGHT_MOUSE_UP="rightmouseup",F$y.RIGHT_CLICK="rightclick",F$y.MOUSE_MOVE="mousemove",F$y.MOUSE_OVER="mouseover",F$y.MOUSE_OUT="mouseout",F$y.MOUSE_WHEEL="mousewheel",F$y.ROLL_OVER="mouseover",F$y.ROLL_OUT="mouseout",F$y.DOUBLE_CLICK="doubleclick",F$y.CHANGE="change",F$y.CHANGED="changed",F$y.RESIZE="resize",F$y.ADDED="added",F$y.REMOVED="removed",F$y.DISPLAY="display",F$y.UNDISPLAY="undisplay",F$y.ERROR="error",F$y.COMPLETE="complete",F$y.LOADED="loaded",F$y.INITED="inited",F$y.PROGRESS="progress",F$y.INPUT="input",F$y.RENDER="render",F$y.OPEN="open",F$y.MESSAGE="message",F$y.CLOSE="close",F$y.KEY_DOWN="keydown",F$y.KEY_PRESS="keypress",F$y.KEY_UP="keyup",F$y.FRAME="enterframe",F$y.DRAG_START="dragstart",F$y.DRAG_MOVE="dragmove",F$y.DRAG_END="dragend",F$y.ENTER="enter",F$y.SELECT="select",F$y.BLUR="blur",F$y.FOCUS="focus",F$y.VISIBILITY_CHANGE="visibilitychange",F$y.FOCUS_CHANGE="focuschange",F$y.PLAYED="played",F$y.PAUSED="paused",F$y.STOPPED="stopped",F$y.START="start",F$y.END="end",F$y.ENABLE_CHANGED="enablechanged",F$y.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",F$y.COMPONENT_ADDED="componentadded",F$y.COMPONENT_REMOVED="componentremoved",F$y.LAYER_CHANGED="layerchanged",F$y.HIERARCHY_LOADED="hierarchyloaded",F$y.RECOVERED="recovered",F$y.RELEASED="released",F$y.LINK="link",F$y.LABEL="label",F$y.FULL_SCREEN_CHANGE="fullscreenchange",F$y.DEVICE_LOST="devicelost",F$y.MESH_CHANGED="meshchanged",F$y.MATERIAL_CHANGED="materialchanged",F$y.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",F$y.ANIMATION_CHANGED="animationchanged",F$y.TRIGGER_ENTER="triggerenter",F$y.TRIGGER_STAY="triggerstay",F$y.TRIGGER_EXIT="triggerexit",F$y.TRAIL_FILTER_CHANGE="trailfilterchange",F$y.DOMINO_FILTER_CHANGE="dominofilterchange",F$y}(),F$l=(function(){function F$y(){}F$D(F$y,"laya.events.Keyboard"),F$y.NUMBER_0=48,F$y.NUMBER_1=49,F$y.NUMBER_2=50,F$y.NUMBER_3=51,F$y.NUMBER_4=52,F$y.NUMBER_5=53,F$y.NUMBER_6=54,F$y.NUMBER_7=55,F$y.NUMBER_8=56,F$y.NUMBER_9=57,F$y.A=65,F$y.B=66,F$y.C=67,F$y.D=68,F$y.E=69,F$y.F=70,F$y.G=71,F$y.H=72,F$y.I=73,F$y.J=74,F$y.K=75,F$y.L=76,F$y.M=77,F$y.N=78,F$y.O=79,F$y.P=80,F$y.Q=81,F$y.R=82,F$y.S=83,F$y.T=84,F$y.U=85,F$y.V=86,F$y.W=87,F$y.X=88,F$y.Y=89,F$y.Z=90,F$y.F1=112,F$y.F2=113,F$y.F3=114,F$y.F4=115,F$y.F5=116,F$y.F6=117,F$y.F7=118,F$y.F8=119,F$y.F9=120,F$y.F10=121,F$y.F11=122,F$y.F12=123,F$y.F13=124,F$y.F14=125,F$y.F15=126,F$y.NUMPAD=21,F$y.NUMPAD_0=96,F$y.NUMPAD_1=97,F$y.NUMPAD_2=98,F$y.NUMPAD_3=99,F$y.NUMPAD_4=100,F$y.NUMPAD_5=101,F$y.NUMPAD_6=102,F$y.NUMPAD_7=103,F$y.NUMPAD_8=104,F$y.NUMPAD_9=105,F$y.NUMPAD_ADD=107,F$y.NUMPAD_DECIMAL=110,F$y.NUMPAD_DIVIDE=111,F$y.NUMPAD_ENTER=108,F$y.NUMPAD_MULTIPLY=106,F$y.NUMPAD_SUBTRACT=109,F$y.SEMICOLON=186,F$y.EQUAL=187,F$y.COMMA=188,F$y.MINUS=189,F$y.PERIOD=190,F$y.SLASH=191,F$y.BACKQUOTE=192,F$y.LEFTBRACKET=219,F$y.BACKSLASH=220,F$y.RIGHTBRACKET=221,F$y.QUOTE=222,F$y.ALTERNATE=18,F$y.BACKSPACE=8,F$y.CAPS_LOCK=20,F$y.COMMAND=15,F$y.CONTROL=17,F$y.DELETE=46,F$y.ENTER=13,F$y.ESCAPE=27,F$y.PAGE_UP=33,F$y.PAGE_DOWN=34,F$y.END=35,F$y.HOME=36,F$y.LEFT=37,F$y.UP=38,F$y.RIGHT=39,F$y.DOWN=40,F$y.SHIFT=16,F$y.SPACE=32,F$y.TAB=9,F$y.INSERT=45}(),function(){function F$T(){}return F$D(F$T,"laya.events.KeyBoardManager"),F$T.__init__=function(){F$T._addEvent("keydown"),F$T._addEvent("keypress"),F$T._addEvent("keyup")},F$T._addEvent=function(F$j){F$G.document.addEventListener(F$j,function(F$y){laya.events.KeyBoardManager._dispatch(F$y,F$j)},!0)},F$T._dispatch=function(F$y,F$j){if(F$T.enabled){F$T._event._stoped=!1,F$T._event.nativeEvent=F$y,F$T._event.keyCode=F$y.keyCode||F$y.which||F$y.charCode,"keydown"===F$j?F$T._pressKeys[F$T._event.keyCode]=!0:"keyup"===F$j&&(F$T._pressKeys[F$T._event.keyCode]=null);for(var F$t=F$N.stage.focus&&null!=F$N.stage.focus.event&&F$N.stage.focus.displayedInStage?F$N.stage.focus:F$N.stage,F$k=F$t;F$k;)F$k.event(F$j,F$T._event.setTo(F$j,F$k,F$t)),F$k=F$k.parent}},F$T.hasKeyDown=function(F$y){return F$T._pressKeys[F$y]},F$T._pressKeys={},F$T.enabled=!0,F$I(F$T,["_event",function(){return this._event=new F$Y}]),F$T}()),F$z=(function(){function F$y(){}F$D(F$y,"laya.events.KeyLocation"),F$y.STANDARD=0,F$y.LEFT=1,F$y.RIGHT=2,F$y.NUM_PAD=3}(),function(){function F$b(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=F$G.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new F$Y,this._matrix=new F$U,this._point=new F$P,this._rect=new F$d,this._prePoint=new F$P,this._curTouchID=NaN}F$D(F$b,"laya.events.MouseManager");var F$y=F$b.prototype;return F$y.__init__=function(F$y,F$j){var F$t=this;this._stage=F$y;var F$k=this,F$T=this._eventList;F$j.oncontextmenu=function(F$y){if(F$b.enabled)return!1},F$j.addEventListener("mousedown",function(F$y){F$b.enabled&&(F$G.onIE||F$y.preventDefault(),F$T.push(F$y),F$k.mouseDownTime=F$G.now())}),F$j.addEventListener("mouseup",function(F$y){F$b.enabled&&(F$y.preventDefault(),F$T.push(F$y),F$k.mouseDownTime=-F$G.now())},!0),F$j.addEventListener("mousemove",function(F$y){if(F$b.enabled){F$y.preventDefault();var F$j=F$G.now();if(F$j-F$k._lastMoveTimer<10)return;F$k._lastMoveTimer=F$j,F$T.push(F$y)}},!0),F$j.addEventListener("mouseout",function(F$y){F$b.enabled&&F$T.push(F$y)}),F$j.addEventListener("mouseover",function(F$y){F$b.enabled&&F$T.push(F$y)}),F$j.addEventListener("touchstart",function(F$y){F$b.enabled&&(F$T.push(F$y),F$b._isFirstTouch||F$ey.isInputting||F$y.preventDefault(),F$k.mouseDownTime=F$G.now())}),F$j.addEventListener("touchend",function(F$y){F$b.enabled?(F$b._isFirstTouch||F$ey.isInputting||F$y.preventDefault(),F$b._isFirstTouch=!1,F$T.push(F$y),F$k.mouseDownTime=-F$G.now()):F$t._curTouchID=NaN},!0),F$j.addEventListener("touchmove",function(F$y){F$b.enabled&&(F$y.preventDefault(),F$T.push(F$y))},!0),F$j.addEventListener("touchcancel",function(F$y){F$b.enabled?(F$y.preventDefault(),F$T.push(F$y)):F$t._curTouchID=NaN},!0),F$j.addEventListener("mousewheel",function(F$y){F$b.enabled&&F$T.push(F$y)}),F$j.addEventListener("DOMMouseScroll",function(F$y){F$b.enabled&&F$T.push(F$y)})},F$y.initEvent=function(F$y,F$j){var F$t;this._event._stoped=!1,this._event.nativeEvent=F$j||F$y,this._target=null,this._point.setTo(F$y.pageX||F$y.clientX,F$y.pageY||F$y.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=F$y.identifier||0,this._tTouchID=this._event.touchId,(F$t=F$V.I._event)._stoped=!1,F$t.nativeEvent=this._event.nativeEvent,F$t.touchId=this._event.touchId},F$y.checkMouseWheel=function(F$y){this._event.delta=F$y.wheelDelta?.025*F$y.wheelDelta:-F$y.detail;for(var F$j=F$V.I.getLastOvers(),F$t=0,F$k=F$j.length;F$t<F$k;F$t++){var F$T=F$j[F$t];F$T.event("mousewheel",this._event.setTo("mousewheel",F$T,this._target))}},F$y.onMouseMove=function(F$y){F$V.I.onMouseMove(F$y,this._tTouchID)},F$y.onMouseDown=function(F$y){if(F$ey.isInputting&&F$N.stage.focus&&F$N.stage.focus.focus&&!F$N.stage.focus.contains(this._target)){var F$j=F$N.stage.focus._tf||F$N.stage.focus,F$t=F$y._tf||F$y;F$t instanceof laya.display.Input&&F$t.multiline==F$j.multiline?F$j._focusOut():F$j.focus=!1}F$V.I.onMouseDown(F$y,this._tTouchID,this._isLeftMouse)},F$y.onMouseUp=function(F$y){F$V.I.onMouseUp(F$y,this._tTouchID,this._isLeftMouse)},F$y.check=function(F$y,F$j,F$t,F$k){this._point.setTo(F$j,F$t),F$y.fromParentPoint(this._point),F$j=this._point.x,F$t=this._point.y;var F$T=F$y.scrollRect;if(F$T&&(this._rect.setTo(F$T.x,F$T.y,F$T.width,F$T.height),!this._rect.contains(F$j,F$t)))return!1;if(!this.disableMouseEvent){if(F$y.hitTestPrior&&!F$y.mouseThrough&&!this.hitTest(F$y,F$j,F$t))return!1;for(var F$Y=F$y._childs.length-1;-1<F$Y;F$Y--){var F$A=F$y._childs[F$Y];if(!F$A.destroyed&&F$A.mouseEnabled&&F$A.visible&&this.check(F$A,F$j,F$t,F$k))return!0}}var F$X=!(!F$y.hitTestPrior||F$y.mouseThrough||this.disableMouseEvent)||this.hitTest(F$y,F$j,F$t);return F$X?(this._target=F$y,F$k.call(this,F$y)):F$k===this.onMouseUp&&F$y===this._stage&&(this._target=this._stage,F$k.call(this,this._target)),F$X},F$y.hitTest=function(F$y,F$j,F$t){var F$k=!1;if(F$y.scrollRect&&(F$j-=F$y.scrollRect.x,F$t-=F$y.scrollRect.y),F$y.hitArea instanceof laya.utils.HitArea)return F$y.hitArea.isHit(F$j,F$t);if(0<F$y.width&&0<F$y.height||F$y.mouseThrough||F$y.hitArea)if(F$y.mouseThrough)F$k=F$y.getGraphicBounds().contains(F$j,F$t);else{var F$T=this._rect;F$y.hitArea?F$T=F$y.hitArea:F$T.setTo(0,0,F$y.width,F$y.height),F$k=F$T.contains(F$j,F$t)}return F$k},F$y.runEvent=function(){var F$y=this._eventList.length;if(F$y){this.mouseEventTime=F$G.now();var F$j,F$t=0,F$k=0,F$T=0;try{for(;F$t<F$y;){var F$Y=this._eventList[F$t];switch("mousemove"!==F$Y.type&&(this._prePoint.x=this._prePoint.y=-1e6),F$Y.type){case"mousedown":this._touchIDs[0]=this._id++,F$b._isTouchRespond?F$b._isTouchRespond=!1:(this._isLeftMouse=0===F$Y.button,this.initEvent(F$Y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===F$Y.button,this.initEvent(F$Y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-F$Y.clientX)+Math.abs(this._prePoint.y-F$Y.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=F$Y.clientX,this._prePoint.y=F$Y.clientY,this.initEvent(F$Y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":F$b._isTouchRespond=!0,this._isLeftMouse=!0;var F$A=F$Y.changedTouches;for(F$k=0,F$T=F$A.length;F$k<F$T;F$k++)F$j=F$A[F$k],(F$b.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=F$j.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[F$j.identifier]=this._id++,this.initEvent(F$j,F$Y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":F$b._isTouchRespond=!0,this._isLeftMouse=!0;var F$X=F$Y.changedTouches;for(F$k=0,F$T=F$X.length;F$k<F$T;F$k++)if(F$j=F$X[F$k],F$b.multiTouchEnabled||F$j.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(F$j,F$Y);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var F$I=F$Y.changedTouches;for(F$k=0,F$T=F$I.length;F$k<F$T;F$k++)F$j=F$I[F$k],(F$b.multiTouchEnabled||F$j.identifier==this._curTouchID)&&(this.initEvent(F$j,F$Y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(F$Y);break;case"mouseout":F$V.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}F$t++}}catch(F$y){throw this._eventList.length=0,F$y}this._eventList.length=0}},F$b.enabled=!0,F$b.multiTouchEnabled=!0,F$b._isTouchRespond=!1,F$b._isFirstTouch=!0,F$I(F$b,["instance",function(){return this.instance=new F$b}]),F$b}()),F$V=function(){function F$W(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new F$Y}F$D(F$W,"laya.events.TouchManager");var F$y=F$W.prototype;return F$y._clearTempArrs=function(){F$W._oldArr.length=0,F$W._newArr.length=0,F$W._tEleArr.length=0},F$y.getTouchFromArr=function(F$y,F$j){var F$t,F$k,F$T=0;for(F$t=F$j.length,F$T=0;F$T<F$t;F$T++)if((F$k=F$j[F$T]).id==F$y)return F$k;return null},F$y.removeTouchFromArr=function(F$y,F$j){var F$t=0;for(F$t=F$j.length-1;0<=F$t;F$t--)F$j[F$t].id==F$y&&F$j.splice(F$t,1)},F$y.createTouchO=function(F$y,F$j){var F$t;return(F$t=F$R.getItem("TouchData")||{}).id=F$j,F$t.tar=F$y,F$t},F$y.onMouseDown=function(F$y,F$j,F$t){var F$k,F$T,F$Y,F$A;(void 0===F$t&&(F$t=!1),this.enable)&&(F$k=this.getTouchFromArr(F$j,this.preOvers),F$Y=this.getEles(F$y,null,F$W._tEleArr),F$k?F$k.tar=F$y:(F$T=this.createTouchO(F$y,F$j),this.preOvers.push(F$T)),F$G.onMobile&&this.sendEvents(F$Y,"mouseover",F$j),F$A=F$t?this.preDowns:this.preRightDowns,(F$k=this.getTouchFromArr(F$j,F$A))?F$k.tar=F$y:(F$T=this.createTouchO(F$y,F$j),F$A.push(F$T)),this.sendEvents(F$Y,F$t?"mousedown":"rightmousedown",F$j),this._clearTempArrs())},F$y.sendEvents=function(F$y,F$j,F$t){void 0===F$t&&(F$t=0);var F$k,F$T,F$Y,F$A=0;for(F$k=F$y.length,this._event._stoped=!1,F$T=F$y[0],F$A=0;F$A<F$k;F$A++){if((F$Y=F$y[F$A]).destroyed)return;if(F$Y.event(F$j,this._event.setTo(F$j,F$Y,F$T)),this._event._stoped)break}},F$y.getEles=function(F$y,F$j,F$t){for(F$t?F$t.length=0:F$t=[];F$y&&F$y!=F$j;)F$t.push(F$y),F$y=F$y.parent;return F$t},F$y.checkMouseOutAndOverOfMove=function(F$y,F$j,F$t){if(void 0===F$t&&(F$t=0),F$j!=F$y){var F$k,F$T,F$Y=0,F$A=0;if(F$j.contains(F$y))F$T=this.getEles(F$y,F$j,F$W._tEleArr),this.sendEvents(F$T,"mouseover",F$t);else if(F$y.contains(F$j))F$T=this.getEles(F$j,F$y,F$W._tEleArr),this.sendEvents(F$T,"mouseout",F$t);else{var F$X,F$I;(F$T=F$W._tEleArr).length=0,F$X=this.getEles(F$j,null,F$W._oldArr),F$I=this.getEles(F$y,null,F$W._newArr),F$A=F$X.length;var F$b=0;for(F$Y=0;F$Y<F$A;F$Y++){if(F$k=F$X[F$Y],0<=(F$b=F$I.indexOf(F$k))){F$I.splice(F$b,F$I.length-F$b);break}F$T.push(F$k)}0<F$T.length&&this.sendEvents(F$T,"mouseout",F$t),0<F$I.length&&this.sendEvents(F$I,"mouseover",F$t)}}},F$y.onMouseMove=function(F$y,F$j){var F$t,F$k;this.enable&&((F$t=this.getTouchFromArr(F$j,this.preOvers))?(this.checkMouseOutAndOverOfMove(F$y,F$t.tar),F$t.tar=F$y,F$k=this.getEles(F$y,null,F$W._tEleArr)):(F$k=this.getEles(F$y,null,F$W._tEleArr),this.sendEvents(F$k,"mouseover",F$j),this.preOvers.push(this.createTouchO(F$y,F$j))),this.sendEvents(F$k,"mousemove",F$j),this._clearTempArrs())},F$y.getLastOvers=function(){return(F$W._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,F$W._tEleArr):(F$W._tEleArr.push(F$N.stage),F$W._tEleArr)},F$y.stageMouseOut=function(){var F$y;F$y=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(F$y,"mouseout",0)},F$y.onMouseUp=function(F$y,F$j,F$t){if(void 0===F$t&&(F$t=!1),this.enable){var F$k,F$T,F$Y,F$A,F$X,F$I,F$b=0,F$D=0,F$l=F$G.onMobile;if(F$T=this.getEles(F$y,null,F$W._tEleArr),this.sendEvents(F$T,F$t?"mouseup":"rightmouseup",F$j),F$I=F$t?this.preDowns:this.preRightDowns,F$k=this.getTouchFromArr(F$j,F$I)){var F$r,F$$=F$G.now();if(F$r=F$$-this._lastClickTime<300,this._lastClickTime=F$$,F$y==F$k.tar)F$X=F$T;else for(F$Y=this.getEles(F$k.tar,null,F$W._oldArr),(F$X=F$W._newArr).length=0,F$D=F$Y.length,F$b=0;F$b<F$D;F$b++)F$A=F$Y[F$b],0<=F$T.indexOf(F$A)&&F$X.push(F$A);0<F$X.length&&this.sendEvents(F$X,F$t?"click":"rightclick",F$j),F$t&&F$r&&this.sendEvents(F$X,"doubleclick",F$j),this.removeTouchFromArr(F$j,F$I),F$k.tar=null,F$R.recover("TouchData",F$k)}else;(F$k=this.getTouchFromArr(F$j,this.preOvers))&&F$l&&((F$X=this.getEles(F$k.tar,null,F$X))&&0<F$X.length&&this.sendEvents(F$X,"mouseout",F$j),this.removeTouchFromArr(F$j,this.preOvers),F$k.tar=null,F$R.recover("TouchData",F$k)),this._clearTempArrs()}},F$W._oldArr=[],F$W._newArr=[],F$W._tEleArr=[],F$I(F$W,["I",function(){return this.I=new F$W}]),F$W}(),F$n=function(){function F$y(){this._action=null}F$D(F$y,"laya.filters.Filter");var F$j=F$y.prototype;return F$N.imps(F$j,{"laya.filters.IFilter":!0}),F$j.callNative=function(F$y){},F$W(0,F$j,"type",function(){return-1}),F$W(0,F$j,"action",function(){return this._action}),F$y.BLUR=16,F$y.COLOR=32,F$y.GLOW=8,F$y._filterStart=null,F$y._filterEnd=null,F$y._EndTarget=null,F$y._recycleScope=null,F$y._filter=null,F$y._useSrc=null,F$y._endSrc=null,F$y._useOut=null,F$y._endOut=null,F$y}(),F$M=function(){function F$y(){this.data=null}F$D(F$y,"laya.filters.ColorFilterAction");var F$j=F$y.prototype;return F$N.imps(F$j,{"laya.filters.IFilterAction":!0}),F$j.apply=function(F$y){var F$j=F$y.ctx.ctx,F$t=F$y.ctx.ctx.canvas;if(0==F$t.width||0==F$t.height)return F$t;for(var F$k,F$T=F$j.getImageData(0,0,F$t.width,F$t.height),F$Y=F$T.data,F$A=0,F$X=F$Y.length;F$A<F$X;F$A+=4)F$k=this.getColor(F$Y[F$A],F$Y[F$A+1],F$Y[F$A+2],F$Y[F$A+3]),0!=F$Y[F$A+3]&&(F$Y[F$A]=F$k[0],F$Y[F$A+1]=F$k[1],F$Y[F$A+2]=F$k[2],F$Y[F$A+3]=F$k[3]);return F$j.putImageData(F$T,0,0),F$y},F$j.getColor=function(F$y,F$j,F$t,F$k){var F$T=[];if(this.data._mat&&this.data._alpha){var F$Y=this.data._mat,F$A=this.data._alpha;F$T[0]=F$Y[0]*F$y+F$Y[1]*F$j+F$Y[2]*F$t+F$Y[3]*F$k+F$A[0],F$T[1]=F$Y[4]*F$y+F$Y[5]*F$j+F$Y[6]*F$t+F$Y[7]*F$k+F$A[1],F$T[2]=F$Y[8]*F$y+F$Y[9]*F$j+F$Y[10]*F$t+F$Y[11]*F$k+F$A[2],F$T[3]=F$Y[12]*F$y+F$Y[13]*F$j+F$Y[14]*F$t+F$Y[15]*F$k+F$A[3]}return F$T},F$y}(),F$_=(function(){function F$y(){}F$D(F$y,"laya.maths.Arith"),F$y.formatR=function(F$y){return F$y>Math.PI&&(F$y-=2*Math.PI),F$y<-Math.PI&&(F$y+=2*Math.PI),F$y},F$y.isPOT=function(F$y,F$j){return 0<F$y&&0==(F$y&F$y-1)&&0<F$j&&0==(F$j&F$j-1)},F$y.setMatToArray=function(F$y,F$j){F$y.a,F$y.b,F$y.c,F$y.d,F$y.tx,F$y.ty,F$j[0]=F$y.a,F$j[1]=F$y.b,F$j[4]=F$y.c,F$j[5]=F$y.d,F$j[12]=F$y.tx,F$j[13]=F$y.ty}}(),function(){function F$y(){this._controlPoints=[new F$P,new F$P,new F$P],this._calFun=this.getPoint2}F$D(F$y,"laya.maths.Bezier");var F$j=F$y.prototype;return F$j._switchPoint=function(F$y,F$j){var F$t=this._controlPoints.shift();F$t.setTo(F$y,F$j),this._controlPoints.push(F$t)},F$j.getPoint2=function(F$y,F$j){var F$t=this._controlPoints[0],F$k=this._controlPoints[1],F$T=this._controlPoints[2],F$Y=Math.pow(1-F$y,2)*F$t.x+2*F$y*(1-F$y)*F$k.x+Math.pow(F$y,2)*F$T.x,F$A=Math.pow(1-F$y,2)*F$t.y+2*F$y*(1-F$y)*F$k.y+Math.pow(F$y,2)*F$T.y;F$j.push(F$Y,F$A)},F$j.getPoint3=function(F$y,F$j){var F$t=this._controlPoints[0],F$k=this._controlPoints[1],F$T=this._controlPoints[2],F$Y=this._controlPoints[3],F$A=Math.pow(1-F$y,3)*F$t.x+3*F$k.x*F$y*(1-F$y)*(1-F$y)+3*F$T.x*F$y*F$y*(1-F$y)+F$Y.x*Math.pow(F$y,3),F$X=Math.pow(1-F$y,3)*F$t.y+3*F$k.y*F$y*(1-F$y)*(1-F$y)+3*F$T.y*F$y*F$y*(1-F$y)+F$Y.y*Math.pow(F$y,3);F$j.push(F$A,F$X)},F$j.insertPoints=function(F$y,F$j){var F$t,F$k=NaN;for(F$t=1/(F$y=0<F$y?F$y:5),F$k=0;F$k<=1;F$k+=F$t)this._calFun(F$k,F$j)},F$j.getBezierPoints=function(F$y,F$j,F$t){void 0===F$j&&(F$j=5),void 0===F$t&&(F$t=2);var F$k,F$T,F$Y=0;if((F$k=F$y.length)<2*(F$t+1))return[];switch(F$T=[],F$t){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=F$t;)this._controlPoints.push(new F$P);for(F$Y=0;F$Y<2*F$t;F$Y+=2)this._switchPoint(F$y[F$Y],F$y[F$Y+1]);for(F$Y=2*F$t;F$Y<F$k;F$Y+=2)this._switchPoint(F$y[F$Y],F$y[F$Y+1]),F$Y/2%F$t==0&&this.insertPoints(F$j,F$T);return F$T},F$I(F$y,["I",function(){return this.I=new F$y}]),F$y}()),F$e=function(){function F$b(){}return F$D(F$b,"laya.maths.GrahamScan"),F$b.multiply=function(F$y,F$j,F$t){return(F$y.x-F$t.x)*(F$j.y-F$t.y)-(F$j.x-F$t.x)*(F$y.y-F$t.y)},F$b.dis=function(F$y,F$j){return(F$y.x-F$j.x)*(F$y.x-F$j.x)+(F$y.y-F$j.y)*(F$y.y-F$j.y)},F$b._getPoints=function(F$y,F$j,F$t){for(void 0===F$j&&(F$j=!1),F$b._mPointList||(F$b._mPointList=[]);F$b._mPointList.length<F$y;)F$b._mPointList.push(new F$P);return F$t||(F$t=[]),F$t.length=0,F$j?F$b.getFrom(F$t,F$b._mPointList,F$y):F$b.getFromR(F$t,F$b._mPointList,F$y),F$t},F$b.getFrom=function(F$y,F$j,F$t){var F$k=0;for(F$k=0;F$k<F$t;F$k++)F$y.push(F$j[F$k]);return F$y},F$b.getFromR=function(F$y,F$j,F$t){var F$k=0;for(F$k=0;F$k<F$t;F$k++)F$y.push(F$j.pop());return F$y},F$b.pListToPointList=function(F$y,F$j){void 0===F$j&&(F$j=!1);var F$t=0,F$k=F$y.length/2,F$T=F$b._getPoints(F$k,F$j,F$b._tempPointList);for(F$t=0;F$t<F$k;F$t++)F$T[F$t].setTo(F$y[F$t+F$t],F$y[F$t+F$t+1]);return F$T},F$b.pointListToPlist=function(F$y){var F$j,F$t=0,F$k=F$y.length,F$T=F$b._temPList;for(F$t=F$T.length=0;F$t<F$k;F$t++)F$j=F$y[F$t],F$T.push(F$j.x,F$j.y);return F$T},F$b.scanPList=function(F$y){return F$o.copyArray(F$y,F$b.pointListToPlist(F$b.scan(F$b.pListToPointList(F$y,!0))))},F$b.scan=function(F$y){var F$j,F$t,F$k,F$T=0,F$Y=0,F$A=0,F$X=F$y.length,F$I={};for((F$t=F$b._temArr).length=0,F$T=(F$X=F$y.length)-1;0<=F$T;F$T--)F$k=(F$j=F$y[F$T]).x+"_"+F$j.y,F$I.hasOwnProperty(F$k)||(F$I[F$k]=!0,F$t.push(F$j));for(F$X=F$t.length,F$o.copyArray(F$y,F$t),F$T=1;F$T<F$X;F$T++)(F$y[F$T].y<F$y[F$A].y||F$y[F$T].y==F$y[F$A].y&&F$y[F$T].x<F$y[F$A].x)&&(F$A=F$T);for(F$j=F$y[0],F$y[0]=F$y[F$A],F$y[F$A]=F$j,F$T=1;F$T<F$X-1;F$T++){for(F$Y=(F$A=F$T)+1;F$Y<F$X;F$Y++)(0<F$b.multiply(F$y[F$Y],F$y[F$A],F$y[0])||0==F$b.multiply(F$y[F$Y],F$y[F$A],F$y[0])&&F$b.dis(F$y[0],F$y[F$Y])<F$b.dis(F$y[0],F$y[F$A]))&&(F$A=F$Y);F$j=F$y[F$T],F$y[F$T]=F$y[F$A],F$y[F$A]=F$j}if((F$t=F$b._temArr).length=0,F$y.length<3)return F$o.copyArray(F$t,F$y);for(F$t.push(F$y[0],F$y[1],F$y[2]),F$T=3;F$T<F$X;F$T++){for(;2<=F$t.length&&0<=F$b.multiply(F$y[F$T],F$t[F$t.length-1],F$t[F$t.length-2]);)F$t.pop();F$y[F$T]&&F$t.push(F$y[F$T])}return F$t},F$b._mPointList=null,F$b._tempPointList=[],F$b._temPList=[],F$b._temArr=[],F$b}(),F$v=function(){function F$T(){}return F$D(F$T,"laya.maths.MathUtil"),F$T.subtractVector3=function(F$y,F$j,F$t){F$t[0]=F$y[0]-F$j[0],F$t[1]=F$y[1]-F$j[1],F$t[2]=F$y[2]-F$j[2]},F$T.lerp=function(F$y,F$j,F$t){return F$y*(1-F$t)+F$j*F$t},F$T.scaleVector3=function(F$y,F$j,F$t){F$t[0]=F$y[0]*F$j,F$t[1]=F$y[1]*F$j,F$t[2]=F$y[2]*F$j},F$T.lerpVector3=function(F$y,F$j,F$t,F$k){var F$T=F$y[0],F$Y=F$y[1],F$A=F$y[2];F$k[0]=F$T+F$t*(F$j[0]-F$T),F$k[1]=F$Y+F$t*(F$j[1]-F$Y),F$k[2]=F$A+F$t*(F$j[2]-F$A)},F$T.lerpVector4=function(F$y,F$j,F$t,F$k){var F$T=F$y[0],F$Y=F$y[1],F$A=F$y[2],F$X=F$y[3];F$k[0]=F$T+F$t*(F$j[0]-F$T),F$k[1]=F$Y+F$t*(F$j[1]-F$Y),F$k[2]=F$A+F$t*(F$j[2]-F$A),F$k[3]=F$X+F$t*(F$j[3]-F$X)},F$T.slerpQuaternionArray=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){var F$X,F$I,F$b,F$D,F$l,F$r=F$y[F$j+0],F$$=F$y[F$j+1],F$W=F$y[F$j+2],F$z=F$y[F$j+3],F$V=F$t[F$k+0],F$n=F$t[F$k+1],F$C=F$t[F$k+2],F$M=F$t[F$k+3];return(F$I=F$r*F$V+F$$*F$n+F$W*F$C+F$z*F$M)<0&&(F$I=-F$I,F$V=-F$V,F$n=-F$n,F$C=-F$C,F$M=-F$M),F$l=1e-6<1-F$I?(F$X=Math.acos(F$I),F$b=Math.sin(F$X),F$D=Math.sin((1-F$T)*F$X)/F$b,Math.sin(F$T*F$X)/F$b):(F$D=1-F$T,F$T),F$Y[F$A+0]=F$D*F$r+F$l*F$V,F$Y[F$A+1]=F$D*F$$+F$l*F$n,F$Y[F$A+2]=F$D*F$W+F$l*F$C,F$Y[F$A+3]=F$D*F$z+F$l*F$M,F$Y},F$T.getRotation=function(F$y,F$j,F$t,F$k){return Math.atan2(F$k-F$j,F$t-F$y)/Math.PI*180},F$T.sortBigFirst=function(F$y,F$j){return F$y==F$j?0:F$y<F$j?1:-1},F$T.sortSmallFirst=function(F$y,F$j){return F$y==F$j?0:F$y<F$j?-1:1},F$T.sortNumBigFirst=function(F$y,F$j){return parseFloat(F$j)-parseFloat(F$y)},F$T.sortNumSmallFirst=function(F$y,F$j){return parseFloat(F$y)-parseFloat(F$j)},F$T.sortByKey=function(F$t,F$y,F$j){var F$k;return void 0===F$y&&(F$y=!1),void 0===F$j&&(F$j=!0),F$k=F$y?F$j?F$T.sortNumBigFirst:F$T.sortBigFirst:F$j?F$T.sortNumSmallFirst:F$T.sortSmallFirst,function(F$y,F$j){return F$k(F$y[F$t],F$j[F$t])}},F$T}(),F$U=function(){function F$t(F$y,F$j,F$t,F$k,F$T,F$Y){this.inPool=!1,this.bTransform=!1,void 0===F$y&&(F$y=1),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=1),void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=0),this.a=F$y,this.b=F$j,this.c=F$t,this.d=F$k,this.tx=F$T,this.ty=F$Y,this._checkTransform()}F$D(F$t,"laya.maths.Matrix");var F$y=F$t.prototype;return F$y.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},F$y._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},F$y.setTranslate=function(F$y,F$j){return this.tx=F$y,this.ty=F$j,this},F$y.translate=function(F$y,F$j){return this.tx+=F$y,this.ty+=F$j,this},F$y.scale=function(F$y,F$j){this.a*=F$y,this.d*=F$j,this.c*=F$y,this.b*=F$j,this.tx*=F$y,this.ty*=F$j,this.bTransform=!0},F$y.rotate=function(F$y){var F$j=Math.cos(F$y),F$t=Math.sin(F$y),F$k=this.a,F$T=this.c,F$Y=this.tx;this.a=F$k*F$j-this.b*F$t,this.b=F$k*F$t+this.b*F$j,this.c=F$T*F$j-this.d*F$t,this.d=F$T*F$t+this.d*F$j,this.tx=F$Y*F$j-this.ty*F$t,this.ty=F$Y*F$t+this.ty*F$j,this.bTransform=!0},F$y.skew=function(F$y,F$j){var F$t=Math.tan(F$y),F$k=Math.tan(F$j),F$T=this.a,F$Y=this.b;return this.a+=F$k*this.c,this.b+=F$k*this.d,this.c+=F$t*F$T,this.d+=F$t*F$Y,this},F$y.invertTransformPoint=function(F$y){var F$j=this.a,F$t=this.b,F$k=this.c,F$T=this.d,F$Y=this.tx,F$A=F$j*F$T-F$t*F$k,F$X=F$T/F$A,F$I=-F$t/F$A,F$b=-F$k/F$A,F$D=F$j/F$A,F$l=(F$k*this.ty-F$T*F$Y)/F$A,F$r=-(F$j*this.ty-F$t*F$Y)/F$A;return F$y.setTo(F$X*F$y.x+F$b*F$y.y+F$l,F$I*F$y.x+F$D*F$y.y+F$r)},F$y.transformPoint=function(F$y){return F$y.setTo(this.a*F$y.x+this.c*F$y.y+this.tx,this.b*F$y.x+this.d*F$y.y+this.ty)},F$y.transformPointN=function(F$y){return F$y.setTo(this.a*F$y.x+this.c*F$y.y,this.b*F$y.x+this.d*F$y.y)},F$y.transformPointArray=function(F$y,F$j){for(var F$t=F$y.length,F$k=0;F$k<F$t;F$k+=2){var F$T=F$y[F$k],F$Y=F$y[F$k+1];F$j[F$k]=this.a*F$T+this.c*F$Y+this.tx,F$j[F$k+1]=this.b*F$T+this.d*F$Y+this.ty}return F$j},F$y.transformPointArrayScale=function(F$y,F$j){for(var F$t=F$y.length,F$k=0;F$k<F$t;F$k+=2){var F$T=F$y[F$k],F$Y=F$y[F$k+1];F$j[F$k]=this.a*F$T+this.c*F$Y,F$j[F$k+1]=this.b*F$T+this.d*F$Y}return F$j},F$y.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},F$y.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},F$y.invert=function(){var F$y=this.a,F$j=this.b,F$t=this.c,F$k=this.d,F$T=this.tx,F$Y=F$y*F$k-F$j*F$t;return this.a=F$k/F$Y,this.b=-F$j/F$Y,this.c=-F$t/F$Y,this.d=F$y/F$Y,this.tx=(F$t*this.ty-F$k*F$T)/F$Y,this.ty=-(F$y*this.ty-F$j*F$T)/F$Y,this},F$y.setTo=function(F$y,F$j,F$t,F$k,F$T,F$Y){return this.a=F$y,this.b=F$j,this.c=F$t,this.d=F$k,this.tx=F$T,this.ty=F$Y,this},F$y.concat=function(F$y){var F$j=this.a,F$t=this.c,F$k=this.tx;return this.a=F$j*F$y.a+this.b*F$y.c,this.b=F$j*F$y.b+this.b*F$y.d,this.c=F$t*F$y.a+this.d*F$y.c,this.d=F$t*F$y.b+this.d*F$y.d,this.tx=F$k*F$y.a+this.ty*F$y.c+F$y.tx,this.ty=F$k*F$y.b+this.ty*F$y.d+F$y.ty,this},F$y.scaleEx=function(F$y,F$j){var F$t=this.a,F$k=this.b,F$T=this.c,F$Y=this.d;0!==F$k||0!==F$T?(this.a=F$y*F$t,this.b=F$y*F$k,this.c=F$j*F$T):(this.a=F$y*F$t,this.b=0*F$Y,this.c=0*F$t),this.d=F$j*F$Y,this.bTransform=!0},F$y.rotateEx=function(F$y){var F$j=Math.cos(F$y),F$t=Math.sin(F$y),F$k=this.a,F$T=this.b,F$Y=this.c,F$A=this.d;0!==F$T||0!==F$Y?(this.a=F$j*F$k+F$t*F$Y,this.b=F$j*F$T+F$t*F$A,this.c=-F$t*F$k+F$j*F$Y,this.d=-F$t*F$T+F$j*F$A):(this.a=F$j*F$k,this.b=F$t*F$A,this.c=-F$t*F$k,this.d=F$j*F$A),this.bTransform=!0},F$y.clone=function(){var F$y=F$t.create();return F$y.a=this.a,F$y.b=this.b,F$y.c=this.c,F$y.d=this.d,F$y.tx=this.tx,F$y.ty=this.ty,F$y.bTransform=this.bTransform,F$y},F$y.copyTo=function(F$y){return F$y.a=this.a,F$y.b=this.b,F$y.c=this.c,F$y.d=this.d,F$y.tx=this.tx,F$y.ty=this.ty,F$y.bTransform=this.bTransform,F$y},F$y.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},F$y.destroy=function(){if(!this.inPool){var F$y=F$t._cache;this.inPool=!0,F$y._length||(F$y._length=0),(F$y[F$y._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},F$t.mul=function(F$y,F$j,F$t){var F$k=F$y.a,F$T=F$y.b,F$Y=F$y.c,F$A=F$y.d,F$X=F$y.tx,F$I=F$y.ty,F$b=F$j.a,F$D=F$j.b,F$l=F$j.c,F$r=F$j.d,F$$=F$j.tx,F$W=F$j.ty;return 0!==F$D||0!==F$l?(F$t.a=F$k*F$b+F$T*F$l,F$t.b=F$k*F$D+F$T*F$r,F$t.c=F$Y*F$b+F$A*F$l,F$t.d=F$Y*F$D+F$A*F$r,F$t.tx=F$b*F$X+F$l*F$I+F$$,F$t.ty=F$D*F$X+F$r*F$I+F$W):(F$t.a=F$k*F$b,F$t.b=F$T*F$r,F$t.c=F$Y*F$b,F$t.d=F$A*F$r,F$t.tx=F$b*F$X+F$$,F$t.ty=F$r*F$I+F$W),F$t},F$t.mul16=function(F$y,F$j,F$t){var F$k=F$y.a,F$T=F$y.b,F$Y=F$y.c,F$A=F$y.d,F$X=F$y.tx,F$I=F$y.ty,F$b=F$j.a,F$D=F$j.b,F$l=F$j.c,F$r=F$j.d,F$$=F$j.tx,F$W=F$j.ty;return 0!==F$D||0!==F$l?(F$t[0]=F$k*F$b+F$T*F$l,F$t[1]=F$k*F$D+F$T*F$r,F$t[4]=F$Y*F$b+F$A*F$l,F$t[5]=F$Y*F$D+F$A*F$r,F$t[12]=F$b*F$X+F$l*F$I+F$$,F$t[13]=F$D*F$X+F$r*F$I+F$W):(F$t[0]=F$k*F$b,F$t[1]=F$T*F$r,F$t[4]=F$Y*F$b,F$t[5]=F$A*F$r,F$t[12]=F$b*F$X+F$$,F$t[13]=F$r*F$I+F$W),F$t},F$t.mulPre=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){var F$I=F$y.a,F$b=F$y.b,F$D=F$y.c,F$l=F$y.d,F$r=F$y.tx,F$$=F$y.ty;return 0!==F$t||0!==F$k?(F$X.a=F$I*F$j+F$b*F$k,F$X.b=F$I*F$t+F$b*F$T,F$X.c=F$D*F$j+F$l*F$k,F$X.d=F$D*F$t+F$l*F$T,F$X.tx=F$j*F$r+F$k*F$$+F$Y,F$X.ty=F$t*F$r+F$T*F$$+F$A):(F$X.a=F$I*F$j,F$X.b=F$b*F$T,F$X.c=F$D*F$j,F$X.d=F$l*F$T,F$X.tx=F$j*F$r+F$Y,F$X.ty=F$T*F$$+F$A),F$X},F$t.mulPos=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){var F$I=F$y.a,F$b=F$y.b,F$D=F$y.c,F$l=F$y.d,F$r=F$y.tx,F$$=F$y.ty;return 0!==F$b||0!==F$D?(F$X.a=F$j*F$I+F$t*F$D,F$X.b=F$j*F$b+F$t*F$l,F$X.c=F$k*F$I+F$T*F$D,F$X.d=F$k*F$b+F$T*F$l,F$X.tx=F$I*F$Y+F$D*F$A+F$r,F$X.ty=F$b*F$Y+F$l*F$A+F$$):(F$X.a=F$j*F$I,F$X.b=F$t*F$l,F$X.c=F$k*F$I,F$X.d=F$T*F$l,F$X.tx=F$I*F$Y+F$r,F$X.ty=F$l*F$A+F$$),F$X},F$t.preMul=function(F$y,F$j,F$t){var F$k=F$y.a,F$T=F$y.b,F$Y=F$y.c,F$A=F$y.d,F$X=F$j.a,F$I=F$j.b,F$b=F$j.c,F$D=F$j.d,F$l=F$j.tx,F$r=F$j.ty;return F$t.a=F$X*F$k,F$t.b=F$t.c=0,F$t.d=F$D*F$A,F$t.tx=F$l*F$k+F$y.tx,F$t.ty=F$r*F$A+F$y.ty,0===F$I&&0===F$b&&0===F$T&&0===F$Y||(F$t.a+=F$I*F$Y,F$t.d+=F$b*F$T,F$t.b+=F$X*F$T+F$I*F$A,F$t.c+=F$b*F$k+F$D*F$Y,F$t.tx+=F$r*F$Y,F$t.ty+=F$l*F$T),F$t},F$t.preMulXY=function(F$y,F$j,F$t,F$k){var F$T=F$y.a,F$Y=F$y.b,F$A=F$y.c,F$X=F$y.d;return F$k.a=F$T,F$k.b=F$Y,F$k.c=F$A,F$k.d=F$X,F$k.tx=F$j*F$T+F$y.tx+F$t*F$A,F$k.ty=F$t*F$X+F$y.ty+F$j*F$Y,F$k},F$t.create=function(){var F$y=F$t._cache,F$j=F$y._length?F$y[--F$y._length]:new F$t;return F$j.inPool=!1,F$j},F$t.EMPTY=new F$t,F$t.TEMP=new F$t,F$t._cache=[],F$t}(),F$P=function(){function F$y(F$y,F$j){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),this.x=F$y,this.y=F$j}F$D(F$y,"laya.maths.Point");var F$j=F$y.prototype;return F$j.setTo=function(F$y,F$j){return this.x=F$y,this.y=F$j,this},F$j.distance=function(F$y,F$j){return Math.sqrt((this.x-F$y)*(this.x-F$y)+(this.y-F$j)*(this.y-F$j))},F$j.toString=function(){return this.x+","+this.y},F$j.normalize=function(){var F$y=Math.sqrt(this.x*this.x+this.y*this.y);if(0<F$y){var F$j=1/F$y;this.x*=F$j,this.y*=F$j}},F$y.TEMP=new F$y,F$y.EMPTY=new F$y,F$y}(),F$d=function(){function F$b(F$y,F$j,F$t,F$k){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0),this.x=F$y,this.y=F$j,this.width=F$t,this.height=F$k}F$D(F$b,"laya.maths.Rectangle");var F$y=F$b.prototype;return F$y.setTo=function(F$y,F$j,F$t,F$k){return this.x=F$y,this.y=F$j,this.width=F$t,this.height=F$k,this},F$y.copyFrom=function(F$y){return this.x=F$y.x,this.y=F$y.y,this.width=F$y.width,this.height=F$y.height,this},F$y.contains=function(F$y,F$j){return!(this.width<=0||this.height<=0)&&(F$y>=this.x&&F$y<this.right&&F$j>=this.y&&F$j<this.bottom)},F$y.intersects=function(F$y){return!(F$y.x>this.x+this.width||F$y.x+F$y.width<this.x||F$y.y>this.y+this.height||F$y.y+F$y.height<this.y)},F$y.intersection=function(F$y,F$j){return this.intersects(F$y)?(F$j||(F$j=new F$b),F$j.x=Math.max(this.x,F$y.x),F$j.y=Math.max(this.y,F$y.y),F$j.width=Math.min(this.right,F$y.right)-F$j.x,F$j.height=Math.min(this.bottom,F$y.bottom)-F$j.y,F$j):null},F$y.union=function(F$y,F$j){return F$j||(F$j=new F$b),this.clone(F$j),F$y.width<=0||F$y.height<=0?F$j:(F$j.addPoint(F$y.x,F$y.y),F$j.addPoint(F$y.right,F$y.bottom),this)},F$y.clone=function(F$y){return F$y||(F$y=new F$b),F$y.x=this.x,F$y.y=this.y,F$y.width=this.width,F$y.height=this.height,F$y},F$y.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},F$y.equals=function(F$y){return!(!F$y||F$y.x!==this.x||F$y.y!==this.y||F$y.width!==this.width||F$y.height!==this.height)},F$y.addPoint=function(F$y,F$j){return this.x>F$y&&(this.width+=this.x-F$y,this.x=F$y),this.y>F$j&&(this.height+=this.y-F$j,this.y=F$j),this.width<F$y-this.x&&(this.width=F$y-this.x),this.height<F$j-this.y&&(this.height=F$j-this.y),this},F$y._getBoundPoints=function(){var F$y=F$b._temB;return(F$y.length=0)==this.width||0==this.height||F$y.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),F$y},F$y.isEmpty=function(){return this.width<=0||this.height<=0},F$W(0,F$y,"right",function(){return this.x+this.width}),F$W(0,F$y,"bottom",function(){return this.y+this.height}),F$b._getBoundPointS=function(F$y,F$j,F$t,F$k){var F$T=F$b._temA;return(F$T.length=0)==F$t||0==F$k||F$T.push(F$y,F$j,F$y+F$t,F$j,F$y,F$j+F$k,F$y+F$t,F$j+F$k),F$T},F$b._getWrapRec=function(F$y,F$j){if(!F$y||F$y.length<1)return F$j?F$j.setTo(0,0,0,0):F$b.TEMP.setTo(0,0,0,0);F$j=F$j||new F$b;var F$t,F$k,F$T,F$Y,F$A,F$X=F$y.length,F$I=F$P.TEMP;for(F$T=F$A=-(F$k=F$Y=99999),F$t=0;F$t<F$X;F$t+=2)F$I.x=F$y[F$t],F$I.y=F$y[F$t+1],F$k=F$k<F$I.x?F$k:F$I.x,F$Y=F$Y<F$I.y?F$Y:F$I.y,F$T=F$T>F$I.x?F$T:F$I.x,F$A=F$A>F$I.y?F$A:F$I.y;return F$j.setTo(F$k,F$Y,F$T-F$k,F$A-F$Y)},F$b.EMPTY=new F$b,F$b.TEMP=new F$b,F$b._temB=[],F$b._temA=[],F$b}(),F$Q=function(){function F$I(){}return F$D(F$I,"laya.media.SoundManager"),F$W(1,F$I,"useAudioMusic",function(){return F$I._useAudioMusic},function(F$y){F$I._useAudioMusic=F$y,F$I._musicClass=F$y?F$ty:null}),F$W(1,F$I,"autoStopMusic",function(){return F$I._autoStopMusic},function(F$y){F$N.stage.off("blur",null,F$I._stageOnBlur),F$N.stage.off("focus",null,F$I._stageOnFocus),F$N.stage.off("visibilitychange",null,F$I._visibilityChange),(F$I._autoStopMusic=F$y)&&(F$N.stage.on("blur",null,F$I._stageOnBlur),F$N.stage.on("focus",null,F$I._stageOnFocus),F$N.stage.on("visibilitychange",null,F$I._visibilityChange))}),F$W(1,F$I,"muted",function(){return F$I._muted},function(F$y){F$y!=F$I._muted&&(F$y&&F$I.stopAllSound(),F$I.musicMuted=F$y,F$I._muted=F$y)}),F$W(1,F$I,"musicMuted",function(){return F$I._musicMuted},function(F$y){F$y!=F$I._musicMuted&&(F$y?(F$I._tMusic&&F$I._musicChannel&&!F$I._musicChannel.isStopped?F$I._musicChannel.pause():F$I._musicChannel=null,F$I._musicMuted=F$y):(F$I._musicMuted=F$y,F$I._tMusic&&F$I._musicChannel&&F$I._musicChannel.resume()))}),F$W(1,F$I,"soundMuted",function(){return F$I._soundMuted},function(F$y){F$I._soundMuted=F$y}),F$I.addChannel=function(F$y){0<=F$I._channels.indexOf(F$y)||(F$I._channels.push(F$y),F$I.autoReleaseSound&&0!=F$I._notUsedCount&&F$I._notUsedUrls[F$y.url]&&(delete F$I._notUsedUrls[F$y.url],0==--F$I._notUsedCount&&F$N.timer.clear(F$I,F$I.disposeSoundIfNotUsed)))},F$I.removeChannel=function(F$y){var F$j=F$I._channels,F$t=F$j.indexOf(F$y);if(-1!=F$t&&(F$j.splice(F$t,1),F$I.autoReleaseSound)){var F$k=F$y.url,F$T=F$I.defaultIntervals[F$k]||2e4;if(0<F$T){var F$Y=!0;for(F$t=F$j.length-1;0<=F$t;F$t--)if(F$j[F$t].url==F$k){F$Y=!1;break}F$Y&&(F$I._notUsedUrls[F$k]=Date.now()+F$T,0==F$I._notUsedCount++&&F$N.timer.loop(1e4,F$I,F$I.disposeSoundIfNotUsed))}}},F$I.disposeSoundIfNotUsed=function(){var F$y=F$I._notUsedUrls;if(0!=F$I._notUsedCount){var F$j=Date.now();for(var F$t in F$y)F$j>=F$y[F$t]&&(delete F$y[F$t],--F$I._notUsedCount,F$I.destroySound(F$t));if(0!=F$I._notUsedCount)return}F$N.timer.clear(F$I,F$I.disposeSoundIfNotUsed)},F$I._visibilityChange=function(){F$N.stage.isVisibility?F$I._stageOnFocus():F$I._stageOnBlur()},F$I._stageOnBlur=function(){F$I._isActive=!1,F$I._musicChannel&&(F$I._musicChannel.isStopped||(F$I._blurPaused=!0,F$I._musicChannel.pause())),F$I.stopAllSound(),F$N.stage.once("mousedown",null,F$I._stageOnFocus)},F$I._recoverWebAudio=function(){F$Yy.ctx&&"running"!=F$Yy.ctx.state&&F$Yy.ctx.resume&&F$Yy.ctx.resume()},F$I._stageOnFocus=function(){if(F$I._isActive=!0,F$I._recoverWebAudio(),F$N.stage.off("mousedown",null,F$I._stageOnFocus),F$I._blurPaused){var F$y=F$I._musicChannel;F$y&&F$I._music&&F$y.isStopped&&(F$I._blurPaused=!1,F$I._music._disposed?F$I.playMusic(F$y.url,F$y.loops,F$y.startHandler,F$y.completeHandler,F$y.startTime):F$y.audioBuffer?F$y.resume():F$I._music.play(F$y.startTime,F$y.loops,F$y.startHandler,F$y))}},F$I.playSound=function(F$y,F$j,F$t,F$k,F$T,F$Y){if(void 0===F$j&&(F$j=1),void 0===F$Y&&(F$Y=0),!F$y)return null;if(F$I._muted)return null;if(F$I._recoverWebAudio(),F$y==F$I._tMusic){if(F$I._musicMuted)return null}else{if(!F$I._isActive)return null;if(F$I._soundMuted)return null}var F$A,F$X=F$I._pool[F$y];return F$T||(F$T=F$I._soundClass),F$X||((F$X=new F$T).load(F$y),F$I._pool[F$y]=F$X),(F$A=F$X.play(F$Y,F$j,F$t))?(F$y==F$I._tMusic&&(F$I._music=F$X,F$I._isActive||(F$I._blurPaused=!0,F$A.pause())),F$A.url=F$y,F$A.volume=F$y==F$I._tMusic?F$I.musicVolume:F$I.soundVolume,F$A.completeHandler=F$k,F$A):null},F$I.destroySound=function(F$y){var F$j=F$I._pool[F$y];F$j&&(delete F$I._pool[F$y],F$j.dispose())},F$I.playMusic=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$j&&(F$j=0),void 0===F$T&&(F$T=0),F$I._tMusic=F$y,F$I._musicChannel&&F$I._musicChannel.stop(),F$I._musicChannel=F$I.playSound(F$y,F$j,F$t,F$k,null,F$T)},F$I.stopSound=function(F$y){for(var F$j,F$t=F$I._channels.length-1;0<=F$t;F$t--)(F$j=F$I._channels[F$t]).url==F$y&&F$j.stop()},F$I.stopAll=function(){F$I._tMusic=null;var F$y=0;for(F$y=F$I._channels.length-1;0<=F$y;F$y--)F$I._channels[F$y].stop()},F$I.stopAllSound=function(){var F$y,F$j=0;for(F$j=F$I._channels.length-1;0<=F$j;F$j--)(F$y=F$I._channels[F$j]).url!=F$I._tMusic&&F$y.stop()},F$I.stopMusic=function(){F$I._musicChannel&&F$I._musicChannel.stop(),F$I._tMusic=null},F$I.setSoundVolume=function(F$y,F$j){if(F$j)F$I._setVolume(F$j,F$y);else{F$I.soundVolume=F$y;var F$t,F$k=0;for(F$k=F$I._channels.length-1;0<=F$k;F$k--)(F$t=F$I._channels[F$k]).url!=F$I._tMusic&&(F$t.volume=F$y)}},F$I.setMusicVolume=function(F$y){F$I.musicVolume=F$y,F$I._setVolume(F$I._tMusic,F$y)},F$I._setVolume=function(F$y,F$j){for(var F$t,F$k=F$I._channels.length-1;0<=F$k;F$k--)(F$t=F$I._channels[F$k]).url==F$y&&(F$t.volume=F$j)},F$I.musicVolume=1,F$I.soundVolume=1,F$I.playbackRate=1,F$I._useAudioMusic=!0,F$I._muted=!1,F$I._soundMuted=!1,F$I._musicMuted=!1,F$I._tMusic=null,F$I._musicChannel=null,F$I._music=null,F$I._channels=[],F$I._autoStopMusic=!1,F$I._blurPaused=!1,F$I._isActive=!0,F$I._soundClass=null,F$I._musicClass=null,F$I.autoReleaseSound=!0,F$I._pool={},F$I.defaultIntervals={},F$I._notUsedUrls={},F$I._notUsedCount=0,F$I}(),F$p=function(){var F$y;function F$t(){}return F$D(F$t,"laya.net.LocalStorage"),F$t.__init__=function(){F$t._baseClass||(F$t._baseClass=F$y).init(),F$t.items=F$t._baseClass.items,F$t.support=F$t._baseClass.support},F$t.setItem=function(F$y,F$j){F$t._baseClass.setItem(F$y,F$j)},F$t.getItem=function(F$y){return F$t._baseClass.getItem(F$y)},F$t.setJSON=function(F$y,F$j){F$t._baseClass.setJSON(F$y,F$j)},F$t.getJSON=function(F$y){return F$t._baseClass.getJSON(F$y)},F$t.removeItem=function(F$y){F$t._baseClass.removeItem(F$y)},F$t.clear=function(){F$t._baseClass.clear()},F$t._baseClass=null,F$t.items=null,F$t.support=!1,F$t.__init$=function(){F$y=function(){function F$t(){}return F$D(F$t,""),F$t.init=function(){try{F$t.support=!0,F$t.items=F$A.localStorage,F$t.setItem("laya","1"),F$t.removeItem("laya")}catch(F$y){F$t.support=!1}F$t.support||console.log("LocalStorage is not supprot or browser is private mode.")},F$t.setItem=function(F$y,F$j){try{F$t.support&&F$t.items.setItem(F$y,F$j)}catch(F$y){console.warn("set localStorage failed",F$y)}},F$t.getItem=function(F$y){return F$t.support?F$t.items.getItem(F$y):null},F$t.setJSON=function(F$y,F$j){try{F$t.support&&F$t.items.setItem(F$y,JSON.stringify(F$j))}catch(F$y){console.warn("set localStorage failed",F$y)}},F$t.getJSON=function(F$y){return JSON.parse(F$t.support?F$t.items.getItem(F$y):null)},F$t.removeItem=function(F$y){F$t.support&&F$t.items.removeItem(F$y)},F$t.clear=function(){F$t.support&&F$t.items.clear()},F$t.items=null,F$t.support=!1,F$t}()},F$t}(),F$q=(function(){function F$k(){}F$D(F$k,"laya.net.ResourceVersion"),F$k.enable=function(F$y,F$j,F$t){void 0===F$t&&(F$t=2),laya.net.ResourceVersion.type=F$t,F$N.loader.load(F$y,F$C.create(null,F$k.onManifestLoaded,[F$j]),null,"json"),F$w.customFormat=F$k.addVersionPrefix},F$k.onManifestLoaded=function(F$y,F$j){F$k.manifest=F$j,F$y.run(),F$j||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},F$k.addVersionPrefix=function(F$y){return F$k.manifest&&F$k.manifest[F$y]?2==F$k.type?F$k.manifest[F$y]:F$k.manifest[F$y]+"/"+F$y:F$y},F$k.FOLDER_VERSION=1,F$k.FILENAME_VERSION=2,F$k.manifest=null,F$k.type=1}(),function(){function F$y(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}F$D(F$y,"laya.net.TTFLoader");var F$j=F$y.prototype;return F$j.load=function(F$y){var F$j=(this._url=F$y).split(".ttf")[0].split("/");this.fontName=F$j[F$j.length-1],F$G.window.conch?this._loadConch():F$G.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},F$j._loadConch=function(){this._http=new F$Ay,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},F$j._onHttpLoaded=function(F$y){F$G.window.conch.setFontFaceFromBuffer(this.fontName,F$y),this._clearHttp(),this._complete()},F$j._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},F$j._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},F$j._complete=function(){F$N.timer.clear(this,this._complete),F$N.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},F$j._checkComplete=function(){F$m.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},F$j._loadWithFontFace=function(){var F$y=new F$G.window.FontFace(this.fontName,"url('"+this._url+"')");F$G.window.document.fonts.add(F$y);var F$j=this;F$y.loaded.then(function(){F$j._complete()}),F$y.load()},F$j._createDiv=function(){this._div=F$G.createElement("div"),this._div.innerHTML="laya";var F$y=this._div.style;F$y.fontFamily=this.fontName,F$y.position="absolute",F$y.left="-100px",F$y.top="-100px",F$G.document.body.appendChild(this._div)},F$j._loadWithCSS=function(){var F$y=this,F$j=F$G.createElement("style");F$j.type="text/css",F$G.document.body.appendChild(F$j),F$j.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=F$m.measureText("LayaTTFFont",this._fontTxt).width;var F$t=this;F$j.onload=function(){F$N.timer.once(1e4,F$t,F$y._complete)},F$N.timer.loop(20,this,this._checkComplete),this._createDiv()},F$y._testString="LayaTTFFont",F$y}()),F$w=function(){function F$k(F$y){this._url=null,this._path=null,this._url=F$k.formatURL(F$y),this._path=F$k.getPath(F$y)}F$D(F$k,"laya.net.URL");var F$y=F$k.prototype;return F$W(0,F$y,"path",function(){return this._path}),F$W(0,F$y,"url",function(){return this._url}),F$k.formatURL=function(F$y,F$j){if(!F$y)return"null path";if(0<F$y.indexOf(":"))return F$y;null!=F$k.customFormat&&(F$y=F$k.customFormat(F$y,F$j));var F$t=F$y.charAt(0);if("."===F$t)return F$k.formatRelativePath((F$j||F$k.basePath)+F$y);if("~"===F$t)return F$k.rootPath+F$y.substring(1);if("d"===F$t){if(0===F$y.indexOf("data:image"))return F$y}else if("/"===F$t)return F$y;return(F$j||F$k.basePath)+F$y},F$k.formatRelativePath=function(F$y){for(var F$j=F$y.split("/"),F$t=0,F$k=F$j.length;F$t<F$k;F$t++)".."==F$j[F$t]&&(F$j.splice(F$t-1,2),F$t-=2);return F$j.join("/")},F$k.isAbsolute=function(F$y){return 0<F$y.indexOf(":")||"/"==F$y.charAt(0)},F$k.getPath=function(F$y){var F$j=F$y.lastIndexOf("/");return 0<F$j?F$y.substr(0,F$j+1):""},F$k.getFileName=function(F$y){var F$j=F$y.lastIndexOf("/");return 0<F$j?F$y.substr(F$j+1):F$y},F$k.version={},F$k.basePath="",F$k.rootPath="",F$k.customFormat=function(F$y){var F$j=F$k.version[F$y];return!F$S.isConchApp&&F$j&&(F$y+="?v="+F$j),F$y},F$k}(),F$S=function(){function F$T(F$y,F$j){this._timeId=0;var F$t=F$T._mainCanvas.source.style;F$t.position="absolute",F$t.top=F$t.left="0px",F$t.background="#000000",F$T._mainCanvas.source.id="layaCanvas";var F$k=laya.renders.Render.isWebGL;F$T._mainCanvas.source.width=F$y,F$T._mainCanvas.source.height=F$j,F$k&&F$T.WebGL.init(F$T._mainCanvas,F$y,F$j),F$G.container.appendChild(F$T._mainCanvas.source),(F$T._context=new F$H(F$y,F$j,F$k?null:F$T._mainCanvas)).ctx.setIsMainContext(),F$G.window.requestAnimationFrame(function F$y(F$j){F$G.window.requestAnimationFrame(F$y);F$N.stage._loop()}),F$N.stage.on("visibilitychange",this,this._onVisibilitychange)}F$D(F$T,"laya.renders.Render");var F$y=F$T.prototype;return F$y._onVisibilitychange=function(){F$N.stage.isVisibility?0!=this._timeId&&F$G.window.clearInterval(this._timeId):this._timeId=F$G.window.setInterval(this._enterFrame,1e3)},F$y._enterFrame=function(F$y){F$N.stage._loop()},F$W(1,F$T,"context",function(){return F$T._context}),F$W(1,F$T,"canvas",function(){return F$T._mainCanvas.source}),F$T._context=null,F$T._mainCanvas=null,F$T.WebGL=null,F$T.isConchNode=!1,F$T.isConchApp=!1,F$T.isConchWebGL=!1,F$T.isWebGL=!1,F$T.is3DMode=!1,F$T.optimizeTextureMemory=function(F$y,F$j){return!0},F$T.__init$=function(){F$A.ConchRenderType=F$A.ConchRenderType||1,F$A.ConchRenderType|=F$A.conch?4:0,F$T.isConchNode=5==(5&F$A.ConchRenderType),F$T.isConchApp=4==(4&F$A.ConchRenderType),F$T.isConchWebGL=6==F$A.ConchRenderType},F$T}(),F$H=function(){function F$A(F$y,F$j,F$t){this.x=0,this.y=0,this._drawTexture=function(F$y,F$j,F$t){F$t[0].loaded&&this.ctx.drawTexture(F$t[0],F$t[1],F$t[2],F$t[3],F$t[4],F$y,F$j)},this._fillTexture=function(F$y,F$j,F$t){F$t[0].loaded&&this.ctx.fillTexture(F$t[0],F$t[1]+F$y,F$t[2]+F$j,F$t[3],F$t[4],F$t[5],F$t[6],F$t[7])},this._drawTextureWithTransform=function(F$y,F$j,F$t){F$t[0].loaded&&this.ctx.drawTextureWithTransform(F$t[0],F$t[1],F$t[2],F$t[3],F$t[4],F$t[5],F$y,F$j,F$t[6])},this._fillQuadrangle=function(F$y,F$j,F$t){this.ctx.fillQuadrangle(F$t[0],F$t[1],F$t[2],F$t[3],F$t[4])},this._drawRect=function(F$y,F$j,F$t){var F$k=this.ctx;null!=F$t[4]&&(F$k.fillStyle=F$t[4],F$k.fillRect(F$y+F$t[0],F$j+F$t[1],F$t[2],F$t[3],null)),null!=F$t[5]&&(F$k.strokeStyle=F$t[5],F$k.lineWidth=F$t[6],F$k.strokeRect(F$y+F$t[0],F$j+F$t[1],F$t[2],F$t[3],F$t[6]))},this._drawPie=function(F$y,F$j,F$t){var F$k=this.ctx;F$S.isWebGL&&F$k.setPathId(F$t[8]),F$k.beginPath(),F$S.isWebGL?(F$k.movePath(F$t[0]+F$y,F$t[1]+F$j),F$k.moveTo(0,0)):F$k.moveTo(F$y+F$t[0],F$j+F$t[1]),F$k.arc(F$y+F$t[0],F$j+F$t[1],F$t[2],F$t[3],F$t[4]),F$k.closePath(),this._fillAndStroke(F$t[5],F$t[6],F$t[7],!0)},this._clipRect=function(F$y,F$j,F$t){this.ctx.clipRect(F$y+F$t[0],F$j+F$t[1],F$t[2],F$t[3])},this._fillRect=function(F$y,F$j,F$t){this.ctx.fillRect(F$y+F$t[0],F$j+F$t[1],F$t[2],F$t[3],F$t[4])},this._drawCircle=function(F$y,F$j,F$t){var F$k=this.ctx;F$S.isWebGL&&F$k.setPathId(F$t[6]),F$B.drawCall++,F$k.beginPath(),F$S.isWebGL&&F$k.movePath(F$t[0]+F$y,F$t[1]+F$j),F$k.arc(F$t[0]+F$y,F$t[1]+F$j,F$t[2],0,F$A.PI2),F$k.closePath(),this._fillAndStroke(F$t[3],F$t[4],F$t[5],!0)},this._fillCircle=function(F$y,F$j,F$t){F$B.drawCall++;var F$k=this.ctx;F$k.beginPath(),F$k.fillStyle=F$t[3],F$k.arc(F$t[0]+F$y,F$t[1]+F$j,F$t[2],0,F$A.PI2),F$k.fill()},this._setShader=function(F$y,F$j,F$t){this.ctx.setShader(F$t[0])},this._drawLine=function(F$y,F$j,F$t){var F$k=this.ctx;F$S.isWebGL&&F$k.setPathId(F$t[6]),F$k.beginPath(),F$k.strokeStyle=F$t[4],F$k.lineWidth=F$t[5],F$S.isWebGL?(F$k.movePath(F$y,F$j),F$k.moveTo(F$t[0],F$t[1]),F$k.lineTo(F$t[2],F$t[3])):(F$k.moveTo(F$y+F$t[0],F$j+F$t[1]),F$k.lineTo(F$y+F$t[2],F$j+F$t[3])),F$k.stroke()},this._drawLines=function(F$y,F$j,F$t){var F$k=this.ctx;F$S.isWebGL&&F$k.setPathId(F$t[5]),F$k.beginPath(),F$y+=F$t[0],F$j+=F$t[1],F$S.isWebGL&&F$k.movePath(F$y,F$j),F$k.strokeStyle=F$t[3],F$k.lineWidth=F$t[4];var F$T=F$t[2],F$Y=2,F$A=F$T.length;if(F$S.isWebGL)for(F$k.moveTo(F$T[0],F$T[1]);F$Y<F$A;)F$k.lineTo(F$T[F$Y++],F$T[F$Y++]);else for(F$k.moveTo(F$y+F$T[0],F$j+F$T[1]);F$Y<F$A;)F$k.lineTo(F$y+F$T[F$Y++],F$j+F$T[F$Y++]);F$k.stroke()},this._drawLinesWebGL=function(F$y,F$j,F$t){this.ctx.drawLines(F$y+this.x+F$t[0],F$j+this.y+F$t[1],F$t[2],F$t[3],F$t[4])},this._drawCurves=function(F$y,F$j,F$t){this.ctx.drawCurves(F$y,F$j,F$t)},this._draw=function(F$y,F$j,F$t){F$t[0].call(null,this,F$y,F$j)},this._transformByMatrix=function(F$y,F$j,F$t){this.ctx.transformByMatrix(F$t[0])},this._setTransform=function(F$y,F$j,F$t){this.ctx.setTransform(F$t[0],F$t[1],F$t[2],F$t[3],F$t[4],F$t[5])},this._setTransformByMatrix=function(F$y,F$j,F$t){this.ctx.setTransformByMatrix(F$t[0])},this._save=function(F$y,F$j,F$t){this.ctx.save()},this._restore=function(F$y,F$j,F$t){this.ctx.restore()},this._translate=function(F$y,F$j,F$t){this.ctx.translate(F$t[0],F$t[1])},this._transform=function(F$y,F$j,F$t){this.ctx.translate(F$t[1]+F$y,F$t[2]+F$j);var F$k=F$t[0];this.ctx.transform(F$k.a,F$k.b,F$k.c,F$k.d,F$k.tx,F$k.ty),this.ctx.translate(-F$y-F$t[1],-F$j-F$t[2])},this._rotate=function(F$y,F$j,F$t){this.ctx.translate(F$t[1]+F$y,F$t[2]+F$j),this.ctx.rotate(F$t[0]),this.ctx.translate(-F$y-F$t[1],-F$j-F$t[2])},this._scale=function(F$y,F$j,F$t){this.ctx.translate(F$t[2]+F$y,F$t[3]+F$j),this.ctx.scale(F$t[0],F$t[1]),this.ctx.translate(-F$y-F$t[2],-F$j-F$t[3])},this._alpha=function(F$y,F$j,F$t){this.ctx.globalAlpha*=F$t[0]},this._setAlpha=function(F$y,F$j,F$t){this.ctx.globalAlpha=F$t[0]},this._fillText=function(F$y,F$j,F$t){this.ctx.fillText(F$t[0],F$t[1]+F$y,F$t[2]+F$j,F$t[3],F$t[4],F$t[5])},this._strokeText=function(F$y,F$j,F$t){this.ctx.strokeText(F$t[0],F$t[1]+F$y,F$t[2]+F$j,F$t[3],F$t[4],F$t[5],F$t[6])},this._fillBorderText=function(F$y,F$j,F$t){this.ctx.fillBorderText(F$t[0],F$t[1]+F$y,F$t[2]+F$j,F$t[3],F$t[4],F$t[5],F$t[6],F$t[7])},this._blendMode=function(F$y,F$j,F$t){this.ctx.globalCompositeOperation=F$t[0]},this._beginClip=function(F$y,F$j,F$t){this.ctx.beginClip&&this.ctx.beginClip(F$y+F$t[0],F$j+F$t[1],F$t[2],F$t[3])},this._setIBVB=function(F$y,F$j,F$t){this.ctx.setIBVB(F$t[0]+F$y,F$t[1]+F$j,F$t[2],F$t[3],F$t[4],F$t[5],F$t[6],F$t[7])},this._fillTrangles=function(F$y,F$j,F$t){this.ctx.fillTrangles(F$t[0],F$t[1]+F$y,F$t[2]+F$j,F$t[3],F$t[4])},this._drawPath=function(F$y,F$j,F$t){var F$k=this.ctx;F$S.isWebGL&&F$k.setPathId(-1),F$k.beginPath(),F$y+=F$t[0],F$j+=F$t[1],F$S.isWebGL&&F$k.movePath(F$y,F$j);for(var F$T=F$t[2],F$Y=0,F$A=F$T.length;F$Y<F$A;F$Y++){var F$X=F$T[F$Y];switch(F$X[0]){case"moveTo":F$S.isWebGL?F$k.moveTo(F$X[1],F$X[2]):F$k.moveTo(F$y+F$X[1],F$j+F$X[2]);break;case"lineTo":F$S.isWebGL?F$k.lineTo(F$X[1],F$X[2]):F$k.lineTo(F$y+F$X[1],F$j+F$X[2]);break;case"arcTo":F$S.isWebGL?F$k.arcTo(F$X[1],F$X[2],F$X[3],F$X[4],F$X[5]):F$k.arcTo(F$y+F$X[1],F$j+F$X[2],F$y+F$X[3],F$j+F$X[4],F$X[5]);break;case"closePath":F$k.closePath()}}var F$I=F$t[3];null!=F$I&&(F$k.fillStyle=F$I.fillStyle,F$k.fill());var F$b=F$t[4];null!=F$b&&(F$k.strokeStyle=F$b.strokeStyle,F$k.lineWidth=F$b.lineWidth||1,F$k.lineJoin=F$b.lineJoin,F$k.lineCap=F$b.lineCap,F$k.miterLimit=F$b.miterLimit,F$k.stroke())},this.drawPoly=function(F$y,F$j,F$t){this.ctx.drawPoly(F$y+this.x+F$t[0],F$j+this.y+F$t[1],F$t[2],F$t[3],F$t[4],F$t[5],F$t[6])},this._drawPoly=function(F$y,F$j,F$t){var F$k=this.ctx,F$T=F$t[2],F$Y=2,F$A=F$T.length;if(F$S.isWebGL)for(F$k.setPathId(F$t[6]),F$k.beginPath(),F$y+=F$t[0],F$j+=F$t[1],F$k.movePath(F$y,F$j),F$k.moveTo(F$T[0],F$T[1]);F$Y<F$A;)F$k.lineTo(F$T[F$Y++],F$T[F$Y++]);else for(F$k.beginPath(),F$y+=F$t[0],F$j+=F$t[1],F$k.moveTo(F$y+F$T[0],F$j+F$T[1]);F$Y<F$A;)F$k.lineTo(F$y+F$T[F$Y++],F$j+F$T[F$Y++]);F$k.closePath(),this._fillAndStroke(F$t[3],F$t[4],F$t[5],F$t[7])},this._drawSkin=function(F$y,F$j,F$t){var F$k=F$t[0];if(F$k){var F$T=this.ctx;F$k.render(F$T,F$y,F$j)}},this._drawParticle=function(F$y,F$j,F$t){this.ctx.drawParticle(F$y+this.x,F$j+this.y,F$t[0])},this._setFilters=function(F$y,F$j,F$t){this.ctx.setFilters(F$t)},F$t?this.ctx=F$t.getContext("2d"):(F$t=F$My.create("3D"),this.ctx=F$m.createWebGLContext2D(F$t),F$t._setContext(this.ctx)),F$t.size(F$y,F$j),this.canvas=F$t}F$D(F$A,"laya.renders.RenderContext");var F$y=F$A.prototype;return F$y.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},F$y.drawTexture=function(F$y,F$j,F$t,F$k,F$T){F$y.loaded&&this.ctx.drawTexture(F$y,F$j,F$t,F$k,F$T,this.x,this.y)},F$y._drawTextures=function(F$y,F$j,F$t){F$t[0].loaded&&this.ctx.drawTextures(F$t[0],F$t[1],F$y+this.x,F$j+this.y)},F$y.drawTextureWithTransform=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$y.loaded&&this.ctx.drawTextureWithTransform(F$y,F$j,F$t,F$k,F$T,F$Y,this.x,this.y,F$A)},F$y.fillQuadrangle=function(F$y,F$j,F$t,F$k,F$T){this.ctx.fillQuadrangle(F$y,F$j,F$t,F$k,F$T)},F$y.drawCanvas=function(F$y,F$j,F$t,F$k,F$T){this.ctx.drawCanvas(F$y,F$j+this.x,F$t+this.y,F$k,F$T)},F$y.drawRect=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$Y&&(F$Y=1);var F$A=this.ctx;F$A.strokeStyle=F$T,F$A.lineWidth=F$Y,F$A.strokeRect(F$y+this.x,F$j+this.y,F$t,F$k,F$Y)},F$y._fillAndStroke=function(F$y,F$j,F$t,F$k){void 0===F$k&&(F$k=!1);var F$T=this.ctx;null!=F$y&&(F$T.fillStyle=F$y,F$S.isWebGL?F$T.fill(F$k):F$T.fill()),null!=F$j&&0<F$t&&(F$T.strokeStyle=F$j,F$T.lineWidth=F$t,F$T.stroke())},F$y.clipRect=function(F$y,F$j,F$t,F$k){this.ctx.clipRect(F$y+this.x,F$j+this.y,F$t,F$k)},F$y.fillRect=function(F$y,F$j,F$t,F$k,F$T){this.ctx.fillRect(F$y+this.x,F$j+this.y,F$t,F$k,F$T)},F$y.drawCircle=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=1),F$B.drawCall++;var F$Y=this.ctx;F$Y.beginPath(),F$Y.strokeStyle=F$k,F$Y.lineWidth=F$T,F$Y.arc(F$y+this.x,F$j+this.y,F$t,0,F$A.PI2),F$Y.stroke()},F$y.drawTriangles=function(F$y,F$j,F$t){if(F$S.isWebGL)this.ctx.drawTriangles(F$t[0],F$y+F$t[1],F$j+F$t[2],F$t[3],F$t[4],F$t[5],F$t[6],F$t[7],F$t[8],F$t[9]);else{var F$k=F$t[5],F$T=0,F$Y=F$k.length,F$A=this.ctx;for(F$T=0;F$T<F$Y;F$T+=3){var F$X=2*F$k[F$T],F$I=2*F$k[F$T+1],F$b=2*F$k[F$T+2];F$A.drawTriangle(F$t[0],F$t[3],F$t[4],F$X,F$I,F$b,F$t[6],!0)}}},F$y.fillCircle=function(F$y,F$j,F$t,F$k){F$B.drawCall++;var F$T=this.ctx;F$T.beginPath(),F$T.fillStyle=F$k,F$T.arc(F$y+this.x,F$j+this.y,F$t,0,F$A.PI2),F$T.fill()},F$y.setShader=function(F$y){this.ctx.setShader(F$y)},F$y.drawLine=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$Y&&(F$Y=1);var F$A=this.ctx;F$A.beginPath(),F$A.strokeStyle=F$T,F$A.lineWidth=F$Y,F$A.moveTo(this.x+F$y,this.y+F$j),F$A.lineTo(this.x+F$t,this.y+F$k),F$A.stroke()},F$y.clear=function(){this.ctx.clear()},F$y.transformByMatrix=function(F$y){this.ctx.transformByMatrix(F$y)},F$y.setTransform=function(F$y,F$j,F$t,F$k,F$T,F$Y){this.ctx.setTransform(F$y,F$j,F$t,F$k,F$T,F$Y)},F$y.setTransformByMatrix=function(F$y){this.ctx.setTransformByMatrix(F$y)},F$y.save=function(){this.ctx.save()},F$y.restore=function(){this.ctx.restore()},F$y.translate=function(F$y,F$j){this.ctx.translate(F$y,F$j)},F$y.transform=function(F$y,F$j,F$t,F$k,F$T,F$Y){this.ctx.transform(F$y,F$j,F$t,F$k,F$T,F$Y)},F$y.rotate=function(F$y){this.ctx.rotate(F$y)},F$y.scale=function(F$y,F$j){this.ctx.scale(F$y,F$j)},F$y.alpha=function(F$y){this.ctx.globalAlpha*=F$y},F$y.setAlpha=function(F$y){this.ctx.globalAlpha=F$y},F$y.fillWords=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$Y&&(F$Y=0),this.ctx.fillWords(F$y,F$j,F$t,F$k,F$T,F$Y)},F$y.fillBorderWords=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this.ctx.fillBorderWords(F$y,F$j,F$t,F$k,F$T,F$Y,F$A)},F$y.fillText=function(F$y,F$j,F$t,F$k,F$T,F$Y){this.ctx.fillText(F$y,F$j+this.x,F$t+this.y,F$k,F$T,F$Y)},F$y.strokeText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this.ctx.strokeText(F$y,F$j+this.x,F$t+this.y,F$k,F$T,F$Y,F$A)},F$y.blendMode=function(F$y){this.ctx.globalCompositeOperation=F$y},F$y.flush=function(){this.ctx.flush&&this.ctx.flush()},F$y.addRenderObject=function(F$y){this.ctx.addRenderObject(F$y)},F$y.beginClip=function(F$y,F$j,F$t,F$k){this.ctx.beginClip&&this.ctx.beginClip(F$y,F$j,F$t,F$k)},F$y.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},F$y.fillTrangles=function(F$y,F$j,F$t){this.ctx.fillTrangles(F$t[0],F$t[1],F$t[2],F$t[3],4<F$t.length?F$t[4]:null)},F$A.PI2=2*Math.PI,F$A}(),F$K=function(){function F$A(F$y,F$j){switch(this._next=F$j||F$A.NORENDER,F$y){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=F$n._filter);case 69905:return void(this._fun=F$A._initRenderFun)}this.onCreate(F$y)}F$D(F$A,"laya.renders.RenderSprite");var F$y=F$A.prototype;return F$y.onCreate=function(F$y){},F$y._style=function(F$y,F$j,F$t,F$k){F$y._style.render(F$y,F$j,F$t,F$k);var F$T=this._next;F$T._fun.call(F$T,F$y,F$j,F$t,F$k)},F$y._no=function(F$y,F$j,F$t,F$k){},F$y._custom=function(F$y,F$j,F$t,F$k){F$y.customRender(F$j,F$t,F$k);var F$T=F$y._style._tf;this._next._fun.call(this._next,F$y,F$j,F$t-F$T.translateX,F$k-F$T.translateY)},F$y._clip=function(F$y,F$j,F$t,F$k){var F$T=this._next;if(F$T!=F$A.NORENDER){var F$Y=F$y._style.scrollRect;F$j.ctx.save(),F$j.ctx.clipRect(F$t,F$k,F$Y.width,F$Y.height),F$T._fun.call(F$T,F$y,F$j,F$t-F$Y.x,F$k-F$Y.y),F$j.ctx.restore()}},F$y._blend=function(F$y,F$j,F$t,F$k){var F$T=F$y._style;F$T.blendMode&&(F$j.ctx.globalCompositeOperation=F$T.blendMode);var F$Y=this._next;F$Y._fun.call(F$Y,F$y,F$j,F$t,F$k),F$j.ctx.globalCompositeOperation="source-over"},F$y._mask=function(F$y,F$j,F$t,F$k){var F$T=this._next;F$T._fun.call(F$T,F$y,F$j,F$t,F$k);var F$Y=F$y.mask;F$Y&&(F$j.ctx.globalCompositeOperation="destination-in",(0<F$Y.numChildren||!F$Y.graphics._isOnlyOne())&&(F$Y.cacheAsBitmap=!0),F$Y.render(F$j,F$t-F$y.pivotX,F$k-F$y.pivotY)),F$j.ctx.globalCompositeOperation="source-over"},F$y._graphics=function(F$y,F$j,F$t,F$k){var F$T=F$y._style._tf;F$y._graphics&&F$y._graphics._render(F$y,F$j,F$t-F$T.translateX,F$k-F$T.translateY);var F$Y=this._next;F$Y._fun.call(F$Y,F$y,F$j,F$t,F$k)},F$y._image=function(F$y,F$j,F$t,F$k){var F$T=F$y._style;F$j.ctx.drawTexture2(F$t,F$k,F$T._tf.translateX,F$T._tf.translateY,F$y.transform,F$T.alpha,F$T.blendMode,F$y._graphics._one)},F$y._image2=function(F$y,F$j,F$t,F$k){var F$T=F$y._style._tf;F$j.ctx.drawTexture2(F$t,F$k,F$T.translateX,F$T.translateY,F$y.transform,1,null,F$y._graphics._one)},F$y._alpha=function(F$y,F$j,F$t,F$k){var F$T;if(.01<(F$T=F$y._style.alpha)||F$y._needRepaint()){var F$Y=F$j.ctx.globalAlpha;F$j.ctx.globalAlpha*=F$T;var F$A=this._next;F$A._fun.call(F$A,F$y,F$j,F$t,F$k),F$j.ctx.globalAlpha=F$Y}},F$y._transform=function(F$y,F$j,F$t,F$k){var F$T=F$y.transform,F$Y=this._next;F$T&&F$Y!=F$A.NORENDER?(F$j.save(),F$j.transform(F$T.a,F$T.b,F$T.c,F$T.d,F$T.tx+F$t,F$T.ty+F$k),F$Y._fun.call(F$Y,F$y,F$j,0,0),F$j.restore()):F$Y._fun.call(F$Y,F$y,F$j,F$t,F$k)},F$y._childs=function(F$y,F$j,F$t,F$k){var F$T=F$y._style,F$Y=F$T._tf;if(F$t=F$t-F$Y.translateX+F$T.paddingLeft,F$k=F$k-F$Y.translateY+F$T.paddingTop,F$T._calculation){var F$A=F$y._getWords();if(F$A){var F$X=F$T;F$X&&(F$X.stroke?F$j.fillBorderWords(F$A,F$t,F$k,F$X.font,F$X.color,F$X.strokeColor,F$X.stroke):F$j.fillWords(F$A,F$t,F$k,F$X.font,F$X.color,"none"!=F$X.textDecoration&&F$X.underLine?1:0))}}var F$I,F$b=F$y._childs,F$D=F$b.length;if(F$y.viewport||F$y.optimizeScrollRect&&F$y._style.scrollRect){var F$l=F$y.viewport||F$y._style.scrollRect,F$r=F$l.x,F$$=F$l.y,F$W=F$l.right,F$z=F$l.bottom,F$V=NaN,F$n=NaN;for(F$C=0;F$C<F$D;++F$C)(F$I=F$b[F$C]).visible&&(F$V=F$I._x)<F$W&&F$V+F$I.width>F$r&&(F$n=F$I._y)<F$z&&F$n+F$I.height>F$$&&F$I.render(F$j,F$t,F$k)}else for(var F$C=0;F$C<F$D;++F$C)(F$I=F$b[F$C])._style.visible&&F$I.render(F$j,F$t,F$k)},F$y._canvas=function(F$y,F$j,F$t,F$k){var F$T=F$y._$P.cacheCanvas;if(F$T){"bitmap"===F$T.type?F$B.canvasBitmap++:F$B.canvasNormal++;var F$Y=F$T.ctx;if(F$y._needRepaint()||!F$Y)this._canvas_repaint(F$y,F$j,F$t,F$k);else{var F$A=F$T._cacheRec;F$j.drawCanvas(F$Y.canvas,F$t+F$A.x,F$k+F$A.y,F$A.width,F$A.height)}}else this._next._fun.call(this._next,F$y,F$j,F$t,F$k)},F$y._canvas_repaint=function(F$y,F$j,F$t,F$k){var F$T=F$y._$P.cacheCanvas,F$Y=this._next;if(F$T){var F$A,F$X,F$I,F$b,F$D=F$T.ctx,F$l=F$y._needRepaint()||!F$D,F$r=F$T.type;if("bitmap"===F$r?F$B.canvasBitmap++:F$B.canvasNormal++,F$l){var F$$,F$W;F$T._cacheRec||(F$T._cacheRec=new F$d),F$S.isWebGL&&"bitmap"!==F$r?F$T._cacheRec.setTo(-F$y.pivotX,-F$y.pivotY,1,1):((F$b=F$y.getSelfBounds()).x=F$b.x-F$y.pivotX,F$b.y=F$b.y-F$y.pivotY,F$b.x=F$b.x-16,F$b.y=F$b.y-16,F$b.width=F$b.width+32,F$b.height=F$b.height+32,F$b.x=Math.floor(F$b.x+F$t)-F$t,F$b.y=Math.floor(F$b.y+F$k)-F$k,F$b.width=Math.floor(F$b.width),F$b.height=Math.floor(F$b.height),F$T._cacheRec.copyFrom(F$b)),F$b=F$T._cacheRec;var F$z,F$V=F$S.isWebGL?1:F$G.pixelRatio*F$N.stage.clientScaleX,F$n=F$S.isWebGL?1:F$G.pixelRatio*F$N.stage.clientScaleY;if(!F$S.isWebGL){var F$C,F$M=1,F$_=1;for(F$C=F$y;F$C&&F$C!=F$N.stage;)F$M*=F$C.scaleX,F$_*=F$C.scaleY,F$C=F$C.parent;F$S.isWebGL?(F$M<1&&(F$V*=F$M),F$_<1&&(F$n*=F$_)):(1<F$M&&(F$V*=F$M),1<F$_&&(F$n*=F$_))}if(F$y.scrollRect){var F$e=F$y.scrollRect;F$b.x-=F$e.x,F$b.y-=F$e.y}if(F$$=F$b.width*F$V,F$W=F$b.height*F$n,F$X=F$b.x,F$I=F$b.y,F$S.isWebGL&&"bitmap"===F$r&&(2048<F$$||2048<F$W))return console.warn("cache bitmap size larger than 2048,cache ignored"),F$T.ctx&&(F$R.recover("RenderContext",F$T.ctx),F$T.ctx.canvas.size(0,0),F$T.ctx=null),void F$Y._fun.call(F$Y,F$y,F$j,F$t,F$k);if(F$D||(F$D=F$T.ctx=F$R.getItem("RenderContext")||new F$H(F$$,F$W,F$My.create("AUTO"))),F$D.ctx.sprite=F$y,(F$A=F$D.canvas).clear(),(F$A.width!=F$$||F$A.height!=F$W)&&F$A.size(F$$,F$W),"bitmap"===F$r?F$A.context.asBitmap=!0:"normal"===F$r&&(F$A.context.asBitmap=!1),1!=F$V||1!=F$n){var F$v=F$D.ctx;F$v.save(),F$v.scale(F$V,F$n),!F$S.isConchWebGL&&F$S.isConchApp&&(F$z=F$y._$P.cf)&&F$v.setFilterMatrix&&F$v.setFilterMatrix(F$z._mat,F$z._alpha),F$Y._fun.call(F$Y,F$y,F$D,-F$X,-F$I),F$v.restore(),F$S.isConchApp&&!F$S.isConchWebGL||F$y._applyFilters()}else F$v=F$D.ctx,!F$S.isConchWebGL&&F$S.isConchApp&&(F$z=F$y._$P.cf)&&F$v.setFilterMatrix&&F$v.setFilterMatrix(F$z._mat,F$z._alpha),F$Y._fun.call(F$Y,F$y,F$D,-F$X,-F$I),F$S.isConchApp&&!F$S.isConchWebGL||F$y._applyFilters();F$y._$P.staticCache&&(F$T.reCache=!1),F$B.canvasReCache++}else F$X=(F$b=F$T._cacheRec).x,F$I=F$b.y,F$A=F$D.canvas;F$j.drawCanvas(F$A,F$t+F$X,F$k+F$I,F$b.width,F$b.height)}else F$Y._fun.call(F$Y,F$y,F$D,F$t,F$k)},F$A.__init__=function(){var F$y,F$j,F$t=0;for(F$j=F$m.createRenderSprite(69905,null),F$y=F$A.renders.length=4096,F$t=0;F$t<F$y;F$t++)F$A.renders[F$t]=F$j;F$A.renders[0]=F$m.createRenderSprite(0,null),function(F$y,F$j){for(var F$t=0,F$k=0;F$k<F$y.length;F$k++)F$t|=F$y[F$k],F$A.renders[F$t]=F$j}([1,512,4,2],new F$A(1,null)),F$A.renders[513]=F$m.createRenderSprite(513,null),F$A.renders[517]=new F$A(517,null)},F$A._initRenderFun=function(F$y,F$j,F$t,F$k){var F$T=F$y._renderType;(F$A.renders[F$T]=F$A._getTypeRender(F$T))._fun(F$y,F$j,F$t,F$k)},F$A._getTypeRender=function(F$y){for(var F$j=null,F$t=2048;1<F$t;)F$t&F$y&&(F$j=F$m.createRenderSprite(F$t,F$j)),F$t>>=1;return F$j},F$A.IMAGE=1,F$A.ALPHA=2,F$A.TRANSFORM=4,F$A.BLEND=8,F$A.CANVAS=16,F$A.FILTERS=32,F$A.MASK=64,F$A.CLIP=128,F$A.STYLE=256,F$A.GRAPHICS=512,F$A.CUSTOM=1024,F$A.CHILDS=2048,F$A.INIT=69905,F$A.renders=[],F$A.NORENDER=new F$A(0,null),F$A}(),F$x=function(){function F$X(){this._repaint=!1}F$D(F$X,"laya.resource.Context");var F$y=F$X.prototype;return F$y.replaceReset=function(){var F$y,F$j,F$t=0;for(F$y=F$X.replaceKeys.length,F$t=0;F$t<F$y;F$t++)F$j=F$X.replaceKeys[F$t],this[F$X.newKeys[F$t]]=this[F$j]},F$y.replaceResotre=function(){this.__restore(),this.__reset()},F$y.setIsMainContext=function(){},F$y.drawTextures=function(F$y,F$j,F$t,F$k){F$B.drawCall+=F$j.length/2;for(var F$T=F$y.width,F$Y=F$y.height,F$A=0,F$X=F$j.length;F$A<F$X;F$A+=2)this.drawTexture(F$y,F$j[F$A],F$j[F$A+1],F$T,F$Y,F$t,F$k)},F$y.drawCanvas=function(F$y,F$j,F$t,F$k,F$T){F$B.drawCall++,this.drawImage(F$y.source,F$j,F$t,F$k,F$T)},F$y.fillRect=function(F$y,F$j,F$t,F$k,F$T){F$B.drawCall++,F$T&&(this.fillStyle=F$T),this.__fillRect(F$y,F$j,F$t,F$k)},F$y.fillText=function(F$y,F$j,F$t,F$k,F$T,F$Y){F$B.drawCall++,3<arguments.length&&null!=F$k&&(this.font=F$k,this.fillStyle=F$T,this.textAlign=F$Y,this.textBaseline="top"),this.__fillText(F$y,F$j,F$t)},F$y.fillBorderText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){F$B.drawCall++,this.font=F$k,this.fillStyle=F$T,this.textBaseline="top",this.strokeStyle=F$Y,this.lineWidth=F$A,this.textAlign=F$X,this.__strokeText(F$y,F$j,F$t),this.__fillText(F$y,F$j,F$t)},F$y.strokeText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$B.drawCall++,3<arguments.length&&null!=F$k&&(this.font=F$k,this.strokeStyle=F$T,this.lineWidth=F$Y,this.textAlign=F$A,this.textBaseline="top"),this.__strokeText(F$y,F$j,F$t)},F$y.transformByMatrix=function(F$y){this.transform(F$y.a,F$y.b,F$y.c,F$y.d,F$y.tx,F$y.ty)},F$y.setTransformByMatrix=function(F$y){this.setTransform(F$y.a,F$y.b,F$y.c,F$y.d,F$y.tx,F$y.ty)},F$y.clipRect=function(F$y,F$j,F$t,F$k){F$B.drawCall++,this.beginPath(),this.rect(F$y,F$j,F$t,F$k),this.clip()},F$y.drawTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$B.drawCall++;var F$X=F$y.uv,F$I=F$y.bitmap.width,F$b=F$y.bitmap.height;this.drawImage(F$y.source,F$X[0]*F$I,F$X[1]*F$b,(F$X[2]-F$X[0])*F$I,(F$X[5]-F$X[3])*F$b,F$j+F$Y,F$t+F$A,F$k,F$T)},F$y.drawTextureWithTransform=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){F$B.drawCall++;var F$b=F$y.uv,F$D=F$y.bitmap.width,F$l=F$y.bitmap.height;this.save(),1!=F$I&&(this.globalAlpha*=F$I),F$Y?(this.transform(F$Y.a,F$Y.b,F$Y.c,F$Y.d,F$Y.tx+F$A,F$Y.ty+F$X),this.drawImage(F$y.source,F$b[0]*F$D,F$b[1]*F$l,(F$b[2]-F$b[0])*F$D,(F$b[5]-F$b[3])*F$l,F$j,F$t,F$k,F$T)):this.drawImage(F$y.source,F$b[0]*F$D,F$b[1]*F$l,(F$b[2]-F$b[0])*F$D,(F$b[5]-F$b[3])*F$l,F$j+F$A,F$t+F$X,F$k,F$T),this.restore()},F$y.drawTexture2=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){var F$I=F$X[0];if(F$I.loaded&&F$I.bitmap&&F$I.source){F$B.drawCall++;var F$b=1!==F$Y;if(F$b){var F$D=this.globalAlpha;this.globalAlpha*=F$Y}var F$l=F$I.uv,F$r=F$I.bitmap.width,F$$=F$I.bitmap.height;F$T?(this.save(),this.transform(F$T.a,F$T.b,F$T.c,F$T.d,F$T.tx+F$y,F$T.ty+F$j),this.drawImage(F$I.source,F$l[0]*F$r,F$l[1]*F$$,(F$l[2]-F$l[0])*F$r,(F$l[5]-F$l[3])*F$$,F$X[1]-F$t,F$X[2]-F$k,F$X[3],F$X[4]),this.restore()):this.drawImage(F$I.source,F$l[0]*F$r,F$l[1]*F$$,(F$l[2]-F$l[0])*F$r,(F$l[5]-F$l[3])*F$$,F$X[1]-F$t+F$y,F$X[2]-F$k+F$j,F$X[3],F$X[4]),F$b&&(this.globalAlpha=F$D)}},F$y.fillTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){if(!F$X.pat){if(F$y.uv!=F$Dy.DEF_UV){var F$I=new F$My("2D");F$I.getContext("2d"),F$I.size(F$y.width,F$y.height),F$I.context.drawTexture(F$y,0,0,F$y.width,F$y.height,0,0),F$y=new F$Dy(F$I)}F$X.pat=this.createPattern(F$y.bitmap.source,F$Y)}var F$b=F$j,F$D=F$t,F$l=0,F$r=0;F$A&&(F$b+=F$A.x%F$y.width,F$D+=F$A.y%F$y.height,F$l-=F$A.x%F$y.width,F$r-=F$A.y%F$y.height),this.translate(F$b,F$D),this.fillRect(F$l,F$r,F$k,F$T,F$X.pat),this.translate(-F$b,-F$D)},F$y.drawTriangle=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){var F$I=F$y.bitmap,F$b=F$I.source,F$D=F$y.width,F$l=F$y.height,F$r=F$I.width,F$$=F$I.height,F$W=F$t[F$k]*F$r,F$z=F$t[F$T]*F$r,F$V=F$t[F$Y]*F$r,F$n=F$t[F$k+1]*F$$,F$C=F$t[F$T+1]*F$$,F$M=F$t[F$Y+1]*F$$,F$_=F$j[F$k],F$e=F$j[F$T],F$v=F$j[F$Y],F$N=F$j[F$k+1],F$P=F$j[F$T+1],F$d=F$j[F$Y+1];if(F$X){var F$p=(F$_+F$e+F$v)/3,F$f=(F$N+F$P+F$d)/3,F$Q=F$_-F$p,F$m=F$N-F$f,F$U=Math.sqrt(F$Q*F$Q+F$m*F$m);F$_=F$p+F$Q/F$U*(F$U+1),F$N=F$f+F$m/F$U*(F$U+1),F$m=F$P-F$f,F$e=F$p+(F$Q=F$e-F$p)/(F$U=Math.sqrt(F$Q*F$Q+F$m*F$m))*(F$U+1),F$P=F$f+F$m/F$U*(F$U+1),F$m=F$d-F$f,F$v=F$p+(F$Q=F$v-F$p)/(F$U=Math.sqrt(F$Q*F$Q+F$m*F$m))*(F$U+1),F$d=F$f+F$m/F$U*(F$U+1)}this.save(),F$A&&this.transform(F$A.a,F$A.b,F$A.c,F$A.d,F$A.tx,F$A.ty),this.beginPath(),this.moveTo(F$_,F$N),this.lineTo(F$e,F$P),this.lineTo(F$v,F$d),this.closePath(),this.clip();var F$q=1/(F$W*F$C+F$n*F$V+F$z*F$M-F$C*F$V-F$n*F$z-F$W*F$M),F$w=F$_*F$C+F$n*F$v+F$e*F$M-F$C*F$v-F$n*F$e-F$_*F$M,F$S=F$W*F$e+F$_*F$V+F$z*F$v-F$e*F$V-F$_*F$z-F$W*F$v,F$H=F$W*F$C*F$v+F$n*F$e*F$V+F$_*F$z*F$M-F$_*F$C*F$V-F$n*F$z*F$v-F$W*F$e*F$M,F$K=F$N*F$C+F$n*F$d+F$P*F$M-F$C*F$d-F$n*F$P-F$N*F$M,F$x=F$W*F$P+F$N*F$V+F$z*F$d-F$P*F$V-F$N*F$z-F$W*F$d,F$F=F$W*F$C*F$d+F$n*F$P*F$V+F$N*F$z*F$M-F$N*F$C*F$V-F$n*F$z*F$d-F$W*F$P*F$M;this.transform(F$w*F$q,F$K*F$q,F$S*F$q,F$x*F$q,F$H*F$q,F$F*F$q),this.drawImage(F$b,F$y.uv[0]*F$r,F$y.uv[1]*F$$,F$D,F$l,F$y.uv[0]*F$r,F$y.uv[1]*F$$,F$D,F$l),this.restore()},F$y.flush=function(){return 0},F$y.fillWords=function(F$y,F$j,F$t,F$k,F$T,F$Y){F$k&&(this.font=F$k),F$T&&(this.fillStyle=F$T);this.textBaseline="top",this.textAlign="left";for(var F$A=0,F$X=F$y.length;F$A<F$X;F$A++){var F$I=F$y[F$A];if(this.__fillText(F$I.char,F$I.x+F$j,F$I.y+F$t),1===F$Y){var F$b=F$I.height,F$D=.5*F$I.style.letterSpacing;F$D||(F$D=0),this.beginPath(),this.strokeStyle=F$T,this.lineWidth=1,this.moveTo(F$j+F$I.x-F$D+.5,F$t+F$I.y+F$b+.5),this.lineTo(F$j+F$I.x+F$I.width+F$D+.5,F$t+F$I.y+F$b+.5),this.stroke()}}},F$y.fillBorderWords=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$k&&(this.font=F$k),F$T&&(this.fillStyle=F$T),this.textBaseline="top",this.lineWidth=F$A,this.textAlign="left",this.strokeStyle=F$Y;for(var F$X=0,F$I=F$y.length;F$X<F$I;F$X++){var F$b=F$y[F$X];this.__strokeText(F$b.char,F$b.x+F$j,F$b.y+F$t),this.__fillText(F$b.char,F$b.x+F$j,F$b.y+F$t)}},F$y.destroy=function(){this.canvas.width=this.canvas.height=0},F$y.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},F$y.drawCurves=function(F$y,F$j,F$t){this.beginPath(),this.strokeStyle=F$t[3],this.lineWidth=F$t[4];var F$k=F$t[2];F$y+=F$t[0],F$j+=F$t[1],this.moveTo(F$y+F$k[0],F$j+F$k[1]);for(var F$T=2,F$Y=F$k.length;F$T<F$Y;)this.quadraticCurveTo(F$y+F$k[F$T++],F$j+F$k[F$T++],F$y+F$k[F$T++],F$j+F$k[F$T++]);this.stroke()},F$X.__init__=function(F$j){var F$t=laya.resource.Context.prototype;if(!(F$j=F$j||CanvasRenderingContext2D.prototype).inited){F$j.inited=!0,F$j.__fillText=F$j.fillText,F$j.__fillRect=F$j.fillRect,F$j.__strokeText=F$j.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(F$y){F$j[F$y]=F$t[F$y]})}},F$X.replaceCanvasGetSet=function(F$y,F$j){var F$t=Object.getOwnPropertyDescriptor(F$y,F$j);if(!F$t||!F$t.configurable)return!1;var F$k,F$T={};for(F$k in F$t)"set"!=F$k&&(F$T[F$k]=F$t[F$k]);var F$Y=F$t.set;return F$T.set=function(F$y){F$Y.call(this,F$y);var F$j=this.getContext("2d");F$j&&"__reset"in F$j&&F$j.__reset()},Object.defineProperty(F$y,F$j,F$T),!0},F$X.replaceGetSet=function(F$y,F$j){var F$t=Object.getOwnPropertyDescriptor(F$y,F$j);if(!F$t||!F$t.configurable)return!1;var F$k,F$T={};for(F$k in F$t)"set"!=F$k&&(F$T[F$k]=F$t[F$k]);var F$Y=F$t.set,F$A="___"+F$j+"__";return F$X.newKeys.push(F$A),F$T.set=function(F$y){F$y!=this[F$A]&&(this[F$A]=F$y,F$Y.call(this,F$y))},Object.defineProperty(F$y,F$j,F$T),!0},F$X._default=new F$X,F$X.newKeys=[],F$I(F$X,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),F$X}(),F$F=function(){function F$Y(F$y){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++F$Y._uniqueIDCounter,this._name=F$y||"Content Manager",F$Y._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,F$Y._resourceManagers.push(this),this._resources=[],this._records={}}F$D(F$Y,"laya.resource.ResourceManager");var F$y=F$Y.prototype;return F$N.imps(F$y,{"laya.resource.IDispose":!0}),F$y.getResourceByIndex=function(F$y){return this._resources[F$y]},F$y.getResourcesLength=function(){return this._resources.length},F$y.addResource=function(F$y){return F$y.resourceManager&&F$y.resourceManager.removeResource(F$y),-1===this._resources.indexOf(F$y)&&((F$y._resourceManager=this)._resources.push(F$y),this.addRecord(F$y.uri,F$y.__className,F$y.memorySize),this.addSize(F$y.memorySize),!0)},F$y.removeResource=function(F$y){var F$j=this._resources.indexOf(F$y);return-1!==F$j&&(this._resources.splice(F$j,1),F$y._resourceManager=null,this._memorySize-=F$y.memorySize,this.addRecord(F$y.uri,F$y.__className,-F$y.memorySize),!0)},F$y.unload=function(){for(var F$y=this._resources.slice(0,this._resources.length),F$j=0;F$j<F$y.length;F$j++){F$y[F$j].destroy()}F$y.length=0},F$y.dispose=function(){if(this===F$Y._systemResourceManager)throw new Error("systemResourceManager不能被释放！");F$Y._resourceManagers.splice(F$Y._resourceManagers.indexOf(this),1),F$Y._isResourceManagersSorted=!1;for(var F$y=this._resources.slice(0,this._resources.length),F$j=0;F$j<F$y.length;F$j++){var F$t=F$y[F$j];F$t.resourceManager.removeResource(F$t),F$t.destroy()}F$y.length=0},F$y.addSize=function(F$y){F$y&&(this.autoRelease&&0<F$y&&this._memorySize+F$y>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=F$y)},F$y.addRecord=function(F$y,F$j,F$t){DEBUG&&F$t&&!F$y&&console.error(F$y,F$j,F$t)},F$y.garbageCollection=function(F$y){var F$j=this._resources;(F$j=F$j.slice()).sort(function(F$y,F$j){if(!F$y||!F$j)throw new Error("a或b不能为空！");return F$y.released&&F$j.released?0:F$y.released?1:F$j.released?-1:F$y._lastUseFrameCount-F$j._lastUseFrameCount});for(var F$t=F$B.loopCount,F$k=0,F$T=F$j.length;F$k<F$T;F$k++){var F$Y=F$j[F$k];if(!(1<F$t-F$Y._lastUseFrameCount))return void(this._memorySize>=F$y&&(this._isOverflow=!0));if(F$Y.releaseResource(),this._memorySize<F$y)return void(this._isOverflow=!1)}},F$W(0,F$y,"id",function(){return this._id}),F$W(0,F$y,"name",function(){return this._name},function(F$y){!F$y&&""===F$y||this._name===F$y||(this._name=F$y,F$Y._isResourceManagersSorted=!1)}),F$W(0,F$y,"memorySize",function(){return this._memorySize}),F$W(0,F$y,"records",function(){return this._records}),F$W(1,F$Y,"systemResourceManager",function(){return F$Y._systemResourceManager}),F$Y.__init__=function(){F$Y.currentResourceManager=F$Y.systemResourceManager},F$Y.getLoadedResourceManagerByIndex=function(F$y){return F$Y._resourceManagers[F$y]},F$Y.getLoadedResourceManagersCount=function(){return F$Y._resourceManagers.length},F$Y.recreateContentManagers=function(F$y){void 0===F$y&&(F$y=!1);for(var F$j=F$Y.currentResourceManager,F$t=0;F$t<F$Y._resourceManagers.length;F$t++){F$Y.currentResourceManager=F$Y._resourceManagers[F$t];for(var F$k=0;F$k<F$Y.currentResourceManager._resources.length;F$k++)F$Y.currentResourceManager._resources[F$k].releaseResource(F$y),F$Y.currentResourceManager._resources[F$k].activeResource(F$y)}F$Y.currentResourceManager=F$j},F$Y.releaseContentManagers=function(F$y){void 0===F$y&&(F$y=!1);for(var F$j=F$Y.currentResourceManager,F$t=0;F$t<F$Y._resourceManagers.length;F$t++){F$Y.currentResourceManager=F$Y._resourceManagers[F$t];for(var F$k=0;F$k<F$Y.currentResourceManager._resources.length;F$k++){var F$T=F$Y.currentResourceManager._resources[F$k];!F$T.released&&F$T.releaseResource(F$y)}}F$Y.currentResourceManager=F$j},F$Y._uniqueIDCounter=0,F$Y._isResourceManagersSorted=!1,F$Y._resourceManagers=[],F$I(F$Y,["_systemResourceManager",function(){return this._systemResourceManager=new F$Y("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=F$Y._systemResourceManager}]),F$Y}(),F$G=(function(){function F$y(){}F$D(F$y,"laya.system.System"),F$y.changeDefinition=function(F$y,F$j){F$N[F$y]=F$j;var F$t=F$y+"=classObj";F$N._runScript(F$t)},F$y.__init__=function(){F$S.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function F$t(){}return F$D(F$t,"laya.utils.Browser"),F$W(1,F$t,"pixelRatio",function(){return F$t.__init__(),-1<F$t.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:F$m.getPixelRatio()}),F$W(1,F$t,"height",function(){return F$t.__init__(),(F$N.stage&&F$N.stage.canvasRotation?F$t.clientWidth:F$t.clientHeight)*F$t.pixelRatio}),F$W(1,F$t,"clientWidth",function(){return F$t.__init__(),F$t.window.innerWidth||F$t.document.body.clientWidth}),F$W(1,F$t,"window",function(){return F$t.__init__(),F$t._window}),F$W(1,F$t,"clientHeight",function(){return F$t.__init__(),F$t.window.innerHeight||F$t.document.body.clientHeight||F$t.document.documentElement.clientHeight}),F$W(1,F$t,"width",function(){return F$t.__init__(),(F$N.stage&&F$N.stage.canvasRotation?F$t.clientHeight:F$t.clientWidth)*F$t.pixelRatio}),F$W(1,F$t,"container",function(){return F$t.__init__(),F$t._container||((F$t._container=F$t.createElement("div")).id="layaContainer",F$t.document.body.appendChild(F$t._container)),F$t._container},function(F$y){F$t._container=F$y}),F$W(1,F$t,"document",function(){return F$t.__init__(),F$t._document}),F$t.__init__=function(){if(!F$t._window){F$t._window=F$m.getWindow(),F$t._document=F$t.window.document,F$t._window.addEventListener("message",function(F$y){laya.utils.Browser._onMessage(F$y)},!1),F$t.document.__createElement=F$t.document.createElement,F$A.requestAnimationFrame=F$A.requestAnimationFrame||F$A.webkitRequestAnimationFrame||F$A.mozRequestAnimationFrame||F$A.oRequestAnimationFrame||F$A.msRequestAnimationFrame||function(F$y){return F$A.setTimeout(F$y,1e3/60)};var F$y=F$A.document.body.style;F$y["-webkit-user-select"]="none",F$y["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",F$t.userAgent=F$t.window.navigator.userAgent,F$t.onIOS=!!(F$t.u=F$t.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),F$t.onMobile=-1<F$t.u.indexOf("Mobile"),F$t.onIPhone=-1<F$t.u.indexOf("iPhone"),F$t.onMac=-1<F$t.u.indexOf("Mac OS X"),F$t.onIPad=-1<F$t.u.indexOf("iPad"),F$t.onAndroid=-1<F$t.u.indexOf("Android")||-1<F$t.u.indexOf("Adr"),F$t.onWP=-1<F$t.u.indexOf("Windows Phone"),F$t.onQQBrowser=-1<F$t.u.indexOf("QQBrowser"),F$t.onMQQBrowser=-1<F$t.u.indexOf("MQQBrowser")||-1<F$t.u.indexOf("Mobile")&&-1<F$t.u.indexOf("QQ"),F$t.onIE=!!F$t.window.ActiveXObject||"ActiveXObject"in F$t.window,F$t.onWeiXin=-1<F$t.u.indexOf("MicroMessenger"),F$t.onPC=!F$t.onMobile,F$t.onSafari=-1<F$t.u.indexOf("Safari"),F$t.onFirefox=-1<F$t.u.indexOf("Firefox"),F$t.onEdge=-1<F$t.u.indexOf("Edge"),F$t.onMiniGame=-1<F$t.u.indexOf("MiniGame"),F$t.onLimixiu=-1<F$t.u.indexOf("limixiu"),F$t.httpProtocol="http:"==F$t.window.location.protocol,F$t.onMiniGame&&null==F$t.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),F$t.webAudioEnabled=!!(F$t.window.AudioContext||F$t.window.webkitAudioContext||F$t.window.mozAudioContext),F$t.soundType=F$t.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",F$Ty=F$t.webAudioEnabled?F$Yy:F$ty,F$t.webAudioEnabled&&F$Yy.initWebAudio(),F$ty._initMusicAudio(),F$t.enableTouch="ontouchstart"in F$A||F$A.DocumentTouch&&F$j instanceof DocumentTouch,F$A.focus(),F$Q._soundClass=F$Ty,F$Q._musicClass=F$ty,F$S._mainCanvas=F$S._mainCanvas||F$My.create("2D"),F$t.canvas||(F$t.canvas=F$My.create("2D"),F$t.context=F$t.canvas.getContext("2d"))}},F$t._onMessage=function(F$y){if(F$y.data&&"size"==F$y.data.name){if(F$t.window.innerWidth=F$y.data.width,F$t.window.innerHeight=F$y.data.height,F$t.window.__innerHeight=F$y.data.clientHeight,!F$t.document.createEvent)return void console.warn("no document.createEvent");var F$j=F$t.document.createEvent("HTMLEvents");return F$j.initEvent("resize",!1,!1),void F$t.window.dispatchEvent(F$j)}},F$t.createElement=function(F$y){return F$t.__init__(),F$t.document.__createElement(F$y)},F$t.getElementById=function(F$y){return F$t.__init__(),F$t.document.getElementById(F$y)},F$t.removeElement=function(F$y){F$y&&F$y.parentNode&&F$y.parentNode.removeChild(F$y)},F$t.now=function(){return F$m.now()},F$t._window=null,F$t._document=null,F$t._container=null,F$t.userAgent=null,F$t.u=null,F$t.onIOS=!1,F$t.onMac=!1,F$t.onMobile=!1,F$t.onIPhone=!1,F$t.onIPad=!1,F$t.onAndroid=!1,F$t.onWP=!1,F$t.onQQBrowser=!1,F$t.onMQQBrowser=!1,F$t.onSafari=!1,F$t.onFirefox=!1,F$t.onEdge=!1,F$t.onIE=!1,F$t.onWeiXin=!1,F$t.onMiniGame=!1,F$t.onLimixiu=!1,F$t.onPC=!1,F$t.httpProtocol=!1,F$t.webAudioEnabled=!1,F$t.soundType=null,F$t.enableTouch=!1,F$t.canvas=null,F$t.context=null,F$t.__init$=function(){},F$t}()),F$g=function(){function F$j(F$y){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,F$y?(this._u8d_=new Uint8Array(F$y),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}F$D(F$j,"laya.utils.Byte");var F$y=F$j.prototype;return F$y.___resizeBuffer=function(F$j){try{var F$y=new Uint8Array(F$j);null!=this._u8d_&&(this._u8d_.length<=F$j?F$y.set(this._u8d_):F$y.set(this._u8d_.subarray(0,F$j))),this._u8d_=F$y,this._d_=new DataView(F$y.buffer)}catch(F$y){throw"___resizeBuffer err:"+F$j}},F$y.getString=function(){return this.rUTF(this.getUint16())},F$y.getFloat32Array=function(F$y,F$j){var F$t=F$y+F$j;F$t=F$t>this._length?this._length:F$t;var F$k=new Float32Array(this._d_.buffer.slice(F$y,F$t));return this._pos_=F$t,F$k},F$y.getUint8Array=function(F$y,F$j){var F$t=F$y+F$j;F$t=F$t>this._length?this._length:F$t;var F$k=new Uint8Array(this._d_.buffer.slice(F$y,F$t));return this._pos_=F$t,F$k},F$y.getInt16Array=function(F$y,F$j){var F$t=F$y+F$j;F$t=F$t>this._length?this._length:F$t;var F$k=new Int16Array(this._d_.buffer.slice(F$y,F$t));return this._pos_=F$t,F$k},F$y.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var F$y=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,F$y},F$y.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var F$y=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,F$y},F$y.writeFloat32=function(F$y){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,F$y,this._xd_),this._pos_+=4},F$y.writeFloat64=function(F$y){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,F$y,this._xd_),this._pos_+=8},F$y.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var F$y=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,F$y},F$y.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var F$y=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,F$y},F$y.writeInt32=function(F$y){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,F$y,this._xd_),this._pos_+=4},F$y.writeUint32=function(F$y){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,F$y,this._xd_),this._pos_+=4},F$y.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var F$y=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,F$y},F$y.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var F$y=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,F$y},F$y.writeUint16=function(F$y){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,F$y,this._xd_),this._pos_+=2},F$y.writeInt16=function(F$y){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,F$y,this._xd_),this._pos_+=2},F$y.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},F$y.writeUint8=function(F$y){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,F$y),this._pos_++},F$y._getUInt8=function(F$y){return this._d_.getUint8(F$y)},F$y._getUint16=function(F$y){return this._d_.getUint16(F$y,this._xd_)},F$y._getMatrix=function(){return new F$U(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},F$y.rUTF=function(F$y){for(var F$j=[],F$t=this._pos_+F$y,F$k=0,F$T=0,F$Y=0,F$A=String.fromCharCode,F$X=this._u8d_;this._pos_<F$t;)(F$k=F$X[this._pos_++])<128?0!=F$k&&F$j.push(F$A(F$k)):F$k<224?F$j.push(F$A((63&F$k)<<6|127&F$X[this._pos_++])):F$k<240?(F$T=F$X[this._pos_++],F$j.push(F$A((31&F$k)<<12|(127&F$T)<<6|127&F$X[this._pos_++]))):(F$T=F$X[this._pos_++],F$Y=F$X[this._pos_++],F$j.push(F$A((15&F$k)<<18|(127&F$T)<<12|F$Y<<6&127|127&F$X[this._pos_++]))),0;return F$j.join("")},F$y.getCustomString=function(F$y){for(var F$j=[],F$t=0,F$k=0,F$T=0,F$Y=String.fromCharCode,F$A=this._u8d_;0<F$y;)if((F$k=F$A[this._pos_])<128)F$j.push(F$Y(F$k)),this._pos_++,F$y--;else for(F$t=F$k-128,this._pos_++,F$y-=F$t;0<F$t;)F$k=F$A[this._pos_++],F$T=F$A[this._pos_++],F$j.push(F$Y(F$T<<8|F$k)),F$t--;return F$j.join("")},F$y.clear=function(){this._pos_=0,this.length=0},F$y.__getBuffer=function(){return this._d_.buffer},F$y.writeUTFBytes=function(F$y){for(var F$j=0,F$t=(F$y+="").length;F$j<F$t;F$j++){var F$k=F$y.charCodeAt(F$j);F$k<=127?this.writeByte(F$k):F$k<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|F$k>>6,128|63&F$k],this._pos_),this._pos_+=2):F$k<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|F$k>>12,128|F$k>>6&63,128|63&F$k],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|F$k>>18,128|F$k>>12&63,128|F$k>>6&63,128|63&F$k],this._pos_),this._pos_+=4)}},F$y.writeUTFString=function(F$y){var F$j=this.pos;this.writeUint16(1),this.writeUTFBytes(F$y);var F$t=this.pos-F$j-2;if(65536<=F$t)throw"writeUTFString byte len more than 65536";this._d_.setUint16(F$j,F$t,this._xd_)},F$y.readUTFString=function(){return this.readUTFBytes(this.getUint16())},F$y.getUTFString=function(){return this.readUTFString()},F$y.readUTFBytes=function(F$y){if(void 0===F$y&&(F$y=-1),0==F$y)return"";var F$j=this.bytesAvailable;if(F$j<F$y)throw"readUTFBytes error - Out of bounds";return F$y=0<F$y?F$y:F$j,this.rUTF(F$y)},F$y.getUTFBytes=function(F$y){return void 0===F$y&&(F$y=-1),this.readUTFBytes(F$y)},F$y.writeByte=function(F$y){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,F$y),this._pos_+=1},F$y.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},F$y.getByte=function(){return this.readByte()},F$y.ensureWrite=function(F$y){this._length<F$y&&(this._length=F$y),this._allocated_<F$y&&(this.length=F$y)},F$y.writeArrayBuffer=function(F$y,F$j,F$t){if(void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),F$j<0||F$t<0)throw"writeArrayBuffer error - Out of bounds";0==F$t&&(F$t=F$y.byteLength-F$j),this.ensureWrite(this._pos_+F$t);var F$k=new Uint8Array(F$y);this._u8d_.set(F$k.subarray(F$j,F$j+F$t),this._pos_),this._pos_+=F$t},F$W(0,F$y,"buffer",function(){var F$y=this._d_.buffer;return F$y.byteLength==this.length?F$y:F$y.slice(0,this.length)}),F$W(0,F$y,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(F$y){this._xd_="littleEndian"==F$y}),F$W(0,F$y,"length",function(){return this._length},function(F$y){this._allocated_<F$y?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(F$y,2*this._allocated_))):this._allocated_>F$y&&this.___resizeBuffer(this._allocated_=F$y),this._length=F$y}),F$W(0,F$y,"pos",function(){return this._pos_},function(F$y){this._pos_=F$y}),F$W(0,F$y,"bytesAvailable",function(){return this._length-this._pos_}),F$j.getSystemEndian=function(){if(!F$j._sysEndian){var F$y=new ArrayBuffer(2);new DataView(F$y).setInt16(0,256,!0),F$j._sysEndian=256===new Int16Array(F$y)[0]?"littleEndian":"bigEndian"}return F$j._sysEndian},F$j.BIG_ENDIAN="bigEndian",F$j.LITTLE_ENDIAN="littleEndian",F$j._sysEndian=null,F$j}(),F$a=function(){function F$T(){}return F$D(F$T,"laya.utils.CacheManager"),F$T.regCacheByFunction=function(F$y,F$j){var F$t;F$T.unRegCacheByFunction(F$y,F$j),F$t={tryDispose:F$y,getCacheList:F$j},F$T._cacheList.push(F$t)},F$T.unRegCacheByFunction=function(F$y,F$j){var F$t,F$k=0;for(F$t=F$T._cacheList.length,F$k=0;F$k<F$t;F$k++)if(F$T._cacheList[F$k].tryDispose==F$y&&F$T._cacheList[F$k].getCacheList==F$j)return void F$T._cacheList.splice(F$k,1)},F$T.forceDispose=function(){var F$y=0,F$j=F$T._cacheList.length;for(F$y=0;F$y<F$j;F$y++)F$T._cacheList[F$y].tryDispose(!0)},F$T.beginCheck=function(F$y){void 0===F$y&&(F$y=15e3),F$N.timer.loop(F$y,null,F$T._checkLoop)},F$T.stopCheck=function(){F$N.timer.clear(null,F$T._checkLoop)},F$T._checkLoop=function(){var F$y=F$T._cacheList;if(!(F$y.length<1)){var F$j,F$t=F$G.now(),F$k=0;for(F$j=F$k=F$y.length;0<F$k&&(F$y[F$T._index=++F$T._index%F$j].tryDispose(!1),!(F$G.now()-F$t>F$T.loopTimeLimit));)F$k--}},F$T.loopTimeLimit=2,F$T._cacheList=[],F$T._index=0,F$T}(),F$J=function(){function F$$(){}return F$D(F$$,"laya.utils.ClassUtils"),F$$.regClass=function(F$y,F$j){F$$._classMap[F$y]=F$j},F$$.getRegClass=function(F$y){return F$$._classMap[F$y]},F$$.getInstance=function(F$y){var F$j=F$$.getClass(F$y);return F$j?new F$j:(console.warn("[error] Undefined class:",F$y),null)},F$$.createByJson=function(F$y,F$j,F$t,F$k,F$T){"string"==typeof F$y&&(F$y=JSON.parse(F$y));var F$Y=F$y.props;if(!F$j&&!(F$j=F$T?F$T.runWith(F$y):F$$.getInstance(F$Y.runtime||F$y.type)))return null;var F$A=F$y.child;if(F$A)for(var F$X=0,F$I=F$A.length;F$X<F$I;F$X++){var F$b=F$A[F$X];if("render"!==F$b.props.name&&"render"!==F$b.props.renderType||!F$j._$set_itemRender)if("Graphic"==F$b.type)F$$.addGraphicsToSprite(F$b,F$j);else if(F$$.isDrawType(F$b.type))F$$.addGraphicToSprite(F$b,F$j,!0);else{var F$D=F$$.createByJson(F$b,null,F$t,F$k,F$T);"Script"==F$b.type?F$D.hasOwnProperty("owner")?F$D.owner=F$j:F$D.hasOwnProperty("target")&&(F$D.target=F$j):"mask"==F$b.props.renderType?F$j.mask=F$D:F$j.addChild(F$D)}else F$j.itemRender=F$b}if(F$Y)for(var F$l in F$Y){var F$r=F$Y[F$l];"var"===F$l&&F$t?F$t[F$r]=F$j:F$r instanceof Array&&"function"==typeof F$j[F$l]?F$j[F$l].apply(F$j,F$r):F$j[F$l]=F$r}return F$k&&F$y.customProps&&F$k.runWith([F$j,F$y]),F$j.created&&F$j.created(),F$j},F$$.addGraphicsToSprite=function(F$y,F$j){var F$t;if((F$t=F$y.child)&&!(F$t.length<1)){var F$k;F$k=F$$._getGraphicsFromSprite(F$y,F$j);var F$T=0,F$Y=0;F$y.props&&(F$T=F$$._getObjVar(F$y.props,"x",0),F$Y=F$$._getObjVar(F$y.props,"y",0)),0!=F$T&&0!=F$Y&&F$k.translate(F$T,F$Y);var F$A,F$X=0;for(F$A=F$t.length,F$X=0;F$X<F$A;F$X++)F$$._addGraphicToGraphics(F$t[F$X],F$k);0!=F$T&&0!=F$Y&&F$k.translate(-F$T,-F$Y)}},F$$.addGraphicToSprite=function(F$y,F$j,F$t){var F$k;void 0===F$t&&(F$t=!1),F$k=F$t?F$$._getGraphicsFromSprite(F$y,F$j):F$j.graphics,F$$._addGraphicToGraphics(F$y,F$k)},F$$._getGraphicsFromSprite=function(F$y,F$j){var F$t,F$k;if(!F$y||!F$y.props)return F$j.graphics;switch(F$k=F$y.props.renderType){case"hit":case"unHit":var F$T;F$j.hitArea||(F$j.hitArea=new F$Z),(F$T=F$j.hitArea)[F$k]||(F$T[F$k]=new F$r),F$t=F$T[F$k]}return F$t||(F$t=F$j.graphics),F$t},F$$._getTransformData=function(F$y){var F$j;(F$y.hasOwnProperty("pivotX")||F$y.hasOwnProperty("pivotY"))&&(F$j=F$j||new F$U).translate(-F$$._getObjVar(F$y,"pivotX",0),-F$$._getObjVar(F$y,"pivotY",0));var F$t=F$$._getObjVar(F$y,"scaleX",1),F$k=F$$._getObjVar(F$y,"scaleY",1),F$T=F$$._getObjVar(F$y,"rotation",0);F$$._getObjVar(F$y,"skewX",0),F$$._getObjVar(F$y,"skewY",0);return 1==F$t&&1==F$k&&0==F$T||((F$j=F$j||new F$U).scale(F$t,F$k),F$j.rotate(.0174532922222222*F$T)),F$j},F$$._addGraphicToGraphics=function(F$y,F$j){var F$t,F$k;if((F$t=F$y.props)&&(F$k=F$$.DrawTypeDic[F$y.type])){var F$T,F$Y;F$T=F$j;var F$A=F$$._getParams(F$t,F$k[1],F$k[2],F$k[3]);((F$Y=F$$._tM)||1!=F$$._alpha)&&(F$T.save(),F$Y&&F$T.transform(F$Y),1!=F$$._alpha&&F$T.alpha(F$$._alpha)),F$T[F$k[0]].apply(F$T,F$A),(F$Y||1!=F$$._alpha)&&F$T.restore()}},F$$._adptLineData=function(F$y){return F$y[2]=parseFloat(F$y[0])+parseFloat(F$y[2]),F$y[3]=parseFloat(F$y[1])+parseFloat(F$y[3]),F$y},F$$._adptTextureData=function(F$y){return F$y[0]=F$Xy.getRes(F$y[0]),F$y},F$$._adptLinesData=function(F$y){return F$y[2]=F$$._getPointListByStr(F$y[2]),F$y},F$$.isDrawType=function(F$y){return"Image"!=F$y&&F$$.DrawTypeDic.hasOwnProperty(F$y)},F$$._getParams=function(F$y,F$j,F$t,F$k){var F$T;void 0===F$t&&(F$t=0),(F$T=F$$._temParam).length=F$j.length;var F$Y,F$A,F$X=0;for(F$Y=F$j.length,F$X=0;F$X<F$Y;F$X++)F$T[F$X]=F$$._getObjVar(F$y,F$j[F$X][0],F$j[F$X][1]);return F$$._alpha=F$$._getObjVar(F$y,"alpha",1),F$A=F$$._getTransformData(F$y),F$$._tM=F$A?(F$t||(F$t=0),F$A.translate(F$T[F$t],F$T[F$t+1]),F$T[F$t]=F$T[F$t+1]=0,F$A):null,F$k&&F$$[F$k]&&(F$T=F$$[F$k](F$T)),F$T},F$$._getPointListByStr=function(F$y){var F$j,F$t,F$k=0;for(F$t=(F$j=F$y.split(",")).length,F$k=0;F$k<F$t;F$k++)F$j[F$k]=parseFloat(F$j[F$k]);return F$j},F$$._getObjVar=function(F$y,F$j,F$t){return F$y.hasOwnProperty(F$j)?F$y[F$j]:F$t},F$$._temParam=[],F$$._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},F$$.getClass=function(F$y){var F$j=F$$._classMap[F$y]||F$y;return"string"==typeof F$j?F$N.__classmap[F$j]:F$j},F$$._tM=null,F$$._alpha=NaN,F$I(F$$,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),F$$}(),F$h=function(){function F$Y(F$y){if(this._color=[],"string"==typeof F$y){null===(this.strColor=F$y)&&(F$y="#000000"),"#"==F$y.charAt(0)&&(F$y=F$y.substr(1));var F$j=F$y.length;if(3==F$j||4==F$j){for(var F$t="",F$k=0;F$k<F$j;F$k++)F$t+=F$y[F$k]+F$y[F$k];F$y=F$t}var F$T=this.numColor=parseInt(F$y,16);if(8==F$y.length)return void(this._color=[parseInt(F$y.substr(0,2),16)/255,((16711680&F$T)>>16)/255,((65280&F$T)>>8)/255,(255&F$T)/255])}else F$T=this.numColor=F$y,this.strColor=F$o.toHexColor(F$T);this._color=[((16711680&F$T)>>16)/255,((65280&F$T)>>8)/255,(255&F$T)/255,1],this._color.__id=++F$Y._COLODID}return F$D(F$Y,"laya.utils.Color"),F$Y._initDefault=function(){for(var F$y in F$Y._DEFAULT={},F$Y._COLOR_MAP)F$Y._SAVE[F$y]=F$Y._DEFAULT[F$y]=new F$Y(F$Y._COLOR_MAP[F$y]);return F$Y._DEFAULT},F$Y._initSaveMap=function(){for(var F$y in F$Y._SAVE_SIZE=0,F$Y._SAVE={},F$Y._DEFAULT)F$Y._SAVE[F$y]=F$Y._DEFAULT[F$y]},F$Y.create=function(F$y){var F$j=F$Y._SAVE[F$y+""];return null!=F$j?F$j:(F$Y._SAVE_SIZE<1e3||F$Y._initSaveMap(),F$Y._SAVE[F$y+""]=new F$Y(F$y))},F$Y._SAVE={},F$Y._SAVE_SIZE=0,F$Y._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},F$Y._DEFAULT=F$Y._initDefault(),F$Y._COLODID=1,F$Y}(),F$O=(function(){function F$y(){this._values=[],this._keys=[]}F$D(F$y,"laya.utils.Dictionary");var F$j=F$y.prototype;F$j.set=function(F$y,F$j){var F$t=this.indexOf(F$y);0<=F$t?this._values[F$t]=F$j:(this._keys.push(F$y),this._values.push(F$j))},F$j.indexOf=function(F$y){var F$j=this._keys.indexOf(F$y);return 0<=F$j?F$j:(F$y="string"==typeof F$y?Number(F$y):"number"==typeof F$y?F$y.toString():F$y,this._keys.indexOf(F$y))},F$j.get=function(F$y){var F$j=this.indexOf(F$y);return F$j<0?null:this._values[F$j]},F$j.remove=function(F$y){var F$j=this.indexOf(F$y);return 0<=F$j&&(this._keys.splice(F$j,1),this._values.splice(F$j,1),!0)},F$j.clear=function(){this._values.length=0,this._keys.length=0},F$W(0,F$j,"values",function(){return this._values}),F$W(0,F$j,"keys",function(){return this._keys})}(),function(){function F$y(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}F$D(F$y,"laya.utils.Dragging");var F$j=F$y.prototype;return F$j.start=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){void 0===F$X&&(F$X=.92),this.clearTimer(),this.target=F$y,this.area=F$j,this.hasInertia=F$t,this.elasticDistance=F$j?F$k:0,this.elasticBackTime=F$T,this.data=F$Y,this._disableMouseEvent=F$A,this.ratio=F$X,1!=F$y.globalScaleX||1!=F$y.globalScaleY?this._parent=F$y.parent:this._parent=F$N.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,F$N.stage.on("mouseup",this,this.onStageMouseUp),F$N.stage.on("mouseout",this,this.onStageMouseUp),F$N.timer.frameLoop(1,this,this.loop)},F$j.clearTimer=function(){F$N.timer.clear(this,this.loop),F$N.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},F$j.stop=function(){this._dragging&&(F$z.instance.disableMouseEvent=!1,F$N.stage.off("mouseup",this,this.onStageMouseUp),F$N.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},F$j.loop=function(){var F$y=this._parent.getMousePoint(),F$j=F$y.x,F$t=F$y.y,F$k=F$j-this._lastX,F$T=F$t-this._lastY;if(this._clickOnly){if(!(1<Math.abs(F$k*F$N.stage._canvasTransform.getScaleX())||1<Math.abs(F$T*F$N.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),F$z.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(F$k,F$T);0==F$k&&0==F$T||(this._lastX=F$j,this._lastY=F$t,this.target.x+=F$k*this._elasticRateX,this.target.y+=F$T*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},F$j.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var F$y=this.area.x-this.target.x;else F$y=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-F$y/this.elasticDistance),this.target.y<this.area.y)var F$j=this.area.y-this.target.y;else F$j=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-F$j/this.elasticDistance)}},F$j.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},F$j.onStageMouseUp=function(F$y){if(F$z.instance.disableMouseEvent=!1,F$N.stage.off("mouseup",this,this.onStageMouseUp),F$N.stage.off("mouseout",this,this.onStageMouseUp),F$N.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var F$j=this._offsets.length,F$t=Math.min(F$j,6),F$k=this._offsets.length-F$t,F$T=F$j-1;F$k<F$T;F$T--)this._offsetY+=this._offsets[F$T--],this._offsetX+=this._offsets[F$T];this._offsetX=this._offsetX/F$t*2,this._offsetY=this._offsetY/F$t*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),F$N.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},F$j.checkElastic=function(){var F$y=NaN,F$j=NaN;if(this.target.x<this.area.x?F$y=this.area.x:this.target.x>this.area.x+this.area.width&&(F$y=this.area.x+this.area.width),this.target.y<this.area.y?F$j=this.area.y:this.target.y>this.area.y+this.area.height&&(F$j=this.area.y+this.area.height),isNaN(F$y)&&isNaN(F$j))this.clear();else{var F$t={};isNaN(F$y)||(F$t.x=F$y),isNaN(F$j)||(F$t.y=F$j),this._tween=F$L.to(this.target,F$t,this.elasticBackTime,F$s.sineOut,F$C.create(this,this.clear),0,!1,!1)}},F$j.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(F$N.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},F$j.clear=function(){if(this.target){this.clearTimer();var F$y=this.target;this.target=null,this._parent=null,F$y.event("dragend",this.data)}},F$y}()),F$s=function(){function F$X(){}return F$D(F$X,"laya.utils.Ease"),F$X.linearNone=function(F$y,F$j,F$t,F$k){return F$t*F$y/F$k+F$j},F$X.linearIn=function(F$y,F$j,F$t,F$k){return F$t*F$y/F$k+F$j},F$X.linearInOut=function(F$y,F$j,F$t,F$k){return F$t*F$y/F$k+F$j},F$X.linearOut=function(F$y,F$j,F$t,F$k){return F$t*F$y/F$k+F$j},F$X.bounceIn=function(F$y,F$j,F$t,F$k){return F$t-F$X.bounceOut(F$k-F$y,0,F$t,F$k)+F$j},F$X.bounceInOut=function(F$y,F$j,F$t,F$k){return F$y<.5*F$k?.5*F$X.bounceIn(2*F$y,0,F$t,F$k)+F$j:.5*F$X.bounceOut(2*F$y-F$k,0,F$t,F$k)+.5*F$t+F$j},F$X.bounceOut=function(F$y,F$j,F$t,F$k){return(F$y/=F$k)<1/2.75?F$t*(7.5625*F$y*F$y)+F$j:F$y<2/2.75?F$t*(7.5625*(F$y-=1.5/2.75)*F$y+.75)+F$j:F$y<2.5/2.75?F$t*(7.5625*(F$y-=2.25/2.75)*F$y+.9375)+F$j:F$t*(7.5625*(F$y-=2.625/2.75)*F$y+.984375)+F$j},F$X.backIn=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$T&&(F$T=1.70158),F$t*(F$y/=F$k)*F$y*((F$T+1)*F$y-F$T)+F$j},F$X.backInOut=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$T&&(F$T=1.70158),(F$y/=.5*F$k)<1?.5*F$t*(F$y*F$y*((1+(F$T*=1.525))*F$y-F$T))+F$j:F$t/2*((F$y-=2)*F$y*((1+(F$T*=1.525))*F$y+F$T)+2)+F$j},F$X.backOut=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$T&&(F$T=1.70158),F$t*((F$y=F$y/F$k-1)*F$y*((F$T+1)*F$y+F$T)+1)+F$j},F$X.elasticIn=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A;return void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=0),0==F$y?F$j:1==(F$y/=F$k)?F$j+F$t:(F$Y||(F$Y=.3*F$k),F$A=!F$T||0<F$t&&F$T<F$t||F$t<0&&F$T<-F$t?(F$T=F$t,F$Y/4):F$Y/F$X.PI2*Math.asin(F$t/F$T),-F$T*Math.pow(2,10*(F$y-=1))*Math.sin((F$y*F$k-F$A)*F$X.PI2/F$Y)+F$j)},F$X.elasticInOut=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A;return void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=0),0==F$y?F$j:2==(F$y/=.5*F$k)?F$j+F$t:(F$Y||(F$Y=F$k*(.3*1.5)),F$A=!F$T||0<F$t&&F$T<F$t||F$t<0&&F$T<-F$t?(F$T=F$t,F$Y/4):F$Y/F$X.PI2*Math.asin(F$t/F$T),F$y<1?F$T*Math.pow(2,10*(F$y-=1))*Math.sin((F$y*F$k-F$A)*F$X.PI2/F$Y)*-.5+F$j:F$T*Math.pow(2,-10*(F$y-=1))*Math.sin((F$y*F$k-F$A)*F$X.PI2/F$Y)*.5+F$t+F$j)},F$X.elasticOut=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A;return void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=0),0==F$y?F$j:1==(F$y/=F$k)?F$j+F$t:(F$Y||(F$Y=.3*F$k),F$A=!F$T||0<F$t&&F$T<F$t||F$t<0&&F$T<-F$t?(F$T=F$t,F$Y/4):F$Y/F$X.PI2*Math.asin(F$t/F$T),F$T*Math.pow(2,-10*F$y)*Math.sin((F$y*F$k-F$A)*F$X.PI2/F$Y)+F$t+F$j)},F$X.strongIn=function(F$y,F$j,F$t,F$k){return F$t*(F$y/=F$k)*F$y*F$y*F$y*F$y+F$j},F$X.strongInOut=function(F$y,F$j,F$t,F$k){return(F$y/=.5*F$k)<1?.5*F$t*F$y*F$y*F$y*F$y*F$y+F$j:.5*F$t*((F$y-=2)*F$y*F$y*F$y*F$y+2)+F$j},F$X.strongOut=function(F$y,F$j,F$t,F$k){return F$t*((F$y=F$y/F$k-1)*F$y*F$y*F$y*F$y+1)+F$j},F$X.sineInOut=function(F$y,F$j,F$t,F$k){return.5*-F$t*(Math.cos(Math.PI*F$y/F$k)-1)+F$j},F$X.sineIn=function(F$y,F$j,F$t,F$k){return-F$t*Math.cos(F$y/F$k*F$X.HALF_PI)+F$t+F$j},F$X.sineOut=function(F$y,F$j,F$t,F$k){return F$t*Math.sin(F$y/F$k*F$X.HALF_PI)+F$j},F$X.quintIn=function(F$y,F$j,F$t,F$k){return F$t*(F$y/=F$k)*F$y*F$y*F$y*F$y+F$j},F$X.quintInOut=function(F$y,F$j,F$t,F$k){return(F$y/=.5*F$k)<1?.5*F$t*F$y*F$y*F$y*F$y*F$y+F$j:.5*F$t*((F$y-=2)*F$y*F$y*F$y*F$y+2)+F$j},F$X.quintOut=function(F$y,F$j,F$t,F$k){return F$t*((F$y=F$y/F$k-1)*F$y*F$y*F$y*F$y+1)+F$j},F$X.quartIn=function(F$y,F$j,F$t,F$k){return F$t*(F$y/=F$k)*F$y*F$y*F$y+F$j},F$X.quartInOut=function(F$y,F$j,F$t,F$k){return(F$y/=.5*F$k)<1?.5*F$t*F$y*F$y*F$y*F$y+F$j:.5*-F$t*((F$y-=2)*F$y*F$y*F$y-2)+F$j},F$X.quartOut=function(F$y,F$j,F$t,F$k){return-F$t*((F$y=F$y/F$k-1)*F$y*F$y*F$y-1)+F$j},F$X.cubicIn=function(F$y,F$j,F$t,F$k){return F$t*(F$y/=F$k)*F$y*F$y+F$j},F$X.cubicInOut=function(F$y,F$j,F$t,F$k){return(F$y/=.5*F$k)<1?.5*F$t*F$y*F$y*F$y+F$j:.5*F$t*((F$y-=2)*F$y*F$y+2)+F$j},F$X.cubicOut=function(F$y,F$j,F$t,F$k){return F$t*((F$y=F$y/F$k-1)*F$y*F$y+1)+F$j},F$X.quadIn=function(F$y,F$j,F$t,F$k){return F$t*(F$y/=F$k)*F$y+F$j},F$X.quadInOut=function(F$y,F$j,F$t,F$k){return(F$y/=.5*F$k)<1?.5*F$t*F$y*F$y+F$j:.5*-F$t*(--F$y*(F$y-2)-1)+F$j},F$X.quadOut=function(F$y,F$j,F$t,F$k){return-F$t*(F$y/=F$k)*(F$y-2)+F$j},F$X.expoIn=function(F$y,F$j,F$t,F$k){return 0==F$y?F$j:F$t*Math.pow(2,10*(F$y/F$k-1))+F$j-.001*F$t},F$X.expoInOut=function(F$y,F$j,F$t,F$k){return 0==F$y?F$j:F$y==F$k?F$j+F$t:(F$y/=.5*F$k)<1?.5*F$t*Math.pow(2,10*(F$y-1))+F$j:.5*F$t*(2-Math.pow(2,-10*--F$y))+F$j},F$X.expoOut=function(F$y,F$j,F$t,F$k){return F$y==F$k?F$j+F$t:F$t*(1-Math.pow(2,-10*F$y/F$k))+F$j},F$X.circIn=function(F$y,F$j,F$t,F$k){return-F$t*(Math.sqrt(1-(F$y/=F$k)*F$y)-1)+F$j},F$X.circInOut=function(F$y,F$j,F$t,F$k){return(F$y/=.5*F$k)<1?.5*-F$t*(Math.sqrt(1-F$y*F$y)-1)+F$j:.5*F$t*(Math.sqrt(1-(F$y-=2)*F$y)+1)+F$j},F$X.circOut=function(F$y,F$j,F$t,F$k){return F$t*Math.sqrt(1-(F$y=F$y/F$k-1)*F$y)+F$j},F$X.HALF_PI=.5*Math.PI,F$X.PI2=2*Math.PI,F$X}(),F$Z=function(){function F$l(){this._hit=null,this._unHit=null}F$D(F$l,"laya.utils.HitArea");var F$y=F$l.prototype;return F$y.isHit=function(F$y,F$j){return!!F$l.isHitGraphic(F$y,F$j,this.hit)&&!F$l.isHitGraphic(F$y,F$j,this.unHit)},F$y.contains=function(F$y,F$j){return this.isHit(F$y,F$j)},F$W(0,F$y,"hit",function(){return this._hit||(this._hit=new F$r),this._hit},function(F$y){this._hit=F$y}),F$W(0,F$y,"unHit",function(){return this._unHit||(this._unHit=new F$r),this._unHit},function(F$y){this._unHit=F$y}),F$l.isHitGraphic=function(F$y,F$j,F$t){if(!F$t)return!1;var F$k;if(!(F$k=F$t.cmds)&&F$t._one&&((F$k=F$l._cmds).length=1,F$k[0]=F$t._one),!F$k)return!1;var F$T,F$Y,F$A=0;for(F$T=F$k.length,F$A=0;F$A<F$T;F$A++)if(F$Y=F$k[F$A]){var F$X=F$S._context;switch(F$Y.callee){case F$X._translate:case 6:F$y-=F$Y[0],F$j-=F$Y[1]}if(F$l.isHitCmd(F$y,F$j,F$Y))return!0}return!1},F$l.isHitCmd=function(F$y,F$j,F$t){if(!F$t)return!1;var F$k=F$S._context,F$T=!1;switch(F$t.callee){case F$k._drawRect:case 13:F$l._rec.setTo(F$t[0],F$t[1],F$t[2],F$t[3]),F$T=F$l._rec.contains(F$y,F$j);break;case F$k._drawCircle:case F$k._fillCircle:case 14:F$T=(F$y-=F$t[0])*F$y+(F$j-=F$t[1])*F$j<F$t[2]*F$t[2];break;case F$k._drawPoly:case 18:F$y-=F$t[0],F$j-=F$t[1],F$T=F$l.ptInPolygon(F$y,F$j,F$t[2])}return F$T},F$l.ptInPolygon=function(F$y,F$j,F$t){var F$k;(F$k=F$l._ptPoint).setTo(F$y,F$j);var F$T,F$Y=0,F$A=NaN,F$X=NaN,F$I=NaN,F$b=NaN;F$T=F$t.length;for(var F$D=0;F$D<F$T;F$D+=2){if(F$A=F$t[F$D],F$X=F$t[F$D+1],F$I=F$t[(F$D+2)%F$T],F$X!=(F$b=F$t[(F$D+3)%F$T]))if(!(F$k.y<Math.min(F$X,F$b)))if(!(F$k.y>=Math.max(F$X,F$b)))(F$k.y-F$X)*(F$I-F$A)/(F$b-F$X)+F$A>F$k.x&&F$Y++}return F$Y%2==1},F$l._cmds=[],F$I(F$l,["_rec",function(){return this._rec=new F$d},"_ptPoint",function(){return this._ptPoint=new F$P}]),F$l}(),F$R=(function(){function F$T(F$y,F$j,F$t,F$k){this.char=F$y,this.charNum=F$y.charCodeAt(0),this._x=this._y=0,this.width=F$j,this.height=F$t,this.style=F$k,this.isWord=!F$T._isWordRegExp.test(F$y)}F$D(F$T,"laya.utils.HTMLChar");var F$y=F$T.prototype;F$N.imps(F$y,{"laya.display.ILayout":!0}),F$y.setSprite=function(F$y){this._sprite=F$y},F$y.getSprite=function(){return this._sprite},F$y._isChar=function(){return!0},F$y._getCSSStyle=function(){return this.style},F$W(0,F$y,"width",function(){return this._w},function(F$y){this._w=F$y}),F$W(0,F$y,"x",function(){return this._x},function(F$y){this._sprite&&(this._sprite.x=F$y),this._x=F$y}),F$W(0,F$y,"y",function(){return this._y},function(F$y){this._sprite&&(this._sprite.y=F$y),this._y=F$y}),F$W(0,F$y,"height",function(){return this._h},function(F$y){this._h=F$y}),F$T._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function F$j(){}F$D(F$j,"laya.utils.Log"),F$j.enable=function(){F$j._logdiv||(F$j._logdiv=F$G.window.document.createElement("div"),F$G.window.document.body.appendChild(F$j._logdiv),F$j._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},F$j.toggle=function(){var F$y=F$j._logdiv.style;"1px"==F$y.width?F$y.width=F$y.height="50%":F$y.width=F$y.height="1px"},F$j.print=function(F$y){F$j._logdiv&&(F$j.maxCount<=F$j._count&&F$j.clear(),F$j._count++,F$j._logdiv.innerText+=F$y+"\n",F$j._logdiv.scrollTop=F$j._logdiv.scrollHeight)},F$j.clear=function(){F$j._logdiv.innerText="",F$j._count=0},F$j._logdiv=null,F$j._count=0,F$j.maxCount=20}(),function(){function F$j(){}F$D(F$j,"laya.utils.Mouse"),F$W(1,F$j,"cursor",function(){return F$j._style.cursor},function(F$y){F$j._style.cursor=F$y}),F$j.hide=function(){"none"!=F$j.cursor&&(F$j._preCursor=F$j.cursor,F$j.cursor="none")},F$j.show=function(){"none"==F$j.cursor&&(F$j.cursor=F$j._preCursor?F$j._preCursor:"auto")},F$j._preCursor=null,F$I(F$j,["_style",function(){return this._style=F$G.document.body.style}])}(),function(){function F$Y(){}return F$D(F$Y,"laya.utils.Pool"),F$Y.getPoolBySign=function(F$y){return F$Y._poolDic[F$y]||(F$Y._poolDic[F$y]=[])},F$Y.clearBySign=function(F$y){F$Y._poolDic[F$y]&&(F$Y._poolDic[F$y].length=0)},F$Y.recover=function(F$y,F$j){F$j.__InPool||(F$j.__InPool=!0,F$Y.getPoolBySign(F$y).push(F$j))},F$Y.getItemByClass=function(F$y,F$j){var F$t=F$Y.getPoolBySign(F$y),F$k=F$t.length?F$t.pop():new F$j;return F$k.__InPool=!1,F$k},F$Y.getItemByCreateFun=function(F$y,F$j,F$t){var F$k=F$Y.getPoolBySign(F$y),F$T=F$k.length?F$k.pop():F$j.call(F$t);return F$T.__InPool=!1,F$T},F$Y.getItem=function(F$y){var F$j=F$Y.getPoolBySign(F$y),F$t=F$j.length?F$j.pop():null;return F$t&&(F$t.__InPool=!1),F$t},F$Y._poolDic={},F$Y.InPoolSign="__InPool",F$Y}()),F$B=function(){function F$I(){}return F$D(F$I,"laya.utils.Stat"),F$W(1,F$I,"onclick",null,function(F$y){F$I._sp&&F$I._sp.on("click",F$I._sp,F$y),F$I._canvas&&(F$I._canvas.source.onclick=F$y,F$I._canvas.source.style.pointerEvents="")}),F$I.show=function(F$y,F$j,F$t){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),!F$S.isConchApp||F$S.isConchWebGL){if(F$S.isConchWebGL||F$G.onMiniGame||F$G.onLimixiu||(F$I._useCanvas=!0),F$I._show=!0,F$I._fpsData.length=60,F$I._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},F$I._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},F$I._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},F$I._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},F$S.isWebGL)if(F$I._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},F$S.is3DMode){if(F$I._view[0].title="FPS(3D)",F$I._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},F$I._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},F$I._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==F$t){var F$k=8;F$I._view[F$k++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},F$I._view[F$k++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$I._view[F$k++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},F$I._view[F$k++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$I._view[F$k++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$I._view[F$k++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},F$I._view[F$k++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},F$I._view[F$k++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},F$I._view[F$k++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==F$t){F$k=8;F$I._view[F$k++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},F$I._view[F$k++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},F$I._view[F$k++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},F$I._view[F$k++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},F$I._view[F$k++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},F$I._view[F$k++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},F$I._view[F$k++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else F$I._view[0].title="FPS(WebGL)",F$I._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else F$I._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};F$I._useCanvas?F$I.createUIPre(F$y,F$j):F$I.createUI(F$y,F$j),F$I.enable()}else F$G.window.conch.showFPS&&F$G.window.conch.showFPS(F$y,F$j)},F$I.createUIPre=function(F$y,F$j){var F$t=F$G.pixelRatio;F$I._width=170*F$t,F$I._vx=75*F$t,F$I._height=F$t*(12*F$I._view.length+3*F$t)+4,F$I._fontSize=12*F$t;for(var F$k=0;F$k<F$I._view.length;F$k++)F$I._view[F$k].x=4,F$I._view[F$k].y=F$k*F$I._fontSize+2*F$t;F$I._canvas||((F$I._canvas=new F$My("2D")).size(F$I._width,F$I._height),(F$I._ctx=F$I._canvas.getContext("2d")).textBaseline="top",F$I._ctx.font=F$I._fontSize+"px Sans-serif",F$I._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+F$y+"px;top:"+F$j+"px;width:"+F$I._width/F$t+"px;height:"+F$I._height/F$t+"px;"),F$I._first=!0,F$I.loop(),F$I._first=!1,F$G.container.appendChild(F$I._canvas.source)},F$I.createUI=function(F$y,F$j){var F$t=F$I._sp,F$k=F$G.pixelRatio;F$t||(F$t=new F$ly,(F$I._leftText=new F$Vy).pos(5,5),F$I._leftText.color="#ffffff",F$t.addChild(F$I._leftText),(F$I._txt=new F$Vy).pos(80*F$k,5),F$I._txt.color="#ffffff",F$t.addChild(F$I._txt),F$I._sp=F$t),F$t.pos(F$y,F$j);for(var F$T="",F$Y=0;F$Y<F$I._view.length;F$Y++){F$T+=F$I._view[F$Y].title+"\n"}F$I._leftText.text=F$T;var F$A=170*F$k,F$X=F$k*(12*F$I._view.length+3*F$k)+4;F$I._txt.fontSize=F$I._fontSize*F$k,F$I._leftText.fontSize=F$I._fontSize*F$k,F$t.size(F$A,F$X),F$t.graphics.clear(),F$t.graphics.setAlpha(.5),F$t.graphics.drawRect(0,0,F$A,F$X,"#999999"),F$t.graphics.setAlpha(1),F$I.loop()},F$I.enable=function(){F$N.timer.frameLoop(1,F$I,F$I.loop)},F$I.hide=function(){F$I._show=!1,F$N.timer.clear(F$I,F$I.loop),F$I._canvas&&F$G.removeElement(F$I._canvas.source)},F$I.clear=function(){F$I.trianglesFaces=F$I.drawCall=F$I.shaderCall=F$I.spriteCount=F$I.spriteRenderUseCacheCount=F$I.treeNodeCollision=F$I.treeSpriteCollision=F$I.canvasNormal=F$I.canvasBitmap=F$I.canvasReCache=0},F$I.loop=function(){F$I._count++;var F$y=F$G.now();if(!(F$y-F$I._timer<1e3)){var F$j=F$I._count;if(F$I.FPS=Math.round(1e3*F$j/(F$y-F$I._timer)),F$I._show){F$I.trianglesFaces=Math.round(F$I.trianglesFaces/F$j),F$I.spriteCount=F$I._useCanvas?(F$I.drawCall=Math.round(F$I.drawCall/F$j)-2,F$I.shaderCall=Math.round(F$I.shaderCall/F$j),Math.round(F$I.spriteCount/F$j)-1):(F$I.drawCall=Math.round(F$I.drawCall/F$j)-2,F$I.shaderCall=Math.round(F$I.shaderCall/F$j)-4,Math.round(F$I.spriteCount/F$j)-4),F$I.spriteRenderUseCacheCount=Math.round(F$I.spriteRenderUseCacheCount/F$j),F$I.canvasNormal=Math.round(F$I.canvasNormal/F$j),F$I.canvasBitmap=Math.round(F$I.canvasBitmap/F$j),F$I.canvasReCache=Math.ceil(F$I.canvasReCache/F$j),F$I.treeNodeCollision=Math.round(F$I.treeNodeCollision/F$j),F$I.treeSpriteCollision=Math.round(F$I.treeSpriteCollision/F$j);var F$t=0<F$I.FPS?Math.floor(1e3/F$I.FPS).toString():" ";F$I._fpsStr=F$I.FPS+(F$I.renderSlow?" slow":"")+" "+F$t,F$I._spriteStr=F$I.spriteCount+(F$I.spriteRenderUseCacheCount?"/"+F$I.spriteRenderUseCacheCount:""),F$I._canvasStr=F$I.canvasReCache+"/"+F$I.canvasNormal+"/"+F$I.canvasBitmap,F$I.currentMemorySize=F$F.systemResourceManager.memorySize,F$I._useCanvas?F$I.renderInfoPre():F$I.renderInfo(),F$I.clear()}F$I._count=0,F$I._timer=F$y}},F$I.renderInfoPre=function(){if(F$I._canvas){var F$y=F$I._ctx;F$y.clearRect(F$I._first?0:F$I._vx,0,F$I._width,F$I._height);for(var F$j=F$S.WebGL.mainContext,F$t=0;F$t<F$I._view.length;F$t++){var F$k=F$I._view[F$t];F$I._first&&(F$y.fillStyle="white",F$y.fillText(F$k.title,F$k.x,F$k.y,null,null,null)),F$y.fillStyle=F$k.color;var F$T=-1;if((F$k=F$I._view[F$t]).varying){if(F$j)switch(F$k.varying){case 1:F$T=F$j.getParameter(F$j[F$k.value]);break;case 2:F$T=F$j.getExtension(F$k.value)}}else F$T=F$I[F$k.value];"M"==F$k.units&&(F$T=Math.floor(F$T/1048576*100)/100+" M"),"K"==F$k.units&&(F$T=Math.floor(F$T/1024*100)/100+" K"),"string"==F$k.units&&(F$T=F$T.match(/\d+\.?\d/i)),F$y.fillText(F$T+"",F$k.x+F$I._vx,F$k.y,null,null,null)}}},F$I.renderInfo=function(){for(var F$y="",F$j=F$S.WebGL.mainContext,F$t=0;F$t<F$I._view.length;F$t++){var F$k=F$I._view[F$t],F$T=-1;if(F$k.varying){if(F$j)switch(F$k.varying){case 1:F$T=F$j.getParameter(F$j[F$k.value]);break;case 2:F$T=F$j.getExtension(F$k.value)}}else F$T=F$I[F$k.value];"M"==F$k.units&&(F$T=Math.floor(F$T/1048576*100)/100+" M"),"K"==F$k.units&&(F$T=Math.floor(F$T/1024*100)/100+" K"),"string"==F$k.units&&(F$T=F$T.match(/\d+\.?\d/i)),F$y+=F$T+"\n"}F$I._txt.text=F$y},F$I.FPS=0,F$I.loopCount=0,F$I.shaderCall=0,F$I.drawCall=0,F$I.trianglesFaces=0,F$I.spriteCount=0,F$I.spriteRenderUseCacheCount=0,F$I.treeNodeCollision=0,F$I.treeSpriteCollision=0,F$I.canvasNormal=0,F$I.canvasBitmap=0,F$I.canvasReCache=0,F$I.renderSlow=!1,F$I.currentMemorySize=0,F$I._fpsStr=null,F$I._canvasStr=null,F$I._spriteStr=null,F$I._fpsData=[],F$I._timer=0,F$I._count=0,F$I._view=[],F$I._fontSize=12,F$I._txt=null,F$I._leftText=null,F$I._sp=null,F$I._show=!1,F$I._useCanvas=!1,F$I._canvas=null,F$I._ctx=null,F$I._first=!1,F$I._vx=NaN,F$I._width=0,F$I._height=100,F$I}(),F$c=(function(){function F$y(){this._strsToID={},this._idToStrs=[],this._length=0}F$D(F$y,"laya.utils.StringKey");var F$j=F$y.prototype;F$j.add=function(F$y){var F$j=this._strsToID[F$y];return null!=F$j?F$j:(this._idToStrs[this._length]=F$y,this._strsToID[F$y]=this._length++)},F$j.getID=function(F$y){var F$j=this._strsToID[F$y];return null==F$j?-1:F$j},F$j.getName=function(F$y){var F$j=this._idToStrs[F$y];return null==F$j?void 0:F$j}}(),function(){var F$b;function F$y(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}F$D(F$y,"laya.utils.Timer");var F$j=F$y.prototype;return F$j._init=function(){F$N.timer&&F$N.timer.frameLoop(1,this,this._update)},F$j._now=function(){return Date.now()},F$j._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var F$y=this.currFrame=this.currFrame+this.scale,F$j=this._now();this._delta=(F$j-this._lastTimer)*this.scale;var F$t=this.currTimer=this.currTimer+this._delta;F$N.isDebug&&6e4<Math.abs(F$j-this._lastTimer)&&console.error("系统时间错误！"+(F$j-this._lastTimer)),this._lastTimer=F$j;var F$k=this._handlers;for(F$A=this._count=0,F$X=F$k.length;F$A<F$X;F$A++)if(null!==(F$I=F$k[F$A]).method){var F$T=F$I.userFrame?F$y:F$t;if(F$T>=F$I.exeTime)if(F$I.repeat)if(F$I.jumpFrame)for(;F$T>=F$I.exeTime;)F$I.exeTime+=F$I.delay,F$I.run(!1);else F$I.exeTime+=F$I.delay,F$I.run(!1),F$T>F$I.exeTime&&(F$I.exeTime+=Math.ceil((F$T-F$I.exeTime)/F$I.delay)*F$I.delay);else F$I.run(!0)}else this._count++;(30<this._count||F$y%200==0)&&this._clearHandlers();for(var F$Y=this._laters,F$A=0,F$X=F$Y.length-1;F$A<=F$X;F$A++){var F$I=F$Y[F$A];this._isIgnoreRecover(F$I)||(null!==F$I.method&&(delete this._map[F$I.key],F$I.run(!1)),this._recoverHandler(F$I)),F$A===F$X&&(F$X=F$Y.length-1)}F$Y.length=0}},F$j._clearHandlers=function(){for(var F$y=this._handlers,F$j=0,F$t=F$y.length;F$j<F$t;F$j++){var F$k=F$y[F$j];null!==F$k.method?this._temp.push(F$k):this._isIgnoreRecover(F$k)?this._temp.push(F$k):this._recoverHandler(F$k)}this._handlers=this._temp,this._temp=F$y,this._temp.length=0},F$j._recoverHandler=function(F$y){this._map[F$y.key]==F$y&&delete this._map[F$y.key],F$y.recover()},F$j._create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){if(!F$t)return F$T.apply(F$k,F$Y),null;if(F$A){var F$I=this._getHandler(F$k,F$T);if(F$I)return F$I.repeat=F$j,F$I.userFrame=F$y,F$I.delay=F$t,F$I.ignoreRecover=F$X,F$I.caller=F$k,F$I.method=F$T,F$I.args=F$Y,F$I.exeTime=F$t+(F$y?this.currFrame:this.currTimer+this._now()-this._lastTimer),F$I}return(F$I=F$b.create()).repeat=F$j,F$I.userFrame=F$y,F$I.delay=F$t,F$I.ignoreRecover=F$X,F$I.caller=F$k,F$I.method=F$T,F$I.args=F$Y,F$I.exeTime=F$t+(F$y?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(F$I),this._handlers.push(F$I),F$I},F$j._indexHandler=function(F$y){var F$j=F$y.caller,F$t=F$y.method,F$k=F$j?F$j.$_GID||(F$j.$_GID=F$o.getGID()):0,F$T=F$t.$_TID||(F$t.$_TID=this._mid++);F$y.key=F$k+"_"+F$T,this._map[F$y.key]=F$y},F$j.once=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=!0),this._create(!1,!1,F$y,F$j,F$t,F$k,F$T,!1)},F$j.loop=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){void 0===F$T&&(F$T=!0),void 0===F$Y&&(F$Y=!1),void 0===F$A&&(F$A=!1);var F$X=this._create(!1,!0,F$y,F$j,F$t,F$k,F$T,F$A);F$X&&(F$X.jumpFrame=F$Y)},F$j.frameOnce=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=!0),this._create(!0,!1,F$y,F$j,F$t,F$k,F$T,!1)},F$j.frameLoop=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$T&&(F$T=!0),void 0===F$Y&&(F$Y=!1),this._create(!0,!0,F$y,F$j,F$t,F$k,F$T,F$Y)},F$j.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+F$b._freeCount},F$j.clear=function(F$y,F$j){var F$t=this._getHandler(F$y,F$j);return!(!F$t||this._isIgnoreRecover(F$t))&&(delete this._map[F$t.key],F$t.key=null,F$t.clear(),!0)},F$j.clearAll=function(F$y){if(F$y)for(var F$j=0,F$t=this._handlers.length;F$j<F$t;F$j++){var F$k=this._handlers[F$j];F$k.caller===F$y&&(this._isIgnoreRecover(F$k)||(delete this._map[F$k.key],F$k.key=null,F$k.clear()))}},F$j._getHandler=function(F$y,F$j){var F$t=F$y?F$y.$_GID||(F$y.$_GID=F$o.getGID()):0,F$k=F$j.$_TID||(F$j.$_TID=this._mid++);return this._map[F$t+"_"+F$k]},F$j._isIgnoreRecover=function(F$y){if(F$y.ignoreRecover||F$y.caller&&"IgnoreRecover"==F$y.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var F$j="";try{arguments.propertyIsEnumerable.caller}catch(F$y){F$j=F$y.stack}F$N.recordError("报错：核心定时器销毁忽略  "+F$j)}return!0}return!1},F$j.hasHandler=function(F$y,F$j){return this._map[F$y.$_GID+"_"+F$j.$_TID]},F$j.callLater=function(F$y,F$j,F$t){if(null==this._getHandler(F$y,F$j)){var F$k=F$b.create();F$k.caller=F$y,F$k.method=F$j,F$k.args=F$t,this._indexHandler(F$k),this._laters.push(F$k)}},F$j.runCallLater=function(F$y,F$j){var F$t=this._getHandler(F$y,F$j);F$t&&null!=F$t.method&&(this._isIgnoreRecover(F$t)||(delete this._map[F$t.key],F$t.run(!0)))},F$j.runTimer=function(F$y,F$j){this.runCallLater(F$y,F$j)},F$W(0,F$j,"delta",function(){return this._delta}),F$y.__init$=function(){F$b=function(){function F$j(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}F$D(F$j,"");var F$y=F$j.prototype;return F$y.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},F$y.recover=function(){this.clear(),this.args=F$j._freeHandler,F$j._freeHandler=this,F$j._freeCount++},F$y.run=function(F$y){var F$j=this.caller;if(F$j&&F$j.destroyed)return this.clear();var F$t=this.method,F$k=this.args;F$y&&this.clear(),null!=F$t&&(F$k?F$t.apply(F$j,F$k):F$t.call(F$j))},F$j._freeHandler=null,F$j._freeCount=0,F$j.create=function(){var F$y=F$j._freeHandler;return F$y?(F$j._freeHandler=F$y.args,--F$j._freeCount,F$y.args=null,F$y):new F$j},F$j}()},F$y}()),F$L=function(){function F$l(){this.gid=0}F$D(F$l,"laya.utils.Tween");var F$y=F$l.prototype;return F$y.to=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){return void 0===F$Y&&(F$Y=0),void 0===F$A&&(F$A=!1),this._create(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,!0,!1,!0)},F$y.from=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){return void 0===F$Y&&(F$Y=0),void 0===F$A&&(F$A=!1),this._create(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,!1,!1,!0)},F$y._create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){if(!F$y)throw new Error("Tween:target is null");this._target=F$y,this._duration=F$t,this._ease=F$k||F$j.ease||F$l.easeNone,this._complete=F$T||F$j.complete,this._delay=F$Y,this._props=[],this._usedTimer=0,this._startTimer=F$G.now(),this._usedPool=F$I,this._delayParam=null,this.update=F$j.update;var F$D=F$y.$_GID||(F$y.$_GID=F$o.getGID());return F$l.tweenMap[F$D]?(F$A&&F$l.clearTween(F$y),F$l.tweenMap[F$D].push(this)):F$l.tweenMap[F$D]=[this],F$b?F$Y<=0?this.firstStart(F$y,F$j,F$X):(this._delayParam=[F$y,F$j,F$X],F$N.scaleTimer.once(F$Y,this,this.firstStart,this._delayParam)):this._initProps(F$y,F$j,F$X),this},F$y.firstStart=function(F$y,F$j,F$t){this._delayParam=null,F$y.destroyed?this.clear():(this._initProps(F$y,F$j,F$t),this._beginLoop())},F$y._initProps=function(F$y,F$j,F$t){for(var F$k in F$j)if("number"==typeof F$y[F$k]){var F$T=F$t?F$y[F$k]:F$j[F$k],F$Y=F$t?F$j[F$k]:F$y[F$k];this._props.push([F$k,F$T,F$Y-F$T]),F$t||(F$y[F$k]=F$T)}},F$y._beginLoop=function(){F$N.scaleTimer.frameLoop(1,this,this._doEase)},F$y._doEase=function(){this._updateEase(F$G.now())},F$y._updateEase=function(F$y){var F$j=this._target;if(F$j){if(F$j.destroyed)return F$l.clearTween(F$j);var F$t=this._usedTimer=F$y-this._startTimer-this._delay;if(!(F$t<0)){if(F$t>=this._duration)return this.complete();for(var F$k=0<F$t?this._ease(F$t,0,1,this._duration):0,F$T=this._props,F$Y=0,F$A=F$T.length;F$Y<F$A;F$Y++){var F$X=F$T[F$Y];F$j[F$X[0]]=F$X[1]+F$k*F$X[2]}this.update&&this.update.run()}}},F$y.complete=function(){if(this._target){F$N.scaleTimer.runTimer(this,this.firstStart);for(var F$y=this._target,F$j=this._props,F$t=this._complete,F$k=0,F$T=F$j.length;F$k<F$T;F$k++){var F$Y=F$j[F$k];F$y[F$Y[0]]=F$Y[1]+F$Y[2]}this.update&&this.update.run(),this.clear(),F$t&&F$t.run()}},F$y.pause=function(){F$N.scaleTimer.clear(this,this._beginLoop),F$N.scaleTimer.clear(this,this._doEase),F$N.scaleTimer.clear(this,this.firstStart);var F$y;(F$y=F$G.now()-this._startTimer-this._delay)<0&&(this._usedTimer=F$y)},F$y.setStartTime=function(F$y){this._startTimer=F$y},F$y.clear=function(){this._target&&(this._remove(),this._clear())},F$y._clear=function(){this.pause(),F$N.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,F$R.recover("tween",this))},F$y.recover=function(){this._usedPool=!0,this._clear()},F$y._remove=function(){var F$y=F$l.tweenMap[this._target.$_GID];if(F$y)for(var F$j=0,F$t=F$y.length;F$j<F$t;F$j++)if(F$y[F$j]===this){F$y.splice(F$j,1);break}},F$y.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=F$G.now(),this._delayParam)F$N.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var F$y=this._props,F$j=0,F$t=F$y.length;F$j<F$t;F$j++){var F$k=F$y[F$j];this._target[F$k[0]]=F$k[1]}F$N.scaleTimer.once(this._delay,this,this._beginLoop)}},F$y.resume=function(){this._usedTimer>=this._duration||(this._startTimer=F$G.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?F$N.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},F$W(0,F$y,"progress",null,function(F$y){var F$j=F$y*this._duration;this._startTimer=F$G.now()-this._delay-F$j}),F$l.to=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){return void 0===F$Y&&(F$Y=0),void 0===F$A&&(F$A=!1),void 0===F$X&&(F$X=!0),F$R.getItemByClass("tween",F$l)._create(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,!0,F$X,!0)},F$l.from=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){return void 0===F$Y&&(F$Y=0),void 0===F$A&&(F$A=!1),void 0===F$X&&(F$X=!0),F$R.getItemByClass("tween",F$l)._create(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,!1,F$X,!0)},F$l.clearAll=function(F$y){if(F$y&&F$y.$_GID){var F$j=F$l.tweenMap[F$y.$_GID];if(F$j){for(var F$t=0,F$k=F$j.length;F$t<F$k;F$t++)F$j[F$t]._clear();F$j.length=0}}},F$l.clear=function(F$y){F$y.clear()},F$l.clearTween=function(F$y){F$l.clearAll(F$y)},F$l.easeNone=function(F$y,F$j,F$t,F$k){return F$t*F$y/F$k+F$j},F$l.tweenMap={},F$l}(),F$o=function(){function F$X(){}return F$D(F$X,"laya.utils.Utils"),F$X.toRadian=function(F$y){return F$y*F$X._pi2},F$X.toAngle=function(F$y){return F$y*F$X._pi},F$X.toHexColor=function(F$y){if(F$y<0||isNaN(F$y))return null;for(var F$j=F$y.toString(16);F$j.length<6;)F$j="0"+F$j;return"#"+F$j},F$X.getGID=function(){return F$X._gid++},F$X.concatArray=function(F$y,F$j){if(!F$j)return F$y;if(!F$y)return F$j;var F$t=0,F$k=F$j.length;for(F$t=0;F$t<F$k;F$t++)F$y.push(F$j[F$t]);return F$y},F$X.clearArray=function(F$y){return F$y&&(F$y.length=0),F$y},F$X.copyArray=function(F$y,F$j){if(F$y||(F$y=[]),!F$j)return F$y;F$y.length=F$j.length;var F$t=0,F$k=F$j.length;for(F$t=0;F$t<F$k;F$t++)F$y[F$t]=F$j[F$t];return F$y},F$X.getGlobalRecByPoints=function(F$y,F$j,F$t,F$k,F$T){var F$Y,F$A;return F$Y=new F$P(F$j,F$t),F$Y=F$y.localToGlobal(F$Y),F$A=new F$P(F$k,F$T),F$A=F$y.localToGlobal(F$A),F$d._getWrapRec([F$Y.x,F$Y.y,F$A.x,F$A.y])},F$X.getGlobalPosAndScale=function(F$y){return F$X.getGlobalRecByPoints(F$y,0,0,1,1)},F$X.bind=function(F$y,F$j){return F$y.bind(F$j)},F$X.measureText=function(F$y,F$j){return F$m.measureText(F$y,F$j)},F$X.contextMeasureText=function(F$y){var F$j=F$G.context.measureText(F$y);return F$j||(F$j={width:16,height:16}),F$j},F$X.updateOrder=function(F$y){if(!F$y||F$y.length<2)return!1;for(var F$j,F$t=1,F$k=0,F$T=F$y.length,F$Y=NaN;F$t<F$T;){for(F$j=F$y[F$k=F$t],F$Y=F$y[F$k]._zOrder;-1<--F$k&&F$y[F$k]._zOrder>F$Y;)F$y[F$k+1]=F$y[F$k];F$y[F$k+1]=F$j,F$t++}var F$A=F$j.parent.conchModel;if(F$A)if(null!=F$A.updateZOrder)F$A.updateZOrder();else{for(F$t=0;F$t<F$T;F$t++)F$A.removeChild(F$y[F$t].conchModel);for(F$t=0;F$t<F$T;F$t++)F$A.addChildAt(F$y[F$t].conchModel,F$t)}return!0},F$X.transPointList=function(F$y,F$j,F$t){var F$k=0,F$T=F$y.length;for(F$k=0;F$k<F$T;F$k+=2)F$y[F$k]+=F$j,F$y[F$k+1]+=F$t},F$X.parseInt=function(F$y,F$j){void 0===F$j&&(F$j=0);var F$t=F$G.window.parseInt(F$y,F$j);return isNaN(F$t)?0:F$t},F$X.getFileExtension=function(F$y){F$X._extReg.lastIndex=F$y.lastIndexOf(".");var F$j=F$X._extReg.exec(F$y);return F$j&&1<F$j.length?F$j[1].toLowerCase():null},F$X.getTransformRelativeToWindow=function(F$y,F$j,F$t){var F$k=F$N.stage,F$T=laya.utils.Utils.getGlobalPosAndScale(F$y),F$Y=F$k._canvasTransform.clone(),F$A=F$Y.tx,F$X=F$Y.ty;F$Y.rotate(-Math.PI/180*F$N.stage.canvasDegree),F$Y.scale(F$N.stage.clientScaleX,F$N.stage.clientScaleY);var F$I=F$N.stage.canvasDegree%180!=0,F$b=NaN,F$D=NaN;F$I?(F$b=F$t+F$T.y,F$D=F$j+F$T.x,F$b*=F$Y.d,F$D*=F$Y.a,90==F$N.stage.canvasDegree?(F$b=F$A-F$b,F$D+=F$X):(F$b+=F$A,F$D=F$X-F$D)):(F$b=F$j+F$T.x,F$D=F$t+F$T.y,F$b*=F$Y.a,F$D*=F$Y.d,F$b+=F$A,F$D+=F$X);var F$l=NaN,F$r=NaN;return F$r=F$I?(F$l=F$Y.d*F$T.height,F$Y.a*F$T.width):(F$l=F$Y.a*F$T.width,F$Y.d*F$T.height),{x:F$b,y:F$D,scaleX:F$l,scaleY:F$r}},F$X.fitDOMElementInArea=function(F$y,F$j,F$t,F$k,F$T,F$Y){F$y._fitLayaAirInitialized||(F$y._fitLayaAirInitialized=!0,F$y.style.transformOrigin=F$y.style.webKittransformOrigin="left top",F$y.style.position="absolute");var F$A=F$X.getTransformRelativeToWindow(F$j,F$t,F$k);F$y.style.transform=F$y.style.webkitTransform="scale("+F$A.scaleX+","+F$A.scaleY+") rotate("+F$N.stage.canvasDegree+"deg)",F$y.style.width=F$T+"px",F$y.style.height=F$Y+"px",F$y.style.left=F$A.x+"px",F$y.style.top=F$A.y+"px"},F$X.isOkTextureList=function(F$y){if(!F$y)return!1;var F$j,F$t=0,F$k=F$y.length;for(F$t=0;F$t<F$k;F$t++)if(!(F$j=F$y[F$t])||!F$j.source)return!1;return!0},F$X.isOKCmdList=function(F$y){if(!F$y)return!1;var F$j,F$t,F$k=0,F$T=F$y.length,F$Y=F$S._context;for(F$k=0;F$k<F$T;F$k++)switch((F$j=F$y[F$k]).callee){case F$Y._drawTexture:case F$Y._fillTexture:case F$Y._drawTextureWithTransform:if(!(F$t=F$j[0])||!F$t.source)return!1}return!0},F$X._gid=1,F$X._pi=180/Math.PI,F$X._pi2=Math.PI/180,F$X._extReg=/\.(\w+)\??/g,F$X.parseXMLFromString=function(F$y){var F$j;if(F$y=F$y.replace(/>\s+</g,"><"),-1<(F$j=(new DOMParser).parseFromString(F$y,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(F$j.firstChild.firstChild.textContent);return F$j},F$X}(),F$i=function(){function F$y(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],F$S.isWebGL&&F$a.regCacheByFunction(F$o.bind(this.startDispose,this),F$o.bind(this.getCacheList,this))}F$D(F$y,"laya.utils.VectorGraphManager");var F$j=F$y.prototype;return F$j.getId=function(){return this._id++},F$j.addShape=function(F$y,F$j){this.shapeDic[F$y]=F$j,this.useDic[F$y]||(this.useDic[F$y]=!0)},F$j.addLine=function(F$y,F$j){this.shapeLineDic[F$y]=F$j,this.shapeLineDic[F$y]||(this.shapeLineDic[F$y]=!0)},F$j.getShape=function(F$y){this._checkKey&&null!=this.useDic[F$y]&&(this.useDic[F$y]=!0)},F$j.deleteShape=function(F$y){this.shapeDic[F$y]&&(this.shapeDic[F$y]=null,delete this.shapeDic[F$y]),this.shapeLineDic[F$y]&&(this.shapeLineDic[F$y]=null,delete this.shapeLineDic[F$y]),null!=this.useDic[F$y]&&delete this.useDic[F$y]},F$j.getCacheList=function(){var F$y,F$j=[];for(F$y in this.shapeDic)F$j.push(this.shapeDic[F$y]);for(F$y in this.shapeLineDic)F$j.push(this.shapeLineDic[F$y]);return F$j},F$j.startDispose=function(F$y){var F$j;for(F$j in this.useDic)this.useDic[F$j]=!1;this._checkKey=!0},F$j.endDispose=function(){if(this._checkKey){var F$y;for(F$y in this.useDic)this.useDic[F$y]||this.deleteShape(F$y);this._checkKey=!1}},F$y.getInstance=function(){return F$y.instance=F$y.instance||new F$y},F$y.instance=null,F$y}(),F$E=function(){function F$k(){this._obj=null,this._obj=F$k.supportWeakMap?new F$G.window.WeakMap:{},F$k.supportWeakMap||F$k._maps.push(this)}F$D(F$k,"laya.utils.WeakObject");var F$y=F$k.prototype;return F$y.set=function(F$y,F$j){if(null!=F$y)if(F$k.supportWeakMap){var F$t=F$y;"string"!=typeof F$y&&"number"!=typeof F$y||(F$t=F$k._keys[F$y])||(F$t=F$k._keys[F$y]={k:F$y}),this._obj.set(F$t,F$j)}else"string"==typeof F$y||"number"==typeof F$y?this._obj[F$y]=F$j:(F$y.$_GID||(F$y.$_GID=F$o.getGID()),this._obj[F$y.$_GID]=F$j)},F$y.get=function(F$y){if(null==F$y)return null;if(F$k.supportWeakMap){var F$j="string"==typeof F$y||"number"==typeof F$y?F$k._keys[F$y]:F$y;return F$j?this._obj.get(F$j):null}return"string"==typeof F$y||"number"==typeof F$y?this._obj[F$y]:this._obj[F$y.$_GID]},F$y.del=function(F$y){if(null!=F$y)if(F$k.supportWeakMap){var F$j="string"==typeof F$y||"number"==typeof F$y?F$k._keys[F$y]:F$y;if(!F$j)return;this._obj.delete(F$j)}else"string"==typeof F$y||"number"==typeof F$y?delete this._obj[F$y]:delete this._obj[this._obj.$_GID]},F$y.has=function(F$y){if(null==F$y)return!1;if(F$k.supportWeakMap){var F$j="string"==typeof F$y||"number"==typeof F$y?F$k._keys[F$y]:F$y;return this._obj.has(F$j)}return"string"==typeof F$y||"number"==typeof F$y?null!=this._obj[F$y]:null!=this._obj[this._obj.$_GID]},F$k.__init__=function(){(F$k.supportWeakMap=null!=F$G.window.WeakMap)||F$N.timer.loop(F$k.delInterval,null,F$k.clearCache)},F$k.clearCache=function(){for(var F$y=0,F$j=F$k._maps.length;F$y<F$j;F$y++){F$k._maps[F$y]._obj={}}},F$k.supportWeakMap=!1,F$k.delInterval=3e5,F$k._keys={},F$k._maps=[],F$I(F$k,["I",function(){return this.I=new F$k}]),F$k}(),F$u=function(){function F$y(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}F$D(F$y,"laya.utils.WordText");var F$j=F$y.prototype;return F$j.setText=function(F$y){this.changed=!0,this._text=F$y},F$j.toString=function(){return this._text},F$j.charCodeAt=function(F$y){return this._text?this._text.charCodeAt(F$y):NaN},F$j.charAt=function(F$y){return this._text?this._text.charAt(F$y):null},F$W(0,F$j,"length",function(){return this._text?this._text.length:0}),F$y}(),F$yy=function(F$y){function F$A(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,F$A.__super.call(this),this._childs=F$A.ARRAY_EMPTY,this._$P=F$A.PROP_EMPTY,this.timer=F$N.scaleTimer,this.conchModel=F$S.isConchNode?this.createConchModel():null}F$D(F$A,"laya.display.Node",F$b);var F$j=F$A.prototype;return F$j._setBit=function(F$y,F$j){1==F$y&&(this._getBit(F$y)!=F$j&&this._updateDisplayedInstage());F$j?this._bits|=F$y:this._bits&=~F$y},F$j._getBit=function(F$y){return 0!=(this._bits&F$y)},F$j._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},F$j._setUpNoticeType=function(F$y){var F$j=this;for(F$j._setBit(F$y,!0),F$j=F$j.parent;F$j;){if(F$j._getBit(F$y))return;F$j._setBit(F$y,!0),F$j=F$j.parent}},F$j.on=function(F$y,F$j,F$t,F$k){return"display"!==F$y&&"undisplay"!==F$y||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$y,F$j,F$t,F$k,!1)},F$j.once=function(F$y,F$j,F$t,F$k){return"display"!==F$y&&"undisplay"!==F$y||this._getBit(1)||this._setUpNoticeType(1),this._createListener(F$y,F$j,F$t,F$k,!0)},F$j.createConchModel=function(){return null},F$j.destroy=function(F$y){void 0===F$y&&(F$y=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(F$y?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},F$j.destroyChildren=function(){if(this._childs)for(var F$y=this._childs.length-1;-1<F$y;F$y--)this._childs[F$y].destroy(!0)},F$j.addChild=function(F$y){if(!F$y||this.destroyed||F$y===this)return F$y;if(F$y.zOrder&&this._set$P("hasZorder",!0),F$y._parent===this){var F$j=this.getChildIndex(F$y);F$j!==this._childs.length-1&&(this._childs.splice(F$j,1),this._childs.push(F$y),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$y.conchModel,this._childs.length-1)),this._childChanged())}else F$y.parent&&F$y.parent.removeChild(F$y),this._childs===F$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$y),this.conchModel&&this.conchModel.addChildAt(F$y.conchModel,this._childs.length-1),(F$y.parent=this)._childChanged();return F$y},F$j.addChildren=function(F$y){for(var F$j=arguments,F$t=0,F$k=F$j.length;F$t<F$k;)this.addChild(F$j[F$t++])},F$j.addChildAt=function(F$y,F$j){if(!F$y||this.destroyed||F$y===this)return F$y;if(F$y.zOrder&&this._set$P("hasZorder",!0),0<=F$j&&F$j<=this._childs.length){if(F$y._parent===this){var F$t=this.getChildIndex(F$y);this._childs.splice(F$t,1),this._childs.splice(F$j,0,F$y),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$y.conchModel,F$j)),this._childChanged()}else F$y.parent&&F$y.parent.removeChild(F$y),this._childs===F$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$j,0,F$y),this.conchModel&&this.conchModel.addChildAt(F$y.conchModel,F$j),F$y.parent=this;return F$y}throw new Error("appendChildAt:The index is out of bounds")},F$j.getChildIndex=function(F$y){return this._childs.indexOf(F$y)},F$j.getChildByName=function(F$y){var F$j=this._childs;if(F$j)for(var F$t=0,F$k=F$j.length;F$t<F$k;F$t++){var F$T=F$j[F$t];if(F$T.name===F$y)return F$T}return null},F$j._get$P=function(F$y){return this._$P[F$y]},F$j._set$P=function(F$y,F$j){return this.destroyed||(this._$P===F$A.PROP_EMPTY&&(this._$P={}),this._$P[F$y]=F$j),F$j},F$j.getChildAt=function(F$y){return this._childs[F$y]},F$j.setChildIndex=function(F$y,F$j){var F$t=this._childs;if(F$j<0||F$j>=F$t.length)throw new Error("setChildIndex:The index is out of bounds.");var F$k=this.getChildIndex(F$y);if(F$k<0)throw new Error("setChildIndex:node is must child of this object.");return F$t.splice(F$k,1),F$t.splice(F$j,0,F$y),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$y.conchModel,F$j)),this._childChanged(),F$y},F$j._childChanged=function(F$y){},F$j.removeChild=function(F$y){if(!this._childs)return F$y;var F$j=this._childs.indexOf(F$y);return this.removeChildAt(F$j)},F$j.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},F$j.removeChildByName=function(F$y){var F$j=this.getChildByName(F$y);return F$j&&this.removeChild(F$j),F$j},F$j.removeChildAt=function(F$y){var F$j=this.getChildAt(F$y);if(F$j){for(var F$t=this._childs.length-1,F$k=F$y;F$k<F$t;++F$k)this._childs[F$k]=this._childs[F$k+1];this._childs.length=F$t,this.conchModel&&this.conchModel.removeChild(F$j.conchModel),F$j.parent=null}return F$j},F$j.removeChildren=function(F$y,F$j){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=2147483647),this._childs&&0<this._childs.length){var F$t=this._childs;if(0===F$y&&F$Y<=F$j){var F$k=F$t;this._childs=F$A.ARRAY_EMPTY}else F$k=F$t.splice(F$y,F$j-F$y);for(var F$T=0,F$Y=F$k.length;F$T<F$Y;F$T++)F$k[F$T].parent=null,this.conchModel&&this.conchModel.removeChild(F$k[F$T].conchModel)}return this},F$j.replaceChild=function(F$y,F$j){var F$t=this._childs.indexOf(F$j);return-1<F$t?(this._childs.splice(F$t,1,F$y),this.conchModel&&(this.conchModel.removeChild(F$j.conchModel),this.conchModel.addChildAt(F$y.conchModel,F$t)),F$j.parent=null,F$y.parent=this,F$y):null},F$j._updateDisplayedInstage=function(){var F$y;F$y=this;var F$j=F$N.stage;for(this._displayedInStage=!1;F$y;){if(F$y._getBit(1)){this._displayedInStage=F$y._displayedInStage;break}if(F$y==F$j||F$y._displayedInStage){this._displayedInStage=!0;break}F$y=F$y.parent}},F$j._setDisplay=function(F$y){this._displayedInStage!==F$y&&((this._displayedInStage=F$y)?this.event("display"):this.event("undisplay"))},F$j._displayChild=function(F$y,F$j){var F$t=F$y._childs;if(F$t)for(var F$k=0;F$k<F$t.length;F$k++){var F$T=F$t[F$k];F$T&&F$T._getBit(1)&&(0<F$T._childs.length?this._displayChild(F$T,F$j):F$T._setDisplay(F$j))}F$y._setDisplay(F$j)},F$j.contains=function(F$y){if(F$y===this)return!0;for(;F$y;){if(F$y.parent===this)return!0;F$y=F$y.parent}return!1},F$j.timerLoop=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$T&&(F$T=!0),void 0===F$Y&&(F$Y=!1),this.timer.loop(F$y,F$j,F$t,F$k,F$T,F$Y)},F$j.timerOnce=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=!0),this.timer._create(!1,!1,F$y,F$j,F$t,F$k,F$T)},F$j.frameLoop=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=!0),this.timer._create(!0,!0,F$y,F$j,F$t,F$k,F$T)},F$j.frameOnce=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=!0),this.timer._create(!0,!1,F$y,F$j,F$t,F$k,F$T)},F$j.clearTimer=function(F$y,F$j){this.timer.clear(F$y,F$j)},F$W(0,F$j,"numChildren",function(){return this._childs.length}),F$W(0,F$j,"destroyed",function(){return this._destroyed}),F$W(0,F$j,"parent",function(){return this._parent},function(F$y){this._parent!==F$y&&(F$y?(this._parent=F$y,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),F$y.displayedInStage&&this._displayChild(this,!0)),F$y._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=F$y))}),F$W(0,F$j,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),F$A.ARRAY_EMPTY=[],F$A.PROP_EMPTY={},F$A.NOTICE_DISPLAY=1,F$A.MOUSEENABLE=2,F$A}(),F$jy=function(F$y){function F$r(F$y){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,F$r.__super.call(this),this._padding=F$r._PADDING,this._spacing=F$r._SPACING,this._aligns=F$r._ALIGNS,this._font=F$$.EMPTY,this._ower=F$y}F$D(F$r,"laya.display.css.CSSStyle",F$y);var F$j=F$r.prototype;return F$j.destroy=function(){this._ower=null,this._font=null,this._rect=null},F$j.inherit=function(F$y){this._font=F$y._font,this._spacing=F$y._spacing===F$r._SPACING?F$r._SPACING:F$y._spacing.slice(),this.lineHeight=F$y.lineHeight},F$j._widthAuto=function(){return 0!=(262144&this._type)},F$j.widthed=function(F$y){return 0!=(8&this._type)},F$j._calculation=function(F$y,F$j){if(F$j.indexOf("%")<0)return!1;var F$k=this._ower,F$T=F$k.parent,F$Y=this._rect;function F$A(F$y,F$j,F$t){return F$y*F$t[0]+F$j*F$t[1]+F$t[2]}function F$t(F$y){var F$j=F$T.width,F$t=F$k.width;F$Y.width&&(F$k.width=F$A(F$j,F$t,F$Y.width)),F$Y.height&&(F$k.height=F$A(F$j,F$t,F$Y.height)),F$Y.left&&(F$k.x=F$A(F$j,F$t,F$Y.left)),F$Y.top&&(F$k.y=F$A(F$j,F$t,F$Y.top))}null===F$Y&&(F$T._getCSSStyle()._type|=524288,F$T.on("resize",this,F$t),this._rect=F$Y={input:{}});var F$X=F$j.split(" ");return F$X[0]=parseFloat(F$X[0])/100,1==F$X.length?F$X[1]=F$X[2]=0:(F$X[1]=parseFloat(F$X[1])/100,F$X[2]=parseFloat(F$X[2])),F$Y[F$y]=F$X,F$Y.input[F$y]=F$j,F$t(),!0},F$j.heighted=function(F$y){return 0!=(8192&this._type)},F$j.size=function(F$y,F$j){var F$t=this._ower,F$k=!1;-1!==F$y&&F$y!=this._ower.width&&(this._type|=8,this._ower.width=F$y,F$k=!0),-1!==F$j&&F$j!=this._ower.height&&(this._type|=8192,this._ower.height=F$j,F$k=!0),F$k&&(F$t._layoutLater(),524288&this._type&&F$t.event("resize",this))},F$j._getAlign=function(){return this._aligns[0]},F$j._getValign=function(){return this._aligns[1]},F$j._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},F$j._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new F$$(this._font))},F$j.render=function(F$y,F$j,F$t,F$k){var F$T=F$y.width,F$Y=F$y.height;F$t-=F$y.pivotX,F$k-=F$y.pivotY,this._bgground&&null!=this._bgground.color&&F$j.ctx.fillRect(F$t,F$k,F$T,F$Y,this._bgground.color),this._border&&this._border.color&&F$j.drawRect(F$t,F$k,F$T,F$Y,this._border.color.strColor,this._border.size)},F$j.getCSSStyle=function(){return this},F$j.cssText=function(F$y){this.attrs(F$r.parseOneCSS(F$y,";"))},F$j.attrs=function(F$y){if(F$y)for(var F$j=0,F$t=F$y.length;F$j<F$t;F$j++){var F$k=F$y[F$j];this[F$k[0]]=F$k[1]}},F$j.setTransform=function(F$y){"none"===F$y?this._tf=F$X._TF_EMPTY:this.attrs(F$r.parseOneCSS(F$y,","))},F$j.translate=function(F$y,F$j){this._tf===F$X._TF_EMPTY&&(this._tf=new F$T),this._tf.translateX=F$y,this._tf.translateY=F$j},F$j.scale=function(F$y,F$j){this._tf===F$X._TF_EMPTY&&(this._tf=new F$T),this._tf.scaleX=F$y,this._tf.scaleY=F$j},F$j._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},F$W(0,F$j,"block",F$y.prototype._$get_block,function(F$y){F$y?this._type|=1:this._type&=-2}),F$W(0,F$j,"valign",function(){return F$r._valigndef[this._aligns[1]]},function(F$y){this._aligns===F$r._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=F$r._valigndef[F$y]}),F$W(0,F$j,"height",null,function(F$y){if(this._type|=8192,"string"==typeof F$y){if(this._calculation("height",F$y))return;F$y=parseInt(F$y)}this.size(-1,F$y)}),F$W(0,F$j,"width",null,function(F$y){if(this._type|=8,"string"==typeof F$y){var F$j=F$y.indexOf("auto");if(0<=F$j&&(this._type|=262144,F$y=F$y.substr(0,F$j)),this._calculation("width",F$y))return;F$y=parseInt(F$y)}this.size(F$y,-1)}),F$W(0,F$j,"fontWeight",function(){return this._font.weight},function(F$y){this._createFont().weight=F$y}),F$W(0,F$j,"left",null,function(F$y){var F$j=this._ower;if("string"==typeof F$y){if("center"===F$y?F$y="50% -50% 0":"right"===F$y&&(F$y="100% -100% 0"),this._calculation("left",F$y))return;F$y=parseInt(F$y)}F$j.x=F$y}),F$W(0,F$j,"_translate",null,function(F$y){this.translate(F$y[0],F$y[1])}),F$W(0,F$j,"absolute",function(){return 0!=(4&this._type)}),F$W(0,F$j,"top",null,function(F$y){var F$j=this._ower;if("string"==typeof F$y){if("middle"===F$y?F$y="50% -50% 0":"bottom"===F$y&&(F$y="100% -100% 0"),this._calculation("top",F$y))return;F$y=parseInt(F$y)}F$j.y=F$y}),F$W(0,F$j,"align",function(){return F$r._aligndef[this._aligns[0]]},function(F$y){this._aligns===F$r._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=F$r._aligndef[F$y]}),F$W(0,F$j,"bold",function(){return this._font.bold},function(F$y){this._createFont().bold=F$y}),F$W(0,F$j,"padding",function(){return this._padding},function(F$y){this._padding=F$y}),F$W(0,F$j,"leading",function(){return this._spacing[1]},function(F$y){"string"==typeof F$y&&(F$y=parseInt(F$y+"")),this._spacing===F$r._SPACING&&(this._spacing=[0,0]),this._spacing[1]=F$y}),F$W(0,F$j,"lineElement",function(){return 0!=(65536&this._type)},function(F$y){F$y?this._type|=65536:this._type&=-65537}),F$W(0,F$j,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(F$y){this.lineElement=!1,"right"===F$y?this._type|=32768:this._type&=-32769}),F$W(0,F$j,"textDecoration",function(){return this._font.decoration},function(F$y){this._createFont().decoration=F$y}),F$W(0,F$j,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(F$y){"nowrap"===F$y&&(this._type|=131072),"none"===F$y&&(this._type&=-131073)}),F$W(0,F$j,"background",null,function(F$y){F$y?(this._bgground||(this._bgground={}),this._bgground.color=F$y,this._ower.conchModel&&this._ower.conchModel.bgColor(F$y),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),F$W(0,F$j,"wordWrap",function(){return 0==(131072&this._type)},function(F$y){F$y?this._type&=-131073:this._type|=131072}),F$W(0,F$j,"color",function(){return this._font.color},function(F$y){this._createFont().color=F$y}),F$W(0,F$j,"password",function(){return this._font.password},function(F$y){this._createFont().password=F$y}),F$W(0,F$j,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(F$y){"none"===F$y?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=F$y),this._ower.conchModel&&this._ower.conchModel.bgColor(F$y),this._ower._renderType|=256}),F$W(0,F$j,"font",function(){return this._font.toString()},function(F$y){this._createFont().set(F$y)}),F$W(0,F$j,"weight",null,function(F$y){this._createFont().weight=F$y}),F$W(0,F$j,"letterSpacing",function(){return this._spacing[0]},function(F$y){"string"==typeof F$y&&(F$y=parseInt(F$y+"")),this._spacing===F$r._SPACING&&(this._spacing=[0,0]),this._spacing[0]=F$y}),F$W(0,F$j,"fontSize",function(){return this._font.size},function(F$y){this._createFont().size=F$y}),F$W(0,F$j,"italic",function(){return this._font.italic},function(F$y){this._createFont().italic=F$y}),F$W(0,F$j,"fontFamily",function(){return this._font.family},function(F$y){this._createFont().family=F$y}),F$W(0,F$j,"stroke",function(){return this._font.stroke[0]},function(F$y){this._createFont().stroke===F$$._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=F$y}),F$W(0,F$j,"strokeColor",function(){return this._font.stroke[1]},function(F$y){this._createFont().stroke===F$$._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=F$y}),F$W(0,F$j,"border",function(){return this._border?this._border.value:""},function(F$y){if("none"!=F$y){this._border||(this._border={});var F$j=(this._border.value=F$y).split(" ");if(this._border.color=F$h.create(F$j[F$j.length-1]),1==F$j.length)return this._border.size=1,void(this._border.type="solid");var F$t=0;0<F$j[0].indexOf("px")?(this._border.size=parseInt(F$j[0]),F$t++):this._border.size=1,this._border.type=F$j[F$t],this._ower._renderType|=256}else this._border=null}),F$W(0,F$j,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(F$y){F$y?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==F$y?null:F$h.create(F$y),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),F$W(0,F$j,"position",function(){return 4&this._type?"absolute":""},function(F$y){"absolute"==F$y?this._type|=4:this._type&=-5}),F$W(0,F$j,"display",null,function(F$y){switch(F$y){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),F$W(0,F$j,"paddingLeft",function(){return this.padding[3]}),F$W(0,F$j,"paddingTop",function(){return this.padding[0]}),F$W(0,F$j,"_scale",null,function(F$y){this._ower.scale(F$y[0],F$y[1])}),F$W(0,F$j,"_rotate",null,function(F$y){this._ower.rotation=F$y}),F$r.parseOneCSS=function(F$y,F$j){for(var F$t,F$k=[],F$T=F$y.split(F$j),F$Y=0,F$A=F$T.length;F$Y<F$A;F$Y++){var F$X=F$T[F$Y],F$I=F$X.indexOf(":"),F$b=F$X.substr(0,F$I).replace(/^\s+|\s+$/g,"");if(0!=F$b.length){var F$D=F$X.substr(F$I+1).replace(/^\s+|\s+$/g,""),F$l=[F$b,F$D];switch(F$b){case"italic":case"bold":F$l[1]="true"==F$D;break;case"line-height":F$l[0]="lineHeight",F$l[1]=parseInt(F$D);break;case"font-size":F$l[0]="fontSize",F$l[1]=parseInt(F$D);break;case"padding":1<(F$t=F$D.split(" ")).length||(F$t[1]=F$t[2]=F$t[3]=F$t[0]),F$l[1]=[parseInt(F$t[0]),parseInt(F$t[1]),parseInt(F$t[2]),parseInt(F$t[3])];break;case"rotate":F$l[0]="_rotate",F$l[1]=parseFloat(F$D);break;case"scale":F$t=F$D.split(" "),F$l[0]="_scale",F$l[1]=[parseFloat(F$t[0]),parseFloat(F$t[1])];break;case"translate":F$t=F$D.split(" "),F$l[0]="_translate",F$l[1]=[parseInt(F$t[0]),parseInt(F$t[1])];break;default:(F$l[0]=F$r._CSSTOVALUE[F$b])||(F$l[0]=F$b)}F$k.push(F$l)}}return F$k},F$r.parseCSS=function(F$y,F$j){for(var F$t;null!=(F$t=F$r._parseCSSRegExp.exec(F$y));)F$r.styleSheets[F$t[1]]=F$r.parseOneCSS(F$t[2],";")},F$r.EMPTY=new F$r(null),F$r._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},F$r._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),F$r._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},F$r._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},F$r.styleSheets={},F$r.ALIGN_CENTER=1,F$r.ALIGN_RIGHT=2,F$r.VALIGN_MIDDLE=1,F$r.VALIGN_BOTTOM=2,F$r._CSS_BLOCK=1,F$r._DISPLAY_NONE=2,F$r._ABSOLUTE=4,F$r._WIDTH_SET=8,F$r._PADDING=[0,0,0,0],F$r._RECT=[-1,-1,-1,-1],F$r._SPACING=[0,0],F$r._ALIGNS=[0,0,0],F$r.ADDLAYOUTED=512,F$r._NEWFONT=4096,F$r._HEIGHT_SET=8192,F$r._BACKGROUND_SET=16384,F$r._FLOAT_RIGHT=32768,F$r._LINE_ELEMENT=65536,F$r._NOWARP=131072,F$r._WIDTHAUTO=262144,F$r._LISTERRESZIE=524288,F$r}(F$X),F$ty=function(F$y){function F$A(){this.url=null,this.audio=null,this.loaded=!1,F$A.__super.call(this)}F$D(F$A,"laya.media.h5audio.AudioSound",F$b);var F$j=F$A.prototype;return F$j.dispose=function(){var F$y=F$A._audioCache[this.url];F$y&&(F$y.src="",delete F$A._audioCache[this.url])},F$j.load=function(F$y){var F$j;if(F$y=F$w.formatURL(F$y),(this.url=F$y)==F$Q._tMusic?(F$A._initMusicAudio(),(F$j=F$A._musicAudio).src!=F$y&&(F$A._audioCache[F$j.src]=null,F$j=null)):F$j=F$A._audioCache[F$y],F$j&&2<=F$j.readyState)this.event("complete");else{F$j||(F$j=F$y==F$Q._tMusic?(F$A._initMusicAudio(),F$A._musicAudio):F$G.createElement("audio"),(F$A._audioCache[F$y]=F$j).src=F$y),F$j.addEventListener("canplaythrough",F$k),F$j.addEventListener("error",F$T);var F$t=this;(this.audio=F$j).load?F$j.load():F$T()}function F$k(){F$Y(),F$t.loaded=!0,F$t.event("complete")}function F$T(){F$j.load=null,F$Y(),F$t.event("error")}function F$Y(){F$j.removeEventListener("canplaythrough",F$k),F$j.removeEventListener("error",F$T)}},F$j.play=function(F$y,F$j,F$t){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),!this.url)return null;var F$k,F$T;if(!(F$k=this.url==F$Q._tMusic?F$A._musicAudio:F$A._audioCache[this.url]))return null;F$T=F$R.getItem("audio:"+this.url),F$S.isConchApp?F$T||((F$T=F$G.createElement("audio")).src=this.url):this.url==F$Q._tMusic?(F$A._initMusicAudio(),(F$T=F$A._musicAudio).src=this.url):F$T=F$T||F$k.cloneNode(!0);var F$Y=new F$ry(F$T);return F$Y.url=this.url,F$Y.loops=F$j,F$Y.startTime=F$y,F$Y.startHandler=F$t,F$Y.play(!1),F$Q.addChannel(F$Y),F$Y},F$W(0,F$j,"duration",function(){var F$y;return(F$y=F$A._audioCache[this.url])?F$y.duration:0}),F$A._initMusicAudio=function(){F$A._musicAudio||(F$A._musicAudio||(F$A._musicAudio=F$G.createElement("audio")),F$S.isConchApp||F$G.document.addEventListener("mousedown",F$A._makeMusicOK))},F$A._makeMusicOK=function(){F$G.document.removeEventListener("mousedown",F$A._makeMusicOK),F$A._musicAudio.src?F$A._musicAudio.play():(F$A._musicAudio.src="",F$A._musicAudio.load())},F$A._audioCache={},F$A._musicAudio=null,F$A}(),F$ky=function(F$y){function F$j(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,F$j.__super.call(this)}F$D(F$j,"laya.media.SoundChannel",F$b);var F$t=F$j.prototype;return F$t.play=function(){},F$t.stop=function(){},F$t.pause=function(){},F$t.resume=function(){},F$t.__runComplete=function(F$y){F$y&&F$y.run()},F$W(0,F$t,"volume",function(){return 1},function(F$y){}),F$W(0,F$t,"position",function(){return 0}),F$W(0,F$t,"duration",function(){return 0}),F$j}(),F$Ty=function(F$y){function F$j(){F$j.__super.call(this)}F$D(F$j,"laya.media.Sound",F$b);var F$t=F$j.prototype;return F$t.load=function(F$y){},F$t.play=function(F$y,F$j,F$t){return void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),null},F$t.dispose=function(){},F$W(0,F$t,"duration",function(){return 0}),F$j}(),F$Yy=function(F$y){function F$T(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,F$T.__super.call(this)}F$D(F$T,"laya.media.webaudio.WebAudioSound",F$b);var F$j=F$T.prototype;return F$j.load=function(F$y){this.url=F$y,this.audioBuffer=F$T._dataCache[F$y],this.audioBuffer?this._loaded(this.audioBuffer):(F$T.e.on("loaded:"+F$y,this,this._loaded),F$T.e.on("err:"+F$y,this,this._err),F$T.__loadingSound[F$y]||(F$T.__loadingSound[F$y]=!0,F$N.loader.load(F$y,F$C.create(this,this.onloaded),null,F$Xy.BUFFER,4,!1,null,!0)))},F$j.onloaded=function(F$y){F$y||this._err(),this._disposed?this._removeLoadEvents():(this.data=F$y,F$T.buffs.push({buffer:this.data,url:this.url}),F$T.decode())},F$j._err=function(){if(this._removeLoadEvents(),F$T.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var F$y,F$j,F$t,F$k=0;for(F$y=(F$j=this.__toPlays).length,F$k=0;F$k<F$y;F$k++)(F$t=F$j[F$k])[3]&&!F$t[3].isStopped&&F$t[3].event("error");this.__toPlays.length=0}},F$j._loaded=function(F$y){this._removeLoadEvents(),this._disposed||(this.audioBuffer=F$y,this.loaded=!0,this.event("complete"))},F$j._removeLoadEvents=function(){F$T.e.off("loaded:"+this.url,this,this._loaded),F$T.e.off("err:"+this.url,this,this._err)},F$j.__playAfterLoaded=function(){if(this.__toPlays){var F$y,F$j,F$t,F$k=0;for(F$y=(F$j=this.__toPlays).length,F$k=0;F$k<F$y;F$k++)(F$t=F$j[F$k])[3]&&!F$t[3].isStopped&&this.play(F$t[0],F$t[1],F$t[2],F$t[3]);this.__toPlays.length=0}},F$j.play=function(F$y,F$j,F$t,F$k){return void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),F$k=F$k||new F$$y,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([F$y,F$j,F$t,F$k]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),F$k.url=this.url,F$k.loops=F$j,F$k.audioBuffer=this.audioBuffer,F$k.startTime=F$y,F$k.startHandler=F$t,F$k.play(!1),F$Q.addChannel(F$k),F$k},F$j.dispose=function(){this._disposed=!0,delete F$T._dataCache[this.url],delete F$T.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},F$W(0,F$j,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$T.decode=function(){if(!(F$T.buffs.length<=0||F$T.isDecoding))if(F$T.isDecoding=!0,(F$T.tInfo=F$T.buffs.shift())&&F$T.tInfo.buffer&&F$T.tInfo.buffer.byteLength)try{F$T.ctx.decodeAudioData(F$T.tInfo.buffer,F$T._done,F$T._fail)}catch(F$y){console.error("decodeAudioData error  byteLength:"+F$T.tInfo.buffer.byteLength+"  url:"+F$T.tInfo.url)}else F$T._fail()},F$T._done=function(F$y){F$T.e.event("loaded:"+F$T.tInfo.url,F$y),F$T._dataCache[F$T.tInfo.url]=F$y,F$T.isDecoding=!1,F$T.decode()},F$T._fail=function(){F$T.e.event("err:"+F$T.tInfo.url,null),F$T.isDecoding=!1,F$T.decode()},F$T._playEmptySound=function(){if(null!=F$T.ctx){if(F$T._emptySource&&(F$T._emptySource.stop(),F$T._emptySource.disconnect(0),!F$$y._tryCleanFailed))try{F$T._emptySource.buffer=null}catch(F$y){F$$y._tryCleanFailed=!0}var F$y=F$T.ctx.createBufferSource();F$y.buffer=F$T._miniBuffer,F$y.connect(F$T.ctx.destination),F$y.start(0,0,0),F$T._emptySource=F$y}},F$T._unlock=function(){F$T._unlocked||(F$T._playEmptySound(),"running"==F$T.ctx.state?(F$G.document.removeEventListener("mousedown",F$T._unlock,!0),F$G.document.removeEventListener("touchend",F$T._unlock,!0),F$G.document.removeEventListener("touchstart",F$T._unlock,!0),F$T._unlocked=!0):"suspended"==F$T.ctx.state&&F$Q._recoverWebAudio())},F$T.initWebAudio=function(){"running"!=F$T.ctx.state&&(F$T._unlock(),F$G.document.addEventListener("mousedown",F$T._unlock,!0),F$G.document.addEventListener("touchend",F$T._unlock,!0),F$G.document.addEventListener("touchstart",F$T._unlock,!0))},F$T._emptySource=null,F$T._dataCache={},F$T.buffs=[],F$T.isDecoding=!1,F$T._unlocked=!1,F$T.tInfo=null,F$T.__loadingSound={},F$I(F$T,["window",function(){return this.window=F$G.window},"webAudioEnabled",function(){return this.webAudioEnabled=F$T.window.AudioContext||F$T.window.webkitAudioContext||F$T.window.mozAudioContext},"ctx",function(){return this.ctx=F$T.webAudioEnabled?new(F$T.window.AudioContext||F$T.window.webkitAudioContext||F$T.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=F$T.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new F$b}]),F$T}(),F$Ay=function(F$y){function F$j(){this._responseType=null,this._data=null,F$j.__super.call(this),this._http=new F$G.window.XMLHttpRequest}F$D(F$j,"laya.net.HttpRequest",F$b);var F$t=F$j.prototype;return F$t.send=function(F$y,F$j,F$t,F$k,F$T){void 0===F$t&&(F$t="get"),void 0===F$k&&(F$k="text"),this._responseType=F$k,this._data=null;var F$Y=this,F$A=this._http;if(F$A.open(F$t,F$y,!0),F$T)for(var F$X=0;F$X<F$T.length;F$X++)F$A.setRequestHeader(F$T[F$X++],F$T[F$X]);else F$S.isConchApp||(F$j&&"string"!=typeof F$j?F$A.setRequestHeader("Content-Type","application/json"):F$A.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));F$A.responseType="arraybuffer"!==F$k?"text":"arraybuffer",F$A.onerror=function(F$y){F$Y._onError(F$y)},F$A.onabort=function(F$y){F$Y._onAbort(F$y)},F$A.onprogress=function(F$y){F$Y._onProgress(F$y)},F$A.onload=function(F$y){F$Y._onLoad(F$y)},F$A.send(F$j)},F$t._onProgress=function(F$y){F$y&&F$y.lengthComputable&&this.event("progress",F$y.loaded/F$y.total)},F$t._onAbort=function(F$y){this.error("Request was aborted by user")},F$t._onError=function(F$y){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},F$t._onLoad=function(F$y){var F$j=this._http,F$t=void 0!==F$j.status?F$j.status:200;200===F$t||204===F$t||0===F$t?this.complete():this.error("["+F$j.status+"]"+F$j.statusText+":"+F$j.responseURL)},F$t.error=function(F$y){this.clear(),this.event("error",F$y)},F$t.complete=function(){this.clear();var F$j=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=F$o.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(F$y){F$j=!1,this.error(F$y.message)}F$j&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},F$t.clear=function(){var F$y=this._http;F$y.onerror=F$y.onabort=F$y.onprogress=F$y.onload=null},F$W(0,F$t,"url",function(){return this._http.responseURL}),F$W(0,F$t,"http",function(){return this._http}),F$W(0,F$t,"data",function(){return this._data}),F$j}(),F$Xy=function(F$y){function F$p(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,F$p.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1,this._base64=!1}F$D(F$p,"laya.net.Loader",F$b);var F$j=F$p.prototype;return F$j.load=function(F$y,F$j,F$t,F$k,F$T){if(F$y&&""!=F$y||console.error("Loader 加载的url不合法 "+F$y),void 0===F$t&&(F$t=!0),void 0===F$T&&(F$T=!1),this._url=F$y,this._base64=!1,0===F$y.indexOf("data:image")?(this._base64=!0,this._type=F$j="image"):this._type=F$j||(F$j=this.getTypeFromUrl(F$y)),this._cache=F$t,this._data=null,!F$T&&F$p.loadedMap[F$y])return this._data=F$p.loadedMap[F$y],this.event("progress",1),void this.event("complete",this._data);if(F$k&&F$p.setGroup(F$y,F$k),null!=F$p.parserMap[F$j])return this._customParse=!0,void(F$p.parserMap[F$j]instanceof laya.utils.Handler?F$p.parserMap[F$j].runWith(this):F$p.parserMap[F$j].call(null,this));if("image"===F$j||"htmlimage"===F$j||"nativeimage"===F$j)return this._loadImage(F$y);if("ttf"===F$j)return this._loadTTF(F$y);switch(F$j){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:F$j}F$p.preLoadedMap[F$y]?this.onLoaded(F$p.preLoadedMap[F$y]):F$A.resMgrLoad(F$y,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},F$j.getTypeFromUrl=function(F$y){var F$j=F$o.getFileExtension(F$y);return F$j?F$p.typeMap[F$j]:(console.warn("Not recognize the resources suffix",F$y),"text")},F$j._loadTTF=function(F$y){F$y=F$w.formatURL(F$y);var F$j=new F$q;F$j.complete=F$C.create(this,this.onLoaded),F$j.load(F$y)},F$j._loadBase64Image=function(F$j){F$j=F$w.formatURL(F$j);var F$t,F$y=this;function F$k(){F$t.onload=null,F$t.onerror=null,delete F$p.imgCache[F$j]}function F$T(){F$k(),F$y.onLoaded(F$t)}function F$Y(){F$k(),F$y.event("error","Load image failed")}"nativeimage"===this._type?((F$t=new F$G.window.Image).crossOrigin="",F$t.onload=F$T,F$t.onerror=F$Y,F$t.src=F$j,F$p.imgCache[F$j]=F$t):new F$vy.create(F$j,{onload:F$T,onerror:F$Y,onCreate:function(F$y){F$t=F$y,F$p.imgCache[F$j]=F$y}})},F$j._loadImage=function(F$y){this._base64?this._loadBase64Image(F$y):F$A.imgMgrLoad(F$y,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},F$j._loadImageComplete=function(F$y,F$j,F$t){if(null!=F$t)if(F$t instanceof ArrayBuffer){var F$k=new DataView(F$t),F$T=new laya.webgl.resource.WebGLImage(new Uint8Array(F$t,8),F$y,0,!1,F$k.getUint32(0),F$k.getUint32(4));this.onLoaded(F$T)}else if(F$t instanceof F$Dy)F$p.imgMgrSet[F$y]=F$j,F$A.imgMgrLock(F$y,F$p.imgMgrSet[F$y]),this._url=F$y,this.complete(F$t);else{var F$Y=-1!=F$y.indexOf(".png",F$y.length-4)?6408:6407;F$T=new laya.webgl.resource.WebGLImage(F$t,F$y,F$Y,!1,F$t.width,F$t.height);this.onLoaded(F$T)}else this.event("error","Load image failed")},F$j.imageCancel=function(F$y,F$j,F$t){F$A.imgMgrCancel&&F$A.imgMgrCancel(F$y,this._onImageCallback)},F$j._loadSound=function(F$y){var F$j=new F$Q._soundClass,F$t=this;function F$k(){F$j.offAll()}F$j.on("complete",this,function(){F$k(),F$t.onLoaded(F$j)}),F$j.on("error",this,function(){F$k(),F$j.dispose(),F$t.event("error","Load sound failed")}),F$j.load(F$y)},F$j.onProgress=function(F$y){"atlas"===this._type?this.event("progress",.3*F$y):this.event("progress",F$y)},F$j.onError=function(F$y){this.event("error",F$y)},F$j._loadedComplete=function(F$y,F$j,F$t){if(null!=F$t)switch(this._type){case"atlas":case"plf":case"json":var F$k=new F$g(F$t);this.onLoaded(JSON.parse(F$k.readUTFBytes()));break;case"font":F$k=new F$g(F$t);this.onLoaded(F$o.parseXMLFromString(F$k.readUTFBytes()));break;default:this.onLoaded(F$t)}else this.event("error",F$y)},F$j.onLoaded=function(F$y){var F$j=this._type;if("plf"==F$j)this.parsePLFData(F$y),this.complete(F$y);else if("image"===F$j){var F$t=new F$Dy(F$y);F$t.url=this._url,this.complete(F$t)}else if("sound"===F$j||"htmlimage"===F$j||"nativeimage"===F$j)this.complete(F$y);else if("atlas"===F$j){if(!F$y.src&&!F$y._setContext){if(!this._data){if((this._data=F$y).meta&&F$y.meta.image)for(var F$k=F$y.meta.image.split(","),F$T=0<=this._url.indexOf("/")?"/":"\\",F$Y=this._url.lastIndexOf(F$T),F$A=0<=F$Y?this._url.substr(0,F$Y+1):"",F$X=0,F$I=F$k.length;F$X<F$I;F$X++)F$k[F$X]=F$A+F$k[F$X];else F$k=[this._url.replace(".json",".png")];F$k.reverse(),F$y.toLoads=F$k,F$y.pics=[]}return this.event("progress",.3+1/F$k.length*.6),this._loadImage(F$k.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(F$y),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var F$b=this._data.frames,F$D=this._url.split("?")[0],F$l=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:F$D.substring(0,F$D.lastIndexOf("."))+"/",F$r=this._data.pics,F$$=F$w.formatURL(this._url),F$W=F$p.atlasMap[F$$]||(F$p.atlasMap[F$$]=[]);F$W.dir=F$l;var F$z=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var F$V in F$z=parseFloat(this._data.meta.scale),F$b){var F$n,F$C=F$b[F$V],F$M=F$r[F$C.frame.idx?F$C.frame.idx:0],F$_=F$w.formatURL(F$l+F$V);F$M.scaleRate=F$z,F$n=F$Dy.create(F$M,F$C.frame.x,F$C.frame.y,F$C.frame.w,F$C.frame.h,F$C.spriteSourceSize.x,F$C.spriteSourceSize.y,F$C.sourceSize.w,F$C.sourceSize.h),F$p.cacheRes(F$_,F$n),F$p.keepCache(this._url,F$l+F$V),F$n.url=F$_,F$W.push(F$_)}else for(F$V in F$b)F$M=F$r[(F$C=F$b[F$V]).frame.idx?F$C.frame.idx:0],F$_=F$w.formatURL(F$l+F$V),F$p.cacheRes(F$_,F$Dy.create(F$M,F$C.frame.x,F$C.frame.y,F$C.frame.w,F$C.frame.h,F$C.spriteSourceSize.x,F$C.spriteSourceSize.y,F$C.sourceSize.w,F$C.sourceSize.h)),F$p.loadedMap[F$_].url=F$_,F$p.keepCache(this._url,F$l+F$V),F$W.push(F$_);delete this._data.pics,this.complete(this._data)}else if("font"==F$j){if(!F$y.src)return this._data=F$y,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var F$e=new F$f;F$e.parseFont(this._data,F$y);var F$v=this._url.split(".fnt")[0].split("/"),F$N=F$v[F$v.length-1];F$Vy.registerBitmapFont(F$N,F$e),this._data=F$e,this.complete(this._data)}else if("pkm"==F$j){var F$P=F$vy.create(F$y,this._url),F$d=new F$Dy(F$P);F$d.url=this._url,this.complete(F$d)}else this.complete(F$y)},F$j.parsePLFData=function(F$y){var F$j,F$t,F$k;for(F$j in F$y)switch(F$k=F$y[F$j],F$j){case"json":case"text":for(F$t in F$k)F$p.preLoadedMap[F$w.formatURL(F$t)]=F$k[F$t];break;default:for(F$t in F$k)F$p.preLoadedMap[F$w.formatURL(F$t)]=F$k[F$t]}},F$j.complete=function(F$y){this._data=F$y,this._customParse?this.event("loaded",F$y instanceof Array?[F$y]:F$y):(F$p._loaders.push(this),F$p._isWorking||F$p.checkNext())},F$j.endLoad=function(F$y){F$y&&(this._data=F$y),this._cache&&F$p.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},F$W(0,F$j,"url",function(){return this._url}),F$W(0,F$j,"data",function(){return this._data}),F$W(0,F$j,"cache",function(){return this._cache}),F$W(0,F$j,"type",function(){return this._type}),F$p.checkNext=function(){F$p._isWorking=!0;for(var F$y=F$G.now();F$p._startIndex<F$p._loaders.length;)if(F$G.now(),F$p._loaders[F$p._startIndex].endLoad(),F$p._startIndex++,F$G.now()-F$y>F$p.maxTimeOut)return console.warn("loader callback cost a long time:"+(F$G.now()-F$y)+" url="+F$p._loaders[F$p._startIndex-1].url),void F$N.timer.frameOnce(1,null,F$p.checkNext);F$p._loaders.length=0,F$p._startIndex=0,F$p._isWorking=!1},F$p.clearRes=function(F$y,F$j){if(null!=F$y){void 0===F$j&&(F$j=!1),F$y=F$w.formatURL(F$y);var F$t=F$p.getAtlas(F$y);if(F$t){for(var F$k=0,F$T=F$t.length;F$k<F$T;F$k++){var F$Y=F$t[F$k],F$A=F$p.getRes(F$Y);delete F$p.loadedMap[F$Y],F$p.clearCache(F$y.substring(F$w.basePath.length),F$Y.substring(F$w.basePath.length)),F$A&&F$A.destroy(F$j)}F$t.length=0,delete F$p.atlasMap[F$y],delete F$p.loadedMap[F$y]}else{var F$X=F$p.loadedMap[F$y];F$X&&(delete F$p.loadedMap[F$y],F$X instanceof laya.resource.Texture&&F$X.bitmap&&F$X.destroy(F$j))}}},F$p.clearTextureRes=function(F$y){F$y=F$w.formatURL(F$y);var F$j=laya.net.Loader.getAtlas(F$y),F$t=F$j&&0<F$j.length?laya.net.Loader.getRes(F$j[0]):laya.net.Loader.getRes(F$y);F$t&&F$t.bitmap&&(F$S.isConchApp&&!F$S.isConchWebGL?F$t.bitmap.source.releaseTexture&&F$t.bitmap.source.releaseTexture():null==F$t.bitmap._atlaser&&F$t.bitmap.releaseResource(!0))},F$p.getRes=function(F$y){return F$p.loadedMap[F$w.formatURL(F$y)]},F$p.getAtlas=function(F$y){return F$p.atlasMap[F$w.formatURL(F$y)]},F$p.cacheRes=function(F$y,F$j){F$y=F$w.formatURL(F$y),null!=F$p.loadedMap[F$y]?console.warn("Resources already exist,is repeated loading:",F$y):F$p.loadedMap[F$y]=F$j},F$p.setGroup=function(F$y,F$j){F$p.groupMap[F$j]||(F$p.groupMap[F$j]=[]),F$p.groupMap[F$j].push(F$y)},F$p.clearResByGroup=function(F$y){if(F$p.groupMap[F$y]){var F$j=F$p.groupMap[F$y],F$t=0,F$k=F$j.length;for(F$t=0;F$t<F$k;F$t++)F$p.clearRes(F$j[F$t]);F$j.length=0}},F$p.keepCache=function(F$y,F$j){if(F$y&&F$j){var F$t=F$p.cacheSet[F$j];F$t?-1==F$t.indexOf(F$y)&&F$t.push(F$y):F$p.cacheSet[F$j]=[F$y]}},F$p.clearCache=function(F$y,F$j){if(F$y&&F$j){var F$t=F$p.cacheSet[F$j];if(F$t){var F$k=F$t.indexOf(F$y);if(-1!==F$k){var F$T=F$t.length-1;0==F$T?(delete F$p.cacheSet[F$j],0<F$p.imgMgrSet[F$j]?F$A.imgMgrFree(F$j,F$p.imgMgrSet[F$j]):F$p.clearRes(F$j,!0)):(F$t[F$k]=F$t[F$T],F$t.length=F$T)}}}},F$p.saveObject=function(F$y,F$j,F$t){if(F$j&&F$y){var F$k=F$p.objectSet[F$y];F$k?(console.warn("Loader.saveObject: "+F$y),F$k[0]=F$j,F$k[1]=F$t):F$p.objectSet[F$y]=[F$j,F$t,[]]}},F$p.findObject=function(F$y){if(F$y){var F$j=F$p.objectSet[F$y];if(F$j)return F$j[0]}return null},F$p.keepObject=function(F$y,F$j){if(F$y&&F$j){var F$t=F$p.objectSet[F$j];F$t&&-1===F$t[2].indexOf(F$y)&&F$t[2].push(F$y)}},F$p.clearObject=function(F$y,F$j){if(F$y&&F$j){var F$t=F$p.objectSet[F$j];if(F$t){var F$k=F$t[2],F$T=F$k.indexOf(F$y);if(-1!==F$T){var F$Y=F$k.length-1;0==F$Y?(delete F$p.objectSet[F$j],F$t[1]&&F$t[1].call(null,F$t[0])):(F$k[F$T]=F$k[F$Y],F$k.length=F$Y)}}}},F$p.TEXT="text",F$p.JSON="json",F$p.XML="xml",F$p.BUFFER="arraybuffer",F$p.IMAGE="image",F$p.SOUND="sound",F$p.ATLAS="atlas",F$p.FONT="font",F$p.TTF="ttf",F$p.PLF="plf",F$p.PKM="pkm",F$p.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},F$p.parserMap={},F$p.groupMap={},F$p.maxTimeOut=100,F$p.loadedMap={},F$p.preLoadedMap={},F$p.atlasMap={},F$p._loaders=[],F$p._isWorking=!1,F$p._startIndex=0,F$p.imgCache={},F$p.cacheSet={},F$p.objectSet={},F$p.imgMgrSet={},F$p}(),F$Iy=function(F$y){var F$r;function F$$(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},F$$.__super.call(this);for(var F$y=0;F$y<this._maxPriority;F$y++)this._resInfos[F$y]=[]}F$D(F$$,"laya.net.LoaderManager",F$b);var F$j=F$$.prototype;return F$j.create=function(F$y,F$t,F$j,F$k,F$T,F$Y,F$A,F$X){if(null==F$Y&&(F$Y=2),null==F$A&&(F$A=!0),F$y instanceof Array){var F$I=F$y,F$b=F$I.length,F$D=0;if(F$j)var F$l=F$C.create(F$j.caller,F$j.method,F$j.args,!1);for(var F$r=0;F$r<F$b;F$r++){var F$$=F$I[F$r];"string"==typeof F$$&&(F$$=F$I[F$r]={url:F$$}),F$$.progress=0}for(F$r=0;F$r<F$b;F$r++){F$$=F$I[F$r];var F$W=F$j?F$C.create(null,F$n,[F$$],!1):null,F$z=F$j||F$t?F$C.create(null,F$V,[F$$]):null;this._create(F$$.url,F$z,F$W,F$$.clas||F$k,F$$.params||F$T,null!=F$$.priority&&0<=F$$.priority?F$$.priority:F$Y,F$A,F$$.group||F$X)}function F$V(F$y,F$j){F$D++,F$y.progress=1,F$D===F$b&&F$t&&F$t.run()}function F$n(F$y,F$j){F$y.progress=F$j;for(var F$t=0,F$k=0;F$k<F$b;F$k++){F$t+=F$I[F$k].progress}var F$T=F$t/F$b;F$l.runWith(F$T)}return!0}return this._create(F$y,F$t,F$j,F$k,F$T,F$Y,F$A,F$X)},F$j._create=function(F$j,F$t,F$y,F$k,F$T,F$Y,F$A,F$X){F$j&&""!=F$j||console.error("加载的url不合法 "+F$j),null==F$Y&&(F$Y=2),null==F$A&&(F$A=!0);var F$I=F$w.formatURL(F$j),F$b=this.getRes(F$I);if(F$b)!F$b.hasOwnProperty("loaded")||F$b.loaded?(F$y&&F$y.runWith(1),F$t&&F$t.run()):F$t&&F$N.loader._createListener(F$j,F$t.caller,F$t.method,F$t.args,!0,!1);else{var F$D=F$o.getFileExtension(F$j),F$l=F$$.createMap[F$D];if(!F$l)throw new Error("LoaderManager:unknown file("+F$j+") extension with: "+F$D+".");F$k||(F$k=F$l[0]);var F$r=F$l[1];if("atlas"==F$D)this.load(F$j,F$t,F$y,F$r,F$Y,F$A);else{F$k===F$Dy&&(F$r="htmlimage"),(F$b=F$k?new F$k:null).hasOwnProperty("_loaded")&&(F$b._loaded=!1),F$b._setUrl(F$j),F$X&&F$b._setGroup(F$X),this._createLoad(F$b,F$j,F$C.create(null,function(F$y){F$b&&!F$b.destroyed&&F$y&&F$b.onAsynLoaded.call(F$b,F$j,F$y,F$T),F$t&&F$t.run();F$N.loader.event(F$j)}),F$y,F$r,F$Y,!1,F$X,!0),F$A&&this.cacheRes(F$I,F$b)}}return F$b},F$j.load=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){F$y&&""!=F$y||console.error("加载的url不合法 "+F$y);var F$I=this;if(null==F$T&&(F$T=2),null==F$Y&&(F$Y=!0),void 0===F$X&&(F$X=!1),F$y instanceof Array)return this._loadAssets(F$y,F$j,F$t,F$k,F$T,F$Y,F$A);var F$b=F$Xy.getRes(F$y);if(null!=F$b)F$N.timer.frameOnce(1,null,function(){F$t&&F$t.runWith(1),F$j&&F$j.runWith(F$b),F$I._loaderCount||F$I.event("complete")});else{var F$D=F$$._resMap[F$y];F$D?(F$j&&F$D._createListener("complete",F$j.caller,F$j.method,F$j.args,!1,!1),F$t&&F$D._createListener("progress",F$t.caller,F$t.method,F$t.args,!1,!1)):((F$D=this._infoPool.length?this._infoPool.pop():new F$r).url=F$y,F$D.clas=null,F$D.type=F$k,F$D.cache=F$Y,F$D.group=F$A,F$D.ignoreCache=F$X,F$D.priority=F$T,F$j&&F$D.on("complete",F$j.caller,F$j.method,F$j.args),F$t&&F$D.on("progress",F$t.caller,F$t.method,F$t.args),F$$._resMap[F$y]=F$D,F$T=F$T<this._maxPriority?0<=F$T?F$T:0:this._maxPriority-1,this._resInfos[F$T].push(F$D),this._next())}return this},F$j.cancel=function(F$y,F$j,F$t){if(F$b=F$$._resMap[F$y]){F$j&&F$b.off("complete",F$j.caller,F$j.method,!1),F$t&&F$b.off("progress",F$t.caller,F$t.method,!1);var F$k=F$b.getListener("complete"),F$T=F$b.getListener("progress");if(!(F$k&&F$k.head||F$T&&F$T.head)){if(F$b.loader){var F$Y=F$b.loader;F$Y.imageCancel(F$y),F$Y.offAll(),F$Y._data=null,F$Y._customParse=!1,F$Y._url=null,F$Y._class=null,F$Y._type=null,this._loaders.push(F$Y),this._loaderCount--,delete this._loaderMap[F$b.url]}for(var F$A=0;F$A<this._maxPriority;F$A++)for(var F$X=this._resInfos[F$A],F$I=F$X.length-1;-1<F$I;F$I--){var F$b;(F$b=F$X[F$I])&&F$b.url===F$y&&(F$X[F$I]=null,F$b.destroy(),F$b.offAll(),this._infoPool.push(F$b))}delete F$$._resMap[F$y],this._next()}}},F$j._createLoad=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){var F$b=this;if(null==F$Y&&(F$Y=2),null==F$A&&(F$A=!0),void 0===F$I&&(F$I=!1),F$j instanceof Array)return this._loadAssets(F$j,F$t,F$k,F$T,F$Y,F$A,F$X);var F$D=F$Xy.getRes(F$j);if(null!=F$D)F$N.timer.frameOnce(1,null,function(){F$k&&F$k.runWith(1),F$t&&F$t.runWith(F$D),F$b._loaderCount||F$b.event("complete")});else{var F$l=F$$._resMap[F$j];F$l?(F$t&&F$l._createListener("complete",F$t.caller,F$t.method,F$t.args,!1,!1),F$k&&F$l._createListener("progress",F$k.caller,F$k.method,F$k.args,!1,!1)):((F$l=this._infoPool.length?this._infoPool.pop():new F$r).url=F$j,F$l.clas=F$y,F$l.type=F$T,F$l.cache=F$A,F$l.group=F$X,F$l.ignoreCache=F$I,F$l.priority=F$Y,F$t&&F$l.on("complete",F$t.caller,F$t.method,F$t.args),F$k&&F$l.on("progress",F$k.caller,F$k.method,F$k.args),F$$._resMap[F$j]=F$l,F$Y=F$Y<this._maxPriority?0<=F$Y?F$Y:0:this._maxPriority-1,this._resInfos[F$Y].push(F$l),this._next())}return this},F$j._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var F$y=0;F$y<this._maxPriority;F$y++)for(var F$j=this._resInfos[F$y];0<F$j.length;){var F$t=F$j.shift();if(F$t)return this._doLoad(F$t)}this._loaderCount||this.event("complete")}},F$j._doLoad=function(F$j){var F$t=this._loaders.length?this._loaders.pop():new F$Xy;this._loaderCount++,(this._loaderMap[F$j.url]=F$t).on("complete",null,F$T),F$t.on("progress",null,function(F$y){F$j.event("progress",F$y)}),F$t.on("error",null,function(F$y){F$T(null)}),F$j.loader=F$t;var F$k=this;function F$T(F$y){F$t.offAll(),F$t._data=null,F$t._customParse=!1,F$t._url=null,F$t._class=null,F$t._type=null,F$k._loaders.push(F$t),F$k._loaderCount--,delete F$k._loaderMap[F$j.url],F$k._endLoad(F$j,F$y instanceof Array?[F$y]:F$y),F$k._next()}F$t._class=F$j.clas,1<=F$j.priority?(F$t.priority=F$j.priority,F$t.realTime=!1):(F$t.priority=0,F$t.realTime=!0),F$t.load(F$j.url,F$j.type,F$j.cache,F$j.group,F$j.ignoreCache)},F$j._endLoad=function(F$y,F$j){var F$t=F$y.url;if(null==F$j){var F$k=this._failRes[F$t]||0;if(F$k<this.retryNum)return console.warn("[warn]Retry to load:",F$t),this._failRes[F$t]=F$k+1,void F$N.timer.once(this.retryDelay,this,this._addReTry,[F$y],!1);console.warn("[error]Failed to load:",F$t),this.event("error",F$t)}this._failRes[F$t]&&(this._failRes[F$t]=0),delete F$$._resMap[F$t],F$y.event("complete",F$j),F$y.destroy(),F$y.offAll(),this._infoPool.push(F$y)},F$j._addReTry=function(F$y){this._resInfos[this._maxPriority-1].push(F$y),this._next()},F$j.clearRes=function(F$y,F$j){void 0===F$j&&(F$j=!1),F$Xy.clearRes(F$y,F$j)},F$j.getRes=function(F$y){return F$Xy.getRes(F$y)},F$j.cacheRes=function(F$y,F$j){F$Xy.cacheRes(F$y,F$j)},F$j.clearTextureRes=function(F$y){F$Xy.clearTextureRes(F$y)},F$j.setGroup=function(F$y,F$j){F$Xy.setGroup(F$y,F$j)},F$j.clearResByGroup=function(F$y){F$Xy.clearResByGroup(F$y)},F$j.clearUnLoaded=function(){for(var F$y=0;F$y<this._maxPriority;F$y++){for(var F$j=this._resInfos[F$y],F$t=F$j.length-1;-1<F$t;F$t--){var F$k=F$j[F$t];F$k&&(F$k.destroy(),F$k.offAll(),this._infoPool.push(F$k))}F$j.length=0}this._loaderCount=0,F$$._resMap={}},F$j.cancelLoadByUrls=function(F$y){if(F$y)for(var F$j=0,F$t=F$y.length;F$j<F$t;F$j++)this.cancelLoadByUrl(F$y[F$j])},F$j.cancelLoadByUrl=function(F$y){for(var F$j=0;F$j<this._maxPriority;F$j++)for(var F$t=this._resInfos[F$j],F$k=F$t.length-1;-1<F$k;F$k--){var F$T=F$t[F$k];F$T&&F$T.url===F$y&&(F$t[F$k]=null,F$T.destroy(),F$T.offAll(),this._infoPool.push(F$T))}F$$._resMap[F$y]&&delete F$$._resMap[F$y]},F$j._loadAssets=function(F$y,F$t,F$A,F$j,F$k,F$T,F$Y){null==F$k&&(F$k=2),null==F$T&&(F$T=!0);for(var F$X=F$y.length,F$I=0,F$b=0,F$D=[],F$l=!0,F$r=0;F$r<F$X;F$r++){var F$$=F$y[F$r];if(!F$$)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+F$y);"string"==typeof F$$&&(F$$={url:F$$,type:F$j,size:1,priority:F$k}),F$$.size||(F$$.size=1),F$$.progress=0,F$b+=F$$.size,F$D.push(F$$);var F$W=F$A?F$C.create(null,F$n,[F$$],!1):null,F$z=F$t||F$A?F$C.create(null,F$V,[F$$]):null;this.load(F$$.url,F$z,F$W,F$$.type,null!=F$$.priority&&0<=F$$.priority?F$$.priority:2,F$T,F$$.group||F$Y)}function F$V(F$y,F$j){F$I++,F$y.progress=1,F$j||(F$l=!1),F$I===F$X&&F$t&&F$t.runWith(F$l)}function F$n(F$y,F$j){if(null!=F$A){F$y.progress=F$j;for(var F$t=0,F$k=0;F$k<F$D.length;F$k++){var F$T=F$D[F$k];F$t+=F$T.size*F$T.progress}var F$Y=F$t/F$b;F$A.runWith(F$Y)}}return this},F$$.cacheRes=function(F$y,F$j){F$Xy.cacheRes(F$y,F$j)},F$$._resMap={},F$I(F$$,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),F$$.__init$=function(){F$r=function(F$y){function F$j(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,F$j.__super.call(this)}return F$D(F$j,"",F$b),F$j.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},F$j}()},F$$}(),F$by=(function(F$y){function F$T(F$y){F$T.__super.call(this),F$y||(F$y=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var F$j=0,F$t=0,F$k=0;F$k<20;F$k++)F$k%5!=4?this._mat[F$j++]=F$y[F$k]:this._alpha[F$t++]=F$y[F$k];this._action=F$m.createFilterAction(32),this._action.data=this}F$D(F$T,"laya.filters.ColorFilter",F$n);var F$j=F$T.prototype;F$N.imps(F$j,{"laya.filters.IFilter":!0}),F$j.callNative=function(F$y){F$y._$P.cf=this;F$y.conchModel&&F$y.conchModel.setFilterMatrix&&F$y.conchModel.setFilterMatrix(this._mat,this._alpha)},F$W(0,F$j,"type",function(){return 32}),F$W(0,F$j,"action",function(){return this._action})}(),function(F$y){function F$k(F$y,F$j,F$t){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===F$j&&(F$j=0),F$k.__super.call(this),this._byteClass=F$t||F$g,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,F$y&&0<F$j&&F$j<65535&&this.connect(F$y,F$j)}F$D(F$k,"laya.net.Socket",F$b);var F$j=F$k.prototype;F$j.connect=function(F$y,F$j){var F$t="ws://"+F$y+":"+F$j;F$t="https:"==F$G.window.location.protocol?"wss://"+F$y+":"+F$j:"ws://"+F$y+":"+F$j,this.connectByUrl(F$t)},F$j.connectByUrl=function(F$y){var F$j=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new F$G.window.WebSocket(F$y,this.protocols):this._socket=new F$G.window.WebSocket(F$y),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(F$y){F$j._onOpen(F$y)},this._socket.onmessage=function(F$y){F$j._onMessage(F$y)},this._socket.onclose=function(F$y){F$j._onClose(F$y)},this._socket.onerror=function(F$y){F$j._onError(F$y)}},F$j.cleanSocket=function(){try{this._socket.close()}catch(F$y){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},F$j.close=function(){if(null!=this._socket)try{this._socket.close()}catch(F$y){}},F$j._onOpen=function(F$y){this._connected=!0,this.event("open",F$y)},F$j._onMessage=function(F$y){if(F$y&&F$y.data){var F$j=F$y.data;if(this.disableInput&&F$j)this.event("message",F$j);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var F$t=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,F$j&&("string"==typeof F$j?this._input.writeUTFBytes(F$j):this._input.writeArrayBuffer(F$j),this._addInputPosition=this._input.pos,this._input.pos=F$t),this.event("message",F$j)}}},F$j._onClose=function(F$y){this._connected=!1,this.event("close",F$y)},F$j._onError=function(F$y){this.event("error",F$y)},F$j.send=function(F$y){this._socket.send(F$y)},F$j.flush=function(){if(this._output&&0<this._output.length){var F$j;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(F$y){F$j=F$y}this._output.endian=this.endian,this._output.clear(),F$j&&this.event("error",F$j)}},F$W(0,F$j,"input",function(){return this._input}),F$W(0,F$j,"output",function(){return this._output}),F$W(0,F$j,"connected",function(){return this._connected}),F$W(0,F$j,"endian",function(){return this._endian},function(F$y){this._endian=F$y,null!=this._input&&(this._input.endian=F$y),null!=this._output&&(this._output.endian=F$y)}),F$k.LITTLE_ENDIAN="littleEndian",F$k.BIG_ENDIAN="bigEndian"}(),function(F$y){function F$X(){F$X.__super.call(this),this._$1__id=++F$X._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(F$X._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,F$F.currentResourceManager&&F$F.currentResourceManager.addResource(this)}F$D(F$X,"laya.resource.Resource",F$b);var F$j=F$X.prototype;return F$N.imps(F$j,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),F$j._setUrl=function(F$y){var F$j;this._url!==F$y&&(this._url&&((F$j=F$X._urlResourcesMap[this._url]).splice(F$j.indexOf(this),1),0===F$j.length&&delete F$X._urlResourcesMap[this._url]),F$y&&((F$j=F$X._urlResourcesMap[F$y])||(F$X._urlResourcesMap[F$y]=F$j=[]),F$j.push(this)),this._url=F$y)},F$j._getGroup=function(){return this._group},F$j._setGroup=function(F$y){var F$j;this._group!==F$y&&(this._group&&((F$j=F$X._groupResourcesMap[this._group]).splice(F$j.indexOf(this),1),0===F$j.length&&delete F$X._groupResourcesMap[this._group]),F$y&&((F$j=F$X._groupResourcesMap[F$y])||(F$X._groupResourcesMap[F$y]=F$j=[]),F$j.push(this)),this._group=F$y)},F$j._addReference=function(){this._referenceCount++},F$j._removeReference=function(){this._referenceCount--},F$j._clearReference=function(){this._referenceCount=0},F$j._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},F$j.recreateResource=function(){this.completeCreate()},F$j.disposeResource=function(){},F$j.activeResource=function(F$y){void 0===F$y&&(F$y=!1),this._lastUseFrameCount=F$B.loopCount,!this._destroyed&&this.__loaded&&(this._released||F$y)&&this.recreateResource()},F$j.releaseResource=function(F$y){return void 0===F$y&&(F$y=!0),!(!F$y&&this.lock)&&(!(this._released&&!F$y)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},F$j.onAsynLoaded=function(F$y,F$j,F$t){throw new Error("Resource: must override this function!")},F$j.destroy=function(){var F$y;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete F$X._idResourcesMap[this.id],this._url&&((F$y=F$X._urlResourcesMap[this._url])&&(F$y.splice(F$y.indexOf(this),1),0===F$y.length&&delete F$X._urlResourcesMap[this.url]),F$Xy.clearRes(this._url),this.__loaded||F$m.cancelLoadByUrl(this._url)),this._group&&((F$y=F$X._groupResourcesMap[this._group]).splice(F$y.indexOf(this),1),0===F$y.length&&delete F$X._groupResourcesMap[this.url]))},F$j.completeCreate=function(){this._released=!1,this.event("recovered",this)},F$j.dispose=function(){this.destroy()},F$W(0,F$j,"memorySize",function(){return this._memorySize},function(F$y){var F$j=F$y-this._memorySize;this._memorySize=F$y,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,F$j),this.resourceManager&&this.resourceManager.addSize(F$j)}),F$W(0,F$j,"_loaded",null,function(F$y){this.__loaded=F$y}),F$W(0,F$j,"loaded",function(){return this.__loaded}),F$W(0,F$j,"id",function(){return this._$1__id}),F$W(0,F$j,"destroyed",function(){return this._destroyed}),F$W(0,F$j,"group",function(){return this._getGroup()},function(F$y){this._setGroup(F$y)}),F$W(0,F$j,"resourceManager",function(){return this._resourceManager}),F$W(0,F$j,"url",function(){return this._url}),F$W(0,F$j,"released",function(){return this._released}),F$W(0,F$j,"referenceCount",function(){return this._referenceCount}),F$X.getResourceByID=function(F$y){return F$X._idResourcesMap[F$y]},F$X.getResourceByURL=function(F$y,F$j){return void 0===F$j&&(F$j=0),null==F$X._urlResourcesMap[F$y]?null:F$X._urlResourcesMap[F$y][F$j]},F$X.getResourceCountByURL=function(F$y){return F$X._urlResourcesMap[F$y].length},F$X.destroyUnusedResources=function(F$y){var F$j;if(F$y){var F$t=F$X._groupResourcesMap[F$y];if(F$t)for(var F$k=F$t.slice(),F$T=0,F$Y=F$k.length;F$T<F$Y;F$T++)(F$j=F$k[F$T]).lock||0!==F$j._referenceCount||F$j.destroy()}else for(var F$A in F$X._idResourcesMap)(F$j=F$X._idResourcesMap[F$A]).lock||0!==F$j._referenceCount||F$j.destroy()},F$X._uniqueIDCounter=0,F$X._idResourcesMap={},F$X._urlResourcesMap={},F$X._groupResourcesMap={},F$X}()),F$Dy=function(F$y){function F$p(F$y,F$j){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,F$p.__super.call(this),F$y&&null!=F$y._addReference&&F$y._addReference(),this.setTo(F$y,F$j)}F$D(F$p,"laya.resource.Texture",F$b);var F$j=F$p.prototype;return F$j._setUrl=function(F$y){this.url=F$y},F$j.setTo=function(F$y,F$j){if(F$y instanceof F$A.HTMLElement){var F$t=F$My.create("2D",F$y);this.bitmap=F$t}else this.bitmap=F$y;if(this.uv=F$j||F$p.DEF_UV,F$y){this._w=F$y.width,this._h=F$y.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var F$k=this;if(this._loaded)F$m.addToAtlas&&F$m.addToAtlas(F$k);else{var F$T=F$y;F$T instanceof laya.resource.HTMLImage&&F$T.image&&F$T.image.addEventListener("load",function(F$y){F$m.addToAtlas&&F$m.addToAtlas(F$k)},!1)}}},F$j.active=function(){this.bitmap&&this.bitmap.activeResource()},F$j.destroy=function(F$y){if(void 0===F$y&&(F$y=!1),this.alphaTexture&&(this.alphaTexture.destroy(F$y),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var F$j=this.bitmap;F$y?(F$S.isConchApp&&F$j.source&&F$j.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$j.dispose(),F$j._clearReference()):(F$j._removeReference(),0==F$j.referenceCount&&(F$S.isConchApp&&F$j.source&&F$j.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,F$j.dispose())),this.url&&this===F$N.loader.getRes(this.url)&&F$N.loader.clearRes(this.url,F$y),this._loaded=!1}},F$j.load=function(F$y){var F$j=this;this._loaded=!1,F$y=F$w.customFormat(F$y);var F$t=this.bitmap||(this.bitmap=F$vy.create(F$y));F$t.uri=F$y,F$t&&F$t._addReference();var F$k=this;F$t.onload=function(){F$t.onload=null,F$k._loaded=!0,F$j.sourceWidth=F$j._w=F$t.width,F$j.sourceHeight=F$j._h=F$t.height,F$k.event("loaded",this),F$m.addToAtlas&&F$m.addToAtlas(F$k)}},F$j.addTextureToAtlas=function(F$y){F$m.addTextureToAtlas(this)},F$j.getPixels=function(F$y,F$j,F$t,F$k){if(F$S.isConchApp){var F$T=this.bitmap;if(F$T.source&&F$T.source.getImageData){var F$Y=F$T.source.getImageData(F$y,F$j,F$t,F$k),F$A=new Uint8Array(F$Y);return Array.from(F$A)}return null}return F$S.isWebGL?F$m.getTexturePixels(this,F$y,F$j,F$t,F$k):(F$G.canvas.size(F$t,F$k),F$G.canvas.clear(),F$G.context.drawTexture(this,-F$y,-F$j,this.width,this.height,0,0),F$G.context.getImageData(0,0,F$t,F$k).data)},F$j.onAsynLoaded=function(F$y,F$j){if(F$j){if("function"!=typeof F$j._addReference)throw new Error("bitmap._addReference is not a function. "+F$j.className+" "+typeof F$j._addReference+" "+F$j.constructor);F$j._addReference()}this.setTo(F$j,this.uv),this._loaded&&this.event("loaded",this)},F$W(0,F$j,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),F$W(0,F$j,"loaded",function(){return this._loaded}),F$W(0,F$j,"released",function(){return!this.bitmap||this.bitmap.released}),F$W(0,F$j,"width",function(){return this._w?this._w:this.uv&&this.uv!==F$p.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(F$y){this._w=F$y,this.sourceWidth||(this.sourceWidth=F$y)}),F$W(0,F$j,"repeat",function(){return!F$S.isWebGL||!this.bitmap||this.bitmap.repeat},function(F$y){F$y&&F$S.isWebGL&&this.bitmap&&(this.bitmap.repeat=F$y)&&(this.bitmap.enableMerageInAtlas=!1)}),F$W(0,F$j,"height",function(){return this._h?this._h:this.uv&&this.uv!==F$p.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(F$y){this._h=F$y,this.sourceHeight||(this.sourceHeight=F$y)}),F$W(0,F$j,"isLinearSampling",function(){return!F$S.isWebGL||9728!=this.bitmap.minFifter},function(F$y){!F$y&&F$S.isWebGL&&(F$y||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),F$p.moveUV=function(F$y,F$j,F$t){for(var F$k=0;F$k<8;F$k+=2)F$t[F$k]+=F$y,F$t[F$k+1]+=F$j;return F$t},F$p.create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){void 0===F$Y&&(F$Y=0),void 0===F$A&&(F$A=0),void 0===F$X&&(F$X=0),void 0===F$I&&(F$I=0);var F$b=F$y instanceof laya.resource.Texture,F$D=F$b?F$y.uv:F$p.DEF_UV,F$l=F$b?F$y.bitmap:F$y,F$r=F$m.isAtlas(F$l);if(F$r){var F$$=F$l._atlaser,F$W=F$y._atlasID;if(-1==F$W)throw new Error("create texture error");F$l=F$$._inAtlasTextureBitmapValue[F$W],F$D=F$$._inAtlasTextureOriUVValue[F$W]}var F$z=new F$p(F$l,null);F$l.width&&F$j+F$k>F$l.width&&(F$k=F$l.width-F$j),F$l.height&&F$t+F$T>F$l.height&&(F$T=F$l.height-F$t),F$z.width=F$k,F$z.height=F$T,F$z.offsetX=F$Y,F$z.offsetY=F$A,F$z.sourceWidth=F$X||F$k,F$z.sourceHeight=F$I||F$T;var F$V=1/F$l.width,F$n=1/F$l.height;F$j*=F$V,F$t*=F$n,F$k*=F$V,F$T*=F$n;var F$C=F$z.uv[0],F$M=F$z.uv[1],F$_=F$z.uv[4],F$e=F$z.uv[5],F$v=F$_-F$C,F$N=F$e-F$M,F$P=F$p.moveUV(F$D[0],F$D[1],[F$j,F$t,F$j+F$k,F$t,F$j+F$k,F$t+F$T,F$j,F$t+F$T]);F$z.uv=[F$C+F$P[0]*F$v,F$M+F$P[1]*F$N,F$_-(1-F$P[2])*F$v,F$M+F$P[3]*F$N,F$_-(1-F$P[4])*F$v,F$e-(1-F$P[5])*F$N,F$C+F$P[6]*F$v,F$e-(1-F$P[7])*F$N],F$r&&F$z.addTextureToAtlas();var F$d=F$l.scaleRate;return F$d&&1!=F$d?(F$z.sourceWidth/=F$d,F$z.sourceHeight/=F$d,F$z.width/=F$d,F$z.height/=F$d,F$z.scaleRate=F$d,F$z.offsetX/=F$d,F$z.offsetY/=F$d):F$z.scaleRate=1,F$z},F$p.createFromTexture=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$y.scaleRate;1!=F$Y&&(F$j*=F$Y,F$t*=F$Y,F$k*=F$Y,F$T*=F$Y);var F$A=F$d.TEMP.setTo(F$j-F$y.offsetX,F$t-F$y.offsetY,F$k,F$T),F$X=F$A.intersection(F$p._rect1.setTo(0,0,F$y.width,F$y.height),F$p._rect2);if(!F$X)return null;var F$I=F$p.create(F$y,F$X.x,F$X.y,F$X.width,F$X.height,F$X.x-F$A.x,F$X.y-F$A.y,F$k,F$T);if(F$I.bitmap&&F$I.bitmap._removeReference)return F$I.bitmap._removeReference(),F$I;var F$b="bitmap:"+(F$I.bitmap?F$I.bitmap.constructor?F$I.bitmap.constructor.name:F$I.bitmap.__className:"")+", url:"+(F$y.url+" | "+(F$I.bitmap?F$I.bitmap.url:F$y.url))+", x="+F$j+",y="+F$t+",width="+F$k+",height="+F$T+", result="+(F$X?F$X.x+","+F$X.y+","+F$X.width+","+F$X.height:"null")+", rect="+F$A.x+","+F$A.y+","+F$A.width+","+F$A.height;throw new Error("报错：bitmap._removeReference is not a function  "+F$b)},F$p.DEF_UV=[0,0,1,0,1,1,0,1],F$p.INV_UV=[0,1,1,1,1,0,0,0],F$p._rect1=new F$d,F$p._rect2=new F$d,F$p}(),F$y=function(F$y){var F$X;function F$Y(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,F$Y.__super.call(this)}F$D(F$Y,"laya.utils.TimeLine",F$b);var F$j=F$Y.prototype;return F$j.to=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$T&&(F$T=0),this._create(F$y,F$j,F$t,F$k,F$T,!0)},F$j.from=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$T&&(F$T=0),this._create(F$y,F$j,F$t,F$k,F$T,!1)},F$j._create=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$R.getItemByClass("tweenData",F$X);return F$A.isTo=F$Y,F$A.type=0,F$A.target=F$y,F$A.duration=F$t,F$A.data=F$j,F$A.startTime=this._startTime+F$T,F$A.endTime=F$A.startTime+F$A.duration,F$A.ease=F$k,this._startTime=Math.max(F$A.endTime,this._startTime),this._tweenDataList.push(F$A),this._startTimeSort=!0,this._endTimeSort=!0,this},F$j.addLabel=function(F$y,F$j){var F$t=F$R.getItemByClass("tweenData",F$X);return F$t.type=1,F$t.data=F$y,F$t.endTime=F$t.startTime=this._startTime+F$j,this._labelDic||(this._labelDic={}),this._labelDic[F$y]=F$t,this._tweenDataList.push(F$t),this},F$j.removeLabel=function(F$y){if(this._labelDic&&this._labelDic[F$y]){var F$j=this._labelDic[F$y];if(F$j){var F$t=this._tweenDataList.indexOf(F$j);-1<F$t&&this._tweenDataList.splice(F$t,1)}delete this._labelDic[F$y]}},F$j.gotoTime=function(F$y){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var F$j,F$t,F$k,F$T;for(var F$Y in this._firstTweenDic)if(F$t=this._firstTweenDic[F$Y])for(var F$A in F$t)F$t.diyTarget.hasOwnProperty(F$A)&&(F$t.diyTarget[F$A]=F$t[F$A]);for(F$Y in this._tweenDic)(F$j=this._tweenDic[F$Y]).clear(),delete this._tweenDic[F$Y];if(this._index=0,this._gidIndex=0,this._currTime=F$y,this._lastTime=F$G.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=F$k=this._tweenDataList.concat(),F$k.sort(function(F$y,F$j){return F$y.endTime>F$j.endTime?1:F$y.endTime<F$j.endTime?-1:0})}else F$k=this._endTweenDataList;for(var F$X=0,F$I=F$k.length;F$X<F$I;F$X++)if(0==(F$T=F$k[F$X]).type){if(!(F$y>=F$T.endTime))break;this._index=Math.max(this._index,F$X+1);var F$b=F$T.data;if(F$T.isTo)for(var F$D in F$b)F$T.target[F$D]=F$b[F$D]}for(F$X=0,F$I=this._tweenDataList.length;F$X<F$I;F$X++)0==(F$T=this._tweenDataList[F$X]).type&&F$y>=F$T.startTime&&F$y<F$T.endTime&&(this._index=Math.max(this._index,F$X+1),this._gidIndex++,(F$j=F$R.getItemByClass("tween",F$L))._create(F$T.target,F$T.data,F$T.duration,F$T.ease,F$C.create(this,this._animComplete,[this._gidIndex]),0,!1,F$T.isTo,!0,!1),F$j.setStartTime(this._currTime-(F$y-F$T.startTime)),F$j._updateEase(this._currTime),F$j.gid=this._gidIndex,this._tweenDic[this._gidIndex]=F$j)}},F$j.gotoLabel=function(F$y){if(null!=this._labelDic){var F$j=this._labelDic[F$y];F$j&&this.gotoTime(F$j.startTime)}},F$j.pause=function(){F$N.timer.clear(this,this._update)},F$j.resume=function(){this.play(this._currTime,this._loopKey)},F$j.play=function(F$y,F$j){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(F$y,F$j){return F$y.startTime>F$j.startTime?1:F$y.startTime<F$j.startTime?-1:0});for(var F$t=0,F$k=this._tweenDataList.length;F$t<F$k;F$t++){var F$T=this._tweenDataList[F$t];if(null!=F$T&&0==F$T.type){var F$Y=F$T.target,F$A=F$Y.$_GID||(F$Y.$_GID=F$o.getGID()),F$X=null;for(var F$I in null==this._firstTweenDic[F$A]?((F$X={}).diyTarget=F$Y,this._firstTweenDic[F$A]=F$X):F$X=this._firstTweenDic[F$A],F$T.data)null==F$X[F$I]&&(F$X[F$I]=F$Y[F$I])}}}"string"==typeof F$y?this.gotoLabel(F$y):this.gotoTime(F$y),this._loopKey=F$j,this._lastTime=F$G.now(),F$N.timer.frameLoop(1,this,this._update)}},F$j._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var F$y in this._tweenDic)(F$j=this._tweenDic[F$y]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var F$j,F$t=F$G.now(),F$k=F$t-this._lastTime,F$T=this._currTime+=F$k*this.scale;for(F$y in this._lastTime=F$t,this._tweenDic)(F$j=this._tweenDic[F$y])._updateEase(F$T);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var F$Y=this._tweenDataList[this._index];F$T>=F$Y.startTime&&(this._index++,0==F$Y.type?(this._gidIndex++,(F$j=F$R.getItemByClass("tween",F$L))._create(F$Y.target,F$Y.data,F$Y.duration,F$Y.ease,F$C.create(this,this._animComplete,[this._gidIndex]),0,!1,F$Y.isTo,!0,!1),F$j.setStartTime(F$T),F$j.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=F$j)._updateEase(F$T)):this.event("label",F$Y.data))}},F$j._animComplete=function(F$y){this._tweenDic[F$y]&&delete this._tweenDic[F$y]},F$j._complete=function(){this.event("complete")},F$j.reset=function(){var F$y;if(this._labelDic)for(F$y in this._labelDic)delete this._labelDic[F$y];for(F$y in this._tweenDic)this._tweenDic[F$y].clear(),delete this._tweenDic[F$y];for(F$y in this._firstTweenDic)delete this._firstTweenDic[F$y];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var F$j,F$t=0;for(F$j=this._tweenDataList.length,F$t=0;F$t<F$j;F$t++)this._tweenDataList[F$t]&&this._tweenDataList[F$t].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,F$N.timer.clear(this,this._update)},F$j.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},F$W(0,F$j,"index",function(){return this._frameIndex},function(F$y){this._frameIndex=F$y,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),F$W(0,F$j,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),F$Y.to=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$T&&(F$T=0),(new F$Y).to(F$y,F$j,F$t,F$k,F$T)},F$Y.from=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$T&&(F$T=0),(new F$Y).from(F$y,F$j,F$t,F$k,F$T)},F$Y.__init$=function(){F$X=function(){function F$y(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return F$D(F$y,""),F$y.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,F$R.recover("tweenData",this)},F$y}()},F$Y}(),F$ly=function(F$T){function F$t(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,F$t.__super.call(this),this._style=F$X.EMPTY}F$D(F$t,"laya.display.Sprite",F$T);var F$y=F$t.prototype;return F$N.imps(F$y,{"laya.display.ILayout":!0}),F$y.createConchModel=function(){return new ConchNode},F$y.destroy=function(F$y){if(void 0===F$y&&(F$y=!0),this._releaseMem(),!this._destroyed){this.filters=null;var F$j=this.mask;F$j&&(this.mask=null,F$j.destroy(F$y))}F$T.prototype.destroy.call(this,F$y),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},F$y.updateZOrder=function(){F$o.updateOrder(this._childs)&&this.repaint()},F$y.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},F$y.setBounds=function(F$y){this._set$P("uBounds",F$y)},F$y.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new F$d),F$d._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},F$y.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new F$d),F$d._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},F$y._boundPointsToParent=function(F$y){void 0===F$y&&(F$y=!1);var F$j=0,F$t=0;this._style&&(F$j=this._style._tf.translateX,F$t=this._style._tf.translateY,F$y=F$y||0!==this._style._tf.rotate,this._style.scrollRect&&(F$j+=this._style.scrollRect.x,F$t+=this._style.scrollRect.y));var F$k=this._getBoundPointsM(F$y);if(!F$k||F$k.length<1)return F$k;if(8!=F$k.length&&(F$k=F$y?F$e.scanPList(F$k):F$d._getWrapRec(F$k,F$d.TEMP)._getBoundPoints()),!this.transform)return F$o.transPointList(F$k,this._x-F$j,this._y-F$t),F$k;var F$T=F$P.TEMP,F$Y=0,F$A=F$k.length;for(F$Y=0;F$Y<F$A;F$Y+=2)F$T.x=F$k[F$Y],F$T.y=F$k[F$Y+1],this.toParentPoint(F$T),F$k[F$Y]=F$T.x,F$k[F$Y+1]=F$T.y;return F$k},F$y.getGraphicBounds=function(F$y){return void 0===F$y&&(F$y=!1),this._graphics?this._graphics.getBounds(F$y):F$d.TEMP.setTo(0,0,0,0)},F$y._getBoundPointsM=function(F$y){if(void 0===F$y&&(F$y=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var F$j=F$o.clearArray(this._$P.temBM),F$t=F$d.TEMP;return F$t.copyFrom(this.scrollRect),F$o.concatArray(F$j,F$t._getBoundPoints()),F$j}for(var F$k,F$T,F$Y,F$A=this._graphics?this._graphics.getBoundPoints():F$o.clearArray(this._$P.temBM),F$X=0,F$I=(F$Y=this._childs).length;F$X<F$I;F$X++)(F$k=F$Y[F$X])instanceof laya.display.Sprite&&1==F$k.visible&&(F$T=F$k._boundPointsToParent(F$y))&&(F$A=F$A?F$o.concatArray(F$A,F$T):F$T);return F$A},F$y.getStyle=function(){return this._style===F$X.EMPTY&&(this._style=new F$X),this._style},F$y.setStyle=function(F$y){this._style=F$y},F$y._adjustTransform=function(){this._tfChanged=!1;var F$y,F$j=this._style._tf,F$t=F$j.scaleX,F$k=F$j.scaleY;if(F$j.rotate||1!==F$t||1!==F$k||F$j.skewX||F$j.skewY){(F$y=this._transform||(this._transform=F$U.create())).bTransform=!0;var F$T=.0174532922222222*(F$j.rotate-F$j.skewX),F$Y=.0174532922222222*(F$j.rotate+F$j.skewY),F$A=Math.cos(F$Y),F$X=Math.sin(F$Y),F$I=Math.sin(F$T),F$b=Math.cos(F$T);return F$y.a=F$t*F$A,F$y.b=F$t*F$X,F$y.c=-F$k*F$I,F$y.d=F$k*F$b,F$y.tx=F$y.ty=0,F$y}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,F$y},F$y.pos=function(F$y,F$j,F$t){if(void 0===F$t&&(F$t=!1),this._x!==F$y||this._y!==F$j){if(this.destroyed)return this;if(F$t){this._x=F$y,this._y=F$j,this.conchModel&&this.conchModel.pos(this._x,this._y);var F$k=this._parent;F$k&&0===F$k._repaint&&(F$k._repaint=1,F$k.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=F$y,this.y=F$j}return this},F$y.pivot=function(F$y,F$j){return this.pivotX=F$y,this.pivotY=F$j,this},F$y.size=function(F$y,F$j){return this.width=F$y,this.height=F$j,this},F$y.scale=function(F$y,F$j,F$t){void 0===F$t&&(F$t=!1);var F$k=this.getStyle(),F$T=F$k._tf;if(F$T.scaleX!=F$y||F$T.scaleY!=F$j){if(this.destroyed)return this;if(F$t){F$k.setScale(F$y,F$j),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$y,F$j),this._renderType|=4;var F$Y=this._parent;F$Y&&0===F$Y._repaint&&(F$Y._repaint=1,F$Y.parentRepaint())}else this.scaleX=F$y,this.scaleY=F$j}return this},F$y.skew=function(F$y,F$j){return this.skewX=F$y,this.skewY=F$j,this},F$y.render=function(F$y,F$j,F$t){F$B.spriteCount++,F$K.renders[this._renderType]._fun(this,F$y,F$j+this._x,F$t+this._y),this._repaint=0},F$y.drawToCanvas=function(F$y,F$j,F$t,F$k){if(F$S.isConchNode){var F$T=F$My.create("2D");return new F$H(F$y,F$j,F$T).ctx.setCanvasType(1),this.conchModel.drawToCanvas(F$T.source,F$t,F$k),F$T}return F$m.drawToCanvas(this,this._renderType,F$y,F$j,F$t,F$k)},F$y.customRender=function(F$y,F$j,F$t){this._renderType|=1024},F$y._applyFilters=function(){var F$y;if(!F$S.isWebGL&&((F$y=this._$P.filters)&&!(F$y.length<1)))for(var F$j=0,F$t=F$y.length;F$j<F$t;F$j++)F$y[F$j].action.apply(this._$P.cacheCanvas)},F$y._isHaveGlowFilter=function(){var F$y,F$j=0;if(this.filters)for(F$j=0;F$j<this.filters.length;F$j++)if(8==this.filters[F$j].type)return!0;for(F$j=0,F$y=this._childs.length;F$j<F$y;F$j++)if(this._childs[F$j]._isHaveGlowFilter())return!0;return!1},F$y.localToGlobal=function(F$y,F$j){void 0===F$j&&(F$j=!1),!0===F$j&&(F$y=new F$P(F$y.x,F$y.y));for(var F$t=this;F$t&&F$t!=F$N.stage;)F$y=F$t.toParentPoint(F$y),F$t=F$t.parent;return F$y},F$y.globalToLocal=function(F$y,F$j){void 0===F$j&&(F$j=!1),F$j&&(F$y=new F$P(F$y.x,F$y.y));for(var F$t=this,F$k=[];F$t&&F$t!=F$N.stage;)F$k.push(F$t),F$t=F$t.parent;for(var F$T=F$k.length-1;0<=F$T;)F$y=(F$t=F$k[F$T]).fromParentPoint(F$y),F$T--;return F$y},F$y.toParentPoint=function(F$y){if(!F$y)return F$y;F$y.x-=this.pivotX,F$y.y-=this.pivotY,this.transform&&this._transform.transformPoint(F$y),F$y.x+=this._x,F$y.y+=this._y;var F$j=this._style.scrollRect;return F$j&&(F$y.x-=F$j.x,F$y.y-=F$j.y),F$y},F$y.fromParentPoint=function(F$y){if(!F$y)return F$y;F$y.x-=this._x,F$y.y-=this._y;var F$j=this._style.scrollRect;return F$j&&(F$y.x+=F$j.x,F$y.y+=F$j.y),this.transform&&this._transform.invertTransformPoint(F$y),F$y.x+=this.pivotX,F$y.y+=this.pivotY,F$y},F$y.on=function(F$y,F$j,F$t,F$k){return 1!==this._mouseEnableState&&this.isMouseEvent(F$y)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$y,F$j,F$t,F$k,!1)):F$T.prototype.on.call(this,F$y,F$j,F$t,F$k)},F$y.once=function(F$y,F$j,F$t,F$k){return 1!==this._mouseEnableState&&this.isMouseEvent(F$y)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(F$y,F$j,F$t,F$k,!0)):F$T.prototype.once.call(this,F$y,F$j,F$t,F$k)},F$y._$2__onDisplay=function(){if(1!==this._mouseEnableState){var F$y=this;for(F$y=F$y.parent;F$y&&1!==F$y._mouseEnableState&&!F$y._getBit(2);)F$y.mouseEnabled=!0,F$y._setBit(2,!0),F$y=F$y.parent}},F$y.loadImage=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=this;return void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),this.graphics.loadImage(F$y,F$j,F$t,F$k,F$T,function(F$y){F$A.destroyed||(F$A.size(F$j+(F$k||F$y.width),F$t+(F$T||F$y.height)),F$A.repaint(),F$Y&&F$Y.runWith(F$y))}),this},F$y.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},F$y._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},F$y._childChanged=function(F$y){this._childs.length?this._renderType|=2048:this._renderType&=-2049,F$y&&this._get$P("hasZorder")&&F$N.timer.callLater(this,this.updateZOrder),this.repaint()},F$y.parentRepaint=function(){var F$y=this._parent;F$y&&0===F$y._repaint&&(F$y._repaint=1,F$y.parentRepaint())},F$y.startDrag=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){void 0===F$j&&(F$j=!1),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=300),void 0===F$Y&&(F$Y=!1),void 0===F$A&&(F$A=.92),this._$P.dragging||this._set$P("dragging",new F$O),this._$P.dragging.start(this,F$y,F$j,F$t,F$k,F$T,F$Y,F$A)},F$y.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},F$y._releaseMem=function(){if(this._$P){var F$y=this._$P.cacheCanvas;F$y&&F$y.ctx&&(F$R.recover("RenderContext",F$y.ctx),F$y.ctx.canvas.size(0,0),F$y.ctx=null);var F$j=this._$P._filterCache;F$j&&(F$j.destroy(),F$j.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},F$y._setDisplay=function(F$y){F$y||this._releaseMem(),F$T.prototype._setDisplay.call(this,F$y)},F$y.hitTestPoint=function(F$y,F$j){var F$t=this.globalToLocal(F$P.TEMP.setTo(F$y,F$j));return F$y=F$t.x,F$j=F$t.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?F$d.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(F$y,F$j)},F$y.getMousePoint=function(){return this.globalToLocal(F$P.TEMP.setTo(F$N.stage.mouseX,F$N.stage.mouseY))},F$y._getWords=function(){return null},F$y._addChildsToLayout=function(F$y){var F$j=this._getWords();if(null==F$j&&0==this._childs.length)return!1;if(F$j)for(var F$t=0,F$k=F$j.length;F$t<F$k;F$t++)F$y.push(F$j[F$t]);F$t=0;for(var F$T=this._childs.length;F$t<F$T;++F$t){var F$Y=this._childs[F$t];F$Y._style._enableLayout()&&F$Y._addToLayout(F$y)}return!0},F$y._addToLayout=function(F$y){this._style.absolute||(this._style.block?F$y.push(this):this._addChildsToLayout(F$y)&&(this.x=this.y=0))},F$y._isChar=function(){return!1},F$y._getCSSStyle=function(){return this._style.getCSSStyle()},F$y._setAttributes=function(F$y,F$j){switch(F$y){case"x":this.x=parseFloat(F$j);break;case"y":this.y=parseFloat(F$j);break;case"width":this.width=parseFloat(F$j);break;case"height":this.height=parseFloat(F$j);break;default:this[F$y]=F$j}},F$y._layoutLater=function(){this.parent&&this.parent._layoutLater()},F$W(0,F$y,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(F$y){this._optimizeScrollRect!=F$y&&(this._optimizeScrollRect=F$y,this.conchModel&&this.conchModel.optimizeScrollRect(F$y))}),F$W(0,F$y,"customRenderEnable",null,function(F$y){if(F$y&&(this._renderType|=1024,F$S.isConchNode)){F$t.CustomList.push(this);var F$j=new F$My("2d");F$j._setContext(new CanvasRenderingContext2D),this.customContext=new F$H(0,0,F$j),F$j.context.setCanvasType&&F$j.context.setCanvasType(2),this.conchModel.custom(F$j.context)}}),F$W(0,F$y,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(F$y){this.cacheAs=F$y?this._$P.hasFilter?"none":"normal":"none"}),F$W(0,F$y,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(F$y){var F$j=this._$P.cacheCanvas;if(F$y!==(F$j?F$j.type:"none")){if("none"!==F$y)this._getBit(1)||this._setUpNoticeType(1),F$j||(F$j=this._set$P("cacheCanvas",F$R.getItemByClass("cacheCanvas",Object))),F$j.type=F$y,F$j.reCache=!0,this._renderType|=16,"bitmap"==F$y&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(F$j){var F$t=F$j;F$t&&F$t.ctx&&(F$R.recover("RenderContext",F$t.ctx),F$t.ctx.canvas.size(0,0),F$t.ctx=null),F$R.recover("cacheCanvas",F$j)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),F$W(0,F$y,"zOrder",function(){return this._zOrder},function(F$y){this._zOrder!=F$y&&(this._zOrder=F$y,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(F$y),this._parent&&(F$y&&this._parent._set$P("hasZorder",!0),F$N.timer.callLater(this._parent,this.updateZOrder)))}),F$W(0,F$y,"rotation",function(){return this._style._tf.rotate},function(F$y){var F$j=this.getStyle();if(F$j._tf.rotate!==F$y){F$j.setRotate(F$y),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(F$y),this._renderType|=4;var F$t=this._parent;F$t&&0===F$t._repaint&&(F$t._repaint=1,F$t.parentRepaint())}}),F$W(0,F$y,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$y){this._width!==F$y&&(this._width=F$y,this.conchModel&&this.conchModel.size(F$y,this._height),this.repaint())}),F$W(0,F$y,"x",function(){return this._x},function(F$y){if(this._x!==F$y){if(this.destroyed)return;this._x=F$y,this.conchModel&&this.conchModel.pos(F$y,this._y);var F$j=this._parent;F$j&&0===F$j._repaint&&(F$j._repaint=1,F$j.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$W(0,F$y,"globalScaleY",function(){for(var F$y=1,F$j=this;F$j&&F$j!==F$N.stage;)F$y*=F$j.scaleY,F$j=F$j.parent;return F$y}),F$W(0,F$y,"hitArea",function(){return this._$P.hitArea},function(F$y){this._set$P("hitArea",F$y)}),F$W(0,F$y,"staticCache",function(){return this._$P.staticCache},function(F$y){this._set$P("staticCache",F$y),F$y||this.reCache()}),F$W(0,F$y,"texture",function(){return this._texture},function(F$y){this._texture!=F$y&&(this._texture=F$y,this.graphics.cleanByTexture(F$y,0,0))}),F$W(0,F$y,"y",function(){return this._y},function(F$y){if(this._y!==F$y){if(this.destroyed)return;this._y=F$y,this.conchModel&&this.conchModel.pos(this._x,F$y);var F$j=this._parent;F$j&&0===F$j._repaint&&(F$j._repaint=1,F$j.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),F$W(0,F$y,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$y){this._height!==F$y&&(this._height=F$y,this.conchModel&&this.conchModel.size(this._width,F$y),this.repaint())}),F$W(0,F$y,"blendMode",function(){return this._style.blendMode},function(F$y){this.getStyle().blendMode=F$y,this.conchModel&&this.conchModel.blendMode(F$y),F$y&&"source-over"!=F$y?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),F$W(0,F$y,"scaleX",function(){return this._style._tf.scaleX},function(F$y){var F$j=this.getStyle();if(F$j._tf.scaleX!==F$y){F$j.setScaleX(F$y),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$y,F$j._tf.scaleY),this._renderType|=4;var F$t=this._parent;F$t&&0===F$t._repaint&&(F$t._repaint=1,F$t.parentRepaint())}}),F$W(0,F$y,"scaleY",function(){return this._style._tf.scaleY},function(F$y){var F$j=this.getStyle();if(F$j._tf.scaleY!==F$y){F$j.setScaleY(F$y),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(F$j._tf.scaleX,F$y),this._renderType|=4;var F$t=this._parent;F$t&&0===F$t._repaint&&(F$t._repaint=1,F$t.parentRepaint())}}),F$W(0,F$y,"stage",function(){return F$N.stage}),F$W(0,F$y,"skewX",function(){return this._style._tf.skewX},function(F$y){var F$j=this.getStyle();if(F$j._tf.skewX!==F$y){F$j.setSkewX(F$y),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$y,F$j._tf.skewY),this._renderType|=4;var F$t=this._parent;F$t&&0===F$t._repaint&&(F$t._repaint=1,F$t.parentRepaint())}}),F$W(0,F$y,"scrollRect",function(){return this._style.scrollRect},function(F$y){this.getStyle().scrollRect=F$y,this.repaint(),F$y?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(F$y.x,F$y.y,F$y.width,F$y.height)):(this._renderType&=-129,this.conchModel&&(F$t.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),F$W(0,F$y,"skewY",function(){return this._style._tf.skewY},function(F$y){var F$j=this.getStyle();if(F$j._tf.skewY!==F$y){F$j.setSkewY(F$y),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(F$j._tf.skewX,F$y),this._renderType|=4;var F$t=this._parent;F$t&&0===F$t._repaint&&(F$t._repaint=1,F$t.parentRepaint())}}),F$W(0,F$y,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(F$y){this._tfChanged=!1,(this._transform=F$y)&&(this._x=F$y.tx,this._y=F$y.ty,F$y.tx=F$y.ty=0,this.conchModel&&this.conchModel.transform(F$y.a,F$y.b,F$y.c,F$y.d,this._x,this._y)),F$y?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),F$W(0,F$y,"pivotX",function(){return this._style._tf.translateX},function(F$y){this.getStyle().setTranslateX(F$y),this.conchModel&&this.conchModel.pivot(F$y,this._style._tf.translateY),this.repaint()}),F$W(0,F$y,"pivotY",function(){return this._style._tf.translateY},function(F$y){this.getStyle().setTranslateY(F$y),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,F$y),this.repaint()}),F$W(0,F$y,"alpha",function(){return this._style.alpha},function(F$y){this._style&&this._style.alpha!==F$y&&(F$y=F$y<0?0:1<F$y?1:F$y,this.getStyle().alpha=F$y,this.conchModel&&this.conchModel.alpha(F$y),1!==F$y?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),F$W(0,F$y,"visible",function(){return this._style.visible},function(F$y){this._style&&this._style.visible!==F$y&&(this.getStyle().visible=F$y,this.conchModel&&this.conchModel.visible(F$y),this.parentRepaint())}),F$W(0,F$y,"graphics",function(){return this._graphics||(this.graphics=F$m.createGraphics())},function(F$y){this._graphics&&(this._graphics._sp=null),(this._graphics=F$y)?(this._renderType&=-2,this._renderType|=512,(F$y._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(F$t.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),F$W(0,F$y,"filters",function(){return this._$P.filters},function(F$y){F$y&&0===F$y.length&&(F$y=null),this._$P.filters!=F$y&&(this._set$P("filters",F$y?F$y.slice():null),F$S.isConchApp&&(this.conchModel&&(F$t.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),F$S.isWebGL&&(F$y&&F$y.length?this._renderType|=32:this._renderType&=-33),F$y&&0<F$y.length?(this._getBit(1)||this._setUpNoticeType(1),F$S.isWebGL&&1==F$y.length&&F$y[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(F$S.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),F$W(0,F$y,"parent",F$T.prototype._$get_parent,function(F$y){F$N.superSet(F$yy,this,"parent",F$y),F$y&&this._getBit(2)&&this._$2__onDisplay()}),F$W(0,F$y,"mask",function(){return this._$P._mask},function(F$y){F$y&&this.mask&&this.mask._$P.maskParent||(F$y?(this.cacheAs="bitmap",this._set$P("_mask",F$y),F$y._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",F$y),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(F$y?F$y.conchModel:null),this._renderType|=64,this.parentRepaint())}),F$W(0,F$y,"mouseEnabled",function(){return 1<this._mouseEnableState},function(F$y){this._mouseEnableState=F$y?2:1}),F$W(0,F$y,"globalScaleX",function(){for(var F$y=1,F$j=this;F$j&&F$j!==F$N.stage;)F$y*=F$j.scaleX,F$j=F$j.parent;return F$y}),F$W(0,F$y,"mouseX",function(){return this.getMousePoint().x}),F$W(0,F$y,"mouseY",function(){return this.getMousePoint().y}),F$t.fromImage=function(F$y){return(new F$t).loadImage(F$y)},F$t._cachePool=[],F$t.CustomList=[],F$I(F$t,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=F$A.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),F$t}(F$yy),F$ry=function(F$y){function F$j(F$y){this._audio=null,this._onEnd=null,this._resumePlay=null,F$j.__super.call(this),this._onEnd=F$o.bind(this.__onEnd,this),this._resumePlay=F$o.bind(this.__resumePlay,this),F$y.addEventListener("ended",this._onEnd),this._audio=F$y}F$D(F$j,"laya.media.h5audio.AudioSoundChannel",F$ky);var F$t=F$j.prototype;return F$t.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(F$N.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$t.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,F$G.container.appendChild(this._audio),this._audio.play()}catch(F$y){this.event("error")}},F$t.play=function(F$y){this.isStopped=!1;try{this._audio.playbackRate=F$Q.playbackRate,this._audio.currentTime=this.startTime}catch(F$y){return void this._audio.addEventListener("canplay",this._resumePlay)}F$Q.addChannel(this),F$G.container.appendChild(this._audio),!F$y&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},F$t.stop=function(){this.isStopped=!0,F$Q.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&F$S.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),F$G.onIE||this._audio!=F$ty._musicAudio&&F$R.recover("audio:"+this.url,this._audio),F$G.removeElement(this._audio),this._audio=null)},F$t.pause=function(){this.isStopped=!0,F$Q.removeChannel(this),"pause"in this._audio&&this._audio.pause()},F$t.resume=function(){this._audio&&(this.isStopped=!1,F$Q.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},F$W(0,F$t,"position",function(){return this._audio?this._audio.currentTime:0}),F$W(0,F$t,"duration",function(){return this._audio?this._audio.duration:0}),F$W(0,F$t,"volume",function(){return this._audio?this._audio.volume:1},function(F$y){this._audio&&(this._audio.volume=F$y)}),F$j}(),F$$y=function(F$y){function F$j(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=F$Yy.ctx,F$j.__super.call(this),this._onPlayEnd=F$o.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}F$D(F$j,"laya.media.webaudio.WebAudioSoundChannel",F$ky);var F$t=F$j.prototype;return F$t.play=function(F$y){if(F$Q.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var F$j=this.context,F$t=this.gain,F$k=F$j.createBufferSource();(this.bufferSource=F$k).buffer=this.audioBuffer,F$k.connect(F$t),F$t&&F$t.disconnect(),F$t.connect(F$j.destination),F$k.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=F$G.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(F$k.loop=!0),F$k.playbackRate.setTargetAtTime?F$k.playbackRate.setTargetAtTime(F$Q.playbackRate,this.context.currentTime,.1):F$k.playbackRate.value=F$Q.playbackRate,F$k.start(0,this.startTime),!F$y&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},F$t.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(F$N.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},F$t._clearBufferSource=function(){if(this.bufferSource){var F$y=this.bufferSource;F$y.stop?F$y.stop(0):F$y.noteOff(0),F$y.disconnect(0),F$y.onended=null,F$j._tryCleanFailed||this._tryClearBuffer(F$y),this.bufferSource=null}},F$t._tryClearBuffer=function(F$y){try{F$y.buffer=null}catch(F$y){F$j._tryCleanFailed=!0}},F$t.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,F$Q.removeChannel(this),this.startHandler=null,this.completeHandler=null},F$t.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,F$Q.removeChannel(this)},F$t.resume=function(){this.startTime=this._pauseTime,this.play(!1)},F$W(0,F$t,"position",function(){return this.bufferSource?(F$G.now()-this._startTime)/1e3+this.startTime:0}),F$W(0,F$t,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),F$W(0,F$t,"volume",function(){return this._volume},function(F$y){this.isStopped||(this._volume=F$y,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(F$y,this.context.currentTime,.1):this.gain.gain.value=F$y)}),F$j._tryCleanFailed=!1,F$j}(),F$Wy=function(F$y){function F$j(){F$j.__super.call(this),this._w=0,this._h=0}F$D(F$j,"laya.resource.Bitmap",F$by);var F$t=F$j.prototype;return F$W(0,F$t,"width",function(){return this._w}),F$W(0,F$t,"height",function(){return this._h}),F$W(0,F$t,"source",function(){return this._source}),F$j}(),F$zy=function(F$j){function F$y(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,F$y.__super.call(this),this._interval=F$k.animationInterval,this._setUpNoticeType(1)}F$D(F$y,"laya.display.AnimationPlayerBase",F$j);var F$t=F$y.prototype;return F$t.play=function(F$y,F$j,F$t,F$k){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=!0),void 0===F$t&&(F$t=""),void 0===F$k&&(F$k=!0),this._isPlaying=!0,this.index="string"==typeof F$y?this._getFrameByLabel(F$y):F$y,this.loop=F$j,this._actionName=F$t,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$t._getFrameByLabel=function(F$y){var F$j=0;for(F$j=0;F$j<this._count;F$j++)if(this._labels[F$j]&&0<=this._labels[F$j].indexOf(F$y))return F$j;return 0},F$t._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},F$t._setControlNode=function(F$y){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=F$y)&&F$y!=this&&(F$y.on("display",this,this._checkResumePlaying),F$y.on("undisplay",this,this._checkResumePlaying))},F$t._setDisplay=function(F$y){F$j.prototype._setDisplay.call(this,F$y),this._checkResumePlaying()},F$t._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},F$t.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},F$t.addLabel=function(F$y,F$j){this._labels||(this._labels={}),this._labels[F$j]||(this._labels[F$j]=[]),this._labels[F$j].push(F$y)},F$t.removeLabel=function(F$y){if(F$y){if(this._labels)for(var F$j in this._labels)this._removeLabelFromLabelList(this._labels[F$j],F$y)}else this._labels=null},F$t._removeLabelFromLabelList=function(F$y,F$j){if(F$y)for(var F$t=F$y.length-1;0<=F$t;F$t--)F$y[F$t]==F$j&&F$y.splice(F$t,1)},F$t.gotoAndStop=function(F$y){this.index="string"==typeof F$y?this._getFrameByLabel(F$y):F$y,this.stop()},F$t._displayToIndex=function(F$y){},F$t.clear=function(){this.stop(),this._labels=null},F$W(0,F$t,"interval",function(){return this._interval},function(F$y){this._interval!=F$y&&(this._frameRateChanged=!0,this._interval=F$y,this._isPlaying&&0<F$y&&this.timerLoop(F$y,this,this._frameLoop,null,!0,!0))}),F$W(0,F$t,"isPlaying",function(){return this._isPlaying}),F$W(0,F$t,"index",function(){return this._index},function(F$y){if(this._index=F$y,this._displayToIndex(F$y),this._labels&&this._labels[F$y])for(var F$j=this._labels[F$y],F$t=0,F$k=F$j.length;F$t<F$k;F$t++)this.event("label",F$j[F$t])}),F$W(0,F$t,"count",function(){return this._count}),F$y.WRAP_POSITIVE=0,F$y.WRAP_REVERSE=1,F$y.WRAP_PINGPONG=2,F$y}(F$ly),F$Vy=function(F$j){function F$$(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,F$$.__super.call(this),this.overflow=F$$.VISIBLE,this._style=new F$jy(this),this._style.wordWrap=!1}F$D(F$$,"laya.display.Text",F$j);var F$y=F$$.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._lines=null,this._words&&(this._words.length=0,this._words=null)},F$y._getBoundPointsM=function(F$y){void 0===F$y&&(F$y=!1);var F$j=F$d.TEMP;return F$j.setTo(0,0,this.width,this.height),F$j._getBoundPoints()},F$y.getGraphicBounds=function(F$y){void 0===F$y&&(F$y=!1);var F$j=F$d.TEMP;return F$j.setTo(0,0,this.width,this.height),F$j},F$y._getCSSStyle=function(){return this._style},F$y.lang=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D){if(F$y=F$$.langPacks&&F$$.langPacks[F$y]?F$$.langPacks[F$y]:F$y,arguments.length<2)this._text=F$y;else{for(var F$l=0,F$r=arguments.length;F$l<F$r;F$l++)F$y=F$y.replace("{"+F$l+"}",arguments[F$l+1]);this._text=F$y}},F$y._isPassWordMode=function(){var F$y=this._style.password;return"prompt"in this&&this.prompt==this._text&&(F$y=!1),F$y},F$y._getPassWordTxt=function(F$y){var F$j;F$j="";for(var F$t=F$y.length;0<F$t;F$t--)F$j+="●";return F$j},F$y.renderText=function(F$y,F$j){var F$t=this.graphics;F$t.clear(!0);var F$k=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(F$G.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);F$G.context.font=F$k;var F$T=this.padding,F$Y=F$T[3],F$A="left",F$X=this._lines,F$I=this.leading+this._charSize.height,F$b=this._currBitmapFont;F$b&&(F$I=this.leading+F$b.getMaxHeight());var F$D=F$T[0];if(!F$b&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(F$A="right",F$Y=this._width-F$T[1]):"center"==this.align&&(F$A="center",F$Y=.5*this._width+F$T[3]-F$T[1])),0<this._height){var F$l=this._textHeight>this._height?"top":this.valign;"middle"===F$l?F$D=.5*(this._height-F$j*F$I)+F$T[0]-F$T[2]:"bottom"===F$l&&(F$D=this._height-F$j*F$I-F$T[2])}var F$r=this._style;if(F$b&&F$b.autoScaleSize)var F$$=F$b.fontSize/this.fontSize;if(this._clipPoint)if(F$t.save(),F$b&&F$b.autoScaleSize){var F$W=0,F$z=0;F$W=this._width?this._width-F$T[3]-F$T[1]:this._textWidth,F$z=this._height?this._height-F$T[0]-F$T[2]:this._textHeight,F$W*=F$$,F$z*=F$$,F$t.clipRect(F$T[3],F$T[0],F$W,F$z)}else F$t.clipRect(F$T[3],F$T[0],this._width?this._width-F$T[3]-F$T[1]:this._textWidth,this._height?this._height-F$T[0]-F$T[2]:this._textHeight);var F$V=F$r.password;"prompt"in this&&this.prompt==this._text&&(F$V=!1);for(var F$n=0,F$C=0,F$M=Math.min(this._lines.length,F$j+F$y)||1,F$_=F$y;F$_<F$M;F$_++){var F$e,F$v=F$X[F$_];if(F$V){var F$N=F$v.length;F$v="";for(var F$P=F$N;0<F$P;F$P--)F$v+="●"}if(F$n=F$Y-(this._clipPoint?this._clipPoint.x:0),F$C=F$D+F$I*F$_-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(F$A,F$n,F$C,F$_),F$b){var F$d=this.width;F$b.autoScaleSize&&(F$d=this.width*F$$),F$b.drawText(F$v,this,F$n,F$C,this.align,F$d)}else F$S.isWebGL?(this._words||(this._words=[]),(F$e=this._words.length>F$_-F$y?this._words[F$_-F$y]:new F$u).setText(F$v)):F$e=F$v,F$r.stroke?F$t.fillBorderText(F$e,F$n,F$C,F$k,this.color,F$r.strokeColor,F$r.stroke,F$A):F$t.fillText(F$e,F$n,F$C,F$k,this.color,F$A)}if(F$b&&F$b.autoScaleSize){var F$p=1/F$$;this.scale(F$p,F$p)}this._clipPoint&&F$t.restore(),this._startX=F$Y,this._startY=F$D},F$y.drawUnderline=function(F$y,F$j,F$t,F$k){var F$T=this._lineWidths[F$k];switch(F$y){case"center":F$j-=F$T/2;break;case"right":F$j-=F$T}F$t+=this._charSize.height,this._graphics.drawLine(F$j,F$t,F$j+F$T,F$t,this.underlineColor||this.color,1)},F$y.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);F$G.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new F$P(0,0)):this._clipPoint=null;var F$y=this._lines.length;if(this.overflow!=F$$.VISIBLE){var F$j=this.overflow==F$$.HIDDEN?Math.floor:Math.ceil;F$y=Math.min(F$y,F$j((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var F$t=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(F$t,F$y),this.repaint()},F$y.evalTextSize=function(){var F$y,F$j=NaN;F$y=Math.max.apply(this,this._lineWidths),F$j=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],F$y==this._textWidth&&F$j==this._textHeight||(this._textWidth=F$y,this._textHeight=F$j,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},F$y.checkEnabledViewportOrNot=function(){return this.overflow==F$$.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},F$y.changeText=function(F$y){this._text!==F$y&&(this.lang(F$y+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},F$y.parseLines=function(F$y){var F$j=this.wordWrap||this.overflow==F$$.HIDDEN;if(F$j)var F$t=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var F$k=F$o.contextMeasureText(F$$._testWord);F$S.isConchApp&&0===F$k.width&&0===F$k.height&&(F$k=F$o.contextMeasureText("W")),this._charSize.width=F$k.width,this._charSize.height=F$k.height||this.fontSize}for(var F$T=F$y.replace(/\r\n/g,"\n").split("\n"),F$Y=0,F$A=F$T.length;F$Y<F$A;F$Y++){var F$X=F$T[F$Y];F$j?this.parseLine(F$X,F$t):(this._lineWidths.push(this.getTextWidth(F$X)),this._lines.push(F$X))}},F$y.parseLine=function(F$y,F$j){F$G.context;var F$t,F$k=this._lines,F$T=0,F$Y=NaN,F$A=NaN,F$X=0;if((F$Y=this.getTextWidth(F$y))<=F$j)return F$k.push(F$y),void this._lineWidths.push(F$Y);F$Y=this._charSize.width,0==(F$T=Math.floor(F$j/F$Y))&&(F$T=1),F$A=F$Y=this.getTextWidth(F$y.substring(0,F$T));for(var F$I=F$T,F$b=F$y.length;F$I<F$b;F$I++)if(F$j<(F$A+=F$Y=this.getTextWidth(F$y.charAt(F$I))))if(this.wordWrap){var F$D=F$y.substring(F$X,F$I);if(F$D.charCodeAt(F$D.length-1)<255?(F$t=/(?:\w|-)+$/.exec(F$D))&&(F$I=F$t.index+F$X,0==F$t.index?F$I+=F$D.length:F$D=F$y.substring(F$X,F$I)):F$$.RightToLeft&&(F$t=/([\u0600-\u06FF])+$/.exec(F$D))&&(F$I=F$t.index+F$X,0==F$t.index?F$I+=F$D.length:F$D=F$y.substring(F$X,F$I)),F$k.push(F$D),this._lineWidths.push(F$A-F$Y),!((F$X=F$I)+F$T<F$b)){F$k.push(F$y.substring(F$X,F$b)),this._lineWidths.push(this.getTextWidth(F$k[F$k.length-1])),F$X=-1;break}F$I+=F$T,F$A=F$Y=this.getTextWidth(F$y.substring(F$X,F$I)),F$I--}else if(this.overflow==F$$.HIDDEN)return F$k.push(F$y.substring(0,F$I)),void this._lineWidths.push(this.getTextWidth(F$k[F$k.length-1]));this.wordWrap&&-1!=F$X&&(F$k.push(F$y.substring(F$X,F$b)),this._lineWidths.push(this.getTextWidth(F$k[F$k.length-1])))},F$y.getTextWidth=function(F$y){return this._currBitmapFont?this._currBitmapFont.getTextWidth(F$y):F$o.contextMeasureText(F$y).width},F$y.getWordWrapWidth=function(){var F$y=this.padding,F$j=NaN;return(F$j=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(F$j=this.wordWrap?100:F$G.width),F$j<=0&&(F$j=100),F$j-F$y[3]-F$y[1]},F$y.getCharPoint=function(F$y,F$j){this._isChanged&&F$N.timer.runCallLater(this,this.typeset);for(var F$t=0,F$k=this._lines,F$T=0,F$Y=0,F$A=F$k.length;F$Y<F$A;F$Y++){if(F$y<(F$t+=F$k[F$Y].length)){var F$X=F$Y;break}F$T=F$t}var F$I=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;F$G.context.font=F$I;var F$b=this.getTextWidth(this._text.substring(F$T,F$y));return(F$j||new F$P).setTo(this._startX+F$b-(this._clipPoint?this._clipPoint.x:0),this._startY+F$X*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},F$W(0,F$y,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(F$y){F$y!=this._width&&(F$N.superSet(F$ly,this,"width",F$y),this.isChanged=!0)}),F$W(0,F$y,"textWidth",function(){return this._isChanged&&F$N.timer.runCallLater(this,this.typeset),this._textWidth}),F$W(0,F$y,"height",function(){return this._height?this._height:this.textHeight},function(F$y){F$y!=this._height&&(F$N.superSet(F$ly,this,"height",F$y),this.isChanged=!0)}),F$W(0,F$y,"textHeight",function(){return this._isChanged&&F$N.timer.runCallLater(this,this.typeset),this._textHeight}),F$W(0,F$y,"padding",function(){return this._getCSSStyle().padding},function(F$y){this._getCSSStyle().padding=F$y,this.isChanged=!0}),F$W(0,F$y,"bold",function(){return this._getCSSStyle().bold},function(F$y){this._getCSSStyle().bold=F$y,this.isChanged=!0}),F$W(0,F$y,"text",function(){return this._text||""},function(F$y){this._text!==F$y&&(this.lang(F$y+""),this.isChanged=!0,this.event("change"))}),F$W(0,F$y,"color",function(){return this._getCSSStyle().color},function(F$y){this._getCSSStyle().color!=F$y&&(this._getCSSStyle().color=F$y,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),F$W(0,F$y,"font",function(){return this._getCSSStyle().fontFamily},function(F$y){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),F$$._bitmapFonts&&F$$._bitmapFonts[F$y]&&(this._currBitmapFont=F$$._bitmapFonts[F$y]),this._getCSSStyle().fontFamily=F$y,this.isChanged=!0}),F$W(0,F$y,"fontSize",function(){return this._getCSSStyle().fontSize},function(F$y){this._getCSSStyle().fontSize=F$y,this.isChanged=!0}),F$W(0,F$y,"italic",function(){return this._getCSSStyle().italic},function(F$y){this._getCSSStyle().italic=F$y,this.isChanged=!0}),F$W(0,F$y,"align",function(){return this._getCSSStyle().align},function(F$y){this._getCSSStyle().align=F$y,this.isChanged=!0}),F$W(0,F$y,"valign",function(){return this._getCSSStyle().valign},function(F$y){this._getCSSStyle().valign=F$y,this.isChanged=!0}),F$W(0,F$y,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(F$y){this._getCSSStyle().wordWrap=F$y,this.isChanged=!0}),F$W(0,F$y,"leading",function(){return this._getCSSStyle().leading},function(F$y){this._getCSSStyle().leading=F$y,this.isChanged=!0}),F$W(0,F$y,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(F$y){this._getCSSStyle().backgroundColor=F$y,this.isChanged=!0}),F$W(0,F$y,"borderColor",function(){return this._getCSSStyle().borderColor},function(F$y){this._getCSSStyle().borderColor=F$y,this.isChanged=!0}),F$W(0,F$y,"stroke",function(){return this._getCSSStyle().stroke},function(F$y){this._getCSSStyle().stroke=F$y,this.isChanged=!0}),F$W(0,F$y,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(F$y){this._getCSSStyle().strokeColor=F$y,this.isChanged=!0}),F$W(0,F$y,"isChanged",null,function(F$y){this._isChanged!==F$y&&(this._isChanged=F$y)&&F$N.timer.callLater(this,this.typeset)}),F$W(0,F$y,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(F$y){if(!(this.overflow!=F$$.SCROLL||this.textWidth<this._width)&&this._clipPoint){F$y=F$y<this.padding[3]?this.padding[3]:F$y;var F$j=this._textWidth-this._width;F$y=F$j<F$y?F$j:F$y;var F$t=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=F$y,this.renderText(this._lastVisibleLineIndex,F$t)}}),F$W(0,F$y,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(F$y){if(!(this.overflow!=F$$.SCROLL||this.textHeight<this._height)&&this._clipPoint){F$y=F$y<this.padding[0]?this.padding[0]:F$y;var F$j=this._textHeight-this._height,F$t=(F$y=F$j<F$y?F$j:F$y)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=F$t;var F$k=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=F$y,this.renderText(F$t,F$k)}}),F$W(0,F$y,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),F$W(0,F$y,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),F$W(0,F$y,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),F$W(0,F$y,"underlineColor",function(){return this._underlineColor},function(F$y){this._underlineColor=F$y,this._isChanged=!0,this.typeset()}),F$$.registerBitmapFont=function(F$y,F$j){F$$._bitmapFonts||(F$$._bitmapFonts={}),F$$._bitmapFonts[F$y]=F$j},F$$.unregisterBitmapFont=function(F$y,F$j){if(void 0===F$j&&(F$j=!0),F$$._bitmapFonts&&F$$._bitmapFonts[F$y]){var F$t=F$$._bitmapFonts[F$y];F$j&&F$t.destroy(),delete F$$._bitmapFonts[F$y]}},F$$.setTextRightToLeft=function(){var F$y;(F$y=F$G.canvas.source.style).display="none",F$y.position="absolute",F$y.direction="rtl",F$S._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,F$G.document.body.appendChild(F$G.canvas.source)},F$$.supportFont=function(F$y){F$G.context.font="10px sans-serif";var F$j=F$o.contextMeasureText("abcji").width;F$G.context.font="10px "+F$y;var F$t=F$o.contextMeasureText("abcji").width;return console.log(F$j,F$t),F$j!==F$t},F$$._testWord="游",F$$.langPacks=null,F$$.VISIBLE="visible",F$$.SCROLL="scroll",F$$.HIDDEN="hidden",F$$.CharacterCache=!0,F$$.RightToLeft=!1,F$$._bitmapFonts=null,F$I(F$$,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),F$$}(F$ly),F$ny=function(F$l){function F$A(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",F$A.__super.call(this),this.offset=new F$P,this._canvasTransform=new F$U,this._previousOrientation=F$G.window.orientation;var F$j=this;this.transform=F$U.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var F$y=F$G.window,F$t=this;F$y.addEventListener("focus",function(){F$j._isFocused=!0,F$t.event("focus"),F$t.event("focuschange")}),F$y.addEventListener("blur",function(){F$j._isFocused=!1,F$t.event("blur"),F$t.event("focuschange"),F$t._isInputting()&&(F$ey.inputElement.target.focus=!1)});var F$k="visibilityState",F$T="visibilitychange",F$Y=F$y.document;void 0!==F$Y.hidden?(F$T="visibilitychange",F$k="visibilityState"):void 0!==F$Y.mozHidden?(F$T="mozvisibilitychange",F$k="mozVisibilityState"):void 0!==F$Y.msHidden?(F$T="msvisibilitychange",F$k="msVisibilityState"):void 0!==F$Y.webkitHidden&&(F$T="webkitvisibilitychange",F$k="webkitVisibilityState"),F$y.document.addEventListener(F$T,function(){"hidden"==F$G.document[F$k]?F$t._setStageVisible(!1):F$t._setStageVisible(!0)}),F$y.document.addEventListener("qbrowserVisibilityChange",function(F$y){F$t._setStageVisible(!F$y.hidden)}),F$y.addEventListener("resize",function(){var F$y=F$G.window.orientation;null!=F$y&&F$y!=F$j._previousOrientation&&F$t._isInputting()&&(F$ey.inputElement.target.focus=!1),F$j._previousOrientation=F$y,F$t._isInputting()||F$t._resetCanvas()}),F$y.addEventListener("orientationchange",function(F$y){F$t._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),F$G.onMobile&&this.on("mousedown",this,this._onmouseMove)}F$D(F$A,"laya.display.Stage",F$l);var F$y=F$A.prototype;return F$y._setStageVisible=function(F$y){this._isVisibility!=F$y&&(this._isVisibility=F$y,this._isVisibility||this._isInputting()&&(F$ey.inputElement.target.focus=!1),this.event("visibilitychange"))},F$y._isInputting=function(){return F$G.onMobile&&F$ey.isInputting},F$y._changeCanvasSize=function(){this.setScreenSize(F$G.clientWidth*F$G.pixelRatio,F$G.clientHeight*F$G.pixelRatio)},F$y._resetCanvas=function(){if(this.screenAdaptationEnabled){var F$y=F$S._mainCanvas;F$y.source.style;F$y.size(1,1),F$N.timer.once(100,this,this._changeCanvasSize)}},F$y.setScreenSize=function(F$y,F$j){var F$t=!1;if("none"!==this._screenMode&&(F$t=(F$y/F$j<1?"vertical":"horizontal")!==this._screenMode)){var F$k=F$j;F$j=F$y,F$y=F$k}this.canvasRotation=F$t;var F$T=F$S._mainCanvas,F$Y=F$T.source.style,F$A=this._canvasTransform.identity(),F$X=this._scaleMode,F$I=F$y/this.designWidth,F$b=F$j/this.designHeight,F$D=this.designWidth,F$l=this.designHeight,F$r=F$y,F$$=F$j,F$W=F$G.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,F$X){case"noscale":F$I=F$b=1,F$r=this.designWidth,F$$=this.designHeight;break;case"showall":F$I=F$b=Math.min(F$I,F$b),F$D=F$r=Math.round(this.designWidth*F$I),F$l=F$$=Math.round(this.designHeight*F$b);break;case"noborder":F$I=F$b=Math.max(F$I,F$b),F$r=Math.round(this.designWidth*F$I),F$$=Math.round(this.designHeight*F$b);break;case"full":F$I=F$b=1,this._width=F$D=F$y,this._height=F$l=F$j;break;case"fixedwidth":F$b=F$I,this._height=F$l=Math.round(F$j/F$I);break;case"fixedheight":F$I=F$b,this._width=F$D=Math.round(F$y/F$b);break;case"fixedauto":F$y/F$j<this.designWidth/this.designHeight?(F$b=F$I,this._height=F$l=Math.round(F$j/F$I)):(F$I=F$b,this._width=F$D=Math.round(F$y/F$b))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,F$D=F$D+1&2147483646,F$l=F$l+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),F$I*=this.scaleX,F$b*=this.scaleY,1===F$I&&1===F$b?this.transform.identity():(this.transform.a=this._formatData(F$I/(F$r/F$D)),this.transform.d=this._formatData(F$b/(F$$/F$l)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),F$T.size(F$D,F$l),F$m.changeWebGLSize(F$D,F$l),F$A.scale(F$r/F$D/F$W,F$$/F$l/F$W),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(F$y-F$r)/F$W:this.offset.x=.5*(F$y-F$r)/F$W,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(F$j-F$$)/F$W:this.offset.y=.5*(F$j-F$$)/F$W,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),F$A.translate(this.offset.x,this.offset.y),this.canvasDegree=0,F$t&&("horizontal"===this._screenMode?(F$A.rotate(Math.PI/2),F$A.translate(F$j/F$W,0),this.canvasDegree=90):(F$A.rotate(-Math.PI/2),F$A.translate(0,F$y/F$W),this.canvasDegree=-90)),F$A.a=this._formatData(F$A.a),F$A.d=this._formatData(F$A.d),F$A.tx=this._formatData(F$A.tx),F$A.ty=this._formatData(F$A.ty),F$Y.transformOrigin=F$Y.webkitTransformOrigin=F$Y.msTransformOrigin=F$Y.mozTransformOrigin=F$Y.oTransformOrigin="0px 0px 0px",F$Y.transform=F$Y.webkitTransform=F$Y.msTransform=F$Y.mozTransform=F$Y.oTransform="matrix("+F$A.toString()+")",F$A.translate(parseInt(F$Y.left)||0,parseInt(F$Y.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},F$y._formatData=function(F$y){return Math.abs(F$y)<1e-6?0:Math.abs(1-F$y)<.001?0<F$y?1:-1:F$y},F$y.getMousePoint=function(){return F$P.TEMP.setTo(this.mouseX,this.mouseY)},F$y.repaint=function(){this._repaint=1},F$y.parentRepaint=function(){},F$y._loop=function(){return this.render(F$S.context,0,0),!0},F$y._onmouseMove=function(F$y){this._mouseMoveTime=F$G.now()},F$y.getTimeFromFrameStart=function(){return F$G.now()-this._frameStartTime},F$y.render=function(F$y,F$j,F$t){if("sleep"===this._frameRate&&!F$S.isConchApp){var F$k=F$G.now();if(!(1e3<=F$k-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(F$B.loopCount++,F$z.instance.runEvent(),F$N.timer._update()));this._frameStartTime=F$k}if(this._renderCount++,F$S.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=F$G.now();var F$T="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),F$Y=this._renderCount%2==0;if(F$B.renderSlow=!F$T,F$T||F$Y||F$S.isConchApp){var F$A;F$B.loopCount++,F$z.instance.runEvent(),F$N.timer._update(),F$m.update3DLoop();var F$X=0,F$I=0;if(F$S.isConchNode)for(F$X=0,F$I=this._scenes.length;F$X<F$I;F$X++)(F$A=this._scenes[F$X])&&F$A._updateSceneConch();else for(F$X=0,F$I=this._scenes.length;F$X<F$I;F$X++)(F$A=this._scenes[F$X])&&F$A._updateScene();if(F$S.isConchNode){var F$b=F$ly.CustomList;for(F$X=0,F$I=F$b.length;F$X<F$I;F$X++){var F$D=F$b[F$X];F$D.customRender(F$D.customContext,0,0)}return}}F$S.isConchNode||this.renderingEnabled&&(F$T||!F$Y||F$S.isConchWebGL)&&(F$S.isWebGL?F$S.WebGL.mainContext&&!F$S.WebGL.mainContext.isContextLost()&&(F$y.clear(),F$l.prototype.render.call(this,F$y,F$j,F$t),F$B._show&&F$B._sp&&F$B._sp.render(F$y,F$j,F$t),F$m.clear(this._bgColor),F$m.beginFlush(),F$y.flush(),F$m.endFinish(),F$i.instance&&F$i.getInstance().endDispose()):(F$m.clear(this._bgColor),F$l.prototype.render.call(this,F$y,F$j,F$t),F$B._show&&F$B._sp&&F$B._sp.render(F$y,F$j,F$t)))}else this._renderCount%5==0&&(F$B.loopCount++,F$z.instance.runEvent(),F$N.timer._update())},F$y._requestFullscreen=function(){var F$y=F$G.document.documentElement;F$y.requestFullscreen?F$y.requestFullscreen():F$y.mozRequestFullScreen?F$y.mozRequestFullScreen():F$y.webkitRequestFullscreen?F$y.webkitRequestFullscreen():F$y.msRequestFullscreen&&F$y.msRequestFullscreen()},F$y._fullScreenChanged=function(){F$N.stage.event("fullscreenchange")},F$y.exitFullscreen=function(){var F$y=F$G.document;F$y.exitFullscreen?F$y.exitFullscreen():F$y.mozCancelFullScreen?F$y.mozCancelFullScreen():F$y.webkitExitFullscreen&&F$y.webkitExitFullscreen()},F$W(0,F$y,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),F$W(0,F$y,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),F$W(0,F$y,"frameRate",function(){return this._frameRate},function(F$y){if(this._frameRate=F$y,F$S.isConchApp)switch(this._frameRate){case"slow":F$G.window.conch&&F$G.window.conchConfig.setSlowFrame&&F$G.window.conchConfig.setSlowFrame(!0);break;case"fast":F$G.window.conch&&F$G.window.conchConfig.setSlowFrame&&F$G.window.conchConfig.setSlowFrame(!1);break;case"mouse":F$G.window.conch&&F$G.window.conchConfig.setMouseFrame&&F$G.window.conchConfig.setMouseFrame(2e3);break;case"sleep":F$G.window.conch&&F$G.window.conchConfig.setLimitFPS&&F$G.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),F$W(0,F$y,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),F$W(0,F$y,"width",F$l.prototype._$get_width,function(F$y){this.designWidth=F$y,F$N.superSet(F$ly,this,"width",F$y),F$N.timer.callLater(this,this._changeCanvasSize)}),F$W(0,F$y,"alignH",function(){return this._alignH},function(F$y){this._alignH=F$y,F$N.timer.callLater(this,this._changeCanvasSize)}),F$W(0,F$y,"isFocused",function(){return this._isFocused}),F$W(0,F$y,"height",F$l.prototype._$get_height,function(F$y){this.designHeight=F$y,F$N.superSet(F$ly,this,"height",F$y),F$N.timer.callLater(this,this._changeCanvasSize)}),F$W(0,F$y,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||F$U.create()},F$l.prototype._$set_transform),F$W(0,F$y,"isVisibility",function(){return this._isVisibility}),F$W(0,F$y,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),F$W(0,F$y,"scaleMode",function(){return this._scaleMode},function(F$y){this._scaleMode=F$y,F$N.timer.callLater(this,this._changeCanvasSize)}),F$W(0,F$y,"alignV",function(){return this._alignV},function(F$y){this._alignV=F$y,F$N.timer.callLater(this,this._changeCanvasSize)}),F$W(0,F$y,"bgColor",function(){return this._bgColor},function(F$y){this._bgColor=F$y,this.conchModel&&this.conchModel.bgColor(F$y),F$S.isWebGL&&(F$y?F$A._wgColor=F$h.create(F$y)._color:F$G.onMiniGame||(F$A._wgColor=null)),F$G.onLimixiu?F$A._wgColor=F$h.create(F$y)._color:F$S.canvas.style.background=F$y||"none"}),F$W(0,F$y,"mouseX",function(){return Math.round(F$z.instance.mouseX/this.clientScaleX)}),F$W(0,F$y,"mouseY",function(){return Math.round(F$z.instance.mouseY/this.clientScaleY)}),F$W(0,F$y,"screenMode",function(){return this._screenMode},function(F$y){this._screenMode=F$y}),F$W(0,F$y,"visible",F$l.prototype._$get_visible,function(F$y){this.visible!==F$y&&(F$N.superSet(F$ly,this,"visible",F$y),F$S._mainCanvas.source.style.visibility=F$y?"visible":"hidden")}),F$W(0,F$y,"fullScreenEnabled",null,function(F$y){var F$j=F$G.document,F$t=F$S.canvas;F$y?(F$t.addEventListener("mousedown",this._requestFullscreen),F$t.addEventListener("touchstart",this._requestFullscreen),F$j.addEventListener("fullscreenchange",this._fullScreenChanged),F$j.addEventListener("mozfullscreenchange",this._fullScreenChanged),F$j.addEventListener("webkitfullscreenchange",this._fullScreenChanged),F$j.addEventListener("msfullscreenchange",this._fullScreenChanged)):(F$t.removeEventListener("mousedown",this._requestFullscreen),F$t.removeEventListener("touchstart",this._requestFullscreen),F$j.removeEventListener("fullscreenchange",this._fullScreenChanged),F$j.removeEventListener("mozfullscreenchange",this._fullScreenChanged),F$j.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),F$j.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),F$A.SCALE_NOSCALE="noscale",F$A.SCALE_EXACTFIT="exactfit",F$A.SCALE_SHOWALL="showall",F$A.SCALE_NOBORDER="noborder",F$A.SCALE_FULL="full",F$A.SCALE_FIXED_WIDTH="fixedwidth",F$A.SCALE_FIXED_HEIGHT="fixedheight",F$A.SCALE_FIXED_AUTO="fixedauto",F$A.ALIGN_LEFT="left",F$A.ALIGN_RIGHT="right",F$A.ALIGN_CENTER="center",F$A.ALIGN_TOP="top",F$A.ALIGN_MIDDLE="middle",F$A.ALIGN_BOTTOM="bottom",F$A.SCREEN_NONE="none",F$A.SCREEN_HORIZONTAL="horizontal",F$A.SCREEN_VERTICAL="vertical",F$A.FRAME_FAST="fast",F$A.FRAME_SLOW="slow",F$A.FRAME_MOUSE="mouse",F$A.FRAME_SLEEP="sleep",F$A.FRAME_MOUSE_THREDHOLD=2e3,F$I(F$A,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),F$A}(F$ly),F$Cy=(function(F$y){function F$j(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,F$j.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}F$D(F$j,"laya.media.SoundNode",F$ly);var F$t=F$j.prototype;F$t._onParentChange=function(){this.target=this.parent},F$t.play=function(F$y,F$j){void 0===F$y&&(F$y=1),isNaN(F$y)&&(F$y=1),this.url&&(this.stop(),this._channel=F$Q.playSound(this.url,F$y,null,F$j))},F$t.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},F$t._setPlayAction=function(F$y,F$j,F$t,F$k){void 0===F$k&&(F$k=!0),this[F$t]&&F$y&&(F$k?F$y.on(F$j,this,this[F$t]):F$y.off(F$j,this,this[F$t]))},F$t._setPlayActions=function(F$y,F$j,F$t,F$k){if(void 0===F$k&&(F$k=!0),F$y&&F$j){var F$T,F$Y=F$j.split(","),F$A=0;for(F$T=F$Y.length,F$A=0;F$A<F$T;F$A++)this._setPlayAction(F$y,F$Y[F$A],F$t,F$k)}},F$W(0,F$t,"playEvent",null,function(F$y){(this._playEvents=F$y)&&this._tar&&this._setPlayActions(this._tar,F$y,"play")}),F$W(0,F$t,"target",null,function(F$y){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=F$y,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),F$W(0,F$t,"stopEvent",null,function(F$y){(this._stopEvents=F$y)&&this._tar&&this._setPlayActions(this._tar,F$y,"stop")})}(),function(F$y){function F$j(){this._src=null,this._onload=null,this._onerror=null,F$j.__super.call(this)}F$D(F$j,"laya.resource.FileBitmap",F$Wy);var F$t=F$j.prototype;return F$W(0,F$t,"src",function(){return this._src},function(F$y){this._src=F$y}),F$W(0,F$t,"onload",null,function(F$y){}),F$W(0,F$t,"onerror",null,function(F$y){}),F$j}()),F$My=function(F$y){function F$t(F$y,F$j){this._is2D=!1,F$t.__super.call(this);var F$k=this;if(this._source=this,"2D"===F$y||"AUTO"===F$y&&!F$S.isWebGL){this._is2D=!0,this._source=F$j||F$G.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var F$T=this;F$T.getContext=function(F$y,F$j){if(F$k._ctx)return F$k._ctx;var F$t=F$k._ctx=F$k._source.getContext(F$y,F$j);return F$t&&(F$t._canvas=F$T,F$S.isFlash||F$G.onLimixiu||(F$t.size=function(F$y,F$j){})),F$t}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}F$D(F$t,"laya.resource.HTMLCanvas",F$Wy);var F$j=F$t.prototype;return F$j.clear=function(){this._ctx&&this._ctx.clear()},F$j.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$j.release=function(){},F$j._setContext=function(F$y){this._ctx=F$y},F$j.getContext=function(F$y,F$j){return this._ctx?this._ctx:this._ctx=F$t._createContext(this)},F$j.getMemSize=function(){return 0},F$j.size=function(F$y,F$j){(this._w!=F$y||this._h!=F$j||this._source&&(this._source.width!=F$y||this._source.height!=F$j))&&(this._w=F$y,this._h=F$j,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(F$y,F$j),this._source&&(this._source.height=F$j,this._source.width=F$y))},F$j.getCanvas=function(){return this._source},F$j.toBase64=function(F$y,F$j,F$t){if(this._source)if(F$S.isConchApp&&this._source.toBase64)this._source.toBase64(F$y,F$j,F$t);else{var F$k=this._source.toDataURL(F$y,F$j);F$t.call(this,F$k)}},F$W(0,F$j,"context",function(){return this._ctx}),F$W(0,F$j,"asBitmap",null,function(F$y){}),F$t.create=function(F$y,F$j){return new F$t(F$y,F$j)},F$t.TYPE2D="2D",F$t.TYPE3D="3D",F$t.TYPEAUTO="AUTO",F$t._createContext=null,F$t}(),F$_y=(function(F$y){function F$I(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){throw F$I.__super.call(this),new Error("不允许new！")}F$D(F$I,"laya.resource.HTMLSubImage",F$Wy),F$I.create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){return void 0===F$X&&(F$X=!1),new F$I(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X)}}(),function(F$y){function F$l(){this._frames=null,this._url=null,F$l.__super.call(this),this._setControlNode(this)}F$D(F$l,"laya.display.Animation",F$y);var F$j=F$l.prototype;F$j.destroy=function(F$y){void 0===F$y&&(F$y=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,F$y),this._frames=null,this._labels=null},F$j.play=function(F$y,F$j,F$t,F$k){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=!0),void 0===F$t&&(F$t=""),void 0===F$k&&(F$k=!0),F$t&&this._setFramesFromCache(F$t,F$k),this._isPlaying=!0,this.index="string"==typeof F$y?this._getFrameByLabel(F$y):F$y,this.loop=F$j,this._actionName=F$t,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},F$j._setFramesFromCache=function(F$y,F$j){var F$t;return void 0===F$j&&(F$j=!1),this._url&&(F$y=this._url+"#"+F$y),F$y&&F$l.framesMap[F$y]?((F$t=F$l.framesMap[F$y])instanceof Array?(this._frames=F$l.framesMap[F$y],this._count=this._frames.length):(F$t.nodeRoot&&(F$l.framesMap[F$y]=this._parseGraphicAnimationByData(F$t),F$t=F$l.framesMap[F$y]),this._frames=F$t.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=F$t.interval),this._labels=this._copyLabels(F$t.labels)),!0):(F$j&&console.log("ani not found:",F$y),!1)},F$j._copyLabels=function(F$y){if(!F$y)return null;var F$j,F$t;for(F$t in F$j={},F$y)F$j[F$t]=F$o.copyArray([],F$y[F$t]);return F$j},F$j._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&F$y.prototype._frameLoop.call(this)},F$j._displayToIndex=function(F$y){this._frames&&(this.graphics=this._frames[F$y])},F$j.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},F$j.loadImages=function(F$y,F$j){return void 0===F$j&&(F$j=""),this._url="",this._setFramesFromCache(F$j)||(this.frames=F$l.framesMap[F$j]?F$l.framesMap[F$j]:F$l.createFrames(F$y,F$j)),this},F$j.loadAtlas=function(F$j,F$t,F$k){void 0===F$k&&(F$k=""),this._url="";var F$T=this;function F$y(F$y){F$j===F$y&&(F$T.frames=F$l.framesMap[F$k]?F$l.framesMap[F$k]:F$l.createFrames(F$j,F$k),F$t&&F$t.run())}return F$T._setFramesFromCache(F$k)||(F$Xy.getAtlas(F$j)?F$y(F$j):F$N.loader.load(F$j,F$C.create(null,F$y,[F$j]),null,"atlas")),this},F$j.loadAnimation=function(F$y,F$j,F$t){this._url=F$y;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,F$j&&F$j.run()):!F$t||F$Xy.getAtlas(F$t)?this._loadAnimationData(F$y,F$j,F$t):F$N.loader.load(F$t,F$C.create(this,this._loadAnimationData,[F$y,F$j,F$t]),null,"atlas"),this},F$j._loadAnimationData=function(F$X,F$I,F$y){var F$b=this;if(!F$y||F$Xy.getAtlas(F$y)){var F$D=this;F$Xy.getRes(F$X)?F$j(F$X):F$N.loader.load(F$X,F$C.create(null,F$j,[F$X]),null,"json"),F$Xy.clearRes(F$X)}else console.warn("atlas load fail:"+F$y);function F$j(F$y){if(F$Xy.getRes(F$y)&&F$X===F$y){var F$j;if(F$l.framesMap[F$X+"#"])F$D._setFramesFromCache(F$b._actionName,!0),F$b.index=0,F$b._checkResumePlaying();else{var F$t=F$D._parseGraphicAnimation(F$Xy.getRes(F$X));if(!F$t)return;var F$k,F$T=F$t.animationList,F$Y=0,F$A=F$T.length;for(F$Y=0;F$Y<F$A;F$Y++)F$j=F$T[F$Y],F$l.framesMap[F$X+"#"+F$j.name]=F$j,F$k||(F$k=F$j);F$k&&(F$l.framesMap[F$X+"#"]=F$k,F$D._setFramesFromCache(F$b._actionName,!0),F$b.index=0),F$b._checkResumePlaying()}F$I&&F$I.run()}}},F$j._parseGraphicAnimation=function(F$y){return F$Ny.parseAnimationData(F$y)},F$j._parseGraphicAnimationByData=function(F$y){return F$Ny.parseAnimationByData(F$y)},F$W(0,F$j,"frames",function(){return this._frames},function(F$y){(this._frames=F$y)&&(this._count=F$y.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),F$W(0,F$j,"autoPlay",null,function(F$y){F$y?this.play():this.stop()}),F$W(0,F$j,"source",null,function(F$y){-1<F$y.indexOf(".ani")?this.loadAnimation(F$y):-1<F$y.indexOf(".json")||-1<F$y.indexOf("als")||-1<F$y.indexOf("atlas")?this.loadAtlas(F$y):this.loadImages(F$y.split(","))}),F$W(0,F$j,"autoAnimation",null,function(F$y){this.play(0,!0,F$y,!1)}),F$l.createFrames=function(F$y,F$j){var F$t,F$k,F$T=0,F$Y=0;if("string"==typeof F$y){var F$A=F$Xy.getAtlas(F$y);if(F$A&&F$A.length)for(F$t=[],F$T=0,F$Y=F$A.length;F$T<F$Y;F$T++)(F$k=new F$m.createGraphics).drawTexture(F$Xy.getRes(F$A[F$T]),0,0),F$t.push(F$k)}else if(F$y instanceof Array)for(F$t=[],F$T=0,F$Y=F$y.length;F$T<F$Y;F$T++)(F$k=new F$m.createGraphics).loadImage(F$y[F$T],0,0),F$t.push(F$k);return F$j&&(F$l.framesMap[F$j]=F$t),F$t},F$l.clearCache=function(F$y){var F$j,F$t=F$l.framesMap,F$k=F$y+"#";for(F$j in F$t)F$j!==F$y&&0!=F$j.indexOf(F$k)||delete F$l.framesMap[F$j]},F$l.framesMap={}}(F$zy),function(F$y){function F$Y(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,F$Y.__super.call(this),null==F$Y._sortIndexFun&&(F$Y._sortIndexFun=F$v.sortByKey("index",!1,!0))}F$D(F$Y,"laya.display.FrameAnimation",F$y);var F$j=F$Y.prototype;return F$j._setUp=function(F$y,F$j){this._labels=null,this._animationNewFrames=null,this._targetDic=F$y,this._animationData=F$j,this.interval=1e3/F$j.frameRate,F$j.parsed?(this._count=F$j.count,this._labels=F$j.labels,this._animationNewFrames=F$j.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),F$j.parsed=!0,F$j.labels=this._labels,F$j.count=this._count,F$j.animationNewFrames=this._animationNewFrames},F$j.clear=function(){F$y.prototype.clear.call(this),this._targetDic=null,this._animationData=null},F$j._displayToIndex=function(F$y){if(this._animationData){F$y<0&&(F$y=0),F$y>this._count&&(F$y=this._count);var F$j=this._animationData.nodes,F$t=0,F$k=F$j.length;for(F$t=0;F$t<F$k;F$t++)this._displayNodeToFrame(F$j[F$t],F$y)}},F$j._displayNodeToFrame=function(F$y,F$j,F$t){F$t||(F$t=this._targetDic);var F$k=F$t[F$y.target];if(F$k){var F$T,F$Y,F$A,F$X=F$y.frames,F$I=F$y.keys,F$b=0,F$D=F$I.length;for(F$b=0;F$b<F$D;F$b++)F$A=(F$Y=F$X[F$T=F$I[F$b]]).length>F$j?F$Y[F$j]:F$Y[F$Y.length-1],F$k[F$T]=F$A}},F$j._calculateDatas=function(){if(this._animationData){var F$y,F$j=this._animationData.nodes,F$t=0,F$k=F$j.length;for(F$t=this._count=0;F$t<F$k;F$t++)F$y=F$j[F$t],this._calculateNodeKeyFrames(F$y);this._count+=1}},F$j._calculateNodeKeyFrames=function(F$y){var F$j,F$t,F$k=F$y.keyframes,F$T=F$y.target;for(F$j in F$y.frames||(F$y.frames={}),F$y.keys?F$y.keys.length=0:F$y.keys=[],F$y.initValues||(F$y.initValues={}),F$k)F$t=F$k[F$j],F$y.frames[F$j]||(F$y.frames[F$j]=[]),this._targetDic&&this._targetDic[F$T]&&(F$y.initValues[F$j]=this._targetDic[F$T][F$j]),F$t.sort(F$Y._sortIndexFun),F$y.keys.push(F$j),this._calculateNodePropFrames(F$t,F$y.frames[F$j],F$j,F$T)},F$j.resetToInitState=function(){if(this._targetDic&&this._animationData){var F$y,F$j,F$t=this._animationData.nodes,F$k=0,F$T=F$t.length;for(F$k=0;F$k<F$T;F$k++)if(F$j=(F$y=F$t[F$k]).initValues){var F$Y,F$A=this._targetDic[F$y.target];if(F$A)for(F$Y in F$j)F$A[F$Y]=F$j[F$Y]}}},F$j._calculateNodePropFrames=function(F$y,F$j,F$t,F$k){var F$T=0,F$Y=F$y.length-1;if(0<F$Y){for(F$j.length=F$y[F$Y].index+1,F$T=0;F$T<F$Y;F$T++)this._dealKeyFrame(F$y[F$T]),this._calculateFrameValues(F$y[F$T],F$y[F$T+1],F$j);this._dealKeyFrame(F$y[F$T])}0==F$Y&&(F$j[F$y[0].index]=F$y[0].value,this._animationNewFrames&&(this._animationNewFrames[F$y[0].index]=!0))},F$j._dealKeyFrame=function(F$y){F$y.label&&""!=F$y.label&&this.addLabel(F$y.label,F$y.index)},F$j._calculateFrameValues=function(F$y,F$j,F$t){var F$k,F$T=0,F$Y=F$y.index,F$A=F$j.index,F$X=F$y.value,F$I=F$j.value-F$y.value,F$b=F$A-F$Y;if(F$A>this._count&&(this._count=F$A),F$y.tween)for(null==(F$k=F$s[F$y.tweenMethod])&&(F$k=F$s.linearNone),F$T=F$Y;F$T<F$A;F$T++)F$t[F$T]=F$k(F$T-F$Y,F$X,F$I,F$b),this._animationNewFrames&&(this._animationNewFrames[F$T]=!0);else for(F$T=F$Y;F$T<F$A;F$T++)F$t[F$T]=F$X;this._animationNewFrames&&(this._animationNewFrames[F$y.index]=!0,this._animationNewFrames[F$j.index]=!0),F$t[F$j.index]=F$j.value},F$Y._sortIndexFun=null,F$Y}(F$zy)),F$ey=function(F$j){function F$T(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",F$T.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=F$Vy.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}F$D(F$T,"laya.display.Input",F$j);var F$y=F$T.prototype;return F$y.setSelection=function(F$y,F$j){this.focus=!0,laya.display.Input.inputElement.selectionStart=F$y,laya.display.Input.inputElement.selectionEnd=F$j},F$y._onUnDisplay=function(F$y){this.focus=!1},F$y._onMouseDown=function(F$y){this.focus=!0},F$y._syncInputTransform=function(){var F$y=this.nativeInput,F$j=F$o.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),F$t=this._width-this.padding[1]-this.padding[3],F$k=this._height-this.padding[0]-this.padding[2];F$S.isConchApp?(F$y.setScale(F$j.scaleX,F$j.scaleY),F$y.setSize(F$t,F$k),F$y.setPos(F$j.x,F$j.y)):(F$T.inputContainer.style.transform=F$T.inputContainer.style.webkitTransform="scale("+F$j.scaleX+","+F$j.scaleY+") rotate("+F$N.stage.canvasDegree+"deg)",F$y.style.width=F$t+"px",F$y.style.height=F$k+"px",F$T.inputContainer.style.left=F$j.x+"px",F$T.inputContainer.style.top=F$j.y+"px")},F$y.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},F$y._setInputMethod=function(){F$T.input.parentElement&&F$T.inputContainer.removeChild(F$T.input),F$T.area.parentElement&&F$T.inputContainer.removeChild(F$T.area),F$T.inputElement=this._multiline?F$T.area:F$T.input,F$T.inputContainer.appendChild(F$T.inputElement),F$Vy.RightToLeft&&(F$T.inputElement.style.direction="rtl")},F$y._focusIn=function(){laya.display.Input.isInputting=!0;var F$y=this.nativeInput;this._focus=!0;var F$j=F$y.style;F$j.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),F$y.readOnly=!this._editable,F$S.isConchApp&&(F$y.setType(this._type),F$y.setForbidEdit(!this._editable)),F$y.maxLength=this._maxChars;this.padding;if(F$y.type=this._type,F$y.value=this._content,F$y.placeholder=this._prompt,F$N.stage.off("keydown",this,this._onKeyDown),F$N.stage.on("keydown",this,this._onKeyDown),(F$N.stage.focus=this).event("focus"),F$G.onPC&&F$y.focus(),!F$G.onMiniGame){this._text;this._text=null}this.typeset(),F$y.setColor(this._originColor),F$y.setFontSize(this.fontSize),F$y.setFontFace(F$G.onIPhone&&F$Vy._fontFamilyMap[this.font]||this.font),F$S.isConchApp&&F$y.setMultiAble&&F$y.setMultiAble(this._multiline),F$j.lineHeight=this.leading+this.fontSize+"px",F$j.fontStyle=this.italic?"italic":"normal",F$j.fontWeight=this.bold?"bold":"normal",F$j.textAlign=this.align,F$j.padding="0 0",this._syncInputTransform(),!F$S.isConchApp&&F$G.onPC&&F$N.timer.frameLoop(1,this,this._syncInputTransform)},F$y._setPromptColor=function(){(F$T.promptStyleDOM=F$G.getElementById("promptStyle"))||((F$T.promptStyleDOM=F$G.createElement("style")).setAttribute("id","promptStyle"),F$G.document.head.appendChild(F$T.promptStyleDOM)),F$T.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},F$y._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(F$N.superSet(F$Vy,this,"text",this._content),F$N.superSet(F$Vy,this,"color",this._originColor)):(F$N.superSet(F$Vy,this,"text",this._prompt),F$N.superSet(F$Vy,this,"color",this._promptColor)),F$N.stage.off("keydown",this,this._onKeyDown),F$N.stage.focus=null,this.event("blur"),F$S.isConchApp&&this.nativeInput.blur(),F$G.onPC&&F$N.timer.clear(this,this._syncInputTransform)},F$y._onKeyDown=function(F$y){13===F$y.keyCode&&(F$G.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},F$y.changeText=function(F$y){this._content=F$y,this._focus?(this.nativeInput.value=F$y||"",this.event("change")):F$j.prototype.changeText.call(this,F$y)},F$W(0,F$y,"color",F$j.prototype._$get_color,function(F$y){this._focus&&this.nativeInput.setColor(F$y),F$N.superSet(F$Vy,this,"color",this._content?F$y:this._promptColor),this._originColor=F$y}),F$W(0,F$y,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(F$y){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),F$W(0,F$y,"multiline",function(){return this._multiline},function(F$y){this._multiline=F$y,this.valign=F$y?"top":"middle"}),F$W(0,F$y,"maxChars",function(){return this._maxChars},function(F$y){F$y<=0&&(F$y=1e5),this._maxChars=F$y}),F$W(0,F$y,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(F$y){F$N.superSet(F$Vy,this,"color",this._originColor),F$y+="",this._focus?(this.nativeInput.value=F$y||"",this.event("change")):(this._multiline||(F$y=F$y.replace(/\r?\n/g,"")),(this._content=F$y)?F$N.superSet(F$Vy,this,"text",F$y):(F$N.superSet(F$Vy,this,"text",this._prompt),F$N.superSet(F$Vy,this,"color",this.promptColor)))}),F$W(0,F$y,"nativeInput",function(){return this._multiline?F$T.area:F$T.input}),F$W(0,F$y,"prompt",function(){return this._prompt},function(F$y){!this._text&&F$y&&F$N.superSet(F$Vy,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?F$N.superSet(F$Vy,this,"text",this._text==this._prompt?F$y:this._text):F$N.superSet(F$Vy,this,"text",F$y),this._prompt=F$Vy.langPacks&&F$Vy.langPacks[F$y]?F$Vy.langPacks[F$y]:F$y}),F$W(0,F$y,"focus",function(){return this._focus},function(F$y){var F$j=this.nativeInput;this._focus!==F$y&&(F$y?(F$j.target?F$j.target._focusOut():this._setInputMethod(),(F$j.target=this)._focusIn()):(F$j.target=null,this._focusOut(),F$G.document.body.scrollTop=0,F$j.blur(),F$S.isConchApp?F$j.setPos(-1e4,-1e4):F$T.inputContainer.contains(F$j)&&F$T.inputContainer.removeChild(F$j)))}),F$W(0,F$y,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(F$y){F$y?(-1<(F$y="[^"+F$y+"]").indexOf("^^")&&(F$y=F$y.replace("^^","")),this._restrictPattern=new RegExp(F$y,"g")):this._restrictPattern=null}),F$W(0,F$y,"editable",function(){return this._editable},function(F$y){this._editable=F$y,F$S.isConchApp&&F$T.input.setForbidEdit(!F$y)}),F$W(0,F$y,"promptColor",function(){return this._promptColor},function(F$y){this._promptColor=F$y,this._content||F$N.superSet(F$Vy,this,"color",F$y)}),F$W(0,F$y,"type",function(){return this._type},function(F$y){this._getCSSStyle().password="password"==F$y,this._type=F$y,F$S.isConchApp&&this.nativeInput.setType(F$y)}),F$W(0,F$y,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(F$y){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),F$W(0,F$y,"asPassword",function(){return this._getCSSStyle().password},function(F$y){this._getCSSStyle().password=F$y,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),F$T.__init__=function(){F$T._createInputElement(),F$G.onMobile&&F$S.canvas.addEventListener(F$T.IOS_IFRAME?F$G.onMiniGame?"touchend":"click":"touchend",F$T._popupInputMethod)},F$T._popupInputMethod=function(F$y){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},F$T._createInputElement=function(){F$T._initInput(F$T.area=F$G.createElement("textarea")),F$T._initInput(F$T.input=F$G.createElement("input")),(F$T.inputContainer=F$G.createElement("div")).style.position="absolute",F$T.inputContainer.style.zIndex=1e5,F$G.container.appendChild(F$T.inputContainer),F$T.inputContainer.setPos=function(F$y,F$j){F$T.inputContainer.style.left=F$y+"px",F$T.inputContainer.style.top=F$j+"px"}},F$T._initInput=function(F$j){var F$y=F$j.style;F$y.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",F$y.resize="none",F$y.backgroundColor="transparent",F$y.border="none",F$y.outline="none",F$y.zIndex=1,F$j.addEventListener("input",F$T._processInputting),F$j.addEventListener("mousemove",F$T._stopEvent),F$j.addEventListener("mousedown",F$T._stopEvent),F$j.addEventListener("touchmove",F$T._stopEvent),F$j.setFontFace=function(F$y){F$j.style.fontFamily=F$y},F$S.isConchApp||(F$j.setColor=function(F$y){F$j.style.color=F$y},F$j.setFontSize=function(F$y){F$j.style.fontSize=F$y+"px"})},F$T._processInputting=function(F$y){var F$j=laya.display.Input.inputElement.target;if(F$j){var F$t=laya.display.Input.inputElement.value;F$j._restrictPattern&&(F$t=F$t.replace(/\u2006|\x27/g,""),F$j._restrictPattern.test(F$t)&&(F$t=F$t.replace(F$j._restrictPattern,""),laya.display.Input.inputElement.value=F$t)),F$j._text=F$t,F$j.event("input")}},F$T._stopEvent=function(F$y){"touchmove"==F$y.type&&F$y.preventDefault(),F$y.stopPropagation&&F$y.stopPropagation()},F$T.TYPE_TEXT="text",F$T.TYPE_PASSWORD="password",F$T.TYPE_EMAIL="email",F$T.TYPE_URL="url",F$T.TYPE_NUMBER="number",F$T.TYPE_RANGE="range",F$T.TYPE_DATE="date",F$T.TYPE_MONTH="month",F$T.TYPE_WEEK="week",F$T.TYPE_TIME="time",F$T.TYPE_DATE_TIME="datetime",F$T.TYPE_DATE_TIME_LOCAL="datetime-local",F$T.TYPE_SEARCH="search",F$T.input=null,F$T.area=null,F$T.inputElement=null,F$T.inputContainer=null,F$T.confirmButton=null,F$T.promptStyleDOM=null,F$T.inputHeight=45,F$T.isInputting=!1,F$T.stageMatrix=null,F$I(F$T,["IOS_IFRAME",function(){return this.IOS_IFRAME=F$G.onIOS&&F$G.window.top!=F$G.window.self}]),F$T}(F$Vy),F$vy=function(F$y){function F$t(F$y,F$j){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,F$t.__super.call(this),F$y&&this._init_(F$y,F$j)}F$D(F$t,"laya.resource.HTMLImage",F$Cy);var F$j=F$t.prototype;return F$j._init_=function(F$y,F$j){this._src=F$y,this._source=new F$G.window.Image,F$j&&(F$j.onload&&(this.onload=F$j.onload),F$j.onerror&&(this.onerror=F$j.onerror),F$j.onCreate&&F$j.onCreate(this)),0!=F$y.indexOf("data:image")&&(this._source.crossOrigin=""),F$y&&(this._source.src=F$y)},F$j.recreateResource=function(){var F$y=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var F$j=this;this._source=new F$G.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(F$j._needReleaseAgain)return F$j._needReleaseAgain=!1,F$j._source.onload=null,void(F$j._source=null);F$j._source.onload=null,F$j.memorySize=F$y._w*F$y._h*4,F$j._recreateLock=!1,F$j.completeCreate()},this._source.src=this._src}},F$j.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},F$j.onresize=function(){this._w=this._source.width,this._h=this._source.height},F$W(0,F$j,"onload",null,function(F$y){var F$j=this;this._onload=F$y,this._source&&(this._source.onload=null!=this._onload?function(){F$j.onresize(),F$j._onload()}:null)}),F$W(0,F$j,"onerror",null,function(F$y){var F$j=this;this._onerror=F$y,this._source&&(this._source.onerror=null!=this._onerror?function(){F$j._onerror()}:null)}),F$W(0,F$j,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$y){this._enableMerageInAtlas=F$y,F$S.isConchApp&&this._source&&(this._source.enableMerageInAtlas=F$y)}),F$t.create=function(F$y,F$j){return new F$t(F$y,F$j)},F$t}(),F$Ny=(function(F$Y){function F$y(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,F$y.__super.call(this)}F$D(F$y,"laya.display.EffectAnimation",F$Y);var F$j=F$y.prototype;F$j._onOtherBegin=function(F$y){F$y!=this&&this.stop()},F$j.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},F$j._onPlayAction=function(){this.play(0,!1)},F$j.play=function(F$y,F$j,F$t,F$k){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=!0),void 0===F$t&&(F$t=""),void 0===F$k&&(F$k=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,F$y,F$j,F$t,F$k))},F$j._recordInitData=function(){if(this._aniKeys){var F$y,F$j,F$t=0;for(F$y=this._aniKeys.length,F$t=0;F$t<F$y;F$t++)F$j=this._aniKeys[F$t],this._initData[F$j]=this._target[F$j]}},F$j._displayToIndex=function(F$y){if(this._animationData){F$y<0&&(F$y=0),F$y>this._count&&(F$y=this._count);var F$j=this._animationData.nodes,F$t=0,F$k=F$j.length;for(F$k=1<F$k?1:F$k,F$t=0;F$t<F$k;F$t++)this._displayNodeToFrame(F$j[F$t],F$y)}},F$j._displayNodeToFrame=function(F$y,F$j,F$t){if(this._target){var F$k;F$k=this._target;var F$T,F$Y,F$A,F$X,F$I=F$y.frames,F$b=F$y.keys,F$D=0,F$l=F$b.length;F$X=F$y.secondFrames;var F$r,F$$,F$W,F$z,F$V=0;for(F$D=0;F$D<F$l;F$D++)F$Y=F$I[F$T=F$b[F$D]],F$A=-1==(F$V=F$X[F$T])?this._initData[F$T]:F$j<F$V?(F$W=(F$$=F$y.keyframes[F$T])[0]).tween?(null==(F$r=F$s[F$W.tweenMethod])&&(F$r=F$s.linearNone),F$z=F$$[1],F$r(F$j,this._initData[F$T],F$z.value-this._initData[F$T],F$z.index)):this._initData[F$T]:F$Y.length>F$j?F$Y[F$j]:F$Y[F$Y.length-1],F$k[F$T]=F$A}},F$j._calculateNodeKeyFrames=function(F$y){F$Y.prototype._calculateNodeKeyFrames.call(this,F$y);var F$j,F$t,F$k,F$T=F$y.keyframes;F$y.target;for(F$j in F$k={},F$y.secondFrames=F$k,F$T)(F$t=F$T[F$j]).length<=1?F$k[F$j]=-1:F$k[F$j]=F$t[1].index},F$W(0,F$j,"target",function(){return this._target},function(F$y){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=F$y,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),F$W(0,F$j,"playEvent",null,function(F$y){(this._playEvents=F$y)&&this.addEvent()}),F$W(0,F$j,"effectData",null,function(F$y){var F$j;F$y&&((F$j=F$y.animations)&&F$j[0]&&(this._setUp({},F$j[0]),F$j[0].nodes&&F$j[0].nodes[0]&&(this._aniKeys=F$j[0].nodes[0].keys)))}),F$W(0,F$j,"effectClass",null,function(F$y){var F$j,F$t;(this._effectClass=F$J.getClass(F$y),this._effectClass)&&((F$j=this._effectClass.uiView)&&(F$t=F$j.animations)&&F$t[0]&&(this._setUp({},F$t[0]),F$t[0].nodes&&F$t[0].nodes[0]&&(this._aniKeys=F$t[0].nodes[0].keys)))}),F$y.EffectAnimationBegin="effectanimationbegin"}(F$_y),function(F$j){var F$f;function F$Q(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,F$Q.__super.call(this)}F$D(F$Q,"laya.utils.GraphicAnimation",F$j);var F$y=F$Q.prototype;return F$y._parseNodeList=function(F$y){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[F$y.compId]=F$y.props,F$y.compId&&this._nodeList.push(F$y.compId);var F$j=F$y.child;if(F$j){var F$t=0,F$k=F$j.length;for(F$t=0;F$t<F$k;F$t++)this._parseNodeList(F$j[F$t])}},F$y._calGraphicData=function(F$y){var F$j;if(this._setUp(null,F$y),this._createGraphicData(),this._nodeIDAniDic)for(F$j in this._nodeIDAniDic)this._nodeIDAniDic[F$j]=null},F$y._createGraphicData=function(){var F$y,F$j=[],F$t=0,F$k=this.count,F$T=this._animationNewFrames;for(F$T||(F$T=[]),F$t=0;F$t<F$k;F$t++)!F$T[F$t]&&F$y||(F$y=this._createFrameGraphic(F$t)),F$j.push(F$y);this._gList=F$j},F$y._createFrameGraphic=function(F$y){var F$j=F$m.createGraphics();return F$Q._rootMatrix||(F$Q._rootMatrix=new F$U),this._updateNodeGraphic(this._rootNode,F$y,F$Q._rootMatrix,F$j),F$j},F$y._updateNodeGraphic=function(F$y,F$j,F$t,F$k,F$T){var F$Y;void 0===F$T&&(F$T=1);var F$A,F$X,F$I,F$b=(F$Y=this._nodeGDic[F$y.compId]=this._getNodeGraphicData(F$y.compId,F$j,this._nodeGDic[F$y.compId])).alpha*F$T;if(!(F$b<.01)&&(F$Y.resultTransform||(F$Y.resultTransform=F$U.create()),F$A=F$Y.resultTransform,F$U.mul(F$Y.transform,F$t,F$A),F$Y.skin&&(F$X=this._getTextureByUrl(F$Y.skin))&&(F$A._checkTransform()?(F$k.drawTexture(F$X,0,0,F$Y.width,F$Y.height,F$A,F$b),F$Y.resultTransform=null):F$k.drawTexture(F$X,F$A.tx,F$A.ty,F$Y.width,F$Y.height,null,F$b)),F$I=F$y.child)){var F$D,F$l=0;for(F$D=F$I.length,F$l=0;F$l<F$D;F$l++)this._updateNodeGraphic(F$I[F$l],F$j,F$A,F$k,F$b)}},F$y._updateNoChilds=function(F$y,F$j){if(F$y.skin){var F$t=this._getTextureByUrl(F$y.skin);if(F$t){var F$k=F$y.transform;F$k._checkTransform();!F$k.bTransform?F$j.drawTexture(F$t,F$k.tx,F$k.ty,F$y.width,F$y.height,null,F$y.alpha):F$j.drawTexture(F$t,0,0,F$y.width,F$y.height,F$k.clone(),F$y.alpha)}}},F$y._updateNodeGraphic2=function(F$y,F$j,F$t){var F$k;if(F$k=this._nodeGDic[F$y.compId]=this._getNodeGraphicData(F$y.compId,F$j,this._nodeGDic[F$y.compId]),F$y.child){var F$T=F$k.transform;F$T._checkTransform();var F$Y,F$A;F$A=(F$Y=!F$T.bTransform)&&(0!=F$T.tx||0!=F$T.ty);var F$X,F$I,F$b;if((F$X=F$T.bTransform||1!=F$k.alpha)&&F$t.save(),1!=F$k.alpha&&F$t.alpha(F$k.alpha),F$Y?F$A&&F$t.translate(F$T.tx,F$T.ty):F$t.transform(F$T.clone()),F$I=F$y.child,F$k.skin&&(F$b=this._getTextureByUrl(F$k.skin))&&F$t.drawTexture(F$b,0,0,F$k.width,F$k.height),F$I){var F$D,F$l=0;for(F$D=F$I.length,F$l=0;F$l<F$D;F$l++)this._updateNodeGraphic2(F$I[F$l],F$j,F$t)}F$X?F$t.restore():F$Y?F$A&&F$t.translate(-F$T.tx,-F$T.ty):F$t.transform(F$T.clone().invert())}else this._updateNoChilds(F$k,F$t)},F$y._calculateNodeKeyFrames=function(F$y){F$j.prototype._calculateNodeKeyFrames.call(this,F$y),this._nodeIDAniDic[F$y.target]=F$y},F$y.getNodeDataByID=function(F$y){return this._nodeIDAniDic[F$y]},F$y._getParams=function(F$y,F$j,F$t,F$k){var F$T=F$Q._temParam;F$T.length=F$j.length;var F$Y=0,F$A=F$j.length;for(F$Y=0;F$Y<F$A;F$Y++)F$T[F$Y]=this._getObjVar(F$y,F$j[F$Y][0],F$t,F$j[F$Y][1],F$k);return F$T},F$y._getObjVar=function(F$y,F$j,F$t,F$k,F$T){if(F$y.hasOwnProperty(F$j)){var F$Y=F$y[F$j];if(F$t>=F$Y.length&&(F$t=F$Y.length-1),null!=F$y[F$j][F$t])return F$y[F$j][F$t]}return F$T.hasOwnProperty(F$j)?F$T[F$j]:F$k},F$y._getNodeGraphicData=function(F$y,F$j,F$t){F$t||(F$t=F$f.create()),F$t.transform?F$t.transform.identity():F$t.transform=F$U.create();var F$k=this.getNodeDataByID(F$y);if(!F$k)return F$t;var F$T,F$Y,F$A=F$k.frames,F$X=this._getParams(F$A,F$Q._drawTextureCmd,F$j,this._nodeDefaultProps[F$y]),F$I=F$X[0],F$b=NaN,F$D=NaN,F$l=F$X[5],F$r=F$X[6],F$$=F$X[13],F$W=F$X[14],F$z=F$X[7],F$V=F$X[8],F$n=F$X[9],F$C=F$X[11],F$M=F$X[12];F$b=F$X[3],F$D=F$X[4],0!=F$b&&0!=F$D||(F$I=null),-1==F$b&&(F$b=0),-1==F$D&&(F$D=0),F$t.skin=F$I,F$t.width=F$b,F$t.height=F$D,F$I&&((F$T=this._getTextureByUrl(F$I))?(F$b||(F$b=F$T.sourceWidth),F$D||(F$D=F$T.sourceHeight)):console.warn("lost skin:",F$I,",you may load pics first")),F$t.alpha=F$X[10],F$Y=F$t.transform,0!=F$$&&(F$l=F$$*F$b),0!=F$W&&(F$r=F$W*F$D),0==F$l&&0==F$r||F$Y.translate(-F$l,-F$r);var F$_=null;if(F$n||1!==F$z||1!==F$V||F$C||F$M){(F$_=F$Q._tempMt).identity(),F$_.bTransform=!0;var F$e=.0174532922222222*(F$n-F$C),F$v=.0174532922222222*(F$n+F$M),F$N=Math.cos(F$v),F$P=Math.sin(F$v),F$d=Math.sin(F$e),F$p=Math.cos(F$e);F$_.a=F$z*F$N,F$_.b=F$z*F$P,F$_.c=-F$V*F$d,F$_.d=F$V*F$p,F$_.tx=F$_.ty=0}return F$_&&(F$Y=F$U.mul(F$Y,F$_,F$Y)),F$Y.translate(F$X[1],F$X[2]),F$t},F$y._getTextureByUrl=function(F$y){return F$Xy.getRes(F$y)},F$y.setAniData=function(F$y,F$j){if(F$y.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$y,this._parseNodeList(F$y);var F$t,F$k={},F$T=[],F$Y=F$y.animations,F$A=0,F$X=F$Y.length;for(F$A=0;F$A<F$X;F$A++)if(F$t=F$Y[F$A],this._labels=null,(!F$j||F$j==F$t.name)&&F$t){try{this._calGraphicData(F$t)}catch(F$y){console.warn("parse animation fail:"+F$t.name+",empty animation created"),this._gList=[]}var F$I={};F$I.interval=1e3/F$t.frameRate,F$I.frames=this._gList,F$I.labels=this._labels,F$I.name=F$t.name,F$T.push(F$I),F$k[F$t.name]=F$I}this.animationList=F$T,this.animationDic=F$k}F$Q._temParam.length=0},F$y.parseByData=function(F$y){var F$j,F$t;F$j=F$y.nodeRoot,F$t=F$y.aniO,delete F$y.nodeRoot,delete F$y.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=F$j,this._parseNodeList(F$j),this._labels=null;try{this._calGraphicData(F$t)}catch(F$y){console.warn("parse animation fail:"+F$t.name+",empty animation created"),this._gList=[]}var F$k=F$y;return F$k.interval=1e3/F$t.frameRate,F$k.frames=this._gList,F$k.labels=this._labels,F$k.name=F$t.name,F$k},F$y.setUpAniData=function(F$y){if(F$y.animations){var F$j,F$t={},F$k=[],F$T=F$y.animations,F$Y=0,F$A=F$T.length;for(F$Y=0;F$Y<F$A;F$Y++)if(F$j=F$T[F$Y]){var F$X={};F$X.name=F$j.name,F$X.aniO=F$j,F$X.nodeRoot=F$y,F$k.push(F$X),F$t[F$j.name]=F$X}this.animationList=F$k,this.animationDic=F$t}},F$y._clear=function(){var F$y,F$j;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(F$y in this._nodeGDic)(F$j=this._nodeGDic[F$y])&&F$j.recover();this._nodeGDic=null},F$Q.parseAnimationByData=function(F$y){var F$j;return F$Q._I||(F$Q._I=new F$Q),F$j=F$Q._I.parseByData(F$y),F$Q._I._clear(),F$j},F$Q.parseAnimationData=function(F$y){var F$j;return F$Q._I||(F$Q._I=new F$Q),F$Q._I.setUpAniData(F$y),(F$j={}).animationList=F$Q._I.animationList,F$j.animationDic=F$Q._I.animationDic,F$Q._I._clear(),F$j},F$Q._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],F$Q._temParam=[],F$Q._I=null,F$Q._rootMatrix=null,F$I(F$Q,["_tempMt",function(){return this._tempMt=new F$U}]),F$Q.__init$=function(){F$f=function(){function F$y(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return F$D(F$y,""),F$y.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),F$R.recover("GraphicNode",this)},F$y.create=function(){return F$R.getItemByClass("GraphicNode",F$y)},F$y}()},F$Q}(F$_y));F$N.__init([F$b,F$Iy,F$S,F$G,F$c,F$p,F$y,F$Ny])}(window,document,Laya),function(F$y,F$j,F$t){F$t.un,F$t.uns,F$t.static;var F$k=F$t.class;F$t.getset,F$t.__newvec;new(function(){function F$y(){}return F$k(F$y,"LayaMain"),F$y}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$y,F$j){"use strict";for(var F$t in Object.defineProperty(F$j,"__esModule",{value:!0}),Laya){var F$k=Laya[F$t];F$k&&F$k.__isclass&&(F$j[F$t]=F$k)}}),function(F$t,F$y,F$v){F$v.un,F$v.uns;var F$A=F$v.static,F$r=F$v.class,F$k=F$v.getset,F$Y=F$v.__newvec,F$D=laya.maths.Arith,F$l=laya.maths.Bezier,F$I=laya.resource.Bitmap,F$$=laya.utils.Browser,F$b=laya.utils.Byte,F$W=laya.utils.Color,F$N=(laya.filters.ColorFilter,F$v.Config),F$T=laya.resource.Context,F$P=(laya.events.Event,laya.filters.Filter),F$X=laya.display.Graphics,F$z=laya.resource.HTMLCanvas,F$V=(laya.utils.HTMLChar,laya.resource.HTMLImage),F$j=laya.resource.HTMLSubImage,F$d=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),F$p=laya.maths.Point,F$f=laya.maths.Rectangle,F$n=laya.renders.Render,F$C=(laya.renders.RenderContext,laya.renders.RenderSprite),F$M=laya.resource.Resource,F$_=laya.resource.ResourceManager,F$e=laya.utils.RunDriver,F$Q=laya.display.Sprite,F$m=laya.display.Stage,F$U=laya.utils.Stat,F$q=laya.utils.StringKey,F$w=(laya.display.css.Style,laya.system.System),F$S=laya.display.Text,F$H=laya.resource.Texture,F$K=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),F$x=laya.utils.VectorGraphManager;laya.utils.WordText;F$v.interface("laya.webgl.shapes.IShape"),F$v.interface("laya.webgl.submit.ISubmit"),F$v.interface("laya.webgl.text.ICharSegment"),F$v.interface("laya.webgl.canvas.save.ISaveData"),F$v.interface("laya.webgl.resource.IMergeAtlasBitmap"),F$v.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var F$F=function(){function F$y(){}F$r(F$y,"laya.filters.webgl.FilterActionGL");var F$j=F$y.prototype;return F$v.imps(F$j,{"laya.filters.IFilterActionGL":!0}),F$j.setValue=function(F$y){},F$j.setValueMix=function(F$y){},F$j.apply3d=function(F$y,F$j,F$t,F$k,F$T){return null},F$j.apply=function(F$y){return null},F$k(0,F$j,"typeMix",function(){return 0}),F$y}(),F$G=function(){function F$y(){}return F$r(F$y,"laya.webgl.shader.ShaderValue"),F$y}(),F$g=function(){var F$k,F$T;function F$y(F$y,F$j,F$t){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new F$T,void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),this._cells=null,this._rowInfo=null,this._init(F$y,F$j),this._atlasID=F$t}F$r(F$y,"laya.webgl.atlas.AtlasGrid");var F$j=F$y.prototype;return F$j.getAltasID=function(){return this._atlasID},F$j.setAltasID=function(F$y){0<=F$y&&(this._atlasID=F$y)},F$j.addTex=function(F$y,F$j,F$t){var F$k=this._get(F$j,F$t);return 0==F$k.ret||(this._fill(F$k.x,F$k.y,F$j,F$t,F$y),this._texCount++),F$k},F$j._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},F$j._init=function(F$y,F$j){if(this._width=F$y,this._height=F$j,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=F$Y(this._height);for(var F$t=0;F$t<this._height;F$t++)this._rowInfo[F$t]=new F$k;return this._clear(),!0},F$j._get=function(F$y,F$j){var F$t=new F$J;if(F$y>=this._failSize.width&&F$j>=this._failSize.height)return F$t;for(var F$k=-1,F$T=-1,F$Y=this._width,F$A=this._height,F$X=this._cells,F$I=0;F$I<F$A;F$I++)if(!(this._rowInfo[F$I].spaceCount<F$y))for(var F$b=0;F$b<F$Y;){var F$D=3*(F$I*F$Y+F$b);if(0!=F$X[F$D]||F$X[1+F$D]<F$y||F$X[2+F$D]<F$j)F$b+=F$X[1+F$D];else{F$k=F$b,F$T=F$I;for(var F$l=0;F$l<F$y;F$l++)if(F$X[3*F$l+F$D+2]<F$j){F$k=-1;break}if(!(F$k<0))return F$t.ret=!0,F$t.x=F$k,F$t.y=F$T,F$t;F$b+=F$X[1+F$D]}}return F$t},F$j._fill=function(F$y,F$j,F$t,F$k,F$T){var F$Y=this._width,F$A=this._height;this._check(F$y+F$t<=F$Y&&F$j+F$k<=F$A);for(var F$X=F$j;F$X<F$k+F$j;++F$X){this._check(this._rowInfo[F$X].spaceCount>=F$t),this._rowInfo[F$X].spaceCount-=F$t;for(var F$I=0;F$I<F$t;F$I++){var F$b=3*(F$y+F$X*F$Y+F$I);this._check(0==this._cells[F$b]),this._cells[F$b]=F$T,this._cells[1+F$b]=F$t,this._cells[2+F$b]=F$k}}if(0<F$y)for(F$X=0;F$X<F$k;++F$X){var F$D=0;for(F$I=F$y-1;0<=F$I&&0==this._cells[3*((F$j+F$X)*F$Y+F$I)];--F$I,++F$D);for(F$I=F$D;0<F$I;--F$I)this._cells[3*((F$j+F$X)*F$Y+F$y-F$I)+1]=F$I,this._check(0<F$I)}if(0<F$j)for(F$I=F$y;F$I<F$y+F$t;++F$I){for(F$D=0,F$X=F$j-1;0<=F$X&&0==this._cells[3*(F$I+F$X*F$Y)];--F$X,F$D++);for(F$X=F$D;0<F$X;--F$X)this._cells[3*(F$I+(F$j-F$X)*F$Y)+2]=F$X,this._check(0<F$X)}},F$j._check=function(F$y){0==F$y&&console.log("xtexMerger 错误啦")},F$j._clear=function(){for(var F$y=this._texCount=0;F$y<this._height;F$y++)this._rowInfo[F$y].spaceCount=this._width;for(var F$j=0;F$j<this._height;F$j++)for(var F$t=0;F$t<this._width;F$t++){var F$k=3*(F$j*this._width+F$t);this._cells[F$k]=0,this._cells[1+F$k]=this._width-F$t,this._cells[2+F$k]=this._width-F$j}this._failSize.width=this._width+1,this._failSize.height=this._height+1},F$y.__init$=function(){F$k=function(){function F$y(){this.spaceCount=0}return F$r(F$y,""),F$y}(),F$T=function(){function F$y(){this.width=0,this.height=0}return F$r(F$y,""),F$y}()},F$y}(),F$a=function(){function F$n(F$y,F$j,F$t,F$k){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=F$y,this._height=F$j,this._gridSize=F$t,this._maxAtlaserCount=F$k,this._gridNumX=F$y/F$t,this._gridNumY=F$j/F$t,this._curAtlasIndex=0,this._atlaserArray=[]}F$r(F$n,"laya.webgl.atlas.AtlasResourceManager");var F$y=F$n.prototype;return F$y.setAtlasParam=function(F$y,F$j,F$t,F$k){if(1==this._setAtlasParam)return F$n._sid_=0,this._width=F$y,this._height=F$j,this._gridSize=F$t,this._maxAtlaserCount=F$k,this._gridNumX=F$y/F$t,this._gridNumY=F$j/F$t,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},F$y.pushData=function(F$y){var F$j,F$t=F$y.bitmap,F$k=-1,F$T=null,F$Y=0,F$A=0;for(F$Y=0,F$j=this._atlaserArray.length;F$Y<F$j&&(F$A=(this._curAtlasIndex+F$Y)%F$j,-1==(F$k=(F$T=this._atlaserArray[F$A]).findBitmapIsExist(F$t)));F$Y++);if(-1!=F$k){var F$X=F$T.InAtlasWebGLImagesOffsetValue[F$k];return F$W=F$X[0],F$z=F$X[1],F$T.addToAtlas(F$y,F$W,F$z),!0}this._setAtlasParam=!1;for(var F$I=Math.ceil((F$y.bitmap.width+2)/this._gridSize),F$b=Math.ceil((F$y.bitmap.height+2)/this._gridSize),F$D=!1,F$l=0;F$l<2;F$l++){var F$r=this._maxAtlaserCount;for(F$Y=0;F$Y<F$r;F$Y++){F$A=(this._curAtlasIndex+F$Y)%F$r,this._atlaserArray.length-1>=F$A||this._atlaserArray.push(new F$fy(this._gridNumX,this._gridNumY,this._width,this._height,F$n._sid_++));var F$$=this._atlaserArray[F$A],F$W=0,F$z=0,F$V=F$$.addTex(1,F$I,F$b);if(F$V.ret){F$W=F$V.x*this._gridSize+1,F$z=F$V.y*this._gridSize+1,F$t.lock=!0,F$$.addToAtlasTexture(F$t,F$W,F$z),F$$.addToAtlas(F$y,F$W,F$z),F$D=!0,this._curAtlasIndex=F$A;break}}if(F$D)break;this._atlaserArray.push(new F$fy(this._gridNumX,this._gridNumY,this._width,this._height,F$n._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return F$D||console.log(">>>AtlasManager pushData error"),F$D},F$y.addToAtlas=function(F$y){laya.webgl.atlas.AtlasResourceManager.instance.pushData(F$y)},F$y.garbageCollection=function(){if(!0===this._needGC){for(var F$y=this._atlaserArray.length-this._maxAtlaserCount,F$j=0;F$j<F$y;F$j++)this._atlaserArray[F$j].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+F$y),this._atlaserArray.splice(0,F$y),this._needGC=!1}return!0},F$y.freeAll=function(){for(var F$y=0,F$j=this._atlaserArray.length;F$y<F$j;F$y++)this._atlaserArray[F$y].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},F$y.getAtlaserCount=function(){return this._atlaserArray.length},F$y.getAtlaserByIndex=function(F$y){return this._atlaserArray[F$y]},F$k(1,F$n,"instance",function(){return F$n._Instance||(F$n._Instance=new F$n(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),F$n._Instance}),F$k(1,F$n,"enabled",function(){return F$N.atlasEnable}),F$k(1,F$n,"atlasLimitWidth",function(){return F$n._atlasLimitWidth},function(F$y){F$n._atlasLimitWidth=F$y}),F$k(1,F$n,"atlasLimitHeight",function(){return F$n._atlasLimitHeight},function(F$y){F$n._atlasLimitHeight=F$y}),F$n._enable=function(){F$N.atlasEnable=!0},F$n._disable=function(){F$N.atlasEnable=!1},F$n.__init__=function(){F$n.atlasTextureWidth=2048,F$n.atlasTextureHeight=2048,F$n.maxTextureCount=6,F$n.atlasLimitWidth=512,F$n.atlasLimitHeight=512},F$n._atlasLimitWidth=0,F$n._atlasLimitHeight=0,F$n.gridSize=16,F$n.atlasTextureWidth=0,F$n.atlasTextureHeight=0,F$n.maxTextureCount=0,F$n._atlasRestore=0,F$n.BOARDER_TYPE_NO=0,F$n.BOARDER_TYPE_RIGHT=1,F$n.BOARDER_TYPE_LEFT=2,F$n.BOARDER_TYPE_BOTTOM=4,F$n.BOARDER_TYPE_TOP=8,F$n.BOARDER_TYPE_ALL=15,F$n._sid_=0,F$n._Instance=null,F$n}(),F$J=function(){function F$y(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return F$r(F$y,"laya.webgl.atlas.MergeFillInfo"),F$y}(),F$h=function(){function F$j(){}return F$r(F$j,"laya.webgl.canvas.BlendMode"),F$j._init_=function(F$y){F$j.fns=[F$j.BlendNormal,F$j.BlendAdd,F$j.BlendMultiply,F$j.BlendScreen,F$j.BlendOverlay,F$j.BlendLight,F$j.BlendMask,F$j.BlendDestinationOut],F$j.targetFns=[F$j.BlendNormalTarget,F$j.BlendAddTarget,F$j.BlendMultiplyTarget,F$j.BlendScreenTarget,F$j.BlendOverlayTarget,F$j.BlendLightTarget,F$j.BlendMask,F$j.BlendDestinationOut]},F$j.BlendNormal=function(F$y){F$y.blendFunc(1,771)},F$j.BlendAdd=function(F$y){F$y.blendFunc(1,772)},F$j.BlendMultiply=function(F$y){F$y.blendFunc(774,771)},F$j.BlendScreen=function(F$y){F$y.blendFunc(1,1)},F$j.BlendOverlay=function(F$y){F$y.blendFunc(1,769)},F$j.BlendLight=function(F$y){F$y.blendFunc(1,1)},F$j.BlendNormalTarget=function(F$y){F$y.blendFunc(1,771)},F$j.BlendAddTarget=function(F$y){F$y.blendFunc(1,772)},F$j.BlendMultiplyTarget=function(F$y){F$y.blendFunc(774,771)},F$j.BlendScreenTarget=function(F$y){F$y.blendFunc(1,1)},F$j.BlendOverlayTarget=function(F$y){F$y.blendFunc(1,769)},F$j.BlendLightTarget=function(F$y){F$y.blendFunc(1,1)},F$j.BlendMask=function(F$y){F$y.blendFunc(0,770)},F$j.BlendDestinationOut=function(F$y){F$y.blendFunc(0,0)},F$j.activeBlendFunction=null,F$j.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],F$j.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},F$j.NORMAL="normal",F$j.ADD="add",F$j.MULTIPLY="multiply",F$j.SCREEN="screen",F$j.LIGHT="light",F$j.OVERLAY="overlay",F$j.DESTINATIONOUT="destination-out",F$j.fns=[],F$j.targetFns=[],F$j}(),F$O=function(){function F$t(F$y){this._color=F$W.create("black"),this.setValue(F$y)}F$r(F$t,"laya.webgl.canvas.DrawStyle");var F$y=F$t.prototype;return F$y.setValue=function(F$y){if(F$y){if("string"==typeof F$y)return void(this._color=F$W.create(F$y));if(F$y instanceof laya.utils.Color)return void(this._color=F$y)}},F$y.reset=function(){this._color=F$W.create("black")},F$y.equal=function(F$y){return"string"==typeof F$y?this._color.strColor===F$y:F$y instanceof laya.utils.Color&&this._color.numColor===F$y.numColor},F$y.toColorStr=function(){return this._color.strColor},F$t.create=function(F$y){var F$j;if(F$y&&("string"==typeof F$y?F$j=F$W.create(F$y):F$y instanceof laya.utils.Color&&(F$j=F$y),F$j))return F$j._drawStyle||(F$j._drawStyle=new F$t(F$y));return laya.webgl.canvas.DrawStyle.DEFAULT},F$A(F$t,["DEFAULT",function(){return this.DEFAULT=new F$t("#000000")}]),F$t}(),F$s=function(){function F$y(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];F$_y.mainContext;this.ib=F$Ey.create(35048),this.vb=F$uy.create(5)}F$r(F$y,"laya.webgl.canvas.Path");var F$j=F$y.prototype;return F$j.addPoint=function(F$y,F$j){this.tempArray.push(F$y,F$j)},F$j.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},F$j.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},F$j.polygon=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A;return this.geomatrys.push(this._curGeomatry=F$A=new F$qy(F$y,F$j,F$t,F$k,F$T,F$Y)),F$k||(F$A.fill=!1),null==F$Y&&(F$A.borderWidth=0),F$A},F$j.setGeomtry=function(F$y){this.geomatrys.push(this._curGeomatry=F$y)},F$j.drawLine=function(F$y,F$j,F$t,F$k,F$T){var F$Y;return this.closePath?this.geomatrys.push(this._curGeomatry=F$Y=new F$Uy(F$y,F$j,F$t,F$k,F$T)):this.geomatrys.push(this._curGeomatry=F$Y=new F$my(F$y,F$j,F$t,F$k,F$T)),F$Y.fill=!1,F$Y},F$j.update=function(){var F$y=this.ib._byteLength,F$j=this.geomatrys.length;this.offset=F$y;for(var F$t=this.geoStart;F$t<F$j;F$t++)this.geomatrys[F$t].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=F$j,this.count=(this.ib._byteLength-F$y)/F$zy.BYTES_PIDX},F$j.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},F$j.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},F$y}(),F$Z=function(){function F$X(){}F$r(F$X,"laya.webgl.canvas.save.SaveBase");var F$y=F$X.prototype;return F$v.imps(F$y,{"laya.webgl.canvas.save.ISaveData":!0}),F$y.isSaveMark=function(){return!1},F$y.restore=function(F$y){this._dataObj[this._valueName]=this._value,(F$X._cache[F$X._cache._length++]=this)._newSubmit&&(F$y._curSubmit=F$Yy.RENDERBASE,F$y._renderKey=0)},F$X._createArray=function(){var F$y=[];return F$y._length=0,F$y},F$X._init=function(){var F$y=F$X._namemap={};return F$y[1]="ALPHA",F$y[2]="fillStyle",F$y[8]="font",F$y[256]="lineWidth",F$y[512]="strokeStyle",F$y[8192]="_mergeID",F$y[1024]=F$y[2048]=F$y[4096]=[],F$y[16384]="textBaseline",F$y[32768]="textAlign",F$y[65536]="_nBlendType",F$y[1048576]="shader",F$y[2097152]="filters",F$y},F$X.save=function(F$y,F$j,F$t,F$k){if((F$y._saveMark._saveuse&F$j)!==F$j){F$y._saveMark._saveuse|=F$j;var F$T=F$X._cache,F$Y=0<F$T._length?F$T[--F$T._length]:new F$X;F$Y._value=F$t[F$Y._valueName=F$X._namemap[F$j]],F$Y._dataObj=F$t,F$Y._newSubmit=F$k;var F$A=F$y._save;F$A[F$A._length++]=F$Y}},F$X._cache=laya.webgl.canvas.save.SaveBase._createArray(),F$X._namemap=F$X._init(),F$X}(),F$R=function(){function F$Y(){this._clipRect=new F$f}F$r(F$Y,"laya.webgl.canvas.save.SaveClipRect");var F$y=F$Y.prototype;return F$v.imps(F$y,{"laya.webgl.canvas.save.ISaveData":!0}),F$y.isSaveMark=function(){return!1},F$y.restore=function(F$y){F$y._clipRect=this._clipSaveRect,(F$Y._cache[F$Y._cache._length++]=this)._submitScissor.submitLength=F$y._submits._length-this._submitScissor.submitIndex,F$y._curSubmit=F$Yy.RENDERBASE,F$y._renderKey=0},F$Y.save=function(F$y,F$j){if(131072!=(131072&F$y._saveMark._saveuse)){F$y._saveMark._saveuse|=131072;var F$t=F$Y._cache,F$k=0<F$t._length?F$t[--F$t._length]:new F$Y;F$k._clipSaveRect=F$y._clipRect,F$y._clipRect=F$k._clipRect.copyFrom(F$y._clipRect),F$k._submitScissor=F$j;var F$T=F$y._save;F$T[F$T._length++]=F$k}},F$A(F$Y,["_cache",function(){return this._cache=F$Z._createArray()}]),F$Y}(),F$B=function(){function F$$(){this._contextX=0,this._contextY=0,this._clipRect=new F$f,this._rect=new F$f,this._matrix=new F$d}F$r(F$$,"laya.webgl.canvas.save.SaveClipRectStencil");var F$y=F$$.prototype;return F$v.imps(F$y,{"laya.webgl.canvas.save.ISaveData":!0}),F$y.isSaveMark=function(){return!1},F$y.restore=function(F$y){F$Dy.restore(F$y,this._rect,this._saveMatrix,this._contextX,this._contextY),F$y._clipRect=this._clipSaveRect,F$y._curMat=this._saveMatrix,F$y._x=this._contextX,F$y._y=this._contextY,F$$._cache[F$$._cache._length++]=this,F$y._curSubmit=F$Yy.RENDERBASE},F$$.save=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){if(262144!=(262144&F$y._saveMark._saveuse)){F$y._saveMark._saveuse|=262144;var F$D=F$$._cache,F$l=0<F$D._length?F$D[--F$D._length]:new F$$;F$l._clipSaveRect=F$y._clipRect,F$l._clipRect.setTo(F$A,F$X,F$I,F$b),F$y._clipRect=F$l._clipRect,F$l._rect.x=F$t,F$l._rect.y=F$k,F$l._rect.width=F$T,F$l._rect.height=F$Y,F$l._contextX=F$y._x,F$l._contextY=F$y._y,F$l._saveMatrix=F$y._curMat,F$y._curMat.copyTo(F$l._matrix),F$y._curMat=F$l._matrix,F$l._submitStencil=F$j;var F$r=F$y._save;F$r[F$r._length++]=F$l}},F$A(F$$,["_cache",function(){return this._cache=F$Z._createArray()}]),F$$}(),F$c=function(){function F$k(){this._saveuse=0}F$r(F$k,"laya.webgl.canvas.save.SaveMark");var F$y=F$k.prototype;return F$v.imps(F$y,{"laya.webgl.canvas.save.ISaveData":!0}),F$y.isSaveMark=function(){return!0},F$y.restore=function(F$y){F$y._saveMark=this._preSaveMark,F$k._no[F$k._no._length++]=this},F$k.Create=function(F$y){var F$j=F$k._no,F$t=0<F$j._length?F$j[--F$j._length]:new F$k;return F$t._saveuse=0,F$t._preSaveMark=F$y._saveMark,F$y._saveMark=F$t},F$A(F$k,["_no",function(){return this._no=F$Z._createArray()}]),F$k}(),F$L=function(){function F$Y(){this._matrix=new F$d}F$r(F$Y,"laya.webgl.canvas.save.SaveTransform");var F$y=F$Y.prototype;return F$v.imps(F$y,{"laya.webgl.canvas.save.ISaveData":!0}),F$y.isSaveMark=function(){return!1},F$y.restore=function(F$y){F$y._curMat=this._savematrix,F$Y._no[F$Y._no._length++]=this},F$Y.save=function(F$y){var F$j=F$y._saveMark;if(2048!=(2048&F$j._saveuse)){F$j._saveuse|=2048;var F$t=F$Y._no,F$k=0<F$t._length?F$t[--F$t._length]:new F$Y;F$k._savematrix=F$y._curMat,F$y._curMat=F$y._curMat.copyTo(F$k._matrix);var F$T=F$y._save;F$T[F$T._length++]=F$k}},F$A(F$Y,["_no",function(){return this._no=F$Z._createArray()}]),F$Y}(),F$o=function(){function F$T(){}F$r(F$T,"laya.webgl.canvas.save.SaveTranslate");var F$y=F$T.prototype;return F$v.imps(F$y,{"laya.webgl.canvas.save.ISaveData":!0}),F$y.isSaveMark=function(){return!1},F$y.restore=function(F$y){F$y._curMat;F$y._x=this._x,F$y._y=this._y,F$T._no[F$T._no._length++]=this},F$T.save=function(F$y){var F$j=F$T._no,F$t=0<F$j._length?F$j[--F$j._length]:new F$T;F$t._x=F$y._x,F$t._y=F$y._y;var F$k=F$y._save;F$k[F$k._length++]=F$t},F$A(F$T,["_no",function(){return this._no=F$Z._createArray()}]),F$T}(),F$i=function(){function F$y(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new F$f}F$r(F$y,"laya.webgl.resource.RenderTargetMAX");var F$j=F$y.prototype;return F$j.setSP=function(F$y){this._sp=F$y},F$j.size=function(F$y,F$j){var F$t=this;this._width!==F$y||this._height!==F$j?(this.repaint=!0,this._width=F$y,this._height=F$j,this.target?this.target.size(F$y,F$j):this.target=F$xy.create(F$y,F$j),this.target.hasListener("recovered")||this.target.on("recovered",this,function(F$y){F$v.timer.callLater(F$t._sp,F$t._sp.repaint)})):this.target.size(F$y,F$j)},F$j._flushToTarget=function(F$y,F$j){if(!F$j._destroy){var F$t=F$Cy.worldScissorTest,F$k=F$Cy.worldClipRect;F$Cy.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,F$Cy.worldScissorTest=!1,F$_y.mainContext.disable(3089);var F$T=F$Cy.worldAlpha,F$Y=F$Cy.worldMatrix4,F$A=F$Cy.worldMatrix,F$X=F$Cy.worldFilters,F$I=F$Cy.worldShaderDefines;if(F$Cy.worldMatrix=F$d.EMPTY,F$Cy.restoreTempArray(),F$Cy.worldMatrix4=F$Cy.TEMPMAT4_ARRAY,F$Cy.worldAlpha=1,F$Cy.worldFilters=null,F$Cy.worldShaderDefines=null,F$Ky.activeShader=null,F$j.start(),F$N.showCanvasMark?F$j.clear(0,1,0,.3):F$j.clear(0,0,0,0),F$y.flush(),F$j.end(),F$Ky.activeShader=null,F$Cy.worldAlpha=F$T,F$Cy.worldMatrix4=F$Y,F$Cy.worldMatrix=F$A,F$Cy.worldFilters=F$X,F$Cy.worldShaderDefines=F$I,F$Cy.worldScissorTest=F$t){var F$b=F$Cy.height-F$k.y-F$k.height;F$_y.mainContext.scissor(F$k.x,F$b,F$k.width,F$k.height),F$_y.mainContext.enable(3089)}F$Cy.worldClipRect=F$k}},F$j.flush=function(F$y){this.repaint&&(this._flushToTarget(F$y,this.target),this.repaint=!1)},F$j.drawTo=function(F$y,F$j,F$t,F$k,F$T){F$y.drawTexture(this.target.getTexture(),F$j,F$t,F$k,F$T,0,0)},F$j.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},F$y}(),F$E=function(){function F$y(){this.ALPHA=1,this.shaderType=0,this.defines=new F$Qy}return F$r(F$y,"laya.webgl.shader.d2.Shader2D"),F$y.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},F$y.__init__=function(){var F$y,F$j;F$cy.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),F$cy.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),F$cy.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),F$cy.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),F$cy.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),F$cy.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),F$cy.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),F$cy.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),F$y="attribute vec4 position;\n",F$y+="attribute vec2 texcoord;\n",F$y+="uniform vec2 size;\n\n",F$y+="#ifdef WORLDMAT\n",F$y+="  uniform mat4 mmat;\n",F$y+="#endif\n",F$y+="varying vec2 v_texcoord;\n",F$y+="void main() {\n",F$y+="  #ifdef WORLDMAT\n",F$y+="  vec4 pos=mmat*position;\n",F$y+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",F$y+="  #else\n",F$y+="  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",F$y+="  #endif\n\n",F$y+="  v_texcoord = texcoord;\n",F$y+="}",F$j="precision mediump float;\n",F$j+="varying vec2 v_texcoord;\n",F$j+="uniform sampler2D texture;\n\n",F$j+="#ifdef COLORMUL\n",F$j+="  uniform vec4 colorMul;\n",F$j+="#endif\n\n",F$j+="#ifdef TXTALPHA\n",F$j+="  uniform sampler2D texture1;\n",F$j+="#endif\n\n",F$j+="uniform float alpha;\n",F$j+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',F$j+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',F$j+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',F$j+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',F$j+="void main() {\n",F$j+="   vec4 color= texture2D(texture, v_texcoord);\n\n",F$j+="   #ifdef TXTCOMPRESS\n",F$j+="      color.rgb *= color.a;\n",F$j+="   #endif\n\n",F$j+="   #ifdef TXTALPHA\n",F$j+="      color.rgba *= texture2D(texture1, v_texcoord).a;\n",F$j+="   #endif\n\n",F$j+="   color.a*=alpha;\n",F$j+="   color.rgb*=alpha;\n",F$j+="   #ifdef COLORMUL\n",F$j+="      color.rgba *= colorMul;\n",F$j+="   #endif\n\n",F$j+="   gl_FragColor=color;\n",F$j+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',F$j+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',F$j+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',F$j+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',F$j+="}",F$cy.preCompile2D(0,1,F$y,F$j,null),F$y="attribute vec4 position;\n",F$y+="uniform vec2 size;\n",F$y+="uniform mat4 mmat;\n",F$y+="void main() {\n",F$y+="  vec4 pos=mmat*position;\n",F$y+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",F$y+="}",F$j="precision mediump float;\n",F$j+="uniform vec4 color;\n",F$j+="uniform float alpha;\n",F$j+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',F$j+="void main() {\n",F$j+="\t vec4 a = vec4(color.r, color.g, color.b, color.a);\n",F$j+="\t a.w = alpha;\n",F$j+="\t a.xyz *= alpha;\n",F$j+="\t gl_FragColor = a;\n",F$j+='\t #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',F$j+="}",F$cy.preCompile2D(0,2,F$y,F$j,null),F$y="attribute vec4 position;\n",F$y+="attribute vec3 a_color;\n",F$y+="uniform mat4 mmat;\n",F$y+="uniform mat4 u_mmat2;\n",F$y+="uniform vec2 u_pos;\n",F$y+="uniform vec2 size;\n",F$y+="varying vec3 color;\n",F$y+="void main(){\n",F$y+="  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n",F$y+="  vec4 pos=mmat*u_mmat2*tPos;\n",F$y+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",F$y+="  color=a_color;\n",F$y+="}",F$j="precision mediump float;\n",F$j+="varying vec3 color;\n",F$j+="uniform float alpha;\n",F$j+="void main(){\n",F$j+="  gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n",F$j+="\t gl_FragColor.rgb*=alpha;\n",F$j+="}",F$cy.preCompile2D(0,4,F$y,F$j,null),F$y="attribute vec4 position;\n",F$y+="attribute vec2 texcoord;\n",F$y+="uniform vec2 size;\n\n",F$y+="#ifdef WORLDMAT\n",F$y+="  uniform mat4 mmat;\n",F$y+="#endif\n",F$y+="varying vec2 v_texcoord;\n",F$y+="void main() {\n",F$y+="  #ifdef WORLDMAT\n",F$y+="    vec4 pos=mmat*position;\n",F$y+="    gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",F$y+="  #else\n",F$y+="    gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",F$y+="  #endif\n\n",F$y+="  v_texcoord = texcoord;\n",F$y+="}",F$j="#ifdef FSHIGHPRECISION\n",F$j+="   precision highp float;\n",F$j+="#else\n",F$j+="   precision mediump float;\n",F$j+="#endif\n",F$j+="varying vec2 v_texcoord;\n",F$j+="uniform sampler2D texture;\n\n",F$j+="#ifdef TXTALPHA\n",F$j+="   uniform sampler2D texture1;\n",F$j+="#endif\n\n",F$j+="uniform float alpha;\n",F$j+="uniform vec4 u_TexRange;\n",F$j+="uniform vec2 u_offset;\n",F$j+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',F$j+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',F$j+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',F$j+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',F$j+="void main() {\n",F$j+="   vec2 newTexCoord;\n",F$j+="   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n",F$j+="   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n",F$j+="   vec4 color= texture2D(texture, newTexCoord);\n\n",F$j+="   #ifdef TXTALPHA\n",F$j+="      color.a = texture2D(texture1, newTexCoord).a;\n",F$j+="   #endif\n\n",F$j+="   color.a*=alpha;\n",F$j+="   gl_FragColor=color;\n",F$j+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',F$j+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',F$j+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',F$j+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',F$j+="}",F$cy.preCompile2D(0,256,F$y,F$j,null),F$y="attribute vec2 position;\n",F$y+="attribute vec2 texcoord;\n",F$y+="attribute vec4 color;\n",F$y+="uniform vec2 size;\n",F$y+="uniform float offsetX;\n",F$y+="uniform float offsetY;\n",F$y+="uniform mat4 mmat;\n",F$y+="uniform mat4 u_mmat2;\n",F$y+="varying vec2 v_texcoord;\n",F$y+="varying vec4 v_color;\n",F$y+="void main() {\n",F$y+="  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n",F$y+="  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",F$y+="  v_color = color;\n",F$y+="  v_color.rgb *= v_color.a;\n",F$y+="  v_texcoord = texcoord;  \n",F$y+="}",F$j="precision mediump float;\n",F$j+="varying vec2 v_texcoord;\n",F$j+="varying vec4 v_color;\n",F$j+="uniform sampler2D texture;\n\n",F$j+="#ifdef TXTALPHA\n",F$j+="  uniform sampler2D texture1;\n",F$j+="#endif\n\n",F$j+="uniform float alpha;\n",F$j+="void main() {\n",F$j+="\t vec4 t_color = texture2D(texture, v_texcoord);\n\n",F$j+="  #ifdef TXTALPHA\n",F$j+="    t_color.a = texture2D(texture1, v_texcoord).a;\n",F$j+="  #endif\n\n",F$j+="\t gl_FragColor = t_color.rgba * v_color;\n",F$j+="\t gl_FragColor *= alpha;\n",F$j+="}",F$cy.preCompile2D(0,512,F$y,F$j,null)},F$y}(),F$u=function(){function F$j(F$y,F$j,F$t){this._value=0,this._name2int=F$y,this._int2name=F$j,this._int2nameMap=F$t}F$r(F$j,"laya.webgl.shader.ShaderDefines");var F$y=F$j.prototype;return F$y.add=function(F$y){return"string"==typeof F$y&&(F$y=this._name2int[F$y]),this._value|=F$y,this._value},F$y.addInt=function(F$y){return this._value|=F$y,this._value},F$y.remove=function(F$y){return"string"==typeof F$y&&(F$y=this._name2int[F$y]),this._value&=~F$y,this._value},F$y.isDefine=function(F$y){return(this._value&F$y)===F$y},F$y.getValue=function(){return this._value},F$y.setValue=function(F$y){this._value=F$y},F$y.toNameDic=function(){var F$y=this._int2nameMap[this._value];return F$y||F$j._toText(this._value,this._int2name,this._int2nameMap)},F$j._reg=function(F$y,F$j,F$t,F$k){F$k[F$t[F$y]=F$j]=F$y},F$j._toText=function(F$y,F$j,F$t){var F$k=F$t[F$y];if(F$k)return F$k;for(var F$T={},F$Y=1,F$A=0;F$A<32&&!(F$y<(F$Y=1<<F$A));F$A++)if(F$y&F$Y){var F$X=F$j[F$Y];F$X&&(F$T[F$X]="")}return F$t[F$y]=F$T},F$j._toInt=function(F$y,F$j){for(var F$t=F$y.split("."),F$k=0,F$T=0,F$Y=F$t.length;F$T<F$Y;F$T++){var F$A=F$j[F$t[F$T]];if(!F$A)throw new Error("Defines to int err:"+F$y+"/"+F$t[F$T]);F$k|=F$A}return F$k},F$j}(),F$yy=function(){function F$A(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new F$d}F$r(F$A,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var F$y=F$A.prototype;return F$y.init=function(F$y,F$j,F$t){if(F$j)this._vs=F$j;else{this._vs=[];var F$k=F$y.width,F$T=F$y.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(F$k,0,1,0,1,1,1,1),this._vs.push(F$k,F$T,1,1,1,1,1,1),this._vs.push(0,F$T,0,1,1,1,1,1)}F$t?this._ps=F$t:(F$A._defaultPS||(F$A._defaultPS=[]).push(0,1,3,3,1,2),this._ps=F$A._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=F$y},F$y.init2=function(F$y,F$j,F$t,F$k,F$T){this.transform&&(this.transform=null),F$t?this._ps=F$t:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=F$k,this._uvs=F$T,this.mEleNum=this._ps.length,this.mTexture=F$y,(F$n.isConchNode||F$n.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},F$y._initMyData=function(){var F$y=0,F$j=0,F$t=4*this._verticles.length;this._vs=F$A._tempVS;var F$k=!1;if(F$n.isConchNode||F$n.isConchApp?(this._vs.length=F$t,F$k=!0):this._vs.length<F$t&&(this._vs.length=F$t,F$k=!0),F$A._tVSLen=F$t,F$k)for(;F$y<F$t;)this._vs[F$y]=this._verticles[F$j],this._vs[F$y+1]=this._verticles[F$j+1],this._vs[F$y+2]=this._uvs[F$j],this._vs[F$y+3]=this._uvs[F$j+1],this._vs[F$y+4]=1,this._vs[F$y+5]=1,this._vs[F$y+6]=1,this._vs[F$y+7]=1,F$y+=8,F$j+=2;else for(;F$y<F$t;)this._vs[F$y]=this._verticles[F$j],this._vs[F$y+1]=this._verticles[F$j+1],this._vs[F$y+2]=this._uvs[F$j],this._vs[F$y+3]=this._uvs[F$j+1],F$y+=8,F$j+=2},F$y.getData2=function(F$y,F$j,F$t){var F$k;this.mVBBuffer=F$y,this.mIBBuffer=F$j,this._initMyData(),F$y.appendEx2(this._vs,Float32Array,F$A._tVSLen,4),this._indexStart=F$j._byteLength,(F$k=F$A._tempIB).length<this._ps.length&&(F$k.length=this._ps.length);for(var F$T=0,F$Y=this._ps.length;F$T<F$Y;F$T++)F$k[F$T]=this._ps[F$T]+F$t;F$j.appendEx2(F$k,Uint16Array,this._ps.length,2)},F$y.getData=function(F$y,F$j,F$t){if(this.mVBBuffer=F$y,this.mIBBuffer=F$j,F$y.append(this.mVBData),this._indexStart=F$j._byteLength,this.mIBData.start!=F$t){for(var F$k=0,F$T=this._ps.length;F$k<F$T;F$k++)this.mIBData[F$k]=this._ps[F$k]+F$t;this.mIBData.start=F$t}F$j.append(this.mIBData)},F$y.render=function(F$y,F$j,F$t){if(F$n.isWebGL&&this.mTexture){F$y._renderKey=0,F$y._shader2D.glTexture=null,F$jy.getInstance().addSkinMesh(this);var F$k=F$Yy.createShape(F$y,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,F$Py.create(512,0));this.transform||(this.transform=F$d.EMPTY),this.transform.translate(F$j,F$t),F$d.mul(this.transform,F$y._curMat,this._tempMatrix),this.transform.translate(-F$j,-F$t);var F$T=F$k.shaderValue,F$Y=F$T.u_mmat2||F$Cy.getMatrArray();F$Cy.mat2MatArray(this._tempMatrix,F$Y),F$T.textureHost=this.mTexture,F$T.offsetX=0,F$T.offsetY=0,F$T.u_mmat2=F$Y,F$T.ALPHA=F$y._shader2D.ALPHA,F$y._submits[F$y._submits._length++]=F$k}else F$n.isConchApp&&this.mTexture&&(this.transform||(this.transform=F$d.EMPTY),F$y.setSkinMesh&&F$y.setSkinMesh(F$j,F$t,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},F$A._tempVS=[],F$A._tempIB=[],F$A._defaultPS=null,F$A._tVSLen=0,F$A}(),F$jy=function(){function F$y(){this.ib=null,this.vb=null;F$_y.mainContext;this.ib=F$Ey.create(35048),this.vb=F$uy.create(8)}F$r(F$y,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var F$j=F$y.prototype;return F$j.addSkinMesh=function(F$y){F$y.getData2(this.vb,this.ib,this.vb._byteLength/32)},F$j.reset=function(){this.vb.clear(),this.ib.clear()},F$y.getInstance=function(){return F$y.instance=F$y.instance||new F$y},F$y.instance=null,F$y}(),F$ty=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===F$I&&(F$I=0),this.x=F$y,this.y=F$j,this.width=F$t,this.height=F$k,this.edges=F$T,this.color=F$Y,this.borderWidth=F$A,this.borderColor=F$X}F$r(F$y,"laya.webgl.shapes.BasePoly");var F$j=F$y.prototype;return F$v.imps(F$j,{"laya.webgl.shapes.IShape":!0}),F$j.getData=function(F$y,F$j,F$t){},F$j.rebuild=function(F$y){},F$j.setMatrix=function(F$y){},F$j.needUpdate=function(F$y){return!0},F$j.sector=function(F$y,F$j,F$t){var F$k=this.x,F$T=this.y,F$Y=this.edges,F$A=(this.r1-this.r0)/F$Y,F$X=this.width,F$I=this.height,F$b=this.color,F$D=(F$b>>16&255)/255,F$l=(F$b>>8&255)/255,F$r=(255&F$b)/255;F$y.push(F$k,F$T,F$D,F$l,F$r);for(var F$$=0;F$$<F$Y+1;F$$++)F$y.push(F$k+Math.sin(F$A*F$$+this.r0)*F$X,F$T+Math.cos(F$A*F$$+this.r0)*F$I),F$y.push(F$D,F$l,F$r);for(F$$=0;F$$<F$Y;F$$++)F$j.push(F$t,F$t+F$$+1,F$t+F$$+2)},F$j.createLine2=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A,F$X,F$I,F$b,F$D,F$l,F$r,F$$,F$W,F$z,F$V,F$n,F$C,F$M,F$_,F$e,F$v,F$N,F$P,F$d,F$p=F$y.concat(),F$f=F$T,F$Q=this.borderColor,F$m=(F$Q>>16&255)/255,F$U=(F$Q>>8&255)/255,F$q=(255&F$Q)/255,F$w=F$p.length/2,F$S=F$k,F$H=F$t/2;F$I=F$p[0],F$b=F$p[1],F$z=F$I-(F$D=F$p[2]),F$W=(F$W=-(F$b-(F$l=F$p[3])))/(F$d=Math.sqrt(F$W*F$W+F$z*F$z))*F$H,F$z=F$z/F$d*F$H,F$f.push(F$I-F$W+this.x,F$b-F$z+this.y,F$m,F$U,F$q,F$I+F$W+this.x,F$b+F$z+this.y,F$m,F$U,F$q);for(var F$K=1;F$K<F$w-1;F$K++)F$I=F$p[2*(F$K-1)],F$b=F$p[2*(F$K-1)+1],F$D=F$p[2*F$K],F$l=F$p[2*F$K+1],F$r=F$p[2*(F$K+1)],F$$=F$p[2*(F$K+1)+1],F$z=F$I-F$D,F$n=F$D-F$r,F$_=(-(F$W=(F$W=-(F$b-F$l))/(F$d=Math.sqrt(F$W*F$W+F$z*F$z))*F$H)+F$I)*(-(F$z=F$z/F$d*F$H)+F$l)-(-F$W+F$D)*(-F$z+F$b),F$N=(-(F$V=(F$V=-(F$l-F$$))/(F$d=Math.sqrt(F$V*F$V+F$n*F$n))*F$H)+F$r)*(-(F$n=F$n/F$d*F$H)+F$l)-(-F$V+F$D)*(-F$n+F$$),F$P=(F$C=-F$z+F$b-(-F$z+F$l))*(F$v=-F$V+F$D-(-F$V+F$r))-(F$e=-F$n+F$$-(-F$n+F$l))*(F$M=-F$W+F$D-(-F$W+F$I)),Math.abs(F$P)<.1?(F$P+=10.1,F$f.push(F$D-F$W+this.x,F$l-F$z+this.y,F$m,F$U,F$q,F$D+F$W+this.x,F$l+F$z+this.y,F$m,F$U,F$q)):(((F$A=(F$M*F$N-F$v*F$_)/F$P)-F$D)*(F$A-F$D)+((F$X=(F$e*F$_-F$C*F$N)/F$P)-F$l)+(F$X-F$l),F$f.push(F$A+this.x,F$X+this.y,F$m,F$U,F$q,F$D-(F$A-F$D)+this.x,F$l-(F$X-F$l)+this.y,F$m,F$U,F$q));F$I=F$p[F$p.length-4],F$b=F$p[F$p.length-3],F$z=F$I-(F$D=F$p[F$p.length-2]),F$W=(F$W=-(F$b-(F$l=F$p[F$p.length-1])))/(F$d=Math.sqrt(F$W*F$W+F$z*F$z))*F$H,F$z=F$z/F$d*F$H,F$f.push(F$D-F$W+this.x,F$l-F$z+this.y,F$m,F$U,F$q,F$D+F$W+this.x,F$l+F$z+this.y,F$m,F$U,F$q);var F$x=F$Y;for(F$K=1;F$K<F$x;F$K++)F$j.push(F$S+2*(F$K-1),F$S+2*(F$K-1)+1,F$S+2*F$K+1,F$S+2*F$K+1,F$S+2*F$K,F$S+2*(F$K-1));return F$f},F$j.createLine=function(F$y,F$j,F$t,F$k){var F$T=F$y.concat(),F$Y=F$y,F$A=this.borderColor,F$X=(F$A>>16&255)/255,F$I=(F$A>>8&255)/255,F$b=(255&F$A)/255;F$T.splice(0,5);var F$D,F$l,F$r,F$$,F$W,F$z,F$V,F$n,F$C,F$M,F$_,F$e,F$v,F$N,F$P,F$d,F$p,F$f,F$Q,F$m,F$U=F$T.length/5,F$q=F$k,F$w=F$t/2;F$r=F$T[0],F$$=F$T[1],F$M=F$r-(F$W=F$T[5]),F$C=(F$C=-(F$$-(F$z=F$T[6])))/(F$m=Math.sqrt(F$C*F$C+F$M*F$M))*F$w,F$M=F$M/F$m*F$w,F$Y.push(F$r-F$C,F$$-F$M,F$X,F$I,F$b,F$r+F$C,F$$+F$M,F$X,F$I,F$b);for(var F$S=1;F$S<F$U-1;F$S++)F$r=F$T[5*(F$S-1)],F$$=F$T[5*(F$S-1)+1],F$W=F$T[5*F$S],F$z=F$T[5*F$S+1],F$V=F$T[5*(F$S+1)],F$n=F$T[5*(F$S+1)+1],F$M=F$r-F$W,F$e=F$W-F$V,F$P=(-(F$C=(F$C=-(F$$-F$z))/(F$m=Math.sqrt(F$C*F$C+F$M*F$M))*F$w)+F$r)*(-(F$M=F$M/F$m*F$w)+F$z)-(-F$C+F$W)*(-F$M+F$$),F$f=(-(F$_=(F$_=-(F$z-F$n))/(F$m=Math.sqrt(F$_*F$_+F$e*F$e))*F$w)+F$V)*(-(F$e=F$e/F$m*F$w)+F$z)-(-F$_+F$W)*(-F$e+F$n),F$Q=(F$v=-F$M+F$$-(-F$M+F$z))*(F$p=-F$_+F$W-(-F$_+F$V))-(F$d=-F$e+F$n-(-F$e+F$z))*(F$N=-F$C+F$W-(-F$C+F$r)),Math.abs(F$Q)<.1?(F$Q+=10.1,F$Y.push(F$W-F$C,F$z-F$M,F$X,F$I,F$b,F$W+F$C,F$z+F$M,F$X,F$I,F$b)):(((F$D=(F$N*F$f-F$p*F$P)/F$Q)-F$W)*(F$D-F$W)+((F$l=(F$d*F$P-F$v*F$f)/F$Q)-F$z)+(F$l-F$z),F$Y.push(F$D,F$l,F$X,F$I,F$b,F$W-(F$D-F$W),F$z-(F$l-F$z),F$X,F$I,F$b));F$r=F$T[F$T.length-10],F$$=F$T[F$T.length-9],F$M=F$r-(F$W=F$T[F$T.length-5]),F$C=(F$C=-(F$$-(F$z=F$T[F$T.length-4])))/(F$m=Math.sqrt(F$C*F$C+F$M*F$M))*F$w,F$M=F$M/F$m*F$w,F$Y.push(F$W-F$C,F$z-F$M,F$X,F$I,F$b,F$W+F$C,F$z+F$M,F$X,F$I,F$b);var F$H=this.edges+1;for(F$S=1;F$S<F$H;F$S++)F$j.push(F$q+2*(F$S-1),F$q+2*(F$S-1)+1,F$q+2*F$S+1,F$q+2*F$S+1,F$q+2*F$S,F$q+2*(F$S-1));return F$Y},F$j.createLoopLine=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$y.concat(),F$X=F$T||F$y,F$I=this.borderColor,F$b=(F$I>>16&255)/255,F$D=(F$I>>8&255)/255,F$l=(255&F$I)/255;F$A.splice(0,5);var F$r=[F$A[0],F$A[1]],F$$=[F$A[F$A.length-5],F$A[F$A.length-4]],F$W=F$$[0]+.5*(F$r[0]-F$$[0]),F$z=F$$[1]+.5*(F$r[1]-F$$[1]);F$A.unshift(F$W,F$z,0,0,0),F$A.push(F$W,F$z,0,0,0);var F$V,F$n,F$C,F$M,F$_,F$e,F$v,F$N,F$P,F$d,F$p,F$f,F$Q,F$m,F$U,F$q,F$w,F$S,F$H,F$K,F$x=F$A.length/5,F$F=F$k,F$G=F$t/2;F$C=F$A[0],F$M=F$A[1],F$d=F$C-(F$_=F$A[5]),F$P=(F$P=-(F$M-(F$e=F$A[6])))/(F$K=Math.sqrt(F$P*F$P+F$d*F$d))*F$G,F$d=F$d/F$K*F$G,F$X.push(F$C-F$P,F$M-F$d,F$b,F$D,F$l,F$C+F$P,F$M+F$d,F$b,F$D,F$l);for(var F$g=1;F$g<F$x-1;F$g++)F$C=F$A[5*(F$g-1)],F$M=F$A[5*(F$g-1)+1],F$_=F$A[5*F$g],F$e=F$A[5*F$g+1],F$v=F$A[5*(F$g+1)],F$N=F$A[5*(F$g+1)+1],F$d=F$C-F$_,F$f=F$_-F$v,F$U=(-(F$P=(F$P=-(F$M-F$e))/(F$K=Math.sqrt(F$P*F$P+F$d*F$d))*F$G)+F$C)*(-(F$d=F$d/F$K*F$G)+F$e)-(-F$P+F$_)*(-F$d+F$M),F$S=(-(F$p=(F$p=-(F$e-F$N))/(F$K=Math.sqrt(F$p*F$p+F$f*F$f))*F$G)+F$v)*(-(F$f=F$f/F$K*F$G)+F$e)-(-F$p+F$_)*(-F$f+F$N),F$H=(F$Q=-F$d+F$M-(-F$d+F$e))*(F$w=-F$p+F$_-(-F$p+F$v))-(F$q=-F$f+F$N-(-F$f+F$e))*(F$m=-F$P+F$_-(-F$P+F$C)),Math.abs(F$H)<.1?(F$H+=10.1,F$X.push(F$_-F$P,F$e-F$d,F$b,F$D,F$l,F$_+F$P,F$e+F$d,F$b,F$D,F$l)):(((F$V=(F$m*F$S-F$w*F$U)/F$H)-F$_)*(F$V-F$_)+((F$n=(F$q*F$U-F$Q*F$S)/F$H)-F$e)+(F$n-F$e),F$X.push(F$V,F$n,F$b,F$D,F$l,F$_-(F$V-F$_),F$e-(F$n-F$e),F$b,F$D,F$l));F$Y&&(F$j=F$Y);var F$a=this.edges+1;for(F$g=1;F$g<F$a;F$g++)F$j.push(F$F+2*(F$g-1),F$F+2*(F$g-1)+1,F$F+2*F$g+1,F$F+2*F$g+1,F$F+2*F$g,F$F+2*(F$g-1));return F$j.push(F$F+2*(F$g-1),F$F+2*(F$g-1)+1,F$F+1,F$F+1,F$F,F$F+2*(F$g-1)),F$X},F$y}(),F$ky=function(){function F$z(){}return F$r(F$z,"laya.webgl.shapes.Earcut"),F$z.earcut=function(F$y,F$j,F$t){F$t=F$t||2;var F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D=F$j&&F$j.length,F$l=F$D?F$j[0]*F$t:F$y.length,F$r=F$z.linkedList(F$y,0,F$l,F$t,!0),F$$=[];if(!F$r)return F$$;if(F$D&&(F$r=F$z.eliminateHoles(F$y,F$j,F$r,F$t)),F$y.length>80*F$t){F$k=F$Y=F$y[0],F$T=F$A=F$y[1];for(var F$W=F$t;F$W<F$l;F$W+=F$t)(F$X=F$y[F$W])<F$k&&(F$k=F$X),(F$I=F$y[F$W+1])<F$T&&(F$T=F$I),F$Y<F$X&&(F$Y=F$X),F$A<F$I&&(F$A=F$I);F$b=0!==(F$b=Math.max(F$Y-F$k,F$A-F$T))?1/F$b:0}return F$z.earcutLinked(F$r,F$$,F$t,F$k,F$T,F$b),F$$},F$z.linkedList=function(F$y,F$j,F$t,F$k,F$T){var F$Y,F$A;if(F$T===0<F$z.signedArea(F$y,F$j,F$t,F$k))for(F$Y=F$j;F$Y<F$t;F$Y+=F$k)F$A=F$z.insertNode(F$Y,F$y[F$Y],F$y[F$Y+1],F$A);else for(F$Y=F$t-F$k;F$j<=F$Y;F$Y-=F$k)F$A=F$z.insertNode(F$Y,F$y[F$Y],F$y[F$Y+1],F$A);return F$A&&F$z.equals(F$A,F$A.next)&&(F$z.removeNode(F$A),F$A=F$A.next),F$A},F$z.filterPoints=function(F$y,F$j){if(!F$y)return F$y;F$j||(F$j=F$y);var F$t,F$k=F$y;do{if(F$t=!1,F$k.steiner||!F$z.equals(F$k,F$k.next)&&0!==F$z.area(F$k.prev,F$k,F$k.next))F$k=F$k.next;else{if(F$z.removeNode(F$k),(F$k=F$j=F$k.prev)===F$k.next)break;F$t=!0}}while(F$t||F$k!==F$j);return F$j},F$z.earcutLinked=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){if(F$y){!F$A&&F$Y&&F$z.indexCurve(F$y,F$k,F$T,F$Y);for(var F$X,F$I,F$b=F$y;F$y.prev!==F$y.next;)if(F$X=F$y.prev,F$I=F$y.next,F$Y?F$z.isEarHashed(F$y,F$k,F$T,F$Y):F$z.isEar(F$y))F$j.push(F$X.i/F$t),F$j.push(F$y.i/F$t),F$j.push(F$I.i/F$t),F$z.removeNode(F$y),F$y=F$I.next,F$b=F$I.next;else if((F$y=F$I)===F$b){F$A?1===F$A?(F$y=F$z.cureLocalIntersections(F$y,F$j,F$t),F$z.earcutLinked(F$y,F$j,F$t,F$k,F$T,F$Y,2)):2===F$A&&F$z.splitEarcut(F$y,F$j,F$t,F$k,F$T,F$Y):F$z.earcutLinked(F$z.filterPoints(F$y,null),F$j,F$t,F$k,F$T,F$Y,1);break}}},F$z.isEar=function(F$y){var F$j=F$y.prev,F$t=F$y,F$k=F$y.next;if(0<=F$z.area(F$j,F$t,F$k))return!1;for(var F$T=F$y.next.next;F$T!==F$y.prev;){if(F$z.pointInTriangle(F$j.x,F$j.y,F$t.x,F$t.y,F$k.x,F$k.y,F$T.x,F$T.y)&&0<=F$z.area(F$T.prev,F$T,F$T.next))return!1;F$T=F$T.next}return!0},F$z.isEarHashed=function(F$y,F$j,F$t,F$k){var F$T=F$y.prev,F$Y=F$y,F$A=F$y.next;if(0<=F$z.area(F$T,F$Y,F$A))return!1;for(var F$X=F$T.x<F$Y.x?F$T.x<F$A.x?F$T.x:F$A.x:F$Y.x<F$A.x?F$Y.x:F$A.x,F$I=F$T.y<F$Y.y?F$T.y<F$A.y?F$T.y:F$A.y:F$Y.y<F$A.y?F$Y.y:F$A.y,F$b=F$T.x>F$Y.x?F$T.x>F$A.x?F$T.x:F$A.x:F$Y.x>F$A.x?F$Y.x:F$A.x,F$D=F$T.y>F$Y.y?F$T.y>F$A.y?F$T.y:F$A.y:F$Y.y>F$A.y?F$Y.y:F$A.y,F$l=F$z.zOrder(F$X,F$I,F$j,F$t,F$k),F$r=F$z.zOrder(F$b,F$D,F$j,F$t,F$k),F$$=F$y.nextZ;F$$&&F$$.z<=F$r;){if(F$$!==F$y.prev&&F$$!==F$y.next&&F$z.pointInTriangle(F$T.x,F$T.y,F$Y.x,F$Y.y,F$A.x,F$A.y,F$$.x,F$$.y)&&0<=F$z.area(F$$.prev,F$$,F$$.next))return!1;F$$=F$$.nextZ}for(F$$=F$y.prevZ;F$$&&F$$.z>=F$l;){if(F$$!==F$y.prev&&F$$!==F$y.next&&F$z.pointInTriangle(F$T.x,F$T.y,F$Y.x,F$Y.y,F$A.x,F$A.y,F$$.x,F$$.y)&&0<=F$z.area(F$$.prev,F$$,F$$.next))return!1;F$$=F$$.prevZ}return!0},F$z.cureLocalIntersections=function(F$y,F$j,F$t){var F$k=F$y;do{var F$T=F$k.prev,F$Y=F$k.next.next;!F$z.equals(F$T,F$Y)&&F$z.intersects(F$T,F$k,F$k.next,F$Y)&&F$z.locallyInside(F$T,F$Y)&&F$z.locallyInside(F$Y,F$T)&&(F$j.push(F$T.i/F$t),F$j.push(F$k.i/F$t),F$j.push(F$Y.i/F$t),F$z.removeNode(F$k),F$z.removeNode(F$k.next),F$k=F$y=F$Y),F$k=F$k.next}while(F$k!==F$y);return F$k},F$z.splitEarcut=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$y;do{for(var F$X=F$A.next.next;F$X!==F$A.prev;){if(F$A.i!==F$X.i&&F$z.isValidDiagonal(F$A,F$X)){var F$I=F$z.splitPolygon(F$A,F$X);return F$A=F$z.filterPoints(F$A,F$A.next),F$I=F$z.filterPoints(F$I,F$I.next),F$z.earcutLinked(F$A,F$j,F$t,F$k,F$T,F$Y),void F$z.earcutLinked(F$I,F$j,F$t,F$k,F$T,F$Y)}F$X=F$X.next}F$A=F$A.next}while(F$A!==F$y)},F$z.eliminateHoles=function(F$y,F$j,F$t,F$k){var F$T,F$Y,F$A,F$X,F$I,F$b=[];for(F$T=0,F$Y=F$j.length;F$T<F$Y;F$T++)F$A=F$j[F$T]*F$k,F$X=F$T<F$Y-1?F$j[F$T+1]*F$k:F$y.length,(F$I=F$z.linkedList(F$y,F$A,F$X,F$k,!1))===F$I.next&&(F$I.steiner=!0),F$b.push(F$z.getLeftmost(F$I));for(F$b.sort(F$z.compareX),F$T=0;F$T<F$b.length;F$T++)F$z.eliminateHole(F$b[F$T],F$t),F$t=F$z.filterPoints(F$t,F$t.next);return F$t},F$z.compareX=function(F$y,F$j){return F$y.x-F$j.x},F$z.eliminateHole=function(F$y,F$j){if(F$j=F$z.findHoleBridge(F$y,F$j)){var F$t=F$z.splitPolygon(F$j,F$y);F$z.filterPoints(F$t,F$t.next)}},F$z.findHoleBridge=function(F$y,F$j){var F$t,F$k=F$j,F$T=F$y.x,F$Y=F$y.y,F$A=-1/0;do{if(F$Y<=F$k.y&&F$Y>=F$k.next.y&&F$k.next.y!==F$k.y){var F$X=F$k.x+(F$Y-F$k.y)*(F$k.next.x-F$k.x)/(F$k.next.y-F$k.y);if(F$X<=F$T&&F$A<F$X){if((F$A=F$X)===F$T){if(F$Y===F$k.y)return F$k;if(F$Y===F$k.next.y)return F$k.next}F$t=F$k.x<F$k.next.x?F$k:F$k.next}}F$k=F$k.next}while(F$k!==F$j);if(!F$t)return null;if(F$T===F$A)return F$t.prev;var F$I,F$b=F$t,F$D=F$t.x,F$l=F$t.y,F$r=1/0;for(F$k=F$t.next;F$k!==F$b;)F$T>=F$k.x&&F$k.x>=F$D&&F$T!==F$k.x&&F$z.pointInTriangle(F$Y<F$l?F$T:F$A,F$Y,F$D,F$l,F$Y<F$l?F$A:F$T,F$Y,F$k.x,F$k.y)&&((F$I=Math.abs(F$Y-F$k.y)/(F$T-F$k.x))<F$r||F$I===F$r&&F$k.x>F$t.x)&&F$z.locallyInside(F$k,F$y)&&(F$t=F$k,F$r=F$I),F$k=F$k.next;return F$t},F$z.indexCurve=function(F$y,F$j,F$t,F$k){for(var F$T=F$y;null===F$T.z&&(F$T.z=F$z.zOrder(F$T.x,F$T.y,F$j,F$t,F$k)),F$T.prevZ=F$T.prev,F$T.nextZ=F$T.next,(F$T=F$T.next)!==F$y;);F$T.prevZ.nextZ=null,F$T.prevZ=null,F$z.sortLinked(F$T)},F$z.sortLinked=function(F$y){var F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b=1;do{for(F$t=F$y,F$Y=F$y=null,F$A=0;F$t;){for(F$A++,F$k=F$t,F$j=F$X=0;F$j<F$b&&(F$X++,F$k=F$k.nextZ);F$j++);for(F$I=F$b;0<F$X||0<F$I&&F$k;)0!==F$X&&(0===F$I||!F$k||F$t.z<=F$k.z)?(F$t=(F$T=F$t).nextZ,F$X--):(F$k=(F$T=F$k).nextZ,F$I--),F$Y?F$Y.nextZ=F$T:F$y=F$T,F$T.prevZ=F$Y,F$Y=F$T;F$t=F$k}F$Y.nextZ=null,F$b*=2}while(1<F$A);return F$y},F$z.zOrder=function(F$y,F$j,F$t,F$k,F$T){return(F$y=1431655765&((F$y=858993459&((F$y=252645135&((F$y=16711935&((F$y=32767*(F$y-F$t)*F$T)|F$y<<8))|F$y<<4))|F$y<<2))|F$y<<1))|(F$j=1431655765&((F$j=858993459&((F$j=252645135&((F$j=16711935&((F$j=32767*(F$j-F$k)*F$T)|F$j<<8))|F$j<<4))|F$j<<2))|F$j<<1))<<1},F$z.getLeftmost=function(F$y){for(var F$j=F$y,F$t=F$y;F$j.x<F$t.x&&(F$t=F$j),(F$j=F$j.next)!==F$y;);return F$t},F$z.pointInTriangle=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){return 0<=(F$T-F$A)*(F$j-F$X)-(F$y-F$A)*(F$Y-F$X)&&0<=(F$y-F$A)*(F$k-F$X)-(F$t-F$A)*(F$j-F$X)&&0<=(F$t-F$A)*(F$Y-F$X)-(F$T-F$A)*(F$k-F$X)},F$z.isValidDiagonal=function(F$y,F$j){return F$y.next.i!==F$j.i&&F$y.prev.i!==F$j.i&&!F$z.intersectsPolygon(F$y,F$j)&&F$z.locallyInside(F$y,F$j)&&F$z.locallyInside(F$j,F$y)&&F$z.middleInside(F$y,F$j)},F$z.area=function(F$y,F$j,F$t){return(F$j.y-F$y.y)*(F$t.x-F$j.x)-(F$j.x-F$y.x)*(F$t.y-F$j.y)},F$z.equals=function(F$y,F$j){return F$y.x===F$j.x&&F$y.y===F$j.y},F$z.intersects=function(F$y,F$j,F$t,F$k){return!!(F$z.equals(F$y,F$j)&&F$z.equals(F$t,F$k)||F$z.equals(F$y,F$k)&&F$z.equals(F$t,F$j))||0<F$z.area(F$y,F$j,F$t)!=0<F$z.area(F$y,F$j,F$k)&&0<F$z.area(F$t,F$k,F$y)!=0<F$z.area(F$t,F$k,F$j)},F$z.intersectsPolygon=function(F$y,F$j){var F$t=F$y;do{if(F$t.i!==F$y.i&&F$t.next.i!==F$y.i&&F$t.i!==F$j.i&&F$t.next.i!==F$j.i&&F$z.intersects(F$t,F$t.next,F$y,F$j))return!0;F$t=F$t.next}while(F$t!==F$y);return!1},F$z.locallyInside=function(F$y,F$j){return F$z.area(F$y.prev,F$y,F$y.next)<0?0<=F$z.area(F$y,F$j,F$y.next)&&0<=F$z.area(F$y,F$y.prev,F$j):F$z.area(F$y,F$j,F$y.prev)<0||F$z.area(F$y,F$y.next,F$j)<0},F$z.middleInside=function(F$y,F$j){for(var F$t=F$y,F$k=!1,F$T=(F$y.x+F$j.x)/2,F$Y=(F$y.y+F$j.y)/2;F$t.y>F$Y!=F$t.next.y>F$Y&&F$t.next.y!==F$t.y&&F$T<(F$t.next.x-F$t.x)*(F$Y-F$t.y)/(F$t.next.y-F$t.y)+F$t.x&&(F$k=!F$k),(F$t=F$t.next)!==F$y;);return F$k},F$z.splitPolygon=function(F$y,F$j){var F$t=new F$Ty(F$y.i,F$y.x,F$y.y),F$k=new F$Ty(F$j.i,F$j.x,F$j.y),F$T=F$y.next,F$Y=F$j.prev;return(F$y.next=F$j).prev=F$y,(F$t.next=F$T).prev=F$t,(F$k.next=F$t).prev=F$k,(F$Y.next=F$k).prev=F$Y,F$k},F$z.insertNode=function(F$y,F$j,F$t,F$k){var F$T=new F$Ty(F$y,F$j,F$t);return F$k?(F$T.next=F$k.next,(F$T.prev=F$k).next.prev=F$T,F$k.next=F$T):(F$T.prev=F$T).next=F$T,F$T},F$z.removeNode=function(F$y){F$y.next.prev=F$y.prev,F$y.prev.next=F$y.next,F$y.prevZ&&(F$y.prevZ.nextZ=F$y.nextZ),F$y.nextZ&&(F$y.nextZ.prevZ=F$y.prevZ)},F$z.signedArea=function(F$y,F$j,F$t,F$k){for(var F$T=0,F$Y=F$j,F$A=F$t-F$k;F$Y<F$t;F$Y+=F$k)F$T+=(F$y[F$A]-F$y[F$Y])*(F$y[F$Y+1]+F$y[F$A+1]),F$A=F$Y;return F$T},F$z}(),F$Ty=function(){function F$y(F$y,F$j,F$t){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=F$y,this.x=F$j,this.y=F$t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return F$r(F$y,"laya.webgl.shapes.EarcutNode"),F$y}(),F$Yy=(function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this.lineWidth=F$y,this.lineColor=F$j,this.lineAlpha=F$t,this.fillColor=F$k,this.fillAlpha=F$T,this.shape=F$A,this.fill=F$Y}F$r(F$y,"laya.webgl.shapes.GeometryData");var F$j=F$y.prototype;F$j.clone=function(){return new F$y(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},F$j.getIndexData=function(){return null},F$j.getVertexData=function(){return null},F$j.destroy=function(){this.shape=null}}(),function(){function F$y(F$y){if(F$y instanceof Float32Array)this.points=F$y;else if(F$y instanceof Array){F$y.length;this.points=new Float32Array(F$y)}}F$r(F$y,"laya.webgl.shapes.Vertex");var F$j=F$y.prototype;F$v.imps(F$j,{"laya.webgl.shapes.IShape":!0}),F$j.getData=function(F$y,F$j,F$t){},F$j.needUpdate=function(F$y){return!1},F$j.rebuild=function(F$y){},F$j.setMatrix=function(F$y){}}(),function(){function F$I(F$y){void 0===F$y&&(F$y=1e4),this._renderType=F$y}F$r(F$I,"laya.webgl.submit.Submit");var F$y=F$I.prototype;return F$v.imps(F$y,{"laya.webgl.submit.ISubmit":!0}),F$y.releaseRender=function(){var F$y=F$I._cache;(F$y[F$y._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$y.getRenderType=function(){return this._renderType},F$y.renderSubmit=function(){if(0===this._numEle)return 1;var F$y=this.shaderValue.textureHost;if(F$y){var F$j=F$y.source;if(!F$y.bitmap||!F$j)return 1;this.shaderValue.texture=F$j,F$y.alphaTexture&&F$y.alphaTexture.source&&(this.shaderValue.texture1=F$y.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$t=F$_y.mainContext;return this.shaderValue.upload(),F$h.activeBlendFunction!==this._blendFn&&(F$t.enable(3042),this._blendFn(F$t),F$h.activeBlendFunction=this._blendFn),F$U.drawCall++,F$U.trianglesFaces+=this._numEle/3,F$t.drawElements(4,this._numEle,5123,this._startIdx),1},F$I.__init__=function(){var F$y=F$I.RENDERBASE=new F$I(-1);F$y.shaderValue=new F$Py(0,0),F$y.shaderValue.ALPHA=-1234},F$I.createSubmit=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$I._cache._length?F$I._cache[--F$I._cache._length]:new F$I;null==F$t&&((F$t=F$Y._selfVb||(F$Y._selfVb=F$uy.create(-1))).clear(),F$k=0),F$Y._ib=F$j,F$Y._vb=F$t,F$Y._startIdx=F$k*F$zy.BYTES_PIDX,F$Y._numEle=0;var F$A=F$y._nBlendType;F$Y._blendFn=F$y._targets?F$h.targetFns[F$A]:F$h.fns[F$A],F$Y.shaderValue=F$T,F$Y.shaderValue.setValue(F$y._shader2D);var F$X=F$y._shader2D.filters;return F$X&&F$Y.shaderValue.setFilters(F$X),F$Y},F$I.createShape=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$I._cache._length?F$I._cache[--F$I._cache._length]:new F$I;F$A._ib=F$j,F$A._vb=F$t,F$A._numEle=F$k,F$A._startIdx=F$T,F$A.shaderValue=F$Y,F$A.shaderValue.setValue(F$y._shader2D);var F$X=F$y._nBlendType;return F$A._blendFn=F$y._targets?F$h.targetFns[F$X]:F$h.fns[F$X],F$A},F$I.TYPE_2D=1e4,F$I.TYPE_CANVAS=10003,F$I.TYPE_CMDSETRT=10004,F$I.TYPE_CUSTOM=10005,F$I.TYPE_BLURRT=10006,F$I.TYPE_CMDDESTORYPRERT=10007,F$I.TYPE_DISABLESTENCIL=10008,F$I.TYPE_OTHERIBVB=10009,F$I.TYPE_PRIMITIVE=10010,F$I.TYPE_RT=10011,F$I.TYPE_BLUR_RT=10012,F$I.TYPE_TARGET=10013,F$I.TYPE_CHANGE_VALUE=10014,F$I.TYPE_SHAPE=10015,F$I.TYPE_TEXTURE=10016,F$I.TYPE_FILLTEXTURE=10017,F$I.RENDERBASE=null,F$I._cache=((F$I._cache=[])._length=0,F$I._cache),F$I}()),F$Ay=function(){function F$k(){this.fun=null,this.args=null}F$r(F$k,"laya.webgl.submit.SubmitCMD");var F$y=F$k.prototype;return F$v.imps(F$y,{"laya.webgl.submit.ISubmit":!0}),F$y.renderSubmit=function(){return this.fun.apply(null,this.args),1},F$y.getRenderType=function(){return 0},F$y.releaseRender=function(){var F$y=F$k._cache;F$y[F$y._length++]=this},F$k.create=function(F$y,F$j){var F$t=F$k._cache._length?F$k._cache[--F$k._cache._length]:new F$k;return F$t.fun=F$j,F$t.args=F$y,F$t},F$k._cache=((F$k._cache=[])._length=0,F$k._cache),F$k}(),F$Xy=function(){function F$j(){this.variables={}}F$r(F$j,"laya.webgl.submit.SubmitCMDScope");var F$y=F$j.prototype;return F$y.getValue=function(F$y){return this.variables[F$y]},F$y.addValue=function(F$y,F$j){return this.variables[F$y]=F$j},F$y.setValue=function(F$y,F$j){return this.variables.hasOwnProperty(F$y)?this.variables[F$y]=F$j:null},F$y.clear=function(){for(var F$y in this.variables)delete this.variables[F$y]},F$y.recycle=function(){this.clear(),F$j.POOL.push(this)},F$j.create=function(){var F$y=F$j.POOL.pop();return F$y||(F$y=new F$j),F$y},F$j.POOL=[],F$j}(),F$Iy=function(){function F$l(){this.offset=0,this.startIndex=0,this._mat=F$d.create()}F$r(F$l,"laya.webgl.submit.SubmitOtherIBVB");var F$y=F$l.prototype;return F$v.imps(F$y,{"laya.webgl.submit.ISubmit":!0}),F$y.releaseRender=function(){var F$y=F$l._cache;(F$y[F$y._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$y.getRenderType=function(){return 10009},F$y.renderSubmit=function(){var F$y=this._shaderValue.textureHost;if(F$y){var F$j=F$y.source;if(!F$y.bitmap||!F$j)return 1;this._shaderValue.texture=F$j}this._vb.bind_upload(this._ib);var F$t=F$Cy.worldMatrix4,F$k=F$d.TEMP;F$d.mulPre(this._mat,F$t[0],F$t[1],F$t[4],F$t[5],F$t[12],F$t[13],F$k);var F$T=F$Cy.worldMatrix4=F$l.tempMatrix4;F$T[0]=F$k.a,F$T[1]=F$k.b,F$T[4]=F$k.c,F$T[5]=F$k.d,F$T[12]=F$k.tx,F$T[13]=F$k.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var F$Y=F$_y.mainContext;return F$h.activeBlendFunction!==this._blendFn&&(F$Y.enable(3042),this._blendFn(F$Y),F$h.activeBlendFunction=this._blendFn),F$U.drawCall++,F$U.trianglesFaces+=this._numEle/3,F$Y.drawElements(4,this._numEle,5123,this.startIndex),F$Cy.worldMatrix4=F$t,F$Ky.activeShader=null,1},F$l.create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){void 0===F$I&&(F$I=0);var F$b=F$l._cache._length?F$l._cache[--F$l._cache._length]:new F$l;F$b._ib=F$t,F$b._vb=F$j,F$b._numEle=F$k,F$b._shader=F$T,F$b._shaderValue=F$Y;var F$D=F$y._nBlendType;switch(F$b._blendFn=F$y._targets?F$h.targetFns[F$D]:F$h.fns[F$D],F$I){case 0:F$b.offset=0,F$b.startIndex=F$X/(F$zy.BYTES_PE*F$j.vertexStride)*1.5,F$b.startIndex*=F$zy.BYTES_PIDX;break;case 1:F$b.startIndex=F$A,F$b.offset=F$X}return F$b},F$l._cache=((F$l._cache=[])._length=0,F$l._cache),F$l.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$l}(),F$by=function(){function F$t(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new F$f,this.screenRect=new F$f}F$r(F$t,"laya.webgl.submit.SubmitScissor");var F$y=F$t.prototype;return F$v.imps(F$y,{"laya.webgl.submit.ISubmit":!0}),F$y._scissor=function(F$y,F$j,F$t,F$k){var F$T=F$Cy.worldMatrix4,F$Y=F$T[0],F$A=F$T[5],F$X=F$T[12],F$I=F$T[13];if(F$k*=F$A,(F$t*=F$Y)<1||F$k<1)return!1;var F$b=(F$y=F$y*F$Y+F$X)+F$t,F$D=(F$j=F$j*F$A+F$I)+F$k;F$y<0&&(F$t=F$b-(F$y=0)),F$j<0&&(F$k=F$D-(F$j=0));var F$l=F$Cy.worldClipRect;if(F$y=Math.max(F$y,F$l.x),F$j=Math.max(F$j,F$l.y),F$t=Math.min(F$b,F$l.right)-F$y,F$k=Math.min(F$D,F$l.bottom)-F$j,F$t<1||F$k<1)return!1;var F$r=F$Cy.worldScissorTest;return this.screenRect.copyFrom(F$l),F$l.x=F$y,F$l.y=F$j,F$l.width=F$t,F$l.height=F$k,F$Cy.worldScissorTest=!0,F$j=F$Cy.height-F$j-F$k,F$_y.mainContext.scissor(F$y,F$j,F$t,F$k),F$_y.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$r?(F$j=F$Cy.height-this.screenRect.y-this.screenRect.height,F$_y.mainContext.scissor(this.screenRect.x,F$j,this.screenRect.width,this.screenRect.height),F$_y.mainContext.enable(3089)):(F$_y.mainContext.disable(3089),F$Cy.worldScissorTest=!1),F$l.copyFrom(this.screenRect),!0},F$y._scissorWithTagart=function(F$y,F$j,F$t,F$k){if(F$t<1||F$k<1)return!1;var F$T=F$y+F$t,F$Y=F$j+F$k;F$y<0&&(F$t=F$T-(F$y=0)),F$j<0&&(F$k=F$Y-(F$j=0));var F$A=F$Cy.worldClipRect;if(F$y=Math.max(F$y,F$A.x),F$j=Math.max(F$j,F$A.y),F$t=Math.min(F$T,F$A.right)-F$y,F$k=Math.min(F$Y,F$A.bottom)-F$j,F$t<1||F$k<1)return!1;var F$X=F$Cy.worldScissorTest;return this.screenRect.copyFrom(F$A),F$Cy.worldScissorTest=!0,F$A.x=F$y,F$A.y=F$j,F$A.width=F$t,F$A.height=F$k,F$j=F$Cy.height-F$j-F$k,F$_y.mainContext.scissor(F$y,F$j,F$t,F$k),F$_y.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),F$X?(F$j=F$Cy.height-this.screenRect.y-this.screenRect.height,F$_y.mainContext.scissor(this.screenRect.x,F$j,this.screenRect.width,this.screenRect.height),F$_y.mainContext.enable(3089)):(F$_y.mainContext.disable(3089),F$Cy.worldScissorTest=!1),F$A.copyFrom(this.screenRect),!0},F$y.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},F$y.getRenderType=function(){return 0},F$y.releaseRender=function(){var F$y=F$t._cache;(F$y[F$y._length++]=this).context=null},F$t.create=function(F$y){var F$j=F$t._cache._length?F$t._cache[--F$t._cache._length]:new F$t;return F$j.context=F$y,F$j},F$t._cache=((F$t._cache=[])._length=0,F$t._cache),F$t}(),F$Dy=function(){function F$I(){this.step=0,this.blendMode=null,this.level=0}F$r(F$I,"laya.webgl.submit.SubmitStencil");var F$y=F$I.prototype;return F$v.imps(F$y,{"laya.webgl.submit.ISubmit":!0}),F$y.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},F$y.getRenderType=function(){return 0},F$y.releaseRender=function(){var F$y=F$I._cache;F$y[F$y._length++]=this},F$y.do1=function(){var F$y=F$_y.mainContext;F$y.enable(2960),F$y.clear(1024),F$y.colorMask(!1,!1,!1,!1),F$y.stencilFunc(514,this.level,255),F$y.stencilOp(7680,7680,7682)},F$y.do2=function(){var F$y=F$_y.mainContext;F$y.stencilFunc(514,this.level+1,255),F$y.colorMask(!0,!0,!0,!0),F$y.stencilOp(7680,7680,7680)},F$y.do3=function(){var F$y=F$_y.mainContext;F$y.colorMask(!0,!0,!0,!0),F$y.stencilOp(7680,7680,7680),F$y.clear(1024),F$y.disable(2960)},F$y.do4=function(){var F$y=F$_y.mainContext;0==this.level&&(F$y.enable(2960),F$y.clear(1024)),F$y.colorMask(!1,!1,!1,!1),F$y.stencilFunc(519,0,255),F$y.stencilOp(7680,7680,7682)},F$y.do5=function(){var F$y=F$_y.mainContext;F$y.stencilFunc(514,this.level,255),F$y.colorMask(!0,!0,!0,!0),F$y.stencilOp(7680,7680,7680)},F$y.do6=function(){var F$y=F$_y.mainContext;F$h.targetFns[F$h.TOINT[this.blendMode]](F$y)},F$y.do7=function(){var F$y=F$_y.mainContext;F$y.colorMask(!1,!1,!1,!1),F$y.stencilOp(7680,7680,7683)},F$y.do8=function(){var F$y=F$_y.mainContext;F$y.colorMask(!0,!0,!0,!0),F$y.stencilFunc(514,this.level,255),F$y.stencilOp(7680,7680,7680)},F$I.restore=function(F$y,F$j,F$t,F$k,F$T){var F$Y;if((F$y._renderKey=0)<F$I._mask&&F$I._mask--,0==F$I._mask)F$Y=laya.webgl.submit.SubmitStencil.create(3),F$y.addRenderObject(F$Y),F$y._curSubmit=F$Yy.RENDERBASE;else{F$Y=laya.webgl.submit.SubmitStencil.create(7),F$y.addRenderObject(F$Y);var F$A=F$y._vb;F$A._byteLength;if(F$Vy.fillRectImgVb(F$A,null,F$j.x,F$j.y,F$j.width,F$j.height,F$H.DEF_UV,F$t,F$k,F$T,0,0)){F$y._shader2D.glTexture=null;var F$X=F$y._curSubmit=F$Yy.createSubmit(F$y,F$y._ib,F$A,(F$A._byteLength-64)/32*3,F$Py.create(2,0));F$X.shaderValue.ALPHA=1,F$y._submits[F$y._submits._length++]=F$X,F$y._curSubmit._numEle+=6,F$y._curSubmit=F$Yy.RENDERBASE}else alert("clipRect calc stencil rect error");F$Y=laya.webgl.submit.SubmitStencil.create(8),F$y.addRenderObject(F$Y)}},F$I.restore2=function(F$y,F$j){var F$t;(F$y._renderKey=0)<F$I._mask&&F$I._mask--,0==F$I._mask?(F$t=laya.webgl.submit.SubmitStencil.create(3),F$y.addRenderObject(F$t),F$y._curSubmit=F$Yy.RENDERBASE):(F$t=laya.webgl.submit.SubmitStencil.create(7),F$y.addRenderObject(F$t),F$y._submits[F$y._submits._length++]=F$j,F$t=laya.webgl.submit.SubmitStencil.create(8),F$y.addRenderObject(F$t))},F$I.create=function(F$y){var F$j=F$I._cache._length?F$I._cache[--F$I._cache._length]:new F$I;return 5==(F$j.step=F$y)&&++F$I._mask,F$j.level=F$I._mask,F$j},F$I._cache=((F$I._cache=[])._length=0,F$I._cache),F$I._mask=0,F$I}(),F$ly=function(){function F$X(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}F$r(F$X,"laya.webgl.submit.SubmitTarget");var F$y=F$X.prototype;return F$v.imps(F$y,{"laya.webgl.submit.ISubmit":!0}),F$y.renderSubmit=function(){this._vb.bind_upload(this._ib);var F$y=this.scope.getValue(this.proName);return F$y&&(this.shaderValue.texture=F$y.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[F$y.width,F$y.height]),this.shaderValue.upload(),this.blend(),F$U.drawCall++,F$U.trianglesFaces+=this._numEle/3,F$_y.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},F$y.blend=function(){if(F$h.activeBlendFunction!==F$h.fns[this.blendType]){var F$y=F$_y.mainContext;F$y.enable(3042),F$h.fns[this.blendType](F$y),F$h.activeBlendFunction=F$h.fns[this.blendType]}},F$y.getRenderType=function(){return 0},F$y.releaseRender=function(){var F$y=F$X._cache;(F$y[F$y._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},F$X.create=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$X._cache._length?F$X._cache[--F$X._cache._length]:new F$X;return F$A._ib=F$j,F$A._vb=F$t,F$A.proName=F$Y,F$A._startIdx=F$k*F$zy.BYTES_PIDX,F$A._numEle=0,F$A.blendType=F$y._nBlendType,F$A.shaderValue=F$T,F$A.shaderValue.setValue(F$y._shader2D),F$A},F$X._cache=((F$X._cache=[])._length=0,F$X._cache),F$X}(),F$ry=function(){function F$y(){this._sourceStr=null}F$r(F$y,"laya.webgl.text.CharSegment");var F$j=F$y.prototype;return F$v.imps(F$j,{"laya.webgl.text.ICharSegment":!0}),F$j.textToSpit=function(F$y){this._sourceStr=F$y},F$j.getChar=function(F$y){return this._sourceStr.charAt(F$y)},F$j.getCharCode=function(F$y){return this._sourceStr.charCodeAt(F$y)},F$j.length=function(){return this._sourceStr.length},F$y}(),F$$y=function(){var F$y;function F$U(){}return F$r(F$U,"laya.webgl.text.DrawText"),F$U.__init__=function(){F$U._charsTemp=new Array,F$U._drawValue=new F$y,F$U._charSeg=new F$ry},F$U.customCharSeg=function(F$y){F$U._charSeg=F$y},F$U.getChar=function(F$y,F$j,F$t){var F$k=F$Zy.createOneChar(F$y,F$t);return-1!=F$j&&(F$U._charsCache[F$j]=F$k),F$k},F$U._drawSlow=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l,F$r,F$$,F$W){var F$z,F$V,F$n=F$U._drawValue.value(F$Y,F$X,F$I,F$b,F$r,F$$,F$W),F$C=0,F$M=0,F$_=F$U._charsTemp,F$e=0,F$v=NaN;if(F$k)for(F$_.length=F$k.length,F$C=0,F$M=F$k.length;F$C<F$M;F$C++)(F$V=F$k[F$C])&&(F$v=F$V.charNum+F$n.txtID,F$_[F$C]=F$z=F$U._charsCache[F$v]||F$U.getChar(F$V.char,F$v,F$n),F$z.active());else{var F$N=F$t instanceof laya.utils.WordText?F$t.toString():F$t;if(F$S.CharacterCache){F$U._charSeg.textToSpit(F$N);var F$P=F$U._charSeg.length();for(F$C=0,F$M=F$_.length=F$P;F$C<F$M;F$C++)F$v=F$U._charSeg.getCharCode(F$C)+F$n.txtID,F$_[F$C]=F$z=F$U._charsCache[F$v]||F$U.getChar(F$U._charSeg.getChar(F$C),F$v,F$n),F$z.active(),F$e+=F$z.cw}else F$_.length=0,(F$z=F$U.getChar(F$N,-1,F$n)).active(),F$e+=F$z.cw,F$_[0]=F$z}var F$d=0;null!==F$A&&"left"!==F$A&&(F$d=-("center"==F$A?F$e/2:F$e));var F$p,F$f,F$Q=NaN,F$m=0;if(F$k)for(F$C=0,F$M=F$_.length;F$C<F$M;F$C++)F$z=F$_[F$C],F$V=F$k[F$C],F$z&&F$V&&!F$z.isSpace&&(F$Q=F$z.borderSize,F$p=F$z.texture,F$j._drawText(F$p,F$D+F$d+F$V.x*F$r-F$Q,F$l+F$V.y*F$$-F$Q,F$p.width,F$p.height,F$T,0,0,0,0));else{for(F$C=0,F$M=F$_.length;F$C<F$M;F$C++)(F$z=F$_[F$C])&&!F$z.isSpace&&(F$Q=F$z.borderSize,F$p=F$z.texture,F$j._drawText(F$p,F$D+F$d-F$Q,F$l-F$Q,F$p.width,F$p.height,F$T,0,0,0,0),F$y&&((F$f=F$y[F$m++])||(F$f=F$y[F$m-1]=[]),F$f[0]=F$p,F$f[1]=F$d-F$Q,F$f[2]=-F$Q)),F$d+=F$z.cw;F$y&&(F$y.length=F$m)}},F$U._drawFast=function(F$y,F$j,F$t,F$k,F$T){for(var F$Y,F$A,F$X=0,F$I=F$y.length;F$X<F$I;F$X++)(F$Y=(F$A=F$y[F$X])[0]).active(),F$j._drawText(F$Y,F$k+F$A[1],F$T+F$A[2],F$Y.width,F$Y.height,F$t,0,0,0,0)},F$U.drawText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l){if(void 0===F$l&&(F$l=0),!(F$j&&0===F$j.length||F$t&&0===F$t.length)){var F$r=F$k.a,F$$=F$k.d;(0!==F$k.b||0!==F$k.c)&&(F$r=F$$=1);var F$W=1!==F$r||1!==F$$;if(F$W&&F$v.stage.transform){var F$z=F$v.stage.transform;F$W=F$z.a===F$r&&F$z.d===F$$}else F$W=!1;if(F$W){var F$V=(F$k=F$k.copyTo(F$Ny._tmpMatrix)).tx,F$n=F$k.ty;F$k.scale(1/F$r,1/F$$),F$k._checkTransform(),F$b*=F$r,F$D*=F$$,F$b+=F$V-F$k.tx,F$D+=F$n-F$k.ty}else F$r=F$$=1;if(F$t)F$U._drawSlow(null,F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$r,F$$,F$l);else{if(null===F$j.toUpperCase){var F$C=F$r+1e5*F$$,F$M=F$j;return void(F$M.changed||F$M.id!==F$C?(F$M.id=F$C,F$M.changed=!1,F$U._drawSlow(F$M.save,F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$r,F$$,F$l)):F$U._drawFast(F$M.save,F$y,F$k,F$b,F$D))}var F$_=F$j+F$T.toString()+F$A+F$X+F$I+F$r+F$$+F$Y,F$e=F$U._textsCache[F$_];F$S.CharacterCache?F$e?F$U._drawFast(F$e,F$y,F$k,F$b,F$D):(F$U._textsCache.__length||(F$U._textsCache.__length=0),F$U._textsCache.__length>F$N.WebGLTextCacheCount&&((F$U._textsCache={}).__length=0,F$U._curPoolIndex=0),F$U._textCachesPool[F$U._curPoolIndex]?(F$e=F$U._textsCache[F$_]=F$U._textCachesPool[F$U._curPoolIndex]).length=0:F$U._textCachesPool[F$U._curPoolIndex]=F$e=F$U._textsCache[F$_]=[],F$U._textsCache.__length++,F$U._curPoolIndex++,F$U._drawSlow(F$e,F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$r,F$$,F$l)):F$U._drawSlow(F$e,F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$r,F$$,F$l)}}},F$U._charsTemp=null,F$U._textCachesPool=[],F$U._curPoolIndex=0,F$U._charsCache={},F$U._textsCache={},F$U._drawValue=null,F$U.d=[],F$U._charSeg=null,F$U.__init$=function(){F$y=function(){function F$I(){}return F$r(F$I,""),F$I.prototype.value=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this.font=F$y,this.fillColor=F$j,this.borderColor=F$t,this.lineWidth=F$k,this.scaleX=F$T,this.scaleY=F$Y,this.underLine=F$A;var F$X=F$y.toString()+F$T+F$Y+F$k+(F$j?F$j.toLowerCase():" ")+(F$t?F$t.toLowerCase():" ")+F$A;return this.txtID=F$I._keymap[F$X],this.txtID||(this.txtID=1e-7*++F$I._keymapCount,F$I._keymap[F$X]=this.txtID),this},F$I.clear=function(){F$I._keymap={},F$I._keymapCount=1},F$I._keymap={},F$I._keymapCount=1,F$I}()},F$U}(),F$Wy=function(){function F$T(F$y){this._index=0,this._size=14,this._italic=-2,F$T._cache2=F$T._cache2||[],this.setFont(F$y||"14px Arial")}F$r(F$T,"laya.webgl.text.FontInContext");var F$y=F$T.prototype;return F$y.setFont=function(F$y){var F$j=F$T._cache2[F$y];if(F$j)this._words=F$j[0],this._size=F$j[1];else{this._words=F$y.split(" ");for(var F$t=0,F$k=this._words.length;F$t<F$k;F$t++)if(0<this._words[F$t].indexOf("px")){this._index=F$t;break}this._size=parseInt(this._words[this._index]),F$T._cache2[F$y]=[this._words,this._size]}this._text=null,this._italic=-2},F$y.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},F$y.hasType=function(F$y){for(var F$j=0,F$t=this._words.length;F$j<F$t;F$j++)if(this._words[F$j]===F$y)return F$j;return-1},F$y.removeType=function(F$y){for(var F$j=0,F$t=this._words.length;F$j<F$t;F$j++)if(this._words[F$j]===F$y){this._words.splice(F$j,1),this._index>F$j&&this._index--;break}this._text=null,this._italic=-2},F$y.copyTo=function(F$y){return F$y._text=this._text,F$y._size=this._size,F$y._index=this._index,F$y._words=this._words.slice(),F$y._italic=-2,F$y},F$y.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},F$k(0,F$y,"size",function(){return this._size},function(F$y){this._size=F$y,this._words[this._index]=F$y+"px",this._text=null}),F$T.create=function(F$y){var F$j=F$T._cache[F$y];return F$j||(F$j=F$T._cache[F$y]=new F$T(F$y))},F$T.EMPTY=new F$T,F$T._cache={},F$T._cache2=null,F$T}(),F$zy=function(){function F$y(){}return F$r(F$y,"laya.webgl.utils.CONST3D2D"),F$y.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$y.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],F$y.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],F$y._TMPARRAY=[],F$y._OFFSETX=0,F$y._OFFSETY=0,F$A(F$y,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),F$y}(),F$Vy=function(){function F$W(){}return F$r(F$W,"laya.webgl.utils.GlUtils"),F$W.make2DProjection=function(F$y,F$j,F$t){return[2/F$y,0,0,0,0,-2/F$j,0,0,0,0,2/F$t,0,-1,1,0,1]},F$W.fillIBQuadrangle=function(F$y,F$j){if(65535/4<F$j)throw Error("IBQuadrangle count:"+F$j+" must<:"+Math.floor(65535/4));F$j=Math.floor(F$j),F$y._resizeBuffer(6*(F$j+1)*2,!1),F$y.byteLength=F$y.bufferLength;for(var F$t=F$y.getUint16Array(),F$k=0,F$T=0;F$T<F$j;F$T++)F$t[F$k++]=4*F$T,F$t[F$k++]=4*F$T+2,F$t[F$k++]=4*F$T+1,F$t[F$k++]=4*F$T,F$t[F$k++]=4*F$T+3,F$t[F$k++]=4*F$T+2;return F$y.setNeedUpload(),!0},F$W.expandIBQuadrangle=function(F$y,F$j){F$y.bufferLength>=6*F$j*2||F$W.fillIBQuadrangle(F$y,F$j)},F$W.mathCeilPowerOfTwo=function(F$y){return F$y--,F$y|=F$y>>1,F$y|=F$y>>2,F$y|=F$y>>4,F$y|=F$y>>8,F$y|=F$y>>16,++F$y},F$W.fillQuadrangleImgVb=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){var F$I=16+(F$y._byteLength>>2);F$y.byteLength=F$I<<2;var F$b=F$y.getFloat32Array();F$b[(F$I-=16)+2]=F$T[0],F$b[F$I+3]=F$T[1],F$b[F$I+6]=F$T[2],F$b[F$I+7]=F$T[3],F$b[F$I+10]=F$T[4],F$b[F$I+11]=F$T[5],F$b[F$I+14]=F$T[6],F$b[F$I+15]=F$T[7];var F$D=F$Y.a,F$l=F$Y.b,F$r=F$Y.c,F$$=F$Y.d;if(1!==F$D||0!==F$l||0!==F$r||1!==F$$){F$Y.bTransform=!0;var F$W=F$Y.tx+F$A,F$z=F$Y.ty+F$X;F$b[F$I]=(F$k[0]+F$j)*F$D+(F$k[1]+F$t)*F$r+F$W,F$b[F$I+1]=(F$k[0]+F$j)*F$l+(F$k[1]+F$t)*F$$+F$z,F$b[F$I+4]=(F$k[2]+F$j)*F$D+(F$k[3]+F$t)*F$r+F$W,F$b[F$I+5]=(F$k[2]+F$j)*F$l+(F$k[3]+F$t)*F$$+F$z,F$b[F$I+8]=(F$k[4]+F$j)*F$D+(F$k[5]+F$t)*F$r+F$W,F$b[F$I+9]=(F$k[4]+F$j)*F$l+(F$k[5]+F$t)*F$$+F$z,F$b[F$I+12]=(F$k[6]+F$j)*F$D+(F$k[7]+F$t)*F$r+F$W,F$b[F$I+13]=(F$k[6]+F$j)*F$l+(F$k[7]+F$t)*F$$+F$z}else F$Y.bTransform=!1,F$j+=F$Y.tx+F$A,F$t+=F$Y.ty+F$X,F$b[F$I]=F$j+F$k[0],F$b[F$I+1]=F$t+F$k[1],F$b[F$I+4]=F$j+F$k[2],F$b[F$I+5]=F$t+F$k[3],F$b[F$I+8]=F$j+F$k[4],F$b[F$I+9]=F$t+F$k[5],F$b[F$I+12]=F$j+F$k[6],F$b[F$I+13]=F$t+F$k[7];return F$y._upload=!0},F$W.fillTranglesVB=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){var F$X=(F$y._byteLength>>2)+F$k.length;F$y.byteLength=F$X<<2;var F$I=F$y.getFloat32Array();F$X-=F$k.length;for(var F$b=F$k.length,F$D=F$T.a,F$l=F$T.b,F$r=F$T.c,F$$=F$T.d,F$W=0;F$W<F$b;F$W+=4)if(F$I[F$X+F$W+2]=F$k[F$W+2],F$I[F$X+F$W+3]=F$k[F$W+3],1!==F$D||0!==F$l||0!==F$r||1!==F$$){F$T.bTransform=!0;var F$z=F$T.tx+F$Y,F$V=F$T.ty+F$A;F$I[F$X+F$W]=(F$k[F$W]+F$j)*F$D+(F$k[F$W+1]+F$t)*F$r+F$z,F$I[F$X+F$W+1]=(F$k[F$W]+F$j)*F$l+(F$k[F$W+1]+F$t)*F$$+F$V}else F$T.bTransform=!1,F$j+=F$T.tx+F$Y,F$t+=F$T.ty+F$A,F$I[F$X+F$W]=F$j+F$k[F$W],F$I[F$X+F$W+1]=F$t+F$k[F$W+1];return F$y._upload=!0},F$W.copyPreImgVb=function(F$y,F$j,F$t){var F$k=F$y._byteLength>>2;F$y.byteLength=F$k+16<<2;for(var F$T=F$y.getFloat32Array(),F$Y=0,F$A=F$k-16;F$Y<4;F$Y++)F$T[F$k]=F$T[F$A]+F$j,++F$A,F$T[++F$k]=F$T[F$A]+F$t,++F$A,F$T[++F$k]=F$T[F$A],++F$A,F$T[++F$k]=F$T[F$A],++F$k,++F$A;F$y._upload=!0},F$W.fillRectImgVb=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l,F$r){void 0===F$r&&(F$r=!1);var F$$,F$W,F$z,F$V,F$n,F$C,F$M,F$_,F$e,F$v,F$N,F$P,F$d,F$p,F$f,F$Q,F$m=1,F$U=F$X.a,F$q=F$X.b,F$w=F$X.c,F$S=F$X.d,F$H=F$j&&F$j.width<99999999;if(1!==F$U||0!==F$q||0!==F$w||1!==F$S?(F$X.bTransform=!0,0===F$q&&0===F$w&&(F$m=23,F$e=F$T+F$t,F$v=F$Y+F$k,F$$=F$U*F$t+(F$N=F$X.tx+F$I),F$z=F$U*F$e+F$N,F$W=F$S*F$k+(F$P=F$X.ty+F$b),F$V=F$S*F$v+F$P)):(F$m=23,F$X.bTransform=!1,F$z=(F$$=F$t+F$X.tx+F$I)+F$T,F$V=(F$W=F$k+F$X.ty+F$b)+F$Y),F$H&&(F$n=F$j.x,F$C=F$j.y,F$M=F$j.width+F$n,F$_=F$j.height+F$C),1!==F$m){if(Math.min(F$$,F$z)>=F$M)return!1;if(Math.min(F$W,F$V)>=F$_)return!1;if(Math.max(F$z,F$$)<=F$n)return!1;if(Math.max(F$V,F$W)<=F$C)return!1}var F$K=F$y._byteLength>>2;F$y.byteLength=16+F$K<<2;var F$x=F$y.getFloat32Array();switch(F$x[2+F$K]=F$A[0],F$x[3+F$K]=F$A[1],F$x[6+F$K]=F$A[2],F$x[7+F$K]=F$A[3],F$x[10+F$K]=F$A[4],F$x[11+F$K]=F$A[5],F$x[14+F$K]=F$A[6],F$x[15+F$K]=F$A[7],F$m){case 1:F$N=F$X.tx+F$I,F$P=F$X.ty+F$b;var F$F=F$U*F$t,F$G=F$w*F$k,F$g=F$S*F$k,F$a=F$q*F$t,F$J=F$U*(F$e=F$T+F$t),F$h=F$w*(F$v=F$Y+F$k),F$O=F$S*F$v,F$s=F$q*F$e;F$r?(F$d=F$F+F$G+F$N,F$f=Math.round(F$d)-F$d,F$p=F$g+F$a+F$P,F$Q=Math.round(F$p)-F$p,F$x[F$K]=F$d+F$f,F$x[1+F$K]=F$p+F$Q,F$x[4+F$K]=F$J+F$G+F$N+F$f,F$x[5+F$K]=F$g+F$s+F$P+F$Q,F$x[8+F$K]=F$J+F$h+F$N+F$f,F$x[9+F$K]=F$O+F$s+F$P+F$Q,F$x[12+F$K]=F$F+F$h+F$N+F$f,F$x[13+F$K]=F$O+F$a+F$P+F$Q):(F$x[F$K]=F$F+F$G+F$N,F$x[1+F$K]=F$g+F$a+F$P,F$x[4+F$K]=F$J+F$G+F$N,F$x[5+F$K]=F$g+F$s+F$P,F$x[8+F$K]=F$J+F$h+F$N,F$x[9+F$K]=F$O+F$s+F$P,F$x[12+F$K]=F$F+F$h+F$N,F$x[13+F$K]=F$O+F$a+F$P);break;case 23:F$r?(F$d=F$$+F$D,F$f=Math.round(F$d)-F$d,F$p=F$W,F$Q=Math.round(F$p)-F$p,F$x[F$K]=F$d+F$f,F$x[1+F$K]=F$p+F$Q,F$x[4+F$K]=F$z+F$D+F$f,F$x[5+F$K]=F$W+F$Q,F$x[8+F$K]=F$z+F$f,F$x[9+F$K]=F$V+F$Q,F$x[12+F$K]=F$$+F$f,F$x[13+F$K]=F$V+F$Q):(F$x[F$K]=F$$+F$D,F$x[1+F$K]=F$W,F$x[4+F$K]=F$z+F$D,F$x[5+F$K]=F$W,F$x[8+F$K]=F$z,F$x[9+F$K]=F$V,F$x[12+F$K]=F$$,F$x[13+F$K]=F$V)}return F$y._upload=!0},F$W.fillLineVb=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){var F$I=.5*F$A,F$b=F$W._fillLineArray,F$D=-(F$k-F$Y),F$l=F$t-F$T,F$r=Math.sqrt(F$D*F$D+F$l*F$l);F$D/=F$r,F$l/=F$r,F$D*=F$I,F$l*=F$I,F$b[0]=F$t-F$D,F$b[1]=F$k-F$l,F$b[4]=F$t+F$D,F$b[5]=F$k+F$l,F$b[8]=F$T+F$D,F$b[9]=F$Y+F$l,F$b[12]=F$T-F$D,F$b[13]=F$Y-F$l,F$X&&F$X.transformPointArray(F$b,F$b);var F$$=16+(F$y._byteLength>>2);return F$y.byteLength=F$$<<2,F$y.insertData(F$b,F$$-16),!0},F$W._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F$W}(),F$ny=(function(){function F$I(){}F$r(F$I,"laya.webgl.utils.MatirxArray"),F$I.ArrayMul=function(F$y,F$j,F$t){if(F$y)if(F$j)for(var F$k=NaN,F$T=NaN,F$Y=NaN,F$A=NaN,F$X=0;F$X<4;F$X++)F$k=F$y[F$X],F$T=F$y[F$X+4],F$Y=F$y[F$X+8],F$A=F$y[F$X+12],F$t[F$X]=F$k*F$j[0]+F$T*F$j[1]+F$Y*F$j[2]+F$A*F$j[3],F$t[F$X+4]=F$k*F$j[4]+F$T*F$j[5]+F$Y*F$j[6]+F$A*F$j[7],F$t[F$X+8]=F$k*F$j[8]+F$T*F$j[9]+F$Y*F$j[10]+F$A*F$j[11],F$t[F$X+12]=F$k*F$j[12]+F$T*F$j[13]+F$Y*F$j[14]+F$A*F$j[15];else F$I.copyArray(F$y,F$t);else F$I.copyArray(F$j,F$t)},F$I.copyArray=function(F$y,F$j){if(F$y&&F$j)for(var F$t=0;F$t<F$y.length;F$t++)F$j[F$t]=F$y[F$t]}}(),function(){function F$j(F$y,F$j,F$t){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=F$y,this._vb=new F$uy(F$y,35048),F$j&&this._vb._resizeBuffer(F$j,!1),this._ib=new F$Ey,F$t&&this._ib._resizeBuffer(F$t,!1)}F$r(F$j,"laya.webgl.utils.Mesh2D");var F$y=F$j.prototype;return F$y.cloneWithNewVB=function(){var F$y=new F$j(this._stride,0,0);return F$y._ib=this._ib,F$y._quadNum=this._quadNum,F$y._attribInfo=this._attribInfo,F$y},F$y.cloneWithNewVBIB=function(){var F$y=new F$j(this._stride,0,0);return F$y._attribInfo=this._attribInfo,F$y},F$y.getVBW=function(){return this._vb.setNeedUpload(),this._vb},F$y.getVBR=function(){return this._vb},F$y.getIBR=function(){return this._ib},F$y.getIBW=function(){return this._ib.setNeedUpload(),this._ib},F$y.createQuadIB=function(F$y){this._quadNum=F$y,this._ib._resizeBuffer(6*F$y*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var F$j=this._ib.getUint16Array(),F$t=0,F$k=0,F$T=0;F$T<F$y;F$T++)F$j[F$t++]=F$k,F$j[F$t++]=F$k+2,F$j[F$t++]=F$k+1,F$j[F$t++]=F$k,F$j[F$t++]=F$k+3,F$j[F$t++]=F$k+2,F$k+=4;this._ib.setNeedUpload()},F$y.setAttributes=function(F$y){if(this._attribInfo=F$y,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},F$y.getEleNum=function(){return this._ib.getBuffer().byteLength/2},F$y.releaseMesh=function(){},F$y.destroy=function(){},F$y.clearVB=function(){this._vb.clear()},F$j._gvaoid=0,F$j}()),F$Cy=function(){function F$T(){}return F$r(F$T,"laya.webgl.utils.RenderState2D"),F$T.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},F$T.mat2MatArray=function(F$y,F$j){var F$t=F$y,F$k=F$j;return F$k[0]=F$t.a,F$k[1]=F$t.b,F$k[2]=F$T.EMPTYMAT4_ARRAY[2],F$k[3]=F$T.EMPTYMAT4_ARRAY[3],F$k[4]=F$t.c,F$k[5]=F$t.d,F$k[6]=F$T.EMPTYMAT4_ARRAY[6],F$k[7]=F$T.EMPTYMAT4_ARRAY[7],F$k[8]=F$T.EMPTYMAT4_ARRAY[8],F$k[9]=F$T.EMPTYMAT4_ARRAY[9],F$k[10]=F$T.EMPTYMAT4_ARRAY[10],F$k[11]=F$T.EMPTYMAT4_ARRAY[11],F$k[12]=F$t.tx,F$k[13]=F$t.ty,F$k[14]=F$T.EMPTYMAT4_ARRAY[14],F$k[15]=F$T.EMPTYMAT4_ARRAY[15],F$j},F$T.restoreTempArray=function(){F$T.TEMPMAT4_ARRAY[0]=1,F$T.TEMPMAT4_ARRAY[1]=0,F$T.TEMPMAT4_ARRAY[4]=0,F$T.TEMPMAT4_ARRAY[5]=1,F$T.TEMPMAT4_ARRAY[12]=0,F$T.TEMPMAT4_ARRAY[13]=0},F$T.clear=function(){F$T.worldScissorTest=!1,F$T.worldShaderDefines=null,F$T.worldFilters=null,F$T.worldAlpha=1,F$T.worldClipRect.x=F$T.worldClipRect.y=0,F$T.worldClipRect.width=F$T.width,F$T.worldClipRect.height=F$T.height,F$T.curRenderTarget=null},F$T._MAXSIZE=99999999,F$T.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$T.worldMatrix4=F$T.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$T.worldAlpha=1,F$T.worldScissorTest=!1,F$T.worldFilters=null,F$T.worldShaderDefines=null,F$T.curRenderTarget=null,F$T.width=0,F$T.height=0,F$A(F$T,["worldMatrix",function(){return this.worldMatrix=new F$d},"worldClipRect",function(){return this.worldClipRect=new F$f(0,0,99999999,99999999)}]),F$T}(),F$My=function(){var F$C,F$t;function F$M(F$y,F$j,F$t,F$k,F$T){var F$Y=this;function F$A(F$y){var F$j=[],F$t=new F$C(F$j);return F$Y._compileToTree(F$t,F$y.split("\n"),0,F$j,F$T),F$t}var F$X=F$$.now();this._VS=F$A(F$j),this._PS=F$A(F$t),this._nameMap=F$k,2<F$$.now()-F$X&&console.log("ShaderCompile use time:"+(F$$.now()-F$X)+"  size:"+F$j.length+"/"+F$t.length)}F$r(F$M,"laya.webgl.utils.ShaderCompile");var F$y=F$M.prototype;return F$y._compileToTree=function(F$y,F$j,F$t,F$k,F$T){var F$Y,F$A,F$X,F$I,F$b,F$D,F$l,F$r=0,F$$=0,F$W=0,F$z=0;for(F$$=F$t;F$$<F$j.length;F$$++)if(!((F$X=F$j[F$$]).length<1)&&0!==(F$r=F$X.indexOf("//"))){if(0<=F$r&&(F$X=F$X.substr(0,F$r)),F$Y=F$l||new F$C(F$k),F$l=null,F$Y.text=F$X,F$Y.noCompile=!0,0<=(F$r=F$X.indexOf("#"))){for(F$I="#",F$z=F$r+1,F$W=F$X.length;F$z<F$W;F$z++){var F$V=F$X.charAt(F$z);if(" "===F$V||"\t"===F$V||"\r"===F$V||"\n"===F$V||"?"===F$V)break;F$I+=F$V}switch(F$Y.name=F$I){case"#ifdef":case"#ifndef":if(F$Y.src=F$X,F$Y.noCompile=null!=F$X.match(/[!&|()=<>]/),F$Y.noCompile?console.log("function():Boolean{return "+F$X.substr(F$r+F$Y.name.length)+"}"):(F$D=F$X.replace(/^\s*/,"").split(/\s+/),F$Y.setCondition(F$D[1],"#ifdef"===F$I?1:2),F$Y.text="//"+F$Y.text),F$Y.setParent(F$y),F$y=F$Y,F$T)for(F$D=F$X.substr(F$z).split(F$M._splitToWordExps3),F$z=0;F$z<F$D.length;F$z++)(F$X=F$D[F$z]).length&&(F$T[F$X]=!0);continue;case"#if":if(F$Y.src=F$X,F$Y.noCompile=!0,F$Y.setParent(F$y),F$y=F$Y,F$T)for(F$D=F$X.substr(F$z).split(F$M._splitToWordExps3),F$z=0;F$z<F$D.length;F$z++)(F$X=F$D[F$z]).length&&"defined"!=F$X&&(F$T[F$X]=!0);continue;case"#else":F$Y.src=F$X,F$A=(F$y=F$y.parent).childs[F$y.childs.length-1],F$Y.noCompile=F$A.noCompile,F$Y.noCompile||(F$Y.condition=F$A.condition,F$Y.conditionType=1==F$A.conditionType?2:1,F$Y.text="//"+F$Y.text+" "+F$A.text+" "+F$Y.conditionType),F$Y.setParent(F$y),F$y=F$Y;continue;case"#endif":F$A=(F$y=F$y.parent).childs[F$y.childs.length-1],F$Y.noCompile=F$A.noCompile,F$Y.noCompile||(F$Y.text="//"+F$Y.text),F$Y.setParent(F$y);continue;case"#include":F$D=F$M.splitToWords(F$X,null);var F$n=F$M.includes[F$D[1]];if(!F$n)throw"ShaderCompile error no this include file:"+F$D[1];if((F$r=F$D[0].indexOf("?"))<0){F$Y.setParent(F$y),F$X=F$n.getWith("with"==F$D[2]?F$D[3]:null),this._compileToTree(F$Y,F$X.split("\n"),0,F$k,F$T),F$Y.text="";continue}F$Y.setCondition(F$D[0].substr(F$r+1),1),F$Y.text=F$n.getWith("with"==F$D[2]?F$D[3]:null);break;case"#import":F$b=(F$D=F$M.splitToWords(F$X,null))[1],F$k.push({node:F$Y,file:F$M.includes[F$b],ofs:F$Y.text.length});continue}}else{if((F$A=F$y.childs[F$y.childs.length-1])&&!F$A.name){0<F$k.length&&F$M.splitToWords(F$X,F$A),F$l=F$Y,F$A.text+="\n"+F$X;continue}0<F$k.length&&F$M.splitToWords(F$X,F$Y)}F$Y.setParent(F$y)}},F$y.createShader=function(F$y,F$j,F$t){var F$k={},F$T="";if(F$y)for(var F$Y in F$y)F$T+="#define "+F$Y+"\n",F$k[F$Y]=!0;var F$A=this._VS.toscript(F$k,[]),F$X=this._PS.toscript(F$k,[]);return(F$t||F$cy.create)(F$T+F$A.join("\n"),F$T+F$X.join("\n"),F$j,this._nameMap)},F$M._parseOne=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A={type:F$M.shaderParamsMap[F$t[F$k+1]],name:F$t[F$k+2],size:isNaN(parseInt(F$t[F$k+3]))?1:parseInt(F$t[F$k+3])};return F$Y&&("attribute"==F$T?F$y.push(F$A):F$j.push(F$A)),":"==F$t[F$k+3]&&(F$A.type=F$t[F$k+4],F$k+=2),F$k+=2},F$M.addInclude=function(F$y,F$j){if(!F$j||0===F$j.length)throw new Error("add shader include file err:"+F$y);if(F$M.includes[F$y])throw new Error("add shader include file err, has add:"+F$y);F$M.includes[F$y]=new F$t(F$j)},F$M.preGetParams=function(F$y,F$j){var F$t=[F$y,F$j],F$k={},F$T=[],F$Y=[],F$A={},F$X=[];F$k.attributes=F$T,F$k.uniforms=F$Y,F$k.defines=F$A;for(var F$I=0,F$b=0,F$D=0;F$D<2;F$D++){F$t[F$D]=F$t[F$D].replace(F$M._removeAnnotation,"");var F$l,F$r=F$t[F$D].match(F$M._reg);for(F$I=0,F$b=F$r.length;F$I<F$b;F$I++){var F$$=F$r[F$I];if("attribute"==F$$||"uniform"==F$$)F$I=F$M._parseOne(F$T,F$Y,F$r,F$I,F$$,!0);else{if("#define"==F$$){F$X[F$$=F$r[++F$I]]=1;continue}if("#ifdef"==F$$){F$A[F$l=F$r[++F$I]]=F$A[F$l]||[];for(F$I++;F$I<F$b;F$I++)if("attribute"==(F$$=F$r[F$I])||"uniform"==F$$)F$I=F$M._parseOne(F$T,F$Y,F$r,F$I,F$$,F$X[F$l]);else if("#else"==F$$)for(F$I++;F$I<F$b;F$I++)if("attribute"==(F$$=F$r[F$I])||"uniform"==F$$)F$I=F$M._parseOne(F$T,F$Y,F$r,F$I,F$$,!F$X[F$l]);else if("#endif"==F$$)break}}}}return F$k},F$M.splitToWords=function(F$y,F$j){for(var F$t,F$k,F$T=[],F$Y=-1,F$A=0,F$X=F$y.length;F$A<F$X;F$A++)if(F$t=F$y.charAt(F$A),0<=" \t=+-*/&%!<>()'\",;".indexOf(F$t)){if(0<=F$Y&&1<F$A-F$Y&&(F$k=F$y.substr(F$Y,F$A-F$Y),F$T.push(F$k)),'"'==F$t||"'"==F$t){var F$I=F$y.indexOf(F$t,F$A+1);if(F$I<0)throw"Sharder err:"+F$y;F$T.push(F$y.substr(F$A+1,F$I-F$A-1)),F$A=F$I,F$Y=-1;continue}"("==F$t&&F$j&&0<F$T.length&&(F$k=F$T[F$T.length-1]+";","vec4;main;".indexOf(F$k)<0&&(F$j.useFuns+=F$k)),F$Y=-1}else F$Y<0&&(F$Y=F$A);return F$Y<F$X&&1<F$X-F$Y&&(F$k=F$y.substr(F$Y,F$X-F$Y),F$T.push(F$k)),F$T},F$M.IFDEF_NO=0,F$M.IFDEF_YES=1,F$M.IFDEF_ELSE=2,F$M.IFDEF_PARENT=3,F$M._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),F$M._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),F$M._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),F$M.includes={},F$A(F$M,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),F$M.__init$=function(){F$C=function(){function F$t(F$y){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=F$y}F$r(F$t,"");var F$y=F$t.prototype;return F$y.setParent=function(F$y){F$y.childs.push(this),this.z=F$y.z+1,this.parent=F$y},F$y.setCondition=function(F$y,F$j){F$y&&(this.conditionType=F$j,F$y=F$y.replace(/(\s*$)/g,""),this.condition=function(){return this[F$y]},this.condition.__condition=F$y)},F$y.toscript=function(F$y,F$j){return this._toscript(F$y,F$j,++F$t.__id)},F$y._toscript=function(F$k,F$T,F$Y){if(this.childs.length<1&&!this.text)return F$T;F$T.length;if(this.condition){var F$y=!!this.condition.call(F$k);if(2===this.conditionType&&(F$y=!F$y),!F$y)return F$T}if(this.text&&F$T.push(this.text),0<this.childs.length&&this.childs.forEach(function(F$y,F$j,F$t){F$y._toscript(F$k,F$T,F$Y)}),0<this.includefiles.length&&0<this.useFuns.length)for(var F$j,F$t=0,F$A=this.includefiles.length;F$t<F$A;F$t++)this.includefiles[F$t].curUseID!=F$Y&&0<(F$j=this.includefiles[F$t].file.getFunsScript(this.useFuns)).length&&(this.includefiles[F$t].curUseID=F$Y,F$T[0]=F$j+F$T[0]);return F$T},F$t.__id=1,F$t}(),F$t=function(){function F$y(F$y){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=F$y;for(var F$j=0,F$t=0,F$k=0;!((F$j=F$y.indexOf("#begin",F$j))<0);){for(F$k=F$j+5;!((F$k=F$y.indexOf("#end",F$k))<0)&&"i"===F$y.charAt(F$k+4);)F$k+=5;if(F$k<0)throw"add include err,no #end:"+F$y;F$t=F$y.indexOf("\n",F$j);var F$T=F$M.splitToWords(F$y.substr(F$j,F$t-F$j),null);"code"==F$T[1]?this.codes[F$T[2]]=F$y.substr(F$t+1,F$k-F$t-1):"function"==F$T[1]&&(F$t=F$y.indexOf("function",F$j),F$t+="function".length,this.funs[F$T[3]]=F$y.substr(F$t+1,F$k-F$t-1),this.funnames+=F$T[3]+";"),F$j=F$k+1}}F$r(F$y,"");var F$j=F$y.prototype;return F$j.getWith=function(F$y){var F$j=F$y?this.codes[F$y]:this.script;if(!F$j)throw"get with error:"+F$y;return F$j},F$j.getFunsScript=function(F$y){var F$j="";for(var F$t in this.funs)0<=F$y.indexOf(F$t+";")&&(F$j+=this.funs[F$t]);return F$j},F$y}()},F$M}(),F$_y=function(){function F$A(){}return F$r(F$A,"laya.webgl.WebGL"),F$A._uint8ArraySlice=function(){for(var F$y=this.length,F$j=new Uint8Array(this.length),F$t=0;F$t<F$y;F$t++)F$j[F$t]=this[F$t];return F$j},F$A._float32ArraySlice=function(){for(var F$y=this.length,F$j=new Float32Array(this.length),F$t=0;F$t<F$y;F$t++)F$j[F$t]=this[F$t];return F$j},F$A._uint16ArraySlice=function(F$y){var F$j,F$t=arguments,F$k=0,F$T=0;if(0===F$t.length)for(F$k=this.length,F$j=new Uint16Array(F$k),F$T=0;F$T<F$k;F$T++)F$j[F$T]=this[F$T];else if(2===F$t.length){var F$Y=F$t[0],F$A=F$t[1];if(F$Y<F$A)for(F$k=F$A-F$Y,F$j=new Uint16Array(F$k),F$T=F$Y;F$T<F$A;F$T++)F$j[F$T-F$Y]=this[F$T];else F$j=new Uint16Array(0)}return F$j},F$A.expandContext=function(){var F$y=F$T.prototype,F$j=CanvasRenderingContext2D.prototype;F$j.fillTrangles=F$y.fillTrangles,F$Ly.__int__(null),F$j.setIBVB=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){void 0===F$I&&(F$I=0),void 0===F$b&&(F$b=0),null===F$t&&(this._ib=this._ib||F$Ey.QuadrangleIB,F$t=this._ib,F$Vy.expandIBQuadrangle(F$t,F$k._byteLength/64+8)),this._setIBVB(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b)},F$j.fillTrangles=function(F$y,F$j,F$t,F$k,F$T){this._curMat=this._curMat||F$d.create(),this._vb=this._vb||F$uy.create(),this._ib||(this._ib=F$Ey.create(),F$Vy.fillIBQuadrangle(this._ib,F$A/4));var F$Y=this._vb,F$A=F$k.length>>4;F$Vy.fillTranglesVB(F$Y,F$j,F$t,F$k,F$T||this._curMat,0,0),F$Vy.expandIBQuadrangle(this._ib,F$Y._byteLength/64+8);var F$X=new F$Py(1,0);F$X.textureHost=F$y;var F$I=new F$iy("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");F$Y._vertType=3,this._setIBVB(F$j,F$t,this._ib,F$Y,6*F$A,F$T,F$I,F$X,0,0)}},F$A.enable=function(){if(F$$.__init__(),F$n.isConchApp&&!F$n.isConchWebGL)return F$e.skinAniSprite=function(){return new F$yy},F$A.expandContext(),!1;if(F$e.getWebGLContext=function(F$y){for(var F$j,F$t=["webgl","experimental-webgl","webkit-3d","moz-webgl"],F$k=0;F$k<F$t.length;F$k++){try{F$j=F$y.getContext(F$t[F$k],{stencil:F$N.isStencil,alpha:F$N.isAlpha,antialias:F$N.isAntialias,premultipliedAlpha:F$N.premultipliedAlpha,preserveDrawingBuffer:F$N.preserveDrawingBuffer})}catch(F$y){}if(F$j)return F$j}return null},null==(F$A.mainContext=F$A.mainContext||F$e.getWebGLContext(F$n._mainCanvas)))return!1;if(F$n.isWebGL)return!0;F$V.create=function(F$y,F$j){return new F$yj(F$y,F$j)},F$j.create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){return new F$By(F$y,F$j,F$t,F$k,F$T,F$Y,F$A)},F$n.WebGL=F$A,F$n.isWebGL=!0,F$$y.__init__(),F$e.createRenderSprite=function(F$y,F$j){return new F$dy(F$y,F$j)},F$e.createWebGLContext2D=function(F$y){return new F$Ny(F$y)},F$e.changeWebGLSize=function(F$y,F$j){laya.webgl.WebGL.onStageResize(F$y,F$j)},F$e.createGraphics=function(){return new F$vy};var F$y=F$e.createFilterAction;return F$e.createFilterAction=F$y||function(F$y){return new F$py},F$e.clear=function(F$y){F$Cy.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var F$j=F$n.context.ctx,F$t=0==F$j._submits._length||F$N.preserveDrawingBuffer?F$W.create(F$y)._color:F$m._wgColor;F$t&&F$j.clearBG(F$t[0],F$t[1],F$t[2],F$t[3]),F$Cy.clear()},F$e.addToAtlas=function(F$y,F$j){void 0===F$j&&(F$j=!1);var F$t=F$y.bitmap;F$n.optimizeTextureMemory(F$y.url,F$y)?F$v.__typeof(F$t,"laya.webgl.resource.IMergeAtlasBitmap")&&F$t.allowMerageInAtlas&&F$t.on("recovered",F$y,F$y.addTextureToAtlas):F$t.enableMerageInAtlas=!1},F$e.isAtlas=function(F$y){return F$y instanceof laya.webgl.atlas.AtlasWebGLCanvas},F$a._enable(),F$e.beginFlush=function(){for(var F$y=F$a.instance,F$j=F$y.getAtlaserCount(),F$t=0;F$t<F$j;F$t++){var F$k=F$y.getAtlaserByIndex(F$t).texture;F$k._flashCacheImageNeedFlush&&F$e.flashFlushImage(F$k)}},F$e.drawToCanvas=function(F$y,F$j,F$t,F$k,F$T,F$Y){(F$t<=0||F$k<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),F$t|=0,F$k|=0,F$T|=0,F$Y|=0;var F$A=F$xy.create(F$t,F$k,6408,5121,0,!1);F$A.start(),F$A.clear(0,0,0,0),F$n.context.clear(),F$C.renders[F$j]._fun(F$y,F$n.context,F$T,F$Cy.height-F$k+F$Y),F$n.context.flush(),F$A.end();var F$X=F$A.getData(0,0,F$t,F$k);if(F$A.recycle(),F$X.byteLength==F$t*F$k*4){var F$I=new F$sy;F$I._canvas=F$$.createElement("canvas"),F$I.size(F$t,F$k);var F$b=F$I._canvas.getContext("2d");F$$.canvas.size(F$t,F$k);var F$D=F$$.context,F$l=F$D.createImageData(F$t,F$k);return F$l.data.set(new Uint8ClampedArray(F$X.buffer)),F$I._imgData=F$l,F$D.putImageData(F$l,0,0),F$b.save(),F$b.translate(0,F$k),F$b.scale(1,-1),F$b.drawImage(F$$.canvas.source,0,0),F$b.restore(),F$I}console.log("drawToCanvas error: w:"+F$t+",h:"+F$k+",datalen:"+F$X.byteLength)},F$e.createFilterAction=function(F$y){var F$j;switch(F$y){case 32:F$j=new F$py}return F$j},F$e.addTextureToAtlas=function(F$y){F$y._uvID++,F$a._atlasRestore++,F$y.bitmap.enableMerageInAtlas&&F$a.instance.addToAtlas(F$y)},F$e.getTexturePixels=function(F$y,F$j,F$t,F$k,F$T){F$n.context.ctx.clear();var F$Y=new F$Q;F$Y.graphics.drawTexture(F$y,-F$j,-F$t);var F$A=F$xy.create(F$k,F$T);F$A.start(),F$A.clear(0,0,0,0),F$Y.render(F$n.context,0,0),F$n.context.ctx.flush(),F$A.end();for(var F$X=F$A.getData(0,0,F$k,F$T),F$I=[],F$b=0,F$D=F$T-1;0<=F$D;F$D--)for(var F$l=0;F$l<F$k;F$l++)F$b=4*(F$D*F$k+F$l),F$I.push(F$X[F$b]),F$I.push(F$X[F$b+1]),F$I.push(F$X[F$b+2]),F$I.push(F$X[F$b+3]);return F$I},F$e.skinAniSprite=function(){return new F$yy},F$z.create=function(F$y,F$j){var F$t=new F$sy;return F$t._imgData=F$j,F$t.flipY=!1,F$t},F$P._filterStart=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$y.getValue("bounds"),F$A=F$xy.create(F$Y.width,F$Y.height);if(F$A.start(),F$A.clear(0,0,0,0),F$y.addValue("src",F$A),F$y.addValue("ScissorTest",F$Cy.worldScissorTest),F$Cy.worldScissorTest){var F$X=new F$f;F$X.copyFrom(F$t.ctx._clipRect),F$y.addValue("clipRect",F$X),F$Cy.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},F$P._filterEnd=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$y.getValue("bounds");F$y.getValue("src").end();var F$A=F$xy.create(F$Y.width,F$Y.height);F$A.start(),F$A.clear(0,0,0,0),F$y.addValue("out",F$A),F$j._set$P("_filterCache",F$A),F$j._set$P("_isHaveGlowFilter",F$y.getValue("_isHaveGlowFilter"))},F$P._EndTarget=function(F$y,F$j){if(F$y.getValue("src").recycle(),F$y.getValue("out").end(),F$y.getValue("ScissorTest")){F$Cy.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),F$j.ctx.save();var F$t=F$y.getValue("clipRect");F$j.ctx.clipRect(F$t.x,F$t.y,F$t.width,F$t.height)}},F$P._useSrc=function(F$y){var F$j=F$y.getValue("out");F$j.end(),(F$j=F$y.getValue("src")).start(),F$j.clear(0,0,0,0)},F$P._endSrc=function(F$y){F$y.getValue("src").end()},F$P._useOut=function(F$y){var F$j=F$y.getValue("src");F$j.end(),(F$j=F$y.getValue("out")).start(),F$j.clear(0,0,0,0)},F$P._endOut=function(F$y){F$y.getValue("out").end()},F$P._recycleScope=function(F$y){F$y.recycle()},F$P._filter=function(F$y,F$j,F$t,F$k){var F$T=this._next;if(F$T){var F$Y,F$A,F$X=F$y.filters,F$I=F$X.length;if(1==F$I&&32==F$X[0].type)return F$j.ctx.save(),F$j.ctx.setFilters([F$X[0]]),F$T._fun.call(F$T,F$y,F$j,F$t,F$k),void F$j.ctx.restore();var F$b=F$Xy.create(),F$D=F$p.TEMP,F$l=F$j.ctx._getTransformMatrix(),F$r=F$d.create();F$l.copyTo(F$r);var F$$=0,F$W=0,F$z=!1,F$V=F$y._$P._filterCache?F$y._$P._filterCache:null;if(!F$V||F$y._repaint){F$z=F$y._isHaveGlowFilter(),F$b.addValue("_isHaveGlowFilter",F$z),F$z&&(F$$=50,F$W=25),(F$A=new F$f).copyFrom(F$y.getSelfBounds()),F$A.x+=F$y.x,F$A.y+=F$y.y,F$A.x-=F$y.pivotX+4,F$A.y-=F$y.pivotY+4;var F$n=F$A.x,F$C=F$A.y;if(F$A.width+=F$$+8,F$A.height+=F$$+8,F$D.x=F$A.x*F$r.a+F$A.y*F$r.c,F$D.y=F$A.y*F$r.d+F$A.x*F$r.b,F$A.x=F$D.x,F$A.y=F$D.y,F$D.x=F$A.width*F$r.a+F$A.height*F$r.c,F$D.y=F$A.height*F$r.d+F$A.width*F$r.b,F$A.width=F$D.x,F$A.height=F$D.y,F$A.width<=0||F$A.height<=0)return;F$V&&F$V.recycle(),F$b.addValue("bounds",F$A);var F$M=F$Ay.create([F$b,F$y,F$j,0,0],F$P._filterStart);F$j.addRenderObject(F$M),F$j.ctx._renderKey=0,F$j.ctx._shader2D.glTexture=null;var F$_=F$y.x-F$n+F$W,F$e=F$y.y-F$C+F$W;F$T._fun.call(F$T,F$y,F$j,F$_,F$e),F$M=F$Ay.create([F$b,F$y,F$j,0,0],F$P._filterEnd),F$j.addRenderObject(F$M);for(var F$v=0;F$v<F$I;F$v++){0!=F$v&&(F$M=F$Ay.create([F$b],F$P._useSrc),F$j.addRenderObject(F$M),F$Y=F$Py.create(1,0),F$d.TEMP.identity(),F$j.ctx.drawTarget(F$b,0,0,F$A.width,F$A.height,F$d.TEMP,"out",F$Y,null,F$h.TOINT.overlay),F$M=F$Ay.create([F$b],F$P._useOut),F$j.addRenderObject(F$M)),F$X[F$v].action.apply3d(F$b,F$y,F$j,0,0)}F$M=F$Ay.create([F$b,F$j],F$P._EndTarget),F$j.addRenderObject(F$M)}else{if((F$z=!!F$y._$P._isHaveGlowFilter&&F$y._$P._isHaveGlowFilter)&&(F$$=50,F$W=25),(F$A=F$y.getBounds()).width<=0||F$A.height<=0)return;F$A.width+=F$$,F$A.height+=F$$,F$D.x=F$A.x*F$r.a+F$A.y*F$r.c,F$D.y=F$A.y*F$r.d+F$A.x*F$r.b,F$A.x=F$D.x,F$A.y=F$D.y,F$D.x=F$A.width*F$r.a+F$A.height*F$r.c,F$D.y=F$A.height*F$r.d+F$A.width*F$r.b,F$A.width=F$D.x,F$A.height=F$D.y,F$b.addValue("out",F$V)}F$t=F$t-F$W-F$y.x,F$k=F$k-F$W-F$y.y,F$D.setTo(F$t,F$k),F$r.transformPoint(F$D),F$t=F$D.x+F$A.x,F$k=F$D.y+F$A.y,F$Y=F$Py.create(1,0),F$d.TEMP.identity(),F$j.ctx.drawTarget(F$b,F$t,F$k,F$A.width,F$A.height,F$d.TEMP,"out",F$Y,null,F$h.TOINT.overlay),F$M=F$Ay.create([F$b],F$P._recycleScope),F$j.addRenderObject(F$M),F$r.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=F$A._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=F$A._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=F$A._uint8ArraySlice),!0},F$A.onStageResize=function(F$y,F$j){null!=F$A.mainContext&&(F$A.mainContext.viewport(0,0,F$y,F$j),F$Cy.width=F$y,F$Cy.height=F$j)},F$A.onInvalidGLRes=function(){F$a.instance.freeAll(),F$_.releaseContentManagers(!0),F$A.doNodeRepaint(F$v.stage),F$A.mainContext.viewport(0,0,F$Cy.width,F$Cy.height),F$v.stage.event("devicelost")},F$A.doNodeRepaint=function(F$y){0==F$y.numChildren&&F$y.repaint();for(var F$j=0;F$j<F$y.numChildren;F$j++)F$A.doNodeRepaint(F$y.getChildAt(F$j))},F$A.init=function(F$y,F$j,F$t){F$A.mainCanvas=F$y,F$z._createContext=function(F$y){return new F$Ny(F$y)},F$sy._createContext=function(F$y){return new F$Ny(F$y)};var F$k=laya.webgl.WebGL.mainContext;if(null!=F$k.getShaderPrecisionFormat){var F$T=F$k.getShaderPrecisionFormat(35633,36338),F$Y=F$k.getShaderPrecisionFormat(35632,36338);F$A.shaderHighPrecision=!(!F$T.precision||!F$Y.precision)}else F$A.shaderHighPrecision=!1;if(F$A.compressAstc=F$k.getExtension("WEBGL_compressed_texture_astc"),F$A.compressAtc=F$k.getExtension("WEBGL_compressed_texture_atc"),F$A.compressEtc=F$k.getExtension("WEBGL_compressed_texture_etc"),F$A.compressEtc1=F$k.getExtension("WEBGL_compressed_texture_etc1"),F$A.compressPvrtc=F$k.getExtension("WEBGL_compressed_texture_pvrtc"),F$A.compressS3tc=F$k.getExtension("WEBGL_compressed_texture_s3tc"),F$A.compressS3tc_srgb=F$k.getExtension("WEBGL_compressed_texture_s3tc_srgb"),F$A.compressAstc=F$A.compressAstc?F$A.compressAstc:{},F$A.compressAtc=F$A.compressAtc?F$A.compressAtc:{},F$A.compressEtc=F$A.compressEtc?F$A.compressEtc:{},F$A.compressEtc1=F$A.compressEtc1?F$A.compressEtc1:{},F$A.compressPvrtc=F$A.compressPvrtc?F$A.compressPvrtc:{},F$A.compressS3tc=F$A.compressS3tc?F$A.compressS3tc:{},F$A.compressS3tc_srgb=F$A.compressS3tc_srgb?F$A.compressS3tc_srgb:{},F$k.deleteTexture1=F$k.deleteTexture,F$k.deleteTexture=function(F$y){F$y==F$ey.curBindTexValue&&(F$ey.curBindTexValue=null),F$k.deleteTexture1(F$y)},F$A.onStageResize(F$j,F$t),null==F$A.mainContext)throw new Error("webGL getContext err!");F$w.__init__(),F$a.__init__(),F$Qy.__init__(),F$Yy.__init__(),F$Ny.__init__(),F$Py.__init__(),F$E.__init__(),F$Ly.__int__(F$k),F$h._init_(F$k),F$n.isConchApp&&conch.setOnInvalidGLRes(F$A.onInvalidGLRes)},F$A.mainCanvas=null,F$A.antialias=!0,F$A.shaderHighPrecision=!1,F$A._bg_null=[0,0,0,0],F$A}(),F$ey=function(){function F$k(){}return F$r(F$k,"laya.webgl.WebGLContext"),F$k.UseProgram=function(F$y){return F$k._useProgram!==F$y&&(F$_y.mainContext.useProgram(F$y),F$k._useProgram=F$y,!0)},F$k.setDepthTest=function(F$y,F$j){F$j!==F$k._depthTest&&((F$k._depthTest=F$j)?F$y.enable(2929):F$y.disable(2929))},F$k.setDepthMask=function(F$y,F$j){F$j!==F$k._depthMask&&(F$k._depthMask=F$j,F$y.depthMask(F$j))},F$k.setDepthFunc=function(F$y,F$j){F$j!==F$k._depthFunc&&(F$k._depthFunc=F$j,F$y.depthFunc(F$j))},F$k.setBlend=function(F$y,F$j){F$j!==F$k._blend&&((F$k._blend=F$j)?F$y.enable(3042):F$y.disable(3042))},F$k.setBlendFunc=function(F$y,F$j,F$t){(F$j!==F$k._sFactor||F$t!==F$k._dFactor)&&(F$k._sFactor=F$j,F$k._dFactor=F$t,F$y.blendFunc(F$j,F$t))},F$k.setCullFace=function(F$y,F$j){F$j!==F$k._cullFace&&((F$k._cullFace=F$j)?F$y.enable(2884):F$y.disable(2884))},F$k.setFrontFace=function(F$y,F$j){F$j!==F$k._frontFace&&(F$k._frontFace=F$j,F$y.frontFace(F$j))},F$k.bindTexture=function(F$y,F$j,F$t){F$y.bindTexture(F$j,F$t),F$k.curBindTexTarget=F$j,F$k.curBindTexValue=F$t},F$k.DEPTH_BUFFER_BIT=256,F$k.STENCIL_BUFFER_BIT=1024,F$k.COLOR_BUFFER_BIT=16384,F$k.POINTS=0,F$k.LINES=1,F$k.LINE_LOOP=2,F$k.LINE_STRIP=3,F$k.TRIANGLES=4,F$k.TRIANGLE_STRIP=5,F$k.TRIANGLE_FAN=6,F$k.ZERO=0,F$k.ONE=1,F$k.SRC_COLOR=768,F$k.ONE_MINUS_SRC_COLOR=769,F$k.SRC_ALPHA=770,F$k.ONE_MINUS_SRC_ALPHA=771,F$k.DST_ALPHA=772,F$k.ONE_MINUS_DST_ALPHA=773,F$k.DST_COLOR=774,F$k.ONE_MINUS_DST_COLOR=775,F$k.SRC_ALPHA_SATURATE=776,F$k.FUNC_ADD=32774,F$k.BLEND_EQUATION=32777,F$k.BLEND_EQUATION_RGB=32777,F$k.BLEND_EQUATION_ALPHA=34877,F$k.FUNC_SUBTRACT=32778,F$k.FUNC_REVERSE_SUBTRACT=32779,F$k.BLEND_DST_RGB=32968,F$k.BLEND_SRC_RGB=32969,F$k.BLEND_DST_ALPHA=32970,F$k.BLEND_SRC_ALPHA=32971,F$k.CONSTANT_COLOR=32769,F$k.ONE_MINUS_CONSTANT_COLOR=32770,F$k.CONSTANT_ALPHA=32771,F$k.ONE_MINUS_CONSTANT_ALPHA=32772,F$k.BLEND_COLOR=32773,F$k.ARRAY_BUFFER=34962,F$k.ELEMENT_ARRAY_BUFFER=34963,F$k.ARRAY_BUFFER_BINDING=34964,F$k.ELEMENT_ARRAY_BUFFER_BINDING=34965,F$k.STREAM_DRAW=35040,F$k.STATIC_DRAW=35044,F$k.DYNAMIC_DRAW=35048,F$k.BUFFER_SIZE=34660,F$k.BUFFER_USAGE=34661,F$k.CURRENT_VERTEX_ATTRIB=34342,F$k.FRONT=1028,F$k.BACK=1029,F$k.CULL_FACE=2884,F$k.FRONT_AND_BACK=1032,F$k.BLEND=3042,F$k.DITHER=3024,F$k.STENCIL_TEST=2960,F$k.DEPTH_TEST=2929,F$k.SCISSOR_TEST=3089,F$k.POLYGON_OFFSET_FILL=32823,F$k.SAMPLE_ALPHA_TO_COVERAGE=32926,F$k.SAMPLE_COVERAGE=32928,F$k.NO_ERROR=0,F$k.INVALID_ENUM=1280,F$k.INVALID_VALUE=1281,F$k.INVALID_OPERATION=1282,F$k.OUT_OF_MEMORY=1285,F$k.CW=2304,F$k.CCW=2305,F$k.LINE_WIDTH=2849,F$k.ALIASED_POINT_SIZE_RANGE=33901,F$k.ALIASED_LINE_WIDTH_RANGE=33902,F$k.CULL_FACE_MODE=2885,F$k.FRONT_FACE=2886,F$k.DEPTH_RANGE=2928,F$k.DEPTH_WRITEMASK=2930,F$k.DEPTH_CLEAR_VALUE=2931,F$k.DEPTH_FUNC=2932,F$k.STENCIL_CLEAR_VALUE=2961,F$k.STENCIL_FUNC=2962,F$k.STENCIL_FAIL=2964,F$k.STENCIL_PASS_DEPTH_FAIL=2965,F$k.STENCIL_PASS_DEPTH_PASS=2966,F$k.STENCIL_REF=2967,F$k.STENCIL_VALUE_MASK=2963,F$k.STENCIL_WRITEMASK=2968,F$k.STENCIL_BACK_FUNC=34816,F$k.STENCIL_BACK_FAIL=34817,F$k.STENCIL_BACK_PASS_DEPTH_FAIL=34818,F$k.STENCIL_BACK_PASS_DEPTH_PASS=34819,F$k.STENCIL_BACK_REF=36003,F$k.STENCIL_BACK_VALUE_MASK=36004,F$k.STENCIL_BACK_WRITEMASK=36005,F$k.VIEWPORT=2978,F$k.SCISSOR_BOX=3088,F$k.COLOR_CLEAR_VALUE=3106,F$k.COLOR_WRITEMASK=3107,F$k.UNPACK_ALIGNMENT=3317,F$k.PACK_ALIGNMENT=3333,F$k.MAX_TEXTURE_SIZE=3379,F$k.MAX_VIEWPORT_DIMS=3386,F$k.SUBPIXEL_BITS=3408,F$k.RED_BITS=3410,F$k.GREEN_BITS=3411,F$k.BLUE_BITS=3412,F$k.ALPHA_BITS=3413,F$k.DEPTH_BITS=3414,F$k.STENCIL_BITS=3415,F$k.POLYGON_OFFSET_UNITS=10752,F$k.POLYGON_OFFSET_FACTOR=32824,F$k.TEXTURE_BINDING_2D=32873,F$k.SAMPLE_BUFFERS=32936,F$k.SAMPLES=32937,F$k.SAMPLE_COVERAGE_VALUE=32938,F$k.SAMPLE_COVERAGE_INVERT=32939,F$k.NUM_COMPRESSED_TEXTURE_FORMATS=34466,F$k.COMPRESSED_TEXTURE_FORMATS=34467,F$k.DONT_CARE=4352,F$k.FASTEST=4353,F$k.NICEST=4354,F$k.GENERATE_MIPMAP_HINT=33170,F$k.BYTE=5120,F$k.UNSIGNED_BYTE=5121,F$k.SHORT=5122,F$k.UNSIGNED_SHORT=5123,F$k.INT=5124,F$k.UNSIGNED_INT=5125,F$k.FLOAT=5126,F$k.DEPTH_COMPONENT=6402,F$k.ALPHA=6406,F$k.RGB=6407,F$k.RGBA=6408,F$k.LUMINANCE=6409,F$k.LUMINANCE_ALPHA=6410,F$k.UNSIGNED_SHORT_4_4_4_4=32819,F$k.UNSIGNED_SHORT_5_5_5_1=32820,F$k.UNSIGNED_SHORT_5_6_5=33635,F$k.FRAGMENT_SHADER=35632,F$k.VERTEX_SHADER=35633,F$k.MAX_VERTEX_ATTRIBS=34921,F$k.MAX_VERTEX_UNIFORM_VECTORS=36347,F$k.MAX_VARYING_VECTORS=36348,F$k.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,F$k.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,F$k.MAX_TEXTURE_IMAGE_UNITS=34930,F$k.MAX_FRAGMENT_UNIFORM_VECTORS=36349,F$k.SHADER_TYPE=35663,F$k.DELETE_STATUS=35712,F$k.LINK_STATUS=35714,F$k.VALIDATE_STATUS=35715,F$k.ATTACHED_SHADERS=35717,F$k.ACTIVE_UNIFORMS=35718,F$k.ACTIVE_ATTRIBUTES=35721,F$k.SHADING_LANGUAGE_VERSION=35724,F$k.CURRENT_PROGRAM=35725,F$k.NEVER=512,F$k.LESS=513,F$k.EQUAL=514,F$k.LEQUAL=515,F$k.GREATER=516,F$k.NOTEQUAL=517,F$k.GEQUAL=518,F$k.ALWAYS=519,F$k.KEEP=7680,F$k.REPLACE=7681,F$k.INCR=7682,F$k.DECR=7683,F$k.INVERT=5386,F$k.INCR_WRAP=34055,F$k.DECR_WRAP=34056,F$k.VENDOR=7936,F$k.RENDERER=7937,F$k.VERSION=7938,F$k.NEAREST=9728,F$k.LINEAR=9729,F$k.NEAREST_MIPMAP_NEAREST=9984,F$k.LINEAR_MIPMAP_NEAREST=9985,F$k.NEAREST_MIPMAP_LINEAR=9986,F$k.LINEAR_MIPMAP_LINEAR=9987,F$k.TEXTURE_MAG_FILTER=10240,F$k.TEXTURE_MIN_FILTER=10241,F$k.TEXTURE_WRAP_S=10242,F$k.TEXTURE_WRAP_T=10243,F$k.TEXTURE_2D=3553,F$k.TEXTURE=5890,F$k.TEXTURE_CUBE_MAP=34067,F$k.TEXTURE_BINDING_CUBE_MAP=34068,F$k.TEXTURE_CUBE_MAP_POSITIVE_X=34069,F$k.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,F$k.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,F$k.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,F$k.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,F$k.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,F$k.MAX_CUBE_MAP_TEXTURE_SIZE=34076,F$k.TEXTURE0=33984,F$k.TEXTURE1=33985,F$k.TEXTURE2=33986,F$k.TEXTURE3=33987,F$k.TEXTURE4=33988,F$k.TEXTURE5=33989,F$k.TEXTURE6=33990,F$k.TEXTURE7=33991,F$k.TEXTURE8=33992,F$k.TEXTURE9=33993,F$k.TEXTURE10=33994,F$k.TEXTURE11=33995,F$k.TEXTURE12=33996,F$k.TEXTURE13=33997,F$k.TEXTURE14=33998,F$k.TEXTURE15=33999,F$k.TEXTURE16=34e3,F$k.TEXTURE17=34001,F$k.TEXTURE18=34002,F$k.TEXTURE19=34003,F$k.TEXTURE20=34004,F$k.TEXTURE21=34005,F$k.TEXTURE22=34006,F$k.TEXTURE23=34007,F$k.TEXTURE24=34008,F$k.TEXTURE25=34009,F$k.TEXTURE26=34010,F$k.TEXTURE27=34011,F$k.TEXTURE28=34012,F$k.TEXTURE29=34013,F$k.TEXTURE30=34014,F$k.TEXTURE31=34015,F$k.ACTIVE_TEXTURE=34016,F$k.REPEAT=10497,F$k.CLAMP_TO_EDGE=33071,F$k.MIRRORED_REPEAT=33648,F$k.FLOAT_VEC2=35664,F$k.FLOAT_VEC3=35665,F$k.FLOAT_VEC4=35666,F$k.INT_VEC2=35667,F$k.INT_VEC3=35668,F$k.INT_VEC4=35669,F$k.BOOL=35670,F$k.BOOL_VEC2=35671,F$k.BOOL_VEC3=35672,F$k.BOOL_VEC4=35673,F$k.FLOAT_MAT2=35674,F$k.FLOAT_MAT3=35675,F$k.FLOAT_MAT4=35676,F$k.SAMPLER_2D=35678,F$k.SAMPLER_CUBE=35680,F$k.VERTEX_ATTRIB_ARRAY_ENABLED=34338,F$k.VERTEX_ATTRIB_ARRAY_SIZE=34339,F$k.VERTEX_ATTRIB_ARRAY_STRIDE=34340,F$k.VERTEX_ATTRIB_ARRAY_TYPE=34341,F$k.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,F$k.VERTEX_ATTRIB_ARRAY_POINTER=34373,F$k.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,F$k.COMPILE_STATUS=35713,F$k.LOW_FLOAT=36336,F$k.MEDIUM_FLOAT=36337,F$k.HIGH_FLOAT=36338,F$k.LOW_INT=36339,F$k.MEDIUM_INT=36340,F$k.HIGH_INT=36341,F$k.FRAMEBUFFER=36160,F$k.RENDERBUFFER=36161,F$k.RGBA4=32854,F$k.RGB5_A1=32855,F$k.RGB565=36194,F$k.DEPTH_COMPONENT16=33189,F$k.STENCIL_INDEX=6401,F$k.STENCIL_INDEX8=36168,F$k.DEPTH_STENCIL=34041,F$k.RENDERBUFFER_WIDTH=36162,F$k.RENDERBUFFER_HEIGHT=36163,F$k.RENDERBUFFER_INTERNAL_FORMAT=36164,F$k.RENDERBUFFER_RED_SIZE=36176,F$k.RENDERBUFFER_GREEN_SIZE=36177,F$k.RENDERBUFFER_BLUE_SIZE=36178,F$k.RENDERBUFFER_ALPHA_SIZE=36179,F$k.RENDERBUFFER_DEPTH_SIZE=36180,F$k.RENDERBUFFER_STENCIL_SIZE=36181,F$k.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,F$k.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,F$k.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,F$k.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,F$k.COLOR_ATTACHMENT0=36064,F$k.DEPTH_ATTACHMENT=36096,F$k.STENCIL_ATTACHMENT=36128,F$k.DEPTH_STENCIL_ATTACHMENT=33306,F$k.NONE=0,F$k.FRAMEBUFFER_COMPLETE=36053,F$k.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,F$k.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,F$k.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,F$k.FRAMEBUFFER_UNSUPPORTED=36061,F$k.FRAMEBUFFER_BINDING=36006,F$k.RENDERBUFFER_BINDING=36007,F$k.MAX_RENDERBUFFER_SIZE=34024,F$k.INVALID_FRAMEBUFFER_OPERATION=1286,F$k.UNPACK_FLIP_Y_WEBGL=37440,F$k.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,F$k.CONTEXT_LOST_WEBGL=37442,F$k.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,F$k.BROWSER_DEFAULT_WEBGL=37444,F$k._useProgram=null,F$k._depthTest=!0,F$k._depthMask=!0,F$k._blend=!1,F$k._cullFace=!1,F$k.curBindTexTarget=null,F$k.curBindTexValue=null,F$A(F$k,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),F$k}(),F$vy=function(F$y){function F$j(){F$j.__super.call(this)}F$r(F$j,"laya.webgl.display.GraphicsGL",F$X);var F$t=F$j.prototype;return F$t.setShader=function(F$y){this._saveToCmd(F$n.context._setShader,[F$y])},F$t.setIBVB=function(F$y,F$j,F$t,F$k,F$T,F$Y){this._saveToCmd(F$n.context._setIBVB,[F$y,F$j,F$t,F$k,F$T,F$Y])},F$t.drawParticle=function(F$y,F$j,F$t){var F$k=F$e.createParticleTemplate2D(F$t);F$k.x=F$y,F$k.y=F$j,this._saveToCmd(F$n.context._drawParticle,[F$k])},F$j}(),F$Ny=function(F$y){var F$t;function F$g(F$y){this._x=0,this._y=0,this._id=++F$g._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,F$g.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=F$g.MAXCLIPRECT,this.mOutPoint,this._canvas=F$y,this._canvas._addReference(),F$g._contextcount++,F$n.isFlash?(this._ib=F$Ey.create(35044),F$Vy.fillIBQuadrangle(this._ib,16)):this._ib=F$Ey.QuadrangleIB,this.clear()}F$r(F$g,"laya.webgl.canvas.WebGLContext2D",F$T);var F$j=F$g.prototype;return F$j.setIsMainContext=function(){this._isMain=!0},F$j.clearBG=function(F$y,F$j,F$t,F$k){var F$T=F$_y.mainContext;F$T.clearColor(F$y,F$j,F$t,F$k),F$T.clear(16384)},F$j._getSubmits=function(){return this._submits},F$j._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var F$y=0,F$j=this._submits._length;F$y<F$j;F$y++)this._submits[F$y].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},F$j.destroy=function(){--F$g._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=F$Ey.QuadrangleIB&&this._ib.releaseResource()},F$j.clear=function(){this._submits||(this._other=F$t.DEFAULT,this._curMat=F$d.create(),this._vb=F$uy.create(-1),this._submits=[],this._save=[F$c.Create(this)],this._save.length=10,this._shader2D=new F$E,this._triangleMesh=F$Hy.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=F$t.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=F$g.MAXCLIPRECT,this._curSubmit=F$Yy.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=F$O.DEFAULT;for(var F$y=0,F$j=this._submits._length;F$y<F$j;F$y++)this._submits[F$y].releaseRender(),this._submits[F$y]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},F$j.size=function(F$y,F$j){if(this._width!=F$y||this._height!=F$j)if(0==F$y||0==F$j){0!=this._vb._byteLength&&(this._width=F$y,this._height=F$j,this._vb.clear(),this._vb.upload());for(var F$t=0,F$k=this._submits._length;F$t<F$k;F$t++)this._submits[F$t].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=F$y,this._height=F$j,this._targets&&this._targets.size(F$y,F$j),this._canvas.memorySize-=this._canvas.memorySize;0===F$y&&0===F$j&&this._releaseMem()},F$j._getTransformMatrix=function(){return this._curMat},F$j.translate=function(F$y,F$j){0===F$y&&0===F$j||(F$o.save(this),this._curMat.bTransform&&(F$L.save(this),this._curMat.transformPointN(F$p.TEMP.setTo(F$y,F$j)),F$y=F$p.TEMP.x,F$j=F$p.TEMP.y),this._x+=F$y,this._y+=F$j)},F$j.save=function(){this._save[this._save._length++]=F$c.Create(this)},F$j.restore=function(){var F$y=this._save._length;if(!(F$y<1))for(var F$j=F$y-1;0<=F$j;F$j--){var F$t=this._save[F$j];if(F$t.restore(this),F$t.isSaveMark())return void(this._save._length=F$j)}},F$j._fillText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){void 0===F$b&&(F$b=0);var F$D=this._shader2D,F$l=this._curSubmit.shaderValue,F$r=F$T?F$Wy.create(F$T):this._other.font;if(F$a.enabled)F$D.ALPHA!==F$l.ALPHA&&(F$D.glTexture=null),F$$y.drawText(this,F$y,F$j,this._curMat,F$r,F$I||this._other.textAlign,F$Y,F$A,F$X,F$t,F$k,F$b);else{this._shader2D.defines.getValue();var F$$=F$Y?F$W.create(F$Y)._color:F$D.colorAdd;F$D.ALPHA===F$l.ALPHA&&F$$===F$D.colorAdd&&F$l.colorAdd===F$D.colorAdd||(F$D.glTexture=null,F$D.colorAdd=F$$),F$$y.drawText(this,F$y,F$j,this._curMat,F$r,F$I||this._other.textAlign,F$Y,F$A,F$X,F$t,F$k,F$b)}},F$j.fillWords=function(F$y,F$j,F$t,F$k,F$T,F$Y){this._fillText(null,F$y,F$j,F$t,F$k,F$T,null,-1,null,F$Y)},F$j.fillBorderWords=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._fillBorderText(null,F$y,F$j,F$t,F$k,F$T,F$Y,F$A,null)},F$j.fillText=function(F$y,F$j,F$t,F$k,F$T,F$Y){this._fillText(F$y,null,F$j,F$t,F$k,F$T,null,-1,F$Y)},F$j.strokeText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._fillText(F$y,null,F$j,F$t,F$k,null,F$T,F$Y||1,F$A)},F$j.fillBorderText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){this._fillBorderText(F$y,null,F$j,F$t,F$k,F$T,F$Y,F$A,F$X)},F$j._fillBorderText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){if(!F$a.enabled)return this._fillText(F$y,F$j,F$t,F$k,F$T,null,F$A,F$X||1,F$I),void this._fillText(F$y,F$j,F$t,F$k,F$T,F$Y,null,-1,F$I);var F$b=this._shader2D,F$D=this._curSubmit.shaderValue;F$b.ALPHA!==F$D.ALPHA&&(F$b.glTexture=null);var F$l=F$T?(F$g._fontTemp.setFont(F$T),F$g._fontTemp):this._other.font;F$$y.drawText(this,F$y,F$j,this._curMat,F$l,F$I||this._other.textAlign,F$Y,F$A,F$X||1,F$t,F$k,0)},F$j.fillRect=function(F$y,F$j,F$t,F$k,F$T){var F$Y=this._vb;if(F$Vy.fillRectImgVb(F$Y,this._clipRect,F$y,F$j,F$t,F$k,F$H.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$A=this._shader2D.fillStyle;F$T&&(this._shader2D.fillStyle=F$O.create(F$T));var F$X=this._shader2D,F$I=this._curSubmit.shaderValue;if(F$X.fillStyle!==F$I.fillStyle||F$X.ALPHA!==F$I.ALPHA){F$X.glTexture=null;var F$b=this._curSubmit=F$Yy.createSubmit(this,this._ib,F$Y,(F$Y._byteLength-64)/32*3,F$Py.create(2,0));F$b.shaderValue.color=F$X.fillStyle._color._color,F$b.shaderValue.ALPHA=F$X.ALPHA,this._submits[this._submits._length++]=F$b}this._curSubmit._numEle+=6,this._shader2D.fillStyle=F$A}},F$j.fillTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){if(F$y.loaded&&F$y.bitmap&&F$y.source){var F$I=this._vb,F$b=F$y.bitmap.width,F$D=F$y.bitmap.height,F$l=F$y.uv,F$r=F$A.x%F$y.width,F$$=F$A.y%F$y.height;if(F$b!=F$X.w||F$D!=F$X.h){if(!F$X.w&&!F$X.h)switch(F$X.oy=F$X.ox=0,F$Y){case"repeat":F$X.width=F$k,F$X.height=F$T;break;case"repeat-x":F$X.width=F$k,F$$<0?F$y.height+F$$>F$T?F$X.height=F$T:F$X.height=F$y.height+F$$:(F$X.oy=F$$,F$y.height+F$$>F$T?F$X.height=F$T-F$$:F$X.height=F$y.height);break;case"repeat-y":F$r<0?F$y.width+F$r>F$k?F$X.width=F$k:F$X.width=F$y.width+F$r:(F$X.ox=F$r,F$y.width+F$r>F$k?F$X.width=F$k-F$r:F$X.width=F$y.width),F$X.height=F$T;break;case"no-repeat":F$r<0?F$y.width+F$r>F$k?F$X.width=F$k:F$X.width=F$y.width+F$r:(F$X.ox=F$r,F$y.width+F$r>F$k?F$X.width=F$k-F$r:F$X.width=F$y.width),F$$<0?F$y.height+F$$>F$T?F$X.height=F$T:F$X.height=F$y.height+F$$:(F$X.oy=F$$,F$y.height+F$$>F$T?F$X.height=F$T-F$$:F$X.height=F$y.height);break;default:F$X.width=F$k,F$X.height=F$T}F$X.w=F$b,F$X.h=F$D,F$X.uv=[0,0,F$X.width/F$b,0,F$X.width/F$b,F$X.height/F$D,0,F$X.height/F$D]}if(F$j+=F$X.ox,F$t+=F$X.oy,F$r-=F$X.ox,F$$-=F$X.oy,F$Vy.fillRectImgVb(F$I,this._clipRect,F$j,F$t,F$X.width,F$X.height,F$X.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var F$W=F$Sy.create(this,this._ib,F$I,(F$I._byteLength-64)/32*3,F$Py.create(256,0)),F$z=(this._submits[this._submits._length++]=F$W).shaderValue;F$z.textureHost=F$y;var F$V=F$l[0]*F$b,F$n=F$l[1]*F$D,F$C=(F$l[2]-F$l[0])*F$b,F$M=(F$l[5]-F$l[3])*F$D,F$_=-F$r/F$b,F$e=-F$$/F$D;F$z.u_TexRange[0]=F$V/F$b,F$z.u_TexRange[1]=F$C/F$b,F$z.u_TexRange[2]=F$n/F$D,F$z.u_TexRange[3]=F$M/F$D,F$z.u_offset[0]=F$_,F$z.u_offset[1]=F$e,F$a.enabled&&!this._isMain&&F$W.addTexture(F$y,(F$I._byteLength>>2)-16),(this._curSubmit=F$W)._renderType=10017,F$W._numEle+=6}}else this.sprite&&F$v.timer.callLater(this,this._repaintSprite)},F$j.setShader=function(F$y){F$Z.save(this,1048576,this._shader2D,!0),this._shader2D.shader=F$y},F$j.setFilters=function(F$y){F$Z.save(this,2097152,this._shader2D,!0),this._shader2D.filters=F$y,this._curSubmit=F$Yy.RENDERBASE,this._renderKey=0,this._drawCount++},F$j.drawTexture=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._drawTextureM(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,null,1)},F$j.addTextureVb=function(F$y,F$j,F$t){var F$k=this._curSubmit._vb||this._vb,F$T=F$k._byteLength>>2;F$k.byteLength=F$T+16<<2;for(var F$Y=F$k.getFloat32Array(),F$A=0;F$A<16;F$A+=4)F$Y[F$T++]=F$y[F$A]+F$j,F$Y[F$T++]=F$y[F$A+1]+F$t,F$Y[F$T++]=F$y[F$A+2],F$Y[F$T++]=F$y[F$A+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),F$k._upload=!0},F$j.willDrawTexture=function(F$y,F$j){if(!(F$y.loaded&&F$y.bitmap&&F$y.source))return this.sprite&&F$v.timer.callLater(this,this._repaintSprite),0;var F$t=F$y.bitmap,F$k=F$t.id+this._shader2D.ALPHA*F$j+10016;if(F$k==this._renderKey)return F$k;var F$T=this._shader2D,F$Y=F$T.ALPHA,F$A=this._curSubmit.shaderValue;F$T.ALPHA*=F$j,this._renderKey=F$k,this._drawCount++,F$T.glTexture=F$t;var F$X=this._vb,F$I=null,F$b=F$X._byteLength/32*3,F$D=F$A.textureHost&&F$A.textureHost==F$y&&F$A.textureHost.alphaTexture==F$y.alphaTexture;return F$I=F$Sy.create(this,this._ib,F$X,F$b,F$Py.create(1,0)),(this._submits[this._submits._length++]=F$I).shaderValue.textureHost=F$y,F$I._renderType=10016,F$I._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$T.ALPHA===F$A.ALPHA&&F$D,this._curSubmit=F$I,F$T.ALPHA=F$Y,F$k},F$j.drawTextures=function(F$y,F$j,F$t,F$k){if(F$y.loaded&&F$y.bitmap&&F$y.source){var F$T=this._clipRect;if(this._clipRect=F$g.MAXCLIPRECT,this._drawTextureM(F$y,F$j[0],F$j[1],F$y.width,F$y.height,F$t,F$k,null,1)){if(this._clipRect=F$T,F$U.drawCall++,!(F$j.length<4)){for(var F$Y=this._curSubmit._vb||this._vb,F$A=this._curMat.a,F$X=this._curMat.d,F$I=2,F$b=F$j.length;F$I<F$b;F$I+=2)F$Vy.copyPreImgVb(F$Y,(F$j[F$I]-F$j[F$I-2])*F$A,(F$j[F$I+1]-F$j[F$I-1])*F$X),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&F$v.timer.callLater(this,this._repaintSprite)},F$j._drawTextureM=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){if(!F$y.loaded||!F$y.source)return this.sprite&&F$v.timer.callLater(this,this._repaintSprite),!1;var F$b=this._curSubmit._vb||this._vb,F$D=F$y.bitmap;F$j+=F$Y,F$t+=F$A,this._drawCount++;var F$l=F$D.id+this._shader2D.ALPHA*F$I+10016;if(F$l!=this._renderKey){this._renderKey=F$l;var F$r=this._curSubmit.shaderValue,F$$=this._shader2D,F$W=F$$.ALPHA;F$$.ALPHA*=F$I,F$$.glTexture=F$D;var F$z=this._vb,F$V=null,F$n=F$z._byteLength/32*3,F$C=F$r.textureHost&&F$r.textureHost==F$y&&F$r.textureHost.alphaTexture==F$y.alphaTexture;F$V=F$Sy.create(this,this._ib,F$z,F$n,F$Py.create(1,0)),(this._submits[this._submits._length++]=F$V).shaderValue.textureHost=F$y,F$V._renderType=10016,F$V._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$$.ALPHA===F$r.ALPHA&&F$C,this._curSubmit=F$V,F$b=this._curSubmit._vb||this._vb,F$$.ALPHA=F$W}return!!F$Vy.fillRectImgVb(F$b,this._clipRect,F$j,F$t,F$k||F$y.width,F$T||F$y.height,F$y.uv,F$X||this._curMat,this._x,this._y,0,0)&&(F$a.enabled&&!this._isMain&&this._curSubmit.addTexture(F$y,(F$b._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},F$j._repaintSprite=function(){this.sprite&&this.sprite.repaint()},F$j._drawText=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){var F$D=F$y.bitmap;this._drawCount++;var F$l=F$D.id+this._shader2D.ALPHA+10016;if(F$l!=this._renderKey){this._renderKey=F$l;var F$r=this._curSubmit.shaderValue,F$$=this._shader2D;F$$.glTexture=F$D;var F$W=this._vb,F$z=null,F$V=F$W._byteLength/32*3,F$n=F$r.textureHost&&F$r.textureHost==F$y&&F$r.textureHost.alphaTexture==F$y.alphaTexture;(F$z=F$a.enabled?F$Sy.create(this,this._ib,F$W,F$V,F$Py.create(1,0)):F$Sy.create(this,this._ib,F$W,F$V,F$oy.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&F$$.ALPHA===F$r.ALPHA&&F$n,(this._submits[this._submits._length++]=F$z).shaderValue.textureHost=F$y,F$z._renderType=10016,this._curSubmit=F$z}F$y.active();var F$C=this._curSubmit._vb||this._vb;F$Vy.fillRectImgVb(F$C,this._clipRect,F$j+F$A,F$t+F$X,F$k||F$y.width,F$T||F$y.height,F$y.uv,F$Y||this._curMat,this._x,this._y,F$I,F$b,!0)&&(F$a.enabled&&!this._isMain&&this._curSubmit.addTexture(F$y,(F$C._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},F$j.drawTextureWithTransform=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){if(F$Y){var F$b=this._curMat,F$D=this._x,F$l=this._y;(0!==F$A||0!==F$X)&&(this._x=F$A*F$b.a+F$X*F$b.c,this._y=F$X*F$b.d+F$A*F$b.b),F$Y&&F$b.bTransform?(F$d.mul(F$Y,F$b,F$g._tmpMatrix),(F$Y=F$g._tmpMatrix)._checkTransform()):(this._x+=F$b.tx,this._y+=F$b.ty),this._drawTextureM(F$y,F$j,F$t,F$k,F$T,0,0,F$Y,F$I),this._x=F$D,this._y=F$l}else this._drawTextureM(F$y,F$j,F$t,F$k,F$T,F$A,F$X,null,F$I)},F$j.fillQuadrangle=function(F$y,F$j,F$t,F$k,F$T){var F$Y=this._curSubmit,F$A=this._vb,F$X=this._shader2D,F$I=F$Y.shaderValue;if(this._renderKey=0,F$y.bitmap){var F$b=F$y.bitmap;F$X.glTexture==F$b&&F$X.ALPHA===F$I.ALPHA||(F$X.glTexture=F$b,(F$Y=this._curSubmit=F$Yy.createSubmit(this,this._ib,F$A,F$A._byteLength/32*3,F$Py.create(1,0))).shaderValue.glTexture=F$b,this._submits[this._submits._length++]=F$Y),F$Vy.fillQuadrangleImgVb(F$A,F$j,F$t,F$k,F$y.uv,F$T||this._curMat,this._x,this._y)}else F$Y.shaderValue.fillStyle&&F$Y.shaderValue.fillStyle.equal(F$y)&&F$X.ALPHA===F$I.ALPHA||(F$X.glTexture=null,(F$Y=this._curSubmit=F$Yy.createSubmit(this,this._ib,F$A,F$A._byteLength/32*3,F$Py.create(2,0))).shaderValue.defines.add(2),F$Y.shaderValue.fillStyle=F$O.create(F$y),this._submits[this._submits._length++]=F$Y),F$Vy.fillQuadrangleImgVb(F$A,F$j,F$t,F$k,F$H.DEF_UV,F$T||this._curMat,this._x,this._y);F$Y._numEle+=6},F$j.drawTexture2=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){if(0!=F$Y){var F$I=this._curMat;if(this._x=F$y*F$I.a+F$j*F$I.c,this._y=F$j*F$I.d+F$y*F$I.b,F$T&&(F$T=F$I.bTransform||F$T.bTransform?(F$d.mul(F$T,F$I,F$g._tmpMatrix),F$g._tmpMatrix):(this._x+=F$T.tx+F$I.tx,this._y+=F$T.ty+F$I.ty,F$d.EMPTY)),1!==F$Y||F$A){var F$b=this._shader2D.ALPHA,F$D=this._nBlendType;this._shader2D.ALPHA=F$Y,F$A&&(this._nBlendType=F$h.TOINT(F$A)),this._drawTextureM(F$X[0],F$X[1]-F$t,F$X[2]-F$k,F$X[3],F$X[4],0,0,F$T,1),this._shader2D.ALPHA=F$b,this._nBlendType=F$D}else this._drawTextureM(F$X[0],F$X[1]-F$t,F$X[2]-F$k,F$X[3],F$X[4],0,0,F$T,1);this._x=this._y=0}},F$j.drawCanvas=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$y.context;if(this._renderKey=0,F$Y._targets)this._submits[this._submits._length++]=F$wy.create(F$Y,0,null),this._curSubmit=F$Yy.RENDERBASE,F$Y._targets.drawTo(this,F$j,F$t,F$k,F$T);else{var F$A=this._submits[this._submits._length++]=F$wy.create(F$Y,this._shader2D.ALPHA,this._shader2D.filters),F$X=F$k/F$y.width,F$I=F$T/F$y.height,F$b=F$A._matrix;this._curMat.copyTo(F$b),1!=F$X&&1!=F$I&&F$b.scale(F$X,F$I);var F$D=F$b.tx,F$l=F$b.ty;F$b.tx=F$b.ty=0,F$b.transformPoint(F$p.TEMP.setTo(F$j,F$t)),F$b.translate(F$p.TEMP.x+F$D,F$p.TEMP.y+F$l),this._curSubmit=F$Yy.RENDERBASE}F$N.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=F$Y._targets?"yellow":"green",this.strokeRect(F$j-1,F$t-1,F$k+2,F$T+2,1),this.strokeRect(F$j,F$t,F$k,F$T,1),this.restore())},F$j.drawTarget=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){void 0===F$b&&(F$b=-1);var F$D=this._vb;if(F$Vy.fillRectImgVb(F$D,this._clipRect,F$j,F$t,F$k,F$T,F$I||F$H.DEF_UV,F$Y||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var F$l=this._curSubmit=F$ly.create(this,this._ib,F$D,(F$D._byteLength-64)/32*3,F$X,F$A);F$l.blendType=-1==F$b?this._nBlendType:F$b,F$l.scope=F$y,this._submits[this._submits._length++]=F$l,this._curSubmit._numEle+=6}},F$j.mixRGBandAlpha=function(F$y){return this._mixRGBandAlpha(F$y,this._shader2D.ALPHA)},F$j._mixRGBandAlpha=function(F$y,F$j){var F$t=(4278190080&F$y)>>>24;return 0!=F$t?F$t*=F$j:F$t=255*F$j,16777215&F$y|F$t<<24},F$j.drawTriangles=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){if(!F$y.loaded||!F$y.source)return this.sprite&&F$v.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;F$y.bitmap;var F$D=this._mixRGBandAlpha(4294967295,F$X),F$l=(F$k.length,F$Y.length);this._renderKey=-1;var F$r=this._curSubmit=F$Sy.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,F$Py.create(1,0));return F$r.shaderValue.textureHost=F$y,F$r._renderType=10016,this._submits[this._submits._length++]=F$r,F$A?(F$g._tmpMatrix.a=F$A.a,F$g._tmpMatrix.b=F$A.b,F$g._tmpMatrix.c=F$A.c,F$g._tmpMatrix.d=F$A.d,F$g._tmpMatrix.tx=F$A.tx+F$j,F$g._tmpMatrix.ty=F$A.ty+F$t,F$d.mul(F$g._tmpMatrix,this._curMat,F$g._tmpMatrix)):(F$g._tmpMatrix.a=this._curMat.a,F$g._tmpMatrix.b=this._curMat.b,F$g._tmpMatrix.c=this._curMat.c,F$g._tmpMatrix.d=this._curMat.d,F$g._tmpMatrix.tx=this._curMat.tx+F$j,F$g._tmpMatrix.ty=this._curMat.ty+F$t),this._triangleMesh.addData(F$k,F$T,F$Y,F$g._tmpMatrix,F$D,this),this._curSubmit._numEle+=F$l,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},F$j.transform=function(F$y,F$j,F$t,F$k,F$T,F$Y){F$L.save(this),F$d.mul(F$d.TEMP.setTo(F$y,F$j,F$t,F$k,F$T,F$Y),this._curMat,this._curMat),this._curMat._checkTransform()},F$j.setTransformByMatrix=function(F$y){F$y.copyTo(this._curMat)},F$j.transformByMatrix=function(F$y){F$L.save(this),F$d.mul(F$y,this._curMat,this._curMat),this._curMat._checkTransform()},F$j.rotate=function(F$y){F$L.save(this),this._curMat.rotateEx(F$y)},F$j.scale=function(F$y,F$j){F$L.save(this),this._curMat.scaleEx(F$y,F$j)},F$j.clipRect=function(F$y,F$j,F$t,F$k){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var F$T=F$Dy.create(4);this.addRenderObject(F$T);var F$Y=this._vb,F$A=F$Y._byteLength>>2;if(F$Vy.fillRectImgVb(F$Y,null,F$y,F$j,F$t,F$k,F$H.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var F$X=this._curSubmit=F$Yy.createSubmit(this,this._ib,F$Y,(F$Y._byteLength-64)/32*3,F$Py.create(2,0));F$X.shaderValue.ALPHA=1,this._submits[this._submits._length++]=F$X,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var F$I=F$Dy.create(5);this.addRenderObject(F$I);var F$b=F$Y.getFloat32Array(),F$D=Math.min(Math.min(Math.min(F$b[0+F$A],F$b[4+F$A]),F$b[8+F$A]),F$b[12+F$A]),F$l=Math.max(Math.max(Math.max(F$b[0+F$A],F$b[4+F$A]),F$b[8+F$A]),F$b[12+F$A]),F$r=Math.min(Math.min(Math.min(F$b[1+F$A],F$b[5+F$A]),F$b[9+F$A]),F$b[13+F$A]),F$$=Math.max(Math.max(Math.max(F$b[1+F$A],F$b[5+F$A]),F$b[9+F$A]),F$b[13+F$A]);F$B.save(this,F$I,F$y,F$j,F$t,F$k,F$D,F$r,F$l-F$D,F$$-F$r),this._curSubmit=F$Yy.RENDERBASE}else{F$t*=this._curMat.a,F$k*=this._curMat.d;var F$W=F$p.TEMP;this._curMat.transformPoint(F$W.setTo(F$y,F$j)),F$t<0&&(F$W.x=F$W.x+F$t,F$t=-F$t),F$k<0&&(F$W.y=F$W.y+F$k,F$k=-F$k),this._renderKey=0;var F$z=this._curSubmit=F$by.create(this);(this._submits[this._submits._length++]=F$z).submitIndex=this._submits._length,F$z.submitLength=9999999,F$R.save(this,F$z);var F$V=this._clipRect,F$n=F$V.x,F$C=F$V.y,F$M=F$W.x+F$t,F$_=F$W.y+F$k;F$n<F$W.x&&(F$V.x=F$W.x),F$C<F$W.y&&(F$V.y=F$W.y),F$V.width=Math.min(F$M,F$n+F$V.width)-F$V.x,F$V.height=Math.min(F$_,F$C+F$V.height)-F$V.y,this._shader2D.glTexture=null,F$z.clipRect.copyFrom(F$V),this._curSubmit=F$Yy.RENDERBASE}},F$j.setIBVB=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D){if(void 0===F$I&&(F$I=0),void 0===F$b&&(F$b=0),void 0===F$D&&(F$D=0),null===F$t){if(F$n.isFlash){var F$l=F$k;F$l._selfIB||(F$l._selfIB=F$Ey.create(35044)),F$l._selfIB.clear(),F$t=F$l._selfIB}else F$t=this._ib;F$Vy.expandIBQuadrangle(F$t,F$k._byteLength/(4*F$k.vertexStride*4))}if(!F$X||!F$A)throw Error("setIBVB must input:shader shaderValues");var F$r=F$Iy.create(this,F$k,F$t,F$T,F$A,F$X,F$I,F$b,F$D);F$Y||(F$Y=F$d.EMPTY),F$Y.translate(F$y,F$j),F$d.mul(F$Y,this._curMat,F$r._mat),F$Y.translate(-F$y,-F$j),this._submits[this._submits._length++]=F$r,this._curSubmit=F$Yy.RENDERBASE,this._renderKey=0},F$j.addRenderObject=function(F$y){this._submits[this._submits._length++]=F$y},F$j.fillTrangles=function(F$y,F$j,F$t,F$k,F$T){var F$Y=this._curSubmit,F$A=this._vb,F$X=this._shader2D,F$I=F$Y.shaderValue,F$b=F$k.length>>4,F$D=F$y.bitmap;this._renderKey=0,F$X.glTexture==F$D&&F$X.ALPHA===F$I.ALPHA||((F$Y=this._curSubmit=F$Yy.createSubmit(this,this._ib,F$A,F$A._byteLength/32*3,F$Py.create(1,0))).shaderValue.textureHost=F$y,this._submits[this._submits._length++]=F$Y),F$Vy.fillTranglesVB(F$A,F$j,F$t,F$k,F$T||this._curMat,this._x,this._y),F$Y._numEle+=6*F$b},F$j.submitElement=function(F$y,F$j){var F$t=this._submits;for(F$j<0&&(F$j=F$t._length);F$y<F$j;)F$y+=F$t[F$y].renderSubmit()},F$j.finish=function(){F$_y.mainContext.finish()},F$j.flush=function(){var F$y=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(F$y>this._ib.bufferLength/12&&F$Vy.expandIBQuadrangle(this._ib,F$y),!this._isMain&&F$a.enabled&&F$a._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=F$a._atlasRestore;for(var F$j=this._submits,F$t=0,F$k=F$j._length;F$t<F$k;F$t++){var F$T=F$j[F$t];10016===F$T.getRenderType()&&F$T.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),F$jy.instance&&F$jy.getInstance().reset();var F$Y;for(F$t=0,F$Y=this.meshlist.length;F$t<F$Y;F$t++){var F$A=this.meshlist[F$t];F$A.canReuse?F$A.releaseMesh():F$A.destroy()}return this.meshlist.length=0,this._curSubmit=F$Yy.RENDERBASE,this._renderKey=0,this._triangleMesh=F$Hy.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},F$j.setPathId=function(F$y){if(this.mId=F$y,-1!=this.mId){this.mHaveKey=!1;var F$j=F$x.getInstance();F$j.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,F$j.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},F$j.movePath=function(F$y,F$j){var F$t=F$y,F$k=F$j;F$y=this._curMat.a*F$t+this._curMat.c*F$k+this._curMat.tx,F$j=this._curMat.b*F$t+this._curMat.d*F$k+this._curMat.ty,this.mX+=F$y,this.mY+=F$j},F$j.beginPath=function(){var F$y=this._getPath();F$y.tempArray.length=0,F$y.closePath=!1,this.mX=0,this.mY=0},F$j.closePath=function(){this._path.closePath=!0},F$j.fill=function(F$y){void 0===F$y&&(F$y=!1);var F$j=this._getPath();this.drawPoly(0,0,F$j.tempArray,this.fillStyle._color.numColor,0,0,F$y)},F$j.stroke=function(){var F$y=this._getPath();if(0<this.lineWidth){if(-1==this.mId)F$y.drawLine(0,0,F$y.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var F$j=F$x.getInstance().shapeLineDic[this.mId];F$j.rebuild(F$y.tempArray),F$y.setGeomtry(F$j)}else F$x.getInstance().addLine(this.mId,F$y.drawLine(0,0,F$y.tempArray,this.lineWidth,this.strokeStyle._color.numColor));F$y.update();var F$t=[this.mX,this.mY],F$k=F$Yy.createShape(this,F$y.ib,F$y.vb,F$y.count,F$y.offset,F$Py.create(4,0));F$k.shaderValue.ALPHA=this._shader2D.ALPHA,F$k.shaderValue.u_pos=F$t,F$k.shaderValue.u_mmat2=F$Cy.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=F$k,this._renderKey=-1}},F$j.line=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=this._curSubmit,F$X=this._vb;if(F$Vy.fillLineVb(F$X,this._clipRect,F$y,F$j,F$t,F$k,F$T,F$Y)){this._renderKey=0;var F$I=this._shader2D,F$b=F$A.shaderValue;F$I.strokeStyle===F$b.strokeStyle&&F$I.ALPHA===F$b.ALPHA||(F$I.glTexture=null,(F$A=this._curSubmit=F$Yy.createSubmit(this,this._ib,F$X,(F$X._byteLength-64)/32*3,F$Py.create(2,0))).shaderValue.strokeStyle=F$I.strokeStyle,F$A.shaderValue.mainID=2,F$A.shaderValue.ALPHA=F$I.ALPHA,this._submits[this._submits._length++]=F$A),F$A._numEle+=6}},F$j.moveTo=function(F$y,F$j,F$t){void 0===F$t&&(F$t=!0);var F$k=this._getPath();if(F$t){var F$T=F$y,F$Y=F$j;F$y=this._curMat.a*F$T+this._curMat.c*F$Y,F$j=this._curMat.b*F$T+this._curMat.d*F$Y}F$k.addPoint(F$y,F$j)},F$j.lineTo=function(F$y,F$j,F$t){void 0===F$t&&(F$t=!0);var F$k=this._getPath();if(F$t){var F$T=F$y,F$Y=F$j;F$y=this._curMat.a*F$T+this._curMat.c*F$Y,F$j=this._curMat.b*F$T+this._curMat.d*F$Y}F$k.addPoint(F$y,F$j)},F$j.drawCurves=function(F$y,F$j,F$t){this.setPathId(-1),this.beginPath(),this.strokeStyle=F$t[3],this.lineWidth=F$t[4];var F$k=F$t[2];F$y+=F$t[0],F$j+=F$t[1],this.movePath(F$y,F$j),this.moveTo(F$k[0],F$k[1]);for(var F$T=2,F$Y=F$k.length;F$T<F$Y;)this.quadraticCurveTo(F$k[F$T++],F$k[F$T++],F$k[F$T++],F$k[F$T++]);this.stroke()},F$j.arcTo=function(F$y,F$j,F$t,F$k,F$T){if(-1==this.mId||!this.mHaveKey){var F$Y=0,F$A=0,F$X=0,F$I=this._getPath();this._curMat.copyTo(F$g._tmpMatrix),F$g._tmpMatrix.tx=F$g._tmpMatrix.ty=0,F$g._tempPoint.setTo(F$I.getEndPointX(),F$I.getEndPointY()),F$g._tmpMatrix.invertTransformPoint(F$g._tempPoint);var F$b=F$g._tempPoint.x-F$y,F$D=F$g._tempPoint.y-F$j,F$l=Math.sqrt(F$b*F$b+F$D*F$D);if(!(F$l<=1e-6)){var F$r=F$b/F$l,F$$=F$D/F$l,F$W=F$t-F$y,F$z=F$k-F$j,F$V=F$W*F$W+F$z*F$z,F$n=Math.sqrt(F$V);if(!(F$n<=1e-6)){var F$C=F$W/F$n,F$M=F$z/F$n,F$_=F$r+F$C,F$e=F$$+F$M,F$v=Math.sqrt(F$_*F$_+F$e*F$e);if(!(F$v<=1e-6)){var F$N=F$_/F$v,F$P=F$e/F$v,F$d=Math.acos(F$N*F$r+F$P*F$$),F$p=Math.PI/2-F$d,F$f=(F$l=F$T/Math.tan(F$p))*F$r+F$y,F$Q=F$l*F$$+F$j,F$m=Math.sqrt(F$l*F$l+F$T*F$T),F$U=F$y+F$N*F$m,F$q=F$j+F$P*F$m,F$w=0,F$S=0;if(0<=F$r*F$M-F$$*F$C){var F$H=2*F$p/F$g.SEGNUM;F$w=Math.sin(F$H),F$S=Math.cos(F$H)}else F$H=2*-F$p/F$g.SEGNUM,F$w=Math.sin(F$H),F$S=Math.cos(F$H);F$A=this._curMat.a*F$f+this._curMat.c*F$Q,F$X=this._curMat.b*F$f+this._curMat.d*F$Q,F$A==this._path.getEndPointX()&&F$X==this._path.getEndPointY()||F$I.addPoint(F$A,F$X);var F$K=F$f-F$U,F$x=F$Q-F$q;for(F$Y=0;F$Y<F$g.SEGNUM;F$Y++){var F$F=F$K*F$S+F$x*F$w,F$G=-F$K*F$w+F$x*F$S;F$A=F$F+F$U,F$X=F$G+F$q,F$y=this._curMat.a*F$A+this._curMat.c*F$X,F$X=F$j=this._curMat.b*F$A+this._curMat.d*F$X,(F$A=F$y)==this._path.getEndPointX()&&F$X==this._path.getEndPointY()||F$I.addPoint(F$A,F$X),F$K=F$F,F$x=F$G}}}}}},F$j.arc=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){if(void 0===F$Y&&(F$Y=!1),void 0===F$A&&(F$A=!0),-1!=this.mId){var F$X=F$x.getInstance().shapeDic[this.mId];if(F$X&&this.mHaveKey&&!F$X.needUpdate(this._curMat))return;F$j=F$y=0}var F$I,F$b=0,F$D=0,F$l=0,F$r=0,F$$=0,F$W=0,F$z=0;if(F$D=F$T-F$k,F$Y)if(Math.abs(F$D)>=2*Math.PI)F$D=2*-Math.PI;else for(;0<F$D;)F$D-=2*Math.PI;else if(Math.abs(F$D)>=2*Math.PI)F$D=2*Math.PI;else for(;F$D<0;)F$D+=2*Math.PI;F$I=F$D/(F$z=F$t<101?Math.max(10,F$D*F$t/5):F$t<201?Math.max(10,F$D*F$t/20):Math.max(10,F$D*F$t/40))/2,F$l=Math.abs(4/3*(1-Math.cos(F$I))/Math.sin(F$I)),F$Y&&(F$l=-F$l);var F$V=this._getPath(),F$n=NaN,F$C=NaN;for(F$W=0;F$W<=F$z;F$W++)F$b=F$k+F$D*(F$W/F$z),F$r=F$y+Math.cos(F$b)*F$t,F$$=F$j+Math.sin(F$b)*F$t,F$A&&(F$n=F$r,F$C=F$$,F$r=this._curMat.a*F$n+this._curMat.c*F$C,F$$=this._curMat.b*F$n+this._curMat.d*F$C),F$r==this._path.getEndPointX()&&F$$==this._path.getEndPointY()||F$V.addPoint(F$r,F$$);F$r=F$y+Math.cos(F$T)*F$t,F$$=F$j+Math.sin(F$T)*F$t,F$A&&(F$n=F$r,F$C=F$$,F$r=this._curMat.a*F$n+this._curMat.c*F$C,F$$=this._curMat.b*F$n+this._curMat.d*F$C),F$r==this._path.getEndPointX()&&F$$==this._path.getEndPointY()||F$V.addPoint(F$r,F$$)},F$j.quadraticCurveTo=function(F$y,F$j,F$t,F$k){var F$T=F$l.I,F$Y=F$t,F$A=F$k;F$t=this._curMat.a*F$Y+this._curMat.c*F$A,F$k=this._curMat.b*F$Y+this._curMat.d*F$A,F$Y=F$y,F$A=F$j,F$y=this._curMat.a*F$Y+this._curMat.c*F$A,F$j=this._curMat.b*F$Y+this._curMat.d*F$A;for(var F$X=F$T.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),F$y,F$j,F$t,F$k],30,2),F$I=0,F$b=F$X.length/2;F$I<F$b;F$I++)this.lineTo(F$X[2*F$I],F$X[2*F$I+1],!1);this.lineTo(F$t,F$k,!1)},F$j.rect=function(F$y,F$j,F$t,F$k){this._other=this._other.make(),this._other.path||(this._other.path=new F$s),this._other.path.rect(F$y,F$j,F$t,F$k)},F$j.strokeRect=function(F$y,F$j,F$t,F$k,F$T){var F$Y=.5*F$T;this.line(F$y-F$Y,F$j,F$y+F$t+F$Y,F$j,F$T,this._curMat),this.line(F$y+F$t,F$j,F$y+F$t,F$j+F$k,F$T,this._curMat),this.line(F$y,F$j,F$y,F$j+F$k,F$T,this._curMat),this.line(F$y-F$Y,F$j+F$k,F$y+F$t+F$Y,F$j+F$k,F$T,this._curMat)},F$j.clip=function(){},F$j.drawPoly=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){void 0===F$A&&(F$A=!1),this._renderKey=0,this._shader2D.glTexture=null;var F$X=this._getPath();if(-1==this.mId)F$X.polygon(F$y,F$j,F$t,F$k,F$T||1,F$Y);else if(this.mHaveKey){var F$I=F$x.getInstance().shapeDic[this.mId];F$I.setMatrix(this._curMat),F$I.rebuild(F$X.tempArray),F$X.setGeomtry(F$I)}else{var F$b=F$X.polygon(F$y,F$j,F$t,F$k,F$T||1,F$Y);F$x.getInstance().addShape(this.mId,F$b),F$b.setMatrix(this._curMat)}F$X.update();var F$D,F$l=[this.mX,this.mY];if((F$D=F$Yy.createShape(this,F$X.ib,F$X.vb,F$X.count,F$X.offset,F$Py.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$D.shaderValue.u_pos=F$l,F$D.shaderValue.u_mmat2=F$Cy.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$D,0<F$T){if(this.mHaveLineKey){var F$r=F$x.getInstance().shapeLineDic[this.mId];F$r.rebuild(F$X.tempArray),F$X.setGeomtry(F$r)}else F$x.getInstance().addShape(this.mId,F$X.drawLine(F$y,F$j,F$t,F$T,F$Y));F$X.update(),(F$D=F$Yy.createShape(this,F$X.ib,F$X.vb,F$X.count,F$X.offset,F$Py.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,F$D.shaderValue.u_mmat2=F$Cy.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=F$D}},F$j.drawParticle=function(F$y,F$j,F$t){F$t.x=F$y,F$t.y=F$j,this._submits[this._submits._length++]=F$t},F$j._getPath=function(){return this._path||(this._path=new F$s)},F$k(0,F$j,"globalCompositeOperation",function(){return F$h.NAMES[this._nBlendType]},function(F$y){var F$j=F$h.TOINT[F$y];null==F$j||this._nBlendType===F$j||(F$Z.save(this,65536,this,!0),this._curSubmit=F$Yy.RENDERBASE,this._renderKey=0,this._nBlendType=F$j)}),F$k(0,F$j,"strokeStyle",function(){return this._shader2D.strokeStyle},function(F$y){this._shader2D.strokeStyle.equal(F$y)||(F$Z.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=F$O.create(F$y))}),F$k(0,F$j,"globalAlpha",function(){return this._shader2D.ALPHA},function(F$y){(F$y=Math.floor(1e3*F$y)/1e3)!=this._shader2D.ALPHA&&(F$Z.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=F$y)}),F$k(0,F$j,"asBitmap",null,function(F$y){if(F$y){if(this._targets||(this._targets=new F$i),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),F$k(0,F$j,"fillStyle",function(){return this._shader2D.fillStyle},function(F$y){this._shader2D.fillStyle.equal(F$y)||(F$Z.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=F$O.create(F$y))}),F$k(0,F$j,"textAlign",function(){return this._other.textAlign},function(F$y){this._other.textAlign===F$y||(this._other=this._other.make(),F$Z.save(this,32768,this._other,!1),this._other.textAlign=F$y)}),F$k(0,F$j,"lineWidth",function(){return this._other.lineWidth},function(F$y){this._other.lineWidth===F$y||(this._other=this._other.make(),F$Z.save(this,256,this._other,!1),this._other.lineWidth=F$y)}),F$k(0,F$j,"textBaseline",function(){return this._other.textBaseline},function(F$y){this._other.textBaseline===F$y||(this._other=this._other.make(),F$Z.save(this,16384,this._other,!1),this._other.textBaseline=F$y)}),F$k(0,F$j,"font",null,function(F$y){F$y!=this._other.font.toString()&&(this._other=this._other.make(),F$Z.save(this,8,this._other,!1),this._other.font===F$Wy.EMPTY?this._other.font=new F$Wy(F$y):this._other.font.setFont(F$y))}),F$g.__init__=function(){F$t.DEFAULT=new F$t},F$g._tempPoint=new F$p,F$g._SUBMITVBSIZE=32e3,F$g._MAXSIZE=99999999,F$g._RECTVBSIZE=16,F$g.MAXCLIPRECT=new F$f(0,0,99999999,99999999),F$g._COUNT=0,F$g._tmpMatrix=new F$d,F$g.SEGNUM=32,F$g._contextcount=0,F$A(F$g,["_fontTemp",function(){return this._fontTemp=new F$Wy},"_drawStyleTemp",function(){return this._drawStyleTemp=new F$O(null)}]),F$g.__init$=function(){F$t=function(){function F$y(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=F$Wy.EMPTY}F$r(F$y,"");var F$j=F$y.prototype;return F$j.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=F$Wy.EMPTY},F$j.make=function(){return this===F$y.DEFAULT?new F$y:this},F$y.DEFAULT=null,F$y}()},F$g}(),F$Py=function(F$y){function F$k(F$y,F$j){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,F$k.__super.call(this),this.defines=new F$Qy,this.position=F$k._POSITION,this.mainID=F$y,this.subID=F$j,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.colorMul=F$t.ShieldColor?F$W.create(F$t.ShieldColor)._color:null,this.glTexture=null,this.u_mmat2=null,this._cacheID=F$y|F$j,this._inClassCache=F$k._cache[this._cacheID],0<F$y&&!this._inClassCache&&(this._inClassCache=F$k._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}F$r(F$k,"laya.webgl.shader.d2.value.Value2D",F$G);var F$j=F$k.prototype;return F$j.setValue=function(F$y){},F$j.refresh=function(){var F$y=this.size;return F$y[0]=F$Cy.width,F$y[1]=F$Cy.height,this.alpha=this.ALPHA*F$Cy.worldAlpha,this.mmat=F$Cy.worldMatrix4,this},F$j._ShaderWithCompile=function(){return F$cy.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,F$iy.create)},F$j._withWorldShaderDefines=function(){var F$y=F$Cy.worldShaderDefines,F$j=F$cy.sharders[this.mainID|this.defines._value|F$y.getValue()];if(!F$j){var F$t,F$k={};for(F$t in this.defines.toNameDic())F$k[F$t]="";for(F$t in F$y.toNameDic())F$k[F$t]="";F$j=F$cy.withCompile2D(0,this.mainID,F$k,this.mainID|this.defines._value|F$y.getValue(),F$iy.create)}var F$T=F$Cy.worldFilters;if(!F$T)return F$j;for(var F$Y,F$A=F$T.length,F$X=0;F$X<F$A;F$X++)(F$Y=F$T[F$X])&&F$Y.action.setValue(this);return F$j},F$j.upload=function(){var F$y=F$Cy;this.alpha=this.ALPHA*F$y.worldAlpha,F$Cy.worldMatrix4!==F$Cy.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),this.colorMul?this.defines.add(16384):this.defines.remove(16384),F$_y.shaderHighPrecision&&this.defines.add(1024);var F$j,F$t=F$y.worldShaderDefines?this._withWorldShaderDefines():F$cy.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=F$y.width,this.size[1]=F$y.height,this.mmat=F$y.worldMatrix4,F$Ky.activeShader!==F$t?F$t._shaderValueWidth!==F$y.width||F$t._shaderValueHeight!==F$y.height?(F$t._shaderValueWidth=F$y.width,F$t._shaderValueHeight=F$y.height):F$j=F$t._params2dQuick2||F$t._make2dQuick2():F$t._shaderValueWidth!==F$y.width||F$t._shaderValueHeight!==F$y.height?(F$t._shaderValueWidth=F$y.width,F$t._shaderValueHeight=F$y.height):F$j=F$t._params2dQuick1||F$t._make2dQuick1(),F$t.upload(this,F$j)},F$j.setFilters=function(F$y){if(this.filters=F$y)for(var F$j,F$t=F$y.length,F$k=0;F$k<F$t;F$k++)(F$j=F$y[F$k])&&(this.defines.add(F$j.type),F$j.action.setValue(this))},F$j.clear=function(){this.defines.setValue(this.subID)},F$j.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},F$k._initone=function(F$y,F$j){F$k._typeClass[F$y]=F$j,F$k._cache[F$y]=[],F$k._cache[F$y]._length=0},F$k.__init__=function(){F$k._POSITION=[2,5126,!1,4*F$zy.BYTES_PE,0],F$k._TEXCOORD=[2,5126,!1,4*F$zy.BYTES_PE,2*F$zy.BYTES_PE],F$k._initone(2,F$gy),F$k._initone(4,F$hy),F$k._initone(256,F$ay),F$k._initone(512,F$Gy),F$k._initone(1,F$Jy),F$k._initone(65,F$oy),F$k._initone(9,F$Jy)},F$k.create=function(F$y,F$j){var F$t=F$k._cache[F$y|F$j];return F$t._length?F$t[--F$t._length]:new F$k._typeClass[F$y|F$j](F$j)},F$k._POSITION=null,F$k._TEXCOORD=null,F$k._cache=[],F$k._typeClass=[],F$k.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F$k}(),F$dy=function(F$y){function F$V(F$y,F$j){F$V.__super.call(this,F$y,F$j)}F$r(F$V,"laya.webgl.utils.RenderSprite3D",F$C);var F$j=F$V.prototype;return F$j.onCreate=function(F$y){switch(F$y){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},F$j._mask=function(F$y,F$j,F$t,F$k){var F$T,F$Y,F$A=this._next,F$X=F$y.mask;if(F$X){F$j.ctx.save();var F$I=F$j.ctx.globalCompositeOperation,F$b=new F$f;if(F$b.copyFrom(F$X.getBounds()),F$b.width=Math.round(F$b.width),F$b.height=Math.round(F$b.height),F$b.x=Math.round(F$b.x),F$b.y=Math.round(F$b.y),0<F$b.width&&0<F$b.height){var F$D=F$y._style._tf,F$l=F$Xy.create();F$l.addValue("bounds",F$b),F$T=F$Ay.create([F$l,F$j],laya.webgl.utils.RenderSprite3D.tmpTarget),F$j.addRenderObject(F$T),F$X.render(F$j,-F$b.x,-F$b.y),F$T=F$Ay.create([F$l],laya.webgl.utils.RenderSprite3D.endTmpTarget),F$j.addRenderObject(F$T),F$j.ctx.save(),F$j.clipRect(F$t-F$D.translateX+F$b.x,F$k-F$D.translateY+F$b.y,F$b.width,F$b.height),F$A._fun.call(F$A,F$y,F$j,F$t,F$k),F$j.ctx.restore(),F$Y=F$Dy.create(6),F$I=F$j.ctx.globalCompositeOperation,F$Y.blendMode="mask",F$j.addRenderObject(F$Y),F$d.TEMP.identity();var F$r=F$Py.create(1,0),F$$=F$H.INV_UV,F$W=F$b.width,F$z=F$b.height;(F$b.width<32||F$b.height<32)&&((F$$=F$V.tempUV)[0]=0,F$$[1]=0,F$$[2]=32<=F$b.width?1:F$b.width/32,F$$[3]=0,F$$[4]=32<=F$b.width?1:F$b.width/32,F$$[5]=32<=F$b.height?1:F$b.height/32,F$$[6]=0,F$$[7]=32<=F$b.height?1:F$b.height/32,F$b.width=32<=F$b.width?F$b.width:32,F$b.height=32<=F$b.height?F$b.height:32,F$$[1]*=-1,F$$[3]*=-1,F$$[5]*=-1,F$$[7]*=-1,F$$[1]+=1,F$$[3]+=1,F$$[5]+=1,F$$[7]+=1),F$j.ctx.drawTarget(F$l,F$t+F$b.x-F$D.translateX,F$k+F$b.y-F$D.translateY,F$W,F$z,F$d.TEMP,"tmpTarget",F$r,F$$,6),F$T=F$Ay.create([F$l],laya.webgl.utils.RenderSprite3D.recycleTarget),F$j.addRenderObject(F$T),(F$Y=F$Dy.create(6)).blendMode=F$I,F$j.addRenderObject(F$Y)}F$j.ctx.restore()}else F$A._fun.call(F$A,F$y,F$j,F$t,F$k)},F$j._blend=function(F$y,F$j,F$t,F$k){var F$T=F$y._style,F$Y=this._next;F$T.blendMode?(F$j.ctx.save(),F$j.ctx.globalCompositeOperation=F$T.blendMode,F$Y._fun.call(F$Y,F$y,F$j,F$t,F$k),F$j.ctx.restore()):F$Y._fun.call(F$Y,F$y,F$j,F$t,F$k)},F$j._transform=function(F$y,F$j,F$t,F$k){var F$T=F$y.transform,F$Y=this._next;if(F$T&&F$Y!=F$C.NORENDER){var F$A=F$j.ctx;F$y._style;F$T.tx=F$t,F$T.ty=F$k;var F$X=F$A._getTransformMatrix(),F$I=F$X.clone();F$d.mul(F$T,F$X,F$X),F$X._checkTransform(),F$T.tx=F$T.ty=0,F$Y._fun.call(F$Y,F$y,F$j,0,0),F$I.copyTo(F$X),F$I.destroy()}else F$Y._fun.call(F$Y,F$y,F$j,F$t,F$k)},F$V.tmpTarget=function(F$y,F$j){var F$t=F$y.getValue("bounds"),F$k=F$xy.create(F$t.width,F$t.height);F$k.start(),F$k.clear(0,0,0,0),F$y.addValue("tmpTarget",F$k)},F$V.endTmpTarget=function(F$y){F$y.getValue("tmpTarget").end()},F$V.recycleTarget=function(F$y){F$y.getValue("tmpTarget").recycle(),F$y.recycle()},F$A(F$V,["tempUV",function(){return this.tempUV=new Array(8)}]),F$V}(),F$py=function(F$y){function F$j(){this.data=null,F$j.__super.call(this)}F$r(F$j,"laya.filters.webgl.ColorFilterActionGL",F$F);var F$t=F$j.prototype;return F$v.imps(F$t,{"laya.filters.IFilterActionGL":!0}),F$t.setValue=function(F$y){F$y.colorMat=this.data._mat,F$y.colorAlpha=this.data._alpha},F$t.apply3d=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$y.getValue("bounds"),F$A=F$Py.create(1,0);F$A.setFilters([this.data]);var F$X=F$d.TEMP;F$X.identity(),F$t.ctx.drawTarget(F$y,0,0,F$Y.width,F$Y.height,F$X,"src",F$A)},F$j}(),F$fy=function(F$y){function F$Y(F$y,F$j,F$t,F$k,F$T){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,F$Y.__super.call(this,F$y,F$j,F$T),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new F$Oy,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=F$t,this._atlasCanvas.height=F$k,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}F$r(F$Y,"laya.webgl.atlas.Atlaser",F$g);var F$j=F$Y.prototype;return F$j.computeUVinAtlasTexture=function(F$y,F$j,F$t,F$k){var F$T=F$a.atlasTextureWidth,F$Y=F$a.atlasTextureHeight,F$A=F$t/F$T,F$X=F$k/F$Y,F$I=(F$t+F$y.bitmap.width)/F$T,F$b=(F$k+F$y.bitmap.height)/F$Y,F$D=F$y.bitmap.width/F$T,F$l=F$y.bitmap.height/F$Y;F$y.uv=[F$A+F$j[0]*F$D,F$X+F$j[1]*F$l,F$I-(1-F$j[2])*F$D,F$X+F$j[3]*F$l,F$I-(1-F$j[4])*F$D,F$b-(1-F$j[5])*F$l,F$A+F$j[6]*F$D,F$b-(1-F$j[7])*F$l]},F$j.findBitmapIsExist=function(F$y){if(F$y instanceof laya.webgl.resource.WebGLImage){var F$j=F$y,F$t=F$j.url,F$k=this._InAtlasWebGLImagesKey[F$t||F$j.id];if(F$k)return F$k.offsetInfoID}return-1},F$j.addToAtlasTexture=function(F$y,F$j,F$t){if(F$y instanceof laya.webgl.resource.WebGLImage){var F$k=F$y,F$T=F$k.url;this._InAtlasWebGLImagesKey[F$T||F$k.id]={bitmap:F$y,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([F$j,F$t])}this._atlasCanvas.texSubImage2D(F$j,F$t,F$y.atlasSource),F$y.clearAtlasSource()},F$j.addToAtlas=function(F$y,F$j,F$t){F$y._atlasID=this._inAtlasTextureKey.length;var F$k=F$y.uv.slice(),F$T=F$y.bitmap;this._inAtlasTextureKey.push(F$y),this._inAtlasTextureOriUVValue.push(F$k),this._inAtlasTextureBitmapValue.push(F$T),this.computeUVinAtlasTexture(F$y,F$k,F$j,F$t),F$y.bitmap=this._atlasCanvas},F$j.clear=function(){for(var F$y=0,F$j=this._inAtlasTextureKey.length;F$y<F$j;F$y++)this._inAtlasTextureKey[F$y].bitmap=this._inAtlasTextureBitmapValue[F$y],this._inAtlasTextureKey[F$y].uv=this._inAtlasTextureOriUVValue[F$y],this._inAtlasTextureKey[F$y]._atlasID=-1,this._inAtlasTextureKey[F$y].bitmap.lock=!1,this._inAtlasTextureKey[F$y].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},F$j.dispose=function(){this.clear(),this._atlasCanvas.destroy()},F$k(0,F$j,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),F$k(0,F$j,"texture",function(){return this._atlasCanvas}),F$k(0,F$j,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),F$Y}(),F$Qy=function(F$y){function F$t(){F$t.__super.call(this,F$t.__name2int,F$t.__int2name,F$t.__int2nameMap)}return F$r(F$t,"laya.webgl.shader.d2.ShaderDefines2D",F$u),F$t.__init__=function(){F$t.reg("TEXTURE2D",1),F$t.reg("COLOR2D",2),F$t.reg("PRIMITIVE",4),F$t.reg("GLOW_FILTER",8),F$t.reg("BLUR_FILTER",16),F$t.reg("COLOR_FILTER",32),F$t.reg("COLOR_ADD",64),F$t.reg("WORLDMAT",128),F$t.reg("FILLTEXTURE",256),F$t.reg("FSHIGHPRECISION",1024),F$t.reg("TXTALPHA",2048),F$t.reg("TXTCOMPRESS",4096),F$t.reg("COLORMUL",16384)},F$t.reg=function(F$y,F$j){F$u._reg(F$y,F$j,F$t.__name2int,F$t.__int2name)},F$t.toText=function(F$y,F$j,F$t){return F$u._toText(F$y,F$j,F$t)},F$t.toInt=function(F$y){return F$u._toInt(F$y,F$t.__name2int)},F$t.TEXTURE2D=1,F$t.COLOR2D=2,F$t.PRIMITIVE=4,F$t.FILTERGLOW=8,F$t.FILTERBLUR=16,F$t.FILTERCOLOR=32,F$t.COLORADD=64,F$t.WORLDMAT=128,F$t.FILLTEXTURE=256,F$t.SKINMESH=512,F$t.SHADERDEFINE_FSHIGHPRECISION=1024,F$t.TXTALPHA=2048,F$t.TXTCOMPRESS=4096,F$t.COLORMUL=16384,F$t.__name2int={},F$t.__int2name=[],F$t.__int2nameMap=[],F$t}(),F$my=(function(F$y){function F$X(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$X.__super.call(this,F$y,F$j,F$t,F$k,40,F$T,F$Y,F$A)}F$r(F$X,"laya.webgl.shapes.Ellipse",F$ty)}(),function(F$y){function F$Y(F$y,F$j,F$t,F$k,F$T){this._points=[],this.rebuild(F$t),F$Y.__super.call(this,F$y,F$j,0,0,0,F$T,F$k,F$T,0)}F$r(F$Y,"laya.webgl.shapes.Line",F$ty);var F$j=F$Y.prototype;return F$j.rebuild=function(F$y){var F$j=F$y.length;F$j!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(F$j/2-1)),this.mFloat32Array=new Float32Array(5*F$j)),this._points.length=0;for(var F$t=NaN,F$k=NaN,F$T=-1,F$Y=-1,F$A=F$y.length/2,F$X=0;F$X<F$A;F$X++)F$t=F$y[2*F$X],F$k=F$y[2*F$X+1],(.01<Math.abs(F$T-F$t)||.01<Math.abs(F$Y-F$k))&&this._points.push(F$t,F$k),F$T=F$t,F$Y=F$k},F$j.getData=function(F$y,F$j,F$t){var F$k=[],F$T=[];0<this.borderWidth&&this.createLine2(this._points,F$k,this.borderWidth,F$t,F$T,this._points.length/2),this.mUint16Array.set(F$k,0),this.mFloat32Array.set(F$T,0),F$y.append(this.mUint16Array),F$j.append(this.mFloat32Array)},F$Y}()),F$Uy=function(F$y){function F$l(F$y,F$j,F$t,F$k,F$T){this._points=[];for(var F$Y=NaN,F$A=NaN,F$X=-1,F$I=-1,F$b=F$t.length/2-1,F$D=0;F$D<F$b;F$D++)F$Y=F$t[2*F$D],F$A=F$t[2*F$D+1],(.01<Math.abs(F$X-F$Y)||.01<Math.abs(F$I-F$A))&&this._points.push(F$Y,F$A),F$X=F$Y,F$I=F$A;F$Y=F$t[2*F$b],F$A=F$t[2*F$b+1],F$X=this._points[0],F$I=this._points[1],(.01<Math.abs(F$X-F$Y)||.01<Math.abs(F$I-F$A))&&this._points.push(F$Y,F$A),F$l.__super.call(this,F$y,F$j,0,0,this._points.length/2,0,F$k,F$T)}F$r(F$l,"laya.webgl.shapes.LoopLine",F$ty);var F$j=F$l.prototype;return F$j.getData=function(F$y,F$j,F$t){if(0<this.borderWidth){for(var F$k=this.color,F$T=(F$k>>16&255)/255,F$Y=(F$k>>8&255)/255,F$A=(255&F$k)/255,F$X=[],F$I=0,F$b=0,F$D=[],F$l=Math.floor(this._points.length/2),F$r=0;F$r<F$l;F$r++)F$I=this._points[2*F$r],F$b=this._points[2*F$r+1],F$X.push(this.x+F$I,this.y+F$b,F$T,F$Y,F$A);this.createLoopLine(F$X,F$D,this.borderWidth,F$t+F$X.length/5),F$y.append(new Uint16Array(F$D)),F$j.append(new Float32Array(F$X))}},F$j.createLoopLine=function(F$y,F$j,F$t,F$k,F$T,F$Y){F$y.length;var F$A=F$y.concat(),F$X=F$T||F$y,F$I=this.borderColor,F$b=(F$I>>16&255)/255,F$D=(F$I>>8&255)/255,F$l=(255&F$I)/255,F$r=[F$A[0],F$A[1]],F$$=[F$A[F$A.length-5],F$A[F$A.length-4]],F$W=F$$[0]+.5*(F$r[0]-F$$[0]),F$z=F$$[1]+.5*(F$r[1]-F$$[1]);F$A.unshift(F$W,F$z,0,0,0),F$A.push(F$W,F$z,0,0,0);var F$V,F$n,F$C,F$M,F$_,F$e,F$v,F$N,F$P,F$d,F$p,F$f,F$Q,F$m,F$U,F$q,F$w,F$S,F$H,F$K,F$x=F$A.length/5,F$F=F$k,F$G=F$t/2;F$C=F$A[0],F$M=F$A[1],F$d=F$C-(F$_=F$A[5]),F$P=(F$P=-(F$M-(F$e=F$A[6])))/(F$K=Math.sqrt(F$P*F$P+F$d*F$d))*F$G,F$d=F$d/F$K*F$G,F$X.push(F$C-F$P,F$M-F$d,F$b,F$D,F$l,F$C+F$P,F$M+F$d,F$b,F$D,F$l);for(var F$g=1;F$g<F$x-1;F$g++)F$C=F$A[5*(F$g-1)],F$M=F$A[5*(F$g-1)+1],F$_=F$A[5*F$g],F$e=F$A[5*F$g+1],F$v=F$A[5*(F$g+1)],F$N=F$A[5*(F$g+1)+1],F$d=F$C-F$_,F$f=F$_-F$v,F$U=(-(F$P=(F$P=-(F$M-F$e))/(F$K=Math.sqrt(F$P*F$P+F$d*F$d))*F$G)+F$C)*(-(F$d=F$d/F$K*F$G)+F$e)-(-F$P+F$_)*(-F$d+F$M),F$S=(-(F$p=(F$p=-(F$e-F$N))/(F$K=Math.sqrt(F$p*F$p+F$f*F$f))*F$G)+F$v)*(-(F$f=F$f/F$K*F$G)+F$e)-(-F$p+F$_)*(-F$f+F$N),F$H=(F$Q=-F$d+F$M-(-F$d+F$e))*(F$w=-F$p+F$_-(-F$p+F$v))-(F$q=-F$f+F$N-(-F$f+F$e))*(F$m=-F$P+F$_-(-F$P+F$C)),Math.abs(F$H)<.1?(F$H+=10.1,F$X.push(F$_-F$P,F$e-F$d,F$b,F$D,F$l,F$_+F$P,F$e+F$d,F$b,F$D,F$l)):(((F$V=(F$m*F$S-F$w*F$U)/F$H)-F$_)*(F$V-F$_)+((F$n=(F$q*F$U-F$Q*F$S)/F$H)-F$e)+(F$n-F$e),F$X.push(F$V,F$n,F$b,F$D,F$l,F$_-(F$V-F$_),F$e-(F$n-F$e),F$b,F$D,F$l));F$Y&&(F$j=F$Y);var F$a=this.edges+1;for(F$g=1;F$g<F$a;F$g++)F$j.push(F$F+2*(F$g-1),F$F+2*(F$g-1)+1,F$F+2*F$g+1,F$F+2*F$g+1,F$F+2*F$g,F$F+2*(F$g-1));return F$j.push(F$F+2*(F$g-1),F$F+2*(F$g-1)+1,F$F+1,F$F+1,F$F,F$F+2*(F$g-1)),F$X},F$l}(),F$qy=function(F$y){function F$A(F$y,F$j,F$t,F$k,F$T,F$Y){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=F$d.create(),this._points=F$t.slice(0,F$t.length),F$A.__super.call(this,F$y,F$j,0,0,this._points.length/2,F$k,F$T,F$Y)}F$r(F$A,"laya.webgl.shapes.Polygon",F$ty);var F$j=F$A.prototype;return F$j.rebuild=function(F$y){this._repaint||(this._points.length=0,this._points=this._points.concat(F$y))},F$j.setMatrix=function(F$y){F$y.copyTo(this._mat)},F$j.needUpdate=function(F$y){return this._repaint=this._mat.a==F$y.a&&this._mat.b==F$y.b&&this._mat.c==F$y.c&&this._mat.d==F$y.d&&this._mat.tx==F$y.tx&&this._mat.ty==F$y.ty,!this._repaint},F$j.getData=function(F$y,F$j,F$t){var F$k,F$T=0,F$Y=this._points,F$A=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=F$t){for(this._start=F$t,F$k=[],F$A=this.earcutTriangles.length,F$T=0;F$T<F$A;F$T++)F$k.push(this.earcutTriangles[F$T]+F$t);this.mUint16Array=new Uint16Array(F$k)}}else{this._start=F$t,F$k=[];var F$X=[],F$I=[],F$b=this.color,F$D=(F$b>>16&255)/255,F$l=(F$b>>8&255)/255,F$r=(255&F$b)/255;for(F$A=Math.floor(F$Y.length/2),F$T=0;F$T<F$A;F$T++)F$X.push(this.x+F$Y[2*F$T],this.y+F$Y[2*F$T+1],F$D,F$l,F$r),F$I.push(this.x+F$Y[2*F$T],this.y+F$Y[2*F$T+1]);for(this.earcutTriangles=F$ky.earcut(F$I,null,2),F$A=this.earcutTriangles.length,F$T=0;F$T<F$A;F$T++)F$k.push(this.earcutTriangles[F$T]+F$t);this.mUint16Array=new Uint16Array(F$k),this.mFloat32Array=new Float32Array(F$X)}F$y.append(this.mUint16Array),F$j.append(this.mFloat32Array)},F$A}(),F$wy=function(F$y){function F$Y(){this._matrix=new F$d,this._matrix4=F$zy.defaultMatrix4.concat(),F$Y.__super.call(this,1e4),this.shaderValue=new F$Py(0,0)}F$r(F$Y,"laya.webgl.submit.SubmitCanvas",F$Yy);var F$j=F$Y.prototype;return F$j.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var F$y=F$Cy.worldAlpha,F$j=F$Cy.worldMatrix4,F$t=F$Cy.worldMatrix,F$k=F$Cy.worldFilters,F$T=F$Cy.worldShaderDefines,F$Y=this.shaderValue,F$A=this._matrix,F$X=this._matrix4,F$I=F$d.TEMP;return F$d.mul(F$A,F$t,F$I),F$X[0]=F$I.a,F$X[1]=F$I.b,F$X[4]=F$I.c,F$X[5]=F$I.d,F$X[12]=F$I.tx,F$X[13]=F$I.ty,F$Cy.worldMatrix=F$I.clone(),F$Cy.worldMatrix4=F$X,F$Cy.worldAlpha=F$Cy.worldAlpha*F$Y.alpha,F$Y.filters&&F$Y.filters.length&&(F$Cy.worldFilters=F$Y.filters,F$Cy.worldShaderDefines=F$Y.defines),this._ctx_src.flush(),F$Cy.worldAlpha=F$y,F$Cy.worldMatrix4=F$j,F$Cy.worldMatrix.destroy(),F$Cy.worldMatrix=F$t,F$Cy.worldFilters=F$k,F$Cy.worldShaderDefines=F$T,1},F$j.releaseRender=function(){var F$y=F$Y._cache;this._ctx_src=null,F$y[F$y._length++]=this},F$j.getRenderType=function(){return 10003},F$Y.create=function(F$y,F$j,F$t){var F$k=F$Y._cache._length?F$Y._cache[--F$Y._cache._length]:new F$Y;F$k._ctx_src=F$y;var F$T=F$k.shaderValue;return F$T.alpha=F$j,F$T.defines.setValue(0),F$t&&F$t.length&&F$T.setFilters(F$t),F$k},F$Y._cache=((F$Y._cache=[])._length=0,F$Y._cache),F$Y}(),F$Sy=function(F$y){function F$b(F$y){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===F$y&&(F$y=1e4),F$b.__super.call(this,F$y)}F$r(F$b,"laya.webgl.submit.SubmitTexture",F$Yy);var F$j=F$b.prototype;return F$j.releaseRender=function(){var F$y=F$b._cache;(F$y[F$y._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},F$j.addTexture=function(F$y,F$j){this._texsID[this._texs.length]=F$y._uvID,this._texs.push(F$y),this._vbPos.push(F$j)},F$j.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var F$y=this.shaderValue.textureHost.bitmap;if(null!==F$y)for(var F$j=this._vb.getFloat32Array(),F$t=0,F$k=this._texs.length;F$t<F$k;F$t++){var F$T=this._texs[F$t];F$T.active();var F$Y=F$T.uv;if(this._texsID[F$t]!==F$T._uvID){this._texsID[F$t]=F$T._uvID;var F$A=this._vbPos[F$t];F$j[F$A+2]=F$Y[0],F$j[F$A+3]=F$Y[1],F$j[F$A+6]=F$Y[2],F$j[F$A+7]=F$Y[3],F$j[F$A+10]=F$Y[4],F$j[F$A+11]=F$Y[5],F$j[F$A+14]=F$Y[6],F$j[F$A+15]=F$Y[7],this._vb.setNeedUpload()}F$T.bitmap!==F$y&&(this._isSameTexture=!1)}}},F$j.renderSubmit=function(){if(0===this._numEle)return F$b._shaderSet=!1,1;var F$y=this.shaderValue.textureHost;if(F$y){var F$j=F$y.source;if(!F$y.bitmap||!F$j)return F$b._shaderSet=!1,1;this.shaderValue.texture=F$j,F$y.alphaTexture&&F$y.alphaTexture.source&&(this.shaderValue.texture1=F$y.alphaTexture.source)}this._vb.bind_upload(this._ib);var F$t=F$_y.mainContext;if(F$h.activeBlendFunction!==this._blendFn&&(F$t.enable(3042),this._blendFn(F$t),F$h.activeBlendFunction=this._blendFn),F$U.drawCall++,F$U.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&F$Ky.activeShader&&F$b._shaderSet?(F$Ky.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&F$Ky.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),F$b._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var F$k=F$y.bitmap,F$T=0,F$Y=F$Ky.activeShader,F$A=0,F$X=this._texs.length;F$A<F$X;F$A++){var F$I=this._texs[F$A];F$I.bitmap===F$k&&F$A+1!==F$X||(F$Y.uploadTexture2D(F$I.source),F$t.drawElements(4,6*(F$A-F$T+1),5123,this._startIdx+6*F$T*F$zy.BYTES_PIDX),F$k=F$I.bitmap,F$T=F$A)}else F$t.drawElements(4,this._numEle,5123,this._startIdx);return 1},F$b.create=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$b._cache._length?F$b._cache[--F$b._cache._length]:new F$b;null==F$t&&((F$t=F$Y._selfVb||(F$Y._selfVb=F$uy.create(-1))).clear(),F$k=0),F$Y._ib=F$j,F$Y._vb=F$t,F$Y._startIdx=F$k*F$zy.BYTES_PIDX,F$Y._numEle=0;var F$A=F$y._nBlendType;F$Y._blendFn=F$y._targets?F$h.targetFns[F$A]:F$h.fns[F$A],F$Y.shaderValue=F$T,F$Y.shaderValue.setValue(F$y._shader2D);var F$X=F$y._shader2D.filters;return F$X&&F$Y.shaderValue.setFilters(F$X),F$Y},F$b._cache=((F$b._cache=[])._length=0,F$b._cache),F$b._shaderSet=!0,F$b}(),F$Hy=function(F$y){function F$n(){F$n.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}F$r(F$n,"laya.webgl.utils.MeshTexture",F$ny);var F$j=F$n.prototype;return F$j.addData=function(F$y,F$j,F$t,F$k,F$T,F$Y){for(var F$A=F$y.length/2,F$X=this._vb.needSize(F$A*F$n.const_stride)>>2,F$I=this._vb.getFloat32Array(),F$b=0,F$D=0;F$D<F$A;F$D++){var F$l=F$y[F$b],F$r=F$y[F$b+1],F$$=F$l*F$k.a+F$r*F$k.c+F$k.tx,F$W=F$l*F$k.b+F$r*F$k.d+F$k.ty;F$I[F$X++]=F$$,F$I[F$X++]=F$W,F$I[F$X++]=F$j[F$b],F$I[F$X++]=F$j[F$b+1],F$b+=2}this._vb.setNeedUpload();var F$z=this.vertNum;if(0<F$z){(F$A=F$t.length)>F$n.tmpIdx.length&&(F$n.tmpIdx=new Uint16Array(F$A));for(var F$V=0;F$V<F$A;F$V++)F$n.tmpIdx[F$V]=F$t[F$V]+F$z;this._ib.appendU16Array(F$n.tmpIdx,F$t.length)}else this._ib.append(F$t);this._ib.setNeedUpload(),this.vertNum+=F$A,this.indexNum+=F$t.length},F$j.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},F$j.destroy=function(){this._ib.destroy(),this._vb.destroy()},F$n.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new F$n},F$n.const_stride=16,F$n._POOL=[],F$A(F$n,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),F$n}(),F$Ky=function(F$y){function F$j(){F$j.__super.call(this),this.lock=!0}return F$r(F$j,"laya.webgl.shader.BaseShader",F$M),F$j.activeShader=null,F$j.bindShader=null,F$j}(),F$xy=function(F$j){function F$D(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===F$t&&(F$t=6408),void 0===F$k&&(F$k=5121),void 0===F$T&&(F$T=34041),void 0===F$Y&&(F$Y=!1),void 0===F$A&&(F$A=!1),void 0===F$X&&(F$X=-1),void 0===F$I&&(F$I=-1),this._type=1,this._w=F$y,this._h=F$j,this._surfaceFormat=F$t,this._surfaceType=F$k,this._depthStencilFormat=F$T,F$n.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=F$Y,this._repeat=F$A,this._minFifter=F$X,this._magFifter=F$I,this._createWebGLRenderTarget(),this.bitmap.lock=!0,F$D.__super.call(this,this.bitmap,F$H.INV_UV)}F$r(F$D,"laya.webgl.resource.RenderTarget2D",F$j);var F$y=F$D.prototype;return F$v.imps(F$y,{"laya.resource.IDispose":!0}),F$y.getType=function(){return this._type},F$y.getTexture=function(){return this},F$y.size=function(F$y,F$j){this._w==F$y&&this._h==F$j||(this._w=F$y,this._h=F$j,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},F$y.release=function(){this.destroy()},F$y.recycle=function(){F$D.POOL.push(this)},F$y.start=function(){var F$y=F$_y.mainContext;return this._preRenderTarget=F$Cy.curRenderTarget,F$Cy.curRenderTarget=this,F$y.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(F$y.viewport(0,0,this._w,this._h),this._svWidth=F$Cy.width,this._svHeight=F$Cy.height,F$Cy.width=this._w,F$Cy.height=this._h,F$Ky.activeShader=null),this},F$y.clear=function(F$y,F$j,F$t,F$k){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=1);var F$T=F$_y.mainContext;F$T.clearColor(F$y,F$j,F$t,F$k);var F$Y=16384;switch(this._depthStencilFormat){case 33189:F$Y|=256;break;case 36168:F$Y|=1024;break;case 34041:F$Y|=256,F$Y|=1024}F$T.clear(F$Y)},F$y.end=function(){var F$y=F$_y.mainContext;F$y.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,F$Cy.curRenderTarget=this._preRenderTarget,1==this._type?(F$y.viewport(0,0,this._svWidth,this._svHeight),F$Cy.width=this._svWidth,F$Cy.height=this._svHeight,F$Ky.activeShader=null):F$y.viewport(0,0,F$v.stage.width,F$v.stage.height)},F$y.getData=function(F$y,F$j,F$t,F$k){var F$T=F$_y.mainContext;if(F$T.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===F$T.checkFramebufferStatus(36160)))return F$T.bindFramebuffer(36160,null),null;var F$Y=new Uint8Array(this._w*this._h*4);return F$T.readPixels(F$y,F$j,F$t,F$k,this._surfaceFormat,this._surfaceType,F$Y),F$T.bindFramebuffer(36160,null),F$Y},F$y.destroy=function(F$y){void 0===F$y&&(F$y=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,F$j.prototype.destroy.call(this))},F$y.dispose=function(){},F$y._createWebGLRenderTarget=function(){this.bitmap=new F$Ry(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(F$y){this.event("recovered")})},F$k(0,F$y,"surfaceFormat",function(){return this._surfaceFormat}),F$k(0,F$y,"magFifter",function(){return this._magFifter}),F$k(0,F$y,"surfaceType",function(){return this._surfaceType}),F$k(0,F$y,"mipMap",function(){return this._mipMap}),F$k(0,F$y,"depthStencilFormat",function(){return this._depthStencilFormat}),F$k(0,F$y,"minFifter",function(){return this._minFifter}),F$k(0,F$y,"source",function(){return this._alreadyResolved?F$v.superGet(F$H,this,"source"):null}),F$D.create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){void 0===F$t&&(F$t=6408),void 0===F$k&&(F$k=5121),void 0===F$T&&(F$T=34041),void 0===F$Y&&(F$Y=!1),void 0===F$A&&(F$A=!1),void 0===F$X&&(F$X=-1),void 0===F$I&&(F$I=-1);var F$b=F$D.POOL.pop();return F$b||(F$b=new F$D(F$y,F$j)),F$b.bitmap&&F$b._w==F$y&&F$b._h==F$j&&F$b._surfaceFormat==F$t&&F$b._surfaceType==F$k&&F$b._depthStencilFormat==F$T&&F$b._mipMap==F$Y&&F$b._repeat==F$A&&F$b._minFifter==F$X&&F$b._magFifter==F$I||(F$b._w=F$y,F$b._h=F$j,F$b._surfaceFormat=F$t,F$b._surfaceType=F$k,F$b._depthStencilFormat=F$T,F$n.isConchWebGL&&34041===F$b._depthStencilFormat&&(F$b._depthStencilFormat=33189),F$b._mipMap=F$Y,F$b._repeat=F$A,F$b._minFifter=F$X,F$b._magFifter=F$I,F$b.release(),F$b._createWebGLRenderTarget()),F$b},F$D.TYPE2D=1,F$D.TYPE3D=2,F$D.POOL=[],F$D}(F$H),F$Fy=function(F$y){function F$j(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,F$j.__super.call(this),F$j._gl=F$_y.mainContext}F$r(F$j,"laya.webgl.utils.Buffer",F$M);var F$t=F$j.prototype;return F$t._bind=function(){this.activeResource(),F$j._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(F$j._bindVertexBuffer=this._glBuffer),F$j._gl.bindBuffer(this._bufferType,F$j._bindActive[this._bufferType]=this._glBuffer),F$Ky.activeShader=null)},F$t.recreateResource=function(){this._glBuffer||(this._glBuffer=F$j._gl.createBuffer()),this.completeCreate()},F$t.disposeResource=function(){this._glBuffer&&(F$_y.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},F$k(0,F$t,"bufferUsage",function(){return this._bufferUsage}),F$j._gl=null,F$j._bindActive={},F$j._bindVertexBuffer=null,F$j._enableAtributes=[],F$j}(),F$Gy=function(F$y){function F$t(F$y){this.texcoord=null,this.offsetX=300,this.offsetY=0,F$t.__super.call(this,512,0);var F$j=8*F$zy.BYTES_PE;this.position=[2,5126,!1,F$j,0],this.texcoord=[2,5126,!1,F$j,2*F$zy.BYTES_PE],this.color=[4,5126,!1,F$j,4*F$zy.BYTES_PE]}return F$r(F$t,"laya.webgl.shader.d2.skinAnishader.SkinSV",F$Py),F$t}(),F$gy=function(F$y){function F$j(F$y){F$j.__super.call(this,2,0),this.color=[]}return F$r(F$j,"laya.webgl.shader.d2.value.Color2dSV",F$Py),F$j.prototype.setValue=function(F$y){F$y.fillStyle&&(this.color=F$y.fillStyle._color._color),F$y.strokeStyle&&(this.color=F$y.strokeStyle._color._color)},F$j}(),F$ay=function(F$y){function F$j(F$y){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=F$Py._TEXCOORD,F$j.__super.call(this,256,0)}F$r(F$j,"laya.webgl.shader.d2.value.FillTextureSV",F$Py);var F$t=F$j.prototype;return F$t.setValue=function(F$y){this.ALPHA=F$y.ALPHA,F$y.filters&&this.setFilters(F$y.filters)},F$t.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$j}(),F$Jy=function(F$y){function F$j(F$y){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=F$Py._TEXCOORD,void 0===F$y&&(F$y=0),F$j.__super.call(this,1,F$y)}F$r(F$j,"laya.webgl.shader.d2.value.TextureSV",F$Py);var F$t=F$j.prototype;return F$t.setValue=function(F$y){this.ALPHA=F$y.ALPHA,F$y.filters&&this.setFilters(F$y.filters)},F$t.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},F$j}(),F$hy=function(F$y){function F$j(F$y){this.a_color=null,this.u_pos=[0,0],F$j.__super.call(this,4,0),this.position=[2,5126,!1,5*F$zy.BYTES_PE,0],this.a_color=[3,5126,!1,5*F$zy.BYTES_PE,2*F$zy.BYTES_PE]}return F$r(F$j,"laya.webgl.shader.d2.value.PrimitiveSV",F$Py),F$j}(),F$Oy=function(F$y){function F$j(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,F$j.__super.call(this)}F$r(F$j,"laya.webgl.atlas.AtlasWebGLCanvas",F$y);var F$t=F$j.prototype;return F$t.recreateResource=function(){var F$y=F$_y.mainContext,F$j=this._source=F$y.createTexture(),F$t=F$ey.curBindTexTarget,F$k=F$ey.curBindTexValue;F$ey.bindTexture(F$y,3553,F$j),F$y.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),F$y.texParameteri(3553,10241,9729),F$y.texParameteri(3553,10240,9729),F$y.texParameteri(3553,10242,33071),F$y.texParameteri(3553,10243,33071),F$t&&F$k&&F$ey.bindTexture(F$y,F$t,F$k),this.memorySize=this._w*this._h*4,this.completeCreate()},F$t.disposeResource=function(){this._source&&(F$_y.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$t.texSubImage2D=function(F$y,F$j,F$t){if(F$n.isFlash){this._flashCacheImage||(this._flashCacheImage=F$V.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var F$k=F$t.bitmapdata;this._flashCacheImage._image.copyPixels(F$k,0,0,F$k.width,F$k.height,F$y,F$j),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var F$T=F$_y.mainContext,F$Y=F$ey.curBindTexTarget,F$A=F$ey.curBindTexValue;F$ey.bindTexture(F$T,3553,this._source),F$T.pixelStorei(37441,!0),0<=F$y-1&&F$T.texSubImage2D(3553,0,F$y-1,F$j,6408,5121,F$t),F$y+1<=this._w&&F$T.texSubImage2D(3553,0,F$y+1,F$j,6408,5121,F$t),0<=F$j-1&&F$T.texSubImage2D(3553,0,F$y,F$j-1,6408,5121,F$t),F$j+1<=this._h&&F$T.texSubImage2D(3553,0,F$y,F$j+1,6408,5121,F$t),F$T.texSubImage2D(3553,0,F$y,F$j,6408,5121,F$t),F$T.pixelStorei(37441,!1),F$Y&&F$A&&F$ey.bindTexture(F$T,F$Y,F$A)}},F$t.texSubImage2DPixel=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$_y.mainContext,F$A=F$ey.curBindTexTarget,F$X=F$ey.curBindTexValue;F$ey.bindTexture(F$Y,3553,this._source);var F$I=new Uint8Array(F$T.data);F$Y.pixelStorei(37441,!0),F$Y.texSubImage2D(3553,0,F$y,F$j,F$t,F$k,6408,5121,F$I),F$Y.pixelStorei(37441,!1),F$A&&F$X&&F$ey.bindTexture(F$Y,F$A,F$X)},F$k(0,F$t,"width",F$y.prototype._$get_width,function(F$y){this._w=F$y}),F$k(0,F$t,"height",F$y.prototype._$get_height,function(F$y){this._h=F$y}),F$j}(F$I),F$sy=function(F$y){function F$T(){this.flipY=!0,this.alwaysChange=!1,F$T.__super.call(this)}F$r(F$T,"laya.webgl.resource.WebGLCanvas",F$I);var F$j=F$T.prototype;return F$j.getCanvas=function(){return this._canvas},F$j.clear=function(){this._ctx&&this._ctx.clear()},F$j.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},F$j._setContext=function(F$y){this._ctx=F$y},F$j.getContext=function(F$y,F$j){return this._ctx?this._ctx:this._ctx=F$T._createContext(this)},F$j.size=function(F$y,F$j){this._w==F$y&&this._h==F$j||(this._w=F$y,this._h=F$j,this._ctx&&this._ctx.size(F$y,F$j),this._canvas&&(this._canvas.height=F$j,this._canvas.width=F$y))},F$j.activeResource=function(F$y){void 0===F$y&&(F$y=!1),this._source||this.recreateResource()},F$j.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},F$j.disposeResource=function(){this._source&&!this.iscpuSource&&(F$_y.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$j.createWebGlTexture=function(){var F$y=F$_y.mainContext;this._canvas;var F$j=this._source=F$y.createTexture();this.iscpuSource=!1;var F$t=F$ey.curBindTexTarget,F$k=F$ey.curBindTexValue;F$ey.bindTexture(F$y,3553,F$j),F$y.pixelStorei(37440,this.flipY?1:0),F$T.premulAlpha&&F$y.pixelStorei(37441,!0),F$y.texImage2D(3553,0,6408,6408,5121,this._imgData),F$T.premulAlpha&&F$y.pixelStorei(37441,!1),F$y.texParameteri(3553,10240,9729),F$y.texParameteri(3553,10241,9729),F$y.texParameteri(3553,10242,33071),F$y.texParameteri(3553,10243,33071),F$y.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,F$t&&F$k&&F$ey.bindTexture(F$y,F$t,F$k)},F$j.reloadCanvasData=function(){var F$y=F$_y.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var F$j=F$ey.curBindTexTarget,F$t=F$ey.curBindTexValue;F$ey.bindTexture(F$y,3553,this._source),F$T.premulAlpha&&F$y.pixelStorei(37441,!0),F$y.texImage2D(3553,0,6408,6408,5121,this._imgData),F$T.premulAlpha&&F$y.pixelStorei(37441,!1),F$y.pixelStorei(37440,0),F$j&&F$t&&F$ey.bindTexture(F$y,F$j,F$t)},F$j.texSubImage2D=function(F$y,F$j,F$t){var F$k=F$_y.mainContext,F$T=F$ey.curBindTexTarget,F$Y=F$ey.curBindTexValue;F$ey.bindTexture(F$k,3553,this._source),F$k.pixelStorei(37441,!0),F$k.texSubImage2D(3553,0,F$j,F$t,6408,5121,F$y._source),F$k.pixelStorei(37441,!1),F$T&&F$Y&&F$ey.bindTexture(F$k,F$T,F$Y)},F$j.toBase64=function(F$y,F$j,F$t){var F$k=null;this._canvas&&(F$k=this._canvas.toDataURL(F$y,F$j)),F$t.call(this,F$k)},F$k(0,F$j,"context",function(){return this._ctx}),F$k(0,F$j,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),F$k(0,F$j,"asBitmap",null,function(F$y){this._ctx&&(this._ctx.asBitmap=F$y)}),F$T._createContext=null,F$T.premulAlpha=!1,F$T}(),F$Zy=function(F$y){function F$Y(F$y,F$j){this.CborderSize=12,F$Y.__super.call(this),this.char=F$y,this.isSpace=" "===F$y,this.xs=F$j.scaleX,this.ys=F$j.scaleY,this.font=F$j.font.toString(),this.fontSize=F$j.font.size,this.fillColor=F$j.fillColor,this.borderColor=F$j.borderColor,this.lineWidth=F$j.lineWidth,this.underLine=F$j.underLine;var F$t,F$k=F$n.isConchApp;F$k?((F$t=ConchTextCanvas)._source=ConchTextCanvas,F$t._source.canvas=ConchTextCanvas):F$t=F$$.canvas.source,this.canvas=F$t,this._enableMerageInAtlas=!0,this._ctx=F$k?F$t:this.canvas.getContext("2d",void 0);var F$T=F$K.measureText(this.char,this.font);this.cw=F$T.width*this.xs,this.ch=(F$T.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new F$H(this)}F$r(F$Y,"laya.webgl.resource.WebGLCharImage",F$I);var F$j=F$Y.prototype;return F$v.imps(F$j,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$j.active=function(){this.texture.active()},F$j.recreateResource=function(){var F$y=F$n.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),F$y){var F$j=this.fontSize;1==this.xs&&1==this.ys||(F$j=parseInt(F$j*(this.xs>this.ys?this.xs:this.ys)+""));var F$t="normal 100 "+this.font;F$t=F$t.replace(F$Y._fontSizeReg,F$j),this.borderColor&&(F$t+=" 1 "+this.borderColor),this._ctx.font=F$t,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,F$S.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var F$k=this._ctx.measureText(this.char);F$k||(F$k={width:16});var F$T=F$k.width+1;this._ctx.lineTo(F$T,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},F$j.onresize=function(F$y,F$j){this._w=F$y,this._h=F$j,this._allowMerageInAtlas=!0},F$j.clearAtlasSource=function(){},F$k(0,F$j,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$k(0,F$j,"atlasSource",function(){return this.canvas}),F$k(0,F$j,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(F$y){this._enableMerageInAtlas=F$y}),F$Y.createOneChar=function(F$y,F$j){return new F$Y(F$y,F$j)},F$Y._fontSizeReg=new RegExp("\\d+(?=px)","g"),F$Y}(),F$Ry=function(F$y){function F$b(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){void 0===F$t&&(F$t=6408),void 0===F$k&&(F$k=5121),void 0===F$T&&(F$T=34041),void 0===F$Y&&(F$Y=!1),void 0===F$A&&(F$A=!1),void 0===F$X&&(F$X=-1),void 0===F$I&&(F$I=1),F$b.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=F$y,this._h=F$j,this._surfaceFormat=F$t,this._surfaceType=F$k,this._depthStencilFormat=F$T,this._mipMap=F$Y,this._repeat=F$A,this._minFifter=F$X,this._magFifter=F$I}F$r(F$b,"laya.webgl.resource.WebGLRenderTarget",F$I);var F$j=F$b.prototype;return F$j.recreateResource=function(){var F$y=F$_y.mainContext;this._frameBuffer||(this._frameBuffer=F$y.createFramebuffer()),this._source||(this._source=F$y.createTexture());var F$j=F$ey.curBindTexTarget,F$t=F$ey.curBindTexValue;F$ey.bindTexture(F$y,3553,this._source),F$y.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var F$k=this._minFifter,F$T=this._magFifter,F$Y=this._repeat?10497:33071,F$A=F$D.isPOT(this._w,this._h);if(F$A?(this._mipMap?-1!==F$k||(F$k=9987):-1!==F$k||(F$k=9729),-1!==F$T||(F$T=9729),F$y.texParameteri(3553,10241,F$k),F$y.texParameteri(3553,10240,F$T),F$y.texParameteri(3553,10242,F$Y),F$y.texParameteri(3553,10243,F$Y),this._mipMap&&F$y.generateMipmap(3553)):(-1!==F$k||(F$k=9729),-1!==F$T||(F$T=9729),F$y.texParameteri(3553,10241,F$k),F$y.texParameteri(3553,10240,F$T),F$y.texParameteri(3553,10242,33071),F$y.texParameteri(3553,10243,33071)),F$y.bindFramebuffer(36160,this._frameBuffer),F$y.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=F$y.createRenderbuffer()),F$y.bindRenderbuffer(36161,this._depthStencilBuffer),F$y.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:F$y.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$y.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$y.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$y.bindFramebuffer(36160,null),F$j&&F$t&&F$ey.bindTexture(F$y,F$j,F$t),F$y.bindRenderbuffer(36161,null),F$A&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},F$j.disposeResource=function(){this._frameBuffer&&(F$_y.mainContext.deleteTexture(this._source),F$_y.mainContext.deleteFramebuffer(this._frameBuffer),F$_y.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},F$k(0,F$j,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$k(0,F$j,"frameBuffer",function(){return this._frameBuffer}),F$b}(),F$By=function(F$y){function F$X(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this.offsetX=0,this.offsetY=0,F$X.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=F$Y,this.canvas=F$y,this._ctx=F$y.getContext("2d",void 0),this._w=F$k,this._h=F$T,this.offsetX=F$j,this.offsetY=F$t,this.src=F$A,this._enableMerageInAtlas=!0,F$a.enabled&&this._w<F$a.atlasLimitWidth&&this._h<F$a.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}F$r(F$X,"laya.webgl.resource.WebGLSubImage",F$I);var F$j=F$X.prototype;return F$v.imps(F$j,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$j.size=function(F$y,F$j){this._w=F$y,this._h=F$j,this._ctx&&this._ctx.size(F$y,F$j),this.canvas&&(this.canvas.height=F$j,this.canvas.width=F$y)},F$j.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},F$j.createWebGlTexture=function(){var F$y=F$_y.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var F$j=this._source=F$y.createTexture(),F$t=F$ey.curBindTexTarget,F$k=F$ey.curBindTexValue;F$ey.bindTexture(F$y,3553,F$j),F$y.pixelStorei(37441,!0),F$y.texImage2D(3553,0,6408,6408,5121,this.canvas),F$y.pixelStorei(37441,!1);var F$T=this.minFifter,F$Y=this.magFifter,F$A=this.repeat?10497:33071,F$X=F$D.isPOT(this.width,this.height);F$X?(this.mipmap?-1!==F$T||(F$T=9987):-1!==F$T||(F$T=9729),-1!==F$Y||(F$Y=9729),F$y.texParameteri(3553,10240,F$Y),F$y.texParameteri(3553,10241,F$T),F$y.texParameteri(3553,10242,F$A),F$y.texParameteri(3553,10243,F$A),this.mipmap&&F$y.generateMipmap(3553)):(-1!==F$T||(F$T=9729),-1!==F$Y||(F$Y=9729),F$y.texParameteri(3553,10241,F$T),F$y.texParameteri(3553,10240,F$Y),F$y.texParameteri(3553,10242,33071),F$y.texParameteri(3553,10243,33071)),F$t&&F$k&&F$ey.bindTexture(F$y,F$t,F$k),this.canvas=null,F$X&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},F$j.disposeResource=function(){F$a.enabled&&this._allowMerageInAtlas||!this._source||(F$_y.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$j.clearAtlasSource=function(){},F$k(0,F$j,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$k(0,F$j,"atlasSource",function(){return this.canvas}),F$k(0,F$j,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(F$y){this._allowMerageInAtlas=F$y}),F$X}(),F$cy=function(F$y){function F$b(F$y,F$j,F$t,F$k){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,F$b.__super.call(this),!F$y||!F$j)throw"Shader Error";this._id=++F$b._count,this._vs=F$y,this._ps=F$j,this._nameMap=F$k||{},null!=F$t&&(F$b.sharders[F$t]=this)}F$r(F$b,"laya.webgl.shader.Shader",F$Ky);var F$j=F$b.prototype;return F$j.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},F$j.disposeResource=function(){F$_y.mainContext.deleteShader(this._vshader),F$_y.mainContext.deleteShader(this._pshader),F$_y.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},F$j._compile=function(){if(!F$_y.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var F$y=[this._vs,this._ps],F$j=F$_y.mainContext;if(this._program=F$j.createProgram(),this._vshader=F$b._createShader(F$j,F$y[0],35633),this._pshader=F$b._createShader(F$j,F$y[1],35632),F$j.attachShader(this._program,this._vshader),F$j.attachShader(this._program,this._pshader),F$j.linkProgram(this._program),!F$n.isConchApp&&!F$j.getProgramParameter(this._program,35714))throw F$j.getProgramInfoLog(this._program);var F$t,F$k,F$T=0,F$Y=0;for(F$Y=F$n.isConchApp?F$j.getProgramParameterEx(this._vs,this._ps,"",35721):F$j.getProgramParameter(this._program,35721),F$T=0;F$T<F$Y;F$T++){var F$A=null;F$t={vartype:"attribute",glfun:null,ivartype:0,attrib:F$A=F$n.isConchApp?F$j.getActiveAttribEx(this._vs,this._ps,"",F$T):F$j.getActiveAttrib(this._program,F$T),location:F$j.getAttribLocation(this._program,F$A.name),name:F$A.name,type:F$A.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(F$t)}var F$X=0;for(F$X=F$n.isConchApp?F$j.getProgramParameterEx(this._vs,this._ps,"",35718):F$j.getProgramParameter(this._program,35718),F$T=0;F$T<F$X;F$T++){var F$I=null;F$I=F$n.isConchApp?F$j.getActiveUniformEx(this._vs,this._ps,"",F$T):F$j.getActiveUniform(this._program,F$T),0<(F$t={vartype:"uniform",glfun:null,ivartype:1,attrib:F$A,location:F$j.getUniformLocation(this._program,F$I.name),name:F$I.name,type:F$I.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$t.name=F$t.name.substr(0,F$t.name.length-3),F$t.isArray=!0,F$t.location=F$j.getUniformLocation(this._program,F$t.name)),this._params.push(F$t)}for(F$T=0,F$k=this._params.length;F$T<F$k;F$T++)if((F$t=this._params[F$T]).indexOfParams=F$T,F$t.index=1,F$t.value=[F$t.location,null],F$t.codename=F$t.name,F$t.name=this._nameMap[F$t.codename]?this._nameMap[F$t.codename]:F$t.codename,(this._paramsMap[F$t.name]=F$t)._this=this,F$t.uploadedValue=[],"attribute"!==F$t.vartype)switch(F$t.type){case 5124:F$t.fun=F$t.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$t.fun=F$t.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$t.fun=F$t.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$t.fun=F$t.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$t.fun=F$t.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$t.fun=this._uniform_sampler2D;break;case 35680:F$t.fun=this._uniform_samplerCube;break;case 35676:F$t.glfun=F$j.uniformMatrix4fv,F$t.fun=this._uniformMatrix4fv;break;case 35670:F$t.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else F$t.fun=this._attribute}},F$j.getUniform=function(F$y){return this._paramsMap[F$y]},F$j._attribute=function(F$y,F$j){var F$t=F$_y.mainContext,F$k=F$Fy._enableAtributes,F$T=F$y.location;return F$k[F$T]||F$t.enableVertexAttribArray(F$T),F$t.vertexAttribPointer(F$T,F$j[0],F$j[1],F$j[2],F$j[3],F$j[4]+this._offset),F$k[F$T]=F$Fy._bindVertexBuffer,1},F$j._uniform1f=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j?(F$_y.mainContext.uniform1f(F$y.location,F$t[0]=F$j),1):0},F$j._uniform1fv=function(F$y,F$j){if(F$j.length<4){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$_y.mainContext.uniform1fv(F$y.location,F$j),F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3],1):0}return F$_y.mainContext.uniform1fv(F$y.location,F$j),1},F$j._uniform_vec2=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]?(F$_y.mainContext.uniform2f(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1]),1):0},F$j._uniform_vec2v=function(F$y,F$j){if(F$j.length<2){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$_y.mainContext.uniform2fv(F$y.location,F$j),F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3],1):0}return F$_y.mainContext.uniform2fv(F$y.location,F$j),1},F$j._uniform_vec3=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]?(F$_y.mainContext.uniform3f(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2]),1):0},F$j._uniform_vec3v=function(F$y,F$j){return F$_y.mainContext.uniform3fv(F$y.location,F$j),1},F$j._uniform_vec4=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$_y.mainContext.uniform4f(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3]),1):0},F$j._uniform_vec4v=function(F$y,F$j){return F$_y.mainContext.uniform4fv(F$y.location,F$j),1},F$j._uniformMatrix2fv=function(F$y,F$j){return F$_y.mainContext.uniformMatrix2fv(F$y.location,!1,F$j),1},F$j._uniformMatrix3fv=function(F$y,F$j){return F$_y.mainContext.uniformMatrix3fv(F$y.location,!1,F$j),1},F$j._uniformMatrix4fv=function(F$y,F$j){return F$_y.mainContext.uniformMatrix4fv(F$y.location,!1,F$j),1},F$j._uniform1i=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j?(F$_y.mainContext.uniform1i(F$y.location,F$t[0]=F$j),1):0},F$j._uniform1iv=function(F$y,F$j){return F$_y.mainContext.uniform1iv(F$y.location,F$j),1},F$j._uniform_ivec2=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]?(F$_y.mainContext.uniform2i(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1]),1):0},F$j._uniform_ivec2v=function(F$y,F$j){return F$_y.mainContext.uniform2iv(F$y.location,F$j),1},F$j._uniform_vec3i=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]?(F$_y.mainContext.uniform3i(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2]),1):0},F$j._uniform_vec3vi=function(F$y,F$j){return F$_y.mainContext.uniform3iv(F$y.location,F$j),1},F$j._uniform_vec4i=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$_y.mainContext.uniform4i(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3]),1):0},F$j._uniform_vec4vi=function(F$y,F$j){return F$_y.mainContext.uniform4iv(F$y.location,F$j),1},F$j._uniform_sampler2D=function(F$y,F$j){var F$t=F$_y.mainContext,F$k=F$y.uploadedValue;return null==F$k[0]?(F$k[0]=this._curActTexIndex,F$t.uniform1i(F$y.location,this._curActTexIndex),F$t.activeTexture(F$b._TEXTURES[this._curActTexIndex]),F$ey.bindTexture(F$t,3553,F$j),this._curActTexIndex++,1):(F$t.activeTexture(F$b._TEXTURES[F$k[0]]),F$ey.bindTexture(F$t,3553,F$j),0)},F$j._uniform_samplerCube=function(F$y,F$j){var F$t=F$_y.mainContext,F$k=F$y.uploadedValue;return null==F$k[0]?(F$k[0]=this._curActTexIndex,F$t.uniform1i(F$y.location,this._curActTexIndex),F$t.activeTexture(F$b._TEXTURES[this._curActTexIndex]),F$ey.bindTexture(F$t,34067,F$j),this._curActTexIndex++,1):(F$t.activeTexture(F$b._TEXTURES[F$k[0]]),F$ey.bindTexture(F$t,34067,F$j),0)},F$j._noSetValue=function(F$y){console.log("no....:"+F$y.name)},F$j.uploadOne=function(F$y,F$j){this.activeResource(),F$ey.UseProgram(this._program);var F$t=this._paramsMap[F$y];F$t.fun.call(this,F$t,F$j)},F$j.uploadTexture2D=function(F$y){F$U.shaderCall++;var F$j=F$_y.mainContext;F$j.activeTexture(33984),F$ey.bindTexture(F$j,3553,F$y)},F$j.uploadTexture2D1=function(F$y){F$U.shaderCall++;var F$j=F$_y.mainContext;F$j.activeTexture(33985),F$ey.bindTexture(F$j,3553,F$y)},F$j.upload=function(F$y,F$j){F$Ky.activeShader=F$Ky.bindShader=this,this._lastUseFrameCount===F$U.loopCount||this.activeResource(),F$ey.UseProgram(this._program),this._reCompile?(F$j=this._params,this._reCompile=!1):F$j=F$j||this._params;F$_y.mainContext;for(var F$t,F$k,F$T=F$j.length,F$Y=0,F$A=0;F$A<F$T;F$A++)null!==(F$k=F$y[(F$t=F$j[F$A]).name])&&(F$Y+=F$t.fun.call(this,F$t,F$k));F$U.shaderCall+=F$Y},F$j.uploadArray=function(F$y,F$j,F$t){F$Ky.activeShader=this,(F$Ky.bindShader=this).activeResource(),F$ey.UseProgram(this._program);this._params;for(var F$k,F$T,F$Y=0,F$A=F$j-2;0<=F$A;F$A-=2)(F$T=this._paramsMap[F$y[F$A]])&&null!=(F$k=F$y[F$A+1])&&(F$t&&F$t[F$T.name]&&F$t[F$T.name].bind(),F$Y+=F$T.fun.call(this,F$T,F$k));F$U.shaderCall+=F$Y},F$j.getParams=function(){return this._params},F$b.getShader=function(F$y){return F$b.sharders[F$y]},F$b.create=function(F$y,F$j,F$t,F$k){return new F$b(F$y,F$j,F$t,F$k)},F$b.withCompile=function(F$y,F$j,F$t,F$k){if(F$t&&F$b.sharders[F$t])return F$b.sharders[F$t];var F$T=F$b._preCompileShader[2e-4*F$y];if(!F$T)throw new Error("withCompile shader err!"+F$y);return F$T.createShader(F$j,F$t,F$k)},F$b.withCompile2D=function(F$y,F$j,F$t,F$k,F$T){if(F$k&&F$b.sharders[F$k])return F$b.sharders[F$k];var F$Y=F$b._preCompileShader[2e-4*F$y+F$j];if(!F$Y)throw new Error("withCompile shader err!"+F$y+" "+F$j);return F$Y.createShader(F$t,F$k,F$T)},F$b.addInclude=function(F$y,F$j){F$My.addInclude(F$y,F$j)},F$b.preCompile=function(F$y,F$j,F$t,F$k){var F$T=2e-4*F$y;F$b._preCompileShader[F$T]=new F$My(F$T,F$j,F$t,F$k)},F$b.preCompile2D=function(F$y,F$j,F$t,F$k,F$T){var F$Y=2e-4*F$y+F$j;F$b._preCompileShader[F$Y]=new F$My(F$Y,F$t,F$k,F$T)},F$b._createShader=function(F$y,F$j,F$t){var F$k=F$y.createShader(F$t);return F$y.shaderSource(F$k,F$j),F$y.compileShader(F$k),F$k},F$b._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],F$b._count=0,F$b._preCompileShader={},F$b.SHADERNAME2ID=2e-4,F$b.sharders=((F$b.sharders=[]).length=32,F$b.sharders),F$A(F$b,["nameKey",function(){return this.nameKey=new F$q}]),F$b}(),F$Ly=function(F$y){function F$j(){this._maxsize=0,this._upload=!0,this._uploadSize=0,F$j.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}F$r(F$j,"laya.webgl.utils.Buffer2D",F$y);var F$t=F$j.prototype;return F$t.needSize=function(F$y){var F$j=this._byteLength;if(F$y){var F$t=this._byteLength+F$y;F$t<=this._buffer.byteLength||this._resizeBuffer(F$t<<1,!0),this._byteLength=F$t}return F$j},F$t._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),F$U.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$Fy._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$Fy._gl.bufferSubData(this._bufferType,0,this._buffer)},F$t._bufferSubData=function(F$y,F$j,F$t){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),this._maxsize=Math.max(this._maxsize,this._byteLength),F$U.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,F$Fy._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),F$j||F$t){var F$k=this._buffer.slice(F$j,F$t);F$Fy._gl.bufferSubData(this._bufferType,F$y,F$k)}else F$Fy._gl.bufferSubData(this._bufferType,F$y,this._buffer)},F$t._checkArrayUse=function(){},F$t._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},F$t._bind_subUpload=function(F$y,F$j,F$t){return void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(F$y,F$j,F$t),!0)},F$t._resizeBuffer=function(F$y,F$j){if(F$y<this._buffer.byteLength)return this;if(this.memorySize=F$y,F$j&&this._buffer&&0<this._buffer.byteLength){var F$t=new ArrayBuffer(F$y);new Uint8Array(F$t).set(new Uint8Array(this._buffer),0),this._buffer=F$t}else this._buffer=new ArrayBuffer(F$y);return this._checkArrayUse(),this._upload=!0,this},F$t.append=function(F$y){this._upload=!0;var F$j,F$t;F$j=F$y.byteLength,F$y instanceof Uint8Array?(this._resizeBuffer(this._byteLength+F$j,!0),F$t=new Uint8Array(this._buffer,this._byteLength)):F$y instanceof Uint16Array?(this._resizeBuffer(this._byteLength+F$j,!0),F$t=new Uint16Array(this._buffer,this._byteLength)):F$y instanceof Float32Array&&(this._resizeBuffer(this._byteLength+F$j,!0),F$t=new Float32Array(this._buffer,this._byteLength)),F$t.set(F$y,0),this._byteLength+=F$j,this._checkArrayUse()},F$t.appendU16Array=function(F$y,F$j){this._resizeBuffer(this._byteLength+2*F$j,!0);for(var F$t=new Uint16Array(this._buffer,this._byteLength,F$j),F$k=0;F$k<F$j;F$k++)F$t[F$k]=F$y[F$k];this._byteLength+=2*F$j,this._checkArrayUse()},F$t.appendEx=function(F$y,F$j){this._upload=!0;var F$t;F$t=F$y.byteLength,this._resizeBuffer(this._byteLength+F$t,!0),new F$j(this._buffer,this._byteLength).set(F$y,0),this._byteLength+=F$t,this._checkArrayUse()},F$t.appendEx2=function(F$y,F$j,F$t,F$k){void 0===F$k&&(F$k=1),this._upload=!0;var F$T,F$Y;F$T=F$t*F$k,this._resizeBuffer(this._byteLength+F$T,!0),F$Y=new F$j(this._buffer,this._byteLength);var F$A=0;for(F$A=0;F$A<F$t;F$A++)F$Y[F$A]=F$y[F$A];this._byteLength+=F$T,this._checkArrayUse()},F$t.getBuffer=function(){return this._buffer},F$t.setNeedUpload=function(){this._upload=!0},F$t.getNeedUpload=function(){return this._upload},F$t.upload=function(){var F$y=this._bind_upload();return F$Fy._gl.bindBuffer(this._bufferType,null),F$Fy._bindActive[this._bufferType]=null,F$Ky.activeShader=null,F$y},F$t.subUpload=function(F$y,F$j,F$t){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0);var F$k=this._bind_subUpload();return F$Fy._gl.bindBuffer(this._bufferType,null),F$Fy._bindActive[this._bufferType]=null,F$Ky.activeShader=null,F$k},F$t.disposeResource=function(){F$y.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},F$t.clear=function(){this._byteLength=0,this._upload=!0},F$k(0,F$t,"bufferLength",function(){return this._buffer.byteLength}),F$k(0,F$t,"byteLength",null,function(F$y){this._byteLength!==F$y&&(F$y<=this._buffer.byteLength||this._resizeBuffer(2*F$y+256,!0),this._byteLength=F$y)}),F$j.__int__=function(F$y){F$Ey.QuadrangleIB=F$Ey.create(35044),F$Vy.fillIBQuadrangle(F$Ey.QuadrangleIB,16)},F$j.FLOAT32=4,F$j.SHORT=2,F$j}(F$Fy),F$oy=(function(F$j){function F$t(F$y){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,F$t.__super.call(this,9)}F$r(F$t,"laya.webgl.shader.d2.value.GlowSV",F$j);var F$y=F$t.prototype;F$y.setValue=function(F$y){F$j.prototype.setValue.call(this,F$y)},F$y.clear=function(){F$j.prototype.clear.call(this)}}(F$Jy),function(F$y){function F$j(F$y){F$j.__super.call(this,64),this.defines.add(64)}F$r(F$j,"laya.webgl.shader.d2.value.TextSV",F$y);var F$t=F$j.prototype;return F$t.release=function(){(F$j.pool[F$j._length++]=this).clear()},F$t.clear=function(){F$y.prototype.clear.call(this)},F$j.create=function(){return F$j._length?F$j.pool[--F$j._length]:new F$j(null)},F$j.pool=[],F$j._length=0,F$j}(F$Jy)),F$iy=function(F$y){function F$T(F$y,F$j,F$t,F$k){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,F$T.__super.call(this,F$y,F$j,F$t,F$k)}F$r(F$T,"laya.webgl.shader.d2.Shader2X",F$y);var F$j=F$T.prototype;return F$j.upload2dQuick1=function(F$y){this.upload(F$y,this._params2dQuick1||this._make2dQuick1())},F$j._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var F$y,F$j=this._params,F$t=0,F$k=F$j.length;F$t<F$k;F$t++)F$y=F$j[F$t],(F$n.isFlash||"size"!==F$y.name&&"position"!==F$y.name&&"texcoord"!==F$y.name)&&this._params2dQuick1.push(F$y)}return this._params2dQuick1},F$j.disposeResource=function(){F$y.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},F$j.upload2dQuick2=function(F$y){this.upload(F$y,this._params2dQuick2||this._make2dQuick2())},F$j._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var F$y,F$j=this._params,F$t=0,F$k=F$j.length;F$t<F$k;F$t++)F$y=F$j[F$t],(F$n.isFlash||"size"!==F$y.name)&&this._params2dQuick2.push(F$y)}return this._params2dQuick2},F$T.create=function(F$y,F$j,F$t,F$k){return new F$T(F$y,F$j,F$t,F$k)},F$T}(F$cy),F$Ey=function(F$y){function F$j(F$y){this._uint8Array=null,this._uint16Array=null,void 0===F$y&&(F$y=35044),F$j.__super.call(this),this._bufferUsage=F$y,this._bufferType=34963,F$n.isFlash||(this._buffer=new ArrayBuffer(8))}F$r(F$j,"laya.webgl.utils.IndexBuffer2D",F$Ly);var F$t=F$j.prototype;return F$t._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},F$t.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},F$t.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},F$t.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},F$j.QuadrangleIB=null,F$j.create=function(F$y){return void 0===F$y&&(F$y=35044),new F$j(F$y)},F$j}(),F$uy=function(F$y){function F$t(F$y,F$j){this._floatArray32=null,this._vertexStride=0,F$t.__super.call(this),this._vertexStride=F$y,this._bufferUsage=F$j,this._bufferType=34962,F$n.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}F$r(F$t,"laya.webgl.utils.VertexBuffer2D",F$y);var F$j=F$t.prototype;return F$j.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},F$j.bind=function(F$y){F$y&&F$y._bind(),this._bind()},F$j.insertData=function(F$y,F$j){this.getFloat32Array().set(F$y,F$j),this._upload=!0},F$j.bind_upload=function(F$y){F$y._bind_upload()||F$y._bind(),this._bind_upload()||this._bind()},F$j._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},F$j.disposeResource=function(){F$y.prototype.disposeResource.call(this)},F$j.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},F$k(0,F$j,"vertexStride",function(){return this._vertexStride}),F$t.create=function(F$y,F$j){return void 0===F$j&&(F$j=35048),new F$t(F$y,F$j)},F$t}(F$Ly),F$yj=function(F$y){function F$X(F$y,F$j,F$t,F$k,F$T,F$Y){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===F$t&&(F$t=6408),void 0===F$k&&(F$k=!0),F$X.__super.call(this,F$y,F$j),F$y){if(this._format=F$t,this._mipmap=F$k,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof F$y)this._url=F$y,this._src=F$y,this._image=new F$$.window.Image,F$j&&(F$j.onload&&(this.onload=F$j.onload),F$j.onerror&&(this.onerror=F$j.onerror),F$j.onCreate&&F$j.onCreate(this)),this._image.crossOrigin=F$y&&0==F$y.indexOf("data:")?null:"",F$y&&(this._image.src=F$y);else if(F$y instanceof ArrayBuffer){this._src=F$j,this._url=this._src;var F$A=new F$b(F$y);F$A.readUTFBytes(4),F$A.readUTFBytes(2),F$A.getInt16();F$A.endian="bigEndian",this._w=F$A.getInt16(),this._h=F$A.getInt16();F$A.getInt16(),F$A.getInt16();this._image=new Uint8Array(F$y,F$A.pos),this._format=F$_y.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,F$a.enabled&&this._w<F$a.atlasLimitWidth&&this._h<F$a.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(F$y instanceof Uint8Array))return this._src=F$j,this._url=this._src,this._image=F$y.source||F$y,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=F$j,this._url=this._src,this._w=F$T,this._h=F$Y,this._image=F$y,this._format=0===F$t?F$y.byteLength/(F$T*F$Y)==4?6408:6407:F$t}this._$5__enableMerageInAtlas=!0}}F$r(F$X,"laya.webgl.resource.WebGLImage",F$V);var F$j=F$X.prototype;return F$v.imps(F$j,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),F$j._init_=function(F$y,F$j){},F$j._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$y=F$_y.mainContext,F$j=this._source=F$y.createTexture(),F$t=F$ey.curBindTexTarget,F$k=F$ey.curBindTexValue;F$ey.bindTexture(F$y,3553,F$j);var F$T=this.minFifter,F$Y=this.magFifter,F$A=this.repeat?10497:33071,F$X=F$D.isPOT(this._w,this._h),F$I=!1;switch(F$X?(this.mipmap?-1!==F$T||(F$T=9987):-1!==F$T||(F$T=9729),-1!==F$Y||(F$Y=9729),F$y.texParameteri(3553,10241,F$T),F$y.texParameteri(3553,10240,F$Y),F$y.texParameteri(3553,10242,F$A),F$y.texParameteri(3553,10243,F$A),this.mipmap&&F$y.generateMipmap(3553)):(-1!==F$T||(F$T=9729),-1!==F$Y||(F$Y=9729),F$y.texParameteri(3553,10241,F$T),F$y.texParameteri(3553,10240,F$Y),F$y.texParameteri(3553,10242,33071),F$y.texParameteri(3553,10243,33071)),F$y.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&F$y.pixelStorei(F$y.UNPACK_ALIGNMENT,1),F$y.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&F$y.pixelStorei(F$y.UNPACK_ALIGNMENT,1),F$y.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:F$I=!0,F$y.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case F$_y.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$I=!0,F$y.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}F$y.pixelStorei(37441,!1),F$t&&F$k&&F$ey.bindTexture(F$y,F$t,F$k),this.uri||(this.uri=this._url),F$I?this.memorySize=this._image.length:F$X&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},F$j.recreateResource=function(){var F$y=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var F$j=this;this._image=new F$$.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(F$j._needReleaseAgain)return F$j._needReleaseAgain=!1,F$j._image.onload=null,void(F$j._image=null);F$j._allowMerageInAtlas&&F$j._enableMerageInAtlas?(F$y.memorySize=0,F$y._recreateLock=!1):F$j._createWebGlTexture(),F$j.completeCreate()},this._image.src=this._src}},F$j.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&F$_y.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},F$j.onresize=function(){this._w=this._image.width,this._h=this._image.height,F$a.enabled&&this._w<F$a.atlasLimitWidth&&this._h<F$a.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},F$j.clearAtlasSource=function(){this._image=null},F$k(0,F$j,"format",function(){return this._format}),F$k(0,F$j,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(F$y){this._$5__enableMerageInAtlas=F$y}),F$k(0,F$j,"mipmap",function(){return this._mipmap}),F$k(0,F$j,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),F$k(0,F$j,"atlasSource",function(){return this._image}),F$k(0,F$j,"onload",null,function(F$y){var F$j=this;this._onload=F$y,this._image&&(this._image.onload=null!=this._onload?function(){F$j.onresize(),F$j._onload()}:null)}),F$k(0,F$j,"onerror",null,function(F$y){var F$j=this;this._onerror=F$y,this._image&&(this._image.onerror=null!=this._onerror?function(){F$j._onerror()}:null)}),F$X}();F$v.__init([F$$y,F$g,F$Ny,F$My])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$y,F$j){"use strict";for(var F$t in Object.defineProperty(F$j,"__esModule",{value:!0}),Laya){var F$k=Laya[F$t];F$k&&F$k.__isclass&&(F$j[F$t]=F$k)}}),function(F$Y,F$y,F$k){F$k.un,F$k.uns;var F$T=F$k.static,F$A=F$k.class,F$X=F$k.getset,F$I=(F$k.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),F$W=laya.utils.ClassUtils,F$l=(laya.events.Event,laya.utils.HTMLChar),F$b=laya.net.Loader,F$D=(laya.display.Node,laya.maths.Rectangle),F$r=laya.renders.Render,F$$=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),F$z=laya.utils.Stat,F$K=laya.display.Text,F$V=laya.resource.Texture,F$n=laya.net.URL,F$C=laya.utils.Utils,F$M=function(){function F$$(){}return F$A(F$$,"laya.html.utils.HTMLParse"),F$$.parse=function(F$y,F$j,F$t){F$j=(F$j="<root>"+(F$j=F$j.replace(/<br>/g,"<br/>"))+"</root>").replace(F$$.spacePattern,F$$.char255);var F$k=F$C.parseXMLFromString(F$j);F$$._parseXML(F$y,F$k.childNodes[0].childNodes,F$t)},F$$._parseXML=function(F$y,F$j,F$t,F$k){var F$T=0,F$Y=0;if(F$j.join||F$j.item)for(F$T=0,F$Y=F$j.length;F$T<F$Y;++F$T)F$$._parseXML(F$y,F$j[F$T],F$t,F$k);else{var F$A,F$X,F$I;if(3==F$j.nodeType)return void(F$y instanceof laya.html.dom.HTMLDivElement?(null==F$j.nodeName&&(F$j.nodeName="#text"),F$X=F$j.nodeName.toLowerCase(),0<(F$I=F$j.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$A=F$W.getInstance(F$X))&&(F$y.addChild(F$A),F$A.innerTEXT=F$I.replace(F$$.char255AndOneSpacePattern," "))):0<(F$I=F$j.textContent.replace(/^\s+|\s+$/g,"")).length&&(F$y.innerTEXT=F$I.replace(F$$.char255AndOneSpacePattern," ")));if("#comment"==(F$X=F$j.nodeName.toLowerCase()))return;if(F$A=F$W.getInstance(F$X)){(F$A=F$y.addChild(F$A)).URI=F$t,F$A.href=F$k;var F$b=F$j.attributes;if(F$b&&0<F$b.length)for(F$T=0,F$Y=F$b.length;F$T<F$Y;++F$T){var F$D=F$b[F$T],F$l=F$D.nodeName,F$r=F$D.value;F$A._setAttributes(F$l,F$r)}F$$._parseXML(F$A,F$j.childNodes,F$t,F$A.href)}else F$$._parseXML(F$y,F$j.childNodes,F$t,F$k)}},F$$.char255=String.fromCharCode(255),F$$.spacePattern=/&nbsp;|&#160;/g,F$$.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),F$$}(),F$_=function(){function F$H(){}return F$A(F$H,"laya.html.utils.Layout"),F$H.later=function(F$y){null==F$H._will&&(F$H._will=[],F$k.stage.frameLoop(1,null,function(){if(!(F$H._will.length<1)){for(var F$y=0;F$y<F$H._will.length;F$y++)laya.html.utils.Layout.layout(F$H._will[F$y]);F$H._will.length=0}})),F$H._will.push(F$y)},F$H.layout=function(F$y){if(!F$y||!F$y._style)return null;if(0==(512&F$y._style._type))return null;F$y.getStyle()._type&=-513;var F$j=F$H._multiLineLayout(F$y);return F$r.isConchApp&&F$y.layaoutCallNative&&F$y.layaoutCallNative(),F$j},F$H._multiLineLayout=function(F$y){if(F$K.RightToLeft)return F$H._multiLineLayout2(F$y);var F$j=new Array;F$y._addChildsToLayout(F$j);var F$t,F$k,F$T,F$Y,F$A,F$X=0,F$I=F$j.length,F$b=F$y._getCSSStyle(),F$D=F$b.letterSpacing,F$l=F$b.leading,F$r=F$b.lineHeight,F$$=F$b._widthAuto()||!F$b.wordWrap,F$W=F$$?999999:F$y.width,F$z=(F$y.height,0),F$V=F$b.italic?F$b.fontSize/3:0,F$n=F$b._getAlign(),F$C=F$b._getValign(),F$M=0!==F$C||0!==F$n||0!=F$r,F$_=0,F$e=0,F$v=0,F$N=0,F$P=new Array,F$d=F$P[0]=new F$x,F$p=!1,F$f=!1;F$d.h=0,F$b.italic&&(F$W-=F$b.fontSize/3);var F$Q=0,F$m=!0;function F$U(){F$d.y=F$e,F$e+=F$d.h+F$l,0==F$d.h&&(F$e+=F$r),F$d.mWidth=F$Q,F$Q=0,F$d=new F$x,F$P.push(F$d),F$d.h=0,F$p=!(F$m=!(F$_=0))}for(F$X=0;F$X<F$I;F$X++)if(null!=(F$t=F$j[F$X]))if(F$m=!1,F$t instanceof laya.html.dom.HTMLBrElement)F$U(),F$d.y=F$e;else{if(F$t._isChar()){if((F$Y=F$t).isWord)F$p=F$f||"\n"===F$Y.char,F$d.wordStartIndex=F$d.elements.length;else{if(F$v=F$Y.width+F$Y.style.letterSpacin,0<F$P.length&&F$W<F$_+F$v&&0<F$d.wordStartIndex){var F$q;F$q=F$d.elements.length-F$d.wordStartIndex+1,F$d.elements.length=F$d.wordStartIndex,F$X-=F$q,F$U();continue}F$p=!1,F$Q+=F$Y.width}F$v=F$Y.width+F$D,F$N=F$Y.height,F$f=!1,(F$p=F$p||F$W<F$_+F$v)&&F$U(),F$d.minTextHeight=Math.min(F$d.minTextHeight,F$t.height)}else F$k=F$t._getCSSStyle(),F$A=F$t,F$T=F$k.padding,0===F$k._getCssFloat()||(F$M=!0),F$p=F$f||F$k.lineElement,F$v=F$A.width*F$A._style._tf.scaleX+F$T[1]+F$T[3]+F$D,F$N=F$A.height*F$A._style._tf.scaleY+F$T[0]+F$T[2],F$f=F$k.lineElement,(F$p=F$p||F$W<F$_+F$v&&F$k.wordWrap)&&F$U();F$d.elements.push(F$t),F$d.h=Math.max(F$d.h,F$N),F$t.x=F$_,F$t.y=F$e,F$_+=F$v,F$d.w=F$_-F$D,F$d.y=F$e,F$z=Math.max(F$_+F$V,F$z)}else F$m||(F$_+=F$H.DIV_ELEMENT_PADDING),F$d.wordStartIndex=F$d.elements.length;if(F$e=F$d.y+F$d.h,F$M){var F$w=0,F$S=F$W;for(F$$&&0<F$y.width&&(F$S=F$y.width),F$X=0,F$I=F$P.length;F$X<F$I;F$X++)F$P[F$X].updatePos(0,F$S,F$X,F$w,F$n,F$C,F$r),F$w+=Math.max(F$r,F$P[F$X].h+F$l);F$e=F$w}return F$$&&(F$y.width=F$z),F$e>F$y.height&&(F$y.height=F$e),[F$z,F$e]},F$H._multiLineLayout2=function(F$y){var F$j=new Array;F$y._addChildsToLayout(F$j);var F$t,F$k,F$T,F$Y,F$A,F$X=0,F$I=F$j.length,F$b=F$y._getCSSStyle(),F$D=F$b.letterSpacing,F$l=F$b.leading,F$r=F$b.lineHeight,F$$=F$b._widthAuto()||!F$b.wordWrap,F$W=F$$?999999:F$y.width,F$z=(F$y.height,0),F$V=F$b.italic?F$b.fontSize/3:0,F$n=2-F$b._getAlign(),F$C=F$b._getValign(),F$M=0!==F$C||0!=F$n||0!=F$r,F$_=0,F$e=0,F$v=0,F$N=0,F$P=new Array,F$d=F$P[0]=new F$x,F$p=!1,F$f=!1;F$d.h=0,F$b.italic&&(F$W-=F$b.fontSize/3);var F$Q=0,F$m=!0;function F$U(){F$d.y=F$e,F$e+=F$d.h+F$l,0==F$d.h&&(F$e+=F$r),F$d.mWidth=F$Q,F$Q=0,F$d=new F$x,F$P.push(F$d),F$d.h=0,F$p=!(F$m=!(F$_=0))}for(F$X=0;F$X<F$I;F$X++)if(null!=(F$t=F$j[F$X]))if(F$m=!1,F$t instanceof laya.html.dom.HTMLBrElement)F$U(),F$d.y=F$e;else{if(F$t._isChar()){if((F$Y=F$t).isWord)F$p=F$f||"\n"===F$Y.char,F$d.wordStartIndex=F$d.elements.length;else{if(0<F$P.length&&F$W<F$_+F$v&&0<F$d.wordStartIndex){var F$q;F$q=F$d.elements.length-F$d.wordStartIndex+1,F$d.elements.length=F$d.wordStartIndex,F$X-=F$q,F$U();continue}F$p=!1,F$Q+=F$Y.width}F$v=F$Y.width+F$D,F$N=F$Y.height,F$f=!1,(F$p=F$p||F$W<F$_+F$v)&&F$U(),F$d.minTextHeight=Math.min(F$d.minTextHeight,F$t.height)}else F$k=F$t._getCSSStyle(),F$A=F$t,F$T=F$k.padding,0===F$k._getCssFloat()||(F$M=!0),F$p=F$f||F$k.lineElement,F$v=F$A.width*F$A._style._tf.scaleX+F$T[1]+F$T[3]+F$D,F$N=F$A.height*F$A._style._tf.scaleY+F$T[0]+F$T[2],F$f=F$k.lineElement,(F$p=F$p||F$W<F$_+F$v&&F$k.wordWrap)&&F$U();F$d.elements.push(F$t),F$d.h=Math.max(F$d.h,F$N),F$t.x=F$_,F$t.y=F$e,F$_+=F$v,F$d.w=F$_-F$D,F$d.y=F$e,F$z=Math.max(F$_+F$V,F$z)}else F$m||(F$_+=F$H.DIV_ELEMENT_PADDING),F$d.wordStartIndex=F$d.elements.length;if(F$e=F$d.y+F$d.h,F$M){var F$w=0,F$S=F$W;for(F$X=0,F$I=F$P.length;F$X<F$I;F$X++)F$P[F$X].updatePos(0,F$S,F$X,F$w,F$n,F$C,F$r),F$w+=Math.max(F$r,F$P[F$X].h+F$l);F$e=F$w}for(F$$&&(F$y.width=F$z),F$e>F$y.height&&(F$y.height=F$e),F$X=0,F$I=F$P.length;F$X<F$I;F$X++)F$P[F$X].revertOrder(F$W);return[F$z,F$e]},F$H._will=null,F$H.DIV_ELEMENT_PADDING=0,F$H}(),F$x=function(){function F$y(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}F$A(F$y,"laya.html.utils.LayoutLine");var F$j=F$y.prototype;return F$j.updatePos=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){var F$X,F$I=0;0<this.elements.length&&(F$I=(F$X=this.elements[this.elements.length-1]).x+F$X.width-this.elements[0].x);var F$b=0,F$D=NaN;1===F$T&&(F$b=(F$j-F$I)/2),2===F$T&&(F$b=F$j-F$I),0===F$A||0!=F$Y||(F$Y=1);for(var F$l=0,F$r=this.elements.length;F$l<F$r;F$l++){var F$$=(F$X=this.elements[F$l])._getCSSStyle();switch(0!==F$b&&(F$X.x+=F$b),F$$._getValign()){case 0:F$X.y=F$k;break;case 1:var F$W=0;99999!=this.minTextHeight&&(F$W=this.minTextHeight);var F$z=(F$W+F$A)/2;F$z=Math.max(F$z,this.h),F$D=(laya.html.dom.HTMLImageElement,F$k+F$z-F$X.height),F$X.y=F$D;break;case 2:F$X.y=F$k+(F$A-F$X.height)}}},F$j.revertOrder=function(F$y){var F$j;if(0<this.elements.length){var F$t,F$k=0;for(F$t=this.elements.length,F$k=0;F$k<F$t;F$k++)(F$j=this.elements[F$k]).x=F$y-F$j.x-F$j.width}},F$y}(),F$e=function(F$t){function F$j(){this.URI=null,this._href=null,F$j.__super.call(this),this._text=F$j._EMPTYTEXT,this.setStyle(new F$I(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}F$A(F$j,"laya.html.dom.HTMLElement",F$t);var F$y=F$j.prototype;return F$y.layaoutCallNative=function(){var F$y=0;if(this._childs&&0<(F$y=this._childs.length))for(var F$j=0;F$j<F$y;F$j++)this._childs[F$j].layaoutCallNative&&this._childs[F$j].layaoutCallNative();var F$t=this._getWords();F$t?laya.html.dom.HTMLElement.fillWords(this,F$t,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},F$y.appendChild=function(F$y){return this.addChild(F$y)},F$y._getWords2=function(){var F$y=this._text.text;if(!F$y||0===F$y.length)return null;var F$j,F$t,F$k=0,F$T=0;if(this._text.drawWords)F$t=this._text.drawWords;else{for(F$T=(F$j=F$y.split(" ")).length-1,F$t=[],F$k=0;F$k<F$T;F$k++)F$t.push(F$j[F$k]," ");0<=F$T&&F$t.push(F$j[F$T]),this._text.drawWords=F$t}var F$Y,F$A=this._text.words;if(F$A&&F$A.length===F$t.length)return F$A;null===F$A&&(this._text.words=F$A=[]),F$A.length=F$t.length;var F$X=this.style,F$I=F$X.font;for(F$k=0,F$T=F$t.length;F$k<F$T;F$k++){F$Y=F$C.measureText(F$t[F$k],F$I);var F$b=F$A[F$k]=new F$l(F$t[F$k],F$Y.width,F$Y.height||F$X.fontSize,F$X);if(1<F$b.char.length&&(F$b.charNum=F$b.char),this.href){var F$D=new F$$;this.addChild(F$D),F$b.setSprite(F$D)}}return F$A},F$y._getWords=function(){if(!F$K.CharacterCache)return this._getWords2();var F$y=this._text.text;if(!F$y||0===F$y.length)return null;var F$j,F$t=this._text.words;if(F$t&&F$t.length===F$y.length)return F$t;null===F$t&&(this._text.words=F$t=[]),F$t.length=F$y.length;for(var F$k=this.style,F$T=F$k.font,F$Y=0,F$A=F$y.length;F$Y<F$A;F$Y++)if(F$j=F$C.measureText(F$y.charAt(F$Y),F$T)){var F$X=F$t[F$Y]=new F$l(F$y.charAt(F$Y),F$j.width,F$j.height||F$k.fontSize,F$k);if(this.href){var F$I=new F$$;this.addChild(F$I),F$X.setSprite(F$I)}}else console.warn("_getWords size is null"+F$y.charAt(F$Y),F$T);return F$t},F$y.showLinkSprite=function(){var F$y=this._text.words;if(F$y)for(var F$j,F$t,F$k=[],F$T=0;F$T<F$y.length;F$T++)F$t=F$y[F$T],(F$j=new F$$).graphics.drawRect(0,0,F$t.width,F$t.height,"#ff0000"),F$j.width=F$t.width,F$j.height=F$t.height,this.addChild(F$j),F$k.push(F$j)},F$y._layoutLater=function(){var F$y=this.style;512&F$y._type||(F$y.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&F$y.block?(F$_.later(this),F$y._type|=512):this.parent&&this.parent._layoutLater())},F$y._setAttributes=function(F$y,F$j){switch(F$y){case"style":return void this.style.cssText(F$j);case"class":return void(this.className=F$j)}F$t.prototype._setAttributes.call(this,F$y,F$j)},F$y.updateHref=function(){if(null!=this._href){var F$y=this._getWords();if(F$y)for(var F$j,F$t,F$k=0;F$k<F$y.length;F$k++)(F$t=(F$j=F$y[F$k]).getSprite())&&(F$t.size(F$j.width,F$j.height),F$t.on("click",this,this.onLinkHandler))}},F$y.onLinkHandler=function(F$y){switch(F$y.type){case"click":for(var F$j=this;F$j;)F$j.event("link",[this.href]),F$j=F$j.parent}},F$y.formatURL=function(F$y){return this.URI?F$n.formatURL(F$y,this.URI?this.URI.path:null):F$y},F$X(0,F$y,"href",function(){return this._href},function(F$y){null!=(this._href=F$y)&&(this._getCSSStyle().underLine=1,this.updateHref())}),F$X(0,F$y,"color",null,function(F$y){this.style.color=F$y}),F$X(0,F$y,"onClick",null,function(F$y){F$k._runScript("fn=function(event){"+F$y+";}"),this.on("click",this,void 0)}),F$X(0,F$y,"id",null,function(F$y){F$v.document.setElementById(F$y,this)}),F$X(0,F$y,"innerTEXT",function(){return this._text.text},function(F$y){this.text=F$y}),F$X(0,F$y,"style",function(){return this._style}),F$X(0,F$y,"text",function(){return this._text.text},function(F$y){this._text==F$j._EMPTYTEXT?this._text={text:F$y,words:null}:(this._text.text=F$y,this._text.words&&(this._text.words.length=0)),F$r.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),F$X(0,F$y,"parent",F$t.prototype._$get_parent,function(F$y){if(F$y instanceof laya.html.dom.HTMLElement){var F$j=F$y;this.URI||(this.URI=F$j.URI),this.style.inherit(F$j.style)}F$k.superSet(F$$,this,"parent",F$y)}),F$X(0,F$y,"className",null,function(F$y){this.style.attrs(F$v.document.styleSheets["."+F$y])}),F$j.fillWords=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$y.graphics.clear();for(var F$X=0,F$I=F$j.length;F$X<F$I;F$X++){var F$b=F$j[F$X];F$y.graphics.fillText(F$b.char,F$b.x+F$t,F$b.y+F$k,F$T,F$Y,"left",F$A)}},F$j._EMPTYTEXT={text:null,words:null},F$j}(F$$),F$j=(function(F$y){function F$j(){F$j.__super.call(this),this.style.lineElement=!0,this.style.block=!0}F$A(F$j,"laya.html.dom.HTMLBrElement",F$e)}(),function(F$y){function F$j(){this.contextHeight=NaN,this.contextWidth=NaN,F$j.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}F$A(F$j,"laya.html.dom.HTMLDivElement",F$y);var F$t=F$j.prototype;return F$t.appendHTML=function(F$y){F$M.parse(this,F$y,this.URI),this.layout()},F$t._addChildsToLayout=function(F$j){var F$y=this._getWords();if(null==F$y&&0==this._childs.length)return!1;F$y&&F$y.forEach(function(F$y){F$j.push(F$y)});for(var F$t=!0,F$k=0,F$T=this._childs.length;F$k<F$T;F$k++){var F$Y=this._childs[F$k];F$t?F$t=!1:F$j.push(null),F$Y._addToLayout(F$j)}return!0},F$t._addToLayout=function(F$y){this.layout()},F$t.layout=function(){if(this.style){this.style._type|=512;var F$y=F$_.layout(this);if(F$y){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new F$D);var F$j=this._$P.mHtmlBounds;F$j.x=F$j.y=0,F$j.width=this.contextWidth=F$y[0],F$j.height=this.contextHeight=F$y[1],this.setBounds(F$j)}}},F$X(0,F$t,"height",function(){return this._height?this._height:this.contextHeight},F$y.prototype._$set_height),F$X(0,F$t,"innerHTML",null,function(F$y){this.destroyChildren(),this.appendHTML(F$y)}),F$X(0,F$t,"width",function(){return this._width?this._width:this.contextWidth},function(F$y){var F$j=!1;F$j=0===F$y?F$y!=this._width:F$y!=this.width,F$k.superSet(F$e,this,"width",F$y),F$j&&this.layout()}),F$j}(F$e)),F$v=function(F$y){function F$j(){this.all=new Array,this.styleSheets=F$I.styleSheets,F$j.__super.call(this)}F$A(F$j,"laya.html.dom.HTMLDocument",F$e);var F$t=F$j.prototype;return F$t.getElementById=function(F$y){return this.all[F$y]},F$t.setElementById=function(F$y,F$j){this.all[F$y]=F$j},F$T(F$j,["document",function(){return this.document=new F$j}]),F$j}();(function(F$y){function F$j(){this._tex=null,this._url=null,this._renderArgs=[],F$j.__super.call(this),this.style.block=!0}F$A(F$j,"laya.html.dom.HTMLImageElement",F$e);var F$t=F$j.prototype;F$t._addToLayout=function(F$y){!this._style.absolute&&F$y.push(this)},F$t.render=function(F$y,F$j,F$t){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(F$z.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,F$y.ctx.drawTexture2(F$j,F$t,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},F$t.layaoutCallNative=function(){var F$y=0;if(this._childs&&0<(F$y=this._childs.length))for(var F$j=0;F$j<F$y;F$j++)this._childs[F$j].layaoutCallNative&&this._childs[F$j].layaoutCallNative()},F$X(0,F$t,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(F$y){this._width!==F$y&&(this._width=F$y,this._style.width=F$y,this.repaint())}),F$X(0,F$t,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(F$y){this._height!==F$y&&(this._height=F$y,this._style.height=F$y,this.repaint())}),F$t.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),F$b.clearCache(this,this._url),this._tex=null),F$e.prototype.destroy.call(this)},F$t.onloaded=function(){var F$y=this._style;F$y&&!F$y.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),F$y&&!F$y.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),F$r.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},F$t._loadImageComplete=function(F$y,F$j,F$t){if(!this._destroyed)if(null!=F$t)if(F$t instanceof ArrayBuffer){var F$k=new DataView(F$t);new laya.webgl.resource.WebGLImage(new Uint8Array(F$t,8),F$y,0,!1,F$k.getUint32(0),F$k.getUint32(4));this.onloaded()}else if(F$t instanceof F$V)F$b.imgMgrSet[F$y]=F$j,F$Y.imgMgrLock(F$y,F$b.imgMgrSet[F$y]),this._url=F$y,this._tex=F$t,F$b.keepCache(this,F$y),F$b.cacheRes(F$y,this._tex),this.onloaded();else{var F$T=-1!=F$y.indexOf(".png",F$y.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(F$t,F$y,F$T,!1,F$t.width,F$t.height);this.onloaded()}else this.event("error","Load image failed")},F$X(0,F$t,"src",null,function(F$y){(F$y=this.formatURL(F$y),this._url!=F$y)&&(null!=this._tex&&(F$b.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=F$y,(this._tex=F$b.getRes(F$y))?(F$b.keepCache(this,F$y),this.onloaded()):F$Y.imgMgrLoad(F$y,this._loadImageComplete.bind(this),2,!1))})})(),function(F$y){function F$j(){this.type=null,F$j.__super.call(this),this.visible=!1}F$A(F$j,"laya.html.dom.HTMLLinkElement",F$y);var F$t=F$j.prototype;F$t._onload=function(F$y){switch(this.type){case"text/css":F$I.parseCSS(F$y,this.URI)}},F$X(0,F$t,"href",F$y.prototype._$get_href,function(F$y){var F$j=this;F$y=this.formatURL(F$y),this.URI=new F$n(F$y);var F$t=new F$b;F$t.once("complete",null,function(F$y){F$j._onload(F$y)}),F$t.load(F$y,"text")}),F$j._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(F$e),function(F$y){function F$j(){F$j.__super.call(this),this.visible=!1}F$A(F$j,"laya.html.dom.HTMLStyleElement",F$y),F$X(0,F$j.prototype,"text",F$y.prototype._$get_text,function(F$y){F$I.parseCSS(F$y,null)})}(F$e),function(F$y){function F$j(){F$j.__super.call(this),this._getCSSStyle().valign="middle"}F$A(F$j,"laya.html.dom.HTMLIframeElement",F$y),F$X(0,F$j.prototype,"href",F$y.prototype._$get_href,function(F$t){var F$k=this;F$t=this.formatURL(F$t);var F$y=new F$b;F$y.once("complete",null,function(F$y){var F$j=F$k.URI;F$k.URI=new F$n(F$t),F$k.innerHTML=F$y,!F$j||(F$k.URI=F$j)}),F$y.load(F$t,"text")})}(F$j)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$y,F$j){"use strict";for(var F$t in Object.defineProperty(F$j,"__esModule",{value:!0}),Laya){var F$k=Laya[F$t];F$k&&F$k.__isclass&&(F$j[F$t]=F$k)}}),function(F$T,F$y,F$z){F$z.un,F$z.uns;var F$k=F$z.static,F$Y=F$z.class,F$A=F$z.getset,F$t=(F$z.__newvec,laya.display.Animation),F$V=(laya.utils.Browser,laya.utils.ClassUtils),F$X=laya.filters.ColorFilter,F$I=laya.utils.Ease,F$b=laya.events.Event,F$D=(laya.events.EventDispatcher,laya.display.css.Font),F$l=laya.display.FrameAnimation,F$j=laya.display.Graphics,F$r=laya.utils.Handler,F$$=laya.display.Input,F$C=laya.net.Loader,F$W=(laya.display.Node,laya.maths.Point),F$n=laya.maths.Rectangle,F$M=laya.renders.Render,F$_=laya.display.Sprite,F$e=laya.display.Text,F$v=laya.resource.Texture,F$N=laya.utils.Tween,F$P=laya.utils.Utils,F$d=laya.utils.WeakObject;F$z.interface("laya.ui.IItem"),F$z.interface("laya.ui.ISelect"),F$z.interface("laya.ui.IRender"),F$z.interface("laya.ui.IComponent"),F$z.interface("laya.ui.IBox","IComponent");var F$p=function(){function F$y(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return F$Y(F$y,"laya.ui.LayoutStyle"),F$k(F$y,["EMPTY",function(){return this.EMPTY=new F$y}]),F$y}(),F$f=function(){function F$y(){}return F$Y(F$y,"laya.ui.Styles"),F$y.labelColor="#000000",F$y.buttonStateNum=3,F$y.scrollBarMinNum=15,F$y.scrollBarDelayTime=500,F$k(F$y,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),F$y}(),F$Q=function(){function F$T(){}return F$Y(F$T,"laya.ui.UIUtils"),F$T.fillArray=function(F$y,F$j,F$t){var F$k=F$y.concat();if(F$j)for(var F$T=F$j.split(","),F$Y=0,F$A=Math.min(F$k.length,F$T.length);F$Y<F$A;F$Y++){var F$X=F$T[F$Y];F$k[F$Y]="true"==F$X||"false"!=F$X&&F$X,null!=F$t&&(F$k[F$Y]=F$t(F$X))}return F$k},F$T.toColor=function(F$y){return F$P.toHexColor(F$y)},F$T.gray=function(F$y,F$j){void 0===F$j&&(F$j=!0),F$j?F$T.addFilter(F$y,F$T.grayFilter):F$T.clearFilter(F$y,F$X)},F$T.addFilter=function(F$y,F$j){var F$t=F$y.filters||[];F$t.push(F$j),F$y.filters=F$t},F$T.clearFilter=function(F$y,F$j){var F$t=F$y.filters;if(null!=F$t&&0<F$t.length){for(var F$k=F$t.length-1;-1<F$k;F$k--){var F$T=F$t[F$k];F$z.__typeof(F$T,F$j)&&F$t.splice(F$k,1)}F$y.filters=F$t}},F$T._getReplaceStr=function(F$y){return F$T.escapeSequence[F$y]},F$T.adptString=function(F$y){return F$y.replace(/\\(\w)/g,F$T._getReplaceStr)},F$T.getBindFun=function(F$y){var F$j=F$T._funMap.get(F$y);if(null==F$j){var F$t='"'+F$y+'"',F$k="(function(data){if(data==null)return;with(data){try{\nreturn "+(F$t=F$t.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";F$j=F$z._runScript(F$k),F$T._funMap.set(F$y,F$j)}return F$j},F$k(F$T,["grayFilter",function(){return this.grayFilter=new F$X([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new F$d}]),F$T}(),F$m=function(){function F$y(){}return F$Y(F$y,"UIConfig"),F$y.touchScrollEnable=!0,F$y.mouseWheelEnable=!0,F$y.showButtons=!0,F$y.popupBgColor="#000000",F$y.popupBgAlpha=.5,F$y.closeDialogOnSide=!0,F$y}(),F$U=function(F$t){function F$n(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,F$n.__super.call(this),this._weakKeys=[]}F$Y(F$n,"laya.ui.AutoBitmap",F$t);var F$y=F$n.prototype;return F$y.destroy=function(){if(F$C.clearObject(this,this._weakKey),this._weakKeys){for(var F$y=0,F$j=this._weakKeys.length;F$y<F$j;++F$y)F$C.clearObject(this,this._weakKeys[F$y]);this._weakKeys=null}F$t.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},F$y._setChanged=function(){this._isChanged||(this._isChanged=!0,F$z.timer.callLater(this,this.changeSource))},F$y.changeSource=function(){this._isChanged=!1;var F$y=this._source;if(F$y&&F$y.bitmap){var F$j=this.width,F$t=this.height,F$k=this._sizeGrid,F$T=F$y.sourceWidth,F$Y=F$y.sourceHeight;if(!F$k||F$T===F$j&&F$Y===F$t)this.cleanByTexture(F$y,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,F$j,F$t);else{F$C.clearObject(this,this._weakKey),F$y.$_GID||(F$y.$_GID=F$P.getGID());var F$A=F$y.$_GID+"."+F$j+"."+F$t+"."+F$k.join("."),F$X=F$C.findObject(F$A);if(F$P.isOKCmdList(F$X))return this._weakKey=F$A,F$C.keepObject(this,this._weakKey),void(this.cmds=F$X);this.clear();var F$I,F$b,F$D=F$k[0],F$l=F$k[1],F$r=F$k[2],F$$=F$k[3],F$W=F$k[4],F$z=!1;if(F$j==F$T&&(F$$=F$l=0),F$t==F$Y&&(F$D=F$r=0),F$j<F$$+F$l){var F$V=F$j;F$z=!0,F$j=F$$+F$l,this.save(),this.clipRect(0,0,F$V,F$t)}F$$&&F$D&&(F$I=F$n.getTexture(F$y,0,0,F$$,F$D),F$b=this._weakKeys[0],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[0]=F$I.weakKey),this.drawTexture(F$I,0,0,F$$,F$D)):(F$C.clearObject(this,F$b),this._weakKeys[0]="")),F$l&&F$D&&(F$I=F$n.getTexture(F$y,F$T-F$l,0,F$l,F$D),F$b=this._weakKeys[1],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[1]=F$I.weakKey),this.drawTexture(F$I,F$j-F$l,0,F$l,F$D)):(F$C.clearObject(this,F$b),this._weakKeys[1]="")),F$$&&F$r&&(F$I=F$n.getTexture(F$y,0,F$Y-F$r,F$$,F$r),F$b=this._weakKeys[2],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[2]=F$I.weakKey),this.drawTexture(F$I,0,F$t-F$r,F$$,F$r)):(F$C.clearObject(this,F$b),this._weakKeys[2]="")),F$l&&F$r&&(F$I=F$n.getTexture(F$y,F$T-F$l,F$Y-F$r,F$l,F$r),F$b=this._weakKeys[3],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[3]=F$I.weakKey),this.drawTexture(F$I,F$j-F$l,F$t-F$r,F$l,F$r)):(F$C.clearObject(this,F$b),this._weakKeys[3]="")),F$D&&(F$I=F$n.getTexture(F$y,F$$,0,F$T-F$$-F$l,F$D),F$b=this._weakKeys[4],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[4]=F$I.weakKey),this.drawBitmap(F$W,F$I,F$$,0,F$j-F$$-F$l,F$D)):(F$C.clearObject(this,F$b),this._weakKeys[4]="")),F$r&&(F$I=F$n.getTexture(F$y,F$$,F$Y-F$r,F$T-F$$-F$l,F$r),F$b=this._weakKeys[5],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[5]=F$I.weakKey),this.drawBitmap(F$W,F$I,F$$,F$t-F$r,F$j-F$$-F$l,F$r)):(F$C.clearObject(this,F$b),this._weakKeys[5]="")),F$$&&(F$I=F$n.getTexture(F$y,0,F$D,F$$,F$Y-F$D-F$r),F$b=this._weakKeys[6],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[6]=F$I.weakKey),this.drawBitmap(F$W,F$I,0,F$D,F$$,F$t-F$D-F$r)):(F$C.clearObject(this,F$b),this._weakKeys[6]="")),F$l&&(F$I=F$n.getTexture(F$y,F$T-F$l,F$D,F$l,F$Y-F$D-F$r),F$b=this._weakKeys[7],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[7]=F$I.weakKey),this.drawBitmap(F$W,F$I,F$j-F$l,F$D,F$l,F$t-F$D-F$r)):(F$C.clearObject(this,F$b),this._weakKeys[7]="")),F$I=F$n.getTexture(F$y,F$$,F$D,F$T-F$$-F$l,F$Y-F$D-F$r),F$b=this._weakKeys[8],F$I?(F$b!=F$I.weakKey&&(F$C.clearObject(this,F$b),F$C.keepObject(this,F$I.weakKey),this._weakKeys[8]=F$I.weakKey),this.drawBitmap(F$W,F$I,F$$,F$D,F$j-F$$-F$l,F$t-F$D-F$r)):(F$C.clearObject(this,F$b),this._weakKeys[8]=""),F$z&&this.restore(),this.autoCacheCmd&&!F$M.isConchApp&&(F$C.saveObject(F$A,this.cmds,null),this._weakKey=F$A,F$C.keepObject(this,this._weakKey))}this._repaint()}},F$y.drawBitmap=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=0),F$T<.1||F$Y<.1||(!F$y||F$j.width==F$T&&F$j.height==F$Y?this.drawTexture(F$j,F$t,F$k,F$T,F$Y):this.fillTexture(F$j,F$t,F$k,F$T,F$Y))},F$y.clear=function(F$y){void 0===F$y&&(F$y=!0),F$t.prototype.clear.call(this,!1)},F$A(0,F$y,"sizeGrid",function(){return this._sizeGrid},function(F$y){this._sizeGrid=F$y,this._setChanged()}),F$A(0,F$y,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(F$y){this._width!=F$y&&(this._width=F$y,this._setChanged())}),F$A(0,F$y,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(F$y){this._height!=F$y&&(this._height=F$y,this._setChanged())}),F$A(0,F$y,"source",function(){return this._source},function(F$y){F$y?(this._source=F$y,this._setChanged()):(this._source=null,this.clear())}),F$n.getTexture=function(F$y,F$j,F$t,F$k,F$T){F$k<=0&&(F$k=1),F$T<=0&&(F$T=1),F$y.$_GID||(F$y.$_GID=F$P.getGID());var F$Y=F$y.$_GID+"."+F$j+"."+F$t+"."+F$k+"."+F$T,F$A=F$C.findObject(F$Y);if((!F$A||!F$A.source)&&(F$A=F$v.createFromTexture(F$y,F$j,F$t,F$k,F$T))){if(F$y.alphaTexture){var F$X=F$y.width/F$y.alphaTexture.width;F$A.alphaTexture=F$v.createFromTexture(F$y.alphaTexture,F$j/F$X,F$t/F$X,F$k/F$X,F$T/F$X)}F$C.saveObject(F$Y,F$A),F$A.weakKey=F$Y}return F$A},F$n}(F$j),F$q=(function(F$y){function F$j(){F$j.__super.call(this)}F$Y(F$j,"laya.ui.UIEvent",F$b),F$j.SHOW_TIP="showtip",F$j.HIDE_TIP="hidetip"}(),function(F$j){function F$y(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,F$y.__super.call(this),this._layout=F$p.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}F$Y(F$y,"laya.ui.Component",F$j);var F$t=F$y.prototype;return F$z.imps(F$t,{"laya.ui.IComponent":!0}),F$t.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},F$t.preinitialize=function(){},F$t.createChildren=function(){},F$t.initialize=function(){},F$t.callLater=function(F$y,F$j){F$z.timer.callLater(this,F$y,F$j)},F$t.runCallLater=function(F$y){F$z.timer.runCallLater(this,F$y)},F$t.commitMeasure=function(){},F$t.changeSize=function(){this.event("resize")},F$t.getLayout=function(){return this._layout===F$p.EMPTY&&(this._layout=new F$p),this._layout},F$t._setLayoutEnabled=function(F$y){this._layout&&this._layout.enable!=F$y&&(this._layout.enable=F$y,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},F$t.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},F$t.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},F$t.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},F$t.resetLayoutX=function(){var F$y=this._layout;if(isNaN(F$y.anchorX)||(this.pivotX=F$y.anchorX*this.width),this.layoutEnabled){var F$j=this.parent;F$j&&(isNaN(F$y.centerX)?isNaN(F$y.left)?isNaN(F$y.right)||(this.x=Math.round(F$j.width-this.displayWidth-F$y.right+this.pivotX*this.scaleX)):(this.x=Math.round(F$y.left+this.pivotX*this.scaleX),isNaN(F$y.right)||(this.width=(F$j._width-F$y.left-F$y.right)/(this.scaleX||.01))):this.x=Math.round(.5*(F$j.width-this.displayWidth)+F$y.centerX+this.pivotX*this.scaleX))}},F$t.resetLayoutY=function(){var F$y=this._layout;if(isNaN(F$y.anchorY)||(this.pivotY=F$y.anchorY*this.height),this.layoutEnabled){var F$j=this.parent;F$j&&(isNaN(F$y.centerY)?isNaN(F$y.top)?isNaN(F$y.bottom)||(this.y=Math.round(F$j.height-this.displayHeight-F$y.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(F$y.top+this.pivotY*this.scaleY),isNaN(F$y.bottom)||(this.height=(F$j._height-F$y.top-F$y.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(F$j.height-this.displayHeight)+F$y.centerY+this.pivotY*this.scaleY))}},F$t.onMouseOver=function(F$y){F$z.stage.event("showtip",this._toolTip)},F$t.onMouseOut=function(F$y){F$z.stage.event("hidetip",this._toolTip)},F$A(0,F$t,"displayWidth",function(){return this.width*this.scaleX}),F$A(0,F$t,"width",function(){return this._width?this._width:this.measureWidth},function(F$y){this._width!=F$y&&(this._width=F$y,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),F$A(0,F$t,"measureWidth",function(){var F$y=0;this.commitMeasure();for(var F$j=this.numChildren-1;-1<F$j;F$j--){var F$t=this.getChildAt(F$j);F$t.visible&&(F$y=Math.max(F$t.x+F$t.width*F$t.scaleX,F$y))}return F$y}),F$A(0,F$t,"displayHeight",function(){return this.height*this.scaleY}),F$A(0,F$t,"height",function(){return this._height?this._height:this.measureHeight},function(F$y){this._height!=F$y&&(this._height=F$y,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),F$A(0,F$t,"dataSource",function(){return this._dataSource},function(F$y){for(var F$j in this._dataSource=F$y,this._dataSource)this.hasOwnProperty(F$j)&&"function"!=typeof this[F$j]&&(this[F$j]=this._dataSource[F$j])}),F$A(0,F$t,"scaleY",F$j.prototype._$get_scaleY,function(F$y){F$z.superGet(F$_,this,"scaleY")!=F$y&&(F$z.superSet(F$_,this,"scaleY",F$y),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),F$A(0,F$t,"measureHeight",function(){var F$y=0;this.commitMeasure();for(var F$j=this.numChildren-1;-1<F$j;F$j--){var F$t=this.getChildAt(F$j);F$t.visible&&(F$y=Math.max(F$t.y+F$t.height*F$t.scaleY,F$y))}return F$y}),F$A(0,F$t,"scaleX",F$j.prototype._$get_scaleX,function(F$y){F$z.superGet(F$_,this,"scaleX")!=F$y&&(F$z.superSet(F$_,this,"scaleX",F$y),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),F$A(0,F$t,"top",function(){return this._layout.top},function(F$y){F$y!=this._layout.top&&(this.getLayout().top=F$y,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$A(0,F$t,"bottom",function(){return this._layout.bottom},function(F$y){F$y!=this._layout.bottom&&(this.getLayout().bottom=F$y,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$A(0,F$t,"left",function(){return this._layout.left},function(F$y){F$y!=this._layout.left&&(this.getLayout().left=F$y,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$A(0,F$t,"right",function(){return this._layout.right},function(F$y){F$y!=this._layout.right&&(this.getLayout().right=F$y,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$A(0,F$t,"centerX",function(){return this._layout.centerX},function(F$y){F$y!=this._layout.centerX&&(this.getLayout().centerX=F$y,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$A(0,F$t,"centerY",function(){return this._layout.centerY},function(F$y){F$y!=this._layout.centerY&&(this.getLayout().centerY=F$y,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$A(0,F$t,"anchorX",function(){return this._layout.anchorX},function(F$y){F$y!=this._layout.anchorX&&(this.getLayout().anchorX=F$y,this._setLayoutEnabled(!0)),this.resetLayoutX()}),F$A(0,F$t,"anchorY",function(){return this._layout.anchorY},function(F$y){F$y!=this._layout.anchorY&&(this.getLayout().anchorY=F$y,this._setLayoutEnabled(!0)),this.resetLayoutY()}),F$A(0,F$t,"tag",function(){return this._tag},function(F$y){this._tag=F$y}),F$A(0,F$t,"toolTip",function(){return this._toolTip},function(F$y){this._toolTip!=F$y&&(null!=(this._toolTip=F$y)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),F$A(0,F$t,"comXml",function(){return this._comXml},function(F$y){this._comXml=F$y}),F$A(0,F$t,"gray",function(){return this._gray},function(F$y){F$y!==this._gray&&(this._gray=F$y,F$Q.gray(this,F$y))}),F$A(0,F$t,"disabled",function(){return this._disabled},function(F$y){F$y!==this._disabled&&(this.gray=this._disabled=F$y,this.mouseEnabled=!F$y)}),F$y}(F$_)),F$w=function(F$y){function F$j(){this.lockLayer=null,this.popupEffect=function(F$y){F$y.scale(1,1),F$N.from(F$y,{x:F$z.stage.width/2,y:F$z.stage.height/2,scaleX:0,scaleY:0},300,F$I.backOut,F$r.create(this,this.doOpen,[F$y]))},this.closeEffect=function(F$y,F$j){F$N.to(F$y,{x:F$z.stage.width/2,y:F$z.stage.height/2,scaleX:0,scaleY:0},300,F$I.strongOut,F$r.create(this,this.doClose,[F$y,F$j]))},F$j.__super.call(this),this.maskLayer=new F$_,this.popupEffectHandler=F$r.create(this,this.popupEffect,null,!1),this.closeEffectHandler=F$r.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,F$z.stage.addChild(this),F$z.stage.on("resize",this,this._onResize),F$m.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}F$Y(F$j,"laya.ui.DialogManager",F$_);var F$t=F$j.prototype;return F$t._closeOnSide=function(){var F$y=this.getChildAt(this.numChildren-1);F$y instanceof laya.ui.Dialog&&F$y.close("side")},F$t.setLockView=function(F$y){this.lockLayer||(this.lockLayer=new F$S,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(F$z.stage.width,F$z.stage.height)),this.lockLayer.removeChildren(),F$y&&(F$y.centerX=F$y.centerY=0,this.lockLayer.addChild(F$y))},F$t._onResize=function(F$y){var F$j=this.maskLayer.width=F$z.stage.width,F$t=this.maskLayer.height=F$z.stage.height;this.lockLayer&&this.lockLayer.size(F$j,F$t),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,F$j,F$t,F$m.popupBgColor),this.maskLayer.alpha=F$m.popupBgAlpha;for(var F$k=this.numChildren-1;-1<F$k;F$k--){var F$T=this.getChildAt(F$k);F$T.popupCenter&&this._centerDialog(F$T)}},F$t._centerDialog=function(F$y){F$y.x=Math.round((F$z.stage.width-F$y.width>>1)+F$y.pivotX),F$y.y=Math.round((F$z.stage.height-F$y.height>>1)+F$y.pivotY)},F$t.open=function(F$y,F$j,F$t){void 0===F$j&&(F$j=!1),void 0===F$t&&(F$t=!1),F$j&&this._closeAll(),F$y.popupCenter&&this._centerDialog(F$y),this.addChild(F$y),(F$y.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),F$t&&null!=F$y.popupEffect?F$y.popupEffect.runWith(F$y):this.doOpen(F$y),this.event("open")},F$t.doOpen=function(F$y){F$y.onOpened()},F$t.lock=function(F$y){this.lockLayer&&(F$y?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},F$t.close=function(F$y,F$j,F$t){void 0===F$t&&(F$t=!1),F$t&&null!=F$y.closeEffect?F$y.closeEffect.runWith([F$y,F$j]):this.doClose(F$y,F$j),this.event("close")},F$t.doClose=function(F$y,F$j){F$y.removeSelf(),F$y.isModal&&this._checkMask(),F$y.closeHandler&&F$y.closeHandler.runWith(F$j),F$y.onClosed(F$j)},F$t.closeAll=function(){this._closeAll(),this.event("close")},F$t._closeAll=function(){for(var F$y=this.numChildren-1;-1<F$y;F$y--){var F$j=this.getChildAt(F$y);F$j&&null!=F$j.close&&this.doClose(F$j)}},F$t.getDialogsByGroup=function(F$y){for(var F$j=[],F$t=this.numChildren-1;-1<F$t;F$t--){var F$k=this.getChildAt(F$t);F$k&&F$k.group===F$y&&F$j.push(F$k)}return F$j},F$t.closeByGroup=function(F$y){for(var F$j=[],F$t=this.numChildren-1;-1<F$t;F$t--){var F$k=this.getChildAt(F$t);F$k&&F$k.group===F$y&&(F$k.close(),F$j.push(F$k))}return F$j},F$t._checkMask=function(){this.maskLayer.removeSelf();for(var F$y=this.numChildren-1;-1<F$y;F$y--){var F$j=this.getChildAt(F$y);if(F$j&&F$j.isModal)return void this.addChildAt(this.maskLayer,F$y)}},F$j}(),F$S=function(F$y){function F$j(){F$j.__super.call(this)}F$Y(F$j,"laya.ui.Box",F$y);var F$t=F$j.prototype;return F$z.imps(F$t,{"laya.ui.IBox":!0}),F$A(0,F$t,"dataSource",F$y.prototype._$get_dataSource,function(F$y){for(var F$j in this._dataSource=F$y){var F$t=this.getChildByName(F$j);F$t?F$t.dataSource=F$y[F$j]:this.hasOwnProperty(F$j)&&"function"!=typeof this[F$j]&&(this[F$j]=F$y[F$j])}}),F$j}(F$q),F$H=function(F$j){function F$t(F$y,F$j){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,F$t.__super.call(this),this._labelColors=F$f.buttonLabelColors,this._stateNum=F$f.buttonStateNum,void 0===F$j&&(F$j=""),this.skin=F$y,this.label=F$j}F$Y(F$t,"laya.ui.Button",F$j);var F$y=F$t.prototype;return F$z.imps(F$y,{"laya.ui.ISelect":!0}),F$y.destroy=function(F$y){this.clearEvent(),F$C.clearCache(this,this._skin),F$C.clearObject(this,this._weakKey),void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(F$y),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},F$y.clearEvent=function(){this._skin&&F$T.atalsNotify&&F$T.atalsNotify.off(this._skin,this,this._setBtnSource)},F$y.createChildren=function(){this.graphics=this._bitmap=new F$U},F$y.createText=function(){this._text||(this._text=new F$e,this._text.overflow=F$e.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},F$y.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},F$y.onMouse=function(F$y){if(!1!==this.toggle||!this._selected)return"click"===F$y.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=F$t.stateMap[F$y.type]))},F$y.changeClips=function(){var F$y=F$C.getRes(this._skin);if(F$y)if(this._skin&&""!=this._skin){F$C.clearObject(this,this._weakKey);var F$j=F$y.sourceWidth,F$t=F$y.sourceHeight/this._stateNum;F$y.$_GID||(F$y.$_GID=F$P.getGID());var F$k=F$y.$_GID+"-"+this._stateNum,F$T=F$C.findObject(F$k);if(F$P.isOkTextureList(F$T)||(F$T=null),F$T)this._weakKey=F$k,F$C.keepObject(this,this._weakKey),this._sources=F$T;else{if(this._sources=[],1===this._stateNum)this._sources.push(F$y);else for(var F$Y=0;F$Y<this._stateNum;F$Y++){var F$A=F$v.createFromTexture(F$y,0,F$t*F$Y,F$j,F$t);if(F$y.alphaTexture){var F$X=F$y.width/F$y.alphaTexture.width;F$A.alphaTexture=F$v.createFromTexture(F$y.alphaTexture,0/F$X,F$t*F$Y/F$X,F$j/F$X,F$t/F$X)}this._sources.push(F$A)}F$C.saveObject(F$k,this._sources),this._weakKey=F$k,F$C.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||F$j,this._bitmap.height=this._height||F$t,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=F$j)}else console.warn("lose skin ",this._skin,this.name,this.__className)},F$y.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var F$y=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[F$y]),this.label&&(this._text.color=this._labelColors[F$y],this._strokeColors&&(this._text.strokeColor=this._strokeColors[F$y]))},F$y._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},F$A(0,F$y,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(F$y){this.createText(),this._text.strokeColor=F$y}),F$A(0,F$y,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),F$A(0,F$y,"skin",function(){return this._skin},function(F$y){if(this._skin!=F$y)if(this.clearEvent(),F$C.clearCache(this,this._skin),this._skin=F$y,F$C.keepCache(this,this._skin),F$C.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var F$j=F$T.resAtalsObj&&F$T.resAtalsObj[this._skin];F$j?(F$T.atalsNotify&&F$T.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=F$j.sourceW),0==this.height&&(this.height=F$j.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),F$y._setBtnSource=function(F$y,F$j){F$y===this._skin&&F$j&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},F$A(0,F$y,"state",function(){return this._state},function(F$y){this._state!=F$y&&(this._state=F$y,this._setStateChanged())}),F$A(0,F$y,"text",function(){return this.createText(),this._text}),F$A(0,F$y,"stateNum",function(){return this._stateNum},function(F$y){"string"==typeof F$y&&(F$y=parseInt(F$y)),this._stateNum!=F$y&&(this._stateNum=F$y<1?1:3<F$y?3:F$y,this.callLater(this.changeClips))}),F$A(0,F$y,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(F$y){this._strokeColors=F$Q.fillArray(F$f.buttonLabelColors,F$y,String),this._setStateChanged()}),F$A(0,F$y,"labelColors",function(){return this._labelColors.join(",")},function(F$y){this._labelColors=F$Q.fillArray(F$f.buttonLabelColors,F$y,String),this._setStateChanged()}),F$A(0,F$y,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),F$A(0,F$y,"label",function(){return this._text?this._text.text:null},function(F$y){(this._text||F$y)&&(this.createText(),this._text.text!=F$y&&(F$y&&!this._text.parent&&this.addChild(this._text),this._text.text=(F$y+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),F$A(0,F$y,"selected",function(){return this._selected},function(F$y){this._selected!=F$y&&(this._selected=F$y,this.state=this._selected?2:0,this.event("change"))}),F$A(0,F$y,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(F$y){this.createText(),this._text.padding=F$Q.fillArray(F$f.labelPadding,F$y,Number)}),F$A(0,F$y,"labelSize",function(){return this.createText(),this._text.fontSize},function(F$y){this.createText(),this._text.fontSize=F$y}),F$A(0,F$y,"labelStroke",function(){return this.createText(),this._text.stroke},function(F$y){this.createText(),this._text.stroke=F$y}),F$A(0,F$y,"labelBold",function(){return this.createText(),this._text.bold},function(F$y){this.createText(),this._text.bold=F$y}),F$A(0,F$y,"labelFont",function(){return this.createText(),this._text.font},function(F$y){this.createText(),this._text.font=F$y}),F$A(0,F$y,"labelAlign",function(){return this.createText(),this._text.align},function(F$y){this.createText(),this._text.align=F$y}),F$A(0,F$y,"clickHandler",function(){return this._clickHandler},function(F$y){this._clickHandler=F$y}),F$A(0,F$y,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$y){this._bitmap.sizeGrid=F$Q.fillArray(F$f.defaultSizeGrid,F$y,Number)}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$q,this,"width",F$y),this._autoSize&&(this._bitmap.width=F$y,this._text&&(this._text.width=F$y))}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$q,this,"height",F$y),this._autoSize&&(this._bitmap.height=F$y,this._text&&(this._text.height=F$y))}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)||"string"==typeof F$y?this.label=F$y+"":F$z.superSet(F$q,this,"dataSource",F$y)}),F$A(0,F$y,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(F$y){this._bitmap._offset=F$y?F$Q.fillArray([1,1],F$y,Number):[]}),F$k(F$t,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),F$t}(F$q),F$K=function(F$j){function F$k(F$y,F$j,F$t){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,F$k.__super.call(this),void 0===F$j&&(F$j=1),void 0===F$t&&(F$t=1),this._clipX=F$j,this._clipY=F$t,this.skin=F$y}F$Y(F$k,"laya.ui.Clip",F$j);var F$y=F$k.prototype;return F$y.destroy=function(F$y){this.clearEvent(),this.clearLoad(),F$C.clearCache(this,this._skin),F$C.clearObject(this,this._weakKey),void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},F$y.dispose=function(){this.destroy(!0),F$z.loader.clearRes(this._skin)},F$y.createChildren=function(){this.graphics=this._bitmap=new F$U},F$y._onDisplay=function(F$y){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},F$y.changeClip=function(){if(this._clipChanged=!1,this._skin){var F$y=F$C.getRes(this._skin);if(F$y)this.loadComplete(this._skin,F$y);else{if(F$T.resAtalsObj&&F$T.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=F$r.create(this,this.loadComplete,[this._skin]),this._progress=null,F$z.loader.load(this._skin,this._complete,this._progress)}}},F$y.loadComplete=function(F$y,F$j){if(F$y===this._skin&&F$j){F$C.clearObject(this,this._weakKey);var F$t=this._clipWidth||Math.ceil(F$j.sourceWidth/this._clipX),F$k=this._clipHeight||Math.ceil(F$j.sourceHeight/this._clipY),F$T=this._skin+F$t+F$k,F$Y=F$C.findObject(F$T);if(F$P.isOkTextureList(F$Y)||(F$Y=null),F$Y)this._weakKey=F$T,F$C.keepObject(this,this._weakKey),this._sources=F$Y;else{this._sources=[];for(var F$A=0;F$A<this._clipY;F$A++)for(var F$X=0;F$X<this._clipX;F$X++){var F$I=F$v.createFromTexture(F$j,F$t*F$X,F$k*F$A,F$t,F$k);if(F$j.alphaTexture){var F$b=F$j.width/F$j.alphaTexture.width;F$I.alphaTexture=F$v.createFromTexture(F$j.alphaTexture,F$t*F$X/F$b,F$k*F$A/F$b,F$t/F$b,F$k/F$b)}this._sources.push(F$I)}F$C.saveObject(F$T,this._sources),this._weakKey=F$T,F$C.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},F$y.play=function(F$y,F$j){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=-1),this._isPlaying=!0,this.index=F$y,this._toIndex=F$j,this._index++,F$z.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},F$y._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},F$y.stop=function(){this._isPlaying=!1,F$z.timer.clear(this,this._loop),this.event("complete")},F$y._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},F$A(0,F$y,"interval",function(){return this._interval},function(F$y){this._interval!=F$y&&(this._interval=F$y,this._isPlaying&&this.play())}),F$y.clearEvent=function(){this._skin&&F$T.atalsNotify&&F$T.atalsNotify.off(this._skin,this,this._setBtnSource)},F$y.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$z.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$A(0,F$y,"skin",function(){return this._skin},function(F$y){if(this._skin!=F$y)if(this.clearLoad(),this.clearEvent(),F$C.clearCache(this,this._skin),this._skin=F$y){F$C.keepCache(this,this._skin);var F$j=F$C.getRes(F$y),F$t=F$T.resAtalsObj&&F$T.resAtalsObj[this._skin];!F$j&&F$t?F$T.atalsNotify&&F$T.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),F$y._setBtnSource=function(F$y,F$j){F$y===this._skin&&F$j&&(this.loadComplete(F$y,F$j),this.clearEvent())},F$A(0,F$y,"sources",function(){return this._sources},function(F$y){this._sources=F$y,this.index=this._index,this.event("loaded")}),F$A(0,F$y,"clipX",function(){return this._clipX},function(F$y){this._clipX=F$y||1,this._setClipChanged()}),F$A(0,F$y,"clipY",function(){return this._clipY},function(F$y){this._clipY=F$y||1,this._setClipChanged()}),F$A(0,F$y,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),F$A(0,F$y,"clipWidth",function(){return this._clipWidth},function(F$y){this._clipWidth=F$y,this._setClipChanged()}),F$A(0,F$y,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$y){this._bitmap.sizeGrid=F$Q.fillArray(F$f.defaultSizeGrid,F$y,Number)}),F$A(0,F$y,"group",function(){return this._group},function(F$y){F$y&&this._skin&&F$C.setGroup(this._skin,F$y),this._group=F$y}),F$A(0,F$y,"clipHeight",function(){return this._clipHeight},function(F$y){this._clipHeight=F$y,this._setClipChanged()}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$q,this,"width",F$y),this._bitmap.width=F$y}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$q,this,"height",F$y),this._bitmap.height=F$y}),F$A(0,F$y,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),F$A(0,F$y,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),F$A(0,F$y,"index",function(){return this._index},function(F$y){this._index=F$y,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[F$y]),this.event("change")}),F$A(0,F$y,"autoPlay",function(){return this._autoPlay},function(F$y){this._autoPlay!=F$y&&((this._autoPlay=F$y)?this.play():this.stop())}),F$A(0,F$y,"isPlaying",function(){return this._isPlaying},function(F$y){this._isPlaying=F$y}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)&&Math.floor(F$y)==F$y||"string"==typeof F$y?this.index=parseInt(F$y):F$z.superSet(F$q,this,"dataSource",F$y)}),F$A(0,F$y,"bitmap",function(){return this._bitmap}),F$k}(F$q),F$x=function(F$j){function F$y(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,F$y.__super.call(this)}F$Y(F$y,"laya.ui.ColorPicker",F$j);var F$t=F$y.prototype;return F$t.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._colorPanel&&this._colorPanel.destroy(F$y),this._colorButton&&this._colorButton.destroy(F$y),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},F$t.createChildren=function(){this.addChild(this._colorButton=new F$H),this._colorPanel=new F$S,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new F$_),this._colorPanel.addChild(this._colorBlock=new F$_),this._colorPanel.addChild(this._colorInput=new F$$)},F$t.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},F$t.onPanelMouseDown=function(F$y){F$y.stopPropagation()},F$t.changePanel=function(){this._panelChanged=!1;var F$y=this._colorPanel.graphics;F$y.clear(),F$y.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(F$y=this._colorTiles.graphics).clear();for(var F$j=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],F$t=0;F$t<12;F$t++)for(var F$k=0;F$k<20;F$k++){var F$T=0;F$T=0===F$k?F$j[F$t]:1===F$k?0:51*(((3*F$t+F$k/6)%3<<0)+3*(F$t/6<<0))<<16|F$k%6*51<<8|(F$t<<0)%6*51;var F$Y=F$Q.toColor(F$T);this._colors.push(F$Y);var F$A=F$k*this._gridSize,F$X=F$t*this._gridSize;F$y.drawRect(F$A,F$X,this._gridSize,this._gridSize,F$Y,"#000000")}},F$t.onColorButtonClick=function(F$y){this._colorPanel.parent?this.close():this.open()},F$t.open=function(){var F$y=this.localToGlobal(new F$W),F$j=F$y.x+this._colorPanel.width<=F$z.stage.width?F$y.x:F$z.stage.width-this._colorPanel.width,F$t=F$y.y+this._colorButton.height;F$t=F$t+this._colorPanel.height<=F$z.stage.height?F$t:F$y.y-this._colorPanel.height,this._colorPanel.pos(F$j,F$t),this._colorPanel.zOrder=1001,F$z._currentStage.addChild(this._colorPanel),F$z.stage.on("mousedown",this,this.removeColorBox)},F$t.close=function(){F$z.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},F$t.removeColorBox=function(F$y){this.close()},F$t.onColorFieldKeyDown=function(F$y){13==F$y.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),F$y.stopPropagation())},F$t.onColorInputChange=function(F$y){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},F$t.onColorTilesClick=function(F$y){this.selectedColor=this.getColorByMouse(),this.close()},F$t.onColorTilesMouseMove=function(F$y){this._colorInput.focus=!1;var F$j=this.getColorByMouse();this._colorInput.text=F$j,this.drawBlock(F$j)},F$t.getColorByMouse=function(){var F$y=this._colorTiles.getMousePoint(),F$j=Math.floor(F$y.x/this._gridSize),F$t=Math.floor(F$y.y/this._gridSize);return this._colors[20*F$t+F$j]},F$t.drawBlock=function(F$y){var F$j=this._colorBlock.graphics;F$j.clear();var F$t=F$y||"#ffffff";F$j.drawRect(0,0,50,20,F$t,this._borderColor),F$y||F$j.drawLine(0,0,50,20,"#ff0000")},F$t.changeColor=function(){var F$y=this.graphics;F$y.clear();var F$j=this._selectedColor||"#000000";F$y.drawRect(0,0,this._colorButton.width,this._colorButton.height,F$j)},F$t._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},F$A(0,F$t,"inputBgColor",function(){return this._inputBgColor},function(F$y){this._inputBgColor=F$y,this._setPanelChanged()}),F$A(0,F$t,"selectedColor",function(){return this._selectedColor},function(F$y){this._selectedColor!=F$y&&(this._selectedColor=this._colorInput.text=F$y,this.drawBlock(F$y),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",F$b.EMPTY.setTo("change",this,this)))}),F$A(0,F$t,"skin",function(){return this._colorButton.skin},function(F$y){this._colorButton.skin=F$y,this.changeColor()}),F$A(0,F$t,"bgColor",function(){return this._bgColor},function(F$y){this._bgColor=F$y,this._setPanelChanged()}),F$A(0,F$t,"borderColor",function(){return this._borderColor},function(F$y){this._borderColor=F$y,this._setPanelChanged()}),F$A(0,F$t,"inputColor",function(){return this._inputColor},function(F$y){this._inputColor=F$y,this._setPanelChanged()}),F$y}(F$q),F$F=function(F$j){function F$t(F$y,F$j){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,F$t.__super.call(this),this._itemColors=F$f.comboBoxItemColors,this.skin=F$y,this.labels=F$j}F$Y(F$t,"laya.ui.ComboBox",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._button&&this._button.destroy(F$y),this._list&&this._list.destroy(F$y),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},F$y.createChildren=function(){this.addChild(this._button=new F$H),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},F$y._createList=function(){this._list=new F$B,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},F$y._setListEvent=function(F$y){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=F$r.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},F$y.onListDown=function(F$y){F$y.stopPropagation()},F$y.onScrollBarDown=function(F$y){F$y.stopPropagation()},F$y.onButtonMouseDown=function(F$y){this.callLater(this.switchTo,[!this._isOpen])},F$y.changeList=function(){this._listChanged=!1;var F$y=this.width-2,F$j=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:F$y,height:this._itemHeight,fontSize:this._itemSize,color:F$j}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},F$y.onlistItemMouse=function(F$y,F$j){var F$t=F$y.type;if("mouseover"===F$t||"mouseout"===F$t){if(this._isCustomList)return;var F$k=this._list.getCell(F$j);if(!F$k)return;var F$T=F$k.getChildByName("label");F$T&&("mouseover"===F$t?(F$T.bgColor=this._itemColors[0],F$T.color=this._itemColors[1]):(F$T.bgColor=null,F$T.color=this._itemColors[2]))}else"click"===F$t&&(this.selectedIndex=F$j,this.isOpen=!1)},F$y.switchTo=function(F$y){this.isOpen=F$y},F$y.changeOpen=function(){this.isOpen=!this._isOpen},F$y.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var F$y=this._list.graphics;F$y.clear(),F$y.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var F$j=this._list.array||[],F$t=F$j.length=0,F$k=this._labels.length;F$t<F$k;F$t++)F$j.push({label:this._labels[F$t]});this._list.height=this._listHeight,this._list.array=F$j},F$y.changeSelected=function(){this._button.label=this.selectedLabel},F$y._onStageMouseWheel=function(F$y){this._list&&!this._list.contains(F$y.target)&&this.removeList(null)},F$y.removeList=function(F$y){F$z.stage.off("mousedown",this,this.removeList),F$z.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},F$A(0,F$y,"selectedIndex",function(){return this._selectedIndex},function(F$y){this._selectedIndex!=F$y&&(this._selectedIndex=F$y,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[F$b.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),F$A(0,F$y,"measureHeight",function(){return this._button.height}),F$A(0,F$y,"skin",function(){return this._button.skin},function(F$y){this._button.skin!=F$y&&(this._button.skin=F$y,this._listChanged=!0)}),F$A(0,F$y,"measureWidth",function(){return this._button.width}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$q,this,"width",F$y),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),F$A(0,F$y,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(F$y){this.selectedIndex=this._labels.indexOf(F$y)}),F$A(0,F$y,"labels",function(){return this._labels.join(",")},function(F$y){0<this._labels.length&&(this.selectedIndex=-1),F$y?this._labels=F$y.split(","):this._labels.length=0,this._itemChanged=!0}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$q,this,"height",F$y),this._button.height=this._height}),F$A(0,F$y,"selectHandler",function(){return this._selectHandler},function(F$y){this._selectHandler=F$y}),F$A(0,F$y,"visibleNum",function(){return this._visibleNum},function(F$y){this._visibleNum=F$y,this._listChanged=!0}),F$A(0,F$y,"labelBold",function(){return this._button.text.bold},function(F$y){this._button.text.bold=F$y}),F$A(0,F$y,"itemColors",function(){return String(this._itemColors)},function(F$y){this._itemColors=F$Q.fillArray(this._itemColors,F$y,String),this._listChanged=!0}),F$A(0,F$y,"itemSize",function(){return this._itemSize},function(F$y){this._itemSize=F$y,this._listChanged=!0}),F$A(0,F$y,"scrollBar",function(){return this.list.scrollBar}),F$A(0,F$y,"isOpen",function(){return this._isOpen},function(F$y){if(this._isOpen!=F$y)if(this._isOpen=F$y,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var F$j=this.localToGlobal(F$W.TEMP.setTo(0,0)),F$t=F$j.y+this._button.height;F$t=F$t+this._listHeight<=F$z.stage.height?F$t:F$j.y-this._listHeight,this._list.pos(F$j.x,F$t),this._list.zOrder=1001,F$z._currentStage.addChild(this._list),F$z.stage.once("mousedown",this,this.removeList),F$z.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),F$A(0,F$y,"scrollBarSkin",function(){return this._scrollBarSkin},function(F$y){this._scrollBarSkin=F$y}),F$A(0,F$y,"sizeGrid",function(){return this._button.sizeGrid},function(F$y){this._button.sizeGrid=F$y}),F$A(0,F$y,"button",function(){return this._button}),F$A(0,F$y,"list",function(){return this._list||this._createList(),this._list},function(F$y){F$y&&(F$y.removeSelf(),this._isCustomList=!0,this._list=F$y,this._setListEvent(F$y),this._itemHeight=F$y.getCell(0).height+F$y.spaceY)}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)&&Math.floor(F$y)==F$y||"string"==typeof F$y?this.selectedIndex=parseInt(F$y):F$y instanceof Array?this.labels=F$y.join(","):F$z.superSet(F$q,this,"dataSource",F$y)}),F$A(0,F$y,"labelColors",function(){return this._button.labelColors},function(F$y){this._button.labelColors!=F$y&&(this._button.labelColors=F$y)}),F$A(0,F$y,"labelPadding",function(){return this._button.text.padding.join(",")},function(F$y){this._button.text.padding=F$Q.fillArray(F$f.labelPadding,F$y,Number)}),F$A(0,F$y,"labelSize",function(){return this._button.text.fontSize},function(F$y){this._button.text.fontSize=F$y}),F$A(0,F$y,"labelFont",function(){return this._button.text.font},function(F$y){this._button.text.font=F$y}),F$A(0,F$y,"stateNum",function(){return this._button.stateNum},function(F$y){this._button.stateNum=F$y}),F$t}(F$q),F$G=function(F$j){function F$t(F$y){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,F$t.__super.call(this),this._showButtons=F$m.showButtons,this._touchScrollEnable=F$m.touchScrollEnable,this._mouseWheelEnable=F$m.mouseWheelEnable,this.skin=F$y,this.max=1}F$Y(F$t,"laya.ui.ScrollBar",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),this.stopScroll(),this.target=null,F$j.prototype.destroy.call(this,F$y),this.upButton&&this.upButton.destroy(F$y),this.downButton&&this.downButton.destroy(F$y),this.slider&&this.slider.destroy(F$y),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},F$y.createChildren=function(){this.addChild(this.slider=new F$g),this.addChild(this.upButton=new F$H),this.addChild(this.downButton=new F$H)},F$y.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},F$y.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},F$y.onButtonMouseDown=function(F$y){var F$j=F$y.currentTarget===this.upButton;this.slide(F$j),F$z.timer.once(F$f.scrollBarDelayTime,this,this.startLoop,[F$j]),F$z.stage.once("mouseup",this,this.onStageMouseUp)},F$y.startLoop=function(F$y){F$z.timer.frameLoop(1,this,this.slide,[F$y])},F$y.slide=function(F$y){F$y?this.value-=this._scrollSize:this.value+=this._scrollSize},F$y.onStageMouseUp=function(F$y){F$z.timer.clear(this,this.startLoop),F$z.timer.clear(this,this.slide)},F$y.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},F$y.changeSize=function(){F$j.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},F$y.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},F$y.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},F$y.setScroll=function(F$y,F$j,F$t){this.runCallLater(this.changeSize),this.slider.setSlider(F$y,F$j,F$t),this.slider.bar.visible=0<F$j,!this._hide&&this.autoHide&&(this.visible=!1)},F$y.onTargetMouseWheel=function(F$y){this.value-=F$y.delta*this._scrollSize,this.target=this._target},F$y.onTargetMouseDown=function(F$y){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new F$W),this._lastPoint.setTo(F$z.stage.mouseX,F$z.stage.mouseY),F$z.timer.clear(this,this.tweenMove),F$N.clearTween(this),F$z.stage.once("mouseup",this,this.onStageMouseUp2),F$z.stage.once("mouseout",this,this.onStageMouseUp2),F$z.timer.frameLoop(1,this,this.loop)},F$y.loop=function(){var F$y=F$z.stage.mouseY,F$j=F$z.stage.mouseX;if(this._lastOffset=this.isVertical?F$y-this._lastPoint.y:F$j-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?F$z.stage._canvasTransform.getScaleY():F$z.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=F$j,this._lastPoint.y=F$y,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},F$y.onStageMouseUp2=function(F$y){if(F$z.stage.off("mouseup",this,this.onStageMouseUp2),F$z.stage.off("mouseout",this,this.onStageMouseUp2),F$z.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?F$N.to(this,{value:this.min},this.elasticBackTime,F$I.sineOut,F$r.create(this,this.elasticOver)):this._value>this.max&&F$N.to(this,{value:this.max},this.elasticBackTime,F$I.sineOut,F$r.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?F$z.stage.mouseY-this._lastPoint.y:F$z.stage.mouseX-this._lastPoint.x);for(var F$j=0,F$t=Math.min(this._offsets.length,3),F$k=0;F$k<F$t;F$k++)F$j+=this._offsets[this._offsets.length-1-F$k];if(this._lastOffset=F$j/F$t,(F$j=Math.abs(this._lastOffset))<2)return void this.event("end");60<F$j&&(this._lastOffset=0<this._lastOffset?60:-60);var F$T=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));F$z.timer.frameLoop(1,this,this.tweenMove,[F$T])}},F$y.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&F$N.to(this,{alpha:0},500),this.event("end")},F$y.tweenMove=function(F$y){this._lastOffset*=this.rollRatio;var F$j=NaN;if(0<F$y&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,F$j=.5*-(this.min-F$y-this.value),this._lastOffset>F$j&&(this._lastOffset=F$j)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,F$j=.5*-(this.max+F$y-this.value),this._lastOffset<F$j&&(this._lastOffset=F$j))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(F$z.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?F$N.to(this,{value:this.min},this.elasticBackTime,F$I.sineOut,F$r.create(this,this.elasticOver)):this._value>this.max?F$N.to(this,{value:this.max},this.elasticBackTime,F$I.sineOut,F$r.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&F$N.to(this,{alpha:0},500)}},F$y.stopScroll=function(){this.onStageMouseUp2(null),F$z.timer.clear(this,this.tweenMove),F$N.clearTween(this)},F$A(0,F$y,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),F$A(0,F$y,"skin",function(){return this._skin},function(F$y){this._skin!=F$y&&(this._skin=F$y,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),F$A(0,F$y,"max",function(){return this.slider.max},function(F$y){this.slider.max=F$y}),F$A(0,F$y,"showButtons",function(){return this._showButtons},function(F$y){this._showButtons=F$y,this.callLater(this.changeScrollBar)}),F$A(0,F$y,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),F$A(0,F$y,"min",function(){return this.slider.min},function(F$y){this.slider.min=F$y}),F$A(0,F$y,"value",function(){return this._value},function(F$y){F$y!==this._value&&(this._value=F$y,this._isElastic||(this.slider._value!=F$y&&(this.slider._value=F$y,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),F$A(0,F$y,"isVertical",function(){return this.slider.isVertical},function(F$y){this.slider.isVertical=F$y}),F$A(0,F$y,"sizeGrid",function(){return this.slider.sizeGrid},function(F$y){this.slider.sizeGrid=F$y}),F$A(0,F$y,"scrollSize",function(){return this._scrollSize},function(F$y){this._scrollSize=F$y}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)||"string"==typeof F$y?this.value=Number(F$y):F$z.superSet(F$q,this,"dataSource",F$y)}),F$A(0,F$y,"thumbPercent",function(){return this._thumbPercent},function(F$y){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),F$y=1<=F$y?.99:F$y,this._thumbPercent=F$y,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*F$y,F$f.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*F$y,F$f.scrollBarMinNum))}),F$A(0,F$y,"target",function(){return this._target},function(F$y){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=F$y)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),F$A(0,F$y,"hide",function(){return this._hide},function(F$y){this._hide=F$y,this.visible=!F$y}),F$A(0,F$y,"touchScrollEnable",function(){return this._touchScrollEnable},function(F$y){this._touchScrollEnable=F$y,this.target=this._target}),F$A(0,F$y,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(F$y){this._mouseWheelEnable=F$y,this.target=this._target}),F$A(0,F$y,"tick",function(){return this.slider.tick},function(F$y){this.slider.tick=F$y}),F$t}(F$q),F$g=function(F$j){function F$t(F$y){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,F$t.__super.call(this),this.skin=F$y}F$Y(F$t,"laya.ui.Slider",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._bg&&this._bg.destroy(F$y),this._bar&&this._bar.destroy(F$y),this._progress&&this._progress.destroy(F$y),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},F$y.createChildren=function(){this.addChild(this._bg=new F$a),this.addChild(this._bar=new F$H)},F$y.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},F$y.onBarMouseDown=function(F$y){this._globalSacle||(this._globalSacle=new F$W),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=F$z.stage.mouseX,this._ty=F$z.stage.mouseY,F$z.stage.on("mousemove",this,this.mouseMove),F$z.stage.once("mouseup",this,this.mouseUp),F$z.stage.once("mouseout",this,this.mouseUp),this.showValueText()},F$y.showValueText=function(){if(this.showLabel){var F$y=laya.ui.Slider.label;this.addChild(F$y),F$y.textField.changeText(this._value+""),this.isVertical?(F$y.x=this._bar.x+20,F$y.y=.5*(this._bar.height-F$y.height)+this._bar.y):(F$y.y=this._bar.y-20,F$y.x=.5*(this._bar.width-F$y.width)+this._bar.x)}},F$y.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},F$y.mouseUp=function(F$y){F$z.stage.off("mousemove",this,this.mouseMove),F$z.stage.off("mouseup",this,this.mouseUp),F$z.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},F$y.mouseMove=function(F$y){var F$j=this._value;this.isVertical?(this._bar.y+=(F$z.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(F$z.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=F$z.stage.mouseX,this._ty=F$z.stage.mouseY;var F$t=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$t)/F$t,this._value!=F$j&&this.sendChangeEvent(),this.showValueText()},F$y.sendChangeEvent=function(F$y){void 0===F$y&&(F$y="change"),this.event(F$y),this.changeHandler&&this.changeHandler.runWith(this._value)},F$y.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},F$y.changeSize=function(){F$j.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},F$y.setSlider=function(F$y,F$j,F$t){this._value=-1,this._min=F$y,this._max=F$y<F$j?F$j:F$y,this.value=F$t<F$y?F$y:F$j<F$t?F$j:F$t},F$y.changeValue=function(){var F$y=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*F$y)/F$y,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var F$j=this._max-this._min;0===F$j&&(F$j=1),this.isVertical?(this._bar.y=(this._value-this._min)/F$j*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/F$j*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},F$y.onBgMouseDown=function(F$y){var F$j=this._bg.getMousePoint();this.isVertical?this.value=F$j.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=F$j.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},F$A(0,F$y,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),F$A(0,F$y,"skin",function(){return this._skin},function(F$y){if(this._skin!=F$y){this._skin=F$y,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var F$j=this._skin.replace(".png","$progress.png");F$C.getRes(F$j)&&(this._progress||(this.addChild(this._progress=new F$a),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=F$j),this.setBarPoint(),this.callLater(this.changeValue)}}),F$A(0,F$y,"allowClickBack",function(){return this._allowClickBack},function(F$y){this._allowClickBack!=F$y&&((this._allowClickBack=F$y)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),F$A(0,F$y,"max",function(){return this._max},function(F$y){this._max!=F$y&&(this._max=F$y,this.callLater(this.changeValue))}),F$A(0,F$y,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),F$A(0,F$y,"tick",function(){return this._tick},function(F$y){this._tick!=F$y&&(this._tick=F$y,this.callLater(this.changeValue))}),F$A(0,F$y,"sizeGrid",function(){return this._bg.sizeGrid},function(F$y){this._bg.sizeGrid=F$y,this._bar.sizeGrid=F$y,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),F$A(0,F$y,"min",function(){return this._min},function(F$y){this._min!=F$y&&(this._min=F$y,this.callLater(this.changeValue))}),F$A(0,F$y,"value",function(){return this._value},function(F$y){if(this._value!=F$y){var F$j=this._value;this._value=F$y,this.changeValue(),this._value!=F$j&&this.sendChangeEvent()}}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)||"string"==typeof F$y?this.value=Number(F$y):F$z.superSet(F$q,this,"dataSource",F$y)}),F$A(0,F$y,"bar",function(){return this._bar}),F$k(F$t,["label",function(){return this.label=new F$J}]),F$t}(F$q),F$a=function(F$j){function F$t(F$y){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,F$t.__super.call(this),this.skin=F$y}F$Y(F$t,"laya.ui.Image",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,F$C.clearCache(this,this._skin)},F$y.dispose=function(){this.destroy(!0),F$C.clearCache(this,this._skin),this.clearEvent()},F$y.createChildren=function(){this.graphics=this._bitmap=new F$U},F$y.setSource=function(F$y,F$j){this.destroyed||F$y===this._skin&&F$j&&(this.source=F$j,this.onCompResize(),this.clearEvent())},F$y.clearEvent=function(){this._skin&&F$T.atalsNotify&&F$T.atalsNotify.off(this._skin,this,this.setSource)},F$y.clearLoad=function(){this._skin&&((this._complete||this._progress)&&F$z.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},F$A(0,F$y,"source",function(){return this._bitmap.source},function(F$y){this._bitmap&&(this._bitmap.source=F$y,this.event("loaded"),this.repaint())}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"string"==typeof(this._dataSource=F$y)?this.skin=F$y:F$z.superSet(F$q,this,"dataSource",F$y)}),F$A(0,F$y,"measureHeight",function(){return this._bitmap.height}),F$A(0,F$y,"skin",function(){return this._skin},function(F$y){if(this._skin!=F$y)if(F$C.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=F$y){F$C.keepCache(this,this._skin);var F$j=F$C.getRes(F$y),F$t=F$T.resAtalsObj&&F$T.resAtalsObj[this._skin];F$j?(this.source=F$j,this.onCompResize()):F$t?(F$T.atalsNotify&&F$T.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=F$t.sourceW),0==this.height&&(this.height=F$t.sourceH)):(this._complete=F$r.create(this,this.setSource,[this._skin]),this._progress=null,F$z.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),F$A(0,F$y,"group",function(){return this._group},function(F$y){F$y&&this._skin&&F$C.setGroup(this._skin,F$y),this._group=F$y}),F$A(0,F$y,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(F$y){this._bitmap.sizeGrid=F$Q.fillArray(F$f.defaultSizeGrid,F$y,Number)}),F$A(0,F$y,"measureWidth",function(){return this._bitmap.width}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$q,this,"width",F$y),this._bitmap.width=0==F$y?1e-7:F$y}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$q,this,"height",F$y),this._bitmap.height=0==F$y?1e-7:F$y}),F$t}(F$q),F$J=function(F$j){function F$t(F$y){this._tf=null,F$t.__super.call(this),void 0===F$y&&(F$y=""),F$D.defaultColor=F$f.labelColor,this.text=F$y}F$Y(F$t,"laya.ui.Label",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._tf=null},F$y.createChildren=function(){this.addChild(this._tf=new F$e)},F$y.changeText=function(F$y){this._tf.changeText(F$y)},F$A(0,F$y,"padding",function(){return this._tf.padding.join(",")},function(F$y){this._tf.padding=F$Q.fillArray(F$f.labelPadding,F$y,Number)}),F$A(0,F$y,"bold",function(){return this._tf.bold},function(F$y){this._tf.bold=F$y}),F$A(0,F$y,"align",function(){return this._tf.align},function(F$y){this._tf.align=F$y}),F$A(0,F$y,"text",function(){return this._tf.text},function(F$y){this._tf.text!=F$y&&(F$y&&(F$y=F$Q.adptString(F$y+"")),this._tf.text=F$y,this.event("change"),this._width&&this._height||this.onCompResize())}),F$A(0,F$y,"italic",function(){return this._tf.italic},function(F$y){this._tf.italic=F$y}),F$A(0,F$y,"wordWrap",function(){return this._tf.wordWrap},function(F$y){this._tf.wordWrap=F$y}),F$A(0,F$y,"font",function(){return this._tf.font},function(F$y){this._tf.font=F$y}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)||"string"==typeof F$y?this.text=F$y+"":F$z.superSet(F$q,this,"dataSource",F$y)}),F$A(0,F$y,"color",function(){return this._tf.color},function(F$y){this._tf.color=F$y}),F$A(0,F$y,"valign",function(){return this._tf.valign},function(F$y){this._tf.valign=F$y}),F$A(0,F$y,"leading",function(){return this._tf.leading},function(F$y){this._tf.leading=F$y}),F$A(0,F$y,"fontSize",function(){return this._tf.fontSize},function(F$y){this._tf.fontSize=F$y}),F$A(0,F$y,"bgColor",function(){return this._tf.bgColor},function(F$y){this._tf.bgColor=F$y}),F$A(0,F$y,"borderColor",function(){return this._tf.borderColor},function(F$y){this._tf.borderColor=F$y}),F$A(0,F$y,"stroke",function(){return this._tf.stroke},function(F$y){this._tf.stroke=F$y}),F$A(0,F$y,"strokeColor",function(){return this._tf.strokeColor},function(F$y){this._tf.strokeColor=F$y}),F$A(0,F$y,"textField",function(){return this._tf}),F$A(0,F$y,"measureWidth",function(){return this._tf.width}),F$A(0,F$y,"measureHeight",function(){return this._tf.height}),F$A(0,F$y,"width",function(){return this._width||this._tf.text?F$z.superGet(F$q,this,"width"):0},function(F$y){F$z.superSet(F$q,this,"width",F$y),this._tf.width=F$y}),F$A(0,F$y,"height",function(){return this._height||this._tf.text?F$z.superGet(F$q,this,"height"):0},function(F$y){F$z.superSet(F$q,this,"height",F$y),this._tf.height=F$y}),F$A(0,F$y,"overflow",function(){return this._tf.overflow},function(F$y){this._tf.overflow=F$y}),F$A(0,F$y,"underline",function(){return this._tf.underline},function(F$y){this._tf.underline=F$y}),F$A(0,F$y,"underlineColor",function(){return this._tf.underlineColor},function(F$y){this._tf.underlineColor=F$y}),F$t}(F$q),F$h=function(F$j){function F$t(F$y){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,F$t.__super.call(this),this.skin=F$y}F$Y(F$t,"laya.ui.ProgressBar",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._bg&&this._bg.destroy(F$y),this._bar&&this._bar.destroy(F$y),this._bg=this._bar=null,this.changeHandler=null},F$y.createChildren=function(){this.addChild(this._bg=new F$a),this.addChild(this._bar=new F$a)},F$y.changeValue=function(){if(this.sizeGrid){var F$y=this.sizeGrid.split(","),F$j=Number(F$y[3]),F$t=Number(F$y[1]),F$k=(this.width-F$j-F$t)*this._value;this._bar.width=F$j+F$t+F$k,this._bar.visible=this._bar.width>F$j+F$t}else this._bar.width=this.width*this._value},F$A(0,F$y,"measureHeight",function(){return this._bg.height}),F$A(0,F$y,"skin",function(){return this._skin},function(F$y){this._skin!=F$y&&(this._skin=F$y,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),F$A(0,F$y,"measureWidth",function(){return this._bg.width}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$q,this,"height",F$y),this._bg.height=this._height,this._bar.height=this._height}),F$A(0,F$y,"bar",function(){return this._bar}),F$A(0,F$y,"value",function(){return this._value},function(F$y){this._value!=F$y&&(F$y=1<F$y?1:F$y<0?0:F$y,this._value=F$y,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(F$y))}),F$A(0,F$y,"bg",function(){return this._bg}),F$A(0,F$y,"sizeGrid",function(){return this._bg.sizeGrid},function(F$y){this._bg.sizeGrid=this._bar.sizeGrid=F$y}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$q,this,"width",F$y),this._bg.width=this._width,this.callLater(this.changeValue)}),F$A(0,F$y,"dataSource",F$j.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)||"string"==typeof F$y?this.value=Number(F$y):F$z.superSet(F$q,this,"dataSource",F$y)}),F$t}(F$q),F$O=(function(F$y){function F$t(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,F$t.__super.call(this),this._tipBox=new F$q,this._tipBox.addChild(this._tipText=new F$e),this._tipText.x=this._tipText.y=5,this._tipText.color=F$t.tipTextColor,this._defaultTipHandler=this._showDefaultTip,F$z.stage.on("showtip",this,this._onStageShowTip),F$z.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}F$Y(F$t,"laya.ui.TipManager",F$q);var F$j=F$t.prototype;F$j._onStageHideTip=function(F$y){F$z.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},F$j._onStageShowTip=function(F$y){F$z.timer.once(F$t.tipDelay,this,this._showTip,[F$y],!0)},F$j._showTip=function(F$y){if("string"==typeof F$y){var F$j=String(F$y);Boolean(F$j)&&this._defaultTipHandler(F$j)}else F$y instanceof laya.utils.Handler?F$y.run():"function"==typeof F$y&&F$y.apply();F$z.stage.on("mousemove",this,this._onStageMouseMove),F$z.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},F$j._onStageMouseDown=function(F$y){this.closeAll()},F$j._onStageMouseMove=function(F$y){this._showToStage(this,F$t.offsetX,F$t.offsetY)},F$j._showToStage=function(F$y,F$j,F$t){void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0);var F$k=F$y.getBounds();F$y.x=F$z.stage.mouseX+F$j,F$y.y=F$z.stage.mouseY+F$t,F$y.x+F$k.width>F$z.stage.width&&(F$y.x-=F$k.width+F$j),F$y.y+F$k.height>F$z.stage.height&&(F$y.y-=F$k.height+F$t)},F$j.closeAll=function(){F$z.timer.clear(this,this._showTip),F$z.stage.off("mousemove",this,this._onStageMouseMove),F$z.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},F$j.showDislayTip=function(F$y){this.addChild(F$y),this._showToStage(this),F$z._currentStage.addChild(this)},F$j._showDefaultTip=function(F$y){this._tipText.text=F$y;var F$j=this._tipBox.graphics;F$j.clear(),F$j.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,F$t.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),F$z._currentStage.addChild(this)},F$A(0,F$j,"defaultTipHandler",function(){return this._defaultTipHandler},function(F$y){this._defaultTipHandler=F$y}),F$t.offsetX=10,F$t.offsetY=15,F$t.tipTextColor="#ffffff",F$t.tipBackColor="#111111",F$t.tipDelay=200}(),function(F$y){var F$$;function F$W(){this._idMap=null,this._aniList=null,this._watchMap={},F$W.__super.call(this)}F$Y(F$W,"laya.ui.View",F$S);var F$j=F$W.prototype;return F$j.createView=function(F$y){if(F$y.animations&&!this._idMap&&(this._idMap={}),F$W.createComp(F$y,this,this),F$y.animations){var F$j,F$t,F$k=[],F$T=F$y.animations,F$Y=0,F$A=F$T.length;for(F$Y=0;F$Y<F$A;F$Y++){switch(F$j=new F$l,F$t=F$T[F$Y],F$j._setUp(this._idMap,F$t),(this[F$t.name]=F$j)._setControlNode(this),F$t.action){case 1:F$j.play(0,!1);break;case 2:F$j.play(0,!0)}F$k.push(F$j)}this._aniList=F$k}0<this._width&&null==F$y.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},F$j.onEvent=function(F$y,F$j){},F$j.loadUI=function(F$y){var F$j=F$W.uiMap[F$y];F$j&&this.createView(F$j)},F$j.destroy=function(F$y){void 0===F$y&&(F$y=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,F$y)},F$j.changeData=function(F$y){var F$j=this._watchMap[F$y];if(F$j){console.log("change",F$y);for(var F$t=0,F$k=F$j.length;F$t<F$k;F$t++){F$j[F$t].exe(this)}}},F$W._regs=function(){for(var F$y in F$W.uiClassMap)F$V.regClass(F$y,F$W.uiClassMap[F$y])},F$W.createComp=function(F$y,F$j,F$t,F$k){if(!(F$j=F$j||F$W.getCompInstance(F$y)))return console.warn("can not create:"+F$y.type),null;var F$T=F$y.child;if(F$T)for(var F$Y=F$j instanceof laya.ui.List,F$A=0,F$X=F$T.length;F$A<F$X;F$A++){var F$I=F$T[F$A];if(!F$j.hasOwnProperty("itemRender")||"render"!=F$I.props.name&&"render"!==F$I.props.renderType)if("Graphic"==F$I.type)F$V.addGraphicsToSprite(F$I,F$j);else if(F$V.isDrawType(F$I.type))F$V.addGraphicToSprite(F$I,F$j,!0);else{if(F$Y){var F$b=[],F$D=F$W.createComp(F$I,null,F$t,F$b);F$b.length&&(F$D._$bindData=F$b)}else F$D=F$W.createComp(F$I,null,F$t,F$k);"Script"==F$I.type?"owner"in F$D?F$D.owner=F$j:"target"in F$D&&(F$D.target=F$j):"mask"==F$I.props.renderType||"mask"==F$I.props.name?F$j.mask=F$D:F$D instanceof laya.display.Sprite&&F$j.addChild(F$D)}else F$j.itemRender=F$I}var F$l=F$y.props;for(var F$r in F$l){var F$$=F$l[F$r];F$W.eventDic[F$r]?F$$&&F$t&&F$j.on(F$r,F$t,F$t.onEvent,[F$$]):F$W.setCompValue(F$j,F$r,F$$,F$t,F$k)}return F$z.__typeof(F$j,"laya.ui.IItem")&&F$j.initItems(),F$y.compId&&F$t&&F$t._idMap&&(F$t._idMap[F$y.compId]=F$j),F$j},F$W.setCompValue=function(F$y,F$j,F$t,F$k,F$T){if("string"==typeof F$t&&-1<F$t.indexOf("${")){if(F$W._sheet||(F$W._sheet=F$V.getClass("laya.data.Table")),!F$W._sheet)return void console.warn("Can not find class Sheet");if(F$T)F$T.push(F$y,F$j,F$t);else if(F$k){-1==F$t.indexOf("].")&&(F$t=F$t.replace(".","[0]."));var F$Y,F$A,F$X=new F$$(F$y,F$j,F$t);F$X.exe(F$k);for(var F$I=F$t.replace(/\[.*?\]\./g,".");null!=(F$Y=F$W._parseWatchData.exec(F$I));){for(var F$b=F$Y[1];null!=(F$A=F$W._parseKeyWord.exec(F$b));){var F$D=F$A[0],F$l=F$k._watchMap[F$D]||(F$k._watchMap[F$D]=[]);F$l.push(F$X),F$W._sheet.I.notifer.on(F$D,F$k,F$k.changeData,[F$D])}(F$l=F$k._watchMap[F$b]||(F$k._watchMap[F$b]=[])).push(F$X),F$W._sheet.I.notifer.on(F$b,F$k,F$k.changeData,[F$b])}}}else if("var"===F$j&&F$k)F$k[F$t]=F$y;else if("onClick"==F$j){var F$r=F$z._runScript("(function(){"+F$t+"})");F$y.on("click",F$k,F$r)}else F$y[F$j]="true"===F$t||"false"!==F$t&&F$t},F$W.getCompInstance=function(F$y){var F$j,F$t=F$y.props?F$y.props.runtime:null;return F$j=F$t?F$W.viewClassMap[F$t]||F$W.uiClassMap[F$t]||F$z.__classmap[F$t]:F$W.uiClassMap[F$y.type],F$y.props&&F$y.props.hasOwnProperty("renderType")&&"instance"==F$y.props.renderType?F$j.instance:F$j?new F$j:null},F$W.regComponent=function(F$y,F$j){F$W.uiClassMap[F$y]=F$j,F$V.regClass(F$y,F$j)},F$W.regViewRuntime=function(F$y,F$j){F$W.viewClassMap[F$y]=F$j},F$W.uiMap={},F$W.viewClassMap={},F$W._sheet=null,F$k(F$W,["uiClassMap",function(){return this.uiClassMap={ViewStack:F$yy,LinkButton:F$H,TextArea:F$by,ColorPicker:F$x,Box:F$S,Button:F$H,CheckBox:F$s,Clip:F$K,ComboBox:F$F,Component:F$q,HScrollBar:F$c,HSlider:F$o,Image:F$a,Label:F$J,List:F$B,Panel:F$L,ProgressBar:F$h,Radio:F$E,RadioGroup:F$Xy,ScrollBar:F$G,Slider:F$g,Tab:F$Iy,TextInput:F$ty,View:F$W,VScrollBar:F$jy,VSlider:F$ky,Tree:F$u,HBox:F$Yy,VBox:F$Ay,Sprite:F$_,Animation:F$t,Text:F$e,FontClip:F$R}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),F$W.__init$=function(){F$W._regs(),F$$=function(){function F$y(F$y,F$j,F$t){this.comp=null,this.prop=null,this.value=null,this.comp=F$y,this.prop=F$j,this.value=F$t}return F$Y(F$y,""),F$y.prototype.exe=function(F$y){var F$j=F$Q.getBindFun(this.value);this.comp[this.prop]=F$j.call(this,F$y)},F$y}()},F$W}()),F$s=function(F$y){function F$t(F$y,F$j){void 0===F$j&&(F$j=""),F$t.__super.call(this,F$y,F$j)}F$Y(F$t,"laya.ui.CheckBox",F$y);var F$j=F$t.prototype;return F$j.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},F$j.initialize=function(){F$y.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},F$A(0,F$j,"dataSource",F$y.prototype._$get_dataSource,function(F$y){"boolean"==typeof(this._dataSource=F$y)?this.selected=F$y:"string"==typeof F$y?this.selected="true"===F$y:F$z.superSet(F$H,this,"dataSource",F$y)}),F$t}(F$H),F$Z=function(F$y){function F$j(){this._space=0,this._align="none",this._itemChanged=!1,F$j.__super.call(this)}F$Y(F$j,"laya.ui.LayoutBox",F$S);var F$t=F$j.prototype;return F$t.addChild=function(F$y){return F$y.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,F$y)},F$t.onResize=function(F$y){this._setItemChanged()},F$t.addChildAt=function(F$y,F$j){return F$y.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,F$y,F$j)},F$t.removeChild=function(F$y){return F$y.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,F$y)},F$t.removeChildAt=function(F$y){return this.getChildAt(F$y).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,F$y)},F$t.refresh=function(){this._setItemChanged()},F$t.changeItems=function(){this._itemChanged=!1},F$t.sortItem=function(F$y){F$y&&F$y.sort(function(F$y,F$j){return F$y.y-F$j.y})},F$t._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},F$A(0,F$t,"space",function(){return this._space},function(F$y){this._space=F$y,this._setItemChanged()}),F$A(0,F$t,"align",function(){return this._align},function(F$y){this._align=F$y,this._setItemChanged()}),F$j}(),F$R=function(F$j){function F$t(F$y,F$j){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,F$t.__super.call(this),F$y&&(this.skin=F$y),F$j&&(this.sheet=F$j)}F$Y(F$t,"laya.ui.FontClip",F$j);var F$y=F$t.prototype;return F$y.createChildren=function(){this._bitmap=new F$U,this.on("loaded",this,this._onClipLoaded)},F$y._onClipLoaded=function(){this.callLater(this.changeValue)},F$y.changeValue=function(){var F$y;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),F$y=this._sources[0]))){var F$j="horizontal"===this._direction;F$j?(this._wordsW=this._valueArr.length*(F$y.sourceWidth+this.spaceX),this._wordsH=F$y.sourceHeight):(this._wordsW=F$y.sourceWidth,this._wordsH=(F$y.sourceHeight+this.spaceY)*this._valueArr.length);var F$t=0;if(this._width)switch(this._align){case"center":F$t=.5*(this._width-this._wordsW);break;case"right":F$t=this._width-this._wordsW;break;default:F$t=0}for(var F$k=0,F$T=this._valueArr.length;F$k<F$T;F$k++){var F$Y=this._indexMap[this._valueArr.charAt(F$k)];this.sources[F$Y]&&(F$y=this.sources[F$Y],F$j?this.graphics.drawTexture(F$y,F$t+F$k*(F$y.sourceWidth+this.spaceX),0,F$y.sourceWidth,F$y.sourceHeight):this.graphics.drawTexture(F$y,0+F$t,F$k*(F$y.sourceHeight+this.spaceY),F$y.sourceWidth,F$y.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),F$j.prototype.destroy.call(this,F$y)},F$A(0,F$y,"sheet",function(){return this._sheet},function(F$y){F$y+="";var F$j=(this._sheet=F$y).split(" ");this._clipX=String(F$j[0]).length,this.clipY=F$j.length,this._indexMap={};for(var F$t=0;F$t<this._clipY;F$t++)for(var F$k=F$j[F$t].split(""),F$T=0,F$Y=F$k.length;F$T<F$Y;F$T++)this._indexMap[F$k[F$T]]=F$t*this._clipX+F$T}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$K,this,"height",F$y),this.callLater(this.changeValue)}),F$A(0,F$y,"direction",function(){return this._direction},function(F$y){this._direction=F$y,this.callLater(this.changeValue)}),F$A(0,F$y,"value",function(){return this._valueArr?this._valueArr:""},function(F$y){F$y+="",this._valueArr=F$y,this.callLater(this.changeValue)}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$K,this,"width",F$y),this.callLater(this.changeValue)}),F$A(0,F$y,"spaceX",function(){return this._spaceX},function(F$y){this._spaceX=F$y,"horizontal"===this._direction&&this.callLater(this.changeValue)}),F$A(0,F$y,"spaceY",function(){return this._spaceY},function(F$y){this._spaceY=F$y,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),F$A(0,F$y,"align",function(){return this._align},function(F$y){this._align=F$y,this.callLater(this.changeValue)}),F$A(0,F$y,"measureWidth",function(){return this._wordsW}),F$A(0,F$y,"measureHeight",function(){return this._wordsH}),F$t}(F$K),F$B=function(F$y){function F$j(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new F$W,F$j.__super.call(this)}F$Y(F$j,"laya.ui.List",F$y);var F$t=F$j.prototype;return F$z.imps(F$t,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),F$t.destroy=function(F$y){void 0===F$y&&(F$y=!0),this._content&&this._content.destroy(F$y),this._scrollBar&&this._scrollBar.destroy(F$y),laya.ui.Component.prototype.destroy.call(this,F$y),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},F$t.createChildren=function(){this.addChild(this._content=new F$S)},F$t.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$z.superGet(F$S,this,"cacheAs")),F$z.superSet(F$S,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},F$t.onScrollEnd=function(){F$z.superSet(F$S,this,"cacheAs",this._$P.cacheAs)},F$t._removePreScrollBar=function(){var F$y=this.removeChildByName("scrollBar");F$y&&F$y.destroy(!0)},F$t.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var F$y=this._getOneCell(),F$j=F$y.width+this._spaceX||1,F$t=F$y.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/F$j):Math.ceil(this._width/F$j)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/F$t):Math.round(this._height/F$t));var F$k=this._width?this._width:F$j*this.repeatX-this._spaceX,F$T=this._height?this._height:F$t*this.repeatY-this._spaceY;this._cellSize=this._isVertical?F$t:F$j,this._cellOffset=this._isVertical?F$t*Math.max(this._repeatY2,this._repeatY)-F$T-this._spaceY:F$j*Math.max(this._repeatX2,this._repeatX)-F$k-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=F$T:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=F$k),this.setContentSize(F$k,F$T);var F$Y=this._isVertical?this.repeatX:this.repeatY,F$A=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,F$Y,F$A),this._createdLine=F$A,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},F$t._getOneCell=function(){if(0===this._cells.length){var F$y=this.createItem();if(this._offset.setTo(F$y.x,F$y.y),this.cacheContent)return F$y;this._cells.push(F$y)}return this._cells[0]},F$t._createItems=function(F$y,F$j,F$t){var F$k=this._content,F$T=this._getOneCell(),F$Y=F$T.width+this._spaceX,F$A=F$T.height+this._spaceY;if(this.cacheContent){var F$X=new F$S;F$X.cacheAsBitmap=!0,F$X.pos((this._isVertical?0:F$y)*F$Y,(this._isVertical?F$y:0)*F$A),this._content.addChild(F$X),this._content.optimizeScrollRect=!0,F$k=F$X}else{for(var F$I=[],F$b=this._cells.length-1;-1<F$b;F$b--){var F$D=this._cells[F$b];F$D.removeSelf(),F$I.push(F$D)}this._cells.length=0}for(var F$l=F$y;F$l<F$t;F$l++)for(var F$r=0;F$r<F$j;F$r++)(F$T=F$I&&F$I.length?F$I.pop():this.createItem()).x=(this._isVertical?F$r:F$l)*F$Y-F$k.x,F$T.y=(this._isVertical?F$l:F$r)*F$A-F$k.y,F$T.name="item"+(F$l*F$j+F$r),F$k.addChild(F$T),this.addCell(F$T)},F$t.createItem=function(){var F$y=[];if("function"==typeof this._itemRender)var F$j=new this._itemRender;else F$j=F$O.createComp(this._itemRender,null,null,F$y);if(0==F$y.length&&F$j._watchMap){var F$t=F$j._watchMap;for(var F$k in F$t)for(var F$T=F$t[F$k],F$Y=0;F$Y<F$T.length;F$Y++){var F$A=F$T[F$Y];F$y.push(F$A.comp,F$A.prop,F$A.value)}}return F$y.length&&(F$j._$bindData=F$y),F$j},F$t.addCell=function(F$y){F$y.on("click",this,this.onCellMouse),F$y.on("rightclick",this,this.onCellMouse),F$y.on("mouseover",this,this.onCellMouse),F$y.on("mouseout",this,this.onCellMouse),F$y.on("mousedown",this,this.onCellMouse),F$y.on("mouseup",this,this.onCellMouse),this._cells.push(F$y)},F$t.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var F$y=0,F$j=F$y=0;F$j<1e4;F$j++){var F$t=this.getChildByName("item"+F$j);if(!F$t)break;this.addCell(F$t),F$y++}this.repeatY=F$y}},F$t.setContentSize=function(F$y,F$j){this._content.width=F$y,this._content.height=F$j,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new F$n),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,F$y,F$j),this._content.scrollRect=this._content.scrollRect),this.event("resize")},F$t.onCellMouse=function(F$y){"mousedown"===F$y.type&&(this._isMoved=!1);var F$j=F$y.currentTarget,F$t=this._startIndex+this._cells.indexOf(F$j);F$t<0||("click"===F$y.type||"rightclick"===F$y.type?this.selectEnable&&!this._isMoved?this.selectedIndex=F$t:this.changeCellState(F$j,!0,0):"mouseover"!==F$y.type&&"mouseout"!==F$y.type||this._selectedIndex===F$t||this.changeCellState(F$j,"mouseover"===F$y.type,0),this.mouseHandler&&this.mouseHandler.runWith([F$y,F$t]))},F$t.changeCellState=function(F$y,F$j,F$t){var F$k=F$y.getChildByName("selectBox");F$k&&(this.selectEnable=!0,F$k.visible=F$j,F$k.index=F$t)},F$t.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},F$t.onScrollBarChange=function(F$y){this.runCallLater(this.changeCells);var F$j=this._scrollBar.value,F$t=this._isVertical?this.repeatX:this.repeatY,F$k=this._isVertical?this.repeatY:this.repeatX,F$T=Math.floor(F$j/this._cellSize);if(this.cacheContent)F$A=F$k+1,this._createdLine-F$T<F$A&&(this._createItems(this._createdLine,F$t,this._createdLine+F$A),this.renderItems(this._createdLine*F$t,0),this._createdLine+=F$A);else{var F$Y=F$T*F$t,F$A=0;if(F$Y>this._startIndex){F$A=F$Y-this._startIndex;var F$X=!0,F$I=this._startIndex+F$t*(F$k+1);this._isMoved=!0}else F$Y<this._startIndex&&(F$A=this._startIndex-F$Y,F$X=!1,F$I=this._startIndex-1,this._isMoved=!0);for(var F$b=0;F$b<F$A;F$b++){if(F$X){var F$D=this._cells.shift();this._cells[this._cells.length]=F$D;var F$l=F$I+F$b}else F$D=this._cells.pop(),this._cells.unshift(F$D),F$l=F$I-F$b;var F$r=Math.floor(F$l/F$t)*this._cellSize;this._isVertical?F$D.y=F$r:F$D.x=F$r,this.renderItem(F$D,F$l)}this._startIndex=F$Y,this.changeSelectStatus()}var F$$=this._content.scrollRect;this._isVertical?(F$$.y=F$j-this._offset.y,F$$.x=-this._offset.x):(F$$.y=-this._offset.y,F$$.x=F$j-this._offset.x),this._content.scrollRect=F$$},F$t.posCell=function(F$y,F$j){if(this._scrollBar){var F$t=this._isVertical?this.repeatX:this.repeatY,F$k=(this._isVertical?this.repeatY:this.repeatX,Math.floor(F$j/F$t)*this._cellSize);this._isVertical?F$y.y=F$k:F$y.x=F$k}},F$t.changeSelectStatus=function(){for(var F$y=0,F$j=this._cells.length;F$y<F$j;F$y++)this.changeCellState(this._cells[F$y],this._selectedIndex===this._startIndex+F$y,1)},F$t.renderItems=function(F$y,F$j){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0);for(var F$t=F$y,F$k=F$j||this._cells.length;F$t<F$k;F$t++)this.renderItem(this._cells[F$t],this._startIndex+F$t);this.changeSelectStatus(),this._twDone=!0},F$t.renderItem=function(F$y,F$j){this._array&&0<=F$j&&F$j<this._array.length?(F$y.visible=!0,F$y._$bindData?(F$y._dataSource=this._array[F$j],this._bindData(F$y,this._array[F$j])):F$y.dataSource=this._array[F$j],this.cacheContent||this.posCell(F$y,F$j),this.hasListener("render")&&this.event("render",[F$y,F$j]),this.renderHandler&&this.renderHandler.runWith([F$y,F$j]),this.renderTwHandler&&this.renderTwHandler.runWith([F$y,F$j])):(F$y.visible=!1,F$y.dataSource=null)},F$t._bindData=function(F$y,F$j){for(var F$t=F$y._$bindData,F$k=0,F$T=F$t.length;F$k<F$T;F$k++){var F$Y=F$t[F$k++],F$A=F$t[F$k++],F$X=F$t[F$k],F$I=F$Q.getBindFun(F$X);F$Y[F$A]=F$I.call(this,F$j)}},F$t.refresh=function(){this.array=this._array},F$t.getItem=function(F$y){return-1<F$y&&F$y<this._array.length?this._array[F$y]:null},F$t.changeItem=function(F$y,F$j){-1<F$y&&F$y<this._array.length&&(this._array[F$y]=F$j,F$y>=this._startIndex&&F$y<this._startIndex+this._cells.length&&this.renderItem(this.getCell(F$y),F$y))},F$t.setItem=function(F$y,F$j){this.changeItem(F$y,F$j)},F$t.addItem=function(F$y){this._array.push(F$y),this.array=this._array},F$t.addItemAt=function(F$y,F$j){this._array.splice(F$j,0,F$y),this.array=this._array},F$t.deleteItem=function(F$y){this._array.splice(F$y,1),this.array=this._array},F$t.getCell=function(F$y){return this.runCallLater(this.changeCells),-1<F$y&&this._cells?this._cells[(F$y-this._startIndex)%this._cells.length]:null},F$t.scrollTo=function(F$y){if(this._scrollBar){var F$j=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(F$y/F$j)*this._cellSize}else this.startIndex=F$y},F$t.tweenTo=function(F$y,F$j,F$t){if(void 0===F$j&&(F$j=200),this._scrollBar){var F$k=this._isVertical?this.repeatX:this.repeatY;F$N.to(this._scrollBar,{value:Math.floor(F$y/F$k)*this._cellSize},F$j,null,F$t,0,!0)}else this.startIndex=F$y,F$t&&F$t.run()},F$t._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},F$t.commitMeasure=function(){this.runCallLater(this.changeCells)},F$A(0,F$t,"cacheAs",F$y.prototype._$get_cacheAs,function(F$y){F$z.superSet(F$S,this,"cacheAs",F$y),this._scrollBar&&(this._$P.cacheAs=null,"none"!==F$y?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),F$A(0,F$t,"content",function(){return this._content}),F$A(0,F$t,"height",F$y.prototype._$get_height,function(F$y){F$y!=this._height&&(F$z.superSet(F$S,this,"height",F$y),this._setCellChanged())}),F$A(0,F$t,"itemRender",function(){return this._itemRender},function(F$y){if(this._itemRender!=F$y){this._itemRender=F$y;for(var F$j=this._cells.length-1;-1<F$j;F$j--)this._cells[F$j].destroy();this._cells.length=0,this._setCellChanged()}}),F$A(0,F$t,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$y){this._removePreScrollBar();var F$j=new F$jy;F$j.name="scrollBar",F$j.right=0,F$y&&" "!=F$y&&(F$j.skin=F$y),this.scrollBar=F$j,this.addChild(F$j),this._setCellChanged()}),F$A(0,F$t,"page",function(){return this._page},function(F$y){this._page=F$y,this._array&&(this._page=0<F$y?F$y:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),F$A(0,F$t,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(F$y){this._removePreScrollBar();var F$j=new F$c;F$j.name="scrollBar",F$j.bottom=0,F$y&&" "!=F$y&&(F$j.skin=F$y),this.scrollBar=F$j,this.addChild(F$j),this._setCellChanged()}),F$A(0,F$t,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(F$y){this._repeatX=F$y,this._setCellChanged()}),F$A(0,F$t,"scrollBar",function(){return this._scrollBar},function(F$y){this._scrollBar!=F$y&&(this._scrollBar=F$y)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),F$A(0,F$t,"width",F$y.prototype._$get_width,function(F$y){F$y!=this._width&&(F$z.superSet(F$S,this,"width",F$y),this._setCellChanged())}),F$A(0,F$t,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(F$y){this._repeatY=F$y,this._setCellChanged()}),F$A(0,F$t,"spaceX",function(){return this._spaceX},function(F$y){this._spaceX=F$y,this._setCellChanged()}),F$A(0,F$t,"spaceY",function(){return this._spaceY},function(F$y){this._spaceY=F$y,this._setCellChanged()}),F$A(0,F$t,"selectedIndex",function(){return this._selectedIndex},function(F$y){this._selectedIndex!=F$y&&(this._selectedIndex=F$y,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(F$y),this.startIndex=this._startIndex)}),F$A(0,F$t,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(F$y){this.selectedIndex=this._array.indexOf(F$y)}),F$A(0,F$t,"length",function(){return this._array?this._array.length:0}),F$A(0,F$t,"selection",function(){return this.getCell(this._selectedIndex)},function(F$y){this.selectedIndex=this._startIndex+this._cells.indexOf(F$y)}),F$A(0,F$t,"startIndex",function(){return this._startIndex},function(F$y){this._startIndex=0<F$y?F$y:0,this.callLater(this.renderItems)}),F$A(0,F$t,"twSwitch",function(){return this._twSwitch},function(F$y){this._twSwitch=F$y}),F$A(0,F$t,"twDone",function(){return this._twDone},function(F$y){this._twDone=F$y}),F$A(0,F$t,"array",function(){return this._array},function(F$y){this.runCallLater(this.changeCells),this._array=F$y||[];var F$j=this._array.length;if(this.totalPage=Math.ceil(F$j/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<F$j?this._selectedIndex:F$j-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var F$t=this._isVertical?this.repeatX:this.repeatY,F$k=this._isVertical?this.repeatY:this.repeatX,F$T=Math.ceil(F$j/F$t);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=F$k/F$T,this._scrollBar.setScroll(0,(F$T-F$k)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),F$A(0,F$t,"dataSource",F$y.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)&&Math.floor(F$y)==F$y||"string"==typeof F$y?this.selectedIndex=parseInt(F$y):F$y instanceof Array?this.array=F$y:F$z.superSet(F$S,this,"dataSource",F$y)}),F$A(0,F$t,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),F$j}(F$S),F$c=function(F$y){function F$j(){F$j.__super.call(this)}return F$Y(F$j,"laya.ui.HScrollBar",F$y),F$j.prototype.initialize=function(){F$y.prototype.initialize.call(this),this.slider.isVertical=!1},F$j}(F$G),F$L=function(F$y){function F$j(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,F$j.__super.call(this),this.width=this.height=100}F$Y(F$j,"laya.ui.Panel",F$y);var F$t=F$j.prototype;return F$t.destroy=function(F$y){void 0===F$y&&(F$y=!0),laya.ui.Component.prototype.destroy.call(this,F$y),this._content&&this._content.destroy(F$y),this._vScrollBar&&this._vScrollBar.destroy(F$y),this._hScrollBar&&this._hScrollBar.destroy(F$y),this._vScrollBar=null,this._hScrollBar=null,this._content=null},F$t.destroyChildren=function(){this._content.destroyChildren()},F$t.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new F$S)},F$t.addChild=function(F$y){return F$y.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(F$y)},F$t.onResize=function(){this._setScrollChanged()},F$t.addChildAt=function(F$y,F$j){return F$y.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(F$y,F$j)},F$t.removeChild=function(F$y){return F$y.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(F$y)},F$t.removeChildAt=function(F$y){return this.getChildAt(F$y).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(F$y)},F$t.removeChildren=function(F$y,F$j){return void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=2147483647),this._content.removeChildren(F$y,F$j),this._setScrollChanged(),this},F$t.getChildAt=function(F$y){return this._content.getChildAt(F$y)},F$t.getChildByName=function(F$y){return this._content.getChildByName(F$y)},F$t.getChildIndex=function(F$y){return this._content.getChildIndex(F$y)},F$t.changeScroll=function(){this._scrollChanged=!1;var F$y=this.contentWidth||1,F$j=this.contentHeight||1,F$t=this._vScrollBar,F$k=this._hScrollBar,F$T=F$t&&F$j>this._height,F$Y=F$k&&F$y>this._width,F$A=F$T?this._width-F$t.width:this._width,F$X=F$Y?this._height-F$k.height:this._height;F$t&&(F$t.x=this._width-F$t.width,F$t.y=0,F$t.height=this._height-(F$Y?F$k.height:0),F$t.scrollSize=Math.max(.033*this._height,1),F$t.thumbPercent=F$X/F$j,F$t.setScroll(0,F$j-F$X,F$t.value)),F$k&&(F$k.x=0,F$k.y=this._height-F$k.height,F$k.width=this._width-(F$T?F$t.width:0),F$k.scrollSize=Math.max(.033*this._width,1),F$k.thumbPercent=F$A/F$y,F$k.setScroll(0,F$y-F$A,F$k.value))},F$t.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},F$t.setContentSize=function(F$y,F$j){var F$t=this._content;F$t.width=F$y,F$t.height=F$j,F$t.scrollRect||(F$t.scrollRect=new F$n),F$t.scrollRect.setTo(0,0,F$y,F$j),F$t.scrollRect=F$t.scrollRect},F$t.onScrollBarChange=function(F$y){var F$j=this._content.scrollRect;if(F$j){var F$t=Math.round(F$y.value);F$y.isVertical?F$j.y=F$t:F$j.x=F$t,this._content.scrollRect=F$j}},F$t.scrollTo=function(F$y,F$j){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),this.vScrollBar&&(this.vScrollBar.value=F$j),this.hScrollBar&&(this.hScrollBar.value=F$y)},F$t.refresh=function(){this.changeScroll()},F$t.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=F$z.superGet(F$S,this,"cacheAs")),F$z.superSet(F$S,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},F$t.onScrollEnd=function(){F$z.superSet(F$S,this,"cacheAs",this._$P.cacheAs)},F$t._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},F$A(0,F$t,"numChildren",function(){return this._content.numChildren}),F$A(0,F$t,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$y){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new F$c),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=F$y}),F$A(0,F$t,"contentWidth",function(){for(var F$y=0,F$j=this._content.numChildren-1;-1<F$j;F$j--){var F$t=this._content.getChildAt(F$j);F$y=Math.max(F$t.x+F$t.width*F$t.scaleX,F$y)}return F$y}),F$A(0,F$t,"contentHeight",function(){for(var F$y=0,F$j=this._content.numChildren-1;-1<F$j;F$j--){var F$t=this._content.getChildAt(F$j);F$y=Math.max(F$t.y+F$t.height*F$t.scaleY,F$y)}return F$y}),F$A(0,F$t,"width",F$y.prototype._$get_width,function(F$y){F$z.superSet(F$S,this,"width",F$y),this._setScrollChanged()}),F$A(0,F$t,"hScrollBar",function(){return this._hScrollBar}),F$A(0,F$t,"content",function(){return this._content}),F$A(0,F$t,"height",F$y.prototype._$get_height,function(F$y){F$z.superSet(F$S,this,"height",F$y),this._setScrollChanged()}),F$A(0,F$t,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$y){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new F$jy),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=F$y}),F$A(0,F$t,"vScrollBar",function(){return this._vScrollBar}),F$A(0,F$t,"cacheAs",F$y.prototype._$get_cacheAs,function(F$y){F$z.superSet(F$S,this,"cacheAs",F$y),this._$P.cacheAs=null,"none"!==F$y?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),F$j}(F$S),F$o=function(F$y){function F$j(F$y){F$j.__super.call(this,F$y),this.isVertical=!1}return F$Y(F$j,"laya.ui.HSlider",F$g),F$j}(),F$i=function(F$y){function F$t(F$y,F$j){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,F$t.__super.call(this),this.skin=F$j,this.labels=F$y}F$Y(F$t,"laya.ui.UIGroup",F$y);var F$j=F$t.prototype;return F$z.imps(F$j,{"laya.ui.IItem":!0}),F$j.preinitialize=function(){this.mouseEnabled=!0},F$j.destroy=function(F$y){void 0===F$y&&(F$y=!0),laya.ui.Component.prototype.destroy.call(this,F$y),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},F$j.addItem=function(F$y,F$j){void 0===F$j&&(F$j=!0);var F$t=F$y,F$k=this._items.length;if(F$t.name="item"+F$k,this.addChild(F$t),this.initItems(),F$j&&0<F$k){var F$T=this._items[F$k-1];"horizontal"==this._direction?F$t.x=F$T.x+F$T.width+this._space:F$t.y=F$T.y+F$T.height+this._space}else F$j&&(F$t.x=0,F$t.y=0);return F$k},F$j.delItem=function(F$y,F$j){void 0===F$j&&(F$j=!0);var F$t=this._items.indexOf(F$y);if(-1!=F$t){var F$k=F$y;this.removeChild(F$k);for(var F$T=F$t+1,F$Y=this._items.length;F$T<F$Y;F$T++){var F$A=this._items[F$T];F$A.name="item"+(F$T-1),F$j&&("horizontal"==this._direction?F$A.x-=F$k.width+this._space:F$A.y-=F$k.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var F$X;F$X=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=F$X}}},F$j.initItems=function(){this._items||(this._items=[]);for(var F$y=this._items.length=0;F$y<1e4;F$y++){var F$j=this.getChildByName("item"+F$y);if(null==F$j)break;this._items.push(F$j),F$j.selected=F$y===this._selectedIndex,F$j.clickHandler=F$r.create(this,this.itemClick,[F$y],!1)}},F$j.itemClick=function(F$y){this.selectedIndex=F$y},F$j.setSelect=function(F$y,F$j){this._items&&-1<F$y&&F$y<this._items.length&&(this._items[F$y].selected=F$j)},F$j.createItem=function(F$y,F$j){return null},F$j.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var F$y=0,F$j=0,F$t=this._items.length;F$j<F$t;F$j++){var F$k=this._items[F$j];this._skin&&(F$k.skin=this._skin),this._labelColors&&(F$k.labelColors=this._labelColors),this._labelSize&&(F$k.labelSize=this._labelSize),this._labelStroke&&(F$k.labelStroke=this._labelStroke),this._labelStrokeColor&&(F$k.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(F$k.strokeColors=this._strokeColors),this._labelBold&&(F$k.labelBold=this._labelBold),this._labelPadding&&(F$k.labelPadding=this._labelPadding),this._labelAlign&&(F$k.labelAlign=this._labelAlign),this._stateNum&&(F$k.stateNum=this._stateNum),this._labelFont&&(F$k.labelFont=this._labelFont),"horizontal"===this._direction?(F$k.y=0,F$k.x=F$y,F$y+=F$k.width+this._space):(F$k.x=0,F$k.y=F$y,F$y+=F$k.height+this._space)}this.changeSize()},F$j.commitMeasure=function(){this.runCallLater(this.changeLabels)},F$j._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},F$A(0,F$j,"labelStrokeColor",function(){return this._labelStrokeColor},function(F$y){this._labelStrokeColor!=F$y&&(this._labelStrokeColor=F$y,this._setLabelChanged())}),F$A(0,F$j,"skin",function(){return this._skin},function(F$y){this._skin!=F$y&&(this._skin=F$y,this._setLabelChanged())}),F$A(0,F$j,"selectedIndex",function(){return this._selectedIndex},function(F$y){this._selectedIndex!=F$y&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$y,this.setSelect(F$y,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),F$A(0,F$j,"labels",function(){return this._labels},function(F$y){if(this._labels!=F$y){if(this._labels=F$y,this.removeChildren(),this._setLabelChanged(),this._labels)for(var F$j=this._labels.split(","),F$t=0,F$k=F$j.length;F$t<F$k;F$t++){var F$T=this.createItem(this._skin,F$j[F$t]);F$T.name="item"+F$t,this.addChild(F$T)}this.initItems()}}),F$A(0,F$j,"strokeColors",function(){return this._strokeColors},function(F$y){this._strokeColors!=F$y&&(this._strokeColors=F$y,this._setLabelChanged())}),F$A(0,F$j,"labelColors",function(){return this._labelColors},function(F$y){this._labelColors!=F$y&&(this._labelColors=F$y,this._setLabelChanged())}),F$A(0,F$j,"labelStroke",function(){return this._labelStroke},function(F$y){this._labelStroke!=F$y&&(this._labelStroke=F$y,this._setLabelChanged())}),F$A(0,F$j,"labelSize",function(){return this._labelSize},function(F$y){this._labelSize!=F$y&&(this._labelSize=F$y,this._setLabelChanged())}),F$A(0,F$j,"stateNum",function(){return this._stateNum},function(F$y){this._stateNum!=F$y&&(this._stateNum=F$y,this._setLabelChanged())}),F$A(0,F$j,"labelBold",function(){return this._labelBold},function(F$y){this._labelBold!=F$y&&(this._labelBold=F$y,this._setLabelChanged())}),F$A(0,F$j,"labelFont",function(){return this._labelFont},function(F$y){this._labelFont!=F$y&&(this._labelFont=F$y,this._setLabelChanged())}),F$A(0,F$j,"labelPadding",function(){return this._labelPadding},function(F$y){this._labelPadding!=F$y&&(this._labelPadding=F$y,this._setLabelChanged())}),F$A(0,F$j,"direction",function(){return this._direction},function(F$y){this._direction=F$y,this._setLabelChanged()}),F$A(0,F$j,"space",function(){return this._space},function(F$y){this._space=F$y,this._setLabelChanged()}),F$A(0,F$j,"items",function(){return this._items}),F$A(0,F$j,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$y){this.selectedIndex=this._items.indexOf(F$y)}),F$A(0,F$j,"dataSource",F$y.prototype._$get_dataSource,function(F$y){"number"==typeof(this._dataSource=F$y)&&Math.floor(F$y)==F$y||"string"==typeof F$y?this.selectedIndex=parseInt(F$y):F$y instanceof Array?this.labels=F$y.join(","):F$z.superSet(F$S,this,"dataSource",F$y)}),F$t}(F$S),F$E=function(F$j){function F$t(F$y,F$j){this._value=null,void 0===F$j&&(F$j=""),F$t.__super.call(this,F$y,F$j)}F$Y(F$t,"laya.ui.Radio",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._value=null},F$y.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},F$y.initialize=function(){F$j.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},F$y.onClick=function(F$y){this.selected=!0},F$A(0,F$y,"value",function(){return null!=this._value?this._value:this.label},function(F$y){this._value=F$y}),F$t}(F$H),F$u=function(F$y){function F$j(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,F$j.__super.call(this),this.width=this.height=200}F$Y(F$j,"laya.ui.Tree",F$y);var F$t=F$j.prototype;return F$z.imps(F$t,{"laya.ui.IRender":!0}),F$t.destroy=function(F$y){void 0===F$y&&(F$y=!0),laya.ui.Component.prototype.destroy.call(this,F$y),this._list&&this._list.destroy(F$y),this._list=null,this._source=null,this._renderHandler=null},F$t.createChildren=function(){this.addChild(this._list=new F$B),this._list.renderHandler=F$r.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},F$t.onListChange=function(F$y){this.event("change")},F$t.getArray=function(){var F$y,F$j=[];for(var F$t in this._source)F$y=this._source[F$t],this.getParentOpenStatus(F$y)&&(F$y.x=this._spaceLeft*this.getDepth(F$y),F$j.push(F$y));return F$j},F$t.getDepth=function(F$y,F$j){return void 0===F$j&&(F$j=0),null==F$y.nodeParent?F$j:this.getDepth(F$y.nodeParent,F$j+1)},F$t.getParentOpenStatus=function(F$y){var F$j=F$y.nodeParent;return null==F$j||!!F$j.isOpen&&(null==F$j.nodeParent||this.getParentOpenStatus(F$j))},F$t.renderItem=function(F$y,F$j){var F$t=F$y.dataSource;if(F$t){F$y.left=F$t.x;var F$k=F$y.getChildByName("arrow");F$k&&(F$t.hasChild?(F$k.visible=!0,F$k.index=F$t.isOpen?1:0,F$k.tag=F$j,F$k.off("click",this,this.onArrowClick),F$k.on("click",this,this.onArrowClick)):F$k.visible=!1);var F$T=F$y.getChildByName("folder");F$T&&(2==F$T.clipY?F$T.index=F$t.isDirectory?0:1:F$T.index=F$t.isDirectory?F$t.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([F$y,F$j])}},F$t.onArrowClick=function(F$y){var F$j=F$y.currentTarget.tag;this._list.array[F$j].isOpen=!this._list.array[F$j].isOpen,this.event("open"),this._list.array=this.getArray()},F$t.setItemState=function(F$y,F$j){this._list.array[F$y]&&(this._list.array[F$y].isOpen=F$j,this._list.array=this.getArray())},F$t.fresh=function(){this._list.array=this.getArray(),this.repaint()},F$t.parseXml=function(F$y,F$j,F$t,F$k){var F$T,F$Y=F$y.childNodes,F$A=F$Y.length;if(!F$k){F$T={};var F$X,F$I=F$y.attributes;for(var F$b in F$I){var F$D=(F$X=F$I[F$b]).nodeName,F$l=F$X.nodeValue;F$T[F$D]="true"==F$l||"false"!=F$l&&F$l}F$T.nodeParent=F$t,0<F$A&&(F$T.isDirectory=!0),F$T.hasChild=0<F$A,F$j.push(F$T)}for(var F$r=0;F$r<F$A;F$r++){var F$$=F$Y[F$r];this.parseXml(F$$,F$j,F$T,!1)}},F$t.parseOpenStatus=function(F$y,F$j){for(var F$t=0,F$k=F$j.length;F$t<F$k;F$t++){var F$T=F$j[F$t];if(F$T.isDirectory)for(var F$Y=0,F$A=F$y.length;F$Y<F$A;F$Y++){var F$X=F$y[F$Y];if(F$X.isDirectory&&this.isSameParent(F$X,F$T)&&F$T.label==F$X.label){F$T.isOpen=F$X.isOpen;break}}}},F$t.isSameParent=function(F$y,F$j){return null==F$y.nodeParent&&null==F$j.nodeParent||null!=F$y.nodeParent&&null!=F$j.nodeParent&&(F$y.nodeParent.label==F$j.nodeParent.label&&this.isSameParent(F$y.nodeParent,F$j.nodeParent))},F$t.filter=function(F$y){if(Boolean(F$y)){var F$j=[];this.getFilterSource(this._source,F$j,F$y),this._list.array=F$j}else this._list.array=this.getArray()},F$t.getFilterSource=function(F$y,F$j,F$t){var F$k;for(var F$T in F$t=F$t.toLocaleLowerCase(),F$y)!(F$k=F$y[F$T]).isDirectory&&-1<String(F$k.label).toLowerCase().indexOf(F$t)&&(F$k.x=0,F$j.push(F$k)),F$k.child&&0<F$k.child.length&&this.getFilterSource(F$k.child,F$j,F$t)},F$A(0,F$t,"spaceBottom",function(){return this._list.spaceY},function(F$y){this._list.spaceY=F$y}),F$A(0,F$t,"keepStatus",function(){return this._keepStatus},function(F$y){this._keepStatus=F$y}),F$A(0,F$t,"itemRender",function(){return this._list.itemRender},function(F$y){this._list.itemRender=F$y}),F$A(0,F$t,"array",function(){return this._list.array},function(F$y){this._keepStatus&&this._list.array&&F$y&&this.parseOpenStatus(this._list.array,F$y),this._source=F$y,this._list.array=this.getArray()}),F$A(0,F$t,"mouseHandler",function(){return this._list.mouseHandler},function(F$y){this._list.mouseHandler=F$y}),F$A(0,F$t,"dataSource",F$y.prototype._$get_dataSource,function(F$y){this._dataSource=F$y,F$z.superSet(F$S,this,"dataSource",F$y)}),F$A(0,F$t,"source",function(){return this._source}),F$A(0,F$t,"scrollBar",function(){return this._list.scrollBar}),F$A(0,F$t,"list",function(){return this._list}),F$A(0,F$t,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(F$y){this._list.vScrollBarSkin=F$y}),F$A(0,F$t,"renderHandler",function(){return this._renderHandler},function(F$y){this._renderHandler=F$y}),F$A(0,F$t,"selectedIndex",function(){return this._list.selectedIndex},function(F$y){this._list.selectedIndex=F$y}),F$A(0,F$t,"spaceLeft",function(){return this._spaceLeft},function(F$y){this._spaceLeft=F$y}),F$A(0,F$t,"selectedItem",function(){return this._list.selectedItem},function(F$y){this._list.selectedItem=F$y}),F$A(0,F$t,"width",F$y.prototype._$get_width,function(F$y){F$z.superSet(F$S,this,"width",F$y),this._list.width=F$y}),F$A(0,F$t,"height",F$y.prototype._$get_height,function(F$y){F$z.superSet(F$S,this,"height",F$y),this._list.height=F$y}),F$A(0,F$t,"xml",null,function(F$y){var F$j=[];this.parseXml(F$y.childNodes[0],F$j,null,!0),this.array=F$j}),F$A(0,F$t,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),F$j}(F$S),F$yy=function(F$y){function F$j(){this._items=null,this._selectedIndex=0,F$j.__super.call(this),this._setIndexHandler=F$r.create(this,this.setIndex,null,!1)}F$Y(F$j,"laya.ui.ViewStack",F$y);var F$t=F$j.prototype;return F$z.imps(F$t,{"laya.ui.IItem":!0}),F$t.setItems=function(F$y){this.removeChildren();for(var F$j=0,F$t=0,F$k=F$y.length;F$t<F$k;F$t++){var F$T=F$y[F$t];F$T&&(F$T.name="item"+F$j,this.addChild(F$T),F$j++)}this.initItems()},F$t.addItem=function(F$y){F$y.name="item"+this._items.length,this.addChild(F$y),this.initItems()},F$t.initItems=function(){this._items=[];for(var F$y=0;F$y<1e4;F$y++){var F$j=this.getChildByName("item"+F$y);if(null==F$j)break;this._items.push(F$j),F$j.visible=F$y==this._selectedIndex}},F$t.setSelect=function(F$y,F$j){this._items&&-1<F$y&&F$y<this._items.length&&(this._items[F$y].visible=F$j)},F$t.setIndex=function(F$y){this.selectedIndex=F$y},F$A(0,F$t,"dataSource",F$y.prototype._$get_dataSource,function(F$y){if("number"==typeof(this._dataSource=F$y)&&Math.floor(F$y)==F$y||"string"==typeof F$y)this.selectedIndex=parseInt(F$y);else for(var F$j in this._dataSource)this.hasOwnProperty(F$j)&&(this[F$j]=this._dataSource[F$j])}),F$A(0,F$t,"selectedIndex",function(){return this._selectedIndex},function(F$y){this._selectedIndex!=F$y&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=F$y,this.setSelect(this._selectedIndex,!0))}),F$A(0,F$t,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(F$y){this.selectedIndex=this._items.indexOf(F$y)}),F$A(0,F$t,"items",function(){return this._items}),F$A(0,F$t,"setIndexHandler",function(){return this._setIndexHandler},function(F$y){this._setIndexHandler=F$y}),F$j}(F$S),F$jy=function(F$y){function F$j(){F$j.__super.call(this)}return F$Y(F$j,"laya.ui.VScrollBar",F$G),F$j}(),F$ty=function(F$j){function F$t(F$y){this._bg=null,this._skin=null,F$t.__super.call(this),void 0===F$y&&(F$y=""),this.text=F$y,this.skin=this.skin}F$Y(F$t,"laya.ui.TextInput",F$j);var F$y=F$t.prototype;return F$y.preinitialize=function(){this.mouseEnabled=!0},F$y.destroy=function(F$y){F$C.clearCache(this,this._skin),void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._bg&&this._bg.destroy(),this._bg=null},F$y.createChildren=function(){this.addChild(this._tf=new F$$),this._tf.padding=F$f.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},F$y._onFocus=function(){this.event("focus",this)},F$y._onBlur=function(){this.event("blur",this)},F$y._onInput=function(){this.event("input",this)},F$y._onEnter=function(){this.event("enter",this)},F$y.initialize=function(){this.width=128,this.height=22},F$y.select=function(){this._tf.select()},F$y.setSelection=function(F$y,F$j){this._tf.setSelection(F$y,F$j)},F$A(0,F$y,"text",F$j.prototype._$get_text,function(F$y){this._tf.text!=F$y&&(F$y+="",this._tf.text=F$y,this.event("change"))}),F$A(0,F$y,"bg",function(){return this._bg},function(F$y){this.graphics=this._bg=F$y}),F$A(0,F$y,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(F$y){this._tf.inputElementYAdjuster=F$y}),F$A(0,F$y,"multiline",function(){return this._tf.multiline},function(F$y){this._tf.multiline=F$y}),F$A(0,F$y,"skin",function(){return this._skin},function(F$y){this._skin!=F$y&&(F$C.clearCache(this,this._skin),this._skin=F$y,this._bg||(this.graphics=this._bg=new F$U),F$C.keepCache(this,this._skin),this._bg.source=F$C.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),F$A(0,F$y,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(F$y){this._bg||(this.graphics=this._bg=new F$U),this._bg.sizeGrid=F$Q.fillArray(F$f.defaultSizeGrid,F$y,Number)}),F$A(0,F$y,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(F$y){this._tf.inputElementXAdjuster=F$y}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$J,this,"width",F$y),this._bg&&(this._bg.width=F$y)}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$J,this,"height",F$y),this._bg&&(this._bg.height=F$y)}),F$A(0,F$y,"editable",function(){return this._tf.editable},function(F$y){this._tf.editable=F$y}),F$A(0,F$y,"restrict",function(){return this._tf.restrict},function(F$y){this._tf.restrict=F$y}),F$A(0,F$y,"prompt",function(){return this._tf.prompt},function(F$y){this._tf.prompt=F$y}),F$A(0,F$y,"promptColor",function(){return this._tf.promptColor},function(F$y){this._tf.promptColor=F$y}),F$A(0,F$y,"maxChars",function(){return this._tf.maxChars},function(F$y){this._tf.maxChars=F$y}),F$A(0,F$y,"focus",function(){return this._tf.focus},function(F$y){this._tf.focus=F$y}),F$A(0,F$y,"type",function(){return this._tf.type},function(F$y){this._tf.type=F$y}),F$A(0,F$y,"asPassword",function(){return this._tf.asPassword},function(F$y){this._tf.asPassword=F$y}),F$t}(F$J),F$ky=function(F$y){function F$j(){F$j.__super.call(this)}return F$Y(F$j,"laya.ui.VSlider",F$g),F$j}(),F$Ty=function(F$y){function F$k(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,F$k.__super.call(this)}F$Y(F$k,"laya.ui.Dialog",F$y);var F$j=F$k.prototype;return F$j.initialize=function(){this.popupEffect=F$k.manager.popupEffectHandler,this.closeEffect=F$k.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},F$j._dealDragArea=function(){var F$y=this.getChildByName("drag");F$y&&(this.dragArea=F$y.x+","+F$y.y+","+F$y.width+","+F$y.height,F$y.removeSelf())},F$j._onClick=function(F$y){var F$j=F$y.target;if(F$j)switch(F$j.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(F$j.name)}},F$j.show=function(F$y,F$j){void 0===F$y&&(F$y=!1),void 0===F$j&&(F$j=!0),this._open(!1,F$y,F$j)},F$j.popup=function(F$y,F$j){void 0===F$y&&(F$y=!1),void 0===F$j&&(F$j=!0),this._open(!0,F$y,F$j)},F$j._open=function(F$y,F$j,F$t){F$k.manager.lock(!1),this.isModal=F$y,F$k.manager.open(this,F$j,F$t)},F$j.onOpened=function(){},F$j.close=function(F$y,F$j){void 0===F$j&&(F$j=!0),F$k.manager.close(this,F$y,F$j)},F$j.onClosed=function(F$y){},F$j._onMouseDown=function(F$y){var F$j=this.getMousePoint();this._dragArea.contains(F$j.x,F$j.y)?this.startDrag():this.stopDrag()},F$A(0,F$j,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(F$y){if(F$y){var F$j=F$Q.fillArray([0,0,0,0],F$y,Number);this._dragArea=new F$n(F$j[0],F$j[1],F$j[2],F$j[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),F$A(0,F$j,"isPopup",function(){return null!=this.parent}),F$A(0,F$j,"zOrder",F$y.prototype._$get_zOrder,function(F$y){F$z.superSet(F$O,this,"zOrder",F$y),F$k.manager._checkMask()}),F$A(1,F$k,"manager",function(){return F$k._manager=F$k._manager||new F$w},function(F$y){F$k._manager=F$y}),F$k.setLockView=function(F$y){F$k.manager.setLockView(F$y)},F$k.lock=function(F$y){F$k.manager.lock(F$y)},F$k.closeAll=function(){F$k.manager.closeAll()},F$k.getDialogsByGroup=function(F$y){return F$k.manager.getDialogsByGroup(F$y)},F$k.closeByGroup=function(F$y){return F$k.manager.closeByGroup(F$y)},F$k.CLOSE="close",F$k.CANCEL="cancel",F$k.SURE="sure",F$k.NO="no",F$k.OK="ok",F$k.YES="yes",F$k._manager=null,F$k}(F$O),F$Yy=function(F$y){function F$j(){F$j.__super.call(this)}F$Y(F$j,"laya.ui.HBox",F$y);var F$t=F$j.prototype;return F$t.sortItem=function(F$y){F$y&&F$y.sort(function(F$y,F$j){return F$y.x-F$j.x})},F$t.changeItems=function(){this._itemChanged=!1;for(var F$y=[],F$j=0,F$t=0,F$k=this.numChildren;F$t<F$k;F$t++){var F$T=this.getChildAt(F$t);F$T&&F$T.layoutEnabled&&(F$y.push(F$T),F$j=this._height?this._height:Math.max(F$j,F$T.height*F$T.scaleY))}this.sortItem(F$y);var F$Y=0;for(F$t=0,F$k=F$y.length;F$t<F$k;F$t++)(F$T=F$y[F$t]).x=F$Y,F$Y+=F$T.width*F$T.scaleX+this._space,"top"==this._align?F$T.y=0:"middle"==this._align?F$T.y=.5*(F$j-F$T.height*F$T.scaleY):"bottom"==this._align&&(F$T.y=F$j-F$T.height*F$T.scaleY);this.changeSize()},F$A(0,F$t,"height",F$y.prototype._$get_height,function(F$y){this._height!=F$y&&(F$z.superSet(F$Z,this,"height",F$y),this.callLater(this.changeItems))}),F$j.NONE="none",F$j.TOP="top",F$j.MIDDLE="middle",F$j.BOTTOM="bottom",F$j}(F$Z),F$Ay=function(F$y){function F$j(){F$j.__super.call(this)}F$Y(F$j,"laya.ui.VBox",F$y);var F$t=F$j.prototype;return F$t.changeItems=function(){this._itemChanged=!1;for(var F$y=[],F$j=0,F$t=0,F$k=this.numChildren;F$t<F$k;F$t++){var F$T=this.getChildAt(F$t);F$T&&F$T.layoutEnabled&&(F$y.push(F$T),F$j=this._width?this._width:Math.max(F$j,F$T.width*F$T.scaleX))}this.sortItem(F$y);var F$Y=0;for(F$t=0,F$k=F$y.length;F$t<F$k;F$t++)(F$T=F$y[F$t]).y=F$Y,F$Y+=F$T.height*F$T.scaleY+this._space,"left"==this._align?F$T.x=0:"center"==this._align?F$T.x=.5*(F$j-F$T.width*F$T.scaleX):"right"==this._align&&(F$T.x=F$j-F$T.width*F$T.scaleX);this.changeSize()},F$A(0,F$t,"width",F$y.prototype._$get_width,function(F$y){this._width!=F$y&&(F$z.superSet(F$Z,this,"width",F$y),this.callLater(this.changeItems))}),F$j.NONE="none",F$j.LEFT="left",F$j.CENTER="center",F$j.RIGHT="right",F$j}(F$Z),F$Xy=function(F$y){function F$j(){F$j.__super.call(this)}return F$Y(F$j,"laya.ui.RadioGroup",F$i),F$j.prototype.createItem=function(F$y,F$j){return new F$E(F$y,F$j)},F$j}(),F$Iy=function(F$y){function F$j(){F$j.__super.call(this)}return F$Y(F$j,"laya.ui.Tab",F$i),F$j.prototype.createItem=function(F$y,F$j){return new F$H(F$y,F$j)},F$j}(),F$by=function(F$j){function F$t(F$y){this._vScrollBar=null,this._hScrollBar=null,void 0===F$y&&(F$y=""),F$t.__super.call(this,F$y)}F$Y(F$t,"laya.ui.TextArea",F$j);var F$y=F$t.prototype;return F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},F$y.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},F$y.onVBarChanged=function(F$y){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},F$y.onHBarChanged=function(F$y){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},F$y.changeScroll=function(){var F$y=this._vScrollBar&&0<this._tf.maxScrollY,F$j=this._hScrollBar&&0<this._tf.maxScrollX,F$t=F$y?this._width-this._vScrollBar.width:this._width,F$k=F$j?this._height-this._hScrollBar.height:this._height,F$T=this._tf.padding||F$f.labelPadding;this._tf.width=F$t,this._tf.height=F$k,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-F$T[2],this._vScrollBar.y=F$T[1],this._vScrollBar.height=this._height-(F$j?this._hScrollBar.height:0)-F$T[1]-F$T[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=F$k/Math.max(this._tf.textHeight,F$k),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=F$y),this._hScrollBar&&(this._hScrollBar.x=F$T[0],this._hScrollBar.y=this._height-this._hScrollBar.height-F$T[3],this._hScrollBar.width=this._width-(F$y?this._vScrollBar.width:0)-F$T[0]-F$T[2],this._hScrollBar.scrollSize=Math.max(.033*F$t,1),this._hScrollBar.thumbPercent=F$t/Math.max(this._tf.textWidth,F$t),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=F$j)},F$y.scrollTo=function(F$y){this.commitMeasure(),this._tf.scrollY=F$y},F$A(0,F$y,"scrollY",function(){return this._tf.scrollY}),F$A(0,F$y,"width",F$j.prototype._$get_width,function(F$y){F$z.superSet(F$ty,this,"width",F$y),this.callLater(this.changeScroll)}),F$A(0,F$y,"hScrollBar",function(){return this._hScrollBar}),F$A(0,F$y,"height",F$j.prototype._$get_height,function(F$y){F$z.superSet(F$ty,this,"height",F$y),this.callLater(this.changeScroll)}),F$A(0,F$y,"maxScrollX",function(){return this._tf.maxScrollX}),F$A(0,F$y,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(F$y){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new F$jy),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=F$y}),F$A(0,F$y,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(F$y){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new F$c),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=F$y}),F$A(0,F$y,"vScrollBar",function(){return this._vScrollBar}),F$A(0,F$y,"maxScrollY",function(){return this._tf.maxScrollY}),F$A(0,F$y,"scrollX",function(){return this._tf.scrollX}),F$t}(F$ty);!function(F$y){function F$j(){this._uiView=null,this.isCloseOther=!1,F$j.__super.call(this)}F$Y(F$j,"laya.ui.AsynDialog",F$Ty);var F$t=F$j.prototype;F$t.createView=function(F$y){this._uiView=F$y},F$t._open=function(F$y,F$j,F$t){this.isModal=F$y,this.isCloseOther=F$j,F$Ty.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},F$t.onCreated=function(){this.createUI(),this.onOpen()},F$t.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},F$t.onOpen=function(){F$Ty.manager.open(this,this.isCloseOther),F$Ty.manager.lock(!1)},F$t.close=function(F$y,F$j){void 0===F$j&&(F$j=!0),F$Ty.manager.close(this),this.onClose()},F$t.onClose=function(){},F$t.destroy=function(F$y){void 0===F$y&&(F$y=!0),laya.ui.View.prototype.destroy.call(this,F$y),this._uiView=null,this.onDestroy()},F$t.onDestroy=function(){}}();F$z.__init([F$O])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$y,F$j){"use strict";for(var F$t in Object.defineProperty(F$j,"__esModule",{value:!0}),Laya){var F$k=Laya[F$t];F$k&&F$k.__isclass&&(F$j[F$t]=F$k)}}),function(F$r,F$y,F$e){F$e.un,F$e.uns;var F$l=F$e.static,F$$=F$e.class,F$W=F$e.getset,F$k=F$e.__newvec,F$_=laya.maths.Arith,F$A=laya.webgl.atlas.AtlasResourceManager,F$t=laya.webgl.shader.BaseShader,F$q=laya.utils.Browser,F$X=laya.webgl.utils.Buffer,F$v=laya.utils.Byte,F$T=laya.utils.ClassUtils,F$I=F$e.Config,F$Y=(laya.events.Event,laya.events.EventDispatcher),F$f=laya.utils.Handler,F$n=laya.net.Loader,F$j=laya.net.LoaderManager,F$b=(laya.maths.MathUtil,laya.display.Node),F$z=laya.renders.Render,F$D=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),F$V=laya.resource.Resource,F$C=laya.utils.RunDriver,F$M=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),F$N=laya.display.Sprite,F$P=laya.utils.Stat,F$d=laya.utils.StringKey,F$Q=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),F$p=laya.utils.Utils,F$m=laya.webgl.WebGL,F$U=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;F$e.interface("laya.d3.core.IClone"),F$e.interface("laya.d3.graphics.IVertex"),F$e.interface("laya.d3.core.render.IUpdate"),F$e.interface("laya.d3.core.scene.ITreeNode"),F$e.interface("laya.d3.core.render.IRenderable");(function(){function F$H(){}F$$(F$H,"laya.d3.animation.AnimationClipParser01"),F$H.READ_DATA=function(){F$H._DATA.offset=F$H._reader.getUint32(),F$H._DATA.size=F$H._reader.getUint32()},F$H.READ_BLOCK=function(){for(var F$y=F$H._BLOCK.count=F$H._reader.getUint16(),F$j=F$H._BLOCK.blockStarts=[],F$t=F$H._BLOCK.blockLengths=[],F$k=0;F$k<F$y;F$k++)F$j.push(F$H._reader.getUint32()),F$t.push(F$H._reader.getUint32())},F$H.READ_STRINGS=function(){var F$y=F$H._reader.getUint32(),F$j=F$H._reader.getUint16(),F$t=F$H._reader.pos;F$H._reader.pos=F$y+F$H._DATA.offset;for(var F$k=0;F$k<F$j;F$k++)F$H._strings[F$k]=F$H._reader.readUTFString();F$H._reader.pos=F$t},F$H.parse=function(F$y,F$j){F$H._animationClip=F$y;(F$H._reader=F$j).__getBuffer();F$H.READ_DATA(),F$H.READ_BLOCK(),F$H.READ_STRINGS();for(var F$t=0,F$k=F$H._BLOCK.count;F$t<F$k;F$t++){var F$T=F$j.getUint16(),F$Y=F$H._strings[F$T],F$A=F$H["READ_"+F$Y];if(null==F$A)throw new Error("model file err,no this function:"+F$T+" "+F$Y);F$A.call()}},F$H.READ_ANIMATIONS=function(){var F$y,F$j=0,F$t=0,F$k=F$H._reader,F$T=F$k.__getBuffer(),F$Y=[],F$A=F$k.getUint8();for(F$Y.length=F$A,F$j=0;F$j<F$A;F$j++)F$Y[F$j]=F$k.getUint16();var F$X=[],F$I=F$k.getUint16();for(F$X.length=F$I,F$j=0;F$j<F$I;F$j++)F$X[F$j]=F$k.getFloat32();var F$b=F$H._animationClip;F$b.name=F$H._strings[F$k.getUint16()];var F$D=F$b._duration=F$k.getFloat32();F$b.islooping=!!F$k.getByte(),F$b._frameRate=F$k.getInt16();var F$l=F$k.getInt16(),F$r=F$b._nodes=new Array;F$r.length=F$l,(F$b._publicClipDatas=[]).length=F$l;var F$$=F$b._nodesMap={},F$W=0,F$z=0;for(F$j=0;F$j<F$l;F$j++){F$y=F$r[F$j]=new F$h;var F$V=F$k.getUint16(),F$n=F$y.path=[];for(F$n.length=F$V,F$t=0;F$t<F$V;F$t++)F$n[F$t]=F$H._strings[F$k.getUint16()];var F$C=F$n.join("/"),F$M=F$$[F$C];F$M||(F$$[F$C]=F$M=[]),F$M.push(F$y);var F$_=F$k.getInt16();-1!==F$_&&(F$y.componentType=F$H._strings[F$_]);var F$e=F$a._propertyIndexDic[F$H._strings[F$k.getUint16()]];if(null==F$e)throw new Error("AnimationClipParser01:unknown property name.");var F$v=F$e<4,F$N=!F$v||F$v&&""===F$n[0];(F$y._cacheProperty=F$N)?F$W++:F$z++,F$y.propertyNameID=F$e;var F$P=F$Y[F$k.getUint8()];F$y.keyFrameWidth=F$P/4;var F$d=F$y.keyFrames=[],F$p=F$d.length=F$k.getUint16(),F$f=null,F$Q=NaN;for(F$t=0;F$t<F$p;F$t++){var F$m=F$d[F$t]=new F$J;F$Q=F$m.startTime=F$X[F$k.getUint16()];var F$U=F$k.pos;F$m.inTangent=new Float32Array(F$T.slice(F$U,F$U+F$P)),F$k.pos+=F$P,F$U=F$k.pos,F$m.outTangent=new Float32Array(F$T.slice(F$U,F$U+F$P)),F$k.pos+=F$P,F$U=F$k.pos,F$m.data=new Float32Array(F$T.slice(F$U,F$U+F$P)),F$k.pos+=F$P,F$f&&(F$f.next=F$m,F$f.duration=F$Q-F$f.startTime),F$f=F$m}F$m.next=null,F$m.duration=F$D-F$Q}var F$q=F$b._nodeToCachePropertyMap=new Int32Array(F$l),F$w=F$b._cachePropertyMap=new Int32Array(F$W),F$S=F$b._unCachePropertyMap=new Int32Array(F$z);for(F$W=F$z=0,F$j=0;F$j<F$l;F$j++)(F$y=F$r[F$j])._cacheProperty?(F$q[F$j]=F$W,F$w[F$W++]=F$j):F$S[F$z++]=F$j},F$H._animationClip=null,F$H._reader=null,F$H._strings=[],F$l(F$H,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function F$G(){}F$$(F$G,"laya.d3.animation.AnimationClipParser02"),F$G.READ_DATA=function(){F$G._DATA.offset=F$G._reader.getUint32(),F$G._DATA.size=F$G._reader.getUint32()},F$G.READ_BLOCK=function(){for(var F$y=F$G._BLOCK.count=F$G._reader.getUint16(),F$j=F$G._BLOCK.blockStarts=[],F$t=F$G._BLOCK.blockLengths=[],F$k=0;F$k<F$y;F$k++)F$j.push(F$G._reader.getUint32()),F$t.push(F$G._reader.getUint32())},F$G.READ_STRINGS=function(){var F$y=F$G._reader.getUint32(),F$j=F$G._reader.getUint16(),F$t=F$G._reader.pos;F$G._reader.pos=F$y+F$G._DATA.offset;for(var F$k=0;F$k<F$j;F$k++)F$G._strings[F$k]=F$G._reader.readUTFString();F$G._reader.pos=F$t},F$G.parse=function(F$y,F$j){F$G._animationClip=F$y;(F$G._reader=F$j).__getBuffer();F$G.READ_DATA(),F$G.READ_BLOCK(),F$G.READ_STRINGS();for(var F$t=0,F$k=F$G._BLOCK.count;F$t<F$k;F$t++){var F$T=F$j.getUint16(),F$Y=F$G._strings[F$T],F$A=F$G["READ_"+F$Y];if(null==F$A)throw new Error("model file err,no this function:"+F$T+" "+F$Y);F$A.call()}},F$G.READ_ANIMATIONS=function(){var F$y,F$j=0,F$t=0,F$k=F$G._reader,F$T=F$k.__getBuffer(),F$Y=[],F$A=F$k.getUint8();for(F$Y.length=F$A,F$j=0;F$j<F$A;F$j++)F$Y[F$j]=F$k.getUint16();var F$X=[],F$I=F$k.getUint16();for(F$X.length=F$I,F$j=0;F$j<F$I;F$j++)F$X[F$j]=F$k.getFloat32();var F$b=F$G._animationClip;F$b.name=F$G._strings[F$k.getUint16()];var F$D=F$b._duration=F$k.getFloat32();F$b.islooping=!!F$k.getByte(),F$b._frameRate=F$k.getInt16();var F$l=F$k.getInt16(),F$r=F$b._nodes=new Array;F$r.length=F$l,(F$b._publicClipDatas=[]).length=F$l;var F$$=F$b._nodesMap={},F$W=0,F$z=0;for(F$j=0;F$j<F$l;F$j++){F$y=F$r[F$j]=new F$h;var F$V=F$k.getUint16(),F$n=F$y.path=[];for(F$n.length=F$V,F$t=0;F$t<F$V;F$t++)F$n[F$t]=F$G._strings[F$k.getUint16()];var F$C=F$n.join("/"),F$M=F$$[F$C];F$M||(F$$[F$C]=F$M=[]),F$M.push(F$y);var F$_=F$k.getInt16();-1!==F$_&&(F$y.componentType=F$G._strings[F$_]);var F$e=F$a._propertyIndexDic[F$G._strings[F$k.getUint16()]];if(null==F$e)throw new Error("AnimationClipParser02:unknown property name.");var F$v=F$e<4,F$N=!F$v||F$v&&""===F$n[0];(F$y._cacheProperty=F$N)?F$W++:F$z++,F$y.propertyNameID=F$e;var F$P=F$Y[F$k.getUint8()];F$y.keyFrameWidth=F$P/4;var F$d=F$y.keyFrames=[],F$p=F$d.length=F$k.getUint16(),F$f=null,F$Q=NaN;for(F$t=0;F$t<F$p;F$t++){var F$m=F$d[F$t]=new F$J;F$Q=F$m.startTime=F$X[F$k.getUint16()];var F$U=F$k.pos;F$m.inTangent=new Float32Array(F$T.slice(F$U,F$U+F$P)),F$k.pos+=F$P,F$U=F$k.pos,F$m.outTangent=new Float32Array(F$T.slice(F$U,F$U+F$P)),F$k.pos+=F$P,F$U=F$k.pos,F$m.data=new Float32Array(F$T.slice(F$U,F$U+F$P)),F$k.pos+=F$P,F$f&&(F$f.next=F$m,F$f.duration=F$Q-F$f.startTime),F$f=F$m}F$m.next=null,F$m.duration=F$D-F$Q}var F$q=F$k.getUint16();for(F$j=0;F$j<F$q;F$j++){var F$w,F$S=new F$g;F$S.time=F$k.getFloat32(),F$S.eventName=F$G._strings[F$k.getUint16()];var F$H=F$k.getUint16();for(0<F$H&&(F$S.params=F$w=[]),F$t=0;F$t<F$H;F$t++){switch(F$k.getByte()){case 0:F$w.push(!!F$k.getByte());break;case 1:F$w.push(F$k.getInt32());break;case 2:F$w.push(F$k.getFloat32());break;case 3:F$w.push(F$G._strings[F$k.getUint16()]);break;default:throw new Error("unknown type.")}}F$b.addEvent(F$S)}var F$K=F$b._nodeToCachePropertyMap=new Int32Array(F$l),F$x=F$b._cachePropertyMap=new Int32Array(F$W),F$F=F$b._unCachePropertyMap=new Int32Array(F$z);for(F$W=F$z=0,F$j=0;F$j<F$l;F$j++)(F$y=F$r[F$j])._cacheProperty?(F$K[F$j]=F$W,F$x[F$W++]=F$j):F$F[F$z++]=F$j},F$G._animationClip=null,F$G._reader=null,F$G._strings=[],F$l(F$G,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var F$g=function(){function F$y(){this.time=NaN,this.eventName=null,this.params=null}return F$$(F$y,"laya.d3.animation.AnimationEvent"),F$y}(),F$a=function(){function F$k(){this._childs=[],this.transform=new F$Cj(this)}F$$(F$k,"laya.d3.animation.AnimationNode");var F$y=F$k.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.addChild=function(F$y){F$y._parent=this,F$y.transform.setParent(this.transform),this._childs.push(F$y)},F$y.removeChild=function(F$y){var F$j=this._childs.indexOf(F$y);-1!==F$j&&this._childs.splice(F$j,1)},F$y.getChildByName=function(F$y){for(var F$j=0,F$t=this._childs.length;F$j<F$t;F$j++){var F$k=this._childs[F$j];if(F$k.name===F$y)return F$k}return null},F$y.getChildByIndex=function(F$y){return this._childs[F$y]},F$y.getChildCount=function(){return this._childs.length},F$y.cloneTo=function(F$y){var F$j=F$y;F$j.name=this.name;for(var F$t=0,F$k=this._childs.length;F$t<F$k;F$t++){var F$T=this._childs[F$t],F$Y=F$T.clone();F$j.addChild(F$Y);var F$A=F$T.transform,F$X=F$Y.transform;F$X.setLocalPosition(F$A.getLocalPosition()),F$X.setLocalRotation(F$A.getLocalRotation()),F$X.setLocalScale(F$A.getLocalScale()),F$X._localRotationEuler=F$A._localRotationEuler,F$X._setWorldMatrixIgnoreUpdate(F$A.getWorldMatrix())}},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$k.__init__=function(){F$k.registerAnimationNodeProperty("localPosition",F$k._getLocalPosition,F$k._setLocalPosition),F$k.registerAnimationNodeProperty("localRotation",F$k._getLocalRotation,F$k._setLocalRotation),F$k.registerAnimationNodeProperty("localScale",F$k._getLocalScale,F$k._setLocalScale),F$k.registerAnimationNodeProperty("localRotationEuler",F$k._getLocalRotationEuler,F$k._setLocalRotationEuler),F$k.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",F$k._getParticleRenderSharedMaterialTintColor,F$k._setParticleRenderSharedMaterialTintColor),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",F$k._getMeshRenderSharedMaterialTilingOffset,F$k._setMeshRenderSharedMaterialTilingOffset),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",F$k._getMeshRenderSharedMaterialAlbedo,F$k._setMeshRenderSharedMaterialAlbedo),F$k.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",F$k._getSkinnedMeshRenderSharedMaterialTilingOffset,F$k._setSkinnedMeshRenderSharedMaterialTilingOffset),F$k.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",F$k._getSkinnedMeshRenderSharedMaterialAlbedo,F$k._setSkinnedMeshRenderSharedMaterialAlbedo),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",F$k._getMeshRenderSharedMaterialAlbedo,F$k._setMeshRenderSharedMaterialAlbedo),F$k.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",F$k._getSkinnedMeshRenderSharedMaterialAlbedo,F$k._setSkinnedMeshRenderSharedMaterialAlbedo),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",F$k._getMeshRenderSharedMaterialIntensity,F$k._setMeshRenderSharedMaterialIntensity),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",F$k._getMeshRenderSharedMaterialAlpha,F$k._setMeshRenderSharedMaterialAlpha),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",F$k._getMeshRenderSharedMaterialAlphaColor,F$k._setMeshRenderSharedMaterialAlphaColor),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",F$k._getMeshRenderSharedMaterialBaseColor,F$k._setMeshRenderSharedMaterialBaseColor),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",F$k._getMeshRenderSharedMaterialDissolve,F$k._setMeshRenderSharedMaterialDissolve),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",F$k._getMeshRenderSharedMaterialDissolveSpeed,F$k._setMeshRenderSharedMaterialDissolveSpeed),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",F$k._getMeshRenderSharedMaterialMMultiplier,F$k._setMeshRenderSharedMaterialMMultiplier),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",F$k._getMeshRenderSharedMaterialBaseScrollSpeedX,F$k._setMeshRenderSharedMaterialBaseScrollSpeedX),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",F$k._getMeshRenderSharedMaterialBaseScrollSpeedY,F$k._setMeshRenderSharedMaterialBaseScrollSpeedY),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",F$k._getMeshRenderSharedMaterialSecondScrollSpeedX,F$k._setMeshRenderSharedMaterialSecondScrollSpeedX),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",F$k._getMeshRenderSharedMaterialSecondScrollSpeedY,F$k._setMeshRenderSharedMaterialSecondScrollSpeedY),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",F$k._getMeshRenderSharedMaterialDetailTilingOffset,F$k._setMeshRenderSharedMaterialDetailTilingOffset),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",F$k._getMeshRenderSharedMaterialDissolveTilingOffset,F$k._setMeshRenderSharedMaterialDissolveTilingOffset),F$k.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",F$k._getMeshRenderSharedMaterialMaskTilingOffset,F$k._setMeshRenderSharedMaterialMaskTilingOffset)},F$k.registerAnimationNodeProperty=function(F$y,F$j,F$t){if(F$k._propertyIndexDic[F$y])throw new Error("AnimationNode: this propertyName has registered.");F$k._propertyIndexDic[F$y]=F$k._propertyIDCounter,F$k._propertyGetFuncs[F$k._propertyIDCounter]=F$j,F$k._propertySetFuncs[F$k._propertyIDCounter]=F$t,F$k._propertyIDCounter++},F$k._getLocalPosition=function(F$y,F$j){return F$y?F$y.transform.getLocalPosition():F$j._transform.localPosition.elements},F$k._setLocalPosition=function(F$y,F$j,F$t){if(F$y)F$y.transform.setLocalPosition(F$t);else{var F$k=F$j._transform,F$T=F$k.localPosition;F$T.elements=F$t,F$k.localPosition=F$T}},F$k._getLocalRotation=function(F$y,F$j){return F$y?F$y.transform.getLocalRotation():F$j._transform.localRotation.elements},F$k._setLocalRotation=function(F$y,F$j,F$t){if(F$y)F$y.transform.setLocalRotation(F$t);else{var F$k=F$j._transform,F$T=F$k.localRotation;F$T.elements=F$t,F$k.localRotation=F$T}},F$k._getLocalScale=function(F$y,F$j){return F$y?F$y.transform.getLocalScale():F$j._transform.localScale.elements},F$k._setLocalScale=function(F$y,F$j,F$t){if(F$y)F$y.transform.setLocalScale(F$t);else{var F$k=F$j._transform,F$T=F$k.localScale;F$T.elements=F$t,F$k.localScale=F$T}},F$k._getLocalRotationEuler=function(F$y,F$j){return F$y?F$y.transform.getLocalRotationEuler():F$j._transform.localRotationEuler.elements},F$k._setLocalRotationEuler=function(F$y,F$j,F$t){if(F$y)F$y.transform.setLocalRotationEuler(F$t);else{var F$k=F$j._transform,F$T=F$k.localRotationEuler;F$T.elements=F$t,F$k.localRotationEuler=F$T}},F$k._getMeshRenderSharedMaterialTilingOffset=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return F$j.meshRender.sharedMaterial.tilingOffset.elements},F$k._setMeshRenderSharedMaterialTilingOffset=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.meshRender.material).tilingOffset).elements=F$t,F$k.tilingOffset=F$T)}else(F$T=(F$k=F$j.meshRender.material).tilingOffset).elements=F$t,F$k.tilingOffset=F$T},F$k._getMeshRenderSharedMaterialAlbedo=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.albedoColor.elements:null}return F$j.meshRender.sharedMaterial.albedoColor.elements},F$k._setMeshRenderSharedMaterialAlbedo=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.meshRender.material).albedoColor).elements=F$t,F$k.albedoColor=F$T)}else(F$T=(F$k=F$j.meshRender.material).albedoColor).elements=F$t,F$k.albedoColor=F$T},F$k._getSkinnedMeshRenderSharedMaterialTilingOffset=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return F$j.skinnedMeshRender.sharedMaterial.tilingOffset.elements},F$k._setSkinnedMeshRenderSharedMaterialTilingOffset=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.skinnedMeshRender.material).tilingOffset).elements=F$t,F$k.tilingOffset=F$T)}else(F$T=(F$k=F$j.skinnedMeshRender.material).tilingOffset).elements=F$t,F$k.tilingOffset=F$T},F$k._getSkinnedMeshRenderSharedMaterialAlbedo=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return F$j.skinnedMeshRender.sharedMaterial.albedoColor.elements},F$k._setSkinnedMeshRenderSharedMaterialAlbedo=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.skinnedMeshRender.material).albedoColor).elements=F$t,F$k.albedoColor=F$T)}else(F$T=(F$k=F$j.skinnedMeshRender.material).albedoColor).elements=F$t,F$k.albedoColor=F$T},F$k._getParticleRenderSharedMaterialTintColor=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.particleRender.sharedMaterial.tintColor.elements:null}return F$j.particleRender.sharedMaterial.tintColor.elements},F$k._setParticleRenderSharedMaterialTintColor=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.particleRender.material).tintColor).elements=F$t,F$k.tintColor=F$T)}else(F$T=(F$k=F$j.particleRender.material).tintColor).elements=F$t,F$k.tintColor=F$T},F$k._getMeshRenderSharedMaterialAlphaColor=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.alphaColor.elements:null}return F$j.meshRender.sharedMaterial.alphaColor.elements},F$k._setMeshRenderSharedMaterialAlphaColor=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.meshRender.material).alphaColor).elements=F$t,F$k.alphaColor=F$T)}else(F$T=(F$k=F$j.meshRender.material).alphaColor).elements=F$t,F$k.alphaColor=F$T},F$k._getMeshRenderSharedMaterialBaseColor=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.baseColor.elements:null}return F$j.meshRender.sharedMaterial.baseColor.elements},F$k._setMeshRenderSharedMaterialBaseColor=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.meshRender.material).baseColor).elements=F$t,F$k.baseColor=F$T)}else(F$T=(F$k=F$j.meshRender.material).baseColor).elements=F$t,F$k.baseColor=F$T},F$k._getMeshRenderSharedMaterialDissolve=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.dissolve:0}return F$j.meshRender.sharedMaterial.dissolve},F$k._setMeshRenderSharedMaterialDissolve=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.dissolve=F$t[0])}else F$j.meshRender.material.dissolve=F$t[0]},F$k._getMeshRenderSharedMaterialDissolveSpeed=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.dissolveSpeed:0}return F$j.meshRender.sharedMaterial.dissolveSpeed},F$k._setMeshRenderSharedMaterialDissolveSpeed=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.dissolveSpeed=F$t[0])}else F$j.meshRender.material.dissolveSpeed=F$t[0]},F$k._getMeshRenderSharedMaterialMMultiplier=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.mMultiplier:0}return F$j.meshRender.sharedMaterial.mMultiplier},F$k._setMeshRenderSharedMaterialMMultiplier=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.mMultiplier=F$t[0])}else F$j.meshRender.material.mMultiplier=F$t[0]},F$k._getMeshRenderSharedMaterialBaseScrollSpeedX=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return F$j.meshRender.sharedMaterial.baseScrollSpeedX},F$k._setMeshRenderSharedMaterialBaseScrollSpeedX=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.baseScrollSpeedX=F$t[0])}else F$j.meshRender.material.baseScrollSpeedX=F$t[0]},F$k._getMeshRenderSharedMaterialBaseScrollSpeedY=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return F$j.meshRender.sharedMaterial.baseScrollSpeedY},F$k._setMeshRenderSharedMaterialBaseScrollSpeedY=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.baseScrollSpeedY=F$t[0])}else F$j.meshRender.material.baseScrollSpeedY=F$t[0]},F$k._getMeshRenderSharedMaterialSecondScrollSpeedX=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return F$j.meshRender.sharedMaterial.secondScrollSpeedX},F$k._setMeshRenderSharedMaterialSecondScrollSpeedX=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.secondScrollSpeedX=F$t[0])}else F$j.meshRender.material.secondScrollSpeedX=F$t[0]},F$k._getMeshRenderSharedMaterialSecondScrollSpeedY=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return F$j.meshRender.sharedMaterial.secondScrollSpeedY},F$k._setMeshRenderSharedMaterialSecondScrollSpeedY=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.secondScrollSpeedY=F$t[0])}else F$j.meshRender.material.secondScrollSpeedY=F$t[0]},F$k._getMeshRenderSharedMaterialAlpha=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.alpha:0}return F$j.meshRender.sharedMaterial.alpha},F$k._setMeshRenderSharedMaterialAlpha=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.alpha=F$t[0])}else F$j.meshRender.material.alpha=F$t[0]},F$k._getMeshRenderSharedMaterialIntensity=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.intensity:0}return F$j.meshRender.sharedMaterial.intensity},F$k._setMeshRenderSharedMaterialIntensity=function(F$y,F$j,F$t){if(F$y){var F$k=F$y.transform._entity;F$k&&(F$k.owner.meshRender.material.intensity=F$t[0])}else F$j.meshRender.material.intensity=F$t[0]},F$k._getMeshRenderSharedMaterialDetailTilingOffset=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return F$j.meshRender.sharedMaterial.detailTilingOffset.elements},F$k._setMeshRenderSharedMaterialDetailTilingOffset=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.meshRender.material).detailTilingOffset).elements=F$t,F$k.detailTilingOffset=F$T)}else(F$T=(F$k=F$j.meshRender.material).detailTilingOffset).elements=F$t,F$k.detailTilingOffset=F$T},F$k._getMeshRenderSharedMaterialDissolveTilingOffset=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return F$j.meshRender.sharedMaterial.dissolveTilingOffset.elements},F$k._setMeshRenderSharedMaterialDissolveTilingOffset=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.meshRender.material).dissolveTilingOffset).elements=F$t,F$k.dissolveTilingOffset=F$T)}else(F$T=(F$k=F$j.meshRender.material).dissolveTilingOffset).elements=F$t,F$k.dissolveTilingOffset=F$T},F$k._getMeshRenderSharedMaterialMaskTilingOffset=function(F$y,F$j){if(F$y){var F$t=F$y.transform._entity;return F$t?F$t.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return F$j.meshRender.sharedMaterial.maskTilingOffset.elements},F$k._setMeshRenderSharedMaterialMaskTilingOffset=function(F$y,F$j,F$t){var F$k,F$T;if(F$y){var F$Y=F$y.transform._entity;F$Y&&((F$T=(F$k=F$Y.owner.meshRender.material).maskTilingOffset).elements=F$t,F$k.maskTilingOffset=F$T)}else(F$T=(F$k=F$j.meshRender.material).maskTilingOffset).elements=F$t,F$k.maskTilingOffset=F$T},F$k._propertyIDCounter=0,F$k._propertyIndexDic={},F$k._propertySetFuncs=[],F$k._propertyGetFuncs=[],F$k}(),F$J=function(){function F$y(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return F$$(F$y,"laya.d3.animation.Keyframe"),F$y}(),F$h=function(){function F$y(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return F$$(F$y,"laya.d3.animation.KeyframeNode"),F$y}(),F$w=(function(){function F$y(){this._tempVector30=new F$Aj,this._tempVector31=new F$Aj,this._tempVector32=new F$Aj,this._a=new F$Aj,this._b=new F$Aj,this._c=new F$Aj,this._d=new F$Aj}F$$(F$y,"laya.d3.core.glitter.SplineCurvePositionVelocity");var F$j=F$y.prototype;F$j.Init=function(F$y,F$j,F$t,F$k){F$y.cloneTo(this._d),F$j.cloneTo(this._c),F$Aj.scale(F$y,2,this._a),F$Aj.scale(F$t,2,this._tempVector30),F$Aj.subtract(this._a,this._tempVector30,this._a),F$Aj.add(this._a,F$j,this._a),F$Aj.add(this._a,F$k,this._a),F$Aj.scale(F$t,3,this._b),F$Aj.scale(F$y,3,this._tempVector30),F$Aj.subtract(this._b,this._tempVector30,this._b),F$Aj.subtract(this._b,F$k,this._b),F$Aj.scale(F$j,2,this._tempVector30),F$Aj.subtract(this._b,this._tempVector30,this._b)},F$j.Slerp=function(F$y,F$j){F$Aj.scale(this._a,F$y*F$y*F$y,this._tempVector30),F$Aj.scale(this._b,F$y*F$y,this._tempVector31),F$Aj.scale(this._c,F$y,this._tempVector32),F$Aj.add(this._tempVector30,this._tempVector31,F$j),F$Aj.add(F$j,this._tempVector32,F$j),F$Aj.add(F$j,this._d,F$j)}}(),function(){function F$x(F$y,F$j,F$t,F$k){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=F$y,this._h=F$j,this._minHeight=F$t,this._maxHeight=F$k}F$$(F$x,"laya.d3.core.HeightMap");var F$y=F$x.prototype;F$y._inBounds=function(F$y,F$j){return 0<=F$y&&F$y<this._h&&0<=F$j&&F$j<this._w},F$y.getHeight=function(F$y,F$j){return this._inBounds(F$y,F$j)?this._datas[F$y][F$j]:NaN},F$W(0,F$y,"width",function(){return this._w}),F$W(0,F$y,"height",function(){return this._h}),F$W(0,F$y,"maxHeight",function(){return this._maxHeight}),F$W(0,F$y,"minHeight",function(){return this._minHeight}),F$x.creatFromMesh=function(F$y,F$j,F$t,F$k){for(var F$T=[],F$Y=[],F$A=F$y.getSubMeshCount(),F$X=0;F$X<F$A;F$X++){for(var F$I=F$y.getSubMesh(F$X),F$b=F$I._getVertexBuffer(),F$D=F$b.getData(),F$l=[],F$r=0;F$r<F$D.length;F$r+=F$b.vertexDeclaration.vertexStride/4){var F$$=new F$Aj(F$D[F$r+0],F$D[F$r+1],F$D[F$r+2]);F$l.push(F$$)}F$T.push(F$l);var F$W=F$I._getIndexBuffer();F$Y.push(F$W.getData())}var F$z=F$y.boundingBox,F$V=F$z.min.x,F$n=F$z.min.z,F$C=F$z.max.x,F$M=F$z.max.z,F$_=F$z.min.y,F$e=F$z.max.y,F$v=F$C-F$V,F$N=F$M-F$n,F$P=F$k.elements[0]=F$v/(F$j-1),F$d=F$k.elements[1]=F$N/(F$t-1),F$p=new F$x(F$j,F$t,F$_,F$e),F$f=F$x._tempRay,F$Q=F$f.direction.elements;F$Q[0]=0,F$Q[1]=-1,F$Q[2]=0;var F$m=F$e+.1;F$f.origin.elements[1]=F$m;for(var F$U=0;F$U<F$t;F$U++){var F$q=F$n+F$U*F$d;F$p._datas[F$U]=[];for(var F$w=0;F$w<F$j;F$w++){var F$S=F$V+F$w*F$P,F$H=F$f.origin.elements;F$H[0]=F$S,F$H[2]=F$q;var F$K=F$x._getPosition(F$f,F$T,F$Y);F$p._datas[F$U][F$w]=F$K===Number.MAX_VALUE?NaN:F$m-F$K}}return F$p},F$x.createFromImage=function(F$y,F$j,F$t){for(var F$k=F$y.width,F$T=F$y.height,F$Y=new F$x(F$k,F$T,F$j,F$t),F$A=(F$t-F$j)/254,F$X=F$y.getPixels(),F$I=0,F$b=0;F$b<F$T;F$b++)for(var F$D=F$Y._datas[F$b]=[],F$l=0;F$l<F$k;F$l++){var F$r=F$X[F$I++],F$$=F$X[F$I++],F$W=F$X[F$I++],F$z=F$X[F$I++];F$D[F$l]=255==F$r&&255==F$$&&255==F$W&&255==F$z?NaN:(F$r+F$$+F$W)/3*F$A+F$j}return F$Y},F$x._getPosition=function(F$y,F$j,F$t){for(var F$k=Number.MAX_VALUE,F$T=0;F$T<F$j.length;F$T++)for(var F$Y=F$j[F$T],F$A=F$t[F$T],F$X=0;F$X<F$A.length;F$X+=3){var F$I=F$Y[F$A[F$X+0]],F$b=F$Y[F$A[F$X+1]],F$D=F$Y[F$A[F$X+2]],F$l=F$Wj.rayIntersectsTriangle(F$y,F$I,F$b,F$D);!isNaN(F$l)&&F$l<F$k&&(F$k=F$l)}return F$k},F$l(F$x,["_tempRay",function(){return this._tempRay=new F$Tj(new F$Aj,new F$Aj)}])}(),function(){function F$T(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}F$$(F$T,"laya.d3.core.Layer");var F$y=F$T.prototype;return F$y._binarySearchIndex=function(){for(var F$y=0,F$j=F$T._collsionTestList.length-1,F$t=0;F$y<=F$j;){F$t=Math.floor((F$y+F$j)/2);var F$k=F$T._collsionTestList[F$t];if(F$k==this._number)return F$t;F$k>this._number?F$j=F$t-1:F$y=F$t+1}return F$y},F$y._addCollider=function(F$y){0===this._colliders.length&&F$T._collsionTestList.splice(this._binarySearchIndex(),0,this._number),F$y._isRigidbody?(this._colliders.unshift(F$y),this._nonRigidbodyOffset++):this._colliders.push(F$y)},F$y._removeCollider=function(F$y){var F$j=this._colliders.indexOf(F$y);F$j<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(F$j,1),0===this._colliders.length&&F$T._collsionTestList.splice(F$T._collsionTestList.indexOf(this._number),1)},F$W(0,F$y,"number",function(){return this._number}),F$W(0,F$y,"visible",function(){return this._visible},function(F$y){this._visible=F$y,F$T._visibleLayers=F$y?F$T._visibleLayers|this.mask:F$T._visibleLayers&~this.mask}),F$W(0,F$y,"mask",function(){return this._mask}),F$W(1,F$T,"visibleLayers",function(){return F$T._visibleLayers},function(F$y){F$T._visibleLayers=F$y;for(var F$j=0,F$t=F$T._layerList.length;F$j<F$t;F$j++){var F$k=F$T._layerList[F$j];F$k._visible=0!=(F$k._mask&F$T._visibleLayers)}}),F$T.__init__=function(){F$T._layerList.length=31;for(var F$y=0;F$y<31;F$y++){var F$j=new F$T;F$T._layerList[F$y]=F$j,0===F$y?(F$j.name="Default Layer",F$j.visible=!0):(F$j.name="Layer-"+F$y,F$j.visible=!1),F$j._number=F$y,F$j._mask=Math.pow(2,F$y)}F$T.currentCreationLayer=F$T._layerList[0]},F$T.getLayerByNumber=function(F$y){if(F$y<0||30<F$y)throw new Error("无法返回指定Layer，该number超出范围！");return F$T._layerList[F$y]},F$T.getLayerByName=function(F$y){for(var F$j=0;F$j<31;F$j++)if(F$T._layerList[F$j].name===F$y)return F$T._layerList[F$j];throw new Error("无法返回指定Layer,该name不存在")},F$T.isVisible=function(F$y){return 0!=(F$y&F$T._currentCameraCullingMask&F$T._visibleLayers)},F$T._layerList=[],F$T._visibleLayers=2147483647,F$T._collsionTestList=[],F$T._currentCameraCullingMask=2147483647,F$T.maxCount=31,F$T.currentCreationLayer=null,F$T}()),F$S=(function(){function F$y(F$y,F$j,F$t){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=F$y,this._minCount=F$j,this._maxCount=F$t}F$$(F$y,"laya.d3.core.particleShuriKen.module.Burst");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.cloneTo=function(F$y){var F$j=F$y;F$j._time=this._time,F$j._minCount=this._minCount,F$j._maxCount=this._maxCount},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"time",function(){return this._time}),F$W(0,F$j,"minCount",function(){return this._minCount}),F$W(0,F$j,"maxCount",function(){return this._maxCount})}(),function(){function F$y(F$y){this._color=null,this.enbale=!1,this._color=F$y}F$$(F$y,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var F$j=F$y.prototype;F$j.cloneTo=function(F$y){var F$j=F$y;this._color.cloneTo(F$j._color),F$j.enbale=this.enbale},F$j.clone=function(){var F$y;switch(this._color.type){case 0:F$y=F$K.createByConstant(this._color.constant.clone());break;case 1:F$y=F$K.createByGradient(this._color.gradient.clone());break;case 2:F$y=F$K.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:F$y=F$K.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var F$j=new this.constructor(F$y);return F$j.enbale=this.enbale,F$j},F$W(0,F$j,"color",function(){return this._color})}(),function(){function F$y(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}F$$(F$y,"laya.d3.core.particleShuriKen.module.Emission");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),F$j._destroy=function(){this._bursts=null,this._destroyed=!0},F$j.getBurstsCount=function(){return this._bursts.length},F$j.getBurstByIndex=function(F$y){return this._bursts[F$y]},F$j.addBurst=function(F$y){var F$j=this._bursts.length;if(0<F$j)for(var F$t=0;F$t<F$j;F$t++)this._bursts[F$t].time>F$y.time&&this._bursts.splice(F$t,0,F$y);this._bursts.push(F$y)},F$j.removeBurst=function(F$y){var F$j=this._bursts.indexOf(F$y);-1!==F$j&&this._bursts.splice(F$j,1)},F$j.removeBurstByIndex=function(F$y){this._bursts.splice(F$y,1)},F$j.clearBurst=function(){this._bursts.length=0},F$j.cloneTo=function(F$y){var F$j=F$y,F$t=F$j._bursts;F$t.length=this._bursts.length;for(var F$k=0,F$T=this._bursts.length;F$k<F$T;F$k++){var F$Y=F$t[F$k];F$Y?this._bursts[F$k].cloneTo(F$Y):F$t[F$k]=this._bursts[F$k].clone()}F$j._emissionRate=this._emissionRate,F$j.enbale=this.enbale},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"destroyed",function(){return this._destroyed}),F$W(0,F$j,"emissionRate",function(){return this._emissionRate},function(F$y){if(F$y<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=F$y})}(),function(){function F$k(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}F$$(F$k,"laya.d3.core.particleShuriKen.module.FrameOverTime");var F$y=F$k.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$y){var F$j=F$y;F$j._type=this._type,F$j._constant=this._constant,this._overTime.cloneTo(F$j._overTime),F$j._constantMin=this._constantMin,F$j._constantMax=this._constantMax,this._overTimeMin.cloneTo(F$j._overTimeMin),this._overTimeMax.cloneTo(F$j._overTimeMax)},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$y,"frameOverTimeData",function(){return this._overTime}),F$W(0,F$y,"constant",function(){return this._constant}),F$W(0,F$y,"type",function(){return this._type}),F$W(0,F$y,"frameOverTimeDataMin",function(){return this._overTimeMin}),F$W(0,F$y,"constantMin",function(){return this._constantMin}),F$W(0,F$y,"frameOverTimeDataMax",function(){return this._overTimeMax}),F$W(0,F$y,"constantMax",function(){return this._constantMax}),F$k.createByConstant=function(F$y){var F$j=new F$k;return F$j._type=0,F$j._constant=F$y,F$j},F$k.createByOverTime=function(F$y){var F$j=new F$k;return F$j._type=1,F$j._overTime=F$y,F$j},F$k.createByRandomTwoConstant=function(F$y,F$j){var F$t=new F$k;return F$t._type=2,F$t._constantMin=F$y,F$t._constantMax=F$j,F$t},F$k.createByRandomTwoOverTime=function(F$y,F$j){var F$t=new F$k;return F$t._type=3,F$t._overTimeMin=F$y,F$t._overTimeMax=F$j,F$t},F$k}()),F$H=function(){function F$b(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}F$$(F$b,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var F$y=F$b.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$y){var F$j=F$y;F$j._type=this._type,F$j._separateAxes=this._separateAxes,F$j._constant=this._constant,this._constantSeparate.cloneTo(F$j._constantSeparate),this._gradient.cloneTo(F$j._gradient),this._gradientX.cloneTo(F$j._gradientX),this._gradientY.cloneTo(F$j._gradientY),this._gradientZ.cloneTo(F$j._gradientZ),F$j._constantMin=this._constantMin,F$j._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$j._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$j._constantMaxSeparate),this._gradientMin.cloneTo(F$j._gradientMin),this._gradientMax.cloneTo(F$j._gradientMax),this._gradientXMin.cloneTo(F$j._gradientXMin),this._gradientXMax.cloneTo(F$j._gradientXMax),this._gradientYMin.cloneTo(F$j._gradientYMin),this._gradientYMax.cloneTo(F$j._gradientYMax),this._gradientZMin.cloneTo(F$j._gradientZMin),this._gradientZMax.cloneTo(F$j._gradientZMax)},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$y,"gradientZ",function(){return this._gradientZ}),F$W(0,F$y,"constant",function(){return this._constant}),F$W(0,F$y,"gradient",function(){return this._gradient}),F$W(0,F$y,"separateAxes",function(){return this._separateAxes}),F$W(0,F$y,"type",function(){return this._type}),F$W(0,F$y,"constantSeparate",function(){return this._constantSeparate}),F$W(0,F$y,"gradientX",function(){return this._gradientX}),F$W(0,F$y,"gradientY",function(){return this._gradientY}),F$W(0,F$y,"gradientW",function(){return this._gradientW}),F$W(0,F$y,"gradientMin",function(){return this._gradientMin}),F$W(0,F$y,"constantMin",function(){return this._constantMin}),F$W(0,F$y,"gradientMax",function(){return this._gradientMax}),F$W(0,F$y,"constantMax",function(){return this._constantMax}),F$W(0,F$y,"gradientWMin",function(){return this._gradientWMin}),F$W(0,F$y,"constantMinSeparate",function(){return this._constantMinSeparate}),F$W(0,F$y,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$W(0,F$y,"gradientXMin",function(){return this._gradientXMin}),F$W(0,F$y,"gradientXMax",function(){return this._gradientXMax}),F$W(0,F$y,"gradientWMax",function(){return this._gradientWMax}),F$W(0,F$y,"gradientYMin",function(){return this._gradientYMin}),F$W(0,F$y,"gradientYMax",function(){return this._gradientYMax}),F$W(0,F$y,"gradientZMin",function(){return this._gradientZMin}),F$W(0,F$y,"gradientZMax",function(){return this._gradientZMax}),F$b.createByConstant=function(F$y){var F$j=new F$b;return F$j._type=0,F$j._separateAxes=!1,F$j._constant=F$y,F$j},F$b.createByConstantSeparate=function(F$y){var F$j=new F$b;return F$j._type=0,F$j._separateAxes=!0,F$j._constantSeparate=F$y,F$j},F$b.createByGradient=function(F$y){var F$j=new F$b;return F$j._type=1,F$j._separateAxes=!1,F$j._gradient=F$y,F$j},F$b.createByGradientSeparate=function(F$y,F$j,F$t,F$k){var F$T=new F$b;return F$T._type=1,F$T._separateAxes=!0,F$T._gradientX=F$y,F$T._gradientY=F$j,F$T._gradientZ=F$t,F$T._gradientW=F$k,F$T},F$b.createByRandomTwoConstant=function(F$y,F$j){var F$t=new F$b;return F$t._type=2,F$t._separateAxes=!1,F$t._constantMin=F$y,F$t._constantMax=F$j,F$t},F$b.createByRandomTwoConstantSeparate=function(F$y,F$j){var F$t=new F$b;return F$t._type=2,F$t._separateAxes=!0,F$t._constantMinSeparate=F$y,F$t._constantMaxSeparate=F$j,F$t},F$b.createByRandomTwoGradient=function(F$y,F$j){var F$t=new F$b;return F$t._type=3,F$t._separateAxes=!1,F$t._gradientMin=F$y,F$t._gradientMax=F$j,F$t},F$b.createByRandomTwoGradientSeparate=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){var F$I=new F$b;return F$I._type=3,F$I._separateAxes=!0,F$I._gradientXMin=F$y,F$I._gradientXMax=F$j,F$I._gradientYMin=F$t,F$I._gradientYMax=F$k,F$I._gradientZMin=F$T,F$I._gradientZMax=F$Y,F$I._gradientWMin=F$A,F$I._gradientWMax=F$X,F$I},F$b}(),F$K=function(){function F$k(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}F$$(F$k,"laya.d3.core.particleShuriKen.module.GradientColor");var F$y=F$k.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$y){var F$j=F$y;F$j._type=this._type,this._constant.cloneTo(F$j._constant),this._constantMin.cloneTo(F$j._constantMin),this._constantMax.cloneTo(F$j._constantMax),this._gradient.cloneTo(F$j._gradient),this._gradientMin.cloneTo(F$j._gradientMin),this._gradientMax.cloneTo(F$j._gradientMax)},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$y,"gradient",function(){return this._gradient}),F$W(0,F$y,"constant",function(){return this._constant}),F$W(0,F$y,"type",function(){return this._type}),F$W(0,F$y,"gradientMin",function(){return this._gradientMin}),F$W(0,F$y,"constantMin",function(){return this._constantMin}),F$W(0,F$y,"gradientMax",function(){return this._gradientMax}),F$W(0,F$y,"constantMax",function(){return this._constantMax}),F$k.createByConstant=function(F$y){var F$j=new F$k;return F$j._type=0,F$j._constant=F$y,F$j},F$k.createByGradient=function(F$y){var F$j=new F$k;return F$j._type=1,F$j._gradient=F$y,F$j},F$k.createByRandomTwoConstant=function(F$y,F$j){var F$t=new F$k;return F$t._type=2,F$t._constantMin=F$y,F$t._constantMax=F$j,F$t},F$k.createByRandomTwoGradient=function(F$y,F$j){var F$t=new F$k;return F$t._type=3,F$t._gradientMin=F$y,F$t._gradientMax=F$j,F$t},F$k}(),F$x=(function(){function F$y(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}F$$(F$y,"laya.d3.core.particleShuriKen.module.GradientDataColor");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.addAlpha=function(F$y,F$j){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==F$y&&(F$y=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=F$y,this._alphaElements[this._alphaCurrentLength++]=F$j):DEBUG},F$j.addRGB=function(F$y,F$j){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==F$y&&(F$y=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=F$y,this._rgbElements[this._rgbCurrentLength++]=F$j.x,this._rgbElements[this._rgbCurrentLength++]=F$j.y,this._rgbElements[this._rgbCurrentLength++]=F$j.z):DEBUG},F$j.cloneTo=function(F$y){var F$j=F$y,F$t=0,F$k=0;F$j._alphaCurrentLength=this._alphaCurrentLength;var F$T=F$j._alphaElements;for(F$T.length=this._alphaElements.length,F$t=0,F$k=this._alphaElements.length;F$t<F$k;F$t++)F$T[F$t]=this._alphaElements[F$t];F$j._rgbCurrentLength=this._rgbCurrentLength;var F$Y=F$j._rgbElements;for(F$Y.length=this._rgbElements.length,F$t=0,F$k=this._rgbElements.length;F$t<F$k;F$t++)F$Y[F$t]=this._rgbElements[F$t]},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),F$W(0,F$j,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function F$y(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$$(F$y,"laya.d3.core.particleShuriKen.module.GradientDataInt");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.add=function(F$y,F$j){this._currentLength<8?(6===this._currentLength&&1!==F$y&&(F$y=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$y,this._elements[this._currentLength++]=F$j):console.log("Warning:data count must lessEqual than 4")},F$j.cloneTo=function(F$y){var F$j=F$y;F$j._currentLength=this._currentLength;var F$t=F$j._elements;F$t.length=this._elements.length;for(var F$k=0,F$T=this._elements.length;F$k<F$T;F$k++)F$t[F$k]=this._elements[F$k]},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$y(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}F$$(F$y,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.add=function(F$y,F$j){this._currentLength<8?(6===this._currentLength&&1!==F$y&&(F$y=1,DEBUG),this._elements[this._currentLength++]=F$y,this._elements[this._currentLength++]=F$j):DEBUG},F$j.getKeyByIndex=function(F$y){return this._elements[2*F$y]},F$j.getValueByIndex=function(F$y){return this._elements[2*F$y+1]},F$j.getAverageValue=function(){for(var F$y=0,F$j=this._currentLength-2;F$y<F$j;F$y+=2){this._elements[F$y+1];this._elements[F$y+3],this._elements[F$y+2]-this._elements[F$y]}return 0},F$j.cloneTo=function(F$y){var F$j=F$y;F$j._currentLength=this._currentLength;var F$t=F$j._elements;F$t.length=this._elements.length;for(var F$k=0,F$T=this._elements.length;F$k<F$T;F$k++)F$t[F$k]=this._elements[F$k]},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"gradientCount",function(){return this._currentLength/2})}(),function(){function F$y(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}F$$(F$y,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.add=function(F$y,F$j){this._currentLength<8?(6===this._currentLength&&1!==F$y&&(F$y=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=F$y,this._elements[this._currentLength++]=F$j.x,this._elements[this._currentLength++]=F$j.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},F$j.cloneTo=function(F$y){var F$j=F$y;F$j._currentLength=this._currentLength;var F$t=F$j._elements;F$t.length=this._elements.length;for(var F$k=0,F$T=this._elements.length;F$k<F$T;F$k++)F$t[F$k]=this._elements[F$k]},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"gradientCount",function(){return this._currentLength/3})}(),function(){function F$X(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$$(F$X,"laya.d3.core.particleShuriKen.module.GradientSize");var F$y=F$X.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.getMaxSizeInGradient=function(){var F$y=0,F$j=0,F$t=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(F$y=0,F$j=this._gradientX.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientX.getValueByIndex(F$y));for(F$y=0,F$j=this._gradientY.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientY.getValueByIndex(F$y))}else for(F$y=0,F$j=this._gradient.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradient.getValueByIndex(F$y));break;case 1:F$t=this._separateAxes?(F$t=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),F$t=Math.max(F$t,this._constantMinSeparate.y),Math.max(F$t,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(F$y=0,F$j=this._gradientXMin.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientXMin.getValueByIndex(F$y));for(F$y=0,F$j=this._gradientXMax.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientXMax.getValueByIndex(F$y));for(F$y=0,F$j=this._gradientYMin.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientYMin.getValueByIndex(F$y));for(F$y=0,F$j=this._gradientZMax.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientZMax.getValueByIndex(F$y))}else{for(F$y=0,F$j=this._gradientMin.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientMin.getValueByIndex(F$y));for(F$y=0,F$j=this._gradientMax.gradientCount;F$y<F$j;F$y++)F$t=Math.max(F$t,this._gradientMax.getValueByIndex(F$y))}}return F$t},F$y.cloneTo=function(F$y){var F$j=F$y;F$j._type=this._type,F$j._separateAxes=this._separateAxes,this._gradient.cloneTo(F$j._gradient),this._gradientX.cloneTo(F$j._gradientX),this._gradientY.cloneTo(F$j._gradientY),this._gradientZ.cloneTo(F$j._gradientZ),F$j._constantMin=this._constantMin,F$j._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(F$j._constantMinSeparate),this._constantMaxSeparate.cloneTo(F$j._constantMaxSeparate),this._gradientMin.cloneTo(F$j._gradientMin),this._gradientMax.cloneTo(F$j._gradientMax),this._gradientXMin.cloneTo(F$j._gradientXMin),this._gradientXMax.cloneTo(F$j._gradientXMax),this._gradientYMin.cloneTo(F$j._gradientYMin),this._gradientYMax.cloneTo(F$j._gradientYMax),this._gradientZMin.cloneTo(F$j._gradientZMin),this._gradientZMax.cloneTo(F$j._gradientZMax)},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$y,"gradientZ",function(){return this._gradientZ}),F$W(0,F$y,"gradient",function(){return this._gradient}),F$W(0,F$y,"separateAxes",function(){return this._separateAxes}),F$W(0,F$y,"type",function(){return this._type}),F$W(0,F$y,"gradientMin",function(){return this._gradientMin}),F$W(0,F$y,"constantMin",function(){return this._constantMin}),F$W(0,F$y,"gradientX",function(){return this._gradientX}),F$W(0,F$y,"gradientY",function(){return this._gradientY}),F$W(0,F$y,"gradientMax",function(){return this._gradientMax}),F$W(0,F$y,"constantMax",function(){return this._constantMax}),F$W(0,F$y,"constantMinSeparate",function(){return this._constantMinSeparate}),F$W(0,F$y,"constantMaxSeparate",function(){return this._constantMaxSeparate}),F$W(0,F$y,"gradientXMin",function(){return this._gradientXMin}),F$W(0,F$y,"gradientXMax",function(){return this._gradientXMax}),F$W(0,F$y,"gradientYMin",function(){return this._gradientYMin}),F$W(0,F$y,"gradientYMax",function(){return this._gradientYMax}),F$W(0,F$y,"gradientZMin",function(){return this._gradientZMin}),F$W(0,F$y,"gradientZMax",function(){return this._gradientZMax}),F$X.createByGradient=function(F$y){var F$j=new F$X;return F$j._type=0,F$j._separateAxes=!1,F$j._gradient=F$y,F$j},F$X.createByGradientSeparate=function(F$y,F$j,F$t){var F$k=new F$X;return F$k._type=0,F$k._separateAxes=!0,F$k._gradientX=F$y,F$k._gradientY=F$j,F$k._gradientZ=F$t,F$k},F$X.createByRandomTwoConstant=function(F$y,F$j){var F$t=new F$X;return F$t._type=1,F$t._separateAxes=!1,F$t._constantMin=F$y,F$t._constantMax=F$j,F$t},F$X.createByRandomTwoConstantSeparate=function(F$y,F$j){var F$t=new F$X;return F$t._type=1,F$t._separateAxes=!0,F$t._constantMinSeparate=F$y,F$t._constantMaxSeparate=F$j,F$t},F$X.createByRandomTwoGradient=function(F$y,F$j){var F$t=new F$X;return F$t._type=2,F$t._separateAxes=!1,F$t._gradientMin=F$y,F$t._gradientMax=F$j,F$t},F$X.createByRandomTwoGradientSeparate=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=new F$X;return F$A._type=2,F$A._separateAxes=!0,F$A._gradientXMin=F$y,F$A._gradientXMax=F$j,F$A._gradientYMin=F$t,F$A._gradientYMax=F$k,F$A._gradientZMin=F$T,F$A._gradientZMax=F$Y,F$A},F$X}()),F$F=function(){function F$X(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}F$$(F$X,"laya.d3.core.particleShuriKen.module.GradientVelocity");var F$y=F$X.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$y){var F$j=F$y;F$j._type=this._type,this._constant.cloneTo(F$j._constant),this._gradientX.cloneTo(F$j._gradientX),this._gradientY.cloneTo(F$j._gradientY),this._gradientZ.cloneTo(F$j._gradientZ),this._constantMin.cloneTo(F$j._constantMin),this._constantMax.cloneTo(F$j._constantMax),this._gradientXMin.cloneTo(F$j._gradientXMin),this._gradientXMax.cloneTo(F$j._gradientXMax),this._gradientYMin.cloneTo(F$j._gradientYMin),this._gradientYMax.cloneTo(F$j._gradientYMax),this._gradientZMin.cloneTo(F$j._gradientZMin),this._gradientZMax.cloneTo(F$j._gradientZMax)},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$y,"gradientZ",function(){return this._gradientZ}),F$W(0,F$y,"constant",function(){return this._constant}),F$W(0,F$y,"type",function(){return this._type}),F$W(0,F$y,"gradientXMax",function(){return this._gradientXMax}),F$W(0,F$y,"constantMin",function(){return this._constantMin}),F$W(0,F$y,"gradientX",function(){return this._gradientX}),F$W(0,F$y,"gradientY",function(){return this._gradientY}),F$W(0,F$y,"gradientXMin",function(){return this._gradientXMin}),F$W(0,F$y,"constantMax",function(){return this._constantMax}),F$W(0,F$y,"gradientYMin",function(){return this._gradientYMin}),F$W(0,F$y,"gradientYMax",function(){return this._gradientYMax}),F$W(0,F$y,"gradientZMin",function(){return this._gradientZMin}),F$W(0,F$y,"gradientZMax",function(){return this._gradientZMax}),F$X.createByConstant=function(F$y){var F$j=new F$X;return F$j._type=0,F$j._constant=F$y,F$j},F$X.createByGradient=function(F$y,F$j,F$t){var F$k=new F$X;return F$k._type=1,F$k._gradientX=F$y,F$k._gradientY=F$j,F$k._gradientZ=F$t,F$k},F$X.createByRandomTwoConstant=function(F$y,F$j){var F$t=new F$X;return F$t._type=2,F$t._constantMin=F$y,F$t._constantMax=F$j,F$t},F$X.createByRandomTwoGradient=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=new F$X;return F$A._type=3,F$A._gradientXMin=F$y,F$A._gradientXMax=F$j,F$A._gradientYMin=F$t,F$A._gradientYMax=F$k,F$A._gradientZMin=F$T,F$A._gradientZMax=F$Y,F$A},F$X}(),F$G=(function(){function F$y(F$y){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=F$y}F$$(F$y,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.cloneTo=function(F$y){var F$j=F$y;this._angularVelocity.cloneTo(F$j._angularVelocity),F$j.enbale=this.enbale},F$j.clone=function(){var F$y;switch(this._angularVelocity.type){case 0:F$y=this._angularVelocity.separateAxes?F$H.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):F$H.createByConstant(this._angularVelocity.constant);break;case 1:F$y=this._angularVelocity.separateAxes?F$H.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):F$H.createByGradient(this._angularVelocity.gradient.clone());break;case 2:F$y=this._angularVelocity.separateAxes?F$H.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):F$H.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:F$y=this._angularVelocity.separateAxes?F$H.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):F$H.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var F$j=new this.constructor(F$y);return F$j.enbale=this.enbale,F$j},F$W(0,F$j,"angularVelocity",function(){return this._angularVelocity})}(),function(){function F$y(){this.enable=!1,this.randomDirection=!1}F$$(F$y,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j._getShapeBoundBox=function(F$y){throw new Error("BaseShape: must override it.")},F$j._getSpeedBoundBox=function(F$y){throw new Error("BaseShape: must override it.")},F$j.generatePositionAndDirection=function(F$y,F$j,F$t,F$k){throw new Error("BaseShape: must override it.")},F$j._calculateProceduralBounds=function(F$y,F$j,F$t){this._getShapeBoundBox(F$y);var F$k=F$y.min,F$T=F$y.max;F$Aj.multiply(F$k,F$j,F$k),F$Aj.multiply(F$T,F$j,F$T);var F$Y=new F$Ly(new F$Aj,new F$Aj);this.randomDirection?(F$Y.min=new F$Aj(-1,-1,-1),F$Y.max=new F$Aj(1,1,1)):this._getSpeedBoundBox(F$Y);var F$A=new F$Ly(new F$Aj,new F$Aj),F$X=F$A.min,F$I=F$A.max;F$Aj.scale(F$Y.min,F$t.y,F$X),F$Aj.scale(F$Y.max,F$t.y,F$I),F$Aj.add(F$y.min,F$X,F$X),F$Aj.add(F$y.max,F$I,F$I),F$Aj.min(F$y.min,F$X,F$y.min),F$Aj.max(F$y.max,F$X,F$y.max);var F$b=new F$Ly(new F$Aj,new F$Aj),F$D=F$b.min,F$l=F$b.max;F$Aj.scale(F$Y.min,F$t.x,F$D),F$Aj.scale(F$Y.max,F$t.x,F$l),F$Aj.min(F$b.min,F$l,F$X),F$Aj.max(F$b.min,F$l,F$I),F$Aj.min(F$y.min,F$X,F$y.min),F$Aj.max(F$y.max,F$X,F$y.max)},F$j.cloneTo=function(F$y){F$y.enable=this.enable},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$y}()),F$O=function(){function F$Y(){}return F$$(F$Y,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),F$Y._randomPointUnitArcCircle=function(F$y,F$j,F$t){var F$k=F$j.elements,F$T=NaN;F$T=F$t?F$t.getFloat()*F$y:Math.random()*F$y,F$k[0]=Math.cos(F$T),F$k[1]=Math.sin(F$T)},F$Y._randomPointInsideUnitArcCircle=function(F$y,F$j,F$t){var F$k=F$j.elements;F$Y._randomPointUnitArcCircle(F$y,F$j,F$t);var F$T=NaN;F$T=F$t?Math.pow(F$t.getFloat(),.5):Math.pow(Math.random(),.5),F$k[0]=F$k[0]*F$T,F$k[1]=F$k[1]*F$T},F$Y._randomPointUnitCircle=function(F$y,F$j){var F$t=F$y.elements,F$k=NaN;F$k=F$j?F$j.getFloat()*Math.PI*2:Math.random()*Math.PI*2,F$t[0]=Math.cos(F$k),F$t[1]=Math.sin(F$k)},F$Y._randomPointInsideUnitCircle=function(F$y,F$j){var F$t=F$y.elements;F$Y._randomPointUnitCircle(F$y);var F$k=NaN;F$k=F$j?Math.pow(F$j.getFloat(),.5):Math.pow(Math.random(),.5),F$t[0]=F$t[0]*F$k,F$t[1]=F$t[1]*F$k},F$Y._randomPointUnitSphere=function(F$y,F$j){var F$t=F$y.elements,F$k=NaN,F$T=NaN;F$T=F$j?(F$k=F$t[2]=2*F$j.getFloat()-1,F$j.getFloat()*Math.PI*2):(F$k=F$t[2]=2*Math.random()-1,Math.random()*Math.PI*2);var F$Y=Math.sqrt(1-F$k*F$k);F$t[0]=F$Y*Math.cos(F$T),F$t[1]=F$Y*Math.sin(F$T)},F$Y._randomPointInsideUnitSphere=function(F$y,F$j){var F$t=F$y.elements;F$Y._randomPointUnitSphere(F$y);var F$k=NaN;F$k=F$j?Math.pow(F$j.getFloat(),1/3):Math.pow(Math.random(),1/3),F$t[0]=F$t[0]*F$k,F$t[1]=F$t[1]*F$k,F$t[2]=F$t[2]*F$k},F$Y._randomPointInsideHalfUnitBox=function(F$y,F$j){var F$t=F$y.elements;F$j?(F$t[0]=F$j.getFloat()-.5,F$t[1]=F$j.getFloat()-.5,F$t[2]=F$j.getFloat()-.5):(F$t[0]=Math.random()-.5,F$t[1]=Math.random()-.5,F$t[2]=Math.random()-.5)},F$Y}(),F$s=(function(){function F$y(F$y){this._size=null,this.enbale=!1,this._size=F$y}F$$(F$y,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.cloneTo=function(F$y){var F$j=F$y;this._size.cloneTo(F$j._size),F$j.enbale=this.enbale},F$j.clone=function(){var F$y;switch(this._size.type){case 0:F$y=this._size.separateAxes?F$x.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):F$x.createByGradient(this._size.gradient.clone());break;case 1:F$y=this._size.separateAxes?F$x.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):F$x.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:F$y=this._size.separateAxes?F$x.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):F$x.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var F$j=new this.constructor(F$y);return F$j.enbale=this.enbale,F$j},F$W(0,F$j,"size",function(){return this._size})}(),function(){function F$k(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}F$$(F$k,"laya.d3.core.particleShuriKen.module.StartFrame");var F$y=F$k.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.cloneTo=function(F$y){var F$j=F$y;F$j._type=this._type,F$j._constant=this._constant,F$j._constantMin=this._constantMin,F$j._constantMax=this._constantMax},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$y,"constant",function(){return this._constant}),F$W(0,F$y,"type",function(){return this._type}),F$W(0,F$y,"constantMin",function(){return this._constantMin}),F$W(0,F$y,"constantMax",function(){return this._constantMax}),F$k.createByConstant=function(F$y){var F$j=new F$k;return F$j._type=0,F$j._constant=F$y,F$j},F$k.createByRandomTwoConstant=function(F$y,F$j){var F$t=new F$k;return F$t._type=1,F$t._constantMin=F$y,F$t._constantMax=F$j,F$t},F$k}()),F$Z=(function(){function F$y(F$y,F$j){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new F$Yj(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=F$y,this._startFrame=F$j}F$$(F$y,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.cloneTo=function(F$y){var F$j=F$y;this.tiles.cloneTo(F$j.tiles),F$j.type=this.type,F$j.randomRow=this.randomRow,this._frame.cloneTo(F$j._frame),this._startFrame.cloneTo(F$j._startFrame),F$j.cycles=this.cycles,F$j.enableUVChannels=this.enableUVChannels,F$j.enable=this.enable},F$j.clone=function(){var F$y,F$j;switch(this._frame.type){case 0:F$y=F$S.createByConstant(this._frame.constant);break;case 1:F$y=F$S.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:F$y=F$S.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:F$y=F$S.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:F$j=F$s.createByConstant(this._startFrame.constant);break;case 1:F$j=F$s.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var F$t=new this.constructor(F$y,F$j);return this.tiles.cloneTo(F$t.tiles),F$t.type=this.type,F$t.randomRow=this.randomRow,F$t.cycles=this.cycles,F$t.enableUVChannels=this.enableUVChannels,F$t.enable=this.enable,F$t},F$W(0,F$j,"frame",function(){return this._frame}),F$W(0,F$j,"startFrame",function(){return this._startFrame})}(),function(){function F$y(F$y){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=F$y}F$$(F$y,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.cloneTo=function(F$y){var F$j=F$y;this._velocity.cloneTo(F$j._velocity),F$j.enbale=this.enbale,F$j.space=this.space},F$j.clone=function(){var F$y;switch(this._velocity.type){case 0:F$y=F$F.createByConstant(this._velocity.constant.clone());break;case 1:F$y=F$F.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:F$y=F$F.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:F$y=F$F.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var F$j=new this.constructor(F$y);return F$j.enbale=this.enbale,F$j.space=this.space,F$j},F$W(0,F$j,"velocity",function(){return this._velocity})}(),function(){function F$y(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new F$rj,this._vb=F$Gj.create(F$y._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=F$Fj.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=F$Kj.nameKey.getID("LINE"),this._shaderCompile=F$Pj._preCompileShader[this._sharderNameID]}F$$(F$y,"laya.d3.core.PhasorSpriter3D");var F$j=F$y.prototype;return F$j.line=function(F$y,F$j,F$t,F$k){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$y.x,F$y.y,F$y.z,F$j.x,F$j.y,F$j.z,F$j.w),this.addVertex(F$t.x,F$t.y,F$t.z,F$k.x,F$k.y,F$k.z,F$k.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},F$j.circle=function(F$y,F$j,F$t,F$k,F$T,F$Y){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*F$j,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/F$j,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*F$y,Math.cos(this._tempNumver0)*F$y,0,F$t,F$k,F$T,F$Y),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},F$j.plane=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=F$k/2,this._tempNumver1=F$T/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$y-this._tempNumver0,F$j+this._tempNumver1,F$t,F$Y,F$A,F$X,F$I),this.addVertex(F$y+this._tempNumver0,F$j+this._tempNumver1,F$t,F$Y,F$A,F$X,F$I),this.addVertex(F$y-this._tempNumver0,F$j-this._tempNumver1,F$t,F$Y,F$A,F$X,F$I),this.addVertex(F$y+this._tempNumver0,F$j-this._tempNumver1,F$t,F$Y,F$A,F$X,F$I),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},F$j.box=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=F$k/2,this._tempNumver1=F$T/2,this._tempNumver2=F$Y/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$y-this._tempNumver0,F$j+this._tempNumver1,F$t+this._tempNumver2,F$A,F$X,F$I,F$b),this.addVertex(F$y+this._tempNumver0,F$j+this._tempNumver1,F$t+this._tempNumver2,F$A,F$X,F$I,F$b),this.addVertex(F$y-this._tempNumver0,F$j-this._tempNumver1,F$t+this._tempNumver2,F$A,F$X,F$I,F$b),this.addVertex(F$y+this._tempNumver0,F$j-this._tempNumver1,F$t+this._tempNumver2,F$A,F$X,F$I,F$b),this.addVertex(F$y+this._tempNumver0,F$j+this._tempNumver1,F$t-this._tempNumver2,F$A,F$X,F$I,F$b),this.addVertex(F$y-this._tempNumver0,F$j+this._tempNumver1,F$t-this._tempNumver2,F$A,F$X,F$I,F$b),this.addVertex(F$y+this._tempNumver0,F$j-this._tempNumver1,F$t-this._tempNumver2,F$A,F$X,F$I,F$b),this.addVertex(F$y-this._tempNumver0,F$j-this._tempNumver1,F$t-this._tempNumver2,F$A,F$X,F$I,F$b),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},F$j.cone=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*F$t+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*F$t>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/F$t,this.addVertexIndex(0,F$j,0,F$k,F$T,F$Y,F$A,this._tempUint0),this.addVertexIndex(0,0,0,F$k,F$T,F$Y,F$A,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<F$t;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(F$y*this._tempNumver2,0,F$y*this._tempNumver3,F$k,F$T,F$Y,F$A,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==F$t-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(F$y*this._tempNumver2,0,F$y*this._tempNumver3,F$k,F$T,F$Y,F$A,this._tempUint0+(this._tempInt0+F$t)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==F$t-1?this.addIndexes(this._tempUint1+F$t+2):this.addIndexes(this._tempUint1+this._tempInt0+F$t+1),this.addIndexes(this._tempUint1+this._tempInt0+F$t),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},F$j.boundingBoxLine=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(F$y,F$T,F$Y,F$A,F$X,F$I,F$b),this.addVertex(F$k,F$T,F$Y,F$A,F$X,F$I,F$b),this.addVertex(F$y,F$j,F$Y,F$A,F$X,F$I,F$b),this.addVertex(F$k,F$j,F$Y,F$A,F$X,F$I,F$b),this.addVertex(F$k,F$T,F$t,F$A,F$X,F$I,F$b),this.addVertex(F$y,F$T,F$t,F$A,F$X,F$I,F$b),this.addVertex(F$k,F$j,F$t,F$A,F$X,F$I,F$b),this.addVertex(F$y,F$j,F$t,F$A,F$X,F$I,F$b),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},F$j.addVertex=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=F$y,this._vbData[this._posInVBData+1]=F$j,this._vbData[this._posInVBData+2]=F$t,this._vbData[this._posInVBData+3]=F$k,this._vbData[this._posInVBData+4]=F$T,this._vbData[this._posInVBData+5]=F$Y,this._vbData[this._posInVBData+6]=F$A,this._posInVBData+=this._floatSizePerVer,this},F$j.addVertexIndex=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){return this._hasBegun||this.addVertexIndexException(),this._vbData[F$X]=F$y,this._vbData[F$X+1]=F$j,this._vbData[F$X+2]=F$t,this._vbData[F$X+3]=F$k,this._vbData[F$X+4]=F$T,this._vbData[F$X+5]=F$Y,this._vbData[F$X+6]=F$A,(F$X+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=F$X),this},F$j.addIndexes=function(F$y){var F$j=arguments;this._hasBegun||this.addVertexIndexException();for(var F$t=0;F$t<F$j.length;F$t++)this._ibData[this._posInIBData]=F$j[F$t],this._posInIBData++;return this},F$j.begin=function(F$y,F$j){return this._hasBegun&&this.beginException0(),1!==F$y&&4!==F$y&&this.beginException1(),this._primitiveType=F$y,this._camera=F$j,this._hasBegun=!0,this},F$j.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},F$j.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(F$y._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),F$P.drawCall++,F$m.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},F$j.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},F$j.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},F$j.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},F$j.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},F$j.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},F$j.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(28,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector4",1)])}]),F$y}()),F$R=function(){function F$y(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++F$y._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new F$rj}F$$(F$y,"laya.d3.core.render.RenderElement");var F$j=F$y.prototype;return F$j.getDynamicBatchBakedVertexs=function(F$y){for(var F$j=this._renderObj._getVertexBuffer(F$y),F$t=F$j.getData().slice(),F$k=F$j.vertexDeclaration,F$T=F$k.getVertexElementByUsage(0).offset/4,F$Y=F$k.getVertexElementByUsage(3).offset/4,F$A=this._sprite3D.transform,F$X=F$A.worldMatrix,F$I=F$A.rotation,F$b=F$k.vertexStride/4,F$D=0,F$l=F$t.length;F$D<F$l;F$D+=F$b){var F$r=F$D+F$T,F$$=F$D+F$Y;F$Vj.transformVector3ArrayToVector3ArrayCoordinate(F$t,F$r,F$X,F$t,F$r),F$Vj.transformVector3ArrayByQuat(F$t,F$$,F$I,F$t,F$$)}return F$t},F$j.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},F$j._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},F$W(0,F$j,"id",function(){return this._id}),F$W(0,F$j,"renderObj",function(){return this._renderObj},function(F$y){this._renderObj!==F$y&&(this._renderObj=F$y)}),F$y._uniqueIDCounter=0,F$y}(),F$B=function(){function F$j(F$y){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++F$j._uniqueIDCounter,this._needSort=!1,this._scene=F$y,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}F$$(F$j,"laya.d3.core.render.RenderQueue");var F$y=F$j.prototype;return F$y._sortOpaqueFunc=function(F$y,F$j){if(F$y._render&&F$j._render){var F$t=F$y._material.renderQueue-F$j._material.renderQueue;return 0==F$t?F$y._render._distanceForSort-F$j._render._distanceForSort:F$t}return 0},F$y._sortAlphaFunc=function(F$y,F$j){if(F$y._render&&F$j._render){var F$t=F$y._material.renderQueue-F$j._material.renderQueue;return 0==F$t?F$j._render._distanceForSort-F$y._render._distanceForSort:F$t}return 0},F$y._begainRenderElement=function(F$y,F$j,F$t){return!!F$j._beforeRender(F$y)},F$y._sortAlpha=function(F$y){F$j._cameraPosition=F$y,this._finalElements.sort(this._sortAlphaFunc)},F$y._sortOpaque=function(F$y){F$j._cameraPosition=F$y,this._finalElements.sort(this._sortOpaqueFunc)},F$y._preRender=function(F$y){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},F$y._render=function(F$y,F$j){for(var F$t,F$k,F$T,F$Y,F$A,F$X,F$I=F$P.loopCount,F$b=this._scene,F$D=F$y.camera,F$l=(F$D.id,!1),F$r=0,F$$=this._finalElements.length;F$r<F$$;F$r++){var F$W,F$z,F$V,F$n=this._finalElements[F$r];if(null!=F$n._onPreRenderFunction&&F$n._onPreRenderFunction.call(F$n._sprite3D,F$y),0===F$n._type){if(F$y.owner=F$V=F$n._sprite3D,F$y.renderElement=F$n,F$V._preRenderUpdateComponents(F$y),F$W=F$n.renderObj,F$z=F$n._material,this._begainRenderElement(F$y,F$W,F$z)){if(F$t=F$W._getVertexBuffers(),!(F$T=(F$k=F$W._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[F$k.id]){this._errorRecord[F$k.id]=1;var F$C="vertexBuffer:"+("("+F$k._destroyed+","+F$k._released+","+F$k._referenceCount+","+F$k._buffer+")")+", material:"+(F$z?F$z.__className+"("+F$z._destroyed+","+F$z._released+")":"null")+", owner:"+(F$V?F$V.__className+"("+F$V._destroyed+","+F$V._activeInHierarchy+","+F$V._displayedInStage+")":"null")+", renderObj:"+(F$W?F$W.__className+"("+F$W._destroyed+","+F$W._released+","+F$W._referenceCount+")":"")+", parent:, url:"+(F$V?F$V.url:"")+", disposeStack:"+F$k.disposeStack;F$e.recordError("报错：unknown vertexDeclaration  "+F$C)}continue}if(F$l=(F$Y=F$y._shader=F$z._getShader(F$b._shaderDefineValue,F$T.shaderDefineValue,F$V._shaderDefineValue)).bind()||F$I!==F$Y._uploadLoopCount,F$t){if(F$Y._uploadVertexBuffer!==F$t||F$l){for(var F$M=0;F$M<F$t.length;F$M++){var F$_=F$t[F$M];F$Y.uploadAttributesX(F$_.vertexDeclaration.shaderValues.data,F$_)}F$Y._uploadVertexBuffer=F$t}}else(F$Y._uploadVertexBuffer!==F$k||F$l)&&(F$Y.uploadAttributes(F$T.shaderValues.data,null),F$Y._uploadVertexBuffer=F$k);(F$Y._uploadScene!==F$b||F$l)&&(F$Y.uploadSceneUniforms(F$b._shaderValues.data),F$Y._uploadScene=F$b),(F$D!==F$Y._uploadCamera||F$Y._uploadSprite3D!==F$V||F$l)&&(F$Y.uploadSpriteUniforms(F$V._shaderValues.data),F$Y._uploadSprite3D=F$V),(F$D!==F$Y._uploadCamera||F$l)&&(F$Y.uploadCameraUniforms(F$D._shaderValues.data),F$Y._uploadCamera=F$D),(F$Y._uploadMaterial!==F$z||F$l)&&(F$z._upload(),F$Y._uploadMaterial=F$z),F$A!==F$z?(F$z._setRenderStateBlendDepth(),F$z._setRenderStateFrontFace(F$j,F$V.transform),F$A=F$z,F$X=F$V):F$X!==F$V&&(F$z._setRenderStateFrontFace(F$j,F$V.transform),F$X=F$V),F$W._render(F$y),F$Y._uploadLoopCount=F$I}F$V._postRenderUpdateComponents(F$y)}else if(2===F$n._type){F$n.renderObj;F$y.owner=F$V=F$n._sprite3D,F$y.renderElement=F$n,F$y._batchIndexStart=F$n._tempBatchIndexStart,F$y._batchIndexEnd=F$n._tempBatchIndexEnd,F$W=F$n.renderObj,F$z=F$n._material,this._begainRenderElement(F$y,F$W,F$z)&&(F$T=(F$k=F$W._getVertexBuffer(0)).vertexDeclaration,F$l=(F$Y=F$y._shader=F$z._getShader(F$b._shaderDefineValue,F$T.shaderDefineValue,F$V._shaderDefineValue)).bind()||F$I!==F$Y._uploadLoopCount,(F$Y._uploadVertexBuffer!==F$k||F$l)&&(F$Y.uploadAttributes(F$T.shaderValues.data,null),F$Y._uploadVertexBuffer=F$k),(F$Y._uploadScene!==F$b||F$l)&&(F$Y.uploadSceneUniforms(F$b._shaderValues.data),F$Y._uploadScene=F$b),(F$D!==F$Y._uploadCamera||F$Y._uploadSprite3D!==F$V||F$l)&&(F$Y.uploadSpriteUniforms(F$V._shaderValues.data),F$Y._uploadSprite3D=F$V),(F$D!==F$Y._uploadCamera||F$l)&&(F$Y.uploadCameraUniforms(F$D._shaderValues.data),F$Y._uploadCamera=F$D),(F$Y._uploadMaterial!==F$z||F$l)&&(F$z._upload(),F$Y._uploadMaterial=F$z),F$A!==F$z?(F$z._setRenderStateBlendDepth(),F$z._setRenderStateFrontFace(F$j,F$V.transform),F$A=F$z,F$X=F$V):F$X!==F$V&&(F$z._setRenderStateFrontFace(F$j,F$V.transform),F$X=F$V),F$W._render(F$y),F$Y._uploadLoopCount=F$I)}}},F$y._renderShadow=function(F$y,F$j){for(var F$t,F$k,F$T,F$Y,F$A,F$X=F$P.loopCount,F$I=this._scene,F$b=F$y.camera,F$D=!1,F$l=0,F$r=this._finalElements.length;F$l<F$r;F$l++){var F$$,F$W,F$z,F$V=this._finalElements[F$l];0===F$V._type&&(F$y.owner=F$z=F$V._sprite3D,F$j||F$z._projectionViewWorldUpdateCamera===F$b&&F$z._projectionViewWorldUpdateLoopCount===F$P.loopCount||(F$z._render._renderUpdate(F$y._projectionViewMatrix),F$z._projectionViewWorldUpdateLoopCount=F$P.loopCount,F$z._projectionViewWorldUpdateCamera=F$b),F$y.renderElement=F$V,F$z._preRenderUpdateComponents(F$y),F$$=F$V.renderObj,F$W=F$V._material,this._begainRenderElement(F$y,F$$,null)&&(F$k=(F$t=F$$._getVertexBuffer(0)).vertexDeclaration,F$D=(F$T=F$y._shader=F$W._getShader(F$I._shaderDefineValue,F$k.shaderDefineValue,F$z._shaderDefineValue)).bind()||F$X!==F$T._uploadLoopCount,(F$T._uploadVertexBuffer!==F$t||F$D)&&(F$T.uploadAttributes(F$k.shaderValues.data,null),F$T._uploadVertexBuffer=F$t),(F$b!==F$T._uploadCamera||F$T._uploadSprite3D!==F$z||F$D)&&(F$T.uploadSpriteUniforms(F$z._shaderValues.data),F$T._uploadSprite3D=F$z),(F$b!==F$T._uploadCamera||F$D)&&(F$T.uploadCameraUniforms(F$b._shaderValues.data),F$T._uploadCamera=F$b),(F$T._uploadMaterial!==F$W||F$D)&&(F$W._upload(),F$T._uploadMaterial=F$W),F$T._uploadRenderElement,F$Y!==F$W?(F$W._setRenderStateFrontFace(!1,F$z.transform),F$Y=F$W,F$A=F$z):F$A!==F$z&&(F$W._setRenderStateFrontFace(!1,F$z.transform),F$A=F$z),F$$._render(F$y),F$T._uploadLoopCount=F$X),F$z._postRenderUpdateComponents(F$y))}},F$y._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},F$y._addRenderElement=function(F$y){this._renderElements.push(F$y),this._needSort=!0},F$y._addDynamicBatchElement=function(F$y){this._dynamicBatchCombineRenderElements.push(F$y)},F$W(0,F$y,"id",function(){return this._id}),F$j._uniqueIDCounter=0,F$j._cameraPosition=null,F$j}(),F$c=function(){function F$y(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return F$$(F$y,"laya.d3.core.render.RenderState"),F$y.clientWidth=0,F$y.clientHeight=0,F$y}(),F$L=function(){function F$A(F$y,F$j){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new F$iy(new F$Aj,0),this._corners=[new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj],this._boundingBoxCenter=new F$Aj,this._children=F$k(8),this._objects=[],this._tempBoundBoxCorners=[new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj],this._scene=F$y,this._currentDepth=F$j}F$$(F$A,"laya.d3.core.scene.OctreeNode");var F$y=F$A.prototype;return F$e.imps(F$y,{"laya.d3.core.scene.ITreeNode":!0}),F$y.init=function(F$y,F$j){var F$t=new F$Aj,F$k=new F$Aj;F$Aj.scale(F$j,-.5,F$t),F$Aj.scale(F$j,.5,F$k),F$Aj.add(F$t,F$y,F$t),F$Aj.add(F$k,F$y,F$k),this.exactBox=new F$Ly(F$t,F$k),this.relaxBox=new F$Ly(F$t,F$k)},F$y.addTreeNode=function(F$y){1===Collision.boxContainsBox(this._relaxBox,F$y.boundingBox)?this.addNodeDown(F$y,0):this.addObject(F$y)},F$y.addChild=function(F$y){var F$j=this._children[F$y];if(null==F$j){F$j=new F$A(this._scene,this._currentDepth+1),(this._children[F$y]=F$j)._parent=this,F$Aj.subtract(this._exactBox.max,this._exactBox.min,F$A.tempSize),F$Aj.multiply(F$A.tempSize,F$A._octreeSplit[F$y],F$A.tempCenter),F$Aj.add(this._exactBox.min,F$A.tempCenter,F$A.tempCenter),F$Aj.scale(F$A.tempSize,.25,F$A.tempSize);var F$t=new F$Aj,F$k=new F$Aj;F$Aj.subtract(F$A.tempCenter,F$A.tempSize,F$t),F$Aj.add(F$A.tempCenter,F$A.tempSize,F$k),F$j.exactBox=new F$Ly(F$t,F$k),F$Aj.scale(F$A.tempSize,F$A.relax,F$A.tempSize);var F$T=new F$Aj,F$Y=new F$Aj;F$Aj.subtract(F$A.tempCenter,F$A.tempSize,F$T),F$Aj.add(F$A.tempCenter,F$A.tempSize,F$Y),F$j.relaxBox=new F$Ly(F$T,F$Y)}return F$j},F$y.addObject=function(F$y){(F$y._treeNode=this)._objects.push(F$y)},F$y.removeObject=function(F$y){if(F$y._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var F$j=this._objects.indexOf(F$y);return-1!==F$j&&(this._objects.splice(F$j,1),!0)},F$y.clearObject=function(){this._objects.length=0},F$y.addNodeUp=function(F$y,F$j){this._parent&&1!==Collision.boxContainsBox(this._exactBox,F$y.boundingBox)?this._parent.addNodeUp(F$y,F$j-1):this.addNodeDown(F$y,F$j)},F$y.addNodeDown=function(F$y,F$j){if(F$j<this._scene.treeLevel){var F$t=this.inChildIndex(F$y.boundingBoxCenter),F$k=this.addChild(F$t);1===Collision.boxContainsBox(F$k._relaxBox,F$y.boundingBox)?F$k.addNodeDown(F$y,++F$j):this.addObject(F$y)}else this.addObject(F$y)},F$y.inChildIndex=function(F$y){return 4*(F$y.z<this._boundingBoxCenter.z?0:1)+2*(F$y.y<this._boundingBoxCenter.y?0:1)+(F$y.x<this._boundingBoxCenter.x?0:1)},F$y.updateObject=function(F$y){1===Collision.boxContainsBox(this._relaxBox,F$y.boundingBox)?(this.removeObject(F$y),F$y._treeNode=null,this.addNodeDown(F$y,this._currentDepth)):this._parent&&(this.removeObject(F$y),F$y._treeNode=null,this._parent.addNodeUp(F$y,this._currentDepth-1))},F$y.cullingObjects=function(F$y,F$j,F$t,F$k,F$T){var F$Y,F$A=0,F$X=0,F$I=0,F$b=this._scene._dynamicBatchManager;for(F$A=0,F$Y=this._objects.length;F$A<F$Y;F$A++){var F$D=this._objects[F$A];if(F$w.isVisible(F$D._owner.layer.mask)&&F$D.enable){if(F$j&&(F$P.treeSpriteCollision+=1,0===F$y.containsBoundSphere(F$D.boundingSphere)))continue;F$D._renderUpdate(F$T),F$D._distanceForSort=F$Aj.distance(F$D.boundingSphere.center,F$k)+F$D.sortingFudge;var F$l=F$D._renderElements;for(F$X=0,F$I=F$l.length;F$X<F$I;F$X++){var F$r=F$l[F$X],F$$=F$r._staticBatch;if(F$$&&F$$._material===F$r._material)F$$._addBatchRenderElement(F$r);else{var F$W=F$r.renderObj;F$W.triangleCount<10&&1===F$W._vertexBufferCount&&F$W._getIndexBuffer()&&F$r._material.renderQueue<2&&F$r._canDynamicBatch&&!F$D._owner.isStatic?F$b._addPrepareRenderElement(F$r):this._scene.getRenderQueue(F$r._material.renderQueue)._addRenderElement(F$r)}}}}for(F$A=0;F$A<8;F$A++){var F$z=this._children[F$A];if(null!=F$z){var F$V=F$j;if(F$j){var F$n=F$y.containsBoundBox(F$z._relaxBox);if(F$P.treeNodeCollision+=1,0===F$n)continue;F$V=2===F$n}F$z.cullingObjects(F$y,F$V,F$t,F$k,F$T)}}},F$y.cullingShadowObjects=function(F$y,F$j,F$t,F$k,F$T){var F$Y,F$A=0,F$X=0,F$I=0;this._scene._dynamicBatchManager;for(F$A=0,F$Y=this._objects.length;F$A<F$Y;F$A++){var F$b=this._objects[F$A];if(F$b.castShadow&&F$w.isVisible(F$b._owner.layer.mask)&&F$b.enable){if(F$t&&0===F$y[0].containsBoundSphere(F$b.boundingSphere))continue;for(var F$D=1,F$l=F$y.length;F$D<F$l;F$D++){var F$r=F$j[F$D-1];if(0!==F$y[F$D].containsBoundSphere(F$b.boundingSphere)){var F$$=F$b._renderElements;for(F$X=0,F$I=F$$.length;F$X<F$I;F$X++)F$r._addRenderElement(F$$[F$X])}}}}for(F$A=0;F$A<8;F$A++){var F$W=this._children[F$A];if(null!=F$W){var F$z=F$t;if(F$t){var F$V=F$y[0].containsBoundBox(F$W._relaxBox);if(0===F$V)continue;F$z=2===F$V}F$W.cullingShadowObjects(F$y,F$j,F$z,F$k,F$T)}}},F$y.cullingShadowObjectsOnePSSM=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A,F$X=F$j[0],F$I=0,F$b=0,F$D=0;for(F$I=0,F$A=this._objects.length;F$I<F$A;F$I++){var F$l=this._objects[F$I];if(F$l.castShadow&&F$w.isVisible(F$l._owner.layer.mask)&&F$l.enable){if(F$k&&0===F$y.containsBoundSphere(F$l.boundingSphere))continue;F$l._renderUpdate(F$t);var F$r=F$l._renderElements;for(F$b=0,F$D=F$r.length;F$b<F$D;F$b++)F$X._addRenderElement(F$r[F$b])}}for(F$I=0;F$I<8;F$I++){var F$$=this._children[F$I];if(null!=F$$){var F$W=F$k;if(F$k){var F$z=F$y.containsBoundBox(F$$._relaxBox);if(0===F$z)continue;F$W=2===F$z}F$$.cullingShadowObjectsOnePSSM(F$y,F$j,F$t,F$W,F$T,F$Y)}}},F$y.renderBoudingBox=function(F$y){this._renderBoudingBox(F$y);for(var F$j=0;F$j<8;++F$j){var F$t=this._children[F$j];F$t&&F$t.renderBoudingBox(F$y)}},F$y.buildAllChild=function(F$y){if(F$y<this._scene.treeLevel)for(var F$j=0;F$j<8;F$j++){this.addChild(F$j).buildAllChild(F$y+1)}},F$y._renderBoudingBox=function(F$y){},F$W(0,F$y,"exactBox",function(){return this._exactBox},function(F$y){this._exactBox=F$y,F$Aj.add(F$y.min,F$y.max,this._boundingBoxCenter),F$Aj.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),F$W(0,F$y,"relaxBox",function(){return this._relaxBox},function(F$y){(this._relaxBox=F$y).getCorners(this._corners),F$iy.createfromPoints(this._corners,this._boundingSphere)}),F$A.debugMode=!1,F$A.relax=1.15,F$A.CHILDNUM=8,F$l(F$A,["tempVector0",function(){return this.tempVector0=new F$Aj},"tempSize",function(){return this.tempSize=new F$Aj},"tempCenter",function(){return this.tempCenter=new F$Aj},"_octreeSplit",function(){return this._octreeSplit=[new F$Aj(.25,.25,.25),new F$Aj(.75,.25,.25),new F$Aj(.25,.75,.25),new F$Aj(.75,.75,.25),new F$Aj(.25,.25,.75),new F$Aj(.75,.25,.75),new F$Aj(.25,.75,.75),new F$Aj(.75,.75,.75)]}]),F$A}(),F$o=(function(){function F$y(){}F$$(F$y,"laya.d3.core.scene.SceneManager")}(),function(){function F$y(F$y,F$j,F$t,F$k){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===F$y&&(F$y=1),void 0===F$j&&(F$j=1),void 0===F$t&&(F$t=1),void 0===F$k&&(F$k=1),this._r=F$y,this._g=F$j,this._b=F$t,this._a=F$k}return F$$(F$y,"laya.d3.core.trail.module.Color",null,"Color$1"),F$y.prototype.cloneTo=function(F$y){F$y._r=this._r,F$y._g=this._g,F$y._b=this._b,F$y._a=this._a},F$l(F$y,["RED",function(){return this.RED=new F$y(1,0,0,1)},"GREEN",function(){return this.GREEN=new F$y(0,1,0,1)},"BLUE",function(){return this.BLUE=new F$y(0,0,1,1)},"CYAN",function(){return this.CYAN=new F$y(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new F$y(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new F$y(1,0,1,1)},"GRAY",function(){return this.GRAY=new F$y(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new F$y(1,1,1,1)},"BLACK",function(){return this.BLACK=new F$y(0,0,0,1)}]),F$y}()),F$i=(function(){function F$y(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}F$$(F$y,"laya.d3.core.trail.module.Gradient");var F$j=F$y.prototype;F$j.setKeys=function(F$y,F$j){var F$t,F$k;this._colorKeys=F$y;for(var F$T=this.index=0;F$T<F$y.length;F$T++){var F$Y=(F$t=F$y[F$T]).color;this._colorKeyData[this.index++]=F$Y._r,this._colorKeyData[this.index++]=F$Y._g,this._colorKeyData[this.index++]=F$Y._b,this._colorKeyData[this.index++]=F$t.time}this._alphaKeys=F$j;for(var F$A=this.index=0;F$A<F$j.length;F$A++)F$k=F$j[F$A],this._alphaKeyData[this.index++]=F$k.alpha,this._alphaKeyData[this.index++]=F$k.time},F$j.cloneTo=function(F$y){var F$j=0,F$t=0,F$k=this.colorKeys,F$T=[];for(F$j=0,F$t=F$k.length;F$j<F$t;F$j++){var F$Y=new F$E;F$k[F$j].cloneTo(F$Y),F$T.push(F$Y)}var F$A=this.alphaKeys,F$X=[];for(F$j=0,F$t=F$A.length;F$j<F$t;F$j++){var F$I=new F$i;F$A[F$j].cloneTo(F$I),F$X.push(F$I)}F$y.setKeys(F$T,F$X)},F$W(0,F$j,"mode",function(){return this._mode},function(F$y){this._mode=F$y}),F$W(0,F$j,"colorKeys",function(){return this._colorKeys},function(F$y){this._colorKeys=F$y;for(var F$j=this.index=0;F$j<F$y.length;F$j++){var F$t=F$y[F$j],F$k=F$t.color;this._colorKeyData[this.index++]=F$k._r,this._colorKeyData[this.index++]=F$k._g,this._colorKeyData[this.index++]=F$k._b,this._colorKeyData[this.index++]=F$t.time}}),F$W(0,F$j,"alphaKeys",function(){return this._alphaKeys},function(F$y){this._alphaKeys=F$y;for(var F$j=this.index=0;F$j<F$y.length;F$j++){var F$t=F$y[F$j];this._alphaKeyData[this.index++]=F$t.alpha,this._alphaKeyData[this.index++]=F$t.time}})}(),function(){function F$y(F$y,F$j){this._alpha=NaN,this._time=NaN,void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),this._alpha=F$y,this._time=F$j}F$$(F$y,"laya.d3.core.trail.module.GradientAlphaKey");var F$j=F$y.prototype;return F$j.cloneTo=function(F$y){F$y.alpha=this.alpha,F$y.time=this.time},F$W(0,F$j,"alpha",function(){return this._alpha},function(F$y){this._alpha=F$y}),F$W(0,F$j,"time",function(){return this._time},function(F$y){this._time=F$y}),F$y}()),F$E=function(){function F$y(F$y,F$j){this._color=null,this._time=NaN,void 0===F$j&&(F$j=0),this._color=F$y||new F$o,this._time=F$j}F$$(F$y,"laya.d3.core.trail.module.GradientColorKey");var F$j=F$y.prototype;return F$j.cloneTo=function(F$y){this.color.cloneTo(F$y.color),F$y.time=this.time},F$W(0,F$j,"color",function(){return this._color},function(F$y){this._color=F$y}),F$W(0,F$j,"time",function(){return this._time},function(F$y){this._time=F$y}),F$y}(),F$u=(function(){function F$y(){}F$$(F$y,"laya.d3.core.trail.module.GradientMode"),F$y.Blend=0,F$y.Fixed=1}(),function(){function F$y(){}F$$(F$y,"laya.d3.core.trail.module.TextureMode"),F$y.Stretch=0,F$y.Tile=1}(),function(){function F$y(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}F$$(F$y,"laya.d3.core.trail.module.TrailKeyFrame"),F$y.prototype.cloneTo=function(F$y){F$y.time=this.time,F$y.inTangent=this.inTangent,F$y.outTangent=this.outTangent,F$y.value=this.value}}(),function(){function F$j(F$y){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new F$Aj,this._curPosition=new F$Aj,this._delVector3=new F$Aj,this._lastFixedVertexPosition=new F$Aj,this._pointAtoBVector3=new F$Aj,this._pointA=new F$Aj,this._pointB=new F$Aj,this._owner=F$y,this._id=F$j.renderElementCount++,0==this._id?F$y._owner.transform.position.cloneTo(this._lastPosition):F$y._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new F$Gj(F$u.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new F$Gj(F$u.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}F$$(F$j,"laya.d3.core.trail.TrailRenderElement");var F$y=F$j.prototype;F$e.imps(F$y,{"laya.d3.core.render.IRenderable":!0}),F$y._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},F$y._addTrailByFirstPosition=function(F$y,F$j){F$Aj.subtract(F$j,F$y,this._delVector3),F$Aj.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$Aj.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$Aj.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(F$y),F$y.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},F$y._addTrailByNextPosition=function(F$y){F$Aj.subtract(F$y,this._lastFixedVertexPosition,this._delVector3),F$Aj.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),F$Aj.normalize(this._pointAtoBVector3,this._pointAtoBVector3),F$Aj.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=F$Aj.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=F$Ey.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(F$y),F$y.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(F$y),this._virtualVerticesCount=2)},F$y._updateVerticesByPosition=function(F$y){this._pointe=F$y.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},F$y._updateVertexBuffer2=function(){var F$y,F$j=0,F$t=0,F$k=0;for(F$k=0,F$y=(this._verticesCount+this._virtualVerticesCount)/2;F$k<F$y;F$k++)F$t=0==this._owner.textureMode?(this._VerticesToTailLength[F$k]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[F$k],this._vertices2[F$j++]=1-F$t,this._vertices2[F$j++]=1-F$t;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},F$y._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},F$y._updateDisappear=function(){var F$y,F$j=0;for(F$j=this._curDisappearIndex,F$y=(this._verticesCount+this._virtualVerticesCount)/2;F$j<F$y;F$j++)this._owner._curtime-this._everyGroupVertexBirthTime[F$j]>=this._owner.time+F$Ey.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},F$y._beforeRender=function(F$y){return this._camera=F$y.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),F$Aj.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},F$y._render=function(F$y){this._isDead||(F$m.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),F$P.drawCall++,F$P.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},F$y._getVertexBuffer=function(F$y){return void 0===F$y&&(F$y=0),0===F$y?this._vertexBuffer1:1===F$y?this._vertexBuffer2:null},F$y._getVertexBuffers=function(){return this._vertexBuffers},F$y._getIndexBuffer=function(){return null},F$y.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},F$y._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},F$W(0,F$y,"_vertexBufferCount",function(){return this._vertexBuffers.length}),F$W(0,F$y,"triangleCount",function(){return 0}),F$j.renderElementCount=0}(),function(){function F$y(){}F$$(F$y,"laya.d3.core.trail.VertexTrail");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration1}),F$W(1,F$y,"vertexDeclaration1",function(){return F$y._vertexDeclaration1}),F$W(1,F$y,"vertexDeclaration2",function(){return F$y._vertexDeclaration2}),F$l(F$y,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new F$Yy(32,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",41),new F$Ay(24,"single",33),new F$Ay(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new F$Yy(4,[new F$Ay(0,"single",38)])}]),F$y}()),F$yy=function(){function F$_(F$y){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=F$y}F$$(F$_,"laya.d3.graphics.DynamicBatch");var F$y=F$_.prototype;return F$e.imps(F$y,{"laya.d3.core.render.IRenderable":!0}),F$y._getVertexBuffer=function(F$y){return void 0===F$y&&(F$y=0),0===F$y?this._vertexBuffer:null},F$y._getIndexBuffer=function(){return this._indexBuffer},F$y._getCombineRenderElementFromPool=function(F$y,F$j,F$t){var F$k=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return F$k||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=F$k=new F$R,F$k._sprite3D=new F$Bj),F$k._sprite3D._render._renderUpdate(F$t),F$k},F$y._getRenderElement=function(F$y,F$j,F$t){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*F$_.maxVertexCount),this._indexDatas=new Uint16Array(F$_.maxIndexCount),this._vertexBuffer=F$Gj.create(this._vertexDeclaration,F$_.maxVertexCount,35048),this._indexBuffer=F$Fj.create("ushort",F$_.maxIndexCount,35048));for(var F$k=this._merageElements.length=0,F$T=0,F$Y=0,F$A=this._combineRenderElements.length;F$Y<F$A;F$Y++){var F$X=this._combineRenderElements[F$Y],F$I=F$X.getDynamicBatchBakedVertexs(0),F$b=F$X.getBakedIndices(),F$D=F$X._sprite3D.transform._isFrontFaceInvert,F$l=F$k/(this._vertexDeclaration.vertexStride/4),F$r=F$T,F$$=F$r+F$b.length;F$X._tempBatchIndexStart=F$r,F$X._tempBatchIndexEnd=F$$,this._indexDatas.set(F$b,F$T);var F$W=0;if(F$D)for(F$W=F$r;F$W<F$$;F$W+=3){this._indexDatas[F$W]=F$l+this._indexDatas[F$W];var F$z=this._indexDatas[F$W+1],F$V=this._indexDatas[F$W+2];this._indexDatas[F$W+1]=F$l+F$V,this._indexDatas[F$W+2]=F$l+F$z}else for(F$W=F$r;F$W<F$$;F$W+=3)this._indexDatas[F$W]=F$l+this._indexDatas[F$W],this._indexDatas[F$W+1]=F$l+this._indexDatas[F$W+1],this._indexDatas[F$W+2]=F$l+this._indexDatas[F$W+2];F$T+=F$b.length,this._vertexDatas.set(F$I,F$k),F$k+=F$I.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),F$Y=this._combineRenderElementPoolIndex=0,F$A=this._materials.length;F$Y<F$A;F$Y++){var F$n=this._getCombineRenderElementFromPool(F$y,F$j,F$t);F$n._type=2,F$n._staticBatch=null;var F$C=(F$n.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[F$Y]]._tempBatchIndexStart,F$M=F$Y+1===this._materialToRenderElementsOffsets.length?F$T:this._combineRenderElements[this._materialToRenderElementsOffsets[F$Y+1]]._tempBatchIndexStart;F$n._tempBatchIndexStart=F$C,F$n._tempBatchIndexEnd=F$M,F$n._material=this._materials[F$Y],this._merageElements.push(F$n)}},F$y._addCombineRenderObjTest=function(F$y){var F$j=F$y.renderObj,F$t=this._currentCombineIndexCount+F$j._getIndexBuffer().indexCount,F$k=this._currentCombineVertexCount+F$j._getVertexBuffer().vertexCount;return!(F$_.maxVertexCount<F$k||F$_.maxIndexCount<F$t)},F$y._addCombineRenderObj=function(F$y){var F$j=F$y.renderObj;this._combineRenderElements.push(F$y),this._currentCombineIndexCount=this._currentCombineIndexCount+F$j._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$j._getVertexBuffer().vertexCount},F$y._addCombineMaterial=function(F$y){this._materials.push(F$y)},F$y._addMaterialToRenderElementOffset=function(F$y){this._materialToRenderElementsOffsets.push(F$y)},F$y._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},F$y._addToRenderQueue=function(F$y,F$j,F$t,F$k){this._getRenderElement(F$j,F$t,F$k);for(var F$T=0,F$Y=this._materials.length;F$T<F$Y;F$T++)F$y.getRenderQueue(this._materials[F$T].renderQueue)._addDynamicBatchElement(this._merageElements[F$T])},F$y._beforeRender=function(F$y){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$y._render=function(F$y){var F$j=F$y._batchIndexEnd-F$y._batchIndexStart;F$m.mainContext.drawElements(4,F$j,5123,2*F$y._batchIndexStart),F$P.drawCall++,F$P.trianglesFaces+=F$j/3},F$y._getVertexBuffers=function(){return null},F$W(0,F$y,"_vertexBufferCount",function(){return 1}),F$W(0,F$y,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$W(0,F$y,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),F$_.maxVertexCount=2e4,F$_.maxIndexCount=4e4,F$_.maxCombineTriangleCount=10,F$_}(),F$jy=function(){function F$_(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}F$$(F$_,"laya.d3.graphics.DynamicBatchManager");var F$y=F$_.prototype;return F$y.getDynamicBatch=function(F$y,F$j){var F$t,F$k=F$y.id.toString()+F$j;return this._dynamicBatches[F$k]?F$t=this._dynamicBatches[F$k]:this._dynamicBatches[F$k]=F$t=new F$yy(F$y),F$t},F$y._garbageCollection=function(){for(var F$y in this._dynamicBatches)0===this._dynamicBatches[F$y].combineRenderElementsCount&&delete this._dynamicBatches[F$y]},F$y._addPrepareRenderElement=function(F$y){this._prepareDynamicBatchCombineElements.push(F$y)},F$y._finishCombineDynamicBatch=function(F$y){var F$j,F$t,F$k;this._prepareDynamicBatchCombineElements.sort(F$_._sortPrepareDynamicBatch);for(var F$T,F$Y,F$A,F$X,F$I,F$b=-1,F$D=!0,F$l=0,F$r=-1,F$$=0,F$W=this._prepareDynamicBatchCombineElements.length;F$$<F$W;F$$++){var F$z=(F$Y=this._prepareDynamicBatchCombineElements[F$$]).renderObj._getVertexBuffer(0).vertexDeclaration,F$V=F$t!==F$z;F$V&&(F$l=0,F$t=F$z);var F$n=F$l!==F$b;if(F$n&&(F$b=F$l),(F$V||F$n)&&(F$A=this.getDynamicBatch(F$z,F$l),F$j=null),F$D)if(F$A._addCombineRenderObjTest(F$Y)){if(F$j!==(F$T=F$Y._material))F$X&&(F$y.getRenderQueue(F$I._material.renderQueue)._addRenderElement(F$I),F$I=F$X=null,F$r=-1),F$X=F$T,F$r=F$A.combineRenderElementsCount,F$I=F$Y,F$j=F$T;else if(F$X){var F$C=F$I.renderObj,F$M=F$Y.renderObj;F$C._getVertexBuffer().vertexCount+F$M._getVertexBuffer().vertexCount>F$yy.maxVertexCount||F$C._getIndexBuffer().indexCount+F$M._getIndexBuffer().indexCount>F$yy.maxIndexCount?(F$y.getRenderQueue(F$I._material.renderQueue)._addRenderElement(F$I),F$X=F$T,F$r=F$A.combineRenderElementsCount,F$I=F$Y):(F$A._addCombineMaterial(F$X),F$A._addMaterialToRenderElementOffset(F$r),F$A._addCombineRenderObj(F$I),F$I=F$X=null,F$r=-1,F$A._addCombineRenderObj(F$Y))}else F$A._addCombineRenderObj(F$Y);F$D=!0}else F$X&&(F$y.getRenderQueue(F$I._material.renderQueue)._addRenderElement(F$I),F$I=F$X=null,F$r=-1),F$l++,F$D=!1;else F$k=this._prepareDynamicBatchCombineElements[F$$-1],F$A._addMaterialToRenderElementOffset(F$A.combineRenderElementsCount),F$j=F$k._material,F$A._addCombineMaterial(F$j),F$A._addCombineRenderObj(F$k),F$D=!0,F$j!==(F$T=F$Y._material)?(F$X=F$T,F$r=F$A.combineRenderElementsCount,F$I=F$Y):F$A._addCombineRenderObj(F$Y),F$j=F$T}F$X&&(F$y.getRenderQueue(F$I._material.renderQueue)._addRenderElement(F$I),F$I=F$X=null,F$r=-1),this._prepareDynamicBatchCombineElements.length=0},F$y._clearRenderElements=function(){for(var F$y in this._dynamicBatches)this._dynamicBatches[F$y]._clearRenderElements()},F$y._addToRenderQueue=function(F$y,F$j,F$t,F$k){for(var F$T in this._dynamicBatches){var F$Y=this._dynamicBatches[F$T];0<F$Y.combineRenderElementsCount&&F$Y._addToRenderQueue(F$y,F$j,F$t,F$k)}},F$y.dispose=function(){this._dynamicBatches=null},F$_._sortPrepareDynamicBatch=function(F$y,F$j){return F$y._mainSortID-F$j._mainSortID},F$_}(),F$ty=function(){function F$y(){}return F$$(F$y,"laya.d3.graphics.FrustumCulling"),F$y.renderShadowObjectCulling=function(F$y,F$j,F$t,F$k,F$T){var F$Y=0,F$A=0,F$X=0,F$I=0;for(F$Y=0,F$X=F$t.length;F$Y<F$X;F$Y++){var F$b=F$t[F$Y];F$b&&F$b._clearRenderElements()}var F$D,F$l,F$r,F$$=F$y._cullingRenders;if(1<F$T){for(F$Y=0,F$X=F$y._cullingRendersLength;F$Y<F$X;F$Y++)if((F$D=F$$[F$Y]).castShadow&&F$w.isVisible(F$D._owner.layer.mask)&&F$D.enable)for(var F$W=1,F$z=F$j.length;F$W<F$z;F$W++)if(F$l=F$t[F$W-1],0!==F$j[F$W].containsBoundSphere(F$D.boundingSphere))for(F$A=0,F$I=(F$r=F$D._renderElements).length;F$A<F$I;F$A++)F$l._addRenderElement(F$r[F$A])}else for(F$Y=0,F$X=F$y._cullingRendersLength;F$Y<F$X;F$Y++)if((F$D=F$$[F$Y]).castShadow&&F$w.isVisible(F$D._owner.layer.mask)&&F$D.enable&&0!==F$j[0].containsBoundSphere(F$D.boundingSphere))for(F$D._renderUpdate(F$k),F$l=F$t[0],F$A=0,F$I=(F$r=F$D._renderElements).length;F$A<F$I;F$A++)F$l._addRenderElement(F$r[F$A])},F$y.renderShadowObjectCullingOctree=function(F$y,F$j,F$t,F$k,F$T){for(var F$Y=0,F$A=F$t.length;F$Y<F$A;F$Y++){var F$X=F$t[F$Y];F$X&&F$X._clearRenderElements()}1<F$T?F$y.treeRoot.cullingShadowObjects(F$j,F$t,!0,0,F$y):F$y.treeRoot.cullingShadowObjectsOnePSSM(F$j[0],F$t,F$k,!0,0,F$y)},F$y.renderObjectCulling=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=0,F$X=0,F$I=0,F$b=0,F$D=F$j._quenes,F$l=F$j._dynamicBatchManager,F$r=F$j._cullingRenders;for(F$A=0,F$X=F$D.length;F$A<F$X;F$A++){var F$$=F$D[F$A];F$$&&F$$._clearRenderElements()}var F$W=F$ky._staticBatchManagers;for(F$A=0,F$X=F$W.length;F$A<F$X;F$A++)F$W[F$A]._clearRenderElements();F$l._clearRenderElements();var F$z=F$t.transform.position;for(F$A=0,F$X=F$j._cullingRendersLength;F$A<F$X;F$A++){var F$V=F$r[F$A];if(F$w.isVisible(F$V._owner.layer.mask)&&F$V.enable&&0!==F$y.containsBoundSphere(F$V.boundingSphere)&&F$V._renderUpdate(F$Y)){F$V._distanceForSort=F$Aj.distance(F$V.boundingSphere.center,F$z)+F$V.sortingFudge;var F$n=F$V._renderElements;for(F$I=0,F$b=F$n.length;F$I<F$b;F$I++){var F$C=F$n[F$I],F$M=F$C._staticBatch;if(F$M&&F$M._material===F$C._material)F$M._addBatchRenderElement(F$C);else{var F$_=F$C.renderObj;F$_.triangleCount<10&&1===F$_._vertexBufferCount&&F$_._getIndexBuffer()&&F$C._material.renderQueue<2&&F$C._canDynamicBatch&&!F$V._owner.isStatic?F$l._addPrepareRenderElement(F$C):F$j.getRenderQueue(F$C._material.renderQueue)._addRenderElement(F$C)}}}}for(F$A=0,F$X=F$W.length;F$A<F$X;F$A++)F$W[F$A]._addToRenderQueue(F$j,F$k,F$T,F$Y);F$l._finishCombineDynamicBatch(F$j),F$l._addToRenderQueue(F$j,F$k,F$T,F$Y)},F$y.renderObjectCullingOctree=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=0,F$X=0,F$I=F$j._quenes,F$b=F$j._dynamicBatchManager;for(F$A=0,F$X=F$I.length;F$A<F$X;F$A++){var F$D=F$I[F$A];F$D&&F$D._clearRenderElements()}var F$l=F$ky._staticBatchManagers;for(F$A=0,F$X=F$l.length;F$A<F$X;F$A++)F$l[F$A]._clearRenderElements();for(F$b._clearRenderElements(),F$j._cullingRenders.length=0,F$j.treeRoot.cullingObjects(F$y,!0,0,F$t.transform.position,F$Y),F$A=0,F$X=F$l.length;F$A<F$X;F$A++)F$l[F$A]._addToRenderQueue(F$j,F$k,F$T,F$Y);F$b._finishCombineDynamicBatch(F$j),F$b._addToRenderQueue(F$j,F$k,F$T,F$Y)},F$y.renderObjectCullingNoBoundFrustum=function(F$y,F$j,F$t,F$k,F$T){var F$Y=0,F$A=0,F$X=0,F$I=0,F$b=F$y._quenes,F$D=F$y._dynamicBatchManager,F$l=F$y._cullingRenders;for(F$Y=0,F$A=F$b.length;F$Y<F$A;F$Y++){var F$r=F$b[F$Y];F$r&&F$r._clearRenderElements()}var F$$=F$ky._staticBatchManagers;for(F$Y=0,F$A=F$$.length;F$Y<F$A;F$Y++)F$$[F$Y]._clearRenderElements();F$D._clearRenderElements();var F$W=F$j.transform.position;for(F$Y=0,F$A=F$y._cullingRendersLength;F$Y<F$A;F$Y++){var F$z=F$l[F$Y];if(F$w.isVisible(F$z._owner.layer.mask)&&F$z.enable){F$z._renderUpdate(F$T),F$z._distanceForSort=F$Aj.distance(F$z.boundingSphere.center,F$W)+F$z.sortingFudge;var F$V=F$z._renderElements;for(F$X=0,F$I=F$V.length;F$X<F$I;F$X++){var F$n=F$V[F$X],F$C=F$n._staticBatch;if(F$C&&F$C._material===F$n._material)F$C._addBatchRenderElement(F$n);else{var F$M=F$n.renderObj;F$M.triangleCount<10&&1===F$M._vertexBufferCount&&F$M._getIndexBuffer()&&F$n._material.renderQueue<2&&F$n._canDynamicBatch&&!F$z._owner.isStatic?F$D._addPrepareRenderElement(F$n):F$y.getRenderQueue(F$n._material.renderQueue)._addRenderElement(F$n)}}}}for(F$Y=0,F$A=F$$.length;F$Y<F$A;F$Y++)F$$[F$Y]._addToRenderQueue(F$y,F$t,F$k,F$T);F$D._finishCombineDynamicBatch(F$y),F$D._addToRenderQueue(F$y,F$t,F$k,F$T)},F$y}(),F$ky=function(){function F$Y(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}F$$(F$Y,"laya.d3.graphics.StaticBatchManager");var F$y=F$Y.prototype;return F$y._finishInit=function(){for(var F$y in this._staticBatches)this._staticBatches[F$y]._finishInit();this._initBatchRenderElements.length=0},F$y._initStaticBatchs=function(F$y){throw new Error("StaticBatchManager:must override this function.")},F$y._addInitBatchSprite=function(F$y){for(var F$j=F$y._render._renderElements,F$t=0,F$k=F$j.length;F$t<F$k;F$t++)this._initBatchRenderElements.push(F$j[F$t])},F$y._clearRenderElements=function(){for(var F$y in this._staticBatches)this._staticBatches[F$y]._clearRenderElements()},F$y._garbageCollection=function(F$y){var F$j=F$y._staticBatch,F$t=F$j._initBatchRenderElements,F$k=F$t.indexOf(F$y);F$t.splice(F$k,1),0===F$t.length&&(F$j.dispose(),delete this._staticBatches[F$j._key])},F$y._addToRenderQueue=function(F$y,F$j,F$t,F$k){for(var F$T in this._staticBatches){var F$Y=this._staticBatches[F$T];0<F$Y._batchRenderElements.length&&F$Y._updateToRenderQueue(F$y,F$k)}},F$y.dispose=function(){this._staticBatches=null},F$Y._addToStaticBatchQueue=function(F$y){F$y instanceof laya.d3.core.RenderableSprite3D&&F$y._addToInitStaticBatchManager();for(var F$j=0,F$t=F$y.numChildren;F$j<F$t;F$j++)F$Y._addToStaticBatchQueue(F$y._childs[F$j])},F$Y.combine=function(F$y,F$j){var F$t,F$k=0,F$T=0;if(F$j)for(F$k=0,F$T=F$j.length;F$k<F$T;F$k++){F$j[F$k]._addToInitStaticBatchManager()}else F$y&&F$Y._addToStaticBatchQueue(F$y);for(F$k=0,F$T=F$Y._staticBatchManagers.length;F$k<F$T;F$k++)(F$t=F$Y._staticBatchManagers[F$k])._initStaticBatchs(F$y),F$t._finishInit()},F$Y._staticBatchManagers=[],F$Y}(),F$Ty=function(){function F$y(F$y,F$j,F$t){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=F$y,this._manager=F$j,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=F$t}F$$(F$y,"laya.d3.graphics.StaticBatch");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$j._binarySearch=function(F$y){for(var F$j=0,F$t=this._batchRenderElements.length-1,F$k=0;F$j<=F$t;)F$k=Math.floor((F$j+F$t)/2),this._compareBatchRenderElement(this._batchRenderElements[F$k],F$y)?F$t=F$k-1:F$j=F$k+1;return F$j},F$j._compareBatchRenderElement=function(F$y,F$j){throw new Error("StaticBatch:must override this function.")},F$j._getVertexDecLightMap=function(F$y){return F$y===F$Fy.vertexDeclaration?F$wy.vertexDeclaration:F$y===F$xy.vertexDeclaration?F$qy.vertexDeclaration:F$y===F$dy.vertexDeclaration?F$_y.vertexDeclaration:F$y===F$Jy.vertexDeclaration?null:F$y===F$zy.vertexDeclaration?F$Vy.vertexDeclaration:F$y===F$gy.vertexDeclaration?F$Hy.vertexDeclaration:F$y===F$my.vertexDeclaration?F$Uy.vertexDeclaration:F$y===F$Gy.vertexDeclaration?F$Sy.vertexDeclaration:F$y===F$xy.vertexDeclaration?F$qy.vertexDeclaration:F$y===F$py.vertexDeclaration?F$ey.vertexDeclaration:F$y===F$Jy.vertexDeclaration?null:F$y===F$zy.vertexDeclaration?F$Vy.vertexDeclaration:F$y===F$ay.vertexDeclaration?F$Ky.vertexDeclaration:F$y===F$my.vertexDeclaration?F$Uy.vertexDeclaration:F$y},F$j._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},F$j._addBatchRenderElement=function(F$y){this._batchRenderElements.splice(this._binarySearch(F$y),0,F$y)},F$j._updateToRenderQueue=function(F$y,F$j){this._combineRenderElementPoolIndex=0,this._getRenderElement(F$y.getRenderQueue(this._material.renderQueue)._renderElements,F$y,F$j)},F$j._getRenderElement=function(F$y,F$j,F$t){throw new Error("StaticBatch:must override this function.")},F$j._finishInit=function(){throw new Error("StaticBatch:must override this function.")},F$j._clearRenderElements=function(){this._batchRenderElements.length=0},F$j.dispose=function(){},F$j._getVertexBuffer=function(F$y){return void 0===F$y&&(F$y=0),null},F$j._getIndexBuffer=function(){return null},F$j._beforeRender=function(F$y){return!0},F$j._render=function(F$y){},F$j._getVertexBuffers=function(){return null},F$W(0,F$j,"_vertexBufferCount",function(){return 1}),F$W(0,F$j,"triangleCount",function(){return 0}),F$y.combine=function(F$y){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),F$ky.combine(F$y)},F$y.maxBatchVertexCount=65535,F$y}(),F$Yy=function(){function F$A(F$y,F$j){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++F$A._uniqueIDCounter,this._id>F$A.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",F$A.maxVertexDeclaration);this._shaderValues=new F$rj,this._vertexElementsDic={},this._vertexStride=F$y,this._vertexElements=F$j;for(var F$t=0;F$t<F$j.length;F$t++){var F$k=F$j[F$t],F$T=F$k.elementUsage;this._vertexElementsDic[F$T]=F$k;var F$Y=[F$A._getTypeSize(F$k.elementFormat)/4,5126,!1,this._vertexStride,F$k.offset];switch(this._shaderValues.setValue(F$T,F$Y),F$T){case 1:this._addShaderDefine(F$Pj.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(F$Pj.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(F$Pj.SHADERDEFINE_UV1)}}}F$$(F$A,"laya.d3.graphics.VertexDeclaration");var F$y=F$A.prototype;return F$y._addShaderDefine=function(F$y){this._shaderDefineValue|=F$y},F$y._removeShaderDefine=function(F$y){this._shaderDefineValue&=~F$y},F$y.getVertexElements=function(){return this._vertexElements.slice()},F$y.getVertexElementByUsage=function(F$y){return this._vertexElementsDic[F$y]},F$y.unBinding=function(){},F$W(0,F$y,"shaderDefineValue",function(){return this._shaderDefineValue}),F$W(0,F$y,"id",function(){return this._id}),F$W(0,F$y,"vertexStride",function(){return this._vertexStride}),F$W(0,F$y,"shaderValues",function(){return this._shaderValues}),F$A._getTypeSize=function(F$y){switch(F$y){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},F$A.getVertexStride=function(F$y){for(var F$j=0,F$t=0;F$t<F$y.Length;F$t++){var F$k=F$y[F$t],F$T=F$k.offset+F$A._getTypeSize(F$k.elementFormat);F$j<F$T&&(F$j=F$T)}return F$j},F$A._maxVertexDeclarationBit=1e3,F$A._uniqueIDCounter=1,F$l(F$A,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),F$A}(),F$Ay=function(){function F$y(F$y,F$j,F$t){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=F$y,this.elementFormat=F$j,this.elementUsage=F$t}return F$$(F$y,"laya.d3.graphics.VertexElement"),F$y}(),F$Xy=(function(){function F$y(){}F$$(F$y,"laya.d3.graphics.VertexElementFormat"),F$y.Single="single",F$y.Vector2="vector2",F$y.Vector3="vector3",F$y.Vector4="vector4",F$y.Color="color",F$y.Byte4="byte4",F$y.Short2="short2",F$y.Short4="short4",F$y.NormalizedShort2="normalizedshort2",F$y.NormalizedShort4="normalizedshort4",F$y.HalfVector2="halfvector2",F$y.HalfVector4="halfvector4"}(),function(){function F$y(){}F$$(F$y,"laya.d3.graphics.VertexElementUsage"),F$y.POSITION0=0,F$y.COLOR0=1,F$y.TEXTURECOORDINATE0=2,F$y.NORMAL0=3,F$y.BINORMAL0=4,F$y.TANGENT0=5,F$y.BLENDINDICES0=6,F$y.BLENDWEIGHT0=7,F$y.DEPTH0=8,F$y.FOG0=9,F$y.POINTSIZE0=10,F$y.SAMPLE0=11,F$y.TESSELLATEFACTOR0=12,F$y.COLOR1=13,F$y.NEXTTEXTURECOORDINATE0=14,F$y.TEXTURECOORDINATE1=15,F$y.NEXTTEXTURECOORDINATE1=16,F$y.CORNERTEXTURECOORDINATE0=17,F$y.VELOCITY0=18,F$y.STARTCOLOR0=19,F$y.STARTSIZE=20,F$y.AGEADDSCALE0=21,F$y.STARTROTATION=22,F$y.ENDCOLOR0=23,F$y.STARTLIFETIME=24,F$y.TIME0=33,F$y.SHAPEPOSITIONSTARTLIFETIME=30,F$y.DIRECTIONTIME=32,F$y.SIZEROTATION0=27,F$y.RADIUS0=28,F$y.RADIAN0=29,F$y.STARTSPEED=31,F$y.RANDOM0=34,F$y.RANDOM1=35,F$y.SIMULATIONWORLDPOSTION=36,F$y.SIMULATIONWORLDROTATION=37,F$y.TEXTURECOORDINATE0X=38,F$y.TEXTURECOORDINATE0X1=39,F$y.TEXTURECOORDINATE0Y=40,F$y.OFFSETVECTOR=41}(),function(){function F$y(F$y,F$j,F$t){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=F$y,this._textureCoordinate0=F$j,this._time=F$t}F$$(F$y,"laya.d3.graphics.VertexGlitter");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate0}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"time",function(){return this._time}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(24,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector2",2),new F$Ay(20,"single",33)])}])}(),function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=F$y,this._position=F$j,this._velocity=F$t,this._startColor=F$k,this._endColor=F$T,this._sizeRotation=F$Y,this._radius=F$A,this._radian=F$X,this._ageAddScale=F$I,this._time=F$b}F$$(F$y,"laya.d3.graphics.VertexParticle");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"endColor",function(){return this._endColor}),F$W(0,F$j,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$W(0,F$j,"sizeRotation",function(){return this._sizeRotation}),F$W(0,F$j,"velocity",function(){return this._velocity}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"startColor",function(){return this._startColor}),F$W(0,F$j,"radius",function(){return this._radius}),F$W(0,F$j,"radian",function(){return this._radian}),F$W(0,F$j,"ageAddScale",function(){return this._ageAddScale}),F$W(0,F$j,"time",function(){return this._time}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(116,[new F$Ay(0,"vector4",17),new F$Ay(16,"vector3",0),new F$Ay(28,"vector3",18),new F$Ay(40,"vector4",19),new F$Ay(56,"vector4",23),new F$Ay(72,"vector3",27),new F$Ay(84,"vector2",28),new F$Ay(92,"vector4",29),new F$Ay(108,"single",24),new F$Ay(112,"single",33)])}])}(),function(){function F$y(F$y){this._position=null,this._position=F$y}F$$(F$y,"laya.d3.graphics.VertexPosition");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(12,[new F$Ay(0,"vector3",0)])}]),F$y}()),F$Iy=function(){function F$y(F$y,F$j){this._position=null,this._normal=null,this._position=F$y,this._normal=F$j}F$$(F$y,"laya.d3.graphics.VertexPositionNormal");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(24,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3)])}]),F$y}(),F$by=function(){function F$y(F$y,F$j,F$t){this._position=null,this._normal=null,this._color=null,this._position=F$y,this._normal=F$j,this._color=F$t}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColor");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(40,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1)])}]),F$y}(),F$Dy=function(){function F$y(F$y,F$j,F$t,F$k,F$T){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._blendIndex=F$k,this._blendWeight=F$T}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorSkin");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(72,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector4",7),new F$Ay(56,"vector4",6)])}]),F$y}(),F$ly=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._tangent=F$k,this._blendIndex=F$T,this._blendWeight=F$Y}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(88,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector4",7),new F$Ay(56,"vector4",6),new F$Ay(72,"vector4",5)])}]),F$y}(),F$ry=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._tangent=F$k,this._blendIndex=F$T,this._blendWeight=F$Y}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(84,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector4",7),new F$Ay(56,"vector4",6),new F$Ay(72,"vector3",5)])}]),F$y}(),F$$y=function(){function F$y(F$y,F$j,F$t,F$k){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._tangent=F$k}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(56,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector4",5)])}]),F$y}(),F$Wy=function(){function F$y(F$y,F$j,F$t,F$k){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._tangent=F$k}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(52,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector3",5)])}]),F$y}(),F$zy=function(){function F$y(F$y,F$j,F$t,F$k){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate=F$k}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTexture");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(48,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2)])}]),F$y}(),F$Vy=function(){function F$y(F$y,F$j,F$t,F$k,F$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate0=F$k,this._textureCoordinate1=F$T}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(56,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector2",15)])}]),F$y}(),F$ny=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate0=F$k,this._textureCoordinate1=F$T,this._blendIndex=F$Y,this._blendWeight=F$A}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(88,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector2",15),new F$Ay(56,"vector4",7),new F$Ay(72,"vector4",6)])}]),F$y}(),F$Cy=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate0=F$k,this._textureCoordinate1=F$T,this._tangent=F$Y,this._blendIndex=F$A,this._blendWeight=F$X}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(104,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector2",15),new F$Ay(56,"vector4",7),new F$Ay(72,"vector4",6),new F$Ay(88,"vector4",5)])}]),F$y}(),F$My=function(){function F$y(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$j.VertexPositionNormalColorTexture0SkinTangent=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate0=F$k,this._textureCoordinate1=F$T,this._tangent=F$Y,this._blendIndex=F$A,this._blendWeight=F$X},F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(100,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector2",15),new F$Ay(56,"vector4",7),new F$Ay(72,"vector4",6),new F$Ay(88,"vector3",5)])}]),F$y}(),F$_y=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate0=F$k,this._textureCoordinate1=F$T,this._tangent=F$Y}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(72,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector2",15),new F$Ay(56,"vector4",5)])}]),F$y}(),F$ey=function(){function F$y(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$j.VertexPositionNormalColorTexture0Tangent=function(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate0=F$k,this._textureCoordinate1=F$T,this._tangent=F$Y},F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(68,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector2",15),new F$Ay(56,"vector3",5)])}]),F$y}(),F$vy=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate=F$k,this._blendIndex=F$T,this._blendWeight=F$Y}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(80,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector4",7),new F$Ay(64,"vector4",6)])}]),F$y}(),F$Ny=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate=F$k,this._tangent=F$T,this._blendIndex=F$Y,this._blendWeight=F$A}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(96,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector4",7),new F$Ay(64,"vector4",6),new F$Ay(80,"vector4",5)])}]),F$y}(),F$Py=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate=F$k,this._tangent=F$T,this._blendIndex=F$Y,this._blendWeight=F$A}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(92,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector4",7),new F$Ay(64,"vector4",6),new F$Ay(80,"vector3",5)])}]),F$y}(),F$dy=function(){function F$y(F$y,F$j,F$t,F$k,F$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate=F$k,this._tangent=F$T}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(64,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector4",5)])}]),F$y}(),F$py=function(){function F$y(F$y,F$j,F$t,F$k,F$T){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._color=F$t,this._textureCoordinate=F$k,this._tangent=F$T}F$$(F$y,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"color",function(){return this._color}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(60,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",1),new F$Ay(40,"vector2",2),new F$Ay(48,"vector3",5)])}]),F$y}(),F$fy=function(){function F$y(F$y,F$j,F$t){this._position=null,this._normal=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._tangent=F$t}F$$(F$y,"laya.d3.graphics.VertexPositionNormalSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(40,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector4",5)])}]),F$y}(),F$Qy=function(){function F$y(F$y,F$j,F$t){this._position=null,this._normal=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._tangent=F$t}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(36,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector3",5)])}]),F$y}(),F$my=function(){function F$y(F$y,F$j,F$t){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTexture");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(32,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2)])}]),F$y}(),F$Uy=function(){function F$y(F$y,F$j,F$t,F$k){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=F$y,this._normal=F$j,this._textureCoordinate0=F$t,this._textureCoordinate1=F$k}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(40,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector2",15)])}]),F$y}(),F$qy=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=F$y,this._normal=F$j,this._textureCoordinate0=F$t,this._textureCoordinate1=F$k,this._blendIndex=F$T,this._blendWeight=F$Y}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(72,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector2",15),new F$Ay(40,"vector4",7),new F$Ay(56,"vector4",6)])}]),F$y}(),F$wy=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._textureCoordinate0=F$t,this._textureCoordinate1=F$k,this._tangent=F$T,this._blendIndex=F$Y,this._blendWeight=F$A}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(88,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector2",15),new F$Ay(40,"vector4",7),new F$Ay(56,"vector4",6),new F$Ay(72,"vector4",5)])}]),F$y}(),F$Sy=function(){function F$y(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$j.VertexPositionNormalTexture0SkinTangent=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){this._position=F$y,this._normal=F$j,this._textureCoordinate0=F$t,this._textureCoordinate1=F$k,this._tangent=F$T,this._blendIndex=F$Y,this._blendWeight=F$A},F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(84,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector2",15),new F$Ay(40,"vector4",7),new F$Ay(56,"vector4",6),new F$Ay(72,"vector3",5)])}]),F$y}(),F$Hy=function(){function F$y(F$y,F$j,F$t,F$k,F$T){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._textureCoordinate0=F$t,this._textureCoordinate1=F$k,this._tangent=F$T}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(56,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector2",15),new F$Ay(40,"vector4",5)])}]),F$y}(),F$Ky=function(){function F$y(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$j.VertexPositionNormalTexture0Tangent=function(F$y,F$j,F$t,F$k,F$T){this._position=F$y,this._normal=F$j,this._textureCoordinate0=F$t,this._textureCoordinate1=F$k,this._tangent=F$T},F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(52,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector2",15),new F$Ay(40,"vector3",5)])}]),F$y}(),F$xy=function(){function F$y(F$y,F$j,F$t,F$k,F$T){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t,this._blendIndex=F$k,this._blendWeight=F$T}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTextureSkin");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(64,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector4",7),new F$Ay(48,"vector4",6)])}]),F$y}(),F$Fy=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t,this._tangent=F$k,this._blendIndex=F$T,this._blendWeight=F$Y}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(80,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector4",7),new F$Ay(48,"vector4",6),new F$Ay(64,"vector4",5)])}]),F$y}(),F$Gy=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t,this._tangent=F$k,this._blendIndex=F$T,this._blendWeight=F$Y}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(76,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector4",7),new F$Ay(48,"vector4",6),new F$Ay(64,"vector3",5)])}]),F$y}(),F$gy=function(){function F$y(F$y,F$j,F$t,F$k){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t,this._tangent=F$k}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(48,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector4",5)])}]),F$y}(),F$ay=function(){function F$y(F$y,F$j,F$t,F$k){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t,this._tangent=F$k}F$$(F$y,"laya.d3.graphics.VertexPositionNormalTextureTangent");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(44,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector3",5)])}]),F$y}(),F$Jy=function(){function F$y(F$y,F$j,F$t){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t}F$$(F$y,"laya.d3.graphics.VertexPositionNTBTexture");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(56,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector3",5),new F$Ay(36,"vector3",4),new F$Ay(48,"vector2",2)])}]),F$y}(),F$hy=function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=F$y,this._normal=F$j,this._textureCoordinate0=F$k,this._textureCoordinate1=F$T,this._tangent=F$Y,F$t=F$t,this._blendIndex=F$A,this._blendWeight=F$X}F$$(F$y,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"tangent",function(){return this._tangent}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(0,F$j,"textureCoordinate1",function(){return this._textureCoordinate1}),F$W(0,F$j,"blendIndex",function(){return this._blendIndex}),F$W(0,F$j,"blendWeight",function(){return this._blendWeight}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(96,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector3",5),new F$Ay(36,"vector3",4),new F$Ay(48,"vector2",2),new F$Ay(56,"vector2",15),new F$Ay(64,"vector4",7),new F$Ay(80,"vector4",6)])}]),F$y}(),F$Oy=function(){function F$y(F$y,F$j,F$t){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=F$y,this._normal=F$j,this._textureCoordinate=F$t}F$$(F$y,"laya.d3.graphics.VertexPositionNTBTextureSkin");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"textureCoordinate",function(){return this._textureCoordinate}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(88,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector3",5),new F$Ay(36,"vector3",4),new F$Ay(48,"vector2",2),new F$Ay(56,"vector4",7),new F$Ay(72,"vector4",6)])}]),F$y}(),F$sy=(function(){function F$y(F$y,F$j,F$t,F$k){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=F$y,this._normal=F$j,this._textureCoord0=F$t,this._textureCoord1=F$k}F$$(F$y,"laya.d3.graphics.VertexPositionTerrain");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"normal",function(){return this._normal}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoord0",function(){return this._textureCoord0}),F$W(0,F$j,"textureCoord1",function(){return this._textureCoord1}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(40,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector3",3),new F$Ay(24,"vector2",2),new F$Ay(32,"vector2",15)])}])}(),function(){function F$y(F$y,F$j){this._position=null,this._textureCoordinate0=null,this._position=F$y,this._textureCoordinate0=F$j}F$$(F$y,"laya.d3.graphics.VertexPositionTexture0");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"position",function(){return this._position}),F$W(0,F$j,"textureCoordinate0",function(){return this._textureCoordinate0}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(20,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector2",2)])}]),F$y}()),F$Zy=(function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l,F$r,F$$){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$y,this._positionStartLifeTime=F$j,this._velocity=F$t,this._startColor=F$k,this._startSize=F$T,this._startRotation0=F$Y,this._startRotation1=F$A,this._startRotation2=F$X,this._startLifeTime=F$I,this._time=F$b,this._startSpeed=F$D,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$$}F$$(F$y,"laya.d3.graphics.VertexShurikenParticleBillboard");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$W(0,F$j,"random1",function(){return this._randoms1}),F$W(0,F$j,"startRotation2",function(){return this._startRotation2}),F$W(0,F$j,"positionStartLifeTime",function(){return this._positionStartLifeTime}),F$W(0,F$j,"velocity",function(){return this._velocity}),F$W(0,F$j,"random0",function(){return this._randoms0}),F$W(0,F$j,"startSize",function(){return this._startSize}),F$W(0,F$j,"startColor",function(){return this._startColor}),F$W(0,F$j,"startRotation0",function(){return this._startRotation0}),F$W(0,F$j,"startRotation1",function(){return this._startRotation1}),F$W(0,F$j,"startLifeTime",function(){return this._startLifeTime}),F$W(0,F$j,"time",function(){return this._time}),F$W(0,F$j,"startSpeed",function(){return this._startSpeed}),F$W(0,F$j,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(152,[new F$Ay(0,"vector4",17),new F$Ay(16,"vector4",30),new F$Ay(32,"vector4",32),new F$Ay(48,"vector4",19),new F$Ay(64,"vector3",20),new F$Ay(76,"vector3",22),new F$Ay(88,"single",31),new F$Ay(92,"vector4",34),new F$Ay(108,"vector4",35),new F$Ay(124,"vector3",36),new F$Ay(136,"vector4",37)])}])}(),function(){function F$y(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l,F$r,F$$){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=F$y,this._positionStartLifeTime=F$j,this._velocity=F$t,this._startColor=F$k,this._startSize=F$T,this._startRotation0=F$Y,this._startRotation1=F$A,this._startRotation2=F$X,this._startLifeTime=F$I,this._time=F$b,this._startSpeed=F$D,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=F$$}F$$(F$y,"laya.d3.graphics.VertexShurikenParticleMesh");var F$j=F$y.prototype;F$e.imps(F$j,{"laya.d3.graphics.IVertex":!0}),F$W(0,F$j,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),F$W(0,F$j,"velocity",function(){return this._velocity}),F$W(0,F$j,"position",function(){return this._positionStartLifeTime}),F$W(0,F$j,"random0",function(){return this._randoms0}),F$W(0,F$j,"startSize",function(){return this._startSize}),F$W(0,F$j,"startColor",function(){return this._startColor}),F$W(0,F$j,"startRotation0",function(){return this._startRotation0}),F$W(0,F$j,"startRotation1",function(){return this._startRotation1}),F$W(0,F$j,"random1",function(){return this._randoms1}),F$W(0,F$j,"startRotation2",function(){return this._startRotation2}),F$W(0,F$j,"startLifeTime",function(){return this._startLifeTime}),F$W(0,F$j,"time",function(){return this._time}),F$W(0,F$j,"startSpeed",function(){return this._startSpeed}),F$W(0,F$j,"simulationWorldPostion",function(){return this._simulationWorldPostion}),F$W(0,F$j,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$W(1,F$y,"vertexDeclaration",function(){return F$y._vertexDeclaration}),F$l(F$y,["_vertexDeclaration",function(){return this._vertexDeclaration=new F$Yy(172,[new F$Ay(0,"vector3",0),new F$Ay(12,"vector4",1),new F$Ay(28,"vector2",2),new F$Ay(36,"vector4",30),new F$Ay(52,"vector4",32),new F$Ay(68,"vector4",19),new F$Ay(84,"vector3",20),new F$Ay(96,"vector3",22),new F$Ay(108,"single",31),new F$Ay(112,"vector4",34),new F$Ay(128,"vector4",35),new F$Ay(144,"vector3",36),new F$Ay(156,"vector4",37)])}])}(),function(){function F$M(F$y,F$j,F$t,F$k,F$T,F$Y){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=F$t,this._materials=F$k,this._subMeshes=F$T,this._materialMap=F$Y,this._version=F$j,this._onLoaded(F$y)}F$$(F$M,"laya.d3.loaders.LoadModelV01");var F$y=F$M.prototype;return F$y._onLoaded=function(F$y){this._readData=F$y,this.READ_BLOCK();for(var F$j=0;F$j<this._BLOCK.count;F$j++){var F$t=this._readData.getUint16(),F$k=this._strings[F$t],F$T=this["READ_"+F$k];if(null==F$T)throw new Error("model file err,no this function:"+F$t+" "+F$k);if(!F$T.call(this))break}return this._mesh},F$y.onError=function(){},F$y._readString=function(){return this._strings[this._readData.getUint16()]},F$y.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},F$y.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},F$y.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var F$y=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var F$j=0;F$j<this._STRINGS.size;F$j++)this._strings[F$j]=this._readData.readUTFString();return this._readData.pos=F$y,!0},F$y.READ_MATERIAL=function(){var F$y=this._readData.getUint16(),F$j=(this._readString(),this._readString());return this._materials[F$y]="null"!==F$j?F$n.getRes(this._materialMap[F$j]):new F$Qj,!0},F$y.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var F$y,F$j=this._readData.__getBuffer(),F$t=0,F$k=this._readData.getUint32(),F$T=this._readData.getUint32(),F$Y=(new Float32Array(F$j.slice(F$k+this._DATA.offset,F$k+this._DATA.offset+F$T)),this._readData.getUint32()),F$A=this._readData.getUint32(),F$X=new Float32Array(F$j.slice(F$Y+this._DATA.offset,F$Y+this._DATA.offset+F$A));for(this.mesh._inverseBindPoses=[],F$t=0,F$y=F$X.length;F$t<F$y;F$t+=16){var F$I=new F$yj(F$X[F$t+0],F$X[F$t+1],F$X[F$t+2],F$X[F$t+3],F$X[F$t+4],F$X[F$t+5],F$X[F$t+6],F$X[F$t+7],F$X[F$t+8],F$X[F$t+9],F$X[F$t+10],F$X[F$t+11],F$X[F$t+12],F$X[F$t+13],F$X[F$t+14],F$X[F$t+15]);this.mesh._inverseBindPoses.push(F$I)}break;default:throw new Error("LoadModel:unknown version.")}return!0},F$y.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var F$y=this._readString();this._shaderAttributes=F$y.match(F$M._attrReg);var F$j=this._readData.getUint32(),F$t=this._readData.getUint32(),F$k=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),F$T=this._readData.getUint32(),F$Y=this._readData.getUint32(),F$A=this._readData.getUint32(),F$X=this._readData.__getBuffer(),F$I=new F$bj(this._mesh),F$b=this._getVertexDeclaration(),F$D=F$Gj.create(F$b,F$T/F$b.vertexStride,35044,!0),F$l=F$k+this._DATA.offset,F$r=F$X.slice(F$l,F$l+F$T);F$D.setData(new Float32Array(F$r));for(var F$$=(F$I._vertexBuffer=F$D).vertexDeclaration.getVertexElements(),F$W=0;F$W<F$$.length;F$W++)F$I._bufferUsage[F$$[F$W].elementUsage]=F$D;var F$z=F$Fj.create("ushort",F$t/2,35044,!0),F$V=F$j+this._DATA.offset,F$n=F$X.slice(F$V,F$V+F$t);F$z.setData(new Uint16Array(F$n)),F$I._indexBuffer=F$z;var F$C=F$X.slice(F$Y+this._DATA.offset,F$Y+this._DATA.offset+F$A);return F$I._boneIndicesList[0]=new Uint8Array(F$C),this._subMeshes.push(F$I),!0},F$y.READ_DATAAREA=function(){return!1},F$y._getVertexDeclaration=function(){for(var F$y,F$j=!1,F$t=!1,F$k=!1,F$T=!1,F$Y=!1,F$A=!1,F$X=!1,F$I=!1,F$b=!1,F$D=0;F$D<this._shaderAttributes.length;F$D+=8)switch(this._shaderAttributes[F$D]){case"POSITION":F$j=!0;break;case"NORMAL":F$t=!0;break;case"COLOR":F$k=!0;break;case"UV":F$T=!0;break;case"UV1":F$Y=!0;break;case"BLENDWEIGHT":F$X=!0;break;case"BLENDINDICES":F$I=!0;break;case"TANGENT":F$A=!0;break;case"BINORMAL":F$b=!0}return F$j&&F$t&&F$k&&F$T&&F$Y&&F$X&&F$I&&F$A?F$y=F$My.vertexDeclaration:F$j&&F$t&&F$k&&F$T&&F$Y&&F$X&&F$I?F$y=F$ny.vertexDeclaration:F$j&&F$t&&F$T&&F$Y&&F$X&&F$I&&F$A?F$y=F$Sy.vertexDeclaration:F$j&&F$t&&F$T&&F$Y&&F$X&&F$I?F$y=F$qy.vertexDeclaration:F$j&&F$t&&F$k&&F$T&&F$X&&F$I&&F$A?F$y=F$Py.vertexDeclaration:F$j&&F$t&&F$k&&F$T&&F$X&&F$I?F$y=F$vy.vertexDeclaration:F$j&&F$t&&F$A&&F$b&&F$T&&F$X&&F$I?F$y=F$Oy.vertexDeclaration:F$j&&F$t&&F$T&&F$X&&F$I&&F$A?F$y=F$Gy.vertexDeclaration:F$j&&F$t&&F$T&&F$X&&F$I?F$y=F$xy.vertexDeclaration:F$j&&F$t&&F$k&&F$X&&F$I&&F$A?F$y=F$ry.vertexDeclaration:F$j&&F$t&&F$k&&F$X&&F$I?F$y=F$Dy.vertexDeclaration:F$j&&F$t&&F$k&&F$T&&F$Y&&F$A?F$y=F$ey.vertexDeclaration:F$j&&F$t&&F$k&&F$T&&F$Y?F$y=F$Vy.vertexDeclaration:F$j&&F$t&&F$T&&F$Y&&F$A?F$y=F$Ky.vertexDeclaration:F$j&&F$t&&F$T&&F$Y?F$y=F$Uy.vertexDeclaration:F$j&&F$t&&F$k&&F$T&&F$A?F$y=F$py.vertexDeclaration:F$j&&F$t&&F$T&&F$A&&F$b?F$y=F$Jy.vertexDeclaration:F$j&&F$t&&F$k&&F$T?F$y=F$zy.vertexDeclaration:F$j&&F$t&&F$T&&F$A?F$y=F$ay.vertexDeclaration:F$j&&F$t&&F$T?F$y=F$my.vertexDeclaration:F$j&&F$t&&F$k&&F$A?F$y=F$Wy.vertexDeclaration:F$j&&F$t&&F$k&&(F$y=F$by.vertexDeclaration),F$y},F$W(0,F$y,"mesh",function(){return this._mesh}),F$M._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$M}()),F$Ry=function(){function F$N(){}return F$$(F$N,"laya.d3.loaders.LoadModelV02"),F$N.parse=function(F$y,F$j,F$t,F$k,F$T,F$Y){F$N._mesh=F$t,F$N._materials=F$k,F$N._subMeshes=F$T,F$N._materialMap=F$Y,F$N._version=F$j,F$N._readData=F$y,F$N.READ_DATA(),F$N.READ_BLOCK(),F$N.READ_STRINGS();for(var F$A=0,F$X=F$N._BLOCK.count;F$A<F$X;F$A++){F$N._readData.pos=F$N._BLOCK.blockStarts[F$A];var F$I=F$N._readData.getUint16(),F$b=F$N._strings[F$I],F$D=F$N["READ_"+F$b];if(null==F$D)throw new Error("model file err,no this function:"+F$I+" "+F$b);F$D.call()}F$N._strings.length=0,F$N._readData=null,F$N._version=null,F$N._mesh=null,F$N._materials=null,F$N._subMeshes=null,F$N._materialMap=null},F$N._readString=function(){return F$N._strings[F$N._readData.getUint16()]},F$N.READ_DATA=function(){F$N._DATA.offset=F$N._readData.getUint32(),F$N._DATA.size=F$N._readData.getUint32()},F$N.READ_BLOCK=function(){for(var F$y=F$N._BLOCK.count=F$N._readData.getUint16(),F$j=F$N._BLOCK.blockStarts=[],F$t=F$N._BLOCK.blockLengths=[],F$k=0;F$k<F$y;F$k++)F$j.push(F$N._readData.getUint32()),F$t.push(F$N._readData.getUint32())},F$N.READ_STRINGS=function(){var F$y=F$N._readData.getUint32(),F$j=F$N._readData.getUint16(),F$t=F$N._readData.pos;F$N._readData.pos=F$y+F$N._DATA.offset;for(var F$k=0;F$k<F$j;F$k++)F$N._strings[F$k]=F$N._readData.readUTFString();F$N._readData.pos=F$t},F$N.READ_MATERIAL=function(){F$N._readString(),F$N._readString();var F$y=F$N._readString();return""!==F$y&&F$N._materials.push(F$n.getRes(F$N._materialMap[F$y])),!0},F$N.READ_MESH=function(){F$N._readString();var F$y,F$j=F$N._readData.__getBuffer(),F$t=0,F$k=F$N._readData.getInt16(),F$T=F$N._DATA.offset;for(F$t=0;F$t<F$k;F$t++){var F$Y=F$T+F$N._readData.getUint32(),F$A=F$N._readData.getUint32(),F$X=new Float32Array(F$j.slice(F$Y,F$Y+F$A)),F$I=F$N._readString().match(F$N._attrReg),F$b=F$N._getVertexDeclaration(F$I),F$D=F$Gj.create(F$b,4*F$X.length/F$b.vertexStride,35044,!0);F$D.setData(F$X),F$N._mesh._vertexBuffers.push(F$D)}var F$l=F$T+F$N._readData.getUint32(),F$r=F$N._readData.getUint32(),F$$=new Uint16Array(F$j.slice(F$l,F$l+F$r)),F$W=F$Fj.create("ushort",F$r/2,35044,!0);F$W.setData(F$$),F$N._mesh._indexBuffer=F$W;var F$z=F$N._mesh._boneNames=[],F$V=F$N._readData.getUint16();for(F$z.length=F$V,F$t=0;F$t<F$V;F$t++)F$z[F$t]=F$N._strings[F$N._readData.getUint16()];var F$n=F$N._readData.getUint32(),F$C=F$N._readData.getUint32(),F$M=(new Float32Array(F$j.slice(F$T+F$n,F$T+F$n+F$C)),F$N._readData.getUint32()),F$_=F$N._readData.getUint32(),F$e=new Float32Array(F$j.slice(F$T+F$M,F$T+F$M+F$_));for(F$N._mesh._inverseBindPoses=[],F$t=0,F$y=F$e.length;F$t<F$y;F$t+=16){var F$v=new F$yj(F$e[F$t+0],F$e[F$t+1],F$e[F$t+2],F$e[F$t+3],F$e[F$t+4],F$e[F$t+5],F$e[F$t+6],F$e[F$t+7],F$e[F$t+8],F$e[F$t+9],F$e[F$t+10],F$e[F$t+11],F$e[F$t+12],F$e[F$t+13],F$e[F$t+14],F$e[F$t+15]);F$N._mesh._inverseBindPoses.push(F$v)}return F$N._mesh._skinnedDatas=new Float32Array(16*F$e.length),!0},F$N.READ_SUBMESH=function(){var F$y=F$N._readData.__getBuffer(),F$j=new F$bj(F$N._mesh),F$t=F$N._readData.getInt16(),F$k=F$N._readData.getUint32(),F$T=F$N._readData.getUint32();F$j._vertexBuffer=F$N._mesh._vertexBuffers[F$t],F$j._vertexStart=F$k,F$j._vertexCount=F$T;var F$Y=F$N._readData.getUint32(),F$A=F$N._readData.getUint32(),F$X=F$N._mesh._indexBuffer;F$j._indexBuffer=F$X,F$j._indexStart=F$Y,F$j._indexCount=F$A,F$j._indices=new Uint16Array(F$X.getData().buffer,2*F$Y,F$A);var F$I=F$N._DATA.offset,F$b=F$j._subIndexBufferStart,F$D=F$j._subIndexBufferCount,F$l=F$j._boneIndicesList,F$r=F$N._readData.getUint16();F$b.length=F$r,F$D.length=F$r,F$l.length=F$r;for(var F$$=0;F$$<F$r;F$$++){F$b[F$$]=F$N._readData.getUint32(),F$D[F$$]=F$N._readData.getUint32();var F$W=F$N._readData.getUint32(),F$z=F$N._readData.getUint32();F$j._boneIndicesList[F$$]=new Uint8Array(F$y.slice(F$I+F$W,F$I+F$W+F$z))}return F$N._subMeshes.push(F$j),!0},F$N._getVertexDeclaration=function(F$y){for(var F$j,F$t=!1,F$k=!1,F$T=!1,F$Y=!1,F$A=!1,F$X=!1,F$I=!1,F$b=!1,F$D=!1,F$l=0;F$l<F$y.length;F$l++)switch(F$y[F$l]){case"POSITION":F$t=!0;break;case"NORMAL":F$k=!0;break;case"COLOR":F$T=!0;break;case"UV":F$Y=!0;break;case"UV1":F$A=!0;break;case"BLENDWEIGHT":F$I=!0;break;case"BLENDINDICES":F$b=!0;break;case"TANGENT":F$X=!0;break;case"BINORMAL":F$D=!0}return F$t&&F$k&&F$T&&F$Y&&F$A&&F$I&&F$b&&F$X?F$j=F$My.vertexDeclaration:F$t&&F$k&&F$T&&F$Y&&F$A&&F$I&&F$b?F$j=F$ny.vertexDeclaration:F$t&&F$k&&F$Y&&F$A&&F$I&&F$b&&F$X?F$j=F$Sy.vertexDeclaration:F$t&&F$k&&F$Y&&F$A&&F$I&&F$b?F$j=F$qy.vertexDeclaration:F$t&&F$k&&F$T&&F$Y&&F$I&&F$b&&F$X?F$j=F$Py.vertexDeclaration:F$t&&F$k&&F$T&&F$Y&&F$I&&F$b?F$j=F$vy.vertexDeclaration:F$t&&F$k&&F$Y&&F$I&&F$b&&F$X?F$j=F$Gy.vertexDeclaration:F$t&&F$k&&F$Y&&F$I&&F$b?F$j=F$xy.vertexDeclaration:F$t&&F$k&&F$T&&F$I&&F$b&&F$X?F$j=F$ry.vertexDeclaration:F$t&&F$k&&F$T&&F$I&&F$b?F$j=F$Dy.vertexDeclaration:F$t&&F$k&&F$T&&F$Y&&F$A&&F$X?F$j=F$ey.vertexDeclaration:F$t&&F$k&&F$T&&F$Y&&F$A?F$j=F$Vy.vertexDeclaration:F$t&&F$k&&F$Y&&F$A&&F$X?F$j=F$Ky.vertexDeclaration:F$t&&F$k&&F$Y&&F$A?F$j=F$Uy.vertexDeclaration:F$t&&F$k&&F$T&&F$Y&&F$X?F$j=F$py.vertexDeclaration:F$t&&F$k&&F$Y&&F$X&&F$D?F$j=F$Jy.vertexDeclaration:F$t&&F$k&&F$T&&F$Y?F$j=F$zy.vertexDeclaration:F$t&&F$k&&F$Y&&F$X?F$j=F$ay.vertexDeclaration:F$t&&F$k&&F$Y?F$j=F$my.vertexDeclaration:F$t&&F$k&&F$T&&F$X?F$j=F$Wy.vertexDeclaration:F$t&&F$k&&F$T&&(F$j=F$by.vertexDeclaration),F$j},F$N._attrReg=new RegExp("(\\w+)|([:,;])","g"),F$N._strings=[],F$N._readData=null,F$N._version=null,F$N._mesh=null,F$N._materials=null,F$N._subMeshes=null,F$N._materialMap=null,F$l(F$N,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$N}(),F$By=function(){function F$v(){}return F$$(F$v,"laya.d3.loaders.LoadModelV03"),F$v.parse=function(F$y,F$j,F$t,F$k,F$T){F$v._mesh=F$t,F$v._subMeshes=F$k,F$v._materialMap=F$T,F$v._version=F$j,F$v._readData=F$y,F$v.READ_DATA(),F$v.READ_BLOCK(),F$v.READ_STRINGS();for(var F$Y=0,F$A=F$v._BLOCK.count;F$Y<F$A;F$Y++){F$v._readData.pos=F$v._BLOCK.blockStarts[F$Y];var F$X=F$v._readData.getUint16(),F$I=F$v._strings[F$X],F$b=F$v["READ_"+F$I];if(null==F$b)throw new Error("model file err,no this function:"+F$X+" "+F$I);F$b.call()}F$v._strings.length=0,F$v._readData=null,F$v._version=null,F$v._mesh=null,F$v._subMeshes=null,F$v._materialMap=null},F$v._readString=function(){return F$v._strings[F$v._readData.getUint16()]},F$v.READ_DATA=function(){F$v._DATA.offset=F$v._readData.getUint32(),F$v._DATA.size=F$v._readData.getUint32()},F$v.READ_BLOCK=function(){for(var F$y=F$v._BLOCK.count=F$v._readData.getUint16(),F$j=F$v._BLOCK.blockStarts=[],F$t=F$v._BLOCK.blockLengths=[],F$k=0;F$k<F$y;F$k++)F$j.push(F$v._readData.getUint32()),F$t.push(F$v._readData.getUint32())},F$v.READ_STRINGS=function(){var F$y=F$v._readData.getUint32(),F$j=F$v._readData.getUint16(),F$t=F$v._readData.pos;F$v._readData.pos=F$y+F$v._DATA.offset;for(var F$k=0;F$k<F$j;F$k++)F$v._strings[F$k]=F$v._readData.readUTFString();F$v._readData.pos=F$t},F$v.READ_MESH=function(){var F$y,F$j=F$v._readString(),F$t=F$v._readData.__getBuffer(),F$k=0,F$T=F$v._readData.getInt16(),F$Y=F$v._DATA.offset;for(F$k=0;F$k<F$T;F$k++){var F$A,F$X=F$Y+F$v._readData.getUint32(),F$I=F$v._readData.getUint32(),F$b=new Float32Array(F$t.slice(F$X,F$X+F$I)),F$D=F$v._readString();switch(F$v._version){case"LAYAMODEL:03":F$A=F$v._vertexDeclarationMap_Discard[F$D];break;case"LAYAMODEL:0301":F$A=F$v._vertexDeclarationMap[F$D];break;default:throw new Error("LoadModelV03: unknown version.")}if(!F$A)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+F$v._version+"  bufferAttribute="+F$D+"  name="+F$j+"  url="+(F$v._mesh?F$v._mesh.url:"null"));var F$l=F$Gj.create(F$A,4*F$b.length/F$A.vertexStride,35044,!0,F$v._mesh._url+"_"+F$k);F$l.setData(F$b),F$v._mesh._vertexBuffers.push(F$l)}var F$r=F$Y+F$v._readData.getUint32(),F$$=F$v._readData.getUint32(),F$W=new Uint16Array(F$t.slice(F$r,F$r+F$$)),F$z=F$Fj.create("ushort",F$$/2,35044,!0,F$v._mesh._url);F$z.setData(F$W),F$v._mesh._indexBuffer=F$z;var F$V=F$v._mesh._boneNames=[],F$n=F$v._readData.getUint16();for(F$V.length=F$n,F$k=0;F$k<F$n;F$k++)F$V[F$k]=F$v._strings[F$v._readData.getUint16()];F$v._readData.pos+=8;var F$C=F$v._readData.getUint32(),F$M=F$v._readData.getUint32(),F$_=new Float32Array(F$t.slice(F$Y+F$C,F$Y+F$C+F$M));for(F$v._mesh._inverseBindPoses=[],F$k=0,F$y=F$_.length;F$k<F$y;F$k+=16){var F$e=new F$yj(F$_[F$k+0],F$_[F$k+1],F$_[F$k+2],F$_[F$k+3],F$_[F$k+4],F$_[F$k+5],F$_[F$k+6],F$_[F$k+7],F$_[F$k+8],F$_[F$k+9],F$_[F$k+10],F$_[F$k+11],F$_[F$k+12],F$_[F$k+13],F$_[F$k+14],F$_[F$k+15]);F$v._mesh._inverseBindPoses.push(F$e)}return F$v._mesh._skinnedDatas=new Float32Array(16*F$_.length),!0},F$v.READ_SUBMESH=function(){var F$y=F$v._readData.__getBuffer(),F$j=new F$bj(F$v._mesh),F$t=F$v._readData.getInt16(),F$k=F$v._readData.getUint32(),F$T=F$v._readData.getUint32();F$j._vertexBuffer=F$v._mesh._vertexBuffers[F$t],F$j._vertexStart=F$k,F$j._vertexCount=F$T;var F$Y=F$v._readData.getUint32(),F$A=F$v._readData.getUint32(),F$X=F$v._mesh._indexBuffer;F$j._indexBuffer=F$X,F$j._indexStart=F$Y,F$j._indexCount=F$A,F$j._indices=new Uint16Array(F$X.getData().buffer,2*F$Y,F$A);var F$I=F$v._DATA.offset,F$b=F$j._subIndexBufferStart,F$D=F$j._subIndexBufferCount,F$l=F$j._boneIndicesList,F$r=F$v._readData.getUint16();F$b.length=F$r,F$D.length=F$r,F$l.length=F$r;for(var F$$=0;F$$<F$r;F$$++){F$b[F$$]=F$v._readData.getUint32(),F$D[F$$]=F$v._readData.getUint32();var F$W=F$v._readData.getUint32(),F$z=F$v._readData.getUint32();F$l[F$$]=new Uint8Array(F$y.slice(F$I+F$W,F$I+F$W+F$z))}return F$v._subMeshes.push(F$j),!0},F$v._strings=[],F$v._readData=null,F$v._version=null,F$v._mesh=null,F$v._subMeshes=null,F$v._materialMap=null,F$l(F$v,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$My.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$ny.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$hy.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Sy.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$qy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Py.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$vy.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Gy.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$xy.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$ry.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$Dy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$ey.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$Vy.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$Ky.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$Uy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$py.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$Jy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$zy.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$ay.vertexDeclaration,"POSITION,NORMAL,UV":F$my.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$Wy.vertexDeclaration,"POSITION,NORMAL,COLOR":F$by.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$Qy.vertexDeclaration,"POSITION,NORMAL":F$Iy.vertexDeclaration,"POSITION,UV":F$sy.vertexDeclaration,POSITION:F$Xy.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Cy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$ny.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":F$hy.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":F$wy.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":F$qy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Ny.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":F$vy.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":F$Fy.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":F$xy.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":F$ly.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":F$Dy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":F$_y.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":F$Vy.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":F$Hy.vertexDeclaration,"POSITION,NORMAL,UV,UV1":F$Uy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":F$dy.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":F$Jy.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":F$zy.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":F$gy.vertexDeclaration,"POSITION,NORMAL,UV":F$my.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":F$$y.vertexDeclaration,"POSITION,NORMAL,COLOR":F$by.vertexDeclaration,"POSITION,NORMAL,TANGENT":F$fy.vertexDeclaration,"POSITION,NORMAL":F$Iy.vertexDeclaration,"POSITION,UV":F$sy.vertexDeclaration,POSITION:F$Xy.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$v}(),F$cy=function(){function F$X(){}return F$$(F$X,"laya.d3.loaders.MeshReader"),F$X.read=function(F$y,F$j,F$t,F$k,F$T){var F$Y=new F$v(F$y);F$Y.pos=0;var F$A=F$Y.readUTFString();switch(F$A){case"LAYAMODEL:01":case"LAYASKINANI:01":F$X._readVersion01(F$Y,F$A,F$j,F$t,F$k,F$T);break;case"LAYAMODEL:02":F$Ry.parse(F$Y,F$A,F$j,F$t,F$k,F$T);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":F$By.parse(F$Y,F$A,F$j,F$k,F$T);break;default:throw new Error("MeshReader: unknown mesh version.")}F$j._setSubMeshes(F$k)},F$X._readVersion01=function(F$y,F$j,F$t,F$k,F$T,F$Y){new F$Zy(F$y,F$j,F$t,F$k,F$T,F$Y)},F$X}(),F$Ly=function(){function F$y(F$y,F$j){this.min=null,this.max=null,this.min=F$y,this.max=F$j}F$$(F$y,"laya.d3.math.BoundBox");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.getCorners=function(F$y){F$y.length=8;var F$j=this.min.elements,F$t=this.max.elements,F$k=F$j[0],F$T=F$j[1],F$Y=F$j[2],F$A=F$t[0],F$X=F$t[1],F$I=F$t[2];F$y[0]=new F$Aj(F$k,F$X,F$I),F$y[1]=new F$Aj(F$A,F$X,F$I),F$y[2]=new F$Aj(F$A,F$T,F$I),F$y[3]=new F$Aj(F$k,F$T,F$I),F$y[4]=new F$Aj(F$k,F$X,F$Y),F$y[5]=new F$Aj(F$A,F$X,F$Y),F$y[6]=new F$Aj(F$A,F$T,F$Y),F$y[7]=new F$Aj(F$k,F$T,F$Y)},F$j.toDefault=function(){this.min.toDefault(),this.max.toDefault()},F$j.cloneTo=function(F$y){var F$j=F$y;this.min.cloneTo(F$j.min),this.max.cloneTo(F$j.max)},F$j.clone=function(){var F$y=new this.constructor(new F$Aj,new F$Aj);return this.cloneTo(F$y),F$y},F$y.createfromPoints=function(F$y,F$j){if(null==F$y)throw new Error("points");var F$t=F$j.min,F$k=F$j.max,F$T=F$t.elements;F$T[0]=Number.MAX_VALUE,F$T[1]=Number.MAX_VALUE,F$T[2]=Number.MAX_VALUE;var F$Y=F$k.elements;F$Y[0]=-Number.MAX_VALUE,F$Y[1]=-Number.MAX_VALUE,F$Y[2]=-Number.MAX_VALUE;for(var F$A=0,F$X=F$y.length;F$A<F$X;++F$A)F$Aj.min(F$t,F$y[F$A],F$t),F$Aj.max(F$k,F$y[F$A],F$k)},F$y.merge=function(F$y,F$j,F$t){F$Aj.min(F$y.min,F$j.min,F$t.min),F$Aj.max(F$y.max,F$j.max,F$t.max)},F$y}(),F$oy=function(){function F$b(F$y){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=F$y,this._near=new F$jj(new F$Aj),this._far=new F$jj(new F$Aj),this._left=new F$jj(new F$Aj),this._right=new F$jj(new F$Aj),this._top=new F$jj(new F$Aj),this._bottom=new F$jj(new F$Aj),F$b._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}F$$(F$b,"laya.d3.math.BoundFrustum");var F$y=F$b.prototype;return F$y.equalsBoundFrustum=function(F$y){return this._matrix.equalsOtherMatrix(F$y.matrix)},F$y.equalsObj=function(F$y){if(F$y instanceof laya.d3.math.BoundFrustum){var F$j=F$y;return this.equalsBoundFrustum(F$j)}return!1},F$y.getPlane=function(F$y){switch(F$y){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},F$y.getCorners=function(F$y){F$b._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(F$y[0]),F$b._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(F$y[1]),F$b._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(F$y[2]),F$b._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(F$y[3]),F$b._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(F$y[4]),F$b._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(F$y[5]),F$b._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(F$y[6]),F$b._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(F$y[7])},F$y.containsPoint=function(F$y){for(var F$j=F$jj.PlaneIntersectionType_Front,F$t=F$jj.PlaneIntersectionType_Front,F$k=0;F$k<6;F$k++){switch(F$k){case 0:F$t=Collision.intersectsPlaneAndPoint(this._near,F$y);break;case 1:F$t=Collision.intersectsPlaneAndPoint(this._far,F$y);break;case 2:F$t=Collision.intersectsPlaneAndPoint(this._left,F$y);break;case 3:F$t=Collision.intersectsPlaneAndPoint(this._right,F$y);break;case 4:F$t=Collision.intersectsPlaneAndPoint(this._top,F$y);break;case 5:F$t=Collision.intersectsPlaneAndPoint(this._bottom,F$y)}switch(F$t){case F$jj.PlaneIntersectionType_Back:return 0;case F$jj.PlaneIntersectionType_Intersecting:F$j=F$jj.PlaneIntersectionType_Intersecting}}switch(F$j){case F$jj.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$y.containsBoundBox=function(F$y){for(var F$j,F$t=F$b._tempV30,F$k=F$b._tempV31,F$T=1,F$Y=0;F$Y<6;F$Y++){if(F$j=this.getPlane(F$Y),this._getBoxToPlanePVertexNVertex(F$y,F$j.normal,F$t,F$k),Collision.intersectsPlaneAndPoint(F$j,F$t)===F$jj.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(F$j,F$k)===F$jj.PlaneIntersectionType_Back&&(F$T=2)}return F$T},F$y.containsBoundSphere=function(F$y){for(var F$j=F$jj.PlaneIntersectionType_Front,F$t=F$jj.PlaneIntersectionType_Front,F$k=0;F$k<6;F$k++){switch(F$k){case 0:F$t=Collision.intersectsPlaneAndSphere(this._near,F$y);break;case 1:F$t=Collision.intersectsPlaneAndSphere(this._far,F$y);break;case 2:F$t=Collision.intersectsPlaneAndSphere(this._left,F$y);break;case 3:F$t=Collision.intersectsPlaneAndSphere(this._right,F$y);break;case 4:F$t=Collision.intersectsPlaneAndSphere(this._top,F$y);break;case 5:F$t=Collision.intersectsPlaneAndSphere(this._bottom,F$y)}switch(F$t){case F$jj.PlaneIntersectionType_Back:return 0;case F$jj.PlaneIntersectionType_Intersecting:F$j=F$jj.PlaneIntersectionType_Intersecting}}switch(F$j){case F$jj.PlaneIntersectionType_Intersecting:return 2;default:return 1}},F$y._getBoxToPlanePVertexNVertex=function(F$y,F$j,F$t,F$k){var F$T=F$y.min,F$Y=F$T.elements,F$A=F$y.max,F$X=F$A.elements,F$I=F$j.elements,F$b=F$I[0],F$D=F$I[1],F$l=F$I[2];F$T.cloneTo(F$t);var F$r=F$t.elements;0<=F$b&&(F$r[0]=F$X[0]),0<=F$D&&(F$r[1]=F$X[1]),0<=F$l&&(F$r[2]=F$X[2]),F$A.cloneTo(F$k);var F$$=F$k.elements;0<=F$b&&(F$$[0]=F$Y[0]),0<=F$D&&(F$$[1]=F$Y[1]),0<=F$l&&(F$$[2]=F$Y[2])},F$W(0,F$y,"top",function(){return this._top}),F$W(0,F$y,"matrix",function(){return this._matrix},function(F$y){this._matrix=F$y,F$b._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),F$W(0,F$y,"near",function(){return this._near}),F$W(0,F$y,"far",function(){return this._far}),F$W(0,F$y,"left",function(){return this._left}),F$W(0,F$y,"right",function(){return this._right}),F$W(0,F$y,"bottom",function(){return this._bottom}),F$b._getPlanesFromMatrix=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){var F$X=F$y.elements,F$I=F$X[0],F$b=F$X[1],F$D=F$X[2],F$l=F$X[3],F$r=F$X[4],F$$=F$X[5],F$W=F$X[6],F$z=F$X[7],F$V=F$X[8],F$n=F$X[9],F$C=F$X[10],F$M=F$X[11],F$_=F$X[12],F$e=F$X[13],F$v=F$X[14],F$N=F$X[15],F$P=F$j.normal.elements;F$P[0]=F$l+F$D,F$P[1]=F$z+F$W,F$P[2]=F$M+F$C,F$j.distance=F$N+F$v,F$j.normalize();var F$d=F$t.normal.elements;F$d[0]=F$l-F$D,F$d[1]=F$z-F$W,F$d[2]=F$M-F$C,F$t.distance=F$N-F$v,F$t.normalize();var F$p=F$k.normal.elements;F$p[0]=F$l+F$I,F$p[1]=F$z+F$r,F$p[2]=F$M+F$V,F$k.distance=F$N+F$_,F$k.normalize();var F$f=F$T.normal.elements;F$f[0]=F$l-F$I,F$f[1]=F$z-F$r,F$f[2]=F$M-F$V,F$T.distance=F$N-F$_,F$T.normalize();var F$Q=F$Y.normal.elements;F$Q[0]=F$l-F$b,F$Q[1]=F$z-F$$,F$Q[2]=F$M-F$n,F$Y.distance=F$N-F$e,F$Y.normalize();var F$m=F$A.normal.elements;F$m[0]=F$l+F$b,F$m[1]=F$z+F$$,F$m[2]=F$M+F$n,F$A.distance=F$N+F$e,F$A.normalize()},F$b._get3PlaneInterPoint=function(F$y,F$j,F$t){var F$k=F$y.normal,F$T=F$j.normal,F$Y=F$t.normal;F$Aj.cross(F$T,F$Y,F$b._tempV30),F$Aj.cross(F$Y,F$k,F$b._tempV31),F$Aj.cross(F$k,F$T,F$b._tempV32);var F$A=F$Aj.dot(F$k,F$b._tempV30),F$X=F$Aj.dot(F$T,F$b._tempV31),F$I=F$Aj.dot(F$Y,F$b._tempV32);return F$Aj.scale(F$b._tempV30,-F$y.distance/F$A,F$b._tempV33),F$Aj.scale(F$b._tempV31,-F$j.distance/F$X,F$b._tempV34),F$Aj.scale(F$b._tempV32,-F$t.distance/F$I,F$b._tempV35),F$Aj.add(F$b._tempV33,F$b._tempV34,F$b._tempV36),F$Aj.add(F$b._tempV35,F$b._tempV36,F$b._tempV37),F$b._tempV37},F$l(F$b,["_tempV30",function(){return this._tempV30=new F$Aj},"_tempV31",function(){return this._tempV31=new F$Aj},"_tempV32",function(){return this._tempV32=new F$Aj},"_tempV33",function(){return this._tempV33=new F$Aj},"_tempV34",function(){return this._tempV34=new F$Aj},"_tempV35",function(){return this._tempV35=new F$Aj},"_tempV36",function(){return this._tempV36=new F$Aj},"_tempV37",function(){return this._tempV37=new F$Aj}]),F$b}(),F$iy=function(){function F$D(F$y,F$j){this.center=null,this.radius=NaN,this.center=F$y,this.radius=F$j}F$$(F$D,"laya.d3.math.BoundSphere");var F$y=F$D.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.toDefault=function(){this.center.toDefault(),this.radius=0},F$y.intersectsRayDistance=function(F$y){return Collision.intersectsRayAndSphereRD(F$y,this)},F$y.intersectsRayPoint=function(F$y,F$j){return Collision.intersectsRayAndSphereRP(F$y,this,F$j)},F$y.cloneTo=function(F$y){var F$j=F$y;this.center.cloneTo(F$j.center),F$j.radius=this.radius},F$y.clone=function(){var F$y=new this.constructor(new F$Aj,new F$Aj);return this.cloneTo(F$y),F$y},F$D.createFromSubPoints=function(F$y,F$j,F$t,F$k){if(null==F$y)throw new Error("points");if(F$j<0||F$j>=F$y.length)throw new Error("start"+F$j+"Must be in the range [0, "+(F$y.length-1)+"]");if(F$t<0||F$j+F$t>F$y.length)throw new Error("count"+F$t+"Must be in the range <= "+F$y.length+"}");var F$T=F$j+F$t,F$Y=F$D._tempVector3;F$Y.elements[0]=0,F$Y.elements[1]=0,F$Y.elements[2]=0;for(var F$A=F$j;F$A<F$T;++F$A)F$Aj.add(F$y[F$A],F$Y,F$Y);var F$X=F$k.center;F$Aj.scale(F$Y,1/F$t,F$X);var F$I=0;for(F$A=F$j;F$A<F$T;++F$A){var F$b=F$Aj.distanceSquared(F$X,F$y[F$A]);F$I<F$b&&(F$I=F$b)}F$k.radius=Math.sqrt(F$I)},F$D.createfromPoints=function(F$y,F$j){if(null==F$y)throw new Error("points");F$D.createFromSubPoints(F$y,0,F$y.length,F$j)},F$l(F$D,["_tempVector3",function(){return this._tempVector3=new F$Aj}]),F$D}(),F$Ey=(function(){function F$y(){}F$$(F$y,"laya.d3.math.ContainmentType"),F$y.Disjoint=0,F$y.Contains=1,F$y.Intersects=2}(),function(){function F$t(){}return F$$(F$t,"laya.d3.math.MathUtils3D"),F$t.isZero=function(F$y){return Math.abs(F$y)<F$t.zeroTolerance},F$t.nearEqual=function(F$y,F$j){return!!F$t.isZero(F$y-F$j)},F$t.fastInvSqrt=function(F$y){return F$t.isZero(F$y)?F$y:1/Math.sqrt(F$y)},F$l(F$t,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),F$t}()),F$uy=function(){function F$I(){var F$y=this.elements=new Float32Array(9);F$y[0]=1,F$y[1]=0,F$y[2]=0,F$y[3]=0,F$y[4]=1,F$y[5]=0,F$y[6]=0,F$y[7]=0,F$y[8]=1}F$$(F$I,"laya.d3.math.Matrix3x3");var F$y=F$I.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.determinant=function(){var F$y=this.elements,F$j=F$y[0],F$t=F$y[1],F$k=F$y[2],F$T=F$y[3],F$Y=F$y[4],F$A=F$y[5],F$X=F$y[6],F$I=F$y[7],F$b=F$y[8];return F$j*(F$b*F$Y-F$A*F$I)+F$t*(-F$b*F$T+F$A*F$X)+F$k*(F$I*F$T-F$Y*F$X)},F$y.translate=function(F$y,F$j){var F$t=F$j.elements,F$k=this.elements,F$T=F$y.elements,F$Y=F$k[0],F$A=F$k[1],F$X=F$k[2],F$I=F$k[3],F$b=F$k[4],F$D=F$k[5],F$l=F$k[6],F$r=F$k[7],F$$=F$k[8],F$W=F$T[0],F$z=F$T[1];F$t[0]=F$Y,F$t[1]=F$A,F$t[2]=F$X,F$t[3]=F$I,F$t[4]=F$b,F$t[5]=F$D,F$t[6]=F$W*F$Y+F$z*F$I+F$l,F$t[7]=F$W*F$A+F$z*F$b+F$r,F$t[8]=F$W*F$X+F$z*F$D+F$$},F$y.rotate=function(F$y,F$j){var F$t=F$j.elements,F$k=this.elements,F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$k[3],F$I=F$k[4],F$b=F$k[5],F$D=F$k[6],F$l=F$k[7],F$r=F$k[8],F$$=Math.sin(F$y),F$W=Math.cos(F$y);F$t[0]=F$W*F$T+F$$*F$X,F$t[1]=F$W*F$Y+F$$*F$I,F$t[2]=F$W*F$A+F$$*F$b,F$t[3]=F$W*F$X-F$$*F$T,F$t[4]=F$W*F$I-F$$*F$Y,F$t[5]=F$W*F$b-F$$*F$A,F$t[6]=F$D,F$t[7]=F$l,F$t[8]=F$r},F$y.scale=function(F$y,F$j){var F$t=F$j.elements,F$k=this.elements,F$T=F$y.elements,F$Y=F$T[0],F$A=F$T[1];F$t[0]=F$Y*F$k[0],F$t[1]=F$Y*F$k[1],F$t[2]=F$Y*F$k[2],F$t[3]=F$A*F$k[3],F$t[4]=F$A*F$k[4],F$t[5]=F$A*F$k[5],F$t[6]=F$k[6],F$t[7]=F$k[7],F$t[8]=F$k[8]},F$y.invert=function(F$y){var F$j=F$y.elements,F$t=this.elements,F$k=F$t[0],F$T=F$t[1],F$Y=F$t[2],F$A=F$t[3],F$X=F$t[4],F$I=F$t[5],F$b=F$t[6],F$D=F$t[7],F$l=F$t[8],F$r=F$l*F$X-F$I*F$D,F$$=-F$l*F$A+F$I*F$b,F$W=F$D*F$A-F$X*F$b,F$z=F$k*F$r+F$T*F$$+F$Y*F$W;F$z||(F$y=null),F$z=1/F$z,F$j[0]=F$r*F$z,F$j[1]=(-F$l*F$T+F$Y*F$D)*F$z,F$j[2]=(F$I*F$T-F$Y*F$X)*F$z,F$j[3]=F$$*F$z,F$j[4]=(F$l*F$k-F$Y*F$b)*F$z,F$j[5]=(-F$I*F$k+F$Y*F$A)*F$z,F$j[6]=F$W*F$z,F$j[7]=(-F$D*F$k+F$T*F$b)*F$z,F$j[8]=(F$X*F$k-F$T*F$A)*F$z},F$y.transpose=function(F$y){var F$j=F$y.elements,F$t=this.elements;if(F$y===this){var F$k=F$t[1],F$T=F$t[2],F$Y=F$t[5];F$j[1]=F$t[3],F$j[2]=F$t[6],F$j[3]=F$k,F$j[5]=F$t[7],F$j[6]=F$T,F$j[7]=F$Y}else F$j[0]=F$t[0],F$j[1]=F$t[3],F$j[2]=F$t[6],F$j[3]=F$t[1],F$j[4]=F$t[4],F$j[5]=F$t[7],F$j[6]=F$t[2],F$j[7]=F$t[5],F$j[8]=F$t[8]},F$y.identity=function(){var F$y=this.elements;F$y[0]=1,F$y[1]=0,F$y[2]=0,F$y[3]=0,F$y[4]=1,F$y[5]=0,F$y[6]=0,F$y[7]=0,F$y[8]=1},F$y.cloneTo=function(F$y){var F$j,F$t,F$k;if((F$t=this.elements)!==(F$k=F$y.elements))for(F$j=0;F$j<9;++F$j)F$k[F$j]=F$t[F$j]},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$I.createFromTranslation=function(F$y,F$j){F$j.elements;var F$t=F$y.elements;F$j[0]=1,F$j[1]=0,F$j[2]=0,F$j[3]=0,F$j[4]=1,F$j[5]=0,F$j[6]=F$t[0],F$j[7]=F$t[1],F$j[8]=1},F$I.createFromRotation=function(F$y,F$j){var F$t=F$j.elements,F$k=Math.sin(F$y),F$T=Math.cos(F$y);F$t[0]=F$T,F$t[1]=F$k,F$t[2]=0,F$t[3]=-F$k,F$t[4]=F$T,F$t[5]=0,F$t[6]=0,F$t[7]=0,F$t[8]=1},F$I.createFromScaling=function(F$y,F$j){var F$t=F$j.elements,F$k=F$y.elements;F$t[0]=F$k[0],F$t[1]=0,F$t[2]=0,F$t[3]=0,F$t[4]=F$k[1],F$t[5]=0,F$t[6]=0,F$t[7]=0,F$t[8]=1},F$I.createFromMatrix4x4=function(F$y,F$j){F$j[0]=F$y[0],F$j[1]=F$y[1],F$j[2]=F$y[2],F$j[3]=F$y[4],F$j[4]=F$y[5],F$j[5]=F$y[6],F$j[6]=F$y[8],F$j[7]=F$y[9],F$j[8]=F$y[10]},F$I.multiply=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements,F$A=F$T[0],F$X=F$T[1],F$I=F$T[2],F$b=F$T[3],F$D=F$T[4],F$l=F$T[5],F$r=F$T[6],F$$=F$T[7],F$W=F$T[8],F$z=F$Y[0],F$V=F$Y[1],F$n=F$Y[2],F$C=F$Y[3],F$M=F$Y[4],F$_=F$Y[5],F$e=F$Y[6],F$v=F$Y[7],F$N=F$Y[8];F$k[0]=F$z*F$A+F$V*F$b+F$n*F$r,F$k[1]=F$z*F$X+F$V*F$D+F$n*F$$,F$k[2]=F$z*F$I+F$V*F$l+F$n*F$W,F$k[3]=F$C*F$A+F$M*F$b+F$_*F$r,F$k[4]=F$C*F$X+F$M*F$D+F$_*F$$,F$k[5]=F$C*F$I+F$M*F$l+F$_*F$W,F$k[6]=F$e*F$A+F$v*F$b+F$N*F$r,F$k[7]=F$e*F$X+F$v*F$D+F$N*F$$,F$k[8]=F$e*F$I+F$v*F$l+F$N*F$W},F$I.lookAt=function(F$y,F$j,F$t,F$k){F$Aj.subtract(F$y,F$j,F$I._tempV30),F$Aj.normalize(F$I._tempV30,F$I._tempV30),F$Aj.cross(F$t,F$I._tempV30,F$I._tempV31),F$Aj.normalize(F$I._tempV31,F$I._tempV31),F$Aj.cross(F$I._tempV30,F$I._tempV31,F$I._tempV32);var F$T=F$I._tempV30.elements,F$Y=F$I._tempV31.elements,F$A=F$I._tempV32.elements,F$X=F$k.elements;F$X[0]=F$Y[0],F$X[3]=F$Y[1],F$X[6]=F$Y[2],F$X[1]=F$A[0],F$X[4]=F$A[1],F$X[7]=F$A[2],F$X[2]=F$T[0],F$X[5]=F$T[1],F$X[8]=F$T[2]},F$I.DEFAULT=new F$I,F$l(F$I,["_tempV30",function(){return this._tempV30=new F$Aj},"_tempV31",function(){return this._tempV31=new F$Aj},"_tempV32",function(){return this._tempV32=new F$Aj}]),F$I}(),F$yj=function(){function F$d(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l,F$r,F$$,F$W,F$z){void 0===F$y&&(F$y=1),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=1),void 0===F$A&&(F$A=0),void 0===F$X&&(F$X=0),void 0===F$I&&(F$I=0),void 0===F$b&&(F$b=0),void 0===F$D&&(F$D=1),void 0===F$l&&(F$l=0),void 0===F$r&&(F$r=0),void 0===F$$&&(F$$=0),void 0===F$W&&(F$W=0),void 0===F$z&&(F$z=1);var F$V=this.elements=new Float32Array(16);F$V[0]=F$y,F$V[1]=F$j,F$V[2]=F$t,F$V[3]=F$k,F$V[4]=F$T,F$V[5]=F$Y,F$V[6]=F$A,F$V[7]=F$X,F$V[8]=F$I,F$V[9]=F$b,F$V[10]=F$D,F$V[11]=F$l,F$V[12]=F$r,F$V[13]=F$$,F$V[14]=F$W,F$V[15]=F$z}F$$(F$d,"laya.d3.math.Matrix4x4");var F$y=F$d.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.getElementByRowColumn=function(F$y,F$j){if(F$y<0||3<F$y)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$j<0||3<F$j)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*F$y+F$j]},F$y.setElementByRowColumn=function(F$y,F$j,F$t){if(F$y<0||3<F$y)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(F$j<0||3<F$j)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*F$y+F$j]=F$t},F$y.equalsOtherMatrix=function(F$y){var F$j=this.elements,F$t=F$y.elements;return F$Ey.nearEqual(F$j[0],F$t[0])&&F$Ey.nearEqual(F$j[1],F$t[1])&&F$Ey.nearEqual(F$j[2],F$t[2])&&F$Ey.nearEqual(F$j[3],F$t[3])&&F$Ey.nearEqual(F$j[4],F$t[4])&&F$Ey.nearEqual(F$j[5],F$t[5])&&F$Ey.nearEqual(F$j[6],F$t[6])&&F$Ey.nearEqual(F$j[7],F$t[7])&&F$Ey.nearEqual(F$j[8],F$t[8])&&F$Ey.nearEqual(F$j[9],F$t[9])&&F$Ey.nearEqual(F$j[10],F$t[10])&&F$Ey.nearEqual(F$j[11],F$t[11])&&F$Ey.nearEqual(F$j[12],F$t[12])&&F$Ey.nearEqual(F$j[13],F$t[13])&&F$Ey.nearEqual(F$j[14],F$t[14])&&F$Ey.nearEqual(F$j[15],F$t[15])},F$y.decomposeTransRotScale=function(F$y,F$j,F$t){var F$k=F$d._tempMatrix4x4;return this.decomposeTransRotMatScale(F$y,F$k,F$t)?(F$tj.createFromMatrix4x4(F$k,F$j),!0):(F$j.identity(),!1)},F$y.decomposeTransRotMatScale=function(F$y,F$j,F$t){var F$k=this.elements,F$T=F$y.elements,F$Y=F$j.elements,F$A=F$t.elements;F$T[0]=F$k[12],F$T[1]=F$k[13],F$T[2]=F$k[14];var F$X=F$k[0],F$I=F$k[1],F$b=F$k[2],F$D=F$k[4],F$l=F$k[5],F$r=F$k[6],F$$=F$k[8],F$W=F$k[9],F$z=F$k[10],F$V=F$A[0]=Math.sqrt(F$X*F$X+F$I*F$I+F$b*F$b),F$n=F$A[1]=Math.sqrt(F$D*F$D+F$l*F$l+F$r*F$r),F$C=F$A[2]=Math.sqrt(F$$*F$$+F$W*F$W+F$z*F$z);if(F$Ey.isZero(F$V)||F$Ey.isZero(F$n)||F$Ey.isZero(F$C))return F$Y[1]=F$Y[2]=F$Y[3]=F$Y[4]=F$Y[6]=F$Y[7]=F$Y[8]=F$Y[9]=F$Y[11]=F$Y[12]=F$Y[13]=F$Y[14]=0,F$Y[0]=F$Y[5]=F$Y[10]=F$Y[15]=1,!1;var F$M=F$d._tempVector0,F$_=F$M.elements;F$_[0]=F$$/F$C,F$_[1]=F$W/F$C,F$_[2]=F$z/F$C;var F$e=F$d._tempVector1,F$v=F$e.elements;F$v[0]=F$X/F$V,F$v[1]=F$I/F$V,F$v[2]=F$b/F$V;var F$N=F$d._tempVector2;F$Aj.cross(F$M,F$e,F$N);var F$P=F$d._tempVector1;return F$Aj.cross(F$N,F$M,F$P),F$Y[3]=F$Y[7]=F$Y[11]=F$Y[12]=F$Y[13]=F$Y[14]=0,F$Y[15]=1,F$Y[0]=F$P.x,F$Y[1]=F$P.y,F$Y[2]=F$P.z,F$Y[4]=F$N.x,F$Y[5]=F$N.y,F$Y[6]=F$N.z,F$Y[8]=F$M.x,F$Y[9]=F$M.y,F$Y[10]=F$M.z,F$Y[0]*F$X+F$Y[1]*F$I+F$Y[2]*F$b<0&&(F$A[0]=-F$V),F$Y[4]*F$D+F$Y[5]*F$l+F$Y[6]*F$r<0&&(F$A[1]=-F$n),F$Y[8]*F$$+F$Y[9]*F$W+F$Y[10]*F$z<0&&(F$A[2]=-F$C),!0},F$y.decomposeYawPitchRoll=function(F$y){var F$j=F$y.elements,F$t=Math.asin(-this.elements[9]);F$j[1]=F$t,Math.cos(F$t)>F$Ey.zeroTolerance?(F$j[2]=Math.atan2(this.elements[1],this.elements[5]),F$j[0]=Math.atan2(this.elements[8],this.elements[10])):(F$j[2]=Math.atan2(-this.elements[4],this.elements[0]),F$j[0]=0)},F$y.normalize=function(){var F$y=this.elements,F$j=F$y[0],F$t=F$y[1],F$k=F$y[2],F$T=Math.sqrt(F$j*F$j+F$t*F$t+F$k*F$k);if(!F$T)return F$y[0]=0,F$y[1]=0,void(F$y[2]=0);1!=F$T&&(F$T=1/F$T,F$y[0]=F$j*F$T,F$y[1]=F$t*F$T,F$y[2]=F$k*F$T)},F$y.transpose=function(){var F$y,F$j;return F$j=(F$y=this.elements)[1],F$y[1]=F$y[4],F$y[4]=F$j,F$j=F$y[2],F$y[2]=F$y[8],F$y[8]=F$j,F$j=F$y[3],F$y[3]=F$y[12],F$y[12]=F$j,F$j=F$y[6],F$y[6]=F$y[9],F$y[9]=F$j,F$j=F$y[7],F$y[7]=F$y[13],F$y[13]=F$j,F$j=F$y[11],F$y[11]=F$y[14],F$y[14]=F$j,this},F$y.invert=function(F$y){var F$j=this.elements,F$t=F$y.elements,F$k=F$j[0],F$T=F$j[1],F$Y=F$j[2],F$A=F$j[3],F$X=F$j[4],F$I=F$j[5],F$b=F$j[6],F$D=F$j[7],F$l=F$j[8],F$r=F$j[9],F$$=F$j[10],F$W=F$j[11],F$z=F$j[12],F$V=F$j[13],F$n=F$j[14],F$C=F$j[15],F$M=F$k*F$I-F$T*F$X,F$_=F$k*F$b-F$Y*F$X,F$e=F$k*F$D-F$A*F$X,F$v=F$T*F$b-F$Y*F$I,F$N=F$T*F$D-F$A*F$I,F$P=F$Y*F$D-F$A*F$b,F$d=F$l*F$V-F$r*F$z,F$p=F$l*F$n-F$$*F$z,F$f=F$l*F$C-F$W*F$z,F$Q=F$r*F$n-F$$*F$V,F$m=F$r*F$C-F$W*F$V,F$U=F$$*F$C-F$W*F$n,F$q=F$M*F$U-F$_*F$m+F$e*F$Q+F$v*F$f-F$N*F$p+F$P*F$d;0!==Math.abs(F$q)&&(F$q=1/F$q,F$t[0]=(F$I*F$U-F$b*F$m+F$D*F$Q)*F$q,F$t[1]=(F$Y*F$m-F$T*F$U-F$A*F$Q)*F$q,F$t[2]=(F$V*F$P-F$n*F$N+F$C*F$v)*F$q,F$t[3]=(F$$*F$N-F$r*F$P-F$W*F$v)*F$q,F$t[4]=(F$b*F$f-F$X*F$U-F$D*F$p)*F$q,F$t[5]=(F$k*F$U-F$Y*F$f+F$A*F$p)*F$q,F$t[6]=(F$n*F$e-F$z*F$P-F$C*F$_)*F$q,F$t[7]=(F$l*F$P-F$$*F$e+F$W*F$_)*F$q,F$t[8]=(F$X*F$m-F$I*F$f+F$D*F$d)*F$q,F$t[9]=(F$T*F$f-F$k*F$m-F$A*F$d)*F$q,F$t[10]=(F$z*F$N-F$V*F$e+F$C*F$M)*F$q,F$t[11]=(F$r*F$e-F$l*F$N-F$W*F$M)*F$q,F$t[12]=(F$I*F$p-F$X*F$Q-F$b*F$d)*F$q,F$t[13]=(F$k*F$Q-F$T*F$p+F$Y*F$d)*F$q,F$t[14]=(F$V*F$_-F$z*F$v-F$n*F$M)*F$q,F$t[15]=(F$l*F$v-F$r*F$_+F$$*F$M)*F$q)},F$y.identity=function(){var F$y=this.elements;F$y[1]=F$y[2]=F$y[3]=F$y[4]=F$y[6]=F$y[7]=F$y[8]=F$y[9]=F$y[11]=F$y[12]=F$y[13]=F$y[14]=0,F$y[0]=F$y[5]=F$y[10]=F$y[15]=1},F$y.cloneTo=function(F$y){var F$j,F$t,F$k;if((F$t=this.elements)!==(F$k=F$y.elements))for(F$j=0;F$j<16;++F$j)F$k[F$j]=F$t[F$j]},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$y.getTranslationVector=function(F$y){var F$j=this.elements,F$t=F$y.elements;F$t[0]=F$j[12],F$t[1]=F$j[13],F$t[2]=F$j[14]},F$y.setTranslationVector=function(F$y){var F$j=this.elements,F$t=F$y.elements;F$j[12]=F$t[0],F$j[13]=F$t[1],F$j[14]=F$t[2]},F$y.getForward=function(F$y){var F$j=this.elements,F$t=F$y.elements;F$t[0]=-F$j[8],F$t[1]=-F$j[9],F$t[2]=-F$j[10]},F$y.setForward=function(F$y){var F$j=this.elements,F$t=F$y.elements;F$j[8]=-F$t[0],F$j[9]=-F$t[1],F$j[10]=-F$t[2]},F$d.createRotationX=function(F$y,F$j){var F$t=F$j.elements,F$k=Math.sin(F$y),F$T=Math.cos(F$y);F$t[1]=F$t[2]=F$t[3]=F$t[4]=F$t[7]=F$t[8]=F$t[11]=F$t[12]=F$t[13]=F$t[14]=0,F$t[0]=F$t[15]=1,F$t[5]=F$t[10]=F$T,F$t[6]=F$k,F$t[9]=-F$k},F$d.createRotationY=function(F$y,F$j){var F$t=F$j.elements,F$k=Math.sin(F$y),F$T=Math.cos(F$y);F$t[1]=F$t[3]=F$t[4]=F$t[6]=F$t[7]=F$t[9]=F$t[11]=F$t[12]=F$t[13]=F$t[14]=0,F$t[5]=F$t[15]=1,F$t[0]=F$t[10]=F$T,F$t[2]=-F$k,F$t[8]=F$k},F$d.createRotationZ=function(F$y,F$j){var F$t=F$j.elements,F$k=Math.sin(F$y),F$T=Math.cos(F$y);F$t[2]=F$t[3]=F$t[6]=F$t[7]=F$t[8]=F$t[9]=F$t[11]=F$t[12]=F$t[13]=F$t[14]=0,F$t[10]=F$t[15]=1,F$t[0]=F$t[5]=F$T,F$t[1]=F$k,F$t[4]=-F$k},F$d.createRotationYawPitchRoll=function(F$y,F$j,F$t,F$k){F$tj.createFromYawPitchRoll(F$y,F$j,F$t,F$d._tempQuaternion),F$d.createRotationQuaternion(F$d._tempQuaternion,F$k)},F$d.createRotationAxis=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=Math.cos(F$j),F$I=Math.sin(F$j),F$b=F$T*F$T,F$D=F$Y*F$Y,F$l=F$A*F$A,F$r=F$T*F$Y,F$$=F$T*F$A,F$W=F$Y*F$A,F$z=F$t.elements;F$z[3]=F$z[7]=F$z[11]=F$z[12]=F$z[13]=F$z[14]=0,F$z[15]=1,F$z[0]=F$b+F$X*(1-F$b),F$z[1]=F$r-F$X*F$r+F$I*F$A,F$z[2]=F$$-F$X*F$$-F$I*F$Y,F$z[4]=F$r-F$X*F$r-F$I*F$A,F$z[5]=F$D+F$X*(1-F$D),F$z[6]=F$W-F$X*F$W+F$I*F$T,F$z[8]=F$$-F$X*F$$+F$I*F$Y,F$z[9]=F$W-F$X*F$W-F$I*F$T,F$z[10]=F$l+F$X*(1-F$l)},F$d.createRotationQuaternion=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$t[0],F$Y=F$t[1],F$A=F$t[2],F$X=F$t[3],F$I=F$T*F$T,F$b=F$Y*F$Y,F$D=F$A*F$A,F$l=F$T*F$Y,F$r=F$A*F$X,F$$=F$A*F$T,F$W=F$Y*F$X,F$z=F$Y*F$A,F$V=F$T*F$X;F$k[3]=F$k[7]=F$k[11]=F$k[12]=F$k[13]=F$k[14]=0,F$k[15]=1,F$k[0]=1-2*(F$b+F$D),F$k[1]=2*(F$l+F$r),F$k[2]=2*(F$$-F$W),F$k[4]=2*(F$l-F$r),F$k[5]=1-2*(F$D+F$I),F$k[6]=2*(F$z+F$V),F$k[8]=2*(F$$+F$W),F$k[9]=2*(F$z-F$V),F$k[10]=1-2*(F$b+F$I)},F$d.createTranslate=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;F$k[4]=F$k[8]=F$k[1]=F$k[9]=F$k[2]=F$k[6]=F$k[3]=F$k[7]=F$k[11]=0,F$k[0]=F$k[5]=F$k[10]=F$k[15]=1,F$k[12]=F$t[0],F$k[13]=F$t[1],F$k[14]=F$t[2]},F$d.createScaling=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;F$k[0]=F$t[0],F$k[5]=F$t[1],F$k[10]=F$t[2],F$k[1]=F$k[4]=F$k[8]=F$k[12]=F$k[9]=F$k[13]=F$k[2]=F$k[6]=F$k[14]=F$k[3]=F$k[7]=F$k[11]=0,F$k[15]=1},F$d.multiply=function(F$y,F$j,F$t){var F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D;for(F$T=F$t.elements,F$Y=F$y.elements,F$T===(F$A=F$j.elements)&&(F$A=F$A.slice()),F$k=0;F$k<4;F$k++)F$X=F$Y[F$k],F$I=F$Y[F$k+4],F$b=F$Y[F$k+8],F$D=F$Y[F$k+12],F$T[F$k]=F$X*F$A[0]+F$I*F$A[1]+F$b*F$A[2]+F$D*F$A[3],F$T[F$k+4]=F$X*F$A[4]+F$I*F$A[5]+F$b*F$A[6]+F$D*F$A[7],F$T[F$k+8]=F$X*F$A[8]+F$I*F$A[9]+F$b*F$A[10]+F$D*F$A[11],F$T[F$k+12]=F$X*F$A[12]+F$I*F$A[13]+F$b*F$A[14]+F$D*F$A[15]},F$d.createFromQuaternion=function(F$y,F$j){var F$t=F$j.elements,F$k=F$y.elements,F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$k[3],F$I=F$T+F$T,F$b=F$Y+F$Y,F$D=F$A+F$A,F$l=F$T*F$I,F$r=F$Y*F$I,F$$=F$Y*F$b,F$W=F$A*F$I,F$z=F$A*F$b,F$V=F$A*F$D,F$n=F$X*F$I,F$C=F$X*F$b,F$M=F$X*F$D;F$t[0]=1-F$$-F$V,F$t[1]=F$r+F$M,F$t[2]=F$W-F$C,F$t[3]=0,F$t[4]=F$r-F$M,F$t[5]=1-F$l-F$V,F$t[6]=F$z+F$n,F$t[7]=0,F$t[8]=F$W+F$C,F$t[9]=F$z-F$n,F$t[10]=1-F$l-F$$,F$t[11]=0,F$t[12]=0,F$t[13]=0,F$t[14]=0,F$t[15]=1},F$d.createAffineTransformation=function(F$y,F$j,F$t,F$k){var F$T=F$y.elements,F$Y=F$j.elements,F$A=F$t.elements,F$X=F$k.elements,F$I=F$Y[0],F$b=F$Y[1],F$D=F$Y[2],F$l=F$Y[3],F$r=F$I+F$I,F$$=F$b+F$b,F$W=F$D+F$D,F$z=F$I*F$r,F$V=F$I*F$$,F$n=F$I*F$W,F$C=F$b*F$$,F$M=F$b*F$W,F$_=F$D*F$W,F$e=F$l*F$r,F$v=F$l*F$$,F$N=F$l*F$W,F$P=F$A[0],F$d=F$A[1],F$p=F$A[2];F$X[0]=(1-(F$C+F$_))*F$P,F$X[1]=(F$V+F$N)*F$P,F$X[2]=(F$n-F$v)*F$P,F$X[3]=0,F$X[4]=(F$V-F$N)*F$d,F$X[5]=(1-(F$z+F$_))*F$d,F$X[6]=(F$M+F$e)*F$d,F$X[7]=0,F$X[8]=(F$n+F$v)*F$p,F$X[9]=(F$M-F$e)*F$p,F$X[10]=(1-(F$z+F$C))*F$p,F$X[11]=0,F$X[12]=F$T[0],F$X[13]=F$T[1],F$X[14]=F$T[2],F$X[15]=1},F$d.createLookAt=function(F$y,F$j,F$t,F$k){var F$T=F$k.elements,F$Y=F$d._tempVector0,F$A=F$d._tempVector1,F$X=F$d._tempVector2;F$Aj.subtract(F$y,F$j,F$X),F$Aj.normalize(F$X,F$X),F$Aj.cross(F$t,F$X,F$Y),F$Aj.normalize(F$Y,F$Y),F$Aj.cross(F$X,F$Y,F$A),F$k.identity(),F$T[0]=F$Y.x,F$T[4]=F$Y.y,F$T[8]=F$Y.z,F$T[1]=F$A.x,F$T[5]=F$A.y,F$T[9]=F$A.z,F$T[2]=F$X.x,F$T[6]=F$X.y,F$T[10]=F$X.z,F$T[12]=-F$Aj.dot(F$Y,F$y),F$T[13]=-F$Aj.dot(F$A,F$y),F$T[14]=-F$Aj.dot(F$X,F$y)},F$d.createPerspective=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$T.elements,F$A=1/Math.tan(F$y/2),F$X=1/(F$t-F$k);F$Y[0]=F$A/F$j,F$Y[5]=F$A,F$Y[10]=(F$k+F$t)*F$X,F$Y[11]=-1,F$Y[14]=2*F$k*F$t*F$X,F$Y[1]=F$Y[2]=F$Y[3]=F$Y[4]=F$Y[6]=F$Y[7]=F$Y[8]=F$Y[9]=F$Y[12]=F$Y[13]=F$Y[15]=0},F$d.createOrthoOffCenterRH=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){var F$X=F$A.elements,F$I=1/(F$y-F$j),F$b=1/(F$t-F$k),F$D=1/(F$T-F$Y);F$X[1]=F$X[2]=F$X[3]=F$X[4]=F$X[6]=F$X[7]=F$X[8]=F$X[9]=F$X[11]=0,F$X[15]=1,F$X[0]=-2*F$I,F$X[5]=-2*F$b,F$X[10]=2*F$D,F$X[12]=(F$y+F$j)*F$I,F$X[13]=(F$k+F$t)*F$b,F$X[14]=(F$Y+F$T)*F$D},F$d.translation=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;F$k[0]=F$k[5]=F$k[10]=F$k[15]=1,F$k[12]=F$t[0],F$k[13]=F$t[1],F$k[14]=F$t[2]},F$l(F$d,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$d},"_tempVector0",function(){return this._tempVector0=new F$Aj},"_tempVector1",function(){return this._tempVector1=new F$Aj},"_tempVector2",function(){return this._tempVector2=new F$Aj},"_tempQuaternion",function(){return this._tempQuaternion=new F$tj},"DEFAULT",function(){return this.DEFAULT=new F$d},"ZERO",function(){return this.ZERO=new F$d(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),F$d}(),F$jj=(function(){function F$M(F$y,F$j){this.extents=null,this.transformation=null,this.extents=F$y,this.transformation=F$j}F$$(F$M,"laya.d3.math.OrientedBoundBox");var F$y=F$M.prototype;F$y.getCorners=function(F$y){var F$j=F$M._tempV30.elements,F$t=F$M._tempV31.elements,F$k=F$M._tempV32.elements,F$T=this.extents.elements;F$j[0]=F$T[0],F$j[1]=F$j[2]=0,F$t[1]=F$T[1],F$t[0]=F$t[2]=0,F$k[2]=F$T[2],F$k[0]=F$k[1]=0,F$Aj.TransformNormal(F$M._tempV30,this.transformation,F$M._tempV30),F$Aj.TransformNormal(F$M._tempV31,this.transformation,F$M._tempV31),F$Aj.TransformNormal(F$M._tempV32,this.transformation,F$M._tempV32);var F$Y=F$M._tempV33;this.transformation.getTranslationVector(F$Y),F$y.length=8,F$Aj.add(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV32,F$y[0]),F$Aj.add(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV32,F$y[1]),F$Aj.subtract(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV32,F$y[2]),F$Aj.subtract(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV32,F$y[3]),F$Aj.add(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV32,F$y[4]),F$Aj.add(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV32,F$y[5]),F$Aj.subtract(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV32,F$y[6]),F$Aj.subtract(F$Y,F$M._tempV30,F$M._tempV34),F$Aj.subtract(F$M._tempV34,F$M._tempV31,F$M._tempV34),F$Aj.add(F$M._tempV34,F$M._tempV32,F$y[7])},F$y.transform=function(F$y){F$yj.multiply(this.transformation,F$y,this.transformation)},F$y.scale=function(F$y){F$Aj.multiply(this.extents,F$y,this.extents)},F$y.translate=function(F$y){this.transformation.getTranslationVector(F$M._tempV30),F$Aj.add(F$M._tempV30,F$y,F$M._tempV31),this.transformation.setTranslationVector(F$M._tempV31)},F$y.Size=function(F$y){F$Aj.scale(this.extents,2,F$y)},F$y.getSize=function(F$y){var F$j=this.extents.elements;F$M._tempV30.x=F$j[0],F$M._tempV31.y=F$j[1],F$M._tempV32.z=F$j[2],F$Aj.TransformNormal(F$M._tempV30,this.transformation,F$M._tempV30),F$Aj.TransformNormal(F$M._tempV31,this.transformation,F$M._tempV31),F$Aj.TransformNormal(F$M._tempV31,this.transformation,F$M._tempV32);var F$t=F$y.elements;F$t[0]=F$Aj.scalarLength(F$M._tempV30),F$t[1]=F$Aj.scalarLength(F$M._tempV31),F$t[2]=F$Aj.scalarLength(F$M._tempV32)},F$y.getSizeSquared=function(F$y){var F$j=this.extents.elements;F$M._tempV30.x=F$j[0],F$M._tempV31.y=F$j[1],F$M._tempV32.z=F$j[2],F$Aj.TransformNormal(F$M._tempV30,this.transformation,F$M._tempV30),F$Aj.TransformNormal(F$M._tempV31,this.transformation,F$M._tempV31),F$Aj.TransformNormal(F$M._tempV31,this.transformation,F$M._tempV32);var F$t=F$y.elements;F$t[0]=F$Aj.scalarLengthSquared(F$M._tempV30),F$t[1]=F$Aj.scalarLengthSquared(F$M._tempV31),F$t[2]=F$Aj.scalarLengthSquared(F$M._tempV32)},F$y.getCenter=function(F$y){this.transformation.getTranslationVector(F$y)},F$y.containsPoint=function(F$y){var F$j=this.extents.elements,F$t=F$j[0],F$k=F$j[1],F$T=F$j[2];this.transformation.invert(F$M._tempM0),F$Aj.transformCoordinate(F$y,F$M._tempM0,F$M._tempV30);var F$Y=F$M._tempV30.elements,F$A=Math.abs(F$Y[0]),F$X=Math.abs(F$Y[1]),F$I=Math.abs(F$Y[2]);return F$Ey.nearEqual(F$A,F$t)&&F$Ey.nearEqual(F$X,F$k)&&F$Ey.nearEqual(F$I,F$T)?2:F$A<F$t&&F$X<F$k&&F$I<F$T?1:0},F$y.containsPoints=function(F$y){var F$j=this.extents.elements,F$t=F$j[0],F$k=F$j[1],F$T=F$j[2];this.transformation.invert(F$M._tempM0);for(var F$Y=!0,F$A=!1,F$X=0;F$X<F$y.length;F$X++){F$Aj.transformCoordinate(F$y[F$X],F$M._tempM0,F$M._tempV30);var F$I=F$M._tempV30.elements,F$b=Math.abs(F$I[0]),F$D=Math.abs(F$I[1]),F$l=Math.abs(F$I[2]);F$Ey.nearEqual(F$b,F$t)&&F$Ey.nearEqual(F$D,F$k)&&F$Ey.nearEqual(F$l,F$T)&&(F$A=!0),F$b<F$t&&F$D<F$k&&F$l<F$T?F$A=!0:F$Y=!1}return F$Y?1:F$A?2:0},F$y.containsSphere=function(F$y,F$j){void 0===F$j&&(F$j=!1);var F$t=this.extents.elements,F$k=F$t[0],F$T=F$t[1],F$Y=F$t[2],F$A=F$y.radius;this.transformation.invert(F$M._tempM0),F$Aj.transformCoordinate(F$y.center,F$M._tempM0,F$M._tempV30);var F$X=NaN;if(F$X=F$j?F$A:(F$Aj.scale(F$Aj.UnitX,F$A,F$M._tempV31),F$Aj.TransformNormal(F$M._tempV31,F$M._tempM0,F$M._tempV31),F$Aj.scalarLength(F$M._tempV31)),F$Aj.scale(this.extents,-1,F$M._tempV32),F$Aj.Clamp(F$M._tempV30,F$M._tempV32,this.extents,F$M._tempV33),F$X*F$X<F$Aj.distanceSquared(F$M._tempV30,F$M._tempV33))return 0;var F$I=F$M._tempV30.elements,F$b=F$I[0],F$D=F$I[1],F$l=F$I[2],F$r=F$M._tempV32.elements,F$$=F$r[0],F$W=F$r[1],F$z=F$r[2];return F$$+F$X<=F$b&&F$b<=F$k-F$X&&F$X<F$k-F$$&&F$W+F$X<=F$D&&F$D<=F$T-F$X&&F$X<F$T-F$W&&F$z+F$X<=F$l&&F$l<=F$Y-F$X&&F$X<F$Y-F$z?1:2},F$y.containsOrientedBoundBox=function(F$y){var F$j=0,F$t=0;F$y.getCorners(F$M._corners);var F$k=this.containsPoints(F$M._corners);if(0!=F$k)return F$k;var F$T=this.extents.elements;F$y.extents.cloneTo(F$M._tempV35);var F$Y=F$M._tempV35.elements;F$M._getRows(this.transformation,F$M._rows1),F$M._getRows(F$y.transformation,F$M._rows2);var F$A=NaN;for(F$j=0;F$j<4;F$j++)for(F$t=0;F$t<4;F$t++)3==F$j||3==F$t?(F$M._tempM0.setElementByRowColumn(F$j,F$t,0),F$M._tempM1.setElementByRowColumn(F$j,F$t,0)):(F$A=F$Aj.dot(F$M._rows1[F$j],F$M._rows2[F$t]),F$M._tempM0.setElementByRowColumn(F$j,F$t,F$A),F$M._tempM1.setElementByRowColumn(F$j,F$t,Math.abs(F$A)));F$y.getCenter(F$M._tempV34),this.getCenter(F$M._tempV36),F$Aj.subtract(F$M._tempV34,F$M._tempV36,F$M._tempV30);var F$X=F$M._tempV31.elements;F$X[0]=F$Aj.dot(F$M._tempV30,F$M._rows1[0]),F$X[1]=F$Aj.dot(F$M._tempV30,F$M._rows1[1]),F$X[2]=F$Aj.dot(F$M._tempV30,F$M._rows1[2]);var F$I=F$M._tempV32.elements,F$b=F$M._tempV33.elements;for(F$j=0;F$j<3;F$j++)if(F$I[0]=F$M._tempM1.getElementByRowColumn(F$j,0),F$I[1]=F$M._tempM1.getElementByRowColumn(F$j,1),F$I[2]=F$M._tempM1.getElementByRowColumn(F$j,2),F$T[F$j]+F$Aj.dot(F$M._tempV35,F$M._tempV32)<Math.abs(F$X[F$j]))return 0;for(F$t=0;F$t<3;F$t++)if(F$I[0]=F$M._tempM1.getElementByRowColumn(0,F$t),F$I[1]=F$M._tempM1.getElementByRowColumn(1,F$t),F$I[2]=F$M._tempM1.getElementByRowColumn(2,F$t),F$b[0]=F$M._tempM0.getElementByRowColumn(0,F$t),F$b[1]=F$M._tempM0.getElementByRowColumn(1,F$t),F$b[2]=F$M._tempM0.getElementByRowColumn(2,F$t),F$Aj.dot(this.extents,F$M._tempV32)+F$Y[F$t]<Math.abs(F$Aj.dot(F$M._tempV31,F$M._tempV33)))return 0;for(F$j=0;F$j<3;F$j++)for(F$t=0;F$t<3;F$t++){var F$D=(F$j+1)%3,F$l=(F$j+2)%3,F$r=(F$t+1)%3,F$$=(F$t+2)%3;if(F$T[F$D]*F$M._tempM1.getElementByRowColumn(F$l,F$t)+F$T[F$l]*F$M._tempM1.getElementByRowColumn(F$D,F$t)+(F$Y[F$r]*F$M._tempM1.getElementByRowColumn(F$j,F$$)+F$Y[F$$]*F$M._tempM1.getElementByRowColumn(F$j,F$r))<Math.abs(F$X[F$l]*F$M._tempM0.getElementByRowColumn(F$D,F$t)-F$X[F$D]*F$M._tempM0.getElementByRowColumn(F$l,F$t)))return 0}return 2},F$y.containsLine=function(F$y,F$j){F$M._corners[0]=F$y,F$M._corners[1]=F$j;var F$t=this.containsPoints(F$M._corners);if(0!=F$t)return F$t;var F$k=this.extents.elements,F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2];this.transformation.invert(F$M._tempM0),F$Aj.transformCoordinate(F$y,F$M._tempM0,F$M._tempV30),F$Aj.transformCoordinate(F$j,F$M._tempM0,F$M._tempV31),F$Aj.add(F$M._tempV30,F$M._tempV31,F$M._tempV32),F$Aj.scale(F$M._tempV32,.5,F$M._tempV32),F$Aj.subtract(F$M._tempV30,F$M._tempV32,F$M._tempV33);var F$X=F$M._tempV33.elements,F$I=F$X[0],F$b=F$X[1],F$D=F$X[2],F$l=F$M._tempV34.elements,F$r=F$l[0]=Math.abs(F$X[0]),F$$=F$l[1]=Math.abs(F$X[1]),F$W=F$l[2]=Math.abs(F$X[2]),F$z=F$M._tempV32.elements,F$V=F$z[0],F$n=F$z[1],F$C=F$z[2];return Math.abs(F$V)>F$T+F$r?0:Math.abs(F$n)>F$Y+F$$?0:Math.abs(F$C)>F$A+F$W?0:Math.abs(F$n*F$D-F$C*F$b)>F$Y*F$W+F$A*F$$?0:Math.abs(F$V*F$D-F$C*F$I)>F$T*F$W+F$A*F$r?0:Math.abs(F$V*F$b-F$n*F$I)>F$T*F$$+F$Y*F$r?0:2},F$y.containsBoundBox=function(F$y){var F$j=0,F$t=0,F$k=F$y.min,F$T=F$y.max;F$y.getCorners(F$M._corners);var F$Y=this.containsPoints(F$M._corners);if(0!=F$Y)return F$Y;F$Aj.subtract(F$T,F$k,F$M._tempV30),F$Aj.scale(F$M._tempV30,.5,F$M._tempV30),F$Aj.add(F$k,F$M._tempV30,F$M._tempV30),F$Aj.subtract(F$T,F$M._tempV30,F$M._tempV31);var F$A=this.extents.elements,F$X=F$M._tempV31.elements;F$M._getRows(this.transformation,F$M._rows1),this.transformation.invert(F$M._tempM0);for(F$j=0;F$j<3;F$j++)for(F$t=0;F$t<3;F$t++)F$M._tempM1.setElementByRowColumn(F$j,F$t,Math.abs(F$M._tempM0.getElementByRowColumn(F$j,F$t)));this.getCenter(F$M._tempV35),F$Aj.subtract(F$M._tempV30,F$M._tempV35,F$M._tempV32);var F$I=F$M._tempV31.elements;F$I[0]=F$Aj.dot(F$M._tempV32,F$M._rows1[0]),F$I[1]=F$Aj.dot(F$M._tempV32,F$M._rows1[1]),F$I[2]=F$Aj.dot(F$M._tempV32,F$M._rows1[2]);var F$b=F$M._tempV33.elements,F$D=F$M._tempV34.elements;for(F$j=0;F$j<3;F$j++)if(F$b[0]=F$M._tempM1.getElementByRowColumn(F$j,0),F$b[1]=F$M._tempM1.getElementByRowColumn(F$j,1),F$b[2]=F$M._tempM1.getElementByRowColumn(F$j,2),F$A[F$j]+F$Aj.dot(F$M._tempV31,F$M._tempV33)<Math.abs(F$I[F$j]))return 0;for(F$t=0;F$t<3;F$t++)if(F$b[0]=F$M._tempM1.getElementByRowColumn(0,F$t),F$b[1]=F$M._tempM1.getElementByRowColumn(1,F$t),F$b[2]=F$M._tempM1.getElementByRowColumn(2,F$t),F$D[0]=F$M._tempM0.getElementByRowColumn(0,F$t),F$D[1]=F$M._tempM0.getElementByRowColumn(1,F$t),F$D[2]=F$M._tempM0.getElementByRowColumn(2,F$t),F$Aj.dot(this.extents,F$M._tempV33)+F$X[F$t]<Math.abs(F$Aj.dot(F$M._tempV31,F$M._tempV34)))return 0;for(F$j=0;F$j<3;F$j++)for(F$t=0;F$t<3;F$t++){var F$l=(F$j+1)%3,F$r=(F$j+2)%3,F$$=(F$t+1)%3,F$W=(F$t+2)%3;if(F$A[F$l]*F$M._tempM1.getElementByRowColumn(F$r,F$t)+F$A[F$r]*F$M._tempM1.getElementByRowColumn(F$l,F$t)+(F$X[F$$]*F$M._tempM1.getElementByRowColumn(F$j,F$W)+F$X[F$W]*F$M._tempM1.getElementByRowColumn(F$j,F$$))<Math.abs(F$I[F$r]*F$M._tempM0.getElementByRowColumn(F$l,F$t)-F$I[F$l]*F$M._tempM0.getElementByRowColumn(F$r,F$t)))return 0}return 2},F$y.intersectsRay=function(F$y,F$j){F$Aj.scale(this.extents,-1,F$M._tempV30),this.transformation.invert(F$M._tempM0),F$Aj.TransformNormal(F$y.direction,F$M._tempM0,F$M._ray.direction),F$Aj.transformCoordinate(F$y.origin,F$M._tempM0,F$M._ray.origin),F$M._boxBound1.min=F$M._tempV30,F$M._boxBound1.max=this.extents;var F$t=Collision.intersectsRayAndBoxRP(F$M._ray,F$M._boxBound1,F$j);return-1!==F$t&&F$Aj.transformCoordinate(F$j,this.transformation,F$j),F$t},F$y._getLocalCorners=function(F$y){F$y.length=8;var F$j=this.extents.elements;F$M._tempV30.x=F$j[0],F$M._tempV31.y=F$j[1],F$M._tempV32.z=F$j[2],F$Aj.add(F$M._tempV30,F$M._tempV31,F$M._tempV33),F$Aj.add(F$M._tempV33,F$M._tempV32,F$y[0]),F$Aj.add(F$M._tempV30,F$M._tempV31,F$M._tempV33),F$Aj.subtract(F$M._tempV33,F$M._tempV32,F$y[1]),F$Aj.subtract(F$M._tempV31,F$M._tempV30,F$M._tempV33),F$Aj.subtract(F$M._tempV33,F$M._tempV30,F$y[2]),F$Aj.subtract(F$M._tempV31,F$M._tempV30,F$M._tempV33),F$Aj.add(F$M._tempV33,F$M._tempV32,F$y[3]),F$Aj.subtract(F$M._tempV30,F$M._tempV31,F$M._tempV33),F$Aj.add(F$M._tempV33,F$M._tempV32,F$y[4]),F$Aj.subtract(F$M._tempV30,F$M._tempV31,F$M._tempV33),F$Aj.subtract(F$M._tempV33,F$M._tempV32,F$y[5]),F$Aj.scale(F$y[0],-1,F$y[6]),F$Aj.subtract(F$M._tempV32,F$M._tempV30,F$M._tempV33),F$Aj.subtract(F$M._tempV33,F$M._tempV31,F$y[7])},F$y.equals=function(F$y){return this.extents==F$y.extents&&this.transformation==F$y.transformation},F$y.cloneTo=function(F$y){var F$j=F$y;this.extents.cloneTo(F$j.extents),this.transformation.cloneTo(F$j.transformation)},F$M.createByBoundBox=function(F$y,F$j){var F$t=F$y.min,F$k=F$y.max;F$Aj.subtract(F$k,F$t,F$M._tempV30),F$Aj.scale(F$M._tempV30,.5,F$M._tempV30),F$Aj.add(F$t,F$M._tempV30,F$M._tempV31),F$Aj.subtract(F$k,F$M._tempV31,F$M._tempV32),F$yj.translation(F$M._tempV31,F$M._tempM0);var F$T=F$M._tempV32.clone(),F$Y=F$M._tempM0.clone();F$j.extents=F$T,F$j.transformation=F$Y},F$M.createByMinAndMaxVertex=function(F$y,F$j){return F$Aj.subtract(F$j,F$y,F$M._tempV30),F$Aj.scale(F$M._tempV30,.5,F$M._tempV30),F$Aj.add(F$y,F$M._tempV30,F$M._tempV31),F$Aj.subtract(F$j,F$M._tempV31,F$M._tempV32),F$yj.translation(F$M._tempV31,F$M._tempM0),new F$M(F$M._tempV32,F$M._tempM0)},F$M._getRows=function(F$y,F$j){F$j.length=3;var F$t=F$y.elements,F$k=F$j[0].elements;F$k[0]=F$t[0],F$k[1]=F$t[1],F$k[2]=F$t[2];var F$T=F$j[1].elements;F$T[0]=F$t[4],F$T[1]=F$t[5],F$T[2]=F$t[6];var F$Y=F$j[2].elements;F$Y[0]=F$t[8],F$Y[1]=F$t[9],F$Y[2]=F$t[10]},F$M.getObbtoObbMatrix4x4=function(F$y,F$j,F$t,F$k){var F$T=F$y.transformation,F$Y=F$j.transformation;if(F$t){F$M._getRows(F$T,F$M._rows1),F$M._getRows(F$Y,F$M._rows2);for(var F$A=0;F$A<3;F$A++)for(var F$X=0;F$X<3;F$X++)F$k.setElementByRowColumn(F$A,F$X,F$Aj.dot(F$M._rows2[F$A],F$M._rows1[F$X]));F$j.getCenter(F$M._tempV30),F$y.getCenter(F$M._tempV31),F$Aj.subtract(F$M._tempV30,F$M._tempV31,F$M._tempV32);var F$I=F$k.elements;F$I[12]=F$Aj.dot(F$M._tempV32,F$M._rows1[0]),F$I[13]=F$Aj.dot(F$M._tempV32,F$M._rows1[1]),F$I[14]=F$Aj.dot(F$M._tempV32,F$M._rows1[2]),F$I[15]=1}else F$T.invert(F$M._tempM0),F$yj.multiply(F$Y,F$M._tempM0,F$k)},F$M.merge=function(F$y,F$j,F$t){var F$k=F$y.extents,F$T=F$y.transformation;F$M.getObbtoObbMatrix4x4(F$y,F$j,F$t,F$M._tempM0),F$j._getLocalCorners(F$M._corners),F$Aj.transformCoordinate(F$M._corners[0],F$M._tempM0,F$M._corners[0]),F$Aj.transformCoordinate(F$M._corners[1],F$M._tempM0,F$M._corners[1]),F$Aj.transformCoordinate(F$M._corners[2],F$M._tempM0,F$M._corners[2]),F$Aj.transformCoordinate(F$M._corners[3],F$M._tempM0,F$M._corners[3]),F$Aj.transformCoordinate(F$M._corners[4],F$M._tempM0,F$M._corners[4]),F$Aj.transformCoordinate(F$M._corners[5],F$M._tempM0,F$M._corners[5]),F$Aj.transformCoordinate(F$M._corners[6],F$M._tempM0,F$M._corners[6]),F$Aj.transformCoordinate(F$M._corners[7],F$M._tempM0,F$M._corners[7]),F$Aj.scale(F$k,-1,F$M._boxBound1.min),F$k.cloneTo(F$M._boxBound1.max),F$Ly.createfromPoints(F$M._corners,F$M._boxBound2),F$Ly.merge(F$M._boxBound2,F$M._boxBound1,F$M._boxBound3);var F$Y=F$M._boxBound3.min,F$A=F$M._boxBound3.max;F$Aj.subtract(F$A,F$Y,F$M._tempV30),F$Aj.scale(F$M._tempV30,.5,F$M._tempV30),F$Aj.add(F$Y,F$M._tempV30,F$M._tempV32),F$Aj.subtract(F$A,F$M._tempV32,F$k),F$Aj.transformCoordinate(F$M._tempV32,F$T,F$M._tempV33)},F$l(F$M,["_tempV30",function(){return this._tempV30=new F$Aj},"_tempV31",function(){return this._tempV31=new F$Aj},"_tempV32",function(){return this._tempV32=new F$Aj},"_tempV33",function(){return this._tempV33=new F$Aj},"_tempV34",function(){return this._tempV34=new F$Aj},"_tempV35",function(){return this._tempV35=new F$Aj},"_tempV36",function(){return this._tempV36=new F$Aj},"_tempM0",function(){return this._tempM0=new F$yj},"_tempM1",function(){return this._tempM1=new F$yj},"_corners",function(){return this._corners=[new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj]},"_rows1",function(){return this._rows1=[new F$Aj,new F$Aj,new F$Aj]},"_rows2",function(){return this._rows2=[new F$Aj,new F$Aj,new F$Aj]},"_ray",function(){return this._ray=new F$Tj(new F$Aj,new F$Aj)},"_boxBound1",function(){return this._boxBound1=new F$Ly(new F$Aj,new F$Aj)},"_boxBound2",function(){return this._boxBound2=new F$Ly(new F$Aj,new F$Aj)},"_boxBound3",function(){return this._boxBound3=new F$Ly(new F$Aj,new F$Aj)}])}(),function(){function F$e(F$y,F$j){this.normal=null,this.distance=NaN,void 0===F$j&&(F$j=0),this.normal=F$y,this.distance=F$j}return F$$(F$e,"laya.d3.math.Plane"),F$e.prototype.normalize=function(){var F$y=this.normal.elements,F$j=F$y[0],F$t=F$y[1],F$k=F$y[2],F$T=1/Math.sqrt(F$j*F$j+F$t*F$t+F$k*F$k);F$y[0]=F$j*F$T,F$y[1]=F$t*F$T,F$y[2]=F$k*F$T,this.distance*=F$T},F$e.createPlaneBy3P=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$j.elements,F$Y=F$t.elements,F$A=F$T[0]-F$k[0],F$X=F$T[1]-F$k[1],F$I=F$T[2]-F$k[2],F$b=F$Y[0]-F$k[0],F$D=F$Y[1]-F$k[1],F$l=F$Y[2]-F$k[2],F$r=F$X*F$l-F$I*F$D,F$$=F$I*F$b-F$A*F$l,F$W=F$A*F$D-F$X*F$b,F$z=1/Math.sqrt(F$r*F$r+F$$*F$$+F$W*F$W),F$V=F$r*F$z,F$n=F$$*F$z,F$C=F$W*F$z,F$M=F$e._TEMPVec3.elements;F$M[0]=F$V,F$M[1]=F$n,F$M[2]=F$C;var F$_=-(F$V*F$k[0]+F$n*F$k[1]+F$C*F$k[2]);return new F$e(F$e._TEMPVec3,F$_)},F$e.PlaneIntersectionType_Back=0,F$e.PlaneIntersectionType_Front=1,F$e.PlaneIntersectionType_Intersecting=2,F$l(F$e,["_TEMPVec3",function(){return this._TEMPVec3=new F$Aj}]),F$e}()),F$tj=function(){function F$T(F$y,F$j,F$t,F$k){this.elements=new Float32Array(4),void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=1),this.elements[0]=F$y,this.elements[1]=F$j,this.elements[2]=F$t,this.elements[3]=F$k}F$$(F$T,"laya.d3.math.Quaternion");var F$y=F$T.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.scaling=function(F$y,F$j){var F$t=F$j.elements,F$k=this.elements;F$t[0]=F$k[0]*F$y,F$t[1]=F$k[1]*F$y,F$t[2]=F$k[2]*F$y,F$t[3]=F$k[3]*F$y},F$y.normalize=function(F$y){var F$j=F$y.elements,F$t=this.elements,F$k=F$t[0],F$T=F$t[1],F$Y=F$t[2],F$A=F$t[3],F$X=F$k*F$k+F$T*F$T+F$Y*F$Y+F$A*F$A;0<F$X&&(F$X=1/Math.sqrt(F$X),F$j[0]=F$k*F$X,F$j[1]=F$T*F$X,F$j[2]=F$Y*F$X,F$j[3]=F$A*F$X)},F$y.length=function(){var F$y=this.elements,F$j=F$y[0],F$t=F$y[1],F$k=F$y[2],F$T=F$y[3];return Math.sqrt(F$j*F$j+F$t*F$t+F$k*F$k+F$T*F$T)},F$y.rotateX=function(F$y,F$j){var F$t=F$j.elements,F$k=this.elements;F$y*=.5;var F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$k[3],F$I=Math.sin(F$y),F$b=Math.cos(F$y);F$t[0]=F$T*F$b+F$X*F$I,F$t[1]=F$Y*F$b+F$A*F$I,F$t[2]=F$A*F$b-F$Y*F$I,F$t[3]=F$X*F$b-F$T*F$I},F$y.rotateY=function(F$y,F$j){var F$t=F$j.elements,F$k=this.elements;F$y*=.5;var F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$k[3],F$I=Math.sin(F$y),F$b=Math.cos(F$y);F$t[0]=F$T*F$b-F$A*F$I,F$t[1]=F$Y*F$b+F$X*F$I,F$t[2]=F$A*F$b+F$T*F$I,F$t[3]=F$X*F$b-F$Y*F$I},F$y.rotateZ=function(F$y,F$j){var F$t=F$j.elements,F$k=this.elements;F$y*=.5;var F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$k[3],F$I=Math.sin(F$y),F$b=Math.cos(F$y);F$t[0]=F$T*F$b+F$Y*F$I,F$t[1]=F$Y*F$b-F$T*F$I,F$t[2]=F$A*F$b+F$X*F$I,F$t[3]=F$X*F$b-F$A*F$I},F$y.getYawPitchRoll=function(F$y){F$Aj.transformQuat(F$Aj.ForwardRH,this,F$T.TEMPVector31),F$Aj.transformQuat(F$Aj.Up,this,F$T.TEMPVector32);var F$j=F$T.TEMPVector32.elements;F$T.angleTo(F$Aj.ZERO,F$T.TEMPVector31,F$T.TEMPVector33);var F$t=F$T.TEMPVector33.elements;F$t[0]==Math.PI/2?(F$t[1]=F$T.arcTanAngle(F$j[2],F$j[0]),F$t[2]=0):F$t[0]==-Math.PI/2?(F$t[1]=F$T.arcTanAngle(-F$j[2],-F$j[0]),F$t[2]=0):(F$yj.createRotationY(-F$t[1],F$T.TEMPMatrix0),F$yj.createRotationX(-F$t[0],F$T.TEMPMatrix1),F$Aj.transformCoordinate(F$T.TEMPVector32,F$T.TEMPMatrix0,F$T.TEMPVector32),F$Aj.transformCoordinate(F$T.TEMPVector32,F$T.TEMPMatrix1,F$T.TEMPVector32),F$t[2]=F$T.arcTanAngle(F$j[1],-F$j[0])),F$t[1]<=-Math.PI&&(F$t[1]=Math.PI),F$t[2]<=-Math.PI&&(F$t[2]=Math.PI),F$t[1]>=Math.PI&&F$t[2]>=Math.PI&&(F$t[1]=0,F$t[2]=0,F$t[0]=Math.PI-F$t[0]);var F$k=F$y.elements;F$k[0]=F$t[1],F$k[1]=F$t[0],F$k[2]=F$t[2]},F$y.invert=function(F$y){var F$j=F$y.elements,F$t=this.elements,F$k=F$t[0],F$T=F$t[1],F$Y=F$t[2],F$A=F$t[3],F$X=F$k*F$k+F$T*F$T+F$Y*F$Y+F$A*F$A,F$I=F$X?1/F$X:0;F$j[0]=-F$k*F$I,F$j[1]=-F$T*F$I,F$j[2]=-F$Y*F$I,F$j[3]=F$A*F$I},F$y.identity=function(){var F$y=this.elements;F$y[0]=0,F$y[1]=0,F$y[2]=0,F$y[3]=1},F$y.fromArray=function(F$y,F$j){void 0===F$j&&(F$j=0),this.elements[0]=F$y[F$j+0],this.elements[1]=F$y[F$j+1],this.elements[2]=F$y[F$j+2],this.elements[3]=F$y[F$j+3]},F$y.cloneTo=function(F$y){var F$j,F$t,F$k;if((F$t=this.elements)!==(F$k=F$y.elements))for(F$j=0;F$j<4;++F$j)F$k[F$j]=F$t[F$j]},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$y.equals=function(F$y){var F$j=this.elements,F$t=F$y.elements;return F$Ey.nearEqual(F$j[0],F$t[0])&&F$Ey.nearEqual(F$j[1],F$t[1])&&F$Ey.nearEqual(F$j[2],F$t[2])&&F$Ey.nearEqual(F$j[3],F$t[3])},F$y.lengthSquared=function(){var F$y=this.elements[0],F$j=this.elements[1],F$t=this.elements[2],F$k=this.elements[3];return F$y*F$y+F$j*F$j+F$t*F$t+F$k*F$k},F$W(0,F$y,"x",function(){return this.elements[0]}),F$W(0,F$y,"y",function(){return this.elements[1]}),F$W(0,F$y,"z",function(){return this.elements[2]}),F$W(0,F$y,"w",function(){return this.elements[3]}),F$T.createFromYawPitchRoll=function(F$y,F$j,F$t,F$k){var F$T=.5*F$t,F$Y=.5*F$j,F$A=.5*F$y,F$X=Math.sin(F$T),F$I=Math.cos(F$T),F$b=Math.sin(F$Y),F$D=Math.cos(F$Y),F$l=Math.sin(F$A),F$r=Math.cos(F$A),F$$=F$k.elements;F$$[0]=F$r*F$b*F$I+F$l*F$D*F$X,F$$[1]=F$l*F$D*F$I-F$r*F$b*F$X,F$$[2]=F$r*F$D*F$X-F$l*F$b*F$I,F$$[3]=F$r*F$D*F$I+F$l*F$b*F$X},F$T.multiply=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$j.elements,F$Y=F$t.elements,F$A=F$k[0],F$X=F$k[1],F$I=F$k[2],F$b=F$k[3],F$D=F$T[0],F$l=F$T[1],F$r=F$T[2],F$$=F$T[3],F$W=F$X*F$r-F$I*F$l,F$z=F$I*F$D-F$A*F$r,F$V=F$A*F$l-F$X*F$D,F$n=F$A*F$D+F$X*F$l+F$I*F$r;F$Y[0]=F$A*F$$+F$D*F$b+F$W,F$Y[1]=F$X*F$$+F$l*F$b+F$z,F$Y[2]=F$I*F$$+F$r*F$b+F$V,F$Y[3]=F$b*F$$-F$n},F$T.arcTanAngle=function(F$y,F$j){return 0==F$y?1==F$j?Math.PI/2:-Math.PI/2:0<F$y?Math.atan(F$j/F$y):F$y<0?0<F$j?Math.atan(F$j/F$y)+Math.PI:Math.atan(F$j/F$y)-Math.PI:0},F$T.angleTo=function(F$y,F$j,F$t){F$Aj.subtract(F$j,F$y,F$T.TEMPVector30),F$Aj.normalize(F$T.TEMPVector30,F$T.TEMPVector30),F$t.elements[0]=Math.asin(F$T.TEMPVector30.y),F$t.elements[1]=F$T.arcTanAngle(-F$T.TEMPVector30.z,-F$T.TEMPVector30.x)},F$T.createFromAxisAngle=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements;F$j*=.5;var F$Y=Math.sin(F$j);F$k[0]=F$Y*F$T[0],F$k[1]=F$Y*F$T[1],F$k[2]=F$Y*F$T[2],F$k[3]=Math.cos(F$j)},F$T.createFromMatrix3x3=function(F$y,F$j){var F$t,F$k=F$j.elements,F$T=F$y.elements,F$Y=F$T[0]+F$T[4]+F$T[8];if(0<F$Y)F$t=Math.sqrt(F$Y+1),F$k[3]=.5*F$t,F$t=.5/F$t,F$k[0]=(F$T[5]-F$T[7])*F$t,F$k[1]=(F$T[6]-F$T[2])*F$t,F$k[2]=(F$T[1]-F$T[3])*F$t;else{var F$A=0;F$T[4]>F$T[0]&&(F$A=1),F$T[8]>F$T[3*F$A+F$A]&&(F$A=2);var F$X=(F$A+1)%3,F$I=(F$A+2)%3;F$t=Math.sqrt(F$T[3*F$A+F$A]-F$T[3*F$X+F$X]-F$T[3*F$I+F$I]+1),F$k[F$A]=.5*F$t,F$t=.5/F$t,F$k[3]=(F$T[3*F$X+F$I]-F$T[3*F$I+F$X])*F$t,F$k[F$X]=(F$T[3*F$X+F$A]+F$T[3*F$A+F$X])*F$t,F$k[F$I]=(F$T[3*F$I+F$A]+F$T[3*F$A+F$I])*F$t}},F$T.createFromMatrix4x4=function(F$y,F$j){var F$t,F$k,F$T=F$y.elements,F$Y=F$j.elements,F$A=F$T[0]+F$T[5]+F$T[10];0<F$A?(F$t=Math.sqrt(F$A+1),F$Y[3]=.5*F$t,F$t=.5/F$t,F$Y[0]=(F$T[6]-F$T[9])*F$t,F$Y[1]=(F$T[8]-F$T[2])*F$t,F$Y[2]=(F$T[1]-F$T[4])*F$t):F$T[0]>=F$T[5]&&F$T[0]>=F$T[10]?(F$k=.5/(F$t=Math.sqrt(1+F$T[0]-F$T[5]-F$T[10])),F$Y[0]=.5*F$t,F$Y[1]=(F$T[1]+F$T[4])*F$k,F$Y[2]=(F$T[2]+F$T[8])*F$k,F$Y[3]=(F$T[6]-F$T[9])*F$k):F$T[5]>F$T[10]?(F$k=.5/(F$t=Math.sqrt(1+F$T[5]-F$T[0]-F$T[10])),F$Y[0]=(F$T[4]+F$T[1])*F$k,F$Y[1]=.5*F$t,F$Y[2]=(F$T[9]+F$T[6])*F$k,F$Y[3]=(F$T[8]-F$T[2])*F$k):(F$k=.5/(F$t=Math.sqrt(1+F$T[10]-F$T[0]-F$T[5])),F$Y[0]=(F$T[8]+F$T[2])*F$k,F$Y[1]=(F$T[9]+F$T[6])*F$k,F$Y[2]=.5*F$t,F$Y[3]=(F$T[1]-F$T[4])*F$k)},F$T.slerp=function(F$y,F$j,F$t,F$k){var F$T,F$Y,F$A,F$X,F$I,F$b=F$y.elements,F$D=F$j.elements,F$l=F$k.elements,F$r=F$b[0],F$$=F$b[1],F$W=F$b[2],F$z=F$b[3],F$V=F$D[0],F$n=F$D[1],F$C=F$D[2],F$M=F$D[3];return(F$Y=F$r*F$V+F$$*F$n+F$W*F$C+F$z*F$M)<0&&(F$Y=-F$Y,F$V=-F$V,F$n=-F$n,F$C=-F$C,F$M=-F$M),F$I=1e-6<1-F$Y?(F$T=Math.acos(F$Y),F$A=Math.sin(F$T),F$X=Math.sin((1-F$t)*F$T)/F$A,Math.sin(F$t*F$T)/F$A):(F$X=1-F$t,F$t),F$l[0]=F$X*F$r+F$I*F$V,F$l[1]=F$X*F$$+F$I*F$n,F$l[2]=F$X*F$W+F$I*F$C,F$l[3]=F$X*F$z+F$I*F$M,F$l},F$T.lerp=function(F$y,F$j,F$t,F$k){var F$T=F$k.elements,F$Y=F$y.elements,F$A=F$j.elements,F$X=F$Y[0],F$I=F$Y[1],F$b=F$Y[2],F$D=F$Y[3];F$T[0]=F$X+F$t*(F$A[0]-F$X),F$T[1]=F$I+F$t*(F$A[1]-F$I),F$T[2]=F$b+F$t*(F$A[2]-F$b),F$T[3]=F$D+F$t*(F$A[3]-F$D)},F$T.add=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=F$T[0]+F$Y[0],F$k[1]=F$T[1]+F$Y[1],F$k[2]=F$T[2]+F$Y[2],F$k[3]=F$T[3]+F$Y[3]},F$T.dot=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;return F$t[0]*F$k[0]+F$t[1]*F$k[1]+F$t[2]*F$k[2]+F$t[3]*F$k[3]},F$T.rotationLookAt=function(F$y,F$j,F$t){F$T.lookAt(F$Aj.ZERO,F$y,F$j,F$t)},F$T.lookAt=function(F$y,F$j,F$t,F$k){F$uy.lookAt(F$y,F$j,F$t,F$T._tempMatrix3x3),F$T.rotationMatrix(F$T._tempMatrix3x3,F$k)},F$T.invert=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$y.lengthSquared();F$Ey.isZero(F$T)||(F$T=1/F$T,F$k[0]=-F$t[0]*F$T,F$k[1]=-F$t[1]*F$T,F$k[2]=-F$t[2]*F$T,F$k[3]=F$t[3]*F$T)},F$T.rotationMatrix=function(F$y,F$j){var F$t=F$y.elements,F$k=F$t[0],F$T=F$t[1],F$Y=F$t[2],F$A=F$t[3],F$X=F$t[4],F$I=F$t[5],F$b=F$t[6],F$D=F$t[7],F$l=F$t[8],F$r=F$j.elements,F$$=NaN,F$W=NaN,F$z=F$k+F$X+F$l;0<F$z?(F$$=Math.sqrt(F$z+1),F$r[3]=.5*F$$,F$$=.5/F$$,F$r[0]=(F$I-F$D)*F$$,F$r[1]=(F$b-F$Y)*F$$,F$r[2]=(F$T-F$A)*F$$):F$X<=F$k&&F$l<=F$k?(F$W=.5/(F$$=Math.sqrt(1+F$k-F$X-F$l)),F$r[0]=.5*F$$,F$r[1]=(F$T+F$A)*F$W,F$r[2]=(F$Y+F$b)*F$W,F$r[3]=(F$I-F$D)*F$W):F$l<F$X?(F$W=.5/(F$$=Math.sqrt(1+F$X-F$k-F$l)),F$r[0]=(F$A+F$T)*F$W,F$r[1]=.5*F$$,F$r[2]=(F$D+F$I)*F$W,F$r[3]=(F$b-F$Y)*F$W):(F$W=.5/(F$$=Math.sqrt(1+F$l-F$k-F$X)),F$r[0]=(F$b+F$Y)*F$W,F$r[1]=(F$D+F$I)*F$W,F$r[2]=.5*F$$,F$r[3]=(F$T-F$A)*F$W)},F$T.DEFAULT=new F$T,F$l(F$T,["TEMPVector30",function(){return this.TEMPVector30=new F$Aj},"TEMPVector31",function(){return this.TEMPVector31=new F$Aj},"TEMPVector32",function(){return this.TEMPVector32=new F$Aj},"TEMPVector33",function(){return this.TEMPVector33=new F$Aj},"TEMPMatrix0",function(){return this.TEMPMatrix0=new F$yj},"TEMPMatrix1",function(){return this.TEMPMatrix1=new F$yj},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new F$uy},"NAN",function(){return this.NAN=new F$T(NaN,NaN,NaN,NaN)}]),F$T}(),F$kj=function(){function F$y(F$y){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=F$y,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}F$$(F$y,"laya.d3.math.Rand");var F$j=F$y.prototype;return F$j.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},F$j.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},F$j.getSignedFloat=function(){return 2*this.getFloat()-1},F$W(0,F$j,"seed",function(){return this.seeds[0]},function(F$y){this.seeds[0]=F$y,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),F$y.getFloatFromInt=function(F$y){return 1/8388607*(8388607&F$y)},F$y.getByteFromInt=function(F$y){return(8388607&F$y)>>>15},F$y}(),F$Tj=(function(){function F$T(F$y){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(F$y instanceof Array)||4!==F$y.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|F$y[0],this._state0L=0|F$y[1],this._state1U=0|F$y[2],this._state1L=0|F$y[3]}F$$(F$T,"laya.d3.math.RandX");var F$y=F$T.prototype;F$y.randomint=function(){var F$y=this._state0U,F$j=this._state0L,F$t=this._state1U,F$k=this._state1L,F$T=(F$k>>>0)+(F$j>>>0),F$Y=F$t+F$y+(F$T/2>>>31)>>>0,F$A=F$T>>>0,F$X=0,F$I=0;F$X=(F$y^=F$X=F$y<<23|(-512&F$j)>>>9)^(this._state0U=F$t),F$I=(F$j^=F$I=F$j<<23)^(this._state0L=F$k);F$X^=F$y>>>18,F$I^=F$j>>>18|(262143&F$y)<<14;return F$X^=F$t>>>5,F$I^=F$k>>>5|(31&F$t)<<27,this._state1U=F$X,this._state1L=F$I,[F$Y,F$A]},F$y.random=function(){var F$y=this.randomint(),F$j=F$y[0],F$t=1023<<20|F$j>>>12,F$k=0|(F$y[1]>>>12|(4095&F$j)<<20);return F$T._CONVERTION_BUFFER.setUint32(0,F$t,!1),F$T._CONVERTION_BUFFER.setUint32(4,F$k,!1),F$kj._CONVERTION_BUFFER.getFloat64(0,!1)-1},F$l(F$T,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new F$kj([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function F$y(F$y,F$j){this.origin=null,this.direction=null,this.origin=F$y,this.direction=F$j}return F$$(F$y,"laya.d3.math.Ray"),F$y}()),F$Yj=function(){function F$y(F$y,F$j){this.elements=new Float32Array(2),void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0);var F$t=this.elements;F$t[0]=F$y,F$t[1]=F$j}F$$(F$y,"laya.d3.math.Vector2");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.fromArray=function(F$y,F$j){void 0===F$j&&(F$j=0),this.elements[0]=F$y[F$j+0],this.elements[1]=F$y[F$j+1]},F$j.cloneTo=function(F$y){var F$j=F$y.elements,F$t=this.elements;F$j[0]=F$t[0],F$j[1]=F$t[1]},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"x",function(){return this.elements[0]},function(F$y){this.elements[0]=F$y}),F$W(0,F$j,"y",function(){return this.elements[1]},function(F$y){this.elements[1]=F$y}),F$y.scale=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements;F$k[0]=F$T[0]*F$j,F$k[1]=F$T[1]*F$j},F$l(F$y,["ZERO",function(){return this.ZERO=new F$y(0,0)},"ONE",function(){return this.ONE=new F$y(1,1)}]),F$y}(),F$Aj=function(){function F$D(F$y,F$j,F$t){this.elements=new Float32Array(3),void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0);var F$k=this.elements;F$k[0]=F$y,F$k[1]=F$j,F$k[2]=F$t}F$$(F$D,"laya.d3.math.Vector3");var F$y=F$D.prototype;return F$e.imps(F$y,{"laya.d3.core.IClone":!0}),F$y.fromArray=function(F$y,F$j){void 0===F$j&&(F$j=0),this.elements[0]=F$y[F$j+0],this.elements[1]=F$y[F$j+1],this.elements[2]=F$y[F$j+2]},F$y.cloneTo=function(F$y){var F$j=F$y.elements,F$t=this.elements;F$j[0]=F$t[0],F$j[1]=F$t[1],F$j[2]=F$t[2]},F$y.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$y.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},F$y.reset=function(F$y,F$j,F$t){this.elements[0]=F$y,this.elements[1]=F$j,this.elements[2]=F$t},F$W(0,F$y,"x",function(){return this.elements[0]},function(F$y){this.elements[0]=F$y}),F$W(0,F$y,"y",function(){return this.elements[1]},function(F$y){this.elements[1]=F$y}),F$W(0,F$y,"z",function(){return this.elements[2]},function(F$y){this.elements[2]=F$y}),F$D.distanceSquared=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$t[0]-F$k[0],F$Y=F$t[1]-F$k[1],F$A=F$t[2]-F$k[2];return F$T*F$T+F$Y*F$Y+F$A*F$A},F$D.distance=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$t[0]-F$k[0],F$Y=F$t[1]-F$k[1],F$A=F$t[2]-F$k[2];return Math.sqrt(F$T*F$T+F$Y*F$Y+F$A*F$A)},F$D.min=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=Math.min(F$T[0],F$Y[0]),F$k[1]=Math.min(F$T[1],F$Y[1]),F$k[2]=Math.min(F$T[2],F$Y[2])},F$D.max=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=Math.max(F$T[0],F$Y[0]),F$k[1]=Math.max(F$T[1],F$Y[1]),F$k[2]=Math.max(F$T[2],F$Y[2])},F$D.transformQuat=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements,F$A=F$T[0],F$X=F$T[1],F$I=F$T[2],F$b=F$Y[0],F$D=F$Y[1],F$l=F$Y[2],F$r=F$Y[3],F$$=F$r*F$A+F$D*F$I-F$l*F$X,F$W=F$r*F$X+F$l*F$A-F$b*F$I,F$z=F$r*F$I+F$b*F$X-F$D*F$A,F$V=-F$b*F$A-F$D*F$X-F$l*F$I;F$k[0]=F$$*F$r+F$V*-F$b+F$W*-F$l-F$z*-F$D,F$k[1]=F$W*F$r+F$V*-F$D+F$z*-F$b-F$$*-F$l,F$k[2]=F$z*F$r+F$V*-F$l+F$$*-F$D-F$W*-F$b},F$D.scalarLength=function(F$y){var F$j=F$y.elements,F$t=F$j[0],F$k=F$j[1],F$T=F$j[2];return Math.sqrt(F$t*F$t+F$k*F$k+F$T*F$T)},F$D.scalarLengthSquared=function(F$y){var F$j=F$y.elements,F$t=F$j[0],F$k=F$j[1],F$T=F$j[2];return F$t*F$t+F$k*F$k+F$T*F$T},F$D.normalize=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$t[0],F$Y=F$t[1],F$A=F$t[2],F$X=F$T*F$T+F$Y*F$Y+F$A*F$A;0<F$X&&(F$X=1/Math.sqrt(F$X),F$k[0]=F$t[0]*F$X,F$k[1]=F$t[1]*F$X,F$k[2]=F$t[2]*F$X)},F$D.multiply=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=F$T[0]*F$Y[0],F$k[1]=F$T[1]*F$Y[1],F$k[2]=F$T[2]*F$Y[2]},F$D.scale=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements;F$k[0]=F$T[0]*F$j,F$k[1]=F$T[1]*F$j,F$k[2]=F$T[2]*F$j},F$D.lerp=function(F$y,F$j,F$t,F$k){var F$T=F$k.elements,F$Y=F$y.elements,F$A=F$j.elements,F$X=F$Y[0],F$I=F$Y[1],F$b=F$Y[2];F$T[0]=F$X+F$t*(F$A[0]-F$X),F$T[1]=F$I+F$t*(F$A[1]-F$I),F$T[2]=F$b+F$t*(F$A[2]-F$b)},F$D.transformV3ToV3=function(F$y,F$j,F$t){var F$k=F$D._tempVector4;F$D.transformV3ToV4(F$y,F$j,F$k);var F$T=F$k.elements,F$Y=F$t.elements;F$Y[0]=F$T[0],F$Y[1]=F$T[1],F$Y[2]=F$T[2]},F$D.transformV3ToV4=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$j.elements,F$I=F$t.elements;F$I[0]=F$T*F$X[0]+F$Y*F$X[4]+F$A*F$X[8]+F$X[12],F$I[1]=F$T*F$X[1]+F$Y*F$X[5]+F$A*F$X[9]+F$X[13],F$I[2]=F$T*F$X[2]+F$Y*F$X[6]+F$A*F$X[10]+F$X[14],F$I[3]=F$T*F$X[3]+F$Y*F$X[7]+F$A*F$X[11]+F$X[15]},F$D.TransformNormal=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$j.elements,F$I=F$t.elements;F$I[0]=F$T*F$X[0]+F$Y*F$X[4]+F$A*F$X[8],F$I[1]=F$T*F$X[1]+F$Y*F$X[5]+F$A*F$X[9],F$I[2]=F$T*F$X[2]+F$Y*F$X[6]+F$A*F$X[10]},F$D.transformCoordinate=function(F$y,F$j,F$t){var F$k=F$D._tempVector4.elements,F$T=F$y.elements,F$Y=F$T[0],F$A=F$T[1],F$X=F$T[2],F$I=F$j.elements;F$k[0]=F$Y*F$I[0]+F$A*F$I[4]+F$X*F$I[8]+F$I[12],F$k[1]=F$Y*F$I[1]+F$A*F$I[5]+F$X*F$I[9]+F$I[13],F$k[2]=F$Y*F$I[2]+F$A*F$I[6]+F$X*F$I[10]+F$I[14],F$k[3]=1/(F$Y*F$I[3]+F$A*F$I[7]+F$X*F$I[11]+F$I[15]);var F$b=F$t.elements;F$b[0]=F$k[0]*F$k[3],F$b[1]=F$k[1]*F$k[3],F$b[2]=F$k[2]*F$k[3]},F$D.Clamp=function(F$y,F$j,F$t,F$k){var F$T=F$y.elements,F$Y=F$T[0],F$A=F$T[1],F$X=F$T[2],F$I=F$j.elements,F$b=F$I[0],F$D=F$I[1],F$l=F$I[2],F$r=F$t.elements,F$$=F$r[0],F$W=F$r[1],F$z=F$r[2],F$V=F$k.elements;F$Y=(F$Y=F$$<F$Y?F$$:F$Y)<F$b?F$b:F$Y,F$A=(F$A=F$W<F$A?F$W:F$A)<F$D?F$D:F$A,F$X=(F$X=F$z<F$X?F$z:F$X)<F$l?F$l:F$X,F$V[0]=F$Y,F$V[1]=F$A,F$V[2]=F$X},F$D.add=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=F$T[0]+F$Y[0],F$k[1]=F$T[1]+F$Y[1],F$k[2]=F$T[2]+F$Y[2]},F$D.subtract=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=F$T[0]-F$Y[0],F$k[1]=F$T[1]-F$Y[1],F$k[2]=F$T[2]-F$Y[2]},F$D.cross=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$j.elements,F$Y=F$t.elements,F$A=F$k[0],F$X=F$k[1],F$I=F$k[2],F$b=F$T[0],F$D=F$T[1],F$l=F$T[2];F$Y[0]=F$X*F$l-F$I*F$D,F$Y[1]=F$I*F$b-F$A*F$l,F$Y[2]=F$A*F$D-F$X*F$b},F$D.dot=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;return F$t[0]*F$k[0]+F$t[1]*F$k[1]+F$t[2]*F$k[2]},F$D.equals=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;return F$Ey.nearEqual(Math.abs(F$t[0]),Math.abs(F$k[0]))&&F$Ey.nearEqual(Math.abs(F$t[1]),Math.abs(F$k[1]))&&F$Ey.nearEqual(Math.abs(F$t[2]),Math.abs(F$k[2]))},F$D.ZERO=new F$D(0,0,0),F$D.ONE=new F$D(1,1,1),F$D.NegativeUnitX=new F$D(-1,0,0),F$D.UnitX=new F$D(1,0,0),F$D.UnitY=new F$D(0,1,0),F$D.UnitZ=new F$D(0,0,1),F$D.ForwardRH=new F$D(0,0,-1),F$D.ForwardLH=new F$D(0,0,1),F$D.Up=new F$D(0,1,0),F$D.NAN=new F$D(NaN,NaN,NaN),F$l(F$D,["_tempVector4",function(){return this._tempVector4=new F$Xj}]),F$D}(),F$Xj=function(){function F$y(F$y,F$j,F$t,F$k){this.elements=new Float32Array(4),void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=0);var F$T=this.elements;F$T[0]=F$y,F$T[1]=F$j,F$T[2]=F$t,F$T[3]=F$k}F$$(F$y,"laya.d3.math.Vector4");var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j.fromArray=function(F$y,F$j){void 0===F$j&&(F$j=0),this.elements[0]=F$y[F$j+0],this.elements[1]=F$y[F$j+1],this.elements[2]=F$y[F$j+2],this.elements[3]=F$y[F$j+3]},F$j.cloneTo=function(F$y){var F$j=F$y.elements,F$t=this.elements;F$j[0]=F$t[0],F$j[1]=F$t[1],F$j[2]=F$t[2],F$j[3]=F$t[3]},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$j.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},F$j.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},F$W(0,F$j,"x",function(){return this.elements[0]},function(F$y){this.elements[0]=F$y}),F$W(0,F$j,"y",function(){return this.elements[1]},function(F$y){this.elements[1]=F$y}),F$W(0,F$j,"z",function(){return this.elements[2]},function(F$y){this.elements[2]=F$y}),F$W(0,F$j,"w",function(){return this.elements[3]},function(F$y){this.elements[3]=F$y}),F$y.lerp=function(F$y,F$j,F$t,F$k){var F$T=F$k.elements,F$Y=F$y.elements,F$A=F$j.elements,F$X=F$Y[0],F$I=F$Y[1],F$b=F$Y[2],F$D=F$Y[3];F$T[0]=F$X+F$t*(F$A[0]-F$X),F$T[1]=F$I+F$t*(F$A[1]-F$I),F$T[2]=F$b+F$t*(F$A[2]-F$b),F$T[3]=F$D+F$t*(F$A[3]-F$D)},F$y.transformByM4x4=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$k[0],F$Y=F$k[1],F$A=F$k[2],F$X=F$k[3],F$I=F$j.elements,F$b=F$t.elements;F$b[0]=F$T*F$I[0]+F$Y*F$I[4]+F$A*F$I[8]+F$X*F$I[12],F$b[1]=F$T*F$I[1]+F$Y*F$I[5]+F$A*F$I[9]+F$X*F$I[13],F$b[2]=F$T*F$I[2]+F$Y*F$I[6]+F$A*F$I[10]+F$X*F$I[14],F$b[3]=F$T*F$I[3]+F$Y*F$I[7]+F$A*F$I[11]+F$X*F$I[15]},F$y.equals=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;return F$Ey.nearEqual(Math.abs(F$t[0]),Math.abs(F$k[0]))&&F$Ey.nearEqual(Math.abs(F$t[1]),Math.abs(F$k[1]))&&F$Ey.nearEqual(Math.abs(F$t[2]),Math.abs(F$k[2]))&&F$Ey.nearEqual(Math.abs(F$t[3]),Math.abs(F$k[3]))},F$y.normalize=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$y.length();0<F$T&&(F$k[0]=F$t[0]*F$T,F$k[1]=F$t[1]*F$T,F$k[2]=F$t[2]*F$T,F$k[3]=F$t[3]*F$T)},F$y.add=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=F$T[0]+F$Y[0],F$k[1]=F$T[1]+F$Y[1],F$k[2]=F$T[2]+F$Y[2],F$k[3]=F$T[3]+F$Y[3]},F$y.subtract=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=F$T[0]-F$Y[0],F$k[1]=F$T[1]-F$Y[1],F$k[2]=F$T[2]-F$Y[2],F$k[3]=F$T[3]-F$Y[3]},F$y.multiply=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=F$T[0]*F$Y[0],F$k[1]=F$T[1]*F$Y[1],F$k[2]=F$T[2]*F$Y[2],F$k[3]=F$T[3]*F$Y[3]},F$y.scale=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements;F$k[0]=F$T[0]*F$j,F$k[1]=F$T[1]*F$j,F$k[2]=F$T[2]*F$j,F$k[3]=F$T[3]*F$j},F$y.Clamp=function(F$y,F$j,F$t,F$k){var F$T=F$y.elements,F$Y=F$T[0],F$A=F$T[1],F$X=F$T[2],F$I=F$T[3],F$b=F$j.elements,F$D=F$b[0],F$l=F$b[1],F$r=F$b[2],F$$=F$b[3],F$W=F$t.elements,F$z=F$W[0],F$V=F$W[1],F$n=F$W[2],F$C=F$W[3],F$M=F$k.elements;F$Y=(F$Y=F$z<F$Y?F$z:F$Y)<F$D?F$D:F$Y,F$A=(F$A=F$V<F$A?F$V:F$A)<F$l?F$l:F$A,F$X=(F$X=F$n<F$X?F$n:F$X)<F$r?F$r:F$X,F$I=(F$I=F$C<F$I?F$C:F$I)<F$$?F$$:F$I,F$M[0]=F$Y,F$M[1]=F$A,F$M[2]=F$X,F$M[3]=F$I},F$y.distanceSquared=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$t[0]-F$k[0],F$Y=F$t[1]-F$k[1],F$A=F$t[2]-F$k[2],F$X=F$t[3]-F$k[3];return F$T*F$T+F$Y*F$Y+F$A*F$A+F$X*F$X},F$y.distance=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements,F$T=F$t[0]-F$k[0],F$Y=F$t[1]-F$k[1],F$A=F$t[2]-F$k[2],F$X=F$t[3]-F$k[3];return Math.sqrt(F$T*F$T+F$Y*F$Y+F$A*F$A+F$X*F$X)},F$y.dot=function(F$y,F$j){var F$t=F$y.elements,F$k=F$j.elements;return F$t[0]*F$k[0]+F$t[1]*F$k[1]+F$t[2]*F$k[2]+F$t[3]*F$k[3]},F$y.min=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=Math.min(F$T[0],F$Y[0]),F$k[1]=Math.min(F$T[1],F$Y[1]),F$k[2]=Math.min(F$T[2],F$Y[2]),F$k[3]=Math.min(F$T[3],F$Y[3])},F$y.max=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j.elements;F$k[0]=Math.max(F$T[0],F$Y[0]),F$k[1]=Math.max(F$T[1],F$Y[1]),F$k[2]=Math.max(F$T[2],F$Y[2]),F$k[3]=Math.max(F$T[3],F$Y[3])},F$l(F$y,["ZERO",function(){return this.ZERO=new F$y},"ONE",function(){return this.ONE=new F$y(1,1,1,1)},"UnitX",function(){return this.UnitX=new F$y(1,0,0,0)},"UnitY",function(){return this.UnitY=new F$y(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new F$y(0,0,1,0)},"UnitW",function(){return this.UnitW=new F$y(0,0,0,1)}]),F$y}(),F$Ij=function(){function F$Y(F$y,F$j,F$t,F$k){this.minDepth=0,this.maxDepth=1,this.x=F$y,this.y=F$j,this.width=F$t,this.height=F$k}F$$(F$Y,"laya.d3.math.Viewport");var F$y=F$Y.prototype;return F$y.project=function(F$y,F$j,F$t){F$Aj.transformV3ToV3(F$y,F$j,F$t);var F$k=F$y.elements,F$T=F$j.elements,F$Y=F$t.elements,F$A=F$k[0]*F$T[3]+F$k[1]*F$T[7]+F$k[2]*F$T[11]+F$T[15];1!==F$A&&(F$Y[0]=F$Y[0]/F$A,F$Y[1]=F$Y[1]/F$A,F$Y[2]=F$Y[2]/F$A),F$Y[0]=.5*(F$Y[0]+1)*this.width+this.x,F$Y[1]=.5*(1-F$Y[1])*this.height+this.y,F$Y[2]=F$Y[2]*(this.maxDepth-this.minDepth)+this.minDepth},F$y.unprojectFromMat=function(F$y,F$j,F$t){var F$k=F$y.elements,F$T=F$j.elements,F$Y=F$t.elements;F$Y[0]=(F$k[0]-this.x)/this.width*2-1,F$Y[1]=-((F$k[1]-this.y)/this.height*2-1);var F$A=(this.maxDepth-this.minDepth)/2;F$Y[2]=(F$k[2]-this.minDepth-F$A)/F$A;var F$X=F$Y[0]*F$T[3]+F$Y[1]*F$T[7]+F$Y[2]*F$T[11]+F$T[15];F$Aj.transformV3ToV3(F$t,F$j,F$t),1!==F$X&&(F$Y[0]=F$Y[0]/F$X,F$Y[1]=F$Y[1]/F$X,F$Y[2]=F$Y[2]/F$X)},F$y.unprojectFromWVP=function(F$y,F$j,F$t,F$k,F$T){F$yj.multiply(F$j,F$t,F$Y._tempMatrix4x4),F$k&&F$yj.multiply(F$Y._tempMatrix4x4,F$k,F$Y._tempMatrix4x4),F$Y._tempMatrix4x4.invert(F$Y._tempMatrix4x4),this.unprojectFromMat(F$y,F$Y._tempMatrix4x4,F$T)},F$l(F$Y,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new F$yj}]),F$Y}(),F$bj=function(){function F$Q(F$y){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=F$y,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}F$$(F$Q,"laya.d3.resource.models.SubMesh");var F$y=F$Q.prototype;return F$e.imps(F$y,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),F$y._getVertexBuffer=function(F$y){return void 0===F$y&&(F$y=0),0===F$y?this._vertexBuffer:null},F$y._getIndexBuffer=function(){return this._indexBuffer},F$y._getStaticBatchBakedVertexs=function(F$y,F$j){var F$t,F$k,F$T=this._vertexBuffer,F$Y=F$T.vertexDeclaration,F$A=F$Y.getVertexElementByUsage(0).offset/4,F$X=F$Y.getVertexElementByUsage(3).offset/4,F$I=F$j.meshRender.lightmapScaleOffset,F$b=0,F$D=0,F$l=0,F$r=0,F$$=0,F$W=0;if(F$I)if(F$k=F$Y.getVertexElementByUsage(15))F$l=F$Y.vertexStride/4,F$t=0<this._vertexCount?F$T.getData().slice(this._vertexStart*F$l,(this._vertexStart+this._vertexCount)*F$l):F$T.getData().slice(),F$r=F$k.offset/4;else{F$l=(F$W=F$Y.vertexStride/4)+2,F$t=this._vertexCount?new Float32Array(this._vertexCount*(F$T.vertexDeclaration.vertexStride/4+2)):new Float32Array(F$T.vertexCount*(F$T.vertexDeclaration.vertexStride/4+2)),F$r=(F$$=F$Y.getVertexElementByUsage(2).offset/4)+2;var F$z=F$T.getData();for(F$b=0,F$D=F$z.length/F$W;F$b<F$D;F$b++){var F$V=0;F$V=0<this._vertexCount?(this._vertexStart+F$b)*F$W:F$b*F$W;var F$n=F$b*F$l,F$C=0;for(F$C=0;F$C<F$r;F$C++)F$t[F$n+F$C]=F$z[F$V+F$C];for(F$C=F$r;F$C<F$W;F$C++)F$t[F$n+F$C+2]=F$z[F$V+F$C]}}else F$l=F$Y.vertexStride/4,F$t=this._vertexCount?F$T.getData().slice(this._vertexStart*F$l,(this._vertexStart+this._vertexCount)*F$l):F$T.getData().slice();if(F$y){var F$M=F$y.worldMatrix,F$_=F$Q._tempMatrix4x40;F$M.invert(F$_);var F$e=F$Q._tempMatrix4x41,F$v=F$j.transform.worldMatrix;F$yj.multiply(F$_,F$v,F$e)}else F$e=F$j.transform.worldMatrix;var F$N=F$Q._tempQuaternion0;for(F$e.decomposeTransRotScale(F$Q._tempVector30,F$N,F$Q._tempVector31),F$b=0,F$D=F$t.length/F$l;F$b<F$D;F$b++){var F$P=F$b*F$l+F$A,F$d=F$b*F$l+F$X;if(F$Vj.transformVector3ArrayToVector3ArrayCoordinate(F$t,F$P,F$e,F$t,F$P),F$Vj.transformVector3ArrayByQuat(F$t,F$d,F$N,F$t,F$d),F$I){var F$p=F$b*F$l+F$r;if(F$k)F$Vj.transformLightingMapTexcoordByUV1Array(F$t,F$p,F$I,F$t,F$p);else{var F$f=F$b*F$W+F$$;F$Vj.transformLightingMapTexcoordByUV0Array(F$z,F$f,F$I,F$t,F$p)}}}return F$t},F$y._getVertexBuffers=function(){return null},F$y._beforeRender=function(F$y){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$y._render=function(F$y){var F$j,F$t=0,F$k=F$y.renderElement;if(1<this._indexCount){var F$T=this._boneIndicesList.length;if(1<F$T){for(var F$Y=0;F$Y<F$T;F$Y++)(F$j=F$k._skinAnimationDatas||this._skinAnimationDatas)&&(F$k._shaderValue.setValue(0,F$j[F$Y]),F$y._shader.uploadRenderElementUniforms(F$k._shaderValue.data)),F$m.mainContext.drawElements(4,this._subIndexBufferCount[F$Y],5123,2*this._subIndexBufferStart[F$Y]);F$P.drawCall+=F$T}else(F$j=F$k._skinAnimationDatas||this._skinAnimationDatas)&&(F$k._shaderValue.setValue(0,F$j[0]),F$y._shader.uploadRenderElementUniforms(F$k._shaderValue.data)),F$m.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),F$P.drawCall++;F$t=this._indexCount}else F$t=this._indexBuffer.indexCount,(F$j=F$k._skinAnimationDatas||this._skinAnimationDatas)&&(F$k._shaderValue.setValue(0,F$j[0]),F$y._shader.uploadRenderElementUniforms(F$k._shaderValue.data)),F$m.mainContext.drawElements(4,F$t,5123,0),F$P.drawCall++;F$P.trianglesFaces+=F$t/3},F$y.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},F$y.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},F$W(0,F$y,"_vertexBufferCount",function(){return 1}),F$W(0,F$y,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$l(F$Q,["_tempVector30",function(){return this._tempVector30=new F$Aj},"_tempVector31",function(){return this._tempVector31=new F$Aj},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$tj},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new F$yj},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new F$yj}]),F$Q}(),F$Dj=function(){function F$y(F$y){this.defineCounter=0,this.defines=null,F$y?(this.defineCounter=F$y.defineCounter,this.defines=F$y.defines.slice()):(this.defineCounter=0,this.defines=[])}return F$$(F$y,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),F$y.prototype.registerDefine=function(F$y){var F$j=Math.pow(2,this.defineCounter++);return this.defines[F$j]=F$y,F$j},F$y}(),F$lj=function(){function F$y(){}return F$$(F$y,"laya.d3.shader.ShaderInit3D"),F$y.__init__=function(){var F$y,F$j;F$Pj._globalRegDefine("HIGHPRECISION",F$Pj.SHADERDEFINE_HIGHPRECISION),F$Pj._globalRegDefine("FOG",F$Pj.SHADERDEFINE_FOG),F$Pj._globalRegDefine("DIRECTIONLIGHT",F$Pj.SHADERDEFINE_DIRECTIONLIGHT),F$Pj._globalRegDefine("POINTLIGHT",F$Pj.SHADERDEFINE_POINTLIGHT),F$Pj._globalRegDefine("SPOTLIGHT",F$Pj.SHADERDEFINE_SPOTLIGHT),F$Pj._globalRegDefine("UV",F$Pj.SHADERDEFINE_UV0),F$Pj._globalRegDefine("COLOR",F$Pj.SHADERDEFINE_COLOR),F$Pj._globalRegDefine("UV1",F$Pj.SHADERDEFINE_UV1),F$Pj._globalRegDefine("CASTSHADOW",F$$j.SHADERDEFINE_CAST_SHADOW),F$Pj._globalRegDefine("SHADOWMAP_PSSM1",F$$j.SHADERDEFINE_SHADOW_PSSM1),F$Pj._globalRegDefine("SHADOWMAP_PSSM2",F$$j.SHADERDEFINE_SHADOW_PSSM2),F$Pj._globalRegDefine("SHADOWMAP_PSSM3",F$$j.SHADERDEFINE_SHADOW_PSSM3),F$Pj._globalRegDefine("SHADOWMAP_PCF_NO",F$$j.SHADERDEFINE_SHADOW_PCF_NO),F$Pj._globalRegDefine("SHADOWMAP_PCF1",F$$j.SHADERDEFINE_SHADOW_PCF1),F$Pj._globalRegDefine("SHADOWMAP_PCF2",F$$j.SHADERDEFINE_SHADOW_PCF2),F$Pj._globalRegDefine("SHADOWMAP_PCF3",F$$j.SHADERDEFINE_SHADOW_PCF3),F$Pj._globalRegDefine("DEPTHFOG",F$Pj.SAHDERDEFINE_DEPTHFOG),F$Kj.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),F$Kj.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),F$y={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},F$j={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var F$t=F$Kj.nameKey.add("SIMPLE");shaderCompile=F$Pj.add(F$t,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',F$y,F$j),F$xj.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),F$xj.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),F$xj.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),F$xj.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),F$xj.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),F$xj.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),F$xj.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),F$xj.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),F$xj.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},F$y}(),F$rj=function(){function F$y(){this._data=null,this._data=[]}F$$(F$y,"laya.d3.shader.ValusArray");var F$j=F$y.prototype;return F$j.setValue=function(F$y,F$j){this._data[F$y]=F$j},F$W(0,F$j,"data",function(){return this._data}),F$y}(),F$$j=function(){function F$y(){}return F$y.SHADERDEFINE_RECEIVE_SHADOW=1,F$y.SHADERDEFINE_CAST_SHADOW=512,F$y.SHADERDEFINE_SHADOW_PSSM1=1024,F$y.SHADERDEFINE_SHADOW_PSSM2=2048,F$y.SHADERDEFINE_SHADOW_PSSM3=4096,F$y.SHADERDEFINE_SHADOW_PCF_NO=8192,F$y.SHADERDEFINE_SHADOW_PCF1=16384,F$y.SHADERDEFINE_SHADOW_PCF2=32768,F$y.SHADERDEFINE_SHADOW_PCF3=65536,F$y.MAX_PSSM_COUNT=3,F$y}(),F$Wj=function(){function F$B(){}return F$$(F$B,"laya.d3.utils.Picker"),F$B.calculateCursorRay=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$y.elements[0],F$X=F$y.elements[1],F$I=F$B._tempVector30,F$b=F$I.elements;F$b[0]=F$A,F$b[1]=F$X,F$b[2]=F$j.minDepth;var F$D=F$B._tempVector31,F$l=F$D.elements;F$l[0]=F$A,F$l[1]=F$X,F$l[2]=F$j.maxDepth;var F$r=F$Y.origin,F$$=F$B._tempVector32;F$j.unprojectFromWVP(F$I,F$t,F$k,F$T,F$r),F$j.unprojectFromWVP(F$D,F$t,F$k,F$T,F$$);var F$W=F$Y.direction.elements;F$W[0]=F$$.x-F$r.x,F$W[1]=F$$.y-F$r.y,F$W[2]=F$$.z-F$r.z,F$Aj.normalize(F$Y.direction,F$Y.direction)},F$B.rayIntersectsPositionsAndIndices=function(F$y,F$j,F$t,F$k,F$T){for(var F$Y=F$t.vertexStride/4,F$A=F$t.getVertexElementByUsage(0).offset/4,F$X=Number.MAX_VALUE,F$I=-1,F$b=-1,F$D=-1,F$l=0;F$l<F$k.length;F$l+=3){var F$r=F$B._tempVector35,F$$=F$r.elements,F$W=F$k[F$l]*F$Y,F$z=F$W+F$A;F$$[0]=F$j[F$z],F$$[1]=F$j[1+F$z],F$$[2]=F$j[2+F$z];var F$V=F$B._tempVector36,F$n=F$V.elements,F$C=F$k[F$l+1]*F$Y,F$M=F$C+F$A;F$n[0]=F$j[F$M],F$n[1]=F$j[1+F$M],F$n[2]=F$j[2+F$M];var F$_=F$B._tempVector37,F$e=F$_.elements,F$v=F$k[F$l+2]*F$Y,F$N=F$v+F$A;F$e[0]=F$j[F$N],F$e[1]=F$j[1+F$N],F$e[2]=F$j[2+F$N];var F$P=laya.d3.utils.Picker.rayIntersectsTriangle(F$y,F$r,F$V,F$_);!isNaN(F$P)&&F$P<F$X&&(F$X=F$P,F$I=F$W,F$b=F$C,F$D=F$v)}if(F$X===Number.MAX_VALUE)return F$T.position.toDefault(),F$T.distance=Number.MAX_VALUE,F$T.trianglePositions[0].toDefault(),F$T.trianglePositions[1].toDefault(),F$T.trianglePositions[2].toDefault(),F$T.triangleNormals[0].toDefault(),F$T.triangleNormals[1].toDefault(),F$T.triangleNormals[2].toDefault(),!1;F$T.distance=F$X,F$Aj.scale(F$y.direction,F$X,F$T.position),F$Aj.add(F$y.origin,F$T.position,F$T.position);var F$d=F$T.trianglePositions,F$p=F$d[0],F$f=F$d[1],F$Q=F$d[2],F$m=F$p.elements,F$U=F$f.elements,F$q=F$Q.elements,F$w=F$I+F$A;F$m[0]=F$j[F$w],F$m[1]=F$j[F$w+1],F$m[2]=F$j[F$w+2];var F$S=F$b+F$A;F$U[0]=F$j[F$S],F$U[1]=F$j[F$S+1],F$U[2]=F$j[F$S+2];var F$H=F$D+F$A;F$q[0]=F$j[F$H],F$q[1]=F$j[F$H+1],F$q[2]=F$j[F$H+2];var F$K=F$t.getVertexElementByUsage(3);if(F$K){var F$x=F$K.offset/4,F$F=F$T.triangleNormals,F$G=F$F[0],F$g=F$F[1],F$a=F$F[2],F$J=F$G.elements,F$h=F$g.elements,F$O=F$a.elements,F$s=F$I+F$x;F$J[0]=F$j[F$s],F$J[1]=F$j[F$s+1],F$J[2]=F$j[F$s+2];var F$Z=F$b+F$x;F$h[0]=F$j[F$Z],F$h[1]=F$j[F$Z+1],F$h[2]=F$j[F$Z+2];var F$R=F$D+F$x;F$O[0]=F$j[F$R],F$O[1]=F$j[F$R+1],F$O[2]=F$j[F$R+2]}return!0},F$B.rayIntersectsTriangle=function(F$y,F$j,F$t,F$k){var F$T=F$B._tempVector30,F$Y=F$B._tempVector31;F$Aj.subtract(F$t,F$j,F$T),F$Aj.subtract(F$k,F$j,F$Y);var F$A,F$X=F$B._tempVector32;if(F$Aj.cross(F$y.direction,F$Y,F$X),(F$A=F$Aj.dot(F$T,F$X))>-Number.MIN_VALUE&&F$A<Number.MIN_VALUE)return Number.NaN;var F$I,F$b=1/F$A,F$D=F$B._tempVector33;if(F$Aj.subtract(F$y.origin,F$j,F$D),F$I=F$Aj.dot(F$D,F$X),(F$I*=F$b)<0||1<F$I)return Number.NaN;var F$l,F$r,F$$=F$B._tempVector34;return F$Aj.cross(F$D,F$T,F$$),F$l=F$Aj.dot(F$y.direction,F$$),(F$l*=F$b)<0||1<F$I+F$l?Number.NaN:(F$r=F$Aj.dot(F$Y,F$$),(F$r*=F$b)<0?Number.NaN:F$r)},F$l(F$B,["_tempVector30",function(){return this._tempVector30=new F$Aj},"_tempVector31",function(){return this._tempVector31=new F$Aj},"_tempVector32",function(){return this._tempVector32=new F$Aj},"_tempVector33",function(){return this._tempVector33=new F$Aj},"_tempVector34",function(){return this._tempVector34=new F$Aj},"_tempVector35",function(){return this._tempVector35=new F$Aj},"_tempVector36",function(){return this._tempVector36=new F$Aj},"_tempVector37",function(){return this._tempVector37=new F$Aj}]),F$B}(),F$zj=(function(){function F$y(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new F$Aj,new F$Aj,new F$Aj],this.trianglePositions.length=3,this.triangleNormals=[new F$Aj,new F$Aj,new F$Aj],this.triangleNormals.length=3,this.position=new F$Aj}F$$(F$y,"laya.d3.utils.RaycastHit"),F$y.prototype.cloneTo=function(F$y){F$y.distance=this.distance,this.trianglePositions[0].cloneTo(F$y.trianglePositions[0]),this.trianglePositions[1].cloneTo(F$y.trianglePositions[1]),this.trianglePositions[2].cloneTo(F$y.trianglePositions[2]),this.triangleNormals[0].cloneTo(F$y.triangleNormals[0]),this.triangleNormals[1].cloneTo(F$y.triangleNormals[1]),this.triangleNormals[2].cloneTo(F$y.triangleNormals[2]),this.position.cloneTo(F$y.position),F$y.sprite3D=this.sprite3D}}(),function(){function F$y(F$y,F$j){this._width=0,this._height=0,this._width=F$y,this._height=F$j}F$$(F$y,"laya.d3.utils.Size");var F$j=F$y.prototype;return F$W(0,F$j,"width",function(){return-1===this._width?F$c.clientWidth:this._width}),F$W(0,F$j,"height",function(){return-1===this._height?F$c.clientHeight:this._height}),F$W(1,F$y,"fullScreen",function(){return new F$y(-1,-1)}),F$y}()),F$Vj=function(){function F$w(){}return F$$(F$w,"laya.d3.utils.Utils3D"),F$w._rotationTransformScaleSkinAnimation=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l){var F$r,F$$,F$W,F$z,F$V,F$n=F$w._tempArray16_0,F$C=F$w._tempArray16_1,F$M=F$w._tempArray16_2,F$_=F$k+F$k,F$e=F$T+F$T,F$v=F$Y+F$Y,F$N=F$k*F$_,F$P=F$T*F$_,F$d=F$T*F$e,F$p=F$Y*F$_,F$f=F$Y*F$e,F$Q=F$Y*F$v,F$m=F$A*F$_,F$U=F$A*F$e,F$q=F$A*F$v;for(F$n[15]=1,F$n[0]=1-F$d-F$Q,F$n[1]=F$P+F$q,F$n[2]=F$p-F$U,F$n[4]=F$P-F$q,F$n[5]=1-F$N-F$Q,F$n[6]=F$f+F$m,F$n[8]=F$p+F$U,F$n[9]=F$f-F$m,F$n[10]=1-F$N-F$d,F$C[15]=1,F$C[0]=F$X,F$C[5]=F$I,F$C[10]=F$b,F$r=0;F$r<4;F$r++)F$$=F$n[F$r],F$W=F$n[F$r+4],F$z=F$n[F$r+8],F$V=F$n[F$r+12],F$M[F$r]=F$$,F$M[F$r+4]=F$W,F$M[F$r+8]=F$z,F$M[F$r+12]=F$$*F$y+F$W*F$j+F$z*F$t+F$V;for(F$r=0;F$r<4;F$r++)F$$=F$M[F$r],F$W=F$M[F$r+4],F$z=F$M[F$r+8],F$V=F$M[F$r+12],F$D[F$r+F$l]=F$$*F$C[0]+F$W*F$C[1]+F$z*F$C[2]+F$V*F$C[3],F$D[F$r+F$l+4]=F$$*F$C[4]+F$W*F$C[5]+F$z*F$C[6]+F$V*F$C[7],F$D[F$r+F$l+8]=F$$*F$C[8]+F$W*F$C[9]+F$z*F$C[10]+F$V*F$C[11],F$D[F$r+F$l+12]=F$$*F$C[12]+F$W*F$C[13]+F$z*F$C[14]+F$V*F$C[15]},F$w._createNodeByJson=function(F$y,F$j,F$t,F$k){if(!F$t)switch(F$j.type){case"Sprite3D":F$t=new F$Hj;break;case"MeshSprite3D":F$t=new F$Bj;break;case"SkinnedMeshSprite3D":F$t=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":F$t=new ShuriKenParticle3D;break;case"TrailSprite3D":F$t=new TrailSprite3D;break;case"Terrain":F$t=new Terrain;break;case"Camera":F$t=new F$Rj;break;case"DirectionLight":F$t=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var F$T=F$j.props;if(F$T)for(var F$Y in F$T)F$t[F$Y]=F$T[F$Y];var F$A=F$j.customProps;F$A&&(F$t instanceof laya.d3.core.Sprite3D?(F$t._parseBaseCustomProps(F$A),F$t._parseCustomProps(F$y,F$k,F$A,F$j),F$t._parseCustomComponent(F$y,F$k,F$j.components)):F$t._parseCustomProps(F$y,F$k,F$A,F$j));var F$X=F$j.child;if(F$X)for(var F$I=0,F$b=F$X.length;F$I<F$b;F$I++){var F$D=F$w._createNodeByJson(F$y,F$X[F$I],null,F$k);F$t.addChild(F$D)}return F$t},F$w._computeBoneAndAnimationDatasByBindPoseMatrxix=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A,F$X,F$I=0,F$b=0,F$D=F$y.length;for(F$A=0;F$A<F$D;F$I+=F$y[F$A].keyframeWidth,F$b+=16,F$A++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$j[F$I+0],F$j[F$I+1],F$j[F$I+2],F$j[F$I+3],F$j[F$I+4],F$j[F$I+5],F$j[F$I+6],F$j[F$I+7],F$j[F$I+8],F$j[F$I+9],F$k,F$b),0!=F$A&&(F$X=16*F$y[F$A].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$k,F$X,F$k,F$b,F$k,F$b));var F$l=F$t.length;for(F$A=0;F$A<F$l;F$A++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$k,16*F$Y[F$A],F$t[F$A],F$T,16*F$A)},F$w._computeAnimationDatasByArrayAndMatrixFast=function(F$y,F$j,F$t,F$k){for(var F$T=0,F$Y=F$y.length;F$T<F$Y;F$T++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$j,16*F$k[F$T],F$y[F$T],F$t,16*F$T)},F$w._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(F$y,F$j,F$t,F$k,F$T){var F$Y,F$A,F$X=0,F$I=0,F$b=F$y.length;for(F$Y=0;F$Y<F$b;F$X+=F$y[F$Y].keyframeWidth,F$I+=16,F$Y++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(F$j[F$X+7],F$j[F$X+8],F$j[F$X+9],F$j[F$X+3],F$j[F$X+4],F$j[F$X+5],F$j[F$X+6],F$j[F$X+0],F$j[F$X+1],F$j[F$X+2],F$k,F$I),0!=F$Y&&(F$A=16*F$y[F$Y].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(F$k,F$A,F$k,F$I,F$k,F$I));var F$D=F$t.length;for(F$Y=0;F$Y<F$D;F$Y++){var F$l=16*F$Y;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$k,F$l,F$t[F$Y],F$T,F$l)}},F$w._computeAnimationDatasByArrayAndMatrixFastOld=function(F$y,F$j,F$t){for(var F$k=F$y.length,F$T=0;F$T<F$k;F$T++){var F$Y=16*F$T;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(F$j,F$Y,F$y[F$T],F$t,F$Y)}},F$w._computeRootAnimationData=function(F$y,F$j,F$t){for(var F$k=0,F$T=0,F$Y=0,F$A=F$y.length;F$k<F$A;F$T+=F$y[F$k].keyframeWidth,F$Y+=16,F$k++)laya.d3.utils.Utils3D.createAffineTransformationArray(F$j[F$T+0],F$j[F$T+1],F$j[F$T+2],F$j[F$T+3],F$j[F$T+4],F$j[F$T+5],F$j[F$T+6],F$j[F$T+7],F$j[F$T+8],F$j[F$T+9],F$t,F$Y)},F$w.transformVector3ArrayByQuat=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$t.elements,F$A=F$y[F$j],F$X=F$y[F$j+1],F$I=F$y[F$j+2],F$b=F$Y[0],F$D=F$Y[1],F$l=F$Y[2],F$r=F$Y[3],F$$=F$r*F$A+F$D*F$I-F$l*F$X,F$W=F$r*F$X+F$l*F$A-F$b*F$I,F$z=F$r*F$I+F$b*F$X-F$D*F$A,F$V=-F$b*F$A-F$D*F$X-F$l*F$I;F$k[F$T]=F$$*F$r+F$V*-F$b+F$W*-F$l-F$z*-F$D,F$k[F$T+1]=F$W*F$r+F$V*-F$D+F$z*-F$b-F$$*-F$l,F$k[F$T+2]=F$z*F$r+F$V*-F$l+F$$*-F$D-F$W*-F$b},F$w.mulMatrixByArray=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A,F$X,F$I,F$b,F$D;if(F$T===F$t){for(F$t=F$w._tempArray16_3,F$A=0;F$A<16;++F$A)F$t[F$A]=F$T[F$Y+F$A];F$k=0}for(F$A=0;F$A<4;F$A++)F$X=F$y[F$j+F$A],F$I=F$y[F$j+F$A+4],F$b=F$y[F$j+F$A+8],F$D=F$y[F$j+F$A+12],F$T[F$Y+F$A]=F$X*F$t[F$k+0]+F$I*F$t[F$k+1]+F$b*F$t[F$k+2]+F$D*F$t[F$k+3],F$T[F$Y+F$A+4]=F$X*F$t[F$k+4]+F$I*F$t[F$k+5]+F$b*F$t[F$k+6]+F$D*F$t[F$k+7],F$T[F$Y+F$A+8]=F$X*F$t[F$k+8]+F$I*F$t[F$k+9]+F$b*F$t[F$k+10]+F$D*F$t[F$k+11],F$T[F$Y+F$A+12]=F$X*F$t[F$k+12]+F$I*F$t[F$k+13]+F$b*F$t[F$k+14]+F$D*F$t[F$k+15]},F$w.mulMatrixByArrayFast=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A,F$X,F$I,F$b,F$D;for(F$A=0;F$A<4;F$A++)F$X=F$y[F$j+F$A],F$I=F$y[F$j+F$A+4],F$b=F$y[F$j+F$A+8],F$D=F$y[F$j+F$A+12],F$T[F$Y+F$A]=F$X*F$t[F$k+0]+F$I*F$t[F$k+1]+F$b*F$t[F$k+2]+F$D*F$t[F$k+3],F$T[F$Y+F$A+4]=F$X*F$t[F$k+4]+F$I*F$t[F$k+5]+F$b*F$t[F$k+6]+F$D*F$t[F$k+7],F$T[F$Y+F$A+8]=F$X*F$t[F$k+8]+F$I*F$t[F$k+9]+F$b*F$t[F$k+10]+F$D*F$t[F$k+11],F$T[F$Y+F$A+12]=F$X*F$t[F$k+12]+F$I*F$t[F$k+13]+F$b*F$t[F$k+14]+F$D*F$t[F$k+15]},F$w.mulMatrixByArrayAndMatrixFast=function(F$y,F$j,F$t,F$k,F$T){var F$Y,F$A,F$X,F$I,F$b,F$D=F$t.elements,F$l=F$D[0],F$r=F$D[1],F$$=F$D[2],F$W=F$D[3],F$z=F$D[4],F$V=F$D[5],F$n=F$D[6],F$C=F$D[7],F$M=F$D[8],F$_=F$D[9],F$e=F$D[10],F$v=F$D[11],F$N=F$D[12],F$P=F$D[13],F$d=F$D[14],F$p=F$D[15],F$f=F$j,F$Q=F$j+4,F$m=F$j+8,F$U=F$j+12,F$q=F$T,F$w=F$T+4,F$S=F$T+8,F$H=F$T+12;for(F$Y=0;F$Y<4;F$Y++)F$A=F$y[F$f+F$Y],F$X=F$y[F$Q+F$Y],F$I=F$y[F$m+F$Y],F$b=F$y[F$U+F$Y],F$k[F$q+F$Y]=F$A*F$l+F$X*F$r+F$I*F$$+F$b*F$W,F$k[F$w+F$Y]=F$A*F$z+F$X*F$V+F$I*F$n+F$b*F$C,F$k[F$S+F$Y]=F$A*F$M+F$X*F$_+F$I*F$e+F$b*F$v,F$k[F$H+F$Y]=F$A*F$N+F$X*F$P+F$I*F$d+F$b*F$p},F$w.createAffineTransformationArray=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l){var F$r=F$k+F$k,F$$=F$T+F$T,F$W=F$Y+F$Y,F$z=F$k*F$r,F$V=F$k*F$$,F$n=F$k*F$W,F$C=F$T*F$$,F$M=F$T*F$W,F$_=F$Y*F$W,F$e=F$A*F$r,F$v=F$A*F$$,F$N=F$A*F$W;F$D[F$l+0]=(1-(F$C+F$_))*F$X,F$D[F$l+1]=(F$V+F$N)*F$X,F$D[F$l+2]=(F$n-F$v)*F$X,F$D[F$l+3]=0,F$D[F$l+4]=(F$V-F$N)*F$I,F$D[F$l+5]=(1-(F$z+F$_))*F$I,F$D[F$l+6]=(F$M+F$e)*F$I,F$D[F$l+7]=0,F$D[F$l+8]=(F$n+F$v)*F$b,F$D[F$l+9]=(F$M-F$e)*F$b,F$D[F$l+10]=(1-(F$z+F$C))*F$b,F$D[F$l+11]=0,F$D[F$l+12]=F$y,F$D[F$l+13]=F$j,F$D[F$l+14]=F$t,F$D[F$l+15]=1},F$w.transformVector3ArrayToVector3ArrayCoordinate=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$w._tempArray4_0,F$A=F$y[F$j+0],F$X=F$y[F$j+1],F$I=F$y[F$j+2],F$b=F$t.elements;F$Y[0]=F$A*F$b[0]+F$X*F$b[4]+F$I*F$b[8]+F$b[12],F$Y[1]=F$A*F$b[1]+F$X*F$b[5]+F$I*F$b[9]+F$b[13],F$Y[2]=F$A*F$b[2]+F$X*F$b[6]+F$I*F$b[10]+F$b[14],F$Y[3]=1/(F$A*F$b[3]+F$X*F$b[7]+F$I*F$b[11]+F$b[15]),F$k[F$T+0]=F$Y[0]*F$Y[3],F$k[F$T+1]=F$Y[1]*F$Y[3],F$k[F$T+2]=F$Y[2]*F$Y[3]},F$w.transformLightingMapTexcoordByUV0Array=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$t.elements;F$k[F$T+0]=F$y[F$j+0]*F$Y[0]+F$Y[2],F$k[F$T+1]=(F$y[F$j+1]-1)*F$Y[1]+F$Y[3]},F$w.transformLightingMapTexcoordByUV1Array=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$t.elements;F$k[F$T+0]=F$y[F$j+0]*F$Y[0]+F$Y[2],F$k[F$T+1]=1+F$y[F$j+1]*F$Y[1]+F$Y[3]},F$w.getURLVerion=function(F$y){var F$j=F$y.indexOf("?");return 0<=F$j?F$y.substr(F$j):null},F$w._quaternionCreateFromYawPitchRollArray=function(F$y,F$j,F$t,F$k){var F$T=.5*F$t,F$Y=.5*F$j,F$A=.5*F$y,F$X=Math.sin(F$T),F$I=Math.cos(F$T),F$b=Math.sin(F$Y),F$D=Math.cos(F$Y),F$l=Math.sin(F$A),F$r=Math.cos(F$A);F$k[0]=F$r*F$b*F$I+F$l*F$D*F$X,F$k[1]=F$l*F$D*F$I-F$r*F$b*F$X,F$k[2]=F$r*F$D*F$X-F$l*F$b*F$I,F$k[3]=F$r*F$D*F$I+F$l*F$b*F$X},F$w._createAffineTransformationArray=function(F$y,F$j,F$t,F$k){var F$T=F$j[0],F$Y=F$j[1],F$A=F$j[2],F$X=F$j[3],F$I=F$T+F$T,F$b=F$Y+F$Y,F$D=F$A+F$A,F$l=F$T*F$I,F$r=F$T*F$b,F$$=F$T*F$D,F$W=F$Y*F$b,F$z=F$Y*F$D,F$V=F$A*F$D,F$n=F$X*F$I,F$C=F$X*F$b,F$M=F$X*F$D,F$_=F$t[0],F$e=F$t[1],F$v=F$t[2];F$k[0]=(1-(F$W+F$V))*F$_,F$k[1]=(F$r+F$M)*F$_,F$k[2]=(F$$-F$C)*F$_,F$k[3]=0,F$k[4]=(F$r-F$M)*F$e,F$k[5]=(1-(F$l+F$V))*F$e,F$k[6]=(F$z+F$n)*F$e,F$k[7]=0,F$k[8]=(F$$+F$C)*F$v,F$k[9]=(F$z-F$n)*F$v,F$k[10]=(1-(F$l+F$W))*F$v,F$k[11]=0,F$k[12]=F$y[0],F$k[13]=F$y[1],F$k[14]=F$y[2],F$k[15]=1},F$w._mulMatrixArray=function(F$y,F$j,F$t,F$k){var F$T,F$Y,F$A,F$X,F$I,F$b=F$j.elements,F$D=F$b[0],F$l=F$b[1],F$r=F$b[2],F$$=F$b[3],F$W=F$b[4],F$z=F$b[5],F$V=F$b[6],F$n=F$b[7],F$C=F$b[8],F$M=F$b[9],F$_=F$b[10],F$e=F$b[11],F$v=F$b[12],F$N=F$b[13],F$P=F$b[14],F$d=F$b[15],F$p=F$k,F$f=F$k+4,F$Q=F$k+8,F$m=F$k+12;for(F$T=0;F$T<4;F$T++)F$Y=F$y[F$T],F$A=F$y[F$T+4],F$X=F$y[F$T+8],F$I=F$y[F$T+12],F$t[F$p+F$T]=F$Y*F$D+F$A*F$l+F$X*F$r+F$I*F$$,F$t[F$f+F$T]=F$Y*F$W+F$A*F$z+F$X*F$V+F$I*F$n,F$t[F$Q+F$T]=F$Y*F$C+F$A*F$M+F$X*F$_+F$I*F$e,F$t[F$m+F$T]=F$Y*F$v+F$A*F$N+F$X*F$P+F$I*F$d},F$w.getYawPitchRoll=function(F$y,F$j){F$w.transformQuat(F$Aj.ForwardRH,F$y,F$tj.TEMPVector31),F$w.transformQuat(F$Aj.Up,F$y,F$tj.TEMPVector32);var F$t=F$tj.TEMPVector32.elements;F$w.angleTo(F$Aj.ZERO,F$tj.TEMPVector31,F$tj.TEMPVector33);var F$k=F$tj.TEMPVector33.elements;F$k[0]==Math.PI/2?(F$k[1]=F$w.arcTanAngle(F$t[2],F$t[0]),F$k[2]=0):F$k[0]==-Math.PI/2?(F$k[1]=F$w.arcTanAngle(-F$t[2],-F$t[0]),F$k[2]=0):(F$yj.createRotationY(-F$k[1],F$tj.TEMPMatrix0),F$yj.createRotationX(-F$k[0],F$tj.TEMPMatrix1),F$Aj.transformCoordinate(F$tj.TEMPVector32,F$tj.TEMPMatrix0,F$tj.TEMPVector32),F$Aj.transformCoordinate(F$tj.TEMPVector32,F$tj.TEMPMatrix1,F$tj.TEMPVector32),F$k[2]=F$w.arcTanAngle(F$t[1],-F$t[0])),F$k[1]<=-Math.PI&&(F$k[1]=Math.PI),F$k[2]<=-Math.PI&&(F$k[2]=Math.PI),F$k[1]>=Math.PI&&F$k[2]>=Math.PI&&(F$k[1]=0,F$k[2]=0,F$k[0]=Math.PI-F$k[0]),F$j[0]=F$k[1],F$j[1]=F$k[0],F$j[2]=F$k[2]},F$w.arcTanAngle=function(F$y,F$j){return 0==F$y?1==F$j?Math.PI/2:-Math.PI/2:0<F$y?Math.atan(F$j/F$y):F$y<0?0<F$j?Math.atan(F$j/F$y)+Math.PI:Math.atan(F$j/F$y)-Math.PI:0},F$w.angleTo=function(F$y,F$j,F$t){F$Aj.subtract(F$j,F$y,F$tj.TEMPVector30),F$Aj.normalize(F$tj.TEMPVector30,F$tj.TEMPVector30),F$t.elements[0]=Math.asin(F$tj.TEMPVector30.y),F$t.elements[1]=F$w.arcTanAngle(-F$tj.TEMPVector30.z,-F$tj.TEMPVector30.x)},F$w.transformQuat=function(F$y,F$j,F$t){var F$k=F$t.elements,F$T=F$y.elements,F$Y=F$j,F$A=F$T[0],F$X=F$T[1],F$I=F$T[2],F$b=F$Y[0],F$D=F$Y[1],F$l=F$Y[2],F$r=F$Y[3],F$$=F$r*F$A+F$D*F$I-F$l*F$X,F$W=F$r*F$X+F$l*F$A-F$b*F$I,F$z=F$r*F$I+F$b*F$X-F$D*F$A,F$V=-F$b*F$A-F$D*F$X-F$l*F$I;F$k[0]=F$$*F$r+F$V*-F$b+F$W*-F$l-F$z*-F$D,F$k[1]=F$W*F$r+F$V*-F$D+F$z*-F$b-F$$*-F$l,F$k[2]=F$z*F$r+F$V*-F$l+F$$*-F$D-F$W*-F$b},F$w.quaterionNormalize=function(F$y,F$j){var F$t=F$y[0],F$k=F$y[1],F$T=F$y[2],F$Y=F$y[3],F$A=F$t*F$t+F$k*F$k+F$T*F$T+F$Y*F$Y;0<F$A&&(F$A=1/Math.sqrt(F$A),F$j[0]=F$t*F$A,F$j[1]=F$k*F$A,F$j[2]=F$T*F$A,F$j[3]=F$Y*F$A)},F$w.matrix4x4MultiplyFFF=function(F$y,F$j,F$t){var F$k,F$T,F$Y,F$A,F$X;if(F$t===F$j)for(F$j=new Float32Array(16),F$k=0;F$k<16;++F$k)F$j[F$k]=F$t[F$k];for(F$k=0;F$k<4;F$k++)F$T=F$y[F$k],F$Y=F$y[F$k+4],F$A=F$y[F$k+8],F$X=F$y[F$k+12],F$t[F$k]=F$T*F$j[0]+F$Y*F$j[1]+F$A*F$j[2]+F$X*F$j[3],F$t[F$k+4]=F$T*F$j[4]+F$Y*F$j[5]+F$A*F$j[6]+F$X*F$j[7],F$t[F$k+8]=F$T*F$j[8]+F$Y*F$j[9]+F$A*F$j[10]+F$X*F$j[11],F$t[F$k+12]=F$T*F$j[12]+F$Y*F$j[13]+F$A*F$j[14]+F$X*F$j[15]},F$w.matrix4x4MultiplyMFM=function(F$y,F$j,F$t){F$w.matrix4x4MultiplyFFF(F$y.elements,F$j,F$t.elements)},F$l(F$w,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new F$Aj},"_tempVector3_1",function(){return this._tempVector3_1=new F$Aj},"_tempVector3_2",function(){return this._tempVector3_2=new F$Aj},"_tempVector3_3",function(){return this._tempVector3_3=new F$Aj},"_tempVector3_4",function(){return this._tempVector3_4=new F$Aj},"_tempVector3_5",function(){return this._tempVector3_5=new F$Aj},"_tempVector3_6",function(){return this._tempVector3_6=new F$Aj},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),F$w}(),F$nj=function(){function F$U(){}return F$$(F$U,"Laya3D"),F$U._cancelLoadByUrl=function(F$y){F$e.loader.cancelLoadByUrl(F$y),F$U._innerFirstLevelLoaderManager.cancelLoadByUrl(F$y),F$U._innerSecondLevelLoaderManager.cancelLoadByUrl(F$y),F$U._innerThirdLevelLoaderManager.cancelLoadByUrl(F$y),F$U._innerFourthLevelLoaderManager.cancelLoadByUrl(F$y)},F$U._changeWebGLSize=function(F$y,F$j){F$m.onStageResize(F$y,F$j),F$c.clientWidth=F$y,F$c.clientHeight=F$j},F$U.__init__=function(){var F$y=F$j.createMap;F$y.lh=[F$Hj,"SPRITE3DHIERARCHY"],F$y.ls=[F$Sj,"SPRITE3DHIERARCHY"],F$y.lm=[F$Jj,"MESH"],F$y.lmat=[F$xj,"MATERIAL"],F$y.jpg=[F$Oj,"nativeimage"],F$y.jpeg=[F$Oj,"nativeimage"],F$y.png=[F$Oj,"nativeimage"],F$y.pkm=[F$Oj,"arraybuffer"],F$y.raw=[F$gj,"arraybuffer"],F$y.mipmaps=[F$gj,"arraybuffer"],F$n.parserMap.SPRITE3DHIERARCHY=F$U._loadHierarchy,F$n.parserMap.MESH=F$U._loadMesh,F$n.parserMap.MATERIAL=F$U._loadMaterial,F$n.parserMap.TEXTURECUBE=F$U._loadTextureCube,F$n.parserMap.TERRAIN=F$U._loadTerrain,F$U._innerFirstLevelLoaderManager.on("error",null,F$U._eventLoadManagerError),F$U._innerSecondLevelLoaderManager.on("error",null,F$U._eventLoadManagerError),F$U._innerThirdLevelLoaderManager.on("error",null,F$U._eventLoadManagerError),F$U._innerFourthLevelLoaderManager.on("error",null,F$U._eventLoadManagerError)},F$U.READ_BLOCK=function(){return F$U._readData.pos+=4,!0},F$U.READ_DATA=function(){return F$U._DATA.offset=F$U._readData.getUint32(),F$U._DATA.size=F$U._readData.getUint32(),!0},F$U.READ_STRINGS=function(){var F$y=[],F$j={offset:0,size:0};F$j.offset=F$U._readData.getUint16(),F$j.size=F$U._readData.getUint16();F$U._readData.pos;F$U._readData.pos=F$j.offset+F$U._DATA.offset;for(var F$t=0;F$t<F$j.size;F$t++){var F$k=F$U._readData.readUTFString();-1===F$k.lastIndexOf(".lmat")&&-1===F$k.lastIndexOf(".lpbr")||F$y.push(F$k)}return F$y},F$U.formatRelativePath=function(F$y,F$j){var F$t;if("."===F$j.charAt(0)){for(var F$k=(F$y+F$j).split("/"),F$T=0,F$Y=F$k.length;F$T<F$Y;F$T++)if(".."==F$k[F$T]){var F$A=F$T-1;0<F$A&&".."!==F$k[F$A]&&(F$k.splice(F$A,2),F$T-=2)}F$t=F$k.join("/")}else F$t=F$y+F$j;return null!=F$Q.customFormat&&(F$t=F$Q.customFormat(F$t,null)),F$t},F$U._eventLoadManagerError=function(F$y){F$e.loader.event("error",F$y)},F$U._addHierarchyInnerUrls=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A=F$U.formatRelativePath(F$k,F$T);F$t&&(F$A+=F$t),F$y.push({url:F$A,clas:F$Y}),F$j[F$T]=F$A},F$U._getSprite3DHierarchyInnerUrls=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){var F$X,F$I=0,F$b=0;switch(F$y.type){case"Scene":var F$D=F$y.customProps.lightmaps;for(F$I=0,F$b=F$D.length;F$I<F$b;F$I++){var F$l=F$D[F$I].replace(".exr",".png");F$U._addHierarchyInnerUrls(F$k,F$T,F$Y,F$A,F$l,F$Oj)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var F$r;if(F$y.instanceParams)(F$r=F$y.instanceParams.loadPath)&&F$U._addHierarchyInnerUrls(F$j,F$T,F$Y,F$A,F$r,F$Jj);else{(F$r=(F$X=F$y.customProps).meshPath)&&F$U._addHierarchyInnerUrls(F$j,F$T,F$Y,F$A,F$r,F$Jj);var F$$=F$X.materials;if(F$$)for(F$I=0,F$b=F$$.length;F$I<F$b;F$I++){for(var F$W=F$$[F$I],F$z=F$W.type.split("."),F$V=F$q.window,F$n=0,F$C=F$z.length;F$n<F$C;++F$n){F$V=F$V[this.clasPaths[F$n]]}if("function"!=typeof F$V)throw"_getSprite3DHierarchyInnerUrls 错误: "+F$W.type+" 不是类";F$U._addHierarchyInnerUrls(F$t,F$T,F$Y,F$A,F$W.path,F$V)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var F$M=(F$X=F$y.customProps).meshPath;F$M&&F$U._addHierarchyInnerUrls(F$j,F$T,F$Y,F$A,F$M,F$Jj);var F$_=F$X.material;if(F$_){F$z=F$_.type.split("."),F$V=F$q.window;for(F$n=0,F$C=F$z.length;F$n<F$C;++F$n){F$V=F$V[this.clasPaths[F$n]]}F$U._addHierarchyInnerUrls(F$t,F$T,F$Y,F$A,F$_.path,F$V)}else{var F$e=F$X.materialPath;if(F$e)F$U._addHierarchyInnerUrls(F$t,F$T,F$Y,F$A,F$e,ShurikenParticleMaterial);else{var F$v=F$X.texturePath;F$v&&F$U._addHierarchyInnerUrls(F$k,F$T,F$Y,F$A,F$v,F$Oj)}}break;case"Terrain":F$U._addHierarchyInnerUrls(F$k,F$T,F$Y,F$A,F$y.customProps.dataPath,TerrainRes)}var F$N=F$y.components;for(var F$P in F$N){var F$d=F$N[F$P];switch(F$P){case"Animator":var F$p=F$d.avatarPath;if(F$p)F$U._addHierarchyInnerUrls(F$k,F$T,F$Y,F$A,F$p,Avatar);else{var F$f=F$d.avatar;F$f&&F$U._addHierarchyInnerUrls(F$k,F$T,F$Y,F$A,F$f.path,Avatar)}var F$Q=F$d.clipPaths;for(F$I=0,F$b=F$Q.length;F$I<F$b;F$I++)F$U._addHierarchyInnerUrls(F$k,F$T,F$Y,F$A,F$Q[F$I],AnimationClip)}}var F$m=F$y.child;for(F$I=0,F$b=F$m.length;F$I<F$b;F$I++)F$U._getSprite3DHierarchyInnerUrls(F$m[F$I],F$j,F$t,F$k,F$T,F$Y,F$A)},F$U._loadHierarchy=function(F$y){F$y.on("loaded",null,F$U._onHierarchylhLoaded,[F$y,F$y._class._getGroup()]),F$y.load(F$y.url,"json",!1,null,!0)},F$U._onHierarchylhLoaded=function(F$y,F$j,F$t){if(F$y._class.destroyed)F$y.endLoad();else{var F$k=F$y.url,F$T=F$Vj.getURLVerion(F$k),F$Y=F$Q.getPath(F$k),F$A=[],F$X=[],F$I=[],F$b={};F$U._getSprite3DHierarchyInnerUrls(F$t,F$A,F$X,F$I,F$b,F$T,F$Y);var F$D=F$A.length+F$X.length+F$I.length,F$l=F$D+1,F$r=1/F$l;if(F$U._onProcessChange(F$y,0,F$r,1),0<F$I.length){var F$$=F$D/F$l,F$W=F$f.create(null,F$U._onProcessChange,[F$y,F$r,F$$],!1);F$U._innerFourthLevelLoaderManager.create(F$I,F$f.create(null,F$U._onHierarchyInnerForthLevResouLoaded,[F$y,F$j,F$W,F$t,F$b,F$A,F$X,F$r+F$$*F$I.length,F$$]),F$W,null,null,1,!0,F$j)}else F$U._onHierarchyInnerForthLevResouLoaded(F$y,F$j,null,F$t,F$b,F$A,F$X,F$r,F$$)}},F$U._onHierarchyInnerForthLevResouLoaded=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){if(F$y._class.destroyed)F$y.endLoad();else if(F$t&&F$t.recover(),0<F$A.length){var F$b=F$f.create(null,F$U._onProcessChange,[F$y,F$X,F$I],!1);F$U._innerSecondLevelLoaderManager.create(F$A,F$f.create(null,F$U._onHierarchyInnerSecondLevResouLoaded,[F$y,F$j,F$b,F$k,F$T,F$Y,F$X+F$I*F$A.length,F$I]),F$t,null,null,1,!0,F$j)}else F$U._onHierarchyInnerSecondLevResouLoaded(F$y,F$j,null,F$k,F$T,F$Y,F$X,F$I)},F$U._onHierarchyInnerSecondLevResouLoaded=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X){if(F$y._class.destroyed)F$y.endLoad();else if(F$t&&F$t.recover(),0<F$Y.length){var F$I=F$f.create(null,F$U._onProcessChange,[F$y,F$A,F$X],!1);F$U._innerFirstLevelLoaderManager.create(F$Y,F$f.create(null,F$U._onHierarchyInnerFirstLevResouLoaded,[F$y,F$I,F$k,F$T]),F$t,null,null,1,!0,F$j)}else F$U._onHierarchyInnerFirstLevResouLoaded(F$y,null,F$k,F$T)},F$U._onHierarchyInnerFirstLevResouLoaded=function(F$y,F$j,F$t,F$k){F$j&&F$j.recover(),F$y.endLoad([F$t,F$k])},F$U._loadTerrain=function(F$y){F$y.on("loaded",null,F$U._onTerrainLtLoaded,[F$y,F$y._class._getGroup()]),F$y.load(F$y.url,"json",!1,null,!0)},F$U._onTerrainLtLoaded=function(F$y,F$j,F$t){if(F$y._class.destroyed)F$y.endLoad();else{var F$k,F$T,F$Y=F$y.url,F$A=F$Vj.getURLVerion(F$Y),F$X=F$Q.getPath(F$Y),F$I=[],F$b={},F$D=0,F$l=0,F$r=F$t.heightData;F$k=F$r.url,F$T=F$U.formatRelativePath(F$X,F$k),F$A&&(F$T+=F$A),F$k=F$b[F$k]=F$T;var F$$=F$t.detailTexture;for(F$D=0,F$l=F$$.length;F$D<F$l;F$D++)F$I.push({url:F$$[F$D].diffuse});var F$W=F$t.normalMap;for(F$D=0,F$l=F$W.length;F$D<F$l;F$D++)F$I.push({url:F$W[F$D]});var F$z=F$t.alphaMap;for(F$D=0,F$l=F$z.length;F$D<F$l;F$D++)F$I.push({url:F$z[F$D],params:[!1,!1,6408,!0]});for(F$D=0,F$l=F$I.length;F$D<F$l;F$D++){var F$V=F$I[F$D].url;F$T=F$U.formatRelativePath(F$X,F$V),F$A&&(F$T+=F$A),F$I[F$D].url=F$T,F$b[F$V]=F$T}var F$n=F$I.length,F$C=F$n+2,F$M=1/F$C;F$U._onProcessChange(F$y,0,F$M,1);var F$_={heightMapLoaded:!1,texturesLoaded:!1},F$e=F$f.create(null,F$U._onProcessChange,[F$y,F$M,F$M],!1);F$U._innerFourthLevelLoaderManager.create(F$k,F$f.create(null,F$U._onTerrainHeightMapLoaded,[F$y,F$e,F$t,F$b,F$_]),F$e,null,[F$r.numX,F$r.numZ,F$r.bitType,F$r.value],1,!0,F$j);var F$v=F$f.create(null,F$U._onProcessChange,[F$y,2*F$M,F$n/F$C],!1);F$U._innerFourthLevelLoaderManager.create(F$I,F$f.create(null,F$U._onTerrainTexturesLoaded,[F$y,F$v,F$t,F$b,F$_]),F$v,null,null,1,!0,F$j)}},F$U._onTerrainHeightMapLoaded=function(F$y,F$j,F$t,F$k,F$T){F$T.heightMapLoaded=!0,F$T.texturesLoaded&&(F$y.endLoad([F$t,F$k]),F$j.recover())},F$U._onTerrainTexturesLoaded=function(F$y,F$j,F$t,F$k,F$T){F$T.texturesLoaded=!0,F$T.heightMapLoaded&&(F$y.endLoad([F$t,F$k]),F$j.recover())},F$U._loadMesh=function(F$y){F$y.on("loaded",null,F$U._onMeshLmLoaded,[F$y,F$y._class._getGroup()]),F$y.load(F$y.url,"arraybuffer",!1,null,!0)},F$U._onMeshLmLoaded=function(F$y,F$j,F$t){if(F$y._class.destroyed)F$y.endLoad();else{var F$k,F$T,F$Y,F$A=F$y.url,F$X=F$Vj.getURLVerion(F$A),F$I=F$Q.getPath(F$A),F$b={},F$D=0,F$l=0;switch((F$U._readData=new F$v(F$t)).pos=0,F$U._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var F$r=F$U._readData.getUint32();F$U._readData.pos=F$U._readData.pos+4,F$l=F$U._readData.getUint16(),F$U._readData.pos=F$U._readData.pos+8*F$l;var F$$=F$U._readData.getUint32();for(F$l=F$U._readData.getUint16(),F$U._readData.pos=F$r+F$$,F$k=[],F$D=0;F$D<F$l;F$D++){var F$W=F$U._readData.readUTFString();-1!==F$W.lastIndexOf(".lmat")&&F$k.push(F$W)}break;default:for(F$U.READ_BLOCK(),F$D=0;F$D<2;F$D++){var F$z=F$U._readData.getUint16(),F$V=F$U._strings[F$z],F$n=F$U["READ_"+F$V];if(null==F$n)throw new Error("model file err,no this function:"+F$z+" "+F$V);1===F$D?F$k=F$n.call():F$n.call()}}for(F$D=0,F$Y=F$k.length;F$D<F$Y;F$D++){var F$C=F$k[F$D];F$T=F$U.formatRelativePath(F$I,F$C),F$X&&(F$T+=F$X),F$k[F$D]=F$T,F$b[F$C]=F$T}if(0<F$k.length){F$U._onProcessChange(F$y,0,.5,1);var F$M=F$f.create(null,F$U._onProcessChange,[F$y,.5,.5],!1);F$U._innerSecondLevelLoaderManager.create(F$k,F$f.create(null,F$U._onMeshMateialLoaded,[F$y,F$M,F$t,F$b]),F$M,null,null,1,!0,F$j)}else F$y.endLoad([F$t,F$b])}},F$U._onMeshMateialLoaded=function(F$y,F$j,F$t,F$k){F$y.endLoad([F$t,F$k]),F$j.recover()},F$U._getMaterialTexturePath=function(F$y,F$j,F$t){var F$k=F$y.length-4;return F$y.indexOf(".dds")!=F$k&&F$y.indexOf(".tga")!=F$k&&F$y.indexOf(".exr")!=F$k&&F$y.indexOf(".DDS")!=F$k&&F$y.indexOf(".TGA")!=F$k&&F$y.indexOf(".EXR")!=F$k||(F$y=F$y.substr(0,F$k)+".png"),F$y=F$U.formatRelativePath(F$t,F$y),F$j&&(F$y+=F$j),F$y},F$U._loadMaterial=function(F$y){F$y.on("loaded",null,F$U._onMaterilLmatLoaded,[F$y,F$y._class._getGroup()]),F$y.load(F$y.url,"json",!1,null,!0)},F$U._onMaterilLmatLoaded=function(F$y,F$j,F$t){if(F$y._class.destroyed)F$y.endLoad();else{var F$k,F$T=F$y.url,F$Y=F$Vj.getURLVerion(F$T),F$A=F$Q.getPath(F$T),F$X=[],F$I={},F$b=F$t.customProps,F$D=F$t.version;if(F$D)switch(F$D){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var F$l=F$t.props.textures,F$r=0,F$$=F$l.length;F$r<F$$;F$r++){var F$W=F$l[F$r],F$z=F$W.path;if(F$z){var F$V=F$z.length-4;F$z.indexOf(".exr")!=F$V&&F$z.indexOf(".EXR")!=F$V||(F$z=F$z.substr(0,F$V)+".png"),F$k=F$U.formatRelativePath(F$A,F$z),F$Y&&(F$k+=F$Y),F$X.push({url:F$k,params:F$W.params}),F$I[F$z]=F$k}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var F$n=F$b.diffuseTexture.texture2D;if(F$n&&(F$k=F$U._getMaterialTexturePath(F$n,F$Y,F$A),F$X.push(F$k),F$I[F$n]=F$k),F$b.normalTexture){var F$C=F$b.normalTexture.texture2D;F$C&&(F$k=F$U._getMaterialTexturePath(F$C,F$Y,F$A),F$X.push(F$k),F$I[F$C]=F$k)}if(F$b.specularTexture){var F$M=F$b.specularTexture.texture2D;F$M&&(F$k=F$U._getMaterialTexturePath(F$M,F$Y,F$A),F$X.push(F$k),F$I[F$M]=F$k)}if(F$b.emissiveTexture){var F$_=F$b.emissiveTexture.texture2D;F$_&&(F$k=F$U._getMaterialTexturePath(F$_,F$Y,F$A),F$X.push(F$k),F$I[F$_]=F$k)}if(F$b.ambientTexture){var F$e=F$b.ambientTexture.texture2D;F$e&&(F$k=F$U._getMaterialTexturePath(F$e,F$Y,F$A),F$X.push(F$k),F$I[F$e]=F$k)}if(F$b.reflectTexture){var F$v=F$b.reflectTexture.texture2D;F$v&&(F$k=F$U._getMaterialTexturePath(F$v,F$Y,F$A),F$X.push(F$k),F$I[F$v]=F$k)}}var F$N=F$X.length,F$P=F$N+1,F$d=1/F$P;if(F$U._onProcessChange(F$y,0,F$d,1),0<F$N){var F$p=F$f.create(null,F$U._onProcessChange,[F$y,F$d,F$N/F$P],!1);F$U._innerFourthLevelLoaderManager.create(F$X,F$f.create(null,F$U._onMateialTexturesLoaded,[F$y,F$p,F$t,F$I]),F$p,F$Oj,null,1,!0,F$j)}else F$U._onMateialTexturesLoaded(F$y,null,F$t,null)}},F$U._onMateialTexturesLoaded=function(F$y,F$j,F$t,F$k){F$y.endLoad([F$t,F$k]),F$j&&F$j.recover()},F$U._loadTextureCube=function(F$y){F$y.on("loaded",null,F$U._onTextureCubeLtcLoaded,[F$y]),F$y.load(F$y.url,"json",!1,null,!0)},F$U._onTextureCubeLtcLoaded=function(F$y,F$j){if(F$y._class.destroyed)F$y.endLoad();else{var F$t=F$Q.getPath(F$y.url),F$k=[F$U.formatRelativePath(F$t,F$j.px),F$U.formatRelativePath(F$t,F$j.nx),F$U.formatRelativePath(F$t,F$j.py),F$U.formatRelativePath(F$t,F$j.ny),F$U.formatRelativePath(F$t,F$j.pz),F$U.formatRelativePath(F$t,F$j.nz)];F$U._onProcessChange(F$y,0,1/7,1);var F$T=F$f.create(null,F$U._onProcessChange,[F$y,1/7,6/7],!1);F$U._innerFourthLevelLoaderManager.load(F$k,F$f.create(null,F$U._onTextureCubeImagesLoaded,[F$y,F$k,F$T]),F$T,"nativeimage")}},F$U._onTextureCubeImagesLoaded=function(F$y,F$j,F$t){var F$k=[];F$k.length=6;for(var F$T=0;F$T<6;F$T++){var F$Y=F$j[F$T];F$k[F$T]=F$n.getRes(F$Y),F$n.clearRes(F$Y)}F$y.endLoad(F$k),F$t.recover()},F$U._onProcessChange=function(F$y,F$j,F$t,F$k){(F$k=F$j+F$k*F$t)<1&&F$y.event("progress",F$k)},F$U.init=function(F$y,F$j,F$t,F$k,F$T,F$Y){if(void 0===F$t&&(F$t=!1),void 0===F$k&&(F$k=!1),void 0===F$T&&(F$T=!0),void 0===F$Y&&(F$Y=!0),F$C.update3DLoop=function(){},F$C.cancelLoadByUrl=function(F$y){F$U._cancelLoadByUrl(F$y)},F$I.isAntialias=F$t,F$I.isAlpha=F$k,F$I.premultipliedAlpha=F$T,F$I.isStencil=F$Y,!F$m.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");F$C.changeWebGLSize=F$U._changeWebGLSize,F$z.is3DMode=!0,F$e.init(F$y,F$j),F$w.__init__(),F$lj.__init__(),F$Bj.__init__(),F$a.__init__(),F$U.__init__(),F$A.maxTextureCount=2,(F$U.debugMode||F$L.debugMode)&&(F$U._debugPhasorSprite=new F$Z)},F$U.HIERARCHY="SPRITE3DHIERARCHY",F$U.MESH="MESH",F$U.MATERIAL="MATERIAL",F$U.PBRMATERIAL="PBRMTL",F$U.TEXTURECUBE="TEXTURECUBE",F$U.TERRAIN="TERRAIN",F$U._readData=null,F$U._debugPhasorSprite=null,F$U.debugMode=!1,F$l(F$U,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new F$j},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new F$j},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new F$j},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new F$j}]),F$U}(),F$Cj=function(F$y){function F$T(F$y){F$T.__super.call(this),this._owner=F$y,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}F$$(F$T,"laya.d3.animation.AnimationTransform3D",F$Y);var F$j=F$T.prototype;return F$j._getlocalMatrix=function(){return this._localUpdate&&(F$Vj._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},F$j._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._onWorldTransform()}},F$j._setWorldMatrixAndUpdate=function(F$y){if(this._worldMatrix=F$y,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var F$j=this._getlocalMatrix(),F$t=0;F$t<16;++F$t)this._worldMatrix[F$t]=F$j[F$t];else F$Vj.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},F$j._setWorldMatrixNoUpdate=function(F$y){this._worldMatrix=F$y},F$j._setWorldMatrixIgnoreUpdate=function(F$y){this._worldMatrix=F$y,this._worldUpdate=!1},F$j.getLocalPosition=function(){return this._localPosition},F$j.setLocalPosition=function(F$y){if(this._parent)this._localPosition=F$y,this._localUpdate=!0,this._onWorldTransform();else{var F$j=this._entity.owner._transform,F$t=this._entity.localPosition,F$k=F$t.elements;F$k[0]=F$y[0],F$k[1]=F$y[1],F$k[2]=F$y[2],F$j.localPosition=F$t}},F$j.getLocalRotation=function(){if(this._localQuaternionUpdate){var F$y=this._localRotationEuler;F$Vj._quaternionCreateFromYawPitchRollArray(F$y[1]/F$T._angleToRandin,F$y[0]/F$T._angleToRandin,F$y[2]/F$T._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},F$j.setLocalRotation=function(F$y){if(this._parent)this._localRotation=F$y,F$Vj.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$j=this._entity.owner._transform,F$t=this._entity.localRotation,F$k=F$t.elements;F$k[0]=F$y[0],F$k[1]=F$y[1],F$k[2]=F$y[2],F$k[3]=F$y[3],F$j.localRotation=F$t}},F$j.getLocalScale=function(){return this._localScale},F$j.setLocalScale=function(F$y){if(this._parent)this._localScale=F$y,this._localUpdate=!0,this._onWorldTransform();else{var F$j=this._entity.owner._transform,F$t=this._entity.localScale,F$k=F$t.elements;F$k[0]=F$y[0],F$k[1]=F$y[1],F$k[2]=F$y[2],F$j.localScale=F$t}},F$j.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){F$Vj.getYawPitchRoll(this._localRotation,F$T._tempVector3);var F$y=F$T._tempVector3,F$j=this._localRotationEuler;F$j[0]=F$y[1]*F$T._angleToRandin,F$j[1]=F$y[0]*F$T._angleToRandin,F$j[2]=F$y[2]*F$T._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},F$j.setLocalRotationEuler=function(F$y){if(this._parent)F$Vj._quaternionCreateFromYawPitchRollArray(F$y[1]/F$T._angleToRandin,F$y[0]/F$T._angleToRandin,F$y[2]/F$T._angleToRandin,this._localRotation),this._localRotationEuler=F$y,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var F$j=this._entity.owner._transform,F$t=this._entity.localRotationEuler,F$k=F$t.elements;F$k[0]=F$y[0],F$k[1]=F$y[1],F$k[2]=F$y[2],F$j.localRotationEuler=F$t}},F$j.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)F$Vj.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var F$y=this._getlocalMatrix(),F$j=0;F$j<16;++F$j)this._worldMatrix[F$j]=F$y[F$j];this._worldUpdate=!1}return this._worldMatrix},F$j.setParent=function(F$y){if(this._parent!==F$y){if(this._parent){var F$j=this._parent._childs,F$t=F$j.indexOf(this);F$j.splice(F$t,1)}F$y&&(F$y._childs.push(this),F$y&&this._onWorldTransform()),this._parent=F$y}},F$l(F$T,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$T}(),F$Mj=function(F$y){function F$j(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,F$j.__super.call(this),this._destroyed=!1,this._id=F$j._uniqueIDCounter,F$j._uniqueIDCounter++}F$$(F$j,"laya.d3.component.Component3D",F$Y);var F$t=F$j.prototype;return F$e.imps(F$t,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),F$t._initialize=function(F$y){this._owner=F$y,this._enable=!0,this.started=!1,this._load(F$y)},F$t._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},F$t._load=function(F$y){},F$t._start=function(F$y){},F$t._update=function(F$y){},F$t._lateUpdate=function(F$y){},F$t._preRenderUpdate=function(F$y){},F$t._postRenderUpdate=function(F$y){},F$t._unload=function(F$y){this.offAll()},F$t._cloneTo=function(F$y){},F$W(0,F$t,"id",function(){return this._id}),F$W(0,F$t,"destroyed",function(){return this._destroyed}),F$W(0,F$t,"owner",function(){return this._owner}),F$W(0,F$t,"enable",function(){return this._enable},function(F$y){this._enable!==F$y&&(this._enable=F$y,this.event("enablechanged",this._enable))}),F$W(0,F$t,"isSingleton",function(){return F$j._isSingleton}),F$j._isSingleton=!0,F$j._uniqueIDCounter=1,F$j}(),F$_j=function(F$y){function F$j(){this._destroyed=!1,F$j.__super.call(this),this._destroyed=!1}F$$(F$j,"laya.d3.core.GeometryFilter",F$Y);var F$t=F$j.prototype;return F$e.imps(F$t,{"laya.resource.IDestroy":!0}),F$t._destroy=function(){this.offAll(),this._destroyed=!0},F$W(0,F$t,"_isAsyncLoaded",function(){return!0}),F$W(0,F$t,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),F$W(0,F$t,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),F$W(0,F$t,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),F$W(0,F$t,"destroyed",function(){return this._destroyed}),F$j}(),F$ej=function(F$y){function F$k(F$y){F$k.__super.call(this),this._id=++F$k._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new F$Ly(new F$Aj,new F$Aj),this._boundingBoxCenter=new F$Aj,this._boundingSphere=new F$iy(new F$Aj,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=F$y,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}F$$(F$k,"laya.d3.core.render.BaseRender",F$Y);var F$j=F$k.prototype;return F$e.imps(F$j,{"laya.resource.IDestroy":!0}),F$j._changeMaterialReference=function(F$y,F$j){F$y&&F$y._removeReference(),F$j._addReference()},F$j._getInstanceMaterial=function(F$y,F$j){var F$t=new F$y.constructor;return F$y.cloneTo(F$t),F$t.name=F$t.name+"(Instance)",this._materialsInstance[F$j]=!0,this._changeMaterialReference(this._materials[F$j],F$t),this._materials[F$j]=F$t},F$j._setShaderValuelightMap=function(F$y){this._setShaderValueTexture(3,F$y)},F$j._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},F$j._renderRenderableBoundBox=function(){var F$y=F$nj._debugPhasorSprite,F$j=this.boundingBox,F$t=F$k._tempBoundBoxCorners;F$j.getCorners(F$t),F$y.line(F$t[0],F$k._greenColor,F$t[1],F$k._greenColor),F$y.line(F$t[2],F$k._greenColor,F$t[3],F$k._greenColor),F$y.line(F$t[4],F$k._greenColor,F$t[5],F$k._greenColor),F$y.line(F$t[6],F$k._greenColor,F$t[7],F$k._greenColor),F$y.line(F$t[0],F$k._greenColor,F$t[3],F$k._greenColor),F$y.line(F$t[1],F$k._greenColor,F$t[2],F$k._greenColor),F$y.line(F$t[2],F$k._greenColor,F$t[6],F$k._greenColor),F$y.line(F$t[3],F$k._greenColor,F$t[7],F$k._greenColor),F$y.line(F$t[0],F$k._greenColor,F$t[4],F$k._greenColor),F$y.line(F$t[1],F$k._greenColor,F$t[5],F$k._greenColor),F$y.line(F$t[4],F$k._greenColor,F$t[7],F$k._greenColor),F$y.line(F$t[5],F$k._greenColor,F$t[6],F$k._greenColor)},F$j._calculateBoundingSphere=function(){throw"BaseRender: must override it."},F$j._calculateBoundingBox=function(){throw"BaseRender: must override it."},F$j._setShaderValueTexture=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j)},F$j._setShaderValueMatrix4x4=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j?F$j.elements:null)},F$j._setShaderValueColor=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j?F$j.elements:null)},F$j._setShaderValueBuffer=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j)},F$j._setShaderValueInt=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j)},F$j._setShaderValueBool=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j)},F$j._setShaderValueNumber=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j)},F$j._setShaderValueVector2=function(F$y,F$j){this._owner._shaderValues.setValue(F$y,F$j?F$j.elements:null)},F$j._addShaderDefine=function(F$y){this._owner._shaderDefineValue|=F$y},F$j._removeShaderDefine=function(F$y){this._owner._shaderDefineValue&=~F$y},F$j._renderUpdate=function(F$y){return!0},F$j._applyLightMapParams=function(){if(0<=this._lightmapIndex){var F$y=this._owner.scene;if(F$y){var F$j=F$y.getlightmaps()[this._lightmapIndex];F$j?(this._addShaderDefine(F$Zj.SAHDERDEFINE_LIGHTMAP),F$j.loaded?this._setShaderValuelightMap(F$j):F$j.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(F$Zj.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$Zj.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(F$Zj.SAHDERDEFINE_LIGHTMAP)},F$j._updateOctreeNode=function(){var F$y=this._treeNode;F$y&&this._octreeNodeNeedChange&&(F$y.updateObject(this),this._octreeNodeNeedChange=!1)},F$j._destroy=function(){this.offAll();var F$y=0,F$j=0;for(F$y=0,F$j=this._renderElements.length;F$y<F$j;F$y++)this._renderElements[F$y]._destroy();for(F$y=0,F$j=this._materials.length;F$y<F$j;F$y++)this._materials[F$y]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},F$W(0,F$j,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),F$W(0,F$j,"id",function(){return this._id}),F$W(0,F$j,"material",function(){var F$y=this._materials[0];if(F$y&&!this._materialsInstance[0]){var F$j=this._getInstanceMaterial(F$y,0);this.event("materialchanged",[this,0,F$j])}return this._materials[0]},function(F$y){this.sharedMaterial=F$y}),F$W(0,F$j,"sharedMaterial",function(){return this._materials[0]},function(F$y){var F$j=this._materials[0];F$j!==F$y&&(this._materials[0]=F$y,this._materialsInstance[0]=!1,this._changeMaterialReference(F$j,F$y),this.event("materialchanged",[this,0,F$y]))}),F$W(0,F$j,"lightmapIndex",function(){return this._lightmapIndex},function(F$y){this._lightmapIndex=F$y,this._applyLightMapParams()}),F$W(0,F$j,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(F$y){this._lightmapScaleOffset=F$y,this._setShaderValueColor(2,F$y),this._addShaderDefine(F$Zj.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),F$W(0,F$j,"enable",function(){return this._enable},function(F$y){this._enable=F$y,this.event("enablechanged",[this,F$y])}),F$W(0,F$j,"materials",function(){for(var F$y=0,F$j=this._materials.length;F$y<F$j;F$y++)if(!this._materialsInstance[F$y]){var F$t=this._getInstanceMaterial(this._materials[F$y],F$y);this.event("materialchanged",[this,F$y,F$t])}return this._materials.slice()},function(F$y){this.sharedMaterials=F$y}),F$W(0,F$j,"sharedMaterials",function(){return this._materials.slice()},function(F$y){if(!F$y)throw new Error("MeshRender: shadredMaterials value can't be null.");var F$j=F$y.length;this._materialsInstance.length=F$j;for(var F$t=0;F$t<F$j;F$t++){var F$k=this._materials[F$t];F$k!==F$y[F$t]&&(this._materialsInstance[F$t]=!1,this._changeMaterialReference(F$k,F$y[F$t]),this.event("materialchanged",[this,F$t,F$y[F$t]]))}this._materials=F$y}),F$W(0,F$j,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),F$W(0,F$j,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var F$y=this.boundingBox;F$Aj.add(F$y.min,F$y.max,this._boundingBoxCenter),F$Aj.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),F$W(0,F$j,"receiveShadow",function(){return this._receiveShadow},function(F$y){this._receiveShadow!==F$y&&((this._receiveShadow=F$y)?this._addShaderDefine(F$$j.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(F$$j.SHADERDEFINE_RECEIVE_SHADOW))}),F$W(0,F$j,"destroyed",function(){return this._destroyed}),F$k._uniqueIDCounter=0,F$l(F$k,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj,new F$Aj]},"_greenColor",function(){return this._greenColor=new F$Xj(0,1,0,1)}]),F$k}(),F$vj=function(F$y){function F$X(F$y){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,F$X.__super.call(this),this._localPosition=new F$Aj,this._localRotation=new F$tj(0,0,0,1),this._localScale=new F$Aj(1,1,1),this._localRotationEuler=new F$Aj,this._localMatrix=new F$yj,this._position=new F$Aj,this._rotation=new F$tj(0,0,0,1),this._scale=new F$Aj(1,1,1),this._worldMatrix=new F$yj,this._forward=new F$Aj,this._up=new F$Aj,this._right=new F$Aj,this._owner=F$y,this._childs=[]}F$$(F$X,"laya.d3.core.Transform3D",F$Y);var F$j=F$X.prototype;return F$j._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)F$yj.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var F$y=F$X._tempVector30;F$Aj.multiply(this.pivot,this._localScale,F$y);var F$j=F$X._tempVector31;F$Aj.subtract(F$y,this.pivot,F$j);var F$t=F$X._tempVector32,F$k=this.localRotation;F$Aj.transformQuat(F$y,F$k,F$t),F$Aj.subtract(F$t,F$y,F$t);var F$T=F$X._tempVector33;F$Aj.subtract(this._localPosition,F$j,F$T),F$Aj.subtract(F$T,F$t,F$T),F$yj.createAffineTransformation(F$T,F$k,this._localScale,this._localMatrix)}},F$j._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._onWorldPositionRotationTransform()}},F$j._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._onWorldPositionScaleTransform()}},F$j._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._onWorldPositionTransform()}},F$j._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._onWorldPositionRotationTransform()}},F$j._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._onWorldPositionScaleTransform()}},F$j._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._onWorldTransform()}},F$j.translate=function(F$y,F$j){void 0===F$j&&(F$j=!0),F$j?(F$yj.createFromQuaternion(this.localRotation,F$X._tempMatrix0),F$Aj.transformCoordinate(F$y,F$X._tempMatrix0,F$X._tempVector30),F$Aj.add(this.localPosition,F$X._tempVector30,this._localPosition),this.localPosition=this._localPosition):(F$Aj.add(this.position,F$y,this._position),this.position=this._position)},F$j.rotate=function(F$y,F$j,F$t){var F$k;void 0===F$j&&(F$j=!0),void 0===F$t&&(F$t=!0),F$k=F$t?F$y:(F$Aj.scale(F$y,Math.PI/180,F$X._tempVector30),F$X._tempVector30),F$tj.createFromYawPitchRoll(F$k.y,F$k.x,F$k.z,F$X._tempQuaternion0),F$j?(F$tj.multiply(this._localRotation,F$X._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(F$tj.multiply(F$X._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},F$j.lookAt=function(F$y,F$j,F$t){void 0===F$t&&(F$t=!1);var F$k,F$T=F$y.elements;if(F$t){if(F$k=this._localPosition.elements,Math.abs(F$k[0]-F$T[0])<F$Ey.zeroTolerance&&Math.abs(F$k[1]-F$T[1])<F$Ey.zeroTolerance&&Math.abs(F$k[2]-F$T[2])<F$Ey.zeroTolerance)return;F$tj.lookAt(this._localPosition,F$y,F$j,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var F$Y=this.position;if(F$k=F$Y.elements,Math.abs(F$k[0]-F$T[0])<F$Ey.zeroTolerance&&Math.abs(F$k[1]-F$T[1])<F$Ey.zeroTolerance&&Math.abs(F$k[2]-F$T[2])<F$Ey.zeroTolerance)return;F$tj.lookAt(F$Y,F$y,F$j,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},F$W(0,F$j,"_isFrontFaceInvert",function(){var F$y=this.scale,F$j=F$y.x<0;return F$y.y<0&&(F$j=!F$j),F$y.z<0&&(F$j=!F$j),F$j}),F$W(0,F$j,"owner",function(){return this._owner}),F$W(0,F$j,"localRotation",function(){if(this._localQuaternionUpdate){var F$y=this._localRotationEuler.elements;F$tj.createFromYawPitchRoll(F$y[1]/F$X._angleToRandin,F$y[0]/F$X._angleToRandin,F$y[2]/F$X._angleToRandin,this._localRotation)}return this._localRotation},function(F$y){this._localRotation=F$y,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$W(0,F$j,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?F$yj.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(F$y){null===this._parent?F$y.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),F$yj.multiply(this._localMatrix,F$y,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=F$y,this._worldUpdate=!1}),F$W(0,F$j,"worldNeedUpdate",function(){return this._worldUpdate}),F$W(0,F$j,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(F$y){this._localMatrix=F$y,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),F$W(0,F$j,"dummy",function(){return this._dummy},function(F$y){this._dummy!==F$y&&(this._dummy&&(this._dummy._entity=null),F$y&&(F$y._entity=this),this._dummy=F$y)}),F$W(0,F$j,"localPosition",function(){return this._localPosition},function(F$y){this._localPosition=F$y,this._localUpdate=!0,this._onWorldPositionTransform()}),F$W(0,F$j,"position",function(){if(this._positionUpdate){if(null!=this._parent){var F$y=this._parent.position;F$Aj.multiply(this._localPosition,this._parent.scale,F$X._tempVector30),F$Aj.transformQuat(F$X._tempVector30,this._parent.rotation,F$X._tempVector30),F$Aj.add(F$y,F$X._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(F$y){if(null!=this._parent){F$Aj.subtract(F$y,this._parent.position,this._localPosition);var F$j=this._parent.scale.elements,F$t=F$j[0],F$k=F$j[1],F$T=F$j[2];if(1!==F$t||1!==F$k||1!==F$T){var F$Y=F$X._tempVector30,F$A=F$Y.elements;F$A[0]=1/F$t,F$A[1]=1/F$k,F$A[2]=1/F$T,F$Aj.multiply(this._localPosition,F$Y,this._localPosition)}this._parent.rotation.invert(F$X._tempQuaternion0),F$Aj.transformQuat(this._localPosition,F$X._tempQuaternion0,this._localPosition)}else F$y.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=F$y,this._positionUpdate=!1}),F$W(0,F$j,"localScale",function(){return this._localScale},function(F$y){this._localScale=F$y,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),F$W(0,F$j,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(F$X._tempVector30);var F$y=F$X._tempVector30.elements,F$j=this._localRotationEuler.elements;F$j[0]=F$y[1]*F$X._angleToRandin,F$j[1]=F$y[0]*F$X._angleToRandin,F$j[2]=F$y[2]*F$X._angleToRandin}return this._localRotationEuler},function(F$y){this._localRotationEuler=F$y,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),F$W(0,F$j,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?F$tj.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(F$y){null!=this._parent?(this._parent.rotation.invert(F$X._tempQuaternion0),F$tj.multiply(F$y,F$X._tempQuaternion0,this._localRotation)):F$y.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=F$y,this._rotationUpdate=!1}),F$W(0,F$j,"scale",function(){return this._scaleUpdate&&(null!==this._parent?F$Aj.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(F$y){if(null!==this._parent){var F$j=this._parent.scale.elements,F$t=F$X._tempVector30.elements;F$t[0]=1/F$j[0],F$t[1]=1/F$j[1],F$t[2]=1/F$j[2],F$Aj.multiply(F$y,F$X._tempVector30,this._localScale)}else F$y.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=F$y,this._scaleUpdate=!1}),F$W(0,F$j,"rotationEuler",null,function(F$y){F$tj.createFromYawPitchRoll(F$y.y,F$y.x,F$y.z,this._rotation),this.rotation=this._rotation}),F$W(0,F$j,"forward",function(){var F$y=this.worldMatrix.elements;return this._forward.elements[0]=-F$y[8],this._forward.elements[1]=-F$y[9],this._forward.elements[2]=-F$y[10],this._forward}),F$W(0,F$j,"up",function(){var F$y=this.worldMatrix.elements;return this._up.elements[0]=F$y[4],this._up.elements[1]=F$y[5],this._up.elements[2]=F$y[6],this._up}),F$W(0,F$j,"right",function(){var F$y=this.worldMatrix.elements;return this._right.elements[0]=F$y[0],this._right.elements[1]=F$y[1],this._right.elements[2]=F$y[2],this._right}),F$W(0,F$j,"parent",function(){return this._parent},function(F$y){if(this._parent!==F$y){if(this._parent){var F$j=this._parent._childs,F$t=F$j.indexOf(this);F$j.splice(F$t,1)}F$y&&(F$y._childs.push(this),F$y&&this._onWorldTransform()),this._parent=F$y}}),F$l(F$X,["_tempVector30",function(){return this._tempVector30=new F$Aj},"_tempVector31",function(){return this._tempVector31=new F$Aj},"_tempVector32",function(){return this._tempVector32=new F$Aj},"_tempVector33",function(){return this._tempVector33=new F$Aj},"_tempQuaternion0",function(){return this._tempQuaternion0=new F$tj},"_tempMatrix0",function(){return this._tempMatrix0=new F$yj},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),F$X}(),F$Nj=(function(F$y){function F$j(){this._rotation=0,this._matNeedUpdte=!1,F$j.__super.call(this),this._matrix=new F$yj,this._offset=new F$Yj,this._tiling=new F$Yj(1,1)}F$$(F$j,"laya.d3.core.TransformUV",F$Y);var F$t=F$j.prototype;F$e.imps(F$t,{"laya.d3.core.IClone":!0}),F$t._updateMatrix=function(){F$j._tempOffsetV3.elements[0]=this._offset.x,F$j._tempOffsetV3.elements[1]=this._offset.y,F$tj.createFromYawPitchRoll(0,0,this._rotation,F$j._tempRotationQua),F$j._tempTitlingV3.elements[0]=this._tiling.x,F$j._tempTitlingV3.elements[1]=this._tiling.y,F$yj.createAffineTransformation(F$j._tempOffsetV3,F$j._tempRotationQua,F$j._tempTitlingV3,this._matrix)},F$t.cloneTo=function(F$y){F$y._matrix=this._matrix.clone(),F$y._offset=this._offset.clone(),F$y._rotation=this._rotation,F$y._tiling=this._tiling.clone()},F$t.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$t,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),F$W(0,F$t,"tiling",function(){return this._tiling},function(F$y){this._tiling=F$y,this._matNeedUpdte=!0}),F$W(0,F$t,"offset",function(){return this._offset},function(F$y){this._offset=F$y,this._matNeedUpdte=!0}),F$W(0,F$t,"rotation",function(){return this._rotation},function(F$y){this._rotation=F$y,this._matNeedUpdte=!0}),F$l(F$j,["_tempOffsetV3",function(){return this._tempOffsetV3=new F$Aj(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new F$tj},"_tempTitlingV3",function(){return this._tempTitlingV3=new F$Aj(1,1,1)}])}(),function(F$t){function F$y(){this.x=NaN,this.y=NaN,this.z=NaN,F$y.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}F$$(F$y,"laya.d3.core.particleShuriKen.module.shape.BoxShape",F$t);var F$j=F$y.prototype;F$j._getShapeBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=.5*-this.x,F$j[1]=.5*-this.y,F$j[2]=.5*-this.z;var F$t=F$y.max.elements;F$t[0]=.5*this.x,F$t[1]=.5*this.y,F$t[2]=.5*this.z},F$j._getSpeedBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=0,F$j[1]=0,F$j[2]=0;var F$t=F$y.max.elements;F$t[0]=0,F$t[1]=1,F$t[2]=0},F$j.generatePositionAndDirection=function(F$y,F$j,F$t,F$k){var F$T=F$y.elements,F$Y=F$j.elements;F$t?(F$t.seed=F$k[16],F$O._randomPointInsideHalfUnitBox(F$y,F$t),F$k[16]=F$t.seed):F$O._randomPointInsideHalfUnitBox(F$y),F$T[0]=this.x*F$T[0],F$T[1]=this.y*F$T[1],F$T[2]=this.z*F$T[2],this.randomDirection?F$t?(F$t.seed=F$k[17],F$O._randomPointUnitSphere(F$j,F$t),F$k[17]=F$t.seed):F$O._randomPointUnitSphere(F$j):(F$Y[0]=0,F$Y[1]=0,F$Y[2]=1)},F$j.cloneTo=function(F$y){F$t.prototype.cloneTo.call(this,F$y);var F$j=F$y;F$j.x=this.x,F$j.y=this.y,F$j.z=this.z,F$j.randomDirection=this.randomDirection}}(F$G),function(F$t){function F$A(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,F$A.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}F$$(F$A,"laya.d3.core.particleShuriKen.module.shape.CircleShape",F$t);var F$y=F$A.prototype;F$y._getShapeBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=F$j[2]=-this.radius,F$j[1]=0;var F$t=F$y.max.elements;F$t[0]=F$t[2]=this.radius,F$t[1]=0},F$y._getSpeedBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=F$j[1]=-1,F$j[2]=0;var F$t=F$y.max.elements;F$t[0]=F$t[1]=1,F$t[2]=0},F$y.generatePositionAndDirection=function(F$y,F$j,F$t,F$k){var F$T=F$y.elements,F$Y=F$A._tempPositionPoint.elements;F$t?(F$t.seed=F$k[16],this.emitFromEdge?F$O._randomPointUnitArcCircle(this.arc,F$A._tempPositionPoint,F$t):F$O._randomPointInsideUnitArcCircle(this.arc,F$A._tempPositionPoint,F$t),F$k[16]=F$t.seed):this.emitFromEdge?F$O._randomPointUnitArcCircle(this.arc,F$A._tempPositionPoint):F$O._randomPointInsideUnitArcCircle(this.arc,F$A._tempPositionPoint),F$T[0]=-F$Y[0],F$T[1]=F$Y[1],F$T[2]=0,F$Aj.scale(F$y,this.radius,F$y),this.randomDirection?F$t?(F$t.seed=F$k[17],F$O._randomPointUnitSphere(F$j,F$t),F$k[17]=F$t.seed):F$O._randomPointUnitSphere(F$j):F$y.cloneTo(F$j)},F$y.cloneTo=function(F$y){F$t.prototype.cloneTo.call(this,F$y);var F$j=F$y;F$j.radius=this.radius,F$j.arc=this.arc,F$j.emitFromEdge=this.emitFromEdge,F$j.randomDirection=this.randomDirection},F$l(F$A,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$Yj}])}(F$G),function(F$t){function F$r(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,F$r.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}F$$(F$r,"laya.d3.core.particleShuriKen.module.shape.ConeShape",F$t);var F$y=F$r.prototype;F$y._getShapeBoundBox=function(F$y){var F$j=this.radius+this.length*Math.sin(this.angle),F$t=this.length*Math.cos(this.angle),F$k=F$y.min.elements;F$k[0]=F$k[1]=-F$j,F$k[2]=0;var F$T=F$y.max.elements;F$T[0]=F$T[1]=F$j,F$T[2]=F$t},F$y._getSpeedBoundBox=function(F$y){var F$j=Math.sin(this.angle),F$t=F$y.min.elements;F$t[0]=F$t[1]=-F$j,F$t[2]=0;var F$k=F$y.max.elements;F$k[0]=F$t[1]=F$j,F$k[2]=1},F$y.generatePositionAndDirection=function(F$y,F$j,F$t,F$k){var F$T,F$Y=F$y.elements,F$A=F$j.elements,F$X=F$r._tempPositionPoint.elements,F$I=NaN,F$b=NaN,F$D=Math.cos(this.angle),F$l=Math.sin(this.angle);switch(this.emitType){case 0:F$t?(F$t.seed=F$k[16],F$O._randomPointInsideUnitCircle(F$r._tempPositionPoint,F$t),F$k[16]=F$t.seed):F$O._randomPointInsideUnitCircle(F$r._tempPositionPoint),F$I=F$X[0],F$b=F$X[1],F$Y[0]=F$I*this.radius,F$Y[1]=F$b*this.radius,F$Y[2]=0,this.randomDirection?(F$t?(F$t.seed=F$k[17],F$O._randomPointInsideUnitCircle(F$r._tempDirectionPoint,F$t),F$k[17]=F$t.seed):F$O._randomPointInsideUnitCircle(F$r._tempDirectionPoint),F$T=F$r._tempDirectionPoint.elements,F$A[0]=F$T[0]*F$l,F$A[1]=F$T[1]*F$l):(F$A[0]=F$I*F$l,F$A[1]=F$b*F$l),F$A[2]=F$D;break;case 1:F$t?(F$t.seed=F$k[16],F$O._randomPointUnitCircle(F$r._tempPositionPoint,F$t),F$k[16]=F$t.seed):F$O._randomPointUnitCircle(F$r._tempPositionPoint),F$I=F$X[0],F$b=F$X[1],F$Y[0]=F$I*this.radius,F$Y[1]=F$b*this.radius,F$Y[2]=0,this.randomDirection?(F$t?(F$t.seed=F$k[17],F$O._randomPointInsideUnitCircle(F$r._tempDirectionPoint,F$t),F$k[17]=F$t.seed):F$O._randomPointInsideUnitCircle(F$r._tempDirectionPoint),F$T=F$r._tempDirectionPoint.elements,F$A[0]=F$T[0]*F$l,F$A[1]=F$T[1]*F$l):(F$A[0]=F$I*F$l,F$A[1]=F$b*F$l),F$A[2]=F$D;break;case 2:F$t?(F$t.seed=F$k[16],F$O._randomPointInsideUnitCircle(F$r._tempPositionPoint,F$t)):F$O._randomPointInsideUnitCircle(F$r._tempPositionPoint),F$I=F$X[0],F$b=F$X[1],F$Y[0]=F$I*this.radius,F$Y[1]=F$b*this.radius,F$A[F$Y[2]=0]=F$I*F$l,F$A[1]=F$b*F$l,F$A[2]=F$D,F$Aj.normalize(F$j,F$j),F$t?(F$Aj.scale(F$j,this.length*F$t.getFloat(),F$j),F$k[16]=F$t.seed):F$Aj.scale(F$j,this.length*Math.random(),F$j),F$Aj.add(F$y,F$j,F$y),this.randomDirection&&(F$t?(F$t.seed=F$k[17],F$O._randomPointUnitSphere(F$j,F$t),F$k[17]=F$t.seed):F$O._randomPointUnitSphere(F$j));break;case 3:F$t?(F$t.seed=F$k[16],F$O._randomPointUnitCircle(F$r._tempPositionPoint,F$t)):F$O._randomPointUnitCircle(F$r._tempPositionPoint),F$I=F$X[0],F$b=F$X[1],F$Y[0]=F$I*this.radius,F$Y[1]=F$b*this.radius,F$A[F$Y[2]=0]=F$I*F$l,F$A[1]=F$b*F$l,F$A[2]=F$D,F$Aj.normalize(F$j,F$j),F$t?(F$Aj.scale(F$j,this.length*F$t.getFloat(),F$j),F$k[16]=F$t.seed):F$Aj.scale(F$j,this.length*Math.random(),F$j),F$Aj.add(F$y,F$j,F$y),this.randomDirection&&(F$t?(F$t.seed=F$k[17],F$O._randomPointUnitSphere(F$j,F$t),F$k[17]=F$t.seed):F$O._randomPointUnitSphere(F$j));break;default:throw new Error("ConeShape:emitType is invalid.")}},F$y.cloneTo=function(F$y){F$t.prototype.cloneTo.call(this,F$y);var F$j=F$y;F$j.angle=this.angle,F$j.radius=this.radius,F$j.length=this.length,F$j.emitType=this.emitType,F$j.randomDirection=this.randomDirection},F$l(F$r,["_tempPositionPoint",function(){return this._tempPositionPoint=new F$Yj},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new F$Yj}])}(F$G),function(F$t){function F$y(){this.radius=NaN,this.emitFromShell=!1,F$y.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$$(F$y,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",F$t);var F$j=F$y.prototype;F$j._getShapeBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=F$j[1]=F$j[2]=-this.radius;var F$t=F$y.max.elements;F$t[0]=F$t[1]=this.radius,F$t[2]=0},F$j._getSpeedBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=F$j[1]=-1,F$j[2]=0;var F$t=F$y.max.elements;F$t[0]=F$t[1]=F$t[2]=1},F$j.generatePositionAndDirection=function(F$y,F$j,F$t,F$k){var F$T=F$y.elements;F$t?(F$t.seed=F$k[16],this.emitFromShell?F$O._randomPointUnitSphere(F$y,F$t):F$O._randomPointInsideUnitSphere(F$y,F$t),F$k[16]=F$t.seed):this.emitFromShell?F$O._randomPointUnitSphere(F$y):F$O._randomPointInsideUnitSphere(F$y),F$Aj.scale(F$y,this.radius,F$y);var F$Y=F$T[2];F$Y<0&&(F$T[2]=-1*F$Y),this.randomDirection?F$t?(F$t.seed=F$k[17],F$O._randomPointUnitSphere(F$j,F$t),F$k[17]=F$t.seed):F$O._randomPointUnitSphere(F$j):F$y.cloneTo(F$j)},F$j.cloneTo=function(F$y){F$t.prototype.cloneTo.call(this,F$y);var F$j=F$y;F$j.radius=this.radius,F$j.emitFromShell=this.emitFromShell,F$j.randomDirection=this.randomDirection}}(F$G),function(F$t){function F$y(){this.radius=NaN,this.emitFromShell=!1,F$y.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}F$$(F$y,"laya.d3.core.particleShuriKen.module.shape.SphereShape",F$t);var F$j=F$y.prototype;F$j._getShapeBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=F$j[1]=F$j[2]=-this.radius;var F$t=F$y.max.elements;F$t[0]=F$t[1]=F$t[2]=this.radius},F$j._getSpeedBoundBox=function(F$y){var F$j=F$y.min.elements;F$j[0]=F$j[1]=F$j[2]=-1;var F$t=F$y.max.elements;F$t[0]=F$t[1]=F$t[2]=1},F$j.generatePositionAndDirection=function(F$y,F$j,F$t,F$k){F$t?(F$t.seed=F$k[16],this.emitFromShell?F$O._randomPointUnitSphere(F$y,F$t):F$O._randomPointInsideUnitSphere(F$y,F$t),F$k[16]=F$t.seed):this.emitFromShell?F$O._randomPointUnitSphere(F$y):F$O._randomPointInsideUnitSphere(F$y),F$Aj.scale(F$y,this.radius,F$y),this.randomDirection?F$t?(F$t.seed=F$k[17],F$O._randomPointUnitSphere(F$j,F$t),F$k[17]=F$t.seed):F$O._randomPointUnitSphere(F$j):F$y.cloneTo(F$j)},F$j.cloneTo=function(F$y){F$t.prototype.cloneTo.call(this,F$y);var F$j=F$y;F$j.radius=this.radius,F$j.emitFromShell=this.emitFromShell,F$j.randomDirection=this.randomDirection}}(F$G),function(F$y){function F$j(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,F$j.__super.call(this)}return F$$(F$j,"laya.d3.core.render.SubMeshRenderElement",F$R),F$j}()),F$Pj=function(F$y){function F$V(F$y,F$j,F$t,F$k,F$T,F$Y){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=F$y,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[F$$j.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[F$Zj.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[F$Zj.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[F$Qj.SHADERDEFINE_ALPHATEST]="ALPHATEST";F$V.__super.call(this,F$y,F$j,F$t,null,{}),this._attributeMap=F$k;var F$A;for(F$A in F$T){var F$X=F$T[F$A];switch(F$X[1]){case 0:this._renderElementUniformMap[F$A]=F$X[0];break;case 1:this._materialUniformMap[F$A]=F$X[0];break;case 2:this._spriteUniformMap[F$A]=F$X[0];break;case 3:this._cameraUniformMap[F$A]=F$X[0];break;case 4:this._sceneUniformMap[F$A]=F$X[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}F$$(F$V,"laya.d3.shader.ShaderCompile3D",F$M);var F$j=F$V.prototype;return F$j._definesToNameDic=function(F$y,F$j){for(var F$t={},F$k=1,F$T=0;F$T<32&&!(F$y<(F$k=1<<F$T));F$T++)if(F$y&F$k){var F$Y=F$j[F$k];F$Y&&(F$t[F$Y]="")}return F$t},F$j.withCompile=function(F$y,F$j,F$t,F$k){var F$T,F$Y,F$A;if(F$Y=this.sharders[F$y])if(F$A=F$Y[F$j]){if(F$T=F$A[F$t])return F$T}else F$A=F$Y[F$j]=[];else F$A=(F$Y=this.sharders[F$y]=[])[F$j]=[];var F$X,F$I=this._definesToNameDic(F$y,F$V._globalInt2name),F$b=this._definesToNameDic(F$j,this._spriteInt2name),F$D=this._definesToNameDic(F$t,this._materialInt2name),F$l={},F$r="";if(F$I)for(F$X in F$I)F$r+="#define "+F$X+"\n",F$l[F$X]=!0;if(F$b)for(F$X in F$b)F$r+="#define "+F$X+"\n",F$l[F$X]=!0;if(F$D)for(F$X in F$D)F$r+="#define "+F$X+"\n",F$l[F$X]=!0;var F$$=F$Kj.nameKey.getName(this._name)+" compile ("+F$y+","+F$j+","+F$t+")",F$W=this._VS.toscript(F$l,[]),F$z=this._PS.toscript(F$l,[]);F$q.now();if(F$T=F$Kj.create(F$r+F$W.join("\n"),F$r+F$z.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,F$k,F$$),F$A[F$t]=F$T,laya.d3.shader.ShaderCompile3D.debugMode)F$q.now();return F$T},F$j.precompileShaderWithShaderDefine=function(F$y,F$j,F$t){this.withCompile(F$y,F$j,F$t,!0)},F$j.addMaterialDefines=function(F$y){var F$j=F$y.defines;for(var F$t in F$j){var F$k=F$j[F$t],F$T=parseInt(F$t);this._materialInt2name[F$T]=F$k,this._materialName2Int[F$k]=F$T}},F$j.addSpriteDefines=function(F$y){var F$j=F$y.defines;for(var F$t in F$j){var F$k=F$j[F$t],F$T=parseInt(F$t);this._spriteInt2name[F$T]=F$k,this._spriteName2Int[F$k]=F$T}},F$j.getMaterialDefineByName=function(F$y){return this._materialName2Int[F$y]},F$j.registerMaterialDefine=function(F$y){var F$j=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[F$j]=F$y,this._materialName2Int[F$y]=F$j},F$j.registerSpriteDefine=function(F$y){var F$j=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[F$j]=F$y,this._spriteName2Int[F$y]=F$j},F$V._globalRegDefine=function(F$y,F$j){F$V._globalInt2name[F$j]=F$y},F$V.add=function(F$y,F$j,F$t,F$k,F$T){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$y]=new F$V(F$y,F$j,F$t,F$k,F$T,F$M.includes)},F$V.get=function(F$y){return laya.d3.shader.ShaderCompile3D._preCompileShader[F$Kj.nameKey.getID(F$y)]},F$V._preCompileShader={},F$V._globalInt2name=[],F$V.debugMode=!1,F$V.SHADERDEFINE_HIGHPRECISION=1,F$V.SHADERDEFINE_FOG=4,F$V.SHADERDEFINE_DIRECTIONLIGHT=8,F$V.SHADERDEFINE_POINTLIGHT=16,F$V.SHADERDEFINE_SPOTLIGHT=32,F$V.SHADERDEFINE_UV0=64,F$V.SHADERDEFINE_COLOR=128,F$V.SHADERDEFINE_UV1=256,F$V.SAHDERDEFINE_DEPTHFOG=131072,F$V}(),F$dj=function(F$y){function F$W(){F$W.__super.call(this)}F$$(F$W,"laya.d3.graphics.MeshSprite3DStaticBatchManager",F$ky);var F$j=F$W.prototype;return F$j._getStaticBatch=function(F$y,F$j,F$t,F$k){var F$T,F$Y;return F$Y=F$y?F$y.id.toString()+F$t.id.toString()+F$j.id.toString()+F$k.toString():F$t.id.toString()+F$j.id.toString()+F$k.toString(),this._staticBatches[F$Y]?F$T=this._staticBatches[F$Y]:this._staticBatches[F$Y]=F$T=new F$pj(F$Y,this,F$y,F$j,F$t),F$T},F$j._initStaticBatchs=function(F$y){var F$j,F$t;this._initBatchRenderElements.sort(F$W._sortPrepareStaticBatch);for(var F$k,F$T=!1,F$Y=0,F$A=0,F$X=this._initBatchRenderElements.length;F$A<F$X;F$A++){var F$I,F$b=this._initBatchRenderElements[F$A],F$D=F$b.renderObj._getVertexBuffer(0);F$b._sprite3D;if(F$t===F$D.vertexDeclaration&&F$j===F$b._material)if(F$T)F$k._addCombineBatchRenderObjTest(F$b)?(F$I=F$b._staticBatch)!==F$k&&(F$I&&F$I._deleteCombineBatchRenderObj(F$b),F$k._addCombineBatchRenderObj(F$b)):(F$T=!1,F$Y++);else{var F$l=this._initBatchRenderElements[F$A-1],F$r=F$l.renderObj,F$$=F$b.renderObj;F$T=!(65535<F$r._getVertexBuffer().vertexCount+F$$._getVertexBuffer().vertexCount)&&(F$k=this._getStaticBatch(F$y,F$t,F$j,F$Y),(F$I=F$l._staticBatch)!==F$k&&(F$I&&F$I._deleteCombineBatchRenderObj(F$l),F$k._addCombineBatchRenderObj(F$l)),(F$I=F$b._staticBatch)!==F$k&&(F$I&&F$I._deleteCombineBatchRenderObj(F$b),F$k._addCombineBatchRenderObj(F$b)),!0)}else F$T=!1,F$Y=0;F$j=F$b._material,F$t=F$D.vertexDeclaration}},F$W._sortPrepareStaticBatch=function(F$y,F$j){var F$t=F$y._render,F$k=F$j._render,F$T=F$t.lightmapIndex-F$k.lightmapIndex;if(0!=F$T)return F$T;var F$Y=F$t.receiveShadow-F$k.receiveShadow;if(0!=F$Y)return F$Y;var F$A=F$y._mainSortID-F$j._mainSortID;return 0==F$A?F$y.renderObj.triangleCount-F$j.renderObj.triangleCount:F$A},F$W}(),F$pj=function(F$y){function F$Y(F$y,F$j,F$t,F$k,F$T){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,F$Y.__super.call(this,F$y,F$j,F$t),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=F$k,this._material=F$T}F$$(F$Y,"laya.d3.graphics.SubMeshStaticBatch",F$Ty);var F$j=F$Y.prototype;return F$j._compareBatchRenderElement=function(F$y,F$j){return F$y._batchIndexStart>F$j._batchIndexStart},F$j._addCombineBatchRenderObjTest=function(F$y){var F$j=F$y.renderObj._vertexCount;return!(65535<(0<F$j?this._currentCombineVertexCount+F$j:this._currentCombineVertexCount+F$y.renderObj._getVertexBuffer().vertexCount))},F$j._addCombineBatchRenderObj=function(F$y){var F$j=F$y.renderObj,F$t=F$j._vertexCount;this._initBatchRenderElements.push(F$y),F$y._staticBatch=this,0<F$t?(this._currentCombineIndexCount+=F$j._indexCount,this._currentCombineVertexCount+=F$t):(this._currentCombineIndexCount=this._currentCombineIndexCount+F$j._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+F$j._getVertexBuffer().vertexCount),this._needFinishCombine=!0},F$j._deleteCombineBatchRenderObj=function(F$y){var F$j=F$y.renderObj,F$t=this._initBatchRenderElements.indexOf(F$y);if(-1!==F$t){this._initBatchRenderElements.splice(F$t,1),F$y._staticBatch=null;var F$k=F$j._vertexCount;0<F$k?(this._currentCombineIndexCount=this._currentCombineIndexCount-F$j._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$k):(this._currentCombineIndexCount=this._currentCombineIndexCount-F$j._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-F$j._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},F$j._finishInit=function(){if(this._needFinishCombine){var F$y=0,F$j=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var F$t=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),F$k=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=F$Gj.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=F$Fj.create("ushort",this._currentCombineIndexCount,35044);for(var F$T=0,F$Y=this._initBatchRenderElements.length;F$T<F$Y;F$T++){var F$A=this._initBatchRenderElements[F$T],F$X=F$A.renderObj,F$I=F$X._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,F$A._sprite3D),F$b=F$X.getIndices(),F$D=F$A._sprite3D.transform._isFrontFaceInvert,F$l=F$y/(this._vertexDeclaration.vertexStride/4)-F$X._vertexStart,F$r=F$j,F$$=F$r+F$b.length;F$A._batchIndexStart=F$r,F$A._batchIndexEnd=F$$,F$k.set(F$b,F$j);var F$W=0;if(F$D)for(F$W=F$r;F$W<F$$;F$W+=3){F$k[F$W]=F$l+F$k[F$W];var F$z=F$k[F$W+1],F$V=F$k[F$W+2];F$k[F$W+1]=F$l+F$V,F$k[F$W+2]=F$l+F$z}else for(F$W=F$r;F$W<F$$;F$W+=3)F$k[F$W]=F$l+F$k[F$W],F$k[F$W+1]=F$l+F$k[F$W+1],F$k[F$W+2]=F$l+F$k[F$W+2];F$j+=F$b.length,F$t.set(F$I,F$y),F$y+=F$I.length}this._vertexBuffer.setData(F$t),this._indexBuffer.setData(F$k),this._needFinishCombine=!1}},F$j._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new F$Nj)},F$j._getRenderElement=function(F$y,F$j,F$t){for(var F$k,F$T,F$Y=this._batchRenderElements.length,F$A=!0,F$X=0;F$X<F$Y;F$X++){var F$I,F$b,F$D=(F$T=this._batchRenderElements[F$X])._sprite3D._render;if(0!==F$X&&(F$A=(F$I=(F$k=this._batchRenderElements[F$X-1])._sprite3D._render).lightmapIndex!==F$D.lightmapIndex||F$I.receiveShadow!==F$D.receiveShadow||F$k._batchIndexEnd!==F$T._batchIndexStart),F$A){(F$b=this._getCombineRenderElementFromPool()).renderObj=this,F$b._material=this._material,F$b._batchIndexStart=F$T._batchIndexStart,F$b._batchIndexEnd=F$T._batchIndexEnd;var F$l=F$D.lightmapIndex,F$r=F$l+1,F$$=this._batchOwnerIndices[F$r];F$$||(F$$=this._batchOwnerIndices[F$r]=[]);var F$W,F$z=F$$[F$T._render.receiveShadow?1:0];void 0===F$z?(F$$[F$D.receiveShadow?1:0]=this._batchOwners.length,(F$W=new F$Bj(null,"StaticBatchMeshSprite3D"))._scene=F$j,F$W._transform=this._rootOwner?this._rootOwner._transform:null,F$W._render.lightmapIndex=F$l,F$W._render.receiveShadow=F$T._render.receiveShadow,this._batchOwners.push(F$W)):F$W=this._batchOwners[F$z],F$W._render._renderUpdate(F$t),F$b._sprite3D=F$W,F$y.push(F$b)}else F$b._batchIndexEnd=F$T._batchIndexEnd}},F$j._beforeRender=function(F$y){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$j._render=function(F$y){var F$j=F$y.renderElement,F$t=F$j._batchIndexStart,F$k=F$j._batchIndexEnd-F$t;F$m.mainContext.drawElements(4,F$k,5123,2*F$t),F$P.drawCall++,F$P.trianglesFaces+=F$k/3},F$j.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},F$j._getVertexBuffer=function(F$y){return void 0===F$y&&(F$y=0),this._vertexBuffer},F$Y}(),F$fj=function(F$y){function F$j(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,F$j.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}F$$(F$j,"laya.d3.core.ComponentNode",F$b);var F$t=F$j.prototype;return F$t.addComponent=function(F$y){var F$j,F$t=this._componentsMap.indexOf(F$y);if(-1===F$t)F$j=[],this._componentsMap.push(F$y),this._typeComponentsIndices.push(F$j);else if(F$j=this._typeComponentsIndices[F$t],this._components[F$j[0]].isSingleton)throw new Error("无法单实例创建"+F$y+"组件，"+F$y+"组件已存在！");var F$k=F$T.getInstance(F$y);return F$j.push(this._components.length),this._components.push(F$k),F$k instanceof laya.d3.component.Script&&this._scripts.push(F$k),F$k._initialize(this),F$k},F$t._removeComponent=function(F$y,F$j){var F$t=this._typeComponentsIndices[F$y],F$k=F$t[F$j],F$T=this._components[F$k];this._components.splice(F$k,1),F$T instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$T),1),F$t.splice(F$j,1),0===F$t.length&&(this._typeComponentsIndices.splice(F$y,1),this._componentsMap.splice(F$y,1));for(var F$Y=0,F$A=this._componentsMap.length;F$Y<F$A;F$Y++)for(var F$X=(F$t=this._typeComponentsIndices[F$Y]).length-1;0<=F$X;F$X--){var F$I=F$t[F$X];if(!(F$k<F$I))break;F$t[F$X]=--F$I}F$T._destroy()},F$t.getComponentByType=function(F$y,F$j){void 0===F$j&&(F$j=0);var F$t=this._componentsMap.indexOf(F$y);return-1===F$t?null:this._components[this._typeComponentsIndices[F$t][F$j]]},F$t.getComponentsByType=function(F$y,F$j){var F$t=this._componentsMap.indexOf(F$y);if(-1!==F$t){var F$k=this._typeComponentsIndices[F$t],F$T=F$k.length;F$j.length=F$T;for(var F$Y=0;F$Y<F$T;F$Y++)F$j[F$Y]=this._components[F$k[F$Y]]}else F$j.length=0},F$t.getComponentByIndex=function(F$y){return this._components[F$y]},F$t.removeComponentByType=function(F$y,F$j){void 0===F$j&&(F$j=0);var F$t=this._componentsMap.indexOf(F$y);-1!==F$t&&this._removeComponent(F$t,F$j)},F$t.removeComponentsByType=function(F$y){var F$j=this._componentsMap.indexOf(F$y);if(-1!==F$j)for(var F$t=this._typeComponentsIndices[F$j],F$k=0,F$T=F$t.length;F$k<F$T;F$t.length<F$T?F$T--:F$k++)this._removeComponent(F$j,F$k)},F$t.removeAllComponent=function(){for(var F$y=0,F$j=this._componentsMap.length;F$y<F$j;this._componentsMap.length<F$j?F$j--:F$y++)this.removeComponentsByType(this._componentsMap[F$y])},F$t._updateComponents=function(F$y){for(var F$j=0,F$t=this._components.length;F$j<F$t;F$j++){var F$k=this._components[F$j];!F$k.started&&(F$k._start(F$y),F$k.started=!0),F$k.enable&&F$k._update(F$y)}},F$t._lateUpdateComponents=function(F$y){for(var F$j=0;F$j<this._components.length;F$j++){var F$t=this._components[F$j];!F$t.started&&(F$t._start(F$y),F$t.started=!0),F$t.enable&&F$t._lateUpdate(F$y)}},F$t._preRenderUpdateComponents=function(F$y){for(var F$j=0;F$j<this._components.length;F$j++){var F$t=this._components[F$j];!F$t.started&&(F$t._start(F$y),F$t.started=!0),F$t.enable&&F$t._preRenderUpdate(F$y)}},F$t._postRenderUpdateComponents=function(F$y){for(var F$j=0;F$j<this._components.length;F$j++){var F$t=this._components[F$j];!F$t.started&&(F$t._start(F$y),F$t.started=!0),F$t.enable&&F$t._postRenderUpdate(F$y)}},F$j}(),F$Qj=function(F$k){function F$y(){F$y.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new F$rj,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new F$Xj(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}F$$(F$y,"laya.d3.core.material.BaseMaterial",F$k);var F$j=F$y.prototype;return F$e.imps(F$j,{"laya.d3.core.IClone":!0}),F$j._addShaderDefine=function(F$y){this._shaderDefineValue|=F$y},F$j._removeShaderDefine=function(F$y){this._shaderDefineValue&=~F$y},F$j._addDisablePublicShaderDefine=function(F$y){this._disablePublicShaderDefine|=F$y},F$j._removeDisablePublicShaderDefine=function(F$y){this._disablePublicShaderDefine&=~F$y},F$j._setBuffer=function(F$y,F$j){this._shaderValues.setValue(F$y,F$j),this._values[F$y]=F$j},F$j._getBuffer=function(F$y){return this._values[F$y]},F$j._setMatrix4x4=function(F$y,F$j){this._shaderValues.setValue(F$y,F$j?F$j.elements:null),this._values[F$y]=F$j},F$j._getMatrix4x4=function(F$y){return this._values[F$y]},F$j._setInt=function(F$y,F$j){this._shaderValues.setValue(F$y,F$j),this._values[F$y]=F$j},F$j._getInt=function(F$y){return this._values[F$y]},F$j._setNumber=function(F$y,F$j){this._shaderValues.setValue(F$y,F$j),this._values[F$y]=F$j},F$j._getNumber=function(F$y){return this._values[F$y]},F$j._setBool=function(F$y,F$j){this._shaderValues.setValue(F$y,F$j),this._values[F$y]=F$j},F$j._getBool=function(F$y){return this._values[F$y]},F$j._setVector2=function(F$y,F$j){this._shaderValues.setValue(F$y,F$j?F$j.elements:null),this._values[F$y]=F$j},F$j._getVector2=function(F$y){return this._values[F$y]},F$j._setColor=function(F$y,F$j){this._shaderValues.setValue(F$y,F$j?F$j.elements:null),this._values[F$y]=F$j},F$j._getColor=function(F$y){return this._values[F$y]},F$j._setTexture=function(F$y,F$j){var F$t=this._values[F$y];this._values[F$y]=F$j,this._shaderValues.setValue(F$y,F$j),0<this.referenceCount&&(F$t&&F$t._removeReference(),F$j&&F$j._addReference())},F$j._getTexture=function(F$y){return this._values[F$y]},F$j._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},F$j._getShader=function(F$y,F$j,F$t){var F$k=(F$y|F$j)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(F$k,F$t,this._shaderDefineValue),this._shader},F$j._setRenderStateBlendDepth=function(){var F$y=F$m.mainContext;switch(F$U.setDepthMask(F$y,this.depthWrite),0===this.depthTest?F$U.setDepthTest(F$y,!1):(F$U.setDepthTest(F$y,!0),F$U.setDepthFunc(F$y,this.depthTest)),this.blend){case 0:F$U.setBlend(F$y,!1);break;case 1:F$U.setBlend(F$y,!0),F$U.setBlendFunc(F$y,this.srcBlend,this.dstBlend);break;case 2:F$U.setBlend(F$y,!0)}},F$j._setRenderStateFrontFace=function(F$y,F$j){var F$t=F$m.mainContext,F$k=0;switch(this.cull){case 0:F$U.setCullFace(F$t,!1);break;case 1:F$U.setCullFace(F$t,!0),F$k=F$y?F$j&&F$j._isFrontFaceInvert?2305:2304:F$j&&F$j._isFrontFaceInvert?2304:2305,F$U.setFrontFace(F$t,F$k);break;case 2:F$U.setCullFace(F$t,!0),F$k=F$y?F$j&&F$j._isFrontFaceInvert?2304:2305:F$j&&F$j._isFrontFaceInvert?2305:2304,F$U.setFrontFace(F$t,F$k)}},F$j.onAsynLoaded=function(F$y,F$j,F$t){var F$k=F$j[0],F$T=F$j[1];switch(F$k.version){case"LAYAMATERIAL:01":var F$Y=0,F$A=0,F$X=F$k.props;for(var F$I in F$X)switch(F$I){case"vectors":var F$b=F$X[F$I];for(F$Y=0,F$A=F$b.length;F$Y<F$A;F$Y++){var F$D=F$b[F$Y],F$l=F$D.value;switch(F$l.length){case 2:this[F$D.name]=new F$Yj(F$l[0],F$l[1]);break;case 3:this[F$D.name]=new F$Aj(F$l[0],F$l[1],F$l[2]);break;case 4:this[F$D.name]=new F$Xj(F$l[0],F$l[1],F$l[2],F$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var F$r=F$X[F$I];for(F$Y=0,F$A=F$r.length;F$Y<F$A;F$Y++){var F$$=F$r[F$Y],F$W=F$$.path;F$W&&(this[F$$.name]=F$n.getRes(F$T[F$W]))}break;case"defines":var F$z=F$X[F$I];for(F$Y=0,F$A=F$z.length;F$Y<F$A;F$Y++){var F$V=this._shaderCompile.getMaterialDefineByName(F$z[F$Y]);this._addShaderDefine(F$V)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[F$I]=F$X[F$I];break;case"renderQueue":switch(F$X[F$I]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[F$I]=F$X[F$I]}break;case"LAYAMATERIAL:02":for(F$I in F$X=F$k.props)switch(F$I){case"vectors":for(F$Y=0,F$A=(F$b=F$X[F$I]).length;F$Y<F$A;F$Y++)switch((F$l=(F$D=F$b[F$Y]).value).length){case 2:this[F$D.name]=new F$Yj(F$l[0],F$l[1]);break;case 3:this[F$D.name]=new F$Aj(F$l[0],F$l[1],F$l[2]);break;case 4:this[F$D.name]=new F$Xj(F$l[0],F$l[1],F$l[2],F$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(F$Y=0,F$A=(F$r=F$X[F$I]).length;F$Y<F$A;F$Y++)(F$W=(F$$=F$r[F$Y]).path)&&(this[F$$.name]=F$n.getRes(F$T[F$W]));break;case"defines":for(F$Y=0,F$A=(F$z=F$X[F$I]).length;F$Y<F$A;F$Y++)F$V=this._shaderCompile.getMaterialDefineByName(F$z[F$Y]),this._addShaderDefine(F$V);break;default:this[F$I]=F$X[F$I]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},F$j._addReference=function(){F$k.prototype._addReference.call(this);for(var F$y=0,F$j=this._values.length;F$y<F$j;F$y++){var F$t=this._values[F$y];F$t&&F$t instanceof laya.d3.resource.BaseTexture&&F$t._addReference()}},F$j._removeReference=function(){F$k.prototype._removeReference.call(this);for(var F$y=0,F$j=this._values.length;F$y<F$j;F$y++){var F$t=this._values[F$y];F$t&&F$t instanceof laya.d3.resource.BaseTexture&&F$t._removeReference()}},F$j.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},F$j.setShaderName=function(F$y){var F$j=F$Kj.nameKey.getID(F$y);if(-1===F$j)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=F$Pj._preCompileShader[F$j]},F$j.cloneTo=function(F$y){var F$j=F$y;F$j.name=this.name,F$j.cull=this.cull,F$j.blend=this.blend,F$j.srcBlend=this.srcBlend,F$j.dstBlend=this.dstBlend,F$j.srcBlendRGB=this.srcBlendRGB,F$j.dstBlendRGB=this.dstBlendRGB,F$j.srcBlendAlpha=this.srcBlendAlpha,F$j.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(F$j.blendConstColor),F$j.blendEquation=this.blendEquation,F$j.blendEquationRGB=this.blendEquationRGB,F$j.blendEquationAlpha=this.blendEquationAlpha,F$j.depthTest=this.depthTest,F$j.depthWrite=this.depthWrite,F$j.renderQueue=this.renderQueue,F$j._shader=this._shader,F$j._disablePublicShaderDefine=this._disablePublicShaderDefine,F$j._shaderDefineValue=this._shaderDefineValue;var F$t,F$k=0,F$T=F$j._shaderValues;F$j._shaderValues.data.length=this._shaderValues.data.length;var F$Y=this._values.length,F$A=F$j._values;for(F$k=0,F$t=F$A.length=F$Y;F$k<F$t;F$k++){var F$X=this._values[F$k];if(F$X)if("number"==typeof F$X)F$A[F$k]=F$X,F$T.data[F$k]=F$X;else if("number"==typeof F$X&&Math.floor(F$X)==F$X)F$A[F$k]=F$X,F$T.data[F$k]=F$X;else if("boolean"==typeof F$X)F$A[F$k]=F$X,F$T.data[F$k]=F$X;else if(F$X instanceof laya.d3.math.Vector2){var F$I=F$A[F$k]||(F$A[F$k]=new F$Yj);F$X.cloneTo(F$I),F$T.data[F$k]=F$I.elements}else if(F$X instanceof laya.d3.math.Vector3){var F$b=F$A[F$k]||(F$A[F$k]=new F$Aj);F$X.cloneTo(F$b),F$T.data[F$k]=F$b.elements}else if(F$X instanceof laya.d3.math.Vector4){var F$D=F$A[F$k]||(F$A[F$k]=new F$Xj);F$X.cloneTo(F$D),F$T.data[F$k]=F$D.elements}else if(F$X instanceof laya.d3.math.Matrix4x4){var F$l=F$A[F$k]||(F$A[F$k]=new F$yj);F$X.cloneTo(F$l),F$T.data[F$k]=F$l.elements}else F$X instanceof laya.d3.resource.BaseTexture&&(F$A[F$k]=F$X,F$T.data[F$k]=F$X)}},F$j.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$W(0,F$j,"alphaTestValue",function(){return this._getNumber(0)},function(F$y){this._setNumber(0,F$y)}),F$W(0,F$j,"alphaTest",function(){return this._alphaTest},function(F$y){(this._alphaTest=F$y)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),F$y.__init__=function(){F$y.SHADERDEFINE_ALPHATEST=F$y.shaderDefines.registerDefine("ALPHATEST")},F$y.RENDERQUEUE_OPAQUE=2e3,F$y.RENDERQUEUE_ALPHATEST=2450,F$y.RENDERQUEUE_TRANSPARENT=3e3,F$y.CULL_NONE=0,F$y.CULL_FRONT=1,F$y.CULL_BACK=2,F$y.BLEND_DISABLE=0,F$y.BLEND_ENABLE_ALL=1,F$y.BLEND_ENABLE_SEPERATE=2,F$y.BLENDPARAM_ZERO=0,F$y.BLENDPARAM_ONE=1,F$y.BLENDPARAM_SRC_COLOR=768,F$y.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,F$y.BLENDPARAM_DST_COLOR=774,F$y.BLENDPARAM_ONE_MINUS_DST_COLOR=775,F$y.BLENDPARAM_SRC_ALPHA=770,F$y.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,F$y.BLENDPARAM_DST_ALPHA=772,F$y.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,F$y.BLENDPARAM_SRC_ALPHA_SATURATE=776,F$y.BLENDEQUATION_ADD=0,F$y.BLENDEQUATION_SUBTRACT=1,F$y.BLENDEQUATION_REVERSE_SUBTRACT=2,F$y.DEPTHTEST_OFF=0,F$y.DEPTHTEST_NEVER=512,F$y.DEPTHTEST_LESS=513,F$y.DEPTHTEST_EQUAL=514,F$y.DEPTHTEST_LEQUAL=515,F$y.DEPTHTEST_GREATER=516,F$y.DEPTHTEST_NOTEQUAL=517,F$y.DEPTHTEST_GEQUAL=518,F$y.DEPTHTEST_ALWAYS=519,F$y.SHADERDEFINE_ALPHATEST=1,F$y.ALPHATESTVALUE=0,F$l(F$y,["shaderDefines",function(){return this.shaderDefines=new F$Dj}]),F$y}(F$V),F$mj=function(F$y){function F$j(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,F$j.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}F$$(F$j,"laya.d3.resource.BaseTexture",F$V);var F$t=F$j.prototype;return F$W(0,F$t,"width",function(){return this._width}),F$W(0,F$t,"repeat",function(){return this._repeat},function(F$y){if(this._repeat!==F$y&&(this._repeat=F$y,this._source)){var F$j=F$m.mainContext;F$U.bindTexture(F$j,this._type,this._source),F$_.isPOT(this._width,this._height)&&this._repeat?(F$j.texParameteri(this._type,10242,10497),F$j.texParameteri(this._type,10243,10497)):(F$j.texParameteri(this._type,10242,33071),F$j.texParameteri(this._type,10243,33071))}}),F$W(0,F$t,"height",function(){return this._height}),F$W(0,F$t,"magFifter",function(){return this._magFifter},function(F$y){(this._magFifter=F$y)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(F$y)}),F$W(0,F$t,"wrapModeV",function(){return this._wrapModeV}),F$W(0,F$t,"size",function(){return this._size}),F$W(0,F$t,"wrapModeU",function(){return this._wrapModeU}),F$W(0,F$t,"mipmap",function(){return this._mipmap},function(F$y){this._mipmap=F$y,this._mipmap!=F$y&&this._conchTexture&&this._conchTexture.setMipMap(F$y)}),F$W(0,F$t,"minFifter",function(){return this._minFifter},function(F$y){this._minFifter=F$y,this._minFifter!=F$y&&this._conchTexture&&this._conchTexture.setMinFifter(F$y)}),F$W(0,F$t,"format",function(){return this._format}),F$W(0,F$t,"source",function(){return this.activeResource(),this._source}),F$W(0,F$t,"defaulteTexture",function(){return F$hj.grayTexture}),F$j.WARPMODE_REPEAT=0,F$j.WARPMODE_CLAMP=1,F$j}(),F$Uj=function(F$y){function F$j(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,F$j.__super.call(this),this._boundingBoxCorners=F$k(8,null)}F$$(F$j,"laya.d3.resource.models.BaseMesh",F$V);var F$t=F$j.prototype;return F$t._getPositions=function(){throw new Error("未Override,请重载该属性！")},F$t._generateBoundingObject=function(){this._boundingSphere=new F$iy(new F$Aj,0),F$iy.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new F$Ly(new F$Aj,new F$Aj),F$Ly.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},F$t.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},F$t.getRenderElement=function(F$y){throw new Error("未Override,请重载该属性！")},F$W(0,F$t,"subMeshCount",function(){return this._subMeshCount}),F$W(0,F$t,"boundingBox",function(){return this._boundingBox}),F$W(0,F$t,"boundingBoxCorners",function(){return this._boundingBoxCorners}),F$W(0,F$t,"boundingSphere",function(){return this._boundingSphere}),F$j}(),F$qj=(function(F$y){function F$j(){F$j.__super.call(this)}F$$(F$j,"laya.d3.component.Script",F$Mj);var F$t=F$j.prototype;F$t.onTriggerEnter=function(F$y){},F$t.onTriggerExit=function(F$y){},F$t.onTriggerStay=function(F$y){},F$W(0,F$t,"isSingleton",function(){return F$j._isSingleton}),F$j._isSingleton=!1}(),function(F$y){function F$j(F$y){this._owner=null,this._sharedMesh=null,F$j.__super.call(this),this._owner=F$y}F$$(F$j,"laya.d3.core.MeshFilter",F$y);var F$t=F$j.prototype;return F$t._sharedMeshLoaded=function(){this.event("loaded")},F$t._destroy=function(){F$y.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},F$W(0,F$t,"sharedMesh",function(){return this._sharedMesh},function(F$y){var F$j=this._sharedMesh;F$j&&F$j._removeReference(),(this._sharedMesh=F$y)._addReference(),this.event("meshchanged",[this,F$j,F$y]),F$y.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),F$W(0,F$t,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),F$W(0,F$t,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),F$W(0,F$t,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),F$W(0,F$t,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),F$j}(F$_j)),F$wj=function(F$y){function F$j(F$y){F$j.__super.call(this,F$y),F$y.meshFilter.on("meshchanged",this,this._onMeshChanged)}F$$(F$j,"laya.d3.core.MeshRender",F$ej);var F$t=F$j.prototype;return F$t._onMeshChanged=function(F$y,F$j,F$t){F$t.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:F$t.once("loaded",this,this._onMeshLoaed)},F$t._onMeshLoaed=function(F$y,F$j){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},F$t._calculateBoundingSphereByInitSphere=function(F$y){var F$j=NaN,F$t=this._owner.transform,F$k=F$t.scale.elements,F$T=Math.abs(F$k[0]),F$Y=Math.abs(F$k[1]),F$A=Math.abs(F$k[2]);F$j=F$Y<=F$T&&F$A<=F$T?F$T:F$A<=F$Y?F$Y:F$A,F$Aj.transformCoordinate(F$y.center,F$t.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=F$y.radius*F$j},F$t._calculateBoundBoxByInitCorners=function(F$y){for(var F$j=this._owner.transform.worldMatrix,F$t=0;F$t<8;F$t++)F$Aj.transformCoordinate(F$y[F$t],F$j,F$ej._tempBoundBoxCorners[F$t]);F$Ly.createfromPoints(F$ej._tempBoundBoxCorners,this._boundingBox)},F$t._calculateBoundingSphere=function(){var F$y=this._owner.meshFilter.sharedMesh;null==F$y||null==F$y.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(F$y.boundingSphere)},F$t._calculateBoundingBox=function(){var F$y=this._owner.meshFilter.sharedMesh;null==F$y||null==F$y.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(F$y.boundingBoxCorners)},F$t._renderUpdate=function(F$y){var F$j=this._owner.transform;if(F$j){this._setShaderValueMatrix4x4(0,F$j.worldMatrix);var F$t=this._owner.getProjectionViewWorldMatrix(F$y);this._setShaderValueMatrix4x4(1,F$t)}else this._setShaderValueMatrix4x4(0,F$yj.DEFAULT),this._setShaderValueMatrix4x4(1,F$y);return F$nj.debugMode&&this._renderRenderableBoundBox(),!0},F$j}(),F$Sj=function(F$j){function F$k(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,F$k.__super.call(this),this._renderState=new F$c,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new F$rj,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new F$jy,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new F$Aj(.7,.7,.7),this.ambientColor=new F$Aj(.212,.227,.259),F$m.shaderHighPrecision&&this.addShaderDefine(F$Pj.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}F$$(F$k,"laya.d3.core.scene.Scene",F$j);var F$y=F$k.prototype;return F$e.imps(F$y,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),F$y._setUrl=function(F$y){this._url=F$y},F$y._getGroup=function(){return this._group},F$y._setGroup=function(F$y){this._group=F$y},F$y._display=function(){F$e.stage._scenes.push(this),F$e.stage._scenes.sort(F$k._sortScenes);for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++){var F$t=this._childs[F$y];F$t.active&&F$t._activeHierarchy()}},F$y._unDisplay=function(){var F$y=F$e.stage._scenes;F$y.splice(F$y.indexOf(this),1);for(var F$j=0,F$t=this._childs.length;F$j<F$t;F$j++){var F$k=this._childs[F$j];F$k.active&&F$k._inActiveHierarchy()}},F$y._addChild3D=function(F$y){F$y.transform._onWorldTransform(),F$y._setBelongScene(this),this.displayedInStage&&F$y.active&&F$y._activeHierarchy()},F$y._removeChild3D=function(F$y){F$y.transform.parent=null,this.displayedInStage&&F$y.active&&F$y._inActiveHierarchy(),F$y._setUnBelongScene()},F$y.initOctree=function(F$y,F$j,F$t,F$k,F$T){void 0===F$T&&(F$T=6),this.treeSize=new F$Aj(F$y,F$j,F$t),this.treeLevel=F$T,this.treeRoot=new F$L(this,0),this.treeRoot.init(F$k,this.treeSize)},F$y._prepareUpdateToRenderState=function(F$y,F$j){F$j.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,F$j.scene=this},F$y._prepareSceneToRender=function(F$y){var F$j=this._lights.length;if(0<F$j)for(var F$t=0,F$k=0;F$k<F$j&&!(this._lights[F$k]._prepareToScene(F$y)&&++F$t>=this._enableLightCount);F$k++);},F$y._updateChilds=function(F$y){for(var F$j=0,F$t=this._childs.length;F$j<F$t;++F$j)this._childs[F$j]._update(F$y)},F$y._preRenderScene=function(F$y,F$j,F$t){var F$k,F$T=F$j._viewMatrix,F$Y=F$j._projectionMatrix,F$A=F$j._projectionViewMatrix,F$X=0,F$I=F$j.camera;for(F$I.useOcclusionCulling?this.treeRoot?F$ty.renderObjectCullingOctree(F$t,this,F$I,F$T,F$Y,F$A):F$ty.renderObjectCulling(F$t,this,F$I,F$T,F$Y,F$A):F$ty.renderObjectCullingNoBoundFrustum(this,F$I,F$T,F$Y,F$A),F$X=0,F$k=this._quenes.length;F$X<F$k;F$X++)this._quenes[F$X]&&this._quenes[F$X]._preRender(F$j)},F$y._clear=function(F$y,F$j){var F$t=F$j._viewport,F$k=F$j.camera,F$T=F$t.x,F$Y=F$k.renderTargetSize.height-F$t.y-F$t.height,F$A=F$t.width,F$X=F$t.height;F$y.viewport(F$T,F$Y,F$A,F$X);var F$I=256,F$b=F$k.renderTarget;switch(F$k.clearFlag){case 0:var F$D=F$k.clearColor;if(F$D){F$y.enable(3089),F$y.scissor(F$T,F$Y,F$A,F$X);var F$l=F$D.elements;F$y.clearColor(F$l[0],F$l[1],F$l[2],F$l[3]),F$I|=16384}if(F$b)switch(F$D||(F$I=16384),F$b.depthStencilFormat){case 33189:F$I|=256;break;case 36168:F$I|=1024;break;case 34041:F$I|=256,F$I|=1024}F$y.clear(F$I),F$D&&F$y.disable(3089);break;case 1:case 2:if(F$b)switch(F$I=16384,F$b.depthStencilFormat){case 33189:F$I|=256;break;case 36168:F$I|=1024;break;case 34041:F$I|=256,F$I|=1024}F$y.clear(F$I);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},F$y._renderScene=function(F$y,F$j){var F$t,F$k,F$T=F$j.camera,F$Y=0;for(F$Y=0;F$Y<2;F$Y++)(F$k=this._quenes[F$Y])&&(F$T.renderTarget?F$k._render(F$j,!0):F$k._render(F$j,!1));if(1===F$T.clearFlag){var F$A=F$T.sky;F$A&&(F$U.setCullFace(F$y,!1),F$U.setDepthFunc(F$y,515),F$U.setDepthMask(F$y,!1),F$A._render(F$j),F$U.setDepthFunc(F$y,513),F$U.setDepthMask(F$y,!0))}for(F$Y=2,F$t=this._quenes.length;F$Y<F$t;F$Y++)(F$k=this._quenes[F$Y])&&(F$k._sortAlpha(F$j.camera.transform.position),F$T.renderTarget?F$k._render(F$j,!0):F$k._render(F$j,!1))},F$y._set3DRenderConfig=function(F$y){F$y.disable(3042),F$U._blend=!1,F$y.blendFunc(770,771),F$U._sFactor=770,F$U._dFactor=771,F$y.disable(2929),F$U._depthTest=!1,F$y.enable(2884),F$U._cullFace=!0,F$y.depthMask(1),F$U._depthMask=!0,F$y.frontFace(2304),F$U._frontFace=2304},F$y._set2DRenderConfig=function(F$y){F$U.setBlend(F$y,!0),F$U.setBlendFunc(F$y,1,771),F$U.setDepthTest(F$y,!1),F$U.setCullFace(F$y,!1),F$U.setDepthMask(F$y,!0),F$U.setFrontFace(F$y,2305),F$y.viewport(0,0,F$D.width,F$D.height)},F$y._parseCustomProps=function(F$y,F$j,F$t,F$k){var F$T=F$k.customProps.lightmaps,F$Y=F$T.length,F$A=this._lightmaps;F$A.length=F$Y;for(var F$X=0;F$X<F$Y;F$X++)F$A[F$X]=F$n.getRes(F$j[F$T[F$X].replace(".exr",".png")]);this.setlightmaps(F$A);var F$I=F$k.customProps.ambientColor;F$I&&(this.ambientColor=new F$Aj(F$I[0],F$I[1],F$I[2]));var F$b=F$k.customProps.fogColor;F$b&&(this.fogColor=new F$Aj(F$b[0],F$b[1],F$b[2]))},F$y._addLight=function(F$y){this._lights.indexOf(F$y)<0&&this._lights.push(F$y)},F$y._removeLight=function(F$y){var F$j=this._lights.indexOf(F$y);0<=F$j&&this._lights.splice(F$j,1)},F$y._updateScene=function(){var F$y=this._renderState;this._prepareUpdateToRenderState(F$m.mainContext,F$y),this._updateComponents(F$y),this._updateChilds(F$y),this._lateUpdateComponents(F$y),this._time+=F$y.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},F$y._updateSceneConch=function(){var F$y=this._renderState;this._prepareUpdateToRenderState(F$m.mainContext,F$y),this._updateComponents(F$y),this._lateUpdateComponents(F$y),this._prepareSceneToRender(F$y);for(var F$j=0,F$t=this._cameraPool.length;F$j<F$t;F$j++){var F$k=this._cameraPool[F$j];(F$y.camera=F$k)._prepareCameraToRender()}},F$y._preRenderShadow=function(F$y,F$j,F$t,F$k,F$T){this.treeRoot?F$ty.renderShadowObjectCullingOctree(this,F$j,F$t,F$k,F$T):F$ty.renderShadowObjectCulling(this,F$j,F$t,F$k,F$T);for(var F$Y=0,F$A=F$t.length;F$Y<F$A;F$Y++)F$t[F$Y]&&F$t[F$Y]._preRender(F$y)},F$y._renderShadowMap=function(F$y,F$j,F$t){var F$k=this.parallelSplitShadowMaps[0];F$k._calcAllLightCameraInfo(F$t);var F$T,F$Y,F$A,F$X=F$k.PSSMNum;if(this._preRenderShadow(F$j,F$k._lightCulling,F$k._shadowQuenes,F$k._lightVPMatrix[0],F$X),this.addShaderDefine(F$$j.SHADERDEFINE_CAST_SHADOW),1<F$X)for(var F$I=0;F$I<F$X;F$I++)F$T=F$k.getRenderTarget(F$I+1),F$k.beginRenderTarget(F$I+1),F$y.clearColor(1,1,1,1),F$y.clear(16640),F$y.viewport(0,0,F$T.width,F$T.height),F$j.camera=F$A=F$k.getLightCamera(F$I),F$A._prepareCameraToRender(),F$A._prepareCameraViewProject(F$A.viewMatrix,F$A.projectionMatrix),F$j._projectionViewMatrix=F$k._lightVPMatrix[F$I+1],(F$Y=F$k._shadowQuenes[F$I])._preRender(F$j),F$Y._renderShadow(F$j,!1),F$k.endRenderTarget(F$I+1);else F$T=F$k.getRenderTarget(1),F$k.beginRenderTarget(1),F$y.clearColor(1,1,1,1),F$y.clear(16640),F$y.viewport(0,0,F$T.width,F$T.height),F$j.camera=F$A=F$k.getLightCamera(0),F$A._prepareCameraToRender(),F$A._prepareCameraViewProject(F$A.viewMatrix,F$A.projectionMatrix),F$j._projectionViewMatrix=F$k._lightVPMatrix[0],(F$Y=F$k._shadowQuenes[0])._preRender(F$j),F$Y._renderShadow(F$j,!0),F$k.endRenderTarget(1);this.removeShaderDefine(F$$j.SHADERDEFINE_CAST_SHADOW)},F$y.addTreeNode=function(F$y){this.treeRoot.addTreeNode(F$y)},F$y.removeTreeNode=function(F$y){this.treeSize&&F$y._treeNode&&F$y._treeNode.removeObject(F$y)},F$y.setlightmaps=function(F$y){this._lightmaps=F$y;for(var F$j=0,F$t=this._renderableSprite3Ds.length;F$j<F$t;F$j++)this._renderableSprite3Ds[F$j]._render._applyLightMapParams()},F$y.getlightmaps=function(){return this._lightmaps},F$y.addChildAt=function(F$y,F$j){if(!(F$y instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(F$y&&F$y.__className));if(!F$y||this.destroyed||F$y===this)return F$y;if(F$y.zOrder&&this._set$P("hasZorder",!0),0<=F$j&&F$j<=this._childs.length){if(F$y._parent===this){var F$t=this.getChildIndex(F$y);this._childs.splice(F$t,1),this._childs.splice(F$j,0,F$y),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$y.conchModel,F$j)),this._childChanged()}else F$y.parent&&F$y.parent.removeChild(F$y),this._childs===F$b.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$j,0,F$y),this.conchModel&&this.conchModel.addChildAt(F$y.conchModel,F$j),(F$y.parent=this)._addChild3D(F$y);return F$y}throw new Error("appendChildAt:The index is out of bounds")},F$y.addChild=function(F$y){if(!(F$y instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$y||this.destroyed||F$y===this)return F$y;if(F$y.zOrder&&this._set$P("hasZorder",!0),F$y._parent===this){var F$j=this.getChildIndex(F$y);F$j!==this._childs.length-1&&(this._childs.splice(F$j,1),this._childs.push(F$y),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$y.conchModel,this._childs.length-1)),this._childChanged())}else F$y.parent&&F$y.parent.removeChild(F$y),this._childs===F$b.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$y),this.conchModel&&this.conchModel.addChildAt(F$y.conchModel,this._childs.length-1),(F$y.parent=this)._childChanged(),this._addChild3D(F$y);return F$y},F$y.removeChildAt=function(F$y){var F$j=this.getChildAt(F$y);return F$j&&(this._removeChild3D(F$j),this._childs.splice(F$y,1),this.conchModel&&this.conchModel.removeChild(F$j.conchModel),F$j.parent=null),F$j},F$y.removeChildren=function(F$y,F$j){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=2147483647),this._childs&&0<this._childs.length){var F$t=this._childs;if(0===F$y&&F$Y<=F$j){var F$k=F$t;this._childs=F$b.ARRAY_EMPTY}else F$k=F$t.splice(F$y,F$j-F$y);for(var F$T=0,F$Y=F$k.length;F$T<F$Y;F$T++)this._removeChild3D(F$k[F$T]),F$k[F$T].parent=null,this.conchModel&&this.conchModel.removeChild(F$k[F$T].conchModel)}return this},F$y.addFrustumCullingObject=function(F$y){this.treeRoot?this.addTreeNode(F$y):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(F$y):this._cullingRenders[this._cullingRendersLength]=F$y,F$y._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},F$y.removeFrustumCullingObject=function(F$y){if(this.treeRoot)this.removeTreeNode(F$y);else{this._cullingRendersLength--;var F$j=F$y._indexInSceneFrustumCullingObjects;if(F$j!==this._cullingRendersLength){var F$t=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[F$j]=F$t)._indexInSceneFrustumCullingObjects=F$j,F$y._indexInSceneFrustumCullingObjects=-1}}},F$y.getRenderQueue=function(F$y){return F$y<3e3?this._quenes[1]||(this._quenes[1]=new F$B(this)):this._quenes[2]||(this._quenes[2]=new F$B(this))},F$y.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new F$B(this)},F$y.addShaderDefine=function(F$y){this._shaderDefineValue|=F$y},F$y.removeShaderDefine=function(F$y){this._shaderDefineValue&=~F$y},F$y.addScript=function(F$y){return this._addComponent(F$y)},F$y.getScriptByType=function(F$y,F$j){return void 0===F$j&&(F$j=0),this._getComponentByType(F$y,F$j)},F$y.getScriptsByType=function(F$y,F$j){this._getComponentsByType(F$y,F$j)},F$y.getScriptByIndex=function(F$y){return this._getComponentByIndex(F$y)},F$y.removeScriptByType=function(F$y,F$j){void 0===F$j&&(F$j=0),this._removeComponentByType(F$y,F$j)},F$y.removeScriptsByType=function(F$y){this._removeComponentByType(F$y)},F$y.removeAllScript=function(){this._removeAllComponent()},F$y.render=function(F$y,F$j,F$t){(F$z._context.ctx._renderKey=0)<this._childs.length&&F$y.addRenderObject(this)},F$y.renderSubmit=function(){var F$y=F$m.mainContext,F$j=this._renderState;this._set3DRenderConfig(F$y),this._prepareSceneToRender(this._renderState);var F$t,F$k=0,F$T=0;if(F$nj.debugMode||F$L.debugMode)for(F$k=0,F$T=this._cameraPool.length;F$k<F$T;F$k++)F$t=this._cameraPool[F$k],F$nj._debugPhasorSprite.begin(1,F$t),F$t.activeInHierarchy&&F$t._renderCamera(F$y,F$j,this),F$nj._debugPhasorSprite.end();else for(F$k=0,F$T=this._cameraPool.length;F$k<F$T;F$k++)(F$t=this._cameraPool[F$k]).activeInHierarchy&&F$t._renderCamera(F$y,F$j,this);return this._set2DRenderConfig(F$y),1},F$y.onAsynLoaded=function(F$y,F$j,F$t){var F$k=F$j[0];if("Scene"!==F$k.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var F$T=F$j[1];F$Vj._createNodeByJson(this,F$k,this,F$T),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),this.destroyed||(F$j.prototype.destroy.call(this,F$y),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,F$n.clearRes(this.url),this.loaded||F$nj._cancelLoadByUrl(this.url))},F$y.getRenderType=function(){return 0},F$y.releaseRender=function(){},F$y._addComponent=function(F$y){var F$j,F$t=this._componentsMap.indexOf(F$y);if(-1===F$t)F$j=[],this._componentsMap.push(F$y),this._typeComponentsIndices.push(F$j);else if(F$j=this._typeComponentsIndices[F$t],this._components[F$j[0]].isSingleton)throw new Error("无法单实例创建"+F$y+"组件，"+F$y+"组件已存在！");var F$k=F$T.getInstance(F$y);F$j.push(this._components.length),this._components.push(F$k);return F$k._initialize(this),F$k},F$y._removeComponent=function(F$y,F$j){var F$t=this._typeComponentsIndices[F$y],F$k=F$t[F$j],F$T=this._components[F$k];this._components.splice(F$k,1),F$t.splice(F$j,1),0===F$t.length&&(this._typeComponentsIndices.splice(F$y,1),this._componentsMap.splice(F$y,1));for(var F$Y=0,F$A=this._componentsMap.length;F$Y<F$A;F$Y++)for(var F$X=(F$t=this._typeComponentsIndices[F$Y]).length-1;0<=F$X;F$X--){var F$I=F$t[F$X];if(!(F$k<F$I))break;F$t[F$X]=--F$I}F$T._destroy()},F$y._getComponentByType=function(F$y,F$j){void 0===F$j&&(F$j=0);var F$t=this._componentsMap.indexOf(F$y);return-1===F$t?null:this._components[this._typeComponentsIndices[F$t][F$j]]},F$y._getComponentsByType=function(F$y,F$j){var F$t=this._componentsMap.indexOf(F$y);if(-1!==F$t){var F$k=this._typeComponentsIndices[F$t],F$T=F$k.length;F$j.length=F$T;for(var F$Y=0;F$Y<F$T;F$Y++)F$j[F$Y]=this._components[F$k[F$Y]]}else F$j.length=0},F$y._getComponentByIndex=function(F$y){return this._components[F$y]},F$y._removeComponentByType=function(F$y,F$j){void 0===F$j&&(F$j=0);var F$t=this._componentsMap.indexOf(F$y);-1!==F$t&&this._removeComponent(F$t,F$j)},F$y._removeComponentsByType=function(F$y){var F$j=this._componentsMap.indexOf(F$y);if(-1!==F$j)for(var F$t=this._typeComponentsIndices[F$j],F$k=0,F$T=F$t.length;F$k<F$T;F$t.length<F$T?F$T--:F$k++)this._removeComponent(F$j,F$k)},F$y._removeAllComponent=function(){for(var F$y=0,F$j=this._componentsMap.length;F$y<F$j;this._componentsMap.length<F$j?F$j--:F$y++)this._removeComponentsByType(this._componentsMap[F$y])},F$y._updateComponents=function(F$y){for(var F$j=0,F$t=this._components.length;F$j<F$t;F$j++){var F$k=this._components[F$j];!F$k.started&&(F$k._start(F$y),F$k.started=!0),F$k.enable&&F$k._update(F$y)}},F$y._lateUpdateComponents=function(F$y){for(var F$j=0;F$j<this._components.length;F$j++){var F$t=this._components[F$j];!F$t.started&&(F$t._start(F$y),F$t.started=!0),F$t.enable&&F$t._lateUpdate(F$y)}},F$y._preRenderUpdateComponents=function(F$y){for(var F$j=0;F$j<this._components.length;F$j++){var F$t=this._components[F$j];!F$t.started&&(F$t._start(F$y),F$t.started=!0),F$t.enable&&F$t._preRenderUpdate(F$y)}},F$y._postRenderUpdateComponents=function(F$y){for(var F$j=0;F$j<this._components.length;F$j++){var F$t=this._components[F$j];!F$t.started&&(F$t._start(F$y),F$t.started=!0),F$t.enable&&F$t._postRenderUpdate(F$y)}},F$W(0,F$y,"_loaded",null,function(F$y){this.__loaded=F$y}),F$W(0,F$y,"fogColor",function(){return this._fogColor},function(F$y){this._fogColor=F$y,this._shaderValues.setValue(0,F$y.elements)}),F$W(0,F$y,"enableFog",function(){return this._enableFog},function(F$y){this._enableFog!==F$y&&((this._enableFog=F$y)?(this.addShaderDefine(F$Pj.SHADERDEFINE_FOG),this.removeShaderDefine(F$Pj.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(F$Pj.SHADERDEFINE_FOG))}),F$W(0,F$y,"url",function(){return this._url}),F$W(0,F$y,"loaded",function(){return this.__loaded}),F$W(0,F$y,"enableDepthFog",function(){return this._enableDepthFog},function(F$y){this._enableDepthFog!=F$y&&((this._enableDepthFog=F$y)?(this.addShaderDefine(F$Pj.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(F$Pj.SHADERDEFINE_FOG)):this.removeShaderDefine(F$Pj.SAHDERDEFINE_DEPTHFOG))}),F$W(0,F$y,"fogStart",function(){return this._fogStart},function(F$y){this._fogStart=F$y,this._shaderValues.setValue(1,F$y)}),F$W(0,F$y,"fogRange",function(){return this._fogRange},function(F$y){this._fogRange=F$y,this._shaderValues.setValue(2,F$y)}),F$W(0,F$y,"ambientColor",function(){return this._ambientColor},function(F$y){this._ambientColor=F$y,this._shaderValues.setValue(21,F$y.elements)}),F$W(0,F$y,"scene",function(){return this}),F$W(0,F$y,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),F$k._sortScenes=function(F$y,F$j){if(F$y.parent!==F$e.stage||F$j.parent!==F$e.stage)return F$y.parent!==F$e.stage&&F$j.parent!==F$e.stage?F$k._sortScenes(F$y.parent,F$j.parent):F$y.parent===F$e.stage?-1:1;var F$t=F$e.stage._childs;return F$t.indexOf(F$y)-F$t.indexOf(F$j)},F$k.load=function(F$y){return F$e.loader.create(F$y,null,null,F$k)},F$k.FOGCOLOR=0,F$k.FOGSTART=1,F$k.FOGRANGE=2,F$k.LIGHTDIRECTION=3,F$k.LIGHTDIRCOLOR=4,F$k.POINTLIGHTPOS=5,F$k.POINTLIGHTRANGE=6,F$k.POINTLIGHTATTENUATION=7,F$k.POINTLIGHTCOLOR=8,F$k.SPOTLIGHTPOS=9,F$k.SPOTLIGHTDIRECTION=10,F$k.SPOTLIGHTSPOT=11,F$k.SPOTLIGHTRANGE=12,F$k.SPOTLIGHTATTENUATION=13,F$k.SPOTLIGHTCOLOR=14,F$k.SHADOWDISTANCE=15,F$k.SHADOWLIGHTVIEWPROJECT=16,F$k.SHADOWMAPPCFOFFSET=17,F$k.SHADOWMAPTEXTURE1=18,F$k.SHADOWMAPTEXTURE2=19,F$k.SHADOWMAPTEXTURE3=20,F$k.AMBIENTCOLOR=21,F$k.TIME=22,F$k}(F$N),F$Hj=function(F$y){function F$j(F$y){F$j.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new F$yj,this._shaderValues=new F$rj,this._colliders=[],this._id=++F$j._uniqueIDCounter,this._transform=new F$vj(this),this.name=F$y||"Sprite3D-"+F$j._nameNumberCounter++,this.layer=F$w.currentCreationLayer,this.active=!0}F$$(F$j,"laya.d3.core.Sprite3D",F$fj);var F$t=F$j.prototype;return F$e.imps(F$t,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),F$t._setUrl=function(F$y){this._url=F$y},F$t._getGroup=function(){return this._group},F$t._setGroup=function(F$y){this._group=F$y},F$t._addChild3D=function(F$y){F$y.transform.parent=this.transform,this._hierarchyAnimator&&(!F$y._hierarchyAnimator&&F$y._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$y,!0,[F$y.name])),this._scene&&(F$y._setBelongScene(this._scene),this._activeInHierarchy&&F$y._active&&F$y._activeHierarchy())},F$t._removeChild3D=function(F$y){F$y.transform.parent=null,this._scene&&(this._activeInHierarchy&&F$y._active&&F$y._inActiveHierarchy(),F$y._setUnBelongScene()),this._hierarchyAnimator&&(F$y._hierarchyAnimator==this._hierarchyAnimator&&F$y._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(F$y,!1,[F$y.name]))},F$t._parseBaseCustomProps=function(F$y){var F$j=this.transform.localPosition;F$y.translate?(F$j.fromArray(F$y.translate),F$j.x*=100,F$j.y*=100,F$j.z*=100):F$j.elements.fill(0),this.transform.localPosition=F$j;var F$t=this.transform.localRotation;F$y.rotation?F$t.fromArray(F$y.rotation):F$t.fromArray([0,0,0,-1]),this.transform.localRotation=F$t;var F$k=this.transform.localScale;F$y.scale?F$k.fromArray(F$y.scale):F$k.elements.fill(1),this.transform.localScale=F$k;var F$T=F$y.layer;null!=F$T&&(this.layer=F$w.getLayerByNumber(F$T))},F$t._parseCustomComponent=function(F$y,F$j,F$t){for(var F$k in F$t){var F$T=F$t[F$k];switch(F$k){case"Animator":var F$Y=this.addComponent(Animator);if(F$T.avatarPath)F$Y.avatar=F$n.getRes(F$j[F$T.avatarPath]);else{var F$A=F$T.avatar;if(F$A){F$Y.avatar=F$n.getRes(F$j[F$A.path]);var F$X=F$A.linkSprites;F$X&&F$y.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[F$Y,F$X])}}for(var F$I=F$T.clipPaths,F$b=F$I.length,F$D=0;F$D<F$b;F$D++)F$Y.addClip(F$n.getRes(F$j[F$I[F$D]]));F$Y.clip=F$n.getRes(F$j[F$I[0]]);var F$l=F$T.playOnWake;void 0!==F$l&&(F$Y.playOnWake=F$l);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var F$r=this.addComponent(SphereCollider);F$r.isTrigger=F$T.isTrigger;var F$$=F$r.center;F$$.fromArray(F$T.center),F$r.center=F$$,F$r.radius=F$T.radius;break;case"BoxCollider":var F$W=this.addComponent(BoxCollider);F$W.isTrigger=F$T.isTrigger,F$W.center.fromArray(F$T.center);var F$z=F$W.size;F$z.fromArray(F$T.size),F$W.size=F$z;break;case"MeshCollider":this.addComponent(MeshCollider)}}},F$t._onRootNodeHierarchyLoaded=function(F$y,F$j){for(var F$t in F$j){for(var F$k=this,F$T=F$j[F$t],F$Y=0,F$A=F$T.length;F$Y<F$A;F$Y++){var F$X=F$T[F$Y];if(""===F$X)break;if(!(F$k=F$k.getChildByName(F$X)))break}F$k&&F$y.linkSprite3DToAvatarNode(F$t,F$k)}},F$t._setHierarchyAnimator=function(F$y,F$j){this._changeHierarchyAnimator(F$y);for(var F$t=0,F$k=this._childs.length;F$t<F$k;F$t++){var F$T=this._childs[F$t];F$T._hierarchyAnimator==F$j&&F$T._setHierarchyAnimator(F$y,F$j)}},F$t._clearHierarchyAnimator=function(F$y,F$j){this._changeHierarchyAnimator(F$j);for(var F$t=0,F$k=this._childs.length;F$t<F$k;F$t++){var F$T=this._childs[F$t];F$T._hierarchyAnimator==F$y&&F$T._clearHierarchyAnimator(F$y,F$j)}},F$t._getAnimatorToLinkSprite3D=function(F$y,F$j,F$t){var F$k=this.getComponentByType(Animator);if(F$k&&(F$k.avatar?F$k.avatar._version||F$y._setAnimatorToLinkAvatar(F$k,F$j):F$y._setAnimatorToLinkSprite3DNoAvatar(F$k,F$j,F$t)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){F$t.unshift(this._parent.name);var F$T=this._parent;F$T._hierarchyAnimator&&F$T._getAnimatorToLinkSprite3D(F$y,F$j,F$t)}},F$t._setAnimatorToLinkSprite3DNoAvatar=function(F$y,F$j,F$t){var F$k=0,F$T=0;for(F$k=0,F$T=F$y.getClipCount();F$k<F$T;F$k++)F$y._handleSpriteOwnersBySprite(F$k,F$j,F$t,this);for(F$k=0,F$T=this._childs.length;F$k<F$T;F$k++){var F$Y=this._childs[F$k],F$A=F$t.length;F$t.push(F$Y.name),F$Y._setAnimatorToLinkSprite3DNoAvatar(F$y,F$j,F$t),F$t.splice(F$A,1)}},F$t._changeHierarchyAnimator=function(F$y){this._hierarchyAnimator=F$y},F$t._isLinkSpriteToAnimationNode=function(F$y,F$j,F$t){var F$k=F$y._avatarNodes.indexOf(F$j),F$T=F$y._cacheSpriteToNodesMap;if(F$t)this._transform.dummy=F$j.transform,F$y._cacheNodesToSpriteMap[F$k]=F$T.length,F$T.push(F$k);else{this._transform.dummy=null;var F$Y=F$y._cacheNodesToSpriteMap[F$k];F$y._cacheNodesToSpriteMap[F$k]=null,F$T.splice(F$Y,1)}},F$t._setBelongScene=function(F$y){this._scene=F$y;for(var F$j=0,F$t=this._childs.length;F$j<F$t;F$j++)this._childs[F$j]._setBelongScene(F$y)},F$t._setUnBelongScene=function(){this._scene=null;for(var F$y=0,F$j=this._childs.length;F$y<F$j;F$y++)this._childs[F$y]._setUnBelongScene()},F$t._activeHierarchy=function(){var F$y=0,F$j=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),F$y=0,F$j=this._colliders.length;F$y<F$j;F$y++)this._layer._addCollider(this._colliders[F$y]);for(this.event("activeinhierarchychanged",!0),F$y=0,F$j=this._childs.length;F$y<F$j;F$y++){var F$t=this._childs[F$y];F$t._active&&F$t._activeHierarchy()}},F$t._inActiveHierarchy=function(){var F$y=0,F$j=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),F$y=0,F$j=this._colliders.length;F$y<F$j;F$y++){var F$t=this._colliders[F$y];F$t._clearCollsionMap(),this._layer._removeCollider(F$t)}for(this.event("activeinhierarchychanged",!1),F$y=0,F$j=this._childs.length;F$y<F$j;F$y++){var F$k=this._childs[F$y];F$k._active&&F$k._inActiveHierarchy()}},F$t.addComponent=function(F$y){var F$j,F$t=this._componentsMap.indexOf(F$y);if(-1===F$t)F$j=[],this._componentsMap.push(F$y),this._typeComponentsIndices.push(F$j);else if(F$j=this._typeComponentsIndices[F$t],this._components[F$j[0]].isSingleton)throw new Error("无法单实例创建"+F$y+"组件，"+F$y+"组件已存在！");var F$k=F$T.getInstance(F$y);return F$j.push(this._components.length),this._components.push(F$k),F$k instanceof laya.d3.component.Script&&this._scripts.push(F$k),F$k._initialize(this),F$k},F$t._removeComponent=function(F$y,F$j){var F$t,F$k=0,F$T=this._typeComponentsIndices[F$y],F$Y=F$T[F$j],F$A=this._components[F$Y];for(F$A instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(F$A),1),F$T.splice(F$j,1),0===F$T.length&&(this._typeComponentsIndices.splice(F$y,1),this._componentsMap.splice(F$y,1)),F$k=0,F$t=this._componentsMap.length;F$k<F$t;F$k++)for(var F$X=(F$T=this._typeComponentsIndices[F$k]).length-1;0<=F$X;F$X--){var F$I=F$T[F$X];if(!(F$Y<F$I))break;F$T[F$X]=--F$I}F$A._destroy()},F$t._clearSelfRenderObjects=function(){},F$t._addSelfRenderObjects=function(){},F$t._parseCustomProps=function(F$y,F$j,F$t,F$k){},F$t._updateChilds=function(F$y){var F$j=this._childs.length;if(0!==F$j)for(var F$t=0;F$t<F$j;++F$t)this._childs[F$t]._update(F$y)},F$t._getSortID=function(F$y,F$j){return 1e3*F$j.id+F$y._getVertexBuffer().vertexDeclaration.id},F$t._update=function(F$y){(F$y.owner=this)._activeInHierarchy&&(this._updateComponents(F$y),this._lateUpdateComponents(F$y),F$P.spriteCount++,this._childs.length&&this._updateChilds(F$y))},F$t.getProjectionViewWorldMatrix=function(F$y){return F$yj.multiply(F$y,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},F$t.loadHierarchy=function(F$y){this.addChild(laya.d3.core.Sprite3D.load(F$y))},F$t.addChildAt=function(F$y,F$j){if(!(F$y instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$y||this.destroyed||F$y===this)return F$y;if(F$y.zOrder&&this._set$P("hasZorder",!0),0<=F$j&&F$j<=this._childs.length){if(F$y._parent===this){var F$t=this.getChildIndex(F$y);this._childs.splice(F$t,1),this._childs.splice(F$j,0,F$y),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$y.conchModel,F$j)),this._childChanged()}else F$y.parent&&F$y.parent.removeChild(F$y),this._childs===F$b.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(F$j,0,F$y),this.conchModel&&this.conchModel.addChildAt(F$y.conchModel,F$j),(F$y.parent=this)._addChild3D(F$y);return F$y}throw new Error("appendChildAt:The index is out of bounds")},F$t.addChild=function(F$y){if(!(F$y instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!F$y||this.destroyed||F$y===this)return F$y;if(F$y.zOrder&&this._set$P("hasZorder",!0),F$y._parent===this){var F$j=this.getChildIndex(F$y);F$j!==this._childs.length-1&&(this._childs.splice(F$j,1),this._childs.push(F$y),this.conchModel&&(this.conchModel.removeChild(F$y.conchModel),this.conchModel.addChildAt(F$y.conchModel,this._childs.length-1)),this._childChanged())}else F$y.parent&&F$y.parent.removeChild(F$y),this._childs===F$b.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(F$y),this.conchModel&&this.conchModel.addChildAt(F$y.conchModel,this._childs.length-1),(F$y.parent=this)._childChanged(),this._addChild3D(F$y);return F$y},F$t.removeChildAt=function(F$y){var F$j=this.getChildAt(F$y);return F$j&&(this._removeChild3D(F$j),this._childs.splice(F$y,1),this.conchModel&&this.conchModel.removeChild(F$j.conchModel),F$j.parent=null),F$j},F$t.removeChildren=function(F$y,F$j){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=2147483647),this._childs&&0<this._childs.length){var F$t=this._childs;if(0===F$y&&F$Y<=F$j){var F$k=F$t;this._childs=F$b.ARRAY_EMPTY}else F$k=F$t.splice(F$y,F$j-F$y);for(var F$T=0,F$Y=F$k.length;F$T<F$Y;F$T++)this._removeChild3D(F$k[F$T]),F$k[F$T].parent=null,this.conchModel&&this.conchModel.removeChild(F$k[F$T].conchModel)}return this},F$t.onAsynLoaded=function(F$y,F$j,F$t){var F$k=F$j[0];if("Sprite3D"!==F$k.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var F$T=F$j[1];F$Vj._createNodeByJson(this,F$k,this,F$T),this.event("hierarchyloaded",[this]),this.__loaded=!0},F$t.cloneTo=function(F$y){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var F$j=F$y;F$j.name=this.name,F$j._destroyed=this._destroyed,F$j.timer=this.timer,F$j._$P=this._$P,F$j.active=this._active;var F$t=F$j.transform.localPosition;this.transform.localPosition.cloneTo(F$t),F$j.transform.localPosition=F$t;var F$k=F$j.transform.localRotation;this.transform.localRotation.cloneTo(F$k),F$j.transform.localRotation=F$k;var F$T=F$j.transform.localScale;this.transform.localScale.cloneTo(F$T),F$j.transform.localScale=F$T,F$j.isStatic=this.isStatic;var F$Y=0,F$A=0;for(F$Y=0,F$A=this._componentsMap.length;F$Y<F$A;F$Y++){var F$X=F$j.addComponent(this._componentsMap[F$Y]);this._components[F$Y]._cloneTo(F$X)}for(F$Y=0,F$A=this._childs.length;F$Y<F$A;F$Y++)F$j.addChild(this._childs[F$Y].clone());var F$I=F$j.getComponentByType(Animator);if(F$I){var F$b=F$I._linkSpritesData;if(F$b)for(var F$D in F$b){for(var F$l=F$b[F$D],F$r=F$j,F$$=0,F$W=F$l.length;F$$<F$W&&(F$r=F$r.getChildByName(F$l[F$$]));F$$++);if(F$r){var F$z=F$I._avatarNodeMap[F$D];F$r._isLinkSpriteToAnimationNode(F$I,F$z,!0)}}}},F$t.clone=function(){var F$y=new this.constructor;return this.cloneTo(F$y),F$y},F$t.destroy=function(F$y){if(void 0===F$y&&(F$y=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,F$y);var F$j,F$t=0;for(F$t=0,F$j=this._components.length;F$t<F$j;F$t++)this._components[F$t]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,F$n.clearRes(this.url),this.loaded||F$nj._cancelLoadByUrl(this.url)}},F$t._handleSpriteToAvatar=function(F$y,F$j){F$y._avatarNodes;var F$t=F$y._avatarNodeMap[this.name];F$t&&F$t.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(F$y,F$t,F$j)},F$t._setAnimatorToLinkAvatar=function(F$y,F$j){this._handleSpriteToAvatar(F$y,F$j);for(var F$t=0,F$k=this._childs.length;F$t<F$k;F$t++){this._childs[F$t]._setAnimatorToLinkAvatar(F$y,F$j)}},F$W(0,F$t,"activeInHierarchy",function(){return this._activeInHierarchy}),F$W(0,F$t,"_loaded",null,function(F$y){this.__loaded=F$y}),F$W(0,F$t,"active",function(){return this._active},function(F$y){this._active!==F$y&&(this._active=F$y,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(F$y?this._activeHierarchy():this._inActiveHierarchy()))}),F$W(0,F$t,"componentsCount",function(){return this._components.length}),F$W(0,F$t,"loaded",function(){return this.__loaded}),F$W(0,F$t,"id",function(){return this._id}),F$W(0,F$t,"url",function(){return this._url}),F$W(0,F$t,"layer",function(){return this._layer},function(F$y){if(this._layer!==F$y){if(!F$y)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var F$j=0,F$t=this._colliders.length;if(this._layer)for(F$j=0;F$j<F$t;F$j++)this._layer._removeCollider(this._colliders[F$j]);for(F$j=0;F$j<F$t;F$j++)F$y._addCollider(this._colliders[F$j])}this._layer=F$y,this.event("layerchanged",F$y)}}),F$W(0,F$t,"scene",function(){return this._scene}),F$W(0,F$t,"transform",function(){return this._transform}),F$j.instantiate=function(F$y,F$j,F$t,F$k,F$T){void 0===F$t&&(F$t=!0);var F$Y=F$y.clone();F$j&&F$j.addChild(F$Y);var F$A=F$Y.transform;if(F$t){var F$X=F$A.worldMatrix;F$y.transform.worldMatrix.cloneTo(F$X),F$A.worldMatrix=F$X}else F$k&&(F$A.position=F$k),F$T&&(F$A.rotation=F$T);return F$Y},F$j.load=function(F$y){return F$e.loader.create(F$y,null,null,F$j)},F$j.WORLDMATRIX=0,F$j.MVPMATRIX=1,F$j._uniqueIDCounter=0,F$j._nameNumberCounter=0,F$j}(),F$Kj=function(F$y){function F$D(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],F$D.__super.call(this),!F$y||!F$j)throw"Shader Error";this._id=++F$D._count,this._vs=F$y,this._ps=F$j,this._attributeMap=F$t,this._sceneUniformMap=F$k,this._cameraUniformMap=F$T,this._spriteUniformMap=F$Y,this._materialUniformMap=F$A,this._renderElementUniformMap=F$X,this._precompile=F$I,this._define=F$b,this._precompile&&F$D.extCompileObj&&F$D.extCompileFunc?F$D.extCompileFunc.call(F$D.extCompileObj,F$y,F$j,F$b):this.recreateResource()}F$$(F$D,"laya.d3.shader.Shader3D",F$t);var F$j=F$D.prototype;return F$j.recreateResource=function(){F$q.now();this._compile(),this.completeCreate(),this.memorySize=0},F$j.disposeResource=function(){F$m.mainContext.deleteShader(this._vshader),F$m.mainContext.deleteShader(this._pshader),F$m.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},F$j._compile=function(){if(!F$m.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var F$y=[this._vs,this._ps],F$j=F$m.mainContext;if(this._program=F$j.createProgram(),this._vshader=F$D._createShader(F$j,F$y[0],35633),this._pshader=F$D._createShader(F$j,F$y[1],35632),F$j.attachShader(this._program,this._vshader),F$j.attachShader(this._program,this._pshader),F$j.linkProgram(this._program),!F$z.isConchApp&&F$Pj.debugMode&&!F$j.getProgramParameter(this._program,35714))throw F$j.getProgramInfoLog(this._program);var F$t,F$k=0,F$T=0,F$Y=0;for(F$Y=F$z.isConchApp?F$j.getProgramParameterEx(this._vs,this._ps,"",35721):F$j.getProgramParameter(this._program,35721),F$k=0;F$k<F$Y;F$k++){var F$A=null;F$t={vartype:"attribute",ivartype:0,attrib:F$A=F$z.isConchApp?F$j.getActiveAttribEx(this._vs,this._ps,"",F$k):F$j.getActiveAttrib(this._program,F$k),location:F$j.getAttribLocation(this._program,F$A.name),name:F$A.name,type:F$A.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(F$t)}var F$X=0;for(F$X=F$z.isConchApp?F$j.getProgramParameterEx(this._vs,this._ps,"",35718):F$j.getProgramParameter(this._program,35718),F$k=0;F$k<F$X;F$k++){var F$I=null;F$I=F$z.isConchApp?F$j.getActiveUniformEx(this._vs,this._ps,"",F$k):F$j.getActiveUniform(this._program,F$k),0<(F$t={vartype:"uniform",ivartype:1,attrib:F$A,location:F$j.getUniformLocation(this._program,F$I.name),name:F$I.name,type:F$I.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(F$t.name=F$t.name.substr(0,F$t.name.length-3),F$t.isArray=!0,F$t.location=F$j.getUniformLocation(this._program,F$t.name)),this._uniformParams.push(F$t)}for(F$k=0,F$T=this._attributeParams.length;F$k<F$T;F$k++)(F$t=this._attributeParams[F$k]).indexOfParams=F$k,F$t.index=1,F$t.value=[F$t.location,null],F$t.codename=F$t.name,F$t.name=null!=this._attributeMap[F$t.codename]?this._attributeMap[F$t.codename]:F$t.codename,this._attributeParamsMap.push(F$t.name),this._attributeParamsMap.push(F$t),F$t._this=this,F$t.uploadedValue=[],F$t.fun=this._attribute;for(F$k=0,F$T=this._uniformParams.length;F$k<F$T;F$k++)switch((F$t=this._uniformParams[F$k]).indexOfParams=F$k,F$t.index=1,F$t.value=[F$t.location,null],F$t.codename=F$t.name,null!=this._sceneUniformMap[F$t.codename]?(F$t.name=this._sceneUniformMap[F$t.codename],this._sceneUniformParamsMap.push(F$t.name),this._sceneUniformParamsMap.push(F$t)):null!=this._cameraUniformMap[F$t.codename]?(F$t.name=this._cameraUniformMap[F$t.codename],this._cameraUniformParamsMap.push(F$t.name),this._cameraUniformParamsMap.push(F$t)):null!=this._spriteUniformMap[F$t.codename]?(F$t.name=this._spriteUniformMap[F$t.codename],this._spriteUniformParamsMap.push(F$t.name),this._spriteUniformParamsMap.push(F$t)):null!=this._materialUniformMap[F$t.codename]?(F$t.name=this._materialUniformMap[F$t.codename],this._materialUniformParamsMap.push(F$t.name),this._materialUniformParamsMap.push(F$t)):null!=this._renderElementUniformMap[F$t.codename]?(F$t.name=this._renderElementUniformMap[F$t.codename],this._renderElementUniformParamsMap.push(F$t.name),this._renderElementUniformParamsMap.push(F$t)):console.log("Shader:can't find uinform name:"+F$t.codename+" in shader file."),F$t._this=this,F$t.uploadedValue=[],F$t.type){case 5124:F$t.fun=F$t.isArray?this._uniform1iv:this._uniform1i;break;case 5126:F$t.fun=F$t.isArray?this._uniform1fv:this._uniform1f;break;case 35664:F$t.fun=F$t.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:F$t.fun=F$t.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:F$t.fun=F$t.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:F$t.fun=this._uniform_sampler2D;break;case 35680:F$t.fun=this._uniform_samplerCube;break;case 35676:F$t.fun=this._uniformMatrix4fv;break;case 35670:F$t.fun=this._uniform1i;break;case 35674:F$t.fun=this._uinformMatrix2fv;break;case 35675:F$t.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},F$j._attribute=function(F$y,F$j){var F$t=F$m.mainContext,F$k=F$X._enableAtributes,F$T=F$y.location;return F$k[F$T]||F$t.enableVertexAttribArray(F$T),F$t.vertexAttribPointer(F$T,F$j[0],F$j[1],F$j[2],F$j[3],F$j[4]),F$k[F$T]=F$X._bindVertexBuffer,1},F$j._uniform1f=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j?(F$m.mainContext.uniform1f(F$y.location,F$t[0]=F$j),1):0},F$j._uniform1fv=function(F$y,F$j){if(F$j.length<4){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$m.mainContext.uniform1fv(F$y.location,F$j),F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3],1):0}return F$m.mainContext.uniform1fv(F$y.location,F$j),1},F$j._uniform_vec2=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]?(F$m.mainContext.uniform2f(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1]),1):0},F$j._uniform_vec2v=function(F$y,F$j){if(F$j.length<2){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$m.mainContext.uniform2fv(F$y.location,F$j),F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3],1):0}return F$m.mainContext.uniform2fv(F$y.location,F$j),1},F$j._uniform_vec3=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]?(F$m.mainContext.uniform3f(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2]),1):0},F$j._uniform_vec3v=function(F$y,F$j){return F$m.mainContext.uniform3fv(F$y.location,F$j),1},F$j._uniform_vec4=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$m.mainContext.uniform4f(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3]),1):0},F$j._uniform_vec4v=function(F$y,F$j){return F$m.mainContext.uniform4fv(F$y.location,F$j),1},F$j._uniformMatrix2fv=function(F$y,F$j){return F$m.mainContext.uniformMatrix2fv(F$y.location,!1,F$j),1},F$j._uniformMatrix3fv=function(F$y,F$j){return F$m.mainContext.uniformMatrix3fv(F$y.location,!1,F$j),1},F$j._uniformMatrix4fv=function(F$y,F$j){return F$m.mainContext.uniformMatrix4fv(F$y.location,!1,F$j),1},F$j._uinformMatrix2fv=function(F$y,F$j){return F$m.mainContext.uniformMatrix2fv(F$y.location,!1,F$j),1},F$j._uinformMatrix3fv=function(F$y,F$j){return F$m.mainContext.uniformMatrix3fv(F$y.location,!1,F$j),1},F$j._uniform1i=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j?(F$m.mainContext.uniform1i(F$y.location,F$t[0]=F$j),1):0},F$j._uniform1iv=function(F$y,F$j){return F$m.mainContext.uniform1iv(F$y.location,F$j),1},F$j._uniform_ivec2=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]?(F$m.mainContext.uniform2i(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1]),1):0},F$j._uniform_ivec2v=function(F$y,F$j){return F$m.mainContext.uniform2iv(F$y.location,F$j),1},F$j._uniform_vec3i=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]?(F$m.mainContext.uniform3i(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2]),1):0},F$j._uniform_vec3vi=function(F$y,F$j){return F$m.mainContext.uniform3iv(F$y.location,F$j),1},F$j._uniform_vec4i=function(F$y,F$j){var F$t=F$y.uploadedValue;return F$t[0]!==F$j[0]||F$t[1]!==F$j[1]||F$t[2]!==F$j[2]||F$t[3]!==F$j[3]?(F$m.mainContext.uniform4i(F$y.location,F$t[0]=F$j[0],F$t[1]=F$j[1],F$t[2]=F$j[2],F$t[3]=F$j[3]),1):0},F$j._uniform_vec4vi=function(F$y,F$j){return F$m.mainContext.uniform4iv(F$y.location,F$j),1},F$j._uniform_sampler2D=function(F$y,F$j){var F$t=F$j.source||F$j.defaulteTexture.source,F$k=F$m.mainContext,F$T=F$y.uploadedValue;if(null!=F$T[0])return F$k.activeTexture(F$D._TEXTURES[F$T[0]]),F$t&&F$U.bindTexture(F$k,3553,F$t),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$T[0]=this._curActTexIndex,F$k.uniform1i(F$y.location,this._curActTexIndex),F$k.activeTexture(F$D._TEXTURES[this._curActTexIndex]),F$t&&F$U.bindTexture(F$k,3553,F$t),this._curActTexIndex++,1},F$j._uniform_samplerCube=function(F$y,F$j){var F$t=F$j.source||F$j.defaulteTexture.source,F$k=F$m.mainContext,F$T=F$y.uploadedValue;if(null!=F$T[0])return F$k.activeTexture(F$D._TEXTURES[F$T[0]]),F$t?F$U.bindTexture(F$k,34067,F$t):F$U.bindTexture(F$k,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return F$T[0]=this._curActTexIndex,F$k.uniform1i(F$y.location,this._curActTexIndex),F$k.activeTexture(F$D._TEXTURES[this._curActTexIndex]),F$t?F$U.bindTexture(F$k,34067,F$t):F$U.bindTexture(F$k,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},F$j._noSetValue=function(F$y){console.log("no....:"+F$y.name)},F$j.bind=function(){return F$t.activeShader=this,(F$t.bindShader=this).activeResource(),F$U.UseProgram(this._program)},F$j.uploadAttributes=function(F$y,F$j){for(var F$t,F$k,F$T=0,F$Y=0,F$A=this._attributeParamsMap.length;F$Y<F$A;F$Y+=2)F$k=this._attributeParamsMap[F$Y+1],null!=(F$t=F$y[this._attributeParamsMap[F$Y]])&&(F$j&&F$j[F$k.name]&&F$j[F$k.name].bind(),F$T+=F$k.fun.call(this,F$k,F$t));F$P.shaderCall+=F$T},F$j.uploadAttributesX=function(F$y,F$j){for(var F$t,F$k,F$T=0,F$Y=0,F$A=this._attributeParamsMap.length;F$Y<F$A;F$Y+=2)F$k=this._attributeParamsMap[F$Y+1],null!=(F$t=F$y[this._attributeParamsMap[F$Y]])&&(F$j._bind(),F$T+=F$k.fun.call(this,F$k,F$t));F$P.shaderCall+=F$T},F$j.uploadSceneUniforms=function(F$y){for(var F$j,F$t,F$k=0,F$T=0,F$Y=this._sceneUniformParamsMap.length;F$T<F$Y;F$T+=2)F$t=this._sceneUniformParamsMap[F$T+1],null!=(F$j=F$y[this._sceneUniformParamsMap[F$T]])&&(F$k+=F$t.fun.call(this,F$t,F$j));F$P.shaderCall+=F$k},F$j.uploadCameraUniforms=function(F$y){for(var F$j,F$t,F$k=0,F$T=0,F$Y=this._cameraUniformParamsMap.length;F$T<F$Y;F$T+=2)F$t=this._cameraUniformParamsMap[F$T+1],null!=(F$j=F$y[this._cameraUniformParamsMap[F$T]])&&(F$k+=F$t.fun.call(this,F$t,F$j));F$P.shaderCall+=F$k},F$j.uploadSpriteUniforms=function(F$y){for(var F$j,F$t,F$k=0,F$T=0,F$Y=this._spriteUniformParamsMap.length;F$T<F$Y;F$T+=2)F$t=this._spriteUniformParamsMap[F$T+1],null!=(F$j=F$y[this._spriteUniformParamsMap[F$T]])&&(F$k+=F$t.fun.call(this,F$t,F$j));F$P.shaderCall+=F$k},F$j.uploadMaterialUniforms=function(F$y){for(var F$j,F$t,F$k=0,F$T=0,F$Y=this._materialUniformParamsMap.length;F$T<F$Y;F$T+=2)F$t=this._materialUniformParamsMap[F$T+1],null!=(F$j=F$y[this._materialUniformParamsMap[F$T]])&&(F$k+=F$t.fun.call(this,F$t,F$j));F$P.shaderCall+=F$k},F$j.uploadRenderElementUniforms=function(F$y){for(var F$j,F$t,F$k=0,F$T=0,F$Y=this._renderElementUniformParamsMap.length;F$T<F$Y;F$T+=2)F$t=this._renderElementUniformParamsMap[F$T+1],null!=(F$j=F$y[this._renderElementUniformParamsMap[F$T]])&&(F$k+=F$t.fun.call(this,F$t,F$j));F$P.shaderCall+=F$k},F$D.create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){return new F$D(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b)},F$D.addInclude=function(F$y,F$j){F$M.addInclude(F$y,F$j)},F$D._createShader=function(F$y,F$j,F$t){var F$k=F$y.createShader(F$t);if(F$y.shaderSource(F$k,F$j),F$y.compileShader(F$k),F$Pj.debugMode&&!F$y.getShaderParameter(F$k,35713))throw F$y.getShaderInfoLog(F$k);return F$k},F$D.PERIOD_RENDERELEMENT=0,F$D.PERIOD_MATERIAL=1,F$D.PERIOD_SPRITE=2,F$D.PERIOD_CAMERA=3,F$D.PERIOD_SCENE=4,F$D._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],F$D._count=0,F$D._preCompile=!1,F$D.extCompileFunc=null,F$D.extCompileObj=null,F$l(F$D,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new F$d}]),F$D}(),F$xj=function(F$X){function F$I(){this._transformUV=null,F$I.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new F$Aj(.6,.6,.6)),this._setColor(10,new F$Aj(1,1,1)),this._setColor(11,new F$Xj(1,1,1,8)),this._setColor(12,new F$Aj(1,1,1)),this._setColor(7,new F$Xj(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new F$Xj(1,1,0,0)),this.renderMode=1}F$$(F$I,"laya.d3.core.material.StandardMaterial",F$X);var F$y=F$I.prototype;return F$y.disableLight=function(){this._addDisablePublicShaderDefine(F$Pj.SHADERDEFINE_POINTLIGHT|F$Pj.SHADERDEFINE_SPOTLIGHT|F$Pj.SHADERDEFINE_DIRECTIONLIGHT)},F$y.disableFog=function(){this._addDisablePublicShaderDefine(F$Pj.SHADERDEFINE_FOG)},F$y.onAsynLoaded=function(F$y,F$j,F$t){var F$k=F$j[0];if(F$k.version)F$X.prototype.onAsynLoaded.call(this,F$y,F$j,F$t);else{var F$T=F$j[1],F$Y=F$k.props;for(var F$A in F$Y)this[F$A]=F$Y[F$A];F$I._parseStandardMaterial(F$T,this,F$k),this._endLoaded()}},F$y.cloneTo=function(F$y){F$X.prototype.cloneTo.call(this,F$y);var F$j=F$y;this._transformUV&&(F$j._transformUV=this._transformUV.clone())},F$W(0,F$y,"ambientColor",function(){return this._getColor(9)},function(F$y){this._setColor(9,F$y)}),F$W(0,F$y,"ambientTexture",function(){return this._getTexture(5)},function(F$y){F$y?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,F$y)}),F$W(0,F$y,"renderMode",null,function(F$y){switch(F$y){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(F$I.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(F$y)}),F$W(0,F$y,"reflectColor",function(){return this._getColor(12)},function(F$y){this._setColor(12,F$y)}),F$W(0,F$y,"tilingOffset",function(){return this._getColor(15)},function(F$y){if(F$y){var F$j=F$y.elements;1!=F$j[0]||1!=F$j[1]||0!=F$j[2]||0!=F$j[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,F$y)}),F$W(0,F$y,"albedo",function(){return this._getColor(7)},function(F$y){this._setColor(7,F$y)}),F$W(0,F$y,"diffuseColor",function(){return this._getColor(10)},function(F$y){this._setColor(10,F$y)}),F$W(0,F$y,"albedoColor",function(){return this._getColor(7)},function(F$y){this._setColor(7,F$y)}),F$W(0,F$y,"specularColor",function(){return this._getColor(11)},function(F$y){this._setColor(11,F$y)}),F$W(0,F$y,"diffuseTexture",function(){return this._getTexture(1)},function(F$y){F$y?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,F$y)}),F$W(0,F$y,"normalTexture",function(){return this._getTexture(2)},function(F$y){F$y?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,F$y)}),F$W(0,F$y,"specularTexture",function(){return this._getTexture(3)},function(F$y){F$y?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,F$y)}),F$W(0,F$y,"emissiveTexture",function(){return this._getTexture(4)},function(F$y){F$y?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,F$y)}),F$W(0,F$y,"reflectTexture",function(){return this._getTexture(6)},function(F$y){F$y?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,F$y)}),F$W(0,F$y,"transformUV",function(){return this._transformUV},function(F$y){this._transformUV=F$y,this._setMatrix4x4(13,F$y.matrix),F$y?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,F$y.matrix.elements,0)}),F$I.__init__=function(){F$I.SHADERDEFINE_DIFFUSEMAP=F$I.shaderDefines.registerDefine("DIFFUSEMAP"),F$I.SHADERDEFINE_NORMALMAP=F$I.shaderDefines.registerDefine("NORMALMAP"),F$I.SHADERDEFINE_SPECULARMAP=F$I.shaderDefines.registerDefine("SPECULARMAP"),F$I.SHADERDEFINE_EMISSIVEMAP=F$I.shaderDefines.registerDefine("EMISSIVEMAP"),F$I.SHADERDEFINE_AMBIENTMAP=F$I.shaderDefines.registerDefine("AMBIENTMAP"),F$I.SHADERDEFINE_REFLECTMAP=F$I.shaderDefines.registerDefine("REFLECTMAP"),F$I.SHADERDEFINE_UVTRANSFORM=F$I.shaderDefines.registerDefine("UVTRANSFORM"),F$I.SHADERDEFINE_TILINGOFFSET=F$I.shaderDefines.registerDefine("TILINGOFFSET"),F$I.SHADERDEFINE_ADDTIVEFOG=F$I.shaderDefines.registerDefine("ADDTIVEFOG")},F$I.load=function(F$y){return F$e.loader.create(F$y,null,null,F$I)},F$I._parseStandardMaterial=function(F$y,F$j,F$t){var F$k=F$t.customProps,F$T=F$k.ambientColor;F$j.ambientColor=new F$Aj(F$T[0],F$T[1],F$T[2]);var F$Y=F$k.diffuseColor;F$j.diffuseColor=new F$Aj(F$Y[0],F$Y[1],F$Y[2]);var F$A=F$k.specularColor;F$j.specularColor=new F$Xj(F$A[0],F$A[1],F$A[2],F$A[3]);var F$X=F$k.reflectColor;F$j.reflectColor=new F$Aj(F$X[0],F$X[1],F$X[2]);var F$I=F$k.albedoColor;F$I&&(F$j.albedo=new F$Xj(F$I[0],F$I[1],F$I[2],F$I[3]));var F$b=F$k.diffuseTexture.texture2D;F$b&&(F$j.diffuseTexture=F$n.getRes(F$y[F$b]));var F$D=F$k.normalTexture.texture2D;F$D&&(F$j.normalTexture=F$n.getRes(F$y[F$D]));var F$l=F$k.specularTexture.texture2D;F$l&&(F$j.specularTexture=F$n.getRes(F$y[F$l]));var F$r=F$k.emissiveTexture.texture2D;F$r&&(F$j.emissiveTexture=F$n.getRes(F$y[F$r]));var F$$=F$k.ambientTexture.texture2D;F$$&&(F$j.ambientTexture=F$n.getRes(F$y[F$$]));var F$W=F$k.reflectTexture.texture2D;F$W&&(F$j.reflectTexture=F$n.getRes(F$y[F$W]))},F$I.RENDERMODE_OPAQUE=1,F$I.RENDERMODE_OPAQUEDOUBLEFACE=2,F$I.RENDERMODE_CUTOUT=3,F$I.RENDERMODE_CUTOUTDOUBLEFACE=4,F$I.RENDERMODE_TRANSPARENT=13,F$I.RENDERMODE_TRANSPARENTDOUBLEFACE=14,F$I.RENDERMODE_ADDTIVE=15,F$I.RENDERMODE_ADDTIVEDOUBLEFACE=16,F$I.RENDERMODE_DEPTHREAD_TRANSPARENT=5,F$I.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,F$I.RENDERMODE_DEPTHREAD_ADDTIVE=7,F$I.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,F$I.RENDERMODE_NONDEPTH_TRANSPARENT=9,F$I.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,F$I.RENDERMODE_NONDEPTH_ADDTIVE=11,F$I.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,F$I.SHADERDEFINE_DIFFUSEMAP=0,F$I.SHADERDEFINE_NORMALMAP=0,F$I.SHADERDEFINE_SPECULARMAP=0,F$I.SHADERDEFINE_EMISSIVEMAP=0,F$I.SHADERDEFINE_AMBIENTMAP=0,F$I.SHADERDEFINE_REFLECTMAP=0,F$I.SHADERDEFINE_UVTRANSFORM=0,F$I.SHADERDEFINE_TILINGOFFSET=0,F$I.SHADERDEFINE_ADDTIVEFOG=0,F$I.DIFFUSETEXTURE=1,F$I.NORMALTEXTURE=2,F$I.SPECULARTEXTURE=3,F$I.EMISSIVETEXTURE=4,F$I.AMBIENTTEXTURE=5,F$I.REFLECTTEXTURE=6,F$I.ALBEDO=7,F$I.UVANIAGE=8,F$I.MATERIALAMBIENT=9,F$I.MATERIALDIFFUSE=10,F$I.MATERIALSPECULAR=11,F$I.MATERIALREFLECT=12,F$I.UVMATRIX=13,F$I.UVAGE=14,F$I.TILINGOFFSET=15,F$l(F$I,["defaultMaterial",function(){var F$y=new F$I;return F$y.lock=!0,this.defaultMaterial=F$y},"shaderDefines",function(){return this.shaderDefines=new F$Dj(F$Qj.shaderDefines)}]),F$I}(F$Qj),F$Fj=function(F$y){function F$A(F$y,F$j,F$t,F$k,F$T){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===F$t&&(F$t=35044),void 0===F$k&&(F$k=!1),F$A.__super.call(this),this._indexType=F$y,this._indexCount=F$j,this._bufferUsage=F$t,this._bufferType=34963,this._canRead=F$k;var F$Y;if("ushort"==F$y)this._indexTypeByteCount=2;else{if("ubyte"!=F$y)throw new Error("unidentification index type.");this._indexTypeByteCount=1}F$Y=this._indexTypeByteCount*F$j,this._byteLength=F$Y,this._bind(),F$X._gl.bufferData(this._bufferType,F$Y,this._bufferUsage),this.uri=F$T,F$k?("ushort"==F$y?this._buffer=new Uint16Array(F$j):"ubyte"==F$y&&(this._buffer=new Uint8Array(F$j)),this.memorySize=2*F$Y):this.memorySize=F$Y}F$$(F$A,"laya.d3.graphics.IndexBuffer3D",F$y);var F$j=F$A.prototype;return F$j.setData=function(F$y,F$j,F$t,F$k){void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=4294967295);var F$T=0;if("ushort"==this._indexType?(F$T=2,0===F$t&&4294967295===F$k||(F$y=new Uint16Array(F$y.buffer,F$t*F$T,F$k))):"ubyte"==this._indexType&&(F$T=1,0===F$t&&4294967295===F$k||(F$y=new Uint8Array(F$y.buffer,F$t*F$T,F$k))),this._bind(),F$X._gl.bufferSubData(this._bufferType,F$j*F$T,F$y),this._canRead)if(0!==F$j||0!==F$t||4294967295!==F$k){var F$Y=this._buffer.length-F$j;F$Y<F$k&&(F$k=F$Y);for(var F$A=0;F$A<F$k;F$A++)this._buffer[F$j+F$A]=F$y[F$A]}else this._buffer=F$y},F$j.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$j.disposeResource=function(){F$y.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},F$W(0,F$j,"indexType",function(){return this._indexType}),F$W(0,F$j,"indexTypeByteCount",function(){return this._indexTypeByteCount}),F$W(0,F$j,"indexCount",function(){return this._indexCount}),F$W(0,F$j,"canRead",function(){return this._canRead}),F$A.INDEXTYPE_UBYTE="ubyte",F$A.INDEXTYPE_USHORT="ushort",F$A.create=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$t&&(F$t=35044),void 0===F$k&&(F$k=!1),new F$A(F$y,F$j,F$t,F$k,F$T)},F$A}(F$X),F$Gj=function(F$Y){function F$A(F$y,F$j,F$t,F$k,F$T){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===F$k&&(F$k=!1),F$A.__super.call(this),this._vertexDeclaration=F$y,this._vertexCount=F$j,this._bufferUsage=F$t,this._bufferType=34962,this._canRead=F$k,this.uri=F$T,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*F$j,this._bind(),F$X._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),F$k&&(this._buffer=new Float32Array(this._byteLength/4))}F$$(F$A,"laya.d3.graphics.VertexBuffer3D",F$Y);var F$y=F$A.prototype;return F$y.bindWithIndexBuffer=function(F$y){F$y&&F$y._bind(),this._bind()},F$y.setData=function(F$y,F$j,F$t,F$k){if(void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=4294967295),0===F$t&&4294967295===F$k||(F$y=new Float32Array(F$y.buffer,4*F$t,F$k)),this._bind(),F$X._gl.bufferSubData(this._bufferType,4*F$j,F$y),this._canRead)if(0!==F$j||0!==F$t||4294967295!==F$k){var F$T=this._buffer.length-F$j;F$T<F$k&&(F$k=F$T);for(var F$Y=0;F$Y<F$k;F$Y++)this._buffer[F$j+F$Y]=F$y[F$Y]}else this._buffer=F$y},F$y.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},F$y.disposeResource=function(){for(var F$y=F$m.mainContext,F$j=this._vertexDeclaration.getVertexElements(),F$t=F$X._enableAtributes,F$k=0,F$T=F$j.length;F$k<F$T;F$k++)F$t[F$k]===this._glBuffer&&(F$y.disableVertexAttribArray(F$k),F$t[F$k]=null);F$Y.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},F$W(0,F$y,"vertexDeclaration",function(){return this._vertexDeclaration}),F$W(0,F$y,"vertexCount",function(){return this._vertexCount}),F$W(0,F$y,"canRead",function(){return this._canRead}),F$A.create=function(F$y,F$j,F$t,F$k,F$T){return void 0===F$t&&(F$t=35044),void 0===F$k&&(F$k=!1),new F$A(F$y,F$j,F$t,F$k,F$T)},F$A}(F$X),F$gj=function(F$y){function F$M(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,F$M.__super.call(this),this._type=3553}F$$(F$M,"laya.d3.resource.DataTexture2D",F$mj);var F$j=F$M.prototype;return F$j.genDebugMipmaps=function(){var F$y=[];return F$y.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),F$y.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),F$y.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),F$y.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),F$y.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),F$y.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),F$y.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),F$y.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),F$y.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),F$y.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),F$y},F$j._onTextureLoaded=function(F$y){},F$j._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var F$y=F$m.mainContext,F$j=this._source=F$y.createTexture(),F$t=this._width,F$k=this._height,F$T=F$U.curBindTexTarget,F$Y=F$U.curBindTexValue,F$A=!1;if(F$U.bindTexture(F$y,this._type,F$j),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var F$X=0;F$y.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var F$I=0;F$I<this._mipmaps.length;F$I++){if(this._mipmaps[F$I].byteLength!=F$b*F$D*4)throw"mipmap size error  level:"+F$I;F$y.texSubImage2D(this._type,0,F$M.simLodRect[F$X++],F$M.simLodRect[F$X++],F$M.simLodRect[F$X++],F$M.simLodRect[F$X++],6408,5121,new Uint8Array(this._mipmaps[F$I]))}this.minFifter=9729,this.magFifter=9729}else{var F$b=this._width,F$D=this._height;for(F$X=0,F$y.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),F$I=0;F$I<this._mipmaps.length;F$I++){if(this._mipmaps[F$I].byteLength!=F$b*F$D*4)throw"mipmap size error  level:"+F$I;F$y.texImage2D(this._type,F$I,6408,F$b,F$D,0,6408,5121,new Uint8Array(this._mipmaps[F$I])),(F$b/=2)<1&&(F$b=1),(F$D/=2)<1&&(F$D=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&F$y.pixelStorei(F$y.UNPACK_ALIGNMENT,1),F$y.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var F$l=0,F$r=!1,F$$=!1;this._buffer.byteLength==4*F$t*F$k?(F$l=6408,F$r=!0):this._buffer.byteLength==3*F$t*F$k?(F$l=6407,F$$=!0):F$l=this._format,F$r||F$$?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),F$$&&F$y.pixelStorei(F$y.UNPACK_ALIGNMENT,1),F$y.texImage2D(this._type,0,F$l,F$t,F$k,0,F$l,5121,this._buffer)):F$y&&F$l==F$y.ALPHA?(F$y.texImage2D(3553,0,F$l,F$t,F$k,0,F$l,F$y.UNSIGNED_BYTE,this._buffer),F$A=!0):0!=F$l&&(F$y.compressedTexImage2D(3553,0,F$l,F$t,F$k,0,this._buffer),F$A=!0)}var F$W=this._minFifter,F$z=this._magFifter,F$V=0==this._wrapModeU?10497:33071,F$n=0==this._wrapModeV?10497:33071,F$C=F$_.isPOT(F$t,F$k);F$C?(this._mipmap||this._mipmaps?-1!==F$W||(F$W=9987):-1!==F$W||(F$W=9729),-1!==F$z||(F$z=9729),F$y.texParameteri(this._type,10241,F$W),F$y.texParameteri(this._type,10240,F$z),F$y.texParameteri(this._type,10242,F$V),F$y.texParameteri(this._type,10243,F$n),this._mipmap&&F$y.generateMipmap(this._type)):(-1!==F$W||(F$W=9729),-1!==F$z||(F$z=9729),F$y.texParameteri(this._type,10241,F$W),F$y.texParameteri(this._type,10240,F$z),F$y.texParameteri(this._type,10242,33071),F$y.texParameteri(this._type,10243,33071)),F$T&&F$Y&&F$U.bindTexture(F$y,F$T,F$Y),this.memorySize=F$A?this._buffer.length:F$C?F$t*F$k*4*(1+1/3):F$t*F$k*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},F$j.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},F$j.onAsynLoaded=function(F$y,F$j,F$t){var F$k;F$t&&(F$k=F$t[0].call(this,F$j)),F$k&&(this._width=F$k.width,this._height=F$k.height,this._buffer=F$k.data),this._src=F$y,this._size=new F$zj(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},F$j.getPixels=function(){return new Uint8Array(this._buffer)},F$j.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(F$m.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},F$W(0,F$j,"src",function(){return this._src}),F$M.create=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){if(void 0===F$k&&(F$k=9729),void 0===F$T&&(F$T=9729),void 0===F$Y&&(F$Y=!0),!F$y||F$y.byteLength<F$j*F$t*4)throw"DataTexture2D create error";var F$X=new F$M;return F$X.uri=F$A,F$X._buffer=F$y,F$X._width=F$j,F$X._height=F$t,F$X._mipmap=F$Y,F$X._magFifter=F$k,F$X._minFifter=F$T,F$X._size=new F$zj(F$X._width,F$X._height),F$X._conchTexture?alert("怎么给runtime传递datatexture数据"):F$X.activeResource(),F$X},F$M.load=function(F$y,F$j,F$t,F$k,F$T){if(void 0===F$j&&(F$j=0),void 0===F$t&&(F$t=0),void 0===F$k&&(F$k=9729),void 0===F$T&&(F$T=9729),"mipmaps"===F$p.getFileExtension(F$y)){var F$Y=F$e.loader.create(F$y,null,null,F$M,[function(F$y){this._mipmaps=[];var F$j=new Uint32Array(F$y);this._width=F$j[0];var F$t=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,F$t=1024),this._width!=F$t)throw"现在只支持512x256的环境贴图。当前的是"+F$j[0];this._height=F$j[1];for(var F$k=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,F$T=this._height,F$Y=8;;){var F$A=F$k*F$T*4;if(F$Y+F$A>F$y.byteLength)throw"load mipmaps data size error ";var F$X=new Uint8Array(F$y,F$Y,F$A);if(this._mipmaps.push(F$X),F$Y+=F$A,1==F$k&&1==F$T)break;(F$k/=2)<1&&(F$k=1),(F$T/=2)<1&&(F$T=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){F$Y.simLodInfo=new Float32Array(40);for(var F$A=0;F$A<F$Y.simLodInfo.length;)F$Y.simLodInfo[F$A]=(F$M.simLodRect[F$A]+.5)/1024,F$A++,F$Y.simLodInfo[F$A]=(F$M.simLodRect[F$A]+.5)/256,F$A++,F$Y.simLodInfo[F$A]=Math.max(F$M.simLodRect[F$A]-1,.1)/1024,F$A++,F$Y.simLodInfo[F$A]=Math.max(F$M.simLodRect[F$A]-1.5,.1)/256,F$A++}return F$Y}if("number"==typeof F$j)return F$e.loader.create(F$y,null,null,F$M,[function(F$y){return this._width=F$j,this._height=F$t,this._buffer=F$y,null}]);if("function"==typeof F$j)return F$e.loader.create(F$y,null,null,F$M,[F$j]);throw new Error("unknown params.")},F$M.lodasatlas=!1,F$l(F$M,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),F$M}(),F$aj=function(F$y){function F$j(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,F$j.__super.call(this)}F$$(F$j,"laya.d3.resource.models.PrimitiveMesh",F$Uj);var F$t=F$j.prototype;return F$e.imps(F$t,{"laya.d3.core.render.IRenderable":!0}),F$t._getVertexBuffer=function(F$y){return void 0===F$y&&(F$y=0),0===F$y?this._vertexBuffer:null},F$t._getVertexBuffers=function(){return null},F$t._getIndexBuffer=function(){return this._indexBuffer},F$t._getPositions=function(){var F$y,F$j=[],F$t=this._vertexBuffer.vertexDeclaration.getVertexElements(),F$k=0;for(F$k=0;F$k<F$t.length;F$k++){var F$T=F$t[F$k];if("vector3"===F$T.elementFormat&&0===F$T.elementUsage){F$y=F$T;break}}var F$Y=this._vertexBuffer.getData();for(F$k=0;F$k<F$Y.length;F$k+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var F$A=F$k+F$y.offset/4,F$X=new F$Aj(F$Y[F$A+0],F$Y[F$A+1],F$Y[F$A+2]);F$j.push(F$X)}return F$j},F$t.getRenderElement=function(F$y){return this},F$t.getRenderElementsCount=function(){return 1},F$t.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},F$t._beforeRender=function(F$y){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},F$t._render=function(F$y){F$m.mainContext.drawElements(4,this._numberIndices,5123,0),F$P.drawCall++,F$P.trianglesFaces+=this._numberIndices/3},F$W(0,F$t,"_vertexBufferCount",function(){return 1}),F$W(0,F$t,"triangleCount",function(){return this._indexBuffer.indexCount/3}),F$j}(),F$Jj=function(F$y){function F$j(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,F$j.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}F$$(F$j,"laya.d3.resource.models.Mesh",F$Uj);var F$t=F$j.prototype;return F$t._getPositions=function(){var F$y,F$j,F$t,F$k,F$T,F$Y=[],F$A=0,F$X=0,F$I=0;if(0!==this._vertexBuffers.length){var F$b=this._vertexBuffers.length;for(F$A=0;F$A<F$b;F$A++){for(F$t=(F$y=this._vertexBuffers[F$A]).vertexDeclaration.getVertexElements(),F$X=0;F$X<F$t.length;F$X++)if("vector3"===(F$k=F$t[F$X]).elementFormat&&0===F$k.elementUsage){F$j=F$k;break}for(F$T=F$y.getData(),F$X=0;F$X<F$T.length;F$X+=F$y.vertexDeclaration.vertexStride/4)F$I=F$X+F$j.offset/4,F$Y.push(new F$Aj(F$T[F$I+0],F$T[F$I+1],F$T[F$I+2]))}}else{var F$D=this._subMeshes.length;for(F$A=0;F$A<F$D;F$A++){for(F$t=(F$y=this._subMeshes[F$A]._getVertexBuffer()).vertexDeclaration.getVertexElements(),F$X=0;F$X<F$t.length;F$X++)if("vector3"===(F$k=F$t[F$X]).elementFormat&&0===F$k.elementUsage){F$j=F$k;break}for(F$T=F$y.getData(),F$X=0;F$X<F$T.length;F$X+=F$y.vertexDeclaration.vertexStride/4)F$I=F$X+F$j.offset/4,F$Y.push(new F$Aj(F$T[F$I+0],F$T[F$I+1],F$T[F$I+2]))}}return F$Y},F$t._setSubMeshes=function(F$y){this._subMeshes=F$y,this._subMeshCount=F$y.length;for(var F$j=0;F$j<this._subMeshCount;F$j++)F$y[F$j]._indexInMesh=F$j;this._positions=this._getPositions(),this._generateBoundingObject()},F$t.onAsynLoaded=function(F$y,F$j,F$t){var F$k=F$j[0],F$T=F$j[1];F$cy.read(F$k,this,this._materials,this._subMeshes,F$T),this.completeCreate(),this._endLoaded()},F$t.getSubMesh=function(F$y){return this._subMeshes[F$y]},F$t.getSubMeshCount=function(){return this._subMeshes.length},F$t.getRenderElementsCount=function(){return this._subMeshes.length},F$t.getRenderElement=function(F$y){return this._subMeshes[F$y]},F$t.disposeResource=function(){for(var F$y=0;F$y<this._subMeshes.length;F$y++)this._subMeshes[F$y].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},F$W(0,F$t,"materials",function(){return this._materials.slice()}),F$W(0,F$t,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),F$j.load=function(F$y){return F$e.loader.create(F$y,null,null,F$j)},F$j}(),F$hj=(function(F$y){function F$b(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===F$t&&(F$t=6408),void 0===F$k&&(F$k=5121),void 0===F$T&&(F$T=33189),void 0===F$Y&&(F$Y=!1),void 0===F$A&&(F$A=!1),void 0===F$X&&(F$X=-1),void 0===F$I&&(F$I=-1),F$b.__super.call(this),this._type=3553,this._width=F$y,this._height=F$j,this._size=new F$zj(F$y,F$j),this._surfaceFormat=F$t,this._surfaceType=F$k,this._depthStencilFormat=F$T,F$z.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=F$Y,this._repeat=F$A,this._minFifter=F$X,this._magFifter=F$I,this.activeResource(),this._alreadyResolved=!0}F$$(F$b,"laya.d3.resource.RenderTexture",F$mj);var F$j=F$b.prototype;F$j.recreateResource=function(){var F$y=F$m.mainContext;this._frameBuffer=F$y.createFramebuffer(),this._source=F$y.createTexture();var F$j=F$U.curBindTexTarget,F$t=F$U.curBindTexValue;F$U.bindTexture(F$y,this._type,this._source),F$y.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var F$k=this._minFifter,F$T=this._magFifter,F$Y=this._repeat?10497:33071;if(F$_.isPOT(this._width,this._height)?(this._mipmap?-1!==F$k||(F$k=9987):-1!==F$k||(F$k=9729),-1!==F$T||(F$T=9729),F$y.texParameteri(this._type,10241,F$k),F$y.texParameteri(this._type,10240,F$T),F$y.texParameteri(this._type,10242,F$Y),F$y.texParameteri(this._type,10243,F$Y),this._mipmap&&F$y.generateMipmap(this._type)):(-1!==F$k||(F$k=9729),-1!==F$T||(F$T=9729),F$y.texParameteri(this._type,10241,F$k),F$y.texParameteri(this._type,10240,F$T),F$y.texParameteri(this._type,10242,33071),F$y.texParameteri(this._type,10243,33071)),F$j&&F$t&&F$U.bindTexture(F$y,F$j,F$t),F$y.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=F$y.createRenderbuffer(),F$y.bindRenderbuffer(36161,this._depthStencilBuffer),F$y.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),F$y.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:F$y.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:F$y.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:F$y.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}F$y.framebufferTexture2D(36160,36064,3553,this._source,0),F$y.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},F$j.start=function(){F$m.mainContext.bindFramebuffer(36160,this.frameBuffer),(F$b._currentRenderTarget=this)._alreadyResolved=!1},F$j.end=function(){F$m.mainContext.bindFramebuffer(36160,null),F$b._currentRenderTarget=null,this._alreadyResolved=!0},F$j.getData=function(F$y,F$j,F$t,F$k){var F$T=F$m.mainContext;if(F$T.bindFramebuffer(36160,this._frameBuffer),!(36053===F$T.checkFramebufferStatus(36160)))return F$T.bindFramebuffer(36160,null),null;var F$Y=new Uint8Array(this._width*this._height*4);return F$T.readPixels(F$y,F$j,F$t,F$k,this._surfaceFormat,this._surfaceType,F$Y),F$T.bindFramebuffer(36160,null),F$Y},F$j.disposeResource=function(){if(this._frameBuffer){var F$y=F$m.mainContext;F$y.deleteTexture(this._source),F$y.deleteFramebuffer(this._frameBuffer),F$y.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},F$W(0,F$j,"surfaceFormat",function(){return this._surfaceFormat}),F$W(0,F$j,"surfaceType",function(){return this._surfaceType}),F$W(0,F$j,"depthStencilFormat",function(){return this._depthStencilFormat}),F$W(0,F$j,"source",function(){return this._alreadyResolved?F$e.superGet(F$mj,this,"source"):null}),F$W(0,F$j,"depthStencilBuffer",function(){return this._depthStencilBuffer}),F$W(0,F$j,"frameBuffer",function(){return this._frameBuffer}),F$b._currentRenderTarget=null}(),function(F$y){function F$j(F$y){this._color=null,this._pixels=null,F$j.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new F$zj(this.width,this.height),this._color=F$y,this._pixels=new Uint8Array([255*F$y.x,255*F$y.y,255*F$y.z,255*F$y.w]),this.uri="SolidColorTexture2D_"+this.id}F$$(F$j,"laya.d3.resource.SolidColorTexture2D",F$mj);var F$t=F$j.prototype;return F$t._createWebGlTexture=function(){var F$y=F$m.mainContext,F$j=this._source=F$y.createTexture(),F$t=this._width,F$k=this._height,F$T=F$U.curBindTexTarget,F$Y=F$U.curBindTexValue;F$U.bindTexture(F$y,this._type,F$j),F$y.texImage2D(this._type,0,6408,F$t,F$k,0,6408,5121,this._pixels);var F$A=this._minFifter,F$X=this._magFifter,F$I=this._repeat?10497:33071,F$b=F$_.isPOT(F$t,F$k);F$b?(this._mipmap?-1!==F$A||(F$A=9987):-1!==F$A||(F$A=9729),-1!==F$X||(F$X=9729),F$y.texParameteri(this._type,10241,F$A),F$y.texParameteri(this._type,10240,F$X),F$y.texParameteri(this._type,10242,F$I),F$y.texParameteri(this._type,10243,F$I),this._mipmap&&F$y.generateMipmap(this._type)):(-1!==F$A||(F$A=9729),-1!==F$X||(F$X=9729),F$y.texParameteri(this._type,10241,F$A),F$y.texParameteri(this._type,10240,F$X),F$y.texParameteri(this._type,10242,33071),F$y.texParameteri(this._type,10243,33071)),F$T&&F$Y&&F$U.bindTexture(F$y,F$T,F$Y),this.memorySize=F$b?F$t*F$k*4*(1+1/3):F$t*F$k*4},F$t.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$t.disposeResource=function(){this._source&&(F$m.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},F$l(F$j,["magentaTexture",function(){var F$y=new F$j(new F$Xj(1,0,1,1));return F$y.lock=!0,this.magentaTexture=F$y},"grayTexture",function(){var F$y=new F$j(new F$Xj(.5,.5,.5,1));return F$y.lock=!0,this.grayTexture=F$y}]),F$j}()),F$Oj=function(F$y){function F$T(F$y,F$j,F$t,F$k){this._canRead=!1,this._image=null,this._pixels=null,void 0===F$y&&(F$y=!1),void 0===F$j&&(F$j=!0),void 0===F$t&&(F$t=6408),void 0===F$k&&(F$k=!0),F$T.__super.call(this),this._type=3553,this._repeat=F$j,this._canRead=F$y,this._format=F$t,this._mipmap=F$k}F$$(F$T,"laya.d3.resource.Texture2D",F$mj);var F$j=F$T.prototype;return F$j._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var F$y=F$m.mainContext,F$j=this._source=F$y.createTexture(),F$t=this._width,F$k=this._height,F$T=F$U.curBindTexTarget,F$Y=F$U.curBindTexValue;switch(F$U.bindTexture(F$y,this._type,F$j),this._format){case 6407:case 6408:this._canRead?F$y.texImage2D(this._type,0,this._format,F$t,F$k,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?F$y.texImage2D(this._type,0,this._image._format,F$t,F$k,0,this._image._format,5121,this._image.atlasSource):F$y.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case F$m.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:F$y.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var F$A=this._minFifter,F$X=this._magFifter,F$I=this._repeat?10497:33071,F$b=0==this._wrapModeU?10497:33071,F$D=0==this._wrapModeV?10497:33071,F$l=F$_.isPOT(F$t,F$k);F$l?(this._mipmap?-1!==F$A||(F$A=9987):-1!==F$A||(F$A=9729),-1!==F$X||(F$X=9729),F$y.texParameteri(this._type,10241,F$A),F$y.texParameteri(this._type,10240,F$X),F$y.texParameteri(this._type,10242,F$I),F$y.texParameteri(this._type,10243,F$I),F$y.texParameteri(this._type,10242,F$b),F$y.texParameteri(this._type,10243,F$D),this._mipmap&&F$y.generateMipmap(this._type)):(-1!==F$A||(F$A=9729),-1!==F$X||(F$X=9729),F$y.texParameteri(this._type,10241,F$A),F$y.texParameteri(this._type,10240,F$X),F$y.texParameteri(this._type,10242,33071),F$y.texParameteri(this._type,10243,33071)),F$T&&F$Y&&F$U.bindTexture(F$y,F$T,F$Y),this._image.onload=null,this._image=null,this.memorySize=F$l?F$t*F$k*4*(1+1/3):F$t*F$k*4},F$j.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},F$j.onAsynLoaded=function(F$y,F$j,F$t){if(F$t){var F$k=F$t[0];void 0!==F$k&&(this._canRead=F$k);var F$T=F$t[1];void 0!==F$T&&(this._repeat=F$T);var F$Y=F$t[2];void 0!==F$Y&&(this._format=F$Y);var F$A=F$t[3];void 0!==F$A&&(this._mipmap=F$A);var F$X=F$t.wrapModeU;void 0!==F$X&&(this._wrapModeU=F$X);var F$I=F$t.wrapModeV;void 0!==F$I&&(this._wrapModeV=F$I)}switch(this._format){case 6407:case 6408:var F$b=(this._image=F$j).width,F$D=F$j.height;this._width=F$b,this._height=F$D,this._size=new F$zj(F$b,F$D),this._canRead&&(F$z.isConchApp?F$j instanceof F$r.HTMLElement&&(this._pixels=new Uint8Array(F$j.getImageData(0,0,F$b,F$D))):(F$q.canvas.size(F$b,F$D),F$q.canvas.clear(),F$q.context.drawImage(F$j,0,0,F$b,F$D),this._pixels=new Uint8Array(F$q.context.getImageData(0,0,F$b,F$D).data.buffer)));break;case F$m.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var F$l=new F$v(F$j);F$l.readUTFBytes(4),F$l.readUTFBytes(2),F$l.getInt16();F$l.endian="bigEndian",this._width=F$l.getInt16(),this._height=F$l.getInt16(),this._size=new F$zj(this._width,this._height);F$l.getInt16(),F$l.getInt16();this._image=new Uint8Array(F$j,F$l.pos)}this.recreateResource(),this._endLoaded()},F$j.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},F$j.disposeResource=function(){this._source&&(F$m.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},F$W(0,F$j,"_src",function(){return this.url}),F$W(0,F$j,"src",function(){return this.url}),F$T.load=function(F$y){return F$e.loader.create(F$y,null,null,F$T)},F$T}(),F$sj=function(F$j){function F$t(F$y,F$j){F$t.__super.call(this),void 0===F$y&&(F$y=.3),void 0===F$j&&(F$j=1e3),this._tempVector3=new F$Aj,this._position=new F$Aj,this._up=new F$Aj,this._forward=new F$Aj,this._right=new F$Aj,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=F$zj.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=F$y,this._farPlane=F$j,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),F$e.stage.on("resize",this,this._onScreenSizeChanged)}F$$(F$t,"laya.d3.core.BaseCamera",F$j);var F$y=F$t.prototype;return F$y._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var F$y=this.scene._cameraPool,F$j=F$y.length-1,F$t=0;F$t<F$j;F$t++)if(F$y[F$t].renderingOrder>F$y[F$j].renderingOrder){var F$k=F$y[F$t];F$y[F$t]=F$y[F$j],F$y[F$j]=F$k}},F$y._calculateProjectionMatrix=function(){},F$y._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},F$y._prepareCameraToRender=function(){F$w._currentCameraCullingMask=this.cullingMask;var F$y=this._shaderValues;F$y.setValue(0,this.transform.position.elements),F$y.setValue(5,this.forward.elements),F$y.setValue(6,this.up.elements)},F$y._prepareCameraViewProject=function(F$y,F$j){var F$t=this._shaderValues;F$t.setValue(1,F$y.elements),F$t.setValue(2,F$j.elements)},F$y._renderCamera=function(F$y,F$j,F$t){},F$y.addLayer=function(F$y){29!==F$y.number&&30!=F$y.number&&(this.cullingMask=this.cullingMask|F$y.mask)},F$y.removeLayer=function(F$y){29!==F$y.number&&30!=F$y.number&&(this.cullingMask=this.cullingMask&~F$y.mask)},F$y.addAllLayers=function(){this.cullingMask=2147483647},F$y.removeAllLayers=function(){this.cullingMask=0|F$w.getLayerByNumber(29).mask|F$w.getLayerByNumber(30).mask},F$y.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},F$y.moveForward=function(F$y){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=F$y,this.transform.translate(this._tempVector3)},F$y.moveRight=function(F$y){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=F$y,this.transform.translate(this._tempVector3)},F$y.moveVertical=function(F$y){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=F$y,this.transform.translate(this._tempVector3,!1)},F$y._addSelfRenderObjects=function(){var F$y=this.scene._cameraPool,F$j=F$y.length;if(0<F$j){for(var F$t=F$j-1;0<=F$t;F$t--)if(this.renderingOrder<=F$y[F$t].renderingOrder){F$y.splice(F$t+1,0,this);break}}else F$y.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},F$y._clearSelfRenderObjects=function(){var F$y=this.scene._cameraPool;F$y.splice(F$y.indexOf(this),1)},F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,F$e.stage.off("resize",this,this._onScreenSizeChanged),F$j.prototype.destroy.call(this,F$y)},F$W(0,F$y,"sky",function(){return this._sky},function(F$y){(this._sky=F$y)._ownerCamera=this}),F$W(0,F$y,"forward",function(){var F$y=this.transform.worldMatrix.elements,F$j=this._forward.elements;return F$j[0]=-F$y[8],F$j[1]=-F$y[9],F$j[2]=-F$y[10],this._forward}),F$W(0,F$y,"position",function(){var F$y=this.transform.worldMatrix.elements,F$j=this._position.elements;return F$j[0]=F$y[12],F$j[1]=F$y[13],F$j[2]=F$y[14],this._position}),F$W(0,F$y,"renderTarget",function(){return this._renderTarget},function(F$y){null!=(this._renderTarget=F$y)&&(this._renderTargetSize=F$y.size)}),F$W(0,F$y,"up",function(){var F$y=this.transform.worldMatrix.elements,F$j=this._up.elements;return F$j[0]=F$y[4],F$j[1]=F$y[5],F$j[2]=F$y[6],this._up}),F$W(0,F$y,"right",function(){var F$y=this.transform.worldMatrix.elements,F$j=this._right.elements;return F$j[0]=F$y[0],F$j[1]=F$y[1],F$j[2]=F$y[2],this._right}),F$W(0,F$y,"renderTargetSize",function(){return this._renderTargetSize},function(F$y){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=F$y,this._calculateProjectionMatrix()}),F$W(0,F$y,"fieldOfView",function(){return this._fieldOfView},function(F$y){this._fieldOfView=F$y,this._calculateProjectionMatrix()}),F$W(0,F$y,"nearPlane",function(){return this._nearPlane},function(F$y){this._nearPlane=F$y,this._calculateProjectionMatrix()}),F$W(0,F$y,"farPlane",function(){return this._farPlane},function(F$y){this._farPlane=F$y,this._calculateProjectionMatrix()}),F$W(0,F$y,"orthographic",function(){return this._orthographic},function(F$y){this._orthographic=F$y,this._calculateProjectionMatrix()}),F$W(0,F$y,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(F$y){this._orthographicVerticalSize=F$y,this._calculateProjectionMatrix()}),F$W(0,F$y,"renderingOrder",function(){return this._renderingOrder},function(F$y){this._renderingOrder=F$y,this._sortCamerasByRenderingOrder()}),F$t.CAMERAPOS=0,F$t.VIEWMATRIX=1,F$t.PROJECTMATRIX=2,F$t.VPMATRIX=3,F$t.VPMATRIX_NO_TRANSLATE=4,F$t.CAMERADIRECTION=5,F$t.CAMERAUP=6,F$t.ENVIRONMENTDIFFUSE=7,F$t.ENVIRONMENTSPECULAR=8,F$t.SIMLODINFO=9,F$t.DIFFUSEIRRADMATR=10,F$t.DIFFUSEIRRADMATG=11,F$t.DIFFUSEIRRADMATB=12,F$t.HDREXPOSURE=13,F$t.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",F$t.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",F$t.CLEARFLAG_SOLIDCOLOR=0,F$t.CLEARFLAG_SKY=1,F$t.CLEARFLAG_DEPTHONLY=2,F$t.CLEARFLAG_NONE=3,F$l(F$t,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new F$yj(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new F$yj},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new F$yj}]),F$t}(F$Hj),F$Zj=function(F$t){function F$j(F$y){this._render=null,this._geometryFilter=null,F$j.__super.call(this,F$y)}F$$(F$j,"laya.d3.core.RenderableSprite3D",F$t);var F$y=F$j.prototype;return F$y._addToInitStaticBatchManager=function(){},F$y._setBelongScene=function(F$y){F$t.prototype._setBelongScene.call(this,F$y),F$y._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},F$y._setUnBelongScene=function(){var F$y=this._scene._renderableSprite3Ds,F$j=F$y.indexOf(this);F$y.splice(F$j,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),F$t.prototype._setUnBelongScene.call(this)},F$y._update=function(F$y){(F$y.owner=this)._activeInHierarchy&&(this._updateComponents(F$y),this._render._updateOctreeNode(),this._lateUpdateComponents(F$y),F$P.spriteCount++,this._childs.length&&this._updateChilds(F$y))},F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$t.prototype.destroy.call(this,F$y),this._render._destroy(),this._render=null},F$j.__init__=function(){F$j.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=F$j.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),F$j.SAHDERDEFINE_LIGHTMAP=F$j.shaderDefines.registerDefine("LIGHTMAP")},F$j.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,F$j.SAHDERDEFINE_LIGHTMAP=4,F$j.LIGHTMAPSCALEOFFSET=2,F$j.LIGHTMAP=3,F$l(F$j,["shaderDefines",function(){return this.shaderDefines=new F$Dj}]),F$j}(F$Hj),F$Rj=(function(F$y){function F$k(F$y,F$j,F$t){this._long=NaN,this._width=NaN,this._height=NaN,void 0===F$y&&(F$y=1),void 0===F$j&&(F$j=1),void 0===F$t&&(F$t=1),F$k.__super.call(this),this._long=F$y,this._width=F$j,this._height=F$t,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}F$$(F$k,"laya.d3.resource.models.BoxMesh",F$aj);var F$j=F$k.prototype;F$j.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var F$y=F$my.vertexDeclaration,F$j=(F$y.vertexStride,this._long/2),F$t=this._height/2,F$k=this._width/2,F$T=new Float32Array([-F$j,F$t,-F$k,0,1,0,0,0,F$j,F$t,-F$k,0,1,0,1,0,F$j,F$t,F$k,0,1,0,1,1,-F$j,F$t,F$k,0,1,0,0,1,-F$j,-F$t,-F$k,0,-1,0,0,1,F$j,-F$t,-F$k,0,-1,0,1,1,F$j,-F$t,F$k,0,-1,0,1,0,-F$j,-F$t,F$k,0,-1,0,0,0,-F$j,F$t,-F$k,-1,0,0,0,0,-F$j,F$t,F$k,-1,0,0,1,0,-F$j,-F$t,F$k,-1,0,0,1,1,-F$j,-F$t,-F$k,-1,0,0,0,1,F$j,F$t,-F$k,1,0,0,1,0,F$j,F$t,F$k,1,0,0,0,0,F$j,-F$t,F$k,1,0,0,0,1,F$j,-F$t,-F$k,1,0,0,1,1,-F$j,F$t,F$k,0,0,1,0,0,F$j,F$t,F$k,0,0,1,1,0,F$j,-F$t,F$k,0,0,1,1,1,-F$j,-F$t,F$k,0,0,1,0,1,-F$j,F$t,-F$k,0,0,-1,1,0,F$j,F$t,-F$k,0,0,-1,0,0,F$j,-F$t,-F$k,0,0,-1,0,1,-F$j,-F$t,-F$k,0,0,-1,1,1]),F$Y=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new F$Gj(F$y,this._numberVertices,35044,!0),this._indexBuffer=new F$Fj("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(F$T),this._indexBuffer.setData(F$Y),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},F$W(0,F$j,"long",function(){return this._long},function(F$y){this._long!==F$y&&(this._long=F$y,this.releaseResource(),this.activeResource())}),F$W(0,F$j,"width",function(){return this._width},function(F$y){this._width!==F$y&&(this._width=F$y,this.releaseResource(),this.activeResource())}),F$W(0,F$j,"height",function(){return this._height},function(F$y){this._height!==F$y&&(this._height=F$y,this.releaseResource(),this.activeResource())})}(),function(F$y){function F$T(F$y,F$j,F$t,F$k){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===F$y&&(F$y=10),void 0===F$j&&(F$j=10),void 0===F$t&&(F$t=10),void 0===F$k&&(F$k=10),F$T.__super.call(this),this._long=F$y,this._width=F$j,this._stacks=F$t,this._slices=F$k,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}F$$(F$T,"laya.d3.resource.models.PlaneMesh",F$aj);var F$j=F$T.prototype;F$j.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var F$y=new Uint16Array(this._numberIndices),F$j=F$my.vertexDeclaration,F$t=F$j.vertexStride/4,F$k=new Float32Array(this._numberVertices*F$t),F$T=this._long/2,F$Y=this._width/2,F$A=this._long/this._stacks,F$X=this._width/this._slices,F$I=0,F$b=0;F$b<=this._slices;F$b++)for(var F$D=0;F$D<=this._stacks;F$D++)F$k[F$I++]=F$D*F$A-F$T,F$k[F$I++]=0,F$k[F$I++]=F$b*F$X-F$Y,F$k[F$I++]=0,F$k[F$I++]=1,F$k[F$I++]=0,F$k[F$I++]=1*F$D/this._stacks,F$k[F$I++]=1*F$b/this._slices;var F$l=0;for(F$b=0;F$b<this._slices;F$b++)for(F$D=0;F$D<this._stacks;F$D++)F$y[F$l++]=(F$b+1)*(this._stacks+1)+F$D,F$y[F$l++]=F$b*(this._stacks+1)+F$D,F$y[F$l++]=(F$b+1)*(this._stacks+1)+F$D+1,F$y[F$l++]=F$b*(this._stacks+1)+F$D,F$y[F$l++]=F$b*(this._stacks+1)+F$D+1,F$y[F$l++]=(F$b+1)*(this._stacks+1)+F$D+1;this._vertexBuffer=new F$Gj(F$j,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new F$Fj("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(F$k),this._indexBuffer.setData(F$y),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},F$W(0,F$j,"long",function(){return this._long},function(F$y){this._long!==F$y&&(this._long=F$y,this.releaseResource(),this.activeResource())}),F$W(0,F$j,"width",function(){return this._width},function(F$y){this._width!==F$y&&(this._width=F$y,this.releaseResource(),this.activeResource())}),F$W(0,F$j,"stacks",function(){return this._stacks},function(F$y){this._stacks!==F$y&&(this._stacks=F$y,this.releaseResource(),this.activeResource())}),F$W(0,F$j,"slices",function(){return this._slices},function(F$y){this._slices!==F$y&&(this._slices=F$y,this.releaseResource(),this.activeResource())})}(),function(F$y){function F$A(F$y,F$j,F$t){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=.3),void 0===F$t&&(F$t=1e3),this._viewMatrix=new F$yj,this._projectionMatrix=new F$yj,this._projectionViewMatrix=new F$yj,this._viewport=new F$Ij(0,0,0,0),this._normalizedViewport=new F$Ij(0,0,1,1),this._aspectRatio=F$y,this._boundFrustumUpdate=!0,this._boundFrustum=new F$oy(F$yj.DEFAULT),F$A.__super.call(this,F$j,F$t),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}F$$(F$A,"laya.d3.core.Camera",F$sj);var F$j=F$A.prototype;return F$j._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},F$j._parseCustomProps=function(F$y,F$j,F$t,F$k){var F$T=F$t.clearColor;this.clearColor=new F$Xj(F$T[0],F$T[1],F$T[2],F$T[3]);var F$Y=F$t.viewport;this.normalizedViewport=new F$Ij(F$Y[0],F$Y[1],F$Y[2],F$Y[3])},F$j._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var F$y=this.orthographicVerticalSize*this.aspectRatio*.5,F$j=.5*this.orthographicVerticalSize;F$yj.createOrthoOffCenterRH(-F$y,F$y,-F$j,F$j,this.nearPlane,this.farPlane,this._projectionMatrix)}else F$yj.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},F$j._update=function(F$y){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,F$y)},F$j._renderCamera=function(F$y,F$j,F$t){var F$k,F$T;F$t.parallelSplitShadowMaps[0]&&F$t._renderShadowMap(F$y,F$j,this),(F$j.camera=this)._prepareCameraToRender(),F$t._preRenderUpdateComponents(F$j),F$k=F$j._viewMatrix=this.viewMatrix;var F$Y=this._renderTarget;F$Y?(F$Y.start(),F$yj.multiply(F$sj._invertYScaleMatrix,this._projectionMatrix,F$sj._invertYProjectionMatrix),F$yj.multiply(F$sj._invertYScaleMatrix,this.projectionViewMatrix,F$sj._invertYProjectionViewMatrix),F$T=F$j._projectionMatrix=F$sj._invertYProjectionMatrix,F$j._projectionViewMatrix=F$sj._invertYProjectionViewMatrix):(F$T=F$j._projectionMatrix=this._projectionMatrix,F$j._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(F$k,F$T),F$j._viewport=this.viewport,F$t._preRenderScene(F$y,F$j,this.boundFrustum),F$t._clear(F$y,F$j),F$t._renderScene(F$y,F$j),F$t._postRenderUpdateComponents(F$j),F$Y&&F$Y.end()},F$j.viewportPointToRay=function(F$y,F$j){F$Wj.calculateCursorRay(F$y,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$j)},F$j.normalizedViewportPointToRay=function(F$y,F$j){var F$t=F$A._tempVector20,F$k=this.viewport,F$T=F$y.elements,F$Y=F$t.elements;F$Y[0]=F$T[0]*F$k.width,F$Y[1]=F$T[1]*F$k.height,F$Wj.calculateCursorRay(F$t,this.viewport,this._projectionMatrix,this.viewMatrix,null,F$j)},F$j.worldToViewportPoint=function(F$y,F$j){F$yj.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(F$y,this._projectionViewMatrix,F$j);var F$t=F$j.elements;F$t[0]=F$t[0]/F$e.stage.clientScaleX,F$t[1]=F$t[1]/F$e.stage.clientScaleY},F$j.worldToNormalizedViewportPoint=function(F$y,F$j){F$yj.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(F$y,this._projectionViewMatrix,F$j);var F$t=F$j.elements;F$t[0]=F$t[0]/F$e.stage.clientScaleX,F$t[1]=F$t[1]/F$e.stage.clientScaleY},F$j.convertScreenCoordToOrthographicCoord=function(F$y,F$j){if(this._orthographic){var F$t=F$c.clientWidth,F$k=F$c.clientHeight,F$T=this.orthographicVerticalSize*this.aspectRatio/F$t,F$Y=this.orthographicVerticalSize/F$k,F$A=F$y.elements,F$X=F$j.elements;return F$X[0]=(-F$t/2+F$A[0])*F$T,F$X[1]=(F$k/2-F$A[1])*F$Y,F$X[2]=(this.nearPlane-this.farPlane)*(F$A[2]+1)/2-this.nearPlane,F$Aj.transformCoordinate(F$j,this.transform.worldMatrix,F$j),!0}return!1},F$W(0,F$j,"projectionViewMatrix",function(){return F$yj.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),F$W(0,F$j,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var F$y=this.viewport;return F$y.width/F$y.height},function(F$y){if(F$y<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=F$y,this._calculateProjectionMatrix()}),F$W(0,F$j,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),F$W(0,F$j,"needViewport",function(){var F$y=this.normalizedViewport;return 0===F$y.x&&0===F$y.y&&1===F$y.width&&1===F$y.height}),F$W(0,F$j,"viewport",function(){if(this._viewportExpressedInClipSpace){var F$y=this._normalizedViewport,F$j=this.renderTargetSize,F$t=F$j.width,F$k=F$j.height;this._viewport.x=F$y.x*F$t,this._viewport.y=F$y.y*F$k,this._viewport.width=F$y.width*F$t,this._viewport.height=F$y.height*F$k}return this._viewport},function(F$y){if(null!=this.renderTarget&&(F$y.x<0||F$y.y<0||0==F$y.width||0==F$y.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=F$y,this._calculateProjectionMatrix()}),F$W(0,F$j,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var F$y=this._viewport,F$j=this.renderTargetSize,F$t=F$j.width,F$k=F$j.height;this._normalizedViewport.x=F$y.x/F$t,this._normalizedViewport.y=F$y.y/F$k,this._normalizedViewport.width=F$y.width/F$t,this._normalizedViewport.height=F$y.height/F$k}return this._normalizedViewport},function(F$y){F$y.x<0&&(F$y.x=0,console.warn("Camera: viewport.x must large than 0.0.")),F$y.y<0&&(F$y.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<F$y.x+F$y.width&&(F$y.width=1-F$y.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<F$y.y+F$y.height&&(F$y.height=1-F$y.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=F$y,this._calculateProjectionMatrix()}),F$W(0,F$j,"projectionMatrix",function(){return this._projectionMatrix},function(F$y){this._projectionMatrix=F$y,this._useUserProjectionMatrix=!0}),F$W(0,F$j,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),F$l(F$A,["_tempVector20",function(){return this._tempVector20=new F$Yj}]),F$A}()),F$Bj=function(F$t){function F$k(F$y,F$j){F$k.__super.call(this,F$j),this._geometryFilter=new F$qj(this),this._render=new F$wj(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),F$y&&(this._geometryFilter.sharedMesh=F$y)instanceof laya.d3.resource.models.Mesh&&(F$y.loaded?this._render.sharedMaterials=F$y.materials:F$y.once("loaded",this,this._applyMeshMaterials))}F$$(F$k,"laya.d3.core.MeshSprite3D",F$t);var F$y=F$k.prototype;return F$y._changeRenderObjectByMesh=function(F$y){var F$j=this._render._renderElements,F$t=F$j[F$y];F$t||(F$t=F$j[F$y]=new F$Nj),F$t._render=this._render;var F$k=this._render.sharedMaterials[F$y];F$k||(F$k=F$xj.defaultMaterial);var F$T=this._geometryFilter.sharedMesh.getRenderElement(F$y);return F$t._mainSortID=this._getSortID(F$T,F$k),F$t._sprite3D=this,F$t.renderObj=F$T,F$t._material=F$k,F$t},F$y._changeRenderObjectByMaterial=function(F$y,F$j){var F$t=this._render._renderElements[F$y];F$j||(F$j=F$xj.defaultMaterial);var F$k=this._geometryFilter.sharedMesh.getRenderElement(F$y);return F$t._mainSortID=this._getSortID(F$k,F$j),F$t._sprite3D=this,F$t.renderObj=F$k,F$t._material=F$j,F$t},F$y._changeRenderObjectsByMesh=function(){var F$y=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=F$y;for(var F$j=0;F$j<F$y;F$j++)this._changeRenderObjectByMesh(F$j)},F$y._onMeshChanged=function(F$y){var F$j=F$y.sharedMesh;F$j.loaded?this._changeRenderObjectsByMesh():F$j.once("loaded",this,this._onMeshLoaded)},F$y._onMeshLoaded=function(F$y){F$y===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},F$y._onMaterialChanged=function(F$y,F$j,F$t){F$j<this._render._renderElements.length&&this._changeRenderObjectByMaterial(F$j,F$t)},F$y._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},F$y._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},F$y._parseCustomProps=function(F$y,F$j,F$t,F$k){var F$T=this.meshRender,F$Y=F$t.lightmapIndex;null!=F$Y&&(F$T.lightmapIndex=F$Y);var F$A,F$X,F$I=F$t.lightmapScaleOffset;if(F$I&&(F$T.lightmapScaleOffset=new F$Xj(F$I[0],F$I[1],F$I[2],F$I[3])),F$k.instanceParams)(F$A=F$k.instanceParams.loadPath)&&(F$X=F$n.getRes(F$j[F$A]),(this.meshFilter.sharedMesh=F$X).loaded?F$T.sharedMaterials=F$X.materials:F$X.once("loaded",this,this._applyMeshMaterials));else{(F$A=F$t.meshPath)&&(F$X=F$n.getRes(F$j[F$A]),this.meshFilter.sharedMesh=F$X);var F$b=F$t.materials;if(F$b){var F$D=F$T.sharedMaterials,F$l=F$b.length;F$D.length=F$l;for(var F$r=0;F$r<F$l;F$r++)F$D[F$r]=F$n.getRes(F$j[F$b[F$r].path]);F$T.sharedMaterials=F$D}}},F$y._applyMeshMaterials=function(F$y){for(var F$j=this._render.sharedMaterials,F$t=F$y.materials,F$k=0,F$T=F$t.length;F$k<F$T;F$k++)F$j[F$k]||(F$j[F$k]=F$t[F$k]);this._render.sharedMaterials=F$j},F$y._addToInitStaticBatchManager=function(){F$k._staticBatchManager._addInitBatchSprite(this)},F$y.cloneTo=function(F$y){var F$j=F$y;F$j._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var F$t=this._render,F$k=F$j._render;F$k.enable=F$t.enable,F$k.sharedMaterials=F$t.sharedMaterials,F$k.castShadow=F$t.castShadow;var F$T=F$t.lightmapScaleOffset;F$T&&(F$k.lightmapScaleOffset=F$T.clone()),F$k.lightmapIndex=F$t.lightmapIndex,F$k.receiveShadow=F$t.receiveShadow,F$k.sortingFudge=F$t.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,F$y)},F$y.destroy=function(F$y){if(void 0===F$y&&(F$y=!0),!this.destroyed){var F$j=this.meshFilter.sharedMesh;null!=F$j&&(F$j.loaded||F$j.off("loaded",this,this._applyMeshMaterials)),F$t.prototype.destroy.call(this,F$y),this._geometryFilter._destroy()}},F$W(0,F$y,"meshFilter",function(){return this._geometryFilter}),F$W(0,F$y,"meshRender",function(){return this._render}),F$k.__init__=function(){F$ky._staticBatchManagers.push(F$k._staticBatchManager)},F$k.load=function(F$y){return F$e.loader.create(F$y,null,null,F$k)},F$l(F$k,["_staticBatchManager",function(){return this._staticBatchManager=new F$dj}]),F$k}(F$Zj)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$y,F$j){"use strict";for(var F$t in Object.defineProperty(F$j,"__esModule",{value:!0}),Laya){var F$k=Laya[F$t];F$k&&F$k.__isclass&&(F$j[F$t]=F$k)}}),function(F$y,F$j,F$Ty){F$Ty.un,F$Ty.uns;var F$t=F$Ty.static,F$k=F$Ty.class,F$Y=F$Ty.getset,F$z=F$Ty.__newvec,F$X=laya.maths.Bezier,F$l=laya.utils.Browser,F$my=laya.utils.Byte,F$T=(laya.events.Event,laya.events.EventDispatcher),F$A=laya.display.Graphics,F$I=(laya.resource.HTMLCanvas,laya.utils.Handler),F$b=laya.net.Loader,F$r=laya.maths.MathUtil,F$Uy=laya.maths.Matrix,F$V=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),F$D=(laya.renders.RenderContext,laya.resource.Resource),F$$=laya.utils.RunDriver,F$Yy=laya.display.Sprite,F$W=laya.utils.Stat,F$qy=laya.resource.Texture,F$n=(laya.net.URL,laya.utils.Utils),F$U=function(){function F$y(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return F$k(F$y,"laya.ani.AnimationContent"),F$y}(),F$q=function(){function F$y(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return F$k(F$y,"laya.ani.AnimationNodeContent"),F$y}(),F$M=function(){function F$y(){}return F$k(F$y,"laya.ani.AnimationParser01"),F$y.parse=function(F$y,F$j){var F$t=F$j.__getBuffer(),F$k=0,F$T=0,F$Y=0,F$A=0,F$X=0,F$I=0,F$b=0,F$D=F$j.readUTFString();F$y._aniClassName=F$D;var F$l,F$r=F$j.readUTFString().split("\n"),F$$=F$j.getUint8(),F$W=F$j.getUint32(),F$z=F$j.getUint32();0<F$W&&(F$l=F$t.slice(F$W,F$z));var F$V=new F$my(F$l);for(0<F$z&&(F$y._publicExtData=F$t.slice(F$z,F$t.byteLength)),F$y._useParent=!!F$j.getUint8(),F$y._anis.length=F$$,F$k=0;F$k<F$$;F$k++){var F$n=F$y._anis[F$k]=new F$U;F$n.nodes=new Array;var F$C=F$n.name=F$r[F$j.getUint16()];F$y._aniMap[F$C]=F$k,F$n.bone3DMap={},F$n.playTime=F$j.getFloat32(),F$n.playTime<=0&&console.error("播放时间不能为0  url="+F$y.url+" name="+F$n.name);var F$M=F$n.nodes.length=F$j.getUint8();for(F$T=F$n.totalKeyframeDatasLength=0;F$T<F$M;F$T++){var F$_=F$n.nodes[F$T]=new F$q;F$_.childs=[];var F$e=F$j.getInt16();0<=F$e&&(F$_.name=F$r[F$e],F$n.bone3DMap[F$_.name]=F$T),F$_.keyFrame=new Array,F$_.parentIndex=F$j.getInt16(),-1==F$_.parentIndex?F$_.parent=null:F$_.parent=F$n.nodes[F$_.parentIndex],F$_.lerpType=F$j.getUint8();var F$v=F$j.getUint32();F$V.pos=F$v;var F$N=F$_.keyframeWidth=F$V.getUint16();if(F$n.totalKeyframeDatasLength+=F$N,0===F$_.lerpType||1===F$_.lerpType)for(F$_.interpolationMethod=[],F$_.interpolationMethod.length=F$N,F$Y=0;F$Y<F$N;F$Y++)F$_.interpolationMethod[F$Y]=F$H.interpolation[F$V.getUint8()];null!=F$_.parent&&F$_.parent.childs.push(F$_);var F$P=F$j.getUint16();0<F$P&&(F$_.extenData=F$t.slice(F$j.pos,F$j.pos+F$P),F$j.pos+=F$P);var F$d,F$p=F$j.getUint16(),F$f=0;for(F$Y=0,F$A=F$_.keyFrame.length=F$p;F$Y<F$A;F$Y++){if((F$d=F$_.keyFrame[F$Y]=new F$w).duration=F$j.getFloat32(),F$d.startTime=F$f,2===F$_.lerpType){F$d.interpolationData=[];var F$Q,F$m=F$j.getUint8();switch(F$Q=F$j.getFloat32()){case 254:for(F$d.interpolationData.length=F$N,F$b=0;F$b<F$N;F$b++)F$d.interpolationData[F$b]=0;break;case 255:for(F$d.interpolationData.length=F$N,F$b=0;F$b<F$N;F$b++)F$d.interpolationData[F$b]=5;break;default:for(F$d.interpolationData.push(F$Q),F$I=1;F$I<F$m;F$I++)F$d.interpolationData.push(F$j.getFloat32())}}for(F$d.data=new Float32Array(F$N),F$X=0;F$X<F$N;F$X++)F$d.data[F$X]=F$j.getFloat32(),-1e-8<F$d.data[F$X]&&F$d.data[F$X]<1e-8&&(F$d.data[F$X]=0);F$f+=F$d.duration}F$d.startTime=F$n.playTime,F$_.playTime=F$n.playTime,F$y._calculateKeyFrame(F$_,F$p,F$N)}}},F$y}(),F$_=function(){function F$e(){}return F$k(F$e,"laya.ani.AnimationParser02"),F$e.READ_DATA=function(){F$e._DATA.offset=F$e._reader.getUint32(),F$e._DATA.size=F$e._reader.getUint32()},F$e.READ_BLOCK=function(){for(var F$y=F$e._BLOCK.count=F$e._reader.getUint16(),F$j=F$e._BLOCK.blockStarts=[],F$t=F$e._BLOCK.blockLengths=[],F$k=0;F$k<F$y;F$k++)F$j.push(F$e._reader.getUint32()),F$t.push(F$e._reader.getUint32())},F$e.READ_STRINGS=function(){var F$y=F$e._reader.getUint32(),F$j=F$e._reader.getUint16(),F$t=F$e._reader.pos;F$e._reader.pos=F$y+F$e._DATA.offset;for(var F$k=0;F$k<F$j;F$k++)F$e._strings[F$k]=F$e._reader.readUTFString();F$e._reader.pos=F$t},F$e.parse=function(F$y,F$j){F$e._templet=F$y;(F$e._reader=F$j).__getBuffer();F$e.READ_DATA(),F$e.READ_BLOCK(),F$e.READ_STRINGS();for(var F$t=0,F$k=F$e._BLOCK.count;F$t<F$k;F$t++){var F$T=F$j.getUint16(),F$Y=F$e._strings[F$T],F$A=F$e["READ_"+F$Y];if(null==F$A)throw new Error("model file err,no this function:"+F$T+" "+F$Y);F$A.call()}},F$e.READ_ANIMATIONS=function(){var F$y=F$e._reader,F$j=F$y.__getBuffer(),F$t=0,F$k=0,F$T=0,F$Y=0,F$A=F$y.getUint16(),F$X=[];for(F$X.length=F$A,F$t=0;F$t<F$A;F$t++)F$X[F$t]=F$H.interpolation[F$y.getByte()];var F$I=F$y.getUint8();for(F$e._templet._anis.length=F$I,F$t=0;F$t<F$I;F$t++){var F$b=F$e._templet._anis[F$t]={};F$b.nodes=new Array;var F$D=F$b.name=F$e._strings[F$y.getUint16()];F$e._templet._aniMap[F$D]=F$t,F$b.bone3DMap={},F$b.playTime=F$y.getFloat32();var F$l=F$b.nodes.length=F$y.getInt16();for(F$k=F$b.totalKeyframeDatasLength=0;F$k<F$l;F$k++){var F$r=F$b.nodes[F$k]={};F$r.keyframeWidth=F$A,F$r.childs=[];var F$$=F$y.getUint16();0<=F$$&&(F$r.name=F$e._strings[F$$],F$b.bone3DMap[F$r.name]=F$k),F$r.keyFrame=new Array,F$r.parentIndex=F$y.getInt16(),-1==F$r.parentIndex?F$r.parent=null:F$r.parent=F$b.nodes[F$r.parentIndex],F$b.totalKeyframeDatasLength+=F$A,F$r.interpolationMethod=F$X,null!=F$r.parent&&F$r.parent.childs.push(F$r);var F$W=F$y.getUint16(),F$z=null,F$V=null;for(F$T=0,F$Y=F$r.keyFrame.length=F$W;F$T<F$Y;F$T++){(F$z=F$r.keyFrame[F$T]={}).startTime=F$y.getFloat32(),F$V&&(F$V.duration=F$z.startTime-F$V.startTime);var F$n=F$e._DATA.offset,F$C=F$y.getUint32(),F$M=4*F$A,F$_=F$j.slice(F$n+F$C,F$n+F$C+F$M);F$z.data=new Float32Array(F$_),F$V=F$z}F$z.duration=0,F$r.playTime=F$b.playTime,F$e._templet._calculateKeyFrame(F$r,F$W,F$A)}}},F$e._templet=null,F$e._reader=null,F$e._strings=[],F$t(F$e,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),F$e}(),F$wy=(function(){function F$y(){}F$k(F$y,"laya.ani.AnimationState"),F$y.stopped=0,F$y.paused=1,F$y.playing=2}(),function(){function F$T(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new F$Zy,this.resultMatrix=new F$Uy,this._children=[]}F$k(F$T,"laya.ani.bone.Bone");var F$y=F$T.prototype;return F$y.setTempMatrix=function(F$y){this._tempMatrix=F$y;var F$j,F$t=0;for(F$t=0,F$j=this._children.length;F$t<F$j;F$t++)this._children[F$t].setTempMatrix(this._tempMatrix)},F$y.update=function(F$y){var F$j;if(this.rotation=this.transform.skX,F$y)F$j=this.resultTransform.getMatrix(),F$Uy.mul(F$j,F$y,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)F$j=this.resultTransform.getMatrix(),F$Uy.mul(F$j,this.parentBone.resultMatrix,this.resultMatrix);else{var F$t=this.parentBone,F$k=NaN,F$T=NaN,F$Y=NaN,F$A=this.parentBone.resultMatrix;F$j=this.resultTransform.getMatrix();var F$X=F$A.a*F$j.tx+F$A.c*F$j.ty+F$A.tx,F$I=F$A.b*F$j.tx+F$A.d*F$j.ty+F$A.ty,F$b=new F$Uy;this.inheritRotation?(F$k=Math.atan2(F$t.resultMatrix.b,F$t.resultMatrix.a),F$T=Math.cos(F$k),F$Y=Math.sin(F$k),F$b.setTo(F$T,F$Y,-F$Y,F$T,0,0),F$Uy.mul(this._tempMatrix,F$b,F$Uy.TEMP),F$Uy.TEMP.copyTo(F$b),F$j=this.resultTransform.getMatrix(),F$Uy.mul(F$j,F$b,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,F$j=this.resultTransform.getMatrix(),F$Uy.TEMP.identity(),F$Uy.TEMP.d=this.d,F$Uy.mul(F$j,F$Uy.TEMP,this.resultMatrix)),this.resultMatrix.tx=F$X,this.resultMatrix.ty=F$I}else(F$j=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var F$D,F$l=0;for(F$l=0,F$D=this._children.length;F$l<F$D;F$l++)this._children[F$l].update()},F$y.updateChild=function(){var F$y,F$j=0;for(F$j=0,F$y=this._children.length;F$j<F$y;F$j++)this._children[F$j].update()},F$y.setRotation=function(F$y){this._sprite&&(this._sprite.rotation=180*F$y/Math.PI)},F$y.updateDraw=function(F$y,F$j){F$T.ShowBones&&!F$T.ShowBones[this.name]||(this._sprite||(this._sprite=new F$Yy,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),F$Ty.stage.addChild(this._sprite)),this._sprite.x=F$y+this.resultMatrix.tx,this._sprite.y=F$j+this.resultMatrix.ty);var F$t,F$k=0;for(F$k=0,F$t=this._children.length;F$k<F$t;F$k++)this._children[F$k].updateDraw(F$y,F$j)},F$y.addChild=function(F$y){this._children.push(F$y),F$y.parentBone=this},F$y.findBone=function(F$y){if(this.name==F$y)return this;var F$j,F$t,F$k=0;for(F$k=0,F$j=this._children.length;F$k<F$j;F$k++)if(F$t=this._children[F$k].findBone(F$y))return F$t;return null},F$y.localToWorld=function(F$y){var F$j=F$y[0],F$t=F$y[1];F$y[0]=F$j*this.resultMatrix.a+F$t*this.resultMatrix.c+this.resultMatrix.tx,F$y[1]=F$j*this.resultMatrix.b+F$t*this.resultMatrix.d+this.resultMatrix.ty},F$T.ShowBones={},F$T}()),F$Sy=function(){function F$z(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}F$k(F$z,"laya.ani.bone.BoneSlot");var F$y=F$z.prototype;return F$y.showSlotData=function(F$y,F$j){void 0===F$j&&(F$j=!0),this.currSlotData=F$y,F$j&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},F$y.showDisplayByName=function(F$y){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(F$y))},F$y.replaceDisplayByName=function(F$y,F$j){if(this.currSlotData){var F$t;F$t=this.currSlotData.getDisplayByName(F$y);var F$k;F$k=this.currSlotData.getDisplayByName(F$j),this.replaceDisplayByIndex(F$t,F$k)}},F$y.replaceDisplayByIndex=function(F$y,F$j){this.currSlotData&&(this._replaceDic[F$y]=F$j,this.displayIndex==F$y&&this.showDisplayByIndex(F$y))},F$y.showDisplayByIndex=function(F$y){if(null!=this._replaceDic[F$y]&&(F$y=this._replaceDic[F$y]),this.currSlotData&&-1<F$y&&F$y<this.currSlotData.displayArr.length){if(this.displayIndex=F$y,this.currDisplayData=this.currSlotData.displayArr[F$y],this.currDisplayData){var F$j=this.currDisplayData.name;this.currTexture=this.templet.getTexture(F$j),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!F$V.isConchApp||F$V.isConchApp&&"0.9.15"<F$Yy.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},F$y.replaceSkin=function(F$y){this._diyTexture=F$y,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},F$y.setParentMatrix=function(F$y){this._parentMatrix=F$y},F$y.draw=function(F$y,F$j,F$t,F$k){if(void 0===F$t&&(F$t=!1),void 0===F$k&&(F$k=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var F$T,F$Y=this.currTexture;switch(this._diyTexture&&(F$Y=this._diyTexture),this.currDisplayData.type){case 0:if(F$y){var F$A=this.getDisplayMatrix();if(this._parentMatrix){var F$X=!1;if(F$A){var F$I;if(F$Uy.mul(F$A,this._parentMatrix,F$Uy.TEMP),F$I=F$t?(null==this._resultMatrix&&(this._resultMatrix=new F$Uy),this._resultMatrix):new F$Uy,!F$V.isWebGL&&this.currDisplayData.uvs||F$V.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var F$b=F$z._tempMatrix;F$b.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$b.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(F$X=!0,F$b.rotate(-Math.PI/2)),F$Uy.mul(F$b,F$Uy.TEMP,F$I)}else F$Uy.TEMP.copyTo(F$I);F$X?F$y.drawTexture(F$Y,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,F$I):F$y.drawTexture(F$Y,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,F$I)}}}break;case 1:if(null==(F$T=F$t?(null==this._skinSprite&&(this._skinSprite=F$z.createSkinMesh()),this._skinSprite):F$z.createSkinMesh()))return;var F$D;if(null==this.currDisplayData.bones){var F$l,F$r=this.currDisplayData.weights;this.deformData&&(F$r=this.deformData),F$l=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$N.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$N.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=F$r;this.currDisplayData.triangles.length;F$D=this.currDisplayData.triangles,F$T.init2(F$Y,null,F$D,this._mVerticleArr,F$l);var F$$,F$W=this.getDisplayMatrix();if(this._parentMatrix)if(F$W)F$Uy.mul(F$W,this._parentMatrix,F$Uy.TEMP),F$$=F$t?(null==this._resultMatrix&&(this._resultMatrix=new F$Uy),this._resultMatrix):new F$Uy,F$Uy.TEMP.copyTo(F$$),F$T.transform=F$$}else this.skinMesh(F$j,F$T,F$k);F$y.drawSkin(F$T);break;case 2:if(null==(F$T=F$t?(null==this._skinSprite&&(this._skinSprite=F$z.createSkinMesh()),this._skinSprite):F$z.createSkinMesh()))return;this.skinMesh(F$j,F$T,F$k),F$y.drawSkin(F$T)}}},F$y.skinMesh=function(F$y,F$j,F$t){var F$k,F$T=this.currTexture,F$Y=this.currDisplayData.bones;F$k=this._diyTexture?(F$T=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=F$N.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=F$N.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var F$A,F$X,F$I=this.currDisplayData.weights,F$b=this.currDisplayData.triangles,F$D=0,F$l=0,F$r=0,F$$=NaN,F$W=NaN,F$z=0,F$V=0,F$n=[],F$C=0,F$M=0;if(this.deformData&&0<this.deformData.length){var F$_=0;for(F$C=0,F$M=F$Y.length;F$C<F$M;){for(F$r=F$Y[F$C++]+F$C,F$l=F$D=0;F$C<F$r;F$C++)F$X=F$y[F$Y[F$C]],F$$=F$I[F$z]+this.deformData[F$_++],F$W=F$I[F$z+1]+this.deformData[F$_++],F$V=F$I[F$z+2],F$D+=(F$$*F$X.a+F$W*F$X.c+F$X.tx)*F$V,F$l+=(F$$*F$X.b+F$W*F$X.d+F$X.ty)*F$V,F$z+=3;F$n.push(F$D,F$l)}}else for(F$C=0,F$M=F$Y.length;F$C<F$M;){for(F$r=F$Y[F$C++]+F$C,F$l=F$D=0;F$C<F$r;F$C++)F$X=F$y[F$Y[F$C]],F$$=F$I[F$z],F$W=F$I[F$z+1],F$V=F$I[F$z+2],F$D+=(F$$*F$X.a+F$W*F$X.c+F$X.tx)*F$V,F$l+=(F$$*F$X.b+F$W*F$X.d+F$X.ty)*F$V,F$z+=3;F$n.push(F$D,F$l)}this._mVerticleArr=F$n,F$A=F$b,F$j.init2(F$T,null,F$A,this._mVerticleArr,F$k)},F$y.drawBonePoint=function(F$y){F$y&&this._parentMatrix&&F$y.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},F$y.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},F$y.getMatrix=function(){return this._resultMatrix},F$y.copy=function(){var F$y=new F$z;return F$y.type="copy",F$y.name=this.name,F$y.attachmentName=this.attachmentName,F$y.srcDisplayIndex=this.srcDisplayIndex,F$y.parent=this.parent,F$y.displayIndex=this.displayIndex,F$y.templet=this.templet,F$y.currSlotData=this.currSlotData,F$y.currTexture=this.currTexture,F$y.currDisplayData=this.currDisplayData,F$y},F$z.createSkinMesh=function(){return F$V.isWebGL||F$V.isConchApp?F$$.skinAniSprite():(F$V.isWebGL,null)},F$t(F$z,["_tempMatrix",function(){return this._tempMatrix=new F$Uy}]),F$z}(),F$Hy=function(){function F$y(){this.skinName=null,this.deformSlotDataList=[]}return F$k(F$y,"laya.ani.bone.DeformAniData"),F$y}(),F$Ky=function(){function F$y(){this.deformSlotDisplayList=[]}return F$k(F$y,"laya.ani.bone.DeformSlotData"),F$y}(),F$xy=function(){function F$y(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}F$k(F$y,"laya.ani.bone.DeformSlotDisplayData");var F$j=F$y.prototype;return F$j.binarySearch1=function(F$y,F$j){var F$t=0,F$k=F$y.length-2;if(0==F$k)return 1;for(var F$T=F$k>>>1;;){if(F$y[Math.floor(F$T+1)]<=F$j?F$t=F$T+1:F$k=F$T,F$t==F$k)return F$t+1;F$T=F$t+F$k>>>1}return 0},F$j.apply=function(F$y,F$j,F$t){if(void 0===F$t&&(F$t=1),F$y+=.05,!(this.timeList.length<=0)){var F$k=0;if(!(F$y<this.timeList[0])){var F$T=this.vectices[0].length,F$Y=[],F$A=this.binarySearch1(this.timeList,F$y);if(this.frameIndex=F$A,F$y>=this.timeList[this.timeList.length-1]){var F$X=this.vectices[this.vectices.length-1];if(F$t<1)for(F$k=0;F$k<F$T;F$k++)F$Y[F$k]+=(F$X[F$k]-F$Y[F$k])*F$t;else for(F$k=0;F$k<F$T;F$k++)F$Y[F$k]=F$X[F$k];this.deformData=F$Y}else{this.tweenKeyList[this.frameIndex];var F$I=this.vectices[this.frameIndex-1],F$b=this.vectices[this.frameIndex],F$D=this.timeList[this.frameIndex-1],F$l=this.timeList[this.frameIndex];F$t=this.tweenKeyList[F$A-1]?(F$y-F$D)/(F$l-F$D):0;var F$r=NaN;for(F$k=0;F$k<F$T;F$k++)F$r=F$I[F$k],F$Y[F$k]=F$r+(F$b[F$k]-F$r)*F$t;this.deformData=F$Y}}}},F$y}(),F$Fy=function(){function F$y(){this.time=NaN,this.drawOrder=[]}return F$k(F$y,"laya.ani.bone.DrawOrderData"),F$y}(),F$Gy=function(){function F$y(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return F$k(F$y,"laya.ani.bone.EventData"),F$y}(),F$C=function(){function F$ky(F$y,F$j){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=F$y,this._targetBone=F$j[F$y.targetBoneIndex],this.isSpine=F$y.isSpine,null==this._bones&&(this._bones=[]);for(var F$t=this._bones.length=0,F$k=F$y.boneIndexs.length;F$t<F$k;F$t++)this._bones.push(F$j[F$y.boneIndexs[F$t]]);this.name=F$y.name,this.mix=F$y.mix,this.bendDirection=F$y.bendDirection}F$k(F$ky,"laya.ani.bone.IkConstraint");var F$y=F$ky.prototype;return F$y.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},F$y._applyIk1=function(F$y,F$j,F$t,F$k){var F$T=F$y.parentBone,F$Y=1/(F$T.resultMatrix.a*F$T.resultMatrix.d-F$T.resultMatrix.b*F$T.resultMatrix.c),F$A=F$j-F$T.resultMatrix.tx,F$X=F$t-F$T.resultMatrix.ty,F$I=(F$A*F$T.resultMatrix.d-F$X*F$T.resultMatrix.c)*F$Y-F$y.transform.x,F$b=(F$X*F$T.resultMatrix.a-F$A*F$T.resultMatrix.b)*F$Y-F$y.transform.y,F$D=Math.atan2(F$b,F$I)*F$ky.radDeg-0-F$y.transform.skX;F$y.transform.scX<0&&(F$D+=180),180<F$D?F$D-=360:F$D<-180&&(F$D+=360),F$y.transform.skX=F$y.transform.skY=F$y.transform.skX+F$D*F$k,F$y.update()},F$y.updatePos=function(F$y,F$j){this._sp&&this._sp.pos(F$y,F$j)},F$y._applyIk2=function(F$y,F$j,F$t,F$k,F$T,F$Y){if(0!=F$Y){var F$A=F$y.resultTransform.x,F$X=F$y.resultTransform.y,F$I=F$y.transform.scX,F$b=F$y.transform.scY,F$D=F$j.transform.scX,F$l=0,F$r=0,F$$=0;F$$=F$I<0?(F$I=-F$I,F$l=180,-1):(F$l=0,1),F$b<0&&(F$b=-F$b,F$$=-F$$),F$r=F$D<0?(F$D=-F$D,180):0;var F$W=F$j.resultTransform.x,F$z=NaN,F$V=NaN,F$n=NaN,F$C=F$y.resultMatrix.a,F$M=F$y.resultMatrix.c,F$_=F$y.resultMatrix.b,F$e=F$y.resultMatrix.d,F$v=Math.abs(F$I-F$b)<=1e-4;F$n=F$v?(F$V=F$C*F$W+F$M*(F$z=F$j.resultTransform.y)+F$y.resultMatrix.tx,F$_*F$W+F$e*F$z+F$y.resultMatrix.ty):(F$z=0,F$V=F$C*F$W+F$y.resultMatrix.tx,F$_*F$W+F$y.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new F$Yy,F$Ty.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$t,F$k,15,"#ffff00"),this._sp.graphics.drawCircle(F$V,F$n,15,"#ff00ff")),F$y.setRotation(Math.atan2(F$n-F$y.resultMatrix.ty,F$V-F$y.resultMatrix.tx));var F$N=F$y.parentBone;F$C=F$N.resultMatrix.a,F$M=F$N.resultMatrix.c,F$_=F$N.resultMatrix.b;var F$P=1/(F$C*(F$e=F$N.resultMatrix.d)-F$M*F$_),F$d=F$t-F$N.resultMatrix.tx,F$p=F$k-F$N.resultMatrix.ty,F$f=(F$d*F$e-F$p*F$M)*F$P-F$A,F$Q=(F$p*F$C-F$d*F$_)*F$P-F$X,F$m=((F$d=F$V-F$N.resultMatrix.tx)*F$e-(F$p=F$n-F$N.resultMatrix.ty)*F$M)*F$P-F$A,F$U=(F$p*F$C-F$d*F$_)*F$P-F$X,F$q=Math.sqrt(F$m*F$m+F$U*F$U),F$w=F$j.length*F$D,F$S=NaN,F$H=NaN;if(F$v){var F$K=(F$f*F$f+F$Q*F$Q-F$q*F$q-(F$w*=F$I)*F$w)/(2*F$q*F$w);F$K<-1?F$K=-1:1<F$K&&(F$K=1),F$H=Math.acos(F$K)*F$T,F$C=F$q+F$w*F$K,F$M=F$w*Math.sin(F$H),F$S=Math.atan2(F$Q*F$C-F$f*F$M,F$f*F$C+F$Q*F$M)}else{var F$x=(F$C=F$I*F$w)*F$C,F$F=(F$M=F$b*F$w)*F$M,F$G=F$f*F$f+F$Q*F$Q,F$g=Math.atan2(F$Q,F$f),F$a=-2*F$F*F$q,F$J=F$F-F$x;if(0<(F$e=F$a*F$a-4*F$J*(F$_=F$F*F$q*F$q+F$x*F$G-F$x*F$F))){var F$h=Math.sqrt(F$e);F$a<0&&(F$h=-F$h);var F$O=(F$h=-(F$a+F$h)/2)/F$J,F$s=F$_/F$h,F$Z=Math.abs(F$O)<Math.abs(F$s)?F$O:F$s;F$Z*F$Z<=F$G&&(F$p=Math.sqrt(F$G-F$Z*F$Z)*F$T,F$S=F$g-Math.atan2(F$p,F$Z),F$H=Math.atan2(F$p/F$b,(F$Z-F$q)/F$I))}var F$R=0,F$B=Number.MAX_VALUE,F$c=0,F$L=0,F$o=0,F$i=0,F$E=0,F$u=0;F$i<(F$e=(F$d=F$q+F$C)*F$d)&&(F$o=0,F$i=F$e,F$E=F$d),(F$e=(F$d=F$q-F$C)*F$d)<F$B&&(F$R=Math.PI,F$B=F$e,F$c=F$d);var F$yy=Math.acos(-F$C*F$q/(F$x-F$F));(F$e=(F$d=F$C*Math.cos(F$yy)+F$q)*F$d+(F$p=F$M*Math.sin(F$yy))*F$p)<F$B&&(F$R=F$yy,F$B=F$e,F$c=F$d,F$L=F$p),F$i<F$e&&(F$o=F$yy,F$i=F$e,F$E=F$d,F$u=F$p),F$H=F$G<=(F$B+F$i)/2?(F$S=F$g-Math.atan2(F$L*F$T,F$c),F$R*F$T):(F$S=F$g-Math.atan2(F$u*F$T,F$E),F$o*F$T)}var F$jy=Math.atan2(F$z,F$W)*F$$,F$ty=F$y.resultTransform.skX;180<(F$S=(F$S-F$jy)*F$ky.radDeg+F$l-F$ty)?F$S-=360:F$S<-180&&(F$S+=360),F$y.resultTransform.x=F$A,F$y.resultTransform.y=F$X,F$y.resultTransform.skX=F$y.resultTransform.skY=F$ty+F$S*F$Y,F$ty=F$j.resultTransform.skX,180<(F$H=((F$H+F$jy)*F$ky.radDeg-0)*F$$+F$r-(F$ty%=360))?F$H-=360:F$H<-180&&(F$H+=360),F$j.resultTransform.x=F$W,F$j.resultTransform.y=F$z,F$j.resultTransform.skX=F$j.resultTransform.skY=F$j.resultTransform.skY+F$H*F$Y,F$y.update()}},F$y._applyIk3=function(F$y,F$j,F$t,F$k,F$T,F$Y){if(0!=F$Y){var F$A,F$X,F$I=F$j.resultMatrix.a*F$j.length,F$b=F$j.resultMatrix.b*F$j.length,F$D=F$I*F$I+F$b*F$b,F$l=Math.sqrt(F$D),F$r=F$y.resultMatrix.tx,F$$=F$y.resultMatrix.ty,F$W=F$j.resultMatrix.tx,F$z=F$j.resultMatrix.ty,F$V=F$W-F$r,F$n=F$z-F$$,F$C=F$V*F$V+F$n*F$n,F$M=Math.sqrt(F$C),F$_=(F$V=F$t-F$y.resultMatrix.tx)*F$V+(F$n=F$k-F$y.resultMatrix.ty)*F$n,F$e=Math.sqrt(F$_);if(F$l+F$M<=F$e||F$e+F$l<=F$M||F$e+F$M<=F$l){var F$v=NaN;F$W=F$r+(F$v=F$l+F$M<=F$e?1:-1)*(F$t-F$r)*F$M/F$e,F$z=F$$+F$v*(F$k-F$$)*F$M/F$e}else{var F$N=(F$C-F$D+F$_)/(2*F$_),F$P=Math.sqrt(F$C-F$N*F$N*F$_)/F$e,F$d=F$r+F$V*F$N,F$p=F$$+F$n*F$N,F$f=-F$n*F$P,F$Q=F$V*F$P;F$z=0<F$T?(F$W=F$d-F$f,F$p-F$Q):(F$W=F$d+F$f,F$p+F$Q)}F$A=F$W,F$X=F$z,this.isDebug&&(this._sp||(this._sp=new F$Yy,F$Ty.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(F$r,F$$,15,"#ff00ff"),this._sp.graphics.drawCircle(F$t,F$k,15,"#ffff00"),this._sp.graphics.drawCircle(F$A,F$X,15,"#ff00ff"));var F$m,F$U;F$m=Math.atan2(F$X-F$y.resultMatrix.ty,F$A-F$y.resultMatrix.tx),F$y.setRotation(F$m),(F$U=F$ky._tempMatrix).identity(),F$U.rotate(F$m),F$U.scale(F$y.resultMatrix.getScaleX(),F$y.resultMatrix.getScaleY()),F$U.translate(F$y.resultMatrix.tx,F$y.resultMatrix.ty),F$U.copyTo(F$y.resultMatrix),F$y.updateChild();var F$q,F$w;F$q=Math.atan2(F$k-F$X,F$t-F$A),F$j.setRotation(F$q),(F$w=F$ky._tempMatrix).identity(),F$w.rotate(F$q),F$w.scale(F$j.resultMatrix.getScaleX(),F$j.resultMatrix.getScaleY()),F$w.translate(F$A,F$X),F$U.copyTo(F$j.resultMatrix),F$j.updateChild()}},F$t(F$ky,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new F$Uy}]),F$ky}(),F$gy=function(){function F$y(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return F$k(F$y,"laya.ani.bone.IkConstraintData"),F$y}(),F$e=function(){function F$w(F$y,F$j){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=F$y,this.position=F$y.position,this.spacing=F$y.spacing,this.rotateMix=F$y.rotateMix,this.translateMix=F$y.translateMix,this.bones=[];for(var F$t=this.data.bones,F$k=0,F$T=F$t.length;F$k<F$T;F$k++)this.bones.push(F$j[F$t[F$k]])}F$k(F$w,"laya.ani.bone.PathConstraint");var F$y=F$w.prototype;return F$y.apply=function(F$y,F$j){if(this.target){var F$t=this.translateMix,F$k=this.translateMix,F$T=0<F$k,F$Y=this.data.spacingMode,F$A="length"==F$Y,F$X=this.data.rotateMode,F$I="tangent"==F$X,F$b="chainScale"==F$X,F$D=[],F$l=this.bones.length,F$r=F$I?F$l:F$l+1,F$$=[];(this._spaces=F$$)[0]=this.position;var F$W=this.spacing;if(F$b||F$A)for(var F$z=0,F$V=F$r-1;F$z<F$V;){var F$n=this.bones[F$z],F$C=F$n.length,F$M=F$C*F$n.resultMatrix.a,F$_=F$C*F$n.resultMatrix.b;F$C=Math.sqrt(F$M*F$M+F$_*F$_),F$b&&(F$D[F$z]=F$C),F$$[++F$z]=F$A?Math.max(0,F$C+F$W):F$W}else for(F$z=1;F$z<F$r;F$z++)F$$[F$z]=F$W;var F$e=this.computeWorldPositions(this.target,F$y,F$j,F$r,F$I,"percent"==this.data.positionMode,"percent"==F$Y);if(this._debugKey){for(F$z=0;F$z<F$e.length;F$z++)F$j.drawCircle(F$e[F$z++],F$e[F$z++],5,"#00ff00");var F$v=[];for(F$z=0;F$z<F$e.length;F$z++)F$v.push(F$e[F$z++],F$e[F$z++]);F$j.drawLines(0,0,F$v,"#ff0000")}var F$N=F$e[0],F$P=F$e[1],F$d=this.data.offsetRotation,F$p="chain"==F$X&&0==F$d,F$f=NaN;for(F$z=0,F$f=3;F$z<F$l;F$z++,F$f+=3){(F$n=this.bones[F$z]).resultMatrix.tx+=(F$N-F$n.resultMatrix.tx)*F$t,F$n.resultMatrix.ty+=(F$P-F$n.resultMatrix.ty)*F$t;var F$Q=(F$M=F$e[F$f])-F$N,F$m=(F$_=F$e[F$f+1])-F$P;if(F$b&&0!=(F$C=F$D[F$z])){var F$U=(Math.sqrt(F$Q*F$Q+F$m*F$m)/F$C-1)*F$k+1;F$n.resultMatrix.a*=F$U,F$n.resultMatrix.c*=F$U}if(F$N=F$M,F$P=F$_,F$T){var F$q=F$n.resultMatrix.a,F$w=F$n.resultMatrix.c,F$S=F$n.resultMatrix.b,F$H=F$n.resultMatrix.d,F$K=NaN,F$x=NaN,F$F=NaN;F$K=F$I?F$e[F$f-1]:0==F$$[F$z+1]?F$e[F$f+2]:Math.atan2(F$m,F$Q),F$K-=Math.atan2(F$S,F$q)-F$d/180*Math.PI,F$p&&(F$x=Math.cos(F$K),F$F=Math.sin(F$K),F$N+=((F$C=F$n.length)*(F$x*F$q-F$F*F$S)-F$Q)*F$k,F$P+=(F$C*(F$F*F$q+F$x*F$S)-F$m)*F$k),F$K>Math.PI?F$K-=2*Math.PI:F$K<-Math.PI&&(F$K+=2*Math.PI),F$K*=F$k,F$x=Math.cos(F$K),F$F=Math.sin(F$K),F$n.resultMatrix.a=F$x*F$q-F$F*F$S,F$n.resultMatrix.c=F$x*F$w-F$F*F$H,F$n.resultMatrix.b=F$F*F$q+F$x*F$S,F$n.resultMatrix.d=F$F*F$w+F$x*F$H}}}},F$y.computeWorldVertices2=function(F$y,F$j,F$t,F$k,F$T,F$Y){var F$A,F$X,F$I=F$y.currDisplayData.bones,F$b=F$y.currDisplayData.weights,F$D=F$y.currDisplayData.triangles,F$l=0,F$r=0,F$$=0,F$W=0,F$z=0,F$V=0,F$n=0,F$C=0,F$M=0,F$_=0,F$e=0;if(null!=F$I){for(F$l=0;F$l<F$t;F$l+=2)F$r+=(F$W=F$I[F$r])+1,F$$+=F$W;var F$v=F$j;for(F$z=F$Y,F$V=3*F$$;F$z<F$k;F$z+=2){for(F$C=F$n=0,F$W=F$I[F$r++],F$W+=F$r;F$r<F$W;F$r++,F$V+=3){F$A=F$v[F$I[F$r]].resultMatrix,F$M=F$b[F$V],F$_=F$b[F$V+1];var F$N=F$b[F$V+2];F$n+=(F$M*F$A.a+F$_*F$A.c+F$A.tx)*F$N,F$C+=(F$M*F$A.b+F$_*F$A.d+F$A.ty)*F$N}F$T[F$z]=F$n,F$T[F$z+1]=F$C}}else{var F$P,F$d;if(F$D||(F$D=F$b),F$y.deformData&&(F$D=F$y.deformData),F$P=F$y.parent,F$j)for(F$e=F$j.length,F$l=0;F$l<F$e;F$l++)if(F$j[F$l].name==F$P){F$X=F$j[F$l];break}F$X&&(F$d=F$X.resultMatrix),F$d||(F$d=F$w._tempMt);var F$p=F$d.tx,F$f=F$d.ty,F$Q=F$d.a,F$m=F$d.b,F$U=F$d.c,F$q=F$d.d;for(F$X&&(F$q*=F$X.d),F$r=F$t,F$z=F$Y;F$z<F$k;F$r+=2,F$z+=2)F$M=F$D[F$r],F$_=F$D[F$r+1],F$T[F$z]=F$M*F$Q+F$_*F$m+F$p,F$T[F$z+1]=-(F$M*F$U+F$_*F$q+F$f)}},F$y.computeWorldPositions=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A){F$y.currDisplayData.bones,F$y.currDisplayData.weights,F$y.currDisplayData.triangles;var F$X=[],F$I=0,F$b=F$y.currDisplayData.verLen,F$D=this.position,F$l=this._spaces,F$r=[],F$$=[],F$W=F$b/6,F$z=-1,F$V=NaN,F$n=0,F$C=0,F$M=NaN,F$_=NaN,F$e=NaN,F$v=NaN;if(F$W--,F$b-=4,this.computeWorldVertices2(F$y,F$j,2,F$b,F$X,0),this._debugKey)for(F$I=0;F$I<F$X.length;)F$t.drawCircle(F$X[F$I++],F$X[F$I++],10,"#ff0000");F$r=F$X,this._curves.length=F$W;var F$N=this._curves,F$P=F$r[F$V=0],F$d=F$r[1],F$p=0,F$f=0,F$Q=0,F$m=0,F$U=0,F$q=0,F$w=NaN,F$S=NaN,F$H=NaN,F$K=NaN,F$x=NaN,F$F=NaN,F$G=NaN,F$g=NaN,F$a=0;for(F$I=0,F$a=2;F$I<F$W;F$I++,F$a+=6)F$p=F$r[F$a],F$f=F$r[F$a+1],F$Q=F$r[F$a+2],F$m=F$r[F$a+3],F$x=2*(F$w=.1875*(F$P-2*F$p+F$Q))+(F$H=.09375*(3*(F$p-F$Q)-F$P+(F$U=F$r[F$a+4]))),F$F=2*(F$S=.1875*(F$d-2*F$f+F$m))+(F$K=.09375*(3*(F$f-F$m)-F$d+(F$q=F$r[F$a+5]))),F$G=.75*(F$p-F$P)+F$w+.16666667*F$H,F$g=.75*(F$f-F$d)+F$S+.16666667*F$K,F$V+=Math.sqrt(F$G*F$G+F$g*F$g),F$G+=F$x,F$g+=F$F,F$x+=F$H,F$F+=F$K,F$V+=Math.sqrt(F$G*F$G+F$g*F$g),F$G+=F$x,F$g+=F$F,F$V+=Math.sqrt(F$G*F$G+F$g*F$g),F$G+=F$x+F$H,F$g+=F$F+F$K,F$V+=Math.sqrt(F$G*F$G+F$g*F$g),F$N[F$I]=F$V,F$P=F$U,F$d=F$q;if(F$Y&&(F$D*=F$V),F$A)for(F$I=0;F$I<F$k;F$I++)F$l[F$I]*=F$V;var F$J=this._segments,F$h=0,F$O=0;for(F$O=F$C=F$n=F$I=0;F$I<F$k;F$I++,F$n+=3)if((F$M=F$D+=F$_=F$l[F$I])<0)this.addBeforePosition(F$M,F$r,0,F$$,F$n);else if(F$V<F$M)this.addAfterPosition(F$M-F$V,F$r,F$b-4,F$$,F$n);else{for(;;F$C++)if(!((F$v=F$N[F$C])<F$M)){0==F$C?F$M/=F$v:F$M=(F$M-(F$e=F$N[F$C-1]))/(F$v-F$e);break}if(F$C!=F$z){var F$s=6*(F$z=F$C);for(F$P=F$r[F$s],F$d=F$r[F$s+1],F$p=F$r[F$s+2],F$f=F$r[F$s+3],F$Q=F$r[F$s+4],F$m=F$r[F$s+5],F$x=2*(F$w=.03*(F$P-2*F$p+F$Q))+(F$H=.006*(3*(F$p-F$Q)-F$P+(F$U=F$r[F$s+6]))),F$F=2*(F$S=.03*(F$d-2*F$f+F$m))+(F$K=.006*(3*(F$f-F$m)-F$d+(F$q=F$r[F$s+7]))),F$G=.3*(F$p-F$P)+F$w+.16666667*F$H,F$g=.3*(F$f-F$d)+F$S+.16666667*F$K,F$h=Math.sqrt(F$G*F$G+F$g*F$g),F$J[0]=F$h,F$s=1;F$s<8;F$s++)F$G+=F$x,F$g+=F$F,F$x+=F$H,F$F+=F$K,F$h+=Math.sqrt(F$G*F$G+F$g*F$g),F$J[F$s]=F$h;F$G+=F$x,F$g+=F$F,F$h+=Math.sqrt(F$G*F$G+F$g*F$g),F$J[8]=F$h,F$G+=F$x+F$H,F$g+=F$F+F$K,F$h+=Math.sqrt(F$G*F$G+F$g*F$g),F$J[9]=F$h,F$O=0}for(F$M*=F$h;;F$O++)if(!((F$v=F$J[F$O])<F$M)){0==F$O?F$M/=F$v:F$M=F$O+(F$M-(F$e=F$J[F$O-1]))/(F$v-F$e);break}this.addCurvePosition(.1*F$M,F$P,F$d,F$p,F$f,F$Q,F$m,F$U,F$q,F$$,F$n,F$T||0<F$I&&0==F$_)}return F$$},F$y.addBeforePosition=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$j[F$t],F$A=F$j[F$t+1],F$X=F$j[F$t+2]-F$Y,F$I=F$j[F$t+3]-F$A,F$b=Math.atan2(F$I,F$X);F$k[F$T]=F$Y+F$y*Math.cos(F$b),F$k[F$T+1]=F$A+F$y*Math.sin(F$b),F$k[F$T+2]=F$b},F$y.addAfterPosition=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$j[F$t+2],F$A=F$j[F$t+3],F$X=F$Y-F$j[F$t],F$I=F$A-F$j[F$t+1],F$b=Math.atan2(F$I,F$X);F$k[F$T]=F$Y+F$y*Math.cos(F$b),F$k[F$T+1]=F$A+F$y*Math.sin(F$b),F$k[F$T+2]=F$b},F$y.addCurvePosition=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D,F$l){0==F$y&&(F$y=1e-4);var F$r=F$y*F$y,F$$=F$r*F$y,F$W=1-F$y,F$z=F$W*F$W,F$V=F$z*F$W,F$n=F$W*F$y,F$C=3*F$n,F$M=F$W*F$C,F$_=F$C*F$y,F$e=F$j*F$V+F$k*F$M+F$Y*F$_+F$X*F$$,F$v=F$t*F$V+F$T*F$M+F$A*F$_+F$I*F$$;F$b[F$D]=F$e,F$b[F$D+1]=F$v,F$b[F$D+2]=F$l?Math.atan2(F$v-(F$t*F$z+F$T*F$n*2+F$A*F$r),F$e-(F$j*F$z+F$k*F$n*2+F$Y*F$r)):0},F$w.NONE=-1,F$w.BEFORE=-2,F$w.AFTER=-3,F$t(F$w,["_tempMt",function(){return this._tempMt=new F$Uy}]),F$w}(),F$ay=function(){function F$y(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return F$k(F$y,"laya.ani.bone.PathConstraintData"),F$y}(),F$Jy=function(){function F$y(){this.name=null,this.slotArr=[]}return F$k(F$y,"laya.ani.bone.SkinData"),F$y}(),F$hy=function(){function F$y(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}F$k(F$y,"laya.ani.bone.SkinSlotDisplayData");var F$j=F$y.prototype;return F$j.createTexture=function(F$y){return this.texture||(this.texture=new F$qy(F$y.bitmap,this.uvs),F$y.bitmap.alphaTexture&&(this.texture.alphaTexture=new F$qy(F$y.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=F$y.height,this.texture.height=F$y.width,this.texture.offsetX=-F$y.offsetX,this.texture.offsetY=-F$y.offsetY,this.texture.sourceWidth=F$y.sourceHeight,this.texture.sourceHeight=F$y.sourceWidth):(this.texture.width=F$y.width,this.texture.height=F$y.height,this.texture.offsetX=-F$y.offsetX,this.texture.offsetY=-F$y.offsetY,this.texture.sourceWidth=F$y.sourceWidth,this.texture.sourceHeight=F$y.sourceHeight),F$V.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},F$j.destory=function(){this.texture&&this.texture.destroy()},F$y}(),F$Oy=function(){function F$y(){this.name=null,this.displayArr=[]}return F$k(F$y,"laya.ani.bone.SlotData"),F$y.prototype.getDisplayByName=function(F$y){for(var F$j=0,F$t=this.displayArr.length;F$j<F$t;F$j++)if(this.displayArr[F$j].attachmentName==F$y)return F$j;return-1},F$y}(),F$v=function(){function F$y(F$y,F$j){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=F$z(2,0),this._data=F$y,null==this._bones&&(this._bones=[]),this.target=F$j[F$y.targetIndex];var F$t,F$k=0;for(F$k=0,F$t=F$y.boneIndexs.length;F$k<F$t;F$k++)this._bones.push(F$j[F$y.boneIndexs[F$k]]);this.rotateMix=F$y.rotateMix,this.translateMix=F$y.translateMix,this.scaleMix=F$y.scaleMix,this.shearMix=F$y.shearMix}return F$k(F$y,"laya.ani.bone.TfConstraint"),F$y.prototype.apply=function(){for(var F$y,F$j=this.target.resultMatrix.a,F$t=this.target.resultMatrix.b,F$k=this.target.resultMatrix.c,F$T=this.target.resultMatrix.d,F$Y=0,F$A=this._bones.length;F$Y<F$A;F$Y++){if(F$y=this._bones[F$Y],0<this.rotateMix){var F$X=F$y.resultMatrix.a,F$I=F$y.resultMatrix.b,F$b=F$y.resultMatrix.c,F$D=F$y.resultMatrix.d,F$l=Math.atan2(F$k,F$j)-Math.atan2(F$b,F$X)+this._data.offsetRotation*Math.PI/180;F$l>Math.PI?F$l-=2*Math.PI:F$l<-Math.PI&&(F$l+=2*Math.PI),F$l*=this.rotateMix;var F$r=Math.cos(F$l),F$$=Math.sin(F$l);F$y.resultMatrix.a=F$r*F$X-F$$*F$b,F$y.resultMatrix.b=F$r*F$I-F$$*F$D,F$y.resultMatrix.c=F$$*F$X+F$r*F$b,F$y.resultMatrix.d=F$$*F$I+F$r*F$D}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),F$y.resultMatrix.tx+=(this._temp[0]-F$y.resultMatrix.tx)*this.translateMix,F$y.resultMatrix.ty+=(this._temp[1]-F$y.resultMatrix.ty)*this.translateMix,F$y.updateChild()),0<this.scaleMix){var F$W=Math.sqrt(F$y.resultMatrix.a*F$y.resultMatrix.a+F$y.resultMatrix.c*F$y.resultMatrix.c),F$z=Math.sqrt(F$j*F$j+F$k*F$k),F$V=1e-5<F$W?(F$W+(F$z-F$W+this._data.offsetScaleX)*this.scaleMix)/F$W:0;F$y.resultMatrix.a*=F$V,F$y.resultMatrix.c*=F$V,F$W=Math.sqrt(F$y.resultMatrix.b*F$y.resultMatrix.b+F$y.resultMatrix.d*F$y.resultMatrix.d),F$z=Math.sqrt(F$t*F$t+F$T*F$T),F$V=1e-5<F$W?(F$W+(F$z-F$W+this._data.offsetScaleY)*this.scaleMix)/F$W:0,F$y.resultMatrix.b*=F$V,F$y.resultMatrix.d*=F$V}if(0<this.shearMix){F$I=F$y.resultMatrix.b,F$D=F$y.resultMatrix.d;var F$n=Math.atan2(F$D,F$I);(F$l=Math.atan2(F$T,F$t)-Math.atan2(F$k,F$j)-(F$n-Math.atan2(F$y.resultMatrix.c,F$y.resultMatrix.a)))>Math.PI?F$l-=2*Math.PI:F$l<-Math.PI&&(F$l+=2*Math.PI),F$l=F$n+(F$l+this._data.offsetShearY*Math.PI/180)*this.shearMix,F$V=Math.sqrt(F$I*F$I+F$D*F$D),F$y.resultMatrix.b=Math.cos(F$l)*F$V,F$y.resultMatrix.d=Math.sin(F$l)*F$V}}},F$y}(),F$sy=function(){function F$y(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return F$k(F$y,"laya.ani.bone.TfConstraintData"),F$y}(),F$Zy=function(){function F$y(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}F$k(F$y,"laya.ani.bone.Transform");var F$j=F$y.prototype;return F$j.initData=function(F$y){null!=F$y.x&&(this.x=F$y.x),null!=F$y.y&&(this.y=F$y.y),null!=F$y.skX&&(this.skX=F$y.skX),null!=F$y.skY&&(this.skY=F$y.skY),null!=F$y.scX&&(this.scX=F$y.scX),null!=F$y.scY&&(this.scY=F$y.scY)},F$j.getMatrix=function(){var F$y;return(F$y=this.mMatrix?this.mMatrix:this.mMatrix=new F$Uy).identity(),F$y.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(F$y,this.skewX*Math.PI/180,this.skewY*Math.PI/180),F$y.rotate(this.skX*Math.PI/180),F$y.translate(this.x,this.y),F$y},F$j.skew=function(F$y,F$j,F$t){var F$k=Math.sin(F$t),F$T=Math.cos(F$t),F$Y=Math.sin(F$j),F$A=Math.cos(F$j);return F$y.setTo(F$y.a*F$A-F$y.b*F$k,F$y.a*F$Y+F$y.b*F$T,F$y.c*F$A-F$y.d*F$k,F$y.c*F$Y+F$y.d*F$T,F$y.tx*F$A-F$y.ty*F$k,F$y.tx*F$Y+F$y.ty*F$T),F$y},F$y}(),F$N=function(){function F$y(){}return F$k(F$y,"laya.ani.bone.UVTools"),F$y.getRelativeUV=function(F$y,F$j,F$t){var F$k=F$y[0],F$T=F$y[2]-F$y[0],F$Y=F$y[1],F$A=F$y[5]-F$y[1];F$t||(F$t=[]),F$t.length=F$j.length;var F$X,F$I=0;F$X=F$t.length;var F$b=1/F$T,F$D=1/F$A;for(F$I=0;F$I<F$X;F$I+=2)F$t[F$I]=(F$j[F$I]-F$k)*F$b,F$t[F$I+1]=(F$j[F$I+1]-F$Y)*F$D;return F$t},F$y.getAbsoluteUV=function(F$y,F$j,F$t){if(0==F$y[0]&&0==F$y[1]&&1==F$y[4]&&1==F$y[5])return F$t?(F$n.copyArray(F$t,F$j),F$t):F$j;var F$k=F$y[0],F$T=F$y[2]-F$y[0],F$Y=F$y[1],F$A=F$y[5]-F$y[1];F$t||(F$t=[]),F$t.length=F$j.length;var F$X,F$I=0;for(F$X=F$t.length,F$I=0;F$I<F$X;F$I+=2)F$t[F$I]=F$j[F$I]*F$T+F$k,F$t[F$I+1]=F$j[F$I+1]*F$A+F$Y;return F$t},F$y}(),F$w=function(){function F$y(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return F$k(F$y,"laya.ani.KeyFramesContent"),F$y}(),F$P=function(){function F$D(){}return F$k(F$D,"laya.ani.math.BezierLerp"),F$D.getBezierRate=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$D._getBezierParamKey(F$j,F$t,F$k,F$T),F$A=100*F$Y+F$y;if(F$D._bezierResultCache[F$A])return F$D._bezierResultCache[F$A];var F$X,F$I=F$D._getBezierPoints(F$j,F$t,F$k,F$T,F$Y),F$b=0;for(F$X=F$I.length,F$b=0;F$b<F$X;F$b+=2)if(F$y<=F$I[F$b])return F$D._bezierResultCache[F$A]=F$I[F$b+1],F$I[F$b+1];return F$D._bezierResultCache[F$A]=1},F$D._getBezierParamKey=function(F$y,F$j,F$t,F$k){return 100*(100*(100*(100*F$y+F$j)+F$t)+F$k)},F$D._getBezierPoints=function(F$y,F$j,F$t,F$k,F$T){return F$D._bezierPointsCache[F$T]?F$D._bezierPointsCache[F$T]:(F$Y=[0,0,F$y,F$j,F$t,F$k,1,1],F$A=(new F$X).getBezierPoints(F$Y,100,3),F$D._bezierPointsCache[F$T]=F$A);var F$Y,F$A},F$D._bezierResultCache={},F$D._bezierPointsCache={},F$D}(),F$d=function(F$y){function F$j(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,F$j.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}F$k(F$j,"laya.ani.AnimationPlayer",F$T);var F$t=F$j.prototype;return F$Ty.imps(F$t,{"laya.resource.IDestroy":!0}),F$t._onTempletLoadedComputeFullKeyframeIndices=function(F$y,F$j,F$t){this._templet===F$t&&this._cachePlayRate===F$y&&this._cacheFrameRate===F$j&&this._computeFullKeyframeIndices()},F$t._computeFullKeyframeIndices=function(){for(var F$y=this._fullFrames=[],F$j=this._templet,F$t=this._cacheFrameRateInterval*this._cachePlayRate,F$k=0,F$T=F$j.getAnimationCount();F$k<F$T;F$k++){for(var F$Y=[],F$A=0,F$X=F$j.getAnimation(F$k).nodes.length;F$A<F$X;F$A++){for(var F$I=F$j.getAnimation(F$k).nodes[F$A],F$b=Math.floor(F$I.playTime/F$t+.01),F$D=new Uint16Array(F$b+1),F$l=-1,F$r=0,F$$=F$I.keyFrame.length;F$r<F$$;F$r++){var F$W=F$I.keyFrame[F$r],F$z=F$W.startTime,F$V=F$z+F$W.duration+F$t;do{for(var F$n=Math.floor(F$z/F$t+.5),F$C=F$l+1;F$C<F$n;F$C++)F$D[F$C]=F$r;F$D[F$l=F$n]=F$r,F$z+=F$t}while(F$z<=F$V)}F$Y.push(F$D)}F$y.push(F$Y)}},F$t._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},F$t._calculatePlayDuration=function(){if(0!==this.state){var F$y=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=F$y),this._playEnd>F$y&&(this._playEnd=F$y),this._playDuration=this._playEnd-this._playStart}},F$t._setPlayParams=function(F$y,F$j){this._currentTime=F$y,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$j+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$j},F$t._setPlayParamsWhenStop=function(F$y,F$j){this._currentTime=F$y,this._currentKeyframeIndex=Math.max(Math.floor(F$y/F$j+.01),0),this._currentFrameTime=this._currentKeyframeIndex*F$j,this._currentAnimationClipIndex=-1},F$t._update=function(F$y){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var F$j=this._cacheFrameRateInterval*this._cachePlayRate,F$t=0;this._startUpdateLoopCount!==F$W.loopCount&&(F$t=F$y*this.playbackRate,this._elapsedPlaybackTime+=F$t);var F$k=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=F$k)return this._setPlayParamsWhenStop(F$k,F$j),void this.event("stopped");if(F$t+=this._currentTime,0<F$k)if(F$k<=F$t)do{if(F$t-=F$k,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$k,F$j),this._stopWhenCircleFinish=!1,void this.event("stopped");F$t<F$k&&(this._setPlayParams(F$t,F$j),this.event("complete"))}while(F$k<=F$t);else this._setPlayParams(F$t,F$j);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(F$k,F$j),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},F$t._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},F$t.play=function(F$y,F$j,F$t,F$k,F$T){if(void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=1),void 0===F$t&&(F$t=2147483647),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(F$t<0||F$k<0||F$T<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==F$T&&F$T<F$k)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=F$j,this._overallDuration=F$t,this._playStart=F$k,this._playEnd=F$T,this._paused=!1,this._currentAnimationClipIndex=F$y,this._currentKeyframeIndex=0,this._startUpdateLoopCount=F$W.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},F$t.playByFrame=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$y&&(F$y=0),void 0===F$j&&(F$j=1),void 0===F$t&&(F$t=2147483647),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=30);var F$A=1e3/F$Y;this.play(F$y,F$j,F$t,F$k*F$A,F$T*F$A)},F$t.stop=function(F$y){void 0===F$y&&(F$y=!0),F$y?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},F$Y(0,F$t,"playEnd",function(){return this._playEnd}),F$Y(0,F$t,"templet",function(){return this._templet},function(F$y){0===!this.state&&this.stop(!0),this._templet!==F$y&&((this._templet=F$y).loaded?this._computeFullKeyframeIndices():F$y.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),F$Y(0,F$t,"playStart",function(){return this._playStart}),F$Y(0,F$t,"playDuration",function(){return this._playDuration}),F$Y(0,F$t,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),F$Y(0,F$t,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),F$Y(0,F$t,"overallDuration",function(){return this._overallDuration}),F$Y(0,F$t,"currentFrameTime",function(){return this._currentFrameTime}),F$Y(0,F$t,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),F$Y(0,F$t,"currentPlayTime",function(){return this._currentTime+this._playStart}),F$Y(0,F$t,"cachePlayRate",function(){return this._cachePlayRate},function(F$y){this._cachePlayRate!==F$y&&(this._cachePlayRate=F$y,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[F$y,this._cacheFrameRate])))}),F$Y(0,F$t,"cacheFrameRate",function(){return this._cacheFrameRate},function(F$y){this._cacheFrameRate!==F$y&&(this._cacheFrameRate=F$y,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,F$y])))}),F$Y(0,F$t,"currentTime",null,function(F$y){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(F$y<this._playStart||F$y>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=F$W.loopCount;var F$j=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=F$y,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/F$j),0),this._currentFrameTime=this._currentKeyframeIndex*F$j}}),F$Y(0,F$t,"paused",function(){return this._paused},function(F$y){(this._paused=F$y)&&this.event("paused")}),F$Y(0,F$t,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),F$Y(0,F$t,"destroyed",function(){return this._destroyed}),F$j}(),F$S=function(F$y){function F$j(){F$j.__super.call(this),F$V.isConchNode&&(this.drawSkin=function(F$y){F$y.transform||(F$y.transform=F$Uy.EMPTY),this._addCmd([F$y]),this.setSkinMesh&&this.setSkinMesh(F$y._ps,F$y.mVBData,F$y.mEleNum,0,F$y.mTexture,F$y.transform)})}return F$k(F$j,"laya.ani.GraphicsAni",F$A),F$j.prototype.drawSkin=function(F$y){var F$j=[F$y];this._saveToCmd(F$V._context._drawSkin,F$j)},F$j.create=function(){return F$j._caches.pop()||new F$j},F$j.recycle=function(F$y){F$y.clear(),F$j._caches.push(F$y)},F$j._caches=[],F$j}(),F$H=function(F$y){function F$C(){this._aniMap={},this.unfixedLastAniIndex=-1,F$C.__super.call(this),this._anis=new Array}F$k(F$C,"laya.ani.AnimationTemplet",F$D);var F$j=F$C.prototype;return F$j.parse=function(F$y){var F$j=new F$my(F$y);this._aniVersion=F$j.readUTFString(),F$M.parse(this,F$j)},F$j._calculateKeyFrame=function(F$y,F$j,F$t){var F$k=F$y.keyFrame;F$k[F$j]=F$k[0];for(var F$T=0;F$T<F$j;F$T++){var F$Y=F$k[F$T];F$Y.nextData=0===F$Y.duration?F$Y.data:F$k[F$T+1].data}F$k.length--},F$j.onAsynLoaded=function(F$y,F$j,F$t){var F$k=new F$my(F$j);switch(this._aniVersion=F$k.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":F$_.parse(this,F$k);break;default:F$M.parse(this,F$k)}this._endLoaded()},F$j.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},F$j.getAnimationCount=function(){return this._anis.length},F$j.getAnimation=function(F$y){return this._anis[F$y]},F$j.getAniDuration=function(F$y){return this._anis[F$y].playTime},F$j.getNodes=function(F$y){return this._anis[F$y].nodes},F$j.getNodeIndexWithName=function(F$y,F$j){return this._anis[F$y].bone3DMap[F$j]},F$j.getNodeCount=function(F$y){return this._anis[F$y].nodes.length},F$j.getTotalkeyframesLength=function(F$y){return this._anis[F$y].totalKeyframeDatasLength},F$j.getPublicExtData=function(){return this._publicExtData},F$j.getAnimationDataWithCache=function(F$y,F$j,F$t,F$k){var F$T=F$j[F$t];if(F$T){var F$Y=F$T[F$y];return F$Y?F$Y[F$k]:null}return null},F$j.setAnimationDataWithCache=function(F$y,F$j,F$t,F$k,F$T){var F$Y=F$j[F$t]||(F$j[F$t]={});(F$Y[F$y]||(F$Y[F$y]=[]))[F$k]=F$T},F$j.getOriginalData=function(F$y,F$j,F$t,F$k,F$T){for(var F$Y=this._anis[F$y].nodes,F$A=0,F$X=0,F$I=F$Y.length,F$b=0;F$X<F$I;F$X++){var F$D,F$l=F$Y[F$X];F$D=F$l.keyFrame[F$t[F$X][F$k]],F$l.dataOffset=F$b;var F$r=F$T-F$D.startTime,F$$=F$l.lerpType;if(F$$)switch(F$$){case 0:case 1:for(F$A=0;F$A<F$l.keyframeWidth;)F$A+=F$l.interpolationMethod[F$A](F$l,F$A,F$j,F$b+F$A,F$D.data,F$r,null,F$D.duration,F$D.nextData);break;case 2:var F$W=F$D.interpolationData,F$z=F$W.length,F$V=0;for(F$A=0;F$A<F$z;){var F$n=F$W[F$A];switch(F$n){case 6:case 7:F$A+=F$C.interpolation[F$n](F$l,F$V,F$j,F$b+F$V,F$D.data,F$r,null,F$D.duration,F$D.nextData,F$W,F$A+1);break;default:F$A+=F$C.interpolation[F$n](F$l,F$V,F$j,F$b+F$V,F$D.data,F$r,null,F$D.duration,F$D.nextData)}F$V++}}else for(F$A=0;F$A<F$l.keyframeWidth;)F$A+=F$l.interpolationMethod[F$A](F$l,F$A,F$j,F$b+F$A,F$D.data,F$r,null,F$D.duration,F$D.nextData);F$b+=F$l.keyframeWidth}},F$j.getNodesCurrentFrameIndex=function(F$y,F$j){var F$t=this._anis[F$y].nodes;F$y!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$t.length),this.unfixedCurrentTimes=new Float32Array(F$t.length),this.unfixedLastAniIndex=F$y);for(var F$k=0,F$T=F$t.length;F$k<F$T;F$k++){var F$Y=F$t[F$k];for(F$j<this.unfixedCurrentTimes[F$k]&&(this.unfixedCurrentFrameIndexes[F$k]=0),this.unfixedCurrentTimes[F$k]=F$j;this.unfixedCurrentFrameIndexes[F$k]<F$Y.keyFrame.length&&!(F$Y.keyFrame[this.unfixedCurrentFrameIndexes[F$k]].startTime>this.unfixedCurrentTimes[F$k]);)this.unfixedCurrentFrameIndexes[F$k]++;this.unfixedCurrentFrameIndexes[F$k]--}return this.unfixedCurrentFrameIndexes},F$j.getOriginalDataUnfixedRate=function(F$y,F$j,F$t){var F$k=this._anis[F$y].nodes;F$y!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(F$k.length),this.unfixedCurrentTimes=new Float32Array(F$k.length),this.unfixedKeyframes=F$z(F$k.length),this.unfixedLastAniIndex=F$y);for(var F$T=0,F$Y=0,F$A=F$k.length,F$X=0;F$Y<F$A;F$Y++){var F$I=F$k[F$Y];for(F$t<this.unfixedCurrentTimes[F$Y]&&(this.unfixedCurrentFrameIndexes[F$Y]=0),this.unfixedCurrentTimes[F$Y]=F$t;this.unfixedCurrentFrameIndexes[F$Y]<F$I.keyFrame.length&&!(F$I.keyFrame[this.unfixedCurrentFrameIndexes[F$Y]].startTime>this.unfixedCurrentTimes[F$Y]);)this.unfixedKeyframes[F$Y]=F$I.keyFrame[this.unfixedCurrentFrameIndexes[F$Y]],this.unfixedCurrentFrameIndexes[F$Y]++;var F$b=this.unfixedKeyframes[F$Y];F$I.dataOffset=F$X;var F$D=F$t-F$b.startTime;if(F$I.lerpType)switch(F$I.lerpType){case 0:case 1:for(F$T=0;F$T<F$I.keyframeWidth;)F$T+=F$I.interpolationMethod[F$T](F$I,F$T,F$j,F$X+F$T,F$b.data,F$D,null,F$b.duration,F$b.nextData);break;case 2:var F$l=F$b.interpolationData,F$r=F$l.length,F$$=0;for(F$T=0;F$T<F$r;){var F$W=F$l[F$T];switch(F$W){case 6:case 7:F$T+=F$C.interpolation[F$W](F$I,F$$,F$j,F$X+F$$,F$b.data,F$D,null,F$b.duration,F$b.nextData,F$l,F$T+1);break;default:F$T+=F$C.interpolation[F$W](F$I,F$$,F$j,F$X+F$$,F$b.data,F$D,null,F$b.duration,F$b.nextData)}F$$++}}else for(F$T=0;F$T<F$I.keyframeWidth;)F$T+=F$I.interpolationMethod[F$T](F$I,F$T,F$j,F$X+F$T,F$b.data,F$D,null,F$b.duration,F$b.nextData);F$X+=F$I.keyframeWidth}},F$C._LinearInterpolation_0=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){var F$D=0===F$X?0:F$Y/F$X;return F$t[F$k]=(1-F$D)*F$T[F$j]+F$D*F$I[F$j],1},F$C._QuaternionInterpolation_1=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){var F$D=0===F$X?0:F$Y/F$X;return F$r.slerpQuaternionArray(F$T,F$j,F$I,F$j,F$D,F$t,F$k),4},F$C._AngleInterpolation_2=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){return 0},F$C._RadiansInterpolation_3=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){return 0},F$C._Matrix4x4Interpolation_4=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){for(var F$D=0;F$D<16;F$D++,F$j++)F$t[F$k+F$D]=F$T[F$j]+F$Y*F$A[F$j];return 16},F$C._NoInterpolation_5=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b){return F$t[F$k]=F$T[F$j],1},F$C._BezierInterpolation_6=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D){return void 0===F$D&&(F$D=0),F$t[F$k]=F$T[F$j]+(F$I[F$j]-F$T[F$j])*F$P.getBezierRate(F$Y/F$X,F$b[F$D],F$b[F$D+1],F$b[F$D+2],F$b[F$D+3]),5},F$C._BezierInterpolation_7=function(F$y,F$j,F$t,F$k,F$T,F$Y,F$A,F$X,F$I,F$b,F$D){return void 0===F$D&&(F$D=0),F$t[F$k]=F$b[F$D+4]+F$b[F$D+5]*F$P.getBezierRate((.001*F$Y+F$b[F$D+6])/F$b[F$D+7],F$b[F$D],F$b[F$D+1],F$b[F$D+2],F$b[F$D+3]),9},F$C.load=function(F$y){return F$Ty.loader.create(F$y,null,null,F$C)},F$C.interpolation=[F$C._LinearInterpolation_0,F$C._QuaternionInterpolation_1,F$C._AngleInterpolation_2,F$C._RadiansInterpolation_3,F$C._Matrix4x4Interpolation_4,F$C._NoInterpolation_5,F$C._BezierInterpolation_6,F$C._BezierInterpolation_7],F$C}(),F$p=function(F$j){function F$t(F$y,F$j){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,F$t.__super.call(this),void 0===F$j&&(F$j=0),F$y&&this.init(F$y,F$j)}F$k(F$t,"laya.ani.bone.Skeleton",F$j);var F$y=F$t.prototype;return F$y.init=function(F$y,F$j){void 0===F$j&&(F$j=0);var F$t,F$k,F$T,F$Y=0,F$A=0;if(1==F$j)for(this._graphicsCache=[],F$Y=0,F$A=F$y.getAnimationCount();F$Y<F$A;F$Y++)this._graphicsCache.push([]);if(this._yReverseMatrix=F$y.yReverseMatrix,this._aniMode=F$j,this._templet=F$y,this._player=new F$d,this._player.cacheFrameRate=F$y.rate,this._player.templet=F$y,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=F$y.mBoneArr,this._rootBone=F$y.mRootBone,this._aniSectionDic=F$y.aniSectionDic,0<F$y.ikArr.length)for(this._ikArr=[],F$Y=0,F$A=F$y.ikArr.length;F$Y<F$A;F$Y++)this._ikArr.push(new F$C(F$y.ikArr[F$Y],this._boneList));if(0<F$y.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),F$Y=0,F$A=F$y.pathArr.length;F$Y<F$A;F$Y++)F$t=F$y.pathArr[F$Y],F$k=new F$e(F$t,this._boneList),(F$T=this._boneSlotDic[F$t.name])&&((F$k=new F$e(F$t,this._boneList)).target=F$T),this._pathDic[F$t.name]=F$k;if(0<F$y.tfArr.length)for(this._tfArr=[],F$Y=0,F$A=F$y.tfArr.length;F$Y<F$A;F$Y++)this._tfArr.push(new F$v(F$y.tfArr[F$Y],this._boneList));if(0<F$y.skinDataArray.length){var F$X=this._templet.skinDataArray[this._skinIndex];this._skinName=F$X.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},F$y.load=function(F$y,F$j,F$t){},F$y._onLoaded=function(){},F$y._parseComplete=function(){var F$y=F$f.TEMPLET_DICTIONARY[this._aniPath];F$y&&(this.init(F$y,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},F$y._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},F$y._onPlay=function(){this.event("played")},F$y._onStop=function(){var F$y,F$j=this._templet.eventAniArr[this._aniClipIndex];if(F$j&&this._eventIndex<F$j.length)for(;this._eventIndex<F$j.length;this._eventIndex++)(F$y=F$j[this._eventIndex]).time>=this._player.playStart&&F$y.time<=this._player.playEnd&&this.event("label",F$y);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},F$y._onPause=function(){this.event("paused")},F$y._parseSrcBoneMatrix=function(){var F$y=0,F$j=0;for(F$j=this._templet.srcBoneMatrixArr.length,F$y=0;F$y<F$j;F$y++)this._boneMatrixArray.push(new F$Uy);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var F$t,F$k,F$T=this._templet.boneSlotArray;for(F$y=0,F$j=F$T.length;F$y<F$j;F$y++)F$t=F$T[F$y],null==(F$k=this._bindBoneBoneSlotDic[F$t.parent])&&(this._bindBoneBoneSlotDic[F$t.parent]=F$k=[]),this._boneSlotDic[F$t.name]=F$t=F$t.copy(),F$k.push(F$t),this._boneSlotArray.push(F$t)}},F$y._emitMissedEvents=function(F$y,F$j,F$t){void 0===F$t&&(F$t=0);var F$k=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(F$k){var F$T,F$Y,F$A=0;for(F$T=F$k.length,F$A=F$t;F$A<F$T;F$A++)(F$Y=F$k[F$A]).time>=this._player.playStart&&F$Y.time<=this._player.playEnd&&this.event("label",F$Y)}},F$y._update=function(F$y){if(void 0===F$y&&(F$y=!0),!(this._pause||F$y&&this._indexControl)){var F$j=this.timer.currTimer,F$t=this._player.currentKeyframeIndex,F$k=F$j-this._lastTime;if(F$y?this._player._update(F$k):F$t=-1,this._lastTime=F$j,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<F$k&&this._clipIndex==F$t&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var F$T;this._lastUpdateAniClipIndex=this._aniClipIndex,F$t>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var F$Y,F$A=this._templet.eventAniArr[this._aniClipIndex];if(F$A&&this._eventIndex<F$A.length&&((F$T=F$A[this._eventIndex]).time>=this._player.playStart&&F$T.time<=this._player.playEnd?this._player.currentPlayTime>=F$T.time&&(this.event("label",F$T),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(F$Y=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$Y&&(this.graphics=F$Y));var F$X=0,F$I=0;for(F$I=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,F$I-1)&&0<F$I;)F$I--;if(F$I<this._clipIndex)for(F$X=F$I;F$X<this._clipIndex;F$X++)this._createGraphics(F$X)}else if(1==this._aniMode){if(F$Y=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=F$Y&&(this.graphics=F$Y));for(F$I=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,F$I-1)&&0<F$I;)F$I--;if(F$I<this._clipIndex)for(F$X=F$I;F$X<this._clipIndex;F$X++)this._createGraphics(F$X)}this._createGraphics()}}},F$y._createGraphics=function(F$y){void 0===F$y&&(F$y=-1),-1==F$y&&(F$y=this._clipIndex);var F$j,F$t,F$k=F$y*this._player.cacheFrameRateInterval,F$T=this._templet.drawOrderAniArr[this._aniClipIndex];if(F$T&&0<F$T.length)for(this._drawOrderIndex=0,F$j=F$T[this._drawOrderIndex];F$k>=F$j.time&&(this._drawOrder=F$j.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=F$T.length));)F$j=F$T[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=F$S.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=F$S.create(),F$t=this.graphics;var F$Y=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],F$y,F$k);var F$A,F$X,F$I,F$b,F$D=this._aniSectionDic[this._aniClipIndex],F$l=0,F$r=0,F$$=0,F$W=0,F$z=0,F$V=this._templet.srcBoneMatrixArr.length;for(F$z=F$D[F$r=0];F$r<F$V;F$r++)F$b=this._boneList[F$r],F$I=this._templet.srcBoneMatrixArr[F$r],F$b.resultTransform.scX=F$I.scX*this._curOriginalData[F$l++],F$b.resultTransform.skX=F$I.skX+this._curOriginalData[F$l++],F$b.resultTransform.skY=F$I.skY+this._curOriginalData[F$l++],F$b.resultTransform.scY=F$I.scY*this._curOriginalData[F$l++],F$b.resultTransform.x=F$I.x+this._curOriginalData[F$l++],F$b.resultTransform.y=F$I.y+this._curOriginalData[F$l++],8===this._templet.tMatrixDataLen&&(F$b.resultTransform.skewX=F$I.skewX+this._curOriginalData[F$l++],F$b.resultTransform.skewY=F$I.skewY+this._curOriginalData[F$l++]);var F$n,F$C={},F$M={};for(F$z+=F$D[1];F$r<F$z;F$r++)F$C[(F$n=F$Y[F$r]).name]=this._curOriginalData[F$l++],F$M[F$n.name]=this._curOriginalData[F$l++],this._curOriginalData[F$l++],this._curOriginalData[F$l++],this._curOriginalData[F$l++],this._curOriginalData[F$l++];var F$_,F$e,F$v={},F$N={};for(F$z+=F$D[2];F$r<F$z;F$r++)F$v[(F$n=F$Y[F$r]).name]=this._curOriginalData[F$l++],F$N[F$n.name]=this._curOriginalData[F$l++],this._curOriginalData[F$l++],this._curOriginalData[F$l++],this._curOriginalData[F$l++],this._curOriginalData[F$l++];if(this._pathDic)for(F$z+=F$D[3];F$r<F$z;F$r++){if(F$n=F$Y[F$r],F$_=this._pathDic[F$n.name])switch(new F$my(F$n.extenData).getByte()){case 1:F$_.position=this._curOriginalData[F$l++];break;case 2:F$_.spacing=this._curOriginalData[F$l++];break;case 3:F$_.rotateMix=this._curOriginalData[F$l++],F$_.translateMix=this._curOriginalData[F$l++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(F$Uy.TEMP.identity()),this._ikArr)for(F$r=0,F$z=this._ikArr.length;F$r<F$z;F$r++)F$e=this._ikArr[F$r],F$v.hasOwnProperty(F$e.name)&&(F$e.bendDirection=F$v[F$e.name]),F$N.hasOwnProperty(F$e.name)&&(F$e.mix=F$N[F$e.name]),F$e.apply();if(this._pathDic)for(var F$P in this._pathDic)(F$_=this._pathDic[F$P]).apply(this._boneList,F$t);if(this._tfArr)for(F$r=0,F$W=this._tfArr.length;F$r<F$W;F$r++)this._tfArr[F$r].apply();for(F$r=0,F$W=this._boneList.length;F$r<F$W;F$r++)if(F$b=this._boneList[F$r],F$X=this._bindBoneBoneSlotDic[F$b.name],F$b.resultMatrix.copyTo(this._boneMatrixArray[F$r]),F$X)for(F$$=0,F$z=F$X.length;F$$<F$z;F$$++)(F$A=F$X[F$$])&&F$A.setParentMatrix(F$b.resultMatrix);var F$d,F$p,F$f,F$Q,F$m={},F$U=this._templet.deformAniArr;if(F$U&&0<F$U.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,F$r=0,F$z=this._boneSlotArray.length;F$r<F$z;F$r++)(F$A=this._boneSlotArray[F$r]).deformData=null;var F$q,F$w=F$U[this._aniClipIndex];for(F$q in F$d=F$w.default,this._setDeform(F$d,F$m,this._boneSlotArray,F$k),F$w)"default"!=F$q&&F$q!=this._skinName&&(F$d=F$w[F$q],this._setDeform(F$d,F$m,this._boneSlotArray,F$k));F$d=F$w[this._skinName],this._setDeform(F$d,F$m,this._boneSlotArray,F$k)}if(this._drawOrder)for(F$r=0,F$z=this._drawOrder.length;F$r<F$z;F$r++)F$p=F$C[(F$A=this._boneSlotArray[this._drawOrder[F$r]]).name],F$f=F$M[F$A.name],isNaN(F$f)||(F$t.save(),F$t.alpha(F$f)),isNaN(F$p)||-2==F$p||(this._templet.attachmentNames?F$A.showDisplayByName(this._templet.attachmentNames[F$p]):F$A.showDisplayByIndex(F$p)),F$m[this._drawOrder[F$r]]?(F$Q=F$m[this._drawOrder[F$r]],F$A.currDisplayData&&F$Q[F$A.currDisplayData.attachmentName]?F$A.deformData=F$Q[F$A.currDisplayData.attachmentName]:F$A.deformData=null):F$A.deformData=null,isNaN(F$f)?F$A.draw(F$t,this._boneMatrixArray,2==this._aniMode):F$A.draw(F$t,this._boneMatrixArray,2==this._aniMode,F$f),isNaN(F$f)||F$t.restore();else for(F$r=0,F$z=this._boneSlotArray.length;F$r<F$z;F$r++)F$p=F$C[(F$A=this._boneSlotArray[F$r]).name],F$f=F$M[F$A.name],isNaN(F$f)||(F$t.save(),F$t.alpha(F$f)),isNaN(F$p)||-2==F$p||(this._templet.attachmentNames?F$A.showDisplayByName(this._templet.attachmentNames[F$p]):F$A.showDisplayByIndex(F$p)),F$m[F$r]?(F$Q=F$m[F$r],F$A.currDisplayData&&F$Q[F$A.currDisplayData.attachmentName]?F$A.deformData=F$Q[F$A.currDisplayData.attachmentName]:F$A.deformData=null):F$A.deformData=null,isNaN(F$f)?F$A.draw(F$t,this._boneMatrixArray,2==this._aniMode):F$A.draw(F$t,this._boneMatrixArray,2==this._aniMode,F$f),isNaN(F$f)||F$t.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,F$y,F$t):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,F$y,F$t)},F$y._setDeform=function(F$y,F$j,F$t,F$k){if(F$y){var F$T,F$Y,F$A,F$X=0,F$I=0,F$b=0;if(F$y)for(F$X=0,F$I=F$y.deformSlotDataList.length;F$X<F$I;F$X++)for(F$T=F$y.deformSlotDataList[F$X],F$b=0;F$b<F$T.deformSlotDisplayList.length;F$b++)F$A=F$t[(F$Y=F$T.deformSlotDisplayList[F$b]).slotIndex],F$Y.apply(F$k,F$A),F$j[F$Y.slotIndex]||(F$j[F$Y.slotIndex]={}),F$j[F$Y.slotIndex][F$Y.attachment]=F$Y.deformData}},F$y.getAnimNum=function(){return this._templet.getAnimationCount()},F$y.getAniNameByIndex=function(F$y){return this._templet.getAniNameByIndex(F$y)},F$y.getSlotByName=function(F$y){return this._boneSlotDic[F$y]},F$y.showSkinByName=function(F$y,F$j){void 0===F$j&&(F$j=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(F$y),F$j)},F$y.showSkinByIndex=function(F$y,F$j){void 0===F$j&&(F$j=!0);for(var F$t=0;F$t<this._boneSlotArray.length;F$t++)this._boneSlotArray[F$t].showSlotData(null,F$j);if(this._templet.showSkinByIndex(this._boneSlotDic,F$y,F$j)){var F$k=this._templet.skinDataArray[F$y];this._skinIndex=F$y,this._skinName=F$k.name}this._clearCache()},F$y.showSlotSkinByIndex=function(F$y,F$j){if(0!=this._aniMode){var F$t=this.getSlotByName(F$y);F$t&&F$t.showDisplayByIndex(F$j),this._clearCache()}},F$y.showSlotSkinByName=function(F$y,F$j){if(0!=this._aniMode){var F$t=this.getSlotByName(F$y);F$t&&F$t.showDisplayByName(F$j),this._clearCache()}},F$y.replaceSlotSkinName=function(F$y,F$j,F$t){if(0!=this._aniMode){var F$k=this.getSlotByName(F$y);F$k&&F$k.replaceDisplayByName(F$j,F$t),this._clearCache()}},F$y.replaceSlotSkinByIndex=function(F$y,F$j,F$t){if(0!=this._aniMode){var F$k=this.getSlotByName(F$y);F$k&&F$k.replaceDisplayByIndex(F$j,F$t),this._clearCache()}},F$y.setSlotSkin=function(F$y,F$j){if(0!=this._aniMode){var F$t=this.getSlotByName(F$y);F$t&&F$t.replaceSkin(F$j),this._clearCache()}},F$y._clearCache=function(){if(1==this._aniMode)for(var F$y=0,F$j=this._graphicsCache.length;F$y<F$j;F$y++){for(var F$t=0,F$k=this._graphicsCache[F$y].length;F$t<F$k;F$t++){var F$T=this._graphicsCache[F$y][F$t];F$T!=this.graphics&&F$S.recycle(F$T)}this._graphicsCache[F$y].length=0}},F$y.play=function(F$y,F$j,F$t,F$k,F$T,F$Y){void 0===F$t&&(F$t=!0),void 0===F$k&&(F$k=0),void 0===F$T&&(F$T=0),void 0===F$Y&&(F$Y=!0),this._indexControl=!1;var F$A=-1,F$X=NaN;if(F$X=F$j?2147483647:0,"string"==typeof F$y)for(var F$I=0,F$b=this._templet.getAnimationCount();F$I<F$b;F$I++){var F$D=this._templet.getAnimation(F$I);if(F$D&&F$y==F$D.name){F$A=F$I;break}}else F$A=F$y;-1<F$A&&F$A<this.getAnimNum()&&(this._aniClipIndex=F$A,(F$t||this._pause||this._currAniIndex!=F$A)&&(this._currAniIndex=F$A,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(F$A)),this._drawOrder=null,this._eventIndex=0,this._player.play(F$A,this._player.playbackRate,F$X,F$k,F$T),F$Y&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=F$l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},F$y.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},F$y.playbackRate=function(F$y){this._player&&(this._player.playbackRate=F$y)},F$y.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},F$y.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=F$l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},F$y._getGrahicsDataWithCache=function(F$y,F$j){return this._graphicsCache[F$y][F$j]},F$y._setGrahicsDataWithCache=function(F$y,F$j,F$t){this._graphicsCache[F$y][F$j]=F$t},F$y.destroy=function(F$y){void 0===F$y&&(F$y=!0),F$j.prototype.destroy.call(this,F$y),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},F$Y(0,F$y,"url",function(){return this._aniPath},function(F$y){this.load(F$y)}),F$Y(0,F$y,"index",function(){return this._index},function(F$y){this.player&&(this._index=F$y,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),F$Y(0,F$y,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),F$Y(0,F$y,"templet",function(){return this._templet}),F$Y(0,F$y,"player",function(){return this._player}),F$t.useSimpleMeshInCanvas=!1,F$t}(F$Yy),F$f=function(F$j){function F$T(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,F$T.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}F$k(F$T,"laya.ani.bone.Templet",F$j);var F$y=F$T.prototype;return F$y.getLoadList=function(){return this._loadList},F$y.loadAni=function(F$y){this._skBufferUrl=F$y,F$Ty.loader.load(F$y,F$I.create(this,this.onComplete),null,"arraybuffer")},F$y.onComplete=function(F$y){if(this._isDestroyed)this.destroy();else{var F$j=F$b.getRes(this._skBufferUrl);F$j?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,F$j)):this.event("error","load failed:"+this._skBufferUrl)}},F$y.parseData=function(F$y,F$j,F$t){void 0===F$t&&(F$t=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=F$y,this._mainTexture&&F$V.isWebGL&&F$y.bitmap&&(F$y.bitmap.enableMerageInAtlas=!1),this._rate=F$t,this.parse(F$j)},F$y.buildArmature=function(F$y){return void 0===F$y&&(F$y=0),new F$p(this,F$y)},F$y.parse=function(F$y){F$j.prototype.parse.call(this,F$y),this._endLoaded(),this._aniVersion!=F$T.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+F$T.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},F$y._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var F$y=0;this._loadList=[];var F$j,F$t=new F$my(this.getPublicExtData()),F$k=0,F$T=0,F$Y=0,F$A=F$t.getInt32(),F$X=F$t.readUTFString(),F$I=F$X.split("\n");for(F$y=0;F$y<F$A;F$y++)F$j=this._path+F$I[2*F$y],F$X=F$I[2*F$y+1],F$t.getFloat32(),F$t.getFloat32(),F$k=F$t.getFloat32(),F$T=F$t.getFloat32(),F$Y=F$t.getFloat32(),isNaN(F$Y)?0:F$Y,F$Y=F$t.getFloat32(),isNaN(F$Y)?0:F$Y,F$Y=F$t.getFloat32(),isNaN(F$Y)?F$k:F$Y,F$Y=F$t.getFloat32(),isNaN(F$Y)?F$T:F$Y,-1==this._loadList.indexOf(F$j)&&this._loadList.push(F$j);this.event("inited",this)}},F$y._textureComplete=function(){for(var F$y,F$j,F$t=0,F$k=this._loadList.length;F$t<F$k;F$t++)F$j=this._loadList[F$t],F$y=this._textureDic[F$j]=F$b.getRes(F$j),F$V.isWebGL&&F$y&&F$y.bitmap&&(F$y.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},F$y._parsePublicExtData=function(){var F$y=0,F$j=0,F$t=0,F$k=0,F$T=0;for(F$y=0,F$T=this.getAnimationCount();F$y<F$T;F$y++)this._graphicsCache.push([]);var F$Y;F$Y="Dragon"!=this._aniClassName;var F$A,F$X,F$I=new F$my(this.getPublicExtData()),F$b=0,F$D=0,F$l=0,F$r=0,F$$=0,F$W=0,F$z=0,F$V=0,F$n=0,F$C=F$I.getInt32(),F$M=F$I.readUTFString(),F$_=F$M.split("\n");for(F$y=0;F$y<F$C;F$y++){if(F$A=this._mainTexture,F$X=this._path+F$_[2*F$y],F$M=F$_[2*F$y+1],null==this._mainTexture&&(F$A=this._textureDic[F$X]),!F$A)return this.event("error",this),void(this.isParseFail=!0);F$b=F$I.getFloat32(),F$D=F$I.getFloat32(),F$l=F$I.getFloat32(),F$r=F$I.getFloat32(),F$n=F$I.getFloat32(),F$$=isNaN(F$n)?0:F$n,F$n=F$I.getFloat32(),F$W=isNaN(F$n)?0:F$n,F$n=F$I.getFloat32(),F$z=isNaN(F$n)?F$l:F$n,F$n=F$I.getFloat32(),F$V=isNaN(F$n)?F$r:F$n,this.subTextureDic[F$M]=F$qy.create(F$A,F$b,F$D,F$l,F$r,-F$$,-F$W,F$z,F$V),F$A.alphaTexture&&(this.subTextureDic[F$M].alphaTexture=F$qy.create(F$A.alphaTexture,F$b,F$D,F$l,F$r,-F$$,-F$W,F$z,F$V))}this._mainTexture=F$A;var F$e,F$v,F$N,F$P,F$d,F$p=F$I.getUint16();for(F$y=0;F$y<F$p;F$y++)(F$e=[]).push(F$I.getUint16()),F$e.push(F$I.getUint16()),F$e.push(F$I.getUint16()),F$e.push(F$I.getUint16()),this.aniSectionDic[F$y]=F$e;var F$f,F$Q=F$I.getInt16(),F$m={};for(F$y=0;F$y<F$Q;F$y++)F$v=new F$wy,0==F$y?F$f=F$v:F$v.root=F$f,F$v.d=F$Y?-1:1,F$P=F$I.readUTFString(),F$d=F$I.readUTFString(),F$v.length=F$I.getFloat32(),1==F$I.getByte()&&(F$v.inheritRotation=!1),1==F$I.getByte()&&(F$v.inheritScale=!1),F$v.name=F$P,F$d&&((F$N=F$m[F$d])?F$N.addChild(F$v):this.mRootBone=F$v),F$m[F$P]=F$v,this.mBoneArr.push(F$v);this.tMatrixDataLen=F$I.getUint16();var F$U,F$q,F$w=F$I.getUint16(),F$S=Math.floor(F$w/this.tMatrixDataLen),F$H=this.srcBoneMatrixArr;for(F$y=0;F$y<F$S;F$y++)(F$U=new F$Zy).scX=F$I.getFloat32(),F$U.skX=F$I.getFloat32(),F$U.skY=F$I.getFloat32(),F$U.scY=F$I.getFloat32(),F$U.x=F$I.getFloat32(),F$U.y=F$I.getFloat32(),8===this.tMatrixDataLen&&(F$U.skewX=F$I.getFloat32(),F$U.skewY=F$I.getFloat32()),F$H.push(F$U),(F$v=this.mBoneArr[F$y]).transform=F$U;var F$K,F$x=F$I.getUint16(),F$F=0;for(F$y=0;F$y<F$x;F$y++){for(F$q=new F$gy,F$F=F$I.getUint16(),F$j=0;F$j<F$F;F$j++)F$q.boneNames.push(F$I.readUTFString()),F$q.boneIndexs.push(F$I.getInt16());F$q.name=F$I.readUTFString(),F$q.targetBoneName=F$I.readUTFString(),F$q.targetBoneIndex=F$I.getInt16(),F$q.bendDirection=F$I.getFloat32(),F$q.mix=F$I.getFloat32(),F$q.isSpine=F$Y,this.ikArr.push(F$q)}var F$G,F$g=F$I.getUint16(),F$a=0;for(F$y=0;F$y<F$g;F$y++){for(F$K=new F$sy,F$a=F$I.getUint16(),F$j=0;F$j<F$a;F$j++)F$K.boneIndexs.push(F$I.getInt16());F$K.name=F$I.getUTFString(),F$K.targetIndex=F$I.getInt16(),F$K.rotateMix=F$I.getFloat32(),F$K.translateMix=F$I.getFloat32(),F$K.scaleMix=F$I.getFloat32(),F$K.shearMix=F$I.getFloat32(),F$K.offsetRotation=F$I.getFloat32(),F$K.offsetX=F$I.getFloat32(),F$K.offsetY=F$I.getFloat32(),F$K.offsetScaleX=F$I.getFloat32(),F$K.offsetScaleY=F$I.getFloat32(),F$K.offsetShearY=F$I.getFloat32(),this.tfArr.push(F$K)}var F$J=F$I.getUint16(),F$h=0;for(F$y=0;F$y<F$J;F$y++){for((F$G=new F$ay).name=F$I.readUTFString(),F$h=F$I.getUint16(),F$j=0;F$j<F$h;F$j++)F$G.bones.push(F$I.getInt16());F$G.target=F$I.readUTFString(),F$G.positionMode=F$I.readUTFString(),F$G.spacingMode=F$I.readUTFString(),F$G.rotateMode=F$I.readUTFString(),F$G.offsetRotation=F$I.getFloat32(),F$G.position=F$I.getFloat32(),F$G.spacing=F$I.getFloat32(),F$G.rotateMix=F$I.getFloat32(),F$G.translateMix=F$I.getFloat32(),this.pathArr.push(F$G)}var F$O,F$s,F$Z,F$R,F$B,F$c=0,F$L=0,F$o=0,F$i=NaN,F$E=0,F$u=F$I.getInt16();for(F$y=0;F$y<F$u;F$y++){var F$yy=F$I.getUint8(),F$jy={};this.deformAniArr.push(F$jy);for(var F$ty=0;F$ty<F$yy;F$ty++)for((F$O=new F$Hy).skinName=F$I.getUTFString(),F$jy[F$O.skinName]=F$O,F$c=F$I.getInt16(),F$j=0;F$j<F$c;F$j++)for(F$s=new F$Ky,F$O.deformSlotDataList.push(F$s),F$L=F$I.getInt16(),F$t=0;F$t<F$L;F$t++)for(F$Z=new F$xy,F$s.deformSlotDisplayList.push(F$Z),F$Z.slotIndex=F$I.getInt16(),F$Z.attachment=F$I.getUTFString(),F$o=F$I.getInt16(),F$k=0;F$k<F$o;F$k++)for(1==F$I.getByte()?F$Z.tweenKeyList.push(!0):F$Z.tweenKeyList.push(!1),F$i=F$I.getFloat32(),F$Z.timeList.push(F$i),F$R=[],F$Z.vectices.push(F$R),F$E=F$I.getInt16(),F$T=0;F$T<F$E;F$T++)F$R.push(F$I.getFloat32())}var F$ky,F$Ty,F$Yy=F$I.getInt16(),F$Ay=0,F$Xy=0;for(F$y=0;F$y<F$Yy;F$y++){for(F$Ay=F$I.getInt16(),F$B=[],F$j=0;F$j<F$Ay;F$j++){for((F$ky=new F$Fy).time=F$I.getFloat32(),F$Xy=F$I.getInt16(),F$t=0;F$t<F$Xy;F$t++)F$ky.drawOrder.push(F$I.getInt16());F$B.push(F$ky)}this.drawOrderAniArr.push(F$B)}var F$Iy,F$by=F$I.getInt16(),F$Dy=0;for(F$y=0;F$y<F$by;F$y++){for(F$Dy=F$I.getInt16(),F$Ty=[],F$j=0;F$j<F$Dy;F$j++)(F$Iy=new F$Gy).name=F$I.getUTFString(),F$Iy.intValue=F$I.getInt32(),F$Iy.floatValue=F$I.getFloat32(),F$Iy.stringValue=F$I.getUTFString(),F$Iy.time=F$I.getFloat32(),F$Ty.push(F$Iy);this.eventAniArr.push(F$Ty)}var F$ly=F$I.getInt16();if(0<F$ly)for(this.attachmentNames=[],F$y=0;F$y<F$ly;F$y++)this.attachmentNames.push(F$I.getUTFString());var F$ry,F$$y,F$Wy=F$I.getInt16();for(F$y=0;F$y<F$Wy;F$y++)(F$ry=new F$Sy).name=F$I.readUTFString(),F$ry.parent=F$I.readUTFString(),F$ry.attachmentName=F$I.readUTFString(),F$ry.srcDisplayIndex=F$ry.displayIndex=F$I.getInt16(),(F$ry.templet=this).boneSlotDic[F$ry.name]=F$ry,null==(F$$y=this.bindBoneBoneSlotDic[F$ry.parent])&&(this.bindBoneBoneSlotDic[F$ry.parent]=F$$y=[]),F$$y.push(F$ry),this.boneSlotArray.push(F$ry);var F$zy,F$Vy,F$ny,F$Cy=F$I.readUTFString().split("\n"),F$My=0,F$_y=F$I.getUint8(),F$ey=0,F$vy=0,F$Ny=0,F$Py=0,F$dy=0,F$py=0,F$fy=0;for(F$y=0;F$y<F$_y;F$y++){for((F$zy=new F$Jy).name=F$Cy[F$My++],F$ey=F$I.getUint8(),F$j=0;F$j<F$ey;F$j++){for((F$Vy=new F$Oy).name=F$Cy[F$My++],F$ry=this.boneSlotDic[F$Vy.name],F$vy=F$I.getUint8(),F$t=0;F$t<F$vy;F$t++){if(F$ny=new F$hy,this.skinSlotDisplayDataArr.push(F$ny),F$ny.name=F$Cy[F$My++],F$ny.attachmentName=F$Cy[F$My++],F$ny.transform=new F$Zy,F$ny.transform.scX=F$I.getFloat32(),F$ny.transform.skX=F$I.getFloat32(),F$ny.transform.skY=F$I.getFloat32(),F$ny.transform.scY=F$I.getFloat32(),F$ny.transform.x=F$I.getFloat32(),F$ny.transform.y=F$I.getFloat32(),F$Vy.displayArr.push(F$ny),F$ny.width=F$I.getFloat32(),F$ny.height=F$I.getFloat32(),F$ny.type=F$I.getUint8(),F$ny.verLen=F$I.getUint16(),0<(F$Q=F$I.getUint16()))for(F$ny.bones=[],F$k=0;F$k<F$Q;F$k++){var F$Qy=F$I.getUint16();F$ny.bones.push(F$Qy)}if(0<(F$Ny=F$I.getUint16()))for(F$ny.uvs=[],F$k=0;F$k<F$Ny;F$k++)F$ny.uvs.push(F$I.getFloat32());if(0<(F$Py=F$I.getUint16()))for(F$ny.weights=[],F$k=0;F$k<F$Py;F$k++)F$ny.weights.push(F$I.getFloat32());if(0<(F$dy=F$I.getUint16()))for(F$ny.triangles=[],F$k=0;F$k<F$dy;F$k++)F$ny.triangles.push(F$I.getUint16());if(0<(F$py=F$I.getUint16()))for(F$ny.vertices=[],F$k=0;F$k<F$py;F$k++)F$ny.vertices.push(F$I.getFloat32());if(0<(F$fy=F$I.getUint16()))for(F$ny.lengths=[],F$k=0;F$k<F$fy;F$k++)F$ny.lengths.push(F$I.getFloat32())}F$zy.slotArr.push(F$Vy)}this.skinDic[F$zy.name]=F$zy,this.skinDataArray.push(F$zy)}1==F$I.getUint8()?(this.yReverseMatrix=new F$Uy(1,0,0,-1,0,0),F$f&&F$f.setTempMatrix(this.yReverseMatrix)):F$f&&F$f.setTempMatrix(new F$Uy),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},F$y.getTexture=function(F$y){var F$j=this.subTextureDic[F$y];return F$j||(F$j=this.subTextureDic[F$y.substr(0,F$y.length-1)]),null==F$j?this._mainTexture:F$j},F$y.showSkinByIndex=function(F$y,F$j,F$t){if(void 0===F$t&&(F$t=!0),F$j<0&&F$j>=this.skinDataArray.length)return!1;var F$k,F$T,F$Y=0,F$A=0,F$X=this.skinDataArray[F$j];if(F$X){for(F$Y=0,F$A=F$X.slotArr.length;F$Y<F$A;F$Y++)(F$T=F$X.slotArr[F$Y])&&(F$k=F$y[F$T.name])&&(F$k.showSlotData(F$T,F$t),F$t&&"undefined"!=F$k.attachmentName&&"null"!=F$k.attachmentName?F$k.showDisplayByName(F$k.attachmentName):F$k.showDisplayByIndex(F$k.displayIndex));return!0}return!1},F$y.getSkinIndexByName=function(F$y){for(var F$j=0,F$t=this.skinDataArray.length;F$j<F$t;F$j++)if(this.skinDataArray[F$j].name==F$y)return F$j;return-1},F$y.getGrahicsDataWithCache=function(F$y,F$j){return this._graphicsCache[F$y][F$j]},F$y.setGrahicsDataWithCache=function(F$y,F$j,F$t){this._graphicsCache[F$y][F$j]=F$t},F$y.destroy=function(){var F$y;for(var F$j in this._isDestroyed=!0,this.subTextureDic)(F$y=this.subTextureDic[F$j])&&F$y.destroy();for(F$j in this._textureDic)(F$y=this._textureDic[F$j])&&F$y.destroy();for(var F$t=0,F$k=this.skinSlotDisplayDataArr.length;F$t<F$k;F$t++)this.skinSlotDisplayDataArr[F$t].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete F$T.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},F$y.getAniNameByIndex=function(F$y){var F$j=this.getAnimation(F$y);return F$j?F$j.name:null},F$Y(0,F$y,"rate",function(){return this._rate},function(F$y){this._rate=F$y}),F$T.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",F$T.TEMPLET_DICTIONARY=null,F$T}(F$H)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(F$y,F$j){"use strict";for(var F$t in Object.defineProperty(F$j,"__esModule",{value:!0}),Laya){var F$k=Laya[F$t];F$k&&F$k.__isclass&&(F$j[F$t]=F$k)}});