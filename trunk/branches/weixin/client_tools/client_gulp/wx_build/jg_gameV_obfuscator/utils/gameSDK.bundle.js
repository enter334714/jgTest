var gameSDK=function(n){var o={};function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(t,n,r){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0});function A(e){return"xinxin_"+e+"_@"}(function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)})(e,[{key:"getItem",value:function(e){e=wx.getStorageSync(A(e));return!!e&&function(e){e=unescape(e);for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)-t.charCodeAt(n-1));return JSON.parse(t)}(e)}},{key:"setItem",value:function(e,t){wx.setStorageSync(A(e),function(e){e=JSON.stringify(e);for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),n=1;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)+e.charCodeAt(n-1));return escape(t)}(t))}},{key:"destroyItem",value:function(e){wx.removeStorageSync(A(e))}}]);var a=e;function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.default=new a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={GAME_NAME:"\u98ce\u4e4b\u65c5\u8ff9",APPID:267,APPID_IOS:269,APP_KEY:"ddda8f1083bbef53a2cba230fc4550ac",SHARE_QUERY:"agent_id=2503&site_id=116929",IOS_SHARE_QUERY:"agent_id=2503&site_id=116929",AGENT_ID:2503,SITE_ID:116928,IOS_SITE_ID:116927,adInfo:{gdt_vid:"",weixinadinfo:""}}},function(t,n,r){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(n,"__esModule",{value:!0});(function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)})(e,[{key:"getSystemInfo",value:function(){var n=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return new Promise(function(e,t){n.checkSystemInfo(function(){o&&o in n.systemInfo?e(n.systemInfo[o]):e(n.systemInfo)})})}},{key:"checkSystemInfo",value:function(e){this.getNetwork().then(this.getSystem()).then(function(){e()}).catch(function(e){reject(e)})}},{key:"getNetwork",value:function(){var o=this;return new Promise(function(t,n){wx.getNetworkType({success:function(e){delete e.errMsg,o.systemInfo=Object.assign(e,o.systemInfo),t()},fail:function(e){n(e.errMsg)}})})}},{key:"getSystem",value:function(){var o=this;return new Promise(function(t,n){wx.getSystemInfo({success:function(e){delete e.errMsg,o.systemInfo=Object.assign(e,o.systemInfo),t()},fail:function(e){n(e.errMsg)}})})}}]);var a=e;function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");this.systemInfo={}}n.default=new a},function(i,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},s=r(n(8)),c=r(n(1)),l=r(n(0)),d=r(n(2));function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e){return e&&e.__esModule?e:{default:e}}a(e,[{key:"api",value:function(a,i){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"post",f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";return new Promise(function(t,n){var o=l.default.getItem("adQuery"),e=l.default.getItem("is_ad_user");f||i.appid||(i.appid=c.default.APPID),i.agent_id=!1!==o?o.agent_id:c.default.AGENT_ID,i.site_id=!1!==o?o.site_id:c.default.SITE_ID,console.log("query,is_ad_user",o,e),!1===o&&!1===e&&(i.agent_id=1e5,i.site_id=1e5),i.launchScene=l.default.getItem("launchScene");var r=a in s.default&&s.default[a];!1===r&&n("type error"),d.default.getSystemInfo("platform").then(function(e){"ios"===e&&!1===o&&(i.site_id=c.default.IOS_SITE_ID),i.ad_click_id=c.default.adInfo.gdt_vid,i.weixinadinfo=c.default.adInfo.weixinadinfo,i.env=e,wx.request({url:r,header:{"Content-Type":"application/x-www-form-urlencoded"},method:u,data:i,success:function(e){200===e.statusCode?1===e.data.ret||"ok"===e.data?t(e.data.data):n(e.data.msg):n("network error "+e.statusCode)},fail:function(e){n(e.errMsg)}})})})}}]);n=e;function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.default=new n},function(c,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},a=f(n(0)),i=f(n(3)),u=f(n(2)),s=f(n(5));function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e){return e&&e.__esModule?e:{default:e}}r(e,[{key:"login",value:function(){var e=this;return new Promise(function(t,n){var o=e;wx.login({success:function(e){e={code:e.code,avatarUrl:"",nickName:""};o.serverLogin(e).then(function(e){t(e)}).catch(function(e){n(e)})},fail:function(e){n(e.errMsg)}})})}},{key:"serverLogin",value:function(o){return new Promise(function(t,n){u.default.getSystemInfo().then(function(e){e={do:"authorized",code:o.code,avatar:o.avatarUrl,nickName:o.nickName,platform:e.platform,model:e.model,os:e.system};i.default.api("COMMON",e).then(function(e){t(e)}).catch(function(e){n(e)})})})}},{key:"getUserInfo",value:function(){return{uid:this.getStorageUserInfo("uid"),access_token:this.getStorageUserInfo("accessToken"),openid:this.getStorageUserInfo("openid"),avatar:this.getStorageUserInfo("avatar"),username:this.getStorageUserInfo("username"),nickname:this.getStorageUserInfo("nickname"),agent_id:this.getStorageUserInfo("agent_id"),site_id:this.getStorageUserInfo("site_id"),is_ad_user:this.getStorageUserInfo("is_ad_user")}}},{key:"checkLoginStatus",value:function(t,n){var o=this,e=this.getStorageUserInfo();0===Object.keys(e).length?this.login().then(function(e){o.setStorageUserInfo(e),s.default.showShareMenu(),t()}).catch(function(e){n(e)}):this.checkServerLoginStatus().then(function(){t()}).catch(function(e){o.destroyStorageUserInfo(),o.login().then(function(e){o.setStorageUserInfo(e),s.default.showShareMenu(),t()}).catch(function(e){n(e)})})}},{key:"checkServerLoginStatus",value:function(){var o=this;return new Promise(function(t,n){var e={do:"checkLoginStatus",accessToken:o.getStorageUserInfo("accessToken"),uid:o.getStorageUserInfo("uid")};i.default.api("COMMON",e).then(function(e){t()}).catch(function(e){n(e)})})}},{key:"getStorageUserInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return 0===Object.keys(this.loginUserInfo).length&&(this.loginUserInfo=a.default.getItem("loginUserInfo"),!1===this.loginUserInfo)?{}:e&&e in this.loginUserInfo?this.loginUserInfo[e]:this.loginUserInfo}},{key:"setStorageUserInfo",value:function(e){this.loginUserInfo=e,a.default.destroyItem("is_ad_user"),1e5==e.site_id&&1e5==e.agent_id?(this.loginUserInfo.is_ad_user=0,a.default.setItem("is_ad_user",0)):(this.loginUserInfo.is_ad_user=1,a.default.setItem("is_ad_user",1)),console.log("\u8bbe\u7f6e\u7528\u6237\u4fe1\u606f\uff1a",this.loginUserInfo),a.default.setItem("loginUserInfo",this.loginUserInfo)}},{key:"destroyStorageUserInfo",value:function(){this.loginUserInfo={},a.default.destroyItem("loginUserInfo")}},{key:"reportAdInfo",value:function(t,e){var n;t.gdt_vid&&t.weixinadinfo&&(n="",e&&(n=this.getStorageUserInfo("username"),0===Object.keys(n).length&&(n="")),u.default.getSystemInfo().then(function(e){e={platform:e.platform,model:e.model,os:e.system,do:"adNotify",time:Date.parse(new Date)/1e3,gdt_vid:t.gdt_vid,weixinadinfo:t.weixinadinfo,username:n,scene:t.scene,referrerInfo:JSON.stringify(t.referrerInfo),wx_site_id:t.wx_site_id,wx_agent_id:t.wx_agent_id};i.default.api("COMMON",e).then(function(e){}).catch(function(e){})}))}}]);n=e;function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");this.loginUserInfo={}}t.default=new n},function(c,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},a=f(n(0)),i=f(n(3)),u=f(n(1)),s=f(n(2));function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e){return e&&e.__esModule?e:{default:e}}r(e,[{key:"checkShareConfig",value:function(){var o=this;return new Promise(function(n,e){var t=a.default.getItem("shareConfig");if(console.log("\u8f93\u51fa\u5206\u4eab\u914d\u7f6e11\uff1a",t),!1!==t)return o.shareConfig=t,n();i.default.api("COMMON",{do:"getShareConfig"}).then(function(t){s.default.getSystemInfo("platform").then(function(e){return t.query="ios"===e?u.default.IOS_SHARE_QUERY:u.default.SHARE_QUERY,0===a.default.getItem("is_ad_user")&&(t.query="agent_id=100000&site_id=100000"),console.log("\u662f\u5426\u5e7f\u544a\u7528\u6237\uff1a",a.default.getItem("is_ad_user")),console.log("\u8f93\u51fa\u5206\u4eab\u914d\u7f6e22\uff1a",t),a.default.setItem("shareConfig",t),o.shareConfig=t,n()})}).catch(function(e){s.default.getSystemInfo("platform").then(function(e){return"ios"===e&&(o.shareConfig.query=u.default.IOS_SHARE_QUERY),0===a.default.getItem("is_ad_user")&&(o.shareConfig.query="agent_id=100000&site_id=100000"),n()})})})}},{key:"getShareConfig",value:function(){var e=this;this.checkShareConfig().then(function(){return{title:e.shareConfig.title,imageUrl:e.shareConfig.imageUrl,query:e.shareConfig.query}})}},{key:"showShareMenu",value:function(){var e=this;wx.showShareMenu({withShareTicket:!0}),console.log("\u5f00\u542f\u5206\u4eab\u6309\u94ae"),this.checkShareConfig().then(function(){wx.onShareAppMessage(function(){return e.shareConfig})})}},{key:"makeShare",value:function(t){var n=this;this.checkShareConfig().then(function(){t.hasOwnProperty("title")&&t.title&&(n.shareConfig.title=t.title),t.hasOwnProperty("imageUrl")&&t.imageUrl&&(n.shareConfig.imageUrl=t.imageUrl);var e="";t.hasOwnProperty("ext")&&t.ext&&(e=t.ext),n.shareConfig.query+="&share_ext="+e,console.log("share info",n.shareConfig),wx.shareAppMessage(n.shareConfig)})}}]);n=e;function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");this.shareConfig={title:"",imageUrl:"",query:u.default.SHARE_QUERY}}t.default=new n},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(c,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},a=f(n(4)),l=f(n(9)),i=f(n(0)),u=f(n(1));function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e){return e&&e.__esModule?e:{default:e}}var s={gdt_vid:!1,weixinadinfo:!1,scene:!1,referrerInfo:!1,site_id:!1,agent_id:!1},n=(r(e,[{key:"init",value:function(e,t){var n,o;o=(n=wx.getLaunchOptionsSync()).query,i.default.destroyItem("adQuery"),o.agent_id&&o.site_id&&i.default.setItem("adQuery",{agent_id:o.agent_id,site_id:o.site_id}),i.default.setItem("launchScene",n.scene||0),o.gdt_vid&&o.weixinadinfo&&(s.gdt_vid=o.gdt_vid,s.weixinadinfo=o.weixinadinfo,s.scene=n.scene,s.referrerInfo=n.referrerInfo,s.wx_agent_id=o.agent_id,s.wx_site_id=o.site_id,u.default.adInfo.gdt_vid=o.gdt_vid,u.default.adInfo.weixinadinfo=o.weixinadinfo),a.default.reportAdInfo(s,!1),e()}},{key:"entryGame",value:function(e,t){a.default.checkLoginStatus(function(){wx.hideLoading(),a.default.reportAdInfo(s,!0,e,t),e()},function(e){wx.hideLoading(),t(e)})}}]),e);function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");this.cpSDK=l.default}t.default=new n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="https://poster.guangzhoudilong.com/face";t.default={COMMON:"https://api.guangzhoudilong.com/api/weGame/ApiCommon.php",IOS_REPORT:o+"/pgIns.php",ANDROID_REPORT:o+"/andUserInfo.php"}},function(r,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},s=a(n(0)),f=a(n(3)),c=a(n(1)),l=a(n(10)),u=a(n(5)),d=a(n(4)),g=a(n(11)),h=a(n(2)),y=a(n(12));function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e){return e&&e.__esModule?e:{default:e}}i(e,[{key:"customerPay",value:function(e){e={type:"makePay",order_no:g.default.orderInfo.order_no,item_name:e.item_name,item_desc:e.item_desc,appid:c.default.APPID};wx.openCustomerServiceConversation({sessionFrom:JSON.stringify(e),showMessageCard:!0,sendMessagePath:"index?"+JSON.stringify(e),sendMessageImg:"https://image.693975.com/wegame/pay.png"})}},{key:"xcxPay",value:function(e,t){var n="ios"===e.env?c.default.APPID_IOS:c.default.APPID,o=c.default.GAME_NAME;var r={game_name:o=void 0!==e.payConfig.gameName&&!1!==e.payConfig.gameName?e.payConfig.gameName:o,money:e.orderInfo.amt,shop_item:t.item_name,game_id:"ios"===e.env?c.default.APPID_IOS:c.default.APPID,order_id:e.orderInfo.order_no},n="pages/pay/pay?order_id="+e.orderInfo.order_no+"&game_id="+n+"&money="+e.orderInfo.amt+"&shop_item="+t.item_name+"&game_name="+o;console.log("\u8df3\u8f6c\u5c0f\u7a0b\u5e8f\u652f\u4ed8\u53c2\u6570",n,r),wx.navigateToMiniProgram({appId:e.payConfig.payXcxAppId,path:n,extraData:r,envVersion:"release",success:function(e){}})}},{key:"customerAddQQ",value:function(){var e={type:"contactCustomer",appid:"ios"===g.default.env?c.default.APPID_IOS:c.default.APPID};wx.openCustomerServiceConversation({sessionFrom:JSON.stringify(e),showMessageCard:!0,sendMessagePath:"index?"+JSON.stringify(e),sendMessageImg:"https://image.693975.com/wegame/pay.png"})}},{key:"makePayment",value:function(u){var f=this;return new Promise(function(n,o){console.log("\u914d\u7f6e\u53c2\u6570\uff1a",g.default.payConfig);var r="ios"===g.default.env,a=0===s.default.getItem("is_ad_user");if(0===s.default.getItem("is_ad_user")&&r&&1==g.default.payConfig.iosPayStatus)return f.customerAddQQ(),n();if(r&&3==g.default.payConfig.iosPayStatus)return wx.showModal({title:"\u53d1\u8d77\u652f\u4ed8\u5931\u8d25",content:"\u7531\u4e8e\u653f\u7b56\u5f71\u54cd\uff0cios\u652f\u4ed8\u529f\u80fd\u6682\u4e0d\u53ef\u7528",showCancel:!1}),n();var i={amt:u.amt,role_id:u.role_id,role_name:u.role_name,zone_id:u.zone_id,ext:u.ext||"",role_level:u.role_level};g.default.makeOrder(i).then(function(){console.log("\u4e0b\u5355\u4fe1\u606forderInfo:",i),console.log("\u4e0b\u5355\u4fe1\u606fpayParams:",u),console.log("\u4e0b\u5355\u4fe1\u606fpayment:",g.default);var e=g.default.payConfig.iosPayType,t=g.default.payConfig.payType;return console.log(r,a,t,e),r&&"XCX"==e||!r&&"XCX"==t?(console.log("\u8fdb\u5165\u5c0f\u7a0b\u5e8f\u652f\u4ed8"),f.xcxPay(g.default,u),n()):r&&"CUSTOMER"==e||!r&&"CUSTOMER"==t?(console.log("\u8fdb\u5165\u5ba2\u670d\u6d88\u606f\u652f\u4ed8"),f.customerPay(u),n()):void(r||"MIDAS"!=t||(console.log("\u8fdb\u5165\u7c73\u5927\u5e08\u652f\u4ed8"),g.default.makePay().then(function(){g.default.wxPay().then(function(e){n(e)}).catch(function(e){o(e)})}).catch(function(e){o(e)})))}).catch(function(e){o(e)})})}},{key:"shareAppMessage",value:function(e){u.default.makeShare(e)}},{key:"showShareMenu",value:function(){u.default.showShareMenu()}},{key:"loginUserInfo",value:function(e,t){var n=d.default.getUserInfo();n.appid=c.default.APPID;var o=wx.getLaunchOptionsSync().query.share_ext;n.share_ext=o||"",e(n)}},{key:"payConfig",value:function(){return new Promise(function(t,n){f.default.api("COMMON",{do:"getApplePayConfig"}).then(function(e){t(e)}).catch(function(e){n(e)})})}},{key:"dataReport",value:function(u){return new Promise(function(r,a){var e,i={timestamp:e=Date.parse(new Date)/1e3,sign:(0,y.default)(c.default.APPID+e),flag:(0,y.default)(e+c.default.APPID+c.default.APP_KEY)};["data_type","zone_id","zone_name","role_id","role_name","role_level","role_currency"].forEach(function(e){if(void 0===u[e])return a("invalid "+e)}),h.default.getSystemInfo().then(function(e){var t={mtype:45,agent_id:c.default.AGENT_ID,site_id:c.default.SITE_ID,userid:d.default.getStorageUserInfo("uid"),uname:d.default.getStorageUserInfo("username"),dataType:u.data_type,serverID:u.zone_id,serverName:u.zone_name,roleID:u.role_id,roleName:u.role_name,roleLevel:u.role_level,moneyNum:u.role_currency,time:i.timestamp,sign:i.sign,model:e.model},n={},o="";switch(e.platform){case"ios":t.appid=c.default.APPID_IOS,n={action:"UserInfo",flag:i.flag,imei:l.default.DEVICE_NO},o="IOS_REPORT";break;case"android":t.appid=c.default.APPID,n={uuid:l.default.DEVICE_NO},o="ANDROID_REPORT";break;case"devtools":return r()}Object.assign(t,n),f.default.api(o,t,"post","report").then(function(){r()}).catch(function(e){a("\u6570\u636e\u4e0a\u62a5\u5931\u8d25")})}).catch(function(e){a("\u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f\u5931\u8d25")})})}},{key:"buriedPoint",value:function(o){return new Promise(function(t,n){var e={do:"buriedPoint",action:o.action,appid:c.default.APPID,userid:d.default.getStorageUserInfo("uid"),serverID:o.zone_id,serverName:o.zone_name,roleID:o.role_id,roleName:o.role_name};f.default.api("COMMON",e).then(function(e){t(e)}).catch(function(e){n(e)})})}}]);n=e;function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.default=new n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DEBUG:!1,SDK_VERSION:"1.02",DEVICE_NO:"wegame_imei"}},function(c,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},a=f(n(3)),i=f(n(0)),u=f(n(4)),s=f(n(2));function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(e){return e&&e.__esModule?e:{default:e}}f(n(1));r(e,[{key:"getPayConfig",value:function(){var n=this,e=i.default.getItem("payConfig"),t=new Date,o=t.toLocaleDateString()+" "+t.getHours()+":"+t.getMinutes();var r;if(!1===e||e.cacheDate!==o)return r={do:"getPayConfig"},new Promise(function(e,t){a.default.api("COMMON",r).then(function(e){e.cacheDate=o,i.default.setItem("payConfig",e),n.payConfig=e}).catch(function(e){t(e)})});this.payConfig=e}},{key:"makeOrder",value:function(o){var r=this;return new Promise(function(t,n){r.orderData=o;var e={do:"makeOrder",user_name:u.default.getStorageUserInfo("username"),amt:o.amt,role_id:o.role_id,role_name:o.role_name,zone_id:o.zone_id,ext:o.ext,role_level:o.role_level,platform:r.env};a.default.api("COMMON",e).then(function(e){r.orderInfo=e,r.payConfig.switchPayType=e.switch_pay_type,r.payConfig.payType=e.pay_type,r.payConfig.iosPayType=e.ios_pay_type,t()}).catch(function(e){n(e)})})}},{key:"makePay",value:function(){var n=this;return new Promise(function(e,t){"MIDAS"===n.payConfig.payType?"ios"===n.env?(wx.showModal({title:"\u53d1\u8d77\u652f\u4ed8\u5931\u8d25",content:"\u7531\u4e8e\u653f\u7b56\u5f71\u54cd\uff0c\u652f\u4ed8\u529f\u80fd\u6682\u4e0d\u53ef\u7528",showCancel:!1}),t()):wx.checkSession({success:function(){e()},fail:function(){u.default.destroyStorageUserInfo(),u.default.login().then(function(){e()}).catch(function(e){t(e)})}}):t()})}},{key:"wxPay",value:function(){var o=this;return new Promise(function(t,n){wx.requestMidasPayment({mode:"game",env:o.payConfig.env,offerId:o.payConfig.offerId,currencyType:"CNY",platform:o.env,buyQuantity:o.orderInfo.buyQuantity,zoneId:o.payConfig.zoneId,success:function(e){wx.showLoading({title:"\u652f\u4ed8\u6210\u529f\u6b63\u5728\u53d1\u9001\u9053\u5177"}),o.payCallback().then(function(e){wx.hideLoading(),wx.showLoading({title:"\u53d1\u9001\u6210\u529f"}),setTimeout(function(){wx.hideLoading()},2e3),t()}).catch(function(e){wx.showModal({title:"\u63d0\u793a",content:"\u53d1\u9001\u5931\u8d25\u3001"+e+"\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d\u5904\u7406",showCancel:!1}),n(e)})},fail:function(e){n(e)},complete:function(e){console.log(e)}})})}},{key:"payCallback",value:function(){var o=this;return new Promise(function(t,n){u.default.checkLoginStatus(function(){var e={do:"payCallback",accessToken:u.default.getStorageUserInfo("accessToken"),order_no:o.orderInfo.order_no,amt:o.orderInfo.amt,zone_id:o.payConfig.zoneId,pf:o.env};a.default.api("COMMON",e).then(function(e){t(e)}).catch(function(e){n(e)})})})}},{key:"getEnv",value:function(){var t=this;s.default.getSystemInfo("platform").then(function(e){t.env=e})}},{key:"checkEnv",value:function(){return"android"===this.env||"devtools"===this.env}}]);n=e;function e(){var t=this;if(!(t instanceof e))throw new TypeError("Cannot call a class as a function");this.payConfig={},this.getPayConfig(),this.env="",this.getEnv(),this.orderInfo={},this.orderData={}}t.default=new n},function(t,n,o){"use strict";var m,_,v,I,r;m=o(13),_=o(6).utf8,v=o(14),I=o(6).bin,(r=function e(l,d){l.constructor==String?l=(d&&"binary"===d.encoding?I:_).stringToBytes(l):v(l)?l=Array.prototype.slice.call(l,0):Array.isArray(l)||(l=l.toString());for(var t=m.bytesToWords(l),d=8*l.length,n=1732584193,o=-271733879,r=-1732584194,a=271733878,i=0;i<t.length;i++)t[i]=16711935&(t[i]<<8|t[i]>>>24)|4278255360&(t[i]<<24|t[i]>>>8);t[d>>>5]|=128<<d%32,t[14+(64+d>>>9<<4)]=d;var u=e._ff,f=e._gg,s=e._hh,c=e._ii;for(i=0;i<t.length;i+=16){var g=n,h=o,y=r,p=a;o=c(o=c(o=c(o=c(o=s(o=s(o=s(o=s(o=f(o=f(o=f(o=f(o=u(o=u(o=u(o=u(o,r=u(r,a=u(a,n=u(n,o,r,a,t[i+0],7,-680876936),o,r,t[i+1],12,-389564586),n,o,t[i+2],17,606105819),a,n,t[i+3],22,-1044525330),r=u(r,a=u(a,n=u(n,o,r,a,t[i+4],7,-176418897),o,r,t[i+5],12,1200080426),n,o,t[i+6],17,-1473231341),a,n,t[i+7],22,-45705983),r=u(r,a=u(a,n=u(n,o,r,a,t[i+8],7,1770035416),o,r,t[i+9],12,-1958414417),n,o,t[i+10],17,-42063),a,n,t[i+11],22,-1990404162),r=u(r,a=u(a,n=u(n,o,r,a,t[i+12],7,1804603682),o,r,t[i+13],12,-40341101),n,o,t[i+14],17,-1502002290),a,n,t[i+15],22,1236535329),r=f(r,a=f(a,n=f(n,o,r,a,t[i+1],5,-165796510),o,r,t[i+6],9,-1069501632),n,o,t[i+11],14,643717713),a,n,t[i+0],20,-373897302),r=f(r,a=f(a,n=f(n,o,r,a,t[i+5],5,-701558691),o,r,t[i+10],9,38016083),n,o,t[i+15],14,-660478335),a,n,t[i+4],20,-405537848),r=f(r,a=f(a,n=f(n,o,r,a,t[i+9],5,568446438),o,r,t[i+14],9,-1019803690),n,o,t[i+3],14,-187363961),a,n,t[i+8],20,1163531501),r=f(r,a=f(a,n=f(n,o,r,a,t[i+13],5,-1444681467),o,r,t[i+2],9,-51403784),n,o,t[i+7],14,1735328473),a,n,t[i+12],20,-1926607734),r=s(r,a=s(a,n=s(n,o,r,a,t[i+5],4,-378558),o,r,t[i+8],11,-2022574463),n,o,t[i+11],16,1839030562),a,n,t[i+14],23,-35309556),r=s(r,a=s(a,n=s(n,o,r,a,t[i+1],4,-1530992060),o,r,t[i+4],11,1272893353),n,o,t[i+7],16,-155497632),a,n,t[i+10],23,-1094730640),r=s(r,a=s(a,n=s(n,o,r,a,t[i+13],4,681279174),o,r,t[i+0],11,-358537222),n,o,t[i+3],16,-722521979),a,n,t[i+6],23,76029189),r=s(r,a=s(a,n=s(n,o,r,a,t[i+9],4,-640364487),o,r,t[i+12],11,-421815835),n,o,t[i+15],16,530742520),a,n,t[i+2],23,-995338651),r=c(r,a=c(a,n=c(n,o,r,a,t[i+0],6,-198630844),o,r,t[i+7],10,1126891415),n,o,t[i+14],15,-1416354905),a,n,t[i+5],21,-57434055),r=c(r,a=c(a,n=c(n,o,r,a,t[i+12],6,1700485571),o,r,t[i+3],10,-1894986606),n,o,t[i+10],15,-1051523),a,n,t[i+1],21,-2054922799),r=c(r,a=c(a,n=c(n,o,r,a,t[i+8],6,1873313359),o,r,t[i+15],10,-30611744),n,o,t[i+6],15,-1560198380),a,n,t[i+13],21,1309151649),r=c(r,a=c(a,n=c(n,o,r,a,t[i+4],6,-145523070),o,r,t[i+11],10,-1120210379),n,o,t[i+2],15,718787259),a,n,t[i+9],21,-343485551),n=n+g>>>0,o=o+h>>>0,r=r+y>>>0,a=a+p>>>0}return m.endian([n,o,r,a])})._ff=function(e,t,n,o,r,a,i){e=e+(t&n|~t&o)+(r>>>0)+i;return(e<<a|e>>>32-a)+t},r._gg=function(e,t,n,o,r,a,i){e=e+(t&o|n&~o)+(r>>>0)+i;return(e<<a|e>>>32-a)+t},r._hh=function(e,t,n,o,r,a,i){e=e+(t^n^o)+(r>>>0)+i;return(e<<a|e>>>32-a)+t},r._ii=function(e,t,n,o,r,a,i){e=e+(n^(t|~o))+(r>>>0)+i;return(e<<a|e>>>32-a)+t},r._blocksize=16,r._digestsize=16,t.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);e=m.wordsToBytes(r(e,t));return t&&t.asBytes?e:t&&t.asString?I.bytesToString(e):m.bytesToHex(e)}},function(e,t){var a,n;a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];0<e;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,o=0;n<e.length;n++,o+=8)t[o>>>5]|=e[n]<<24-o%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],r=0;r<4;r++)8*n+6*r<=8*e.length?t.push(a.charAt(o>>>6*(3-r)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&t.push((a.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|a.indexOf(e.charAt(n))>>>6-2*o);return t}},e.exports=n},function(e,t,n){"use strict";function o(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(o(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&o(e.slice(0,0))||!!e._isBuffer)}}]);export default gameSDK.default;