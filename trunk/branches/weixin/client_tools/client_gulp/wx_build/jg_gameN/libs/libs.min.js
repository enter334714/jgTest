var Laya=window.Laya=function(n_$A,n_$N){var n_$P={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(n_$N,n_$C){return 1==arguments.length?n_$P.__presubstr.call(this,n_$N):n_$P.__presubstr.call(this,n_$N,0<n_$C?n_$C:this.length+n_$C)},__init:function(n_$N){n_$N.forEach(function(n_$N){n_$N.__init$&&n_$N.__init$()})},__isClass:function(n_$N){return n_$N&&(n_$N.__isclass||n_$N==Object||n_$N==String||n_$N==Array)},__newvec:function(n_$N,n_$C){var n_$a=[];n_$a.length=n_$N;for(var n_$u=0;n_$u<n_$N;n_$u++)n_$a[n_$u]=n_$C;return n_$a},__extend:function(n_$N,n_$C){for(var n_$a in n_$C)if(n_$C.hasOwnProperty(n_$a)){var n_$u=Object.getOwnPropertyDescriptor(n_$C,n_$a),n_$e=n_$u.get,n_$J=n_$u.set;n_$e||n_$J?n_$e&&n_$J?Object.defineProperty(n_$N,n_$a,n_$u):(n_$e&&Object.defineProperty(n_$N,n_$a,n_$e),n_$J&&Object.defineProperty(n_$N,n_$a,n_$J)):n_$N[n_$a]=n_$C[n_$a]}function n_$M(){n_$P.un(this,"constructor",n_$N)}n_$M.prototype=n_$C.prototype,n_$N.prototype=new n_$M,n_$P.un(n_$N.prototype,"__imps",n_$P.__copy({},n_$C.prototype.__imps))},__copy:function(n_$N,n_$C){if(!n_$C)return null;for(var n_$a in n_$N=n_$N||{},n_$C)n_$N[n_$a]=n_$C[n_$a];return n_$N},__package:function(n_$N,n_$C){if(!n_$P.__packages[n_$N]){n_$P.__packages[n_$N]=!0;var n_$a=n_$A,n_$u=n_$N.split(".");if(1<n_$u.length)for(var n_$e=0,n_$J=n_$u.length-1;n_$e<n_$J;n_$e++){var n_$M=n_$a[n_$u[n_$e]];n_$a=n_$M||(n_$a[n_$u[n_$e]]={})}n_$a[n_$u[n_$u.length-1]]||(n_$a[n_$u[n_$u.length-1]]=n_$C||{})}},__hasOwnProperty:function(n_$N,n_$C){return n_$C=n_$C||this,Object.hasOwnProperty.call(n_$C,n_$N)||function n_$N(n_$C,n_$a){if(Object.hasOwnProperty.call(n_$a.prototype,n_$C))return!0;var n_$u=n_$a.prototype.__super;return null==n_$u?null:n_$N(n_$C,n_$u)}(n_$N,n_$C.__class)},__typeof:function(n_$N,n_$C){if(!n_$N||!n_$C)return!1;if(n_$C===String)return"string"==typeof n_$N;if(n_$C===Number)return"number"==typeof n_$N;if(n_$C.__interface__)n_$C=n_$C.__interface__;else if("string"!=typeof n_$C)return n_$N instanceof n_$C;return n_$N.__imps&&n_$N.__imps[n_$C]||n_$N.__class==n_$C},__as:function(n_$N,n_$C){return this.__typeof(n_$N,n_$C)?n_$N:null},__int:function(n_$N){return n_$N?parseInt(n_$N):0},interface:function(n_$N,n_$C){n_$P.__package(n_$N,{});var n_$a=n_$P.__internals,n_$u=n_$a[n_$N]=n_$a[n_$N]||{self:n_$N};if(n_$C){var n_$e=n_$C.split(",");n_$u.extend=[];for(var n_$J=0;n_$J<n_$e.length;n_$J++){var n_$M=n_$e[n_$J];n_$a[n_$M]=n_$a[n_$M]||{self:n_$M},n_$u.extend.push(n_$a[n_$M])}}var n_$n=n_$A,n_$V=n_$N.split(".");for(n_$J=0;n_$J<n_$V.length-1;n_$J++)n_$n=n_$n[n_$V[n_$J]];n_$n[n_$V[n_$V.length-1]]={__interface__:n_$N}},class:function(n_$N,n_$C,n_$a,n_$u){if(n_$a&&n_$P.__extend(n_$N,n_$a),n_$C)if(n_$P.__package(n_$C,n_$N),n_$P.__classmap[n_$C]=n_$N,0<n_$C.indexOf(".")){if(0==n_$C.indexOf("laya.")){var n_$e=n_$C.split(".");n_$u=n_$u||n_$e[n_$e.length-1],n_$P[n_$u]&&console.log("Warning!,this class["+n_$u+"] already exist:",n_$P[n_$u]),n_$P[n_$u]=n_$N}}else"Main"==n_$C?n_$A.Main=n_$N:"MainWX"==n_$C?n_$A.MainWX=n_$N:(n_$P[n_$C]&&console.log("Error!,this class["+n_$C+"] already exist:",n_$P[n_$C]),n_$P[n_$C]=n_$N);var n_$J=n_$P.un,n_$M=n_$N.prototype;n_$J(n_$M,"hasOwnProperty",n_$P.__hasOwnProperty),n_$J(n_$M,"__class",n_$N),n_$J(n_$M,"__super",n_$a),n_$J(n_$M,"__className",n_$C),n_$J(n_$N,"__super",n_$a),n_$J(n_$N,"__className",n_$C),n_$J(n_$N,"__isclass",!0),n_$J(n_$N,"super",function(n_$N){this.__super.call(n_$N)})},imps:function(n_$N,n_$C){if(!n_$C)return null;var n_$e=n_$N.__imps||n_$P.un(n_$N,"__imps",{});function n_$J(n_$N){var n_$C,n_$a;if((n_$C=n_$P.__internals[n_$N])&&(n_$e[n_$N]=!0,n_$a=n_$C.extend))for(var n_$u=0;n_$u<n_$a.length;n_$u++)n_$J(n_$a[n_$u].self)}for(var n_$a in n_$C)n_$J(n_$a)},superSet:function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.prototype["_$set_"+n_$a];n_$e&&n_$e.call(n_$C,n_$u)},superGet:function(n_$N,n_$C,n_$a){var n_$u=n_$N.prototype["_$get_"+n_$a];return n_$u?n_$u.call(n_$C):null},getset:function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$N?(n_$u&&(n_$C["_$GET_"+n_$a]=n_$u),n_$e&&(n_$C["_$SET_"+n_$a]=n_$e)):(n_$u&&n_$P.un(n_$C,"_$get_"+n_$a,n_$u),n_$e&&n_$P.un(n_$C,"_$set_"+n_$a,n_$e)),n_$u&&n_$e?Object.defineProperty(n_$C,n_$a,{get:n_$u,set:n_$e,enumerable:!1,configurable:!0}):(n_$u&&Object.defineProperty(n_$C,n_$a,{get:n_$u,enumerable:!1,configurable:!0}),n_$e&&Object.defineProperty(n_$C,n_$a,{set:n_$e,enumerable:!1,configurable:!0}))},static:function(n_$a,n_$u){for(var n_$e=0,n_$N=n_$u.length;n_$e<n_$N;n_$e+=2)if("length"==n_$u[n_$e])n_$a.length=n_$u[n_$e+1].call(n_$a);else{function n_$C(){var n_$C=n_$u[n_$e],n_$N=n_$u[n_$e+1];Object.defineProperty(n_$a,n_$C,{get:function(){return delete this[n_$C],this[n_$C]=n_$N.call(this)},set:function(n_$N){delete this[n_$C],this[n_$C]=n_$N},enumerable:!0,configurable:!0})}n_$C()}},un:function(n_$N,n_$C,n_$a){return n_$a||(n_$a=n_$N[n_$C]),n_$P.__propun.value=n_$a,Object.defineProperty(n_$N,n_$C,n_$P.__propun),n_$a},uns:function(n_$C,n_$N){n_$N.forEach(function(n_$N){n_$P.un(n_$C,n_$N)})}};return n_$A.console=n_$A.console||{log:function(){}},n_$A.trace=n_$A.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),n_$P}(window,document);!function(n_$N,n_$C,n_$a){n_$a.un,n_$a.uns,n_$a.static,n_$a.class,n_$a.getset,n_$a.__newvec}(window,document,Laya),function(n_$M,n_$C,n_$c){n_$c.un,n_$c.uns;var n_$V=n_$c.static,n_$P=n_$c.class,n_$z=n_$c.getset;n_$c.__newvec;n_$c.interface("laya.runtime.IMarket"),n_$c.interface("laya.filters.IFilter"),n_$c.interface("laya.display.ILayout"),n_$c.interface("laya.resource.IDispose"),n_$c.interface("laya.runtime.IPlatform"),n_$c.interface("laya.resource.IDestroy"),n_$c.interface("laya.runtime.IConchNode"),n_$c.interface("laya.filters.IFilterAction"),n_$c.interface("laya.runtime.ICPlatformClass"),n_$c.interface("laya.resource.ICreateResource"),n_$c.interface("laya.runtime.IConchRenderObject"),n_$c.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var n_$_=function(){function n_$J(){}return n_$P(n_$J,"laya.utils.RunDriver"),n_$J.FILTER_ACTIONS=[],n_$J.pixelRatio=-1,n_$J._charSizeTestDiv=null,n_$J.now=function(){return Date.now()},n_$J.getWindow=function(){return n_$M},n_$J.getPixelRatio=function(){if(n_$J.pixelRatio<0){var n_$N=n_$R.context,n_$C=n_$N.backingStorePixelRatio||n_$N.webkitBackingStorePixelRatio||n_$N.mozBackingStorePixelRatio||n_$N.msBackingStorePixelRatio||n_$N.oBackingStorePixelRatio||n_$N.backingStorePixelRatio||1;(n_$J.pixelRatio=(n_$R.window.devicePixelRatio||1)/n_$C)<1&&(n_$J.pixelRatio=1)}return n_$J.pixelRatio},n_$J.getIncludeStr=function(n_$N){return null},n_$J.createShaderCondition=function(n_$N){var n_$C="(function() {return "+n_$N+";})";return n_$c._runScript(n_$C)},n_$J.fontMap=[],n_$J.measureText=function(n_$N,n_$C){var n_$a=n_$J.hanzi.test(n_$N);if(n_$a&&n_$J.fontMap[n_$C])return n_$J.fontMap[n_$C];var n_$u=n_$R.context;n_$u.font=n_$C;var n_$e=n_$u.measureText(n_$N);return n_$e||(n_$e={width:16,height:16}),n_$a&&(n_$J.fontMap[n_$C]=n_$e),n_$e},n_$J.getWebGLContext=function(n_$N){},n_$J.beginFlush=function(){},n_$J.endFinish=function(){},n_$J.addToAtlas=null,n_$J.flashFlushImage=function(n_$N){},n_$J.drawToCanvas=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$WN.create("2D"),n_$n=new n_$j(n_$a,n_$u,n_$M);return n_$y.renders[n_$C]._fun(n_$N,n_$n,n_$e,n_$J),n_$M},n_$J.createParticleTemplate2D=null,n_$J.createGLTextur=null,n_$J.createWebGLContext2D=null,n_$J.changeWebGLSize=function(n_$N,n_$C){},n_$J.createRenderSprite=function(n_$N,n_$C){return new n_$y(n_$N,n_$C)},n_$J.createFilterAction=function(n_$N){return new n_$W},n_$J.createGraphics=function(){return new n_$O},n_$J.clear=function(n_$N){n_$i._context.ctx.clear()},n_$J.cancelLoadByUrl=function(n_$N){},n_$J.clearAtlas=function(n_$N){},n_$J.isAtlas=function(n_$N){return!1},n_$J.addTextureToAtlas=function(n_$N){},n_$J.getTexturePixels=function(n_$N,n_$C,n_$a,n_$u,n_$e){return null},n_$J.skinAniSprite=function(){return null},n_$J.update3DLoop=function(){},n_$V(n_$J,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),n_$J}(),n_$u=(n_$z(1,n_$c,"alertGlobalError",null,function(n_$N){var n_$J=0;n_$R.window.onerror=n_$N?function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$J++<5&&n_$e&&alert(n_$e.stack||n_$e)}:null}),n_$c.init=function(n_$N,n_$C,n_$a){for(var n_$u=[],n_$e=2,n_$J=arguments.length;n_$e<n_$J;n_$e++)n_$u.push(arguments[n_$e]);if(!n_$c._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=n_$c._arrayBufferSlice),n_$c._isinit=!0,n_$R.__init__(),n_$T.__init__(),n_$O.__init__(),n_$c.timer=new n_$o,n_$c.scaleTimer=new n_$o,n_$c.loader=new n_$VN,n_$h.__init__(),n_$e=0;for(var n_$M=n_$u.length;n_$e<n_$M;n_$e++)n_$u[n_$e].enable&&n_$u[n_$e].enable();return n_$G.__init__(),n_$n.__init__(),n_$L.__init__(),n_$B.beginCheck(),n_$c._currentStage=n_$c.stage=new n_$gN,n_$c.stage.conchModel&&n_$c.stage.conchModel.setRootNode(),n_$c._getUrlPath(),n_$c.render=new n_$i(0,0),n_$c.stage.size(n_$N,n_$C),n_$y.__init__(),n_$$.__init__(),n_$f.instance.__init__(n_$c.stage,n_$i.canvas),n_$XN.__init__(),n_$q.autoStopMusic=!0,n_$D.__init__(),n_$i.canvas}},n_$c._getUrlPath=function(){var n_$N=n_$R.window.location,n_$C=n_$N.pathname;n_$C=n_$C&&":"==n_$C.charAt(2)?n_$C.substring(1):n_$C,n_$l.rootPath=n_$l.basePath=n_$l.getPath("file:"==n_$N.protocol?n_$C:n_$N.protocol+"//"+n_$N.host+n_$N.pathname)},n_$c._arrayBufferSlice=function(n_$N,n_$C){var n_$a=new Uint8Array(this,n_$N,n_$C-n_$N),n_$u=new Uint8Array(n_$a.length);return n_$u.set(n_$a),n_$u.buffer},n_$c._runScript=function(n_$N){return n_$R.window[n_$c._evcode](n_$N)},n_$c.stage=null,n_$c.timer=null,n_$c.scaleTimer=null,n_$c.loader=null,n_$c.version="1.8.6",n_$c.render=null,n_$c._currentStage=null,n_$c._isinit=!1,n_$c.isDebug=!1,n_$c.MiniAdpter={init:function(){n_$M.navigator&&n_$M.navigator.userAgent&&-1<n_$M.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},n_$V(n_$c,["conchMarket",function(){return this.conchMarket=n_$M.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=n_$M.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function n_$N(){}return n_$P(n_$N,"Config"),n_$N.WebGLTextCacheCount=500,n_$N.atlasEnable=!1,n_$N.showCanvasMark=!1,n_$N.animationInterval=50,n_$N.isAntialias=!1,n_$N.isAlpha=!1,n_$N.premultipliedAlpha=!0,n_$N.isStencil=!0,n_$N.preserveDrawingBuffer=!1,n_$N}()),n_$A=function(){function n_$A(){this._events=null}n_$P(n_$A,"laya.events.EventDispatcher");var n_$N=n_$A.prototype;return n_$N.hasListener=function(n_$N){return!!(this._events&&this._events[n_$N])},n_$N.getListener=function(n_$N){return this._events?this._events[n_$N]:null},n_$N.event=function(n_$N,n_$C){if(!this._events||!this._events[n_$N])return!1;var n_$a=this._events[n_$N];if(n_$a.lock)n_$a.queue||(n_$a.queue=[]),n_$a.queue.push(n_$C);else{var n_$u;for(n_$a.lock=!0,n_$a.cursor=n_$a.head;n_$a.cursor;)(n_$u=n_$a.cursor).recover?(n_$a.head=n_$a.tail=n_$a.cursor=null,console.error("node is recover："+n_$u.id)):(n_$a.cursor=n_$u.next,n_$u.once&&n_$A.delNode(n_$a,n_$u),n_$u.method&&(null!=n_$C?n_$u.args?n_$u.method.apply(n_$u.caller,n_$u.args.concat(n_$C)):n_$C instanceof Array?n_$u.method.apply(n_$u.caller,n_$C):n_$u.caller?n_$u.method.call(n_$u.caller,n_$C):n_$c.recordError("事件派发错误","node.caller:"+n_$u.caller+"node.method:"+n_$u.method+"data:"+n_$C+"node.prev"+n_$u.prev):n_$u.method.apply(n_$u.caller,n_$u.args)),n_$u.once&&n_$A.recoverHandler(n_$u));n_$a.lock=!1,!n_$a.head&&this._events&&this._events[n_$N]==n_$a&&delete this._events[n_$N],n_$a.queue&&n_$a.queue.length&&this.event(n_$N,n_$a.queue.shift())}return!0},n_$N.on=function(n_$N,n_$C,n_$a,n_$u){return this._createListener(n_$N,n_$C,n_$a,n_$u,!1)},n_$N.once=function(n_$N,n_$C,n_$a,n_$u){return this._createListener(n_$N,n_$C,n_$a,n_$u,!0)},n_$N._createListener=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$J&&(n_$J=!0),n_$J&&this.off(n_$N,n_$C,n_$a,n_$e);var n_$M=n_$A.createHandler(n_$C||this,n_$a,n_$u,n_$e);this._events||(this._events={});var n_$n=this._events,n_$V=n_$n[n_$N];return n_$V?n_$V.tail?(n_$M.prev=n_$V.tail,n_$V.tail.next=n_$M,n_$V.tail=n_$M):n_$V.head=n_$V.tail=n_$M:n_$n[n_$N]={head:n_$M,tail:n_$M,cursor:null,lock:!1},this},n_$N.off=function(n_$N,n_$C,n_$a,n_$u){if(void 0===n_$u&&(n_$u=!1),!this._events||!this._events[n_$N])return this;for(var n_$e=this._events[n_$N],n_$J=n_$e.head;n_$J;){if((!n_$C||n_$J.caller===n_$C)&&n_$J.method===n_$a&&(!n_$u||n_$J.once)){n_$A.delNode(n_$e,n_$J),n_$e.cursor==n_$J&&(n_$e.cursor=n_$J.next),n_$A.recoverHandler(n_$J);break}n_$J=n_$J.next}return this},n_$N.offAll=function(n_$N){var n_$C=this._events;if(!n_$C)return this;if(n_$N)this._recoverHandlers(n_$C[n_$N]),delete n_$C[n_$N];else{for(var n_$a in n_$C)this._recoverHandlers(n_$C[n_$a]);this._events=null}return this},n_$N._recoverHandlers=function(n_$N){if(n_$N){for(var n_$C=n_$N.head;n_$C;){n_$A.delNode(n_$N,n_$C);var n_$a=n_$C.next;n_$A.recoverHandler(n_$C),n_$C=n_$a}n_$N.cursor=null}},n_$N.isMouseEvent=function(n_$N){return n_$A.MOUSE_EVENTS[n_$N]},n_$A.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},n_$A.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},n_$A.delNode=function(n_$N,n_$C){n_$C.prev?n_$C.prev.next=n_$C.next:n_$N.head=n_$C.next,n_$C.next?n_$C.next.prev=n_$C.prev:n_$N.tail=n_$C.prev},n_$A.createHandler=function(n_$N,n_$C,n_$a,n_$u){var n_$e=500<n_$A._freeHandler.length?n_$A._freeHandler.shift():null;if(n_$e)if(n_$e.recover)n_$e.recover=!1,n_$e.caller=n_$N,n_$e.method=n_$C,n_$e.args=n_$a,n_$e.once=n_$u;else{var n_$J="";try{arguments.propertyIsEnumerable.caller}catch(n_$N){n_$J=n_$N.stack}var n_$M=n_$e.caller?(n_$e.caller.__proto__&&n_$e.caller.__proto__.constructor&&n_$e.caller.__proto__.constructor.name)+"|"+n_$e.caller.__className+"|"+n_$e.caller.name:"",n_$n=n_$e.method?n_$e.method.name:"";n_$c.recordError("EventDispatcher重复创建","caller="+n_$M+"  method="+n_$n+"  stack="+n_$J),n_$e={id:++n_$A._nodeCount,caller:n_$N,method:n_$C,args:n_$a,once:n_$u,recover:!1}}else n_$e={id:++n_$A._nodeCount,caller:n_$N,method:n_$C,args:n_$a,once:n_$u,recover:!1};return n_$e.prev=n_$e.next=null,n_$e},n_$A.recoverHandler=function(n_$N){if(n_$N.recover){if(n_$A._errorCount<5){n_$A._errorCount++;var n_$C="";try{arguments.propertyIsEnumerable.caller}catch(n_$N){n_$C=n_$N.stack}var n_$a=n_$N.caller?(n_$N.caller.__proto__&&n_$N.caller.__proto__.constructor&&n_$N.caller.__proto__.constructor.name)+"|"+n_$N.caller.__className+"|"+n_$N.caller.name:"",n_$u=n_$N.method?n_$N.method.name:"";n_$c.recordError("EventDispatcher重复回收","id="+n_$N.id+"  caller="+n_$a+"  method="+n_$u+"  stack="+n_$C)}n_$N.caller=n_$N.method=n_$N.args=n_$N.prev=null}else n_$N.recover=!0,n_$N.caller=n_$N.method=n_$N.args=n_$N.prev=n_$N.next=null,n_$A._freeHandler&&n_$A._freeHandler.length<3e3&&n_$A._freeHandler.push(n_$N)},n_$A._freeHandler=[],n_$A._nodeCount=0,n_$A._errorCount=0,n_$A}(),n_$x=function(){function n_$e(n_$N,n_$C,n_$a,n_$u){this.once=!1,void(this._id=0)===n_$u&&(n_$u=!1),this.setTo(n_$N,n_$C,n_$a,n_$u)}n_$P(n_$e,"laya.utils.Handler");var n_$N=n_$e.prototype;return n_$N.setTo=function(n_$N,n_$C,n_$a,n_$u){return this._id=n_$e._gid++,this.caller=n_$N,this.method=n_$C,this.args=n_$a,this.once=n_$u,this},n_$N.run=function(){if(null==this.method)return null;var n_$N=this._id,n_$C=this.method.apply(this.caller,this.args);return this._id===n_$N&&this.once&&this.recover(),n_$C},n_$N.runWith=function(n_$N){if(null==this.method)return null;var n_$C=this._id;if(null==n_$N)var n_$a=this.method.apply(this.caller,this.args);else n_$a=this.args||n_$N.unshift?this.args?this.method.apply(this.caller,this.args.concat(n_$N)):this.method.apply(this.caller,n_$N):this.method.call(this.caller,n_$N);return this._id===n_$C&&this.once&&this.recover(),n_$a},n_$N.clear=function(){return this.caller=null,this.method=null,this.args=null,this},n_$N.recover=function(){0<this._id&&(this._id=0,this.clear())},n_$e.create=function(n_$N,n_$C,n_$a,n_$u){return void 0===n_$u&&(n_$u=!0),new n_$e(n_$N,n_$C,n_$a,n_$u)},n_$e._gid=1,n_$e}(),n_$s=function(){function n_$N(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}n_$P(n_$N,"laya.display.BitmapFont");var n_$C=n_$N.prototype;return n_$C.loadFont=function(n_$N,n_$C){this._path=n_$N,this._complete=n_$C,n_$c.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],n_$x.create(this,this.onLoaded))},n_$C.onLoaded=function(){this.parseFont(n_$nN.getRes(this._path),n_$nN.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},n_$C.parseFont=function(n_$N,n_$C){if(null!=n_$N&&null!=n_$C){this._texture=n_$C;var n_$a=n_$N.getElementsByTagName("info");if(!n_$a[0].getAttributeNode)return this.parseFont2(n_$N,n_$C);this.fontSize=parseInt(n_$a[0].getAttributeNode("size").nodeValue);var n_$u,n_$e=n_$a[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(n_$e[0]),parseInt(n_$e[1]),parseInt(n_$e[2]),parseInt(n_$e[3])],n_$u=n_$N.getElementsByTagName("char");var n_$J=0;for(n_$J=0;n_$J<n_$u.length;n_$J++){var n_$M=n_$u[n_$J],n_$n=parseInt(n_$M.getAttributeNode("id").nodeValue),n_$V=parseInt(n_$M.getAttributeNode("xoffset").nodeValue)/1,n_$A=parseInt(n_$M.getAttributeNode("yoffset").nodeValue)/1,n_$P=parseInt(n_$M.getAttributeNode("xadvance").nodeValue)/1,n_$$=new n_$F;n_$$.x=parseInt(n_$M.getAttributeNode("x").nodeValue),n_$$.y=parseInt(n_$M.getAttributeNode("y").nodeValue),n_$$.width=parseInt(n_$M.getAttributeNode("width").nodeValue),n_$$.height=parseInt(n_$M.getAttributeNode("height").nodeValue);var n_$O=n_$PN.create(n_$C,n_$$.x,n_$$.y,n_$$.width,n_$$.height,n_$V,n_$A);this._maxWidth=Math.max(this._maxWidth,n_$P+this.letterSpacing),this._fontCharDic[n_$n]=n_$O,this._fontWidthMap[n_$n]=n_$P}}},n_$C.parseFont2=function(n_$N,n_$C){if(null!=n_$N&&null!=n_$C){this._texture=n_$C;var n_$a=n_$N.getElementsByTagName("info");this.fontSize=parseInt(n_$a[0].attributes.size.nodeValue);var n_$u=n_$a[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(n_$u[0]),parseInt(n_$u[1]),parseInt(n_$u[2]),parseInt(n_$u[3])];var n_$e=n_$N.getElementsByTagName("char"),n_$J=0;for(n_$J=0;n_$J<n_$e.length;n_$J++){var n_$M=n_$e[n_$J].attributes,n_$n=parseInt(n_$M.id.nodeValue),n_$V=parseInt(n_$M.xoffset.nodeValue)/1,n_$A=parseInt(n_$M.yoffset.nodeValue)/1,n_$P=parseInt(n_$M.xadvance.nodeValue)/1,n_$$=new n_$F;n_$$.x=parseInt(n_$M.x.nodeValue),n_$$.y=parseInt(n_$M.y.nodeValue),n_$$.width=parseInt(n_$M.width.nodeValue),n_$$.height=parseInt(n_$M.height.nodeValue);var n_$O=n_$PN.create(n_$C,n_$$.x,n_$$.y,n_$$.width,n_$$.height,n_$V,n_$A);this._maxWidth=Math.max(this._maxWidth,n_$P+this.letterSpacing),this._fontCharDic[n_$n]=n_$O,this._fontWidthMap[n_$n]=n_$P}}},n_$C.getCharTexture=function(n_$N){return this._fontCharDic[n_$N.charCodeAt(0)]},n_$C.destroy=function(){if(this._texture){for(var n_$N in this._fontCharDic){var n_$C=this._fontCharDic[n_$N];n_$C&&n_$C.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},n_$C.setSpaceWidth=function(n_$N){this._spaceWidth=n_$N},n_$C.getCharWidth=function(n_$N){var n_$C=n_$N.charCodeAt(0);return this._fontWidthMap[n_$C]?this._fontWidthMap[n_$C]+this.letterSpacing:" "==n_$N?this._spaceWidth+this.letterSpacing:0},n_$C.getTextWidth=function(n_$N){for(var n_$C=0,n_$a=0,n_$u=n_$N.length;n_$a<n_$u;n_$a++)n_$C+=this.getCharWidth(n_$N.charAt(n_$a));return n_$C},n_$C.getMaxWidth=function(){return this._maxWidth},n_$C.getMaxHeight=function(){return this.fontSize},n_$C.drawText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M,n_$n=this.getTextWidth(n_$N),n_$V=0;"center"===n_$e&&(n_$V=(n_$J-n_$n)/2),"right"===n_$e&&(n_$V=n_$J-n_$n);for(var n_$A=0,n_$P=0,n_$$=n_$N.length;n_$P<n_$$;n_$P++)(n_$M=this.getCharTexture(n_$N.charAt(n_$P)))&&(n_$C.graphics.drawTexture(n_$M,n_$a+n_$A+n_$V,n_$u),n_$A+=this.getCharWidth(n_$N.charAt(n_$P)))},n_$N}(),n_$n=function(){function n_$a(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=n_$a._TF_EMPTY}n_$P(n_$a,"laya.display.css.Style");var n_$N=n_$a.prototype;return n_$N.getTransform=function(){return this._tf},n_$N.setTransform=function(n_$N){this._tf="none"!==n_$N&&n_$N?n_$N:n_$a._TF_EMPTY},n_$N.setTranslateX=function(n_$N){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.translateX=n_$N},n_$N.setTranslateY=function(n_$N){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.translateY=n_$N},n_$N.setScaleX=function(n_$N){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.scaleX=n_$N},n_$N.setScale=function(n_$N,n_$C){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.scaleX=n_$N,this._tf.scaleY=n_$C},n_$N.setScaleY=function(n_$N){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.scaleY=n_$N},n_$N.setRotate=function(n_$N){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.rotate=n_$N},n_$N.setSkewX=function(n_$N){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.skewX=n_$N},n_$N.setSkewY=function(n_$N){this._tf===n_$a._TF_EMPTY&&(this._tf=new n_$e),this._tf.skewY=n_$N},n_$N.destroy=function(){this.scrollRect=null},n_$N.render=function(n_$N,n_$C,n_$a,n_$u){},n_$N.getCSSStyle=function(){return n_$CN.EMPTY},n_$N._enableLayout=function(){return!1},n_$z(0,n_$N,"scaleX",function(){return this._tf.scaleX},function(n_$N){this.setScaleX(n_$N)}),n_$z(0,n_$N,"transform",function(){return this.getTransform()},function(n_$N){this.setTransform(n_$N)}),n_$z(0,n_$N,"translateX",function(){return this._tf.translateX},function(n_$N){this.setTranslateX(n_$N)}),n_$z(0,n_$N,"translateY",function(){return this._tf.translateY},function(n_$N){this.setTranslateY(n_$N)}),n_$z(0,n_$N,"scaleY",function(){return this._tf.scaleY},function(n_$N){this.setScaleY(n_$N)}),n_$z(0,n_$N,"block",function(){return 0!=(1&this._type)}),n_$z(0,n_$N,"skewY",function(){return this._tf.skewY},function(n_$N){this.setSkewY(n_$N)}),n_$z(0,n_$N,"rotate",function(){return this._tf.rotate},function(n_$N){this.setRotate(n_$N)}),n_$z(0,n_$N,"skewX",function(){return this._tf.skewX},function(n_$N){this.setSkewX(n_$N)}),n_$z(0,n_$N,"paddingLeft",function(){return 0}),n_$z(0,n_$N,"paddingTop",function(){return 0}),n_$z(0,n_$N,"absolute",function(){return!0}),n_$a.__init__=function(){n_$a._TF_EMPTY=new n_$e,n_$a.EMPTY=new n_$a},n_$a.EMPTY=null,n_$a._TF_EMPTY=null,n_$a}(),n_$G=function(){function n_$C(n_$N){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=n_$K.create(n_$C.defaultColor),this.family=n_$C.defaultFamily,this.stroke=n_$C._STROKE,this.size=n_$C.defaultSize,n_$N&&n_$N!==n_$C.EMPTY&&n_$N.copyTo(this)}n_$P(n_$C,"laya.display.css.Font");var n_$N=n_$C.prototype;return n_$N.set=function(n_$N){this._text=null;for(var n_$C=n_$N.split(" "),n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++){var n_$e=n_$C[n_$a];switch(n_$e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<n_$e.indexOf("px")&&(this.size=parseInt(n_$e),this.family=n_$C[n_$a+1],n_$a++)}},n_$N.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},n_$N.copyTo=function(n_$N){n_$N._type=this._type,n_$N._text=this._text,n_$N._weight=this._weight,n_$N._color=this._color,n_$N.family=this.family,n_$N.stroke=this.stroke!=n_$C._STROKE?this.stroke.slice():n_$C._STROKE,n_$N.indent=this.indent,n_$N.size=this.size},n_$z(0,n_$N,"password",function(){return 0!=(1024&this._type)},function(n_$N){n_$N?this._type|=1024:this._type&=-1025}),n_$z(0,n_$N,"color",function(){return this._color.strColor},function(n_$N){this._color=n_$K.create(n_$N)}),n_$z(0,n_$N,"italic",function(){return 0!=(512&this._type)},function(n_$N){n_$N?this._type|=512:this._type&=-513}),n_$z(0,n_$N,"bold",function(){return 0!=(2048&this._type)},function(n_$N){n_$N?this._type|=2048:this._type&=-2049}),n_$z(0,n_$N,"weight",function(){return""+this._weight},function(n_$N){var n_$C=0;switch(n_$N){case"normal":break;case"bold":this.bold=!0,n_$C=700;break;case"bolder":n_$C=800;break;case"lighter":n_$C=100;break;default:n_$C=parseInt(n_$N)}this._weight=n_$C,this._text=null}),n_$z(0,n_$N,"decoration",function(){return this._decoration?this._decoration.value:null},function(n_$N){var n_$C=n_$N.split(" ");switch(this._decoration||(this._decoration={}),n_$C[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=n_$C[0]}n_$C[1]&&(this._decoration.color=n_$K.create(n_$C)),this._decoration.value=n_$N}),n_$C.__init__=function(){n_$C.EMPTY=new n_$C(null)},n_$C.EMPTY=null,n_$C.defaultColor="#000000",n_$C.defaultSize=12,n_$C.defaultFamily="Arial",n_$C.defaultFont="12px Arial",n_$C._STROKE=[0,"#000000"],n_$C._ITALIC=512,n_$C._PASSWORD=1024,n_$C._BOLD=2048,n_$C}(),n_$e=function(){function n_$N(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return n_$P(n_$N,"laya.display.css.TransformInfo"),n_$N}(),n_$O=function(){function n_$$(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,n_$i.isConchNode){this._nativeObj=new n_$M._conchGraphics,this.id=this._nativeObj.conchID}}n_$P(n_$$,"laya.display.Graphics");var n_$N=n_$$.prototype;return n_$N.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},n_$N.clear=function(n_$N){void 0===n_$N&&(n_$N=!1);var n_$C=0,n_$a=0;if(n_$N){var n_$u=this._one;if(this._cmds){for(n_$a=this._cmds.length,n_$C=0;n_$C<n_$a;n_$C++)!(n_$u=this._cmds[n_$C])||n_$u.callee!==n_$i._context._drawTexture&&n_$u.callee!==n_$i._context._drawTextureWithTransform||(n_$u[0]=null,n_$$._cache.push(n_$u));this._cmds.length=0}else n_$u&&(!n_$u||n_$u.callee!==n_$i._context._drawTexture&&n_$u.callee!==n_$i._context._drawTextureWithTransform||(n_$u[0]=null,n_$$._cache.push(n_$u)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(n_$C=0,n_$a=this._vectorgraphArray.length;n_$C<n_$a;n_$C++)n_$Z.getInstance().deleteShape(this._vectorgraphArray[n_$C]);this._vectorgraphArray.length=0}},n_$N._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},n_$N._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new n_$a,this._graphicBounds._graphics=this)},n_$N._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},n_$N._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},n_$N.getBounds=function(n_$N){return void 0===n_$N&&(n_$N=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(n_$N)},n_$N.getBoundPoints=function(n_$N){return void 0===n_$N&&(n_$N=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(n_$N)},n_$N._addCmd=function(n_$N){this._cmds=this._cmds||[],n_$N.callee=n_$N.shift(),this._cmds.push(n_$N)},n_$N.setFilters=function(n_$N){this._saveToCmd(n_$i._context._setFilters,n_$N)},n_$N.drawTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){if(void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),void 0===n_$M&&(n_$M=1),!n_$N||n_$M<.01)return null;n_$u||(n_$u=n_$N.sourceWidth),n_$e||(n_$e=n_$N.sourceHeight),n_$M=n_$M<0?0:1<n_$M?1:n_$M;var n_$n,n_$V=!n_$i.isWebGL&&(n_$R.onFirefox||n_$R.onEdge||n_$R.onIE||n_$R.onSafari)?.5:0,n_$A=n_$u/n_$N.sourceWidth,n_$P=n_$e/n_$N.sourceHeight;return n_$u=n_$N.width*n_$A,n_$e=n_$N.height*n_$P,n_$N.loaded&&(n_$u<=0||n_$e<=0)?null:(n_$C+=n_$N.offsetX*n_$A,n_$a+=n_$N.offsetY*n_$P,this._sp&&(this._sp._renderType|=512),n_$C-=n_$V,n_$a-=n_$V,n_$u+=2*n_$V,n_$e+=2*n_$V,n_$$._cache.length?((n_$n=n_$$._cache.pop())[0]=n_$N,n_$n[1]=n_$C,n_$n[2]=n_$a,n_$n[3]=n_$u,n_$n[4]=n_$e,n_$n[5]=n_$J,n_$n[6]=n_$M):n_$n=[n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M],n_$n.callee=n_$J||1!=n_$M?n_$i._context._drawTextureWithTransform:n_$i._context._drawTexture,null!=this._one||n_$J||1!=n_$M?this._saveToCmd(n_$n.callee,n_$n):(this._one=n_$n,this._render=this._renderOneImg),n_$N.loaded||n_$N.once("loaded",this,this._textureLoaded,[n_$N,n_$n]),this._repaint(),n_$n)},n_$N.cleanByTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e){if(void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),!n_$N)return this.clear();if(this._one&&this._render===this._renderOneImg){n_$u||(n_$u=n_$N.sourceWidth),n_$e||(n_$e=n_$N.sourceHeight);var n_$J=n_$u/n_$N.sourceWidth,n_$M=n_$e/n_$N.sourceHeight;n_$u=n_$N.width*n_$J,n_$e=n_$N.height*n_$M,n_$C+=n_$N.offsetX*n_$J,n_$a+=n_$N.offsetY*n_$M,this._one[0]=n_$N,this._one[1]=n_$C,this._one[2]=n_$a,this._one[3]=n_$u,this._one[4]=n_$e,this._repaint()}else this.clear(),n_$N&&this.drawTexture(n_$N,n_$C,n_$a,n_$u,n_$e)},n_$N.drawTextures=function(n_$N,n_$C){n_$N&&this._saveToCmd(n_$i._context._drawTextures,[n_$N,n_$C])},n_$N.fillTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){if(void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J="repeat"),n_$N){var n_$n=[n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M||n_$E.EMPTY,{}];n_$N.loaded||n_$N.once("loaded",this,this._textureLoaded,[n_$N,n_$n]),this._saveToCmd(n_$i._context._fillTexture,n_$n)}},n_$N._textureLoaded=function(n_$N,n_$C){n_$C[3]=n_$C[3]||n_$N.width,n_$C[4]=n_$C[4]||n_$N.height,this._repaint()},n_$N.fillCircle=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$a.bitmap.enableMerageInAtlas=!1;var n_$n=new Float32Array(2*(n_$M+1)),n_$V=new Float32Array(2*(n_$M+1)),n_$A=new Uint16Array(3*n_$M),n_$P=2*Math.PI/n_$M,n_$$=0;n_$n[0]=n_$u,n_$n[1]=n_$e,n_$V[0]=n_$u/n_$a.width,n_$V[1]=n_$e/n_$a.height;for(var n_$O=2,n_$G=0;n_$G<n_$M;n_$G++){var n_$z=n_$J*Math.cos(n_$$)+n_$u,n_$f=n_$J*Math.sin(n_$$)+n_$e;n_$n[n_$O]=n_$z,n_$n[n_$O+1]=n_$f,n_$V[n_$O]=n_$z/n_$a.width,n_$V[n_$O+1]=n_$f/n_$a.height,n_$$+=n_$P,n_$O+=2}for(n_$G=n_$O=0;n_$G<n_$M;n_$G++)n_$A[n_$O++]=0,n_$A[n_$O++]=n_$G+1,n_$A[n_$O++]=n_$M+1<=n_$G+2?1:n_$G+2;this.drawTriangles(n_$a,n_$N,n_$C,n_$n,n_$V,n_$A)},n_$N.drawTriangles=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){void 0===n_$n&&(n_$n=1),this._saveToCmd(n_$i._context.drawTriangles,[n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A])},n_$N._saveToCmd=function(n_$N,n_$C){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=n_$C,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(n_$C)),n_$C.callee=n_$N,this._repaint(),n_$C},n_$N.clipRect=function(n_$N,n_$C,n_$a,n_$u){this._saveToCmd(n_$i._context._clipRect,[n_$N,n_$C,n_$a,n_$u])},n_$N.fillText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){void 0===n_$M&&(n_$M=0),this._saveToCmd(n_$i._context._fillText,[n_$N,n_$C,n_$a,n_$u||n_$G.defaultFont,n_$e,n_$J])},n_$N.fillBorderText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){this._saveToCmd(n_$i._context._fillBorderText,[n_$N,n_$C,n_$a,n_$u||n_$G.defaultFont,n_$e,n_$J,n_$M,n_$n])},n_$N.strokeText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._saveToCmd(n_$i._context._strokeText,[n_$N,n_$C,n_$a,n_$u||n_$G.defaultFont,n_$e,n_$J,n_$M])},n_$N.alpha=function(n_$N){n_$N=n_$N<0?0:1<n_$N?1:n_$N,this._saveToCmd(n_$i._context._alpha,[n_$N])},n_$N.setAlpha=function(n_$N){n_$N=n_$N<0?0:1<n_$N?1:n_$N,this._saveToCmd(n_$i._context._setAlpha,[n_$N])},n_$N.transform=function(n_$N,n_$C,n_$a){void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),this._saveToCmd(n_$i._context._transform,[n_$N,n_$C,n_$a])},n_$N.rotate=function(n_$N,n_$C,n_$a){void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),this._saveToCmd(n_$i._context._rotate,[n_$N,n_$C,n_$a])},n_$N.scale=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0),this._saveToCmd(n_$i._context._scale,[n_$N,n_$C,n_$a,n_$u])},n_$N.translate=function(n_$N,n_$C){this._saveToCmd(n_$i._context._translate,[n_$N,n_$C])},n_$N.save=function(){this._saveToCmd(n_$i._context._save,[])},n_$N.restore=function(){this._saveToCmd(n_$i._context._restore,[])},n_$N.replaceText=function(n_$N){this._repaint();var n_$C=this._cmds;if(n_$C){for(var n_$a=n_$C.length-1;-1<n_$a;n_$a--)if(this._isTextCmd(n_$C[n_$a].callee))return n_$C[n_$a][0].toUpperCase?n_$C[n_$a][0]=n_$N:n_$C[n_$a][0].setText(n_$N),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=n_$N:this._one[0].setText(n_$N),!0;return!1},n_$N._isTextCmd=function(n_$N){return n_$N===n_$i._context._fillText||n_$N===n_$i._context._fillBorderText||n_$N===n_$i._context._strokeText},n_$N.replaceTextColor=function(n_$N){this._repaint();var n_$C=this._cmds;if(n_$C)for(var n_$a=n_$C.length-1;-1<n_$a;n_$a--)this._isTextCmd(n_$C[n_$a].callee)&&(n_$C[n_$a][4]=n_$N,n_$C[n_$a][0].toUpperCase||(n_$C[n_$a][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=n_$N,this._one[0].toUpperCase||(this._one[0].changed=!0))},n_$N.loadImage=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=this;void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0);var n_$n=n_$nN.getRes(n_$N);function n_$V(n_$N){n_$N&&(n_$M.drawTexture(n_$N,n_$C,n_$a,n_$u,n_$e),null!=n_$J&&n_$J.call(n_$M._sp,n_$N))}n_$n?n_$V(n_$n):n_$c.loader.load(n_$N,n_$x.create(null,n_$V),null,"image")},n_$N._renderEmpty=function(n_$N,n_$C,n_$a,n_$u){},n_$N._renderAll=function(n_$N,n_$C,n_$a,n_$u){for(var n_$e,n_$J=this._cmds,n_$M=0,n_$n=n_$J.length;n_$M<n_$n;n_$M++)(n_$e=n_$J[n_$M]).callee.call(n_$C,n_$a,n_$u,n_$e)},n_$N._renderOne=function(n_$N,n_$C,n_$a,n_$u){this._one.callee.call(n_$C,n_$a,n_$u,this._one)},n_$N._renderOneImg=function(n_$N,n_$C,n_$a,n_$u){this._one.callee.call(n_$C,n_$a,n_$u,this._one),2305!==n_$N._renderType&&(n_$N._renderType|=1)},n_$N.drawLine=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$J&&(n_$J=1);var n_$M=0;n_$i.isWebGL&&(n_$M=n_$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(n_$M));var n_$n=n_$J%2==0?0:.5,n_$V=[n_$N+n_$n,n_$C+n_$n,n_$a+n_$n,n_$u+n_$n,n_$e,n_$J,n_$M];this._saveToCmd(n_$i._context._drawLine,n_$V)},n_$N.drawLines=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=1);var n_$J=0;if(n_$a&&!(n_$a.length<4)){n_$i.isWebGL&&(n_$J=n_$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(n_$J));var n_$M=n_$e%2==0?0:.5,n_$n=[n_$N+n_$M,n_$C+n_$M,n_$a,n_$u,n_$e,n_$J];this._saveToCmd(n_$i._context._drawLines,n_$n)}},n_$N.drawCurves=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=1);var n_$J=[n_$N,n_$C,n_$a,n_$u,n_$e];this._saveToCmd(n_$i._context._drawCurves,n_$J)},n_$N.drawRect=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){void 0===n_$M&&(n_$M=1);var n_$n=n_$J?n_$M/2:0,n_$V=n_$J?n_$M:0,n_$A=[n_$N+n_$n,n_$C+n_$n,n_$a-n_$V,n_$u-n_$V,n_$e,n_$J,n_$M];this._saveToCmd(n_$i._context._drawRect,n_$A)},n_$N.drawCircle=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$J&&(n_$J=1);var n_$M=n_$e?n_$J/2:0,n_$n=0;n_$i.isWebGL&&(n_$n=n_$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(n_$n));var n_$V=[n_$N,n_$C,n_$a-n_$M,n_$u,n_$e,n_$J,n_$n];this._saveToCmd(n_$i._context._drawCircle,n_$V)},n_$N.drawPie=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){void 0===n_$n&&(n_$n=1);var n_$V=n_$M?n_$n/2:0,n_$A=n_$M?n_$n:0,n_$P=0;n_$i.isWebGL&&(n_$P=n_$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(n_$P));var n_$$=[n_$N+n_$V,n_$C+n_$V,n_$a-n_$A,n_$u,n_$e,n_$J,n_$M,n_$n,n_$P];n_$$[3]=n_$I.toRadian(n_$u),n_$$[4]=n_$I.toRadian(n_$e),this._saveToCmd(n_$i._context._drawPie,n_$$)},n_$N.drawPoly=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$J&&(n_$J=1);var n_$M=0,n_$n=!1;n_$i.isWebGL&&(n_$M=n_$Z.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(n_$M),n_$n=!(6<n_$a.length));var n_$V=n_$e?n_$J%2==0?0:.5:0,n_$A=[n_$N+n_$V,n_$C+n_$V,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n];this._saveToCmd(n_$i._context._drawPoly,n_$A)},n_$N.drawPath=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=[n_$N,n_$C,n_$a,n_$u,n_$e];this._saveToCmd(n_$i._context._drawPath,n_$J)},n_$z(0,n_$N,"cmds",function(){return this._cmds},function(n_$N){this._sp&&(this._sp._renderType|=512),this._cmds=n_$N,this._render=this._renderAll,this._repaint()}),n_$$.__init__=function(){if(n_$i.isConchNode){for(var n_$N=laya.display.Graphics.prototype,n_$C=n_$R.window.ConchGraphics.prototype,n_$a=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],n_$u=0,n_$e=n_$a.length;n_$u<=n_$e;n_$u++){var n_$J=n_$a[n_$u];n_$N[n_$J]=n_$C[n_$J]}n_$N._saveToCmd=null,n_$C.drawImageS&&(n_$N.drawTextures=function(n_$N,n_$C){if(n_$N&&n_$N.loaded&&n_$N.bitmap&&n_$N.source){var n_$a=n_$N.uv,n_$u=n_$N.bitmap.width,n_$e=n_$N.bitmap.height;this.drawImageS(n_$N.bitmap.source,n_$a[0]*n_$u,n_$a[1]*n_$e,(n_$a[2]-n_$a[0])*n_$u,(n_$a[5]-n_$a[3])*n_$e,n_$N.offsetX,n_$N.offsetY,n_$N.width,n_$N.height,n_$C)}}),n_$N.drawTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){if(void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),void 0===n_$M&&(n_$M=1),n_$N)if(n_$N.loaded){if(n_$N.loaded&&n_$N.bitmap&&n_$N.source&&(n_$u||(n_$u=n_$N.sourceWidth),n_$e||(n_$e=n_$N.sourceHeight),n_$M=n_$M<0?0:1<n_$M?1:n_$M,n_$u=n_$u-n_$N.sourceWidth+n_$N.width,n_$e=n_$e-n_$N.sourceHeight+n_$N.height,!(n_$u<=0||n_$e<=0))){n_$C+=n_$N.offsetX,n_$a+=n_$N.offsetY;var n_$n=n_$N.uv,n_$V=n_$N.bitmap.width,n_$A=n_$N.bitmap.height;n_$n[4]<n_$n[0]&&n_$n[5]<n_$n[1]?this.drawImageM(n_$N.bitmap.source,n_$n[4]*n_$V,n_$n[5]*n_$A,(n_$n[0]-n_$n[4])*n_$V,(n_$n[1]-n_$n[5])*n_$A,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M):this.drawImageM(n_$N.bitmap.source,n_$n[0]*n_$V,n_$n[1]*n_$A,(n_$n[2]-n_$n[0])*n_$V,(n_$n[5]-n_$n[3])*n_$A,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M),this._repaint()}}else n_$N.once("loaded",this,function(){this.drawTexture(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)})},n_$N.fillTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){if(void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J="repeat"),n_$N&&n_$N.loaded){var n_$n,n_$V=n_$i._context.ctx,n_$A=n_$N.bitmap.width,n_$P=n_$N.bitmap.height,n_$$=n_$N.uv;n_$n=n_$N.uv!=n_$PN.DEF_UV?n_$V.createPattern(n_$N.bitmap.source,n_$J,n_$$[0]*n_$A,n_$$[1]*n_$P,(n_$$[2]-n_$$[0])*n_$A,(n_$$[5]-n_$$[3])*n_$P):n_$V.createPattern(n_$N.bitmap.source,n_$J);var n_$O=0,n_$G=0;n_$M&&(n_$C+=n_$M.x%n_$N.width,n_$a+=n_$M.y%n_$N.height,n_$O-=n_$M.x%n_$N.width,n_$G-=n_$M.y%n_$N.height),this._fillImage(n_$n,n_$C,n_$a,n_$O,n_$G,n_$u,n_$e)}}}},n_$$._cache=[],n_$$}(),n_$a=function(){function n_$W(){this._cacheBoundsType=!1}n_$P(n_$W,"laya.display.GraphicsBounds");var n_$N=n_$W.prototype;return n_$N.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},n_$N.reset=function(){this._temp&&(this._temp.length=0)},n_$N.getBounds=function(n_$N){return void 0===n_$N&&(n_$N=!1),(!this._bounds||!this._temp||this._temp.length<1||n_$N!=this._cacheBoundsType)&&(this._bounds=n_$F._getWrapRec(this.getBoundPoints(n_$N),this._bounds)),this._cacheBoundsType=n_$N,this._bounds},n_$N.getBoundPoints=function(n_$N){return void 0===n_$N&&(n_$N=!1),(!this._temp||this._temp.length<1||n_$N!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(n_$N)),this._cacheBoundsType=n_$N,this._rstBoundPoints=n_$I.copyArray(this._rstBoundPoints,this._temp)},n_$N._getCmdPoints=function(n_$N){void 0===n_$N&&(n_$N=!1);var n_$C,n_$a,n_$u=n_$i._context,n_$e=this._graphics.cmds;if((n_$C=this._temp||(this._temp=[])).length=0,n_$e||null==this._graphics._one||(n_$W._tempCmds.length=0,n_$W._tempCmds.push(this._graphics._one),n_$e=n_$W._tempCmds),!n_$e)return n_$C;(n_$a=n_$W._tempMatrixArrays).length=0;var n_$J=n_$W._initMatrix;n_$J.identity();for(var n_$M,n_$n,n_$V=n_$W._tempMatrix,n_$A=NaN,n_$P=NaN,n_$$=NaN,n_$O=NaN,n_$G=NaN,n_$z=NaN,n_$f=0,n_$t=n_$e.length;n_$f<n_$t;n_$f++)if((n_$M=n_$e[n_$f]).callee)switch(n_$M.callee){case n_$u._save:case 7:n_$a.push(n_$J),n_$J=n_$J.clone();break;case n_$u._restore:case 8:n_$J=n_$a.pop();break;case n_$u._scale:case 5:n_$V.identity(),n_$V.translate(-n_$M[2],-n_$M[3]),n_$V.scale(n_$M[0],n_$M[1]),n_$V.translate(n_$M[2],n_$M[3]),this._switchMatrix(n_$J,n_$V);break;case n_$u._rotate:case 3:n_$V.identity(),n_$V.translate(-n_$M[1],-n_$M[2]),n_$V.rotate(n_$M[0]),n_$V.translate(n_$M[1],n_$M[2]),this._switchMatrix(n_$J,n_$V);break;case n_$u._translate:case 6:n_$V.identity(),n_$V.translate(n_$M[0],n_$M[1]),this._switchMatrix(n_$J,n_$V);break;case n_$u._transform:case 4:n_$V.identity(),n_$V.translate(-n_$M[1],-n_$M[2]),n_$V.concat(n_$M[0]),n_$V.translate(n_$M[1],n_$M[2]),this._switchMatrix(n_$J,n_$V);break;case 16:case 24:n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[0],n_$M[1],n_$M[2],n_$M[3]),n_$J);break;case 17:n_$J.copyTo(n_$V),n_$V.concat(n_$M[4]),n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[0],n_$M[1],n_$M[2],n_$M[3]),n_$V);break;case n_$u._drawTexture:n_$n=n_$M[0],n_$N?n_$M[3]&&n_$M[4]?n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1],n_$M[2],n_$M[3],n_$M[4]),n_$J):(n_$n=n_$M[0],n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1],n_$M[2],n_$n.width,n_$n.height),n_$J)):(n_$A=(n_$M[3]||n_$n.sourceWidth)/n_$n.width,n_$P=(n_$M[4]||n_$n.sourceHeight)/n_$n.height,n_$$=n_$A*n_$n.sourceWidth,n_$O=n_$P*n_$n.sourceHeight,n_$G=0<n_$n.offsetX?n_$n.offsetX:0,n_$z=0<n_$n.offsetY?n_$n.offsetY:0,n_$G*=n_$A,n_$z*=n_$P,n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1]-n_$G,n_$M[2]-n_$z,n_$$,n_$O),n_$J));break;case n_$u._fillTexture:n_$M[3]&&n_$M[4]?n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1],n_$M[2],n_$M[3],n_$M[4]),n_$J):(n_$n=n_$M[0],n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1],n_$M[2],n_$n.width,n_$n.height),n_$J));break;case n_$u._drawTextureWithTransform:var n_$g;n_$g=n_$M[5]?(n_$J.copyTo(n_$V),n_$V.concat(n_$M[5]),n_$V):n_$J,n_$N?n_$M[3]&&n_$M[4]?n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1],n_$M[2],n_$M[3],n_$M[4]),n_$g):(n_$n=n_$M[0],n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1],n_$M[2],n_$n.width,n_$n.height),n_$g)):(n_$n=n_$M[0],n_$A=(n_$M[3]||n_$n.sourceWidth)/n_$n.width,n_$P=(n_$M[4]||n_$n.sourceHeight)/n_$n.height,n_$$=n_$A*n_$n.sourceWidth,n_$O=n_$P*n_$n.sourceHeight,n_$G=0<n_$n.offsetX?n_$n.offsetX:0,n_$z=0<n_$n.offsetY?n_$n.offsetY:0,n_$G*=n_$A,n_$z*=n_$P,n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[1]-n_$G,n_$M[2]-n_$z,n_$$,n_$O),n_$g));break;case n_$u._drawRect:case 13:n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[0],n_$M[1],n_$M[2],n_$M[3]),n_$J);break;case n_$u._drawCircle:case n_$u._fillCircle:case 14:n_$W._addPointArrToRst(n_$C,n_$F._getBoundPointS(n_$M[0]-n_$M[2],n_$M[1]-n_$M[2],n_$M[2]+n_$M[2],n_$M[2]+n_$M[2]),n_$J);break;case n_$u._drawLine:case 20:n_$W._tempPoints.length=0;var n_$x;n_$x=.5*n_$M[5],n_$M[0]==n_$M[2]?n_$W._tempPoints.push(n_$M[0]+n_$x,n_$M[1],n_$M[2]+n_$x,n_$M[3],n_$M[0]-n_$x,n_$M[1],n_$M[2]-n_$x,n_$M[3]):n_$M[1]==n_$M[3]?n_$W._tempPoints.push(n_$M[0],n_$M[1]+n_$x,n_$M[2],n_$M[3]+n_$x,n_$M[0],n_$M[1]-n_$x,n_$M[2],n_$M[3]-n_$x):n_$W._tempPoints.push(n_$M[0],n_$M[1],n_$M[2],n_$M[3]),n_$W._addPointArrToRst(n_$C,n_$W._tempPoints,n_$J);break;case n_$u._drawCurves:case 22:n_$W._addPointArrToRst(n_$C,n_$v.I.getBezierPoints(n_$M[2]),n_$J,n_$M[0],n_$M[1]);break;case n_$u._drawPoly:case n_$u._drawLines:case 18:n_$W._addPointArrToRst(n_$C,n_$M[2],n_$J,n_$M[0],n_$M[1]);break;case n_$u._drawPath:case 19:n_$W._addPointArrToRst(n_$C,this._getPathPoints(n_$M[2]),n_$J,n_$M[0],n_$M[1]);break;case n_$u._drawPie:case 15:n_$W._addPointArrToRst(n_$C,this._getPiePoints(n_$M[0],n_$M[1],n_$M[2],n_$M[3],n_$M[4]),n_$J)}return 200<n_$C.length?n_$C=n_$I.copyArray(n_$C,n_$F._getWrapRec(n_$C)._getBoundPoints()):8<n_$C.length&&(n_$C=n_$X.scanPList(n_$C)),n_$C},n_$N._switchMatrix=function(n_$N,n_$C){n_$C.concat(n_$N),n_$C.copyTo(n_$N)},n_$N._getPiePoints=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$W._tempPoints;n_$W._tempPoints.length=0,n_$J.push(n_$N,n_$C);var n_$M=(n_$e-n_$u)%(2*Math.PI)/10,n_$n=NaN,n_$V=n_$u;for(n_$n=0;n_$n<=10;n_$n++)n_$J.push(n_$N+n_$a*Math.cos(n_$V),n_$C+n_$a*Math.sin(n_$V)),n_$V+=n_$M;return n_$J},n_$N._getPathPoints=function(n_$N){var n_$C,n_$a,n_$u=0,n_$e=n_$W._tempPoints;for(n_$e.length=0,n_$C=n_$N.length,n_$u=0;n_$u<n_$C;n_$u++)1<(n_$a=n_$N[n_$u]).length&&(n_$e.push(n_$a[1],n_$a[2]),3<n_$a.length&&n_$e.push(n_$a[3],n_$a[4]));return n_$e},n_$W._addPointArrToRst=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0);var n_$J,n_$M=0;for(n_$J=n_$C.length,n_$M=0;n_$M<n_$J;n_$M+=2)n_$W._addPointToRst(n_$N,n_$C[n_$M]+n_$u,n_$C[n_$M+1]+n_$e,n_$a)},n_$W._addPointToRst=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$E.TEMP;n_$e.setTo(n_$C||0,n_$a||0),n_$u.transformPoint(n_$e),n_$N.push(n_$e.x,n_$e.y)},n_$W._tempPoints=[],n_$W._tempMatrixArrays=[],n_$W._tempCmds=[],n_$V(n_$W,["_tempMatrix",function(){return this._tempMatrix=new n_$d},"_initMatrix",function(){return this._initMatrix=new n_$d}]),n_$W}(),n_$J=function(){function n_$N(){}n_$P(n_$N,"laya.events.Event");var n_$C=n_$N.prototype;return n_$C.setTo=function(n_$N,n_$C,n_$a){return this.type=n_$N,this.currentTarget=n_$C,this.target=n_$a,this},n_$C.stopPropagation=function(){this._stoped=!0},n_$z(0,n_$C,"stageY",function(){return n_$c.stage.mouseY}),n_$z(0,n_$C,"charCode",function(){return this.nativeEvent.charCode}),n_$z(0,n_$C,"touches",function(){var n_$N=this.nativeEvent.touches;if(n_$N)for(var n_$C=n_$c.stage,n_$a=0,n_$u=n_$N.length;n_$a<n_$u;n_$a++){var n_$e=n_$N[n_$a],n_$J=n_$E.TEMP;n_$J.setTo(n_$e.clientX,n_$e.clientY),n_$C._canvasTransform.invertTransformPoint(n_$J),n_$C.transform.invertTransformPoint(n_$J),n_$e.stageX=n_$J.x,n_$e.stageY=n_$J.y}return n_$N}),n_$z(0,n_$C,"keyLocation",function(){return this.nativeEvent.keyLocation}),n_$z(0,n_$C,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),n_$z(0,n_$C,"altKey",function(){return this.nativeEvent.altKey}),n_$z(0,n_$C,"shiftKey",function(){return this.nativeEvent.shiftKey}),n_$z(0,n_$C,"stageX",function(){return n_$c.stage.mouseX}),n_$N.EMPTY=new n_$N,n_$N.MOUSE_DOWN="mousedown",n_$N.MOUSE_UP="mouseup",n_$N.CLICK="click",n_$N.RIGHT_MOUSE_DOWN="rightmousedown",n_$N.RIGHT_MOUSE_UP="rightmouseup",n_$N.RIGHT_CLICK="rightclick",n_$N.MOUSE_MOVE="mousemove",n_$N.MOUSE_OVER="mouseover",n_$N.MOUSE_OUT="mouseout",n_$N.MOUSE_WHEEL="mousewheel",n_$N.ROLL_OVER="mouseover",n_$N.ROLL_OUT="mouseout",n_$N.DOUBLE_CLICK="doubleclick",n_$N.CHANGE="change",n_$N.CHANGED="changed",n_$N.RESIZE="resize",n_$N.ADDED="added",n_$N.REMOVED="removed",n_$N.DISPLAY="display",n_$N.UNDISPLAY="undisplay",n_$N.ERROR="error",n_$N.COMPLETE="complete",n_$N.LOADED="loaded",n_$N.INITED="inited",n_$N.PROGRESS="progress",n_$N.INPUT="input",n_$N.RENDER="render",n_$N.OPEN="open",n_$N.MESSAGE="message",n_$N.CLOSE="close",n_$N.KEY_DOWN="keydown",n_$N.KEY_PRESS="keypress",n_$N.KEY_UP="keyup",n_$N.FRAME="enterframe",n_$N.DRAG_START="dragstart",n_$N.DRAG_MOVE="dragmove",n_$N.DRAG_END="dragend",n_$N.ENTER="enter",n_$N.SELECT="select",n_$N.BLUR="blur",n_$N.FOCUS="focus",n_$N.VISIBILITY_CHANGE="visibilitychange",n_$N.FOCUS_CHANGE="focuschange",n_$N.PLAYED="played",n_$N.PAUSED="paused",n_$N.STOPPED="stopped",n_$N.START="start",n_$N.END="end",n_$N.ENABLE_CHANGED="enablechanged",n_$N.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",n_$N.COMPONENT_ADDED="componentadded",n_$N.COMPONENT_REMOVED="componentremoved",n_$N.LAYER_CHANGED="layerchanged",n_$N.HIERARCHY_LOADED="hierarchyloaded",n_$N.RECOVERED="recovered",n_$N.RELEASED="released",n_$N.LINK="link",n_$N.LABEL="label",n_$N.FULL_SCREEN_CHANGE="fullscreenchange",n_$N.DEVICE_LOST="devicelost",n_$N.MESH_CHANGED="meshchanged",n_$N.MATERIAL_CHANGED="materialchanged",n_$N.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",n_$N.ANIMATION_CHANGED="animationchanged",n_$N.TRIGGER_ENTER="triggerenter",n_$N.TRIGGER_STAY="triggerstay",n_$N.TRIGGER_EXIT="triggerexit",n_$N.TRAIL_FILTER_CHANGE="trailfilterchange",n_$N.DOMINO_FILTER_CHANGE="dominofilterchange",n_$N}(),n_$$=(function(){function n_$N(){}n_$P(n_$N,"laya.events.Keyboard"),n_$N.NUMBER_0=48,n_$N.NUMBER_1=49,n_$N.NUMBER_2=50,n_$N.NUMBER_3=51,n_$N.NUMBER_4=52,n_$N.NUMBER_5=53,n_$N.NUMBER_6=54,n_$N.NUMBER_7=55,n_$N.NUMBER_8=56,n_$N.NUMBER_9=57,n_$N.A=65,n_$N.B=66,n_$N.C=67,n_$N.D=68,n_$N.E=69,n_$N.F=70,n_$N.G=71,n_$N.H=72,n_$N.I=73,n_$N.J=74,n_$N.K=75,n_$N.L=76,n_$N.M=77,n_$N.N=78,n_$N.O=79,n_$N.P=80,n_$N.Q=81,n_$N.R=82,n_$N.S=83,n_$N.T=84,n_$N.U=85,n_$N.V=86,n_$N.W=87,n_$N.X=88,n_$N.Y=89,n_$N.Z=90,n_$N.F1=112,n_$N.F2=113,n_$N.F3=114,n_$N.F4=115,n_$N.F5=116,n_$N.F6=117,n_$N.F7=118,n_$N.F8=119,n_$N.F9=120,n_$N.F10=121,n_$N.F11=122,n_$N.F12=123,n_$N.F13=124,n_$N.F14=125,n_$N.F15=126,n_$N.NUMPAD=21,n_$N.NUMPAD_0=96,n_$N.NUMPAD_1=97,n_$N.NUMPAD_2=98,n_$N.NUMPAD_3=99,n_$N.NUMPAD_4=100,n_$N.NUMPAD_5=101,n_$N.NUMPAD_6=102,n_$N.NUMPAD_7=103,n_$N.NUMPAD_8=104,n_$N.NUMPAD_9=105,n_$N.NUMPAD_ADD=107,n_$N.NUMPAD_DECIMAL=110,n_$N.NUMPAD_DIVIDE=111,n_$N.NUMPAD_ENTER=108,n_$N.NUMPAD_MULTIPLY=106,n_$N.NUMPAD_SUBTRACT=109,n_$N.SEMICOLON=186,n_$N.EQUAL=187,n_$N.COMMA=188,n_$N.MINUS=189,n_$N.PERIOD=190,n_$N.SLASH=191,n_$N.BACKQUOTE=192,n_$N.LEFTBRACKET=219,n_$N.BACKSLASH=220,n_$N.RIGHTBRACKET=221,n_$N.QUOTE=222,n_$N.ALTERNATE=18,n_$N.BACKSPACE=8,n_$N.CAPS_LOCK=20,n_$N.COMMAND=15,n_$N.CONTROL=17,n_$N.DELETE=46,n_$N.ENTER=13,n_$N.ESCAPE=27,n_$N.PAGE_UP=33,n_$N.PAGE_DOWN=34,n_$N.END=35,n_$N.HOME=36,n_$N.LEFT=37,n_$N.UP=38,n_$N.RIGHT=39,n_$N.DOWN=40,n_$N.SHIFT=16,n_$N.SPACE=32,n_$N.TAB=9,n_$N.INSERT=45}(),function(){function n_$e(){}return n_$P(n_$e,"laya.events.KeyBoardManager"),n_$e.__init__=function(){n_$e._addEvent("keydown"),n_$e._addEvent("keypress"),n_$e._addEvent("keyup")},n_$e._addEvent=function(n_$C){n_$R.document.addEventListener(n_$C,function(n_$N){laya.events.KeyBoardManager._dispatch(n_$N,n_$C)},!0)},n_$e._dispatch=function(n_$N,n_$C){if(n_$e.enabled){n_$e._event._stoped=!1,n_$e._event.nativeEvent=n_$N,n_$e._event.keyCode=n_$N.keyCode||n_$N.which||n_$N.charCode,"keydown"===n_$C?n_$e._pressKeys[n_$e._event.keyCode]=!0:"keyup"===n_$C&&(n_$e._pressKeys[n_$e._event.keyCode]=null);for(var n_$a=n_$c.stage.focus&&null!=n_$c.stage.focus.event&&n_$c.stage.focus.displayedInStage?n_$c.stage.focus:n_$c.stage,n_$u=n_$a;n_$u;)n_$u.event(n_$C,n_$e._event.setTo(n_$C,n_$u,n_$a)),n_$u=n_$u.parent}},n_$e.hasKeyDown=function(n_$N){return n_$e._pressKeys[n_$N]},n_$e._pressKeys={},n_$e.enabled=!0,n_$V(n_$e,["_event",function(){return this._event=new n_$J}]),n_$e}()),n_$f=(function(){function n_$N(){}n_$P(n_$N,"laya.events.KeyLocation"),n_$N.STANDARD=0,n_$N.LEFT=1,n_$N.RIGHT=2,n_$N.NUM_PAD=3}(),function(){function n_$A(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=n_$R.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new n_$J,this._matrix=new n_$d,this._point=new n_$E,this._rect=new n_$F,this._prePoint=new n_$E,this._curTouchID=NaN}n_$P(n_$A,"laya.events.MouseManager");var n_$N=n_$A.prototype;return n_$N.__init__=function(n_$N,n_$C){var n_$a=this;this._stage=n_$N;var n_$u=this,n_$e=this._eventList;n_$C.oncontextmenu=function(n_$N){if(n_$A.enabled)return!1},n_$C.addEventListener("mousedown",function(n_$N){n_$A.enabled&&(n_$R.onIE||n_$N.preventDefault(),n_$e.push(n_$N),n_$u.mouseDownTime=n_$R.now())}),n_$C.addEventListener("mouseup",function(n_$N){n_$A.enabled&&(n_$N.preventDefault(),n_$e.push(n_$N),n_$u.mouseDownTime=-n_$R.now())},!0),n_$C.addEventListener("mousemove",function(n_$N){if(n_$A.enabled){n_$N.preventDefault();var n_$C=n_$R.now();if(n_$C-n_$u._lastMoveTimer<10)return;n_$u._lastMoveTimer=n_$C,n_$e.push(n_$N)}},!0),n_$C.addEventListener("mouseout",function(n_$N){n_$A.enabled&&n_$e.push(n_$N)}),n_$C.addEventListener("mouseover",function(n_$N){n_$A.enabled&&n_$e.push(n_$N)}),n_$C.addEventListener("touchstart",function(n_$N){n_$A.enabled&&(n_$e.push(n_$N),n_$A._isFirstTouch||n_$XN.isInputting||n_$N.preventDefault(),n_$u.mouseDownTime=n_$R.now())}),n_$C.addEventListener("touchend",function(n_$N){n_$A.enabled?(n_$A._isFirstTouch||n_$XN.isInputting||n_$N.preventDefault(),n_$A._isFirstTouch=!1,n_$e.push(n_$N),n_$u.mouseDownTime=-n_$R.now()):n_$a._curTouchID=NaN},!0),n_$C.addEventListener("touchmove",function(n_$N){n_$A.enabled&&(n_$N.preventDefault(),n_$e.push(n_$N))},!0),n_$C.addEventListener("touchcancel",function(n_$N){n_$A.enabled?(n_$N.preventDefault(),n_$e.push(n_$N)):n_$a._curTouchID=NaN},!0),n_$C.addEventListener("mousewheel",function(n_$N){n_$A.enabled&&n_$e.push(n_$N)}),n_$C.addEventListener("DOMMouseScroll",function(n_$N){n_$A.enabled&&n_$e.push(n_$N)})},n_$N.initEvent=function(n_$N,n_$C){var n_$a;this._event._stoped=!1,this._event.nativeEvent=n_$C||n_$N,this._target=null,this._point.setTo(n_$N.pageX||n_$N.clientX,n_$N.pageY||n_$N.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=n_$N.identifier||0,this._tTouchID=this._event.touchId,(n_$a=n_$t.I._event)._stoped=!1,n_$a.nativeEvent=this._event.nativeEvent,n_$a.touchId=this._event.touchId},n_$N.checkMouseWheel=function(n_$N){this._event.delta=n_$N.wheelDelta?.025*n_$N.wheelDelta:-n_$N.detail;for(var n_$C=n_$t.I.getLastOvers(),n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++){var n_$e=n_$C[n_$a];n_$e.event("mousewheel",this._event.setTo("mousewheel",n_$e,this._target))}},n_$N.onMouseMove=function(n_$N){n_$t.I.onMouseMove(n_$N,this._tTouchID)},n_$N.onMouseDown=function(n_$N){if(n_$XN.isInputting&&n_$c.stage.focus&&n_$c.stage.focus.focus&&!n_$c.stage.focus.contains(this._target)){var n_$C=n_$c.stage.focus._tf||n_$c.stage.focus,n_$a=n_$N._tf||n_$N;n_$a instanceof laya.display.Input&&n_$a.multiline==n_$C.multiline?n_$C._focusOut():n_$C.focus=!1}n_$t.I.onMouseDown(n_$N,this._tTouchID,this._isLeftMouse)},n_$N.onMouseUp=function(n_$N){n_$t.I.onMouseUp(n_$N,this._tTouchID,this._isLeftMouse)},n_$N.check=function(n_$N,n_$C,n_$a,n_$u){this._point.setTo(n_$C,n_$a),n_$N.fromParentPoint(this._point),n_$C=this._point.x,n_$a=this._point.y;var n_$e=n_$N.scrollRect;if(n_$e&&(this._rect.setTo(n_$e.x,n_$e.y,n_$e.width,n_$e.height),!this._rect.contains(n_$C,n_$a)))return!1;if(!this.disableMouseEvent){if(n_$N.hitTestPrior&&!n_$N.mouseThrough&&!this.hitTest(n_$N,n_$C,n_$a))return!1;for(var n_$J=n_$N._childs.length-1;-1<n_$J;n_$J--){var n_$M=n_$N._childs[n_$J];if(!n_$M.destroyed&&n_$M.mouseEnabled&&n_$M.visible&&this.check(n_$M,n_$C,n_$a,n_$u))return!0}}var n_$n=!(!n_$N.hitTestPrior||n_$N.mouseThrough||this.disableMouseEvent)||this.hitTest(n_$N,n_$C,n_$a);return n_$n?(this._target=n_$N,n_$u.call(this,n_$N)):n_$u===this.onMouseUp&&n_$N===this._stage&&(this._target=this._stage,n_$u.call(this,this._target)),n_$n},n_$N.hitTest=function(n_$N,n_$C,n_$a){var n_$u=!1;if(n_$N.scrollRect&&(n_$C-=n_$N.scrollRect.x,n_$a-=n_$N.scrollRect.y),n_$N.hitArea instanceof laya.utils.HitArea)return n_$N.hitArea.isHit(n_$C,n_$a);if(0<n_$N.width&&0<n_$N.height||n_$N.mouseThrough||n_$N.hitArea)if(n_$N.mouseThrough)n_$u=n_$N.getGraphicBounds().contains(n_$C,n_$a);else{var n_$e=this._rect;n_$N.hitArea?n_$e=n_$N.hitArea:n_$e.setTo(0,0,n_$N.width,n_$N.height),n_$u=n_$e.contains(n_$C,n_$a)}return n_$u},n_$N.runEvent=function(){var n_$N=this._eventList.length;if(n_$N){this.mouseEventTime=n_$R.now();var n_$C,n_$a=0,n_$u=0,n_$e=0;try{for(;n_$a<n_$N;){var n_$J=this._eventList[n_$a];switch("mousemove"!==n_$J.type&&(this._prePoint.x=this._prePoint.y=-1e6),n_$J.type){case"mousedown":this._touchIDs[0]=this._id++,n_$A._isTouchRespond?n_$A._isTouchRespond=!1:(this._isLeftMouse=0===n_$J.button,this.initEvent(n_$J),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===n_$J.button,this.initEvent(n_$J),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-n_$J.clientX)+Math.abs(this._prePoint.y-n_$J.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=n_$J.clientX,this._prePoint.y=n_$J.clientY,this.initEvent(n_$J),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":n_$A._isTouchRespond=!0,this._isLeftMouse=!0;var n_$M=n_$J.changedTouches;for(n_$u=0,n_$e=n_$M.length;n_$u<n_$e;n_$u++)n_$C=n_$M[n_$u],(n_$A.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=n_$C.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[n_$C.identifier]=this._id++,this.initEvent(n_$C,n_$J),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":n_$A._isTouchRespond=!0,this._isLeftMouse=!0;var n_$n=n_$J.changedTouches;for(n_$u=0,n_$e=n_$n.length;n_$u<n_$e;n_$u++)if(n_$C=n_$n[n_$u],n_$A.multiTouchEnabled||n_$C.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(n_$C,n_$J);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var n_$V=n_$J.changedTouches;for(n_$u=0,n_$e=n_$V.length;n_$u<n_$e;n_$u++)n_$C=n_$V[n_$u],(n_$A.multiTouchEnabled||n_$C.identifier==this._curTouchID)&&(this.initEvent(n_$C,n_$J),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(n_$J);break;case"mouseout":n_$t.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}n_$a++}}catch(n_$N){throw this._eventList.length=0,n_$N}this._eventList.length=0}},n_$A.enabled=!0,n_$A.multiTouchEnabled=!0,n_$A._isTouchRespond=!1,n_$A._isFirstTouch=!0,n_$V(n_$A,["instance",function(){return this.instance=new n_$A}]),n_$A}()),n_$t=function(){function n_$z(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new n_$J}n_$P(n_$z,"laya.events.TouchManager");var n_$N=n_$z.prototype;return n_$N._clearTempArrs=function(){n_$z._oldArr.length=0,n_$z._newArr.length=0,n_$z._tEleArr.length=0},n_$N.getTouchFromArr=function(n_$N,n_$C){var n_$a,n_$u,n_$e=0;for(n_$a=n_$C.length,n_$e=0;n_$e<n_$a;n_$e++)if((n_$u=n_$C[n_$e]).id==n_$N)return n_$u;return null},n_$N.removeTouchFromArr=function(n_$N,n_$C){var n_$a=0;for(n_$a=n_$C.length-1;0<=n_$a;n_$a--)n_$C[n_$a].id==n_$N&&n_$C.splice(n_$a,1)},n_$N.createTouchO=function(n_$N,n_$C){var n_$a;return(n_$a=n_$m.getItem("TouchData")||{}).id=n_$C,n_$a.tar=n_$N,n_$a},n_$N.onMouseDown=function(n_$N,n_$C,n_$a){var n_$u,n_$e,n_$J,n_$M;(void 0===n_$a&&(n_$a=!1),this.enable)&&(n_$u=this.getTouchFromArr(n_$C,this.preOvers),n_$J=this.getEles(n_$N,null,n_$z._tEleArr),n_$u?n_$u.tar=n_$N:(n_$e=this.createTouchO(n_$N,n_$C),this.preOvers.push(n_$e)),n_$R.onMobile&&this.sendEvents(n_$J,"mouseover",n_$C),n_$M=n_$a?this.preDowns:this.preRightDowns,(n_$u=this.getTouchFromArr(n_$C,n_$M))?n_$u.tar=n_$N:(n_$e=this.createTouchO(n_$N,n_$C),n_$M.push(n_$e)),this.sendEvents(n_$J,n_$a?"mousedown":"rightmousedown",n_$C),this._clearTempArrs())},n_$N.sendEvents=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=0);var n_$u,n_$e,n_$J,n_$M=0;for(n_$u=n_$N.length,this._event._stoped=!1,n_$e=n_$N[0],n_$M=0;n_$M<n_$u;n_$M++){if((n_$J=n_$N[n_$M]).destroyed)return;if(n_$J.event(n_$C,this._event.setTo(n_$C,n_$J,n_$e)),this._event._stoped)break}},n_$N.getEles=function(n_$N,n_$C,n_$a){for(n_$a?n_$a.length=0:n_$a=[];n_$N&&n_$N!=n_$C;)n_$a.push(n_$N),n_$N=n_$N.parent;return n_$a},n_$N.checkMouseOutAndOverOfMove=function(n_$N,n_$C,n_$a){if(void 0===n_$a&&(n_$a=0),n_$C!=n_$N){var n_$u,n_$e,n_$J=0,n_$M=0;if(n_$C.contains(n_$N))n_$e=this.getEles(n_$N,n_$C,n_$z._tEleArr),this.sendEvents(n_$e,"mouseover",n_$a);else if(n_$N.contains(n_$C))n_$e=this.getEles(n_$C,n_$N,n_$z._tEleArr),this.sendEvents(n_$e,"mouseout",n_$a);else{var n_$n,n_$V;(n_$e=n_$z._tEleArr).length=0,n_$n=this.getEles(n_$C,null,n_$z._oldArr),n_$V=this.getEles(n_$N,null,n_$z._newArr),n_$M=n_$n.length;var n_$A=0;for(n_$J=0;n_$J<n_$M;n_$J++){if(n_$u=n_$n[n_$J],0<=(n_$A=n_$V.indexOf(n_$u))){n_$V.splice(n_$A,n_$V.length-n_$A);break}n_$e.push(n_$u)}0<n_$e.length&&this.sendEvents(n_$e,"mouseout",n_$a),0<n_$V.length&&this.sendEvents(n_$V,"mouseover",n_$a)}}},n_$N.onMouseMove=function(n_$N,n_$C){var n_$a,n_$u;this.enable&&((n_$a=this.getTouchFromArr(n_$C,this.preOvers))?(this.checkMouseOutAndOverOfMove(n_$N,n_$a.tar),n_$a.tar=n_$N,n_$u=this.getEles(n_$N,null,n_$z._tEleArr)):(n_$u=this.getEles(n_$N,null,n_$z._tEleArr),this.sendEvents(n_$u,"mouseover",n_$C),this.preOvers.push(this.createTouchO(n_$N,n_$C))),this.sendEvents(n_$u,"mousemove",n_$C),this._clearTempArrs())},n_$N.getLastOvers=function(){return(n_$z._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,n_$z._tEleArr):(n_$z._tEleArr.push(n_$c.stage),n_$z._tEleArr)},n_$N.stageMouseOut=function(){var n_$N;n_$N=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(n_$N,"mouseout",0)},n_$N.onMouseUp=function(n_$N,n_$C,n_$a){if(void 0===n_$a&&(n_$a=!1),this.enable){var n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A=0,n_$P=0,n_$$=n_$R.onMobile;if(n_$e=this.getEles(n_$N,null,n_$z._tEleArr),this.sendEvents(n_$e,n_$a?"mouseup":"rightmouseup",n_$C),n_$V=n_$a?this.preDowns:this.preRightDowns,n_$u=this.getTouchFromArr(n_$C,n_$V)){var n_$O,n_$G=n_$R.now();if(n_$O=n_$G-this._lastClickTime<300,this._lastClickTime=n_$G,n_$N==n_$u.tar)n_$n=n_$e;else for(n_$J=this.getEles(n_$u.tar,null,n_$z._oldArr),(n_$n=n_$z._newArr).length=0,n_$P=n_$J.length,n_$A=0;n_$A<n_$P;n_$A++)n_$M=n_$J[n_$A],0<=n_$e.indexOf(n_$M)&&n_$n.push(n_$M);0<n_$n.length&&this.sendEvents(n_$n,n_$a?"click":"rightclick",n_$C),n_$a&&n_$O&&this.sendEvents(n_$n,"doubleclick",n_$C),this.removeTouchFromArr(n_$C,n_$V),n_$u.tar=null,n_$m.recover("TouchData",n_$u)}else;(n_$u=this.getTouchFromArr(n_$C,this.preOvers))&&n_$$&&((n_$n=this.getEles(n_$u.tar,null,n_$n))&&0<n_$n.length&&this.sendEvents(n_$n,"mouseout",n_$C),this.removeTouchFromArr(n_$C,this.preOvers),n_$u.tar=null,n_$m.recover("TouchData",n_$u)),this._clearTempArrs()}},n_$z._oldArr=[],n_$z._newArr=[],n_$z._tEleArr=[],n_$V(n_$z,["I",function(){return this.I=new n_$z}]),n_$z}(),n_$g=function(){function n_$N(){this._action=null}n_$P(n_$N,"laya.filters.Filter");var n_$C=n_$N.prototype;return n_$c.imps(n_$C,{"laya.filters.IFilter":!0}),n_$C.callNative=function(n_$N){},n_$z(0,n_$C,"type",function(){return-1}),n_$z(0,n_$C,"action",function(){return this._action}),n_$N.BLUR=16,n_$N.COLOR=32,n_$N.GLOW=8,n_$N._filterStart=null,n_$N._filterEnd=null,n_$N._EndTarget=null,n_$N._recycleScope=null,n_$N._filter=null,n_$N._useSrc=null,n_$N._endSrc=null,n_$N._useOut=null,n_$N._endOut=null,n_$N}(),n_$W=function(){function n_$N(){this.data=null}n_$P(n_$N,"laya.filters.ColorFilterAction");var n_$C=n_$N.prototype;return n_$c.imps(n_$C,{"laya.filters.IFilterAction":!0}),n_$C.apply=function(n_$N){var n_$C=n_$N.ctx.ctx,n_$a=n_$N.ctx.ctx.canvas;if(0==n_$a.width||0==n_$a.height)return n_$a;for(var n_$u,n_$e=n_$C.getImageData(0,0,n_$a.width,n_$a.height),n_$J=n_$e.data,n_$M=0,n_$n=n_$J.length;n_$M<n_$n;n_$M+=4)n_$u=this.getColor(n_$J[n_$M],n_$J[n_$M+1],n_$J[n_$M+2],n_$J[n_$M+3]),0!=n_$J[n_$M+3]&&(n_$J[n_$M]=n_$u[0],n_$J[n_$M+1]=n_$u[1],n_$J[n_$M+2]=n_$u[2],n_$J[n_$M+3]=n_$u[3]);return n_$C.putImageData(n_$e,0,0),n_$N},n_$C.getColor=function(n_$N,n_$C,n_$a,n_$u){var n_$e=[];if(this.data._mat&&this.data._alpha){var n_$J=this.data._mat,n_$M=this.data._alpha;n_$e[0]=n_$J[0]*n_$N+n_$J[1]*n_$C+n_$J[2]*n_$a+n_$J[3]*n_$u+n_$M[0],n_$e[1]=n_$J[4]*n_$N+n_$J[5]*n_$C+n_$J[6]*n_$a+n_$J[7]*n_$u+n_$M[1],n_$e[2]=n_$J[8]*n_$N+n_$J[9]*n_$C+n_$J[10]*n_$a+n_$J[11]*n_$u+n_$M[2],n_$e[3]=n_$J[12]*n_$N+n_$J[13]*n_$C+n_$J[14]*n_$a+n_$J[15]*n_$u+n_$M[3]}return n_$e},n_$N}(),n_$v=(function(){function n_$N(){}n_$P(n_$N,"laya.maths.Arith"),n_$N.formatR=function(n_$N){return n_$N>Math.PI&&(n_$N-=2*Math.PI),n_$N<-Math.PI&&(n_$N+=2*Math.PI),n_$N},n_$N.isPOT=function(n_$N,n_$C){return 0<n_$N&&0==(n_$N&n_$N-1)&&0<n_$C&&0==(n_$C&n_$C-1)},n_$N.setMatToArray=function(n_$N,n_$C){n_$N.a,n_$N.b,n_$N.c,n_$N.d,n_$N.tx,n_$N.ty,n_$C[0]=n_$N.a,n_$C[1]=n_$N.b,n_$C[4]=n_$N.c,n_$C[5]=n_$N.d,n_$C[12]=n_$N.tx,n_$C[13]=n_$N.ty}}(),function(){function n_$N(){this._controlPoints=[new n_$E,new n_$E,new n_$E],this._calFun=this.getPoint2}n_$P(n_$N,"laya.maths.Bezier");var n_$C=n_$N.prototype;return n_$C._switchPoint=function(n_$N,n_$C){var n_$a=this._controlPoints.shift();n_$a.setTo(n_$N,n_$C),this._controlPoints.push(n_$a)},n_$C.getPoint2=function(n_$N,n_$C){var n_$a=this._controlPoints[0],n_$u=this._controlPoints[1],n_$e=this._controlPoints[2],n_$J=Math.pow(1-n_$N,2)*n_$a.x+2*n_$N*(1-n_$N)*n_$u.x+Math.pow(n_$N,2)*n_$e.x,n_$M=Math.pow(1-n_$N,2)*n_$a.y+2*n_$N*(1-n_$N)*n_$u.y+Math.pow(n_$N,2)*n_$e.y;n_$C.push(n_$J,n_$M)},n_$C.getPoint3=function(n_$N,n_$C){var n_$a=this._controlPoints[0],n_$u=this._controlPoints[1],n_$e=this._controlPoints[2],n_$J=this._controlPoints[3],n_$M=Math.pow(1-n_$N,3)*n_$a.x+3*n_$u.x*n_$N*(1-n_$N)*(1-n_$N)+3*n_$e.x*n_$N*n_$N*(1-n_$N)+n_$J.x*Math.pow(n_$N,3),n_$n=Math.pow(1-n_$N,3)*n_$a.y+3*n_$u.y*n_$N*(1-n_$N)*(1-n_$N)+3*n_$e.y*n_$N*n_$N*(1-n_$N)+n_$J.y*Math.pow(n_$N,3);n_$C.push(n_$M,n_$n)},n_$C.insertPoints=function(n_$N,n_$C){var n_$a,n_$u=NaN;for(n_$a=1/(n_$N=0<n_$N?n_$N:5),n_$u=0;n_$u<=1;n_$u+=n_$a)this._calFun(n_$u,n_$C)},n_$C.getBezierPoints=function(n_$N,n_$C,n_$a){void 0===n_$C&&(n_$C=5),void 0===n_$a&&(n_$a=2);var n_$u,n_$e,n_$J=0;if((n_$u=n_$N.length)<2*(n_$a+1))return[];switch(n_$e=[],n_$a){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=n_$a;)this._controlPoints.push(new n_$E);for(n_$J=0;n_$J<2*n_$a;n_$J+=2)this._switchPoint(n_$N[n_$J],n_$N[n_$J+1]);for(n_$J=2*n_$a;n_$J<n_$u;n_$J+=2)this._switchPoint(n_$N[n_$J],n_$N[n_$J+1]),n_$J/2%n_$a==0&&this.insertPoints(n_$C,n_$e);return n_$e},n_$V(n_$N,["I",function(){return this.I=new n_$N}]),n_$N}()),n_$X=function(){function n_$A(){}return n_$P(n_$A,"laya.maths.GrahamScan"),n_$A.multiply=function(n_$N,n_$C,n_$a){return(n_$N.x-n_$a.x)*(n_$C.y-n_$a.y)-(n_$C.x-n_$a.x)*(n_$N.y-n_$a.y)},n_$A.dis=function(n_$N,n_$C){return(n_$N.x-n_$C.x)*(n_$N.x-n_$C.x)+(n_$N.y-n_$C.y)*(n_$N.y-n_$C.y)},n_$A._getPoints=function(n_$N,n_$C,n_$a){for(void 0===n_$C&&(n_$C=!1),n_$A._mPointList||(n_$A._mPointList=[]);n_$A._mPointList.length<n_$N;)n_$A._mPointList.push(new n_$E);return n_$a||(n_$a=[]),n_$a.length=0,n_$C?n_$A.getFrom(n_$a,n_$A._mPointList,n_$N):n_$A.getFromR(n_$a,n_$A._mPointList,n_$N),n_$a},n_$A.getFrom=function(n_$N,n_$C,n_$a){var n_$u=0;for(n_$u=0;n_$u<n_$a;n_$u++)n_$N.push(n_$C[n_$u]);return n_$N},n_$A.getFromR=function(n_$N,n_$C,n_$a){var n_$u=0;for(n_$u=0;n_$u<n_$a;n_$u++)n_$N.push(n_$C.pop());return n_$N},n_$A.pListToPointList=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!1);var n_$a=0,n_$u=n_$N.length/2,n_$e=n_$A._getPoints(n_$u,n_$C,n_$A._tempPointList);for(n_$a=0;n_$a<n_$u;n_$a++)n_$e[n_$a].setTo(n_$N[n_$a+n_$a],n_$N[n_$a+n_$a+1]);return n_$e},n_$A.pointListToPlist=function(n_$N){var n_$C,n_$a=0,n_$u=n_$N.length,n_$e=n_$A._temPList;for(n_$a=n_$e.length=0;n_$a<n_$u;n_$a++)n_$C=n_$N[n_$a],n_$e.push(n_$C.x,n_$C.y);return n_$e},n_$A.scanPList=function(n_$N){return n_$I.copyArray(n_$N,n_$A.pointListToPlist(n_$A.scan(n_$A.pListToPointList(n_$N,!0))))},n_$A.scan=function(n_$N){var n_$C,n_$a,n_$u,n_$e=0,n_$J=0,n_$M=0,n_$n=n_$N.length,n_$V={};for((n_$a=n_$A._temArr).length=0,n_$e=(n_$n=n_$N.length)-1;0<=n_$e;n_$e--)n_$u=(n_$C=n_$N[n_$e]).x+"_"+n_$C.y,n_$V.hasOwnProperty(n_$u)||(n_$V[n_$u]=!0,n_$a.push(n_$C));for(n_$n=n_$a.length,n_$I.copyArray(n_$N,n_$a),n_$e=1;n_$e<n_$n;n_$e++)(n_$N[n_$e].y<n_$N[n_$M].y||n_$N[n_$e].y==n_$N[n_$M].y&&n_$N[n_$e].x<n_$N[n_$M].x)&&(n_$M=n_$e);for(n_$C=n_$N[0],n_$N[0]=n_$N[n_$M],n_$N[n_$M]=n_$C,n_$e=1;n_$e<n_$n-1;n_$e++){for(n_$J=(n_$M=n_$e)+1;n_$J<n_$n;n_$J++)(0<n_$A.multiply(n_$N[n_$J],n_$N[n_$M],n_$N[0])||0==n_$A.multiply(n_$N[n_$J],n_$N[n_$M],n_$N[0])&&n_$A.dis(n_$N[0],n_$N[n_$J])<n_$A.dis(n_$N[0],n_$N[n_$M]))&&(n_$M=n_$J);n_$C=n_$N[n_$e],n_$N[n_$e]=n_$N[n_$M],n_$N[n_$M]=n_$C}if((n_$a=n_$A._temArr).length=0,n_$N.length<3)return n_$I.copyArray(n_$a,n_$N);for(n_$a.push(n_$N[0],n_$N[1],n_$N[2]),n_$e=3;n_$e<n_$n;n_$e++){for(;2<=n_$a.length&&0<=n_$A.multiply(n_$N[n_$e],n_$a[n_$a.length-1],n_$a[n_$a.length-2]);)n_$a.pop();n_$N[n_$e]&&n_$a.push(n_$N[n_$e])}return n_$a},n_$A._mPointList=null,n_$A._tempPointList=[],n_$A._temPList=[],n_$A._temArr=[],n_$A}(),n_$r=function(){function n_$e(){}return n_$P(n_$e,"laya.maths.MathUtil"),n_$e.subtractVector3=function(n_$N,n_$C,n_$a){n_$a[0]=n_$N[0]-n_$C[0],n_$a[1]=n_$N[1]-n_$C[1],n_$a[2]=n_$N[2]-n_$C[2]},n_$e.lerp=function(n_$N,n_$C,n_$a){return n_$N*(1-n_$a)+n_$C*n_$a},n_$e.scaleVector3=function(n_$N,n_$C,n_$a){n_$a[0]=n_$N[0]*n_$C,n_$a[1]=n_$N[1]*n_$C,n_$a[2]=n_$N[2]*n_$C},n_$e.lerpVector3=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N[0],n_$J=n_$N[1],n_$M=n_$N[2];n_$u[0]=n_$e+n_$a*(n_$C[0]-n_$e),n_$u[1]=n_$J+n_$a*(n_$C[1]-n_$J),n_$u[2]=n_$M+n_$a*(n_$C[2]-n_$M)},n_$e.lerpVector4=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N[0],n_$J=n_$N[1],n_$M=n_$N[2],n_$n=n_$N[3];n_$u[0]=n_$e+n_$a*(n_$C[0]-n_$e),n_$u[1]=n_$J+n_$a*(n_$C[1]-n_$J),n_$u[2]=n_$M+n_$a*(n_$C[2]-n_$M),n_$u[3]=n_$n+n_$a*(n_$C[3]-n_$n)},n_$e.slerpQuaternionArray=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){var n_$n,n_$V,n_$A,n_$P,n_$$,n_$O=n_$N[n_$C+0],n_$G=n_$N[n_$C+1],n_$z=n_$N[n_$C+2],n_$f=n_$N[n_$C+3],n_$t=n_$a[n_$u+0],n_$g=n_$a[n_$u+1],n_$x=n_$a[n_$u+2],n_$W=n_$a[n_$u+3];return(n_$V=n_$O*n_$t+n_$G*n_$g+n_$z*n_$x+n_$f*n_$W)<0&&(n_$V=-n_$V,n_$t=-n_$t,n_$g=-n_$g,n_$x=-n_$x,n_$W=-n_$W),n_$$=1e-6<1-n_$V?(n_$n=Math.acos(n_$V),n_$A=Math.sin(n_$n),n_$P=Math.sin((1-n_$e)*n_$n)/n_$A,Math.sin(n_$e*n_$n)/n_$A):(n_$P=1-n_$e,n_$e),n_$J[n_$M+0]=n_$P*n_$O+n_$$*n_$t,n_$J[n_$M+1]=n_$P*n_$G+n_$$*n_$g,n_$J[n_$M+2]=n_$P*n_$z+n_$$*n_$x,n_$J[n_$M+3]=n_$P*n_$f+n_$$*n_$W,n_$J},n_$e.getRotation=function(n_$N,n_$C,n_$a,n_$u){return Math.atan2(n_$u-n_$C,n_$a-n_$N)/Math.PI*180},n_$e.sortBigFirst=function(n_$N,n_$C){return n_$N==n_$C?0:n_$N<n_$C?1:-1},n_$e.sortSmallFirst=function(n_$N,n_$C){return n_$N==n_$C?0:n_$N<n_$C?-1:1},n_$e.sortNumBigFirst=function(n_$N,n_$C){return parseFloat(n_$C)-parseFloat(n_$N)},n_$e.sortNumSmallFirst=function(n_$N,n_$C){return parseFloat(n_$N)-parseFloat(n_$C)},n_$e.sortByKey=function(n_$a,n_$N,n_$C){var n_$u;return void 0===n_$N&&(n_$N=!1),void 0===n_$C&&(n_$C=!0),n_$u=n_$N?n_$C?n_$e.sortNumBigFirst:n_$e.sortBigFirst:n_$C?n_$e.sortNumSmallFirst:n_$e.sortSmallFirst,function(n_$N,n_$C){return n_$u(n_$N[n_$a],n_$C[n_$a])}},n_$e}(),n_$d=function(){function n_$a(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this.inPool=!1,this.bTransform=!1,void 0===n_$N&&(n_$N=1),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=1),void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=0),this.a=n_$N,this.b=n_$C,this.c=n_$a,this.d=n_$u,this.tx=n_$e,this.ty=n_$J,this._checkTransform()}n_$P(n_$a,"laya.maths.Matrix");var n_$N=n_$a.prototype;return n_$N.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},n_$N._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},n_$N.setTranslate=function(n_$N,n_$C){return this.tx=n_$N,this.ty=n_$C,this},n_$N.translate=function(n_$N,n_$C){return this.tx+=n_$N,this.ty+=n_$C,this},n_$N.scale=function(n_$N,n_$C){this.a*=n_$N,this.d*=n_$C,this.c*=n_$N,this.b*=n_$C,this.tx*=n_$N,this.ty*=n_$C,this.bTransform=!0},n_$N.rotate=function(n_$N){var n_$C=Math.cos(n_$N),n_$a=Math.sin(n_$N),n_$u=this.a,n_$e=this.c,n_$J=this.tx;this.a=n_$u*n_$C-this.b*n_$a,this.b=n_$u*n_$a+this.b*n_$C,this.c=n_$e*n_$C-this.d*n_$a,this.d=n_$e*n_$a+this.d*n_$C,this.tx=n_$J*n_$C-this.ty*n_$a,this.ty=n_$J*n_$a+this.ty*n_$C,this.bTransform=!0},n_$N.skew=function(n_$N,n_$C){var n_$a=Math.tan(n_$N),n_$u=Math.tan(n_$C),n_$e=this.a,n_$J=this.b;return this.a+=n_$u*this.c,this.b+=n_$u*this.d,this.c+=n_$a*n_$e,this.d+=n_$a*n_$J,this},n_$N.invertTransformPoint=function(n_$N){var n_$C=this.a,n_$a=this.b,n_$u=this.c,n_$e=this.d,n_$J=this.tx,n_$M=n_$C*n_$e-n_$a*n_$u,n_$n=n_$e/n_$M,n_$V=-n_$a/n_$M,n_$A=-n_$u/n_$M,n_$P=n_$C/n_$M,n_$$=(n_$u*this.ty-n_$e*n_$J)/n_$M,n_$O=-(n_$C*this.ty-n_$a*n_$J)/n_$M;return n_$N.setTo(n_$n*n_$N.x+n_$A*n_$N.y+n_$$,n_$V*n_$N.x+n_$P*n_$N.y+n_$O)},n_$N.transformPoint=function(n_$N){return n_$N.setTo(this.a*n_$N.x+this.c*n_$N.y+this.tx,this.b*n_$N.x+this.d*n_$N.y+this.ty)},n_$N.transformPointN=function(n_$N){return n_$N.setTo(this.a*n_$N.x+this.c*n_$N.y,this.b*n_$N.x+this.d*n_$N.y)},n_$N.transformPointArray=function(n_$N,n_$C){for(var n_$a=n_$N.length,n_$u=0;n_$u<n_$a;n_$u+=2){var n_$e=n_$N[n_$u],n_$J=n_$N[n_$u+1];n_$C[n_$u]=this.a*n_$e+this.c*n_$J+this.tx,n_$C[n_$u+1]=this.b*n_$e+this.d*n_$J+this.ty}return n_$C},n_$N.transformPointArrayScale=function(n_$N,n_$C){for(var n_$a=n_$N.length,n_$u=0;n_$u<n_$a;n_$u+=2){var n_$e=n_$N[n_$u],n_$J=n_$N[n_$u+1];n_$C[n_$u]=this.a*n_$e+this.c*n_$J,n_$C[n_$u+1]=this.b*n_$e+this.d*n_$J}return n_$C},n_$N.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},n_$N.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},n_$N.invert=function(){var n_$N=this.a,n_$C=this.b,n_$a=this.c,n_$u=this.d,n_$e=this.tx,n_$J=n_$N*n_$u-n_$C*n_$a;return this.a=n_$u/n_$J,this.b=-n_$C/n_$J,this.c=-n_$a/n_$J,this.d=n_$N/n_$J,this.tx=(n_$a*this.ty-n_$u*n_$e)/n_$J,this.ty=-(n_$N*this.ty-n_$C*n_$e)/n_$J,this},n_$N.setTo=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){return this.a=n_$N,this.b=n_$C,this.c=n_$a,this.d=n_$u,this.tx=n_$e,this.ty=n_$J,this},n_$N.concat=function(n_$N){var n_$C=this.a,n_$a=this.c,n_$u=this.tx;return this.a=n_$C*n_$N.a+this.b*n_$N.c,this.b=n_$C*n_$N.b+this.b*n_$N.d,this.c=n_$a*n_$N.a+this.d*n_$N.c,this.d=n_$a*n_$N.b+this.d*n_$N.d,this.tx=n_$u*n_$N.a+this.ty*n_$N.c+n_$N.tx,this.ty=n_$u*n_$N.b+this.ty*n_$N.d+n_$N.ty,this},n_$N.scaleEx=function(n_$N,n_$C){var n_$a=this.a,n_$u=this.b,n_$e=this.c,n_$J=this.d;0!==n_$u||0!==n_$e?(this.a=n_$N*n_$a,this.b=n_$N*n_$u,this.c=n_$C*n_$e):(this.a=n_$N*n_$a,this.b=0*n_$J,this.c=0*n_$a),this.d=n_$C*n_$J,this.bTransform=!0},n_$N.rotateEx=function(n_$N){var n_$C=Math.cos(n_$N),n_$a=Math.sin(n_$N),n_$u=this.a,n_$e=this.b,n_$J=this.c,n_$M=this.d;0!==n_$e||0!==n_$J?(this.a=n_$C*n_$u+n_$a*n_$J,this.b=n_$C*n_$e+n_$a*n_$M,this.c=-n_$a*n_$u+n_$C*n_$J,this.d=-n_$a*n_$e+n_$C*n_$M):(this.a=n_$C*n_$u,this.b=n_$a*n_$M,this.c=-n_$a*n_$u,this.d=n_$C*n_$M),this.bTransform=!0},n_$N.clone=function(){var n_$N=n_$a.create();return n_$N.a=this.a,n_$N.b=this.b,n_$N.c=this.c,n_$N.d=this.d,n_$N.tx=this.tx,n_$N.ty=this.ty,n_$N.bTransform=this.bTransform,n_$N},n_$N.copyTo=function(n_$N){return n_$N.a=this.a,n_$N.b=this.b,n_$N.c=this.c,n_$N.d=this.d,n_$N.tx=this.tx,n_$N.ty=this.ty,n_$N.bTransform=this.bTransform,n_$N},n_$N.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},n_$N.destroy=function(){if(!this.inPool){var n_$N=n_$a._cache;this.inPool=!0,n_$N._length||(n_$N._length=0),(n_$N[n_$N._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},n_$a.mul=function(n_$N,n_$C,n_$a){var n_$u=n_$N.a,n_$e=n_$N.b,n_$J=n_$N.c,n_$M=n_$N.d,n_$n=n_$N.tx,n_$V=n_$N.ty,n_$A=n_$C.a,n_$P=n_$C.b,n_$$=n_$C.c,n_$O=n_$C.d,n_$G=n_$C.tx,n_$z=n_$C.ty;return 0!==n_$P||0!==n_$$?(n_$a.a=n_$u*n_$A+n_$e*n_$$,n_$a.b=n_$u*n_$P+n_$e*n_$O,n_$a.c=n_$J*n_$A+n_$M*n_$$,n_$a.d=n_$J*n_$P+n_$M*n_$O,n_$a.tx=n_$A*n_$n+n_$$*n_$V+n_$G,n_$a.ty=n_$P*n_$n+n_$O*n_$V+n_$z):(n_$a.a=n_$u*n_$A,n_$a.b=n_$e*n_$O,n_$a.c=n_$J*n_$A,n_$a.d=n_$M*n_$O,n_$a.tx=n_$A*n_$n+n_$G,n_$a.ty=n_$O*n_$V+n_$z),n_$a},n_$a.mul16=function(n_$N,n_$C,n_$a){var n_$u=n_$N.a,n_$e=n_$N.b,n_$J=n_$N.c,n_$M=n_$N.d,n_$n=n_$N.tx,n_$V=n_$N.ty,n_$A=n_$C.a,n_$P=n_$C.b,n_$$=n_$C.c,n_$O=n_$C.d,n_$G=n_$C.tx,n_$z=n_$C.ty;return 0!==n_$P||0!==n_$$?(n_$a[0]=n_$u*n_$A+n_$e*n_$$,n_$a[1]=n_$u*n_$P+n_$e*n_$O,n_$a[4]=n_$J*n_$A+n_$M*n_$$,n_$a[5]=n_$J*n_$P+n_$M*n_$O,n_$a[12]=n_$A*n_$n+n_$$*n_$V+n_$G,n_$a[13]=n_$P*n_$n+n_$O*n_$V+n_$z):(n_$a[0]=n_$u*n_$A,n_$a[1]=n_$e*n_$O,n_$a[4]=n_$J*n_$A,n_$a[5]=n_$M*n_$O,n_$a[12]=n_$A*n_$n+n_$G,n_$a[13]=n_$O*n_$V+n_$z),n_$a},n_$a.mulPre=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){var n_$V=n_$N.a,n_$A=n_$N.b,n_$P=n_$N.c,n_$$=n_$N.d,n_$O=n_$N.tx,n_$G=n_$N.ty;return 0!==n_$a||0!==n_$u?(n_$n.a=n_$V*n_$C+n_$A*n_$u,n_$n.b=n_$V*n_$a+n_$A*n_$e,n_$n.c=n_$P*n_$C+n_$$*n_$u,n_$n.d=n_$P*n_$a+n_$$*n_$e,n_$n.tx=n_$C*n_$O+n_$u*n_$G+n_$J,n_$n.ty=n_$a*n_$O+n_$e*n_$G+n_$M):(n_$n.a=n_$V*n_$C,n_$n.b=n_$A*n_$e,n_$n.c=n_$P*n_$C,n_$n.d=n_$$*n_$e,n_$n.tx=n_$C*n_$O+n_$J,n_$n.ty=n_$e*n_$G+n_$M),n_$n},n_$a.mulPos=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){var n_$V=n_$N.a,n_$A=n_$N.b,n_$P=n_$N.c,n_$$=n_$N.d,n_$O=n_$N.tx,n_$G=n_$N.ty;return 0!==n_$A||0!==n_$P?(n_$n.a=n_$C*n_$V+n_$a*n_$P,n_$n.b=n_$C*n_$A+n_$a*n_$$,n_$n.c=n_$u*n_$V+n_$e*n_$P,n_$n.d=n_$u*n_$A+n_$e*n_$$,n_$n.tx=n_$V*n_$J+n_$P*n_$M+n_$O,n_$n.ty=n_$A*n_$J+n_$$*n_$M+n_$G):(n_$n.a=n_$C*n_$V,n_$n.b=n_$a*n_$$,n_$n.c=n_$u*n_$V,n_$n.d=n_$e*n_$$,n_$n.tx=n_$V*n_$J+n_$O,n_$n.ty=n_$$*n_$M+n_$G),n_$n},n_$a.preMul=function(n_$N,n_$C,n_$a){var n_$u=n_$N.a,n_$e=n_$N.b,n_$J=n_$N.c,n_$M=n_$N.d,n_$n=n_$C.a,n_$V=n_$C.b,n_$A=n_$C.c,n_$P=n_$C.d,n_$$=n_$C.tx,n_$O=n_$C.ty;return n_$a.a=n_$n*n_$u,n_$a.b=n_$a.c=0,n_$a.d=n_$P*n_$M,n_$a.tx=n_$$*n_$u+n_$N.tx,n_$a.ty=n_$O*n_$M+n_$N.ty,0===n_$V&&0===n_$A&&0===n_$e&&0===n_$J||(n_$a.a+=n_$V*n_$J,n_$a.d+=n_$A*n_$e,n_$a.b+=n_$n*n_$e+n_$V*n_$M,n_$a.c+=n_$A*n_$u+n_$P*n_$J,n_$a.tx+=n_$O*n_$J,n_$a.ty+=n_$$*n_$e),n_$a},n_$a.preMulXY=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.a,n_$J=n_$N.b,n_$M=n_$N.c,n_$n=n_$N.d;return n_$u.a=n_$e,n_$u.b=n_$J,n_$u.c=n_$M,n_$u.d=n_$n,n_$u.tx=n_$C*n_$e+n_$N.tx+n_$a*n_$M,n_$u.ty=n_$a*n_$n+n_$N.ty+n_$C*n_$J,n_$u},n_$a.create=function(){var n_$N=n_$a._cache,n_$C=n_$N._length?n_$N[--n_$N._length]:new n_$a;return n_$C.inPool=!1,n_$C},n_$a.EMPTY=new n_$a,n_$a.TEMP=new n_$a,n_$a._cache=[],n_$a}(),n_$E=function(){function n_$N(n_$N,n_$C){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),this.x=n_$N,this.y=n_$C}n_$P(n_$N,"laya.maths.Point");var n_$C=n_$N.prototype;return n_$C.setTo=function(n_$N,n_$C){return this.x=n_$N,this.y=n_$C,this},n_$C.distance=function(n_$N,n_$C){return Math.sqrt((this.x-n_$N)*(this.x-n_$N)+(this.y-n_$C)*(this.y-n_$C))},n_$C.toString=function(){return this.x+","+this.y},n_$C.normalize=function(){var n_$N=Math.sqrt(this.x*this.x+this.y*this.y);if(0<n_$N){var n_$C=1/n_$N;this.x*=n_$C,this.y*=n_$C}},n_$N.TEMP=new n_$N,n_$N.EMPTY=new n_$N,n_$N}(),n_$F=function(){function n_$A(n_$N,n_$C,n_$a,n_$u){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0),this.x=n_$N,this.y=n_$C,this.width=n_$a,this.height=n_$u}n_$P(n_$A,"laya.maths.Rectangle");var n_$N=n_$A.prototype;return n_$N.setTo=function(n_$N,n_$C,n_$a,n_$u){return this.x=n_$N,this.y=n_$C,this.width=n_$a,this.height=n_$u,this},n_$N.copyFrom=function(n_$N){return this.x=n_$N.x,this.y=n_$N.y,this.width=n_$N.width,this.height=n_$N.height,this},n_$N.contains=function(n_$N,n_$C){return!(this.width<=0||this.height<=0)&&(n_$N>=this.x&&n_$N<this.right&&n_$C>=this.y&&n_$C<this.bottom)},n_$N.intersects=function(n_$N){return!(n_$N.x>this.x+this.width||n_$N.x+n_$N.width<this.x||n_$N.y>this.y+this.height||n_$N.y+n_$N.height<this.y)},n_$N.intersection=function(n_$N,n_$C){return this.intersects(n_$N)?(n_$C||(n_$C=new n_$A),n_$C.x=Math.max(this.x,n_$N.x),n_$C.y=Math.max(this.y,n_$N.y),n_$C.width=Math.min(this.right,n_$N.right)-n_$C.x,n_$C.height=Math.min(this.bottom,n_$N.bottom)-n_$C.y,n_$C):null},n_$N.union=function(n_$N,n_$C){return n_$C||(n_$C=new n_$A),this.clone(n_$C),n_$N.width<=0||n_$N.height<=0?n_$C:(n_$C.addPoint(n_$N.x,n_$N.y),n_$C.addPoint(n_$N.right,n_$N.bottom),this)},n_$N.clone=function(n_$N){return n_$N||(n_$N=new n_$A),n_$N.x=this.x,n_$N.y=this.y,n_$N.width=this.width,n_$N.height=this.height,n_$N},n_$N.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},n_$N.equals=function(n_$N){return!(!n_$N||n_$N.x!==this.x||n_$N.y!==this.y||n_$N.width!==this.width||n_$N.height!==this.height)},n_$N.addPoint=function(n_$N,n_$C){return this.x>n_$N&&(this.width+=this.x-n_$N,this.x=n_$N),this.y>n_$C&&(this.height+=this.y-n_$C,this.y=n_$C),this.width<n_$N-this.x&&(this.width=n_$N-this.x),this.height<n_$C-this.y&&(this.height=n_$C-this.y),this},n_$N._getBoundPoints=function(){var n_$N=n_$A._temB;return(n_$N.length=0)==this.width||0==this.height||n_$N.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),n_$N},n_$N.isEmpty=function(){return this.width<=0||this.height<=0},n_$z(0,n_$N,"right",function(){return this.x+this.width}),n_$z(0,n_$N,"bottom",function(){return this.y+this.height}),n_$A._getBoundPointS=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$A._temA;return(n_$e.length=0)==n_$a||0==n_$u||n_$e.push(n_$N,n_$C,n_$N+n_$a,n_$C,n_$N,n_$C+n_$u,n_$N+n_$a,n_$C+n_$u),n_$e},n_$A._getWrapRec=function(n_$N,n_$C){if(!n_$N||n_$N.length<1)return n_$C?n_$C.setTo(0,0,0,0):n_$A.TEMP.setTo(0,0,0,0);n_$C=n_$C||new n_$A;var n_$a,n_$u,n_$e,n_$J,n_$M,n_$n=n_$N.length,n_$V=n_$E.TEMP;for(n_$e=n_$M=-(n_$u=n_$J=99999),n_$a=0;n_$a<n_$n;n_$a+=2)n_$V.x=n_$N[n_$a],n_$V.y=n_$N[n_$a+1],n_$u=n_$u<n_$V.x?n_$u:n_$V.x,n_$J=n_$J<n_$V.y?n_$J:n_$V.y,n_$e=n_$e>n_$V.x?n_$e:n_$V.x,n_$M=n_$M>n_$V.y?n_$M:n_$V.y;return n_$C.setTo(n_$u,n_$J,n_$e-n_$u,n_$M-n_$J)},n_$A.EMPTY=new n_$A,n_$A.TEMP=new n_$A,n_$A._temB=[],n_$A._temA=[],n_$A}(),n_$q=function(){function n_$V(){}return n_$P(n_$V,"laya.media.SoundManager"),n_$z(1,n_$V,"useAudioMusic",function(){return n_$V._useAudioMusic},function(n_$N){n_$V._useAudioMusic=n_$N,n_$V._musicClass=n_$N?n_$aN:null}),n_$z(1,n_$V,"autoStopMusic",function(){return n_$V._autoStopMusic},function(n_$N){n_$c.stage.off("blur",null,n_$V._stageOnBlur),n_$c.stage.off("focus",null,n_$V._stageOnFocus),n_$c.stage.off("visibilitychange",null,n_$V._visibilityChange),(n_$V._autoStopMusic=n_$N)&&(n_$c.stage.on("blur",null,n_$V._stageOnBlur),n_$c.stage.on("focus",null,n_$V._stageOnFocus),n_$c.stage.on("visibilitychange",null,n_$V._visibilityChange))}),n_$z(1,n_$V,"muted",function(){return n_$V._muted},function(n_$N){n_$N!=n_$V._muted&&(n_$N&&n_$V.stopAllSound(),n_$V.musicMuted=n_$N,n_$V._muted=n_$N)}),n_$z(1,n_$V,"musicMuted",function(){return n_$V._musicMuted},function(n_$N){n_$N!=n_$V._musicMuted&&(n_$N?(n_$V._tMusic&&n_$V._musicChannel&&!n_$V._musicChannel.isStopped?n_$V._musicChannel.pause():n_$V._musicChannel=null,n_$V._musicMuted=n_$N):(n_$V._musicMuted=n_$N,n_$V._tMusic&&n_$V._musicChannel&&n_$V._musicChannel.resume()))}),n_$z(1,n_$V,"soundMuted",function(){return n_$V._soundMuted},function(n_$N){n_$V._soundMuted=n_$N}),n_$V.addChannel=function(n_$N){0<=n_$V._channels.indexOf(n_$N)||(n_$V._channels.push(n_$N),n_$V.autoReleaseSound&&0!=n_$V._notUsedCount&&n_$V._notUsedUrls[n_$N.url]&&(delete n_$V._notUsedUrls[n_$N.url],0==--n_$V._notUsedCount&&n_$c.timer.clear(n_$V,n_$V.disposeSoundIfNotUsed)))},n_$V.removeChannel=function(n_$N){var n_$C=n_$V._channels,n_$a=n_$C.indexOf(n_$N);if(-1!=n_$a&&(n_$C.splice(n_$a,1),n_$V.autoReleaseSound)){var n_$u=n_$N.url,n_$e=n_$V.defaultIntervals[n_$u]||2e4;if(0<n_$e){var n_$J=!0;for(n_$a=n_$C.length-1;0<=n_$a;n_$a--)if(n_$C[n_$a].url==n_$u){n_$J=!1;break}n_$J&&(n_$V._notUsedUrls[n_$u]=Date.now()+n_$e,0==n_$V._notUsedCount++&&n_$c.timer.loop(1e4,n_$V,n_$V.disposeSoundIfNotUsed))}}},n_$V.disposeSoundIfNotUsed=function(){var n_$N=n_$V._notUsedUrls;if(0!=n_$V._notUsedCount){var n_$C=Date.now();for(var n_$a in n_$N)n_$C>=n_$N[n_$a]&&(delete n_$N[n_$a],--n_$V._notUsedCount,n_$V.destroySound(n_$a));if(0!=n_$V._notUsedCount)return}n_$c.timer.clear(n_$V,n_$V.disposeSoundIfNotUsed)},n_$V._visibilityChange=function(){n_$c.stage.isVisibility?n_$V._stageOnFocus():n_$V._stageOnBlur()},n_$V._stageOnBlur=function(){n_$V._isActive=!1,n_$V._musicChannel&&(n_$V._musicChannel.isStopped||(n_$V._blurPaused=!0,n_$V._musicChannel.pause())),n_$V.stopAllSound(),n_$c.stage.once("mousedown",null,n_$V._stageOnFocus)},n_$V._recoverWebAudio=function(){n_$JN.ctx&&"running"!=n_$JN.ctx.state&&n_$JN.ctx.resume&&n_$JN.ctx.resume()},n_$V._stageOnFocus=function(){if(n_$V._isActive=!0,n_$V._recoverWebAudio(),n_$c.stage.off("mousedown",null,n_$V._stageOnFocus),n_$V._blurPaused){var n_$N=n_$V._musicChannel;n_$N&&n_$V._music&&n_$N.isStopped&&(n_$V._blurPaused=!1,n_$V._music._disposed?n_$V.playMusic(n_$N.url,n_$N.loops,n_$N.startHandler,n_$N.completeHandler,n_$N.startTime):n_$N.audioBuffer?n_$N.resume():n_$V._music.play(n_$N.startTime,n_$N.loops,n_$N.startHandler,n_$N))}},n_$V.playSound=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){if(void 0===n_$C&&(n_$C=1),void 0===n_$J&&(n_$J=0),!n_$N)return null;if(n_$V._muted)return null;if(n_$V._recoverWebAudio(),n_$N==n_$V._tMusic){if(n_$V._musicMuted)return null}else{if(!n_$V._isActive)return null;if(n_$V._soundMuted)return null}var n_$M,n_$n=n_$V._pool[n_$N];return n_$e||(n_$e=n_$V._soundClass),n_$n||((n_$n=new n_$e).load(n_$N),n_$V._pool[n_$N]=n_$n),(n_$M=n_$n.play(n_$J,n_$C,n_$a))?(n_$N==n_$V._tMusic&&(n_$V._music=n_$n,n_$V._isActive||(n_$V._blurPaused=!0,n_$M.pause())),n_$M.url=n_$N,n_$M.volume=n_$N==n_$V._tMusic?n_$V.musicVolume:n_$V.soundVolume,n_$M.completeHandler=n_$u,n_$M):null},n_$V.destroySound=function(n_$N){var n_$C=n_$V._pool[n_$N];n_$C&&(delete n_$V._pool[n_$N],n_$C.dispose())},n_$V.playMusic=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$C&&(n_$C=0),void 0===n_$e&&(n_$e=0),n_$V._tMusic=n_$N,n_$V._musicChannel&&n_$V._musicChannel.stop(),n_$V._musicChannel=n_$V.playSound(n_$N,n_$C,n_$a,n_$u,null,n_$e)},n_$V.stopSound=function(n_$N){for(var n_$C,n_$a=n_$V._channels.length-1;0<=n_$a;n_$a--)(n_$C=n_$V._channels[n_$a]).url==n_$N&&n_$C.stop()},n_$V.stopAll=function(){n_$V._tMusic=null;var n_$N=0;for(n_$N=n_$V._channels.length-1;0<=n_$N;n_$N--)n_$V._channels[n_$N].stop()},n_$V.stopAllSound=function(){var n_$N,n_$C=0;for(n_$C=n_$V._channels.length-1;0<=n_$C;n_$C--)(n_$N=n_$V._channels[n_$C]).url!=n_$V._tMusic&&n_$N.stop()},n_$V.stopMusic=function(){n_$V._musicChannel&&n_$V._musicChannel.stop(),n_$V._tMusic=null},n_$V.setSoundVolume=function(n_$N,n_$C){if(n_$C)n_$V._setVolume(n_$C,n_$N);else{n_$V.soundVolume=n_$N;var n_$a,n_$u=0;for(n_$u=n_$V._channels.length-1;0<=n_$u;n_$u--)(n_$a=n_$V._channels[n_$u]).url!=n_$V._tMusic&&(n_$a.volume=n_$N)}},n_$V.setMusicVolume=function(n_$N){n_$V.musicVolume=n_$N,n_$V._setVolume(n_$V._tMusic,n_$N)},n_$V._setVolume=function(n_$N,n_$C){for(var n_$a,n_$u=n_$V._channels.length-1;0<=n_$u;n_$u--)(n_$a=n_$V._channels[n_$u]).url==n_$N&&(n_$a.volume=n_$C)},n_$V.musicVolume=1,n_$V.soundVolume=1,n_$V.playbackRate=1,n_$V._useAudioMusic=!0,n_$V._muted=!1,n_$V._soundMuted=!1,n_$V._musicMuted=!1,n_$V._tMusic=null,n_$V._musicChannel=null,n_$V._music=null,n_$V._channels=[],n_$V._autoStopMusic=!1,n_$V._blurPaused=!1,n_$V._isActive=!0,n_$V._soundClass=null,n_$V._musicClass=null,n_$V.autoReleaseSound=!0,n_$V._pool={},n_$V.defaultIntervals={},n_$V._notUsedUrls={},n_$V._notUsedCount=0,n_$V}(),n_$D=function(){var n_$N;function n_$a(){}return n_$P(n_$a,"laya.net.LocalStorage"),n_$a.__init__=function(){n_$a._baseClass||(n_$a._baseClass=n_$N).init(),n_$a.items=n_$a._baseClass.items,n_$a.support=n_$a._baseClass.support},n_$a.setItem=function(n_$N,n_$C){n_$a._baseClass.setItem(n_$N,n_$C)},n_$a.getItem=function(n_$N){return n_$a._baseClass.getItem(n_$N)},n_$a.setJSON=function(n_$N,n_$C){n_$a._baseClass.setJSON(n_$N,n_$C)},n_$a.getJSON=function(n_$N){return n_$a._baseClass.getJSON(n_$N)},n_$a.removeItem=function(n_$N){n_$a._baseClass.removeItem(n_$N)},n_$a.clear=function(){n_$a._baseClass.clear()},n_$a._baseClass=null,n_$a.items=null,n_$a.support=!1,n_$a.__init$=function(){n_$N=function(){function n_$a(){}return n_$P(n_$a,""),n_$a.init=function(){try{n_$a.support=!0,n_$a.items=n_$M.localStorage,n_$a.setItem("laya","1"),n_$a.removeItem("laya")}catch(n_$N){n_$a.support=!1}n_$a.support||console.log("LocalStorage is not supprot or browser is private mode.")},n_$a.setItem=function(n_$N,n_$C){try{n_$a.support&&n_$a.items.setItem(n_$N,n_$C)}catch(n_$N){console.warn("set localStorage failed",n_$N)}},n_$a.getItem=function(n_$N){return n_$a.support?n_$a.items.getItem(n_$N):null},n_$a.setJSON=function(n_$N,n_$C){try{n_$a.support&&n_$a.items.setItem(n_$N,JSON.stringify(n_$C))}catch(n_$N){console.warn("set localStorage failed",n_$N)}},n_$a.getJSON=function(n_$N){return JSON.parse(n_$a.support?n_$a.items.getItem(n_$N):null)},n_$a.removeItem=function(n_$N){n_$a.support&&n_$a.items.removeItem(n_$N)},n_$a.clear=function(){n_$a.support&&n_$a.items.clear()},n_$a.items=null,n_$a.support=!1,n_$a}()},n_$a}(),n_$Q=(function(){function n_$u(){}n_$P(n_$u,"laya.net.ResourceVersion"),n_$u.enable=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=2),laya.net.ResourceVersion.type=n_$a,n_$c.loader.load(n_$N,n_$x.create(null,n_$u.onManifestLoaded,[n_$C]),null,"json"),n_$l.customFormat=n_$u.addVersionPrefix},n_$u.onManifestLoaded=function(n_$N,n_$C){n_$u.manifest=n_$C,n_$N.run(),n_$C||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},n_$u.addVersionPrefix=function(n_$N){return n_$u.manifest&&n_$u.manifest[n_$N]?2==n_$u.type?n_$u.manifest[n_$N]:n_$u.manifest[n_$N]+"/"+n_$N:n_$N},n_$u.FOLDER_VERSION=1,n_$u.FILENAME_VERSION=2,n_$u.manifest=null,n_$u.type=1}(),function(){function n_$N(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}n_$P(n_$N,"laya.net.TTFLoader");var n_$C=n_$N.prototype;return n_$C.load=function(n_$N){var n_$C=(this._url=n_$N).split(".ttf")[0].split("/");this.fontName=n_$C[n_$C.length-1],n_$R.window.conch?this._loadConch():n_$R.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},n_$C._loadConch=function(){this._http=new n_$MN,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},n_$C._onHttpLoaded=function(n_$N){n_$R.window.conch.setFontFaceFromBuffer(this.fontName,n_$N),this._clearHttp(),this._complete()},n_$C._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},n_$C._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},n_$C._complete=function(){n_$c.timer.clear(this,this._complete),n_$c.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},n_$C._checkComplete=function(){n_$_.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},n_$C._loadWithFontFace=function(){var n_$N=new n_$R.window.FontFace(this.fontName,"url('"+this._url+"')");n_$R.window.document.fonts.add(n_$N);var n_$C=this;n_$N.loaded.then(function(){n_$C._complete()}),n_$N.load()},n_$C._createDiv=function(){this._div=n_$R.createElement("div"),this._div.innerHTML="laya";var n_$N=this._div.style;n_$N.fontFamily=this.fontName,n_$N.position="absolute",n_$N.left="-100px",n_$N.top="-100px",n_$R.document.body.appendChild(this._div)},n_$C._loadWithCSS=function(){var n_$N=this,n_$C=n_$R.createElement("style");n_$C.type="text/css",n_$R.document.body.appendChild(n_$C),n_$C.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=n_$_.measureText("LayaTTFFont",this._fontTxt).width;var n_$a=this;n_$C.onload=function(){n_$c.timer.once(1e4,n_$a,n_$N._complete)},n_$c.timer.loop(20,this,this._checkComplete),this._createDiv()},n_$N._testString="LayaTTFFont",n_$N}()),n_$l=function(){function n_$u(n_$N){this._url=null,this._path=null,this._url=n_$u.formatURL(n_$N),this._path=n_$u.getPath(n_$N)}n_$P(n_$u,"laya.net.URL");var n_$N=n_$u.prototype;return n_$z(0,n_$N,"path",function(){return this._path}),n_$z(0,n_$N,"url",function(){return this._url}),n_$u.formatURL=function(n_$N,n_$C){if(!n_$N)return"null path";if(0<n_$N.indexOf(":"))return n_$N;null!=n_$u.customFormat&&(n_$N=n_$u.customFormat(n_$N,n_$C));var n_$a=n_$N.charAt(0);if("."===n_$a)return n_$u.formatRelativePath((n_$C||n_$u.basePath)+n_$N);if("~"===n_$a)return n_$u.rootPath+n_$N.substring(1);if("d"===n_$a){if(0===n_$N.indexOf("data:image"))return n_$N}else if("/"===n_$a)return n_$N;return(n_$C||n_$u.basePath)+n_$N},n_$u.formatRelativePath=function(n_$N){for(var n_$C=n_$N.split("/"),n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++)".."==n_$C[n_$a]&&(n_$C.splice(n_$a-1,2),n_$a-=2);return n_$C.join("/")},n_$u.isAbsolute=function(n_$N){return 0<n_$N.indexOf(":")||"/"==n_$N.charAt(0)},n_$u.getPath=function(n_$N){var n_$C=n_$N.lastIndexOf("/");return 0<n_$C?n_$N.substr(0,n_$C+1):""},n_$u.getFileName=function(n_$N){var n_$C=n_$N.lastIndexOf("/");return 0<n_$C?n_$N.substr(n_$C+1):n_$N},n_$u.version={},n_$u.basePath="",n_$u.rootPath="",n_$u.customFormat=function(n_$N){var n_$C=n_$u.version[n_$N];return!n_$i.isConchApp&&n_$C&&(n_$N+="?v="+n_$C),n_$N},n_$u}(),n_$i=function(){function n_$e(n_$N,n_$C){this._timeId=0;var n_$a=n_$e._mainCanvas.source.style;n_$a.position="absolute",n_$a.top=n_$a.left="0px",n_$a.background="#000000",n_$e._mainCanvas.source.id="layaCanvas";var n_$u=laya.renders.Render.isWebGL;n_$e._mainCanvas.source.width=n_$N,n_$e._mainCanvas.source.height=n_$C,n_$u&&n_$e.WebGL.init(n_$e._mainCanvas,n_$N,n_$C),n_$R.container.appendChild(n_$e._mainCanvas.source),(n_$e._context=new n_$j(n_$N,n_$C,n_$u?null:n_$e._mainCanvas)).ctx.setIsMainContext(),n_$R.window.requestAnimationFrame(function n_$N(n_$C){n_$R.window.requestAnimationFrame(n_$N);n_$c.stage._loop()}),n_$c.stage.on("visibilitychange",this,this._onVisibilitychange)}n_$P(n_$e,"laya.renders.Render");var n_$N=n_$e.prototype;return n_$N._onVisibilitychange=function(){n_$c.stage.isVisibility?0!=this._timeId&&n_$R.window.clearInterval(this._timeId):this._timeId=n_$R.window.setInterval(this._enterFrame,1e3)},n_$N._enterFrame=function(n_$N){n_$c.stage._loop()},n_$z(1,n_$e,"context",function(){return n_$e._context}),n_$z(1,n_$e,"canvas",function(){return n_$e._mainCanvas.source}),n_$e._context=null,n_$e._mainCanvas=null,n_$e.WebGL=null,n_$e.isConchNode=!1,n_$e.isConchApp=!1,n_$e.isConchWebGL=!1,n_$e.isWebGL=!1,n_$e.is3DMode=!1,n_$e.optimizeTextureMemory=function(n_$N,n_$C){return!0},n_$e.__init$=function(){n_$M.ConchRenderType=n_$M.ConchRenderType||1,n_$M.ConchRenderType|=n_$M.conch?4:0,n_$e.isConchNode=5==(5&n_$M.ConchRenderType),n_$e.isConchApp=4==(4&n_$M.ConchRenderType),n_$e.isConchWebGL=6==n_$M.ConchRenderType},n_$e}(),n_$j=function(){function n_$M(n_$N,n_$C,n_$a){this.x=0,this.y=0,this._drawTexture=function(n_$N,n_$C,n_$a){n_$a[0].loaded&&this.ctx.drawTexture(n_$a[0],n_$a[1],n_$a[2],n_$a[3],n_$a[4],n_$N,n_$C)},this._fillTexture=function(n_$N,n_$C,n_$a){n_$a[0].loaded&&this.ctx.fillTexture(n_$a[0],n_$a[1]+n_$N,n_$a[2]+n_$C,n_$a[3],n_$a[4],n_$a[5],n_$a[6],n_$a[7])},this._drawTextureWithTransform=function(n_$N,n_$C,n_$a){n_$a[0].loaded&&this.ctx.drawTextureWithTransform(n_$a[0],n_$a[1],n_$a[2],n_$a[3],n_$a[4],n_$a[5],n_$N,n_$C,n_$a[6])},this._fillQuadrangle=function(n_$N,n_$C,n_$a){this.ctx.fillQuadrangle(n_$a[0],n_$a[1],n_$a[2],n_$a[3],n_$a[4])},this._drawRect=function(n_$N,n_$C,n_$a){var n_$u=this.ctx;null!=n_$a[4]&&(n_$u.fillStyle=n_$a[4],n_$u.fillRect(n_$N+n_$a[0],n_$C+n_$a[1],n_$a[2],n_$a[3],null)),null!=n_$a[5]&&(n_$u.strokeStyle=n_$a[5],n_$u.lineWidth=n_$a[6],n_$u.strokeRect(n_$N+n_$a[0],n_$C+n_$a[1],n_$a[2],n_$a[3],n_$a[6]))},this._drawPie=function(n_$N,n_$C,n_$a){var n_$u=this.ctx;n_$i.isWebGL&&n_$u.setPathId(n_$a[8]),n_$u.beginPath(),n_$i.isWebGL?(n_$u.movePath(n_$a[0]+n_$N,n_$a[1]+n_$C),n_$u.moveTo(0,0)):n_$u.moveTo(n_$N+n_$a[0],n_$C+n_$a[1]),n_$u.arc(n_$N+n_$a[0],n_$C+n_$a[1],n_$a[2],n_$a[3],n_$a[4]),n_$u.closePath(),this._fillAndStroke(n_$a[5],n_$a[6],n_$a[7],!0)},this._clipRect=function(n_$N,n_$C,n_$a){this.ctx.clipRect(n_$N+n_$a[0],n_$C+n_$a[1],n_$a[2],n_$a[3])},this._fillRect=function(n_$N,n_$C,n_$a){this.ctx.fillRect(n_$N+n_$a[0],n_$C+n_$a[1],n_$a[2],n_$a[3],n_$a[4])},this._drawCircle=function(n_$N,n_$C,n_$a){var n_$u=this.ctx;n_$i.isWebGL&&n_$u.setPathId(n_$a[6]),n_$b.drawCall++,n_$u.beginPath(),n_$i.isWebGL&&n_$u.movePath(n_$a[0]+n_$N,n_$a[1]+n_$C),n_$u.arc(n_$a[0]+n_$N,n_$a[1]+n_$C,n_$a[2],0,n_$M.PI2),n_$u.closePath(),this._fillAndStroke(n_$a[3],n_$a[4],n_$a[5],!0)},this._fillCircle=function(n_$N,n_$C,n_$a){n_$b.drawCall++;var n_$u=this.ctx;n_$u.beginPath(),n_$u.fillStyle=n_$a[3],n_$u.arc(n_$a[0]+n_$N,n_$a[1]+n_$C,n_$a[2],0,n_$M.PI2),n_$u.fill()},this._setShader=function(n_$N,n_$C,n_$a){this.ctx.setShader(n_$a[0])},this._drawLine=function(n_$N,n_$C,n_$a){var n_$u=this.ctx;n_$i.isWebGL&&n_$u.setPathId(n_$a[6]),n_$u.beginPath(),n_$u.strokeStyle=n_$a[4],n_$u.lineWidth=n_$a[5],n_$i.isWebGL?(n_$u.movePath(n_$N,n_$C),n_$u.moveTo(n_$a[0],n_$a[1]),n_$u.lineTo(n_$a[2],n_$a[3])):(n_$u.moveTo(n_$N+n_$a[0],n_$C+n_$a[1]),n_$u.lineTo(n_$N+n_$a[2],n_$C+n_$a[3])),n_$u.stroke()},this._drawLines=function(n_$N,n_$C,n_$a){var n_$u=this.ctx;n_$i.isWebGL&&n_$u.setPathId(n_$a[5]),n_$u.beginPath(),n_$N+=n_$a[0],n_$C+=n_$a[1],n_$i.isWebGL&&n_$u.movePath(n_$N,n_$C),n_$u.strokeStyle=n_$a[3],n_$u.lineWidth=n_$a[4];var n_$e=n_$a[2],n_$J=2,n_$M=n_$e.length;if(n_$i.isWebGL)for(n_$u.moveTo(n_$e[0],n_$e[1]);n_$J<n_$M;)n_$u.lineTo(n_$e[n_$J++],n_$e[n_$J++]);else for(n_$u.moveTo(n_$N+n_$e[0],n_$C+n_$e[1]);n_$J<n_$M;)n_$u.lineTo(n_$N+n_$e[n_$J++],n_$C+n_$e[n_$J++]);n_$u.stroke()},this._drawLinesWebGL=function(n_$N,n_$C,n_$a){this.ctx.drawLines(n_$N+this.x+n_$a[0],n_$C+this.y+n_$a[1],n_$a[2],n_$a[3],n_$a[4])},this._drawCurves=function(n_$N,n_$C,n_$a){this.ctx.drawCurves(n_$N,n_$C,n_$a)},this._draw=function(n_$N,n_$C,n_$a){n_$a[0].call(null,this,n_$N,n_$C)},this._transformByMatrix=function(n_$N,n_$C,n_$a){this.ctx.transformByMatrix(n_$a[0])},this._setTransform=function(n_$N,n_$C,n_$a){this.ctx.setTransform(n_$a[0],n_$a[1],n_$a[2],n_$a[3],n_$a[4],n_$a[5])},this._setTransformByMatrix=function(n_$N,n_$C,n_$a){this.ctx.setTransformByMatrix(n_$a[0])},this._save=function(n_$N,n_$C,n_$a){this.ctx.save()},this._restore=function(n_$N,n_$C,n_$a){this.ctx.restore()},this._translate=function(n_$N,n_$C,n_$a){this.ctx.translate(n_$a[0],n_$a[1])},this._transform=function(n_$N,n_$C,n_$a){this.ctx.translate(n_$a[1]+n_$N,n_$a[2]+n_$C);var n_$u=n_$a[0];this.ctx.transform(n_$u.a,n_$u.b,n_$u.c,n_$u.d,n_$u.tx,n_$u.ty),this.ctx.translate(-n_$N-n_$a[1],-n_$C-n_$a[2])},this._rotate=function(n_$N,n_$C,n_$a){this.ctx.translate(n_$a[1]+n_$N,n_$a[2]+n_$C),this.ctx.rotate(n_$a[0]),this.ctx.translate(-n_$N-n_$a[1],-n_$C-n_$a[2])},this._scale=function(n_$N,n_$C,n_$a){this.ctx.translate(n_$a[2]+n_$N,n_$a[3]+n_$C),this.ctx.scale(n_$a[0],n_$a[1]),this.ctx.translate(-n_$N-n_$a[2],-n_$C-n_$a[3])},this._alpha=function(n_$N,n_$C,n_$a){this.ctx.globalAlpha*=n_$a[0]},this._setAlpha=function(n_$N,n_$C,n_$a){this.ctx.globalAlpha=n_$a[0]},this._fillText=function(n_$N,n_$C,n_$a){this.ctx.fillText(n_$a[0],n_$a[1]+n_$N,n_$a[2]+n_$C,n_$a[3],n_$a[4],n_$a[5])},this._strokeText=function(n_$N,n_$C,n_$a){this.ctx.strokeText(n_$a[0],n_$a[1]+n_$N,n_$a[2]+n_$C,n_$a[3],n_$a[4],n_$a[5],n_$a[6])},this._fillBorderText=function(n_$N,n_$C,n_$a){this.ctx.fillBorderText(n_$a[0],n_$a[1]+n_$N,n_$a[2]+n_$C,n_$a[3],n_$a[4],n_$a[5],n_$a[6],n_$a[7])},this._blendMode=function(n_$N,n_$C,n_$a){this.ctx.globalCompositeOperation=n_$a[0]},this._beginClip=function(n_$N,n_$C,n_$a){this.ctx.beginClip&&this.ctx.beginClip(n_$N+n_$a[0],n_$C+n_$a[1],n_$a[2],n_$a[3])},this._setIBVB=function(n_$N,n_$C,n_$a){this.ctx.setIBVB(n_$a[0]+n_$N,n_$a[1]+n_$C,n_$a[2],n_$a[3],n_$a[4],n_$a[5],n_$a[6],n_$a[7])},this._fillTrangles=function(n_$N,n_$C,n_$a){this.ctx.fillTrangles(n_$a[0],n_$a[1]+n_$N,n_$a[2]+n_$C,n_$a[3],n_$a[4])},this._drawPath=function(n_$N,n_$C,n_$a){var n_$u=this.ctx;n_$i.isWebGL&&n_$u.setPathId(-1),n_$u.beginPath(),n_$N+=n_$a[0],n_$C+=n_$a[1],n_$i.isWebGL&&n_$u.movePath(n_$N,n_$C);for(var n_$e=n_$a[2],n_$J=0,n_$M=n_$e.length;n_$J<n_$M;n_$J++){var n_$n=n_$e[n_$J];switch(n_$n[0]){case"moveTo":n_$i.isWebGL?n_$u.moveTo(n_$n[1],n_$n[2]):n_$u.moveTo(n_$N+n_$n[1],n_$C+n_$n[2]);break;case"lineTo":n_$i.isWebGL?n_$u.lineTo(n_$n[1],n_$n[2]):n_$u.lineTo(n_$N+n_$n[1],n_$C+n_$n[2]);break;case"arcTo":n_$i.isWebGL?n_$u.arcTo(n_$n[1],n_$n[2],n_$n[3],n_$n[4],n_$n[5]):n_$u.arcTo(n_$N+n_$n[1],n_$C+n_$n[2],n_$N+n_$n[3],n_$C+n_$n[4],n_$n[5]);break;case"closePath":n_$u.closePath()}}var n_$V=n_$a[3];null!=n_$V&&(n_$u.fillStyle=n_$V.fillStyle,n_$u.fill());var n_$A=n_$a[4];null!=n_$A&&(n_$u.strokeStyle=n_$A.strokeStyle,n_$u.lineWidth=n_$A.lineWidth||1,n_$u.lineJoin=n_$A.lineJoin,n_$u.lineCap=n_$A.lineCap,n_$u.miterLimit=n_$A.miterLimit,n_$u.stroke())},this.drawPoly=function(n_$N,n_$C,n_$a){this.ctx.drawPoly(n_$N+this.x+n_$a[0],n_$C+this.y+n_$a[1],n_$a[2],n_$a[3],n_$a[4],n_$a[5],n_$a[6])},this._drawPoly=function(n_$N,n_$C,n_$a){var n_$u=this.ctx,n_$e=n_$a[2],n_$J=2,n_$M=n_$e.length;if(n_$i.isWebGL)for(n_$u.setPathId(n_$a[6]),n_$u.beginPath(),n_$N+=n_$a[0],n_$C+=n_$a[1],n_$u.movePath(n_$N,n_$C),n_$u.moveTo(n_$e[0],n_$e[1]);n_$J<n_$M;)n_$u.lineTo(n_$e[n_$J++],n_$e[n_$J++]);else for(n_$u.beginPath(),n_$N+=n_$a[0],n_$C+=n_$a[1],n_$u.moveTo(n_$N+n_$e[0],n_$C+n_$e[1]);n_$J<n_$M;)n_$u.lineTo(n_$N+n_$e[n_$J++],n_$C+n_$e[n_$J++]);n_$u.closePath(),this._fillAndStroke(n_$a[3],n_$a[4],n_$a[5],n_$a[7])},this._drawSkin=function(n_$N,n_$C,n_$a){var n_$u=n_$a[0];if(n_$u){var n_$e=this.ctx;n_$u.render(n_$e,n_$N,n_$C)}},this._drawParticle=function(n_$N,n_$C,n_$a){this.ctx.drawParticle(n_$N+this.x,n_$C+this.y,n_$a[0])},this._setFilters=function(n_$N,n_$C,n_$a){this.ctx.setFilters(n_$a)},n_$a?this.ctx=n_$a.getContext("2d"):(n_$a=n_$WN.create("3D"),this.ctx=n_$_.createWebGLContext2D(n_$a),n_$a._setContext(this.ctx)),n_$a.size(n_$N,n_$C),this.canvas=n_$a}n_$P(n_$M,"laya.renders.RenderContext");var n_$N=n_$M.prototype;return n_$N.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},n_$N.drawTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$N.loaded&&this.ctx.drawTexture(n_$N,n_$C,n_$a,n_$u,n_$e,this.x,this.y)},n_$N._drawTextures=function(n_$N,n_$C,n_$a){n_$a[0].loaded&&this.ctx.drawTextures(n_$a[0],n_$a[1],n_$N+this.x,n_$C+this.y)},n_$N.drawTextureWithTransform=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$N.loaded&&this.ctx.drawTextureWithTransform(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,this.x,this.y,n_$M)},n_$N.fillQuadrangle=function(n_$N,n_$C,n_$a,n_$u,n_$e){this.ctx.fillQuadrangle(n_$N,n_$C,n_$a,n_$u,n_$e)},n_$N.drawCanvas=function(n_$N,n_$C,n_$a,n_$u,n_$e){this.ctx.drawCanvas(n_$N,n_$C+this.x,n_$a+this.y,n_$u,n_$e)},n_$N.drawRect=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$J&&(n_$J=1);var n_$M=this.ctx;n_$M.strokeStyle=n_$e,n_$M.lineWidth=n_$J,n_$M.strokeRect(n_$N+this.x,n_$C+this.y,n_$a,n_$u,n_$J)},n_$N._fillAndStroke=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$u&&(n_$u=!1);var n_$e=this.ctx;null!=n_$N&&(n_$e.fillStyle=n_$N,n_$i.isWebGL?n_$e.fill(n_$u):n_$e.fill()),null!=n_$C&&0<n_$a&&(n_$e.strokeStyle=n_$C,n_$e.lineWidth=n_$a,n_$e.stroke())},n_$N.clipRect=function(n_$N,n_$C,n_$a,n_$u){this.ctx.clipRect(n_$N+this.x,n_$C+this.y,n_$a,n_$u)},n_$N.fillRect=function(n_$N,n_$C,n_$a,n_$u,n_$e){this.ctx.fillRect(n_$N+this.x,n_$C+this.y,n_$a,n_$u,n_$e)},n_$N.drawCircle=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=1),n_$b.drawCall++;var n_$J=this.ctx;n_$J.beginPath(),n_$J.strokeStyle=n_$u,n_$J.lineWidth=n_$e,n_$J.arc(n_$N+this.x,n_$C+this.y,n_$a,0,n_$M.PI2),n_$J.stroke()},n_$N.drawTriangles=function(n_$N,n_$C,n_$a){if(n_$i.isWebGL)this.ctx.drawTriangles(n_$a[0],n_$N+n_$a[1],n_$C+n_$a[2],n_$a[3],n_$a[4],n_$a[5],n_$a[6],n_$a[7],n_$a[8],n_$a[9]);else{var n_$u=n_$a[5],n_$e=0,n_$J=n_$u.length,n_$M=this.ctx;for(n_$e=0;n_$e<n_$J;n_$e+=3){var n_$n=2*n_$u[n_$e],n_$V=2*n_$u[n_$e+1],n_$A=2*n_$u[n_$e+2];n_$M.drawTriangle(n_$a[0],n_$a[3],n_$a[4],n_$n,n_$V,n_$A,n_$a[6],!0)}}},n_$N.fillCircle=function(n_$N,n_$C,n_$a,n_$u){n_$b.drawCall++;var n_$e=this.ctx;n_$e.beginPath(),n_$e.fillStyle=n_$u,n_$e.arc(n_$N+this.x,n_$C+this.y,n_$a,0,n_$M.PI2),n_$e.fill()},n_$N.setShader=function(n_$N){this.ctx.setShader(n_$N)},n_$N.drawLine=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$J&&(n_$J=1);var n_$M=this.ctx;n_$M.beginPath(),n_$M.strokeStyle=n_$e,n_$M.lineWidth=n_$J,n_$M.moveTo(this.x+n_$N,this.y+n_$C),n_$M.lineTo(this.x+n_$a,this.y+n_$u),n_$M.stroke()},n_$N.clear=function(){this.ctx.clear()},n_$N.transformByMatrix=function(n_$N){this.ctx.transformByMatrix(n_$N)},n_$N.setTransform=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this.ctx.setTransform(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)},n_$N.setTransformByMatrix=function(n_$N){this.ctx.setTransformByMatrix(n_$N)},n_$N.save=function(){this.ctx.save()},n_$N.restore=function(){this.ctx.restore()},n_$N.translate=function(n_$N,n_$C){this.ctx.translate(n_$N,n_$C)},n_$N.transform=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this.ctx.transform(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)},n_$N.rotate=function(n_$N){this.ctx.rotate(n_$N)},n_$N.scale=function(n_$N,n_$C){this.ctx.scale(n_$N,n_$C)},n_$N.alpha=function(n_$N){this.ctx.globalAlpha*=n_$N},n_$N.setAlpha=function(n_$N){this.ctx.globalAlpha=n_$N},n_$N.fillWords=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$J&&(n_$J=0),this.ctx.fillWords(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)},n_$N.fillBorderWords=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this.ctx.fillBorderWords(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M)},n_$N.fillText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this.ctx.fillText(n_$N,n_$C+this.x,n_$a+this.y,n_$u,n_$e,n_$J)},n_$N.strokeText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this.ctx.strokeText(n_$N,n_$C+this.x,n_$a+this.y,n_$u,n_$e,n_$J,n_$M)},n_$N.blendMode=function(n_$N){this.ctx.globalCompositeOperation=n_$N},n_$N.flush=function(){this.ctx.flush&&this.ctx.flush()},n_$N.addRenderObject=function(n_$N){this.ctx.addRenderObject(n_$N)},n_$N.beginClip=function(n_$N,n_$C,n_$a,n_$u){this.ctx.beginClip&&this.ctx.beginClip(n_$N,n_$C,n_$a,n_$u)},n_$N.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},n_$N.fillTrangles=function(n_$N,n_$C,n_$a){this.ctx.fillTrangles(n_$a[0],n_$a[1],n_$a[2],n_$a[3],4<n_$a.length?n_$a[4]:null)},n_$M.PI2=2*Math.PI,n_$M}(),n_$y=function(){function n_$M(n_$N,n_$C){switch(this._next=n_$C||n_$M.NORENDER,n_$N){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=n_$g._filter);case 69905:return void(this._fun=n_$M._initRenderFun)}this.onCreate(n_$N)}n_$P(n_$M,"laya.renders.RenderSprite");var n_$N=n_$M.prototype;return n_$N.onCreate=function(n_$N){},n_$N._style=function(n_$N,n_$C,n_$a,n_$u){n_$N._style.render(n_$N,n_$C,n_$a,n_$u);var n_$e=this._next;n_$e._fun.call(n_$e,n_$N,n_$C,n_$a,n_$u)},n_$N._no=function(n_$N,n_$C,n_$a,n_$u){},n_$N._custom=function(n_$N,n_$C,n_$a,n_$u){n_$N.customRender(n_$C,n_$a,n_$u);var n_$e=n_$N._style._tf;this._next._fun.call(this._next,n_$N,n_$C,n_$a-n_$e.translateX,n_$u-n_$e.translateY)},n_$N._clip=function(n_$N,n_$C,n_$a,n_$u){var n_$e=this._next;if(n_$e!=n_$M.NORENDER){var n_$J=n_$N._style.scrollRect;n_$C.ctx.save(),n_$C.ctx.clipRect(n_$a,n_$u,n_$J.width,n_$J.height),n_$e._fun.call(n_$e,n_$N,n_$C,n_$a-n_$J.x,n_$u-n_$J.y),n_$C.ctx.restore()}},n_$N._blend=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._style;n_$e.blendMode&&(n_$C.ctx.globalCompositeOperation=n_$e.blendMode);var n_$J=this._next;n_$J._fun.call(n_$J,n_$N,n_$C,n_$a,n_$u),n_$C.ctx.globalCompositeOperation="source-over"},n_$N._mask=function(n_$N,n_$C,n_$a,n_$u){var n_$e=this._next;n_$e._fun.call(n_$e,n_$N,n_$C,n_$a,n_$u);var n_$J=n_$N.mask;n_$J&&(n_$C.ctx.globalCompositeOperation="destination-in",(0<n_$J.numChildren||!n_$J.graphics._isOnlyOne())&&(n_$J.cacheAsBitmap=!0),n_$J.render(n_$C,n_$a-n_$N.pivotX,n_$u-n_$N.pivotY)),n_$C.ctx.globalCompositeOperation="source-over"},n_$N._graphics=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._style._tf;n_$N._graphics&&n_$N._graphics._render(n_$N,n_$C,n_$a-n_$e.translateX,n_$u-n_$e.translateY);var n_$J=this._next;n_$J._fun.call(n_$J,n_$N,n_$C,n_$a,n_$u)},n_$N._image=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._style;n_$C.ctx.drawTexture2(n_$a,n_$u,n_$e._tf.translateX,n_$e._tf.translateY,n_$N.transform,n_$e.alpha,n_$e.blendMode,n_$N._graphics._one)},n_$N._image2=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._style._tf;n_$C.ctx.drawTexture2(n_$a,n_$u,n_$e.translateX,n_$e.translateY,n_$N.transform,1,null,n_$N._graphics._one)},n_$N._alpha=function(n_$N,n_$C,n_$a,n_$u){var n_$e;if(.01<(n_$e=n_$N._style.alpha)||n_$N._needRepaint()){var n_$J=n_$C.ctx.globalAlpha;n_$C.ctx.globalAlpha*=n_$e;var n_$M=this._next;n_$M._fun.call(n_$M,n_$N,n_$C,n_$a,n_$u),n_$C.ctx.globalAlpha=n_$J}},n_$N._transform=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.transform,n_$J=this._next;n_$e&&n_$J!=n_$M.NORENDER?(n_$C.save(),n_$C.transform(n_$e.a,n_$e.b,n_$e.c,n_$e.d,n_$e.tx+n_$a,n_$e.ty+n_$u),n_$J._fun.call(n_$J,n_$N,n_$C,0,0),n_$C.restore()):n_$J._fun.call(n_$J,n_$N,n_$C,n_$a,n_$u)},n_$N._childs=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._style,n_$J=n_$e._tf;if(n_$a=n_$a-n_$J.translateX+n_$e.paddingLeft,n_$u=n_$u-n_$J.translateY+n_$e.paddingTop,n_$e._calculation){var n_$M=n_$N._getWords();if(n_$M){var n_$n=n_$e;n_$n&&(n_$n.stroke?n_$C.fillBorderWords(n_$M,n_$a,n_$u,n_$n.font,n_$n.color,n_$n.strokeColor,n_$n.stroke):n_$C.fillWords(n_$M,n_$a,n_$u,n_$n.font,n_$n.color,"none"!=n_$n.textDecoration&&n_$n.underLine?1:0))}}var n_$V,n_$A=n_$N._childs,n_$P=n_$A.length;if(n_$N.viewport||n_$N.optimizeScrollRect&&n_$N._style.scrollRect){var n_$$=n_$N.viewport||n_$N._style.scrollRect,n_$O=n_$$.x,n_$G=n_$$.y,n_$z=n_$$.right,n_$f=n_$$.bottom,n_$t=NaN,n_$g=NaN;for(n_$x=0;n_$x<n_$P;++n_$x)(n_$V=n_$A[n_$x]).visible&&(n_$t=n_$V._x)<n_$z&&n_$t+n_$V.width>n_$O&&(n_$g=n_$V._y)<n_$f&&n_$g+n_$V.height>n_$G&&n_$V.render(n_$C,n_$a,n_$u)}else for(var n_$x=0;n_$x<n_$P;++n_$x)(n_$V=n_$A[n_$x])._style.visible&&n_$V.render(n_$C,n_$a,n_$u)},n_$N._canvas=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._$P.cacheCanvas;if(n_$e){"bitmap"===n_$e.type?n_$b.canvasBitmap++:n_$b.canvasNormal++;var n_$J=n_$e.ctx;if(n_$N._needRepaint()||!n_$J)this._canvas_repaint(n_$N,n_$C,n_$a,n_$u);else{var n_$M=n_$e._cacheRec;n_$C.drawCanvas(n_$J.canvas,n_$a+n_$M.x,n_$u+n_$M.y,n_$M.width,n_$M.height)}}else this._next._fun.call(this._next,n_$N,n_$C,n_$a,n_$u)},n_$N._canvas_repaint=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._$P.cacheCanvas,n_$J=this._next;if(n_$e){var n_$M,n_$n,n_$V,n_$A,n_$P=n_$e.ctx,n_$$=n_$N._needRepaint()||!n_$P,n_$O=n_$e.type;if("bitmap"===n_$O?n_$b.canvasBitmap++:n_$b.canvasNormal++,n_$$){var n_$G,n_$z;n_$e._cacheRec||(n_$e._cacheRec=new n_$F),n_$i.isWebGL&&"bitmap"!==n_$O?n_$e._cacheRec.setTo(-n_$N.pivotX,-n_$N.pivotY,1,1):((n_$A=n_$N.getSelfBounds()).x=n_$A.x-n_$N.pivotX,n_$A.y=n_$A.y-n_$N.pivotY,n_$A.x=n_$A.x-16,n_$A.y=n_$A.y-16,n_$A.width=n_$A.width+32,n_$A.height=n_$A.height+32,n_$A.x=Math.floor(n_$A.x+n_$a)-n_$a,n_$A.y=Math.floor(n_$A.y+n_$u)-n_$u,n_$A.width=Math.floor(n_$A.width),n_$A.height=Math.floor(n_$A.height),n_$e._cacheRec.copyFrom(n_$A)),n_$A=n_$e._cacheRec;var n_$f,n_$t=n_$i.isWebGL?1:n_$R.pixelRatio*n_$c.stage.clientScaleX,n_$g=n_$i.isWebGL?1:n_$R.pixelRatio*n_$c.stage.clientScaleY;if(!n_$i.isWebGL){var n_$x,n_$W=1,n_$v=1;for(n_$x=n_$N;n_$x&&n_$x!=n_$c.stage;)n_$W*=n_$x.scaleX,n_$v*=n_$x.scaleY,n_$x=n_$x.parent;n_$i.isWebGL?(n_$W<1&&(n_$t*=n_$W),n_$v<1&&(n_$g*=n_$v)):(1<n_$W&&(n_$t*=n_$W),1<n_$v&&(n_$g*=n_$v))}if(n_$N.scrollRect){var n_$X=n_$N.scrollRect;n_$A.x-=n_$X.x,n_$A.y-=n_$X.y}if(n_$G=n_$A.width*n_$t,n_$z=n_$A.height*n_$g,n_$n=n_$A.x,n_$V=n_$A.y,n_$i.isWebGL&&"bitmap"===n_$O&&(2048<n_$G||2048<n_$z))return console.warn("cache bitmap size larger than 2048,cache ignored"),n_$e.ctx&&(n_$m.recover("RenderContext",n_$e.ctx),n_$e.ctx.canvas.size(0,0),n_$e.ctx=null),void n_$J._fun.call(n_$J,n_$N,n_$C,n_$a,n_$u);if(n_$P||(n_$P=n_$e.ctx=n_$m.getItem("RenderContext")||new n_$j(n_$G,n_$z,n_$WN.create("AUTO"))),n_$P.ctx.sprite=n_$N,(n_$M=n_$P.canvas).clear(),(n_$M.width!=n_$G||n_$M.height!=n_$z)&&n_$M.size(n_$G,n_$z),"bitmap"===n_$O?n_$M.context.asBitmap=!0:"normal"===n_$O&&(n_$M.context.asBitmap=!1),1!=n_$t||1!=n_$g){var n_$r=n_$P.ctx;n_$r.save(),n_$r.scale(n_$t,n_$g),!n_$i.isConchWebGL&&n_$i.isConchApp&&(n_$f=n_$N._$P.cf)&&n_$r.setFilterMatrix&&n_$r.setFilterMatrix(n_$f._mat,n_$f._alpha),n_$J._fun.call(n_$J,n_$N,n_$P,-n_$n,-n_$V),n_$r.restore(),n_$i.isConchApp&&!n_$i.isConchWebGL||n_$N._applyFilters()}else n_$r=n_$P.ctx,!n_$i.isConchWebGL&&n_$i.isConchApp&&(n_$f=n_$N._$P.cf)&&n_$r.setFilterMatrix&&n_$r.setFilterMatrix(n_$f._mat,n_$f._alpha),n_$J._fun.call(n_$J,n_$N,n_$P,-n_$n,-n_$V),n_$i.isConchApp&&!n_$i.isConchWebGL||n_$N._applyFilters();n_$N._$P.staticCache&&(n_$e.reCache=!1),n_$b.canvasReCache++}else n_$n=(n_$A=n_$e._cacheRec).x,n_$V=n_$A.y,n_$M=n_$P.canvas;n_$C.drawCanvas(n_$M,n_$a+n_$n,n_$u+n_$V,n_$A.width,n_$A.height)}else n_$J._fun.call(n_$J,n_$N,n_$P,n_$a,n_$u)},n_$M.__init__=function(){var n_$N,n_$C,n_$a=0;for(n_$C=n_$_.createRenderSprite(69905,null),n_$N=n_$M.renders.length=4096,n_$a=0;n_$a<n_$N;n_$a++)n_$M.renders[n_$a]=n_$C;n_$M.renders[0]=n_$_.createRenderSprite(0,null),function(n_$N,n_$C){for(var n_$a=0,n_$u=0;n_$u<n_$N.length;n_$u++)n_$a|=n_$N[n_$u],n_$M.renders[n_$a]=n_$C}([1,512,4,2],new n_$M(1,null)),n_$M.renders[513]=n_$_.createRenderSprite(513,null),n_$M.renders[517]=new n_$M(517,null)},n_$M._initRenderFun=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._renderType;(n_$M.renders[n_$e]=n_$M._getTypeRender(n_$e))._fun(n_$N,n_$C,n_$a,n_$u)},n_$M._getTypeRender=function(n_$N){for(var n_$C=null,n_$a=2048;1<n_$a;)n_$a&n_$N&&(n_$C=n_$_.createRenderSprite(n_$a,n_$C)),n_$a>>=1;return n_$C},n_$M.IMAGE=1,n_$M.ALPHA=2,n_$M.TRANSFORM=4,n_$M.BLEND=8,n_$M.CANVAS=16,n_$M.FILTERS=32,n_$M.MASK=64,n_$M.CLIP=128,n_$M.STYLE=256,n_$M.GRAPHICS=512,n_$M.CUSTOM=1024,n_$M.CHILDS=2048,n_$M.INIT=69905,n_$M.renders=[],n_$M.NORENDER=new n_$M(0,null),n_$M}(),n_$T=function(){function n_$n(){this._repaint=!1}n_$P(n_$n,"laya.resource.Context");var n_$N=n_$n.prototype;return n_$N.replaceReset=function(){var n_$N,n_$C,n_$a=0;for(n_$N=n_$n.replaceKeys.length,n_$a=0;n_$a<n_$N;n_$a++)n_$C=n_$n.replaceKeys[n_$a],this[n_$n.newKeys[n_$a]]=this[n_$C]},n_$N.replaceResotre=function(){this.__restore(),this.__reset()},n_$N.setIsMainContext=function(){},n_$N.drawTextures=function(n_$N,n_$C,n_$a,n_$u){n_$b.drawCall+=n_$C.length/2;for(var n_$e=n_$N.width,n_$J=n_$N.height,n_$M=0,n_$n=n_$C.length;n_$M<n_$n;n_$M+=2)this.drawTexture(n_$N,n_$C[n_$M],n_$C[n_$M+1],n_$e,n_$J,n_$a,n_$u)},n_$N.drawCanvas=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$b.drawCall++,this.drawImage(n_$N.source,n_$C,n_$a,n_$u,n_$e)},n_$N.fillRect=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$b.drawCall++,n_$e&&(this.fillStyle=n_$e),this.__fillRect(n_$N,n_$C,n_$a,n_$u)},n_$N.fillText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){n_$b.drawCall++,3<arguments.length&&null!=n_$u&&(this.font=n_$u,this.fillStyle=n_$e,this.textAlign=n_$J,this.textBaseline="top"),this.__fillText(n_$N,n_$C,n_$a)},n_$N.fillBorderText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){n_$b.drawCall++,this.font=n_$u,this.fillStyle=n_$e,this.textBaseline="top",this.strokeStyle=n_$J,this.lineWidth=n_$M,this.textAlign=n_$n,this.__strokeText(n_$N,n_$C,n_$a),this.__fillText(n_$N,n_$C,n_$a)},n_$N.strokeText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$b.drawCall++,3<arguments.length&&null!=n_$u&&(this.font=n_$u,this.strokeStyle=n_$e,this.lineWidth=n_$J,this.textAlign=n_$M,this.textBaseline="top"),this.__strokeText(n_$N,n_$C,n_$a)},n_$N.transformByMatrix=function(n_$N){this.transform(n_$N.a,n_$N.b,n_$N.c,n_$N.d,n_$N.tx,n_$N.ty)},n_$N.setTransformByMatrix=function(n_$N){this.setTransform(n_$N.a,n_$N.b,n_$N.c,n_$N.d,n_$N.tx,n_$N.ty)},n_$N.clipRect=function(n_$N,n_$C,n_$a,n_$u){n_$b.drawCall++,this.beginPath(),this.rect(n_$N,n_$C,n_$a,n_$u),this.clip()},n_$N.drawTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$b.drawCall++;var n_$n=n_$N.uv,n_$V=n_$N.bitmap.width,n_$A=n_$N.bitmap.height;this.drawImage(n_$N.source,n_$n[0]*n_$V,n_$n[1]*n_$A,(n_$n[2]-n_$n[0])*n_$V,(n_$n[5]-n_$n[3])*n_$A,n_$C+n_$J,n_$a+n_$M,n_$u,n_$e)},n_$N.drawTextureWithTransform=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){n_$b.drawCall++;var n_$A=n_$N.uv,n_$P=n_$N.bitmap.width,n_$$=n_$N.bitmap.height;this.save(),1!=n_$V&&(this.globalAlpha*=n_$V),n_$J?(this.transform(n_$J.a,n_$J.b,n_$J.c,n_$J.d,n_$J.tx+n_$M,n_$J.ty+n_$n),this.drawImage(n_$N.source,n_$A[0]*n_$P,n_$A[1]*n_$$,(n_$A[2]-n_$A[0])*n_$P,(n_$A[5]-n_$A[3])*n_$$,n_$C,n_$a,n_$u,n_$e)):this.drawImage(n_$N.source,n_$A[0]*n_$P,n_$A[1]*n_$$,(n_$A[2]-n_$A[0])*n_$P,(n_$A[5]-n_$A[3])*n_$$,n_$C+n_$M,n_$a+n_$n,n_$u,n_$e),this.restore()},n_$N.drawTexture2=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){var n_$V=n_$n[0];if(n_$V.loaded&&n_$V.bitmap&&n_$V.source){n_$b.drawCall++;var n_$A=1!==n_$J;if(n_$A){var n_$P=this.globalAlpha;this.globalAlpha*=n_$J}var n_$$=n_$V.uv,n_$O=n_$V.bitmap.width,n_$G=n_$V.bitmap.height;n_$e?(this.save(),this.transform(n_$e.a,n_$e.b,n_$e.c,n_$e.d,n_$e.tx+n_$N,n_$e.ty+n_$C),this.drawImage(n_$V.source,n_$$[0]*n_$O,n_$$[1]*n_$G,(n_$$[2]-n_$$[0])*n_$O,(n_$$[5]-n_$$[3])*n_$G,n_$n[1]-n_$a,n_$n[2]-n_$u,n_$n[3],n_$n[4]),this.restore()):this.drawImage(n_$V.source,n_$$[0]*n_$O,n_$$[1]*n_$G,(n_$$[2]-n_$$[0])*n_$O,(n_$$[5]-n_$$[3])*n_$G,n_$n[1]-n_$a+n_$N,n_$n[2]-n_$u+n_$C,n_$n[3],n_$n[4]),n_$A&&(this.globalAlpha=n_$P)}},n_$N.fillTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){if(!n_$n.pat){if(n_$N.uv!=n_$PN.DEF_UV){var n_$V=new n_$WN("2D");n_$V.getContext("2d"),n_$V.size(n_$N.width,n_$N.height),n_$V.context.drawTexture(n_$N,0,0,n_$N.width,n_$N.height,0,0),n_$N=new n_$PN(n_$V)}n_$n.pat=this.createPattern(n_$N.bitmap.source,n_$J)}var n_$A=n_$C,n_$P=n_$a,n_$$=0,n_$O=0;n_$M&&(n_$A+=n_$M.x%n_$N.width,n_$P+=n_$M.y%n_$N.height,n_$$-=n_$M.x%n_$N.width,n_$O-=n_$M.y%n_$N.height),this.translate(n_$A,n_$P),this.fillRect(n_$$,n_$O,n_$u,n_$e,n_$n.pat),this.translate(-n_$A,-n_$P)},n_$N.drawTriangle=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){var n_$V=n_$N.bitmap,n_$A=n_$V.source,n_$P=n_$N.width,n_$$=n_$N.height,n_$O=n_$V.width,n_$G=n_$V.height,n_$z=n_$a[n_$u]*n_$O,n_$f=n_$a[n_$e]*n_$O,n_$t=n_$a[n_$J]*n_$O,n_$g=n_$a[n_$u+1]*n_$G,n_$x=n_$a[n_$e+1]*n_$G,n_$W=n_$a[n_$J+1]*n_$G,n_$v=n_$C[n_$u],n_$X=n_$C[n_$e],n_$r=n_$C[n_$J],n_$c=n_$C[n_$u+1],n_$E=n_$C[n_$e+1],n_$F=n_$C[n_$J+1];if(n_$n){var n_$D=(n_$v+n_$X+n_$r)/3,n_$s=(n_$c+n_$E+n_$F)/3,n_$q=n_$v-n_$D,n_$_=n_$c-n_$s,n_$d=Math.sqrt(n_$q*n_$q+n_$_*n_$_);n_$v=n_$D+n_$q/n_$d*(n_$d+1),n_$c=n_$s+n_$_/n_$d*(n_$d+1),n_$_=n_$E-n_$s,n_$X=n_$D+(n_$q=n_$X-n_$D)/(n_$d=Math.sqrt(n_$q*n_$q+n_$_*n_$_))*(n_$d+1),n_$E=n_$s+n_$_/n_$d*(n_$d+1),n_$_=n_$F-n_$s,n_$r=n_$D+(n_$q=n_$r-n_$D)/(n_$d=Math.sqrt(n_$q*n_$q+n_$_*n_$_))*(n_$d+1),n_$F=n_$s+n_$_/n_$d*(n_$d+1)}this.save(),n_$M&&this.transform(n_$M.a,n_$M.b,n_$M.c,n_$M.d,n_$M.tx,n_$M.ty),this.beginPath(),this.moveTo(n_$v,n_$c),this.lineTo(n_$X,n_$E),this.lineTo(n_$r,n_$F),this.closePath(),this.clip();var n_$Q=1/(n_$z*n_$x+n_$g*n_$t+n_$f*n_$W-n_$x*n_$t-n_$g*n_$f-n_$z*n_$W),n_$l=n_$v*n_$x+n_$g*n_$r+n_$X*n_$W-n_$x*n_$r-n_$g*n_$X-n_$v*n_$W,n_$i=n_$z*n_$X+n_$v*n_$t+n_$f*n_$r-n_$X*n_$t-n_$v*n_$f-n_$z*n_$r,n_$j=n_$z*n_$x*n_$r+n_$g*n_$X*n_$t+n_$v*n_$f*n_$W-n_$v*n_$x*n_$t-n_$g*n_$f*n_$r-n_$z*n_$X*n_$W,n_$y=n_$c*n_$x+n_$g*n_$F+n_$E*n_$W-n_$x*n_$F-n_$g*n_$E-n_$c*n_$W,n_$T=n_$z*n_$E+n_$c*n_$t+n_$f*n_$F-n_$E*n_$t-n_$c*n_$f-n_$z*n_$F,n_$L=n_$z*n_$x*n_$F+n_$g*n_$E*n_$t+n_$c*n_$f*n_$W-n_$c*n_$x*n_$t-n_$g*n_$f*n_$F-n_$z*n_$E*n_$W;this.transform(n_$l*n_$Q,n_$y*n_$Q,n_$i*n_$Q,n_$T*n_$Q,n_$j*n_$Q,n_$L*n_$Q),this.drawImage(n_$A,n_$N.uv[0]*n_$O,n_$N.uv[1]*n_$G,n_$P,n_$$,n_$N.uv[0]*n_$O,n_$N.uv[1]*n_$G,n_$P,n_$$),this.restore()},n_$N.flush=function(){return 0},n_$N.fillWords=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){n_$u&&(this.font=n_$u),n_$e&&(this.fillStyle=n_$e);this.textBaseline="top",this.textAlign="left";for(var n_$M=0,n_$n=n_$N.length;n_$M<n_$n;n_$M++){var n_$V=n_$N[n_$M];if(this.__fillText(n_$V.char,n_$V.x+n_$C,n_$V.y+n_$a),1===n_$J){var n_$A=n_$V.height,n_$P=.5*n_$V.style.letterSpacing;n_$P||(n_$P=0),this.beginPath(),this.strokeStyle=n_$e,this.lineWidth=1,this.moveTo(n_$C+n_$V.x-n_$P+.5,n_$a+n_$V.y+n_$A+.5),this.lineTo(n_$C+n_$V.x+n_$V.width+n_$P+.5,n_$a+n_$V.y+n_$A+.5),this.stroke()}}},n_$N.fillBorderWords=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$u&&(this.font=n_$u),n_$e&&(this.fillStyle=n_$e),this.textBaseline="top",this.lineWidth=n_$M,this.textAlign="left",this.strokeStyle=n_$J;for(var n_$n=0,n_$V=n_$N.length;n_$n<n_$V;n_$n++){var n_$A=n_$N[n_$n];this.__strokeText(n_$A.char,n_$A.x+n_$C,n_$A.y+n_$a),this.__fillText(n_$A.char,n_$A.x+n_$C,n_$A.y+n_$a)}},n_$N.destroy=function(){this.canvas.width=this.canvas.height=0},n_$N.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},n_$N.drawCurves=function(n_$N,n_$C,n_$a){this.beginPath(),this.strokeStyle=n_$a[3],this.lineWidth=n_$a[4];var n_$u=n_$a[2];n_$N+=n_$a[0],n_$C+=n_$a[1],this.moveTo(n_$N+n_$u[0],n_$C+n_$u[1]);for(var n_$e=2,n_$J=n_$u.length;n_$e<n_$J;)this.quadraticCurveTo(n_$N+n_$u[n_$e++],n_$C+n_$u[n_$e++],n_$N+n_$u[n_$e++],n_$C+n_$u[n_$e++]);this.stroke()},n_$n.__init__=function(n_$C){var n_$a=laya.resource.Context.prototype;if(!(n_$C=n_$C||CanvasRenderingContext2D.prototype).inited){n_$C.inited=!0,n_$C.__fillText=n_$C.fillText,n_$C.__fillRect=n_$C.fillRect,n_$C.__strokeText=n_$C.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(n_$N){n_$C[n_$N]=n_$a[n_$N]})}},n_$n.replaceCanvasGetSet=function(n_$N,n_$C){var n_$a=Object.getOwnPropertyDescriptor(n_$N,n_$C);if(!n_$a||!n_$a.configurable)return!1;var n_$u,n_$e={};for(n_$u in n_$a)"set"!=n_$u&&(n_$e[n_$u]=n_$a[n_$u]);var n_$J=n_$a.set;return n_$e.set=function(n_$N){n_$J.call(this,n_$N);var n_$C=this.getContext("2d");n_$C&&"__reset"in n_$C&&n_$C.__reset()},Object.defineProperty(n_$N,n_$C,n_$e),!0},n_$n.replaceGetSet=function(n_$N,n_$C){var n_$a=Object.getOwnPropertyDescriptor(n_$N,n_$C);if(!n_$a||!n_$a.configurable)return!1;var n_$u,n_$e={};for(n_$u in n_$a)"set"!=n_$u&&(n_$e[n_$u]=n_$a[n_$u]);var n_$J=n_$a.set,n_$M="___"+n_$C+"__";return n_$n.newKeys.push(n_$M),n_$e.set=function(n_$N){n_$N!=this[n_$M]&&(this[n_$M]=n_$N,n_$J.call(this,n_$N))},Object.defineProperty(n_$N,n_$C,n_$e),!0},n_$n._default=new n_$n,n_$n.newKeys=[],n_$V(n_$n,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),n_$n}(),n_$L=function(){function n_$J(n_$N){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++n_$J._uniqueIDCounter,this._name=n_$N||"Content Manager",n_$J._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,n_$J._resourceManagers.push(this),this._resources=[],this._records={}}n_$P(n_$J,"laya.resource.ResourceManager");var n_$N=n_$J.prototype;return n_$c.imps(n_$N,{"laya.resource.IDispose":!0}),n_$N.getResourceByIndex=function(n_$N){return this._resources[n_$N]},n_$N.getResourcesLength=function(){return this._resources.length},n_$N.addResource=function(n_$N){return n_$N.resourceManager&&n_$N.resourceManager.removeResource(n_$N),-1===this._resources.indexOf(n_$N)&&((n_$N._resourceManager=this)._resources.push(n_$N),this.addRecord(n_$N.uri,n_$N.__className,n_$N.memorySize),this.addSize(n_$N.memorySize),!0)},n_$N.removeResource=function(n_$N){var n_$C=this._resources.indexOf(n_$N);return-1!==n_$C&&(this._resources.splice(n_$C,1),n_$N._resourceManager=null,this._memorySize-=n_$N.memorySize,this.addRecord(n_$N.uri,n_$N.__className,-n_$N.memorySize),!0)},n_$N.unload=function(){for(var n_$N=this._resources.slice(0,this._resources.length),n_$C=0;n_$C<n_$N.length;n_$C++){n_$N[n_$C].destroy()}n_$N.length=0},n_$N.dispose=function(){if(this===n_$J._systemResourceManager)throw new Error("systemResourceManager不能被释放！");n_$J._resourceManagers.splice(n_$J._resourceManagers.indexOf(this),1),n_$J._isResourceManagersSorted=!1;for(var n_$N=this._resources.slice(0,this._resources.length),n_$C=0;n_$C<n_$N.length;n_$C++){var n_$a=n_$N[n_$C];n_$a.resourceManager.removeResource(n_$a),n_$a.destroy()}n_$N.length=0},n_$N.addSize=function(n_$N){n_$N&&(this.autoRelease&&0<n_$N&&this._memorySize+n_$N>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=n_$N)},n_$N.addRecord=function(n_$N,n_$C,n_$a){DEBUG&&n_$a&&!n_$N&&console.error(n_$N,n_$C,n_$a)},n_$N.garbageCollection=function(n_$N){var n_$C=this._resources;(n_$C=n_$C.slice()).sort(function(n_$N,n_$C){if(!n_$N||!n_$C)throw new Error("a或b不能为空！");return n_$N.released&&n_$C.released?0:n_$N.released?1:n_$C.released?-1:n_$N._lastUseFrameCount-n_$C._lastUseFrameCount});for(var n_$a=n_$b.loopCount,n_$u=0,n_$e=n_$C.length;n_$u<n_$e;n_$u++){var n_$J=n_$C[n_$u];if(!(1<n_$a-n_$J._lastUseFrameCount))return void(this._memorySize>=n_$N&&(this._isOverflow=!0));if(n_$J.releaseResource(),this._memorySize<n_$N)return void(this._isOverflow=!1)}},n_$z(0,n_$N,"id",function(){return this._id}),n_$z(0,n_$N,"name",function(){return this._name},function(n_$N){!n_$N&&""===n_$N||this._name===n_$N||(this._name=n_$N,n_$J._isResourceManagersSorted=!1)}),n_$z(0,n_$N,"memorySize",function(){return this._memorySize}),n_$z(0,n_$N,"records",function(){return this._records}),n_$z(1,n_$J,"systemResourceManager",function(){return n_$J._systemResourceManager}),n_$J.__init__=function(){n_$J.currentResourceManager=n_$J.systemResourceManager},n_$J.getLoadedResourceManagerByIndex=function(n_$N){return n_$J._resourceManagers[n_$N]},n_$J.getLoadedResourceManagersCount=function(){return n_$J._resourceManagers.length},n_$J.recreateContentManagers=function(n_$N){void 0===n_$N&&(n_$N=!1);for(var n_$C=n_$J.currentResourceManager,n_$a=0;n_$a<n_$J._resourceManagers.length;n_$a++){n_$J.currentResourceManager=n_$J._resourceManagers[n_$a];for(var n_$u=0;n_$u<n_$J.currentResourceManager._resources.length;n_$u++)n_$J.currentResourceManager._resources[n_$u].releaseResource(n_$N),n_$J.currentResourceManager._resources[n_$u].activeResource(n_$N)}n_$J.currentResourceManager=n_$C},n_$J.releaseContentManagers=function(n_$N){void 0===n_$N&&(n_$N=!1);for(var n_$C=n_$J.currentResourceManager,n_$a=0;n_$a<n_$J._resourceManagers.length;n_$a++){n_$J.currentResourceManager=n_$J._resourceManagers[n_$a];for(var n_$u=0;n_$u<n_$J.currentResourceManager._resources.length;n_$u++){var n_$e=n_$J.currentResourceManager._resources[n_$u];!n_$e.released&&n_$e.releaseResource(n_$N)}}n_$J.currentResourceManager=n_$C},n_$J._uniqueIDCounter=0,n_$J._isResourceManagersSorted=!1,n_$J._resourceManagers=[],n_$V(n_$J,["_systemResourceManager",function(){return this._systemResourceManager=new n_$J("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=n_$J._systemResourceManager}]),n_$J}(),n_$R=(function(){function n_$N(){}n_$P(n_$N,"laya.system.System"),n_$N.changeDefinition=function(n_$N,n_$C){n_$c[n_$N]=n_$C;var n_$a=n_$N+"=classObj";n_$c._runScript(n_$a)},n_$N.__init__=function(){n_$i.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function n_$a(){}return n_$P(n_$a,"laya.utils.Browser"),n_$z(1,n_$a,"pixelRatio",function(){return n_$a.__init__(),-1<n_$a.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:n_$_.getPixelRatio()}),n_$z(1,n_$a,"height",function(){return n_$a.__init__(),(n_$c.stage&&n_$c.stage.canvasRotation?n_$a.clientWidth:n_$a.clientHeight)*n_$a.pixelRatio}),n_$z(1,n_$a,"clientWidth",function(){return n_$a.__init__(),n_$a.window.innerWidth||n_$a.document.body.clientWidth}),n_$z(1,n_$a,"window",function(){return n_$a.__init__(),n_$a._window}),n_$z(1,n_$a,"clientHeight",function(){return n_$a.__init__(),n_$a.window.innerHeight||n_$a.document.body.clientHeight||n_$a.document.documentElement.clientHeight}),n_$z(1,n_$a,"width",function(){return n_$a.__init__(),(n_$c.stage&&n_$c.stage.canvasRotation?n_$a.clientHeight:n_$a.clientWidth)*n_$a.pixelRatio}),n_$z(1,n_$a,"container",function(){return n_$a.__init__(),n_$a._container||((n_$a._container=n_$a.createElement("div")).id="layaContainer",n_$a.document.body.appendChild(n_$a._container)),n_$a._container},function(n_$N){n_$a._container=n_$N}),n_$z(1,n_$a,"document",function(){return n_$a.__init__(),n_$a._document}),n_$a.__init__=function(){if(!n_$a._window){n_$a._window=n_$_.getWindow(),n_$a._document=n_$a.window.document,n_$a._window.addEventListener("message",function(n_$N){laya.utils.Browser._onMessage(n_$N)},!1),n_$a.document.__createElement=n_$a.document.createElement,n_$M.requestAnimationFrame=n_$M.requestAnimationFrame||n_$M.webkitRequestAnimationFrame||n_$M.mozRequestAnimationFrame||n_$M.oRequestAnimationFrame||n_$M.msRequestAnimationFrame||function(n_$N){return n_$M.setTimeout(n_$N,1e3/60)};var n_$N=n_$M.document.body.style;n_$N["-webkit-user-select"]="none",n_$N["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",n_$a.userAgent=n_$a.window.navigator.userAgent,n_$a.onIOS=!!(n_$a.u=n_$a.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),n_$a.onMobile=-1<n_$a.u.indexOf("Mobile"),n_$a.onIPhone=-1<n_$a.u.indexOf("iPhone"),n_$a.onMac=-1<n_$a.u.indexOf("Mac OS X"),n_$a.onIPad=-1<n_$a.u.indexOf("iPad"),n_$a.onAndroid=-1<n_$a.u.indexOf("Android")||-1<n_$a.u.indexOf("Adr"),n_$a.onWP=-1<n_$a.u.indexOf("Windows Phone"),n_$a.onQQBrowser=-1<n_$a.u.indexOf("QQBrowser"),n_$a.onMQQBrowser=-1<n_$a.u.indexOf("MQQBrowser")||-1<n_$a.u.indexOf("Mobile")&&-1<n_$a.u.indexOf("QQ"),n_$a.onIE=!!n_$a.window.ActiveXObject||"ActiveXObject"in n_$a.window,n_$a.onWeiXin=-1<n_$a.u.indexOf("MicroMessenger"),n_$a.onPC=!n_$a.onMobile,n_$a.onSafari=-1<n_$a.u.indexOf("Safari"),n_$a.onFirefox=-1<n_$a.u.indexOf("Firefox"),n_$a.onEdge=-1<n_$a.u.indexOf("Edge"),n_$a.onMiniGame=-1<n_$a.u.indexOf("MiniGame"),n_$a.onLimixiu=-1<n_$a.u.indexOf("limixiu"),n_$a.httpProtocol="http:"==n_$a.window.location.protocol,n_$a.onMiniGame&&null==n_$a.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),n_$a.webAudioEnabled=!!(n_$a.window.AudioContext||n_$a.window.webkitAudioContext||n_$a.window.mozAudioContext),n_$a.soundType=n_$a.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",n_$eN=n_$a.webAudioEnabled?n_$JN:n_$aN,n_$a.webAudioEnabled&&n_$JN.initWebAudio(),n_$aN._initMusicAudio(),n_$a.enableTouch="ontouchstart"in n_$M||n_$M.DocumentTouch&&n_$C instanceof DocumentTouch,n_$M.focus(),n_$q._soundClass=n_$eN,n_$q._musicClass=n_$aN,n_$i._mainCanvas=n_$i._mainCanvas||n_$WN.create("2D"),n_$a.canvas||(n_$a.canvas=n_$WN.create("2D"),n_$a.context=n_$a.canvas.getContext("2d"))}},n_$a._onMessage=function(n_$N){if(n_$N.data&&"size"==n_$N.data.name){if(n_$a.window.innerWidth=n_$N.data.width,n_$a.window.innerHeight=n_$N.data.height,n_$a.window.__innerHeight=n_$N.data.clientHeight,!n_$a.document.createEvent)return void console.warn("no document.createEvent");var n_$C=n_$a.document.createEvent("HTMLEvents");return n_$C.initEvent("resize",!1,!1),void n_$a.window.dispatchEvent(n_$C)}},n_$a.createElement=function(n_$N){return n_$a.__init__(),n_$a.document.__createElement(n_$N)},n_$a.getElementById=function(n_$N){return n_$a.__init__(),n_$a.document.getElementById(n_$N)},n_$a.removeElement=function(n_$N){n_$N&&n_$N.parentNode&&n_$N.parentNode.removeChild(n_$N)},n_$a.now=function(){return n_$_.now()},n_$a._window=null,n_$a._document=null,n_$a._container=null,n_$a.userAgent=null,n_$a.u=null,n_$a.onIOS=!1,n_$a.onMac=!1,n_$a.onMobile=!1,n_$a.onIPhone=!1,n_$a.onIPad=!1,n_$a.onAndroid=!1,n_$a.onWP=!1,n_$a.onQQBrowser=!1,n_$a.onMQQBrowser=!1,n_$a.onSafari=!1,n_$a.onFirefox=!1,n_$a.onEdge=!1,n_$a.onIE=!1,n_$a.onWeiXin=!1,n_$a.onMiniGame=!1,n_$a.onLimixiu=!1,n_$a.onPC=!1,n_$a.httpProtocol=!1,n_$a.webAudioEnabled=!1,n_$a.soundType=null,n_$a.enableTouch=!1,n_$a.canvas=null,n_$a.context=null,n_$a.__init$=function(){},n_$a}()),n_$w=function(){function n_$C(n_$N){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,n_$N?(this._u8d_=new Uint8Array(n_$N),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}n_$P(n_$C,"laya.utils.Byte");var n_$N=n_$C.prototype;return n_$N.___resizeBuffer=function(n_$C){try{var n_$N=new Uint8Array(n_$C);null!=this._u8d_&&(this._u8d_.length<=n_$C?n_$N.set(this._u8d_):n_$N.set(this._u8d_.subarray(0,n_$C))),this._u8d_=n_$N,this._d_=new DataView(n_$N.buffer)}catch(n_$N){throw"___resizeBuffer err:"+n_$C}},n_$N.getString=function(){return this.rUTF(this.getUint16())},n_$N.getFloat32Array=function(n_$N,n_$C){var n_$a=n_$N+n_$C;n_$a=n_$a>this._length?this._length:n_$a;var n_$u=new Float32Array(this._d_.buffer.slice(n_$N,n_$a));return this._pos_=n_$a,n_$u},n_$N.getUint8Array=function(n_$N,n_$C){var n_$a=n_$N+n_$C;n_$a=n_$a>this._length?this._length:n_$a;var n_$u=new Uint8Array(this._d_.buffer.slice(n_$N,n_$a));return this._pos_=n_$a,n_$u},n_$N.getInt16Array=function(n_$N,n_$C){var n_$a=n_$N+n_$C;n_$a=n_$a>this._length?this._length:n_$a;var n_$u=new Int16Array(this._d_.buffer.slice(n_$N,n_$a));return this._pos_=n_$a,n_$u},n_$N.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var n_$N=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,n_$N},n_$N.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var n_$N=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,n_$N},n_$N.writeFloat32=function(n_$N){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,n_$N,this._xd_),this._pos_+=4},n_$N.writeFloat64=function(n_$N){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,n_$N,this._xd_),this._pos_+=8},n_$N.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var n_$N=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,n_$N},n_$N.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var n_$N=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,n_$N},n_$N.writeInt32=function(n_$N){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,n_$N,this._xd_),this._pos_+=4},n_$N.writeUint32=function(n_$N){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,n_$N,this._xd_),this._pos_+=4},n_$N.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var n_$N=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,n_$N},n_$N.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var n_$N=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,n_$N},n_$N.writeUint16=function(n_$N){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,n_$N,this._xd_),this._pos_+=2},n_$N.writeInt16=function(n_$N){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,n_$N,this._xd_),this._pos_+=2},n_$N.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},n_$N.writeUint8=function(n_$N){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,n_$N),this._pos_++},n_$N._getUInt8=function(n_$N){return this._d_.getUint8(n_$N)},n_$N._getUint16=function(n_$N){return this._d_.getUint16(n_$N,this._xd_)},n_$N._getMatrix=function(){return new n_$d(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},n_$N.rUTF=function(n_$N){for(var n_$C=[],n_$a=this._pos_+n_$N,n_$u=0,n_$e=0,n_$J=0,n_$M=String.fromCharCode,n_$n=this._u8d_;this._pos_<n_$a;)(n_$u=n_$n[this._pos_++])<128?0!=n_$u&&n_$C.push(n_$M(n_$u)):n_$u<224?n_$C.push(n_$M((63&n_$u)<<6|127&n_$n[this._pos_++])):n_$u<240?(n_$e=n_$n[this._pos_++],n_$C.push(n_$M((31&n_$u)<<12|(127&n_$e)<<6|127&n_$n[this._pos_++]))):(n_$e=n_$n[this._pos_++],n_$J=n_$n[this._pos_++],n_$C.push(n_$M((15&n_$u)<<18|(127&n_$e)<<12|n_$J<<6&127|127&n_$n[this._pos_++]))),0;return n_$C.join("")},n_$N.getCustomString=function(n_$N){for(var n_$C=[],n_$a=0,n_$u=0,n_$e=0,n_$J=String.fromCharCode,n_$M=this._u8d_;0<n_$N;)if((n_$u=n_$M[this._pos_])<128)n_$C.push(n_$J(n_$u)),this._pos_++,n_$N--;else for(n_$a=n_$u-128,this._pos_++,n_$N-=n_$a;0<n_$a;)n_$u=n_$M[this._pos_++],n_$e=n_$M[this._pos_++],n_$C.push(n_$J(n_$e<<8|n_$u)),n_$a--;return n_$C.join("")},n_$N.clear=function(){this._pos_=0,this.length=0},n_$N.__getBuffer=function(){return this._d_.buffer},n_$N.writeUTFBytes=function(n_$N){for(var n_$C=0,n_$a=(n_$N+="").length;n_$C<n_$a;n_$C++){var n_$u=n_$N.charCodeAt(n_$C);n_$u<=127?this.writeByte(n_$u):n_$u<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|n_$u>>6,128|63&n_$u],this._pos_),this._pos_+=2):n_$u<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|n_$u>>12,128|n_$u>>6&63,128|63&n_$u],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|n_$u>>18,128|n_$u>>12&63,128|n_$u>>6&63,128|63&n_$u],this._pos_),this._pos_+=4)}},n_$N.writeUTFString=function(n_$N){var n_$C=this.pos;this.writeUint16(1),this.writeUTFBytes(n_$N);var n_$a=this.pos-n_$C-2;if(65536<=n_$a)throw"writeUTFString byte len more than 65536";this._d_.setUint16(n_$C,n_$a,this._xd_)},n_$N.readUTFString=function(){return this.readUTFBytes(this.getUint16())},n_$N.getUTFString=function(){return this.readUTFString()},n_$N.readUTFBytes=function(n_$N){if(void 0===n_$N&&(n_$N=-1),0==n_$N)return"";var n_$C=this.bytesAvailable;if(n_$C<n_$N)throw"readUTFBytes error - Out of bounds";return n_$N=0<n_$N?n_$N:n_$C,this.rUTF(n_$N)},n_$N.getUTFBytes=function(n_$N){return void 0===n_$N&&(n_$N=-1),this.readUTFBytes(n_$N)},n_$N.writeByte=function(n_$N){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,n_$N),this._pos_+=1},n_$N.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},n_$N.getByte=function(){return this.readByte()},n_$N.ensureWrite=function(n_$N){this._length<n_$N&&(this._length=n_$N),this._allocated_<n_$N&&(this.length=n_$N)},n_$N.writeArrayBuffer=function(n_$N,n_$C,n_$a){if(void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),n_$C<0||n_$a<0)throw"writeArrayBuffer error - Out of bounds";0==n_$a&&(n_$a=n_$N.byteLength-n_$C),this.ensureWrite(this._pos_+n_$a);var n_$u=new Uint8Array(n_$N);this._u8d_.set(n_$u.subarray(n_$C,n_$C+n_$a),this._pos_),this._pos_+=n_$a},n_$z(0,n_$N,"buffer",function(){var n_$N=this._d_.buffer;return n_$N.byteLength==this.length?n_$N:n_$N.slice(0,this.length)}),n_$z(0,n_$N,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(n_$N){this._xd_="littleEndian"==n_$N}),n_$z(0,n_$N,"length",function(){return this._length},function(n_$N){this._allocated_<n_$N?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(n_$N,2*this._allocated_))):this._allocated_>n_$N&&this.___resizeBuffer(this._allocated_=n_$N),this._length=n_$N}),n_$z(0,n_$N,"pos",function(){return this._pos_},function(n_$N){this._pos_=n_$N}),n_$z(0,n_$N,"bytesAvailable",function(){return this._length-this._pos_}),n_$C.getSystemEndian=function(){if(!n_$C._sysEndian){var n_$N=new ArrayBuffer(2);new DataView(n_$N).setInt16(0,256,!0),n_$C._sysEndian=256===new Int16Array(n_$N)[0]?"littleEndian":"bigEndian"}return n_$C._sysEndian},n_$C.BIG_ENDIAN="bigEndian",n_$C.LITTLE_ENDIAN="littleEndian",n_$C._sysEndian=null,n_$C}(),n_$B=function(){function n_$e(){}return n_$P(n_$e,"laya.utils.CacheManager"),n_$e.regCacheByFunction=function(n_$N,n_$C){var n_$a;n_$e.unRegCacheByFunction(n_$N,n_$C),n_$a={tryDispose:n_$N,getCacheList:n_$C},n_$e._cacheList.push(n_$a)},n_$e.unRegCacheByFunction=function(n_$N,n_$C){var n_$a,n_$u=0;for(n_$a=n_$e._cacheList.length,n_$u=0;n_$u<n_$a;n_$u++)if(n_$e._cacheList[n_$u].tryDispose==n_$N&&n_$e._cacheList[n_$u].getCacheList==n_$C)return void n_$e._cacheList.splice(n_$u,1)},n_$e.forceDispose=function(){var n_$N=0,n_$C=n_$e._cacheList.length;for(n_$N=0;n_$N<n_$C;n_$N++)n_$e._cacheList[n_$N].tryDispose(!0)},n_$e.beginCheck=function(n_$N){void 0===n_$N&&(n_$N=15e3),n_$c.timer.loop(n_$N,null,n_$e._checkLoop)},n_$e.stopCheck=function(){n_$c.timer.clear(null,n_$e._checkLoop)},n_$e._checkLoop=function(){var n_$N=n_$e._cacheList;if(!(n_$N.length<1)){var n_$C,n_$a=n_$R.now(),n_$u=0;for(n_$C=n_$u=n_$N.length;0<n_$u&&(n_$N[n_$e._index=++n_$e._index%n_$C].tryDispose(!1),!(n_$R.now()-n_$a>n_$e.loopTimeLimit));)n_$u--}},n_$e.loopTimeLimit=2,n_$e._cacheList=[],n_$e._index=0,n_$e}(),n_$Y=function(){function n_$G(){}return n_$P(n_$G,"laya.utils.ClassUtils"),n_$G.regClass=function(n_$N,n_$C){n_$G._classMap[n_$N]=n_$C},n_$G.getRegClass=function(n_$N){return n_$G._classMap[n_$N]},n_$G.getInstance=function(n_$N){var n_$C=n_$G.getClass(n_$N);return n_$C?new n_$C:(console.warn("[error] Undefined class:",n_$N),null)},n_$G.createByJson=function(n_$N,n_$C,n_$a,n_$u,n_$e){"string"==typeof n_$N&&(n_$N=JSON.parse(n_$N));var n_$J=n_$N.props;if(!n_$C&&!(n_$C=n_$e?n_$e.runWith(n_$N):n_$G.getInstance(n_$J.runtime||n_$N.type)))return null;var n_$M=n_$N.child;if(n_$M)for(var n_$n=0,n_$V=n_$M.length;n_$n<n_$V;n_$n++){var n_$A=n_$M[n_$n];if("render"!==n_$A.props.name&&"render"!==n_$A.props.renderType||!n_$C._$set_itemRender)if("Graphic"==n_$A.type)n_$G.addGraphicsToSprite(n_$A,n_$C);else if(n_$G.isDrawType(n_$A.type))n_$G.addGraphicToSprite(n_$A,n_$C,!0);else{var n_$P=n_$G.createByJson(n_$A,null,n_$a,n_$u,n_$e);"Script"==n_$A.type?n_$P.hasOwnProperty("owner")?n_$P.owner=n_$C:n_$P.hasOwnProperty("target")&&(n_$P.target=n_$C):"mask"==n_$A.props.renderType?n_$C.mask=n_$P:n_$C.addChild(n_$P)}else n_$C.itemRender=n_$A}if(n_$J)for(var n_$$ in n_$J){var n_$O=n_$J[n_$$];"var"===n_$$&&n_$a?n_$a[n_$O]=n_$C:n_$O instanceof Array&&"function"==typeof n_$C[n_$$]?n_$C[n_$$].apply(n_$C,n_$O):n_$C[n_$$]=n_$O}return n_$u&&n_$N.customProps&&n_$u.runWith([n_$C,n_$N]),n_$C.created&&n_$C.created(),n_$C},n_$G.addGraphicsToSprite=function(n_$N,n_$C){var n_$a;if((n_$a=n_$N.child)&&!(n_$a.length<1)){var n_$u;n_$u=n_$G._getGraphicsFromSprite(n_$N,n_$C);var n_$e=0,n_$J=0;n_$N.props&&(n_$e=n_$G._getObjVar(n_$N.props,"x",0),n_$J=n_$G._getObjVar(n_$N.props,"y",0)),0!=n_$e&&0!=n_$J&&n_$u.translate(n_$e,n_$J);var n_$M,n_$n=0;for(n_$M=n_$a.length,n_$n=0;n_$n<n_$M;n_$n++)n_$G._addGraphicToGraphics(n_$a[n_$n],n_$u);0!=n_$e&&0!=n_$J&&n_$u.translate(-n_$e,-n_$J)}},n_$G.addGraphicToSprite=function(n_$N,n_$C,n_$a){var n_$u;void 0===n_$a&&(n_$a=!1),n_$u=n_$a?n_$G._getGraphicsFromSprite(n_$N,n_$C):n_$C.graphics,n_$G._addGraphicToGraphics(n_$N,n_$u)},n_$G._getGraphicsFromSprite=function(n_$N,n_$C){var n_$a,n_$u;if(!n_$N||!n_$N.props)return n_$C.graphics;switch(n_$u=n_$N.props.renderType){case"hit":case"unHit":var n_$e;n_$C.hitArea||(n_$C.hitArea=new n_$p),(n_$e=n_$C.hitArea)[n_$u]||(n_$e[n_$u]=new n_$O),n_$a=n_$e[n_$u]}return n_$a||(n_$a=n_$C.graphics),n_$a},n_$G._getTransformData=function(n_$N){var n_$C;(n_$N.hasOwnProperty("pivotX")||n_$N.hasOwnProperty("pivotY"))&&(n_$C=n_$C||new n_$d).translate(-n_$G._getObjVar(n_$N,"pivotX",0),-n_$G._getObjVar(n_$N,"pivotY",0));var n_$a=n_$G._getObjVar(n_$N,"scaleX",1),n_$u=n_$G._getObjVar(n_$N,"scaleY",1),n_$e=n_$G._getObjVar(n_$N,"rotation",0);n_$G._getObjVar(n_$N,"skewX",0),n_$G._getObjVar(n_$N,"skewY",0);return 1==n_$a&&1==n_$u&&0==n_$e||((n_$C=n_$C||new n_$d).scale(n_$a,n_$u),n_$C.rotate(.0174532922222222*n_$e)),n_$C},n_$G._addGraphicToGraphics=function(n_$N,n_$C){var n_$a,n_$u;if((n_$a=n_$N.props)&&(n_$u=n_$G.DrawTypeDic[n_$N.type])){var n_$e,n_$J;n_$e=n_$C;var n_$M=n_$G._getParams(n_$a,n_$u[1],n_$u[2],n_$u[3]);((n_$J=n_$G._tM)||1!=n_$G._alpha)&&(n_$e.save(),n_$J&&n_$e.transform(n_$J),1!=n_$G._alpha&&n_$e.alpha(n_$G._alpha)),n_$e[n_$u[0]].apply(n_$e,n_$M),(n_$J||1!=n_$G._alpha)&&n_$e.restore()}},n_$G._adptLineData=function(n_$N){return n_$N[2]=parseFloat(n_$N[0])+parseFloat(n_$N[2]),n_$N[3]=parseFloat(n_$N[1])+parseFloat(n_$N[3]),n_$N},n_$G._adptTextureData=function(n_$N){return n_$N[0]=n_$nN.getRes(n_$N[0]),n_$N},n_$G._adptLinesData=function(n_$N){return n_$N[2]=n_$G._getPointListByStr(n_$N[2]),n_$N},n_$G.isDrawType=function(n_$N){return"Image"!=n_$N&&n_$G.DrawTypeDic.hasOwnProperty(n_$N)},n_$G._getParams=function(n_$N,n_$C,n_$a,n_$u){var n_$e;void 0===n_$a&&(n_$a=0),(n_$e=n_$G._temParam).length=n_$C.length;var n_$J,n_$M,n_$n=0;for(n_$J=n_$C.length,n_$n=0;n_$n<n_$J;n_$n++)n_$e[n_$n]=n_$G._getObjVar(n_$N,n_$C[n_$n][0],n_$C[n_$n][1]);return n_$G._alpha=n_$G._getObjVar(n_$N,"alpha",1),n_$M=n_$G._getTransformData(n_$N),n_$G._tM=n_$M?(n_$a||(n_$a=0),n_$M.translate(n_$e[n_$a],n_$e[n_$a+1]),n_$e[n_$a]=n_$e[n_$a+1]=0,n_$M):null,n_$u&&n_$G[n_$u]&&(n_$e=n_$G[n_$u](n_$e)),n_$e},n_$G._getPointListByStr=function(n_$N){var n_$C,n_$a,n_$u=0;for(n_$a=(n_$C=n_$N.split(",")).length,n_$u=0;n_$u<n_$a;n_$u++)n_$C[n_$u]=parseFloat(n_$C[n_$u]);return n_$C},n_$G._getObjVar=function(n_$N,n_$C,n_$a){return n_$N.hasOwnProperty(n_$C)?n_$N[n_$C]:n_$a},n_$G._temParam=[],n_$G._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},n_$G.getClass=function(n_$N){var n_$C=n_$G._classMap[n_$N]||n_$N;return"string"==typeof n_$C?n_$c.__classmap[n_$C]:n_$C},n_$G._tM=null,n_$G._alpha=NaN,n_$V(n_$G,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),n_$G}(),n_$K=function(){function n_$J(n_$N){if(this._color=[],"string"==typeof n_$N){null===(this.strColor=n_$N)&&(n_$N="#000000"),"#"==n_$N.charAt(0)&&(n_$N=n_$N.substr(1));var n_$C=n_$N.length;if(3==n_$C||4==n_$C){for(var n_$a="",n_$u=0;n_$u<n_$C;n_$u++)n_$a+=n_$N[n_$u]+n_$N[n_$u];n_$N=n_$a}var n_$e=this.numColor=parseInt(n_$N,16);if(8==n_$N.length)return void(this._color=[parseInt(n_$N.substr(0,2),16)/255,((16711680&n_$e)>>16)/255,((65280&n_$e)>>8)/255,(255&n_$e)/255])}else n_$e=this.numColor=n_$N,this.strColor=n_$I.toHexColor(n_$e);this._color=[((16711680&n_$e)>>16)/255,((65280&n_$e)>>8)/255,(255&n_$e)/255,1],this._color.__id=++n_$J._COLODID}return n_$P(n_$J,"laya.utils.Color"),n_$J._initDefault=function(){for(var n_$N in n_$J._DEFAULT={},n_$J._COLOR_MAP)n_$J._SAVE[n_$N]=n_$J._DEFAULT[n_$N]=new n_$J(n_$J._COLOR_MAP[n_$N]);return n_$J._DEFAULT},n_$J._initSaveMap=function(){for(var n_$N in n_$J._SAVE_SIZE=0,n_$J._SAVE={},n_$J._DEFAULT)n_$J._SAVE[n_$N]=n_$J._DEFAULT[n_$N]},n_$J.create=function(n_$N){var n_$C=n_$J._SAVE[n_$N+""];return null!=n_$C?n_$C:(n_$J._SAVE_SIZE<1e3||n_$J._initSaveMap(),n_$J._SAVE[n_$N+""]=new n_$J(n_$N))},n_$J._SAVE={},n_$J._SAVE_SIZE=0,n_$J._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},n_$J._DEFAULT=n_$J._initDefault(),n_$J._COLODID=1,n_$J}(),n_$k=(function(){function n_$N(){this._values=[],this._keys=[]}n_$P(n_$N,"laya.utils.Dictionary");var n_$C=n_$N.prototype;n_$C.set=function(n_$N,n_$C){var n_$a=this.indexOf(n_$N);0<=n_$a?this._values[n_$a]=n_$C:(this._keys.push(n_$N),this._values.push(n_$C))},n_$C.indexOf=function(n_$N){var n_$C=this._keys.indexOf(n_$N);return 0<=n_$C?n_$C:(n_$N="string"==typeof n_$N?Number(n_$N):"number"==typeof n_$N?n_$N.toString():n_$N,this._keys.indexOf(n_$N))},n_$C.get=function(n_$N){var n_$C=this.indexOf(n_$N);return n_$C<0?null:this._values[n_$C]},n_$C.remove=function(n_$N){var n_$C=this.indexOf(n_$N);return 0<=n_$C&&(this._keys.splice(n_$C,1),this._values.splice(n_$C,1),!0)},n_$C.clear=function(){this._values.length=0,this._keys.length=0},n_$z(0,n_$C,"values",function(){return this._values}),n_$z(0,n_$C,"keys",function(){return this._keys})}(),function(){function n_$N(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}n_$P(n_$N,"laya.utils.Dragging");var n_$C=n_$N.prototype;return n_$C.start=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){void 0===n_$n&&(n_$n=.92),this.clearTimer(),this.target=n_$N,this.area=n_$C,this.hasInertia=n_$a,this.elasticDistance=n_$C?n_$u:0,this.elasticBackTime=n_$e,this.data=n_$J,this._disableMouseEvent=n_$M,this.ratio=n_$n,1!=n_$N.globalScaleX||1!=n_$N.globalScaleY?this._parent=n_$N.parent:this._parent=n_$c.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,n_$c.stage.on("mouseup",this,this.onStageMouseUp),n_$c.stage.on("mouseout",this,this.onStageMouseUp),n_$c.timer.frameLoop(1,this,this.loop)},n_$C.clearTimer=function(){n_$c.timer.clear(this,this.loop),n_$c.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},n_$C.stop=function(){this._dragging&&(n_$f.instance.disableMouseEvent=!1,n_$c.stage.off("mouseup",this,this.onStageMouseUp),n_$c.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},n_$C.loop=function(){var n_$N=this._parent.getMousePoint(),n_$C=n_$N.x,n_$a=n_$N.y,n_$u=n_$C-this._lastX,n_$e=n_$a-this._lastY;if(this._clickOnly){if(!(1<Math.abs(n_$u*n_$c.stage._canvasTransform.getScaleX())||1<Math.abs(n_$e*n_$c.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),n_$f.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(n_$u,n_$e);0==n_$u&&0==n_$e||(this._lastX=n_$C,this._lastY=n_$a,this.target.x+=n_$u*this._elasticRateX,this.target.y+=n_$e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},n_$C.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var n_$N=this.area.x-this.target.x;else n_$N=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-n_$N/this.elasticDistance),this.target.y<this.area.y)var n_$C=this.area.y-this.target.y;else n_$C=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-n_$C/this.elasticDistance)}},n_$C.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},n_$C.onStageMouseUp=function(n_$N){if(n_$f.instance.disableMouseEvent=!1,n_$c.stage.off("mouseup",this,this.onStageMouseUp),n_$c.stage.off("mouseout",this,this.onStageMouseUp),n_$c.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var n_$C=this._offsets.length,n_$a=Math.min(n_$C,6),n_$u=this._offsets.length-n_$a,n_$e=n_$C-1;n_$u<n_$e;n_$e--)this._offsetY+=this._offsets[n_$e--],this._offsetX+=this._offsets[n_$e];this._offsetX=this._offsetX/n_$a*2,this._offsetY=this._offsetY/n_$a*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),n_$c.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},n_$C.checkElastic=function(){var n_$N=NaN,n_$C=NaN;if(this.target.x<this.area.x?n_$N=this.area.x:this.target.x>this.area.x+this.area.width&&(n_$N=this.area.x+this.area.width),this.target.y<this.area.y?n_$C=this.area.y:this.target.y>this.area.y+this.area.height&&(n_$C=this.area.y+this.area.height),isNaN(n_$N)&&isNaN(n_$C))this.clear();else{var n_$a={};isNaN(n_$N)||(n_$a.x=n_$N),isNaN(n_$C)||(n_$a.y=n_$C),this._tween=n_$H.to(this.target,n_$a,this.elasticBackTime,n_$S.sineOut,n_$x.create(this,this.clear),0,!1,!1)}},n_$C.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(n_$c.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},n_$C.clear=function(){if(this.target){this.clearTimer();var n_$N=this.target;this.target=null,this._parent=null,n_$N.event("dragend",this.data)}},n_$N}()),n_$S=function(){function n_$n(){}return n_$P(n_$n,"laya.utils.Ease"),n_$n.linearNone=function(n_$N,n_$C,n_$a,n_$u){return n_$a*n_$N/n_$u+n_$C},n_$n.linearIn=function(n_$N,n_$C,n_$a,n_$u){return n_$a*n_$N/n_$u+n_$C},n_$n.linearInOut=function(n_$N,n_$C,n_$a,n_$u){return n_$a*n_$N/n_$u+n_$C},n_$n.linearOut=function(n_$N,n_$C,n_$a,n_$u){return n_$a*n_$N/n_$u+n_$C},n_$n.bounceIn=function(n_$N,n_$C,n_$a,n_$u){return n_$a-n_$n.bounceOut(n_$u-n_$N,0,n_$a,n_$u)+n_$C},n_$n.bounceInOut=function(n_$N,n_$C,n_$a,n_$u){return n_$N<.5*n_$u?.5*n_$n.bounceIn(2*n_$N,0,n_$a,n_$u)+n_$C:.5*n_$n.bounceOut(2*n_$N-n_$u,0,n_$a,n_$u)+.5*n_$a+n_$C},n_$n.bounceOut=function(n_$N,n_$C,n_$a,n_$u){return(n_$N/=n_$u)<1/2.75?n_$a*(7.5625*n_$N*n_$N)+n_$C:n_$N<2/2.75?n_$a*(7.5625*(n_$N-=1.5/2.75)*n_$N+.75)+n_$C:n_$N<2.5/2.75?n_$a*(7.5625*(n_$N-=2.25/2.75)*n_$N+.9375)+n_$C:n_$a*(7.5625*(n_$N-=2.625/2.75)*n_$N+.984375)+n_$C},n_$n.backIn=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$e&&(n_$e=1.70158),n_$a*(n_$N/=n_$u)*n_$N*((n_$e+1)*n_$N-n_$e)+n_$C},n_$n.backInOut=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$e&&(n_$e=1.70158),(n_$N/=.5*n_$u)<1?.5*n_$a*(n_$N*n_$N*((1+(n_$e*=1.525))*n_$N-n_$e))+n_$C:n_$a/2*((n_$N-=2)*n_$N*((1+(n_$e*=1.525))*n_$N+n_$e)+2)+n_$C},n_$n.backOut=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$e&&(n_$e=1.70158),n_$a*((n_$N=n_$N/n_$u-1)*n_$N*((n_$e+1)*n_$N+n_$e)+1)+n_$C},n_$n.elasticIn=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M;return void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=0),0==n_$N?n_$C:1==(n_$N/=n_$u)?n_$C+n_$a:(n_$J||(n_$J=.3*n_$u),n_$M=!n_$e||0<n_$a&&n_$e<n_$a||n_$a<0&&n_$e<-n_$a?(n_$e=n_$a,n_$J/4):n_$J/n_$n.PI2*Math.asin(n_$a/n_$e),-n_$e*Math.pow(2,10*(n_$N-=1))*Math.sin((n_$N*n_$u-n_$M)*n_$n.PI2/n_$J)+n_$C)},n_$n.elasticInOut=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M;return void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=0),0==n_$N?n_$C:2==(n_$N/=.5*n_$u)?n_$C+n_$a:(n_$J||(n_$J=n_$u*(.3*1.5)),n_$M=!n_$e||0<n_$a&&n_$e<n_$a||n_$a<0&&n_$e<-n_$a?(n_$e=n_$a,n_$J/4):n_$J/n_$n.PI2*Math.asin(n_$a/n_$e),n_$N<1?n_$e*Math.pow(2,10*(n_$N-=1))*Math.sin((n_$N*n_$u-n_$M)*n_$n.PI2/n_$J)*-.5+n_$C:n_$e*Math.pow(2,-10*(n_$N-=1))*Math.sin((n_$N*n_$u-n_$M)*n_$n.PI2/n_$J)*.5+n_$a+n_$C)},n_$n.elasticOut=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M;return void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=0),0==n_$N?n_$C:1==(n_$N/=n_$u)?n_$C+n_$a:(n_$J||(n_$J=.3*n_$u),n_$M=!n_$e||0<n_$a&&n_$e<n_$a||n_$a<0&&n_$e<-n_$a?(n_$e=n_$a,n_$J/4):n_$J/n_$n.PI2*Math.asin(n_$a/n_$e),n_$e*Math.pow(2,-10*n_$N)*Math.sin((n_$N*n_$u-n_$M)*n_$n.PI2/n_$J)+n_$a+n_$C)},n_$n.strongIn=function(n_$N,n_$C,n_$a,n_$u){return n_$a*(n_$N/=n_$u)*n_$N*n_$N*n_$N*n_$N+n_$C},n_$n.strongInOut=function(n_$N,n_$C,n_$a,n_$u){return(n_$N/=.5*n_$u)<1?.5*n_$a*n_$N*n_$N*n_$N*n_$N*n_$N+n_$C:.5*n_$a*((n_$N-=2)*n_$N*n_$N*n_$N*n_$N+2)+n_$C},n_$n.strongOut=function(n_$N,n_$C,n_$a,n_$u){return n_$a*((n_$N=n_$N/n_$u-1)*n_$N*n_$N*n_$N*n_$N+1)+n_$C},n_$n.sineInOut=function(n_$N,n_$C,n_$a,n_$u){return.5*-n_$a*(Math.cos(Math.PI*n_$N/n_$u)-1)+n_$C},n_$n.sineIn=function(n_$N,n_$C,n_$a,n_$u){return-n_$a*Math.cos(n_$N/n_$u*n_$n.HALF_PI)+n_$a+n_$C},n_$n.sineOut=function(n_$N,n_$C,n_$a,n_$u){return n_$a*Math.sin(n_$N/n_$u*n_$n.HALF_PI)+n_$C},n_$n.quintIn=function(n_$N,n_$C,n_$a,n_$u){return n_$a*(n_$N/=n_$u)*n_$N*n_$N*n_$N*n_$N+n_$C},n_$n.quintInOut=function(n_$N,n_$C,n_$a,n_$u){return(n_$N/=.5*n_$u)<1?.5*n_$a*n_$N*n_$N*n_$N*n_$N*n_$N+n_$C:.5*n_$a*((n_$N-=2)*n_$N*n_$N*n_$N*n_$N+2)+n_$C},n_$n.quintOut=function(n_$N,n_$C,n_$a,n_$u){return n_$a*((n_$N=n_$N/n_$u-1)*n_$N*n_$N*n_$N*n_$N+1)+n_$C},n_$n.quartIn=function(n_$N,n_$C,n_$a,n_$u){return n_$a*(n_$N/=n_$u)*n_$N*n_$N*n_$N+n_$C},n_$n.quartInOut=function(n_$N,n_$C,n_$a,n_$u){return(n_$N/=.5*n_$u)<1?.5*n_$a*n_$N*n_$N*n_$N*n_$N+n_$C:.5*-n_$a*((n_$N-=2)*n_$N*n_$N*n_$N-2)+n_$C},n_$n.quartOut=function(n_$N,n_$C,n_$a,n_$u){return-n_$a*((n_$N=n_$N/n_$u-1)*n_$N*n_$N*n_$N-1)+n_$C},n_$n.cubicIn=function(n_$N,n_$C,n_$a,n_$u){return n_$a*(n_$N/=n_$u)*n_$N*n_$N+n_$C},n_$n.cubicInOut=function(n_$N,n_$C,n_$a,n_$u){return(n_$N/=.5*n_$u)<1?.5*n_$a*n_$N*n_$N*n_$N+n_$C:.5*n_$a*((n_$N-=2)*n_$N*n_$N+2)+n_$C},n_$n.cubicOut=function(n_$N,n_$C,n_$a,n_$u){return n_$a*((n_$N=n_$N/n_$u-1)*n_$N*n_$N+1)+n_$C},n_$n.quadIn=function(n_$N,n_$C,n_$a,n_$u){return n_$a*(n_$N/=n_$u)*n_$N+n_$C},n_$n.quadInOut=function(n_$N,n_$C,n_$a,n_$u){return(n_$N/=.5*n_$u)<1?.5*n_$a*n_$N*n_$N+n_$C:.5*-n_$a*(--n_$N*(n_$N-2)-1)+n_$C},n_$n.quadOut=function(n_$N,n_$C,n_$a,n_$u){return-n_$a*(n_$N/=n_$u)*(n_$N-2)+n_$C},n_$n.expoIn=function(n_$N,n_$C,n_$a,n_$u){return 0==n_$N?n_$C:n_$a*Math.pow(2,10*(n_$N/n_$u-1))+n_$C-.001*n_$a},n_$n.expoInOut=function(n_$N,n_$C,n_$a,n_$u){return 0==n_$N?n_$C:n_$N==n_$u?n_$C+n_$a:(n_$N/=.5*n_$u)<1?.5*n_$a*Math.pow(2,10*(n_$N-1))+n_$C:.5*n_$a*(2-Math.pow(2,-10*--n_$N))+n_$C},n_$n.expoOut=function(n_$N,n_$C,n_$a,n_$u){return n_$N==n_$u?n_$C+n_$a:n_$a*(1-Math.pow(2,-10*n_$N/n_$u))+n_$C},n_$n.circIn=function(n_$N,n_$C,n_$a,n_$u){return-n_$a*(Math.sqrt(1-(n_$N/=n_$u)*n_$N)-1)+n_$C},n_$n.circInOut=function(n_$N,n_$C,n_$a,n_$u){return(n_$N/=.5*n_$u)<1?.5*-n_$a*(Math.sqrt(1-n_$N*n_$N)-1)+n_$C:.5*n_$a*(Math.sqrt(1-(n_$N-=2)*n_$N)+1)+n_$C},n_$n.circOut=function(n_$N,n_$C,n_$a,n_$u){return n_$a*Math.sqrt(1-(n_$N=n_$N/n_$u-1)*n_$N)+n_$C},n_$n.HALF_PI=.5*Math.PI,n_$n.PI2=2*Math.PI,n_$n}(),n_$p=function(){function n_$$(){this._hit=null,this._unHit=null}n_$P(n_$$,"laya.utils.HitArea");var n_$N=n_$$.prototype;return n_$N.isHit=function(n_$N,n_$C){return!!n_$$.isHitGraphic(n_$N,n_$C,this.hit)&&!n_$$.isHitGraphic(n_$N,n_$C,this.unHit)},n_$N.contains=function(n_$N,n_$C){return this.isHit(n_$N,n_$C)},n_$z(0,n_$N,"hit",function(){return this._hit||(this._hit=new n_$O),this._hit},function(n_$N){this._hit=n_$N}),n_$z(0,n_$N,"unHit",function(){return this._unHit||(this._unHit=new n_$O),this._unHit},function(n_$N){this._unHit=n_$N}),n_$$.isHitGraphic=function(n_$N,n_$C,n_$a){if(!n_$a)return!1;var n_$u;if(!(n_$u=n_$a.cmds)&&n_$a._one&&((n_$u=n_$$._cmds).length=1,n_$u[0]=n_$a._one),!n_$u)return!1;var n_$e,n_$J,n_$M=0;for(n_$e=n_$u.length,n_$M=0;n_$M<n_$e;n_$M++)if(n_$J=n_$u[n_$M]){var n_$n=n_$i._context;switch(n_$J.callee){case n_$n._translate:case 6:n_$N-=n_$J[0],n_$C-=n_$J[1]}if(n_$$.isHitCmd(n_$N,n_$C,n_$J))return!0}return!1},n_$$.isHitCmd=function(n_$N,n_$C,n_$a){if(!n_$a)return!1;var n_$u=n_$i._context,n_$e=!1;switch(n_$a.callee){case n_$u._drawRect:case 13:n_$$._rec.setTo(n_$a[0],n_$a[1],n_$a[2],n_$a[3]),n_$e=n_$$._rec.contains(n_$N,n_$C);break;case n_$u._drawCircle:case n_$u._fillCircle:case 14:n_$e=(n_$N-=n_$a[0])*n_$N+(n_$C-=n_$a[1])*n_$C<n_$a[2]*n_$a[2];break;case n_$u._drawPoly:case 18:n_$N-=n_$a[0],n_$C-=n_$a[1],n_$e=n_$$.ptInPolygon(n_$N,n_$C,n_$a[2])}return n_$e},n_$$.ptInPolygon=function(n_$N,n_$C,n_$a){var n_$u;(n_$u=n_$$._ptPoint).setTo(n_$N,n_$C);var n_$e,n_$J=0,n_$M=NaN,n_$n=NaN,n_$V=NaN,n_$A=NaN;n_$e=n_$a.length;for(var n_$P=0;n_$P<n_$e;n_$P+=2){if(n_$M=n_$a[n_$P],n_$n=n_$a[n_$P+1],n_$V=n_$a[(n_$P+2)%n_$e],n_$n!=(n_$A=n_$a[(n_$P+3)%n_$e]))if(!(n_$u.y<Math.min(n_$n,n_$A)))if(!(n_$u.y>=Math.max(n_$n,n_$A)))(n_$u.y-n_$n)*(n_$V-n_$M)/(n_$A-n_$n)+n_$M>n_$u.x&&n_$J++}return n_$J%2==1},n_$$._cmds=[],n_$V(n_$$,["_rec",function(){return this._rec=new n_$F},"_ptPoint",function(){return this._ptPoint=new n_$E}]),n_$$}(),n_$m=(function(){function n_$e(n_$N,n_$C,n_$a,n_$u){this.char=n_$N,this.charNum=n_$N.charCodeAt(0),this._x=this._y=0,this.width=n_$C,this.height=n_$a,this.style=n_$u,this.isWord=!n_$e._isWordRegExp.test(n_$N)}n_$P(n_$e,"laya.utils.HTMLChar");var n_$N=n_$e.prototype;n_$c.imps(n_$N,{"laya.display.ILayout":!0}),n_$N.setSprite=function(n_$N){this._sprite=n_$N},n_$N.getSprite=function(){return this._sprite},n_$N._isChar=function(){return!0},n_$N._getCSSStyle=function(){return this.style},n_$z(0,n_$N,"width",function(){return this._w},function(n_$N){this._w=n_$N}),n_$z(0,n_$N,"x",function(){return this._x},function(n_$N){this._sprite&&(this._sprite.x=n_$N),this._x=n_$N}),n_$z(0,n_$N,"y",function(){return this._y},function(n_$N){this._sprite&&(this._sprite.y=n_$N),this._y=n_$N}),n_$z(0,n_$N,"height",function(){return this._h},function(n_$N){this._h=n_$N}),n_$e._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function n_$C(){}n_$P(n_$C,"laya.utils.Log"),n_$C.enable=function(){n_$C._logdiv||(n_$C._logdiv=n_$R.window.document.createElement("div"),n_$R.window.document.body.appendChild(n_$C._logdiv),n_$C._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},n_$C.toggle=function(){var n_$N=n_$C._logdiv.style;"1px"==n_$N.width?n_$N.width=n_$N.height="50%":n_$N.width=n_$N.height="1px"},n_$C.print=function(n_$N){n_$C._logdiv&&(n_$C.maxCount<=n_$C._count&&n_$C.clear(),n_$C._count++,n_$C._logdiv.innerText+=n_$N+"\n",n_$C._logdiv.scrollTop=n_$C._logdiv.scrollHeight)},n_$C.clear=function(){n_$C._logdiv.innerText="",n_$C._count=0},n_$C._logdiv=null,n_$C._count=0,n_$C.maxCount=20}(),function(){function n_$C(){}n_$P(n_$C,"laya.utils.Mouse"),n_$z(1,n_$C,"cursor",function(){return n_$C._style.cursor},function(n_$N){n_$C._style.cursor=n_$N}),n_$C.hide=function(){"none"!=n_$C.cursor&&(n_$C._preCursor=n_$C.cursor,n_$C.cursor="none")},n_$C.show=function(){"none"==n_$C.cursor&&(n_$C.cursor=n_$C._preCursor?n_$C._preCursor:"auto")},n_$C._preCursor=null,n_$V(n_$C,["_style",function(){return this._style=n_$R.document.body.style}])}(),function(){function n_$J(){}return n_$P(n_$J,"laya.utils.Pool"),n_$J.getPoolBySign=function(n_$N){return n_$J._poolDic[n_$N]||(n_$J._poolDic[n_$N]=[])},n_$J.clearBySign=function(n_$N){n_$J._poolDic[n_$N]&&(n_$J._poolDic[n_$N].length=0)},n_$J.recover=function(n_$N,n_$C){n_$C.__InPool||(n_$C.__InPool=!0,n_$J.getPoolBySign(n_$N).push(n_$C))},n_$J.getItemByClass=function(n_$N,n_$C){var n_$a=n_$J.getPoolBySign(n_$N),n_$u=n_$a.length?n_$a.pop():new n_$C;return n_$u.__InPool=!1,n_$u},n_$J.getItemByCreateFun=function(n_$N,n_$C,n_$a){var n_$u=n_$J.getPoolBySign(n_$N),n_$e=n_$u.length?n_$u.pop():n_$C.call(n_$a);return n_$e.__InPool=!1,n_$e},n_$J.getItem=function(n_$N){var n_$C=n_$J.getPoolBySign(n_$N),n_$a=n_$C.length?n_$C.pop():null;return n_$a&&(n_$a.__InPool=!1),n_$a},n_$J._poolDic={},n_$J.InPoolSign="__InPool",n_$J}()),n_$b=function(){function n_$V(){}return n_$P(n_$V,"laya.utils.Stat"),n_$z(1,n_$V,"onclick",null,function(n_$N){n_$V._sp&&n_$V._sp.on("click",n_$V._sp,n_$N),n_$V._canvas&&(n_$V._canvas.source.onclick=n_$N,n_$V._canvas.source.style.pointerEvents="")}),n_$V.show=function(n_$N,n_$C,n_$a){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),!n_$i.isConchApp||n_$i.isConchWebGL){if(n_$i.isConchWebGL||n_$R.onMiniGame||n_$R.onLimixiu||(n_$V._useCanvas=!0),n_$V._show=!0,n_$V._fpsData.length=60,n_$V._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},n_$V._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},n_$V._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},n_$V._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},n_$i.isWebGL)if(n_$V._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},n_$i.is3DMode){if(n_$V._view[0].title="FPS(3D)",n_$V._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},n_$V._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},n_$V._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==n_$a){var n_$u=8;n_$V._view[n_$u++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},n_$V._view[n_$u++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},n_$V._view[n_$u++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},n_$V._view[n_$u++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},n_$V._view[n_$u++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},n_$V._view[n_$u++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},n_$V._view[n_$u++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},n_$V._view[n_$u++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},n_$V._view[n_$u++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==n_$a){n_$u=8;n_$V._view[n_$u++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},n_$V._view[n_$u++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},n_$V._view[n_$u++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},n_$V._view[n_$u++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},n_$V._view[n_$u++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},n_$V._view[n_$u++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},n_$V._view[n_$u++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else n_$V._view[0].title="FPS(WebGL)",n_$V._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else n_$V._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};n_$V._useCanvas?n_$V.createUIPre(n_$N,n_$C):n_$V.createUI(n_$N,n_$C),n_$V.enable()}else n_$R.window.conch.showFPS&&n_$R.window.conch.showFPS(n_$N,n_$C)},n_$V.createUIPre=function(n_$N,n_$C){var n_$a=n_$R.pixelRatio;n_$V._width=170*n_$a,n_$V._vx=75*n_$a,n_$V._height=n_$a*(12*n_$V._view.length+3*n_$a)+4,n_$V._fontSize=12*n_$a;for(var n_$u=0;n_$u<n_$V._view.length;n_$u++)n_$V._view[n_$u].x=4,n_$V._view[n_$u].y=n_$u*n_$V._fontSize+2*n_$a;n_$V._canvas||((n_$V._canvas=new n_$WN("2D")).size(n_$V._width,n_$V._height),(n_$V._ctx=n_$V._canvas.getContext("2d")).textBaseline="top",n_$V._ctx.font=n_$V._fontSize+"px Sans-serif",n_$V._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+n_$N+"px;top:"+n_$C+"px;width:"+n_$V._width/n_$a+"px;height:"+n_$V._height/n_$a+"px;"),n_$V._first=!0,n_$V.loop(),n_$V._first=!1,n_$R.container.appendChild(n_$V._canvas.source)},n_$V.createUI=function(n_$N,n_$C){var n_$a=n_$V._sp,n_$u=n_$R.pixelRatio;n_$a||(n_$a=new n_$$N,(n_$V._leftText=new n_$tN).pos(5,5),n_$V._leftText.color="#ffffff",n_$a.addChild(n_$V._leftText),(n_$V._txt=new n_$tN).pos(80*n_$u,5),n_$V._txt.color="#ffffff",n_$a.addChild(n_$V._txt),n_$V._sp=n_$a),n_$a.pos(n_$N,n_$C);for(var n_$e="",n_$J=0;n_$J<n_$V._view.length;n_$J++){n_$e+=n_$V._view[n_$J].title+"\n"}n_$V._leftText.text=n_$e;var n_$M=170*n_$u,n_$n=n_$u*(12*n_$V._view.length+3*n_$u)+4;n_$V._txt.fontSize=n_$V._fontSize*n_$u,n_$V._leftText.fontSize=n_$V._fontSize*n_$u,n_$a.size(n_$M,n_$n),n_$a.graphics.clear(),n_$a.graphics.setAlpha(.5),n_$a.graphics.drawRect(0,0,n_$M,n_$n,"#999999"),n_$a.graphics.setAlpha(1),n_$V.loop()},n_$V.enable=function(){n_$c.timer.frameLoop(1,n_$V,n_$V.loop)},n_$V.hide=function(){n_$V._show=!1,n_$c.timer.clear(n_$V,n_$V.loop),n_$V._canvas&&n_$R.removeElement(n_$V._canvas.source)},n_$V.clear=function(){n_$V.trianglesFaces=n_$V.drawCall=n_$V.shaderCall=n_$V.spriteCount=n_$V.spriteRenderUseCacheCount=n_$V.treeNodeCollision=n_$V.treeSpriteCollision=n_$V.canvasNormal=n_$V.canvasBitmap=n_$V.canvasReCache=0},n_$V.loop=function(){n_$V._count++;var n_$N=n_$R.now();if(!(n_$N-n_$V._timer<1e3)){var n_$C=n_$V._count;if(n_$V.FPS=Math.round(1e3*n_$C/(n_$N-n_$V._timer)),n_$V._show){n_$V.trianglesFaces=Math.round(n_$V.trianglesFaces/n_$C),n_$V.spriteCount=n_$V._useCanvas?(n_$V.drawCall=Math.round(n_$V.drawCall/n_$C)-2,n_$V.shaderCall=Math.round(n_$V.shaderCall/n_$C),Math.round(n_$V.spriteCount/n_$C)-1):(n_$V.drawCall=Math.round(n_$V.drawCall/n_$C)-2,n_$V.shaderCall=Math.round(n_$V.shaderCall/n_$C)-4,Math.round(n_$V.spriteCount/n_$C)-4),n_$V.spriteRenderUseCacheCount=Math.round(n_$V.spriteRenderUseCacheCount/n_$C),n_$V.canvasNormal=Math.round(n_$V.canvasNormal/n_$C),n_$V.canvasBitmap=Math.round(n_$V.canvasBitmap/n_$C),n_$V.canvasReCache=Math.ceil(n_$V.canvasReCache/n_$C),n_$V.treeNodeCollision=Math.round(n_$V.treeNodeCollision/n_$C),n_$V.treeSpriteCollision=Math.round(n_$V.treeSpriteCollision/n_$C);var n_$a=0<n_$V.FPS?Math.floor(1e3/n_$V.FPS).toString():" ";n_$V._fpsStr=n_$V.FPS+(n_$V.renderSlow?" slow":"")+" "+n_$a,n_$V._spriteStr=n_$V.spriteCount+(n_$V.spriteRenderUseCacheCount?"/"+n_$V.spriteRenderUseCacheCount:""),n_$V._canvasStr=n_$V.canvasReCache+"/"+n_$V.canvasNormal+"/"+n_$V.canvasBitmap,n_$V.currentMemorySize=n_$L.systemResourceManager.memorySize,n_$V._useCanvas?n_$V.renderInfoPre():n_$V.renderInfo(),n_$V.clear()}n_$V._count=0,n_$V._timer=n_$N}},n_$V.renderInfoPre=function(){if(n_$V._canvas){var n_$N=n_$V._ctx;n_$N.clearRect(n_$V._first?0:n_$V._vx,0,n_$V._width,n_$V._height);for(var n_$C=n_$i.WebGL.mainContext,n_$a=0;n_$a<n_$V._view.length;n_$a++){var n_$u=n_$V._view[n_$a];n_$V._first&&(n_$N.fillStyle="white",n_$N.fillText(n_$u.title,n_$u.x,n_$u.y,null,null,null)),n_$N.fillStyle=n_$u.color;var n_$e=-1;if((n_$u=n_$V._view[n_$a]).varying){if(n_$C)switch(n_$u.varying){case 1:n_$e=n_$C.getParameter(n_$C[n_$u.value]);break;case 2:n_$e=n_$C.getExtension(n_$u.value)}}else n_$e=n_$V[n_$u.value];"M"==n_$u.units&&(n_$e=Math.floor(n_$e/1048576*100)/100+" M"),"K"==n_$u.units&&(n_$e=Math.floor(n_$e/1024*100)/100+" K"),"string"==n_$u.units&&(n_$e=n_$e.match(/\d+\.?\d/i)),n_$N.fillText(n_$e+"",n_$u.x+n_$V._vx,n_$u.y,null,null,null)}}},n_$V.renderInfo=function(){for(var n_$N="",n_$C=n_$i.WebGL.mainContext,n_$a=0;n_$a<n_$V._view.length;n_$a++){var n_$u=n_$V._view[n_$a],n_$e=-1;if(n_$u.varying){if(n_$C)switch(n_$u.varying){case 1:n_$e=n_$C.getParameter(n_$C[n_$u.value]);break;case 2:n_$e=n_$C.getExtension(n_$u.value)}}else n_$e=n_$V[n_$u.value];"M"==n_$u.units&&(n_$e=Math.floor(n_$e/1048576*100)/100+" M"),"K"==n_$u.units&&(n_$e=Math.floor(n_$e/1024*100)/100+" K"),"string"==n_$u.units&&(n_$e=n_$e.match(/\d+\.?\d/i)),n_$N+=n_$e+"\n"}n_$V._txt.text=n_$N},n_$V.FPS=0,n_$V.loopCount=0,n_$V.shaderCall=0,n_$V.drawCall=0,n_$V.trianglesFaces=0,n_$V.spriteCount=0,n_$V.spriteRenderUseCacheCount=0,n_$V.treeNodeCollision=0,n_$V.treeSpriteCollision=0,n_$V.canvasNormal=0,n_$V.canvasBitmap=0,n_$V.canvasReCache=0,n_$V.renderSlow=!1,n_$V.currentMemorySize=0,n_$V._fpsStr=null,n_$V._canvasStr=null,n_$V._spriteStr=null,n_$V._fpsData=[],n_$V._timer=0,n_$V._count=0,n_$V._view=[],n_$V._fontSize=12,n_$V._txt=null,n_$V._leftText=null,n_$V._sp=null,n_$V._show=!1,n_$V._useCanvas=!1,n_$V._canvas=null,n_$V._ctx=null,n_$V._first=!1,n_$V._vx=NaN,n_$V._width=0,n_$V._height=100,n_$V}(),n_$o=(function(){function n_$N(){this._strsToID={},this._idToStrs=[],this._length=0}n_$P(n_$N,"laya.utils.StringKey");var n_$C=n_$N.prototype;n_$C.add=function(n_$N){var n_$C=this._strsToID[n_$N];return null!=n_$C?n_$C:(this._idToStrs[this._length]=n_$N,this._strsToID[n_$N]=this._length++)},n_$C.getID=function(n_$N){var n_$C=this._strsToID[n_$N];return null==n_$C?-1:n_$C},n_$C.getName=function(n_$N){var n_$C=this._idToStrs[n_$N];return null==n_$C?void 0:n_$C}}(),function(){var n_$A;function n_$N(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}n_$P(n_$N,"laya.utils.Timer");var n_$C=n_$N.prototype;return n_$C._init=function(){n_$c.timer&&n_$c.timer.frameLoop(1,this,this._update)},n_$C._now=function(){return Date.now()},n_$C._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var n_$N=this.currFrame=this.currFrame+this.scale,n_$C=this._now();this._delta=(n_$C-this._lastTimer)*this.scale;var n_$a=this.currTimer=this.currTimer+this._delta;n_$c.isDebug&&6e4<Math.abs(n_$C-this._lastTimer)&&console.error("系统时间错误！"+(n_$C-this._lastTimer)),this._lastTimer=n_$C;var n_$u=this._handlers;for(n_$M=this._count=0,n_$n=n_$u.length;n_$M<n_$n;n_$M++)if(null!==(n_$V=n_$u[n_$M]).method){var n_$e=n_$V.userFrame?n_$N:n_$a;if(n_$e>=n_$V.exeTime)if(n_$V.repeat)if(n_$V.jumpFrame)for(;n_$e>=n_$V.exeTime;)n_$V.exeTime+=n_$V.delay,n_$V.run(!1);else n_$V.exeTime+=n_$V.delay,n_$V.run(!1),n_$e>n_$V.exeTime&&(n_$V.exeTime+=Math.ceil((n_$e-n_$V.exeTime)/n_$V.delay)*n_$V.delay);else n_$V.run(!0)}else this._count++;(30<this._count||n_$N%200==0)&&this._clearHandlers();for(var n_$J=this._laters,n_$M=0,n_$n=n_$J.length-1;n_$M<=n_$n;n_$M++){var n_$V=n_$J[n_$M];this._isIgnoreRecover(n_$V)||(null!==n_$V.method&&(delete this._map[n_$V.key],n_$V.run(!1)),this._recoverHandler(n_$V)),n_$M===n_$n&&(n_$n=n_$J.length-1)}n_$J.length=0}},n_$C._clearHandlers=function(){for(var n_$N=this._handlers,n_$C=0,n_$a=n_$N.length;n_$C<n_$a;n_$C++){var n_$u=n_$N[n_$C];null!==n_$u.method?this._temp.push(n_$u):this._isIgnoreRecover(n_$u)?this._temp.push(n_$u):this._recoverHandler(n_$u)}this._handlers=this._temp,this._temp=n_$N,this._temp.length=0},n_$C._recoverHandler=function(n_$N){this._map[n_$N.key]==n_$N&&delete this._map[n_$N.key],n_$N.recover()},n_$C._create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){if(!n_$a)return n_$e.apply(n_$u,n_$J),null;if(n_$M){var n_$V=this._getHandler(n_$u,n_$e);if(n_$V)return n_$V.repeat=n_$C,n_$V.userFrame=n_$N,n_$V.delay=n_$a,n_$V.ignoreRecover=n_$n,n_$V.caller=n_$u,n_$V.method=n_$e,n_$V.args=n_$J,n_$V.exeTime=n_$a+(n_$N?this.currFrame:this.currTimer+this._now()-this._lastTimer),n_$V}return(n_$V=n_$A.create()).repeat=n_$C,n_$V.userFrame=n_$N,n_$V.delay=n_$a,n_$V.ignoreRecover=n_$n,n_$V.caller=n_$u,n_$V.method=n_$e,n_$V.args=n_$J,n_$V.exeTime=n_$a+(n_$N?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(n_$V),this._handlers.push(n_$V),n_$V},n_$C._indexHandler=function(n_$N){var n_$C=n_$N.caller,n_$a=n_$N.method,n_$u=n_$C?n_$C.$_GID||(n_$C.$_GID=n_$I.getGID()):0,n_$e=n_$a.$_TID||(n_$a.$_TID=this._mid++);n_$N.key=n_$u+"_"+n_$e,this._map[n_$N.key]=n_$N},n_$C.once=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=!0),this._create(!1,!1,n_$N,n_$C,n_$a,n_$u,n_$e,!1)},n_$C.loop=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){void 0===n_$e&&(n_$e=!0),void 0===n_$J&&(n_$J=!1),void 0===n_$M&&(n_$M=!1);var n_$n=this._create(!1,!0,n_$N,n_$C,n_$a,n_$u,n_$e,n_$M);n_$n&&(n_$n.jumpFrame=n_$J)},n_$C.frameOnce=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=!0),this._create(!0,!1,n_$N,n_$C,n_$a,n_$u,n_$e,!1)},n_$C.frameLoop=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$e&&(n_$e=!0),void 0===n_$J&&(n_$J=!1),this._create(!0,!0,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)},n_$C.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+n_$A._freeCount},n_$C.clear=function(n_$N,n_$C){var n_$a=this._getHandler(n_$N,n_$C);return!(!n_$a||this._isIgnoreRecover(n_$a))&&(delete this._map[n_$a.key],n_$a.key=null,n_$a.clear(),!0)},n_$C.clearAll=function(n_$N){if(n_$N)for(var n_$C=0,n_$a=this._handlers.length;n_$C<n_$a;n_$C++){var n_$u=this._handlers[n_$C];n_$u.caller===n_$N&&(this._isIgnoreRecover(n_$u)||(delete this._map[n_$u.key],n_$u.key=null,n_$u.clear()))}},n_$C._getHandler=function(n_$N,n_$C){var n_$a=n_$N?n_$N.$_GID||(n_$N.$_GID=n_$I.getGID()):0,n_$u=n_$C.$_TID||(n_$C.$_TID=this._mid++);return this._map[n_$a+"_"+n_$u]},n_$C._isIgnoreRecover=function(n_$N){if(n_$N.ignoreRecover||n_$N.caller&&"IgnoreRecover"==n_$N.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var n_$C="";try{arguments.propertyIsEnumerable.caller}catch(n_$N){n_$C=n_$N.stack}n_$c.recordError("报错：核心定时器销毁忽略  "+n_$C)}return!0}return!1},n_$C.hasHandler=function(n_$N,n_$C){return this._map[n_$N.$_GID+"_"+n_$C.$_TID]},n_$C.callLater=function(n_$N,n_$C,n_$a){if(null==this._getHandler(n_$N,n_$C)){var n_$u=n_$A.create();n_$u.caller=n_$N,n_$u.method=n_$C,n_$u.args=n_$a,this._indexHandler(n_$u),this._laters.push(n_$u)}},n_$C.runCallLater=function(n_$N,n_$C){var n_$a=this._getHandler(n_$N,n_$C);n_$a&&null!=n_$a.method&&(this._isIgnoreRecover(n_$a)||(delete this._map[n_$a.key],n_$a.run(!0)))},n_$C.runTimer=function(n_$N,n_$C){this.runCallLater(n_$N,n_$C)},n_$z(0,n_$C,"delta",function(){return this._delta}),n_$N.__init$=function(){n_$A=function(){function n_$C(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}n_$P(n_$C,"");var n_$N=n_$C.prototype;return n_$N.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},n_$N.recover=function(){this.clear(),this.args=n_$C._freeHandler,n_$C._freeHandler=this,n_$C._freeCount++},n_$N.run=function(n_$N){var n_$C=this.caller;if(n_$C&&n_$C.destroyed)return this.clear();var n_$a=this.method,n_$u=this.args;n_$N&&this.clear(),null!=n_$a&&(n_$u?n_$a.apply(n_$C,n_$u):n_$a.call(n_$C))},n_$C._freeHandler=null,n_$C._freeCount=0,n_$C.create=function(){var n_$N=n_$C._freeHandler;return n_$N?(n_$C._freeHandler=n_$N.args,--n_$C._freeCount,n_$N.args=null,n_$N):new n_$C},n_$C}()},n_$N}()),n_$H=function(){function n_$$(){this.gid=0}n_$P(n_$$,"laya.utils.Tween");var n_$N=n_$$.prototype;return n_$N.to=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){return void 0===n_$J&&(n_$J=0),void 0===n_$M&&(n_$M=!1),this._create(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,!0,!1,!0)},n_$N.from=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){return void 0===n_$J&&(n_$J=0),void 0===n_$M&&(n_$M=!1),this._create(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,!1,!1,!0)},n_$N._create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){if(!n_$N)throw new Error("Tween:target is null");this._target=n_$N,this._duration=n_$a,this._ease=n_$u||n_$C.ease||n_$$.easeNone,this._complete=n_$e||n_$C.complete,this._delay=n_$J,this._props=[],this._usedTimer=0,this._startTimer=n_$R.now(),this._usedPool=n_$V,this._delayParam=null,this.update=n_$C.update;var n_$P=n_$N.$_GID||(n_$N.$_GID=n_$I.getGID());return n_$$.tweenMap[n_$P]?(n_$M&&n_$$.clearTween(n_$N),n_$$.tweenMap[n_$P].push(this)):n_$$.tweenMap[n_$P]=[this],n_$A?n_$J<=0?this.firstStart(n_$N,n_$C,n_$n):(this._delayParam=[n_$N,n_$C,n_$n],n_$c.scaleTimer.once(n_$J,this,this.firstStart,this._delayParam)):this._initProps(n_$N,n_$C,n_$n),this},n_$N.firstStart=function(n_$N,n_$C,n_$a){this._delayParam=null,n_$N.destroyed?this.clear():(this._initProps(n_$N,n_$C,n_$a),this._beginLoop())},n_$N._initProps=function(n_$N,n_$C,n_$a){for(var n_$u in n_$C)if("number"==typeof n_$N[n_$u]){var n_$e=n_$a?n_$N[n_$u]:n_$C[n_$u],n_$J=n_$a?n_$C[n_$u]:n_$N[n_$u];this._props.push([n_$u,n_$e,n_$J-n_$e]),n_$a||(n_$N[n_$u]=n_$e)}},n_$N._beginLoop=function(){n_$c.scaleTimer.frameLoop(1,this,this._doEase)},n_$N._doEase=function(){this._updateEase(n_$R.now())},n_$N._updateEase=function(n_$N){var n_$C=this._target;if(n_$C){if(n_$C.destroyed)return n_$$.clearTween(n_$C);var n_$a=this._usedTimer=n_$N-this._startTimer-this._delay;if(!(n_$a<0)){if(n_$a>=this._duration)return this.complete();for(var n_$u=0<n_$a?this._ease(n_$a,0,1,this._duration):0,n_$e=this._props,n_$J=0,n_$M=n_$e.length;n_$J<n_$M;n_$J++){var n_$n=n_$e[n_$J];n_$C[n_$n[0]]=n_$n[1]+n_$u*n_$n[2]}this.update&&this.update.run()}}},n_$N.complete=function(){if(this._target){n_$c.scaleTimer.runTimer(this,this.firstStart);for(var n_$N=this._target,n_$C=this._props,n_$a=this._complete,n_$u=0,n_$e=n_$C.length;n_$u<n_$e;n_$u++){var n_$J=n_$C[n_$u];n_$N[n_$J[0]]=n_$J[1]+n_$J[2]}this.update&&this.update.run(),this.clear(),n_$a&&n_$a.run()}},n_$N.pause=function(){n_$c.scaleTimer.clear(this,this._beginLoop),n_$c.scaleTimer.clear(this,this._doEase),n_$c.scaleTimer.clear(this,this.firstStart);var n_$N;(n_$N=n_$R.now()-this._startTimer-this._delay)<0&&(this._usedTimer=n_$N)},n_$N.setStartTime=function(n_$N){this._startTimer=n_$N},n_$N.clear=function(){this._target&&(this._remove(),this._clear())},n_$N._clear=function(){this.pause(),n_$c.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,n_$m.recover("tween",this))},n_$N.recover=function(){this._usedPool=!0,this._clear()},n_$N._remove=function(){var n_$N=n_$$.tweenMap[this._target.$_GID];if(n_$N)for(var n_$C=0,n_$a=n_$N.length;n_$C<n_$a;n_$C++)if(n_$N[n_$C]===this){n_$N.splice(n_$C,1);break}},n_$N.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=n_$R.now(),this._delayParam)n_$c.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var n_$N=this._props,n_$C=0,n_$a=n_$N.length;n_$C<n_$a;n_$C++){var n_$u=n_$N[n_$C];this._target[n_$u[0]]=n_$u[1]}n_$c.scaleTimer.once(this._delay,this,this._beginLoop)}},n_$N.resume=function(){this._usedTimer>=this._duration||(this._startTimer=n_$R.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?n_$c.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},n_$z(0,n_$N,"progress",null,function(n_$N){var n_$C=n_$N*this._duration;this._startTimer=n_$R.now()-this._delay-n_$C}),n_$$.to=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){return void 0===n_$J&&(n_$J=0),void 0===n_$M&&(n_$M=!1),void 0===n_$n&&(n_$n=!0),n_$m.getItemByClass("tween",n_$$)._create(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,!0,n_$n,!0)},n_$$.from=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){return void 0===n_$J&&(n_$J=0),void 0===n_$M&&(n_$M=!1),void 0===n_$n&&(n_$n=!0),n_$m.getItemByClass("tween",n_$$)._create(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,!1,n_$n,!0)},n_$$.clearAll=function(n_$N){if(n_$N&&n_$N.$_GID){var n_$C=n_$$.tweenMap[n_$N.$_GID];if(n_$C){for(var n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++)n_$C[n_$a]._clear();n_$C.length=0}}},n_$$.clear=function(n_$N){n_$N.clear()},n_$$.clearTween=function(n_$N){n_$$.clearAll(n_$N)},n_$$.easeNone=function(n_$N,n_$C,n_$a,n_$u){return n_$a*n_$N/n_$u+n_$C},n_$$.tweenMap={},n_$$}(),n_$I=function(){function n_$n(){}return n_$P(n_$n,"laya.utils.Utils"),n_$n.toRadian=function(n_$N){return n_$N*n_$n._pi2},n_$n.toAngle=function(n_$N){return n_$N*n_$n._pi},n_$n.toHexColor=function(n_$N){if(n_$N<0||isNaN(n_$N))return null;for(var n_$C=n_$N.toString(16);n_$C.length<6;)n_$C="0"+n_$C;return"#"+n_$C},n_$n.getGID=function(){return n_$n._gid++},n_$n.concatArray=function(n_$N,n_$C){if(!n_$C)return n_$N;if(!n_$N)return n_$C;var n_$a=0,n_$u=n_$C.length;for(n_$a=0;n_$a<n_$u;n_$a++)n_$N.push(n_$C[n_$a]);return n_$N},n_$n.clearArray=function(n_$N){return n_$N&&(n_$N.length=0),n_$N},n_$n.copyArray=function(n_$N,n_$C){if(n_$N||(n_$N=[]),!n_$C)return n_$N;n_$N.length=n_$C.length;var n_$a=0,n_$u=n_$C.length;for(n_$a=0;n_$a<n_$u;n_$a++)n_$N[n_$a]=n_$C[n_$a];return n_$N},n_$n.getGlobalRecByPoints=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J,n_$M;return n_$J=new n_$E(n_$C,n_$a),n_$J=n_$N.localToGlobal(n_$J),n_$M=new n_$E(n_$u,n_$e),n_$M=n_$N.localToGlobal(n_$M),n_$F._getWrapRec([n_$J.x,n_$J.y,n_$M.x,n_$M.y])},n_$n.getGlobalPosAndScale=function(n_$N){return n_$n.getGlobalRecByPoints(n_$N,0,0,1,1)},n_$n.bind=function(n_$N,n_$C){return n_$N.bind(n_$C)},n_$n.measureText=function(n_$N,n_$C){return n_$_.measureText(n_$N,n_$C)},n_$n.contextMeasureText=function(n_$N){var n_$C=n_$R.context.measureText(n_$N);return n_$C||(n_$C={width:16,height:16}),n_$C},n_$n.updateOrder=function(n_$N){if(!n_$N||n_$N.length<2)return!1;for(var n_$C,n_$a=1,n_$u=0,n_$e=n_$N.length,n_$J=NaN;n_$a<n_$e;){for(n_$C=n_$N[n_$u=n_$a],n_$J=n_$N[n_$u]._zOrder;-1<--n_$u&&n_$N[n_$u]._zOrder>n_$J;)n_$N[n_$u+1]=n_$N[n_$u];n_$N[n_$u+1]=n_$C,n_$a++}var n_$M=n_$C.parent.conchModel;if(n_$M)if(null!=n_$M.updateZOrder)n_$M.updateZOrder();else{for(n_$a=0;n_$a<n_$e;n_$a++)n_$M.removeChild(n_$N[n_$a].conchModel);for(n_$a=0;n_$a<n_$e;n_$a++)n_$M.addChildAt(n_$N[n_$a].conchModel,n_$a)}return!0},n_$n.transPointList=function(n_$N,n_$C,n_$a){var n_$u=0,n_$e=n_$N.length;for(n_$u=0;n_$u<n_$e;n_$u+=2)n_$N[n_$u]+=n_$C,n_$N[n_$u+1]+=n_$a},n_$n.parseInt=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0);var n_$a=n_$R.window.parseInt(n_$N,n_$C);return isNaN(n_$a)?0:n_$a},n_$n.getFileExtension=function(n_$N){n_$n._extReg.lastIndex=n_$N.lastIndexOf(".");var n_$C=n_$n._extReg.exec(n_$N);return n_$C&&1<n_$C.length?n_$C[1].toLowerCase():null},n_$n.getTransformRelativeToWindow=function(n_$N,n_$C,n_$a){var n_$u=n_$c.stage,n_$e=laya.utils.Utils.getGlobalPosAndScale(n_$N),n_$J=n_$u._canvasTransform.clone(),n_$M=n_$J.tx,n_$n=n_$J.ty;n_$J.rotate(-Math.PI/180*n_$c.stage.canvasDegree),n_$J.scale(n_$c.stage.clientScaleX,n_$c.stage.clientScaleY);var n_$V=n_$c.stage.canvasDegree%180!=0,n_$A=NaN,n_$P=NaN;n_$V?(n_$A=n_$a+n_$e.y,n_$P=n_$C+n_$e.x,n_$A*=n_$J.d,n_$P*=n_$J.a,90==n_$c.stage.canvasDegree?(n_$A=n_$M-n_$A,n_$P+=n_$n):(n_$A+=n_$M,n_$P=n_$n-n_$P)):(n_$A=n_$C+n_$e.x,n_$P=n_$a+n_$e.y,n_$A*=n_$J.a,n_$P*=n_$J.d,n_$A+=n_$M,n_$P+=n_$n);var n_$$=NaN,n_$O=NaN;return n_$O=n_$V?(n_$$=n_$J.d*n_$e.height,n_$J.a*n_$e.width):(n_$$=n_$J.a*n_$e.width,n_$J.d*n_$e.height),{x:n_$A,y:n_$P,scaleX:n_$$,scaleY:n_$O}},n_$n.fitDOMElementInArea=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){n_$N._fitLayaAirInitialized||(n_$N._fitLayaAirInitialized=!0,n_$N.style.transformOrigin=n_$N.style.webKittransformOrigin="left top",n_$N.style.position="absolute");var n_$M=n_$n.getTransformRelativeToWindow(n_$C,n_$a,n_$u);n_$N.style.transform=n_$N.style.webkitTransform="scale("+n_$M.scaleX+","+n_$M.scaleY+") rotate("+n_$c.stage.canvasDegree+"deg)",n_$N.style.width=n_$e+"px",n_$N.style.height=n_$J+"px",n_$N.style.left=n_$M.x+"px",n_$N.style.top=n_$M.y+"px"},n_$n.isOkTextureList=function(n_$N){if(!n_$N)return!1;var n_$C,n_$a=0,n_$u=n_$N.length;for(n_$a=0;n_$a<n_$u;n_$a++)if(!(n_$C=n_$N[n_$a])||!n_$C.source)return!1;return!0},n_$n.isOKCmdList=function(n_$N){if(!n_$N)return!1;var n_$C,n_$a,n_$u=0,n_$e=n_$N.length,n_$J=n_$i._context;for(n_$u=0;n_$u<n_$e;n_$u++)switch((n_$C=n_$N[n_$u]).callee){case n_$J._drawTexture:case n_$J._fillTexture:case n_$J._drawTextureWithTransform:if(!(n_$a=n_$C[0])||!n_$a.source)return!1}return!0},n_$n._gid=1,n_$n._pi=180/Math.PI,n_$n._pi2=Math.PI/180,n_$n._extReg=/\.(\w+)\??/g,n_$n.parseXMLFromString=function(n_$N){var n_$C;if(n_$N=n_$N.replace(/>\s+</g,"><"),-1<(n_$C=(new DOMParser).parseFromString(n_$N,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(n_$C.firstChild.firstChild.textContent);return n_$C},n_$n}(),n_$Z=function(){function n_$N(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],n_$i.isWebGL&&n_$B.regCacheByFunction(n_$I.bind(this.startDispose,this),n_$I.bind(this.getCacheList,this))}n_$P(n_$N,"laya.utils.VectorGraphManager");var n_$C=n_$N.prototype;return n_$C.getId=function(){return this._id++},n_$C.addShape=function(n_$N,n_$C){this.shapeDic[n_$N]=n_$C,this.useDic[n_$N]||(this.useDic[n_$N]=!0)},n_$C.addLine=function(n_$N,n_$C){this.shapeLineDic[n_$N]=n_$C,this.shapeLineDic[n_$N]||(this.shapeLineDic[n_$N]=!0)},n_$C.getShape=function(n_$N){this._checkKey&&null!=this.useDic[n_$N]&&(this.useDic[n_$N]=!0)},n_$C.deleteShape=function(n_$N){this.shapeDic[n_$N]&&(this.shapeDic[n_$N]=null,delete this.shapeDic[n_$N]),this.shapeLineDic[n_$N]&&(this.shapeLineDic[n_$N]=null,delete this.shapeLineDic[n_$N]),null!=this.useDic[n_$N]&&delete this.useDic[n_$N]},n_$C.getCacheList=function(){var n_$N,n_$C=[];for(n_$N in this.shapeDic)n_$C.push(this.shapeDic[n_$N]);for(n_$N in this.shapeLineDic)n_$C.push(this.shapeLineDic[n_$N]);return n_$C},n_$C.startDispose=function(n_$N){var n_$C;for(n_$C in this.useDic)this.useDic[n_$C]=!1;this._checkKey=!0},n_$C.endDispose=function(){if(this._checkKey){var n_$N;for(n_$N in this.useDic)this.useDic[n_$N]||this.deleteShape(n_$N);this._checkKey=!1}},n_$N.getInstance=function(){return n_$N.instance=n_$N.instance||new n_$N},n_$N.instance=null,n_$N}(),n_$h=function(){function n_$u(){this._obj=null,this._obj=n_$u.supportWeakMap?new n_$R.window.WeakMap:{},n_$u.supportWeakMap||n_$u._maps.push(this)}n_$P(n_$u,"laya.utils.WeakObject");var n_$N=n_$u.prototype;return n_$N.set=function(n_$N,n_$C){if(null!=n_$N)if(n_$u.supportWeakMap){var n_$a=n_$N;"string"!=typeof n_$N&&"number"!=typeof n_$N||(n_$a=n_$u._keys[n_$N])||(n_$a=n_$u._keys[n_$N]={k:n_$N}),this._obj.set(n_$a,n_$C)}else"string"==typeof n_$N||"number"==typeof n_$N?this._obj[n_$N]=n_$C:(n_$N.$_GID||(n_$N.$_GID=n_$I.getGID()),this._obj[n_$N.$_GID]=n_$C)},n_$N.get=function(n_$N){if(null==n_$N)return null;if(n_$u.supportWeakMap){var n_$C="string"==typeof n_$N||"number"==typeof n_$N?n_$u._keys[n_$N]:n_$N;return n_$C?this._obj.get(n_$C):null}return"string"==typeof n_$N||"number"==typeof n_$N?this._obj[n_$N]:this._obj[n_$N.$_GID]},n_$N.del=function(n_$N){if(null!=n_$N)if(n_$u.supportWeakMap){var n_$C="string"==typeof n_$N||"number"==typeof n_$N?n_$u._keys[n_$N]:n_$N;if(!n_$C)return;this._obj.delete(n_$C)}else"string"==typeof n_$N||"number"==typeof n_$N?delete this._obj[n_$N]:delete this._obj[this._obj.$_GID]},n_$N.has=function(n_$N){if(null==n_$N)return!1;if(n_$u.supportWeakMap){var n_$C="string"==typeof n_$N||"number"==typeof n_$N?n_$u._keys[n_$N]:n_$N;return this._obj.has(n_$C)}return"string"==typeof n_$N||"number"==typeof n_$N?null!=this._obj[n_$N]:null!=this._obj[this._obj.$_GID]},n_$u.__init__=function(){(n_$u.supportWeakMap=null!=n_$R.window.WeakMap)||n_$c.timer.loop(n_$u.delInterval,null,n_$u.clearCache)},n_$u.clearCache=function(){for(var n_$N=0,n_$C=n_$u._maps.length;n_$N<n_$C;n_$N++){n_$u._maps[n_$N]._obj={}}},n_$u.supportWeakMap=!1,n_$u.delInterval=3e5,n_$u._keys={},n_$u._maps=[],n_$V(n_$u,["I",function(){return this.I=new n_$u}]),n_$u}(),n_$U=function(){function n_$N(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}n_$P(n_$N,"laya.utils.WordText");var n_$C=n_$N.prototype;return n_$C.setText=function(n_$N){this.changed=!0,this._text=n_$N},n_$C.toString=function(){return this._text},n_$C.charCodeAt=function(n_$N){return this._text?this._text.charCodeAt(n_$N):NaN},n_$C.charAt=function(n_$N){return this._text?this._text.charAt(n_$N):null},n_$z(0,n_$C,"length",function(){return this._text?this._text.length:0}),n_$N}(),n_$NN=function(n_$N){function n_$M(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,n_$M.__super.call(this),this._childs=n_$M.ARRAY_EMPTY,this._$P=n_$M.PROP_EMPTY,this.timer=n_$c.scaleTimer,this.conchModel=n_$i.isConchNode?this.createConchModel():null}n_$P(n_$M,"laya.display.Node",n_$A);var n_$C=n_$M.prototype;return n_$C._setBit=function(n_$N,n_$C){1==n_$N&&(this._getBit(n_$N)!=n_$C&&this._updateDisplayedInstage());n_$C?this._bits|=n_$N:this._bits&=~n_$N},n_$C._getBit=function(n_$N){return 0!=(this._bits&n_$N)},n_$C._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},n_$C._setUpNoticeType=function(n_$N){var n_$C=this;for(n_$C._setBit(n_$N,!0),n_$C=n_$C.parent;n_$C;){if(n_$C._getBit(n_$N))return;n_$C._setBit(n_$N,!0),n_$C=n_$C.parent}},n_$C.on=function(n_$N,n_$C,n_$a,n_$u){return"display"!==n_$N&&"undisplay"!==n_$N||this._getBit(1)||this._setUpNoticeType(1),this._createListener(n_$N,n_$C,n_$a,n_$u,!1)},n_$C.once=function(n_$N,n_$C,n_$a,n_$u){return"display"!==n_$N&&"undisplay"!==n_$N||this._getBit(1)||this._setUpNoticeType(1),this._createListener(n_$N,n_$C,n_$a,n_$u,!0)},n_$C.createConchModel=function(){return null},n_$C.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(n_$N?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},n_$C.destroyChildren=function(){if(this._childs)for(var n_$N=this._childs.length-1;-1<n_$N;n_$N--)this._childs[n_$N].destroy(!0)},n_$C.addChild=function(n_$N){if(!n_$N||this.destroyed||n_$N===this)return n_$N;if(n_$N.zOrder&&this._set$P("hasZorder",!0),n_$N._parent===this){var n_$C=this.getChildIndex(n_$N);n_$C!==this._childs.length-1&&(this._childs.splice(n_$C,1),this._childs.push(n_$N),this.conchModel&&(this.conchModel.removeChild(n_$N.conchModel),this.conchModel.addChildAt(n_$N.conchModel,this._childs.length-1)),this._childChanged())}else n_$N.parent&&n_$N.parent.removeChild(n_$N),this._childs===n_$M.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(n_$N),this.conchModel&&this.conchModel.addChildAt(n_$N.conchModel,this._childs.length-1),(n_$N.parent=this)._childChanged();return n_$N},n_$C.addChildren=function(n_$N){for(var n_$C=arguments,n_$a=0,n_$u=n_$C.length;n_$a<n_$u;)this.addChild(n_$C[n_$a++])},n_$C.addChildAt=function(n_$N,n_$C){if(!n_$N||this.destroyed||n_$N===this)return n_$N;if(n_$N.zOrder&&this._set$P("hasZorder",!0),0<=n_$C&&n_$C<=this._childs.length){if(n_$N._parent===this){var n_$a=this.getChildIndex(n_$N);this._childs.splice(n_$a,1),this._childs.splice(n_$C,0,n_$N),this.conchModel&&(this.conchModel.removeChild(n_$N.conchModel),this.conchModel.addChildAt(n_$N.conchModel,n_$C)),this._childChanged()}else n_$N.parent&&n_$N.parent.removeChild(n_$N),this._childs===n_$M.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(n_$C,0,n_$N),this.conchModel&&this.conchModel.addChildAt(n_$N.conchModel,n_$C),n_$N.parent=this;return n_$N}throw new Error("appendChildAt:The index is out of bounds")},n_$C.getChildIndex=function(n_$N){return this._childs.indexOf(n_$N)},n_$C.getChildByName=function(n_$N){var n_$C=this._childs;if(n_$C)for(var n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++){var n_$e=n_$C[n_$a];if(n_$e.name===n_$N)return n_$e}return null},n_$C._get$P=function(n_$N){return this._$P[n_$N]},n_$C._set$P=function(n_$N,n_$C){return this.destroyed||(this._$P===n_$M.PROP_EMPTY&&(this._$P={}),this._$P[n_$N]=n_$C),n_$C},n_$C.getChildAt=function(n_$N){return this._childs[n_$N]},n_$C.setChildIndex=function(n_$N,n_$C){var n_$a=this._childs;if(n_$C<0||n_$C>=n_$a.length)throw new Error("setChildIndex:The index is out of bounds.");var n_$u=this.getChildIndex(n_$N);if(n_$u<0)throw new Error("setChildIndex:node is must child of this object.");return n_$a.splice(n_$u,1),n_$a.splice(n_$C,0,n_$N),this.conchModel&&(this.conchModel.removeChild(n_$N.conchModel),this.conchModel.addChildAt(n_$N.conchModel,n_$C)),this._childChanged(),n_$N},n_$C._childChanged=function(n_$N){},n_$C.removeChild=function(n_$N){if(!this._childs)return n_$N;var n_$C=this._childs.indexOf(n_$N);return this.removeChildAt(n_$C)},n_$C.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},n_$C.removeChildByName=function(n_$N){var n_$C=this.getChildByName(n_$N);return n_$C&&this.removeChild(n_$C),n_$C},n_$C.removeChildAt=function(n_$N){var n_$C=this.getChildAt(n_$N);if(n_$C){for(var n_$a=this._childs.length-1,n_$u=n_$N;n_$u<n_$a;++n_$u)this._childs[n_$u]=this._childs[n_$u+1];this._childs.length=n_$a,this.conchModel&&this.conchModel.removeChild(n_$C.conchModel),n_$C.parent=null}return n_$C},n_$C.removeChildren=function(n_$N,n_$C){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=2147483647),this._childs&&0<this._childs.length){var n_$a=this._childs;if(0===n_$N&&n_$J<=n_$C){var n_$u=n_$a;this._childs=n_$M.ARRAY_EMPTY}else n_$u=n_$a.splice(n_$N,n_$C-n_$N);for(var n_$e=0,n_$J=n_$u.length;n_$e<n_$J;n_$e++)n_$u[n_$e].parent=null,this.conchModel&&this.conchModel.removeChild(n_$u[n_$e].conchModel)}return this},n_$C.replaceChild=function(n_$N,n_$C){var n_$a=this._childs.indexOf(n_$C);return-1<n_$a?(this._childs.splice(n_$a,1,n_$N),this.conchModel&&(this.conchModel.removeChild(n_$C.conchModel),this.conchModel.addChildAt(n_$N.conchModel,n_$a)),n_$C.parent=null,n_$N.parent=this,n_$N):null},n_$C._updateDisplayedInstage=function(){var n_$N;n_$N=this;var n_$C=n_$c.stage;for(this._displayedInStage=!1;n_$N;){if(n_$N._getBit(1)){this._displayedInStage=n_$N._displayedInStage;break}if(n_$N==n_$C||n_$N._displayedInStage){this._displayedInStage=!0;break}n_$N=n_$N.parent}},n_$C._setDisplay=function(n_$N){this._displayedInStage!==n_$N&&((this._displayedInStage=n_$N)?this.event("display"):this.event("undisplay"))},n_$C._displayChild=function(n_$N,n_$C){var n_$a=n_$N._childs;if(n_$a)for(var n_$u=0;n_$u<n_$a.length;n_$u++){var n_$e=n_$a[n_$u];n_$e&&n_$e._getBit(1)&&(0<n_$e._childs.length?this._displayChild(n_$e,n_$C):n_$e._setDisplay(n_$C))}n_$N._setDisplay(n_$C)},n_$C.contains=function(n_$N){if(n_$N===this)return!0;for(;n_$N;){if(n_$N.parent===this)return!0;n_$N=n_$N.parent}return!1},n_$C.timerLoop=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$e&&(n_$e=!0),void 0===n_$J&&(n_$J=!1),this.timer.loop(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)},n_$C.timerOnce=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=!0),this.timer._create(!1,!1,n_$N,n_$C,n_$a,n_$u,n_$e)},n_$C.frameLoop=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=!0),this.timer._create(!0,!0,n_$N,n_$C,n_$a,n_$u,n_$e)},n_$C.frameOnce=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=!0),this.timer._create(!0,!1,n_$N,n_$C,n_$a,n_$u,n_$e)},n_$C.clearTimer=function(n_$N,n_$C){this.timer.clear(n_$N,n_$C)},n_$z(0,n_$C,"numChildren",function(){return this._childs.length}),n_$z(0,n_$C,"destroyed",function(){return this._destroyed}),n_$z(0,n_$C,"parent",function(){return this._parent},function(n_$N){this._parent!==n_$N&&(n_$N?(this._parent=n_$N,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),n_$N.displayedInStage&&this._displayChild(this,!0)),n_$N._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=n_$N))}),n_$z(0,n_$C,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),n_$M.ARRAY_EMPTY=[],n_$M.PROP_EMPTY={},n_$M.NOTICE_DISPLAY=1,n_$M.MOUSEENABLE=2,n_$M}(),n_$CN=function(n_$N){function n_$O(n_$N){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,n_$O.__super.call(this),this._padding=n_$O._PADDING,this._spacing=n_$O._SPACING,this._aligns=n_$O._ALIGNS,this._font=n_$G.EMPTY,this._ower=n_$N}n_$P(n_$O,"laya.display.css.CSSStyle",n_$N);var n_$C=n_$O.prototype;return n_$C.destroy=function(){this._ower=null,this._font=null,this._rect=null},n_$C.inherit=function(n_$N){this._font=n_$N._font,this._spacing=n_$N._spacing===n_$O._SPACING?n_$O._SPACING:n_$N._spacing.slice(),this.lineHeight=n_$N.lineHeight},n_$C._widthAuto=function(){return 0!=(262144&this._type)},n_$C.widthed=function(n_$N){return 0!=(8&this._type)},n_$C._calculation=function(n_$N,n_$C){if(n_$C.indexOf("%")<0)return!1;var n_$u=this._ower,n_$e=n_$u.parent,n_$J=this._rect;function n_$M(n_$N,n_$C,n_$a){return n_$N*n_$a[0]+n_$C*n_$a[1]+n_$a[2]}function n_$a(n_$N){var n_$C=n_$e.width,n_$a=n_$u.width;n_$J.width&&(n_$u.width=n_$M(n_$C,n_$a,n_$J.width)),n_$J.height&&(n_$u.height=n_$M(n_$C,n_$a,n_$J.height)),n_$J.left&&(n_$u.x=n_$M(n_$C,n_$a,n_$J.left)),n_$J.top&&(n_$u.y=n_$M(n_$C,n_$a,n_$J.top))}null===n_$J&&(n_$e._getCSSStyle()._type|=524288,n_$e.on("resize",this,n_$a),this._rect=n_$J={input:{}});var n_$n=n_$C.split(" ");return n_$n[0]=parseFloat(n_$n[0])/100,1==n_$n.length?n_$n[1]=n_$n[2]=0:(n_$n[1]=parseFloat(n_$n[1])/100,n_$n[2]=parseFloat(n_$n[2])),n_$J[n_$N]=n_$n,n_$J.input[n_$N]=n_$C,n_$a(),!0},n_$C.heighted=function(n_$N){return 0!=(8192&this._type)},n_$C.size=function(n_$N,n_$C){var n_$a=this._ower,n_$u=!1;-1!==n_$N&&n_$N!=this._ower.width&&(this._type|=8,this._ower.width=n_$N,n_$u=!0),-1!==n_$C&&n_$C!=this._ower.height&&(this._type|=8192,this._ower.height=n_$C,n_$u=!0),n_$u&&(n_$a._layoutLater(),524288&this._type&&n_$a.event("resize",this))},n_$C._getAlign=function(){return this._aligns[0]},n_$C._getValign=function(){return this._aligns[1]},n_$C._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},n_$C._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new n_$G(this._font))},n_$C.render=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.width,n_$J=n_$N.height;n_$a-=n_$N.pivotX,n_$u-=n_$N.pivotY,this._bgground&&null!=this._bgground.color&&n_$C.ctx.fillRect(n_$a,n_$u,n_$e,n_$J,this._bgground.color),this._border&&this._border.color&&n_$C.drawRect(n_$a,n_$u,n_$e,n_$J,this._border.color.strColor,this._border.size)},n_$C.getCSSStyle=function(){return this},n_$C.cssText=function(n_$N){this.attrs(n_$O.parseOneCSS(n_$N,";"))},n_$C.attrs=function(n_$N){if(n_$N)for(var n_$C=0,n_$a=n_$N.length;n_$C<n_$a;n_$C++){var n_$u=n_$N[n_$C];this[n_$u[0]]=n_$u[1]}},n_$C.setTransform=function(n_$N){"none"===n_$N?this._tf=n_$n._TF_EMPTY:this.attrs(n_$O.parseOneCSS(n_$N,","))},n_$C.translate=function(n_$N,n_$C){this._tf===n_$n._TF_EMPTY&&(this._tf=new n_$e),this._tf.translateX=n_$N,this._tf.translateY=n_$C},n_$C.scale=function(n_$N,n_$C){this._tf===n_$n._TF_EMPTY&&(this._tf=new n_$e),this._tf.scaleX=n_$N,this._tf.scaleY=n_$C},n_$C._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},n_$z(0,n_$C,"block",n_$N.prototype._$get_block,function(n_$N){n_$N?this._type|=1:this._type&=-2}),n_$z(0,n_$C,"valign",function(){return n_$O._valigndef[this._aligns[1]]},function(n_$N){this._aligns===n_$O._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=n_$O._valigndef[n_$N]}),n_$z(0,n_$C,"height",null,function(n_$N){if(this._type|=8192,"string"==typeof n_$N){if(this._calculation("height",n_$N))return;n_$N=parseInt(n_$N)}this.size(-1,n_$N)}),n_$z(0,n_$C,"width",null,function(n_$N){if(this._type|=8,"string"==typeof n_$N){var n_$C=n_$N.indexOf("auto");if(0<=n_$C&&(this._type|=262144,n_$N=n_$N.substr(0,n_$C)),this._calculation("width",n_$N))return;n_$N=parseInt(n_$N)}this.size(n_$N,-1)}),n_$z(0,n_$C,"fontWeight",function(){return this._font.weight},function(n_$N){this._createFont().weight=n_$N}),n_$z(0,n_$C,"left",null,function(n_$N){var n_$C=this._ower;if("string"==typeof n_$N){if("center"===n_$N?n_$N="50% -50% 0":"right"===n_$N&&(n_$N="100% -100% 0"),this._calculation("left",n_$N))return;n_$N=parseInt(n_$N)}n_$C.x=n_$N}),n_$z(0,n_$C,"_translate",null,function(n_$N){this.translate(n_$N[0],n_$N[1])}),n_$z(0,n_$C,"absolute",function(){return 0!=(4&this._type)}),n_$z(0,n_$C,"top",null,function(n_$N){var n_$C=this._ower;if("string"==typeof n_$N){if("middle"===n_$N?n_$N="50% -50% 0":"bottom"===n_$N&&(n_$N="100% -100% 0"),this._calculation("top",n_$N))return;n_$N=parseInt(n_$N)}n_$C.y=n_$N}),n_$z(0,n_$C,"align",function(){return n_$O._aligndef[this._aligns[0]]},function(n_$N){this._aligns===n_$O._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=n_$O._aligndef[n_$N]}),n_$z(0,n_$C,"bold",function(){return this._font.bold},function(n_$N){this._createFont().bold=n_$N}),n_$z(0,n_$C,"padding",function(){return this._padding},function(n_$N){this._padding=n_$N}),n_$z(0,n_$C,"leading",function(){return this._spacing[1]},function(n_$N){"string"==typeof n_$N&&(n_$N=parseInt(n_$N+"")),this._spacing===n_$O._SPACING&&(this._spacing=[0,0]),this._spacing[1]=n_$N}),n_$z(0,n_$C,"lineElement",function(){return 0!=(65536&this._type)},function(n_$N){n_$N?this._type|=65536:this._type&=-65537}),n_$z(0,n_$C,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(n_$N){this.lineElement=!1,"right"===n_$N?this._type|=32768:this._type&=-32769}),n_$z(0,n_$C,"textDecoration",function(){return this._font.decoration},function(n_$N){this._createFont().decoration=n_$N}),n_$z(0,n_$C,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(n_$N){"nowrap"===n_$N&&(this._type|=131072),"none"===n_$N&&(this._type&=-131073)}),n_$z(0,n_$C,"background",null,function(n_$N){n_$N?(this._bgground||(this._bgground={}),this._bgground.color=n_$N,this._ower.conchModel&&this._ower.conchModel.bgColor(n_$N),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),n_$z(0,n_$C,"wordWrap",function(){return 0==(131072&this._type)},function(n_$N){n_$N?this._type&=-131073:this._type|=131072}),n_$z(0,n_$C,"color",function(){return this._font.color},function(n_$N){this._createFont().color=n_$N}),n_$z(0,n_$C,"password",function(){return this._font.password},function(n_$N){this._createFont().password=n_$N}),n_$z(0,n_$C,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(n_$N){"none"===n_$N?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=n_$N),this._ower.conchModel&&this._ower.conchModel.bgColor(n_$N),this._ower._renderType|=256}),n_$z(0,n_$C,"font",function(){return this._font.toString()},function(n_$N){this._createFont().set(n_$N)}),n_$z(0,n_$C,"weight",null,function(n_$N){this._createFont().weight=n_$N}),n_$z(0,n_$C,"letterSpacing",function(){return this._spacing[0]},function(n_$N){"string"==typeof n_$N&&(n_$N=parseInt(n_$N+"")),this._spacing===n_$O._SPACING&&(this._spacing=[0,0]),this._spacing[0]=n_$N}),n_$z(0,n_$C,"fontSize",function(){return this._font.size},function(n_$N){this._createFont().size=n_$N}),n_$z(0,n_$C,"italic",function(){return this._font.italic},function(n_$N){this._createFont().italic=n_$N}),n_$z(0,n_$C,"fontFamily",function(){return this._font.family},function(n_$N){this._createFont().family=n_$N}),n_$z(0,n_$C,"stroke",function(){return this._font.stroke[0]},function(n_$N){this._createFont().stroke===n_$G._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=n_$N}),n_$z(0,n_$C,"strokeColor",function(){return this._font.stroke[1]},function(n_$N){this._createFont().stroke===n_$G._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=n_$N}),n_$z(0,n_$C,"border",function(){return this._border?this._border.value:""},function(n_$N){if("none"!=n_$N){this._border||(this._border={});var n_$C=(this._border.value=n_$N).split(" ");if(this._border.color=n_$K.create(n_$C[n_$C.length-1]),1==n_$C.length)return this._border.size=1,void(this._border.type="solid");var n_$a=0;0<n_$C[0].indexOf("px")?(this._border.size=parseInt(n_$C[0]),n_$a++):this._border.size=1,this._border.type=n_$C[n_$a],this._ower._renderType|=256}else this._border=null}),n_$z(0,n_$C,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(n_$N){n_$N?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==n_$N?null:n_$K.create(n_$N),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),n_$z(0,n_$C,"position",function(){return 4&this._type?"absolute":""},function(n_$N){"absolute"==n_$N?this._type|=4:this._type&=-5}),n_$z(0,n_$C,"display",null,function(n_$N){switch(n_$N){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),n_$z(0,n_$C,"paddingLeft",function(){return this.padding[3]}),n_$z(0,n_$C,"paddingTop",function(){return this.padding[0]}),n_$z(0,n_$C,"_scale",null,function(n_$N){this._ower.scale(n_$N[0],n_$N[1])}),n_$z(0,n_$C,"_rotate",null,function(n_$N){this._ower.rotation=n_$N}),n_$O.parseOneCSS=function(n_$N,n_$C){for(var n_$a,n_$u=[],n_$e=n_$N.split(n_$C),n_$J=0,n_$M=n_$e.length;n_$J<n_$M;n_$J++){var n_$n=n_$e[n_$J],n_$V=n_$n.indexOf(":"),n_$A=n_$n.substr(0,n_$V).replace(/^\s+|\s+$/g,"");if(0!=n_$A.length){var n_$P=n_$n.substr(n_$V+1).replace(/^\s+|\s+$/g,""),n_$$=[n_$A,n_$P];switch(n_$A){case"italic":case"bold":n_$$[1]="true"==n_$P;break;case"line-height":n_$$[0]="lineHeight",n_$$[1]=parseInt(n_$P);break;case"font-size":n_$$[0]="fontSize",n_$$[1]=parseInt(n_$P);break;case"padding":1<(n_$a=n_$P.split(" ")).length||(n_$a[1]=n_$a[2]=n_$a[3]=n_$a[0]),n_$$[1]=[parseInt(n_$a[0]),parseInt(n_$a[1]),parseInt(n_$a[2]),parseInt(n_$a[3])];break;case"rotate":n_$$[0]="_rotate",n_$$[1]=parseFloat(n_$P);break;case"scale":n_$a=n_$P.split(" "),n_$$[0]="_scale",n_$$[1]=[parseFloat(n_$a[0]),parseFloat(n_$a[1])];break;case"translate":n_$a=n_$P.split(" "),n_$$[0]="_translate",n_$$[1]=[parseInt(n_$a[0]),parseInt(n_$a[1])];break;default:(n_$$[0]=n_$O._CSSTOVALUE[n_$A])||(n_$$[0]=n_$A)}n_$u.push(n_$$)}}return n_$u},n_$O.parseCSS=function(n_$N,n_$C){for(var n_$a;null!=(n_$a=n_$O._parseCSSRegExp.exec(n_$N));)n_$O.styleSheets[n_$a[1]]=n_$O.parseOneCSS(n_$a[2],";")},n_$O.EMPTY=new n_$O(null),n_$O._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},n_$O._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),n_$O._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},n_$O._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},n_$O.styleSheets={},n_$O.ALIGN_CENTER=1,n_$O.ALIGN_RIGHT=2,n_$O.VALIGN_MIDDLE=1,n_$O.VALIGN_BOTTOM=2,n_$O._CSS_BLOCK=1,n_$O._DISPLAY_NONE=2,n_$O._ABSOLUTE=4,n_$O._WIDTH_SET=8,n_$O._PADDING=[0,0,0,0],n_$O._RECT=[-1,-1,-1,-1],n_$O._SPACING=[0,0],n_$O._ALIGNS=[0,0,0],n_$O.ADDLAYOUTED=512,n_$O._NEWFONT=4096,n_$O._HEIGHT_SET=8192,n_$O._BACKGROUND_SET=16384,n_$O._FLOAT_RIGHT=32768,n_$O._LINE_ELEMENT=65536,n_$O._NOWARP=131072,n_$O._WIDTHAUTO=262144,n_$O._LISTERRESZIE=524288,n_$O}(n_$n),n_$aN=function(n_$N){function n_$M(){this.url=null,this.audio=null,this.loaded=!1,n_$M.__super.call(this)}n_$P(n_$M,"laya.media.h5audio.AudioSound",n_$A);var n_$C=n_$M.prototype;return n_$C.dispose=function(){var n_$N=n_$M._audioCache[this.url];n_$N&&(n_$N.src="",delete n_$M._audioCache[this.url])},n_$C.load=function(n_$N){var n_$C;if(n_$N=n_$l.formatURL(n_$N),(this.url=n_$N)==n_$q._tMusic?(n_$M._initMusicAudio(),(n_$C=n_$M._musicAudio).src!=n_$N&&(n_$M._audioCache[n_$C.src]=null,n_$C=null)):n_$C=n_$M._audioCache[n_$N],n_$C&&2<=n_$C.readyState)this.event("complete");else{n_$C||(n_$C=n_$N==n_$q._tMusic?(n_$M._initMusicAudio(),n_$M._musicAudio):n_$R.createElement("audio"),(n_$M._audioCache[n_$N]=n_$C).src=n_$N),n_$C.addEventListener("canplaythrough",n_$u),n_$C.addEventListener("error",n_$e);var n_$a=this;(this.audio=n_$C).load?n_$C.load():n_$e()}function n_$u(){n_$J(),n_$a.loaded=!0,n_$a.event("complete")}function n_$e(){n_$C.load=null,n_$J(),n_$a.event("error")}function n_$J(){n_$C.removeEventListener("canplaythrough",n_$u),n_$C.removeEventListener("error",n_$e)}},n_$C.play=function(n_$N,n_$C,n_$a){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),!this.url)return null;var n_$u,n_$e;if(!(n_$u=this.url==n_$q._tMusic?n_$M._musicAudio:n_$M._audioCache[this.url]))return null;n_$e=n_$m.getItem("audio:"+this.url),n_$i.isConchApp?n_$e||((n_$e=n_$R.createElement("audio")).src=this.url):this.url==n_$q._tMusic?(n_$M._initMusicAudio(),(n_$e=n_$M._musicAudio).src=this.url):n_$e=n_$e||n_$u.cloneNode(!0);var n_$J=new n_$ON(n_$e);return n_$J.url=this.url,n_$J.loops=n_$C,n_$J.startTime=n_$N,n_$J.startHandler=n_$a,n_$J.play(!1),n_$q.addChannel(n_$J),n_$J},n_$z(0,n_$C,"duration",function(){var n_$N;return(n_$N=n_$M._audioCache[this.url])?n_$N.duration:0}),n_$M._initMusicAudio=function(){n_$M._musicAudio||(n_$M._musicAudio||(n_$M._musicAudio=n_$R.createElement("audio")),n_$i.isConchApp||n_$R.document.addEventListener("mousedown",n_$M._makeMusicOK))},n_$M._makeMusicOK=function(){n_$R.document.removeEventListener("mousedown",n_$M._makeMusicOK),n_$M._musicAudio.src?n_$M._musicAudio.play():(n_$M._musicAudio.src="",n_$M._musicAudio.load())},n_$M._audioCache={},n_$M._musicAudio=null,n_$M}(),n_$uN=function(n_$N){function n_$C(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,n_$C.__super.call(this)}n_$P(n_$C,"laya.media.SoundChannel",n_$A);var n_$a=n_$C.prototype;return n_$a.play=function(){},n_$a.stop=function(){},n_$a.pause=function(){},n_$a.resume=function(){},n_$a.__runComplete=function(n_$N){n_$N&&n_$N.run()},n_$z(0,n_$a,"volume",function(){return 1},function(n_$N){}),n_$z(0,n_$a,"position",function(){return 0}),n_$z(0,n_$a,"duration",function(){return 0}),n_$C}(),n_$eN=function(n_$N){function n_$C(){n_$C.__super.call(this)}n_$P(n_$C,"laya.media.Sound",n_$A);var n_$a=n_$C.prototype;return n_$a.load=function(n_$N){},n_$a.play=function(n_$N,n_$C,n_$a){return void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),null},n_$a.dispose=function(){},n_$z(0,n_$a,"duration",function(){return 0}),n_$C}(),n_$JN=function(n_$N){function n_$e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,n_$e.__super.call(this)}n_$P(n_$e,"laya.media.webaudio.WebAudioSound",n_$A);var n_$C=n_$e.prototype;return n_$C.load=function(n_$N){this.url=n_$N,this.audioBuffer=n_$e._dataCache[n_$N],this.audioBuffer?this._loaded(this.audioBuffer):(n_$e.e.on("loaded:"+n_$N,this,this._loaded),n_$e.e.on("err:"+n_$N,this,this._err),n_$e.__loadingSound[n_$N]||(n_$e.__loadingSound[n_$N]=!0,n_$c.loader.load(n_$N,n_$x.create(this,this.onloaded),null,n_$nN.BUFFER,4,!1,null,!0)))},n_$C.onloaded=function(n_$N){n_$N||this._err(),this._disposed?this._removeLoadEvents():(this.data=n_$N,n_$e.buffs.push({buffer:this.data,url:this.url}),n_$e.decode())},n_$C._err=function(){if(this._removeLoadEvents(),n_$e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var n_$N,n_$C,n_$a,n_$u=0;for(n_$N=(n_$C=this.__toPlays).length,n_$u=0;n_$u<n_$N;n_$u++)(n_$a=n_$C[n_$u])[3]&&!n_$a[3].isStopped&&n_$a[3].event("error");this.__toPlays.length=0}},n_$C._loaded=function(n_$N){this._removeLoadEvents(),this._disposed||(this.audioBuffer=n_$N,this.loaded=!0,this.event("complete"))},n_$C._removeLoadEvents=function(){n_$e.e.off("loaded:"+this.url,this,this._loaded),n_$e.e.off("err:"+this.url,this,this._err)},n_$C.__playAfterLoaded=function(){if(this.__toPlays){var n_$N,n_$C,n_$a,n_$u=0;for(n_$N=(n_$C=this.__toPlays).length,n_$u=0;n_$u<n_$N;n_$u++)(n_$a=n_$C[n_$u])[3]&&!n_$a[3].isStopped&&this.play(n_$a[0],n_$a[1],n_$a[2],n_$a[3]);this.__toPlays.length=0}},n_$C.play=function(n_$N,n_$C,n_$a,n_$u){return void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),n_$u=n_$u||new n_$GN,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([n_$N,n_$C,n_$a,n_$u]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),n_$u.url=this.url,n_$u.loops=n_$C,n_$u.audioBuffer=this.audioBuffer,n_$u.startTime=n_$N,n_$u.startHandler=n_$a,n_$u.play(!1),n_$q.addChannel(n_$u),n_$u},n_$C.dispose=function(){this._disposed=!0,delete n_$e._dataCache[this.url],delete n_$e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},n_$z(0,n_$C,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),n_$e.decode=function(){if(!(n_$e.buffs.length<=0||n_$e.isDecoding))if(n_$e.isDecoding=!0,(n_$e.tInfo=n_$e.buffs.shift())&&n_$e.tInfo.buffer&&n_$e.tInfo.buffer.byteLength)try{n_$e.ctx.decodeAudioData(n_$e.tInfo.buffer,n_$e._done,n_$e._fail)}catch(n_$N){console.error("decodeAudioData error  byteLength:"+n_$e.tInfo.buffer.byteLength+"  url:"+n_$e.tInfo.url)}else n_$e._fail()},n_$e._done=function(n_$N){n_$e.e.event("loaded:"+n_$e.tInfo.url,n_$N),n_$e._dataCache[n_$e.tInfo.url]=n_$N,n_$e.isDecoding=!1,n_$e.decode()},n_$e._fail=function(){n_$e.e.event("err:"+n_$e.tInfo.url,null),n_$e.isDecoding=!1,n_$e.decode()},n_$e._playEmptySound=function(){if(null!=n_$e.ctx){if(n_$e._emptySource&&(n_$e._emptySource.stop(),n_$e._emptySource.disconnect(0),!n_$GN._tryCleanFailed))try{n_$e._emptySource.buffer=null}catch(n_$N){n_$GN._tryCleanFailed=!0}var n_$N=n_$e.ctx.createBufferSource();n_$N.buffer=n_$e._miniBuffer,n_$N.connect(n_$e.ctx.destination),n_$N.start(0,0,0),n_$e._emptySource=n_$N}},n_$e._unlock=function(){n_$e._unlocked||(n_$e._playEmptySound(),"running"==n_$e.ctx.state?(n_$R.document.removeEventListener("mousedown",n_$e._unlock,!0),n_$R.document.removeEventListener("touchend",n_$e._unlock,!0),n_$R.document.removeEventListener("touchstart",n_$e._unlock,!0),n_$e._unlocked=!0):"suspended"==n_$e.ctx.state&&n_$q._recoverWebAudio())},n_$e.initWebAudio=function(){"running"!=n_$e.ctx.state&&(n_$e._unlock(),n_$R.document.addEventListener("mousedown",n_$e._unlock,!0),n_$R.document.addEventListener("touchend",n_$e._unlock,!0),n_$R.document.addEventListener("touchstart",n_$e._unlock,!0))},n_$e._emptySource=null,n_$e._dataCache={},n_$e.buffs=[],n_$e.isDecoding=!1,n_$e._unlocked=!1,n_$e.tInfo=null,n_$e.__loadingSound={},n_$V(n_$e,["window",function(){return this.window=n_$R.window},"webAudioEnabled",function(){return this.webAudioEnabled=n_$e.window.AudioContext||n_$e.window.webkitAudioContext||n_$e.window.mozAudioContext},"ctx",function(){return this.ctx=n_$e.webAudioEnabled?new(n_$e.window.AudioContext||n_$e.window.webkitAudioContext||n_$e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=n_$e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new n_$A}]),n_$e}(),n_$MN=function(n_$N){function n_$C(){this._responseType=null,this._data=null,n_$C.__super.call(this),this._http=new n_$R.window.XMLHttpRequest}n_$P(n_$C,"laya.net.HttpRequest",n_$A);var n_$a=n_$C.prototype;return n_$a.send=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$a&&(n_$a="get"),void 0===n_$u&&(n_$u="text"),this._responseType=n_$u,this._data=null;var n_$J=this,n_$M=this._http;if(n_$M.open(n_$a,n_$N,!0),n_$e)for(var n_$n=0;n_$n<n_$e.length;n_$n++)n_$M.setRequestHeader(n_$e[n_$n++],n_$e[n_$n]);else n_$i.isConchApp||(n_$C&&"string"!=typeof n_$C?n_$M.setRequestHeader("Content-Type","application/json"):n_$M.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));n_$M.responseType="arraybuffer"!==n_$u?"text":"arraybuffer",n_$M.onerror=function(n_$N){n_$J._onError(n_$N)},n_$M.onabort=function(n_$N){n_$J._onAbort(n_$N)},n_$M.onprogress=function(n_$N){n_$J._onProgress(n_$N)},n_$M.onload=function(n_$N){n_$J._onLoad(n_$N)},n_$M.send(n_$C)},n_$a._onProgress=function(n_$N){n_$N&&n_$N.lengthComputable&&this.event("progress",n_$N.loaded/n_$N.total)},n_$a._onAbort=function(n_$N){this.error("Request was aborted by user")},n_$a._onError=function(n_$N){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},n_$a._onLoad=function(n_$N){var n_$C=this._http,n_$a=void 0!==n_$C.status?n_$C.status:200;200===n_$a||204===n_$a||0===n_$a?this.complete():this.error("["+n_$C.status+"]"+n_$C.statusText+":"+n_$C.responseURL)},n_$a.error=function(n_$N){this.clear(),this.event("error",n_$N)},n_$a.complete=function(){this.clear();var n_$C=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=n_$I.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(n_$N){n_$C=!1,this.error(n_$N.message)}n_$C&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},n_$a.clear=function(){var n_$N=this._http;n_$N.onerror=n_$N.onabort=n_$N.onprogress=n_$N.onload=null},n_$z(0,n_$a,"url",function(){return this._http.responseURL}),n_$z(0,n_$a,"http",function(){return this._http}),n_$z(0,n_$a,"data",function(){return this._data}),n_$C}(),n_$nN=function(n_$N){function n_$D(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,n_$D.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}n_$P(n_$D,"laya.net.Loader",n_$A);var n_$C=n_$D.prototype;return n_$C.load=function(n_$N,n_$C,n_$a,n_$u,n_$e){if(n_$N&&""!=n_$N||console.error("Loader 加载的url不合法 "+n_$N),void 0===n_$a&&(n_$a=!0),void 0===n_$e&&(n_$e=!1),0===(this._url=n_$N).indexOf("data:image")?this._type=n_$C="image":this._type=n_$C||(n_$C=this.getTypeFromUrl(n_$N)),this._cache=n_$a,this._data=null,!n_$e&&n_$D.loadedMap[n_$N])return this._data=n_$D.loadedMap[n_$N],this.event("progress",1),void this.event("complete",this._data);if(n_$u&&n_$D.setGroup(n_$N,n_$u),null!=n_$D.parserMap[n_$C])return this._customParse=!0,void(n_$D.parserMap[n_$C]instanceof laya.utils.Handler?n_$D.parserMap[n_$C].runWith(this):n_$D.parserMap[n_$C].call(null,this));if("image"===n_$C||"htmlimage"===n_$C||"nativeimage"===n_$C)return this._loadImage(n_$N);if("ttf"===n_$C)return this._loadTTF(n_$N);switch(n_$C){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:n_$C}n_$D.preLoadedMap[n_$N]?this.onLoaded(n_$D.preLoadedMap[n_$N]):n_$M.resMgrLoad(n_$N,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},n_$C.getTypeFromUrl=function(n_$N){var n_$C=n_$I.getFileExtension(n_$N);return n_$C?n_$D.typeMap[n_$C]:(console.warn("Not recognize the resources suffix",n_$N),"text")},n_$C._loadTTF=function(n_$N){n_$N=n_$l.formatURL(n_$N);var n_$C=new n_$Q;n_$C.complete=n_$x.create(this,this.onLoaded),n_$C.load(n_$N)},n_$C._loadImage=function(n_$N){n_$M.imgMgrLoad(n_$N,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},n_$C._loadImageComplete=function(n_$N,n_$C,n_$a){if(null!=n_$a)if(n_$a instanceof ArrayBuffer){var n_$u=new DataView(n_$a),n_$e=new laya.webgl.resource.WebGLImage(new Uint8Array(n_$a,8),n_$N,0,!1,n_$u.getUint32(0),n_$u.getUint32(4));this.onLoaded(n_$e)}else if(n_$a instanceof n_$PN)n_$D.imgMgrSet[n_$N]=n_$C,n_$M.imgMgrLock(n_$N,n_$D.imgMgrSet[n_$N]),this._url=n_$N,this.complete(n_$a);else{var n_$J=-1!=n_$N.indexOf(".png",n_$N.length-4)?6408:6407;n_$e=new laya.webgl.resource.WebGLImage(n_$a,n_$N,n_$J,!1,n_$a.width,n_$a.height);this.onLoaded(n_$e)}else this.event("error","Load image failed")},n_$C.imageCancel=function(n_$N,n_$C,n_$a){n_$M.imgMgrCancel(n_$N,this._onImageCallback)},n_$C._loadSound=function(n_$N){var n_$C=new n_$q._soundClass,n_$a=this;function n_$u(){n_$C.offAll()}n_$C.on("complete",this,function(){n_$u(),n_$a.onLoaded(n_$C)}),n_$C.on("error",this,function(){n_$u(),n_$C.dispose(),n_$a.event("error","Load sound failed")}),n_$C.load(n_$N)},n_$C.onProgress=function(n_$N){"atlas"===this._type?this.event("progress",.3*n_$N):this.event("progress",n_$N)},n_$C.onError=function(n_$N){this.event("error",n_$N)},n_$C._loadedComplete=function(n_$N,n_$C,n_$a){if(null!=n_$a)switch(this._type){case"atlas":case"plf":case"json":var n_$u=new n_$w(n_$a);this.onLoaded(JSON.parse(n_$u.readUTFBytes()));break;case"font":n_$u=new n_$w(n_$a);this.onLoaded(n_$I.parseXMLFromString(n_$u.readUTFBytes()));break;default:this.onLoaded(n_$a)}else this.event("error",n_$N)},n_$C.onLoaded=function(n_$N){var n_$C=this._type;if("plf"==n_$C)this.parsePLFData(n_$N),this.complete(n_$N);else if("image"===n_$C){var n_$a=new n_$PN(n_$N);n_$a.url=this._url,this.complete(n_$a)}else if("sound"===n_$C||"htmlimage"===n_$C||"nativeimage"===n_$C)this.complete(n_$N);else if("atlas"===n_$C){if(!n_$N.src&&!n_$N._setContext){if(!this._data){if((this._data=n_$N).meta&&n_$N.meta.image)for(var n_$u=n_$N.meta.image.split(","),n_$e=0<=this._url.indexOf("/")?"/":"\\",n_$J=this._url.lastIndexOf(n_$e),n_$M=0<=n_$J?this._url.substr(0,n_$J+1):"",n_$n=0,n_$V=n_$u.length;n_$n<n_$V;n_$n++)n_$u[n_$n]=n_$M+n_$u[n_$n];else n_$u=[this._url.replace(".json",".png")];n_$u.reverse(),n_$N.toLoads=n_$u,n_$N.pics=[]}return this.event("progress",.3+1/n_$u.length*.6),this._loadImage(n_$u.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(n_$N),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var n_$A=this._data.frames,n_$P=this._url.split("?")[0],n_$$=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:n_$P.substring(0,n_$P.lastIndexOf("."))+"/",n_$O=this._data.pics,n_$G=n_$l.formatURL(this._url),n_$z=n_$D.atlasMap[n_$G]||(n_$D.atlasMap[n_$G]=[]);n_$z.dir=n_$$;var n_$f=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var n_$t in n_$f=parseFloat(this._data.meta.scale),n_$A){var n_$g,n_$x=n_$A[n_$t],n_$W=n_$O[n_$x.frame.idx?n_$x.frame.idx:0],n_$v=n_$l.formatURL(n_$$+n_$t);n_$W.scaleRate=n_$f,n_$g=n_$PN.create(n_$W,n_$x.frame.x,n_$x.frame.y,n_$x.frame.w,n_$x.frame.h,n_$x.spriteSourceSize.x,n_$x.spriteSourceSize.y,n_$x.sourceSize.w,n_$x.sourceSize.h),n_$D.cacheRes(n_$v,n_$g),n_$D.keepCache(this._url,n_$$+n_$t),n_$g.url=n_$v,n_$z.push(n_$v)}else for(n_$t in n_$A)n_$W=n_$O[(n_$x=n_$A[n_$t]).frame.idx?n_$x.frame.idx:0],n_$v=n_$l.formatURL(n_$$+n_$t),n_$D.cacheRes(n_$v,n_$PN.create(n_$W,n_$x.frame.x,n_$x.frame.y,n_$x.frame.w,n_$x.frame.h,n_$x.spriteSourceSize.x,n_$x.spriteSourceSize.y,n_$x.sourceSize.w,n_$x.sourceSize.h)),n_$D.loadedMap[n_$v].url=n_$v,n_$D.keepCache(this._url,n_$$+n_$t),n_$z.push(n_$v);delete this._data.pics,this.complete(this._data)}else if("font"==n_$C){if(!n_$N.src)return this._data=n_$N,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var n_$X=new n_$s;n_$X.parseFont(this._data,n_$N);var n_$r=this._url.split(".fnt")[0].split("/"),n_$c=n_$r[n_$r.length-1];n_$tN.registerBitmapFont(n_$c,n_$X),this._data=n_$X,this.complete(this._data)}else if("pkm"==n_$C){var n_$E=n_$rN.create(n_$N,this._url),n_$F=new n_$PN(n_$E);n_$F.url=this._url,this.complete(n_$F)}else this.complete(n_$N)},n_$C.parsePLFData=function(n_$N){var n_$C,n_$a,n_$u;for(n_$C in n_$N)switch(n_$u=n_$N[n_$C],n_$C){case"json":case"text":for(n_$a in n_$u)n_$D.preLoadedMap[n_$l.formatURL(n_$a)]=n_$u[n_$a];break;default:for(n_$a in n_$u)n_$D.preLoadedMap[n_$l.formatURL(n_$a)]=n_$u[n_$a]}},n_$C.complete=function(n_$N){this._data=n_$N,this._customParse?this.event("loaded",n_$N instanceof Array?[n_$N]:n_$N):(n_$D._loaders.push(this),n_$D._isWorking||n_$D.checkNext())},n_$C.endLoad=function(n_$N){n_$N&&(this._data=n_$N),this._cache&&n_$D.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},n_$z(0,n_$C,"url",function(){return this._url}),n_$z(0,n_$C,"data",function(){return this._data}),n_$z(0,n_$C,"cache",function(){return this._cache}),n_$z(0,n_$C,"type",function(){return this._type}),n_$D.checkNext=function(){n_$D._isWorking=!0;for(var n_$N=n_$R.now();n_$D._startIndex<n_$D._loaders.length;)if(n_$R.now(),n_$D._loaders[n_$D._startIndex].endLoad(),n_$D._startIndex++,n_$R.now()-n_$N>n_$D.maxTimeOut)return console.warn("loader callback cost a long time:"+(n_$R.now()-n_$N)+" url="+n_$D._loaders[n_$D._startIndex-1].url),void n_$c.timer.frameOnce(1,null,n_$D.checkNext);n_$D._loaders.length=0,n_$D._startIndex=0,n_$D._isWorking=!1},n_$D.clearRes=function(n_$N,n_$C){if(null!=n_$N){void 0===n_$C&&(n_$C=!1),n_$N=n_$l.formatURL(n_$N);var n_$a=n_$D.getAtlas(n_$N);if(n_$a){for(var n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$u++){var n_$J=n_$a[n_$u],n_$M=n_$D.getRes(n_$J);delete n_$D.loadedMap[n_$J],n_$D.clearCache(n_$N.substring(n_$l.basePath.length),n_$J.substring(n_$l.basePath.length)),n_$M&&n_$M.destroy(n_$C)}n_$a.length=0,delete n_$D.atlasMap[n_$N],delete n_$D.loadedMap[n_$N]}else{var n_$n=n_$D.loadedMap[n_$N];n_$n&&(delete n_$D.loadedMap[n_$N],n_$n instanceof laya.resource.Texture&&n_$n.bitmap&&n_$n.destroy(n_$C))}}},n_$D.clearTextureRes=function(n_$N){n_$N=n_$l.formatURL(n_$N);var n_$C=laya.net.Loader.getAtlas(n_$N),n_$a=n_$C&&0<n_$C.length?laya.net.Loader.getRes(n_$C[0]):laya.net.Loader.getRes(n_$N);n_$a&&n_$a.bitmap&&(n_$i.isConchApp&&!n_$i.isConchWebGL?n_$a.bitmap.source.releaseTexture&&n_$a.bitmap.source.releaseTexture():null==n_$a.bitmap._atlaser&&n_$a.bitmap.releaseResource(!0))},n_$D.getRes=function(n_$N){return n_$D.loadedMap[n_$l.formatURL(n_$N)]},n_$D.getAtlas=function(n_$N){return n_$D.atlasMap[n_$l.formatURL(n_$N)]},n_$D.cacheRes=function(n_$N,n_$C){n_$N=n_$l.formatURL(n_$N),null!=n_$D.loadedMap[n_$N]?console.warn("Resources already exist,is repeated loading:",n_$N):n_$D.loadedMap[n_$N]=n_$C},n_$D.setGroup=function(n_$N,n_$C){n_$D.groupMap[n_$C]||(n_$D.groupMap[n_$C]=[]),n_$D.groupMap[n_$C].push(n_$N)},n_$D.clearResByGroup=function(n_$N){if(n_$D.groupMap[n_$N]){var n_$C=n_$D.groupMap[n_$N],n_$a=0,n_$u=n_$C.length;for(n_$a=0;n_$a<n_$u;n_$a++)n_$D.clearRes(n_$C[n_$a]);n_$C.length=0}},n_$D.keepCache=function(n_$N,n_$C){if(n_$N&&n_$C){var n_$a=n_$D.cacheSet[n_$C];n_$a?-1==n_$a.indexOf(n_$N)&&n_$a.push(n_$N):n_$D.cacheSet[n_$C]=[n_$N]}},n_$D.clearCache=function(n_$N,n_$C){if(n_$N&&n_$C){var n_$a=n_$D.cacheSet[n_$C];if(n_$a){var n_$u=n_$a.indexOf(n_$N);if(-1!==n_$u){var n_$e=n_$a.length-1;0==n_$e?(delete n_$D.cacheSet[n_$C],0<n_$D.imgMgrSet[n_$C]?n_$M.imgMgrFree(n_$C,n_$D.imgMgrSet[n_$C]):n_$D.clearRes(n_$C,!0)):(n_$a[n_$u]=n_$a[n_$e],n_$a.length=n_$e)}}}},n_$D.saveObject=function(n_$N,n_$C,n_$a){if(n_$C&&n_$N){var n_$u=n_$D.objectSet[n_$N];n_$u?(console.warn("Loader.saveObject: "+n_$N),n_$u[0]=n_$C,n_$u[1]=n_$a):n_$D.objectSet[n_$N]=[n_$C,n_$a,[]]}},n_$D.findObject=function(n_$N){if(n_$N){var n_$C=n_$D.objectSet[n_$N];if(n_$C)return n_$C[0]}return null},n_$D.keepObject=function(n_$N,n_$C){if(n_$N&&n_$C){var n_$a=n_$D.objectSet[n_$C];n_$a&&-1===n_$a[2].indexOf(n_$N)&&n_$a[2].push(n_$N)}},n_$D.clearObject=function(n_$N,n_$C){if(n_$N&&n_$C){var n_$a=n_$D.objectSet[n_$C];if(n_$a){var n_$u=n_$a[2],n_$e=n_$u.indexOf(n_$N);if(-1!==n_$e){var n_$J=n_$u.length-1;0==n_$J?(delete n_$D.objectSet[n_$C],n_$a[1]&&n_$a[1].call(null,n_$a[0])):(n_$u[n_$e]=n_$u[n_$J],n_$u.length=n_$J)}}}},n_$D.TEXT="text",n_$D.JSON="json",n_$D.XML="xml",n_$D.BUFFER="arraybuffer",n_$D.IMAGE="image",n_$D.SOUND="sound",n_$D.ATLAS="atlas",n_$D.FONT="font",n_$D.TTF="ttf",n_$D.PLF="plf",n_$D.PKM="pkm",n_$D.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},n_$D.parserMap={},n_$D.groupMap={},n_$D.maxTimeOut=100,n_$D.loadedMap={},n_$D.preLoadedMap={},n_$D.atlasMap={},n_$D._loaders=[],n_$D._isWorking=!1,n_$D._startIndex=0,n_$D.imgCache={},n_$D.cacheSet={},n_$D.objectSet={},n_$D.imgMgrSet={},n_$D}(),n_$VN=function(n_$N){var n_$O;function n_$G(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},n_$G.__super.call(this);for(var n_$N=0;n_$N<this._maxPriority;n_$N++)this._resInfos[n_$N]=[]}n_$P(n_$G,"laya.net.LoaderManager",n_$A);var n_$C=n_$G.prototype;return n_$C.create=function(n_$N,n_$a,n_$C,n_$u,n_$e,n_$J,n_$M,n_$n){if(null==n_$J&&(n_$J=2),null==n_$M&&(n_$M=!0),n_$N instanceof Array){var n_$V=n_$N,n_$A=n_$V.length,n_$P=0;if(n_$C)var n_$$=n_$x.create(n_$C.caller,n_$C.method,n_$C.args,!1);for(var n_$O=0;n_$O<n_$A;n_$O++){var n_$G=n_$V[n_$O];"string"==typeof n_$G&&(n_$G=n_$V[n_$O]={url:n_$G}),n_$G.progress=0}for(n_$O=0;n_$O<n_$A;n_$O++){n_$G=n_$V[n_$O];var n_$z=n_$C?n_$x.create(null,n_$g,[n_$G],!1):null,n_$f=n_$C||n_$a?n_$x.create(null,n_$t,[n_$G]):null;this._create(n_$G.url,n_$f,n_$z,n_$G.clas||n_$u,n_$G.params||n_$e,null!=n_$G.priority&&0<=n_$G.priority?n_$G.priority:n_$J,n_$M,n_$G.group||n_$n)}function n_$t(n_$N,n_$C){n_$P++,n_$N.progress=1,n_$P===n_$A&&n_$a&&n_$a.run()}function n_$g(n_$N,n_$C){n_$N.progress=n_$C;for(var n_$a=0,n_$u=0;n_$u<n_$A;n_$u++){n_$a+=n_$V[n_$u].progress}var n_$e=n_$a/n_$A;n_$$.runWith(n_$e)}return!0}return this._create(n_$N,n_$a,n_$C,n_$u,n_$e,n_$J,n_$M,n_$n)},n_$C._create=function(n_$C,n_$a,n_$N,n_$u,n_$e,n_$J,n_$M,n_$n){n_$C&&""!=n_$C||console.error("加载的url不合法 "+n_$C),null==n_$J&&(n_$J=2),null==n_$M&&(n_$M=!0);var n_$V=n_$l.formatURL(n_$C),n_$A=this.getRes(n_$V);if(n_$A)!n_$A.hasOwnProperty("loaded")||n_$A.loaded?(n_$N&&n_$N.runWith(1),n_$a&&n_$a.run()):n_$a&&n_$c.loader._createListener(n_$C,n_$a.caller,n_$a.method,n_$a.args,!0,!1);else{var n_$P=n_$I.getFileExtension(n_$C),n_$$=n_$G.createMap[n_$P];if(!n_$$)throw new Error("LoaderManager:unknown file("+n_$C+") extension with: "+n_$P+".");n_$u||(n_$u=n_$$[0]);var n_$O=n_$$[1];if("atlas"==n_$P)this.load(n_$C,n_$a,n_$N,n_$O,n_$J,n_$M);else{n_$u===n_$PN&&(n_$O="htmlimage"),(n_$A=n_$u?new n_$u:null).hasOwnProperty("_loaded")&&(n_$A._loaded=!1),n_$A._setUrl(n_$C),n_$n&&n_$A._setGroup(n_$n),this._createLoad(n_$A,n_$C,n_$x.create(null,function(n_$N){n_$A&&!n_$A.destroyed&&n_$N&&n_$A.onAsynLoaded.call(n_$A,n_$C,n_$N,n_$e),n_$a&&n_$a.run();n_$c.loader.event(n_$C)}),n_$N,n_$O,n_$J,!1,n_$n,!0),n_$M&&this.cacheRes(n_$V,n_$A)}}return n_$A},n_$C.load=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){n_$N&&""!=n_$N||console.error("加载的url不合法 "+n_$N);var n_$V=this;if(null==n_$e&&(n_$e=2),null==n_$J&&(n_$J=!0),void 0===n_$n&&(n_$n=!1),n_$N instanceof Array)return this._loadAssets(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M);var n_$A=n_$nN.getRes(n_$N);if(null!=n_$A)n_$c.timer.frameOnce(1,null,function(){n_$a&&n_$a.runWith(1),n_$C&&n_$C.runWith(n_$A),n_$V._loaderCount||n_$V.event("complete")});else{var n_$P=n_$G._resMap[n_$N];n_$P?(n_$C&&n_$P._createListener("complete",n_$C.caller,n_$C.method,n_$C.args,!1,!1),n_$a&&n_$P._createListener("progress",n_$a.caller,n_$a.method,n_$a.args,!1,!1)):((n_$P=this._infoPool.length?this._infoPool.pop():new n_$O).url=n_$N,n_$P.clas=null,n_$P.type=n_$u,n_$P.cache=n_$J,n_$P.group=n_$M,n_$P.ignoreCache=n_$n,n_$P.priority=n_$e,n_$C&&n_$P.on("complete",n_$C.caller,n_$C.method,n_$C.args),n_$a&&n_$P.on("progress",n_$a.caller,n_$a.method,n_$a.args),n_$G._resMap[n_$N]=n_$P,n_$e=n_$e<this._maxPriority?0<=n_$e?n_$e:0:this._maxPriority-1,this._resInfos[n_$e].push(n_$P),this._next())}return this},n_$C.cancel=function(n_$N,n_$C,n_$a){if(n_$A=n_$G._resMap[n_$N]){n_$C&&n_$A.off("complete",n_$C.caller,n_$C.method,!1),n_$a&&n_$A.off("progress",n_$a.caller,n_$a.method,!1);var n_$u=n_$A.getListener("complete"),n_$e=n_$A.getListener("progress");if(!(n_$u&&n_$u.head||n_$e&&n_$e.head)){if(n_$A.loader){var n_$J=n_$A.loader;n_$J.imageCancel(n_$N),n_$J.offAll(),n_$J._data=null,n_$J._customParse=!1,n_$J._url=null,n_$J._class=null,n_$J._type=null,this._loaders.push(n_$J),this._loaderCount--,delete this._loaderMap[n_$A.url]}for(var n_$M=0;n_$M<this._maxPriority;n_$M++)for(var n_$n=this._resInfos[n_$M],n_$V=n_$n.length-1;-1<n_$V;n_$V--){var n_$A;(n_$A=n_$n[n_$V])&&n_$A.url===n_$N&&(n_$n[n_$V]=null,n_$A.destroy(),n_$A.offAll(),this._infoPool.push(n_$A))}delete n_$G._resMap[n_$N],this._next()}}},n_$C._createLoad=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){var n_$A=this;if(null==n_$J&&(n_$J=2),null==n_$M&&(n_$M=!0),void 0===n_$V&&(n_$V=!1),n_$C instanceof Array)return this._loadAssets(n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n);var n_$P=n_$nN.getRes(n_$C);if(null!=n_$P)n_$c.timer.frameOnce(1,null,function(){n_$u&&n_$u.runWith(1),n_$a&&n_$a.runWith(n_$P),n_$A._loaderCount||n_$A.event("complete")});else{var n_$$=n_$G._resMap[n_$C];n_$$?(n_$a&&n_$$._createListener("complete",n_$a.caller,n_$a.method,n_$a.args,!1,!1),n_$u&&n_$$._createListener("progress",n_$u.caller,n_$u.method,n_$u.args,!1,!1)):((n_$$=this._infoPool.length?this._infoPool.pop():new n_$O).url=n_$C,n_$$.clas=n_$N,n_$$.type=n_$e,n_$$.cache=n_$M,n_$$.group=n_$n,n_$$.ignoreCache=n_$V,n_$$.priority=n_$J,n_$a&&n_$$.on("complete",n_$a.caller,n_$a.method,n_$a.args),n_$u&&n_$$.on("progress",n_$u.caller,n_$u.method,n_$u.args),n_$G._resMap[n_$C]=n_$$,n_$J=n_$J<this._maxPriority?0<=n_$J?n_$J:0:this._maxPriority-1,this._resInfos[n_$J].push(n_$$),this._next())}return this},n_$C._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var n_$N=0;n_$N<this._maxPriority;n_$N++)for(var n_$C=this._resInfos[n_$N];0<n_$C.length;){var n_$a=n_$C.shift();if(n_$a)return this._doLoad(n_$a)}this._loaderCount||this.event("complete")}},n_$C._doLoad=function(n_$C){var n_$a=this._loaders.length?this._loaders.pop():new n_$nN;this._loaderCount++,(this._loaderMap[n_$C.url]=n_$a).on("complete",null,n_$e),n_$a.on("progress",null,function(n_$N){n_$C.event("progress",n_$N)}),n_$a.on("error",null,function(n_$N){n_$e(null)}),n_$C.loader=n_$a;var n_$u=this;function n_$e(n_$N){n_$a.offAll(),n_$a._data=null,n_$a._customParse=!1,n_$a._url=null,n_$a._class=null,n_$a._type=null,n_$u._loaders.push(n_$a),n_$u._loaderCount--,delete n_$u._loaderMap[n_$C.url],n_$u._endLoad(n_$C,n_$N instanceof Array?[n_$N]:n_$N),n_$u._next()}n_$a._class=n_$C.clas,1<=n_$C.priority?(n_$a.priority=n_$C.priority,n_$a.realTime=!1):(n_$a.priority=0,n_$a.realTime=!0),n_$a.load(n_$C.url,n_$C.type,n_$C.cache,n_$C.group,n_$C.ignoreCache)},n_$C._endLoad=function(n_$N,n_$C){var n_$a=n_$N.url;if(null==n_$C){var n_$u=this._failRes[n_$a]||0;if(n_$u<this.retryNum)return console.warn("[warn]Retry to load:",n_$a),this._failRes[n_$a]=n_$u+1,void n_$c.timer.once(this.retryDelay,this,this._addReTry,[n_$N],!1);console.warn("[error]Failed to load:",n_$a),this.event("error",n_$a)}this._failRes[n_$a]&&(this._failRes[n_$a]=0),delete n_$G._resMap[n_$a],n_$N.event("complete",n_$C),n_$N.destroy(),n_$N.offAll(),this._infoPool.push(n_$N)},n_$C._addReTry=function(n_$N){this._resInfos[this._maxPriority-1].push(n_$N),this._next()},n_$C.clearRes=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!1),n_$nN.clearRes(n_$N,n_$C)},n_$C.getRes=function(n_$N){return n_$nN.getRes(n_$N)},n_$C.cacheRes=function(n_$N,n_$C){n_$nN.cacheRes(n_$N,n_$C)},n_$C.clearTextureRes=function(n_$N){n_$nN.clearTextureRes(n_$N)},n_$C.setGroup=function(n_$N,n_$C){n_$nN.setGroup(n_$N,n_$C)},n_$C.clearResByGroup=function(n_$N){n_$nN.clearResByGroup(n_$N)},n_$C.clearUnLoaded=function(){for(var n_$N=0;n_$N<this._maxPriority;n_$N++){for(var n_$C=this._resInfos[n_$N],n_$a=n_$C.length-1;-1<n_$a;n_$a--){var n_$u=n_$C[n_$a];n_$u&&(n_$u.destroy(),n_$u.offAll(),this._infoPool.push(n_$u))}n_$C.length=0}this._loaderCount=0,n_$G._resMap={}},n_$C.cancelLoadByUrls=function(n_$N){if(n_$N)for(var n_$C=0,n_$a=n_$N.length;n_$C<n_$a;n_$C++)this.cancelLoadByUrl(n_$N[n_$C])},n_$C.cancelLoadByUrl=function(n_$N){for(var n_$C=0;n_$C<this._maxPriority;n_$C++)for(var n_$a=this._resInfos[n_$C],n_$u=n_$a.length-1;-1<n_$u;n_$u--){var n_$e=n_$a[n_$u];n_$e&&n_$e.url===n_$N&&(n_$a[n_$u]=null,n_$e.destroy(),n_$e.offAll(),this._infoPool.push(n_$e))}n_$G._resMap[n_$N]&&delete n_$G._resMap[n_$N]},n_$C._loadAssets=function(n_$N,n_$a,n_$M,n_$C,n_$u,n_$e,n_$J){null==n_$u&&(n_$u=2),null==n_$e&&(n_$e=!0);for(var n_$n=n_$N.length,n_$V=0,n_$A=0,n_$P=[],n_$$=!0,n_$O=0;n_$O<n_$n;n_$O++){var n_$G=n_$N[n_$O];if(!n_$G)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+n_$N);"string"==typeof n_$G&&(n_$G={url:n_$G,type:n_$C,size:1,priority:n_$u}),n_$G.size||(n_$G.size=1),n_$G.progress=0,n_$A+=n_$G.size,n_$P.push(n_$G);var n_$z=n_$M?n_$x.create(null,n_$g,[n_$G],!1):null,n_$f=n_$a||n_$M?n_$x.create(null,n_$t,[n_$G]):null;this.load(n_$G.url,n_$f,n_$z,n_$G.type,null!=n_$G.priority&&0<=n_$G.priority?n_$G.priority:2,n_$e,n_$G.group||n_$J)}function n_$t(n_$N,n_$C){n_$V++,n_$N.progress=1,n_$C||(n_$$=!1),n_$V===n_$n&&n_$a&&n_$a.runWith(n_$$)}function n_$g(n_$N,n_$C){if(null!=n_$M){n_$N.progress=n_$C;for(var n_$a=0,n_$u=0;n_$u<n_$P.length;n_$u++){var n_$e=n_$P[n_$u];n_$a+=n_$e.size*n_$e.progress}var n_$J=n_$a/n_$A;n_$M.runWith(n_$J)}}return this},n_$G.cacheRes=function(n_$N,n_$C){n_$nN.cacheRes(n_$N,n_$C)},n_$G._resMap={},n_$V(n_$G,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),n_$G.__init$=function(){n_$O=function(n_$N){function n_$C(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,n_$C.__super.call(this)}return n_$P(n_$C,"",n_$A),n_$C.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},n_$C}()},n_$G}(),n_$AN=(function(n_$N){function n_$e(n_$N){n_$e.__super.call(this),n_$N||(n_$N=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var n_$C=0,n_$a=0,n_$u=0;n_$u<20;n_$u++)n_$u%5!=4?this._mat[n_$C++]=n_$N[n_$u]:this._alpha[n_$a++]=n_$N[n_$u];this._action=n_$_.createFilterAction(32),this._action.data=this}n_$P(n_$e,"laya.filters.ColorFilter",n_$g);var n_$C=n_$e.prototype;n_$c.imps(n_$C,{"laya.filters.IFilter":!0}),n_$C.callNative=function(n_$N){n_$N._$P.cf=this;n_$N.conchModel&&n_$N.conchModel.setFilterMatrix&&n_$N.conchModel.setFilterMatrix(this._mat,this._alpha)},n_$z(0,n_$C,"type",function(){return 32}),n_$z(0,n_$C,"action",function(){return this._action})}(),function(n_$N){function n_$u(n_$N,n_$C,n_$a){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===n_$C&&(n_$C=0),n_$u.__super.call(this),this._byteClass=n_$a||n_$w,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,n_$N&&0<n_$C&&n_$C<65535&&this.connect(n_$N,n_$C)}n_$P(n_$u,"laya.net.Socket",n_$A);var n_$C=n_$u.prototype;n_$C.connect=function(n_$N,n_$C){var n_$a="ws://"+n_$N+":"+n_$C;n_$a="https:"==n_$R.window.location.protocol?"wss://"+n_$N+":"+n_$C:"ws://"+n_$N+":"+n_$C,this.connectByUrl(n_$a)},n_$C.connectByUrl=function(n_$N){var n_$C=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new n_$R.window.WebSocket(n_$N,this.protocols):this._socket=new n_$R.window.WebSocket(n_$N),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(n_$N){n_$C._onOpen(n_$N)},this._socket.onmessage=function(n_$N){n_$C._onMessage(n_$N)},this._socket.onclose=function(n_$N){n_$C._onClose(n_$N)},this._socket.onerror=function(n_$N){n_$C._onError(n_$N)}},n_$C.cleanSocket=function(){try{this._socket.close()}catch(n_$N){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},n_$C.close=function(){if(null!=this._socket)try{this._socket.close()}catch(n_$N){}},n_$C._onOpen=function(n_$N){this._connected=!0,this.event("open",n_$N)},n_$C._onMessage=function(n_$N){if(n_$N&&n_$N.data){var n_$C=n_$N.data;if(this.disableInput&&n_$C)this.event("message",n_$C);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var n_$a=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,n_$C&&("string"==typeof n_$C?this._input.writeUTFBytes(n_$C):this._input.writeArrayBuffer(n_$C),this._addInputPosition=this._input.pos,this._input.pos=n_$a),this.event("message",n_$C)}}},n_$C._onClose=function(n_$N){this._connected=!1,this.event("close",n_$N)},n_$C._onError=function(n_$N){this.event("error",n_$N)},n_$C.send=function(n_$N){this._socket.send(n_$N)},n_$C.flush=function(){if(this._output&&0<this._output.length){var n_$C;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(n_$N){n_$C=n_$N}this._output.endian=this.endian,this._output.clear(),n_$C&&this.event("error",n_$C)}},n_$z(0,n_$C,"input",function(){return this._input}),n_$z(0,n_$C,"output",function(){return this._output}),n_$z(0,n_$C,"connected",function(){return this._connected}),n_$z(0,n_$C,"endian",function(){return this._endian},function(n_$N){this._endian=n_$N,null!=this._input&&(this._input.endian=n_$N),null!=this._output&&(this._output.endian=n_$N)}),n_$u.LITTLE_ENDIAN="littleEndian",n_$u.BIG_ENDIAN="bigEndian"}(),function(n_$N){function n_$n(){n_$n.__super.call(this),this._$1__id=++n_$n._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(n_$n._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,n_$L.currentResourceManager&&n_$L.currentResourceManager.addResource(this)}n_$P(n_$n,"laya.resource.Resource",n_$A);var n_$C=n_$n.prototype;return n_$c.imps(n_$C,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),n_$C._setUrl=function(n_$N){var n_$C;this._url!==n_$N&&(this._url&&((n_$C=n_$n._urlResourcesMap[this._url]).splice(n_$C.indexOf(this),1),0===n_$C.length&&delete n_$n._urlResourcesMap[this._url]),n_$N&&((n_$C=n_$n._urlResourcesMap[n_$N])||(n_$n._urlResourcesMap[n_$N]=n_$C=[]),n_$C.push(this)),this._url=n_$N)},n_$C._getGroup=function(){return this._group},n_$C._setGroup=function(n_$N){var n_$C;this._group!==n_$N&&(this._group&&((n_$C=n_$n._groupResourcesMap[this._group]).splice(n_$C.indexOf(this),1),0===n_$C.length&&delete n_$n._groupResourcesMap[this._group]),n_$N&&((n_$C=n_$n._groupResourcesMap[n_$N])||(n_$n._groupResourcesMap[n_$N]=n_$C=[]),n_$C.push(this)),this._group=n_$N)},n_$C._addReference=function(){this._referenceCount++},n_$C._removeReference=function(){this._referenceCount--},n_$C._clearReference=function(){this._referenceCount=0},n_$C._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},n_$C.recreateResource=function(){this.completeCreate()},n_$C.disposeResource=function(){},n_$C.activeResource=function(n_$N){void 0===n_$N&&(n_$N=!1),this._lastUseFrameCount=n_$b.loopCount,!this._destroyed&&this.__loaded&&(this._released||n_$N)&&this.recreateResource()},n_$C.releaseResource=function(n_$N){return void 0===n_$N&&(n_$N=!0),!(!n_$N&&this.lock)&&(!(this._released&&!n_$N)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},n_$C.onAsynLoaded=function(n_$N,n_$C,n_$a){throw new Error("Resource: must override this function!")},n_$C.destroy=function(){var n_$N;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete n_$n._idResourcesMap[this.id],this._url&&((n_$N=n_$n._urlResourcesMap[this._url])&&(n_$N.splice(n_$N.indexOf(this),1),0===n_$N.length&&delete n_$n._urlResourcesMap[this.url]),n_$nN.clearRes(this._url),this.__loaded||n_$_.cancelLoadByUrl(this._url)),this._group&&((n_$N=n_$n._groupResourcesMap[this._group]).splice(n_$N.indexOf(this),1),0===n_$N.length&&delete n_$n._groupResourcesMap[this.url]))},n_$C.completeCreate=function(){this._released=!1,this.event("recovered",this)},n_$C.dispose=function(){this.destroy()},n_$z(0,n_$C,"memorySize",function(){return this._memorySize},function(n_$N){var n_$C=n_$N-this._memorySize;this._memorySize=n_$N,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,n_$C),this.resourceManager&&this.resourceManager.addSize(n_$C)}),n_$z(0,n_$C,"_loaded",null,function(n_$N){this.__loaded=n_$N}),n_$z(0,n_$C,"loaded",function(){return this.__loaded}),n_$z(0,n_$C,"id",function(){return this._$1__id}),n_$z(0,n_$C,"destroyed",function(){return this._destroyed}),n_$z(0,n_$C,"group",function(){return this._getGroup()},function(n_$N){this._setGroup(n_$N)}),n_$z(0,n_$C,"resourceManager",function(){return this._resourceManager}),n_$z(0,n_$C,"url",function(){return this._url}),n_$z(0,n_$C,"released",function(){return this._released}),n_$z(0,n_$C,"referenceCount",function(){return this._referenceCount}),n_$n.getResourceByID=function(n_$N){return n_$n._idResourcesMap[n_$N]},n_$n.getResourceByURL=function(n_$N,n_$C){return void 0===n_$C&&(n_$C=0),null==n_$n._urlResourcesMap[n_$N]?null:n_$n._urlResourcesMap[n_$N][n_$C]},n_$n.getResourceCountByURL=function(n_$N){return n_$n._urlResourcesMap[n_$N].length},n_$n.destroyUnusedResources=function(n_$N){var n_$C;if(n_$N){var n_$a=n_$n._groupResourcesMap[n_$N];if(n_$a)for(var n_$u=n_$a.slice(),n_$e=0,n_$J=n_$u.length;n_$e<n_$J;n_$e++)(n_$C=n_$u[n_$e]).lock||0!==n_$C._referenceCount||n_$C.destroy()}else for(var n_$M in n_$n._idResourcesMap)(n_$C=n_$n._idResourcesMap[n_$M]).lock||0!==n_$C._referenceCount||n_$C.destroy()},n_$n._uniqueIDCounter=0,n_$n._idResourcesMap={},n_$n._urlResourcesMap={},n_$n._groupResourcesMap={},n_$n}()),n_$PN=function(n_$N){function n_$D(n_$N,n_$C){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,n_$D.__super.call(this),n_$N&&null!=n_$N._addReference&&n_$N._addReference(),this.setTo(n_$N,n_$C)}n_$P(n_$D,"laya.resource.Texture",n_$A);var n_$C=n_$D.prototype;return n_$C._setUrl=function(n_$N){this.url=n_$N},n_$C.setTo=function(n_$N,n_$C){if(n_$N instanceof n_$M.HTMLElement){var n_$a=n_$WN.create("2D",n_$N);this.bitmap=n_$a}else this.bitmap=n_$N;if(this.uv=n_$C||n_$D.DEF_UV,n_$N){this._w=n_$N.width,this._h=n_$N.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var n_$u=this;if(this._loaded)n_$_.addToAtlas&&n_$_.addToAtlas(n_$u);else{var n_$e=n_$N;n_$e instanceof laya.resource.HTMLImage&&n_$e.image&&n_$e.image.addEventListener("load",function(n_$N){n_$_.addToAtlas&&n_$_.addToAtlas(n_$u)},!1)}}},n_$C.active=function(){this.bitmap&&this.bitmap.activeResource()},n_$C.destroy=function(n_$N){if(void 0===n_$N&&(n_$N=!1),this.alphaTexture&&(this.alphaTexture.destroy(n_$N),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var n_$C=this.bitmap;n_$N?(n_$i.isConchApp&&n_$C.source&&n_$C.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,n_$C.dispose(),n_$C._clearReference()):(n_$C._removeReference(),0==n_$C.referenceCount&&(n_$i.isConchApp&&n_$C.source&&n_$C.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,n_$C.dispose())),this.url&&this===n_$c.loader.getRes(this.url)&&n_$c.loader.clearRes(this.url,n_$N),this._loaded=!1}},n_$C.load=function(n_$N){var n_$C=this;this._loaded=!1,n_$N=n_$l.customFormat(n_$N);var n_$a=this.bitmap||(this.bitmap=n_$rN.create(n_$N));n_$a.uri=n_$N,n_$a&&n_$a._addReference();var n_$u=this;n_$a.onload=function(){n_$a.onload=null,n_$u._loaded=!0,n_$C.sourceWidth=n_$C._w=n_$a.width,n_$C.sourceHeight=n_$C._h=n_$a.height,n_$u.event("loaded",this),n_$_.addToAtlas&&n_$_.addToAtlas(n_$u)}},n_$C.addTextureToAtlas=function(n_$N){n_$_.addTextureToAtlas(this)},n_$C.getPixels=function(n_$N,n_$C,n_$a,n_$u){if(n_$i.isConchApp){var n_$e=this.bitmap;if(n_$e.source&&n_$e.source.getImageData){var n_$J=n_$e.source.getImageData(n_$N,n_$C,n_$a,n_$u),n_$M=new Uint8Array(n_$J);return Array.from(n_$M)}return null}return n_$i.isWebGL?n_$_.getTexturePixels(this,n_$N,n_$C,n_$a,n_$u):(n_$R.canvas.size(n_$a,n_$u),n_$R.canvas.clear(),n_$R.context.drawTexture(this,-n_$N,-n_$C,this.width,this.height,0,0),n_$R.context.getImageData(0,0,n_$a,n_$u).data)},n_$C.onAsynLoaded=function(n_$N,n_$C){if(n_$C){if("function"!=typeof n_$C._addReference)throw new Error("bitmap._addReference is not a function. "+n_$C.className+" "+typeof n_$C._addReference+" "+n_$C.constructor);n_$C._addReference()}this.setTo(n_$C,this.uv),this._loaded&&this.event("loaded",this)},n_$z(0,n_$C,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),n_$z(0,n_$C,"loaded",function(){return this._loaded}),n_$z(0,n_$C,"released",function(){return!this.bitmap||this.bitmap.released}),n_$z(0,n_$C,"width",function(){return this._w?this._w:this.uv&&this.uv!==n_$D.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(n_$N){this._w=n_$N,this.sourceWidth||(this.sourceWidth=n_$N)}),n_$z(0,n_$C,"repeat",function(){return!n_$i.isWebGL||!this.bitmap||this.bitmap.repeat},function(n_$N){n_$N&&n_$i.isWebGL&&this.bitmap&&(this.bitmap.repeat=n_$N)&&(this.bitmap.enableMerageInAtlas=!1)}),n_$z(0,n_$C,"height",function(){return this._h?this._h:this.uv&&this.uv!==n_$D.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(n_$N){this._h=n_$N,this.sourceHeight||(this.sourceHeight=n_$N)}),n_$z(0,n_$C,"isLinearSampling",function(){return!n_$i.isWebGL||9728!=this.bitmap.minFifter},function(n_$N){!n_$N&&n_$i.isWebGL&&(n_$N||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),n_$D.moveUV=function(n_$N,n_$C,n_$a){for(var n_$u=0;n_$u<8;n_$u+=2)n_$a[n_$u]+=n_$N,n_$a[n_$u+1]+=n_$C;return n_$a},n_$D.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){void 0===n_$J&&(n_$J=0),void 0===n_$M&&(n_$M=0),void 0===n_$n&&(n_$n=0),void 0===n_$V&&(n_$V=0);var n_$A=n_$N instanceof laya.resource.Texture,n_$P=n_$A?n_$N.uv:n_$D.DEF_UV,n_$$=n_$A?n_$N.bitmap:n_$N,n_$O=n_$_.isAtlas(n_$$);if(n_$O){var n_$G=n_$$._atlaser,n_$z=n_$N._atlasID;if(-1==n_$z)throw new Error("create texture error");n_$$=n_$G._inAtlasTextureBitmapValue[n_$z],n_$P=n_$G._inAtlasTextureOriUVValue[n_$z]}var n_$f=new n_$D(n_$$,null);n_$$.width&&n_$C+n_$u>n_$$.width&&(n_$u=n_$$.width-n_$C),n_$$.height&&n_$a+n_$e>n_$$.height&&(n_$e=n_$$.height-n_$a),n_$f.width=n_$u,n_$f.height=n_$e,n_$f.offsetX=n_$J,n_$f.offsetY=n_$M,n_$f.sourceWidth=n_$n||n_$u,n_$f.sourceHeight=n_$V||n_$e;var n_$t=1/n_$$.width,n_$g=1/n_$$.height;n_$C*=n_$t,n_$a*=n_$g,n_$u*=n_$t,n_$e*=n_$g;var n_$x=n_$f.uv[0],n_$W=n_$f.uv[1],n_$v=n_$f.uv[4],n_$X=n_$f.uv[5],n_$r=n_$v-n_$x,n_$c=n_$X-n_$W,n_$E=n_$D.moveUV(n_$P[0],n_$P[1],[n_$C,n_$a,n_$C+n_$u,n_$a,n_$C+n_$u,n_$a+n_$e,n_$C,n_$a+n_$e]);n_$f.uv=[n_$x+n_$E[0]*n_$r,n_$W+n_$E[1]*n_$c,n_$v-(1-n_$E[2])*n_$r,n_$W+n_$E[3]*n_$c,n_$v-(1-n_$E[4])*n_$r,n_$X-(1-n_$E[5])*n_$c,n_$x+n_$E[6]*n_$r,n_$X-(1-n_$E[7])*n_$c],n_$O&&n_$f.addTextureToAtlas();var n_$F=n_$$.scaleRate;return n_$F&&1!=n_$F?(n_$f.sourceWidth/=n_$F,n_$f.sourceHeight/=n_$F,n_$f.width/=n_$F,n_$f.height/=n_$F,n_$f.scaleRate=n_$F,n_$f.offsetX/=n_$F,n_$f.offsetY/=n_$F):n_$f.scaleRate=1,n_$f},n_$D.createFromTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$N.scaleRate;1!=n_$J&&(n_$C*=n_$J,n_$a*=n_$J,n_$u*=n_$J,n_$e*=n_$J);var n_$M=n_$F.TEMP.setTo(n_$C-n_$N.offsetX,n_$a-n_$N.offsetY,n_$u,n_$e),n_$n=n_$M.intersection(n_$D._rect1.setTo(0,0,n_$N.width,n_$N.height),n_$D._rect2);if(!n_$n)return null;var n_$V=n_$D.create(n_$N,n_$n.x,n_$n.y,n_$n.width,n_$n.height,n_$n.x-n_$M.x,n_$n.y-n_$M.y,n_$u,n_$e);if(n_$V.bitmap&&n_$V.bitmap._removeReference)return n_$V.bitmap._removeReference(),n_$V;var n_$A="bitmap:"+(n_$V.bitmap?n_$V.bitmap.constructor?n_$V.bitmap.constructor.name:n_$V.bitmap.__className:"")+", url:"+(n_$N.url+" | "+(n_$V.bitmap?n_$V.bitmap.url:n_$N.url))+", x="+n_$C+",y="+n_$a+",width="+n_$u+",height="+n_$e+", result="+(n_$n?n_$n.x+","+n_$n.y+","+n_$n.width+","+n_$n.height:"null")+", rect="+n_$M.x+","+n_$M.y+","+n_$M.width+","+n_$M.height;throw new Error("报错：bitmap._removeReference is not a function  "+n_$A)},n_$D.DEF_UV=[0,0,1,0,1,1,0,1],n_$D.INV_UV=[0,1,1,1,1,0,0,0],n_$D._rect1=new n_$F,n_$D._rect2=new n_$F,n_$D}(),n_$N=function(n_$N){var n_$n;function n_$J(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,n_$J.__super.call(this)}n_$P(n_$J,"laya.utils.TimeLine",n_$A);var n_$C=n_$J.prototype;return n_$C.to=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$e&&(n_$e=0),this._create(n_$N,n_$C,n_$a,n_$u,n_$e,!0)},n_$C.from=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$e&&(n_$e=0),this._create(n_$N,n_$C,n_$a,n_$u,n_$e,!1)},n_$C._create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$m.getItemByClass("tweenData",n_$n);return n_$M.isTo=n_$J,n_$M.type=0,n_$M.target=n_$N,n_$M.duration=n_$a,n_$M.data=n_$C,n_$M.startTime=this._startTime+n_$e,n_$M.endTime=n_$M.startTime+n_$M.duration,n_$M.ease=n_$u,this._startTime=Math.max(n_$M.endTime,this._startTime),this._tweenDataList.push(n_$M),this._startTimeSort=!0,this._endTimeSort=!0,this},n_$C.addLabel=function(n_$N,n_$C){var n_$a=n_$m.getItemByClass("tweenData",n_$n);return n_$a.type=1,n_$a.data=n_$N,n_$a.endTime=n_$a.startTime=this._startTime+n_$C,this._labelDic||(this._labelDic={}),this._labelDic[n_$N]=n_$a,this._tweenDataList.push(n_$a),this},n_$C.removeLabel=function(n_$N){if(this._labelDic&&this._labelDic[n_$N]){var n_$C=this._labelDic[n_$N];if(n_$C){var n_$a=this._tweenDataList.indexOf(n_$C);-1<n_$a&&this._tweenDataList.splice(n_$a,1)}delete this._labelDic[n_$N]}},n_$C.gotoTime=function(n_$N){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var n_$C,n_$a,n_$u,n_$e;for(var n_$J in this._firstTweenDic)if(n_$a=this._firstTweenDic[n_$J])for(var n_$M in n_$a)n_$a.diyTarget.hasOwnProperty(n_$M)&&(n_$a.diyTarget[n_$M]=n_$a[n_$M]);for(n_$J in this._tweenDic)(n_$C=this._tweenDic[n_$J]).clear(),delete this._tweenDic[n_$J];if(this._index=0,this._gidIndex=0,this._currTime=n_$N,this._lastTime=n_$R.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=n_$u=this._tweenDataList.concat(),n_$u.sort(function(n_$N,n_$C){return n_$N.endTime>n_$C.endTime?1:n_$N.endTime<n_$C.endTime?-1:0})}else n_$u=this._endTweenDataList;for(var n_$n=0,n_$V=n_$u.length;n_$n<n_$V;n_$n++)if(0==(n_$e=n_$u[n_$n]).type){if(!(n_$N>=n_$e.endTime))break;this._index=Math.max(this._index,n_$n+1);var n_$A=n_$e.data;if(n_$e.isTo)for(var n_$P in n_$A)n_$e.target[n_$P]=n_$A[n_$P]}for(n_$n=0,n_$V=this._tweenDataList.length;n_$n<n_$V;n_$n++)0==(n_$e=this._tweenDataList[n_$n]).type&&n_$N>=n_$e.startTime&&n_$N<n_$e.endTime&&(this._index=Math.max(this._index,n_$n+1),this._gidIndex++,(n_$C=n_$m.getItemByClass("tween",n_$H))._create(n_$e.target,n_$e.data,n_$e.duration,n_$e.ease,n_$x.create(this,this._animComplete,[this._gidIndex]),0,!1,n_$e.isTo,!0,!1),n_$C.setStartTime(this._currTime-(n_$N-n_$e.startTime)),n_$C._updateEase(this._currTime),n_$C.gid=this._gidIndex,this._tweenDic[this._gidIndex]=n_$C)}},n_$C.gotoLabel=function(n_$N){if(null!=this._labelDic){var n_$C=this._labelDic[n_$N];n_$C&&this.gotoTime(n_$C.startTime)}},n_$C.pause=function(){n_$c.timer.clear(this,this._update)},n_$C.resume=function(){this.play(this._currTime,this._loopKey)},n_$C.play=function(n_$N,n_$C){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(n_$N,n_$C){return n_$N.startTime>n_$C.startTime?1:n_$N.startTime<n_$C.startTime?-1:0});for(var n_$a=0,n_$u=this._tweenDataList.length;n_$a<n_$u;n_$a++){var n_$e=this._tweenDataList[n_$a];if(null!=n_$e&&0==n_$e.type){var n_$J=n_$e.target,n_$M=n_$J.$_GID||(n_$J.$_GID=n_$I.getGID()),n_$n=null;for(var n_$V in null==this._firstTweenDic[n_$M]?((n_$n={}).diyTarget=n_$J,this._firstTweenDic[n_$M]=n_$n):n_$n=this._firstTweenDic[n_$M],n_$e.data)null==n_$n[n_$V]&&(n_$n[n_$V]=n_$J[n_$V])}}}"string"==typeof n_$N?this.gotoLabel(n_$N):this.gotoTime(n_$N),this._loopKey=n_$C,this._lastTime=n_$R.now(),n_$c.timer.frameLoop(1,this,this._update)}},n_$C._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var n_$N in this._tweenDic)(n_$C=this._tweenDic[n_$N]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var n_$C,n_$a=n_$R.now(),n_$u=n_$a-this._lastTime,n_$e=this._currTime+=n_$u*this.scale;for(n_$N in this._lastTime=n_$a,this._tweenDic)(n_$C=this._tweenDic[n_$N])._updateEase(n_$e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var n_$J=this._tweenDataList[this._index];n_$e>=n_$J.startTime&&(this._index++,0==n_$J.type?(this._gidIndex++,(n_$C=n_$m.getItemByClass("tween",n_$H))._create(n_$J.target,n_$J.data,n_$J.duration,n_$J.ease,n_$x.create(this,this._animComplete,[this._gidIndex]),0,!1,n_$J.isTo,!0,!1),n_$C.setStartTime(n_$e),n_$C.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=n_$C)._updateEase(n_$e)):this.event("label",n_$J.data))}},n_$C._animComplete=function(n_$N){this._tweenDic[n_$N]&&delete this._tweenDic[n_$N]},n_$C._complete=function(){this.event("complete")},n_$C.reset=function(){var n_$N;if(this._labelDic)for(n_$N in this._labelDic)delete this._labelDic[n_$N];for(n_$N in this._tweenDic)this._tweenDic[n_$N].clear(),delete this._tweenDic[n_$N];for(n_$N in this._firstTweenDic)delete this._firstTweenDic[n_$N];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var n_$C,n_$a=0;for(n_$C=this._tweenDataList.length,n_$a=0;n_$a<n_$C;n_$a++)this._tweenDataList[n_$a]&&this._tweenDataList[n_$a].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,n_$c.timer.clear(this,this._update)},n_$C.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},n_$z(0,n_$C,"index",function(){return this._frameIndex},function(n_$N){this._frameIndex=n_$N,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),n_$z(0,n_$C,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),n_$J.to=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$e&&(n_$e=0),(new n_$J).to(n_$N,n_$C,n_$a,n_$u,n_$e)},n_$J.from=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$e&&(n_$e=0),(new n_$J).from(n_$N,n_$C,n_$a,n_$u,n_$e)},n_$J.__init$=function(){n_$n=function(){function n_$N(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return n_$P(n_$N,""),n_$N.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,n_$m.recover("tweenData",this)},n_$N}()},n_$J}(),n_$$N=function(n_$e){function n_$a(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,n_$a.__super.call(this),this._style=n_$n.EMPTY}n_$P(n_$a,"laya.display.Sprite",n_$e);var n_$N=n_$a.prototype;return n_$c.imps(n_$N,{"laya.display.ILayout":!0}),n_$N.createConchModel=function(){return new ConchNode},n_$N.destroy=function(n_$N){if(void 0===n_$N&&(n_$N=!0),this._releaseMem(),!this._destroyed){this.filters=null;var n_$C=this.mask;n_$C&&(this.mask=null,n_$C.destroy(n_$N))}n_$e.prototype.destroy.call(this,n_$N),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},n_$N.updateZOrder=function(){n_$I.updateOrder(this._childs)&&this.repaint()},n_$N.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},n_$N.setBounds=function(n_$N){this._set$P("uBounds",n_$N)},n_$N.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new n_$F),n_$F._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},n_$N.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new n_$F),n_$F._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},n_$N._boundPointsToParent=function(n_$N){void 0===n_$N&&(n_$N=!1);var n_$C=0,n_$a=0;this._style&&(n_$C=this._style._tf.translateX,n_$a=this._style._tf.translateY,n_$N=n_$N||0!==this._style._tf.rotate,this._style.scrollRect&&(n_$C+=this._style.scrollRect.x,n_$a+=this._style.scrollRect.y));var n_$u=this._getBoundPointsM(n_$N);if(!n_$u||n_$u.length<1)return n_$u;if(8!=n_$u.length&&(n_$u=n_$N?n_$X.scanPList(n_$u):n_$F._getWrapRec(n_$u,n_$F.TEMP)._getBoundPoints()),!this.transform)return n_$I.transPointList(n_$u,this._x-n_$C,this._y-n_$a),n_$u;var n_$e=n_$E.TEMP,n_$J=0,n_$M=n_$u.length;for(n_$J=0;n_$J<n_$M;n_$J+=2)n_$e.x=n_$u[n_$J],n_$e.y=n_$u[n_$J+1],this.toParentPoint(n_$e),n_$u[n_$J]=n_$e.x,n_$u[n_$J+1]=n_$e.y;return n_$u},n_$N.getGraphicBounds=function(n_$N){return void 0===n_$N&&(n_$N=!1),this._graphics?this._graphics.getBounds(n_$N):n_$F.TEMP.setTo(0,0,0,0)},n_$N._getBoundPointsM=function(n_$N){if(void 0===n_$N&&(n_$N=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var n_$C=n_$I.clearArray(this._$P.temBM),n_$a=n_$F.TEMP;return n_$a.copyFrom(this.scrollRect),n_$I.concatArray(n_$C,n_$a._getBoundPoints()),n_$C}for(var n_$u,n_$e,n_$J,n_$M=this._graphics?this._graphics.getBoundPoints():n_$I.clearArray(this._$P.temBM),n_$n=0,n_$V=(n_$J=this._childs).length;n_$n<n_$V;n_$n++)(n_$u=n_$J[n_$n])instanceof laya.display.Sprite&&1==n_$u.visible&&(n_$e=n_$u._boundPointsToParent(n_$N))&&(n_$M=n_$M?n_$I.concatArray(n_$M,n_$e):n_$e);return n_$M},n_$N.getStyle=function(){return this._style===n_$n.EMPTY&&(this._style=new n_$n),this._style},n_$N.setStyle=function(n_$N){this._style=n_$N},n_$N._adjustTransform=function(){this._tfChanged=!1;var n_$N,n_$C=this._style._tf,n_$a=n_$C.scaleX,n_$u=n_$C.scaleY;if(n_$C.rotate||1!==n_$a||1!==n_$u||n_$C.skewX||n_$C.skewY){(n_$N=this._transform||(this._transform=n_$d.create())).bTransform=!0;var n_$e=.0174532922222222*(n_$C.rotate-n_$C.skewX),n_$J=.0174532922222222*(n_$C.rotate+n_$C.skewY),n_$M=Math.cos(n_$J),n_$n=Math.sin(n_$J),n_$V=Math.sin(n_$e),n_$A=Math.cos(n_$e);return n_$N.a=n_$a*n_$M,n_$N.b=n_$a*n_$n,n_$N.c=-n_$u*n_$V,n_$N.d=n_$u*n_$A,n_$N.tx=n_$N.ty=0,n_$N}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,n_$N},n_$N.pos=function(n_$N,n_$C,n_$a){if(void 0===n_$a&&(n_$a=!1),this._x!==n_$N||this._y!==n_$C){if(this.destroyed)return this;if(n_$a){this._x=n_$N,this._y=n_$C,this.conchModel&&this.conchModel.pos(this._x,this._y);var n_$u=this._parent;n_$u&&0===n_$u._repaint&&(n_$u._repaint=1,n_$u.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=n_$N,this.y=n_$C}return this},n_$N.pivot=function(n_$N,n_$C){return this.pivotX=n_$N,this.pivotY=n_$C,this},n_$N.size=function(n_$N,n_$C){return this.width=n_$N,this.height=n_$C,this},n_$N.scale=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=!1);var n_$u=this.getStyle(),n_$e=n_$u._tf;if(n_$e.scaleX!=n_$N||n_$e.scaleY!=n_$C){if(this.destroyed)return this;if(n_$a){n_$u.setScale(n_$N,n_$C),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(n_$N,n_$C),this._renderType|=4;var n_$J=this._parent;n_$J&&0===n_$J._repaint&&(n_$J._repaint=1,n_$J.parentRepaint())}else this.scaleX=n_$N,this.scaleY=n_$C}return this},n_$N.skew=function(n_$N,n_$C){return this.skewX=n_$N,this.skewY=n_$C,this},n_$N.render=function(n_$N,n_$C,n_$a){n_$b.spriteCount++,n_$y.renders[this._renderType]._fun(this,n_$N,n_$C+this._x,n_$a+this._y),this._repaint=0},n_$N.drawToCanvas=function(n_$N,n_$C,n_$a,n_$u){if(n_$i.isConchNode){var n_$e=n_$WN.create("2D");return new n_$j(n_$N,n_$C,n_$e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(n_$e.source,n_$a,n_$u),n_$e}return n_$_.drawToCanvas(this,this._renderType,n_$N,n_$C,n_$a,n_$u)},n_$N.customRender=function(n_$N,n_$C,n_$a){this._renderType|=1024},n_$N._applyFilters=function(){var n_$N;if(!n_$i.isWebGL&&((n_$N=this._$P.filters)&&!(n_$N.length<1)))for(var n_$C=0,n_$a=n_$N.length;n_$C<n_$a;n_$C++)n_$N[n_$C].action.apply(this._$P.cacheCanvas)},n_$N._isHaveGlowFilter=function(){var n_$N,n_$C=0;if(this.filters)for(n_$C=0;n_$C<this.filters.length;n_$C++)if(8==this.filters[n_$C].type)return!0;for(n_$C=0,n_$N=this._childs.length;n_$C<n_$N;n_$C++)if(this._childs[n_$C]._isHaveGlowFilter())return!0;return!1},n_$N.localToGlobal=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!1),!0===n_$C&&(n_$N=new n_$E(n_$N.x,n_$N.y));for(var n_$a=this;n_$a&&n_$a!=n_$c.stage;)n_$N=n_$a.toParentPoint(n_$N),n_$a=n_$a.parent;return n_$N},n_$N.globalToLocal=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!1),n_$C&&(n_$N=new n_$E(n_$N.x,n_$N.y));for(var n_$a=this,n_$u=[];n_$a&&n_$a!=n_$c.stage;)n_$u.push(n_$a),n_$a=n_$a.parent;for(var n_$e=n_$u.length-1;0<=n_$e;)n_$N=(n_$a=n_$u[n_$e]).fromParentPoint(n_$N),n_$e--;return n_$N},n_$N.toParentPoint=function(n_$N){if(!n_$N)return n_$N;n_$N.x-=this.pivotX,n_$N.y-=this.pivotY,this.transform&&this._transform.transformPoint(n_$N),n_$N.x+=this._x,n_$N.y+=this._y;var n_$C=this._style.scrollRect;return n_$C&&(n_$N.x-=n_$C.x,n_$N.y-=n_$C.y),n_$N},n_$N.fromParentPoint=function(n_$N){if(!n_$N)return n_$N;n_$N.x-=this._x,n_$N.y-=this._y;var n_$C=this._style.scrollRect;return n_$C&&(n_$N.x+=n_$C.x,n_$N.y+=n_$C.y),this.transform&&this._transform.invertTransformPoint(n_$N),n_$N.x+=this.pivotX,n_$N.y+=this.pivotY,n_$N},n_$N.on=function(n_$N,n_$C,n_$a,n_$u){return 1!==this._mouseEnableState&&this.isMouseEvent(n_$N)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(n_$N,n_$C,n_$a,n_$u,!1)):n_$e.prototype.on.call(this,n_$N,n_$C,n_$a,n_$u)},n_$N.once=function(n_$N,n_$C,n_$a,n_$u){return 1!==this._mouseEnableState&&this.isMouseEvent(n_$N)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(n_$N,n_$C,n_$a,n_$u,!0)):n_$e.prototype.once.call(this,n_$N,n_$C,n_$a,n_$u)},n_$N._$2__onDisplay=function(){if(1!==this._mouseEnableState){var n_$N=this;for(n_$N=n_$N.parent;n_$N&&1!==n_$N._mouseEnableState&&!n_$N._getBit(2);)n_$N.mouseEnabled=!0,n_$N._setBit(2,!0),n_$N=n_$N.parent}},n_$N.loadImage=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=this;return void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),this.graphics.loadImage(n_$N,n_$C,n_$a,n_$u,n_$e,function(n_$N){n_$M.destroyed||(n_$M.size(n_$C+(n_$u||n_$N.width),n_$a+(n_$e||n_$N.height)),n_$M.repaint(),n_$J&&n_$J.runWith(n_$N))}),this},n_$N.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},n_$N._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},n_$N._childChanged=function(n_$N){this._childs.length?this._renderType|=2048:this._renderType&=-2049,n_$N&&this._get$P("hasZorder")&&n_$c.timer.callLater(this,this.updateZOrder),this.repaint()},n_$N.parentRepaint=function(){var n_$N=this._parent;n_$N&&0===n_$N._repaint&&(n_$N._repaint=1,n_$N.parentRepaint())},n_$N.startDrag=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){void 0===n_$C&&(n_$C=!1),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=300),void 0===n_$J&&(n_$J=!1),void 0===n_$M&&(n_$M=.92),this._$P.dragging||this._set$P("dragging",new n_$k),this._$P.dragging.start(this,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M)},n_$N.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},n_$N._releaseMem=function(){if(this._$P){var n_$N=this._$P.cacheCanvas;n_$N&&n_$N.ctx&&(n_$m.recover("RenderContext",n_$N.ctx),n_$N.ctx.canvas.size(0,0),n_$N.ctx=null);var n_$C=this._$P._filterCache;n_$C&&(n_$C.destroy(),n_$C.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},n_$N._setDisplay=function(n_$N){n_$N||this._releaseMem(),n_$e.prototype._setDisplay.call(this,n_$N)},n_$N.hitTestPoint=function(n_$N,n_$C){var n_$a=this.globalToLocal(n_$E.TEMP.setTo(n_$N,n_$C));return n_$N=n_$a.x,n_$C=n_$a.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?n_$F.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(n_$N,n_$C)},n_$N.getMousePoint=function(){return this.globalToLocal(n_$E.TEMP.setTo(n_$c.stage.mouseX,n_$c.stage.mouseY))},n_$N._getWords=function(){return null},n_$N._addChildsToLayout=function(n_$N){var n_$C=this._getWords();if(null==n_$C&&0==this._childs.length)return!1;if(n_$C)for(var n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++)n_$N.push(n_$C[n_$a]);n_$a=0;for(var n_$e=this._childs.length;n_$a<n_$e;++n_$a){var n_$J=this._childs[n_$a];n_$J._style._enableLayout()&&n_$J._addToLayout(n_$N)}return!0},n_$N._addToLayout=function(n_$N){this._style.absolute||(this._style.block?n_$N.push(this):this._addChildsToLayout(n_$N)&&(this.x=this.y=0))},n_$N._isChar=function(){return!1},n_$N._getCSSStyle=function(){return this._style.getCSSStyle()},n_$N._setAttributes=function(n_$N,n_$C){switch(n_$N){case"x":this.x=parseFloat(n_$C);break;case"y":this.y=parseFloat(n_$C);break;case"width":this.width=parseFloat(n_$C);break;case"height":this.height=parseFloat(n_$C);break;default:this[n_$N]=n_$C}},n_$N._layoutLater=function(){this.parent&&this.parent._layoutLater()},n_$z(0,n_$N,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(n_$N){this._optimizeScrollRect!=n_$N&&(this._optimizeScrollRect=n_$N,this.conchModel&&this.conchModel.optimizeScrollRect(n_$N))}),n_$z(0,n_$N,"customRenderEnable",null,function(n_$N){if(n_$N&&(this._renderType|=1024,n_$i.isConchNode)){n_$a.CustomList.push(this);var n_$C=new n_$WN("2d");n_$C._setContext(new CanvasRenderingContext2D),this.customContext=new n_$j(0,0,n_$C),n_$C.context.setCanvasType&&n_$C.context.setCanvasType(2),this.conchModel.custom(n_$C.context)}}),n_$z(0,n_$N,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(n_$N){this.cacheAs=n_$N?this._$P.hasFilter?"none":"normal":"none"}),n_$z(0,n_$N,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(n_$N){var n_$C=this._$P.cacheCanvas;if(n_$N!==(n_$C?n_$C.type:"none")){if("none"!==n_$N)this._getBit(1)||this._setUpNoticeType(1),n_$C||(n_$C=this._set$P("cacheCanvas",n_$m.getItemByClass("cacheCanvas",Object))),n_$C.type=n_$N,n_$C.reCache=!0,this._renderType|=16,"bitmap"==n_$N&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(n_$C){var n_$a=n_$C;n_$a&&n_$a.ctx&&(n_$m.recover("RenderContext",n_$a.ctx),n_$a.ctx.canvas.size(0,0),n_$a.ctx=null),n_$m.recover("cacheCanvas",n_$C)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),n_$z(0,n_$N,"zOrder",function(){return this._zOrder},function(n_$N){this._zOrder!=n_$N&&(this._zOrder=n_$N,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(n_$N),this._parent&&(n_$N&&this._parent._set$P("hasZorder",!0),n_$c.timer.callLater(this._parent,this.updateZOrder)))}),n_$z(0,n_$N,"rotation",function(){return this._style._tf.rotate},function(n_$N){var n_$C=this.getStyle();if(n_$C._tf.rotate!==n_$N){n_$C.setRotate(n_$N),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(n_$N),this._renderType|=4;var n_$a=this._parent;n_$a&&0===n_$a._repaint&&(n_$a._repaint=1,n_$a.parentRepaint())}}),n_$z(0,n_$N,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(n_$N){this._width!==n_$N&&(this._width=n_$N,this.conchModel&&this.conchModel.size(n_$N,this._height),this.repaint())}),n_$z(0,n_$N,"x",function(){return this._x},function(n_$N){if(this._x!==n_$N){if(this.destroyed)return;this._x=n_$N,this.conchModel&&this.conchModel.pos(n_$N,this._y);var n_$C=this._parent;n_$C&&0===n_$C._repaint&&(n_$C._repaint=1,n_$C.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),n_$z(0,n_$N,"globalScaleY",function(){for(var n_$N=1,n_$C=this;n_$C&&n_$C!==n_$c.stage;)n_$N*=n_$C.scaleY,n_$C=n_$C.parent;return n_$N}),n_$z(0,n_$N,"hitArea",function(){return this._$P.hitArea},function(n_$N){this._set$P("hitArea",n_$N)}),n_$z(0,n_$N,"staticCache",function(){return this._$P.staticCache},function(n_$N){this._set$P("staticCache",n_$N),n_$N||this.reCache()}),n_$z(0,n_$N,"texture",function(){return this._texture},function(n_$N){this._texture!=n_$N&&(this._texture=n_$N,this.graphics.cleanByTexture(n_$N,0,0))}),n_$z(0,n_$N,"y",function(){return this._y},function(n_$N){if(this._y!==n_$N){if(this.destroyed)return;this._y=n_$N,this.conchModel&&this.conchModel.pos(this._x,n_$N);var n_$C=this._parent;n_$C&&0===n_$C._repaint&&(n_$C._repaint=1,n_$C.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),n_$z(0,n_$N,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(n_$N){this._height!==n_$N&&(this._height=n_$N,this.conchModel&&this.conchModel.size(this._width,n_$N),this.repaint())}),n_$z(0,n_$N,"blendMode",function(){return this._style.blendMode},function(n_$N){this.getStyle().blendMode=n_$N,this.conchModel&&this.conchModel.blendMode(n_$N),n_$N&&"source-over"!=n_$N?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),n_$z(0,n_$N,"scaleX",function(){return this._style._tf.scaleX},function(n_$N){var n_$C=this.getStyle();if(n_$C._tf.scaleX!==n_$N){n_$C.setScaleX(n_$N),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(n_$N,n_$C._tf.scaleY),this._renderType|=4;var n_$a=this._parent;n_$a&&0===n_$a._repaint&&(n_$a._repaint=1,n_$a.parentRepaint())}}),n_$z(0,n_$N,"scaleY",function(){return this._style._tf.scaleY},function(n_$N){var n_$C=this.getStyle();if(n_$C._tf.scaleY!==n_$N){n_$C.setScaleY(n_$N),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(n_$C._tf.scaleX,n_$N),this._renderType|=4;var n_$a=this._parent;n_$a&&0===n_$a._repaint&&(n_$a._repaint=1,n_$a.parentRepaint())}}),n_$z(0,n_$N,"stage",function(){return n_$c.stage}),n_$z(0,n_$N,"skewX",function(){return this._style._tf.skewX},function(n_$N){var n_$C=this.getStyle();if(n_$C._tf.skewX!==n_$N){n_$C.setSkewX(n_$N),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(n_$N,n_$C._tf.skewY),this._renderType|=4;var n_$a=this._parent;n_$a&&0===n_$a._repaint&&(n_$a._repaint=1,n_$a.parentRepaint())}}),n_$z(0,n_$N,"scrollRect",function(){return this._style.scrollRect},function(n_$N){this.getStyle().scrollRect=n_$N,this.repaint(),n_$N?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(n_$N.x,n_$N.y,n_$N.width,n_$N.height)):(this._renderType&=-129,this.conchModel&&(n_$a.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),n_$z(0,n_$N,"skewY",function(){return this._style._tf.skewY},function(n_$N){var n_$C=this.getStyle();if(n_$C._tf.skewY!==n_$N){n_$C.setSkewY(n_$N),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(n_$C._tf.skewX,n_$N),this._renderType|=4;var n_$a=this._parent;n_$a&&0===n_$a._repaint&&(n_$a._repaint=1,n_$a.parentRepaint())}}),n_$z(0,n_$N,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(n_$N){this._tfChanged=!1,(this._transform=n_$N)&&(this._x=n_$N.tx,this._y=n_$N.ty,n_$N.tx=n_$N.ty=0,this.conchModel&&this.conchModel.transform(n_$N.a,n_$N.b,n_$N.c,n_$N.d,this._x,this._y)),n_$N?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),n_$z(0,n_$N,"pivotX",function(){return this._style._tf.translateX},function(n_$N){this.getStyle().setTranslateX(n_$N),this.conchModel&&this.conchModel.pivot(n_$N,this._style._tf.translateY),this.repaint()}),n_$z(0,n_$N,"pivotY",function(){return this._style._tf.translateY},function(n_$N){this.getStyle().setTranslateY(n_$N),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,n_$N),this.repaint()}),n_$z(0,n_$N,"alpha",function(){return this._style.alpha},function(n_$N){this._style&&this._style.alpha!==n_$N&&(n_$N=n_$N<0?0:1<n_$N?1:n_$N,this.getStyle().alpha=n_$N,this.conchModel&&this.conchModel.alpha(n_$N),1!==n_$N?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),n_$z(0,n_$N,"visible",function(){return this._style.visible},function(n_$N){this._style&&this._style.visible!==n_$N&&(this.getStyle().visible=n_$N,this.conchModel&&this.conchModel.visible(n_$N),this.parentRepaint())}),n_$z(0,n_$N,"graphics",function(){return this._graphics||(this.graphics=n_$_.createGraphics())},function(n_$N){this._graphics&&(this._graphics._sp=null),(this._graphics=n_$N)?(this._renderType&=-2,this._renderType|=512,(n_$N._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(n_$a.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),n_$z(0,n_$N,"filters",function(){return this._$P.filters},function(n_$N){n_$N&&0===n_$N.length&&(n_$N=null),this._$P.filters!=n_$N&&(this._set$P("filters",n_$N?n_$N.slice():null),n_$i.isConchApp&&(this.conchModel&&(n_$a.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),n_$i.isWebGL&&(n_$N&&n_$N.length?this._renderType|=32:this._renderType&=-33),n_$N&&0<n_$N.length?(this._getBit(1)||this._setUpNoticeType(1),n_$i.isWebGL&&1==n_$N.length&&n_$N[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(n_$i.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),n_$z(0,n_$N,"parent",n_$e.prototype._$get_parent,function(n_$N){n_$c.superSet(n_$NN,this,"parent",n_$N),n_$N&&this._getBit(2)&&this._$2__onDisplay()}),n_$z(0,n_$N,"mask",function(){return this._$P._mask},function(n_$N){n_$N&&this.mask&&this.mask._$P.maskParent||(n_$N?(this.cacheAs="bitmap",this._set$P("_mask",n_$N),n_$N._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",n_$N),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(n_$N?n_$N.conchModel:null),this._renderType|=64,this.parentRepaint())}),n_$z(0,n_$N,"mouseEnabled",function(){return 1<this._mouseEnableState},function(n_$N){this._mouseEnableState=n_$N?2:1}),n_$z(0,n_$N,"globalScaleX",function(){for(var n_$N=1,n_$C=this;n_$C&&n_$C!==n_$c.stage;)n_$N*=n_$C.scaleX,n_$C=n_$C.parent;return n_$N}),n_$z(0,n_$N,"mouseX",function(){return this.getMousePoint().x}),n_$z(0,n_$N,"mouseY",function(){return this.getMousePoint().y}),n_$a.fromImage=function(n_$N){return(new n_$a).loadImage(n_$N)},n_$a._cachePool=[],n_$a.CustomList=[],n_$V(n_$a,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=n_$M.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),n_$a}(n_$NN),n_$ON=function(n_$N){function n_$C(n_$N){this._audio=null,this._onEnd=null,this._resumePlay=null,n_$C.__super.call(this),this._onEnd=n_$I.bind(this.__onEnd,this),this._resumePlay=n_$I.bind(this.__resumePlay,this),n_$N.addEventListener("ended",this._onEnd),this._audio=n_$N}n_$P(n_$C,"laya.media.h5audio.AudioSoundChannel",n_$uN);var n_$a=n_$C.prototype;return n_$a.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(n_$c.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},n_$a.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,n_$R.container.appendChild(this._audio),this._audio.play()}catch(n_$N){this.event("error")}},n_$a.play=function(n_$N){this.isStopped=!1;try{this._audio.playbackRate=n_$q.playbackRate,this._audio.currentTime=this.startTime}catch(n_$N){return void this._audio.addEventListener("canplay",this._resumePlay)}n_$q.addChannel(this),n_$R.container.appendChild(this._audio),!n_$N&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},n_$a.stop=function(){this.isStopped=!0,n_$q.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&n_$i.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),n_$R.onIE||this._audio!=n_$aN._musicAudio&&n_$m.recover("audio:"+this.url,this._audio),n_$R.removeElement(this._audio),this._audio=null)},n_$a.pause=function(){this.isStopped=!0,n_$q.removeChannel(this),"pause"in this._audio&&this._audio.pause()},n_$a.resume=function(){this._audio&&(this.isStopped=!1,n_$q.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},n_$z(0,n_$a,"position",function(){return this._audio?this._audio.currentTime:0}),n_$z(0,n_$a,"duration",function(){return this._audio?this._audio.duration:0}),n_$z(0,n_$a,"volume",function(){return this._audio?this._audio.volume:1},function(n_$N){this._audio&&(this._audio.volume=n_$N)}),n_$C}(),n_$GN=function(n_$N){function n_$C(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=n_$JN.ctx,n_$C.__super.call(this),this._onPlayEnd=n_$I.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}n_$P(n_$C,"laya.media.webaudio.WebAudioSoundChannel",n_$uN);var n_$a=n_$C.prototype;return n_$a.play=function(n_$N){if(n_$q.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var n_$C=this.context,n_$a=this.gain,n_$u=n_$C.createBufferSource();(this.bufferSource=n_$u).buffer=this.audioBuffer,n_$u.connect(n_$a),n_$a&&n_$a.disconnect(),n_$a.connect(n_$C.destination),n_$u.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=n_$R.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(n_$u.loop=!0),n_$u.playbackRate.setTargetAtTime?n_$u.playbackRate.setTargetAtTime(n_$q.playbackRate,this.context.currentTime,.1):n_$u.playbackRate.value=n_$q.playbackRate,n_$u.start(0,this.startTime),!n_$N&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},n_$a.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(n_$c.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},n_$a._clearBufferSource=function(){if(this.bufferSource){var n_$N=this.bufferSource;n_$N.stop?n_$N.stop(0):n_$N.noteOff(0),n_$N.disconnect(0),n_$N.onended=null,n_$C._tryCleanFailed||this._tryClearBuffer(n_$N),this.bufferSource=null}},n_$a._tryClearBuffer=function(n_$N){try{n_$N.buffer=null}catch(n_$N){n_$C._tryCleanFailed=!0}},n_$a.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,n_$q.removeChannel(this),this.startHandler=null,this.completeHandler=null},n_$a.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,n_$q.removeChannel(this)},n_$a.resume=function(){this.startTime=this._pauseTime,this.play(!1)},n_$z(0,n_$a,"position",function(){return this.bufferSource?(n_$R.now()-this._startTime)/1e3+this.startTime:0}),n_$z(0,n_$a,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),n_$z(0,n_$a,"volume",function(){return this._volume},function(n_$N){this.isStopped||(this._volume=n_$N,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(n_$N,this.context.currentTime,.1):this.gain.gain.value=n_$N)}),n_$C._tryCleanFailed=!1,n_$C}(),n_$zN=function(n_$N){function n_$C(){n_$C.__super.call(this),this._w=0,this._h=0}n_$P(n_$C,"laya.resource.Bitmap",n_$AN);var n_$a=n_$C.prototype;return n_$z(0,n_$a,"width",function(){return this._w}),n_$z(0,n_$a,"height",function(){return this._h}),n_$z(0,n_$a,"source",function(){return this._source}),n_$C}(),n_$fN=function(n_$C){function n_$N(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,n_$N.__super.call(this),this._interval=n_$u.animationInterval,this._setUpNoticeType(1)}n_$P(n_$N,"laya.display.AnimationPlayerBase",n_$C);var n_$a=n_$N.prototype;return n_$a.play=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=!0),void 0===n_$a&&(n_$a=""),void 0===n_$u&&(n_$u=!0),this._isPlaying=!0,this.index="string"==typeof n_$N?this._getFrameByLabel(n_$N):n_$N,this.loop=n_$C,this._actionName=n_$a,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},n_$a._getFrameByLabel=function(n_$N){var n_$C=0;for(n_$C=0;n_$C<this._count;n_$C++)if(this._labels[n_$C]&&0<=this._labels[n_$C].indexOf(n_$N))return n_$C;return 0},n_$a._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},n_$a._setControlNode=function(n_$N){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=n_$N)&&n_$N!=this&&(n_$N.on("display",this,this._checkResumePlaying),n_$N.on("undisplay",this,this._checkResumePlaying))},n_$a._setDisplay=function(n_$N){n_$C.prototype._setDisplay.call(this,n_$N),this._checkResumePlaying()},n_$a._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},n_$a.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},n_$a.addLabel=function(n_$N,n_$C){this._labels||(this._labels={}),this._labels[n_$C]||(this._labels[n_$C]=[]),this._labels[n_$C].push(n_$N)},n_$a.removeLabel=function(n_$N){if(n_$N){if(this._labels)for(var n_$C in this._labels)this._removeLabelFromLabelList(this._labels[n_$C],n_$N)}else this._labels=null},n_$a._removeLabelFromLabelList=function(n_$N,n_$C){if(n_$N)for(var n_$a=n_$N.length-1;0<=n_$a;n_$a--)n_$N[n_$a]==n_$C&&n_$N.splice(n_$a,1)},n_$a.gotoAndStop=function(n_$N){this.index="string"==typeof n_$N?this._getFrameByLabel(n_$N):n_$N,this.stop()},n_$a._displayToIndex=function(n_$N){},n_$a.clear=function(){this.stop(),this._labels=null},n_$z(0,n_$a,"interval",function(){return this._interval},function(n_$N){this._interval!=n_$N&&(this._frameRateChanged=!0,this._interval=n_$N,this._isPlaying&&0<n_$N&&this.timerLoop(n_$N,this,this._frameLoop,null,!0,!0))}),n_$z(0,n_$a,"isPlaying",function(){return this._isPlaying}),n_$z(0,n_$a,"index",function(){return this._index},function(n_$N){if(this._index=n_$N,this._displayToIndex(n_$N),this._labels&&this._labels[n_$N])for(var n_$C=this._labels[n_$N],n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++)this.event("label",n_$C[n_$a])}),n_$z(0,n_$a,"count",function(){return this._count}),n_$N.WRAP_POSITIVE=0,n_$N.WRAP_REVERSE=1,n_$N.WRAP_PINGPONG=2,n_$N}(n_$$N),n_$tN=function(n_$C){function n_$G(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,n_$G.__super.call(this),this.overflow=n_$G.VISIBLE,this._style=new n_$CN(this),this._style.wordWrap=!1}n_$P(n_$G,"laya.display.Text",n_$C);var n_$N=n_$G.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._lines=null,this._words&&(this._words.length=0,this._words=null)},n_$N._getBoundPointsM=function(n_$N){void 0===n_$N&&(n_$N=!1);var n_$C=n_$F.TEMP;return n_$C.setTo(0,0,this.width,this.height),n_$C._getBoundPoints()},n_$N.getGraphicBounds=function(n_$N){void 0===n_$N&&(n_$N=!1);var n_$C=n_$F.TEMP;return n_$C.setTo(0,0,this.width,this.height),n_$C},n_$N._getCSSStyle=function(){return this._style},n_$N.lang=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P){if(n_$N=n_$G.langPacks&&n_$G.langPacks[n_$N]?n_$G.langPacks[n_$N]:n_$N,arguments.length<2)this._text=n_$N;else{for(var n_$$=0,n_$O=arguments.length;n_$$<n_$O;n_$$++)n_$N=n_$N.replace("{"+n_$$+"}",arguments[n_$$+1]);this._text=n_$N}},n_$N._isPassWordMode=function(){var n_$N=this._style.password;return"prompt"in this&&this.prompt==this._text&&(n_$N=!1),n_$N},n_$N._getPassWordTxt=function(n_$N){var n_$C;n_$C="";for(var n_$a=n_$N.length;0<n_$a;n_$a--)n_$C+="●";return n_$C},n_$N.renderText=function(n_$N,n_$C){var n_$a=this.graphics;n_$a.clear(!0);var n_$u=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(n_$R.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);n_$R.context.font=n_$u;var n_$e=this.padding,n_$J=n_$e[3],n_$M="left",n_$n=this._lines,n_$V=this.leading+this._charSize.height,n_$A=this._currBitmapFont;n_$A&&(n_$V=this.leading+n_$A.getMaxHeight());var n_$P=n_$e[0];if(!n_$A&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(n_$M="right",n_$J=this._width-n_$e[1]):"center"==this.align&&(n_$M="center",n_$J=.5*this._width+n_$e[3]-n_$e[1])),0<this._height){var n_$$=this._textHeight>this._height?"top":this.valign;"middle"===n_$$?n_$P=.5*(this._height-n_$C*n_$V)+n_$e[0]-n_$e[2]:"bottom"===n_$$&&(n_$P=this._height-n_$C*n_$V-n_$e[2])}var n_$O=this._style;if(n_$A&&n_$A.autoScaleSize)var n_$G=n_$A.fontSize/this.fontSize;if(this._clipPoint)if(n_$a.save(),n_$A&&n_$A.autoScaleSize){var n_$z=0,n_$f=0;n_$z=this._width?this._width-n_$e[3]-n_$e[1]:this._textWidth,n_$f=this._height?this._height-n_$e[0]-n_$e[2]:this._textHeight,n_$z*=n_$G,n_$f*=n_$G,n_$a.clipRect(n_$e[3],n_$e[0],n_$z,n_$f)}else n_$a.clipRect(n_$e[3],n_$e[0],this._width?this._width-n_$e[3]-n_$e[1]:this._textWidth,this._height?this._height-n_$e[0]-n_$e[2]:this._textHeight);var n_$t=n_$O.password;"prompt"in this&&this.prompt==this._text&&(n_$t=!1);for(var n_$g=0,n_$x=0,n_$W=Math.min(this._lines.length,n_$C+n_$N)||1,n_$v=n_$N;n_$v<n_$W;n_$v++){var n_$X,n_$r=n_$n[n_$v];if(n_$t){var n_$c=n_$r.length;n_$r="";for(var n_$E=n_$c;0<n_$E;n_$E--)n_$r+="●"}if(n_$g=n_$J-(this._clipPoint?this._clipPoint.x:0),n_$x=n_$P+n_$V*n_$v-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(n_$M,n_$g,n_$x,n_$v),n_$A){var n_$F=this.width;n_$A.autoScaleSize&&(n_$F=this.width*n_$G),n_$A.drawText(n_$r,this,n_$g,n_$x,this.align,n_$F)}else n_$i.isWebGL?(this._words||(this._words=[]),(n_$X=this._words.length>n_$v-n_$N?this._words[n_$v-n_$N]:new n_$U).setText(n_$r)):n_$X=n_$r,n_$O.stroke?n_$a.fillBorderText(n_$X,n_$g,n_$x,n_$u,this.color,n_$O.strokeColor,n_$O.stroke,n_$M):n_$a.fillText(n_$X,n_$g,n_$x,n_$u,this.color,n_$M)}if(n_$A&&n_$A.autoScaleSize){var n_$D=1/n_$G;this.scale(n_$D,n_$D)}this._clipPoint&&n_$a.restore(),this._startX=n_$J,this._startY=n_$P},n_$N.drawUnderline=function(n_$N,n_$C,n_$a,n_$u){var n_$e=this._lineWidths[n_$u];switch(n_$N){case"center":n_$C-=n_$e/2;break;case"right":n_$C-=n_$e}n_$a+=this._charSize.height,this._graphics.drawLine(n_$C,n_$a,n_$C+n_$e,n_$a,this.underlineColor||this.color,1)},n_$N.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);n_$R.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new n_$E(0,0)):this._clipPoint=null;var n_$N=this._lines.length;if(this.overflow!=n_$G.VISIBLE){var n_$C=this.overflow==n_$G.HIDDEN?Math.floor:Math.ceil;n_$N=Math.min(n_$N,n_$C((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var n_$a=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(n_$a,n_$N),this.repaint()},n_$N.evalTextSize=function(){var n_$N,n_$C=NaN;n_$N=Math.max.apply(this,this._lineWidths),n_$C=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],n_$N==this._textWidth&&n_$C==this._textHeight||(this._textWidth=n_$N,this._textHeight=n_$C,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},n_$N.checkEnabledViewportOrNot=function(){return this.overflow==n_$G.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},n_$N.changeText=function(n_$N){this._text!==n_$N&&(this.lang(n_$N+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},n_$N.parseLines=function(n_$N){var n_$C=this.wordWrap||this.overflow==n_$G.HIDDEN;if(n_$C)var n_$a=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var n_$u=n_$I.contextMeasureText(n_$G._testWord);n_$i.isConchApp&&0===n_$u.width&&0===n_$u.height&&(n_$u=n_$I.contextMeasureText("W")),this._charSize.width=n_$u.width,this._charSize.height=n_$u.height||this.fontSize}for(var n_$e=n_$N.replace(/\r\n/g,"\n").split("\n"),n_$J=0,n_$M=n_$e.length;n_$J<n_$M;n_$J++){var n_$n=n_$e[n_$J];n_$C?this.parseLine(n_$n,n_$a):(this._lineWidths.push(this.getTextWidth(n_$n)),this._lines.push(n_$n))}},n_$N.parseLine=function(n_$N,n_$C){n_$R.context;var n_$a,n_$u=this._lines,n_$e=0,n_$J=NaN,n_$M=NaN,n_$n=0;if((n_$J=this.getTextWidth(n_$N))<=n_$C)return n_$u.push(n_$N),void this._lineWidths.push(n_$J);n_$J=this._charSize.width,0==(n_$e=Math.floor(n_$C/n_$J))&&(n_$e=1),n_$M=n_$J=this.getTextWidth(n_$N.substring(0,n_$e));for(var n_$V=n_$e,n_$A=n_$N.length;n_$V<n_$A;n_$V++)if(n_$C<(n_$M+=n_$J=this.getTextWidth(n_$N.charAt(n_$V))))if(this.wordWrap){var n_$P=n_$N.substring(n_$n,n_$V);if(n_$P.charCodeAt(n_$P.length-1)<255?(n_$a=/(?:\w|-)+$/.exec(n_$P))&&(n_$V=n_$a.index+n_$n,0==n_$a.index?n_$V+=n_$P.length:n_$P=n_$N.substring(n_$n,n_$V)):n_$G.RightToLeft&&(n_$a=/([\u0600-\u06FF])+$/.exec(n_$P))&&(n_$V=n_$a.index+n_$n,0==n_$a.index?n_$V+=n_$P.length:n_$P=n_$N.substring(n_$n,n_$V)),n_$u.push(n_$P),this._lineWidths.push(n_$M-n_$J),!((n_$n=n_$V)+n_$e<n_$A)){n_$u.push(n_$N.substring(n_$n,n_$A)),this._lineWidths.push(this.getTextWidth(n_$u[n_$u.length-1])),n_$n=-1;break}n_$V+=n_$e,n_$M=n_$J=this.getTextWidth(n_$N.substring(n_$n,n_$V)),n_$V--}else if(this.overflow==n_$G.HIDDEN)return n_$u.push(n_$N.substring(0,n_$V)),void this._lineWidths.push(this.getTextWidth(n_$u[n_$u.length-1]));this.wordWrap&&-1!=n_$n&&(n_$u.push(n_$N.substring(n_$n,n_$A)),this._lineWidths.push(this.getTextWidth(n_$u[n_$u.length-1])))},n_$N.getTextWidth=function(n_$N){return this._currBitmapFont?this._currBitmapFont.getTextWidth(n_$N):n_$I.contextMeasureText(n_$N).width},n_$N.getWordWrapWidth=function(){var n_$N=this.padding,n_$C=NaN;return(n_$C=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(n_$C=this.wordWrap?100:n_$R.width),n_$C<=0&&(n_$C=100),n_$C-n_$N[3]-n_$N[1]},n_$N.getCharPoint=function(n_$N,n_$C){this._isChanged&&n_$c.timer.runCallLater(this,this.typeset);for(var n_$a=0,n_$u=this._lines,n_$e=0,n_$J=0,n_$M=n_$u.length;n_$J<n_$M;n_$J++){if(n_$N<(n_$a+=n_$u[n_$J].length)){var n_$n=n_$J;break}n_$e=n_$a}var n_$V=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;n_$R.context.font=n_$V;var n_$A=this.getTextWidth(this._text.substring(n_$e,n_$N));return(n_$C||new n_$E).setTo(this._startX+n_$A-(this._clipPoint?this._clipPoint.x:0),this._startY+n_$n*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},n_$z(0,n_$N,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(n_$N){n_$N!=this._width&&(n_$c.superSet(n_$$N,this,"width",n_$N),this.isChanged=!0)}),n_$z(0,n_$N,"textWidth",function(){return this._isChanged&&n_$c.timer.runCallLater(this,this.typeset),this._textWidth}),n_$z(0,n_$N,"height",function(){return this._height?this._height:this.textHeight},function(n_$N){n_$N!=this._height&&(n_$c.superSet(n_$$N,this,"height",n_$N),this.isChanged=!0)}),n_$z(0,n_$N,"textHeight",function(){return this._isChanged&&n_$c.timer.runCallLater(this,this.typeset),this._textHeight}),n_$z(0,n_$N,"padding",function(){return this._getCSSStyle().padding},function(n_$N){this._getCSSStyle().padding=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"bold",function(){return this._getCSSStyle().bold},function(n_$N){this._getCSSStyle().bold=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"text",function(){return this._text||""},function(n_$N){this._text!==n_$N&&(this.lang(n_$N+""),this.isChanged=!0,this.event("change"))}),n_$z(0,n_$N,"color",function(){return this._getCSSStyle().color},function(n_$N){this._getCSSStyle().color!=n_$N&&(this._getCSSStyle().color=n_$N,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),n_$z(0,n_$N,"font",function(){return this._getCSSStyle().fontFamily},function(n_$N){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),n_$G._bitmapFonts&&n_$G._bitmapFonts[n_$N]&&(this._currBitmapFont=n_$G._bitmapFonts[n_$N]),this._getCSSStyle().fontFamily=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"fontSize",function(){return this._getCSSStyle().fontSize},function(n_$N){this._getCSSStyle().fontSize=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"italic",function(){return this._getCSSStyle().italic},function(n_$N){this._getCSSStyle().italic=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"align",function(){return this._getCSSStyle().align},function(n_$N){this._getCSSStyle().align=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"valign",function(){return this._getCSSStyle().valign},function(n_$N){this._getCSSStyle().valign=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(n_$N){this._getCSSStyle().wordWrap=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"leading",function(){return this._getCSSStyle().leading},function(n_$N){this._getCSSStyle().leading=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(n_$N){this._getCSSStyle().backgroundColor=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"borderColor",function(){return this._getCSSStyle().borderColor},function(n_$N){this._getCSSStyle().borderColor=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"stroke",function(){return this._getCSSStyle().stroke},function(n_$N){this._getCSSStyle().stroke=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(n_$N){this._getCSSStyle().strokeColor=n_$N,this.isChanged=!0}),n_$z(0,n_$N,"isChanged",null,function(n_$N){this._isChanged!==n_$N&&(this._isChanged=n_$N)&&n_$c.timer.callLater(this,this.typeset)}),n_$z(0,n_$N,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(n_$N){if(!(this.overflow!=n_$G.SCROLL||this.textWidth<this._width)&&this._clipPoint){n_$N=n_$N<this.padding[3]?this.padding[3]:n_$N;var n_$C=this._textWidth-this._width;n_$N=n_$C<n_$N?n_$C:n_$N;var n_$a=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=n_$N,this.renderText(this._lastVisibleLineIndex,n_$a)}}),n_$z(0,n_$N,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(n_$N){if(!(this.overflow!=n_$G.SCROLL||this.textHeight<this._height)&&this._clipPoint){n_$N=n_$N<this.padding[0]?this.padding[0]:n_$N;var n_$C=this._textHeight-this._height,n_$a=(n_$N=n_$C<n_$N?n_$C:n_$N)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=n_$a;var n_$u=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=n_$N,this.renderText(n_$a,n_$u)}}),n_$z(0,n_$N,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),n_$z(0,n_$N,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),n_$z(0,n_$N,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),n_$z(0,n_$N,"underlineColor",function(){return this._underlineColor},function(n_$N){this._underlineColor=n_$N,this._isChanged=!0,this.typeset()}),n_$G.registerBitmapFont=function(n_$N,n_$C){n_$G._bitmapFonts||(n_$G._bitmapFonts={}),n_$G._bitmapFonts[n_$N]=n_$C},n_$G.unregisterBitmapFont=function(n_$N,n_$C){if(void 0===n_$C&&(n_$C=!0),n_$G._bitmapFonts&&n_$G._bitmapFonts[n_$N]){var n_$a=n_$G._bitmapFonts[n_$N];n_$C&&n_$a.destroy(),delete n_$G._bitmapFonts[n_$N]}},n_$G.setTextRightToLeft=function(){var n_$N;(n_$N=n_$R.canvas.source.style).display="none",n_$N.position="absolute",n_$N.direction="rtl",n_$i._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,n_$R.document.body.appendChild(n_$R.canvas.source)},n_$G.supportFont=function(n_$N){n_$R.context.font="10px sans-serif";var n_$C=n_$I.contextMeasureText("abcji").width;n_$R.context.font="10px "+n_$N;var n_$a=n_$I.contextMeasureText("abcji").width;return console.log(n_$C,n_$a),n_$C!==n_$a},n_$G._testWord="游",n_$G.langPacks=null,n_$G.VISIBLE="visible",n_$G.SCROLL="scroll",n_$G.HIDDEN="hidden",n_$G.CharacterCache=!0,n_$G.RightToLeft=!1,n_$G._bitmapFonts=null,n_$V(n_$G,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),n_$G}(n_$$N),n_$gN=function(n_$$){function n_$M(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",n_$M.__super.call(this),this.offset=new n_$E,this._canvasTransform=new n_$d,this._previousOrientation=n_$R.window.orientation;var n_$C=this;this.transform=n_$d.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var n_$N=n_$R.window,n_$a=this;n_$N.addEventListener("focus",function(){n_$C._isFocused=!0,n_$a.event("focus"),n_$a.event("focuschange")}),n_$N.addEventListener("blur",function(){n_$C._isFocused=!1,n_$a.event("blur"),n_$a.event("focuschange"),n_$a._isInputting()&&(n_$XN.inputElement.target.focus=!1)});var n_$u="visibilityState",n_$e="visibilitychange",n_$J=n_$N.document;void 0!==n_$J.hidden?(n_$e="visibilitychange",n_$u="visibilityState"):void 0!==n_$J.mozHidden?(n_$e="mozvisibilitychange",n_$u="mozVisibilityState"):void 0!==n_$J.msHidden?(n_$e="msvisibilitychange",n_$u="msVisibilityState"):void 0!==n_$J.webkitHidden&&(n_$e="webkitvisibilitychange",n_$u="webkitVisibilityState"),n_$N.document.addEventListener(n_$e,function(){"hidden"==n_$R.document[n_$u]?n_$a._setStageVisible(!1):n_$a._setStageVisible(!0)}),n_$N.document.addEventListener("qbrowserVisibilityChange",function(n_$N){n_$a._setStageVisible(!n_$N.hidden)}),n_$N.addEventListener("resize",function(){var n_$N=n_$R.window.orientation;null!=n_$N&&n_$N!=n_$C._previousOrientation&&n_$a._isInputting()&&(n_$XN.inputElement.target.focus=!1),n_$C._previousOrientation=n_$N,n_$a._isInputting()||n_$a._resetCanvas()}),n_$N.addEventListener("orientationchange",function(n_$N){n_$a._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),n_$R.onMobile&&this.on("mousedown",this,this._onmouseMove)}n_$P(n_$M,"laya.display.Stage",n_$$);var n_$N=n_$M.prototype;return n_$N._setStageVisible=function(n_$N){this._isVisibility!=n_$N&&(this._isVisibility=n_$N,this._isVisibility||this._isInputting()&&(n_$XN.inputElement.target.focus=!1),this.event("visibilitychange"))},n_$N._isInputting=function(){return n_$R.onMobile&&n_$XN.isInputting},n_$N._changeCanvasSize=function(){this.setScreenSize(n_$R.clientWidth*n_$R.pixelRatio,n_$R.clientHeight*n_$R.pixelRatio)},n_$N._resetCanvas=function(){if(this.screenAdaptationEnabled){var n_$N=n_$i._mainCanvas;n_$N.source.style;n_$N.size(1,1),n_$c.timer.once(100,this,this._changeCanvasSize)}},n_$N.setScreenSize=function(n_$N,n_$C){var n_$a=!1;if("none"!==this._screenMode&&(n_$a=(n_$N/n_$C<1?"vertical":"horizontal")!==this._screenMode)){var n_$u=n_$C;n_$C=n_$N,n_$N=n_$u}this.canvasRotation=n_$a;var n_$e=n_$i._mainCanvas,n_$J=n_$e.source.style,n_$M=this._canvasTransform.identity(),n_$n=this._scaleMode,n_$V=n_$N/this.designWidth,n_$A=n_$C/this.designHeight,n_$P=this.designWidth,n_$$=this.designHeight,n_$O=n_$N,n_$G=n_$C,n_$z=n_$R.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,n_$n){case"noscale":n_$V=n_$A=1,n_$O=this.designWidth,n_$G=this.designHeight;break;case"showall":n_$V=n_$A=Math.min(n_$V,n_$A),n_$P=n_$O=Math.round(this.designWidth*n_$V),n_$$=n_$G=Math.round(this.designHeight*n_$A);break;case"noborder":n_$V=n_$A=Math.max(n_$V,n_$A),n_$O=Math.round(this.designWidth*n_$V),n_$G=Math.round(this.designHeight*n_$A);break;case"full":n_$V=n_$A=1,this._width=n_$P=n_$N,this._height=n_$$=n_$C;break;case"fixedwidth":n_$A=n_$V,this._height=n_$$=Math.round(n_$C/n_$V);break;case"fixedheight":n_$V=n_$A,this._width=n_$P=Math.round(n_$N/n_$A);break;case"fixedauto":n_$N/n_$C<this.designWidth/this.designHeight?(n_$A=n_$V,this._height=n_$$=Math.round(n_$C/n_$V)):(n_$V=n_$A,this._width=n_$P=Math.round(n_$N/n_$A))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,n_$P=n_$P+1&2147483646,n_$$=n_$$+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),n_$V*=this.scaleX,n_$A*=this.scaleY,1===n_$V&&1===n_$A?this.transform.identity():(this.transform.a=this._formatData(n_$V/(n_$O/n_$P)),this.transform.d=this._formatData(n_$A/(n_$G/n_$$)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),n_$e.size(n_$P,n_$$),n_$_.changeWebGLSize(n_$P,n_$$),n_$M.scale(n_$O/n_$P/n_$z,n_$G/n_$$/n_$z),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(n_$N-n_$O)/n_$z:this.offset.x=.5*(n_$N-n_$O)/n_$z,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(n_$C-n_$G)/n_$z:this.offset.y=.5*(n_$C-n_$G)/n_$z,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),n_$M.translate(this.offset.x,this.offset.y),this.canvasDegree=0,n_$a&&("horizontal"===this._screenMode?(n_$M.rotate(Math.PI/2),n_$M.translate(n_$C/n_$z,0),this.canvasDegree=90):(n_$M.rotate(-Math.PI/2),n_$M.translate(0,n_$N/n_$z),this.canvasDegree=-90)),n_$M.a=this._formatData(n_$M.a),n_$M.d=this._formatData(n_$M.d),n_$M.tx=this._formatData(n_$M.tx),n_$M.ty=this._formatData(n_$M.ty),n_$J.transformOrigin=n_$J.webkitTransformOrigin=n_$J.msTransformOrigin=n_$J.mozTransformOrigin=n_$J.oTransformOrigin="0px 0px 0px",n_$J.transform=n_$J.webkitTransform=n_$J.msTransform=n_$J.mozTransform=n_$J.oTransform="matrix("+n_$M.toString()+")",n_$M.translate(parseInt(n_$J.left)||0,parseInt(n_$J.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},n_$N._formatData=function(n_$N){return Math.abs(n_$N)<1e-6?0:Math.abs(1-n_$N)<.001?0<n_$N?1:-1:n_$N},n_$N.getMousePoint=function(){return n_$E.TEMP.setTo(this.mouseX,this.mouseY)},n_$N.repaint=function(){this._repaint=1},n_$N.parentRepaint=function(){},n_$N._loop=function(){return this.render(n_$i.context,0,0),!0},n_$N._onmouseMove=function(n_$N){this._mouseMoveTime=n_$R.now()},n_$N.getTimeFromFrameStart=function(){return n_$R.now()-this._frameStartTime},n_$N.render=function(n_$N,n_$C,n_$a){if("sleep"===this._frameRate&&!n_$i.isConchApp){var n_$u=n_$R.now();if(!(1e3<=n_$u-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(n_$b.loopCount++,n_$f.instance.runEvent(),n_$c.timer._update()));this._frameStartTime=n_$u}if(this._renderCount++,n_$i.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=n_$R.now();var n_$e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),n_$J=this._renderCount%2==0;if(n_$b.renderSlow=!n_$e,n_$e||n_$J||n_$i.isConchApp){var n_$M;n_$b.loopCount++,n_$f.instance.runEvent(),n_$c.timer._update(),n_$_.update3DLoop();var n_$n=0,n_$V=0;if(n_$i.isConchNode)for(n_$n=0,n_$V=this._scenes.length;n_$n<n_$V;n_$n++)(n_$M=this._scenes[n_$n])&&n_$M._updateSceneConch();else for(n_$n=0,n_$V=this._scenes.length;n_$n<n_$V;n_$n++)(n_$M=this._scenes[n_$n])&&n_$M._updateScene();if(n_$i.isConchNode){var n_$A=n_$$N.CustomList;for(n_$n=0,n_$V=n_$A.length;n_$n<n_$V;n_$n++){var n_$P=n_$A[n_$n];n_$P.customRender(n_$P.customContext,0,0)}return}}n_$i.isConchNode||this.renderingEnabled&&(n_$e||!n_$J||n_$i.isConchWebGL)&&(n_$i.isWebGL?n_$i.WebGL.mainContext&&!n_$i.WebGL.mainContext.isContextLost()&&(n_$N.clear(),n_$$.prototype.render.call(this,n_$N,n_$C,n_$a),n_$b._show&&n_$b._sp&&n_$b._sp.render(n_$N,n_$C,n_$a),n_$_.clear(this._bgColor),n_$_.beginFlush(),n_$N.flush(),n_$_.endFinish(),n_$Z.instance&&n_$Z.getInstance().endDispose()):(n_$_.clear(this._bgColor),n_$$.prototype.render.call(this,n_$N,n_$C,n_$a),n_$b._show&&n_$b._sp&&n_$b._sp.render(n_$N,n_$C,n_$a)))}else this._renderCount%5==0&&(n_$b.loopCount++,n_$f.instance.runEvent(),n_$c.timer._update())},n_$N._requestFullscreen=function(){var n_$N=n_$R.document.documentElement;n_$N.requestFullscreen?n_$N.requestFullscreen():n_$N.mozRequestFullScreen?n_$N.mozRequestFullScreen():n_$N.webkitRequestFullscreen?n_$N.webkitRequestFullscreen():n_$N.msRequestFullscreen&&n_$N.msRequestFullscreen()},n_$N._fullScreenChanged=function(){n_$c.stage.event("fullscreenchange")},n_$N.exitFullscreen=function(){var n_$N=n_$R.document;n_$N.exitFullscreen?n_$N.exitFullscreen():n_$N.mozCancelFullScreen?n_$N.mozCancelFullScreen():n_$N.webkitExitFullscreen&&n_$N.webkitExitFullscreen()},n_$z(0,n_$N,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),n_$z(0,n_$N,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),n_$z(0,n_$N,"frameRate",function(){return this._frameRate},function(n_$N){if(this._frameRate=n_$N,n_$i.isConchApp)switch(this._frameRate){case"slow":n_$R.window.conch&&n_$R.window.conchConfig.setSlowFrame&&n_$R.window.conchConfig.setSlowFrame(!0);break;case"fast":n_$R.window.conch&&n_$R.window.conchConfig.setSlowFrame&&n_$R.window.conchConfig.setSlowFrame(!1);break;case"mouse":n_$R.window.conch&&n_$R.window.conchConfig.setMouseFrame&&n_$R.window.conchConfig.setMouseFrame(2e3);break;case"sleep":n_$R.window.conch&&n_$R.window.conchConfig.setLimitFPS&&n_$R.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),n_$z(0,n_$N,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),n_$z(0,n_$N,"width",n_$$.prototype._$get_width,function(n_$N){this.designWidth=n_$N,n_$c.superSet(n_$$N,this,"width",n_$N),n_$c.timer.callLater(this,this._changeCanvasSize)}),n_$z(0,n_$N,"alignH",function(){return this._alignH},function(n_$N){this._alignH=n_$N,n_$c.timer.callLater(this,this._changeCanvasSize)}),n_$z(0,n_$N,"isFocused",function(){return this._isFocused}),n_$z(0,n_$N,"height",n_$$.prototype._$get_height,function(n_$N){this.designHeight=n_$N,n_$c.superSet(n_$$N,this,"height",n_$N),n_$c.timer.callLater(this,this._changeCanvasSize)}),n_$z(0,n_$N,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||n_$d.create()},n_$$.prototype._$set_transform),n_$z(0,n_$N,"isVisibility",function(){return this._isVisibility}),n_$z(0,n_$N,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),n_$z(0,n_$N,"scaleMode",function(){return this._scaleMode},function(n_$N){this._scaleMode=n_$N,n_$c.timer.callLater(this,this._changeCanvasSize)}),n_$z(0,n_$N,"alignV",function(){return this._alignV},function(n_$N){this._alignV=n_$N,n_$c.timer.callLater(this,this._changeCanvasSize)}),n_$z(0,n_$N,"bgColor",function(){return this._bgColor},function(n_$N){this._bgColor=n_$N,this.conchModel&&this.conchModel.bgColor(n_$N),n_$i.isWebGL&&(n_$N?n_$M._wgColor=n_$K.create(n_$N)._color:n_$R.onMiniGame||(n_$M._wgColor=null)),n_$R.onLimixiu?n_$M._wgColor=n_$K.create(n_$N)._color:n_$i.canvas.style.background=n_$N||"none"}),n_$z(0,n_$N,"mouseX",function(){return Math.round(n_$f.instance.mouseX/this.clientScaleX)}),n_$z(0,n_$N,"mouseY",function(){return Math.round(n_$f.instance.mouseY/this.clientScaleY)}),n_$z(0,n_$N,"screenMode",function(){return this._screenMode},function(n_$N){this._screenMode=n_$N}),n_$z(0,n_$N,"visible",n_$$.prototype._$get_visible,function(n_$N){this.visible!==n_$N&&(n_$c.superSet(n_$$N,this,"visible",n_$N),n_$i._mainCanvas.source.style.visibility=n_$N?"visible":"hidden")}),n_$z(0,n_$N,"fullScreenEnabled",null,function(n_$N){var n_$C=n_$R.document,n_$a=n_$i.canvas;n_$N?(n_$a.addEventListener("mousedown",this._requestFullscreen),n_$a.addEventListener("touchstart",this._requestFullscreen),n_$C.addEventListener("fullscreenchange",this._fullScreenChanged),n_$C.addEventListener("mozfullscreenchange",this._fullScreenChanged),n_$C.addEventListener("webkitfullscreenchange",this._fullScreenChanged),n_$C.addEventListener("msfullscreenchange",this._fullScreenChanged)):(n_$a.removeEventListener("mousedown",this._requestFullscreen),n_$a.removeEventListener("touchstart",this._requestFullscreen),n_$C.removeEventListener("fullscreenchange",this._fullScreenChanged),n_$C.removeEventListener("mozfullscreenchange",this._fullScreenChanged),n_$C.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),n_$C.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),n_$M.SCALE_NOSCALE="noscale",n_$M.SCALE_EXACTFIT="exactfit",n_$M.SCALE_SHOWALL="showall",n_$M.SCALE_NOBORDER="noborder",n_$M.SCALE_FULL="full",n_$M.SCALE_FIXED_WIDTH="fixedwidth",n_$M.SCALE_FIXED_HEIGHT="fixedheight",n_$M.SCALE_FIXED_AUTO="fixedauto",n_$M.ALIGN_LEFT="left",n_$M.ALIGN_RIGHT="right",n_$M.ALIGN_CENTER="center",n_$M.ALIGN_TOP="top",n_$M.ALIGN_MIDDLE="middle",n_$M.ALIGN_BOTTOM="bottom",n_$M.SCREEN_NONE="none",n_$M.SCREEN_HORIZONTAL="horizontal",n_$M.SCREEN_VERTICAL="vertical",n_$M.FRAME_FAST="fast",n_$M.FRAME_SLOW="slow",n_$M.FRAME_MOUSE="mouse",n_$M.FRAME_SLEEP="sleep",n_$M.FRAME_MOUSE_THREDHOLD=2e3,n_$V(n_$M,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),n_$M}(n_$$N),n_$xN=(function(n_$N){function n_$C(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,n_$C.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}n_$P(n_$C,"laya.media.SoundNode",n_$$N);var n_$a=n_$C.prototype;n_$a._onParentChange=function(){this.target=this.parent},n_$a.play=function(n_$N,n_$C){void 0===n_$N&&(n_$N=1),isNaN(n_$N)&&(n_$N=1),this.url&&(this.stop(),this._channel=n_$q.playSound(this.url,n_$N,null,n_$C))},n_$a.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},n_$a._setPlayAction=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$u&&(n_$u=!0),this[n_$a]&&n_$N&&(n_$u?n_$N.on(n_$C,this,this[n_$a]):n_$N.off(n_$C,this,this[n_$a]))},n_$a._setPlayActions=function(n_$N,n_$C,n_$a,n_$u){if(void 0===n_$u&&(n_$u=!0),n_$N&&n_$C){var n_$e,n_$J=n_$C.split(","),n_$M=0;for(n_$e=n_$J.length,n_$M=0;n_$M<n_$e;n_$M++)this._setPlayAction(n_$N,n_$J[n_$M],n_$a,n_$u)}},n_$z(0,n_$a,"playEvent",null,function(n_$N){(this._playEvents=n_$N)&&this._tar&&this._setPlayActions(this._tar,n_$N,"play")}),n_$z(0,n_$a,"target",null,function(n_$N){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=n_$N,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),n_$z(0,n_$a,"stopEvent",null,function(n_$N){(this._stopEvents=n_$N)&&this._tar&&this._setPlayActions(this._tar,n_$N,"stop")})}(),function(n_$N){function n_$C(){this._src=null,this._onload=null,this._onerror=null,n_$C.__super.call(this)}n_$P(n_$C,"laya.resource.FileBitmap",n_$zN);var n_$a=n_$C.prototype;return n_$z(0,n_$a,"src",function(){return this._src},function(n_$N){this._src=n_$N}),n_$z(0,n_$a,"onload",null,function(n_$N){}),n_$z(0,n_$a,"onerror",null,function(n_$N){}),n_$C}()),n_$WN=function(n_$N){function n_$a(n_$N,n_$C){this._is2D=!1,n_$a.__super.call(this);var n_$u=this;if(this._source=this,"2D"===n_$N||"AUTO"===n_$N&&!n_$i.isWebGL){this._is2D=!0,this._source=n_$C||n_$R.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var n_$e=this;n_$e.getContext=function(n_$N,n_$C){if(n_$u._ctx)return n_$u._ctx;var n_$a=n_$u._ctx=n_$u._source.getContext(n_$N,n_$C);return n_$a&&(n_$a._canvas=n_$e,n_$i.isFlash||n_$R.onLimixiu||(n_$a.size=function(n_$N,n_$C){})),n_$a}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}n_$P(n_$a,"laya.resource.HTMLCanvas",n_$zN);var n_$C=n_$a.prototype;return n_$C.clear=function(){this._ctx&&this._ctx.clear()},n_$C.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},n_$C.release=function(){},n_$C._setContext=function(n_$N){this._ctx=n_$N},n_$C.getContext=function(n_$N,n_$C){return this._ctx?this._ctx:this._ctx=n_$a._createContext(this)},n_$C.getMemSize=function(){return 0},n_$C.size=function(n_$N,n_$C){(this._w!=n_$N||this._h!=n_$C||this._source&&(this._source.width!=n_$N||this._source.height!=n_$C))&&(this._w=n_$N,this._h=n_$C,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(n_$N,n_$C),this._source&&(this._source.height=n_$C,this._source.width=n_$N))},n_$C.getCanvas=function(){return this._source},n_$C.toBase64=function(n_$N,n_$C,n_$a){if(this._source)if(n_$i.isConchApp&&this._source.toBase64)this._source.toBase64(n_$N,n_$C,n_$a);else{var n_$u=this._source.toDataURL(n_$N,n_$C);n_$a.call(this,n_$u)}},n_$z(0,n_$C,"context",function(){return this._ctx}),n_$z(0,n_$C,"asBitmap",null,function(n_$N){}),n_$a.create=function(n_$N,n_$C){return new n_$a(n_$N,n_$C)},n_$a.TYPE2D="2D",n_$a.TYPE3D="3D",n_$a.TYPEAUTO="AUTO",n_$a._createContext=null,n_$a}(),n_$vN=(function(n_$N){function n_$V(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){throw n_$V.__super.call(this),new Error("不允许new！")}n_$P(n_$V,"laya.resource.HTMLSubImage",n_$zN),n_$V.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){return void 0===n_$n&&(n_$n=!1),new n_$V(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n)}}(),function(n_$N){function n_$$(){this._frames=null,this._url=null,n_$$.__super.call(this),this._setControlNode(this)}n_$P(n_$$,"laya.display.Animation",n_$N);var n_$C=n_$$.prototype;n_$C.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,n_$N),this._frames=null,this._labels=null},n_$C.play=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=!0),void 0===n_$a&&(n_$a=""),void 0===n_$u&&(n_$u=!0),n_$a&&this._setFramesFromCache(n_$a,n_$u),this._isPlaying=!0,this.index="string"==typeof n_$N?this._getFrameByLabel(n_$N):n_$N,this.loop=n_$C,this._actionName=n_$a,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},n_$C._setFramesFromCache=function(n_$N,n_$C){var n_$a;return void 0===n_$C&&(n_$C=!1),this._url&&(n_$N=this._url+"#"+n_$N),n_$N&&n_$$.framesMap[n_$N]?((n_$a=n_$$.framesMap[n_$N])instanceof Array?(this._frames=n_$$.framesMap[n_$N],this._count=this._frames.length):(n_$a.nodeRoot&&(n_$$.framesMap[n_$N]=this._parseGraphicAnimationByData(n_$a),n_$a=n_$$.framesMap[n_$N]),this._frames=n_$a.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=n_$a.interval),this._labels=this._copyLabels(n_$a.labels)),!0):(n_$C&&console.log("ani not found:",n_$N),!1)},n_$C._copyLabels=function(n_$N){if(!n_$N)return null;var n_$C,n_$a;for(n_$a in n_$C={},n_$N)n_$C[n_$a]=n_$I.copyArray([],n_$N[n_$a]);return n_$C},n_$C._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&n_$N.prototype._frameLoop.call(this)},n_$C._displayToIndex=function(n_$N){this._frames&&(this.graphics=this._frames[n_$N])},n_$C.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},n_$C.loadImages=function(n_$N,n_$C){return void 0===n_$C&&(n_$C=""),this._url="",this._setFramesFromCache(n_$C)||(this.frames=n_$$.framesMap[n_$C]?n_$$.framesMap[n_$C]:n_$$.createFrames(n_$N,n_$C)),this},n_$C.loadAtlas=function(n_$C,n_$a,n_$u){void 0===n_$u&&(n_$u=""),this._url="";var n_$e=this;function n_$N(n_$N){n_$C===n_$N&&(n_$e.frames=n_$$.framesMap[n_$u]?n_$$.framesMap[n_$u]:n_$$.createFrames(n_$C,n_$u),n_$a&&n_$a.run())}return n_$e._setFramesFromCache(n_$u)||(n_$nN.getAtlas(n_$C)?n_$N(n_$C):n_$c.loader.load(n_$C,n_$x.create(null,n_$N,[n_$C]),null,"atlas")),this},n_$C.loadAnimation=function(n_$N,n_$C,n_$a){this._url=n_$N;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,n_$C&&n_$C.run()):!n_$a||n_$nN.getAtlas(n_$a)?this._loadAnimationData(n_$N,n_$C,n_$a):n_$c.loader.load(n_$a,n_$x.create(this,this._loadAnimationData,[n_$N,n_$C,n_$a]),null,"atlas"),this},n_$C._loadAnimationData=function(n_$n,n_$V,n_$N){var n_$A=this;if(!n_$N||n_$nN.getAtlas(n_$N)){var n_$P=this;n_$nN.getRes(n_$n)?n_$C(n_$n):n_$c.loader.load(n_$n,n_$x.create(null,n_$C,[n_$n]),null,"json"),n_$nN.clearRes(n_$n)}else console.warn("atlas load fail:"+n_$N);function n_$C(n_$N){if(n_$nN.getRes(n_$N)&&n_$n===n_$N){var n_$C;if(n_$$.framesMap[n_$n+"#"])n_$P._setFramesFromCache(n_$A._actionName,!0),n_$A.index=0,n_$A._checkResumePlaying();else{var n_$a=n_$P._parseGraphicAnimation(n_$nN.getRes(n_$n));if(!n_$a)return;var n_$u,n_$e=n_$a.animationList,n_$J=0,n_$M=n_$e.length;for(n_$J=0;n_$J<n_$M;n_$J++)n_$C=n_$e[n_$J],n_$$.framesMap[n_$n+"#"+n_$C.name]=n_$C,n_$u||(n_$u=n_$C);n_$u&&(n_$$.framesMap[n_$n+"#"]=n_$u,n_$P._setFramesFromCache(n_$A._actionName,!0),n_$A.index=0),n_$A._checkResumePlaying()}n_$V&&n_$V.run()}}},n_$C._parseGraphicAnimation=function(n_$N){return n_$cN.parseAnimationData(n_$N)},n_$C._parseGraphicAnimationByData=function(n_$N){return n_$cN.parseAnimationByData(n_$N)},n_$z(0,n_$C,"frames",function(){return this._frames},function(n_$N){(this._frames=n_$N)&&(this._count=n_$N.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),n_$z(0,n_$C,"autoPlay",null,function(n_$N){n_$N?this.play():this.stop()}),n_$z(0,n_$C,"source",null,function(n_$N){-1<n_$N.indexOf(".ani")?this.loadAnimation(n_$N):-1<n_$N.indexOf(".json")||-1<n_$N.indexOf("als")||-1<n_$N.indexOf("atlas")?this.loadAtlas(n_$N):this.loadImages(n_$N.split(","))}),n_$z(0,n_$C,"autoAnimation",null,function(n_$N){this.play(0,!0,n_$N,!1)}),n_$$.createFrames=function(n_$N,n_$C){var n_$a,n_$u,n_$e=0,n_$J=0;if("string"==typeof n_$N){var n_$M=n_$nN.getAtlas(n_$N);if(n_$M&&n_$M.length)for(n_$a=[],n_$e=0,n_$J=n_$M.length;n_$e<n_$J;n_$e++)(n_$u=new n_$_.createGraphics).drawTexture(n_$nN.getRes(n_$M[n_$e]),0,0),n_$a.push(n_$u)}else if(n_$N instanceof Array)for(n_$a=[],n_$e=0,n_$J=n_$N.length;n_$e<n_$J;n_$e++)(n_$u=new n_$_.createGraphics).loadImage(n_$N[n_$e],0,0),n_$a.push(n_$u);return n_$C&&(n_$$.framesMap[n_$C]=n_$a),n_$a},n_$$.clearCache=function(n_$N){var n_$C,n_$a=n_$$.framesMap,n_$u=n_$N+"#";for(n_$C in n_$a)n_$C!==n_$N&&0!=n_$C.indexOf(n_$u)||delete n_$$.framesMap[n_$C]},n_$$.framesMap={}}(n_$fN),function(n_$N){function n_$J(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,n_$J.__super.call(this),null==n_$J._sortIndexFun&&(n_$J._sortIndexFun=n_$r.sortByKey("index",!1,!0))}n_$P(n_$J,"laya.display.FrameAnimation",n_$N);var n_$C=n_$J.prototype;return n_$C._setUp=function(n_$N,n_$C){this._labels=null,this._animationNewFrames=null,this._targetDic=n_$N,this._animationData=n_$C,this.interval=1e3/n_$C.frameRate,n_$C.parsed?(this._count=n_$C.count,this._labels=n_$C.labels,this._animationNewFrames=n_$C.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),n_$C.parsed=!0,n_$C.labels=this._labels,n_$C.count=this._count,n_$C.animationNewFrames=this._animationNewFrames},n_$C.clear=function(){n_$N.prototype.clear.call(this),this._targetDic=null,this._animationData=null},n_$C._displayToIndex=function(n_$N){if(this._animationData){n_$N<0&&(n_$N=0),n_$N>this._count&&(n_$N=this._count);var n_$C=this._animationData.nodes,n_$a=0,n_$u=n_$C.length;for(n_$a=0;n_$a<n_$u;n_$a++)this._displayNodeToFrame(n_$C[n_$a],n_$N)}},n_$C._displayNodeToFrame=function(n_$N,n_$C,n_$a){n_$a||(n_$a=this._targetDic);var n_$u=n_$a[n_$N.target];if(n_$u){var n_$e,n_$J,n_$M,n_$n=n_$N.frames,n_$V=n_$N.keys,n_$A=0,n_$P=n_$V.length;for(n_$A=0;n_$A<n_$P;n_$A++)n_$M=(n_$J=n_$n[n_$e=n_$V[n_$A]]).length>n_$C?n_$J[n_$C]:n_$J[n_$J.length-1],n_$u[n_$e]=n_$M}},n_$C._calculateDatas=function(){if(this._animationData){var n_$N,n_$C=this._animationData.nodes,n_$a=0,n_$u=n_$C.length;for(n_$a=this._count=0;n_$a<n_$u;n_$a++)n_$N=n_$C[n_$a],this._calculateNodeKeyFrames(n_$N);this._count+=1}},n_$C._calculateNodeKeyFrames=function(n_$N){var n_$C,n_$a,n_$u=n_$N.keyframes,n_$e=n_$N.target;for(n_$C in n_$N.frames||(n_$N.frames={}),n_$N.keys?n_$N.keys.length=0:n_$N.keys=[],n_$N.initValues||(n_$N.initValues={}),n_$u)n_$a=n_$u[n_$C],n_$N.frames[n_$C]||(n_$N.frames[n_$C]=[]),this._targetDic&&this._targetDic[n_$e]&&(n_$N.initValues[n_$C]=this._targetDic[n_$e][n_$C]),n_$a.sort(n_$J._sortIndexFun),n_$N.keys.push(n_$C),this._calculateNodePropFrames(n_$a,n_$N.frames[n_$C],n_$C,n_$e)},n_$C.resetToInitState=function(){if(this._targetDic&&this._animationData){var n_$N,n_$C,n_$a=this._animationData.nodes,n_$u=0,n_$e=n_$a.length;for(n_$u=0;n_$u<n_$e;n_$u++)if(n_$C=(n_$N=n_$a[n_$u]).initValues){var n_$J,n_$M=this._targetDic[n_$N.target];if(n_$M)for(n_$J in n_$C)n_$M[n_$J]=n_$C[n_$J]}}},n_$C._calculateNodePropFrames=function(n_$N,n_$C,n_$a,n_$u){var n_$e=0,n_$J=n_$N.length-1;if(0<n_$J){for(n_$C.length=n_$N[n_$J].index+1,n_$e=0;n_$e<n_$J;n_$e++)this._dealKeyFrame(n_$N[n_$e]),this._calculateFrameValues(n_$N[n_$e],n_$N[n_$e+1],n_$C);this._dealKeyFrame(n_$N[n_$e])}0==n_$J&&(n_$C[n_$N[0].index]=n_$N[0].value,this._animationNewFrames&&(this._animationNewFrames[n_$N[0].index]=!0))},n_$C._dealKeyFrame=function(n_$N){n_$N.label&&""!=n_$N.label&&this.addLabel(n_$N.label,n_$N.index)},n_$C._calculateFrameValues=function(n_$N,n_$C,n_$a){var n_$u,n_$e=0,n_$J=n_$N.index,n_$M=n_$C.index,n_$n=n_$N.value,n_$V=n_$C.value-n_$N.value,n_$A=n_$M-n_$J;if(n_$M>this._count&&(this._count=n_$M),n_$N.tween)for(null==(n_$u=n_$S[n_$N.tweenMethod])&&(n_$u=n_$S.linearNone),n_$e=n_$J;n_$e<n_$M;n_$e++)n_$a[n_$e]=n_$u(n_$e-n_$J,n_$n,n_$V,n_$A),this._animationNewFrames&&(this._animationNewFrames[n_$e]=!0);else for(n_$e=n_$J;n_$e<n_$M;n_$e++)n_$a[n_$e]=n_$n;this._animationNewFrames&&(this._animationNewFrames[n_$N.index]=!0,this._animationNewFrames[n_$C.index]=!0),n_$a[n_$C.index]=n_$C.value},n_$J._sortIndexFun=null,n_$J}(n_$fN)),n_$XN=function(n_$C){function n_$e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",n_$e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=n_$tN.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}n_$P(n_$e,"laya.display.Input",n_$C);var n_$N=n_$e.prototype;return n_$N.setSelection=function(n_$N,n_$C){this.focus=!0,laya.display.Input.inputElement.selectionStart=n_$N,laya.display.Input.inputElement.selectionEnd=n_$C},n_$N._onUnDisplay=function(n_$N){this.focus=!1},n_$N._onMouseDown=function(n_$N){this.focus=!0},n_$N._syncInputTransform=function(){var n_$N=this.nativeInput,n_$C=n_$I.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),n_$a=this._width-this.padding[1]-this.padding[3],n_$u=this._height-this.padding[0]-this.padding[2];n_$i.isConchApp?(n_$N.setScale(n_$C.scaleX,n_$C.scaleY),n_$N.setSize(n_$a,n_$u),n_$N.setPos(n_$C.x,n_$C.y)):(n_$e.inputContainer.style.transform=n_$e.inputContainer.style.webkitTransform="scale("+n_$C.scaleX+","+n_$C.scaleY+") rotate("+n_$c.stage.canvasDegree+"deg)",n_$N.style.width=n_$a+"px",n_$N.style.height=n_$u+"px",n_$e.inputContainer.style.left=n_$C.x+"px",n_$e.inputContainer.style.top=n_$C.y+"px")},n_$N.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},n_$N._setInputMethod=function(){n_$e.input.parentElement&&n_$e.inputContainer.removeChild(n_$e.input),n_$e.area.parentElement&&n_$e.inputContainer.removeChild(n_$e.area),n_$e.inputElement=this._multiline?n_$e.area:n_$e.input,n_$e.inputContainer.appendChild(n_$e.inputElement),n_$tN.RightToLeft&&(n_$e.inputElement.style.direction="rtl")},n_$N._focusIn=function(){laya.display.Input.isInputting=!0;var n_$N=this.nativeInput;this._focus=!0;var n_$C=n_$N.style;n_$C.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),n_$N.readOnly=!this._editable,n_$i.isConchApp&&(n_$N.setType(this._type),n_$N.setForbidEdit(!this._editable)),n_$N.maxLength=this._maxChars;this.padding;if(n_$N.type=this._type,n_$N.value=this._content,n_$N.placeholder=this._prompt,n_$c.stage.off("keydown",this,this._onKeyDown),n_$c.stage.on("keydown",this,this._onKeyDown),(n_$c.stage.focus=this).event("focus"),n_$R.onPC&&n_$N.focus(),!n_$R.onMiniGame){this._text;this._text=null}this.typeset(),n_$N.setColor(this._originColor),n_$N.setFontSize(this.fontSize),n_$N.setFontFace(n_$R.onIPhone&&n_$tN._fontFamilyMap[this.font]||this.font),n_$i.isConchApp&&n_$N.setMultiAble&&n_$N.setMultiAble(this._multiline),n_$C.lineHeight=this.leading+this.fontSize+"px",n_$C.fontStyle=this.italic?"italic":"normal",n_$C.fontWeight=this.bold?"bold":"normal",n_$C.textAlign=this.align,n_$C.padding="0 0",this._syncInputTransform(),!n_$i.isConchApp&&n_$R.onPC&&n_$c.timer.frameLoop(1,this,this._syncInputTransform)},n_$N._setPromptColor=function(){(n_$e.promptStyleDOM=n_$R.getElementById("promptStyle"))||((n_$e.promptStyleDOM=n_$R.createElement("style")).setAttribute("id","promptStyle"),n_$R.document.head.appendChild(n_$e.promptStyleDOM)),n_$e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},n_$N._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(n_$c.superSet(n_$tN,this,"text",this._content),n_$c.superSet(n_$tN,this,"color",this._originColor)):(n_$c.superSet(n_$tN,this,"text",this._prompt),n_$c.superSet(n_$tN,this,"color",this._promptColor)),n_$c.stage.off("keydown",this,this._onKeyDown),n_$c.stage.focus=null,this.event("blur"),n_$i.isConchApp&&this.nativeInput.blur(),n_$R.onPC&&n_$c.timer.clear(this,this._syncInputTransform)},n_$N._onKeyDown=function(n_$N){13===n_$N.keyCode&&(n_$R.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},n_$N.changeText=function(n_$N){this._content=n_$N,this._focus?(this.nativeInput.value=n_$N||"",this.event("change")):n_$C.prototype.changeText.call(this,n_$N)},n_$z(0,n_$N,"color",n_$C.prototype._$get_color,function(n_$N){this._focus&&this.nativeInput.setColor(n_$N),n_$c.superSet(n_$tN,this,"color",this._content?n_$N:this._promptColor),this._originColor=n_$N}),n_$z(0,n_$N,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(n_$N){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),n_$z(0,n_$N,"multiline",function(){return this._multiline},function(n_$N){this._multiline=n_$N,this.valign=n_$N?"top":"middle"}),n_$z(0,n_$N,"maxChars",function(){return this._maxChars},function(n_$N){n_$N<=0&&(n_$N=1e5),this._maxChars=n_$N}),n_$z(0,n_$N,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(n_$N){n_$c.superSet(n_$tN,this,"color",this._originColor),n_$N+="",this._focus?(this.nativeInput.value=n_$N||"",this.event("change")):(this._multiline||(n_$N=n_$N.replace(/\r?\n/g,"")),(this._content=n_$N)?n_$c.superSet(n_$tN,this,"text",n_$N):(n_$c.superSet(n_$tN,this,"text",this._prompt),n_$c.superSet(n_$tN,this,"color",this.promptColor)))}),n_$z(0,n_$N,"nativeInput",function(){return this._multiline?n_$e.area:n_$e.input}),n_$z(0,n_$N,"prompt",function(){return this._prompt},function(n_$N){!this._text&&n_$N&&n_$c.superSet(n_$tN,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?n_$c.superSet(n_$tN,this,"text",this._text==this._prompt?n_$N:this._text):n_$c.superSet(n_$tN,this,"text",n_$N),this._prompt=n_$tN.langPacks&&n_$tN.langPacks[n_$N]?n_$tN.langPacks[n_$N]:n_$N}),n_$z(0,n_$N,"focus",function(){return this._focus},function(n_$N){var n_$C=this.nativeInput;this._focus!==n_$N&&(n_$N?(n_$C.target?n_$C.target._focusOut():this._setInputMethod(),(n_$C.target=this)._focusIn()):(n_$C.target=null,this._focusOut(),n_$R.document.body.scrollTop=0,n_$C.blur(),n_$i.isConchApp?n_$C.setPos(-1e4,-1e4):n_$e.inputContainer.contains(n_$C)&&n_$e.inputContainer.removeChild(n_$C)))}),n_$z(0,n_$N,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(n_$N){n_$N?(-1<(n_$N="[^"+n_$N+"]").indexOf("^^")&&(n_$N=n_$N.replace("^^","")),this._restrictPattern=new RegExp(n_$N,"g")):this._restrictPattern=null}),n_$z(0,n_$N,"editable",function(){return this._editable},function(n_$N){this._editable=n_$N,n_$i.isConchApp&&n_$e.input.setForbidEdit(!n_$N)}),n_$z(0,n_$N,"promptColor",function(){return this._promptColor},function(n_$N){this._promptColor=n_$N,this._content||n_$c.superSet(n_$tN,this,"color",n_$N)}),n_$z(0,n_$N,"type",function(){return this._type},function(n_$N){this._getCSSStyle().password="password"==n_$N,this._type=n_$N,n_$i.isConchApp&&this.nativeInput.setType(n_$N)}),n_$z(0,n_$N,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(n_$N){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),n_$z(0,n_$N,"asPassword",function(){return this._getCSSStyle().password},function(n_$N){this._getCSSStyle().password=n_$N,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),n_$e.__init__=function(){n_$e._createInputElement(),n_$R.onMobile&&n_$i.canvas.addEventListener(n_$e.IOS_IFRAME?n_$R.onMiniGame?"touchend":"click":"touchend",n_$e._popupInputMethod)},n_$e._popupInputMethod=function(n_$N){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},n_$e._createInputElement=function(){n_$e._initInput(n_$e.area=n_$R.createElement("textarea")),n_$e._initInput(n_$e.input=n_$R.createElement("input")),(n_$e.inputContainer=n_$R.createElement("div")).style.position="absolute",n_$e.inputContainer.style.zIndex=1e5,n_$R.container.appendChild(n_$e.inputContainer),n_$e.inputContainer.setPos=function(n_$N,n_$C){n_$e.inputContainer.style.left=n_$N+"px",n_$e.inputContainer.style.top=n_$C+"px"}},n_$e._initInput=function(n_$C){var n_$N=n_$C.style;n_$N.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",n_$N.resize="none",n_$N.backgroundColor="transparent",n_$N.border="none",n_$N.outline="none",n_$N.zIndex=1,n_$C.addEventListener("input",n_$e._processInputting),n_$C.addEventListener("mousemove",n_$e._stopEvent),n_$C.addEventListener("mousedown",n_$e._stopEvent),n_$C.addEventListener("touchmove",n_$e._stopEvent),n_$C.setFontFace=function(n_$N){n_$C.style.fontFamily=n_$N},n_$i.isConchApp||(n_$C.setColor=function(n_$N){n_$C.style.color=n_$N},n_$C.setFontSize=function(n_$N){n_$C.style.fontSize=n_$N+"px"})},n_$e._processInputting=function(n_$N){var n_$C=laya.display.Input.inputElement.target;if(n_$C){var n_$a=laya.display.Input.inputElement.value;n_$C._restrictPattern&&(n_$a=n_$a.replace(/\u2006|\x27/g,""),n_$C._restrictPattern.test(n_$a)&&(n_$a=n_$a.replace(n_$C._restrictPattern,""),laya.display.Input.inputElement.value=n_$a)),n_$C._text=n_$a,n_$C.event("input")}},n_$e._stopEvent=function(n_$N){"touchmove"==n_$N.type&&n_$N.preventDefault(),n_$N.stopPropagation&&n_$N.stopPropagation()},n_$e.TYPE_TEXT="text",n_$e.TYPE_PASSWORD="password",n_$e.TYPE_EMAIL="email",n_$e.TYPE_URL="url",n_$e.TYPE_NUMBER="number",n_$e.TYPE_RANGE="range",n_$e.TYPE_DATE="date",n_$e.TYPE_MONTH="month",n_$e.TYPE_WEEK="week",n_$e.TYPE_TIME="time",n_$e.TYPE_DATE_TIME="datetime",n_$e.TYPE_DATE_TIME_LOCAL="datetime-local",n_$e.TYPE_SEARCH="search",n_$e.input=null,n_$e.area=null,n_$e.inputElement=null,n_$e.inputContainer=null,n_$e.confirmButton=null,n_$e.promptStyleDOM=null,n_$e.inputHeight=45,n_$e.isInputting=!1,n_$e.stageMatrix=null,n_$V(n_$e,["IOS_IFRAME",function(){return this.IOS_IFRAME=n_$R.onIOS&&n_$R.window.top!=n_$R.window.self}]),n_$e}(n_$tN),n_$rN=function(n_$N){function n_$a(n_$N,n_$C){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,n_$a.__super.call(this),n_$N&&this._init_(n_$N,n_$C)}n_$P(n_$a,"laya.resource.HTMLImage",n_$xN);var n_$C=n_$a.prototype;return n_$C._init_=function(n_$N,n_$C){this._src=n_$N,this._source=new n_$R.window.Image,n_$C&&(n_$C.onload&&(this.onload=n_$C.onload),n_$C.onerror&&(this.onerror=n_$C.onerror),n_$C.onCreate&&n_$C.onCreate(this)),0!=n_$N.indexOf("data:image")&&(this._source.crossOrigin=""),n_$N&&(this._source.src=n_$N)},n_$C.recreateResource=function(){var n_$N=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var n_$C=this;this._source=new n_$R.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(n_$C._needReleaseAgain)return n_$C._needReleaseAgain=!1,n_$C._source.onload=null,void(n_$C._source=null);n_$C._source.onload=null,n_$C.memorySize=n_$N._w*n_$N._h*4,n_$C._recreateLock=!1,n_$C.completeCreate()},this._source.src=this._src}},n_$C.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},n_$C.onresize=function(){this._w=this._source.width,this._h=this._source.height},n_$z(0,n_$C,"onload",null,function(n_$N){var n_$C=this;this._onload=n_$N,this._source&&(this._source.onload=null!=this._onload?function(){n_$C.onresize(),n_$C._onload()}:null)}),n_$z(0,n_$C,"onerror",null,function(n_$N){var n_$C=this;this._onerror=n_$N,this._source&&(this._source.onerror=null!=this._onerror?function(){n_$C._onerror()}:null)}),n_$z(0,n_$C,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(n_$N){this._enableMerageInAtlas=n_$N,n_$i.isConchApp&&this._source&&(this._source.enableMerageInAtlas=n_$N)}),n_$a.create=function(n_$N,n_$C){return new n_$a(n_$N,n_$C)},n_$a}(),n_$cN=(function(n_$J){function n_$N(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,n_$N.__super.call(this)}n_$P(n_$N,"laya.display.EffectAnimation",n_$J);var n_$C=n_$N.prototype;n_$C._onOtherBegin=function(n_$N){n_$N!=this&&this.stop()},n_$C.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},n_$C._onPlayAction=function(){this.play(0,!1)},n_$C.play=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=!0),void 0===n_$a&&(n_$a=""),void 0===n_$u&&(n_$u=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,n_$N,n_$C,n_$a,n_$u))},n_$C._recordInitData=function(){if(this._aniKeys){var n_$N,n_$C,n_$a=0;for(n_$N=this._aniKeys.length,n_$a=0;n_$a<n_$N;n_$a++)n_$C=this._aniKeys[n_$a],this._initData[n_$C]=this._target[n_$C]}},n_$C._displayToIndex=function(n_$N){if(this._animationData){n_$N<0&&(n_$N=0),n_$N>this._count&&(n_$N=this._count);var n_$C=this._animationData.nodes,n_$a=0,n_$u=n_$C.length;for(n_$u=1<n_$u?1:n_$u,n_$a=0;n_$a<n_$u;n_$a++)this._displayNodeToFrame(n_$C[n_$a],n_$N)}},n_$C._displayNodeToFrame=function(n_$N,n_$C,n_$a){if(this._target){var n_$u;n_$u=this._target;var n_$e,n_$J,n_$M,n_$n,n_$V=n_$N.frames,n_$A=n_$N.keys,n_$P=0,n_$$=n_$A.length;n_$n=n_$N.secondFrames;var n_$O,n_$G,n_$z,n_$f,n_$t=0;for(n_$P=0;n_$P<n_$$;n_$P++)n_$J=n_$V[n_$e=n_$A[n_$P]],n_$M=-1==(n_$t=n_$n[n_$e])?this._initData[n_$e]:n_$C<n_$t?(n_$z=(n_$G=n_$N.keyframes[n_$e])[0]).tween?(null==(n_$O=n_$S[n_$z.tweenMethod])&&(n_$O=n_$S.linearNone),n_$f=n_$G[1],n_$O(n_$C,this._initData[n_$e],n_$f.value-this._initData[n_$e],n_$f.index)):this._initData[n_$e]:n_$J.length>n_$C?n_$J[n_$C]:n_$J[n_$J.length-1],n_$u[n_$e]=n_$M}},n_$C._calculateNodeKeyFrames=function(n_$N){n_$J.prototype._calculateNodeKeyFrames.call(this,n_$N);var n_$C,n_$a,n_$u,n_$e=n_$N.keyframes;n_$N.target;for(n_$C in n_$u={},n_$N.secondFrames=n_$u,n_$e)(n_$a=n_$e[n_$C]).length<=1?n_$u[n_$C]=-1:n_$u[n_$C]=n_$a[1].index},n_$z(0,n_$C,"target",function(){return this._target},function(n_$N){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=n_$N,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),n_$z(0,n_$C,"playEvent",null,function(n_$N){(this._playEvents=n_$N)&&this.addEvent()}),n_$z(0,n_$C,"effectData",null,function(n_$N){var n_$C;n_$N&&((n_$C=n_$N.animations)&&n_$C[0]&&(this._setUp({},n_$C[0]),n_$C[0].nodes&&n_$C[0].nodes[0]&&(this._aniKeys=n_$C[0].nodes[0].keys)))}),n_$z(0,n_$C,"effectClass",null,function(n_$N){var n_$C,n_$a;(this._effectClass=n_$Y.getClass(n_$N),this._effectClass)&&((n_$C=this._effectClass.uiView)&&(n_$a=n_$C.animations)&&n_$a[0]&&(this._setUp({},n_$a[0]),n_$a[0].nodes&&n_$a[0].nodes[0]&&(this._aniKeys=n_$a[0].nodes[0].keys)))}),n_$N.EffectAnimationBegin="effectanimationbegin"}(n_$vN),function(n_$C){var n_$s;function n_$q(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,n_$q.__super.call(this)}n_$P(n_$q,"laya.utils.GraphicAnimation",n_$C);var n_$N=n_$q.prototype;return n_$N._parseNodeList=function(n_$N){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[n_$N.compId]=n_$N.props,n_$N.compId&&this._nodeList.push(n_$N.compId);var n_$C=n_$N.child;if(n_$C){var n_$a=0,n_$u=n_$C.length;for(n_$a=0;n_$a<n_$u;n_$a++)this._parseNodeList(n_$C[n_$a])}},n_$N._calGraphicData=function(n_$N){var n_$C;if(this._setUp(null,n_$N),this._createGraphicData(),this._nodeIDAniDic)for(n_$C in this._nodeIDAniDic)this._nodeIDAniDic[n_$C]=null},n_$N._createGraphicData=function(){var n_$N,n_$C=[],n_$a=0,n_$u=this.count,n_$e=this._animationNewFrames;for(n_$e||(n_$e=[]),n_$a=0;n_$a<n_$u;n_$a++)!n_$e[n_$a]&&n_$N||(n_$N=this._createFrameGraphic(n_$a)),n_$C.push(n_$N);this._gList=n_$C},n_$N._createFrameGraphic=function(n_$N){var n_$C=n_$_.createGraphics();return n_$q._rootMatrix||(n_$q._rootMatrix=new n_$d),this._updateNodeGraphic(this._rootNode,n_$N,n_$q._rootMatrix,n_$C),n_$C},n_$N._updateNodeGraphic=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J;void 0===n_$e&&(n_$e=1);var n_$M,n_$n,n_$V,n_$A=(n_$J=this._nodeGDic[n_$N.compId]=this._getNodeGraphicData(n_$N.compId,n_$C,this._nodeGDic[n_$N.compId])).alpha*n_$e;if(!(n_$A<.01)&&(n_$J.resultTransform||(n_$J.resultTransform=n_$d.create()),n_$M=n_$J.resultTransform,n_$d.mul(n_$J.transform,n_$a,n_$M),n_$J.skin&&(n_$n=this._getTextureByUrl(n_$J.skin))&&(n_$M._checkTransform()?(n_$u.drawTexture(n_$n,0,0,n_$J.width,n_$J.height,n_$M,n_$A),n_$J.resultTransform=null):n_$u.drawTexture(n_$n,n_$M.tx,n_$M.ty,n_$J.width,n_$J.height,null,n_$A)),n_$V=n_$N.child)){var n_$P,n_$$=0;for(n_$P=n_$V.length,n_$$=0;n_$$<n_$P;n_$$++)this._updateNodeGraphic(n_$V[n_$$],n_$C,n_$M,n_$u,n_$A)}},n_$N._updateNoChilds=function(n_$N,n_$C){if(n_$N.skin){var n_$a=this._getTextureByUrl(n_$N.skin);if(n_$a){var n_$u=n_$N.transform;n_$u._checkTransform();!n_$u.bTransform?n_$C.drawTexture(n_$a,n_$u.tx,n_$u.ty,n_$N.width,n_$N.height,null,n_$N.alpha):n_$C.drawTexture(n_$a,0,0,n_$N.width,n_$N.height,n_$u.clone(),n_$N.alpha)}}},n_$N._updateNodeGraphic2=function(n_$N,n_$C,n_$a){var n_$u;if(n_$u=this._nodeGDic[n_$N.compId]=this._getNodeGraphicData(n_$N.compId,n_$C,this._nodeGDic[n_$N.compId]),n_$N.child){var n_$e=n_$u.transform;n_$e._checkTransform();var n_$J,n_$M;n_$M=(n_$J=!n_$e.bTransform)&&(0!=n_$e.tx||0!=n_$e.ty);var n_$n,n_$V,n_$A;if((n_$n=n_$e.bTransform||1!=n_$u.alpha)&&n_$a.save(),1!=n_$u.alpha&&n_$a.alpha(n_$u.alpha),n_$J?n_$M&&n_$a.translate(n_$e.tx,n_$e.ty):n_$a.transform(n_$e.clone()),n_$V=n_$N.child,n_$u.skin&&(n_$A=this._getTextureByUrl(n_$u.skin))&&n_$a.drawTexture(n_$A,0,0,n_$u.width,n_$u.height),n_$V){var n_$P,n_$$=0;for(n_$P=n_$V.length,n_$$=0;n_$$<n_$P;n_$$++)this._updateNodeGraphic2(n_$V[n_$$],n_$C,n_$a)}n_$n?n_$a.restore():n_$J?n_$M&&n_$a.translate(-n_$e.tx,-n_$e.ty):n_$a.transform(n_$e.clone().invert())}else this._updateNoChilds(n_$u,n_$a)},n_$N._calculateNodeKeyFrames=function(n_$N){n_$C.prototype._calculateNodeKeyFrames.call(this,n_$N),this._nodeIDAniDic[n_$N.target]=n_$N},n_$N.getNodeDataByID=function(n_$N){return this._nodeIDAniDic[n_$N]},n_$N._getParams=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$q._temParam;n_$e.length=n_$C.length;var n_$J=0,n_$M=n_$C.length;for(n_$J=0;n_$J<n_$M;n_$J++)n_$e[n_$J]=this._getObjVar(n_$N,n_$C[n_$J][0],n_$a,n_$C[n_$J][1],n_$u);return n_$e},n_$N._getObjVar=function(n_$N,n_$C,n_$a,n_$u,n_$e){if(n_$N.hasOwnProperty(n_$C)){var n_$J=n_$N[n_$C];if(n_$a>=n_$J.length&&(n_$a=n_$J.length-1),null!=n_$N[n_$C][n_$a])return n_$N[n_$C][n_$a]}return n_$e.hasOwnProperty(n_$C)?n_$e[n_$C]:n_$u},n_$N._getNodeGraphicData=function(n_$N,n_$C,n_$a){n_$a||(n_$a=n_$s.create()),n_$a.transform?n_$a.transform.identity():n_$a.transform=n_$d.create();var n_$u=this.getNodeDataByID(n_$N);if(!n_$u)return n_$a;var n_$e,n_$J,n_$M=n_$u.frames,n_$n=this._getParams(n_$M,n_$q._drawTextureCmd,n_$C,this._nodeDefaultProps[n_$N]),n_$V=n_$n[0],n_$A=NaN,n_$P=NaN,n_$$=n_$n[5],n_$O=n_$n[6],n_$G=n_$n[13],n_$z=n_$n[14],n_$f=n_$n[7],n_$t=n_$n[8],n_$g=n_$n[9],n_$x=n_$n[11],n_$W=n_$n[12];n_$A=n_$n[3],n_$P=n_$n[4],0!=n_$A&&0!=n_$P||(n_$V=null),-1==n_$A&&(n_$A=0),-1==n_$P&&(n_$P=0),n_$a.skin=n_$V,n_$a.width=n_$A,n_$a.height=n_$P,n_$V&&((n_$e=this._getTextureByUrl(n_$V))?(n_$A||(n_$A=n_$e.sourceWidth),n_$P||(n_$P=n_$e.sourceHeight)):console.warn("lost skin:",n_$V,",you may load pics first")),n_$a.alpha=n_$n[10],n_$J=n_$a.transform,0!=n_$G&&(n_$$=n_$G*n_$A),0!=n_$z&&(n_$O=n_$z*n_$P),0==n_$$&&0==n_$O||n_$J.translate(-n_$$,-n_$O);var n_$v=null;if(n_$g||1!==n_$f||1!==n_$t||n_$x||n_$W){(n_$v=n_$q._tempMt).identity(),n_$v.bTransform=!0;var n_$X=.0174532922222222*(n_$g-n_$x),n_$r=.0174532922222222*(n_$g+n_$W),n_$c=Math.cos(n_$r),n_$E=Math.sin(n_$r),n_$F=Math.sin(n_$X),n_$D=Math.cos(n_$X);n_$v.a=n_$f*n_$c,n_$v.b=n_$f*n_$E,n_$v.c=-n_$t*n_$F,n_$v.d=n_$t*n_$D,n_$v.tx=n_$v.ty=0}return n_$v&&(n_$J=n_$d.mul(n_$J,n_$v,n_$J)),n_$J.translate(n_$n[1],n_$n[2]),n_$a},n_$N._getTextureByUrl=function(n_$N){return n_$nN.getRes(n_$N)},n_$N.setAniData=function(n_$N,n_$C){if(n_$N.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=n_$N,this._parseNodeList(n_$N);var n_$a,n_$u={},n_$e=[],n_$J=n_$N.animations,n_$M=0,n_$n=n_$J.length;for(n_$M=0;n_$M<n_$n;n_$M++)if(n_$a=n_$J[n_$M],this._labels=null,(!n_$C||n_$C==n_$a.name)&&n_$a){try{this._calGraphicData(n_$a)}catch(n_$N){console.warn("parse animation fail:"+n_$a.name+",empty animation created"),this._gList=[]}var n_$V={};n_$V.interval=1e3/n_$a.frameRate,n_$V.frames=this._gList,n_$V.labels=this._labels,n_$V.name=n_$a.name,n_$e.push(n_$V),n_$u[n_$a.name]=n_$V}this.animationList=n_$e,this.animationDic=n_$u}n_$q._temParam.length=0},n_$N.parseByData=function(n_$N){var n_$C,n_$a;n_$C=n_$N.nodeRoot,n_$a=n_$N.aniO,delete n_$N.nodeRoot,delete n_$N.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=n_$C,this._parseNodeList(n_$C),this._labels=null;try{this._calGraphicData(n_$a)}catch(n_$N){console.warn("parse animation fail:"+n_$a.name+",empty animation created"),this._gList=[]}var n_$u=n_$N;return n_$u.interval=1e3/n_$a.frameRate,n_$u.frames=this._gList,n_$u.labels=this._labels,n_$u.name=n_$a.name,n_$u},n_$N.setUpAniData=function(n_$N){if(n_$N.animations){var n_$C,n_$a={},n_$u=[],n_$e=n_$N.animations,n_$J=0,n_$M=n_$e.length;for(n_$J=0;n_$J<n_$M;n_$J++)if(n_$C=n_$e[n_$J]){var n_$n={};n_$n.name=n_$C.name,n_$n.aniO=n_$C,n_$n.nodeRoot=n_$N,n_$u.push(n_$n),n_$a[n_$C.name]=n_$n}this.animationList=n_$u,this.animationDic=n_$a}},n_$N._clear=function(){var n_$N,n_$C;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(n_$N in this._nodeGDic)(n_$C=this._nodeGDic[n_$N])&&n_$C.recover();this._nodeGDic=null},n_$q.parseAnimationByData=function(n_$N){var n_$C;return n_$q._I||(n_$q._I=new n_$q),n_$C=n_$q._I.parseByData(n_$N),n_$q._I._clear(),n_$C},n_$q.parseAnimationData=function(n_$N){var n_$C;return n_$q._I||(n_$q._I=new n_$q),n_$q._I.setUpAniData(n_$N),(n_$C={}).animationList=n_$q._I.animationList,n_$C.animationDic=n_$q._I.animationDic,n_$q._I._clear(),n_$C},n_$q._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],n_$q._temParam=[],n_$q._I=null,n_$q._rootMatrix=null,n_$V(n_$q,["_tempMt",function(){return this._tempMt=new n_$d}]),n_$q.__init$=function(){n_$s=function(){function n_$N(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return n_$P(n_$N,""),n_$N.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),n_$m.recover("GraphicNode",this)},n_$N.create=function(){return n_$m.getItemByClass("GraphicNode",n_$N)},n_$N}()},n_$q}(n_$vN));n_$c.__init([n_$A,n_$VN,n_$i,n_$R,n_$o,n_$D,n_$N,n_$cN])}(window,document,Laya),function(n_$N,n_$C,n_$a){n_$a.un,n_$a.uns,n_$a.static;var n_$u=n_$a.class;n_$a.getset,n_$a.__newvec;new(function(){function n_$N(){}return n_$u(n_$N,"LayaMain"),n_$N}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(n_$N,n_$C){"use strict";for(var n_$a in Object.defineProperty(n_$C,"__esModule",{value:!0}),Laya){var n_$u=Laya[n_$a];n_$u&&n_$u.__isclass&&(n_$C[n_$a]=n_$u)}}),function(n_$N,n_$C,n_$r){n_$r.un,n_$r.uns;var n_$M=n_$r.static,n_$O=n_$r.class,n_$u=n_$r.getset,n_$J=n_$r.__newvec,n_$P=laya.maths.Arith,n_$$=laya.maths.Bezier,n_$a=laya.resource.Bitmap,n_$G=laya.utils.Browser,n_$V=laya.utils.Byte,n_$z=laya.utils.Color,n_$c=(laya.filters.ColorFilter,n_$r.Config),n_$e=laya.resource.Context,n_$E=(laya.events.Event,laya.filters.Filter),n_$n=laya.display.Graphics,n_$A=laya.resource.HTMLCanvas,n_$f=(laya.utils.HTMLChar,laya.resource.HTMLImage),n_$t=laya.resource.HTMLSubImage,n_$F=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),n_$D=laya.maths.Point,n_$s=laya.maths.Rectangle,n_$g=laya.renders.Render,n_$x=(laya.renders.RenderContext,laya.renders.RenderSprite),n_$W=laya.resource.Resource,n_$v=laya.resource.ResourceManager,n_$X=laya.utils.RunDriver,n_$q=laya.display.Sprite,n_$_=laya.display.Stage,n_$d=laya.utils.Stat,n_$Q=laya.utils.StringKey,n_$l=(laya.display.css.Style,laya.system.System),n_$i=laya.display.Text,n_$j=laya.resource.Texture,n_$y=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),n_$T=laya.utils.VectorGraphManager;laya.utils.WordText;n_$r.interface("laya.webgl.shapes.IShape"),n_$r.interface("laya.webgl.submit.ISubmit"),n_$r.interface("laya.webgl.text.ICharSegment"),n_$r.interface("laya.webgl.canvas.save.ISaveData"),n_$r.interface("laya.webgl.resource.IMergeAtlasBitmap"),n_$r.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var n_$L=function(){function n_$N(){}n_$O(n_$N,"laya.filters.webgl.FilterActionGL");var n_$C=n_$N.prototype;return n_$r.imps(n_$C,{"laya.filters.IFilterActionGL":!0}),n_$C.setValue=function(n_$N){},n_$C.setValueMix=function(n_$N){},n_$C.apply3d=function(n_$N,n_$C,n_$a,n_$u,n_$e){return null},n_$C.apply=function(n_$N){return null},n_$u(0,n_$C,"typeMix",function(){return 0}),n_$N}(),n_$R=function(){function n_$N(){}return n_$O(n_$N,"laya.webgl.shader.ShaderValue"),n_$N}(),n_$w=function(){var n_$u,n_$e;function n_$N(n_$N,n_$C,n_$a){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new n_$e,void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),this._cells=null,this._rowInfo=null,this._init(n_$N,n_$C),this._atlasID=n_$a}n_$O(n_$N,"laya.webgl.atlas.AtlasGrid");var n_$C=n_$N.prototype;return n_$C.getAltasID=function(){return this._atlasID},n_$C.setAltasID=function(n_$N){0<=n_$N&&(this._atlasID=n_$N)},n_$C.addTex=function(n_$N,n_$C,n_$a){var n_$u=this._get(n_$C,n_$a);return 0==n_$u.ret||(this._fill(n_$u.x,n_$u.y,n_$C,n_$a,n_$N),this._texCount++),n_$u},n_$C._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},n_$C._init=function(n_$N,n_$C){if(this._width=n_$N,this._height=n_$C,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=n_$J(this._height);for(var n_$a=0;n_$a<this._height;n_$a++)this._rowInfo[n_$a]=new n_$u;return this._clear(),!0},n_$C._get=function(n_$N,n_$C){var n_$a=new n_$Y;if(n_$N>=this._failSize.width&&n_$C>=this._failSize.height)return n_$a;for(var n_$u=-1,n_$e=-1,n_$J=this._width,n_$M=this._height,n_$n=this._cells,n_$V=0;n_$V<n_$M;n_$V++)if(!(this._rowInfo[n_$V].spaceCount<n_$N))for(var n_$A=0;n_$A<n_$J;){var n_$P=3*(n_$V*n_$J+n_$A);if(0!=n_$n[n_$P]||n_$n[1+n_$P]<n_$N||n_$n[2+n_$P]<n_$C)n_$A+=n_$n[1+n_$P];else{n_$u=n_$A,n_$e=n_$V;for(var n_$$=0;n_$$<n_$N;n_$$++)if(n_$n[3*n_$$+n_$P+2]<n_$C){n_$u=-1;break}if(!(n_$u<0))return n_$a.ret=!0,n_$a.x=n_$u,n_$a.y=n_$e,n_$a;n_$A+=n_$n[1+n_$P]}}return n_$a},n_$C._fill=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=this._width,n_$M=this._height;this._check(n_$N+n_$a<=n_$J&&n_$C+n_$u<=n_$M);for(var n_$n=n_$C;n_$n<n_$u+n_$C;++n_$n){this._check(this._rowInfo[n_$n].spaceCount>=n_$a),this._rowInfo[n_$n].spaceCount-=n_$a;for(var n_$V=0;n_$V<n_$a;n_$V++){var n_$A=3*(n_$N+n_$n*n_$J+n_$V);this._check(0==this._cells[n_$A]),this._cells[n_$A]=n_$e,this._cells[1+n_$A]=n_$a,this._cells[2+n_$A]=n_$u}}if(0<n_$N)for(n_$n=0;n_$n<n_$u;++n_$n){var n_$P=0;for(n_$V=n_$N-1;0<=n_$V&&0==this._cells[3*((n_$C+n_$n)*n_$J+n_$V)];--n_$V,++n_$P);for(n_$V=n_$P;0<n_$V;--n_$V)this._cells[3*((n_$C+n_$n)*n_$J+n_$N-n_$V)+1]=n_$V,this._check(0<n_$V)}if(0<n_$C)for(n_$V=n_$N;n_$V<n_$N+n_$a;++n_$V){for(n_$P=0,n_$n=n_$C-1;0<=n_$n&&0==this._cells[3*(n_$V+n_$n*n_$J)];--n_$n,n_$P++);for(n_$n=n_$P;0<n_$n;--n_$n)this._cells[3*(n_$V+(n_$C-n_$n)*n_$J)+2]=n_$n,this._check(0<n_$n)}},n_$C._check=function(n_$N){0==n_$N&&console.log("xtexMerger 错误啦")},n_$C._clear=function(){for(var n_$N=this._texCount=0;n_$N<this._height;n_$N++)this._rowInfo[n_$N].spaceCount=this._width;for(var n_$C=0;n_$C<this._height;n_$C++)for(var n_$a=0;n_$a<this._width;n_$a++){var n_$u=3*(n_$C*this._width+n_$a);this._cells[n_$u]=0,this._cells[1+n_$u]=this._width-n_$a,this._cells[2+n_$u]=this._width-n_$C}this._failSize.width=this._width+1,this._failSize.height=this._height+1},n_$N.__init$=function(){n_$u=function(){function n_$N(){this.spaceCount=0}return n_$O(n_$N,""),n_$N}(),n_$e=function(){function n_$N(){this.width=0,this.height=0}return n_$O(n_$N,""),n_$N}()},n_$N}(),n_$B=function(){function n_$g(n_$N,n_$C,n_$a,n_$u){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=n_$N,this._height=n_$C,this._gridSize=n_$a,this._maxAtlaserCount=n_$u,this._gridNumX=n_$N/n_$a,this._gridNumY=n_$C/n_$a,this._curAtlasIndex=0,this._atlaserArray=[]}n_$O(n_$g,"laya.webgl.atlas.AtlasResourceManager");var n_$N=n_$g.prototype;return n_$N.setAtlasParam=function(n_$N,n_$C,n_$a,n_$u){if(1==this._setAtlasParam)return n_$g._sid_=0,this._width=n_$N,this._height=n_$C,this._gridSize=n_$a,this._maxAtlaserCount=n_$u,this._gridNumX=n_$N/n_$a,this._gridNumY=n_$C/n_$a,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},n_$N.pushData=function(n_$N){var n_$C,n_$a=n_$N.bitmap,n_$u=-1,n_$e=null,n_$J=0,n_$M=0;for(n_$J=0,n_$C=this._atlaserArray.length;n_$J<n_$C&&(n_$M=(this._curAtlasIndex+n_$J)%n_$C,-1==(n_$u=(n_$e=this._atlaserArray[n_$M]).findBitmapIsExist(n_$a)));n_$J++);if(-1!=n_$u){var n_$n=n_$e.InAtlasWebGLImagesOffsetValue[n_$u];return n_$z=n_$n[0],n_$f=n_$n[1],n_$e.addToAtlas(n_$N,n_$z,n_$f),!0}this._setAtlasParam=!1;for(var n_$V=Math.ceil((n_$N.bitmap.width+2)/this._gridSize),n_$A=Math.ceil((n_$N.bitmap.height+2)/this._gridSize),n_$P=!1,n_$$=0;n_$$<2;n_$$++){var n_$O=this._maxAtlaserCount;for(n_$J=0;n_$J<n_$O;n_$J++){n_$M=(this._curAtlasIndex+n_$J)%n_$O,this._atlaserArray.length-1>=n_$M||this._atlaserArray.push(new n_$sN(this._gridNumX,this._gridNumY,this._width,this._height,n_$g._sid_++));var n_$G=this._atlaserArray[n_$M],n_$z=0,n_$f=0,n_$t=n_$G.addTex(1,n_$V,n_$A);if(n_$t.ret){n_$z=n_$t.x*this._gridSize+1,n_$f=n_$t.y*this._gridSize+1,n_$a.lock=!0,n_$G.addToAtlasTexture(n_$a,n_$z,n_$f),n_$G.addToAtlas(n_$N,n_$z,n_$f),n_$P=!0,this._curAtlasIndex=n_$M;break}}if(n_$P)break;this._atlaserArray.push(new n_$sN(this._gridNumX,this._gridNumY,this._width,this._height,n_$g._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return n_$P||console.log(">>>AtlasManager pushData error"),n_$P},n_$N.addToAtlas=function(n_$N){laya.webgl.atlas.AtlasResourceManager.instance.pushData(n_$N)},n_$N.garbageCollection=function(){if(!0===this._needGC){for(var n_$N=this._atlaserArray.length-this._maxAtlaserCount,n_$C=0;n_$C<n_$N;n_$C++)this._atlaserArray[n_$C].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+n_$N),this._atlaserArray.splice(0,n_$N),this._needGC=!1}return!0},n_$N.freeAll=function(){for(var n_$N=0,n_$C=this._atlaserArray.length;n_$N<n_$C;n_$N++)this._atlaserArray[n_$N].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},n_$N.getAtlaserCount=function(){return this._atlaserArray.length},n_$N.getAtlaserByIndex=function(n_$N){return this._atlaserArray[n_$N]},n_$u(1,n_$g,"instance",function(){return n_$g._Instance||(n_$g._Instance=new n_$g(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),n_$g._Instance}),n_$u(1,n_$g,"enabled",function(){return n_$c.atlasEnable}),n_$u(1,n_$g,"atlasLimitWidth",function(){return n_$g._atlasLimitWidth},function(n_$N){n_$g._atlasLimitWidth=n_$N}),n_$u(1,n_$g,"atlasLimitHeight",function(){return n_$g._atlasLimitHeight},function(n_$N){n_$g._atlasLimitHeight=n_$N}),n_$g._enable=function(){n_$c.atlasEnable=!0},n_$g._disable=function(){n_$c.atlasEnable=!1},n_$g.__init__=function(){n_$g.atlasTextureWidth=2048,n_$g.atlasTextureHeight=2048,n_$g.maxTextureCount=6,n_$g.atlasLimitWidth=512,n_$g.atlasLimitHeight=512},n_$g._atlasLimitWidth=0,n_$g._atlasLimitHeight=0,n_$g.gridSize=16,n_$g.atlasTextureWidth=0,n_$g.atlasTextureHeight=0,n_$g.maxTextureCount=0,n_$g._atlasRestore=0,n_$g.BOARDER_TYPE_NO=0,n_$g.BOARDER_TYPE_RIGHT=1,n_$g.BOARDER_TYPE_LEFT=2,n_$g.BOARDER_TYPE_BOTTOM=4,n_$g.BOARDER_TYPE_TOP=8,n_$g.BOARDER_TYPE_ALL=15,n_$g._sid_=0,n_$g._Instance=null,n_$g}(),n_$Y=function(){function n_$N(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return n_$O(n_$N,"laya.webgl.atlas.MergeFillInfo"),n_$N}(),n_$K=function(){function n_$C(){}return n_$O(n_$C,"laya.webgl.canvas.BlendMode"),n_$C._init_=function(n_$N){n_$C.fns=[n_$C.BlendNormal,n_$C.BlendAdd,n_$C.BlendMultiply,n_$C.BlendScreen,n_$C.BlendOverlay,n_$C.BlendLight,n_$C.BlendMask,n_$C.BlendDestinationOut],n_$C.targetFns=[n_$C.BlendNormalTarget,n_$C.BlendAddTarget,n_$C.BlendMultiplyTarget,n_$C.BlendScreenTarget,n_$C.BlendOverlayTarget,n_$C.BlendLightTarget,n_$C.BlendMask,n_$C.BlendDestinationOut]},n_$C.BlendNormal=function(n_$N){n_$N.blendFunc(1,771)},n_$C.BlendAdd=function(n_$N){n_$N.blendFunc(1,772)},n_$C.BlendMultiply=function(n_$N){n_$N.blendFunc(774,771)},n_$C.BlendScreen=function(n_$N){n_$N.blendFunc(1,1)},n_$C.BlendOverlay=function(n_$N){n_$N.blendFunc(1,769)},n_$C.BlendLight=function(n_$N){n_$N.blendFunc(1,1)},n_$C.BlendNormalTarget=function(n_$N){n_$N.blendFunc(1,771)},n_$C.BlendAddTarget=function(n_$N){n_$N.blendFunc(1,772)},n_$C.BlendMultiplyTarget=function(n_$N){n_$N.blendFunc(774,771)},n_$C.BlendScreenTarget=function(n_$N){n_$N.blendFunc(1,1)},n_$C.BlendOverlayTarget=function(n_$N){n_$N.blendFunc(1,769)},n_$C.BlendLightTarget=function(n_$N){n_$N.blendFunc(1,1)},n_$C.BlendMask=function(n_$N){n_$N.blendFunc(0,770)},n_$C.BlendDestinationOut=function(n_$N){n_$N.blendFunc(0,0)},n_$C.activeBlendFunction=null,n_$C.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],n_$C.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},n_$C.NORMAL="normal",n_$C.ADD="add",n_$C.MULTIPLY="multiply",n_$C.SCREEN="screen",n_$C.LIGHT="light",n_$C.OVERLAY="overlay",n_$C.DESTINATIONOUT="destination-out",n_$C.fns=[],n_$C.targetFns=[],n_$C}(),n_$k=function(){function n_$a(n_$N){this._color=n_$z.create("black"),this.setValue(n_$N)}n_$O(n_$a,"laya.webgl.canvas.DrawStyle");var n_$N=n_$a.prototype;return n_$N.setValue=function(n_$N){if(n_$N){if("string"==typeof n_$N)return void(this._color=n_$z.create(n_$N));if(n_$N instanceof laya.utils.Color)return void(this._color=n_$N)}},n_$N.reset=function(){this._color=n_$z.create("black")},n_$N.equal=function(n_$N){return"string"==typeof n_$N?this._color.strColor===n_$N:n_$N instanceof laya.utils.Color&&this._color.numColor===n_$N.numColor},n_$N.toColorStr=function(){return this._color.strColor},n_$a.create=function(n_$N){var n_$C;if(n_$N&&("string"==typeof n_$N?n_$C=n_$z.create(n_$N):n_$N instanceof laya.utils.Color&&(n_$C=n_$N),n_$C))return n_$C._drawStyle||(n_$C._drawStyle=new n_$a(n_$N));return laya.webgl.canvas.DrawStyle.DEFAULT},n_$M(n_$a,["DEFAULT",function(){return this.DEFAULT=new n_$a("#000000")}]),n_$a}(),n_$S=function(){function n_$N(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];n_$vN.mainContext;this.ib=n_$hN.create(35048),this.vb=n_$UN.create(5)}n_$O(n_$N,"laya.webgl.canvas.Path");var n_$C=n_$N.prototype;return n_$C.addPoint=function(n_$N,n_$C){this.tempArray.push(n_$N,n_$C)},n_$C.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},n_$C.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},n_$C.polygon=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M;return this.geomatrys.push(this._curGeomatry=n_$M=new n_$QN(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)),n_$u||(n_$M.fill=!1),null==n_$J&&(n_$M.borderWidth=0),n_$M},n_$C.setGeomtry=function(n_$N){this.geomatrys.push(this._curGeomatry=n_$N)},n_$C.drawLine=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J;return this.closePath?this.geomatrys.push(this._curGeomatry=n_$J=new n_$dN(n_$N,n_$C,n_$a,n_$u,n_$e)):this.geomatrys.push(this._curGeomatry=n_$J=new n_$_N(n_$N,n_$C,n_$a,n_$u,n_$e)),n_$J.fill=!1,n_$J},n_$C.update=function(){var n_$N=this.ib._byteLength,n_$C=this.geomatrys.length;this.offset=n_$N;for(var n_$a=this.geoStart;n_$a<n_$C;n_$a++)this.geomatrys[n_$a].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=n_$C,this.count=(this.ib._byteLength-n_$N)/n_$fN.BYTES_PIDX},n_$C.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},n_$C.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},n_$N}(),n_$p=function(){function n_$n(){}n_$O(n_$n,"laya.webgl.canvas.save.SaveBase");var n_$N=n_$n.prototype;return n_$r.imps(n_$N,{"laya.webgl.canvas.save.ISaveData":!0}),n_$N.isSaveMark=function(){return!1},n_$N.restore=function(n_$N){this._dataObj[this._valueName]=this._value,(n_$n._cache[n_$n._cache._length++]=this)._newSubmit&&(n_$N._curSubmit=n_$JN.RENDERBASE,n_$N._renderKey=0)},n_$n._createArray=function(){var n_$N=[];return n_$N._length=0,n_$N},n_$n._init=function(){var n_$N=n_$n._namemap={};return n_$N[1]="ALPHA",n_$N[2]="fillStyle",n_$N[8]="font",n_$N[256]="lineWidth",n_$N[512]="strokeStyle",n_$N[8192]="_mergeID",n_$N[1024]=n_$N[2048]=n_$N[4096]=[],n_$N[16384]="textBaseline",n_$N[32768]="textAlign",n_$N[65536]="_nBlendType",n_$N[1048576]="shader",n_$N[2097152]="filters",n_$N},n_$n.save=function(n_$N,n_$C,n_$a,n_$u){if((n_$N._saveMark._saveuse&n_$C)!==n_$C){n_$N._saveMark._saveuse|=n_$C;var n_$e=n_$n._cache,n_$J=0<n_$e._length?n_$e[--n_$e._length]:new n_$n;n_$J._value=n_$a[n_$J._valueName=n_$n._namemap[n_$C]],n_$J._dataObj=n_$a,n_$J._newSubmit=n_$u;var n_$M=n_$N._save;n_$M[n_$M._length++]=n_$J}},n_$n._cache=laya.webgl.canvas.save.SaveBase._createArray(),n_$n._namemap=n_$n._init(),n_$n}(),n_$m=function(){function n_$J(){this._clipRect=new n_$s}n_$O(n_$J,"laya.webgl.canvas.save.SaveClipRect");var n_$N=n_$J.prototype;return n_$r.imps(n_$N,{"laya.webgl.canvas.save.ISaveData":!0}),n_$N.isSaveMark=function(){return!1},n_$N.restore=function(n_$N){n_$N._clipRect=this._clipSaveRect,(n_$J._cache[n_$J._cache._length++]=this)._submitScissor.submitLength=n_$N._submits._length-this._submitScissor.submitIndex,n_$N._curSubmit=n_$JN.RENDERBASE,n_$N._renderKey=0},n_$J.save=function(n_$N,n_$C){if(131072!=(131072&n_$N._saveMark._saveuse)){n_$N._saveMark._saveuse|=131072;var n_$a=n_$J._cache,n_$u=0<n_$a._length?n_$a[--n_$a._length]:new n_$J;n_$u._clipSaveRect=n_$N._clipRect,n_$N._clipRect=n_$u._clipRect.copyFrom(n_$N._clipRect),n_$u._submitScissor=n_$C;var n_$e=n_$N._save;n_$e[n_$e._length++]=n_$u}},n_$M(n_$J,["_cache",function(){return this._cache=n_$p._createArray()}]),n_$J}(),n_$b=function(){function n_$G(){this._contextX=0,this._contextY=0,this._clipRect=new n_$s,this._rect=new n_$s,this._matrix=new n_$F}n_$O(n_$G,"laya.webgl.canvas.save.SaveClipRectStencil");var n_$N=n_$G.prototype;return n_$r.imps(n_$N,{"laya.webgl.canvas.save.ISaveData":!0}),n_$N.isSaveMark=function(){return!1},n_$N.restore=function(n_$N){n_$PN.restore(n_$N,this._rect,this._saveMatrix,this._contextX,this._contextY),n_$N._clipRect=this._clipSaveRect,n_$N._curMat=this._saveMatrix,n_$N._x=this._contextX,n_$N._y=this._contextY,n_$G._cache[n_$G._cache._length++]=this,n_$N._curSubmit=n_$JN.RENDERBASE},n_$G.save=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){if(262144!=(262144&n_$N._saveMark._saveuse)){n_$N._saveMark._saveuse|=262144;var n_$P=n_$G._cache,n_$$=0<n_$P._length?n_$P[--n_$P._length]:new n_$G;n_$$._clipSaveRect=n_$N._clipRect,n_$$._clipRect.setTo(n_$M,n_$n,n_$V,n_$A),n_$N._clipRect=n_$$._clipRect,n_$$._rect.x=n_$a,n_$$._rect.y=n_$u,n_$$._rect.width=n_$e,n_$$._rect.height=n_$J,n_$$._contextX=n_$N._x,n_$$._contextY=n_$N._y,n_$$._saveMatrix=n_$N._curMat,n_$N._curMat.copyTo(n_$$._matrix),n_$N._curMat=n_$$._matrix,n_$$._submitStencil=n_$C;var n_$O=n_$N._save;n_$O[n_$O._length++]=n_$$}},n_$M(n_$G,["_cache",function(){return this._cache=n_$p._createArray()}]),n_$G}(),n_$o=function(){function n_$u(){this._saveuse=0}n_$O(n_$u,"laya.webgl.canvas.save.SaveMark");var n_$N=n_$u.prototype;return n_$r.imps(n_$N,{"laya.webgl.canvas.save.ISaveData":!0}),n_$N.isSaveMark=function(){return!0},n_$N.restore=function(n_$N){n_$N._saveMark=this._preSaveMark,n_$u._no[n_$u._no._length++]=this},n_$u.Create=function(n_$N){var n_$C=n_$u._no,n_$a=0<n_$C._length?n_$C[--n_$C._length]:new n_$u;return n_$a._saveuse=0,n_$a._preSaveMark=n_$N._saveMark,n_$N._saveMark=n_$a},n_$M(n_$u,["_no",function(){return this._no=n_$p._createArray()}]),n_$u}(),n_$H=function(){function n_$J(){this._matrix=new n_$F}n_$O(n_$J,"laya.webgl.canvas.save.SaveTransform");var n_$N=n_$J.prototype;return n_$r.imps(n_$N,{"laya.webgl.canvas.save.ISaveData":!0}),n_$N.isSaveMark=function(){return!1},n_$N.restore=function(n_$N){n_$N._curMat=this._savematrix,n_$J._no[n_$J._no._length++]=this},n_$J.save=function(n_$N){var n_$C=n_$N._saveMark;if(2048!=(2048&n_$C._saveuse)){n_$C._saveuse|=2048;var n_$a=n_$J._no,n_$u=0<n_$a._length?n_$a[--n_$a._length]:new n_$J;n_$u._savematrix=n_$N._curMat,n_$N._curMat=n_$N._curMat.copyTo(n_$u._matrix);var n_$e=n_$N._save;n_$e[n_$e._length++]=n_$u}},n_$M(n_$J,["_no",function(){return this._no=n_$p._createArray()}]),n_$J}(),n_$I=function(){function n_$e(){}n_$O(n_$e,"laya.webgl.canvas.save.SaveTranslate");var n_$N=n_$e.prototype;return n_$r.imps(n_$N,{"laya.webgl.canvas.save.ISaveData":!0}),n_$N.isSaveMark=function(){return!1},n_$N.restore=function(n_$N){n_$N._curMat;n_$N._x=this._x,n_$N._y=this._y,n_$e._no[n_$e._no._length++]=this},n_$e.save=function(n_$N){var n_$C=n_$e._no,n_$a=0<n_$C._length?n_$C[--n_$C._length]:new n_$e;n_$a._x=n_$N._x,n_$a._y=n_$N._y;var n_$u=n_$N._save;n_$u[n_$u._length++]=n_$a},n_$M(n_$e,["_no",function(){return this._no=n_$p._createArray()}]),n_$e}(),n_$Z=function(){function n_$N(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new n_$s}n_$O(n_$N,"laya.webgl.resource.RenderTargetMAX");var n_$C=n_$N.prototype;return n_$C.setSP=function(n_$N){this._sp=n_$N},n_$C.size=function(n_$N,n_$C){var n_$a=this;this._width!==n_$N||this._height!==n_$C?(this.repaint=!0,this._width=n_$N,this._height=n_$C,this.target?this.target.size(n_$N,n_$C):this.target=n_$TN.create(n_$N,n_$C),this.target.hasListener("recovered")||this.target.on("recovered",this,function(n_$N){n_$r.timer.callLater(n_$a._sp,n_$a._sp.repaint)})):this.target.size(n_$N,n_$C)},n_$C._flushToTarget=function(n_$N,n_$C){if(!n_$C._destroy){var n_$a=n_$xN.worldScissorTest,n_$u=n_$xN.worldClipRect;n_$xN.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,n_$xN.worldScissorTest=!1,n_$vN.mainContext.disable(3089);var n_$e=n_$xN.worldAlpha,n_$J=n_$xN.worldMatrix4,n_$M=n_$xN.worldMatrix,n_$n=n_$xN.worldFilters,n_$V=n_$xN.worldShaderDefines;if(n_$xN.worldMatrix=n_$F.EMPTY,n_$xN.restoreTempArray(),n_$xN.worldMatrix4=n_$xN.TEMPMAT4_ARRAY,n_$xN.worldAlpha=1,n_$xN.worldFilters=null,n_$xN.worldShaderDefines=null,n_$yN.activeShader=null,n_$C.start(),n_$c.showCanvasMark?n_$C.clear(0,1,0,.3):n_$C.clear(0,0,0,0),n_$N.flush(),n_$C.end(),n_$yN.activeShader=null,n_$xN.worldAlpha=n_$e,n_$xN.worldMatrix4=n_$J,n_$xN.worldMatrix=n_$M,n_$xN.worldFilters=n_$n,n_$xN.worldShaderDefines=n_$V,n_$xN.worldScissorTest=n_$a){var n_$A=n_$xN.height-n_$u.y-n_$u.height;n_$vN.mainContext.scissor(n_$u.x,n_$A,n_$u.width,n_$u.height),n_$vN.mainContext.enable(3089)}n_$xN.worldClipRect=n_$u}},n_$C.flush=function(n_$N){this.repaint&&(this._flushToTarget(n_$N,this.target),this.repaint=!1)},n_$C.drawTo=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$N.drawTexture(this.target.getTexture(),n_$C,n_$a,n_$u,n_$e,0,0)},n_$C.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},n_$N}(),n_$h=function(){function n_$N(){this.ALPHA=1,this.shaderType=0,this.defines=new n_$qN}return n_$O(n_$N,"laya.webgl.shader.d2.Shader2D"),n_$N.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},n_$N.__init__=function(){var n_$N,n_$C;n_$oN.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),n_$oN.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),n_$oN.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),n_$oN.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),n_$oN.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),n_$oN.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),n_$oN.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),n_$oN.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),n_$N="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",n_$C='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',n_$oN.preCompile2D(0,1,n_$N,n_$C,null),n_$N="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",n_$C='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',n_$oN.preCompile2D(0,2,n_$N,n_$C,null),n_$N="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",n_$C="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",n_$oN.preCompile2D(0,4,n_$N,n_$C,null),n_$N="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",n_$C='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',n_$oN.preCompile2D(0,256,n_$N,n_$C,null),n_$N="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",n_$C="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",n_$oN.preCompile2D(0,512,n_$N,n_$C,null)},n_$N}(),n_$U=function(){function n_$C(n_$N,n_$C,n_$a){this._value=0,this._name2int=n_$N,this._int2name=n_$C,this._int2nameMap=n_$a}n_$O(n_$C,"laya.webgl.shader.ShaderDefines");var n_$N=n_$C.prototype;return n_$N.add=function(n_$N){return"string"==typeof n_$N&&(n_$N=this._name2int[n_$N]),this._value|=n_$N,this._value},n_$N.addInt=function(n_$N){return this._value|=n_$N,this._value},n_$N.remove=function(n_$N){return"string"==typeof n_$N&&(n_$N=this._name2int[n_$N]),this._value&=~n_$N,this._value},n_$N.isDefine=function(n_$N){return(this._value&n_$N)===n_$N},n_$N.getValue=function(){return this._value},n_$N.setValue=function(n_$N){this._value=n_$N},n_$N.toNameDic=function(){var n_$N=this._int2nameMap[this._value];return n_$N||n_$C._toText(this._value,this._int2name,this._int2nameMap)},n_$C._reg=function(n_$N,n_$C,n_$a,n_$u){n_$u[n_$a[n_$N]=n_$C]=n_$N},n_$C._toText=function(n_$N,n_$C,n_$a){var n_$u=n_$a[n_$N];if(n_$u)return n_$u;for(var n_$e={},n_$J=1,n_$M=0;n_$M<32&&!(n_$N<(n_$J=1<<n_$M));n_$M++)if(n_$N&n_$J){var n_$n=n_$C[n_$J];n_$n&&(n_$e[n_$n]="")}return n_$a[n_$N]=n_$e},n_$C._toInt=function(n_$N,n_$C){for(var n_$a=n_$N.split("."),n_$u=0,n_$e=0,n_$J=n_$a.length;n_$e<n_$J;n_$e++){var n_$M=n_$C[n_$a[n_$e]];if(!n_$M)throw new Error("Defines to int err:"+n_$N+"/"+n_$a[n_$e]);n_$u|=n_$M}return n_$u},n_$C}(),n_$NN=function(){function n_$M(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new n_$F}n_$O(n_$M,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var n_$N=n_$M.prototype;return n_$N.init=function(n_$N,n_$C,n_$a){if(n_$C)this._vs=n_$C;else{this._vs=[];var n_$u=n_$N.width,n_$e=n_$N.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(n_$u,0,1,0,1,1,1,1),this._vs.push(n_$u,n_$e,1,1,1,1,1,1),this._vs.push(0,n_$e,0,1,1,1,1,1)}n_$a?this._ps=n_$a:(n_$M._defaultPS||(n_$M._defaultPS=[]).push(0,1,3,3,1,2),this._ps=n_$M._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=n_$N},n_$N.init2=function(n_$N,n_$C,n_$a,n_$u,n_$e){this.transform&&(this.transform=null),n_$a?this._ps=n_$a:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=n_$u,this._uvs=n_$e,this.mEleNum=this._ps.length,this.mTexture=n_$N,(n_$g.isConchNode||n_$g.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},n_$N._initMyData=function(){var n_$N=0,n_$C=0,n_$a=4*this._verticles.length;this._vs=n_$M._tempVS;var n_$u=!1;if(n_$g.isConchNode||n_$g.isConchApp?(this._vs.length=n_$a,n_$u=!0):this._vs.length<n_$a&&(this._vs.length=n_$a,n_$u=!0),n_$M._tVSLen=n_$a,n_$u)for(;n_$N<n_$a;)this._vs[n_$N]=this._verticles[n_$C],this._vs[n_$N+1]=this._verticles[n_$C+1],this._vs[n_$N+2]=this._uvs[n_$C],this._vs[n_$N+3]=this._uvs[n_$C+1],this._vs[n_$N+4]=1,this._vs[n_$N+5]=1,this._vs[n_$N+6]=1,this._vs[n_$N+7]=1,n_$N+=8,n_$C+=2;else for(;n_$N<n_$a;)this._vs[n_$N]=this._verticles[n_$C],this._vs[n_$N+1]=this._verticles[n_$C+1],this._vs[n_$N+2]=this._uvs[n_$C],this._vs[n_$N+3]=this._uvs[n_$C+1],n_$N+=8,n_$C+=2},n_$N.getData2=function(n_$N,n_$C,n_$a){var n_$u;this.mVBBuffer=n_$N,this.mIBBuffer=n_$C,this._initMyData(),n_$N.appendEx2(this._vs,Float32Array,n_$M._tVSLen,4),this._indexStart=n_$C._byteLength,(n_$u=n_$M._tempIB).length<this._ps.length&&(n_$u.length=this._ps.length);for(var n_$e=0,n_$J=this._ps.length;n_$e<n_$J;n_$e++)n_$u[n_$e]=this._ps[n_$e]+n_$a;n_$C.appendEx2(n_$u,Uint16Array,this._ps.length,2)},n_$N.getData=function(n_$N,n_$C,n_$a){if(this.mVBBuffer=n_$N,this.mIBBuffer=n_$C,n_$N.append(this.mVBData),this._indexStart=n_$C._byteLength,this.mIBData.start!=n_$a){for(var n_$u=0,n_$e=this._ps.length;n_$u<n_$e;n_$u++)this.mIBData[n_$u]=this._ps[n_$u]+n_$a;this.mIBData.start=n_$a}n_$C.append(this.mIBData)},n_$N.render=function(n_$N,n_$C,n_$a){if(n_$g.isWebGL&&this.mTexture){n_$N._renderKey=0,n_$N._shader2D.glTexture=null,n_$CN.getInstance().addSkinMesh(this);var n_$u=n_$JN.createShape(n_$N,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,n_$EN.create(512,0));this.transform||(this.transform=n_$F.EMPTY),this.transform.translate(n_$C,n_$a),n_$F.mul(this.transform,n_$N._curMat,this._tempMatrix),this.transform.translate(-n_$C,-n_$a);var n_$e=n_$u.shaderValue,n_$J=n_$e.u_mmat2||n_$xN.getMatrArray();n_$xN.mat2MatArray(this._tempMatrix,n_$J),n_$e.textureHost=this.mTexture,n_$e.offsetX=0,n_$e.offsetY=0,n_$e.u_mmat2=n_$J,n_$e.ALPHA=n_$N._shader2D.ALPHA,n_$N._submits[n_$N._submits._length++]=n_$u}else n_$g.isConchApp&&this.mTexture&&(this.transform||(this.transform=n_$F.EMPTY),n_$N.setSkinMesh&&n_$N.setSkinMesh(n_$C,n_$a,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},n_$M._tempVS=[],n_$M._tempIB=[],n_$M._defaultPS=null,n_$M._tVSLen=0,n_$M}(),n_$CN=function(){function n_$N(){this.ib=null,this.vb=null;n_$vN.mainContext;this.ib=n_$hN.create(35048),this.vb=n_$UN.create(8)}n_$O(n_$N,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var n_$C=n_$N.prototype;return n_$C.addSkinMesh=function(n_$N){n_$N.getData2(this.vb,this.ib,this.vb._byteLength/32)},n_$C.reset=function(){this.vb.clear(),this.ib.clear()},n_$N.getInstance=function(){return n_$N.instance=n_$N.instance||new n_$N},n_$N.instance=null,n_$N}(),n_$aN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===n_$V&&(n_$V=0),this.x=n_$N,this.y=n_$C,this.width=n_$a,this.height=n_$u,this.edges=n_$e,this.color=n_$J,this.borderWidth=n_$M,this.borderColor=n_$n}n_$O(n_$N,"laya.webgl.shapes.BasePoly");var n_$C=n_$N.prototype;return n_$r.imps(n_$C,{"laya.webgl.shapes.IShape":!0}),n_$C.getData=function(n_$N,n_$C,n_$a){},n_$C.rebuild=function(n_$N){},n_$C.setMatrix=function(n_$N){},n_$C.needUpdate=function(n_$N){return!0},n_$C.sector=function(n_$N,n_$C,n_$a){var n_$u=this.x,n_$e=this.y,n_$J=this.edges,n_$M=(this.r1-this.r0)/n_$J,n_$n=this.width,n_$V=this.height,n_$A=this.color,n_$P=(n_$A>>16&255)/255,n_$$=(n_$A>>8&255)/255,n_$O=(255&n_$A)/255;n_$N.push(n_$u,n_$e,n_$P,n_$$,n_$O);for(var n_$G=0;n_$G<n_$J+1;n_$G++)n_$N.push(n_$u+Math.sin(n_$M*n_$G+this.r0)*n_$n,n_$e+Math.cos(n_$M*n_$G+this.r0)*n_$V),n_$N.push(n_$P,n_$$,n_$O);for(n_$G=0;n_$G<n_$J;n_$G++)n_$C.push(n_$a,n_$a+n_$G+1,n_$a+n_$G+2)},n_$C.createLine2=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M,n_$n,n_$V,n_$A,n_$P,n_$$,n_$O,n_$G,n_$z,n_$f,n_$t,n_$g,n_$x,n_$W,n_$v,n_$X,n_$r,n_$c,n_$E,n_$F,n_$D=n_$N.concat(),n_$s=n_$e,n_$q=this.borderColor,n_$_=(n_$q>>16&255)/255,n_$d=(n_$q>>8&255)/255,n_$Q=(255&n_$q)/255,n_$l=n_$D.length/2,n_$i=n_$u,n_$j=n_$a/2;n_$V=n_$D[0],n_$A=n_$D[1],n_$f=n_$V-(n_$P=n_$D[2]),n_$z=(n_$z=-(n_$A-(n_$$=n_$D[3])))/(n_$F=Math.sqrt(n_$z*n_$z+n_$f*n_$f))*n_$j,n_$f=n_$f/n_$F*n_$j,n_$s.push(n_$V-n_$z+this.x,n_$A-n_$f+this.y,n_$_,n_$d,n_$Q,n_$V+n_$z+this.x,n_$A+n_$f+this.y,n_$_,n_$d,n_$Q);for(var n_$y=1;n_$y<n_$l-1;n_$y++)n_$V=n_$D[2*(n_$y-1)],n_$A=n_$D[2*(n_$y-1)+1],n_$P=n_$D[2*n_$y],n_$$=n_$D[2*n_$y+1],n_$O=n_$D[2*(n_$y+1)],n_$G=n_$D[2*(n_$y+1)+1],n_$f=n_$V-n_$P,n_$g=n_$P-n_$O,n_$v=(-(n_$z=(n_$z=-(n_$A-n_$$))/(n_$F=Math.sqrt(n_$z*n_$z+n_$f*n_$f))*n_$j)+n_$V)*(-(n_$f=n_$f/n_$F*n_$j)+n_$$)-(-n_$z+n_$P)*(-n_$f+n_$A),n_$c=(-(n_$t=(n_$t=-(n_$$-n_$G))/(n_$F=Math.sqrt(n_$t*n_$t+n_$g*n_$g))*n_$j)+n_$O)*(-(n_$g=n_$g/n_$F*n_$j)+n_$$)-(-n_$t+n_$P)*(-n_$g+n_$G),n_$E=(n_$x=-n_$f+n_$A-(-n_$f+n_$$))*(n_$r=-n_$t+n_$P-(-n_$t+n_$O))-(n_$X=-n_$g+n_$G-(-n_$g+n_$$))*(n_$W=-n_$z+n_$P-(-n_$z+n_$V)),Math.abs(n_$E)<.1?(n_$E+=10.1,n_$s.push(n_$P-n_$z+this.x,n_$$-n_$f+this.y,n_$_,n_$d,n_$Q,n_$P+n_$z+this.x,n_$$+n_$f+this.y,n_$_,n_$d,n_$Q)):(((n_$M=(n_$W*n_$c-n_$r*n_$v)/n_$E)-n_$P)*(n_$M-n_$P)+((n_$n=(n_$X*n_$v-n_$x*n_$c)/n_$E)-n_$$)+(n_$n-n_$$),n_$s.push(n_$M+this.x,n_$n+this.y,n_$_,n_$d,n_$Q,n_$P-(n_$M-n_$P)+this.x,n_$$-(n_$n-n_$$)+this.y,n_$_,n_$d,n_$Q));n_$V=n_$D[n_$D.length-4],n_$A=n_$D[n_$D.length-3],n_$f=n_$V-(n_$P=n_$D[n_$D.length-2]),n_$z=(n_$z=-(n_$A-(n_$$=n_$D[n_$D.length-1])))/(n_$F=Math.sqrt(n_$z*n_$z+n_$f*n_$f))*n_$j,n_$f=n_$f/n_$F*n_$j,n_$s.push(n_$P-n_$z+this.x,n_$$-n_$f+this.y,n_$_,n_$d,n_$Q,n_$P+n_$z+this.x,n_$$+n_$f+this.y,n_$_,n_$d,n_$Q);var n_$T=n_$J;for(n_$y=1;n_$y<n_$T;n_$y++)n_$C.push(n_$i+2*(n_$y-1),n_$i+2*(n_$y-1)+1,n_$i+2*n_$y+1,n_$i+2*n_$y+1,n_$i+2*n_$y,n_$i+2*(n_$y-1));return n_$s},n_$C.createLine=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.concat(),n_$J=n_$N,n_$M=this.borderColor,n_$n=(n_$M>>16&255)/255,n_$V=(n_$M>>8&255)/255,n_$A=(255&n_$M)/255;n_$e.splice(0,5);var n_$P,n_$$,n_$O,n_$G,n_$z,n_$f,n_$t,n_$g,n_$x,n_$W,n_$v,n_$X,n_$r,n_$c,n_$E,n_$F,n_$D,n_$s,n_$q,n_$_,n_$d=n_$e.length/5,n_$Q=n_$u,n_$l=n_$a/2;n_$O=n_$e[0],n_$G=n_$e[1],n_$W=n_$O-(n_$z=n_$e[5]),n_$x=(n_$x=-(n_$G-(n_$f=n_$e[6])))/(n_$_=Math.sqrt(n_$x*n_$x+n_$W*n_$W))*n_$l,n_$W=n_$W/n_$_*n_$l,n_$J.push(n_$O-n_$x,n_$G-n_$W,n_$n,n_$V,n_$A,n_$O+n_$x,n_$G+n_$W,n_$n,n_$V,n_$A);for(var n_$i=1;n_$i<n_$d-1;n_$i++)n_$O=n_$e[5*(n_$i-1)],n_$G=n_$e[5*(n_$i-1)+1],n_$z=n_$e[5*n_$i],n_$f=n_$e[5*n_$i+1],n_$t=n_$e[5*(n_$i+1)],n_$g=n_$e[5*(n_$i+1)+1],n_$W=n_$O-n_$z,n_$X=n_$z-n_$t,n_$E=(-(n_$x=(n_$x=-(n_$G-n_$f))/(n_$_=Math.sqrt(n_$x*n_$x+n_$W*n_$W))*n_$l)+n_$O)*(-(n_$W=n_$W/n_$_*n_$l)+n_$f)-(-n_$x+n_$z)*(-n_$W+n_$G),n_$s=(-(n_$v=(n_$v=-(n_$f-n_$g))/(n_$_=Math.sqrt(n_$v*n_$v+n_$X*n_$X))*n_$l)+n_$t)*(-(n_$X=n_$X/n_$_*n_$l)+n_$f)-(-n_$v+n_$z)*(-n_$X+n_$g),n_$q=(n_$r=-n_$W+n_$G-(-n_$W+n_$f))*(n_$D=-n_$v+n_$z-(-n_$v+n_$t))-(n_$F=-n_$X+n_$g-(-n_$X+n_$f))*(n_$c=-n_$x+n_$z-(-n_$x+n_$O)),Math.abs(n_$q)<.1?(n_$q+=10.1,n_$J.push(n_$z-n_$x,n_$f-n_$W,n_$n,n_$V,n_$A,n_$z+n_$x,n_$f+n_$W,n_$n,n_$V,n_$A)):(((n_$P=(n_$c*n_$s-n_$D*n_$E)/n_$q)-n_$z)*(n_$P-n_$z)+((n_$$=(n_$F*n_$E-n_$r*n_$s)/n_$q)-n_$f)+(n_$$-n_$f),n_$J.push(n_$P,n_$$,n_$n,n_$V,n_$A,n_$z-(n_$P-n_$z),n_$f-(n_$$-n_$f),n_$n,n_$V,n_$A));n_$O=n_$e[n_$e.length-10],n_$G=n_$e[n_$e.length-9],n_$W=n_$O-(n_$z=n_$e[n_$e.length-5]),n_$x=(n_$x=-(n_$G-(n_$f=n_$e[n_$e.length-4])))/(n_$_=Math.sqrt(n_$x*n_$x+n_$W*n_$W))*n_$l,n_$W=n_$W/n_$_*n_$l,n_$J.push(n_$z-n_$x,n_$f-n_$W,n_$n,n_$V,n_$A,n_$z+n_$x,n_$f+n_$W,n_$n,n_$V,n_$A);var n_$j=this.edges+1;for(n_$i=1;n_$i<n_$j;n_$i++)n_$C.push(n_$Q+2*(n_$i-1),n_$Q+2*(n_$i-1)+1,n_$Q+2*n_$i+1,n_$Q+2*n_$i+1,n_$Q+2*n_$i,n_$Q+2*(n_$i-1));return n_$J},n_$C.createLoopLine=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$N.concat(),n_$n=n_$e||n_$N,n_$V=this.borderColor,n_$A=(n_$V>>16&255)/255,n_$P=(n_$V>>8&255)/255,n_$$=(255&n_$V)/255;n_$M.splice(0,5);var n_$O=[n_$M[0],n_$M[1]],n_$G=[n_$M[n_$M.length-5],n_$M[n_$M.length-4]],n_$z=n_$G[0]+.5*(n_$O[0]-n_$G[0]),n_$f=n_$G[1]+.5*(n_$O[1]-n_$G[1]);n_$M.unshift(n_$z,n_$f,0,0,0),n_$M.push(n_$z,n_$f,0,0,0);var n_$t,n_$g,n_$x,n_$W,n_$v,n_$X,n_$r,n_$c,n_$E,n_$F,n_$D,n_$s,n_$q,n_$_,n_$d,n_$Q,n_$l,n_$i,n_$j,n_$y,n_$T=n_$M.length/5,n_$L=n_$u,n_$R=n_$a/2;n_$x=n_$M[0],n_$W=n_$M[1],n_$F=n_$x-(n_$v=n_$M[5]),n_$E=(n_$E=-(n_$W-(n_$X=n_$M[6])))/(n_$y=Math.sqrt(n_$E*n_$E+n_$F*n_$F))*n_$R,n_$F=n_$F/n_$y*n_$R,n_$n.push(n_$x-n_$E,n_$W-n_$F,n_$A,n_$P,n_$$,n_$x+n_$E,n_$W+n_$F,n_$A,n_$P,n_$$);for(var n_$w=1;n_$w<n_$T-1;n_$w++)n_$x=n_$M[5*(n_$w-1)],n_$W=n_$M[5*(n_$w-1)+1],n_$v=n_$M[5*n_$w],n_$X=n_$M[5*n_$w+1],n_$r=n_$M[5*(n_$w+1)],n_$c=n_$M[5*(n_$w+1)+1],n_$F=n_$x-n_$v,n_$s=n_$v-n_$r,n_$d=(-(n_$E=(n_$E=-(n_$W-n_$X))/(n_$y=Math.sqrt(n_$E*n_$E+n_$F*n_$F))*n_$R)+n_$x)*(-(n_$F=n_$F/n_$y*n_$R)+n_$X)-(-n_$E+n_$v)*(-n_$F+n_$W),n_$i=(-(n_$D=(n_$D=-(n_$X-n_$c))/(n_$y=Math.sqrt(n_$D*n_$D+n_$s*n_$s))*n_$R)+n_$r)*(-(n_$s=n_$s/n_$y*n_$R)+n_$X)-(-n_$D+n_$v)*(-n_$s+n_$c),n_$j=(n_$q=-n_$F+n_$W-(-n_$F+n_$X))*(n_$l=-n_$D+n_$v-(-n_$D+n_$r))-(n_$Q=-n_$s+n_$c-(-n_$s+n_$X))*(n_$_=-n_$E+n_$v-(-n_$E+n_$x)),Math.abs(n_$j)<.1?(n_$j+=10.1,n_$n.push(n_$v-n_$E,n_$X-n_$F,n_$A,n_$P,n_$$,n_$v+n_$E,n_$X+n_$F,n_$A,n_$P,n_$$)):(((n_$t=(n_$_*n_$i-n_$l*n_$d)/n_$j)-n_$v)*(n_$t-n_$v)+((n_$g=(n_$Q*n_$d-n_$q*n_$i)/n_$j)-n_$X)+(n_$g-n_$X),n_$n.push(n_$t,n_$g,n_$A,n_$P,n_$$,n_$v-(n_$t-n_$v),n_$X-(n_$g-n_$X),n_$A,n_$P,n_$$));n_$J&&(n_$C=n_$J);var n_$B=this.edges+1;for(n_$w=1;n_$w<n_$B;n_$w++)n_$C.push(n_$L+2*(n_$w-1),n_$L+2*(n_$w-1)+1,n_$L+2*n_$w+1,n_$L+2*n_$w+1,n_$L+2*n_$w,n_$L+2*(n_$w-1));return n_$C.push(n_$L+2*(n_$w-1),n_$L+2*(n_$w-1)+1,n_$L+1,n_$L+1,n_$L,n_$L+2*(n_$w-1)),n_$n},n_$N}(),n_$uN=function(){function n_$f(){}return n_$O(n_$f,"laya.webgl.shapes.Earcut"),n_$f.earcut=function(n_$N,n_$C,n_$a){n_$a=n_$a||2;var n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P=n_$C&&n_$C.length,n_$$=n_$P?n_$C[0]*n_$a:n_$N.length,n_$O=n_$f.linkedList(n_$N,0,n_$$,n_$a,!0),n_$G=[];if(!n_$O)return n_$G;if(n_$P&&(n_$O=n_$f.eliminateHoles(n_$N,n_$C,n_$O,n_$a)),n_$N.length>80*n_$a){n_$u=n_$J=n_$N[0],n_$e=n_$M=n_$N[1];for(var n_$z=n_$a;n_$z<n_$$;n_$z+=n_$a)(n_$n=n_$N[n_$z])<n_$u&&(n_$u=n_$n),(n_$V=n_$N[n_$z+1])<n_$e&&(n_$e=n_$V),n_$J<n_$n&&(n_$J=n_$n),n_$M<n_$V&&(n_$M=n_$V);n_$A=0!==(n_$A=Math.max(n_$J-n_$u,n_$M-n_$e))?1/n_$A:0}return n_$f.earcutLinked(n_$O,n_$G,n_$a,n_$u,n_$e,n_$A),n_$G},n_$f.linkedList=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J,n_$M;if(n_$e===0<n_$f.signedArea(n_$N,n_$C,n_$a,n_$u))for(n_$J=n_$C;n_$J<n_$a;n_$J+=n_$u)n_$M=n_$f.insertNode(n_$J,n_$N[n_$J],n_$N[n_$J+1],n_$M);else for(n_$J=n_$a-n_$u;n_$C<=n_$J;n_$J-=n_$u)n_$M=n_$f.insertNode(n_$J,n_$N[n_$J],n_$N[n_$J+1],n_$M);return n_$M&&n_$f.equals(n_$M,n_$M.next)&&(n_$f.removeNode(n_$M),n_$M=n_$M.next),n_$M},n_$f.filterPoints=function(n_$N,n_$C){if(!n_$N)return n_$N;n_$C||(n_$C=n_$N);var n_$a,n_$u=n_$N;do{if(n_$a=!1,n_$u.steiner||!n_$f.equals(n_$u,n_$u.next)&&0!==n_$f.area(n_$u.prev,n_$u,n_$u.next))n_$u=n_$u.next;else{if(n_$f.removeNode(n_$u),(n_$u=n_$C=n_$u.prev)===n_$u.next)break;n_$a=!0}}while(n_$a||n_$u!==n_$C);return n_$C},n_$f.earcutLinked=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){if(n_$N){!n_$M&&n_$J&&n_$f.indexCurve(n_$N,n_$u,n_$e,n_$J);for(var n_$n,n_$V,n_$A=n_$N;n_$N.prev!==n_$N.next;)if(n_$n=n_$N.prev,n_$V=n_$N.next,n_$J?n_$f.isEarHashed(n_$N,n_$u,n_$e,n_$J):n_$f.isEar(n_$N))n_$C.push(n_$n.i/n_$a),n_$C.push(n_$N.i/n_$a),n_$C.push(n_$V.i/n_$a),n_$f.removeNode(n_$N),n_$N=n_$V.next,n_$A=n_$V.next;else if((n_$N=n_$V)===n_$A){n_$M?1===n_$M?(n_$N=n_$f.cureLocalIntersections(n_$N,n_$C,n_$a),n_$f.earcutLinked(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,2)):2===n_$M&&n_$f.splitEarcut(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J):n_$f.earcutLinked(n_$f.filterPoints(n_$N,null),n_$C,n_$a,n_$u,n_$e,n_$J,1);break}}},n_$f.isEar=function(n_$N){var n_$C=n_$N.prev,n_$a=n_$N,n_$u=n_$N.next;if(0<=n_$f.area(n_$C,n_$a,n_$u))return!1;for(var n_$e=n_$N.next.next;n_$e!==n_$N.prev;){if(n_$f.pointInTriangle(n_$C.x,n_$C.y,n_$a.x,n_$a.y,n_$u.x,n_$u.y,n_$e.x,n_$e.y)&&0<=n_$f.area(n_$e.prev,n_$e,n_$e.next))return!1;n_$e=n_$e.next}return!0},n_$f.isEarHashed=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.prev,n_$J=n_$N,n_$M=n_$N.next;if(0<=n_$f.area(n_$e,n_$J,n_$M))return!1;for(var n_$n=n_$e.x<n_$J.x?n_$e.x<n_$M.x?n_$e.x:n_$M.x:n_$J.x<n_$M.x?n_$J.x:n_$M.x,n_$V=n_$e.y<n_$J.y?n_$e.y<n_$M.y?n_$e.y:n_$M.y:n_$J.y<n_$M.y?n_$J.y:n_$M.y,n_$A=n_$e.x>n_$J.x?n_$e.x>n_$M.x?n_$e.x:n_$M.x:n_$J.x>n_$M.x?n_$J.x:n_$M.x,n_$P=n_$e.y>n_$J.y?n_$e.y>n_$M.y?n_$e.y:n_$M.y:n_$J.y>n_$M.y?n_$J.y:n_$M.y,n_$$=n_$f.zOrder(n_$n,n_$V,n_$C,n_$a,n_$u),n_$O=n_$f.zOrder(n_$A,n_$P,n_$C,n_$a,n_$u),n_$G=n_$N.nextZ;n_$G&&n_$G.z<=n_$O;){if(n_$G!==n_$N.prev&&n_$G!==n_$N.next&&n_$f.pointInTriangle(n_$e.x,n_$e.y,n_$J.x,n_$J.y,n_$M.x,n_$M.y,n_$G.x,n_$G.y)&&0<=n_$f.area(n_$G.prev,n_$G,n_$G.next))return!1;n_$G=n_$G.nextZ}for(n_$G=n_$N.prevZ;n_$G&&n_$G.z>=n_$$;){if(n_$G!==n_$N.prev&&n_$G!==n_$N.next&&n_$f.pointInTriangle(n_$e.x,n_$e.y,n_$J.x,n_$J.y,n_$M.x,n_$M.y,n_$G.x,n_$G.y)&&0<=n_$f.area(n_$G.prev,n_$G,n_$G.next))return!1;n_$G=n_$G.prevZ}return!0},n_$f.cureLocalIntersections=function(n_$N,n_$C,n_$a){var n_$u=n_$N;do{var n_$e=n_$u.prev,n_$J=n_$u.next.next;!n_$f.equals(n_$e,n_$J)&&n_$f.intersects(n_$e,n_$u,n_$u.next,n_$J)&&n_$f.locallyInside(n_$e,n_$J)&&n_$f.locallyInside(n_$J,n_$e)&&(n_$C.push(n_$e.i/n_$a),n_$C.push(n_$u.i/n_$a),n_$C.push(n_$J.i/n_$a),n_$f.removeNode(n_$u),n_$f.removeNode(n_$u.next),n_$u=n_$N=n_$J),n_$u=n_$u.next}while(n_$u!==n_$N);return n_$u},n_$f.splitEarcut=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$N;do{for(var n_$n=n_$M.next.next;n_$n!==n_$M.prev;){if(n_$M.i!==n_$n.i&&n_$f.isValidDiagonal(n_$M,n_$n)){var n_$V=n_$f.splitPolygon(n_$M,n_$n);return n_$M=n_$f.filterPoints(n_$M,n_$M.next),n_$V=n_$f.filterPoints(n_$V,n_$V.next),n_$f.earcutLinked(n_$M,n_$C,n_$a,n_$u,n_$e,n_$J),void n_$f.earcutLinked(n_$V,n_$C,n_$a,n_$u,n_$e,n_$J)}n_$n=n_$n.next}n_$M=n_$M.next}while(n_$M!==n_$N)},n_$f.eliminateHoles=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J,n_$M,n_$n,n_$V,n_$A=[];for(n_$e=0,n_$J=n_$C.length;n_$e<n_$J;n_$e++)n_$M=n_$C[n_$e]*n_$u,n_$n=n_$e<n_$J-1?n_$C[n_$e+1]*n_$u:n_$N.length,(n_$V=n_$f.linkedList(n_$N,n_$M,n_$n,n_$u,!1))===n_$V.next&&(n_$V.steiner=!0),n_$A.push(n_$f.getLeftmost(n_$V));for(n_$A.sort(n_$f.compareX),n_$e=0;n_$e<n_$A.length;n_$e++)n_$f.eliminateHole(n_$A[n_$e],n_$a),n_$a=n_$f.filterPoints(n_$a,n_$a.next);return n_$a},n_$f.compareX=function(n_$N,n_$C){return n_$N.x-n_$C.x},n_$f.eliminateHole=function(n_$N,n_$C){if(n_$C=n_$f.findHoleBridge(n_$N,n_$C)){var n_$a=n_$f.splitPolygon(n_$C,n_$N);n_$f.filterPoints(n_$a,n_$a.next)}},n_$f.findHoleBridge=function(n_$N,n_$C){var n_$a,n_$u=n_$C,n_$e=n_$N.x,n_$J=n_$N.y,n_$M=-1/0;do{if(n_$J<=n_$u.y&&n_$J>=n_$u.next.y&&n_$u.next.y!==n_$u.y){var n_$n=n_$u.x+(n_$J-n_$u.y)*(n_$u.next.x-n_$u.x)/(n_$u.next.y-n_$u.y);if(n_$n<=n_$e&&n_$M<n_$n){if((n_$M=n_$n)===n_$e){if(n_$J===n_$u.y)return n_$u;if(n_$J===n_$u.next.y)return n_$u.next}n_$a=n_$u.x<n_$u.next.x?n_$u:n_$u.next}}n_$u=n_$u.next}while(n_$u!==n_$C);if(!n_$a)return null;if(n_$e===n_$M)return n_$a.prev;var n_$V,n_$A=n_$a,n_$P=n_$a.x,n_$$=n_$a.y,n_$O=1/0;for(n_$u=n_$a.next;n_$u!==n_$A;)n_$e>=n_$u.x&&n_$u.x>=n_$P&&n_$e!==n_$u.x&&n_$f.pointInTriangle(n_$J<n_$$?n_$e:n_$M,n_$J,n_$P,n_$$,n_$J<n_$$?n_$M:n_$e,n_$J,n_$u.x,n_$u.y)&&((n_$V=Math.abs(n_$J-n_$u.y)/(n_$e-n_$u.x))<n_$O||n_$V===n_$O&&n_$u.x>n_$a.x)&&n_$f.locallyInside(n_$u,n_$N)&&(n_$a=n_$u,n_$O=n_$V),n_$u=n_$u.next;return n_$a},n_$f.indexCurve=function(n_$N,n_$C,n_$a,n_$u){for(var n_$e=n_$N;null===n_$e.z&&(n_$e.z=n_$f.zOrder(n_$e.x,n_$e.y,n_$C,n_$a,n_$u)),n_$e.prevZ=n_$e.prev,n_$e.nextZ=n_$e.next,(n_$e=n_$e.next)!==n_$N;);n_$e.prevZ.nextZ=null,n_$e.prevZ=null,n_$f.sortLinked(n_$e)},n_$f.sortLinked=function(n_$N){var n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A=1;do{for(n_$a=n_$N,n_$J=n_$N=null,n_$M=0;n_$a;){for(n_$M++,n_$u=n_$a,n_$C=n_$n=0;n_$C<n_$A&&(n_$n++,n_$u=n_$u.nextZ);n_$C++);for(n_$V=n_$A;0<n_$n||0<n_$V&&n_$u;)0!==n_$n&&(0===n_$V||!n_$u||n_$a.z<=n_$u.z)?(n_$a=(n_$e=n_$a).nextZ,n_$n--):(n_$u=(n_$e=n_$u).nextZ,n_$V--),n_$J?n_$J.nextZ=n_$e:n_$N=n_$e,n_$e.prevZ=n_$J,n_$J=n_$e;n_$a=n_$u}n_$J.nextZ=null,n_$A*=2}while(1<n_$M);return n_$N},n_$f.zOrder=function(n_$N,n_$C,n_$a,n_$u,n_$e){return(n_$N=1431655765&((n_$N=858993459&((n_$N=252645135&((n_$N=16711935&((n_$N=32767*(n_$N-n_$a)*n_$e)|n_$N<<8))|n_$N<<4))|n_$N<<2))|n_$N<<1))|(n_$C=1431655765&((n_$C=858993459&((n_$C=252645135&((n_$C=16711935&((n_$C=32767*(n_$C-n_$u)*n_$e)|n_$C<<8))|n_$C<<4))|n_$C<<2))|n_$C<<1))<<1},n_$f.getLeftmost=function(n_$N){for(var n_$C=n_$N,n_$a=n_$N;n_$C.x<n_$a.x&&(n_$a=n_$C),(n_$C=n_$C.next)!==n_$N;);return n_$a},n_$f.pointInTriangle=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){return 0<=(n_$e-n_$M)*(n_$C-n_$n)-(n_$N-n_$M)*(n_$J-n_$n)&&0<=(n_$N-n_$M)*(n_$u-n_$n)-(n_$a-n_$M)*(n_$C-n_$n)&&0<=(n_$a-n_$M)*(n_$J-n_$n)-(n_$e-n_$M)*(n_$u-n_$n)},n_$f.isValidDiagonal=function(n_$N,n_$C){return n_$N.next.i!==n_$C.i&&n_$N.prev.i!==n_$C.i&&!n_$f.intersectsPolygon(n_$N,n_$C)&&n_$f.locallyInside(n_$N,n_$C)&&n_$f.locallyInside(n_$C,n_$N)&&n_$f.middleInside(n_$N,n_$C)},n_$f.area=function(n_$N,n_$C,n_$a){return(n_$C.y-n_$N.y)*(n_$a.x-n_$C.x)-(n_$C.x-n_$N.x)*(n_$a.y-n_$C.y)},n_$f.equals=function(n_$N,n_$C){return n_$N.x===n_$C.x&&n_$N.y===n_$C.y},n_$f.intersects=function(n_$N,n_$C,n_$a,n_$u){return!!(n_$f.equals(n_$N,n_$C)&&n_$f.equals(n_$a,n_$u)||n_$f.equals(n_$N,n_$u)&&n_$f.equals(n_$a,n_$C))||0<n_$f.area(n_$N,n_$C,n_$a)!=0<n_$f.area(n_$N,n_$C,n_$u)&&0<n_$f.area(n_$a,n_$u,n_$N)!=0<n_$f.area(n_$a,n_$u,n_$C)},n_$f.intersectsPolygon=function(n_$N,n_$C){var n_$a=n_$N;do{if(n_$a.i!==n_$N.i&&n_$a.next.i!==n_$N.i&&n_$a.i!==n_$C.i&&n_$a.next.i!==n_$C.i&&n_$f.intersects(n_$a,n_$a.next,n_$N,n_$C))return!0;n_$a=n_$a.next}while(n_$a!==n_$N);return!1},n_$f.locallyInside=function(n_$N,n_$C){return n_$f.area(n_$N.prev,n_$N,n_$N.next)<0?0<=n_$f.area(n_$N,n_$C,n_$N.next)&&0<=n_$f.area(n_$N,n_$N.prev,n_$C):n_$f.area(n_$N,n_$C,n_$N.prev)<0||n_$f.area(n_$N,n_$N.next,n_$C)<0},n_$f.middleInside=function(n_$N,n_$C){for(var n_$a=n_$N,n_$u=!1,n_$e=(n_$N.x+n_$C.x)/2,n_$J=(n_$N.y+n_$C.y)/2;n_$a.y>n_$J!=n_$a.next.y>n_$J&&n_$a.next.y!==n_$a.y&&n_$e<(n_$a.next.x-n_$a.x)*(n_$J-n_$a.y)/(n_$a.next.y-n_$a.y)+n_$a.x&&(n_$u=!n_$u),(n_$a=n_$a.next)!==n_$N;);return n_$u},n_$f.splitPolygon=function(n_$N,n_$C){var n_$a=new n_$eN(n_$N.i,n_$N.x,n_$N.y),n_$u=new n_$eN(n_$C.i,n_$C.x,n_$C.y),n_$e=n_$N.next,n_$J=n_$C.prev;return(n_$N.next=n_$C).prev=n_$N,(n_$a.next=n_$e).prev=n_$a,(n_$u.next=n_$a).prev=n_$u,(n_$J.next=n_$u).prev=n_$J,n_$u},n_$f.insertNode=function(n_$N,n_$C,n_$a,n_$u){var n_$e=new n_$eN(n_$N,n_$C,n_$a);return n_$u?(n_$e.next=n_$u.next,(n_$e.prev=n_$u).next.prev=n_$e,n_$u.next=n_$e):(n_$e.prev=n_$e).next=n_$e,n_$e},n_$f.removeNode=function(n_$N){n_$N.next.prev=n_$N.prev,n_$N.prev.next=n_$N.next,n_$N.prevZ&&(n_$N.prevZ.nextZ=n_$N.nextZ),n_$N.nextZ&&(n_$N.nextZ.prevZ=n_$N.prevZ)},n_$f.signedArea=function(n_$N,n_$C,n_$a,n_$u){for(var n_$e=0,n_$J=n_$C,n_$M=n_$a-n_$u;n_$J<n_$a;n_$J+=n_$u)n_$e+=(n_$N[n_$M]-n_$N[n_$J])*(n_$N[n_$J+1]+n_$N[n_$M+1]),n_$M=n_$J;return n_$e},n_$f}(),n_$eN=function(){function n_$N(n_$N,n_$C,n_$a){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=n_$N,this.x=n_$C,this.y=n_$a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return n_$O(n_$N,"laya.webgl.shapes.EarcutNode"),n_$N}(),n_$JN=(function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this.lineWidth=n_$N,this.lineColor=n_$C,this.lineAlpha=n_$a,this.fillColor=n_$u,this.fillAlpha=n_$e,this.shape=n_$M,this.fill=n_$J}n_$O(n_$N,"laya.webgl.shapes.GeometryData");var n_$C=n_$N.prototype;n_$C.clone=function(){return new n_$N(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n_$C.getIndexData=function(){return null},n_$C.getVertexData=function(){return null},n_$C.destroy=function(){this.shape=null}}(),function(){function n_$N(n_$N){if(n_$N instanceof Float32Array)this.points=n_$N;else if(n_$N instanceof Array){n_$N.length;this.points=new Float32Array(n_$N)}}n_$O(n_$N,"laya.webgl.shapes.Vertex");var n_$C=n_$N.prototype;n_$r.imps(n_$C,{"laya.webgl.shapes.IShape":!0}),n_$C.getData=function(n_$N,n_$C,n_$a){},n_$C.needUpdate=function(n_$N){return!1},n_$C.rebuild=function(n_$N){},n_$C.setMatrix=function(n_$N){}}(),function(){function n_$V(n_$N){void 0===n_$N&&(n_$N=1e4),this._renderType=n_$N}n_$O(n_$V,"laya.webgl.submit.Submit");var n_$N=n_$V.prototype;return n_$r.imps(n_$N,{"laya.webgl.submit.ISubmit":!0}),n_$N.releaseRender=function(){var n_$N=n_$V._cache;(n_$N[n_$N._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},n_$N.getRenderType=function(){return this._renderType},n_$N.renderSubmit=function(){if(0===this._numEle)return 1;var n_$N=this.shaderValue.textureHost;if(n_$N){var n_$C=n_$N.source;if(!n_$N.bitmap||!n_$C)return 1;this.shaderValue.texture=n_$C,n_$N.alphaTexture&&n_$N.alphaTexture.source&&(this.shaderValue.texture1=n_$N.alphaTexture.source)}this._vb.bind_upload(this._ib);var n_$a=n_$vN.mainContext;return this.shaderValue.upload(),n_$K.activeBlendFunction!==this._blendFn&&(n_$a.enable(3042),this._blendFn(n_$a),n_$K.activeBlendFunction=this._blendFn),n_$d.drawCall++,n_$d.trianglesFaces+=this._numEle/3,n_$a.drawElements(4,this._numEle,5123,this._startIdx),1},n_$V.__init__=function(){var n_$N=n_$V.RENDERBASE=new n_$V(-1);n_$N.shaderValue=new n_$EN(0,0),n_$N.shaderValue.ALPHA=-1234},n_$V.createSubmit=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$V._cache._length?n_$V._cache[--n_$V._cache._length]:new n_$V;null==n_$a&&((n_$a=n_$J._selfVb||(n_$J._selfVb=n_$UN.create(-1))).clear(),n_$u=0),n_$J._ib=n_$C,n_$J._vb=n_$a,n_$J._startIdx=n_$u*n_$fN.BYTES_PIDX,n_$J._numEle=0;var n_$M=n_$N._nBlendType;n_$J._blendFn=n_$N._targets?n_$K.targetFns[n_$M]:n_$K.fns[n_$M],n_$J.shaderValue=n_$e,n_$J.shaderValue.setValue(n_$N._shader2D);var n_$n=n_$N._shader2D.filters;return n_$n&&n_$J.shaderValue.setFilters(n_$n),n_$J},n_$V.createShape=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$V._cache._length?n_$V._cache[--n_$V._cache._length]:new n_$V;n_$M._ib=n_$C,n_$M._vb=n_$a,n_$M._numEle=n_$u,n_$M._startIdx=n_$e,n_$M.shaderValue=n_$J,n_$M.shaderValue.setValue(n_$N._shader2D);var n_$n=n_$N._nBlendType;return n_$M._blendFn=n_$N._targets?n_$K.targetFns[n_$n]:n_$K.fns[n_$n],n_$M},n_$V.TYPE_2D=1e4,n_$V.TYPE_CANVAS=10003,n_$V.TYPE_CMDSETRT=10004,n_$V.TYPE_CUSTOM=10005,n_$V.TYPE_BLURRT=10006,n_$V.TYPE_CMDDESTORYPRERT=10007,n_$V.TYPE_DISABLESTENCIL=10008,n_$V.TYPE_OTHERIBVB=10009,n_$V.TYPE_PRIMITIVE=10010,n_$V.TYPE_RT=10011,n_$V.TYPE_BLUR_RT=10012,n_$V.TYPE_TARGET=10013,n_$V.TYPE_CHANGE_VALUE=10014,n_$V.TYPE_SHAPE=10015,n_$V.TYPE_TEXTURE=10016,n_$V.TYPE_FILLTEXTURE=10017,n_$V.RENDERBASE=null,n_$V._cache=((n_$V._cache=[])._length=0,n_$V._cache),n_$V}()),n_$MN=function(){function n_$u(){this.fun=null,this.args=null}n_$O(n_$u,"laya.webgl.submit.SubmitCMD");var n_$N=n_$u.prototype;return n_$r.imps(n_$N,{"laya.webgl.submit.ISubmit":!0}),n_$N.renderSubmit=function(){return this.fun.apply(null,this.args),1},n_$N.getRenderType=function(){return 0},n_$N.releaseRender=function(){var n_$N=n_$u._cache;n_$N[n_$N._length++]=this},n_$u.create=function(n_$N,n_$C){var n_$a=n_$u._cache._length?n_$u._cache[--n_$u._cache._length]:new n_$u;return n_$a.fun=n_$C,n_$a.args=n_$N,n_$a},n_$u._cache=((n_$u._cache=[])._length=0,n_$u._cache),n_$u}(),n_$nN=function(){function n_$C(){this.variables={}}n_$O(n_$C,"laya.webgl.submit.SubmitCMDScope");var n_$N=n_$C.prototype;return n_$N.getValue=function(n_$N){return this.variables[n_$N]},n_$N.addValue=function(n_$N,n_$C){return this.variables[n_$N]=n_$C},n_$N.setValue=function(n_$N,n_$C){return this.variables.hasOwnProperty(n_$N)?this.variables[n_$N]=n_$C:null},n_$N.clear=function(){for(var n_$N in this.variables)delete this.variables[n_$N]},n_$N.recycle=function(){this.clear(),n_$C.POOL.push(this)},n_$C.create=function(){var n_$N=n_$C.POOL.pop();return n_$N||(n_$N=new n_$C),n_$N},n_$C.POOL=[],n_$C}(),n_$VN=function(){function n_$$(){this.offset=0,this.startIndex=0,this._mat=n_$F.create()}n_$O(n_$$,"laya.webgl.submit.SubmitOtherIBVB");var n_$N=n_$$.prototype;return n_$r.imps(n_$N,{"laya.webgl.submit.ISubmit":!0}),n_$N.releaseRender=function(){var n_$N=n_$$._cache;(n_$N[n_$N._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},n_$N.getRenderType=function(){return 10009},n_$N.renderSubmit=function(){var n_$N=this._shaderValue.textureHost;if(n_$N){var n_$C=n_$N.source;if(!n_$N.bitmap||!n_$C)return 1;this._shaderValue.texture=n_$C}this._vb.bind_upload(this._ib);var n_$a=n_$xN.worldMatrix4,n_$u=n_$F.TEMP;n_$F.mulPre(this._mat,n_$a[0],n_$a[1],n_$a[4],n_$a[5],n_$a[12],n_$a[13],n_$u);var n_$e=n_$xN.worldMatrix4=n_$$.tempMatrix4;n_$e[0]=n_$u.a,n_$e[1]=n_$u.b,n_$e[4]=n_$u.c,n_$e[5]=n_$u.d,n_$e[12]=n_$u.tx,n_$e[13]=n_$u.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var n_$J=n_$vN.mainContext;return n_$K.activeBlendFunction!==this._blendFn&&(n_$J.enable(3042),this._blendFn(n_$J),n_$K.activeBlendFunction=this._blendFn),n_$d.drawCall++,n_$d.trianglesFaces+=this._numEle/3,n_$J.drawElements(4,this._numEle,5123,this.startIndex),n_$xN.worldMatrix4=n_$a,n_$yN.activeShader=null,1},n_$$.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){void 0===n_$V&&(n_$V=0);var n_$A=n_$$._cache._length?n_$$._cache[--n_$$._cache._length]:new n_$$;n_$A._ib=n_$a,n_$A._vb=n_$C,n_$A._numEle=n_$u,n_$A._shader=n_$e,n_$A._shaderValue=n_$J;var n_$P=n_$N._nBlendType;switch(n_$A._blendFn=n_$N._targets?n_$K.targetFns[n_$P]:n_$K.fns[n_$P],n_$V){case 0:n_$A.offset=0,n_$A.startIndex=n_$n/(n_$fN.BYTES_PE*n_$C.vertexStride)*1.5,n_$A.startIndex*=n_$fN.BYTES_PIDX;break;case 1:n_$A.startIndex=n_$M,n_$A.offset=n_$n}return n_$A},n_$$._cache=((n_$$._cache=[])._length=0,n_$$._cache),n_$$.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n_$$}(),n_$AN=function(){function n_$a(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new n_$s,this.screenRect=new n_$s}n_$O(n_$a,"laya.webgl.submit.SubmitScissor");var n_$N=n_$a.prototype;return n_$r.imps(n_$N,{"laya.webgl.submit.ISubmit":!0}),n_$N._scissor=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$xN.worldMatrix4,n_$J=n_$e[0],n_$M=n_$e[5],n_$n=n_$e[12],n_$V=n_$e[13];if(n_$u*=n_$M,(n_$a*=n_$J)<1||n_$u<1)return!1;var n_$A=(n_$N=n_$N*n_$J+n_$n)+n_$a,n_$P=(n_$C=n_$C*n_$M+n_$V)+n_$u;n_$N<0&&(n_$a=n_$A-(n_$N=0)),n_$C<0&&(n_$u=n_$P-(n_$C=0));var n_$$=n_$xN.worldClipRect;if(n_$N=Math.max(n_$N,n_$$.x),n_$C=Math.max(n_$C,n_$$.y),n_$a=Math.min(n_$A,n_$$.right)-n_$N,n_$u=Math.min(n_$P,n_$$.bottom)-n_$C,n_$a<1||n_$u<1)return!1;var n_$O=n_$xN.worldScissorTest;return this.screenRect.copyFrom(n_$$),n_$$.x=n_$N,n_$$.y=n_$C,n_$$.width=n_$a,n_$$.height=n_$u,n_$xN.worldScissorTest=!0,n_$C=n_$xN.height-n_$C-n_$u,n_$vN.mainContext.scissor(n_$N,n_$C,n_$a,n_$u),n_$vN.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),n_$O?(n_$C=n_$xN.height-this.screenRect.y-this.screenRect.height,n_$vN.mainContext.scissor(this.screenRect.x,n_$C,this.screenRect.width,this.screenRect.height),n_$vN.mainContext.enable(3089)):(n_$vN.mainContext.disable(3089),n_$xN.worldScissorTest=!1),n_$$.copyFrom(this.screenRect),!0},n_$N._scissorWithTagart=function(n_$N,n_$C,n_$a,n_$u){if(n_$a<1||n_$u<1)return!1;var n_$e=n_$N+n_$a,n_$J=n_$C+n_$u;n_$N<0&&(n_$a=n_$e-(n_$N=0)),n_$C<0&&(n_$u=n_$J-(n_$C=0));var n_$M=n_$xN.worldClipRect;if(n_$N=Math.max(n_$N,n_$M.x),n_$C=Math.max(n_$C,n_$M.y),n_$a=Math.min(n_$e,n_$M.right)-n_$N,n_$u=Math.min(n_$J,n_$M.bottom)-n_$C,n_$a<1||n_$u<1)return!1;var n_$n=n_$xN.worldScissorTest;return this.screenRect.copyFrom(n_$M),n_$xN.worldScissorTest=!0,n_$M.x=n_$N,n_$M.y=n_$C,n_$M.width=n_$a,n_$M.height=n_$u,n_$C=n_$xN.height-n_$C-n_$u,n_$vN.mainContext.scissor(n_$N,n_$C,n_$a,n_$u),n_$vN.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),n_$n?(n_$C=n_$xN.height-this.screenRect.y-this.screenRect.height,n_$vN.mainContext.scissor(this.screenRect.x,n_$C,this.screenRect.width,this.screenRect.height),n_$vN.mainContext.enable(3089)):(n_$vN.mainContext.disable(3089),n_$xN.worldScissorTest=!1),n_$M.copyFrom(this.screenRect),!0},n_$N.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},n_$N.getRenderType=function(){return 0},n_$N.releaseRender=function(){var n_$N=n_$a._cache;(n_$N[n_$N._length++]=this).context=null},n_$a.create=function(n_$N){var n_$C=n_$a._cache._length?n_$a._cache[--n_$a._cache._length]:new n_$a;return n_$C.context=n_$N,n_$C},n_$a._cache=((n_$a._cache=[])._length=0,n_$a._cache),n_$a}(),n_$PN=function(){function n_$V(){this.step=0,this.blendMode=null,this.level=0}n_$O(n_$V,"laya.webgl.submit.SubmitStencil");var n_$N=n_$V.prototype;return n_$r.imps(n_$N,{"laya.webgl.submit.ISubmit":!0}),n_$N.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},n_$N.getRenderType=function(){return 0},n_$N.releaseRender=function(){var n_$N=n_$V._cache;n_$N[n_$N._length++]=this},n_$N.do1=function(){var n_$N=n_$vN.mainContext;n_$N.enable(2960),n_$N.clear(1024),n_$N.colorMask(!1,!1,!1,!1),n_$N.stencilFunc(514,this.level,255),n_$N.stencilOp(7680,7680,7682)},n_$N.do2=function(){var n_$N=n_$vN.mainContext;n_$N.stencilFunc(514,this.level+1,255),n_$N.colorMask(!0,!0,!0,!0),n_$N.stencilOp(7680,7680,7680)},n_$N.do3=function(){var n_$N=n_$vN.mainContext;n_$N.colorMask(!0,!0,!0,!0),n_$N.stencilOp(7680,7680,7680),n_$N.clear(1024),n_$N.disable(2960)},n_$N.do4=function(){var n_$N=n_$vN.mainContext;0==this.level&&(n_$N.enable(2960),n_$N.clear(1024)),n_$N.colorMask(!1,!1,!1,!1),n_$N.stencilFunc(519,0,255),n_$N.stencilOp(7680,7680,7682)},n_$N.do5=function(){var n_$N=n_$vN.mainContext;n_$N.stencilFunc(514,this.level,255),n_$N.colorMask(!0,!0,!0,!0),n_$N.stencilOp(7680,7680,7680)},n_$N.do6=function(){var n_$N=n_$vN.mainContext;n_$K.targetFns[n_$K.TOINT[this.blendMode]](n_$N)},n_$N.do7=function(){var n_$N=n_$vN.mainContext;n_$N.colorMask(!1,!1,!1,!1),n_$N.stencilOp(7680,7680,7683)},n_$N.do8=function(){var n_$N=n_$vN.mainContext;n_$N.colorMask(!0,!0,!0,!0),n_$N.stencilFunc(514,this.level,255),n_$N.stencilOp(7680,7680,7680)},n_$V.restore=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J;if((n_$N._renderKey=0)<n_$V._mask&&n_$V._mask--,0==n_$V._mask)n_$J=laya.webgl.submit.SubmitStencil.create(3),n_$N.addRenderObject(n_$J),n_$N._curSubmit=n_$JN.RENDERBASE;else{n_$J=laya.webgl.submit.SubmitStencil.create(7),n_$N.addRenderObject(n_$J);var n_$M=n_$N._vb;n_$M._byteLength;if(n_$tN.fillRectImgVb(n_$M,null,n_$C.x,n_$C.y,n_$C.width,n_$C.height,n_$j.DEF_UV,n_$a,n_$u,n_$e,0,0)){n_$N._shader2D.glTexture=null;var n_$n=n_$N._curSubmit=n_$JN.createSubmit(n_$N,n_$N._ib,n_$M,(n_$M._byteLength-64)/32*3,n_$EN.create(2,0));n_$n.shaderValue.ALPHA=1,n_$N._submits[n_$N._submits._length++]=n_$n,n_$N._curSubmit._numEle+=6,n_$N._curSubmit=n_$JN.RENDERBASE}else alert("clipRect calc stencil rect error");n_$J=laya.webgl.submit.SubmitStencil.create(8),n_$N.addRenderObject(n_$J)}},n_$V.restore2=function(n_$N,n_$C){var n_$a;(n_$N._renderKey=0)<n_$V._mask&&n_$V._mask--,0==n_$V._mask?(n_$a=laya.webgl.submit.SubmitStencil.create(3),n_$N.addRenderObject(n_$a),n_$N._curSubmit=n_$JN.RENDERBASE):(n_$a=laya.webgl.submit.SubmitStencil.create(7),n_$N.addRenderObject(n_$a),n_$N._submits[n_$N._submits._length++]=n_$C,n_$a=laya.webgl.submit.SubmitStencil.create(8),n_$N.addRenderObject(n_$a))},n_$V.create=function(n_$N){var n_$C=n_$V._cache._length?n_$V._cache[--n_$V._cache._length]:new n_$V;return 5==(n_$C.step=n_$N)&&++n_$V._mask,n_$C.level=n_$V._mask,n_$C},n_$V._cache=((n_$V._cache=[])._length=0,n_$V._cache),n_$V._mask=0,n_$V}(),n_$$N=function(){function n_$n(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}n_$O(n_$n,"laya.webgl.submit.SubmitTarget");var n_$N=n_$n.prototype;return n_$r.imps(n_$N,{"laya.webgl.submit.ISubmit":!0}),n_$N.renderSubmit=function(){this._vb.bind_upload(this._ib);var n_$N=this.scope.getValue(this.proName);return n_$N&&(this.shaderValue.texture=n_$N.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[n_$N.width,n_$N.height]),this.shaderValue.upload(),this.blend(),n_$d.drawCall++,n_$d.trianglesFaces+=this._numEle/3,n_$vN.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},n_$N.blend=function(){if(n_$K.activeBlendFunction!==n_$K.fns[this.blendType]){var n_$N=n_$vN.mainContext;n_$N.enable(3042),n_$K.fns[this.blendType](n_$N),n_$K.activeBlendFunction=n_$K.fns[this.blendType]}},n_$N.getRenderType=function(){return 0},n_$N.releaseRender=function(){var n_$N=n_$n._cache;(n_$N[n_$N._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},n_$n.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$n._cache._length?n_$n._cache[--n_$n._cache._length]:new n_$n;return n_$M._ib=n_$C,n_$M._vb=n_$a,n_$M.proName=n_$J,n_$M._startIdx=n_$u*n_$fN.BYTES_PIDX,n_$M._numEle=0,n_$M.blendType=n_$N._nBlendType,n_$M.shaderValue=n_$e,n_$M.shaderValue.setValue(n_$N._shader2D),n_$M},n_$n._cache=((n_$n._cache=[])._length=0,n_$n._cache),n_$n}(),n_$ON=function(){function n_$N(){this._sourceStr=null}n_$O(n_$N,"laya.webgl.text.CharSegment");var n_$C=n_$N.prototype;return n_$r.imps(n_$C,{"laya.webgl.text.ICharSegment":!0}),n_$C.textToSpit=function(n_$N){this._sourceStr=n_$N},n_$C.getChar=function(n_$N){return this._sourceStr.charAt(n_$N)},n_$C.getCharCode=function(n_$N){return this._sourceStr.charCodeAt(n_$N)},n_$C.length=function(){return this._sourceStr.length},n_$N}(),n_$GN=function(){var n_$N;function n_$d(){}return n_$O(n_$d,"laya.webgl.text.DrawText"),n_$d.__init__=function(){n_$d._charsTemp=new Array,n_$d._drawValue=new n_$N,n_$d._charSeg=new n_$ON},n_$d.customCharSeg=function(n_$N){n_$d._charSeg=n_$N},n_$d.getChar=function(n_$N,n_$C,n_$a){var n_$u=n_$pN.createOneChar(n_$N,n_$a);return-1!=n_$C&&(n_$d._charsCache[n_$C]=n_$u),n_$u},n_$d._drawSlow=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$,n_$O,n_$G,n_$z){var n_$f,n_$t,n_$g=n_$d._drawValue.value(n_$J,n_$n,n_$V,n_$A,n_$O,n_$G,n_$z),n_$x=0,n_$W=0,n_$v=n_$d._charsTemp,n_$X=0,n_$r=NaN;if(n_$u)for(n_$v.length=n_$u.length,n_$x=0,n_$W=n_$u.length;n_$x<n_$W;n_$x++)(n_$t=n_$u[n_$x])&&(n_$r=n_$t.charNum+n_$g.txtID,n_$v[n_$x]=n_$f=n_$d._charsCache[n_$r]||n_$d.getChar(n_$t.char,n_$r,n_$g),n_$f.active());else{var n_$c=n_$a instanceof laya.utils.WordText?n_$a.toString():n_$a;if(n_$i.CharacterCache){n_$d._charSeg.textToSpit(n_$c);var n_$E=n_$d._charSeg.length();for(n_$x=0,n_$W=n_$v.length=n_$E;n_$x<n_$W;n_$x++)n_$r=n_$d._charSeg.getCharCode(n_$x)+n_$g.txtID,n_$v[n_$x]=n_$f=n_$d._charsCache[n_$r]||n_$d.getChar(n_$d._charSeg.getChar(n_$x),n_$r,n_$g),n_$f.active(),n_$X+=n_$f.cw}else n_$v.length=0,(n_$f=n_$d.getChar(n_$c,-1,n_$g)).active(),n_$X+=n_$f.cw,n_$v[0]=n_$f}var n_$F=0;null!==n_$M&&"left"!==n_$M&&(n_$F=-("center"==n_$M?n_$X/2:n_$X));var n_$D,n_$s,n_$q=NaN,n_$_=0;if(n_$u)for(n_$x=0,n_$W=n_$v.length;n_$x<n_$W;n_$x++)n_$f=n_$v[n_$x],n_$t=n_$u[n_$x],n_$f&&n_$t&&!n_$f.isSpace&&(n_$q=n_$f.borderSize,n_$D=n_$f.texture,n_$C._drawText(n_$D,n_$P+n_$F+n_$t.x*n_$O-n_$q,n_$$+n_$t.y*n_$G-n_$q,n_$D.width,n_$D.height,n_$e,0,0,0,0));else{for(n_$x=0,n_$W=n_$v.length;n_$x<n_$W;n_$x++)(n_$f=n_$v[n_$x])&&!n_$f.isSpace&&(n_$q=n_$f.borderSize,n_$D=n_$f.texture,n_$C._drawText(n_$D,n_$P+n_$F-n_$q,n_$$-n_$q,n_$D.width,n_$D.height,n_$e,0,0,0,0),n_$N&&((n_$s=n_$N[n_$_++])||(n_$s=n_$N[n_$_-1]=[]),n_$s[0]=n_$D,n_$s[1]=n_$F-n_$q,n_$s[2]=-n_$q)),n_$F+=n_$f.cw;n_$N&&(n_$N.length=n_$_)}},n_$d._drawFast=function(n_$N,n_$C,n_$a,n_$u,n_$e){for(var n_$J,n_$M,n_$n=0,n_$V=n_$N.length;n_$n<n_$V;n_$n++)(n_$J=(n_$M=n_$N[n_$n])[0]).active(),n_$C._drawText(n_$J,n_$u+n_$M[1],n_$e+n_$M[2],n_$J.width,n_$J.height,n_$a,0,0,0,0)},n_$d.drawText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$){if(void 0===n_$$&&(n_$$=0),!(n_$C&&0===n_$C.length||n_$a&&0===n_$a.length)){var n_$O=n_$u.a,n_$G=n_$u.d;(0!==n_$u.b||0!==n_$u.c)&&(n_$O=n_$G=1);var n_$z=1!==n_$O||1!==n_$G;if(n_$z&&n_$r.stage.transform){var n_$f=n_$r.stage.transform;n_$z=n_$f.a===n_$O&&n_$f.d===n_$G}else n_$z=!1;if(n_$z){var n_$t=(n_$u=n_$u.copyTo(n_$cN._tmpMatrix)).tx,n_$g=n_$u.ty;n_$u.scale(1/n_$O,1/n_$G),n_$u._checkTransform(),n_$A*=n_$O,n_$P*=n_$G,n_$A+=n_$t-n_$u.tx,n_$P+=n_$g-n_$u.ty}else n_$O=n_$G=1;if(n_$a)n_$d._drawSlow(null,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$O,n_$G,n_$$);else{if(null===n_$C.toUpperCase){var n_$x=n_$O+1e5*n_$G,n_$W=n_$C;return void(n_$W.changed||n_$W.id!==n_$x?(n_$W.id=n_$x,n_$W.changed=!1,n_$d._drawSlow(n_$W.save,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$O,n_$G,n_$$)):n_$d._drawFast(n_$W.save,n_$N,n_$u,n_$A,n_$P))}var n_$v=n_$C+n_$e.toString()+n_$M+n_$n+n_$V+n_$O+n_$G+n_$J,n_$X=n_$d._textsCache[n_$v];n_$i.CharacterCache?n_$X?n_$d._drawFast(n_$X,n_$N,n_$u,n_$A,n_$P):(n_$d._textsCache.__length||(n_$d._textsCache.__length=0),n_$d._textsCache.__length>n_$c.WebGLTextCacheCount&&((n_$d._textsCache={}).__length=0,n_$d._curPoolIndex=0),n_$d._textCachesPool[n_$d._curPoolIndex]?(n_$X=n_$d._textsCache[n_$v]=n_$d._textCachesPool[n_$d._curPoolIndex]).length=0:n_$d._textCachesPool[n_$d._curPoolIndex]=n_$X=n_$d._textsCache[n_$v]=[],n_$d._textsCache.__length++,n_$d._curPoolIndex++,n_$d._drawSlow(n_$X,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$O,n_$G,n_$$)):n_$d._drawSlow(n_$X,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$O,n_$G,n_$$)}}},n_$d._charsTemp=null,n_$d._textCachesPool=[],n_$d._curPoolIndex=0,n_$d._charsCache={},n_$d._textsCache={},n_$d._drawValue=null,n_$d.d=[],n_$d._charSeg=null,n_$d.__init$=function(){n_$N=function(){function n_$V(){}return n_$O(n_$V,""),n_$V.prototype.value=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this.font=n_$N,this.fillColor=n_$C,this.borderColor=n_$a,this.lineWidth=n_$u,this.scaleX=n_$e,this.scaleY=n_$J,this.underLine=n_$M;var n_$n=n_$N.toString()+n_$e+n_$J+n_$u+(n_$C?n_$C.toLowerCase():" ")+(n_$a?n_$a.toLowerCase():" ")+n_$M;return this.txtID=n_$V._keymap[n_$n],this.txtID||(this.txtID=1e-7*++n_$V._keymapCount,n_$V._keymap[n_$n]=this.txtID),this},n_$V.clear=function(){n_$V._keymap={},n_$V._keymapCount=1},n_$V._keymap={},n_$V._keymapCount=1,n_$V}()},n_$d}(),n_$zN=function(){function n_$e(n_$N){this._index=0,this._size=14,this._italic=-2,n_$e._cache2=n_$e._cache2||[],this.setFont(n_$N||"14px Arial")}n_$O(n_$e,"laya.webgl.text.FontInContext");var n_$N=n_$e.prototype;return n_$N.setFont=function(n_$N){var n_$C=n_$e._cache2[n_$N];if(n_$C)this._words=n_$C[0],this._size=n_$C[1];else{this._words=n_$N.split(" ");for(var n_$a=0,n_$u=this._words.length;n_$a<n_$u;n_$a++)if(0<this._words[n_$a].indexOf("px")){this._index=n_$a;break}this._size=parseInt(this._words[this._index]),n_$e._cache2[n_$N]=[this._words,this._size]}this._text=null,this._italic=-2},n_$N.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},n_$N.hasType=function(n_$N){for(var n_$C=0,n_$a=this._words.length;n_$C<n_$a;n_$C++)if(this._words[n_$C]===n_$N)return n_$C;return-1},n_$N.removeType=function(n_$N){for(var n_$C=0,n_$a=this._words.length;n_$C<n_$a;n_$C++)if(this._words[n_$C]===n_$N){this._words.splice(n_$C,1),this._index>n_$C&&this._index--;break}this._text=null,this._italic=-2},n_$N.copyTo=function(n_$N){return n_$N._text=this._text,n_$N._size=this._size,n_$N._index=this._index,n_$N._words=this._words.slice(),n_$N._italic=-2,n_$N},n_$N.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},n_$u(0,n_$N,"size",function(){return this._size},function(n_$N){this._size=n_$N,this._words[this._index]=n_$N+"px",this._text=null}),n_$e.create=function(n_$N){var n_$C=n_$e._cache[n_$N];return n_$C||(n_$C=n_$e._cache[n_$N]=new n_$e(n_$N))},n_$e.EMPTY=new n_$e,n_$e._cache={},n_$e._cache2=null,n_$e}(),n_$fN=function(){function n_$N(){}return n_$O(n_$N,"laya.webgl.utils.CONST3D2D"),n_$N.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n_$N.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],n_$N.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],n_$N._TMPARRAY=[],n_$N._OFFSETX=0,n_$N._OFFSETY=0,n_$M(n_$N,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),n_$N}(),n_$tN=function(){function n_$z(){}return n_$O(n_$z,"laya.webgl.utils.GlUtils"),n_$z.make2DProjection=function(n_$N,n_$C,n_$a){return[2/n_$N,0,0,0,0,-2/n_$C,0,0,0,0,2/n_$a,0,-1,1,0,1]},n_$z.fillIBQuadrangle=function(n_$N,n_$C){if(65535/4<n_$C)throw Error("IBQuadrangle count:"+n_$C+" must<:"+Math.floor(65535/4));n_$C=Math.floor(n_$C),n_$N._resizeBuffer(6*(n_$C+1)*2,!1),n_$N.byteLength=n_$N.bufferLength;for(var n_$a=n_$N.getUint16Array(),n_$u=0,n_$e=0;n_$e<n_$C;n_$e++)n_$a[n_$u++]=4*n_$e,n_$a[n_$u++]=4*n_$e+2,n_$a[n_$u++]=4*n_$e+1,n_$a[n_$u++]=4*n_$e,n_$a[n_$u++]=4*n_$e+3,n_$a[n_$u++]=4*n_$e+2;return n_$N.setNeedUpload(),!0},n_$z.expandIBQuadrangle=function(n_$N,n_$C){n_$N.bufferLength>=6*n_$C*2||n_$z.fillIBQuadrangle(n_$N,n_$C)},n_$z.mathCeilPowerOfTwo=function(n_$N){return n_$N--,n_$N|=n_$N>>1,n_$N|=n_$N>>2,n_$N|=n_$N>>4,n_$N|=n_$N>>8,n_$N|=n_$N>>16,++n_$N},n_$z.fillQuadrangleImgVb=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){var n_$V=16+(n_$N._byteLength>>2);n_$N.byteLength=n_$V<<2;var n_$A=n_$N.getFloat32Array();n_$A[(n_$V-=16)+2]=n_$e[0],n_$A[n_$V+3]=n_$e[1],n_$A[n_$V+6]=n_$e[2],n_$A[n_$V+7]=n_$e[3],n_$A[n_$V+10]=n_$e[4],n_$A[n_$V+11]=n_$e[5],n_$A[n_$V+14]=n_$e[6],n_$A[n_$V+15]=n_$e[7];var n_$P=n_$J.a,n_$$=n_$J.b,n_$O=n_$J.c,n_$G=n_$J.d;if(1!==n_$P||0!==n_$$||0!==n_$O||1!==n_$G){n_$J.bTransform=!0;var n_$z=n_$J.tx+n_$M,n_$f=n_$J.ty+n_$n;n_$A[n_$V]=(n_$u[0]+n_$C)*n_$P+(n_$u[1]+n_$a)*n_$O+n_$z,n_$A[n_$V+1]=(n_$u[0]+n_$C)*n_$$+(n_$u[1]+n_$a)*n_$G+n_$f,n_$A[n_$V+4]=(n_$u[2]+n_$C)*n_$P+(n_$u[3]+n_$a)*n_$O+n_$z,n_$A[n_$V+5]=(n_$u[2]+n_$C)*n_$$+(n_$u[3]+n_$a)*n_$G+n_$f,n_$A[n_$V+8]=(n_$u[4]+n_$C)*n_$P+(n_$u[5]+n_$a)*n_$O+n_$z,n_$A[n_$V+9]=(n_$u[4]+n_$C)*n_$$+(n_$u[5]+n_$a)*n_$G+n_$f,n_$A[n_$V+12]=(n_$u[6]+n_$C)*n_$P+(n_$u[7]+n_$a)*n_$O+n_$z,n_$A[n_$V+13]=(n_$u[6]+n_$C)*n_$$+(n_$u[7]+n_$a)*n_$G+n_$f}else n_$J.bTransform=!1,n_$C+=n_$J.tx+n_$M,n_$a+=n_$J.ty+n_$n,n_$A[n_$V]=n_$C+n_$u[0],n_$A[n_$V+1]=n_$a+n_$u[1],n_$A[n_$V+4]=n_$C+n_$u[2],n_$A[n_$V+5]=n_$a+n_$u[3],n_$A[n_$V+8]=n_$C+n_$u[4],n_$A[n_$V+9]=n_$a+n_$u[5],n_$A[n_$V+12]=n_$C+n_$u[6],n_$A[n_$V+13]=n_$a+n_$u[7];return n_$N._upload=!0},n_$z.fillTranglesVB=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){var n_$n=(n_$N._byteLength>>2)+n_$u.length;n_$N.byteLength=n_$n<<2;var n_$V=n_$N.getFloat32Array();n_$n-=n_$u.length;for(var n_$A=n_$u.length,n_$P=n_$e.a,n_$$=n_$e.b,n_$O=n_$e.c,n_$G=n_$e.d,n_$z=0;n_$z<n_$A;n_$z+=4)if(n_$V[n_$n+n_$z+2]=n_$u[n_$z+2],n_$V[n_$n+n_$z+3]=n_$u[n_$z+3],1!==n_$P||0!==n_$$||0!==n_$O||1!==n_$G){n_$e.bTransform=!0;var n_$f=n_$e.tx+n_$J,n_$t=n_$e.ty+n_$M;n_$V[n_$n+n_$z]=(n_$u[n_$z]+n_$C)*n_$P+(n_$u[n_$z+1]+n_$a)*n_$O+n_$f,n_$V[n_$n+n_$z+1]=(n_$u[n_$z]+n_$C)*n_$$+(n_$u[n_$z+1]+n_$a)*n_$G+n_$t}else n_$e.bTransform=!1,n_$C+=n_$e.tx+n_$J,n_$a+=n_$e.ty+n_$M,n_$V[n_$n+n_$z]=n_$C+n_$u[n_$z],n_$V[n_$n+n_$z+1]=n_$a+n_$u[n_$z+1];return n_$N._upload=!0},n_$z.copyPreImgVb=function(n_$N,n_$C,n_$a){var n_$u=n_$N._byteLength>>2;n_$N.byteLength=n_$u+16<<2;for(var n_$e=n_$N.getFloat32Array(),n_$J=0,n_$M=n_$u-16;n_$J<4;n_$J++)n_$e[n_$u]=n_$e[n_$M]+n_$C,++n_$M,n_$e[++n_$u]=n_$e[n_$M]+n_$a,++n_$M,n_$e[++n_$u]=n_$e[n_$M],++n_$M,n_$e[++n_$u]=n_$e[n_$M],++n_$u,++n_$M;n_$N._upload=!0},n_$z.fillRectImgVb=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$,n_$O){void 0===n_$O&&(n_$O=!1);var n_$G,n_$z,n_$f,n_$t,n_$g,n_$x,n_$W,n_$v,n_$X,n_$r,n_$c,n_$E,n_$F,n_$D,n_$s,n_$q,n_$_=1,n_$d=n_$n.a,n_$Q=n_$n.b,n_$l=n_$n.c,n_$i=n_$n.d,n_$j=n_$C&&n_$C.width<99999999;if(1!==n_$d||0!==n_$Q||0!==n_$l||1!==n_$i?(n_$n.bTransform=!0,0===n_$Q&&0===n_$l&&(n_$_=23,n_$X=n_$e+n_$a,n_$r=n_$J+n_$u,n_$G=n_$d*n_$a+(n_$c=n_$n.tx+n_$V),n_$f=n_$d*n_$X+n_$c,n_$z=n_$i*n_$u+(n_$E=n_$n.ty+n_$A),n_$t=n_$i*n_$r+n_$E)):(n_$_=23,n_$n.bTransform=!1,n_$f=(n_$G=n_$a+n_$n.tx+n_$V)+n_$e,n_$t=(n_$z=n_$u+n_$n.ty+n_$A)+n_$J),n_$j&&(n_$g=n_$C.x,n_$x=n_$C.y,n_$W=n_$C.width+n_$g,n_$v=n_$C.height+n_$x),1!==n_$_){if(Math.min(n_$G,n_$f)>=n_$W)return!1;if(Math.min(n_$z,n_$t)>=n_$v)return!1;if(Math.max(n_$f,n_$G)<=n_$g)return!1;if(Math.max(n_$t,n_$z)<=n_$x)return!1}var n_$y=n_$N._byteLength>>2;n_$N.byteLength=16+n_$y<<2;var n_$T=n_$N.getFloat32Array();switch(n_$T[2+n_$y]=n_$M[0],n_$T[3+n_$y]=n_$M[1],n_$T[6+n_$y]=n_$M[2],n_$T[7+n_$y]=n_$M[3],n_$T[10+n_$y]=n_$M[4],n_$T[11+n_$y]=n_$M[5],n_$T[14+n_$y]=n_$M[6],n_$T[15+n_$y]=n_$M[7],n_$_){case 1:n_$c=n_$n.tx+n_$V,n_$E=n_$n.ty+n_$A;var n_$L=n_$d*n_$a,n_$R=n_$l*n_$u,n_$w=n_$i*n_$u,n_$B=n_$Q*n_$a,n_$Y=n_$d*(n_$X=n_$e+n_$a),n_$K=n_$l*(n_$r=n_$J+n_$u),n_$k=n_$i*n_$r,n_$S=n_$Q*n_$X;n_$O?(n_$F=n_$L+n_$R+n_$c,n_$s=Math.round(n_$F)-n_$F,n_$D=n_$w+n_$B+n_$E,n_$q=Math.round(n_$D)-n_$D,n_$T[n_$y]=n_$F+n_$s,n_$T[1+n_$y]=n_$D+n_$q,n_$T[4+n_$y]=n_$Y+n_$R+n_$c+n_$s,n_$T[5+n_$y]=n_$w+n_$S+n_$E+n_$q,n_$T[8+n_$y]=n_$Y+n_$K+n_$c+n_$s,n_$T[9+n_$y]=n_$k+n_$S+n_$E+n_$q,n_$T[12+n_$y]=n_$L+n_$K+n_$c+n_$s,n_$T[13+n_$y]=n_$k+n_$B+n_$E+n_$q):(n_$T[n_$y]=n_$L+n_$R+n_$c,n_$T[1+n_$y]=n_$w+n_$B+n_$E,n_$T[4+n_$y]=n_$Y+n_$R+n_$c,n_$T[5+n_$y]=n_$w+n_$S+n_$E,n_$T[8+n_$y]=n_$Y+n_$K+n_$c,n_$T[9+n_$y]=n_$k+n_$S+n_$E,n_$T[12+n_$y]=n_$L+n_$K+n_$c,n_$T[13+n_$y]=n_$k+n_$B+n_$E);break;case 23:n_$O?(n_$F=n_$G+n_$P,n_$s=Math.round(n_$F)-n_$F,n_$D=n_$z,n_$q=Math.round(n_$D)-n_$D,n_$T[n_$y]=n_$F+n_$s,n_$T[1+n_$y]=n_$D+n_$q,n_$T[4+n_$y]=n_$f+n_$P+n_$s,n_$T[5+n_$y]=n_$z+n_$q,n_$T[8+n_$y]=n_$f+n_$s,n_$T[9+n_$y]=n_$t+n_$q,n_$T[12+n_$y]=n_$G+n_$s,n_$T[13+n_$y]=n_$t+n_$q):(n_$T[n_$y]=n_$G+n_$P,n_$T[1+n_$y]=n_$z,n_$T[4+n_$y]=n_$f+n_$P,n_$T[5+n_$y]=n_$z,n_$T[8+n_$y]=n_$f,n_$T[9+n_$y]=n_$t,n_$T[12+n_$y]=n_$G,n_$T[13+n_$y]=n_$t)}return n_$N._upload=!0},n_$z.fillLineVb=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){var n_$V=.5*n_$M,n_$A=n_$z._fillLineArray,n_$P=-(n_$u-n_$J),n_$$=n_$a-n_$e,n_$O=Math.sqrt(n_$P*n_$P+n_$$*n_$$);n_$P/=n_$O,n_$$/=n_$O,n_$P*=n_$V,n_$$*=n_$V,n_$A[0]=n_$a-n_$P,n_$A[1]=n_$u-n_$$,n_$A[4]=n_$a+n_$P,n_$A[5]=n_$u+n_$$,n_$A[8]=n_$e+n_$P,n_$A[9]=n_$J+n_$$,n_$A[12]=n_$e-n_$P,n_$A[13]=n_$J-n_$$,n_$n&&n_$n.transformPointArray(n_$A,n_$A);var n_$G=16+(n_$N._byteLength>>2);return n_$N.byteLength=n_$G<<2,n_$N.insertData(n_$A,n_$G-16),!0},n_$z._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n_$z}(),n_$gN=(function(){function n_$V(){}n_$O(n_$V,"laya.webgl.utils.MatirxArray"),n_$V.ArrayMul=function(n_$N,n_$C,n_$a){if(n_$N)if(n_$C)for(var n_$u=NaN,n_$e=NaN,n_$J=NaN,n_$M=NaN,n_$n=0;n_$n<4;n_$n++)n_$u=n_$N[n_$n],n_$e=n_$N[n_$n+4],n_$J=n_$N[n_$n+8],n_$M=n_$N[n_$n+12],n_$a[n_$n]=n_$u*n_$C[0]+n_$e*n_$C[1]+n_$J*n_$C[2]+n_$M*n_$C[3],n_$a[n_$n+4]=n_$u*n_$C[4]+n_$e*n_$C[5]+n_$J*n_$C[6]+n_$M*n_$C[7],n_$a[n_$n+8]=n_$u*n_$C[8]+n_$e*n_$C[9]+n_$J*n_$C[10]+n_$M*n_$C[11],n_$a[n_$n+12]=n_$u*n_$C[12]+n_$e*n_$C[13]+n_$J*n_$C[14]+n_$M*n_$C[15];else n_$V.copyArray(n_$N,n_$a);else n_$V.copyArray(n_$C,n_$a)},n_$V.copyArray=function(n_$N,n_$C){if(n_$N&&n_$C)for(var n_$a=0;n_$a<n_$N.length;n_$a++)n_$C[n_$a]=n_$N[n_$a]}}(),function(){function n_$C(n_$N,n_$C,n_$a){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=n_$N,this._vb=new n_$UN(n_$N,35048),n_$C&&this._vb._resizeBuffer(n_$C,!1),this._ib=new n_$hN,n_$a&&this._ib._resizeBuffer(n_$a,!1)}n_$O(n_$C,"laya.webgl.utils.Mesh2D");var n_$N=n_$C.prototype;return n_$N.cloneWithNewVB=function(){var n_$N=new n_$C(this._stride,0,0);return n_$N._ib=this._ib,n_$N._quadNum=this._quadNum,n_$N._attribInfo=this._attribInfo,n_$N},n_$N.cloneWithNewVBIB=function(){var n_$N=new n_$C(this._stride,0,0);return n_$N._attribInfo=this._attribInfo,n_$N},n_$N.getVBW=function(){return this._vb.setNeedUpload(),this._vb},n_$N.getVBR=function(){return this._vb},n_$N.getIBR=function(){return this._ib},n_$N.getIBW=function(){return this._ib.setNeedUpload(),this._ib},n_$N.createQuadIB=function(n_$N){this._quadNum=n_$N,this._ib._resizeBuffer(6*n_$N*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var n_$C=this._ib.getUint16Array(),n_$a=0,n_$u=0,n_$e=0;n_$e<n_$N;n_$e++)n_$C[n_$a++]=n_$u,n_$C[n_$a++]=n_$u+2,n_$C[n_$a++]=n_$u+1,n_$C[n_$a++]=n_$u,n_$C[n_$a++]=n_$u+3,n_$C[n_$a++]=n_$u+2,n_$u+=4;this._ib.setNeedUpload()},n_$N.setAttributes=function(n_$N){if(this._attribInfo=n_$N,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},n_$N.getEleNum=function(){return this._ib.getBuffer().byteLength/2},n_$N.releaseMesh=function(){},n_$N.destroy=function(){},n_$N.clearVB=function(){this._vb.clear()},n_$C._gvaoid=0,n_$C}()),n_$xN=function(){function n_$e(){}return n_$O(n_$e,"laya.webgl.utils.RenderState2D"),n_$e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},n_$e.mat2MatArray=function(n_$N,n_$C){var n_$a=n_$N,n_$u=n_$C;return n_$u[0]=n_$a.a,n_$u[1]=n_$a.b,n_$u[2]=n_$e.EMPTYMAT4_ARRAY[2],n_$u[3]=n_$e.EMPTYMAT4_ARRAY[3],n_$u[4]=n_$a.c,n_$u[5]=n_$a.d,n_$u[6]=n_$e.EMPTYMAT4_ARRAY[6],n_$u[7]=n_$e.EMPTYMAT4_ARRAY[7],n_$u[8]=n_$e.EMPTYMAT4_ARRAY[8],n_$u[9]=n_$e.EMPTYMAT4_ARRAY[9],n_$u[10]=n_$e.EMPTYMAT4_ARRAY[10],n_$u[11]=n_$e.EMPTYMAT4_ARRAY[11],n_$u[12]=n_$a.tx,n_$u[13]=n_$a.ty,n_$u[14]=n_$e.EMPTYMAT4_ARRAY[14],n_$u[15]=n_$e.EMPTYMAT4_ARRAY[15],n_$C},n_$e.restoreTempArray=function(){n_$e.TEMPMAT4_ARRAY[0]=1,n_$e.TEMPMAT4_ARRAY[1]=0,n_$e.TEMPMAT4_ARRAY[4]=0,n_$e.TEMPMAT4_ARRAY[5]=1,n_$e.TEMPMAT4_ARRAY[12]=0,n_$e.TEMPMAT4_ARRAY[13]=0},n_$e.clear=function(){n_$e.worldScissorTest=!1,n_$e.worldShaderDefines=null,n_$e.worldFilters=null,n_$e.worldAlpha=1,n_$e.worldClipRect.x=n_$e.worldClipRect.y=0,n_$e.worldClipRect.width=n_$e.width,n_$e.worldClipRect.height=n_$e.height,n_$e.curRenderTarget=null},n_$e._MAXSIZE=99999999,n_$e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n_$e.worldMatrix4=n_$e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n_$e.worldAlpha=1,n_$e.worldScissorTest=!1,n_$e.worldFilters=null,n_$e.worldShaderDefines=null,n_$e.curRenderTarget=null,n_$e.width=0,n_$e.height=0,n_$M(n_$e,["worldMatrix",function(){return this.worldMatrix=new n_$F},"worldClipRect",function(){return this.worldClipRect=new n_$s(0,0,99999999,99999999)}]),n_$e}(),n_$WN=function(){var n_$x,n_$a;function n_$W(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=this;function n_$M(n_$N){var n_$C=[],n_$a=new n_$x(n_$C);return n_$J._compileToTree(n_$a,n_$N.split("\n"),0,n_$C,n_$e),n_$a}var n_$n=n_$G.now();this._VS=n_$M(n_$C),this._PS=n_$M(n_$a),this._nameMap=n_$u,2<n_$G.now()-n_$n&&console.log("ShaderCompile use time:"+(n_$G.now()-n_$n)+"  size:"+n_$C.length+"/"+n_$a.length)}n_$O(n_$W,"laya.webgl.utils.ShaderCompile");var n_$N=n_$W.prototype;return n_$N._compileToTree=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$,n_$O=0,n_$G=0,n_$z=0,n_$f=0;for(n_$G=n_$a;n_$G<n_$C.length;n_$G++)if(!((n_$n=n_$C[n_$G]).length<1)&&0!==(n_$O=n_$n.indexOf("//"))){if(0<=n_$O&&(n_$n=n_$n.substr(0,n_$O)),n_$J=n_$$||new n_$x(n_$u),n_$$=null,n_$J.text=n_$n,n_$J.noCompile=!0,0<=(n_$O=n_$n.indexOf("#"))){for(n_$V="#",n_$f=n_$O+1,n_$z=n_$n.length;n_$f<n_$z;n_$f++){var n_$t=n_$n.charAt(n_$f);if(" "===n_$t||"\t"===n_$t||"\r"===n_$t||"\n"===n_$t||"?"===n_$t)break;n_$V+=n_$t}switch(n_$J.name=n_$V){case"#ifdef":case"#ifndef":if(n_$J.src=n_$n,n_$J.noCompile=null!=n_$n.match(/[!&|()=<>]/),n_$J.noCompile?console.log("function():Boolean{return "+n_$n.substr(n_$O+n_$J.name.length)+"}"):(n_$P=n_$n.replace(/^\s*/,"").split(/\s+/),n_$J.setCondition(n_$P[1],"#ifdef"===n_$V?1:2),n_$J.text="//"+n_$J.text),n_$J.setParent(n_$N),n_$N=n_$J,n_$e)for(n_$P=n_$n.substr(n_$f).split(n_$W._splitToWordExps3),n_$f=0;n_$f<n_$P.length;n_$f++)(n_$n=n_$P[n_$f]).length&&(n_$e[n_$n]=!0);continue;case"#if":if(n_$J.src=n_$n,n_$J.noCompile=!0,n_$J.setParent(n_$N),n_$N=n_$J,n_$e)for(n_$P=n_$n.substr(n_$f).split(n_$W._splitToWordExps3),n_$f=0;n_$f<n_$P.length;n_$f++)(n_$n=n_$P[n_$f]).length&&"defined"!=n_$n&&(n_$e[n_$n]=!0);continue;case"#else":n_$J.src=n_$n,n_$M=(n_$N=n_$N.parent).childs[n_$N.childs.length-1],n_$J.noCompile=n_$M.noCompile,n_$J.noCompile||(n_$J.condition=n_$M.condition,n_$J.conditionType=1==n_$M.conditionType?2:1,n_$J.text="//"+n_$J.text+" "+n_$M.text+" "+n_$J.conditionType),n_$J.setParent(n_$N),n_$N=n_$J;continue;case"#endif":n_$M=(n_$N=n_$N.parent).childs[n_$N.childs.length-1],n_$J.noCompile=n_$M.noCompile,n_$J.noCompile||(n_$J.text="//"+n_$J.text),n_$J.setParent(n_$N);continue;case"#include":n_$P=n_$W.splitToWords(n_$n,null);var n_$g=n_$W.includes[n_$P[1]];if(!n_$g)throw"ShaderCompile error no this include file:"+n_$P[1];if((n_$O=n_$P[0].indexOf("?"))<0){n_$J.setParent(n_$N),n_$n=n_$g.getWith("with"==n_$P[2]?n_$P[3]:null),this._compileToTree(n_$J,n_$n.split("\n"),0,n_$u,n_$e),n_$J.text="";continue}n_$J.setCondition(n_$P[0].substr(n_$O+1),1),n_$J.text=n_$g.getWith("with"==n_$P[2]?n_$P[3]:null);break;case"#import":n_$A=(n_$P=n_$W.splitToWords(n_$n,null))[1],n_$u.push({node:n_$J,file:n_$W.includes[n_$A],ofs:n_$J.text.length});continue}}else{if((n_$M=n_$N.childs[n_$N.childs.length-1])&&!n_$M.name){0<n_$u.length&&n_$W.splitToWords(n_$n,n_$M),n_$$=n_$J,n_$M.text+="\n"+n_$n;continue}0<n_$u.length&&n_$W.splitToWords(n_$n,n_$J)}n_$J.setParent(n_$N)}},n_$N.createShader=function(n_$N,n_$C,n_$a){var n_$u={},n_$e="";if(n_$N)for(var n_$J in n_$N)n_$e+="#define "+n_$J+"\n",n_$u[n_$J]=!0;var n_$M=this._VS.toscript(n_$u,[]),n_$n=this._PS.toscript(n_$u,[]);return(n_$a||n_$oN.create)(n_$e+n_$M.join("\n"),n_$e+n_$n.join("\n"),n_$C,this._nameMap)},n_$W._parseOne=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M={type:n_$W.shaderParamsMap[n_$a[n_$u+1]],name:n_$a[n_$u+2],size:isNaN(parseInt(n_$a[n_$u+3]))?1:parseInt(n_$a[n_$u+3])};return n_$J&&("attribute"==n_$e?n_$N.push(n_$M):n_$C.push(n_$M)),":"==n_$a[n_$u+3]&&(n_$M.type=n_$a[n_$u+4],n_$u+=2),n_$u+=2},n_$W.addInclude=function(n_$N,n_$C){if(!n_$C||0===n_$C.length)throw new Error("add shader include file err:"+n_$N);if(n_$W.includes[n_$N])throw new Error("add shader include file err, has add:"+n_$N);n_$W.includes[n_$N]=new n_$a(n_$C)},n_$W.preGetParams=function(n_$N,n_$C){var n_$a=[n_$N,n_$C],n_$u={},n_$e=[],n_$J=[],n_$M={},n_$n=[];n_$u.attributes=n_$e,n_$u.uniforms=n_$J,n_$u.defines=n_$M;for(var n_$V=0,n_$A=0,n_$P=0;n_$P<2;n_$P++){n_$a[n_$P]=n_$a[n_$P].replace(n_$W._removeAnnotation,"");var n_$$,n_$O=n_$a[n_$P].match(n_$W._reg);for(n_$V=0,n_$A=n_$O.length;n_$V<n_$A;n_$V++){var n_$G=n_$O[n_$V];if("attribute"==n_$G||"uniform"==n_$G)n_$V=n_$W._parseOne(n_$e,n_$J,n_$O,n_$V,n_$G,!0);else{if("#define"==n_$G){n_$n[n_$G=n_$O[++n_$V]]=1;continue}if("#ifdef"==n_$G){n_$M[n_$$=n_$O[++n_$V]]=n_$M[n_$$]||[];for(n_$V++;n_$V<n_$A;n_$V++)if("attribute"==(n_$G=n_$O[n_$V])||"uniform"==n_$G)n_$V=n_$W._parseOne(n_$e,n_$J,n_$O,n_$V,n_$G,n_$n[n_$$]);else if("#else"==n_$G)for(n_$V++;n_$V<n_$A;n_$V++)if("attribute"==(n_$G=n_$O[n_$V])||"uniform"==n_$G)n_$V=n_$W._parseOne(n_$e,n_$J,n_$O,n_$V,n_$G,!n_$n[n_$$]);else if("#endif"==n_$G)break}}}}return n_$u},n_$W.splitToWords=function(n_$N,n_$C){for(var n_$a,n_$u,n_$e=[],n_$J=-1,n_$M=0,n_$n=n_$N.length;n_$M<n_$n;n_$M++)if(n_$a=n_$N.charAt(n_$M),0<=" \t=+-*/&%!<>()'\",;".indexOf(n_$a)){if(0<=n_$J&&1<n_$M-n_$J&&(n_$u=n_$N.substr(n_$J,n_$M-n_$J),n_$e.push(n_$u)),'"'==n_$a||"'"==n_$a){var n_$V=n_$N.indexOf(n_$a,n_$M+1);if(n_$V<0)throw"Sharder err:"+n_$N;n_$e.push(n_$N.substr(n_$M+1,n_$V-n_$M-1)),n_$M=n_$V,n_$J=-1;continue}"("==n_$a&&n_$C&&0<n_$e.length&&(n_$u=n_$e[n_$e.length-1]+";","vec4;main;".indexOf(n_$u)<0&&(n_$C.useFuns+=n_$u)),n_$J=-1}else n_$J<0&&(n_$J=n_$M);return n_$J<n_$n&&1<n_$n-n_$J&&(n_$u=n_$N.substr(n_$J,n_$n-n_$J),n_$e.push(n_$u)),n_$e},n_$W.IFDEF_NO=0,n_$W.IFDEF_YES=1,n_$W.IFDEF_ELSE=2,n_$W.IFDEF_PARENT=3,n_$W._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),n_$W._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),n_$W._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),n_$W.includes={},n_$M(n_$W,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),n_$W.__init$=function(){n_$x=function(){function n_$a(n_$N){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=n_$N}n_$O(n_$a,"");var n_$N=n_$a.prototype;return n_$N.setParent=function(n_$N){n_$N.childs.push(this),this.z=n_$N.z+1,this.parent=n_$N},n_$N.setCondition=function(n_$N,n_$C){n_$N&&(this.conditionType=n_$C,n_$N=n_$N.replace(/(\s*$)/g,""),this.condition=function(){return this[n_$N]},this.condition.__condition=n_$N)},n_$N.toscript=function(n_$N,n_$C){return this._toscript(n_$N,n_$C,++n_$a.__id)},n_$N._toscript=function(n_$u,n_$e,n_$J){if(this.childs.length<1&&!this.text)return n_$e;n_$e.length;if(this.condition){var n_$N=!!this.condition.call(n_$u);if(2===this.conditionType&&(n_$N=!n_$N),!n_$N)return n_$e}if(this.text&&n_$e.push(this.text),0<this.childs.length&&this.childs.forEach(function(n_$N,n_$C,n_$a){n_$N._toscript(n_$u,n_$e,n_$J)}),0<this.includefiles.length&&0<this.useFuns.length)for(var n_$C,n_$a=0,n_$M=this.includefiles.length;n_$a<n_$M;n_$a++)this.includefiles[n_$a].curUseID!=n_$J&&0<(n_$C=this.includefiles[n_$a].file.getFunsScript(this.useFuns)).length&&(this.includefiles[n_$a].curUseID=n_$J,n_$e[0]=n_$C+n_$e[0]);return n_$e},n_$a.__id=1,n_$a}(),n_$a=function(){function n_$N(n_$N){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=n_$N;for(var n_$C=0,n_$a=0,n_$u=0;!((n_$C=n_$N.indexOf("#begin",n_$C))<0);){for(n_$u=n_$C+5;!((n_$u=n_$N.indexOf("#end",n_$u))<0)&&"i"===n_$N.charAt(n_$u+4);)n_$u+=5;if(n_$u<0)throw"add include err,no #end:"+n_$N;n_$a=n_$N.indexOf("\n",n_$C);var n_$e=n_$W.splitToWords(n_$N.substr(n_$C,n_$a-n_$C),null);"code"==n_$e[1]?this.codes[n_$e[2]]=n_$N.substr(n_$a+1,n_$u-n_$a-1):"function"==n_$e[1]&&(n_$a=n_$N.indexOf("function",n_$C),n_$a+="function".length,this.funs[n_$e[3]]=n_$N.substr(n_$a+1,n_$u-n_$a-1),this.funnames+=n_$e[3]+";"),n_$C=n_$u+1}}n_$O(n_$N,"");var n_$C=n_$N.prototype;return n_$C.getWith=function(n_$N){var n_$C=n_$N?this.codes[n_$N]:this.script;if(!n_$C)throw"get with error:"+n_$N;return n_$C},n_$C.getFunsScript=function(n_$N){var n_$C="";for(var n_$a in this.funs)0<=n_$N.indexOf(n_$a+";")&&(n_$C+=this.funs[n_$a]);return n_$C},n_$N}()},n_$W}(),n_$vN=function(){function n_$M(){}return n_$O(n_$M,"laya.webgl.WebGL"),n_$M._uint8ArraySlice=function(){for(var n_$N=this.length,n_$C=new Uint8Array(this.length),n_$a=0;n_$a<n_$N;n_$a++)n_$C[n_$a]=this[n_$a];return n_$C},n_$M._float32ArraySlice=function(){for(var n_$N=this.length,n_$C=new Float32Array(this.length),n_$a=0;n_$a<n_$N;n_$a++)n_$C[n_$a]=this[n_$a];return n_$C},n_$M._uint16ArraySlice=function(n_$N){var n_$C,n_$a=arguments,n_$u=0,n_$e=0;if(0===n_$a.length)for(n_$u=this.length,n_$C=new Uint16Array(n_$u),n_$e=0;n_$e<n_$u;n_$e++)n_$C[n_$e]=this[n_$e];else if(2===n_$a.length){var n_$J=n_$a[0],n_$M=n_$a[1];if(n_$J<n_$M)for(n_$u=n_$M-n_$J,n_$C=new Uint16Array(n_$u),n_$e=n_$J;n_$e<n_$M;n_$e++)n_$C[n_$e-n_$J]=this[n_$e];else n_$C=new Uint16Array(0)}return n_$C},n_$M.expandContext=function(){var n_$N=n_$e.prototype,n_$C=CanvasRenderingContext2D.prototype;n_$C.fillTrangles=n_$N.fillTrangles,n_$HN.__int__(null),n_$C.setIBVB=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){void 0===n_$V&&(n_$V=0),void 0===n_$A&&(n_$A=0),null===n_$a&&(this._ib=this._ib||n_$hN.QuadrangleIB,n_$a=this._ib,n_$tN.expandIBQuadrangle(n_$a,n_$u._byteLength/64+8)),this._setIBVB(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A)},n_$C.fillTrangles=function(n_$N,n_$C,n_$a,n_$u,n_$e){this._curMat=this._curMat||n_$F.create(),this._vb=this._vb||n_$UN.create(),this._ib||(this._ib=n_$hN.create(),n_$tN.fillIBQuadrangle(this._ib,n_$M/4));var n_$J=this._vb,n_$M=n_$u.length>>4;n_$tN.fillTranglesVB(n_$J,n_$C,n_$a,n_$u,n_$e||this._curMat,0,0),n_$tN.expandIBQuadrangle(this._ib,n_$J._byteLength/64+8);var n_$n=new n_$EN(1,0);n_$n.textureHost=n_$N;var n_$V=new n_$ZN("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");n_$J._vertType=3,this._setIBVB(n_$C,n_$a,this._ib,n_$J,6*n_$M,n_$e,n_$V,n_$n,0,0)}},n_$M.enable=function(){if(n_$G.__init__(),n_$g.isConchApp&&!n_$g.isConchWebGL)return n_$X.skinAniSprite=function(){return new n_$NN},n_$M.expandContext(),!1;if(n_$X.getWebGLContext=function(n_$N){for(var n_$C,n_$a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n_$u=0;n_$u<n_$a.length;n_$u++){try{n_$C=n_$N.getContext(n_$a[n_$u],{stencil:n_$c.isStencil,alpha:n_$c.isAlpha,antialias:n_$c.isAntialias,premultipliedAlpha:n_$c.premultipliedAlpha,preserveDrawingBuffer:n_$c.preserveDrawingBuffer})}catch(n_$N){}if(n_$C)return n_$C}return null},null==(n_$M.mainContext=n_$M.mainContext||n_$X.getWebGLContext(n_$g._mainCanvas)))return!1;if(n_$g.isWebGL)return!0;n_$f.create=function(n_$N,n_$C){return new n_$NC(n_$N,n_$C)},n_$t.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){return new n_$bN(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M)},n_$g.WebGL=n_$M,n_$g.isWebGL=!0,n_$GN.__init__(),n_$X.createRenderSprite=function(n_$N,n_$C){return new n_$FN(n_$N,n_$C)},n_$X.createWebGLContext2D=function(n_$N){return new n_$cN(n_$N)},n_$X.changeWebGLSize=function(n_$N,n_$C){laya.webgl.WebGL.onStageResize(n_$N,n_$C)},n_$X.createGraphics=function(){return new n_$rN};var n_$N=n_$X.createFilterAction;return n_$X.createFilterAction=n_$N||function(n_$N){return new n_$DN},n_$X.clear=function(n_$N){n_$xN.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var n_$C=n_$g.context.ctx,n_$a=0==n_$C._submits._length||n_$c.preserveDrawingBuffer?n_$z.create(n_$N)._color:n_$_._wgColor;n_$a&&n_$C.clearBG(n_$a[0],n_$a[1],n_$a[2],n_$a[3]),n_$xN.clear()},n_$X.addToAtlas=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!1);var n_$a=n_$N.bitmap;n_$g.optimizeTextureMemory(n_$N.url,n_$N)?n_$r.__typeof(n_$a,"laya.webgl.resource.IMergeAtlasBitmap")&&n_$a.allowMerageInAtlas&&n_$a.on("recovered",n_$N,n_$N.addTextureToAtlas):n_$a.enableMerageInAtlas=!1},n_$X.isAtlas=function(n_$N){return n_$N instanceof laya.webgl.atlas.AtlasWebGLCanvas},n_$B._enable(),n_$X.beginFlush=function(){for(var n_$N=n_$B.instance,n_$C=n_$N.getAtlaserCount(),n_$a=0;n_$a<n_$C;n_$a++){var n_$u=n_$N.getAtlaserByIndex(n_$a).texture;n_$u._flashCacheImageNeedFlush&&n_$X.flashFlushImage(n_$u)}},n_$X.drawToCanvas=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){(n_$a<=0||n_$u<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),n_$a|=0,n_$u|=0,n_$e|=0,n_$J|=0;var n_$M=n_$TN.create(n_$a,n_$u,6408,5121,0,!1);n_$M.start(),n_$M.clear(0,0,0,0),n_$g.context.clear(),n_$x.renders[n_$C]._fun(n_$N,n_$g.context,n_$e,n_$xN.height-n_$u+n_$J),n_$g.context.flush(),n_$M.end();var n_$n=n_$M.getData(0,0,n_$a,n_$u);if(n_$M.recycle(),n_$n.byteLength==n_$a*n_$u*4){var n_$V=new n_$SN;n_$V._canvas=n_$G.createElement("canvas"),n_$V.size(n_$a,n_$u);var n_$A=n_$V._canvas.getContext("2d");n_$G.canvas.size(n_$a,n_$u);var n_$P=n_$G.context,n_$$=n_$P.createImageData(n_$a,n_$u);return n_$$.data.set(new Uint8ClampedArray(n_$n.buffer)),n_$V._imgData=n_$$,n_$P.putImageData(n_$$,0,0),n_$A.save(),n_$A.translate(0,n_$u),n_$A.scale(1,-1),n_$A.drawImage(n_$G.canvas.source,0,0),n_$A.restore(),n_$V}console.log("drawToCanvas error: w:"+n_$a+",h:"+n_$u+",datalen:"+n_$n.byteLength)},n_$X.createFilterAction=function(n_$N){var n_$C;switch(n_$N){case 32:n_$C=new n_$DN}return n_$C},n_$X.addTextureToAtlas=function(n_$N){n_$N._uvID++,n_$B._atlasRestore++,n_$N.bitmap.enableMerageInAtlas&&n_$B.instance.addToAtlas(n_$N)},n_$X.getTexturePixels=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$g.context.ctx.clear();var n_$J=new n_$q;n_$J.graphics.drawTexture(n_$N,-n_$C,-n_$a);var n_$M=n_$TN.create(n_$u,n_$e);n_$M.start(),n_$M.clear(0,0,0,0),n_$J.render(n_$g.context,0,0),n_$g.context.ctx.flush(),n_$M.end();for(var n_$n=n_$M.getData(0,0,n_$u,n_$e),n_$V=[],n_$A=0,n_$P=n_$e-1;0<=n_$P;n_$P--)for(var n_$$=0;n_$$<n_$u;n_$$++)n_$A=4*(n_$P*n_$u+n_$$),n_$V.push(n_$n[n_$A]),n_$V.push(n_$n[n_$A+1]),n_$V.push(n_$n[n_$A+2]),n_$V.push(n_$n[n_$A+3]);return n_$V},n_$X.skinAniSprite=function(){return new n_$NN},n_$A.create=function(n_$N,n_$C){var n_$a=new n_$SN;return n_$a._imgData=n_$C,n_$a.flipY=!1,n_$a},n_$E._filterStart=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$N.getValue("bounds"),n_$M=n_$TN.create(n_$J.width,n_$J.height);if(n_$M.start(),n_$M.clear(0,0,0,0),n_$N.addValue("src",n_$M),n_$N.addValue("ScissorTest",n_$xN.worldScissorTest),n_$xN.worldScissorTest){var n_$n=new n_$s;n_$n.copyFrom(n_$a.ctx._clipRect),n_$N.addValue("clipRect",n_$n),n_$xN.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},n_$E._filterEnd=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$N.getValue("bounds");n_$N.getValue("src").end();var n_$M=n_$TN.create(n_$J.width,n_$J.height);n_$M.start(),n_$M.clear(0,0,0,0),n_$N.addValue("out",n_$M),n_$C._set$P("_filterCache",n_$M),n_$C._set$P("_isHaveGlowFilter",n_$N.getValue("_isHaveGlowFilter"))},n_$E._EndTarget=function(n_$N,n_$C){if(n_$N.getValue("src").recycle(),n_$N.getValue("out").end(),n_$N.getValue("ScissorTest")){n_$xN.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),n_$C.ctx.save();var n_$a=n_$N.getValue("clipRect");n_$C.ctx.clipRect(n_$a.x,n_$a.y,n_$a.width,n_$a.height)}},n_$E._useSrc=function(n_$N){var n_$C=n_$N.getValue("out");n_$C.end(),(n_$C=n_$N.getValue("src")).start(),n_$C.clear(0,0,0,0)},n_$E._endSrc=function(n_$N){n_$N.getValue("src").end()},n_$E._useOut=function(n_$N){var n_$C=n_$N.getValue("src");n_$C.end(),(n_$C=n_$N.getValue("out")).start(),n_$C.clear(0,0,0,0)},n_$E._endOut=function(n_$N){n_$N.getValue("out").end()},n_$E._recycleScope=function(n_$N){n_$N.recycle()},n_$E._filter=function(n_$N,n_$C,n_$a,n_$u){var n_$e=this._next;if(n_$e){var n_$J,n_$M,n_$n=n_$N.filters,n_$V=n_$n.length;if(1==n_$V&&32==n_$n[0].type)return n_$C.ctx.save(),n_$C.ctx.setFilters([n_$n[0]]),n_$e._fun.call(n_$e,n_$N,n_$C,n_$a,n_$u),void n_$C.ctx.restore();var n_$A=n_$nN.create(),n_$P=n_$D.TEMP,n_$$=n_$C.ctx._getTransformMatrix(),n_$O=n_$F.create();n_$$.copyTo(n_$O);var n_$G=0,n_$z=0,n_$f=!1,n_$t=n_$N._$P._filterCache?n_$N._$P._filterCache:null;if(!n_$t||n_$N._repaint){n_$f=n_$N._isHaveGlowFilter(),n_$A.addValue("_isHaveGlowFilter",n_$f),n_$f&&(n_$G=50,n_$z=25),(n_$M=new n_$s).copyFrom(n_$N.getSelfBounds()),n_$M.x+=n_$N.x,n_$M.y+=n_$N.y,n_$M.x-=n_$N.pivotX+4,n_$M.y-=n_$N.pivotY+4;var n_$g=n_$M.x,n_$x=n_$M.y;if(n_$M.width+=n_$G+8,n_$M.height+=n_$G+8,n_$P.x=n_$M.x*n_$O.a+n_$M.y*n_$O.c,n_$P.y=n_$M.y*n_$O.d+n_$M.x*n_$O.b,n_$M.x=n_$P.x,n_$M.y=n_$P.y,n_$P.x=n_$M.width*n_$O.a+n_$M.height*n_$O.c,n_$P.y=n_$M.height*n_$O.d+n_$M.width*n_$O.b,n_$M.width=n_$P.x,n_$M.height=n_$P.y,n_$M.width<=0||n_$M.height<=0)return;n_$t&&n_$t.recycle(),n_$A.addValue("bounds",n_$M);var n_$W=n_$MN.create([n_$A,n_$N,n_$C,0,0],n_$E._filterStart);n_$C.addRenderObject(n_$W),n_$C.ctx._renderKey=0,n_$C.ctx._shader2D.glTexture=null;var n_$v=n_$N.x-n_$g+n_$z,n_$X=n_$N.y-n_$x+n_$z;n_$e._fun.call(n_$e,n_$N,n_$C,n_$v,n_$X),n_$W=n_$MN.create([n_$A,n_$N,n_$C,0,0],n_$E._filterEnd),n_$C.addRenderObject(n_$W);for(var n_$r=0;n_$r<n_$V;n_$r++){0!=n_$r&&(n_$W=n_$MN.create([n_$A],n_$E._useSrc),n_$C.addRenderObject(n_$W),n_$J=n_$EN.create(1,0),n_$F.TEMP.identity(),n_$C.ctx.drawTarget(n_$A,0,0,n_$M.width,n_$M.height,n_$F.TEMP,"out",n_$J,null,n_$K.TOINT.overlay),n_$W=n_$MN.create([n_$A],n_$E._useOut),n_$C.addRenderObject(n_$W)),n_$n[n_$r].action.apply3d(n_$A,n_$N,n_$C,0,0)}n_$W=n_$MN.create([n_$A,n_$C],n_$E._EndTarget),n_$C.addRenderObject(n_$W)}else{if((n_$f=!!n_$N._$P._isHaveGlowFilter&&n_$N._$P._isHaveGlowFilter)&&(n_$G=50,n_$z=25),(n_$M=n_$N.getBounds()).width<=0||n_$M.height<=0)return;n_$M.width+=n_$G,n_$M.height+=n_$G,n_$P.x=n_$M.x*n_$O.a+n_$M.y*n_$O.c,n_$P.y=n_$M.y*n_$O.d+n_$M.x*n_$O.b,n_$M.x=n_$P.x,n_$M.y=n_$P.y,n_$P.x=n_$M.width*n_$O.a+n_$M.height*n_$O.c,n_$P.y=n_$M.height*n_$O.d+n_$M.width*n_$O.b,n_$M.width=n_$P.x,n_$M.height=n_$P.y,n_$A.addValue("out",n_$t)}n_$a=n_$a-n_$z-n_$N.x,n_$u=n_$u-n_$z-n_$N.y,n_$P.setTo(n_$a,n_$u),n_$O.transformPoint(n_$P),n_$a=n_$P.x+n_$M.x,n_$u=n_$P.y+n_$M.y,n_$J=n_$EN.create(1,0),n_$F.TEMP.identity(),n_$C.ctx.drawTarget(n_$A,n_$a,n_$u,n_$M.width,n_$M.height,n_$F.TEMP,"out",n_$J,null,n_$K.TOINT.overlay),n_$W=n_$MN.create([n_$A],n_$E._recycleScope),n_$C.addRenderObject(n_$W),n_$O.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=n_$M._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=n_$M._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=n_$M._uint8ArraySlice),!0},n_$M.onStageResize=function(n_$N,n_$C){null!=n_$M.mainContext&&(n_$M.mainContext.viewport(0,0,n_$N,n_$C),n_$xN.width=n_$N,n_$xN.height=n_$C)},n_$M.onInvalidGLRes=function(){n_$B.instance.freeAll(),n_$v.releaseContentManagers(!0),n_$M.doNodeRepaint(n_$r.stage),n_$M.mainContext.viewport(0,0,n_$xN.width,n_$xN.height),n_$r.stage.event("devicelost")},n_$M.doNodeRepaint=function(n_$N){0==n_$N.numChildren&&n_$N.repaint();for(var n_$C=0;n_$C<n_$N.numChildren;n_$C++)n_$M.doNodeRepaint(n_$N.getChildAt(n_$C))},n_$M.init=function(n_$N,n_$C,n_$a){n_$M.mainCanvas=n_$N,n_$A._createContext=function(n_$N){return new n_$cN(n_$N)},n_$SN._createContext=function(n_$N){return new n_$cN(n_$N)};var n_$u=laya.webgl.WebGL.mainContext;if(null!=n_$u.getShaderPrecisionFormat){var n_$e=n_$u.getShaderPrecisionFormat(35633,36338),n_$J=n_$u.getShaderPrecisionFormat(35632,36338);n_$M.shaderHighPrecision=!(!n_$e.precision||!n_$J.precision)}else n_$M.shaderHighPrecision=!1;if(n_$M.compressAstc=n_$u.getExtension("WEBGL_compressed_texture_astc"),n_$M.compressAtc=n_$u.getExtension("WEBGL_compressed_texture_atc"),n_$M.compressEtc=n_$u.getExtension("WEBGL_compressed_texture_etc"),n_$M.compressEtc1=n_$u.getExtension("WEBGL_compressed_texture_etc1"),n_$M.compressPvrtc=n_$u.getExtension("WEBGL_compressed_texture_pvrtc"),n_$M.compressS3tc=n_$u.getExtension("WEBGL_compressed_texture_s3tc"),n_$M.compressS3tc_srgb=n_$u.getExtension("WEBGL_compressed_texture_s3tc_srgb"),n_$M.compressAstc=n_$M.compressAstc?n_$M.compressAstc:{},n_$M.compressAtc=n_$M.compressAtc?n_$M.compressAtc:{},n_$M.compressEtc=n_$M.compressEtc?n_$M.compressEtc:{},n_$M.compressEtc1=n_$M.compressEtc1?n_$M.compressEtc1:{},n_$M.compressPvrtc=n_$M.compressPvrtc?n_$M.compressPvrtc:{},n_$M.compressS3tc=n_$M.compressS3tc?n_$M.compressS3tc:{},n_$M.compressS3tc_srgb=n_$M.compressS3tc_srgb?n_$M.compressS3tc_srgb:{},n_$u.deleteTexture1=n_$u.deleteTexture,n_$u.deleteTexture=function(n_$N){n_$N==n_$XN.curBindTexValue&&(n_$XN.curBindTexValue=null),n_$u.deleteTexture1(n_$N)},n_$M.onStageResize(n_$C,n_$a),null==n_$M.mainContext)throw new Error("webGL getContext err!");n_$l.__init__(),n_$B.__init__(),n_$qN.__init__(),n_$JN.__init__(),n_$cN.__init__(),n_$EN.__init__(),n_$h.__init__(),n_$HN.__int__(n_$u),n_$K._init_(n_$u),n_$g.isConchApp&&conch.setOnInvalidGLRes(n_$M.onInvalidGLRes)},n_$M.mainCanvas=null,n_$M.antialias=!0,n_$M.shaderHighPrecision=!1,n_$M._bg_null=[0,0,0,0],n_$M}(),n_$XN=function(){function n_$u(){}return n_$O(n_$u,"laya.webgl.WebGLContext"),n_$u.UseProgram=function(n_$N){return n_$u._useProgram!==n_$N&&(n_$vN.mainContext.useProgram(n_$N),n_$u._useProgram=n_$N,!0)},n_$u.setDepthTest=function(n_$N,n_$C){n_$C!==n_$u._depthTest&&((n_$u._depthTest=n_$C)?n_$N.enable(2929):n_$N.disable(2929))},n_$u.setDepthMask=function(n_$N,n_$C){n_$C!==n_$u._depthMask&&(n_$u._depthMask=n_$C,n_$N.depthMask(n_$C))},n_$u.setDepthFunc=function(n_$N,n_$C){n_$C!==n_$u._depthFunc&&(n_$u._depthFunc=n_$C,n_$N.depthFunc(n_$C))},n_$u.setBlend=function(n_$N,n_$C){n_$C!==n_$u._blend&&((n_$u._blend=n_$C)?n_$N.enable(3042):n_$N.disable(3042))},n_$u.setBlendFunc=function(n_$N,n_$C,n_$a){(n_$C!==n_$u._sFactor||n_$a!==n_$u._dFactor)&&(n_$u._sFactor=n_$C,n_$u._dFactor=n_$a,n_$N.blendFunc(n_$C,n_$a))},n_$u.setCullFace=function(n_$N,n_$C){n_$C!==n_$u._cullFace&&((n_$u._cullFace=n_$C)?n_$N.enable(2884):n_$N.disable(2884))},n_$u.setFrontFace=function(n_$N,n_$C){n_$C!==n_$u._frontFace&&(n_$u._frontFace=n_$C,n_$N.frontFace(n_$C))},n_$u.bindTexture=function(n_$N,n_$C,n_$a){n_$N.bindTexture(n_$C,n_$a),n_$u.curBindTexTarget=n_$C,n_$u.curBindTexValue=n_$a},n_$u.DEPTH_BUFFER_BIT=256,n_$u.STENCIL_BUFFER_BIT=1024,n_$u.COLOR_BUFFER_BIT=16384,n_$u.POINTS=0,n_$u.LINES=1,n_$u.LINE_LOOP=2,n_$u.LINE_STRIP=3,n_$u.TRIANGLES=4,n_$u.TRIANGLE_STRIP=5,n_$u.TRIANGLE_FAN=6,n_$u.ZERO=0,n_$u.ONE=1,n_$u.SRC_COLOR=768,n_$u.ONE_MINUS_SRC_COLOR=769,n_$u.SRC_ALPHA=770,n_$u.ONE_MINUS_SRC_ALPHA=771,n_$u.DST_ALPHA=772,n_$u.ONE_MINUS_DST_ALPHA=773,n_$u.DST_COLOR=774,n_$u.ONE_MINUS_DST_COLOR=775,n_$u.SRC_ALPHA_SATURATE=776,n_$u.FUNC_ADD=32774,n_$u.BLEND_EQUATION=32777,n_$u.BLEND_EQUATION_RGB=32777,n_$u.BLEND_EQUATION_ALPHA=34877,n_$u.FUNC_SUBTRACT=32778,n_$u.FUNC_REVERSE_SUBTRACT=32779,n_$u.BLEND_DST_RGB=32968,n_$u.BLEND_SRC_RGB=32969,n_$u.BLEND_DST_ALPHA=32970,n_$u.BLEND_SRC_ALPHA=32971,n_$u.CONSTANT_COLOR=32769,n_$u.ONE_MINUS_CONSTANT_COLOR=32770,n_$u.CONSTANT_ALPHA=32771,n_$u.ONE_MINUS_CONSTANT_ALPHA=32772,n_$u.BLEND_COLOR=32773,n_$u.ARRAY_BUFFER=34962,n_$u.ELEMENT_ARRAY_BUFFER=34963,n_$u.ARRAY_BUFFER_BINDING=34964,n_$u.ELEMENT_ARRAY_BUFFER_BINDING=34965,n_$u.STREAM_DRAW=35040,n_$u.STATIC_DRAW=35044,n_$u.DYNAMIC_DRAW=35048,n_$u.BUFFER_SIZE=34660,n_$u.BUFFER_USAGE=34661,n_$u.CURRENT_VERTEX_ATTRIB=34342,n_$u.FRONT=1028,n_$u.BACK=1029,n_$u.CULL_FACE=2884,n_$u.FRONT_AND_BACK=1032,n_$u.BLEND=3042,n_$u.DITHER=3024,n_$u.STENCIL_TEST=2960,n_$u.DEPTH_TEST=2929,n_$u.SCISSOR_TEST=3089,n_$u.POLYGON_OFFSET_FILL=32823,n_$u.SAMPLE_ALPHA_TO_COVERAGE=32926,n_$u.SAMPLE_COVERAGE=32928,n_$u.NO_ERROR=0,n_$u.INVALID_ENUM=1280,n_$u.INVALID_VALUE=1281,n_$u.INVALID_OPERATION=1282,n_$u.OUT_OF_MEMORY=1285,n_$u.CW=2304,n_$u.CCW=2305,n_$u.LINE_WIDTH=2849,n_$u.ALIASED_POINT_SIZE_RANGE=33901,n_$u.ALIASED_LINE_WIDTH_RANGE=33902,n_$u.CULL_FACE_MODE=2885,n_$u.FRONT_FACE=2886,n_$u.DEPTH_RANGE=2928,n_$u.DEPTH_WRITEMASK=2930,n_$u.DEPTH_CLEAR_VALUE=2931,n_$u.DEPTH_FUNC=2932,n_$u.STENCIL_CLEAR_VALUE=2961,n_$u.STENCIL_FUNC=2962,n_$u.STENCIL_FAIL=2964,n_$u.STENCIL_PASS_DEPTH_FAIL=2965,n_$u.STENCIL_PASS_DEPTH_PASS=2966,n_$u.STENCIL_REF=2967,n_$u.STENCIL_VALUE_MASK=2963,n_$u.STENCIL_WRITEMASK=2968,n_$u.STENCIL_BACK_FUNC=34816,n_$u.STENCIL_BACK_FAIL=34817,n_$u.STENCIL_BACK_PASS_DEPTH_FAIL=34818,n_$u.STENCIL_BACK_PASS_DEPTH_PASS=34819,n_$u.STENCIL_BACK_REF=36003,n_$u.STENCIL_BACK_VALUE_MASK=36004,n_$u.STENCIL_BACK_WRITEMASK=36005,n_$u.VIEWPORT=2978,n_$u.SCISSOR_BOX=3088,n_$u.COLOR_CLEAR_VALUE=3106,n_$u.COLOR_WRITEMASK=3107,n_$u.UNPACK_ALIGNMENT=3317,n_$u.PACK_ALIGNMENT=3333,n_$u.MAX_TEXTURE_SIZE=3379,n_$u.MAX_VIEWPORT_DIMS=3386,n_$u.SUBPIXEL_BITS=3408,n_$u.RED_BITS=3410,n_$u.GREEN_BITS=3411,n_$u.BLUE_BITS=3412,n_$u.ALPHA_BITS=3413,n_$u.DEPTH_BITS=3414,n_$u.STENCIL_BITS=3415,n_$u.POLYGON_OFFSET_UNITS=10752,n_$u.POLYGON_OFFSET_FACTOR=32824,n_$u.TEXTURE_BINDING_2D=32873,n_$u.SAMPLE_BUFFERS=32936,n_$u.SAMPLES=32937,n_$u.SAMPLE_COVERAGE_VALUE=32938,n_$u.SAMPLE_COVERAGE_INVERT=32939,n_$u.NUM_COMPRESSED_TEXTURE_FORMATS=34466,n_$u.COMPRESSED_TEXTURE_FORMATS=34467,n_$u.DONT_CARE=4352,n_$u.FASTEST=4353,n_$u.NICEST=4354,n_$u.GENERATE_MIPMAP_HINT=33170,n_$u.BYTE=5120,n_$u.UNSIGNED_BYTE=5121,n_$u.SHORT=5122,n_$u.UNSIGNED_SHORT=5123,n_$u.INT=5124,n_$u.UNSIGNED_INT=5125,n_$u.FLOAT=5126,n_$u.DEPTH_COMPONENT=6402,n_$u.ALPHA=6406,n_$u.RGB=6407,n_$u.RGBA=6408,n_$u.LUMINANCE=6409,n_$u.LUMINANCE_ALPHA=6410,n_$u.UNSIGNED_SHORT_4_4_4_4=32819,n_$u.UNSIGNED_SHORT_5_5_5_1=32820,n_$u.UNSIGNED_SHORT_5_6_5=33635,n_$u.FRAGMENT_SHADER=35632,n_$u.VERTEX_SHADER=35633,n_$u.MAX_VERTEX_ATTRIBS=34921,n_$u.MAX_VERTEX_UNIFORM_VECTORS=36347,n_$u.MAX_VARYING_VECTORS=36348,n_$u.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,n_$u.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,n_$u.MAX_TEXTURE_IMAGE_UNITS=34930,n_$u.MAX_FRAGMENT_UNIFORM_VECTORS=36349,n_$u.SHADER_TYPE=35663,n_$u.DELETE_STATUS=35712,n_$u.LINK_STATUS=35714,n_$u.VALIDATE_STATUS=35715,n_$u.ATTACHED_SHADERS=35717,n_$u.ACTIVE_UNIFORMS=35718,n_$u.ACTIVE_ATTRIBUTES=35721,n_$u.SHADING_LANGUAGE_VERSION=35724,n_$u.CURRENT_PROGRAM=35725,n_$u.NEVER=512,n_$u.LESS=513,n_$u.EQUAL=514,n_$u.LEQUAL=515,n_$u.GREATER=516,n_$u.NOTEQUAL=517,n_$u.GEQUAL=518,n_$u.ALWAYS=519,n_$u.KEEP=7680,n_$u.REPLACE=7681,n_$u.INCR=7682,n_$u.DECR=7683,n_$u.INVERT=5386,n_$u.INCR_WRAP=34055,n_$u.DECR_WRAP=34056,n_$u.VENDOR=7936,n_$u.RENDERER=7937,n_$u.VERSION=7938,n_$u.NEAREST=9728,n_$u.LINEAR=9729,n_$u.NEAREST_MIPMAP_NEAREST=9984,n_$u.LINEAR_MIPMAP_NEAREST=9985,n_$u.NEAREST_MIPMAP_LINEAR=9986,n_$u.LINEAR_MIPMAP_LINEAR=9987,n_$u.TEXTURE_MAG_FILTER=10240,n_$u.TEXTURE_MIN_FILTER=10241,n_$u.TEXTURE_WRAP_S=10242,n_$u.TEXTURE_WRAP_T=10243,n_$u.TEXTURE_2D=3553,n_$u.TEXTURE=5890,n_$u.TEXTURE_CUBE_MAP=34067,n_$u.TEXTURE_BINDING_CUBE_MAP=34068,n_$u.TEXTURE_CUBE_MAP_POSITIVE_X=34069,n_$u.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,n_$u.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,n_$u.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,n_$u.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,n_$u.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,n_$u.MAX_CUBE_MAP_TEXTURE_SIZE=34076,n_$u.TEXTURE0=33984,n_$u.TEXTURE1=33985,n_$u.TEXTURE2=33986,n_$u.TEXTURE3=33987,n_$u.TEXTURE4=33988,n_$u.TEXTURE5=33989,n_$u.TEXTURE6=33990,n_$u.TEXTURE7=33991,n_$u.TEXTURE8=33992,n_$u.TEXTURE9=33993,n_$u.TEXTURE10=33994,n_$u.TEXTURE11=33995,n_$u.TEXTURE12=33996,n_$u.TEXTURE13=33997,n_$u.TEXTURE14=33998,n_$u.TEXTURE15=33999,n_$u.TEXTURE16=34e3,n_$u.TEXTURE17=34001,n_$u.TEXTURE18=34002,n_$u.TEXTURE19=34003,n_$u.TEXTURE20=34004,n_$u.TEXTURE21=34005,n_$u.TEXTURE22=34006,n_$u.TEXTURE23=34007,n_$u.TEXTURE24=34008,n_$u.TEXTURE25=34009,n_$u.TEXTURE26=34010,n_$u.TEXTURE27=34011,n_$u.TEXTURE28=34012,n_$u.TEXTURE29=34013,n_$u.TEXTURE30=34014,n_$u.TEXTURE31=34015,n_$u.ACTIVE_TEXTURE=34016,n_$u.REPEAT=10497,n_$u.CLAMP_TO_EDGE=33071,n_$u.MIRRORED_REPEAT=33648,n_$u.FLOAT_VEC2=35664,n_$u.FLOAT_VEC3=35665,n_$u.FLOAT_VEC4=35666,n_$u.INT_VEC2=35667,n_$u.INT_VEC3=35668,n_$u.INT_VEC4=35669,n_$u.BOOL=35670,n_$u.BOOL_VEC2=35671,n_$u.BOOL_VEC3=35672,n_$u.BOOL_VEC4=35673,n_$u.FLOAT_MAT2=35674,n_$u.FLOAT_MAT3=35675,n_$u.FLOAT_MAT4=35676,n_$u.SAMPLER_2D=35678,n_$u.SAMPLER_CUBE=35680,n_$u.VERTEX_ATTRIB_ARRAY_ENABLED=34338,n_$u.VERTEX_ATTRIB_ARRAY_SIZE=34339,n_$u.VERTEX_ATTRIB_ARRAY_STRIDE=34340,n_$u.VERTEX_ATTRIB_ARRAY_TYPE=34341,n_$u.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,n_$u.VERTEX_ATTRIB_ARRAY_POINTER=34373,n_$u.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,n_$u.COMPILE_STATUS=35713,n_$u.LOW_FLOAT=36336,n_$u.MEDIUM_FLOAT=36337,n_$u.HIGH_FLOAT=36338,n_$u.LOW_INT=36339,n_$u.MEDIUM_INT=36340,n_$u.HIGH_INT=36341,n_$u.FRAMEBUFFER=36160,n_$u.RENDERBUFFER=36161,n_$u.RGBA4=32854,n_$u.RGB5_A1=32855,n_$u.RGB565=36194,n_$u.DEPTH_COMPONENT16=33189,n_$u.STENCIL_INDEX=6401,n_$u.STENCIL_INDEX8=36168,n_$u.DEPTH_STENCIL=34041,n_$u.RENDERBUFFER_WIDTH=36162,n_$u.RENDERBUFFER_HEIGHT=36163,n_$u.RENDERBUFFER_INTERNAL_FORMAT=36164,n_$u.RENDERBUFFER_RED_SIZE=36176,n_$u.RENDERBUFFER_GREEN_SIZE=36177,n_$u.RENDERBUFFER_BLUE_SIZE=36178,n_$u.RENDERBUFFER_ALPHA_SIZE=36179,n_$u.RENDERBUFFER_DEPTH_SIZE=36180,n_$u.RENDERBUFFER_STENCIL_SIZE=36181,n_$u.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,n_$u.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,n_$u.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,n_$u.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,n_$u.COLOR_ATTACHMENT0=36064,n_$u.DEPTH_ATTACHMENT=36096,n_$u.STENCIL_ATTACHMENT=36128,n_$u.DEPTH_STENCIL_ATTACHMENT=33306,n_$u.NONE=0,n_$u.FRAMEBUFFER_COMPLETE=36053,n_$u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,n_$u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,n_$u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,n_$u.FRAMEBUFFER_UNSUPPORTED=36061,n_$u.FRAMEBUFFER_BINDING=36006,n_$u.RENDERBUFFER_BINDING=36007,n_$u.MAX_RENDERBUFFER_SIZE=34024,n_$u.INVALID_FRAMEBUFFER_OPERATION=1286,n_$u.UNPACK_FLIP_Y_WEBGL=37440,n_$u.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,n_$u.CONTEXT_LOST_WEBGL=37442,n_$u.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,n_$u.BROWSER_DEFAULT_WEBGL=37444,n_$u._useProgram=null,n_$u._depthTest=!0,n_$u._depthMask=!0,n_$u._blend=!1,n_$u._cullFace=!1,n_$u.curBindTexTarget=null,n_$u.curBindTexValue=null,n_$M(n_$u,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),n_$u}(),n_$rN=function(n_$N){function n_$C(){n_$C.__super.call(this)}n_$O(n_$C,"laya.webgl.display.GraphicsGL",n_$n);var n_$a=n_$C.prototype;return n_$a.setShader=function(n_$N){this._saveToCmd(n_$g.context._setShader,[n_$N])},n_$a.setIBVB=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._saveToCmd(n_$g.context._setIBVB,[n_$N,n_$C,n_$a,n_$u,n_$e,n_$J])},n_$a.drawParticle=function(n_$N,n_$C,n_$a){var n_$u=n_$X.createParticleTemplate2D(n_$a);n_$u.x=n_$N,n_$u.y=n_$C,this._saveToCmd(n_$g.context._drawParticle,[n_$u])},n_$C}(),n_$cN=function(n_$N){var n_$a;function n_$w(n_$N){this._x=0,this._y=0,this._id=++n_$w._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,n_$w.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=n_$w.MAXCLIPRECT,this.mOutPoint,this._canvas=n_$N,this._canvas._addReference(),n_$w._contextcount++,n_$g.isFlash?(this._ib=n_$hN.create(35044),n_$tN.fillIBQuadrangle(this._ib,16)):this._ib=n_$hN.QuadrangleIB,this.clear()}n_$O(n_$w,"laya.webgl.canvas.WebGLContext2D",n_$e);var n_$C=n_$w.prototype;return n_$C.setIsMainContext=function(){this._isMain=!0},n_$C.clearBG=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$vN.mainContext;n_$e.clearColor(n_$N,n_$C,n_$a,n_$u),n_$e.clear(16384)},n_$C._getSubmits=function(){return this._submits},n_$C._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var n_$N=0,n_$C=this._submits._length;n_$N<n_$C;n_$N++)this._submits[n_$N].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},n_$C.destroy=function(){--n_$w._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=n_$hN.QuadrangleIB&&this._ib.releaseResource()},n_$C.clear=function(){this._submits||(this._other=n_$a.DEFAULT,this._curMat=n_$F.create(),this._vb=n_$UN.create(-1),this._submits=[],this._save=[n_$o.Create(this)],this._save.length=10,this._shader2D=new n_$h,this._triangleMesh=n_$jN.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=n_$a.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=n_$w.MAXCLIPRECT,this._curSubmit=n_$JN.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=n_$k.DEFAULT;for(var n_$N=0,n_$C=this._submits._length;n_$N<n_$C;n_$N++)this._submits[n_$N].releaseRender(),this._submits[n_$N]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},n_$C.size=function(n_$N,n_$C){if(this._width!=n_$N||this._height!=n_$C)if(0==n_$N||0==n_$C){0!=this._vb._byteLength&&(this._width=n_$N,this._height=n_$C,this._vb.clear(),this._vb.upload());for(var n_$a=0,n_$u=this._submits._length;n_$a<n_$u;n_$a++)this._submits[n_$a].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=n_$N,this._height=n_$C,this._targets&&this._targets.size(n_$N,n_$C),this._canvas.memorySize-=this._canvas.memorySize;0===n_$N&&0===n_$C&&this._releaseMem()},n_$C._getTransformMatrix=function(){return this._curMat},n_$C.translate=function(n_$N,n_$C){0===n_$N&&0===n_$C||(n_$I.save(this),this._curMat.bTransform&&(n_$H.save(this),this._curMat.transformPointN(n_$D.TEMP.setTo(n_$N,n_$C)),n_$N=n_$D.TEMP.x,n_$C=n_$D.TEMP.y),this._x+=n_$N,this._y+=n_$C)},n_$C.save=function(){this._save[this._save._length++]=n_$o.Create(this)},n_$C.restore=function(){var n_$N=this._save._length;if(!(n_$N<1))for(var n_$C=n_$N-1;0<=n_$C;n_$C--){var n_$a=this._save[n_$C];if(n_$a.restore(this),n_$a.isSaveMark())return void(this._save._length=n_$C)}},n_$C._fillText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){void 0===n_$A&&(n_$A=0);var n_$P=this._shader2D,n_$$=this._curSubmit.shaderValue,n_$O=n_$e?n_$zN.create(n_$e):this._other.font;if(n_$B.enabled)n_$P.ALPHA!==n_$$.ALPHA&&(n_$P.glTexture=null),n_$GN.drawText(this,n_$N,n_$C,this._curMat,n_$O,n_$V||this._other.textAlign,n_$J,n_$M,n_$n,n_$a,n_$u,n_$A);else{this._shader2D.defines.getValue();var n_$G=n_$J?n_$z.create(n_$J)._color:n_$P.colorAdd;n_$P.ALPHA===n_$$.ALPHA&&n_$G===n_$P.colorAdd&&n_$$.colorAdd===n_$P.colorAdd||(n_$P.glTexture=null,n_$P.colorAdd=n_$G),n_$GN.drawText(this,n_$N,n_$C,this._curMat,n_$O,n_$V||this._other.textAlign,n_$J,n_$M,n_$n,n_$a,n_$u,n_$A)}},n_$C.fillWords=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._fillText(null,n_$N,n_$C,n_$a,n_$u,n_$e,null,-1,null,n_$J)},n_$C.fillBorderWords=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._fillBorderText(null,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,null)},n_$C.fillText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._fillText(n_$N,null,n_$C,n_$a,n_$u,n_$e,null,-1,n_$J)},n_$C.strokeText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._fillText(n_$N,null,n_$C,n_$a,n_$u,null,n_$e,n_$J||1,n_$M)},n_$C.fillBorderText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){this._fillBorderText(n_$N,null,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n)},n_$C._fillBorderText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){if(!n_$B.enabled)return this._fillText(n_$N,n_$C,n_$a,n_$u,n_$e,null,n_$M,n_$n||1,n_$V),void this._fillText(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,null,-1,n_$V);var n_$A=this._shader2D,n_$P=this._curSubmit.shaderValue;n_$A.ALPHA!==n_$P.ALPHA&&(n_$A.glTexture=null);var n_$$=n_$e?(n_$w._fontTemp.setFont(n_$e),n_$w._fontTemp):this._other.font;n_$GN.drawText(this,n_$N,n_$C,this._curMat,n_$$,n_$V||this._other.textAlign,n_$J,n_$M,n_$n||1,n_$a,n_$u,0)},n_$C.fillRect=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=this._vb;if(n_$tN.fillRectImgVb(n_$J,this._clipRect,n_$N,n_$C,n_$a,n_$u,n_$j.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var n_$M=this._shader2D.fillStyle;n_$e&&(this._shader2D.fillStyle=n_$k.create(n_$e));var n_$n=this._shader2D,n_$V=this._curSubmit.shaderValue;if(n_$n.fillStyle!==n_$V.fillStyle||n_$n.ALPHA!==n_$V.ALPHA){n_$n.glTexture=null;var n_$A=this._curSubmit=n_$JN.createSubmit(this,this._ib,n_$J,(n_$J._byteLength-64)/32*3,n_$EN.create(2,0));n_$A.shaderValue.color=n_$n.fillStyle._color._color,n_$A.shaderValue.ALPHA=n_$n.ALPHA,this._submits[this._submits._length++]=n_$A}this._curSubmit._numEle+=6,this._shader2D.fillStyle=n_$M}},n_$C.fillTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){if(n_$N.loaded&&n_$N.bitmap&&n_$N.source){var n_$V=this._vb,n_$A=n_$N.bitmap.width,n_$P=n_$N.bitmap.height,n_$$=n_$N.uv,n_$O=n_$M.x%n_$N.width,n_$G=n_$M.y%n_$N.height;if(n_$A!=n_$n.w||n_$P!=n_$n.h){if(!n_$n.w&&!n_$n.h)switch(n_$n.oy=n_$n.ox=0,n_$J){case"repeat":n_$n.width=n_$u,n_$n.height=n_$e;break;case"repeat-x":n_$n.width=n_$u,n_$G<0?n_$N.height+n_$G>n_$e?n_$n.height=n_$e:n_$n.height=n_$N.height+n_$G:(n_$n.oy=n_$G,n_$N.height+n_$G>n_$e?n_$n.height=n_$e-n_$G:n_$n.height=n_$N.height);break;case"repeat-y":n_$O<0?n_$N.width+n_$O>n_$u?n_$n.width=n_$u:n_$n.width=n_$N.width+n_$O:(n_$n.ox=n_$O,n_$N.width+n_$O>n_$u?n_$n.width=n_$u-n_$O:n_$n.width=n_$N.width),n_$n.height=n_$e;break;case"no-repeat":n_$O<0?n_$N.width+n_$O>n_$u?n_$n.width=n_$u:n_$n.width=n_$N.width+n_$O:(n_$n.ox=n_$O,n_$N.width+n_$O>n_$u?n_$n.width=n_$u-n_$O:n_$n.width=n_$N.width),n_$G<0?n_$N.height+n_$G>n_$e?n_$n.height=n_$e:n_$n.height=n_$N.height+n_$G:(n_$n.oy=n_$G,n_$N.height+n_$G>n_$e?n_$n.height=n_$e-n_$G:n_$n.height=n_$N.height);break;default:n_$n.width=n_$u,n_$n.height=n_$e}n_$n.w=n_$A,n_$n.h=n_$P,n_$n.uv=[0,0,n_$n.width/n_$A,0,n_$n.width/n_$A,n_$n.height/n_$P,0,n_$n.height/n_$P]}if(n_$C+=n_$n.ox,n_$a+=n_$n.oy,n_$O-=n_$n.ox,n_$G-=n_$n.oy,n_$tN.fillRectImgVb(n_$V,this._clipRect,n_$C,n_$a,n_$n.width,n_$n.height,n_$n.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var n_$z=n_$iN.create(this,this._ib,n_$V,(n_$V._byteLength-64)/32*3,n_$EN.create(256,0)),n_$f=(this._submits[this._submits._length++]=n_$z).shaderValue;n_$f.textureHost=n_$N;var n_$t=n_$$[0]*n_$A,n_$g=n_$$[1]*n_$P,n_$x=(n_$$[2]-n_$$[0])*n_$A,n_$W=(n_$$[5]-n_$$[3])*n_$P,n_$v=-n_$O/n_$A,n_$X=-n_$G/n_$P;n_$f.u_TexRange[0]=n_$t/n_$A,n_$f.u_TexRange[1]=n_$x/n_$A,n_$f.u_TexRange[2]=n_$g/n_$P,n_$f.u_TexRange[3]=n_$W/n_$P,n_$f.u_offset[0]=n_$v,n_$f.u_offset[1]=n_$X,n_$B.enabled&&!this._isMain&&n_$z.addTexture(n_$N,(n_$V._byteLength>>2)-16),(this._curSubmit=n_$z)._renderType=10017,n_$z._numEle+=6}}else this.sprite&&n_$r.timer.callLater(this,this._repaintSprite)},n_$C.setShader=function(n_$N){n_$p.save(this,1048576,this._shader2D,!0),this._shader2D.shader=n_$N},n_$C.setFilters=function(n_$N){n_$p.save(this,2097152,this._shader2D,!0),this._shader2D.filters=n_$N,this._curSubmit=n_$JN.RENDERBASE,this._renderKey=0,this._drawCount++},n_$C.drawTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._drawTextureM(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,null,1)},n_$C.addTextureVb=function(n_$N,n_$C,n_$a){var n_$u=this._curSubmit._vb||this._vb,n_$e=n_$u._byteLength>>2;n_$u.byteLength=n_$e+16<<2;for(var n_$J=n_$u.getFloat32Array(),n_$M=0;n_$M<16;n_$M+=4)n_$J[n_$e++]=n_$N[n_$M]+n_$C,n_$J[n_$e++]=n_$N[n_$M+1]+n_$a,n_$J[n_$e++]=n_$N[n_$M+2],n_$J[n_$e++]=n_$N[n_$M+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),n_$u._upload=!0},n_$C.willDrawTexture=function(n_$N,n_$C){if(!(n_$N.loaded&&n_$N.bitmap&&n_$N.source))return this.sprite&&n_$r.timer.callLater(this,this._repaintSprite),0;var n_$a=n_$N.bitmap,n_$u=n_$a.id+this._shader2D.ALPHA*n_$C+10016;if(n_$u==this._renderKey)return n_$u;var n_$e=this._shader2D,n_$J=n_$e.ALPHA,n_$M=this._curSubmit.shaderValue;n_$e.ALPHA*=n_$C,this._renderKey=n_$u,this._drawCount++,n_$e.glTexture=n_$a;var n_$n=this._vb,n_$V=null,n_$A=n_$n._byteLength/32*3,n_$P=n_$M.textureHost&&n_$M.textureHost==n_$N&&n_$M.textureHost.alphaTexture==n_$N.alphaTexture;return n_$V=n_$iN.create(this,this._ib,n_$n,n_$A,n_$EN.create(1,0)),(this._submits[this._submits._length++]=n_$V).shaderValue.textureHost=n_$N,n_$V._renderType=10016,n_$V._preIsSameTextureShader=10016===this._curSubmit._renderType&&n_$e.ALPHA===n_$M.ALPHA&&n_$P,this._curSubmit=n_$V,n_$e.ALPHA=n_$J,n_$u},n_$C.drawTextures=function(n_$N,n_$C,n_$a,n_$u){if(n_$N.loaded&&n_$N.bitmap&&n_$N.source){var n_$e=this._clipRect;if(this._clipRect=n_$w.MAXCLIPRECT,this._drawTextureM(n_$N,n_$C[0],n_$C[1],n_$N.width,n_$N.height,n_$a,n_$u,null,1)){if(this._clipRect=n_$e,n_$d.drawCall++,!(n_$C.length<4)){for(var n_$J=this._curSubmit._vb||this._vb,n_$M=this._curMat.a,n_$n=this._curMat.d,n_$V=2,n_$A=n_$C.length;n_$V<n_$A;n_$V+=2)n_$tN.copyPreImgVb(n_$J,(n_$C[n_$V]-n_$C[n_$V-2])*n_$M,(n_$C[n_$V+1]-n_$C[n_$V-1])*n_$n),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&n_$r.timer.callLater(this,this._repaintSprite)},n_$C._drawTextureM=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){if(!n_$N.loaded||!n_$N.source)return this.sprite&&n_$r.timer.callLater(this,this._repaintSprite),!1;var n_$A=this._curSubmit._vb||this._vb,n_$P=n_$N.bitmap;n_$C+=n_$J,n_$a+=n_$M,this._drawCount++;var n_$$=n_$P.id+this._shader2D.ALPHA*n_$V+10016;if(n_$$!=this._renderKey){this._renderKey=n_$$;var n_$O=this._curSubmit.shaderValue,n_$G=this._shader2D,n_$z=n_$G.ALPHA;n_$G.ALPHA*=n_$V,n_$G.glTexture=n_$P;var n_$f=this._vb,n_$t=null,n_$g=n_$f._byteLength/32*3,n_$x=n_$O.textureHost&&n_$O.textureHost==n_$N&&n_$O.textureHost.alphaTexture==n_$N.alphaTexture;n_$t=n_$iN.create(this,this._ib,n_$f,n_$g,n_$EN.create(1,0)),(this._submits[this._submits._length++]=n_$t).shaderValue.textureHost=n_$N,n_$t._renderType=10016,n_$t._preIsSameTextureShader=10016===this._curSubmit._renderType&&n_$G.ALPHA===n_$O.ALPHA&&n_$x,this._curSubmit=n_$t,n_$A=this._curSubmit._vb||this._vb,n_$G.ALPHA=n_$z}return!!n_$tN.fillRectImgVb(n_$A,this._clipRect,n_$C,n_$a,n_$u||n_$N.width,n_$e||n_$N.height,n_$N.uv,n_$n||this._curMat,this._x,this._y,0,0)&&(n_$B.enabled&&!this._isMain&&this._curSubmit.addTexture(n_$N,(n_$A._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},n_$C._repaintSprite=function(){this.sprite&&this.sprite.repaint()},n_$C._drawText=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){var n_$P=n_$N.bitmap;this._drawCount++;var n_$$=n_$P.id+this._shader2D.ALPHA+10016;if(n_$$!=this._renderKey){this._renderKey=n_$$;var n_$O=this._curSubmit.shaderValue,n_$G=this._shader2D;n_$G.glTexture=n_$P;var n_$z=this._vb,n_$f=null,n_$t=n_$z._byteLength/32*3,n_$g=n_$O.textureHost&&n_$O.textureHost==n_$N&&n_$O.textureHost.alphaTexture==n_$N.alphaTexture;(n_$f=n_$B.enabled?n_$iN.create(this,this._ib,n_$z,n_$t,n_$EN.create(1,0)):n_$iN.create(this,this._ib,n_$z,n_$t,n_$IN.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&n_$G.ALPHA===n_$O.ALPHA&&n_$g,(this._submits[this._submits._length++]=n_$f).shaderValue.textureHost=n_$N,n_$f._renderType=10016,this._curSubmit=n_$f}n_$N.active();var n_$x=this._curSubmit._vb||this._vb;n_$tN.fillRectImgVb(n_$x,this._clipRect,n_$C+n_$M,n_$a+n_$n,n_$u||n_$N.width,n_$e||n_$N.height,n_$N.uv,n_$J||this._curMat,this._x,this._y,n_$V,n_$A,!0)&&(n_$B.enabled&&!this._isMain&&this._curSubmit.addTexture(n_$N,(n_$x._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},n_$C.drawTextureWithTransform=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){if(n_$J){var n_$A=this._curMat,n_$P=this._x,n_$$=this._y;(0!==n_$M||0!==n_$n)&&(this._x=n_$M*n_$A.a+n_$n*n_$A.c,this._y=n_$n*n_$A.d+n_$M*n_$A.b),n_$J&&n_$A.bTransform?(n_$F.mul(n_$J,n_$A,n_$w._tmpMatrix),(n_$J=n_$w._tmpMatrix)._checkTransform()):(this._x+=n_$A.tx,this._y+=n_$A.ty),this._drawTextureM(n_$N,n_$C,n_$a,n_$u,n_$e,0,0,n_$J,n_$V),this._x=n_$P,this._y=n_$$}else this._drawTextureM(n_$N,n_$C,n_$a,n_$u,n_$e,n_$M,n_$n,null,n_$V)},n_$C.fillQuadrangle=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=this._curSubmit,n_$M=this._vb,n_$n=this._shader2D,n_$V=n_$J.shaderValue;if(this._renderKey=0,n_$N.bitmap){var n_$A=n_$N.bitmap;n_$n.glTexture==n_$A&&n_$n.ALPHA===n_$V.ALPHA||(n_$n.glTexture=n_$A,(n_$J=this._curSubmit=n_$JN.createSubmit(this,this._ib,n_$M,n_$M._byteLength/32*3,n_$EN.create(1,0))).shaderValue.glTexture=n_$A,this._submits[this._submits._length++]=n_$J),n_$tN.fillQuadrangleImgVb(n_$M,n_$C,n_$a,n_$u,n_$N.uv,n_$e||this._curMat,this._x,this._y)}else n_$J.shaderValue.fillStyle&&n_$J.shaderValue.fillStyle.equal(n_$N)&&n_$n.ALPHA===n_$V.ALPHA||(n_$n.glTexture=null,(n_$J=this._curSubmit=n_$JN.createSubmit(this,this._ib,n_$M,n_$M._byteLength/32*3,n_$EN.create(2,0))).shaderValue.defines.add(2),n_$J.shaderValue.fillStyle=n_$k.create(n_$N),this._submits[this._submits._length++]=n_$J),n_$tN.fillQuadrangleImgVb(n_$M,n_$C,n_$a,n_$u,n_$j.DEF_UV,n_$e||this._curMat,this._x,this._y);n_$J._numEle+=6},n_$C.drawTexture2=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){if(0!=n_$J){var n_$V=this._curMat;if(this._x=n_$N*n_$V.a+n_$C*n_$V.c,this._y=n_$C*n_$V.d+n_$N*n_$V.b,n_$e&&(n_$e=n_$V.bTransform||n_$e.bTransform?(n_$F.mul(n_$e,n_$V,n_$w._tmpMatrix),n_$w._tmpMatrix):(this._x+=n_$e.tx+n_$V.tx,this._y+=n_$e.ty+n_$V.ty,n_$F.EMPTY)),1!==n_$J||n_$M){var n_$A=this._shader2D.ALPHA,n_$P=this._nBlendType;this._shader2D.ALPHA=n_$J,n_$M&&(this._nBlendType=n_$K.TOINT(n_$M)),this._drawTextureM(n_$n[0],n_$n[1]-n_$a,n_$n[2]-n_$u,n_$n[3],n_$n[4],0,0,n_$e,1),this._shader2D.ALPHA=n_$A,this._nBlendType=n_$P}else this._drawTextureM(n_$n[0],n_$n[1]-n_$a,n_$n[2]-n_$u,n_$n[3],n_$n[4],0,0,n_$e,1);this._x=this._y=0}},n_$C.drawCanvas=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$N.context;if(this._renderKey=0,n_$J._targets)this._submits[this._submits._length++]=n_$lN.create(n_$J,0,null),this._curSubmit=n_$JN.RENDERBASE,n_$J._targets.drawTo(this,n_$C,n_$a,n_$u,n_$e);else{var n_$M=this._submits[this._submits._length++]=n_$lN.create(n_$J,this._shader2D.ALPHA,this._shader2D.filters),n_$n=n_$u/n_$N.width,n_$V=n_$e/n_$N.height,n_$A=n_$M._matrix;this._curMat.copyTo(n_$A),1!=n_$n&&1!=n_$V&&n_$A.scale(n_$n,n_$V);var n_$P=n_$A.tx,n_$$=n_$A.ty;n_$A.tx=n_$A.ty=0,n_$A.transformPoint(n_$D.TEMP.setTo(n_$C,n_$a)),n_$A.translate(n_$D.TEMP.x+n_$P,n_$D.TEMP.y+n_$$),this._curSubmit=n_$JN.RENDERBASE}n_$c.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=n_$J._targets?"yellow":"green",this.strokeRect(n_$C-1,n_$a-1,n_$u+2,n_$e+2,1),this.strokeRect(n_$C,n_$a,n_$u,n_$e,1),this.restore())},n_$C.drawTarget=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){void 0===n_$A&&(n_$A=-1);var n_$P=this._vb;if(n_$tN.fillRectImgVb(n_$P,this._clipRect,n_$C,n_$a,n_$u,n_$e,n_$V||n_$j.DEF_UV,n_$J||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var n_$$=this._curSubmit=n_$$N.create(this,this._ib,n_$P,(n_$P._byteLength-64)/32*3,n_$n,n_$M);n_$$.blendType=-1==n_$A?this._nBlendType:n_$A,n_$$.scope=n_$N,this._submits[this._submits._length++]=n_$$,this._curSubmit._numEle+=6}},n_$C.mixRGBandAlpha=function(n_$N){return this._mixRGBandAlpha(n_$N,this._shader2D.ALPHA)},n_$C._mixRGBandAlpha=function(n_$N,n_$C){var n_$a=(4278190080&n_$N)>>>24;return 0!=n_$a?n_$a*=n_$C:n_$a=255*n_$C,16777215&n_$N|n_$a<<24},n_$C.drawTriangles=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){if(!n_$N.loaded||!n_$N.source)return this.sprite&&n_$r.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;n_$N.bitmap;var n_$P=this._mixRGBandAlpha(4294967295,n_$n),n_$$=(n_$u.length,n_$J.length);this._renderKey=-1;var n_$O=this._curSubmit=n_$iN.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,n_$EN.create(1,0));return n_$O.shaderValue.textureHost=n_$N,n_$O._renderType=10016,this._submits[this._submits._length++]=n_$O,n_$M?(n_$w._tmpMatrix.a=n_$M.a,n_$w._tmpMatrix.b=n_$M.b,n_$w._tmpMatrix.c=n_$M.c,n_$w._tmpMatrix.d=n_$M.d,n_$w._tmpMatrix.tx=n_$M.tx+n_$C,n_$w._tmpMatrix.ty=n_$M.ty+n_$a,n_$F.mul(n_$w._tmpMatrix,this._curMat,n_$w._tmpMatrix)):(n_$w._tmpMatrix.a=this._curMat.a,n_$w._tmpMatrix.b=this._curMat.b,n_$w._tmpMatrix.c=this._curMat.c,n_$w._tmpMatrix.d=this._curMat.d,n_$w._tmpMatrix.tx=this._curMat.tx+n_$C,n_$w._tmpMatrix.ty=this._curMat.ty+n_$a),this._triangleMesh.addData(n_$u,n_$e,n_$J,n_$w._tmpMatrix,n_$P,this),this._curSubmit._numEle+=n_$$,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},n_$C.transform=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){n_$H.save(this),n_$F.mul(n_$F.TEMP.setTo(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J),this._curMat,this._curMat),this._curMat._checkTransform()},n_$C.setTransformByMatrix=function(n_$N){n_$N.copyTo(this._curMat)},n_$C.transformByMatrix=function(n_$N){n_$H.save(this),n_$F.mul(n_$N,this._curMat,this._curMat),this._curMat._checkTransform()},n_$C.rotate=function(n_$N){n_$H.save(this),this._curMat.rotateEx(n_$N)},n_$C.scale=function(n_$N,n_$C){n_$H.save(this),this._curMat.scaleEx(n_$N,n_$C)},n_$C.clipRect=function(n_$N,n_$C,n_$a,n_$u){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var n_$e=n_$PN.create(4);this.addRenderObject(n_$e);var n_$J=this._vb,n_$M=n_$J._byteLength>>2;if(n_$tN.fillRectImgVb(n_$J,null,n_$N,n_$C,n_$a,n_$u,n_$j.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var n_$n=this._curSubmit=n_$JN.createSubmit(this,this._ib,n_$J,(n_$J._byteLength-64)/32*3,n_$EN.create(2,0));n_$n.shaderValue.ALPHA=1,this._submits[this._submits._length++]=n_$n,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var n_$V=n_$PN.create(5);this.addRenderObject(n_$V);var n_$A=n_$J.getFloat32Array(),n_$P=Math.min(Math.min(Math.min(n_$A[0+n_$M],n_$A[4+n_$M]),n_$A[8+n_$M]),n_$A[12+n_$M]),n_$$=Math.max(Math.max(Math.max(n_$A[0+n_$M],n_$A[4+n_$M]),n_$A[8+n_$M]),n_$A[12+n_$M]),n_$O=Math.min(Math.min(Math.min(n_$A[1+n_$M],n_$A[5+n_$M]),n_$A[9+n_$M]),n_$A[13+n_$M]),n_$G=Math.max(Math.max(Math.max(n_$A[1+n_$M],n_$A[5+n_$M]),n_$A[9+n_$M]),n_$A[13+n_$M]);n_$b.save(this,n_$V,n_$N,n_$C,n_$a,n_$u,n_$P,n_$O,n_$$-n_$P,n_$G-n_$O),this._curSubmit=n_$JN.RENDERBASE}else{n_$a*=this._curMat.a,n_$u*=this._curMat.d;var n_$z=n_$D.TEMP;this._curMat.transformPoint(n_$z.setTo(n_$N,n_$C)),n_$a<0&&(n_$z.x=n_$z.x+n_$a,n_$a=-n_$a),n_$u<0&&(n_$z.y=n_$z.y+n_$u,n_$u=-n_$u),this._renderKey=0;var n_$f=this._curSubmit=n_$AN.create(this);(this._submits[this._submits._length++]=n_$f).submitIndex=this._submits._length,n_$f.submitLength=9999999,n_$m.save(this,n_$f);var n_$t=this._clipRect,n_$g=n_$t.x,n_$x=n_$t.y,n_$W=n_$z.x+n_$a,n_$v=n_$z.y+n_$u;n_$g<n_$z.x&&(n_$t.x=n_$z.x),n_$x<n_$z.y&&(n_$t.y=n_$z.y),n_$t.width=Math.min(n_$W,n_$g+n_$t.width)-n_$t.x,n_$t.height=Math.min(n_$v,n_$x+n_$t.height)-n_$t.y,this._shader2D.glTexture=null,n_$f.clipRect.copyFrom(n_$t),this._curSubmit=n_$JN.RENDERBASE}},n_$C.setIBVB=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P){if(void 0===n_$V&&(n_$V=0),void 0===n_$A&&(n_$A=0),void 0===n_$P&&(n_$P=0),null===n_$a){if(n_$g.isFlash){var n_$$=n_$u;n_$$._selfIB||(n_$$._selfIB=n_$hN.create(35044)),n_$$._selfIB.clear(),n_$a=n_$$._selfIB}else n_$a=this._ib;n_$tN.expandIBQuadrangle(n_$a,n_$u._byteLength/(4*n_$u.vertexStride*4))}if(!n_$n||!n_$M)throw Error("setIBVB must input:shader shaderValues");var n_$O=n_$VN.create(this,n_$u,n_$a,n_$e,n_$M,n_$n,n_$V,n_$A,n_$P);n_$J||(n_$J=n_$F.EMPTY),n_$J.translate(n_$N,n_$C),n_$F.mul(n_$J,this._curMat,n_$O._mat),n_$J.translate(-n_$N,-n_$C),this._submits[this._submits._length++]=n_$O,this._curSubmit=n_$JN.RENDERBASE,this._renderKey=0},n_$C.addRenderObject=function(n_$N){this._submits[this._submits._length++]=n_$N},n_$C.fillTrangles=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=this._curSubmit,n_$M=this._vb,n_$n=this._shader2D,n_$V=n_$J.shaderValue,n_$A=n_$u.length>>4,n_$P=n_$N.bitmap;this._renderKey=0,n_$n.glTexture==n_$P&&n_$n.ALPHA===n_$V.ALPHA||((n_$J=this._curSubmit=n_$JN.createSubmit(this,this._ib,n_$M,n_$M._byteLength/32*3,n_$EN.create(1,0))).shaderValue.textureHost=n_$N,this._submits[this._submits._length++]=n_$J),n_$tN.fillTranglesVB(n_$M,n_$C,n_$a,n_$u,n_$e||this._curMat,this._x,this._y),n_$J._numEle+=6*n_$A},n_$C.submitElement=function(n_$N,n_$C){var n_$a=this._submits;for(n_$C<0&&(n_$C=n_$a._length);n_$N<n_$C;)n_$N+=n_$a[n_$N].renderSubmit()},n_$C.finish=function(){n_$vN.mainContext.finish()},n_$C.flush=function(){var n_$N=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(n_$N>this._ib.bufferLength/12&&n_$tN.expandIBQuadrangle(this._ib,n_$N),!this._isMain&&n_$B.enabled&&n_$B._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=n_$B._atlasRestore;for(var n_$C=this._submits,n_$a=0,n_$u=n_$C._length;n_$a<n_$u;n_$a++){var n_$e=n_$C[n_$a];10016===n_$e.getRenderType()&&n_$e.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),n_$CN.instance&&n_$CN.getInstance().reset();var n_$J;for(n_$a=0,n_$J=this.meshlist.length;n_$a<n_$J;n_$a++){var n_$M=this.meshlist[n_$a];n_$M.canReuse?n_$M.releaseMesh():n_$M.destroy()}return this.meshlist.length=0,this._curSubmit=n_$JN.RENDERBASE,this._renderKey=0,this._triangleMesh=n_$jN.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},n_$C.setPathId=function(n_$N){if(this.mId=n_$N,-1!=this.mId){this.mHaveKey=!1;var n_$C=n_$T.getInstance();n_$C.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,n_$C.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},n_$C.movePath=function(n_$N,n_$C){var n_$a=n_$N,n_$u=n_$C;n_$N=this._curMat.a*n_$a+this._curMat.c*n_$u+this._curMat.tx,n_$C=this._curMat.b*n_$a+this._curMat.d*n_$u+this._curMat.ty,this.mX+=n_$N,this.mY+=n_$C},n_$C.beginPath=function(){var n_$N=this._getPath();n_$N.tempArray.length=0,n_$N.closePath=!1,this.mX=0,this.mY=0},n_$C.closePath=function(){this._path.closePath=!0},n_$C.fill=function(n_$N){void 0===n_$N&&(n_$N=!1);var n_$C=this._getPath();this.drawPoly(0,0,n_$C.tempArray,this.fillStyle._color.numColor,0,0,n_$N)},n_$C.stroke=function(){var n_$N=this._getPath();if(0<this.lineWidth){if(-1==this.mId)n_$N.drawLine(0,0,n_$N.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var n_$C=n_$T.getInstance().shapeLineDic[this.mId];n_$C.rebuild(n_$N.tempArray),n_$N.setGeomtry(n_$C)}else n_$T.getInstance().addLine(this.mId,n_$N.drawLine(0,0,n_$N.tempArray,this.lineWidth,this.strokeStyle._color.numColor));n_$N.update();var n_$a=[this.mX,this.mY],n_$u=n_$JN.createShape(this,n_$N.ib,n_$N.vb,n_$N.count,n_$N.offset,n_$EN.create(4,0));n_$u.shaderValue.ALPHA=this._shader2D.ALPHA,n_$u.shaderValue.u_pos=n_$a,n_$u.shaderValue.u_mmat2=n_$xN.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=n_$u,this._renderKey=-1}},n_$C.line=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=this._curSubmit,n_$n=this._vb;if(n_$tN.fillLineVb(n_$n,this._clipRect,n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)){this._renderKey=0;var n_$V=this._shader2D,n_$A=n_$M.shaderValue;n_$V.strokeStyle===n_$A.strokeStyle&&n_$V.ALPHA===n_$A.ALPHA||(n_$V.glTexture=null,(n_$M=this._curSubmit=n_$JN.createSubmit(this,this._ib,n_$n,(n_$n._byteLength-64)/32*3,n_$EN.create(2,0))).shaderValue.strokeStyle=n_$V.strokeStyle,n_$M.shaderValue.mainID=2,n_$M.shaderValue.ALPHA=n_$V.ALPHA,this._submits[this._submits._length++]=n_$M),n_$M._numEle+=6}},n_$C.moveTo=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=!0);var n_$u=this._getPath();if(n_$a){var n_$e=n_$N,n_$J=n_$C;n_$N=this._curMat.a*n_$e+this._curMat.c*n_$J,n_$C=this._curMat.b*n_$e+this._curMat.d*n_$J}n_$u.addPoint(n_$N,n_$C)},n_$C.lineTo=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=!0);var n_$u=this._getPath();if(n_$a){var n_$e=n_$N,n_$J=n_$C;n_$N=this._curMat.a*n_$e+this._curMat.c*n_$J,n_$C=this._curMat.b*n_$e+this._curMat.d*n_$J}n_$u.addPoint(n_$N,n_$C)},n_$C.drawCurves=function(n_$N,n_$C,n_$a){this.setPathId(-1),this.beginPath(),this.strokeStyle=n_$a[3],this.lineWidth=n_$a[4];var n_$u=n_$a[2];n_$N+=n_$a[0],n_$C+=n_$a[1],this.movePath(n_$N,n_$C),this.moveTo(n_$u[0],n_$u[1]);for(var n_$e=2,n_$J=n_$u.length;n_$e<n_$J;)this.quadraticCurveTo(n_$u[n_$e++],n_$u[n_$e++],n_$u[n_$e++],n_$u[n_$e++]);this.stroke()},n_$C.arcTo=function(n_$N,n_$C,n_$a,n_$u,n_$e){if(-1==this.mId||!this.mHaveKey){var n_$J=0,n_$M=0,n_$n=0,n_$V=this._getPath();this._curMat.copyTo(n_$w._tmpMatrix),n_$w._tmpMatrix.tx=n_$w._tmpMatrix.ty=0,n_$w._tempPoint.setTo(n_$V.getEndPointX(),n_$V.getEndPointY()),n_$w._tmpMatrix.invertTransformPoint(n_$w._tempPoint);var n_$A=n_$w._tempPoint.x-n_$N,n_$P=n_$w._tempPoint.y-n_$C,n_$$=Math.sqrt(n_$A*n_$A+n_$P*n_$P);if(!(n_$$<=1e-6)){var n_$O=n_$A/n_$$,n_$G=n_$P/n_$$,n_$z=n_$a-n_$N,n_$f=n_$u-n_$C,n_$t=n_$z*n_$z+n_$f*n_$f,n_$g=Math.sqrt(n_$t);if(!(n_$g<=1e-6)){var n_$x=n_$z/n_$g,n_$W=n_$f/n_$g,n_$v=n_$O+n_$x,n_$X=n_$G+n_$W,n_$r=Math.sqrt(n_$v*n_$v+n_$X*n_$X);if(!(n_$r<=1e-6)){var n_$c=n_$v/n_$r,n_$E=n_$X/n_$r,n_$F=Math.acos(n_$c*n_$O+n_$E*n_$G),n_$D=Math.PI/2-n_$F,n_$s=(n_$$=n_$e/Math.tan(n_$D))*n_$O+n_$N,n_$q=n_$$*n_$G+n_$C,n_$_=Math.sqrt(n_$$*n_$$+n_$e*n_$e),n_$d=n_$N+n_$c*n_$_,n_$Q=n_$C+n_$E*n_$_,n_$l=0,n_$i=0;if(0<=n_$O*n_$W-n_$G*n_$x){var n_$j=2*n_$D/n_$w.SEGNUM;n_$l=Math.sin(n_$j),n_$i=Math.cos(n_$j)}else n_$j=2*-n_$D/n_$w.SEGNUM,n_$l=Math.sin(n_$j),n_$i=Math.cos(n_$j);n_$M=this._curMat.a*n_$s+this._curMat.c*n_$q,n_$n=this._curMat.b*n_$s+this._curMat.d*n_$q,n_$M==this._path.getEndPointX()&&n_$n==this._path.getEndPointY()||n_$V.addPoint(n_$M,n_$n);var n_$y=n_$s-n_$d,n_$T=n_$q-n_$Q;for(n_$J=0;n_$J<n_$w.SEGNUM;n_$J++){var n_$L=n_$y*n_$i+n_$T*n_$l,n_$R=-n_$y*n_$l+n_$T*n_$i;n_$M=n_$L+n_$d,n_$n=n_$R+n_$Q,n_$N=this._curMat.a*n_$M+this._curMat.c*n_$n,n_$n=n_$C=this._curMat.b*n_$M+this._curMat.d*n_$n,(n_$M=n_$N)==this._path.getEndPointX()&&n_$n==this._path.getEndPointY()||n_$V.addPoint(n_$M,n_$n),n_$y=n_$L,n_$T=n_$R}}}}}},n_$C.arc=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){if(void 0===n_$J&&(n_$J=!1),void 0===n_$M&&(n_$M=!0),-1!=this.mId){var n_$n=n_$T.getInstance().shapeDic[this.mId];if(n_$n&&this.mHaveKey&&!n_$n.needUpdate(this._curMat))return;n_$C=n_$N=0}var n_$V,n_$A=0,n_$P=0,n_$$=0,n_$O=0,n_$G=0,n_$z=0,n_$f=0;if(n_$P=n_$e-n_$u,n_$J)if(Math.abs(n_$P)>=2*Math.PI)n_$P=2*-Math.PI;else for(;0<n_$P;)n_$P-=2*Math.PI;else if(Math.abs(n_$P)>=2*Math.PI)n_$P=2*Math.PI;else for(;n_$P<0;)n_$P+=2*Math.PI;n_$V=n_$P/(n_$f=n_$a<101?Math.max(10,n_$P*n_$a/5):n_$a<201?Math.max(10,n_$P*n_$a/20):Math.max(10,n_$P*n_$a/40))/2,n_$$=Math.abs(4/3*(1-Math.cos(n_$V))/Math.sin(n_$V)),n_$J&&(n_$$=-n_$$);var n_$t=this._getPath(),n_$g=NaN,n_$x=NaN;for(n_$z=0;n_$z<=n_$f;n_$z++)n_$A=n_$u+n_$P*(n_$z/n_$f),n_$O=n_$N+Math.cos(n_$A)*n_$a,n_$G=n_$C+Math.sin(n_$A)*n_$a,n_$M&&(n_$g=n_$O,n_$x=n_$G,n_$O=this._curMat.a*n_$g+this._curMat.c*n_$x,n_$G=this._curMat.b*n_$g+this._curMat.d*n_$x),n_$O==this._path.getEndPointX()&&n_$G==this._path.getEndPointY()||n_$t.addPoint(n_$O,n_$G);n_$O=n_$N+Math.cos(n_$e)*n_$a,n_$G=n_$C+Math.sin(n_$e)*n_$a,n_$M&&(n_$g=n_$O,n_$x=n_$G,n_$O=this._curMat.a*n_$g+this._curMat.c*n_$x,n_$G=this._curMat.b*n_$g+this._curMat.d*n_$x),n_$O==this._path.getEndPointX()&&n_$G==this._path.getEndPointY()||n_$t.addPoint(n_$O,n_$G)},n_$C.quadraticCurveTo=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$$.I,n_$J=n_$a,n_$M=n_$u;n_$a=this._curMat.a*n_$J+this._curMat.c*n_$M,n_$u=this._curMat.b*n_$J+this._curMat.d*n_$M,n_$J=n_$N,n_$M=n_$C,n_$N=this._curMat.a*n_$J+this._curMat.c*n_$M,n_$C=this._curMat.b*n_$J+this._curMat.d*n_$M;for(var n_$n=n_$e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),n_$N,n_$C,n_$a,n_$u],30,2),n_$V=0,n_$A=n_$n.length/2;n_$V<n_$A;n_$V++)this.lineTo(n_$n[2*n_$V],n_$n[2*n_$V+1],!1);this.lineTo(n_$a,n_$u,!1)},n_$C.rect=function(n_$N,n_$C,n_$a,n_$u){this._other=this._other.make(),this._other.path||(this._other.path=new n_$S),this._other.path.rect(n_$N,n_$C,n_$a,n_$u)},n_$C.strokeRect=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=.5*n_$e;this.line(n_$N-n_$J,n_$C,n_$N+n_$a+n_$J,n_$C,n_$e,this._curMat),this.line(n_$N+n_$a,n_$C,n_$N+n_$a,n_$C+n_$u,n_$e,this._curMat),this.line(n_$N,n_$C,n_$N,n_$C+n_$u,n_$e,this._curMat),this.line(n_$N-n_$J,n_$C+n_$u,n_$N+n_$a+n_$J,n_$C+n_$u,n_$e,this._curMat)},n_$C.clip=function(){},n_$C.drawPoly=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){void 0===n_$M&&(n_$M=!1),this._renderKey=0,this._shader2D.glTexture=null;var n_$n=this._getPath();if(-1==this.mId)n_$n.polygon(n_$N,n_$C,n_$a,n_$u,n_$e||1,n_$J);else if(this.mHaveKey){var n_$V=n_$T.getInstance().shapeDic[this.mId];n_$V.setMatrix(this._curMat),n_$V.rebuild(n_$n.tempArray),n_$n.setGeomtry(n_$V)}else{var n_$A=n_$n.polygon(n_$N,n_$C,n_$a,n_$u,n_$e||1,n_$J);n_$T.getInstance().addShape(this.mId,n_$A),n_$A.setMatrix(this._curMat)}n_$n.update();var n_$P,n_$$=[this.mX,this.mY];if((n_$P=n_$JN.createShape(this,n_$n.ib,n_$n.vb,n_$n.count,n_$n.offset,n_$EN.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,n_$P.shaderValue.u_pos=n_$$,n_$P.shaderValue.u_mmat2=n_$xN.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=n_$P,0<n_$e){if(this.mHaveLineKey){var n_$O=n_$T.getInstance().shapeLineDic[this.mId];n_$O.rebuild(n_$n.tempArray),n_$n.setGeomtry(n_$O)}else n_$T.getInstance().addShape(this.mId,n_$n.drawLine(n_$N,n_$C,n_$a,n_$e,n_$J));n_$n.update(),(n_$P=n_$JN.createShape(this,n_$n.ib,n_$n.vb,n_$n.count,n_$n.offset,n_$EN.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,n_$P.shaderValue.u_mmat2=n_$xN.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=n_$P}},n_$C.drawParticle=function(n_$N,n_$C,n_$a){n_$a.x=n_$N,n_$a.y=n_$C,this._submits[this._submits._length++]=n_$a},n_$C._getPath=function(){return this._path||(this._path=new n_$S)},n_$u(0,n_$C,"globalCompositeOperation",function(){return n_$K.NAMES[this._nBlendType]},function(n_$N){var n_$C=n_$K.TOINT[n_$N];null==n_$C||this._nBlendType===n_$C||(n_$p.save(this,65536,this,!0),this._curSubmit=n_$JN.RENDERBASE,this._renderKey=0,this._nBlendType=n_$C)}),n_$u(0,n_$C,"strokeStyle",function(){return this._shader2D.strokeStyle},function(n_$N){this._shader2D.strokeStyle.equal(n_$N)||(n_$p.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=n_$k.create(n_$N))}),n_$u(0,n_$C,"globalAlpha",function(){return this._shader2D.ALPHA},function(n_$N){(n_$N=Math.floor(1e3*n_$N)/1e3)!=this._shader2D.ALPHA&&(n_$p.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=n_$N)}),n_$u(0,n_$C,"asBitmap",null,function(n_$N){if(n_$N){if(this._targets||(this._targets=new n_$Z),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),n_$u(0,n_$C,"fillStyle",function(){return this._shader2D.fillStyle},function(n_$N){this._shader2D.fillStyle.equal(n_$N)||(n_$p.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=n_$k.create(n_$N))}),n_$u(0,n_$C,"textAlign",function(){return this._other.textAlign},function(n_$N){this._other.textAlign===n_$N||(this._other=this._other.make(),n_$p.save(this,32768,this._other,!1),this._other.textAlign=n_$N)}),n_$u(0,n_$C,"lineWidth",function(){return this._other.lineWidth},function(n_$N){this._other.lineWidth===n_$N||(this._other=this._other.make(),n_$p.save(this,256,this._other,!1),this._other.lineWidth=n_$N)}),n_$u(0,n_$C,"textBaseline",function(){return this._other.textBaseline},function(n_$N){this._other.textBaseline===n_$N||(this._other=this._other.make(),n_$p.save(this,16384,this._other,!1),this._other.textBaseline=n_$N)}),n_$u(0,n_$C,"font",null,function(n_$N){n_$N!=this._other.font.toString()&&(this._other=this._other.make(),n_$p.save(this,8,this._other,!1),this._other.font===n_$zN.EMPTY?this._other.font=new n_$zN(n_$N):this._other.font.setFont(n_$N))}),n_$w.__init__=function(){n_$a.DEFAULT=new n_$a},n_$w._tempPoint=new n_$D,n_$w._SUBMITVBSIZE=32e3,n_$w._MAXSIZE=99999999,n_$w._RECTVBSIZE=16,n_$w.MAXCLIPRECT=new n_$s(0,0,99999999,99999999),n_$w._COUNT=0,n_$w._tmpMatrix=new n_$F,n_$w.SEGNUM=32,n_$w._contextcount=0,n_$M(n_$w,["_fontTemp",function(){return this._fontTemp=new n_$zN},"_drawStyleTemp",function(){return this._drawStyleTemp=new n_$k(null)}]),n_$w.__init$=function(){n_$a=function(){function n_$N(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=n_$zN.EMPTY}n_$O(n_$N,"");var n_$C=n_$N.prototype;return n_$C.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=n_$zN.EMPTY},n_$C.make=function(){return this===n_$N.DEFAULT?new n_$N:this},n_$N.DEFAULT=null,n_$N}()},n_$w}(),n_$EN=function(n_$N){function n_$u(n_$N,n_$C){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,n_$u.__super.call(this),this.defines=new n_$qN,this.position=n_$u._POSITION,this.mainID=n_$N,this.subID=n_$C,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=n_$N|n_$C,this._inClassCache=n_$u._cache[this._cacheID],0<n_$N&&!this._inClassCache&&(this._inClassCache=n_$u._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}n_$O(n_$u,"laya.webgl.shader.d2.value.Value2D",n_$R);var n_$C=n_$u.prototype;return n_$C.setValue=function(n_$N){},n_$C.refresh=function(){var n_$N=this.size;return n_$N[0]=n_$xN.width,n_$N[1]=n_$xN.height,this.alpha=this.ALPHA*n_$xN.worldAlpha,this.mmat=n_$xN.worldMatrix4,this},n_$C._ShaderWithCompile=function(){return n_$oN.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,n_$ZN.create)},n_$C._withWorldShaderDefines=function(){var n_$N=n_$xN.worldShaderDefines,n_$C=n_$oN.sharders[this.mainID|this.defines._value|n_$N.getValue()];if(!n_$C){var n_$a,n_$u={};for(n_$a in this.defines.toNameDic())n_$u[n_$a]="";for(n_$a in n_$N.toNameDic())n_$u[n_$a]="";n_$C=n_$oN.withCompile2D(0,this.mainID,n_$u,this.mainID|this.defines._value|n_$N.getValue(),n_$ZN.create)}var n_$e=n_$xN.worldFilters;if(!n_$e)return n_$C;for(var n_$J,n_$M=n_$e.length,n_$n=0;n_$n<n_$M;n_$n++)(n_$J=n_$e[n_$n])&&n_$J.action.setValue(this);return n_$C},n_$C.upload=function(){var n_$N=n_$xN;this.alpha=this.ALPHA*n_$N.worldAlpha,n_$xN.worldMatrix4!==n_$xN.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),n_$vN.shaderHighPrecision&&this.defines.add(1024);var n_$C,n_$a=n_$N.worldShaderDefines?this._withWorldShaderDefines():n_$oN.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=n_$N.width,this.size[1]=n_$N.height,this.mmat=n_$N.worldMatrix4,n_$yN.activeShader!==n_$a?n_$a._shaderValueWidth!==n_$N.width||n_$a._shaderValueHeight!==n_$N.height?(n_$a._shaderValueWidth=n_$N.width,n_$a._shaderValueHeight=n_$N.height):n_$C=n_$a._params2dQuick2||n_$a._make2dQuick2():n_$a._shaderValueWidth!==n_$N.width||n_$a._shaderValueHeight!==n_$N.height?(n_$a._shaderValueWidth=n_$N.width,n_$a._shaderValueHeight=n_$N.height):n_$C=n_$a._params2dQuick1||n_$a._make2dQuick1(),n_$a.upload(this,n_$C)},n_$C.setFilters=function(n_$N){if(this.filters=n_$N)for(var n_$C,n_$a=n_$N.length,n_$u=0;n_$u<n_$a;n_$u++)(n_$C=n_$N[n_$u])&&(this.defines.add(n_$C.type),n_$C.action.setValue(this))},n_$C.clear=function(){this.defines.setValue(this.subID)},n_$C.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},n_$u._initone=function(n_$N,n_$C){n_$u._typeClass[n_$N]=n_$C,n_$u._cache[n_$N]=[],n_$u._cache[n_$N]._length=0},n_$u.__init__=function(){n_$u._POSITION=[2,5126,!1,4*n_$fN.BYTES_PE,0],n_$u._TEXCOORD=[2,5126,!1,4*n_$fN.BYTES_PE,2*n_$fN.BYTES_PE],n_$u._initone(2,n_$wN),n_$u._initone(4,n_$KN),n_$u._initone(256,n_$BN),n_$u._initone(512,n_$RN),n_$u._initone(1,n_$YN),n_$u._initone(65,n_$IN),n_$u._initone(9,n_$YN)},n_$u.create=function(n_$N,n_$C){var n_$a=n_$u._cache[n_$N|n_$C];return n_$a._length?n_$a[--n_$a._length]:new n_$u._typeClass[n_$N|n_$C](n_$C)},n_$u._POSITION=null,n_$u._TEXCOORD=null,n_$u._cache=[],n_$u._typeClass=[],n_$u.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n_$u}(),n_$FN=function(n_$N){function n_$t(n_$N,n_$C){n_$t.__super.call(this,n_$N,n_$C)}n_$O(n_$t,"laya.webgl.utils.RenderSprite3D",n_$x);var n_$C=n_$t.prototype;return n_$C.onCreate=function(n_$N){switch(n_$N){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},n_$C._mask=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J,n_$M=this._next,n_$n=n_$N.mask;if(n_$n){n_$C.ctx.save();var n_$V=n_$C.ctx.globalCompositeOperation,n_$A=new n_$s;if(n_$A.copyFrom(n_$n.getBounds()),n_$A.width=Math.round(n_$A.width),n_$A.height=Math.round(n_$A.height),n_$A.x=Math.round(n_$A.x),n_$A.y=Math.round(n_$A.y),0<n_$A.width&&0<n_$A.height){var n_$P=n_$N._style._tf,n_$$=n_$nN.create();n_$$.addValue("bounds",n_$A),n_$e=n_$MN.create([n_$$,n_$C],laya.webgl.utils.RenderSprite3D.tmpTarget),n_$C.addRenderObject(n_$e),n_$n.render(n_$C,-n_$A.x,-n_$A.y),n_$e=n_$MN.create([n_$$],laya.webgl.utils.RenderSprite3D.endTmpTarget),n_$C.addRenderObject(n_$e),n_$C.ctx.save(),n_$C.clipRect(n_$a-n_$P.translateX+n_$A.x,n_$u-n_$P.translateY+n_$A.y,n_$A.width,n_$A.height),n_$M._fun.call(n_$M,n_$N,n_$C,n_$a,n_$u),n_$C.ctx.restore(),n_$J=n_$PN.create(6),n_$V=n_$C.ctx.globalCompositeOperation,n_$J.blendMode="mask",n_$C.addRenderObject(n_$J),n_$F.TEMP.identity();var n_$O=n_$EN.create(1,0),n_$G=n_$j.INV_UV,n_$z=n_$A.width,n_$f=n_$A.height;(n_$A.width<32||n_$A.height<32)&&((n_$G=n_$t.tempUV)[0]=0,n_$G[1]=0,n_$G[2]=32<=n_$A.width?1:n_$A.width/32,n_$G[3]=0,n_$G[4]=32<=n_$A.width?1:n_$A.width/32,n_$G[5]=32<=n_$A.height?1:n_$A.height/32,n_$G[6]=0,n_$G[7]=32<=n_$A.height?1:n_$A.height/32,n_$A.width=32<=n_$A.width?n_$A.width:32,n_$A.height=32<=n_$A.height?n_$A.height:32,n_$G[1]*=-1,n_$G[3]*=-1,n_$G[5]*=-1,n_$G[7]*=-1,n_$G[1]+=1,n_$G[3]+=1,n_$G[5]+=1,n_$G[7]+=1),n_$C.ctx.drawTarget(n_$$,n_$a+n_$A.x-n_$P.translateX,n_$u+n_$A.y-n_$P.translateY,n_$z,n_$f,n_$F.TEMP,"tmpTarget",n_$O,n_$G,6),n_$e=n_$MN.create([n_$$],laya.webgl.utils.RenderSprite3D.recycleTarget),n_$C.addRenderObject(n_$e),(n_$J=n_$PN.create(6)).blendMode=n_$V,n_$C.addRenderObject(n_$J)}n_$C.ctx.restore()}else n_$M._fun.call(n_$M,n_$N,n_$C,n_$a,n_$u)},n_$C._blend=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N._style,n_$J=this._next;n_$e.blendMode?(n_$C.ctx.save(),n_$C.ctx.globalCompositeOperation=n_$e.blendMode,n_$J._fun.call(n_$J,n_$N,n_$C,n_$a,n_$u),n_$C.ctx.restore()):n_$J._fun.call(n_$J,n_$N,n_$C,n_$a,n_$u)},n_$C._transform=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.transform,n_$J=this._next;if(n_$e&&n_$J!=n_$x.NORENDER){var n_$M=n_$C.ctx;n_$N._style;n_$e.tx=n_$a,n_$e.ty=n_$u;var n_$n=n_$M._getTransformMatrix(),n_$V=n_$n.clone();n_$F.mul(n_$e,n_$n,n_$n),n_$n._checkTransform(),n_$e.tx=n_$e.ty=0,n_$J._fun.call(n_$J,n_$N,n_$C,0,0),n_$V.copyTo(n_$n),n_$V.destroy()}else n_$J._fun.call(n_$J,n_$N,n_$C,n_$a,n_$u)},n_$t.tmpTarget=function(n_$N,n_$C){var n_$a=n_$N.getValue("bounds"),n_$u=n_$TN.create(n_$a.width,n_$a.height);n_$u.start(),n_$u.clear(0,0,0,0),n_$N.addValue("tmpTarget",n_$u)},n_$t.endTmpTarget=function(n_$N){n_$N.getValue("tmpTarget").end()},n_$t.recycleTarget=function(n_$N){n_$N.getValue("tmpTarget").recycle(),n_$N.recycle()},n_$M(n_$t,["tempUV",function(){return this.tempUV=new Array(8)}]),n_$t}(),n_$DN=function(n_$N){function n_$C(){this.data=null,n_$C.__super.call(this)}n_$O(n_$C,"laya.filters.webgl.ColorFilterActionGL",n_$L);var n_$a=n_$C.prototype;return n_$r.imps(n_$a,{"laya.filters.IFilterActionGL":!0}),n_$a.setValue=function(n_$N){n_$N.colorMat=this.data._mat,n_$N.colorAlpha=this.data._alpha},n_$a.apply3d=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$N.getValue("bounds"),n_$M=n_$EN.create(1,0);n_$M.setFilters([this.data]);var n_$n=n_$F.TEMP;n_$n.identity(),n_$a.ctx.drawTarget(n_$N,0,0,n_$J.width,n_$J.height,n_$n,"src",n_$M)},n_$C}(),n_$sN=function(n_$N){function n_$J(n_$N,n_$C,n_$a,n_$u,n_$e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,n_$J.__super.call(this,n_$N,n_$C,n_$e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new n_$kN,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=n_$a,this._atlasCanvas.height=n_$u,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}n_$O(n_$J,"laya.webgl.atlas.Atlaser",n_$w);var n_$C=n_$J.prototype;return n_$C.computeUVinAtlasTexture=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$B.atlasTextureWidth,n_$J=n_$B.atlasTextureHeight,n_$M=n_$a/n_$e,n_$n=n_$u/n_$J,n_$V=(n_$a+n_$N.bitmap.width)/n_$e,n_$A=(n_$u+n_$N.bitmap.height)/n_$J,n_$P=n_$N.bitmap.width/n_$e,n_$$=n_$N.bitmap.height/n_$J;n_$N.uv=[n_$M+n_$C[0]*n_$P,n_$n+n_$C[1]*n_$$,n_$V-(1-n_$C[2])*n_$P,n_$n+n_$C[3]*n_$$,n_$V-(1-n_$C[4])*n_$P,n_$A-(1-n_$C[5])*n_$$,n_$M+n_$C[6]*n_$P,n_$A-(1-n_$C[7])*n_$$]},n_$C.findBitmapIsExist=function(n_$N){if(n_$N instanceof laya.webgl.resource.WebGLImage){var n_$C=n_$N,n_$a=n_$C.url,n_$u=this._InAtlasWebGLImagesKey[n_$a||n_$C.id];if(n_$u)return n_$u.offsetInfoID}return-1},n_$C.addToAtlasTexture=function(n_$N,n_$C,n_$a){if(n_$N instanceof laya.webgl.resource.WebGLImage){var n_$u=n_$N,n_$e=n_$u.url;this._InAtlasWebGLImagesKey[n_$e||n_$u.id]={bitmap:n_$N,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([n_$C,n_$a])}this._atlasCanvas.texSubImage2D(n_$C,n_$a,n_$N.atlasSource),n_$N.clearAtlasSource()},n_$C.addToAtlas=function(n_$N,n_$C,n_$a){n_$N._atlasID=this._inAtlasTextureKey.length;var n_$u=n_$N.uv.slice(),n_$e=n_$N.bitmap;this._inAtlasTextureKey.push(n_$N),this._inAtlasTextureOriUVValue.push(n_$u),this._inAtlasTextureBitmapValue.push(n_$e),this.computeUVinAtlasTexture(n_$N,n_$u,n_$C,n_$a),n_$N.bitmap=this._atlasCanvas},n_$C.clear=function(){for(var n_$N=0,n_$C=this._inAtlasTextureKey.length;n_$N<n_$C;n_$N++)this._inAtlasTextureKey[n_$N].bitmap=this._inAtlasTextureBitmapValue[n_$N],this._inAtlasTextureKey[n_$N].uv=this._inAtlasTextureOriUVValue[n_$N],this._inAtlasTextureKey[n_$N]._atlasID=-1,this._inAtlasTextureKey[n_$N].bitmap.lock=!1,this._inAtlasTextureKey[n_$N].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},n_$C.dispose=function(){this.clear(),this._atlasCanvas.destroy()},n_$u(0,n_$C,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),n_$u(0,n_$C,"texture",function(){return this._atlasCanvas}),n_$u(0,n_$C,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),n_$J}(),n_$qN=function(n_$N){function n_$a(){n_$a.__super.call(this,n_$a.__name2int,n_$a.__int2name,n_$a.__int2nameMap)}return n_$O(n_$a,"laya.webgl.shader.d2.ShaderDefines2D",n_$U),n_$a.__init__=function(){n_$a.reg("TEXTURE2D",1),n_$a.reg("COLOR2D",2),n_$a.reg("PRIMITIVE",4),n_$a.reg("GLOW_FILTER",8),n_$a.reg("BLUR_FILTER",16),n_$a.reg("COLOR_FILTER",32),n_$a.reg("COLOR_ADD",64),n_$a.reg("WORLDMAT",128),n_$a.reg("FILLTEXTURE",256),n_$a.reg("FSHIGHPRECISION",1024),n_$a.reg("TXTALPHA",2048),n_$a.reg("TXTCOMPRESS",4096)},n_$a.reg=function(n_$N,n_$C){n_$U._reg(n_$N,n_$C,n_$a.__name2int,n_$a.__int2name)},n_$a.toText=function(n_$N,n_$C,n_$a){return n_$U._toText(n_$N,n_$C,n_$a)},n_$a.toInt=function(n_$N){return n_$U._toInt(n_$N,n_$a.__name2int)},n_$a.TEXTURE2D=1,n_$a.COLOR2D=2,n_$a.PRIMITIVE=4,n_$a.FILTERGLOW=8,n_$a.FILTERBLUR=16,n_$a.FILTERCOLOR=32,n_$a.COLORADD=64,n_$a.WORLDMAT=128,n_$a.FILLTEXTURE=256,n_$a.SKINMESH=512,n_$a.SHADERDEFINE_FSHIGHPRECISION=1024,n_$a.TXTALPHA=2048,n_$a.TXTCOMPRESS=4096,n_$a.__name2int={},n_$a.__int2name=[],n_$a.__int2nameMap=[],n_$a}(),n_$_N=(function(n_$N){function n_$n(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$n.__super.call(this,n_$N,n_$C,n_$a,n_$u,40,n_$e,n_$J,n_$M)}n_$O(n_$n,"laya.webgl.shapes.Ellipse",n_$aN)}(),function(n_$N){function n_$J(n_$N,n_$C,n_$a,n_$u,n_$e){this._points=[],this.rebuild(n_$a),n_$J.__super.call(this,n_$N,n_$C,0,0,0,n_$e,n_$u,n_$e,0)}n_$O(n_$J,"laya.webgl.shapes.Line",n_$aN);var n_$C=n_$J.prototype;return n_$C.rebuild=function(n_$N){var n_$C=n_$N.length;n_$C!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(n_$C/2-1)),this.mFloat32Array=new Float32Array(5*n_$C)),this._points.length=0;for(var n_$a=NaN,n_$u=NaN,n_$e=-1,n_$J=-1,n_$M=n_$N.length/2,n_$n=0;n_$n<n_$M;n_$n++)n_$a=n_$N[2*n_$n],n_$u=n_$N[2*n_$n+1],(.01<Math.abs(n_$e-n_$a)||.01<Math.abs(n_$J-n_$u))&&this._points.push(n_$a,n_$u),n_$e=n_$a,n_$J=n_$u},n_$C.getData=function(n_$N,n_$C,n_$a){var n_$u=[],n_$e=[];0<this.borderWidth&&this.createLine2(this._points,n_$u,this.borderWidth,n_$a,n_$e,this._points.length/2),this.mUint16Array.set(n_$u,0),this.mFloat32Array.set(n_$e,0),n_$N.append(this.mUint16Array),n_$C.append(this.mFloat32Array)},n_$J}()),n_$dN=function(n_$N){function n_$$(n_$N,n_$C,n_$a,n_$u,n_$e){this._points=[];for(var n_$J=NaN,n_$M=NaN,n_$n=-1,n_$V=-1,n_$A=n_$a.length/2-1,n_$P=0;n_$P<n_$A;n_$P++)n_$J=n_$a[2*n_$P],n_$M=n_$a[2*n_$P+1],(.01<Math.abs(n_$n-n_$J)||.01<Math.abs(n_$V-n_$M))&&this._points.push(n_$J,n_$M),n_$n=n_$J,n_$V=n_$M;n_$J=n_$a[2*n_$A],n_$M=n_$a[2*n_$A+1],n_$n=this._points[0],n_$V=this._points[1],(.01<Math.abs(n_$n-n_$J)||.01<Math.abs(n_$V-n_$M))&&this._points.push(n_$J,n_$M),n_$$.__super.call(this,n_$N,n_$C,0,0,this._points.length/2,0,n_$u,n_$e)}n_$O(n_$$,"laya.webgl.shapes.LoopLine",n_$aN);var n_$C=n_$$.prototype;return n_$C.getData=function(n_$N,n_$C,n_$a){if(0<this.borderWidth){for(var n_$u=this.color,n_$e=(n_$u>>16&255)/255,n_$J=(n_$u>>8&255)/255,n_$M=(255&n_$u)/255,n_$n=[],n_$V=0,n_$A=0,n_$P=[],n_$$=Math.floor(this._points.length/2),n_$O=0;n_$O<n_$$;n_$O++)n_$V=this._points[2*n_$O],n_$A=this._points[2*n_$O+1],n_$n.push(this.x+n_$V,this.y+n_$A,n_$e,n_$J,n_$M);this.createLoopLine(n_$n,n_$P,this.borderWidth,n_$a+n_$n.length/5),n_$N.append(new Uint16Array(n_$P)),n_$C.append(new Float32Array(n_$n))}},n_$C.createLoopLine=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){n_$N.length;var n_$M=n_$N.concat(),n_$n=n_$e||n_$N,n_$V=this.borderColor,n_$A=(n_$V>>16&255)/255,n_$P=(n_$V>>8&255)/255,n_$$=(255&n_$V)/255,n_$O=[n_$M[0],n_$M[1]],n_$G=[n_$M[n_$M.length-5],n_$M[n_$M.length-4]],n_$z=n_$G[0]+.5*(n_$O[0]-n_$G[0]),n_$f=n_$G[1]+.5*(n_$O[1]-n_$G[1]);n_$M.unshift(n_$z,n_$f,0,0,0),n_$M.push(n_$z,n_$f,0,0,0);var n_$t,n_$g,n_$x,n_$W,n_$v,n_$X,n_$r,n_$c,n_$E,n_$F,n_$D,n_$s,n_$q,n_$_,n_$d,n_$Q,n_$l,n_$i,n_$j,n_$y,n_$T=n_$M.length/5,n_$L=n_$u,n_$R=n_$a/2;n_$x=n_$M[0],n_$W=n_$M[1],n_$F=n_$x-(n_$v=n_$M[5]),n_$E=(n_$E=-(n_$W-(n_$X=n_$M[6])))/(n_$y=Math.sqrt(n_$E*n_$E+n_$F*n_$F))*n_$R,n_$F=n_$F/n_$y*n_$R,n_$n.push(n_$x-n_$E,n_$W-n_$F,n_$A,n_$P,n_$$,n_$x+n_$E,n_$W+n_$F,n_$A,n_$P,n_$$);for(var n_$w=1;n_$w<n_$T-1;n_$w++)n_$x=n_$M[5*(n_$w-1)],n_$W=n_$M[5*(n_$w-1)+1],n_$v=n_$M[5*n_$w],n_$X=n_$M[5*n_$w+1],n_$r=n_$M[5*(n_$w+1)],n_$c=n_$M[5*(n_$w+1)+1],n_$F=n_$x-n_$v,n_$s=n_$v-n_$r,n_$d=(-(n_$E=(n_$E=-(n_$W-n_$X))/(n_$y=Math.sqrt(n_$E*n_$E+n_$F*n_$F))*n_$R)+n_$x)*(-(n_$F=n_$F/n_$y*n_$R)+n_$X)-(-n_$E+n_$v)*(-n_$F+n_$W),n_$i=(-(n_$D=(n_$D=-(n_$X-n_$c))/(n_$y=Math.sqrt(n_$D*n_$D+n_$s*n_$s))*n_$R)+n_$r)*(-(n_$s=n_$s/n_$y*n_$R)+n_$X)-(-n_$D+n_$v)*(-n_$s+n_$c),n_$j=(n_$q=-n_$F+n_$W-(-n_$F+n_$X))*(n_$l=-n_$D+n_$v-(-n_$D+n_$r))-(n_$Q=-n_$s+n_$c-(-n_$s+n_$X))*(n_$_=-n_$E+n_$v-(-n_$E+n_$x)),Math.abs(n_$j)<.1?(n_$j+=10.1,n_$n.push(n_$v-n_$E,n_$X-n_$F,n_$A,n_$P,n_$$,n_$v+n_$E,n_$X+n_$F,n_$A,n_$P,n_$$)):(((n_$t=(n_$_*n_$i-n_$l*n_$d)/n_$j)-n_$v)*(n_$t-n_$v)+((n_$g=(n_$Q*n_$d-n_$q*n_$i)/n_$j)-n_$X)+(n_$g-n_$X),n_$n.push(n_$t,n_$g,n_$A,n_$P,n_$$,n_$v-(n_$t-n_$v),n_$X-(n_$g-n_$X),n_$A,n_$P,n_$$));n_$J&&(n_$C=n_$J);var n_$B=this.edges+1;for(n_$w=1;n_$w<n_$B;n_$w++)n_$C.push(n_$L+2*(n_$w-1),n_$L+2*(n_$w-1)+1,n_$L+2*n_$w+1,n_$L+2*n_$w+1,n_$L+2*n_$w,n_$L+2*(n_$w-1));return n_$C.push(n_$L+2*(n_$w-1),n_$L+2*(n_$w-1)+1,n_$L+1,n_$L+1,n_$L,n_$L+2*(n_$w-1)),n_$n},n_$$}(),n_$QN=function(n_$N){function n_$M(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=n_$F.create(),this._points=n_$a.slice(0,n_$a.length),n_$M.__super.call(this,n_$N,n_$C,0,0,this._points.length/2,n_$u,n_$e,n_$J)}n_$O(n_$M,"laya.webgl.shapes.Polygon",n_$aN);var n_$C=n_$M.prototype;return n_$C.rebuild=function(n_$N){this._repaint||(this._points.length=0,this._points=this._points.concat(n_$N))},n_$C.setMatrix=function(n_$N){n_$N.copyTo(this._mat)},n_$C.needUpdate=function(n_$N){return this._repaint=this._mat.a==n_$N.a&&this._mat.b==n_$N.b&&this._mat.c==n_$N.c&&this._mat.d==n_$N.d&&this._mat.tx==n_$N.tx&&this._mat.ty==n_$N.ty,!this._repaint},n_$C.getData=function(n_$N,n_$C,n_$a){var n_$u,n_$e=0,n_$J=this._points,n_$M=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=n_$a){for(this._start=n_$a,n_$u=[],n_$M=this.earcutTriangles.length,n_$e=0;n_$e<n_$M;n_$e++)n_$u.push(this.earcutTriangles[n_$e]+n_$a);this.mUint16Array=new Uint16Array(n_$u)}}else{this._start=n_$a,n_$u=[];var n_$n=[],n_$V=[],n_$A=this.color,n_$P=(n_$A>>16&255)/255,n_$$=(n_$A>>8&255)/255,n_$O=(255&n_$A)/255;for(n_$M=Math.floor(n_$J.length/2),n_$e=0;n_$e<n_$M;n_$e++)n_$n.push(this.x+n_$J[2*n_$e],this.y+n_$J[2*n_$e+1],n_$P,n_$$,n_$O),n_$V.push(this.x+n_$J[2*n_$e],this.y+n_$J[2*n_$e+1]);for(this.earcutTriangles=n_$uN.earcut(n_$V,null,2),n_$M=this.earcutTriangles.length,n_$e=0;n_$e<n_$M;n_$e++)n_$u.push(this.earcutTriangles[n_$e]+n_$a);this.mUint16Array=new Uint16Array(n_$u),this.mFloat32Array=new Float32Array(n_$n)}n_$N.append(this.mUint16Array),n_$C.append(this.mFloat32Array)},n_$M}(),n_$lN=function(n_$N){function n_$J(){this._matrix=new n_$F,this._matrix4=n_$fN.defaultMatrix4.concat(),n_$J.__super.call(this,1e4),this.shaderValue=new n_$EN(0,0)}n_$O(n_$J,"laya.webgl.submit.SubmitCanvas",n_$JN);var n_$C=n_$J.prototype;return n_$C.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var n_$N=n_$xN.worldAlpha,n_$C=n_$xN.worldMatrix4,n_$a=n_$xN.worldMatrix,n_$u=n_$xN.worldFilters,n_$e=n_$xN.worldShaderDefines,n_$J=this.shaderValue,n_$M=this._matrix,n_$n=this._matrix4,n_$V=n_$F.TEMP;return n_$F.mul(n_$M,n_$a,n_$V),n_$n[0]=n_$V.a,n_$n[1]=n_$V.b,n_$n[4]=n_$V.c,n_$n[5]=n_$V.d,n_$n[12]=n_$V.tx,n_$n[13]=n_$V.ty,n_$xN.worldMatrix=n_$V.clone(),n_$xN.worldMatrix4=n_$n,n_$xN.worldAlpha=n_$xN.worldAlpha*n_$J.alpha,n_$J.filters&&n_$J.filters.length&&(n_$xN.worldFilters=n_$J.filters,n_$xN.worldShaderDefines=n_$J.defines),this._ctx_src.flush(),n_$xN.worldAlpha=n_$N,n_$xN.worldMatrix4=n_$C,n_$xN.worldMatrix.destroy(),n_$xN.worldMatrix=n_$a,n_$xN.worldFilters=n_$u,n_$xN.worldShaderDefines=n_$e,1},n_$C.releaseRender=function(){var n_$N=n_$J._cache;this._ctx_src=null,n_$N[n_$N._length++]=this},n_$C.getRenderType=function(){return 10003},n_$J.create=function(n_$N,n_$C,n_$a){var n_$u=n_$J._cache._length?n_$J._cache[--n_$J._cache._length]:new n_$J;n_$u._ctx_src=n_$N;var n_$e=n_$u.shaderValue;return n_$e.alpha=n_$C,n_$e.defines.setValue(0),n_$a&&n_$a.length&&n_$e.setFilters(n_$a),n_$u},n_$J._cache=((n_$J._cache=[])._length=0,n_$J._cache),n_$J}(),n_$iN=function(n_$N){function n_$A(n_$N){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===n_$N&&(n_$N=1e4),n_$A.__super.call(this,n_$N)}n_$O(n_$A,"laya.webgl.submit.SubmitTexture",n_$JN);var n_$C=n_$A.prototype;return n_$C.releaseRender=function(){var n_$N=n_$A._cache;(n_$N[n_$N._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},n_$C.addTexture=function(n_$N,n_$C){this._texsID[this._texs.length]=n_$N._uvID,this._texs.push(n_$N),this._vbPos.push(n_$C)},n_$C.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var n_$N=this.shaderValue.textureHost.bitmap;if(null!==n_$N)for(var n_$C=this._vb.getFloat32Array(),n_$a=0,n_$u=this._texs.length;n_$a<n_$u;n_$a++){var n_$e=this._texs[n_$a];n_$e.active();var n_$J=n_$e.uv;if(this._texsID[n_$a]!==n_$e._uvID){this._texsID[n_$a]=n_$e._uvID;var n_$M=this._vbPos[n_$a];n_$C[n_$M+2]=n_$J[0],n_$C[n_$M+3]=n_$J[1],n_$C[n_$M+6]=n_$J[2],n_$C[n_$M+7]=n_$J[3],n_$C[n_$M+10]=n_$J[4],n_$C[n_$M+11]=n_$J[5],n_$C[n_$M+14]=n_$J[6],n_$C[n_$M+15]=n_$J[7],this._vb.setNeedUpload()}n_$e.bitmap!==n_$N&&(this._isSameTexture=!1)}}},n_$C.renderSubmit=function(){if(0===this._numEle)return n_$A._shaderSet=!1,1;var n_$N=this.shaderValue.textureHost;if(n_$N){var n_$C=n_$N.source;if(!n_$N.bitmap||!n_$C)return n_$A._shaderSet=!1,1;this.shaderValue.texture=n_$C,n_$N.alphaTexture&&n_$N.alphaTexture.source&&(this.shaderValue.texture1=n_$N.alphaTexture.source)}this._vb.bind_upload(this._ib);var n_$a=n_$vN.mainContext;if(n_$K.activeBlendFunction!==this._blendFn&&(n_$a.enable(3042),this._blendFn(n_$a),n_$K.activeBlendFunction=this._blendFn),n_$d.drawCall++,n_$d.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&n_$yN.activeShader&&n_$A._shaderSet?(n_$yN.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&n_$yN.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),n_$A._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var n_$u=n_$N.bitmap,n_$e=0,n_$J=n_$yN.activeShader,n_$M=0,n_$n=this._texs.length;n_$M<n_$n;n_$M++){var n_$V=this._texs[n_$M];n_$V.bitmap===n_$u&&n_$M+1!==n_$n||(n_$J.uploadTexture2D(n_$V.source),n_$a.drawElements(4,6*(n_$M-n_$e+1),5123,this._startIdx+6*n_$e*n_$fN.BYTES_PIDX),n_$u=n_$V.bitmap,n_$e=n_$M)}else n_$a.drawElements(4,this._numEle,5123,this._startIdx);return 1},n_$A.create=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$A._cache._length?n_$A._cache[--n_$A._cache._length]:new n_$A;null==n_$a&&((n_$a=n_$J._selfVb||(n_$J._selfVb=n_$UN.create(-1))).clear(),n_$u=0),n_$J._ib=n_$C,n_$J._vb=n_$a,n_$J._startIdx=n_$u*n_$fN.BYTES_PIDX,n_$J._numEle=0;var n_$M=n_$N._nBlendType;n_$J._blendFn=n_$N._targets?n_$K.targetFns[n_$M]:n_$K.fns[n_$M],n_$J.shaderValue=n_$e,n_$J.shaderValue.setValue(n_$N._shader2D);var n_$n=n_$N._shader2D.filters;return n_$n&&n_$J.shaderValue.setFilters(n_$n),n_$J},n_$A._cache=((n_$A._cache=[])._length=0,n_$A._cache),n_$A._shaderSet=!0,n_$A}(),n_$jN=function(n_$N){function n_$g(){n_$g.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}n_$O(n_$g,"laya.webgl.utils.MeshTexture",n_$gN);var n_$C=n_$g.prototype;return n_$C.addData=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){for(var n_$M=n_$N.length/2,n_$n=this._vb.needSize(n_$M*n_$g.const_stride)>>2,n_$V=this._vb.getFloat32Array(),n_$A=0,n_$P=0;n_$P<n_$M;n_$P++){var n_$$=n_$N[n_$A],n_$O=n_$N[n_$A+1],n_$G=n_$$*n_$u.a+n_$O*n_$u.c+n_$u.tx,n_$z=n_$$*n_$u.b+n_$O*n_$u.d+n_$u.ty;n_$V[n_$n++]=n_$G,n_$V[n_$n++]=n_$z,n_$V[n_$n++]=n_$C[n_$A],n_$V[n_$n++]=n_$C[n_$A+1],n_$A+=2}this._vb.setNeedUpload();var n_$f=this.vertNum;if(0<n_$f){(n_$M=n_$a.length)>n_$g.tmpIdx.length&&(n_$g.tmpIdx=new Uint16Array(n_$M));for(var n_$t=0;n_$t<n_$M;n_$t++)n_$g.tmpIdx[n_$t]=n_$a[n_$t]+n_$f;this._ib.appendU16Array(n_$g.tmpIdx,n_$a.length)}else this._ib.append(n_$a);this._ib.setNeedUpload(),this.vertNum+=n_$M,this.indexNum+=n_$a.length},n_$C.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},n_$C.destroy=function(){this._ib.destroy(),this._vb.destroy()},n_$g.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new n_$g},n_$g.const_stride=16,n_$g._POOL=[],n_$M(n_$g,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),n_$g}(),n_$yN=function(n_$N){function n_$C(){n_$C.__super.call(this),this.lock=!0}return n_$O(n_$C,"laya.webgl.shader.BaseShader",n_$W),n_$C.activeShader=null,n_$C.bindShader=null,n_$C}(),n_$TN=function(n_$C){function n_$P(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===n_$a&&(n_$a=6408),void 0===n_$u&&(n_$u=5121),void 0===n_$e&&(n_$e=34041),void 0===n_$J&&(n_$J=!1),void 0===n_$M&&(n_$M=!1),void 0===n_$n&&(n_$n=-1),void 0===n_$V&&(n_$V=-1),this._type=1,this._w=n_$N,this._h=n_$C,this._surfaceFormat=n_$a,this._surfaceType=n_$u,this._depthStencilFormat=n_$e,n_$g.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=n_$J,this._repeat=n_$M,this._minFifter=n_$n,this._magFifter=n_$V,this._createWebGLRenderTarget(),this.bitmap.lock=!0,n_$P.__super.call(this,this.bitmap,n_$j.INV_UV)}n_$O(n_$P,"laya.webgl.resource.RenderTarget2D",n_$C);var n_$N=n_$P.prototype;return n_$r.imps(n_$N,{"laya.resource.IDispose":!0}),n_$N.getType=function(){return this._type},n_$N.getTexture=function(){return this},n_$N.size=function(n_$N,n_$C){this._w==n_$N&&this._h==n_$C||(this._w=n_$N,this._h=n_$C,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},n_$N.release=function(){this.destroy()},n_$N.recycle=function(){n_$P.POOL.push(this)},n_$N.start=function(){var n_$N=n_$vN.mainContext;return this._preRenderTarget=n_$xN.curRenderTarget,n_$xN.curRenderTarget=this,n_$N.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(n_$N.viewport(0,0,this._w,this._h),this._svWidth=n_$xN.width,this._svHeight=n_$xN.height,n_$xN.width=this._w,n_$xN.height=this._h,n_$yN.activeShader=null),this},n_$N.clear=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=1);var n_$e=n_$vN.mainContext;n_$e.clearColor(n_$N,n_$C,n_$a,n_$u);var n_$J=16384;switch(this._depthStencilFormat){case 33189:n_$J|=256;break;case 36168:n_$J|=1024;break;case 34041:n_$J|=256,n_$J|=1024}n_$e.clear(n_$J)},n_$N.end=function(){var n_$N=n_$vN.mainContext;n_$N.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,n_$xN.curRenderTarget=this._preRenderTarget,1==this._type?(n_$N.viewport(0,0,this._svWidth,this._svHeight),n_$xN.width=this._svWidth,n_$xN.height=this._svHeight,n_$yN.activeShader=null):n_$N.viewport(0,0,n_$r.stage.width,n_$r.stage.height)},n_$N.getData=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$vN.mainContext;if(n_$e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===n_$e.checkFramebufferStatus(36160)))return n_$e.bindFramebuffer(36160,null),null;var n_$J=new Uint8Array(this._w*this._h*4);return n_$e.readPixels(n_$N,n_$C,n_$a,n_$u,this._surfaceFormat,this._surfaceType,n_$J),n_$e.bindFramebuffer(36160,null),n_$J},n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,n_$C.prototype.destroy.call(this))},n_$N.dispose=function(){},n_$N._createWebGLRenderTarget=function(){this.bitmap=new n_$mN(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(n_$N){this.event("recovered")})},n_$u(0,n_$N,"surfaceFormat",function(){return this._surfaceFormat}),n_$u(0,n_$N,"magFifter",function(){return this._magFifter}),n_$u(0,n_$N,"surfaceType",function(){return this._surfaceType}),n_$u(0,n_$N,"mipMap",function(){return this._mipMap}),n_$u(0,n_$N,"depthStencilFormat",function(){return this._depthStencilFormat}),n_$u(0,n_$N,"minFifter",function(){return this._minFifter}),n_$u(0,n_$N,"source",function(){return this._alreadyResolved?n_$r.superGet(n_$j,this,"source"):null}),n_$P.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){void 0===n_$a&&(n_$a=6408),void 0===n_$u&&(n_$u=5121),void 0===n_$e&&(n_$e=34041),void 0===n_$J&&(n_$J=!1),void 0===n_$M&&(n_$M=!1),void 0===n_$n&&(n_$n=-1),void 0===n_$V&&(n_$V=-1);var n_$A=n_$P.POOL.pop();return n_$A||(n_$A=new n_$P(n_$N,n_$C)),n_$A.bitmap&&n_$A._w==n_$N&&n_$A._h==n_$C&&n_$A._surfaceFormat==n_$a&&n_$A._surfaceType==n_$u&&n_$A._depthStencilFormat==n_$e&&n_$A._mipMap==n_$J&&n_$A._repeat==n_$M&&n_$A._minFifter==n_$n&&n_$A._magFifter==n_$V||(n_$A._w=n_$N,n_$A._h=n_$C,n_$A._surfaceFormat=n_$a,n_$A._surfaceType=n_$u,n_$A._depthStencilFormat=n_$e,n_$g.isConchWebGL&&34041===n_$A._depthStencilFormat&&(n_$A._depthStencilFormat=33189),n_$A._mipMap=n_$J,n_$A._repeat=n_$M,n_$A._minFifter=n_$n,n_$A._magFifter=n_$V,n_$A.release(),n_$A._createWebGLRenderTarget()),n_$A},n_$P.TYPE2D=1,n_$P.TYPE3D=2,n_$P.POOL=[],n_$P}(n_$j),n_$LN=function(n_$N){function n_$C(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,n_$C.__super.call(this),n_$C._gl=n_$vN.mainContext}n_$O(n_$C,"laya.webgl.utils.Buffer",n_$W);var n_$a=n_$C.prototype;return n_$a._bind=function(){this.activeResource(),n_$C._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(n_$C._bindVertexBuffer=this._glBuffer),n_$C._gl.bindBuffer(this._bufferType,n_$C._bindActive[this._bufferType]=this._glBuffer),n_$yN.activeShader=null)},n_$a.recreateResource=function(){this._glBuffer||(this._glBuffer=n_$C._gl.createBuffer()),this.completeCreate()},n_$a.disposeResource=function(){this._glBuffer&&(n_$vN.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},n_$u(0,n_$a,"bufferUsage",function(){return this._bufferUsage}),n_$C._gl=null,n_$C._bindActive={},n_$C._bindVertexBuffer=null,n_$C._enableAtributes=[],n_$C}(),n_$RN=function(n_$N){function n_$a(n_$N){this.texcoord=null,this.offsetX=300,this.offsetY=0,n_$a.__super.call(this,512,0);var n_$C=8*n_$fN.BYTES_PE;this.position=[2,5126,!1,n_$C,0],this.texcoord=[2,5126,!1,n_$C,2*n_$fN.BYTES_PE],this.color=[4,5126,!1,n_$C,4*n_$fN.BYTES_PE]}return n_$O(n_$a,"laya.webgl.shader.d2.skinAnishader.SkinSV",n_$EN),n_$a}(),n_$wN=function(n_$N){function n_$C(n_$N){n_$C.__super.call(this,2,0),this.color=[]}return n_$O(n_$C,"laya.webgl.shader.d2.value.Color2dSV",n_$EN),n_$C.prototype.setValue=function(n_$N){n_$N.fillStyle&&(this.color=n_$N.fillStyle._color._color),n_$N.strokeStyle&&(this.color=n_$N.strokeStyle._color._color)},n_$C}(),n_$BN=function(n_$N){function n_$C(n_$N){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=n_$EN._TEXCOORD,n_$C.__super.call(this,256,0)}n_$O(n_$C,"laya.webgl.shader.d2.value.FillTextureSV",n_$EN);var n_$a=n_$C.prototype;return n_$a.setValue=function(n_$N){this.ALPHA=n_$N.ALPHA,n_$N.filters&&this.setFilters(n_$N.filters)},n_$a.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},n_$C}(),n_$YN=function(n_$N){function n_$C(n_$N){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=n_$EN._TEXCOORD,void 0===n_$N&&(n_$N=0),n_$C.__super.call(this,1,n_$N)}n_$O(n_$C,"laya.webgl.shader.d2.value.TextureSV",n_$EN);var n_$a=n_$C.prototype;return n_$a.setValue=function(n_$N){this.ALPHA=n_$N.ALPHA,n_$N.filters&&this.setFilters(n_$N.filters)},n_$a.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},n_$C}(),n_$KN=function(n_$N){function n_$C(n_$N){this.a_color=null,this.u_pos=[0,0],n_$C.__super.call(this,4,0),this.position=[2,5126,!1,5*n_$fN.BYTES_PE,0],this.a_color=[3,5126,!1,5*n_$fN.BYTES_PE,2*n_$fN.BYTES_PE]}return n_$O(n_$C,"laya.webgl.shader.d2.value.PrimitiveSV",n_$EN),n_$C}(),n_$kN=function(n_$N){function n_$C(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,n_$C.__super.call(this)}n_$O(n_$C,"laya.webgl.atlas.AtlasWebGLCanvas",n_$N);var n_$a=n_$C.prototype;return n_$a.recreateResource=function(){var n_$N=n_$vN.mainContext,n_$C=this._source=n_$N.createTexture(),n_$a=n_$XN.curBindTexTarget,n_$u=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$N,3553,n_$C),n_$N.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),n_$N.texParameteri(3553,10241,9729),n_$N.texParameteri(3553,10240,9729),n_$N.texParameteri(3553,10242,33071),n_$N.texParameteri(3553,10243,33071),n_$a&&n_$u&&n_$XN.bindTexture(n_$N,n_$a,n_$u),this.memorySize=this._w*this._h*4,this.completeCreate()},n_$a.disposeResource=function(){this._source&&(n_$vN.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n_$a.texSubImage2D=function(n_$N,n_$C,n_$a){if(n_$g.isFlash){this._flashCacheImage||(this._flashCacheImage=n_$f.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var n_$u=n_$a.bitmapdata;this._flashCacheImage._image.copyPixels(n_$u,0,0,n_$u.width,n_$u.height,n_$N,n_$C),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var n_$e=n_$vN.mainContext,n_$J=n_$XN.curBindTexTarget,n_$M=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$e,3553,this._source),n_$e.pixelStorei(37441,!0),0<=n_$N-1&&n_$e.texSubImage2D(3553,0,n_$N-1,n_$C,6408,5121,n_$a),n_$N+1<=this._w&&n_$e.texSubImage2D(3553,0,n_$N+1,n_$C,6408,5121,n_$a),0<=n_$C-1&&n_$e.texSubImage2D(3553,0,n_$N,n_$C-1,6408,5121,n_$a),n_$C+1<=this._h&&n_$e.texSubImage2D(3553,0,n_$N,n_$C+1,6408,5121,n_$a),n_$e.texSubImage2D(3553,0,n_$N,n_$C,6408,5121,n_$a),n_$e.pixelStorei(37441,!1),n_$J&&n_$M&&n_$XN.bindTexture(n_$e,n_$J,n_$M)}},n_$a.texSubImage2DPixel=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$vN.mainContext,n_$M=n_$XN.curBindTexTarget,n_$n=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$J,3553,this._source);var n_$V=new Uint8Array(n_$e.data);n_$J.pixelStorei(37441,!0),n_$J.texSubImage2D(3553,0,n_$N,n_$C,n_$a,n_$u,6408,5121,n_$V),n_$J.pixelStorei(37441,!1),n_$M&&n_$n&&n_$XN.bindTexture(n_$J,n_$M,n_$n)},n_$u(0,n_$a,"width",n_$N.prototype._$get_width,function(n_$N){this._w=n_$N}),n_$u(0,n_$a,"height",n_$N.prototype._$get_height,function(n_$N){this._h=n_$N}),n_$C}(n_$a),n_$SN=function(n_$N){function n_$e(){this.flipY=!0,this.alwaysChange=!1,n_$e.__super.call(this)}n_$O(n_$e,"laya.webgl.resource.WebGLCanvas",n_$a);var n_$C=n_$e.prototype;return n_$C.getCanvas=function(){return this._canvas},n_$C.clear=function(){this._ctx&&this._ctx.clear()},n_$C.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},n_$C._setContext=function(n_$N){this._ctx=n_$N},n_$C.getContext=function(n_$N,n_$C){return this._ctx?this._ctx:this._ctx=n_$e._createContext(this)},n_$C.size=function(n_$N,n_$C){this._w==n_$N&&this._h==n_$C||(this._w=n_$N,this._h=n_$C,this._ctx&&this._ctx.size(n_$N,n_$C),this._canvas&&(this._canvas.height=n_$C,this._canvas.width=n_$N))},n_$C.activeResource=function(n_$N){void 0===n_$N&&(n_$N=!1),this._source||this.recreateResource()},n_$C.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},n_$C.disposeResource=function(){this._source&&!this.iscpuSource&&(n_$vN.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n_$C.createWebGlTexture=function(){var n_$N=n_$vN.mainContext;this._canvas;var n_$C=this._source=n_$N.createTexture();this.iscpuSource=!1;var n_$a=n_$XN.curBindTexTarget,n_$u=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$N,3553,n_$C),n_$N.pixelStorei(37440,this.flipY?1:0),n_$e.premulAlpha&&n_$N.pixelStorei(37441,!0),n_$N.texImage2D(3553,0,6408,6408,5121,this._imgData),n_$e.premulAlpha&&n_$N.pixelStorei(37441,!1),n_$N.texParameteri(3553,10240,9729),n_$N.texParameteri(3553,10241,9729),n_$N.texParameteri(3553,10242,33071),n_$N.texParameteri(3553,10243,33071),n_$N.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,n_$a&&n_$u&&n_$XN.bindTexture(n_$N,n_$a,n_$u)},n_$C.reloadCanvasData=function(){var n_$N=n_$vN.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var n_$C=n_$XN.curBindTexTarget,n_$a=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$N,3553,this._source),n_$e.premulAlpha&&n_$N.pixelStorei(37441,!0),n_$N.texImage2D(3553,0,6408,6408,5121,this._imgData),n_$e.premulAlpha&&n_$N.pixelStorei(37441,!1),n_$N.pixelStorei(37440,0),n_$C&&n_$a&&n_$XN.bindTexture(n_$N,n_$C,n_$a)},n_$C.texSubImage2D=function(n_$N,n_$C,n_$a){var n_$u=n_$vN.mainContext,n_$e=n_$XN.curBindTexTarget,n_$J=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$u,3553,this._source),n_$u.pixelStorei(37441,!0),n_$u.texSubImage2D(3553,0,n_$C,n_$a,6408,5121,n_$N._source),n_$u.pixelStorei(37441,!1),n_$e&&n_$J&&n_$XN.bindTexture(n_$u,n_$e,n_$J)},n_$C.toBase64=function(n_$N,n_$C,n_$a){var n_$u=null;this._canvas&&(n_$u=this._canvas.toDataURL(n_$N,n_$C)),n_$a.call(this,n_$u)},n_$u(0,n_$C,"context",function(){return this._ctx}),n_$u(0,n_$C,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),n_$u(0,n_$C,"asBitmap",null,function(n_$N){this._ctx&&(this._ctx.asBitmap=n_$N)}),n_$e._createContext=null,n_$e.premulAlpha=!1,n_$e}(),n_$pN=function(n_$N){function n_$J(n_$N,n_$C){this.CborderSize=12,n_$J.__super.call(this),this.char=n_$N,this.isSpace=" "===n_$N,this.xs=n_$C.scaleX,this.ys=n_$C.scaleY,this.font=n_$C.font.toString(),this.fontSize=n_$C.font.size,this.fillColor=n_$C.fillColor,this.borderColor=n_$C.borderColor,this.lineWidth=n_$C.lineWidth,this.underLine=n_$C.underLine;var n_$a,n_$u=n_$g.isConchApp;n_$u?((n_$a=ConchTextCanvas)._source=ConchTextCanvas,n_$a._source.canvas=ConchTextCanvas):n_$a=n_$G.canvas.source,this.canvas=n_$a,this._enableMerageInAtlas=!0,this._ctx=n_$u?n_$a:this.canvas.getContext("2d",void 0);var n_$e=n_$y.measureText(this.char,this.font);this.cw=n_$e.width*this.xs,this.ch=(n_$e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new n_$j(this)}n_$O(n_$J,"laya.webgl.resource.WebGLCharImage",n_$a);var n_$C=n_$J.prototype;return n_$r.imps(n_$C,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n_$C.active=function(){this.texture.active()},n_$C.recreateResource=function(){var n_$N=n_$g.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),n_$N){var n_$C=this.fontSize;1==this.xs&&1==this.ys||(n_$C=parseInt(n_$C*(this.xs>this.ys?this.xs:this.ys)+""));var n_$a="normal 100 "+this.font;n_$a=n_$a.replace(n_$J._fontSizeReg,n_$C),this.borderColor&&(n_$a+=" 1 "+this.borderColor),this._ctx.font=n_$a,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,n_$i.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var n_$u=this._ctx.measureText(this.char);n_$u||(n_$u={width:16});var n_$e=n_$u.width+1;this._ctx.lineTo(n_$e,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},n_$C.onresize=function(n_$N,n_$C){this._w=n_$N,this._h=n_$C,this._allowMerageInAtlas=!0},n_$C.clearAtlasSource=function(){},n_$u(0,n_$C,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),n_$u(0,n_$C,"atlasSource",function(){return this.canvas}),n_$u(0,n_$C,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(n_$N){this._enableMerageInAtlas=n_$N}),n_$J.createOneChar=function(n_$N,n_$C){return new n_$J(n_$N,n_$C)},n_$J._fontSizeReg=new RegExp("\\d+(?=px)","g"),n_$J}(),n_$mN=function(n_$N){function n_$A(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){void 0===n_$a&&(n_$a=6408),void 0===n_$u&&(n_$u=5121),void 0===n_$e&&(n_$e=34041),void 0===n_$J&&(n_$J=!1),void 0===n_$M&&(n_$M=!1),void 0===n_$n&&(n_$n=-1),void 0===n_$V&&(n_$V=1),n_$A.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=n_$N,this._h=n_$C,this._surfaceFormat=n_$a,this._surfaceType=n_$u,this._depthStencilFormat=n_$e,this._mipMap=n_$J,this._repeat=n_$M,this._minFifter=n_$n,this._magFifter=n_$V}n_$O(n_$A,"laya.webgl.resource.WebGLRenderTarget",n_$a);var n_$C=n_$A.prototype;return n_$C.recreateResource=function(){var n_$N=n_$vN.mainContext;this._frameBuffer||(this._frameBuffer=n_$N.createFramebuffer()),this._source||(this._source=n_$N.createTexture());var n_$C=n_$XN.curBindTexTarget,n_$a=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$N,3553,this._source),n_$N.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var n_$u=this._minFifter,n_$e=this._magFifter,n_$J=this._repeat?10497:33071,n_$M=n_$P.isPOT(this._w,this._h);if(n_$M?(this._mipMap?-1!==n_$u||(n_$u=9987):-1!==n_$u||(n_$u=9729),-1!==n_$e||(n_$e=9729),n_$N.texParameteri(3553,10241,n_$u),n_$N.texParameteri(3553,10240,n_$e),n_$N.texParameteri(3553,10242,n_$J),n_$N.texParameteri(3553,10243,n_$J),this._mipMap&&n_$N.generateMipmap(3553)):(-1!==n_$u||(n_$u=9729),-1!==n_$e||(n_$e=9729),n_$N.texParameteri(3553,10241,n_$u),n_$N.texParameteri(3553,10240,n_$e),n_$N.texParameteri(3553,10242,33071),n_$N.texParameteri(3553,10243,33071)),n_$N.bindFramebuffer(36160,this._frameBuffer),n_$N.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=n_$N.createRenderbuffer()),n_$N.bindRenderbuffer(36161,this._depthStencilBuffer),n_$N.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:n_$N.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:n_$N.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:n_$N.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}n_$N.bindFramebuffer(36160,null),n_$C&&n_$a&&n_$XN.bindTexture(n_$N,n_$C,n_$a),n_$N.bindRenderbuffer(36161,null),n_$M&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},n_$C.disposeResource=function(){this._frameBuffer&&(n_$vN.mainContext.deleteTexture(this._source),n_$vN.mainContext.deleteFramebuffer(this._frameBuffer),n_$vN.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},n_$u(0,n_$C,"depthStencilBuffer",function(){return this._depthStencilBuffer}),n_$u(0,n_$C,"frameBuffer",function(){return this._frameBuffer}),n_$A}(),n_$bN=function(n_$N){function n_$n(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this.offsetX=0,this.offsetY=0,n_$n.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=n_$J,this.canvas=n_$N,this._ctx=n_$N.getContext("2d",void 0),this._w=n_$u,this._h=n_$e,this.offsetX=n_$C,this.offsetY=n_$a,this.src=n_$M,this._enableMerageInAtlas=!0,n_$B.enabled&&this._w<n_$B.atlasLimitWidth&&this._h<n_$B.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}n_$O(n_$n,"laya.webgl.resource.WebGLSubImage",n_$a);var n_$C=n_$n.prototype;return n_$r.imps(n_$C,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n_$C.size=function(n_$N,n_$C){this._w=n_$N,this._h=n_$C,this._ctx&&this._ctx.size(n_$N,n_$C),this.canvas&&(this.canvas.height=n_$C,this.canvas.width=n_$N)},n_$C.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},n_$C.createWebGlTexture=function(){var n_$N=n_$vN.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var n_$C=this._source=n_$N.createTexture(),n_$a=n_$XN.curBindTexTarget,n_$u=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$N,3553,n_$C),n_$N.pixelStorei(37441,!0),n_$N.texImage2D(3553,0,6408,6408,5121,this.canvas),n_$N.pixelStorei(37441,!1);var n_$e=this.minFifter,n_$J=this.magFifter,n_$M=this.repeat?10497:33071,n_$n=n_$P.isPOT(this.width,this.height);n_$n?(this.mipmap?-1!==n_$e||(n_$e=9987):-1!==n_$e||(n_$e=9729),-1!==n_$J||(n_$J=9729),n_$N.texParameteri(3553,10240,n_$J),n_$N.texParameteri(3553,10241,n_$e),n_$N.texParameteri(3553,10242,n_$M),n_$N.texParameteri(3553,10243,n_$M),this.mipmap&&n_$N.generateMipmap(3553)):(-1!==n_$e||(n_$e=9729),-1!==n_$J||(n_$J=9729),n_$N.texParameteri(3553,10241,n_$e),n_$N.texParameteri(3553,10240,n_$J),n_$N.texParameteri(3553,10242,33071),n_$N.texParameteri(3553,10243,33071)),n_$a&&n_$u&&n_$XN.bindTexture(n_$N,n_$a,n_$u),this.canvas=null,n_$n&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},n_$C.disposeResource=function(){n_$B.enabled&&this._allowMerageInAtlas||!this._source||(n_$vN.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n_$C.clearAtlasSource=function(){},n_$u(0,n_$C,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),n_$u(0,n_$C,"atlasSource",function(){return this.canvas}),n_$u(0,n_$C,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(n_$N){this._allowMerageInAtlas=n_$N}),n_$n}(),n_$oN=function(n_$N){function n_$A(n_$N,n_$C,n_$a,n_$u){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,n_$A.__super.call(this),!n_$N||!n_$C)throw"Shader Error";this._id=++n_$A._count,this._vs=n_$N,this._ps=n_$C,this._nameMap=n_$u||{},null!=n_$a&&(n_$A.sharders[n_$a]=this)}n_$O(n_$A,"laya.webgl.shader.Shader",n_$yN);var n_$C=n_$A.prototype;return n_$C.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},n_$C.disposeResource=function(){n_$vN.mainContext.deleteShader(this._vshader),n_$vN.mainContext.deleteShader(this._pshader),n_$vN.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},n_$C._compile=function(){if(!n_$vN.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var n_$N=[this._vs,this._ps],n_$C=n_$vN.mainContext;if(this._program=n_$C.createProgram(),this._vshader=n_$A._createShader(n_$C,n_$N[0],35633),this._pshader=n_$A._createShader(n_$C,n_$N[1],35632),n_$C.attachShader(this._program,this._vshader),n_$C.attachShader(this._program,this._pshader),n_$C.linkProgram(this._program),!n_$g.isConchApp&&!n_$C.getProgramParameter(this._program,35714))throw n_$C.getProgramInfoLog(this._program);var n_$a,n_$u,n_$e=0,n_$J=0;for(n_$J=n_$g.isConchApp?n_$C.getProgramParameterEx(this._vs,this._ps,"",35721):n_$C.getProgramParameter(this._program,35721),n_$e=0;n_$e<n_$J;n_$e++){var n_$M=null;n_$a={vartype:"attribute",glfun:null,ivartype:0,attrib:n_$M=n_$g.isConchApp?n_$C.getActiveAttribEx(this._vs,this._ps,"",n_$e):n_$C.getActiveAttrib(this._program,n_$e),location:n_$C.getAttribLocation(this._program,n_$M.name),name:n_$M.name,type:n_$M.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(n_$a)}var n_$n=0;for(n_$n=n_$g.isConchApp?n_$C.getProgramParameterEx(this._vs,this._ps,"",35718):n_$C.getProgramParameter(this._program,35718),n_$e=0;n_$e<n_$n;n_$e++){var n_$V=null;n_$V=n_$g.isConchApp?n_$C.getActiveUniformEx(this._vs,this._ps,"",n_$e):n_$C.getActiveUniform(this._program,n_$e),0<(n_$a={vartype:"uniform",glfun:null,ivartype:1,attrib:n_$M,location:n_$C.getUniformLocation(this._program,n_$V.name),name:n_$V.name,type:n_$V.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(n_$a.name=n_$a.name.substr(0,n_$a.name.length-3),n_$a.isArray=!0,n_$a.location=n_$C.getUniformLocation(this._program,n_$a.name)),this._params.push(n_$a)}for(n_$e=0,n_$u=this._params.length;n_$e<n_$u;n_$e++)if((n_$a=this._params[n_$e]).indexOfParams=n_$e,n_$a.index=1,n_$a.value=[n_$a.location,null],n_$a.codename=n_$a.name,n_$a.name=this._nameMap[n_$a.codename]?this._nameMap[n_$a.codename]:n_$a.codename,(this._paramsMap[n_$a.name]=n_$a)._this=this,n_$a.uploadedValue=[],"attribute"!==n_$a.vartype)switch(n_$a.type){case 5124:n_$a.fun=n_$a.isArray?this._uniform1iv:this._uniform1i;break;case 5126:n_$a.fun=n_$a.isArray?this._uniform1fv:this._uniform1f;break;case 35664:n_$a.fun=n_$a.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:n_$a.fun=n_$a.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:n_$a.fun=n_$a.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:n_$a.fun=this._uniform_sampler2D;break;case 35680:n_$a.fun=this._uniform_samplerCube;break;case 35676:n_$a.glfun=n_$C.uniformMatrix4fv,n_$a.fun=this._uniformMatrix4fv;break;case 35670:n_$a.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else n_$a.fun=this._attribute}},n_$C.getUniform=function(n_$N){return this._paramsMap[n_$N]},n_$C._attribute=function(n_$N,n_$C){var n_$a=n_$vN.mainContext,n_$u=n_$LN._enableAtributes,n_$e=n_$N.location;return n_$u[n_$e]||n_$a.enableVertexAttribArray(n_$e),n_$a.vertexAttribPointer(n_$e,n_$C[0],n_$C[1],n_$C[2],n_$C[3],n_$C[4]+this._offset),n_$u[n_$e]=n_$LN._bindVertexBuffer,1},n_$C._uniform1f=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C?(n_$vN.mainContext.uniform1f(n_$N.location,n_$a[0]=n_$C),1):0},n_$C._uniform1fv=function(n_$N,n_$C){if(n_$C.length<4){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$vN.mainContext.uniform1fv(n_$N.location,n_$C),n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3],1):0}return n_$vN.mainContext.uniform1fv(n_$N.location,n_$C),1},n_$C._uniform_vec2=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]?(n_$vN.mainContext.uniform2f(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1]),1):0},n_$C._uniform_vec2v=function(n_$N,n_$C){if(n_$C.length<2){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$vN.mainContext.uniform2fv(n_$N.location,n_$C),n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3],1):0}return n_$vN.mainContext.uniform2fv(n_$N.location,n_$C),1},n_$C._uniform_vec3=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]?(n_$vN.mainContext.uniform3f(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2]),1):0},n_$C._uniform_vec3v=function(n_$N,n_$C){return n_$vN.mainContext.uniform3fv(n_$N.location,n_$C),1},n_$C._uniform_vec4=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$vN.mainContext.uniform4f(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3]),1):0},n_$C._uniform_vec4v=function(n_$N,n_$C){return n_$vN.mainContext.uniform4fv(n_$N.location,n_$C),1},n_$C._uniformMatrix2fv=function(n_$N,n_$C){return n_$vN.mainContext.uniformMatrix2fv(n_$N.location,!1,n_$C),1},n_$C._uniformMatrix3fv=function(n_$N,n_$C){return n_$vN.mainContext.uniformMatrix3fv(n_$N.location,!1,n_$C),1},n_$C._uniformMatrix4fv=function(n_$N,n_$C){return n_$vN.mainContext.uniformMatrix4fv(n_$N.location,!1,n_$C),1},n_$C._uniform1i=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C?(n_$vN.mainContext.uniform1i(n_$N.location,n_$a[0]=n_$C),1):0},n_$C._uniform1iv=function(n_$N,n_$C){return n_$vN.mainContext.uniform1iv(n_$N.location,n_$C),1},n_$C._uniform_ivec2=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]?(n_$vN.mainContext.uniform2i(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1]),1):0},n_$C._uniform_ivec2v=function(n_$N,n_$C){return n_$vN.mainContext.uniform2iv(n_$N.location,n_$C),1},n_$C._uniform_vec3i=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]?(n_$vN.mainContext.uniform3i(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2]),1):0},n_$C._uniform_vec3vi=function(n_$N,n_$C){return n_$vN.mainContext.uniform3iv(n_$N.location,n_$C),1},n_$C._uniform_vec4i=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$vN.mainContext.uniform4i(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3]),1):0},n_$C._uniform_vec4vi=function(n_$N,n_$C){return n_$vN.mainContext.uniform4iv(n_$N.location,n_$C),1},n_$C._uniform_sampler2D=function(n_$N,n_$C){var n_$a=n_$vN.mainContext,n_$u=n_$N.uploadedValue;return null==n_$u[0]?(n_$u[0]=this._curActTexIndex,n_$a.uniform1i(n_$N.location,this._curActTexIndex),n_$a.activeTexture(n_$A._TEXTURES[this._curActTexIndex]),n_$XN.bindTexture(n_$a,3553,n_$C),this._curActTexIndex++,1):(n_$a.activeTexture(n_$A._TEXTURES[n_$u[0]]),n_$XN.bindTexture(n_$a,3553,n_$C),0)},n_$C._uniform_samplerCube=function(n_$N,n_$C){var n_$a=n_$vN.mainContext,n_$u=n_$N.uploadedValue;return null==n_$u[0]?(n_$u[0]=this._curActTexIndex,n_$a.uniform1i(n_$N.location,this._curActTexIndex),n_$a.activeTexture(n_$A._TEXTURES[this._curActTexIndex]),n_$XN.bindTexture(n_$a,34067,n_$C),this._curActTexIndex++,1):(n_$a.activeTexture(n_$A._TEXTURES[n_$u[0]]),n_$XN.bindTexture(n_$a,34067,n_$C),0)},n_$C._noSetValue=function(n_$N){console.log("no....:"+n_$N.name)},n_$C.uploadOne=function(n_$N,n_$C){this.activeResource(),n_$XN.UseProgram(this._program);var n_$a=this._paramsMap[n_$N];n_$a.fun.call(this,n_$a,n_$C)},n_$C.uploadTexture2D=function(n_$N){n_$d.shaderCall++;var n_$C=n_$vN.mainContext;n_$C.activeTexture(33984),n_$XN.bindTexture(n_$C,3553,n_$N)},n_$C.uploadTexture2D1=function(n_$N){n_$d.shaderCall++;var n_$C=n_$vN.mainContext;n_$C.activeTexture(33985),n_$XN.bindTexture(n_$C,3553,n_$N)},n_$C.upload=function(n_$N,n_$C){n_$yN.activeShader=n_$yN.bindShader=this,this._lastUseFrameCount===n_$d.loopCount||this.activeResource(),n_$XN.UseProgram(this._program),this._reCompile?(n_$C=this._params,this._reCompile=!1):n_$C=n_$C||this._params;n_$vN.mainContext;for(var n_$a,n_$u,n_$e=n_$C.length,n_$J=0,n_$M=0;n_$M<n_$e;n_$M++)null!==(n_$u=n_$N[(n_$a=n_$C[n_$M]).name])&&(n_$J+=n_$a.fun.call(this,n_$a,n_$u));n_$d.shaderCall+=n_$J},n_$C.uploadArray=function(n_$N,n_$C,n_$a){n_$yN.activeShader=this,(n_$yN.bindShader=this).activeResource(),n_$XN.UseProgram(this._program);this._params;for(var n_$u,n_$e,n_$J=0,n_$M=n_$C-2;0<=n_$M;n_$M-=2)(n_$e=this._paramsMap[n_$N[n_$M]])&&null!=(n_$u=n_$N[n_$M+1])&&(n_$a&&n_$a[n_$e.name]&&n_$a[n_$e.name].bind(),n_$J+=n_$e.fun.call(this,n_$e,n_$u));n_$d.shaderCall+=n_$J},n_$C.getParams=function(){return this._params},n_$A.getShader=function(n_$N){return n_$A.sharders[n_$N]},n_$A.create=function(n_$N,n_$C,n_$a,n_$u){return new n_$A(n_$N,n_$C,n_$a,n_$u)},n_$A.withCompile=function(n_$N,n_$C,n_$a,n_$u){if(n_$a&&n_$A.sharders[n_$a])return n_$A.sharders[n_$a];var n_$e=n_$A._preCompileShader[2e-4*n_$N];if(!n_$e)throw new Error("withCompile shader err!"+n_$N);return n_$e.createShader(n_$C,n_$a,n_$u)},n_$A.withCompile2D=function(n_$N,n_$C,n_$a,n_$u,n_$e){if(n_$u&&n_$A.sharders[n_$u])return n_$A.sharders[n_$u];var n_$J=n_$A._preCompileShader[2e-4*n_$N+n_$C];if(!n_$J)throw new Error("withCompile shader err!"+n_$N+" "+n_$C);return n_$J.createShader(n_$a,n_$u,n_$e)},n_$A.addInclude=function(n_$N,n_$C){n_$WN.addInclude(n_$N,n_$C)},n_$A.preCompile=function(n_$N,n_$C,n_$a,n_$u){var n_$e=2e-4*n_$N;n_$A._preCompileShader[n_$e]=new n_$WN(n_$e,n_$C,n_$a,n_$u)},n_$A.preCompile2D=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=2e-4*n_$N+n_$C;n_$A._preCompileShader[n_$J]=new n_$WN(n_$J,n_$a,n_$u,n_$e)},n_$A._createShader=function(n_$N,n_$C,n_$a){var n_$u=n_$N.createShader(n_$a);return n_$N.shaderSource(n_$u,n_$C),n_$N.compileShader(n_$u),n_$u},n_$A._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],n_$A._count=0,n_$A._preCompileShader={},n_$A.SHADERNAME2ID=2e-4,n_$A.sharders=((n_$A.sharders=[]).length=32,n_$A.sharders),n_$M(n_$A,["nameKey",function(){return this.nameKey=new n_$Q}]),n_$A}(),n_$HN=function(n_$N){function n_$C(){this._maxsize=0,this._upload=!0,this._uploadSize=0,n_$C.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}n_$O(n_$C,"laya.webgl.utils.Buffer2D",n_$N);var n_$a=n_$C.prototype;return n_$a.needSize=function(n_$N){var n_$C=this._byteLength;if(n_$N){var n_$a=this._byteLength+n_$N;n_$a<=this._buffer.byteLength||this._resizeBuffer(n_$a<<1,!0),this._byteLength=n_$a}return n_$C},n_$a._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),n_$d.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,n_$LN._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),n_$LN._gl.bufferSubData(this._bufferType,0,this._buffer)},n_$a._bufferSubData=function(n_$N,n_$C,n_$a){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),this._maxsize=Math.max(this._maxsize,this._byteLength),n_$d.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,n_$LN._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),n_$C||n_$a){var n_$u=this._buffer.slice(n_$C,n_$a);n_$LN._gl.bufferSubData(this._bufferType,n_$N,n_$u)}else n_$LN._gl.bufferSubData(this._bufferType,n_$N,this._buffer)},n_$a._checkArrayUse=function(){},n_$a._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},n_$a._bind_subUpload=function(n_$N,n_$C,n_$a){return void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(n_$N,n_$C,n_$a),!0)},n_$a._resizeBuffer=function(n_$N,n_$C){if(n_$N<this._buffer.byteLength)return this;if(this.memorySize=n_$N,n_$C&&this._buffer&&0<this._buffer.byteLength){var n_$a=new ArrayBuffer(n_$N);new Uint8Array(n_$a).set(new Uint8Array(this._buffer),0),this._buffer=n_$a}else this._buffer=new ArrayBuffer(n_$N);return this._checkArrayUse(),this._upload=!0,this},n_$a.append=function(n_$N){this._upload=!0;var n_$C,n_$a;n_$C=n_$N.byteLength,n_$N instanceof Uint8Array?(this._resizeBuffer(this._byteLength+n_$C,!0),n_$a=new Uint8Array(this._buffer,this._byteLength)):n_$N instanceof Uint16Array?(this._resizeBuffer(this._byteLength+n_$C,!0),n_$a=new Uint16Array(this._buffer,this._byteLength)):n_$N instanceof Float32Array&&(this._resizeBuffer(this._byteLength+n_$C,!0),n_$a=new Float32Array(this._buffer,this._byteLength)),n_$a.set(n_$N,0),this._byteLength+=n_$C,this._checkArrayUse()},n_$a.appendU16Array=function(n_$N,n_$C){this._resizeBuffer(this._byteLength+2*n_$C,!0);for(var n_$a=new Uint16Array(this._buffer,this._byteLength,n_$C),n_$u=0;n_$u<n_$C;n_$u++)n_$a[n_$u]=n_$N[n_$u];this._byteLength+=2*n_$C,this._checkArrayUse()},n_$a.appendEx=function(n_$N,n_$C){this._upload=!0;var n_$a;n_$a=n_$N.byteLength,this._resizeBuffer(this._byteLength+n_$a,!0),new n_$C(this._buffer,this._byteLength).set(n_$N,0),this._byteLength+=n_$a,this._checkArrayUse()},n_$a.appendEx2=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$u&&(n_$u=1),this._upload=!0;var n_$e,n_$J;n_$e=n_$a*n_$u,this._resizeBuffer(this._byteLength+n_$e,!0),n_$J=new n_$C(this._buffer,this._byteLength);var n_$M=0;for(n_$M=0;n_$M<n_$a;n_$M++)n_$J[n_$M]=n_$N[n_$M];this._byteLength+=n_$e,this._checkArrayUse()},n_$a.getBuffer=function(){return this._buffer},n_$a.setNeedUpload=function(){this._upload=!0},n_$a.getNeedUpload=function(){return this._upload},n_$a.upload=function(){var n_$N=this._bind_upload();return n_$LN._gl.bindBuffer(this._bufferType,null),n_$LN._bindActive[this._bufferType]=null,n_$yN.activeShader=null,n_$N},n_$a.subUpload=function(n_$N,n_$C,n_$a){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0);var n_$u=this._bind_subUpload();return n_$LN._gl.bindBuffer(this._bufferType,null),n_$LN._bindActive[this._bufferType]=null,n_$yN.activeShader=null,n_$u},n_$a.disposeResource=function(){n_$N.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},n_$a.clear=function(){this._byteLength=0,this._upload=!0},n_$u(0,n_$a,"bufferLength",function(){return this._buffer.byteLength}),n_$u(0,n_$a,"byteLength",null,function(n_$N){this._byteLength!==n_$N&&(n_$N<=this._buffer.byteLength||this._resizeBuffer(2*n_$N+256,!0),this._byteLength=n_$N)}),n_$C.__int__=function(n_$N){n_$hN.QuadrangleIB=n_$hN.create(35044),n_$tN.fillIBQuadrangle(n_$hN.QuadrangleIB,16)},n_$C.FLOAT32=4,n_$C.SHORT=2,n_$C}(n_$LN),n_$IN=(function(n_$C){function n_$a(n_$N){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,n_$a.__super.call(this,9)}n_$O(n_$a,"laya.webgl.shader.d2.value.GlowSV",n_$C);var n_$N=n_$a.prototype;n_$N.setValue=function(n_$N){n_$C.prototype.setValue.call(this,n_$N)},n_$N.clear=function(){n_$C.prototype.clear.call(this)}}(n_$YN),function(n_$N){function n_$C(n_$N){n_$C.__super.call(this,64),this.defines.add(64)}n_$O(n_$C,"laya.webgl.shader.d2.value.TextSV",n_$N);var n_$a=n_$C.prototype;return n_$a.release=function(){(n_$C.pool[n_$C._length++]=this).clear()},n_$a.clear=function(){n_$N.prototype.clear.call(this)},n_$C.create=function(){return n_$C._length?n_$C.pool[--n_$C._length]:new n_$C(null)},n_$C.pool=[],n_$C._length=0,n_$C}(n_$YN)),n_$ZN=function(n_$N){function n_$e(n_$N,n_$C,n_$a,n_$u){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,n_$e.__super.call(this,n_$N,n_$C,n_$a,n_$u)}n_$O(n_$e,"laya.webgl.shader.d2.Shader2X",n_$N);var n_$C=n_$e.prototype;return n_$C.upload2dQuick1=function(n_$N){this.upload(n_$N,this._params2dQuick1||this._make2dQuick1())},n_$C._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var n_$N,n_$C=this._params,n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++)n_$N=n_$C[n_$a],(n_$g.isFlash||"size"!==n_$N.name&&"position"!==n_$N.name&&"texcoord"!==n_$N.name)&&this._params2dQuick1.push(n_$N)}return this._params2dQuick1},n_$C.disposeResource=function(){n_$N.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},n_$C.upload2dQuick2=function(n_$N){this.upload(n_$N,this._params2dQuick2||this._make2dQuick2())},n_$C._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var n_$N,n_$C=this._params,n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++)n_$N=n_$C[n_$a],(n_$g.isFlash||"size"!==n_$N.name)&&this._params2dQuick2.push(n_$N)}return this._params2dQuick2},n_$e.create=function(n_$N,n_$C,n_$a,n_$u){return new n_$e(n_$N,n_$C,n_$a,n_$u)},n_$e}(n_$oN),n_$hN=function(n_$N){function n_$C(n_$N){this._uint8Array=null,this._uint16Array=null,void 0===n_$N&&(n_$N=35044),n_$C.__super.call(this),this._bufferUsage=n_$N,this._bufferType=34963,n_$g.isFlash||(this._buffer=new ArrayBuffer(8))}n_$O(n_$C,"laya.webgl.utils.IndexBuffer2D",n_$HN);var n_$a=n_$C.prototype;return n_$a._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},n_$a.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},n_$a.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},n_$a.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},n_$C.QuadrangleIB=null,n_$C.create=function(n_$N){return void 0===n_$N&&(n_$N=35044),new n_$C(n_$N)},n_$C}(),n_$UN=function(n_$N){function n_$a(n_$N,n_$C){this._floatArray32=null,this._vertexStride=0,n_$a.__super.call(this),this._vertexStride=n_$N,this._bufferUsage=n_$C,this._bufferType=34962,n_$g.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}n_$O(n_$a,"laya.webgl.utils.VertexBuffer2D",n_$N);var n_$C=n_$a.prototype;return n_$C.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},n_$C.bind=function(n_$N){n_$N&&n_$N._bind(),this._bind()},n_$C.insertData=function(n_$N,n_$C){this.getFloat32Array().set(n_$N,n_$C),this._upload=!0},n_$C.bind_upload=function(n_$N){n_$N._bind_upload()||n_$N._bind(),this._bind_upload()||this._bind()},n_$C._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},n_$C.disposeResource=function(){n_$N.prototype.disposeResource.call(this)},n_$C.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},n_$u(0,n_$C,"vertexStride",function(){return this._vertexStride}),n_$a.create=function(n_$N,n_$C){return void 0===n_$C&&(n_$C=35048),new n_$a(n_$N,n_$C)},n_$a}(n_$HN),n_$NC=function(n_$N){function n_$n(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===n_$a&&(n_$a=6408),void 0===n_$u&&(n_$u=!0),n_$n.__super.call(this,n_$N,n_$C),n_$N){if(this._format=n_$a,this._mipmap=n_$u,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof n_$N)this._url=n_$N,this._src=n_$N,this._image=new n_$G.window.Image,n_$C&&(n_$C.onload&&(this.onload=n_$C.onload),n_$C.onerror&&(this.onerror=n_$C.onerror),n_$C.onCreate&&n_$C.onCreate(this)),this._image.crossOrigin=n_$N&&0==n_$N.indexOf("data:")?null:"",n_$N&&(this._image.src=n_$N);else if(n_$N instanceof ArrayBuffer){this._src=n_$C,this._url=this._src;var n_$M=new n_$V(n_$N);n_$M.readUTFBytes(4),n_$M.readUTFBytes(2),n_$M.getInt16();n_$M.endian="bigEndian",this._w=n_$M.getInt16(),this._h=n_$M.getInt16();n_$M.getInt16(),n_$M.getInt16();this._image=new Uint8Array(n_$N,n_$M.pos),this._format=n_$vN.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,n_$B.enabled&&this._w<n_$B.atlasLimitWidth&&this._h<n_$B.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(n_$N instanceof Uint8Array))return this._src=n_$C,this._url=this._src,this._image=n_$N.source||n_$N,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=n_$C,this._url=this._src,this._w=n_$e,this._h=n_$J,this._image=n_$N,this._format=0===n_$a?n_$N.byteLength/(n_$e*n_$J)==4?6408:6407:n_$a}this._$5__enableMerageInAtlas=!0}}n_$O(n_$n,"laya.webgl.resource.WebGLImage",n_$f);var n_$C=n_$n.prototype;return n_$r.imps(n_$C,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),n_$C._init_=function(n_$N,n_$C){},n_$C._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var n_$N=n_$vN.mainContext,n_$C=this._source=n_$N.createTexture(),n_$a=n_$XN.curBindTexTarget,n_$u=n_$XN.curBindTexValue;n_$XN.bindTexture(n_$N,3553,n_$C);var n_$e=this.minFifter,n_$J=this.magFifter,n_$M=this.repeat?10497:33071,n_$n=n_$P.isPOT(this._w,this._h),n_$V=!1;switch(n_$n?(this.mipmap?-1!==n_$e||(n_$e=9987):-1!==n_$e||(n_$e=9729),-1!==n_$J||(n_$J=9729),n_$N.texParameteri(3553,10241,n_$e),n_$N.texParameteri(3553,10240,n_$J),n_$N.texParameteri(3553,10242,n_$M),n_$N.texParameteri(3553,10243,n_$M),this.mipmap&&n_$N.generateMipmap(3553)):(-1!==n_$e||(n_$e=9729),-1!==n_$J||(n_$J=9729),n_$N.texParameteri(3553,10241,n_$e),n_$N.texParameteri(3553,10240,n_$J),n_$N.texParameteri(3553,10242,33071),n_$N.texParameteri(3553,10243,33071)),n_$N.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&n_$N.pixelStorei(n_$N.UNPACK_ALIGNMENT,1),n_$N.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&n_$N.pixelStorei(n_$N.UNPACK_ALIGNMENT,1),n_$N.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:n_$V=!0,n_$N.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case n_$vN.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:n_$V=!0,n_$N.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}n_$N.pixelStorei(37441,!1),n_$a&&n_$u&&n_$XN.bindTexture(n_$N,n_$a,n_$u),this.uri||(this.uri=this._url),n_$V?this.memorySize=this._image.length:n_$n&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},n_$C.recreateResource=function(){var n_$N=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var n_$C=this;this._image=new n_$G.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(n_$C._needReleaseAgain)return n_$C._needReleaseAgain=!1,n_$C._image.onload=null,void(n_$C._image=null);n_$C._allowMerageInAtlas&&n_$C._enableMerageInAtlas?(n_$N.memorySize=0,n_$N._recreateLock=!1):n_$C._createWebGlTexture(),n_$C.completeCreate()},this._image.src=this._src}},n_$C.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&n_$vN.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},n_$C.onresize=function(){this._w=this._image.width,this._h=this._image.height,n_$B.enabled&&this._w<n_$B.atlasLimitWidth&&this._h<n_$B.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},n_$C.clearAtlasSource=function(){this._image=null},n_$u(0,n_$C,"format",function(){return this._format}),n_$u(0,n_$C,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(n_$N){this._$5__enableMerageInAtlas=n_$N}),n_$u(0,n_$C,"mipmap",function(){return this._mipmap}),n_$u(0,n_$C,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),n_$u(0,n_$C,"atlasSource",function(){return this._image}),n_$u(0,n_$C,"onload",null,function(n_$N){var n_$C=this;this._onload=n_$N,this._image&&(this._image.onload=null!=this._onload?function(){n_$C.onresize(),n_$C._onload()}:null)}),n_$u(0,n_$C,"onerror",null,function(n_$N){var n_$C=this;this._onerror=n_$N,this._image&&(this._image.onerror=null!=this._onerror?function(){n_$C._onerror()}:null)}),n_$n}();n_$r.__init([n_$GN,n_$w,n_$cN,n_$WN])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(n_$N,n_$C){"use strict";for(var n_$a in Object.defineProperty(n_$C,"__esModule",{value:!0}),Laya){var n_$u=Laya[n_$a];n_$u&&n_$u.__isclass&&(n_$C[n_$a]=n_$u)}}),function(n_$J,n_$N,n_$u){n_$u.un,n_$u.uns;var n_$e=n_$u.static,n_$M=n_$u.class,n_$n=n_$u.getset,n_$V=(n_$u.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),n_$z=laya.utils.ClassUtils,n_$$=(laya.events.Event,laya.utils.HTMLChar),n_$A=laya.net.Loader,n_$P=(laya.display.Node,laya.maths.Rectangle),n_$O=laya.renders.Render,n_$G=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),n_$f=laya.utils.Stat,n_$y=laya.display.Text,n_$t=laya.resource.Texture,n_$g=laya.net.URL,n_$x=laya.utils.Utils,n_$W=function(){function n_$G(){}return n_$M(n_$G,"laya.html.utils.HTMLParse"),n_$G.parse=function(n_$N,n_$C,n_$a){n_$C=(n_$C="<root>"+(n_$C=n_$C.replace(/<br>/g,"<br/>"))+"</root>").replace(n_$G.spacePattern,n_$G.char255);var n_$u=n_$x.parseXMLFromString(n_$C);n_$G._parseXML(n_$N,n_$u.childNodes[0].childNodes,n_$a)},n_$G._parseXML=function(n_$N,n_$C,n_$a,n_$u){var n_$e=0,n_$J=0;if(n_$C.join||n_$C.item)for(n_$e=0,n_$J=n_$C.length;n_$e<n_$J;++n_$e)n_$G._parseXML(n_$N,n_$C[n_$e],n_$a,n_$u);else{var n_$M,n_$n,n_$V;if(3==n_$C.nodeType)return void(n_$N instanceof laya.html.dom.HTMLDivElement?(null==n_$C.nodeName&&(n_$C.nodeName="#text"),n_$n=n_$C.nodeName.toLowerCase(),0<(n_$V=n_$C.textContent.replace(/^\s+|\s+$/g,"")).length&&(n_$M=n_$z.getInstance(n_$n))&&(n_$N.addChild(n_$M),n_$M.innerTEXT=n_$V.replace(n_$G.char255AndOneSpacePattern," "))):0<(n_$V=n_$C.textContent.replace(/^\s+|\s+$/g,"")).length&&(n_$N.innerTEXT=n_$V.replace(n_$G.char255AndOneSpacePattern," ")));if("#comment"==(n_$n=n_$C.nodeName.toLowerCase()))return;if(n_$M=n_$z.getInstance(n_$n)){(n_$M=n_$N.addChild(n_$M)).URI=n_$a,n_$M.href=n_$u;var n_$A=n_$C.attributes;if(n_$A&&0<n_$A.length)for(n_$e=0,n_$J=n_$A.length;n_$e<n_$J;++n_$e){var n_$P=n_$A[n_$e],n_$$=n_$P.nodeName,n_$O=n_$P.value;n_$M._setAttributes(n_$$,n_$O)}n_$G._parseXML(n_$M,n_$C.childNodes,n_$a,n_$M.href)}else n_$G._parseXML(n_$N,n_$C.childNodes,n_$a,n_$u)}},n_$G.char255=String.fromCharCode(255),n_$G.spacePattern=/&nbsp;|&#160;/g,n_$G.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),n_$G}(),n_$v=function(){function n_$j(){}return n_$M(n_$j,"laya.html.utils.Layout"),n_$j.later=function(n_$N){null==n_$j._will&&(n_$j._will=[],n_$u.stage.frameLoop(1,null,function(){if(!(n_$j._will.length<1)){for(var n_$N=0;n_$N<n_$j._will.length;n_$N++)laya.html.utils.Layout.layout(n_$j._will[n_$N]);n_$j._will.length=0}})),n_$j._will.push(n_$N)},n_$j.layout=function(n_$N){if(!n_$N||!n_$N._style)return null;if(0==(512&n_$N._style._type))return null;n_$N.getStyle()._type&=-513;var n_$C=n_$j._multiLineLayout(n_$N);return n_$O.isConchApp&&n_$N.layaoutCallNative&&n_$N.layaoutCallNative(),n_$C},n_$j._multiLineLayout=function(n_$N){if(n_$y.RightToLeft)return n_$j._multiLineLayout2(n_$N);var n_$C=new Array;n_$N._addChildsToLayout(n_$C);var n_$a,n_$u,n_$e,n_$J,n_$M,n_$n=0,n_$V=n_$C.length,n_$A=n_$N._getCSSStyle(),n_$P=n_$A.letterSpacing,n_$$=n_$A.leading,n_$O=n_$A.lineHeight,n_$G=n_$A._widthAuto()||!n_$A.wordWrap,n_$z=n_$G?999999:n_$N.width,n_$f=(n_$N.height,0),n_$t=n_$A.italic?n_$A.fontSize/3:0,n_$g=n_$A._getAlign(),n_$x=n_$A._getValign(),n_$W=0!==n_$x||0!==n_$g||0!=n_$O,n_$v=0,n_$X=0,n_$r=0,n_$c=0,n_$E=new Array,n_$F=n_$E[0]=new n_$T,n_$D=!1,n_$s=!1;n_$F.h=0,n_$A.italic&&(n_$z-=n_$A.fontSize/3);var n_$q=0,n_$_=!0;function n_$d(){n_$F.y=n_$X,n_$X+=n_$F.h+n_$$,0==n_$F.h&&(n_$X+=n_$O),n_$F.mWidth=n_$q,n_$q=0,n_$F=new n_$T,n_$E.push(n_$F),n_$F.h=0,n_$D=!(n_$_=!(n_$v=0))}for(n_$n=0;n_$n<n_$V;n_$n++)if(null!=(n_$a=n_$C[n_$n]))if(n_$_=!1,n_$a instanceof laya.html.dom.HTMLBrElement)n_$d(),n_$F.y=n_$X;else{if(n_$a._isChar()){if((n_$J=n_$a).isWord)n_$D=n_$s||"\n"===n_$J.char,n_$F.wordStartIndex=n_$F.elements.length;else{if(n_$r=n_$J.width+n_$J.style.letterSpacin,0<n_$E.length&&n_$z<n_$v+n_$r&&0<n_$F.wordStartIndex){var n_$Q;n_$Q=n_$F.elements.length-n_$F.wordStartIndex+1,n_$F.elements.length=n_$F.wordStartIndex,n_$n-=n_$Q,n_$d();continue}n_$D=!1,n_$q+=n_$J.width}n_$r=n_$J.width+n_$P,n_$c=n_$J.height,n_$s=!1,(n_$D=n_$D||n_$z<n_$v+n_$r)&&n_$d(),n_$F.minTextHeight=Math.min(n_$F.minTextHeight,n_$a.height)}else n_$u=n_$a._getCSSStyle(),n_$M=n_$a,n_$e=n_$u.padding,0===n_$u._getCssFloat()||(n_$W=!0),n_$D=n_$s||n_$u.lineElement,n_$r=n_$M.width*n_$M._style._tf.scaleX+n_$e[1]+n_$e[3]+n_$P,n_$c=n_$M.height*n_$M._style._tf.scaleY+n_$e[0]+n_$e[2],n_$s=n_$u.lineElement,(n_$D=n_$D||n_$z<n_$v+n_$r&&n_$u.wordWrap)&&n_$d();n_$F.elements.push(n_$a),n_$F.h=Math.max(n_$F.h,n_$c),n_$a.x=n_$v,n_$a.y=n_$X,n_$v+=n_$r,n_$F.w=n_$v-n_$P,n_$F.y=n_$X,n_$f=Math.max(n_$v+n_$t,n_$f)}else n_$_||(n_$v+=n_$j.DIV_ELEMENT_PADDING),n_$F.wordStartIndex=n_$F.elements.length;if(n_$X=n_$F.y+n_$F.h,n_$W){var n_$l=0,n_$i=n_$z;for(n_$G&&0<n_$N.width&&(n_$i=n_$N.width),n_$n=0,n_$V=n_$E.length;n_$n<n_$V;n_$n++)n_$E[n_$n].updatePos(0,n_$i,n_$n,n_$l,n_$g,n_$x,n_$O),n_$l+=Math.max(n_$O,n_$E[n_$n].h+n_$$);n_$X=n_$l}return n_$G&&(n_$N.width=n_$f),n_$X>n_$N.height&&(n_$N.height=n_$X),[n_$f,n_$X]},n_$j._multiLineLayout2=function(n_$N){var n_$C=new Array;n_$N._addChildsToLayout(n_$C);var n_$a,n_$u,n_$e,n_$J,n_$M,n_$n=0,n_$V=n_$C.length,n_$A=n_$N._getCSSStyle(),n_$P=n_$A.letterSpacing,n_$$=n_$A.leading,n_$O=n_$A.lineHeight,n_$G=n_$A._widthAuto()||!n_$A.wordWrap,n_$z=n_$G?999999:n_$N.width,n_$f=(n_$N.height,0),n_$t=n_$A.italic?n_$A.fontSize/3:0,n_$g=2-n_$A._getAlign(),n_$x=n_$A._getValign(),n_$W=0!==n_$x||0!=n_$g||0!=n_$O,n_$v=0,n_$X=0,n_$r=0,n_$c=0,n_$E=new Array,n_$F=n_$E[0]=new n_$T,n_$D=!1,n_$s=!1;n_$F.h=0,n_$A.italic&&(n_$z-=n_$A.fontSize/3);var n_$q=0,n_$_=!0;function n_$d(){n_$F.y=n_$X,n_$X+=n_$F.h+n_$$,0==n_$F.h&&(n_$X+=n_$O),n_$F.mWidth=n_$q,n_$q=0,n_$F=new n_$T,n_$E.push(n_$F),n_$F.h=0,n_$D=!(n_$_=!(n_$v=0))}for(n_$n=0;n_$n<n_$V;n_$n++)if(null!=(n_$a=n_$C[n_$n]))if(n_$_=!1,n_$a instanceof laya.html.dom.HTMLBrElement)n_$d(),n_$F.y=n_$X;else{if(n_$a._isChar()){if((n_$J=n_$a).isWord)n_$D=n_$s||"\n"===n_$J.char,n_$F.wordStartIndex=n_$F.elements.length;else{if(0<n_$E.length&&n_$z<n_$v+n_$r&&0<n_$F.wordStartIndex){var n_$Q;n_$Q=n_$F.elements.length-n_$F.wordStartIndex+1,n_$F.elements.length=n_$F.wordStartIndex,n_$n-=n_$Q,n_$d();continue}n_$D=!1,n_$q+=n_$J.width}n_$r=n_$J.width+n_$P,n_$c=n_$J.height,n_$s=!1,(n_$D=n_$D||n_$z<n_$v+n_$r)&&n_$d(),n_$F.minTextHeight=Math.min(n_$F.minTextHeight,n_$a.height)}else n_$u=n_$a._getCSSStyle(),n_$M=n_$a,n_$e=n_$u.padding,0===n_$u._getCssFloat()||(n_$W=!0),n_$D=n_$s||n_$u.lineElement,n_$r=n_$M.width*n_$M._style._tf.scaleX+n_$e[1]+n_$e[3]+n_$P,n_$c=n_$M.height*n_$M._style._tf.scaleY+n_$e[0]+n_$e[2],n_$s=n_$u.lineElement,(n_$D=n_$D||n_$z<n_$v+n_$r&&n_$u.wordWrap)&&n_$d();n_$F.elements.push(n_$a),n_$F.h=Math.max(n_$F.h,n_$c),n_$a.x=n_$v,n_$a.y=n_$X,n_$v+=n_$r,n_$F.w=n_$v-n_$P,n_$F.y=n_$X,n_$f=Math.max(n_$v+n_$t,n_$f)}else n_$_||(n_$v+=n_$j.DIV_ELEMENT_PADDING),n_$F.wordStartIndex=n_$F.elements.length;if(n_$X=n_$F.y+n_$F.h,n_$W){var n_$l=0,n_$i=n_$z;for(n_$n=0,n_$V=n_$E.length;n_$n<n_$V;n_$n++)n_$E[n_$n].updatePos(0,n_$i,n_$n,n_$l,n_$g,n_$x,n_$O),n_$l+=Math.max(n_$O,n_$E[n_$n].h+n_$$);n_$X=n_$l}for(n_$G&&(n_$N.width=n_$f),n_$X>n_$N.height&&(n_$N.height=n_$X),n_$n=0,n_$V=n_$E.length;n_$n<n_$V;n_$n++)n_$E[n_$n].revertOrder(n_$z);return[n_$f,n_$X]},n_$j._will=null,n_$j.DIV_ELEMENT_PADDING=0,n_$j}(),n_$T=function(){function n_$N(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}n_$M(n_$N,"laya.html.utils.LayoutLine");var n_$C=n_$N.prototype;return n_$C.updatePos=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){var n_$n,n_$V=0;0<this.elements.length&&(n_$V=(n_$n=this.elements[this.elements.length-1]).x+n_$n.width-this.elements[0].x);var n_$A=0,n_$P=NaN;1===n_$e&&(n_$A=(n_$C-n_$V)/2),2===n_$e&&(n_$A=n_$C-n_$V),0===n_$M||0!=n_$J||(n_$J=1);for(var n_$$=0,n_$O=this.elements.length;n_$$<n_$O;n_$$++){var n_$G=(n_$n=this.elements[n_$$])._getCSSStyle();switch(0!==n_$A&&(n_$n.x+=n_$A),n_$G._getValign()){case 0:n_$n.y=n_$u;break;case 1:var n_$z=0;99999!=this.minTextHeight&&(n_$z=this.minTextHeight);var n_$f=(n_$z+n_$M)/2;n_$f=Math.max(n_$f,this.h),n_$P=(laya.html.dom.HTMLImageElement,n_$u+n_$f-n_$n.height),n_$n.y=n_$P;break;case 2:n_$n.y=n_$u+(n_$M-n_$n.height)}}},n_$C.revertOrder=function(n_$N){var n_$C;if(0<this.elements.length){var n_$a,n_$u=0;for(n_$a=this.elements.length,n_$u=0;n_$u<n_$a;n_$u++)(n_$C=this.elements[n_$u]).x=n_$N-n_$C.x-n_$C.width}},n_$N}(),n_$X=function(n_$a){function n_$C(){this.URI=null,this._href=null,n_$C.__super.call(this),this._text=n_$C._EMPTYTEXT,this.setStyle(new n_$V(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}n_$M(n_$C,"laya.html.dom.HTMLElement",n_$a);var n_$N=n_$C.prototype;return n_$N.layaoutCallNative=function(){var n_$N=0;if(this._childs&&0<(n_$N=this._childs.length))for(var n_$C=0;n_$C<n_$N;n_$C++)this._childs[n_$C].layaoutCallNative&&this._childs[n_$C].layaoutCallNative();var n_$a=this._getWords();n_$a?laya.html.dom.HTMLElement.fillWords(this,n_$a,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},n_$N.appendChild=function(n_$N){return this.addChild(n_$N)},n_$N._getWords2=function(){var n_$N=this._text.text;if(!n_$N||0===n_$N.length)return null;var n_$C,n_$a,n_$u=0,n_$e=0;if(this._text.drawWords)n_$a=this._text.drawWords;else{for(n_$e=(n_$C=n_$N.split(" ")).length-1,n_$a=[],n_$u=0;n_$u<n_$e;n_$u++)n_$a.push(n_$C[n_$u]," ");0<=n_$e&&n_$a.push(n_$C[n_$e]),this._text.drawWords=n_$a}var n_$J,n_$M=this._text.words;if(n_$M&&n_$M.length===n_$a.length)return n_$M;null===n_$M&&(this._text.words=n_$M=[]),n_$M.length=n_$a.length;var n_$n=this.style,n_$V=n_$n.font;for(n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$u++){n_$J=n_$x.measureText(n_$a[n_$u],n_$V);var n_$A=n_$M[n_$u]=new n_$$(n_$a[n_$u],n_$J.width,n_$J.height||n_$n.fontSize,n_$n);if(1<n_$A.char.length&&(n_$A.charNum=n_$A.char),this.href){var n_$P=new n_$G;this.addChild(n_$P),n_$A.setSprite(n_$P)}}return n_$M},n_$N._getWords=function(){if(!n_$y.CharacterCache)return this._getWords2();var n_$N=this._text.text;if(!n_$N||0===n_$N.length)return null;var n_$C,n_$a=this._text.words;if(n_$a&&n_$a.length===n_$N.length)return n_$a;null===n_$a&&(this._text.words=n_$a=[]),n_$a.length=n_$N.length;for(var n_$u=this.style,n_$e=n_$u.font,n_$J=0,n_$M=n_$N.length;n_$J<n_$M;n_$J++)if(n_$C=n_$x.measureText(n_$N.charAt(n_$J),n_$e)){var n_$n=n_$a[n_$J]=new n_$$(n_$N.charAt(n_$J),n_$C.width,n_$C.height||n_$u.fontSize,n_$u);if(this.href){var n_$V=new n_$G;this.addChild(n_$V),n_$n.setSprite(n_$V)}}else console.warn("_getWords size is null"+n_$N.charAt(n_$J),n_$e);return n_$a},n_$N.showLinkSprite=function(){var n_$N=this._text.words;if(n_$N)for(var n_$C,n_$a,n_$u=[],n_$e=0;n_$e<n_$N.length;n_$e++)n_$a=n_$N[n_$e],(n_$C=new n_$G).graphics.drawRect(0,0,n_$a.width,n_$a.height,"#ff0000"),n_$C.width=n_$a.width,n_$C.height=n_$a.height,this.addChild(n_$C),n_$u.push(n_$C)},n_$N._layoutLater=function(){var n_$N=this.style;512&n_$N._type||(n_$N.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&n_$N.block?(n_$v.later(this),n_$N._type|=512):this.parent&&this.parent._layoutLater())},n_$N._setAttributes=function(n_$N,n_$C){switch(n_$N){case"style":return void this.style.cssText(n_$C);case"class":return void(this.className=n_$C)}n_$a.prototype._setAttributes.call(this,n_$N,n_$C)},n_$N.updateHref=function(){if(null!=this._href){var n_$N=this._getWords();if(n_$N)for(var n_$C,n_$a,n_$u=0;n_$u<n_$N.length;n_$u++)(n_$a=(n_$C=n_$N[n_$u]).getSprite())&&(n_$a.size(n_$C.width,n_$C.height),n_$a.on("click",this,this.onLinkHandler))}},n_$N.onLinkHandler=function(n_$N){switch(n_$N.type){case"click":for(var n_$C=this;n_$C;)n_$C.event("link",[this.href]),n_$C=n_$C.parent}},n_$N.formatURL=function(n_$N){return this.URI?n_$g.formatURL(n_$N,this.URI?this.URI.path:null):n_$N},n_$n(0,n_$N,"href",function(){return this._href},function(n_$N){null!=(this._href=n_$N)&&(this._getCSSStyle().underLine=1,this.updateHref())}),n_$n(0,n_$N,"color",null,function(n_$N){this.style.color=n_$N}),n_$n(0,n_$N,"onClick",null,function(n_$N){n_$u._runScript("fn=function(event){"+n_$N+";}"),this.on("click",this,void 0)}),n_$n(0,n_$N,"id",null,function(n_$N){n_$r.document.setElementById(n_$N,this)}),n_$n(0,n_$N,"innerTEXT",function(){return this._text.text},function(n_$N){this.text=n_$N}),n_$n(0,n_$N,"style",function(){return this._style}),n_$n(0,n_$N,"text",function(){return this._text.text},function(n_$N){this._text==n_$C._EMPTYTEXT?this._text={text:n_$N,words:null}:(this._text.text=n_$N,this._text.words&&(this._text.words.length=0)),n_$O.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),n_$n(0,n_$N,"parent",n_$a.prototype._$get_parent,function(n_$N){if(n_$N instanceof laya.html.dom.HTMLElement){var n_$C=n_$N;this.URI||(this.URI=n_$C.URI),this.style.inherit(n_$C.style)}n_$u.superSet(n_$G,this,"parent",n_$N)}),n_$n(0,n_$N,"className",null,function(n_$N){this.style.attrs(n_$r.document.styleSheets["."+n_$N])}),n_$C.fillWords=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$N.graphics.clear();for(var n_$n=0,n_$V=n_$C.length;n_$n<n_$V;n_$n++){var n_$A=n_$C[n_$n];n_$N.graphics.fillText(n_$A.char,n_$A.x+n_$a,n_$A.y+n_$u,n_$e,n_$J,"left",n_$M)}},n_$C._EMPTYTEXT={text:null,words:null},n_$C}(n_$G),n_$C=(function(n_$N){function n_$C(){n_$C.__super.call(this),this.style.lineElement=!0,this.style.block=!0}n_$M(n_$C,"laya.html.dom.HTMLBrElement",n_$X)}(),function(n_$N){function n_$C(){this.contextHeight=NaN,this.contextWidth=NaN,n_$C.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}n_$M(n_$C,"laya.html.dom.HTMLDivElement",n_$N);var n_$a=n_$C.prototype;return n_$a.appendHTML=function(n_$N){n_$W.parse(this,n_$N,this.URI),this.layout()},n_$a._addChildsToLayout=function(n_$C){var n_$N=this._getWords();if(null==n_$N&&0==this._childs.length)return!1;n_$N&&n_$N.forEach(function(n_$N){n_$C.push(n_$N)});for(var n_$a=!0,n_$u=0,n_$e=this._childs.length;n_$u<n_$e;n_$u++){var n_$J=this._childs[n_$u];n_$a?n_$a=!1:n_$C.push(null),n_$J._addToLayout(n_$C)}return!0},n_$a._addToLayout=function(n_$N){this.layout()},n_$a.layout=function(){if(this.style){this.style._type|=512;var n_$N=n_$v.layout(this);if(n_$N){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new n_$P);var n_$C=this._$P.mHtmlBounds;n_$C.x=n_$C.y=0,n_$C.width=this.contextWidth=n_$N[0],n_$C.height=this.contextHeight=n_$N[1],this.setBounds(n_$C)}}},n_$n(0,n_$a,"height",function(){return this._height?this._height:this.contextHeight},n_$N.prototype._$set_height),n_$n(0,n_$a,"innerHTML",null,function(n_$N){this.destroyChildren(),this.appendHTML(n_$N)}),n_$n(0,n_$a,"width",function(){return this._width?this._width:this.contextWidth},function(n_$N){var n_$C=!1;n_$C=0===n_$N?n_$N!=this._width:n_$N!=this.width,n_$u.superSet(n_$X,this,"width",n_$N),n_$C&&this.layout()}),n_$C}(n_$X)),n_$r=function(n_$N){function n_$C(){this.all=new Array,this.styleSheets=n_$V.styleSheets,n_$C.__super.call(this)}n_$M(n_$C,"laya.html.dom.HTMLDocument",n_$X);var n_$a=n_$C.prototype;return n_$a.getElementById=function(n_$N){return this.all[n_$N]},n_$a.setElementById=function(n_$N,n_$C){this.all[n_$N]=n_$C},n_$e(n_$C,["document",function(){return this.document=new n_$C}]),n_$C}();(function(n_$N){function n_$C(){this._tex=null,this._url=null,this._renderArgs=[],n_$C.__super.call(this),this.style.block=!0}n_$M(n_$C,"laya.html.dom.HTMLImageElement",n_$X);var n_$a=n_$C.prototype;n_$a._addToLayout=function(n_$N){!this._style.absolute&&n_$N.push(this)},n_$a.render=function(n_$N,n_$C,n_$a){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(n_$f.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,n_$N.ctx.drawTexture2(n_$C,n_$a,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},n_$a.layaoutCallNative=function(){var n_$N=0;if(this._childs&&0<(n_$N=this._childs.length))for(var n_$C=0;n_$C<n_$N;n_$C++)this._childs[n_$C].layaoutCallNative&&this._childs[n_$C].layaoutCallNative()},n_$n(0,n_$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(n_$N){this._width!==n_$N&&(this._width=n_$N,this._style.width=n_$N,this.repaint())}),n_$n(0,n_$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(n_$N){this._height!==n_$N&&(this._height=n_$N,this._style.height=n_$N,this.repaint())}),n_$a.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),n_$A.clearCache(this,this._url),this._tex=null),n_$X.prototype.destroy.call(this)},n_$a.onloaded=function(){var n_$N=this._style;n_$N&&!n_$N.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),n_$N&&!n_$N.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),n_$O.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},n_$a._loadImageComplete=function(n_$N,n_$C,n_$a){if(!this._destroyed)if(null!=n_$a)if(n_$a instanceof ArrayBuffer){var n_$u=new DataView(n_$a);new laya.webgl.resource.WebGLImage(new Uint8Array(n_$a,8),n_$N,0,!1,n_$u.getUint32(0),n_$u.getUint32(4));this.onloaded()}else if(n_$a instanceof n_$t)n_$A.imgMgrSet[n_$N]=n_$C,n_$J.imgMgrLock(n_$N,n_$A.imgMgrSet[n_$N]),this._url=n_$N,this._tex=n_$a,n_$A.keepCache(this,n_$N),n_$A.cacheRes(n_$N,this._tex),this.onloaded();else{var n_$e=-1!=n_$N.indexOf(".png",n_$N.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(n_$a,n_$N,n_$e,!1,n_$a.width,n_$a.height);this.onloaded()}else this.event("error","Load image failed")},n_$n(0,n_$a,"src",null,function(n_$N){(n_$N=this.formatURL(n_$N),this._url!=n_$N)&&(null!=this._tex&&(n_$A.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=n_$N,(this._tex=n_$A.getRes(n_$N))?(n_$A.keepCache(this,n_$N),this.onloaded()):n_$J.imgMgrLoad(n_$N,this._loadImageComplete.bind(this),2,!1))})})(),function(n_$N){function n_$C(){this.type=null,n_$C.__super.call(this),this.visible=!1}n_$M(n_$C,"laya.html.dom.HTMLLinkElement",n_$N);var n_$a=n_$C.prototype;n_$a._onload=function(n_$N){switch(this.type){case"text/css":n_$V.parseCSS(n_$N,this.URI)}},n_$n(0,n_$a,"href",n_$N.prototype._$get_href,function(n_$N){var n_$C=this;n_$N=this.formatURL(n_$N),this.URI=new n_$g(n_$N);var n_$a=new n_$A;n_$a.once("complete",null,function(n_$N){n_$C._onload(n_$N)}),n_$a.load(n_$N,"text")}),n_$C._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(n_$X),function(n_$N){function n_$C(){n_$C.__super.call(this),this.visible=!1}n_$M(n_$C,"laya.html.dom.HTMLStyleElement",n_$N),n_$n(0,n_$C.prototype,"text",n_$N.prototype._$get_text,function(n_$N){n_$V.parseCSS(n_$N,null)})}(n_$X),function(n_$N){function n_$C(){n_$C.__super.call(this),this._getCSSStyle().valign="middle"}n_$M(n_$C,"laya.html.dom.HTMLIframeElement",n_$N),n_$n(0,n_$C.prototype,"href",n_$N.prototype._$get_href,function(n_$a){var n_$u=this;n_$a=this.formatURL(n_$a);var n_$N=new n_$A;n_$N.once("complete",null,function(n_$N){var n_$C=n_$u.URI;n_$u.URI=new n_$g(n_$a),n_$u.innerHTML=n_$N,!n_$C||(n_$u.URI=n_$C)}),n_$N.load(n_$a,"text")})}(n_$C)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(n_$N,n_$C){"use strict";for(var n_$a in Object.defineProperty(n_$C,"__esModule",{value:!0}),Laya){var n_$u=Laya[n_$a];n_$u&&n_$u.__isclass&&(n_$C[n_$a]=n_$u)}}),function(n_$e,n_$N,n_$f){n_$f.un,n_$f.uns;var n_$u=n_$f.static,n_$J=n_$f.class,n_$M=n_$f.getset,n_$a=(n_$f.__newvec,laya.display.Animation),n_$t=(laya.utils.Browser,laya.utils.ClassUtils),n_$n=laya.filters.ColorFilter,n_$V=laya.utils.Ease,n_$A=laya.events.Event,n_$P=(laya.events.EventDispatcher,laya.display.css.Font),n_$$=laya.display.FrameAnimation,n_$C=laya.display.Graphics,n_$O=laya.utils.Handler,n_$G=laya.display.Input,n_$x=laya.net.Loader,n_$z=(laya.display.Node,laya.maths.Point),n_$g=laya.maths.Rectangle,n_$W=laya.renders.Render,n_$v=laya.display.Sprite,n_$X=laya.display.Text,n_$r=laya.resource.Texture,n_$c=laya.utils.Tween,n_$E=laya.utils.Utils,n_$F=laya.utils.WeakObject;n_$f.interface("laya.ui.IItem"),n_$f.interface("laya.ui.ISelect"),n_$f.interface("laya.ui.IRender"),n_$f.interface("laya.ui.IComponent"),n_$f.interface("laya.ui.IBox","IComponent");var n_$D=function(){function n_$N(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return n_$J(n_$N,"laya.ui.LayoutStyle"),n_$u(n_$N,["EMPTY",function(){return this.EMPTY=new n_$N}]),n_$N}(),n_$s=function(){function n_$N(){}return n_$J(n_$N,"laya.ui.Styles"),n_$N.labelColor="#000000",n_$N.buttonStateNum=3,n_$N.scrollBarMinNum=15,n_$N.scrollBarDelayTime=500,n_$u(n_$N,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),n_$N}(),n_$q=function(){function n_$e(){}return n_$J(n_$e,"laya.ui.UIUtils"),n_$e.fillArray=function(n_$N,n_$C,n_$a){var n_$u=n_$N.concat();if(n_$C)for(var n_$e=n_$C.split(","),n_$J=0,n_$M=Math.min(n_$u.length,n_$e.length);n_$J<n_$M;n_$J++){var n_$n=n_$e[n_$J];n_$u[n_$J]="true"==n_$n||"false"!=n_$n&&n_$n,null!=n_$a&&(n_$u[n_$J]=n_$a(n_$n))}return n_$u},n_$e.toColor=function(n_$N){return n_$E.toHexColor(n_$N)},n_$e.gray=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0),n_$C?n_$e.addFilter(n_$N,n_$e.grayFilter):n_$e.clearFilter(n_$N,n_$n)},n_$e.addFilter=function(n_$N,n_$C){var n_$a=n_$N.filters||[];n_$a.push(n_$C),n_$N.filters=n_$a},n_$e.clearFilter=function(n_$N,n_$C){var n_$a=n_$N.filters;if(null!=n_$a&&0<n_$a.length){for(var n_$u=n_$a.length-1;-1<n_$u;n_$u--){var n_$e=n_$a[n_$u];n_$f.__typeof(n_$e,n_$C)&&n_$a.splice(n_$u,1)}n_$N.filters=n_$a}},n_$e._getReplaceStr=function(n_$N){return n_$e.escapeSequence[n_$N]},n_$e.adptString=function(n_$N){return n_$N.replace(/\\(\w)/g,n_$e._getReplaceStr)},n_$e.getBindFun=function(n_$N){var n_$C=n_$e._funMap.get(n_$N);if(null==n_$C){var n_$a='"'+n_$N+'"',n_$u="(function(data){if(data==null)return;with(data){try{\nreturn "+(n_$a=n_$a.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";n_$C=n_$f._runScript(n_$u),n_$e._funMap.set(n_$N,n_$C)}return n_$C},n_$u(n_$e,["grayFilter",function(){return this.grayFilter=new n_$n([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new n_$F}]),n_$e}(),n_$_=function(){function n_$N(){}return n_$J(n_$N,"UIConfig"),n_$N.touchScrollEnable=!0,n_$N.mouseWheelEnable=!0,n_$N.showButtons=!0,n_$N.popupBgColor="#000000",n_$N.popupBgAlpha=.5,n_$N.closeDialogOnSide=!0,n_$N}(),n_$d=function(n_$a){function n_$g(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,n_$g.__super.call(this),this._weakKeys=[]}n_$J(n_$g,"laya.ui.AutoBitmap",n_$a);var n_$N=n_$g.prototype;return n_$N.destroy=function(){if(n_$x.clearObject(this,this._weakKey),this._weakKeys){for(var n_$N=0,n_$C=this._weakKeys.length;n_$N<n_$C;++n_$N)n_$x.clearObject(this,this._weakKeys[n_$N]);this._weakKeys=null}n_$a.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},n_$N._setChanged=function(){this._isChanged||(this._isChanged=!0,n_$f.timer.callLater(this,this.changeSource))},n_$N.changeSource=function(){this._isChanged=!1;var n_$N=this._source;if(n_$N&&n_$N.bitmap){var n_$C=this.width,n_$a=this.height,n_$u=this._sizeGrid,n_$e=n_$N.sourceWidth,n_$J=n_$N.sourceHeight;if(!n_$u||n_$e===n_$C&&n_$J===n_$a)this.cleanByTexture(n_$N,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,n_$C,n_$a);else{n_$x.clearObject(this,this._weakKey),n_$N.$_GID||(n_$N.$_GID=n_$E.getGID());var n_$M=n_$N.$_GID+"."+n_$C+"."+n_$a+"."+n_$u.join("."),n_$n=n_$x.findObject(n_$M);if(n_$E.isOKCmdList(n_$n))return this._weakKey=n_$M,n_$x.keepObject(this,this._weakKey),void(this.cmds=n_$n);this.clear();var n_$V,n_$A,n_$P=n_$u[0],n_$$=n_$u[1],n_$O=n_$u[2],n_$G=n_$u[3],n_$z=n_$u[4],n_$f=!1;if(n_$C==n_$e&&(n_$G=n_$$=0),n_$a==n_$J&&(n_$P=n_$O=0),n_$C<n_$G+n_$$){var n_$t=n_$C;n_$f=!0,n_$C=n_$G+n_$$,this.save(),this.clipRect(0,0,n_$t,n_$a)}n_$G&&n_$P&&(n_$V=n_$g.getTexture(n_$N,0,0,n_$G,n_$P),n_$A=this._weakKeys[0],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[0]=n_$V.weakKey),this.drawTexture(n_$V,0,0,n_$G,n_$P)):(n_$x.clearObject(this,n_$A),this._weakKeys[0]="")),n_$$&&n_$P&&(n_$V=n_$g.getTexture(n_$N,n_$e-n_$$,0,n_$$,n_$P),n_$A=this._weakKeys[1],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[1]=n_$V.weakKey),this.drawTexture(n_$V,n_$C-n_$$,0,n_$$,n_$P)):(n_$x.clearObject(this,n_$A),this._weakKeys[1]="")),n_$G&&n_$O&&(n_$V=n_$g.getTexture(n_$N,0,n_$J-n_$O,n_$G,n_$O),n_$A=this._weakKeys[2],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[2]=n_$V.weakKey),this.drawTexture(n_$V,0,n_$a-n_$O,n_$G,n_$O)):(n_$x.clearObject(this,n_$A),this._weakKeys[2]="")),n_$$&&n_$O&&(n_$V=n_$g.getTexture(n_$N,n_$e-n_$$,n_$J-n_$O,n_$$,n_$O),n_$A=this._weakKeys[3],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[3]=n_$V.weakKey),this.drawTexture(n_$V,n_$C-n_$$,n_$a-n_$O,n_$$,n_$O)):(n_$x.clearObject(this,n_$A),this._weakKeys[3]="")),n_$P&&(n_$V=n_$g.getTexture(n_$N,n_$G,0,n_$e-n_$G-n_$$,n_$P),n_$A=this._weakKeys[4],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[4]=n_$V.weakKey),this.drawBitmap(n_$z,n_$V,n_$G,0,n_$C-n_$G-n_$$,n_$P)):(n_$x.clearObject(this,n_$A),this._weakKeys[4]="")),n_$O&&(n_$V=n_$g.getTexture(n_$N,n_$G,n_$J-n_$O,n_$e-n_$G-n_$$,n_$O),n_$A=this._weakKeys[5],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[5]=n_$V.weakKey),this.drawBitmap(n_$z,n_$V,n_$G,n_$a-n_$O,n_$C-n_$G-n_$$,n_$O)):(n_$x.clearObject(this,n_$A),this._weakKeys[5]="")),n_$G&&(n_$V=n_$g.getTexture(n_$N,0,n_$P,n_$G,n_$J-n_$P-n_$O),n_$A=this._weakKeys[6],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[6]=n_$V.weakKey),this.drawBitmap(n_$z,n_$V,0,n_$P,n_$G,n_$a-n_$P-n_$O)):(n_$x.clearObject(this,n_$A),this._weakKeys[6]="")),n_$$&&(n_$V=n_$g.getTexture(n_$N,n_$e-n_$$,n_$P,n_$$,n_$J-n_$P-n_$O),n_$A=this._weakKeys[7],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[7]=n_$V.weakKey),this.drawBitmap(n_$z,n_$V,n_$C-n_$$,n_$P,n_$$,n_$a-n_$P-n_$O)):(n_$x.clearObject(this,n_$A),this._weakKeys[7]="")),n_$V=n_$g.getTexture(n_$N,n_$G,n_$P,n_$e-n_$G-n_$$,n_$J-n_$P-n_$O),n_$A=this._weakKeys[8],n_$V?(n_$A!=n_$V.weakKey&&(n_$x.clearObject(this,n_$A),n_$x.keepObject(this,n_$V.weakKey),this._weakKeys[8]=n_$V.weakKey),this.drawBitmap(n_$z,n_$V,n_$G,n_$P,n_$C-n_$G-n_$$,n_$a-n_$P-n_$O)):(n_$x.clearObject(this,n_$A),this._weakKeys[8]=""),n_$f&&this.restore(),this.autoCacheCmd&&!n_$W.isConchApp&&(n_$x.saveObject(n_$M,this.cmds,null),this._weakKey=n_$M,n_$x.keepObject(this,this._weakKey))}this._repaint()}},n_$N.drawBitmap=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=0),n_$e<.1||n_$J<.1||(!n_$N||n_$C.width==n_$e&&n_$C.height==n_$J?this.drawTexture(n_$C,n_$a,n_$u,n_$e,n_$J):this.fillTexture(n_$C,n_$a,n_$u,n_$e,n_$J))},n_$N.clear=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$a.prototype.clear.call(this,!1)},n_$M(0,n_$N,"sizeGrid",function(){return this._sizeGrid},function(n_$N){this._sizeGrid=n_$N,this._setChanged()}),n_$M(0,n_$N,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(n_$N){this._width!=n_$N&&(this._width=n_$N,this._setChanged())}),n_$M(0,n_$N,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(n_$N){this._height!=n_$N&&(this._height=n_$N,this._setChanged())}),n_$M(0,n_$N,"source",function(){return this._source},function(n_$N){n_$N?(this._source=n_$N,this._setChanged()):(this._source=null,this.clear())}),n_$g.getTexture=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$u<=0&&(n_$u=1),n_$e<=0&&(n_$e=1),n_$N.$_GID||(n_$N.$_GID=n_$E.getGID());var n_$J=n_$N.$_GID+"."+n_$C+"."+n_$a+"."+n_$u+"."+n_$e,n_$M=n_$x.findObject(n_$J);if((!n_$M||!n_$M.source)&&(n_$M=n_$r.createFromTexture(n_$N,n_$C,n_$a,n_$u,n_$e))){if(n_$N.alphaTexture){var n_$n=n_$N.width/n_$N.alphaTexture.width;n_$M.alphaTexture=n_$r.createFromTexture(n_$N.alphaTexture,n_$C/n_$n,n_$a/n_$n,n_$u/n_$n,n_$e/n_$n)}n_$x.saveObject(n_$J,n_$M),n_$M.weakKey=n_$J}return n_$M},n_$g}(n_$C),n_$Q=(function(n_$N){function n_$C(){n_$C.__super.call(this)}n_$J(n_$C,"laya.ui.UIEvent",n_$A),n_$C.SHOW_TIP="showtip",n_$C.HIDE_TIP="hidetip"}(),function(n_$C){function n_$N(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,n_$N.__super.call(this),this._layout=n_$D.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}n_$J(n_$N,"laya.ui.Component",n_$C);var n_$a=n_$N.prototype;return n_$f.imps(n_$a,{"laya.ui.IComponent":!0}),n_$a.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},n_$a.preinitialize=function(){},n_$a.createChildren=function(){},n_$a.initialize=function(){},n_$a.callLater=function(n_$N,n_$C){n_$f.timer.callLater(this,n_$N,n_$C)},n_$a.runCallLater=function(n_$N){n_$f.timer.runCallLater(this,n_$N)},n_$a.commitMeasure=function(){},n_$a.changeSize=function(){this.event("resize")},n_$a.getLayout=function(){return this._layout===n_$D.EMPTY&&(this._layout=new n_$D),this._layout},n_$a._setLayoutEnabled=function(n_$N){this._layout&&this._layout.enable!=n_$N&&(this._layout.enable=n_$N,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},n_$a.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},n_$a.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},n_$a.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},n_$a.resetLayoutX=function(){var n_$N=this._layout;if(isNaN(n_$N.anchorX)||(this.pivotX=n_$N.anchorX*this.width),this.layoutEnabled){var n_$C=this.parent;n_$C&&(isNaN(n_$N.centerX)?isNaN(n_$N.left)?isNaN(n_$N.right)||(this.x=Math.round(n_$C.width-this.displayWidth-n_$N.right+this.pivotX*this.scaleX)):(this.x=Math.round(n_$N.left+this.pivotX*this.scaleX),isNaN(n_$N.right)||(this.width=(n_$C._width-n_$N.left-n_$N.right)/(this.scaleX||.01))):this.x=Math.round(.5*(n_$C.width-this.displayWidth)+n_$N.centerX+this.pivotX*this.scaleX))}},n_$a.resetLayoutY=function(){var n_$N=this._layout;if(isNaN(n_$N.anchorY)||(this.pivotY=n_$N.anchorY*this.height),this.layoutEnabled){var n_$C=this.parent;n_$C&&(isNaN(n_$N.centerY)?isNaN(n_$N.top)?isNaN(n_$N.bottom)||(this.y=Math.round(n_$C.height-this.displayHeight-n_$N.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(n_$N.top+this.pivotY*this.scaleY),isNaN(n_$N.bottom)||(this.height=(n_$C._height-n_$N.top-n_$N.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(n_$C.height-this.displayHeight)+n_$N.centerY+this.pivotY*this.scaleY))}},n_$a.onMouseOver=function(n_$N){n_$f.stage.event("showtip",this._toolTip)},n_$a.onMouseOut=function(n_$N){n_$f.stage.event("hidetip",this._toolTip)},n_$M(0,n_$a,"displayWidth",function(){return this.width*this.scaleX}),n_$M(0,n_$a,"width",function(){return this._width?this._width:this.measureWidth},function(n_$N){this._width!=n_$N&&(this._width=n_$N,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),n_$M(0,n_$a,"measureWidth",function(){var n_$N=0;this.commitMeasure();for(var n_$C=this.numChildren-1;-1<n_$C;n_$C--){var n_$a=this.getChildAt(n_$C);n_$a.visible&&(n_$N=Math.max(n_$a.x+n_$a.width*n_$a.scaleX,n_$N))}return n_$N}),n_$M(0,n_$a,"displayHeight",function(){return this.height*this.scaleY}),n_$M(0,n_$a,"height",function(){return this._height?this._height:this.measureHeight},function(n_$N){this._height!=n_$N&&(this._height=n_$N,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),n_$M(0,n_$a,"dataSource",function(){return this._dataSource},function(n_$N){for(var n_$C in this._dataSource=n_$N,this._dataSource)this.hasOwnProperty(n_$C)&&"function"!=typeof this[n_$C]&&(this[n_$C]=this._dataSource[n_$C])}),n_$M(0,n_$a,"scaleY",n_$C.prototype._$get_scaleY,function(n_$N){n_$f.superGet(n_$v,this,"scaleY")!=n_$N&&(n_$f.superSet(n_$v,this,"scaleY",n_$N),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),n_$M(0,n_$a,"measureHeight",function(){var n_$N=0;this.commitMeasure();for(var n_$C=this.numChildren-1;-1<n_$C;n_$C--){var n_$a=this.getChildAt(n_$C);n_$a.visible&&(n_$N=Math.max(n_$a.y+n_$a.height*n_$a.scaleY,n_$N))}return n_$N}),n_$M(0,n_$a,"scaleX",n_$C.prototype._$get_scaleX,function(n_$N){n_$f.superGet(n_$v,this,"scaleX")!=n_$N&&(n_$f.superSet(n_$v,this,"scaleX",n_$N),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),n_$M(0,n_$a,"top",function(){return this._layout.top},function(n_$N){n_$N!=this._layout.top&&(this.getLayout().top=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutY()}),n_$M(0,n_$a,"bottom",function(){return this._layout.bottom},function(n_$N){n_$N!=this._layout.bottom&&(this.getLayout().bottom=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutY()}),n_$M(0,n_$a,"left",function(){return this._layout.left},function(n_$N){n_$N!=this._layout.left&&(this.getLayout().left=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutX()}),n_$M(0,n_$a,"right",function(){return this._layout.right},function(n_$N){n_$N!=this._layout.right&&(this.getLayout().right=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutX()}),n_$M(0,n_$a,"centerX",function(){return this._layout.centerX},function(n_$N){n_$N!=this._layout.centerX&&(this.getLayout().centerX=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutX()}),n_$M(0,n_$a,"centerY",function(){return this._layout.centerY},function(n_$N){n_$N!=this._layout.centerY&&(this.getLayout().centerY=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutY()}),n_$M(0,n_$a,"anchorX",function(){return this._layout.anchorX},function(n_$N){n_$N!=this._layout.anchorX&&(this.getLayout().anchorX=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutX()}),n_$M(0,n_$a,"anchorY",function(){return this._layout.anchorY},function(n_$N){n_$N!=this._layout.anchorY&&(this.getLayout().anchorY=n_$N,this._setLayoutEnabled(!0)),this.resetLayoutY()}),n_$M(0,n_$a,"tag",function(){return this._tag},function(n_$N){this._tag=n_$N}),n_$M(0,n_$a,"toolTip",function(){return this._toolTip},function(n_$N){this._toolTip!=n_$N&&(null!=(this._toolTip=n_$N)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),n_$M(0,n_$a,"comXml",function(){return this._comXml},function(n_$N){this._comXml=n_$N}),n_$M(0,n_$a,"gray",function(){return this._gray},function(n_$N){n_$N!==this._gray&&(this._gray=n_$N,n_$q.gray(this,n_$N))}),n_$M(0,n_$a,"disabled",function(){return this._disabled},function(n_$N){n_$N!==this._disabled&&(this.gray=this._disabled=n_$N,this.mouseEnabled=!n_$N)}),n_$N}(n_$v)),n_$l=function(n_$N){function n_$C(){this.lockLayer=null,this.popupEffect=function(n_$N){n_$N.scale(1,1),n_$c.from(n_$N,{x:n_$f.stage.width/2,y:n_$f.stage.height/2,scaleX:0,scaleY:0},300,n_$V.backOut,n_$O.create(this,this.doOpen,[n_$N]))},this.closeEffect=function(n_$N,n_$C){n_$c.to(n_$N,{x:n_$f.stage.width/2,y:n_$f.stage.height/2,scaleX:0,scaleY:0},300,n_$V.strongOut,n_$O.create(this,this.doClose,[n_$N,n_$C]))},n_$C.__super.call(this),this.maskLayer=new n_$v,this.popupEffectHandler=n_$O.create(this,this.popupEffect,null,!1),this.closeEffectHandler=n_$O.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,n_$f.stage.addChild(this),n_$f.stage.on("resize",this,this._onResize),n_$_.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}n_$J(n_$C,"laya.ui.DialogManager",n_$v);var n_$a=n_$C.prototype;return n_$a._closeOnSide=function(){var n_$N=this.getChildAt(this.numChildren-1);n_$N instanceof laya.ui.Dialog&&n_$N.close("side")},n_$a.setLockView=function(n_$N){this.lockLayer||(this.lockLayer=new n_$i,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(n_$f.stage.width,n_$f.stage.height)),this.lockLayer.removeChildren(),n_$N&&(n_$N.centerX=n_$N.centerY=0,this.lockLayer.addChild(n_$N))},n_$a._onResize=function(n_$N){var n_$C=this.maskLayer.width=n_$f.stage.width,n_$a=this.maskLayer.height=n_$f.stage.height;this.lockLayer&&this.lockLayer.size(n_$C,n_$a),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,n_$C,n_$a,n_$_.popupBgColor),this.maskLayer.alpha=n_$_.popupBgAlpha;for(var n_$u=this.numChildren-1;-1<n_$u;n_$u--){var n_$e=this.getChildAt(n_$u);n_$e.popupCenter&&this._centerDialog(n_$e)}},n_$a._centerDialog=function(n_$N){n_$N.x=Math.round((n_$f.stage.width-n_$N.width>>1)+n_$N.pivotX),n_$N.y=Math.round((n_$f.stage.height-n_$N.height>>1)+n_$N.pivotY)},n_$a.open=function(n_$N,n_$C,n_$a){void 0===n_$C&&(n_$C=!1),void 0===n_$a&&(n_$a=!1),n_$C&&this._closeAll(),n_$N.popupCenter&&this._centerDialog(n_$N),this.addChild(n_$N),(n_$N.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),n_$a&&null!=n_$N.popupEffect?n_$N.popupEffect.runWith(n_$N):this.doOpen(n_$N),this.event("open")},n_$a.doOpen=function(n_$N){n_$N.onOpened()},n_$a.lock=function(n_$N){this.lockLayer&&(n_$N?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},n_$a.close=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=!1),n_$a&&null!=n_$N.closeEffect?n_$N.closeEffect.runWith([n_$N,n_$C]):this.doClose(n_$N,n_$C),this.event("close")},n_$a.doClose=function(n_$N,n_$C){n_$N.removeSelf(),n_$N.isModal&&this._checkMask(),n_$N.closeHandler&&n_$N.closeHandler.runWith(n_$C),n_$N.onClosed(n_$C)},n_$a.closeAll=function(){this._closeAll(),this.event("close")},n_$a._closeAll=function(){for(var n_$N=this.numChildren-1;-1<n_$N;n_$N--){var n_$C=this.getChildAt(n_$N);n_$C&&null!=n_$C.close&&this.doClose(n_$C)}},n_$a.getDialogsByGroup=function(n_$N){for(var n_$C=[],n_$a=this.numChildren-1;-1<n_$a;n_$a--){var n_$u=this.getChildAt(n_$a);n_$u&&n_$u.group===n_$N&&n_$C.push(n_$u)}return n_$C},n_$a.closeByGroup=function(n_$N){for(var n_$C=[],n_$a=this.numChildren-1;-1<n_$a;n_$a--){var n_$u=this.getChildAt(n_$a);n_$u&&n_$u.group===n_$N&&(n_$u.close(),n_$C.push(n_$u))}return n_$C},n_$a._checkMask=function(){this.maskLayer.removeSelf();for(var n_$N=this.numChildren-1;-1<n_$N;n_$N--){var n_$C=this.getChildAt(n_$N);if(n_$C&&n_$C.isModal)return void this.addChildAt(this.maskLayer,n_$N)}},n_$C}(),n_$i=function(n_$N){function n_$C(){n_$C.__super.call(this)}n_$J(n_$C,"laya.ui.Box",n_$N);var n_$a=n_$C.prototype;return n_$f.imps(n_$a,{"laya.ui.IBox":!0}),n_$M(0,n_$a,"dataSource",n_$N.prototype._$get_dataSource,function(n_$N){for(var n_$C in this._dataSource=n_$N){var n_$a=this.getChildByName(n_$C);n_$a?n_$a.dataSource=n_$N[n_$C]:this.hasOwnProperty(n_$C)&&"function"!=typeof this[n_$C]&&(this[n_$C]=n_$N[n_$C])}}),n_$C}(n_$Q),n_$j=function(n_$C){function n_$a(n_$N,n_$C){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,n_$a.__super.call(this),this._labelColors=n_$s.buttonLabelColors,this._stateNum=n_$s.buttonStateNum,void 0===n_$C&&(n_$C=""),this.skin=n_$N,this.label=n_$C}n_$J(n_$a,"laya.ui.Button",n_$C);var n_$N=n_$a.prototype;return n_$f.imps(n_$N,{"laya.ui.ISelect":!0}),n_$N.destroy=function(n_$N){this.clearEvent(),n_$x.clearCache(this,this._skin),n_$x.clearObject(this,this._weakKey),void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(n_$N),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},n_$N.clearEvent=function(){this._skin&&n_$e.atalsNotify&&n_$e.atalsNotify.off(this._skin,this,this._setBtnSource)},n_$N.createChildren=function(){this.graphics=this._bitmap=new n_$d},n_$N.createText=function(){this._text||(this._text=new n_$X,this._text.overflow=n_$X.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},n_$N.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},n_$N.onMouse=function(n_$N){if(!1!==this.toggle||!this._selected)return"click"===n_$N.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=n_$a.stateMap[n_$N.type]))},n_$N.changeClips=function(){var n_$N=n_$x.getRes(this._skin);if(n_$N)if(this._skin&&""!=this._skin){n_$x.clearObject(this,this._weakKey);var n_$C=n_$N.sourceWidth,n_$a=n_$N.sourceHeight/this._stateNum;n_$N.$_GID||(n_$N.$_GID=n_$E.getGID());var n_$u=n_$N.$_GID+"-"+this._stateNum,n_$e=n_$x.findObject(n_$u);if(n_$E.isOkTextureList(n_$e)||(n_$e=null),n_$e)this._weakKey=n_$u,n_$x.keepObject(this,this._weakKey),this._sources=n_$e;else{if(this._sources=[],1===this._stateNum)this._sources.push(n_$N);else for(var n_$J=0;n_$J<this._stateNum;n_$J++){var n_$M=n_$r.createFromTexture(n_$N,0,n_$a*n_$J,n_$C,n_$a);if(n_$N.alphaTexture){var n_$n=n_$N.width/n_$N.alphaTexture.width;n_$M.alphaTexture=n_$r.createFromTexture(n_$N.alphaTexture,0/n_$n,n_$a*n_$J/n_$n,n_$C/n_$n,n_$a/n_$n)}this._sources.push(n_$M)}n_$x.saveObject(n_$u,this._sources),this._weakKey=n_$u,n_$x.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||n_$C,this._bitmap.height=this._height||n_$a,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=n_$C)}else console.warn("lose skin ",this._skin,this.name,this.__className)},n_$N.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var n_$N=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[n_$N]),this.label&&(this._text.color=this._labelColors[n_$N],this._strokeColors&&(this._text.strokeColor=this._strokeColors[n_$N]))},n_$N._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},n_$M(0,n_$N,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(n_$N){this.createText(),this._text.strokeColor=n_$N}),n_$M(0,n_$N,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),n_$M(0,n_$N,"skin",function(){return this._skin},function(n_$N){if(this._skin!=n_$N)if(this.clearEvent(),n_$x.clearCache(this,this._skin),this._skin=n_$N,n_$x.keepCache(this,this._skin),n_$x.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var n_$C=n_$e.resAtalsObj&&n_$e.resAtalsObj[this._skin];n_$C?(n_$e.atalsNotify&&n_$e.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=n_$C.sourceW),0==this.height&&(this.height=n_$C.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),n_$N._setBtnSource=function(n_$N,n_$C){n_$N===this._skin&&n_$C&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},n_$M(0,n_$N,"state",function(){return this._state},function(n_$N){this._state!=n_$N&&(this._state=n_$N,this._setStateChanged())}),n_$M(0,n_$N,"text",function(){return this.createText(),this._text}),n_$M(0,n_$N,"stateNum",function(){return this._stateNum},function(n_$N){"string"==typeof n_$N&&(n_$N=parseInt(n_$N)),this._stateNum!=n_$N&&(this._stateNum=n_$N<1?1:3<n_$N?3:n_$N,this.callLater(this.changeClips))}),n_$M(0,n_$N,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(n_$N){this._strokeColors=n_$q.fillArray(n_$s.buttonLabelColors,n_$N,String),this._setStateChanged()}),n_$M(0,n_$N,"labelColors",function(){return this._labelColors.join(",")},function(n_$N){this._labelColors=n_$q.fillArray(n_$s.buttonLabelColors,n_$N,String),this._setStateChanged()}),n_$M(0,n_$N,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),n_$M(0,n_$N,"label",function(){return this._text?this._text.text:null},function(n_$N){(this._text||n_$N)&&(this.createText(),this._text.text!=n_$N&&(n_$N&&!this._text.parent&&this.addChild(this._text),this._text.text=(n_$N+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),n_$M(0,n_$N,"selected",function(){return this._selected},function(n_$N){this._selected!=n_$N&&(this._selected=n_$N,this.state=this._selected?2:0,this.event("change"))}),n_$M(0,n_$N,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(n_$N){this.createText(),this._text.padding=n_$q.fillArray(n_$s.labelPadding,n_$N,Number)}),n_$M(0,n_$N,"labelSize",function(){return this.createText(),this._text.fontSize},function(n_$N){this.createText(),this._text.fontSize=n_$N}),n_$M(0,n_$N,"labelStroke",function(){return this.createText(),this._text.stroke},function(n_$N){this.createText(),this._text.stroke=n_$N}),n_$M(0,n_$N,"labelBold",function(){return this.createText(),this._text.bold},function(n_$N){this.createText(),this._text.bold=n_$N}),n_$M(0,n_$N,"labelFont",function(){return this.createText(),this._text.font},function(n_$N){this.createText(),this._text.font=n_$N}),n_$M(0,n_$N,"labelAlign",function(){return this.createText(),this._text.align},function(n_$N){this.createText(),this._text.align=n_$N}),n_$M(0,n_$N,"clickHandler",function(){return this._clickHandler},function(n_$N){this._clickHandler=n_$N}),n_$M(0,n_$N,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(n_$N){this._bitmap.sizeGrid=n_$q.fillArray(n_$s.defaultSizeGrid,n_$N,Number)}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$Q,this,"width",n_$N),this._autoSize&&(this._bitmap.width=n_$N,this._text&&(this._text.width=n_$N))}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$Q,this,"height",n_$N),this._autoSize&&(this._bitmap.height=n_$N,this._text&&(this._text.height=n_$N))}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)||"string"==typeof n_$N?this.label=n_$N+"":n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$M(0,n_$N,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(n_$N){this._bitmap._offset=n_$N?n_$q.fillArray([1,1],n_$N,Number):[]}),n_$u(n_$a,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),n_$a}(n_$Q),n_$y=function(n_$C){function n_$u(n_$N,n_$C,n_$a){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,n_$u.__super.call(this),void 0===n_$C&&(n_$C=1),void 0===n_$a&&(n_$a=1),this._clipX=n_$C,this._clipY=n_$a,this.skin=n_$N}n_$J(n_$u,"laya.ui.Clip",n_$C);var n_$N=n_$u.prototype;return n_$N.destroy=function(n_$N){this.clearEvent(),this.clearLoad(),n_$x.clearCache(this,this._skin),n_$x.clearObject(this,this._weakKey),void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},n_$N.dispose=function(){this.destroy(!0),n_$f.loader.clearRes(this._skin)},n_$N.createChildren=function(){this.graphics=this._bitmap=new n_$d},n_$N._onDisplay=function(n_$N){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},n_$N.changeClip=function(){if(this._clipChanged=!1,this._skin){var n_$N=n_$x.getRes(this._skin);if(n_$N)this.loadComplete(this._skin,n_$N);else{if(n_$e.resAtalsObj&&n_$e.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=n_$O.create(this,this.loadComplete,[this._skin]),this._progress=null,n_$f.loader.load(this._skin,this._complete,this._progress)}}},n_$N.loadComplete=function(n_$N,n_$C){if(n_$N===this._skin&&n_$C){n_$x.clearObject(this,this._weakKey);var n_$a=this._clipWidth||Math.ceil(n_$C.sourceWidth/this._clipX),n_$u=this._clipHeight||Math.ceil(n_$C.sourceHeight/this._clipY),n_$e=this._skin+n_$a+n_$u,n_$J=n_$x.findObject(n_$e);if(n_$E.isOkTextureList(n_$J)||(n_$J=null),n_$J)this._weakKey=n_$e,n_$x.keepObject(this,this._weakKey),this._sources=n_$J;else{this._sources=[];for(var n_$M=0;n_$M<this._clipY;n_$M++)for(var n_$n=0;n_$n<this._clipX;n_$n++){var n_$V=n_$r.createFromTexture(n_$C,n_$a*n_$n,n_$u*n_$M,n_$a,n_$u);if(n_$C.alphaTexture){var n_$A=n_$C.width/n_$C.alphaTexture.width;n_$V.alphaTexture=n_$r.createFromTexture(n_$C.alphaTexture,n_$a*n_$n/n_$A,n_$u*n_$M/n_$A,n_$a/n_$A,n_$u/n_$A)}this._sources.push(n_$V)}n_$x.saveObject(n_$e,this._sources),this._weakKey=n_$e,n_$x.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},n_$N.play=function(n_$N,n_$C){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=-1),this._isPlaying=!0,this.index=n_$N,this._toIndex=n_$C,this._index++,n_$f.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},n_$N._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},n_$N.stop=function(){this._isPlaying=!1,n_$f.timer.clear(this,this._loop),this.event("complete")},n_$N._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},n_$M(0,n_$N,"interval",function(){return this._interval},function(n_$N){this._interval!=n_$N&&(this._interval=n_$N,this._isPlaying&&this.play())}),n_$N.clearEvent=function(){this._skin&&n_$e.atalsNotify&&n_$e.atalsNotify.off(this._skin,this,this._setBtnSource)},n_$N.clearLoad=function(){this._skin&&((this._complete||this._progress)&&n_$f.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},n_$M(0,n_$N,"skin",function(){return this._skin},function(n_$N){if(this._skin!=n_$N)if(this.clearLoad(),this.clearEvent(),n_$x.clearCache(this,this._skin),this._skin=n_$N){n_$x.keepCache(this,this._skin);var n_$C=n_$x.getRes(n_$N),n_$a=n_$e.resAtalsObj&&n_$e.resAtalsObj[this._skin];!n_$C&&n_$a?n_$e.atalsNotify&&n_$e.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),n_$N._setBtnSource=function(n_$N,n_$C){n_$N===this._skin&&n_$C&&(this.loadComplete(n_$N,n_$C),this.clearEvent())},n_$M(0,n_$N,"sources",function(){return this._sources},function(n_$N){this._sources=n_$N,this.index=this._index,this.event("loaded")}),n_$M(0,n_$N,"clipX",function(){return this._clipX},function(n_$N){this._clipX=n_$N||1,this._setClipChanged()}),n_$M(0,n_$N,"clipY",function(){return this._clipY},function(n_$N){this._clipY=n_$N||1,this._setClipChanged()}),n_$M(0,n_$N,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),n_$M(0,n_$N,"clipWidth",function(){return this._clipWidth},function(n_$N){this._clipWidth=n_$N,this._setClipChanged()}),n_$M(0,n_$N,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(n_$N){this._bitmap.sizeGrid=n_$q.fillArray(n_$s.defaultSizeGrid,n_$N,Number)}),n_$M(0,n_$N,"group",function(){return this._group},function(n_$N){n_$N&&this._skin&&n_$x.setGroup(this._skin,n_$N),this._group=n_$N}),n_$M(0,n_$N,"clipHeight",function(){return this._clipHeight},function(n_$N){this._clipHeight=n_$N,this._setClipChanged()}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$Q,this,"width",n_$N),this._bitmap.width=n_$N}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$Q,this,"height",n_$N),this._bitmap.height=n_$N}),n_$M(0,n_$N,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),n_$M(0,n_$N,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),n_$M(0,n_$N,"index",function(){return this._index},function(n_$N){this._index=n_$N,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[n_$N]),this.event("change")}),n_$M(0,n_$N,"autoPlay",function(){return this._autoPlay},function(n_$N){this._autoPlay!=n_$N&&((this._autoPlay=n_$N)?this.play():this.stop())}),n_$M(0,n_$N,"isPlaying",function(){return this._isPlaying},function(n_$N){this._isPlaying=n_$N}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)&&Math.floor(n_$N)==n_$N||"string"==typeof n_$N?this.index=parseInt(n_$N):n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$M(0,n_$N,"bitmap",function(){return this._bitmap}),n_$u}(n_$Q),n_$T=function(n_$C){function n_$N(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,n_$N.__super.call(this)}n_$J(n_$N,"laya.ui.ColorPicker",n_$C);var n_$a=n_$N.prototype;return n_$a.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._colorPanel&&this._colorPanel.destroy(n_$N),this._colorButton&&this._colorButton.destroy(n_$N),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},n_$a.createChildren=function(){this.addChild(this._colorButton=new n_$j),this._colorPanel=new n_$i,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new n_$v),this._colorPanel.addChild(this._colorBlock=new n_$v),this._colorPanel.addChild(this._colorInput=new n_$G)},n_$a.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},n_$a.onPanelMouseDown=function(n_$N){n_$N.stopPropagation()},n_$a.changePanel=function(){this._panelChanged=!1;var n_$N=this._colorPanel.graphics;n_$N.clear(),n_$N.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(n_$N=this._colorTiles.graphics).clear();for(var n_$C=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],n_$a=0;n_$a<12;n_$a++)for(var n_$u=0;n_$u<20;n_$u++){var n_$e=0;n_$e=0===n_$u?n_$C[n_$a]:1===n_$u?0:51*(((3*n_$a+n_$u/6)%3<<0)+3*(n_$a/6<<0))<<16|n_$u%6*51<<8|(n_$a<<0)%6*51;var n_$J=n_$q.toColor(n_$e);this._colors.push(n_$J);var n_$M=n_$u*this._gridSize,n_$n=n_$a*this._gridSize;n_$N.drawRect(n_$M,n_$n,this._gridSize,this._gridSize,n_$J,"#000000")}},n_$a.onColorButtonClick=function(n_$N){this._colorPanel.parent?this.close():this.open()},n_$a.open=function(){var n_$N=this.localToGlobal(new n_$z),n_$C=n_$N.x+this._colorPanel.width<=n_$f.stage.width?n_$N.x:n_$f.stage.width-this._colorPanel.width,n_$a=n_$N.y+this._colorButton.height;n_$a=n_$a+this._colorPanel.height<=n_$f.stage.height?n_$a:n_$N.y-this._colorPanel.height,this._colorPanel.pos(n_$C,n_$a),this._colorPanel.zOrder=1001,n_$f._currentStage.addChild(this._colorPanel),n_$f.stage.on("mousedown",this,this.removeColorBox)},n_$a.close=function(){n_$f.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},n_$a.removeColorBox=function(n_$N){this.close()},n_$a.onColorFieldKeyDown=function(n_$N){13==n_$N.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),n_$N.stopPropagation())},n_$a.onColorInputChange=function(n_$N){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},n_$a.onColorTilesClick=function(n_$N){this.selectedColor=this.getColorByMouse(),this.close()},n_$a.onColorTilesMouseMove=function(n_$N){this._colorInput.focus=!1;var n_$C=this.getColorByMouse();this._colorInput.text=n_$C,this.drawBlock(n_$C)},n_$a.getColorByMouse=function(){var n_$N=this._colorTiles.getMousePoint(),n_$C=Math.floor(n_$N.x/this._gridSize),n_$a=Math.floor(n_$N.y/this._gridSize);return this._colors[20*n_$a+n_$C]},n_$a.drawBlock=function(n_$N){var n_$C=this._colorBlock.graphics;n_$C.clear();var n_$a=n_$N||"#ffffff";n_$C.drawRect(0,0,50,20,n_$a,this._borderColor),n_$N||n_$C.drawLine(0,0,50,20,"#ff0000")},n_$a.changeColor=function(){var n_$N=this.graphics;n_$N.clear();var n_$C=this._selectedColor||"#000000";n_$N.drawRect(0,0,this._colorButton.width,this._colorButton.height,n_$C)},n_$a._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},n_$M(0,n_$a,"inputBgColor",function(){return this._inputBgColor},function(n_$N){this._inputBgColor=n_$N,this._setPanelChanged()}),n_$M(0,n_$a,"selectedColor",function(){return this._selectedColor},function(n_$N){this._selectedColor!=n_$N&&(this._selectedColor=this._colorInput.text=n_$N,this.drawBlock(n_$N),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",n_$A.EMPTY.setTo("change",this,this)))}),n_$M(0,n_$a,"skin",function(){return this._colorButton.skin},function(n_$N){this._colorButton.skin=n_$N,this.changeColor()}),n_$M(0,n_$a,"bgColor",function(){return this._bgColor},function(n_$N){this._bgColor=n_$N,this._setPanelChanged()}),n_$M(0,n_$a,"borderColor",function(){return this._borderColor},function(n_$N){this._borderColor=n_$N,this._setPanelChanged()}),n_$M(0,n_$a,"inputColor",function(){return this._inputColor},function(n_$N){this._inputColor=n_$N,this._setPanelChanged()}),n_$N}(n_$Q),n_$L=function(n_$C){function n_$a(n_$N,n_$C){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,n_$a.__super.call(this),this._itemColors=n_$s.comboBoxItemColors,this.skin=n_$N,this.labels=n_$C}n_$J(n_$a,"laya.ui.ComboBox",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._button&&this._button.destroy(n_$N),this._list&&this._list.destroy(n_$N),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},n_$N.createChildren=function(){this.addChild(this._button=new n_$j),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},n_$N._createList=function(){this._list=new n_$b,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},n_$N._setListEvent=function(n_$N){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=n_$O.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},n_$N.onListDown=function(n_$N){n_$N.stopPropagation()},n_$N.onScrollBarDown=function(n_$N){n_$N.stopPropagation()},n_$N.onButtonMouseDown=function(n_$N){this.callLater(this.switchTo,[!this._isOpen])},n_$N.changeList=function(){this._listChanged=!1;var n_$N=this.width-2,n_$C=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:n_$N,height:this._itemHeight,fontSize:this._itemSize,color:n_$C}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},n_$N.onlistItemMouse=function(n_$N,n_$C){var n_$a=n_$N.type;if("mouseover"===n_$a||"mouseout"===n_$a){if(this._isCustomList)return;var n_$u=this._list.getCell(n_$C);if(!n_$u)return;var n_$e=n_$u.getChildByName("label");n_$e&&("mouseover"===n_$a?(n_$e.bgColor=this._itemColors[0],n_$e.color=this._itemColors[1]):(n_$e.bgColor=null,n_$e.color=this._itemColors[2]))}else"click"===n_$a&&(this.selectedIndex=n_$C,this.isOpen=!1)},n_$N.switchTo=function(n_$N){this.isOpen=n_$N},n_$N.changeOpen=function(){this.isOpen=!this._isOpen},n_$N.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var n_$N=this._list.graphics;n_$N.clear(),n_$N.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var n_$C=this._list.array||[],n_$a=n_$C.length=0,n_$u=this._labels.length;n_$a<n_$u;n_$a++)n_$C.push({label:this._labels[n_$a]});this._list.height=this._listHeight,this._list.array=n_$C},n_$N.changeSelected=function(){this._button.label=this.selectedLabel},n_$N._onStageMouseWheel=function(n_$N){this._list&&!this._list.contains(n_$N.target)&&this.removeList(null)},n_$N.removeList=function(n_$N){n_$f.stage.off("mousedown",this,this.removeList),n_$f.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},n_$M(0,n_$N,"selectedIndex",function(){return this._selectedIndex},function(n_$N){this._selectedIndex!=n_$N&&(this._selectedIndex=n_$N,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[n_$A.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),n_$M(0,n_$N,"measureHeight",function(){return this._button.height}),n_$M(0,n_$N,"skin",function(){return this._button.skin},function(n_$N){this._button.skin!=n_$N&&(this._button.skin=n_$N,this._listChanged=!0)}),n_$M(0,n_$N,"measureWidth",function(){return this._button.width}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$Q,this,"width",n_$N),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),n_$M(0,n_$N,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(n_$N){this.selectedIndex=this._labels.indexOf(n_$N)}),n_$M(0,n_$N,"labels",function(){return this._labels.join(",")},function(n_$N){0<this._labels.length&&(this.selectedIndex=-1),n_$N?this._labels=n_$N.split(","):this._labels.length=0,this._itemChanged=!0}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$Q,this,"height",n_$N),this._button.height=this._height}),n_$M(0,n_$N,"selectHandler",function(){return this._selectHandler},function(n_$N){this._selectHandler=n_$N}),n_$M(0,n_$N,"visibleNum",function(){return this._visibleNum},function(n_$N){this._visibleNum=n_$N,this._listChanged=!0}),n_$M(0,n_$N,"labelBold",function(){return this._button.text.bold},function(n_$N){this._button.text.bold=n_$N}),n_$M(0,n_$N,"itemColors",function(){return String(this._itemColors)},function(n_$N){this._itemColors=n_$q.fillArray(this._itemColors,n_$N,String),this._listChanged=!0}),n_$M(0,n_$N,"itemSize",function(){return this._itemSize},function(n_$N){this._itemSize=n_$N,this._listChanged=!0}),n_$M(0,n_$N,"scrollBar",function(){return this.list.scrollBar}),n_$M(0,n_$N,"isOpen",function(){return this._isOpen},function(n_$N){if(this._isOpen!=n_$N)if(this._isOpen=n_$N,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var n_$C=this.localToGlobal(n_$z.TEMP.setTo(0,0)),n_$a=n_$C.y+this._button.height;n_$a=n_$a+this._listHeight<=n_$f.stage.height?n_$a:n_$C.y-this._listHeight,this._list.pos(n_$C.x,n_$a),this._list.zOrder=1001,n_$f._currentStage.addChild(this._list),n_$f.stage.once("mousedown",this,this.removeList),n_$f.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),n_$M(0,n_$N,"scrollBarSkin",function(){return this._scrollBarSkin},function(n_$N){this._scrollBarSkin=n_$N}),n_$M(0,n_$N,"sizeGrid",function(){return this._button.sizeGrid},function(n_$N){this._button.sizeGrid=n_$N}),n_$M(0,n_$N,"button",function(){return this._button}),n_$M(0,n_$N,"list",function(){return this._list||this._createList(),this._list},function(n_$N){n_$N&&(n_$N.removeSelf(),this._isCustomList=!0,this._list=n_$N,this._setListEvent(n_$N),this._itemHeight=n_$N.getCell(0).height+n_$N.spaceY)}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)&&Math.floor(n_$N)==n_$N||"string"==typeof n_$N?this.selectedIndex=parseInt(n_$N):n_$N instanceof Array?this.labels=n_$N.join(","):n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$M(0,n_$N,"labelColors",function(){return this._button.labelColors},function(n_$N){this._button.labelColors!=n_$N&&(this._button.labelColors=n_$N)}),n_$M(0,n_$N,"labelPadding",function(){return this._button.text.padding.join(",")},function(n_$N){this._button.text.padding=n_$q.fillArray(n_$s.labelPadding,n_$N,Number)}),n_$M(0,n_$N,"labelSize",function(){return this._button.text.fontSize},function(n_$N){this._button.text.fontSize=n_$N}),n_$M(0,n_$N,"labelFont",function(){return this._button.text.font},function(n_$N){this._button.text.font=n_$N}),n_$M(0,n_$N,"stateNum",function(){return this._button.stateNum},function(n_$N){this._button.stateNum=n_$N}),n_$a}(n_$Q),n_$R=function(n_$C){function n_$a(n_$N){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,n_$a.__super.call(this),this._showButtons=n_$_.showButtons,this._touchScrollEnable=n_$_.touchScrollEnable,this._mouseWheelEnable=n_$_.mouseWheelEnable,this.skin=n_$N,this.max=1}n_$J(n_$a,"laya.ui.ScrollBar",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this.stopScroll(),this.target=null,n_$C.prototype.destroy.call(this,n_$N),this.upButton&&this.upButton.destroy(n_$N),this.downButton&&this.downButton.destroy(n_$N),this.slider&&this.slider.destroy(n_$N),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},n_$N.createChildren=function(){this.addChild(this.slider=new n_$w),this.addChild(this.upButton=new n_$j),this.addChild(this.downButton=new n_$j)},n_$N.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},n_$N.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},n_$N.onButtonMouseDown=function(n_$N){var n_$C=n_$N.currentTarget===this.upButton;this.slide(n_$C),n_$f.timer.once(n_$s.scrollBarDelayTime,this,this.startLoop,[n_$C]),n_$f.stage.once("mouseup",this,this.onStageMouseUp)},n_$N.startLoop=function(n_$N){n_$f.timer.frameLoop(1,this,this.slide,[n_$N])},n_$N.slide=function(n_$N){n_$N?this.value-=this._scrollSize:this.value+=this._scrollSize},n_$N.onStageMouseUp=function(n_$N){n_$f.timer.clear(this,this.startLoop),n_$f.timer.clear(this,this.slide)},n_$N.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},n_$N.changeSize=function(){n_$C.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},n_$N.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},n_$N.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},n_$N.setScroll=function(n_$N,n_$C,n_$a){this.runCallLater(this.changeSize),this.slider.setSlider(n_$N,n_$C,n_$a),this.slider.bar.visible=0<n_$C,!this._hide&&this.autoHide&&(this.visible=!1)},n_$N.onTargetMouseWheel=function(n_$N){this.value-=n_$N.delta*this._scrollSize,this.target=this._target},n_$N.onTargetMouseDown=function(n_$N){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new n_$z),this._lastPoint.setTo(n_$f.stage.mouseX,n_$f.stage.mouseY),n_$f.timer.clear(this,this.tweenMove),n_$c.clearTween(this),n_$f.stage.once("mouseup",this,this.onStageMouseUp2),n_$f.stage.once("mouseout",this,this.onStageMouseUp2),n_$f.timer.frameLoop(1,this,this.loop)},n_$N.loop=function(){var n_$N=n_$f.stage.mouseY,n_$C=n_$f.stage.mouseX;if(this._lastOffset=this.isVertical?n_$N-this._lastPoint.y:n_$C-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?n_$f.stage._canvasTransform.getScaleY():n_$f.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=n_$C,this._lastPoint.y=n_$N,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},n_$N.onStageMouseUp2=function(n_$N){if(n_$f.stage.off("mouseup",this,this.onStageMouseUp2),n_$f.stage.off("mouseout",this,this.onStageMouseUp2),n_$f.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?n_$c.to(this,{value:this.min},this.elasticBackTime,n_$V.sineOut,n_$O.create(this,this.elasticOver)):this._value>this.max&&n_$c.to(this,{value:this.max},this.elasticBackTime,n_$V.sineOut,n_$O.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?n_$f.stage.mouseY-this._lastPoint.y:n_$f.stage.mouseX-this._lastPoint.x);for(var n_$C=0,n_$a=Math.min(this._offsets.length,3),n_$u=0;n_$u<n_$a;n_$u++)n_$C+=this._offsets[this._offsets.length-1-n_$u];if(this._lastOffset=n_$C/n_$a,(n_$C=Math.abs(this._lastOffset))<2)return void this.event("end");60<n_$C&&(this._lastOffset=0<this._lastOffset?60:-60);var n_$e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));n_$f.timer.frameLoop(1,this,this.tweenMove,[n_$e])}},n_$N.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&n_$c.to(this,{alpha:0},500),this.event("end")},n_$N.tweenMove=function(n_$N){this._lastOffset*=this.rollRatio;var n_$C=NaN;if(0<n_$N&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,n_$C=.5*-(this.min-n_$N-this.value),this._lastOffset>n_$C&&(this._lastOffset=n_$C)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,n_$C=.5*-(this.max+n_$N-this.value),this._lastOffset<n_$C&&(this._lastOffset=n_$C))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(n_$f.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?n_$c.to(this,{value:this.min},this.elasticBackTime,n_$V.sineOut,n_$O.create(this,this.elasticOver)):this._value>this.max?n_$c.to(this,{value:this.max},this.elasticBackTime,n_$V.sineOut,n_$O.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&n_$c.to(this,{alpha:0},500)}},n_$N.stopScroll=function(){this.onStageMouseUp2(null),n_$f.timer.clear(this,this.tweenMove),n_$c.clearTween(this)},n_$M(0,n_$N,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),n_$M(0,n_$N,"skin",function(){return this._skin},function(n_$N){this._skin!=n_$N&&(this._skin=n_$N,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),n_$M(0,n_$N,"max",function(){return this.slider.max},function(n_$N){this.slider.max=n_$N}),n_$M(0,n_$N,"showButtons",function(){return this._showButtons},function(n_$N){this._showButtons=n_$N,this.callLater(this.changeScrollBar)}),n_$M(0,n_$N,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),n_$M(0,n_$N,"min",function(){return this.slider.min},function(n_$N){this.slider.min=n_$N}),n_$M(0,n_$N,"value",function(){return this._value},function(n_$N){n_$N!==this._value&&(this._value=n_$N,this._isElastic||(this.slider._value!=n_$N&&(this.slider._value=n_$N,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),n_$M(0,n_$N,"isVertical",function(){return this.slider.isVertical},function(n_$N){this.slider.isVertical=n_$N}),n_$M(0,n_$N,"sizeGrid",function(){return this.slider.sizeGrid},function(n_$N){this.slider.sizeGrid=n_$N}),n_$M(0,n_$N,"scrollSize",function(){return this._scrollSize},function(n_$N){this._scrollSize=n_$N}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)||"string"==typeof n_$N?this.value=Number(n_$N):n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$M(0,n_$N,"thumbPercent",function(){return this._thumbPercent},function(n_$N){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),n_$N=1<=n_$N?.99:n_$N,this._thumbPercent=n_$N,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*n_$N,n_$s.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*n_$N,n_$s.scrollBarMinNum))}),n_$M(0,n_$N,"target",function(){return this._target},function(n_$N){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=n_$N)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),n_$M(0,n_$N,"hide",function(){return this._hide},function(n_$N){this._hide=n_$N,this.visible=!n_$N}),n_$M(0,n_$N,"touchScrollEnable",function(){return this._touchScrollEnable},function(n_$N){this._touchScrollEnable=n_$N,this.target=this._target}),n_$M(0,n_$N,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(n_$N){this._mouseWheelEnable=n_$N,this.target=this._target}),n_$M(0,n_$N,"tick",function(){return this.slider.tick},function(n_$N){this.slider.tick=n_$N}),n_$a}(n_$Q),n_$w=function(n_$C){function n_$a(n_$N){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,n_$a.__super.call(this),this.skin=n_$N}n_$J(n_$a,"laya.ui.Slider",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._bg&&this._bg.destroy(n_$N),this._bar&&this._bar.destroy(n_$N),this._progress&&this._progress.destroy(n_$N),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},n_$N.createChildren=function(){this.addChild(this._bg=new n_$B),this.addChild(this._bar=new n_$j)},n_$N.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},n_$N.onBarMouseDown=function(n_$N){this._globalSacle||(this._globalSacle=new n_$z),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=n_$f.stage.mouseX,this._ty=n_$f.stage.mouseY,n_$f.stage.on("mousemove",this,this.mouseMove),n_$f.stage.once("mouseup",this,this.mouseUp),n_$f.stage.once("mouseout",this,this.mouseUp),this.showValueText()},n_$N.showValueText=function(){if(this.showLabel){var n_$N=laya.ui.Slider.label;this.addChild(n_$N),n_$N.textField.changeText(this._value+""),this.isVertical?(n_$N.x=this._bar.x+20,n_$N.y=.5*(this._bar.height-n_$N.height)+this._bar.y):(n_$N.y=this._bar.y-20,n_$N.x=.5*(this._bar.width-n_$N.width)+this._bar.x)}},n_$N.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},n_$N.mouseUp=function(n_$N){n_$f.stage.off("mousemove",this,this.mouseMove),n_$f.stage.off("mouseup",this,this.mouseUp),n_$f.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},n_$N.mouseMove=function(n_$N){var n_$C=this._value;this.isVertical?(this._bar.y+=(n_$f.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(n_$f.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=n_$f.stage.mouseX,this._ty=n_$f.stage.mouseY;var n_$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*n_$a)/n_$a,this._value!=n_$C&&this.sendChangeEvent(),this.showValueText()},n_$N.sendChangeEvent=function(n_$N){void 0===n_$N&&(n_$N="change"),this.event(n_$N),this.changeHandler&&this.changeHandler.runWith(this._value)},n_$N.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},n_$N.changeSize=function(){n_$C.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},n_$N.setSlider=function(n_$N,n_$C,n_$a){this._value=-1,this._min=n_$N,this._max=n_$N<n_$C?n_$C:n_$N,this.value=n_$a<n_$N?n_$N:n_$C<n_$a?n_$C:n_$a},n_$N.changeValue=function(){var n_$N=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*n_$N)/n_$N,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var n_$C=this._max-this._min;0===n_$C&&(n_$C=1),this.isVertical?(this._bar.y=(this._value-this._min)/n_$C*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/n_$C*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},n_$N.onBgMouseDown=function(n_$N){var n_$C=this._bg.getMousePoint();this.isVertical?this.value=n_$C.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=n_$C.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},n_$M(0,n_$N,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),n_$M(0,n_$N,"skin",function(){return this._skin},function(n_$N){if(this._skin!=n_$N){this._skin=n_$N,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var n_$C=this._skin.replace(".png","$progress.png");n_$x.getRes(n_$C)&&(this._progress||(this.addChild(this._progress=new n_$B),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=n_$C),this.setBarPoint(),this.callLater(this.changeValue)}}),n_$M(0,n_$N,"allowClickBack",function(){return this._allowClickBack},function(n_$N){this._allowClickBack!=n_$N&&((this._allowClickBack=n_$N)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),n_$M(0,n_$N,"max",function(){return this._max},function(n_$N){this._max!=n_$N&&(this._max=n_$N,this.callLater(this.changeValue))}),n_$M(0,n_$N,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),n_$M(0,n_$N,"tick",function(){return this._tick},function(n_$N){this._tick!=n_$N&&(this._tick=n_$N,this.callLater(this.changeValue))}),n_$M(0,n_$N,"sizeGrid",function(){return this._bg.sizeGrid},function(n_$N){this._bg.sizeGrid=n_$N,this._bar.sizeGrid=n_$N,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),n_$M(0,n_$N,"min",function(){return this._min},function(n_$N){this._min!=n_$N&&(this._min=n_$N,this.callLater(this.changeValue))}),n_$M(0,n_$N,"value",function(){return this._value},function(n_$N){if(this._value!=n_$N){var n_$C=this._value;this._value=n_$N,this.changeValue(),this._value!=n_$C&&this.sendChangeEvent()}}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)||"string"==typeof n_$N?this.value=Number(n_$N):n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$M(0,n_$N,"bar",function(){return this._bar}),n_$u(n_$a,["label",function(){return this.label=new n_$Y}]),n_$a}(n_$Q),n_$B=function(n_$C){function n_$a(n_$N){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,n_$a.__super.call(this),this.skin=n_$N}n_$J(n_$a,"laya.ui.Image",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,n_$x.clearCache(this,this._skin)},n_$N.dispose=function(){this.destroy(!0),n_$x.clearCache(this,this._skin),this.clearEvent()},n_$N.createChildren=function(){this.graphics=this._bitmap=new n_$d},n_$N.setSource=function(n_$N,n_$C){n_$N===this._skin&&n_$C&&(this.source=n_$C,this.onCompResize(),this.clearEvent())},n_$N.clearEvent=function(){this._skin&&n_$e.atalsNotify&&n_$e.atalsNotify.off(this._skin,this,this.setSource)},n_$N.clearLoad=function(){this._skin&&((this._complete||this._progress)&&n_$f.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},n_$M(0,n_$N,"source",function(){return this._bitmap.source},function(n_$N){this._bitmap&&(this._bitmap.source=n_$N,this.event("loaded"),this.repaint())}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"string"==typeof(this._dataSource=n_$N)?this.skin=n_$N:n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$M(0,n_$N,"measureHeight",function(){return this._bitmap.height}),n_$M(0,n_$N,"skin",function(){return this._skin},function(n_$N){if(this._skin!=n_$N)if(n_$x.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=n_$N){n_$x.keepCache(this,this._skin);var n_$C=n_$x.getRes(n_$N),n_$a=n_$e.resAtalsObj&&n_$e.resAtalsObj[this._skin];n_$C?(this.source=n_$C,this.onCompResize()):n_$a?(n_$e.atalsNotify&&n_$e.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=n_$a.sourceW),0==this.height&&(this.height=n_$a.sourceH)):(this._complete=n_$O.create(this,this.setSource,[this._skin]),this._progress=null,n_$f.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),n_$M(0,n_$N,"group",function(){return this._group},function(n_$N){n_$N&&this._skin&&n_$x.setGroup(this._skin,n_$N),this._group=n_$N}),n_$M(0,n_$N,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(n_$N){this._bitmap.sizeGrid=n_$q.fillArray(n_$s.defaultSizeGrid,n_$N,Number)}),n_$M(0,n_$N,"measureWidth",function(){return this._bitmap.width}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$Q,this,"width",n_$N),this._bitmap.width=0==n_$N?1e-7:n_$N}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$Q,this,"height",n_$N),this._bitmap.height=0==n_$N?1e-7:n_$N}),n_$a}(n_$Q),n_$Y=function(n_$C){function n_$a(n_$N){this._tf=null,n_$a.__super.call(this),void 0===n_$N&&(n_$N=""),n_$P.defaultColor=n_$s.labelColor,this.text=n_$N}n_$J(n_$a,"laya.ui.Label",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._tf=null},n_$N.createChildren=function(){this.addChild(this._tf=new n_$X)},n_$N.changeText=function(n_$N){this._tf.changeText(n_$N)},n_$M(0,n_$N,"padding",function(){return this._tf.padding.join(",")},function(n_$N){this._tf.padding=n_$q.fillArray(n_$s.labelPadding,n_$N,Number)}),n_$M(0,n_$N,"bold",function(){return this._tf.bold},function(n_$N){this._tf.bold=n_$N}),n_$M(0,n_$N,"align",function(){return this._tf.align},function(n_$N){this._tf.align=n_$N}),n_$M(0,n_$N,"text",function(){return this._tf.text},function(n_$N){this._tf.text!=n_$N&&(n_$N&&(n_$N=n_$q.adptString(n_$N+"")),this._tf.text=n_$N,this.event("change"),this._width&&this._height||this.onCompResize())}),n_$M(0,n_$N,"italic",function(){return this._tf.italic},function(n_$N){this._tf.italic=n_$N}),n_$M(0,n_$N,"wordWrap",function(){return this._tf.wordWrap},function(n_$N){this._tf.wordWrap=n_$N}),n_$M(0,n_$N,"font",function(){return this._tf.font},function(n_$N){this._tf.font=n_$N}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)||"string"==typeof n_$N?this.text=n_$N+"":n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$M(0,n_$N,"color",function(){return this._tf.color},function(n_$N){this._tf.color=n_$N}),n_$M(0,n_$N,"valign",function(){return this._tf.valign},function(n_$N){this._tf.valign=n_$N}),n_$M(0,n_$N,"leading",function(){return this._tf.leading},function(n_$N){this._tf.leading=n_$N}),n_$M(0,n_$N,"fontSize",function(){return this._tf.fontSize},function(n_$N){this._tf.fontSize=n_$N}),n_$M(0,n_$N,"bgColor",function(){return this._tf.bgColor},function(n_$N){this._tf.bgColor=n_$N}),n_$M(0,n_$N,"borderColor",function(){return this._tf.borderColor},function(n_$N){this._tf.borderColor=n_$N}),n_$M(0,n_$N,"stroke",function(){return this._tf.stroke},function(n_$N){this._tf.stroke=n_$N}),n_$M(0,n_$N,"strokeColor",function(){return this._tf.strokeColor},function(n_$N){this._tf.strokeColor=n_$N}),n_$M(0,n_$N,"textField",function(){return this._tf}),n_$M(0,n_$N,"measureWidth",function(){return this._tf.width}),n_$M(0,n_$N,"measureHeight",function(){return this._tf.height}),n_$M(0,n_$N,"width",function(){return this._width||this._tf.text?n_$f.superGet(n_$Q,this,"width"):0},function(n_$N){n_$f.superSet(n_$Q,this,"width",n_$N),this._tf.width=n_$N}),n_$M(0,n_$N,"height",function(){return this._height||this._tf.text?n_$f.superGet(n_$Q,this,"height"):0},function(n_$N){n_$f.superSet(n_$Q,this,"height",n_$N),this._tf.height=n_$N}),n_$M(0,n_$N,"overflow",function(){return this._tf.overflow},function(n_$N){this._tf.overflow=n_$N}),n_$M(0,n_$N,"underline",function(){return this._tf.underline},function(n_$N){this._tf.underline=n_$N}),n_$M(0,n_$N,"underlineColor",function(){return this._tf.underlineColor},function(n_$N){this._tf.underlineColor=n_$N}),n_$a}(n_$Q),n_$K=function(n_$C){function n_$a(n_$N){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,n_$a.__super.call(this),this.skin=n_$N}n_$J(n_$a,"laya.ui.ProgressBar",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._bg&&this._bg.destroy(n_$N),this._bar&&this._bar.destroy(n_$N),this._bg=this._bar=null,this.changeHandler=null},n_$N.createChildren=function(){this.addChild(this._bg=new n_$B),this.addChild(this._bar=new n_$B)},n_$N.changeValue=function(){if(this.sizeGrid){var n_$N=this.sizeGrid.split(","),n_$C=Number(n_$N[3]),n_$a=Number(n_$N[1]),n_$u=(this.width-n_$C-n_$a)*this._value;this._bar.width=n_$C+n_$a+n_$u,this._bar.visible=this._bar.width>n_$C+n_$a}else this._bar.width=this.width*this._value},n_$M(0,n_$N,"measureHeight",function(){return this._bg.height}),n_$M(0,n_$N,"skin",function(){return this._skin},function(n_$N){this._skin!=n_$N&&(this._skin=n_$N,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),n_$M(0,n_$N,"measureWidth",function(){return this._bg.width}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$Q,this,"height",n_$N),this._bg.height=this._height,this._bar.height=this._height}),n_$M(0,n_$N,"bar",function(){return this._bar}),n_$M(0,n_$N,"value",function(){return this._value},function(n_$N){this._value!=n_$N&&(n_$N=1<n_$N?1:n_$N<0?0:n_$N,this._value=n_$N,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(n_$N))}),n_$M(0,n_$N,"bg",function(){return this._bg}),n_$M(0,n_$N,"sizeGrid",function(){return this._bg.sizeGrid},function(n_$N){this._bg.sizeGrid=this._bar.sizeGrid=n_$N}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$Q,this,"width",n_$N),this._bg.width=this._width,this.callLater(this.changeValue)}),n_$M(0,n_$N,"dataSource",n_$C.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)||"string"==typeof n_$N?this.value=Number(n_$N):n_$f.superSet(n_$Q,this,"dataSource",n_$N)}),n_$a}(n_$Q),n_$k=(function(n_$N){function n_$a(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,n_$a.__super.call(this),this._tipBox=new n_$Q,this._tipBox.addChild(this._tipText=new n_$X),this._tipText.x=this._tipText.y=5,this._tipText.color=n_$a.tipTextColor,this._defaultTipHandler=this._showDefaultTip,n_$f.stage.on("showtip",this,this._onStageShowTip),n_$f.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}n_$J(n_$a,"laya.ui.TipManager",n_$Q);var n_$C=n_$a.prototype;n_$C._onStageHideTip=function(n_$N){n_$f.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},n_$C._onStageShowTip=function(n_$N){n_$f.timer.once(n_$a.tipDelay,this,this._showTip,[n_$N],!0)},n_$C._showTip=function(n_$N){if("string"==typeof n_$N){var n_$C=String(n_$N);Boolean(n_$C)&&this._defaultTipHandler(n_$C)}else n_$N instanceof laya.utils.Handler?n_$N.run():"function"==typeof n_$N&&n_$N.apply();n_$f.stage.on("mousemove",this,this._onStageMouseMove),n_$f.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},n_$C._onStageMouseDown=function(n_$N){this.closeAll()},n_$C._onStageMouseMove=function(n_$N){this._showToStage(this,n_$a.offsetX,n_$a.offsetY)},n_$C._showToStage=function(n_$N,n_$C,n_$a){void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0);var n_$u=n_$N.getBounds();n_$N.x=n_$f.stage.mouseX+n_$C,n_$N.y=n_$f.stage.mouseY+n_$a,n_$N.x+n_$u.width>n_$f.stage.width&&(n_$N.x-=n_$u.width+n_$C),n_$N.y+n_$u.height>n_$f.stage.height&&(n_$N.y-=n_$u.height+n_$a)},n_$C.closeAll=function(){n_$f.timer.clear(this,this._showTip),n_$f.stage.off("mousemove",this,this._onStageMouseMove),n_$f.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},n_$C.showDislayTip=function(n_$N){this.addChild(n_$N),this._showToStage(this),n_$f._currentStage.addChild(this)},n_$C._showDefaultTip=function(n_$N){this._tipText.text=n_$N;var n_$C=this._tipBox.graphics;n_$C.clear(),n_$C.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,n_$a.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),n_$f._currentStage.addChild(this)},n_$M(0,n_$C,"defaultTipHandler",function(){return this._defaultTipHandler},function(n_$N){this._defaultTipHandler=n_$N}),n_$a.offsetX=10,n_$a.offsetY=15,n_$a.tipTextColor="#ffffff",n_$a.tipBackColor="#111111",n_$a.tipDelay=200}(),function(n_$N){var n_$G;function n_$z(){this._idMap=null,this._aniList=null,this._watchMap={},n_$z.__super.call(this)}n_$J(n_$z,"laya.ui.View",n_$i);var n_$C=n_$z.prototype;return n_$C.createView=function(n_$N){if(n_$N.animations&&!this._idMap&&(this._idMap={}),n_$z.createComp(n_$N,this,this),n_$N.animations){var n_$C,n_$a,n_$u=[],n_$e=n_$N.animations,n_$J=0,n_$M=n_$e.length;for(n_$J=0;n_$J<n_$M;n_$J++){switch(n_$C=new n_$$,n_$a=n_$e[n_$J],n_$C._setUp(this._idMap,n_$a),(this[n_$a.name]=n_$C)._setControlNode(this),n_$a.action){case 1:n_$C.play(0,!1);break;case 2:n_$C.play(0,!0)}n_$u.push(n_$C)}this._aniList=n_$u}0<this._width&&null==n_$N.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},n_$C.onEvent=function(n_$N,n_$C){},n_$C.loadUI=function(n_$N){var n_$C=n_$z.uiMap[n_$N];n_$C&&this.createView(n_$C)},n_$C.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,n_$N)},n_$C.changeData=function(n_$N){var n_$C=this._watchMap[n_$N];if(n_$C){console.log("change",n_$N);for(var n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++){n_$C[n_$a].exe(this)}}},n_$z._regs=function(){for(var n_$N in n_$z.uiClassMap)n_$t.regClass(n_$N,n_$z.uiClassMap[n_$N])},n_$z.createComp=function(n_$N,n_$C,n_$a,n_$u){if(!(n_$C=n_$C||n_$z.getCompInstance(n_$N)))return console.warn("can not create:"+n_$N.type),null;var n_$e=n_$N.child;if(n_$e)for(var n_$J=n_$C instanceof laya.ui.List,n_$M=0,n_$n=n_$e.length;n_$M<n_$n;n_$M++){var n_$V=n_$e[n_$M];if(!n_$C.hasOwnProperty("itemRender")||"render"!=n_$V.props.name&&"render"!==n_$V.props.renderType)if("Graphic"==n_$V.type)n_$t.addGraphicsToSprite(n_$V,n_$C);else if(n_$t.isDrawType(n_$V.type))n_$t.addGraphicToSprite(n_$V,n_$C,!0);else{if(n_$J){var n_$A=[],n_$P=n_$z.createComp(n_$V,null,n_$a,n_$A);n_$A.length&&(n_$P._$bindData=n_$A)}else n_$P=n_$z.createComp(n_$V,null,n_$a,n_$u);"Script"==n_$V.type?"owner"in n_$P?n_$P.owner=n_$C:"target"in n_$P&&(n_$P.target=n_$C):"mask"==n_$V.props.renderType||"mask"==n_$V.props.name?n_$C.mask=n_$P:n_$P instanceof laya.display.Sprite&&n_$C.addChild(n_$P)}else n_$C.itemRender=n_$V}var n_$$=n_$N.props;for(var n_$O in n_$$){var n_$G=n_$$[n_$O];n_$z.eventDic[n_$O]?n_$G&&n_$a&&n_$C.on(n_$O,n_$a,n_$a.onEvent,[n_$G]):n_$z.setCompValue(n_$C,n_$O,n_$G,n_$a,n_$u)}return n_$f.__typeof(n_$C,"laya.ui.IItem")&&n_$C.initItems(),n_$N.compId&&n_$a&&n_$a._idMap&&(n_$a._idMap[n_$N.compId]=n_$C),n_$C},n_$z.setCompValue=function(n_$N,n_$C,n_$a,n_$u,n_$e){if("string"==typeof n_$a&&-1<n_$a.indexOf("${")){if(n_$z._sheet||(n_$z._sheet=n_$t.getClass("laya.data.Table")),!n_$z._sheet)return void console.warn("Can not find class Sheet");if(n_$e)n_$e.push(n_$N,n_$C,n_$a);else if(n_$u){-1==n_$a.indexOf("].")&&(n_$a=n_$a.replace(".","[0]."));var n_$J,n_$M,n_$n=new n_$G(n_$N,n_$C,n_$a);n_$n.exe(n_$u);for(var n_$V=n_$a.replace(/\[.*?\]\./g,".");null!=(n_$J=n_$z._parseWatchData.exec(n_$V));){for(var n_$A=n_$J[1];null!=(n_$M=n_$z._parseKeyWord.exec(n_$A));){var n_$P=n_$M[0],n_$$=n_$u._watchMap[n_$P]||(n_$u._watchMap[n_$P]=[]);n_$$.push(n_$n),n_$z._sheet.I.notifer.on(n_$P,n_$u,n_$u.changeData,[n_$P])}(n_$$=n_$u._watchMap[n_$A]||(n_$u._watchMap[n_$A]=[])).push(n_$n),n_$z._sheet.I.notifer.on(n_$A,n_$u,n_$u.changeData,[n_$A])}}}else if("var"===n_$C&&n_$u)n_$u[n_$a]=n_$N;else if("onClick"==n_$C){var n_$O=n_$f._runScript("(function(){"+n_$a+"})");n_$N.on("click",n_$u,n_$O)}else n_$N[n_$C]="true"===n_$a||"false"!==n_$a&&n_$a},n_$z.getCompInstance=function(n_$N){var n_$C,n_$a=n_$N.props?n_$N.props.runtime:null;return n_$C=n_$a?n_$z.viewClassMap[n_$a]||n_$z.uiClassMap[n_$a]||n_$f.__classmap[n_$a]:n_$z.uiClassMap[n_$N.type],n_$N.props&&n_$N.props.hasOwnProperty("renderType")&&"instance"==n_$N.props.renderType?n_$C.instance:n_$C?new n_$C:null},n_$z.regComponent=function(n_$N,n_$C){n_$z.uiClassMap[n_$N]=n_$C,n_$t.regClass(n_$N,n_$C)},n_$z.regViewRuntime=function(n_$N,n_$C){n_$z.viewClassMap[n_$N]=n_$C},n_$z.uiMap={},n_$z.viewClassMap={},n_$z._sheet=null,n_$u(n_$z,["uiClassMap",function(){return this.uiClassMap={ViewStack:n_$NN,LinkButton:n_$j,TextArea:n_$AN,ColorPicker:n_$T,Box:n_$i,Button:n_$j,CheckBox:n_$S,Clip:n_$y,ComboBox:n_$L,Component:n_$Q,HScrollBar:n_$o,HSlider:n_$I,Image:n_$B,Label:n_$Y,List:n_$b,Panel:n_$H,ProgressBar:n_$K,Radio:n_$h,RadioGroup:n_$nN,ScrollBar:n_$R,Slider:n_$w,Tab:n_$VN,TextInput:n_$aN,View:n_$z,VScrollBar:n_$CN,VSlider:n_$uN,Tree:n_$U,HBox:n_$JN,VBox:n_$MN,Sprite:n_$v,Animation:n_$a,Text:n_$X,FontClip:n_$m}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),n_$z.__init$=function(){n_$z._regs(),n_$G=function(){function n_$N(n_$N,n_$C,n_$a){this.comp=null,this.prop=null,this.value=null,this.comp=n_$N,this.prop=n_$C,this.value=n_$a}return n_$J(n_$N,""),n_$N.prototype.exe=function(n_$N){var n_$C=n_$q.getBindFun(this.value);this.comp[this.prop]=n_$C.call(this,n_$N)},n_$N}()},n_$z}()),n_$S=function(n_$N){function n_$a(n_$N,n_$C){void 0===n_$C&&(n_$C=""),n_$a.__super.call(this,n_$N,n_$C)}n_$J(n_$a,"laya.ui.CheckBox",n_$N);var n_$C=n_$a.prototype;return n_$C.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},n_$C.initialize=function(){n_$N.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},n_$M(0,n_$C,"dataSource",n_$N.prototype._$get_dataSource,function(n_$N){"boolean"==typeof(this._dataSource=n_$N)?this.selected=n_$N:"string"==typeof n_$N?this.selected="true"===n_$N:n_$f.superSet(n_$j,this,"dataSource",n_$N)}),n_$a}(n_$j),n_$p=function(n_$N){function n_$C(){this._space=0,this._align="none",this._itemChanged=!1,n_$C.__super.call(this)}n_$J(n_$C,"laya.ui.LayoutBox",n_$i);var n_$a=n_$C.prototype;return n_$a.addChild=function(n_$N){return n_$N.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,n_$N)},n_$a.onResize=function(n_$N){this._setItemChanged()},n_$a.addChildAt=function(n_$N,n_$C){return n_$N.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,n_$N,n_$C)},n_$a.removeChild=function(n_$N){return n_$N.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,n_$N)},n_$a.removeChildAt=function(n_$N){return this.getChildAt(n_$N).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,n_$N)},n_$a.refresh=function(){this._setItemChanged()},n_$a.changeItems=function(){this._itemChanged=!1},n_$a.sortItem=function(n_$N){n_$N&&n_$N.sort(function(n_$N,n_$C){return n_$N.y-n_$C.y})},n_$a._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},n_$M(0,n_$a,"space",function(){return this._space},function(n_$N){this._space=n_$N,this._setItemChanged()}),n_$M(0,n_$a,"align",function(){return this._align},function(n_$N){this._align=n_$N,this._setItemChanged()}),n_$C}(),n_$m=function(n_$C){function n_$a(n_$N,n_$C){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,n_$a.__super.call(this),n_$N&&(this.skin=n_$N),n_$C&&(this.sheet=n_$C)}n_$J(n_$a,"laya.ui.FontClip",n_$C);var n_$N=n_$a.prototype;return n_$N.createChildren=function(){this._bitmap=new n_$d,this.on("loaded",this,this._onClipLoaded)},n_$N._onClipLoaded=function(){this.callLater(this.changeValue)},n_$N.changeValue=function(){var n_$N;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),n_$N=this._sources[0]))){var n_$C="horizontal"===this._direction;n_$C?(this._wordsW=this._valueArr.length*(n_$N.sourceWidth+this.spaceX),this._wordsH=n_$N.sourceHeight):(this._wordsW=n_$N.sourceWidth,this._wordsH=(n_$N.sourceHeight+this.spaceY)*this._valueArr.length);var n_$a=0;if(this._width)switch(this._align){case"center":n_$a=.5*(this._width-this._wordsW);break;case"right":n_$a=this._width-this._wordsW;break;default:n_$a=0}for(var n_$u=0,n_$e=this._valueArr.length;n_$u<n_$e;n_$u++){var n_$J=this._indexMap[this._valueArr.charAt(n_$u)];this.sources[n_$J]&&(n_$N=this.sources[n_$J],n_$C?this.graphics.drawTexture(n_$N,n_$a+n_$u*(n_$N.sourceWidth+this.spaceX),0,n_$N.sourceWidth,n_$N.sourceHeight):this.graphics.drawTexture(n_$N,0+n_$a,n_$u*(n_$N.sourceHeight+this.spaceY),n_$N.sourceWidth,n_$N.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),n_$C.prototype.destroy.call(this,n_$N)},n_$M(0,n_$N,"sheet",function(){return this._sheet},function(n_$N){n_$N+="";var n_$C=(this._sheet=n_$N).split(" ");this._clipX=String(n_$C[0]).length,this.clipY=n_$C.length,this._indexMap={};for(var n_$a=0;n_$a<this._clipY;n_$a++)for(var n_$u=n_$C[n_$a].split(""),n_$e=0,n_$J=n_$u.length;n_$e<n_$J;n_$e++)this._indexMap[n_$u[n_$e]]=n_$a*this._clipX+n_$e}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$y,this,"height",n_$N),this.callLater(this.changeValue)}),n_$M(0,n_$N,"direction",function(){return this._direction},function(n_$N){this._direction=n_$N,this.callLater(this.changeValue)}),n_$M(0,n_$N,"value",function(){return this._valueArr?this._valueArr:""},function(n_$N){n_$N+="",this._valueArr=n_$N,this.callLater(this.changeValue)}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$y,this,"width",n_$N),this.callLater(this.changeValue)}),n_$M(0,n_$N,"spaceX",function(){return this._spaceX},function(n_$N){this._spaceX=n_$N,"horizontal"===this._direction&&this.callLater(this.changeValue)}),n_$M(0,n_$N,"spaceY",function(){return this._spaceY},function(n_$N){this._spaceY=n_$N,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),n_$M(0,n_$N,"align",function(){return this._align},function(n_$N){this._align=n_$N,this.callLater(this.changeValue)}),n_$M(0,n_$N,"measureWidth",function(){return this._wordsW}),n_$M(0,n_$N,"measureHeight",function(){return this._wordsH}),n_$a}(n_$y),n_$b=function(n_$N){function n_$C(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new n_$z,n_$C.__super.call(this)}n_$J(n_$C,"laya.ui.List",n_$N);var n_$a=n_$C.prototype;return n_$f.imps(n_$a,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),n_$a.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this._content&&this._content.destroy(n_$N),this._scrollBar&&this._scrollBar.destroy(n_$N),laya.ui.Component.prototype.destroy.call(this,n_$N),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},n_$a.createChildren=function(){this.addChild(this._content=new n_$i)},n_$a.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=n_$f.superGet(n_$i,this,"cacheAs")),n_$f.superSet(n_$i,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},n_$a.onScrollEnd=function(){n_$f.superSet(n_$i,this,"cacheAs",this._$P.cacheAs)},n_$a._removePreScrollBar=function(){var n_$N=this.removeChildByName("scrollBar");n_$N&&n_$N.destroy(!0)},n_$a.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var n_$N=this._getOneCell(),n_$C=n_$N.width+this._spaceX||1,n_$a=n_$N.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/n_$C):Math.ceil(this._width/n_$C)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/n_$a):Math.round(this._height/n_$a));var n_$u=this._width?this._width:n_$C*this.repeatX-this._spaceX,n_$e=this._height?this._height:n_$a*this.repeatY-this._spaceY;this._cellSize=this._isVertical?n_$a:n_$C,this._cellOffset=this._isVertical?n_$a*Math.max(this._repeatY2,this._repeatY)-n_$e-this._spaceY:n_$C*Math.max(this._repeatX2,this._repeatX)-n_$u-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=n_$e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=n_$u),this.setContentSize(n_$u,n_$e);var n_$J=this._isVertical?this.repeatX:this.repeatY,n_$M=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,n_$J,n_$M),this._createdLine=n_$M,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},n_$a._getOneCell=function(){if(0===this._cells.length){var n_$N=this.createItem();if(this._offset.setTo(n_$N.x,n_$N.y),this.cacheContent)return n_$N;this._cells.push(n_$N)}return this._cells[0]},n_$a._createItems=function(n_$N,n_$C,n_$a){var n_$u=this._content,n_$e=this._getOneCell(),n_$J=n_$e.width+this._spaceX,n_$M=n_$e.height+this._spaceY;if(this.cacheContent){var n_$n=new n_$i;n_$n.cacheAsBitmap=!0,n_$n.pos((this._isVertical?0:n_$N)*n_$J,(this._isVertical?n_$N:0)*n_$M),this._content.addChild(n_$n),this._content.optimizeScrollRect=!0,n_$u=n_$n}else{for(var n_$V=[],n_$A=this._cells.length-1;-1<n_$A;n_$A--){var n_$P=this._cells[n_$A];n_$P.removeSelf(),n_$V.push(n_$P)}this._cells.length=0}for(var n_$$=n_$N;n_$$<n_$a;n_$$++)for(var n_$O=0;n_$O<n_$C;n_$O++)(n_$e=n_$V&&n_$V.length?n_$V.pop():this.createItem()).x=(this._isVertical?n_$O:n_$$)*n_$J-n_$u.x,n_$e.y=(this._isVertical?n_$$:n_$O)*n_$M-n_$u.y,n_$e.name="item"+(n_$$*n_$C+n_$O),n_$u.addChild(n_$e),this.addCell(n_$e)},n_$a.createItem=function(){var n_$N=[];if("function"==typeof this._itemRender)var n_$C=new this._itemRender;else n_$C=n_$k.createComp(this._itemRender,null,null,n_$N);if(0==n_$N.length&&n_$C._watchMap){var n_$a=n_$C._watchMap;for(var n_$u in n_$a)for(var n_$e=n_$a[n_$u],n_$J=0;n_$J<n_$e.length;n_$J++){var n_$M=n_$e[n_$J];n_$N.push(n_$M.comp,n_$M.prop,n_$M.value)}}return n_$N.length&&(n_$C._$bindData=n_$N),n_$C},n_$a.addCell=function(n_$N){n_$N.on("click",this,this.onCellMouse),n_$N.on("rightclick",this,this.onCellMouse),n_$N.on("mouseover",this,this.onCellMouse),n_$N.on("mouseout",this,this.onCellMouse),n_$N.on("mousedown",this,this.onCellMouse),n_$N.on("mouseup",this,this.onCellMouse),this._cells.push(n_$N)},n_$a.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var n_$N=0,n_$C=n_$N=0;n_$C<1e4;n_$C++){var n_$a=this.getChildByName("item"+n_$C);if(!n_$a)break;this.addCell(n_$a),n_$N++}this.repeatY=n_$N}},n_$a.setContentSize=function(n_$N,n_$C){this._content.width=n_$N,this._content.height=n_$C,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new n_$g),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,n_$N,n_$C),this._content.scrollRect=this._content.scrollRect),this.event("resize")},n_$a.onCellMouse=function(n_$N){"mousedown"===n_$N.type&&(this._isMoved=!1);var n_$C=n_$N.currentTarget,n_$a=this._startIndex+this._cells.indexOf(n_$C);n_$a<0||("click"===n_$N.type||"rightclick"===n_$N.type?this.selectEnable&&!this._isMoved?this.selectedIndex=n_$a:this.changeCellState(n_$C,!0,0):"mouseover"!==n_$N.type&&"mouseout"!==n_$N.type||this._selectedIndex===n_$a||this.changeCellState(n_$C,"mouseover"===n_$N.type,0),this.mouseHandler&&this.mouseHandler.runWith([n_$N,n_$a]))},n_$a.changeCellState=function(n_$N,n_$C,n_$a){var n_$u=n_$N.getChildByName("selectBox");n_$u&&(this.selectEnable=!0,n_$u.visible=n_$C,n_$u.index=n_$a)},n_$a.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},n_$a.onScrollBarChange=function(n_$N){this.runCallLater(this.changeCells);var n_$C=this._scrollBar.value,n_$a=this._isVertical?this.repeatX:this.repeatY,n_$u=this._isVertical?this.repeatY:this.repeatX,n_$e=Math.floor(n_$C/this._cellSize);if(this.cacheContent)n_$M=n_$u+1,this._createdLine-n_$e<n_$M&&(this._createItems(this._createdLine,n_$a,this._createdLine+n_$M),this.renderItems(this._createdLine*n_$a,0),this._createdLine+=n_$M);else{var n_$J=n_$e*n_$a,n_$M=0;if(n_$J>this._startIndex){n_$M=n_$J-this._startIndex;var n_$n=!0,n_$V=this._startIndex+n_$a*(n_$u+1);this._isMoved=!0}else n_$J<this._startIndex&&(n_$M=this._startIndex-n_$J,n_$n=!1,n_$V=this._startIndex-1,this._isMoved=!0);for(var n_$A=0;n_$A<n_$M;n_$A++){if(n_$n){var n_$P=this._cells.shift();this._cells[this._cells.length]=n_$P;var n_$$=n_$V+n_$A}else n_$P=this._cells.pop(),this._cells.unshift(n_$P),n_$$=n_$V-n_$A;var n_$O=Math.floor(n_$$/n_$a)*this._cellSize;this._isVertical?n_$P.y=n_$O:n_$P.x=n_$O,this.renderItem(n_$P,n_$$)}this._startIndex=n_$J,this.changeSelectStatus()}var n_$G=this._content.scrollRect;this._isVertical?(n_$G.y=n_$C-this._offset.y,n_$G.x=-this._offset.x):(n_$G.y=-this._offset.y,n_$G.x=n_$C-this._offset.x),this._content.scrollRect=n_$G},n_$a.posCell=function(n_$N,n_$C){if(this._scrollBar){var n_$a=this._isVertical?this.repeatX:this.repeatY,n_$u=(this._isVertical?this.repeatY:this.repeatX,Math.floor(n_$C/n_$a)*this._cellSize);this._isVertical?n_$N.y=n_$u:n_$N.x=n_$u}},n_$a.changeSelectStatus=function(){for(var n_$N=0,n_$C=this._cells.length;n_$N<n_$C;n_$N++)this.changeCellState(this._cells[n_$N],this._selectedIndex===this._startIndex+n_$N,1)},n_$a.renderItems=function(n_$N,n_$C){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0);for(var n_$a=n_$N,n_$u=n_$C||this._cells.length;n_$a<n_$u;n_$a++)this.renderItem(this._cells[n_$a],this._startIndex+n_$a);this.changeSelectStatus()},n_$a.renderItem=function(n_$N,n_$C){this._array&&0<=n_$C&&n_$C<this._array.length?(n_$N.visible=!0,n_$N._$bindData?(n_$N._dataSource=this._array[n_$C],this._bindData(n_$N,this._array[n_$C])):n_$N.dataSource=this._array[n_$C],this.cacheContent||this.posCell(n_$N,n_$C),this.hasListener("render")&&this.event("render",[n_$N,n_$C]),this.renderHandler&&this.renderHandler.runWith([n_$N,n_$C])):(n_$N.visible=!1,n_$N.dataSource=null)},n_$a._bindData=function(n_$N,n_$C){for(var n_$a=n_$N._$bindData,n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$u++){var n_$J=n_$a[n_$u++],n_$M=n_$a[n_$u++],n_$n=n_$a[n_$u],n_$V=n_$q.getBindFun(n_$n);n_$J[n_$M]=n_$V.call(this,n_$C)}},n_$a.refresh=function(){this.array=this._array},n_$a.getItem=function(n_$N){return-1<n_$N&&n_$N<this._array.length?this._array[n_$N]:null},n_$a.changeItem=function(n_$N,n_$C){-1<n_$N&&n_$N<this._array.length&&(this._array[n_$N]=n_$C,n_$N>=this._startIndex&&n_$N<this._startIndex+this._cells.length&&this.renderItem(this.getCell(n_$N),n_$N))},n_$a.setItem=function(n_$N,n_$C){this.changeItem(n_$N,n_$C)},n_$a.addItem=function(n_$N){this._array.push(n_$N),this.array=this._array},n_$a.addItemAt=function(n_$N,n_$C){this._array.splice(n_$C,0,n_$N),this.array=this._array},n_$a.deleteItem=function(n_$N){this._array.splice(n_$N,1),this.array=this._array},n_$a.getCell=function(n_$N){return this.runCallLater(this.changeCells),-1<n_$N&&this._cells?this._cells[(n_$N-this._startIndex)%this._cells.length]:null},n_$a.scrollTo=function(n_$N){if(this._scrollBar){var n_$C=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(n_$N/n_$C)*this._cellSize}else this.startIndex=n_$N},n_$a.tweenTo=function(n_$N,n_$C,n_$a){if(void 0===n_$C&&(n_$C=200),this._scrollBar){var n_$u=this._isVertical?this.repeatX:this.repeatY;n_$c.to(this._scrollBar,{value:Math.floor(n_$N/n_$u)*this._cellSize},n_$C,null,n_$a,0,!0)}else this.startIndex=n_$N,n_$a&&n_$a.run()},n_$a._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},n_$a.commitMeasure=function(){this.runCallLater(this.changeCells)},n_$M(0,n_$a,"cacheAs",n_$N.prototype._$get_cacheAs,function(n_$N){n_$f.superSet(n_$i,this,"cacheAs",n_$N),this._scrollBar&&(this._$P.cacheAs=null,"none"!==n_$N?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),n_$M(0,n_$a,"content",function(){return this._content}),n_$M(0,n_$a,"height",n_$N.prototype._$get_height,function(n_$N){n_$N!=this._height&&(n_$f.superSet(n_$i,this,"height",n_$N),this._setCellChanged())}),n_$M(0,n_$a,"itemRender",function(){return this._itemRender},function(n_$N){if(this._itemRender!=n_$N){this._itemRender=n_$N;for(var n_$C=this._cells.length-1;-1<n_$C;n_$C--)this._cells[n_$C].destroy();this._cells.length=0,this._setCellChanged()}}),n_$M(0,n_$a,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(n_$N){this._removePreScrollBar();var n_$C=new n_$CN;n_$C.name="scrollBar",n_$C.right=0,n_$N&&" "!=n_$N&&(n_$C.skin=n_$N),this.scrollBar=n_$C,this.addChild(n_$C),this._setCellChanged()}),n_$M(0,n_$a,"page",function(){return this._page},function(n_$N){this._page=n_$N,this._array&&(this._page=0<n_$N?n_$N:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),n_$M(0,n_$a,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(n_$N){this._removePreScrollBar();var n_$C=new n_$o;n_$C.name="scrollBar",n_$C.bottom=0,n_$N&&" "!=n_$N&&(n_$C.skin=n_$N),this.scrollBar=n_$C,this.addChild(n_$C),this._setCellChanged()}),n_$M(0,n_$a,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(n_$N){this._repeatX=n_$N,this._setCellChanged()}),n_$M(0,n_$a,"scrollBar",function(){return this._scrollBar},function(n_$N){this._scrollBar!=n_$N&&(this._scrollBar=n_$N)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),n_$M(0,n_$a,"width",n_$N.prototype._$get_width,function(n_$N){n_$N!=this._width&&(n_$f.superSet(n_$i,this,"width",n_$N),this._setCellChanged())}),n_$M(0,n_$a,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(n_$N){this._repeatY=n_$N,this._setCellChanged()}),n_$M(0,n_$a,"spaceX",function(){return this._spaceX},function(n_$N){this._spaceX=n_$N,this._setCellChanged()}),n_$M(0,n_$a,"spaceY",function(){return this._spaceY},function(n_$N){this._spaceY=n_$N,this._setCellChanged()}),n_$M(0,n_$a,"selectedIndex",function(){return this._selectedIndex},function(n_$N){this._selectedIndex!=n_$N&&(this._selectedIndex=n_$N,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(n_$N),this.startIndex=this._startIndex)}),n_$M(0,n_$a,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(n_$N){this.selectedIndex=this._array.indexOf(n_$N)}),n_$M(0,n_$a,"length",function(){return this._array?this._array.length:0}),n_$M(0,n_$a,"selection",function(){return this.getCell(this._selectedIndex)},function(n_$N){this.selectedIndex=this._startIndex+this._cells.indexOf(n_$N)}),n_$M(0,n_$a,"startIndex",function(){return this._startIndex},function(n_$N){this._startIndex=0<n_$N?n_$N:0,this.callLater(this.renderItems)}),n_$M(0,n_$a,"array",function(){return this._array},function(n_$N){this.runCallLater(this.changeCells),this._array=n_$N||[];var n_$C=this._array.length;if(this.totalPage=Math.ceil(n_$C/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<n_$C?this._selectedIndex:n_$C-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var n_$a=this._isVertical?this.repeatX:this.repeatY,n_$u=this._isVertical?this.repeatY:this.repeatX,n_$e=Math.ceil(n_$C/n_$a);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=n_$u/n_$e,this._scrollBar.setScroll(0,(n_$e-n_$u)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),n_$M(0,n_$a,"dataSource",n_$N.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)&&Math.floor(n_$N)==n_$N||"string"==typeof n_$N?this.selectedIndex=parseInt(n_$N):n_$N instanceof Array?this.array=n_$N:n_$f.superSet(n_$i,this,"dataSource",n_$N)}),n_$M(0,n_$a,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),n_$C}(n_$i),n_$o=function(n_$N){function n_$C(){n_$C.__super.call(this)}return n_$J(n_$C,"laya.ui.HScrollBar",n_$N),n_$C.prototype.initialize=function(){n_$N.prototype.initialize.call(this),this.slider.isVertical=!1},n_$C}(n_$R),n_$H=function(n_$N){function n_$C(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,n_$C.__super.call(this),this.width=this.height=100}n_$J(n_$C,"laya.ui.Panel",n_$N);var n_$a=n_$C.prototype;return n_$a.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),laya.ui.Component.prototype.destroy.call(this,n_$N),this._content&&this._content.destroy(n_$N),this._vScrollBar&&this._vScrollBar.destroy(n_$N),this._hScrollBar&&this._hScrollBar.destroy(n_$N),this._vScrollBar=null,this._hScrollBar=null,this._content=null},n_$a.destroyChildren=function(){this._content.destroyChildren()},n_$a.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new n_$i)},n_$a.addChild=function(n_$N){return n_$N.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(n_$N)},n_$a.onResize=function(){this._setScrollChanged()},n_$a.addChildAt=function(n_$N,n_$C){return n_$N.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(n_$N,n_$C)},n_$a.removeChild=function(n_$N){return n_$N.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(n_$N)},n_$a.removeChildAt=function(n_$N){return this.getChildAt(n_$N).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(n_$N)},n_$a.removeChildren=function(n_$N,n_$C){return void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=2147483647),this._content.removeChildren(n_$N,n_$C),this._setScrollChanged(),this},n_$a.getChildAt=function(n_$N){return this._content.getChildAt(n_$N)},n_$a.getChildByName=function(n_$N){return this._content.getChildByName(n_$N)},n_$a.getChildIndex=function(n_$N){return this._content.getChildIndex(n_$N)},n_$a.changeScroll=function(){this._scrollChanged=!1;var n_$N=this.contentWidth||1,n_$C=this.contentHeight||1,n_$a=this._vScrollBar,n_$u=this._hScrollBar,n_$e=n_$a&&n_$C>this._height,n_$J=n_$u&&n_$N>this._width,n_$M=n_$e?this._width-n_$a.width:this._width,n_$n=n_$J?this._height-n_$u.height:this._height;n_$a&&(n_$a.x=this._width-n_$a.width,n_$a.y=0,n_$a.height=this._height-(n_$J?n_$u.height:0),n_$a.scrollSize=Math.max(.033*this._height,1),n_$a.thumbPercent=n_$n/n_$C,n_$a.setScroll(0,n_$C-n_$n,n_$a.value)),n_$u&&(n_$u.x=0,n_$u.y=this._height-n_$u.height,n_$u.width=this._width-(n_$e?n_$a.width:0),n_$u.scrollSize=Math.max(.033*this._width,1),n_$u.thumbPercent=n_$M/n_$N,n_$u.setScroll(0,n_$N-n_$M,n_$u.value))},n_$a.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},n_$a.setContentSize=function(n_$N,n_$C){var n_$a=this._content;n_$a.width=n_$N,n_$a.height=n_$C,n_$a.scrollRect||(n_$a.scrollRect=new n_$g),n_$a.scrollRect.setTo(0,0,n_$N,n_$C),n_$a.scrollRect=n_$a.scrollRect},n_$a.onScrollBarChange=function(n_$N){var n_$C=this._content.scrollRect;if(n_$C){var n_$a=Math.round(n_$N.value);n_$N.isVertical?n_$C.y=n_$a:n_$C.x=n_$a,this._content.scrollRect=n_$C}},n_$a.scrollTo=function(n_$N,n_$C){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),this.vScrollBar&&(this.vScrollBar.value=n_$C),this.hScrollBar&&(this.hScrollBar.value=n_$N)},n_$a.refresh=function(){this.changeScroll()},n_$a.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=n_$f.superGet(n_$i,this,"cacheAs")),n_$f.superSet(n_$i,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},n_$a.onScrollEnd=function(){n_$f.superSet(n_$i,this,"cacheAs",this._$P.cacheAs)},n_$a._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},n_$M(0,n_$a,"numChildren",function(){return this._content.numChildren}),n_$M(0,n_$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(n_$N){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new n_$o),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=n_$N}),n_$M(0,n_$a,"contentWidth",function(){for(var n_$N=0,n_$C=this._content.numChildren-1;-1<n_$C;n_$C--){var n_$a=this._content.getChildAt(n_$C);n_$N=Math.max(n_$a.x+n_$a.width*n_$a.scaleX,n_$N)}return n_$N}),n_$M(0,n_$a,"contentHeight",function(){for(var n_$N=0,n_$C=this._content.numChildren-1;-1<n_$C;n_$C--){var n_$a=this._content.getChildAt(n_$C);n_$N=Math.max(n_$a.y+n_$a.height*n_$a.scaleY,n_$N)}return n_$N}),n_$M(0,n_$a,"width",n_$N.prototype._$get_width,function(n_$N){n_$f.superSet(n_$i,this,"width",n_$N),this._setScrollChanged()}),n_$M(0,n_$a,"hScrollBar",function(){return this._hScrollBar}),n_$M(0,n_$a,"content",function(){return this._content}),n_$M(0,n_$a,"height",n_$N.prototype._$get_height,function(n_$N){n_$f.superSet(n_$i,this,"height",n_$N),this._setScrollChanged()}),n_$M(0,n_$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(n_$N){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new n_$CN),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=n_$N}),n_$M(0,n_$a,"vScrollBar",function(){return this._vScrollBar}),n_$M(0,n_$a,"cacheAs",n_$N.prototype._$get_cacheAs,function(n_$N){n_$f.superSet(n_$i,this,"cacheAs",n_$N),this._$P.cacheAs=null,"none"!==n_$N?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),n_$C}(n_$i),n_$I=function(n_$N){function n_$C(n_$N){n_$C.__super.call(this,n_$N),this.isVertical=!1}return n_$J(n_$C,"laya.ui.HSlider",n_$w),n_$C}(),n_$Z=function(n_$N){function n_$a(n_$N,n_$C){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,n_$a.__super.call(this),this.skin=n_$C,this.labels=n_$N}n_$J(n_$a,"laya.ui.UIGroup",n_$N);var n_$C=n_$a.prototype;return n_$f.imps(n_$C,{"laya.ui.IItem":!0}),n_$C.preinitialize=function(){this.mouseEnabled=!0},n_$C.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),laya.ui.Component.prototype.destroy.call(this,n_$N),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},n_$C.addItem=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0);var n_$a=n_$N,n_$u=this._items.length;if(n_$a.name="item"+n_$u,this.addChild(n_$a),this.initItems(),n_$C&&0<n_$u){var n_$e=this._items[n_$u-1];"horizontal"==this._direction?n_$a.x=n_$e.x+n_$e.width+this._space:n_$a.y=n_$e.y+n_$e.height+this._space}else n_$C&&(n_$a.x=0,n_$a.y=0);return n_$u},n_$C.delItem=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0);var n_$a=this._items.indexOf(n_$N);if(-1!=n_$a){var n_$u=n_$N;this.removeChild(n_$u);for(var n_$e=n_$a+1,n_$J=this._items.length;n_$e<n_$J;n_$e++){var n_$M=this._items[n_$e];n_$M.name="item"+(n_$e-1),n_$C&&("horizontal"==this._direction?n_$M.x-=n_$u.width+this._space:n_$M.y-=n_$u.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var n_$n;n_$n=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=n_$n}}},n_$C.initItems=function(){this._items||(this._items=[]);for(var n_$N=this._items.length=0;n_$N<1e4;n_$N++){var n_$C=this.getChildByName("item"+n_$N);if(null==n_$C)break;this._items.push(n_$C),n_$C.selected=n_$N===this._selectedIndex,n_$C.clickHandler=n_$O.create(this,this.itemClick,[n_$N],!1)}},n_$C.itemClick=function(n_$N){this.selectedIndex=n_$N},n_$C.setSelect=function(n_$N,n_$C){this._items&&-1<n_$N&&n_$N<this._items.length&&(this._items[n_$N].selected=n_$C)},n_$C.createItem=function(n_$N,n_$C){return null},n_$C.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var n_$N=0,n_$C=0,n_$a=this._items.length;n_$C<n_$a;n_$C++){var n_$u=this._items[n_$C];this._skin&&(n_$u.skin=this._skin),this._labelColors&&(n_$u.labelColors=this._labelColors),this._labelSize&&(n_$u.labelSize=this._labelSize),this._labelStroke&&(n_$u.labelStroke=this._labelStroke),this._labelStrokeColor&&(n_$u.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(n_$u.strokeColors=this._strokeColors),this._labelBold&&(n_$u.labelBold=this._labelBold),this._labelPadding&&(n_$u.labelPadding=this._labelPadding),this._labelAlign&&(n_$u.labelAlign=this._labelAlign),this._stateNum&&(n_$u.stateNum=this._stateNum),this._labelFont&&(n_$u.labelFont=this._labelFont),"horizontal"===this._direction?(n_$u.y=0,n_$u.x=n_$N,n_$N+=n_$u.width+this._space):(n_$u.x=0,n_$u.y=n_$N,n_$N+=n_$u.height+this._space)}this.changeSize()},n_$C.commitMeasure=function(){this.runCallLater(this.changeLabels)},n_$C._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},n_$M(0,n_$C,"labelStrokeColor",function(){return this._labelStrokeColor},function(n_$N){this._labelStrokeColor!=n_$N&&(this._labelStrokeColor=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"skin",function(){return this._skin},function(n_$N){this._skin!=n_$N&&(this._skin=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"selectedIndex",function(){return this._selectedIndex},function(n_$N){this._selectedIndex!=n_$N&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=n_$N,this.setSelect(n_$N,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),n_$M(0,n_$C,"labels",function(){return this._labels},function(n_$N){if(this._labels!=n_$N){if(this._labels=n_$N,this.removeChildren(),this._setLabelChanged(),this._labels)for(var n_$C=this._labels.split(","),n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++){var n_$e=this.createItem(this._skin,n_$C[n_$a]);n_$e.name="item"+n_$a,this.addChild(n_$e)}this.initItems()}}),n_$M(0,n_$C,"strokeColors",function(){return this._strokeColors},function(n_$N){this._strokeColors!=n_$N&&(this._strokeColors=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"labelColors",function(){return this._labelColors},function(n_$N){this._labelColors!=n_$N&&(this._labelColors=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"labelStroke",function(){return this._labelStroke},function(n_$N){this._labelStroke!=n_$N&&(this._labelStroke=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"labelSize",function(){return this._labelSize},function(n_$N){this._labelSize!=n_$N&&(this._labelSize=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"stateNum",function(){return this._stateNum},function(n_$N){this._stateNum!=n_$N&&(this._stateNum=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"labelBold",function(){return this._labelBold},function(n_$N){this._labelBold!=n_$N&&(this._labelBold=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"labelFont",function(){return this._labelFont},function(n_$N){this._labelFont!=n_$N&&(this._labelFont=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"labelPadding",function(){return this._labelPadding},function(n_$N){this._labelPadding!=n_$N&&(this._labelPadding=n_$N,this._setLabelChanged())}),n_$M(0,n_$C,"direction",function(){return this._direction},function(n_$N){this._direction=n_$N,this._setLabelChanged()}),n_$M(0,n_$C,"space",function(){return this._space},function(n_$N){this._space=n_$N,this._setLabelChanged()}),n_$M(0,n_$C,"items",function(){return this._items}),n_$M(0,n_$C,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(n_$N){this.selectedIndex=this._items.indexOf(n_$N)}),n_$M(0,n_$C,"dataSource",n_$N.prototype._$get_dataSource,function(n_$N){"number"==typeof(this._dataSource=n_$N)&&Math.floor(n_$N)==n_$N||"string"==typeof n_$N?this.selectedIndex=parseInt(n_$N):n_$N instanceof Array?this.labels=n_$N.join(","):n_$f.superSet(n_$i,this,"dataSource",n_$N)}),n_$a}(n_$i),n_$h=function(n_$C){function n_$a(n_$N,n_$C){this._value=null,void 0===n_$C&&(n_$C=""),n_$a.__super.call(this,n_$N,n_$C)}n_$J(n_$a,"laya.ui.Radio",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._value=null},n_$N.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},n_$N.initialize=function(){n_$C.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},n_$N.onClick=function(n_$N){this.selected=!0},n_$M(0,n_$N,"value",function(){return null!=this._value?this._value:this.label},function(n_$N){this._value=n_$N}),n_$a}(n_$j),n_$U=function(n_$N){function n_$C(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,n_$C.__super.call(this),this.width=this.height=200}n_$J(n_$C,"laya.ui.Tree",n_$N);var n_$a=n_$C.prototype;return n_$f.imps(n_$a,{"laya.ui.IRender":!0}),n_$a.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),laya.ui.Component.prototype.destroy.call(this,n_$N),this._list&&this._list.destroy(n_$N),this._list=null,this._source=null,this._renderHandler=null},n_$a.createChildren=function(){this.addChild(this._list=new n_$b),this._list.renderHandler=n_$O.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},n_$a.onListChange=function(n_$N){this.event("change")},n_$a.getArray=function(){var n_$N,n_$C=[];for(var n_$a in this._source)n_$N=this._source[n_$a],this.getParentOpenStatus(n_$N)&&(n_$N.x=this._spaceLeft*this.getDepth(n_$N),n_$C.push(n_$N));return n_$C},n_$a.getDepth=function(n_$N,n_$C){return void 0===n_$C&&(n_$C=0),null==n_$N.nodeParent?n_$C:this.getDepth(n_$N.nodeParent,n_$C+1)},n_$a.getParentOpenStatus=function(n_$N){var n_$C=n_$N.nodeParent;return null==n_$C||!!n_$C.isOpen&&(null==n_$C.nodeParent||this.getParentOpenStatus(n_$C))},n_$a.renderItem=function(n_$N,n_$C){var n_$a=n_$N.dataSource;if(n_$a){n_$N.left=n_$a.x;var n_$u=n_$N.getChildByName("arrow");n_$u&&(n_$a.hasChild?(n_$u.visible=!0,n_$u.index=n_$a.isOpen?1:0,n_$u.tag=n_$C,n_$u.off("click",this,this.onArrowClick),n_$u.on("click",this,this.onArrowClick)):n_$u.visible=!1);var n_$e=n_$N.getChildByName("folder");n_$e&&(2==n_$e.clipY?n_$e.index=n_$a.isDirectory?0:1:n_$e.index=n_$a.isDirectory?n_$a.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([n_$N,n_$C])}},n_$a.onArrowClick=function(n_$N){var n_$C=n_$N.currentTarget.tag;this._list.array[n_$C].isOpen=!this._list.array[n_$C].isOpen,this.event("open"),this._list.array=this.getArray()},n_$a.setItemState=function(n_$N,n_$C){this._list.array[n_$N]&&(this._list.array[n_$N].isOpen=n_$C,this._list.array=this.getArray())},n_$a.fresh=function(){this._list.array=this.getArray(),this.repaint()},n_$a.parseXml=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J=n_$N.childNodes,n_$M=n_$J.length;if(!n_$u){n_$e={};var n_$n,n_$V=n_$N.attributes;for(var n_$A in n_$V){var n_$P=(n_$n=n_$V[n_$A]).nodeName,n_$$=n_$n.nodeValue;n_$e[n_$P]="true"==n_$$||"false"!=n_$$&&n_$$}n_$e.nodeParent=n_$a,0<n_$M&&(n_$e.isDirectory=!0),n_$e.hasChild=0<n_$M,n_$C.push(n_$e)}for(var n_$O=0;n_$O<n_$M;n_$O++){var n_$G=n_$J[n_$O];this.parseXml(n_$G,n_$C,n_$e,!1)}},n_$a.parseOpenStatus=function(n_$N,n_$C){for(var n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++){var n_$e=n_$C[n_$a];if(n_$e.isDirectory)for(var n_$J=0,n_$M=n_$N.length;n_$J<n_$M;n_$J++){var n_$n=n_$N[n_$J];if(n_$n.isDirectory&&this.isSameParent(n_$n,n_$e)&&n_$e.label==n_$n.label){n_$e.isOpen=n_$n.isOpen;break}}}},n_$a.isSameParent=function(n_$N,n_$C){return null==n_$N.nodeParent&&null==n_$C.nodeParent||null!=n_$N.nodeParent&&null!=n_$C.nodeParent&&(n_$N.nodeParent.label==n_$C.nodeParent.label&&this.isSameParent(n_$N.nodeParent,n_$C.nodeParent))},n_$a.filter=function(n_$N){if(Boolean(n_$N)){var n_$C=[];this.getFilterSource(this._source,n_$C,n_$N),this._list.array=n_$C}else this._list.array=this.getArray()},n_$a.getFilterSource=function(n_$N,n_$C,n_$a){var n_$u;for(var n_$e in n_$a=n_$a.toLocaleLowerCase(),n_$N)!(n_$u=n_$N[n_$e]).isDirectory&&-1<String(n_$u.label).toLowerCase().indexOf(n_$a)&&(n_$u.x=0,n_$C.push(n_$u)),n_$u.child&&0<n_$u.child.length&&this.getFilterSource(n_$u.child,n_$C,n_$a)},n_$M(0,n_$a,"spaceBottom",function(){return this._list.spaceY},function(n_$N){this._list.spaceY=n_$N}),n_$M(0,n_$a,"keepStatus",function(){return this._keepStatus},function(n_$N){this._keepStatus=n_$N}),n_$M(0,n_$a,"itemRender",function(){return this._list.itemRender},function(n_$N){this._list.itemRender=n_$N}),n_$M(0,n_$a,"array",function(){return this._list.array},function(n_$N){this._keepStatus&&this._list.array&&n_$N&&this.parseOpenStatus(this._list.array,n_$N),this._source=n_$N,this._list.array=this.getArray()}),n_$M(0,n_$a,"mouseHandler",function(){return this._list.mouseHandler},function(n_$N){this._list.mouseHandler=n_$N}),n_$M(0,n_$a,"dataSource",n_$N.prototype._$get_dataSource,function(n_$N){this._dataSource=n_$N,n_$f.superSet(n_$i,this,"dataSource",n_$N)}),n_$M(0,n_$a,"source",function(){return this._source}),n_$M(0,n_$a,"scrollBar",function(){return this._list.scrollBar}),n_$M(0,n_$a,"list",function(){return this._list}),n_$M(0,n_$a,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(n_$N){this._list.vScrollBarSkin=n_$N}),n_$M(0,n_$a,"renderHandler",function(){return this._renderHandler},function(n_$N){this._renderHandler=n_$N}),n_$M(0,n_$a,"selectedIndex",function(){return this._list.selectedIndex},function(n_$N){this._list.selectedIndex=n_$N}),n_$M(0,n_$a,"spaceLeft",function(){return this._spaceLeft},function(n_$N){this._spaceLeft=n_$N}),n_$M(0,n_$a,"selectedItem",function(){return this._list.selectedItem},function(n_$N){this._list.selectedItem=n_$N}),n_$M(0,n_$a,"width",n_$N.prototype._$get_width,function(n_$N){n_$f.superSet(n_$i,this,"width",n_$N),this._list.width=n_$N}),n_$M(0,n_$a,"height",n_$N.prototype._$get_height,function(n_$N){n_$f.superSet(n_$i,this,"height",n_$N),this._list.height=n_$N}),n_$M(0,n_$a,"xml",null,function(n_$N){var n_$C=[];this.parseXml(n_$N.childNodes[0],n_$C,null,!0),this.array=n_$C}),n_$M(0,n_$a,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),n_$C}(n_$i),n_$NN=function(n_$N){function n_$C(){this._items=null,this._selectedIndex=0,n_$C.__super.call(this),this._setIndexHandler=n_$O.create(this,this.setIndex,null,!1)}n_$J(n_$C,"laya.ui.ViewStack",n_$N);var n_$a=n_$C.prototype;return n_$f.imps(n_$a,{"laya.ui.IItem":!0}),n_$a.setItems=function(n_$N){this.removeChildren();for(var n_$C=0,n_$a=0,n_$u=n_$N.length;n_$a<n_$u;n_$a++){var n_$e=n_$N[n_$a];n_$e&&(n_$e.name="item"+n_$C,this.addChild(n_$e),n_$C++)}this.initItems()},n_$a.addItem=function(n_$N){n_$N.name="item"+this._items.length,this.addChild(n_$N),this.initItems()},n_$a.initItems=function(){this._items=[];for(var n_$N=0;n_$N<1e4;n_$N++){var n_$C=this.getChildByName("item"+n_$N);if(null==n_$C)break;this._items.push(n_$C),n_$C.visible=n_$N==this._selectedIndex}},n_$a.setSelect=function(n_$N,n_$C){this._items&&-1<n_$N&&n_$N<this._items.length&&(this._items[n_$N].visible=n_$C)},n_$a.setIndex=function(n_$N){this.selectedIndex=n_$N},n_$M(0,n_$a,"dataSource",n_$N.prototype._$get_dataSource,function(n_$N){if("number"==typeof(this._dataSource=n_$N)&&Math.floor(n_$N)==n_$N||"string"==typeof n_$N)this.selectedIndex=parseInt(n_$N);else for(var n_$C in this._dataSource)this.hasOwnProperty(n_$C)&&(this[n_$C]=this._dataSource[n_$C])}),n_$M(0,n_$a,"selectedIndex",function(){return this._selectedIndex},function(n_$N){this._selectedIndex!=n_$N&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=n_$N,this.setSelect(this._selectedIndex,!0))}),n_$M(0,n_$a,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(n_$N){this.selectedIndex=this._items.indexOf(n_$N)}),n_$M(0,n_$a,"items",function(){return this._items}),n_$M(0,n_$a,"setIndexHandler",function(){return this._setIndexHandler},function(n_$N){this._setIndexHandler=n_$N}),n_$C}(n_$i),n_$CN=function(n_$N){function n_$C(){n_$C.__super.call(this)}return n_$J(n_$C,"laya.ui.VScrollBar",n_$R),n_$C}(),n_$aN=function(n_$C){function n_$a(n_$N){this._bg=null,this._skin=null,n_$a.__super.call(this),void 0===n_$N&&(n_$N=""),this.text=n_$N,this.skin=this.skin}n_$J(n_$a,"laya.ui.TextInput",n_$C);var n_$N=n_$a.prototype;return n_$N.preinitialize=function(){this.mouseEnabled=!0},n_$N.destroy=function(n_$N){n_$x.clearCache(this,this._skin),void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._bg&&this._bg.destroy(),this._bg=null},n_$N.createChildren=function(){this.addChild(this._tf=new n_$G),this._tf.padding=n_$s.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},n_$N._onFocus=function(){this.event("focus",this)},n_$N._onBlur=function(){this.event("blur",this)},n_$N._onInput=function(){this.event("input",this)},n_$N._onEnter=function(){this.event("enter",this)},n_$N.initialize=function(){this.width=128,this.height=22},n_$N.select=function(){this._tf.select()},n_$N.setSelection=function(n_$N,n_$C){this._tf.setSelection(n_$N,n_$C)},n_$M(0,n_$N,"text",n_$C.prototype._$get_text,function(n_$N){this._tf.text!=n_$N&&(n_$N+="",this._tf.text=n_$N,this.event("change"))}),n_$M(0,n_$N,"bg",function(){return this._bg},function(n_$N){this.graphics=this._bg=n_$N}),n_$M(0,n_$N,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(n_$N){this._tf.inputElementYAdjuster=n_$N}),n_$M(0,n_$N,"multiline",function(){return this._tf.multiline},function(n_$N){this._tf.multiline=n_$N}),n_$M(0,n_$N,"skin",function(){return this._skin},function(n_$N){this._skin!=n_$N&&(n_$x.clearCache(this,this._skin),this._skin=n_$N,this._bg||(this.graphics=this._bg=new n_$d),n_$x.keepCache(this,this._skin),this._bg.source=n_$x.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),n_$M(0,n_$N,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(n_$N){this._bg||(this.graphics=this._bg=new n_$d),this._bg.sizeGrid=n_$q.fillArray(n_$s.defaultSizeGrid,n_$N,Number)}),n_$M(0,n_$N,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(n_$N){this._tf.inputElementXAdjuster=n_$N}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$Y,this,"width",n_$N),this._bg&&(this._bg.width=n_$N)}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$Y,this,"height",n_$N),this._bg&&(this._bg.height=n_$N)}),n_$M(0,n_$N,"editable",function(){return this._tf.editable},function(n_$N){this._tf.editable=n_$N}),n_$M(0,n_$N,"restrict",function(){return this._tf.restrict},function(n_$N){this._tf.restrict=n_$N}),n_$M(0,n_$N,"prompt",function(){return this._tf.prompt},function(n_$N){this._tf.prompt=n_$N}),n_$M(0,n_$N,"promptColor",function(){return this._tf.promptColor},function(n_$N){this._tf.promptColor=n_$N}),n_$M(0,n_$N,"maxChars",function(){return this._tf.maxChars},function(n_$N){this._tf.maxChars=n_$N}),n_$M(0,n_$N,"focus",function(){return this._tf.focus},function(n_$N){this._tf.focus=n_$N}),n_$M(0,n_$N,"type",function(){return this._tf.type},function(n_$N){this._tf.type=n_$N}),n_$M(0,n_$N,"asPassword",function(){return this._tf.asPassword},function(n_$N){this._tf.asPassword=n_$N}),n_$a}(n_$Y),n_$uN=function(n_$N){function n_$C(){n_$C.__super.call(this)}return n_$J(n_$C,"laya.ui.VSlider",n_$w),n_$C}(),n_$eN=function(n_$N){function n_$u(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,n_$u.__super.call(this)}n_$J(n_$u,"laya.ui.Dialog",n_$N);var n_$C=n_$u.prototype;return n_$C.initialize=function(){this.popupEffect=n_$u.manager.popupEffectHandler,this.closeEffect=n_$u.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},n_$C._dealDragArea=function(){var n_$N=this.getChildByName("drag");n_$N&&(this.dragArea=n_$N.x+","+n_$N.y+","+n_$N.width+","+n_$N.height,n_$N.removeSelf())},n_$C._onClick=function(n_$N){var n_$C=n_$N.target;if(n_$C)switch(n_$C.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(n_$C.name)}},n_$C.show=function(n_$N,n_$C){void 0===n_$N&&(n_$N=!1),void 0===n_$C&&(n_$C=!0),this._open(!1,n_$N,n_$C)},n_$C.popup=function(n_$N,n_$C){void 0===n_$N&&(n_$N=!1),void 0===n_$C&&(n_$C=!0),this._open(!0,n_$N,n_$C)},n_$C._open=function(n_$N,n_$C,n_$a){n_$u.manager.lock(!1),this.isModal=n_$N,n_$u.manager.open(this,n_$C,n_$a)},n_$C.onOpened=function(){},n_$C.close=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0),n_$u.manager.close(this,n_$N,n_$C)},n_$C.onClosed=function(n_$N){},n_$C._onMouseDown=function(n_$N){var n_$C=this.getMousePoint();this._dragArea.contains(n_$C.x,n_$C.y)?this.startDrag():this.stopDrag()},n_$M(0,n_$C,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(n_$N){if(n_$N){var n_$C=n_$q.fillArray([0,0,0,0],n_$N,Number);this._dragArea=new n_$g(n_$C[0],n_$C[1],n_$C[2],n_$C[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),n_$M(0,n_$C,"isPopup",function(){return null!=this.parent}),n_$M(0,n_$C,"zOrder",n_$N.prototype._$get_zOrder,function(n_$N){n_$f.superSet(n_$k,this,"zOrder",n_$N),n_$u.manager._checkMask()}),n_$M(1,n_$u,"manager",function(){return n_$u._manager=n_$u._manager||new n_$l},function(n_$N){n_$u._manager=n_$N}),n_$u.setLockView=function(n_$N){n_$u.manager.setLockView(n_$N)},n_$u.lock=function(n_$N){n_$u.manager.lock(n_$N)},n_$u.closeAll=function(){n_$u.manager.closeAll()},n_$u.getDialogsByGroup=function(n_$N){return n_$u.manager.getDialogsByGroup(n_$N)},n_$u.closeByGroup=function(n_$N){return n_$u.manager.closeByGroup(n_$N)},n_$u.CLOSE="close",n_$u.CANCEL="cancel",n_$u.SURE="sure",n_$u.NO="no",n_$u.OK="ok",n_$u.YES="yes",n_$u._manager=null,n_$u}(n_$k),n_$JN=function(n_$N){function n_$C(){n_$C.__super.call(this)}n_$J(n_$C,"laya.ui.HBox",n_$N);var n_$a=n_$C.prototype;return n_$a.sortItem=function(n_$N){n_$N&&n_$N.sort(function(n_$N,n_$C){return n_$N.x-n_$C.x})},n_$a.changeItems=function(){this._itemChanged=!1;for(var n_$N=[],n_$C=0,n_$a=0,n_$u=this.numChildren;n_$a<n_$u;n_$a++){var n_$e=this.getChildAt(n_$a);n_$e&&n_$e.layoutEnabled&&(n_$N.push(n_$e),n_$C=this._height?this._height:Math.max(n_$C,n_$e.height*n_$e.scaleY))}this.sortItem(n_$N);var n_$J=0;for(n_$a=0,n_$u=n_$N.length;n_$a<n_$u;n_$a++)(n_$e=n_$N[n_$a]).x=n_$J,n_$J+=n_$e.width*n_$e.scaleX+this._space,"top"==this._align?n_$e.y=0:"middle"==this._align?n_$e.y=.5*(n_$C-n_$e.height*n_$e.scaleY):"bottom"==this._align&&(n_$e.y=n_$C-n_$e.height*n_$e.scaleY);this.changeSize()},n_$M(0,n_$a,"height",n_$N.prototype._$get_height,function(n_$N){this._height!=n_$N&&(n_$f.superSet(n_$p,this,"height",n_$N),this.callLater(this.changeItems))}),n_$C.NONE="none",n_$C.TOP="top",n_$C.MIDDLE="middle",n_$C.BOTTOM="bottom",n_$C}(n_$p),n_$MN=function(n_$N){function n_$C(){n_$C.__super.call(this)}n_$J(n_$C,"laya.ui.VBox",n_$N);var n_$a=n_$C.prototype;return n_$a.changeItems=function(){this._itemChanged=!1;for(var n_$N=[],n_$C=0,n_$a=0,n_$u=this.numChildren;n_$a<n_$u;n_$a++){var n_$e=this.getChildAt(n_$a);n_$e&&n_$e.layoutEnabled&&(n_$N.push(n_$e),n_$C=this._width?this._width:Math.max(n_$C,n_$e.width*n_$e.scaleX))}this.sortItem(n_$N);var n_$J=0;for(n_$a=0,n_$u=n_$N.length;n_$a<n_$u;n_$a++)(n_$e=n_$N[n_$a]).y=n_$J,n_$J+=n_$e.height*n_$e.scaleY+this._space,"left"==this._align?n_$e.x=0:"center"==this._align?n_$e.x=.5*(n_$C-n_$e.width*n_$e.scaleX):"right"==this._align&&(n_$e.x=n_$C-n_$e.width*n_$e.scaleX);this.changeSize()},n_$M(0,n_$a,"width",n_$N.prototype._$get_width,function(n_$N){this._width!=n_$N&&(n_$f.superSet(n_$p,this,"width",n_$N),this.callLater(this.changeItems))}),n_$C.NONE="none",n_$C.LEFT="left",n_$C.CENTER="center",n_$C.RIGHT="right",n_$C}(n_$p),n_$nN=function(n_$N){function n_$C(){n_$C.__super.call(this)}return n_$J(n_$C,"laya.ui.RadioGroup",n_$Z),n_$C.prototype.createItem=function(n_$N,n_$C){return new n_$h(n_$N,n_$C)},n_$C}(),n_$VN=function(n_$N){function n_$C(){n_$C.__super.call(this)}return n_$J(n_$C,"laya.ui.Tab",n_$Z),n_$C.prototype.createItem=function(n_$N,n_$C){return new n_$j(n_$N,n_$C)},n_$C}(),n_$AN=function(n_$C){function n_$a(n_$N){this._vScrollBar=null,this._hScrollBar=null,void 0===n_$N&&(n_$N=""),n_$a.__super.call(this,n_$N)}n_$J(n_$a,"laya.ui.TextArea",n_$C);var n_$N=n_$a.prototype;return n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},n_$N.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},n_$N.onVBarChanged=function(n_$N){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},n_$N.onHBarChanged=function(n_$N){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},n_$N.changeScroll=function(){var n_$N=this._vScrollBar&&0<this._tf.maxScrollY,n_$C=this._hScrollBar&&0<this._tf.maxScrollX,n_$a=n_$N?this._width-this._vScrollBar.width:this._width,n_$u=n_$C?this._height-this._hScrollBar.height:this._height,n_$e=this._tf.padding||n_$s.labelPadding;this._tf.width=n_$a,this._tf.height=n_$u,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-n_$e[2],this._vScrollBar.y=n_$e[1],this._vScrollBar.height=this._height-(n_$C?this._hScrollBar.height:0)-n_$e[1]-n_$e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=n_$u/Math.max(this._tf.textHeight,n_$u),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=n_$N),this._hScrollBar&&(this._hScrollBar.x=n_$e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-n_$e[3],this._hScrollBar.width=this._width-(n_$N?this._vScrollBar.width:0)-n_$e[0]-n_$e[2],this._hScrollBar.scrollSize=Math.max(.033*n_$a,1),this._hScrollBar.thumbPercent=n_$a/Math.max(this._tf.textWidth,n_$a),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=n_$C)},n_$N.scrollTo=function(n_$N){this.commitMeasure(),this._tf.scrollY=n_$N},n_$M(0,n_$N,"scrollY",function(){return this._tf.scrollY}),n_$M(0,n_$N,"width",n_$C.prototype._$get_width,function(n_$N){n_$f.superSet(n_$aN,this,"width",n_$N),this.callLater(this.changeScroll)}),n_$M(0,n_$N,"hScrollBar",function(){return this._hScrollBar}),n_$M(0,n_$N,"height",n_$C.prototype._$get_height,function(n_$N){n_$f.superSet(n_$aN,this,"height",n_$N),this.callLater(this.changeScroll)}),n_$M(0,n_$N,"maxScrollX",function(){return this._tf.maxScrollX}),n_$M(0,n_$N,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(n_$N){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new n_$CN),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=n_$N}),n_$M(0,n_$N,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(n_$N){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new n_$o),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=n_$N}),n_$M(0,n_$N,"vScrollBar",function(){return this._vScrollBar}),n_$M(0,n_$N,"maxScrollY",function(){return this._tf.maxScrollY}),n_$M(0,n_$N,"scrollX",function(){return this._tf.scrollX}),n_$a}(n_$aN);!function(n_$N){function n_$C(){this._uiView=null,this.isCloseOther=!1,n_$C.__super.call(this)}n_$J(n_$C,"laya.ui.AsynDialog",n_$eN);var n_$a=n_$C.prototype;n_$a.createView=function(n_$N){this._uiView=n_$N},n_$a._open=function(n_$N,n_$C,n_$a){this.isModal=n_$N,this.isCloseOther=n_$C,n_$eN.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},n_$a.onCreated=function(){this.createUI(),this.onOpen()},n_$a.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},n_$a.onOpen=function(){n_$eN.manager.open(this,this.isCloseOther),n_$eN.manager.lock(!1)},n_$a.close=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0),n_$eN.manager.close(this),this.onClose()},n_$a.onClose=function(){},n_$a.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),laya.ui.View.prototype.destroy.call(this,n_$N),this._uiView=null,this.onDestroy()},n_$a.onDestroy=function(){}}();n_$f.__init([n_$k])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(n_$N,n_$C){"use strict";for(var n_$a in Object.defineProperty(n_$C,"__esModule",{value:!0}),Laya){var n_$u=Laya[n_$a];n_$u&&n_$u.__isclass&&(n_$C[n_$a]=n_$u)}}),function(n_$O,n_$N,n_$X){n_$X.un,n_$X.uns;var n_$$=n_$X.static,n_$G=n_$X.class,n_$z=n_$X.getset,n_$u=n_$X.__newvec,n_$v=laya.maths.Arith,n_$M=laya.webgl.atlas.AtlasResourceManager,n_$a=laya.webgl.shader.BaseShader,n_$Q=laya.utils.Browser,n_$n=laya.webgl.utils.Buffer,n_$r=laya.utils.Byte,n_$e=laya.utils.ClassUtils,n_$V=n_$X.Config,n_$J=(laya.events.Event,laya.events.EventDispatcher),n_$s=laya.utils.Handler,n_$g=laya.net.Loader,n_$C=laya.net.LoaderManager,n_$A=(laya.maths.MathUtil,laya.display.Node),n_$f=laya.renders.Render,n_$P=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),n_$t=laya.resource.Resource,n_$x=laya.utils.RunDriver,n_$W=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),n_$c=laya.display.Sprite,n_$E=laya.utils.Stat,n_$F=laya.utils.StringKey,n_$q=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),n_$D=laya.utils.Utils,n_$_=laya.webgl.WebGL,n_$d=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;n_$X.interface("laya.d3.core.IClone"),n_$X.interface("laya.d3.graphics.IVertex"),n_$X.interface("laya.d3.core.render.IUpdate"),n_$X.interface("laya.d3.core.scene.ITreeNode"),n_$X.interface("laya.d3.core.render.IRenderable");(function(){function n_$j(){}n_$G(n_$j,"laya.d3.animation.AnimationClipParser01"),n_$j.READ_DATA=function(){n_$j._DATA.offset=n_$j._reader.getUint32(),n_$j._DATA.size=n_$j._reader.getUint32()},n_$j.READ_BLOCK=function(){for(var n_$N=n_$j._BLOCK.count=n_$j._reader.getUint16(),n_$C=n_$j._BLOCK.blockStarts=[],n_$a=n_$j._BLOCK.blockLengths=[],n_$u=0;n_$u<n_$N;n_$u++)n_$C.push(n_$j._reader.getUint32()),n_$a.push(n_$j._reader.getUint32())},n_$j.READ_STRINGS=function(){var n_$N=n_$j._reader.getUint32(),n_$C=n_$j._reader.getUint16(),n_$a=n_$j._reader.pos;n_$j._reader.pos=n_$N+n_$j._DATA.offset;for(var n_$u=0;n_$u<n_$C;n_$u++)n_$j._strings[n_$u]=n_$j._reader.readUTFString();n_$j._reader.pos=n_$a},n_$j.parse=function(n_$N,n_$C){n_$j._animationClip=n_$N;(n_$j._reader=n_$C).__getBuffer();n_$j.READ_DATA(),n_$j.READ_BLOCK(),n_$j.READ_STRINGS();for(var n_$a=0,n_$u=n_$j._BLOCK.count;n_$a<n_$u;n_$a++){var n_$e=n_$C.getUint16(),n_$J=n_$j._strings[n_$e],n_$M=n_$j["READ_"+n_$J];if(null==n_$M)throw new Error("model file err,no this function:"+n_$e+" "+n_$J);n_$M.call()}},n_$j.READ_ANIMATIONS=function(){var n_$N,n_$C=0,n_$a=0,n_$u=n_$j._reader,n_$e=n_$u.__getBuffer(),n_$J=[],n_$M=n_$u.getUint8();for(n_$J.length=n_$M,n_$C=0;n_$C<n_$M;n_$C++)n_$J[n_$C]=n_$u.getUint16();var n_$n=[],n_$V=n_$u.getUint16();for(n_$n.length=n_$V,n_$C=0;n_$C<n_$V;n_$C++)n_$n[n_$C]=n_$u.getFloat32();var n_$A=n_$j._animationClip;n_$A.name=n_$j._strings[n_$u.getUint16()];var n_$P=n_$A._duration=n_$u.getFloat32();n_$A.islooping=!!n_$u.getByte(),n_$A._frameRate=n_$u.getInt16();var n_$$=n_$u.getInt16(),n_$O=n_$A._nodes=new Array;n_$O.length=n_$$,(n_$A._publicClipDatas=[]).length=n_$$;var n_$G=n_$A._nodesMap={},n_$z=0,n_$f=0;for(n_$C=0;n_$C<n_$$;n_$C++){n_$N=n_$O[n_$C]=new n_$K;var n_$t=n_$u.getUint16(),n_$g=n_$N.path=[];for(n_$g.length=n_$t,n_$a=0;n_$a<n_$t;n_$a++)n_$g[n_$a]=n_$j._strings[n_$u.getUint16()];var n_$x=n_$g.join("/"),n_$W=n_$G[n_$x];n_$W||(n_$G[n_$x]=n_$W=[]),n_$W.push(n_$N);var n_$v=n_$u.getInt16();-1!==n_$v&&(n_$N.componentType=n_$j._strings[n_$v]);var n_$X=n_$B._propertyIndexDic[n_$j._strings[n_$u.getUint16()]];if(null==n_$X)throw new Error("AnimationClipParser01:unknown property name.");var n_$r=n_$X<4,n_$c=!n_$r||n_$r&&""===n_$g[0];(n_$N._cacheProperty=n_$c)?n_$z++:n_$f++,n_$N.propertyNameID=n_$X;var n_$E=n_$J[n_$u.getUint8()];n_$N.keyFrameWidth=n_$E/4;var n_$F=n_$N.keyFrames=[],n_$D=n_$F.length=n_$u.getUint16(),n_$s=null,n_$q=NaN;for(n_$a=0;n_$a<n_$D;n_$a++){var n_$_=n_$F[n_$a]=new n_$Y;n_$q=n_$_.startTime=n_$n[n_$u.getUint16()];var n_$d=n_$u.pos;n_$_.inTangent=new Float32Array(n_$e.slice(n_$d,n_$d+n_$E)),n_$u.pos+=n_$E,n_$d=n_$u.pos,n_$_.outTangent=new Float32Array(n_$e.slice(n_$d,n_$d+n_$E)),n_$u.pos+=n_$E,n_$d=n_$u.pos,n_$_.data=new Float32Array(n_$e.slice(n_$d,n_$d+n_$E)),n_$u.pos+=n_$E,n_$s&&(n_$s.next=n_$_,n_$s.duration=n_$q-n_$s.startTime),n_$s=n_$_}n_$_.next=null,n_$_.duration=n_$P-n_$q}var n_$Q=n_$A._nodeToCachePropertyMap=new Int32Array(n_$$),n_$l=n_$A._cachePropertyMap=new Int32Array(n_$z),n_$i=n_$A._unCachePropertyMap=new Int32Array(n_$f);for(n_$z=n_$f=0,n_$C=0;n_$C<n_$$;n_$C++)(n_$N=n_$O[n_$C])._cacheProperty?(n_$Q[n_$C]=n_$z,n_$l[n_$z++]=n_$C):n_$i[n_$f++]=n_$C},n_$j._animationClip=null,n_$j._reader=null,n_$j._strings=[],n_$$(n_$j,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function n_$R(){}n_$G(n_$R,"laya.d3.animation.AnimationClipParser02"),n_$R.READ_DATA=function(){n_$R._DATA.offset=n_$R._reader.getUint32(),n_$R._DATA.size=n_$R._reader.getUint32()},n_$R.READ_BLOCK=function(){for(var n_$N=n_$R._BLOCK.count=n_$R._reader.getUint16(),n_$C=n_$R._BLOCK.blockStarts=[],n_$a=n_$R._BLOCK.blockLengths=[],n_$u=0;n_$u<n_$N;n_$u++)n_$C.push(n_$R._reader.getUint32()),n_$a.push(n_$R._reader.getUint32())},n_$R.READ_STRINGS=function(){var n_$N=n_$R._reader.getUint32(),n_$C=n_$R._reader.getUint16(),n_$a=n_$R._reader.pos;n_$R._reader.pos=n_$N+n_$R._DATA.offset;for(var n_$u=0;n_$u<n_$C;n_$u++)n_$R._strings[n_$u]=n_$R._reader.readUTFString();n_$R._reader.pos=n_$a},n_$R.parse=function(n_$N,n_$C){n_$R._animationClip=n_$N;(n_$R._reader=n_$C).__getBuffer();n_$R.READ_DATA(),n_$R.READ_BLOCK(),n_$R.READ_STRINGS();for(var n_$a=0,n_$u=n_$R._BLOCK.count;n_$a<n_$u;n_$a++){var n_$e=n_$C.getUint16(),n_$J=n_$R._strings[n_$e],n_$M=n_$R["READ_"+n_$J];if(null==n_$M)throw new Error("model file err,no this function:"+n_$e+" "+n_$J);n_$M.call()}},n_$R.READ_ANIMATIONS=function(){var n_$N,n_$C=0,n_$a=0,n_$u=n_$R._reader,n_$e=n_$u.__getBuffer(),n_$J=[],n_$M=n_$u.getUint8();for(n_$J.length=n_$M,n_$C=0;n_$C<n_$M;n_$C++)n_$J[n_$C]=n_$u.getUint16();var n_$n=[],n_$V=n_$u.getUint16();for(n_$n.length=n_$V,n_$C=0;n_$C<n_$V;n_$C++)n_$n[n_$C]=n_$u.getFloat32();var n_$A=n_$R._animationClip;n_$A.name=n_$R._strings[n_$u.getUint16()];var n_$P=n_$A._duration=n_$u.getFloat32();n_$A.islooping=!!n_$u.getByte(),n_$A._frameRate=n_$u.getInt16();var n_$$=n_$u.getInt16(),n_$O=n_$A._nodes=new Array;n_$O.length=n_$$,(n_$A._publicClipDatas=[]).length=n_$$;var n_$G=n_$A._nodesMap={},n_$z=0,n_$f=0;for(n_$C=0;n_$C<n_$$;n_$C++){n_$N=n_$O[n_$C]=new n_$K;var n_$t=n_$u.getUint16(),n_$g=n_$N.path=[];for(n_$g.length=n_$t,n_$a=0;n_$a<n_$t;n_$a++)n_$g[n_$a]=n_$R._strings[n_$u.getUint16()];var n_$x=n_$g.join("/"),n_$W=n_$G[n_$x];n_$W||(n_$G[n_$x]=n_$W=[]),n_$W.push(n_$N);var n_$v=n_$u.getInt16();-1!==n_$v&&(n_$N.componentType=n_$R._strings[n_$v]);var n_$X=n_$B._propertyIndexDic[n_$R._strings[n_$u.getUint16()]];if(null==n_$X)throw new Error("AnimationClipParser02:unknown property name.");var n_$r=n_$X<4,n_$c=!n_$r||n_$r&&""===n_$g[0];(n_$N._cacheProperty=n_$c)?n_$z++:n_$f++,n_$N.propertyNameID=n_$X;var n_$E=n_$J[n_$u.getUint8()];n_$N.keyFrameWidth=n_$E/4;var n_$F=n_$N.keyFrames=[],n_$D=n_$F.length=n_$u.getUint16(),n_$s=null,n_$q=NaN;for(n_$a=0;n_$a<n_$D;n_$a++){var n_$_=n_$F[n_$a]=new n_$Y;n_$q=n_$_.startTime=n_$n[n_$u.getUint16()];var n_$d=n_$u.pos;n_$_.inTangent=new Float32Array(n_$e.slice(n_$d,n_$d+n_$E)),n_$u.pos+=n_$E,n_$d=n_$u.pos,n_$_.outTangent=new Float32Array(n_$e.slice(n_$d,n_$d+n_$E)),n_$u.pos+=n_$E,n_$d=n_$u.pos,n_$_.data=new Float32Array(n_$e.slice(n_$d,n_$d+n_$E)),n_$u.pos+=n_$E,n_$s&&(n_$s.next=n_$_,n_$s.duration=n_$q-n_$s.startTime),n_$s=n_$_}n_$_.next=null,n_$_.duration=n_$P-n_$q}var n_$Q=n_$u.getUint16();for(n_$C=0;n_$C<n_$Q;n_$C++){var n_$l,n_$i=new n_$w;n_$i.time=n_$u.getFloat32(),n_$i.eventName=n_$R._strings[n_$u.getUint16()];var n_$j=n_$u.getUint16();for(0<n_$j&&(n_$i.params=n_$l=[]),n_$a=0;n_$a<n_$j;n_$a++){switch(n_$u.getByte()){case 0:n_$l.push(!!n_$u.getByte());break;case 1:n_$l.push(n_$u.getInt32());break;case 2:n_$l.push(n_$u.getFloat32());break;case 3:n_$l.push(n_$R._strings[n_$u.getUint16()]);break;default:throw new Error("unknown type.")}}n_$A.addEvent(n_$i)}var n_$y=n_$A._nodeToCachePropertyMap=new Int32Array(n_$$),n_$T=n_$A._cachePropertyMap=new Int32Array(n_$z),n_$L=n_$A._unCachePropertyMap=new Int32Array(n_$f);for(n_$z=n_$f=0,n_$C=0;n_$C<n_$$;n_$C++)(n_$N=n_$O[n_$C])._cacheProperty?(n_$y[n_$C]=n_$z,n_$T[n_$z++]=n_$C):n_$L[n_$f++]=n_$C},n_$R._animationClip=null,n_$R._reader=null,n_$R._strings=[],n_$$(n_$R,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var n_$w=function(){function n_$N(){this.time=NaN,this.eventName=null,this.params=null}return n_$G(n_$N,"laya.d3.animation.AnimationEvent"),n_$N}(),n_$B=function(){function n_$u(){this._childs=[],this.transform=new n_$xC(this)}n_$G(n_$u,"laya.d3.animation.AnimationNode");var n_$N=n_$u.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.addChild=function(n_$N){n_$N._parent=this,n_$N.transform.setParent(this.transform),this._childs.push(n_$N)},n_$N.removeChild=function(n_$N){var n_$C=this._childs.indexOf(n_$N);-1!==n_$C&&this._childs.splice(n_$C,1)},n_$N.getChildByName=function(n_$N){for(var n_$C=0,n_$a=this._childs.length;n_$C<n_$a;n_$C++){var n_$u=this._childs[n_$C];if(n_$u.name===n_$N)return n_$u}return null},n_$N.getChildByIndex=function(n_$N){return this._childs[n_$N]},n_$N.getChildCount=function(){return this._childs.length},n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C.name=this.name;for(var n_$a=0,n_$u=this._childs.length;n_$a<n_$u;n_$a++){var n_$e=this._childs[n_$a],n_$J=n_$e.clone();n_$C.addChild(n_$J);var n_$M=n_$e.transform,n_$n=n_$J.transform;n_$n.setLocalPosition(n_$M.getLocalPosition()),n_$n.setLocalRotation(n_$M.getLocalRotation()),n_$n.setLocalScale(n_$M.getLocalScale()),n_$n._localRotationEuler=n_$M._localRotationEuler,n_$n._setWorldMatrixIgnoreUpdate(n_$M.getWorldMatrix())}},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$u.__init__=function(){n_$u.registerAnimationNodeProperty("localPosition",n_$u._getLocalPosition,n_$u._setLocalPosition),n_$u.registerAnimationNodeProperty("localRotation",n_$u._getLocalRotation,n_$u._setLocalRotation),n_$u.registerAnimationNodeProperty("localScale",n_$u._getLocalScale,n_$u._setLocalScale),n_$u.registerAnimationNodeProperty("localRotationEuler",n_$u._getLocalRotationEuler,n_$u._setLocalRotationEuler),n_$u.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",n_$u._getParticleRenderSharedMaterialTintColor,n_$u._setParticleRenderSharedMaterialTintColor),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",n_$u._getMeshRenderSharedMaterialTilingOffset,n_$u._setMeshRenderSharedMaterialTilingOffset),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",n_$u._getMeshRenderSharedMaterialAlbedo,n_$u._setMeshRenderSharedMaterialAlbedo),n_$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",n_$u._getSkinnedMeshRenderSharedMaterialTilingOffset,n_$u._setSkinnedMeshRenderSharedMaterialTilingOffset),n_$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",n_$u._getSkinnedMeshRenderSharedMaterialAlbedo,n_$u._setSkinnedMeshRenderSharedMaterialAlbedo),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",n_$u._getMeshRenderSharedMaterialAlbedo,n_$u._setMeshRenderSharedMaterialAlbedo),n_$u.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",n_$u._getSkinnedMeshRenderSharedMaterialAlbedo,n_$u._setSkinnedMeshRenderSharedMaterialAlbedo),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",n_$u._getMeshRenderSharedMaterialIntensity,n_$u._setMeshRenderSharedMaterialIntensity),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",n_$u._getMeshRenderSharedMaterialAlpha,n_$u._setMeshRenderSharedMaterialAlpha),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",n_$u._getMeshRenderSharedMaterialAlphaColor,n_$u._setMeshRenderSharedMaterialAlphaColor),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",n_$u._getMeshRenderSharedMaterialBaseColor,n_$u._setMeshRenderSharedMaterialBaseColor),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",n_$u._getMeshRenderSharedMaterialDissolve,n_$u._setMeshRenderSharedMaterialDissolve),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",n_$u._getMeshRenderSharedMaterialDissolveSpeed,n_$u._setMeshRenderSharedMaterialDissolveSpeed),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",n_$u._getMeshRenderSharedMaterialMMultiplier,n_$u._setMeshRenderSharedMaterialMMultiplier),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",n_$u._getMeshRenderSharedMaterialBaseScrollSpeedX,n_$u._setMeshRenderSharedMaterialBaseScrollSpeedX),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",n_$u._getMeshRenderSharedMaterialBaseScrollSpeedY,n_$u._setMeshRenderSharedMaterialBaseScrollSpeedY),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",n_$u._getMeshRenderSharedMaterialSecondScrollSpeedX,n_$u._setMeshRenderSharedMaterialSecondScrollSpeedX),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",n_$u._getMeshRenderSharedMaterialSecondScrollSpeedY,n_$u._setMeshRenderSharedMaterialSecondScrollSpeedY),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",n_$u._getMeshRenderSharedMaterialDetailTilingOffset,n_$u._setMeshRenderSharedMaterialDetailTilingOffset),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",n_$u._getMeshRenderSharedMaterialDissolveTilingOffset,n_$u._setMeshRenderSharedMaterialDissolveTilingOffset),n_$u.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",n_$u._getMeshRenderSharedMaterialMaskTilingOffset,n_$u._setMeshRenderSharedMaterialMaskTilingOffset)},n_$u.registerAnimationNodeProperty=function(n_$N,n_$C,n_$a){if(n_$u._propertyIndexDic[n_$N])throw new Error("AnimationNode: this propertyName has registered.");n_$u._propertyIndexDic[n_$N]=n_$u._propertyIDCounter,n_$u._propertyGetFuncs[n_$u._propertyIDCounter]=n_$C,n_$u._propertySetFuncs[n_$u._propertyIDCounter]=n_$a,n_$u._propertyIDCounter++},n_$u._getLocalPosition=function(n_$N,n_$C){return n_$N?n_$N.transform.getLocalPosition():n_$C._transform.localPosition.elements},n_$u._setLocalPosition=function(n_$N,n_$C,n_$a){if(n_$N)n_$N.transform.setLocalPosition(n_$a);else{var n_$u=n_$C._transform,n_$e=n_$u.localPosition;n_$e.elements=n_$a,n_$u.localPosition=n_$e}},n_$u._getLocalRotation=function(n_$N,n_$C){return n_$N?n_$N.transform.getLocalRotation():n_$C._transform.localRotation.elements},n_$u._setLocalRotation=function(n_$N,n_$C,n_$a){if(n_$N)n_$N.transform.setLocalRotation(n_$a);else{var n_$u=n_$C._transform,n_$e=n_$u.localRotation;n_$e.elements=n_$a,n_$u.localRotation=n_$e}},n_$u._getLocalScale=function(n_$N,n_$C){return n_$N?n_$N.transform.getLocalScale():n_$C._transform.localScale.elements},n_$u._setLocalScale=function(n_$N,n_$C,n_$a){if(n_$N)n_$N.transform.setLocalScale(n_$a);else{var n_$u=n_$C._transform,n_$e=n_$u.localScale;n_$e.elements=n_$a,n_$u.localScale=n_$e}},n_$u._getLocalRotationEuler=function(n_$N,n_$C){return n_$N?n_$N.transform.getLocalRotationEuler():n_$C._transform.localRotationEuler.elements},n_$u._setLocalRotationEuler=function(n_$N,n_$C,n_$a){if(n_$N)n_$N.transform.setLocalRotationEuler(n_$a);else{var n_$u=n_$C._transform,n_$e=n_$u.localRotationEuler;n_$e.elements=n_$a,n_$u.localRotationEuler=n_$e}},n_$u._getMeshRenderSharedMaterialTilingOffset=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return n_$C.meshRender.sharedMaterial.tilingOffset.elements},n_$u._setMeshRenderSharedMaterialTilingOffset=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.meshRender.material).tilingOffset).elements=n_$a,n_$u.tilingOffset=n_$e)}else(n_$e=(n_$u=n_$C.meshRender.material).tilingOffset).elements=n_$a,n_$u.tilingOffset=n_$e},n_$u._getMeshRenderSharedMaterialAlbedo=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.albedoColor.elements:null}return n_$C.meshRender.sharedMaterial.albedoColor.elements},n_$u._setMeshRenderSharedMaterialAlbedo=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.meshRender.material).albedoColor).elements=n_$a,n_$u.albedoColor=n_$e)}else(n_$e=(n_$u=n_$C.meshRender.material).albedoColor).elements=n_$a,n_$u.albedoColor=n_$e},n_$u._getSkinnedMeshRenderSharedMaterialTilingOffset=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return n_$C.skinnedMeshRender.sharedMaterial.tilingOffset.elements},n_$u._setSkinnedMeshRenderSharedMaterialTilingOffset=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.skinnedMeshRender.material).tilingOffset).elements=n_$a,n_$u.tilingOffset=n_$e)}else(n_$e=(n_$u=n_$C.skinnedMeshRender.material).tilingOffset).elements=n_$a,n_$u.tilingOffset=n_$e},n_$u._getSkinnedMeshRenderSharedMaterialAlbedo=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return n_$C.skinnedMeshRender.sharedMaterial.albedoColor.elements},n_$u._setSkinnedMeshRenderSharedMaterialAlbedo=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.skinnedMeshRender.material).albedoColor).elements=n_$a,n_$u.albedoColor=n_$e)}else(n_$e=(n_$u=n_$C.skinnedMeshRender.material).albedoColor).elements=n_$a,n_$u.albedoColor=n_$e},n_$u._getParticleRenderSharedMaterialTintColor=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.particleRender.sharedMaterial.tintColor.elements:null}return n_$C.particleRender.sharedMaterial.tintColor.elements},n_$u._setParticleRenderSharedMaterialTintColor=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.particleRender.material).tintColor).elements=n_$a,n_$u.tintColor=n_$e)}else(n_$e=(n_$u=n_$C.particleRender.material).tintColor).elements=n_$a,n_$u.tintColor=n_$e},n_$u._getMeshRenderSharedMaterialAlphaColor=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.alphaColor.elements:null}return n_$C.meshRender.sharedMaterial.alphaColor.elements},n_$u._setMeshRenderSharedMaterialAlphaColor=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.meshRender.material).alphaColor).elements=n_$a,n_$u.alphaColor=n_$e)}else(n_$e=(n_$u=n_$C.meshRender.material).alphaColor).elements=n_$a,n_$u.alphaColor=n_$e},n_$u._getMeshRenderSharedMaterialBaseColor=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.baseColor.elements:null}return n_$C.meshRender.sharedMaterial.baseColor.elements},n_$u._setMeshRenderSharedMaterialBaseColor=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.meshRender.material).baseColor).elements=n_$a,n_$u.baseColor=n_$e)}else(n_$e=(n_$u=n_$C.meshRender.material).baseColor).elements=n_$a,n_$u.baseColor=n_$e},n_$u._getMeshRenderSharedMaterialDissolve=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.dissolve:0}return n_$C.meshRender.sharedMaterial.dissolve},n_$u._setMeshRenderSharedMaterialDissolve=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.dissolve=n_$a[0])}else n_$C.meshRender.material.dissolve=n_$a[0]},n_$u._getMeshRenderSharedMaterialDissolveSpeed=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.dissolveSpeed:0}return n_$C.meshRender.sharedMaterial.dissolveSpeed},n_$u._setMeshRenderSharedMaterialDissolveSpeed=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.dissolveSpeed=n_$a[0])}else n_$C.meshRender.material.dissolveSpeed=n_$a[0]},n_$u._getMeshRenderSharedMaterialMMultiplier=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.mMultiplier:0}return n_$C.meshRender.sharedMaterial.mMultiplier},n_$u._setMeshRenderSharedMaterialMMultiplier=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.mMultiplier=n_$a[0])}else n_$C.meshRender.material.mMultiplier=n_$a[0]},n_$u._getMeshRenderSharedMaterialBaseScrollSpeedX=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return n_$C.meshRender.sharedMaterial.baseScrollSpeedX},n_$u._setMeshRenderSharedMaterialBaseScrollSpeedX=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.baseScrollSpeedX=n_$a[0])}else n_$C.meshRender.material.baseScrollSpeedX=n_$a[0]},n_$u._getMeshRenderSharedMaterialBaseScrollSpeedY=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return n_$C.meshRender.sharedMaterial.baseScrollSpeedY},n_$u._setMeshRenderSharedMaterialBaseScrollSpeedY=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.baseScrollSpeedY=n_$a[0])}else n_$C.meshRender.material.baseScrollSpeedY=n_$a[0]},n_$u._getMeshRenderSharedMaterialSecondScrollSpeedX=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return n_$C.meshRender.sharedMaterial.secondScrollSpeedX},n_$u._setMeshRenderSharedMaterialSecondScrollSpeedX=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.secondScrollSpeedX=n_$a[0])}else n_$C.meshRender.material.secondScrollSpeedX=n_$a[0]},n_$u._getMeshRenderSharedMaterialSecondScrollSpeedY=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return n_$C.meshRender.sharedMaterial.secondScrollSpeedY},n_$u._setMeshRenderSharedMaterialSecondScrollSpeedY=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.secondScrollSpeedY=n_$a[0])}else n_$C.meshRender.material.secondScrollSpeedY=n_$a[0]},n_$u._getMeshRenderSharedMaterialAlpha=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.alpha:0}return n_$C.meshRender.sharedMaterial.alpha},n_$u._setMeshRenderSharedMaterialAlpha=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.alpha=n_$a[0])}else n_$C.meshRender.material.alpha=n_$a[0]},n_$u._getMeshRenderSharedMaterialIntensity=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.intensity:0}return n_$C.meshRender.sharedMaterial.intensity},n_$u._setMeshRenderSharedMaterialIntensity=function(n_$N,n_$C,n_$a){if(n_$N){var n_$u=n_$N.transform._entity;n_$u&&(n_$u.owner.meshRender.material.intensity=n_$a[0])}else n_$C.meshRender.material.intensity=n_$a[0]},n_$u._getMeshRenderSharedMaterialDetailTilingOffset=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return n_$C.meshRender.sharedMaterial.detailTilingOffset.elements},n_$u._setMeshRenderSharedMaterialDetailTilingOffset=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.meshRender.material).detailTilingOffset).elements=n_$a,n_$u.detailTilingOffset=n_$e)}else(n_$e=(n_$u=n_$C.meshRender.material).detailTilingOffset).elements=n_$a,n_$u.detailTilingOffset=n_$e},n_$u._getMeshRenderSharedMaterialDissolveTilingOffset=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return n_$C.meshRender.sharedMaterial.dissolveTilingOffset.elements},n_$u._setMeshRenderSharedMaterialDissolveTilingOffset=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.meshRender.material).dissolveTilingOffset).elements=n_$a,n_$u.dissolveTilingOffset=n_$e)}else(n_$e=(n_$u=n_$C.meshRender.material).dissolveTilingOffset).elements=n_$a,n_$u.dissolveTilingOffset=n_$e},n_$u._getMeshRenderSharedMaterialMaskTilingOffset=function(n_$N,n_$C){if(n_$N){var n_$a=n_$N.transform._entity;return n_$a?n_$a.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return n_$C.meshRender.sharedMaterial.maskTilingOffset.elements},n_$u._setMeshRenderSharedMaterialMaskTilingOffset=function(n_$N,n_$C,n_$a){var n_$u,n_$e;if(n_$N){var n_$J=n_$N.transform._entity;n_$J&&((n_$e=(n_$u=n_$J.owner.meshRender.material).maskTilingOffset).elements=n_$a,n_$u.maskTilingOffset=n_$e)}else(n_$e=(n_$u=n_$C.meshRender.material).maskTilingOffset).elements=n_$a,n_$u.maskTilingOffset=n_$e},n_$u._propertyIDCounter=0,n_$u._propertyIndexDic={},n_$u._propertySetFuncs=[],n_$u._propertyGetFuncs=[],n_$u}(),n_$Y=function(){function n_$N(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return n_$G(n_$N,"laya.d3.animation.Keyframe"),n_$N}(),n_$K=function(){function n_$N(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return n_$G(n_$N,"laya.d3.animation.KeyframeNode"),n_$N}(),n_$l=(function(){function n_$N(){this._tempVector30=new n_$MC,this._tempVector31=new n_$MC,this._tempVector32=new n_$MC,this._a=new n_$MC,this._b=new n_$MC,this._c=new n_$MC,this._d=new n_$MC}n_$G(n_$N,"laya.d3.core.glitter.SplineCurvePositionVelocity");var n_$C=n_$N.prototype;n_$C.Init=function(n_$N,n_$C,n_$a,n_$u){n_$N.cloneTo(this._d),n_$C.cloneTo(this._c),n_$MC.scale(n_$N,2,this._a),n_$MC.scale(n_$a,2,this._tempVector30),n_$MC.subtract(this._a,this._tempVector30,this._a),n_$MC.add(this._a,n_$C,this._a),n_$MC.add(this._a,n_$u,this._a),n_$MC.scale(n_$a,3,this._b),n_$MC.scale(n_$N,3,this._tempVector30),n_$MC.subtract(this._b,this._tempVector30,this._b),n_$MC.subtract(this._b,n_$u,this._b),n_$MC.scale(n_$C,2,this._tempVector30),n_$MC.subtract(this._b,this._tempVector30,this._b)},n_$C.Slerp=function(n_$N,n_$C){n_$MC.scale(this._a,n_$N*n_$N*n_$N,this._tempVector30),n_$MC.scale(this._b,n_$N*n_$N,this._tempVector31),n_$MC.scale(this._c,n_$N,this._tempVector32),n_$MC.add(this._tempVector30,this._tempVector31,n_$C),n_$MC.add(n_$C,this._tempVector32,n_$C),n_$MC.add(n_$C,this._d,n_$C)}}(),function(){function n_$T(n_$N,n_$C,n_$a,n_$u){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=n_$N,this._h=n_$C,this._minHeight=n_$a,this._maxHeight=n_$u}n_$G(n_$T,"laya.d3.core.HeightMap");var n_$N=n_$T.prototype;n_$N._inBounds=function(n_$N,n_$C){return 0<=n_$N&&n_$N<this._h&&0<=n_$C&&n_$C<this._w},n_$N.getHeight=function(n_$N,n_$C){return this._inBounds(n_$N,n_$C)?this._datas[n_$N][n_$C]:NaN},n_$z(0,n_$N,"width",function(){return this._w}),n_$z(0,n_$N,"height",function(){return this._h}),n_$z(0,n_$N,"maxHeight",function(){return this._maxHeight}),n_$z(0,n_$N,"minHeight",function(){return this._minHeight}),n_$T.creatFromMesh=function(n_$N,n_$C,n_$a,n_$u){for(var n_$e=[],n_$J=[],n_$M=n_$N.getSubMeshCount(),n_$n=0;n_$n<n_$M;n_$n++){for(var n_$V=n_$N.getSubMesh(n_$n),n_$A=n_$V._getVertexBuffer(),n_$P=n_$A.getData(),n_$$=[],n_$O=0;n_$O<n_$P.length;n_$O+=n_$A.vertexDeclaration.vertexStride/4){var n_$G=new n_$MC(n_$P[n_$O+0],n_$P[n_$O+1],n_$P[n_$O+2]);n_$$.push(n_$G)}n_$e.push(n_$$);var n_$z=n_$V._getIndexBuffer();n_$J.push(n_$z.getData())}var n_$f=n_$N.boundingBox,n_$t=n_$f.min.x,n_$g=n_$f.min.z,n_$x=n_$f.max.x,n_$W=n_$f.max.z,n_$v=n_$f.min.y,n_$X=n_$f.max.y,n_$r=n_$x-n_$t,n_$c=n_$W-n_$g,n_$E=n_$u.elements[0]=n_$r/(n_$C-1),n_$F=n_$u.elements[1]=n_$c/(n_$a-1),n_$D=new n_$T(n_$C,n_$a,n_$v,n_$X),n_$s=n_$T._tempRay,n_$q=n_$s.direction.elements;n_$q[0]=0,n_$q[1]=-1,n_$q[2]=0;var n_$_=n_$X+.1;n_$s.origin.elements[1]=n_$_;for(var n_$d=0;n_$d<n_$a;n_$d++){var n_$Q=n_$g+n_$d*n_$F;n_$D._datas[n_$d]=[];for(var n_$l=0;n_$l<n_$C;n_$l++){var n_$i=n_$t+n_$l*n_$E,n_$j=n_$s.origin.elements;n_$j[0]=n_$i,n_$j[2]=n_$Q;var n_$y=n_$T._getPosition(n_$s,n_$e,n_$J);n_$D._datas[n_$d][n_$l]=n_$y===Number.MAX_VALUE?NaN:n_$_-n_$y}}return n_$D},n_$T.createFromImage=function(n_$N,n_$C,n_$a){for(var n_$u=n_$N.width,n_$e=n_$N.height,n_$J=new n_$T(n_$u,n_$e,n_$C,n_$a),n_$M=(n_$a-n_$C)/254,n_$n=n_$N.getPixels(),n_$V=0,n_$A=0;n_$A<n_$e;n_$A++)for(var n_$P=n_$J._datas[n_$A]=[],n_$$=0;n_$$<n_$u;n_$$++){var n_$O=n_$n[n_$V++],n_$G=n_$n[n_$V++],n_$z=n_$n[n_$V++],n_$f=n_$n[n_$V++];n_$P[n_$$]=255==n_$O&&255==n_$G&&255==n_$z&&255==n_$f?NaN:(n_$O+n_$G+n_$z)/3*n_$M+n_$C}return n_$J},n_$T._getPosition=function(n_$N,n_$C,n_$a){for(var n_$u=Number.MAX_VALUE,n_$e=0;n_$e<n_$C.length;n_$e++)for(var n_$J=n_$C[n_$e],n_$M=n_$a[n_$e],n_$n=0;n_$n<n_$M.length;n_$n+=3){var n_$V=n_$J[n_$M[n_$n+0]],n_$A=n_$J[n_$M[n_$n+1]],n_$P=n_$J[n_$M[n_$n+2]],n_$$=n_$zC.rayIntersectsTriangle(n_$N,n_$V,n_$A,n_$P);!isNaN(n_$$)&&n_$$<n_$u&&(n_$u=n_$$)}return n_$u},n_$$(n_$T,["_tempRay",function(){return this._tempRay=new n_$eC(new n_$MC,new n_$MC)}])}(),function(){function n_$e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}n_$G(n_$e,"laya.d3.core.Layer");var n_$N=n_$e.prototype;return n_$N._binarySearchIndex=function(){for(var n_$N=0,n_$C=n_$e._collsionTestList.length-1,n_$a=0;n_$N<=n_$C;){n_$a=Math.floor((n_$N+n_$C)/2);var n_$u=n_$e._collsionTestList[n_$a];if(n_$u==this._number)return n_$a;n_$u>this._number?n_$C=n_$a-1:n_$N=n_$a+1}return n_$N},n_$N._addCollider=function(n_$N){0===this._colliders.length&&n_$e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),n_$N._isRigidbody?(this._colliders.unshift(n_$N),this._nonRigidbodyOffset++):this._colliders.push(n_$N)},n_$N._removeCollider=function(n_$N){var n_$C=this._colliders.indexOf(n_$N);n_$C<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(n_$C,1),0===this._colliders.length&&n_$e._collsionTestList.splice(n_$e._collsionTestList.indexOf(this._number),1)},n_$z(0,n_$N,"number",function(){return this._number}),n_$z(0,n_$N,"visible",function(){return this._visible},function(n_$N){this._visible=n_$N,n_$e._visibleLayers=n_$N?n_$e._visibleLayers|this.mask:n_$e._visibleLayers&~this.mask}),n_$z(0,n_$N,"mask",function(){return this._mask}),n_$z(1,n_$e,"visibleLayers",function(){return n_$e._visibleLayers},function(n_$N){n_$e._visibleLayers=n_$N;for(var n_$C=0,n_$a=n_$e._layerList.length;n_$C<n_$a;n_$C++){var n_$u=n_$e._layerList[n_$C];n_$u._visible=0!=(n_$u._mask&n_$e._visibleLayers)}}),n_$e.__init__=function(){n_$e._layerList.length=31;for(var n_$N=0;n_$N<31;n_$N++){var n_$C=new n_$e;n_$e._layerList[n_$N]=n_$C,0===n_$N?(n_$C.name="Default Layer",n_$C.visible=!0):(n_$C.name="Layer-"+n_$N,n_$C.visible=!1),n_$C._number=n_$N,n_$C._mask=Math.pow(2,n_$N)}n_$e.currentCreationLayer=n_$e._layerList[0]},n_$e.getLayerByNumber=function(n_$N){if(n_$N<0||30<n_$N)throw new Error("无法返回指定Layer，该number超出范围！");return n_$e._layerList[n_$N]},n_$e.getLayerByName=function(n_$N){for(var n_$C=0;n_$C<31;n_$C++)if(n_$e._layerList[n_$C].name===n_$N)return n_$e._layerList[n_$C];throw new Error("无法返回指定Layer,该name不存在")},n_$e.isVisible=function(n_$N){return 0!=(n_$N&n_$e._currentCameraCullingMask&n_$e._visibleLayers)},n_$e._layerList=[],n_$e._visibleLayers=2147483647,n_$e._collsionTestList=[],n_$e._currentCameraCullingMask=2147483647,n_$e.maxCount=31,n_$e.currentCreationLayer=null,n_$e}()),n_$i=(function(){function n_$N(n_$N,n_$C,n_$a){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=n_$N,this._minCount=n_$C,this._maxCount=n_$a}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.Burst");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._time=this._time,n_$C._minCount=this._minCount,n_$C._maxCount=this._maxCount},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"time",function(){return this._time}),n_$z(0,n_$C,"minCount",function(){return this._minCount}),n_$z(0,n_$C,"maxCount",function(){return this._maxCount})}(),function(){function n_$N(n_$N){this._color=null,this.enbale=!1,this._color=n_$N}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var n_$C=n_$N.prototype;n_$C.cloneTo=function(n_$N){var n_$C=n_$N;this._color.cloneTo(n_$C._color),n_$C.enbale=this.enbale},n_$C.clone=function(){var n_$N;switch(this._color.type){case 0:n_$N=n_$y.createByConstant(this._color.constant.clone());break;case 1:n_$N=n_$y.createByGradient(this._color.gradient.clone());break;case 2:n_$N=n_$y.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:n_$N=n_$y.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var n_$C=new this.constructor(n_$N);return n_$C.enbale=this.enbale,n_$C},n_$z(0,n_$C,"color",function(){return this._color})}(),function(){function n_$N(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.Emission");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),n_$C._destroy=function(){this._bursts=null,this._destroyed=!0},n_$C.getBurstsCount=function(){return this._bursts.length},n_$C.getBurstByIndex=function(n_$N){return this._bursts[n_$N]},n_$C.addBurst=function(n_$N){var n_$C=this._bursts.length;if(0<n_$C)for(var n_$a=0;n_$a<n_$C;n_$a++)this._bursts[n_$a].time>n_$N.time&&this._bursts.splice(n_$a,0,n_$N);this._bursts.push(n_$N)},n_$C.removeBurst=function(n_$N){var n_$C=this._bursts.indexOf(n_$N);-1!==n_$C&&this._bursts.splice(n_$C,1)},n_$C.removeBurstByIndex=function(n_$N){this._bursts.splice(n_$N,1)},n_$C.clearBurst=function(){this._bursts.length=0},n_$C.cloneTo=function(n_$N){var n_$C=n_$N,n_$a=n_$C._bursts;n_$a.length=this._bursts.length;for(var n_$u=0,n_$e=this._bursts.length;n_$u<n_$e;n_$u++){var n_$J=n_$a[n_$u];n_$J?this._bursts[n_$u].cloneTo(n_$J):n_$a[n_$u]=this._bursts[n_$u].clone()}n_$C._emissionRate=this._emissionRate,n_$C.enbale=this.enbale},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"destroyed",function(){return this._destroyed}),n_$z(0,n_$C,"emissionRate",function(){return this._emissionRate},function(n_$N){if(n_$N<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=n_$N})}(),function(){function n_$u(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}n_$G(n_$u,"laya.d3.core.particleShuriKen.module.FrameOverTime");var n_$N=n_$u.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._type=this._type,n_$C._constant=this._constant,this._overTime.cloneTo(n_$C._overTime),n_$C._constantMin=this._constantMin,n_$C._constantMax=this._constantMax,this._overTimeMin.cloneTo(n_$C._overTimeMin),this._overTimeMax.cloneTo(n_$C._overTimeMax)},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$N,"frameOverTimeData",function(){return this._overTime}),n_$z(0,n_$N,"constant",function(){return this._constant}),n_$z(0,n_$N,"type",function(){return this._type}),n_$z(0,n_$N,"frameOverTimeDataMin",function(){return this._overTimeMin}),n_$z(0,n_$N,"constantMin",function(){return this._constantMin}),n_$z(0,n_$N,"frameOverTimeDataMax",function(){return this._overTimeMax}),n_$z(0,n_$N,"constantMax",function(){return this._constantMax}),n_$u.createByConstant=function(n_$N){var n_$C=new n_$u;return n_$C._type=0,n_$C._constant=n_$N,n_$C},n_$u.createByOverTime=function(n_$N){var n_$C=new n_$u;return n_$C._type=1,n_$C._overTime=n_$N,n_$C},n_$u.createByRandomTwoConstant=function(n_$N,n_$C){var n_$a=new n_$u;return n_$a._type=2,n_$a._constantMin=n_$N,n_$a._constantMax=n_$C,n_$a},n_$u.createByRandomTwoOverTime=function(n_$N,n_$C){var n_$a=new n_$u;return n_$a._type=3,n_$a._overTimeMin=n_$N,n_$a._overTimeMax=n_$C,n_$a},n_$u}()),n_$j=function(){function n_$A(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}n_$G(n_$A,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var n_$N=n_$A.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._type=this._type,n_$C._separateAxes=this._separateAxes,n_$C._constant=this._constant,this._constantSeparate.cloneTo(n_$C._constantSeparate),this._gradient.cloneTo(n_$C._gradient),this._gradientX.cloneTo(n_$C._gradientX),this._gradientY.cloneTo(n_$C._gradientY),this._gradientZ.cloneTo(n_$C._gradientZ),n_$C._constantMin=this._constantMin,n_$C._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(n_$C._constantMinSeparate),this._constantMaxSeparate.cloneTo(n_$C._constantMaxSeparate),this._gradientMin.cloneTo(n_$C._gradientMin),this._gradientMax.cloneTo(n_$C._gradientMax),this._gradientXMin.cloneTo(n_$C._gradientXMin),this._gradientXMax.cloneTo(n_$C._gradientXMax),this._gradientYMin.cloneTo(n_$C._gradientYMin),this._gradientYMax.cloneTo(n_$C._gradientYMax),this._gradientZMin.cloneTo(n_$C._gradientZMin),this._gradientZMax.cloneTo(n_$C._gradientZMax)},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$N,"gradientZ",function(){return this._gradientZ}),n_$z(0,n_$N,"constant",function(){return this._constant}),n_$z(0,n_$N,"gradient",function(){return this._gradient}),n_$z(0,n_$N,"separateAxes",function(){return this._separateAxes}),n_$z(0,n_$N,"type",function(){return this._type}),n_$z(0,n_$N,"constantSeparate",function(){return this._constantSeparate}),n_$z(0,n_$N,"gradientX",function(){return this._gradientX}),n_$z(0,n_$N,"gradientY",function(){return this._gradientY}),n_$z(0,n_$N,"gradientW",function(){return this._gradientW}),n_$z(0,n_$N,"gradientMin",function(){return this._gradientMin}),n_$z(0,n_$N,"constantMin",function(){return this._constantMin}),n_$z(0,n_$N,"gradientMax",function(){return this._gradientMax}),n_$z(0,n_$N,"constantMax",function(){return this._constantMax}),n_$z(0,n_$N,"gradientWMin",function(){return this._gradientWMin}),n_$z(0,n_$N,"constantMinSeparate",function(){return this._constantMinSeparate}),n_$z(0,n_$N,"constantMaxSeparate",function(){return this._constantMaxSeparate}),n_$z(0,n_$N,"gradientXMin",function(){return this._gradientXMin}),n_$z(0,n_$N,"gradientXMax",function(){return this._gradientXMax}),n_$z(0,n_$N,"gradientWMax",function(){return this._gradientWMax}),n_$z(0,n_$N,"gradientYMin",function(){return this._gradientYMin}),n_$z(0,n_$N,"gradientYMax",function(){return this._gradientYMax}),n_$z(0,n_$N,"gradientZMin",function(){return this._gradientZMin}),n_$z(0,n_$N,"gradientZMax",function(){return this._gradientZMax}),n_$A.createByConstant=function(n_$N){var n_$C=new n_$A;return n_$C._type=0,n_$C._separateAxes=!1,n_$C._constant=n_$N,n_$C},n_$A.createByConstantSeparate=function(n_$N){var n_$C=new n_$A;return n_$C._type=0,n_$C._separateAxes=!0,n_$C._constantSeparate=n_$N,n_$C},n_$A.createByGradient=function(n_$N){var n_$C=new n_$A;return n_$C._type=1,n_$C._separateAxes=!1,n_$C._gradient=n_$N,n_$C},n_$A.createByGradientSeparate=function(n_$N,n_$C,n_$a,n_$u){var n_$e=new n_$A;return n_$e._type=1,n_$e._separateAxes=!0,n_$e._gradientX=n_$N,n_$e._gradientY=n_$C,n_$e._gradientZ=n_$a,n_$e._gradientW=n_$u,n_$e},n_$A.createByRandomTwoConstant=function(n_$N,n_$C){var n_$a=new n_$A;return n_$a._type=2,n_$a._separateAxes=!1,n_$a._constantMin=n_$N,n_$a._constantMax=n_$C,n_$a},n_$A.createByRandomTwoConstantSeparate=function(n_$N,n_$C){var n_$a=new n_$A;return n_$a._type=2,n_$a._separateAxes=!0,n_$a._constantMinSeparate=n_$N,n_$a._constantMaxSeparate=n_$C,n_$a},n_$A.createByRandomTwoGradient=function(n_$N,n_$C){var n_$a=new n_$A;return n_$a._type=3,n_$a._separateAxes=!1,n_$a._gradientMin=n_$N,n_$a._gradientMax=n_$C,n_$a},n_$A.createByRandomTwoGradientSeparate=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){var n_$V=new n_$A;return n_$V._type=3,n_$V._separateAxes=!0,n_$V._gradientXMin=n_$N,n_$V._gradientXMax=n_$C,n_$V._gradientYMin=n_$a,n_$V._gradientYMax=n_$u,n_$V._gradientZMin=n_$e,n_$V._gradientZMax=n_$J,n_$V._gradientWMin=n_$M,n_$V._gradientWMax=n_$n,n_$V},n_$A}(),n_$y=function(){function n_$u(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}n_$G(n_$u,"laya.d3.core.particleShuriKen.module.GradientColor");var n_$N=n_$u.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._type=this._type,this._constant.cloneTo(n_$C._constant),this._constantMin.cloneTo(n_$C._constantMin),this._constantMax.cloneTo(n_$C._constantMax),this._gradient.cloneTo(n_$C._gradient),this._gradientMin.cloneTo(n_$C._gradientMin),this._gradientMax.cloneTo(n_$C._gradientMax)},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$N,"gradient",function(){return this._gradient}),n_$z(0,n_$N,"constant",function(){return this._constant}),n_$z(0,n_$N,"type",function(){return this._type}),n_$z(0,n_$N,"gradientMin",function(){return this._gradientMin}),n_$z(0,n_$N,"constantMin",function(){return this._constantMin}),n_$z(0,n_$N,"gradientMax",function(){return this._gradientMax}),n_$z(0,n_$N,"constantMax",function(){return this._constantMax}),n_$u.createByConstant=function(n_$N){var n_$C=new n_$u;return n_$C._type=0,n_$C._constant=n_$N,n_$C},n_$u.createByGradient=function(n_$N){var n_$C=new n_$u;return n_$C._type=1,n_$C._gradient=n_$N,n_$C},n_$u.createByRandomTwoConstant=function(n_$N,n_$C){var n_$a=new n_$u;return n_$a._type=2,n_$a._constantMin=n_$N,n_$a._constantMax=n_$C,n_$a},n_$u.createByRandomTwoGradient=function(n_$N,n_$C){var n_$a=new n_$u;return n_$a._type=3,n_$a._gradientMin=n_$N,n_$a._gradientMax=n_$C,n_$a},n_$u}(),n_$T=(function(){function n_$N(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.GradientDataColor");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.addAlpha=function(n_$N,n_$C){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==n_$N&&(n_$N=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=n_$N,this._alphaElements[this._alphaCurrentLength++]=n_$C):DEBUG},n_$C.addRGB=function(n_$N,n_$C){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==n_$N&&(n_$N=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=n_$N,this._rgbElements[this._rgbCurrentLength++]=n_$C.x,this._rgbElements[this._rgbCurrentLength++]=n_$C.y,this._rgbElements[this._rgbCurrentLength++]=n_$C.z):DEBUG},n_$C.cloneTo=function(n_$N){var n_$C=n_$N,n_$a=0,n_$u=0;n_$C._alphaCurrentLength=this._alphaCurrentLength;var n_$e=n_$C._alphaElements;for(n_$e.length=this._alphaElements.length,n_$a=0,n_$u=this._alphaElements.length;n_$a<n_$u;n_$a++)n_$e[n_$a]=this._alphaElements[n_$a];n_$C._rgbCurrentLength=this._rgbCurrentLength;var n_$J=n_$C._rgbElements;for(n_$J.length=this._rgbElements.length,n_$a=0,n_$u=this._rgbElements.length;n_$a<n_$u;n_$a++)n_$J[n_$a]=this._rgbElements[n_$a]},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),n_$z(0,n_$C,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function n_$N(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.GradientDataInt");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.add=function(n_$N,n_$C){this._currentLength<8?(6===this._currentLength&&1!==n_$N&&(n_$N=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=n_$N,this._elements[this._currentLength++]=n_$C):console.log("Warning:data count must lessEqual than 4")},n_$C.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._currentLength=this._currentLength;var n_$a=n_$C._elements;n_$a.length=this._elements.length;for(var n_$u=0,n_$e=this._elements.length;n_$u<n_$e;n_$u++)n_$a[n_$u]=this._elements[n_$u]},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"gradientCount",function(){return this._currentLength/2})}(),function(){function n_$N(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.add=function(n_$N,n_$C){this._currentLength<8?(6===this._currentLength&&1!==n_$N&&(n_$N=1,DEBUG),this._elements[this._currentLength++]=n_$N,this._elements[this._currentLength++]=n_$C):DEBUG},n_$C.getKeyByIndex=function(n_$N){return this._elements[2*n_$N]},n_$C.getValueByIndex=function(n_$N){return this._elements[2*n_$N+1]},n_$C.getAverageValue=function(){for(var n_$N=0,n_$C=this._currentLength-2;n_$N<n_$C;n_$N+=2){this._elements[n_$N+1];this._elements[n_$N+3],this._elements[n_$N+2]-this._elements[n_$N]}return 0},n_$C.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._currentLength=this._currentLength;var n_$a=n_$C._elements;n_$a.length=this._elements.length;for(var n_$u=0,n_$e=this._elements.length;n_$u<n_$e;n_$u++)n_$a[n_$u]=this._elements[n_$u]},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"gradientCount",function(){return this._currentLength/2})}(),function(){function n_$N(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.add=function(n_$N,n_$C){this._currentLength<8?(6===this._currentLength&&1!==n_$N&&(n_$N=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=n_$N,this._elements[this._currentLength++]=n_$C.x,this._elements[this._currentLength++]=n_$C.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},n_$C.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._currentLength=this._currentLength;var n_$a=n_$C._elements;n_$a.length=this._elements.length;for(var n_$u=0,n_$e=this._elements.length;n_$u<n_$e;n_$u++)n_$a[n_$u]=this._elements[n_$u]},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"gradientCount",function(){return this._currentLength/3})}(),function(){function n_$n(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}n_$G(n_$n,"laya.d3.core.particleShuriKen.module.GradientSize");var n_$N=n_$n.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.getMaxSizeInGradient=function(){var n_$N=0,n_$C=0,n_$a=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(n_$N=0,n_$C=this._gradientX.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientX.getValueByIndex(n_$N));for(n_$N=0,n_$C=this._gradientY.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientY.getValueByIndex(n_$N))}else for(n_$N=0,n_$C=this._gradient.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradient.getValueByIndex(n_$N));break;case 1:n_$a=this._separateAxes?(n_$a=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),n_$a=Math.max(n_$a,this._constantMinSeparate.y),Math.max(n_$a,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(n_$N=0,n_$C=this._gradientXMin.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientXMin.getValueByIndex(n_$N));for(n_$N=0,n_$C=this._gradientXMax.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientXMax.getValueByIndex(n_$N));for(n_$N=0,n_$C=this._gradientYMin.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientYMin.getValueByIndex(n_$N));for(n_$N=0,n_$C=this._gradientZMax.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientZMax.getValueByIndex(n_$N))}else{for(n_$N=0,n_$C=this._gradientMin.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientMin.getValueByIndex(n_$N));for(n_$N=0,n_$C=this._gradientMax.gradientCount;n_$N<n_$C;n_$N++)n_$a=Math.max(n_$a,this._gradientMax.getValueByIndex(n_$N))}}return n_$a},n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._type=this._type,n_$C._separateAxes=this._separateAxes,this._gradient.cloneTo(n_$C._gradient),this._gradientX.cloneTo(n_$C._gradientX),this._gradientY.cloneTo(n_$C._gradientY),this._gradientZ.cloneTo(n_$C._gradientZ),n_$C._constantMin=this._constantMin,n_$C._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(n_$C._constantMinSeparate),this._constantMaxSeparate.cloneTo(n_$C._constantMaxSeparate),this._gradientMin.cloneTo(n_$C._gradientMin),this._gradientMax.cloneTo(n_$C._gradientMax),this._gradientXMin.cloneTo(n_$C._gradientXMin),this._gradientXMax.cloneTo(n_$C._gradientXMax),this._gradientYMin.cloneTo(n_$C._gradientYMin),this._gradientYMax.cloneTo(n_$C._gradientYMax),this._gradientZMin.cloneTo(n_$C._gradientZMin),this._gradientZMax.cloneTo(n_$C._gradientZMax)},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$N,"gradientZ",function(){return this._gradientZ}),n_$z(0,n_$N,"gradient",function(){return this._gradient}),n_$z(0,n_$N,"separateAxes",function(){return this._separateAxes}),n_$z(0,n_$N,"type",function(){return this._type}),n_$z(0,n_$N,"gradientMin",function(){return this._gradientMin}),n_$z(0,n_$N,"constantMin",function(){return this._constantMin}),n_$z(0,n_$N,"gradientX",function(){return this._gradientX}),n_$z(0,n_$N,"gradientY",function(){return this._gradientY}),n_$z(0,n_$N,"gradientMax",function(){return this._gradientMax}),n_$z(0,n_$N,"constantMax",function(){return this._constantMax}),n_$z(0,n_$N,"constantMinSeparate",function(){return this._constantMinSeparate}),n_$z(0,n_$N,"constantMaxSeparate",function(){return this._constantMaxSeparate}),n_$z(0,n_$N,"gradientXMin",function(){return this._gradientXMin}),n_$z(0,n_$N,"gradientXMax",function(){return this._gradientXMax}),n_$z(0,n_$N,"gradientYMin",function(){return this._gradientYMin}),n_$z(0,n_$N,"gradientYMax",function(){return this._gradientYMax}),n_$z(0,n_$N,"gradientZMin",function(){return this._gradientZMin}),n_$z(0,n_$N,"gradientZMax",function(){return this._gradientZMax}),n_$n.createByGradient=function(n_$N){var n_$C=new n_$n;return n_$C._type=0,n_$C._separateAxes=!1,n_$C._gradient=n_$N,n_$C},n_$n.createByGradientSeparate=function(n_$N,n_$C,n_$a){var n_$u=new n_$n;return n_$u._type=0,n_$u._separateAxes=!0,n_$u._gradientX=n_$N,n_$u._gradientY=n_$C,n_$u._gradientZ=n_$a,n_$u},n_$n.createByRandomTwoConstant=function(n_$N,n_$C){var n_$a=new n_$n;return n_$a._type=1,n_$a._separateAxes=!1,n_$a._constantMin=n_$N,n_$a._constantMax=n_$C,n_$a},n_$n.createByRandomTwoConstantSeparate=function(n_$N,n_$C){var n_$a=new n_$n;return n_$a._type=1,n_$a._separateAxes=!0,n_$a._constantMinSeparate=n_$N,n_$a._constantMaxSeparate=n_$C,n_$a},n_$n.createByRandomTwoGradient=function(n_$N,n_$C){var n_$a=new n_$n;return n_$a._type=2,n_$a._separateAxes=!1,n_$a._gradientMin=n_$N,n_$a._gradientMax=n_$C,n_$a},n_$n.createByRandomTwoGradientSeparate=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=new n_$n;return n_$M._type=2,n_$M._separateAxes=!0,n_$M._gradientXMin=n_$N,n_$M._gradientXMax=n_$C,n_$M._gradientYMin=n_$a,n_$M._gradientYMax=n_$u,n_$M._gradientZMin=n_$e,n_$M._gradientZMax=n_$J,n_$M},n_$n}()),n_$L=function(){function n_$n(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}n_$G(n_$n,"laya.d3.core.particleShuriKen.module.GradientVelocity");var n_$N=n_$n.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._type=this._type,this._constant.cloneTo(n_$C._constant),this._gradientX.cloneTo(n_$C._gradientX),this._gradientY.cloneTo(n_$C._gradientY),this._gradientZ.cloneTo(n_$C._gradientZ),this._constantMin.cloneTo(n_$C._constantMin),this._constantMax.cloneTo(n_$C._constantMax),this._gradientXMin.cloneTo(n_$C._gradientXMin),this._gradientXMax.cloneTo(n_$C._gradientXMax),this._gradientYMin.cloneTo(n_$C._gradientYMin),this._gradientYMax.cloneTo(n_$C._gradientYMax),this._gradientZMin.cloneTo(n_$C._gradientZMin),this._gradientZMax.cloneTo(n_$C._gradientZMax)},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$N,"gradientZ",function(){return this._gradientZ}),n_$z(0,n_$N,"constant",function(){return this._constant}),n_$z(0,n_$N,"type",function(){return this._type}),n_$z(0,n_$N,"gradientXMax",function(){return this._gradientXMax}),n_$z(0,n_$N,"constantMin",function(){return this._constantMin}),n_$z(0,n_$N,"gradientX",function(){return this._gradientX}),n_$z(0,n_$N,"gradientY",function(){return this._gradientY}),n_$z(0,n_$N,"gradientXMin",function(){return this._gradientXMin}),n_$z(0,n_$N,"constantMax",function(){return this._constantMax}),n_$z(0,n_$N,"gradientYMin",function(){return this._gradientYMin}),n_$z(0,n_$N,"gradientYMax",function(){return this._gradientYMax}),n_$z(0,n_$N,"gradientZMin",function(){return this._gradientZMin}),n_$z(0,n_$N,"gradientZMax",function(){return this._gradientZMax}),n_$n.createByConstant=function(n_$N){var n_$C=new n_$n;return n_$C._type=0,n_$C._constant=n_$N,n_$C},n_$n.createByGradient=function(n_$N,n_$C,n_$a){var n_$u=new n_$n;return n_$u._type=1,n_$u._gradientX=n_$N,n_$u._gradientY=n_$C,n_$u._gradientZ=n_$a,n_$u},n_$n.createByRandomTwoConstant=function(n_$N,n_$C){var n_$a=new n_$n;return n_$a._type=2,n_$a._constantMin=n_$N,n_$a._constantMax=n_$C,n_$a},n_$n.createByRandomTwoGradient=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=new n_$n;return n_$M._type=3,n_$M._gradientXMin=n_$N,n_$M._gradientXMax=n_$C,n_$M._gradientYMin=n_$a,n_$M._gradientYMax=n_$u,n_$M._gradientZMin=n_$e,n_$M._gradientZMax=n_$J,n_$M},n_$n}(),n_$R=(function(){function n_$N(n_$N){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=n_$N}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.cloneTo=function(n_$N){var n_$C=n_$N;this._angularVelocity.cloneTo(n_$C._angularVelocity),n_$C.enbale=this.enbale},n_$C.clone=function(){var n_$N;switch(this._angularVelocity.type){case 0:n_$N=this._angularVelocity.separateAxes?n_$j.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):n_$j.createByConstant(this._angularVelocity.constant);break;case 1:n_$N=this._angularVelocity.separateAxes?n_$j.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):n_$j.createByGradient(this._angularVelocity.gradient.clone());break;case 2:n_$N=this._angularVelocity.separateAxes?n_$j.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):n_$j.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:n_$N=this._angularVelocity.separateAxes?n_$j.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):n_$j.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var n_$C=new this.constructor(n_$N);return n_$C.enbale=this.enbale,n_$C},n_$z(0,n_$C,"angularVelocity",function(){return this._angularVelocity})}(),function(){function n_$N(){this.enable=!1,this.randomDirection=!1}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C._getShapeBoundBox=function(n_$N){throw new Error("BaseShape: must override it.")},n_$C._getSpeedBoundBox=function(n_$N){throw new Error("BaseShape: must override it.")},n_$C.generatePositionAndDirection=function(n_$N,n_$C,n_$a,n_$u){throw new Error("BaseShape: must override it.")},n_$C._calculateProceduralBounds=function(n_$N,n_$C,n_$a){this._getShapeBoundBox(n_$N);var n_$u=n_$N.min,n_$e=n_$N.max;n_$MC.multiply(n_$u,n_$C,n_$u),n_$MC.multiply(n_$e,n_$C,n_$e);var n_$J=new n_$HN(new n_$MC,new n_$MC);this.randomDirection?(n_$J.min=new n_$MC(-1,-1,-1),n_$J.max=new n_$MC(1,1,1)):this._getSpeedBoundBox(n_$J);var n_$M=new n_$HN(new n_$MC,new n_$MC),n_$n=n_$M.min,n_$V=n_$M.max;n_$MC.scale(n_$J.min,n_$a.y,n_$n),n_$MC.scale(n_$J.max,n_$a.y,n_$V),n_$MC.add(n_$N.min,n_$n,n_$n),n_$MC.add(n_$N.max,n_$V,n_$V),n_$MC.min(n_$N.min,n_$n,n_$N.min),n_$MC.max(n_$N.max,n_$n,n_$N.max);var n_$A=new n_$HN(new n_$MC,new n_$MC),n_$P=n_$A.min,n_$$=n_$A.max;n_$MC.scale(n_$J.min,n_$a.x,n_$P),n_$MC.scale(n_$J.max,n_$a.x,n_$$),n_$MC.min(n_$A.min,n_$$,n_$n),n_$MC.max(n_$A.min,n_$$,n_$V),n_$MC.min(n_$N.min,n_$n,n_$N.min),n_$MC.max(n_$N.max,n_$n,n_$N.max)},n_$C.cloneTo=function(n_$N){n_$N.enable=this.enable},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$N}()),n_$k=function(){function n_$J(){}return n_$G(n_$J,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),n_$J._randomPointUnitArcCircle=function(n_$N,n_$C,n_$a){var n_$u=n_$C.elements,n_$e=NaN;n_$e=n_$a?n_$a.getFloat()*n_$N:Math.random()*n_$N,n_$u[0]=Math.cos(n_$e),n_$u[1]=Math.sin(n_$e)},n_$J._randomPointInsideUnitArcCircle=function(n_$N,n_$C,n_$a){var n_$u=n_$C.elements;n_$J._randomPointUnitArcCircle(n_$N,n_$C,n_$a);var n_$e=NaN;n_$e=n_$a?Math.pow(n_$a.getFloat(),.5):Math.pow(Math.random(),.5),n_$u[0]=n_$u[0]*n_$e,n_$u[1]=n_$u[1]*n_$e},n_$J._randomPointUnitCircle=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=NaN;n_$u=n_$C?n_$C.getFloat()*Math.PI*2:Math.random()*Math.PI*2,n_$a[0]=Math.cos(n_$u),n_$a[1]=Math.sin(n_$u)},n_$J._randomPointInsideUnitCircle=function(n_$N,n_$C){var n_$a=n_$N.elements;n_$J._randomPointUnitCircle(n_$N);var n_$u=NaN;n_$u=n_$C?Math.pow(n_$C.getFloat(),.5):Math.pow(Math.random(),.5),n_$a[0]=n_$a[0]*n_$u,n_$a[1]=n_$a[1]*n_$u},n_$J._randomPointUnitSphere=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=NaN,n_$e=NaN;n_$e=n_$C?(n_$u=n_$a[2]=2*n_$C.getFloat()-1,n_$C.getFloat()*Math.PI*2):(n_$u=n_$a[2]=2*Math.random()-1,Math.random()*Math.PI*2);var n_$J=Math.sqrt(1-n_$u*n_$u);n_$a[0]=n_$J*Math.cos(n_$e),n_$a[1]=n_$J*Math.sin(n_$e)},n_$J._randomPointInsideUnitSphere=function(n_$N,n_$C){var n_$a=n_$N.elements;n_$J._randomPointUnitSphere(n_$N);var n_$u=NaN;n_$u=n_$C?Math.pow(n_$C.getFloat(),1/3):Math.pow(Math.random(),1/3),n_$a[0]=n_$a[0]*n_$u,n_$a[1]=n_$a[1]*n_$u,n_$a[2]=n_$a[2]*n_$u},n_$J._randomPointInsideHalfUnitBox=function(n_$N,n_$C){var n_$a=n_$N.elements;n_$C?(n_$a[0]=n_$C.getFloat()-.5,n_$a[1]=n_$C.getFloat()-.5,n_$a[2]=n_$C.getFloat()-.5):(n_$a[0]=Math.random()-.5,n_$a[1]=Math.random()-.5,n_$a[2]=Math.random()-.5)},n_$J}(),n_$S=(function(){function n_$N(n_$N){this._size=null,this.enbale=!1,this._size=n_$N}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.cloneTo=function(n_$N){var n_$C=n_$N;this._size.cloneTo(n_$C._size),n_$C.enbale=this.enbale},n_$C.clone=function(){var n_$N;switch(this._size.type){case 0:n_$N=this._size.separateAxes?n_$T.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):n_$T.createByGradient(this._size.gradient.clone());break;case 1:n_$N=this._size.separateAxes?n_$T.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):n_$T.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:n_$N=this._size.separateAxes?n_$T.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):n_$T.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var n_$C=new this.constructor(n_$N);return n_$C.enbale=this.enbale,n_$C},n_$z(0,n_$C,"size",function(){return this._size})}(),function(){function n_$u(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}n_$G(n_$u,"laya.d3.core.particleShuriKen.module.StartFrame");var n_$N=n_$u.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._type=this._type,n_$C._constant=this._constant,n_$C._constantMin=this._constantMin,n_$C._constantMax=this._constantMax},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$N,"constant",function(){return this._constant}),n_$z(0,n_$N,"type",function(){return this._type}),n_$z(0,n_$N,"constantMin",function(){return this._constantMin}),n_$z(0,n_$N,"constantMax",function(){return this._constantMax}),n_$u.createByConstant=function(n_$N){var n_$C=new n_$u;return n_$C._type=0,n_$C._constant=n_$N,n_$C},n_$u.createByRandomTwoConstant=function(n_$N,n_$C){var n_$a=new n_$u;return n_$a._type=1,n_$a._constantMin=n_$N,n_$a._constantMax=n_$C,n_$a},n_$u}()),n_$p=(function(){function n_$N(n_$N,n_$C){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new n_$JC(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=n_$N,this._startFrame=n_$C}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.cloneTo=function(n_$N){var n_$C=n_$N;this.tiles.cloneTo(n_$C.tiles),n_$C.type=this.type,n_$C.randomRow=this.randomRow,this._frame.cloneTo(n_$C._frame),this._startFrame.cloneTo(n_$C._startFrame),n_$C.cycles=this.cycles,n_$C.enableUVChannels=this.enableUVChannels,n_$C.enable=this.enable},n_$C.clone=function(){var n_$N,n_$C;switch(this._frame.type){case 0:n_$N=n_$i.createByConstant(this._frame.constant);break;case 1:n_$N=n_$i.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:n_$N=n_$i.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:n_$N=n_$i.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:n_$C=n_$S.createByConstant(this._startFrame.constant);break;case 1:n_$C=n_$S.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var n_$a=new this.constructor(n_$N,n_$C);return this.tiles.cloneTo(n_$a.tiles),n_$a.type=this.type,n_$a.randomRow=this.randomRow,n_$a.cycles=this.cycles,n_$a.enableUVChannels=this.enableUVChannels,n_$a.enable=this.enable,n_$a},n_$z(0,n_$C,"frame",function(){return this._frame}),n_$z(0,n_$C,"startFrame",function(){return this._startFrame})}(),function(){function n_$N(n_$N){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=n_$N}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.cloneTo=function(n_$N){var n_$C=n_$N;this._velocity.cloneTo(n_$C._velocity),n_$C.enbale=this.enbale,n_$C.space=this.space},n_$C.clone=function(){var n_$N;switch(this._velocity.type){case 0:n_$N=n_$L.createByConstant(this._velocity.constant.clone());break;case 1:n_$N=n_$L.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:n_$N=n_$L.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:n_$N=n_$L.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var n_$C=new this.constructor(n_$N);return n_$C.enbale=this.enbale,n_$C.space=this.space,n_$C},n_$z(0,n_$C,"velocity",function(){return this._velocity})}(),function(){function n_$N(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new n_$OC,this._vb=n_$RC.create(n_$N._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=n_$LC.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=n_$yC.nameKey.getID("LINE"),this._shaderCompile=n_$EC._preCompileShader[this._sharderNameID]}n_$G(n_$N,"laya.d3.core.PhasorSpriter3D");var n_$C=n_$N.prototype;return n_$C.line=function(n_$N,n_$C,n_$a,n_$u){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(n_$N.x,n_$N.y,n_$N.z,n_$C.x,n_$C.y,n_$C.z,n_$C.w),this.addVertex(n_$a.x,n_$a.y,n_$a.z,n_$u.x,n_$u.y,n_$u.z,n_$u.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},n_$C.circle=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*n_$C,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/n_$C,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*n_$N,Math.cos(this._tempNumver0)*n_$N,0,n_$a,n_$u,n_$e,n_$J),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},n_$C.plane=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=n_$u/2,this._tempNumver1=n_$e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(n_$N-this._tempNumver0,n_$C+this._tempNumver1,n_$a,n_$J,n_$M,n_$n,n_$V),this.addVertex(n_$N+this._tempNumver0,n_$C+this._tempNumver1,n_$a,n_$J,n_$M,n_$n,n_$V),this.addVertex(n_$N-this._tempNumver0,n_$C-this._tempNumver1,n_$a,n_$J,n_$M,n_$n,n_$V),this.addVertex(n_$N+this._tempNumver0,n_$C-this._tempNumver1,n_$a,n_$J,n_$M,n_$n,n_$V),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},n_$C.box=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=n_$u/2,this._tempNumver1=n_$e/2,this._tempNumver2=n_$J/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(n_$N-this._tempNumver0,n_$C+this._tempNumver1,n_$a+this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N+this._tempNumver0,n_$C+this._tempNumver1,n_$a+this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N-this._tempNumver0,n_$C-this._tempNumver1,n_$a+this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N+this._tempNumver0,n_$C-this._tempNumver1,n_$a+this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N+this._tempNumver0,n_$C+this._tempNumver1,n_$a-this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N-this._tempNumver0,n_$C+this._tempNumver1,n_$a-this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N+this._tempNumver0,n_$C-this._tempNumver1,n_$a-this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N-this._tempNumver0,n_$C-this._tempNumver1,n_$a-this._tempNumver2,n_$M,n_$n,n_$V,n_$A),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},n_$C.cone=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*n_$a+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*n_$a>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/n_$a,this.addVertexIndex(0,n_$C,0,n_$u,n_$e,n_$J,n_$M,this._tempUint0),this.addVertexIndex(0,0,0,n_$u,n_$e,n_$J,n_$M,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<n_$a;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(n_$N*this._tempNumver2,0,n_$N*this._tempNumver3,n_$u,n_$e,n_$J,n_$M,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==n_$a-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(n_$N*this._tempNumver2,0,n_$N*this._tempNumver3,n_$u,n_$e,n_$J,n_$M,this._tempUint0+(this._tempInt0+n_$a)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==n_$a-1?this.addIndexes(this._tempUint1+n_$a+2):this.addIndexes(this._tempUint1+this._tempInt0+n_$a+1),this.addIndexes(this._tempUint1+this._tempInt0+n_$a),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},n_$C.boundingBoxLine=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(n_$N,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N,n_$C,n_$J,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$u,n_$C,n_$J,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$u,n_$e,n_$a,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N,n_$e,n_$a,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$u,n_$C,n_$a,n_$M,n_$n,n_$V,n_$A),this.addVertex(n_$N,n_$C,n_$a,n_$M,n_$n,n_$V,n_$A),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},n_$C.addVertex=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=n_$N,this._vbData[this._posInVBData+1]=n_$C,this._vbData[this._posInVBData+2]=n_$a,this._vbData[this._posInVBData+3]=n_$u,this._vbData[this._posInVBData+4]=n_$e,this._vbData[this._posInVBData+5]=n_$J,this._vbData[this._posInVBData+6]=n_$M,this._posInVBData+=this._floatSizePerVer,this},n_$C.addVertexIndex=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){return this._hasBegun||this.addVertexIndexException(),this._vbData[n_$n]=n_$N,this._vbData[n_$n+1]=n_$C,this._vbData[n_$n+2]=n_$a,this._vbData[n_$n+3]=n_$u,this._vbData[n_$n+4]=n_$e,this._vbData[n_$n+5]=n_$J,this._vbData[n_$n+6]=n_$M,(n_$n+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=n_$n),this},n_$C.addIndexes=function(n_$N){var n_$C=arguments;this._hasBegun||this.addVertexIndexException();for(var n_$a=0;n_$a<n_$C.length;n_$a++)this._ibData[this._posInIBData]=n_$C[n_$a],this._posInIBData++;return this},n_$C.begin=function(n_$N,n_$C){return this._hasBegun&&this.beginException0(),1!==n_$N&&4!==n_$N&&this.beginException1(),this._primitiveType=n_$N,this._camera=n_$C,this._hasBegun=!0,this},n_$C.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},n_$C.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(n_$N._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),n_$E.drawCall++,n_$_.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},n_$C.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},n_$C.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},n_$C.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},n_$C.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},n_$C.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},n_$C.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(28,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector4",1)])}]),n_$N}()),n_$m=function(){function n_$N(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++n_$N._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new n_$OC}n_$G(n_$N,"laya.d3.core.render.RenderElement");var n_$C=n_$N.prototype;return n_$C.getDynamicBatchBakedVertexs=function(n_$N){for(var n_$C=this._renderObj._getVertexBuffer(n_$N),n_$a=n_$C.getData().slice(),n_$u=n_$C.vertexDeclaration,n_$e=n_$u.getVertexElementByUsage(0).offset/4,n_$J=n_$u.getVertexElementByUsage(3).offset/4,n_$M=this._sprite3D.transform,n_$n=n_$M.worldMatrix,n_$V=n_$M.rotation,n_$A=n_$u.vertexStride/4,n_$P=0,n_$$=n_$a.length;n_$P<n_$$;n_$P+=n_$A){var n_$O=n_$P+n_$e,n_$G=n_$P+n_$J;n_$tC.transformVector3ArrayToVector3ArrayCoordinate(n_$a,n_$O,n_$n,n_$a,n_$O),n_$tC.transformVector3ArrayByQuat(n_$a,n_$G,n_$V,n_$a,n_$G)}return n_$a},n_$C.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},n_$C._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},n_$z(0,n_$C,"id",function(){return this._id}),n_$z(0,n_$C,"renderObj",function(){return this._renderObj},function(n_$N){this._renderObj!==n_$N&&(this._renderObj=n_$N)}),n_$N._uniqueIDCounter=0,n_$N}(),n_$b=function(){function n_$C(n_$N){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++n_$C._uniqueIDCounter,this._needSort=!1,this._scene=n_$N,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}n_$G(n_$C,"laya.d3.core.render.RenderQueue");var n_$N=n_$C.prototype;return n_$N._sortOpaqueFunc=function(n_$N,n_$C){if(n_$N._render&&n_$C._render){var n_$a=n_$N._material.renderQueue-n_$C._material.renderQueue;return 0==n_$a?n_$N._render._distanceForSort-n_$C._render._distanceForSort:n_$a}return 0},n_$N._sortAlphaFunc=function(n_$N,n_$C){if(n_$N._render&&n_$C._render){var n_$a=n_$N._material.renderQueue-n_$C._material.renderQueue;return 0==n_$a?n_$C._render._distanceForSort-n_$N._render._distanceForSort:n_$a}return 0},n_$N._begainRenderElement=function(n_$N,n_$C,n_$a){return!!n_$C._beforeRender(n_$N)},n_$N._sortAlpha=function(n_$N){n_$C._cameraPosition=n_$N,this._finalElements.sort(this._sortAlphaFunc)},n_$N._sortOpaque=function(n_$N){n_$C._cameraPosition=n_$N,this._finalElements.sort(this._sortOpaqueFunc)},n_$N._preRender=function(n_$N){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},n_$N._render=function(n_$N,n_$C){for(var n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V=n_$E.loopCount,n_$A=this._scene,n_$P=n_$N.camera,n_$$=(n_$P.id,!1),n_$O=0,n_$G=this._finalElements.length;n_$O<n_$G;n_$O++){var n_$z,n_$f,n_$t,n_$g=this._finalElements[n_$O];if(null!=n_$g._onPreRenderFunction&&n_$g._onPreRenderFunction.call(n_$g._sprite3D,n_$N),0===n_$g._type){if(n_$N.owner=n_$t=n_$g._sprite3D,n_$N.renderElement=n_$g,n_$t._preRenderUpdateComponents(n_$N),n_$z=n_$g.renderObj,n_$f=n_$g._material,this._begainRenderElement(n_$N,n_$z,n_$f)){if(n_$a=n_$z._getVertexBuffers(),!(n_$e=(n_$u=n_$z._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[n_$u.id]){this._errorRecord[n_$u.id]=1;var n_$x="vertexBuffer:"+("("+n_$u._destroyed+","+n_$u._released+","+n_$u._referenceCount+","+n_$u._buffer+")")+", material:"+(n_$f?n_$f.__className+"("+n_$f._destroyed+","+n_$f._released+")":"null")+", owner:"+(n_$t?n_$t.__className+"("+n_$t._destroyed+","+n_$t._activeInHierarchy+","+n_$t._displayedInStage+")":"null")+", renderObj:"+(n_$z?n_$z.__className+"("+n_$z._destroyed+","+n_$z._released+","+n_$z._referenceCount+")":"")+", parent:, url:"+(n_$t?n_$t.url:"")+", disposeStack:"+n_$u.disposeStack;n_$X.recordError("报错：unknown vertexDeclaration  "+n_$x)}continue}if(n_$$=(n_$J=n_$N._shader=n_$f._getShader(n_$A._shaderDefineValue,n_$e.shaderDefineValue,n_$t._shaderDefineValue)).bind()||n_$V!==n_$J._uploadLoopCount,n_$a){if(n_$J._uploadVertexBuffer!==n_$a||n_$$){for(var n_$W=0;n_$W<n_$a.length;n_$W++){var n_$v=n_$a[n_$W];n_$J.uploadAttributesX(n_$v.vertexDeclaration.shaderValues.data,n_$v)}n_$J._uploadVertexBuffer=n_$a}}else(n_$J._uploadVertexBuffer!==n_$u||n_$$)&&(n_$J.uploadAttributes(n_$e.shaderValues.data,null),n_$J._uploadVertexBuffer=n_$u);(n_$J._uploadScene!==n_$A||n_$$)&&(n_$J.uploadSceneUniforms(n_$A._shaderValues.data),n_$J._uploadScene=n_$A),(n_$P!==n_$J._uploadCamera||n_$J._uploadSprite3D!==n_$t||n_$$)&&(n_$J.uploadSpriteUniforms(n_$t._shaderValues.data),n_$J._uploadSprite3D=n_$t),(n_$P!==n_$J._uploadCamera||n_$$)&&(n_$J.uploadCameraUniforms(n_$P._shaderValues.data),n_$J._uploadCamera=n_$P),(n_$J._uploadMaterial!==n_$f||n_$$)&&(n_$f._upload(),n_$J._uploadMaterial=n_$f),n_$M!==n_$f?(n_$f._setRenderStateBlendDepth(),n_$f._setRenderStateFrontFace(n_$C,n_$t.transform),n_$M=n_$f,n_$n=n_$t):n_$n!==n_$t&&(n_$f._setRenderStateFrontFace(n_$C,n_$t.transform),n_$n=n_$t),n_$z._render(n_$N),n_$J._uploadLoopCount=n_$V}n_$t._postRenderUpdateComponents(n_$N)}else if(2===n_$g._type){n_$g.renderObj;n_$N.owner=n_$t=n_$g._sprite3D,n_$N.renderElement=n_$g,n_$N._batchIndexStart=n_$g._tempBatchIndexStart,n_$N._batchIndexEnd=n_$g._tempBatchIndexEnd,n_$z=n_$g.renderObj,n_$f=n_$g._material,this._begainRenderElement(n_$N,n_$z,n_$f)&&(n_$e=(n_$u=n_$z._getVertexBuffer(0)).vertexDeclaration,n_$$=(n_$J=n_$N._shader=n_$f._getShader(n_$A._shaderDefineValue,n_$e.shaderDefineValue,n_$t._shaderDefineValue)).bind()||n_$V!==n_$J._uploadLoopCount,(n_$J._uploadVertexBuffer!==n_$u||n_$$)&&(n_$J.uploadAttributes(n_$e.shaderValues.data,null),n_$J._uploadVertexBuffer=n_$u),(n_$J._uploadScene!==n_$A||n_$$)&&(n_$J.uploadSceneUniforms(n_$A._shaderValues.data),n_$J._uploadScene=n_$A),(n_$P!==n_$J._uploadCamera||n_$J._uploadSprite3D!==n_$t||n_$$)&&(n_$J.uploadSpriteUniforms(n_$t._shaderValues.data),n_$J._uploadSprite3D=n_$t),(n_$P!==n_$J._uploadCamera||n_$$)&&(n_$J.uploadCameraUniforms(n_$P._shaderValues.data),n_$J._uploadCamera=n_$P),(n_$J._uploadMaterial!==n_$f||n_$$)&&(n_$f._upload(),n_$J._uploadMaterial=n_$f),n_$M!==n_$f?(n_$f._setRenderStateBlendDepth(),n_$f._setRenderStateFrontFace(n_$C,n_$t.transform),n_$M=n_$f,n_$n=n_$t):n_$n!==n_$t&&(n_$f._setRenderStateFrontFace(n_$C,n_$t.transform),n_$n=n_$t),n_$z._render(n_$N),n_$J._uploadLoopCount=n_$V)}}},n_$N._renderShadow=function(n_$N,n_$C){for(var n_$a,n_$u,n_$e,n_$J,n_$M,n_$n=n_$E.loopCount,n_$V=this._scene,n_$A=n_$N.camera,n_$P=!1,n_$$=0,n_$O=this._finalElements.length;n_$$<n_$O;n_$$++){var n_$G,n_$z,n_$f,n_$t=this._finalElements[n_$$];0===n_$t._type&&(n_$N.owner=n_$f=n_$t._sprite3D,n_$C||n_$f._projectionViewWorldUpdateCamera===n_$A&&n_$f._projectionViewWorldUpdateLoopCount===n_$E.loopCount||(n_$f._render._renderUpdate(n_$N._projectionViewMatrix),n_$f._projectionViewWorldUpdateLoopCount=n_$E.loopCount,n_$f._projectionViewWorldUpdateCamera=n_$A),n_$N.renderElement=n_$t,n_$f._preRenderUpdateComponents(n_$N),n_$G=n_$t.renderObj,n_$z=n_$t._material,this._begainRenderElement(n_$N,n_$G,null)&&(n_$u=(n_$a=n_$G._getVertexBuffer(0)).vertexDeclaration,n_$P=(n_$e=n_$N._shader=n_$z._getShader(n_$V._shaderDefineValue,n_$u.shaderDefineValue,n_$f._shaderDefineValue)).bind()||n_$n!==n_$e._uploadLoopCount,(n_$e._uploadVertexBuffer!==n_$a||n_$P)&&(n_$e.uploadAttributes(n_$u.shaderValues.data,null),n_$e._uploadVertexBuffer=n_$a),(n_$A!==n_$e._uploadCamera||n_$e._uploadSprite3D!==n_$f||n_$P)&&(n_$e.uploadSpriteUniforms(n_$f._shaderValues.data),n_$e._uploadSprite3D=n_$f),(n_$A!==n_$e._uploadCamera||n_$P)&&(n_$e.uploadCameraUniforms(n_$A._shaderValues.data),n_$e._uploadCamera=n_$A),(n_$e._uploadMaterial!==n_$z||n_$P)&&(n_$z._upload(),n_$e._uploadMaterial=n_$z),n_$e._uploadRenderElement,n_$J!==n_$z?(n_$z._setRenderStateFrontFace(!1,n_$f.transform),n_$J=n_$z,n_$M=n_$f):n_$M!==n_$f&&(n_$z._setRenderStateFrontFace(!1,n_$f.transform),n_$M=n_$f),n_$G._render(n_$N),n_$e._uploadLoopCount=n_$n),n_$f._postRenderUpdateComponents(n_$N))}},n_$N._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},n_$N._addRenderElement=function(n_$N){this._renderElements.push(n_$N),this._needSort=!0},n_$N._addDynamicBatchElement=function(n_$N){this._dynamicBatchCombineRenderElements.push(n_$N)},n_$z(0,n_$N,"id",function(){return this._id}),n_$C._uniqueIDCounter=0,n_$C._cameraPosition=null,n_$C}(),n_$o=function(){function n_$N(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return n_$G(n_$N,"laya.d3.core.render.RenderState"),n_$N.clientWidth=0,n_$N.clientHeight=0,n_$N}(),n_$H=function(){function n_$M(n_$N,n_$C){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new n_$ZN(new n_$MC,0),this._corners=[new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC],this._boundingBoxCenter=new n_$MC,this._children=n_$u(8),this._objects=[],this._tempBoundBoxCorners=[new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC],this._scene=n_$N,this._currentDepth=n_$C}n_$G(n_$M,"laya.d3.core.scene.OctreeNode");var n_$N=n_$M.prototype;return n_$X.imps(n_$N,{"laya.d3.core.scene.ITreeNode":!0}),n_$N.init=function(n_$N,n_$C){var n_$a=new n_$MC,n_$u=new n_$MC;n_$MC.scale(n_$C,-.5,n_$a),n_$MC.scale(n_$C,.5,n_$u),n_$MC.add(n_$a,n_$N,n_$a),n_$MC.add(n_$u,n_$N,n_$u),this.exactBox=new n_$HN(n_$a,n_$u),this.relaxBox=new n_$HN(n_$a,n_$u)},n_$N.addTreeNode=function(n_$N){1===Collision.boxContainsBox(this._relaxBox,n_$N.boundingBox)?this.addNodeDown(n_$N,0):this.addObject(n_$N)},n_$N.addChild=function(n_$N){var n_$C=this._children[n_$N];if(null==n_$C){n_$C=new n_$M(this._scene,this._currentDepth+1),(this._children[n_$N]=n_$C)._parent=this,n_$MC.subtract(this._exactBox.max,this._exactBox.min,n_$M.tempSize),n_$MC.multiply(n_$M.tempSize,n_$M._octreeSplit[n_$N],n_$M.tempCenter),n_$MC.add(this._exactBox.min,n_$M.tempCenter,n_$M.tempCenter),n_$MC.scale(n_$M.tempSize,.25,n_$M.tempSize);var n_$a=new n_$MC,n_$u=new n_$MC;n_$MC.subtract(n_$M.tempCenter,n_$M.tempSize,n_$a),n_$MC.add(n_$M.tempCenter,n_$M.tempSize,n_$u),n_$C.exactBox=new n_$HN(n_$a,n_$u),n_$MC.scale(n_$M.tempSize,n_$M.relax,n_$M.tempSize);var n_$e=new n_$MC,n_$J=new n_$MC;n_$MC.subtract(n_$M.tempCenter,n_$M.tempSize,n_$e),n_$MC.add(n_$M.tempCenter,n_$M.tempSize,n_$J),n_$C.relaxBox=new n_$HN(n_$e,n_$J)}return n_$C},n_$N.addObject=function(n_$N){(n_$N._treeNode=this)._objects.push(n_$N)},n_$N.removeObject=function(n_$N){if(n_$N._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var n_$C=this._objects.indexOf(n_$N);return-1!==n_$C&&(this._objects.splice(n_$C,1),!0)},n_$N.clearObject=function(){this._objects.length=0},n_$N.addNodeUp=function(n_$N,n_$C){this._parent&&1!==Collision.boxContainsBox(this._exactBox,n_$N.boundingBox)?this._parent.addNodeUp(n_$N,n_$C-1):this.addNodeDown(n_$N,n_$C)},n_$N.addNodeDown=function(n_$N,n_$C){if(n_$C<this._scene.treeLevel){var n_$a=this.inChildIndex(n_$N.boundingBoxCenter),n_$u=this.addChild(n_$a);1===Collision.boxContainsBox(n_$u._relaxBox,n_$N.boundingBox)?n_$u.addNodeDown(n_$N,++n_$C):this.addObject(n_$N)}else this.addObject(n_$N)},n_$N.inChildIndex=function(n_$N){return 4*(n_$N.z<this._boundingBoxCenter.z?0:1)+2*(n_$N.y<this._boundingBoxCenter.y?0:1)+(n_$N.x<this._boundingBoxCenter.x?0:1)},n_$N.updateObject=function(n_$N){1===Collision.boxContainsBox(this._relaxBox,n_$N.boundingBox)?(this.removeObject(n_$N),n_$N._treeNode=null,this.addNodeDown(n_$N,this._currentDepth)):this._parent&&(this.removeObject(n_$N),n_$N._treeNode=null,this._parent.addNodeUp(n_$N,this._currentDepth-1))},n_$N.cullingObjects=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J,n_$M=0,n_$n=0,n_$V=0,n_$A=this._scene._dynamicBatchManager;for(n_$M=0,n_$J=this._objects.length;n_$M<n_$J;n_$M++){var n_$P=this._objects[n_$M];if(n_$l.isVisible(n_$P._owner.layer.mask)&&n_$P.enable){if(n_$C&&(n_$E.treeSpriteCollision+=1,0===n_$N.containsBoundSphere(n_$P.boundingSphere)))continue;n_$P._renderUpdate(n_$e),n_$P._distanceForSort=n_$MC.distance(n_$P.boundingSphere.center,n_$u)+n_$P.sortingFudge;var n_$$=n_$P._renderElements;for(n_$n=0,n_$V=n_$$.length;n_$n<n_$V;n_$n++){var n_$O=n_$$[n_$n],n_$G=n_$O._staticBatch;if(n_$G&&n_$G._material===n_$O._material)n_$G._addBatchRenderElement(n_$O);else{var n_$z=n_$O.renderObj;n_$z.triangleCount<10&&1===n_$z._vertexBufferCount&&n_$z._getIndexBuffer()&&n_$O._material.renderQueue<2&&n_$O._canDynamicBatch&&!n_$P._owner.isStatic?n_$A._addPrepareRenderElement(n_$O):this._scene.getRenderQueue(n_$O._material.renderQueue)._addRenderElement(n_$O)}}}}for(n_$M=0;n_$M<8;n_$M++){var n_$f=this._children[n_$M];if(null!=n_$f){var n_$t=n_$C;if(n_$C){var n_$g=n_$N.containsBoundBox(n_$f._relaxBox);if(n_$E.treeNodeCollision+=1,0===n_$g)continue;n_$t=2===n_$g}n_$f.cullingObjects(n_$N,n_$t,n_$a,n_$u,n_$e)}}},n_$N.cullingShadowObjects=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J,n_$M=0,n_$n=0,n_$V=0;this._scene._dynamicBatchManager;for(n_$M=0,n_$J=this._objects.length;n_$M<n_$J;n_$M++){var n_$A=this._objects[n_$M];if(n_$A.castShadow&&n_$l.isVisible(n_$A._owner.layer.mask)&&n_$A.enable){if(n_$a&&0===n_$N[0].containsBoundSphere(n_$A.boundingSphere))continue;for(var n_$P=1,n_$$=n_$N.length;n_$P<n_$$;n_$P++){var n_$O=n_$C[n_$P-1];if(0!==n_$N[n_$P].containsBoundSphere(n_$A.boundingSphere)){var n_$G=n_$A._renderElements;for(n_$n=0,n_$V=n_$G.length;n_$n<n_$V;n_$n++)n_$O._addRenderElement(n_$G[n_$n])}}}}for(n_$M=0;n_$M<8;n_$M++){var n_$z=this._children[n_$M];if(null!=n_$z){var n_$f=n_$a;if(n_$a){var n_$t=n_$N[0].containsBoundBox(n_$z._relaxBox);if(0===n_$t)continue;n_$f=2===n_$t}n_$z.cullingShadowObjects(n_$N,n_$C,n_$f,n_$u,n_$e)}}},n_$N.cullingShadowObjectsOnePSSM=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M,n_$n=n_$C[0],n_$V=0,n_$A=0,n_$P=0;for(n_$V=0,n_$M=this._objects.length;n_$V<n_$M;n_$V++){var n_$$=this._objects[n_$V];if(n_$$.castShadow&&n_$l.isVisible(n_$$._owner.layer.mask)&&n_$$.enable){if(n_$u&&0===n_$N.containsBoundSphere(n_$$.boundingSphere))continue;n_$$._renderUpdate(n_$a);var n_$O=n_$$._renderElements;for(n_$A=0,n_$P=n_$O.length;n_$A<n_$P;n_$A++)n_$n._addRenderElement(n_$O[n_$A])}}for(n_$V=0;n_$V<8;n_$V++){var n_$G=this._children[n_$V];if(null!=n_$G){var n_$z=n_$u;if(n_$u){var n_$f=n_$N.containsBoundBox(n_$G._relaxBox);if(0===n_$f)continue;n_$z=2===n_$f}n_$G.cullingShadowObjectsOnePSSM(n_$N,n_$C,n_$a,n_$z,n_$e,n_$J)}}},n_$N.renderBoudingBox=function(n_$N){this._renderBoudingBox(n_$N);for(var n_$C=0;n_$C<8;++n_$C){var n_$a=this._children[n_$C];n_$a&&n_$a.renderBoudingBox(n_$N)}},n_$N.buildAllChild=function(n_$N){if(n_$N<this._scene.treeLevel)for(var n_$C=0;n_$C<8;n_$C++){this.addChild(n_$C).buildAllChild(n_$N+1)}},n_$N._renderBoudingBox=function(n_$N){},n_$z(0,n_$N,"exactBox",function(){return this._exactBox},function(n_$N){this._exactBox=n_$N,n_$MC.add(n_$N.min,n_$N.max,this._boundingBoxCenter),n_$MC.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),n_$z(0,n_$N,"relaxBox",function(){return this._relaxBox},function(n_$N){(this._relaxBox=n_$N).getCorners(this._corners),n_$ZN.createfromPoints(this._corners,this._boundingSphere)}),n_$M.debugMode=!1,n_$M.relax=1.15,n_$M.CHILDNUM=8,n_$$(n_$M,["tempVector0",function(){return this.tempVector0=new n_$MC},"tempSize",function(){return this.tempSize=new n_$MC},"tempCenter",function(){return this.tempCenter=new n_$MC},"_octreeSplit",function(){return this._octreeSplit=[new n_$MC(.25,.25,.25),new n_$MC(.75,.25,.25),new n_$MC(.25,.75,.25),new n_$MC(.75,.75,.25),new n_$MC(.25,.25,.75),new n_$MC(.75,.25,.75),new n_$MC(.25,.75,.75),new n_$MC(.75,.75,.75)]}]),n_$M}(),n_$I=(function(){function n_$N(){}n_$G(n_$N,"laya.d3.core.scene.SceneManager")}(),function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===n_$N&&(n_$N=1),void 0===n_$C&&(n_$C=1),void 0===n_$a&&(n_$a=1),void 0===n_$u&&(n_$u=1),this._r=n_$N,this._g=n_$C,this._b=n_$a,this._a=n_$u}return n_$G(n_$N,"laya.d3.core.trail.module.Color",null,"Color$1"),n_$N.prototype.cloneTo=function(n_$N){n_$N._r=this._r,n_$N._g=this._g,n_$N._b=this._b,n_$N._a=this._a},n_$$(n_$N,["RED",function(){return this.RED=new n_$N(1,0,0,1)},"GREEN",function(){return this.GREEN=new n_$N(0,1,0,1)},"BLUE",function(){return this.BLUE=new n_$N(0,0,1,1)},"CYAN",function(){return this.CYAN=new n_$N(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new n_$N(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new n_$N(1,0,1,1)},"GRAY",function(){return this.GRAY=new n_$N(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new n_$N(1,1,1,1)},"BLACK",function(){return this.BLACK=new n_$N(0,0,0,1)}]),n_$N}()),n_$Z=(function(){function n_$N(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}n_$G(n_$N,"laya.d3.core.trail.module.Gradient");var n_$C=n_$N.prototype;n_$C.setKeys=function(n_$N,n_$C){var n_$a,n_$u;this._colorKeys=n_$N;for(var n_$e=this.index=0;n_$e<n_$N.length;n_$e++){var n_$J=(n_$a=n_$N[n_$e]).color;this._colorKeyData[this.index++]=n_$J._r,this._colorKeyData[this.index++]=n_$J._g,this._colorKeyData[this.index++]=n_$J._b,this._colorKeyData[this.index++]=n_$a.time}this._alphaKeys=n_$C;for(var n_$M=this.index=0;n_$M<n_$C.length;n_$M++)n_$u=n_$C[n_$M],this._alphaKeyData[this.index++]=n_$u.alpha,this._alphaKeyData[this.index++]=n_$u.time},n_$C.cloneTo=function(n_$N){var n_$C=0,n_$a=0,n_$u=this.colorKeys,n_$e=[];for(n_$C=0,n_$a=n_$u.length;n_$C<n_$a;n_$C++){var n_$J=new n_$h;n_$u[n_$C].cloneTo(n_$J),n_$e.push(n_$J)}var n_$M=this.alphaKeys,n_$n=[];for(n_$C=0,n_$a=n_$M.length;n_$C<n_$a;n_$C++){var n_$V=new n_$Z;n_$M[n_$C].cloneTo(n_$V),n_$n.push(n_$V)}n_$N.setKeys(n_$e,n_$n)},n_$z(0,n_$C,"mode",function(){return this._mode},function(n_$N){this._mode=n_$N}),n_$z(0,n_$C,"colorKeys",function(){return this._colorKeys},function(n_$N){this._colorKeys=n_$N;for(var n_$C=this.index=0;n_$C<n_$N.length;n_$C++){var n_$a=n_$N[n_$C],n_$u=n_$a.color;this._colorKeyData[this.index++]=n_$u._r,this._colorKeyData[this.index++]=n_$u._g,this._colorKeyData[this.index++]=n_$u._b,this._colorKeyData[this.index++]=n_$a.time}}),n_$z(0,n_$C,"alphaKeys",function(){return this._alphaKeys},function(n_$N){this._alphaKeys=n_$N;for(var n_$C=this.index=0;n_$C<n_$N.length;n_$C++){var n_$a=n_$N[n_$C];this._alphaKeyData[this.index++]=n_$a.alpha,this._alphaKeyData[this.index++]=n_$a.time}})}(),function(){function n_$N(n_$N,n_$C){this._alpha=NaN,this._time=NaN,void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),this._alpha=n_$N,this._time=n_$C}n_$G(n_$N,"laya.d3.core.trail.module.GradientAlphaKey");var n_$C=n_$N.prototype;return n_$C.cloneTo=function(n_$N){n_$N.alpha=this.alpha,n_$N.time=this.time},n_$z(0,n_$C,"alpha",function(){return this._alpha},function(n_$N){this._alpha=n_$N}),n_$z(0,n_$C,"time",function(){return this._time},function(n_$N){this._time=n_$N}),n_$N}()),n_$h=function(){function n_$N(n_$N,n_$C){this._color=null,this._time=NaN,void 0===n_$C&&(n_$C=0),this._color=n_$N||new n_$I,this._time=n_$C}n_$G(n_$N,"laya.d3.core.trail.module.GradientColorKey");var n_$C=n_$N.prototype;return n_$C.cloneTo=function(n_$N){this.color.cloneTo(n_$N.color),n_$N.time=this.time},n_$z(0,n_$C,"color",function(){return this._color},function(n_$N){this._color=n_$N}),n_$z(0,n_$C,"time",function(){return this._time},function(n_$N){this._time=n_$N}),n_$N}(),n_$U=(function(){function n_$N(){}n_$G(n_$N,"laya.d3.core.trail.module.GradientMode"),n_$N.Blend=0,n_$N.Fixed=1}(),function(){function n_$N(){}n_$G(n_$N,"laya.d3.core.trail.module.TextureMode"),n_$N.Stretch=0,n_$N.Tile=1}(),function(){function n_$N(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}n_$G(n_$N,"laya.d3.core.trail.module.TrailKeyFrame"),n_$N.prototype.cloneTo=function(n_$N){n_$N.time=this.time,n_$N.inTangent=this.inTangent,n_$N.outTangent=this.outTangent,n_$N.value=this.value}}(),function(){function n_$C(n_$N){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new n_$MC,this._curPosition=new n_$MC,this._delVector3=new n_$MC,this._lastFixedVertexPosition=new n_$MC,this._pointAtoBVector3=new n_$MC,this._pointA=new n_$MC,this._pointB=new n_$MC,this._owner=n_$N,this._id=n_$C.renderElementCount++,0==this._id?n_$N._owner.transform.position.cloneTo(this._lastPosition):n_$N._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new n_$RC(n_$U.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new n_$RC(n_$U.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}n_$G(n_$C,"laya.d3.core.trail.TrailRenderElement");var n_$N=n_$C.prototype;n_$X.imps(n_$N,{"laya.d3.core.render.IRenderable":!0}),n_$N._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},n_$N._addTrailByFirstPosition=function(n_$N,n_$C){n_$MC.subtract(n_$C,n_$N,this._delVector3),n_$MC.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),n_$MC.normalize(this._pointAtoBVector3,this._pointAtoBVector3),n_$MC.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(n_$N),n_$N.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},n_$N._addTrailByNextPosition=function(n_$N){n_$MC.subtract(n_$N,this._lastFixedVertexPosition,this._delVector3),n_$MC.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),n_$MC.normalize(this._pointAtoBVector3,this._pointAtoBVector3),n_$MC.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=n_$MC.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=n_$hN.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(n_$N),n_$N.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(n_$N),this._virtualVerticesCount=2)},n_$N._updateVerticesByPosition=function(n_$N){this._pointe=n_$N.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},n_$N._updateVertexBuffer2=function(){var n_$N,n_$C=0,n_$a=0,n_$u=0;for(n_$u=0,n_$N=(this._verticesCount+this._virtualVerticesCount)/2;n_$u<n_$N;n_$u++)n_$a=0==this._owner.textureMode?(this._VerticesToTailLength[n_$u]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[n_$u],this._vertices2[n_$C++]=1-n_$a,this._vertices2[n_$C++]=1-n_$a;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},n_$N._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},n_$N._updateDisappear=function(){var n_$N,n_$C=0;for(n_$C=this._curDisappearIndex,n_$N=(this._verticesCount+this._virtualVerticesCount)/2;n_$C<n_$N;n_$C++)this._owner._curtime-this._everyGroupVertexBirthTime[n_$C]>=this._owner.time+n_$hN.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},n_$N._beforeRender=function(n_$N){return this._camera=n_$N.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),n_$MC.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},n_$N._render=function(n_$N){this._isDead||(n_$_.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),n_$E.drawCall++,n_$E.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},n_$N._getVertexBuffer=function(n_$N){return void 0===n_$N&&(n_$N=0),0===n_$N?this._vertexBuffer1:1===n_$N?this._vertexBuffer2:null},n_$N._getVertexBuffers=function(){return this._vertexBuffers},n_$N._getIndexBuffer=function(){return null},n_$N.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},n_$N._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},n_$z(0,n_$N,"_vertexBufferCount",function(){return this._vertexBuffers.length}),n_$z(0,n_$N,"triangleCount",function(){return 0}),n_$C.renderElementCount=0}(),function(){function n_$N(){}n_$G(n_$N,"laya.d3.core.trail.VertexTrail");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration1}),n_$z(1,n_$N,"vertexDeclaration1",function(){return n_$N._vertexDeclaration1}),n_$z(1,n_$N,"vertexDeclaration2",function(){return n_$N._vertexDeclaration2}),n_$$(n_$N,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new n_$JN(32,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",41),new n_$MN(24,"single",33),new n_$MN(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new n_$JN(4,[new n_$MN(0,"single",38)])}]),n_$N}()),n_$NN=function(){function n_$v(n_$N){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=n_$N}n_$G(n_$v,"laya.d3.graphics.DynamicBatch");var n_$N=n_$v.prototype;return n_$X.imps(n_$N,{"laya.d3.core.render.IRenderable":!0}),n_$N._getVertexBuffer=function(n_$N){return void 0===n_$N&&(n_$N=0),0===n_$N?this._vertexBuffer:null},n_$N._getIndexBuffer=function(){return this._indexBuffer},n_$N._getCombineRenderElementFromPool=function(n_$N,n_$C,n_$a){var n_$u=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return n_$u||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=n_$u=new n_$m,n_$u._sprite3D=new n_$bC),n_$u._sprite3D._render._renderUpdate(n_$a),n_$u},n_$N._getRenderElement=function(n_$N,n_$C,n_$a){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*n_$v.maxVertexCount),this._indexDatas=new Uint16Array(n_$v.maxIndexCount),this._vertexBuffer=n_$RC.create(this._vertexDeclaration,n_$v.maxVertexCount,35048),this._indexBuffer=n_$LC.create("ushort",n_$v.maxIndexCount,35048));for(var n_$u=this._merageElements.length=0,n_$e=0,n_$J=0,n_$M=this._combineRenderElements.length;n_$J<n_$M;n_$J++){var n_$n=this._combineRenderElements[n_$J],n_$V=n_$n.getDynamicBatchBakedVertexs(0),n_$A=n_$n.getBakedIndices(),n_$P=n_$n._sprite3D.transform._isFrontFaceInvert,n_$$=n_$u/(this._vertexDeclaration.vertexStride/4),n_$O=n_$e,n_$G=n_$O+n_$A.length;n_$n._tempBatchIndexStart=n_$O,n_$n._tempBatchIndexEnd=n_$G,this._indexDatas.set(n_$A,n_$e);var n_$z=0;if(n_$P)for(n_$z=n_$O;n_$z<n_$G;n_$z+=3){this._indexDatas[n_$z]=n_$$+this._indexDatas[n_$z];var n_$f=this._indexDatas[n_$z+1],n_$t=this._indexDatas[n_$z+2];this._indexDatas[n_$z+1]=n_$$+n_$t,this._indexDatas[n_$z+2]=n_$$+n_$f}else for(n_$z=n_$O;n_$z<n_$G;n_$z+=3)this._indexDatas[n_$z]=n_$$+this._indexDatas[n_$z],this._indexDatas[n_$z+1]=n_$$+this._indexDatas[n_$z+1],this._indexDatas[n_$z+2]=n_$$+this._indexDatas[n_$z+2];n_$e+=n_$A.length,this._vertexDatas.set(n_$V,n_$u),n_$u+=n_$V.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),n_$J=this._combineRenderElementPoolIndex=0,n_$M=this._materials.length;n_$J<n_$M;n_$J++){var n_$g=this._getCombineRenderElementFromPool(n_$N,n_$C,n_$a);n_$g._type=2,n_$g._staticBatch=null;var n_$x=(n_$g.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[n_$J]]._tempBatchIndexStart,n_$W=n_$J+1===this._materialToRenderElementsOffsets.length?n_$e:this._combineRenderElements[this._materialToRenderElementsOffsets[n_$J+1]]._tempBatchIndexStart;n_$g._tempBatchIndexStart=n_$x,n_$g._tempBatchIndexEnd=n_$W,n_$g._material=this._materials[n_$J],this._merageElements.push(n_$g)}},n_$N._addCombineRenderObjTest=function(n_$N){var n_$C=n_$N.renderObj,n_$a=this._currentCombineIndexCount+n_$C._getIndexBuffer().indexCount,n_$u=this._currentCombineVertexCount+n_$C._getVertexBuffer().vertexCount;return!(n_$v.maxVertexCount<n_$u||n_$v.maxIndexCount<n_$a)},n_$N._addCombineRenderObj=function(n_$N){var n_$C=n_$N.renderObj;this._combineRenderElements.push(n_$N),this._currentCombineIndexCount=this._currentCombineIndexCount+n_$C._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+n_$C._getVertexBuffer().vertexCount},n_$N._addCombineMaterial=function(n_$N){this._materials.push(n_$N)},n_$N._addMaterialToRenderElementOffset=function(n_$N){this._materialToRenderElementsOffsets.push(n_$N)},n_$N._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},n_$N._addToRenderQueue=function(n_$N,n_$C,n_$a,n_$u){this._getRenderElement(n_$C,n_$a,n_$u);for(var n_$e=0,n_$J=this._materials.length;n_$e<n_$J;n_$e++)n_$N.getRenderQueue(this._materials[n_$e].renderQueue)._addDynamicBatchElement(this._merageElements[n_$e])},n_$N._beforeRender=function(n_$N){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},n_$N._render=function(n_$N){var n_$C=n_$N._batchIndexEnd-n_$N._batchIndexStart;n_$_.mainContext.drawElements(4,n_$C,5123,2*n_$N._batchIndexStart),n_$E.drawCall++,n_$E.trianglesFaces+=n_$C/3},n_$N._getVertexBuffers=function(){return null},n_$z(0,n_$N,"_vertexBufferCount",function(){return 1}),n_$z(0,n_$N,"triangleCount",function(){return this._indexBuffer.indexCount/3}),n_$z(0,n_$N,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),n_$v.maxVertexCount=2e4,n_$v.maxIndexCount=4e4,n_$v.maxCombineTriangleCount=10,n_$v}(),n_$CN=function(){function n_$v(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}n_$G(n_$v,"laya.d3.graphics.DynamicBatchManager");var n_$N=n_$v.prototype;return n_$N.getDynamicBatch=function(n_$N,n_$C){var n_$a,n_$u=n_$N.id.toString()+n_$C;return this._dynamicBatches[n_$u]?n_$a=this._dynamicBatches[n_$u]:this._dynamicBatches[n_$u]=n_$a=new n_$NN(n_$N),n_$a},n_$N._garbageCollection=function(){for(var n_$N in this._dynamicBatches)0===this._dynamicBatches[n_$N].combineRenderElementsCount&&delete this._dynamicBatches[n_$N]},n_$N._addPrepareRenderElement=function(n_$N){this._prepareDynamicBatchCombineElements.push(n_$N)},n_$N._finishCombineDynamicBatch=function(n_$N){var n_$C,n_$a,n_$u;this._prepareDynamicBatchCombineElements.sort(n_$v._sortPrepareDynamicBatch);for(var n_$e,n_$J,n_$M,n_$n,n_$V,n_$A=-1,n_$P=!0,n_$$=0,n_$O=-1,n_$G=0,n_$z=this._prepareDynamicBatchCombineElements.length;n_$G<n_$z;n_$G++){var n_$f=(n_$J=this._prepareDynamicBatchCombineElements[n_$G]).renderObj._getVertexBuffer(0).vertexDeclaration,n_$t=n_$a!==n_$f;n_$t&&(n_$$=0,n_$a=n_$f);var n_$g=n_$$!==n_$A;if(n_$g&&(n_$A=n_$$),(n_$t||n_$g)&&(n_$M=this.getDynamicBatch(n_$f,n_$$),n_$C=null),n_$P)if(n_$M._addCombineRenderObjTest(n_$J)){if(n_$C!==(n_$e=n_$J._material))n_$n&&(n_$N.getRenderQueue(n_$V._material.renderQueue)._addRenderElement(n_$V),n_$V=n_$n=null,n_$O=-1),n_$n=n_$e,n_$O=n_$M.combineRenderElementsCount,n_$V=n_$J,n_$C=n_$e;else if(n_$n){var n_$x=n_$V.renderObj,n_$W=n_$J.renderObj;n_$x._getVertexBuffer().vertexCount+n_$W._getVertexBuffer().vertexCount>n_$NN.maxVertexCount||n_$x._getIndexBuffer().indexCount+n_$W._getIndexBuffer().indexCount>n_$NN.maxIndexCount?(n_$N.getRenderQueue(n_$V._material.renderQueue)._addRenderElement(n_$V),n_$n=n_$e,n_$O=n_$M.combineRenderElementsCount,n_$V=n_$J):(n_$M._addCombineMaterial(n_$n),n_$M._addMaterialToRenderElementOffset(n_$O),n_$M._addCombineRenderObj(n_$V),n_$V=n_$n=null,n_$O=-1,n_$M._addCombineRenderObj(n_$J))}else n_$M._addCombineRenderObj(n_$J);n_$P=!0}else n_$n&&(n_$N.getRenderQueue(n_$V._material.renderQueue)._addRenderElement(n_$V),n_$V=n_$n=null,n_$O=-1),n_$$++,n_$P=!1;else n_$u=this._prepareDynamicBatchCombineElements[n_$G-1],n_$M._addMaterialToRenderElementOffset(n_$M.combineRenderElementsCount),n_$C=n_$u._material,n_$M._addCombineMaterial(n_$C),n_$M._addCombineRenderObj(n_$u),n_$P=!0,n_$C!==(n_$e=n_$J._material)?(n_$n=n_$e,n_$O=n_$M.combineRenderElementsCount,n_$V=n_$J):n_$M._addCombineRenderObj(n_$J),n_$C=n_$e}n_$n&&(n_$N.getRenderQueue(n_$V._material.renderQueue)._addRenderElement(n_$V),n_$V=n_$n=null,n_$O=-1),this._prepareDynamicBatchCombineElements.length=0},n_$N._clearRenderElements=function(){for(var n_$N in this._dynamicBatches)this._dynamicBatches[n_$N]._clearRenderElements()},n_$N._addToRenderQueue=function(n_$N,n_$C,n_$a,n_$u){for(var n_$e in this._dynamicBatches){var n_$J=this._dynamicBatches[n_$e];0<n_$J.combineRenderElementsCount&&n_$J._addToRenderQueue(n_$N,n_$C,n_$a,n_$u)}},n_$N.dispose=function(){this._dynamicBatches=null},n_$v._sortPrepareDynamicBatch=function(n_$N,n_$C){return n_$N._mainSortID-n_$C._mainSortID},n_$v}(),n_$aN=function(){function n_$N(){}return n_$G(n_$N,"laya.d3.graphics.FrustumCulling"),n_$N.renderShadowObjectCulling=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=0,n_$M=0,n_$n=0,n_$V=0;for(n_$J=0,n_$n=n_$a.length;n_$J<n_$n;n_$J++){var n_$A=n_$a[n_$J];n_$A&&n_$A._clearRenderElements()}var n_$P,n_$$,n_$O,n_$G=n_$N._cullingRenders;if(1<n_$e){for(n_$J=0,n_$n=n_$N._cullingRendersLength;n_$J<n_$n;n_$J++)if((n_$P=n_$G[n_$J]).castShadow&&n_$l.isVisible(n_$P._owner.layer.mask)&&n_$P.enable)for(var n_$z=1,n_$f=n_$C.length;n_$z<n_$f;n_$z++)if(n_$$=n_$a[n_$z-1],0!==n_$C[n_$z].containsBoundSphere(n_$P.boundingSphere))for(n_$M=0,n_$V=(n_$O=n_$P._renderElements).length;n_$M<n_$V;n_$M++)n_$$._addRenderElement(n_$O[n_$M])}else for(n_$J=0,n_$n=n_$N._cullingRendersLength;n_$J<n_$n;n_$J++)if((n_$P=n_$G[n_$J]).castShadow&&n_$l.isVisible(n_$P._owner.layer.mask)&&n_$P.enable&&0!==n_$C[0].containsBoundSphere(n_$P.boundingSphere))for(n_$P._renderUpdate(n_$u),n_$$=n_$a[0],n_$M=0,n_$V=(n_$O=n_$P._renderElements).length;n_$M<n_$V;n_$M++)n_$$._addRenderElement(n_$O[n_$M])},n_$N.renderShadowObjectCullingOctree=function(n_$N,n_$C,n_$a,n_$u,n_$e){for(var n_$J=0,n_$M=n_$a.length;n_$J<n_$M;n_$J++){var n_$n=n_$a[n_$J];n_$n&&n_$n._clearRenderElements()}1<n_$e?n_$N.treeRoot.cullingShadowObjects(n_$C,n_$a,!0,0,n_$N):n_$N.treeRoot.cullingShadowObjectsOnePSSM(n_$C[0],n_$a,n_$u,!0,0,n_$N)},n_$N.renderObjectCulling=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=0,n_$n=0,n_$V=0,n_$A=0,n_$P=n_$C._quenes,n_$$=n_$C._dynamicBatchManager,n_$O=n_$C._cullingRenders;for(n_$M=0,n_$n=n_$P.length;n_$M<n_$n;n_$M++){var n_$G=n_$P[n_$M];n_$G&&n_$G._clearRenderElements()}var n_$z=n_$uN._staticBatchManagers;for(n_$M=0,n_$n=n_$z.length;n_$M<n_$n;n_$M++)n_$z[n_$M]._clearRenderElements();n_$$._clearRenderElements();var n_$f=n_$a.transform.position;for(n_$M=0,n_$n=n_$C._cullingRendersLength;n_$M<n_$n;n_$M++){var n_$t=n_$O[n_$M];if(n_$l.isVisible(n_$t._owner.layer.mask)&&n_$t.enable&&0!==n_$N.containsBoundSphere(n_$t.boundingSphere)&&n_$t._renderUpdate(n_$J)){n_$t._distanceForSort=n_$MC.distance(n_$t.boundingSphere.center,n_$f)+n_$t.sortingFudge;var n_$g=n_$t._renderElements;for(n_$V=0,n_$A=n_$g.length;n_$V<n_$A;n_$V++){var n_$x=n_$g[n_$V],n_$W=n_$x._staticBatch;if(n_$W&&n_$W._material===n_$x._material)n_$W._addBatchRenderElement(n_$x);else{var n_$v=n_$x.renderObj;n_$v.triangleCount<10&&1===n_$v._vertexBufferCount&&n_$v._getIndexBuffer()&&n_$x._material.renderQueue<2&&n_$x._canDynamicBatch&&!n_$t._owner.isStatic?n_$$._addPrepareRenderElement(n_$x):n_$C.getRenderQueue(n_$x._material.renderQueue)._addRenderElement(n_$x)}}}}for(n_$M=0,n_$n=n_$z.length;n_$M<n_$n;n_$M++)n_$z[n_$M]._addToRenderQueue(n_$C,n_$u,n_$e,n_$J);n_$$._finishCombineDynamicBatch(n_$C),n_$$._addToRenderQueue(n_$C,n_$u,n_$e,n_$J)},n_$N.renderObjectCullingOctree=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=0,n_$n=0,n_$V=n_$C._quenes,n_$A=n_$C._dynamicBatchManager;for(n_$M=0,n_$n=n_$V.length;n_$M<n_$n;n_$M++){var n_$P=n_$V[n_$M];n_$P&&n_$P._clearRenderElements()}var n_$$=n_$uN._staticBatchManagers;for(n_$M=0,n_$n=n_$$.length;n_$M<n_$n;n_$M++)n_$$[n_$M]._clearRenderElements();for(n_$A._clearRenderElements(),n_$C._cullingRenders.length=0,n_$C.treeRoot.cullingObjects(n_$N,!0,0,n_$a.transform.position,n_$J),n_$M=0,n_$n=n_$$.length;n_$M<n_$n;n_$M++)n_$$[n_$M]._addToRenderQueue(n_$C,n_$u,n_$e,n_$J);n_$A._finishCombineDynamicBatch(n_$C),n_$A._addToRenderQueue(n_$C,n_$u,n_$e,n_$J)},n_$N.renderObjectCullingNoBoundFrustum=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=0,n_$M=0,n_$n=0,n_$V=0,n_$A=n_$N._quenes,n_$P=n_$N._dynamicBatchManager,n_$$=n_$N._cullingRenders;for(n_$J=0,n_$M=n_$A.length;n_$J<n_$M;n_$J++){var n_$O=n_$A[n_$J];n_$O&&n_$O._clearRenderElements()}var n_$G=n_$uN._staticBatchManagers;for(n_$J=0,n_$M=n_$G.length;n_$J<n_$M;n_$J++)n_$G[n_$J]._clearRenderElements();n_$P._clearRenderElements();var n_$z=n_$C.transform.position;for(n_$J=0,n_$M=n_$N._cullingRendersLength;n_$J<n_$M;n_$J++){var n_$f=n_$$[n_$J];if(n_$l.isVisible(n_$f._owner.layer.mask)&&n_$f.enable){n_$f._renderUpdate(n_$e),n_$f._distanceForSort=n_$MC.distance(n_$f.boundingSphere.center,n_$z)+n_$f.sortingFudge;var n_$t=n_$f._renderElements;for(n_$n=0,n_$V=n_$t.length;n_$n<n_$V;n_$n++){var n_$g=n_$t[n_$n],n_$x=n_$g._staticBatch;if(n_$x&&n_$x._material===n_$g._material)n_$x._addBatchRenderElement(n_$g);else{var n_$W=n_$g.renderObj;n_$W.triangleCount<10&&1===n_$W._vertexBufferCount&&n_$W._getIndexBuffer()&&n_$g._material.renderQueue<2&&n_$g._canDynamicBatch&&!n_$f._owner.isStatic?n_$P._addPrepareRenderElement(n_$g):n_$N.getRenderQueue(n_$g._material.renderQueue)._addRenderElement(n_$g)}}}}for(n_$J=0,n_$M=n_$G.length;n_$J<n_$M;n_$J++)n_$G[n_$J]._addToRenderQueue(n_$N,n_$a,n_$u,n_$e);n_$P._finishCombineDynamicBatch(n_$N),n_$P._addToRenderQueue(n_$N,n_$a,n_$u,n_$e)},n_$N}(),n_$uN=function(){function n_$J(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}n_$G(n_$J,"laya.d3.graphics.StaticBatchManager");var n_$N=n_$J.prototype;return n_$N._finishInit=function(){for(var n_$N in this._staticBatches)this._staticBatches[n_$N]._finishInit();this._initBatchRenderElements.length=0},n_$N._initStaticBatchs=function(n_$N){throw new Error("StaticBatchManager:must override this function.")},n_$N._addInitBatchSprite=function(n_$N){for(var n_$C=n_$N._render._renderElements,n_$a=0,n_$u=n_$C.length;n_$a<n_$u;n_$a++)this._initBatchRenderElements.push(n_$C[n_$a])},n_$N._clearRenderElements=function(){for(var n_$N in this._staticBatches)this._staticBatches[n_$N]._clearRenderElements()},n_$N._garbageCollection=function(n_$N){var n_$C=n_$N._staticBatch,n_$a=n_$C._initBatchRenderElements,n_$u=n_$a.indexOf(n_$N);n_$a.splice(n_$u,1),0===n_$a.length&&(n_$C.dispose(),delete this._staticBatches[n_$C._key])},n_$N._addToRenderQueue=function(n_$N,n_$C,n_$a,n_$u){for(var n_$e in this._staticBatches){var n_$J=this._staticBatches[n_$e];0<n_$J._batchRenderElements.length&&n_$J._updateToRenderQueue(n_$N,n_$u)}},n_$N.dispose=function(){this._staticBatches=null},n_$J._addToStaticBatchQueue=function(n_$N){n_$N instanceof laya.d3.core.RenderableSprite3D&&n_$N._addToInitStaticBatchManager();for(var n_$C=0,n_$a=n_$N.numChildren;n_$C<n_$a;n_$C++)n_$J._addToStaticBatchQueue(n_$N._childs[n_$C])},n_$J.combine=function(n_$N,n_$C){var n_$a,n_$u=0,n_$e=0;if(n_$C)for(n_$u=0,n_$e=n_$C.length;n_$u<n_$e;n_$u++){n_$C[n_$u]._addToInitStaticBatchManager()}else n_$N&&n_$J._addToStaticBatchQueue(n_$N);for(n_$u=0,n_$e=n_$J._staticBatchManagers.length;n_$u<n_$e;n_$u++)(n_$a=n_$J._staticBatchManagers[n_$u])._initStaticBatchs(n_$N),n_$a._finishInit()},n_$J._staticBatchManagers=[],n_$J}(),n_$eN=function(){function n_$N(n_$N,n_$C,n_$a){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=n_$N,this._manager=n_$C,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=n_$a}n_$G(n_$N,"laya.d3.graphics.StaticBatch");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),n_$C._binarySearch=function(n_$N){for(var n_$C=0,n_$a=this._batchRenderElements.length-1,n_$u=0;n_$C<=n_$a;)n_$u=Math.floor((n_$C+n_$a)/2),this._compareBatchRenderElement(this._batchRenderElements[n_$u],n_$N)?n_$a=n_$u-1:n_$C=n_$u+1;return n_$C},n_$C._compareBatchRenderElement=function(n_$N,n_$C){throw new Error("StaticBatch:must override this function.")},n_$C._getVertexDecLightMap=function(n_$N){return n_$N===n_$LN.vertexDeclaration?n_$lN.vertexDeclaration:n_$N===n_$TN.vertexDeclaration?n_$QN.vertexDeclaration:n_$N===n_$FN.vertexDeclaration?n_$vN.vertexDeclaration:n_$N===n_$YN.vertexDeclaration?null:n_$N===n_$fN.vertexDeclaration?n_$tN.vertexDeclaration:n_$N===n_$wN.vertexDeclaration?n_$jN.vertexDeclaration:n_$N===n_$_N.vertexDeclaration?n_$dN.vertexDeclaration:n_$N===n_$RN.vertexDeclaration?n_$iN.vertexDeclaration:n_$N===n_$TN.vertexDeclaration?n_$QN.vertexDeclaration:n_$N===n_$DN.vertexDeclaration?n_$XN.vertexDeclaration:n_$N===n_$YN.vertexDeclaration?null:n_$N===n_$fN.vertexDeclaration?n_$tN.vertexDeclaration:n_$N===n_$BN.vertexDeclaration?n_$yN.vertexDeclaration:n_$N===n_$_N.vertexDeclaration?n_$dN.vertexDeclaration:n_$N},n_$C._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},n_$C._addBatchRenderElement=function(n_$N){this._batchRenderElements.splice(this._binarySearch(n_$N),0,n_$N)},n_$C._updateToRenderQueue=function(n_$N,n_$C){this._combineRenderElementPoolIndex=0,this._getRenderElement(n_$N.getRenderQueue(this._material.renderQueue)._renderElements,n_$N,n_$C)},n_$C._getRenderElement=function(n_$N,n_$C,n_$a){throw new Error("StaticBatch:must override this function.")},n_$C._finishInit=function(){throw new Error("StaticBatch:must override this function.")},n_$C._clearRenderElements=function(){this._batchRenderElements.length=0},n_$C.dispose=function(){},n_$C._getVertexBuffer=function(n_$N){return void 0===n_$N&&(n_$N=0),null},n_$C._getIndexBuffer=function(){return null},n_$C._beforeRender=function(n_$N){return!0},n_$C._render=function(n_$N){},n_$C._getVertexBuffers=function(){return null},n_$z(0,n_$C,"_vertexBufferCount",function(){return 1}),n_$z(0,n_$C,"triangleCount",function(){return 0}),n_$N.combine=function(n_$N){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),n_$uN.combine(n_$N)},n_$N.maxBatchVertexCount=65535,n_$N}(),n_$JN=function(){function n_$M(n_$N,n_$C){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++n_$M._uniqueIDCounter,this._id>n_$M.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",n_$M.maxVertexDeclaration);this._shaderValues=new n_$OC,this._vertexElementsDic={},this._vertexStride=n_$N,this._vertexElements=n_$C;for(var n_$a=0;n_$a<n_$C.length;n_$a++){var n_$u=n_$C[n_$a],n_$e=n_$u.elementUsage;this._vertexElementsDic[n_$e]=n_$u;var n_$J=[n_$M._getTypeSize(n_$u.elementFormat)/4,5126,!1,this._vertexStride,n_$u.offset];switch(this._shaderValues.setValue(n_$e,n_$J),n_$e){case 1:this._addShaderDefine(n_$EC.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(n_$EC.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(n_$EC.SHADERDEFINE_UV1)}}}n_$G(n_$M,"laya.d3.graphics.VertexDeclaration");var n_$N=n_$M.prototype;return n_$N._addShaderDefine=function(n_$N){this._shaderDefineValue|=n_$N},n_$N._removeShaderDefine=function(n_$N){this._shaderDefineValue&=~n_$N},n_$N.getVertexElements=function(){return this._vertexElements.slice()},n_$N.getVertexElementByUsage=function(n_$N){return this._vertexElementsDic[n_$N]},n_$N.unBinding=function(){},n_$z(0,n_$N,"shaderDefineValue",function(){return this._shaderDefineValue}),n_$z(0,n_$N,"id",function(){return this._id}),n_$z(0,n_$N,"vertexStride",function(){return this._vertexStride}),n_$z(0,n_$N,"shaderValues",function(){return this._shaderValues}),n_$M._getTypeSize=function(n_$N){switch(n_$N){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},n_$M.getVertexStride=function(n_$N){for(var n_$C=0,n_$a=0;n_$a<n_$N.Length;n_$a++){var n_$u=n_$N[n_$a],n_$e=n_$u.offset+n_$M._getTypeSize(n_$u.elementFormat);n_$C<n_$e&&(n_$C=n_$e)}return n_$C},n_$M._maxVertexDeclarationBit=1e3,n_$M._uniqueIDCounter=1,n_$$(n_$M,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),n_$M}(),n_$MN=function(){function n_$N(n_$N,n_$C,n_$a){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=n_$N,this.elementFormat=n_$C,this.elementUsage=n_$a}return n_$G(n_$N,"laya.d3.graphics.VertexElement"),n_$N}(),n_$nN=(function(){function n_$N(){}n_$G(n_$N,"laya.d3.graphics.VertexElementFormat"),n_$N.Single="single",n_$N.Vector2="vector2",n_$N.Vector3="vector3",n_$N.Vector4="vector4",n_$N.Color="color",n_$N.Byte4="byte4",n_$N.Short2="short2",n_$N.Short4="short4",n_$N.NormalizedShort2="normalizedshort2",n_$N.NormalizedShort4="normalizedshort4",n_$N.HalfVector2="halfvector2",n_$N.HalfVector4="halfvector4"}(),function(){function n_$N(){}n_$G(n_$N,"laya.d3.graphics.VertexElementUsage"),n_$N.POSITION0=0,n_$N.COLOR0=1,n_$N.TEXTURECOORDINATE0=2,n_$N.NORMAL0=3,n_$N.BINORMAL0=4,n_$N.TANGENT0=5,n_$N.BLENDINDICES0=6,n_$N.BLENDWEIGHT0=7,n_$N.DEPTH0=8,n_$N.FOG0=9,n_$N.POINTSIZE0=10,n_$N.SAMPLE0=11,n_$N.TESSELLATEFACTOR0=12,n_$N.COLOR1=13,n_$N.NEXTTEXTURECOORDINATE0=14,n_$N.TEXTURECOORDINATE1=15,n_$N.NEXTTEXTURECOORDINATE1=16,n_$N.CORNERTEXTURECOORDINATE0=17,n_$N.VELOCITY0=18,n_$N.STARTCOLOR0=19,n_$N.STARTSIZE=20,n_$N.AGEADDSCALE0=21,n_$N.STARTROTATION=22,n_$N.ENDCOLOR0=23,n_$N.STARTLIFETIME=24,n_$N.TIME0=33,n_$N.SHAPEPOSITIONSTARTLIFETIME=30,n_$N.DIRECTIONTIME=32,n_$N.SIZEROTATION0=27,n_$N.RADIUS0=28,n_$N.RADIAN0=29,n_$N.STARTSPEED=31,n_$N.RANDOM0=34,n_$N.RANDOM1=35,n_$N.SIMULATIONWORLDPOSTION=36,n_$N.SIMULATIONWORLDROTATION=37,n_$N.TEXTURECOORDINATE0X=38,n_$N.TEXTURECOORDINATE0X1=39,n_$N.TEXTURECOORDINATE0Y=40,n_$N.OFFSETVECTOR=41}(),function(){function n_$N(n_$N,n_$C,n_$a){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=n_$N,this._textureCoordinate0=n_$C,this._time=n_$a}n_$G(n_$N,"laya.d3.graphics.VertexGlitter");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"time",function(){return this._time}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(24,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector2",2),new n_$MN(20,"single",33)])}])}(),function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=n_$N,this._position=n_$C,this._velocity=n_$a,this._startColor=n_$u,this._endColor=n_$e,this._sizeRotation=n_$J,this._radius=n_$M,this._radian=n_$n,this._ageAddScale=n_$V,this._time=n_$A}n_$G(n_$N,"laya.d3.graphics.VertexParticle");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"endColor",function(){return this._endColor}),n_$z(0,n_$C,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),n_$z(0,n_$C,"sizeRotation",function(){return this._sizeRotation}),n_$z(0,n_$C,"velocity",function(){return this._velocity}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"startColor",function(){return this._startColor}),n_$z(0,n_$C,"radius",function(){return this._radius}),n_$z(0,n_$C,"radian",function(){return this._radian}),n_$z(0,n_$C,"ageAddScale",function(){return this._ageAddScale}),n_$z(0,n_$C,"time",function(){return this._time}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(116,[new n_$MN(0,"vector4",17),new n_$MN(16,"vector3",0),new n_$MN(28,"vector3",18),new n_$MN(40,"vector4",19),new n_$MN(56,"vector4",23),new n_$MN(72,"vector3",27),new n_$MN(84,"vector2",28),new n_$MN(92,"vector4",29),new n_$MN(108,"single",24),new n_$MN(112,"single",33)])}])}(),function(){function n_$N(n_$N){this._position=null,this._position=n_$N}n_$G(n_$N,"laya.d3.graphics.VertexPosition");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(12,[new n_$MN(0,"vector3",0)])}]),n_$N}()),n_$VN=function(){function n_$N(n_$N,n_$C){this._position=null,this._normal=null,this._position=n_$N,this._normal=n_$C}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormal");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(24,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3)])}]),n_$N}(),n_$AN=function(){function n_$N(n_$N,n_$C,n_$a){this._position=null,this._normal=null,this._color=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColor");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(40,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1)])}]),n_$N}(),n_$PN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._blendIndex=n_$u,this._blendWeight=n_$e}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorSkin");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(72,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector4",7),new n_$MN(56,"vector4",6)])}]),n_$N}(),n_$$N=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._tangent=n_$u,this._blendIndex=n_$e,this._blendWeight=n_$J}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(88,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector4",7),new n_$MN(56,"vector4",6),new n_$MN(72,"vector4",5)])}]),n_$N}(),n_$ON=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._tangent=n_$u,this._blendIndex=n_$e,this._blendWeight=n_$J}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(84,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector4",7),new n_$MN(56,"vector4",6),new n_$MN(72,"vector3",5)])}]),n_$N}(),n_$GN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._tangent=n_$u}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(56,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector4",5)])}]),n_$N}(),n_$zN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._tangent=n_$u}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(52,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector3",5)])}]),n_$N}(),n_$fN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate=n_$u}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTexture");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(48,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2)])}]),n_$N}(),n_$tN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate0=n_$u,this._textureCoordinate1=n_$e}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(56,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector2",15)])}]),n_$N}(),n_$gN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate0=n_$u,this._textureCoordinate1=n_$e,this._blendIndex=n_$J,this._blendWeight=n_$M}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(88,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector2",15),new n_$MN(56,"vector4",7),new n_$MN(72,"vector4",6)])}]),n_$N}(),n_$xN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate0=n_$u,this._textureCoordinate1=n_$e,this._tangent=n_$J,this._blendIndex=n_$M,this._blendWeight=n_$n}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(104,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector2",15),new n_$MN(56,"vector4",7),new n_$MN(72,"vector4",6),new n_$MN(88,"vector4",5)])}]),n_$N}(),n_$WN=function(){function n_$N(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$C.VertexPositionNormalColorTexture0SkinTangent=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate0=n_$u,this._textureCoordinate1=n_$e,this._tangent=n_$J,this._blendIndex=n_$M,this._blendWeight=n_$n},n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(100,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector2",15),new n_$MN(56,"vector4",7),new n_$MN(72,"vector4",6),new n_$MN(88,"vector3",5)])}]),n_$N}(),n_$vN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate0=n_$u,this._textureCoordinate1=n_$e,this._tangent=n_$J}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(72,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector2",15),new n_$MN(56,"vector4",5)])}]),n_$N}(),n_$XN=function(){function n_$N(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$C.VertexPositionNormalColorTexture0Tangent=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate0=n_$u,this._textureCoordinate1=n_$e,this._tangent=n_$J},n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(68,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector2",15),new n_$MN(56,"vector3",5)])}]),n_$N}(),n_$rN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate=n_$u,this._blendIndex=n_$e,this._blendWeight=n_$J}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(80,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector4",7),new n_$MN(64,"vector4",6)])}]),n_$N}(),n_$cN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate=n_$u,this._tangent=n_$e,this._blendIndex=n_$J,this._blendWeight=n_$M}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(96,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector4",7),new n_$MN(64,"vector4",6),new n_$MN(80,"vector4",5)])}]),n_$N}(),n_$EN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate=n_$u,this._tangent=n_$e,this._blendIndex=n_$J,this._blendWeight=n_$M}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(92,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector4",7),new n_$MN(64,"vector4",6),new n_$MN(80,"vector3",5)])}]),n_$N}(),n_$FN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate=n_$u,this._tangent=n_$e}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(64,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector4",5)])}]),n_$N}(),n_$DN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._color=n_$a,this._textureCoordinate=n_$u,this._tangent=n_$e}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"color",function(){return this._color}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(60,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",1),new n_$MN(40,"vector2",2),new n_$MN(48,"vector3",5)])}]),n_$N}(),n_$sN=function(){function n_$N(n_$N,n_$C,n_$a){this._position=null,this._normal=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._tangent=n_$a}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(40,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector4",5)])}]),n_$N}(),n_$qN=function(){function n_$N(n_$N,n_$C,n_$a){this._position=null,this._normal=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._tangent=n_$a}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(36,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector3",5)])}]),n_$N}(),n_$_N=function(){function n_$N(n_$N,n_$C,n_$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTexture");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(32,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2)])}]),n_$N}(),n_$dN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate0=n_$a,this._textureCoordinate1=n_$u}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(40,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector2",15)])}]),n_$N}(),n_$QN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate0=n_$a,this._textureCoordinate1=n_$u,this._blendIndex=n_$e,this._blendWeight=n_$J}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(72,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector2",15),new n_$MN(40,"vector4",7),new n_$MN(56,"vector4",6)])}]),n_$N}(),n_$lN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate0=n_$a,this._textureCoordinate1=n_$u,this._tangent=n_$e,this._blendIndex=n_$J,this._blendWeight=n_$M}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(88,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector2",15),new n_$MN(40,"vector4",7),new n_$MN(56,"vector4",6),new n_$MN(72,"vector4",5)])}]),n_$N}(),n_$iN=function(){function n_$N(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$C.VertexPositionNormalTexture0SkinTangent=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){this._position=n_$N,this._normal=n_$C,this._textureCoordinate0=n_$a,this._textureCoordinate1=n_$u,this._tangent=n_$e,this._blendIndex=n_$J,this._blendWeight=n_$M},n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(84,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector2",15),new n_$MN(40,"vector4",7),new n_$MN(56,"vector4",6),new n_$MN(72,"vector3",5)])}]),n_$N}(),n_$jN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate0=n_$a,this._textureCoordinate1=n_$u,this._tangent=n_$e}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(56,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector2",15),new n_$MN(40,"vector4",5)])}]),n_$N}(),n_$yN=function(){function n_$N(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$C.VertexPositionNormalTexture0Tangent=function(n_$N,n_$C,n_$a,n_$u,n_$e){this._position=n_$N,this._normal=n_$C,this._textureCoordinate0=n_$a,this._textureCoordinate1=n_$u,this._tangent=n_$e},n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(52,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector2",15),new n_$MN(40,"vector3",5)])}]),n_$N}(),n_$TN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a,this._blendIndex=n_$u,this._blendWeight=n_$e}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTextureSkin");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(64,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector4",7),new n_$MN(48,"vector4",6)])}]),n_$N}(),n_$LN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a,this._tangent=n_$u,this._blendIndex=n_$e,this._blendWeight=n_$J}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(80,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector4",7),new n_$MN(48,"vector4",6),new n_$MN(64,"vector4",5)])}]),n_$N}(),n_$RN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a,this._tangent=n_$u,this._blendIndex=n_$e,this._blendWeight=n_$J}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(76,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector4",7),new n_$MN(48,"vector4",6),new n_$MN(64,"vector3",5)])}]),n_$N}(),n_$wN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a,this._tangent=n_$u}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(48,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector4",5)])}]),n_$N}(),n_$BN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a,this._tangent=n_$u}n_$G(n_$N,"laya.d3.graphics.VertexPositionNormalTextureTangent");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(44,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector3",5)])}]),n_$N}(),n_$YN=function(){function n_$N(n_$N,n_$C,n_$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a}n_$G(n_$N,"laya.d3.graphics.VertexPositionNTBTexture");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(56,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector3",5),new n_$MN(36,"vector3",4),new n_$MN(48,"vector2",2)])}]),n_$N}(),n_$KN=function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate0=n_$u,this._textureCoordinate1=n_$e,this._tangent=n_$J,n_$a=n_$a,this._blendIndex=n_$M,this._blendWeight=n_$n}n_$G(n_$N,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"tangent",function(){return this._tangent}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(0,n_$C,"textureCoordinate1",function(){return this._textureCoordinate1}),n_$z(0,n_$C,"blendIndex",function(){return this._blendIndex}),n_$z(0,n_$C,"blendWeight",function(){return this._blendWeight}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(96,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector3",5),new n_$MN(36,"vector3",4),new n_$MN(48,"vector2",2),new n_$MN(56,"vector2",15),new n_$MN(64,"vector4",7),new n_$MN(80,"vector4",6)])}]),n_$N}(),n_$kN=function(){function n_$N(n_$N,n_$C,n_$a){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=n_$N,this._normal=n_$C,this._textureCoordinate=n_$a}n_$G(n_$N,"laya.d3.graphics.VertexPositionNTBTextureSkin");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"textureCoordinate",function(){return this._textureCoordinate}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(88,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector3",5),new n_$MN(36,"vector3",4),new n_$MN(48,"vector2",2),new n_$MN(56,"vector4",7),new n_$MN(72,"vector4",6)])}]),n_$N}(),n_$SN=(function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=n_$N,this._normal=n_$C,this._textureCoord0=n_$a,this._textureCoord1=n_$u}n_$G(n_$N,"laya.d3.graphics.VertexPositionTerrain");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"normal",function(){return this._normal}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoord0",function(){return this._textureCoord0}),n_$z(0,n_$C,"textureCoord1",function(){return this._textureCoord1}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(40,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector3",3),new n_$MN(24,"vector2",2),new n_$MN(32,"vector2",15)])}])}(),function(){function n_$N(n_$N,n_$C){this._position=null,this._textureCoordinate0=null,this._position=n_$N,this._textureCoordinate0=n_$C}n_$G(n_$N,"laya.d3.graphics.VertexPositionTexture0");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"position",function(){return this._position}),n_$z(0,n_$C,"textureCoordinate0",function(){return this._textureCoordinate0}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(20,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector2",2)])}]),n_$N}()),n_$pN=(function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$,n_$O,n_$G){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=n_$N,this._positionStartLifeTime=n_$C,this._velocity=n_$a,this._startColor=n_$u,this._startSize=n_$e,this._startRotation0=n_$J,this._startRotation1=n_$M,this._startRotation2=n_$n,this._startLifeTime=n_$V,this._time=n_$A,this._startSpeed=n_$P,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=n_$G}n_$G(n_$N,"laya.d3.graphics.VertexShurikenParticleBillboard");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),n_$z(0,n_$C,"random1",function(){return this._randoms1}),n_$z(0,n_$C,"startRotation2",function(){return this._startRotation2}),n_$z(0,n_$C,"positionStartLifeTime",function(){return this._positionStartLifeTime}),n_$z(0,n_$C,"velocity",function(){return this._velocity}),n_$z(0,n_$C,"random0",function(){return this._randoms0}),n_$z(0,n_$C,"startSize",function(){return this._startSize}),n_$z(0,n_$C,"startColor",function(){return this._startColor}),n_$z(0,n_$C,"startRotation0",function(){return this._startRotation0}),n_$z(0,n_$C,"startRotation1",function(){return this._startRotation1}),n_$z(0,n_$C,"startLifeTime",function(){return this._startLifeTime}),n_$z(0,n_$C,"time",function(){return this._time}),n_$z(0,n_$C,"startSpeed",function(){return this._startSpeed}),n_$z(0,n_$C,"simulationWorldPostion",function(){return this._simulationWorldPostion}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(152,[new n_$MN(0,"vector4",17),new n_$MN(16,"vector4",30),new n_$MN(32,"vector4",32),new n_$MN(48,"vector4",19),new n_$MN(64,"vector3",20),new n_$MN(76,"vector3",22),new n_$MN(88,"single",31),new n_$MN(92,"vector4",34),new n_$MN(108,"vector4",35),new n_$MN(124,"vector3",36),new n_$MN(136,"vector4",37)])}])}(),function(){function n_$N(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$,n_$O,n_$G){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=n_$N,this._positionStartLifeTime=n_$C,this._velocity=n_$a,this._startColor=n_$u,this._startSize=n_$e,this._startRotation0=n_$J,this._startRotation1=n_$M,this._startRotation2=n_$n,this._startLifeTime=n_$V,this._time=n_$A,this._startSpeed=n_$P,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=n_$G}n_$G(n_$N,"laya.d3.graphics.VertexShurikenParticleMesh");var n_$C=n_$N.prototype;n_$X.imps(n_$C,{"laya.d3.graphics.IVertex":!0}),n_$z(0,n_$C,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),n_$z(0,n_$C,"velocity",function(){return this._velocity}),n_$z(0,n_$C,"position",function(){return this._positionStartLifeTime}),n_$z(0,n_$C,"random0",function(){return this._randoms0}),n_$z(0,n_$C,"startSize",function(){return this._startSize}),n_$z(0,n_$C,"startColor",function(){return this._startColor}),n_$z(0,n_$C,"startRotation0",function(){return this._startRotation0}),n_$z(0,n_$C,"startRotation1",function(){return this._startRotation1}),n_$z(0,n_$C,"random1",function(){return this._randoms1}),n_$z(0,n_$C,"startRotation2",function(){return this._startRotation2}),n_$z(0,n_$C,"startLifeTime",function(){return this._startLifeTime}),n_$z(0,n_$C,"time",function(){return this._time}),n_$z(0,n_$C,"startSpeed",function(){return this._startSpeed}),n_$z(0,n_$C,"simulationWorldPostion",function(){return this._simulationWorldPostion}),n_$z(0,n_$C,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$z(1,n_$N,"vertexDeclaration",function(){return n_$N._vertexDeclaration}),n_$$(n_$N,["_vertexDeclaration",function(){return this._vertexDeclaration=new n_$JN(172,[new n_$MN(0,"vector3",0),new n_$MN(12,"vector4",1),new n_$MN(28,"vector2",2),new n_$MN(36,"vector4",30),new n_$MN(52,"vector4",32),new n_$MN(68,"vector4",19),new n_$MN(84,"vector3",20),new n_$MN(96,"vector3",22),new n_$MN(108,"single",31),new n_$MN(112,"vector4",34),new n_$MN(128,"vector4",35),new n_$MN(144,"vector3",36),new n_$MN(156,"vector4",37)])}])}(),function(){function n_$W(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=n_$a,this._materials=n_$u,this._subMeshes=n_$e,this._materialMap=n_$J,this._version=n_$C,this._onLoaded(n_$N)}n_$G(n_$W,"laya.d3.loaders.LoadModelV01");var n_$N=n_$W.prototype;return n_$N._onLoaded=function(n_$N){this._readData=n_$N,this.READ_BLOCK();for(var n_$C=0;n_$C<this._BLOCK.count;n_$C++){var n_$a=this._readData.getUint16(),n_$u=this._strings[n_$a],n_$e=this["READ_"+n_$u];if(null==n_$e)throw new Error("model file err,no this function:"+n_$a+" "+n_$u);if(!n_$e.call(this))break}return this._mesh},n_$N.onError=function(){},n_$N._readString=function(){return this._strings[this._readData.getUint16()]},n_$N.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},n_$N.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},n_$N.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var n_$N=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var n_$C=0;n_$C<this._STRINGS.size;n_$C++)this._strings[n_$C]=this._readData.readUTFString();return this._readData.pos=n_$N,!0},n_$N.READ_MATERIAL=function(){var n_$N=this._readData.getUint16(),n_$C=(this._readString(),this._readString());return this._materials[n_$N]="null"!==n_$C?n_$g.getRes(this._materialMap[n_$C]):new n_$qC,!0},n_$N.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var n_$N,n_$C=this._readData.__getBuffer(),n_$a=0,n_$u=this._readData.getUint32(),n_$e=this._readData.getUint32(),n_$J=(new Float32Array(n_$C.slice(n_$u+this._DATA.offset,n_$u+this._DATA.offset+n_$e)),this._readData.getUint32()),n_$M=this._readData.getUint32(),n_$n=new Float32Array(n_$C.slice(n_$J+this._DATA.offset,n_$J+this._DATA.offset+n_$M));for(this.mesh._inverseBindPoses=[],n_$a=0,n_$N=n_$n.length;n_$a<n_$N;n_$a+=16){var n_$V=new n_$NC(n_$n[n_$a+0],n_$n[n_$a+1],n_$n[n_$a+2],n_$n[n_$a+3],n_$n[n_$a+4],n_$n[n_$a+5],n_$n[n_$a+6],n_$n[n_$a+7],n_$n[n_$a+8],n_$n[n_$a+9],n_$n[n_$a+10],n_$n[n_$a+11],n_$n[n_$a+12],n_$n[n_$a+13],n_$n[n_$a+14],n_$n[n_$a+15]);this.mesh._inverseBindPoses.push(n_$V)}break;default:throw new Error("LoadModel:unknown version.")}return!0},n_$N.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var n_$N=this._readString();this._shaderAttributes=n_$N.match(n_$W._attrReg);var n_$C=this._readData.getUint32(),n_$a=this._readData.getUint32(),n_$u=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),n_$e=this._readData.getUint32(),n_$J=this._readData.getUint32(),n_$M=this._readData.getUint32(),n_$n=this._readData.__getBuffer(),n_$V=new n_$AC(this._mesh),n_$A=this._getVertexDeclaration(),n_$P=n_$RC.create(n_$A,n_$e/n_$A.vertexStride,35044,!0),n_$$=n_$u+this._DATA.offset,n_$O=n_$n.slice(n_$$,n_$$+n_$e);n_$P.setData(new Float32Array(n_$O));for(var n_$G=(n_$V._vertexBuffer=n_$P).vertexDeclaration.getVertexElements(),n_$z=0;n_$z<n_$G.length;n_$z++)n_$V._bufferUsage[n_$G[n_$z].elementUsage]=n_$P;var n_$f=n_$LC.create("ushort",n_$a/2,35044,!0),n_$t=n_$C+this._DATA.offset,n_$g=n_$n.slice(n_$t,n_$t+n_$a);n_$f.setData(new Uint16Array(n_$g)),n_$V._indexBuffer=n_$f;var n_$x=n_$n.slice(n_$J+this._DATA.offset,n_$J+this._DATA.offset+n_$M);return n_$V._boneIndicesList[0]=new Uint8Array(n_$x),this._subMeshes.push(n_$V),!0},n_$N.READ_DATAAREA=function(){return!1},n_$N._getVertexDeclaration=function(){for(var n_$N,n_$C=!1,n_$a=!1,n_$u=!1,n_$e=!1,n_$J=!1,n_$M=!1,n_$n=!1,n_$V=!1,n_$A=!1,n_$P=0;n_$P<this._shaderAttributes.length;n_$P+=8)switch(this._shaderAttributes[n_$P]){case"POSITION":n_$C=!0;break;case"NORMAL":n_$a=!0;break;case"COLOR":n_$u=!0;break;case"UV":n_$e=!0;break;case"UV1":n_$J=!0;break;case"BLENDWEIGHT":n_$n=!0;break;case"BLENDINDICES":n_$V=!0;break;case"TANGENT":n_$M=!0;break;case"BINORMAL":n_$A=!0}return n_$C&&n_$a&&n_$u&&n_$e&&n_$J&&n_$n&&n_$V&&n_$M?n_$N=n_$WN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$e&&n_$J&&n_$n&&n_$V?n_$N=n_$gN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$J&&n_$n&&n_$V&&n_$M?n_$N=n_$iN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$J&&n_$n&&n_$V?n_$N=n_$QN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$e&&n_$n&&n_$V&&n_$M?n_$N=n_$EN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$e&&n_$n&&n_$V?n_$N=n_$rN.vertexDeclaration:n_$C&&n_$a&&n_$M&&n_$A&&n_$e&&n_$n&&n_$V?n_$N=n_$kN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$n&&n_$V&&n_$M?n_$N=n_$RN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$n&&n_$V?n_$N=n_$TN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$n&&n_$V&&n_$M?n_$N=n_$ON.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$n&&n_$V?n_$N=n_$PN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$e&&n_$J&&n_$M?n_$N=n_$XN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$e&&n_$J?n_$N=n_$tN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$J&&n_$M?n_$N=n_$yN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$J?n_$N=n_$dN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$e&&n_$M?n_$N=n_$DN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$M&&n_$A?n_$N=n_$YN.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$e?n_$N=n_$fN.vertexDeclaration:n_$C&&n_$a&&n_$e&&n_$M?n_$N=n_$BN.vertexDeclaration:n_$C&&n_$a&&n_$e?n_$N=n_$_N.vertexDeclaration:n_$C&&n_$a&&n_$u&&n_$M?n_$N=n_$zN.vertexDeclaration:n_$C&&n_$a&&n_$u&&(n_$N=n_$AN.vertexDeclaration),n_$N},n_$z(0,n_$N,"mesh",function(){return this._mesh}),n_$W._attrReg=new RegExp("(\\w+)|([:,;])","g"),n_$W}()),n_$mN=function(){function n_$c(){}return n_$G(n_$c,"laya.d3.loaders.LoadModelV02"),n_$c.parse=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){n_$c._mesh=n_$a,n_$c._materials=n_$u,n_$c._subMeshes=n_$e,n_$c._materialMap=n_$J,n_$c._version=n_$C,n_$c._readData=n_$N,n_$c.READ_DATA(),n_$c.READ_BLOCK(),n_$c.READ_STRINGS();for(var n_$M=0,n_$n=n_$c._BLOCK.count;n_$M<n_$n;n_$M++){n_$c._readData.pos=n_$c._BLOCK.blockStarts[n_$M];var n_$V=n_$c._readData.getUint16(),n_$A=n_$c._strings[n_$V],n_$P=n_$c["READ_"+n_$A];if(null==n_$P)throw new Error("model file err,no this function:"+n_$V+" "+n_$A);n_$P.call()}n_$c._strings.length=0,n_$c._readData=null,n_$c._version=null,n_$c._mesh=null,n_$c._materials=null,n_$c._subMeshes=null,n_$c._materialMap=null},n_$c._readString=function(){return n_$c._strings[n_$c._readData.getUint16()]},n_$c.READ_DATA=function(){n_$c._DATA.offset=n_$c._readData.getUint32(),n_$c._DATA.size=n_$c._readData.getUint32()},n_$c.READ_BLOCK=function(){for(var n_$N=n_$c._BLOCK.count=n_$c._readData.getUint16(),n_$C=n_$c._BLOCK.blockStarts=[],n_$a=n_$c._BLOCK.blockLengths=[],n_$u=0;n_$u<n_$N;n_$u++)n_$C.push(n_$c._readData.getUint32()),n_$a.push(n_$c._readData.getUint32())},n_$c.READ_STRINGS=function(){var n_$N=n_$c._readData.getUint32(),n_$C=n_$c._readData.getUint16(),n_$a=n_$c._readData.pos;n_$c._readData.pos=n_$N+n_$c._DATA.offset;for(var n_$u=0;n_$u<n_$C;n_$u++)n_$c._strings[n_$u]=n_$c._readData.readUTFString();n_$c._readData.pos=n_$a},n_$c.READ_MATERIAL=function(){n_$c._readString(),n_$c._readString();var n_$N=n_$c._readString();return""!==n_$N&&n_$c._materials.push(n_$g.getRes(n_$c._materialMap[n_$N])),!0},n_$c.READ_MESH=function(){n_$c._readString();var n_$N,n_$C=n_$c._readData.__getBuffer(),n_$a=0,n_$u=n_$c._readData.getInt16(),n_$e=n_$c._DATA.offset;for(n_$a=0;n_$a<n_$u;n_$a++){var n_$J=n_$e+n_$c._readData.getUint32(),n_$M=n_$c._readData.getUint32(),n_$n=new Float32Array(n_$C.slice(n_$J,n_$J+n_$M)),n_$V=n_$c._readString().match(n_$c._attrReg),n_$A=n_$c._getVertexDeclaration(n_$V),n_$P=n_$RC.create(n_$A,4*n_$n.length/n_$A.vertexStride,35044,!0);n_$P.setData(n_$n),n_$c._mesh._vertexBuffers.push(n_$P)}var n_$$=n_$e+n_$c._readData.getUint32(),n_$O=n_$c._readData.getUint32(),n_$G=new Uint16Array(n_$C.slice(n_$$,n_$$+n_$O)),n_$z=n_$LC.create("ushort",n_$O/2,35044,!0);n_$z.setData(n_$G),n_$c._mesh._indexBuffer=n_$z;var n_$f=n_$c._mesh._boneNames=[],n_$t=n_$c._readData.getUint16();for(n_$f.length=n_$t,n_$a=0;n_$a<n_$t;n_$a++)n_$f[n_$a]=n_$c._strings[n_$c._readData.getUint16()];var n_$g=n_$c._readData.getUint32(),n_$x=n_$c._readData.getUint32(),n_$W=(new Float32Array(n_$C.slice(n_$e+n_$g,n_$e+n_$g+n_$x)),n_$c._readData.getUint32()),n_$v=n_$c._readData.getUint32(),n_$X=new Float32Array(n_$C.slice(n_$e+n_$W,n_$e+n_$W+n_$v));for(n_$c._mesh._inverseBindPoses=[],n_$a=0,n_$N=n_$X.length;n_$a<n_$N;n_$a+=16){var n_$r=new n_$NC(n_$X[n_$a+0],n_$X[n_$a+1],n_$X[n_$a+2],n_$X[n_$a+3],n_$X[n_$a+4],n_$X[n_$a+5],n_$X[n_$a+6],n_$X[n_$a+7],n_$X[n_$a+8],n_$X[n_$a+9],n_$X[n_$a+10],n_$X[n_$a+11],n_$X[n_$a+12],n_$X[n_$a+13],n_$X[n_$a+14],n_$X[n_$a+15]);n_$c._mesh._inverseBindPoses.push(n_$r)}return n_$c._mesh._skinnedDatas=new Float32Array(16*n_$X.length),!0},n_$c.READ_SUBMESH=function(){var n_$N=n_$c._readData.__getBuffer(),n_$C=new n_$AC(n_$c._mesh),n_$a=n_$c._readData.getInt16(),n_$u=n_$c._readData.getUint32(),n_$e=n_$c._readData.getUint32();n_$C._vertexBuffer=n_$c._mesh._vertexBuffers[n_$a],n_$C._vertexStart=n_$u,n_$C._vertexCount=n_$e;var n_$J=n_$c._readData.getUint32(),n_$M=n_$c._readData.getUint32(),n_$n=n_$c._mesh._indexBuffer;n_$C._indexBuffer=n_$n,n_$C._indexStart=n_$J,n_$C._indexCount=n_$M,n_$C._indices=new Uint16Array(n_$n.getData().buffer,2*n_$J,n_$M);var n_$V=n_$c._DATA.offset,n_$A=n_$C._subIndexBufferStart,n_$P=n_$C._subIndexBufferCount,n_$$=n_$C._boneIndicesList,n_$O=n_$c._readData.getUint16();n_$A.length=n_$O,n_$P.length=n_$O,n_$$.length=n_$O;for(var n_$G=0;n_$G<n_$O;n_$G++){n_$A[n_$G]=n_$c._readData.getUint32(),n_$P[n_$G]=n_$c._readData.getUint32();var n_$z=n_$c._readData.getUint32(),n_$f=n_$c._readData.getUint32();n_$C._boneIndicesList[n_$G]=new Uint8Array(n_$N.slice(n_$V+n_$z,n_$V+n_$z+n_$f))}return n_$c._subMeshes.push(n_$C),!0},n_$c._getVertexDeclaration=function(n_$N){for(var n_$C,n_$a=!1,n_$u=!1,n_$e=!1,n_$J=!1,n_$M=!1,n_$n=!1,n_$V=!1,n_$A=!1,n_$P=!1,n_$$=0;n_$$<n_$N.length;n_$$++)switch(n_$N[n_$$]){case"POSITION":n_$a=!0;break;case"NORMAL":n_$u=!0;break;case"COLOR":n_$e=!0;break;case"UV":n_$J=!0;break;case"UV1":n_$M=!0;break;case"BLENDWEIGHT":n_$V=!0;break;case"BLENDINDICES":n_$A=!0;break;case"TANGENT":n_$n=!0;break;case"BINORMAL":n_$P=!0}return n_$a&&n_$u&&n_$e&&n_$J&&n_$M&&n_$V&&n_$A&&n_$n?n_$C=n_$WN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$J&&n_$M&&n_$V&&n_$A?n_$C=n_$gN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$M&&n_$V&&n_$A&&n_$n?n_$C=n_$iN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$M&&n_$V&&n_$A?n_$C=n_$QN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$J&&n_$V&&n_$A&&n_$n?n_$C=n_$EN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$J&&n_$V&&n_$A?n_$C=n_$rN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$V&&n_$A&&n_$n?n_$C=n_$RN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$V&&n_$A?n_$C=n_$TN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$V&&n_$A&&n_$n?n_$C=n_$ON.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$V&&n_$A?n_$C=n_$PN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$J&&n_$M&&n_$n?n_$C=n_$XN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$J&&n_$M?n_$C=n_$tN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$M&&n_$n?n_$C=n_$yN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$M?n_$C=n_$dN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$J&&n_$n?n_$C=n_$DN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$n&&n_$P?n_$C=n_$YN.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$J?n_$C=n_$fN.vertexDeclaration:n_$a&&n_$u&&n_$J&&n_$n?n_$C=n_$BN.vertexDeclaration:n_$a&&n_$u&&n_$J?n_$C=n_$_N.vertexDeclaration:n_$a&&n_$u&&n_$e&&n_$n?n_$C=n_$zN.vertexDeclaration:n_$a&&n_$u&&n_$e&&(n_$C=n_$AN.vertexDeclaration),n_$C},n_$c._attrReg=new RegExp("(\\w+)|([:,;])","g"),n_$c._strings=[],n_$c._readData=null,n_$c._version=null,n_$c._mesh=null,n_$c._materials=null,n_$c._subMeshes=null,n_$c._materialMap=null,n_$$(n_$c,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),n_$c}(),n_$bN=function(){function n_$r(){}return n_$G(n_$r,"laya.d3.loaders.LoadModelV03"),n_$r.parse=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$r._mesh=n_$a,n_$r._subMeshes=n_$u,n_$r._materialMap=n_$e,n_$r._version=n_$C,n_$r._readData=n_$N,n_$r.READ_DATA(),n_$r.READ_BLOCK(),n_$r.READ_STRINGS();for(var n_$J=0,n_$M=n_$r._BLOCK.count;n_$J<n_$M;n_$J++){n_$r._readData.pos=n_$r._BLOCK.blockStarts[n_$J];var n_$n=n_$r._readData.getUint16(),n_$V=n_$r._strings[n_$n],n_$A=n_$r["READ_"+n_$V];if(null==n_$A)throw new Error("model file err,no this function:"+n_$n+" "+n_$V);n_$A.call()}n_$r._strings.length=0,n_$r._readData=null,n_$r._version=null,n_$r._mesh=null,n_$r._subMeshes=null,n_$r._materialMap=null},n_$r._readString=function(){return n_$r._strings[n_$r._readData.getUint16()]},n_$r.READ_DATA=function(){n_$r._DATA.offset=n_$r._readData.getUint32(),n_$r._DATA.size=n_$r._readData.getUint32()},n_$r.READ_BLOCK=function(){for(var n_$N=n_$r._BLOCK.count=n_$r._readData.getUint16(),n_$C=n_$r._BLOCK.blockStarts=[],n_$a=n_$r._BLOCK.blockLengths=[],n_$u=0;n_$u<n_$N;n_$u++)n_$C.push(n_$r._readData.getUint32()),n_$a.push(n_$r._readData.getUint32())},n_$r.READ_STRINGS=function(){var n_$N=n_$r._readData.getUint32(),n_$C=n_$r._readData.getUint16(),n_$a=n_$r._readData.pos;n_$r._readData.pos=n_$N+n_$r._DATA.offset;for(var n_$u=0;n_$u<n_$C;n_$u++)n_$r._strings[n_$u]=n_$r._readData.readUTFString();n_$r._readData.pos=n_$a},n_$r.READ_MESH=function(){var n_$N,n_$C=n_$r._readString(),n_$a=n_$r._readData.__getBuffer(),n_$u=0,n_$e=n_$r._readData.getInt16(),n_$J=n_$r._DATA.offset;for(n_$u=0;n_$u<n_$e;n_$u++){var n_$M,n_$n=n_$J+n_$r._readData.getUint32(),n_$V=n_$r._readData.getUint32(),n_$A=new Float32Array(n_$a.slice(n_$n,n_$n+n_$V)),n_$P=n_$r._readString();switch(n_$r._version){case"LAYAMODEL:03":n_$M=n_$r._vertexDeclarationMap_Discard[n_$P];break;case"LAYAMODEL:0301":n_$M=n_$r._vertexDeclarationMap[n_$P];break;default:throw new Error("LoadModelV03: unknown version.")}if(!n_$M)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+n_$r._version+"  bufferAttribute="+n_$P+"  name="+n_$C+"  url="+(n_$r._mesh?n_$r._mesh.url:"null"));var n_$$=n_$RC.create(n_$M,4*n_$A.length/n_$M.vertexStride,35044,!0,n_$r._mesh._url+"_"+n_$u);n_$$.setData(n_$A),n_$r._mesh._vertexBuffers.push(n_$$)}var n_$O=n_$J+n_$r._readData.getUint32(),n_$G=n_$r._readData.getUint32(),n_$z=new Uint16Array(n_$a.slice(n_$O,n_$O+n_$G)),n_$f=n_$LC.create("ushort",n_$G/2,35044,!0,n_$r._mesh._url);n_$f.setData(n_$z),n_$r._mesh._indexBuffer=n_$f;var n_$t=n_$r._mesh._boneNames=[],n_$g=n_$r._readData.getUint16();for(n_$t.length=n_$g,n_$u=0;n_$u<n_$g;n_$u++)n_$t[n_$u]=n_$r._strings[n_$r._readData.getUint16()];n_$r._readData.pos+=8;var n_$x=n_$r._readData.getUint32(),n_$W=n_$r._readData.getUint32(),n_$v=new Float32Array(n_$a.slice(n_$J+n_$x,n_$J+n_$x+n_$W));for(n_$r._mesh._inverseBindPoses=[],n_$u=0,n_$N=n_$v.length;n_$u<n_$N;n_$u+=16){var n_$X=new n_$NC(n_$v[n_$u+0],n_$v[n_$u+1],n_$v[n_$u+2],n_$v[n_$u+3],n_$v[n_$u+4],n_$v[n_$u+5],n_$v[n_$u+6],n_$v[n_$u+7],n_$v[n_$u+8],n_$v[n_$u+9],n_$v[n_$u+10],n_$v[n_$u+11],n_$v[n_$u+12],n_$v[n_$u+13],n_$v[n_$u+14],n_$v[n_$u+15]);n_$r._mesh._inverseBindPoses.push(n_$X)}return n_$r._mesh._skinnedDatas=new Float32Array(16*n_$v.length),!0},n_$r.READ_SUBMESH=function(){var n_$N=n_$r._readData.__getBuffer(),n_$C=new n_$AC(n_$r._mesh),n_$a=n_$r._readData.getInt16(),n_$u=n_$r._readData.getUint32(),n_$e=n_$r._readData.getUint32();n_$C._vertexBuffer=n_$r._mesh._vertexBuffers[n_$a],n_$C._vertexStart=n_$u,n_$C._vertexCount=n_$e;var n_$J=n_$r._readData.getUint32(),n_$M=n_$r._readData.getUint32(),n_$n=n_$r._mesh._indexBuffer;n_$C._indexBuffer=n_$n,n_$C._indexStart=n_$J,n_$C._indexCount=n_$M,n_$C._indices=new Uint16Array(n_$n.getData().buffer,2*n_$J,n_$M);var n_$V=n_$r._DATA.offset,n_$A=n_$C._subIndexBufferStart,n_$P=n_$C._subIndexBufferCount,n_$$=n_$C._boneIndicesList,n_$O=n_$r._readData.getUint16();n_$A.length=n_$O,n_$P.length=n_$O,n_$$.length=n_$O;for(var n_$G=0;n_$G<n_$O;n_$G++){n_$A[n_$G]=n_$r._readData.getUint32(),n_$P[n_$G]=n_$r._readData.getUint32();var n_$z=n_$r._readData.getUint32(),n_$f=n_$r._readData.getUint32();n_$$[n_$G]=new Uint8Array(n_$N.slice(n_$V+n_$z,n_$V+n_$z+n_$f))}return n_$r._subMeshes.push(n_$C),!0},n_$r._strings=[],n_$r._readData=null,n_$r._version=null,n_$r._mesh=null,n_$r._subMeshes=null,n_$r._materialMap=null,n_$$(n_$r,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$WN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":n_$gN.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":n_$KN.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$iN.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":n_$QN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$EN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":n_$rN.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$RN.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":n_$TN.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$ON.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":n_$PN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":n_$XN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":n_$tN.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":n_$yN.vertexDeclaration,"POSITION,NORMAL,UV,UV1":n_$dN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":n_$DN.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":n_$YN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":n_$fN.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":n_$BN.vertexDeclaration,"POSITION,NORMAL,UV":n_$_N.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":n_$zN.vertexDeclaration,"POSITION,NORMAL,COLOR":n_$AN.vertexDeclaration,"POSITION,NORMAL,TANGENT":n_$qN.vertexDeclaration,"POSITION,NORMAL":n_$VN.vertexDeclaration,"POSITION,UV":n_$SN.vertexDeclaration,POSITION:n_$nN.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$xN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":n_$gN.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":n_$KN.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$lN.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":n_$QN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$cN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":n_$rN.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$LN.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":n_$TN.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":n_$$N.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":n_$PN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":n_$vN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":n_$tN.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":n_$jN.vertexDeclaration,"POSITION,NORMAL,UV,UV1":n_$dN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":n_$FN.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":n_$YN.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":n_$fN.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":n_$wN.vertexDeclaration,"POSITION,NORMAL,UV":n_$_N.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":n_$GN.vertexDeclaration,"POSITION,NORMAL,COLOR":n_$AN.vertexDeclaration,"POSITION,NORMAL,TANGENT":n_$sN.vertexDeclaration,"POSITION,NORMAL":n_$VN.vertexDeclaration,"POSITION,UV":n_$SN.vertexDeclaration,POSITION:n_$nN.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),n_$r}(),n_$oN=function(){function n_$n(){}return n_$G(n_$n,"laya.d3.loaders.MeshReader"),n_$n.read=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=new n_$r(n_$N);n_$J.pos=0;var n_$M=n_$J.readUTFString();switch(n_$M){case"LAYAMODEL:01":case"LAYASKINANI:01":n_$n._readVersion01(n_$J,n_$M,n_$C,n_$a,n_$u,n_$e);break;case"LAYAMODEL:02":n_$mN.parse(n_$J,n_$M,n_$C,n_$a,n_$u,n_$e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":n_$bN.parse(n_$J,n_$M,n_$C,n_$u,n_$e);break;default:throw new Error("MeshReader: unknown mesh version.")}n_$C._setSubMeshes(n_$u)},n_$n._readVersion01=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){new n_$pN(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J)},n_$n}(),n_$HN=function(){function n_$N(n_$N,n_$C){this.min=null,this.max=null,this.min=n_$N,this.max=n_$C}n_$G(n_$N,"laya.d3.math.BoundBox");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.getCorners=function(n_$N){n_$N.length=8;var n_$C=this.min.elements,n_$a=this.max.elements,n_$u=n_$C[0],n_$e=n_$C[1],n_$J=n_$C[2],n_$M=n_$a[0],n_$n=n_$a[1],n_$V=n_$a[2];n_$N[0]=new n_$MC(n_$u,n_$n,n_$V),n_$N[1]=new n_$MC(n_$M,n_$n,n_$V),n_$N[2]=new n_$MC(n_$M,n_$e,n_$V),n_$N[3]=new n_$MC(n_$u,n_$e,n_$V),n_$N[4]=new n_$MC(n_$u,n_$n,n_$J),n_$N[5]=new n_$MC(n_$M,n_$n,n_$J),n_$N[6]=new n_$MC(n_$M,n_$e,n_$J),n_$N[7]=new n_$MC(n_$u,n_$e,n_$J)},n_$C.toDefault=function(){this.min.toDefault(),this.max.toDefault()},n_$C.cloneTo=function(n_$N){var n_$C=n_$N;this.min.cloneTo(n_$C.min),this.max.cloneTo(n_$C.max)},n_$C.clone=function(){var n_$N=new this.constructor(new n_$MC,new n_$MC);return this.cloneTo(n_$N),n_$N},n_$N.createfromPoints=function(n_$N,n_$C){if(null==n_$N)throw new Error("points");var n_$a=n_$C.min,n_$u=n_$C.max,n_$e=n_$a.elements;n_$e[0]=Number.MAX_VALUE,n_$e[1]=Number.MAX_VALUE,n_$e[2]=Number.MAX_VALUE;var n_$J=n_$u.elements;n_$J[0]=-Number.MAX_VALUE,n_$J[1]=-Number.MAX_VALUE,n_$J[2]=-Number.MAX_VALUE;for(var n_$M=0,n_$n=n_$N.length;n_$M<n_$n;++n_$M)n_$MC.min(n_$a,n_$N[n_$M],n_$a),n_$MC.max(n_$u,n_$N[n_$M],n_$u)},n_$N.merge=function(n_$N,n_$C,n_$a){n_$MC.min(n_$N.min,n_$C.min,n_$a.min),n_$MC.max(n_$N.max,n_$C.max,n_$a.max)},n_$N}(),n_$IN=function(){function n_$A(n_$N){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=n_$N,this._near=new n_$CC(new n_$MC),this._far=new n_$CC(new n_$MC),this._left=new n_$CC(new n_$MC),this._right=new n_$CC(new n_$MC),this._top=new n_$CC(new n_$MC),this._bottom=new n_$CC(new n_$MC),n_$A._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}n_$G(n_$A,"laya.d3.math.BoundFrustum");var n_$N=n_$A.prototype;return n_$N.equalsBoundFrustum=function(n_$N){return this._matrix.equalsOtherMatrix(n_$N.matrix)},n_$N.equalsObj=function(n_$N){if(n_$N instanceof laya.d3.math.BoundFrustum){var n_$C=n_$N;return this.equalsBoundFrustum(n_$C)}return!1},n_$N.getPlane=function(n_$N){switch(n_$N){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},n_$N.getCorners=function(n_$N){n_$A._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(n_$N[0]),n_$A._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(n_$N[1]),n_$A._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(n_$N[2]),n_$A._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(n_$N[3]),n_$A._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(n_$N[4]),n_$A._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(n_$N[5]),n_$A._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(n_$N[6]),n_$A._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(n_$N[7])},n_$N.containsPoint=function(n_$N){for(var n_$C=n_$CC.PlaneIntersectionType_Front,n_$a=n_$CC.PlaneIntersectionType_Front,n_$u=0;n_$u<6;n_$u++){switch(n_$u){case 0:n_$a=Collision.intersectsPlaneAndPoint(this._near,n_$N);break;case 1:n_$a=Collision.intersectsPlaneAndPoint(this._far,n_$N);break;case 2:n_$a=Collision.intersectsPlaneAndPoint(this._left,n_$N);break;case 3:n_$a=Collision.intersectsPlaneAndPoint(this._right,n_$N);break;case 4:n_$a=Collision.intersectsPlaneAndPoint(this._top,n_$N);break;case 5:n_$a=Collision.intersectsPlaneAndPoint(this._bottom,n_$N)}switch(n_$a){case n_$CC.PlaneIntersectionType_Back:return 0;case n_$CC.PlaneIntersectionType_Intersecting:n_$C=n_$CC.PlaneIntersectionType_Intersecting}}switch(n_$C){case n_$CC.PlaneIntersectionType_Intersecting:return 2;default:return 1}},n_$N.containsBoundBox=function(n_$N){for(var n_$C,n_$a=n_$A._tempV30,n_$u=n_$A._tempV31,n_$e=1,n_$J=0;n_$J<6;n_$J++){if(n_$C=this.getPlane(n_$J),this._getBoxToPlanePVertexNVertex(n_$N,n_$C.normal,n_$a,n_$u),Collision.intersectsPlaneAndPoint(n_$C,n_$a)===n_$CC.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(n_$C,n_$u)===n_$CC.PlaneIntersectionType_Back&&(n_$e=2)}return n_$e},n_$N.containsBoundSphere=function(n_$N){for(var n_$C=n_$CC.PlaneIntersectionType_Front,n_$a=n_$CC.PlaneIntersectionType_Front,n_$u=0;n_$u<6;n_$u++){switch(n_$u){case 0:n_$a=Collision.intersectsPlaneAndSphere(this._near,n_$N);break;case 1:n_$a=Collision.intersectsPlaneAndSphere(this._far,n_$N);break;case 2:n_$a=Collision.intersectsPlaneAndSphere(this._left,n_$N);break;case 3:n_$a=Collision.intersectsPlaneAndSphere(this._right,n_$N);break;case 4:n_$a=Collision.intersectsPlaneAndSphere(this._top,n_$N);break;case 5:n_$a=Collision.intersectsPlaneAndSphere(this._bottom,n_$N)}switch(n_$a){case n_$CC.PlaneIntersectionType_Back:return 0;case n_$CC.PlaneIntersectionType_Intersecting:n_$C=n_$CC.PlaneIntersectionType_Intersecting}}switch(n_$C){case n_$CC.PlaneIntersectionType_Intersecting:return 2;default:return 1}},n_$N._getBoxToPlanePVertexNVertex=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.min,n_$J=n_$e.elements,n_$M=n_$N.max,n_$n=n_$M.elements,n_$V=n_$C.elements,n_$A=n_$V[0],n_$P=n_$V[1],n_$$=n_$V[2];n_$e.cloneTo(n_$a);var n_$O=n_$a.elements;0<=n_$A&&(n_$O[0]=n_$n[0]),0<=n_$P&&(n_$O[1]=n_$n[1]),0<=n_$$&&(n_$O[2]=n_$n[2]),n_$M.cloneTo(n_$u);var n_$G=n_$u.elements;0<=n_$A&&(n_$G[0]=n_$J[0]),0<=n_$P&&(n_$G[1]=n_$J[1]),0<=n_$$&&(n_$G[2]=n_$J[2])},n_$z(0,n_$N,"top",function(){return this._top}),n_$z(0,n_$N,"matrix",function(){return this._matrix},function(n_$N){this._matrix=n_$N,n_$A._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),n_$z(0,n_$N,"near",function(){return this._near}),n_$z(0,n_$N,"far",function(){return this._far}),n_$z(0,n_$N,"left",function(){return this._left}),n_$z(0,n_$N,"right",function(){return this._right}),n_$z(0,n_$N,"bottom",function(){return this._bottom}),n_$A._getPlanesFromMatrix=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){var n_$n=n_$N.elements,n_$V=n_$n[0],n_$A=n_$n[1],n_$P=n_$n[2],n_$$=n_$n[3],n_$O=n_$n[4],n_$G=n_$n[5],n_$z=n_$n[6],n_$f=n_$n[7],n_$t=n_$n[8],n_$g=n_$n[9],n_$x=n_$n[10],n_$W=n_$n[11],n_$v=n_$n[12],n_$X=n_$n[13],n_$r=n_$n[14],n_$c=n_$n[15],n_$E=n_$C.normal.elements;n_$E[0]=n_$$+n_$P,n_$E[1]=n_$f+n_$z,n_$E[2]=n_$W+n_$x,n_$C.distance=n_$c+n_$r,n_$C.normalize();var n_$F=n_$a.normal.elements;n_$F[0]=n_$$-n_$P,n_$F[1]=n_$f-n_$z,n_$F[2]=n_$W-n_$x,n_$a.distance=n_$c-n_$r,n_$a.normalize();var n_$D=n_$u.normal.elements;n_$D[0]=n_$$+n_$V,n_$D[1]=n_$f+n_$O,n_$D[2]=n_$W+n_$t,n_$u.distance=n_$c+n_$v,n_$u.normalize();var n_$s=n_$e.normal.elements;n_$s[0]=n_$$-n_$V,n_$s[1]=n_$f-n_$O,n_$s[2]=n_$W-n_$t,n_$e.distance=n_$c-n_$v,n_$e.normalize();var n_$q=n_$J.normal.elements;n_$q[0]=n_$$-n_$A,n_$q[1]=n_$f-n_$G,n_$q[2]=n_$W-n_$g,n_$J.distance=n_$c-n_$X,n_$J.normalize();var n_$_=n_$M.normal.elements;n_$_[0]=n_$$+n_$A,n_$_[1]=n_$f+n_$G,n_$_[2]=n_$W+n_$g,n_$M.distance=n_$c+n_$X,n_$M.normalize()},n_$A._get3PlaneInterPoint=function(n_$N,n_$C,n_$a){var n_$u=n_$N.normal,n_$e=n_$C.normal,n_$J=n_$a.normal;n_$MC.cross(n_$e,n_$J,n_$A._tempV30),n_$MC.cross(n_$J,n_$u,n_$A._tempV31),n_$MC.cross(n_$u,n_$e,n_$A._tempV32);var n_$M=n_$MC.dot(n_$u,n_$A._tempV30),n_$n=n_$MC.dot(n_$e,n_$A._tempV31),n_$V=n_$MC.dot(n_$J,n_$A._tempV32);return n_$MC.scale(n_$A._tempV30,-n_$N.distance/n_$M,n_$A._tempV33),n_$MC.scale(n_$A._tempV31,-n_$C.distance/n_$n,n_$A._tempV34),n_$MC.scale(n_$A._tempV32,-n_$a.distance/n_$V,n_$A._tempV35),n_$MC.add(n_$A._tempV33,n_$A._tempV34,n_$A._tempV36),n_$MC.add(n_$A._tempV35,n_$A._tempV36,n_$A._tempV37),n_$A._tempV37},n_$$(n_$A,["_tempV30",function(){return this._tempV30=new n_$MC},"_tempV31",function(){return this._tempV31=new n_$MC},"_tempV32",function(){return this._tempV32=new n_$MC},"_tempV33",function(){return this._tempV33=new n_$MC},"_tempV34",function(){return this._tempV34=new n_$MC},"_tempV35",function(){return this._tempV35=new n_$MC},"_tempV36",function(){return this._tempV36=new n_$MC},"_tempV37",function(){return this._tempV37=new n_$MC}]),n_$A}(),n_$ZN=function(){function n_$P(n_$N,n_$C){this.center=null,this.radius=NaN,this.center=n_$N,this.radius=n_$C}n_$G(n_$P,"laya.d3.math.BoundSphere");var n_$N=n_$P.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.toDefault=function(){this.center.toDefault(),this.radius=0},n_$N.intersectsRayDistance=function(n_$N){return Collision.intersectsRayAndSphereRD(n_$N,this)},n_$N.intersectsRayPoint=function(n_$N,n_$C){return Collision.intersectsRayAndSphereRP(n_$N,this,n_$C)},n_$N.cloneTo=function(n_$N){var n_$C=n_$N;this.center.cloneTo(n_$C.center),n_$C.radius=this.radius},n_$N.clone=function(){var n_$N=new this.constructor(new n_$MC,new n_$MC);return this.cloneTo(n_$N),n_$N},n_$P.createFromSubPoints=function(n_$N,n_$C,n_$a,n_$u){if(null==n_$N)throw new Error("points");if(n_$C<0||n_$C>=n_$N.length)throw new Error("start"+n_$C+"Must be in the range [0, "+(n_$N.length-1)+"]");if(n_$a<0||n_$C+n_$a>n_$N.length)throw new Error("count"+n_$a+"Must be in the range <= "+n_$N.length+"}");var n_$e=n_$C+n_$a,n_$J=n_$P._tempVector3;n_$J.elements[0]=0,n_$J.elements[1]=0,n_$J.elements[2]=0;for(var n_$M=n_$C;n_$M<n_$e;++n_$M)n_$MC.add(n_$N[n_$M],n_$J,n_$J);var n_$n=n_$u.center;n_$MC.scale(n_$J,1/n_$a,n_$n);var n_$V=0;for(n_$M=n_$C;n_$M<n_$e;++n_$M){var n_$A=n_$MC.distanceSquared(n_$n,n_$N[n_$M]);n_$V<n_$A&&(n_$V=n_$A)}n_$u.radius=Math.sqrt(n_$V)},n_$P.createfromPoints=function(n_$N,n_$C){if(null==n_$N)throw new Error("points");n_$P.createFromSubPoints(n_$N,0,n_$N.length,n_$C)},n_$$(n_$P,["_tempVector3",function(){return this._tempVector3=new n_$MC}]),n_$P}(),n_$hN=(function(){function n_$N(){}n_$G(n_$N,"laya.d3.math.ContainmentType"),n_$N.Disjoint=0,n_$N.Contains=1,n_$N.Intersects=2}(),function(){function n_$a(){}return n_$G(n_$a,"laya.d3.math.MathUtils3D"),n_$a.isZero=function(n_$N){return Math.abs(n_$N)<n_$a.zeroTolerance},n_$a.nearEqual=function(n_$N,n_$C){return!!n_$a.isZero(n_$N-n_$C)},n_$a.fastInvSqrt=function(n_$N){return n_$a.isZero(n_$N)?n_$N:1/Math.sqrt(n_$N)},n_$$(n_$a,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),n_$a}()),n_$UN=function(){function n_$V(){var n_$N=this.elements=new Float32Array(9);n_$N[0]=1,n_$N[1]=0,n_$N[2]=0,n_$N[3]=0,n_$N[4]=1,n_$N[5]=0,n_$N[6]=0,n_$N[7]=0,n_$N[8]=1}n_$G(n_$V,"laya.d3.math.Matrix3x3");var n_$N=n_$V.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.determinant=function(){var n_$N=this.elements,n_$C=n_$N[0],n_$a=n_$N[1],n_$u=n_$N[2],n_$e=n_$N[3],n_$J=n_$N[4],n_$M=n_$N[5],n_$n=n_$N[6],n_$V=n_$N[7],n_$A=n_$N[8];return n_$C*(n_$A*n_$J-n_$M*n_$V)+n_$a*(-n_$A*n_$e+n_$M*n_$n)+n_$u*(n_$V*n_$e-n_$J*n_$n)},n_$N.translate=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=this.elements,n_$e=n_$N.elements,n_$J=n_$u[0],n_$M=n_$u[1],n_$n=n_$u[2],n_$V=n_$u[3],n_$A=n_$u[4],n_$P=n_$u[5],n_$$=n_$u[6],n_$O=n_$u[7],n_$G=n_$u[8],n_$z=n_$e[0],n_$f=n_$e[1];n_$a[0]=n_$J,n_$a[1]=n_$M,n_$a[2]=n_$n,n_$a[3]=n_$V,n_$a[4]=n_$A,n_$a[5]=n_$P,n_$a[6]=n_$z*n_$J+n_$f*n_$V+n_$$,n_$a[7]=n_$z*n_$M+n_$f*n_$A+n_$O,n_$a[8]=n_$z*n_$n+n_$f*n_$P+n_$G},n_$N.rotate=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=this.elements,n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$u[3],n_$V=n_$u[4],n_$A=n_$u[5],n_$P=n_$u[6],n_$$=n_$u[7],n_$O=n_$u[8],n_$G=Math.sin(n_$N),n_$z=Math.cos(n_$N);n_$a[0]=n_$z*n_$e+n_$G*n_$n,n_$a[1]=n_$z*n_$J+n_$G*n_$V,n_$a[2]=n_$z*n_$M+n_$G*n_$A,n_$a[3]=n_$z*n_$n-n_$G*n_$e,n_$a[4]=n_$z*n_$V-n_$G*n_$J,n_$a[5]=n_$z*n_$A-n_$G*n_$M,n_$a[6]=n_$P,n_$a[7]=n_$$,n_$a[8]=n_$O},n_$N.scale=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=this.elements,n_$e=n_$N.elements,n_$J=n_$e[0],n_$M=n_$e[1];n_$a[0]=n_$J*n_$u[0],n_$a[1]=n_$J*n_$u[1],n_$a[2]=n_$J*n_$u[2],n_$a[3]=n_$M*n_$u[3],n_$a[4]=n_$M*n_$u[4],n_$a[5]=n_$M*n_$u[5],n_$a[6]=n_$u[6],n_$a[7]=n_$u[7],n_$a[8]=n_$u[8]},n_$N.invert=function(n_$N){var n_$C=n_$N.elements,n_$a=this.elements,n_$u=n_$a[0],n_$e=n_$a[1],n_$J=n_$a[2],n_$M=n_$a[3],n_$n=n_$a[4],n_$V=n_$a[5],n_$A=n_$a[6],n_$P=n_$a[7],n_$$=n_$a[8],n_$O=n_$$*n_$n-n_$V*n_$P,n_$G=-n_$$*n_$M+n_$V*n_$A,n_$z=n_$P*n_$M-n_$n*n_$A,n_$f=n_$u*n_$O+n_$e*n_$G+n_$J*n_$z;n_$f||(n_$N=null),n_$f=1/n_$f,n_$C[0]=n_$O*n_$f,n_$C[1]=(-n_$$*n_$e+n_$J*n_$P)*n_$f,n_$C[2]=(n_$V*n_$e-n_$J*n_$n)*n_$f,n_$C[3]=n_$G*n_$f,n_$C[4]=(n_$$*n_$u-n_$J*n_$A)*n_$f,n_$C[5]=(-n_$V*n_$u+n_$J*n_$M)*n_$f,n_$C[6]=n_$z*n_$f,n_$C[7]=(-n_$P*n_$u+n_$e*n_$A)*n_$f,n_$C[8]=(n_$n*n_$u-n_$e*n_$M)*n_$f},n_$N.transpose=function(n_$N){var n_$C=n_$N.elements,n_$a=this.elements;if(n_$N===this){var n_$u=n_$a[1],n_$e=n_$a[2],n_$J=n_$a[5];n_$C[1]=n_$a[3],n_$C[2]=n_$a[6],n_$C[3]=n_$u,n_$C[5]=n_$a[7],n_$C[6]=n_$e,n_$C[7]=n_$J}else n_$C[0]=n_$a[0],n_$C[1]=n_$a[3],n_$C[2]=n_$a[6],n_$C[3]=n_$a[1],n_$C[4]=n_$a[4],n_$C[5]=n_$a[7],n_$C[6]=n_$a[2],n_$C[7]=n_$a[5],n_$C[8]=n_$a[8]},n_$N.identity=function(){var n_$N=this.elements;n_$N[0]=1,n_$N[1]=0,n_$N[2]=0,n_$N[3]=0,n_$N[4]=1,n_$N[5]=0,n_$N[6]=0,n_$N[7]=0,n_$N[8]=1},n_$N.cloneTo=function(n_$N){var n_$C,n_$a,n_$u;if((n_$a=this.elements)!==(n_$u=n_$N.elements))for(n_$C=0;n_$C<9;++n_$C)n_$u[n_$C]=n_$a[n_$C]},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$V.createFromTranslation=function(n_$N,n_$C){n_$C.elements;var n_$a=n_$N.elements;n_$C[0]=1,n_$C[1]=0,n_$C[2]=0,n_$C[3]=0,n_$C[4]=1,n_$C[5]=0,n_$C[6]=n_$a[0],n_$C[7]=n_$a[1],n_$C[8]=1},n_$V.createFromRotation=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=Math.sin(n_$N),n_$e=Math.cos(n_$N);n_$a[0]=n_$e,n_$a[1]=n_$u,n_$a[2]=0,n_$a[3]=-n_$u,n_$a[4]=n_$e,n_$a[5]=0,n_$a[6]=0,n_$a[7]=0,n_$a[8]=1},n_$V.createFromScaling=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=n_$N.elements;n_$a[0]=n_$u[0],n_$a[1]=0,n_$a[2]=0,n_$a[3]=0,n_$a[4]=n_$u[1],n_$a[5]=0,n_$a[6]=0,n_$a[7]=0,n_$a[8]=1},n_$V.createFromMatrix4x4=function(n_$N,n_$C){n_$C[0]=n_$N[0],n_$C[1]=n_$N[1],n_$C[2]=n_$N[2],n_$C[3]=n_$N[4],n_$C[4]=n_$N[5],n_$C[5]=n_$N[6],n_$C[6]=n_$N[8],n_$C[7]=n_$N[9],n_$C[8]=n_$N[10]},n_$V.multiply=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements,n_$M=n_$e[0],n_$n=n_$e[1],n_$V=n_$e[2],n_$A=n_$e[3],n_$P=n_$e[4],n_$$=n_$e[5],n_$O=n_$e[6],n_$G=n_$e[7],n_$z=n_$e[8],n_$f=n_$J[0],n_$t=n_$J[1],n_$g=n_$J[2],n_$x=n_$J[3],n_$W=n_$J[4],n_$v=n_$J[5],n_$X=n_$J[6],n_$r=n_$J[7],n_$c=n_$J[8];n_$u[0]=n_$f*n_$M+n_$t*n_$A+n_$g*n_$O,n_$u[1]=n_$f*n_$n+n_$t*n_$P+n_$g*n_$G,n_$u[2]=n_$f*n_$V+n_$t*n_$$+n_$g*n_$z,n_$u[3]=n_$x*n_$M+n_$W*n_$A+n_$v*n_$O,n_$u[4]=n_$x*n_$n+n_$W*n_$P+n_$v*n_$G,n_$u[5]=n_$x*n_$V+n_$W*n_$$+n_$v*n_$z,n_$u[6]=n_$X*n_$M+n_$r*n_$A+n_$c*n_$O,n_$u[7]=n_$X*n_$n+n_$r*n_$P+n_$c*n_$G,n_$u[8]=n_$X*n_$V+n_$r*n_$$+n_$c*n_$z},n_$V.lookAt=function(n_$N,n_$C,n_$a,n_$u){n_$MC.subtract(n_$N,n_$C,n_$V._tempV30),n_$MC.normalize(n_$V._tempV30,n_$V._tempV30),n_$MC.cross(n_$a,n_$V._tempV30,n_$V._tempV31),n_$MC.normalize(n_$V._tempV31,n_$V._tempV31),n_$MC.cross(n_$V._tempV30,n_$V._tempV31,n_$V._tempV32);var n_$e=n_$V._tempV30.elements,n_$J=n_$V._tempV31.elements,n_$M=n_$V._tempV32.elements,n_$n=n_$u.elements;n_$n[0]=n_$J[0],n_$n[3]=n_$J[1],n_$n[6]=n_$J[2],n_$n[1]=n_$M[0],n_$n[4]=n_$M[1],n_$n[7]=n_$M[2],n_$n[2]=n_$e[0],n_$n[5]=n_$e[1],n_$n[8]=n_$e[2]},n_$V.DEFAULT=new n_$V,n_$$(n_$V,["_tempV30",function(){return this._tempV30=new n_$MC},"_tempV31",function(){return this._tempV31=new n_$MC},"_tempV32",function(){return this._tempV32=new n_$MC}]),n_$V}(),n_$NC=function(){function n_$F(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$,n_$O,n_$G,n_$z,n_$f){void 0===n_$N&&(n_$N=1),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=1),void 0===n_$M&&(n_$M=0),void 0===n_$n&&(n_$n=0),void 0===n_$V&&(n_$V=0),void 0===n_$A&&(n_$A=0),void 0===n_$P&&(n_$P=1),void 0===n_$$&&(n_$$=0),void 0===n_$O&&(n_$O=0),void 0===n_$G&&(n_$G=0),void 0===n_$z&&(n_$z=0),void 0===n_$f&&(n_$f=1);var n_$t=this.elements=new Float32Array(16);n_$t[0]=n_$N,n_$t[1]=n_$C,n_$t[2]=n_$a,n_$t[3]=n_$u,n_$t[4]=n_$e,n_$t[5]=n_$J,n_$t[6]=n_$M,n_$t[7]=n_$n,n_$t[8]=n_$V,n_$t[9]=n_$A,n_$t[10]=n_$P,n_$t[11]=n_$$,n_$t[12]=n_$O,n_$t[13]=n_$G,n_$t[14]=n_$z,n_$t[15]=n_$f}n_$G(n_$F,"laya.d3.math.Matrix4x4");var n_$N=n_$F.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.getElementByRowColumn=function(n_$N,n_$C){if(n_$N<0||3<n_$N)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(n_$C<0||3<n_$C)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*n_$N+n_$C]},n_$N.setElementByRowColumn=function(n_$N,n_$C,n_$a){if(n_$N<0||3<n_$N)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(n_$C<0||3<n_$C)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*n_$N+n_$C]=n_$a},n_$N.equalsOtherMatrix=function(n_$N){var n_$C=this.elements,n_$a=n_$N.elements;return n_$hN.nearEqual(n_$C[0],n_$a[0])&&n_$hN.nearEqual(n_$C[1],n_$a[1])&&n_$hN.nearEqual(n_$C[2],n_$a[2])&&n_$hN.nearEqual(n_$C[3],n_$a[3])&&n_$hN.nearEqual(n_$C[4],n_$a[4])&&n_$hN.nearEqual(n_$C[5],n_$a[5])&&n_$hN.nearEqual(n_$C[6],n_$a[6])&&n_$hN.nearEqual(n_$C[7],n_$a[7])&&n_$hN.nearEqual(n_$C[8],n_$a[8])&&n_$hN.nearEqual(n_$C[9],n_$a[9])&&n_$hN.nearEqual(n_$C[10],n_$a[10])&&n_$hN.nearEqual(n_$C[11],n_$a[11])&&n_$hN.nearEqual(n_$C[12],n_$a[12])&&n_$hN.nearEqual(n_$C[13],n_$a[13])&&n_$hN.nearEqual(n_$C[14],n_$a[14])&&n_$hN.nearEqual(n_$C[15],n_$a[15])},n_$N.decomposeTransRotScale=function(n_$N,n_$C,n_$a){var n_$u=n_$F._tempMatrix4x4;return this.decomposeTransRotMatScale(n_$N,n_$u,n_$a)?(n_$aC.createFromMatrix4x4(n_$u,n_$C),!0):(n_$C.identity(),!1)},n_$N.decomposeTransRotMatScale=function(n_$N,n_$C,n_$a){var n_$u=this.elements,n_$e=n_$N.elements,n_$J=n_$C.elements,n_$M=n_$a.elements;n_$e[0]=n_$u[12],n_$e[1]=n_$u[13],n_$e[2]=n_$u[14];var n_$n=n_$u[0],n_$V=n_$u[1],n_$A=n_$u[2],n_$P=n_$u[4],n_$$=n_$u[5],n_$O=n_$u[6],n_$G=n_$u[8],n_$z=n_$u[9],n_$f=n_$u[10],n_$t=n_$M[0]=Math.sqrt(n_$n*n_$n+n_$V*n_$V+n_$A*n_$A),n_$g=n_$M[1]=Math.sqrt(n_$P*n_$P+n_$$*n_$$+n_$O*n_$O),n_$x=n_$M[2]=Math.sqrt(n_$G*n_$G+n_$z*n_$z+n_$f*n_$f);if(n_$hN.isZero(n_$t)||n_$hN.isZero(n_$g)||n_$hN.isZero(n_$x))return n_$J[1]=n_$J[2]=n_$J[3]=n_$J[4]=n_$J[6]=n_$J[7]=n_$J[8]=n_$J[9]=n_$J[11]=n_$J[12]=n_$J[13]=n_$J[14]=0,n_$J[0]=n_$J[5]=n_$J[10]=n_$J[15]=1,!1;var n_$W=n_$F._tempVector0,n_$v=n_$W.elements;n_$v[0]=n_$G/n_$x,n_$v[1]=n_$z/n_$x,n_$v[2]=n_$f/n_$x;var n_$X=n_$F._tempVector1,n_$r=n_$X.elements;n_$r[0]=n_$n/n_$t,n_$r[1]=n_$V/n_$t,n_$r[2]=n_$A/n_$t;var n_$c=n_$F._tempVector2;n_$MC.cross(n_$W,n_$X,n_$c);var n_$E=n_$F._tempVector1;return n_$MC.cross(n_$c,n_$W,n_$E),n_$J[3]=n_$J[7]=n_$J[11]=n_$J[12]=n_$J[13]=n_$J[14]=0,n_$J[15]=1,n_$J[0]=n_$E.x,n_$J[1]=n_$E.y,n_$J[2]=n_$E.z,n_$J[4]=n_$c.x,n_$J[5]=n_$c.y,n_$J[6]=n_$c.z,n_$J[8]=n_$W.x,n_$J[9]=n_$W.y,n_$J[10]=n_$W.z,n_$J[0]*n_$n+n_$J[1]*n_$V+n_$J[2]*n_$A<0&&(n_$M[0]=-n_$t),n_$J[4]*n_$P+n_$J[5]*n_$$+n_$J[6]*n_$O<0&&(n_$M[1]=-n_$g),n_$J[8]*n_$G+n_$J[9]*n_$z+n_$J[10]*n_$f<0&&(n_$M[2]=-n_$x),!0},n_$N.decomposeYawPitchRoll=function(n_$N){var n_$C=n_$N.elements,n_$a=Math.asin(-this.elements[9]);n_$C[1]=n_$a,Math.cos(n_$a)>n_$hN.zeroTolerance?(n_$C[2]=Math.atan2(this.elements[1],this.elements[5]),n_$C[0]=Math.atan2(this.elements[8],this.elements[10])):(n_$C[2]=Math.atan2(-this.elements[4],this.elements[0]),n_$C[0]=0)},n_$N.normalize=function(){var n_$N=this.elements,n_$C=n_$N[0],n_$a=n_$N[1],n_$u=n_$N[2],n_$e=Math.sqrt(n_$C*n_$C+n_$a*n_$a+n_$u*n_$u);if(!n_$e)return n_$N[0]=0,n_$N[1]=0,void(n_$N[2]=0);1!=n_$e&&(n_$e=1/n_$e,n_$N[0]=n_$C*n_$e,n_$N[1]=n_$a*n_$e,n_$N[2]=n_$u*n_$e)},n_$N.transpose=function(){var n_$N,n_$C;return n_$C=(n_$N=this.elements)[1],n_$N[1]=n_$N[4],n_$N[4]=n_$C,n_$C=n_$N[2],n_$N[2]=n_$N[8],n_$N[8]=n_$C,n_$C=n_$N[3],n_$N[3]=n_$N[12],n_$N[12]=n_$C,n_$C=n_$N[6],n_$N[6]=n_$N[9],n_$N[9]=n_$C,n_$C=n_$N[7],n_$N[7]=n_$N[13],n_$N[13]=n_$C,n_$C=n_$N[11],n_$N[11]=n_$N[14],n_$N[14]=n_$C,this},n_$N.invert=function(n_$N){var n_$C=this.elements,n_$a=n_$N.elements,n_$u=n_$C[0],n_$e=n_$C[1],n_$J=n_$C[2],n_$M=n_$C[3],n_$n=n_$C[4],n_$V=n_$C[5],n_$A=n_$C[6],n_$P=n_$C[7],n_$$=n_$C[8],n_$O=n_$C[9],n_$G=n_$C[10],n_$z=n_$C[11],n_$f=n_$C[12],n_$t=n_$C[13],n_$g=n_$C[14],n_$x=n_$C[15],n_$W=n_$u*n_$V-n_$e*n_$n,n_$v=n_$u*n_$A-n_$J*n_$n,n_$X=n_$u*n_$P-n_$M*n_$n,n_$r=n_$e*n_$A-n_$J*n_$V,n_$c=n_$e*n_$P-n_$M*n_$V,n_$E=n_$J*n_$P-n_$M*n_$A,n_$F=n_$$*n_$t-n_$O*n_$f,n_$D=n_$$*n_$g-n_$G*n_$f,n_$s=n_$$*n_$x-n_$z*n_$f,n_$q=n_$O*n_$g-n_$G*n_$t,n_$_=n_$O*n_$x-n_$z*n_$t,n_$d=n_$G*n_$x-n_$z*n_$g,n_$Q=n_$W*n_$d-n_$v*n_$_+n_$X*n_$q+n_$r*n_$s-n_$c*n_$D+n_$E*n_$F;0!==Math.abs(n_$Q)&&(n_$Q=1/n_$Q,n_$a[0]=(n_$V*n_$d-n_$A*n_$_+n_$P*n_$q)*n_$Q,n_$a[1]=(n_$J*n_$_-n_$e*n_$d-n_$M*n_$q)*n_$Q,n_$a[2]=(n_$t*n_$E-n_$g*n_$c+n_$x*n_$r)*n_$Q,n_$a[3]=(n_$G*n_$c-n_$O*n_$E-n_$z*n_$r)*n_$Q,n_$a[4]=(n_$A*n_$s-n_$n*n_$d-n_$P*n_$D)*n_$Q,n_$a[5]=(n_$u*n_$d-n_$J*n_$s+n_$M*n_$D)*n_$Q,n_$a[6]=(n_$g*n_$X-n_$f*n_$E-n_$x*n_$v)*n_$Q,n_$a[7]=(n_$$*n_$E-n_$G*n_$X+n_$z*n_$v)*n_$Q,n_$a[8]=(n_$n*n_$_-n_$V*n_$s+n_$P*n_$F)*n_$Q,n_$a[9]=(n_$e*n_$s-n_$u*n_$_-n_$M*n_$F)*n_$Q,n_$a[10]=(n_$f*n_$c-n_$t*n_$X+n_$x*n_$W)*n_$Q,n_$a[11]=(n_$O*n_$X-n_$$*n_$c-n_$z*n_$W)*n_$Q,n_$a[12]=(n_$V*n_$D-n_$n*n_$q-n_$A*n_$F)*n_$Q,n_$a[13]=(n_$u*n_$q-n_$e*n_$D+n_$J*n_$F)*n_$Q,n_$a[14]=(n_$t*n_$v-n_$f*n_$r-n_$g*n_$W)*n_$Q,n_$a[15]=(n_$$*n_$r-n_$O*n_$v+n_$G*n_$W)*n_$Q)},n_$N.identity=function(){var n_$N=this.elements;n_$N[1]=n_$N[2]=n_$N[3]=n_$N[4]=n_$N[6]=n_$N[7]=n_$N[8]=n_$N[9]=n_$N[11]=n_$N[12]=n_$N[13]=n_$N[14]=0,n_$N[0]=n_$N[5]=n_$N[10]=n_$N[15]=1},n_$N.cloneTo=function(n_$N){var n_$C,n_$a,n_$u;if((n_$a=this.elements)!==(n_$u=n_$N.elements))for(n_$C=0;n_$C<16;++n_$C)n_$u[n_$C]=n_$a[n_$C]},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$N.getTranslationVector=function(n_$N){var n_$C=this.elements,n_$a=n_$N.elements;n_$a[0]=n_$C[12],n_$a[1]=n_$C[13],n_$a[2]=n_$C[14]},n_$N.setTranslationVector=function(n_$N){var n_$C=this.elements,n_$a=n_$N.elements;n_$C[12]=n_$a[0],n_$C[13]=n_$a[1],n_$C[14]=n_$a[2]},n_$N.getForward=function(n_$N){var n_$C=this.elements,n_$a=n_$N.elements;n_$a[0]=-n_$C[8],n_$a[1]=-n_$C[9],n_$a[2]=-n_$C[10]},n_$N.setForward=function(n_$N){var n_$C=this.elements,n_$a=n_$N.elements;n_$C[8]=-n_$a[0],n_$C[9]=-n_$a[1],n_$C[10]=-n_$a[2]},n_$F.createRotationX=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=Math.sin(n_$N),n_$e=Math.cos(n_$N);n_$a[1]=n_$a[2]=n_$a[3]=n_$a[4]=n_$a[7]=n_$a[8]=n_$a[11]=n_$a[12]=n_$a[13]=n_$a[14]=0,n_$a[0]=n_$a[15]=1,n_$a[5]=n_$a[10]=n_$e,n_$a[6]=n_$u,n_$a[9]=-n_$u},n_$F.createRotationY=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=Math.sin(n_$N),n_$e=Math.cos(n_$N);n_$a[1]=n_$a[3]=n_$a[4]=n_$a[6]=n_$a[7]=n_$a[9]=n_$a[11]=n_$a[12]=n_$a[13]=n_$a[14]=0,n_$a[5]=n_$a[15]=1,n_$a[0]=n_$a[10]=n_$e,n_$a[2]=-n_$u,n_$a[8]=n_$u},n_$F.createRotationZ=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=Math.sin(n_$N),n_$e=Math.cos(n_$N);n_$a[2]=n_$a[3]=n_$a[6]=n_$a[7]=n_$a[8]=n_$a[9]=n_$a[11]=n_$a[12]=n_$a[13]=n_$a[14]=0,n_$a[10]=n_$a[15]=1,n_$a[0]=n_$a[5]=n_$e,n_$a[1]=n_$u,n_$a[4]=-n_$u},n_$F.createRotationYawPitchRoll=function(n_$N,n_$C,n_$a,n_$u){n_$aC.createFromYawPitchRoll(n_$N,n_$C,n_$a,n_$F._tempQuaternion),n_$F.createRotationQuaternion(n_$F._tempQuaternion,n_$u)},n_$F.createRotationAxis=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=Math.cos(n_$C),n_$V=Math.sin(n_$C),n_$A=n_$e*n_$e,n_$P=n_$J*n_$J,n_$$=n_$M*n_$M,n_$O=n_$e*n_$J,n_$G=n_$e*n_$M,n_$z=n_$J*n_$M,n_$f=n_$a.elements;n_$f[3]=n_$f[7]=n_$f[11]=n_$f[12]=n_$f[13]=n_$f[14]=0,n_$f[15]=1,n_$f[0]=n_$A+n_$n*(1-n_$A),n_$f[1]=n_$O-n_$n*n_$O+n_$V*n_$M,n_$f[2]=n_$G-n_$n*n_$G-n_$V*n_$J,n_$f[4]=n_$O-n_$n*n_$O-n_$V*n_$M,n_$f[5]=n_$P+n_$n*(1-n_$P),n_$f[6]=n_$z-n_$n*n_$z+n_$V*n_$e,n_$f[8]=n_$G-n_$n*n_$G+n_$V*n_$J,n_$f[9]=n_$z-n_$n*n_$z-n_$V*n_$e,n_$f[10]=n_$$+n_$n*(1-n_$$)},n_$F.createRotationQuaternion=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$a[0],n_$J=n_$a[1],n_$M=n_$a[2],n_$n=n_$a[3],n_$V=n_$e*n_$e,n_$A=n_$J*n_$J,n_$P=n_$M*n_$M,n_$$=n_$e*n_$J,n_$O=n_$M*n_$n,n_$G=n_$M*n_$e,n_$z=n_$J*n_$n,n_$f=n_$J*n_$M,n_$t=n_$e*n_$n;n_$u[3]=n_$u[7]=n_$u[11]=n_$u[12]=n_$u[13]=n_$u[14]=0,n_$u[15]=1,n_$u[0]=1-2*(n_$A+n_$P),n_$u[1]=2*(n_$$+n_$O),n_$u[2]=2*(n_$G-n_$z),n_$u[4]=2*(n_$$-n_$O),n_$u[5]=1-2*(n_$P+n_$V),n_$u[6]=2*(n_$f+n_$t),n_$u[8]=2*(n_$G+n_$z),n_$u[9]=2*(n_$f-n_$t),n_$u[10]=1-2*(n_$A+n_$V)},n_$F.createTranslate=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;n_$u[4]=n_$u[8]=n_$u[1]=n_$u[9]=n_$u[2]=n_$u[6]=n_$u[3]=n_$u[7]=n_$u[11]=0,n_$u[0]=n_$u[5]=n_$u[10]=n_$u[15]=1,n_$u[12]=n_$a[0],n_$u[13]=n_$a[1],n_$u[14]=n_$a[2]},n_$F.createScaling=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;n_$u[0]=n_$a[0],n_$u[5]=n_$a[1],n_$u[10]=n_$a[2],n_$u[1]=n_$u[4]=n_$u[8]=n_$u[12]=n_$u[9]=n_$u[13]=n_$u[2]=n_$u[6]=n_$u[14]=n_$u[3]=n_$u[7]=n_$u[11]=0,n_$u[15]=1},n_$F.multiply=function(n_$N,n_$C,n_$a){var n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P;for(n_$e=n_$a.elements,n_$J=n_$N.elements,n_$e===(n_$M=n_$C.elements)&&(n_$M=n_$M.slice()),n_$u=0;n_$u<4;n_$u++)n_$n=n_$J[n_$u],n_$V=n_$J[n_$u+4],n_$A=n_$J[n_$u+8],n_$P=n_$J[n_$u+12],n_$e[n_$u]=n_$n*n_$M[0]+n_$V*n_$M[1]+n_$A*n_$M[2]+n_$P*n_$M[3],n_$e[n_$u+4]=n_$n*n_$M[4]+n_$V*n_$M[5]+n_$A*n_$M[6]+n_$P*n_$M[7],n_$e[n_$u+8]=n_$n*n_$M[8]+n_$V*n_$M[9]+n_$A*n_$M[10]+n_$P*n_$M[11],n_$e[n_$u+12]=n_$n*n_$M[12]+n_$V*n_$M[13]+n_$A*n_$M[14]+n_$P*n_$M[15]},n_$F.createFromQuaternion=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=n_$N.elements,n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$u[3],n_$V=n_$e+n_$e,n_$A=n_$J+n_$J,n_$P=n_$M+n_$M,n_$$=n_$e*n_$V,n_$O=n_$J*n_$V,n_$G=n_$J*n_$A,n_$z=n_$M*n_$V,n_$f=n_$M*n_$A,n_$t=n_$M*n_$P,n_$g=n_$n*n_$V,n_$x=n_$n*n_$A,n_$W=n_$n*n_$P;n_$a[0]=1-n_$G-n_$t,n_$a[1]=n_$O+n_$W,n_$a[2]=n_$z-n_$x,n_$a[3]=0,n_$a[4]=n_$O-n_$W,n_$a[5]=1-n_$$-n_$t,n_$a[6]=n_$f+n_$g,n_$a[7]=0,n_$a[8]=n_$z+n_$x,n_$a[9]=n_$f-n_$g,n_$a[10]=1-n_$$-n_$G,n_$a[11]=0,n_$a[12]=0,n_$a[13]=0,n_$a[14]=0,n_$a[15]=1},n_$F.createAffineTransformation=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.elements,n_$J=n_$C.elements,n_$M=n_$a.elements,n_$n=n_$u.elements,n_$V=n_$J[0],n_$A=n_$J[1],n_$P=n_$J[2],n_$$=n_$J[3],n_$O=n_$V+n_$V,n_$G=n_$A+n_$A,n_$z=n_$P+n_$P,n_$f=n_$V*n_$O,n_$t=n_$V*n_$G,n_$g=n_$V*n_$z,n_$x=n_$A*n_$G,n_$W=n_$A*n_$z,n_$v=n_$P*n_$z,n_$X=n_$$*n_$O,n_$r=n_$$*n_$G,n_$c=n_$$*n_$z,n_$E=n_$M[0],n_$F=n_$M[1],n_$D=n_$M[2];n_$n[0]=(1-(n_$x+n_$v))*n_$E,n_$n[1]=(n_$t+n_$c)*n_$E,n_$n[2]=(n_$g-n_$r)*n_$E,n_$n[3]=0,n_$n[4]=(n_$t-n_$c)*n_$F,n_$n[5]=(1-(n_$f+n_$v))*n_$F,n_$n[6]=(n_$W+n_$X)*n_$F,n_$n[7]=0,n_$n[8]=(n_$g+n_$r)*n_$D,n_$n[9]=(n_$W-n_$X)*n_$D,n_$n[10]=(1-(n_$f+n_$x))*n_$D,n_$n[11]=0,n_$n[12]=n_$e[0],n_$n[13]=n_$e[1],n_$n[14]=n_$e[2],n_$n[15]=1},n_$F.createLookAt=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$u.elements,n_$J=n_$F._tempVector0,n_$M=n_$F._tempVector1,n_$n=n_$F._tempVector2;n_$MC.subtract(n_$N,n_$C,n_$n),n_$MC.normalize(n_$n,n_$n),n_$MC.cross(n_$a,n_$n,n_$J),n_$MC.normalize(n_$J,n_$J),n_$MC.cross(n_$n,n_$J,n_$M),n_$u.identity(),n_$e[0]=n_$J.x,n_$e[4]=n_$J.y,n_$e[8]=n_$J.z,n_$e[1]=n_$M.x,n_$e[5]=n_$M.y,n_$e[9]=n_$M.z,n_$e[2]=n_$n.x,n_$e[6]=n_$n.y,n_$e[10]=n_$n.z,n_$e[12]=-n_$MC.dot(n_$J,n_$N),n_$e[13]=-n_$MC.dot(n_$M,n_$N),n_$e[14]=-n_$MC.dot(n_$n,n_$N)},n_$F.createPerspective=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$e.elements,n_$M=1/Math.tan(n_$N/2),n_$n=1/(n_$a-n_$u);n_$J[0]=n_$M/n_$C,n_$J[5]=n_$M,n_$J[10]=(n_$u+n_$a)*n_$n,n_$J[11]=-1,n_$J[14]=2*n_$u*n_$a*n_$n,n_$J[1]=n_$J[2]=n_$J[3]=n_$J[4]=n_$J[6]=n_$J[7]=n_$J[8]=n_$J[9]=n_$J[12]=n_$J[13]=n_$J[15]=0},n_$F.createOrthoOffCenterRH=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){var n_$n=n_$M.elements,n_$V=1/(n_$N-n_$C),n_$A=1/(n_$a-n_$u),n_$P=1/(n_$e-n_$J);n_$n[1]=n_$n[2]=n_$n[3]=n_$n[4]=n_$n[6]=n_$n[7]=n_$n[8]=n_$n[9]=n_$n[11]=0,n_$n[15]=1,n_$n[0]=-2*n_$V,n_$n[5]=-2*n_$A,n_$n[10]=2*n_$P,n_$n[12]=(n_$N+n_$C)*n_$V,n_$n[13]=(n_$u+n_$a)*n_$A,n_$n[14]=(n_$J+n_$e)*n_$P},n_$F.translation=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;n_$u[0]=n_$u[5]=n_$u[10]=n_$u[15]=1,n_$u[12]=n_$a[0],n_$u[13]=n_$a[1],n_$u[14]=n_$a[2]},n_$$(n_$F,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new n_$F},"_tempVector0",function(){return this._tempVector0=new n_$MC},"_tempVector1",function(){return this._tempVector1=new n_$MC},"_tempVector2",function(){return this._tempVector2=new n_$MC},"_tempQuaternion",function(){return this._tempQuaternion=new n_$aC},"DEFAULT",function(){return this.DEFAULT=new n_$F},"ZERO",function(){return this.ZERO=new n_$F(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),n_$F}(),n_$CC=(function(){function n_$W(n_$N,n_$C){this.extents=null,this.transformation=null,this.extents=n_$N,this.transformation=n_$C}n_$G(n_$W,"laya.d3.math.OrientedBoundBox");var n_$N=n_$W.prototype;n_$N.getCorners=function(n_$N){var n_$C=n_$W._tempV30.elements,n_$a=n_$W._tempV31.elements,n_$u=n_$W._tempV32.elements,n_$e=this.extents.elements;n_$C[0]=n_$e[0],n_$C[1]=n_$C[2]=0,n_$a[1]=n_$e[1],n_$a[0]=n_$a[2]=0,n_$u[2]=n_$e[2],n_$u[0]=n_$u[1]=0,n_$MC.TransformNormal(n_$W._tempV30,this.transformation,n_$W._tempV30),n_$MC.TransformNormal(n_$W._tempV31,this.transformation,n_$W._tempV31),n_$MC.TransformNormal(n_$W._tempV32,this.transformation,n_$W._tempV32);var n_$J=n_$W._tempV33;this.transformation.getTranslationVector(n_$J),n_$N.length=8,n_$MC.add(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV32,n_$N[0]),n_$MC.add(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV32,n_$N[1]),n_$MC.subtract(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV32,n_$N[2]),n_$MC.subtract(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV32,n_$N[3]),n_$MC.add(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV32,n_$N[4]),n_$MC.add(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV32,n_$N[5]),n_$MC.subtract(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV32,n_$N[6]),n_$MC.subtract(n_$J,n_$W._tempV30,n_$W._tempV34),n_$MC.subtract(n_$W._tempV34,n_$W._tempV31,n_$W._tempV34),n_$MC.add(n_$W._tempV34,n_$W._tempV32,n_$N[7])},n_$N.transform=function(n_$N){n_$NC.multiply(this.transformation,n_$N,this.transformation)},n_$N.scale=function(n_$N){n_$MC.multiply(this.extents,n_$N,this.extents)},n_$N.translate=function(n_$N){this.transformation.getTranslationVector(n_$W._tempV30),n_$MC.add(n_$W._tempV30,n_$N,n_$W._tempV31),this.transformation.setTranslationVector(n_$W._tempV31)},n_$N.Size=function(n_$N){n_$MC.scale(this.extents,2,n_$N)},n_$N.getSize=function(n_$N){var n_$C=this.extents.elements;n_$W._tempV30.x=n_$C[0],n_$W._tempV31.y=n_$C[1],n_$W._tempV32.z=n_$C[2],n_$MC.TransformNormal(n_$W._tempV30,this.transformation,n_$W._tempV30),n_$MC.TransformNormal(n_$W._tempV31,this.transformation,n_$W._tempV31),n_$MC.TransformNormal(n_$W._tempV31,this.transformation,n_$W._tempV32);var n_$a=n_$N.elements;n_$a[0]=n_$MC.scalarLength(n_$W._tempV30),n_$a[1]=n_$MC.scalarLength(n_$W._tempV31),n_$a[2]=n_$MC.scalarLength(n_$W._tempV32)},n_$N.getSizeSquared=function(n_$N){var n_$C=this.extents.elements;n_$W._tempV30.x=n_$C[0],n_$W._tempV31.y=n_$C[1],n_$W._tempV32.z=n_$C[2],n_$MC.TransformNormal(n_$W._tempV30,this.transformation,n_$W._tempV30),n_$MC.TransformNormal(n_$W._tempV31,this.transformation,n_$W._tempV31),n_$MC.TransformNormal(n_$W._tempV31,this.transformation,n_$W._tempV32);var n_$a=n_$N.elements;n_$a[0]=n_$MC.scalarLengthSquared(n_$W._tempV30),n_$a[1]=n_$MC.scalarLengthSquared(n_$W._tempV31),n_$a[2]=n_$MC.scalarLengthSquared(n_$W._tempV32)},n_$N.getCenter=function(n_$N){this.transformation.getTranslationVector(n_$N)},n_$N.containsPoint=function(n_$N){var n_$C=this.extents.elements,n_$a=n_$C[0],n_$u=n_$C[1],n_$e=n_$C[2];this.transformation.invert(n_$W._tempM0),n_$MC.transformCoordinate(n_$N,n_$W._tempM0,n_$W._tempV30);var n_$J=n_$W._tempV30.elements,n_$M=Math.abs(n_$J[0]),n_$n=Math.abs(n_$J[1]),n_$V=Math.abs(n_$J[2]);return n_$hN.nearEqual(n_$M,n_$a)&&n_$hN.nearEqual(n_$n,n_$u)&&n_$hN.nearEqual(n_$V,n_$e)?2:n_$M<n_$a&&n_$n<n_$u&&n_$V<n_$e?1:0},n_$N.containsPoints=function(n_$N){var n_$C=this.extents.elements,n_$a=n_$C[0],n_$u=n_$C[1],n_$e=n_$C[2];this.transformation.invert(n_$W._tempM0);for(var n_$J=!0,n_$M=!1,n_$n=0;n_$n<n_$N.length;n_$n++){n_$MC.transformCoordinate(n_$N[n_$n],n_$W._tempM0,n_$W._tempV30);var n_$V=n_$W._tempV30.elements,n_$A=Math.abs(n_$V[0]),n_$P=Math.abs(n_$V[1]),n_$$=Math.abs(n_$V[2]);n_$hN.nearEqual(n_$A,n_$a)&&n_$hN.nearEqual(n_$P,n_$u)&&n_$hN.nearEqual(n_$$,n_$e)&&(n_$M=!0),n_$A<n_$a&&n_$P<n_$u&&n_$$<n_$e?n_$M=!0:n_$J=!1}return n_$J?1:n_$M?2:0},n_$N.containsSphere=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!1);var n_$a=this.extents.elements,n_$u=n_$a[0],n_$e=n_$a[1],n_$J=n_$a[2],n_$M=n_$N.radius;this.transformation.invert(n_$W._tempM0),n_$MC.transformCoordinate(n_$N.center,n_$W._tempM0,n_$W._tempV30);var n_$n=NaN;if(n_$n=n_$C?n_$M:(n_$MC.scale(n_$MC.UnitX,n_$M,n_$W._tempV31),n_$MC.TransformNormal(n_$W._tempV31,n_$W._tempM0,n_$W._tempV31),n_$MC.scalarLength(n_$W._tempV31)),n_$MC.scale(this.extents,-1,n_$W._tempV32),n_$MC.Clamp(n_$W._tempV30,n_$W._tempV32,this.extents,n_$W._tempV33),n_$n*n_$n<n_$MC.distanceSquared(n_$W._tempV30,n_$W._tempV33))return 0;var n_$V=n_$W._tempV30.elements,n_$A=n_$V[0],n_$P=n_$V[1],n_$$=n_$V[2],n_$O=n_$W._tempV32.elements,n_$G=n_$O[0],n_$z=n_$O[1],n_$f=n_$O[2];return n_$G+n_$n<=n_$A&&n_$A<=n_$u-n_$n&&n_$n<n_$u-n_$G&&n_$z+n_$n<=n_$P&&n_$P<=n_$e-n_$n&&n_$n<n_$e-n_$z&&n_$f+n_$n<=n_$$&&n_$$<=n_$J-n_$n&&n_$n<n_$J-n_$f?1:2},n_$N.containsOrientedBoundBox=function(n_$N){var n_$C=0,n_$a=0;n_$N.getCorners(n_$W._corners);var n_$u=this.containsPoints(n_$W._corners);if(0!=n_$u)return n_$u;var n_$e=this.extents.elements;n_$N.extents.cloneTo(n_$W._tempV35);var n_$J=n_$W._tempV35.elements;n_$W._getRows(this.transformation,n_$W._rows1),n_$W._getRows(n_$N.transformation,n_$W._rows2);var n_$M=NaN;for(n_$C=0;n_$C<4;n_$C++)for(n_$a=0;n_$a<4;n_$a++)3==n_$C||3==n_$a?(n_$W._tempM0.setElementByRowColumn(n_$C,n_$a,0),n_$W._tempM1.setElementByRowColumn(n_$C,n_$a,0)):(n_$M=n_$MC.dot(n_$W._rows1[n_$C],n_$W._rows2[n_$a]),n_$W._tempM0.setElementByRowColumn(n_$C,n_$a,n_$M),n_$W._tempM1.setElementByRowColumn(n_$C,n_$a,Math.abs(n_$M)));n_$N.getCenter(n_$W._tempV34),this.getCenter(n_$W._tempV36),n_$MC.subtract(n_$W._tempV34,n_$W._tempV36,n_$W._tempV30);var n_$n=n_$W._tempV31.elements;n_$n[0]=n_$MC.dot(n_$W._tempV30,n_$W._rows1[0]),n_$n[1]=n_$MC.dot(n_$W._tempV30,n_$W._rows1[1]),n_$n[2]=n_$MC.dot(n_$W._tempV30,n_$W._rows1[2]);var n_$V=n_$W._tempV32.elements,n_$A=n_$W._tempV33.elements;for(n_$C=0;n_$C<3;n_$C++)if(n_$V[0]=n_$W._tempM1.getElementByRowColumn(n_$C,0),n_$V[1]=n_$W._tempM1.getElementByRowColumn(n_$C,1),n_$V[2]=n_$W._tempM1.getElementByRowColumn(n_$C,2),n_$e[n_$C]+n_$MC.dot(n_$W._tempV35,n_$W._tempV32)<Math.abs(n_$n[n_$C]))return 0;for(n_$a=0;n_$a<3;n_$a++)if(n_$V[0]=n_$W._tempM1.getElementByRowColumn(0,n_$a),n_$V[1]=n_$W._tempM1.getElementByRowColumn(1,n_$a),n_$V[2]=n_$W._tempM1.getElementByRowColumn(2,n_$a),n_$A[0]=n_$W._tempM0.getElementByRowColumn(0,n_$a),n_$A[1]=n_$W._tempM0.getElementByRowColumn(1,n_$a),n_$A[2]=n_$W._tempM0.getElementByRowColumn(2,n_$a),n_$MC.dot(this.extents,n_$W._tempV32)+n_$J[n_$a]<Math.abs(n_$MC.dot(n_$W._tempV31,n_$W._tempV33)))return 0;for(n_$C=0;n_$C<3;n_$C++)for(n_$a=0;n_$a<3;n_$a++){var n_$P=(n_$C+1)%3,n_$$=(n_$C+2)%3,n_$O=(n_$a+1)%3,n_$G=(n_$a+2)%3;if(n_$e[n_$P]*n_$W._tempM1.getElementByRowColumn(n_$$,n_$a)+n_$e[n_$$]*n_$W._tempM1.getElementByRowColumn(n_$P,n_$a)+(n_$J[n_$O]*n_$W._tempM1.getElementByRowColumn(n_$C,n_$G)+n_$J[n_$G]*n_$W._tempM1.getElementByRowColumn(n_$C,n_$O))<Math.abs(n_$n[n_$$]*n_$W._tempM0.getElementByRowColumn(n_$P,n_$a)-n_$n[n_$P]*n_$W._tempM0.getElementByRowColumn(n_$$,n_$a)))return 0}return 2},n_$N.containsLine=function(n_$N,n_$C){n_$W._corners[0]=n_$N,n_$W._corners[1]=n_$C;var n_$a=this.containsPoints(n_$W._corners);if(0!=n_$a)return n_$a;var n_$u=this.extents.elements,n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2];this.transformation.invert(n_$W._tempM0),n_$MC.transformCoordinate(n_$N,n_$W._tempM0,n_$W._tempV30),n_$MC.transformCoordinate(n_$C,n_$W._tempM0,n_$W._tempV31),n_$MC.add(n_$W._tempV30,n_$W._tempV31,n_$W._tempV32),n_$MC.scale(n_$W._tempV32,.5,n_$W._tempV32),n_$MC.subtract(n_$W._tempV30,n_$W._tempV32,n_$W._tempV33);var n_$n=n_$W._tempV33.elements,n_$V=n_$n[0],n_$A=n_$n[1],n_$P=n_$n[2],n_$$=n_$W._tempV34.elements,n_$O=n_$$[0]=Math.abs(n_$n[0]),n_$G=n_$$[1]=Math.abs(n_$n[1]),n_$z=n_$$[2]=Math.abs(n_$n[2]),n_$f=n_$W._tempV32.elements,n_$t=n_$f[0],n_$g=n_$f[1],n_$x=n_$f[2];return Math.abs(n_$t)>n_$e+n_$O?0:Math.abs(n_$g)>n_$J+n_$G?0:Math.abs(n_$x)>n_$M+n_$z?0:Math.abs(n_$g*n_$P-n_$x*n_$A)>n_$J*n_$z+n_$M*n_$G?0:Math.abs(n_$t*n_$P-n_$x*n_$V)>n_$e*n_$z+n_$M*n_$O?0:Math.abs(n_$t*n_$A-n_$g*n_$V)>n_$e*n_$G+n_$J*n_$O?0:2},n_$N.containsBoundBox=function(n_$N){var n_$C=0,n_$a=0,n_$u=n_$N.min,n_$e=n_$N.max;n_$N.getCorners(n_$W._corners);var n_$J=this.containsPoints(n_$W._corners);if(0!=n_$J)return n_$J;n_$MC.subtract(n_$e,n_$u,n_$W._tempV30),n_$MC.scale(n_$W._tempV30,.5,n_$W._tempV30),n_$MC.add(n_$u,n_$W._tempV30,n_$W._tempV30),n_$MC.subtract(n_$e,n_$W._tempV30,n_$W._tempV31);var n_$M=this.extents.elements,n_$n=n_$W._tempV31.elements;n_$W._getRows(this.transformation,n_$W._rows1),this.transformation.invert(n_$W._tempM0);for(n_$C=0;n_$C<3;n_$C++)for(n_$a=0;n_$a<3;n_$a++)n_$W._tempM1.setElementByRowColumn(n_$C,n_$a,Math.abs(n_$W._tempM0.getElementByRowColumn(n_$C,n_$a)));this.getCenter(n_$W._tempV35),n_$MC.subtract(n_$W._tempV30,n_$W._tempV35,n_$W._tempV32);var n_$V=n_$W._tempV31.elements;n_$V[0]=n_$MC.dot(n_$W._tempV32,n_$W._rows1[0]),n_$V[1]=n_$MC.dot(n_$W._tempV32,n_$W._rows1[1]),n_$V[2]=n_$MC.dot(n_$W._tempV32,n_$W._rows1[2]);var n_$A=n_$W._tempV33.elements,n_$P=n_$W._tempV34.elements;for(n_$C=0;n_$C<3;n_$C++)if(n_$A[0]=n_$W._tempM1.getElementByRowColumn(n_$C,0),n_$A[1]=n_$W._tempM1.getElementByRowColumn(n_$C,1),n_$A[2]=n_$W._tempM1.getElementByRowColumn(n_$C,2),n_$M[n_$C]+n_$MC.dot(n_$W._tempV31,n_$W._tempV33)<Math.abs(n_$V[n_$C]))return 0;for(n_$a=0;n_$a<3;n_$a++)if(n_$A[0]=n_$W._tempM1.getElementByRowColumn(0,n_$a),n_$A[1]=n_$W._tempM1.getElementByRowColumn(1,n_$a),n_$A[2]=n_$W._tempM1.getElementByRowColumn(2,n_$a),n_$P[0]=n_$W._tempM0.getElementByRowColumn(0,n_$a),n_$P[1]=n_$W._tempM0.getElementByRowColumn(1,n_$a),n_$P[2]=n_$W._tempM0.getElementByRowColumn(2,n_$a),n_$MC.dot(this.extents,n_$W._tempV33)+n_$n[n_$a]<Math.abs(n_$MC.dot(n_$W._tempV31,n_$W._tempV34)))return 0;for(n_$C=0;n_$C<3;n_$C++)for(n_$a=0;n_$a<3;n_$a++){var n_$$=(n_$C+1)%3,n_$O=(n_$C+2)%3,n_$G=(n_$a+1)%3,n_$z=(n_$a+2)%3;if(n_$M[n_$$]*n_$W._tempM1.getElementByRowColumn(n_$O,n_$a)+n_$M[n_$O]*n_$W._tempM1.getElementByRowColumn(n_$$,n_$a)+(n_$n[n_$G]*n_$W._tempM1.getElementByRowColumn(n_$C,n_$z)+n_$n[n_$z]*n_$W._tempM1.getElementByRowColumn(n_$C,n_$G))<Math.abs(n_$V[n_$O]*n_$W._tempM0.getElementByRowColumn(n_$$,n_$a)-n_$V[n_$$]*n_$W._tempM0.getElementByRowColumn(n_$O,n_$a)))return 0}return 2},n_$N.intersectsRay=function(n_$N,n_$C){n_$MC.scale(this.extents,-1,n_$W._tempV30),this.transformation.invert(n_$W._tempM0),n_$MC.TransformNormal(n_$N.direction,n_$W._tempM0,n_$W._ray.direction),n_$MC.transformCoordinate(n_$N.origin,n_$W._tempM0,n_$W._ray.origin),n_$W._boxBound1.min=n_$W._tempV30,n_$W._boxBound1.max=this.extents;var n_$a=Collision.intersectsRayAndBoxRP(n_$W._ray,n_$W._boxBound1,n_$C);return-1!==n_$a&&n_$MC.transformCoordinate(n_$C,this.transformation,n_$C),n_$a},n_$N._getLocalCorners=function(n_$N){n_$N.length=8;var n_$C=this.extents.elements;n_$W._tempV30.x=n_$C[0],n_$W._tempV31.y=n_$C[1],n_$W._tempV32.z=n_$C[2],n_$MC.add(n_$W._tempV30,n_$W._tempV31,n_$W._tempV33),n_$MC.add(n_$W._tempV33,n_$W._tempV32,n_$N[0]),n_$MC.add(n_$W._tempV30,n_$W._tempV31,n_$W._tempV33),n_$MC.subtract(n_$W._tempV33,n_$W._tempV32,n_$N[1]),n_$MC.subtract(n_$W._tempV31,n_$W._tempV30,n_$W._tempV33),n_$MC.subtract(n_$W._tempV33,n_$W._tempV30,n_$N[2]),n_$MC.subtract(n_$W._tempV31,n_$W._tempV30,n_$W._tempV33),n_$MC.add(n_$W._tempV33,n_$W._tempV32,n_$N[3]),n_$MC.subtract(n_$W._tempV30,n_$W._tempV31,n_$W._tempV33),n_$MC.add(n_$W._tempV33,n_$W._tempV32,n_$N[4]),n_$MC.subtract(n_$W._tempV30,n_$W._tempV31,n_$W._tempV33),n_$MC.subtract(n_$W._tempV33,n_$W._tempV32,n_$N[5]),n_$MC.scale(n_$N[0],-1,n_$N[6]),n_$MC.subtract(n_$W._tempV32,n_$W._tempV30,n_$W._tempV33),n_$MC.subtract(n_$W._tempV33,n_$W._tempV31,n_$N[7])},n_$N.equals=function(n_$N){return this.extents==n_$N.extents&&this.transformation==n_$N.transformation},n_$N.cloneTo=function(n_$N){var n_$C=n_$N;this.extents.cloneTo(n_$C.extents),this.transformation.cloneTo(n_$C.transformation)},n_$W.createByBoundBox=function(n_$N,n_$C){var n_$a=n_$N.min,n_$u=n_$N.max;n_$MC.subtract(n_$u,n_$a,n_$W._tempV30),n_$MC.scale(n_$W._tempV30,.5,n_$W._tempV30),n_$MC.add(n_$a,n_$W._tempV30,n_$W._tempV31),n_$MC.subtract(n_$u,n_$W._tempV31,n_$W._tempV32),n_$NC.translation(n_$W._tempV31,n_$W._tempM0);var n_$e=n_$W._tempV32.clone(),n_$J=n_$W._tempM0.clone();n_$C.extents=n_$e,n_$C.transformation=n_$J},n_$W.createByMinAndMaxVertex=function(n_$N,n_$C){return n_$MC.subtract(n_$C,n_$N,n_$W._tempV30),n_$MC.scale(n_$W._tempV30,.5,n_$W._tempV30),n_$MC.add(n_$N,n_$W._tempV30,n_$W._tempV31),n_$MC.subtract(n_$C,n_$W._tempV31,n_$W._tempV32),n_$NC.translation(n_$W._tempV31,n_$W._tempM0),new n_$W(n_$W._tempV32,n_$W._tempM0)},n_$W._getRows=function(n_$N,n_$C){n_$C.length=3;var n_$a=n_$N.elements,n_$u=n_$C[0].elements;n_$u[0]=n_$a[0],n_$u[1]=n_$a[1],n_$u[2]=n_$a[2];var n_$e=n_$C[1].elements;n_$e[0]=n_$a[4],n_$e[1]=n_$a[5],n_$e[2]=n_$a[6];var n_$J=n_$C[2].elements;n_$J[0]=n_$a[8],n_$J[1]=n_$a[9],n_$J[2]=n_$a[10]},n_$W.getObbtoObbMatrix4x4=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.transformation,n_$J=n_$C.transformation;if(n_$a){n_$W._getRows(n_$e,n_$W._rows1),n_$W._getRows(n_$J,n_$W._rows2);for(var n_$M=0;n_$M<3;n_$M++)for(var n_$n=0;n_$n<3;n_$n++)n_$u.setElementByRowColumn(n_$M,n_$n,n_$MC.dot(n_$W._rows2[n_$M],n_$W._rows1[n_$n]));n_$C.getCenter(n_$W._tempV30),n_$N.getCenter(n_$W._tempV31),n_$MC.subtract(n_$W._tempV30,n_$W._tempV31,n_$W._tempV32);var n_$V=n_$u.elements;n_$V[12]=n_$MC.dot(n_$W._tempV32,n_$W._rows1[0]),n_$V[13]=n_$MC.dot(n_$W._tempV32,n_$W._rows1[1]),n_$V[14]=n_$MC.dot(n_$W._tempV32,n_$W._rows1[2]),n_$V[15]=1}else n_$e.invert(n_$W._tempM0),n_$NC.multiply(n_$J,n_$W._tempM0,n_$u)},n_$W.merge=function(n_$N,n_$C,n_$a){var n_$u=n_$N.extents,n_$e=n_$N.transformation;n_$W.getObbtoObbMatrix4x4(n_$N,n_$C,n_$a,n_$W._tempM0),n_$C._getLocalCorners(n_$W._corners),n_$MC.transformCoordinate(n_$W._corners[0],n_$W._tempM0,n_$W._corners[0]),n_$MC.transformCoordinate(n_$W._corners[1],n_$W._tempM0,n_$W._corners[1]),n_$MC.transformCoordinate(n_$W._corners[2],n_$W._tempM0,n_$W._corners[2]),n_$MC.transformCoordinate(n_$W._corners[3],n_$W._tempM0,n_$W._corners[3]),n_$MC.transformCoordinate(n_$W._corners[4],n_$W._tempM0,n_$W._corners[4]),n_$MC.transformCoordinate(n_$W._corners[5],n_$W._tempM0,n_$W._corners[5]),n_$MC.transformCoordinate(n_$W._corners[6],n_$W._tempM0,n_$W._corners[6]),n_$MC.transformCoordinate(n_$W._corners[7],n_$W._tempM0,n_$W._corners[7]),n_$MC.scale(n_$u,-1,n_$W._boxBound1.min),n_$u.cloneTo(n_$W._boxBound1.max),n_$HN.createfromPoints(n_$W._corners,n_$W._boxBound2),n_$HN.merge(n_$W._boxBound2,n_$W._boxBound1,n_$W._boxBound3);var n_$J=n_$W._boxBound3.min,n_$M=n_$W._boxBound3.max;n_$MC.subtract(n_$M,n_$J,n_$W._tempV30),n_$MC.scale(n_$W._tempV30,.5,n_$W._tempV30),n_$MC.add(n_$J,n_$W._tempV30,n_$W._tempV32),n_$MC.subtract(n_$M,n_$W._tempV32,n_$u),n_$MC.transformCoordinate(n_$W._tempV32,n_$e,n_$W._tempV33)},n_$$(n_$W,["_tempV30",function(){return this._tempV30=new n_$MC},"_tempV31",function(){return this._tempV31=new n_$MC},"_tempV32",function(){return this._tempV32=new n_$MC},"_tempV33",function(){return this._tempV33=new n_$MC},"_tempV34",function(){return this._tempV34=new n_$MC},"_tempV35",function(){return this._tempV35=new n_$MC},"_tempV36",function(){return this._tempV36=new n_$MC},"_tempM0",function(){return this._tempM0=new n_$NC},"_tempM1",function(){return this._tempM1=new n_$NC},"_corners",function(){return this._corners=[new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC]},"_rows1",function(){return this._rows1=[new n_$MC,new n_$MC,new n_$MC]},"_rows2",function(){return this._rows2=[new n_$MC,new n_$MC,new n_$MC]},"_ray",function(){return this._ray=new n_$eC(new n_$MC,new n_$MC)},"_boxBound1",function(){return this._boxBound1=new n_$HN(new n_$MC,new n_$MC)},"_boxBound2",function(){return this._boxBound2=new n_$HN(new n_$MC,new n_$MC)},"_boxBound3",function(){return this._boxBound3=new n_$HN(new n_$MC,new n_$MC)}])}(),function(){function n_$X(n_$N,n_$C){this.normal=null,this.distance=NaN,void 0===n_$C&&(n_$C=0),this.normal=n_$N,this.distance=n_$C}return n_$G(n_$X,"laya.d3.math.Plane"),n_$X.prototype.normalize=function(){var n_$N=this.normal.elements,n_$C=n_$N[0],n_$a=n_$N[1],n_$u=n_$N[2],n_$e=1/Math.sqrt(n_$C*n_$C+n_$a*n_$a+n_$u*n_$u);n_$N[0]=n_$C*n_$e,n_$N[1]=n_$a*n_$e,n_$N[2]=n_$u*n_$e,this.distance*=n_$e},n_$X.createPlaneBy3P=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$C.elements,n_$J=n_$a.elements,n_$M=n_$e[0]-n_$u[0],n_$n=n_$e[1]-n_$u[1],n_$V=n_$e[2]-n_$u[2],n_$A=n_$J[0]-n_$u[0],n_$P=n_$J[1]-n_$u[1],n_$$=n_$J[2]-n_$u[2],n_$O=n_$n*n_$$-n_$V*n_$P,n_$G=n_$V*n_$A-n_$M*n_$$,n_$z=n_$M*n_$P-n_$n*n_$A,n_$f=1/Math.sqrt(n_$O*n_$O+n_$G*n_$G+n_$z*n_$z),n_$t=n_$O*n_$f,n_$g=n_$G*n_$f,n_$x=n_$z*n_$f,n_$W=n_$X._TEMPVec3.elements;n_$W[0]=n_$t,n_$W[1]=n_$g,n_$W[2]=n_$x;var n_$v=-(n_$t*n_$u[0]+n_$g*n_$u[1]+n_$x*n_$u[2]);return new n_$X(n_$X._TEMPVec3,n_$v)},n_$X.PlaneIntersectionType_Back=0,n_$X.PlaneIntersectionType_Front=1,n_$X.PlaneIntersectionType_Intersecting=2,n_$$(n_$X,["_TEMPVec3",function(){return this._TEMPVec3=new n_$MC}]),n_$X}()),n_$aC=function(){function n_$e(n_$N,n_$C,n_$a,n_$u){this.elements=new Float32Array(4),void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=1),this.elements[0]=n_$N,this.elements[1]=n_$C,this.elements[2]=n_$a,this.elements[3]=n_$u}n_$G(n_$e,"laya.d3.math.Quaternion");var n_$N=n_$e.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.scaling=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=this.elements;n_$a[0]=n_$u[0]*n_$N,n_$a[1]=n_$u[1]*n_$N,n_$a[2]=n_$u[2]*n_$N,n_$a[3]=n_$u[3]*n_$N},n_$N.normalize=function(n_$N){var n_$C=n_$N.elements,n_$a=this.elements,n_$u=n_$a[0],n_$e=n_$a[1],n_$J=n_$a[2],n_$M=n_$a[3],n_$n=n_$u*n_$u+n_$e*n_$e+n_$J*n_$J+n_$M*n_$M;0<n_$n&&(n_$n=1/Math.sqrt(n_$n),n_$C[0]=n_$u*n_$n,n_$C[1]=n_$e*n_$n,n_$C[2]=n_$J*n_$n,n_$C[3]=n_$M*n_$n)},n_$N.length=function(){var n_$N=this.elements,n_$C=n_$N[0],n_$a=n_$N[1],n_$u=n_$N[2],n_$e=n_$N[3];return Math.sqrt(n_$C*n_$C+n_$a*n_$a+n_$u*n_$u+n_$e*n_$e)},n_$N.rotateX=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=this.elements;n_$N*=.5;var n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$u[3],n_$V=Math.sin(n_$N),n_$A=Math.cos(n_$N);n_$a[0]=n_$e*n_$A+n_$n*n_$V,n_$a[1]=n_$J*n_$A+n_$M*n_$V,n_$a[2]=n_$M*n_$A-n_$J*n_$V,n_$a[3]=n_$n*n_$A-n_$e*n_$V},n_$N.rotateY=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=this.elements;n_$N*=.5;var n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$u[3],n_$V=Math.sin(n_$N),n_$A=Math.cos(n_$N);n_$a[0]=n_$e*n_$A-n_$M*n_$V,n_$a[1]=n_$J*n_$A+n_$n*n_$V,n_$a[2]=n_$M*n_$A+n_$e*n_$V,n_$a[3]=n_$n*n_$A-n_$J*n_$V},n_$N.rotateZ=function(n_$N,n_$C){var n_$a=n_$C.elements,n_$u=this.elements;n_$N*=.5;var n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$u[3],n_$V=Math.sin(n_$N),n_$A=Math.cos(n_$N);n_$a[0]=n_$e*n_$A+n_$J*n_$V,n_$a[1]=n_$J*n_$A-n_$e*n_$V,n_$a[2]=n_$M*n_$A+n_$n*n_$V,n_$a[3]=n_$n*n_$A-n_$M*n_$V},n_$N.getYawPitchRoll=function(n_$N){n_$MC.transformQuat(n_$MC.ForwardRH,this,n_$e.TEMPVector31),n_$MC.transformQuat(n_$MC.Up,this,n_$e.TEMPVector32);var n_$C=n_$e.TEMPVector32.elements;n_$e.angleTo(n_$MC.ZERO,n_$e.TEMPVector31,n_$e.TEMPVector33);var n_$a=n_$e.TEMPVector33.elements;n_$a[0]==Math.PI/2?(n_$a[1]=n_$e.arcTanAngle(n_$C[2],n_$C[0]),n_$a[2]=0):n_$a[0]==-Math.PI/2?(n_$a[1]=n_$e.arcTanAngle(-n_$C[2],-n_$C[0]),n_$a[2]=0):(n_$NC.createRotationY(-n_$a[1],n_$e.TEMPMatrix0),n_$NC.createRotationX(-n_$a[0],n_$e.TEMPMatrix1),n_$MC.transformCoordinate(n_$e.TEMPVector32,n_$e.TEMPMatrix0,n_$e.TEMPVector32),n_$MC.transformCoordinate(n_$e.TEMPVector32,n_$e.TEMPMatrix1,n_$e.TEMPVector32),n_$a[2]=n_$e.arcTanAngle(n_$C[1],-n_$C[0])),n_$a[1]<=-Math.PI&&(n_$a[1]=Math.PI),n_$a[2]<=-Math.PI&&(n_$a[2]=Math.PI),n_$a[1]>=Math.PI&&n_$a[2]>=Math.PI&&(n_$a[1]=0,n_$a[2]=0,n_$a[0]=Math.PI-n_$a[0]);var n_$u=n_$N.elements;n_$u[0]=n_$a[1],n_$u[1]=n_$a[0],n_$u[2]=n_$a[2]},n_$N.invert=function(n_$N){var n_$C=n_$N.elements,n_$a=this.elements,n_$u=n_$a[0],n_$e=n_$a[1],n_$J=n_$a[2],n_$M=n_$a[3],n_$n=n_$u*n_$u+n_$e*n_$e+n_$J*n_$J+n_$M*n_$M,n_$V=n_$n?1/n_$n:0;n_$C[0]=-n_$u*n_$V,n_$C[1]=-n_$e*n_$V,n_$C[2]=-n_$J*n_$V,n_$C[3]=n_$M*n_$V},n_$N.identity=function(){var n_$N=this.elements;n_$N[0]=0,n_$N[1]=0,n_$N[2]=0,n_$N[3]=1},n_$N.fromArray=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0),this.elements[0]=n_$N[n_$C+0],this.elements[1]=n_$N[n_$C+1],this.elements[2]=n_$N[n_$C+2],this.elements[3]=n_$N[n_$C+3]},n_$N.cloneTo=function(n_$N){var n_$C,n_$a,n_$u;if((n_$a=this.elements)!==(n_$u=n_$N.elements))for(n_$C=0;n_$C<4;++n_$C)n_$u[n_$C]=n_$a[n_$C]},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$N.equals=function(n_$N){var n_$C=this.elements,n_$a=n_$N.elements;return n_$hN.nearEqual(n_$C[0],n_$a[0])&&n_$hN.nearEqual(n_$C[1],n_$a[1])&&n_$hN.nearEqual(n_$C[2],n_$a[2])&&n_$hN.nearEqual(n_$C[3],n_$a[3])},n_$N.lengthSquared=function(){var n_$N=this.elements[0],n_$C=this.elements[1],n_$a=this.elements[2],n_$u=this.elements[3];return n_$N*n_$N+n_$C*n_$C+n_$a*n_$a+n_$u*n_$u},n_$z(0,n_$N,"x",function(){return this.elements[0]}),n_$z(0,n_$N,"y",function(){return this.elements[1]}),n_$z(0,n_$N,"z",function(){return this.elements[2]}),n_$z(0,n_$N,"w",function(){return this.elements[3]}),n_$e.createFromYawPitchRoll=function(n_$N,n_$C,n_$a,n_$u){var n_$e=.5*n_$a,n_$J=.5*n_$C,n_$M=.5*n_$N,n_$n=Math.sin(n_$e),n_$V=Math.cos(n_$e),n_$A=Math.sin(n_$J),n_$P=Math.cos(n_$J),n_$$=Math.sin(n_$M),n_$O=Math.cos(n_$M),n_$G=n_$u.elements;n_$G[0]=n_$O*n_$A*n_$V+n_$$*n_$P*n_$n,n_$G[1]=n_$$*n_$P*n_$V-n_$O*n_$A*n_$n,n_$G[2]=n_$O*n_$P*n_$n-n_$$*n_$A*n_$V,n_$G[3]=n_$O*n_$P*n_$V+n_$$*n_$A*n_$n},n_$e.multiply=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$C.elements,n_$J=n_$a.elements,n_$M=n_$u[0],n_$n=n_$u[1],n_$V=n_$u[2],n_$A=n_$u[3],n_$P=n_$e[0],n_$$=n_$e[1],n_$O=n_$e[2],n_$G=n_$e[3],n_$z=n_$n*n_$O-n_$V*n_$$,n_$f=n_$V*n_$P-n_$M*n_$O,n_$t=n_$M*n_$$-n_$n*n_$P,n_$g=n_$M*n_$P+n_$n*n_$$+n_$V*n_$O;n_$J[0]=n_$M*n_$G+n_$P*n_$A+n_$z,n_$J[1]=n_$n*n_$G+n_$$*n_$A+n_$f,n_$J[2]=n_$V*n_$G+n_$O*n_$A+n_$t,n_$J[3]=n_$A*n_$G-n_$g},n_$e.arcTanAngle=function(n_$N,n_$C){return 0==n_$N?1==n_$C?Math.PI/2:-Math.PI/2:0<n_$N?Math.atan(n_$C/n_$N):n_$N<0?0<n_$C?Math.atan(n_$C/n_$N)+Math.PI:Math.atan(n_$C/n_$N)-Math.PI:0},n_$e.angleTo=function(n_$N,n_$C,n_$a){n_$MC.subtract(n_$C,n_$N,n_$e.TEMPVector30),n_$MC.normalize(n_$e.TEMPVector30,n_$e.TEMPVector30),n_$a.elements[0]=Math.asin(n_$e.TEMPVector30.y),n_$a.elements[1]=n_$e.arcTanAngle(-n_$e.TEMPVector30.z,-n_$e.TEMPVector30.x)},n_$e.createFromAxisAngle=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements;n_$C*=.5;var n_$J=Math.sin(n_$C);n_$u[0]=n_$J*n_$e[0],n_$u[1]=n_$J*n_$e[1],n_$u[2]=n_$J*n_$e[2],n_$u[3]=Math.cos(n_$C)},n_$e.createFromMatrix3x3=function(n_$N,n_$C){var n_$a,n_$u=n_$C.elements,n_$e=n_$N.elements,n_$J=n_$e[0]+n_$e[4]+n_$e[8];if(0<n_$J)n_$a=Math.sqrt(n_$J+1),n_$u[3]=.5*n_$a,n_$a=.5/n_$a,n_$u[0]=(n_$e[5]-n_$e[7])*n_$a,n_$u[1]=(n_$e[6]-n_$e[2])*n_$a,n_$u[2]=(n_$e[1]-n_$e[3])*n_$a;else{var n_$M=0;n_$e[4]>n_$e[0]&&(n_$M=1),n_$e[8]>n_$e[3*n_$M+n_$M]&&(n_$M=2);var n_$n=(n_$M+1)%3,n_$V=(n_$M+2)%3;n_$a=Math.sqrt(n_$e[3*n_$M+n_$M]-n_$e[3*n_$n+n_$n]-n_$e[3*n_$V+n_$V]+1),n_$u[n_$M]=.5*n_$a,n_$a=.5/n_$a,n_$u[3]=(n_$e[3*n_$n+n_$V]-n_$e[3*n_$V+n_$n])*n_$a,n_$u[n_$n]=(n_$e[3*n_$n+n_$M]+n_$e[3*n_$M+n_$n])*n_$a,n_$u[n_$V]=(n_$e[3*n_$V+n_$M]+n_$e[3*n_$M+n_$V])*n_$a}},n_$e.createFromMatrix4x4=function(n_$N,n_$C){var n_$a,n_$u,n_$e=n_$N.elements,n_$J=n_$C.elements,n_$M=n_$e[0]+n_$e[5]+n_$e[10];0<n_$M?(n_$a=Math.sqrt(n_$M+1),n_$J[3]=.5*n_$a,n_$a=.5/n_$a,n_$J[0]=(n_$e[6]-n_$e[9])*n_$a,n_$J[1]=(n_$e[8]-n_$e[2])*n_$a,n_$J[2]=(n_$e[1]-n_$e[4])*n_$a):n_$e[0]>=n_$e[5]&&n_$e[0]>=n_$e[10]?(n_$u=.5/(n_$a=Math.sqrt(1+n_$e[0]-n_$e[5]-n_$e[10])),n_$J[0]=.5*n_$a,n_$J[1]=(n_$e[1]+n_$e[4])*n_$u,n_$J[2]=(n_$e[2]+n_$e[8])*n_$u,n_$J[3]=(n_$e[6]-n_$e[9])*n_$u):n_$e[5]>n_$e[10]?(n_$u=.5/(n_$a=Math.sqrt(1+n_$e[5]-n_$e[0]-n_$e[10])),n_$J[0]=(n_$e[4]+n_$e[1])*n_$u,n_$J[1]=.5*n_$a,n_$J[2]=(n_$e[9]+n_$e[6])*n_$u,n_$J[3]=(n_$e[8]-n_$e[2])*n_$u):(n_$u=.5/(n_$a=Math.sqrt(1+n_$e[10]-n_$e[0]-n_$e[5])),n_$J[0]=(n_$e[8]+n_$e[2])*n_$u,n_$J[1]=(n_$e[9]+n_$e[6])*n_$u,n_$J[2]=.5*n_$a,n_$J[3]=(n_$e[1]-n_$e[4])*n_$u)},n_$e.slerp=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J,n_$M,n_$n,n_$V,n_$A=n_$N.elements,n_$P=n_$C.elements,n_$$=n_$u.elements,n_$O=n_$A[0],n_$G=n_$A[1],n_$z=n_$A[2],n_$f=n_$A[3],n_$t=n_$P[0],n_$g=n_$P[1],n_$x=n_$P[2],n_$W=n_$P[3];return(n_$J=n_$O*n_$t+n_$G*n_$g+n_$z*n_$x+n_$f*n_$W)<0&&(n_$J=-n_$J,n_$t=-n_$t,n_$g=-n_$g,n_$x=-n_$x,n_$W=-n_$W),n_$V=1e-6<1-n_$J?(n_$e=Math.acos(n_$J),n_$M=Math.sin(n_$e),n_$n=Math.sin((1-n_$a)*n_$e)/n_$M,Math.sin(n_$a*n_$e)/n_$M):(n_$n=1-n_$a,n_$a),n_$$[0]=n_$n*n_$O+n_$V*n_$t,n_$$[1]=n_$n*n_$G+n_$V*n_$g,n_$$[2]=n_$n*n_$z+n_$V*n_$x,n_$$[3]=n_$n*n_$f+n_$V*n_$W,n_$$},n_$e.lerp=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$u.elements,n_$J=n_$N.elements,n_$M=n_$C.elements,n_$n=n_$J[0],n_$V=n_$J[1],n_$A=n_$J[2],n_$P=n_$J[3];n_$e[0]=n_$n+n_$a*(n_$M[0]-n_$n),n_$e[1]=n_$V+n_$a*(n_$M[1]-n_$V),n_$e[2]=n_$A+n_$a*(n_$M[2]-n_$A),n_$e[3]=n_$P+n_$a*(n_$M[3]-n_$P)},n_$e.add=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=n_$e[0]+n_$J[0],n_$u[1]=n_$e[1]+n_$J[1],n_$u[2]=n_$e[2]+n_$J[2],n_$u[3]=n_$e[3]+n_$J[3]},n_$e.dot=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;return n_$a[0]*n_$u[0]+n_$a[1]*n_$u[1]+n_$a[2]*n_$u[2]+n_$a[3]*n_$u[3]},n_$e.rotationLookAt=function(n_$N,n_$C,n_$a){n_$e.lookAt(n_$MC.ZERO,n_$N,n_$C,n_$a)},n_$e.lookAt=function(n_$N,n_$C,n_$a,n_$u){n_$UN.lookAt(n_$N,n_$C,n_$a,n_$e._tempMatrix3x3),n_$e.rotationMatrix(n_$e._tempMatrix3x3,n_$u)},n_$e.invert=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$N.lengthSquared();n_$hN.isZero(n_$e)||(n_$e=1/n_$e,n_$u[0]=-n_$a[0]*n_$e,n_$u[1]=-n_$a[1]*n_$e,n_$u[2]=-n_$a[2]*n_$e,n_$u[3]=n_$a[3]*n_$e)},n_$e.rotationMatrix=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$a[0],n_$e=n_$a[1],n_$J=n_$a[2],n_$M=n_$a[3],n_$n=n_$a[4],n_$V=n_$a[5],n_$A=n_$a[6],n_$P=n_$a[7],n_$$=n_$a[8],n_$O=n_$C.elements,n_$G=NaN,n_$z=NaN,n_$f=n_$u+n_$n+n_$$;0<n_$f?(n_$G=Math.sqrt(n_$f+1),n_$O[3]=.5*n_$G,n_$G=.5/n_$G,n_$O[0]=(n_$V-n_$P)*n_$G,n_$O[1]=(n_$A-n_$J)*n_$G,n_$O[2]=(n_$e-n_$M)*n_$G):n_$n<=n_$u&&n_$$<=n_$u?(n_$z=.5/(n_$G=Math.sqrt(1+n_$u-n_$n-n_$$)),n_$O[0]=.5*n_$G,n_$O[1]=(n_$e+n_$M)*n_$z,n_$O[2]=(n_$J+n_$A)*n_$z,n_$O[3]=(n_$V-n_$P)*n_$z):n_$$<n_$n?(n_$z=.5/(n_$G=Math.sqrt(1+n_$n-n_$u-n_$$)),n_$O[0]=(n_$M+n_$e)*n_$z,n_$O[1]=.5*n_$G,n_$O[2]=(n_$P+n_$V)*n_$z,n_$O[3]=(n_$A-n_$J)*n_$z):(n_$z=.5/(n_$G=Math.sqrt(1+n_$$-n_$u-n_$n)),n_$O[0]=(n_$A+n_$J)*n_$z,n_$O[1]=(n_$P+n_$V)*n_$z,n_$O[2]=.5*n_$G,n_$O[3]=(n_$e-n_$M)*n_$z)},n_$e.DEFAULT=new n_$e,n_$$(n_$e,["TEMPVector30",function(){return this.TEMPVector30=new n_$MC},"TEMPVector31",function(){return this.TEMPVector31=new n_$MC},"TEMPVector32",function(){return this.TEMPVector32=new n_$MC},"TEMPVector33",function(){return this.TEMPVector33=new n_$MC},"TEMPMatrix0",function(){return this.TEMPMatrix0=new n_$NC},"TEMPMatrix1",function(){return this.TEMPMatrix1=new n_$NC},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new n_$UN},"NAN",function(){return this.NAN=new n_$e(NaN,NaN,NaN,NaN)}]),n_$e}(),n_$uC=function(){function n_$N(n_$N){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=n_$N,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}n_$G(n_$N,"laya.d3.math.Rand");var n_$C=n_$N.prototype;return n_$C.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},n_$C.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},n_$C.getSignedFloat=function(){return 2*this.getFloat()-1},n_$z(0,n_$C,"seed",function(){return this.seeds[0]},function(n_$N){this.seeds[0]=n_$N,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),n_$N.getFloatFromInt=function(n_$N){return 1/8388607*(8388607&n_$N)},n_$N.getByteFromInt=function(n_$N){return(8388607&n_$N)>>>15},n_$N}(),n_$eC=(function(){function n_$e(n_$N){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(n_$N instanceof Array)||4!==n_$N.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|n_$N[0],this._state0L=0|n_$N[1],this._state1U=0|n_$N[2],this._state1L=0|n_$N[3]}n_$G(n_$e,"laya.d3.math.RandX");var n_$N=n_$e.prototype;n_$N.randomint=function(){var n_$N=this._state0U,n_$C=this._state0L,n_$a=this._state1U,n_$u=this._state1L,n_$e=(n_$u>>>0)+(n_$C>>>0),n_$J=n_$a+n_$N+(n_$e/2>>>31)>>>0,n_$M=n_$e>>>0,n_$n=0,n_$V=0;n_$n=(n_$N^=n_$n=n_$N<<23|(-512&n_$C)>>>9)^(this._state0U=n_$a),n_$V=(n_$C^=n_$V=n_$C<<23)^(this._state0L=n_$u);n_$n^=n_$N>>>18,n_$V^=n_$C>>>18|(262143&n_$N)<<14;return n_$n^=n_$a>>>5,n_$V^=n_$u>>>5|(31&n_$a)<<27,this._state1U=n_$n,this._state1L=n_$V,[n_$J,n_$M]},n_$N.random=function(){var n_$N=this.randomint(),n_$C=n_$N[0],n_$a=1023<<20|n_$C>>>12,n_$u=0|(n_$N[1]>>>12|(4095&n_$C)<<20);return n_$e._CONVERTION_BUFFER.setUint32(0,n_$a,!1),n_$e._CONVERTION_BUFFER.setUint32(4,n_$u,!1),n_$uC._CONVERTION_BUFFER.getFloat64(0,!1)-1},n_$$(n_$e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new n_$uC([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function n_$N(n_$N,n_$C){this.origin=null,this.direction=null,this.origin=n_$N,this.direction=n_$C}return n_$G(n_$N,"laya.d3.math.Ray"),n_$N}()),n_$JC=function(){function n_$N(n_$N,n_$C){this.elements=new Float32Array(2),void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0);var n_$a=this.elements;n_$a[0]=n_$N,n_$a[1]=n_$C}n_$G(n_$N,"laya.d3.math.Vector2");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.fromArray=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0),this.elements[0]=n_$N[n_$C+0],this.elements[1]=n_$N[n_$C+1]},n_$C.cloneTo=function(n_$N){var n_$C=n_$N.elements,n_$a=this.elements;n_$C[0]=n_$a[0],n_$C[1]=n_$a[1]},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"x",function(){return this.elements[0]},function(n_$N){this.elements[0]=n_$N}),n_$z(0,n_$C,"y",function(){return this.elements[1]},function(n_$N){this.elements[1]=n_$N}),n_$N.scale=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements;n_$u[0]=n_$e[0]*n_$C,n_$u[1]=n_$e[1]*n_$C},n_$$(n_$N,["ZERO",function(){return this.ZERO=new n_$N(0,0)},"ONE",function(){return this.ONE=new n_$N(1,1)}]),n_$N}(),n_$MC=function(){function n_$P(n_$N,n_$C,n_$a){this.elements=new Float32Array(3),void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0);var n_$u=this.elements;n_$u[0]=n_$N,n_$u[1]=n_$C,n_$u[2]=n_$a}n_$G(n_$P,"laya.d3.math.Vector3");var n_$N=n_$P.prototype;return n_$X.imps(n_$N,{"laya.d3.core.IClone":!0}),n_$N.fromArray=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0),this.elements[0]=n_$N[n_$C+0],this.elements[1]=n_$N[n_$C+1],this.elements[2]=n_$N[n_$C+2]},n_$N.cloneTo=function(n_$N){var n_$C=n_$N.elements,n_$a=this.elements;n_$C[0]=n_$a[0],n_$C[1]=n_$a[1],n_$C[2]=n_$a[2]},n_$N.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$N.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},n_$N.reset=function(n_$N,n_$C,n_$a){this.elements[0]=n_$N,this.elements[1]=n_$C,this.elements[2]=n_$a},n_$z(0,n_$N,"x",function(){return this.elements[0]},function(n_$N){this.elements[0]=n_$N}),n_$z(0,n_$N,"y",function(){return this.elements[1]},function(n_$N){this.elements[1]=n_$N}),n_$z(0,n_$N,"z",function(){return this.elements[2]},function(n_$N){this.elements[2]=n_$N}),n_$P.distanceSquared=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$a[0]-n_$u[0],n_$J=n_$a[1]-n_$u[1],n_$M=n_$a[2]-n_$u[2];return n_$e*n_$e+n_$J*n_$J+n_$M*n_$M},n_$P.distance=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$a[0]-n_$u[0],n_$J=n_$a[1]-n_$u[1],n_$M=n_$a[2]-n_$u[2];return Math.sqrt(n_$e*n_$e+n_$J*n_$J+n_$M*n_$M)},n_$P.min=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=Math.min(n_$e[0],n_$J[0]),n_$u[1]=Math.min(n_$e[1],n_$J[1]),n_$u[2]=Math.min(n_$e[2],n_$J[2])},n_$P.max=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=Math.max(n_$e[0],n_$J[0]),n_$u[1]=Math.max(n_$e[1],n_$J[1]),n_$u[2]=Math.max(n_$e[2],n_$J[2])},n_$P.transformQuat=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements,n_$M=n_$e[0],n_$n=n_$e[1],n_$V=n_$e[2],n_$A=n_$J[0],n_$P=n_$J[1],n_$$=n_$J[2],n_$O=n_$J[3],n_$G=n_$O*n_$M+n_$P*n_$V-n_$$*n_$n,n_$z=n_$O*n_$n+n_$$*n_$M-n_$A*n_$V,n_$f=n_$O*n_$V+n_$A*n_$n-n_$P*n_$M,n_$t=-n_$A*n_$M-n_$P*n_$n-n_$$*n_$V;n_$u[0]=n_$G*n_$O+n_$t*-n_$A+n_$z*-n_$$-n_$f*-n_$P,n_$u[1]=n_$z*n_$O+n_$t*-n_$P+n_$f*-n_$A-n_$G*-n_$$,n_$u[2]=n_$f*n_$O+n_$t*-n_$$+n_$G*-n_$P-n_$z*-n_$A},n_$P.scalarLength=function(n_$N){var n_$C=n_$N.elements,n_$a=n_$C[0],n_$u=n_$C[1],n_$e=n_$C[2];return Math.sqrt(n_$a*n_$a+n_$u*n_$u+n_$e*n_$e)},n_$P.scalarLengthSquared=function(n_$N){var n_$C=n_$N.elements,n_$a=n_$C[0],n_$u=n_$C[1],n_$e=n_$C[2];return n_$a*n_$a+n_$u*n_$u+n_$e*n_$e},n_$P.normalize=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$a[0],n_$J=n_$a[1],n_$M=n_$a[2],n_$n=n_$e*n_$e+n_$J*n_$J+n_$M*n_$M;0<n_$n&&(n_$n=1/Math.sqrt(n_$n),n_$u[0]=n_$a[0]*n_$n,n_$u[1]=n_$a[1]*n_$n,n_$u[2]=n_$a[2]*n_$n)},n_$P.multiply=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=n_$e[0]*n_$J[0],n_$u[1]=n_$e[1]*n_$J[1],n_$u[2]=n_$e[2]*n_$J[2]},n_$P.scale=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements;n_$u[0]=n_$e[0]*n_$C,n_$u[1]=n_$e[1]*n_$C,n_$u[2]=n_$e[2]*n_$C},n_$P.lerp=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$u.elements,n_$J=n_$N.elements,n_$M=n_$C.elements,n_$n=n_$J[0],n_$V=n_$J[1],n_$A=n_$J[2];n_$e[0]=n_$n+n_$a*(n_$M[0]-n_$n),n_$e[1]=n_$V+n_$a*(n_$M[1]-n_$V),n_$e[2]=n_$A+n_$a*(n_$M[2]-n_$A)},n_$P.transformV3ToV3=function(n_$N,n_$C,n_$a){var n_$u=n_$P._tempVector4;n_$P.transformV3ToV4(n_$N,n_$C,n_$u);var n_$e=n_$u.elements,n_$J=n_$a.elements;n_$J[0]=n_$e[0],n_$J[1]=n_$e[1],n_$J[2]=n_$e[2]},n_$P.transformV3ToV4=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$C.elements,n_$V=n_$a.elements;n_$V[0]=n_$e*n_$n[0]+n_$J*n_$n[4]+n_$M*n_$n[8]+n_$n[12],n_$V[1]=n_$e*n_$n[1]+n_$J*n_$n[5]+n_$M*n_$n[9]+n_$n[13],n_$V[2]=n_$e*n_$n[2]+n_$J*n_$n[6]+n_$M*n_$n[10]+n_$n[14],n_$V[3]=n_$e*n_$n[3]+n_$J*n_$n[7]+n_$M*n_$n[11]+n_$n[15]},n_$P.TransformNormal=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$C.elements,n_$V=n_$a.elements;n_$V[0]=n_$e*n_$n[0]+n_$J*n_$n[4]+n_$M*n_$n[8],n_$V[1]=n_$e*n_$n[1]+n_$J*n_$n[5]+n_$M*n_$n[9],n_$V[2]=n_$e*n_$n[2]+n_$J*n_$n[6]+n_$M*n_$n[10]},n_$P.transformCoordinate=function(n_$N,n_$C,n_$a){var n_$u=n_$P._tempVector4.elements,n_$e=n_$N.elements,n_$J=n_$e[0],n_$M=n_$e[1],n_$n=n_$e[2],n_$V=n_$C.elements;n_$u[0]=n_$J*n_$V[0]+n_$M*n_$V[4]+n_$n*n_$V[8]+n_$V[12],n_$u[1]=n_$J*n_$V[1]+n_$M*n_$V[5]+n_$n*n_$V[9]+n_$V[13],n_$u[2]=n_$J*n_$V[2]+n_$M*n_$V[6]+n_$n*n_$V[10]+n_$V[14],n_$u[3]=1/(n_$J*n_$V[3]+n_$M*n_$V[7]+n_$n*n_$V[11]+n_$V[15]);var n_$A=n_$a.elements;n_$A[0]=n_$u[0]*n_$u[3],n_$A[1]=n_$u[1]*n_$u[3],n_$A[2]=n_$u[2]*n_$u[3]},n_$P.Clamp=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.elements,n_$J=n_$e[0],n_$M=n_$e[1],n_$n=n_$e[2],n_$V=n_$C.elements,n_$A=n_$V[0],n_$P=n_$V[1],n_$$=n_$V[2],n_$O=n_$a.elements,n_$G=n_$O[0],n_$z=n_$O[1],n_$f=n_$O[2],n_$t=n_$u.elements;n_$J=(n_$J=n_$G<n_$J?n_$G:n_$J)<n_$A?n_$A:n_$J,n_$M=(n_$M=n_$z<n_$M?n_$z:n_$M)<n_$P?n_$P:n_$M,n_$n=(n_$n=n_$f<n_$n?n_$f:n_$n)<n_$$?n_$$:n_$n,n_$t[0]=n_$J,n_$t[1]=n_$M,n_$t[2]=n_$n},n_$P.add=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=n_$e[0]+n_$J[0],n_$u[1]=n_$e[1]+n_$J[1],n_$u[2]=n_$e[2]+n_$J[2]},n_$P.subtract=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=n_$e[0]-n_$J[0],n_$u[1]=n_$e[1]-n_$J[1],n_$u[2]=n_$e[2]-n_$J[2]},n_$P.cross=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$C.elements,n_$J=n_$a.elements,n_$M=n_$u[0],n_$n=n_$u[1],n_$V=n_$u[2],n_$A=n_$e[0],n_$P=n_$e[1],n_$$=n_$e[2];n_$J[0]=n_$n*n_$$-n_$V*n_$P,n_$J[1]=n_$V*n_$A-n_$M*n_$$,n_$J[2]=n_$M*n_$P-n_$n*n_$A},n_$P.dot=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;return n_$a[0]*n_$u[0]+n_$a[1]*n_$u[1]+n_$a[2]*n_$u[2]},n_$P.equals=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;return n_$hN.nearEqual(Math.abs(n_$a[0]),Math.abs(n_$u[0]))&&n_$hN.nearEqual(Math.abs(n_$a[1]),Math.abs(n_$u[1]))&&n_$hN.nearEqual(Math.abs(n_$a[2]),Math.abs(n_$u[2]))},n_$P.ZERO=new n_$P(0,0,0),n_$P.ONE=new n_$P(1,1,1),n_$P.NegativeUnitX=new n_$P(-1,0,0),n_$P.UnitX=new n_$P(1,0,0),n_$P.UnitY=new n_$P(0,1,0),n_$P.UnitZ=new n_$P(0,0,1),n_$P.ForwardRH=new n_$P(0,0,-1),n_$P.ForwardLH=new n_$P(0,0,1),n_$P.Up=new n_$P(0,1,0),n_$P.NAN=new n_$P(NaN,NaN,NaN),n_$$(n_$P,["_tempVector4",function(){return this._tempVector4=new n_$nC}]),n_$P}(),n_$nC=function(){function n_$N(n_$N,n_$C,n_$a,n_$u){this.elements=new Float32Array(4),void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=0);var n_$e=this.elements;n_$e[0]=n_$N,n_$e[1]=n_$C,n_$e[2]=n_$a,n_$e[3]=n_$u}n_$G(n_$N,"laya.d3.math.Vector4");var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C.fromArray=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0),this.elements[0]=n_$N[n_$C+0],this.elements[1]=n_$N[n_$C+1],this.elements[2]=n_$N[n_$C+2],this.elements[3]=n_$N[n_$C+3]},n_$C.cloneTo=function(n_$N){var n_$C=n_$N.elements,n_$a=this.elements;n_$C[0]=n_$a[0],n_$C[1]=n_$a[1],n_$C[2]=n_$a[2],n_$C[3]=n_$a[3]},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$C.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},n_$C.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},n_$z(0,n_$C,"x",function(){return this.elements[0]},function(n_$N){this.elements[0]=n_$N}),n_$z(0,n_$C,"y",function(){return this.elements[1]},function(n_$N){this.elements[1]=n_$N}),n_$z(0,n_$C,"z",function(){return this.elements[2]},function(n_$N){this.elements[2]=n_$N}),n_$z(0,n_$C,"w",function(){return this.elements[3]},function(n_$N){this.elements[3]=n_$N}),n_$N.lerp=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$u.elements,n_$J=n_$N.elements,n_$M=n_$C.elements,n_$n=n_$J[0],n_$V=n_$J[1],n_$A=n_$J[2],n_$P=n_$J[3];n_$e[0]=n_$n+n_$a*(n_$M[0]-n_$n),n_$e[1]=n_$V+n_$a*(n_$M[1]-n_$V),n_$e[2]=n_$A+n_$a*(n_$M[2]-n_$A),n_$e[3]=n_$P+n_$a*(n_$M[3]-n_$P)},n_$N.transformByM4x4=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$u[0],n_$J=n_$u[1],n_$M=n_$u[2],n_$n=n_$u[3],n_$V=n_$C.elements,n_$A=n_$a.elements;n_$A[0]=n_$e*n_$V[0]+n_$J*n_$V[4]+n_$M*n_$V[8]+n_$n*n_$V[12],n_$A[1]=n_$e*n_$V[1]+n_$J*n_$V[5]+n_$M*n_$V[9]+n_$n*n_$V[13],n_$A[2]=n_$e*n_$V[2]+n_$J*n_$V[6]+n_$M*n_$V[10]+n_$n*n_$V[14],n_$A[3]=n_$e*n_$V[3]+n_$J*n_$V[7]+n_$M*n_$V[11]+n_$n*n_$V[15]},n_$N.equals=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;return n_$hN.nearEqual(Math.abs(n_$a[0]),Math.abs(n_$u[0]))&&n_$hN.nearEqual(Math.abs(n_$a[1]),Math.abs(n_$u[1]))&&n_$hN.nearEqual(Math.abs(n_$a[2]),Math.abs(n_$u[2]))&&n_$hN.nearEqual(Math.abs(n_$a[3]),Math.abs(n_$u[3]))},n_$N.normalize=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$N.length();0<n_$e&&(n_$u[0]=n_$a[0]*n_$e,n_$u[1]=n_$a[1]*n_$e,n_$u[2]=n_$a[2]*n_$e,n_$u[3]=n_$a[3]*n_$e)},n_$N.add=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=n_$e[0]+n_$J[0],n_$u[1]=n_$e[1]+n_$J[1],n_$u[2]=n_$e[2]+n_$J[2],n_$u[3]=n_$e[3]+n_$J[3]},n_$N.subtract=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=n_$e[0]-n_$J[0],n_$u[1]=n_$e[1]-n_$J[1],n_$u[2]=n_$e[2]-n_$J[2],n_$u[3]=n_$e[3]-n_$J[3]},n_$N.multiply=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=n_$e[0]*n_$J[0],n_$u[1]=n_$e[1]*n_$J[1],n_$u[2]=n_$e[2]*n_$J[2],n_$u[3]=n_$e[3]*n_$J[3]},n_$N.scale=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements;n_$u[0]=n_$e[0]*n_$C,n_$u[1]=n_$e[1]*n_$C,n_$u[2]=n_$e[2]*n_$C,n_$u[3]=n_$e[3]*n_$C},n_$N.Clamp=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.elements,n_$J=n_$e[0],n_$M=n_$e[1],n_$n=n_$e[2],n_$V=n_$e[3],n_$A=n_$C.elements,n_$P=n_$A[0],n_$$=n_$A[1],n_$O=n_$A[2],n_$G=n_$A[3],n_$z=n_$a.elements,n_$f=n_$z[0],n_$t=n_$z[1],n_$g=n_$z[2],n_$x=n_$z[3],n_$W=n_$u.elements;n_$J=(n_$J=n_$f<n_$J?n_$f:n_$J)<n_$P?n_$P:n_$J,n_$M=(n_$M=n_$t<n_$M?n_$t:n_$M)<n_$$?n_$$:n_$M,n_$n=(n_$n=n_$g<n_$n?n_$g:n_$n)<n_$O?n_$O:n_$n,n_$V=(n_$V=n_$x<n_$V?n_$x:n_$V)<n_$G?n_$G:n_$V,n_$W[0]=n_$J,n_$W[1]=n_$M,n_$W[2]=n_$n,n_$W[3]=n_$V},n_$N.distanceSquared=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$a[0]-n_$u[0],n_$J=n_$a[1]-n_$u[1],n_$M=n_$a[2]-n_$u[2],n_$n=n_$a[3]-n_$u[3];return n_$e*n_$e+n_$J*n_$J+n_$M*n_$M+n_$n*n_$n},n_$N.distance=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements,n_$e=n_$a[0]-n_$u[0],n_$J=n_$a[1]-n_$u[1],n_$M=n_$a[2]-n_$u[2],n_$n=n_$a[3]-n_$u[3];return Math.sqrt(n_$e*n_$e+n_$J*n_$J+n_$M*n_$M+n_$n*n_$n)},n_$N.dot=function(n_$N,n_$C){var n_$a=n_$N.elements,n_$u=n_$C.elements;return n_$a[0]*n_$u[0]+n_$a[1]*n_$u[1]+n_$a[2]*n_$u[2]+n_$a[3]*n_$u[3]},n_$N.min=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=Math.min(n_$e[0],n_$J[0]),n_$u[1]=Math.min(n_$e[1],n_$J[1]),n_$u[2]=Math.min(n_$e[2],n_$J[2]),n_$u[3]=Math.min(n_$e[3],n_$J[3])},n_$N.max=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C.elements;n_$u[0]=Math.max(n_$e[0],n_$J[0]),n_$u[1]=Math.max(n_$e[1],n_$J[1]),n_$u[2]=Math.max(n_$e[2],n_$J[2]),n_$u[3]=Math.max(n_$e[3],n_$J[3])},n_$$(n_$N,["ZERO",function(){return this.ZERO=new n_$N},"ONE",function(){return this.ONE=new n_$N(1,1,1,1)},"UnitX",function(){return this.UnitX=new n_$N(1,0,0,0)},"UnitY",function(){return this.UnitY=new n_$N(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new n_$N(0,0,1,0)},"UnitW",function(){return this.UnitW=new n_$N(0,0,0,1)}]),n_$N}(),n_$VC=function(){function n_$J(n_$N,n_$C,n_$a,n_$u){this.minDepth=0,this.maxDepth=1,this.x=n_$N,this.y=n_$C,this.width=n_$a,this.height=n_$u}n_$G(n_$J,"laya.d3.math.Viewport");var n_$N=n_$J.prototype;return n_$N.project=function(n_$N,n_$C,n_$a){n_$MC.transformV3ToV3(n_$N,n_$C,n_$a);var n_$u=n_$N.elements,n_$e=n_$C.elements,n_$J=n_$a.elements,n_$M=n_$u[0]*n_$e[3]+n_$u[1]*n_$e[7]+n_$u[2]*n_$e[11]+n_$e[15];1!==n_$M&&(n_$J[0]=n_$J[0]/n_$M,n_$J[1]=n_$J[1]/n_$M,n_$J[2]=n_$J[2]/n_$M),n_$J[0]=.5*(n_$J[0]+1)*this.width+this.x,n_$J[1]=.5*(1-n_$J[1])*this.height+this.y,n_$J[2]=n_$J[2]*(this.maxDepth-this.minDepth)+this.minDepth},n_$N.unprojectFromMat=function(n_$N,n_$C,n_$a){var n_$u=n_$N.elements,n_$e=n_$C.elements,n_$J=n_$a.elements;n_$J[0]=(n_$u[0]-this.x)/this.width*2-1,n_$J[1]=-((n_$u[1]-this.y)/this.height*2-1);var n_$M=(this.maxDepth-this.minDepth)/2;n_$J[2]=(n_$u[2]-this.minDepth-n_$M)/n_$M;var n_$n=n_$J[0]*n_$e[3]+n_$J[1]*n_$e[7]+n_$J[2]*n_$e[11]+n_$e[15];n_$MC.transformV3ToV3(n_$a,n_$C,n_$a),1!==n_$n&&(n_$J[0]=n_$J[0]/n_$n,n_$J[1]=n_$J[1]/n_$n,n_$J[2]=n_$J[2]/n_$n)},n_$N.unprojectFromWVP=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$NC.multiply(n_$C,n_$a,n_$J._tempMatrix4x4),n_$u&&n_$NC.multiply(n_$J._tempMatrix4x4,n_$u,n_$J._tempMatrix4x4),n_$J._tempMatrix4x4.invert(n_$J._tempMatrix4x4),this.unprojectFromMat(n_$N,n_$J._tempMatrix4x4,n_$e)},n_$$(n_$J,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new n_$NC}]),n_$J}(),n_$AC=function(){function n_$q(n_$N){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=n_$N,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}n_$G(n_$q,"laya.d3.resource.models.SubMesh");var n_$N=n_$q.prototype;return n_$X.imps(n_$N,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),n_$N._getVertexBuffer=function(n_$N){return void 0===n_$N&&(n_$N=0),0===n_$N?this._vertexBuffer:null},n_$N._getIndexBuffer=function(){return this._indexBuffer},n_$N._getStaticBatchBakedVertexs=function(n_$N,n_$C){var n_$a,n_$u,n_$e=this._vertexBuffer,n_$J=n_$e.vertexDeclaration,n_$M=n_$J.getVertexElementByUsage(0).offset/4,n_$n=n_$J.getVertexElementByUsage(3).offset/4,n_$V=n_$C.meshRender.lightmapScaleOffset,n_$A=0,n_$P=0,n_$$=0,n_$O=0,n_$G=0,n_$z=0;if(n_$V)if(n_$u=n_$J.getVertexElementByUsage(15))n_$$=n_$J.vertexStride/4,n_$a=0<this._vertexCount?n_$e.getData().slice(this._vertexStart*n_$$,(this._vertexStart+this._vertexCount)*n_$$):n_$e.getData().slice(),n_$O=n_$u.offset/4;else{n_$$=(n_$z=n_$J.vertexStride/4)+2,n_$a=this._vertexCount?new Float32Array(this._vertexCount*(n_$e.vertexDeclaration.vertexStride/4+2)):new Float32Array(n_$e.vertexCount*(n_$e.vertexDeclaration.vertexStride/4+2)),n_$O=(n_$G=n_$J.getVertexElementByUsage(2).offset/4)+2;var n_$f=n_$e.getData();for(n_$A=0,n_$P=n_$f.length/n_$z;n_$A<n_$P;n_$A++){var n_$t=0;n_$t=0<this._vertexCount?(this._vertexStart+n_$A)*n_$z:n_$A*n_$z;var n_$g=n_$A*n_$$,n_$x=0;for(n_$x=0;n_$x<n_$O;n_$x++)n_$a[n_$g+n_$x]=n_$f[n_$t+n_$x];for(n_$x=n_$O;n_$x<n_$z;n_$x++)n_$a[n_$g+n_$x+2]=n_$f[n_$t+n_$x]}}else n_$$=n_$J.vertexStride/4,n_$a=this._vertexCount?n_$e.getData().slice(this._vertexStart*n_$$,(this._vertexStart+this._vertexCount)*n_$$):n_$e.getData().slice();if(n_$N){var n_$W=n_$N.worldMatrix,n_$v=n_$q._tempMatrix4x40;n_$W.invert(n_$v);var n_$X=n_$q._tempMatrix4x41,n_$r=n_$C.transform.worldMatrix;n_$NC.multiply(n_$v,n_$r,n_$X)}else n_$X=n_$C.transform.worldMatrix;var n_$c=n_$q._tempQuaternion0;for(n_$X.decomposeTransRotScale(n_$q._tempVector30,n_$c,n_$q._tempVector31),n_$A=0,n_$P=n_$a.length/n_$$;n_$A<n_$P;n_$A++){var n_$E=n_$A*n_$$+n_$M,n_$F=n_$A*n_$$+n_$n;if(n_$tC.transformVector3ArrayToVector3ArrayCoordinate(n_$a,n_$E,n_$X,n_$a,n_$E),n_$tC.transformVector3ArrayByQuat(n_$a,n_$F,n_$c,n_$a,n_$F),n_$V){var n_$D=n_$A*n_$$+n_$O;if(n_$u)n_$tC.transformLightingMapTexcoordByUV1Array(n_$a,n_$D,n_$V,n_$a,n_$D);else{var n_$s=n_$A*n_$z+n_$G;n_$tC.transformLightingMapTexcoordByUV0Array(n_$f,n_$s,n_$V,n_$a,n_$D)}}}return n_$a},n_$N._getVertexBuffers=function(){return null},n_$N._beforeRender=function(n_$N){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},n_$N._render=function(n_$N){var n_$C,n_$a=0,n_$u=n_$N.renderElement;if(1<this._indexCount){var n_$e=this._boneIndicesList.length;if(1<n_$e){for(var n_$J=0;n_$J<n_$e;n_$J++)(n_$C=n_$u._skinAnimationDatas||this._skinAnimationDatas)&&(n_$u._shaderValue.setValue(0,n_$C[n_$J]),n_$N._shader.uploadRenderElementUniforms(n_$u._shaderValue.data)),n_$_.mainContext.drawElements(4,this._subIndexBufferCount[n_$J],5123,2*this._subIndexBufferStart[n_$J]);n_$E.drawCall+=n_$e}else(n_$C=n_$u._skinAnimationDatas||this._skinAnimationDatas)&&(n_$u._shaderValue.setValue(0,n_$C[0]),n_$N._shader.uploadRenderElementUniforms(n_$u._shaderValue.data)),n_$_.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),n_$E.drawCall++;n_$a=this._indexCount}else n_$a=this._indexBuffer.indexCount,(n_$C=n_$u._skinAnimationDatas||this._skinAnimationDatas)&&(n_$u._shaderValue.setValue(0,n_$C[0]),n_$N._shader.uploadRenderElementUniforms(n_$u._shaderValue.data)),n_$_.mainContext.drawElements(4,n_$a,5123,0),n_$E.drawCall++;n_$E.trianglesFaces+=n_$a/3},n_$N.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},n_$N.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},n_$z(0,n_$N,"_vertexBufferCount",function(){return 1}),n_$z(0,n_$N,"triangleCount",function(){return this._indexBuffer.indexCount/3}),n_$$(n_$q,["_tempVector30",function(){return this._tempVector30=new n_$MC},"_tempVector31",function(){return this._tempVector31=new n_$MC},"_tempQuaternion0",function(){return this._tempQuaternion0=new n_$aC},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new n_$NC},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new n_$NC}]),n_$q}(),n_$PC=function(){function n_$N(n_$N){this.defineCounter=0,this.defines=null,n_$N?(this.defineCounter=n_$N.defineCounter,this.defines=n_$N.defines.slice()):(this.defineCounter=0,this.defines=[])}return n_$G(n_$N,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),n_$N.prototype.registerDefine=function(n_$N){var n_$C=Math.pow(2,this.defineCounter++);return this.defines[n_$C]=n_$N,n_$C},n_$N}(),n_$$C=function(){function n_$N(){}return n_$G(n_$N,"laya.d3.shader.ShaderInit3D"),n_$N.__init__=function(){var n_$N,n_$C;n_$EC._globalRegDefine("HIGHPRECISION",n_$EC.SHADERDEFINE_HIGHPRECISION),n_$EC._globalRegDefine("FOG",n_$EC.SHADERDEFINE_FOG),n_$EC._globalRegDefine("DIRECTIONLIGHT",n_$EC.SHADERDEFINE_DIRECTIONLIGHT),n_$EC._globalRegDefine("POINTLIGHT",n_$EC.SHADERDEFINE_POINTLIGHT),n_$EC._globalRegDefine("SPOTLIGHT",n_$EC.SHADERDEFINE_SPOTLIGHT),n_$EC._globalRegDefine("UV",n_$EC.SHADERDEFINE_UV0),n_$EC._globalRegDefine("COLOR",n_$EC.SHADERDEFINE_COLOR),n_$EC._globalRegDefine("UV1",n_$EC.SHADERDEFINE_UV1),n_$EC._globalRegDefine("CASTSHADOW",n_$GC.SHADERDEFINE_CAST_SHADOW),n_$EC._globalRegDefine("SHADOWMAP_PSSM1",n_$GC.SHADERDEFINE_SHADOW_PSSM1),n_$EC._globalRegDefine("SHADOWMAP_PSSM2",n_$GC.SHADERDEFINE_SHADOW_PSSM2),n_$EC._globalRegDefine("SHADOWMAP_PSSM3",n_$GC.SHADERDEFINE_SHADOW_PSSM3),n_$EC._globalRegDefine("SHADOWMAP_PCF_NO",n_$GC.SHADERDEFINE_SHADOW_PCF_NO),n_$EC._globalRegDefine("SHADOWMAP_PCF1",n_$GC.SHADERDEFINE_SHADOW_PCF1),n_$EC._globalRegDefine("SHADOWMAP_PCF2",n_$GC.SHADERDEFINE_SHADOW_PCF2),n_$EC._globalRegDefine("SHADOWMAP_PCF3",n_$GC.SHADERDEFINE_SHADOW_PCF3),n_$EC._globalRegDefine("DEPTHFOG",n_$EC.SAHDERDEFINE_DEPTHFOG),n_$yC.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),n_$yC.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),n_$N={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},n_$C={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var n_$a=n_$yC.nameKey.add("SIMPLE");shaderCompile=n_$EC.add(n_$a,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',n_$N,n_$C),n_$TC.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),n_$TC.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),n_$TC.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),n_$TC.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),n_$TC.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),n_$TC.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),n_$TC.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),n_$TC.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),n_$TC.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},n_$N}(),n_$OC=function(){function n_$N(){this._data=null,this._data=[]}n_$G(n_$N,"laya.d3.shader.ValusArray");var n_$C=n_$N.prototype;return n_$C.setValue=function(n_$N,n_$C){this._data[n_$N]=n_$C},n_$z(0,n_$C,"data",function(){return this._data}),n_$N}(),n_$GC=function(){function n_$N(){}return n_$N.SHADERDEFINE_RECEIVE_SHADOW=1,n_$N.SHADERDEFINE_CAST_SHADOW=512,n_$N.SHADERDEFINE_SHADOW_PSSM1=1024,n_$N.SHADERDEFINE_SHADOW_PSSM2=2048,n_$N.SHADERDEFINE_SHADOW_PSSM3=4096,n_$N.SHADERDEFINE_SHADOW_PCF_NO=8192,n_$N.SHADERDEFINE_SHADOW_PCF1=16384,n_$N.SHADERDEFINE_SHADOW_PCF2=32768,n_$N.SHADERDEFINE_SHADOW_PCF3=65536,n_$N.MAX_PSSM_COUNT=3,n_$N}(),n_$zC=function(){function n_$b(){}return n_$G(n_$b,"laya.d3.utils.Picker"),n_$b.calculateCursorRay=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$N.elements[0],n_$n=n_$N.elements[1],n_$V=n_$b._tempVector30,n_$A=n_$V.elements;n_$A[0]=n_$M,n_$A[1]=n_$n,n_$A[2]=n_$C.minDepth;var n_$P=n_$b._tempVector31,n_$$=n_$P.elements;n_$$[0]=n_$M,n_$$[1]=n_$n,n_$$[2]=n_$C.maxDepth;var n_$O=n_$J.origin,n_$G=n_$b._tempVector32;n_$C.unprojectFromWVP(n_$V,n_$a,n_$u,n_$e,n_$O),n_$C.unprojectFromWVP(n_$P,n_$a,n_$u,n_$e,n_$G);var n_$z=n_$J.direction.elements;n_$z[0]=n_$G.x-n_$O.x,n_$z[1]=n_$G.y-n_$O.y,n_$z[2]=n_$G.z-n_$O.z,n_$MC.normalize(n_$J.direction,n_$J.direction)},n_$b.rayIntersectsPositionsAndIndices=function(n_$N,n_$C,n_$a,n_$u,n_$e){for(var n_$J=n_$a.vertexStride/4,n_$M=n_$a.getVertexElementByUsage(0).offset/4,n_$n=Number.MAX_VALUE,n_$V=-1,n_$A=-1,n_$P=-1,n_$$=0;n_$$<n_$u.length;n_$$+=3){var n_$O=n_$b._tempVector35,n_$G=n_$O.elements,n_$z=n_$u[n_$$]*n_$J,n_$f=n_$z+n_$M;n_$G[0]=n_$C[n_$f],n_$G[1]=n_$C[1+n_$f],n_$G[2]=n_$C[2+n_$f];var n_$t=n_$b._tempVector36,n_$g=n_$t.elements,n_$x=n_$u[n_$$+1]*n_$J,n_$W=n_$x+n_$M;n_$g[0]=n_$C[n_$W],n_$g[1]=n_$C[1+n_$W],n_$g[2]=n_$C[2+n_$W];var n_$v=n_$b._tempVector37,n_$X=n_$v.elements,n_$r=n_$u[n_$$+2]*n_$J,n_$c=n_$r+n_$M;n_$X[0]=n_$C[n_$c],n_$X[1]=n_$C[1+n_$c],n_$X[2]=n_$C[2+n_$c];var n_$E=laya.d3.utils.Picker.rayIntersectsTriangle(n_$N,n_$O,n_$t,n_$v);!isNaN(n_$E)&&n_$E<n_$n&&(n_$n=n_$E,n_$V=n_$z,n_$A=n_$x,n_$P=n_$r)}if(n_$n===Number.MAX_VALUE)return n_$e.position.toDefault(),n_$e.distance=Number.MAX_VALUE,n_$e.trianglePositions[0].toDefault(),n_$e.trianglePositions[1].toDefault(),n_$e.trianglePositions[2].toDefault(),n_$e.triangleNormals[0].toDefault(),n_$e.triangleNormals[1].toDefault(),n_$e.triangleNormals[2].toDefault(),!1;n_$e.distance=n_$n,n_$MC.scale(n_$N.direction,n_$n,n_$e.position),n_$MC.add(n_$N.origin,n_$e.position,n_$e.position);var n_$F=n_$e.trianglePositions,n_$D=n_$F[0],n_$s=n_$F[1],n_$q=n_$F[2],n_$_=n_$D.elements,n_$d=n_$s.elements,n_$Q=n_$q.elements,n_$l=n_$V+n_$M;n_$_[0]=n_$C[n_$l],n_$_[1]=n_$C[n_$l+1],n_$_[2]=n_$C[n_$l+2];var n_$i=n_$A+n_$M;n_$d[0]=n_$C[n_$i],n_$d[1]=n_$C[n_$i+1],n_$d[2]=n_$C[n_$i+2];var n_$j=n_$P+n_$M;n_$Q[0]=n_$C[n_$j],n_$Q[1]=n_$C[n_$j+1],n_$Q[2]=n_$C[n_$j+2];var n_$y=n_$a.getVertexElementByUsage(3);if(n_$y){var n_$T=n_$y.offset/4,n_$L=n_$e.triangleNormals,n_$R=n_$L[0],n_$w=n_$L[1],n_$B=n_$L[2],n_$Y=n_$R.elements,n_$K=n_$w.elements,n_$k=n_$B.elements,n_$S=n_$V+n_$T;n_$Y[0]=n_$C[n_$S],n_$Y[1]=n_$C[n_$S+1],n_$Y[2]=n_$C[n_$S+2];var n_$p=n_$A+n_$T;n_$K[0]=n_$C[n_$p],n_$K[1]=n_$C[n_$p+1],n_$K[2]=n_$C[n_$p+2];var n_$m=n_$P+n_$T;n_$k[0]=n_$C[n_$m],n_$k[1]=n_$C[n_$m+1],n_$k[2]=n_$C[n_$m+2]}return!0},n_$b.rayIntersectsTriangle=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$b._tempVector30,n_$J=n_$b._tempVector31;n_$MC.subtract(n_$a,n_$C,n_$e),n_$MC.subtract(n_$u,n_$C,n_$J);var n_$M,n_$n=n_$b._tempVector32;if(n_$MC.cross(n_$N.direction,n_$J,n_$n),(n_$M=n_$MC.dot(n_$e,n_$n))>-Number.MIN_VALUE&&n_$M<Number.MIN_VALUE)return Number.NaN;var n_$V,n_$A=1/n_$M,n_$P=n_$b._tempVector33;if(n_$MC.subtract(n_$N.origin,n_$C,n_$P),n_$V=n_$MC.dot(n_$P,n_$n),(n_$V*=n_$A)<0||1<n_$V)return Number.NaN;var n_$$,n_$O,n_$G=n_$b._tempVector34;return n_$MC.cross(n_$P,n_$e,n_$G),n_$$=n_$MC.dot(n_$N.direction,n_$G),(n_$$*=n_$A)<0||1<n_$V+n_$$?Number.NaN:(n_$O=n_$MC.dot(n_$J,n_$G),(n_$O*=n_$A)<0?Number.NaN:n_$O)},n_$$(n_$b,["_tempVector30",function(){return this._tempVector30=new n_$MC},"_tempVector31",function(){return this._tempVector31=new n_$MC},"_tempVector32",function(){return this._tempVector32=new n_$MC},"_tempVector33",function(){return this._tempVector33=new n_$MC},"_tempVector34",function(){return this._tempVector34=new n_$MC},"_tempVector35",function(){return this._tempVector35=new n_$MC},"_tempVector36",function(){return this._tempVector36=new n_$MC},"_tempVector37",function(){return this._tempVector37=new n_$MC}]),n_$b}(),n_$fC=(function(){function n_$N(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new n_$MC,new n_$MC,new n_$MC],this.trianglePositions.length=3,this.triangleNormals=[new n_$MC,new n_$MC,new n_$MC],this.triangleNormals.length=3,this.position=new n_$MC}n_$G(n_$N,"laya.d3.utils.RaycastHit"),n_$N.prototype.cloneTo=function(n_$N){n_$N.distance=this.distance,this.trianglePositions[0].cloneTo(n_$N.trianglePositions[0]),this.trianglePositions[1].cloneTo(n_$N.trianglePositions[1]),this.trianglePositions[2].cloneTo(n_$N.trianglePositions[2]),this.triangleNormals[0].cloneTo(n_$N.triangleNormals[0]),this.triangleNormals[1].cloneTo(n_$N.triangleNormals[1]),this.triangleNormals[2].cloneTo(n_$N.triangleNormals[2]),this.position.cloneTo(n_$N.position),n_$N.sprite3D=this.sprite3D}}(),function(){function n_$N(n_$N,n_$C){this._width=0,this._height=0,this._width=n_$N,this._height=n_$C}n_$G(n_$N,"laya.d3.utils.Size");var n_$C=n_$N.prototype;return n_$z(0,n_$C,"width",function(){return-1===this._width?n_$o.clientWidth:this._width}),n_$z(0,n_$C,"height",function(){return-1===this._height?n_$o.clientHeight:this._height}),n_$z(1,n_$N,"fullScreen",function(){return new n_$N(-1,-1)}),n_$N}()),n_$tC=function(){function n_$l(){}return n_$G(n_$l,"laya.d3.utils.Utils3D"),n_$l._rotationTransformScaleSkinAnimation=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$){var n_$O,n_$G,n_$z,n_$f,n_$t,n_$g=n_$l._tempArray16_0,n_$x=n_$l._tempArray16_1,n_$W=n_$l._tempArray16_2,n_$v=n_$u+n_$u,n_$X=n_$e+n_$e,n_$r=n_$J+n_$J,n_$c=n_$u*n_$v,n_$E=n_$e*n_$v,n_$F=n_$e*n_$X,n_$D=n_$J*n_$v,n_$s=n_$J*n_$X,n_$q=n_$J*n_$r,n_$_=n_$M*n_$v,n_$d=n_$M*n_$X,n_$Q=n_$M*n_$r;for(n_$g[15]=1,n_$g[0]=1-n_$F-n_$q,n_$g[1]=n_$E+n_$Q,n_$g[2]=n_$D-n_$d,n_$g[4]=n_$E-n_$Q,n_$g[5]=1-n_$c-n_$q,n_$g[6]=n_$s+n_$_,n_$g[8]=n_$D+n_$d,n_$g[9]=n_$s-n_$_,n_$g[10]=1-n_$c-n_$F,n_$x[15]=1,n_$x[0]=n_$n,n_$x[5]=n_$V,n_$x[10]=n_$A,n_$O=0;n_$O<4;n_$O++)n_$G=n_$g[n_$O],n_$z=n_$g[n_$O+4],n_$f=n_$g[n_$O+8],n_$t=n_$g[n_$O+12],n_$W[n_$O]=n_$G,n_$W[n_$O+4]=n_$z,n_$W[n_$O+8]=n_$f,n_$W[n_$O+12]=n_$G*n_$N+n_$z*n_$C+n_$f*n_$a+n_$t;for(n_$O=0;n_$O<4;n_$O++)n_$G=n_$W[n_$O],n_$z=n_$W[n_$O+4],n_$f=n_$W[n_$O+8],n_$t=n_$W[n_$O+12],n_$P[n_$O+n_$$]=n_$G*n_$x[0]+n_$z*n_$x[1]+n_$f*n_$x[2]+n_$t*n_$x[3],n_$P[n_$O+n_$$+4]=n_$G*n_$x[4]+n_$z*n_$x[5]+n_$f*n_$x[6]+n_$t*n_$x[7],n_$P[n_$O+n_$$+8]=n_$G*n_$x[8]+n_$z*n_$x[9]+n_$f*n_$x[10]+n_$t*n_$x[11],n_$P[n_$O+n_$$+12]=n_$G*n_$x[12]+n_$z*n_$x[13]+n_$f*n_$x[14]+n_$t*n_$x[15]},n_$l._createNodeByJson=function(n_$N,n_$C,n_$a,n_$u){if(!n_$a)switch(n_$C.type){case"Sprite3D":n_$a=new n_$jC;break;case"MeshSprite3D":n_$a=new n_$bC;break;case"SkinnedMeshSprite3D":n_$a=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":n_$a=new ShuriKenParticle3D;break;case"TrailSprite3D":n_$a=new TrailSprite3D;break;case"Terrain":n_$a=new Terrain;break;case"Camera":n_$a=new n_$mC;break;case"DirectionLight":n_$a=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var n_$e=n_$C.props;if(n_$e)for(var n_$J in n_$e)n_$a[n_$J]=n_$e[n_$J];var n_$M=n_$C.customProps;n_$M&&(n_$a instanceof laya.d3.core.Sprite3D?(n_$a._parseBaseCustomProps(n_$M),n_$a._parseCustomProps(n_$N,n_$u,n_$M,n_$C),n_$a._parseCustomComponent(n_$N,n_$u,n_$C.components)):n_$a._parseCustomProps(n_$N,n_$u,n_$M,n_$C));var n_$n=n_$C.child;if(n_$n)for(var n_$V=0,n_$A=n_$n.length;n_$V<n_$A;n_$V++){var n_$P=n_$l._createNodeByJson(n_$N,n_$n[n_$V],null,n_$u);n_$a.addChild(n_$P)}return n_$a},n_$l._computeBoneAndAnimationDatasByBindPoseMatrxix=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M,n_$n,n_$V=0,n_$A=0,n_$P=n_$N.length;for(n_$M=0;n_$M<n_$P;n_$V+=n_$N[n_$M].keyframeWidth,n_$A+=16,n_$M++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(n_$C[n_$V+0],n_$C[n_$V+1],n_$C[n_$V+2],n_$C[n_$V+3],n_$C[n_$V+4],n_$C[n_$V+5],n_$C[n_$V+6],n_$C[n_$V+7],n_$C[n_$V+8],n_$C[n_$V+9],n_$u,n_$A),0!=n_$M&&(n_$n=16*n_$N[n_$M].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(n_$u,n_$n,n_$u,n_$A,n_$u,n_$A));var n_$$=n_$a.length;for(n_$M=0;n_$M<n_$$;n_$M++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(n_$u,16*n_$J[n_$M],n_$a[n_$M],n_$e,16*n_$M)},n_$l._computeAnimationDatasByArrayAndMatrixFast=function(n_$N,n_$C,n_$a,n_$u){for(var n_$e=0,n_$J=n_$N.length;n_$e<n_$J;n_$e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(n_$C,16*n_$u[n_$e],n_$N[n_$e],n_$a,16*n_$e)},n_$l._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J,n_$M,n_$n=0,n_$V=0,n_$A=n_$N.length;for(n_$J=0;n_$J<n_$A;n_$n+=n_$N[n_$J].keyframeWidth,n_$V+=16,n_$J++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(n_$C[n_$n+7],n_$C[n_$n+8],n_$C[n_$n+9],n_$C[n_$n+3],n_$C[n_$n+4],n_$C[n_$n+5],n_$C[n_$n+6],n_$C[n_$n+0],n_$C[n_$n+1],n_$C[n_$n+2],n_$u,n_$V),0!=n_$J&&(n_$M=16*n_$N[n_$J].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(n_$u,n_$M,n_$u,n_$V,n_$u,n_$V));var n_$P=n_$a.length;for(n_$J=0;n_$J<n_$P;n_$J++){var n_$$=16*n_$J;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(n_$u,n_$$,n_$a[n_$J],n_$e,n_$$)}},n_$l._computeAnimationDatasByArrayAndMatrixFastOld=function(n_$N,n_$C,n_$a){for(var n_$u=n_$N.length,n_$e=0;n_$e<n_$u;n_$e++){var n_$J=16*n_$e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(n_$C,n_$J,n_$N[n_$e],n_$a,n_$J)}},n_$l._computeRootAnimationData=function(n_$N,n_$C,n_$a){for(var n_$u=0,n_$e=0,n_$J=0,n_$M=n_$N.length;n_$u<n_$M;n_$e+=n_$N[n_$u].keyframeWidth,n_$J+=16,n_$u++)laya.d3.utils.Utils3D.createAffineTransformationArray(n_$C[n_$e+0],n_$C[n_$e+1],n_$C[n_$e+2],n_$C[n_$e+3],n_$C[n_$e+4],n_$C[n_$e+5],n_$C[n_$e+6],n_$C[n_$e+7],n_$C[n_$e+8],n_$C[n_$e+9],n_$a,n_$J)},n_$l.transformVector3ArrayByQuat=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$a.elements,n_$M=n_$N[n_$C],n_$n=n_$N[n_$C+1],n_$V=n_$N[n_$C+2],n_$A=n_$J[0],n_$P=n_$J[1],n_$$=n_$J[2],n_$O=n_$J[3],n_$G=n_$O*n_$M+n_$P*n_$V-n_$$*n_$n,n_$z=n_$O*n_$n+n_$$*n_$M-n_$A*n_$V,n_$f=n_$O*n_$V+n_$A*n_$n-n_$P*n_$M,n_$t=-n_$A*n_$M-n_$P*n_$n-n_$$*n_$V;n_$u[n_$e]=n_$G*n_$O+n_$t*-n_$A+n_$z*-n_$$-n_$f*-n_$P,n_$u[n_$e+1]=n_$z*n_$O+n_$t*-n_$P+n_$f*-n_$A-n_$G*-n_$$,n_$u[n_$e+2]=n_$f*n_$O+n_$t*-n_$$+n_$G*-n_$P-n_$z*-n_$A},n_$l.mulMatrixByArray=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M,n_$n,n_$V,n_$A,n_$P;if(n_$e===n_$a){for(n_$a=n_$l._tempArray16_3,n_$M=0;n_$M<16;++n_$M)n_$a[n_$M]=n_$e[n_$J+n_$M];n_$u=0}for(n_$M=0;n_$M<4;n_$M++)n_$n=n_$N[n_$C+n_$M],n_$V=n_$N[n_$C+n_$M+4],n_$A=n_$N[n_$C+n_$M+8],n_$P=n_$N[n_$C+n_$M+12],n_$e[n_$J+n_$M]=n_$n*n_$a[n_$u+0]+n_$V*n_$a[n_$u+1]+n_$A*n_$a[n_$u+2]+n_$P*n_$a[n_$u+3],n_$e[n_$J+n_$M+4]=n_$n*n_$a[n_$u+4]+n_$V*n_$a[n_$u+5]+n_$A*n_$a[n_$u+6]+n_$P*n_$a[n_$u+7],n_$e[n_$J+n_$M+8]=n_$n*n_$a[n_$u+8]+n_$V*n_$a[n_$u+9]+n_$A*n_$a[n_$u+10]+n_$P*n_$a[n_$u+11],n_$e[n_$J+n_$M+12]=n_$n*n_$a[n_$u+12]+n_$V*n_$a[n_$u+13]+n_$A*n_$a[n_$u+14]+n_$P*n_$a[n_$u+15]},n_$l.mulMatrixByArrayFast=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M,n_$n,n_$V,n_$A,n_$P;for(n_$M=0;n_$M<4;n_$M++)n_$n=n_$N[n_$C+n_$M],n_$V=n_$N[n_$C+n_$M+4],n_$A=n_$N[n_$C+n_$M+8],n_$P=n_$N[n_$C+n_$M+12],n_$e[n_$J+n_$M]=n_$n*n_$a[n_$u+0]+n_$V*n_$a[n_$u+1]+n_$A*n_$a[n_$u+2]+n_$P*n_$a[n_$u+3],n_$e[n_$J+n_$M+4]=n_$n*n_$a[n_$u+4]+n_$V*n_$a[n_$u+5]+n_$A*n_$a[n_$u+6]+n_$P*n_$a[n_$u+7],n_$e[n_$J+n_$M+8]=n_$n*n_$a[n_$u+8]+n_$V*n_$a[n_$u+9]+n_$A*n_$a[n_$u+10]+n_$P*n_$a[n_$u+11],n_$e[n_$J+n_$M+12]=n_$n*n_$a[n_$u+12]+n_$V*n_$a[n_$u+13]+n_$A*n_$a[n_$u+14]+n_$P*n_$a[n_$u+15]},n_$l.mulMatrixByArrayAndMatrixFast=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J,n_$M,n_$n,n_$V,n_$A,n_$P=n_$a.elements,n_$$=n_$P[0],n_$O=n_$P[1],n_$G=n_$P[2],n_$z=n_$P[3],n_$f=n_$P[4],n_$t=n_$P[5],n_$g=n_$P[6],n_$x=n_$P[7],n_$W=n_$P[8],n_$v=n_$P[9],n_$X=n_$P[10],n_$r=n_$P[11],n_$c=n_$P[12],n_$E=n_$P[13],n_$F=n_$P[14],n_$D=n_$P[15],n_$s=n_$C,n_$q=n_$C+4,n_$_=n_$C+8,n_$d=n_$C+12,n_$Q=n_$e,n_$l=n_$e+4,n_$i=n_$e+8,n_$j=n_$e+12;for(n_$J=0;n_$J<4;n_$J++)n_$M=n_$N[n_$s+n_$J],n_$n=n_$N[n_$q+n_$J],n_$V=n_$N[n_$_+n_$J],n_$A=n_$N[n_$d+n_$J],n_$u[n_$Q+n_$J]=n_$M*n_$$+n_$n*n_$O+n_$V*n_$G+n_$A*n_$z,n_$u[n_$l+n_$J]=n_$M*n_$f+n_$n*n_$t+n_$V*n_$g+n_$A*n_$x,n_$u[n_$i+n_$J]=n_$M*n_$W+n_$n*n_$v+n_$V*n_$X+n_$A*n_$r,n_$u[n_$j+n_$J]=n_$M*n_$c+n_$n*n_$E+n_$V*n_$F+n_$A*n_$D},n_$l.createAffineTransformationArray=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$){var n_$O=n_$u+n_$u,n_$G=n_$e+n_$e,n_$z=n_$J+n_$J,n_$f=n_$u*n_$O,n_$t=n_$u*n_$G,n_$g=n_$u*n_$z,n_$x=n_$e*n_$G,n_$W=n_$e*n_$z,n_$v=n_$J*n_$z,n_$X=n_$M*n_$O,n_$r=n_$M*n_$G,n_$c=n_$M*n_$z;n_$P[n_$$+0]=(1-(n_$x+n_$v))*n_$n,n_$P[n_$$+1]=(n_$t+n_$c)*n_$n,n_$P[n_$$+2]=(n_$g-n_$r)*n_$n,n_$P[n_$$+3]=0,n_$P[n_$$+4]=(n_$t-n_$c)*n_$V,n_$P[n_$$+5]=(1-(n_$f+n_$v))*n_$V,n_$P[n_$$+6]=(n_$W+n_$X)*n_$V,n_$P[n_$$+7]=0,n_$P[n_$$+8]=(n_$g+n_$r)*n_$A,n_$P[n_$$+9]=(n_$W-n_$X)*n_$A,n_$P[n_$$+10]=(1-(n_$f+n_$x))*n_$A,n_$P[n_$$+11]=0,n_$P[n_$$+12]=n_$N,n_$P[n_$$+13]=n_$C,n_$P[n_$$+14]=n_$a,n_$P[n_$$+15]=1},n_$l.transformVector3ArrayToVector3ArrayCoordinate=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$l._tempArray4_0,n_$M=n_$N[n_$C+0],n_$n=n_$N[n_$C+1],n_$V=n_$N[n_$C+2],n_$A=n_$a.elements;n_$J[0]=n_$M*n_$A[0]+n_$n*n_$A[4]+n_$V*n_$A[8]+n_$A[12],n_$J[1]=n_$M*n_$A[1]+n_$n*n_$A[5]+n_$V*n_$A[9]+n_$A[13],n_$J[2]=n_$M*n_$A[2]+n_$n*n_$A[6]+n_$V*n_$A[10]+n_$A[14],n_$J[3]=1/(n_$M*n_$A[3]+n_$n*n_$A[7]+n_$V*n_$A[11]+n_$A[15]),n_$u[n_$e+0]=n_$J[0]*n_$J[3],n_$u[n_$e+1]=n_$J[1]*n_$J[3],n_$u[n_$e+2]=n_$J[2]*n_$J[3]},n_$l.transformLightingMapTexcoordByUV0Array=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$a.elements;n_$u[n_$e+0]=n_$N[n_$C+0]*n_$J[0]+n_$J[2],n_$u[n_$e+1]=(n_$N[n_$C+1]-1)*n_$J[1]+n_$J[3]},n_$l.transformLightingMapTexcoordByUV1Array=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$a.elements;n_$u[n_$e+0]=n_$N[n_$C+0]*n_$J[0]+n_$J[2],n_$u[n_$e+1]=1+n_$N[n_$C+1]*n_$J[1]+n_$J[3]},n_$l.getURLVerion=function(n_$N){var n_$C=n_$N.indexOf("?");return 0<=n_$C?n_$N.substr(n_$C):null},n_$l._quaternionCreateFromYawPitchRollArray=function(n_$N,n_$C,n_$a,n_$u){var n_$e=.5*n_$a,n_$J=.5*n_$C,n_$M=.5*n_$N,n_$n=Math.sin(n_$e),n_$V=Math.cos(n_$e),n_$A=Math.sin(n_$J),n_$P=Math.cos(n_$J),n_$$=Math.sin(n_$M),n_$O=Math.cos(n_$M);n_$u[0]=n_$O*n_$A*n_$V+n_$$*n_$P*n_$n,n_$u[1]=n_$$*n_$P*n_$V-n_$O*n_$A*n_$n,n_$u[2]=n_$O*n_$P*n_$n-n_$$*n_$A*n_$V,n_$u[3]=n_$O*n_$P*n_$V+n_$$*n_$A*n_$n},n_$l._createAffineTransformationArray=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$C[0],n_$J=n_$C[1],n_$M=n_$C[2],n_$n=n_$C[3],n_$V=n_$e+n_$e,n_$A=n_$J+n_$J,n_$P=n_$M+n_$M,n_$$=n_$e*n_$V,n_$O=n_$e*n_$A,n_$G=n_$e*n_$P,n_$z=n_$J*n_$A,n_$f=n_$J*n_$P,n_$t=n_$M*n_$P,n_$g=n_$n*n_$V,n_$x=n_$n*n_$A,n_$W=n_$n*n_$P,n_$v=n_$a[0],n_$X=n_$a[1],n_$r=n_$a[2];n_$u[0]=(1-(n_$z+n_$t))*n_$v,n_$u[1]=(n_$O+n_$W)*n_$v,n_$u[2]=(n_$G-n_$x)*n_$v,n_$u[3]=0,n_$u[4]=(n_$O-n_$W)*n_$X,n_$u[5]=(1-(n_$$+n_$t))*n_$X,n_$u[6]=(n_$f+n_$g)*n_$X,n_$u[7]=0,n_$u[8]=(n_$G+n_$x)*n_$r,n_$u[9]=(n_$f-n_$g)*n_$r,n_$u[10]=(1-(n_$$+n_$z))*n_$r,n_$u[11]=0,n_$u[12]=n_$N[0],n_$u[13]=n_$N[1],n_$u[14]=n_$N[2],n_$u[15]=1},n_$l._mulMatrixArray=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J,n_$M,n_$n,n_$V,n_$A=n_$C.elements,n_$P=n_$A[0],n_$$=n_$A[1],n_$O=n_$A[2],n_$G=n_$A[3],n_$z=n_$A[4],n_$f=n_$A[5],n_$t=n_$A[6],n_$g=n_$A[7],n_$x=n_$A[8],n_$W=n_$A[9],n_$v=n_$A[10],n_$X=n_$A[11],n_$r=n_$A[12],n_$c=n_$A[13],n_$E=n_$A[14],n_$F=n_$A[15],n_$D=n_$u,n_$s=n_$u+4,n_$q=n_$u+8,n_$_=n_$u+12;for(n_$e=0;n_$e<4;n_$e++)n_$J=n_$N[n_$e],n_$M=n_$N[n_$e+4],n_$n=n_$N[n_$e+8],n_$V=n_$N[n_$e+12],n_$a[n_$D+n_$e]=n_$J*n_$P+n_$M*n_$$+n_$n*n_$O+n_$V*n_$G,n_$a[n_$s+n_$e]=n_$J*n_$z+n_$M*n_$f+n_$n*n_$t+n_$V*n_$g,n_$a[n_$q+n_$e]=n_$J*n_$x+n_$M*n_$W+n_$n*n_$v+n_$V*n_$X,n_$a[n_$_+n_$e]=n_$J*n_$r+n_$M*n_$c+n_$n*n_$E+n_$V*n_$F},n_$l.getYawPitchRoll=function(n_$N,n_$C){n_$l.transformQuat(n_$MC.ForwardRH,n_$N,n_$aC.TEMPVector31),n_$l.transformQuat(n_$MC.Up,n_$N,n_$aC.TEMPVector32);var n_$a=n_$aC.TEMPVector32.elements;n_$l.angleTo(n_$MC.ZERO,n_$aC.TEMPVector31,n_$aC.TEMPVector33);var n_$u=n_$aC.TEMPVector33.elements;n_$u[0]==Math.PI/2?(n_$u[1]=n_$l.arcTanAngle(n_$a[2],n_$a[0]),n_$u[2]=0):n_$u[0]==-Math.PI/2?(n_$u[1]=n_$l.arcTanAngle(-n_$a[2],-n_$a[0]),n_$u[2]=0):(n_$NC.createRotationY(-n_$u[1],n_$aC.TEMPMatrix0),n_$NC.createRotationX(-n_$u[0],n_$aC.TEMPMatrix1),n_$MC.transformCoordinate(n_$aC.TEMPVector32,n_$aC.TEMPMatrix0,n_$aC.TEMPVector32),n_$MC.transformCoordinate(n_$aC.TEMPVector32,n_$aC.TEMPMatrix1,n_$aC.TEMPVector32),n_$u[2]=n_$l.arcTanAngle(n_$a[1],-n_$a[0])),n_$u[1]<=-Math.PI&&(n_$u[1]=Math.PI),n_$u[2]<=-Math.PI&&(n_$u[2]=Math.PI),n_$u[1]>=Math.PI&&n_$u[2]>=Math.PI&&(n_$u[1]=0,n_$u[2]=0,n_$u[0]=Math.PI-n_$u[0]),n_$C[0]=n_$u[1],n_$C[1]=n_$u[0],n_$C[2]=n_$u[2]},n_$l.arcTanAngle=function(n_$N,n_$C){return 0==n_$N?1==n_$C?Math.PI/2:-Math.PI/2:0<n_$N?Math.atan(n_$C/n_$N):n_$N<0?0<n_$C?Math.atan(n_$C/n_$N)+Math.PI:Math.atan(n_$C/n_$N)-Math.PI:0},n_$l.angleTo=function(n_$N,n_$C,n_$a){n_$MC.subtract(n_$C,n_$N,n_$aC.TEMPVector30),n_$MC.normalize(n_$aC.TEMPVector30,n_$aC.TEMPVector30),n_$a.elements[0]=Math.asin(n_$aC.TEMPVector30.y),n_$a.elements[1]=n_$l.arcTanAngle(-n_$aC.TEMPVector30.z,-n_$aC.TEMPVector30.x)},n_$l.transformQuat=function(n_$N,n_$C,n_$a){var n_$u=n_$a.elements,n_$e=n_$N.elements,n_$J=n_$C,n_$M=n_$e[0],n_$n=n_$e[1],n_$V=n_$e[2],n_$A=n_$J[0],n_$P=n_$J[1],n_$$=n_$J[2],n_$O=n_$J[3],n_$G=n_$O*n_$M+n_$P*n_$V-n_$$*n_$n,n_$z=n_$O*n_$n+n_$$*n_$M-n_$A*n_$V,n_$f=n_$O*n_$V+n_$A*n_$n-n_$P*n_$M,n_$t=-n_$A*n_$M-n_$P*n_$n-n_$$*n_$V;n_$u[0]=n_$G*n_$O+n_$t*-n_$A+n_$z*-n_$$-n_$f*-n_$P,n_$u[1]=n_$z*n_$O+n_$t*-n_$P+n_$f*-n_$A-n_$G*-n_$$,n_$u[2]=n_$f*n_$O+n_$t*-n_$$+n_$G*-n_$P-n_$z*-n_$A},n_$l.quaterionNormalize=function(n_$N,n_$C){var n_$a=n_$N[0],n_$u=n_$N[1],n_$e=n_$N[2],n_$J=n_$N[3],n_$M=n_$a*n_$a+n_$u*n_$u+n_$e*n_$e+n_$J*n_$J;0<n_$M&&(n_$M=1/Math.sqrt(n_$M),n_$C[0]=n_$a*n_$M,n_$C[1]=n_$u*n_$M,n_$C[2]=n_$e*n_$M,n_$C[3]=n_$J*n_$M)},n_$l.matrix4x4MultiplyFFF=function(n_$N,n_$C,n_$a){var n_$u,n_$e,n_$J,n_$M,n_$n;if(n_$a===n_$C)for(n_$C=new Float32Array(16),n_$u=0;n_$u<16;++n_$u)n_$C[n_$u]=n_$a[n_$u];for(n_$u=0;n_$u<4;n_$u++)n_$e=n_$N[n_$u],n_$J=n_$N[n_$u+4],n_$M=n_$N[n_$u+8],n_$n=n_$N[n_$u+12],n_$a[n_$u]=n_$e*n_$C[0]+n_$J*n_$C[1]+n_$M*n_$C[2]+n_$n*n_$C[3],n_$a[n_$u+4]=n_$e*n_$C[4]+n_$J*n_$C[5]+n_$M*n_$C[6]+n_$n*n_$C[7],n_$a[n_$u+8]=n_$e*n_$C[8]+n_$J*n_$C[9]+n_$M*n_$C[10]+n_$n*n_$C[11],n_$a[n_$u+12]=n_$e*n_$C[12]+n_$J*n_$C[13]+n_$M*n_$C[14]+n_$n*n_$C[15]},n_$l.matrix4x4MultiplyMFM=function(n_$N,n_$C,n_$a){n_$l.matrix4x4MultiplyFFF(n_$N.elements,n_$C,n_$a.elements)},n_$$(n_$l,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new n_$MC},"_tempVector3_1",function(){return this._tempVector3_1=new n_$MC},"_tempVector3_2",function(){return this._tempVector3_2=new n_$MC},"_tempVector3_3",function(){return this._tempVector3_3=new n_$MC},"_tempVector3_4",function(){return this._tempVector3_4=new n_$MC},"_tempVector3_5",function(){return this._tempVector3_5=new n_$MC},"_tempVector3_6",function(){return this._tempVector3_6=new n_$MC},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),n_$l}(),n_$gC=function(){function n_$d(){}return n_$G(n_$d,"Laya3D"),n_$d._cancelLoadByUrl=function(n_$N){n_$X.loader.cancelLoadByUrl(n_$N),n_$d._innerFirstLevelLoaderManager.cancelLoadByUrl(n_$N),n_$d._innerSecondLevelLoaderManager.cancelLoadByUrl(n_$N),n_$d._innerThirdLevelLoaderManager.cancelLoadByUrl(n_$N),n_$d._innerFourthLevelLoaderManager.cancelLoadByUrl(n_$N)},n_$d._changeWebGLSize=function(n_$N,n_$C){n_$_.onStageResize(n_$N,n_$C),n_$o.clientWidth=n_$N,n_$o.clientHeight=n_$C},n_$d.__init__=function(){var n_$N=n_$C.createMap;n_$N.lh=[n_$jC,"SPRITE3DHIERARCHY"],n_$N.ls=[n_$iC,"SPRITE3DHIERARCHY"],n_$N.lm=[n_$YC,"MESH"],n_$N.lmat=[n_$TC,"MATERIAL"],n_$N.jpg=[n_$kC,"nativeimage"],n_$N.jpeg=[n_$kC,"nativeimage"],n_$N.png=[n_$kC,"nativeimage"],n_$N.pkm=[n_$kC,"arraybuffer"],n_$N.raw=[n_$wC,"arraybuffer"],n_$N.mipmaps=[n_$wC,"arraybuffer"],n_$g.parserMap.SPRITE3DHIERARCHY=n_$d._loadHierarchy,n_$g.parserMap.MESH=n_$d._loadMesh,n_$g.parserMap.MATERIAL=n_$d._loadMaterial,n_$g.parserMap.TEXTURECUBE=n_$d._loadTextureCube,n_$g.parserMap.TERRAIN=n_$d._loadTerrain,n_$d._innerFirstLevelLoaderManager.on("error",null,n_$d._eventLoadManagerError),n_$d._innerSecondLevelLoaderManager.on("error",null,n_$d._eventLoadManagerError),n_$d._innerThirdLevelLoaderManager.on("error",null,n_$d._eventLoadManagerError),n_$d._innerFourthLevelLoaderManager.on("error",null,n_$d._eventLoadManagerError)},n_$d.READ_BLOCK=function(){return n_$d._readData.pos+=4,!0},n_$d.READ_DATA=function(){return n_$d._DATA.offset=n_$d._readData.getUint32(),n_$d._DATA.size=n_$d._readData.getUint32(),!0},n_$d.READ_STRINGS=function(){var n_$N=[],n_$C={offset:0,size:0};n_$C.offset=n_$d._readData.getUint16(),n_$C.size=n_$d._readData.getUint16();n_$d._readData.pos;n_$d._readData.pos=n_$C.offset+n_$d._DATA.offset;for(var n_$a=0;n_$a<n_$C.size;n_$a++){var n_$u=n_$d._readData.readUTFString();-1===n_$u.lastIndexOf(".lmat")&&-1===n_$u.lastIndexOf(".lpbr")||n_$N.push(n_$u)}return n_$N},n_$d.formatRelativePath=function(n_$N,n_$C){var n_$a;if("."===n_$C.charAt(0)){for(var n_$u=(n_$N+n_$C).split("/"),n_$e=0,n_$J=n_$u.length;n_$e<n_$J;n_$e++)if(".."==n_$u[n_$e]){var n_$M=n_$e-1;0<n_$M&&".."!==n_$u[n_$M]&&(n_$u.splice(n_$M,2),n_$e-=2)}n_$a=n_$u.join("/")}else n_$a=n_$N+n_$C;return null!=n_$q.customFormat&&(n_$a=n_$q.customFormat(n_$a,null)),n_$a},n_$d._eventLoadManagerError=function(n_$N){n_$X.loader.event("error",n_$N)},n_$d._addHierarchyInnerUrls=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M=n_$d.formatRelativePath(n_$u,n_$e);n_$a&&(n_$M+=n_$a),n_$N.push({url:n_$M,clas:n_$J}),n_$C[n_$e]=n_$M},n_$d._getSprite3DHierarchyInnerUrls=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){var n_$n,n_$V=0,n_$A=0;switch(n_$N.type){case"Scene":var n_$P=n_$N.customProps.lightmaps;for(n_$V=0,n_$A=n_$P.length;n_$V<n_$A;n_$V++){var n_$$=n_$P[n_$V].replace(".exr",".png");n_$d._addHierarchyInnerUrls(n_$u,n_$e,n_$J,n_$M,n_$$,n_$kC)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var n_$O;if(n_$N.instanceParams)(n_$O=n_$N.instanceParams.loadPath)&&n_$d._addHierarchyInnerUrls(n_$C,n_$e,n_$J,n_$M,n_$O,n_$YC);else{(n_$O=(n_$n=n_$N.customProps).meshPath)&&n_$d._addHierarchyInnerUrls(n_$C,n_$e,n_$J,n_$M,n_$O,n_$YC);var n_$G=n_$n.materials;if(n_$G)for(n_$V=0,n_$A=n_$G.length;n_$V<n_$A;n_$V++){for(var n_$z=n_$G[n_$V],n_$f=n_$z.type.split("."),n_$t=n_$Q.window,n_$g=0,n_$x=n_$f.length;n_$g<n_$x;++n_$g){n_$t=n_$t[this.clasPaths[n_$g]]}if("function"!=typeof n_$t)throw"_getSprite3DHierarchyInnerUrls 错误: "+n_$z.type+" 不是类";n_$d._addHierarchyInnerUrls(n_$a,n_$e,n_$J,n_$M,n_$z.path,n_$t)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var n_$W=(n_$n=n_$N.customProps).meshPath;n_$W&&n_$d._addHierarchyInnerUrls(n_$C,n_$e,n_$J,n_$M,n_$W,n_$YC);var n_$v=n_$n.material;if(n_$v){n_$f=n_$v.type.split("."),n_$t=n_$Q.window;for(n_$g=0,n_$x=n_$f.length;n_$g<n_$x;++n_$g){n_$t=n_$t[this.clasPaths[n_$g]]}n_$d._addHierarchyInnerUrls(n_$a,n_$e,n_$J,n_$M,n_$v.path,n_$t)}else{var n_$X=n_$n.materialPath;if(n_$X)n_$d._addHierarchyInnerUrls(n_$a,n_$e,n_$J,n_$M,n_$X,ShurikenParticleMaterial);else{var n_$r=n_$n.texturePath;n_$r&&n_$d._addHierarchyInnerUrls(n_$u,n_$e,n_$J,n_$M,n_$r,n_$kC)}}break;case"Terrain":n_$d._addHierarchyInnerUrls(n_$u,n_$e,n_$J,n_$M,n_$N.customProps.dataPath,TerrainRes)}var n_$c=n_$N.components;for(var n_$E in n_$c){var n_$F=n_$c[n_$E];switch(n_$E){case"Animator":var n_$D=n_$F.avatarPath;if(n_$D)n_$d._addHierarchyInnerUrls(n_$u,n_$e,n_$J,n_$M,n_$D,Avatar);else{var n_$s=n_$F.avatar;n_$s&&n_$d._addHierarchyInnerUrls(n_$u,n_$e,n_$J,n_$M,n_$s.path,Avatar)}var n_$q=n_$F.clipPaths;for(n_$V=0,n_$A=n_$q.length;n_$V<n_$A;n_$V++)n_$d._addHierarchyInnerUrls(n_$u,n_$e,n_$J,n_$M,n_$q[n_$V],AnimationClip)}}var n_$_=n_$N.child;for(n_$V=0,n_$A=n_$_.length;n_$V<n_$A;n_$V++)n_$d._getSprite3DHierarchyInnerUrls(n_$_[n_$V],n_$C,n_$a,n_$u,n_$e,n_$J,n_$M)},n_$d._loadHierarchy=function(n_$N){n_$N.on("loaded",null,n_$d._onHierarchylhLoaded,[n_$N,n_$N._class._getGroup()]),n_$N.load(n_$N.url,"json",!1,null,!0)},n_$d._onHierarchylhLoaded=function(n_$N,n_$C,n_$a){if(n_$N._class.destroyed)n_$N.endLoad();else{var n_$u=n_$N.url,n_$e=n_$tC.getURLVerion(n_$u),n_$J=n_$q.getPath(n_$u),n_$M=[],n_$n=[],n_$V=[],n_$A={};n_$d._getSprite3DHierarchyInnerUrls(n_$a,n_$M,n_$n,n_$V,n_$A,n_$e,n_$J);var n_$P=n_$M.length+n_$n.length+n_$V.length,n_$$=n_$P+1,n_$O=1/n_$$;if(n_$d._onProcessChange(n_$N,0,n_$O,1),0<n_$V.length){var n_$G=n_$P/n_$$,n_$z=n_$s.create(null,n_$d._onProcessChange,[n_$N,n_$O,n_$G],!1);n_$d._innerFourthLevelLoaderManager.create(n_$V,n_$s.create(null,n_$d._onHierarchyInnerForthLevResouLoaded,[n_$N,n_$C,n_$z,n_$a,n_$A,n_$M,n_$n,n_$O+n_$G*n_$V.length,n_$G]),n_$z,null,null,1,!0,n_$C)}else n_$d._onHierarchyInnerForthLevResouLoaded(n_$N,n_$C,null,n_$a,n_$A,n_$M,n_$n,n_$O,n_$G)}},n_$d._onHierarchyInnerForthLevResouLoaded=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){if(n_$N._class.destroyed)n_$N.endLoad();else if(n_$a&&n_$a.recover(),0<n_$M.length){var n_$A=n_$s.create(null,n_$d._onProcessChange,[n_$N,n_$n,n_$V],!1);n_$d._innerSecondLevelLoaderManager.create(n_$M,n_$s.create(null,n_$d._onHierarchyInnerSecondLevResouLoaded,[n_$N,n_$C,n_$A,n_$u,n_$e,n_$J,n_$n+n_$V*n_$M.length,n_$V]),n_$a,null,null,1,!0,n_$C)}else n_$d._onHierarchyInnerSecondLevResouLoaded(n_$N,n_$C,null,n_$u,n_$e,n_$J,n_$n,n_$V)},n_$d._onHierarchyInnerSecondLevResouLoaded=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n){if(n_$N._class.destroyed)n_$N.endLoad();else if(n_$a&&n_$a.recover(),0<n_$J.length){var n_$V=n_$s.create(null,n_$d._onProcessChange,[n_$N,n_$M,n_$n],!1);n_$d._innerFirstLevelLoaderManager.create(n_$J,n_$s.create(null,n_$d._onHierarchyInnerFirstLevResouLoaded,[n_$N,n_$V,n_$u,n_$e]),n_$a,null,null,1,!0,n_$C)}else n_$d._onHierarchyInnerFirstLevResouLoaded(n_$N,null,n_$u,n_$e)},n_$d._onHierarchyInnerFirstLevResouLoaded=function(n_$N,n_$C,n_$a,n_$u){n_$C&&n_$C.recover(),n_$N.endLoad([n_$a,n_$u])},n_$d._loadTerrain=function(n_$N){n_$N.on("loaded",null,n_$d._onTerrainLtLoaded,[n_$N,n_$N._class._getGroup()]),n_$N.load(n_$N.url,"json",!1,null,!0)},n_$d._onTerrainLtLoaded=function(n_$N,n_$C,n_$a){if(n_$N._class.destroyed)n_$N.endLoad();else{var n_$u,n_$e,n_$J=n_$N.url,n_$M=n_$tC.getURLVerion(n_$J),n_$n=n_$q.getPath(n_$J),n_$V=[],n_$A={},n_$P=0,n_$$=0,n_$O=n_$a.heightData;n_$u=n_$O.url,n_$e=n_$d.formatRelativePath(n_$n,n_$u),n_$M&&(n_$e+=n_$M),n_$u=n_$A[n_$u]=n_$e;var n_$G=n_$a.detailTexture;for(n_$P=0,n_$$=n_$G.length;n_$P<n_$$;n_$P++)n_$V.push({url:n_$G[n_$P].diffuse});var n_$z=n_$a.normalMap;for(n_$P=0,n_$$=n_$z.length;n_$P<n_$$;n_$P++)n_$V.push({url:n_$z[n_$P]});var n_$f=n_$a.alphaMap;for(n_$P=0,n_$$=n_$f.length;n_$P<n_$$;n_$P++)n_$V.push({url:n_$f[n_$P],params:[!1,!1,6408,!0]});for(n_$P=0,n_$$=n_$V.length;n_$P<n_$$;n_$P++){var n_$t=n_$V[n_$P].url;n_$e=n_$d.formatRelativePath(n_$n,n_$t),n_$M&&(n_$e+=n_$M),n_$V[n_$P].url=n_$e,n_$A[n_$t]=n_$e}var n_$g=n_$V.length,n_$x=n_$g+2,n_$W=1/n_$x;n_$d._onProcessChange(n_$N,0,n_$W,1);var n_$v={heightMapLoaded:!1,texturesLoaded:!1},n_$X=n_$s.create(null,n_$d._onProcessChange,[n_$N,n_$W,n_$W],!1);n_$d._innerFourthLevelLoaderManager.create(n_$u,n_$s.create(null,n_$d._onTerrainHeightMapLoaded,[n_$N,n_$X,n_$a,n_$A,n_$v]),n_$X,null,[n_$O.numX,n_$O.numZ,n_$O.bitType,n_$O.value],1,!0,n_$C);var n_$r=n_$s.create(null,n_$d._onProcessChange,[n_$N,2*n_$W,n_$g/n_$x],!1);n_$d._innerFourthLevelLoaderManager.create(n_$V,n_$s.create(null,n_$d._onTerrainTexturesLoaded,[n_$N,n_$r,n_$a,n_$A,n_$v]),n_$r,null,null,1,!0,n_$C)}},n_$d._onTerrainHeightMapLoaded=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$e.heightMapLoaded=!0,n_$e.texturesLoaded&&(n_$N.endLoad([n_$a,n_$u]),n_$C.recover())},n_$d._onTerrainTexturesLoaded=function(n_$N,n_$C,n_$a,n_$u,n_$e){n_$e.texturesLoaded=!0,n_$e.heightMapLoaded&&(n_$N.endLoad([n_$a,n_$u]),n_$C.recover())},n_$d._loadMesh=function(n_$N){n_$N.on("loaded",null,n_$d._onMeshLmLoaded,[n_$N,n_$N._class._getGroup()]),n_$N.load(n_$N.url,"arraybuffer",!1,null,!0)},n_$d._onMeshLmLoaded=function(n_$N,n_$C,n_$a){if(n_$N._class.destroyed)n_$N.endLoad();else{var n_$u,n_$e,n_$J,n_$M=n_$N.url,n_$n=n_$tC.getURLVerion(n_$M),n_$V=n_$q.getPath(n_$M),n_$A={},n_$P=0,n_$$=0;switch((n_$d._readData=new n_$r(n_$a)).pos=0,n_$d._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var n_$O=n_$d._readData.getUint32();n_$d._readData.pos=n_$d._readData.pos+4,n_$$=n_$d._readData.getUint16(),n_$d._readData.pos=n_$d._readData.pos+8*n_$$;var n_$G=n_$d._readData.getUint32();for(n_$$=n_$d._readData.getUint16(),n_$d._readData.pos=n_$O+n_$G,n_$u=[],n_$P=0;n_$P<n_$$;n_$P++){var n_$z=n_$d._readData.readUTFString();-1!==n_$z.lastIndexOf(".lmat")&&n_$u.push(n_$z)}break;default:for(n_$d.READ_BLOCK(),n_$P=0;n_$P<2;n_$P++){var n_$f=n_$d._readData.getUint16(),n_$t=n_$d._strings[n_$f],n_$g=n_$d["READ_"+n_$t];if(null==n_$g)throw new Error("model file err,no this function:"+n_$f+" "+n_$t);1===n_$P?n_$u=n_$g.call():n_$g.call()}}for(n_$P=0,n_$J=n_$u.length;n_$P<n_$J;n_$P++){var n_$x=n_$u[n_$P];n_$e=n_$d.formatRelativePath(n_$V,n_$x),n_$n&&(n_$e+=n_$n),n_$u[n_$P]=n_$e,n_$A[n_$x]=n_$e}if(0<n_$u.length){n_$d._onProcessChange(n_$N,0,.5,1);var n_$W=n_$s.create(null,n_$d._onProcessChange,[n_$N,.5,.5],!1);n_$d._innerSecondLevelLoaderManager.create(n_$u,n_$s.create(null,n_$d._onMeshMateialLoaded,[n_$N,n_$W,n_$a,n_$A]),n_$W,null,null,1,!0,n_$C)}else n_$N.endLoad([n_$a,n_$A])}},n_$d._onMeshMateialLoaded=function(n_$N,n_$C,n_$a,n_$u){n_$N.endLoad([n_$a,n_$u]),n_$C.recover()},n_$d._getMaterialTexturePath=function(n_$N,n_$C,n_$a){var n_$u=n_$N.length-4;return n_$N.indexOf(".dds")!=n_$u&&n_$N.indexOf(".tga")!=n_$u&&n_$N.indexOf(".exr")!=n_$u&&n_$N.indexOf(".DDS")!=n_$u&&n_$N.indexOf(".TGA")!=n_$u&&n_$N.indexOf(".EXR")!=n_$u||(n_$N=n_$N.substr(0,n_$u)+".png"),n_$N=n_$d.formatRelativePath(n_$a,n_$N),n_$C&&(n_$N+=n_$C),n_$N},n_$d._loadMaterial=function(n_$N){n_$N.on("loaded",null,n_$d._onMaterilLmatLoaded,[n_$N,n_$N._class._getGroup()]),n_$N.load(n_$N.url,"json",!1,null,!0)},n_$d._onMaterilLmatLoaded=function(n_$N,n_$C,n_$a){if(n_$N._class.destroyed)n_$N.endLoad();else{var n_$u,n_$e=n_$N.url,n_$J=n_$tC.getURLVerion(n_$e),n_$M=n_$q.getPath(n_$e),n_$n=[],n_$V={},n_$A=n_$a.customProps,n_$P=n_$a.version;if(n_$P)switch(n_$P){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var n_$$=n_$a.props.textures,n_$O=0,n_$G=n_$$.length;n_$O<n_$G;n_$O++){var n_$z=n_$$[n_$O],n_$f=n_$z.path;if(n_$f){var n_$t=n_$f.length-4;n_$f.indexOf(".exr")!=n_$t&&n_$f.indexOf(".EXR")!=n_$t||(n_$f=n_$f.substr(0,n_$t)+".png"),n_$u=n_$d.formatRelativePath(n_$M,n_$f),n_$J&&(n_$u+=n_$J),n_$n.push({url:n_$u,params:n_$z.params}),n_$V[n_$f]=n_$u}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var n_$g=n_$A.diffuseTexture.texture2D;if(n_$g&&(n_$u=n_$d._getMaterialTexturePath(n_$g,n_$J,n_$M),n_$n.push(n_$u),n_$V[n_$g]=n_$u),n_$A.normalTexture){var n_$x=n_$A.normalTexture.texture2D;n_$x&&(n_$u=n_$d._getMaterialTexturePath(n_$x,n_$J,n_$M),n_$n.push(n_$u),n_$V[n_$x]=n_$u)}if(n_$A.specularTexture){var n_$W=n_$A.specularTexture.texture2D;n_$W&&(n_$u=n_$d._getMaterialTexturePath(n_$W,n_$J,n_$M),n_$n.push(n_$u),n_$V[n_$W]=n_$u)}if(n_$A.emissiveTexture){var n_$v=n_$A.emissiveTexture.texture2D;n_$v&&(n_$u=n_$d._getMaterialTexturePath(n_$v,n_$J,n_$M),n_$n.push(n_$u),n_$V[n_$v]=n_$u)}if(n_$A.ambientTexture){var n_$X=n_$A.ambientTexture.texture2D;n_$X&&(n_$u=n_$d._getMaterialTexturePath(n_$X,n_$J,n_$M),n_$n.push(n_$u),n_$V[n_$X]=n_$u)}if(n_$A.reflectTexture){var n_$r=n_$A.reflectTexture.texture2D;n_$r&&(n_$u=n_$d._getMaterialTexturePath(n_$r,n_$J,n_$M),n_$n.push(n_$u),n_$V[n_$r]=n_$u)}}var n_$c=n_$n.length,n_$E=n_$c+1,n_$F=1/n_$E;if(n_$d._onProcessChange(n_$N,0,n_$F,1),0<n_$c){var n_$D=n_$s.create(null,n_$d._onProcessChange,[n_$N,n_$F,n_$c/n_$E],!1);n_$d._innerFourthLevelLoaderManager.create(n_$n,n_$s.create(null,n_$d._onMateialTexturesLoaded,[n_$N,n_$D,n_$a,n_$V]),n_$D,n_$kC,null,1,!0,n_$C)}else n_$d._onMateialTexturesLoaded(n_$N,null,n_$a,null)}},n_$d._onMateialTexturesLoaded=function(n_$N,n_$C,n_$a,n_$u){n_$N.endLoad([n_$a,n_$u]),n_$C&&n_$C.recover()},n_$d._loadTextureCube=function(n_$N){n_$N.on("loaded",null,n_$d._onTextureCubeLtcLoaded,[n_$N]),n_$N.load(n_$N.url,"json",!1,null,!0)},n_$d._onTextureCubeLtcLoaded=function(n_$N,n_$C){if(n_$N._class.destroyed)n_$N.endLoad();else{var n_$a=n_$q.getPath(n_$N.url),n_$u=[n_$d.formatRelativePath(n_$a,n_$C.px),n_$d.formatRelativePath(n_$a,n_$C.nx),n_$d.formatRelativePath(n_$a,n_$C.py),n_$d.formatRelativePath(n_$a,n_$C.ny),n_$d.formatRelativePath(n_$a,n_$C.pz),n_$d.formatRelativePath(n_$a,n_$C.nz)];n_$d._onProcessChange(n_$N,0,1/7,1);var n_$e=n_$s.create(null,n_$d._onProcessChange,[n_$N,1/7,6/7],!1);n_$d._innerFourthLevelLoaderManager.load(n_$u,n_$s.create(null,n_$d._onTextureCubeImagesLoaded,[n_$N,n_$u,n_$e]),n_$e,"nativeimage")}},n_$d._onTextureCubeImagesLoaded=function(n_$N,n_$C,n_$a){var n_$u=[];n_$u.length=6;for(var n_$e=0;n_$e<6;n_$e++){var n_$J=n_$C[n_$e];n_$u[n_$e]=n_$g.getRes(n_$J),n_$g.clearRes(n_$J)}n_$N.endLoad(n_$u),n_$a.recover()},n_$d._onProcessChange=function(n_$N,n_$C,n_$a,n_$u){(n_$u=n_$C+n_$u*n_$a)<1&&n_$N.event("progress",n_$u)},n_$d.init=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){if(void 0===n_$a&&(n_$a=!1),void 0===n_$u&&(n_$u=!1),void 0===n_$e&&(n_$e=!0),void 0===n_$J&&(n_$J=!0),n_$x.update3DLoop=function(){},n_$x.cancelLoadByUrl=function(n_$N){n_$d._cancelLoadByUrl(n_$N)},n_$V.isAntialias=n_$a,n_$V.isAlpha=n_$u,n_$V.premultipliedAlpha=n_$e,n_$V.isStencil=n_$J,!n_$_.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");n_$x.changeWebGLSize=n_$d._changeWebGLSize,n_$f.is3DMode=!0,n_$X.init(n_$N,n_$C),n_$l.__init__(),n_$$C.__init__(),n_$bC.__init__(),n_$B.__init__(),n_$d.__init__(),n_$M.maxTextureCount=2,(n_$d.debugMode||n_$H.debugMode)&&(n_$d._debugPhasorSprite=new n_$p)},n_$d.HIERARCHY="SPRITE3DHIERARCHY",n_$d.MESH="MESH",n_$d.MATERIAL="MATERIAL",n_$d.PBRMATERIAL="PBRMTL",n_$d.TEXTURECUBE="TEXTURECUBE",n_$d.TERRAIN="TERRAIN",n_$d._readData=null,n_$d._debugPhasorSprite=null,n_$d.debugMode=!1,n_$$(n_$d,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new n_$C},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new n_$C},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new n_$C},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new n_$C}]),n_$d}(),n_$xC=function(n_$N){function n_$e(n_$N){n_$e.__super.call(this),this._owner=n_$N,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}n_$G(n_$e,"laya.d3.animation.AnimationTransform3D",n_$J);var n_$C=n_$e.prototype;return n_$C._getlocalMatrix=function(){return this._localUpdate&&(n_$tC._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},n_$C._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._onWorldTransform()}},n_$C._setWorldMatrixAndUpdate=function(n_$N){if(this._worldMatrix=n_$N,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var n_$C=this._getlocalMatrix(),n_$a=0;n_$a<16;++n_$a)this._worldMatrix[n_$a]=n_$C[n_$a];else n_$tC.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},n_$C._setWorldMatrixNoUpdate=function(n_$N){this._worldMatrix=n_$N},n_$C._setWorldMatrixIgnoreUpdate=function(n_$N){this._worldMatrix=n_$N,this._worldUpdate=!1},n_$C.getLocalPosition=function(){return this._localPosition},n_$C.setLocalPosition=function(n_$N){if(this._parent)this._localPosition=n_$N,this._localUpdate=!0,this._onWorldTransform();else{var n_$C=this._entity.owner._transform,n_$a=this._entity.localPosition,n_$u=n_$a.elements;n_$u[0]=n_$N[0],n_$u[1]=n_$N[1],n_$u[2]=n_$N[2],n_$C.localPosition=n_$a}},n_$C.getLocalRotation=function(){if(this._localQuaternionUpdate){var n_$N=this._localRotationEuler;n_$tC._quaternionCreateFromYawPitchRollArray(n_$N[1]/n_$e._angleToRandin,n_$N[0]/n_$e._angleToRandin,n_$N[2]/n_$e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},n_$C.setLocalRotation=function(n_$N){if(this._parent)this._localRotation=n_$N,n_$tC.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var n_$C=this._entity.owner._transform,n_$a=this._entity.localRotation,n_$u=n_$a.elements;n_$u[0]=n_$N[0],n_$u[1]=n_$N[1],n_$u[2]=n_$N[2],n_$u[3]=n_$N[3],n_$C.localRotation=n_$a}},n_$C.getLocalScale=function(){return this._localScale},n_$C.setLocalScale=function(n_$N){if(this._parent)this._localScale=n_$N,this._localUpdate=!0,this._onWorldTransform();else{var n_$C=this._entity.owner._transform,n_$a=this._entity.localScale,n_$u=n_$a.elements;n_$u[0]=n_$N[0],n_$u[1]=n_$N[1],n_$u[2]=n_$N[2],n_$C.localScale=n_$a}},n_$C.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){n_$tC.getYawPitchRoll(this._localRotation,n_$e._tempVector3);var n_$N=n_$e._tempVector3,n_$C=this._localRotationEuler;n_$C[0]=n_$N[1]*n_$e._angleToRandin,n_$C[1]=n_$N[0]*n_$e._angleToRandin,n_$C[2]=n_$N[2]*n_$e._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},n_$C.setLocalRotationEuler=function(n_$N){if(this._parent)n_$tC._quaternionCreateFromYawPitchRollArray(n_$N[1]/n_$e._angleToRandin,n_$N[0]/n_$e._angleToRandin,n_$N[2]/n_$e._angleToRandin,this._localRotation),this._localRotationEuler=n_$N,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var n_$C=this._entity.owner._transform,n_$a=this._entity.localRotationEuler,n_$u=n_$a.elements;n_$u[0]=n_$N[0],n_$u[1]=n_$N[1],n_$u[2]=n_$N[2],n_$C.localRotationEuler=n_$a}},n_$C.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)n_$tC.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var n_$N=this._getlocalMatrix(),n_$C=0;n_$C<16;++n_$C)this._worldMatrix[n_$C]=n_$N[n_$C];this._worldUpdate=!1}return this._worldMatrix},n_$C.setParent=function(n_$N){if(this._parent!==n_$N){if(this._parent){var n_$C=this._parent._childs,n_$a=n_$C.indexOf(this);n_$C.splice(n_$a,1)}n_$N&&(n_$N._childs.push(this),n_$N&&this._onWorldTransform()),this._parent=n_$N}},n_$$(n_$e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),n_$e}(),n_$WC=function(n_$N){function n_$C(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,n_$C.__super.call(this),this._destroyed=!1,this._id=n_$C._uniqueIDCounter,n_$C._uniqueIDCounter++}n_$G(n_$C,"laya.d3.component.Component3D",n_$J);var n_$a=n_$C.prototype;return n_$X.imps(n_$a,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),n_$a._initialize=function(n_$N){this._owner=n_$N,this._enable=!0,this.started=!1,this._load(n_$N)},n_$a._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},n_$a._load=function(n_$N){},n_$a._start=function(n_$N){},n_$a._update=function(n_$N){},n_$a._lateUpdate=function(n_$N){},n_$a._preRenderUpdate=function(n_$N){},n_$a._postRenderUpdate=function(n_$N){},n_$a._unload=function(n_$N){this.offAll()},n_$a._cloneTo=function(n_$N){},n_$z(0,n_$a,"id",function(){return this._id}),n_$z(0,n_$a,"destroyed",function(){return this._destroyed}),n_$z(0,n_$a,"owner",function(){return this._owner}),n_$z(0,n_$a,"enable",function(){return this._enable},function(n_$N){this._enable!==n_$N&&(this._enable=n_$N,this.event("enablechanged",this._enable))}),n_$z(0,n_$a,"isSingleton",function(){return n_$C._isSingleton}),n_$C._isSingleton=!0,n_$C._uniqueIDCounter=1,n_$C}(),n_$vC=function(n_$N){function n_$C(){this._destroyed=!1,n_$C.__super.call(this),this._destroyed=!1}n_$G(n_$C,"laya.d3.core.GeometryFilter",n_$J);var n_$a=n_$C.prototype;return n_$X.imps(n_$a,{"laya.resource.IDestroy":!0}),n_$a._destroy=function(){this.offAll(),this._destroyed=!0},n_$z(0,n_$a,"_isAsyncLoaded",function(){return!0}),n_$z(0,n_$a,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),n_$z(0,n_$a,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),n_$z(0,n_$a,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),n_$z(0,n_$a,"destroyed",function(){return this._destroyed}),n_$C}(),n_$XC=function(n_$N){function n_$u(n_$N){n_$u.__super.call(this),this._id=++n_$u._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new n_$HN(new n_$MC,new n_$MC),this._boundingBoxCenter=new n_$MC,this._boundingSphere=new n_$ZN(new n_$MC,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=n_$N,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}n_$G(n_$u,"laya.d3.core.render.BaseRender",n_$J);var n_$C=n_$u.prototype;return n_$X.imps(n_$C,{"laya.resource.IDestroy":!0}),n_$C._changeMaterialReference=function(n_$N,n_$C){n_$N&&n_$N._removeReference(),n_$C._addReference()},n_$C._getInstanceMaterial=function(n_$N,n_$C){var n_$a=new n_$N.constructor;return n_$N.cloneTo(n_$a),n_$a.name=n_$a.name+"(Instance)",this._materialsInstance[n_$C]=!0,this._changeMaterialReference(this._materials[n_$C],n_$a),this._materials[n_$C]=n_$a},n_$C._setShaderValuelightMap=function(n_$N){this._setShaderValueTexture(3,n_$N)},n_$C._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},n_$C._renderRenderableBoundBox=function(){var n_$N=n_$gC._debugPhasorSprite,n_$C=this.boundingBox,n_$a=n_$u._tempBoundBoxCorners;n_$C.getCorners(n_$a),n_$N.line(n_$a[0],n_$u._greenColor,n_$a[1],n_$u._greenColor),n_$N.line(n_$a[2],n_$u._greenColor,n_$a[3],n_$u._greenColor),n_$N.line(n_$a[4],n_$u._greenColor,n_$a[5],n_$u._greenColor),n_$N.line(n_$a[6],n_$u._greenColor,n_$a[7],n_$u._greenColor),n_$N.line(n_$a[0],n_$u._greenColor,n_$a[3],n_$u._greenColor),n_$N.line(n_$a[1],n_$u._greenColor,n_$a[2],n_$u._greenColor),n_$N.line(n_$a[2],n_$u._greenColor,n_$a[6],n_$u._greenColor),n_$N.line(n_$a[3],n_$u._greenColor,n_$a[7],n_$u._greenColor),n_$N.line(n_$a[0],n_$u._greenColor,n_$a[4],n_$u._greenColor),n_$N.line(n_$a[1],n_$u._greenColor,n_$a[5],n_$u._greenColor),n_$N.line(n_$a[4],n_$u._greenColor,n_$a[7],n_$u._greenColor),n_$N.line(n_$a[5],n_$u._greenColor,n_$a[6],n_$u._greenColor)},n_$C._calculateBoundingSphere=function(){throw"BaseRender: must override it."},n_$C._calculateBoundingBox=function(){throw"BaseRender: must override it."},n_$C._setShaderValueTexture=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C)},n_$C._setShaderValueMatrix4x4=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C?n_$C.elements:null)},n_$C._setShaderValueColor=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C?n_$C.elements:null)},n_$C._setShaderValueBuffer=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C)},n_$C._setShaderValueInt=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C)},n_$C._setShaderValueBool=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C)},n_$C._setShaderValueNumber=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C)},n_$C._setShaderValueVector2=function(n_$N,n_$C){this._owner._shaderValues.setValue(n_$N,n_$C?n_$C.elements:null)},n_$C._addShaderDefine=function(n_$N){this._owner._shaderDefineValue|=n_$N},n_$C._removeShaderDefine=function(n_$N){this._owner._shaderDefineValue&=~n_$N},n_$C._renderUpdate=function(n_$N){return!0},n_$C._applyLightMapParams=function(){if(0<=this._lightmapIndex){var n_$N=this._owner.scene;if(n_$N){var n_$C=n_$N.getlightmaps()[this._lightmapIndex];n_$C?(this._addShaderDefine(n_$pC.SAHDERDEFINE_LIGHTMAP),n_$C.loaded?this._setShaderValuelightMap(n_$C):n_$C.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(n_$pC.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(n_$pC.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(n_$pC.SAHDERDEFINE_LIGHTMAP)},n_$C._updateOctreeNode=function(){var n_$N=this._treeNode;n_$N&&this._octreeNodeNeedChange&&(n_$N.updateObject(this),this._octreeNodeNeedChange=!1)},n_$C._destroy=function(){this.offAll();var n_$N=0,n_$C=0;for(n_$N=0,n_$C=this._renderElements.length;n_$N<n_$C;n_$N++)this._renderElements[n_$N]._destroy();for(n_$N=0,n_$C=this._materials.length;n_$N<n_$C;n_$N++)this._materials[n_$N]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},n_$z(0,n_$C,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),n_$z(0,n_$C,"id",function(){return this._id}),n_$z(0,n_$C,"material",function(){var n_$N=this._materials[0];if(n_$N&&!this._materialsInstance[0]){var n_$C=this._getInstanceMaterial(n_$N,0);this.event("materialchanged",[this,0,n_$C])}return this._materials[0]},function(n_$N){this.sharedMaterial=n_$N}),n_$z(0,n_$C,"sharedMaterial",function(){return this._materials[0]},function(n_$N){var n_$C=this._materials[0];n_$C!==n_$N&&(this._materials[0]=n_$N,this._materialsInstance[0]=!1,this._changeMaterialReference(n_$C,n_$N),this.event("materialchanged",[this,0,n_$N]))}),n_$z(0,n_$C,"lightmapIndex",function(){return this._lightmapIndex},function(n_$N){this._lightmapIndex=n_$N,this._applyLightMapParams()}),n_$z(0,n_$C,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(n_$N){this._lightmapScaleOffset=n_$N,this._setShaderValueColor(2,n_$N),this._addShaderDefine(n_$pC.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),n_$z(0,n_$C,"enable",function(){return this._enable},function(n_$N){this._enable=n_$N,this.event("enablechanged",[this,n_$N])}),n_$z(0,n_$C,"materials",function(){for(var n_$N=0,n_$C=this._materials.length;n_$N<n_$C;n_$N++)if(!this._materialsInstance[n_$N]){var n_$a=this._getInstanceMaterial(this._materials[n_$N],n_$N);this.event("materialchanged",[this,n_$N,n_$a])}return this._materials.slice()},function(n_$N){this.sharedMaterials=n_$N}),n_$z(0,n_$C,"sharedMaterials",function(){return this._materials.slice()},function(n_$N){if(!n_$N)throw new Error("MeshRender: shadredMaterials value can't be null.");var n_$C=n_$N.length;this._materialsInstance.length=n_$C;for(var n_$a=0;n_$a<n_$C;n_$a++){var n_$u=this._materials[n_$a];n_$u!==n_$N[n_$a]&&(this._materialsInstance[n_$a]=!1,this._changeMaterialReference(n_$u,n_$N[n_$a]),this.event("materialchanged",[this,n_$a,n_$N[n_$a]]))}this._materials=n_$N}),n_$z(0,n_$C,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),n_$z(0,n_$C,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var n_$N=this.boundingBox;n_$MC.add(n_$N.min,n_$N.max,this._boundingBoxCenter),n_$MC.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),n_$z(0,n_$C,"receiveShadow",function(){return this._receiveShadow},function(n_$N){this._receiveShadow!==n_$N&&((this._receiveShadow=n_$N)?this._addShaderDefine(n_$GC.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(n_$GC.SHADERDEFINE_RECEIVE_SHADOW))}),n_$z(0,n_$C,"destroyed",function(){return this._destroyed}),n_$u._uniqueIDCounter=0,n_$$(n_$u,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC,new n_$MC]},"_greenColor",function(){return this._greenColor=new n_$nC(0,1,0,1)}]),n_$u}(),n_$rC=function(n_$N){function n_$n(n_$N){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,n_$n.__super.call(this),this._localPosition=new n_$MC,this._localRotation=new n_$aC(0,0,0,1),this._localScale=new n_$MC(1,1,1),this._localRotationEuler=new n_$MC,this._localMatrix=new n_$NC,this._position=new n_$MC,this._rotation=new n_$aC(0,0,0,1),this._scale=new n_$MC(1,1,1),this._worldMatrix=new n_$NC,this._forward=new n_$MC,this._up=new n_$MC,this._right=new n_$MC,this._owner=n_$N,this._childs=[]}n_$G(n_$n,"laya.d3.core.Transform3D",n_$J);var n_$C=n_$n.prototype;return n_$C._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)n_$NC.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var n_$N=n_$n._tempVector30;n_$MC.multiply(this.pivot,this._localScale,n_$N);var n_$C=n_$n._tempVector31;n_$MC.subtract(n_$N,this.pivot,n_$C);var n_$a=n_$n._tempVector32,n_$u=this.localRotation;n_$MC.transformQuat(n_$N,n_$u,n_$a),n_$MC.subtract(n_$a,n_$N,n_$a);var n_$e=n_$n._tempVector33;n_$MC.subtract(this._localPosition,n_$C,n_$e),n_$MC.subtract(n_$e,n_$a,n_$e),n_$NC.createAffineTransformation(n_$e,n_$u,this._localScale,this._localMatrix)}},n_$C._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._onWorldPositionRotationTransform()}},n_$C._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._onWorldPositionScaleTransform()}},n_$C._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._onWorldPositionTransform()}},n_$C._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._onWorldPositionRotationTransform()}},n_$C._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._onWorldPositionScaleTransform()}},n_$C._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._onWorldTransform()}},n_$C.translate=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0),n_$C?(n_$NC.createFromQuaternion(this.localRotation,n_$n._tempMatrix0),n_$MC.transformCoordinate(n_$N,n_$n._tempMatrix0,n_$n._tempVector30),n_$MC.add(this.localPosition,n_$n._tempVector30,this._localPosition),this.localPosition=this._localPosition):(n_$MC.add(this.position,n_$N,this._position),this.position=this._position)},n_$C.rotate=function(n_$N,n_$C,n_$a){var n_$u;void 0===n_$C&&(n_$C=!0),void 0===n_$a&&(n_$a=!0),n_$u=n_$a?n_$N:(n_$MC.scale(n_$N,Math.PI/180,n_$n._tempVector30),n_$n._tempVector30),n_$aC.createFromYawPitchRoll(n_$u.y,n_$u.x,n_$u.z,n_$n._tempQuaternion0),n_$C?(n_$aC.multiply(this._localRotation,n_$n._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(n_$aC.multiply(n_$n._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},n_$C.lookAt=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=!1);var n_$u,n_$e=n_$N.elements;if(n_$a){if(n_$u=this._localPosition.elements,Math.abs(n_$u[0]-n_$e[0])<n_$hN.zeroTolerance&&Math.abs(n_$u[1]-n_$e[1])<n_$hN.zeroTolerance&&Math.abs(n_$u[2]-n_$e[2])<n_$hN.zeroTolerance)return;n_$aC.lookAt(this._localPosition,n_$N,n_$C,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var n_$J=this.position;if(n_$u=n_$J.elements,Math.abs(n_$u[0]-n_$e[0])<n_$hN.zeroTolerance&&Math.abs(n_$u[1]-n_$e[1])<n_$hN.zeroTolerance&&Math.abs(n_$u[2]-n_$e[2])<n_$hN.zeroTolerance)return;n_$aC.lookAt(n_$J,n_$N,n_$C,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},n_$z(0,n_$C,"_isFrontFaceInvert",function(){var n_$N=this.scale,n_$C=n_$N.x<0;return n_$N.y<0&&(n_$C=!n_$C),n_$N.z<0&&(n_$C=!n_$C),n_$C}),n_$z(0,n_$C,"owner",function(){return this._owner}),n_$z(0,n_$C,"localRotation",function(){if(this._localQuaternionUpdate){var n_$N=this._localRotationEuler.elements;n_$aC.createFromYawPitchRoll(n_$N[1]/n_$n._angleToRandin,n_$N[0]/n_$n._angleToRandin,n_$N[2]/n_$n._angleToRandin,this._localRotation)}return this._localRotation},function(n_$N){this._localRotation=n_$N,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),n_$z(0,n_$C,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?n_$NC.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(n_$N){null===this._parent?n_$N.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),n_$NC.multiply(this._localMatrix,n_$N,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=n_$N,this._worldUpdate=!1}),n_$z(0,n_$C,"worldNeedUpdate",function(){return this._worldUpdate}),n_$z(0,n_$C,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(n_$N){this._localMatrix=n_$N,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),n_$z(0,n_$C,"dummy",function(){return this._dummy},function(n_$N){this._dummy!==n_$N&&(this._dummy&&(this._dummy._entity=null),n_$N&&(n_$N._entity=this),this._dummy=n_$N)}),n_$z(0,n_$C,"localPosition",function(){return this._localPosition},function(n_$N){this._localPosition=n_$N,this._localUpdate=!0,this._onWorldPositionTransform()}),n_$z(0,n_$C,"position",function(){if(this._positionUpdate){if(null!=this._parent){var n_$N=this._parent.position;n_$MC.multiply(this._localPosition,this._parent.scale,n_$n._tempVector30),n_$MC.transformQuat(n_$n._tempVector30,this._parent.rotation,n_$n._tempVector30),n_$MC.add(n_$N,n_$n._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(n_$N){if(null!=this._parent){n_$MC.subtract(n_$N,this._parent.position,this._localPosition);var n_$C=this._parent.scale.elements,n_$a=n_$C[0],n_$u=n_$C[1],n_$e=n_$C[2];if(1!==n_$a||1!==n_$u||1!==n_$e){var n_$J=n_$n._tempVector30,n_$M=n_$J.elements;n_$M[0]=1/n_$a,n_$M[1]=1/n_$u,n_$M[2]=1/n_$e,n_$MC.multiply(this._localPosition,n_$J,this._localPosition)}this._parent.rotation.invert(n_$n._tempQuaternion0),n_$MC.transformQuat(this._localPosition,n_$n._tempQuaternion0,this._localPosition)}else n_$N.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=n_$N,this._positionUpdate=!1}),n_$z(0,n_$C,"localScale",function(){return this._localScale},function(n_$N){this._localScale=n_$N,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),n_$z(0,n_$C,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(n_$n._tempVector30);var n_$N=n_$n._tempVector30.elements,n_$C=this._localRotationEuler.elements;n_$C[0]=n_$N[1]*n_$n._angleToRandin,n_$C[1]=n_$N[0]*n_$n._angleToRandin,n_$C[2]=n_$N[2]*n_$n._angleToRandin}return this._localRotationEuler},function(n_$N){this._localRotationEuler=n_$N,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),n_$z(0,n_$C,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?n_$aC.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(n_$N){null!=this._parent?(this._parent.rotation.invert(n_$n._tempQuaternion0),n_$aC.multiply(n_$N,n_$n._tempQuaternion0,this._localRotation)):n_$N.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=n_$N,this._rotationUpdate=!1}),n_$z(0,n_$C,"scale",function(){return this._scaleUpdate&&(null!==this._parent?n_$MC.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(n_$N){if(null!==this._parent){var n_$C=this._parent.scale.elements,n_$a=n_$n._tempVector30.elements;n_$a[0]=1/n_$C[0],n_$a[1]=1/n_$C[1],n_$a[2]=1/n_$C[2],n_$MC.multiply(n_$N,n_$n._tempVector30,this._localScale)}else n_$N.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=n_$N,this._scaleUpdate=!1}),n_$z(0,n_$C,"rotationEuler",null,function(n_$N){n_$aC.createFromYawPitchRoll(n_$N.y,n_$N.x,n_$N.z,this._rotation),this.rotation=this._rotation}),n_$z(0,n_$C,"forward",function(){var n_$N=this.worldMatrix.elements;return this._forward.elements[0]=-n_$N[8],this._forward.elements[1]=-n_$N[9],this._forward.elements[2]=-n_$N[10],this._forward}),n_$z(0,n_$C,"up",function(){var n_$N=this.worldMatrix.elements;return this._up.elements[0]=n_$N[4],this._up.elements[1]=n_$N[5],this._up.elements[2]=n_$N[6],this._up}),n_$z(0,n_$C,"right",function(){var n_$N=this.worldMatrix.elements;return this._right.elements[0]=n_$N[0],this._right.elements[1]=n_$N[1],this._right.elements[2]=n_$N[2],this._right}),n_$z(0,n_$C,"parent",function(){return this._parent},function(n_$N){if(this._parent!==n_$N){if(this._parent){var n_$C=this._parent._childs,n_$a=n_$C.indexOf(this);n_$C.splice(n_$a,1)}n_$N&&(n_$N._childs.push(this),n_$N&&this._onWorldTransform()),this._parent=n_$N}}),n_$$(n_$n,["_tempVector30",function(){return this._tempVector30=new n_$MC},"_tempVector31",function(){return this._tempVector31=new n_$MC},"_tempVector32",function(){return this._tempVector32=new n_$MC},"_tempVector33",function(){return this._tempVector33=new n_$MC},"_tempQuaternion0",function(){return this._tempQuaternion0=new n_$aC},"_tempMatrix0",function(){return this._tempMatrix0=new n_$NC},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),n_$n}(),n_$cC=(function(n_$N){function n_$C(){this._rotation=0,this._matNeedUpdte=!1,n_$C.__super.call(this),this._matrix=new n_$NC,this._offset=new n_$JC,this._tiling=new n_$JC(1,1)}n_$G(n_$C,"laya.d3.core.TransformUV",n_$J);var n_$a=n_$C.prototype;n_$X.imps(n_$a,{"laya.d3.core.IClone":!0}),n_$a._updateMatrix=function(){n_$C._tempOffsetV3.elements[0]=this._offset.x,n_$C._tempOffsetV3.elements[1]=this._offset.y,n_$aC.createFromYawPitchRoll(0,0,this._rotation,n_$C._tempRotationQua),n_$C._tempTitlingV3.elements[0]=this._tiling.x,n_$C._tempTitlingV3.elements[1]=this._tiling.y,n_$NC.createAffineTransformation(n_$C._tempOffsetV3,n_$C._tempRotationQua,n_$C._tempTitlingV3,this._matrix)},n_$a.cloneTo=function(n_$N){n_$N._matrix=this._matrix.clone(),n_$N._offset=this._offset.clone(),n_$N._rotation=this._rotation,n_$N._tiling=this._tiling.clone()},n_$a.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$a,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),n_$z(0,n_$a,"tiling",function(){return this._tiling},function(n_$N){this._tiling=n_$N,this._matNeedUpdte=!0}),n_$z(0,n_$a,"offset",function(){return this._offset},function(n_$N){this._offset=n_$N,this._matNeedUpdte=!0}),n_$z(0,n_$a,"rotation",function(){return this._rotation},function(n_$N){this._rotation=n_$N,this._matNeedUpdte=!0}),n_$$(n_$C,["_tempOffsetV3",function(){return this._tempOffsetV3=new n_$MC(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new n_$aC},"_tempTitlingV3",function(){return this._tempTitlingV3=new n_$MC(1,1,1)}])}(),function(n_$a){function n_$N(){this.x=NaN,this.y=NaN,this.z=NaN,n_$N.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.shape.BoxShape",n_$a);var n_$C=n_$N.prototype;n_$C._getShapeBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=.5*-this.x,n_$C[1]=.5*-this.y,n_$C[2]=.5*-this.z;var n_$a=n_$N.max.elements;n_$a[0]=.5*this.x,n_$a[1]=.5*this.y,n_$a[2]=.5*this.z},n_$C._getSpeedBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=0,n_$C[1]=0,n_$C[2]=0;var n_$a=n_$N.max.elements;n_$a[0]=0,n_$a[1]=1,n_$a[2]=0},n_$C.generatePositionAndDirection=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.elements,n_$J=n_$C.elements;n_$a?(n_$a.seed=n_$u[16],n_$k._randomPointInsideHalfUnitBox(n_$N,n_$a),n_$u[16]=n_$a.seed):n_$k._randomPointInsideHalfUnitBox(n_$N),n_$e[0]=this.x*n_$e[0],n_$e[1]=this.y*n_$e[1],n_$e[2]=this.z*n_$e[2],this.randomDirection?n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointUnitSphere(n_$C,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointUnitSphere(n_$C):(n_$J[0]=0,n_$J[1]=0,n_$J[2]=1)},n_$C.cloneTo=function(n_$N){n_$a.prototype.cloneTo.call(this,n_$N);var n_$C=n_$N;n_$C.x=this.x,n_$C.y=this.y,n_$C.z=this.z,n_$C.randomDirection=this.randomDirection}}(n_$R),function(n_$a){function n_$M(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,n_$M.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}n_$G(n_$M,"laya.d3.core.particleShuriKen.module.shape.CircleShape",n_$a);var n_$N=n_$M.prototype;n_$N._getShapeBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=n_$C[2]=-this.radius,n_$C[1]=0;var n_$a=n_$N.max.elements;n_$a[0]=n_$a[2]=this.radius,n_$a[1]=0},n_$N._getSpeedBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=n_$C[1]=-1,n_$C[2]=0;var n_$a=n_$N.max.elements;n_$a[0]=n_$a[1]=1,n_$a[2]=0},n_$N.generatePositionAndDirection=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.elements,n_$J=n_$M._tempPositionPoint.elements;n_$a?(n_$a.seed=n_$u[16],this.emitFromEdge?n_$k._randomPointUnitArcCircle(this.arc,n_$M._tempPositionPoint,n_$a):n_$k._randomPointInsideUnitArcCircle(this.arc,n_$M._tempPositionPoint,n_$a),n_$u[16]=n_$a.seed):this.emitFromEdge?n_$k._randomPointUnitArcCircle(this.arc,n_$M._tempPositionPoint):n_$k._randomPointInsideUnitArcCircle(this.arc,n_$M._tempPositionPoint),n_$e[0]=-n_$J[0],n_$e[1]=n_$J[1],n_$e[2]=0,n_$MC.scale(n_$N,this.radius,n_$N),this.randomDirection?n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointUnitSphere(n_$C,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointUnitSphere(n_$C):n_$N.cloneTo(n_$C)},n_$N.cloneTo=function(n_$N){n_$a.prototype.cloneTo.call(this,n_$N);var n_$C=n_$N;n_$C.radius=this.radius,n_$C.arc=this.arc,n_$C.emitFromEdge=this.emitFromEdge,n_$C.randomDirection=this.randomDirection},n_$$(n_$M,["_tempPositionPoint",function(){return this._tempPositionPoint=new n_$JC}])}(n_$R),function(n_$a){function n_$O(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,n_$O.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}n_$G(n_$O,"laya.d3.core.particleShuriKen.module.shape.ConeShape",n_$a);var n_$N=n_$O.prototype;n_$N._getShapeBoundBox=function(n_$N){var n_$C=this.radius+this.length*Math.sin(this.angle),n_$a=this.length*Math.cos(this.angle),n_$u=n_$N.min.elements;n_$u[0]=n_$u[1]=-n_$C,n_$u[2]=0;var n_$e=n_$N.max.elements;n_$e[0]=n_$e[1]=n_$C,n_$e[2]=n_$a},n_$N._getSpeedBoundBox=function(n_$N){var n_$C=Math.sin(this.angle),n_$a=n_$N.min.elements;n_$a[0]=n_$a[1]=-n_$C,n_$a[2]=0;var n_$u=n_$N.max.elements;n_$u[0]=n_$a[1]=n_$C,n_$u[2]=1},n_$N.generatePositionAndDirection=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J=n_$N.elements,n_$M=n_$C.elements,n_$n=n_$O._tempPositionPoint.elements,n_$V=NaN,n_$A=NaN,n_$P=Math.cos(this.angle),n_$$=Math.sin(this.angle);switch(this.emitType){case 0:n_$a?(n_$a.seed=n_$u[16],n_$k._randomPointInsideUnitCircle(n_$O._tempPositionPoint,n_$a),n_$u[16]=n_$a.seed):n_$k._randomPointInsideUnitCircle(n_$O._tempPositionPoint),n_$V=n_$n[0],n_$A=n_$n[1],n_$J[0]=n_$V*this.radius,n_$J[1]=n_$A*this.radius,n_$J[2]=0,this.randomDirection?(n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointInsideUnitCircle(n_$O._tempDirectionPoint,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointInsideUnitCircle(n_$O._tempDirectionPoint),n_$e=n_$O._tempDirectionPoint.elements,n_$M[0]=n_$e[0]*n_$$,n_$M[1]=n_$e[1]*n_$$):(n_$M[0]=n_$V*n_$$,n_$M[1]=n_$A*n_$$),n_$M[2]=n_$P;break;case 1:n_$a?(n_$a.seed=n_$u[16],n_$k._randomPointUnitCircle(n_$O._tempPositionPoint,n_$a),n_$u[16]=n_$a.seed):n_$k._randomPointUnitCircle(n_$O._tempPositionPoint),n_$V=n_$n[0],n_$A=n_$n[1],n_$J[0]=n_$V*this.radius,n_$J[1]=n_$A*this.radius,n_$J[2]=0,this.randomDirection?(n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointInsideUnitCircle(n_$O._tempDirectionPoint,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointInsideUnitCircle(n_$O._tempDirectionPoint),n_$e=n_$O._tempDirectionPoint.elements,n_$M[0]=n_$e[0]*n_$$,n_$M[1]=n_$e[1]*n_$$):(n_$M[0]=n_$V*n_$$,n_$M[1]=n_$A*n_$$),n_$M[2]=n_$P;break;case 2:n_$a?(n_$a.seed=n_$u[16],n_$k._randomPointInsideUnitCircle(n_$O._tempPositionPoint,n_$a)):n_$k._randomPointInsideUnitCircle(n_$O._tempPositionPoint),n_$V=n_$n[0],n_$A=n_$n[1],n_$J[0]=n_$V*this.radius,n_$J[1]=n_$A*this.radius,n_$M[n_$J[2]=0]=n_$V*n_$$,n_$M[1]=n_$A*n_$$,n_$M[2]=n_$P,n_$MC.normalize(n_$C,n_$C),n_$a?(n_$MC.scale(n_$C,this.length*n_$a.getFloat(),n_$C),n_$u[16]=n_$a.seed):n_$MC.scale(n_$C,this.length*Math.random(),n_$C),n_$MC.add(n_$N,n_$C,n_$N),this.randomDirection&&(n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointUnitSphere(n_$C,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointUnitSphere(n_$C));break;case 3:n_$a?(n_$a.seed=n_$u[16],n_$k._randomPointUnitCircle(n_$O._tempPositionPoint,n_$a)):n_$k._randomPointUnitCircle(n_$O._tempPositionPoint),n_$V=n_$n[0],n_$A=n_$n[1],n_$J[0]=n_$V*this.radius,n_$J[1]=n_$A*this.radius,n_$M[n_$J[2]=0]=n_$V*n_$$,n_$M[1]=n_$A*n_$$,n_$M[2]=n_$P,n_$MC.normalize(n_$C,n_$C),n_$a?(n_$MC.scale(n_$C,this.length*n_$a.getFloat(),n_$C),n_$u[16]=n_$a.seed):n_$MC.scale(n_$C,this.length*Math.random(),n_$C),n_$MC.add(n_$N,n_$C,n_$N),this.randomDirection&&(n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointUnitSphere(n_$C,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointUnitSphere(n_$C));break;default:throw new Error("ConeShape:emitType is invalid.")}},n_$N.cloneTo=function(n_$N){n_$a.prototype.cloneTo.call(this,n_$N);var n_$C=n_$N;n_$C.angle=this.angle,n_$C.radius=this.radius,n_$C.length=this.length,n_$C.emitType=this.emitType,n_$C.randomDirection=this.randomDirection},n_$$(n_$O,["_tempPositionPoint",function(){return this._tempPositionPoint=new n_$JC},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new n_$JC}])}(n_$R),function(n_$a){function n_$N(){this.radius=NaN,this.emitFromShell=!1,n_$N.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",n_$a);var n_$C=n_$N.prototype;n_$C._getShapeBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=n_$C[1]=n_$C[2]=-this.radius;var n_$a=n_$N.max.elements;n_$a[0]=n_$a[1]=this.radius,n_$a[2]=0},n_$C._getSpeedBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=n_$C[1]=-1,n_$C[2]=0;var n_$a=n_$N.max.elements;n_$a[0]=n_$a[1]=n_$a[2]=1},n_$C.generatePositionAndDirection=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.elements;n_$a?(n_$a.seed=n_$u[16],this.emitFromShell?n_$k._randomPointUnitSphere(n_$N,n_$a):n_$k._randomPointInsideUnitSphere(n_$N,n_$a),n_$u[16]=n_$a.seed):this.emitFromShell?n_$k._randomPointUnitSphere(n_$N):n_$k._randomPointInsideUnitSphere(n_$N),n_$MC.scale(n_$N,this.radius,n_$N);var n_$J=n_$e[2];n_$J<0&&(n_$e[2]=-1*n_$J),this.randomDirection?n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointUnitSphere(n_$C,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointUnitSphere(n_$C):n_$N.cloneTo(n_$C)},n_$C.cloneTo=function(n_$N){n_$a.prototype.cloneTo.call(this,n_$N);var n_$C=n_$N;n_$C.radius=this.radius,n_$C.emitFromShell=this.emitFromShell,n_$C.randomDirection=this.randomDirection}}(n_$R),function(n_$a){function n_$N(){this.radius=NaN,this.emitFromShell=!1,n_$N.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}n_$G(n_$N,"laya.d3.core.particleShuriKen.module.shape.SphereShape",n_$a);var n_$C=n_$N.prototype;n_$C._getShapeBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=n_$C[1]=n_$C[2]=-this.radius;var n_$a=n_$N.max.elements;n_$a[0]=n_$a[1]=n_$a[2]=this.radius},n_$C._getSpeedBoundBox=function(n_$N){var n_$C=n_$N.min.elements;n_$C[0]=n_$C[1]=n_$C[2]=-1;var n_$a=n_$N.max.elements;n_$a[0]=n_$a[1]=n_$a[2]=1},n_$C.generatePositionAndDirection=function(n_$N,n_$C,n_$a,n_$u){n_$a?(n_$a.seed=n_$u[16],this.emitFromShell?n_$k._randomPointUnitSphere(n_$N,n_$a):n_$k._randomPointInsideUnitSphere(n_$N,n_$a),n_$u[16]=n_$a.seed):this.emitFromShell?n_$k._randomPointUnitSphere(n_$N):n_$k._randomPointInsideUnitSphere(n_$N),n_$MC.scale(n_$N,this.radius,n_$N),this.randomDirection?n_$a?(n_$a.seed=n_$u[17],n_$k._randomPointUnitSphere(n_$C,n_$a),n_$u[17]=n_$a.seed):n_$k._randomPointUnitSphere(n_$C):n_$N.cloneTo(n_$C)},n_$C.cloneTo=function(n_$N){n_$a.prototype.cloneTo.call(this,n_$N);var n_$C=n_$N;n_$C.radius=this.radius,n_$C.emitFromShell=this.emitFromShell,n_$C.randomDirection=this.randomDirection}}(n_$R),function(n_$N){function n_$C(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,n_$C.__super.call(this)}return n_$G(n_$C,"laya.d3.core.render.SubMeshRenderElement",n_$m),n_$C}()),n_$EC=function(n_$N){function n_$t(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=n_$N,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[n_$GC.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[n_$pC.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[n_$pC.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[n_$qC.SHADERDEFINE_ALPHATEST]="ALPHATEST";n_$t.__super.call(this,n_$N,n_$C,n_$a,null,{}),this._attributeMap=n_$u;var n_$M;for(n_$M in n_$e){var n_$n=n_$e[n_$M];switch(n_$n[1]){case 0:this._renderElementUniformMap[n_$M]=n_$n[0];break;case 1:this._materialUniformMap[n_$M]=n_$n[0];break;case 2:this._spriteUniformMap[n_$M]=n_$n[0];break;case 3:this._cameraUniformMap[n_$M]=n_$n[0];break;case 4:this._sceneUniformMap[n_$M]=n_$n[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}n_$G(n_$t,"laya.d3.shader.ShaderCompile3D",n_$W);var n_$C=n_$t.prototype;return n_$C._definesToNameDic=function(n_$N,n_$C){for(var n_$a={},n_$u=1,n_$e=0;n_$e<32&&!(n_$N<(n_$u=1<<n_$e));n_$e++)if(n_$N&n_$u){var n_$J=n_$C[n_$u];n_$J&&(n_$a[n_$J]="")}return n_$a},n_$C.withCompile=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J,n_$M;if(n_$J=this.sharders[n_$N])if(n_$M=n_$J[n_$C]){if(n_$e=n_$M[n_$a])return n_$e}else n_$M=n_$J[n_$C]=[];else n_$M=(n_$J=this.sharders[n_$N]=[])[n_$C]=[];var n_$n,n_$V=this._definesToNameDic(n_$N,n_$t._globalInt2name),n_$A=this._definesToNameDic(n_$C,this._spriteInt2name),n_$P=this._definesToNameDic(n_$a,this._materialInt2name),n_$$={},n_$O="";if(n_$V)for(n_$n in n_$V)n_$O+="#define "+n_$n+"\n",n_$$[n_$n]=!0;if(n_$A)for(n_$n in n_$A)n_$O+="#define "+n_$n+"\n",n_$$[n_$n]=!0;if(n_$P)for(n_$n in n_$P)n_$O+="#define "+n_$n+"\n",n_$$[n_$n]=!0;var n_$G=n_$yC.nameKey.getName(this._name)+" compile ("+n_$N+","+n_$C+","+n_$a+")",n_$z=this._VS.toscript(n_$$,[]),n_$f=this._PS.toscript(n_$$,[]);n_$Q.now();if(n_$e=n_$yC.create(n_$O+n_$z.join("\n"),n_$O+n_$f.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,n_$u,n_$G),n_$M[n_$a]=n_$e,laya.d3.shader.ShaderCompile3D.debugMode)n_$Q.now();return n_$e},n_$C.precompileShaderWithShaderDefine=function(n_$N,n_$C,n_$a){this.withCompile(n_$N,n_$C,n_$a,!0)},n_$C.addMaterialDefines=function(n_$N){var n_$C=n_$N.defines;for(var n_$a in n_$C){var n_$u=n_$C[n_$a],n_$e=parseInt(n_$a);this._materialInt2name[n_$e]=n_$u,this._materialName2Int[n_$u]=n_$e}},n_$C.addSpriteDefines=function(n_$N){var n_$C=n_$N.defines;for(var n_$a in n_$C){var n_$u=n_$C[n_$a],n_$e=parseInt(n_$a);this._spriteInt2name[n_$e]=n_$u,this._spriteName2Int[n_$u]=n_$e}},n_$C.getMaterialDefineByName=function(n_$N){return this._materialName2Int[n_$N]},n_$C.registerMaterialDefine=function(n_$N){var n_$C=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[n_$C]=n_$N,this._materialName2Int[n_$N]=n_$C},n_$C.registerSpriteDefine=function(n_$N){var n_$C=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[n_$C]=n_$N,this._spriteName2Int[n_$N]=n_$C},n_$t._globalRegDefine=function(n_$N,n_$C){n_$t._globalInt2name[n_$C]=n_$N},n_$t.add=function(n_$N,n_$C,n_$a,n_$u,n_$e){return laya.d3.shader.ShaderCompile3D._preCompileShader[n_$N]=new n_$t(n_$N,n_$C,n_$a,n_$u,n_$e,n_$W.includes)},n_$t.get=function(n_$N){return laya.d3.shader.ShaderCompile3D._preCompileShader[n_$yC.nameKey.getID(n_$N)]},n_$t._preCompileShader={},n_$t._globalInt2name=[],n_$t.debugMode=!1,n_$t.SHADERDEFINE_HIGHPRECISION=1,n_$t.SHADERDEFINE_FOG=4,n_$t.SHADERDEFINE_DIRECTIONLIGHT=8,n_$t.SHADERDEFINE_POINTLIGHT=16,n_$t.SHADERDEFINE_SPOTLIGHT=32,n_$t.SHADERDEFINE_UV0=64,n_$t.SHADERDEFINE_COLOR=128,n_$t.SHADERDEFINE_UV1=256,n_$t.SAHDERDEFINE_DEPTHFOG=131072,n_$t}(),n_$FC=function(n_$N){function n_$z(){n_$z.__super.call(this)}n_$G(n_$z,"laya.d3.graphics.MeshSprite3DStaticBatchManager",n_$uN);var n_$C=n_$z.prototype;return n_$C._getStaticBatch=function(n_$N,n_$C,n_$a,n_$u){var n_$e,n_$J;return n_$J=n_$N?n_$N.id.toString()+n_$a.id.toString()+n_$C.id.toString()+n_$u.toString():n_$a.id.toString()+n_$C.id.toString()+n_$u.toString(),this._staticBatches[n_$J]?n_$e=this._staticBatches[n_$J]:this._staticBatches[n_$J]=n_$e=new n_$DC(n_$J,this,n_$N,n_$C,n_$a),n_$e},n_$C._initStaticBatchs=function(n_$N){var n_$C,n_$a;this._initBatchRenderElements.sort(n_$z._sortPrepareStaticBatch);for(var n_$u,n_$e=!1,n_$J=0,n_$M=0,n_$n=this._initBatchRenderElements.length;n_$M<n_$n;n_$M++){var n_$V,n_$A=this._initBatchRenderElements[n_$M],n_$P=n_$A.renderObj._getVertexBuffer(0);n_$A._sprite3D;if(n_$a===n_$P.vertexDeclaration&&n_$C===n_$A._material)if(n_$e)n_$u._addCombineBatchRenderObjTest(n_$A)?(n_$V=n_$A._staticBatch)!==n_$u&&(n_$V&&n_$V._deleteCombineBatchRenderObj(n_$A),n_$u._addCombineBatchRenderObj(n_$A)):(n_$e=!1,n_$J++);else{var n_$$=this._initBatchRenderElements[n_$M-1],n_$O=n_$$.renderObj,n_$G=n_$A.renderObj;n_$e=!(65535<n_$O._getVertexBuffer().vertexCount+n_$G._getVertexBuffer().vertexCount)&&(n_$u=this._getStaticBatch(n_$N,n_$a,n_$C,n_$J),(n_$V=n_$$._staticBatch)!==n_$u&&(n_$V&&n_$V._deleteCombineBatchRenderObj(n_$$),n_$u._addCombineBatchRenderObj(n_$$)),(n_$V=n_$A._staticBatch)!==n_$u&&(n_$V&&n_$V._deleteCombineBatchRenderObj(n_$A),n_$u._addCombineBatchRenderObj(n_$A)),!0)}else n_$e=!1,n_$J=0;n_$C=n_$A._material,n_$a=n_$P.vertexDeclaration}},n_$z._sortPrepareStaticBatch=function(n_$N,n_$C){var n_$a=n_$N._render,n_$u=n_$C._render,n_$e=n_$a.lightmapIndex-n_$u.lightmapIndex;if(0!=n_$e)return n_$e;var n_$J=n_$a.receiveShadow-n_$u.receiveShadow;if(0!=n_$J)return n_$J;var n_$M=n_$N._mainSortID-n_$C._mainSortID;return 0==n_$M?n_$N.renderObj.triangleCount-n_$C.renderObj.triangleCount:n_$M},n_$z}(),n_$DC=function(n_$N){function n_$J(n_$N,n_$C,n_$a,n_$u,n_$e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,n_$J.__super.call(this,n_$N,n_$C,n_$a),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=n_$u,this._material=n_$e}n_$G(n_$J,"laya.d3.graphics.SubMeshStaticBatch",n_$eN);var n_$C=n_$J.prototype;return n_$C._compareBatchRenderElement=function(n_$N,n_$C){return n_$N._batchIndexStart>n_$C._batchIndexStart},n_$C._addCombineBatchRenderObjTest=function(n_$N){var n_$C=n_$N.renderObj._vertexCount;return!(65535<(0<n_$C?this._currentCombineVertexCount+n_$C:this._currentCombineVertexCount+n_$N.renderObj._getVertexBuffer().vertexCount))},n_$C._addCombineBatchRenderObj=function(n_$N){var n_$C=n_$N.renderObj,n_$a=n_$C._vertexCount;this._initBatchRenderElements.push(n_$N),n_$N._staticBatch=this,0<n_$a?(this._currentCombineIndexCount+=n_$C._indexCount,this._currentCombineVertexCount+=n_$a):(this._currentCombineIndexCount=this._currentCombineIndexCount+n_$C._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+n_$C._getVertexBuffer().vertexCount),this._needFinishCombine=!0},n_$C._deleteCombineBatchRenderObj=function(n_$N){var n_$C=n_$N.renderObj,n_$a=this._initBatchRenderElements.indexOf(n_$N);if(-1!==n_$a){this._initBatchRenderElements.splice(n_$a,1),n_$N._staticBatch=null;var n_$u=n_$C._vertexCount;0<n_$u?(this._currentCombineIndexCount=this._currentCombineIndexCount-n_$C._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-n_$u):(this._currentCombineIndexCount=this._currentCombineIndexCount-n_$C._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-n_$C._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},n_$C._finishInit=function(){if(this._needFinishCombine){var n_$N=0,n_$C=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var n_$a=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),n_$u=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=n_$RC.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=n_$LC.create("ushort",this._currentCombineIndexCount,35044);for(var n_$e=0,n_$J=this._initBatchRenderElements.length;n_$e<n_$J;n_$e++){var n_$M=this._initBatchRenderElements[n_$e],n_$n=n_$M.renderObj,n_$V=n_$n._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,n_$M._sprite3D),n_$A=n_$n.getIndices(),n_$P=n_$M._sprite3D.transform._isFrontFaceInvert,n_$$=n_$N/(this._vertexDeclaration.vertexStride/4)-n_$n._vertexStart,n_$O=n_$C,n_$G=n_$O+n_$A.length;n_$M._batchIndexStart=n_$O,n_$M._batchIndexEnd=n_$G,n_$u.set(n_$A,n_$C);var n_$z=0;if(n_$P)for(n_$z=n_$O;n_$z<n_$G;n_$z+=3){n_$u[n_$z]=n_$$+n_$u[n_$z];var n_$f=n_$u[n_$z+1],n_$t=n_$u[n_$z+2];n_$u[n_$z+1]=n_$$+n_$t,n_$u[n_$z+2]=n_$$+n_$f}else for(n_$z=n_$O;n_$z<n_$G;n_$z+=3)n_$u[n_$z]=n_$$+n_$u[n_$z],n_$u[n_$z+1]=n_$$+n_$u[n_$z+1],n_$u[n_$z+2]=n_$$+n_$u[n_$z+2];n_$C+=n_$A.length,n_$a.set(n_$V,n_$N),n_$N+=n_$V.length}this._vertexBuffer.setData(n_$a),this._indexBuffer.setData(n_$u),this._needFinishCombine=!1}},n_$C._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new n_$cC)},n_$C._getRenderElement=function(n_$N,n_$C,n_$a){for(var n_$u,n_$e,n_$J=this._batchRenderElements.length,n_$M=!0,n_$n=0;n_$n<n_$J;n_$n++){var n_$V,n_$A,n_$P=(n_$e=this._batchRenderElements[n_$n])._sprite3D._render;if(0!==n_$n&&(n_$M=(n_$V=(n_$u=this._batchRenderElements[n_$n-1])._sprite3D._render).lightmapIndex!==n_$P.lightmapIndex||n_$V.receiveShadow!==n_$P.receiveShadow||n_$u._batchIndexEnd!==n_$e._batchIndexStart),n_$M){(n_$A=this._getCombineRenderElementFromPool()).renderObj=this,n_$A._material=this._material,n_$A._batchIndexStart=n_$e._batchIndexStart,n_$A._batchIndexEnd=n_$e._batchIndexEnd;var n_$$=n_$P.lightmapIndex,n_$O=n_$$+1,n_$G=this._batchOwnerIndices[n_$O];n_$G||(n_$G=this._batchOwnerIndices[n_$O]=[]);var n_$z,n_$f=n_$G[n_$e._render.receiveShadow?1:0];void 0===n_$f?(n_$G[n_$P.receiveShadow?1:0]=this._batchOwners.length,(n_$z=new n_$bC(null,"StaticBatchMeshSprite3D"))._scene=n_$C,n_$z._transform=this._rootOwner?this._rootOwner._transform:null,n_$z._render.lightmapIndex=n_$$,n_$z._render.receiveShadow=n_$e._render.receiveShadow,this._batchOwners.push(n_$z)):n_$z=this._batchOwners[n_$f],n_$z._render._renderUpdate(n_$a),n_$A._sprite3D=n_$z,n_$N.push(n_$A)}else n_$A._batchIndexEnd=n_$e._batchIndexEnd}},n_$C._beforeRender=function(n_$N){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},n_$C._render=function(n_$N){var n_$C=n_$N.renderElement,n_$a=n_$C._batchIndexStart,n_$u=n_$C._batchIndexEnd-n_$a;n_$_.mainContext.drawElements(4,n_$u,5123,2*n_$a),n_$E.drawCall++,n_$E.trianglesFaces+=n_$u/3},n_$C.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},n_$C._getVertexBuffer=function(n_$N){return void 0===n_$N&&(n_$N=0),this._vertexBuffer},n_$J}(),n_$sC=function(n_$N){function n_$C(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,n_$C.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}n_$G(n_$C,"laya.d3.core.ComponentNode",n_$A);var n_$a=n_$C.prototype;return n_$a.addComponent=function(n_$N){var n_$C,n_$a=this._componentsMap.indexOf(n_$N);if(-1===n_$a)n_$C=[],this._componentsMap.push(n_$N),this._typeComponentsIndices.push(n_$C);else if(n_$C=this._typeComponentsIndices[n_$a],this._components[n_$C[0]].isSingleton)throw new Error("无法单实例创建"+n_$N+"组件，"+n_$N+"组件已存在！");var n_$u=n_$e.getInstance(n_$N);return n_$C.push(this._components.length),this._components.push(n_$u),n_$u instanceof laya.d3.component.Script&&this._scripts.push(n_$u),n_$u._initialize(this),n_$u},n_$a._removeComponent=function(n_$N,n_$C){var n_$a=this._typeComponentsIndices[n_$N],n_$u=n_$a[n_$C],n_$e=this._components[n_$u];this._components.splice(n_$u,1),n_$e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(n_$e),1),n_$a.splice(n_$C,1),0===n_$a.length&&(this._typeComponentsIndices.splice(n_$N,1),this._componentsMap.splice(n_$N,1));for(var n_$J=0,n_$M=this._componentsMap.length;n_$J<n_$M;n_$J++)for(var n_$n=(n_$a=this._typeComponentsIndices[n_$J]).length-1;0<=n_$n;n_$n--){var n_$V=n_$a[n_$n];if(!(n_$u<n_$V))break;n_$a[n_$n]=--n_$V}n_$e._destroy()},n_$a.getComponentByType=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0);var n_$a=this._componentsMap.indexOf(n_$N);return-1===n_$a?null:this._components[this._typeComponentsIndices[n_$a][n_$C]]},n_$a.getComponentsByType=function(n_$N,n_$C){var n_$a=this._componentsMap.indexOf(n_$N);if(-1!==n_$a){var n_$u=this._typeComponentsIndices[n_$a],n_$e=n_$u.length;n_$C.length=n_$e;for(var n_$J=0;n_$J<n_$e;n_$J++)n_$C[n_$J]=this._components[n_$u[n_$J]]}else n_$C.length=0},n_$a.getComponentByIndex=function(n_$N){return this._components[n_$N]},n_$a.removeComponentByType=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0);var n_$a=this._componentsMap.indexOf(n_$N);-1!==n_$a&&this._removeComponent(n_$a,n_$C)},n_$a.removeComponentsByType=function(n_$N){var n_$C=this._componentsMap.indexOf(n_$N);if(-1!==n_$C)for(var n_$a=this._typeComponentsIndices[n_$C],n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$a.length<n_$e?n_$e--:n_$u++)this._removeComponent(n_$C,n_$u)},n_$a.removeAllComponent=function(){for(var n_$N=0,n_$C=this._componentsMap.length;n_$N<n_$C;this._componentsMap.length<n_$C?n_$C--:n_$N++)this.removeComponentsByType(this._componentsMap[n_$N])},n_$a._updateComponents=function(n_$N){for(var n_$C=0,n_$a=this._components.length;n_$C<n_$a;n_$C++){var n_$u=this._components[n_$C];!n_$u.started&&(n_$u._start(n_$N),n_$u.started=!0),n_$u.enable&&n_$u._update(n_$N)}},n_$a._lateUpdateComponents=function(n_$N){for(var n_$C=0;n_$C<this._components.length;n_$C++){var n_$a=this._components[n_$C];!n_$a.started&&(n_$a._start(n_$N),n_$a.started=!0),n_$a.enable&&n_$a._lateUpdate(n_$N)}},n_$a._preRenderUpdateComponents=function(n_$N){for(var n_$C=0;n_$C<this._components.length;n_$C++){var n_$a=this._components[n_$C];!n_$a.started&&(n_$a._start(n_$N),n_$a.started=!0),n_$a.enable&&n_$a._preRenderUpdate(n_$N)}},n_$a._postRenderUpdateComponents=function(n_$N){for(var n_$C=0;n_$C<this._components.length;n_$C++){var n_$a=this._components[n_$C];!n_$a.started&&(n_$a._start(n_$N),n_$a.started=!0),n_$a.enable&&n_$a._postRenderUpdate(n_$N)}},n_$C}(),n_$qC=function(n_$u){function n_$N(){n_$N.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new n_$OC,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new n_$nC(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}n_$G(n_$N,"laya.d3.core.material.BaseMaterial",n_$u);var n_$C=n_$N.prototype;return n_$X.imps(n_$C,{"laya.d3.core.IClone":!0}),n_$C._addShaderDefine=function(n_$N){this._shaderDefineValue|=n_$N},n_$C._removeShaderDefine=function(n_$N){this._shaderDefineValue&=~n_$N},n_$C._addDisablePublicShaderDefine=function(n_$N){this._disablePublicShaderDefine|=n_$N},n_$C._removeDisablePublicShaderDefine=function(n_$N){this._disablePublicShaderDefine&=~n_$N},n_$C._setBuffer=function(n_$N,n_$C){this._shaderValues.setValue(n_$N,n_$C),this._values[n_$N]=n_$C},n_$C._getBuffer=function(n_$N){return this._values[n_$N]},n_$C._setMatrix4x4=function(n_$N,n_$C){this._shaderValues.setValue(n_$N,n_$C?n_$C.elements:null),this._values[n_$N]=n_$C},n_$C._getMatrix4x4=function(n_$N){return this._values[n_$N]},n_$C._setInt=function(n_$N,n_$C){this._shaderValues.setValue(n_$N,n_$C),this._values[n_$N]=n_$C},n_$C._getInt=function(n_$N){return this._values[n_$N]},n_$C._setNumber=function(n_$N,n_$C){this._shaderValues.setValue(n_$N,n_$C),this._values[n_$N]=n_$C},n_$C._getNumber=function(n_$N){return this._values[n_$N]},n_$C._setBool=function(n_$N,n_$C){this._shaderValues.setValue(n_$N,n_$C),this._values[n_$N]=n_$C},n_$C._getBool=function(n_$N){return this._values[n_$N]},n_$C._setVector2=function(n_$N,n_$C){this._shaderValues.setValue(n_$N,n_$C?n_$C.elements:null),this._values[n_$N]=n_$C},n_$C._getVector2=function(n_$N){return this._values[n_$N]},n_$C._setColor=function(n_$N,n_$C){this._shaderValues.setValue(n_$N,n_$C?n_$C.elements:null),this._values[n_$N]=n_$C},n_$C._getColor=function(n_$N){return this._values[n_$N]},n_$C._setTexture=function(n_$N,n_$C){var n_$a=this._values[n_$N];this._values[n_$N]=n_$C,this._shaderValues.setValue(n_$N,n_$C),0<this.referenceCount&&(n_$a&&n_$a._removeReference(),n_$C&&n_$C._addReference())},n_$C._getTexture=function(n_$N){return this._values[n_$N]},n_$C._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},n_$C._getShader=function(n_$N,n_$C,n_$a){var n_$u=(n_$N|n_$C)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(n_$u,n_$a,this._shaderDefineValue),this._shader},n_$C._setRenderStateBlendDepth=function(){var n_$N=n_$_.mainContext;switch(n_$d.setDepthMask(n_$N,this.depthWrite),0===this.depthTest?n_$d.setDepthTest(n_$N,!1):(n_$d.setDepthTest(n_$N,!0),n_$d.setDepthFunc(n_$N,this.depthTest)),this.blend){case 0:n_$d.setBlend(n_$N,!1);break;case 1:n_$d.setBlend(n_$N,!0),n_$d.setBlendFunc(n_$N,this.srcBlend,this.dstBlend);break;case 2:n_$d.setBlend(n_$N,!0)}},n_$C._setRenderStateFrontFace=function(n_$N,n_$C){var n_$a=n_$_.mainContext,n_$u=0;switch(this.cull){case 0:n_$d.setCullFace(n_$a,!1);break;case 1:n_$d.setCullFace(n_$a,!0),n_$u=n_$N?n_$C&&n_$C._isFrontFaceInvert?2305:2304:n_$C&&n_$C._isFrontFaceInvert?2304:2305,n_$d.setFrontFace(n_$a,n_$u);break;case 2:n_$d.setCullFace(n_$a,!0),n_$u=n_$N?n_$C&&n_$C._isFrontFaceInvert?2304:2305:n_$C&&n_$C._isFrontFaceInvert?2305:2304,n_$d.setFrontFace(n_$a,n_$u)}},n_$C.onAsynLoaded=function(n_$N,n_$C,n_$a){var n_$u=n_$C[0],n_$e=n_$C[1];switch(n_$u.version){case"LAYAMATERIAL:01":var n_$J=0,n_$M=0,n_$n=n_$u.props;for(var n_$V in n_$n)switch(n_$V){case"vectors":var n_$A=n_$n[n_$V];for(n_$J=0,n_$M=n_$A.length;n_$J<n_$M;n_$J++){var n_$P=n_$A[n_$J],n_$$=n_$P.value;switch(n_$$.length){case 2:this[n_$P.name]=new n_$JC(n_$$[0],n_$$[1]);break;case 3:this[n_$P.name]=new n_$MC(n_$$[0],n_$$[1],n_$$[2]);break;case 4:this[n_$P.name]=new n_$nC(n_$$[0],n_$$[1],n_$$[2],n_$$[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var n_$O=n_$n[n_$V];for(n_$J=0,n_$M=n_$O.length;n_$J<n_$M;n_$J++){var n_$G=n_$O[n_$J],n_$z=n_$G.path;n_$z&&(this[n_$G.name]=n_$g.getRes(n_$e[n_$z]))}break;case"defines":var n_$f=n_$n[n_$V];for(n_$J=0,n_$M=n_$f.length;n_$J<n_$M;n_$J++){var n_$t=this._shaderCompile.getMaterialDefineByName(n_$f[n_$J]);this._addShaderDefine(n_$t)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[n_$V]=n_$n[n_$V];break;case"renderQueue":switch(n_$n[n_$V]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[n_$V]=n_$n[n_$V]}break;case"LAYAMATERIAL:02":for(n_$V in n_$n=n_$u.props)switch(n_$V){case"vectors":for(n_$J=0,n_$M=(n_$A=n_$n[n_$V]).length;n_$J<n_$M;n_$J++)switch((n_$$=(n_$P=n_$A[n_$J]).value).length){case 2:this[n_$P.name]=new n_$JC(n_$$[0],n_$$[1]);break;case 3:this[n_$P.name]=new n_$MC(n_$$[0],n_$$[1],n_$$[2]);break;case 4:this[n_$P.name]=new n_$nC(n_$$[0],n_$$[1],n_$$[2],n_$$[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(n_$J=0,n_$M=(n_$O=n_$n[n_$V]).length;n_$J<n_$M;n_$J++)(n_$z=(n_$G=n_$O[n_$J]).path)&&(this[n_$G.name]=n_$g.getRes(n_$e[n_$z]));break;case"defines":for(n_$J=0,n_$M=(n_$f=n_$n[n_$V]).length;n_$J<n_$M;n_$J++)n_$t=this._shaderCompile.getMaterialDefineByName(n_$f[n_$J]),this._addShaderDefine(n_$t);break;default:this[n_$V]=n_$n[n_$V]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},n_$C._addReference=function(){n_$u.prototype._addReference.call(this);for(var n_$N=0,n_$C=this._values.length;n_$N<n_$C;n_$N++){var n_$a=this._values[n_$N];n_$a&&n_$a instanceof laya.d3.resource.BaseTexture&&n_$a._addReference()}},n_$C._removeReference=function(){n_$u.prototype._removeReference.call(this);for(var n_$N=0,n_$C=this._values.length;n_$N<n_$C;n_$N++){var n_$a=this._values[n_$N];n_$a&&n_$a instanceof laya.d3.resource.BaseTexture&&n_$a._removeReference()}},n_$C.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},n_$C.setShaderName=function(n_$N){var n_$C=n_$yC.nameKey.getID(n_$N);if(-1===n_$C)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=n_$EC._preCompileShader[n_$C]},n_$C.cloneTo=function(n_$N){var n_$C=n_$N;n_$C.name=this.name,n_$C.cull=this.cull,n_$C.blend=this.blend,n_$C.srcBlend=this.srcBlend,n_$C.dstBlend=this.dstBlend,n_$C.srcBlendRGB=this.srcBlendRGB,n_$C.dstBlendRGB=this.dstBlendRGB,n_$C.srcBlendAlpha=this.srcBlendAlpha,n_$C.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(n_$C.blendConstColor),n_$C.blendEquation=this.blendEquation,n_$C.blendEquationRGB=this.blendEquationRGB,n_$C.blendEquationAlpha=this.blendEquationAlpha,n_$C.depthTest=this.depthTest,n_$C.depthWrite=this.depthWrite,n_$C.renderQueue=this.renderQueue,n_$C._shader=this._shader,n_$C._disablePublicShaderDefine=this._disablePublicShaderDefine,n_$C._shaderDefineValue=this._shaderDefineValue;var n_$a,n_$u=0,n_$e=n_$C._shaderValues;n_$C._shaderValues.data.length=this._shaderValues.data.length;var n_$J=this._values.length,n_$M=n_$C._values;for(n_$u=0,n_$a=n_$M.length=n_$J;n_$u<n_$a;n_$u++){var n_$n=this._values[n_$u];if(n_$n)if("number"==typeof n_$n)n_$M[n_$u]=n_$n,n_$e.data[n_$u]=n_$n;else if("number"==typeof n_$n&&Math.floor(n_$n)==n_$n)n_$M[n_$u]=n_$n,n_$e.data[n_$u]=n_$n;else if("boolean"==typeof n_$n)n_$M[n_$u]=n_$n,n_$e.data[n_$u]=n_$n;else if(n_$n instanceof laya.d3.math.Vector2){var n_$V=n_$M[n_$u]||(n_$M[n_$u]=new n_$JC);n_$n.cloneTo(n_$V),n_$e.data[n_$u]=n_$V.elements}else if(n_$n instanceof laya.d3.math.Vector3){var n_$A=n_$M[n_$u]||(n_$M[n_$u]=new n_$MC);n_$n.cloneTo(n_$A),n_$e.data[n_$u]=n_$A.elements}else if(n_$n instanceof laya.d3.math.Vector4){var n_$P=n_$M[n_$u]||(n_$M[n_$u]=new n_$nC);n_$n.cloneTo(n_$P),n_$e.data[n_$u]=n_$P.elements}else if(n_$n instanceof laya.d3.math.Matrix4x4){var n_$$=n_$M[n_$u]||(n_$M[n_$u]=new n_$NC);n_$n.cloneTo(n_$$),n_$e.data[n_$u]=n_$$.elements}else n_$n instanceof laya.d3.resource.BaseTexture&&(n_$M[n_$u]=n_$n,n_$e.data[n_$u]=n_$n)}},n_$C.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$z(0,n_$C,"alphaTestValue",function(){return this._getNumber(0)},function(n_$N){this._setNumber(0,n_$N)}),n_$z(0,n_$C,"alphaTest",function(){return this._alphaTest},function(n_$N){(this._alphaTest=n_$N)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),n_$N.__init__=function(){n_$N.SHADERDEFINE_ALPHATEST=n_$N.shaderDefines.registerDefine("ALPHATEST")},n_$N.RENDERQUEUE_OPAQUE=2e3,n_$N.RENDERQUEUE_ALPHATEST=2450,n_$N.RENDERQUEUE_TRANSPARENT=3e3,n_$N.CULL_NONE=0,n_$N.CULL_FRONT=1,n_$N.CULL_BACK=2,n_$N.BLEND_DISABLE=0,n_$N.BLEND_ENABLE_ALL=1,n_$N.BLEND_ENABLE_SEPERATE=2,n_$N.BLENDPARAM_ZERO=0,n_$N.BLENDPARAM_ONE=1,n_$N.BLENDPARAM_SRC_COLOR=768,n_$N.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,n_$N.BLENDPARAM_DST_COLOR=774,n_$N.BLENDPARAM_ONE_MINUS_DST_COLOR=775,n_$N.BLENDPARAM_SRC_ALPHA=770,n_$N.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,n_$N.BLENDPARAM_DST_ALPHA=772,n_$N.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,n_$N.BLENDPARAM_SRC_ALPHA_SATURATE=776,n_$N.BLENDEQUATION_ADD=0,n_$N.BLENDEQUATION_SUBTRACT=1,n_$N.BLENDEQUATION_REVERSE_SUBTRACT=2,n_$N.DEPTHTEST_OFF=0,n_$N.DEPTHTEST_NEVER=512,n_$N.DEPTHTEST_LESS=513,n_$N.DEPTHTEST_EQUAL=514,n_$N.DEPTHTEST_LEQUAL=515,n_$N.DEPTHTEST_GREATER=516,n_$N.DEPTHTEST_NOTEQUAL=517,n_$N.DEPTHTEST_GEQUAL=518,n_$N.DEPTHTEST_ALWAYS=519,n_$N.SHADERDEFINE_ALPHATEST=1,n_$N.ALPHATESTVALUE=0,n_$$(n_$N,["shaderDefines",function(){return this.shaderDefines=new n_$PC}]),n_$N}(n_$t),n_$_C=function(n_$N){function n_$C(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,n_$C.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}n_$G(n_$C,"laya.d3.resource.BaseTexture",n_$t);var n_$a=n_$C.prototype;return n_$z(0,n_$a,"width",function(){return this._width}),n_$z(0,n_$a,"repeat",function(){return this._repeat},function(n_$N){if(this._repeat!==n_$N&&(this._repeat=n_$N,this._source)){var n_$C=n_$_.mainContext;n_$d.bindTexture(n_$C,this._type,this._source),n_$v.isPOT(this._width,this._height)&&this._repeat?(n_$C.texParameteri(this._type,10242,10497),n_$C.texParameteri(this._type,10243,10497)):(n_$C.texParameteri(this._type,10242,33071),n_$C.texParameteri(this._type,10243,33071))}}),n_$z(0,n_$a,"height",function(){return this._height}),n_$z(0,n_$a,"magFifter",function(){return this._magFifter},function(n_$N){(this._magFifter=n_$N)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(n_$N)}),n_$z(0,n_$a,"wrapModeV",function(){return this._wrapModeV}),n_$z(0,n_$a,"size",function(){return this._size}),n_$z(0,n_$a,"wrapModeU",function(){return this._wrapModeU}),n_$z(0,n_$a,"mipmap",function(){return this._mipmap},function(n_$N){this._mipmap=n_$N,this._mipmap!=n_$N&&this._conchTexture&&this._conchTexture.setMipMap(n_$N)}),n_$z(0,n_$a,"minFifter",function(){return this._minFifter},function(n_$N){this._minFifter=n_$N,this._minFifter!=n_$N&&this._conchTexture&&this._conchTexture.setMinFifter(n_$N)}),n_$z(0,n_$a,"format",function(){return this._format}),n_$z(0,n_$a,"source",function(){return this.activeResource(),this._source}),n_$z(0,n_$a,"defaulteTexture",function(){return n_$KC.grayTexture}),n_$C.WARPMODE_REPEAT=0,n_$C.WARPMODE_CLAMP=1,n_$C}(),n_$dC=function(n_$N){function n_$C(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,n_$C.__super.call(this),this._boundingBoxCorners=n_$u(8,null)}n_$G(n_$C,"laya.d3.resource.models.BaseMesh",n_$t);var n_$a=n_$C.prototype;return n_$a._getPositions=function(){throw new Error("未Override,请重载该属性！")},n_$a._generateBoundingObject=function(){this._boundingSphere=new n_$ZN(new n_$MC,0),n_$ZN.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new n_$HN(new n_$MC,new n_$MC),n_$HN.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},n_$a.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},n_$a.getRenderElement=function(n_$N){throw new Error("未Override,请重载该属性！")},n_$z(0,n_$a,"subMeshCount",function(){return this._subMeshCount}),n_$z(0,n_$a,"boundingBox",function(){return this._boundingBox}),n_$z(0,n_$a,"boundingBoxCorners",function(){return this._boundingBoxCorners}),n_$z(0,n_$a,"boundingSphere",function(){return this._boundingSphere}),n_$C}(),n_$QC=(function(n_$N){function n_$C(){n_$C.__super.call(this)}n_$G(n_$C,"laya.d3.component.Script",n_$WC);var n_$a=n_$C.prototype;n_$a.onTriggerEnter=function(n_$N){},n_$a.onTriggerExit=function(n_$N){},n_$a.onTriggerStay=function(n_$N){},n_$z(0,n_$a,"isSingleton",function(){return n_$C._isSingleton}),n_$C._isSingleton=!1}(),function(n_$N){function n_$C(n_$N){this._owner=null,this._sharedMesh=null,n_$C.__super.call(this),this._owner=n_$N}n_$G(n_$C,"laya.d3.core.MeshFilter",n_$N);var n_$a=n_$C.prototype;return n_$a._sharedMeshLoaded=function(){this.event("loaded")},n_$a._destroy=function(){n_$N.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},n_$z(0,n_$a,"sharedMesh",function(){return this._sharedMesh},function(n_$N){var n_$C=this._sharedMesh;n_$C&&n_$C._removeReference(),(this._sharedMesh=n_$N)._addReference(),this.event("meshchanged",[this,n_$C,n_$N]),n_$N.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),n_$z(0,n_$a,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),n_$z(0,n_$a,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),n_$z(0,n_$a,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),n_$z(0,n_$a,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),n_$C}(n_$vC)),n_$lC=function(n_$N){function n_$C(n_$N){n_$C.__super.call(this,n_$N),n_$N.meshFilter.on("meshchanged",this,this._onMeshChanged)}n_$G(n_$C,"laya.d3.core.MeshRender",n_$XC);var n_$a=n_$C.prototype;return n_$a._onMeshChanged=function(n_$N,n_$C,n_$a){n_$a.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:n_$a.once("loaded",this,this._onMeshLoaed)},n_$a._onMeshLoaed=function(n_$N,n_$C){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},n_$a._calculateBoundingSphereByInitSphere=function(n_$N){var n_$C=NaN,n_$a=this._owner.transform,n_$u=n_$a.scale.elements,n_$e=Math.abs(n_$u[0]),n_$J=Math.abs(n_$u[1]),n_$M=Math.abs(n_$u[2]);n_$C=n_$J<=n_$e&&n_$M<=n_$e?n_$e:n_$M<=n_$J?n_$J:n_$M,n_$MC.transformCoordinate(n_$N.center,n_$a.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=n_$N.radius*n_$C},n_$a._calculateBoundBoxByInitCorners=function(n_$N){for(var n_$C=this._owner.transform.worldMatrix,n_$a=0;n_$a<8;n_$a++)n_$MC.transformCoordinate(n_$N[n_$a],n_$C,n_$XC._tempBoundBoxCorners[n_$a]);n_$HN.createfromPoints(n_$XC._tempBoundBoxCorners,this._boundingBox)},n_$a._calculateBoundingSphere=function(){var n_$N=this._owner.meshFilter.sharedMesh;null==n_$N||null==n_$N.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(n_$N.boundingSphere)},n_$a._calculateBoundingBox=function(){var n_$N=this._owner.meshFilter.sharedMesh;null==n_$N||null==n_$N.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(n_$N.boundingBoxCorners)},n_$a._renderUpdate=function(n_$N){var n_$C=this._owner.transform;if(n_$C){this._setShaderValueMatrix4x4(0,n_$C.worldMatrix);var n_$a=this._owner.getProjectionViewWorldMatrix(n_$N);this._setShaderValueMatrix4x4(1,n_$a)}else this._setShaderValueMatrix4x4(0,n_$NC.DEFAULT),this._setShaderValueMatrix4x4(1,n_$N);return n_$gC.debugMode&&this._renderRenderableBoundBox(),!0},n_$C}(),n_$iC=function(n_$C){function n_$u(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,n_$u.__super.call(this),this._renderState=new n_$o,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new n_$OC,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new n_$CN,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new n_$MC(.7,.7,.7),this.ambientColor=new n_$MC(.212,.227,.259),n_$_.shaderHighPrecision&&this.addShaderDefine(n_$EC.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}n_$G(n_$u,"laya.d3.core.scene.Scene",n_$C);var n_$N=n_$u.prototype;return n_$X.imps(n_$N,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),n_$N._setUrl=function(n_$N){this._url=n_$N},n_$N._getGroup=function(){return this._group},n_$N._setGroup=function(n_$N){this._group=n_$N},n_$N._display=function(){n_$X.stage._scenes.push(this),n_$X.stage._scenes.sort(n_$u._sortScenes);for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++){var n_$a=this._childs[n_$N];n_$a.active&&n_$a._activeHierarchy()}},n_$N._unDisplay=function(){var n_$N=n_$X.stage._scenes;n_$N.splice(n_$N.indexOf(this),1);for(var n_$C=0,n_$a=this._childs.length;n_$C<n_$a;n_$C++){var n_$u=this._childs[n_$C];n_$u.active&&n_$u._inActiveHierarchy()}},n_$N._addChild3D=function(n_$N){n_$N.transform._onWorldTransform(),n_$N._setBelongScene(this),this.displayedInStage&&n_$N.active&&n_$N._activeHierarchy()},n_$N._removeChild3D=function(n_$N){n_$N.transform.parent=null,this.displayedInStage&&n_$N.active&&n_$N._inActiveHierarchy(),n_$N._setUnBelongScene()},n_$N.initOctree=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$e&&(n_$e=6),this.treeSize=new n_$MC(n_$N,n_$C,n_$a),this.treeLevel=n_$e,this.treeRoot=new n_$H(this,0),this.treeRoot.init(n_$u,this.treeSize)},n_$N._prepareUpdateToRenderState=function(n_$N,n_$C){n_$C.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,n_$C.scene=this},n_$N._prepareSceneToRender=function(n_$N){var n_$C=this._lights.length;if(0<n_$C)for(var n_$a=0,n_$u=0;n_$u<n_$C&&!(this._lights[n_$u]._prepareToScene(n_$N)&&++n_$a>=this._enableLightCount);n_$u++);},n_$N._updateChilds=function(n_$N){for(var n_$C=0,n_$a=this._childs.length;n_$C<n_$a;++n_$C)this._childs[n_$C]._update(n_$N)},n_$N._preRenderScene=function(n_$N,n_$C,n_$a){var n_$u,n_$e=n_$C._viewMatrix,n_$J=n_$C._projectionMatrix,n_$M=n_$C._projectionViewMatrix,n_$n=0,n_$V=n_$C.camera;for(n_$V.useOcclusionCulling?this.treeRoot?n_$aN.renderObjectCullingOctree(n_$a,this,n_$V,n_$e,n_$J,n_$M):n_$aN.renderObjectCulling(n_$a,this,n_$V,n_$e,n_$J,n_$M):n_$aN.renderObjectCullingNoBoundFrustum(this,n_$V,n_$e,n_$J,n_$M),n_$n=0,n_$u=this._quenes.length;n_$n<n_$u;n_$n++)this._quenes[n_$n]&&this._quenes[n_$n]._preRender(n_$C)},n_$N._clear=function(n_$N,n_$C){var n_$a=n_$C._viewport,n_$u=n_$C.camera,n_$e=n_$a.x,n_$J=n_$u.renderTargetSize.height-n_$a.y-n_$a.height,n_$M=n_$a.width,n_$n=n_$a.height;n_$N.viewport(n_$e,n_$J,n_$M,n_$n);var n_$V=256,n_$A=n_$u.renderTarget;switch(n_$u.clearFlag){case 0:var n_$P=n_$u.clearColor;if(n_$P){n_$N.enable(3089),n_$N.scissor(n_$e,n_$J,n_$M,n_$n);var n_$$=n_$P.elements;n_$N.clearColor(n_$$[0],n_$$[1],n_$$[2],n_$$[3]),n_$V|=16384}if(n_$A)switch(n_$P||(n_$V=16384),n_$A.depthStencilFormat){case 33189:n_$V|=256;break;case 36168:n_$V|=1024;break;case 34041:n_$V|=256,n_$V|=1024}n_$N.clear(n_$V),n_$P&&n_$N.disable(3089);break;case 1:case 2:if(n_$A)switch(n_$V=16384,n_$A.depthStencilFormat){case 33189:n_$V|=256;break;case 36168:n_$V|=1024;break;case 34041:n_$V|=256,n_$V|=1024}n_$N.clear(n_$V);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},n_$N._renderScene=function(n_$N,n_$C){var n_$a,n_$u,n_$e=n_$C.camera,n_$J=0;for(n_$J=0;n_$J<2;n_$J++)(n_$u=this._quenes[n_$J])&&(n_$e.renderTarget?n_$u._render(n_$C,!0):n_$u._render(n_$C,!1));if(1===n_$e.clearFlag){var n_$M=n_$e.sky;n_$M&&(n_$d.setCullFace(n_$N,!1),n_$d.setDepthFunc(n_$N,515),n_$d.setDepthMask(n_$N,!1),n_$M._render(n_$C),n_$d.setDepthFunc(n_$N,513),n_$d.setDepthMask(n_$N,!0))}for(n_$J=2,n_$a=this._quenes.length;n_$J<n_$a;n_$J++)(n_$u=this._quenes[n_$J])&&(n_$u._sortAlpha(n_$C.camera.transform.position),n_$e.renderTarget?n_$u._render(n_$C,!0):n_$u._render(n_$C,!1))},n_$N._set3DRenderConfig=function(n_$N){n_$N.disable(3042),n_$d._blend=!1,n_$N.blendFunc(770,771),n_$d._sFactor=770,n_$d._dFactor=771,n_$N.disable(2929),n_$d._depthTest=!1,n_$N.enable(2884),n_$d._cullFace=!0,n_$N.depthMask(1),n_$d._depthMask=!0,n_$N.frontFace(2304),n_$d._frontFace=2304},n_$N._set2DRenderConfig=function(n_$N){n_$d.setBlend(n_$N,!0),n_$d.setBlendFunc(n_$N,1,771),n_$d.setDepthTest(n_$N,!1),n_$d.setCullFace(n_$N,!1),n_$d.setDepthMask(n_$N,!0),n_$d.setFrontFace(n_$N,2305),n_$N.viewport(0,0,n_$P.width,n_$P.height)},n_$N._parseCustomProps=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$u.customProps.lightmaps,n_$J=n_$e.length,n_$M=this._lightmaps;n_$M.length=n_$J;for(var n_$n=0;n_$n<n_$J;n_$n++)n_$M[n_$n]=n_$g.getRes(n_$C[n_$e[n_$n].replace(".exr",".png")]);this.setlightmaps(n_$M);var n_$V=n_$u.customProps.ambientColor;n_$V&&(this.ambientColor=new n_$MC(n_$V[0],n_$V[1],n_$V[2]));var n_$A=n_$u.customProps.fogColor;n_$A&&(this.fogColor=new n_$MC(n_$A[0],n_$A[1],n_$A[2]))},n_$N._addLight=function(n_$N){this._lights.indexOf(n_$N)<0&&this._lights.push(n_$N)},n_$N._removeLight=function(n_$N){var n_$C=this._lights.indexOf(n_$N);0<=n_$C&&this._lights.splice(n_$C,1)},n_$N._updateScene=function(){var n_$N=this._renderState;this._prepareUpdateToRenderState(n_$_.mainContext,n_$N),this._updateComponents(n_$N),this._updateChilds(n_$N),this._lateUpdateComponents(n_$N),this._time+=n_$N.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},n_$N._updateSceneConch=function(){var n_$N=this._renderState;this._prepareUpdateToRenderState(n_$_.mainContext,n_$N),this._updateComponents(n_$N),this._lateUpdateComponents(n_$N),this._prepareSceneToRender(n_$N);for(var n_$C=0,n_$a=this._cameraPool.length;n_$C<n_$a;n_$C++){var n_$u=this._cameraPool[n_$C];(n_$N.camera=n_$u)._prepareCameraToRender()}},n_$N._preRenderShadow=function(n_$N,n_$C,n_$a,n_$u,n_$e){this.treeRoot?n_$aN.renderShadowObjectCullingOctree(this,n_$C,n_$a,n_$u,n_$e):n_$aN.renderShadowObjectCulling(this,n_$C,n_$a,n_$u,n_$e);for(var n_$J=0,n_$M=n_$a.length;n_$J<n_$M;n_$J++)n_$a[n_$J]&&n_$a[n_$J]._preRender(n_$N)},n_$N._renderShadowMap=function(n_$N,n_$C,n_$a){var n_$u=this.parallelSplitShadowMaps[0];n_$u._calcAllLightCameraInfo(n_$a);var n_$e,n_$J,n_$M,n_$n=n_$u.PSSMNum;if(this._preRenderShadow(n_$C,n_$u._lightCulling,n_$u._shadowQuenes,n_$u._lightVPMatrix[0],n_$n),this.addShaderDefine(n_$GC.SHADERDEFINE_CAST_SHADOW),1<n_$n)for(var n_$V=0;n_$V<n_$n;n_$V++)n_$e=n_$u.getRenderTarget(n_$V+1),n_$u.beginRenderTarget(n_$V+1),n_$N.clearColor(1,1,1,1),n_$N.clear(16640),n_$N.viewport(0,0,n_$e.width,n_$e.height),n_$C.camera=n_$M=n_$u.getLightCamera(n_$V),n_$M._prepareCameraToRender(),n_$M._prepareCameraViewProject(n_$M.viewMatrix,n_$M.projectionMatrix),n_$C._projectionViewMatrix=n_$u._lightVPMatrix[n_$V+1],(n_$J=n_$u._shadowQuenes[n_$V])._preRender(n_$C),n_$J._renderShadow(n_$C,!1),n_$u.endRenderTarget(n_$V+1);else n_$e=n_$u.getRenderTarget(1),n_$u.beginRenderTarget(1),n_$N.clearColor(1,1,1,1),n_$N.clear(16640),n_$N.viewport(0,0,n_$e.width,n_$e.height),n_$C.camera=n_$M=n_$u.getLightCamera(0),n_$M._prepareCameraToRender(),n_$M._prepareCameraViewProject(n_$M.viewMatrix,n_$M.projectionMatrix),n_$C._projectionViewMatrix=n_$u._lightVPMatrix[0],(n_$J=n_$u._shadowQuenes[0])._preRender(n_$C),n_$J._renderShadow(n_$C,!0),n_$u.endRenderTarget(1);this.removeShaderDefine(n_$GC.SHADERDEFINE_CAST_SHADOW)},n_$N.addTreeNode=function(n_$N){this.treeRoot.addTreeNode(n_$N)},n_$N.removeTreeNode=function(n_$N){this.treeSize&&n_$N._treeNode&&n_$N._treeNode.removeObject(n_$N)},n_$N.setlightmaps=function(n_$N){this._lightmaps=n_$N;for(var n_$C=0,n_$a=this._renderableSprite3Ds.length;n_$C<n_$a;n_$C++)this._renderableSprite3Ds[n_$C]._render._applyLightMapParams()},n_$N.getlightmaps=function(){return this._lightmaps},n_$N.addChildAt=function(n_$N,n_$C){if(!(n_$N instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(n_$N&&n_$N.__className));if(!n_$N||this.destroyed||n_$N===this)return n_$N;if(n_$N.zOrder&&this._set$P("hasZorder",!0),0<=n_$C&&n_$C<=this._childs.length){if(n_$N._parent===this){var n_$a=this.getChildIndex(n_$N);this._childs.splice(n_$a,1),this._childs.splice(n_$C,0,n_$N),this.conchModel&&(this.conchModel.removeChild(n_$N.conchModel),this.conchModel.addChildAt(n_$N.conchModel,n_$C)),this._childChanged()}else n_$N.parent&&n_$N.parent.removeChild(n_$N),this._childs===n_$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(n_$C,0,n_$N),this.conchModel&&this.conchModel.addChildAt(n_$N.conchModel,n_$C),(n_$N.parent=this)._addChild3D(n_$N);return n_$N}throw new Error("appendChildAt:The index is out of bounds")},n_$N.addChild=function(n_$N){if(!(n_$N instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!n_$N||this.destroyed||n_$N===this)return n_$N;if(n_$N.zOrder&&this._set$P("hasZorder",!0),n_$N._parent===this){var n_$C=this.getChildIndex(n_$N);n_$C!==this._childs.length-1&&(this._childs.splice(n_$C,1),this._childs.push(n_$N),this.conchModel&&(this.conchModel.removeChild(n_$N.conchModel),this.conchModel.addChildAt(n_$N.conchModel,this._childs.length-1)),this._childChanged())}else n_$N.parent&&n_$N.parent.removeChild(n_$N),this._childs===n_$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(n_$N),this.conchModel&&this.conchModel.addChildAt(n_$N.conchModel,this._childs.length-1),(n_$N.parent=this)._childChanged(),this._addChild3D(n_$N);return n_$N},n_$N.removeChildAt=function(n_$N){var n_$C=this.getChildAt(n_$N);return n_$C&&(this._removeChild3D(n_$C),this._childs.splice(n_$N,1),this.conchModel&&this.conchModel.removeChild(n_$C.conchModel),n_$C.parent=null),n_$C},n_$N.removeChildren=function(n_$N,n_$C){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=2147483647),this._childs&&0<this._childs.length){var n_$a=this._childs;if(0===n_$N&&n_$J<=n_$C){var n_$u=n_$a;this._childs=n_$A.ARRAY_EMPTY}else n_$u=n_$a.splice(n_$N,n_$C-n_$N);for(var n_$e=0,n_$J=n_$u.length;n_$e<n_$J;n_$e++)this._removeChild3D(n_$u[n_$e]),n_$u[n_$e].parent=null,this.conchModel&&this.conchModel.removeChild(n_$u[n_$e].conchModel)}return this},n_$N.addFrustumCullingObject=function(n_$N){this.treeRoot?this.addTreeNode(n_$N):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(n_$N):this._cullingRenders[this._cullingRendersLength]=n_$N,n_$N._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},n_$N.removeFrustumCullingObject=function(n_$N){if(this.treeRoot)this.removeTreeNode(n_$N);else{this._cullingRendersLength--;var n_$C=n_$N._indexInSceneFrustumCullingObjects;if(n_$C!==this._cullingRendersLength){var n_$a=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[n_$C]=n_$a)._indexInSceneFrustumCullingObjects=n_$C,n_$N._indexInSceneFrustumCullingObjects=-1}}},n_$N.getRenderQueue=function(n_$N){return n_$N<3e3?this._quenes[1]||(this._quenes[1]=new n_$b(this)):this._quenes[2]||(this._quenes[2]=new n_$b(this))},n_$N.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new n_$b(this)},n_$N.addShaderDefine=function(n_$N){this._shaderDefineValue|=n_$N},n_$N.removeShaderDefine=function(n_$N){this._shaderDefineValue&=~n_$N},n_$N.addScript=function(n_$N){return this._addComponent(n_$N)},n_$N.getScriptByType=function(n_$N,n_$C){return void 0===n_$C&&(n_$C=0),this._getComponentByType(n_$N,n_$C)},n_$N.getScriptsByType=function(n_$N,n_$C){this._getComponentsByType(n_$N,n_$C)},n_$N.getScriptByIndex=function(n_$N){return this._getComponentByIndex(n_$N)},n_$N.removeScriptByType=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0),this._removeComponentByType(n_$N,n_$C)},n_$N.removeScriptsByType=function(n_$N){this._removeComponentByType(n_$N)},n_$N.removeAllScript=function(){this._removeAllComponent()},n_$N.render=function(n_$N,n_$C,n_$a){(n_$f._context.ctx._renderKey=0)<this._childs.length&&n_$N.addRenderObject(this)},n_$N.renderSubmit=function(){var n_$N=n_$_.mainContext,n_$C=this._renderState;this._set3DRenderConfig(n_$N),this._prepareSceneToRender(this._renderState);var n_$a,n_$u=0,n_$e=0;if(n_$gC.debugMode||n_$H.debugMode)for(n_$u=0,n_$e=this._cameraPool.length;n_$u<n_$e;n_$u++)n_$a=this._cameraPool[n_$u],n_$gC._debugPhasorSprite.begin(1,n_$a),n_$a.activeInHierarchy&&n_$a._renderCamera(n_$N,n_$C,this),n_$gC._debugPhasorSprite.end();else for(n_$u=0,n_$e=this._cameraPool.length;n_$u<n_$e;n_$u++)(n_$a=this._cameraPool[n_$u]).activeInHierarchy&&n_$a._renderCamera(n_$N,n_$C,this);return this._set2DRenderConfig(n_$N),1},n_$N.onAsynLoaded=function(n_$N,n_$C,n_$a){var n_$u=n_$C[0];if("Scene"!==n_$u.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var n_$e=n_$C[1];n_$tC._createNodeByJson(this,n_$u,this,n_$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this.destroyed||(n_$C.prototype.destroy.call(this,n_$N),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,n_$g.clearRes(this.url),this.loaded||n_$gC._cancelLoadByUrl(this.url))},n_$N.getRenderType=function(){return 0},n_$N.releaseRender=function(){},n_$N._addComponent=function(n_$N){var n_$C,n_$a=this._componentsMap.indexOf(n_$N);if(-1===n_$a)n_$C=[],this._componentsMap.push(n_$N),this._typeComponentsIndices.push(n_$C);else if(n_$C=this._typeComponentsIndices[n_$a],this._components[n_$C[0]].isSingleton)throw new Error("无法单实例创建"+n_$N+"组件，"+n_$N+"组件已存在！");var n_$u=n_$e.getInstance(n_$N);n_$C.push(this._components.length),this._components.push(n_$u);return n_$u._initialize(this),n_$u},n_$N._removeComponent=function(n_$N,n_$C){var n_$a=this._typeComponentsIndices[n_$N],n_$u=n_$a[n_$C],n_$e=this._components[n_$u];this._components.splice(n_$u,1),n_$a.splice(n_$C,1),0===n_$a.length&&(this._typeComponentsIndices.splice(n_$N,1),this._componentsMap.splice(n_$N,1));for(var n_$J=0,n_$M=this._componentsMap.length;n_$J<n_$M;n_$J++)for(var n_$n=(n_$a=this._typeComponentsIndices[n_$J]).length-1;0<=n_$n;n_$n--){var n_$V=n_$a[n_$n];if(!(n_$u<n_$V))break;n_$a[n_$n]=--n_$V}n_$e._destroy()},n_$N._getComponentByType=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0);var n_$a=this._componentsMap.indexOf(n_$N);return-1===n_$a?null:this._components[this._typeComponentsIndices[n_$a][n_$C]]},n_$N._getComponentsByType=function(n_$N,n_$C){var n_$a=this._componentsMap.indexOf(n_$N);if(-1!==n_$a){var n_$u=this._typeComponentsIndices[n_$a],n_$e=n_$u.length;n_$C.length=n_$e;for(var n_$J=0;n_$J<n_$e;n_$J++)n_$C[n_$J]=this._components[n_$u[n_$J]]}else n_$C.length=0},n_$N._getComponentByIndex=function(n_$N){return this._components[n_$N]},n_$N._removeComponentByType=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0);var n_$a=this._componentsMap.indexOf(n_$N);-1!==n_$a&&this._removeComponent(n_$a,n_$C)},n_$N._removeComponentsByType=function(n_$N){var n_$C=this._componentsMap.indexOf(n_$N);if(-1!==n_$C)for(var n_$a=this._typeComponentsIndices[n_$C],n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$a.length<n_$e?n_$e--:n_$u++)this._removeComponent(n_$C,n_$u)},n_$N._removeAllComponent=function(){for(var n_$N=0,n_$C=this._componentsMap.length;n_$N<n_$C;this._componentsMap.length<n_$C?n_$C--:n_$N++)this._removeComponentsByType(this._componentsMap[n_$N])},n_$N._updateComponents=function(n_$N){for(var n_$C=0,n_$a=this._components.length;n_$C<n_$a;n_$C++){var n_$u=this._components[n_$C];!n_$u.started&&(n_$u._start(n_$N),n_$u.started=!0),n_$u.enable&&n_$u._update(n_$N)}},n_$N._lateUpdateComponents=function(n_$N){for(var n_$C=0;n_$C<this._components.length;n_$C++){var n_$a=this._components[n_$C];!n_$a.started&&(n_$a._start(n_$N),n_$a.started=!0),n_$a.enable&&n_$a._lateUpdate(n_$N)}},n_$N._preRenderUpdateComponents=function(n_$N){for(var n_$C=0;n_$C<this._components.length;n_$C++){var n_$a=this._components[n_$C];!n_$a.started&&(n_$a._start(n_$N),n_$a.started=!0),n_$a.enable&&n_$a._preRenderUpdate(n_$N)}},n_$N._postRenderUpdateComponents=function(n_$N){for(var n_$C=0;n_$C<this._components.length;n_$C++){var n_$a=this._components[n_$C];!n_$a.started&&(n_$a._start(n_$N),n_$a.started=!0),n_$a.enable&&n_$a._postRenderUpdate(n_$N)}},n_$z(0,n_$N,"_loaded",null,function(n_$N){this.__loaded=n_$N}),n_$z(0,n_$N,"fogColor",function(){return this._fogColor},function(n_$N){this._fogColor=n_$N,this._shaderValues.setValue(0,n_$N.elements)}),n_$z(0,n_$N,"enableFog",function(){return this._enableFog},function(n_$N){this._enableFog!==n_$N&&((this._enableFog=n_$N)?(this.addShaderDefine(n_$EC.SHADERDEFINE_FOG),this.removeShaderDefine(n_$EC.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(n_$EC.SHADERDEFINE_FOG))}),n_$z(0,n_$N,"url",function(){return this._url}),n_$z(0,n_$N,"loaded",function(){return this.__loaded}),n_$z(0,n_$N,"enableDepthFog",function(){return this._enableDepthFog},function(n_$N){this._enableDepthFog!=n_$N&&((this._enableDepthFog=n_$N)?(this.addShaderDefine(n_$EC.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(n_$EC.SHADERDEFINE_FOG)):this.removeShaderDefine(n_$EC.SAHDERDEFINE_DEPTHFOG))}),n_$z(0,n_$N,"fogStart",function(){return this._fogStart},function(n_$N){this._fogStart=n_$N,this._shaderValues.setValue(1,n_$N)}),n_$z(0,n_$N,"fogRange",function(){return this._fogRange},function(n_$N){this._fogRange=n_$N,this._shaderValues.setValue(2,n_$N)}),n_$z(0,n_$N,"ambientColor",function(){return this._ambientColor},function(n_$N){this._ambientColor=n_$N,this._shaderValues.setValue(21,n_$N.elements)}),n_$z(0,n_$N,"scene",function(){return this}),n_$z(0,n_$N,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),n_$u._sortScenes=function(n_$N,n_$C){if(n_$N.parent!==n_$X.stage||n_$C.parent!==n_$X.stage)return n_$N.parent!==n_$X.stage&&n_$C.parent!==n_$X.stage?n_$u._sortScenes(n_$N.parent,n_$C.parent):n_$N.parent===n_$X.stage?-1:1;var n_$a=n_$X.stage._childs;return n_$a.indexOf(n_$N)-n_$a.indexOf(n_$C)},n_$u.load=function(n_$N){return n_$X.loader.create(n_$N,null,null,n_$u)},n_$u.FOGCOLOR=0,n_$u.FOGSTART=1,n_$u.FOGRANGE=2,n_$u.LIGHTDIRECTION=3,n_$u.LIGHTDIRCOLOR=4,n_$u.POINTLIGHTPOS=5,n_$u.POINTLIGHTRANGE=6,n_$u.POINTLIGHTATTENUATION=7,n_$u.POINTLIGHTCOLOR=8,n_$u.SPOTLIGHTPOS=9,n_$u.SPOTLIGHTDIRECTION=10,n_$u.SPOTLIGHTSPOT=11,n_$u.SPOTLIGHTRANGE=12,n_$u.SPOTLIGHTATTENUATION=13,n_$u.SPOTLIGHTCOLOR=14,n_$u.SHADOWDISTANCE=15,n_$u.SHADOWLIGHTVIEWPROJECT=16,n_$u.SHADOWMAPPCFOFFSET=17,n_$u.SHADOWMAPTEXTURE1=18,n_$u.SHADOWMAPTEXTURE2=19,n_$u.SHADOWMAPTEXTURE3=20,n_$u.AMBIENTCOLOR=21,n_$u.TIME=22,n_$u}(n_$c),n_$jC=function(n_$N){function n_$C(n_$N){n_$C.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new n_$NC,this._shaderValues=new n_$OC,this._colliders=[],this._id=++n_$C._uniqueIDCounter,this._transform=new n_$rC(this),this.name=n_$N||"Sprite3D-"+n_$C._nameNumberCounter++,this.layer=n_$l.currentCreationLayer,this.active=!0}n_$G(n_$C,"laya.d3.core.Sprite3D",n_$sC);var n_$a=n_$C.prototype;return n_$X.imps(n_$a,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),n_$a._setUrl=function(n_$N){this._url=n_$N},n_$a._getGroup=function(){return this._group},n_$a._setGroup=function(n_$N){this._group=n_$N},n_$a._addChild3D=function(n_$N){n_$N.transform.parent=this.transform,this._hierarchyAnimator&&(!n_$N._hierarchyAnimator&&n_$N._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(n_$N,!0,[n_$N.name])),this._scene&&(n_$N._setBelongScene(this._scene),this._activeInHierarchy&&n_$N._active&&n_$N._activeHierarchy())},n_$a._removeChild3D=function(n_$N){n_$N.transform.parent=null,this._scene&&(this._activeInHierarchy&&n_$N._active&&n_$N._inActiveHierarchy(),n_$N._setUnBelongScene()),this._hierarchyAnimator&&(n_$N._hierarchyAnimator==this._hierarchyAnimator&&n_$N._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(n_$N,!1,[n_$N.name]))},n_$a._parseBaseCustomProps=function(n_$N){var n_$C=this.transform.localPosition;n_$N.translate?(n_$C.fromArray(n_$N.translate),n_$C.x*=100,n_$C.y*=100,n_$C.z*=100):n_$C.elements.fill(0),this.transform.localPosition=n_$C;var n_$a=this.transform.localRotation;n_$N.rotation?n_$a.fromArray(n_$N.rotation):n_$a.fromArray([0,0,0,-1]),this.transform.localRotation=n_$a;var n_$u=this.transform.localScale;n_$N.scale?n_$u.fromArray(n_$N.scale):n_$u.elements.fill(1),this.transform.localScale=n_$u;var n_$e=n_$N.layer;null!=n_$e&&(this.layer=n_$l.getLayerByNumber(n_$e))},n_$a._parseCustomComponent=function(n_$N,n_$C,n_$a){for(var n_$u in n_$a){var n_$e=n_$a[n_$u];switch(n_$u){case"Animator":var n_$J=this.addComponent(Animator);if(n_$e.avatarPath)n_$J.avatar=n_$g.getRes(n_$C[n_$e.avatarPath]);else{var n_$M=n_$e.avatar;if(n_$M){n_$J.avatar=n_$g.getRes(n_$C[n_$M.path]);var n_$n=n_$M.linkSprites;n_$n&&n_$N.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[n_$J,n_$n])}}for(var n_$V=n_$e.clipPaths,n_$A=n_$V.length,n_$P=0;n_$P<n_$A;n_$P++)n_$J.addClip(n_$g.getRes(n_$C[n_$V[n_$P]]));n_$J.clip=n_$g.getRes(n_$C[n_$V[0]]);var n_$$=n_$e.playOnWake;void 0!==n_$$&&(n_$J.playOnWake=n_$$);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var n_$O=this.addComponent(SphereCollider);n_$O.isTrigger=n_$e.isTrigger;var n_$G=n_$O.center;n_$G.fromArray(n_$e.center),n_$O.center=n_$G,n_$O.radius=n_$e.radius;break;case"BoxCollider":var n_$z=this.addComponent(BoxCollider);n_$z.isTrigger=n_$e.isTrigger,n_$z.center.fromArray(n_$e.center);var n_$f=n_$z.size;n_$f.fromArray(n_$e.size),n_$z.size=n_$f;break;case"MeshCollider":this.addComponent(MeshCollider)}}},n_$a._onRootNodeHierarchyLoaded=function(n_$N,n_$C){for(var n_$a in n_$C){for(var n_$u=this,n_$e=n_$C[n_$a],n_$J=0,n_$M=n_$e.length;n_$J<n_$M;n_$J++){var n_$n=n_$e[n_$J];if(""===n_$n)break;if(!(n_$u=n_$u.getChildByName(n_$n)))break}n_$u&&n_$N.linkSprite3DToAvatarNode(n_$a,n_$u)}},n_$a._setHierarchyAnimator=function(n_$N,n_$C){this._changeHierarchyAnimator(n_$N);for(var n_$a=0,n_$u=this._childs.length;n_$a<n_$u;n_$a++){var n_$e=this._childs[n_$a];n_$e._hierarchyAnimator==n_$C&&n_$e._setHierarchyAnimator(n_$N,n_$C)}},n_$a._clearHierarchyAnimator=function(n_$N,n_$C){this._changeHierarchyAnimator(n_$C);for(var n_$a=0,n_$u=this._childs.length;n_$a<n_$u;n_$a++){var n_$e=this._childs[n_$a];n_$e._hierarchyAnimator==n_$N&&n_$e._clearHierarchyAnimator(n_$N,n_$C)}},n_$a._getAnimatorToLinkSprite3D=function(n_$N,n_$C,n_$a){var n_$u=this.getComponentByType(Animator);if(n_$u&&(n_$u.avatar?n_$u.avatar._version||n_$N._setAnimatorToLinkAvatar(n_$u,n_$C):n_$N._setAnimatorToLinkSprite3DNoAvatar(n_$u,n_$C,n_$a)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){n_$a.unshift(this._parent.name);var n_$e=this._parent;n_$e._hierarchyAnimator&&n_$e._getAnimatorToLinkSprite3D(n_$N,n_$C,n_$a)}},n_$a._setAnimatorToLinkSprite3DNoAvatar=function(n_$N,n_$C,n_$a){var n_$u=0,n_$e=0;for(n_$u=0,n_$e=n_$N.getClipCount();n_$u<n_$e;n_$u++)n_$N._handleSpriteOwnersBySprite(n_$u,n_$C,n_$a,this);for(n_$u=0,n_$e=this._childs.length;n_$u<n_$e;n_$u++){var n_$J=this._childs[n_$u],n_$M=n_$a.length;n_$a.push(n_$J.name),n_$J._setAnimatorToLinkSprite3DNoAvatar(n_$N,n_$C,n_$a),n_$a.splice(n_$M,1)}},n_$a._changeHierarchyAnimator=function(n_$N){this._hierarchyAnimator=n_$N},n_$a._isLinkSpriteToAnimationNode=function(n_$N,n_$C,n_$a){var n_$u=n_$N._avatarNodes.indexOf(n_$C),n_$e=n_$N._cacheSpriteToNodesMap;if(n_$a)this._transform.dummy=n_$C.transform,n_$N._cacheNodesToSpriteMap[n_$u]=n_$e.length,n_$e.push(n_$u);else{this._transform.dummy=null;var n_$J=n_$N._cacheNodesToSpriteMap[n_$u];n_$N._cacheNodesToSpriteMap[n_$u]=null,n_$e.splice(n_$J,1)}},n_$a._setBelongScene=function(n_$N){this._scene=n_$N;for(var n_$C=0,n_$a=this._childs.length;n_$C<n_$a;n_$C++)this._childs[n_$C]._setBelongScene(n_$N)},n_$a._setUnBelongScene=function(){this._scene=null;for(var n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++)this._childs[n_$N]._setUnBelongScene()},n_$a._activeHierarchy=function(){var n_$N=0,n_$C=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),n_$N=0,n_$C=this._colliders.length;n_$N<n_$C;n_$N++)this._layer._addCollider(this._colliders[n_$N]);for(this.event("activeinhierarchychanged",!0),n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++){var n_$a=this._childs[n_$N];n_$a._active&&n_$a._activeHierarchy()}},n_$a._inActiveHierarchy=function(){var n_$N=0,n_$C=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),n_$N=0,n_$C=this._colliders.length;n_$N<n_$C;n_$N++){var n_$a=this._colliders[n_$N];n_$a._clearCollsionMap(),this._layer._removeCollider(n_$a)}for(this.event("activeinhierarchychanged",!1),n_$N=0,n_$C=this._childs.length;n_$N<n_$C;n_$N++){var n_$u=this._childs[n_$N];n_$u._active&&n_$u._inActiveHierarchy()}},n_$a.addComponent=function(n_$N){var n_$C,n_$a=this._componentsMap.indexOf(n_$N);if(-1===n_$a)n_$C=[],this._componentsMap.push(n_$N),this._typeComponentsIndices.push(n_$C);else if(n_$C=this._typeComponentsIndices[n_$a],this._components[n_$C[0]].isSingleton)throw new Error("无法单实例创建"+n_$N+"组件，"+n_$N+"组件已存在！");var n_$u=n_$e.getInstance(n_$N);return n_$C.push(this._components.length),this._components.push(n_$u),n_$u instanceof laya.d3.component.Script&&this._scripts.push(n_$u),n_$u._initialize(this),n_$u},n_$a._removeComponent=function(n_$N,n_$C){var n_$a,n_$u=0,n_$e=this._typeComponentsIndices[n_$N],n_$J=n_$e[n_$C],n_$M=this._components[n_$J];for(n_$M instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(n_$M),1),n_$e.splice(n_$C,1),0===n_$e.length&&(this._typeComponentsIndices.splice(n_$N,1),this._componentsMap.splice(n_$N,1)),n_$u=0,n_$a=this._componentsMap.length;n_$u<n_$a;n_$u++)for(var n_$n=(n_$e=this._typeComponentsIndices[n_$u]).length-1;0<=n_$n;n_$n--){var n_$V=n_$e[n_$n];if(!(n_$J<n_$V))break;n_$e[n_$n]=--n_$V}n_$M._destroy()},n_$a._clearSelfRenderObjects=function(){},n_$a._addSelfRenderObjects=function(){},n_$a._parseCustomProps=function(n_$N,n_$C,n_$a,n_$u){},n_$a._updateChilds=function(n_$N){var n_$C=this._childs.length;if(0!==n_$C)for(var n_$a=0;n_$a<n_$C;++n_$a)this._childs[n_$a]._update(n_$N)},n_$a._getSortID=function(n_$N,n_$C){return 1e3*n_$C.id+n_$N._getVertexBuffer().vertexDeclaration.id},n_$a._update=function(n_$N){(n_$N.owner=this)._activeInHierarchy&&(this._updateComponents(n_$N),this._lateUpdateComponents(n_$N),n_$E.spriteCount++,this._childs.length&&this._updateChilds(n_$N))},n_$a.getProjectionViewWorldMatrix=function(n_$N){return n_$NC.multiply(n_$N,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},n_$a.loadHierarchy=function(n_$N){this.addChild(laya.d3.core.Sprite3D.load(n_$N))},n_$a.addChildAt=function(n_$N,n_$C){if(!(n_$N instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!n_$N||this.destroyed||n_$N===this)return n_$N;if(n_$N.zOrder&&this._set$P("hasZorder",!0),0<=n_$C&&n_$C<=this._childs.length){if(n_$N._parent===this){var n_$a=this.getChildIndex(n_$N);this._childs.splice(n_$a,1),this._childs.splice(n_$C,0,n_$N),this.conchModel&&(this.conchModel.removeChild(n_$N.conchModel),this.conchModel.addChildAt(n_$N.conchModel,n_$C)),this._childChanged()}else n_$N.parent&&n_$N.parent.removeChild(n_$N),this._childs===n_$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(n_$C,0,n_$N),this.conchModel&&this.conchModel.addChildAt(n_$N.conchModel,n_$C),(n_$N.parent=this)._addChild3D(n_$N);return n_$N}throw new Error("appendChildAt:The index is out of bounds")},n_$a.addChild=function(n_$N){if(!(n_$N instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!n_$N||this.destroyed||n_$N===this)return n_$N;if(n_$N.zOrder&&this._set$P("hasZorder",!0),n_$N._parent===this){var n_$C=this.getChildIndex(n_$N);n_$C!==this._childs.length-1&&(this._childs.splice(n_$C,1),this._childs.push(n_$N),this.conchModel&&(this.conchModel.removeChild(n_$N.conchModel),this.conchModel.addChildAt(n_$N.conchModel,this._childs.length-1)),this._childChanged())}else n_$N.parent&&n_$N.parent.removeChild(n_$N),this._childs===n_$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(n_$N),this.conchModel&&this.conchModel.addChildAt(n_$N.conchModel,this._childs.length-1),(n_$N.parent=this)._childChanged(),this._addChild3D(n_$N);return n_$N},n_$a.removeChildAt=function(n_$N){var n_$C=this.getChildAt(n_$N);return n_$C&&(this._removeChild3D(n_$C),this._childs.splice(n_$N,1),this.conchModel&&this.conchModel.removeChild(n_$C.conchModel),n_$C.parent=null),n_$C},n_$a.removeChildren=function(n_$N,n_$C){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=2147483647),this._childs&&0<this._childs.length){var n_$a=this._childs;if(0===n_$N&&n_$J<=n_$C){var n_$u=n_$a;this._childs=n_$A.ARRAY_EMPTY}else n_$u=n_$a.splice(n_$N,n_$C-n_$N);for(var n_$e=0,n_$J=n_$u.length;n_$e<n_$J;n_$e++)this._removeChild3D(n_$u[n_$e]),n_$u[n_$e].parent=null,this.conchModel&&this.conchModel.removeChild(n_$u[n_$e].conchModel)}return this},n_$a.onAsynLoaded=function(n_$N,n_$C,n_$a){var n_$u=n_$C[0];if("Sprite3D"!==n_$u.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var n_$e=n_$C[1];n_$tC._createNodeByJson(this,n_$u,this,n_$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},n_$a.cloneTo=function(n_$N){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var n_$C=n_$N;n_$C.name=this.name,n_$C._destroyed=this._destroyed,n_$C.timer=this.timer,n_$C._$P=this._$P,n_$C.active=this._active;var n_$a=n_$C.transform.localPosition;this.transform.localPosition.cloneTo(n_$a),n_$C.transform.localPosition=n_$a;var n_$u=n_$C.transform.localRotation;this.transform.localRotation.cloneTo(n_$u),n_$C.transform.localRotation=n_$u;var n_$e=n_$C.transform.localScale;this.transform.localScale.cloneTo(n_$e),n_$C.transform.localScale=n_$e,n_$C.isStatic=this.isStatic;var n_$J=0,n_$M=0;for(n_$J=0,n_$M=this._componentsMap.length;n_$J<n_$M;n_$J++){var n_$n=n_$C.addComponent(this._componentsMap[n_$J]);this._components[n_$J]._cloneTo(n_$n)}for(n_$J=0,n_$M=this._childs.length;n_$J<n_$M;n_$J++)n_$C.addChild(this._childs[n_$J].clone());var n_$V=n_$C.getComponentByType(Animator);if(n_$V){var n_$A=n_$V._linkSpritesData;if(n_$A)for(var n_$P in n_$A){for(var n_$$=n_$A[n_$P],n_$O=n_$C,n_$G=0,n_$z=n_$$.length;n_$G<n_$z&&(n_$O=n_$O.getChildByName(n_$$[n_$G]));n_$G++);if(n_$O){var n_$f=n_$V._avatarNodeMap[n_$P];n_$O._isLinkSpriteToAnimationNode(n_$V,n_$f,!0)}}}},n_$a.clone=function(){var n_$N=new this.constructor;return this.cloneTo(n_$N),n_$N},n_$a.destroy=function(n_$N){if(void 0===n_$N&&(n_$N=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,n_$N);var n_$C,n_$a=0;for(n_$a=0,n_$C=this._components.length;n_$a<n_$C;n_$a++)this._components[n_$a]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,n_$g.clearRes(this.url),this.loaded||n_$gC._cancelLoadByUrl(this.url)}},n_$a._handleSpriteToAvatar=function(n_$N,n_$C){n_$N._avatarNodes;var n_$a=n_$N._avatarNodeMap[this.name];n_$a&&n_$a.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(n_$N,n_$a,n_$C)},n_$a._setAnimatorToLinkAvatar=function(n_$N,n_$C){this._handleSpriteToAvatar(n_$N,n_$C);for(var n_$a=0,n_$u=this._childs.length;n_$a<n_$u;n_$a++){this._childs[n_$a]._setAnimatorToLinkAvatar(n_$N,n_$C)}},n_$z(0,n_$a,"activeInHierarchy",function(){return this._activeInHierarchy}),n_$z(0,n_$a,"_loaded",null,function(n_$N){this.__loaded=n_$N}),n_$z(0,n_$a,"active",function(){return this._active},function(n_$N){this._active!==n_$N&&(this._active=n_$N,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(n_$N?this._activeHierarchy():this._inActiveHierarchy()))}),n_$z(0,n_$a,"componentsCount",function(){return this._components.length}),n_$z(0,n_$a,"loaded",function(){return this.__loaded}),n_$z(0,n_$a,"id",function(){return this._id}),n_$z(0,n_$a,"url",function(){return this._url}),n_$z(0,n_$a,"layer",function(){return this._layer},function(n_$N){if(this._layer!==n_$N){if(!n_$N)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var n_$C=0,n_$a=this._colliders.length;if(this._layer)for(n_$C=0;n_$C<n_$a;n_$C++)this._layer._removeCollider(this._colliders[n_$C]);for(n_$C=0;n_$C<n_$a;n_$C++)n_$N._addCollider(this._colliders[n_$C])}this._layer=n_$N,this.event("layerchanged",n_$N)}}),n_$z(0,n_$a,"scene",function(){return this._scene}),n_$z(0,n_$a,"transform",function(){return this._transform}),n_$C.instantiate=function(n_$N,n_$C,n_$a,n_$u,n_$e){void 0===n_$a&&(n_$a=!0);var n_$J=n_$N.clone();n_$C&&n_$C.addChild(n_$J);var n_$M=n_$J.transform;if(n_$a){var n_$n=n_$M.worldMatrix;n_$N.transform.worldMatrix.cloneTo(n_$n),n_$M.worldMatrix=n_$n}else n_$u&&(n_$M.position=n_$u),n_$e&&(n_$M.rotation=n_$e);return n_$J},n_$C.load=function(n_$N){return n_$X.loader.create(n_$N,null,null,n_$C)},n_$C.WORLDMATRIX=0,n_$C.MVPMATRIX=1,n_$C._uniqueIDCounter=0,n_$C._nameNumberCounter=0,n_$C}(),n_$yC=function(n_$N){function n_$P(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],n_$P.__super.call(this),!n_$N||!n_$C)throw"Shader Error";this._id=++n_$P._count,this._vs=n_$N,this._ps=n_$C,this._attributeMap=n_$a,this._sceneUniformMap=n_$u,this._cameraUniformMap=n_$e,this._spriteUniformMap=n_$J,this._materialUniformMap=n_$M,this._renderElementUniformMap=n_$n,this._precompile=n_$V,this._define=n_$A,this._precompile&&n_$P.extCompileObj&&n_$P.extCompileFunc?n_$P.extCompileFunc.call(n_$P.extCompileObj,n_$N,n_$C,n_$A):this.recreateResource()}n_$G(n_$P,"laya.d3.shader.Shader3D",n_$a);var n_$C=n_$P.prototype;return n_$C.recreateResource=function(){n_$Q.now();this._compile(),this.completeCreate(),this.memorySize=0},n_$C.disposeResource=function(){n_$_.mainContext.deleteShader(this._vshader),n_$_.mainContext.deleteShader(this._pshader),n_$_.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},n_$C._compile=function(){if(!n_$_.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var n_$N=[this._vs,this._ps],n_$C=n_$_.mainContext;if(this._program=n_$C.createProgram(),this._vshader=n_$P._createShader(n_$C,n_$N[0],35633),this._pshader=n_$P._createShader(n_$C,n_$N[1],35632),n_$C.attachShader(this._program,this._vshader),n_$C.attachShader(this._program,this._pshader),n_$C.linkProgram(this._program),!n_$f.isConchApp&&n_$EC.debugMode&&!n_$C.getProgramParameter(this._program,35714))throw n_$C.getProgramInfoLog(this._program);var n_$a,n_$u=0,n_$e=0,n_$J=0;for(n_$J=n_$f.isConchApp?n_$C.getProgramParameterEx(this._vs,this._ps,"",35721):n_$C.getProgramParameter(this._program,35721),n_$u=0;n_$u<n_$J;n_$u++){var n_$M=null;n_$a={vartype:"attribute",ivartype:0,attrib:n_$M=n_$f.isConchApp?n_$C.getActiveAttribEx(this._vs,this._ps,"",n_$u):n_$C.getActiveAttrib(this._program,n_$u),location:n_$C.getAttribLocation(this._program,n_$M.name),name:n_$M.name,type:n_$M.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(n_$a)}var n_$n=0;for(n_$n=n_$f.isConchApp?n_$C.getProgramParameterEx(this._vs,this._ps,"",35718):n_$C.getProgramParameter(this._program,35718),n_$u=0;n_$u<n_$n;n_$u++){var n_$V=null;n_$V=n_$f.isConchApp?n_$C.getActiveUniformEx(this._vs,this._ps,"",n_$u):n_$C.getActiveUniform(this._program,n_$u),0<(n_$a={vartype:"uniform",ivartype:1,attrib:n_$M,location:n_$C.getUniformLocation(this._program,n_$V.name),name:n_$V.name,type:n_$V.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(n_$a.name=n_$a.name.substr(0,n_$a.name.length-3),n_$a.isArray=!0,n_$a.location=n_$C.getUniformLocation(this._program,n_$a.name)),this._uniformParams.push(n_$a)}for(n_$u=0,n_$e=this._attributeParams.length;n_$u<n_$e;n_$u++)(n_$a=this._attributeParams[n_$u]).indexOfParams=n_$u,n_$a.index=1,n_$a.value=[n_$a.location,null],n_$a.codename=n_$a.name,n_$a.name=null!=this._attributeMap[n_$a.codename]?this._attributeMap[n_$a.codename]:n_$a.codename,this._attributeParamsMap.push(n_$a.name),this._attributeParamsMap.push(n_$a),n_$a._this=this,n_$a.uploadedValue=[],n_$a.fun=this._attribute;for(n_$u=0,n_$e=this._uniformParams.length;n_$u<n_$e;n_$u++)switch((n_$a=this._uniformParams[n_$u]).indexOfParams=n_$u,n_$a.index=1,n_$a.value=[n_$a.location,null],n_$a.codename=n_$a.name,null!=this._sceneUniformMap[n_$a.codename]?(n_$a.name=this._sceneUniformMap[n_$a.codename],this._sceneUniformParamsMap.push(n_$a.name),this._sceneUniformParamsMap.push(n_$a)):null!=this._cameraUniformMap[n_$a.codename]?(n_$a.name=this._cameraUniformMap[n_$a.codename],this._cameraUniformParamsMap.push(n_$a.name),this._cameraUniformParamsMap.push(n_$a)):null!=this._spriteUniformMap[n_$a.codename]?(n_$a.name=this._spriteUniformMap[n_$a.codename],this._spriteUniformParamsMap.push(n_$a.name),this._spriteUniformParamsMap.push(n_$a)):null!=this._materialUniformMap[n_$a.codename]?(n_$a.name=this._materialUniformMap[n_$a.codename],this._materialUniformParamsMap.push(n_$a.name),this._materialUniformParamsMap.push(n_$a)):null!=this._renderElementUniformMap[n_$a.codename]?(n_$a.name=this._renderElementUniformMap[n_$a.codename],this._renderElementUniformParamsMap.push(n_$a.name),this._renderElementUniformParamsMap.push(n_$a)):console.log("Shader:can't find uinform name:"+n_$a.codename+" in shader file."),n_$a._this=this,n_$a.uploadedValue=[],n_$a.type){case 5124:n_$a.fun=n_$a.isArray?this._uniform1iv:this._uniform1i;break;case 5126:n_$a.fun=n_$a.isArray?this._uniform1fv:this._uniform1f;break;case 35664:n_$a.fun=n_$a.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:n_$a.fun=n_$a.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:n_$a.fun=n_$a.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:n_$a.fun=this._uniform_sampler2D;break;case 35680:n_$a.fun=this._uniform_samplerCube;break;case 35676:n_$a.fun=this._uniformMatrix4fv;break;case 35670:n_$a.fun=this._uniform1i;break;case 35674:n_$a.fun=this._uinformMatrix2fv;break;case 35675:n_$a.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},n_$C._attribute=function(n_$N,n_$C){var n_$a=n_$_.mainContext,n_$u=n_$n._enableAtributes,n_$e=n_$N.location;return n_$u[n_$e]||n_$a.enableVertexAttribArray(n_$e),n_$a.vertexAttribPointer(n_$e,n_$C[0],n_$C[1],n_$C[2],n_$C[3],n_$C[4]),n_$u[n_$e]=n_$n._bindVertexBuffer,1},n_$C._uniform1f=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C?(n_$_.mainContext.uniform1f(n_$N.location,n_$a[0]=n_$C),1):0},n_$C._uniform1fv=function(n_$N,n_$C){if(n_$C.length<4){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$_.mainContext.uniform1fv(n_$N.location,n_$C),n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3],1):0}return n_$_.mainContext.uniform1fv(n_$N.location,n_$C),1},n_$C._uniform_vec2=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]?(n_$_.mainContext.uniform2f(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1]),1):0},n_$C._uniform_vec2v=function(n_$N,n_$C){if(n_$C.length<2){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$_.mainContext.uniform2fv(n_$N.location,n_$C),n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3],1):0}return n_$_.mainContext.uniform2fv(n_$N.location,n_$C),1},n_$C._uniform_vec3=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]?(n_$_.mainContext.uniform3f(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2]),1):0},n_$C._uniform_vec3v=function(n_$N,n_$C){return n_$_.mainContext.uniform3fv(n_$N.location,n_$C),1},n_$C._uniform_vec4=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$_.mainContext.uniform4f(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3]),1):0},n_$C._uniform_vec4v=function(n_$N,n_$C){return n_$_.mainContext.uniform4fv(n_$N.location,n_$C),1},n_$C._uniformMatrix2fv=function(n_$N,n_$C){return n_$_.mainContext.uniformMatrix2fv(n_$N.location,!1,n_$C),1},n_$C._uniformMatrix3fv=function(n_$N,n_$C){return n_$_.mainContext.uniformMatrix3fv(n_$N.location,!1,n_$C),1},n_$C._uniformMatrix4fv=function(n_$N,n_$C){return n_$_.mainContext.uniformMatrix4fv(n_$N.location,!1,n_$C),1},n_$C._uinformMatrix2fv=function(n_$N,n_$C){return n_$_.mainContext.uniformMatrix2fv(n_$N.location,!1,n_$C),1},n_$C._uinformMatrix3fv=function(n_$N,n_$C){return n_$_.mainContext.uniformMatrix3fv(n_$N.location,!1,n_$C),1},n_$C._uniform1i=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C?(n_$_.mainContext.uniform1i(n_$N.location,n_$a[0]=n_$C),1):0},n_$C._uniform1iv=function(n_$N,n_$C){return n_$_.mainContext.uniform1iv(n_$N.location,n_$C),1},n_$C._uniform_ivec2=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]?(n_$_.mainContext.uniform2i(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1]),1):0},n_$C._uniform_ivec2v=function(n_$N,n_$C){return n_$_.mainContext.uniform2iv(n_$N.location,n_$C),1},n_$C._uniform_vec3i=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]?(n_$_.mainContext.uniform3i(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2]),1):0},n_$C._uniform_vec3vi=function(n_$N,n_$C){return n_$_.mainContext.uniform3iv(n_$N.location,n_$C),1},n_$C._uniform_vec4i=function(n_$N,n_$C){var n_$a=n_$N.uploadedValue;return n_$a[0]!==n_$C[0]||n_$a[1]!==n_$C[1]||n_$a[2]!==n_$C[2]||n_$a[3]!==n_$C[3]?(n_$_.mainContext.uniform4i(n_$N.location,n_$a[0]=n_$C[0],n_$a[1]=n_$C[1],n_$a[2]=n_$C[2],n_$a[3]=n_$C[3]),1):0},n_$C._uniform_vec4vi=function(n_$N,n_$C){return n_$_.mainContext.uniform4iv(n_$N.location,n_$C),1},n_$C._uniform_sampler2D=function(n_$N,n_$C){var n_$a=n_$C.source||n_$C.defaulteTexture.source,n_$u=n_$_.mainContext,n_$e=n_$N.uploadedValue;if(null!=n_$e[0])return n_$u.activeTexture(n_$P._TEXTURES[n_$e[0]]),n_$a&&n_$d.bindTexture(n_$u,3553,n_$a),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return n_$e[0]=this._curActTexIndex,n_$u.uniform1i(n_$N.location,this._curActTexIndex),n_$u.activeTexture(n_$P._TEXTURES[this._curActTexIndex]),n_$a&&n_$d.bindTexture(n_$u,3553,n_$a),this._curActTexIndex++,1},n_$C._uniform_samplerCube=function(n_$N,n_$C){var n_$a=n_$C.source||n_$C.defaulteTexture.source,n_$u=n_$_.mainContext,n_$e=n_$N.uploadedValue;if(null!=n_$e[0])return n_$u.activeTexture(n_$P._TEXTURES[n_$e[0]]),n_$a?n_$d.bindTexture(n_$u,34067,n_$a):n_$d.bindTexture(n_$u,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return n_$e[0]=this._curActTexIndex,n_$u.uniform1i(n_$N.location,this._curActTexIndex),n_$u.activeTexture(n_$P._TEXTURES[this._curActTexIndex]),n_$a?n_$d.bindTexture(n_$u,34067,n_$a):n_$d.bindTexture(n_$u,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},n_$C._noSetValue=function(n_$N){console.log("no....:"+n_$N.name)},n_$C.bind=function(){return n_$a.activeShader=this,(n_$a.bindShader=this).activeResource(),n_$d.UseProgram(this._program)},n_$C.uploadAttributes=function(n_$N,n_$C){for(var n_$a,n_$u,n_$e=0,n_$J=0,n_$M=this._attributeParamsMap.length;n_$J<n_$M;n_$J+=2)n_$u=this._attributeParamsMap[n_$J+1],null!=(n_$a=n_$N[this._attributeParamsMap[n_$J]])&&(n_$C&&n_$C[n_$u.name]&&n_$C[n_$u.name].bind(),n_$e+=n_$u.fun.call(this,n_$u,n_$a));n_$E.shaderCall+=n_$e},n_$C.uploadAttributesX=function(n_$N,n_$C){for(var n_$a,n_$u,n_$e=0,n_$J=0,n_$M=this._attributeParamsMap.length;n_$J<n_$M;n_$J+=2)n_$u=this._attributeParamsMap[n_$J+1],null!=(n_$a=n_$N[this._attributeParamsMap[n_$J]])&&(n_$C._bind(),n_$e+=n_$u.fun.call(this,n_$u,n_$a));n_$E.shaderCall+=n_$e},n_$C.uploadSceneUniforms=function(n_$N){for(var n_$C,n_$a,n_$u=0,n_$e=0,n_$J=this._sceneUniformParamsMap.length;n_$e<n_$J;n_$e+=2)n_$a=this._sceneUniformParamsMap[n_$e+1],null!=(n_$C=n_$N[this._sceneUniformParamsMap[n_$e]])&&(n_$u+=n_$a.fun.call(this,n_$a,n_$C));n_$E.shaderCall+=n_$u},n_$C.uploadCameraUniforms=function(n_$N){for(var n_$C,n_$a,n_$u=0,n_$e=0,n_$J=this._cameraUniformParamsMap.length;n_$e<n_$J;n_$e+=2)n_$a=this._cameraUniformParamsMap[n_$e+1],null!=(n_$C=n_$N[this._cameraUniformParamsMap[n_$e]])&&(n_$u+=n_$a.fun.call(this,n_$a,n_$C));n_$E.shaderCall+=n_$u},n_$C.uploadSpriteUniforms=function(n_$N){for(var n_$C,n_$a,n_$u=0,n_$e=0,n_$J=this._spriteUniformParamsMap.length;n_$e<n_$J;n_$e+=2)n_$a=this._spriteUniformParamsMap[n_$e+1],null!=(n_$C=n_$N[this._spriteUniformParamsMap[n_$e]])&&(n_$u+=n_$a.fun.call(this,n_$a,n_$C));n_$E.shaderCall+=n_$u},n_$C.uploadMaterialUniforms=function(n_$N){for(var n_$C,n_$a,n_$u=0,n_$e=0,n_$J=this._materialUniformParamsMap.length;n_$e<n_$J;n_$e+=2)n_$a=this._materialUniformParamsMap[n_$e+1],null!=(n_$C=n_$N[this._materialUniformParamsMap[n_$e]])&&(n_$u+=n_$a.fun.call(this,n_$a,n_$C));n_$E.shaderCall+=n_$u},n_$C.uploadRenderElementUniforms=function(n_$N){for(var n_$C,n_$a,n_$u=0,n_$e=0,n_$J=this._renderElementUniformParamsMap.length;n_$e<n_$J;n_$e+=2)n_$a=this._renderElementUniformParamsMap[n_$e+1],null!=(n_$C=n_$N[this._renderElementUniformParamsMap[n_$e]])&&(n_$u+=n_$a.fun.call(this,n_$a,n_$C));n_$E.shaderCall+=n_$u},n_$P.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){return new n_$P(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A)},n_$P.addInclude=function(n_$N,n_$C){n_$W.addInclude(n_$N,n_$C)},n_$P._createShader=function(n_$N,n_$C,n_$a){var n_$u=n_$N.createShader(n_$a);if(n_$N.shaderSource(n_$u,n_$C),n_$N.compileShader(n_$u),n_$EC.debugMode&&!n_$N.getShaderParameter(n_$u,35713))throw n_$N.getShaderInfoLog(n_$u);return n_$u},n_$P.PERIOD_RENDERELEMENT=0,n_$P.PERIOD_MATERIAL=1,n_$P.PERIOD_SPRITE=2,n_$P.PERIOD_CAMERA=3,n_$P.PERIOD_SCENE=4,n_$P._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],n_$P._count=0,n_$P._preCompile=!1,n_$P.extCompileFunc=null,n_$P.extCompileObj=null,n_$$(n_$P,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new n_$F}]),n_$P}(),n_$TC=function(n_$n){function n_$V(){this._transformUV=null,n_$V.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new n_$MC(.6,.6,.6)),this._setColor(10,new n_$MC(1,1,1)),this._setColor(11,new n_$nC(1,1,1,8)),this._setColor(12,new n_$MC(1,1,1)),this._setColor(7,new n_$nC(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new n_$nC(1,1,0,0)),this.renderMode=1}n_$G(n_$V,"laya.d3.core.material.StandardMaterial",n_$n);var n_$N=n_$V.prototype;return n_$N.disableLight=function(){this._addDisablePublicShaderDefine(n_$EC.SHADERDEFINE_POINTLIGHT|n_$EC.SHADERDEFINE_SPOTLIGHT|n_$EC.SHADERDEFINE_DIRECTIONLIGHT)},n_$N.disableFog=function(){this._addDisablePublicShaderDefine(n_$EC.SHADERDEFINE_FOG)},n_$N.onAsynLoaded=function(n_$N,n_$C,n_$a){var n_$u=n_$C[0];if(n_$u.version)n_$n.prototype.onAsynLoaded.call(this,n_$N,n_$C,n_$a);else{var n_$e=n_$C[1],n_$J=n_$u.props;for(var n_$M in n_$J)this[n_$M]=n_$J[n_$M];n_$V._parseStandardMaterial(n_$e,this,n_$u),this._endLoaded()}},n_$N.cloneTo=function(n_$N){n_$n.prototype.cloneTo.call(this,n_$N);var n_$C=n_$N;this._transformUV&&(n_$C._transformUV=this._transformUV.clone())},n_$z(0,n_$N,"ambientColor",function(){return this._getColor(9)},function(n_$N){this._setColor(9,n_$N)}),n_$z(0,n_$N,"ambientTexture",function(){return this._getTexture(5)},function(n_$N){n_$N?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,n_$N)}),n_$z(0,n_$N,"renderMode",null,function(n_$N){switch(n_$N){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(n_$V.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(n_$N)}),n_$z(0,n_$N,"reflectColor",function(){return this._getColor(12)},function(n_$N){this._setColor(12,n_$N)}),n_$z(0,n_$N,"tilingOffset",function(){return this._getColor(15)},function(n_$N){if(n_$N){var n_$C=n_$N.elements;1!=n_$C[0]||1!=n_$C[1]||0!=n_$C[2]||0!=n_$C[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,n_$N)}),n_$z(0,n_$N,"albedo",function(){return this._getColor(7)},function(n_$N){this._setColor(7,n_$N)}),n_$z(0,n_$N,"diffuseColor",function(){return this._getColor(10)},function(n_$N){this._setColor(10,n_$N)}),n_$z(0,n_$N,"albedoColor",function(){return this._getColor(7)},function(n_$N){this._setColor(7,n_$N)}),n_$z(0,n_$N,"specularColor",function(){return this._getColor(11)},function(n_$N){this._setColor(11,n_$N)}),n_$z(0,n_$N,"diffuseTexture",function(){return this._getTexture(1)},function(n_$N){n_$N?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,n_$N)}),n_$z(0,n_$N,"normalTexture",function(){return this._getTexture(2)},function(n_$N){n_$N?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,n_$N)}),n_$z(0,n_$N,"specularTexture",function(){return this._getTexture(3)},function(n_$N){n_$N?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,n_$N)}),n_$z(0,n_$N,"emissiveTexture",function(){return this._getTexture(4)},function(n_$N){n_$N?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,n_$N)}),n_$z(0,n_$N,"reflectTexture",function(){return this._getTexture(6)},function(n_$N){n_$N?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,n_$N)}),n_$z(0,n_$N,"transformUV",function(){return this._transformUV},function(n_$N){this._transformUV=n_$N,this._setMatrix4x4(13,n_$N.matrix),n_$N?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,n_$N.matrix.elements,0)}),n_$V.__init__=function(){n_$V.SHADERDEFINE_DIFFUSEMAP=n_$V.shaderDefines.registerDefine("DIFFUSEMAP"),n_$V.SHADERDEFINE_NORMALMAP=n_$V.shaderDefines.registerDefine("NORMALMAP"),n_$V.SHADERDEFINE_SPECULARMAP=n_$V.shaderDefines.registerDefine("SPECULARMAP"),n_$V.SHADERDEFINE_EMISSIVEMAP=n_$V.shaderDefines.registerDefine("EMISSIVEMAP"),n_$V.SHADERDEFINE_AMBIENTMAP=n_$V.shaderDefines.registerDefine("AMBIENTMAP"),n_$V.SHADERDEFINE_REFLECTMAP=n_$V.shaderDefines.registerDefine("REFLECTMAP"),n_$V.SHADERDEFINE_UVTRANSFORM=n_$V.shaderDefines.registerDefine("UVTRANSFORM"),n_$V.SHADERDEFINE_TILINGOFFSET=n_$V.shaderDefines.registerDefine("TILINGOFFSET"),n_$V.SHADERDEFINE_ADDTIVEFOG=n_$V.shaderDefines.registerDefine("ADDTIVEFOG")},n_$V.load=function(n_$N){return n_$X.loader.create(n_$N,null,null,n_$V)},n_$V._parseStandardMaterial=function(n_$N,n_$C,n_$a){var n_$u=n_$a.customProps,n_$e=n_$u.ambientColor;n_$C.ambientColor=new n_$MC(n_$e[0],n_$e[1],n_$e[2]);var n_$J=n_$u.diffuseColor;n_$C.diffuseColor=new n_$MC(n_$J[0],n_$J[1],n_$J[2]);var n_$M=n_$u.specularColor;n_$C.specularColor=new n_$nC(n_$M[0],n_$M[1],n_$M[2],n_$M[3]);var n_$n=n_$u.reflectColor;n_$C.reflectColor=new n_$MC(n_$n[0],n_$n[1],n_$n[2]);var n_$V=n_$u.albedoColor;n_$V&&(n_$C.albedo=new n_$nC(n_$V[0],n_$V[1],n_$V[2],n_$V[3]));var n_$A=n_$u.diffuseTexture.texture2D;n_$A&&(n_$C.diffuseTexture=n_$g.getRes(n_$N[n_$A]));var n_$P=n_$u.normalTexture.texture2D;n_$P&&(n_$C.normalTexture=n_$g.getRes(n_$N[n_$P]));var n_$$=n_$u.specularTexture.texture2D;n_$$&&(n_$C.specularTexture=n_$g.getRes(n_$N[n_$$]));var n_$O=n_$u.emissiveTexture.texture2D;n_$O&&(n_$C.emissiveTexture=n_$g.getRes(n_$N[n_$O]));var n_$G=n_$u.ambientTexture.texture2D;n_$G&&(n_$C.ambientTexture=n_$g.getRes(n_$N[n_$G]));var n_$z=n_$u.reflectTexture.texture2D;n_$z&&(n_$C.reflectTexture=n_$g.getRes(n_$N[n_$z]))},n_$V.RENDERMODE_OPAQUE=1,n_$V.RENDERMODE_OPAQUEDOUBLEFACE=2,n_$V.RENDERMODE_CUTOUT=3,n_$V.RENDERMODE_CUTOUTDOUBLEFACE=4,n_$V.RENDERMODE_TRANSPARENT=13,n_$V.RENDERMODE_TRANSPARENTDOUBLEFACE=14,n_$V.RENDERMODE_ADDTIVE=15,n_$V.RENDERMODE_ADDTIVEDOUBLEFACE=16,n_$V.RENDERMODE_DEPTHREAD_TRANSPARENT=5,n_$V.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,n_$V.RENDERMODE_DEPTHREAD_ADDTIVE=7,n_$V.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,n_$V.RENDERMODE_NONDEPTH_TRANSPARENT=9,n_$V.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,n_$V.RENDERMODE_NONDEPTH_ADDTIVE=11,n_$V.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,n_$V.SHADERDEFINE_DIFFUSEMAP=0,n_$V.SHADERDEFINE_NORMALMAP=0,n_$V.SHADERDEFINE_SPECULARMAP=0,n_$V.SHADERDEFINE_EMISSIVEMAP=0,n_$V.SHADERDEFINE_AMBIENTMAP=0,n_$V.SHADERDEFINE_REFLECTMAP=0,n_$V.SHADERDEFINE_UVTRANSFORM=0,n_$V.SHADERDEFINE_TILINGOFFSET=0,n_$V.SHADERDEFINE_ADDTIVEFOG=0,n_$V.DIFFUSETEXTURE=1,n_$V.NORMALTEXTURE=2,n_$V.SPECULARTEXTURE=3,n_$V.EMISSIVETEXTURE=4,n_$V.AMBIENTTEXTURE=5,n_$V.REFLECTTEXTURE=6,n_$V.ALBEDO=7,n_$V.UVANIAGE=8,n_$V.MATERIALAMBIENT=9,n_$V.MATERIALDIFFUSE=10,n_$V.MATERIALSPECULAR=11,n_$V.MATERIALREFLECT=12,n_$V.UVMATRIX=13,n_$V.UVAGE=14,n_$V.TILINGOFFSET=15,n_$$(n_$V,["defaultMaterial",function(){var n_$N=new n_$V;return n_$N.lock=!0,this.defaultMaterial=n_$N},"shaderDefines",function(){return this.shaderDefines=new n_$PC(n_$qC.shaderDefines)}]),n_$V}(n_$qC),n_$LC=function(n_$N){function n_$M(n_$N,n_$C,n_$a,n_$u,n_$e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===n_$a&&(n_$a=35044),void 0===n_$u&&(n_$u=!1),n_$M.__super.call(this),this._indexType=n_$N,this._indexCount=n_$C,this._bufferUsage=n_$a,this._bufferType=34963,this._canRead=n_$u;var n_$J;if("ushort"==n_$N)this._indexTypeByteCount=2;else{if("ubyte"!=n_$N)throw new Error("unidentification index type.");this._indexTypeByteCount=1}n_$J=this._indexTypeByteCount*n_$C,this._byteLength=n_$J,this._bind(),n_$n._gl.bufferData(this._bufferType,n_$J,this._bufferUsage),this.uri=n_$e,n_$u?("ushort"==n_$N?this._buffer=new Uint16Array(n_$C):"ubyte"==n_$N&&(this._buffer=new Uint8Array(n_$C)),this.memorySize=2*n_$J):this.memorySize=n_$J}n_$G(n_$M,"laya.d3.graphics.IndexBuffer3D",n_$N);var n_$C=n_$M.prototype;return n_$C.setData=function(n_$N,n_$C,n_$a,n_$u){void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=4294967295);var n_$e=0;if("ushort"==this._indexType?(n_$e=2,0===n_$a&&4294967295===n_$u||(n_$N=new Uint16Array(n_$N.buffer,n_$a*n_$e,n_$u))):"ubyte"==this._indexType&&(n_$e=1,0===n_$a&&4294967295===n_$u||(n_$N=new Uint8Array(n_$N.buffer,n_$a*n_$e,n_$u))),this._bind(),n_$n._gl.bufferSubData(this._bufferType,n_$C*n_$e,n_$N),this._canRead)if(0!==n_$C||0!==n_$a||4294967295!==n_$u){var n_$J=this._buffer.length-n_$C;n_$J<n_$u&&(n_$u=n_$J);for(var n_$M=0;n_$M<n_$u;n_$M++)this._buffer[n_$C+n_$M]=n_$N[n_$M]}else this._buffer=n_$N},n_$C.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},n_$C.disposeResource=function(){n_$N.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},n_$z(0,n_$C,"indexType",function(){return this._indexType}),n_$z(0,n_$C,"indexTypeByteCount",function(){return this._indexTypeByteCount}),n_$z(0,n_$C,"indexCount",function(){return this._indexCount}),n_$z(0,n_$C,"canRead",function(){return this._canRead}),n_$M.INDEXTYPE_UBYTE="ubyte",n_$M.INDEXTYPE_USHORT="ushort",n_$M.create=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$a&&(n_$a=35044),void 0===n_$u&&(n_$u=!1),new n_$M(n_$N,n_$C,n_$a,n_$u,n_$e)},n_$M}(n_$n),n_$RC=function(n_$J){function n_$M(n_$N,n_$C,n_$a,n_$u,n_$e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===n_$u&&(n_$u=!1),n_$M.__super.call(this),this._vertexDeclaration=n_$N,this._vertexCount=n_$C,this._bufferUsage=n_$a,this._bufferType=34962,this._canRead=n_$u,this.uri=n_$e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*n_$C,this._bind(),n_$n._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),n_$u&&(this._buffer=new Float32Array(this._byteLength/4))}n_$G(n_$M,"laya.d3.graphics.VertexBuffer3D",n_$J);var n_$N=n_$M.prototype;return n_$N.bindWithIndexBuffer=function(n_$N){n_$N&&n_$N._bind(),this._bind()},n_$N.setData=function(n_$N,n_$C,n_$a,n_$u){if(void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=4294967295),0===n_$a&&4294967295===n_$u||(n_$N=new Float32Array(n_$N.buffer,4*n_$a,n_$u)),this._bind(),n_$n._gl.bufferSubData(this._bufferType,4*n_$C,n_$N),this._canRead)if(0!==n_$C||0!==n_$a||4294967295!==n_$u){var n_$e=this._buffer.length-n_$C;n_$e<n_$u&&(n_$u=n_$e);for(var n_$J=0;n_$J<n_$u;n_$J++)this._buffer[n_$C+n_$J]=n_$N[n_$J]}else this._buffer=n_$N},n_$N.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},n_$N.disposeResource=function(){for(var n_$N=n_$_.mainContext,n_$C=this._vertexDeclaration.getVertexElements(),n_$a=n_$n._enableAtributes,n_$u=0,n_$e=n_$C.length;n_$u<n_$e;n_$u++)n_$a[n_$u]===this._glBuffer&&(n_$N.disableVertexAttribArray(n_$u),n_$a[n_$u]=null);n_$J.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},n_$z(0,n_$N,"vertexDeclaration",function(){return this._vertexDeclaration}),n_$z(0,n_$N,"vertexCount",function(){return this._vertexCount}),n_$z(0,n_$N,"canRead",function(){return this._canRead}),n_$M.create=function(n_$N,n_$C,n_$a,n_$u,n_$e){return void 0===n_$a&&(n_$a=35044),void 0===n_$u&&(n_$u=!1),new n_$M(n_$N,n_$C,n_$a,n_$u,n_$e)},n_$M}(n_$n),n_$wC=function(n_$N){function n_$W(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,n_$W.__super.call(this),this._type=3553}n_$G(n_$W,"laya.d3.resource.DataTexture2D",n_$_C);var n_$C=n_$W.prototype;return n_$C.genDebugMipmaps=function(){var n_$N=[];return n_$N.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),n_$N.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),n_$N.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),n_$N.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),n_$N.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),n_$N.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),n_$N.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),n_$N.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),n_$N.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),n_$N.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),n_$N},n_$C._onTextureLoaded=function(n_$N){},n_$C._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var n_$N=n_$_.mainContext,n_$C=this._source=n_$N.createTexture(),n_$a=this._width,n_$u=this._height,n_$e=n_$d.curBindTexTarget,n_$J=n_$d.curBindTexValue,n_$M=!1;if(n_$d.bindTexture(n_$N,this._type,n_$C),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var n_$n=0;n_$N.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var n_$V=0;n_$V<this._mipmaps.length;n_$V++){if(this._mipmaps[n_$V].byteLength!=n_$A*n_$P*4)throw"mipmap size error  level:"+n_$V;n_$N.texSubImage2D(this._type,0,n_$W.simLodRect[n_$n++],n_$W.simLodRect[n_$n++],n_$W.simLodRect[n_$n++],n_$W.simLodRect[n_$n++],6408,5121,new Uint8Array(this._mipmaps[n_$V]))}this.minFifter=9729,this.magFifter=9729}else{var n_$A=this._width,n_$P=this._height;for(n_$n=0,n_$N.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),n_$V=0;n_$V<this._mipmaps.length;n_$V++){if(this._mipmaps[n_$V].byteLength!=n_$A*n_$P*4)throw"mipmap size error  level:"+n_$V;n_$N.texImage2D(this._type,n_$V,6408,n_$A,n_$P,0,6408,5121,new Uint8Array(this._mipmaps[n_$V])),(n_$A/=2)<1&&(n_$A=1),(n_$P/=2)<1&&(n_$P=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&n_$N.pixelStorei(n_$N.UNPACK_ALIGNMENT,1),n_$N.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var n_$$=0,n_$O=!1,n_$G=!1;this._buffer.byteLength==4*n_$a*n_$u?(n_$$=6408,n_$O=!0):this._buffer.byteLength==3*n_$a*n_$u?(n_$$=6407,n_$G=!0):n_$$=this._format,n_$O||n_$G?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),n_$G&&n_$N.pixelStorei(n_$N.UNPACK_ALIGNMENT,1),n_$N.texImage2D(this._type,0,n_$$,n_$a,n_$u,0,n_$$,5121,this._buffer)):n_$N&&n_$$==n_$N.ALPHA?(n_$N.texImage2D(3553,0,n_$$,n_$a,n_$u,0,n_$$,n_$N.UNSIGNED_BYTE,this._buffer),n_$M=!0):0!=n_$$&&(n_$N.compressedTexImage2D(3553,0,n_$$,n_$a,n_$u,0,this._buffer),n_$M=!0)}var n_$z=this._minFifter,n_$f=this._magFifter,n_$t=0==this._wrapModeU?10497:33071,n_$g=0==this._wrapModeV?10497:33071,n_$x=n_$v.isPOT(n_$a,n_$u);n_$x?(this._mipmap||this._mipmaps?-1!==n_$z||(n_$z=9987):-1!==n_$z||(n_$z=9729),-1!==n_$f||(n_$f=9729),n_$N.texParameteri(this._type,10241,n_$z),n_$N.texParameteri(this._type,10240,n_$f),n_$N.texParameteri(this._type,10242,n_$t),n_$N.texParameteri(this._type,10243,n_$g),this._mipmap&&n_$N.generateMipmap(this._type)):(-1!==n_$z||(n_$z=9729),-1!==n_$f||(n_$f=9729),n_$N.texParameteri(this._type,10241,n_$z),n_$N.texParameteri(this._type,10240,n_$f),n_$N.texParameteri(this._type,10242,33071),n_$N.texParameteri(this._type,10243,33071)),n_$e&&n_$J&&n_$d.bindTexture(n_$N,n_$e,n_$J),this.memorySize=n_$M?this._buffer.length:n_$x?n_$a*n_$u*4*(1+1/3):n_$a*n_$u*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},n_$C.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},n_$C.onAsynLoaded=function(n_$N,n_$C,n_$a){var n_$u;n_$a&&(n_$u=n_$a[0].call(this,n_$C)),n_$u&&(this._width=n_$u.width,this._height=n_$u.height,this._buffer=n_$u.data),this._src=n_$N,this._size=new n_$fC(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},n_$C.getPixels=function(){return new Uint8Array(this._buffer)},n_$C.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(n_$_.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},n_$z(0,n_$C,"src",function(){return this._src}),n_$W.create=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){if(void 0===n_$u&&(n_$u=9729),void 0===n_$e&&(n_$e=9729),void 0===n_$J&&(n_$J=!0),!n_$N||n_$N.byteLength<n_$C*n_$a*4)throw"DataTexture2D create error";var n_$n=new n_$W;return n_$n.uri=n_$M,n_$n._buffer=n_$N,n_$n._width=n_$C,n_$n._height=n_$a,n_$n._mipmap=n_$J,n_$n._magFifter=n_$u,n_$n._minFifter=n_$e,n_$n._size=new n_$fC(n_$n._width,n_$n._height),n_$n._conchTexture?alert("怎么给runtime传递datatexture数据"):n_$n.activeResource(),n_$n},n_$W.load=function(n_$N,n_$C,n_$a,n_$u,n_$e){if(void 0===n_$C&&(n_$C=0),void 0===n_$a&&(n_$a=0),void 0===n_$u&&(n_$u=9729),void 0===n_$e&&(n_$e=9729),"mipmaps"===n_$D.getFileExtension(n_$N)){var n_$J=n_$X.loader.create(n_$N,null,null,n_$W,[function(n_$N){this._mipmaps=[];var n_$C=new Uint32Array(n_$N);this._width=n_$C[0];var n_$a=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,n_$a=1024),this._width!=n_$a)throw"现在只支持512x256的环境贴图。当前的是"+n_$C[0];this._height=n_$C[1];for(var n_$u=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,n_$e=this._height,n_$J=8;;){var n_$M=n_$u*n_$e*4;if(n_$J+n_$M>n_$N.byteLength)throw"load mipmaps data size error ";var n_$n=new Uint8Array(n_$N,n_$J,n_$M);if(this._mipmaps.push(n_$n),n_$J+=n_$M,1==n_$u&&1==n_$e)break;(n_$u/=2)<1&&(n_$u=1),(n_$e/=2)<1&&(n_$e=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){n_$J.simLodInfo=new Float32Array(40);for(var n_$M=0;n_$M<n_$J.simLodInfo.length;)n_$J.simLodInfo[n_$M]=(n_$W.simLodRect[n_$M]+.5)/1024,n_$M++,n_$J.simLodInfo[n_$M]=(n_$W.simLodRect[n_$M]+.5)/256,n_$M++,n_$J.simLodInfo[n_$M]=Math.max(n_$W.simLodRect[n_$M]-1,.1)/1024,n_$M++,n_$J.simLodInfo[n_$M]=Math.max(n_$W.simLodRect[n_$M]-1.5,.1)/256,n_$M++}return n_$J}if("number"==typeof n_$C)return n_$X.loader.create(n_$N,null,null,n_$W,[function(n_$N){return this._width=n_$C,this._height=n_$a,this._buffer=n_$N,null}]);if("function"==typeof n_$C)return n_$X.loader.create(n_$N,null,null,n_$W,[n_$C]);throw new Error("unknown params.")},n_$W.lodasatlas=!1,n_$$(n_$W,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),n_$W}(),n_$BC=function(n_$N){function n_$C(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,n_$C.__super.call(this)}n_$G(n_$C,"laya.d3.resource.models.PrimitiveMesh",n_$dC);var n_$a=n_$C.prototype;return n_$X.imps(n_$a,{"laya.d3.core.render.IRenderable":!0}),n_$a._getVertexBuffer=function(n_$N){return void 0===n_$N&&(n_$N=0),0===n_$N?this._vertexBuffer:null},n_$a._getVertexBuffers=function(){return null},n_$a._getIndexBuffer=function(){return this._indexBuffer},n_$a._getPositions=function(){var n_$N,n_$C=[],n_$a=this._vertexBuffer.vertexDeclaration.getVertexElements(),n_$u=0;for(n_$u=0;n_$u<n_$a.length;n_$u++){var n_$e=n_$a[n_$u];if("vector3"===n_$e.elementFormat&&0===n_$e.elementUsage){n_$N=n_$e;break}}var n_$J=this._vertexBuffer.getData();for(n_$u=0;n_$u<n_$J.length;n_$u+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var n_$M=n_$u+n_$N.offset/4,n_$n=new n_$MC(n_$J[n_$M+0],n_$J[n_$M+1],n_$J[n_$M+2]);n_$C.push(n_$n)}return n_$C},n_$a.getRenderElement=function(n_$N){return this},n_$a.getRenderElementsCount=function(){return 1},n_$a.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},n_$a._beforeRender=function(n_$N){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},n_$a._render=function(n_$N){n_$_.mainContext.drawElements(4,this._numberIndices,5123,0),n_$E.drawCall++,n_$E.trianglesFaces+=this._numberIndices/3},n_$z(0,n_$a,"_vertexBufferCount",function(){return 1}),n_$z(0,n_$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),n_$C}(),n_$YC=function(n_$N){function n_$C(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,n_$C.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}n_$G(n_$C,"laya.d3.resource.models.Mesh",n_$dC);var n_$a=n_$C.prototype;return n_$a._getPositions=function(){var n_$N,n_$C,n_$a,n_$u,n_$e,n_$J=[],n_$M=0,n_$n=0,n_$V=0;if(0!==this._vertexBuffers.length){var n_$A=this._vertexBuffers.length;for(n_$M=0;n_$M<n_$A;n_$M++){for(n_$a=(n_$N=this._vertexBuffers[n_$M]).vertexDeclaration.getVertexElements(),n_$n=0;n_$n<n_$a.length;n_$n++)if("vector3"===(n_$u=n_$a[n_$n]).elementFormat&&0===n_$u.elementUsage){n_$C=n_$u;break}for(n_$e=n_$N.getData(),n_$n=0;n_$n<n_$e.length;n_$n+=n_$N.vertexDeclaration.vertexStride/4)n_$V=n_$n+n_$C.offset/4,n_$J.push(new n_$MC(n_$e[n_$V+0],n_$e[n_$V+1],n_$e[n_$V+2]))}}else{var n_$P=this._subMeshes.length;for(n_$M=0;n_$M<n_$P;n_$M++){for(n_$a=(n_$N=this._subMeshes[n_$M]._getVertexBuffer()).vertexDeclaration.getVertexElements(),n_$n=0;n_$n<n_$a.length;n_$n++)if("vector3"===(n_$u=n_$a[n_$n]).elementFormat&&0===n_$u.elementUsage){n_$C=n_$u;break}for(n_$e=n_$N.getData(),n_$n=0;n_$n<n_$e.length;n_$n+=n_$N.vertexDeclaration.vertexStride/4)n_$V=n_$n+n_$C.offset/4,n_$J.push(new n_$MC(n_$e[n_$V+0],n_$e[n_$V+1],n_$e[n_$V+2]))}}return n_$J},n_$a._setSubMeshes=function(n_$N){this._subMeshes=n_$N,this._subMeshCount=n_$N.length;for(var n_$C=0;n_$C<this._subMeshCount;n_$C++)n_$N[n_$C]._indexInMesh=n_$C;this._positions=this._getPositions(),this._generateBoundingObject()},n_$a.onAsynLoaded=function(n_$N,n_$C,n_$a){var n_$u=n_$C[0],n_$e=n_$C[1];n_$oN.read(n_$u,this,this._materials,this._subMeshes,n_$e),this.completeCreate(),this._endLoaded()},n_$a.getSubMesh=function(n_$N){return this._subMeshes[n_$N]},n_$a.getSubMeshCount=function(){return this._subMeshes.length},n_$a.getRenderElementsCount=function(){return this._subMeshes.length},n_$a.getRenderElement=function(n_$N){return this._subMeshes[n_$N]},n_$a.disposeResource=function(){for(var n_$N=0;n_$N<this._subMeshes.length;n_$N++)this._subMeshes[n_$N].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},n_$z(0,n_$a,"materials",function(){return this._materials.slice()}),n_$z(0,n_$a,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),n_$C.load=function(n_$N){return n_$X.loader.create(n_$N,null,null,n_$C)},n_$C}(),n_$KC=(function(n_$N){function n_$A(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===n_$a&&(n_$a=6408),void 0===n_$u&&(n_$u=5121),void 0===n_$e&&(n_$e=33189),void 0===n_$J&&(n_$J=!1),void 0===n_$M&&(n_$M=!1),void 0===n_$n&&(n_$n=-1),void 0===n_$V&&(n_$V=-1),n_$A.__super.call(this),this._type=3553,this._width=n_$N,this._height=n_$C,this._size=new n_$fC(n_$N,n_$C),this._surfaceFormat=n_$a,this._surfaceType=n_$u,this._depthStencilFormat=n_$e,n_$f.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=n_$J,this._repeat=n_$M,this._minFifter=n_$n,this._magFifter=n_$V,this.activeResource(),this._alreadyResolved=!0}n_$G(n_$A,"laya.d3.resource.RenderTexture",n_$_C);var n_$C=n_$A.prototype;n_$C.recreateResource=function(){var n_$N=n_$_.mainContext;this._frameBuffer=n_$N.createFramebuffer(),this._source=n_$N.createTexture();var n_$C=n_$d.curBindTexTarget,n_$a=n_$d.curBindTexValue;n_$d.bindTexture(n_$N,this._type,this._source),n_$N.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var n_$u=this._minFifter,n_$e=this._magFifter,n_$J=this._repeat?10497:33071;if(n_$v.isPOT(this._width,this._height)?(this._mipmap?-1!==n_$u||(n_$u=9987):-1!==n_$u||(n_$u=9729),-1!==n_$e||(n_$e=9729),n_$N.texParameteri(this._type,10241,n_$u),n_$N.texParameteri(this._type,10240,n_$e),n_$N.texParameteri(this._type,10242,n_$J),n_$N.texParameteri(this._type,10243,n_$J),this._mipmap&&n_$N.generateMipmap(this._type)):(-1!==n_$u||(n_$u=9729),-1!==n_$e||(n_$e=9729),n_$N.texParameteri(this._type,10241,n_$u),n_$N.texParameteri(this._type,10240,n_$e),n_$N.texParameteri(this._type,10242,33071),n_$N.texParameteri(this._type,10243,33071)),n_$C&&n_$a&&n_$d.bindTexture(n_$N,n_$C,n_$a),n_$N.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=n_$N.createRenderbuffer(),n_$N.bindRenderbuffer(36161,this._depthStencilBuffer),n_$N.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),n_$N.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:n_$N.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:n_$N.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:n_$N.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}n_$N.framebufferTexture2D(36160,36064,3553,this._source,0),n_$N.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},n_$C.start=function(){n_$_.mainContext.bindFramebuffer(36160,this.frameBuffer),(n_$A._currentRenderTarget=this)._alreadyResolved=!1},n_$C.end=function(){n_$_.mainContext.bindFramebuffer(36160,null),n_$A._currentRenderTarget=null,this._alreadyResolved=!0},n_$C.getData=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$_.mainContext;if(n_$e.bindFramebuffer(36160,this._frameBuffer),!(36053===n_$e.checkFramebufferStatus(36160)))return n_$e.bindFramebuffer(36160,null),null;var n_$J=new Uint8Array(this._width*this._height*4);return n_$e.readPixels(n_$N,n_$C,n_$a,n_$u,this._surfaceFormat,this._surfaceType,n_$J),n_$e.bindFramebuffer(36160,null),n_$J},n_$C.disposeResource=function(){if(this._frameBuffer){var n_$N=n_$_.mainContext;n_$N.deleteTexture(this._source),n_$N.deleteFramebuffer(this._frameBuffer),n_$N.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},n_$z(0,n_$C,"surfaceFormat",function(){return this._surfaceFormat}),n_$z(0,n_$C,"surfaceType",function(){return this._surfaceType}),n_$z(0,n_$C,"depthStencilFormat",function(){return this._depthStencilFormat}),n_$z(0,n_$C,"source",function(){return this._alreadyResolved?n_$X.superGet(n_$_C,this,"source"):null}),n_$z(0,n_$C,"depthStencilBuffer",function(){return this._depthStencilBuffer}),n_$z(0,n_$C,"frameBuffer",function(){return this._frameBuffer}),n_$A._currentRenderTarget=null}(),function(n_$N){function n_$C(n_$N){this._color=null,this._pixels=null,n_$C.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new n_$fC(this.width,this.height),this._color=n_$N,this._pixels=new Uint8Array([255*n_$N.x,255*n_$N.y,255*n_$N.z,255*n_$N.w]),this.uri="SolidColorTexture2D_"+this.id}n_$G(n_$C,"laya.d3.resource.SolidColorTexture2D",n_$_C);var n_$a=n_$C.prototype;return n_$a._createWebGlTexture=function(){var n_$N=n_$_.mainContext,n_$C=this._source=n_$N.createTexture(),n_$a=this._width,n_$u=this._height,n_$e=n_$d.curBindTexTarget,n_$J=n_$d.curBindTexValue;n_$d.bindTexture(n_$N,this._type,n_$C),n_$N.texImage2D(this._type,0,6408,n_$a,n_$u,0,6408,5121,this._pixels);var n_$M=this._minFifter,n_$n=this._magFifter,n_$V=this._repeat?10497:33071,n_$A=n_$v.isPOT(n_$a,n_$u);n_$A?(this._mipmap?-1!==n_$M||(n_$M=9987):-1!==n_$M||(n_$M=9729),-1!==n_$n||(n_$n=9729),n_$N.texParameteri(this._type,10241,n_$M),n_$N.texParameteri(this._type,10240,n_$n),n_$N.texParameteri(this._type,10242,n_$V),n_$N.texParameteri(this._type,10243,n_$V),this._mipmap&&n_$N.generateMipmap(this._type)):(-1!==n_$M||(n_$M=9729),-1!==n_$n||(n_$n=9729),n_$N.texParameteri(this._type,10241,n_$M),n_$N.texParameteri(this._type,10240,n_$n),n_$N.texParameteri(this._type,10242,33071),n_$N.texParameteri(this._type,10243,33071)),n_$e&&n_$J&&n_$d.bindTexture(n_$N,n_$e,n_$J),this.memorySize=n_$A?n_$a*n_$u*4*(1+1/3):n_$a*n_$u*4},n_$a.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},n_$a.disposeResource=function(){this._source&&(n_$_.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},n_$$(n_$C,["magentaTexture",function(){var n_$N=new n_$C(new n_$nC(1,0,1,1));return n_$N.lock=!0,this.magentaTexture=n_$N},"grayTexture",function(){var n_$N=new n_$C(new n_$nC(.5,.5,.5,1));return n_$N.lock=!0,this.grayTexture=n_$N}]),n_$C}()),n_$kC=function(n_$N){function n_$e(n_$N,n_$C,n_$a,n_$u){this._canRead=!1,this._image=null,this._pixels=null,void 0===n_$N&&(n_$N=!1),void 0===n_$C&&(n_$C=!0),void 0===n_$a&&(n_$a=6408),void 0===n_$u&&(n_$u=!0),n_$e.__super.call(this),this._type=3553,this._repeat=n_$C,this._canRead=n_$N,this._format=n_$a,this._mipmap=n_$u}n_$G(n_$e,"laya.d3.resource.Texture2D",n_$_C);var n_$C=n_$e.prototype;return n_$C._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var n_$N=n_$_.mainContext,n_$C=this._source=n_$N.createTexture(),n_$a=this._width,n_$u=this._height,n_$e=n_$d.curBindTexTarget,n_$J=n_$d.curBindTexValue;switch(n_$d.bindTexture(n_$N,this._type,n_$C),this._format){case 6407:case 6408:this._canRead?n_$N.texImage2D(this._type,0,this._format,n_$a,n_$u,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?n_$N.texImage2D(this._type,0,this._image._format,n_$a,n_$u,0,this._image._format,5121,this._image.atlasSource):n_$N.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case n_$_.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:n_$N.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var n_$M=this._minFifter,n_$n=this._magFifter,n_$V=this._repeat?10497:33071,n_$A=0==this._wrapModeU?10497:33071,n_$P=0==this._wrapModeV?10497:33071,n_$$=n_$v.isPOT(n_$a,n_$u);n_$$?(this._mipmap?-1!==n_$M||(n_$M=9987):-1!==n_$M||(n_$M=9729),-1!==n_$n||(n_$n=9729),n_$N.texParameteri(this._type,10241,n_$M),n_$N.texParameteri(this._type,10240,n_$n),n_$N.texParameteri(this._type,10242,n_$V),n_$N.texParameteri(this._type,10243,n_$V),n_$N.texParameteri(this._type,10242,n_$A),n_$N.texParameteri(this._type,10243,n_$P),this._mipmap&&n_$N.generateMipmap(this._type)):(-1!==n_$M||(n_$M=9729),-1!==n_$n||(n_$n=9729),n_$N.texParameteri(this._type,10241,n_$M),n_$N.texParameteri(this._type,10240,n_$n),n_$N.texParameteri(this._type,10242,33071),n_$N.texParameteri(this._type,10243,33071)),n_$e&&n_$J&&n_$d.bindTexture(n_$N,n_$e,n_$J),this._image.onload=null,this._image=null,this.memorySize=n_$$?n_$a*n_$u*4*(1+1/3):n_$a*n_$u*4},n_$C.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},n_$C.onAsynLoaded=function(n_$N,n_$C,n_$a){if(n_$a){var n_$u=n_$a[0];void 0!==n_$u&&(this._canRead=n_$u);var n_$e=n_$a[1];void 0!==n_$e&&(this._repeat=n_$e);var n_$J=n_$a[2];void 0!==n_$J&&(this._format=n_$J);var n_$M=n_$a[3];void 0!==n_$M&&(this._mipmap=n_$M);var n_$n=n_$a.wrapModeU;void 0!==n_$n&&(this._wrapModeU=n_$n);var n_$V=n_$a.wrapModeV;void 0!==n_$V&&(this._wrapModeV=n_$V)}switch(this._format){case 6407:case 6408:var n_$A=(this._image=n_$C).width,n_$P=n_$C.height;this._width=n_$A,this._height=n_$P,this._size=new n_$fC(n_$A,n_$P),this._canRead&&(n_$f.isConchApp?n_$C instanceof n_$O.HTMLElement&&(this._pixels=new Uint8Array(n_$C.getImageData(0,0,n_$A,n_$P))):(n_$Q.canvas.size(n_$A,n_$P),n_$Q.canvas.clear(),n_$Q.context.drawImage(n_$C,0,0,n_$A,n_$P),this._pixels=new Uint8Array(n_$Q.context.getImageData(0,0,n_$A,n_$P).data.buffer)));break;case n_$_.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var n_$$=new n_$r(n_$C);n_$$.readUTFBytes(4),n_$$.readUTFBytes(2),n_$$.getInt16();n_$$.endian="bigEndian",this._width=n_$$.getInt16(),this._height=n_$$.getInt16(),this._size=new n_$fC(this._width,this._height);n_$$.getInt16(),n_$$.getInt16();this._image=new Uint8Array(n_$C,n_$$.pos)}this.recreateResource(),this._endLoaded()},n_$C.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},n_$C.disposeResource=function(){this._source&&(n_$_.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},n_$z(0,n_$C,"_src",function(){return this.url}),n_$z(0,n_$C,"src",function(){return this.url}),n_$e.load=function(n_$N){return n_$X.loader.create(n_$N,null,null,n_$e)},n_$e}(),n_$SC=function(n_$C){function n_$a(n_$N,n_$C){n_$a.__super.call(this),void 0===n_$N&&(n_$N=.3),void 0===n_$C&&(n_$C=1e3),this._tempVector3=new n_$MC,this._position=new n_$MC,this._up=new n_$MC,this._forward=new n_$MC,this._right=new n_$MC,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=n_$fC.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=n_$N,this._farPlane=n_$C,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),n_$X.stage.on("resize",this,this._onScreenSizeChanged)}n_$G(n_$a,"laya.d3.core.BaseCamera",n_$C);var n_$N=n_$a.prototype;return n_$N._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var n_$N=this.scene._cameraPool,n_$C=n_$N.length-1,n_$a=0;n_$a<n_$C;n_$a++)if(n_$N[n_$a].renderingOrder>n_$N[n_$C].renderingOrder){var n_$u=n_$N[n_$a];n_$N[n_$a]=n_$N[n_$C],n_$N[n_$C]=n_$u}},n_$N._calculateProjectionMatrix=function(){},n_$N._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},n_$N._prepareCameraToRender=function(){n_$l._currentCameraCullingMask=this.cullingMask;var n_$N=this._shaderValues;n_$N.setValue(0,this.transform.position.elements),n_$N.setValue(5,this.forward.elements),n_$N.setValue(6,this.up.elements)},n_$N._prepareCameraViewProject=function(n_$N,n_$C){var n_$a=this._shaderValues;n_$a.setValue(1,n_$N.elements),n_$a.setValue(2,n_$C.elements)},n_$N._renderCamera=function(n_$N,n_$C,n_$a){},n_$N.addLayer=function(n_$N){29!==n_$N.number&&30!=n_$N.number&&(this.cullingMask=this.cullingMask|n_$N.mask)},n_$N.removeLayer=function(n_$N){29!==n_$N.number&&30!=n_$N.number&&(this.cullingMask=this.cullingMask&~n_$N.mask)},n_$N.addAllLayers=function(){this.cullingMask=2147483647},n_$N.removeAllLayers=function(){this.cullingMask=0|n_$l.getLayerByNumber(29).mask|n_$l.getLayerByNumber(30).mask},n_$N.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},n_$N.moveForward=function(n_$N){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=n_$N,this.transform.translate(this._tempVector3)},n_$N.moveRight=function(n_$N){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=n_$N,this.transform.translate(this._tempVector3)},n_$N.moveVertical=function(n_$N){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=n_$N,this.transform.translate(this._tempVector3,!1)},n_$N._addSelfRenderObjects=function(){var n_$N=this.scene._cameraPool,n_$C=n_$N.length;if(0<n_$C){for(var n_$a=n_$C-1;0<=n_$a;n_$a--)if(this.renderingOrder<=n_$N[n_$a].renderingOrder){n_$N.splice(n_$a+1,0,this);break}}else n_$N.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},n_$N._clearSelfRenderObjects=function(){var n_$N=this.scene._cameraPool;n_$N.splice(n_$N.indexOf(this),1)},n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,n_$X.stage.off("resize",this,this._onScreenSizeChanged),n_$C.prototype.destroy.call(this,n_$N)},n_$z(0,n_$N,"sky",function(){return this._sky},function(n_$N){(this._sky=n_$N)._ownerCamera=this}),n_$z(0,n_$N,"forward",function(){var n_$N=this.transform.worldMatrix.elements,n_$C=this._forward.elements;return n_$C[0]=-n_$N[8],n_$C[1]=-n_$N[9],n_$C[2]=-n_$N[10],this._forward}),n_$z(0,n_$N,"position",function(){var n_$N=this.transform.worldMatrix.elements,n_$C=this._position.elements;return n_$C[0]=n_$N[12],n_$C[1]=n_$N[13],n_$C[2]=n_$N[14],this._position}),n_$z(0,n_$N,"renderTarget",function(){return this._renderTarget},function(n_$N){null!=(this._renderTarget=n_$N)&&(this._renderTargetSize=n_$N.size)}),n_$z(0,n_$N,"up",function(){var n_$N=this.transform.worldMatrix.elements,n_$C=this._up.elements;return n_$C[0]=n_$N[4],n_$C[1]=n_$N[5],n_$C[2]=n_$N[6],this._up}),n_$z(0,n_$N,"right",function(){var n_$N=this.transform.worldMatrix.elements,n_$C=this._right.elements;return n_$C[0]=n_$N[0],n_$C[1]=n_$N[1],n_$C[2]=n_$N[2],this._right}),n_$z(0,n_$N,"renderTargetSize",function(){return this._renderTargetSize},function(n_$N){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$N,"fieldOfView",function(){return this._fieldOfView},function(n_$N){this._fieldOfView=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$N,"nearPlane",function(){return this._nearPlane},function(n_$N){this._nearPlane=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$N,"farPlane",function(){return this._farPlane},function(n_$N){this._farPlane=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$N,"orthographic",function(){return this._orthographic},function(n_$N){this._orthographic=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$N,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(n_$N){this._orthographicVerticalSize=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$N,"renderingOrder",function(){return this._renderingOrder},function(n_$N){this._renderingOrder=n_$N,this._sortCamerasByRenderingOrder()}),n_$a.CAMERAPOS=0,n_$a.VIEWMATRIX=1,n_$a.PROJECTMATRIX=2,n_$a.VPMATRIX=3,n_$a.VPMATRIX_NO_TRANSLATE=4,n_$a.CAMERADIRECTION=5,n_$a.CAMERAUP=6,n_$a.ENVIRONMENTDIFFUSE=7,n_$a.ENVIRONMENTSPECULAR=8,n_$a.SIMLODINFO=9,n_$a.DIFFUSEIRRADMATR=10,n_$a.DIFFUSEIRRADMATG=11,n_$a.DIFFUSEIRRADMATB=12,n_$a.HDREXPOSURE=13,n_$a.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",n_$a.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",n_$a.CLEARFLAG_SOLIDCOLOR=0,n_$a.CLEARFLAG_SKY=1,n_$a.CLEARFLAG_DEPTHONLY=2,n_$a.CLEARFLAG_NONE=3,n_$$(n_$a,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new n_$NC(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new n_$NC},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new n_$NC}]),n_$a}(n_$jC),n_$pC=function(n_$a){function n_$C(n_$N){this._render=null,this._geometryFilter=null,n_$C.__super.call(this,n_$N)}n_$G(n_$C,"laya.d3.core.RenderableSprite3D",n_$a);var n_$N=n_$C.prototype;return n_$N._addToInitStaticBatchManager=function(){},n_$N._setBelongScene=function(n_$N){n_$a.prototype._setBelongScene.call(this,n_$N),n_$N._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},n_$N._setUnBelongScene=function(){var n_$N=this._scene._renderableSprite3Ds,n_$C=n_$N.indexOf(this);n_$N.splice(n_$C,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),n_$a.prototype._setUnBelongScene.call(this)},n_$N._update=function(n_$N){(n_$N.owner=this)._activeInHierarchy&&(this._updateComponents(n_$N),this._render._updateOctreeNode(),this._lateUpdateComponents(n_$N),n_$E.spriteCount++,this._childs.length&&this._updateChilds(n_$N))},n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$a.prototype.destroy.call(this,n_$N),this._render._destroy(),this._render=null},n_$C.__init__=function(){n_$C.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=n_$C.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),n_$C.SAHDERDEFINE_LIGHTMAP=n_$C.shaderDefines.registerDefine("LIGHTMAP")},n_$C.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,n_$C.SAHDERDEFINE_LIGHTMAP=4,n_$C.LIGHTMAPSCALEOFFSET=2,n_$C.LIGHTMAP=3,n_$$(n_$C,["shaderDefines",function(){return this.shaderDefines=new n_$PC}]),n_$C}(n_$jC),n_$mC=(function(n_$N){function n_$u(n_$N,n_$C,n_$a){this._long=NaN,this._width=NaN,this._height=NaN,void 0===n_$N&&(n_$N=1),void 0===n_$C&&(n_$C=1),void 0===n_$a&&(n_$a=1),n_$u.__super.call(this),this._long=n_$N,this._width=n_$C,this._height=n_$a,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}n_$G(n_$u,"laya.d3.resource.models.BoxMesh",n_$BC);var n_$C=n_$u.prototype;n_$C.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var n_$N=n_$_N.vertexDeclaration,n_$C=(n_$N.vertexStride,this._long/2),n_$a=this._height/2,n_$u=this._width/2,n_$e=new Float32Array([-n_$C,n_$a,-n_$u,0,1,0,0,0,n_$C,n_$a,-n_$u,0,1,0,1,0,n_$C,n_$a,n_$u,0,1,0,1,1,-n_$C,n_$a,n_$u,0,1,0,0,1,-n_$C,-n_$a,-n_$u,0,-1,0,0,1,n_$C,-n_$a,-n_$u,0,-1,0,1,1,n_$C,-n_$a,n_$u,0,-1,0,1,0,-n_$C,-n_$a,n_$u,0,-1,0,0,0,-n_$C,n_$a,-n_$u,-1,0,0,0,0,-n_$C,n_$a,n_$u,-1,0,0,1,0,-n_$C,-n_$a,n_$u,-1,0,0,1,1,-n_$C,-n_$a,-n_$u,-1,0,0,0,1,n_$C,n_$a,-n_$u,1,0,0,1,0,n_$C,n_$a,n_$u,1,0,0,0,0,n_$C,-n_$a,n_$u,1,0,0,0,1,n_$C,-n_$a,-n_$u,1,0,0,1,1,-n_$C,n_$a,n_$u,0,0,1,0,0,n_$C,n_$a,n_$u,0,0,1,1,0,n_$C,-n_$a,n_$u,0,0,1,1,1,-n_$C,-n_$a,n_$u,0,0,1,0,1,-n_$C,n_$a,-n_$u,0,0,-1,1,0,n_$C,n_$a,-n_$u,0,0,-1,0,0,n_$C,-n_$a,-n_$u,0,0,-1,0,1,-n_$C,-n_$a,-n_$u,0,0,-1,1,1]),n_$J=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new n_$RC(n_$N,this._numberVertices,35044,!0),this._indexBuffer=new n_$LC("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(n_$e),this._indexBuffer.setData(n_$J),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},n_$z(0,n_$C,"long",function(){return this._long},function(n_$N){this._long!==n_$N&&(this._long=n_$N,this.releaseResource(),this.activeResource())}),n_$z(0,n_$C,"width",function(){return this._width},function(n_$N){this._width!==n_$N&&(this._width=n_$N,this.releaseResource(),this.activeResource())}),n_$z(0,n_$C,"height",function(){return this._height},function(n_$N){this._height!==n_$N&&(this._height=n_$N,this.releaseResource(),this.activeResource())})}(),function(n_$N){function n_$e(n_$N,n_$C,n_$a,n_$u){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===n_$N&&(n_$N=10),void 0===n_$C&&(n_$C=10),void 0===n_$a&&(n_$a=10),void 0===n_$u&&(n_$u=10),n_$e.__super.call(this),this._long=n_$N,this._width=n_$C,this._stacks=n_$a,this._slices=n_$u,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}n_$G(n_$e,"laya.d3.resource.models.PlaneMesh",n_$BC);var n_$C=n_$e.prototype;n_$C.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var n_$N=new Uint16Array(this._numberIndices),n_$C=n_$_N.vertexDeclaration,n_$a=n_$C.vertexStride/4,n_$u=new Float32Array(this._numberVertices*n_$a),n_$e=this._long/2,n_$J=this._width/2,n_$M=this._long/this._stacks,n_$n=this._width/this._slices,n_$V=0,n_$A=0;n_$A<=this._slices;n_$A++)for(var n_$P=0;n_$P<=this._stacks;n_$P++)n_$u[n_$V++]=n_$P*n_$M-n_$e,n_$u[n_$V++]=0,n_$u[n_$V++]=n_$A*n_$n-n_$J,n_$u[n_$V++]=0,n_$u[n_$V++]=1,n_$u[n_$V++]=0,n_$u[n_$V++]=1*n_$P/this._stacks,n_$u[n_$V++]=1*n_$A/this._slices;var n_$$=0;for(n_$A=0;n_$A<this._slices;n_$A++)for(n_$P=0;n_$P<this._stacks;n_$P++)n_$N[n_$$++]=(n_$A+1)*(this._stacks+1)+n_$P,n_$N[n_$$++]=n_$A*(this._stacks+1)+n_$P,n_$N[n_$$++]=(n_$A+1)*(this._stacks+1)+n_$P+1,n_$N[n_$$++]=n_$A*(this._stacks+1)+n_$P,n_$N[n_$$++]=n_$A*(this._stacks+1)+n_$P+1,n_$N[n_$$++]=(n_$A+1)*(this._stacks+1)+n_$P+1;this._vertexBuffer=new n_$RC(n_$C,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new n_$LC("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(n_$u),this._indexBuffer.setData(n_$N),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},n_$z(0,n_$C,"long",function(){return this._long},function(n_$N){this._long!==n_$N&&(this._long=n_$N,this.releaseResource(),this.activeResource())}),n_$z(0,n_$C,"width",function(){return this._width},function(n_$N){this._width!==n_$N&&(this._width=n_$N,this.releaseResource(),this.activeResource())}),n_$z(0,n_$C,"stacks",function(){return this._stacks},function(n_$N){this._stacks!==n_$N&&(this._stacks=n_$N,this.releaseResource(),this.activeResource())}),n_$z(0,n_$C,"slices",function(){return this._slices},function(n_$N){this._slices!==n_$N&&(this._slices=n_$N,this.releaseResource(),this.activeResource())})}(),function(n_$N){function n_$M(n_$N,n_$C,n_$a){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=.3),void 0===n_$a&&(n_$a=1e3),this._viewMatrix=new n_$NC,this._projectionMatrix=new n_$NC,this._projectionViewMatrix=new n_$NC,this._viewport=new n_$VC(0,0,0,0),this._normalizedViewport=new n_$VC(0,0,1,1),this._aspectRatio=n_$N,this._boundFrustumUpdate=!0,this._boundFrustum=new n_$IN(n_$NC.DEFAULT),n_$M.__super.call(this,n_$C,n_$a),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}n_$G(n_$M,"laya.d3.core.Camera",n_$SC);var n_$C=n_$M.prototype;return n_$C._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},n_$C._parseCustomProps=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$a.clearColor;this.clearColor=new n_$nC(n_$e[0],n_$e[1],n_$e[2],n_$e[3]);var n_$J=n_$a.viewport;this.normalizedViewport=new n_$VC(n_$J[0],n_$J[1],n_$J[2],n_$J[3])},n_$C._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var n_$N=this.orthographicVerticalSize*this.aspectRatio*.5,n_$C=.5*this.orthographicVerticalSize;n_$NC.createOrthoOffCenterRH(-n_$N,n_$N,-n_$C,n_$C,this.nearPlane,this.farPlane,this._projectionMatrix)}else n_$NC.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},n_$C._update=function(n_$N){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,n_$N)},n_$C._renderCamera=function(n_$N,n_$C,n_$a){var n_$u,n_$e;n_$a.parallelSplitShadowMaps[0]&&n_$a._renderShadowMap(n_$N,n_$C,this),(n_$C.camera=this)._prepareCameraToRender(),n_$a._preRenderUpdateComponents(n_$C),n_$u=n_$C._viewMatrix=this.viewMatrix;var n_$J=this._renderTarget;n_$J?(n_$J.start(),n_$NC.multiply(n_$SC._invertYScaleMatrix,this._projectionMatrix,n_$SC._invertYProjectionMatrix),n_$NC.multiply(n_$SC._invertYScaleMatrix,this.projectionViewMatrix,n_$SC._invertYProjectionViewMatrix),n_$e=n_$C._projectionMatrix=n_$SC._invertYProjectionMatrix,n_$C._projectionViewMatrix=n_$SC._invertYProjectionViewMatrix):(n_$e=n_$C._projectionMatrix=this._projectionMatrix,n_$C._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(n_$u,n_$e),n_$C._viewport=this.viewport,n_$a._preRenderScene(n_$N,n_$C,this.boundFrustum),n_$a._clear(n_$N,n_$C),n_$a._renderScene(n_$N,n_$C),n_$a._postRenderUpdateComponents(n_$C),n_$J&&n_$J.end()},n_$C.viewportPointToRay=function(n_$N,n_$C){n_$zC.calculateCursorRay(n_$N,this.viewport,this._projectionMatrix,this.viewMatrix,null,n_$C)},n_$C.normalizedViewportPointToRay=function(n_$N,n_$C){var n_$a=n_$M._tempVector20,n_$u=this.viewport,n_$e=n_$N.elements,n_$J=n_$a.elements;n_$J[0]=n_$e[0]*n_$u.width,n_$J[1]=n_$e[1]*n_$u.height,n_$zC.calculateCursorRay(n_$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,n_$C)},n_$C.worldToViewportPoint=function(n_$N,n_$C){n_$NC.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(n_$N,this._projectionViewMatrix,n_$C);var n_$a=n_$C.elements;n_$a[0]=n_$a[0]/n_$X.stage.clientScaleX,n_$a[1]=n_$a[1]/n_$X.stage.clientScaleY},n_$C.worldToNormalizedViewportPoint=function(n_$N,n_$C){n_$NC.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(n_$N,this._projectionViewMatrix,n_$C);var n_$a=n_$C.elements;n_$a[0]=n_$a[0]/n_$X.stage.clientScaleX,n_$a[1]=n_$a[1]/n_$X.stage.clientScaleY},n_$C.convertScreenCoordToOrthographicCoord=function(n_$N,n_$C){if(this._orthographic){var n_$a=n_$o.clientWidth,n_$u=n_$o.clientHeight,n_$e=this.orthographicVerticalSize*this.aspectRatio/n_$a,n_$J=this.orthographicVerticalSize/n_$u,n_$M=n_$N.elements,n_$n=n_$C.elements;return n_$n[0]=(-n_$a/2+n_$M[0])*n_$e,n_$n[1]=(n_$u/2-n_$M[1])*n_$J,n_$n[2]=(this.nearPlane-this.farPlane)*(n_$M[2]+1)/2-this.nearPlane,n_$MC.transformCoordinate(n_$C,this.transform.worldMatrix,n_$C),!0}return!1},n_$z(0,n_$C,"projectionViewMatrix",function(){return n_$NC.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),n_$z(0,n_$C,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var n_$N=this.viewport;return n_$N.width/n_$N.height},function(n_$N){if(n_$N<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$C,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),n_$z(0,n_$C,"needViewport",function(){var n_$N=this.normalizedViewport;return 0===n_$N.x&&0===n_$N.y&&1===n_$N.width&&1===n_$N.height}),n_$z(0,n_$C,"viewport",function(){if(this._viewportExpressedInClipSpace){var n_$N=this._normalizedViewport,n_$C=this.renderTargetSize,n_$a=n_$C.width,n_$u=n_$C.height;this._viewport.x=n_$N.x*n_$a,this._viewport.y=n_$N.y*n_$u,this._viewport.width=n_$N.width*n_$a,this._viewport.height=n_$N.height*n_$u}return this._viewport},function(n_$N){if(null!=this.renderTarget&&(n_$N.x<0||n_$N.y<0||0==n_$N.width||0==n_$N.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$C,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var n_$N=this._viewport,n_$C=this.renderTargetSize,n_$a=n_$C.width,n_$u=n_$C.height;this._normalizedViewport.x=n_$N.x/n_$a,this._normalizedViewport.y=n_$N.y/n_$u,this._normalizedViewport.width=n_$N.width/n_$a,this._normalizedViewport.height=n_$N.height/n_$u}return this._normalizedViewport},function(n_$N){n_$N.x<0&&(n_$N.x=0,console.warn("Camera: viewport.x must large than 0.0.")),n_$N.y<0&&(n_$N.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<n_$N.x+n_$N.width&&(n_$N.width=1-n_$N.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<n_$N.y+n_$N.height&&(n_$N.height=1-n_$N.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=n_$N,this._calculateProjectionMatrix()}),n_$z(0,n_$C,"projectionMatrix",function(){return this._projectionMatrix},function(n_$N){this._projectionMatrix=n_$N,this._useUserProjectionMatrix=!0}),n_$z(0,n_$C,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),n_$$(n_$M,["_tempVector20",function(){return this._tempVector20=new n_$JC}]),n_$M}()),n_$bC=function(n_$a){function n_$u(n_$N,n_$C){n_$u.__super.call(this,n_$C),this._geometryFilter=new n_$QC(this),this._render=new n_$lC(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),n_$N&&(this._geometryFilter.sharedMesh=n_$N)instanceof laya.d3.resource.models.Mesh&&(n_$N.loaded?this._render.sharedMaterials=n_$N.materials:n_$N.once("loaded",this,this._applyMeshMaterials))}n_$G(n_$u,"laya.d3.core.MeshSprite3D",n_$a);var n_$N=n_$u.prototype;return n_$N._changeRenderObjectByMesh=function(n_$N){var n_$C=this._render._renderElements,n_$a=n_$C[n_$N];n_$a||(n_$a=n_$C[n_$N]=new n_$cC),n_$a._render=this._render;var n_$u=this._render.sharedMaterials[n_$N];n_$u||(n_$u=n_$TC.defaultMaterial);var n_$e=this._geometryFilter.sharedMesh.getRenderElement(n_$N);return n_$a._mainSortID=this._getSortID(n_$e,n_$u),n_$a._sprite3D=this,n_$a.renderObj=n_$e,n_$a._material=n_$u,n_$a},n_$N._changeRenderObjectByMaterial=function(n_$N,n_$C){var n_$a=this._render._renderElements[n_$N];n_$C||(n_$C=n_$TC.defaultMaterial);var n_$u=this._geometryFilter.sharedMesh.getRenderElement(n_$N);return n_$a._mainSortID=this._getSortID(n_$u,n_$C),n_$a._sprite3D=this,n_$a.renderObj=n_$u,n_$a._material=n_$C,n_$a},n_$N._changeRenderObjectsByMesh=function(){var n_$N=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=n_$N;for(var n_$C=0;n_$C<n_$N;n_$C++)this._changeRenderObjectByMesh(n_$C)},n_$N._onMeshChanged=function(n_$N){var n_$C=n_$N.sharedMesh;n_$C.loaded?this._changeRenderObjectsByMesh():n_$C.once("loaded",this,this._onMeshLoaded)},n_$N._onMeshLoaded=function(n_$N){n_$N===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},n_$N._onMaterialChanged=function(n_$N,n_$C,n_$a){n_$C<this._render._renderElements.length&&this._changeRenderObjectByMaterial(n_$C,n_$a)},n_$N._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},n_$N._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},n_$N._parseCustomProps=function(n_$N,n_$C,n_$a,n_$u){var n_$e=this.meshRender,n_$J=n_$a.lightmapIndex;null!=n_$J&&(n_$e.lightmapIndex=n_$J);var n_$M,n_$n,n_$V=n_$a.lightmapScaleOffset;if(n_$V&&(n_$e.lightmapScaleOffset=new n_$nC(n_$V[0],n_$V[1],n_$V[2],n_$V[3])),n_$u.instanceParams)(n_$M=n_$u.instanceParams.loadPath)&&(n_$n=n_$g.getRes(n_$C[n_$M]),(this.meshFilter.sharedMesh=n_$n).loaded?n_$e.sharedMaterials=n_$n.materials:n_$n.once("loaded",this,this._applyMeshMaterials));else{(n_$M=n_$a.meshPath)&&(n_$n=n_$g.getRes(n_$C[n_$M]),this.meshFilter.sharedMesh=n_$n);var n_$A=n_$a.materials;if(n_$A){var n_$P=n_$e.sharedMaterials,n_$$=n_$A.length;n_$P.length=n_$$;for(var n_$O=0;n_$O<n_$$;n_$O++)n_$P[n_$O]=n_$g.getRes(n_$C[n_$A[n_$O].path]);n_$e.sharedMaterials=n_$P}}},n_$N._applyMeshMaterials=function(n_$N){for(var n_$C=this._render.sharedMaterials,n_$a=n_$N.materials,n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$u++)n_$C[n_$u]||(n_$C[n_$u]=n_$a[n_$u]);this._render.sharedMaterials=n_$C},n_$N._addToInitStaticBatchManager=function(){n_$u._staticBatchManager._addInitBatchSprite(this)},n_$N.cloneTo=function(n_$N){var n_$C=n_$N;n_$C._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var n_$a=this._render,n_$u=n_$C._render;n_$u.enable=n_$a.enable,n_$u.sharedMaterials=n_$a.sharedMaterials,n_$u.castShadow=n_$a.castShadow;var n_$e=n_$a.lightmapScaleOffset;n_$e&&(n_$u.lightmapScaleOffset=n_$e.clone()),n_$u.lightmapIndex=n_$a.lightmapIndex,n_$u.receiveShadow=n_$a.receiveShadow,n_$u.sortingFudge=n_$a.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,n_$N)},n_$N.destroy=function(n_$N){if(void 0===n_$N&&(n_$N=!0),!this.destroyed){var n_$C=this.meshFilter.sharedMesh;null!=n_$C&&(n_$C.loaded||n_$C.off("loaded",this,this._applyMeshMaterials)),n_$a.prototype.destroy.call(this,n_$N),this._geometryFilter._destroy()}},n_$z(0,n_$N,"meshFilter",function(){return this._geometryFilter}),n_$z(0,n_$N,"meshRender",function(){return this._render}),n_$u.__init__=function(){n_$uN._staticBatchManagers.push(n_$u._staticBatchManager)},n_$u.load=function(n_$N){return n_$X.loader.create(n_$N,null,null,n_$u)},n_$$(n_$u,["_staticBatchManager",function(){return this._staticBatchManager=new n_$FC}]),n_$u}(n_$pC)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(n_$N,n_$C){"use strict";for(var n_$a in Object.defineProperty(n_$C,"__esModule",{value:!0}),Laya){var n_$u=Laya[n_$a];n_$u&&n_$u.__isclass&&(n_$C[n_$a]=n_$u)}}),function(n_$N,n_$C,n_$eN){n_$eN.un,n_$eN.uns;var n_$a=n_$eN.static,n_$u=n_$eN.class,n_$J=n_$eN.getset,n_$f=n_$eN.__newvec,n_$n=laya.maths.Bezier,n_$$=laya.utils.Browser,n_$_N=laya.utils.Byte,n_$e=(laya.events.Event,laya.events.EventDispatcher),n_$M=laya.display.Graphics,n_$V=(laya.resource.HTMLCanvas,laya.utils.Handler),n_$A=laya.net.Loader,n_$O=laya.maths.MathUtil,n_$dN=laya.maths.Matrix,n_$t=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),n_$P=(laya.renders.RenderContext,laya.resource.Resource),n_$G=laya.utils.RunDriver,n_$JN=laya.display.Sprite,n_$z=laya.utils.Stat,n_$QN=laya.resource.Texture,n_$g=(laya.net.URL,laya.utils.Utils),n_$d=function(){function n_$N(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return n_$u(n_$N,"laya.ani.AnimationContent"),n_$N}(),n_$Q=function(){function n_$N(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return n_$u(n_$N,"laya.ani.AnimationNodeContent"),n_$N}(),n_$W=function(){function n_$N(){}return n_$u(n_$N,"laya.ani.AnimationParser01"),n_$N.parse=function(n_$N,n_$C){var n_$a=n_$C.__getBuffer(),n_$u=0,n_$e=0,n_$J=0,n_$M=0,n_$n=0,n_$V=0,n_$A=0,n_$P=n_$C.readUTFString();n_$N._aniClassName=n_$P;var n_$$,n_$O=n_$C.readUTFString().split("\n"),n_$G=n_$C.getUint8(),n_$z=n_$C.getUint32(),n_$f=n_$C.getUint32();0<n_$z&&(n_$$=n_$a.slice(n_$z,n_$f));var n_$t=new n_$_N(n_$$);for(0<n_$f&&(n_$N._publicExtData=n_$a.slice(n_$f,n_$a.byteLength)),n_$N._useParent=!!n_$C.getUint8(),n_$N._anis.length=n_$G,n_$u=0;n_$u<n_$G;n_$u++){var n_$g=n_$N._anis[n_$u]=new n_$d;n_$g.nodes=new Array;var n_$x=n_$g.name=n_$O[n_$C.getUint16()];n_$N._aniMap[n_$x]=n_$u,n_$g.bone3DMap={},n_$g.playTime=n_$C.getFloat32(),n_$g.playTime<=0&&console.error("播放时间不能为0  url="+n_$N.url+" name="+n_$g.name);var n_$W=n_$g.nodes.length=n_$C.getUint8();for(n_$e=n_$g.totalKeyframeDatasLength=0;n_$e<n_$W;n_$e++){var n_$v=n_$g.nodes[n_$e]=new n_$Q;n_$v.childs=[];var n_$X=n_$C.getInt16();0<=n_$X&&(n_$v.name=n_$O[n_$X],n_$g.bone3DMap[n_$v.name]=n_$e),n_$v.keyFrame=new Array,n_$v.parentIndex=n_$C.getInt16(),-1==n_$v.parentIndex?n_$v.parent=null:n_$v.parent=n_$g.nodes[n_$v.parentIndex],n_$v.lerpType=n_$C.getUint8();var n_$r=n_$C.getUint32();n_$t.pos=n_$r;var n_$c=n_$v.keyframeWidth=n_$t.getUint16();if(n_$g.totalKeyframeDatasLength+=n_$c,0===n_$v.lerpType||1===n_$v.lerpType)for(n_$v.interpolationMethod=[],n_$v.interpolationMethod.length=n_$c,n_$J=0;n_$J<n_$c;n_$J++)n_$v.interpolationMethod[n_$J]=n_$j.interpolation[n_$t.getUint8()];null!=n_$v.parent&&n_$v.parent.childs.push(n_$v);var n_$E=n_$C.getUint16();0<n_$E&&(n_$v.extenData=n_$a.slice(n_$C.pos,n_$C.pos+n_$E),n_$C.pos+=n_$E);var n_$F,n_$D=n_$C.getUint16(),n_$s=0;for(n_$J=0,n_$M=n_$v.keyFrame.length=n_$D;n_$J<n_$M;n_$J++){if((n_$F=n_$v.keyFrame[n_$J]=new n_$l).duration=n_$C.getFloat32(),n_$F.startTime=n_$s,2===n_$v.lerpType){n_$F.interpolationData=[];var n_$q,n_$_=n_$C.getUint8();switch(n_$q=n_$C.getFloat32()){case 254:for(n_$F.interpolationData.length=n_$c,n_$A=0;n_$A<n_$c;n_$A++)n_$F.interpolationData[n_$A]=0;break;case 255:for(n_$F.interpolationData.length=n_$c,n_$A=0;n_$A<n_$c;n_$A++)n_$F.interpolationData[n_$A]=5;break;default:for(n_$F.interpolationData.push(n_$q),n_$V=1;n_$V<n_$_;n_$V++)n_$F.interpolationData.push(n_$C.getFloat32())}}for(n_$F.data=new Float32Array(n_$c),n_$n=0;n_$n<n_$c;n_$n++)n_$F.data[n_$n]=n_$C.getFloat32(),-1e-8<n_$F.data[n_$n]&&n_$F.data[n_$n]<1e-8&&(n_$F.data[n_$n]=0);n_$s+=n_$F.duration}n_$F.startTime=n_$g.playTime,n_$v.playTime=n_$g.playTime,n_$N._calculateKeyFrame(n_$v,n_$D,n_$c)}}},n_$N}(),n_$v=function(){function n_$X(){}return n_$u(n_$X,"laya.ani.AnimationParser02"),n_$X.READ_DATA=function(){n_$X._DATA.offset=n_$X._reader.getUint32(),n_$X._DATA.size=n_$X._reader.getUint32()},n_$X.READ_BLOCK=function(){for(var n_$N=n_$X._BLOCK.count=n_$X._reader.getUint16(),n_$C=n_$X._BLOCK.blockStarts=[],n_$a=n_$X._BLOCK.blockLengths=[],n_$u=0;n_$u<n_$N;n_$u++)n_$C.push(n_$X._reader.getUint32()),n_$a.push(n_$X._reader.getUint32())},n_$X.READ_STRINGS=function(){var n_$N=n_$X._reader.getUint32(),n_$C=n_$X._reader.getUint16(),n_$a=n_$X._reader.pos;n_$X._reader.pos=n_$N+n_$X._DATA.offset;for(var n_$u=0;n_$u<n_$C;n_$u++)n_$X._strings[n_$u]=n_$X._reader.readUTFString();n_$X._reader.pos=n_$a},n_$X.parse=function(n_$N,n_$C){n_$X._templet=n_$N;(n_$X._reader=n_$C).__getBuffer();n_$X.READ_DATA(),n_$X.READ_BLOCK(),n_$X.READ_STRINGS();for(var n_$a=0,n_$u=n_$X._BLOCK.count;n_$a<n_$u;n_$a++){var n_$e=n_$C.getUint16(),n_$J=n_$X._strings[n_$e],n_$M=n_$X["READ_"+n_$J];if(null==n_$M)throw new Error("model file err,no this function:"+n_$e+" "+n_$J);n_$M.call()}},n_$X.READ_ANIMATIONS=function(){var n_$N=n_$X._reader,n_$C=n_$N.__getBuffer(),n_$a=0,n_$u=0,n_$e=0,n_$J=0,n_$M=n_$N.getUint16(),n_$n=[];for(n_$n.length=n_$M,n_$a=0;n_$a<n_$M;n_$a++)n_$n[n_$a]=n_$j.interpolation[n_$N.getByte()];var n_$V=n_$N.getUint8();for(n_$X._templet._anis.length=n_$V,n_$a=0;n_$a<n_$V;n_$a++){var n_$A=n_$X._templet._anis[n_$a]={};n_$A.nodes=new Array;var n_$P=n_$A.name=n_$X._strings[n_$N.getUint16()];n_$X._templet._aniMap[n_$P]=n_$a,n_$A.bone3DMap={},n_$A.playTime=n_$N.getFloat32();var n_$$=n_$A.nodes.length=n_$N.getInt16();for(n_$u=n_$A.totalKeyframeDatasLength=0;n_$u<n_$$;n_$u++){var n_$O=n_$A.nodes[n_$u]={};n_$O.keyframeWidth=n_$M,n_$O.childs=[];var n_$G=n_$N.getUint16();0<=n_$G&&(n_$O.name=n_$X._strings[n_$G],n_$A.bone3DMap[n_$O.name]=n_$u),n_$O.keyFrame=new Array,n_$O.parentIndex=n_$N.getInt16(),-1==n_$O.parentIndex?n_$O.parent=null:n_$O.parent=n_$A.nodes[n_$O.parentIndex],n_$A.totalKeyframeDatasLength+=n_$M,n_$O.interpolationMethod=n_$n,null!=n_$O.parent&&n_$O.parent.childs.push(n_$O);var n_$z=n_$N.getUint16(),n_$f=null,n_$t=null;for(n_$e=0,n_$J=n_$O.keyFrame.length=n_$z;n_$e<n_$J;n_$e++){(n_$f=n_$O.keyFrame[n_$e]={}).startTime=n_$N.getFloat32(),n_$t&&(n_$t.duration=n_$f.startTime-n_$t.startTime);var n_$g=n_$X._DATA.offset,n_$x=n_$N.getUint32(),n_$W=4*n_$M,n_$v=n_$C.slice(n_$g+n_$x,n_$g+n_$x+n_$W);n_$f.data=new Float32Array(n_$v),n_$t=n_$f}n_$f.duration=0,n_$O.playTime=n_$A.playTime,n_$X._templet._calculateKeyFrame(n_$O,n_$z,n_$M)}}},n_$X._templet=null,n_$X._reader=null,n_$X._strings=[],n_$a(n_$X,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),n_$X}(),n_$lN=(function(){function n_$N(){}n_$u(n_$N,"laya.ani.AnimationState"),n_$N.stopped=0,n_$N.paused=1,n_$N.playing=2}(),function(){function n_$e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new n_$pN,this.resultMatrix=new n_$dN,this._children=[]}n_$u(n_$e,"laya.ani.bone.Bone");var n_$N=n_$e.prototype;return n_$N.setTempMatrix=function(n_$N){this._tempMatrix=n_$N;var n_$C,n_$a=0;for(n_$a=0,n_$C=this._children.length;n_$a<n_$C;n_$a++)this._children[n_$a].setTempMatrix(this._tempMatrix)},n_$N.update=function(n_$N){var n_$C;if(this.rotation=this.transform.skX,n_$N)n_$C=this.resultTransform.getMatrix(),n_$dN.mul(n_$C,n_$N,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)n_$C=this.resultTransform.getMatrix(),n_$dN.mul(n_$C,this.parentBone.resultMatrix,this.resultMatrix);else{var n_$a=this.parentBone,n_$u=NaN,n_$e=NaN,n_$J=NaN,n_$M=this.parentBone.resultMatrix;n_$C=this.resultTransform.getMatrix();var n_$n=n_$M.a*n_$C.tx+n_$M.c*n_$C.ty+n_$M.tx,n_$V=n_$M.b*n_$C.tx+n_$M.d*n_$C.ty+n_$M.ty,n_$A=new n_$dN;this.inheritRotation?(n_$u=Math.atan2(n_$a.resultMatrix.b,n_$a.resultMatrix.a),n_$e=Math.cos(n_$u),n_$J=Math.sin(n_$u),n_$A.setTo(n_$e,n_$J,-n_$J,n_$e,0,0),n_$dN.mul(this._tempMatrix,n_$A,n_$dN.TEMP),n_$dN.TEMP.copyTo(n_$A),n_$C=this.resultTransform.getMatrix(),n_$dN.mul(n_$C,n_$A,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,n_$C=this.resultTransform.getMatrix(),n_$dN.TEMP.identity(),n_$dN.TEMP.d=this.d,n_$dN.mul(n_$C,n_$dN.TEMP,this.resultMatrix)),this.resultMatrix.tx=n_$n,this.resultMatrix.ty=n_$V}else(n_$C=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var n_$P,n_$$=0;for(n_$$=0,n_$P=this._children.length;n_$$<n_$P;n_$$++)this._children[n_$$].update()},n_$N.updateChild=function(){var n_$N,n_$C=0;for(n_$C=0,n_$N=this._children.length;n_$C<n_$N;n_$C++)this._children[n_$C].update()},n_$N.setRotation=function(n_$N){this._sprite&&(this._sprite.rotation=180*n_$N/Math.PI)},n_$N.updateDraw=function(n_$N,n_$C){n_$e.ShowBones&&!n_$e.ShowBones[this.name]||(this._sprite||(this._sprite=new n_$JN,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),n_$eN.stage.addChild(this._sprite)),this._sprite.x=n_$N+this.resultMatrix.tx,this._sprite.y=n_$C+this.resultMatrix.ty);var n_$a,n_$u=0;for(n_$u=0,n_$a=this._children.length;n_$u<n_$a;n_$u++)this._children[n_$u].updateDraw(n_$N,n_$C)},n_$N.addChild=function(n_$N){this._children.push(n_$N),n_$N.parentBone=this},n_$N.findBone=function(n_$N){if(this.name==n_$N)return this;var n_$C,n_$a,n_$u=0;for(n_$u=0,n_$C=this._children.length;n_$u<n_$C;n_$u++)if(n_$a=this._children[n_$u].findBone(n_$N))return n_$a;return null},n_$N.localToWorld=function(n_$N){var n_$C=n_$N[0],n_$a=n_$N[1];n_$N[0]=n_$C*this.resultMatrix.a+n_$a*this.resultMatrix.c+this.resultMatrix.tx,n_$N[1]=n_$C*this.resultMatrix.b+n_$a*this.resultMatrix.d+this.resultMatrix.ty},n_$e.ShowBones={},n_$e}()),n_$iN=function(){function n_$f(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}n_$u(n_$f,"laya.ani.bone.BoneSlot");var n_$N=n_$f.prototype;return n_$N.showSlotData=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0),this.currSlotData=n_$N,n_$C&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},n_$N.showDisplayByName=function(n_$N){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(n_$N))},n_$N.replaceDisplayByName=function(n_$N,n_$C){if(this.currSlotData){var n_$a;n_$a=this.currSlotData.getDisplayByName(n_$N);var n_$u;n_$u=this.currSlotData.getDisplayByName(n_$C),this.replaceDisplayByIndex(n_$a,n_$u)}},n_$N.replaceDisplayByIndex=function(n_$N,n_$C){this.currSlotData&&(this._replaceDic[n_$N]=n_$C,this.displayIndex==n_$N&&this.showDisplayByIndex(n_$N))},n_$N.showDisplayByIndex=function(n_$N){if(null!=this._replaceDic[n_$N]&&(n_$N=this._replaceDic[n_$N]),this.currSlotData&&-1<n_$N&&n_$N<this.currSlotData.displayArr.length){if(this.displayIndex=n_$N,this.currDisplayData=this.currSlotData.displayArr[n_$N],this.currDisplayData){var n_$C=this.currDisplayData.name;this.currTexture=this.templet.getTexture(n_$C),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!n_$t.isConchApp||n_$t.isConchApp&&"0.9.15"<n_$JN.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},n_$N.replaceSkin=function(n_$N){this._diyTexture=n_$N,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},n_$N.setParentMatrix=function(n_$N){this._parentMatrix=n_$N},n_$N.draw=function(n_$N,n_$C,n_$a,n_$u){if(void 0===n_$a&&(n_$a=!1),void 0===n_$u&&(n_$u=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var n_$e,n_$J=this.currTexture;switch(this._diyTexture&&(n_$J=this._diyTexture),this.currDisplayData.type){case 0:if(n_$N){var n_$M=this.getDisplayMatrix();if(this._parentMatrix){var n_$n=!1;if(n_$M){var n_$V;if(n_$dN.mul(n_$M,this._parentMatrix,n_$dN.TEMP),n_$V=n_$a?(null==this._resultMatrix&&(this._resultMatrix=new n_$dN),this._resultMatrix):new n_$dN,!n_$t.isWebGL&&this.currDisplayData.uvs||n_$t.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var n_$A=n_$f._tempMatrix;n_$A.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(n_$A.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(n_$n=!0,n_$A.rotate(-Math.PI/2)),n_$dN.mul(n_$A,n_$dN.TEMP,n_$V)}else n_$dN.TEMP.copyTo(n_$V);n_$n?n_$N.drawTexture(n_$J,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,n_$V):n_$N.drawTexture(n_$J,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,n_$V)}}}break;case 1:if(null==(n_$e=n_$a?(null==this._skinSprite&&(this._skinSprite=n_$f.createSkinMesh()),this._skinSprite):n_$f.createSkinMesh()))return;var n_$P;if(null==this.currDisplayData.bones){var n_$$,n_$O=this.currDisplayData.weights;this.deformData&&(n_$O=this.deformData),n_$$=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=n_$c.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=n_$c.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=n_$O;this.currDisplayData.triangles.length;n_$P=this.currDisplayData.triangles,n_$e.init2(n_$J,null,n_$P,this._mVerticleArr,n_$$);var n_$G,n_$z=this.getDisplayMatrix();if(this._parentMatrix)if(n_$z)n_$dN.mul(n_$z,this._parentMatrix,n_$dN.TEMP),n_$G=n_$a?(null==this._resultMatrix&&(this._resultMatrix=new n_$dN),this._resultMatrix):new n_$dN,n_$dN.TEMP.copyTo(n_$G),n_$e.transform=n_$G}else this.skinMesh(n_$C,n_$e,n_$u);n_$N.drawSkin(n_$e);break;case 2:if(null==(n_$e=n_$a?(null==this._skinSprite&&(this._skinSprite=n_$f.createSkinMesh()),this._skinSprite):n_$f.createSkinMesh()))return;this.skinMesh(n_$C,n_$e,n_$u),n_$N.drawSkin(n_$e)}}},n_$N.skinMesh=function(n_$N,n_$C,n_$a){var n_$u,n_$e=this.currTexture,n_$J=this.currDisplayData.bones;n_$u=this._diyTexture?(n_$e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=n_$c.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=n_$c.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var n_$M,n_$n,n_$V=this.currDisplayData.weights,n_$A=this.currDisplayData.triangles,n_$P=0,n_$$=0,n_$O=0,n_$G=NaN,n_$z=NaN,n_$f=0,n_$t=0,n_$g=[],n_$x=0,n_$W=0;if(this.deformData&&0<this.deformData.length){var n_$v=0;for(n_$x=0,n_$W=n_$J.length;n_$x<n_$W;){for(n_$O=n_$J[n_$x++]+n_$x,n_$$=n_$P=0;n_$x<n_$O;n_$x++)n_$n=n_$N[n_$J[n_$x]],n_$G=n_$V[n_$f]+this.deformData[n_$v++],n_$z=n_$V[n_$f+1]+this.deformData[n_$v++],n_$t=n_$V[n_$f+2],n_$P+=(n_$G*n_$n.a+n_$z*n_$n.c+n_$n.tx)*n_$t,n_$$+=(n_$G*n_$n.b+n_$z*n_$n.d+n_$n.ty)*n_$t,n_$f+=3;n_$g.push(n_$P,n_$$)}}else for(n_$x=0,n_$W=n_$J.length;n_$x<n_$W;){for(n_$O=n_$J[n_$x++]+n_$x,n_$$=n_$P=0;n_$x<n_$O;n_$x++)n_$n=n_$N[n_$J[n_$x]],n_$G=n_$V[n_$f],n_$z=n_$V[n_$f+1],n_$t=n_$V[n_$f+2],n_$P+=(n_$G*n_$n.a+n_$z*n_$n.c+n_$n.tx)*n_$t,n_$$+=(n_$G*n_$n.b+n_$z*n_$n.d+n_$n.ty)*n_$t,n_$f+=3;n_$g.push(n_$P,n_$$)}this._mVerticleArr=n_$g,n_$M=n_$A,n_$C.init2(n_$e,null,n_$M,this._mVerticleArr,n_$u)},n_$N.drawBonePoint=function(n_$N){n_$N&&this._parentMatrix&&n_$N.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},n_$N.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},n_$N.getMatrix=function(){return this._resultMatrix},n_$N.copy=function(){var n_$N=new n_$f;return n_$N.type="copy",n_$N.name=this.name,n_$N.attachmentName=this.attachmentName,n_$N.srcDisplayIndex=this.srcDisplayIndex,n_$N.parent=this.parent,n_$N.displayIndex=this.displayIndex,n_$N.templet=this.templet,n_$N.currSlotData=this.currSlotData,n_$N.currTexture=this.currTexture,n_$N.currDisplayData=this.currDisplayData,n_$N},n_$f.createSkinMesh=function(){return n_$t.isWebGL||n_$t.isConchApp?n_$G.skinAniSprite():(n_$t.isWebGL,null)},n_$a(n_$f,["_tempMatrix",function(){return this._tempMatrix=new n_$dN}]),n_$f}(),n_$jN=function(){function n_$N(){this.skinName=null,this.deformSlotDataList=[]}return n_$u(n_$N,"laya.ani.bone.DeformAniData"),n_$N}(),n_$yN=function(){function n_$N(){this.deformSlotDisplayList=[]}return n_$u(n_$N,"laya.ani.bone.DeformSlotData"),n_$N}(),n_$TN=function(){function n_$N(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}n_$u(n_$N,"laya.ani.bone.DeformSlotDisplayData");var n_$C=n_$N.prototype;return n_$C.binarySearch1=function(n_$N,n_$C){var n_$a=0,n_$u=n_$N.length-2;if(0==n_$u)return 1;for(var n_$e=n_$u>>>1;;){if(n_$N[Math.floor(n_$e+1)]<=n_$C?n_$a=n_$e+1:n_$u=n_$e,n_$a==n_$u)return n_$a+1;n_$e=n_$a+n_$u>>>1}return 0},n_$C.apply=function(n_$N,n_$C,n_$a){if(void 0===n_$a&&(n_$a=1),n_$N+=.05,!(this.timeList.length<=0)){var n_$u=0;if(!(n_$N<this.timeList[0])){var n_$e=this.vectices[0].length,n_$J=[],n_$M=this.binarySearch1(this.timeList,n_$N);if(this.frameIndex=n_$M,n_$N>=this.timeList[this.timeList.length-1]){var n_$n=this.vectices[this.vectices.length-1];if(n_$a<1)for(n_$u=0;n_$u<n_$e;n_$u++)n_$J[n_$u]+=(n_$n[n_$u]-n_$J[n_$u])*n_$a;else for(n_$u=0;n_$u<n_$e;n_$u++)n_$J[n_$u]=n_$n[n_$u];this.deformData=n_$J}else{this.tweenKeyList[this.frameIndex];var n_$V=this.vectices[this.frameIndex-1],n_$A=this.vectices[this.frameIndex],n_$P=this.timeList[this.frameIndex-1],n_$$=this.timeList[this.frameIndex];n_$a=this.tweenKeyList[n_$M-1]?(n_$N-n_$P)/(n_$$-n_$P):0;var n_$O=NaN;for(n_$u=0;n_$u<n_$e;n_$u++)n_$O=n_$V[n_$u],n_$J[n_$u]=n_$O+(n_$A[n_$u]-n_$O)*n_$a;this.deformData=n_$J}}}},n_$N}(),n_$LN=function(){function n_$N(){this.time=NaN,this.drawOrder=[]}return n_$u(n_$N,"laya.ani.bone.DrawOrderData"),n_$N}(),n_$RN=function(){function n_$N(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return n_$u(n_$N,"laya.ani.bone.EventData"),n_$N}(),n_$x=function(){function n_$uN(n_$N,n_$C){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=n_$N,this._targetBone=n_$C[n_$N.targetBoneIndex],this.isSpine=n_$N.isSpine,null==this._bones&&(this._bones=[]);for(var n_$a=this._bones.length=0,n_$u=n_$N.boneIndexs.length;n_$a<n_$u;n_$a++)this._bones.push(n_$C[n_$N.boneIndexs[n_$a]]);this.name=n_$N.name,this.mix=n_$N.mix,this.bendDirection=n_$N.bendDirection}n_$u(n_$uN,"laya.ani.bone.IkConstraint");var n_$N=n_$uN.prototype;return n_$N.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},n_$N._applyIk1=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$N.parentBone,n_$J=1/(n_$e.resultMatrix.a*n_$e.resultMatrix.d-n_$e.resultMatrix.b*n_$e.resultMatrix.c),n_$M=n_$C-n_$e.resultMatrix.tx,n_$n=n_$a-n_$e.resultMatrix.ty,n_$V=(n_$M*n_$e.resultMatrix.d-n_$n*n_$e.resultMatrix.c)*n_$J-n_$N.transform.x,n_$A=(n_$n*n_$e.resultMatrix.a-n_$M*n_$e.resultMatrix.b)*n_$J-n_$N.transform.y,n_$P=Math.atan2(n_$A,n_$V)*n_$uN.radDeg-0-n_$N.transform.skX;n_$N.transform.scX<0&&(n_$P+=180),180<n_$P?n_$P-=360:n_$P<-180&&(n_$P+=360),n_$N.transform.skX=n_$N.transform.skY=n_$N.transform.skX+n_$P*n_$u,n_$N.update()},n_$N.updatePos=function(n_$N,n_$C){this._sp&&this._sp.pos(n_$N,n_$C)},n_$N._applyIk2=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){if(0!=n_$J){var n_$M=n_$N.resultTransform.x,n_$n=n_$N.resultTransform.y,n_$V=n_$N.transform.scX,n_$A=n_$N.transform.scY,n_$P=n_$C.transform.scX,n_$$=0,n_$O=0,n_$G=0;n_$G=n_$V<0?(n_$V=-n_$V,n_$$=180,-1):(n_$$=0,1),n_$A<0&&(n_$A=-n_$A,n_$G=-n_$G),n_$O=n_$P<0?(n_$P=-n_$P,180):0;var n_$z=n_$C.resultTransform.x,n_$f=NaN,n_$t=NaN,n_$g=NaN,n_$x=n_$N.resultMatrix.a,n_$W=n_$N.resultMatrix.c,n_$v=n_$N.resultMatrix.b,n_$X=n_$N.resultMatrix.d,n_$r=Math.abs(n_$V-n_$A)<=1e-4;n_$g=n_$r?(n_$t=n_$x*n_$z+n_$W*(n_$f=n_$C.resultTransform.y)+n_$N.resultMatrix.tx,n_$v*n_$z+n_$X*n_$f+n_$N.resultMatrix.ty):(n_$f=0,n_$t=n_$x*n_$z+n_$N.resultMatrix.tx,n_$v*n_$z+n_$N.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new n_$JN,n_$eN.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(n_$a,n_$u,15,"#ffff00"),this._sp.graphics.drawCircle(n_$t,n_$g,15,"#ff00ff")),n_$N.setRotation(Math.atan2(n_$g-n_$N.resultMatrix.ty,n_$t-n_$N.resultMatrix.tx));var n_$c=n_$N.parentBone;n_$x=n_$c.resultMatrix.a,n_$W=n_$c.resultMatrix.c,n_$v=n_$c.resultMatrix.b;var n_$E=1/(n_$x*(n_$X=n_$c.resultMatrix.d)-n_$W*n_$v),n_$F=n_$a-n_$c.resultMatrix.tx,n_$D=n_$u-n_$c.resultMatrix.ty,n_$s=(n_$F*n_$X-n_$D*n_$W)*n_$E-n_$M,n_$q=(n_$D*n_$x-n_$F*n_$v)*n_$E-n_$n,n_$_=((n_$F=n_$t-n_$c.resultMatrix.tx)*n_$X-(n_$D=n_$g-n_$c.resultMatrix.ty)*n_$W)*n_$E-n_$M,n_$d=(n_$D*n_$x-n_$F*n_$v)*n_$E-n_$n,n_$Q=Math.sqrt(n_$_*n_$_+n_$d*n_$d),n_$l=n_$C.length*n_$P,n_$i=NaN,n_$j=NaN;if(n_$r){var n_$y=(n_$s*n_$s+n_$q*n_$q-n_$Q*n_$Q-(n_$l*=n_$V)*n_$l)/(2*n_$Q*n_$l);n_$y<-1?n_$y=-1:1<n_$y&&(n_$y=1),n_$j=Math.acos(n_$y)*n_$e,n_$x=n_$Q+n_$l*n_$y,n_$W=n_$l*Math.sin(n_$j),n_$i=Math.atan2(n_$q*n_$x-n_$s*n_$W,n_$s*n_$x+n_$q*n_$W)}else{var n_$T=(n_$x=n_$V*n_$l)*n_$x,n_$L=(n_$W=n_$A*n_$l)*n_$W,n_$R=n_$s*n_$s+n_$q*n_$q,n_$w=Math.atan2(n_$q,n_$s),n_$B=-2*n_$L*n_$Q,n_$Y=n_$L-n_$T;if(0<(n_$X=n_$B*n_$B-4*n_$Y*(n_$v=n_$L*n_$Q*n_$Q+n_$T*n_$R-n_$T*n_$L))){var n_$K=Math.sqrt(n_$X);n_$B<0&&(n_$K=-n_$K);var n_$k=(n_$K=-(n_$B+n_$K)/2)/n_$Y,n_$S=n_$v/n_$K,n_$p=Math.abs(n_$k)<Math.abs(n_$S)?n_$k:n_$S;n_$p*n_$p<=n_$R&&(n_$D=Math.sqrt(n_$R-n_$p*n_$p)*n_$e,n_$i=n_$w-Math.atan2(n_$D,n_$p),n_$j=Math.atan2(n_$D/n_$A,(n_$p-n_$Q)/n_$V))}var n_$m=0,n_$b=Number.MAX_VALUE,n_$o=0,n_$H=0,n_$I=0,n_$Z=0,n_$h=0,n_$U=0;n_$Z<(n_$X=(n_$F=n_$Q+n_$x)*n_$F)&&(n_$I=0,n_$Z=n_$X,n_$h=n_$F),(n_$X=(n_$F=n_$Q-n_$x)*n_$F)<n_$b&&(n_$m=Math.PI,n_$b=n_$X,n_$o=n_$F);var n_$NN=Math.acos(-n_$x*n_$Q/(n_$T-n_$L));(n_$X=(n_$F=n_$x*Math.cos(n_$NN)+n_$Q)*n_$F+(n_$D=n_$W*Math.sin(n_$NN))*n_$D)<n_$b&&(n_$m=n_$NN,n_$b=n_$X,n_$o=n_$F,n_$H=n_$D),n_$Z<n_$X&&(n_$I=n_$NN,n_$Z=n_$X,n_$h=n_$F,n_$U=n_$D),n_$j=n_$R<=(n_$b+n_$Z)/2?(n_$i=n_$w-Math.atan2(n_$H*n_$e,n_$o),n_$m*n_$e):(n_$i=n_$w-Math.atan2(n_$U*n_$e,n_$h),n_$I*n_$e)}var n_$CN=Math.atan2(n_$f,n_$z)*n_$G,n_$aN=n_$N.resultTransform.skX;180<(n_$i=(n_$i-n_$CN)*n_$uN.radDeg+n_$$-n_$aN)?n_$i-=360:n_$i<-180&&(n_$i+=360),n_$N.resultTransform.x=n_$M,n_$N.resultTransform.y=n_$n,n_$N.resultTransform.skX=n_$N.resultTransform.skY=n_$aN+n_$i*n_$J,n_$aN=n_$C.resultTransform.skX,180<(n_$j=((n_$j+n_$CN)*n_$uN.radDeg-0)*n_$G+n_$O-(n_$aN%=360))?n_$j-=360:n_$j<-180&&(n_$j+=360),n_$C.resultTransform.x=n_$z,n_$C.resultTransform.y=n_$f,n_$C.resultTransform.skX=n_$C.resultTransform.skY=n_$C.resultTransform.skY+n_$j*n_$J,n_$N.update()}},n_$N._applyIk3=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){if(0!=n_$J){var n_$M,n_$n,n_$V=n_$C.resultMatrix.a*n_$C.length,n_$A=n_$C.resultMatrix.b*n_$C.length,n_$P=n_$V*n_$V+n_$A*n_$A,n_$$=Math.sqrt(n_$P),n_$O=n_$N.resultMatrix.tx,n_$G=n_$N.resultMatrix.ty,n_$z=n_$C.resultMatrix.tx,n_$f=n_$C.resultMatrix.ty,n_$t=n_$z-n_$O,n_$g=n_$f-n_$G,n_$x=n_$t*n_$t+n_$g*n_$g,n_$W=Math.sqrt(n_$x),n_$v=(n_$t=n_$a-n_$N.resultMatrix.tx)*n_$t+(n_$g=n_$u-n_$N.resultMatrix.ty)*n_$g,n_$X=Math.sqrt(n_$v);if(n_$$+n_$W<=n_$X||n_$X+n_$$<=n_$W||n_$X+n_$W<=n_$$){var n_$r=NaN;n_$z=n_$O+(n_$r=n_$$+n_$W<=n_$X?1:-1)*(n_$a-n_$O)*n_$W/n_$X,n_$f=n_$G+n_$r*(n_$u-n_$G)*n_$W/n_$X}else{var n_$c=(n_$x-n_$P+n_$v)/(2*n_$v),n_$E=Math.sqrt(n_$x-n_$c*n_$c*n_$v)/n_$X,n_$F=n_$O+n_$t*n_$c,n_$D=n_$G+n_$g*n_$c,n_$s=-n_$g*n_$E,n_$q=n_$t*n_$E;n_$f=0<n_$e?(n_$z=n_$F-n_$s,n_$D-n_$q):(n_$z=n_$F+n_$s,n_$D+n_$q)}n_$M=n_$z,n_$n=n_$f,this.isDebug&&(this._sp||(this._sp=new n_$JN,n_$eN.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(n_$O,n_$G,15,"#ff00ff"),this._sp.graphics.drawCircle(n_$a,n_$u,15,"#ffff00"),this._sp.graphics.drawCircle(n_$M,n_$n,15,"#ff00ff"));var n_$_,n_$d;n_$_=Math.atan2(n_$n-n_$N.resultMatrix.ty,n_$M-n_$N.resultMatrix.tx),n_$N.setRotation(n_$_),(n_$d=n_$uN._tempMatrix).identity(),n_$d.rotate(n_$_),n_$d.scale(n_$N.resultMatrix.getScaleX(),n_$N.resultMatrix.getScaleY()),n_$d.translate(n_$N.resultMatrix.tx,n_$N.resultMatrix.ty),n_$d.copyTo(n_$N.resultMatrix),n_$N.updateChild();var n_$Q,n_$l;n_$Q=Math.atan2(n_$u-n_$n,n_$a-n_$M),n_$C.setRotation(n_$Q),(n_$l=n_$uN._tempMatrix).identity(),n_$l.rotate(n_$Q),n_$l.scale(n_$C.resultMatrix.getScaleX(),n_$C.resultMatrix.getScaleY()),n_$l.translate(n_$M,n_$n),n_$d.copyTo(n_$C.resultMatrix),n_$C.updateChild()}},n_$a(n_$uN,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new n_$dN}]),n_$uN}(),n_$wN=function(){function n_$N(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return n_$u(n_$N,"laya.ani.bone.IkConstraintData"),n_$N}(),n_$X=function(){function n_$l(n_$N,n_$C){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=n_$N,this.position=n_$N.position,this.spacing=n_$N.spacing,this.rotateMix=n_$N.rotateMix,this.translateMix=n_$N.translateMix,this.bones=[];for(var n_$a=this.data.bones,n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$u++)this.bones.push(n_$C[n_$a[n_$u]])}n_$u(n_$l,"laya.ani.bone.PathConstraint");var n_$N=n_$l.prototype;return n_$N.apply=function(n_$N,n_$C){if(this.target){var n_$a=this.translateMix,n_$u=this.translateMix,n_$e=0<n_$u,n_$J=this.data.spacingMode,n_$M="length"==n_$J,n_$n=this.data.rotateMode,n_$V="tangent"==n_$n,n_$A="chainScale"==n_$n,n_$P=[],n_$$=this.bones.length,n_$O=n_$V?n_$$:n_$$+1,n_$G=[];(this._spaces=n_$G)[0]=this.position;var n_$z=this.spacing;if(n_$A||n_$M)for(var n_$f=0,n_$t=n_$O-1;n_$f<n_$t;){var n_$g=this.bones[n_$f],n_$x=n_$g.length,n_$W=n_$x*n_$g.resultMatrix.a,n_$v=n_$x*n_$g.resultMatrix.b;n_$x=Math.sqrt(n_$W*n_$W+n_$v*n_$v),n_$A&&(n_$P[n_$f]=n_$x),n_$G[++n_$f]=n_$M?Math.max(0,n_$x+n_$z):n_$z}else for(n_$f=1;n_$f<n_$O;n_$f++)n_$G[n_$f]=n_$z;var n_$X=this.computeWorldPositions(this.target,n_$N,n_$C,n_$O,n_$V,"percent"==this.data.positionMode,"percent"==n_$J);if(this._debugKey){for(n_$f=0;n_$f<n_$X.length;n_$f++)n_$C.drawCircle(n_$X[n_$f++],n_$X[n_$f++],5,"#00ff00");var n_$r=[];for(n_$f=0;n_$f<n_$X.length;n_$f++)n_$r.push(n_$X[n_$f++],n_$X[n_$f++]);n_$C.drawLines(0,0,n_$r,"#ff0000")}var n_$c=n_$X[0],n_$E=n_$X[1],n_$F=this.data.offsetRotation,n_$D="chain"==n_$n&&0==n_$F,n_$s=NaN;for(n_$f=0,n_$s=3;n_$f<n_$$;n_$f++,n_$s+=3){(n_$g=this.bones[n_$f]).resultMatrix.tx+=(n_$c-n_$g.resultMatrix.tx)*n_$a,n_$g.resultMatrix.ty+=(n_$E-n_$g.resultMatrix.ty)*n_$a;var n_$q=(n_$W=n_$X[n_$s])-n_$c,n_$_=(n_$v=n_$X[n_$s+1])-n_$E;if(n_$A&&0!=(n_$x=n_$P[n_$f])){var n_$d=(Math.sqrt(n_$q*n_$q+n_$_*n_$_)/n_$x-1)*n_$u+1;n_$g.resultMatrix.a*=n_$d,n_$g.resultMatrix.c*=n_$d}if(n_$c=n_$W,n_$E=n_$v,n_$e){var n_$Q=n_$g.resultMatrix.a,n_$l=n_$g.resultMatrix.c,n_$i=n_$g.resultMatrix.b,n_$j=n_$g.resultMatrix.d,n_$y=NaN,n_$T=NaN,n_$L=NaN;n_$y=n_$V?n_$X[n_$s-1]:0==n_$G[n_$f+1]?n_$X[n_$s+2]:Math.atan2(n_$_,n_$q),n_$y-=Math.atan2(n_$i,n_$Q)-n_$F/180*Math.PI,n_$D&&(n_$T=Math.cos(n_$y),n_$L=Math.sin(n_$y),n_$c+=((n_$x=n_$g.length)*(n_$T*n_$Q-n_$L*n_$i)-n_$q)*n_$u,n_$E+=(n_$x*(n_$L*n_$Q+n_$T*n_$i)-n_$_)*n_$u),n_$y>Math.PI?n_$y-=2*Math.PI:n_$y<-Math.PI&&(n_$y+=2*Math.PI),n_$y*=n_$u,n_$T=Math.cos(n_$y),n_$L=Math.sin(n_$y),n_$g.resultMatrix.a=n_$T*n_$Q-n_$L*n_$i,n_$g.resultMatrix.c=n_$T*n_$l-n_$L*n_$j,n_$g.resultMatrix.b=n_$L*n_$Q+n_$T*n_$i,n_$g.resultMatrix.d=n_$L*n_$l+n_$T*n_$j}}}},n_$N.computeWorldVertices2=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){var n_$M,n_$n,n_$V=n_$N.currDisplayData.bones,n_$A=n_$N.currDisplayData.weights,n_$P=n_$N.currDisplayData.triangles,n_$$=0,n_$O=0,n_$G=0,n_$z=0,n_$f=0,n_$t=0,n_$g=0,n_$x=0,n_$W=0,n_$v=0,n_$X=0;if(null!=n_$V){for(n_$$=0;n_$$<n_$a;n_$$+=2)n_$O+=(n_$z=n_$V[n_$O])+1,n_$G+=n_$z;var n_$r=n_$C;for(n_$f=n_$J,n_$t=3*n_$G;n_$f<n_$u;n_$f+=2){for(n_$x=n_$g=0,n_$z=n_$V[n_$O++],n_$z+=n_$O;n_$O<n_$z;n_$O++,n_$t+=3){n_$M=n_$r[n_$V[n_$O]].resultMatrix,n_$W=n_$A[n_$t],n_$v=n_$A[n_$t+1];var n_$c=n_$A[n_$t+2];n_$g+=(n_$W*n_$M.a+n_$v*n_$M.c+n_$M.tx)*n_$c,n_$x+=(n_$W*n_$M.b+n_$v*n_$M.d+n_$M.ty)*n_$c}n_$e[n_$f]=n_$g,n_$e[n_$f+1]=n_$x}}else{var n_$E,n_$F;if(n_$P||(n_$P=n_$A),n_$N.deformData&&(n_$P=n_$N.deformData),n_$E=n_$N.parent,n_$C)for(n_$X=n_$C.length,n_$$=0;n_$$<n_$X;n_$$++)if(n_$C[n_$$].name==n_$E){n_$n=n_$C[n_$$];break}n_$n&&(n_$F=n_$n.resultMatrix),n_$F||(n_$F=n_$l._tempMt);var n_$D=n_$F.tx,n_$s=n_$F.ty,n_$q=n_$F.a,n_$_=n_$F.b,n_$d=n_$F.c,n_$Q=n_$F.d;for(n_$n&&(n_$Q*=n_$n.d),n_$O=n_$a,n_$f=n_$J;n_$f<n_$u;n_$O+=2,n_$f+=2)n_$W=n_$P[n_$O],n_$v=n_$P[n_$O+1],n_$e[n_$f]=n_$W*n_$q+n_$v*n_$_+n_$D,n_$e[n_$f+1]=-(n_$W*n_$d+n_$v*n_$Q+n_$s)}},n_$N.computeWorldPositions=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M){n_$N.currDisplayData.bones,n_$N.currDisplayData.weights,n_$N.currDisplayData.triangles;var n_$n=[],n_$V=0,n_$A=n_$N.currDisplayData.verLen,n_$P=this.position,n_$$=this._spaces,n_$O=[],n_$G=[],n_$z=n_$A/6,n_$f=-1,n_$t=NaN,n_$g=0,n_$x=0,n_$W=NaN,n_$v=NaN,n_$X=NaN,n_$r=NaN;if(n_$z--,n_$A-=4,this.computeWorldVertices2(n_$N,n_$C,2,n_$A,n_$n,0),this._debugKey)for(n_$V=0;n_$V<n_$n.length;)n_$a.drawCircle(n_$n[n_$V++],n_$n[n_$V++],10,"#ff0000");n_$O=n_$n,this._curves.length=n_$z;var n_$c=this._curves,n_$E=n_$O[n_$t=0],n_$F=n_$O[1],n_$D=0,n_$s=0,n_$q=0,n_$_=0,n_$d=0,n_$Q=0,n_$l=NaN,n_$i=NaN,n_$j=NaN,n_$y=NaN,n_$T=NaN,n_$L=NaN,n_$R=NaN,n_$w=NaN,n_$B=0;for(n_$V=0,n_$B=2;n_$V<n_$z;n_$V++,n_$B+=6)n_$D=n_$O[n_$B],n_$s=n_$O[n_$B+1],n_$q=n_$O[n_$B+2],n_$_=n_$O[n_$B+3],n_$T=2*(n_$l=.1875*(n_$E-2*n_$D+n_$q))+(n_$j=.09375*(3*(n_$D-n_$q)-n_$E+(n_$d=n_$O[n_$B+4]))),n_$L=2*(n_$i=.1875*(n_$F-2*n_$s+n_$_))+(n_$y=.09375*(3*(n_$s-n_$_)-n_$F+(n_$Q=n_$O[n_$B+5]))),n_$R=.75*(n_$D-n_$E)+n_$l+.16666667*n_$j,n_$w=.75*(n_$s-n_$F)+n_$i+.16666667*n_$y,n_$t+=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$R+=n_$T,n_$w+=n_$L,n_$T+=n_$j,n_$L+=n_$y,n_$t+=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$R+=n_$T,n_$w+=n_$L,n_$t+=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$R+=n_$T+n_$j,n_$w+=n_$L+n_$y,n_$t+=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$c[n_$V]=n_$t,n_$E=n_$d,n_$F=n_$Q;if(n_$J&&(n_$P*=n_$t),n_$M)for(n_$V=0;n_$V<n_$u;n_$V++)n_$$[n_$V]*=n_$t;var n_$Y=this._segments,n_$K=0,n_$k=0;for(n_$k=n_$x=n_$g=n_$V=0;n_$V<n_$u;n_$V++,n_$g+=3)if((n_$W=n_$P+=n_$v=n_$$[n_$V])<0)this.addBeforePosition(n_$W,n_$O,0,n_$G,n_$g);else if(n_$t<n_$W)this.addAfterPosition(n_$W-n_$t,n_$O,n_$A-4,n_$G,n_$g);else{for(;;n_$x++)if(!((n_$r=n_$c[n_$x])<n_$W)){0==n_$x?n_$W/=n_$r:n_$W=(n_$W-(n_$X=n_$c[n_$x-1]))/(n_$r-n_$X);break}if(n_$x!=n_$f){var n_$S=6*(n_$f=n_$x);for(n_$E=n_$O[n_$S],n_$F=n_$O[n_$S+1],n_$D=n_$O[n_$S+2],n_$s=n_$O[n_$S+3],n_$q=n_$O[n_$S+4],n_$_=n_$O[n_$S+5],n_$T=2*(n_$l=.03*(n_$E-2*n_$D+n_$q))+(n_$j=.006*(3*(n_$D-n_$q)-n_$E+(n_$d=n_$O[n_$S+6]))),n_$L=2*(n_$i=.03*(n_$F-2*n_$s+n_$_))+(n_$y=.006*(3*(n_$s-n_$_)-n_$F+(n_$Q=n_$O[n_$S+7]))),n_$R=.3*(n_$D-n_$E)+n_$l+.16666667*n_$j,n_$w=.3*(n_$s-n_$F)+n_$i+.16666667*n_$y,n_$K=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$Y[0]=n_$K,n_$S=1;n_$S<8;n_$S++)n_$R+=n_$T,n_$w+=n_$L,n_$T+=n_$j,n_$L+=n_$y,n_$K+=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$Y[n_$S]=n_$K;n_$R+=n_$T,n_$w+=n_$L,n_$K+=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$Y[8]=n_$K,n_$R+=n_$T+n_$j,n_$w+=n_$L+n_$y,n_$K+=Math.sqrt(n_$R*n_$R+n_$w*n_$w),n_$Y[9]=n_$K,n_$k=0}for(n_$W*=n_$K;;n_$k++)if(!((n_$r=n_$Y[n_$k])<n_$W)){0==n_$k?n_$W/=n_$r:n_$W=n_$k+(n_$W-(n_$X=n_$Y[n_$k-1]))/(n_$r-n_$X);break}this.addCurvePosition(.1*n_$W,n_$E,n_$F,n_$D,n_$s,n_$q,n_$_,n_$d,n_$Q,n_$G,n_$g,n_$e||0<n_$V&&0==n_$v)}return n_$G},n_$N.addBeforePosition=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$C[n_$a],n_$M=n_$C[n_$a+1],n_$n=n_$C[n_$a+2]-n_$J,n_$V=n_$C[n_$a+3]-n_$M,n_$A=Math.atan2(n_$V,n_$n);n_$u[n_$e]=n_$J+n_$N*Math.cos(n_$A),n_$u[n_$e+1]=n_$M+n_$N*Math.sin(n_$A),n_$u[n_$e+2]=n_$A},n_$N.addAfterPosition=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$C[n_$a+2],n_$M=n_$C[n_$a+3],n_$n=n_$J-n_$C[n_$a],n_$V=n_$M-n_$C[n_$a+1],n_$A=Math.atan2(n_$V,n_$n);n_$u[n_$e]=n_$J+n_$N*Math.cos(n_$A),n_$u[n_$e+1]=n_$M+n_$N*Math.sin(n_$A),n_$u[n_$e+2]=n_$A},n_$N.addCurvePosition=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P,n_$$){0==n_$N&&(n_$N=1e-4);var n_$O=n_$N*n_$N,n_$G=n_$O*n_$N,n_$z=1-n_$N,n_$f=n_$z*n_$z,n_$t=n_$f*n_$z,n_$g=n_$z*n_$N,n_$x=3*n_$g,n_$W=n_$z*n_$x,n_$v=n_$x*n_$N,n_$X=n_$C*n_$t+n_$u*n_$W+n_$J*n_$v+n_$n*n_$G,n_$r=n_$a*n_$t+n_$e*n_$W+n_$M*n_$v+n_$V*n_$G;n_$A[n_$P]=n_$X,n_$A[n_$P+1]=n_$r,n_$A[n_$P+2]=n_$$?Math.atan2(n_$r-(n_$a*n_$f+n_$e*n_$g*2+n_$M*n_$O),n_$X-(n_$C*n_$f+n_$u*n_$g*2+n_$J*n_$O)):0},n_$l.NONE=-1,n_$l.BEFORE=-2,n_$l.AFTER=-3,n_$a(n_$l,["_tempMt",function(){return this._tempMt=new n_$dN}]),n_$l}(),n_$BN=function(){function n_$N(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return n_$u(n_$N,"laya.ani.bone.PathConstraintData"),n_$N}(),n_$YN=function(){function n_$N(){this.name=null,this.slotArr=[]}return n_$u(n_$N,"laya.ani.bone.SkinData"),n_$N}(),n_$KN=function(){function n_$N(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}n_$u(n_$N,"laya.ani.bone.SkinSlotDisplayData");var n_$C=n_$N.prototype;return n_$C.createTexture=function(n_$N){return this.texture||(this.texture=new n_$QN(n_$N.bitmap,this.uvs),n_$N.bitmap.alphaTexture&&(this.texture.alphaTexture=new n_$QN(n_$N.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=n_$N.height,this.texture.height=n_$N.width,this.texture.offsetX=-n_$N.offsetX,this.texture.offsetY=-n_$N.offsetY,this.texture.sourceWidth=n_$N.sourceHeight,this.texture.sourceHeight=n_$N.sourceWidth):(this.texture.width=n_$N.width,this.texture.height=n_$N.height,this.texture.offsetX=-n_$N.offsetX,this.texture.offsetY=-n_$N.offsetY,this.texture.sourceWidth=n_$N.sourceWidth,this.texture.sourceHeight=n_$N.sourceHeight),n_$t.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},n_$C.destory=function(){this.texture&&this.texture.destroy()},n_$N}(),n_$kN=function(){function n_$N(){this.name=null,this.displayArr=[]}return n_$u(n_$N,"laya.ani.bone.SlotData"),n_$N.prototype.getDisplayByName=function(n_$N){for(var n_$C=0,n_$a=this.displayArr.length;n_$C<n_$a;n_$C++)if(this.displayArr[n_$C].attachmentName==n_$N)return n_$C;return-1},n_$N}(),n_$r=function(){function n_$N(n_$N,n_$C){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=n_$f(2,0),this._data=n_$N,null==this._bones&&(this._bones=[]),this.target=n_$C[n_$N.targetIndex];var n_$a,n_$u=0;for(n_$u=0,n_$a=n_$N.boneIndexs.length;n_$u<n_$a;n_$u++)this._bones.push(n_$C[n_$N.boneIndexs[n_$u]]);this.rotateMix=n_$N.rotateMix,this.translateMix=n_$N.translateMix,this.scaleMix=n_$N.scaleMix,this.shearMix=n_$N.shearMix}return n_$u(n_$N,"laya.ani.bone.TfConstraint"),n_$N.prototype.apply=function(){for(var n_$N,n_$C=this.target.resultMatrix.a,n_$a=this.target.resultMatrix.b,n_$u=this.target.resultMatrix.c,n_$e=this.target.resultMatrix.d,n_$J=0,n_$M=this._bones.length;n_$J<n_$M;n_$J++){if(n_$N=this._bones[n_$J],0<this.rotateMix){var n_$n=n_$N.resultMatrix.a,n_$V=n_$N.resultMatrix.b,n_$A=n_$N.resultMatrix.c,n_$P=n_$N.resultMatrix.d,n_$$=Math.atan2(n_$u,n_$C)-Math.atan2(n_$A,n_$n)+this._data.offsetRotation*Math.PI/180;n_$$>Math.PI?n_$$-=2*Math.PI:n_$$<-Math.PI&&(n_$$+=2*Math.PI),n_$$*=this.rotateMix;var n_$O=Math.cos(n_$$),n_$G=Math.sin(n_$$);n_$N.resultMatrix.a=n_$O*n_$n-n_$G*n_$A,n_$N.resultMatrix.b=n_$O*n_$V-n_$G*n_$P,n_$N.resultMatrix.c=n_$G*n_$n+n_$O*n_$A,n_$N.resultMatrix.d=n_$G*n_$V+n_$O*n_$P}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),n_$N.resultMatrix.tx+=(this._temp[0]-n_$N.resultMatrix.tx)*this.translateMix,n_$N.resultMatrix.ty+=(this._temp[1]-n_$N.resultMatrix.ty)*this.translateMix,n_$N.updateChild()),0<this.scaleMix){var n_$z=Math.sqrt(n_$N.resultMatrix.a*n_$N.resultMatrix.a+n_$N.resultMatrix.c*n_$N.resultMatrix.c),n_$f=Math.sqrt(n_$C*n_$C+n_$u*n_$u),n_$t=1e-5<n_$z?(n_$z+(n_$f-n_$z+this._data.offsetScaleX)*this.scaleMix)/n_$z:0;n_$N.resultMatrix.a*=n_$t,n_$N.resultMatrix.c*=n_$t,n_$z=Math.sqrt(n_$N.resultMatrix.b*n_$N.resultMatrix.b+n_$N.resultMatrix.d*n_$N.resultMatrix.d),n_$f=Math.sqrt(n_$a*n_$a+n_$e*n_$e),n_$t=1e-5<n_$z?(n_$z+(n_$f-n_$z+this._data.offsetScaleY)*this.scaleMix)/n_$z:0,n_$N.resultMatrix.b*=n_$t,n_$N.resultMatrix.d*=n_$t}if(0<this.shearMix){n_$V=n_$N.resultMatrix.b,n_$P=n_$N.resultMatrix.d;var n_$g=Math.atan2(n_$P,n_$V);(n_$$=Math.atan2(n_$e,n_$a)-Math.atan2(n_$u,n_$C)-(n_$g-Math.atan2(n_$N.resultMatrix.c,n_$N.resultMatrix.a)))>Math.PI?n_$$-=2*Math.PI:n_$$<-Math.PI&&(n_$$+=2*Math.PI),n_$$=n_$g+(n_$$+this._data.offsetShearY*Math.PI/180)*this.shearMix,n_$t=Math.sqrt(n_$V*n_$V+n_$P*n_$P),n_$N.resultMatrix.b=Math.cos(n_$$)*n_$t,n_$N.resultMatrix.d=Math.sin(n_$$)*n_$t}}},n_$N}(),n_$SN=function(){function n_$N(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return n_$u(n_$N,"laya.ani.bone.TfConstraintData"),n_$N}(),n_$pN=function(){function n_$N(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}n_$u(n_$N,"laya.ani.bone.Transform");var n_$C=n_$N.prototype;return n_$C.initData=function(n_$N){null!=n_$N.x&&(this.x=n_$N.x),null!=n_$N.y&&(this.y=n_$N.y),null!=n_$N.skX&&(this.skX=n_$N.skX),null!=n_$N.skY&&(this.skY=n_$N.skY),null!=n_$N.scX&&(this.scX=n_$N.scX),null!=n_$N.scY&&(this.scY=n_$N.scY)},n_$C.getMatrix=function(){var n_$N;return(n_$N=this.mMatrix?this.mMatrix:this.mMatrix=new n_$dN).identity(),n_$N.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(n_$N,this.skewX*Math.PI/180,this.skewY*Math.PI/180),n_$N.rotate(this.skX*Math.PI/180),n_$N.translate(this.x,this.y),n_$N},n_$C.skew=function(n_$N,n_$C,n_$a){var n_$u=Math.sin(n_$a),n_$e=Math.cos(n_$a),n_$J=Math.sin(n_$C),n_$M=Math.cos(n_$C);return n_$N.setTo(n_$N.a*n_$M-n_$N.b*n_$u,n_$N.a*n_$J+n_$N.b*n_$e,n_$N.c*n_$M-n_$N.d*n_$u,n_$N.c*n_$J+n_$N.d*n_$e,n_$N.tx*n_$M-n_$N.ty*n_$u,n_$N.tx*n_$J+n_$N.ty*n_$e),n_$N},n_$N}(),n_$c=function(){function n_$N(){}return n_$u(n_$N,"laya.ani.bone.UVTools"),n_$N.getRelativeUV=function(n_$N,n_$C,n_$a){var n_$u=n_$N[0],n_$e=n_$N[2]-n_$N[0],n_$J=n_$N[1],n_$M=n_$N[5]-n_$N[1];n_$a||(n_$a=[]),n_$a.length=n_$C.length;var n_$n,n_$V=0;n_$n=n_$a.length;var n_$A=1/n_$e,n_$P=1/n_$M;for(n_$V=0;n_$V<n_$n;n_$V+=2)n_$a[n_$V]=(n_$C[n_$V]-n_$u)*n_$A,n_$a[n_$V+1]=(n_$C[n_$V+1]-n_$J)*n_$P;return n_$a},n_$N.getAbsoluteUV=function(n_$N,n_$C,n_$a){if(0==n_$N[0]&&0==n_$N[1]&&1==n_$N[4]&&1==n_$N[5])return n_$a?(n_$g.copyArray(n_$a,n_$C),n_$a):n_$C;var n_$u=n_$N[0],n_$e=n_$N[2]-n_$N[0],n_$J=n_$N[1],n_$M=n_$N[5]-n_$N[1];n_$a||(n_$a=[]),n_$a.length=n_$C.length;var n_$n,n_$V=0;for(n_$n=n_$a.length,n_$V=0;n_$V<n_$n;n_$V+=2)n_$a[n_$V]=n_$C[n_$V]*n_$e+n_$u,n_$a[n_$V+1]=n_$C[n_$V+1]*n_$M+n_$J;return n_$a},n_$N}(),n_$l=function(){function n_$N(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return n_$u(n_$N,"laya.ani.KeyFramesContent"),n_$N}(),n_$E=function(){function n_$P(){}return n_$u(n_$P,"laya.ani.math.BezierLerp"),n_$P.getBezierRate=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$P._getBezierParamKey(n_$C,n_$a,n_$u,n_$e),n_$M=100*n_$J+n_$N;if(n_$P._bezierResultCache[n_$M])return n_$P._bezierResultCache[n_$M];var n_$n,n_$V=n_$P._getBezierPoints(n_$C,n_$a,n_$u,n_$e,n_$J),n_$A=0;for(n_$n=n_$V.length,n_$A=0;n_$A<n_$n;n_$A+=2)if(n_$N<=n_$V[n_$A])return n_$P._bezierResultCache[n_$M]=n_$V[n_$A+1],n_$V[n_$A+1];return n_$P._bezierResultCache[n_$M]=1},n_$P._getBezierParamKey=function(n_$N,n_$C,n_$a,n_$u){return 100*(100*(100*(100*n_$N+n_$C)+n_$a)+n_$u)},n_$P._getBezierPoints=function(n_$N,n_$C,n_$a,n_$u,n_$e){return n_$P._bezierPointsCache[n_$e]?n_$P._bezierPointsCache[n_$e]:(n_$J=[0,0,n_$N,n_$C,n_$a,n_$u,1,1],n_$M=(new n_$n).getBezierPoints(n_$J,100,3),n_$P._bezierPointsCache[n_$e]=n_$M);var n_$J,n_$M},n_$P._bezierResultCache={},n_$P._bezierPointsCache={},n_$P}(),n_$F=function(n_$N){function n_$C(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,n_$C.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}n_$u(n_$C,"laya.ani.AnimationPlayer",n_$e);var n_$a=n_$C.prototype;return n_$eN.imps(n_$a,{"laya.resource.IDestroy":!0}),n_$a._onTempletLoadedComputeFullKeyframeIndices=function(n_$N,n_$C,n_$a){this._templet===n_$a&&this._cachePlayRate===n_$N&&this._cacheFrameRate===n_$C&&this._computeFullKeyframeIndices()},n_$a._computeFullKeyframeIndices=function(){for(var n_$N=this._fullFrames=[],n_$C=this._templet,n_$a=this._cacheFrameRateInterval*this._cachePlayRate,n_$u=0,n_$e=n_$C.getAnimationCount();n_$u<n_$e;n_$u++){for(var n_$J=[],n_$M=0,n_$n=n_$C.getAnimation(n_$u).nodes.length;n_$M<n_$n;n_$M++){for(var n_$V=n_$C.getAnimation(n_$u).nodes[n_$M],n_$A=Math.floor(n_$V.playTime/n_$a+.01),n_$P=new Uint16Array(n_$A+1),n_$$=-1,n_$O=0,n_$G=n_$V.keyFrame.length;n_$O<n_$G;n_$O++){var n_$z=n_$V.keyFrame[n_$O],n_$f=n_$z.startTime,n_$t=n_$f+n_$z.duration+n_$a;do{for(var n_$g=Math.floor(n_$f/n_$a+.5),n_$x=n_$$+1;n_$x<n_$g;n_$x++)n_$P[n_$x]=n_$O;n_$P[n_$$=n_$g]=n_$O,n_$f+=n_$a}while(n_$f<=n_$t)}n_$J.push(n_$P)}n_$N.push(n_$J)}},n_$a._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},n_$a._calculatePlayDuration=function(){if(0!==this.state){var n_$N=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=n_$N),this._playEnd>n_$N&&(this._playEnd=n_$N),this._playDuration=this._playEnd-this._playStart}},n_$a._setPlayParams=function(n_$N,n_$C){this._currentTime=n_$N,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/n_$C+.01),0),this._currentFrameTime=this._currentKeyframeIndex*n_$C},n_$a._setPlayParamsWhenStop=function(n_$N,n_$C){this._currentTime=n_$N,this._currentKeyframeIndex=Math.max(Math.floor(n_$N/n_$C+.01),0),this._currentFrameTime=this._currentKeyframeIndex*n_$C,this._currentAnimationClipIndex=-1},n_$a._update=function(n_$N){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var n_$C=this._cacheFrameRateInterval*this._cachePlayRate,n_$a=0;this._startUpdateLoopCount!==n_$z.loopCount&&(n_$a=n_$N*this.playbackRate,this._elapsedPlaybackTime+=n_$a);var n_$u=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=n_$u)return this._setPlayParamsWhenStop(n_$u,n_$C),void this.event("stopped");if(n_$a+=this._currentTime,0<n_$u)if(n_$u<=n_$a)do{if(n_$a-=n_$u,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(n_$u,n_$C),this._stopWhenCircleFinish=!1,void this.event("stopped");n_$a<n_$u&&(this._setPlayParams(n_$a,n_$C),this.event("complete"))}while(n_$u<=n_$a);else this._setPlayParams(n_$a,n_$C);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(n_$u,n_$C),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},n_$a._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},n_$a.play=function(n_$N,n_$C,n_$a,n_$u,n_$e){if(void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=1),void 0===n_$a&&(n_$a=2147483647),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(n_$a<0||n_$u<0||n_$e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==n_$e&&n_$e<n_$u)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=n_$C,this._overallDuration=n_$a,this._playStart=n_$u,this._playEnd=n_$e,this._paused=!1,this._currentAnimationClipIndex=n_$N,this._currentKeyframeIndex=0,this._startUpdateLoopCount=n_$z.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},n_$a.playByFrame=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$N&&(n_$N=0),void 0===n_$C&&(n_$C=1),void 0===n_$a&&(n_$a=2147483647),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=30);var n_$M=1e3/n_$J;this.play(n_$N,n_$C,n_$a,n_$u*n_$M,n_$e*n_$M)},n_$a.stop=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$N?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},n_$J(0,n_$a,"playEnd",function(){return this._playEnd}),n_$J(0,n_$a,"templet",function(){return this._templet},function(n_$N){0===!this.state&&this.stop(!0),this._templet!==n_$N&&((this._templet=n_$N).loaded?this._computeFullKeyframeIndices():n_$N.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),n_$J(0,n_$a,"playStart",function(){return this._playStart}),n_$J(0,n_$a,"playDuration",function(){return this._playDuration}),n_$J(0,n_$a,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),n_$J(0,n_$a,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),n_$J(0,n_$a,"overallDuration",function(){return this._overallDuration}),n_$J(0,n_$a,"currentFrameTime",function(){return this._currentFrameTime}),n_$J(0,n_$a,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),n_$J(0,n_$a,"currentPlayTime",function(){return this._currentTime+this._playStart}),n_$J(0,n_$a,"cachePlayRate",function(){return this._cachePlayRate},function(n_$N){this._cachePlayRate!==n_$N&&(this._cachePlayRate=n_$N,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[n_$N,this._cacheFrameRate])))}),n_$J(0,n_$a,"cacheFrameRate",function(){return this._cacheFrameRate},function(n_$N){this._cacheFrameRate!==n_$N&&(this._cacheFrameRate=n_$N,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,n_$N])))}),n_$J(0,n_$a,"currentTime",null,function(n_$N){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(n_$N<this._playStart||n_$N>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=n_$z.loopCount;var n_$C=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=n_$N,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/n_$C),0),this._currentFrameTime=this._currentKeyframeIndex*n_$C}}),n_$J(0,n_$a,"paused",function(){return this._paused},function(n_$N){(this._paused=n_$N)&&this.event("paused")}),n_$J(0,n_$a,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),n_$J(0,n_$a,"destroyed",function(){return this._destroyed}),n_$C}(),n_$i=function(n_$N){function n_$C(){n_$C.__super.call(this),n_$t.isConchNode&&(this.drawSkin=function(n_$N){n_$N.transform||(n_$N.transform=n_$dN.EMPTY),this._addCmd([n_$N]),this.setSkinMesh&&this.setSkinMesh(n_$N._ps,n_$N.mVBData,n_$N.mEleNum,0,n_$N.mTexture,n_$N.transform)})}return n_$u(n_$C,"laya.ani.GraphicsAni",n_$M),n_$C.prototype.drawSkin=function(n_$N){var n_$C=[n_$N];this._saveToCmd(n_$t._context._drawSkin,n_$C)},n_$C.create=function(){return n_$C._caches.pop()||new n_$C},n_$C.recycle=function(n_$N){n_$N.clear(),n_$C._caches.push(n_$N)},n_$C._caches=[],n_$C}(),n_$j=function(n_$N){function n_$x(){this._aniMap={},this.unfixedLastAniIndex=-1,n_$x.__super.call(this),this._anis=new Array}n_$u(n_$x,"laya.ani.AnimationTemplet",n_$P);var n_$C=n_$x.prototype;return n_$C.parse=function(n_$N){var n_$C=new n_$_N(n_$N);this._aniVersion=n_$C.readUTFString(),n_$W.parse(this,n_$C)},n_$C._calculateKeyFrame=function(n_$N,n_$C,n_$a){var n_$u=n_$N.keyFrame;n_$u[n_$C]=n_$u[0];for(var n_$e=0;n_$e<n_$C;n_$e++){var n_$J=n_$u[n_$e];n_$J.nextData=0===n_$J.duration?n_$J.data:n_$u[n_$e+1].data}n_$u.length--},n_$C.onAsynLoaded=function(n_$N,n_$C,n_$a){var n_$u=new n_$_N(n_$C);switch(this._aniVersion=n_$u.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":n_$v.parse(this,n_$u);break;default:n_$W.parse(this,n_$u)}this._endLoaded()},n_$C.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},n_$C.getAnimationCount=function(){return this._anis.length},n_$C.getAnimation=function(n_$N){return this._anis[n_$N]},n_$C.getAniDuration=function(n_$N){return this._anis[n_$N].playTime},n_$C.getNodes=function(n_$N){return this._anis[n_$N].nodes},n_$C.getNodeIndexWithName=function(n_$N,n_$C){return this._anis[n_$N].bone3DMap[n_$C]},n_$C.getNodeCount=function(n_$N){return this._anis[n_$N].nodes.length},n_$C.getTotalkeyframesLength=function(n_$N){return this._anis[n_$N].totalKeyframeDatasLength},n_$C.getPublicExtData=function(){return this._publicExtData},n_$C.getAnimationDataWithCache=function(n_$N,n_$C,n_$a,n_$u){var n_$e=n_$C[n_$a];if(n_$e){var n_$J=n_$e[n_$N];return n_$J?n_$J[n_$u]:null}return null},n_$C.setAnimationDataWithCache=function(n_$N,n_$C,n_$a,n_$u,n_$e){var n_$J=n_$C[n_$a]||(n_$C[n_$a]={});(n_$J[n_$N]||(n_$J[n_$N]=[]))[n_$u]=n_$e},n_$C.getOriginalData=function(n_$N,n_$C,n_$a,n_$u,n_$e){for(var n_$J=this._anis[n_$N].nodes,n_$M=0,n_$n=0,n_$V=n_$J.length,n_$A=0;n_$n<n_$V;n_$n++){var n_$P,n_$$=n_$J[n_$n];n_$P=n_$$.keyFrame[n_$a[n_$n][n_$u]],n_$$.dataOffset=n_$A;var n_$O=n_$e-n_$P.startTime,n_$G=n_$$.lerpType;if(n_$G)switch(n_$G){case 0:case 1:for(n_$M=0;n_$M<n_$$.keyframeWidth;)n_$M+=n_$$.interpolationMethod[n_$M](n_$$,n_$M,n_$C,n_$A+n_$M,n_$P.data,n_$O,null,n_$P.duration,n_$P.nextData);break;case 2:var n_$z=n_$P.interpolationData,n_$f=n_$z.length,n_$t=0;for(n_$M=0;n_$M<n_$f;){var n_$g=n_$z[n_$M];switch(n_$g){case 6:case 7:n_$M+=n_$x.interpolation[n_$g](n_$$,n_$t,n_$C,n_$A+n_$t,n_$P.data,n_$O,null,n_$P.duration,n_$P.nextData,n_$z,n_$M+1);break;default:n_$M+=n_$x.interpolation[n_$g](n_$$,n_$t,n_$C,n_$A+n_$t,n_$P.data,n_$O,null,n_$P.duration,n_$P.nextData)}n_$t++}}else for(n_$M=0;n_$M<n_$$.keyframeWidth;)n_$M+=n_$$.interpolationMethod[n_$M](n_$$,n_$M,n_$C,n_$A+n_$M,n_$P.data,n_$O,null,n_$P.duration,n_$P.nextData);n_$A+=n_$$.keyframeWidth}},n_$C.getNodesCurrentFrameIndex=function(n_$N,n_$C){var n_$a=this._anis[n_$N].nodes;n_$N!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(n_$a.length),this.unfixedCurrentTimes=new Float32Array(n_$a.length),this.unfixedLastAniIndex=n_$N);for(var n_$u=0,n_$e=n_$a.length;n_$u<n_$e;n_$u++){var n_$J=n_$a[n_$u];for(n_$C<this.unfixedCurrentTimes[n_$u]&&(this.unfixedCurrentFrameIndexes[n_$u]=0),this.unfixedCurrentTimes[n_$u]=n_$C;this.unfixedCurrentFrameIndexes[n_$u]<n_$J.keyFrame.length&&!(n_$J.keyFrame[this.unfixedCurrentFrameIndexes[n_$u]].startTime>this.unfixedCurrentTimes[n_$u]);)this.unfixedCurrentFrameIndexes[n_$u]++;this.unfixedCurrentFrameIndexes[n_$u]--}return this.unfixedCurrentFrameIndexes},n_$C.getOriginalDataUnfixedRate=function(n_$N,n_$C,n_$a){var n_$u=this._anis[n_$N].nodes;n_$N!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(n_$u.length),this.unfixedCurrentTimes=new Float32Array(n_$u.length),this.unfixedKeyframes=n_$f(n_$u.length),this.unfixedLastAniIndex=n_$N);for(var n_$e=0,n_$J=0,n_$M=n_$u.length,n_$n=0;n_$J<n_$M;n_$J++){var n_$V=n_$u[n_$J];for(n_$a<this.unfixedCurrentTimes[n_$J]&&(this.unfixedCurrentFrameIndexes[n_$J]=0),this.unfixedCurrentTimes[n_$J]=n_$a;this.unfixedCurrentFrameIndexes[n_$J]<n_$V.keyFrame.length&&!(n_$V.keyFrame[this.unfixedCurrentFrameIndexes[n_$J]].startTime>this.unfixedCurrentTimes[n_$J]);)this.unfixedKeyframes[n_$J]=n_$V.keyFrame[this.unfixedCurrentFrameIndexes[n_$J]],this.unfixedCurrentFrameIndexes[n_$J]++;var n_$A=this.unfixedKeyframes[n_$J];n_$V.dataOffset=n_$n;var n_$P=n_$a-n_$A.startTime;if(n_$V.lerpType)switch(n_$V.lerpType){case 0:case 1:for(n_$e=0;n_$e<n_$V.keyframeWidth;)n_$e+=n_$V.interpolationMethod[n_$e](n_$V,n_$e,n_$C,n_$n+n_$e,n_$A.data,n_$P,null,n_$A.duration,n_$A.nextData);break;case 2:var n_$$=n_$A.interpolationData,n_$O=n_$$.length,n_$G=0;for(n_$e=0;n_$e<n_$O;){var n_$z=n_$$[n_$e];switch(n_$z){case 6:case 7:n_$e+=n_$x.interpolation[n_$z](n_$V,n_$G,n_$C,n_$n+n_$G,n_$A.data,n_$P,null,n_$A.duration,n_$A.nextData,n_$$,n_$e+1);break;default:n_$e+=n_$x.interpolation[n_$z](n_$V,n_$G,n_$C,n_$n+n_$G,n_$A.data,n_$P,null,n_$A.duration,n_$A.nextData)}n_$G++}}else for(n_$e=0;n_$e<n_$V.keyframeWidth;)n_$e+=n_$V.interpolationMethod[n_$e](n_$V,n_$e,n_$C,n_$n+n_$e,n_$A.data,n_$P,null,n_$A.duration,n_$A.nextData);n_$n+=n_$V.keyframeWidth}},n_$x._LinearInterpolation_0=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){var n_$P=0===n_$n?0:n_$J/n_$n;return n_$a[n_$u]=(1-n_$P)*n_$e[n_$C]+n_$P*n_$V[n_$C],1},n_$x._QuaternionInterpolation_1=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){var n_$P=0===n_$n?0:n_$J/n_$n;return n_$O.slerpQuaternionArray(n_$e,n_$C,n_$V,n_$C,n_$P,n_$a,n_$u),4},n_$x._AngleInterpolation_2=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){return 0},n_$x._RadiansInterpolation_3=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){return 0},n_$x._Matrix4x4Interpolation_4=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){for(var n_$P=0;n_$P<16;n_$P++,n_$C++)n_$a[n_$u+n_$P]=n_$e[n_$C]+n_$J*n_$M[n_$C];return 16},n_$x._NoInterpolation_5=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A){return n_$a[n_$u]=n_$e[n_$C],1},n_$x._BezierInterpolation_6=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P){return void 0===n_$P&&(n_$P=0),n_$a[n_$u]=n_$e[n_$C]+(n_$V[n_$C]-n_$e[n_$C])*n_$E.getBezierRate(n_$J/n_$n,n_$A[n_$P],n_$A[n_$P+1],n_$A[n_$P+2],n_$A[n_$P+3]),5},n_$x._BezierInterpolation_7=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J,n_$M,n_$n,n_$V,n_$A,n_$P){return void 0===n_$P&&(n_$P=0),n_$a[n_$u]=n_$A[n_$P+4]+n_$A[n_$P+5]*n_$E.getBezierRate((.001*n_$J+n_$A[n_$P+6])/n_$A[n_$P+7],n_$A[n_$P],n_$A[n_$P+1],n_$A[n_$P+2],n_$A[n_$P+3]),9},n_$x.load=function(n_$N){return n_$eN.loader.create(n_$N,null,null,n_$x)},n_$x.interpolation=[n_$x._LinearInterpolation_0,n_$x._QuaternionInterpolation_1,n_$x._AngleInterpolation_2,n_$x._RadiansInterpolation_3,n_$x._Matrix4x4Interpolation_4,n_$x._NoInterpolation_5,n_$x._BezierInterpolation_6,n_$x._BezierInterpolation_7],n_$x}(),n_$D=function(n_$C){function n_$a(n_$N,n_$C){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,n_$a.__super.call(this),void 0===n_$C&&(n_$C=0),n_$N&&this.init(n_$N,n_$C)}n_$u(n_$a,"laya.ani.bone.Skeleton",n_$C);var n_$N=n_$a.prototype;return n_$N.init=function(n_$N,n_$C){void 0===n_$C&&(n_$C=0);var n_$a,n_$u,n_$e,n_$J=0,n_$M=0;if(1==n_$C)for(this._graphicsCache=[],n_$J=0,n_$M=n_$N.getAnimationCount();n_$J<n_$M;n_$J++)this._graphicsCache.push([]);if(this._yReverseMatrix=n_$N.yReverseMatrix,this._aniMode=n_$C,this._templet=n_$N,this._player=new n_$F,this._player.cacheFrameRate=n_$N.rate,this._player.templet=n_$N,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=n_$N.mBoneArr,this._rootBone=n_$N.mRootBone,this._aniSectionDic=n_$N.aniSectionDic,0<n_$N.ikArr.length)for(this._ikArr=[],n_$J=0,n_$M=n_$N.ikArr.length;n_$J<n_$M;n_$J++)this._ikArr.push(new n_$x(n_$N.ikArr[n_$J],this._boneList));if(0<n_$N.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),n_$J=0,n_$M=n_$N.pathArr.length;n_$J<n_$M;n_$J++)n_$a=n_$N.pathArr[n_$J],n_$u=new n_$X(n_$a,this._boneList),(n_$e=this._boneSlotDic[n_$a.name])&&((n_$u=new n_$X(n_$a,this._boneList)).target=n_$e),this._pathDic[n_$a.name]=n_$u;if(0<n_$N.tfArr.length)for(this._tfArr=[],n_$J=0,n_$M=n_$N.tfArr.length;n_$J<n_$M;n_$J++)this._tfArr.push(new n_$r(n_$N.tfArr[n_$J],this._boneList));if(0<n_$N.skinDataArray.length){var n_$n=this._templet.skinDataArray[this._skinIndex];this._skinName=n_$n.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},n_$N.load=function(n_$N,n_$C,n_$a){},n_$N._onLoaded=function(){},n_$N._parseComplete=function(){var n_$N=n_$s.TEMPLET_DICTIONARY[this._aniPath];n_$N&&(this.init(n_$N,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},n_$N._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},n_$N._onPlay=function(){this.event("played")},n_$N._onStop=function(){var n_$N,n_$C=this._templet.eventAniArr[this._aniClipIndex];if(n_$C&&this._eventIndex<n_$C.length)for(;this._eventIndex<n_$C.length;this._eventIndex++)(n_$N=n_$C[this._eventIndex]).time>=this._player.playStart&&n_$N.time<=this._player.playEnd&&this.event("label",n_$N);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},n_$N._onPause=function(){this.event("paused")},n_$N._parseSrcBoneMatrix=function(){var n_$N=0,n_$C=0;for(n_$C=this._templet.srcBoneMatrixArr.length,n_$N=0;n_$N<n_$C;n_$N++)this._boneMatrixArray.push(new n_$dN);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var n_$a,n_$u,n_$e=this._templet.boneSlotArray;for(n_$N=0,n_$C=n_$e.length;n_$N<n_$C;n_$N++)n_$a=n_$e[n_$N],null==(n_$u=this._bindBoneBoneSlotDic[n_$a.parent])&&(this._bindBoneBoneSlotDic[n_$a.parent]=n_$u=[]),this._boneSlotDic[n_$a.name]=n_$a=n_$a.copy(),n_$u.push(n_$a),this._boneSlotArray.push(n_$a)}},n_$N._emitMissedEvents=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=0);var n_$u=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(n_$u){var n_$e,n_$J,n_$M=0;for(n_$e=n_$u.length,n_$M=n_$a;n_$M<n_$e;n_$M++)(n_$J=n_$u[n_$M]).time>=this._player.playStart&&n_$J.time<=this._player.playEnd&&this.event("label",n_$J)}},n_$N._update=function(n_$N){if(void 0===n_$N&&(n_$N=!0),!(this._pause||n_$N&&this._indexControl)){var n_$C=this.timer.currTimer,n_$a=this._player.currentKeyframeIndex,n_$u=n_$C-this._lastTime;if(n_$N?this._player._update(n_$u):n_$a=-1,this._lastTime=n_$C,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<n_$u&&this._clipIndex==n_$a&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var n_$e;this._lastUpdateAniClipIndex=this._aniClipIndex,n_$a>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var n_$J,n_$M=this._templet.eventAniArr[this._aniClipIndex];if(n_$M&&this._eventIndex<n_$M.length&&((n_$e=n_$M[this._eventIndex]).time>=this._player.playStart&&n_$e.time<=this._player.playEnd?this._player.currentPlayTime>=n_$e.time&&(this.event("label",n_$e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(n_$J=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=n_$J&&(this.graphics=n_$J));var n_$n=0,n_$V=0;for(n_$V=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,n_$V-1)&&0<n_$V;)n_$V--;if(n_$V<this._clipIndex)for(n_$n=n_$V;n_$n<this._clipIndex;n_$n++)this._createGraphics(n_$n)}else if(1==this._aniMode){if(n_$J=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=n_$J&&(this.graphics=n_$J));for(n_$V=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,n_$V-1)&&0<n_$V;)n_$V--;if(n_$V<this._clipIndex)for(n_$n=n_$V;n_$n<this._clipIndex;n_$n++)this._createGraphics(n_$n)}this._createGraphics()}}},n_$N._createGraphics=function(n_$N){void 0===n_$N&&(n_$N=-1),-1==n_$N&&(n_$N=this._clipIndex);var n_$C,n_$a,n_$u=n_$N*this._player.cacheFrameRateInterval,n_$e=this._templet.drawOrderAniArr[this._aniClipIndex];if(n_$e&&0<n_$e.length)for(this._drawOrderIndex=0,n_$C=n_$e[this._drawOrderIndex];n_$u>=n_$C.time&&(this._drawOrder=n_$C.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=n_$e.length));)n_$C=n_$e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=n_$i.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=n_$i.create(),n_$a=this.graphics;var n_$J=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],n_$N,n_$u);var n_$M,n_$n,n_$V,n_$A,n_$P=this._aniSectionDic[this._aniClipIndex],n_$$=0,n_$O=0,n_$G=0,n_$z=0,n_$f=0,n_$t=this._templet.srcBoneMatrixArr.length;for(n_$f=n_$P[n_$O=0];n_$O<n_$t;n_$O++)n_$A=this._boneList[n_$O],n_$V=this._templet.srcBoneMatrixArr[n_$O],n_$A.resultTransform.scX=n_$V.scX*this._curOriginalData[n_$$++],n_$A.resultTransform.skX=n_$V.skX+this._curOriginalData[n_$$++],n_$A.resultTransform.skY=n_$V.skY+this._curOriginalData[n_$$++],n_$A.resultTransform.scY=n_$V.scY*this._curOriginalData[n_$$++],n_$A.resultTransform.x=n_$V.x+this._curOriginalData[n_$$++],n_$A.resultTransform.y=n_$V.y+this._curOriginalData[n_$$++],8===this._templet.tMatrixDataLen&&(n_$A.resultTransform.skewX=n_$V.skewX+this._curOriginalData[n_$$++],n_$A.resultTransform.skewY=n_$V.skewY+this._curOriginalData[n_$$++]);var n_$g,n_$x={},n_$W={};for(n_$f+=n_$P[1];n_$O<n_$f;n_$O++)n_$x[(n_$g=n_$J[n_$O]).name]=this._curOriginalData[n_$$++],n_$W[n_$g.name]=this._curOriginalData[n_$$++],this._curOriginalData[n_$$++],this._curOriginalData[n_$$++],this._curOriginalData[n_$$++],this._curOriginalData[n_$$++];var n_$v,n_$X,n_$r={},n_$c={};for(n_$f+=n_$P[2];n_$O<n_$f;n_$O++)n_$r[(n_$g=n_$J[n_$O]).name]=this._curOriginalData[n_$$++],n_$c[n_$g.name]=this._curOriginalData[n_$$++],this._curOriginalData[n_$$++],this._curOriginalData[n_$$++],this._curOriginalData[n_$$++],this._curOriginalData[n_$$++];if(this._pathDic)for(n_$f+=n_$P[3];n_$O<n_$f;n_$O++){if(n_$g=n_$J[n_$O],n_$v=this._pathDic[n_$g.name])switch(new n_$_N(n_$g.extenData).getByte()){case 1:n_$v.position=this._curOriginalData[n_$$++];break;case 2:n_$v.spacing=this._curOriginalData[n_$$++];break;case 3:n_$v.rotateMix=this._curOriginalData[n_$$++],n_$v.translateMix=this._curOriginalData[n_$$++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(n_$dN.TEMP.identity()),this._ikArr)for(n_$O=0,n_$f=this._ikArr.length;n_$O<n_$f;n_$O++)n_$X=this._ikArr[n_$O],n_$r.hasOwnProperty(n_$X.name)&&(n_$X.bendDirection=n_$r[n_$X.name]),n_$c.hasOwnProperty(n_$X.name)&&(n_$X.mix=n_$c[n_$X.name]),n_$X.apply();if(this._pathDic)for(var n_$E in this._pathDic)(n_$v=this._pathDic[n_$E]).apply(this._boneList,n_$a);if(this._tfArr)for(n_$O=0,n_$z=this._tfArr.length;n_$O<n_$z;n_$O++)this._tfArr[n_$O].apply();for(n_$O=0,n_$z=this._boneList.length;n_$O<n_$z;n_$O++)if(n_$A=this._boneList[n_$O],n_$n=this._bindBoneBoneSlotDic[n_$A.name],n_$A.resultMatrix.copyTo(this._boneMatrixArray[n_$O]),n_$n)for(n_$G=0,n_$f=n_$n.length;n_$G<n_$f;n_$G++)(n_$M=n_$n[n_$G])&&n_$M.setParentMatrix(n_$A.resultMatrix);var n_$F,n_$D,n_$s,n_$q,n_$_={},n_$d=this._templet.deformAniArr;if(n_$d&&0<n_$d.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,n_$O=0,n_$f=this._boneSlotArray.length;n_$O<n_$f;n_$O++)(n_$M=this._boneSlotArray[n_$O]).deformData=null;var n_$Q,n_$l=n_$d[this._aniClipIndex];for(n_$Q in n_$F=n_$l.default,this._setDeform(n_$F,n_$_,this._boneSlotArray,n_$u),n_$l)"default"!=n_$Q&&n_$Q!=this._skinName&&(n_$F=n_$l[n_$Q],this._setDeform(n_$F,n_$_,this._boneSlotArray,n_$u));n_$F=n_$l[this._skinName],this._setDeform(n_$F,n_$_,this._boneSlotArray,n_$u)}if(this._drawOrder)for(n_$O=0,n_$f=this._drawOrder.length;n_$O<n_$f;n_$O++)n_$D=n_$x[(n_$M=this._boneSlotArray[this._drawOrder[n_$O]]).name],n_$s=n_$W[n_$M.name],isNaN(n_$s)||(n_$a.save(),n_$a.alpha(n_$s)),isNaN(n_$D)||-2==n_$D||(this._templet.attachmentNames?n_$M.showDisplayByName(this._templet.attachmentNames[n_$D]):n_$M.showDisplayByIndex(n_$D)),n_$_[this._drawOrder[n_$O]]?(n_$q=n_$_[this._drawOrder[n_$O]],n_$M.currDisplayData&&n_$q[n_$M.currDisplayData.attachmentName]?n_$M.deformData=n_$q[n_$M.currDisplayData.attachmentName]:n_$M.deformData=null):n_$M.deformData=null,isNaN(n_$s)?n_$M.draw(n_$a,this._boneMatrixArray,2==this._aniMode):n_$M.draw(n_$a,this._boneMatrixArray,2==this._aniMode,n_$s),isNaN(n_$s)||n_$a.restore();else for(n_$O=0,n_$f=this._boneSlotArray.length;n_$O<n_$f;n_$O++)n_$D=n_$x[(n_$M=this._boneSlotArray[n_$O]).name],n_$s=n_$W[n_$M.name],isNaN(n_$s)||(n_$a.save(),n_$a.alpha(n_$s)),isNaN(n_$D)||-2==n_$D||(this._templet.attachmentNames?n_$M.showDisplayByName(this._templet.attachmentNames[n_$D]):n_$M.showDisplayByIndex(n_$D)),n_$_[n_$O]?(n_$q=n_$_[n_$O],n_$M.currDisplayData&&n_$q[n_$M.currDisplayData.attachmentName]?n_$M.deformData=n_$q[n_$M.currDisplayData.attachmentName]:n_$M.deformData=null):n_$M.deformData=null,isNaN(n_$s)?n_$M.draw(n_$a,this._boneMatrixArray,2==this._aniMode):n_$M.draw(n_$a,this._boneMatrixArray,2==this._aniMode,n_$s),isNaN(n_$s)||n_$a.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,n_$N,n_$a):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,n_$N,n_$a)},n_$N._setDeform=function(n_$N,n_$C,n_$a,n_$u){if(n_$N){var n_$e,n_$J,n_$M,n_$n=0,n_$V=0,n_$A=0;if(n_$N)for(n_$n=0,n_$V=n_$N.deformSlotDataList.length;n_$n<n_$V;n_$n++)for(n_$e=n_$N.deformSlotDataList[n_$n],n_$A=0;n_$A<n_$e.deformSlotDisplayList.length;n_$A++)n_$M=n_$a[(n_$J=n_$e.deformSlotDisplayList[n_$A]).slotIndex],n_$J.apply(n_$u,n_$M),n_$C[n_$J.slotIndex]||(n_$C[n_$J.slotIndex]={}),n_$C[n_$J.slotIndex][n_$J.attachment]=n_$J.deformData}},n_$N.getAnimNum=function(){return this._templet.getAnimationCount()},n_$N.getAniNameByIndex=function(n_$N){return this._templet.getAniNameByIndex(n_$N)},n_$N.getSlotByName=function(n_$N){return this._boneSlotDic[n_$N]},n_$N.showSkinByName=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(n_$N),n_$C)},n_$N.showSkinByIndex=function(n_$N,n_$C){void 0===n_$C&&(n_$C=!0);for(var n_$a=0;n_$a<this._boneSlotArray.length;n_$a++)this._boneSlotArray[n_$a].showSlotData(null,n_$C);if(this._templet.showSkinByIndex(this._boneSlotDic,n_$N,n_$C)){var n_$u=this._templet.skinDataArray[n_$N];this._skinIndex=n_$N,this._skinName=n_$u.name}this._clearCache()},n_$N.showSlotSkinByIndex=function(n_$N,n_$C){if(0!=this._aniMode){var n_$a=this.getSlotByName(n_$N);n_$a&&n_$a.showDisplayByIndex(n_$C),this._clearCache()}},n_$N.showSlotSkinByName=function(n_$N,n_$C){if(0!=this._aniMode){var n_$a=this.getSlotByName(n_$N);n_$a&&n_$a.showDisplayByName(n_$C),this._clearCache()}},n_$N.replaceSlotSkinName=function(n_$N,n_$C,n_$a){if(0!=this._aniMode){var n_$u=this.getSlotByName(n_$N);n_$u&&n_$u.replaceDisplayByName(n_$C,n_$a),this._clearCache()}},n_$N.replaceSlotSkinByIndex=function(n_$N,n_$C,n_$a){if(0!=this._aniMode){var n_$u=this.getSlotByName(n_$N);n_$u&&n_$u.replaceDisplayByIndex(n_$C,n_$a),this._clearCache()}},n_$N.setSlotSkin=function(n_$N,n_$C){if(0!=this._aniMode){var n_$a=this.getSlotByName(n_$N);n_$a&&n_$a.replaceSkin(n_$C),this._clearCache()}},n_$N._clearCache=function(){if(1==this._aniMode)for(var n_$N=0,n_$C=this._graphicsCache.length;n_$N<n_$C;n_$N++){for(var n_$a=0,n_$u=this._graphicsCache[n_$N].length;n_$a<n_$u;n_$a++){var n_$e=this._graphicsCache[n_$N][n_$a];n_$e!=this.graphics&&n_$i.recycle(n_$e)}this._graphicsCache[n_$N].length=0}},n_$N.play=function(n_$N,n_$C,n_$a,n_$u,n_$e,n_$J){void 0===n_$a&&(n_$a=!0),void 0===n_$u&&(n_$u=0),void 0===n_$e&&(n_$e=0),void 0===n_$J&&(n_$J=!0),this._indexControl=!1;var n_$M=-1,n_$n=NaN;if(n_$n=n_$C?2147483647:0,"string"==typeof n_$N)for(var n_$V=0,n_$A=this._templet.getAnimationCount();n_$V<n_$A;n_$V++){var n_$P=this._templet.getAnimation(n_$V);if(n_$P&&n_$N==n_$P.name){n_$M=n_$V;break}}else n_$M=n_$N;-1<n_$M&&n_$M<this.getAnimNum()&&(this._aniClipIndex=n_$M,(n_$a||this._pause||this._currAniIndex!=n_$M)&&(this._currAniIndex=n_$M,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(n_$M)),this._drawOrder=null,this._eventIndex=0,this._player.play(n_$M,this._player.playbackRate,n_$n,n_$u,n_$e),n_$J&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=n_$$.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},n_$N.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},n_$N.playbackRate=function(n_$N){this._player&&(this._player.playbackRate=n_$N)},n_$N.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},n_$N.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=n_$$.now(),this.timer.frameLoop(1,this,this._update,null,!0))},n_$N._getGrahicsDataWithCache=function(n_$N,n_$C){return this._graphicsCache[n_$N][n_$C]},n_$N._setGrahicsDataWithCache=function(n_$N,n_$C,n_$a){this._graphicsCache[n_$N][n_$C]=n_$a},n_$N.destroy=function(n_$N){void 0===n_$N&&(n_$N=!0),n_$C.prototype.destroy.call(this,n_$N),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},n_$J(0,n_$N,"url",function(){return this._aniPath},function(n_$N){this.load(n_$N)}),n_$J(0,n_$N,"index",function(){return this._index},function(n_$N){this.player&&(this._index=n_$N,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),n_$J(0,n_$N,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),n_$J(0,n_$N,"templet",function(){return this._templet}),n_$J(0,n_$N,"player",function(){return this._player}),n_$a.useSimpleMeshInCanvas=!1,n_$a}(n_$JN),n_$s=function(n_$C){function n_$e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,n_$e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}n_$u(n_$e,"laya.ani.bone.Templet",n_$C);var n_$N=n_$e.prototype;return n_$N.getLoadList=function(){return this._loadList},n_$N.loadAni=function(n_$N){this._skBufferUrl=n_$N,n_$eN.loader.load(n_$N,n_$V.create(this,this.onComplete),null,"arraybuffer")},n_$N.onComplete=function(n_$N){if(this._isDestroyed)this.destroy();else{var n_$C=n_$A.getRes(this._skBufferUrl);n_$C?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,n_$C)):this.event("error","load failed:"+this._skBufferUrl)}},n_$N.parseData=function(n_$N,n_$C,n_$a){void 0===n_$a&&(n_$a=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=n_$N,this._mainTexture&&n_$t.isWebGL&&n_$N.bitmap&&(n_$N.bitmap.enableMerageInAtlas=!1),this._rate=n_$a,this.parse(n_$C)},n_$N.buildArmature=function(n_$N){return void 0===n_$N&&(n_$N=0),new n_$D(this,n_$N)},n_$N.parse=function(n_$N){n_$C.prototype.parse.call(this,n_$N),this._endLoaded(),this._aniVersion!=n_$e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+n_$e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},n_$N._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var n_$N=0;this._loadList=[];var n_$C,n_$a=new n_$_N(this.getPublicExtData()),n_$u=0,n_$e=0,n_$J=0,n_$M=n_$a.getInt32(),n_$n=n_$a.readUTFString(),n_$V=n_$n.split("\n");for(n_$N=0;n_$N<n_$M;n_$N++)n_$C=this._path+n_$V[2*n_$N],n_$n=n_$V[2*n_$N+1],n_$a.getFloat32(),n_$a.getFloat32(),n_$u=n_$a.getFloat32(),n_$e=n_$a.getFloat32(),n_$J=n_$a.getFloat32(),isNaN(n_$J)?0:n_$J,n_$J=n_$a.getFloat32(),isNaN(n_$J)?0:n_$J,n_$J=n_$a.getFloat32(),isNaN(n_$J)?n_$u:n_$J,n_$J=n_$a.getFloat32(),isNaN(n_$J)?n_$e:n_$J,-1==this._loadList.indexOf(n_$C)&&this._loadList.push(n_$C);this.event("inited",this)}},n_$N._textureComplete=function(){for(var n_$N,n_$C,n_$a=0,n_$u=this._loadList.length;n_$a<n_$u;n_$a++)n_$C=this._loadList[n_$a],n_$N=this._textureDic[n_$C]=n_$A.getRes(n_$C),n_$t.isWebGL&&n_$N&&n_$N.bitmap&&(n_$N.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},n_$N._parsePublicExtData=function(){var n_$N=0,n_$C=0,n_$a=0,n_$u=0,n_$e=0;for(n_$N=0,n_$e=this.getAnimationCount();n_$N<n_$e;n_$N++)this._graphicsCache.push([]);var n_$J;n_$J="Dragon"!=this._aniClassName;var n_$M,n_$n,n_$V=new n_$_N(this.getPublicExtData()),n_$A=0,n_$P=0,n_$$=0,n_$O=0,n_$G=0,n_$z=0,n_$f=0,n_$t=0,n_$g=0,n_$x=n_$V.getInt32(),n_$W=n_$V.readUTFString(),n_$v=n_$W.split("\n");for(n_$N=0;n_$N<n_$x;n_$N++){if(n_$M=this._mainTexture,n_$n=this._path+n_$v[2*n_$N],n_$W=n_$v[2*n_$N+1],null==this._mainTexture&&(n_$M=this._textureDic[n_$n]),!n_$M)return this.event("error",this),void(this.isParseFail=!0);n_$A=n_$V.getFloat32(),n_$P=n_$V.getFloat32(),n_$$=n_$V.getFloat32(),n_$O=n_$V.getFloat32(),n_$g=n_$V.getFloat32(),n_$G=isNaN(n_$g)?0:n_$g,n_$g=n_$V.getFloat32(),n_$z=isNaN(n_$g)?0:n_$g,n_$g=n_$V.getFloat32(),n_$f=isNaN(n_$g)?n_$$:n_$g,n_$g=n_$V.getFloat32(),n_$t=isNaN(n_$g)?n_$O:n_$g,this.subTextureDic[n_$W]=n_$QN.create(n_$M,n_$A,n_$P,n_$$,n_$O,-n_$G,-n_$z,n_$f,n_$t),n_$M.alphaTexture&&(this.subTextureDic[n_$W].alphaTexture=n_$QN.create(n_$M.alphaTexture,n_$A,n_$P,n_$$,n_$O,-n_$G,-n_$z,n_$f,n_$t))}this._mainTexture=n_$M;var n_$X,n_$r,n_$c,n_$E,n_$F,n_$D=n_$V.getUint16();for(n_$N=0;n_$N<n_$D;n_$N++)(n_$X=[]).push(n_$V.getUint16()),n_$X.push(n_$V.getUint16()),n_$X.push(n_$V.getUint16()),n_$X.push(n_$V.getUint16()),this.aniSectionDic[n_$N]=n_$X;var n_$s,n_$q=n_$V.getInt16(),n_$_={};for(n_$N=0;n_$N<n_$q;n_$N++)n_$r=new n_$lN,0==n_$N?n_$s=n_$r:n_$r.root=n_$s,n_$r.d=n_$J?-1:1,n_$E=n_$V.readUTFString(),n_$F=n_$V.readUTFString(),n_$r.length=n_$V.getFloat32(),1==n_$V.getByte()&&(n_$r.inheritRotation=!1),1==n_$V.getByte()&&(n_$r.inheritScale=!1),n_$r.name=n_$E,n_$F&&((n_$c=n_$_[n_$F])?n_$c.addChild(n_$r):this.mRootBone=n_$r),n_$_[n_$E]=n_$r,this.mBoneArr.push(n_$r);this.tMatrixDataLen=n_$V.getUint16();var n_$d,n_$Q,n_$l=n_$V.getUint16(),n_$i=Math.floor(n_$l/this.tMatrixDataLen),n_$j=this.srcBoneMatrixArr;for(n_$N=0;n_$N<n_$i;n_$N++)(n_$d=new n_$pN).scX=n_$V.getFloat32(),n_$d.skX=n_$V.getFloat32(),n_$d.skY=n_$V.getFloat32(),n_$d.scY=n_$V.getFloat32(),n_$d.x=n_$V.getFloat32(),n_$d.y=n_$V.getFloat32(),8===this.tMatrixDataLen&&(n_$d.skewX=n_$V.getFloat32(),n_$d.skewY=n_$V.getFloat32()),n_$j.push(n_$d),(n_$r=this.mBoneArr[n_$N]).transform=n_$d;var n_$y,n_$T=n_$V.getUint16(),n_$L=0;for(n_$N=0;n_$N<n_$T;n_$N++){for(n_$Q=new n_$wN,n_$L=n_$V.getUint16(),n_$C=0;n_$C<n_$L;n_$C++)n_$Q.boneNames.push(n_$V.readUTFString()),n_$Q.boneIndexs.push(n_$V.getInt16());n_$Q.name=n_$V.readUTFString(),n_$Q.targetBoneName=n_$V.readUTFString(),n_$Q.targetBoneIndex=n_$V.getInt16(),n_$Q.bendDirection=n_$V.getFloat32(),n_$Q.mix=n_$V.getFloat32(),n_$Q.isSpine=n_$J,this.ikArr.push(n_$Q)}var n_$R,n_$w=n_$V.getUint16(),n_$B=0;for(n_$N=0;n_$N<n_$w;n_$N++){for(n_$y=new n_$SN,n_$B=n_$V.getUint16(),n_$C=0;n_$C<n_$B;n_$C++)n_$y.boneIndexs.push(n_$V.getInt16());n_$y.name=n_$V.getUTFString(),n_$y.targetIndex=n_$V.getInt16(),n_$y.rotateMix=n_$V.getFloat32(),n_$y.translateMix=n_$V.getFloat32(),n_$y.scaleMix=n_$V.getFloat32(),n_$y.shearMix=n_$V.getFloat32(),n_$y.offsetRotation=n_$V.getFloat32(),n_$y.offsetX=n_$V.getFloat32(),n_$y.offsetY=n_$V.getFloat32(),n_$y.offsetScaleX=n_$V.getFloat32(),n_$y.offsetScaleY=n_$V.getFloat32(),n_$y.offsetShearY=n_$V.getFloat32(),this.tfArr.push(n_$y)}var n_$Y=n_$V.getUint16(),n_$K=0;for(n_$N=0;n_$N<n_$Y;n_$N++){for((n_$R=new n_$BN).name=n_$V.readUTFString(),n_$K=n_$V.getUint16(),n_$C=0;n_$C<n_$K;n_$C++)n_$R.bones.push(n_$V.getInt16());n_$R.target=n_$V.readUTFString(),n_$R.positionMode=n_$V.readUTFString(),n_$R.spacingMode=n_$V.readUTFString(),n_$R.rotateMode=n_$V.readUTFString(),n_$R.offsetRotation=n_$V.getFloat32(),n_$R.position=n_$V.getFloat32(),n_$R.spacing=n_$V.getFloat32(),n_$R.rotateMix=n_$V.getFloat32(),n_$R.translateMix=n_$V.getFloat32(),this.pathArr.push(n_$R)}var n_$k,n_$S,n_$p,n_$m,n_$b,n_$o=0,n_$H=0,n_$I=0,n_$Z=NaN,n_$h=0,n_$U=n_$V.getInt16();for(n_$N=0;n_$N<n_$U;n_$N++){var n_$NN=n_$V.getUint8(),n_$CN={};this.deformAniArr.push(n_$CN);for(var n_$aN=0;n_$aN<n_$NN;n_$aN++)for((n_$k=new n_$jN).skinName=n_$V.getUTFString(),n_$CN[n_$k.skinName]=n_$k,n_$o=n_$V.getInt16(),n_$C=0;n_$C<n_$o;n_$C++)for(n_$S=new n_$yN,n_$k.deformSlotDataList.push(n_$S),n_$H=n_$V.getInt16(),n_$a=0;n_$a<n_$H;n_$a++)for(n_$p=new n_$TN,n_$S.deformSlotDisplayList.push(n_$p),n_$p.slotIndex=n_$V.getInt16(),n_$p.attachment=n_$V.getUTFString(),n_$I=n_$V.getInt16(),n_$u=0;n_$u<n_$I;n_$u++)for(1==n_$V.getByte()?n_$p.tweenKeyList.push(!0):n_$p.tweenKeyList.push(!1),n_$Z=n_$V.getFloat32(),n_$p.timeList.push(n_$Z),n_$m=[],n_$p.vectices.push(n_$m),n_$h=n_$V.getInt16(),n_$e=0;n_$e<n_$h;n_$e++)n_$m.push(n_$V.getFloat32())}var n_$uN,n_$eN,n_$JN=n_$V.getInt16(),n_$MN=0,n_$nN=0;for(n_$N=0;n_$N<n_$JN;n_$N++){for(n_$MN=n_$V.getInt16(),n_$b=[],n_$C=0;n_$C<n_$MN;n_$C++){for((n_$uN=new n_$LN).time=n_$V.getFloat32(),n_$nN=n_$V.getInt16(),n_$a=0;n_$a<n_$nN;n_$a++)n_$uN.drawOrder.push(n_$V.getInt16());n_$b.push(n_$uN)}this.drawOrderAniArr.push(n_$b)}var n_$VN,n_$AN=n_$V.getInt16(),n_$PN=0;for(n_$N=0;n_$N<n_$AN;n_$N++){for(n_$PN=n_$V.getInt16(),n_$eN=[],n_$C=0;n_$C<n_$PN;n_$C++)(n_$VN=new n_$RN).name=n_$V.getUTFString(),n_$VN.intValue=n_$V.getInt32(),n_$VN.floatValue=n_$V.getFloat32(),n_$VN.stringValue=n_$V.getUTFString(),n_$VN.time=n_$V.getFloat32(),n_$eN.push(n_$VN);this.eventAniArr.push(n_$eN)}var n_$$N=n_$V.getInt16();if(0<n_$$N)for(this.attachmentNames=[],n_$N=0;n_$N<n_$$N;n_$N++)this.attachmentNames.push(n_$V.getUTFString());var n_$ON,n_$GN,n_$zN=n_$V.getInt16();for(n_$N=0;n_$N<n_$zN;n_$N++)(n_$ON=new n_$iN).name=n_$V.readUTFString(),n_$ON.parent=n_$V.readUTFString(),n_$ON.attachmentName=n_$V.readUTFString(),n_$ON.srcDisplayIndex=n_$ON.displayIndex=n_$V.getInt16(),(n_$ON.templet=this).boneSlotDic[n_$ON.name]=n_$ON,null==(n_$GN=this.bindBoneBoneSlotDic[n_$ON.parent])&&(this.bindBoneBoneSlotDic[n_$ON.parent]=n_$GN=[]),n_$GN.push(n_$ON),this.boneSlotArray.push(n_$ON);var n_$fN,n_$tN,n_$gN,n_$xN=n_$V.readUTFString().split("\n"),n_$WN=0,n_$vN=n_$V.getUint8(),n_$XN=0,n_$rN=0,n_$cN=0,n_$EN=0,n_$FN=0,n_$DN=0,n_$sN=0;for(n_$N=0;n_$N<n_$vN;n_$N++){for((n_$fN=new n_$YN).name=n_$xN[n_$WN++],n_$XN=n_$V.getUint8(),n_$C=0;n_$C<n_$XN;n_$C++){for((n_$tN=new n_$kN).name=n_$xN[n_$WN++],n_$ON=this.boneSlotDic[n_$tN.name],n_$rN=n_$V.getUint8(),n_$a=0;n_$a<n_$rN;n_$a++){if(n_$gN=new n_$KN,this.skinSlotDisplayDataArr.push(n_$gN),n_$gN.name=n_$xN[n_$WN++],n_$gN.attachmentName=n_$xN[n_$WN++],n_$gN.transform=new n_$pN,n_$gN.transform.scX=n_$V.getFloat32(),n_$gN.transform.skX=n_$V.getFloat32(),n_$gN.transform.skY=n_$V.getFloat32(),n_$gN.transform.scY=n_$V.getFloat32(),n_$gN.transform.x=n_$V.getFloat32(),n_$gN.transform.y=n_$V.getFloat32(),n_$tN.displayArr.push(n_$gN),n_$gN.width=n_$V.getFloat32(),n_$gN.height=n_$V.getFloat32(),n_$gN.type=n_$V.getUint8(),n_$gN.verLen=n_$V.getUint16(),0<(n_$q=n_$V.getUint16()))for(n_$gN.bones=[],n_$u=0;n_$u<n_$q;n_$u++){var n_$qN=n_$V.getUint16();n_$gN.bones.push(n_$qN)}if(0<(n_$cN=n_$V.getUint16()))for(n_$gN.uvs=[],n_$u=0;n_$u<n_$cN;n_$u++)n_$gN.uvs.push(n_$V.getFloat32());if(0<(n_$EN=n_$V.getUint16()))for(n_$gN.weights=[],n_$u=0;n_$u<n_$EN;n_$u++)n_$gN.weights.push(n_$V.getFloat32());if(0<(n_$FN=n_$V.getUint16()))for(n_$gN.triangles=[],n_$u=0;n_$u<n_$FN;n_$u++)n_$gN.triangles.push(n_$V.getUint16());if(0<(n_$DN=n_$V.getUint16()))for(n_$gN.vertices=[],n_$u=0;n_$u<n_$DN;n_$u++)n_$gN.vertices.push(n_$V.getFloat32());if(0<(n_$sN=n_$V.getUint16()))for(n_$gN.lengths=[],n_$u=0;n_$u<n_$sN;n_$u++)n_$gN.lengths.push(n_$V.getFloat32())}n_$fN.slotArr.push(n_$tN)}this.skinDic[n_$fN.name]=n_$fN,this.skinDataArray.push(n_$fN)}1==n_$V.getUint8()?(this.yReverseMatrix=new n_$dN(1,0,0,-1,0,0),n_$s&&n_$s.setTempMatrix(this.yReverseMatrix)):n_$s&&n_$s.setTempMatrix(new n_$dN),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},n_$N.getTexture=function(n_$N){var n_$C=this.subTextureDic[n_$N];return n_$C||(n_$C=this.subTextureDic[n_$N.substr(0,n_$N.length-1)]),null==n_$C?this._mainTexture:n_$C},n_$N.showSkinByIndex=function(n_$N,n_$C,n_$a){if(void 0===n_$a&&(n_$a=!0),n_$C<0&&n_$C>=this.skinDataArray.length)return!1;var n_$u,n_$e,n_$J=0,n_$M=0,n_$n=this.skinDataArray[n_$C];if(n_$n){for(n_$J=0,n_$M=n_$n.slotArr.length;n_$J<n_$M;n_$J++)(n_$e=n_$n.slotArr[n_$J])&&(n_$u=n_$N[n_$e.name])&&(n_$u.showSlotData(n_$e,n_$a),n_$a&&"undefined"!=n_$u.attachmentName&&"null"!=n_$u.attachmentName?n_$u.showDisplayByName(n_$u.attachmentName):n_$u.showDisplayByIndex(n_$u.displayIndex));return!0}return!1},n_$N.getSkinIndexByName=function(n_$N){for(var n_$C=0,n_$a=this.skinDataArray.length;n_$C<n_$a;n_$C++)if(this.skinDataArray[n_$C].name==n_$N)return n_$C;return-1},n_$N.getGrahicsDataWithCache=function(n_$N,n_$C){return this._graphicsCache[n_$N][n_$C]},n_$N.setGrahicsDataWithCache=function(n_$N,n_$C,n_$a){this._graphicsCache[n_$N][n_$C]=n_$a},n_$N.destroy=function(){var n_$N;for(var n_$C in this._isDestroyed=!0,this.subTextureDic)(n_$N=this.subTextureDic[n_$C])&&n_$N.destroy();for(n_$C in this._textureDic)(n_$N=this._textureDic[n_$C])&&n_$N.destroy();for(var n_$a=0,n_$u=this.skinSlotDisplayDataArr.length;n_$a<n_$u;n_$a++)this.skinSlotDisplayDataArr[n_$a].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete n_$e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},n_$N.getAniNameByIndex=function(n_$N){var n_$C=this.getAnimation(n_$N);return n_$C?n_$C.name:null},n_$J(0,n_$N,"rate",function(){return this._rate},function(n_$N){this._rate=n_$N}),n_$e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",n_$e.TEMPLET_DICTIONARY=null,n_$e}(n_$j)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(n_$N,n_$C){"use strict";for(var n_$a in Object.defineProperty(n_$C,"__esModule",{value:!0}),Laya){var n_$u=Laya[n_$a];n_$u&&n_$u.__isclass&&(n_$C[n_$a]=n_$u)}});