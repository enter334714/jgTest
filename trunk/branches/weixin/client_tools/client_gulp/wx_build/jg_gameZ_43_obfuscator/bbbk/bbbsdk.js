var _=wx.y$;let sdk=require(_[31181]);var config={game_id:256,game_pkg:_[31182],partner_label:_[31183],partner_id:_[31184],game_ver:_[31185],is_auth:!1};window.config=config;var p$ADEBC=p$AECBD();var HOST=_[31186];var p$ADECB=null;var p$AEBCD=null;var sysInfo=wx.getSystemInfoSync();var platform=sysInfo.platform;var partner_user_info=null;var sdkInitOk=!1;function p$AECBD(){var o={};return{order_data:{},init:function(e,r){e=e&&e.game_ver?e.game_ver:0,console.log(_[31187]);var t=this;var n;n=wx.getStorageSync(_[31188])?0:(n=t.uuid(16,32),wx.setStorageSync(_[31188],n),1),wx.getStorageSync(_[31189])||(o=t.uuid(16,32),wx.setStorageSync(_[31189],o));var o=wx.getLaunchOptionsSync();var a=o.scene||"";n&&o.query&&o.query.ad_code&&wx.setStorageSync(_[31190],o.query.ad_code),t.log(_[286],{install:n,scene:a}),t=o.query&&o.query.invite?o.query.invite:"",o=o.query&&o.query.invite_type?o.query.invite_type:"",t&&(p$AEBCD={invite:t,invite_type:o,is_new:n,scene:a}),e&&this.checkGameVersion(e,function(e){r&&r(e)})},login:function(e,r){console.log(_[31191]),o.login=_[30803]==typeof r?r:null;var t=this;sdk.initLoginCallback=e=>{0==e.status?(t.do_login(e.data),console.log(_[31192]+JSON.stringify(e.data))):(console.warn(_[31193]),o.login&&o.login(1,{errMsg:_[31193]}))},sdk.init()},do_login:function(e){var t=this;var r=t.getPublicData();if(r.user_info=JSON.stringify(e),p$AEBCD&&_[281]==typeof p$AEBCD)for(var n in p$AEBCD)r[n]=p$AEBCD[n];wx.request({url:_[26860]+HOST+_[31194],method:_[31195],dataType:_[6153],header:{"content-type":_[31196]},data:r,success:function(e){if(console.log(_[31197]+JSON.stringify(e)),200==e.statusCode){if((e=e.data).state){try{wx.setStorageSync(_[31198],e.data.sdk_token),wx.setStorageSync(_[31199],e.data.user_id),wx.setStorageSync(_[31200],e.data.username),e.data.ext&&wx.setStorageSync(_[31201],e.data.ext)}catch(e){}var r={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};o.login&&o.login(0,r)}else o.login&&o.login(1,{errMsg:e.msg});t.getShareInfo(_[31202],function(e){console.log(_[31203]),t.logStartShare(_[31202]),wx.onShareAppMessage(function(){return t.logStartShare(_[31202]),{title:e.title,imageUrl:e.img,query:e.query}})})}else o.login&&o.login(1,{errMsg:_[31204]})}})},share:function(e){o.share=_[30803]==typeof callback?callback:null;var r=e.type||_[31205];console.log(_[31206]+r);var t=this;this.getShareInfo(r,function(e){t.logStartShare(r),wx.shareAppMessage({title:e.title,imageUrl:e.img,query:e.query})})},logStartShare:function(e){var r=wx.getStorageSync(_[31198]);wx.request({url:_[26860]+HOST+_[31207],method:_[31195],dataType:_[6153],header:{"content-type":_[31196]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:r,server_id:p$ADECB?p$ADECB.server_id:"",role_id:p$ADECB?p$ADECB.role_id:"",type:e},success:function(e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(e,t){console.log(_[31208]),wx.getStorageSync(_[31198]),wx.request({url:_[26860]+HOST+_[31209],method:_[31195],dataType:_[6153],header:{"content-type":_[31196]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var r;console.log(_[31210]+JSON.stringify(e)),200==e.statusCode&&(r=e.data).state?t&&t(r.data):t&&t({develop:0})}})},getShareInfo:function(e,r){console.log(_[31211]);var t=wx.getStorageSync(_[31198]);wx.request({url:_[26860]+HOST+_[31212],method:_[31195],dataType:_[6153],header:{"content-type":_[31196]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,type:e,server_id:p$ADECB?p$ADECB.server_id:"",role_id:p$ADECB?p$ADECB.role_id:"",no_log:1},success:function(e){console.log(_[31213]),console.log(e),200==e.statusCode?(e=e.data).state?r&&r(e.data):o.share&&o.share(1,{errMsg:_[31214]+e.msg}):o.share&&o.share(1,{errMsg:_[31215]})}})},updateShare:function(e,r,t,n,o,a){console.log(_[31216]);var i=wx.getStorageSync(_[31198]);wx.request({url:_[26860]+HOST+_[31217],method:_[31195],dataType:_[6153],header:{"content-type":_[31196]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:r,is_new:t,role_id:n,sever_id:o,scene:a},success:function(e){console.log(_[31218]+JSON.stringify(e))}})},msgCheck:function(e,r){console.log(_[31219]+e);let t={data:{}};sdk.msgSecCheck({version:2,scene:1,content:e},function(e){0!=e.status?(t.statusCode=200,t.data.state=1):(t.statusCode=200,t.data.state=0),r&&r(t)})},pay:function(e,r){this.startPay(e,r)},startPay:function(e,r){console.log(_[31220]+JSON.stringify(e));var t=this;o.pay=_[30803]==typeof r?r:null,r=wx.getStorageSync(_[31198]);var n=wx.getStorageSync(_[31201]);r?(e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:r,session_key:n,platform:platform},t.order_data=e,(r=t.getPublicData()).order_data=JSON.stringify(e),wx.request({url:_[26860]+HOST+_[31221],method:_[31195],dataType:_[6153],header:{"content-type":_[31196]},data:r,success:function(e){console.log(_[31222]+JSON.stringify(e)),200==e.statusCode?(e=e.data).state?(console.log(_[31223]+JSON.stringify(e.data.pay_data)),""==e.data.ext?(sdk.onPayCallback=e=>{console.log(_[31224],e),0!=e.status&&o.pay&&o.pay(1,{errMsg:e.msg})},sdk.sdkPay(e.data.pay_data)):t.extDo({ext1:e.data.ext,ext2:e.data.pay_data})):o.pay&&o.pay(1,{errMsg:e.msg}):o.login&&o.login(1,{errMsg:_[31204]})}})):o.pay&&o.pay(1,{errMsg:_[31225]})},extDo:function(e){wx.navigateToMiniProgram({appId:e.ext1,path:_[31226]+e.ext2.cp_order_id+_[31227]+e.ext2.amount/100,extraData:{},envVersion:_[31228],success(e){}})},logCreateRole:function(e){var r=wx.getStorageSync(_[31199]);var t=wx.getStorageSync(_[31200]);var n={};n.user_id=r,n.user_name=t,n.role_id=e.roleid,n.role_lev=e.rolelevel,n.role_name=e.rolename,n.server_id=e.serverid,e.roleid&&e.serverid&&(p$ADECB={role_id:e.roleid,server_id:e.serverid}),this.log(_[7],n),r={type:1,roleId:e.roleid,roleName:e.rolename,roleLevel:e.rolelevel,serverId:e.serverid,vipLevel:"0"},sdk.sdkRole(r)},logEnterGame:function(e){var r=wx.getStorageSync(_[31199]);var t=wx.getStorageSync(_[31200]);var n={};n.user_id=r,n.user_name=t,n.role_id=e.roleid,n.role_lev=e.rolelevel,n.role_name=e.rolename,n.server_id=e.serverid,e.roleid&&e.serverid&&(p$ADECB={role_id:e.roleid,server_id:e.serverid}),this.log(_[6035],n),p$AEBCD&&this.updateShare(p$AEBCD.invite,p$AEBCD.invite_type,p$AEBCD.is_new,e.roleid,e.serverid,p$AEBCD.scene),r={type:3,roleId:e.roleid,roleName:e.rolename,roleLevel:e.rolelevel,serverId:e.serverid,vipLevel:"0"},sdk.sdkRole(r)},logRoleUpLevel:function(e){var r=wx.getStorageSync(_[31199]);var t=wx.getStorageSync(_[31200]);var n={};n.user_id=r,n.user_name=t,n.role_id=e.roleid,n.role_lev=e.rolelevel,n.role_name=e.rolename,n.server_id=e.serverid,e.roleid&&e.serverid&&(p$ADECB={role_id:e.roleid,server_id:e.serverid}),this.log(_[31229],n),r={type:2,roleId:e.roleid,roleName:e.rolename,roleLevel:e.rolelevel,serverId:e.serverid,vipLevel:"0"},sdk.sdkRole(r)},uuid:function(e,r){var t=_[31230].split("");var n,o=[];var a;if(e=e||t.length,r)for(n=0;n<r;n++)o[n]=t[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(a=0|16*Math.random(),o[n]=t[19==n?3&a|8:a]);return o.join("")},getPublicData:function(){var e=wx.getStorageSync(_[31188]);var r=wx.getStorageSync(_[31189]);var t=wx.getStorageSync(_[31190]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,partner_label:config.partner_label,ad_code:t,uuid:e,idfv:r,mac:_[31231],is_from_min:1,dname:sysInfo.model,net_type:0==sysInfo.wifiSignal?"4G":_[31232],os_ver:sysInfo.system,sdk_ver:sysInfo.version,game_ver:config.game_ver,device:_[31233]==sysInfo.platform?1:2}},log:function(e,r){var t=this.getPublicData();for(var n in r)t[n]=r[n];console.log(_[31234]+e),console.log(t),wx.request({url:_[26860]+HOST+_[31235]+e+_[31236]+encodeURIComponent(JSON.stringify(t))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()},weiduanHelper:function(){sdk.sdkTransferApp()},sendUrl:function(){sdk.sdkTransferApp()},setMessageToFriendQuery:function(e,r){e=e.activity_id,r(wx.setMessageToFriendQuery({shareMessageToFriendScene:e}))},setLoadingCmp:function(){},sendCode:function(e,r){console.log(_[31237],e.phone)},bindPhone:function(e,r){console.log(_[31238],e.phone,e.code)},subscribeMessage:function(e,r){console.log(_[31239]+e),o.subscribeMessage=_[30803]==typeof r?r:null,wx.requestSubscribeMessage({tmplIds:e,success(e){console.log(_[31240]),console.log(e),o.subscribeMessage&&o.subscribeMessage(e)},fail(e){console.log(_[31241]),console.log(e),o.subscribeMessage&&o.subscribeMessage(e)}})}}}function run(e,r,t){e in p$ADEBC&&p$ADEBC[e](r,t)}exports.init=function(e,r){run(_[367],e,r)},exports.login=function(e){run(_[31242],"",e)},exports.login=function(e){run(_[31242],"",e)},exports.pay=function(e,r){run(_[31243],e,r)},exports.openService=function(){run(_[24733])},exports.logCreateRole=function(e,r,t,n,o){run(_[31244],{serverid:e,servername:r,roleid:t,rolename:n,rolelevel:o})},exports.logEnterGame=function(e,r,t,n,o){run(_[31245],{serverid:e,servername:r,roleid:t,rolename:n,rolelevel:o})},exports.logRoleUpLevel=function(e,r,t,n,o){run(_[31246],{serverid:e,servername:r,roleid:t,rolename:n,rolelevel:o})},exports.share=function(e){run(_[31205],{type:e})},exports.msgCheck=function(e,r){run(_[12792],e,r)},exports.downloadClient=function(){run(_[31247])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getPublicData=function(){run(_[31248])},exports.weiduanHelper=function(){run(_[24623])},exports.sendUrl=function(){run(_[31249])},exports.setMessageToFriendQuery=function(e,r){run(_[31250],e,r)},exports.setLoadingCmp=function(){run(_[31251])},exports.sendCode=function(e,r){run(_[31252],e,r)},exports.bindPhone=function(e,r){run(_[12143],e,r)},exports.subscribeMessage=function(e,r){run(_[31253],e,r)};