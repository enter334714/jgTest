var u=wx.$x;function xj7f9cl(){}function xt26w13(r,l,x,a,n){function h0pkeb(e){var t=e.slice(1,-1);return t in x?x[t]:"#"===t.charAt(0)?65535<(t=parseInt(t.substr(1).replace("x","0x")))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t):(n.error("entity not found:"+e),e)}function g4dsx(e){var t;s<e&&(t=r.substring(s,e).replace(/&#?\w+;/g,h0pkeb),c&&juncd(s),a.characters(t,0,e-s),s=e)}function juncd(e,t){for(;h<=e&&(t=d.exec(r));)f=t.index,h=f+t[0].length,c.lineNumber++;c.columnNumber=e-f+1}for(var f=0,h=0,d=/.*(?:\r\n?|\n)|.*$/g,c=a.locator,m=[{currentNSMap:l}],g={},s=0;;){try{var e=r.indexOf("<",s);var w,p;if(e<0)return void(r.substr(s).match(/^\s*$/)||(p=(w=a.doc).createTextNode(r.substr(s)),w.appendChild(p),a.currentElement=p));switch(s<e&&g4dsx(e),r.charAt(e+1)){case"/":var t=r.indexOf(">",e+3),i=r.substring(e+2,t),u=m.pop();t<0?(i=r.substring(e+2).replace(/[\s<].*/,""),n.error("end tag name: "+i+" is not complete:"+u.tagName),t=e+1+i.length):i.match(/\s</)&&(i=i.replace(/[\s<].*/,""),n.error("end tag name: "+i+" maybe not complete"),t=e+1+i.length);var b=u.localNSMap,v=u.tagName==i;if(v||u.tagName&&u.tagName.toLowerCase()==i.toLowerCase()){if(a.endElement(u.uri,u.localName,i),b)for(var N in b)a.endPrefixMapping(N);v||n.fatalError("end tag name: "+i+" is not match the current start tagName:"+u.tagName)}else m.push(u);t++;break;case"?":c&&juncd(e),t=xxigs4m(r,e,a);break;case"!":c&&juncd(e),t=xh_aepq(r,e,a,n);break;default:c&&juncd(e);var o=new xoxiszm,k=m[m.length-1].currentNSMap,t=xgvx4d(r,e,o,k,h0pkeb,n),j=o.length;if(!o.closed&&xw1ke(r,t,o.tagName,g)&&(o.closed=!0,x.nbsp||n.warning("unclosed xml attribute")),c&&j){for(var q=xomz25s(c,{}),F=0;F<j;F++){var _=o[F];juncd(_.offset),_.locator=xomz25s(c,{})}a.locator=q,xg4xsi(o,a,k)&&m.push(o),a.locator=c}else xg4xsi(o,a,k)&&m.push(o);"http://www.w3.org/1999/xhtml"!==o.uri||o.closed?t++:t=xd4g(r,t,o.tagName,h0pkeb,a)}}catch(e){n.error("element parse error: "+e),t=-1}s<t?s=t:g4dsx(Math.max(e,s)+1)}}function xomz25s(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function xgvx4d(e,t,r,l,a,n){for(var c,s=++t,i=xz6om25;;){var u=e.charAt(s);switch(u){case"=":if(i===xigvu)c=e.slice(t,s),i=xc9j7lf;else{if(i!==xqh0a)throw new Error("attribute equal must after attrName");i=xc9j7lf}break;case"'":case'"':if(i===xc9j7lf||i===xigvu){if(i===xigvu&&(n.warning('attribute value must after "="'),c=e.slice(t,s)),!(0<(s=e.indexOf(u,t=s+1))))throw new Error("attribute value no end '"+u+"' match");o=e.slice(t,s).replace(/&#?\w+;/g,a),r.add(c,o,t-1),i=xl9fy87}else{if(i!=xw0hke)throw new Error('attribute value must after "="');o=e.slice(t,s).replace(/&#?\w+;/g,a),r.add(c,o,t),n.warning('attribute "'+c+'" missed start quot('+u+")!!"),t=s+1,i=xl9fy87}break;case"/":switch(i){case xz6om25:r.setTagName(e.slice(t,s));case xl9fy87:case xh_ar:case xvujcf:i=xvujcf,r.closed=!0;case xw0hke:case xigvu:case xqh0a:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),i==xz6om25&&r.setTagName(e.slice(t,s)),s;case">":switch(i){case xz6om25:r.setTagName(e.slice(t,s));case xl9fy87:case xh_ar:case xvujcf:break;case xw0hke:case xigvu:"/"===(o=e.slice(t,s)).slice(-1)&&(r.closed=!0,o=o.slice(0,-1));case xqh0a:i===xqh0a&&(o=c),i==xw0hke?(n.warning('attribute "'+o+'" missed quot(")!!'),r.add(c,o.replace(/&#?\w+;/g,a),t)):("http://www.w3.org/1999/xhtml"===l[""]&&o.match(/^(?:disabled|checked|selected)$/i)||n.warning('attribute "'+o+'" missed value!! "'+o+'" instead!!'),r.add(o,o,t));break;case xc9j7lf:throw new Error("attribute value missed!!")}return s;case"\x80":u=" ";default:if(u<=" ")switch(i){case xz6om25:r.setTagName(e.slice(t,s)),i=xh_ar;break;case xigvu:c=e.slice(t,s),i=xqh0a;break;case xw0hke:var o=e.slice(t,s).replace(/&#?\w+;/g,a);n.warning('attribute "'+o+'" missed quot(")!!'),r.add(c,o,t);case xl9fy87:i=xh_ar}else switch(i){case xqh0a:r.tagName,"http://www.w3.org/1999/xhtml"===l[""]&&c.match(/^(?:disabled|checked|selected)$/i)||n.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!'),r.add(c,c,t),t=s,i=xigvu;break;case xl9fy87:n.warning('attribute space is required"'+c+'"!!');case xh_ar:i=xigvu,t=s;break;case xc9j7lf:i=xw0hke,t=s;break;case xvujcf:throw new Error("elements closed character '/' and '>' must be connected to")}}s++}}function xg4xsi(e,l,t){for(var r=e.tagName,a=null,n=e.length;n--;){var c=e[n],s=c.qName,x=c.value;var i;s=0<(u=s.indexOf(":"))?(o=c.prefix=s.slice(0,u),i=s.slice(u+1),"xmlns"===o&&i):(o=null,"xmlns"===(i=s)&&""),c.localName=i,!1!==s&&(null==a&&(a={},xlnfj9c(t,t={})),t[s]=a[s]=x,c.uri="http://www.w3.org/2000/xmlns/",l.startPrefixMapping(s,x))}for(n=e.length;n--;)(o=(c=e[n]).prefix)&&("xml"===o&&(c.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==o&&(c.uri=t[o||""]));var u;i=0<(u=r.indexOf(":"))?(o=e.prefix=r.slice(0,u),e.localName=r.slice(u+1)):(o=null,e.localName=r);var f=e.uri=t[o||""];if(l.startElement(f,i,r,e),!e.closed)return e.currentNSMap=t,e.localNSMap=a,!0;if(l.endElement(f,i,r),a)for(var o in a)l.endPrefixMapping(o)}function xd4g(e,t,r,a,n){if(/^(?:script|textarea)$/i.test(r)){var c=e.indexOf("</"+r+">",t),e=e.substring(t+1,c);if(/[&<]/.test(e))return/^script$/i.test(r)||(e=e.replace(/&#?\w+;/g,a)),n.characters(e,0,e.length),c}return t+1}function xw1ke(e,t,r,a){var n=a[r];return null==n&&((n=e.lastIndexOf("</"+r+">"))<t&&(n=e.lastIndexOf("</"+r)),a[r]=n),n<t}function xlnfj9c(e,t){for(var r in e)t[r]=e[r]}function xh_aepq(e,t,r,a){var n=e.charAt(t+2);if("-"===n)return"-"!==e.charAt(t+3)?-1:t<(c=e.indexOf("--\x3e",t+4))?(r.comment(e,t+4,c-t-4),c+3):(a.error("Unclosed comment"),-1);if("CDATA["==e.substr(t+3,6))return c=e.indexOf("]]>",t+9),r.startCDATA(),r.characters(e,t+9,c-t-9),r.endCDATA(),c+3;n=x_pqahe(e,t),a=n.length;var c;return 1<a&&/!doctype/i.test(n[0][0])?(c=n[1][0],e=3<a&&/^public$/i.test(n[2][0])&&n[3][0],t=4<a&&n[4][0],n=n[a-1],r.startDTD(c,e&&e.replace(/^(['"])(.*?)\1$/,"$2"),t&&t.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),n.index+n[0].length):-1}function xxigs4m(e,t,r){var a=e.indexOf("?>",t);return a&&(e=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/))?(e[0].length,r.processingInstruction(e[1],e[2]),a+2):-1}function xoxiszm(){}function xfj9c7l(e,t){return e.__proto__=t,e}function x_pqahe(e,t){var r,a=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);r=n.exec(e);)if(a.push(r),r[1])return a}var xt1wb3=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,xkt31b=new RegExp("[\\-\\.0-9"+xt1wb3.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),xbp0h=new RegExp("^"+xt1wb3.source+xkt31b.source+"*(?::"+xt1wb3.source+xkt31b.source+"*)?$"),xz6om25=0,xigvu=1,xqh0a=2,xc9j7lf=3,xw0hke=4,xl9fy87=5,xh_ar=6,xvujcf=7;xj7f9cl.prototype={parse:function(e,t,r){var a=this.domBuilder;a.startDocument(),xlnfj9c(t,t={}),xt26w13(e,t,r,a,this.errorHandler),a.endDocument()}},xoxiszm.prototype={setTagName:function(e){if(!xbp0h.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!xbp0h.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},xfj9c7l({},xfj9c7l.prototype)instanceof xfj9c7l||(xfj9c7l=function(e,t){function aq_h(){}for(t in aq_h.prototype=t,aq_h=new aq_h,e)aq_h[t]=e[t];return aq_h}),exports.XMLReader=xj7f9cl;