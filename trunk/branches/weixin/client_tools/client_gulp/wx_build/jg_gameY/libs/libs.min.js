var Laya=window.Laya=function(y$n,y$_){var y$m={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(y$_,y$c){return 1==arguments.length?y$m.__presubstr.call(this,y$_):y$m.__presubstr.call(this,y$_,0<y$c?y$c:this.length+y$c)},__init:function(y$_){y$_.forEach(function(y$_){y$_.__init$&&y$_.__init$()})},__isClass:function(y$_){return y$_&&(y$_.__isclass||y$_==Object||y$_==String||y$_==Array)},__newvec:function(y$_,y$c){var y$e=[];y$e.length=y$_;for(var y$Z=0;y$Z<y$_;y$Z++)y$e[y$Z]=y$c;return y$e},__extend:function(y$_,y$c){for(var y$e in y$c)if(y$c.hasOwnProperty(y$e)){var y$Z=Object.getOwnPropertyDescriptor(y$c,y$e),y$X=y$Z.get,y$u=y$Z.set;y$X||y$u?y$X&&y$u?Object.defineProperty(y$_,y$e,y$Z):(y$X&&Object.defineProperty(y$_,y$e,y$X),y$u&&Object.defineProperty(y$_,y$e,y$u)):y$_[y$e]=y$c[y$e]}function y$P(){y$m.un(this,"constructor",y$_)}y$P.prototype=y$c.prototype,y$_.prototype=new y$P,y$m.un(y$_.prototype,"__imps",y$m.__copy({},y$c.prototype.__imps))},__copy:function(y$_,y$c){if(!y$c)return null;for(var y$e in y$_=y$_||{},y$c)y$_[y$e]=y$c[y$e];return y$_},__package:function(y$_,y$c){if(!y$m.__packages[y$_]){y$m.__packages[y$_]=!0;var y$e=y$n,y$Z=y$_.split(".");if(1<y$Z.length)for(var y$X=0,y$u=y$Z.length-1;y$X<y$u;y$X++){var y$P=y$e[y$Z[y$X]];y$e=y$P||(y$e[y$Z[y$X]]={})}y$e[y$Z[y$Z.length-1]]||(y$e[y$Z[y$Z.length-1]]=y$c||{})}},__hasOwnProperty:function(y$_,y$c){return y$c=y$c||this,Object.hasOwnProperty.call(y$c,y$_)||function y$_(y$c,y$e){if(Object.hasOwnProperty.call(y$e.prototype,y$c))return!0;var y$Z=y$e.prototype.__super;return null==y$Z?null:y$_(y$c,y$Z)}(y$_,y$c.__class)},__typeof:function(y$_,y$c){if(!y$_||!y$c)return!1;if(y$c===String)return"string"==typeof y$_;if(y$c===Number)return"number"==typeof y$_;if(y$c.__interface__)y$c=y$c.__interface__;else if("string"!=typeof y$c)return y$_ instanceof y$c;return y$_.__imps&&y$_.__imps[y$c]||y$_.__class==y$c},__as:function(y$_,y$c){return this.__typeof(y$_,y$c)?y$_:null},__int:function(y$_){return y$_?parseInt(y$_):0},interface:function(y$_,y$c){y$m.__package(y$_,{});var y$e=y$m.__internals,y$Z=y$e[y$_]=y$e[y$_]||{self:y$_};if(y$c){var y$X=y$c.split(",");y$Z.extend=[];for(var y$u=0;y$u<y$X.length;y$u++){var y$P=y$X[y$u];y$e[y$P]=y$e[y$P]||{self:y$P},y$Z.extend.push(y$e[y$P])}}var y$O=y$n,y$s=y$_.split(".");for(y$u=0;y$u<y$s.length-1;y$u++)y$O=y$O[y$s[y$u]];y$O[y$s[y$s.length-1]]={__interface__:y$_}},class:function(y$_,y$c,y$e,y$Z){if(y$e&&y$m.__extend(y$_,y$e),y$c)if(y$m.__package(y$c,y$_),y$m.__classmap[y$c]=y$_,0<y$c.indexOf(".")){if(0==y$c.indexOf("laya.")){var y$X=y$c.split(".");y$Z=y$Z||y$X[y$X.length-1],y$m[y$Z]&&console.log("Warning!,this class["+y$Z+"] already exist:",y$m[y$Z]),y$m[y$Z]=y$_}}else"Main"==y$c?y$n.Main=y$_:"MainWX"==y$c?y$n.MainWX=y$_:(y$m[y$c]&&console.log("Error!,this class["+y$c+"] already exist:",y$m[y$c]),y$m[y$c]=y$_);var y$u=y$m.un,y$P=y$_.prototype;y$u(y$P,"hasOwnProperty",y$m.__hasOwnProperty),y$u(y$P,"__class",y$_),y$u(y$P,"__super",y$e),y$u(y$P,"__className",y$c),y$u(y$_,"__super",y$e),y$u(y$_,"__className",y$c),y$u(y$_,"__isclass",!0),y$u(y$_,"super",function(y$_){this.__super.call(y$_)})},imps:function(y$_,y$c){if(!y$c)return null;var y$X=y$_.__imps||y$m.un(y$_,"__imps",{});function y$u(y$_){var y$c,y$e;if((y$c=y$m.__internals[y$_])&&(y$X[y$_]=!0,y$e=y$c.extend))for(var y$Z=0;y$Z<y$e.length;y$Z++)y$u(y$e[y$Z].self)}for(var y$e in y$c)y$u(y$e)},superSet:function(y$_,y$c,y$e,y$Z){var y$X=y$_.prototype["_$set_"+y$e];y$X&&y$X.call(y$c,y$Z)},superGet:function(y$_,y$c,y$e){var y$Z=y$_.prototype["_$get_"+y$e];return y$Z?y$Z.call(y$c):null},getset:function(y$_,y$c,y$e,y$Z,y$X){y$_?(y$Z&&(y$c["_$GET_"+y$e]=y$Z),y$X&&(y$c["_$SET_"+y$e]=y$X)):(y$Z&&y$m.un(y$c,"_$get_"+y$e,y$Z),y$X&&y$m.un(y$c,"_$set_"+y$e,y$X)),y$Z&&y$X?Object.defineProperty(y$c,y$e,{get:y$Z,set:y$X,enumerable:!1,configurable:!0}):(y$Z&&Object.defineProperty(y$c,y$e,{get:y$Z,enumerable:!1,configurable:!0}),y$X&&Object.defineProperty(y$c,y$e,{set:y$X,enumerable:!1,configurable:!0}))},static:function(y$e,y$Z){for(var y$X=0,y$_=y$Z.length;y$X<y$_;y$X+=2)if("length"==y$Z[y$X])y$e.length=y$Z[y$X+1].call(y$e);else{function y$c(){var y$c=y$Z[y$X],y$_=y$Z[y$X+1];Object.defineProperty(y$e,y$c,{get:function(){return delete this[y$c],this[y$c]=y$_.call(this)},set:function(y$_){delete this[y$c],this[y$c]=y$_},enumerable:!0,configurable:!0})}y$c()}},un:function(y$_,y$c,y$e){return y$e||(y$e=y$_[y$c]),y$m.__propun.value=y$e,Object.defineProperty(y$_,y$c,y$m.__propun),y$e},uns:function(y$c,y$_){y$_.forEach(function(y$_){y$m.un(y$c,y$_)})}};return y$n.console=y$n.console||{log:function(){}},y$n.trace=y$n.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),y$m}(window,document);!function(y$_,y$c,y$e){y$e.un,y$e.uns,y$e.static,y$e.class,y$e.getset,y$e.__newvec}(window,document,Laya),function(y$P,y$c,y$M){y$M.un,y$M.uns;var y$s=y$M.static,y$m=y$M.class,y$U=y$M.getset;y$M.__newvec;y$M.interface("laya.runtime.IMarket"),y$M.interface("laya.filters.IFilter"),y$M.interface("laya.display.ILayout"),y$M.interface("laya.resource.IDispose"),y$M.interface("laya.runtime.IPlatform"),y$M.interface("laya.resource.IDestroy"),y$M.interface("laya.runtime.IConchNode"),y$M.interface("laya.filters.IFilterAction"),y$M.interface("laya.runtime.ICPlatformClass"),y$M.interface("laya.resource.ICreateResource"),y$M.interface("laya.runtime.IConchRenderObject"),y$M.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var y$y=function(){function y$u(){}return y$m(y$u,"laya.utils.RunDriver"),y$u.FILTER_ACTIONS=[],y$u.pixelRatio=-1,y$u._charSizeTestDiv=null,y$u.now=function(){return Date.now()},y$u.getWindow=function(){return y$P},y$u.getPixelRatio=function(){if(y$u.pixelRatio<0){var y$_=y$p.context,y$c=y$_.backingStorePixelRatio||y$_.webkitBackingStorePixelRatio||y$_.mozBackingStorePixelRatio||y$_.msBackingStorePixelRatio||y$_.oBackingStorePixelRatio||y$_.backingStorePixelRatio||1;(y$u.pixelRatio=(y$p.window.devicePixelRatio||1)/y$c)<1&&(y$u.pixelRatio=1)}return y$u.pixelRatio},y$u.getIncludeStr=function(y$_){return null},y$u.createShaderCondition=function(y$_){var y$c="(function() {return "+y$_+";})";return y$M._runScript(y$c)},y$u.fontMap=[],y$u.measureText=function(y$_,y$c){var y$e=y$u.hanzi.test(y$_);if(y$e&&y$u.fontMap[y$c])return y$u.fontMap[y$c];var y$Z=y$p.context;y$Z.font=y$c;var y$X=y$Z.measureText(y$_);return y$e&&(y$u.fontMap[y$c]=y$X),y$X},y$u.getWebGLContext=function(y$_){},y$u.beginFlush=function(){},y$u.endFinish=function(){},y$u.addToAtlas=null,y$u.flashFlushImage=function(y$_){},y$u.drawToCanvas=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$z_.create("2D"),y$O=new y$i(y$e,y$Z,y$P);return y$x.renders[y$c]._fun(y$_,y$O,y$X,y$u),y$P},y$u.createParticleTemplate2D=null,y$u.createGLTextur=null,y$u.createWebGLContext2D=null,y$u.changeWebGLSize=function(y$_,y$c){},y$u.createRenderSprite=function(y$_,y$c){return new y$x(y$_,y$c)},y$u.createFilterAction=function(y$_){return new y$z},y$u.createGraphics=function(){return new y$B},y$u.clear=function(y$_){y$R._context.ctx.clear()},y$u.cancelLoadByUrl=function(y$_){},y$u.clearAtlas=function(y$_){},y$u.isAtlas=function(y$_){return!1},y$u.addTextureToAtlas=function(y$_){},y$u.getTexturePixels=function(y$_,y$c,y$e,y$Z,y$X){return null},y$u.skinAniSprite=function(){return null},y$u.update3DLoop=function(){},y$s(y$u,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),y$u}(),y$Z=(y$U(1,y$M,"alertGlobalError",null,function(y$_){var y$u=0;y$p.window.onerror=y$_?function(y$_,y$c,y$e,y$Z,y$X){y$u++<5&&y$X&&alert(y$X.stack||y$X)}:null}),y$M.init=function(y$_,y$c,y$e){for(var y$Z=[],y$X=2,y$u=arguments.length;y$X<y$u;y$X++)y$Z.push(arguments[y$X]);if(!y$M._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=y$M._arrayBufferSlice),y$M._isinit=!0,y$p.__init__(),y$F.__init__(),y$B.__init__(),y$M.timer=new y$S,y$M.scaleTimer=new y$S,y$M.loader=new y$s_,y$d.__init__(),y$X=0;for(var y$P=y$Z.length;y$X<y$P;y$X++)y$Z[y$X].enable&&y$Z[y$X].enable();return y$D.__init__(),y$O.__init__(),y$Y.__init__(),y$Q.beginCheck(),y$M._currentStage=y$M.stage=new y$G_,y$M.stage.conchModel&&y$M.stage.conchModel.setRootNode(),y$M._getUrlPath(),y$M.render=new y$R(0,0),y$M.stage.size(y$_,y$c),y$x.__init__(),y$H.__init__(),y$k.instance.__init__(y$M.stage,y$R.canvas),y$q_.__init__(),y$C.autoStopMusic=!0,y$v.__init__(),y$R.canvas}},y$M._getUrlPath=function(){var y$_=y$p.window.location,y$c=y$_.pathname;y$c=y$c&&":"==y$c.charAt(2)?y$c.substring(1):y$c,y$h.rootPath=y$h.basePath=y$h.getPath("file:"==y$_.protocol?y$c:y$_.protocol+"//"+y$_.host+y$_.pathname)},y$M._arrayBufferSlice=function(y$_,y$c){var y$e=new Uint8Array(this,y$_,y$c-y$_),y$Z=new Uint8Array(y$e.length);return y$Z.set(y$e),y$Z.buffer},y$M._runScript=function(y$_){return y$p.window[y$M._evcode](y$_)},y$M.stage=null,y$M.timer=null,y$M.scaleTimer=null,y$M.loader=null,y$M.version="1.8.6",y$M.render=null,y$M._currentStage=null,y$M._isinit=!1,y$M.isDebug=!1,y$M.MiniAdpter={init:function(){y$P.navigator&&y$P.navigator.userAgent&&-1<y$P.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},y$s(y$M,["conchMarket",function(){return this.conchMarket=y$P.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=y$P.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function y$_(){}return y$m(y$_,"Config"),y$_.WebGLTextCacheCount=500,y$_.atlasEnable=!1,y$_.showCanvasMark=!1,y$_.animationInterval=50,y$_.isAntialias=!1,y$_.isAlpha=!1,y$_.premultipliedAlpha=!0,y$_.isStencil=!0,y$_.preserveDrawingBuffer=!1,y$_}()),y$n=function(){function y$n(){this._events=null}y$m(y$n,"laya.events.EventDispatcher");var y$_=y$n.prototype;return y$_.hasListener=function(y$_){return!!(this._events&&this._events[y$_])},y$_.event=function(y$_,y$c){if(!this._events||!this._events[y$_])return!1;var y$e=this._events[y$_];if(y$e.lock)y$e.queue||(y$e.queue=[]),y$e.queue.push(y$c);else{var y$Z;for(y$e.lock=!0,y$e.cursor=y$e.head;y$e.cursor;)y$Z=y$e.cursor,y$e.cursor=y$Z.next,y$Z.once&&y$n.delNode(y$e,y$Z),null!=y$c?y$Z.args?y$Z.method.apply(y$Z.caller,y$Z.args.concat(y$c)):y$c instanceof Array?y$Z.method.apply(y$Z.caller,y$c):y$Z.method.call(y$Z.caller,y$c):y$Z.method.apply(y$Z.caller,y$Z.args),y$Z.once&&y$n.recoverHandler(y$Z);y$e.lock=!1,!y$e.head&&this._events&&this._events[y$_]==y$e&&delete this._events[y$_],y$e.queue&&y$e.queue.length&&this.event(y$_,y$e.queue.shift())}return!0},y$_.on=function(y$_,y$c,y$e,y$Z){return this._createListener(y$_,y$c,y$e,y$Z,!1)},y$_.once=function(y$_,y$c,y$e,y$Z){return this._createListener(y$_,y$c,y$e,y$Z,!0)},y$_._createListener=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$u&&(y$u=!0),y$u&&this.off(y$_,y$c,y$e,y$X);var y$P=y$n.createHandler(y$c||this,y$e,y$Z,y$X);this._events||(this._events={});var y$O=this._events,y$s=y$O[y$_];return y$s?y$s.tail?(y$P.prev=y$s.tail,y$s.tail.next=y$P,y$s.tail=y$P):y$s.head=y$s.tail=y$P:y$O[y$_]={head:y$P,tail:y$P,cursor:null,lock:!1},this},y$_.off=function(y$_,y$c,y$e,y$Z){if(void 0===y$Z&&(y$Z=!1),!this._events||!this._events[y$_])return this;for(var y$X=this._events[y$_],y$u=y$X.head;y$u;){if((!y$c||y$u.caller===y$c)&&y$u.method===y$e&&(!y$Z||y$u.once)){y$n.delNode(y$X,y$u),y$X.cursor==y$u&&(y$X.cursor=y$u.next),y$n.recoverHandler(y$u);break}y$u=y$u.next}return this},y$_.offAll=function(y$_){var y$c=this._events;if(!y$c)return this;if(y$_)this._recoverHandlers(y$c[y$_]),delete y$c[y$_];else{for(var y$e in y$c)this._recoverHandlers(y$c[y$e]);this._events=null}return this},y$_._recoverHandlers=function(y$_){if(y$_){for(var y$c=y$_.head;y$c;){y$n.delNode(y$_,y$c);var y$e=y$c.next;y$n.recoverHandler(y$c),y$c=y$e}y$_.cursor=null}},y$_.isMouseEvent=function(y$_){return y$n.MOUSE_EVENTS[y$_]},y$n.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},y$n.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},y$n.delNode=function(y$_,y$c){y$c.prev?y$c.prev.next=y$c.next:y$_.head=y$c.next,y$c.next?y$c.next.prev=y$c.prev:y$_.tail=y$c.prev},y$n.createHandler=function(y$_,y$c,y$e,y$Z){var y$X=y$n._freeHandler;return y$X?(y$n._freeCount--,y$n._freeHandler=y$X.next,y$X.caller=y$_,y$X.method=y$c,y$X.args=y$e,y$X.once=y$Z):y$X={caller:y$_,method:y$c,args:y$e,once:y$Z},y$X.prev=y$X.next=null,y$X},y$n.recoverHandler=function(y$_){y$_.caller=y$_.method=y$_.args=y$_.prev=null,y$_.next=y$n._freeHandler,y$n._freeHandler=y$_,y$n._freeCount++},y$n._freeHandler=null,y$n._freeCount=0,y$n}(),y$w=function(){function y$X(y$_,y$c,y$e,y$Z){this.once=!1,void(this._id=0)===y$Z&&(y$Z=!1),this.setTo(y$_,y$c,y$e,y$Z)}y$m(y$X,"laya.utils.Handler");var y$_=y$X.prototype;return y$_.setTo=function(y$_,y$c,y$e,y$Z){return this._id=y$X._gid++,this.caller=y$_,this.method=y$c,this.args=y$e,this.once=y$Z,this},y$_.run=function(){if(null==this.method)return null;var y$_=this._id,y$c=this.method.apply(this.caller,this.args);return this._id===y$_&&this.once&&this.recover(),y$c},y$_.runWith=function(y$_){if(null==this.method)return null;var y$c=this._id;if(null==y$_)var y$e=this.method.apply(this.caller,this.args);else y$e=this.args||y$_.unshift?this.args?this.method.apply(this.caller,this.args.concat(y$_)):this.method.apply(this.caller,y$_):this.method.call(this.caller,y$_);return this._id===y$c&&this.once&&this.recover(),y$e},y$_.clear=function(){return this.caller=null,this.method=null,this.args=null,this},y$_.recover=function(){0<this._id&&(this._id=0,this.clear())},y$X.create=function(y$_,y$c,y$e,y$Z){return void 0===y$Z&&(y$Z=!0),new y$X(y$_,y$c,y$e,y$Z)},y$X._gid=1,y$X}(),y$r=function(){function y$_(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}y$m(y$_,"laya.display.BitmapFont");var y$c=y$_.prototype;return y$c.loadFont=function(y$_,y$c){this._path=y$_,this._complete=y$c,y$M.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],y$w.create(this,this.onLoaded))},y$c.onLoaded=function(){this.parseFont(y$O_.getRes(this._path),y$O_.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},y$c.parseFont=function(y$_,y$c){if(null!=y$_&&null!=y$c){this._texture=y$c;var y$e=y$_.getElementsByTagName("info");if(!y$e[0].getAttributeNode)return this.parseFont2(y$_,y$c);this.fontSize=parseInt(y$e[0].getAttributeNode("size").nodeValue);var y$Z,y$X=y$e[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(y$X[0]),parseInt(y$X[1]),parseInt(y$X[2]),parseInt(y$X[3])],y$Z=y$_.getElementsByTagName("char");var y$u=0;for(y$u=0;y$u<y$Z.length;y$u++){var y$P=y$Z[y$u],y$O=parseInt(y$P.getAttributeNode("id").nodeValue),y$s=parseInt(y$P.getAttributeNode("xoffset").nodeValue)/1,y$n=parseInt(y$P.getAttributeNode("yoffset").nodeValue)/1,y$m=parseInt(y$P.getAttributeNode("xadvance").nodeValue)/1,y$H=new y$A;y$H.x=parseInt(y$P.getAttributeNode("x").nodeValue),y$H.y=parseInt(y$P.getAttributeNode("y").nodeValue),y$H.width=parseInt(y$P.getAttributeNode("width").nodeValue),y$H.height=parseInt(y$P.getAttributeNode("height").nodeValue);var y$B=y$m_.create(y$c,y$H.x,y$H.y,y$H.width,y$H.height,y$s,y$n);this._maxWidth=Math.max(this._maxWidth,y$m+this.letterSpacing),this._fontCharDic[y$O]=y$B,this._fontWidthMap[y$O]=y$m}}},y$c.parseFont2=function(y$_,y$c){if(null!=y$_&&null!=y$c){this._texture=y$c;var y$e=y$_.getElementsByTagName("info");this.fontSize=parseInt(y$e[0].attributes.size.nodeValue);var y$Z=y$e[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(y$Z[0]),parseInt(y$Z[1]),parseInt(y$Z[2]),parseInt(y$Z[3])];var y$X=y$_.getElementsByTagName("char"),y$u=0;for(y$u=0;y$u<y$X.length;y$u++){var y$P=y$X[y$u].attributes,y$O=parseInt(y$P.id.nodeValue),y$s=parseInt(y$P.xoffset.nodeValue)/1,y$n=parseInt(y$P.yoffset.nodeValue)/1,y$m=parseInt(y$P.xadvance.nodeValue)/1,y$H=new y$A;y$H.x=parseInt(y$P.x.nodeValue),y$H.y=parseInt(y$P.y.nodeValue),y$H.width=parseInt(y$P.width.nodeValue),y$H.height=parseInt(y$P.height.nodeValue);var y$B=y$m_.create(y$c,y$H.x,y$H.y,y$H.width,y$H.height,y$s,y$n);this._maxWidth=Math.max(this._maxWidth,y$m+this.letterSpacing),this._fontCharDic[y$O]=y$B,this._fontWidthMap[y$O]=y$m}}},y$c.getCharTexture=function(y$_){return this._fontCharDic[y$_.charCodeAt(0)]},y$c.destroy=function(){if(this._texture){for(var y$_ in this._fontCharDic){var y$c=this._fontCharDic[y$_];y$c&&y$c.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},y$c.setSpaceWidth=function(y$_){this._spaceWidth=y$_},y$c.getCharWidth=function(y$_){var y$c=y$_.charCodeAt(0);return this._fontWidthMap[y$c]?this._fontWidthMap[y$c]+this.letterSpacing:" "==y$_?this._spaceWidth+this.letterSpacing:0},y$c.getTextWidth=function(y$_){for(var y$c=0,y$e=0,y$Z=y$_.length;y$e<y$Z;y$e++)y$c+=this.getCharWidth(y$_.charAt(y$e));return y$c},y$c.getMaxWidth=function(){return this._maxWidth},y$c.getMaxHeight=function(){return this.fontSize},y$c.drawText=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P,y$O=this.getTextWidth(y$_),y$s=0;"center"===y$X&&(y$s=(y$u-y$O)/2),"right"===y$X&&(y$s=y$u-y$O);for(var y$n=0,y$m=0,y$H=y$_.length;y$m<y$H;y$m++)(y$P=this.getCharTexture(y$_.charAt(y$m)))&&(y$c.graphics.drawTexture(y$P,y$e+y$n+y$s,y$Z),y$n+=this.getCharWidth(y$_.charAt(y$m)))},y$_}(),y$O=function(){function y$e(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=y$e._TF_EMPTY}y$m(y$e,"laya.display.css.Style");var y$_=y$e.prototype;return y$_.getTransform=function(){return this._tf},y$_.setTransform=function(y$_){this._tf="none"!==y$_&&y$_?y$_:y$e._TF_EMPTY},y$_.setTranslateX=function(y$_){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.translateX=y$_},y$_.setTranslateY=function(y$_){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.translateY=y$_},y$_.setScaleX=function(y$_){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.scaleX=y$_},y$_.setScale=function(y$_,y$c){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.scaleX=y$_,this._tf.scaleY=y$c},y$_.setScaleY=function(y$_){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.scaleY=y$_},y$_.setRotate=function(y$_){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.rotate=y$_},y$_.setSkewX=function(y$_){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.skewX=y$_},y$_.setSkewY=function(y$_){this._tf===y$e._TF_EMPTY&&(this._tf=new y$X),this._tf.skewY=y$_},y$_.destroy=function(){this.scrollRect=null},y$_.render=function(y$_,y$c,y$e,y$Z){},y$_.getCSSStyle=function(){return y$c_.EMPTY},y$_._enableLayout=function(){return!1},y$U(0,y$_,"scaleX",function(){return this._tf.scaleX},function(y$_){this.setScaleX(y$_)}),y$U(0,y$_,"transform",function(){return this.getTransform()},function(y$_){this.setTransform(y$_)}),y$U(0,y$_,"translateX",function(){return this._tf.translateX},function(y$_){this.setTranslateX(y$_)}),y$U(0,y$_,"translateY",function(){return this._tf.translateY},function(y$_){this.setTranslateY(y$_)}),y$U(0,y$_,"scaleY",function(){return this._tf.scaleY},function(y$_){this.setScaleY(y$_)}),y$U(0,y$_,"block",function(){return 0!=(1&this._type)}),y$U(0,y$_,"skewY",function(){return this._tf.skewY},function(y$_){this.setSkewY(y$_)}),y$U(0,y$_,"rotate",function(){return this._tf.rotate},function(y$_){this.setRotate(y$_)}),y$U(0,y$_,"skewX",function(){return this._tf.skewX},function(y$_){this.setSkewX(y$_)}),y$U(0,y$_,"paddingLeft",function(){return 0}),y$U(0,y$_,"paddingTop",function(){return 0}),y$U(0,y$_,"absolute",function(){return!0}),y$e.__init__=function(){y$e._TF_EMPTY=new y$X,y$e.EMPTY=new y$e},y$e.EMPTY=null,y$e._TF_EMPTY=null,y$e}(),y$D=function(){function y$c(y$_){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=y$j.create(y$c.defaultColor),this.family=y$c.defaultFamily,this.stroke=y$c._STROKE,this.size=y$c.defaultSize,y$_&&y$_!==y$c.EMPTY&&y$_.copyTo(this)}y$m(y$c,"laya.display.css.Font");var y$_=y$c.prototype;return y$_.set=function(y$_){this._text=null;for(var y$c=y$_.split(" "),y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++){var y$X=y$c[y$e];switch(y$X){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<y$X.indexOf("px")&&(this.size=parseInt(y$X),this.family=y$c[y$e+1],y$e++)}},y$_.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},y$_.copyTo=function(y$_){y$_._type=this._type,y$_._text=this._text,y$_._weight=this._weight,y$_._color=this._color,y$_.family=this.family,y$_.stroke=this.stroke!=y$c._STROKE?this.stroke.slice():y$c._STROKE,y$_.indent=this.indent,y$_.size=this.size},y$U(0,y$_,"password",function(){return 0!=(1024&this._type)},function(y$_){y$_?this._type|=1024:this._type&=-1025}),y$U(0,y$_,"color",function(){return this._color.strColor},function(y$_){this._color=y$j.create(y$_)}),y$U(0,y$_,"italic",function(){return 0!=(512&this._type)},function(y$_){y$_?this._type|=512:this._type&=-513}),y$U(0,y$_,"bold",function(){return 0!=(2048&this._type)},function(y$_){y$_?this._type|=2048:this._type&=-2049}),y$U(0,y$_,"weight",function(){return""+this._weight},function(y$_){var y$c=0;switch(y$_){case"normal":break;case"bold":this.bold=!0,y$c=700;break;case"bolder":y$c=800;break;case"lighter":y$c=100;break;default:y$c=parseInt(y$_)}this._weight=y$c,this._text=null}),y$U(0,y$_,"decoration",function(){return this._decoration?this._decoration.value:null},function(y$_){var y$c=y$_.split(" ");switch(this._decoration||(this._decoration={}),y$c[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=y$c[0]}y$c[1]&&(this._decoration.color=y$j.create(y$c)),this._decoration.value=y$_}),y$c.__init__=function(){y$c.EMPTY=new y$c(null)},y$c.EMPTY=null,y$c.defaultColor="#000000",y$c.defaultSize=12,y$c.defaultFamily="Arial",y$c.defaultFont="12px Arial",y$c._STROKE=[0,"#000000"],y$c._ITALIC=512,y$c._PASSWORD=1024,y$c._BOLD=2048,y$c}(),y$X=function(){function y$_(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return y$m(y$_,"laya.display.css.TransformInfo"),y$_}(),y$B=function(){function y$H(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,y$R.isConchNode){this._nativeObj=new y$P._conchGraphics,this.id=this._nativeObj.conchID}}y$m(y$H,"laya.display.Graphics");var y$_=y$H.prototype;return y$_.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},y$_.clear=function(y$_){void 0===y$_&&(y$_=!1);var y$c=0,y$e=0;if(y$_){var y$Z=this._one;if(this._cmds){for(y$e=this._cmds.length,y$c=0;y$c<y$e;y$c++)!(y$Z=this._cmds[y$c])||y$Z.callee!==y$R._context._drawTexture&&y$Z.callee!==y$R._context._drawTextureWithTransform||(y$Z[0]=null,y$H._cache.push(y$Z));this._cmds.length=0}else y$Z&&(!y$Z||y$Z.callee!==y$R._context._drawTexture&&y$Z.callee!==y$R._context._drawTextureWithTransform||(y$Z[0]=null,y$H._cache.push(y$Z)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(y$c=0,y$e=this._vectorgraphArray.length;y$c<y$e;y$c++)y$l.getInstance().deleteShape(this._vectorgraphArray[y$c]);this._vectorgraphArray.length=0}},y$_._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},y$_._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new y$e,this._graphicBounds._graphics=this)},y$_._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},y$_._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},y$_.getBounds=function(y$_){return void 0===y$_&&(y$_=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(y$_)},y$_.getBoundPoints=function(y$_){return void 0===y$_&&(y$_=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(y$_)},y$_._addCmd=function(y$_){this._cmds=this._cmds||[],y$_.callee=y$_.shift(),this._cmds.push(y$_)},y$_.setFilters=function(y$_){this._saveToCmd(y$R._context._setFilters,y$_)},y$_.drawTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){if(void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),void 0===y$P&&(y$P=1),!y$_||y$P<.01)return null;y$Z||(y$Z=y$_.sourceWidth),y$X||(y$X=y$_.sourceHeight),y$P=y$P<0?0:1<y$P?1:y$P;var y$O,y$s=!y$R.isWebGL&&(y$p.onFirefox||y$p.onEdge||y$p.onIE||y$p.onSafari)?.5:0,y$n=y$Z/y$_.sourceWidth,y$m=y$X/y$_.sourceHeight;return y$Z=y$_.width*y$n,y$X=y$_.height*y$m,y$_.loaded&&(y$Z<=0||y$X<=0)?null:(y$c+=y$_.offsetX*y$n,y$e+=y$_.offsetY*y$m,this._sp&&(this._sp._renderType|=512),y$c-=y$s,y$e-=y$s,y$Z+=2*y$s,y$X+=2*y$s,y$H._cache.length?((y$O=y$H._cache.pop())[0]=y$_,y$O[1]=y$c,y$O[2]=y$e,y$O[3]=y$Z,y$O[4]=y$X,y$O[5]=y$u,y$O[6]=y$P):y$O=[y$_,y$c,y$e,y$Z,y$X,y$u,y$P],y$O.callee=y$u||1!=y$P?y$R._context._drawTextureWithTransform:y$R._context._drawTexture,null!=this._one||y$u||1!=y$P?this._saveToCmd(y$O.callee,y$O):(this._one=y$O,this._render=this._renderOneImg),y$_.loaded||y$_.once("loaded",this,this._textureLoaded,[y$_,y$O]),this._repaint(),y$O)},y$_.cleanByTexture=function(y$_,y$c,y$e,y$Z,y$X){if(void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),!y$_)return this.clear();if(this._one&&this._render===this._renderOneImg){y$Z||(y$Z=y$_.sourceWidth),y$X||(y$X=y$_.sourceHeight);var y$u=y$Z/y$_.sourceWidth,y$P=y$X/y$_.sourceHeight;y$Z=y$_.width*y$u,y$X=y$_.height*y$P,y$c+=y$_.offsetX*y$u,y$e+=y$_.offsetY*y$P,this._one[0]=y$_,this._one[1]=y$c,this._one[2]=y$e,this._one[3]=y$Z,this._one[4]=y$X,this._repaint()}else this.clear(),y$_&&this.drawTexture(y$_,y$c,y$e,y$Z,y$X)},y$_.drawTextures=function(y$_,y$c){y$_&&this._saveToCmd(y$R._context._drawTextures,[y$_,y$c])},y$_.fillTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){if(void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),void 0===y$u&&(y$u="repeat"),y$_){var y$O=[y$_,y$c,y$e,y$Z,y$X,y$u,y$P||y$f.EMPTY,{}];y$_.loaded||y$_.once("loaded",this,this._textureLoaded,[y$_,y$O]),this._saveToCmd(y$R._context._fillTexture,y$O)}},y$_._textureLoaded=function(y$_,y$c){y$c[3]=y$c[3]||y$_.width,y$c[4]=y$c[4]||y$_.height,this._repaint()},y$_.fillCircle=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$e.bitmap.enableMerageInAtlas=!1;var y$O=new Float32Array(2*(y$P+1)),y$s=new Float32Array(2*(y$P+1)),y$n=new Uint16Array(3*y$P),y$m=2*Math.PI/y$P,y$H=0;y$O[0]=y$Z,y$O[1]=y$X,y$s[0]=y$Z/y$e.width,y$s[1]=y$X/y$e.height;for(var y$B=2,y$D=0;y$D<y$P;y$D++){var y$U=y$u*Math.cos(y$H)+y$Z,y$k=y$u*Math.sin(y$H)+y$X;y$O[y$B]=y$U,y$O[y$B+1]=y$k,y$s[y$B]=y$U/y$e.width,y$s[y$B+1]=y$k/y$e.height,y$H+=y$m,y$B+=2}for(y$D=y$B=0;y$D<y$P;y$D++)y$n[y$B++]=0,y$n[y$B++]=y$D+1,y$n[y$B++]=y$P+1<=y$D+2?1:y$D+2;this.drawTriangles(y$e,y$_,y$c,y$O,y$s,y$n)},y$_.drawTriangles=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){void 0===y$O&&(y$O=1),this._saveToCmd(y$R._context.drawTriangles,[y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n])},y$_._saveToCmd=function(y$_,y$c){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=y$c,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(y$c)),y$c.callee=y$_,this._repaint(),y$c},y$_.clipRect=function(y$_,y$c,y$e,y$Z){this._saveToCmd(y$R._context._clipRect,[y$_,y$c,y$e,y$Z])},y$_.fillText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){void 0===y$P&&(y$P=0),this._saveToCmd(y$R._context._fillText,[y$_,y$c,y$e,y$Z||y$D.defaultFont,y$X,y$u])},y$_.fillBorderText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){this._saveToCmd(y$R._context._fillBorderText,[y$_,y$c,y$e,y$Z||y$D.defaultFont,y$X,y$u,y$P,y$O])},y$_.strokeText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._saveToCmd(y$R._context._strokeText,[y$_,y$c,y$e,y$Z||y$D.defaultFont,y$X,y$u,y$P])},y$_.alpha=function(y$_){y$_=y$_<0?0:1<y$_?1:y$_,this._saveToCmd(y$R._context._alpha,[y$_])},y$_.setAlpha=function(y$_){y$_=y$_<0?0:1<y$_?1:y$_,this._saveToCmd(y$R._context._setAlpha,[y$_])},y$_.transform=function(y$_,y$c,y$e){void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),this._saveToCmd(y$R._context._transform,[y$_,y$c,y$e])},y$_.rotate=function(y$_,y$c,y$e){void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),this._saveToCmd(y$R._context._rotate,[y$_,y$c,y$e])},y$_.scale=function(y$_,y$c,y$e,y$Z){void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0),this._saveToCmd(y$R._context._scale,[y$_,y$c,y$e,y$Z])},y$_.translate=function(y$_,y$c){this._saveToCmd(y$R._context._translate,[y$_,y$c])},y$_.save=function(){this._saveToCmd(y$R._context._save,[])},y$_.restore=function(){this._saveToCmd(y$R._context._restore,[])},y$_.replaceText=function(y$_){this._repaint();var y$c=this._cmds;if(y$c){for(var y$e=y$c.length-1;-1<y$e;y$e--)if(this._isTextCmd(y$c[y$e].callee))return y$c[y$e][0].toUpperCase?y$c[y$e][0]=y$_:y$c[y$e][0].setText(y$_),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=y$_:this._one[0].setText(y$_),!0;return!1},y$_._isTextCmd=function(y$_){return y$_===y$R._context._fillText||y$_===y$R._context._fillBorderText||y$_===y$R._context._strokeText},y$_.replaceTextColor=function(y$_){this._repaint();var y$c=this._cmds;if(y$c)for(var y$e=y$c.length-1;-1<y$e;y$e--)this._isTextCmd(y$c[y$e].callee)&&(y$c[y$e][4]=y$_,y$c[y$e][0].toUpperCase||(y$c[y$e][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=y$_,this._one[0].toUpperCase||(this._one[0].changed=!0))},y$_.loadImage=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=this;void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0);var y$O=y$O_.getRes(y$_);function y$s(y$_){y$_&&(y$P.drawTexture(y$_,y$c,y$e,y$Z,y$X),null!=y$u&&y$u.call(y$P._sp,y$_))}y$O?y$s(y$O):y$M.loader.load(y$_,y$w.create(null,y$s),null,"image")},y$_._renderEmpty=function(y$_,y$c,y$e,y$Z){},y$_._renderAll=function(y$_,y$c,y$e,y$Z){for(var y$X,y$u=this._cmds,y$P=0,y$O=y$u.length;y$P<y$O;y$P++)(y$X=y$u[y$P]).callee.call(y$c,y$e,y$Z,y$X)},y$_._renderOne=function(y$_,y$c,y$e,y$Z){this._one.callee.call(y$c,y$e,y$Z,this._one)},y$_._renderOneImg=function(y$_,y$c,y$e,y$Z){this._one.callee.call(y$c,y$e,y$Z,this._one),2305!==y$_._renderType&&(y$_._renderType|=1)},y$_.drawLine=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$u&&(y$u=1);var y$P=0;y$R.isWebGL&&(y$P=y$l.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(y$P));var y$O=y$u%2==0?0:.5,y$s=[y$_+y$O,y$c+y$O,y$e+y$O,y$Z+y$O,y$X,y$u,y$P];this._saveToCmd(y$R._context._drawLine,y$s)},y$_.drawLines=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=1);var y$u=0;if(y$e&&!(y$e.length<4)){y$R.isWebGL&&(y$u=y$l.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(y$u));var y$P=y$X%2==0?0:.5,y$O=[y$_+y$P,y$c+y$P,y$e,y$Z,y$X,y$u];this._saveToCmd(y$R._context._drawLines,y$O)}},y$_.drawCurves=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=1);var y$u=[y$_,y$c,y$e,y$Z,y$X];this._saveToCmd(y$R._context._drawCurves,y$u)},y$_.drawRect=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){void 0===y$P&&(y$P=1);var y$O=y$u?y$P/2:0,y$s=y$u?y$P:0,y$n=[y$_+y$O,y$c+y$O,y$e-y$s,y$Z-y$s,y$X,y$u,y$P];this._saveToCmd(y$R._context._drawRect,y$n)},y$_.drawCircle=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$u&&(y$u=1);var y$P=y$X?y$u/2:0,y$O=0;y$R.isWebGL&&(y$O=y$l.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(y$O));var y$s=[y$_,y$c,y$e-y$P,y$Z,y$X,y$u,y$O];this._saveToCmd(y$R._context._drawCircle,y$s)},y$_.drawPie=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){void 0===y$O&&(y$O=1);var y$s=y$P?y$O/2:0,y$n=y$P?y$O:0,y$m=0;y$R.isWebGL&&(y$m=y$l.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(y$m));var y$H=[y$_+y$s,y$c+y$s,y$e-y$n,y$Z,y$X,y$u,y$P,y$O,y$m];y$H[3]=y$W.toRadian(y$Z),y$H[4]=y$W.toRadian(y$X),this._saveToCmd(y$R._context._drawPie,y$H)},y$_.drawPoly=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$u&&(y$u=1);var y$P=0,y$O=!1;y$R.isWebGL&&(y$P=y$l.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(y$P),y$O=!(6<y$e.length));var y$s=y$X?y$u%2==0?0:.5:0,y$n=[y$_+y$s,y$c+y$s,y$e,y$Z,y$X,y$u,y$P,y$O];this._saveToCmd(y$R._context._drawPoly,y$n)},y$_.drawPath=function(y$_,y$c,y$e,y$Z,y$X){var y$u=[y$_,y$c,y$e,y$Z,y$X];this._saveToCmd(y$R._context._drawPath,y$u)},y$U(0,y$_,"cmds",function(){return this._cmds},function(y$_){this._sp&&(this._sp._renderType|=512),this._cmds=y$_,this._render=this._renderAll,this._repaint()}),y$H.__init__=function(){if(y$R.isConchNode){for(var y$_=laya.display.Graphics.prototype,y$c=y$p.window.ConchGraphics.prototype,y$e=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],y$Z=0,y$X=y$e.length;y$Z<=y$X;y$Z++){var y$u=y$e[y$Z];y$_[y$u]=y$c[y$u]}y$_._saveToCmd=null,y$c.drawImageS&&(y$_.drawTextures=function(y$_,y$c){if(y$_&&y$_.loaded&&y$_.bitmap&&y$_.source){var y$e=y$_.uv,y$Z=y$_.bitmap.width,y$X=y$_.bitmap.height;this.drawImageS(y$_.bitmap.source,y$e[0]*y$Z,y$e[1]*y$X,(y$e[2]-y$e[0])*y$Z,(y$e[5]-y$e[3])*y$X,y$_.offsetX,y$_.offsetY,y$_.width,y$_.height,y$c)}}),y$_.drawTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){if(void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),void 0===y$P&&(y$P=1),y$_)if(y$_.loaded){if(y$_.loaded&&y$_.bitmap&&y$_.source&&(y$Z||(y$Z=y$_.sourceWidth),y$X||(y$X=y$_.sourceHeight),y$P=y$P<0?0:1<y$P?1:y$P,y$Z=y$Z-y$_.sourceWidth+y$_.width,y$X=y$X-y$_.sourceHeight+y$_.height,!(y$Z<=0||y$X<=0))){y$c+=y$_.offsetX,y$e+=y$_.offsetY;var y$O=y$_.uv,y$s=y$_.bitmap.width,y$n=y$_.bitmap.height;y$O[4]<y$O[0]&&y$O[5]<y$O[1]?this.drawImageM(y$_.bitmap.source,y$O[4]*y$s,y$O[5]*y$n,(y$O[0]-y$O[4])*y$s,(y$O[1]-y$O[5])*y$n,y$c,y$e,y$Z,y$X,y$u,y$P):this.drawImageM(y$_.bitmap.source,y$O[0]*y$s,y$O[1]*y$n,(y$O[2]-y$O[0])*y$s,(y$O[5]-y$O[3])*y$n,y$c,y$e,y$Z,y$X,y$u,y$P),this._repaint()}}else y$_.once("loaded",this,function(){this.drawTexture(y$_,y$c,y$e,y$Z,y$X,y$u)})},y$_.fillTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){if(void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),void 0===y$u&&(y$u="repeat"),y$_&&y$_.loaded){var y$O,y$s=y$R._context.ctx,y$n=y$_.bitmap.width,y$m=y$_.bitmap.height,y$H=y$_.uv;y$O=y$_.uv!=y$m_.DEF_UV?y$s.createPattern(y$_.bitmap.source,y$u,y$H[0]*y$n,y$H[1]*y$m,(y$H[2]-y$H[0])*y$n,(y$H[5]-y$H[3])*y$m):y$s.createPattern(y$_.bitmap.source,y$u);var y$B=0,y$D=0;y$P&&(y$c+=y$P.x%y$_.width,y$e+=y$P.y%y$_.height,y$B-=y$P.x%y$_.width,y$D-=y$P.y%y$_.height),this._fillImage(y$O,y$c,y$e,y$B,y$D,y$Z,y$X)}}}},y$H._cache=[],y$H}(),y$e=function(){function y$z(){this._cacheBoundsType=!1}y$m(y$z,"laya.display.GraphicsBounds");var y$_=y$z.prototype;return y$_.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},y$_.reset=function(){this._temp&&(this._temp.length=0)},y$_.getBounds=function(y$_){return void 0===y$_&&(y$_=!1),(!this._bounds||!this._temp||this._temp.length<1||y$_!=this._cacheBoundsType)&&(this._bounds=y$A._getWrapRec(this.getBoundPoints(y$_),this._bounds)),this._cacheBoundsType=y$_,this._bounds},y$_.getBoundPoints=function(y$_){return void 0===y$_&&(y$_=!1),(!this._temp||this._temp.length<1||y$_!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(y$_)),this._cacheBoundsType=y$_,this._rstBoundPoints=y$W.copyArray(this._rstBoundPoints,this._temp)},y$_._getCmdPoints=function(y$_){void 0===y$_&&(y$_=!1);var y$c,y$e,y$Z=y$R._context,y$X=this._graphics.cmds;if((y$c=this._temp||(this._temp=[])).length=0,y$X||null==this._graphics._one||(y$z._tempCmds.length=0,y$z._tempCmds.push(this._graphics._one),y$X=y$z._tempCmds),!y$X)return y$c;(y$e=y$z._tempMatrixArrays).length=0;var y$u=y$z._initMatrix;y$u.identity();for(var y$P,y$O,y$s=y$z._tempMatrix,y$n=NaN,y$m=NaN,y$H=NaN,y$B=NaN,y$D=NaN,y$U=NaN,y$k=0,y$a=y$X.length;y$k<y$a;y$k++)if((y$P=y$X[y$k]).callee)switch(y$P.callee){case y$Z._save:case 7:y$e.push(y$u),y$u=y$u.clone();break;case y$Z._restore:case 8:y$u=y$e.pop();break;case y$Z._scale:case 5:y$s.identity(),y$s.translate(-y$P[2],-y$P[3]),y$s.scale(y$P[0],y$P[1]),y$s.translate(y$P[2],y$P[3]),this._switchMatrix(y$u,y$s);break;case y$Z._rotate:case 3:y$s.identity(),y$s.translate(-y$P[1],-y$P[2]),y$s.rotate(y$P[0]),y$s.translate(y$P[1],y$P[2]),this._switchMatrix(y$u,y$s);break;case y$Z._translate:case 6:y$s.identity(),y$s.translate(y$P[0],y$P[1]),this._switchMatrix(y$u,y$s);break;case y$Z._transform:case 4:y$s.identity(),y$s.translate(-y$P[1],-y$P[2]),y$s.concat(y$P[0]),y$s.translate(y$P[1],y$P[2]),this._switchMatrix(y$u,y$s);break;case 16:case 24:y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[0],y$P[1],y$P[2],y$P[3]),y$u);break;case 17:y$u.copyTo(y$s),y$s.concat(y$P[4]),y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[0],y$P[1],y$P[2],y$P[3]),y$s);break;case y$Z._drawTexture:y$O=y$P[0],y$_?y$P[3]&&y$P[4]?y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1],y$P[2],y$P[3],y$P[4]),y$u):(y$O=y$P[0],y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1],y$P[2],y$O.width,y$O.height),y$u)):(y$n=(y$P[3]||y$O.sourceWidth)/y$O.width,y$m=(y$P[4]||y$O.sourceHeight)/y$O.height,y$H=y$n*y$O.sourceWidth,y$B=y$m*y$O.sourceHeight,y$D=0<y$O.offsetX?y$O.offsetX:0,y$U=0<y$O.offsetY?y$O.offsetY:0,y$D*=y$n,y$U*=y$m,y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1]-y$D,y$P[2]-y$U,y$H,y$B),y$u));break;case y$Z._fillTexture:y$P[3]&&y$P[4]?y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1],y$P[2],y$P[3],y$P[4]),y$u):(y$O=y$P[0],y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1],y$P[2],y$O.width,y$O.height),y$u));break;case y$Z._drawTextureWithTransform:var y$G;y$G=y$P[5]?(y$u.copyTo(y$s),y$s.concat(y$P[5]),y$s):y$u,y$_?y$P[3]&&y$P[4]?y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1],y$P[2],y$P[3],y$P[4]),y$G):(y$O=y$P[0],y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1],y$P[2],y$O.width,y$O.height),y$G)):(y$O=y$P[0],y$n=(y$P[3]||y$O.sourceWidth)/y$O.width,y$m=(y$P[4]||y$O.sourceHeight)/y$O.height,y$H=y$n*y$O.sourceWidth,y$B=y$m*y$O.sourceHeight,y$D=0<y$O.offsetX?y$O.offsetX:0,y$U=0<y$O.offsetY?y$O.offsetY:0,y$D*=y$n,y$U*=y$m,y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[1]-y$D,y$P[2]-y$U,y$H,y$B),y$G));break;case y$Z._drawRect:case 13:y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[0],y$P[1],y$P[2],y$P[3]),y$u);break;case y$Z._drawCircle:case y$Z._fillCircle:case 14:y$z._addPointArrToRst(y$c,y$A._getBoundPointS(y$P[0]-y$P[2],y$P[1]-y$P[2],y$P[2]+y$P[2],y$P[2]+y$P[2]),y$u);break;case y$Z._drawLine:case 20:y$z._tempPoints.length=0;var y$w;y$w=.5*y$P[5],y$P[0]==y$P[2]?y$z._tempPoints.push(y$P[0]+y$w,y$P[1],y$P[2]+y$w,y$P[3],y$P[0]-y$w,y$P[1],y$P[2]-y$w,y$P[3]):y$P[1]==y$P[3]?y$z._tempPoints.push(y$P[0],y$P[1]+y$w,y$P[2],y$P[3]+y$w,y$P[0],y$P[1]-y$w,y$P[2],y$P[3]-y$w):y$z._tempPoints.push(y$P[0],y$P[1],y$P[2],y$P[3]),y$z._addPointArrToRst(y$c,y$z._tempPoints,y$u);break;case y$Z._drawCurves:case 22:y$z._addPointArrToRst(y$c,y$L.I.getBezierPoints(y$P[2]),y$u,y$P[0],y$P[1]);break;case y$Z._drawPoly:case y$Z._drawLines:case 18:y$z._addPointArrToRst(y$c,y$P[2],y$u,y$P[0],y$P[1]);break;case y$Z._drawPath:case 19:y$z._addPointArrToRst(y$c,this._getPathPoints(y$P[2]),y$u,y$P[0],y$P[1]);break;case y$Z._drawPie:case 15:y$z._addPointArrToRst(y$c,this._getPiePoints(y$P[0],y$P[1],y$P[2],y$P[3],y$P[4]),y$u)}return 200<y$c.length?y$c=y$W.copyArray(y$c,y$A._getWrapRec(y$c)._getBoundPoints()):8<y$c.length&&(y$c=y$q.scanPList(y$c)),y$c},y$_._switchMatrix=function(y$_,y$c){y$c.concat(y$_),y$c.copyTo(y$_)},y$_._getPiePoints=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$z._tempPoints;y$z._tempPoints.length=0,y$u.push(y$_,y$c);var y$P=(y$X-y$Z)%(2*Math.PI)/10,y$O=NaN,y$s=y$Z;for(y$O=0;y$O<=10;y$O++)y$u.push(y$_+y$e*Math.cos(y$s),y$c+y$e*Math.sin(y$s)),y$s+=y$P;return y$u},y$_._getPathPoints=function(y$_){var y$c,y$e,y$Z=0,y$X=y$z._tempPoints;for(y$X.length=0,y$c=y$_.length,y$Z=0;y$Z<y$c;y$Z++)1<(y$e=y$_[y$Z]).length&&(y$X.push(y$e[1],y$e[2]),3<y$e.length&&y$X.push(y$e[3],y$e[4]));return y$X},y$z._addPointArrToRst=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0);var y$u,y$P=0;for(y$u=y$c.length,y$P=0;y$P<y$u;y$P+=2)y$z._addPointToRst(y$_,y$c[y$P]+y$Z,y$c[y$P+1]+y$X,y$e)},y$z._addPointToRst=function(y$_,y$c,y$e,y$Z){var y$X=y$f.TEMP;y$X.setTo(y$c||0,y$e||0),y$Z.transformPoint(y$X),y$_.push(y$X.x,y$X.y)},y$z._tempPoints=[],y$z._tempMatrixArrays=[],y$z._tempCmds=[],y$s(y$z,["_tempMatrix",function(){return this._tempMatrix=new y$$},"_initMatrix",function(){return this._initMatrix=new y$$}]),y$z}(),y$u=function(){function y$_(){}y$m(y$_,"laya.events.Event");var y$c=y$_.prototype;return y$c.setTo=function(y$_,y$c,y$e){return this.type=y$_,this.currentTarget=y$c,this.target=y$e,this},y$c.stopPropagation=function(){this._stoped=!0},y$U(0,y$c,"stageY",function(){return y$M.stage.mouseY}),y$U(0,y$c,"charCode",function(){return this.nativeEvent.charCode}),y$U(0,y$c,"touches",function(){var y$_=this.nativeEvent.touches;if(y$_)for(var y$c=y$M.stage,y$e=0,y$Z=y$_.length;y$e<y$Z;y$e++){var y$X=y$_[y$e],y$u=y$f.TEMP;y$u.setTo(y$X.clientX,y$X.clientY),y$c._canvasTransform.invertTransformPoint(y$u),y$c.transform.invertTransformPoint(y$u),y$X.stageX=y$u.x,y$X.stageY=y$u.y}return y$_}),y$U(0,y$c,"keyLocation",function(){return this.nativeEvent.keyLocation}),y$U(0,y$c,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),y$U(0,y$c,"altKey",function(){return this.nativeEvent.altKey}),y$U(0,y$c,"shiftKey",function(){return this.nativeEvent.shiftKey}),y$U(0,y$c,"stageX",function(){return y$M.stage.mouseX}),y$_.EMPTY=new y$_,y$_.MOUSE_DOWN="mousedown",y$_.MOUSE_UP="mouseup",y$_.CLICK="click",y$_.RIGHT_MOUSE_DOWN="rightmousedown",y$_.RIGHT_MOUSE_UP="rightmouseup",y$_.RIGHT_CLICK="rightclick",y$_.MOUSE_MOVE="mousemove",y$_.MOUSE_OVER="mouseover",y$_.MOUSE_OUT="mouseout",y$_.MOUSE_WHEEL="mousewheel",y$_.ROLL_OVER="mouseover",y$_.ROLL_OUT="mouseout",y$_.DOUBLE_CLICK="doubleclick",y$_.CHANGE="change",y$_.CHANGED="changed",y$_.RESIZE="resize",y$_.ADDED="added",y$_.REMOVED="removed",y$_.DISPLAY="display",y$_.UNDISPLAY="undisplay",y$_.ERROR="error",y$_.COMPLETE="complete",y$_.LOADED="loaded",y$_.INITED="inited",y$_.PROGRESS="progress",y$_.INPUT="input",y$_.RENDER="render",y$_.OPEN="open",y$_.MESSAGE="message",y$_.CLOSE="close",y$_.KEY_DOWN="keydown",y$_.KEY_PRESS="keypress",y$_.KEY_UP="keyup",y$_.FRAME="enterframe",y$_.DRAG_START="dragstart",y$_.DRAG_MOVE="dragmove",y$_.DRAG_END="dragend",y$_.ENTER="enter",y$_.SELECT="select",y$_.BLUR="blur",y$_.FOCUS="focus",y$_.VISIBILITY_CHANGE="visibilitychange",y$_.FOCUS_CHANGE="focuschange",y$_.PLAYED="played",y$_.PAUSED="paused",y$_.STOPPED="stopped",y$_.START="start",y$_.END="end",y$_.ENABLE_CHANGED="enablechanged",y$_.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",y$_.COMPONENT_ADDED="componentadded",y$_.COMPONENT_REMOVED="componentremoved",y$_.LAYER_CHANGED="layerchanged",y$_.HIERARCHY_LOADED="hierarchyloaded",y$_.RECOVERED="recovered",y$_.RELEASED="released",y$_.LINK="link",y$_.LABEL="label",y$_.FULL_SCREEN_CHANGE="fullscreenchange",y$_.DEVICE_LOST="devicelost",y$_.MESH_CHANGED="meshchanged",y$_.MATERIAL_CHANGED="materialchanged",y$_.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",y$_.ANIMATION_CHANGED="animationchanged",y$_.TRIGGER_ENTER="triggerenter",y$_.TRIGGER_STAY="triggerstay",y$_.TRIGGER_EXIT="triggerexit",y$_.TRAIL_FILTER_CHANGE="trailfilterchange",y$_.DOMINO_FILTER_CHANGE="dominofilterchange",y$_}(),y$H=(function(){function y$_(){}y$m(y$_,"laya.events.Keyboard"),y$_.NUMBER_0=48,y$_.NUMBER_1=49,y$_.NUMBER_2=50,y$_.NUMBER_3=51,y$_.NUMBER_4=52,y$_.NUMBER_5=53,y$_.NUMBER_6=54,y$_.NUMBER_7=55,y$_.NUMBER_8=56,y$_.NUMBER_9=57,y$_.A=65,y$_.B=66,y$_.C=67,y$_.D=68,y$_.E=69,y$_.F=70,y$_.G=71,y$_.H=72,y$_.I=73,y$_.J=74,y$_.K=75,y$_.L=76,y$_.M=77,y$_.N=78,y$_.O=79,y$_.P=80,y$_.Q=81,y$_.R=82,y$_.S=83,y$_.T=84,y$_.U=85,y$_.V=86,y$_.W=87,y$_.X=88,y$_.Y=89,y$_.Z=90,y$_.F1=112,y$_.F2=113,y$_.F3=114,y$_.F4=115,y$_.F5=116,y$_.F6=117,y$_.F7=118,y$_.F8=119,y$_.F9=120,y$_.F10=121,y$_.F11=122,y$_.F12=123,y$_.F13=124,y$_.F14=125,y$_.F15=126,y$_.NUMPAD=21,y$_.NUMPAD_0=96,y$_.NUMPAD_1=97,y$_.NUMPAD_2=98,y$_.NUMPAD_3=99,y$_.NUMPAD_4=100,y$_.NUMPAD_5=101,y$_.NUMPAD_6=102,y$_.NUMPAD_7=103,y$_.NUMPAD_8=104,y$_.NUMPAD_9=105,y$_.NUMPAD_ADD=107,y$_.NUMPAD_DECIMAL=110,y$_.NUMPAD_DIVIDE=111,y$_.NUMPAD_ENTER=108,y$_.NUMPAD_MULTIPLY=106,y$_.NUMPAD_SUBTRACT=109,y$_.SEMICOLON=186,y$_.EQUAL=187,y$_.COMMA=188,y$_.MINUS=189,y$_.PERIOD=190,y$_.SLASH=191,y$_.BACKQUOTE=192,y$_.LEFTBRACKET=219,y$_.BACKSLASH=220,y$_.RIGHTBRACKET=221,y$_.QUOTE=222,y$_.ALTERNATE=18,y$_.BACKSPACE=8,y$_.CAPS_LOCK=20,y$_.COMMAND=15,y$_.CONTROL=17,y$_.DELETE=46,y$_.ENTER=13,y$_.ESCAPE=27,y$_.PAGE_UP=33,y$_.PAGE_DOWN=34,y$_.END=35,y$_.HOME=36,y$_.LEFT=37,y$_.UP=38,y$_.RIGHT=39,y$_.DOWN=40,y$_.SHIFT=16,y$_.SPACE=32,y$_.TAB=9,y$_.INSERT=45}(),function(){function y$X(){}return y$m(y$X,"laya.events.KeyBoardManager"),y$X.__init__=function(){y$X._addEvent("keydown"),y$X._addEvent("keypress"),y$X._addEvent("keyup")},y$X._addEvent=function(y$c){y$p.document.addEventListener(y$c,function(y$_){laya.events.KeyBoardManager._dispatch(y$_,y$c)},!0)},y$X._dispatch=function(y$_,y$c){if(y$X.enabled){y$X._event._stoped=!1,y$X._event.nativeEvent=y$_,y$X._event.keyCode=y$_.keyCode||y$_.which||y$_.charCode,"keydown"===y$c?y$X._pressKeys[y$X._event.keyCode]=!0:"keyup"===y$c&&(y$X._pressKeys[y$X._event.keyCode]=null);for(var y$e=y$M.stage.focus&&null!=y$M.stage.focus.event&&y$M.stage.focus.displayedInStage?y$M.stage.focus:y$M.stage,y$Z=y$e;y$Z;)y$Z.event(y$c,y$X._event.setTo(y$c,y$Z,y$e)),y$Z=y$Z.parent}},y$X.hasKeyDown=function(y$_){return y$X._pressKeys[y$_]},y$X._pressKeys={},y$X.enabled=!0,y$s(y$X,["_event",function(){return this._event=new y$u}]),y$X}()),y$k=(function(){function y$_(){}y$m(y$_,"laya.events.KeyLocation"),y$_.STANDARD=0,y$_.LEFT=1,y$_.RIGHT=2,y$_.NUM_PAD=3}(),function(){function y$n(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=y$p.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new y$u,this._matrix=new y$$,this._point=new y$f,this._rect=new y$A,this._prePoint=new y$f,this._curTouchID=NaN}y$m(y$n,"laya.events.MouseManager");var y$_=y$n.prototype;return y$_.__init__=function(y$_,y$c){var y$e=this;this._stage=y$_;var y$Z=this,y$X=this._eventList;y$c.oncontextmenu=function(y$_){if(y$n.enabled)return!1},y$c.addEventListener("mousedown",function(y$_){y$n.enabled&&(y$p.onIE||y$_.preventDefault(),y$X.push(y$_),y$Z.mouseDownTime=y$p.now())}),y$c.addEventListener("mouseup",function(y$_){y$n.enabled&&(y$_.preventDefault(),y$X.push(y$_),y$Z.mouseDownTime=-y$p.now())},!0),y$c.addEventListener("mousemove",function(y$_){if(y$n.enabled){y$_.preventDefault();var y$c=y$p.now();if(y$c-y$Z._lastMoveTimer<10)return;y$Z._lastMoveTimer=y$c,y$X.push(y$_)}},!0),y$c.addEventListener("mouseout",function(y$_){y$n.enabled&&y$X.push(y$_)}),y$c.addEventListener("mouseover",function(y$_){y$n.enabled&&y$X.push(y$_)}),y$c.addEventListener("touchstart",function(y$_){y$n.enabled&&(y$X.push(y$_),y$n._isFirstTouch||y$q_.isInputting||y$_.preventDefault(),y$Z.mouseDownTime=y$p.now())}),y$c.addEventListener("touchend",function(y$_){y$n.enabled?(y$n._isFirstTouch||y$q_.isInputting||y$_.preventDefault(),y$n._isFirstTouch=!1,y$X.push(y$_),y$Z.mouseDownTime=-y$p.now()):y$e._curTouchID=NaN},!0),y$c.addEventListener("touchmove",function(y$_){y$n.enabled&&(y$_.preventDefault(),y$X.push(y$_))},!0),y$c.addEventListener("touchcancel",function(y$_){y$n.enabled?(y$_.preventDefault(),y$X.push(y$_)):y$e._curTouchID=NaN},!0),y$c.addEventListener("mousewheel",function(y$_){y$n.enabled&&y$X.push(y$_)}),y$c.addEventListener("DOMMouseScroll",function(y$_){y$n.enabled&&y$X.push(y$_)})},y$_.initEvent=function(y$_,y$c){var y$e;this._event._stoped=!1,this._event.nativeEvent=y$c||y$_,this._target=null,this._point.setTo(y$_.pageX||y$_.clientX,y$_.pageY||y$_.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=y$_.identifier||0,this._tTouchID=this._event.touchId,(y$e=y$a.I._event)._stoped=!1,y$e.nativeEvent=this._event.nativeEvent,y$e.touchId=this._event.touchId},y$_.checkMouseWheel=function(y$_){this._event.delta=y$_.wheelDelta?.025*y$_.wheelDelta:-y$_.detail;for(var y$c=y$a.I.getLastOvers(),y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++){var y$X=y$c[y$e];y$X.event("mousewheel",this._event.setTo("mousewheel",y$X,this._target))}},y$_.onMouseMove=function(y$_){y$a.I.onMouseMove(y$_,this._tTouchID)},y$_.onMouseDown=function(y$_){if(y$q_.isInputting&&y$M.stage.focus&&y$M.stage.focus.focus&&!y$M.stage.focus.contains(this._target)){var y$c=y$M.stage.focus._tf||y$M.stage.focus,y$e=y$_._tf||y$_;y$e instanceof laya.display.Input&&y$e.multiline==y$c.multiline?y$c._focusOut():y$c.focus=!1}y$a.I.onMouseDown(y$_,this._tTouchID,this._isLeftMouse)},y$_.onMouseUp=function(y$_){y$a.I.onMouseUp(y$_,this._tTouchID,this._isLeftMouse)},y$_.check=function(y$_,y$c,y$e,y$Z){this._point.setTo(y$c,y$e),y$_.fromParentPoint(this._point),y$c=this._point.x,y$e=this._point.y;var y$X=y$_.scrollRect;if(y$X&&(this._rect.setTo(y$X.x,y$X.y,y$X.width,y$X.height),!this._rect.contains(y$c,y$e)))return!1;if(!this.disableMouseEvent){if(y$_.hitTestPrior&&!y$_.mouseThrough&&!this.hitTest(y$_,y$c,y$e))return!1;for(var y$u=y$_._childs.length-1;-1<y$u;y$u--){var y$P=y$_._childs[y$u];if(!y$P.destroyed&&y$P.mouseEnabled&&y$P.visible&&this.check(y$P,y$c,y$e,y$Z))return!0}}var y$O=!(!y$_.hitTestPrior||y$_.mouseThrough||this.disableMouseEvent)||this.hitTest(y$_,y$c,y$e);return y$O?(this._target=y$_,y$Z.call(this,y$_)):y$Z===this.onMouseUp&&y$_===this._stage&&(this._target=this._stage,y$Z.call(this,this._target)),y$O},y$_.hitTest=function(y$_,y$c,y$e){var y$Z=!1;if(y$_.scrollRect&&(y$c-=y$_.scrollRect.x,y$e-=y$_.scrollRect.y),y$_.hitArea instanceof laya.utils.HitArea)return y$_.hitArea.isHit(y$c,y$e);if(0<y$_.width&&0<y$_.height||y$_.mouseThrough||y$_.hitArea)if(y$_.mouseThrough)y$Z=y$_.getGraphicBounds().contains(y$c,y$e);else{var y$X=this._rect;y$_.hitArea?y$X=y$_.hitArea:y$X.setTo(0,0,y$_.width,y$_.height),y$Z=y$X.contains(y$c,y$e)}return y$Z},y$_.runEvent=function(){var y$_=this._eventList.length;if(y$_){this.mouseEventTime=y$p.now();var y$c,y$e=0,y$Z=0,y$X=0;try{for(;y$e<y$_;){var y$u=this._eventList[y$e];switch("mousemove"!==y$u.type&&(this._prePoint.x=this._prePoint.y=-1e6),y$u.type){case"mousedown":this._touchIDs[0]=this._id++,y$n._isTouchRespond?y$n._isTouchRespond=!1:(this._isLeftMouse=0===y$u.button,this.initEvent(y$u),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===y$u.button,this.initEvent(y$u),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-y$u.clientX)+Math.abs(this._prePoint.y-y$u.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=y$u.clientX,this._prePoint.y=y$u.clientY,this.initEvent(y$u),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":y$n._isTouchRespond=!0,this._isLeftMouse=!0;var y$P=y$u.changedTouches;for(y$Z=0,y$X=y$P.length;y$Z<y$X;y$Z++)y$c=y$P[y$Z],(y$n.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=y$c.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[y$c.identifier]=this._id++,this.initEvent(y$c,y$u),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":y$n._isTouchRespond=!0,this._isLeftMouse=!0;var y$O=y$u.changedTouches;for(y$Z=0,y$X=y$O.length;y$Z<y$X;y$Z++)if(y$c=y$O[y$Z],y$n.multiTouchEnabled||y$c.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(y$c,y$u);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var y$s=y$u.changedTouches;for(y$Z=0,y$X=y$s.length;y$Z<y$X;y$Z++)y$c=y$s[y$Z],(y$n.multiTouchEnabled||y$c.identifier==this._curTouchID)&&(this.initEvent(y$c,y$u),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(y$u);break;case"mouseout":y$a.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}y$e++}}catch(y$_){throw this._eventList.length=0,y$_}this._eventList.length=0}},y$n.enabled=!0,y$n.multiTouchEnabled=!0,y$n._isTouchRespond=!1,y$n._isFirstTouch=!0,y$s(y$n,["instance",function(){return this.instance=new y$n}]),y$n}()),y$a=function(){function y$U(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new y$u}y$m(y$U,"laya.events.TouchManager");var y$_=y$U.prototype;return y$_._clearTempArrs=function(){y$U._oldArr.length=0,y$U._newArr.length=0,y$U._tEleArr.length=0},y$_.getTouchFromArr=function(y$_,y$c){var y$e,y$Z,y$X=0;for(y$e=y$c.length,y$X=0;y$X<y$e;y$X++)if((y$Z=y$c[y$X]).id==y$_)return y$Z;return null},y$_.removeTouchFromArr=function(y$_,y$c){var y$e=0;for(y$e=y$c.length-1;0<=y$e;y$e--)y$c[y$e].id==y$_&&y$c.splice(y$e,1)},y$_.createTouchO=function(y$_,y$c){var y$e;return(y$e=y$V.getItem("TouchData")||{}).id=y$c,y$e.tar=y$_,y$e},y$_.onMouseDown=function(y$_,y$c,y$e){var y$Z,y$X,y$u,y$P;(void 0===y$e&&(y$e=!1),this.enable)&&(y$Z=this.getTouchFromArr(y$c,this.preOvers),y$u=this.getEles(y$_,null,y$U._tEleArr),y$Z?y$Z.tar=y$_:(y$X=this.createTouchO(y$_,y$c),this.preOvers.push(y$X)),y$p.onMobile&&this.sendEvents(y$u,"mouseover",y$c),y$P=y$e?this.preDowns:this.preRightDowns,(y$Z=this.getTouchFromArr(y$c,y$P))?y$Z.tar=y$_:(y$X=this.createTouchO(y$_,y$c),y$P.push(y$X)),this.sendEvents(y$u,y$e?"mousedown":"rightmousedown",y$c),this._clearTempArrs())},y$_.sendEvents=function(y$_,y$c,y$e){void 0===y$e&&(y$e=0);var y$Z,y$X,y$u,y$P=0;for(y$Z=y$_.length,this._event._stoped=!1,y$X=y$_[0],y$P=0;y$P<y$Z;y$P++){if((y$u=y$_[y$P]).destroyed)return;if(y$u.event(y$c,this._event.setTo(y$c,y$u,y$X)),this._event._stoped)break}},y$_.getEles=function(y$_,y$c,y$e){for(y$e?y$e.length=0:y$e=[];y$_&&y$_!=y$c;)y$e.push(y$_),y$_=y$_.parent;return y$e},y$_.checkMouseOutAndOverOfMove=function(y$_,y$c,y$e){if(void 0===y$e&&(y$e=0),y$c!=y$_){var y$Z,y$X,y$u=0,y$P=0;if(y$c.contains(y$_))y$X=this.getEles(y$_,y$c,y$U._tEleArr),this.sendEvents(y$X,"mouseover",y$e);else if(y$_.contains(y$c))y$X=this.getEles(y$c,y$_,y$U._tEleArr),this.sendEvents(y$X,"mouseout",y$e);else{var y$O,y$s;(y$X=y$U._tEleArr).length=0,y$O=this.getEles(y$c,null,y$U._oldArr),y$s=this.getEles(y$_,null,y$U._newArr),y$P=y$O.length;var y$n=0;for(y$u=0;y$u<y$P;y$u++){if(y$Z=y$O[y$u],0<=(y$n=y$s.indexOf(y$Z))){y$s.splice(y$n,y$s.length-y$n);break}y$X.push(y$Z)}0<y$X.length&&this.sendEvents(y$X,"mouseout",y$e),0<y$s.length&&this.sendEvents(y$s,"mouseover",y$e)}}},y$_.onMouseMove=function(y$_,y$c){var y$e,y$Z;this.enable&&((y$e=this.getTouchFromArr(y$c,this.preOvers))?(this.checkMouseOutAndOverOfMove(y$_,y$e.tar),y$e.tar=y$_,y$Z=this.getEles(y$_,null,y$U._tEleArr)):(y$Z=this.getEles(y$_,null,y$U._tEleArr),this.sendEvents(y$Z,"mouseover",y$c),this.preOvers.push(this.createTouchO(y$_,y$c))),this.sendEvents(y$Z,"mousemove",y$c),this._clearTempArrs())},y$_.getLastOvers=function(){return(y$U._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,y$U._tEleArr):(y$U._tEleArr.push(y$M.stage),y$U._tEleArr)},y$_.stageMouseOut=function(){var y$_;y$_=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(y$_,"mouseout",0)},y$_.onMouseUp=function(y$_,y$c,y$e){if(void 0===y$e&&(y$e=!1),this.enable){var y$Z,y$X,y$u,y$P,y$O,y$s,y$n=0,y$m=0,y$H=y$p.onMobile;if(y$X=this.getEles(y$_,null,y$U._tEleArr),this.sendEvents(y$X,y$e?"mouseup":"rightmouseup",y$c),y$s=y$e?this.preDowns:this.preRightDowns,y$Z=this.getTouchFromArr(y$c,y$s)){var y$B,y$D=y$p.now();if(y$B=y$D-this._lastClickTime<300,this._lastClickTime=y$D,y$_==y$Z.tar)y$O=y$X;else for(y$u=this.getEles(y$Z.tar,null,y$U._oldArr),(y$O=y$U._newArr).length=0,y$m=y$u.length,y$n=0;y$n<y$m;y$n++)y$P=y$u[y$n],0<=y$X.indexOf(y$P)&&y$O.push(y$P);0<y$O.length&&this.sendEvents(y$O,y$e?"click":"rightclick",y$c),y$e&&y$B&&this.sendEvents(y$O,"doubleclick",y$c),this.removeTouchFromArr(y$c,y$s),y$Z.tar=null,y$V.recover("TouchData",y$Z)}else;(y$Z=this.getTouchFromArr(y$c,this.preOvers))&&y$H&&((y$O=this.getEles(y$Z.tar,null,y$O))&&0<y$O.length&&this.sendEvents(y$O,"mouseout",y$c),this.removeTouchFromArr(y$c,this.preOvers),y$Z.tar=null,y$V.recover("TouchData",y$Z)),this._clearTempArrs()}},y$U._oldArr=[],y$U._newArr=[],y$U._tEleArr=[],y$s(y$U,["I",function(){return this.I=new y$U}]),y$U}(),y$G=function(){function y$_(){this._action=null}y$m(y$_,"laya.filters.Filter");var y$c=y$_.prototype;return y$M.imps(y$c,{"laya.filters.IFilter":!0}),y$c.callNative=function(y$_){},y$U(0,y$c,"type",function(){return-1}),y$U(0,y$c,"action",function(){return this._action}),y$_.BLUR=16,y$_.COLOR=32,y$_.GLOW=8,y$_._filterStart=null,y$_._filterEnd=null,y$_._EndTarget=null,y$_._recycleScope=null,y$_._filter=null,y$_._useSrc=null,y$_._endSrc=null,y$_._useOut=null,y$_._endOut=null,y$_}(),y$z=function(){function y$_(){this.data=null}y$m(y$_,"laya.filters.ColorFilterAction");var y$c=y$_.prototype;return y$M.imps(y$c,{"laya.filters.IFilterAction":!0}),y$c.apply=function(y$_){var y$c=y$_.ctx.ctx,y$e=y$_.ctx.ctx.canvas;if(0==y$e.width||0==y$e.height)return y$e;for(var y$Z,y$X=y$c.getImageData(0,0,y$e.width,y$e.height),y$u=y$X.data,y$P=0,y$O=y$u.length;y$P<y$O;y$P+=4)y$Z=this.getColor(y$u[y$P],y$u[y$P+1],y$u[y$P+2],y$u[y$P+3]),0!=y$u[y$P+3]&&(y$u[y$P]=y$Z[0],y$u[y$P+1]=y$Z[1],y$u[y$P+2]=y$Z[2],y$u[y$P+3]=y$Z[3]);return y$c.putImageData(y$X,0,0),y$_},y$c.getColor=function(y$_,y$c,y$e,y$Z){var y$X=[];if(this.data._mat&&this.data._alpha){var y$u=this.data._mat,y$P=this.data._alpha;y$X[0]=y$u[0]*y$_+y$u[1]*y$c+y$u[2]*y$e+y$u[3]*y$Z+y$P[0],y$X[1]=y$u[4]*y$_+y$u[5]*y$c+y$u[6]*y$e+y$u[7]*y$Z+y$P[1],y$X[2]=y$u[8]*y$_+y$u[9]*y$c+y$u[10]*y$e+y$u[11]*y$Z+y$P[2],y$X[3]=y$u[12]*y$_+y$u[13]*y$c+y$u[14]*y$e+y$u[15]*y$Z+y$P[3]}return y$X},y$_}(),y$L=(function(){function y$_(){}y$m(y$_,"laya.maths.Arith"),y$_.formatR=function(y$_){return y$_>Math.PI&&(y$_-=2*Math.PI),y$_<-Math.PI&&(y$_+=2*Math.PI),y$_},y$_.isPOT=function(y$_,y$c){return 0<y$_&&0==(y$_&y$_-1)&&0<y$c&&0==(y$c&y$c-1)},y$_.setMatToArray=function(y$_,y$c){y$_.a,y$_.b,y$_.c,y$_.d,y$_.tx,y$_.ty,y$c[0]=y$_.a,y$c[1]=y$_.b,y$c[4]=y$_.c,y$c[5]=y$_.d,y$c[12]=y$_.tx,y$c[13]=y$_.ty}}(),function(){function y$_(){this._controlPoints=[new y$f,new y$f,new y$f],this._calFun=this.getPoint2}y$m(y$_,"laya.maths.Bezier");var y$c=y$_.prototype;return y$c._switchPoint=function(y$_,y$c){var y$e=this._controlPoints.shift();y$e.setTo(y$_,y$c),this._controlPoints.push(y$e)},y$c.getPoint2=function(y$_,y$c){var y$e=this._controlPoints[0],y$Z=this._controlPoints[1],y$X=this._controlPoints[2],y$u=Math.pow(1-y$_,2)*y$e.x+2*y$_*(1-y$_)*y$Z.x+Math.pow(y$_,2)*y$X.x,y$P=Math.pow(1-y$_,2)*y$e.y+2*y$_*(1-y$_)*y$Z.y+Math.pow(y$_,2)*y$X.y;y$c.push(y$u,y$P)},y$c.getPoint3=function(y$_,y$c){var y$e=this._controlPoints[0],y$Z=this._controlPoints[1],y$X=this._controlPoints[2],y$u=this._controlPoints[3],y$P=Math.pow(1-y$_,3)*y$e.x+3*y$Z.x*y$_*(1-y$_)*(1-y$_)+3*y$X.x*y$_*y$_*(1-y$_)+y$u.x*Math.pow(y$_,3),y$O=Math.pow(1-y$_,3)*y$e.y+3*y$Z.y*y$_*(1-y$_)*(1-y$_)+3*y$X.y*y$_*y$_*(1-y$_)+y$u.y*Math.pow(y$_,3);y$c.push(y$P,y$O)},y$c.insertPoints=function(y$_,y$c){var y$e,y$Z=NaN;for(y$e=1/(y$_=0<y$_?y$_:5),y$Z=0;y$Z<=1;y$Z+=y$e)this._calFun(y$Z,y$c)},y$c.getBezierPoints=function(y$_,y$c,y$e){void 0===y$c&&(y$c=5),void 0===y$e&&(y$e=2);var y$Z,y$X,y$u=0;if((y$Z=y$_.length)<2*(y$e+1))return[];switch(y$X=[],y$e){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=y$e;)this._controlPoints.push(new y$f);for(y$u=0;y$u<2*y$e;y$u+=2)this._switchPoint(y$_[y$u],y$_[y$u+1]);for(y$u=2*y$e;y$u<y$Z;y$u+=2)this._switchPoint(y$_[y$u],y$_[y$u+1]),y$u/2%y$e==0&&this.insertPoints(y$c,y$X);return y$X},y$s(y$_,["I",function(){return this.I=new y$_}]),y$_}()),y$q=function(){function y$n(){}return y$m(y$n,"laya.maths.GrahamScan"),y$n.multiply=function(y$_,y$c,y$e){return(y$_.x-y$e.x)*(y$c.y-y$e.y)-(y$c.x-y$e.x)*(y$_.y-y$e.y)},y$n.dis=function(y$_,y$c){return(y$_.x-y$c.x)*(y$_.x-y$c.x)+(y$_.y-y$c.y)*(y$_.y-y$c.y)},y$n._getPoints=function(y$_,y$c,y$e){for(void 0===y$c&&(y$c=!1),y$n._mPointList||(y$n._mPointList=[]);y$n._mPointList.length<y$_;)y$n._mPointList.push(new y$f);return y$e||(y$e=[]),y$e.length=0,y$c?y$n.getFrom(y$e,y$n._mPointList,y$_):y$n.getFromR(y$e,y$n._mPointList,y$_),y$e},y$n.getFrom=function(y$_,y$c,y$e){var y$Z=0;for(y$Z=0;y$Z<y$e;y$Z++)y$_.push(y$c[y$Z]);return y$_},y$n.getFromR=function(y$_,y$c,y$e){var y$Z=0;for(y$Z=0;y$Z<y$e;y$Z++)y$_.push(y$c.pop());return y$_},y$n.pListToPointList=function(y$_,y$c){void 0===y$c&&(y$c=!1);var y$e=0,y$Z=y$_.length/2,y$X=y$n._getPoints(y$Z,y$c,y$n._tempPointList);for(y$e=0;y$e<y$Z;y$e++)y$X[y$e].setTo(y$_[y$e+y$e],y$_[y$e+y$e+1]);return y$X},y$n.pointListToPlist=function(y$_){var y$c,y$e=0,y$Z=y$_.length,y$X=y$n._temPList;for(y$e=y$X.length=0;y$e<y$Z;y$e++)y$c=y$_[y$e],y$X.push(y$c.x,y$c.y);return y$X},y$n.scanPList=function(y$_){return y$W.copyArray(y$_,y$n.pointListToPlist(y$n.scan(y$n.pListToPointList(y$_,!0))))},y$n.scan=function(y$_){var y$c,y$e,y$Z,y$X=0,y$u=0,y$P=0,y$O=y$_.length,y$s={};for((y$e=y$n._temArr).length=0,y$X=(y$O=y$_.length)-1;0<=y$X;y$X--)y$Z=(y$c=y$_[y$X]).x+"_"+y$c.y,y$s.hasOwnProperty(y$Z)||(y$s[y$Z]=!0,y$e.push(y$c));for(y$O=y$e.length,y$W.copyArray(y$_,y$e),y$X=1;y$X<y$O;y$X++)(y$_[y$X].y<y$_[y$P].y||y$_[y$X].y==y$_[y$P].y&&y$_[y$X].x<y$_[y$P].x)&&(y$P=y$X);for(y$c=y$_[0],y$_[0]=y$_[y$P],y$_[y$P]=y$c,y$X=1;y$X<y$O-1;y$X++){for(y$u=(y$P=y$X)+1;y$u<y$O;y$u++)(0<y$n.multiply(y$_[y$u],y$_[y$P],y$_[0])||0==y$n.multiply(y$_[y$u],y$_[y$P],y$_[0])&&y$n.dis(y$_[0],y$_[y$u])<y$n.dis(y$_[0],y$_[y$P]))&&(y$P=y$u);y$c=y$_[y$X],y$_[y$X]=y$_[y$P],y$_[y$P]=y$c}if((y$e=y$n._temArr).length=0,y$_.length<3)return y$W.copyArray(y$e,y$_);for(y$e.push(y$_[0],y$_[1],y$_[2]),y$X=3;y$X<y$O;y$X++){for(;2<=y$e.length&&0<=y$n.multiply(y$_[y$X],y$e[y$e.length-1],y$e[y$e.length-2]);)y$e.pop();y$_[y$X]&&y$e.push(y$_[y$X])}return y$e},y$n._mPointList=null,y$n._tempPointList=[],y$n._temPList=[],y$n._temArr=[],y$n}(),y$K=function(){function y$X(){}return y$m(y$X,"laya.maths.MathUtil"),y$X.subtractVector3=function(y$_,y$c,y$e){y$e[0]=y$_[0]-y$c[0],y$e[1]=y$_[1]-y$c[1],y$e[2]=y$_[2]-y$c[2]},y$X.lerp=function(y$_,y$c,y$e){return y$_*(1-y$e)+y$c*y$e},y$X.scaleVector3=function(y$_,y$c,y$e){y$e[0]=y$_[0]*y$c,y$e[1]=y$_[1]*y$c,y$e[2]=y$_[2]*y$c},y$X.lerpVector3=function(y$_,y$c,y$e,y$Z){var y$X=y$_[0],y$u=y$_[1],y$P=y$_[2];y$Z[0]=y$X+y$e*(y$c[0]-y$X),y$Z[1]=y$u+y$e*(y$c[1]-y$u),y$Z[2]=y$P+y$e*(y$c[2]-y$P)},y$X.lerpVector4=function(y$_,y$c,y$e,y$Z){var y$X=y$_[0],y$u=y$_[1],y$P=y$_[2],y$O=y$_[3];y$Z[0]=y$X+y$e*(y$c[0]-y$X),y$Z[1]=y$u+y$e*(y$c[1]-y$u),y$Z[2]=y$P+y$e*(y$c[2]-y$P),y$Z[3]=y$O+y$e*(y$c[3]-y$O)},y$X.slerpQuaternionArray=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){var y$O,y$s,y$n,y$m,y$H,y$B=y$_[y$c+0],y$D=y$_[y$c+1],y$U=y$_[y$c+2],y$k=y$_[y$c+3],y$a=y$e[y$Z+0],y$G=y$e[y$Z+1],y$w=y$e[y$Z+2],y$z=y$e[y$Z+3];return(y$s=y$B*y$a+y$D*y$G+y$U*y$w+y$k*y$z)<0&&(y$s=-y$s,y$a=-y$a,y$G=-y$G,y$w=-y$w,y$z=-y$z),y$H=1e-6<1-y$s?(y$O=Math.acos(y$s),y$n=Math.sin(y$O),y$m=Math.sin((1-y$X)*y$O)/y$n,Math.sin(y$X*y$O)/y$n):(y$m=1-y$X,y$X),y$u[y$P+0]=y$m*y$B+y$H*y$a,y$u[y$P+1]=y$m*y$D+y$H*y$G,y$u[y$P+2]=y$m*y$U+y$H*y$w,y$u[y$P+3]=y$m*y$k+y$H*y$z,y$u},y$X.getRotation=function(y$_,y$c,y$e,y$Z){return Math.atan2(y$Z-y$c,y$e-y$_)/Math.PI*180},y$X.sortBigFirst=function(y$_,y$c){return y$_==y$c?0:y$_<y$c?1:-1},y$X.sortSmallFirst=function(y$_,y$c){return y$_==y$c?0:y$_<y$c?-1:1},y$X.sortNumBigFirst=function(y$_,y$c){return parseFloat(y$c)-parseFloat(y$_)},y$X.sortNumSmallFirst=function(y$_,y$c){return parseFloat(y$_)-parseFloat(y$c)},y$X.sortByKey=function(y$e,y$_,y$c){var y$Z;return void 0===y$_&&(y$_=!1),void 0===y$c&&(y$c=!0),y$Z=y$_?y$c?y$X.sortNumBigFirst:y$X.sortBigFirst:y$c?y$X.sortNumSmallFirst:y$X.sortSmallFirst,function(y$_,y$c){return y$Z(y$_[y$e],y$c[y$e])}},y$X}(),y$$=function(){function y$e(y$_,y$c,y$e,y$Z,y$X,y$u){this.inPool=!1,this.bTransform=!1,void 0===y$_&&(y$_=1),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=1),void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=0),this.a=y$_,this.b=y$c,this.c=y$e,this.d=y$Z,this.tx=y$X,this.ty=y$u,this._checkTransform()}y$m(y$e,"laya.maths.Matrix");var y$_=y$e.prototype;return y$_.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},y$_._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},y$_.setTranslate=function(y$_,y$c){return this.tx=y$_,this.ty=y$c,this},y$_.translate=function(y$_,y$c){return this.tx+=y$_,this.ty+=y$c,this},y$_.scale=function(y$_,y$c){this.a*=y$_,this.d*=y$c,this.c*=y$_,this.b*=y$c,this.tx*=y$_,this.ty*=y$c,this.bTransform=!0},y$_.rotate=function(y$_){var y$c=Math.cos(y$_),y$e=Math.sin(y$_),y$Z=this.a,y$X=this.c,y$u=this.tx;this.a=y$Z*y$c-this.b*y$e,this.b=y$Z*y$e+this.b*y$c,this.c=y$X*y$c-this.d*y$e,this.d=y$X*y$e+this.d*y$c,this.tx=y$u*y$c-this.ty*y$e,this.ty=y$u*y$e+this.ty*y$c,this.bTransform=!0},y$_.skew=function(y$_,y$c){var y$e=Math.tan(y$_),y$Z=Math.tan(y$c),y$X=this.a,y$u=this.b;return this.a+=y$Z*this.c,this.b+=y$Z*this.d,this.c+=y$e*y$X,this.d+=y$e*y$u,this},y$_.invertTransformPoint=function(y$_){var y$c=this.a,y$e=this.b,y$Z=this.c,y$X=this.d,y$u=this.tx,y$P=y$c*y$X-y$e*y$Z,y$O=y$X/y$P,y$s=-y$e/y$P,y$n=-y$Z/y$P,y$m=y$c/y$P,y$H=(y$Z*this.ty-y$X*y$u)/y$P,y$B=-(y$c*this.ty-y$e*y$u)/y$P;return y$_.setTo(y$O*y$_.x+y$n*y$_.y+y$H,y$s*y$_.x+y$m*y$_.y+y$B)},y$_.transformPoint=function(y$_){return y$_.setTo(this.a*y$_.x+this.c*y$_.y+this.tx,this.b*y$_.x+this.d*y$_.y+this.ty)},y$_.transformPointN=function(y$_){return y$_.setTo(this.a*y$_.x+this.c*y$_.y,this.b*y$_.x+this.d*y$_.y)},y$_.transformPointArray=function(y$_,y$c){for(var y$e=y$_.length,y$Z=0;y$Z<y$e;y$Z+=2){var y$X=y$_[y$Z],y$u=y$_[y$Z+1];y$c[y$Z]=this.a*y$X+this.c*y$u+this.tx,y$c[y$Z+1]=this.b*y$X+this.d*y$u+this.ty}return y$c},y$_.transformPointArrayScale=function(y$_,y$c){for(var y$e=y$_.length,y$Z=0;y$Z<y$e;y$Z+=2){var y$X=y$_[y$Z],y$u=y$_[y$Z+1];y$c[y$Z]=this.a*y$X+this.c*y$u,y$c[y$Z+1]=this.b*y$X+this.d*y$u}return y$c},y$_.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},y$_.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},y$_.invert=function(){var y$_=this.a,y$c=this.b,y$e=this.c,y$Z=this.d,y$X=this.tx,y$u=y$_*y$Z-y$c*y$e;return this.a=y$Z/y$u,this.b=-y$c/y$u,this.c=-y$e/y$u,this.d=y$_/y$u,this.tx=(y$e*this.ty-y$Z*y$X)/y$u,this.ty=-(y$_*this.ty-y$c*y$X)/y$u,this},y$_.setTo=function(y$_,y$c,y$e,y$Z,y$X,y$u){return this.a=y$_,this.b=y$c,this.c=y$e,this.d=y$Z,this.tx=y$X,this.ty=y$u,this},y$_.concat=function(y$_){var y$c=this.a,y$e=this.c,y$Z=this.tx;return this.a=y$c*y$_.a+this.b*y$_.c,this.b=y$c*y$_.b+this.b*y$_.d,this.c=y$e*y$_.a+this.d*y$_.c,this.d=y$e*y$_.b+this.d*y$_.d,this.tx=y$Z*y$_.a+this.ty*y$_.c+y$_.tx,this.ty=y$Z*y$_.b+this.ty*y$_.d+y$_.ty,this},y$_.scaleEx=function(y$_,y$c){var y$e=this.a,y$Z=this.b,y$X=this.c,y$u=this.d;0!==y$Z||0!==y$X?(this.a=y$_*y$e,this.b=y$_*y$Z,this.c=y$c*y$X):(this.a=y$_*y$e,this.b=0*y$u,this.c=0*y$e),this.d=y$c*y$u,this.bTransform=!0},y$_.rotateEx=function(y$_){var y$c=Math.cos(y$_),y$e=Math.sin(y$_),y$Z=this.a,y$X=this.b,y$u=this.c,y$P=this.d;0!==y$X||0!==y$u?(this.a=y$c*y$Z+y$e*y$u,this.b=y$c*y$X+y$e*y$P,this.c=-y$e*y$Z+y$c*y$u,this.d=-y$e*y$X+y$c*y$P):(this.a=y$c*y$Z,this.b=y$e*y$P,this.c=-y$e*y$Z,this.d=y$c*y$P),this.bTransform=!0},y$_.clone=function(){var y$_=y$e.create();return y$_.a=this.a,y$_.b=this.b,y$_.c=this.c,y$_.d=this.d,y$_.tx=this.tx,y$_.ty=this.ty,y$_.bTransform=this.bTransform,y$_},y$_.copyTo=function(y$_){return y$_.a=this.a,y$_.b=this.b,y$_.c=this.c,y$_.d=this.d,y$_.tx=this.tx,y$_.ty=this.ty,y$_.bTransform=this.bTransform,y$_},y$_.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},y$_.destroy=function(){if(!this.inPool){var y$_=y$e._cache;this.inPool=!0,y$_._length||(y$_._length=0),(y$_[y$_._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},y$e.mul=function(y$_,y$c,y$e){var y$Z=y$_.a,y$X=y$_.b,y$u=y$_.c,y$P=y$_.d,y$O=y$_.tx,y$s=y$_.ty,y$n=y$c.a,y$m=y$c.b,y$H=y$c.c,y$B=y$c.d,y$D=y$c.tx,y$U=y$c.ty;return 0!==y$m||0!==y$H?(y$e.a=y$Z*y$n+y$X*y$H,y$e.b=y$Z*y$m+y$X*y$B,y$e.c=y$u*y$n+y$P*y$H,y$e.d=y$u*y$m+y$P*y$B,y$e.tx=y$n*y$O+y$H*y$s+y$D,y$e.ty=y$m*y$O+y$B*y$s+y$U):(y$e.a=y$Z*y$n,y$e.b=y$X*y$B,y$e.c=y$u*y$n,y$e.d=y$P*y$B,y$e.tx=y$n*y$O+y$D,y$e.ty=y$B*y$s+y$U),y$e},y$e.mul16=function(y$_,y$c,y$e){var y$Z=y$_.a,y$X=y$_.b,y$u=y$_.c,y$P=y$_.d,y$O=y$_.tx,y$s=y$_.ty,y$n=y$c.a,y$m=y$c.b,y$H=y$c.c,y$B=y$c.d,y$D=y$c.tx,y$U=y$c.ty;return 0!==y$m||0!==y$H?(y$e[0]=y$Z*y$n+y$X*y$H,y$e[1]=y$Z*y$m+y$X*y$B,y$e[4]=y$u*y$n+y$P*y$H,y$e[5]=y$u*y$m+y$P*y$B,y$e[12]=y$n*y$O+y$H*y$s+y$D,y$e[13]=y$m*y$O+y$B*y$s+y$U):(y$e[0]=y$Z*y$n,y$e[1]=y$X*y$B,y$e[4]=y$u*y$n,y$e[5]=y$P*y$B,y$e[12]=y$n*y$O+y$D,y$e[13]=y$B*y$s+y$U),y$e},y$e.mulPre=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){var y$s=y$_.a,y$n=y$_.b,y$m=y$_.c,y$H=y$_.d,y$B=y$_.tx,y$D=y$_.ty;return 0!==y$e||0!==y$Z?(y$O.a=y$s*y$c+y$n*y$Z,y$O.b=y$s*y$e+y$n*y$X,y$O.c=y$m*y$c+y$H*y$Z,y$O.d=y$m*y$e+y$H*y$X,y$O.tx=y$c*y$B+y$Z*y$D+y$u,y$O.ty=y$e*y$B+y$X*y$D+y$P):(y$O.a=y$s*y$c,y$O.b=y$n*y$X,y$O.c=y$m*y$c,y$O.d=y$H*y$X,y$O.tx=y$c*y$B+y$u,y$O.ty=y$X*y$D+y$P),y$O},y$e.mulPos=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){var y$s=y$_.a,y$n=y$_.b,y$m=y$_.c,y$H=y$_.d,y$B=y$_.tx,y$D=y$_.ty;return 0!==y$n||0!==y$m?(y$O.a=y$c*y$s+y$e*y$m,y$O.b=y$c*y$n+y$e*y$H,y$O.c=y$Z*y$s+y$X*y$m,y$O.d=y$Z*y$n+y$X*y$H,y$O.tx=y$s*y$u+y$m*y$P+y$B,y$O.ty=y$n*y$u+y$H*y$P+y$D):(y$O.a=y$c*y$s,y$O.b=y$e*y$H,y$O.c=y$Z*y$s,y$O.d=y$X*y$H,y$O.tx=y$s*y$u+y$B,y$O.ty=y$H*y$P+y$D),y$O},y$e.preMul=function(y$_,y$c,y$e){var y$Z=y$_.a,y$X=y$_.b,y$u=y$_.c,y$P=y$_.d,y$O=y$c.a,y$s=y$c.b,y$n=y$c.c,y$m=y$c.d,y$H=y$c.tx,y$B=y$c.ty;return y$e.a=y$O*y$Z,y$e.b=y$e.c=0,y$e.d=y$m*y$P,y$e.tx=y$H*y$Z+y$_.tx,y$e.ty=y$B*y$P+y$_.ty,0===y$s&&0===y$n&&0===y$X&&0===y$u||(y$e.a+=y$s*y$u,y$e.d+=y$n*y$X,y$e.b+=y$O*y$X+y$s*y$P,y$e.c+=y$n*y$Z+y$m*y$u,y$e.tx+=y$B*y$u,y$e.ty+=y$H*y$X),y$e},y$e.preMulXY=function(y$_,y$c,y$e,y$Z){var y$X=y$_.a,y$u=y$_.b,y$P=y$_.c,y$O=y$_.d;return y$Z.a=y$X,y$Z.b=y$u,y$Z.c=y$P,y$Z.d=y$O,y$Z.tx=y$c*y$X+y$_.tx+y$e*y$P,y$Z.ty=y$e*y$O+y$_.ty+y$c*y$u,y$Z},y$e.create=function(){var y$_=y$e._cache,y$c=y$_._length?y$_[--y$_._length]:new y$e;return y$c.inPool=!1,y$c},y$e.EMPTY=new y$e,y$e.TEMP=new y$e,y$e._cache=[],y$e}(),y$f=function(){function y$_(y$_,y$c){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),this.x=y$_,this.y=y$c}y$m(y$_,"laya.maths.Point");var y$c=y$_.prototype;return y$c.setTo=function(y$_,y$c){return this.x=y$_,this.y=y$c,this},y$c.distance=function(y$_,y$c){return Math.sqrt((this.x-y$_)*(this.x-y$_)+(this.y-y$c)*(this.y-y$c))},y$c.toString=function(){return this.x+","+this.y},y$c.normalize=function(){var y$_=Math.sqrt(this.x*this.x+this.y*this.y);if(0<y$_){var y$c=1/y$_;this.x*=y$c,this.y*=y$c}},y$_.TEMP=new y$_,y$_.EMPTY=new y$_,y$_}(),y$A=function(){function y$n(y$_,y$c,y$e,y$Z){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0),this.x=y$_,this.y=y$c,this.width=y$e,this.height=y$Z}y$m(y$n,"laya.maths.Rectangle");var y$_=y$n.prototype;return y$_.setTo=function(y$_,y$c,y$e,y$Z){return this.x=y$_,this.y=y$c,this.width=y$e,this.height=y$Z,this},y$_.copyFrom=function(y$_){return this.x=y$_.x,this.y=y$_.y,this.width=y$_.width,this.height=y$_.height,this},y$_.contains=function(y$_,y$c){return!(this.width<=0||this.height<=0)&&(y$_>=this.x&&y$_<this.right&&y$c>=this.y&&y$c<this.bottom)},y$_.intersects=function(y$_){return!(y$_.x>this.x+this.width||y$_.x+y$_.width<this.x||y$_.y>this.y+this.height||y$_.y+y$_.height<this.y)},y$_.intersection=function(y$_,y$c){return this.intersects(y$_)?(y$c||(y$c=new y$n),y$c.x=Math.max(this.x,y$_.x),y$c.y=Math.max(this.y,y$_.y),y$c.width=Math.min(this.right,y$_.right)-y$c.x,y$c.height=Math.min(this.bottom,y$_.bottom)-y$c.y,y$c):null},y$_.union=function(y$_,y$c){return y$c||(y$c=new y$n),this.clone(y$c),y$_.width<=0||y$_.height<=0?y$c:(y$c.addPoint(y$_.x,y$_.y),y$c.addPoint(y$_.right,y$_.bottom),this)},y$_.clone=function(y$_){return y$_||(y$_=new y$n),y$_.x=this.x,y$_.y=this.y,y$_.width=this.width,y$_.height=this.height,y$_},y$_.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},y$_.equals=function(y$_){return!(!y$_||y$_.x!==this.x||y$_.y!==this.y||y$_.width!==this.width||y$_.height!==this.height)},y$_.addPoint=function(y$_,y$c){return this.x>y$_&&(this.width+=this.x-y$_,this.x=y$_),this.y>y$c&&(this.height+=this.y-y$c,this.y=y$c),this.width<y$_-this.x&&(this.width=y$_-this.x),this.height<y$c-this.y&&(this.height=y$c-this.y),this},y$_._getBoundPoints=function(){var y$_=y$n._temB;return(y$_.length=0)==this.width||0==this.height||y$_.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),y$_},y$_.isEmpty=function(){return this.width<=0||this.height<=0},y$U(0,y$_,"right",function(){return this.x+this.width}),y$U(0,y$_,"bottom",function(){return this.y+this.height}),y$n._getBoundPointS=function(y$_,y$c,y$e,y$Z){var y$X=y$n._temA;return(y$X.length=0)==y$e||0==y$Z||y$X.push(y$_,y$c,y$_+y$e,y$c,y$_,y$c+y$Z,y$_+y$e,y$c+y$Z),y$X},y$n._getWrapRec=function(y$_,y$c){if(!y$_||y$_.length<1)return y$c?y$c.setTo(0,0,0,0):y$n.TEMP.setTo(0,0,0,0);y$c=y$c||new y$n;var y$e,y$Z,y$X,y$u,y$P,y$O=y$_.length,y$s=y$f.TEMP;for(y$X=y$P=-(y$Z=y$u=99999),y$e=0;y$e<y$O;y$e+=2)y$s.x=y$_[y$e],y$s.y=y$_[y$e+1],y$Z=y$Z<y$s.x?y$Z:y$s.x,y$u=y$u<y$s.y?y$u:y$s.y,y$X=y$X>y$s.x?y$X:y$s.x,y$P=y$P>y$s.y?y$P:y$s.y;return y$c.setTo(y$Z,y$u,y$X-y$Z,y$P-y$u)},y$n.EMPTY=new y$n,y$n.TEMP=new y$n,y$n._temB=[],y$n._temA=[],y$n}(),y$C=function(){function y$s(){}return y$m(y$s,"laya.media.SoundManager"),y$U(1,y$s,"useAudioMusic",function(){return y$s._useAudioMusic},function(y$_){y$s._useAudioMusic=y$_,y$s._musicClass=y$_?y$e_:null}),y$U(1,y$s,"autoStopMusic",function(){return y$s._autoStopMusic},function(y$_){y$M.stage.off("blur",null,y$s._stageOnBlur),y$M.stage.off("focus",null,y$s._stageOnFocus),y$M.stage.off("visibilitychange",null,y$s._visibilityChange),(y$s._autoStopMusic=y$_)&&(y$M.stage.on("blur",null,y$s._stageOnBlur),y$M.stage.on("focus",null,y$s._stageOnFocus),y$M.stage.on("visibilitychange",null,y$s._visibilityChange))}),y$U(1,y$s,"muted",function(){return y$s._muted},function(y$_){y$_!=y$s._muted&&(y$_&&y$s.stopAllSound(),y$s.musicMuted=y$_,y$s._muted=y$_)}),y$U(1,y$s,"musicMuted",function(){return y$s._musicMuted},function(y$_){y$_!=y$s._musicMuted&&(y$_?(y$s._tMusic&&y$s._musicChannel&&!y$s._musicChannel.isStopped?y$s._musicChannel.pause():y$s._musicChannel=null,y$s._musicMuted=y$_):(y$s._musicMuted=y$_,y$s._tMusic&&y$s._musicChannel&&y$s._musicChannel.resume()))}),y$U(1,y$s,"soundMuted",function(){return y$s._soundMuted},function(y$_){y$s._soundMuted=y$_}),y$s.addChannel=function(y$_){0<=y$s._channels.indexOf(y$_)||(y$s._channels.push(y$_),y$s.autoReleaseSound&&0!=y$s._notUsedCount&&y$s._notUsedUrls[y$_.url]&&(delete y$s._notUsedUrls[y$_.url],0==--y$s._notUsedCount&&y$M.timer.clear(y$s,y$s.disposeSoundIfNotUsed)))},y$s.removeChannel=function(y$_){var y$c=y$s._channels,y$e=y$c.indexOf(y$_);if(-1!=y$e&&(y$c.splice(y$e,1),y$s.autoReleaseSound)){var y$Z=y$_.url,y$X=y$s.defaultIntervals[y$Z]||2e4;if(0<y$X){var y$u=!0;for(y$e=y$c.length-1;0<=y$e;y$e--)if(y$c[y$e].url==y$Z){y$u=!1;break}y$u&&(y$s._notUsedUrls[y$Z]=Date.now()+y$X,0==y$s._notUsedCount++&&y$M.timer.loop(1e4,y$s,y$s.disposeSoundIfNotUsed))}}},y$s.disposeSoundIfNotUsed=function(){var y$_=y$s._notUsedUrls;if(0!=y$s._notUsedCount){var y$c=Date.now();for(var y$e in y$_)y$c>=y$_[y$e]&&(delete y$_[y$e],--y$s._notUsedCount,y$s.destroySound(y$e));if(0!=y$s._notUsedCount)return}y$M.timer.clear(y$s,y$s.disposeSoundIfNotUsed)},y$s._visibilityChange=function(){y$M.stage.isVisibility?y$s._stageOnFocus():y$s._stageOnBlur()},y$s._stageOnBlur=function(){y$s._isActive=!1,y$s._musicChannel&&(y$s._musicChannel.isStopped||(y$s._blurPaused=!0,y$s._musicChannel.pause())),y$s.stopAllSound(),y$M.stage.once("mousedown",null,y$s._stageOnFocus)},y$s._recoverWebAudio=function(){y$u_.ctx&&"running"!=y$u_.ctx.state&&y$u_.ctx.resume&&y$u_.ctx.resume()},y$s._stageOnFocus=function(){if(y$s._isActive=!0,y$s._recoverWebAudio(),y$M.stage.off("mousedown",null,y$s._stageOnFocus),y$s._blurPaused){var y$_=y$s._musicChannel;y$_&&y$s._music&&y$_.isStopped&&(y$s._blurPaused=!1,y$s._music._disposed?y$s.playMusic(y$_.url,y$_.loops,y$_.startHandler,y$_.completeHandler,y$_.startTime):y$_.audioBuffer?y$_.resume():y$s._music.play(y$_.startTime,y$_.loops,y$_.startHandler,y$_))}},y$s.playSound=function(y$_,y$c,y$e,y$Z,y$X,y$u){if(void 0===y$c&&(y$c=1),void 0===y$u&&(y$u=0),!y$_)return null;if(y$s._muted)return null;if(y$s._recoverWebAudio(),y$_==y$s._tMusic){if(y$s._musicMuted)return null}else{if(!y$s._isActive)return null;if(y$s._soundMuted)return null}var y$P,y$O=y$s._pool[y$_];return y$X||(y$X=y$s._soundClass),y$O||((y$O=new y$X).load(y$_),y$s._pool[y$_]=y$O),(y$P=y$O.play(y$u,y$c,y$e))?(y$_==y$s._tMusic&&(y$s._music=y$O,y$s._isActive||(y$s._blurPaused=!0,y$P.pause())),y$P.url=y$_,y$P.volume=y$_==y$s._tMusic?y$s.musicVolume:y$s.soundVolume,y$P.completeHandler=y$Z,y$P):null},y$s.destroySound=function(y$_){var y$c=y$s._pool[y$_];y$c&&(delete y$s._pool[y$_],y$c.dispose())},y$s.playMusic=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$c&&(y$c=0),void 0===y$X&&(y$X=0),y$s._tMusic=y$_,y$s._musicChannel&&y$s._musicChannel.stop(),y$s._musicChannel=y$s.playSound(y$_,y$c,y$e,y$Z,null,y$X)},y$s.stopSound=function(y$_){for(var y$c,y$e=y$s._channels.length-1;0<=y$e;y$e--)(y$c=y$s._channels[y$e]).url==y$_&&y$c.stop()},y$s.stopAll=function(){y$s._tMusic=null;var y$_=0;for(y$_=y$s._channels.length-1;0<=y$_;y$_--)y$s._channels[y$_].stop()},y$s.stopAllSound=function(){var y$_,y$c=0;for(y$c=y$s._channels.length-1;0<=y$c;y$c--)(y$_=y$s._channels[y$c]).url!=y$s._tMusic&&y$_.stop()},y$s.stopMusic=function(){y$s._musicChannel&&y$s._musicChannel.stop(),y$s._tMusic=null},y$s.setSoundVolume=function(y$_,y$c){if(y$c)y$s._setVolume(y$c,y$_);else{y$s.soundVolume=y$_;var y$e,y$Z=0;for(y$Z=y$s._channels.length-1;0<=y$Z;y$Z--)(y$e=y$s._channels[y$Z]).url!=y$s._tMusic&&(y$e.volume=y$_)}},y$s.setMusicVolume=function(y$_){y$s.musicVolume=y$_,y$s._setVolume(y$s._tMusic,y$_)},y$s._setVolume=function(y$_,y$c){for(var y$e,y$Z=y$s._channels.length-1;0<=y$Z;y$Z--)(y$e=y$s._channels[y$Z]).url==y$_&&(y$e.volume=y$c)},y$s.musicVolume=1,y$s.soundVolume=1,y$s.playbackRate=1,y$s._useAudioMusic=!0,y$s._muted=!1,y$s._soundMuted=!1,y$s._musicMuted=!1,y$s._tMusic=null,y$s._musicChannel=null,y$s._music=null,y$s._channels=[],y$s._autoStopMusic=!1,y$s._blurPaused=!1,y$s._isActive=!0,y$s._soundClass=null,y$s._musicClass=null,y$s.autoReleaseSound=!0,y$s._pool={},y$s.defaultIntervals={},y$s._notUsedUrls={},y$s._notUsedCount=0,y$s}(),y$v=function(){var y$_;function y$e(){}return y$m(y$e,"laya.net.LocalStorage"),y$e.__init__=function(){y$e._baseClass||(y$e._baseClass=y$_).init(),y$e.items=y$e._baseClass.items,y$e.support=y$e._baseClass.support},y$e.setItem=function(y$_,y$c){y$e._baseClass.setItem(y$_,y$c)},y$e.getItem=function(y$_){return y$e._baseClass.getItem(y$_)},y$e.setJSON=function(y$_,y$c){y$e._baseClass.setJSON(y$_,y$c)},y$e.getJSON=function(y$_){return y$e._baseClass.getJSON(y$_)},y$e.removeItem=function(y$_){y$e._baseClass.removeItem(y$_)},y$e.clear=function(){y$e._baseClass.clear()},y$e._baseClass=null,y$e.items=null,y$e.support=!1,y$e.__init$=function(){y$_=function(){function y$e(){}return y$m(y$e,""),y$e.init=function(){try{y$e.support=!0,y$e.items=y$P.localStorage,y$e.setItem("laya","1"),y$e.removeItem("laya")}catch(y$_){y$e.support=!1}y$e.support||console.log("LocalStorage is not supprot or browser is private mode.")},y$e.setItem=function(y$_,y$c){try{y$e.support&&y$e.items.setItem(y$_,y$c)}catch(y$_){console.warn("set localStorage failed",y$_)}},y$e.getItem=function(y$_){return y$e.support?y$e.items.getItem(y$_):null},y$e.setJSON=function(y$_,y$c){try{y$e.support&&y$e.items.setItem(y$_,JSON.stringify(y$c))}catch(y$_){console.warn("set localStorage failed",y$_)}},y$e.getJSON=function(y$_){return JSON.parse(y$e.support?y$e.items.getItem(y$_):null)},y$e.removeItem=function(y$_){y$e.support&&y$e.items.removeItem(y$_)},y$e.clear=function(){y$e.support&&y$e.items.clear()},y$e.items=null,y$e.support=!1,y$e}()},y$e}(),y$T=(function(){function y$Z(){}y$m(y$Z,"laya.net.ResourceVersion"),y$Z.enable=function(y$_,y$c,y$e){void 0===y$e&&(y$e=2),laya.net.ResourceVersion.type=y$e,y$M.loader.load(y$_,y$w.create(null,y$Z.onManifestLoaded,[y$c]),null,"json"),y$h.customFormat=y$Z.addVersionPrefix},y$Z.onManifestLoaded=function(y$_,y$c){y$Z.manifest=y$c,y$_.run(),y$c||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},y$Z.addVersionPrefix=function(y$_){return y$Z.manifest&&y$Z.manifest[y$_]?2==y$Z.type?y$Z.manifest[y$_]:y$Z.manifest[y$_]+"/"+y$_:y$_},y$Z.FOLDER_VERSION=1,y$Z.FILENAME_VERSION=2,y$Z.manifest=null,y$Z.type=1}(),function(){function y$_(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}y$m(y$_,"laya.net.TTFLoader");var y$c=y$_.prototype;return y$c.load=function(y$_){var y$c=(this._url=y$_).split(".ttf")[0].split("/");this.fontName=y$c[y$c.length-1],y$p.window.conch?this._loadConch():y$p.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},y$c._loadConch=function(){this._http=new y$P_,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},y$c._onHttpLoaded=function(y$_){y$p.window.conch.setFontFaceFromBuffer(this.fontName,y$_),this._clearHttp(),this._complete()},y$c._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},y$c._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},y$c._complete=function(){y$M.timer.clear(this,this._complete),y$M.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},y$c._checkComplete=function(){y$y.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},y$c._loadWithFontFace=function(){var y$_=new y$p.window.FontFace(this.fontName,"url('"+this._url+"')");y$p.window.document.fonts.add(y$_);var y$c=this;y$_.loaded.then(function(){y$c._complete()}),y$_.load()},y$c._createDiv=function(){this._div=y$p.createElement("div"),this._div.innerHTML="laya";var y$_=this._div.style;y$_.fontFamily=this.fontName,y$_.position="absolute",y$_.left="-100px",y$_.top="-100px",y$p.document.body.appendChild(this._div)},y$c._loadWithCSS=function(){var y$_=this,y$c=y$p.createElement("style");y$c.type="text/css",y$p.document.body.appendChild(y$c),y$c.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=y$y.measureText("LayaTTFFont",this._fontTxt).width;var y$e=this;y$c.onload=function(){y$M.timer.once(1e4,y$e,y$_._complete)},y$M.timer.loop(20,this,this._checkComplete),this._createDiv()},y$_._testString="LayaTTFFont",y$_}()),y$h=function(){function y$Z(y$_){this._url=null,this._path=null,this._url=y$Z.formatURL(y$_),this._path=y$Z.getPath(y$_)}y$m(y$Z,"laya.net.URL");var y$_=y$Z.prototype;return y$U(0,y$_,"path",function(){return this._path}),y$U(0,y$_,"url",function(){return this._url}),y$Z.formatURL=function(y$_,y$c){if(!y$_)return"null path";if(0<y$_.indexOf(":"))return y$_;null!=y$Z.customFormat&&(y$_=y$Z.customFormat(y$_,y$c));var y$e=y$_.charAt(0);if("."===y$e)return y$Z.formatRelativePath((y$c||y$Z.basePath)+y$_);if("~"===y$e)return y$Z.rootPath+y$_.substring(1);if("d"===y$e){if(0===y$_.indexOf("data:image"))return y$_}else if("/"===y$e)return y$_;return(y$c||y$Z.basePath)+y$_},y$Z.formatRelativePath=function(y$_){for(var y$c=y$_.split("/"),y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++)".."==y$c[y$e]&&(y$c.splice(y$e-1,2),y$e-=2);return y$c.join("/")},y$Z.isAbsolute=function(y$_){return 0<y$_.indexOf(":")||"/"==y$_.charAt(0)},y$Z.getPath=function(y$_){var y$c=y$_.lastIndexOf("/");return 0<y$c?y$_.substr(0,y$c+1):""},y$Z.getFileName=function(y$_){var y$c=y$_.lastIndexOf("/");return 0<y$c?y$_.substr(y$c+1):y$_},y$Z.version={},y$Z.basePath="",y$Z.rootPath="",y$Z.customFormat=function(y$_){var y$c=y$Z.version[y$_];return!y$R.isConchApp&&y$c&&(y$_+="?v="+y$c),y$_},y$Z}(),y$R=function(){function y$X(y$_,y$c){this._timeId=0;var y$e=y$X._mainCanvas.source.style;y$e.position="absolute",y$e.top=y$e.left="0px",y$e.background="#000000",y$X._mainCanvas.source.id="layaCanvas";var y$Z=laya.renders.Render.isWebGL;y$X._mainCanvas.source.width=y$_,y$X._mainCanvas.source.height=y$c,y$Z&&y$X.WebGL.init(y$X._mainCanvas,y$_,y$c),y$p.container.appendChild(y$X._mainCanvas.source),(y$X._context=new y$i(y$_,y$c,y$Z?null:y$X._mainCanvas)).ctx.setIsMainContext(),y$p.window.requestAnimationFrame(function y$_(y$c){y$p.window.requestAnimationFrame(y$_);y$M.stage._loop()}),y$M.stage.on("visibilitychange",this,this._onVisibilitychange)}y$m(y$X,"laya.renders.Render");var y$_=y$X.prototype;return y$_._onVisibilitychange=function(){y$M.stage.isVisibility?0!=this._timeId&&y$p.window.clearInterval(this._timeId):this._timeId=y$p.window.setInterval(this._enterFrame,1e3)},y$_._enterFrame=function(y$_){y$M.stage._loop()},y$U(1,y$X,"context",function(){return y$X._context}),y$U(1,y$X,"canvas",function(){return y$X._mainCanvas.source}),y$X._context=null,y$X._mainCanvas=null,y$X.WebGL=null,y$X.isConchNode=!1,y$X.isConchApp=!1,y$X.isConchWebGL=!1,y$X.isWebGL=!1,y$X.is3DMode=!1,y$X.optimizeTextureMemory=function(y$_,y$c){return!0},y$X.__init$=function(){y$P.ConchRenderType=y$P.ConchRenderType||1,y$P.ConchRenderType|=y$P.conch?4:0,y$X.isConchNode=5==(5&y$P.ConchRenderType),y$X.isConchApp=4==(4&y$P.ConchRenderType),y$X.isConchWebGL=6==y$P.ConchRenderType},y$X}(),y$i=function(){function y$P(y$_,y$c,y$e){this.x=0,this.y=0,this._drawTexture=function(y$_,y$c,y$e){y$e[0].loaded&&this.ctx.drawTexture(y$e[0],y$e[1],y$e[2],y$e[3],y$e[4],y$_,y$c)},this._fillTexture=function(y$_,y$c,y$e){y$e[0].loaded&&this.ctx.fillTexture(y$e[0],y$e[1]+y$_,y$e[2]+y$c,y$e[3],y$e[4],y$e[5],y$e[6],y$e[7])},this._drawTextureWithTransform=function(y$_,y$c,y$e){y$e[0].loaded&&this.ctx.drawTextureWithTransform(y$e[0],y$e[1],y$e[2],y$e[3],y$e[4],y$e[5],y$_,y$c,y$e[6])},this._fillQuadrangle=function(y$_,y$c,y$e){this.ctx.fillQuadrangle(y$e[0],y$e[1],y$e[2],y$e[3],y$e[4])},this._drawRect=function(y$_,y$c,y$e){var y$Z=this.ctx;null!=y$e[4]&&(y$Z.fillStyle=y$e[4],y$Z.fillRect(y$_+y$e[0],y$c+y$e[1],y$e[2],y$e[3],null)),null!=y$e[5]&&(y$Z.strokeStyle=y$e[5],y$Z.lineWidth=y$e[6],y$Z.strokeRect(y$_+y$e[0],y$c+y$e[1],y$e[2],y$e[3],y$e[6]))},this._drawPie=function(y$_,y$c,y$e){var y$Z=this.ctx;y$R.isWebGL&&y$Z.setPathId(y$e[8]),y$Z.beginPath(),y$R.isWebGL?(y$Z.movePath(y$e[0]+y$_,y$e[1]+y$c),y$Z.moveTo(0,0)):y$Z.moveTo(y$_+y$e[0],y$c+y$e[1]),y$Z.arc(y$_+y$e[0],y$c+y$e[1],y$e[2],y$e[3],y$e[4]),y$Z.closePath(),this._fillAndStroke(y$e[5],y$e[6],y$e[7],!0)},this._clipRect=function(y$_,y$c,y$e){this.ctx.clipRect(y$_+y$e[0],y$c+y$e[1],y$e[2],y$e[3])},this._fillRect=function(y$_,y$c,y$e){this.ctx.fillRect(y$_+y$e[0],y$c+y$e[1],y$e[2],y$e[3],y$e[4])},this._drawCircle=function(y$_,y$c,y$e){var y$Z=this.ctx;y$R.isWebGL&&y$Z.setPathId(y$e[6]),y$g.drawCall++,y$Z.beginPath(),y$R.isWebGL&&y$Z.movePath(y$e[0]+y$_,y$e[1]+y$c),y$Z.arc(y$e[0]+y$_,y$e[1]+y$c,y$e[2],0,y$P.PI2),y$Z.closePath(),this._fillAndStroke(y$e[3],y$e[4],y$e[5],!0)},this._fillCircle=function(y$_,y$c,y$e){y$g.drawCall++;var y$Z=this.ctx;y$Z.beginPath(),y$Z.fillStyle=y$e[3],y$Z.arc(y$e[0]+y$_,y$e[1]+y$c,y$e[2],0,y$P.PI2),y$Z.fill()},this._setShader=function(y$_,y$c,y$e){this.ctx.setShader(y$e[0])},this._drawLine=function(y$_,y$c,y$e){var y$Z=this.ctx;y$R.isWebGL&&y$Z.setPathId(y$e[6]),y$Z.beginPath(),y$Z.strokeStyle=y$e[4],y$Z.lineWidth=y$e[5],y$R.isWebGL?(y$Z.movePath(y$_,y$c),y$Z.moveTo(y$e[0],y$e[1]),y$Z.lineTo(y$e[2],y$e[3])):(y$Z.moveTo(y$_+y$e[0],y$c+y$e[1]),y$Z.lineTo(y$_+y$e[2],y$c+y$e[3])),y$Z.stroke()},this._drawLines=function(y$_,y$c,y$e){var y$Z=this.ctx;y$R.isWebGL&&y$Z.setPathId(y$e[5]),y$Z.beginPath(),y$_+=y$e[0],y$c+=y$e[1],y$R.isWebGL&&y$Z.movePath(y$_,y$c),y$Z.strokeStyle=y$e[3],y$Z.lineWidth=y$e[4];var y$X=y$e[2],y$u=2,y$P=y$X.length;if(y$R.isWebGL)for(y$Z.moveTo(y$X[0],y$X[1]);y$u<y$P;)y$Z.lineTo(y$X[y$u++],y$X[y$u++]);else for(y$Z.moveTo(y$_+y$X[0],y$c+y$X[1]);y$u<y$P;)y$Z.lineTo(y$_+y$X[y$u++],y$c+y$X[y$u++]);y$Z.stroke()},this._drawLinesWebGL=function(y$_,y$c,y$e){this.ctx.drawLines(y$_+this.x+y$e[0],y$c+this.y+y$e[1],y$e[2],y$e[3],y$e[4])},this._drawCurves=function(y$_,y$c,y$e){this.ctx.drawCurves(y$_,y$c,y$e)},this._draw=function(y$_,y$c,y$e){y$e[0].call(null,this,y$_,y$c)},this._transformByMatrix=function(y$_,y$c,y$e){this.ctx.transformByMatrix(y$e[0])},this._setTransform=function(y$_,y$c,y$e){this.ctx.setTransform(y$e[0],y$e[1],y$e[2],y$e[3],y$e[4],y$e[5])},this._setTransformByMatrix=function(y$_,y$c,y$e){this.ctx.setTransformByMatrix(y$e[0])},this._save=function(y$_,y$c,y$e){this.ctx.save()},this._restore=function(y$_,y$c,y$e){this.ctx.restore()},this._translate=function(y$_,y$c,y$e){this.ctx.translate(y$e[0],y$e[1])},this._transform=function(y$_,y$c,y$e){this.ctx.translate(y$e[1]+y$_,y$e[2]+y$c);var y$Z=y$e[0];this.ctx.transform(y$Z.a,y$Z.b,y$Z.c,y$Z.d,y$Z.tx,y$Z.ty),this.ctx.translate(-y$_-y$e[1],-y$c-y$e[2])},this._rotate=function(y$_,y$c,y$e){this.ctx.translate(y$e[1]+y$_,y$e[2]+y$c),this.ctx.rotate(y$e[0]),this.ctx.translate(-y$_-y$e[1],-y$c-y$e[2])},this._scale=function(y$_,y$c,y$e){this.ctx.translate(y$e[2]+y$_,y$e[3]+y$c),this.ctx.scale(y$e[0],y$e[1]),this.ctx.translate(-y$_-y$e[2],-y$c-y$e[3])},this._alpha=function(y$_,y$c,y$e){this.ctx.globalAlpha*=y$e[0]},this._setAlpha=function(y$_,y$c,y$e){this.ctx.globalAlpha=y$e[0]},this._fillText=function(y$_,y$c,y$e){this.ctx.fillText(y$e[0],y$e[1]+y$_,y$e[2]+y$c,y$e[3],y$e[4],y$e[5])},this._strokeText=function(y$_,y$c,y$e){this.ctx.strokeText(y$e[0],y$e[1]+y$_,y$e[2]+y$c,y$e[3],y$e[4],y$e[5],y$e[6])},this._fillBorderText=function(y$_,y$c,y$e){this.ctx.fillBorderText(y$e[0],y$e[1]+y$_,y$e[2]+y$c,y$e[3],y$e[4],y$e[5],y$e[6],y$e[7])},this._blendMode=function(y$_,y$c,y$e){this.ctx.globalCompositeOperation=y$e[0]},this._beginClip=function(y$_,y$c,y$e){this.ctx.beginClip&&this.ctx.beginClip(y$_+y$e[0],y$c+y$e[1],y$e[2],y$e[3])},this._setIBVB=function(y$_,y$c,y$e){this.ctx.setIBVB(y$e[0]+y$_,y$e[1]+y$c,y$e[2],y$e[3],y$e[4],y$e[5],y$e[6],y$e[7])},this._fillTrangles=function(y$_,y$c,y$e){this.ctx.fillTrangles(y$e[0],y$e[1]+y$_,y$e[2]+y$c,y$e[3],y$e[4])},this._drawPath=function(y$_,y$c,y$e){var y$Z=this.ctx;y$R.isWebGL&&y$Z.setPathId(-1),y$Z.beginPath(),y$_+=y$e[0],y$c+=y$e[1],y$R.isWebGL&&y$Z.movePath(y$_,y$c);for(var y$X=y$e[2],y$u=0,y$P=y$X.length;y$u<y$P;y$u++){var y$O=y$X[y$u];switch(y$O[0]){case"moveTo":y$R.isWebGL?y$Z.moveTo(y$O[1],y$O[2]):y$Z.moveTo(y$_+y$O[1],y$c+y$O[2]);break;case"lineTo":y$R.isWebGL?y$Z.lineTo(y$O[1],y$O[2]):y$Z.lineTo(y$_+y$O[1],y$c+y$O[2]);break;case"arcTo":y$R.isWebGL?y$Z.arcTo(y$O[1],y$O[2],y$O[3],y$O[4],y$O[5]):y$Z.arcTo(y$_+y$O[1],y$c+y$O[2],y$_+y$O[3],y$c+y$O[4],y$O[5]);break;case"closePath":y$Z.closePath()}}var y$s=y$e[3];null!=y$s&&(y$Z.fillStyle=y$s.fillStyle,y$Z.fill());var y$n=y$e[4];null!=y$n&&(y$Z.strokeStyle=y$n.strokeStyle,y$Z.lineWidth=y$n.lineWidth||1,y$Z.lineJoin=y$n.lineJoin,y$Z.lineCap=y$n.lineCap,y$Z.miterLimit=y$n.miterLimit,y$Z.stroke())},this.drawPoly=function(y$_,y$c,y$e){this.ctx.drawPoly(y$_+this.x+y$e[0],y$c+this.y+y$e[1],y$e[2],y$e[3],y$e[4],y$e[5],y$e[6])},this._drawPoly=function(y$_,y$c,y$e){var y$Z=this.ctx,y$X=y$e[2],y$u=2,y$P=y$X.length;if(y$R.isWebGL)for(y$Z.setPathId(y$e[6]),y$Z.beginPath(),y$_+=y$e[0],y$c+=y$e[1],y$Z.movePath(y$_,y$c),y$Z.moveTo(y$X[0],y$X[1]);y$u<y$P;)y$Z.lineTo(y$X[y$u++],y$X[y$u++]);else for(y$Z.beginPath(),y$_+=y$e[0],y$c+=y$e[1],y$Z.moveTo(y$_+y$X[0],y$c+y$X[1]);y$u<y$P;)y$Z.lineTo(y$_+y$X[y$u++],y$c+y$X[y$u++]);y$Z.closePath(),this._fillAndStroke(y$e[3],y$e[4],y$e[5],y$e[7])},this._drawSkin=function(y$_,y$c,y$e){var y$Z=y$e[0];if(y$Z){var y$X=this.ctx;y$Z.render(y$X,y$_,y$c)}},this._drawParticle=function(y$_,y$c,y$e){this.ctx.drawParticle(y$_+this.x,y$c+this.y,y$e[0])},this._setFilters=function(y$_,y$c,y$e){this.ctx.setFilters(y$e)},y$e?this.ctx=y$e.getContext("2d"):(y$e=y$z_.create("3D"),this.ctx=y$y.createWebGLContext2D(y$e),y$e._setContext(this.ctx)),y$e.size(y$_,y$c),this.canvas=y$e}y$m(y$P,"laya.renders.RenderContext");var y$_=y$P.prototype;return y$_.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},y$_.drawTexture=function(y$_,y$c,y$e,y$Z,y$X){y$_.loaded&&this.ctx.drawTexture(y$_,y$c,y$e,y$Z,y$X,this.x,this.y)},y$_._drawTextures=function(y$_,y$c,y$e){y$e[0].loaded&&this.ctx.drawTextures(y$e[0],y$e[1],y$_+this.x,y$c+this.y)},y$_.drawTextureWithTransform=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$_.loaded&&this.ctx.drawTextureWithTransform(y$_,y$c,y$e,y$Z,y$X,y$u,this.x,this.y,y$P)},y$_.fillQuadrangle=function(y$_,y$c,y$e,y$Z,y$X){this.ctx.fillQuadrangle(y$_,y$c,y$e,y$Z,y$X)},y$_.drawCanvas=function(y$_,y$c,y$e,y$Z,y$X){this.ctx.drawCanvas(y$_,y$c+this.x,y$e+this.y,y$Z,y$X)},y$_.drawRect=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$u&&(y$u=1);var y$P=this.ctx;y$P.strokeStyle=y$X,y$P.lineWidth=y$u,y$P.strokeRect(y$_+this.x,y$c+this.y,y$e,y$Z,y$u)},y$_._fillAndStroke=function(y$_,y$c,y$e,y$Z){void 0===y$Z&&(y$Z=!1);var y$X=this.ctx;null!=y$_&&(y$X.fillStyle=y$_,y$R.isWebGL?y$X.fill(y$Z):y$X.fill()),null!=y$c&&0<y$e&&(y$X.strokeStyle=y$c,y$X.lineWidth=y$e,y$X.stroke())},y$_.clipRect=function(y$_,y$c,y$e,y$Z){this.ctx.clipRect(y$_+this.x,y$c+this.y,y$e,y$Z)},y$_.fillRect=function(y$_,y$c,y$e,y$Z,y$X){this.ctx.fillRect(y$_+this.x,y$c+this.y,y$e,y$Z,y$X)},y$_.drawCircle=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=1),y$g.drawCall++;var y$u=this.ctx;y$u.beginPath(),y$u.strokeStyle=y$Z,y$u.lineWidth=y$X,y$u.arc(y$_+this.x,y$c+this.y,y$e,0,y$P.PI2),y$u.stroke()},y$_.drawTriangles=function(y$_,y$c,y$e){if(y$R.isWebGL)this.ctx.drawTriangles(y$e[0],y$_+y$e[1],y$c+y$e[2],y$e[3],y$e[4],y$e[5],y$e[6],y$e[7],y$e[8],y$e[9]);else{var y$Z=y$e[5],y$X=0,y$u=y$Z.length,y$P=this.ctx;for(y$X=0;y$X<y$u;y$X+=3){var y$O=2*y$Z[y$X],y$s=2*y$Z[y$X+1],y$n=2*y$Z[y$X+2];y$P.drawTriangle(y$e[0],y$e[3],y$e[4],y$O,y$s,y$n,y$e[6],!0)}}},y$_.fillCircle=function(y$_,y$c,y$e,y$Z){y$g.drawCall++;var y$X=this.ctx;y$X.beginPath(),y$X.fillStyle=y$Z,y$X.arc(y$_+this.x,y$c+this.y,y$e,0,y$P.PI2),y$X.fill()},y$_.setShader=function(y$_){this.ctx.setShader(y$_)},y$_.drawLine=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$u&&(y$u=1);var y$P=this.ctx;y$P.beginPath(),y$P.strokeStyle=y$X,y$P.lineWidth=y$u,y$P.moveTo(this.x+y$_,this.y+y$c),y$P.lineTo(this.x+y$e,this.y+y$Z),y$P.stroke()},y$_.clear=function(){this.ctx.clear()},y$_.transformByMatrix=function(y$_){this.ctx.transformByMatrix(y$_)},y$_.setTransform=function(y$_,y$c,y$e,y$Z,y$X,y$u){this.ctx.setTransform(y$_,y$c,y$e,y$Z,y$X,y$u)},y$_.setTransformByMatrix=function(y$_){this.ctx.setTransformByMatrix(y$_)},y$_.save=function(){this.ctx.save()},y$_.restore=function(){this.ctx.restore()},y$_.translate=function(y$_,y$c){this.ctx.translate(y$_,y$c)},y$_.transform=function(y$_,y$c,y$e,y$Z,y$X,y$u){this.ctx.transform(y$_,y$c,y$e,y$Z,y$X,y$u)},y$_.rotate=function(y$_){this.ctx.rotate(y$_)},y$_.scale=function(y$_,y$c){this.ctx.scale(y$_,y$c)},y$_.alpha=function(y$_){this.ctx.globalAlpha*=y$_},y$_.setAlpha=function(y$_){this.ctx.globalAlpha=y$_},y$_.fillWords=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$u&&(y$u=0),this.ctx.fillWords(y$_,y$c,y$e,y$Z,y$X,y$u)},y$_.fillBorderWords=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this.ctx.fillBorderWords(y$_,y$c,y$e,y$Z,y$X,y$u,y$P)},y$_.fillText=function(y$_,y$c,y$e,y$Z,y$X,y$u){this.ctx.fillText(y$_,y$c+this.x,y$e+this.y,y$Z,y$X,y$u)},y$_.strokeText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this.ctx.strokeText(y$_,y$c+this.x,y$e+this.y,y$Z,y$X,y$u,y$P)},y$_.blendMode=function(y$_){this.ctx.globalCompositeOperation=y$_},y$_.flush=function(){this.ctx.flush&&this.ctx.flush()},y$_.addRenderObject=function(y$_){this.ctx.addRenderObject(y$_)},y$_.beginClip=function(y$_,y$c,y$e,y$Z){this.ctx.beginClip&&this.ctx.beginClip(y$_,y$c,y$e,y$Z)},y$_.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},y$_.fillTrangles=function(y$_,y$c,y$e){this.ctx.fillTrangles(y$e[0],y$e[1],y$e[2],y$e[3],4<y$e.length?y$e[4]:null)},y$P.PI2=2*Math.PI,y$P}(),y$x=function(){function y$P(y$_,y$c){switch(this._next=y$c||y$P.NORENDER,y$_){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=y$G._filter);case 69905:return void(this._fun=y$P._initRenderFun)}this.onCreate(y$_)}y$m(y$P,"laya.renders.RenderSprite");var y$_=y$P.prototype;return y$_.onCreate=function(y$_){},y$_._style=function(y$_,y$c,y$e,y$Z){y$_._style.render(y$_,y$c,y$e,y$Z);var y$X=this._next;y$X._fun.call(y$X,y$_,y$c,y$e,y$Z)},y$_._no=function(y$_,y$c,y$e,y$Z){},y$_._custom=function(y$_,y$c,y$e,y$Z){y$_.customRender(y$c,y$e,y$Z);var y$X=y$_._style._tf;this._next._fun.call(this._next,y$_,y$c,y$e-y$X.translateX,y$Z-y$X.translateY)},y$_._clip=function(y$_,y$c,y$e,y$Z){var y$X=this._next;if(y$X!=y$P.NORENDER){var y$u=y$_._style.scrollRect;y$c.ctx.save(),y$c.ctx.clipRect(y$e,y$Z,y$u.width,y$u.height),y$X._fun.call(y$X,y$_,y$c,y$e-y$u.x,y$Z-y$u.y),y$c.ctx.restore()}},y$_._blend=function(y$_,y$c,y$e,y$Z){var y$X=y$_._style;y$X.blendMode&&(y$c.ctx.globalCompositeOperation=y$X.blendMode);var y$u=this._next;y$u._fun.call(y$u,y$_,y$c,y$e,y$Z),y$c.ctx.globalCompositeOperation="source-over"},y$_._mask=function(y$_,y$c,y$e,y$Z){var y$X=this._next;y$X._fun.call(y$X,y$_,y$c,y$e,y$Z);var y$u=y$_.mask;y$u&&(y$c.ctx.globalCompositeOperation="destination-in",(0<y$u.numChildren||!y$u.graphics._isOnlyOne())&&(y$u.cacheAsBitmap=!0),y$u.render(y$c,y$e-y$_.pivotX,y$Z-y$_.pivotY)),y$c.ctx.globalCompositeOperation="source-over"},y$_._graphics=function(y$_,y$c,y$e,y$Z){var y$X=y$_._style._tf;y$_._graphics&&y$_._graphics._render(y$_,y$c,y$e-y$X.translateX,y$Z-y$X.translateY);var y$u=this._next;y$u._fun.call(y$u,y$_,y$c,y$e,y$Z)},y$_._image=function(y$_,y$c,y$e,y$Z){var y$X=y$_._style;y$c.ctx.drawTexture2(y$e,y$Z,y$X._tf.translateX,y$X._tf.translateY,y$_.transform,y$X.alpha,y$X.blendMode,y$_._graphics._one)},y$_._image2=function(y$_,y$c,y$e,y$Z){var y$X=y$_._style._tf;y$c.ctx.drawTexture2(y$e,y$Z,y$X.translateX,y$X.translateY,y$_.transform,1,null,y$_._graphics._one)},y$_._alpha=function(y$_,y$c,y$e,y$Z){var y$X;if(.01<(y$X=y$_._style.alpha)||y$_._needRepaint()){var y$u=y$c.ctx.globalAlpha;y$c.ctx.globalAlpha*=y$X;var y$P=this._next;y$P._fun.call(y$P,y$_,y$c,y$e,y$Z),y$c.ctx.globalAlpha=y$u}},y$_._transform=function(y$_,y$c,y$e,y$Z){var y$X=y$_.transform,y$u=this._next;y$X&&y$u!=y$P.NORENDER?(y$c.save(),y$c.transform(y$X.a,y$X.b,y$X.c,y$X.d,y$X.tx+y$e,y$X.ty+y$Z),y$u._fun.call(y$u,y$_,y$c,0,0),y$c.restore()):y$u._fun.call(y$u,y$_,y$c,y$e,y$Z)},y$_._childs=function(y$_,y$c,y$e,y$Z){var y$X=y$_._style,y$u=y$X._tf;if(y$e=y$e-y$u.translateX+y$X.paddingLeft,y$Z=y$Z-y$u.translateY+y$X.paddingTop,y$X._calculation){var y$P=y$_._getWords();if(y$P){var y$O=y$X;y$O&&(y$O.stroke?y$c.fillBorderWords(y$P,y$e,y$Z,y$O.font,y$O.color,y$O.strokeColor,y$O.stroke):y$c.fillWords(y$P,y$e,y$Z,y$O.font,y$O.color,"none"!=y$O.textDecoration&&y$O.underLine?1:0))}}var y$s,y$n=y$_._childs,y$m=y$n.length;if(y$_.viewport||y$_.optimizeScrollRect&&y$_._style.scrollRect){var y$H=y$_.viewport||y$_._style.scrollRect,y$B=y$H.x,y$D=y$H.y,y$U=y$H.right,y$k=y$H.bottom,y$a=NaN,y$G=NaN;for(y$w=0;y$w<y$m;++y$w)(y$s=y$n[y$w]).visible&&(y$a=y$s._x)<y$U&&y$a+y$s.width>y$B&&(y$G=y$s._y)<y$k&&y$G+y$s.height>y$D&&y$s.render(y$c,y$e,y$Z)}else for(var y$w=0;y$w<y$m;++y$w)(y$s=y$n[y$w])._style.visible&&y$s.render(y$c,y$e,y$Z)},y$_._canvas=function(y$_,y$c,y$e,y$Z){var y$X=y$_._$P.cacheCanvas;if(y$X){"bitmap"===y$X.type?y$g.canvasBitmap++:y$g.canvasNormal++;var y$u=y$X.ctx;if(y$_._needRepaint()||!y$u)this._canvas_repaint(y$_,y$c,y$e,y$Z);else{var y$P=y$X._cacheRec;y$c.drawCanvas(y$u.canvas,y$e+y$P.x,y$Z+y$P.y,y$P.width,y$P.height)}}else this._next._fun.call(this._next,y$_,y$c,y$e,y$Z)},y$_._canvas_repaint=function(y$_,y$c,y$e,y$Z){var y$X=y$_._$P.cacheCanvas,y$u=this._next;if(y$X){var y$P,y$O,y$s,y$n,y$m=y$X.ctx,y$H=y$_._needRepaint()||!y$m,y$B=y$X.type;if("bitmap"===y$B?y$g.canvasBitmap++:y$g.canvasNormal++,y$H){var y$D,y$U;y$X._cacheRec||(y$X._cacheRec=new y$A),y$R.isWebGL&&"bitmap"!==y$B?y$X._cacheRec.setTo(-y$_.pivotX,-y$_.pivotY,1,1):((y$n=y$_.getSelfBounds()).x=y$n.x-y$_.pivotX,y$n.y=y$n.y-y$_.pivotY,y$n.x=y$n.x-16,y$n.y=y$n.y-16,y$n.width=y$n.width+32,y$n.height=y$n.height+32,y$n.x=Math.floor(y$n.x+y$e)-y$e,y$n.y=Math.floor(y$n.y+y$Z)-y$Z,y$n.width=Math.floor(y$n.width),y$n.height=Math.floor(y$n.height),y$X._cacheRec.copyFrom(y$n)),y$n=y$X._cacheRec;var y$k,y$a=y$R.isWebGL?1:y$p.pixelRatio*y$M.stage.clientScaleX,y$G=y$R.isWebGL?1:y$p.pixelRatio*y$M.stage.clientScaleY;if(!y$R.isWebGL){var y$w,y$z=1,y$L=1;for(y$w=y$_;y$w&&y$w!=y$M.stage;)y$z*=y$w.scaleX,y$L*=y$w.scaleY,y$w=y$w.parent;y$R.isWebGL?(y$z<1&&(y$a*=y$z),y$L<1&&(y$G*=y$L)):(1<y$z&&(y$a*=y$z),1<y$L&&(y$G*=y$L))}if(y$_.scrollRect){var y$q=y$_.scrollRect;y$n.x-=y$q.x,y$n.y-=y$q.y}if(y$D=y$n.width*y$a,y$U=y$n.height*y$G,y$O=y$n.x,y$s=y$n.y,y$R.isWebGL&&"bitmap"===y$B&&(2048<y$D||2048<y$U))return console.warn("cache bitmap size larger than 2048,cache ignored"),y$X.ctx&&(y$V.recover("RenderContext",y$X.ctx),y$X.ctx.canvas.size(0,0),y$X.ctx=null),void y$u._fun.call(y$u,y$_,y$c,y$e,y$Z);if(y$m||(y$m=y$X.ctx=y$V.getItem("RenderContext")||new y$i(y$D,y$U,y$z_.create("AUTO"))),y$m.ctx.sprite=y$_,(y$P=y$m.canvas).clear(),(y$P.width!=y$D||y$P.height!=y$U)&&y$P.size(y$D,y$U),"bitmap"===y$B?y$P.context.asBitmap=!0:"normal"===y$B&&(y$P.context.asBitmap=!1),1!=y$a||1!=y$G){var y$K=y$m.ctx;y$K.save(),y$K.scale(y$a,y$G),!y$R.isConchWebGL&&y$R.isConchApp&&(y$k=y$_._$P.cf)&&y$K.setFilterMatrix&&y$K.setFilterMatrix(y$k._mat,y$k._alpha),y$u._fun.call(y$u,y$_,y$m,-y$O,-y$s),y$K.restore(),y$R.isConchApp&&!y$R.isConchWebGL||y$_._applyFilters()}else y$K=y$m.ctx,!y$R.isConchWebGL&&y$R.isConchApp&&(y$k=y$_._$P.cf)&&y$K.setFilterMatrix&&y$K.setFilterMatrix(y$k._mat,y$k._alpha),y$u._fun.call(y$u,y$_,y$m,-y$O,-y$s),y$R.isConchApp&&!y$R.isConchWebGL||y$_._applyFilters();y$_._$P.staticCache&&(y$X.reCache=!1),y$g.canvasReCache++}else y$O=(y$n=y$X._cacheRec).x,y$s=y$n.y,y$P=y$m.canvas;y$c.drawCanvas(y$P,y$e+y$O,y$Z+y$s,y$n.width,y$n.height)}else y$u._fun.call(y$u,y$_,y$m,y$e,y$Z)},y$P.__init__=function(){var y$_,y$c,y$e=0;for(y$c=y$y.createRenderSprite(69905,null),y$_=y$P.renders.length=4096,y$e=0;y$e<y$_;y$e++)y$P.renders[y$e]=y$c;y$P.renders[0]=y$y.createRenderSprite(0,null),function(y$_,y$c){for(var y$e=0,y$Z=0;y$Z<y$_.length;y$Z++)y$e|=y$_[y$Z],y$P.renders[y$e]=y$c}([1,512,4,2],new y$P(1,null)),y$P.renders[513]=y$y.createRenderSprite(513,null),y$P.renders[517]=new y$P(517,null)},y$P._initRenderFun=function(y$_,y$c,y$e,y$Z){var y$X=y$_._renderType;(y$P.renders[y$X]=y$P._getTypeRender(y$X))._fun(y$_,y$c,y$e,y$Z)},y$P._getTypeRender=function(y$_){for(var y$c=null,y$e=2048;1<y$e;)y$e&y$_&&(y$c=y$y.createRenderSprite(y$e,y$c)),y$e>>=1;return y$c},y$P.IMAGE=1,y$P.ALPHA=2,y$P.TRANSFORM=4,y$P.BLEND=8,y$P.CANVAS=16,y$P.FILTERS=32,y$P.MASK=64,y$P.CLIP=128,y$P.STYLE=256,y$P.GRAPHICS=512,y$P.CUSTOM=1024,y$P.CHILDS=2048,y$P.INIT=69905,y$P.renders=[],y$P.NORENDER=new y$P(0,null),y$P}(),y$F=function(){function y$O(){this._repaint=!1}y$m(y$O,"laya.resource.Context");var y$_=y$O.prototype;return y$_.replaceReset=function(){var y$_,y$c,y$e=0;for(y$_=y$O.replaceKeys.length,y$e=0;y$e<y$_;y$e++)y$c=y$O.replaceKeys[y$e],this[y$O.newKeys[y$e]]=this[y$c]},y$_.replaceResotre=function(){this.__restore(),this.__reset()},y$_.setIsMainContext=function(){},y$_.drawTextures=function(y$_,y$c,y$e,y$Z){y$g.drawCall+=y$c.length/2;for(var y$X=y$_.width,y$u=y$_.height,y$P=0,y$O=y$c.length;y$P<y$O;y$P+=2)this.drawTexture(y$_,y$c[y$P],y$c[y$P+1],y$X,y$u,y$e,y$Z)},y$_.drawCanvas=function(y$_,y$c,y$e,y$Z,y$X){y$g.drawCall++,this.drawImage(y$_.source,y$c,y$e,y$Z,y$X)},y$_.fillRect=function(y$_,y$c,y$e,y$Z,y$X){y$g.drawCall++,y$X&&(this.fillStyle=y$X),this.__fillRect(y$_,y$c,y$e,y$Z)},y$_.fillText=function(y$_,y$c,y$e,y$Z,y$X,y$u){y$g.drawCall++,3<arguments.length&&null!=y$Z&&(this.font=y$Z,this.fillStyle=y$X,this.textAlign=y$u,this.textBaseline="top"),this.__fillText(y$_,y$c,y$e)},y$_.fillBorderText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){y$g.drawCall++,this.font=y$Z,this.fillStyle=y$X,this.textBaseline="top",this.strokeStyle=y$u,this.lineWidth=y$P,this.textAlign=y$O,this.__strokeText(y$_,y$c,y$e),this.__fillText(y$_,y$c,y$e)},y$_.strokeText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$g.drawCall++,3<arguments.length&&null!=y$Z&&(this.font=y$Z,this.strokeStyle=y$X,this.lineWidth=y$u,this.textAlign=y$P,this.textBaseline="top"),this.__strokeText(y$_,y$c,y$e)},y$_.transformByMatrix=function(y$_){this.transform(y$_.a,y$_.b,y$_.c,y$_.d,y$_.tx,y$_.ty)},y$_.setTransformByMatrix=function(y$_){this.setTransform(y$_.a,y$_.b,y$_.c,y$_.d,y$_.tx,y$_.ty)},y$_.clipRect=function(y$_,y$c,y$e,y$Z){y$g.drawCall++,this.beginPath(),this.rect(y$_,y$c,y$e,y$Z),this.clip()},y$_.drawTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$g.drawCall++;var y$O=y$_.uv,y$s=y$_.bitmap.width,y$n=y$_.bitmap.height;this.drawImage(y$_.source,y$O[0]*y$s,y$O[1]*y$n,(y$O[2]-y$O[0])*y$s,(y$O[5]-y$O[3])*y$n,y$c+y$u,y$e+y$P,y$Z,y$X)},y$_.drawTextureWithTransform=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){y$g.drawCall++;var y$n=y$_.uv,y$m=y$_.bitmap.width,y$H=y$_.bitmap.height;this.save(),1!=y$s&&(this.globalAlpha*=y$s),y$u?(this.transform(y$u.a,y$u.b,y$u.c,y$u.d,y$u.tx+y$P,y$u.ty+y$O),this.drawImage(y$_.source,y$n[0]*y$m,y$n[1]*y$H,(y$n[2]-y$n[0])*y$m,(y$n[5]-y$n[3])*y$H,y$c,y$e,y$Z,y$X)):this.drawImage(y$_.source,y$n[0]*y$m,y$n[1]*y$H,(y$n[2]-y$n[0])*y$m,(y$n[5]-y$n[3])*y$H,y$c+y$P,y$e+y$O,y$Z,y$X),this.restore()},y$_.drawTexture2=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){var y$s=y$O[0];if(y$s.loaded&&y$s.bitmap&&y$s.source){y$g.drawCall++;var y$n=1!==y$u;if(y$n){var y$m=this.globalAlpha;this.globalAlpha*=y$u}var y$H=y$s.uv,y$B=y$s.bitmap.width,y$D=y$s.bitmap.height;y$X?(this.save(),this.transform(y$X.a,y$X.b,y$X.c,y$X.d,y$X.tx+y$_,y$X.ty+y$c),this.drawImage(y$s.source,y$H[0]*y$B,y$H[1]*y$D,(y$H[2]-y$H[0])*y$B,(y$H[5]-y$H[3])*y$D,y$O[1]-y$e,y$O[2]-y$Z,y$O[3],y$O[4]),this.restore()):this.drawImage(y$s.source,y$H[0]*y$B,y$H[1]*y$D,(y$H[2]-y$H[0])*y$B,(y$H[5]-y$H[3])*y$D,y$O[1]-y$e+y$_,y$O[2]-y$Z+y$c,y$O[3],y$O[4]),y$n&&(this.globalAlpha=y$m)}},y$_.fillTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){if(!y$O.pat){if(y$_.uv!=y$m_.DEF_UV){var y$s=new y$z_("2D");y$s.getContext("2d"),y$s.size(y$_.width,y$_.height),y$s.context.drawTexture(y$_,0,0,y$_.width,y$_.height,0,0),y$_=new y$m_(y$s)}y$O.pat=this.createPattern(y$_.bitmap.source,y$u)}var y$n=y$c,y$m=y$e,y$H=0,y$B=0;y$P&&(y$n+=y$P.x%y$_.width,y$m+=y$P.y%y$_.height,y$H-=y$P.x%y$_.width,y$B-=y$P.y%y$_.height),this.translate(y$n,y$m),this.fillRect(y$H,y$B,y$Z,y$X,y$O.pat),this.translate(-y$n,-y$m)},y$_.drawTriangle=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){var y$s=y$_.bitmap,y$n=y$s.source,y$m=y$_.width,y$H=y$_.height,y$B=y$s.width,y$D=y$s.height,y$U=y$e[y$Z]*y$B,y$k=y$e[y$X]*y$B,y$a=y$e[y$u]*y$B,y$G=y$e[y$Z+1]*y$D,y$w=y$e[y$X+1]*y$D,y$z=y$e[y$u+1]*y$D,y$L=y$c[y$Z],y$q=y$c[y$X],y$K=y$c[y$u],y$M=y$c[y$Z+1],y$f=y$c[y$X+1],y$A=y$c[y$u+1];if(y$O){var y$v=(y$L+y$q+y$K)/3,y$r=(y$M+y$f+y$A)/3,y$C=y$L-y$v,y$y=y$M-y$r,y$$=Math.sqrt(y$C*y$C+y$y*y$y);y$L=y$v+y$C/y$$*(y$$+1),y$M=y$r+y$y/y$$*(y$$+1),y$y=y$f-y$r,y$q=y$v+(y$C=y$q-y$v)/(y$$=Math.sqrt(y$C*y$C+y$y*y$y))*(y$$+1),y$f=y$r+y$y/y$$*(y$$+1),y$y=y$A-y$r,y$K=y$v+(y$C=y$K-y$v)/(y$$=Math.sqrt(y$C*y$C+y$y*y$y))*(y$$+1),y$A=y$r+y$y/y$$*(y$$+1)}this.save(),y$P&&this.transform(y$P.a,y$P.b,y$P.c,y$P.d,y$P.tx,y$P.ty),this.beginPath(),this.moveTo(y$L,y$M),this.lineTo(y$q,y$f),this.lineTo(y$K,y$A),this.closePath(),this.clip();var y$T=1/(y$U*y$w+y$G*y$a+y$k*y$z-y$w*y$a-y$G*y$k-y$U*y$z),y$h=y$L*y$w+y$G*y$K+y$q*y$z-y$w*y$K-y$G*y$q-y$L*y$z,y$R=y$U*y$q+y$L*y$a+y$k*y$K-y$q*y$a-y$L*y$k-y$U*y$K,y$i=y$U*y$w*y$K+y$G*y$q*y$a+y$L*y$k*y$z-y$L*y$w*y$a-y$G*y$k*y$K-y$U*y$q*y$z,y$x=y$M*y$w+y$G*y$A+y$f*y$z-y$w*y$A-y$G*y$f-y$M*y$z,y$F=y$U*y$f+y$M*y$a+y$k*y$A-y$f*y$a-y$M*y$k-y$U*y$A,y$Y=y$U*y$w*y$A+y$G*y$f*y$a+y$M*y$k*y$z-y$M*y$w*y$a-y$G*y$k*y$A-y$U*y$f*y$z;this.transform(y$h*y$T,y$x*y$T,y$R*y$T,y$F*y$T,y$i*y$T,y$Y*y$T),this.drawImage(y$n,y$_.uv[0]*y$B,y$_.uv[1]*y$D,y$m,y$H,y$_.uv[0]*y$B,y$_.uv[1]*y$D,y$m,y$H),this.restore()},y$_.flush=function(){return 0},y$_.fillWords=function(y$_,y$c,y$e,y$Z,y$X,y$u){y$Z&&(this.font=y$Z),y$X&&(this.fillStyle=y$X);this.textBaseline="top",this.textAlign="left";for(var y$P=0,y$O=y$_.length;y$P<y$O;y$P++){var y$s=y$_[y$P];if(this.__fillText(y$s.char,y$s.x+y$c,y$s.y+y$e),1===y$u){var y$n=y$s.height,y$m=.5*y$s.style.letterSpacing;y$m||(y$m=0),this.beginPath(),this.strokeStyle=y$X,this.lineWidth=1,this.moveTo(y$c+y$s.x-y$m+.5,y$e+y$s.y+y$n+.5),this.lineTo(y$c+y$s.x+y$s.width+y$m+.5,y$e+y$s.y+y$n+.5),this.stroke()}}},y$_.fillBorderWords=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$Z&&(this.font=y$Z),y$X&&(this.fillStyle=y$X),this.textBaseline="top",this.lineWidth=y$P,this.textAlign="left",this.strokeStyle=y$u;for(var y$O=0,y$s=y$_.length;y$O<y$s;y$O++){var y$n=y$_[y$O];this.__strokeText(y$n.char,y$n.x+y$c,y$n.y+y$e),this.__fillText(y$n.char,y$n.x+y$c,y$n.y+y$e)}},y$_.destroy=function(){this.canvas.width=this.canvas.height=0},y$_.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},y$_.drawCurves=function(y$_,y$c,y$e){this.beginPath(),this.strokeStyle=y$e[3],this.lineWidth=y$e[4];var y$Z=y$e[2];y$_+=y$e[0],y$c+=y$e[1],this.moveTo(y$_+y$Z[0],y$c+y$Z[1]);for(var y$X=2,y$u=y$Z.length;y$X<y$u;)this.quadraticCurveTo(y$_+y$Z[y$X++],y$c+y$Z[y$X++],y$_+y$Z[y$X++],y$c+y$Z[y$X++]);this.stroke()},y$O.__init__=function(y$c){var y$e=laya.resource.Context.prototype;if(!(y$c=y$c||CanvasRenderingContext2D.prototype).inited){y$c.inited=!0,y$c.__fillText=y$c.fillText,y$c.__fillRect=y$c.fillRect,y$c.__strokeText=y$c.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(y$_){y$c[y$_]=y$e[y$_]})}},y$O.replaceCanvasGetSet=function(y$_,y$c){var y$e=Object.getOwnPropertyDescriptor(y$_,y$c);if(!y$e||!y$e.configurable)return!1;var y$Z,y$X={};for(y$Z in y$e)"set"!=y$Z&&(y$X[y$Z]=y$e[y$Z]);var y$u=y$e.set;return y$X.set=function(y$_){y$u.call(this,y$_);var y$c=this.getContext("2d");y$c&&"__reset"in y$c&&y$c.__reset()},Object.defineProperty(y$_,y$c,y$X),!0},y$O.replaceGetSet=function(y$_,y$c){var y$e=Object.getOwnPropertyDescriptor(y$_,y$c);if(!y$e||!y$e.configurable)return!1;var y$Z,y$X={};for(y$Z in y$e)"set"!=y$Z&&(y$X[y$Z]=y$e[y$Z]);var y$u=y$e.set,y$P="___"+y$c+"__";return y$O.newKeys.push(y$P),y$X.set=function(y$_){y$_!=this[y$P]&&(this[y$P]=y$_,y$u.call(this,y$_))},Object.defineProperty(y$_,y$c,y$X),!0},y$O._default=new y$O,y$O.newKeys=[],y$s(y$O,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),y$O}(),y$Y=function(){function y$u(y$_){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++y$u._uniqueIDCounter,this._name=y$_||"Content Manager",y$u._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,y$u._resourceManagers.push(this),this._resources=[],this._records={}}y$m(y$u,"laya.resource.ResourceManager");var y$_=y$u.prototype;return y$M.imps(y$_,{"laya.resource.IDispose":!0}),y$_.getResourceByIndex=function(y$_){return this._resources[y$_]},y$_.getResourcesLength=function(){return this._resources.length},y$_.addResource=function(y$_){return y$_.resourceManager&&y$_.resourceManager.removeResource(y$_),-1===this._resources.indexOf(y$_)&&((y$_._resourceManager=this)._resources.push(y$_),this.addRecord(y$_.uri,y$_.__className,y$_.memorySize),this.addSize(y$_.memorySize),!0)},y$_.removeResource=function(y$_){var y$c=this._resources.indexOf(y$_);return-1!==y$c&&(this._resources.splice(y$c,1),y$_._resourceManager=null,this._memorySize-=y$_.memorySize,this.addRecord(y$_.uri,y$_.__className,-y$_.memorySize),!0)},y$_.unload=function(){for(var y$_=this._resources.slice(0,this._resources.length),y$c=0;y$c<y$_.length;y$c++){y$_[y$c].destroy()}y$_.length=0},y$_.dispose=function(){if(this===y$u._systemResourceManager)throw new Error("systemResourceManager不能被释放！");y$u._resourceManagers.splice(y$u._resourceManagers.indexOf(this),1),y$u._isResourceManagersSorted=!1;for(var y$_=this._resources.slice(0,this._resources.length),y$c=0;y$c<y$_.length;y$c++){var y$e=y$_[y$c];y$e.resourceManager.removeResource(y$e),y$e.destroy()}y$_.length=0},y$_.addSize=function(y$_){y$_&&(this.autoRelease&&0<y$_&&this._memorySize+y$_>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=y$_)},y$_.addRecord=function(y$_,y$c,y$e){DEBUG&&y$e&&!y$_&&console.error(y$_,y$c,y$e),y$_&&(this._records.hasOwnProperty(y$c+"|"+y$_)||(this._records[y$c+"|"+y$_]=0),this._records[y$c+"|"+y$_]+=y$e,DEBUG&&this._records[y$c+"|"+y$_]<0&&console.error(y$_,y$c,this._records[y$c+"|"+y$_]))},y$_.garbageCollection=function(y$_){var y$c=this._resources;(y$c=y$c.slice()).sort(function(y$_,y$c){if(!y$_||!y$c)throw new Error("a或b不能为空！");return y$_.released&&y$c.released?0:y$_.released?1:y$c.released?-1:y$_._lastUseFrameCount-y$c._lastUseFrameCount});for(var y$e=y$g.loopCount,y$Z=0,y$X=y$c.length;y$Z<y$X;y$Z++){var y$u=y$c[y$Z];if(!(1<y$e-y$u._lastUseFrameCount))return void(this._memorySize>=y$_&&(this._isOverflow=!0));if(y$u.releaseResource(),this._memorySize<y$_)return void(this._isOverflow=!1)}},y$U(0,y$_,"id",function(){return this._id}),y$U(0,y$_,"name",function(){return this._name},function(y$_){!y$_&&""===y$_||this._name===y$_||(this._name=y$_,y$u._isResourceManagersSorted=!1)}),y$U(0,y$_,"memorySize",function(){return this._memorySize}),y$U(0,y$_,"records",function(){return this._records}),y$U(1,y$u,"systemResourceManager",function(){return y$u._systemResourceManager}),y$u.__init__=function(){y$u.currentResourceManager=y$u.systemResourceManager},y$u.getLoadedResourceManagerByIndex=function(y$_){return y$u._resourceManagers[y$_]},y$u.getLoadedResourceManagersCount=function(){return y$u._resourceManagers.length},y$u.recreateContentManagers=function(y$_){void 0===y$_&&(y$_=!1);for(var y$c=y$u.currentResourceManager,y$e=0;y$e<y$u._resourceManagers.length;y$e++){y$u.currentResourceManager=y$u._resourceManagers[y$e];for(var y$Z=0;y$Z<y$u.currentResourceManager._resources.length;y$Z++)y$u.currentResourceManager._resources[y$Z].releaseResource(y$_),y$u.currentResourceManager._resources[y$Z].activeResource(y$_)}y$u.currentResourceManager=y$c},y$u.releaseContentManagers=function(y$_){void 0===y$_&&(y$_=!1);for(var y$c=y$u.currentResourceManager,y$e=0;y$e<y$u._resourceManagers.length;y$e++){y$u.currentResourceManager=y$u._resourceManagers[y$e];for(var y$Z=0;y$Z<y$u.currentResourceManager._resources.length;y$Z++){var y$X=y$u.currentResourceManager._resources[y$Z];!y$X.released&&y$X.releaseResource(y$_)}}y$u.currentResourceManager=y$c},y$u._uniqueIDCounter=0,y$u._isResourceManagersSorted=!1,y$u._resourceManagers=[],y$s(y$u,["_systemResourceManager",function(){return this._systemResourceManager=new y$u("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=y$u._systemResourceManager}]),y$u}(),y$p=(function(){function y$_(){}y$m(y$_,"laya.system.System"),y$_.changeDefinition=function(y$_,y$c){y$M[y$_]=y$c;var y$e=y$_+"=classObj";y$M._runScript(y$e)},y$_.__init__=function(){y$R.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function y$e(){}return y$m(y$e,"laya.utils.Browser"),y$U(1,y$e,"pixelRatio",function(){return y$e.__init__(),-1<y$e.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:y$y.getPixelRatio()}),y$U(1,y$e,"height",function(){return y$e.__init__(),(y$M.stage&&y$M.stage.canvasRotation?y$e.clientWidth:y$e.clientHeight)*y$e.pixelRatio}),y$U(1,y$e,"clientWidth",function(){return y$e.__init__(),y$e.window.innerWidth||y$e.document.body.clientWidth}),y$U(1,y$e,"window",function(){return y$e.__init__(),y$e._window}),y$U(1,y$e,"clientHeight",function(){return y$e.__init__(),y$e.window.innerHeight||y$e.document.body.clientHeight||y$e.document.documentElement.clientHeight}),y$U(1,y$e,"width",function(){return y$e.__init__(),(y$M.stage&&y$M.stage.canvasRotation?y$e.clientHeight:y$e.clientWidth)*y$e.pixelRatio}),y$U(1,y$e,"container",function(){return y$e.__init__(),y$e._container||((y$e._container=y$e.createElement("div")).id="layaContainer",y$e.document.body.appendChild(y$e._container)),y$e._container},function(y$_){y$e._container=y$_}),y$U(1,y$e,"document",function(){return y$e.__init__(),y$e._document}),y$e.__init__=function(){if(!y$e._window){y$e._window=y$y.getWindow(),y$e._document=y$e.window.document,y$e._window.addEventListener("message",function(y$_){laya.utils.Browser._onMessage(y$_)},!1),y$e.document.__createElement=y$e.document.createElement,y$P.requestAnimationFrame=y$P.requestAnimationFrame||y$P.webkitRequestAnimationFrame||y$P.mozRequestAnimationFrame||y$P.oRequestAnimationFrame||y$P.msRequestAnimationFrame||function(y$_){return y$P.setTimeout(y$_,1e3/60)};var y$_=y$P.document.body.style;y$_["-webkit-user-select"]="none",y$_["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",y$e.userAgent=y$e.window.navigator.userAgent,y$e.onIOS=!!(y$e.u=y$e.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),y$e.onMobile=-1<y$e.u.indexOf("Mobile"),y$e.onIPhone=-1<y$e.u.indexOf("iPhone"),y$e.onMac=-1<y$e.u.indexOf("Mac OS X"),y$e.onIPad=-1<y$e.u.indexOf("iPad"),y$e.onAndroid=-1<y$e.u.indexOf("Android")||-1<y$e.u.indexOf("Adr"),y$e.onWP=-1<y$e.u.indexOf("Windows Phone"),y$e.onQQBrowser=-1<y$e.u.indexOf("QQBrowser"),y$e.onMQQBrowser=-1<y$e.u.indexOf("MQQBrowser")||-1<y$e.u.indexOf("Mobile")&&-1<y$e.u.indexOf("QQ"),y$e.onIE=!!y$e.window.ActiveXObject||"ActiveXObject"in y$e.window,y$e.onWeiXin=-1<y$e.u.indexOf("MicroMessenger"),y$e.onPC=!y$e.onMobile,y$e.onSafari=-1<y$e.u.indexOf("Safari"),y$e.onFirefox=-1<y$e.u.indexOf("Firefox"),y$e.onEdge=-1<y$e.u.indexOf("Edge"),y$e.onMiniGame=-1<y$e.u.indexOf("MiniGame"),y$e.onLimixiu=-1<y$e.u.indexOf("limixiu"),y$e.httpProtocol="http:"==y$e.window.location.protocol,y$e.onMiniGame&&null==y$e.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),y$e.webAudioEnabled=!!(y$e.window.AudioContext||y$e.window.webkitAudioContext||y$e.window.mozAudioContext),y$e.soundType=y$e.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",y$X_=y$e.webAudioEnabled?y$u_:y$e_,y$e.webAudioEnabled&&y$u_.initWebAudio(),y$e_._initMusicAudio(),y$e.enableTouch="ontouchstart"in y$P||y$P.DocumentTouch&&y$c instanceof DocumentTouch,y$P.focus(),y$C._soundClass=y$X_,y$C._musicClass=y$e_,y$R._mainCanvas=y$R._mainCanvas||y$z_.create("2D"),y$e.canvas||(y$e.canvas=y$z_.create("2D"),y$e.context=y$e.canvas.getContext("2d"))}},y$e._onMessage=function(y$_){if(y$_.data&&"size"==y$_.data.name){if(y$e.window.innerWidth=y$_.data.width,y$e.window.innerHeight=y$_.data.height,y$e.window.__innerHeight=y$_.data.clientHeight,!y$e.document.createEvent)return void console.warn("no document.createEvent");var y$c=y$e.document.createEvent("HTMLEvents");return y$c.initEvent("resize",!1,!1),void y$e.window.dispatchEvent(y$c)}},y$e.createElement=function(y$_){return y$e.__init__(),y$e.document.__createElement(y$_)},y$e.getElementById=function(y$_){return y$e.__init__(),y$e.document.getElementById(y$_)},y$e.removeElement=function(y$_){y$_&&y$_.parentNode&&y$_.parentNode.removeChild(y$_)},y$e.now=function(){return y$y.now()},y$e._window=null,y$e._document=null,y$e._container=null,y$e.userAgent=null,y$e.u=null,y$e.onIOS=!1,y$e.onMac=!1,y$e.onMobile=!1,y$e.onIPhone=!1,y$e.onIPad=!1,y$e.onAndroid=!1,y$e.onWP=!1,y$e.onQQBrowser=!1,y$e.onMQQBrowser=!1,y$e.onSafari=!1,y$e.onFirefox=!1,y$e.onEdge=!1,y$e.onIE=!1,y$e.onWeiXin=!1,y$e.onMiniGame=!1,y$e.onLimixiu=!1,y$e.onPC=!1,y$e.httpProtocol=!1,y$e.webAudioEnabled=!1,y$e.soundType=null,y$e.enableTouch=!1,y$e.canvas=null,y$e.context=null,y$e.__init$=function(){},y$e}()),y$o=function(){function y$c(y$_){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,y$_?(this._u8d_=new Uint8Array(y$_),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}y$m(y$c,"laya.utils.Byte");var y$_=y$c.prototype;return y$_.___resizeBuffer=function(y$c){try{var y$_=new Uint8Array(y$c);null!=this._u8d_&&(this._u8d_.length<=y$c?y$_.set(this._u8d_):y$_.set(this._u8d_.subarray(0,y$c))),this._u8d_=y$_,this._d_=new DataView(y$_.buffer)}catch(y$_){throw"___resizeBuffer err:"+y$c}},y$_.getString=function(){return this.rUTF(this.getUint16())},y$_.getFloat32Array=function(y$_,y$c){var y$e=y$_+y$c;y$e=y$e>this._length?this._length:y$e;var y$Z=new Float32Array(this._d_.buffer.slice(y$_,y$e));return this._pos_=y$e,y$Z},y$_.getUint8Array=function(y$_,y$c){var y$e=y$_+y$c;y$e=y$e>this._length?this._length:y$e;var y$Z=new Uint8Array(this._d_.buffer.slice(y$_,y$e));return this._pos_=y$e,y$Z},y$_.getInt16Array=function(y$_,y$c){var y$e=y$_+y$c;y$e=y$e>this._length?this._length:y$e;var y$Z=new Int16Array(this._d_.buffer.slice(y$_,y$e));return this._pos_=y$e,y$Z},y$_.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var y$_=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,y$_},y$_.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var y$_=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,y$_},y$_.writeFloat32=function(y$_){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,y$_,this._xd_),this._pos_+=4},y$_.writeFloat64=function(y$_){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,y$_,this._xd_),this._pos_+=8},y$_.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var y$_=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,y$_},y$_.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var y$_=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,y$_},y$_.writeInt32=function(y$_){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,y$_,this._xd_),this._pos_+=4},y$_.writeUint32=function(y$_){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,y$_,this._xd_),this._pos_+=4},y$_.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var y$_=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,y$_},y$_.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var y$_=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,y$_},y$_.writeUint16=function(y$_){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,y$_,this._xd_),this._pos_+=2},y$_.writeInt16=function(y$_){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,y$_,this._xd_),this._pos_+=2},y$_.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},y$_.writeUint8=function(y$_){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,y$_),this._pos_++},y$_._getUInt8=function(y$_){return this._d_.getUint8(y$_)},y$_._getUint16=function(y$_){return this._d_.getUint16(y$_,this._xd_)},y$_._getMatrix=function(){return new y$$(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},y$_.rUTF=function(y$_){for(var y$c=[],y$e=this._pos_+y$_,y$Z=0,y$X=0,y$u=0,y$P=String.fromCharCode,y$O=this._u8d_;this._pos_<y$e;)(y$Z=y$O[this._pos_++])<128?0!=y$Z&&y$c.push(y$P(y$Z)):y$Z<224?y$c.push(y$P((63&y$Z)<<6|127&y$O[this._pos_++])):y$Z<240?(y$X=y$O[this._pos_++],y$c.push(y$P((31&y$Z)<<12|(127&y$X)<<6|127&y$O[this._pos_++]))):(y$X=y$O[this._pos_++],y$u=y$O[this._pos_++],y$c.push(y$P((15&y$Z)<<18|(127&y$X)<<12|y$u<<6&127|127&y$O[this._pos_++]))),0;return y$c.join("")},y$_.getCustomString=function(y$_){for(var y$c=[],y$e=0,y$Z=0,y$X=0,y$u=String.fromCharCode,y$P=this._u8d_;0<y$_;)if((y$Z=y$P[this._pos_])<128)y$c.push(y$u(y$Z)),this._pos_++,y$_--;else for(y$e=y$Z-128,this._pos_++,y$_-=y$e;0<y$e;)y$Z=y$P[this._pos_++],y$X=y$P[this._pos_++],y$c.push(y$u(y$X<<8|y$Z)),y$e--;return y$c.join("")},y$_.clear=function(){this._pos_=0,this.length=0},y$_.__getBuffer=function(){return this._d_.buffer},y$_.writeUTFBytes=function(y$_){for(var y$c=0,y$e=(y$_+="").length;y$c<y$e;y$c++){var y$Z=y$_.charCodeAt(y$c);y$Z<=127?this.writeByte(y$Z):y$Z<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|y$Z>>6,128|63&y$Z],this._pos_),this._pos_+=2):y$Z<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|y$Z>>12,128|y$Z>>6&63,128|63&y$Z],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|y$Z>>18,128|y$Z>>12&63,128|y$Z>>6&63,128|63&y$Z],this._pos_),this._pos_+=4)}},y$_.writeUTFString=function(y$_){var y$c=this.pos;this.writeUint16(1),this.writeUTFBytes(y$_);var y$e=this.pos-y$c-2;if(65536<=y$e)throw"writeUTFString byte len more than 65536";this._d_.setUint16(y$c,y$e,this._xd_)},y$_.readUTFString=function(){return this.readUTFBytes(this.getUint16())},y$_.getUTFString=function(){return this.readUTFString()},y$_.readUTFBytes=function(y$_){if(void 0===y$_&&(y$_=-1),0==y$_)return"";var y$c=this.bytesAvailable;if(y$c<y$_)throw"readUTFBytes error - Out of bounds";return y$_=0<y$_?y$_:y$c,this.rUTF(y$_)},y$_.getUTFBytes=function(y$_){return void 0===y$_&&(y$_=-1),this.readUTFBytes(y$_)},y$_.writeByte=function(y$_){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,y$_),this._pos_+=1},y$_.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},y$_.getByte=function(){return this.readByte()},y$_.ensureWrite=function(y$_){this._length<y$_&&(this._length=y$_),this._allocated_<y$_&&(this.length=y$_)},y$_.writeArrayBuffer=function(y$_,y$c,y$e){if(void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),y$c<0||y$e<0)throw"writeArrayBuffer error - Out of bounds";0==y$e&&(y$e=y$_.byteLength-y$c),this.ensureWrite(this._pos_+y$e);var y$Z=new Uint8Array(y$_);this._u8d_.set(y$Z.subarray(y$c,y$c+y$e),this._pos_),this._pos_+=y$e},y$U(0,y$_,"buffer",function(){var y$_=this._d_.buffer;return y$_.byteLength==this.length?y$_:y$_.slice(0,this.length)}),y$U(0,y$_,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(y$_){this._xd_="littleEndian"==y$_}),y$U(0,y$_,"length",function(){return this._length},function(y$_){this._allocated_<y$_?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(y$_,2*this._allocated_))):this._allocated_>y$_&&this.___resizeBuffer(this._allocated_=y$_),this._length=y$_}),y$U(0,y$_,"pos",function(){return this._pos_},function(y$_){this._pos_=y$_}),y$U(0,y$_,"bytesAvailable",function(){return this._length-this._pos_}),y$c.getSystemEndian=function(){if(!y$c._sysEndian){var y$_=new ArrayBuffer(2);new DataView(y$_).setInt16(0,256,!0),y$c._sysEndian=256===new Int16Array(y$_)[0]?"littleEndian":"bigEndian"}return y$c._sysEndian},y$c.BIG_ENDIAN="bigEndian",y$c.LITTLE_ENDIAN="littleEndian",y$c._sysEndian=null,y$c}(),y$Q=function(){function y$X(){}return y$m(y$X,"laya.utils.CacheManager"),y$X.regCacheByFunction=function(y$_,y$c){var y$e;y$X.unRegCacheByFunction(y$_,y$c),y$e={tryDispose:y$_,getCacheList:y$c},y$X._cacheList.push(y$e)},y$X.unRegCacheByFunction=function(y$_,y$c){var y$e,y$Z=0;for(y$e=y$X._cacheList.length,y$Z=0;y$Z<y$e;y$Z++)if(y$X._cacheList[y$Z].tryDispose==y$_&&y$X._cacheList[y$Z].getCacheList==y$c)return void y$X._cacheList.splice(y$Z,1)},y$X.forceDispose=function(){var y$_=0,y$c=y$X._cacheList.length;for(y$_=0;y$_<y$c;y$_++)y$X._cacheList[y$_].tryDispose(!0)},y$X.beginCheck=function(y$_){void 0===y$_&&(y$_=15e3),y$M.timer.loop(y$_,null,y$X._checkLoop)},y$X.stopCheck=function(){y$M.timer.clear(null,y$X._checkLoop)},y$X._checkLoop=function(){var y$_=y$X._cacheList;if(!(y$_.length<1)){var y$c,y$e=y$p.now(),y$Z=0;for(y$c=y$Z=y$_.length;0<y$Z&&(y$_[y$X._index=++y$X._index%y$c].tryDispose(!1),!(y$p.now()-y$e>y$X.loopTimeLimit));)y$Z--}},y$X.loopTimeLimit=2,y$X._cacheList=[],y$X._index=0,y$X}(),y$J=function(){function y$D(){}return y$m(y$D,"laya.utils.ClassUtils"),y$D.regClass=function(y$_,y$c){y$D._classMap[y$_]=y$c},y$D.getRegClass=function(y$_){return y$D._classMap[y$_]},y$D.getInstance=function(y$_){var y$c=y$D.getClass(y$_);return y$c?new y$c:(console.warn("[error] Undefined class:",y$_),null)},y$D.createByJson=function(y$_,y$c,y$e,y$Z,y$X){"string"==typeof y$_&&(y$_=JSON.parse(y$_));var y$u=y$_.props;if(!y$c&&!(y$c=y$X?y$X.runWith(y$_):y$D.getInstance(y$u.runtime||y$_.type)))return null;var y$P=y$_.child;if(y$P)for(var y$O=0,y$s=y$P.length;y$O<y$s;y$O++){var y$n=y$P[y$O];if("render"!==y$n.props.name&&"render"!==y$n.props.renderType||!y$c._$set_itemRender)if("Graphic"==y$n.type)y$D.addGraphicsToSprite(y$n,y$c);else if(y$D.isDrawType(y$n.type))y$D.addGraphicToSprite(y$n,y$c,!0);else{var y$m=y$D.createByJson(y$n,null,y$e,y$Z,y$X);"Script"==y$n.type?y$m.hasOwnProperty("owner")?y$m.owner=y$c:y$m.hasOwnProperty("target")&&(y$m.target=y$c):"mask"==y$n.props.renderType?y$c.mask=y$m:y$c.addChild(y$m)}else y$c.itemRender=y$n}if(y$u)for(var y$H in y$u){var y$B=y$u[y$H];"var"===y$H&&y$e?y$e[y$B]=y$c:y$B instanceof Array&&"function"==typeof y$c[y$H]?y$c[y$H].apply(y$c,y$B):y$c[y$H]=y$B}return y$Z&&y$_.customProps&&y$Z.runWith([y$c,y$_]),y$c.created&&y$c.created(),y$c},y$D.addGraphicsToSprite=function(y$_,y$c){var y$e;if((y$e=y$_.child)&&!(y$e.length<1)){var y$Z;y$Z=y$D._getGraphicsFromSprite(y$_,y$c);var y$X=0,y$u=0;y$_.props&&(y$X=y$D._getObjVar(y$_.props,"x",0),y$u=y$D._getObjVar(y$_.props,"y",0)),0!=y$X&&0!=y$u&&y$Z.translate(y$X,y$u);var y$P,y$O=0;for(y$P=y$e.length,y$O=0;y$O<y$P;y$O++)y$D._addGraphicToGraphics(y$e[y$O],y$Z);0!=y$X&&0!=y$u&&y$Z.translate(-y$X,-y$u)}},y$D.addGraphicToSprite=function(y$_,y$c,y$e){var y$Z;void 0===y$e&&(y$e=!1),y$Z=y$e?y$D._getGraphicsFromSprite(y$_,y$c):y$c.graphics,y$D._addGraphicToGraphics(y$_,y$Z)},y$D._getGraphicsFromSprite=function(y$_,y$c){var y$e,y$Z;if(!y$_||!y$_.props)return y$c.graphics;switch(y$Z=y$_.props.renderType){case"hit":case"unHit":var y$X;y$c.hitArea||(y$c.hitArea=new y$N),(y$X=y$c.hitArea)[y$Z]||(y$X[y$Z]=new y$B),y$e=y$X[y$Z]}return y$e||(y$e=y$c.graphics),y$e},y$D._getTransformData=function(y$_){var y$c;(y$_.hasOwnProperty("pivotX")||y$_.hasOwnProperty("pivotY"))&&(y$c=y$c||new y$$).translate(-y$D._getObjVar(y$_,"pivotX",0),-y$D._getObjVar(y$_,"pivotY",0));var y$e=y$D._getObjVar(y$_,"scaleX",1),y$Z=y$D._getObjVar(y$_,"scaleY",1),y$X=y$D._getObjVar(y$_,"rotation",0);y$D._getObjVar(y$_,"skewX",0),y$D._getObjVar(y$_,"skewY",0);return 1==y$e&&1==y$Z&&0==y$X||((y$c=y$c||new y$$).scale(y$e,y$Z),y$c.rotate(.0174532922222222*y$X)),y$c},y$D._addGraphicToGraphics=function(y$_,y$c){var y$e,y$Z;if((y$e=y$_.props)&&(y$Z=y$D.DrawTypeDic[y$_.type])){var y$X,y$u;y$X=y$c;var y$P=y$D._getParams(y$e,y$Z[1],y$Z[2],y$Z[3]);((y$u=y$D._tM)||1!=y$D._alpha)&&(y$X.save(),y$u&&y$X.transform(y$u),1!=y$D._alpha&&y$X.alpha(y$D._alpha)),y$X[y$Z[0]].apply(y$X,y$P),(y$u||1!=y$D._alpha)&&y$X.restore()}},y$D._adptLineData=function(y$_){return y$_[2]=parseFloat(y$_[0])+parseFloat(y$_[2]),y$_[3]=parseFloat(y$_[1])+parseFloat(y$_[3]),y$_},y$D._adptTextureData=function(y$_){return y$_[0]=y$O_.getRes(y$_[0]),y$_},y$D._adptLinesData=function(y$_){return y$_[2]=y$D._getPointListByStr(y$_[2]),y$_},y$D.isDrawType=function(y$_){return"Image"!=y$_&&y$D.DrawTypeDic.hasOwnProperty(y$_)},y$D._getParams=function(y$_,y$c,y$e,y$Z){var y$X;void 0===y$e&&(y$e=0),(y$X=y$D._temParam).length=y$c.length;var y$u,y$P,y$O=0;for(y$u=y$c.length,y$O=0;y$O<y$u;y$O++)y$X[y$O]=y$D._getObjVar(y$_,y$c[y$O][0],y$c[y$O][1]);return y$D._alpha=y$D._getObjVar(y$_,"alpha",1),y$P=y$D._getTransformData(y$_),y$D._tM=y$P?(y$e||(y$e=0),y$P.translate(y$X[y$e],y$X[y$e+1]),y$X[y$e]=y$X[y$e+1]=0,y$P):null,y$Z&&y$D[y$Z]&&(y$X=y$D[y$Z](y$X)),y$X},y$D._getPointListByStr=function(y$_){var y$c,y$e,y$Z=0;for(y$e=(y$c=y$_.split(",")).length,y$Z=0;y$Z<y$e;y$Z++)y$c[y$Z]=parseFloat(y$c[y$Z]);return y$c},y$D._getObjVar=function(y$_,y$c,y$e){return y$_.hasOwnProperty(y$c)?y$_[y$c]:y$e},y$D._temParam=[],y$D._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},y$D.getClass=function(y$_){var y$c=y$D._classMap[y$_]||y$_;return"string"==typeof y$c?y$M.__classmap[y$c]:y$c},y$D._tM=null,y$D._alpha=NaN,y$s(y$D,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),y$D}(),y$j=function(){function y$u(y$_){if(this._color=[],"string"==typeof y$_){null===(this.strColor=y$_)&&(y$_="#000000"),"#"==y$_.charAt(0)&&(y$_=y$_.substr(1));var y$c=y$_.length;if(3==y$c||4==y$c){for(var y$e="",y$Z=0;y$Z<y$c;y$Z++)y$e+=y$_[y$Z]+y$_[y$Z];y$_=y$e}var y$X=this.numColor=parseInt(y$_,16);if(8==y$_.length)return void(this._color=[parseInt(y$_.substr(0,2),16)/255,((16711680&y$X)>>16)/255,((65280&y$X)>>8)/255,(255&y$X)/255])}else y$X=this.numColor=y$_,this.strColor=y$W.toHexColor(y$X);this._color=[((16711680&y$X)>>16)/255,((65280&y$X)>>8)/255,(255&y$X)/255,1],this._color.__id=++y$u._COLODID}return y$m(y$u,"laya.utils.Color"),y$u._initDefault=function(){for(var y$_ in y$u._DEFAULT={},y$u._COLOR_MAP)y$u._SAVE[y$_]=y$u._DEFAULT[y$_]=new y$u(y$u._COLOR_MAP[y$_]);return y$u._DEFAULT},y$u._initSaveMap=function(){for(var y$_ in y$u._SAVE_SIZE=0,y$u._SAVE={},y$u._DEFAULT)y$u._SAVE[y$_]=y$u._DEFAULT[y$_]},y$u.create=function(y$_){var y$c=y$u._SAVE[y$_+""];return null!=y$c?y$c:(y$u._SAVE_SIZE<1e3||y$u._initSaveMap(),y$u._SAVE[y$_+""]=new y$u(y$_))},y$u._SAVE={},y$u._SAVE_SIZE=0,y$u._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},y$u._DEFAULT=y$u._initDefault(),y$u._COLODID=1,y$u}(),y$t=(function(){function y$_(){this._values=[],this._keys=[]}y$m(y$_,"laya.utils.Dictionary");var y$c=y$_.prototype;y$c.set=function(y$_,y$c){var y$e=this.indexOf(y$_);0<=y$e?this._values[y$e]=y$c:(this._keys.push(y$_),this._values.push(y$c))},y$c.indexOf=function(y$_){var y$c=this._keys.indexOf(y$_);return 0<=y$c?y$c:(y$_="string"==typeof y$_?Number(y$_):"number"==typeof y$_?y$_.toString():y$_,this._keys.indexOf(y$_))},y$c.get=function(y$_){var y$c=this.indexOf(y$_);return y$c<0?null:this._values[y$c]},y$c.remove=function(y$_){var y$c=this.indexOf(y$_);return 0<=y$c&&(this._keys.splice(y$c,1),this._values.splice(y$c,1),!0)},y$c.clear=function(){this._values.length=0,this._keys.length=0},y$U(0,y$c,"values",function(){return this._values}),y$U(0,y$c,"keys",function(){return this._keys})}(),function(){function y$_(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}y$m(y$_,"laya.utils.Dragging");var y$c=y$_.prototype;return y$c.start=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){void 0===y$O&&(y$O=.92),this.clearTimer(),this.target=y$_,this.area=y$c,this.hasInertia=y$e,this.elasticDistance=y$c?y$Z:0,this.elasticBackTime=y$X,this.data=y$u,this._disableMouseEvent=y$P,this.ratio=y$O,1!=y$_.globalScaleX||1!=y$_.globalScaleY?this._parent=y$_.parent:this._parent=y$M.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,y$M.stage.on("mouseup",this,this.onStageMouseUp),y$M.stage.on("mouseout",this,this.onStageMouseUp),y$M.timer.frameLoop(1,this,this.loop)},y$c.clearTimer=function(){y$M.timer.clear(this,this.loop),y$M.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},y$c.stop=function(){this._dragging&&(y$k.instance.disableMouseEvent=!1,y$M.stage.off("mouseup",this,this.onStageMouseUp),y$M.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},y$c.loop=function(){var y$_=this._parent.getMousePoint(),y$c=y$_.x,y$e=y$_.y,y$Z=y$c-this._lastX,y$X=y$e-this._lastY;if(this._clickOnly){if(!(1<Math.abs(y$Z*y$M.stage._canvasTransform.getScaleX())||1<Math.abs(y$X*y$M.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),y$k.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(y$Z,y$X);0==y$Z&&0==y$X||(this._lastX=y$c,this._lastY=y$e,this.target.x+=y$Z*this._elasticRateX,this.target.y+=y$X*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},y$c.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var y$_=this.area.x-this.target.x;else y$_=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-y$_/this.elasticDistance),this.target.y<this.area.y)var y$c=this.area.y-this.target.y;else y$c=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-y$c/this.elasticDistance)}},y$c.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},y$c.onStageMouseUp=function(y$_){if(y$k.instance.disableMouseEvent=!1,y$M.stage.off("mouseup",this,this.onStageMouseUp),y$M.stage.off("mouseout",this,this.onStageMouseUp),y$M.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var y$c=this._offsets.length,y$e=Math.min(y$c,6),y$Z=this._offsets.length-y$e,y$X=y$c-1;y$Z<y$X;y$X--)this._offsetY+=this._offsets[y$X--],this._offsetX+=this._offsets[y$X];this._offsetX=this._offsetX/y$e*2,this._offsetY=this._offsetY/y$e*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),y$M.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},y$c.checkElastic=function(){var y$_=NaN,y$c=NaN;if(this.target.x<this.area.x?y$_=this.area.x:this.target.x>this.area.x+this.area.width&&(y$_=this.area.x+this.area.width),this.target.y<this.area.y?y$c=this.area.y:this.target.y>this.area.y+this.area.height&&(y$c=this.area.y+this.area.height),isNaN(y$_)&&isNaN(y$c))this.clear();else{var y$e={};isNaN(y$_)||(y$e.x=y$_),isNaN(y$c)||(y$e.y=y$c),this._tween=y$E.to(this.target,y$e,this.elasticBackTime,y$b.sineOut,y$w.create(this,this.clear),0,!1,!1)}},y$c.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(y$M.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},y$c.clear=function(){if(this.target){this.clearTimer();var y$_=this.target;this.target=null,this._parent=null,y$_.event("dragend",this.data)}},y$_}()),y$b=function(){function y$O(){}return y$m(y$O,"laya.utils.Ease"),y$O.linearNone=function(y$_,y$c,y$e,y$Z){return y$e*y$_/y$Z+y$c},y$O.linearIn=function(y$_,y$c,y$e,y$Z){return y$e*y$_/y$Z+y$c},y$O.linearInOut=function(y$_,y$c,y$e,y$Z){return y$e*y$_/y$Z+y$c},y$O.linearOut=function(y$_,y$c,y$e,y$Z){return y$e*y$_/y$Z+y$c},y$O.bounceIn=function(y$_,y$c,y$e,y$Z){return y$e-y$O.bounceOut(y$Z-y$_,0,y$e,y$Z)+y$c},y$O.bounceInOut=function(y$_,y$c,y$e,y$Z){return y$_<.5*y$Z?.5*y$O.bounceIn(2*y$_,0,y$e,y$Z)+y$c:.5*y$O.bounceOut(2*y$_-y$Z,0,y$e,y$Z)+.5*y$e+y$c},y$O.bounceOut=function(y$_,y$c,y$e,y$Z){return(y$_/=y$Z)<1/2.75?y$e*(7.5625*y$_*y$_)+y$c:y$_<2/2.75?y$e*(7.5625*(y$_-=1.5/2.75)*y$_+.75)+y$c:y$_<2.5/2.75?y$e*(7.5625*(y$_-=2.25/2.75)*y$_+.9375)+y$c:y$e*(7.5625*(y$_-=2.625/2.75)*y$_+.984375)+y$c},y$O.backIn=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$X&&(y$X=1.70158),y$e*(y$_/=y$Z)*y$_*((y$X+1)*y$_-y$X)+y$c},y$O.backInOut=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$X&&(y$X=1.70158),(y$_/=.5*y$Z)<1?.5*y$e*(y$_*y$_*((1+(y$X*=1.525))*y$_-y$X))+y$c:y$e/2*((y$_-=2)*y$_*((1+(y$X*=1.525))*y$_+y$X)+2)+y$c},y$O.backOut=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$X&&(y$X=1.70158),y$e*((y$_=y$_/y$Z-1)*y$_*((y$X+1)*y$_+y$X)+1)+y$c},y$O.elasticIn=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P;return void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=0),0==y$_?y$c:1==(y$_/=y$Z)?y$c+y$e:(y$u||(y$u=.3*y$Z),y$P=!y$X||0<y$e&&y$X<y$e||y$e<0&&y$X<-y$e?(y$X=y$e,y$u/4):y$u/y$O.PI2*Math.asin(y$e/y$X),-y$X*Math.pow(2,10*(y$_-=1))*Math.sin((y$_*y$Z-y$P)*y$O.PI2/y$u)+y$c)},y$O.elasticInOut=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P;return void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=0),0==y$_?y$c:2==(y$_/=.5*y$Z)?y$c+y$e:(y$u||(y$u=y$Z*(.3*1.5)),y$P=!y$X||0<y$e&&y$X<y$e||y$e<0&&y$X<-y$e?(y$X=y$e,y$u/4):y$u/y$O.PI2*Math.asin(y$e/y$X),y$_<1?y$X*Math.pow(2,10*(y$_-=1))*Math.sin((y$_*y$Z-y$P)*y$O.PI2/y$u)*-.5+y$c:y$X*Math.pow(2,-10*(y$_-=1))*Math.sin((y$_*y$Z-y$P)*y$O.PI2/y$u)*.5+y$e+y$c)},y$O.elasticOut=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P;return void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=0),0==y$_?y$c:1==(y$_/=y$Z)?y$c+y$e:(y$u||(y$u=.3*y$Z),y$P=!y$X||0<y$e&&y$X<y$e||y$e<0&&y$X<-y$e?(y$X=y$e,y$u/4):y$u/y$O.PI2*Math.asin(y$e/y$X),y$X*Math.pow(2,-10*y$_)*Math.sin((y$_*y$Z-y$P)*y$O.PI2/y$u)+y$e+y$c)},y$O.strongIn=function(y$_,y$c,y$e,y$Z){return y$e*(y$_/=y$Z)*y$_*y$_*y$_*y$_+y$c},y$O.strongInOut=function(y$_,y$c,y$e,y$Z){return(y$_/=.5*y$Z)<1?.5*y$e*y$_*y$_*y$_*y$_*y$_+y$c:.5*y$e*((y$_-=2)*y$_*y$_*y$_*y$_+2)+y$c},y$O.strongOut=function(y$_,y$c,y$e,y$Z){return y$e*((y$_=y$_/y$Z-1)*y$_*y$_*y$_*y$_+1)+y$c},y$O.sineInOut=function(y$_,y$c,y$e,y$Z){return.5*-y$e*(Math.cos(Math.PI*y$_/y$Z)-1)+y$c},y$O.sineIn=function(y$_,y$c,y$e,y$Z){return-y$e*Math.cos(y$_/y$Z*y$O.HALF_PI)+y$e+y$c},y$O.sineOut=function(y$_,y$c,y$e,y$Z){return y$e*Math.sin(y$_/y$Z*y$O.HALF_PI)+y$c},y$O.quintIn=function(y$_,y$c,y$e,y$Z){return y$e*(y$_/=y$Z)*y$_*y$_*y$_*y$_+y$c},y$O.quintInOut=function(y$_,y$c,y$e,y$Z){return(y$_/=.5*y$Z)<1?.5*y$e*y$_*y$_*y$_*y$_*y$_+y$c:.5*y$e*((y$_-=2)*y$_*y$_*y$_*y$_+2)+y$c},y$O.quintOut=function(y$_,y$c,y$e,y$Z){return y$e*((y$_=y$_/y$Z-1)*y$_*y$_*y$_*y$_+1)+y$c},y$O.quartIn=function(y$_,y$c,y$e,y$Z){return y$e*(y$_/=y$Z)*y$_*y$_*y$_+y$c},y$O.quartInOut=function(y$_,y$c,y$e,y$Z){return(y$_/=.5*y$Z)<1?.5*y$e*y$_*y$_*y$_*y$_+y$c:.5*-y$e*((y$_-=2)*y$_*y$_*y$_-2)+y$c},y$O.quartOut=function(y$_,y$c,y$e,y$Z){return-y$e*((y$_=y$_/y$Z-1)*y$_*y$_*y$_-1)+y$c},y$O.cubicIn=function(y$_,y$c,y$e,y$Z){return y$e*(y$_/=y$Z)*y$_*y$_+y$c},y$O.cubicInOut=function(y$_,y$c,y$e,y$Z){return(y$_/=.5*y$Z)<1?.5*y$e*y$_*y$_*y$_+y$c:.5*y$e*((y$_-=2)*y$_*y$_+2)+y$c},y$O.cubicOut=function(y$_,y$c,y$e,y$Z){return y$e*((y$_=y$_/y$Z-1)*y$_*y$_+1)+y$c},y$O.quadIn=function(y$_,y$c,y$e,y$Z){return y$e*(y$_/=y$Z)*y$_+y$c},y$O.quadInOut=function(y$_,y$c,y$e,y$Z){return(y$_/=.5*y$Z)<1?.5*y$e*y$_*y$_+y$c:.5*-y$e*(--y$_*(y$_-2)-1)+y$c},y$O.quadOut=function(y$_,y$c,y$e,y$Z){return-y$e*(y$_/=y$Z)*(y$_-2)+y$c},y$O.expoIn=function(y$_,y$c,y$e,y$Z){return 0==y$_?y$c:y$e*Math.pow(2,10*(y$_/y$Z-1))+y$c-.001*y$e},y$O.expoInOut=function(y$_,y$c,y$e,y$Z){return 0==y$_?y$c:y$_==y$Z?y$c+y$e:(y$_/=.5*y$Z)<1?.5*y$e*Math.pow(2,10*(y$_-1))+y$c:.5*y$e*(2-Math.pow(2,-10*--y$_))+y$c},y$O.expoOut=function(y$_,y$c,y$e,y$Z){return y$_==y$Z?y$c+y$e:y$e*(1-Math.pow(2,-10*y$_/y$Z))+y$c},y$O.circIn=function(y$_,y$c,y$e,y$Z){return-y$e*(Math.sqrt(1-(y$_/=y$Z)*y$_)-1)+y$c},y$O.circInOut=function(y$_,y$c,y$e,y$Z){return(y$_/=.5*y$Z)<1?.5*-y$e*(Math.sqrt(1-y$_*y$_)-1)+y$c:.5*y$e*(Math.sqrt(1-(y$_-=2)*y$_)+1)+y$c},y$O.circOut=function(y$_,y$c,y$e,y$Z){return y$e*Math.sqrt(1-(y$_=y$_/y$Z-1)*y$_)+y$c},y$O.HALF_PI=.5*Math.PI,y$O.PI2=2*Math.PI,y$O}(),y$N=function(){function y$H(){this._hit=null,this._unHit=null}y$m(y$H,"laya.utils.HitArea");var y$_=y$H.prototype;return y$_.isHit=function(y$_,y$c){return!!y$H.isHitGraphic(y$_,y$c,this.hit)&&!y$H.isHitGraphic(y$_,y$c,this.unHit)},y$_.contains=function(y$_,y$c){return this.isHit(y$_,y$c)},y$U(0,y$_,"hit",function(){return this._hit||(this._hit=new y$B),this._hit},function(y$_){this._hit=y$_}),y$U(0,y$_,"unHit",function(){return this._unHit||(this._unHit=new y$B),this._unHit},function(y$_){this._unHit=y$_}),y$H.isHitGraphic=function(y$_,y$c,y$e){if(!y$e)return!1;var y$Z;if(!(y$Z=y$e.cmds)&&y$e._one&&((y$Z=y$H._cmds).length=1,y$Z[0]=y$e._one),!y$Z)return!1;var y$X,y$u,y$P=0;for(y$X=y$Z.length,y$P=0;y$P<y$X;y$P++)if(y$u=y$Z[y$P]){var y$O=y$R._context;switch(y$u.callee){case y$O._translate:case 6:y$_-=y$u[0],y$c-=y$u[1]}if(y$H.isHitCmd(y$_,y$c,y$u))return!0}return!1},y$H.isHitCmd=function(y$_,y$c,y$e){if(!y$e)return!1;var y$Z=y$R._context,y$X=!1;switch(y$e.callee){case y$Z._drawRect:case 13:y$H._rec.setTo(y$e[0],y$e[1],y$e[2],y$e[3]),y$X=y$H._rec.contains(y$_,y$c);break;case y$Z._drawCircle:case y$Z._fillCircle:case 14:y$X=(y$_-=y$e[0])*y$_+(y$c-=y$e[1])*y$c<y$e[2]*y$e[2];break;case y$Z._drawPoly:case 18:y$_-=y$e[0],y$c-=y$e[1],y$X=y$H.ptInPolygon(y$_,y$c,y$e[2])}return y$X},y$H.ptInPolygon=function(y$_,y$c,y$e){var y$Z;(y$Z=y$H._ptPoint).setTo(y$_,y$c);var y$X,y$u=0,y$P=NaN,y$O=NaN,y$s=NaN,y$n=NaN;y$X=y$e.length;for(var y$m=0;y$m<y$X;y$m+=2){if(y$P=y$e[y$m],y$O=y$e[y$m+1],y$s=y$e[(y$m+2)%y$X],y$O!=(y$n=y$e[(y$m+3)%y$X]))if(!(y$Z.y<Math.min(y$O,y$n)))if(!(y$Z.y>=Math.max(y$O,y$n)))(y$Z.y-y$O)*(y$s-y$P)/(y$n-y$O)+y$P>y$Z.x&&y$u++}return y$u%2==1},y$H._cmds=[],y$s(y$H,["_rec",function(){return this._rec=new y$A},"_ptPoint",function(){return this._ptPoint=new y$f}]),y$H}(),y$V=(function(){function y$X(y$_,y$c,y$e,y$Z){this.char=y$_,this.charNum=y$_.charCodeAt(0),this._x=this._y=0,this.width=y$c,this.height=y$e,this.style=y$Z,this.isWord=!y$X._isWordRegExp.test(y$_)}y$m(y$X,"laya.utils.HTMLChar");var y$_=y$X.prototype;y$M.imps(y$_,{"laya.display.ILayout":!0}),y$_.setSprite=function(y$_){this._sprite=y$_},y$_.getSprite=function(){return this._sprite},y$_._isChar=function(){return!0},y$_._getCSSStyle=function(){return this.style},y$U(0,y$_,"width",function(){return this._w},function(y$_){this._w=y$_}),y$U(0,y$_,"x",function(){return this._x},function(y$_){this._sprite&&(this._sprite.x=y$_),this._x=y$_}),y$U(0,y$_,"y",function(){return this._y},function(y$_){this._sprite&&(this._sprite.y=y$_),this._y=y$_}),y$U(0,y$_,"height",function(){return this._h},function(y$_){this._h=y$_}),y$X._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function y$c(){}y$m(y$c,"laya.utils.Log"),y$c.enable=function(){y$c._logdiv||(y$c._logdiv=y$p.window.document.createElement("div"),y$p.window.document.body.appendChild(y$c._logdiv),y$c._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},y$c.toggle=function(){var y$_=y$c._logdiv.style;"1px"==y$_.width?y$_.width=y$_.height="50%":y$_.width=y$_.height="1px"},y$c.print=function(y$_){y$c._logdiv&&(y$c.maxCount<=y$c._count&&y$c.clear(),y$c._count++,y$c._logdiv.innerText+=y$_+"\n",y$c._logdiv.scrollTop=y$c._logdiv.scrollHeight)},y$c.clear=function(){y$c._logdiv.innerText="",y$c._count=0},y$c._logdiv=null,y$c._count=0,y$c.maxCount=20}(),function(){function y$c(){}y$m(y$c,"laya.utils.Mouse"),y$U(1,y$c,"cursor",function(){return y$c._style.cursor},function(y$_){y$c._style.cursor=y$_}),y$c.hide=function(){"none"!=y$c.cursor&&(y$c._preCursor=y$c.cursor,y$c.cursor="none")},y$c.show=function(){"none"==y$c.cursor&&(y$c.cursor=y$c._preCursor?y$c._preCursor:"auto")},y$c._preCursor=null,y$s(y$c,["_style",function(){return this._style=y$p.document.body.style}])}(),function(){function y$u(){}return y$m(y$u,"laya.utils.Pool"),y$u.getPoolBySign=function(y$_){return y$u._poolDic[y$_]||(y$u._poolDic[y$_]=[])},y$u.clearBySign=function(y$_){y$u._poolDic[y$_]&&(y$u._poolDic[y$_].length=0)},y$u.recover=function(y$_,y$c){y$c.__InPool||(y$c.__InPool=!0,y$u.getPoolBySign(y$_).push(y$c))},y$u.getItemByClass=function(y$_,y$c){var y$e=y$u.getPoolBySign(y$_),y$Z=y$e.length?y$e.pop():new y$c;return y$Z.__InPool=!1,y$Z},y$u.getItemByCreateFun=function(y$_,y$c,y$e){var y$Z=y$u.getPoolBySign(y$_),y$X=y$Z.length?y$Z.pop():y$c.call(y$e);return y$X.__InPool=!1,y$X},y$u.getItem=function(y$_){var y$c=y$u.getPoolBySign(y$_),y$e=y$c.length?y$c.pop():null;return y$e&&(y$e.__InPool=!1),y$e},y$u._poolDic={},y$u.InPoolSign="__InPool",y$u}()),y$g=function(){function y$s(){}return y$m(y$s,"laya.utils.Stat"),y$U(1,y$s,"onclick",null,function(y$_){y$s._sp&&y$s._sp.on("click",y$s._sp,y$_),y$s._canvas&&(y$s._canvas.source.onclick=y$_,y$s._canvas.source.style.pointerEvents="")}),y$s.show=function(y$_,y$c,y$e){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),!y$R.isConchApp||y$R.isConchWebGL){if(y$R.isConchWebGL||y$p.onMiniGame||y$p.onLimixiu||(y$s._useCanvas=!0),y$s._show=!0,y$s._fpsData.length=60,y$s._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},y$s._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},y$s._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},y$s._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},y$R.isWebGL)if(y$s._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},y$R.is3DMode){if(y$s._view[0].title="FPS(3D)",y$s._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},y$s._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},y$s._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==y$e){var y$Z=8;y$s._view[y$Z++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},y$s._view[y$Z++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},y$s._view[y$Z++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},y$s._view[y$Z++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},y$s._view[y$Z++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},y$s._view[y$Z++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},y$s._view[y$Z++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},y$s._view[y$Z++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},y$s._view[y$Z++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==y$e){y$Z=8;y$s._view[y$Z++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},y$s._view[y$Z++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},y$s._view[y$Z++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},y$s._view[y$Z++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},y$s._view[y$Z++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},y$s._view[y$Z++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},y$s._view[y$Z++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else y$s._view[0].title="FPS(WebGL)",y$s._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else y$s._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};y$s._useCanvas?y$s.createUIPre(y$_,y$c):y$s.createUI(y$_,y$c),y$s.enable()}else y$p.window.conch.showFPS&&y$p.window.conch.showFPS(y$_,y$c)},y$s.createUIPre=function(y$_,y$c){var y$e=y$p.pixelRatio;y$s._width=170*y$e,y$s._vx=75*y$e,y$s._height=y$e*(12*y$s._view.length+3*y$e)+4,y$s._fontSize=12*y$e;for(var y$Z=0;y$Z<y$s._view.length;y$Z++)y$s._view[y$Z].x=4,y$s._view[y$Z].y=y$Z*y$s._fontSize+2*y$e;y$s._canvas||((y$s._canvas=new y$z_("2D")).size(y$s._width,y$s._height),(y$s._ctx=y$s._canvas.getContext("2d")).textBaseline="top",y$s._ctx.font=y$s._fontSize+"px Sans-serif",y$s._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+y$_+"px;top:"+y$c+"px;width:"+y$s._width/y$e+"px;height:"+y$s._height/y$e+"px;"),y$s._first=!0,y$s.loop(),y$s._first=!1,y$p.container.appendChild(y$s._canvas.source)},y$s.createUI=function(y$_,y$c){var y$e=y$s._sp,y$Z=y$p.pixelRatio;y$e||(y$e=new y$H_,(y$s._leftText=new y$a_).pos(5,5),y$s._leftText.color="#ffffff",y$e.addChild(y$s._leftText),(y$s._txt=new y$a_).pos(80*y$Z,5),y$s._txt.color="#ffffff",y$e.addChild(y$s._txt),y$s._sp=y$e),y$e.pos(y$_,y$c);for(var y$X="",y$u=0;y$u<y$s._view.length;y$u++){y$X+=y$s._view[y$u].title+"\n"}y$s._leftText.text=y$X;var y$P=170*y$Z,y$O=y$Z*(12*y$s._view.length+3*y$Z)+4;y$s._txt.fontSize=y$s._fontSize*y$Z,y$s._leftText.fontSize=y$s._fontSize*y$Z,y$e.size(y$P,y$O),y$e.graphics.clear(),y$e.graphics.setAlpha(.5),y$e.graphics.drawRect(0,0,y$P,y$O,"#999999"),y$e.graphics.setAlpha(1),y$s.loop()},y$s.enable=function(){y$M.timer.frameLoop(1,y$s,y$s.loop)},y$s.hide=function(){y$s._show=!1,y$M.timer.clear(y$s,y$s.loop),y$s._canvas&&y$p.removeElement(y$s._canvas.source)},y$s.clear=function(){y$s.trianglesFaces=y$s.drawCall=y$s.shaderCall=y$s.spriteCount=y$s.spriteRenderUseCacheCount=y$s.treeNodeCollision=y$s.treeSpriteCollision=y$s.canvasNormal=y$s.canvasBitmap=y$s.canvasReCache=0},y$s.loop=function(){y$s._count++;var y$_=y$p.now();if(!(y$_-y$s._timer<1e3)){var y$c=y$s._count;if(y$s.FPS=Math.round(1e3*y$c/(y$_-y$s._timer)),y$s._show){y$s.trianglesFaces=Math.round(y$s.trianglesFaces/y$c),y$s.spriteCount=y$s._useCanvas?(y$s.drawCall=Math.round(y$s.drawCall/y$c)-2,y$s.shaderCall=Math.round(y$s.shaderCall/y$c),Math.round(y$s.spriteCount/y$c)-1):(y$s.drawCall=Math.round(y$s.drawCall/y$c)-2,y$s.shaderCall=Math.round(y$s.shaderCall/y$c)-4,Math.round(y$s.spriteCount/y$c)-4),y$s.spriteRenderUseCacheCount=Math.round(y$s.spriteRenderUseCacheCount/y$c),y$s.canvasNormal=Math.round(y$s.canvasNormal/y$c),y$s.canvasBitmap=Math.round(y$s.canvasBitmap/y$c),y$s.canvasReCache=Math.ceil(y$s.canvasReCache/y$c),y$s.treeNodeCollision=Math.round(y$s.treeNodeCollision/y$c),y$s.treeSpriteCollision=Math.round(y$s.treeSpriteCollision/y$c);var y$e=0<y$s.FPS?Math.floor(1e3/y$s.FPS).toString():" ";y$s._fpsStr=y$s.FPS+(y$s.renderSlow?" slow":"")+" "+y$e,y$s._spriteStr=y$s.spriteCount+(y$s.spriteRenderUseCacheCount?"/"+y$s.spriteRenderUseCacheCount:""),y$s._canvasStr=y$s.canvasReCache+"/"+y$s.canvasNormal+"/"+y$s.canvasBitmap,y$s.currentMemorySize=y$Y.systemResourceManager.memorySize,y$s._useCanvas?y$s.renderInfoPre():y$s.renderInfo(),y$s.clear()}y$s._count=0,y$s._timer=y$_}},y$s.renderInfoPre=function(){if(y$s._canvas){var y$_=y$s._ctx;y$_.clearRect(y$s._first?0:y$s._vx,0,y$s._width,y$s._height);for(var y$c=y$R.WebGL.mainContext,y$e=0;y$e<y$s._view.length;y$e++){var y$Z=y$s._view[y$e];y$s._first&&(y$_.fillStyle="white",y$_.fillText(y$Z.title,y$Z.x,y$Z.y,null,null,null)),y$_.fillStyle=y$Z.color;var y$X=-1;if((y$Z=y$s._view[y$e]).varying){if(y$c)switch(y$Z.varying){case 1:y$X=y$c.getParameter(y$c[y$Z.value]);break;case 2:y$X=y$c.getExtension(y$Z.value)}}else y$X=y$s[y$Z.value];"M"==y$Z.units&&(y$X=Math.floor(y$X/1048576*100)/100+" M"),"K"==y$Z.units&&(y$X=Math.floor(y$X/1024*100)/100+" K"),"string"==y$Z.units&&(y$X=y$X.match(/\d+\.?\d/i)),y$_.fillText(y$X+"",y$Z.x+y$s._vx,y$Z.y,null,null,null)}}},y$s.renderInfo=function(){for(var y$_="",y$c=y$R.WebGL.mainContext,y$e=0;y$e<y$s._view.length;y$e++){var y$Z=y$s._view[y$e],y$X=-1;if(y$Z.varying){if(y$c)switch(y$Z.varying){case 1:y$X=y$c.getParameter(y$c[y$Z.value]);break;case 2:y$X=y$c.getExtension(y$Z.value)}}else y$X=y$s[y$Z.value];"M"==y$Z.units&&(y$X=Math.floor(y$X/1048576*100)/100+" M"),"K"==y$Z.units&&(y$X=Math.floor(y$X/1024*100)/100+" K"),"string"==y$Z.units&&(y$X=y$X.match(/\d+\.?\d/i)),y$_+=y$X+"\n"}y$s._txt.text=y$_},y$s.FPS=0,y$s.loopCount=0,y$s.shaderCall=0,y$s.drawCall=0,y$s.trianglesFaces=0,y$s.spriteCount=0,y$s.spriteRenderUseCacheCount=0,y$s.treeNodeCollision=0,y$s.treeSpriteCollision=0,y$s.canvasNormal=0,y$s.canvasBitmap=0,y$s.canvasReCache=0,y$s.renderSlow=!1,y$s.currentMemorySize=0,y$s._fpsStr=null,y$s._canvasStr=null,y$s._spriteStr=null,y$s._fpsData=[],y$s._timer=0,y$s._count=0,y$s._view=[],y$s._fontSize=12,y$s._txt=null,y$s._leftText=null,y$s._sp=null,y$s._show=!1,y$s._useCanvas=!1,y$s._canvas=null,y$s._ctx=null,y$s._first=!1,y$s._vx=NaN,y$s._width=0,y$s._height=100,y$s}(),y$S=(function(){function y$_(){this._strsToID={},this._idToStrs=[],this._length=0}y$m(y$_,"laya.utils.StringKey");var y$c=y$_.prototype;y$c.add=function(y$_){var y$c=this._strsToID[y$_];return null!=y$c?y$c:(this._idToStrs[this._length]=y$_,this._strsToID[y$_]=this._length++)},y$c.getID=function(y$_){var y$c=this._strsToID[y$_];return null==y$c?-1:y$c},y$c.getName=function(y$_){var y$c=this._idToStrs[y$_];return null==y$c?void 0:y$c}}(),function(){var y$n;function y$_(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}y$m(y$_,"laya.utils.Timer");var y$c=y$_.prototype;return y$c._init=function(){y$M.timer&&y$M.timer.frameLoop(1,this,this._update)},y$c._now=function(){return Date.now()},y$c._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var y$_=this.currFrame=this.currFrame+this.scale,y$c=this._now();this._delta=(y$c-this._lastTimer)*this.scale;var y$e=this.currTimer=this.currTimer+this._delta;y$M.isDebug&&6e4<Math.abs(y$c-this._lastTimer)&&console.error("系统时间错误！"+(y$c-this._lastTimer)),this._lastTimer=y$c;var y$Z=this._handlers;for(y$P=this._count=0,y$O=y$Z.length;y$P<y$O;y$P++)if(null!==(y$s=y$Z[y$P]).method){var y$X=y$s.userFrame?y$_:y$e;if(y$X>=y$s.exeTime)if(y$s.repeat)if(y$s.jumpFrame)for(;y$X>=y$s.exeTime;)y$s.exeTime+=y$s.delay,y$s.run(!1);else y$s.exeTime+=y$s.delay,y$s.run(!1),y$X>y$s.exeTime&&(y$s.exeTime+=Math.ceil((y$X-y$s.exeTime)/y$s.delay)*y$s.delay);else y$s.run(!0)}else this._count++;(30<this._count||y$_%200==0)&&this._clearHandlers();for(var y$u=this._laters,y$P=0,y$O=y$u.length-1;y$P<=y$O;y$P++){var y$s=y$u[y$P];this._isIgnoreRecover(y$s)||(null!==y$s.method&&(delete this._map[y$s.key],y$s.run(!1)),this._recoverHandler(y$s)),y$P===y$O&&(y$O=y$u.length-1)}y$u.length=0}},y$c._clearHandlers=function(){for(var y$_=this._handlers,y$c=0,y$e=y$_.length;y$c<y$e;y$c++){var y$Z=y$_[y$c];null!==y$Z.method?this._temp.push(y$Z):this._isIgnoreRecover(y$Z)?this._temp.push(y$Z):this._recoverHandler(y$Z)}this._handlers=this._temp,this._temp=y$_,this._temp.length=0},y$c._recoverHandler=function(y$_){this._map[y$_.key]==y$_&&delete this._map[y$_.key],y$_.recover()},y$c._create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){if(!y$e)return y$X.apply(y$Z,y$u),null;if(y$P){var y$s=this._getHandler(y$Z,y$X);if(y$s)return y$s.repeat=y$c,y$s.userFrame=y$_,y$s.delay=y$e,y$s.ignoreRecover=y$O,y$s.caller=y$Z,y$s.method=y$X,y$s.args=y$u,y$s.exeTime=y$e+(y$_?this.currFrame:this.currTimer+this._now()-this._lastTimer),y$s}return(y$s=y$n.create()).repeat=y$c,y$s.userFrame=y$_,y$s.delay=y$e,y$s.ignoreRecover=y$O,y$s.caller=y$Z,y$s.method=y$X,y$s.args=y$u,y$s.exeTime=y$e+(y$_?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(y$s),this._handlers.push(y$s),y$s},y$c._indexHandler=function(y$_){var y$c=y$_.caller,y$e=y$_.method,y$Z=y$c?y$c.$_GID||(y$c.$_GID=y$W.getGID()):0,y$X=y$e.$_TID||(y$e.$_TID=this._mid++);y$_.key=y$Z+"_"+y$X,this._map[y$_.key]=y$_},y$c.once=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=!0),this._create(!1,!1,y$_,y$c,y$e,y$Z,y$X,!1)},y$c.loop=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){void 0===y$X&&(y$X=!0),void 0===y$u&&(y$u=!1),void 0===y$P&&(y$P=!1);var y$O=this._create(!1,!0,y$_,y$c,y$e,y$Z,y$X,y$P);y$O&&(y$O.jumpFrame=y$u)},y$c.frameOnce=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=!0),this._create(!0,!1,y$_,y$c,y$e,y$Z,y$X,!1)},y$c.frameLoop=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$X&&(y$X=!0),void 0===y$u&&(y$u=!1),this._create(!0,!0,y$_,y$c,y$e,y$Z,y$X,y$u)},y$c.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+y$n._freeCount},y$c.clear=function(y$_,y$c){var y$e=this._getHandler(y$_,y$c);return!(!y$e||this._isIgnoreRecover(y$e))&&(delete this._map[y$e.key],y$e.key=null,y$e.clear(),!0)},y$c.clearAll=function(y$_){if(y$_)for(var y$c=0,y$e=this._handlers.length;y$c<y$e;y$c++){var y$Z=this._handlers[y$c];y$Z.caller===y$_&&(this._isIgnoreRecover(y$Z)||(delete this._map[y$Z.key],y$Z.key=null,y$Z.clear()))}},y$c._getHandler=function(y$_,y$c){var y$e=y$_?y$_.$_GID||(y$_.$_GID=y$W.getGID()):0,y$Z=y$c.$_TID||(y$c.$_TID=this._mid++);return this._map[y$e+"_"+y$Z]},y$c._isIgnoreRecover=function(y$_){if(y$_.ignoreRecover||y$_.caller&&"IgnoreRecover"==y$_.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var y$c="";try{arguments.propertyIsEnumerable.caller}catch(y$_){y$c=y$_.stack}y$M.recordError("报错：核心定时器销毁忽略  "+y$c)}return!0}return!1},y$c.hasHandler=function(y$_,y$c){return this._map[y$_.$_GID+"_"+y$c.$_TID]},y$c.callLater=function(y$_,y$c,y$e){if(null==this._getHandler(y$_,y$c)){var y$Z=y$n.create();y$Z.caller=y$_,y$Z.method=y$c,y$Z.args=y$e,this._indexHandler(y$Z),this._laters.push(y$Z)}},y$c.runCallLater=function(y$_,y$c){var y$e=this._getHandler(y$_,y$c);y$e&&null!=y$e.method&&(this._isIgnoreRecover(y$e)||(delete this._map[y$e.key],y$e.run(!0)))},y$c.runTimer=function(y$_,y$c){this.runCallLater(y$_,y$c)},y$U(0,y$c,"delta",function(){return this._delta}),y$_.__init$=function(){y$n=function(){function y$c(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}y$m(y$c,"");var y$_=y$c.prototype;return y$_.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},y$_.recover=function(){this.clear(),this.args=y$c._freeHandler,y$c._freeHandler=this,y$c._freeCount++},y$_.run=function(y$_){var y$c=this.caller;if(y$c&&y$c.destroyed)return this.clear();var y$e=this.method,y$Z=this.args;y$_&&this.clear(),null!=y$e&&(y$Z?y$e.apply(y$c,y$Z):y$e.call(y$c))},y$c._freeHandler=null,y$c._freeCount=0,y$c.create=function(){var y$_=y$c._freeHandler;return y$_?(y$c._freeHandler=y$_.args,--y$c._freeCount,y$_.args=null,y$_):new y$c},y$c}()},y$_}()),y$E=function(){function y$H(){this.gid=0}y$m(y$H,"laya.utils.Tween");var y$_=y$H.prototype;return y$_.to=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){return void 0===y$u&&(y$u=0),void 0===y$P&&(y$P=!1),this._create(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,!0,!1,!0)},y$_.from=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){return void 0===y$u&&(y$u=0),void 0===y$P&&(y$P=!1),this._create(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,!1,!1,!0)},y$_._create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){if(!y$_)throw new Error("Tween:target is null");this._target=y$_,this._duration=y$e,this._ease=y$Z||y$c.ease||y$H.easeNone,this._complete=y$X||y$c.complete,this._delay=y$u,this._props=[],this._usedTimer=0,this._startTimer=y$p.now(),this._usedPool=y$s,this._delayParam=null,this.update=y$c.update;var y$m=y$_.$_GID||(y$_.$_GID=y$W.getGID());return y$H.tweenMap[y$m]?(y$P&&y$H.clearTween(y$_),y$H.tweenMap[y$m].push(this)):y$H.tweenMap[y$m]=[this],y$n?y$u<=0?this.firstStart(y$_,y$c,y$O):(this._delayParam=[y$_,y$c,y$O],y$M.scaleTimer.once(y$u,this,this.firstStart,this._delayParam)):this._initProps(y$_,y$c,y$O),this},y$_.firstStart=function(y$_,y$c,y$e){this._delayParam=null,y$_.destroyed?this.clear():(this._initProps(y$_,y$c,y$e),this._beginLoop())},y$_._initProps=function(y$_,y$c,y$e){for(var y$Z in y$c)if("number"==typeof y$_[y$Z]){var y$X=y$e?y$_[y$Z]:y$c[y$Z],y$u=y$e?y$c[y$Z]:y$_[y$Z];this._props.push([y$Z,y$X,y$u-y$X]),y$e||(y$_[y$Z]=y$X)}},y$_._beginLoop=function(){y$M.scaleTimer.frameLoop(1,this,this._doEase)},y$_._doEase=function(){this._updateEase(y$p.now())},y$_._updateEase=function(y$_){var y$c=this._target;if(y$c){if(y$c.destroyed)return y$H.clearTween(y$c);var y$e=this._usedTimer=y$_-this._startTimer-this._delay;if(!(y$e<0)){if(y$e>=this._duration)return this.complete();for(var y$Z=0<y$e?this._ease(y$e,0,1,this._duration):0,y$X=this._props,y$u=0,y$P=y$X.length;y$u<y$P;y$u++){var y$O=y$X[y$u];y$c[y$O[0]]=y$O[1]+y$Z*y$O[2]}this.update&&this.update.run()}}},y$_.complete=function(){if(this._target){y$M.scaleTimer.runTimer(this,this.firstStart);for(var y$_=this._target,y$c=this._props,y$e=this._complete,y$Z=0,y$X=y$c.length;y$Z<y$X;y$Z++){var y$u=y$c[y$Z];y$_[y$u[0]]=y$u[1]+y$u[2]}this.update&&this.update.run(),this.clear(),y$e&&y$e.run()}},y$_.pause=function(){y$M.scaleTimer.clear(this,this._beginLoop),y$M.scaleTimer.clear(this,this._doEase),y$M.scaleTimer.clear(this,this.firstStart);var y$_;(y$_=y$p.now()-this._startTimer-this._delay)<0&&(this._usedTimer=y$_)},y$_.setStartTime=function(y$_){this._startTimer=y$_},y$_.clear=function(){this._target&&(this._remove(),this._clear())},y$_._clear=function(){this.pause(),y$M.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,y$V.recover("tween",this))},y$_.recover=function(){this._usedPool=!0,this._clear()},y$_._remove=function(){var y$_=y$H.tweenMap[this._target.$_GID];if(y$_)for(var y$c=0,y$e=y$_.length;y$c<y$e;y$c++)if(y$_[y$c]===this){y$_.splice(y$c,1);break}},y$_.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=y$p.now(),this._delayParam)y$M.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var y$_=this._props,y$c=0,y$e=y$_.length;y$c<y$e;y$c++){var y$Z=y$_[y$c];this._target[y$Z[0]]=y$Z[1]}y$M.scaleTimer.once(this._delay,this,this._beginLoop)}},y$_.resume=function(){this._usedTimer>=this._duration||(this._startTimer=y$p.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?y$M.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},y$U(0,y$_,"progress",null,function(y$_){var y$c=y$_*this._duration;this._startTimer=y$p.now()-this._delay-y$c}),y$H.to=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){return void 0===y$u&&(y$u=0),void 0===y$P&&(y$P=!1),void 0===y$O&&(y$O=!0),y$V.getItemByClass("tween",y$H)._create(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,!0,y$O,!0)},y$H.from=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){return void 0===y$u&&(y$u=0),void 0===y$P&&(y$P=!1),void 0===y$O&&(y$O=!0),y$V.getItemByClass("tween",y$H)._create(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,!1,y$O,!0)},y$H.clearAll=function(y$_){if(y$_&&y$_.$_GID){var y$c=y$H.tweenMap[y$_.$_GID];if(y$c){for(var y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++)y$c[y$e]._clear();y$c.length=0}}},y$H.clear=function(y$_){y$_.clear()},y$H.clearTween=function(y$_){y$H.clearAll(y$_)},y$H.easeNone=function(y$_,y$c,y$e,y$Z){return y$e*y$_/y$Z+y$c},y$H.tweenMap={},y$H}(),y$W=function(){function y$O(){}return y$m(y$O,"laya.utils.Utils"),y$O.toRadian=function(y$_){return y$_*y$O._pi2},y$O.toAngle=function(y$_){return y$_*y$O._pi},y$O.toHexColor=function(y$_){if(y$_<0||isNaN(y$_))return null;for(var y$c=y$_.toString(16);y$c.length<6;)y$c="0"+y$c;return"#"+y$c},y$O.getGID=function(){return y$O._gid++},y$O.concatArray=function(y$_,y$c){if(!y$c)return y$_;if(!y$_)return y$c;var y$e=0,y$Z=y$c.length;for(y$e=0;y$e<y$Z;y$e++)y$_.push(y$c[y$e]);return y$_},y$O.clearArray=function(y$_){return y$_&&(y$_.length=0),y$_},y$O.copyArray=function(y$_,y$c){if(y$_||(y$_=[]),!y$c)return y$_;y$_.length=y$c.length;var y$e=0,y$Z=y$c.length;for(y$e=0;y$e<y$Z;y$e++)y$_[y$e]=y$c[y$e];return y$_},y$O.getGlobalRecByPoints=function(y$_,y$c,y$e,y$Z,y$X){var y$u,y$P;return y$u=new y$f(y$c,y$e),y$u=y$_.localToGlobal(y$u),y$P=new y$f(y$Z,y$X),y$P=y$_.localToGlobal(y$P),y$A._getWrapRec([y$u.x,y$u.y,y$P.x,y$P.y])},y$O.getGlobalPosAndScale=function(y$_){return y$O.getGlobalRecByPoints(y$_,0,0,1,1)},y$O.bind=function(y$_,y$c){return y$_.bind(y$c)},y$O.measureText=function(y$_,y$c){return y$y.measureText(y$_,y$c)},y$O.updateOrder=function(y$_){if(!y$_||y$_.length<2)return!1;for(var y$c,y$e=1,y$Z=0,y$X=y$_.length,y$u=NaN;y$e<y$X;){for(y$c=y$_[y$Z=y$e],y$u=y$_[y$Z]._zOrder;-1<--y$Z&&y$_[y$Z]._zOrder>y$u;)y$_[y$Z+1]=y$_[y$Z];y$_[y$Z+1]=y$c,y$e++}var y$P=y$c.parent.conchModel;if(y$P)if(null!=y$P.updateZOrder)y$P.updateZOrder();else{for(y$e=0;y$e<y$X;y$e++)y$P.removeChild(y$_[y$e].conchModel);for(y$e=0;y$e<y$X;y$e++)y$P.addChildAt(y$_[y$e].conchModel,y$e)}return!0},y$O.transPointList=function(y$_,y$c,y$e){var y$Z=0,y$X=y$_.length;for(y$Z=0;y$Z<y$X;y$Z+=2)y$_[y$Z]+=y$c,y$_[y$Z+1]+=y$e},y$O.parseInt=function(y$_,y$c){void 0===y$c&&(y$c=0);var y$e=y$p.window.parseInt(y$_,y$c);return isNaN(y$e)?0:y$e},y$O.getFileExtension=function(y$_){y$O._extReg.lastIndex=y$_.lastIndexOf(".");var y$c=y$O._extReg.exec(y$_);return y$c&&1<y$c.length?y$c[1].toLowerCase():null},y$O.getTransformRelativeToWindow=function(y$_,y$c,y$e){var y$Z=y$M.stage,y$X=laya.utils.Utils.getGlobalPosAndScale(y$_),y$u=y$Z._canvasTransform.clone(),y$P=y$u.tx,y$O=y$u.ty;y$u.rotate(-Math.PI/180*y$M.stage.canvasDegree),y$u.scale(y$M.stage.clientScaleX,y$M.stage.clientScaleY);var y$s=y$M.stage.canvasDegree%180!=0,y$n=NaN,y$m=NaN;y$s?(y$n=y$e+y$X.y,y$m=y$c+y$X.x,y$n*=y$u.d,y$m*=y$u.a,90==y$M.stage.canvasDegree?(y$n=y$P-y$n,y$m+=y$O):(y$n+=y$P,y$m=y$O-y$m)):(y$n=y$c+y$X.x,y$m=y$e+y$X.y,y$n*=y$u.a,y$m*=y$u.d,y$n+=y$P,y$m+=y$O);var y$H=NaN,y$B=NaN;return y$B=y$s?(y$H=y$u.d*y$X.height,y$u.a*y$X.width):(y$H=y$u.a*y$X.width,y$u.d*y$X.height),{x:y$n,y:y$m,scaleX:y$H,scaleY:y$B}},y$O.fitDOMElementInArea=function(y$_,y$c,y$e,y$Z,y$X,y$u){y$_._fitLayaAirInitialized||(y$_._fitLayaAirInitialized=!0,y$_.style.transformOrigin=y$_.style.webKittransformOrigin="left top",y$_.style.position="absolute");var y$P=y$O.getTransformRelativeToWindow(y$c,y$e,y$Z);y$_.style.transform=y$_.style.webkitTransform="scale("+y$P.scaleX+","+y$P.scaleY+") rotate("+y$M.stage.canvasDegree+"deg)",y$_.style.width=y$X+"px",y$_.style.height=y$u+"px",y$_.style.left=y$P.x+"px",y$_.style.top=y$P.y+"px"},y$O.isOkTextureList=function(y$_){if(!y$_)return!1;var y$c,y$e=0,y$Z=y$_.length;for(y$e=0;y$e<y$Z;y$e++)if(!(y$c=y$_[y$e])||!y$c.source)return!1;return!0},y$O.isOKCmdList=function(y$_){if(!y$_)return!1;var y$c,y$e,y$Z=0,y$X=y$_.length,y$u=y$R._context;for(y$Z=0;y$Z<y$X;y$Z++)switch((y$c=y$_[y$Z]).callee){case y$u._drawTexture:case y$u._fillTexture:case y$u._drawTextureWithTransform:if(!(y$e=y$c[0])||!y$e.source)return!1}return!0},y$O._gid=1,y$O._pi=180/Math.PI,y$O._pi2=Math.PI/180,y$O._extReg=/\.(\w+)\??/g,y$O.parseXMLFromString=function(y$_){var y$c;if(y$_=y$_.replace(/>\s+</g,"><"),-1<(y$c=(new DOMParser).parseFromString(y$_,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(y$c.firstChild.firstChild.textContent);return y$c},y$O}(),y$l=function(){function y$_(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],y$R.isWebGL&&y$Q.regCacheByFunction(y$W.bind(this.startDispose,this),y$W.bind(this.getCacheList,this))}y$m(y$_,"laya.utils.VectorGraphManager");var y$c=y$_.prototype;return y$c.getId=function(){return this._id++},y$c.addShape=function(y$_,y$c){this.shapeDic[y$_]=y$c,this.useDic[y$_]||(this.useDic[y$_]=!0)},y$c.addLine=function(y$_,y$c){this.shapeLineDic[y$_]=y$c,this.shapeLineDic[y$_]||(this.shapeLineDic[y$_]=!0)},y$c.getShape=function(y$_){this._checkKey&&null!=this.useDic[y$_]&&(this.useDic[y$_]=!0)},y$c.deleteShape=function(y$_){this.shapeDic[y$_]&&(this.shapeDic[y$_]=null,delete this.shapeDic[y$_]),this.shapeLineDic[y$_]&&(this.shapeLineDic[y$_]=null,delete this.shapeLineDic[y$_]),null!=this.useDic[y$_]&&delete this.useDic[y$_]},y$c.getCacheList=function(){var y$_,y$c=[];for(y$_ in this.shapeDic)y$c.push(this.shapeDic[y$_]);for(y$_ in this.shapeLineDic)y$c.push(this.shapeLineDic[y$_]);return y$c},y$c.startDispose=function(y$_){var y$c;for(y$c in this.useDic)this.useDic[y$c]=!1;this._checkKey=!0},y$c.endDispose=function(){if(this._checkKey){var y$_;for(y$_ in this.useDic)this.useDic[y$_]||this.deleteShape(y$_);this._checkKey=!1}},y$_.getInstance=function(){return y$_.instance=y$_.instance||new y$_},y$_.instance=null,y$_}(),y$d=function(){function y$Z(){this._obj=null,this._obj=y$Z.supportWeakMap?new y$p.window.WeakMap:{},y$Z.supportWeakMap||y$Z._maps.push(this)}y$m(y$Z,"laya.utils.WeakObject");var y$_=y$Z.prototype;return y$_.set=function(y$_,y$c){if(null!=y$_)if(y$Z.supportWeakMap){var y$e=y$_;"string"!=typeof y$_&&"number"!=typeof y$_||(y$e=y$Z._keys[y$_])||(y$e=y$Z._keys[y$_]={k:y$_}),this._obj.set(y$e,y$c)}else"string"==typeof y$_||"number"==typeof y$_?this._obj[y$_]=y$c:(y$_.$_GID||(y$_.$_GID=y$W.getGID()),this._obj[y$_.$_GID]=y$c)},y$_.get=function(y$_){if(null==y$_)return null;if(y$Z.supportWeakMap){var y$c="string"==typeof y$_||"number"==typeof y$_?y$Z._keys[y$_]:y$_;return y$c?this._obj.get(y$c):null}return"string"==typeof y$_||"number"==typeof y$_?this._obj[y$_]:this._obj[y$_.$_GID]},y$_.del=function(y$_){if(null!=y$_)if(y$Z.supportWeakMap){var y$c="string"==typeof y$_||"number"==typeof y$_?y$Z._keys[y$_]:y$_;if(!y$c)return;this._obj.delete(y$c)}else"string"==typeof y$_||"number"==typeof y$_?delete this._obj[y$_]:delete this._obj[this._obj.$_GID]},y$_.has=function(y$_){if(null==y$_)return!1;if(y$Z.supportWeakMap){var y$c="string"==typeof y$_||"number"==typeof y$_?y$Z._keys[y$_]:y$_;return this._obj.has(y$c)}return"string"==typeof y$_||"number"==typeof y$_?null!=this._obj[y$_]:null!=this._obj[this._obj.$_GID]},y$Z.__init__=function(){(y$Z.supportWeakMap=null!=y$p.window.WeakMap)||y$M.timer.loop(y$Z.delInterval,null,y$Z.clearCache)},y$Z.clearCache=function(){for(var y$_=0,y$c=y$Z._maps.length;y$_<y$c;y$_++){y$Z._maps[y$_]._obj={}}},y$Z.supportWeakMap=!1,y$Z.delInterval=3e5,y$Z._keys={},y$Z._maps=[],y$s(y$Z,["I",function(){return this.I=new y$Z}]),y$Z}(),y$I=function(){function y$_(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}y$m(y$_,"laya.utils.WordText");var y$c=y$_.prototype;return y$c.setText=function(y$_){this.changed=!0,this._text=y$_},y$c.toString=function(){return this._text},y$c.charCodeAt=function(y$_){return this._text?this._text.charCodeAt(y$_):NaN},y$c.charAt=function(y$_){return this._text?this._text.charAt(y$_):null},y$U(0,y$c,"length",function(){return this._text?this._text.length:0}),y$_}(),y$__=function(y$_){function y$P(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,y$P.__super.call(this),this._childs=y$P.ARRAY_EMPTY,this._$P=y$P.PROP_EMPTY,this.timer=y$M.scaleTimer,this.conchModel=y$R.isConchNode?this.createConchModel():null}y$m(y$P,"laya.display.Node",y$n);var y$c=y$P.prototype;return y$c._setBit=function(y$_,y$c){1==y$_&&(this._getBit(y$_)!=y$c&&this._updateDisplayedInstage());y$c?this._bits|=y$_:this._bits&=~y$_},y$c._getBit=function(y$_){return 0!=(this._bits&y$_)},y$c._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},y$c._setUpNoticeType=function(y$_){var y$c=this;for(y$c._setBit(y$_,!0),y$c=y$c.parent;y$c;){if(y$c._getBit(y$_))return;y$c._setBit(y$_,!0),y$c=y$c.parent}},y$c.on=function(y$_,y$c,y$e,y$Z){return"display"!==y$_&&"undisplay"!==y$_||this._getBit(1)||this._setUpNoticeType(1),this._createListener(y$_,y$c,y$e,y$Z,!1)},y$c.once=function(y$_,y$c,y$e,y$Z){return"display"!==y$_&&"undisplay"!==y$_||this._getBit(1)||this._setUpNoticeType(1),this._createListener(y$_,y$c,y$e,y$Z,!0)},y$c.createConchModel=function(){return null},y$c.destroy=function(y$_){void 0===y$_&&(y$_=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(y$_?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},y$c.destroyChildren=function(){if(this._childs)for(var y$_=this._childs.length-1;-1<y$_;y$_--)this._childs[y$_].destroy(!0)},y$c.addChild=function(y$_){if(!y$_||this.destroyed||y$_===this)return y$_;if(y$_.zOrder&&this._set$P("hasZorder",!0),y$_._parent===this){var y$c=this.getChildIndex(y$_);y$c!==this._childs.length-1&&(this._childs.splice(y$c,1),this._childs.push(y$_),this.conchModel&&(this.conchModel.removeChild(y$_.conchModel),this.conchModel.addChildAt(y$_.conchModel,this._childs.length-1)),this._childChanged())}else y$_.parent&&y$_.parent.removeChild(y$_),this._childs===y$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(y$_),this.conchModel&&this.conchModel.addChildAt(y$_.conchModel,this._childs.length-1),(y$_.parent=this)._childChanged();return y$_},y$c.addChildren=function(y$_){for(var y$c=arguments,y$e=0,y$Z=y$c.length;y$e<y$Z;)this.addChild(y$c[y$e++])},y$c.addChildAt=function(y$_,y$c){if(!y$_||this.destroyed||y$_===this)return y$_;if(y$_.zOrder&&this._set$P("hasZorder",!0),0<=y$c&&y$c<=this._childs.length){if(y$_._parent===this){var y$e=this.getChildIndex(y$_);this._childs.splice(y$e,1),this._childs.splice(y$c,0,y$_),this.conchModel&&(this.conchModel.removeChild(y$_.conchModel),this.conchModel.addChildAt(y$_.conchModel,y$c)),this._childChanged()}else y$_.parent&&y$_.parent.removeChild(y$_),this._childs===y$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(y$c,0,y$_),this.conchModel&&this.conchModel.addChildAt(y$_.conchModel,y$c),y$_.parent=this;return y$_}throw new Error("appendChildAt:The index is out of bounds")},y$c.getChildIndex=function(y$_){return this._childs.indexOf(y$_)},y$c.getChildByName=function(y$_){var y$c=this._childs;if(y$c)for(var y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++){var y$X=y$c[y$e];if(y$X.name===y$_)return y$X}return null},y$c._get$P=function(y$_){return this._$P[y$_]},y$c._set$P=function(y$_,y$c){return this.destroyed||(this._$P===y$P.PROP_EMPTY&&(this._$P={}),this._$P[y$_]=y$c),y$c},y$c.getChildAt=function(y$_){return this._childs[y$_]},y$c.setChildIndex=function(y$_,y$c){var y$e=this._childs;if(y$c<0||y$c>=y$e.length)throw new Error("setChildIndex:The index is out of bounds.");var y$Z=this.getChildIndex(y$_);if(y$Z<0)throw new Error("setChildIndex:node is must child of this object.");return y$e.splice(y$Z,1),y$e.splice(y$c,0,y$_),this.conchModel&&(this.conchModel.removeChild(y$_.conchModel),this.conchModel.addChildAt(y$_.conchModel,y$c)),this._childChanged(),y$_},y$c._childChanged=function(y$_){},y$c.removeChild=function(y$_){if(!this._childs)return y$_;var y$c=this._childs.indexOf(y$_);return this.removeChildAt(y$c)},y$c.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},y$c.removeChildByName=function(y$_){var y$c=this.getChildByName(y$_);return y$c&&this.removeChild(y$c),y$c},y$c.removeChildAt=function(y$_){var y$c=this.getChildAt(y$_);if(y$c){for(var y$e=this._childs.length-1,y$Z=y$_;y$Z<y$e;++y$Z)this._childs[y$Z]=this._childs[y$Z+1];this._childs.length=y$e,this.conchModel&&this.conchModel.removeChild(y$c.conchModel),y$c.parent=null}return y$c},y$c.removeChildren=function(y$_,y$c){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=2147483647),this._childs&&0<this._childs.length){var y$e=this._childs;if(0===y$_&&y$u<=y$c){var y$Z=y$e;this._childs=y$P.ARRAY_EMPTY}else y$Z=y$e.splice(y$_,y$c-y$_);for(var y$X=0,y$u=y$Z.length;y$X<y$u;y$X++)y$Z[y$X].parent=null,this.conchModel&&this.conchModel.removeChild(y$Z[y$X].conchModel)}return this},y$c.replaceChild=function(y$_,y$c){var y$e=this._childs.indexOf(y$c);return-1<y$e?(this._childs.splice(y$e,1,y$_),this.conchModel&&(this.conchModel.removeChild(y$c.conchModel),this.conchModel.addChildAt(y$_.conchModel,y$e)),y$c.parent=null,y$_.parent=this,y$_):null},y$c._updateDisplayedInstage=function(){var y$_;y$_=this;var y$c=y$M.stage;for(this._displayedInStage=!1;y$_;){if(y$_._getBit(1)){this._displayedInStage=y$_._displayedInStage;break}if(y$_==y$c||y$_._displayedInStage){this._displayedInStage=!0;break}y$_=y$_.parent}},y$c._setDisplay=function(y$_){this._displayedInStage!==y$_&&((this._displayedInStage=y$_)?this.event("display"):this.event("undisplay"))},y$c._displayChild=function(y$_,y$c){var y$e=y$_._childs;if(y$e)for(var y$Z=0;y$Z<y$e.length;y$Z++){var y$X=y$e[y$Z];y$X&&y$X._getBit(1)&&(0<y$X._childs.length?this._displayChild(y$X,y$c):y$X._setDisplay(y$c))}y$_._setDisplay(y$c)},y$c.contains=function(y$_){if(y$_===this)return!0;for(;y$_;){if(y$_.parent===this)return!0;y$_=y$_.parent}return!1},y$c.timerLoop=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$X&&(y$X=!0),void 0===y$u&&(y$u=!1),this.timer.loop(y$_,y$c,y$e,y$Z,y$X,y$u)},y$c.timerOnce=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=!0),this.timer._create(!1,!1,y$_,y$c,y$e,y$Z,y$X)},y$c.frameLoop=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=!0),this.timer._create(!0,!0,y$_,y$c,y$e,y$Z,y$X)},y$c.frameOnce=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=!0),this.timer._create(!0,!1,y$_,y$c,y$e,y$Z,y$X)},y$c.clearTimer=function(y$_,y$c){this.timer.clear(y$_,y$c)},y$U(0,y$c,"numChildren",function(){return this._childs.length}),y$U(0,y$c,"destroyed",function(){return this._destroyed}),y$U(0,y$c,"parent",function(){return this._parent},function(y$_){this._parent!==y$_&&(y$_?(this._parent=y$_,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),y$_.displayedInStage&&this._displayChild(this,!0)),y$_._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=y$_))}),y$U(0,y$c,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),y$P.ARRAY_EMPTY=[],y$P.PROP_EMPTY={},y$P.NOTICE_DISPLAY=1,y$P.MOUSEENABLE=2,y$P}(),y$c_=function(y$_){function y$B(y$_){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,y$B.__super.call(this),this._padding=y$B._PADDING,this._spacing=y$B._SPACING,this._aligns=y$B._ALIGNS,this._font=y$D.EMPTY,this._ower=y$_}y$m(y$B,"laya.display.css.CSSStyle",y$_);var y$c=y$B.prototype;return y$c.destroy=function(){this._ower=null,this._font=null,this._rect=null},y$c.inherit=function(y$_){this._font=y$_._font,this._spacing=y$_._spacing===y$B._SPACING?y$B._SPACING:y$_._spacing.slice(),this.lineHeight=y$_.lineHeight},y$c._widthAuto=function(){return 0!=(262144&this._type)},y$c.widthed=function(y$_){return 0!=(8&this._type)},y$c._calculation=function(y$_,y$c){if(y$c.indexOf("%")<0)return!1;var y$Z=this._ower,y$X=y$Z.parent,y$u=this._rect;function y$P(y$_,y$c,y$e){return y$_*y$e[0]+y$c*y$e[1]+y$e[2]}function y$e(y$_){var y$c=y$X.width,y$e=y$Z.width;y$u.width&&(y$Z.width=y$P(y$c,y$e,y$u.width)),y$u.height&&(y$Z.height=y$P(y$c,y$e,y$u.height)),y$u.left&&(y$Z.x=y$P(y$c,y$e,y$u.left)),y$u.top&&(y$Z.y=y$P(y$c,y$e,y$u.top))}null===y$u&&(y$X._getCSSStyle()._type|=524288,y$X.on("resize",this,y$e),this._rect=y$u={input:{}});var y$O=y$c.split(" ");return y$O[0]=parseFloat(y$O[0])/100,1==y$O.length?y$O[1]=y$O[2]=0:(y$O[1]=parseFloat(y$O[1])/100,y$O[2]=parseFloat(y$O[2])),y$u[y$_]=y$O,y$u.input[y$_]=y$c,y$e(),!0},y$c.heighted=function(y$_){return 0!=(8192&this._type)},y$c.size=function(y$_,y$c){var y$e=this._ower,y$Z=!1;-1!==y$_&&y$_!=this._ower.width&&(this._type|=8,this._ower.width=y$_,y$Z=!0),-1!==y$c&&y$c!=this._ower.height&&(this._type|=8192,this._ower.height=y$c,y$Z=!0),y$Z&&(y$e._layoutLater(),524288&this._type&&y$e.event("resize",this))},y$c._getAlign=function(){return this._aligns[0]},y$c._getValign=function(){return this._aligns[1]},y$c._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},y$c._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new y$D(this._font))},y$c.render=function(y$_,y$c,y$e,y$Z){var y$X=y$_.width,y$u=y$_.height;y$e-=y$_.pivotX,y$Z-=y$_.pivotY,this._bgground&&null!=this._bgground.color&&y$c.ctx.fillRect(y$e,y$Z,y$X,y$u,this._bgground.color),this._border&&this._border.color&&y$c.drawRect(y$e,y$Z,y$X,y$u,this._border.color.strColor,this._border.size)},y$c.getCSSStyle=function(){return this},y$c.cssText=function(y$_){this.attrs(y$B.parseOneCSS(y$_,";"))},y$c.attrs=function(y$_){if(y$_)for(var y$c=0,y$e=y$_.length;y$c<y$e;y$c++){var y$Z=y$_[y$c];this[y$Z[0]]=y$Z[1]}},y$c.setTransform=function(y$_){"none"===y$_?this._tf=y$O._TF_EMPTY:this.attrs(y$B.parseOneCSS(y$_,","))},y$c.translate=function(y$_,y$c){this._tf===y$O._TF_EMPTY&&(this._tf=new y$X),this._tf.translateX=y$_,this._tf.translateY=y$c},y$c.scale=function(y$_,y$c){this._tf===y$O._TF_EMPTY&&(this._tf=new y$X),this._tf.scaleX=y$_,this._tf.scaleY=y$c},y$c._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},y$U(0,y$c,"block",y$_.prototype._$get_block,function(y$_){y$_?this._type|=1:this._type&=-2}),y$U(0,y$c,"valign",function(){return y$B._valigndef[this._aligns[1]]},function(y$_){this._aligns===y$B._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=y$B._valigndef[y$_]}),y$U(0,y$c,"height",null,function(y$_){if(this._type|=8192,"string"==typeof y$_){if(this._calculation("height",y$_))return;y$_=parseInt(y$_)}this.size(-1,y$_)}),y$U(0,y$c,"width",null,function(y$_){if(this._type|=8,"string"==typeof y$_){var y$c=y$_.indexOf("auto");if(0<=y$c&&(this._type|=262144,y$_=y$_.substr(0,y$c)),this._calculation("width",y$_))return;y$_=parseInt(y$_)}this.size(y$_,-1)}),y$U(0,y$c,"fontWeight",function(){return this._font.weight},function(y$_){this._createFont().weight=y$_}),y$U(0,y$c,"left",null,function(y$_){var y$c=this._ower;if("string"==typeof y$_){if("center"===y$_?y$_="50% -50% 0":"right"===y$_&&(y$_="100% -100% 0"),this._calculation("left",y$_))return;y$_=parseInt(y$_)}y$c.x=y$_}),y$U(0,y$c,"_translate",null,function(y$_){this.translate(y$_[0],y$_[1])}),y$U(0,y$c,"absolute",function(){return 0!=(4&this._type)}),y$U(0,y$c,"top",null,function(y$_){var y$c=this._ower;if("string"==typeof y$_){if("middle"===y$_?y$_="50% -50% 0":"bottom"===y$_&&(y$_="100% -100% 0"),this._calculation("top",y$_))return;y$_=parseInt(y$_)}y$c.y=y$_}),y$U(0,y$c,"align",function(){return y$B._aligndef[this._aligns[0]]},function(y$_){this._aligns===y$B._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=y$B._aligndef[y$_]}),y$U(0,y$c,"bold",function(){return this._font.bold},function(y$_){this._createFont().bold=y$_}),y$U(0,y$c,"padding",function(){return this._padding},function(y$_){this._padding=y$_}),y$U(0,y$c,"leading",function(){return this._spacing[1]},function(y$_){"string"==typeof y$_&&(y$_=parseInt(y$_+"")),this._spacing===y$B._SPACING&&(this._spacing=[0,0]),this._spacing[1]=y$_}),y$U(0,y$c,"lineElement",function(){return 0!=(65536&this._type)},function(y$_){y$_?this._type|=65536:this._type&=-65537}),y$U(0,y$c,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(y$_){this.lineElement=!1,"right"===y$_?this._type|=32768:this._type&=-32769}),y$U(0,y$c,"textDecoration",function(){return this._font.decoration},function(y$_){this._createFont().decoration=y$_}),y$U(0,y$c,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(y$_){"nowrap"===y$_&&(this._type|=131072),"none"===y$_&&(this._type&=-131073)}),y$U(0,y$c,"background",null,function(y$_){y$_?(this._bgground||(this._bgground={}),this._bgground.color=y$_,this._ower.conchModel&&this._ower.conchModel.bgColor(y$_),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),y$U(0,y$c,"wordWrap",function(){return 0==(131072&this._type)},function(y$_){y$_?this._type&=-131073:this._type|=131072}),y$U(0,y$c,"color",function(){return this._font.color},function(y$_){this._createFont().color=y$_}),y$U(0,y$c,"password",function(){return this._font.password},function(y$_){this._createFont().password=y$_}),y$U(0,y$c,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(y$_){"none"===y$_?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=y$_),this._ower.conchModel&&this._ower.conchModel.bgColor(y$_),this._ower._renderType|=256}),y$U(0,y$c,"font",function(){return this._font.toString()},function(y$_){this._createFont().set(y$_)}),y$U(0,y$c,"weight",null,function(y$_){this._createFont().weight=y$_}),y$U(0,y$c,"letterSpacing",function(){return this._spacing[0]},function(y$_){"string"==typeof y$_&&(y$_=parseInt(y$_+"")),this._spacing===y$B._SPACING&&(this._spacing=[0,0]),this._spacing[0]=y$_}),y$U(0,y$c,"fontSize",function(){return this._font.size},function(y$_){this._createFont().size=y$_}),y$U(0,y$c,"italic",function(){return this._font.italic},function(y$_){this._createFont().italic=y$_}),y$U(0,y$c,"fontFamily",function(){return this._font.family},function(y$_){this._createFont().family=y$_}),y$U(0,y$c,"stroke",function(){return this._font.stroke[0]},function(y$_){this._createFont().stroke===y$D._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=y$_}),y$U(0,y$c,"strokeColor",function(){return this._font.stroke[1]},function(y$_){this._createFont().stroke===y$D._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=y$_}),y$U(0,y$c,"border",function(){return this._border?this._border.value:""},function(y$_){if("none"!=y$_){this._border||(this._border={});var y$c=(this._border.value=y$_).split(" ");if(this._border.color=y$j.create(y$c[y$c.length-1]),1==y$c.length)return this._border.size=1,void(this._border.type="solid");var y$e=0;0<y$c[0].indexOf("px")?(this._border.size=parseInt(y$c[0]),y$e++):this._border.size=1,this._border.type=y$c[y$e],this._ower._renderType|=256}else this._border=null}),y$U(0,y$c,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(y$_){y$_?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==y$_?null:y$j.create(y$_),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),y$U(0,y$c,"position",function(){return 4&this._type?"absolute":""},function(y$_){"absolute"==y$_?this._type|=4:this._type&=-5}),y$U(0,y$c,"display",null,function(y$_){switch(y$_){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),y$U(0,y$c,"paddingLeft",function(){return this.padding[3]}),y$U(0,y$c,"paddingTop",function(){return this.padding[0]}),y$U(0,y$c,"_scale",null,function(y$_){this._ower.scale(y$_[0],y$_[1])}),y$U(0,y$c,"_rotate",null,function(y$_){this._ower.rotation=y$_}),y$B.parseOneCSS=function(y$_,y$c){for(var y$e,y$Z=[],y$X=y$_.split(y$c),y$u=0,y$P=y$X.length;y$u<y$P;y$u++){var y$O=y$X[y$u],y$s=y$O.indexOf(":"),y$n=y$O.substr(0,y$s).replace(/^\s+|\s+$/g,"");if(0!=y$n.length){var y$m=y$O.substr(y$s+1).replace(/^\s+|\s+$/g,""),y$H=[y$n,y$m];switch(y$n){case"italic":case"bold":y$H[1]="true"==y$m;break;case"line-height":y$H[0]="lineHeight",y$H[1]=parseInt(y$m);break;case"font-size":y$H[0]="fontSize",y$H[1]=parseInt(y$m);break;case"padding":1<(y$e=y$m.split(" ")).length||(y$e[1]=y$e[2]=y$e[3]=y$e[0]),y$H[1]=[parseInt(y$e[0]),parseInt(y$e[1]),parseInt(y$e[2]),parseInt(y$e[3])];break;case"rotate":y$H[0]="_rotate",y$H[1]=parseFloat(y$m);break;case"scale":y$e=y$m.split(" "),y$H[0]="_scale",y$H[1]=[parseFloat(y$e[0]),parseFloat(y$e[1])];break;case"translate":y$e=y$m.split(" "),y$H[0]="_translate",y$H[1]=[parseInt(y$e[0]),parseInt(y$e[1])];break;default:(y$H[0]=y$B._CSSTOVALUE[y$n])||(y$H[0]=y$n)}y$Z.push(y$H)}}return y$Z},y$B.parseCSS=function(y$_,y$c){for(var y$e;null!=(y$e=y$B._parseCSSRegExp.exec(y$_));)y$B.styleSheets[y$e[1]]=y$B.parseOneCSS(y$e[2],";")},y$B.EMPTY=new y$B(null),y$B._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},y$B._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),y$B._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},y$B._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},y$B.styleSheets={},y$B.ALIGN_CENTER=1,y$B.ALIGN_RIGHT=2,y$B.VALIGN_MIDDLE=1,y$B.VALIGN_BOTTOM=2,y$B._CSS_BLOCK=1,y$B._DISPLAY_NONE=2,y$B._ABSOLUTE=4,y$B._WIDTH_SET=8,y$B._PADDING=[0,0,0,0],y$B._RECT=[-1,-1,-1,-1],y$B._SPACING=[0,0],y$B._ALIGNS=[0,0,0],y$B.ADDLAYOUTED=512,y$B._NEWFONT=4096,y$B._HEIGHT_SET=8192,y$B._BACKGROUND_SET=16384,y$B._FLOAT_RIGHT=32768,y$B._LINE_ELEMENT=65536,y$B._NOWARP=131072,y$B._WIDTHAUTO=262144,y$B._LISTERRESZIE=524288,y$B}(y$O),y$e_=function(y$_){function y$P(){this.url=null,this.audio=null,this.loaded=!1,y$P.__super.call(this)}y$m(y$P,"laya.media.h5audio.AudioSound",y$n);var y$c=y$P.prototype;return y$c.dispose=function(){var y$_=y$P._audioCache[this.url];y$_&&(y$_.src="",delete y$P._audioCache[this.url])},y$c.load=function(y$_){var y$c;if(y$_=y$h.formatURL(y$_),(this.url=y$_)==y$C._tMusic?(y$P._initMusicAudio(),(y$c=y$P._musicAudio).src!=y$_&&(y$P._audioCache[y$c.src]=null,y$c=null)):y$c=y$P._audioCache[y$_],y$c&&2<=y$c.readyState)this.event("complete");else{y$c||(y$c=y$_==y$C._tMusic?(y$P._initMusicAudio(),y$P._musicAudio):y$p.createElement("audio"),(y$P._audioCache[y$_]=y$c).src=y$_),y$c.addEventListener("canplaythrough",y$Z),y$c.addEventListener("error",y$X);var y$e=this;(this.audio=y$c).load?y$c.load():y$X()}function y$Z(){y$u(),y$e.loaded=!0,y$e.event("complete")}function y$X(){y$c.load=null,y$u(),y$e.event("error")}function y$u(){y$c.removeEventListener("canplaythrough",y$Z),y$c.removeEventListener("error",y$X)}},y$c.play=function(y$_,y$c,y$e){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),!this.url)return null;var y$Z,y$X;if(!(y$Z=this.url==y$C._tMusic?y$P._musicAudio:y$P._audioCache[this.url]))return null;y$X=y$V.getItem("audio:"+this.url),y$R.isConchApp?y$X||((y$X=y$p.createElement("audio")).src=this.url):this.url==y$C._tMusic?(y$P._initMusicAudio(),(y$X=y$P._musicAudio).src=this.url):y$X=y$X||y$Z.cloneNode(!0);var y$u=new y$B_(y$X);return y$u.url=this.url,y$u.loops=y$c,y$u.startTime=y$_,y$u.startHandler=y$e,y$u.play(!1),y$C.addChannel(y$u),y$u},y$U(0,y$c,"duration",function(){var y$_;return(y$_=y$P._audioCache[this.url])?y$_.duration:0}),y$P._initMusicAudio=function(){y$P._musicAudio||(y$P._musicAudio||(y$P._musicAudio=y$p.createElement("audio")),y$R.isConchApp||y$p.document.addEventListener("mousedown",y$P._makeMusicOK))},y$P._makeMusicOK=function(){y$p.document.removeEventListener("mousedown",y$P._makeMusicOK),y$P._musicAudio.src?y$P._musicAudio.play():(y$P._musicAudio.src="",y$P._musicAudio.load())},y$P._audioCache={},y$P._musicAudio=null,y$P}(),y$Z_=function(y$_){function y$c(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,y$c.__super.call(this)}y$m(y$c,"laya.media.SoundChannel",y$n);var y$e=y$c.prototype;return y$e.play=function(){},y$e.stop=function(){},y$e.pause=function(){},y$e.resume=function(){},y$e.__runComplete=function(y$_){y$_&&y$_.run()},y$U(0,y$e,"volume",function(){return 1},function(y$_){}),y$U(0,y$e,"position",function(){return 0}),y$U(0,y$e,"duration",function(){return 0}),y$c}(),y$X_=function(y$_){function y$c(){y$c.__super.call(this)}y$m(y$c,"laya.media.Sound",y$n);var y$e=y$c.prototype;return y$e.load=function(y$_){},y$e.play=function(y$_,y$c,y$e){return void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),null},y$e.dispose=function(){},y$U(0,y$e,"duration",function(){return 0}),y$c}(),y$u_=function(y$_){function y$X(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,y$X.__super.call(this)}y$m(y$X,"laya.media.webaudio.WebAudioSound",y$n);var y$c=y$X.prototype;return y$c.load=function(y$_){this.url=y$_,this.audioBuffer=y$X._dataCache[y$_],this.audioBuffer?this._loaded(this.audioBuffer):(y$X.e.on("loaded:"+y$_,this,this._loaded),y$X.e.on("err:"+y$_,this,this._err),y$X.__loadingSound[y$_]||(y$X.__loadingSound[y$_]=!0,y$M.loader.load(y$_,y$w.create(this,this.onloaded),null,y$O_.BUFFER,4,!1,null,!0)))},y$c.onloaded=function(y$_){y$_||this._err(),this._disposed?this._removeLoadEvents():(this.data=y$_,y$X.buffs.push({buffer:this.data,url:this.url}),y$X.decode())},y$c._err=function(){if(this._removeLoadEvents(),y$X.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var y$_,y$c,y$e,y$Z=0;for(y$_=(y$c=this.__toPlays).length,y$Z=0;y$Z<y$_;y$Z++)(y$e=y$c[y$Z])[3]&&!y$e[3].isStopped&&y$e[3].event("error");this.__toPlays.length=0}},y$c._loaded=function(y$_){this._removeLoadEvents(),this._disposed||(this.audioBuffer=y$_,this.loaded=!0,this.event("complete"))},y$c._removeLoadEvents=function(){y$X.e.off("loaded:"+this.url,this,this._loaded),y$X.e.off("err:"+this.url,this,this._err)},y$c.__playAfterLoaded=function(){if(this.__toPlays){var y$_,y$c,y$e,y$Z=0;for(y$_=(y$c=this.__toPlays).length,y$Z=0;y$Z<y$_;y$Z++)(y$e=y$c[y$Z])[3]&&!y$e[3].isStopped&&this.play(y$e[0],y$e[1],y$e[2],y$e[3]);this.__toPlays.length=0}},y$c.play=function(y$_,y$c,y$e,y$Z){return void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),y$Z=y$Z||new y$D_,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([y$_,y$c,y$e,y$Z]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),y$Z.url=this.url,y$Z.loops=y$c,y$Z.audioBuffer=this.audioBuffer,y$Z.startTime=y$_,y$Z.startHandler=y$e,y$Z.play(!1),y$C.addChannel(y$Z),y$Z},y$c.dispose=function(){this._disposed=!0,delete y$X._dataCache[this.url],delete y$X.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},y$U(0,y$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),y$X.decode=function(){if(!(y$X.buffs.length<=0||y$X.isDecoding))if(y$X.isDecoding=!0,(y$X.tInfo=y$X.buffs.shift())&&y$X.tInfo.buffer&&y$X.tInfo.buffer.byteLength)try{y$X.ctx.decodeAudioData(y$X.tInfo.buffer,y$X._done,y$X._fail)}catch(y$_){console.error("decodeAudioData error  byteLength:"+y$X.tInfo.buffer.byteLength+"  url:"+y$X.tInfo.url)}else y$X._fail()},y$X._done=function(y$_){y$X.e.event("loaded:"+y$X.tInfo.url,y$_),y$X._dataCache[y$X.tInfo.url]=y$_,y$X.isDecoding=!1,y$X.decode()},y$X._fail=function(){y$X.e.event("err:"+y$X.tInfo.url,null),y$X.isDecoding=!1,y$X.decode()},y$X._playEmptySound=function(){if(null!=y$X.ctx){if(y$X._emptySource&&(y$X._emptySource.stop(),y$X._emptySource.disconnect(0),!y$D_._tryCleanFailed))try{y$X._emptySource.buffer=null}catch(y$_){y$D_._tryCleanFailed=!0}var y$_=y$X.ctx.createBufferSource();y$_.buffer=y$X._miniBuffer,y$_.connect(y$X.ctx.destination),y$_.start(0,0,0),y$X._emptySource=y$_}},y$X._unlock=function(){y$X._unlocked||(y$X._playEmptySound(),"running"==y$X.ctx.state?(y$p.document.removeEventListener("mousedown",y$X._unlock,!0),y$p.document.removeEventListener("touchend",y$X._unlock,!0),y$p.document.removeEventListener("touchstart",y$X._unlock,!0),y$X._unlocked=!0):"suspended"==y$X.ctx.state&&y$C._recoverWebAudio())},y$X.initWebAudio=function(){"running"!=y$X.ctx.state&&(y$X._unlock(),y$p.document.addEventListener("mousedown",y$X._unlock,!0),y$p.document.addEventListener("touchend",y$X._unlock,!0),y$p.document.addEventListener("touchstart",y$X._unlock,!0))},y$X._emptySource=null,y$X._dataCache={},y$X.buffs=[],y$X.isDecoding=!1,y$X._unlocked=!1,y$X.tInfo=null,y$X.__loadingSound={},y$s(y$X,["window",function(){return this.window=y$p.window},"webAudioEnabled",function(){return this.webAudioEnabled=y$X.window.AudioContext||y$X.window.webkitAudioContext||y$X.window.mozAudioContext},"ctx",function(){return this.ctx=y$X.webAudioEnabled?new(y$X.window.AudioContext||y$X.window.webkitAudioContext||y$X.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=y$X.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new y$n}]),y$X}(),y$P_=function(y$_){function y$c(){this._responseType=null,this._data=null,y$c.__super.call(this),this._http=new y$p.window.XMLHttpRequest}y$m(y$c,"laya.net.HttpRequest",y$n);var y$e=y$c.prototype;return y$e.send=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$e&&(y$e="get"),void 0===y$Z&&(y$Z="text"),this._responseType=y$Z,this._data=null;var y$u=this,y$P=this._http;if(y$P.open(y$e,y$_,!0),y$X)for(var y$O=0;y$O<y$X.length;y$O++)y$P.setRequestHeader(y$X[y$O++],y$X[y$O]);else y$R.isConchApp||(y$c&&"string"!=typeof y$c?y$P.setRequestHeader("Content-Type","application/json"):y$P.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));y$P.responseType="arraybuffer"!==y$Z?"text":"arraybuffer",y$P.onerror=function(y$_){y$u._onError(y$_)},y$P.onabort=function(y$_){y$u._onAbort(y$_)},y$P.onprogress=function(y$_){y$u._onProgress(y$_)},y$P.onload=function(y$_){y$u._onLoad(y$_)},y$P.send(y$c)},y$e._onProgress=function(y$_){y$_&&y$_.lengthComputable&&this.event("progress",y$_.loaded/y$_.total)},y$e._onAbort=function(y$_){this.error("Request was aborted by user")},y$e._onError=function(y$_){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},y$e._onLoad=function(y$_){var y$c=this._http,y$e=void 0!==y$c.status?y$c.status:200;200===y$e||204===y$e||0===y$e?this.complete():this.error("["+y$c.status+"]"+y$c.statusText+":"+y$c.responseURL)},y$e.error=function(y$_){this.clear(),this.event("error",y$_)},y$e.complete=function(){this.clear();var y$c=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=y$W.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(y$_){y$c=!1,this.error(y$_.message)}y$c&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},y$e.clear=function(){var y$_=this._http;y$_.onerror=y$_.onabort=y$_.onprogress=y$_.onload=null},y$U(0,y$e,"url",function(){return this._http.responseURL}),y$U(0,y$e,"http",function(){return this._http}),y$U(0,y$e,"data",function(){return this._data}),y$c}(),y$O_=function(y$_){function y$v(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,y$v.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}y$m(y$v,"laya.net.Loader",y$n);var y$c=y$v.prototype;return y$c.load=function(y$_,y$c,y$e,y$Z,y$X){if(y$_&&""!=y$_||console.error("Loader 加载的url不合法 "+y$_),void 0===y$e&&(y$e=!0),void 0===y$X&&(y$X=!1),0===(this._url=y$_).indexOf("data:image")?this._type=y$c="image":this._type=y$c||(y$c=this.getTypeFromUrl(y$_)),this._cache=y$e,this._data=null,!y$X&&y$v.loadedMap[y$_])return this._data=y$v.loadedMap[y$_],this.event("progress",1),void this.event("complete",this._data);if(y$Z&&y$v.setGroup(y$_,y$Z),null!=y$v.parserMap[y$c])return this._customParse=!0,void(y$v.parserMap[y$c]instanceof laya.utils.Handler?y$v.parserMap[y$c].runWith(this):y$v.parserMap[y$c].call(null,this));if("image"===y$c||"htmlimage"===y$c||"nativeimage"===y$c)return this._loadImage(y$_);if("ttf"===y$c)return this._loadTTF(y$_);switch(y$c){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:y$c}y$v.preLoadedMap[y$_]?this.onLoaded(y$v.preLoadedMap[y$_]):y$P.resMgrLoad(y$_,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},y$c.getTypeFromUrl=function(y$_){var y$c=y$W.getFileExtension(y$_);return y$c?y$v.typeMap[y$c]:(console.warn("Not recognize the resources suffix",y$_),"text")},y$c._loadTTF=function(y$_){y$_=y$h.formatURL(y$_);var y$c=new y$T;y$c.complete=y$w.create(this,this.onLoaded),y$c.load(y$_)},y$c._loadImage=function(y$_){y$P.imgMgrLoad(y$_,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},y$c._loadImageComplete=function(y$_,y$c,y$e){if(null!=y$e)if(y$e instanceof ArrayBuffer){var y$Z=new DataView(y$e),y$X=new laya.webgl.resource.WebGLImage(new Uint8Array(y$e,8),y$_,0,!1,y$Z.getUint32(0),y$Z.getUint32(4));this.onLoaded(y$X)}else if(y$e instanceof y$m_)y$v.imgMgrSet[y$_]=y$c,y$P.imgMgrLock(y$_,y$v.imgMgrSet[y$_]),this._url=y$_,this.complete(y$e);else{var y$u=-1!=y$_.indexOf(".png",y$_.length-4)?6408:6407;y$X=new laya.webgl.resource.WebGLImage(y$e,y$_,y$u,!1,y$e.width,y$e.height);this.onLoaded(y$X)}else this.event("error","Load image failed")},y$c._loadSound=function(y$_){var y$c=new y$C._soundClass,y$e=this;function y$Z(){y$c.offAll()}y$c.on("complete",this,function(){y$Z(),y$e.onLoaded(y$c)}),y$c.on("error",this,function(){y$Z(),y$c.dispose(),y$e.event("error","Load sound failed")}),y$c.load(y$_)},y$c.onProgress=function(y$_){"atlas"===this._type?this.event("progress",.3*y$_):this.event("progress",y$_)},y$c.onError=function(y$_){this.event("error",y$_)},y$c._loadedComplete=function(y$_,y$c,y$e){if(null!=y$e)switch(this._type){case"atlas":case"plf":case"json":var y$Z=new y$o(y$e);this.onLoaded(JSON.parse(y$Z.readUTFBytes()));break;case"font":y$Z=new y$o(y$e);this.onLoaded(y$W.parseXMLFromString(y$Z.readUTFBytes()));break;default:this.onLoaded(y$e)}else this.event("error",y$_)},y$c.onLoaded=function(y$_){var y$c=this._type;if("plf"==y$c)this.parsePLFData(y$_),this.complete(y$_);else if("image"===y$c){var y$e=new y$m_(y$_);y$e.url=this._url,this.complete(y$e)}else if("sound"===y$c||"htmlimage"===y$c||"nativeimage"===y$c)this.complete(y$_);else if("atlas"===y$c){if(!y$_.src&&!y$_._setContext){if(!this._data){if((this._data=y$_).meta&&y$_.meta.image)for(var y$Z=y$_.meta.image.split(","),y$X=0<=this._url.indexOf("/")?"/":"\\",y$u=this._url.lastIndexOf(y$X),y$P=0<=y$u?this._url.substr(0,y$u+1):"",y$O=0,y$s=y$Z.length;y$O<y$s;y$O++)y$Z[y$O]=y$P+y$Z[y$O];else y$Z=[this._url.replace(".json",".png")];y$Z.reverse(),y$_.toLoads=y$Z,y$_.pics=[]}return this.event("progress",.3+1/y$Z.length*.6),this._loadImage(y$Z.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(y$_),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var y$n=this._data.frames,y$m=this._url.split("?")[0],y$H=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:y$m.substring(0,y$m.lastIndexOf("."))+"/",y$B=this._data.pics,y$D=y$h.formatURL(this._url),y$U=y$v.atlasMap[y$D]||(y$v.atlasMap[y$D]=[]);y$U.dir=y$H;var y$k=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var y$a in y$k=parseFloat(this._data.meta.scale),y$n){var y$G,y$w=y$n[y$a],y$z=y$B[y$w.frame.idx?y$w.frame.idx:0],y$L=y$h.formatURL(y$H+y$a);y$z.scaleRate=y$k,y$G=y$m_.create(y$z,y$w.frame.x,y$w.frame.y,y$w.frame.w,y$w.frame.h,y$w.spriteSourceSize.x,y$w.spriteSourceSize.y,y$w.sourceSize.w,y$w.sourceSize.h),y$v.cacheRes(y$L,y$G),y$v.keepCache(this._url,y$H+y$a),y$G.url=y$L,y$U.push(y$L)}else for(y$a in y$n)y$z=y$B[(y$w=y$n[y$a]).frame.idx?y$w.frame.idx:0],y$L=y$h.formatURL(y$H+y$a),y$v.cacheRes(y$L,y$m_.create(y$z,y$w.frame.x,y$w.frame.y,y$w.frame.w,y$w.frame.h,y$w.spriteSourceSize.x,y$w.spriteSourceSize.y,y$w.sourceSize.w,y$w.sourceSize.h)),y$v.loadedMap[y$L].url=y$L,y$v.keepCache(this._url,y$H+y$a),y$U.push(y$L);delete this._data.pics,this.complete(this._data)}else if("font"==y$c){if(!y$_.src)return this._data=y$_,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var y$q=new y$r;y$q.parseFont(this._data,y$_);var y$K=this._url.split(".fnt")[0].split("/"),y$M=y$K[y$K.length-1];y$a_.registerBitmapFont(y$M,y$q),this._data=y$q,this.complete(this._data)}else if("pkm"==y$c){var y$f=y$K_.create(y$_,this._url),y$A=new y$m_(y$f);y$A.url=this._url,this.complete(y$A)}else this.complete(y$_)},y$c.parsePLFData=function(y$_){var y$c,y$e,y$Z;for(y$c in y$_)switch(y$Z=y$_[y$c],y$c){case"json":case"text":for(y$e in y$Z)y$v.preLoadedMap[y$h.formatURL(y$e)]=y$Z[y$e];break;default:for(y$e in y$Z)y$v.preLoadedMap[y$h.formatURL(y$e)]=y$Z[y$e]}},y$c.complete=function(y$_){this._data=y$_,this._customParse?this.event("loaded",y$_ instanceof Array?[y$_]:y$_):(y$v._loaders.push(this),y$v._isWorking||y$v.checkNext())},y$c.endLoad=function(y$_){y$_&&(this._data=y$_),this._cache&&y$v.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},y$U(0,y$c,"url",function(){return this._url}),y$U(0,y$c,"data",function(){return this._data}),y$U(0,y$c,"cache",function(){return this._cache}),y$U(0,y$c,"type",function(){return this._type}),y$v.checkNext=function(){y$v._isWorking=!0;for(var y$_=y$p.now();y$v._startIndex<y$v._loaders.length;)if(y$p.now(),y$v._loaders[y$v._startIndex].endLoad(),y$v._startIndex++,y$p.now()-y$_>y$v.maxTimeOut)return console.warn("loader callback cost a long time:"+(y$p.now()-y$_)+" url="+y$v._loaders[y$v._startIndex-1].url),void y$M.timer.frameOnce(1,null,y$v.checkNext);y$v._loaders.length=0,y$v._startIndex=0,y$v._isWorking=!1},y$v.clearRes=function(y$_,y$c){if(null!=y$_){void 0===y$c&&(y$c=!1),y$_=y$h.formatURL(y$_);var y$e=y$v.getAtlas(y$_);if(y$e){for(var y$Z=0,y$X=y$e.length;y$Z<y$X;y$Z++){var y$u=y$e[y$Z],y$P=y$v.getRes(y$u);delete y$v.loadedMap[y$u],y$v.clearCache(y$_.substring(y$h.basePath.length),y$u.substring(y$h.basePath.length)),y$P&&y$P.destroy(y$c)}y$e.length=0,delete y$v.atlasMap[y$_],delete y$v.loadedMap[y$_]}else{var y$O=y$v.loadedMap[y$_];y$O&&(delete y$v.loadedMap[y$_],y$O instanceof laya.resource.Texture&&y$O.bitmap&&y$O.destroy(y$c))}}},y$v.clearTextureRes=function(y$_){y$_=y$h.formatURL(y$_);var y$c=laya.net.Loader.getAtlas(y$_),y$e=y$c&&0<y$c.length?laya.net.Loader.getRes(y$c[0]):laya.net.Loader.getRes(y$_);y$e&&y$e.bitmap&&(y$R.isConchApp&&!y$R.isConchWebGL?y$e.bitmap.source.releaseTexture&&y$e.bitmap.source.releaseTexture():null==y$e.bitmap._atlaser&&y$e.bitmap.releaseResource(!0))},y$v.getRes=function(y$_){return y$v.loadedMap[y$h.formatURL(y$_)]},y$v.getAtlas=function(y$_){return y$v.atlasMap[y$h.formatURL(y$_)]},y$v.cacheRes=function(y$_,y$c){y$_=y$h.formatURL(y$_),null!=y$v.loadedMap[y$_]?console.warn("Resources already exist,is repeated loading:",y$_):y$v.loadedMap[y$_]=y$c},y$v.setGroup=function(y$_,y$c){y$v.groupMap[y$c]||(y$v.groupMap[y$c]=[]),y$v.groupMap[y$c].push(y$_)},y$v.clearResByGroup=function(y$_){if(y$v.groupMap[y$_]){var y$c=y$v.groupMap[y$_],y$e=0,y$Z=y$c.length;for(y$e=0;y$e<y$Z;y$e++)y$v.clearRes(y$c[y$e]);y$c.length=0}},y$v.keepCache=function(y$_,y$c){if(y$_&&y$c){var y$e=y$v.cacheSet[y$c];y$e?-1==y$e.indexOf(y$_)&&y$e.push(y$_):y$v.cacheSet[y$c]=[y$_]}},y$v.clearCache=function(y$_,y$c){if(y$_&&y$c){var y$e=y$v.cacheSet[y$c];if(y$e){var y$Z=y$e.indexOf(y$_);if(-1!==y$Z){var y$X=y$e.length-1;0==y$X?(delete y$v.cacheSet[y$c],0<y$v.imgMgrSet[y$c]?y$P.imgMgrFree(y$c,y$v.imgMgrSet[y$c]):y$v.clearRes(y$c,!0)):(y$e[y$Z]=y$e[y$X],y$e.length=y$X)}}}},y$v.saveObject=function(y$_,y$c,y$e){if(y$c&&y$_){var y$Z=y$v.objectSet[y$_];y$Z?(console.warn("Loader.saveObject: "+y$_),y$Z[0]=y$c,y$Z[1]=y$e):y$v.objectSet[y$_]=[y$c,y$e,[]]}},y$v.findObject=function(y$_){if(y$_){var y$c=y$v.objectSet[y$_];if(y$c)return y$c[0]}return null},y$v.keepObject=function(y$_,y$c){if(y$_&&y$c){var y$e=y$v.objectSet[y$c];y$e&&-1===y$e[2].indexOf(y$_)&&y$e[2].push(y$_)}},y$v.clearObject=function(y$_,y$c){if(y$_&&y$c){var y$e=y$v.objectSet[y$c];if(y$e){var y$Z=y$e[2],y$X=y$Z.indexOf(y$_);if(-1!==y$X){var y$u=y$Z.length-1;0==y$u?(delete y$v.objectSet[y$c],y$e[1]&&y$e[1].call(null,y$e[0])):(y$Z[y$X]=y$Z[y$u],y$Z.length=y$u)}}}},y$v.TEXT="text",y$v.JSON="json",y$v.XML="xml",y$v.BUFFER="arraybuffer",y$v.IMAGE="image",y$v.SOUND="sound",y$v.ATLAS="atlas",y$v.FONT="font",y$v.TTF="ttf",y$v.PLF="plf",y$v.PKM="pkm",y$v.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},y$v.parserMap={},y$v.groupMap={},y$v.maxTimeOut=100,y$v.loadedMap={},y$v.preLoadedMap={},y$v.atlasMap={},y$v._loaders=[],y$v._isWorking=!1,y$v._startIndex=0,y$v.imgCache={},y$v.cacheSet={},y$v.objectSet={},y$v.imgMgrSet={},y$v}(),y$s_=function(y$_){var y$B;function y$D(){this.retryNum=3,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},y$D.__super.call(this);for(var y$_=0;y$_<this._maxPriority;y$_++)this._resInfos[y$_]=[]}y$m(y$D,"laya.net.LoaderManager",y$n);var y$c=y$D.prototype;return y$c.create=function(y$_,y$e,y$c,y$Z,y$X,y$u,y$P,y$O){if(null==y$u&&(y$u=2),null==y$P&&(y$P=!0),y$_ instanceof Array){var y$s=y$_,y$n=y$s.length,y$m=0;if(y$c)var y$H=y$w.create(y$c.caller,y$c.method,y$c.args,!1);for(var y$B=0;y$B<y$n;y$B++){var y$D=y$s[y$B];"string"==typeof y$D&&(y$D=y$s[y$B]={url:y$D}),y$D.progress=0}for(y$B=0;y$B<y$n;y$B++){y$D=y$s[y$B];var y$U=y$c?y$w.create(null,y$G,[y$D],!1):null,y$k=y$c||y$e?y$w.create(null,y$a,[y$D]):null;this._create(y$D.url,y$k,y$U,y$D.clas||y$Z,y$D.params||y$X,null!=y$D.priority&&0<=y$D.priority?y$D.priority:y$u,y$P,y$D.group||y$O)}function y$a(y$_,y$c){y$m++,y$_.progress=1,y$m===y$n&&y$e&&y$e.run()}function y$G(y$_,y$c){y$_.progress=y$c;for(var y$e=0,y$Z=0;y$Z<y$n;y$Z++){y$e+=y$s[y$Z].progress}var y$X=y$e/y$n;y$H.runWith(y$X)}return!0}return this._create(y$_,y$e,y$c,y$Z,y$X,y$u,y$P,y$O)},y$c._create=function(y$c,y$e,y$_,y$Z,y$X,y$u,y$P,y$O){y$c&&""!=y$c||console.error("加载的url不合法 "+y$c),null==y$u&&(y$u=2),null==y$P&&(y$P=!0);var y$s=y$h.formatURL(y$c),y$n=this.getRes(y$s);if(y$n)!y$n.hasOwnProperty("loaded")||y$n.loaded?(y$_&&y$_.runWith(1),y$e&&y$e.run()):y$e&&y$M.loader._createListener(y$c,y$e.caller,y$e.method,y$e.args,!0,!1);else{var y$m=y$W.getFileExtension(y$c),y$H=y$D.createMap[y$m];if(!y$H)throw new Error("LoaderManager:unknown file("+y$c+") extension with: "+y$m+".");y$Z||(y$Z=y$H[0]);var y$B=y$H[1];if("atlas"==y$m)this.load(y$c,y$e,y$_,y$B,y$u,y$P);else{y$Z===y$m_&&(y$B="htmlimage"),(y$n=y$Z?new y$Z:null).hasOwnProperty("_loaded")&&(y$n._loaded=!1),y$n._setUrl(y$c),y$O&&y$n._setGroup(y$O),this._createLoad(y$n,y$c,y$w.create(null,function(y$_){y$n&&!y$n.destroyed&&y$_&&y$n.onAsynLoaded.call(y$n,y$c,y$_,y$X),y$e&&y$e.run();y$M.loader.event(y$c)}),y$_,y$B,y$u,!1,y$O,!0),y$P&&this.cacheRes(y$s,y$n)}}return y$n},y$c.load=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){y$_&&""!=y$_||console.error("加载的url不合法 "+y$_);var y$s=this;if(null==y$X&&(y$X=2),null==y$u&&(y$u=!0),void 0===y$O&&(y$O=!1),y$_ instanceof Array)return this._loadAssets(y$_,y$c,y$e,y$Z,y$X,y$u,y$P);var y$n=y$O_.getRes(y$_);if(null!=y$n)y$M.timer.frameOnce(1,null,function(){y$e&&y$e.runWith(1),y$c&&y$c.runWith(y$n),y$s._loaderCount||y$s.event("complete")});else{var y$m=y$D._resMap[y$_];y$m?(y$c&&y$m._createListener("complete",y$c.caller,y$c.method,y$c.args,!1,!1),y$e&&y$m._createListener("progress",y$e.caller,y$e.method,y$e.args,!1,!1)):((y$m=this._infoPool.length?this._infoPool.pop():new y$B).url=y$_,y$m.type=y$Z,y$m.cache=y$u,y$m.group=y$P,y$m.ignoreCache=y$O,y$m.priority=y$X,y$c&&y$m.on("complete",y$c.caller,y$c.method,y$c.args),y$e&&y$m.on("progress",y$e.caller,y$e.method,y$e.args),y$D._resMap[y$_]=y$m,y$X=y$X<this._maxPriority?0<=y$X?y$X:0:this._maxPriority-1,this._resInfos[y$X].push(y$m),this._next())}return this},y$c._createLoad=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){var y$n=this;if(null==y$u&&(y$u=2),null==y$P&&(y$P=!0),void 0===y$s&&(y$s=!1),y$c instanceof Array)return this._loadAssets(y$c,y$e,y$Z,y$X,y$u,y$P,y$O);var y$m=y$O_.getRes(y$c);if(null!=y$m)y$M.timer.frameOnce(1,null,function(){y$Z&&y$Z.runWith(1),y$e&&y$e.runWith(y$m),y$n._loaderCount||y$n.event("complete")});else{var y$H=y$D._resMap[y$c];y$H?(y$e&&y$H._createListener("complete",y$e.caller,y$e.method,y$e.args,!1,!1),y$Z&&y$H._createListener("progress",y$Z.caller,y$Z.method,y$Z.args,!1,!1)):((y$H=this._infoPool.length?this._infoPool.pop():new y$B).url=y$c,y$H.clas=y$_,y$H.type=y$X,y$H.cache=y$P,y$H.group=y$O,y$H.ignoreCache=y$s,y$H.priority=y$u,y$e&&y$H.on("complete",y$e.caller,y$e.method,y$e.args),y$Z&&y$H.on("progress",y$Z.caller,y$Z.method,y$Z.args),y$D._resMap[y$c]=y$H,y$u=y$u<this._maxPriority?0<=y$u?y$u:0:this._maxPriority-1,this._resInfos[y$u].push(y$H),this._next())}return this},y$c._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var y$_=0;y$_<this._maxPriority;y$_++)for(var y$c=this._resInfos[y$_];0<y$c.length;){var y$e=y$c.shift();if(y$e)return this._doLoad(y$e)}this._loaderCount||this.event("complete")}},y$c._doLoad=function(y$c){this._loaderCount++;var y$e=this._loaders.length?this._loaders.pop():new y$O_;y$e.on("complete",null,y$X),y$e.on("progress",null,function(y$_){y$c.event("progress",y$_)}),y$e.on("error",null,function(y$_){y$X(null)});var y$Z=this;function y$X(y$_){y$e.offAll(),y$e._data=null,y$e._customParse=!1,y$Z._loaders.push(y$e),y$Z._endLoad(y$c,y$_ instanceof Array?[y$_]:y$_),y$Z._loaderCount--,y$Z._next()}y$e._class=y$c.clas,1<=y$c.priority?(y$e.priority=y$c.priority,y$e.realTime=!1):(y$e.priority=0,y$e.realTime=!0),y$e.load(y$c.url,y$c.type,y$c.cache,y$c.group,y$c.ignoreCache)},y$c._endLoad=function(y$_,y$c){var y$e=y$_.url;if(null==y$c){var y$Z=this._failRes[y$e]||0;if(y$Z<this.retryNum)return console.warn("[warn]Retry to load:",y$e),this._failRes[y$e]=y$Z+1,void y$M.timer.once(this.retryDelay,this,this._addReTry,[y$_],!1);console.warn("[error]Failed to load:",y$e),this.event("error",y$e)}this._failRes[y$e]&&(this._failRes[y$e]=0),delete y$D._resMap[y$e],y$_.event("complete",y$c),y$_.offAll(),this._infoPool.push(y$_)},y$c._addReTry=function(y$_){this._resInfos[this._maxPriority-1].push(y$_),this._next()},y$c.clearRes=function(y$_,y$c){void 0===y$c&&(y$c=!1),y$O_.clearRes(y$_,y$c)},y$c.getRes=function(y$_){return y$O_.getRes(y$_)},y$c.cacheRes=function(y$_,y$c){y$O_.cacheRes(y$_,y$c)},y$c.clearTextureRes=function(y$_){y$O_.clearTextureRes(y$_)},y$c.setGroup=function(y$_,y$c){y$O_.setGroup(y$_,y$c)},y$c.clearResByGroup=function(y$_){y$O_.clearResByGroup(y$_)},y$c.clearUnLoaded=function(){for(var y$_=0;y$_<this._maxPriority;y$_++){for(var y$c=this._resInfos[y$_],y$e=y$c.length-1;-1<y$e;y$e--){var y$Z=y$c[y$e];y$Z&&(y$Z.offAll(),this._infoPool.push(y$Z))}y$c.length=0}this._loaderCount=0,y$D._resMap={}},y$c.cancelLoadByUrls=function(y$_){if(y$_)for(var y$c=0,y$e=y$_.length;y$c<y$e;y$c++)this.cancelLoadByUrl(y$_[y$c])},y$c.cancelLoadByUrl=function(y$_){for(var y$c=0;y$c<this._maxPriority;y$c++)for(var y$e=this._resInfos[y$c],y$Z=y$e.length-1;-1<y$Z;y$Z--){var y$X=y$e[y$Z];y$X&&y$X.url===y$_&&(y$e[y$Z]=null,y$X.offAll(),this._infoPool.push(y$X))}y$D._resMap[y$_]&&delete y$D._resMap[y$_]},y$c._loadAssets=function(y$_,y$e,y$P,y$c,y$Z,y$X,y$u){null==y$Z&&(y$Z=2),null==y$X&&(y$X=!0);for(var y$O=y$_.length,y$s=0,y$n=0,y$m=[],y$H=!0,y$B=0;y$B<y$O;y$B++){var y$D=y$_[y$B];if(!y$D)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+y$_);"string"==typeof y$D&&(y$D={url:y$D,type:y$c,size:1,priority:y$Z}),y$D.size||(y$D.size=1),y$D.progress=0,y$n+=y$D.size,y$m.push(y$D);var y$U=y$P?y$w.create(null,y$G,[y$D],!1):null,y$k=y$e||y$P?y$w.create(null,y$a,[y$D]):null;this.load(y$D.url,y$k,y$U,y$D.type,null!=y$D.priority&&0<=y$D.priority?y$D.priority:2,y$X,y$D.group||y$u)}function y$a(y$_,y$c){y$s++,y$_.progress=1,y$c||(y$H=!1),y$s===y$O&&y$e&&y$e.runWith(y$H)}function y$G(y$_,y$c){if(null!=y$P){y$_.progress=y$c;for(var y$e=0,y$Z=0;y$Z<y$m.length;y$Z++){var y$X=y$m[y$Z];y$e+=y$X.size*y$X.progress}var y$u=y$e/y$n;y$P.runWith(y$u)}}return this},y$D.cacheRes=function(y$_,y$c){y$O_.cacheRes(y$_,y$c)},y$D._resMap={},y$s(y$D,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),y$D.__init$=function(){y$B=function(y$_){function y$c(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.priority=-1,y$c.__super.call(this)}return y$m(y$c,"",y$n),y$c}()},y$D}(),y$n_=(function(y$_){function y$X(y$_){y$X.__super.call(this),y$_||(y$_=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var y$c=0,y$e=0,y$Z=0;y$Z<20;y$Z++)y$Z%5!=4?this._mat[y$c++]=y$_[y$Z]:this._alpha[y$e++]=y$_[y$Z];this._action=y$y.createFilterAction(32),this._action.data=this}y$m(y$X,"laya.filters.ColorFilter",y$G);var y$c=y$X.prototype;y$M.imps(y$c,{"laya.filters.IFilter":!0}),y$c.callNative=function(y$_){y$_._$P.cf=this;y$_.conchModel&&y$_.conchModel.setFilterMatrix&&y$_.conchModel.setFilterMatrix(this._mat,this._alpha)},y$U(0,y$c,"type",function(){return 32}),y$U(0,y$c,"action",function(){return this._action})}(),function(y$_){function y$Z(y$_,y$c,y$e){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===y$c&&(y$c=0),y$Z.__super.call(this),this._byteClass=y$e||y$o,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,y$_&&0<y$c&&y$c<65535&&this.connect(y$_,y$c)}y$m(y$Z,"laya.net.Socket",y$n);var y$c=y$Z.prototype;y$c.connect=function(y$_,y$c){var y$e="ws://"+y$_+":"+y$c;y$e="https:"==y$p.window.location.protocol?"wss://"+y$_+":"+y$c:"ws://"+y$_+":"+y$c,this.connectByUrl(y$e)},y$c.connectByUrl=function(y$_){var y$c=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new y$p.window.WebSocket(y$_,this.protocols):this._socket=new y$p.window.WebSocket(y$_),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(y$_){y$c._onOpen(y$_)},this._socket.onmessage=function(y$_){y$c._onMessage(y$_)},this._socket.onclose=function(y$_){y$c._onClose(y$_)},this._socket.onerror=function(y$_){y$c._onError(y$_)}},y$c.cleanSocket=function(){try{this._socket.close()}catch(y$_){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},y$c.close=function(){if(null!=this._socket)try{this._socket.close()}catch(y$_){}},y$c._onOpen=function(y$_){this._connected=!0,this.event("open",y$_)},y$c._onMessage=function(y$_){if(y$_&&y$_.data){var y$c=y$_.data;if(this.disableInput&&y$c)this.event("message",y$c);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var y$e=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,y$c&&("string"==typeof y$c?this._input.writeUTFBytes(y$c):this._input.writeArrayBuffer(y$c),this._addInputPosition=this._input.pos,this._input.pos=y$e),this.event("message",y$c)}}},y$c._onClose=function(y$_){this._connected=!1,this.event("close",y$_)},y$c._onError=function(y$_){this.event("error",y$_)},y$c.send=function(y$_){this._socket.send(y$_)},y$c.flush=function(){if(this._output&&0<this._output.length){var y$c;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(y$_){y$c=y$_}this._output.endian=this.endian,this._output.clear(),y$c&&this.event("error",y$c)}},y$U(0,y$c,"input",function(){return this._input}),y$U(0,y$c,"output",function(){return this._output}),y$U(0,y$c,"connected",function(){return this._connected}),y$U(0,y$c,"endian",function(){return this._endian},function(y$_){this._endian=y$_,null!=this._input&&(this._input.endian=y$_),null!=this._output&&(this._output.endian=y$_)}),y$Z.LITTLE_ENDIAN="littleEndian",y$Z.BIG_ENDIAN="bigEndian"}(),function(y$_){function y$O(){y$O.__super.call(this),this._$1__id=++y$O._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(y$O._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,y$Y.currentResourceManager&&y$Y.currentResourceManager.addResource(this)}y$m(y$O,"laya.resource.Resource",y$n);var y$c=y$O.prototype;return y$M.imps(y$c,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),y$c._setUrl=function(y$_){var y$c;this._url!==y$_&&(this._url&&((y$c=y$O._urlResourcesMap[this._url]).splice(y$c.indexOf(this),1),0===y$c.length&&delete y$O._urlResourcesMap[this._url]),y$_&&((y$c=y$O._urlResourcesMap[y$_])||(y$O._urlResourcesMap[y$_]=y$c=[]),y$c.push(this)),this._url=y$_)},y$c._getGroup=function(){return this._group},y$c._setGroup=function(y$_){var y$c;this._group!==y$_&&(this._group&&((y$c=y$O._groupResourcesMap[this._group]).splice(y$c.indexOf(this),1),0===y$c.length&&delete y$O._groupResourcesMap[this._group]),y$_&&((y$c=y$O._groupResourcesMap[y$_])||(y$O._groupResourcesMap[y$_]=y$c=[]),y$c.push(this)),this._group=y$_)},y$c._addReference=function(){this._referenceCount++},y$c._removeReference=function(){this._referenceCount--},y$c._clearReference=function(){this._referenceCount=0},y$c._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},y$c.recreateResource=function(){this.completeCreate()},y$c.disposeResource=function(){},y$c.activeResource=function(y$_){void 0===y$_&&(y$_=!1),this._lastUseFrameCount=y$g.loopCount,!this._destroyed&&this.__loaded&&(this._released||y$_)&&this.recreateResource()},y$c.releaseResource=function(y$_){return void 0===y$_&&(y$_=!0),!(!y$_&&this.lock)&&(!(this._released&&!y$_)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},y$c.onAsynLoaded=function(y$_,y$c,y$e){throw new Error("Resource: must override this function!")},y$c.destroy=function(){var y$_;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete y$O._idResourcesMap[this.id],this._url&&((y$_=y$O._urlResourcesMap[this._url])&&(y$_.splice(y$_.indexOf(this),1),0===y$_.length&&delete y$O._urlResourcesMap[this.url]),y$O_.clearRes(this._url),this.__loaded||y$y.cancelLoadByUrl(this._url)),this._group&&((y$_=y$O._groupResourcesMap[this._group]).splice(y$_.indexOf(this),1),0===y$_.length&&delete y$O._groupResourcesMap[this.url]))},y$c.completeCreate=function(){this._released=!1,this.event("recovered",this)},y$c.dispose=function(){this.destroy()},y$U(0,y$c,"memorySize",function(){return this._memorySize},function(y$_){var y$c=y$_-this._memorySize;this._memorySize=y$_,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,y$c),this.resourceManager&&this.resourceManager.addSize(y$c)}),y$U(0,y$c,"_loaded",null,function(y$_){this.__loaded=y$_}),y$U(0,y$c,"loaded",function(){return this.__loaded}),y$U(0,y$c,"id",function(){return this._$1__id}),y$U(0,y$c,"destroyed",function(){return this._destroyed}),y$U(0,y$c,"group",function(){return this._getGroup()},function(y$_){this._setGroup(y$_)}),y$U(0,y$c,"resourceManager",function(){return this._resourceManager}),y$U(0,y$c,"url",function(){return this._url}),y$U(0,y$c,"released",function(){return this._released}),y$U(0,y$c,"referenceCount",function(){return this._referenceCount}),y$O.getResourceByID=function(y$_){return y$O._idResourcesMap[y$_]},y$O.getResourceByURL=function(y$_,y$c){return void 0===y$c&&(y$c=0),null==y$O._urlResourcesMap[y$_]?null:y$O._urlResourcesMap[y$_][y$c]},y$O.getResourceCountByURL=function(y$_){return y$O._urlResourcesMap[y$_].length},y$O.destroyUnusedResources=function(y$_){var y$c;if(y$_){var y$e=y$O._groupResourcesMap[y$_];if(y$e)for(var y$Z=y$e.slice(),y$X=0,y$u=y$Z.length;y$X<y$u;y$X++)(y$c=y$Z[y$X]).lock||0!==y$c._referenceCount||y$c.destroy()}else for(var y$P in y$O._idResourcesMap)(y$c=y$O._idResourcesMap[y$P]).lock||0!==y$c._referenceCount||y$c.destroy()},y$O._uniqueIDCounter=0,y$O._idResourcesMap={},y$O._urlResourcesMap={},y$O._groupResourcesMap={},y$O}()),y$m_=function(y$_){function y$v(y$_,y$c){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,y$v.__super.call(this),y$_&&null!=y$_._addReference&&y$_._addReference(),this.setTo(y$_,y$c)}y$m(y$v,"laya.resource.Texture",y$n);var y$c=y$v.prototype;return y$c._setUrl=function(y$_){this.url=y$_},y$c.setTo=function(y$_,y$c){if(y$_ instanceof y$P.HTMLElement){var y$e=y$z_.create("2D",y$_);this.bitmap=y$e}else this.bitmap=y$_;if(this.uv=y$c||y$v.DEF_UV,y$_){this._w=y$_.width,this._h=y$_.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var y$Z=this;if(this._loaded)y$y.addToAtlas&&y$y.addToAtlas(y$Z);else{var y$X=y$_;y$X instanceof laya.resource.HTMLImage&&y$X.image&&y$X.image.addEventListener("load",function(y$_){y$y.addToAtlas&&y$y.addToAtlas(y$Z)},!1)}}},y$c.active=function(){this.bitmap&&this.bitmap.activeResource()},y$c.destroy=function(y$_){if(void 0===y$_&&(y$_=!1),this.alphaTexture&&(this.alphaTexture.destroy(y$_),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var y$c=this.bitmap;y$_?(y$R.isConchApp&&y$c.source&&y$c.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,y$c.dispose(),y$c._clearReference()):(y$c._removeReference(),0==y$c.referenceCount&&(y$R.isConchApp&&y$c.source&&y$c.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,y$c.dispose())),this.url&&this===y$M.loader.getRes(this.url)&&y$M.loader.clearRes(this.url,y$_),this._loaded=!1}},y$c.load=function(y$_){var y$c=this;this._loaded=!1,y$_=y$h.customFormat(y$_);var y$e=this.bitmap||(this.bitmap=y$K_.create(y$_));y$e.uri=y$_,y$e&&y$e._addReference();var y$Z=this;y$e.onload=function(){y$e.onload=null,y$Z._loaded=!0,y$c.sourceWidth=y$c._w=y$e.width,y$c.sourceHeight=y$c._h=y$e.height,y$Z.event("loaded",this),y$y.addToAtlas&&y$y.addToAtlas(y$Z)}},y$c.addTextureToAtlas=function(y$_){y$y.addTextureToAtlas(this)},y$c.getPixels=function(y$_,y$c,y$e,y$Z){if(y$R.isConchApp){var y$X=this.bitmap;if(y$X.source&&y$X.source.getImageData){var y$u=y$X.source.getImageData(y$_,y$c,y$e,y$Z),y$P=new Uint8Array(y$u);return Array.from(y$P)}return null}return y$R.isWebGL?y$y.getTexturePixels(this,y$_,y$c,y$e,y$Z):(y$p.canvas.size(y$e,y$Z),y$p.canvas.clear(),y$p.context.drawTexture(this,-y$_,-y$c,this.width,this.height,0,0),y$p.context.getImageData(0,0,y$e,y$Z).data)},y$c.onAsynLoaded=function(y$_,y$c){if(y$c){if("function"!=typeof y$c._addReference)throw new Error("bitmap._addReference is not a function. "+y$c.className+" "+typeof y$c._addReference+" "+y$c.constructor);y$c._addReference()}this.setTo(y$c,this.uv),this._loaded&&this.event("loaded",this)},y$U(0,y$c,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),y$U(0,y$c,"loaded",function(){return this._loaded}),y$U(0,y$c,"released",function(){return!this.bitmap||this.bitmap.released}),y$U(0,y$c,"width",function(){return this._w?this._w:this.uv&&this.uv!==y$v.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(y$_){this._w=y$_,this.sourceWidth||(this.sourceWidth=y$_)}),y$U(0,y$c,"repeat",function(){return!y$R.isWebGL||!this.bitmap||this.bitmap.repeat},function(y$_){y$_&&y$R.isWebGL&&this.bitmap&&(this.bitmap.repeat=y$_)&&(this.bitmap.enableMerageInAtlas=!1)}),y$U(0,y$c,"height",function(){return this._h?this._h:this.uv&&this.uv!==y$v.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(y$_){this._h=y$_,this.sourceHeight||(this.sourceHeight=y$_)}),y$U(0,y$c,"isLinearSampling",function(){return!y$R.isWebGL||9728!=this.bitmap.minFifter},function(y$_){!y$_&&y$R.isWebGL&&(y$_||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),y$v.moveUV=function(y$_,y$c,y$e){for(var y$Z=0;y$Z<8;y$Z+=2)y$e[y$Z]+=y$_,y$e[y$Z+1]+=y$c;return y$e},y$v.create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){void 0===y$u&&(y$u=0),void 0===y$P&&(y$P=0),void 0===y$O&&(y$O=0),void 0===y$s&&(y$s=0);var y$n=y$_ instanceof laya.resource.Texture,y$m=y$n?y$_.uv:y$v.DEF_UV,y$H=y$n?y$_.bitmap:y$_,y$B=y$y.isAtlas(y$H);if(y$B){var y$D=y$H._atlaser,y$U=y$_._atlasID;if(-1==y$U)throw new Error("create texture error");y$H=y$D._inAtlasTextureBitmapValue[y$U],y$m=y$D._inAtlasTextureOriUVValue[y$U]}var y$k=new y$v(y$H,null);y$H.width&&y$c+y$Z>y$H.width&&(y$Z=y$H.width-y$c),y$H.height&&y$e+y$X>y$H.height&&(y$X=y$H.height-y$e),y$k.width=y$Z,y$k.height=y$X,y$k.offsetX=y$u,y$k.offsetY=y$P,y$k.sourceWidth=y$O||y$Z,y$k.sourceHeight=y$s||y$X;var y$a=1/y$H.width,y$G=1/y$H.height;y$c*=y$a,y$e*=y$G,y$Z*=y$a,y$X*=y$G;var y$w=y$k.uv[0],y$z=y$k.uv[1],y$L=y$k.uv[4],y$q=y$k.uv[5],y$K=y$L-y$w,y$M=y$q-y$z,y$f=y$v.moveUV(y$m[0],y$m[1],[y$c,y$e,y$c+y$Z,y$e,y$c+y$Z,y$e+y$X,y$c,y$e+y$X]);y$k.uv=[y$w+y$f[0]*y$K,y$z+y$f[1]*y$M,y$L-(1-y$f[2])*y$K,y$z+y$f[3]*y$M,y$L-(1-y$f[4])*y$K,y$q-(1-y$f[5])*y$M,y$w+y$f[6]*y$K,y$q-(1-y$f[7])*y$M],y$B&&y$k.addTextureToAtlas();var y$A=y$H.scaleRate;return y$A&&1!=y$A?(y$k.sourceWidth/=y$A,y$k.sourceHeight/=y$A,y$k.width/=y$A,y$k.height/=y$A,y$k.scaleRate=y$A,y$k.offsetX/=y$A,y$k.offsetY/=y$A):y$k.scaleRate=1,y$k},y$v.createFromTexture=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$_.scaleRate;1!=y$u&&(y$c*=y$u,y$e*=y$u,y$Z*=y$u,y$X*=y$u);var y$P=y$A.TEMP.setTo(y$c-y$_.offsetX,y$e-y$_.offsetY,y$Z,y$X),y$O=y$P.intersection(y$v._rect1.setTo(0,0,y$_.width,y$_.height),y$v._rect2);if(!y$O)return null;var y$s=y$v.create(y$_,y$O.x,y$O.y,y$O.width,y$O.height,y$O.x-y$P.x,y$O.y-y$P.y,y$Z,y$X);if(y$s.bitmap&&y$s.bitmap._removeReference)return y$s.bitmap._removeReference(),y$s;var y$n="bitmap:"+(y$s.bitmap?y$s.bitmap.constructor?y$s.bitmap.constructor.name:y$s.bitmap.__className:"")+", url:"+(y$_.url+" | "+(y$s.bitmap?y$s.bitmap.url:y$_.url))+", x="+y$c+",y="+y$e+",width="+y$Z+",height="+y$X+", result="+(y$O?y$O.x+","+y$O.y+","+y$O.width+","+y$O.height:"null")+", rect="+y$P.x+","+y$P.y+","+y$P.width+","+y$P.height;throw new Error("报错：bitmap._removeReference is not a function  "+y$n)},y$v.DEF_UV=[0,0,1,0,1,1,0,1],y$v.INV_UV=[0,1,1,1,1,0,0,0],y$v._rect1=new y$A,y$v._rect2=new y$A,y$v}(),y$_=function(y$_){var y$O;function y$u(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,y$u.__super.call(this)}y$m(y$u,"laya.utils.TimeLine",y$n);var y$c=y$u.prototype;return y$c.to=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$X&&(y$X=0),this._create(y$_,y$c,y$e,y$Z,y$X,!0)},y$c.from=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$X&&(y$X=0),this._create(y$_,y$c,y$e,y$Z,y$X,!1)},y$c._create=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$V.getItemByClass("tweenData",y$O);return y$P.isTo=y$u,y$P.type=0,y$P.target=y$_,y$P.duration=y$e,y$P.data=y$c,y$P.startTime=this._startTime+y$X,y$P.endTime=y$P.startTime+y$P.duration,y$P.ease=y$Z,this._startTime=Math.max(y$P.endTime,this._startTime),this._tweenDataList.push(y$P),this._startTimeSort=!0,this._endTimeSort=!0,this},y$c.addLabel=function(y$_,y$c){var y$e=y$V.getItemByClass("tweenData",y$O);return y$e.type=1,y$e.data=y$_,y$e.endTime=y$e.startTime=this._startTime+y$c,this._labelDic||(this._labelDic={}),this._labelDic[y$_]=y$e,this._tweenDataList.push(y$e),this},y$c.removeLabel=function(y$_){if(this._labelDic&&this._labelDic[y$_]){var y$c=this._labelDic[y$_];if(y$c){var y$e=this._tweenDataList.indexOf(y$c);-1<y$e&&this._tweenDataList.splice(y$e,1)}delete this._labelDic[y$_]}},y$c.gotoTime=function(y$_){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var y$c,y$e,y$Z,y$X;for(var y$u in this._firstTweenDic)if(y$e=this._firstTweenDic[y$u])for(var y$P in y$e)y$e.diyTarget.hasOwnProperty(y$P)&&(y$e.diyTarget[y$P]=y$e[y$P]);for(y$u in this._tweenDic)(y$c=this._tweenDic[y$u]).clear(),delete this._tweenDic[y$u];if(this._index=0,this._gidIndex=0,this._currTime=y$_,this._lastTime=y$p.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=y$Z=this._tweenDataList.concat(),y$Z.sort(function(y$_,y$c){return y$_.endTime>y$c.endTime?1:y$_.endTime<y$c.endTime?-1:0})}else y$Z=this._endTweenDataList;for(var y$O=0,y$s=y$Z.length;y$O<y$s;y$O++)if(0==(y$X=y$Z[y$O]).type){if(!(y$_>=y$X.endTime))break;this._index=Math.max(this._index,y$O+1);var y$n=y$X.data;if(y$X.isTo)for(var y$m in y$n)y$X.target[y$m]=y$n[y$m]}for(y$O=0,y$s=this._tweenDataList.length;y$O<y$s;y$O++)0==(y$X=this._tweenDataList[y$O]).type&&y$_>=y$X.startTime&&y$_<y$X.endTime&&(this._index=Math.max(this._index,y$O+1),this._gidIndex++,(y$c=y$V.getItemByClass("tween",y$E))._create(y$X.target,y$X.data,y$X.duration,y$X.ease,y$w.create(this,this._animComplete,[this._gidIndex]),0,!1,y$X.isTo,!0,!1),y$c.setStartTime(this._currTime-(y$_-y$X.startTime)),y$c._updateEase(this._currTime),y$c.gid=this._gidIndex,this._tweenDic[this._gidIndex]=y$c)}},y$c.gotoLabel=function(y$_){if(null!=this._labelDic){var y$c=this._labelDic[y$_];y$c&&this.gotoTime(y$c.startTime)}},y$c.pause=function(){y$M.timer.clear(this,this._update)},y$c.resume=function(){this.play(this._currTime,this._loopKey)},y$c.play=function(y$_,y$c){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(y$_,y$c){return y$_.startTime>y$c.startTime?1:y$_.startTime<y$c.startTime?-1:0});for(var y$e=0,y$Z=this._tweenDataList.length;y$e<y$Z;y$e++){var y$X=this._tweenDataList[y$e];if(null!=y$X&&0==y$X.type){var y$u=y$X.target,y$P=y$u.$_GID||(y$u.$_GID=y$W.getGID()),y$O=null;for(var y$s in null==this._firstTweenDic[y$P]?((y$O={}).diyTarget=y$u,this._firstTweenDic[y$P]=y$O):y$O=this._firstTweenDic[y$P],y$X.data)null==y$O[y$s]&&(y$O[y$s]=y$u[y$s])}}}"string"==typeof y$_?this.gotoLabel(y$_):this.gotoTime(y$_),this._loopKey=y$c,this._lastTime=y$p.now(),y$M.timer.frameLoop(1,this,this._update)}},y$c._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var y$_ in this._tweenDic)(y$c=this._tweenDic[y$_]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var y$c,y$e=y$p.now(),y$Z=y$e-this._lastTime,y$X=this._currTime+=y$Z*this.scale;for(y$_ in this._lastTime=y$e,this._tweenDic)(y$c=this._tweenDic[y$_])._updateEase(y$X);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var y$u=this._tweenDataList[this._index];y$X>=y$u.startTime&&(this._index++,0==y$u.type?(this._gidIndex++,(y$c=y$V.getItemByClass("tween",y$E))._create(y$u.target,y$u.data,y$u.duration,y$u.ease,y$w.create(this,this._animComplete,[this._gidIndex]),0,!1,y$u.isTo,!0,!1),y$c.setStartTime(y$X),y$c.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=y$c)._updateEase(y$X)):this.event("label",y$u.data))}},y$c._animComplete=function(y$_){this._tweenDic[y$_]&&delete this._tweenDic[y$_]},y$c._complete=function(){this.event("complete")},y$c.reset=function(){var y$_;if(this._labelDic)for(y$_ in this._labelDic)delete this._labelDic[y$_];for(y$_ in this._tweenDic)this._tweenDic[y$_].clear(),delete this._tweenDic[y$_];for(y$_ in this._firstTweenDic)delete this._firstTweenDic[y$_];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var y$c,y$e=0;for(y$c=this._tweenDataList.length,y$e=0;y$e<y$c;y$e++)this._tweenDataList[y$e]&&this._tweenDataList[y$e].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,y$M.timer.clear(this,this._update)},y$c.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},y$U(0,y$c,"index",function(){return this._frameIndex},function(y$_){this._frameIndex=y$_,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),y$U(0,y$c,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),y$u.to=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$X&&(y$X=0),(new y$u).to(y$_,y$c,y$e,y$Z,y$X)},y$u.from=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$X&&(y$X=0),(new y$u).from(y$_,y$c,y$e,y$Z,y$X)},y$u.__init$=function(){y$O=function(){function y$_(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return y$m(y$_,""),y$_.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,y$V.recover("tweenData",this)},y$_}()},y$u}(),y$H_=function(y$X){function y$e(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,y$e.__super.call(this),this._style=y$O.EMPTY}y$m(y$e,"laya.display.Sprite",y$X);var y$_=y$e.prototype;return y$M.imps(y$_,{"laya.display.ILayout":!0}),y$_.createConchModel=function(){return new ConchNode},y$_.destroy=function(y$_){if(void 0===y$_&&(y$_=!0),this._releaseMem(),!this._destroyed){this.filters=null;var y$c=this.mask;y$c&&(this.mask=null,y$c.destroy(y$_))}y$X.prototype.destroy.call(this,y$_),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},y$_.updateZOrder=function(){y$W.updateOrder(this._childs)&&this.repaint()},y$_.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},y$_.setBounds=function(y$_){this._set$P("uBounds",y$_)},y$_.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new y$A),y$A._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},y$_.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new y$A),y$A._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},y$_._boundPointsToParent=function(y$_){void 0===y$_&&(y$_=!1);var y$c=0,y$e=0;this._style&&(y$c=this._style._tf.translateX,y$e=this._style._tf.translateY,y$_=y$_||0!==this._style._tf.rotate,this._style.scrollRect&&(y$c+=this._style.scrollRect.x,y$e+=this._style.scrollRect.y));var y$Z=this._getBoundPointsM(y$_);if(!y$Z||y$Z.length<1)return y$Z;if(8!=y$Z.length&&(y$Z=y$_?y$q.scanPList(y$Z):y$A._getWrapRec(y$Z,y$A.TEMP)._getBoundPoints()),!this.transform)return y$W.transPointList(y$Z,this._x-y$c,this._y-y$e),y$Z;var y$X=y$f.TEMP,y$u=0,y$P=y$Z.length;for(y$u=0;y$u<y$P;y$u+=2)y$X.x=y$Z[y$u],y$X.y=y$Z[y$u+1],this.toParentPoint(y$X),y$Z[y$u]=y$X.x,y$Z[y$u+1]=y$X.y;return y$Z},y$_.getGraphicBounds=function(y$_){return void 0===y$_&&(y$_=!1),this._graphics?this._graphics.getBounds(y$_):y$A.TEMP.setTo(0,0,0,0)},y$_._getBoundPointsM=function(y$_){if(void 0===y$_&&(y$_=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var y$c=y$W.clearArray(this._$P.temBM),y$e=y$A.TEMP;return y$e.copyFrom(this.scrollRect),y$W.concatArray(y$c,y$e._getBoundPoints()),y$c}for(var y$Z,y$X,y$u,y$P=this._graphics?this._graphics.getBoundPoints():y$W.clearArray(this._$P.temBM),y$O=0,y$s=(y$u=this._childs).length;y$O<y$s;y$O++)(y$Z=y$u[y$O])instanceof laya.display.Sprite&&1==y$Z.visible&&(y$X=y$Z._boundPointsToParent(y$_))&&(y$P=y$P?y$W.concatArray(y$P,y$X):y$X);return y$P},y$_.getStyle=function(){return this._style===y$O.EMPTY&&(this._style=new y$O),this._style},y$_.setStyle=function(y$_){this._style=y$_},y$_._adjustTransform=function(){this._tfChanged=!1;var y$_,y$c=this._style._tf,y$e=y$c.scaleX,y$Z=y$c.scaleY;if(y$c.rotate||1!==y$e||1!==y$Z||y$c.skewX||y$c.skewY){(y$_=this._transform||(this._transform=y$$.create())).bTransform=!0;var y$X=.0174532922222222*(y$c.rotate-y$c.skewX),y$u=.0174532922222222*(y$c.rotate+y$c.skewY),y$P=Math.cos(y$u),y$O=Math.sin(y$u),y$s=Math.sin(y$X),y$n=Math.cos(y$X);return y$_.a=y$e*y$P,y$_.b=y$e*y$O,y$_.c=-y$Z*y$s,y$_.d=y$Z*y$n,y$_.tx=y$_.ty=0,y$_}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,y$_},y$_.pos=function(y$_,y$c,y$e){if(void 0===y$e&&(y$e=!1),this._x!==y$_||this._y!==y$c){if(this.destroyed)return this;if(y$e){this._x=y$_,this._y=y$c,this.conchModel&&this.conchModel.pos(this._x,this._y);var y$Z=this._parent;y$Z&&0===y$Z._repaint&&(y$Z._repaint=1,y$Z.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=y$_,this.y=y$c}return this},y$_.pivot=function(y$_,y$c){return this.pivotX=y$_,this.pivotY=y$c,this},y$_.size=function(y$_,y$c){return this.width=y$_,this.height=y$c,this},y$_.scale=function(y$_,y$c,y$e){void 0===y$e&&(y$e=!1);var y$Z=this.getStyle(),y$X=y$Z._tf;if(y$X.scaleX!=y$_||y$X.scaleY!=y$c){if(this.destroyed)return this;if(y$e){y$Z.setScale(y$_,y$c),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(y$_,y$c),this._renderType|=4;var y$u=this._parent;y$u&&0===y$u._repaint&&(y$u._repaint=1,y$u.parentRepaint())}else this.scaleX=y$_,this.scaleY=y$c}return this},y$_.skew=function(y$_,y$c){return this.skewX=y$_,this.skewY=y$c,this},y$_.render=function(y$_,y$c,y$e){y$g.spriteCount++,y$x.renders[this._renderType]._fun(this,y$_,y$c+this._x,y$e+this._y),this._repaint=0},y$_.drawToCanvas=function(y$_,y$c,y$e,y$Z){if(y$R.isConchNode){var y$X=y$z_.create("2D");return new y$i(y$_,y$c,y$X).ctx.setCanvasType(1),this.conchModel.drawToCanvas(y$X.source,y$e,y$Z),y$X}return y$y.drawToCanvas(this,this._renderType,y$_,y$c,y$e,y$Z)},y$_.customRender=function(y$_,y$c,y$e){this._renderType|=1024},y$_._applyFilters=function(){var y$_;if(!y$R.isWebGL&&((y$_=this._$P.filters)&&!(y$_.length<1)))for(var y$c=0,y$e=y$_.length;y$c<y$e;y$c++)y$_[y$c].action.apply(this._$P.cacheCanvas)},y$_._isHaveGlowFilter=function(){var y$_,y$c=0;if(this.filters)for(y$c=0;y$c<this.filters.length;y$c++)if(8==this.filters[y$c].type)return!0;for(y$c=0,y$_=this._childs.length;y$c<y$_;y$c++)if(this._childs[y$c]._isHaveGlowFilter())return!0;return!1},y$_.localToGlobal=function(y$_,y$c){void 0===y$c&&(y$c=!1),!0===y$c&&(y$_=new y$f(y$_.x,y$_.y));for(var y$e=this;y$e&&y$e!=y$M.stage;)y$_=y$e.toParentPoint(y$_),y$e=y$e.parent;return y$_},y$_.globalToLocal=function(y$_,y$c){void 0===y$c&&(y$c=!1),y$c&&(y$_=new y$f(y$_.x,y$_.y));for(var y$e=this,y$Z=[];y$e&&y$e!=y$M.stage;)y$Z.push(y$e),y$e=y$e.parent;for(var y$X=y$Z.length-1;0<=y$X;)y$_=(y$e=y$Z[y$X]).fromParentPoint(y$_),y$X--;return y$_},y$_.toParentPoint=function(y$_){if(!y$_)return y$_;y$_.x-=this.pivotX,y$_.y-=this.pivotY,this.transform&&this._transform.transformPoint(y$_),y$_.x+=this._x,y$_.y+=this._y;var y$c=this._style.scrollRect;return y$c&&(y$_.x-=y$c.x,y$_.y-=y$c.y),y$_},y$_.fromParentPoint=function(y$_){if(!y$_)return y$_;y$_.x-=this._x,y$_.y-=this._y;var y$c=this._style.scrollRect;return y$c&&(y$_.x+=y$c.x,y$_.y+=y$c.y),this.transform&&this._transform.invertTransformPoint(y$_),y$_.x+=this.pivotX,y$_.y+=this.pivotY,y$_},y$_.on=function(y$_,y$c,y$e,y$Z){return 1!==this._mouseEnableState&&this.isMouseEvent(y$_)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(y$_,y$c,y$e,y$Z,!1)):y$X.prototype.on.call(this,y$_,y$c,y$e,y$Z)},y$_.once=function(y$_,y$c,y$e,y$Z){return 1!==this._mouseEnableState&&this.isMouseEvent(y$_)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(y$_,y$c,y$e,y$Z,!0)):y$X.prototype.once.call(this,y$_,y$c,y$e,y$Z)},y$_._$2__onDisplay=function(){if(1!==this._mouseEnableState){var y$_=this;for(y$_=y$_.parent;y$_&&1!==y$_._mouseEnableState&&!y$_._getBit(2);)y$_.mouseEnabled=!0,y$_._setBit(2,!0),y$_=y$_.parent}},y$_.loadImage=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=this;return void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),this.graphics.loadImage(y$_,y$c,y$e,y$Z,y$X,function(y$_){y$P.destroyed||(y$P.size(y$c+(y$Z||y$_.width),y$e+(y$X||y$_.height)),y$P.repaint(),y$u&&y$u.runWith(y$_))}),this},y$_.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},y$_._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},y$_._childChanged=function(y$_){this._childs.length?this._renderType|=2048:this._renderType&=-2049,y$_&&this._get$P("hasZorder")&&y$M.timer.callLater(this,this.updateZOrder),this.repaint()},y$_.parentRepaint=function(){var y$_=this._parent;y$_&&0===y$_._repaint&&(y$_._repaint=1,y$_.parentRepaint())},y$_.startDrag=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){void 0===y$c&&(y$c=!1),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=300),void 0===y$u&&(y$u=!1),void 0===y$P&&(y$P=.92),this._$P.dragging||this._set$P("dragging",new y$t),this._$P.dragging.start(this,y$_,y$c,y$e,y$Z,y$X,y$u,y$P)},y$_.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},y$_._releaseMem=function(){if(this._$P){var y$_=this._$P.cacheCanvas;y$_&&y$_.ctx&&(y$V.recover("RenderContext",y$_.ctx),y$_.ctx.canvas.size(0,0),y$_.ctx=null);var y$c=this._$P._filterCache;y$c&&(y$c.destroy(),y$c.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},y$_._setDisplay=function(y$_){y$_||this._releaseMem(),y$X.prototype._setDisplay.call(this,y$_)},y$_.hitTestPoint=function(y$_,y$c){var y$e=this.globalToLocal(y$f.TEMP.setTo(y$_,y$c));return y$_=y$e.x,y$c=y$e.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?y$A.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(y$_,y$c)},y$_.getMousePoint=function(){return this.globalToLocal(y$f.TEMP.setTo(y$M.stage.mouseX,y$M.stage.mouseY))},y$_._getWords=function(){return null},y$_._addChildsToLayout=function(y$_){var y$c=this._getWords();if(null==y$c&&0==this._childs.length)return!1;if(y$c)for(var y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++)y$_.push(y$c[y$e]);y$e=0;for(var y$X=this._childs.length;y$e<y$X;++y$e){var y$u=this._childs[y$e];y$u._style._enableLayout()&&y$u._addToLayout(y$_)}return!0},y$_._addToLayout=function(y$_){this._style.absolute||(this._style.block?y$_.push(this):this._addChildsToLayout(y$_)&&(this.x=this.y=0))},y$_._isChar=function(){return!1},y$_._getCSSStyle=function(){return this._style.getCSSStyle()},y$_._setAttributes=function(y$_,y$c){switch(y$_){case"x":this.x=parseFloat(y$c);break;case"y":this.y=parseFloat(y$c);break;case"width":this.width=parseFloat(y$c);break;case"height":this.height=parseFloat(y$c);break;default:this[y$_]=y$c}},y$_._layoutLater=function(){this.parent&&this.parent._layoutLater()},y$U(0,y$_,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(y$_){this._optimizeScrollRect!=y$_&&(this._optimizeScrollRect=y$_,this.conchModel&&this.conchModel.optimizeScrollRect(y$_))}),y$U(0,y$_,"customRenderEnable",null,function(y$_){if(y$_&&(this._renderType|=1024,y$R.isConchNode)){y$e.CustomList.push(this);var y$c=new y$z_("2d");y$c._setContext(new CanvasRenderingContext2D),this.customContext=new y$i(0,0,y$c),y$c.context.setCanvasType&&y$c.context.setCanvasType(2),this.conchModel.custom(y$c.context)}}),y$U(0,y$_,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(y$_){this.cacheAs=y$_?this._$P.hasFilter?"none":"normal":"none"}),y$U(0,y$_,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(y$_){var y$c=this._$P.cacheCanvas;if(y$_!==(y$c?y$c.type:"none")){if("none"!==y$_)this._getBit(1)||this._setUpNoticeType(1),y$c||(y$c=this._set$P("cacheCanvas",y$V.getItemByClass("cacheCanvas",Object))),y$c.type=y$_,y$c.reCache=!0,this._renderType|=16,"bitmap"==y$_&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(y$c){var y$e=y$c;y$e&&y$e.ctx&&(y$V.recover("RenderContext",y$e.ctx),y$e.ctx.canvas.size(0,0),y$e.ctx=null),y$V.recover("cacheCanvas",y$c)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),y$U(0,y$_,"zOrder",function(){return this._zOrder},function(y$_){this._zOrder!=y$_&&(this._zOrder=y$_,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(y$_),this._parent&&(y$_&&this._parent._set$P("hasZorder",!0),y$M.timer.callLater(this._parent,this.updateZOrder)))}),y$U(0,y$_,"rotation",function(){return this._style._tf.rotate},function(y$_){var y$c=this.getStyle();if(y$c._tf.rotate!==y$_){y$c.setRotate(y$_),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(y$_),this._renderType|=4;var y$e=this._parent;y$e&&0===y$e._repaint&&(y$e._repaint=1,y$e.parentRepaint())}}),y$U(0,y$_,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(y$_){this._width!==y$_&&(this._width=y$_,this.conchModel&&this.conchModel.size(y$_,this._height),this.repaint())}),y$U(0,y$_,"x",function(){return this._x},function(y$_){if(this._x!==y$_){if(this.destroyed)return;this._x=y$_,this.conchModel&&this.conchModel.pos(y$_,this._y);var y$c=this._parent;y$c&&0===y$c._repaint&&(y$c._repaint=1,y$c.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),y$U(0,y$_,"globalScaleY",function(){for(var y$_=1,y$c=this;y$c&&y$c!==y$M.stage;)y$_*=y$c.scaleY,y$c=y$c.parent;return y$_}),y$U(0,y$_,"hitArea",function(){return this._$P.hitArea},function(y$_){this._set$P("hitArea",y$_)}),y$U(0,y$_,"staticCache",function(){return this._$P.staticCache},function(y$_){this._set$P("staticCache",y$_),y$_||this.reCache()}),y$U(0,y$_,"texture",function(){return this._texture},function(y$_){this._texture!=y$_&&(this._texture=y$_,this.graphics.cleanByTexture(y$_,0,0))}),y$U(0,y$_,"y",function(){return this._y},function(y$_){if(this._y!==y$_){if(this.destroyed)return;this._y=y$_,this.conchModel&&this.conchModel.pos(this._x,y$_);var y$c=this._parent;y$c&&0===y$c._repaint&&(y$c._repaint=1,y$c.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),y$U(0,y$_,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(y$_){this._height!==y$_&&(this._height=y$_,this.conchModel&&this.conchModel.size(this._width,y$_),this.repaint())}),y$U(0,y$_,"blendMode",function(){return this._style.blendMode},function(y$_){this.getStyle().blendMode=y$_,this.conchModel&&this.conchModel.blendMode(y$_),y$_&&"source-over"!=y$_?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),y$U(0,y$_,"scaleX",function(){return this._style._tf.scaleX},function(y$_){var y$c=this.getStyle();if(y$c._tf.scaleX!==y$_){y$c.setScaleX(y$_),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(y$_,y$c._tf.scaleY),this._renderType|=4;var y$e=this._parent;y$e&&0===y$e._repaint&&(y$e._repaint=1,y$e.parentRepaint())}}),y$U(0,y$_,"scaleY",function(){return this._style._tf.scaleY},function(y$_){var y$c=this.getStyle();if(y$c._tf.scaleY!==y$_){y$c.setScaleY(y$_),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(y$c._tf.scaleX,y$_),this._renderType|=4;var y$e=this._parent;y$e&&0===y$e._repaint&&(y$e._repaint=1,y$e.parentRepaint())}}),y$U(0,y$_,"stage",function(){return y$M.stage}),y$U(0,y$_,"skewX",function(){return this._style._tf.skewX},function(y$_){var y$c=this.getStyle();if(y$c._tf.skewX!==y$_){y$c.setSkewX(y$_),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(y$_,y$c._tf.skewY),this._renderType|=4;var y$e=this._parent;y$e&&0===y$e._repaint&&(y$e._repaint=1,y$e.parentRepaint())}}),y$U(0,y$_,"scrollRect",function(){return this._style.scrollRect},function(y$_){this.getStyle().scrollRect=y$_,this.repaint(),y$_?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(y$_.x,y$_.y,y$_.width,y$_.height)):(this._renderType&=-129,this.conchModel&&(y$e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),y$U(0,y$_,"skewY",function(){return this._style._tf.skewY},function(y$_){var y$c=this.getStyle();if(y$c._tf.skewY!==y$_){y$c.setSkewY(y$_),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(y$c._tf.skewX,y$_),this._renderType|=4;var y$e=this._parent;y$e&&0===y$e._repaint&&(y$e._repaint=1,y$e.parentRepaint())}}),y$U(0,y$_,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(y$_){this._tfChanged=!1,(this._transform=y$_)&&(this._x=y$_.tx,this._y=y$_.ty,y$_.tx=y$_.ty=0,this.conchModel&&this.conchModel.transform(y$_.a,y$_.b,y$_.c,y$_.d,this._x,this._y)),y$_?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),y$U(0,y$_,"pivotX",function(){return this._style._tf.translateX},function(y$_){this.getStyle().setTranslateX(y$_),this.conchModel&&this.conchModel.pivot(y$_,this._style._tf.translateY),this.repaint()}),y$U(0,y$_,"pivotY",function(){return this._style._tf.translateY},function(y$_){this.getStyle().setTranslateY(y$_),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,y$_),this.repaint()}),y$U(0,y$_,"alpha",function(){return this._style.alpha},function(y$_){this._style&&this._style.alpha!==y$_&&(y$_=y$_<0?0:1<y$_?1:y$_,this.getStyle().alpha=y$_,this.conchModel&&this.conchModel.alpha(y$_),1!==y$_?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),y$U(0,y$_,"visible",function(){return this._style.visible},function(y$_){this._style&&this._style.visible!==y$_&&(this.getStyle().visible=y$_,this.conchModel&&this.conchModel.visible(y$_),this.parentRepaint())}),y$U(0,y$_,"graphics",function(){return this._graphics||(this.graphics=y$y.createGraphics())},function(y$_){this._graphics&&(this._graphics._sp=null),(this._graphics=y$_)?(this._renderType&=-2,this._renderType|=512,(y$_._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(y$e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),y$U(0,y$_,"filters",function(){return this._$P.filters},function(y$_){y$_&&0===y$_.length&&(y$_=null),this._$P.filters!=y$_&&(this._set$P("filters",y$_?y$_.slice():null),y$R.isConchApp&&(this.conchModel&&(y$e.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),y$R.isWebGL&&(y$_&&y$_.length?this._renderType|=32:this._renderType&=-33),y$_&&0<y$_.length?(this._getBit(1)||this._setUpNoticeType(1),y$R.isWebGL&&1==y$_.length&&y$_[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(y$R.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),y$U(0,y$_,"parent",y$X.prototype._$get_parent,function(y$_){y$M.superSet(y$__,this,"parent",y$_),y$_&&this._getBit(2)&&this._$2__onDisplay()}),y$U(0,y$_,"mask",function(){return this._$P._mask},function(y$_){y$_&&this.mask&&this.mask._$P.maskParent||(y$_?(this.cacheAs="bitmap",this._set$P("_mask",y$_),y$_._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",y$_),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(y$_?y$_.conchModel:null),this._renderType|=64,this.parentRepaint())}),y$U(0,y$_,"mouseEnabled",function(){return 1<this._mouseEnableState},function(y$_){this._mouseEnableState=y$_?2:1}),y$U(0,y$_,"globalScaleX",function(){for(var y$_=1,y$c=this;y$c&&y$c!==y$M.stage;)y$_*=y$c.scaleX,y$c=y$c.parent;return y$_}),y$U(0,y$_,"mouseX",function(){return this.getMousePoint().x}),y$U(0,y$_,"mouseY",function(){return this.getMousePoint().y}),y$e.fromImage=function(y$_){return(new y$e).loadImage(y$_)},y$e._cachePool=[],y$e.CustomList=[],y$s(y$e,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=y$P.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),y$e}(y$__),y$B_=function(y$_){function y$c(y$_){this._audio=null,this._onEnd=null,this._resumePlay=null,y$c.__super.call(this),this._onEnd=y$W.bind(this.__onEnd,this),this._resumePlay=y$W.bind(this.__resumePlay,this),y$_.addEventListener("ended",this._onEnd),this._audio=y$_}y$m(y$c,"laya.media.h5audio.AudioSoundChannel",y$Z_);var y$e=y$c.prototype;return y$e.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(y$M.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},y$e.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,y$p.container.appendChild(this._audio),this._audio.play()}catch(y$_){this.event("error")}},y$e.play=function(y$_){this.isStopped=!1;try{this._audio.playbackRate=y$C.playbackRate,this._audio.currentTime=this.startTime}catch(y$_){return void this._audio.addEventListener("canplay",this._resumePlay)}y$C.addChannel(this),y$p.container.appendChild(this._audio),!y$_&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},y$e.stop=function(){this.isStopped=!0,y$C.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&y$R.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),y$p.onIE||this._audio!=y$e_._musicAudio&&y$V.recover("audio:"+this.url,this._audio),y$p.removeElement(this._audio),this._audio=null)},y$e.pause=function(){this.isStopped=!0,y$C.removeChannel(this),"pause"in this._audio&&this._audio.pause()},y$e.resume=function(){this._audio&&(this.isStopped=!1,y$C.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},y$U(0,y$e,"position",function(){return this._audio?this._audio.currentTime:0}),y$U(0,y$e,"duration",function(){return this._audio?this._audio.duration:0}),y$U(0,y$e,"volume",function(){return this._audio?this._audio.volume:1},function(y$_){this._audio&&(this._audio.volume=y$_)}),y$c}(),y$D_=function(y$_){function y$c(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=y$u_.ctx,y$c.__super.call(this),this._onPlayEnd=y$W.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}y$m(y$c,"laya.media.webaudio.WebAudioSoundChannel",y$Z_);var y$e=y$c.prototype;return y$e.play=function(y$_){if(y$C.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var y$c=this.context,y$e=this.gain,y$Z=y$c.createBufferSource();(this.bufferSource=y$Z).buffer=this.audioBuffer,y$Z.connect(y$e),y$e&&y$e.disconnect(),y$e.connect(y$c.destination),y$Z.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=y$p.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(y$Z.loop=!0),y$Z.playbackRate.setTargetAtTime?y$Z.playbackRate.setTargetAtTime(y$C.playbackRate,this.context.currentTime,.1):y$Z.playbackRate.value=y$C.playbackRate,y$Z.start(0,this.startTime),!y$_&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},y$e.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(y$M.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},y$e._clearBufferSource=function(){if(this.bufferSource){var y$_=this.bufferSource;y$_.stop?y$_.stop(0):y$_.noteOff(0),y$_.disconnect(0),y$_.onended=null,y$c._tryCleanFailed||this._tryClearBuffer(y$_),this.bufferSource=null}},y$e._tryClearBuffer=function(y$_){try{y$_.buffer=null}catch(y$_){y$c._tryCleanFailed=!0}},y$e.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,y$C.removeChannel(this),this.startHandler=null,this.completeHandler=null},y$e.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,y$C.removeChannel(this)},y$e.resume=function(){this.startTime=this._pauseTime,this.play(!1)},y$U(0,y$e,"position",function(){return this.bufferSource?(y$p.now()-this._startTime)/1e3+this.startTime:0}),y$U(0,y$e,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),y$U(0,y$e,"volume",function(){return this._volume},function(y$_){this.isStopped||(this._volume=y$_,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(y$_,this.context.currentTime,.1):this.gain.gain.value=y$_)}),y$c._tryCleanFailed=!1,y$c}(),y$U_=function(y$_){function y$c(){y$c.__super.call(this),this._w=0,this._h=0}y$m(y$c,"laya.resource.Bitmap",y$n_);var y$e=y$c.prototype;return y$U(0,y$e,"width",function(){return this._w}),y$U(0,y$e,"height",function(){return this._h}),y$U(0,y$e,"source",function(){return this._source}),y$c}(),y$k_=function(y$c){function y$_(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,y$_.__super.call(this),this._interval=y$Z.animationInterval,this._setUpNoticeType(1)}y$m(y$_,"laya.display.AnimationPlayerBase",y$c);var y$e=y$_.prototype;return y$e.play=function(y$_,y$c,y$e,y$Z){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=!0),void 0===y$e&&(y$e=""),void 0===y$Z&&(y$Z=!0),this._isPlaying=!0,this.index="string"==typeof y$_?this._getFrameByLabel(y$_):y$_,this.loop=y$c,this._actionName=y$e,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},y$e._getFrameByLabel=function(y$_){var y$c=0;for(y$c=0;y$c<this._count;y$c++)if(this._labels[y$c]&&0<=this._labels[y$c].indexOf(y$_))return y$c;return 0},y$e._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},y$e._setControlNode=function(y$_){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=y$_)&&y$_!=this&&(y$_.on("display",this,this._checkResumePlaying),y$_.on("undisplay",this,this._checkResumePlaying))},y$e._setDisplay=function(y$_){y$c.prototype._setDisplay.call(this,y$_),this._checkResumePlaying()},y$e._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},y$e.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},y$e.addLabel=function(y$_,y$c){this._labels||(this._labels={}),this._labels[y$c]||(this._labels[y$c]=[]),this._labels[y$c].push(y$_)},y$e.removeLabel=function(y$_){if(y$_){if(this._labels)for(var y$c in this._labels)this._removeLabelFromLabelList(this._labels[y$c],y$_)}else this._labels=null},y$e._removeLabelFromLabelList=function(y$_,y$c){if(y$_)for(var y$e=y$_.length-1;0<=y$e;y$e--)y$_[y$e]==y$c&&y$_.splice(y$e,1)},y$e.gotoAndStop=function(y$_){this.index="string"==typeof y$_?this._getFrameByLabel(y$_):y$_,this.stop()},y$e._displayToIndex=function(y$_){},y$e.clear=function(){this.stop(),this._labels=null},y$U(0,y$e,"interval",function(){return this._interval},function(y$_){this._interval!=y$_&&(this._frameRateChanged=!0,this._interval=y$_,this._isPlaying&&0<y$_&&this.timerLoop(y$_,this,this._frameLoop,null,!0,!0))}),y$U(0,y$e,"isPlaying",function(){return this._isPlaying}),y$U(0,y$e,"index",function(){return this._index},function(y$_){if(this._index=y$_,this._displayToIndex(y$_),this._labels&&this._labels[y$_])for(var y$c=this._labels[y$_],y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++)this.event("label",y$c[y$e])}),y$U(0,y$e,"count",function(){return this._count}),y$_.WRAP_POSITIVE=0,y$_.WRAP_REVERSE=1,y$_.WRAP_PINGPONG=2,y$_}(y$H_),y$a_=function(y$c){function y$D(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,y$D.__super.call(this),this.overflow=y$D.VISIBLE,this._style=new y$c_(this),this._style.wordWrap=!1}y$m(y$D,"laya.display.Text",y$c);var y$_=y$D.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._lines=null,this._words&&(this._words.length=0,this._words=null)},y$_._getBoundPointsM=function(y$_){void 0===y$_&&(y$_=!1);var y$c=y$A.TEMP;return y$c.setTo(0,0,this.width,this.height),y$c._getBoundPoints()},y$_.getGraphicBounds=function(y$_){void 0===y$_&&(y$_=!1);var y$c=y$A.TEMP;return y$c.setTo(0,0,this.width,this.height),y$c},y$_._getCSSStyle=function(){return this._style},y$_.lang=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m){if(y$_=y$D.langPacks&&y$D.langPacks[y$_]?y$D.langPacks[y$_]:y$_,arguments.length<2)this._text=y$_;else{for(var y$H=0,y$B=arguments.length;y$H<y$B;y$H++)y$_=y$_.replace("{"+y$H+"}",arguments[y$H+1]);this._text=y$_}},y$_._isPassWordMode=function(){var y$_=this._style.password;return"prompt"in this&&this.prompt==this._text&&(y$_=!1),y$_},y$_._getPassWordTxt=function(y$_){var y$c;y$c="";for(var y$e=y$_.length;0<y$e;y$e--)y$c+="●";return y$c},y$_.renderText=function(y$_,y$c){var y$e=this.graphics;y$e.clear(!0);var y$Z=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(y$p.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);y$p.context.font=y$Z;var y$X=this.padding,y$u=y$X[3],y$P="left",y$O=this._lines,y$s=this.leading+this._charSize.height,y$n=this._currBitmapFont;y$n&&(y$s=this.leading+y$n.getMaxHeight());var y$m=y$X[0];if(!y$n&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(y$P="right",y$u=this._width-y$X[1]):"center"==this.align&&(y$P="center",y$u=.5*this._width+y$X[3]-y$X[1])),0<this._height){var y$H=this._textHeight>this._height?"top":this.valign;"middle"===y$H?y$m=.5*(this._height-y$c*y$s)+y$X[0]-y$X[2]:"bottom"===y$H&&(y$m=this._height-y$c*y$s-y$X[2])}var y$B=this._style;if(y$n&&y$n.autoScaleSize)var y$D=y$n.fontSize/this.fontSize;if(this._clipPoint)if(y$e.save(),y$n&&y$n.autoScaleSize){var y$U=0,y$k=0;y$U=this._width?this._width-y$X[3]-y$X[1]:this._textWidth,y$k=this._height?this._height-y$X[0]-y$X[2]:this._textHeight,y$U*=y$D,y$k*=y$D,y$e.clipRect(y$X[3],y$X[0],y$U,y$k)}else y$e.clipRect(y$X[3],y$X[0],this._width?this._width-y$X[3]-y$X[1]:this._textWidth,this._height?this._height-y$X[0]-y$X[2]:this._textHeight);var y$a=y$B.password;"prompt"in this&&this.prompt==this._text&&(y$a=!1);for(var y$G=0,y$w=0,y$z=Math.min(this._lines.length,y$c+y$_)||1,y$L=y$_;y$L<y$z;y$L++){var y$q,y$K=y$O[y$L];if(y$a){var y$M=y$K.length;y$K="";for(var y$f=y$M;0<y$f;y$f--)y$K+="●"}if(y$G=y$u-(this._clipPoint?this._clipPoint.x:0),y$w=y$m+y$s*y$L-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(y$P,y$G,y$w,y$L),y$n){var y$A=this.width;y$n.autoScaleSize&&(y$A=this.width*y$D),y$n.drawText(y$K,this,y$G,y$w,this.align,y$A)}else y$R.isWebGL?(this._words||(this._words=[]),(y$q=this._words.length>y$L-y$_?this._words[y$L-y$_]:new y$I).setText(y$K)):y$q=y$K,y$B.stroke?y$e.fillBorderText(y$q,y$G,y$w,y$Z,this.color,y$B.strokeColor,y$B.stroke,y$P):y$e.fillText(y$q,y$G,y$w,y$Z,this.color,y$P)}if(y$n&&y$n.autoScaleSize){var y$v=1/y$D;this.scale(y$v,y$v)}this._clipPoint&&y$e.restore(),this._startX=y$u,this._startY=y$m},y$_.drawUnderline=function(y$_,y$c,y$e,y$Z){var y$X=this._lineWidths[y$Z];switch(y$_){case"center":y$c-=y$X/2;break;case"right":y$c-=y$X}y$e+=this._charSize.height,this._graphics.drawLine(y$c,y$e,y$c+y$X,y$e,this.underlineColor||this.color,1)},y$_.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);y$p.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new y$f(0,0)):this._clipPoint=null;var y$_=this._lines.length;if(this.overflow!=y$D.VISIBLE){var y$c=this.overflow==y$D.HIDDEN?Math.floor:Math.ceil;y$_=Math.min(y$_,y$c((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var y$e=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(y$e,y$_),this.repaint()},y$_.evalTextSize=function(){var y$_,y$c=NaN;y$_=Math.max.apply(this,this._lineWidths),y$c=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],y$_==this._textWidth&&y$c==this._textHeight||(this._textWidth=y$_,this._textHeight=y$c,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},y$_.checkEnabledViewportOrNot=function(){return this.overflow==y$D.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},y$_.changeText=function(y$_){this._text!==y$_&&(this.lang(y$_+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},y$_.parseLines=function(y$_){var y$c=this.wordWrap||this.overflow==y$D.HIDDEN;if(y$c)var y$e=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var y$Z=y$p.context.measureText(y$D._testWord);y$R.isConchApp&&0===y$Z.width&&0===y$Z.height&&(y$Z=y$p.context.measureText("W")),this._charSize.width=y$Z.width,this._charSize.height=y$Z.height||this.fontSize}for(var y$X=y$_.replace(/\r\n/g,"\n").split("\n"),y$u=0,y$P=y$X.length;y$u<y$P;y$u++){var y$O=y$X[y$u];y$c?this.parseLine(y$O,y$e):(this._lineWidths.push(this.getTextWidth(y$O)),this._lines.push(y$O))}},y$_.parseLine=function(y$_,y$c){y$p.context;var y$e,y$Z=this._lines,y$X=0,y$u=NaN,y$P=NaN,y$O=0;if((y$u=this.getTextWidth(y$_))<=y$c)return y$Z.push(y$_),void this._lineWidths.push(y$u);y$u=this._charSize.width,0==(y$X=Math.floor(y$c/y$u))&&(y$X=1),y$P=y$u=this.getTextWidth(y$_.substring(0,y$X));for(var y$s=y$X,y$n=y$_.length;y$s<y$n;y$s++)if(y$c<(y$P+=y$u=this.getTextWidth(y$_.charAt(y$s))))if(this.wordWrap){var y$m=y$_.substring(y$O,y$s);if(y$m.charCodeAt(y$m.length-1)<255?(y$e=/(?:\w|-)+$/.exec(y$m))&&(y$s=y$e.index+y$O,0==y$e.index?y$s+=y$m.length:y$m=y$_.substring(y$O,y$s)):y$D.RightToLeft&&(y$e=/([\u0600-\u06FF])+$/.exec(y$m))&&(y$s=y$e.index+y$O,0==y$e.index?y$s+=y$m.length:y$m=y$_.substring(y$O,y$s)),y$Z.push(y$m),this._lineWidths.push(y$P-y$u),!((y$O=y$s)+y$X<y$n)){y$Z.push(y$_.substring(y$O,y$n)),this._lineWidths.push(this.getTextWidth(y$Z[y$Z.length-1])),y$O=-1;break}y$s+=y$X,y$P=y$u=this.getTextWidth(y$_.substring(y$O,y$s)),y$s--}else if(this.overflow==y$D.HIDDEN)return y$Z.push(y$_.substring(0,y$s)),void this._lineWidths.push(this.getTextWidth(y$Z[y$Z.length-1]));this.wordWrap&&-1!=y$O&&(y$Z.push(y$_.substring(y$O,y$n)),this._lineWidths.push(this.getTextWidth(y$Z[y$Z.length-1])))},y$_.getTextWidth=function(y$_){return this._currBitmapFont?this._currBitmapFont.getTextWidth(y$_):y$p.context.measureText(y$_).width},y$_.getWordWrapWidth=function(){var y$_=this.padding,y$c=NaN;return(y$c=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(y$c=this.wordWrap?100:y$p.width),y$c<=0&&(y$c=100),y$c-y$_[3]-y$_[1]},y$_.getCharPoint=function(y$_,y$c){this._isChanged&&y$M.timer.runCallLater(this,this.typeset);for(var y$e=0,y$Z=this._lines,y$X=0,y$u=0,y$P=y$Z.length;y$u<y$P;y$u++){if(y$_<(y$e+=y$Z[y$u].length)){var y$O=y$u;break}y$X=y$e}var y$s=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;y$p.context.font=y$s;var y$n=this.getTextWidth(this._text.substring(y$X,y$_));return(y$c||new y$f).setTo(this._startX+y$n-(this._clipPoint?this._clipPoint.x:0),this._startY+y$O*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},y$U(0,y$_,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(y$_){y$_!=this._width&&(y$M.superSet(y$H_,this,"width",y$_),this.isChanged=!0)}),y$U(0,y$_,"textWidth",function(){return this._isChanged&&y$M.timer.runCallLater(this,this.typeset),this._textWidth}),y$U(0,y$_,"height",function(){return this._height?this._height:this.textHeight},function(y$_){y$_!=this._height&&(y$M.superSet(y$H_,this,"height",y$_),this.isChanged=!0)}),y$U(0,y$_,"textHeight",function(){return this._isChanged&&y$M.timer.runCallLater(this,this.typeset),this._textHeight}),y$U(0,y$_,"padding",function(){return this._getCSSStyle().padding},function(y$_){this._getCSSStyle().padding=y$_,this.isChanged=!0}),y$U(0,y$_,"bold",function(){return this._getCSSStyle().bold},function(y$_){this._getCSSStyle().bold=y$_,this.isChanged=!0}),y$U(0,y$_,"text",function(){return this._text||""},function(y$_){this._text!==y$_&&(this.lang(y$_+""),this.isChanged=!0,this.event("change"))}),y$U(0,y$_,"color",function(){return this._getCSSStyle().color},function(y$_){this._getCSSStyle().color!=y$_&&(this._getCSSStyle().color=y$_,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),y$U(0,y$_,"font",function(){return this._getCSSStyle().fontFamily},function(y$_){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),y$D._bitmapFonts&&y$D._bitmapFonts[y$_]&&(this._currBitmapFont=y$D._bitmapFonts[y$_]),this._getCSSStyle().fontFamily=y$_,this.isChanged=!0}),y$U(0,y$_,"fontSize",function(){return this._getCSSStyle().fontSize},function(y$_){this._getCSSStyle().fontSize=y$_,this.isChanged=!0}),y$U(0,y$_,"italic",function(){return this._getCSSStyle().italic},function(y$_){this._getCSSStyle().italic=y$_,this.isChanged=!0}),y$U(0,y$_,"align",function(){return this._getCSSStyle().align},function(y$_){this._getCSSStyle().align=y$_,this.isChanged=!0}),y$U(0,y$_,"valign",function(){return this._getCSSStyle().valign},function(y$_){this._getCSSStyle().valign=y$_,this.isChanged=!0}),y$U(0,y$_,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(y$_){this._getCSSStyle().wordWrap=y$_,this.isChanged=!0}),y$U(0,y$_,"leading",function(){return this._getCSSStyle().leading},function(y$_){this._getCSSStyle().leading=y$_,this.isChanged=!0}),y$U(0,y$_,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(y$_){this._getCSSStyle().backgroundColor=y$_,this.isChanged=!0}),y$U(0,y$_,"borderColor",function(){return this._getCSSStyle().borderColor},function(y$_){this._getCSSStyle().borderColor=y$_,this.isChanged=!0}),y$U(0,y$_,"stroke",function(){return this._getCSSStyle().stroke},function(y$_){this._getCSSStyle().stroke=y$_,this.isChanged=!0}),y$U(0,y$_,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(y$_){this._getCSSStyle().strokeColor=y$_,this.isChanged=!0}),y$U(0,y$_,"isChanged",null,function(y$_){this._isChanged!==y$_&&(this._isChanged=y$_)&&y$M.timer.callLater(this,this.typeset)}),y$U(0,y$_,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(y$_){if(!(this.overflow!=y$D.SCROLL||this.textWidth<this._width)&&this._clipPoint){y$_=y$_<this.padding[3]?this.padding[3]:y$_;var y$c=this._textWidth-this._width;y$_=y$c<y$_?y$c:y$_;var y$e=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=y$_,this.renderText(this._lastVisibleLineIndex,y$e)}}),y$U(0,y$_,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(y$_){if(!(this.overflow!=y$D.SCROLL||this.textHeight<this._height)&&this._clipPoint){y$_=y$_<this.padding[0]?this.padding[0]:y$_;var y$c=this._textHeight-this._height,y$e=(y$_=y$c<y$_?y$c:y$_)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=y$e;var y$Z=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=y$_,this.renderText(y$e,y$Z)}}),y$U(0,y$_,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),y$U(0,y$_,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),y$U(0,y$_,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),y$U(0,y$_,"underlineColor",function(){return this._underlineColor},function(y$_){this._underlineColor=y$_,this._isChanged=!0,this.typeset()}),y$D.registerBitmapFont=function(y$_,y$c){y$D._bitmapFonts||(y$D._bitmapFonts={}),y$D._bitmapFonts[y$_]=y$c},y$D.unregisterBitmapFont=function(y$_,y$c){if(void 0===y$c&&(y$c=!0),y$D._bitmapFonts&&y$D._bitmapFonts[y$_]){var y$e=y$D._bitmapFonts[y$_];y$c&&y$e.destroy(),delete y$D._bitmapFonts[y$_]}},y$D.setTextRightToLeft=function(){var y$_;(y$_=y$p.canvas.source.style).display="none",y$_.position="absolute",y$_.direction="rtl",y$R._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,y$p.document.body.appendChild(y$p.canvas.source)},y$D.supportFont=function(y$_){y$p.context.font="10px sans-serif";var y$c=y$p.context.measureText("abcji").width;y$p.context.font="10px "+y$_;var y$e=y$p.context.measureText("abcji").width;return console.log(y$c,y$e),y$c!==y$e},y$D._testWord="游",y$D.langPacks=null,y$D.VISIBLE="visible",y$D.SCROLL="scroll",y$D.HIDDEN="hidden",y$D.CharacterCache=!0,y$D.RightToLeft=!1,y$D._bitmapFonts=null,y$s(y$D,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),y$D}(y$H_),y$G_=function(y$H){function y$P(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",y$P.__super.call(this),this.offset=new y$f,this._canvasTransform=new y$$,this._previousOrientation=y$p.window.orientation;var y$c=this;this.transform=y$$.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var y$_=y$p.window,y$e=this;y$_.addEventListener("focus",function(){y$c._isFocused=!0,y$e.event("focus"),y$e.event("focuschange")}),y$_.addEventListener("blur",function(){y$c._isFocused=!1,y$e.event("blur"),y$e.event("focuschange"),y$e._isInputting()&&(y$q_.inputElement.target.focus=!1)});var y$Z="visibilityState",y$X="visibilitychange",y$u=y$_.document;void 0!==y$u.hidden?(y$X="visibilitychange",y$Z="visibilityState"):void 0!==y$u.mozHidden?(y$X="mozvisibilitychange",y$Z="mozVisibilityState"):void 0!==y$u.msHidden?(y$X="msvisibilitychange",y$Z="msVisibilityState"):void 0!==y$u.webkitHidden&&(y$X="webkitvisibilitychange",y$Z="webkitVisibilityState"),y$_.document.addEventListener(y$X,function(){"hidden"==y$p.document[y$Z]?y$e._setStageVisible(!1):y$e._setStageVisible(!0)}),y$_.document.addEventListener("qbrowserVisibilityChange",function(y$_){y$e._setStageVisible(!y$_.hidden)}),y$_.addEventListener("resize",function(){var y$_=y$p.window.orientation;null!=y$_&&y$_!=y$c._previousOrientation&&y$e._isInputting()&&(y$q_.inputElement.target.focus=!1),y$c._previousOrientation=y$_,y$e._isInputting()||y$e._resetCanvas()}),y$_.addEventListener("orientationchange",function(y$_){y$e._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),y$p.onMobile&&this.on("mousedown",this,this._onmouseMove)}y$m(y$P,"laya.display.Stage",y$H);var y$_=y$P.prototype;return y$_._setStageVisible=function(y$_){this._isVisibility!=y$_&&(this._isVisibility=y$_,this._isVisibility||this._isInputting()&&(y$q_.inputElement.target.focus=!1),this.event("visibilitychange"))},y$_._isInputting=function(){return y$p.onMobile&&y$q_.isInputting},y$_._changeCanvasSize=function(){this.setScreenSize(y$p.clientWidth*y$p.pixelRatio,y$p.clientHeight*y$p.pixelRatio)},y$_._resetCanvas=function(){if(this.screenAdaptationEnabled){var y$_=y$R._mainCanvas;y$_.source.style;y$_.size(1,1),y$M.timer.once(100,this,this._changeCanvasSize)}},y$_.setScreenSize=function(y$_,y$c){var y$e=!1;if("none"!==this._screenMode&&(y$e=(y$_/y$c<1?"vertical":"horizontal")!==this._screenMode)){var y$Z=y$c;y$c=y$_,y$_=y$Z}this.canvasRotation=y$e;var y$X=y$R._mainCanvas,y$u=y$X.source.style,y$P=this._canvasTransform.identity(),y$O=this._scaleMode,y$s=y$_/this.designWidth,y$n=y$c/this.designHeight,y$m=this.designWidth,y$H=this.designHeight,y$B=y$_,y$D=y$c,y$U=y$p.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,y$O){case"noscale":y$s=y$n=1,y$B=this.designWidth,y$D=this.designHeight;break;case"showall":y$s=y$n=Math.min(y$s,y$n),y$m=y$B=Math.round(this.designWidth*y$s),y$H=y$D=Math.round(this.designHeight*y$n);break;case"noborder":y$s=y$n=Math.max(y$s,y$n),y$B=Math.round(this.designWidth*y$s),y$D=Math.round(this.designHeight*y$n);break;case"full":y$s=y$n=1,this._width=y$m=y$_,this._height=y$H=y$c;break;case"fixedwidth":y$n=y$s,this._height=y$H=Math.round(y$c/y$s);break;case"fixedheight":y$s=y$n,this._width=y$m=Math.round(y$_/y$n);break;case"fixedauto":y$_/y$c<this.designWidth/this.designHeight?(y$n=y$s,this._height=y$H=Math.round(y$c/y$s)):(y$s=y$n,this._width=y$m=Math.round(y$_/y$n))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,y$m=y$m+1&2147483646,y$H=y$H+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),y$s*=this.scaleX,y$n*=this.scaleY,1===y$s&&1===y$n?this.transform.identity():(this.transform.a=this._formatData(y$s/(y$B/y$m)),this.transform.d=this._formatData(y$n/(y$D/y$H)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),y$X.size(y$m,y$H),y$y.changeWebGLSize(y$m,y$H),y$P.scale(y$B/y$m/y$U,y$D/y$H/y$U),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(y$_-y$B)/y$U:this.offset.x=.5*(y$_-y$B)/y$U,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(y$c-y$D)/y$U:this.offset.y=.5*(y$c-y$D)/y$U,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),y$P.translate(this.offset.x,this.offset.y),this.canvasDegree=0,y$e&&("horizontal"===this._screenMode?(y$P.rotate(Math.PI/2),y$P.translate(y$c/y$U,0),this.canvasDegree=90):(y$P.rotate(-Math.PI/2),y$P.translate(0,y$_/y$U),this.canvasDegree=-90)),y$P.a=this._formatData(y$P.a),y$P.d=this._formatData(y$P.d),y$P.tx=this._formatData(y$P.tx),y$P.ty=this._formatData(y$P.ty),y$u.transformOrigin=y$u.webkitTransformOrigin=y$u.msTransformOrigin=y$u.mozTransformOrigin=y$u.oTransformOrigin="0px 0px 0px",y$u.transform=y$u.webkitTransform=y$u.msTransform=y$u.mozTransform=y$u.oTransform="matrix("+y$P.toString()+")",y$P.translate(parseInt(y$u.left)||0,parseInt(y$u.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},y$_._formatData=function(y$_){return Math.abs(y$_)<1e-6?0:Math.abs(1-y$_)<.001?0<y$_?1:-1:y$_},y$_.getMousePoint=function(){return y$f.TEMP.setTo(this.mouseX,this.mouseY)},y$_.repaint=function(){this._repaint=1},y$_.parentRepaint=function(){},y$_._loop=function(){return this.render(y$R.context,0,0),!0},y$_._onmouseMove=function(y$_){this._mouseMoveTime=y$p.now()},y$_.getTimeFromFrameStart=function(){return y$p.now()-this._frameStartTime},y$_.render=function(y$_,y$c,y$e){if("sleep"===this._frameRate&&!y$R.isConchApp){var y$Z=y$p.now();if(!(1e3<=y$Z-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(y$g.loopCount++,y$k.instance.runEvent(),y$M.timer._update()));this._frameStartTime=y$Z}if(this._renderCount++,y$R.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=y$p.now();var y$X="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),y$u=this._renderCount%2==0;if(y$g.renderSlow=!y$X,y$X||y$u||y$R.isConchApp){var y$P;y$g.loopCount++,y$k.instance.runEvent(),y$M.timer._update(),y$y.update3DLoop();var y$O=0,y$s=0;if(y$R.isConchNode)for(y$O=0,y$s=this._scenes.length;y$O<y$s;y$O++)(y$P=this._scenes[y$O])&&y$P._updateSceneConch();else for(y$O=0,y$s=this._scenes.length;y$O<y$s;y$O++)(y$P=this._scenes[y$O])&&y$P._updateScene();if(y$R.isConchNode){var y$n=y$H_.CustomList;for(y$O=0,y$s=y$n.length;y$O<y$s;y$O++){var y$m=y$n[y$O];y$m.customRender(y$m.customContext,0,0)}return}}y$R.isConchNode||this.renderingEnabled&&(y$X||!y$u||y$R.isConchWebGL)&&(y$R.isWebGL?y$R.WebGL.mainContext&&!y$R.WebGL.mainContext.isContextLost()&&(y$_.clear(),y$H.prototype.render.call(this,y$_,y$c,y$e),y$g._show&&y$g._sp&&y$g._sp.render(y$_,y$c,y$e),y$y.clear(this._bgColor),y$y.beginFlush(),y$_.flush(),y$y.endFinish(),y$l.instance&&y$l.getInstance().endDispose()):(y$y.clear(this._bgColor),y$H.prototype.render.call(this,y$_,y$c,y$e),y$g._show&&y$g._sp&&y$g._sp.render(y$_,y$c,y$e)))}else this._renderCount%5==0&&(y$g.loopCount++,y$k.instance.runEvent(),y$M.timer._update())},y$_._requestFullscreen=function(){var y$_=y$p.document.documentElement;y$_.requestFullscreen?y$_.requestFullscreen():y$_.mozRequestFullScreen?y$_.mozRequestFullScreen():y$_.webkitRequestFullscreen?y$_.webkitRequestFullscreen():y$_.msRequestFullscreen&&y$_.msRequestFullscreen()},y$_._fullScreenChanged=function(){y$M.stage.event("fullscreenchange")},y$_.exitFullscreen=function(){var y$_=y$p.document;y$_.exitFullscreen?y$_.exitFullscreen():y$_.mozCancelFullScreen?y$_.mozCancelFullScreen():y$_.webkitExitFullscreen&&y$_.webkitExitFullscreen()},y$U(0,y$_,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),y$U(0,y$_,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),y$U(0,y$_,"frameRate",function(){return this._frameRate},function(y$_){if(this._frameRate=y$_,y$R.isConchApp)switch(this._frameRate){case"slow":y$p.window.conch&&y$p.window.conchConfig.setSlowFrame&&y$p.window.conchConfig.setSlowFrame(!0);break;case"fast":y$p.window.conch&&y$p.window.conchConfig.setSlowFrame&&y$p.window.conchConfig.setSlowFrame(!1);break;case"mouse":y$p.window.conch&&y$p.window.conchConfig.setMouseFrame&&y$p.window.conchConfig.setMouseFrame(2e3);break;case"sleep":y$p.window.conch&&y$p.window.conchConfig.setLimitFPS&&y$p.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),y$U(0,y$_,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),y$U(0,y$_,"width",y$H.prototype._$get_width,function(y$_){this.designWidth=y$_,y$M.superSet(y$H_,this,"width",y$_),y$M.timer.callLater(this,this._changeCanvasSize)}),y$U(0,y$_,"alignH",function(){return this._alignH},function(y$_){this._alignH=y$_,y$M.timer.callLater(this,this._changeCanvasSize)}),y$U(0,y$_,"isFocused",function(){return this._isFocused}),y$U(0,y$_,"height",y$H.prototype._$get_height,function(y$_){this.designHeight=y$_,y$M.superSet(y$H_,this,"height",y$_),y$M.timer.callLater(this,this._changeCanvasSize)}),y$U(0,y$_,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||y$$.create()},y$H.prototype._$set_transform),y$U(0,y$_,"isVisibility",function(){return this._isVisibility}),y$U(0,y$_,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),y$U(0,y$_,"scaleMode",function(){return this._scaleMode},function(y$_){this._scaleMode=y$_,y$M.timer.callLater(this,this._changeCanvasSize)}),y$U(0,y$_,"alignV",function(){return this._alignV},function(y$_){this._alignV=y$_,y$M.timer.callLater(this,this._changeCanvasSize)}),y$U(0,y$_,"bgColor",function(){return this._bgColor},function(y$_){this._bgColor=y$_,this.conchModel&&this.conchModel.bgColor(y$_),y$R.isWebGL&&(y$_?y$P._wgColor=y$j.create(y$_)._color:y$p.onMiniGame||(y$P._wgColor=null)),y$p.onLimixiu?y$P._wgColor=y$j.create(y$_)._color:y$R.canvas.style.background=y$_||"none"}),y$U(0,y$_,"mouseX",function(){return Math.round(y$k.instance.mouseX/this.clientScaleX)}),y$U(0,y$_,"mouseY",function(){return Math.round(y$k.instance.mouseY/this.clientScaleY)}),y$U(0,y$_,"screenMode",function(){return this._screenMode},function(y$_){this._screenMode=y$_}),y$U(0,y$_,"visible",y$H.prototype._$get_visible,function(y$_){this.visible!==y$_&&(y$M.superSet(y$H_,this,"visible",y$_),y$R._mainCanvas.source.style.visibility=y$_?"visible":"hidden")}),y$U(0,y$_,"fullScreenEnabled",null,function(y$_){var y$c=y$p.document,y$e=y$R.canvas;y$_?(y$e.addEventListener("mousedown",this._requestFullscreen),y$e.addEventListener("touchstart",this._requestFullscreen),y$c.addEventListener("fullscreenchange",this._fullScreenChanged),y$c.addEventListener("mozfullscreenchange",this._fullScreenChanged),y$c.addEventListener("webkitfullscreenchange",this._fullScreenChanged),y$c.addEventListener("msfullscreenchange",this._fullScreenChanged)):(y$e.removeEventListener("mousedown",this._requestFullscreen),y$e.removeEventListener("touchstart",this._requestFullscreen),y$c.removeEventListener("fullscreenchange",this._fullScreenChanged),y$c.removeEventListener("mozfullscreenchange",this._fullScreenChanged),y$c.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),y$c.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),y$P.SCALE_NOSCALE="noscale",y$P.SCALE_EXACTFIT="exactfit",y$P.SCALE_SHOWALL="showall",y$P.SCALE_NOBORDER="noborder",y$P.SCALE_FULL="full",y$P.SCALE_FIXED_WIDTH="fixedwidth",y$P.SCALE_FIXED_HEIGHT="fixedheight",y$P.SCALE_FIXED_AUTO="fixedauto",y$P.ALIGN_LEFT="left",y$P.ALIGN_RIGHT="right",y$P.ALIGN_CENTER="center",y$P.ALIGN_TOP="top",y$P.ALIGN_MIDDLE="middle",y$P.ALIGN_BOTTOM="bottom",y$P.SCREEN_NONE="none",y$P.SCREEN_HORIZONTAL="horizontal",y$P.SCREEN_VERTICAL="vertical",y$P.FRAME_FAST="fast",y$P.FRAME_SLOW="slow",y$P.FRAME_MOUSE="mouse",y$P.FRAME_SLEEP="sleep",y$P.FRAME_MOUSE_THREDHOLD=2e3,y$s(y$P,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),y$P}(y$H_),y$w_=(function(y$_){function y$c(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,y$c.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}y$m(y$c,"laya.media.SoundNode",y$H_);var y$e=y$c.prototype;y$e._onParentChange=function(){this.target=this.parent},y$e.play=function(y$_,y$c){void 0===y$_&&(y$_=1),isNaN(y$_)&&(y$_=1),this.url&&(this.stop(),this._channel=y$C.playSound(this.url,y$_,null,y$c))},y$e.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},y$e._setPlayAction=function(y$_,y$c,y$e,y$Z){void 0===y$Z&&(y$Z=!0),this[y$e]&&y$_&&(y$Z?y$_.on(y$c,this,this[y$e]):y$_.off(y$c,this,this[y$e]))},y$e._setPlayActions=function(y$_,y$c,y$e,y$Z){if(void 0===y$Z&&(y$Z=!0),y$_&&y$c){var y$X,y$u=y$c.split(","),y$P=0;for(y$X=y$u.length,y$P=0;y$P<y$X;y$P++)this._setPlayAction(y$_,y$u[y$P],y$e,y$Z)}},y$U(0,y$e,"playEvent",null,function(y$_){(this._playEvents=y$_)&&this._tar&&this._setPlayActions(this._tar,y$_,"play")}),y$U(0,y$e,"target",null,function(y$_){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=y$_,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),y$U(0,y$e,"stopEvent",null,function(y$_){(this._stopEvents=y$_)&&this._tar&&this._setPlayActions(this._tar,y$_,"stop")})}(),function(y$_){function y$c(){this._src=null,this._onload=null,this._onerror=null,y$c.__super.call(this)}y$m(y$c,"laya.resource.FileBitmap",y$U_);var y$e=y$c.prototype;return y$U(0,y$e,"src",function(){return this._src},function(y$_){this._src=y$_}),y$U(0,y$e,"onload",null,function(y$_){}),y$U(0,y$e,"onerror",null,function(y$_){}),y$c}()),y$z_=function(y$_){function y$e(y$_,y$c){this._is2D=!1,y$e.__super.call(this);var y$Z=this;if(this._source=this,"2D"===y$_||"AUTO"===y$_&&!y$R.isWebGL){this._is2D=!0,this._source=y$c||y$p.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var y$X=this;y$X.getContext=function(y$_,y$c){if(y$Z._ctx)return y$Z._ctx;var y$e=y$Z._ctx=y$Z._source.getContext(y$_,y$c);return y$e&&(y$e._canvas=y$X,y$R.isFlash||y$p.onLimixiu||(y$e.size=function(y$_,y$c){})),y$e}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}y$m(y$e,"laya.resource.HTMLCanvas",y$U_);var y$c=y$e.prototype;return y$c.clear=function(){this._ctx&&this._ctx.clear()},y$c.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},y$c.release=function(){},y$c._setContext=function(y$_){this._ctx=y$_},y$c.getContext=function(y$_,y$c){return this._ctx?this._ctx:this._ctx=y$e._createContext(this)},y$c.getMemSize=function(){return 0},y$c.size=function(y$_,y$c){(this._w!=y$_||this._h!=y$c||this._source&&(this._source.width!=y$_||this._source.height!=y$c))&&(this._w=y$_,this._h=y$c,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(y$_,y$c),this._source&&(this._source.height=y$c,this._source.width=y$_))},y$c.getCanvas=function(){return this._source},y$c.toBase64=function(y$_,y$c,y$e){if(this._source)if(y$R.isConchApp&&this._source.toBase64)this._source.toBase64(y$_,y$c,y$e);else{var y$Z=this._source.toDataURL(y$_,y$c);y$e.call(this,y$Z)}},y$U(0,y$c,"context",function(){return this._ctx}),y$U(0,y$c,"asBitmap",null,function(y$_){}),y$e.create=function(y$_,y$c){return new y$e(y$_,y$c)},y$e.TYPE2D="2D",y$e.TYPE3D="3D",y$e.TYPEAUTO="AUTO",y$e._createContext=null,y$e}(),y$L_=(function(y$_){function y$s(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){throw y$s.__super.call(this),new Error("不允许new！")}y$m(y$s,"laya.resource.HTMLSubImage",y$U_),y$s.create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){return void 0===y$O&&(y$O=!1),new y$s(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O)}}(),function(y$_){function y$H(){this._frames=null,this._url=null,y$H.__super.call(this),this._setControlNode(this)}y$m(y$H,"laya.display.Animation",y$_);var y$c=y$H.prototype;y$c.destroy=function(y$_){void 0===y$_&&(y$_=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,y$_),this._frames=null,this._labels=null},y$c.play=function(y$_,y$c,y$e,y$Z){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=!0),void 0===y$e&&(y$e=""),void 0===y$Z&&(y$Z=!0),y$e&&this._setFramesFromCache(y$e,y$Z),this._isPlaying=!0,this.index="string"==typeof y$_?this._getFrameByLabel(y$_):y$_,this.loop=y$c,this._actionName=y$e,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},y$c._setFramesFromCache=function(y$_,y$c){var y$e;return void 0===y$c&&(y$c=!1),this._url&&(y$_=this._url+"#"+y$_),y$_&&y$H.framesMap[y$_]?((y$e=y$H.framesMap[y$_])instanceof Array?(this._frames=y$H.framesMap[y$_],this._count=this._frames.length):(y$e.nodeRoot&&(y$H.framesMap[y$_]=this._parseGraphicAnimationByData(y$e),y$e=y$H.framesMap[y$_]),this._frames=y$e.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=y$e.interval),this._labels=this._copyLabels(y$e.labels)),!0):(y$c&&console.log("ani not found:",y$_),!1)},y$c._copyLabels=function(y$_){if(!y$_)return null;var y$c,y$e;for(y$e in y$c={},y$_)y$c[y$e]=y$W.copyArray([],y$_[y$e]);return y$c},y$c._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&y$_.prototype._frameLoop.call(this)},y$c._displayToIndex=function(y$_){this._frames&&(this.graphics=this._frames[y$_])},y$c.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},y$c.loadImages=function(y$_,y$c){return void 0===y$c&&(y$c=""),this._url="",this._setFramesFromCache(y$c)||(this.frames=y$H.framesMap[y$c]?y$H.framesMap[y$c]:y$H.createFrames(y$_,y$c)),this},y$c.loadAtlas=function(y$c,y$e,y$Z){void 0===y$Z&&(y$Z=""),this._url="";var y$X=this;function y$_(y$_){y$c===y$_&&(y$X.frames=y$H.framesMap[y$Z]?y$H.framesMap[y$Z]:y$H.createFrames(y$c,y$Z),y$e&&y$e.run())}return y$X._setFramesFromCache(y$Z)||(y$O_.getAtlas(y$c)?y$_(y$c):y$M.loader.load(y$c,y$w.create(null,y$_,[y$c]),null,"atlas")),this},y$c.loadAnimation=function(y$_,y$c,y$e){this._url=y$_;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,y$c&&y$c.run()):!y$e||y$O_.getAtlas(y$e)?this._loadAnimationData(y$_,y$c,y$e):y$M.loader.load(y$e,y$w.create(this,this._loadAnimationData,[y$_,y$c,y$e]),null,"atlas"),this},y$c._loadAnimationData=function(y$O,y$s,y$_){var y$n=this;if(!y$_||y$O_.getAtlas(y$_)){var y$m=this;y$O_.getRes(y$O)?y$c(y$O):y$M.loader.load(y$O,y$w.create(null,y$c,[y$O]),null,"json"),y$O_.clearRes(y$O)}else console.warn("atlas load fail:"+y$_);function y$c(y$_){if(y$O_.getRes(y$_)&&y$O===y$_){var y$c;if(y$H.framesMap[y$O+"#"])y$m._setFramesFromCache(y$n._actionName,!0),y$n.index=0,y$n._checkResumePlaying();else{var y$e=y$m._parseGraphicAnimation(y$O_.getRes(y$O));if(!y$e)return;var y$Z,y$X=y$e.animationList,y$u=0,y$P=y$X.length;for(y$u=0;y$u<y$P;y$u++)y$c=y$X[y$u],y$H.framesMap[y$O+"#"+y$c.name]=y$c,y$Z||(y$Z=y$c);y$Z&&(y$H.framesMap[y$O+"#"]=y$Z,y$m._setFramesFromCache(y$n._actionName,!0),y$n.index=0),y$n._checkResumePlaying()}y$s&&y$s.run()}}},y$c._parseGraphicAnimation=function(y$_){return y$M_.parseAnimationData(y$_)},y$c._parseGraphicAnimationByData=function(y$_){return y$M_.parseAnimationByData(y$_)},y$U(0,y$c,"frames",function(){return this._frames},function(y$_){(this._frames=y$_)&&(this._count=y$_.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),y$U(0,y$c,"autoPlay",null,function(y$_){y$_?this.play():this.stop()}),y$U(0,y$c,"source",null,function(y$_){-1<y$_.indexOf(".ani")?this.loadAnimation(y$_):-1<y$_.indexOf(".json")||-1<y$_.indexOf("als")||-1<y$_.indexOf("atlas")?this.loadAtlas(y$_):this.loadImages(y$_.split(","))}),y$U(0,y$c,"autoAnimation",null,function(y$_){this.play(0,!0,y$_,!1)}),y$H.createFrames=function(y$_,y$c){var y$e,y$Z,y$X=0,y$u=0;if("string"==typeof y$_){var y$P=y$O_.getAtlas(y$_);if(y$P&&y$P.length)for(y$e=[],y$X=0,y$u=y$P.length;y$X<y$u;y$X++)(y$Z=new y$y.createGraphics).drawTexture(y$O_.getRes(y$P[y$X]),0,0),y$e.push(y$Z)}else if(y$_ instanceof Array)for(y$e=[],y$X=0,y$u=y$_.length;y$X<y$u;y$X++)(y$Z=new y$y.createGraphics).loadImage(y$_[y$X],0,0),y$e.push(y$Z);return y$c&&(y$H.framesMap[y$c]=y$e),y$e},y$H.clearCache=function(y$_){var y$c,y$e=y$H.framesMap,y$Z=y$_+"#";for(y$c in y$e)y$c!==y$_&&0!=y$c.indexOf(y$Z)||delete y$H.framesMap[y$c]},y$H.framesMap={}}(y$k_),function(y$_){function y$u(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,y$u.__super.call(this),null==y$u._sortIndexFun&&(y$u._sortIndexFun=y$K.sortByKey("index",!1,!0))}y$m(y$u,"laya.display.FrameAnimation",y$_);var y$c=y$u.prototype;return y$c._setUp=function(y$_,y$c){this._labels=null,this._animationNewFrames=null,this._targetDic=y$_,this._animationData=y$c,this.interval=1e3/y$c.frameRate,y$c.parsed?(this._count=y$c.count,this._labels=y$c.labels,this._animationNewFrames=y$c.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),y$c.parsed=!0,y$c.labels=this._labels,y$c.count=this._count,y$c.animationNewFrames=this._animationNewFrames},y$c.clear=function(){y$_.prototype.clear.call(this),this._targetDic=null,this._animationData=null},y$c._displayToIndex=function(y$_){if(this._animationData){y$_<0&&(y$_=0),y$_>this._count&&(y$_=this._count);var y$c=this._animationData.nodes,y$e=0,y$Z=y$c.length;for(y$e=0;y$e<y$Z;y$e++)this._displayNodeToFrame(y$c[y$e],y$_)}},y$c._displayNodeToFrame=function(y$_,y$c,y$e){y$e||(y$e=this._targetDic);var y$Z=y$e[y$_.target];if(y$Z){var y$X,y$u,y$P,y$O=y$_.frames,y$s=y$_.keys,y$n=0,y$m=y$s.length;for(y$n=0;y$n<y$m;y$n++)y$P=(y$u=y$O[y$X=y$s[y$n]]).length>y$c?y$u[y$c]:y$u[y$u.length-1],y$Z[y$X]=y$P}},y$c._calculateDatas=function(){if(this._animationData){var y$_,y$c=this._animationData.nodes,y$e=0,y$Z=y$c.length;for(y$e=this._count=0;y$e<y$Z;y$e++)y$_=y$c[y$e],this._calculateNodeKeyFrames(y$_);this._count+=1}},y$c._calculateNodeKeyFrames=function(y$_){var y$c,y$e,y$Z=y$_.keyframes,y$X=y$_.target;for(y$c in y$_.frames||(y$_.frames={}),y$_.keys?y$_.keys.length=0:y$_.keys=[],y$_.initValues||(y$_.initValues={}),y$Z)y$e=y$Z[y$c],y$_.frames[y$c]||(y$_.frames[y$c]=[]),this._targetDic&&this._targetDic[y$X]&&(y$_.initValues[y$c]=this._targetDic[y$X][y$c]),y$e.sort(y$u._sortIndexFun),y$_.keys.push(y$c),this._calculateNodePropFrames(y$e,y$_.frames[y$c],y$c,y$X)},y$c.resetToInitState=function(){if(this._targetDic&&this._animationData){var y$_,y$c,y$e=this._animationData.nodes,y$Z=0,y$X=y$e.length;for(y$Z=0;y$Z<y$X;y$Z++)if(y$c=(y$_=y$e[y$Z]).initValues){var y$u,y$P=this._targetDic[y$_.target];if(y$P)for(y$u in y$c)y$P[y$u]=y$c[y$u]}}},y$c._calculateNodePropFrames=function(y$_,y$c,y$e,y$Z){var y$X=0,y$u=y$_.length-1;if(0<y$u){for(y$c.length=y$_[y$u].index+1,y$X=0;y$X<y$u;y$X++)this._dealKeyFrame(y$_[y$X]),this._calculateFrameValues(y$_[y$X],y$_[y$X+1],y$c);this._dealKeyFrame(y$_[y$X])}0==y$u&&(y$c[y$_[0].index]=y$_[0].value,this._animationNewFrames&&(this._animationNewFrames[y$_[0].index]=!0))},y$c._dealKeyFrame=function(y$_){y$_.label&&""!=y$_.label&&this.addLabel(y$_.label,y$_.index)},y$c._calculateFrameValues=function(y$_,y$c,y$e){var y$Z,y$X=0,y$u=y$_.index,y$P=y$c.index,y$O=y$_.value,y$s=y$c.value-y$_.value,y$n=y$P-y$u;if(y$P>this._count&&(this._count=y$P),y$_.tween)for(null==(y$Z=y$b[y$_.tweenMethod])&&(y$Z=y$b.linearNone),y$X=y$u;y$X<y$P;y$X++)y$e[y$X]=y$Z(y$X-y$u,y$O,y$s,y$n),this._animationNewFrames&&(this._animationNewFrames[y$X]=!0);else for(y$X=y$u;y$X<y$P;y$X++)y$e[y$X]=y$O;this._animationNewFrames&&(this._animationNewFrames[y$_.index]=!0,this._animationNewFrames[y$c.index]=!0),y$e[y$c.index]=y$c.value},y$u._sortIndexFun=null,y$u}(y$k_)),y$q_=function(y$c){function y$X(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",y$X.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=y$a_.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}y$m(y$X,"laya.display.Input",y$c);var y$_=y$X.prototype;return y$_.setSelection=function(y$_,y$c){this.focus=!0,laya.display.Input.inputElement.selectionStart=y$_,laya.display.Input.inputElement.selectionEnd=y$c},y$_._onUnDisplay=function(y$_){this.focus=!1},y$_._onMouseDown=function(y$_){this.focus=!0},y$_._syncInputTransform=function(){var y$_=this.nativeInput,y$c=y$W.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),y$e=this._width-this.padding[1]-this.padding[3],y$Z=this._height-this.padding[0]-this.padding[2];y$R.isConchApp?(y$_.setScale(y$c.scaleX,y$c.scaleY),y$_.setSize(y$e,y$Z),y$_.setPos(y$c.x,y$c.y)):(y$X.inputContainer.style.transform=y$X.inputContainer.style.webkitTransform="scale("+y$c.scaleX+","+y$c.scaleY+") rotate("+y$M.stage.canvasDegree+"deg)",y$_.style.width=y$e+"px",y$_.style.height=y$Z+"px",y$X.inputContainer.style.left=y$c.x+"px",y$X.inputContainer.style.top=y$c.y+"px")},y$_.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},y$_._setInputMethod=function(){y$X.input.parentElement&&y$X.inputContainer.removeChild(y$X.input),y$X.area.parentElement&&y$X.inputContainer.removeChild(y$X.area),y$X.inputElement=this._multiline?y$X.area:y$X.input,y$X.inputContainer.appendChild(y$X.inputElement),y$a_.RightToLeft&&(y$X.inputElement.style.direction="rtl")},y$_._focusIn=function(){laya.display.Input.isInputting=!0;var y$_=this.nativeInput;this._focus=!0;var y$c=y$_.style;y$c.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),y$_.readOnly=!this._editable,y$R.isConchApp&&(y$_.setType(this._type),y$_.setForbidEdit(!this._editable)),y$_.maxLength=this._maxChars;this.padding;if(y$_.type=this._type,y$_.value=this._content,y$_.placeholder=this._prompt,y$M.stage.off("keydown",this,this._onKeyDown),y$M.stage.on("keydown",this,this._onKeyDown),(y$M.stage.focus=this).event("focus"),y$p.onPC&&y$_.focus(),!y$p.onMiniGame){this._text;this._text=null}this.typeset(),y$_.setColor(this._originColor),y$_.setFontSize(this.fontSize),y$_.setFontFace(y$p.onIPhone&&y$a_._fontFamilyMap[this.font]||this.font),y$R.isConchApp&&y$_.setMultiAble&&y$_.setMultiAble(this._multiline),y$c.lineHeight=this.leading+this.fontSize+"px",y$c.fontStyle=this.italic?"italic":"normal",y$c.fontWeight=this.bold?"bold":"normal",y$c.textAlign=this.align,y$c.padding="0 0",this._syncInputTransform(),!y$R.isConchApp&&y$p.onPC&&y$M.timer.frameLoop(1,this,this._syncInputTransform)},y$_._setPromptColor=function(){(y$X.promptStyleDOM=y$p.getElementById("promptStyle"))||((y$X.promptStyleDOM=y$p.createElement("style")).setAttribute("id","promptStyle"),y$p.document.head.appendChild(y$X.promptStyleDOM)),y$X.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},y$_._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(y$M.superSet(y$a_,this,"text",this._content),y$M.superSet(y$a_,this,"color",this._originColor)):(y$M.superSet(y$a_,this,"text",this._prompt),y$M.superSet(y$a_,this,"color",this._promptColor)),y$M.stage.off("keydown",this,this._onKeyDown),y$M.stage.focus=null,this.event("blur"),y$R.isConchApp&&this.nativeInput.blur(),y$p.onPC&&y$M.timer.clear(this,this._syncInputTransform)},y$_._onKeyDown=function(y$_){13===y$_.keyCode&&(y$p.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},y$_.changeText=function(y$_){this._content=y$_,this._focus?(this.nativeInput.value=y$_||"",this.event("change")):y$c.prototype.changeText.call(this,y$_)},y$U(0,y$_,"color",y$c.prototype._$get_color,function(y$_){this._focus&&this.nativeInput.setColor(y$_),y$M.superSet(y$a_,this,"color",this._content?y$_:this._promptColor),this._originColor=y$_}),y$U(0,y$_,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(y$_){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),y$U(0,y$_,"multiline",function(){return this._multiline},function(y$_){this._multiline=y$_,this.valign=y$_?"top":"middle"}),y$U(0,y$_,"maxChars",function(){return this._maxChars},function(y$_){y$_<=0&&(y$_=1e5),this._maxChars=y$_}),y$U(0,y$_,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(y$_){y$M.superSet(y$a_,this,"color",this._originColor),y$_+="",this._focus?(this.nativeInput.value=y$_||"",this.event("change")):(this._multiline||(y$_=y$_.replace(/\r?\n/g,"")),(this._content=y$_)?y$M.superSet(y$a_,this,"text",y$_):(y$M.superSet(y$a_,this,"text",this._prompt),y$M.superSet(y$a_,this,"color",this.promptColor)))}),y$U(0,y$_,"nativeInput",function(){return this._multiline?y$X.area:y$X.input}),y$U(0,y$_,"prompt",function(){return this._prompt},function(y$_){!this._text&&y$_&&y$M.superSet(y$a_,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?y$M.superSet(y$a_,this,"text",this._text==this._prompt?y$_:this._text):y$M.superSet(y$a_,this,"text",y$_),this._prompt=y$a_.langPacks&&y$a_.langPacks[y$_]?y$a_.langPacks[y$_]:y$_}),y$U(0,y$_,"focus",function(){return this._focus},function(y$_){var y$c=this.nativeInput;this._focus!==y$_&&(y$_?(y$c.target?y$c.target._focusOut():this._setInputMethod(),(y$c.target=this)._focusIn()):(y$c.target=null,this._focusOut(),y$p.document.body.scrollTop=0,y$c.blur(),y$R.isConchApp?y$c.setPos(-1e4,-1e4):y$X.inputContainer.contains(y$c)&&y$X.inputContainer.removeChild(y$c)))}),y$U(0,y$_,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(y$_){y$_?(-1<(y$_="[^"+y$_+"]").indexOf("^^")&&(y$_=y$_.replace("^^","")),this._restrictPattern=new RegExp(y$_,"g")):this._restrictPattern=null}),y$U(0,y$_,"editable",function(){return this._editable},function(y$_){this._editable=y$_,y$R.isConchApp&&y$X.input.setForbidEdit(!y$_)}),y$U(0,y$_,"promptColor",function(){return this._promptColor},function(y$_){this._promptColor=y$_,this._content||y$M.superSet(y$a_,this,"color",y$_)}),y$U(0,y$_,"type",function(){return this._type},function(y$_){this._getCSSStyle().password="password"==y$_,this._type=y$_,y$R.isConchApp&&this.nativeInput.setType(y$_)}),y$U(0,y$_,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(y$_){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),y$U(0,y$_,"asPassword",function(){return this._getCSSStyle().password},function(y$_){this._getCSSStyle().password=y$_,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),y$X.__init__=function(){y$X._createInputElement(),y$p.onMobile&&y$R.canvas.addEventListener(y$X.IOS_IFRAME?y$p.onMiniGame?"touchend":"click":"touchend",y$X._popupInputMethod)},y$X._popupInputMethod=function(y$_){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},y$X._createInputElement=function(){y$X._initInput(y$X.area=y$p.createElement("textarea")),y$X._initInput(y$X.input=y$p.createElement("input")),(y$X.inputContainer=y$p.createElement("div")).style.position="absolute",y$X.inputContainer.style.zIndex=1e5,y$p.container.appendChild(y$X.inputContainer),y$X.inputContainer.setPos=function(y$_,y$c){y$X.inputContainer.style.left=y$_+"px",y$X.inputContainer.style.top=y$c+"px"}},y$X._initInput=function(y$c){var y$_=y$c.style;y$_.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",y$_.resize="none",y$_.backgroundColor="transparent",y$_.border="none",y$_.outline="none",y$_.zIndex=1,y$c.addEventListener("input",y$X._processInputting),y$c.addEventListener("mousemove",y$X._stopEvent),y$c.addEventListener("mousedown",y$X._stopEvent),y$c.addEventListener("touchmove",y$X._stopEvent),y$c.setFontFace=function(y$_){y$c.style.fontFamily=y$_},y$R.isConchApp||(y$c.setColor=function(y$_){y$c.style.color=y$_},y$c.setFontSize=function(y$_){y$c.style.fontSize=y$_+"px"})},y$X._processInputting=function(y$_){var y$c=laya.display.Input.inputElement.target;if(y$c){var y$e=laya.display.Input.inputElement.value;y$c._restrictPattern&&(y$e=y$e.replace(/\u2006|\x27/g,""),y$c._restrictPattern.test(y$e)&&(y$e=y$e.replace(y$c._restrictPattern,""),laya.display.Input.inputElement.value=y$e)),y$c._text=y$e,y$c.event("input")}},y$X._stopEvent=function(y$_){"touchmove"==y$_.type&&y$_.preventDefault(),y$_.stopPropagation&&y$_.stopPropagation()},y$X.TYPE_TEXT="text",y$X.TYPE_PASSWORD="password",y$X.TYPE_EMAIL="email",y$X.TYPE_URL="url",y$X.TYPE_NUMBER="number",y$X.TYPE_RANGE="range",y$X.TYPE_DATE="date",y$X.TYPE_MONTH="month",y$X.TYPE_WEEK="week",y$X.TYPE_TIME="time",y$X.TYPE_DATE_TIME="datetime",y$X.TYPE_DATE_TIME_LOCAL="datetime-local",y$X.TYPE_SEARCH="search",y$X.input=null,y$X.area=null,y$X.inputElement=null,y$X.inputContainer=null,y$X.confirmButton=null,y$X.promptStyleDOM=null,y$X.inputHeight=45,y$X.isInputting=!1,y$X.stageMatrix=null,y$s(y$X,["IOS_IFRAME",function(){return this.IOS_IFRAME=y$p.onIOS&&y$p.window.top!=y$p.window.self}]),y$X}(y$a_),y$K_=function(y$_){function y$e(y$_,y$c){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,y$e.__super.call(this),y$_&&this._init_(y$_,y$c)}y$m(y$e,"laya.resource.HTMLImage",y$w_);var y$c=y$e.prototype;return y$c._init_=function(y$_,y$c){this._src=y$_,this._source=new y$p.window.Image,y$c&&(y$c.onload&&(this.onload=y$c.onload),y$c.onerror&&(this.onerror=y$c.onerror),y$c.onCreate&&y$c.onCreate(this)),0!=y$_.indexOf("data:image")&&(this._source.crossOrigin=""),y$_&&(this._source.src=y$_)},y$c.recreateResource=function(){var y$_=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var y$c=this;this._source=new y$p.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(y$c._needReleaseAgain)return y$c._needReleaseAgain=!1,y$c._source.onload=null,void(y$c._source=null);y$c._source.onload=null,y$c.memorySize=y$_._w*y$_._h*4,y$c._recreateLock=!1,y$c.completeCreate()},this._source.src=this._src}},y$c.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},y$c.onresize=function(){this._w=this._source.width,this._h=this._source.height},y$U(0,y$c,"onload",null,function(y$_){var y$c=this;this._onload=y$_,this._source&&(this._source.onload=null!=this._onload?function(){y$c.onresize(),y$c._onload()}:null)}),y$U(0,y$c,"onerror",null,function(y$_){var y$c=this;this._onerror=y$_,this._source&&(this._source.onerror=null!=this._onerror?function(){y$c._onerror()}:null)}),y$U(0,y$c,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(y$_){this._enableMerageInAtlas=y$_,y$R.isConchApp&&this._source&&(this._source.enableMerageInAtlas=y$_)}),y$e.create=function(y$_,y$c){return new y$e(y$_,y$c)},y$e}(),y$M_=(function(y$u){function y$_(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,y$_.__super.call(this)}y$m(y$_,"laya.display.EffectAnimation",y$u);var y$c=y$_.prototype;y$c._onOtherBegin=function(y$_){y$_!=this&&this.stop()},y$c.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},y$c._onPlayAction=function(){this.play(0,!1)},y$c.play=function(y$_,y$c,y$e,y$Z){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=!0),void 0===y$e&&(y$e=""),void 0===y$Z&&(y$Z=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,y$_,y$c,y$e,y$Z))},y$c._recordInitData=function(){if(this._aniKeys){var y$_,y$c,y$e=0;for(y$_=this._aniKeys.length,y$e=0;y$e<y$_;y$e++)y$c=this._aniKeys[y$e],this._initData[y$c]=this._target[y$c]}},y$c._displayToIndex=function(y$_){if(this._animationData){y$_<0&&(y$_=0),y$_>this._count&&(y$_=this._count);var y$c=this._animationData.nodes,y$e=0,y$Z=y$c.length;for(y$Z=1<y$Z?1:y$Z,y$e=0;y$e<y$Z;y$e++)this._displayNodeToFrame(y$c[y$e],y$_)}},y$c._displayNodeToFrame=function(y$_,y$c,y$e){if(this._target){var y$Z;y$Z=this._target;var y$X,y$u,y$P,y$O,y$s=y$_.frames,y$n=y$_.keys,y$m=0,y$H=y$n.length;y$O=y$_.secondFrames;var y$B,y$D,y$U,y$k,y$a=0;for(y$m=0;y$m<y$H;y$m++)y$u=y$s[y$X=y$n[y$m]],y$P=-1==(y$a=y$O[y$X])?this._initData[y$X]:y$c<y$a?(y$U=(y$D=y$_.keyframes[y$X])[0]).tween?(null==(y$B=y$b[y$U.tweenMethod])&&(y$B=y$b.linearNone),y$k=y$D[1],y$B(y$c,this._initData[y$X],y$k.value-this._initData[y$X],y$k.index)):this._initData[y$X]:y$u.length>y$c?y$u[y$c]:y$u[y$u.length-1],y$Z[y$X]=y$P}},y$c._calculateNodeKeyFrames=function(y$_){y$u.prototype._calculateNodeKeyFrames.call(this,y$_);var y$c,y$e,y$Z,y$X=y$_.keyframes;y$_.target;for(y$c in y$Z={},y$_.secondFrames=y$Z,y$X)(y$e=y$X[y$c]).length<=1?y$Z[y$c]=-1:y$Z[y$c]=y$e[1].index},y$U(0,y$c,"target",function(){return this._target},function(y$_){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=y$_,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),y$U(0,y$c,"playEvent",null,function(y$_){(this._playEvents=y$_)&&this.addEvent()}),y$U(0,y$c,"effectData",null,function(y$_){var y$c;y$_&&((y$c=y$_.animations)&&y$c[0]&&(this._setUp({},y$c[0]),y$c[0].nodes&&y$c[0].nodes[0]&&(this._aniKeys=y$c[0].nodes[0].keys)))}),y$U(0,y$c,"effectClass",null,function(y$_){var y$c,y$e;(this._effectClass=y$J.getClass(y$_),this._effectClass)&&((y$c=this._effectClass.uiView)&&(y$e=y$c.animations)&&y$e[0]&&(this._setUp({},y$e[0]),y$e[0].nodes&&y$e[0].nodes[0]&&(this._aniKeys=y$e[0].nodes[0].keys)))}),y$_.EffectAnimationBegin="effectanimationbegin"}(y$L_),function(y$c){var y$r;function y$C(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,y$C.__super.call(this)}y$m(y$C,"laya.utils.GraphicAnimation",y$c);var y$_=y$C.prototype;return y$_._parseNodeList=function(y$_){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[y$_.compId]=y$_.props,y$_.compId&&this._nodeList.push(y$_.compId);var y$c=y$_.child;if(y$c){var y$e=0,y$Z=y$c.length;for(y$e=0;y$e<y$Z;y$e++)this._parseNodeList(y$c[y$e])}},y$_._calGraphicData=function(y$_){var y$c;if(this._setUp(null,y$_),this._createGraphicData(),this._nodeIDAniDic)for(y$c in this._nodeIDAniDic)this._nodeIDAniDic[y$c]=null},y$_._createGraphicData=function(){var y$_,y$c=[],y$e=0,y$Z=this.count,y$X=this._animationNewFrames;for(y$X||(y$X=[]),y$e=0;y$e<y$Z;y$e++)!y$X[y$e]&&y$_||(y$_=this._createFrameGraphic(y$e)),y$c.push(y$_);this._gList=y$c},y$_._createFrameGraphic=function(y$_){var y$c=y$y.createGraphics();return y$C._rootMatrix||(y$C._rootMatrix=new y$$),this._updateNodeGraphic(this._rootNode,y$_,y$C._rootMatrix,y$c),y$c},y$_._updateNodeGraphic=function(y$_,y$c,y$e,y$Z,y$X){var y$u;void 0===y$X&&(y$X=1);var y$P,y$O,y$s,y$n=(y$u=this._nodeGDic[y$_.compId]=this._getNodeGraphicData(y$_.compId,y$c,this._nodeGDic[y$_.compId])).alpha*y$X;if(!(y$n<.01)&&(y$u.resultTransform||(y$u.resultTransform=y$$.create()),y$P=y$u.resultTransform,y$$.mul(y$u.transform,y$e,y$P),y$u.skin&&(y$O=this._getTextureByUrl(y$u.skin))&&(y$P._checkTransform()?(y$Z.drawTexture(y$O,0,0,y$u.width,y$u.height,y$P,y$n),y$u.resultTransform=null):y$Z.drawTexture(y$O,y$P.tx,y$P.ty,y$u.width,y$u.height,null,y$n)),y$s=y$_.child)){var y$m,y$H=0;for(y$m=y$s.length,y$H=0;y$H<y$m;y$H++)this._updateNodeGraphic(y$s[y$H],y$c,y$P,y$Z,y$n)}},y$_._updateNoChilds=function(y$_,y$c){if(y$_.skin){var y$e=this._getTextureByUrl(y$_.skin);if(y$e){var y$Z=y$_.transform;y$Z._checkTransform();!y$Z.bTransform?y$c.drawTexture(y$e,y$Z.tx,y$Z.ty,y$_.width,y$_.height,null,y$_.alpha):y$c.drawTexture(y$e,0,0,y$_.width,y$_.height,y$Z.clone(),y$_.alpha)}}},y$_._updateNodeGraphic2=function(y$_,y$c,y$e){var y$Z;if(y$Z=this._nodeGDic[y$_.compId]=this._getNodeGraphicData(y$_.compId,y$c,this._nodeGDic[y$_.compId]),y$_.child){var y$X=y$Z.transform;y$X._checkTransform();var y$u,y$P;y$P=(y$u=!y$X.bTransform)&&(0!=y$X.tx||0!=y$X.ty);var y$O,y$s,y$n;if((y$O=y$X.bTransform||1!=y$Z.alpha)&&y$e.save(),1!=y$Z.alpha&&y$e.alpha(y$Z.alpha),y$u?y$P&&y$e.translate(y$X.tx,y$X.ty):y$e.transform(y$X.clone()),y$s=y$_.child,y$Z.skin&&(y$n=this._getTextureByUrl(y$Z.skin))&&y$e.drawTexture(y$n,0,0,y$Z.width,y$Z.height),y$s){var y$m,y$H=0;for(y$m=y$s.length,y$H=0;y$H<y$m;y$H++)this._updateNodeGraphic2(y$s[y$H],y$c,y$e)}y$O?y$e.restore():y$u?y$P&&y$e.translate(-y$X.tx,-y$X.ty):y$e.transform(y$X.clone().invert())}else this._updateNoChilds(y$Z,y$e)},y$_._calculateNodeKeyFrames=function(y$_){y$c.prototype._calculateNodeKeyFrames.call(this,y$_),this._nodeIDAniDic[y$_.target]=y$_},y$_.getNodeDataByID=function(y$_){return this._nodeIDAniDic[y$_]},y$_._getParams=function(y$_,y$c,y$e,y$Z){var y$X=y$C._temParam;y$X.length=y$c.length;var y$u=0,y$P=y$c.length;for(y$u=0;y$u<y$P;y$u++)y$X[y$u]=this._getObjVar(y$_,y$c[y$u][0],y$e,y$c[y$u][1],y$Z);return y$X},y$_._getObjVar=function(y$_,y$c,y$e,y$Z,y$X){if(y$_.hasOwnProperty(y$c)){var y$u=y$_[y$c];if(y$e>=y$u.length&&(y$e=y$u.length-1),null!=y$_[y$c][y$e])return y$_[y$c][y$e]}return y$X.hasOwnProperty(y$c)?y$X[y$c]:y$Z},y$_._getNodeGraphicData=function(y$_,y$c,y$e){y$e||(y$e=y$r.create()),y$e.transform?y$e.transform.identity():y$e.transform=y$$.create();var y$Z=this.getNodeDataByID(y$_);if(!y$Z)return y$e;var y$X,y$u,y$P=y$Z.frames,y$O=this._getParams(y$P,y$C._drawTextureCmd,y$c,this._nodeDefaultProps[y$_]),y$s=y$O[0],y$n=NaN,y$m=NaN,y$H=y$O[5],y$B=y$O[6],y$D=y$O[13],y$U=y$O[14],y$k=y$O[7],y$a=y$O[8],y$G=y$O[9],y$w=y$O[11],y$z=y$O[12];y$n=y$O[3],y$m=y$O[4],0!=y$n&&0!=y$m||(y$s=null),-1==y$n&&(y$n=0),-1==y$m&&(y$m=0),y$e.skin=y$s,y$e.width=y$n,y$e.height=y$m,y$s&&((y$X=this._getTextureByUrl(y$s))?(y$n||(y$n=y$X.sourceWidth),y$m||(y$m=y$X.sourceHeight)):console.warn("lost skin:",y$s,",you may load pics first")),y$e.alpha=y$O[10],y$u=y$e.transform,0!=y$D&&(y$H=y$D*y$n),0!=y$U&&(y$B=y$U*y$m),0==y$H&&0==y$B||y$u.translate(-y$H,-y$B);var y$L=null;if(y$G||1!==y$k||1!==y$a||y$w||y$z){(y$L=y$C._tempMt).identity(),y$L.bTransform=!0;var y$q=.0174532922222222*(y$G-y$w),y$K=.0174532922222222*(y$G+y$z),y$M=Math.cos(y$K),y$f=Math.sin(y$K),y$A=Math.sin(y$q),y$v=Math.cos(y$q);y$L.a=y$k*y$M,y$L.b=y$k*y$f,y$L.c=-y$a*y$A,y$L.d=y$a*y$v,y$L.tx=y$L.ty=0}return y$L&&(y$u=y$$.mul(y$u,y$L,y$u)),y$u.translate(y$O[1],y$O[2]),y$e},y$_._getTextureByUrl=function(y$_){return y$O_.getRes(y$_)},y$_.setAniData=function(y$_,y$c){if(y$_.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=y$_,this._parseNodeList(y$_);var y$e,y$Z={},y$X=[],y$u=y$_.animations,y$P=0,y$O=y$u.length;for(y$P=0;y$P<y$O;y$P++)if(y$e=y$u[y$P],this._labels=null,(!y$c||y$c==y$e.name)&&y$e){try{this._calGraphicData(y$e)}catch(y$_){console.warn("parse animation fail:"+y$e.name+",empty animation created"),this._gList=[]}var y$s={};y$s.interval=1e3/y$e.frameRate,y$s.frames=this._gList,y$s.labels=this._labels,y$s.name=y$e.name,y$X.push(y$s),y$Z[y$e.name]=y$s}this.animationList=y$X,this.animationDic=y$Z}y$C._temParam.length=0},y$_.parseByData=function(y$_){var y$c,y$e;y$c=y$_.nodeRoot,y$e=y$_.aniO,delete y$_.nodeRoot,delete y$_.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=y$c,this._parseNodeList(y$c),this._labels=null;try{this._calGraphicData(y$e)}catch(y$_){console.warn("parse animation fail:"+y$e.name+",empty animation created"),this._gList=[]}var y$Z=y$_;return y$Z.interval=1e3/y$e.frameRate,y$Z.frames=this._gList,y$Z.labels=this._labels,y$Z.name=y$e.name,y$Z},y$_.setUpAniData=function(y$_){if(y$_.animations){var y$c,y$e={},y$Z=[],y$X=y$_.animations,y$u=0,y$P=y$X.length;for(y$u=0;y$u<y$P;y$u++)if(y$c=y$X[y$u]){var y$O={};y$O.name=y$c.name,y$O.aniO=y$c,y$O.nodeRoot=y$_,y$Z.push(y$O),y$e[y$c.name]=y$O}this.animationList=y$Z,this.animationDic=y$e}},y$_._clear=function(){var y$_,y$c;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(y$_ in this._nodeGDic)(y$c=this._nodeGDic[y$_])&&y$c.recover();this._nodeGDic=null},y$C.parseAnimationByData=function(y$_){var y$c;return y$C._I||(y$C._I=new y$C),y$c=y$C._I.parseByData(y$_),y$C._I._clear(),y$c},y$C.parseAnimationData=function(y$_){var y$c;return y$C._I||(y$C._I=new y$C),y$C._I.setUpAniData(y$_),(y$c={}).animationList=y$C._I.animationList,y$c.animationDic=y$C._I.animationDic,y$C._I._clear(),y$c},y$C._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],y$C._temParam=[],y$C._I=null,y$C._rootMatrix=null,y$s(y$C,["_tempMt",function(){return this._tempMt=new y$$}]),y$C.__init$=function(){y$r=function(){function y$_(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return y$m(y$_,""),y$_.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),y$V.recover("GraphicNode",this)},y$_.create=function(){return y$V.getItemByClass("GraphicNode",y$_)},y$_}()},y$C}(y$L_));y$M.__init([y$n,y$s_,y$R,y$p,y$S,y$v,y$_,y$M_])}(window,document,Laya),function(y$_,y$c,y$e){y$e.un,y$e.uns,y$e.static;var y$Z=y$e.class;y$e.getset,y$e.__newvec;new(function(){function y$_(){}return y$Z(y$_,"LayaMain"),y$_}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(y$_,y$c){"use strict";for(var y$e in Object.defineProperty(y$c,"__esModule",{value:!0}),Laya){var y$Z=Laya[y$e];y$Z&&y$Z.__isclass&&(y$c[y$e]=y$Z)}}),function(y$_,y$c,y$K){y$K.un,y$K.uns;var y$P=y$K.static,y$B=y$K.class,y$Z=y$K.getset,y$u=y$K.__newvec,y$m=laya.maths.Arith,y$H=laya.maths.Bezier,y$e=laya.resource.Bitmap,y$D=laya.utils.Browser,y$s=laya.utils.Byte,y$U=laya.utils.Color,y$M=(laya.filters.ColorFilter,y$K.Config),y$X=laya.resource.Context,y$f=(laya.events.Event,laya.filters.Filter),y$O=laya.display.Graphics,y$n=laya.resource.HTMLCanvas,y$k=(laya.utils.HTMLChar,laya.resource.HTMLImage),y$a=laya.resource.HTMLSubImage,y$A=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),y$v=laya.maths.Point,y$r=laya.maths.Rectangle,y$G=laya.renders.Render,y$w=(laya.renders.RenderContext,laya.renders.RenderSprite),y$z=laya.resource.Resource,y$L=laya.resource.ResourceManager,y$q=laya.utils.RunDriver,y$C=laya.display.Sprite,y$y=laya.display.Stage,y$$=laya.utils.Stat,y$T=laya.utils.StringKey,y$h=(laya.display.css.Style,laya.system.System),y$R=laya.display.Text,y$i=laya.resource.Texture,y$x=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),y$F=laya.utils.VectorGraphManager;laya.utils.WordText;y$K.interface("laya.webgl.shapes.IShape"),y$K.interface("laya.webgl.submit.ISubmit"),y$K.interface("laya.webgl.text.ICharSegment"),y$K.interface("laya.webgl.canvas.save.ISaveData"),y$K.interface("laya.webgl.resource.IMergeAtlasBitmap"),y$K.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var y$Y=function(){function y$_(){}y$B(y$_,"laya.filters.webgl.FilterActionGL");var y$c=y$_.prototype;return y$K.imps(y$c,{"laya.filters.IFilterActionGL":!0}),y$c.setValue=function(y$_){},y$c.setValueMix=function(y$_){},y$c.apply3d=function(y$_,y$c,y$e,y$Z,y$X){return null},y$c.apply=function(y$_){return null},y$Z(0,y$c,"typeMix",function(){return 0}),y$_}(),y$p=function(){function y$_(){}return y$B(y$_,"laya.webgl.shader.ShaderValue"),y$_}(),y$o=function(){var y$Z,y$X;function y$_(y$_,y$c,y$e){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new y$X,void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),this._cells=null,this._rowInfo=null,this._init(y$_,y$c),this._atlasID=y$e}y$B(y$_,"laya.webgl.atlas.AtlasGrid");var y$c=y$_.prototype;return y$c.getAltasID=function(){return this._atlasID},y$c.setAltasID=function(y$_){0<=y$_&&(this._atlasID=y$_)},y$c.addTex=function(y$_,y$c,y$e){var y$Z=this._get(y$c,y$e);return 0==y$Z.ret||(this._fill(y$Z.x,y$Z.y,y$c,y$e,y$_),this._texCount++),y$Z},y$c._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},y$c._init=function(y$_,y$c){if(this._width=y$_,this._height=y$c,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=y$u(this._height);for(var y$e=0;y$e<this._height;y$e++)this._rowInfo[y$e]=new y$Z;return this._clear(),!0},y$c._get=function(y$_,y$c){var y$e=new y$J;if(y$_>=this._failSize.width&&y$c>=this._failSize.height)return y$e;for(var y$Z=-1,y$X=-1,y$u=this._width,y$P=this._height,y$O=this._cells,y$s=0;y$s<y$P;y$s++)if(!(this._rowInfo[y$s].spaceCount<y$_))for(var y$n=0;y$n<y$u;){var y$m=3*(y$s*y$u+y$n);if(0!=y$O[y$m]||y$O[1+y$m]<y$_||y$O[2+y$m]<y$c)y$n+=y$O[1+y$m];else{y$Z=y$n,y$X=y$s;for(var y$H=0;y$H<y$_;y$H++)if(y$O[3*y$H+y$m+2]<y$c){y$Z=-1;break}if(!(y$Z<0))return y$e.ret=!0,y$e.x=y$Z,y$e.y=y$X,y$e;y$n+=y$O[1+y$m]}}return y$e},y$c._fill=function(y$_,y$c,y$e,y$Z,y$X){var y$u=this._width,y$P=this._height;this._check(y$_+y$e<=y$u&&y$c+y$Z<=y$P);for(var y$O=y$c;y$O<y$Z+y$c;++y$O){this._check(this._rowInfo[y$O].spaceCount>=y$e),this._rowInfo[y$O].spaceCount-=y$e;for(var y$s=0;y$s<y$e;y$s++){var y$n=3*(y$_+y$O*y$u+y$s);this._check(0==this._cells[y$n]),this._cells[y$n]=y$X,this._cells[1+y$n]=y$e,this._cells[2+y$n]=y$Z}}if(0<y$_)for(y$O=0;y$O<y$Z;++y$O){var y$m=0;for(y$s=y$_-1;0<=y$s&&0==this._cells[3*((y$c+y$O)*y$u+y$s)];--y$s,++y$m);for(y$s=y$m;0<y$s;--y$s)this._cells[3*((y$c+y$O)*y$u+y$_-y$s)+1]=y$s,this._check(0<y$s)}if(0<y$c)for(y$s=y$_;y$s<y$_+y$e;++y$s){for(y$m=0,y$O=y$c-1;0<=y$O&&0==this._cells[3*(y$s+y$O*y$u)];--y$O,y$m++);for(y$O=y$m;0<y$O;--y$O)this._cells[3*(y$s+(y$c-y$O)*y$u)+2]=y$O,this._check(0<y$O)}},y$c._check=function(y$_){0==y$_&&console.log("xtexMerger 错误啦")},y$c._clear=function(){for(var y$_=this._texCount=0;y$_<this._height;y$_++)this._rowInfo[y$_].spaceCount=this._width;for(var y$c=0;y$c<this._height;y$c++)for(var y$e=0;y$e<this._width;y$e++){var y$Z=3*(y$c*this._width+y$e);this._cells[y$Z]=0,this._cells[1+y$Z]=this._width-y$e,this._cells[2+y$Z]=this._width-y$c}this._failSize.width=this._width+1,this._failSize.height=this._height+1},y$_.__init$=function(){y$Z=function(){function y$_(){this.spaceCount=0}return y$B(y$_,""),y$_}(),y$X=function(){function y$_(){this.width=0,this.height=0}return y$B(y$_,""),y$_}()},y$_}(),y$Q=function(){function y$G(y$_,y$c,y$e,y$Z){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=y$_,this._height=y$c,this._gridSize=y$e,this._maxAtlaserCount=y$Z,this._gridNumX=y$_/y$e,this._gridNumY=y$c/y$e,this._curAtlasIndex=0,this._atlaserArray=[]}y$B(y$G,"laya.webgl.atlas.AtlasResourceManager");var y$_=y$G.prototype;return y$_.setAtlasParam=function(y$_,y$c,y$e,y$Z){if(1==this._setAtlasParam)return y$G._sid_=0,this._width=y$_,this._height=y$c,this._gridSize=y$e,this._maxAtlaserCount=y$Z,this._gridNumX=y$_/y$e,this._gridNumY=y$c/y$e,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},y$_.pushData=function(y$_){var y$c,y$e=y$_.bitmap,y$Z=-1,y$X=null,y$u=0,y$P=0;for(y$u=0,y$c=this._atlaserArray.length;y$u<y$c&&(y$P=(this._curAtlasIndex+y$u)%y$c,-1==(y$Z=(y$X=this._atlaserArray[y$P]).findBitmapIsExist(y$e)));y$u++);if(-1!=y$Z){var y$O=y$X.InAtlasWebGLImagesOffsetValue[y$Z];return y$U=y$O[0],y$k=y$O[1],y$X.addToAtlas(y$_,y$U,y$k),!0}this._setAtlasParam=!1;for(var y$s=Math.ceil((y$_.bitmap.width+2)/this._gridSize),y$n=Math.ceil((y$_.bitmap.height+2)/this._gridSize),y$m=!1,y$H=0;y$H<2;y$H++){var y$B=this._maxAtlaserCount;for(y$u=0;y$u<y$B;y$u++){y$P=(this._curAtlasIndex+y$u)%y$B,this._atlaserArray.length-1>=y$P||this._atlaserArray.push(new y$r_(this._gridNumX,this._gridNumY,this._width,this._height,y$G._sid_++));var y$D=this._atlaserArray[y$P],y$U=0,y$k=0,y$a=y$D.addTex(1,y$s,y$n);if(y$a.ret){y$U=y$a.x*this._gridSize+1,y$k=y$a.y*this._gridSize+1,y$e.lock=!0,y$D.addToAtlasTexture(y$e,y$U,y$k),y$D.addToAtlas(y$_,y$U,y$k),y$m=!0,this._curAtlasIndex=y$P;break}}if(y$m)break;this._atlaserArray.push(new y$r_(this._gridNumX,this._gridNumY,this._width,this._height,y$G._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return y$m||console.log(">>>AtlasManager pushData error"),y$m},y$_.addToAtlas=function(y$_){laya.webgl.atlas.AtlasResourceManager.instance.pushData(y$_)},y$_.garbageCollection=function(){if(!0===this._needGC){for(var y$_=this._atlaserArray.length-this._maxAtlaserCount,y$c=0;y$c<y$_;y$c++)this._atlaserArray[y$c].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+y$_),this._atlaserArray.splice(0,y$_),this._needGC=!1}return!0},y$_.freeAll=function(){for(var y$_=0,y$c=this._atlaserArray.length;y$_<y$c;y$_++)this._atlaserArray[y$_].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},y$_.getAtlaserCount=function(){return this._atlaserArray.length},y$_.getAtlaserByIndex=function(y$_){return this._atlaserArray[y$_]},y$Z(1,y$G,"instance",function(){return y$G._Instance||(y$G._Instance=new y$G(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),y$G._Instance}),y$Z(1,y$G,"enabled",function(){return y$M.atlasEnable}),y$Z(1,y$G,"atlasLimitWidth",function(){return y$G._atlasLimitWidth},function(y$_){y$G._atlasLimitWidth=y$_}),y$Z(1,y$G,"atlasLimitHeight",function(){return y$G._atlasLimitHeight},function(y$_){y$G._atlasLimitHeight=y$_}),y$G._enable=function(){y$M.atlasEnable=!0},y$G._disable=function(){y$M.atlasEnable=!1},y$G.__init__=function(){y$G.atlasTextureWidth=2048,y$G.atlasTextureHeight=2048,y$G.maxTextureCount=6,y$G.atlasLimitWidth=512,y$G.atlasLimitHeight=512},y$G._atlasLimitWidth=0,y$G._atlasLimitHeight=0,y$G.gridSize=16,y$G.atlasTextureWidth=0,y$G.atlasTextureHeight=0,y$G.maxTextureCount=0,y$G._atlasRestore=0,y$G.BOARDER_TYPE_NO=0,y$G.BOARDER_TYPE_RIGHT=1,y$G.BOARDER_TYPE_LEFT=2,y$G.BOARDER_TYPE_BOTTOM=4,y$G.BOARDER_TYPE_TOP=8,y$G.BOARDER_TYPE_ALL=15,y$G._sid_=0,y$G._Instance=null,y$G}(),y$J=function(){function y$_(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return y$B(y$_,"laya.webgl.atlas.MergeFillInfo"),y$_}(),y$j=function(){function y$c(){}return y$B(y$c,"laya.webgl.canvas.BlendMode"),y$c._init_=function(y$_){y$c.fns=[y$c.BlendNormal,y$c.BlendAdd,y$c.BlendMultiply,y$c.BlendScreen,y$c.BlendOverlay,y$c.BlendLight,y$c.BlendMask,y$c.BlendDestinationOut],y$c.targetFns=[y$c.BlendNormalTarget,y$c.BlendAddTarget,y$c.BlendMultiplyTarget,y$c.BlendScreenTarget,y$c.BlendOverlayTarget,y$c.BlendLightTarget,y$c.BlendMask,y$c.BlendDestinationOut]},y$c.BlendNormal=function(y$_){y$_.blendFunc(1,771)},y$c.BlendAdd=function(y$_){y$_.blendFunc(1,772)},y$c.BlendMultiply=function(y$_){y$_.blendFunc(774,771)},y$c.BlendScreen=function(y$_){y$_.blendFunc(1,1)},y$c.BlendOverlay=function(y$_){y$_.blendFunc(1,769)},y$c.BlendLight=function(y$_){y$_.blendFunc(1,1)},y$c.BlendNormalTarget=function(y$_){y$_.blendFunc(1,771)},y$c.BlendAddTarget=function(y$_){y$_.blendFunc(1,772)},y$c.BlendMultiplyTarget=function(y$_){y$_.blendFunc(774,771)},y$c.BlendScreenTarget=function(y$_){y$_.blendFunc(1,1)},y$c.BlendOverlayTarget=function(y$_){y$_.blendFunc(1,769)},y$c.BlendLightTarget=function(y$_){y$_.blendFunc(1,1)},y$c.BlendMask=function(y$_){y$_.blendFunc(0,770)},y$c.BlendDestinationOut=function(y$_){y$_.blendFunc(0,0)},y$c.activeBlendFunction=null,y$c.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],y$c.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},y$c.NORMAL="normal",y$c.ADD="add",y$c.MULTIPLY="multiply",y$c.SCREEN="screen",y$c.LIGHT="light",y$c.OVERLAY="overlay",y$c.DESTINATIONOUT="destination-out",y$c.fns=[],y$c.targetFns=[],y$c}(),y$t=function(){function y$e(y$_){this._color=y$U.create("black"),this.setValue(y$_)}y$B(y$e,"laya.webgl.canvas.DrawStyle");var y$_=y$e.prototype;return y$_.setValue=function(y$_){if(y$_){if("string"==typeof y$_)return void(this._color=y$U.create(y$_));if(y$_ instanceof laya.utils.Color)return void(this._color=y$_)}},y$_.reset=function(){this._color=y$U.create("black")},y$_.equal=function(y$_){return"string"==typeof y$_?this._color.strColor===y$_:y$_ instanceof laya.utils.Color&&this._color.numColor===y$_.numColor},y$_.toColorStr=function(){return this._color.strColor},y$e.create=function(y$_){var y$c;if(y$_&&("string"==typeof y$_?y$c=y$U.create(y$_):y$_ instanceof laya.utils.Color&&(y$c=y$_),y$c))return y$c._drawStyle||(y$c._drawStyle=new y$e(y$_));return laya.webgl.canvas.DrawStyle.DEFAULT},y$P(y$e,["DEFAULT",function(){return this.DEFAULT=new y$e("#000000")}]),y$e}(),y$b=function(){function y$_(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];y$L_.mainContext;this.ib=y$d_.create(35048),this.vb=y$I_.create(5)}y$B(y$_,"laya.webgl.canvas.Path");var y$c=y$_.prototype;return y$c.addPoint=function(y$_,y$c){this.tempArray.push(y$_,y$c)},y$c.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},y$c.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},y$c.polygon=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P;return this.geomatrys.push(this._curGeomatry=y$P=new y$T_(y$_,y$c,y$e,y$Z,y$X,y$u)),y$Z||(y$P.fill=!1),null==y$u&&(y$P.borderWidth=0),y$P},y$c.setGeomtry=function(y$_){this.geomatrys.push(this._curGeomatry=y$_)},y$c.drawLine=function(y$_,y$c,y$e,y$Z,y$X){var y$u;return this.closePath?this.geomatrys.push(this._curGeomatry=y$u=new y$$_(y$_,y$c,y$e,y$Z,y$X)):this.geomatrys.push(this._curGeomatry=y$u=new y$y_(y$_,y$c,y$e,y$Z,y$X)),y$u.fill=!1,y$u},y$c.update=function(){var y$_=this.ib._byteLength,y$c=this.geomatrys.length;this.offset=y$_;for(var y$e=this.geoStart;y$e<y$c;y$e++)this.geomatrys[y$e].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=y$c,this.count=(this.ib._byteLength-y$_)/y$k_.BYTES_PIDX},y$c.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},y$c.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},y$_}(),y$N=function(){function y$O(){}y$B(y$O,"laya.webgl.canvas.save.SaveBase");var y$_=y$O.prototype;return y$K.imps(y$_,{"laya.webgl.canvas.save.ISaveData":!0}),y$_.isSaveMark=function(){return!1},y$_.restore=function(y$_){this._dataObj[this._valueName]=this._value,(y$O._cache[y$O._cache._length++]=this)._newSubmit&&(y$_._curSubmit=y$u_.RENDERBASE,y$_._renderKey=0)},y$O._createArray=function(){var y$_=[];return y$_._length=0,y$_},y$O._init=function(){var y$_=y$O._namemap={};return y$_[1]="ALPHA",y$_[2]="fillStyle",y$_[8]="font",y$_[256]="lineWidth",y$_[512]="strokeStyle",y$_[8192]="_mergeID",y$_[1024]=y$_[2048]=y$_[4096]=[],y$_[16384]="textBaseline",y$_[32768]="textAlign",y$_[65536]="_nBlendType",y$_[1048576]="shader",y$_[2097152]="filters",y$_},y$O.save=function(y$_,y$c,y$e,y$Z){if((y$_._saveMark._saveuse&y$c)!==y$c){y$_._saveMark._saveuse|=y$c;var y$X=y$O._cache,y$u=0<y$X._length?y$X[--y$X._length]:new y$O;y$u._value=y$e[y$u._valueName=y$O._namemap[y$c]],y$u._dataObj=y$e,y$u._newSubmit=y$Z;var y$P=y$_._save;y$P[y$P._length++]=y$u}},y$O._cache=laya.webgl.canvas.save.SaveBase._createArray(),y$O._namemap=y$O._init(),y$O}(),y$V=function(){function y$u(){this._clipRect=new y$r}y$B(y$u,"laya.webgl.canvas.save.SaveClipRect");var y$_=y$u.prototype;return y$K.imps(y$_,{"laya.webgl.canvas.save.ISaveData":!0}),y$_.isSaveMark=function(){return!1},y$_.restore=function(y$_){y$_._clipRect=this._clipSaveRect,(y$u._cache[y$u._cache._length++]=this)._submitScissor.submitLength=y$_._submits._length-this._submitScissor.submitIndex,y$_._curSubmit=y$u_.RENDERBASE,y$_._renderKey=0},y$u.save=function(y$_,y$c){if(131072!=(131072&y$_._saveMark._saveuse)){y$_._saveMark._saveuse|=131072;var y$e=y$u._cache,y$Z=0<y$e._length?y$e[--y$e._length]:new y$u;y$Z._clipSaveRect=y$_._clipRect,y$_._clipRect=y$Z._clipRect.copyFrom(y$_._clipRect),y$Z._submitScissor=y$c;var y$X=y$_._save;y$X[y$X._length++]=y$Z}},y$P(y$u,["_cache",function(){return this._cache=y$N._createArray()}]),y$u}(),y$g=function(){function y$D(){this._contextX=0,this._contextY=0,this._clipRect=new y$r,this._rect=new y$r,this._matrix=new y$A}y$B(y$D,"laya.webgl.canvas.save.SaveClipRectStencil");var y$_=y$D.prototype;return y$K.imps(y$_,{"laya.webgl.canvas.save.ISaveData":!0}),y$_.isSaveMark=function(){return!1},y$_.restore=function(y$_){y$m_.restore(y$_,this._rect,this._saveMatrix,this._contextX,this._contextY),y$_._clipRect=this._clipSaveRect,y$_._curMat=this._saveMatrix,y$_._x=this._contextX,y$_._y=this._contextY,y$D._cache[y$D._cache._length++]=this,y$_._curSubmit=y$u_.RENDERBASE},y$D.save=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){if(262144!=(262144&y$_._saveMark._saveuse)){y$_._saveMark._saveuse|=262144;var y$m=y$D._cache,y$H=0<y$m._length?y$m[--y$m._length]:new y$D;y$H._clipSaveRect=y$_._clipRect,y$H._clipRect.setTo(y$P,y$O,y$s,y$n),y$_._clipRect=y$H._clipRect,y$H._rect.x=y$e,y$H._rect.y=y$Z,y$H._rect.width=y$X,y$H._rect.height=y$u,y$H._contextX=y$_._x,y$H._contextY=y$_._y,y$H._saveMatrix=y$_._curMat,y$_._curMat.copyTo(y$H._matrix),y$_._curMat=y$H._matrix,y$H._submitStencil=y$c;var y$B=y$_._save;y$B[y$B._length++]=y$H}},y$P(y$D,["_cache",function(){return this._cache=y$N._createArray()}]),y$D}(),y$S=function(){function y$Z(){this._saveuse=0}y$B(y$Z,"laya.webgl.canvas.save.SaveMark");var y$_=y$Z.prototype;return y$K.imps(y$_,{"laya.webgl.canvas.save.ISaveData":!0}),y$_.isSaveMark=function(){return!0},y$_.restore=function(y$_){y$_._saveMark=this._preSaveMark,y$Z._no[y$Z._no._length++]=this},y$Z.Create=function(y$_){var y$c=y$Z._no,y$e=0<y$c._length?y$c[--y$c._length]:new y$Z;return y$e._saveuse=0,y$e._preSaveMark=y$_._saveMark,y$_._saveMark=y$e},y$P(y$Z,["_no",function(){return this._no=y$N._createArray()}]),y$Z}(),y$E=function(){function y$u(){this._matrix=new y$A}y$B(y$u,"laya.webgl.canvas.save.SaveTransform");var y$_=y$u.prototype;return y$K.imps(y$_,{"laya.webgl.canvas.save.ISaveData":!0}),y$_.isSaveMark=function(){return!1},y$_.restore=function(y$_){y$_._curMat=this._savematrix,y$u._no[y$u._no._length++]=this},y$u.save=function(y$_){var y$c=y$_._saveMark;if(2048!=(2048&y$c._saveuse)){y$c._saveuse|=2048;var y$e=y$u._no,y$Z=0<y$e._length?y$e[--y$e._length]:new y$u;y$Z._savematrix=y$_._curMat,y$_._curMat=y$_._curMat.copyTo(y$Z._matrix);var y$X=y$_._save;y$X[y$X._length++]=y$Z}},y$P(y$u,["_no",function(){return this._no=y$N._createArray()}]),y$u}(),y$W=function(){function y$X(){}y$B(y$X,"laya.webgl.canvas.save.SaveTranslate");var y$_=y$X.prototype;return y$K.imps(y$_,{"laya.webgl.canvas.save.ISaveData":!0}),y$_.isSaveMark=function(){return!1},y$_.restore=function(y$_){y$_._curMat;y$_._x=this._x,y$_._y=this._y,y$X._no[y$X._no._length++]=this},y$X.save=function(y$_){var y$c=y$X._no,y$e=0<y$c._length?y$c[--y$c._length]:new y$X;y$e._x=y$_._x,y$e._y=y$_._y;var y$Z=y$_._save;y$Z[y$Z._length++]=y$e},y$P(y$X,["_no",function(){return this._no=y$N._createArray()}]),y$X}(),y$l=function(){function y$_(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new y$r}y$B(y$_,"laya.webgl.resource.RenderTargetMAX");var y$c=y$_.prototype;return y$c.setSP=function(y$_){this._sp=y$_},y$c.size=function(y$_,y$c){var y$e=this;this._width!==y$_||this._height!==y$c?(this.repaint=!0,this._width=y$_,this._height=y$c,this.target?this.target.size(y$_,y$c):this.target=y$F_.create(y$_,y$c),this.target.hasListener("recovered")||this.target.on("recovered",this,function(y$_){y$K.timer.callLater(y$e._sp,y$e._sp.repaint)})):this.target.size(y$_,y$c)},y$c._flushToTarget=function(y$_,y$c){if(!y$c._destroy){var y$e=y$w_.worldScissorTest,y$Z=y$w_.worldClipRect;y$w_.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,y$w_.worldScissorTest=!1,y$L_.mainContext.disable(3089);var y$X=y$w_.worldAlpha,y$u=y$w_.worldMatrix4,y$P=y$w_.worldMatrix,y$O=y$w_.worldFilters,y$s=y$w_.worldShaderDefines;if(y$w_.worldMatrix=y$A.EMPTY,y$w_.restoreTempArray(),y$w_.worldMatrix4=y$w_.TEMPMAT4_ARRAY,y$w_.worldAlpha=1,y$w_.worldFilters=null,y$w_.worldShaderDefines=null,y$x_.activeShader=null,y$c.start(),y$M.showCanvasMark?y$c.clear(0,1,0,.3):y$c.clear(0,0,0,0),y$_.flush(),y$c.end(),y$x_.activeShader=null,y$w_.worldAlpha=y$X,y$w_.worldMatrix4=y$u,y$w_.worldMatrix=y$P,y$w_.worldFilters=y$O,y$w_.worldShaderDefines=y$s,y$w_.worldScissorTest=y$e){var y$n=y$w_.height-y$Z.y-y$Z.height;y$L_.mainContext.scissor(y$Z.x,y$n,y$Z.width,y$Z.height),y$L_.mainContext.enable(3089)}y$w_.worldClipRect=y$Z}},y$c.flush=function(y$_){this.repaint&&(this._flushToTarget(y$_,this.target),this.repaint=!1)},y$c.drawTo=function(y$_,y$c,y$e,y$Z,y$X){y$_.drawTexture(this.target.getTexture(),y$c,y$e,y$Z,y$X,0,0)},y$c.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},y$_}(),y$d=function(){function y$_(){this.ALPHA=1,this.shaderType=0,this.defines=new y$C_}return y$B(y$_,"laya.webgl.shader.d2.Shader2D"),y$_.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},y$_.__init__=function(){var y$_,y$c;y$S_.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),y$S_.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),y$S_.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),y$S_.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),y$S_.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),y$S_.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),y$S_.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),y$S_.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),y$_="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",y$c='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',y$S_.preCompile2D(0,1,y$_,y$c,null),y$_="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",y$c='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',y$S_.preCompile2D(0,2,y$_,y$c,null),y$_="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",y$c="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",y$S_.preCompile2D(0,4,y$_,y$c,null),y$_="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",y$c='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',y$S_.preCompile2D(0,256,y$_,y$c,null),y$_="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",y$c="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",y$S_.preCompile2D(0,512,y$_,y$c,null)},y$_}(),y$I=function(){function y$c(y$_,y$c,y$e){this._value=0,this._name2int=y$_,this._int2name=y$c,this._int2nameMap=y$e}y$B(y$c,"laya.webgl.shader.ShaderDefines");var y$_=y$c.prototype;return y$_.add=function(y$_){return"string"==typeof y$_&&(y$_=this._name2int[y$_]),this._value|=y$_,this._value},y$_.addInt=function(y$_){return this._value|=y$_,this._value},y$_.remove=function(y$_){return"string"==typeof y$_&&(y$_=this._name2int[y$_]),this._value&=~y$_,this._value},y$_.isDefine=function(y$_){return(this._value&y$_)===y$_},y$_.getValue=function(){return this._value},y$_.setValue=function(y$_){this._value=y$_},y$_.toNameDic=function(){var y$_=this._int2nameMap[this._value];return y$_||y$c._toText(this._value,this._int2name,this._int2nameMap)},y$c._reg=function(y$_,y$c,y$e,y$Z){y$Z[y$e[y$_]=y$c]=y$_},y$c._toText=function(y$_,y$c,y$e){var y$Z=y$e[y$_];if(y$Z)return y$Z;for(var y$X={},y$u=1,y$P=0;y$P<32&&!(y$_<(y$u=1<<y$P));y$P++)if(y$_&y$u){var y$O=y$c[y$u];y$O&&(y$X[y$O]="")}return y$e[y$_]=y$X},y$c._toInt=function(y$_,y$c){for(var y$e=y$_.split("."),y$Z=0,y$X=0,y$u=y$e.length;y$X<y$u;y$X++){var y$P=y$c[y$e[y$X]];if(!y$P)throw new Error("Defines to int err:"+y$_+"/"+y$e[y$X]);y$Z|=y$P}return y$Z},y$c}(),y$__=function(){function y$P(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new y$A}y$B(y$P,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var y$_=y$P.prototype;return y$_.init=function(y$_,y$c,y$e){if(y$c)this._vs=y$c;else{this._vs=[];var y$Z=y$_.width,y$X=y$_.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(y$Z,0,1,0,1,1,1,1),this._vs.push(y$Z,y$X,1,1,1,1,1,1),this._vs.push(0,y$X,0,1,1,1,1,1)}y$e?this._ps=y$e:(y$P._defaultPS||(y$P._defaultPS=[]).push(0,1,3,3,1,2),this._ps=y$P._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=y$_},y$_.init2=function(y$_,y$c,y$e,y$Z,y$X){this.transform&&(this.transform=null),y$e?this._ps=y$e:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=y$Z,this._uvs=y$X,this.mEleNum=this._ps.length,this.mTexture=y$_,(y$G.isConchNode||y$G.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},y$_._initMyData=function(){var y$_=0,y$c=0,y$e=4*this._verticles.length;this._vs=y$P._tempVS;var y$Z=!1;if(y$G.isConchNode||y$G.isConchApp?(this._vs.length=y$e,y$Z=!0):this._vs.length<y$e&&(this._vs.length=y$e,y$Z=!0),y$P._tVSLen=y$e,y$Z)for(;y$_<y$e;)this._vs[y$_]=this._verticles[y$c],this._vs[y$_+1]=this._verticles[y$c+1],this._vs[y$_+2]=this._uvs[y$c],this._vs[y$_+3]=this._uvs[y$c+1],this._vs[y$_+4]=1,this._vs[y$_+5]=1,this._vs[y$_+6]=1,this._vs[y$_+7]=1,y$_+=8,y$c+=2;else for(;y$_<y$e;)this._vs[y$_]=this._verticles[y$c],this._vs[y$_+1]=this._verticles[y$c+1],this._vs[y$_+2]=this._uvs[y$c],this._vs[y$_+3]=this._uvs[y$c+1],y$_+=8,y$c+=2},y$_.getData2=function(y$_,y$c,y$e){var y$Z;this.mVBBuffer=y$_,this.mIBBuffer=y$c,this._initMyData(),y$_.appendEx2(this._vs,Float32Array,y$P._tVSLen,4),this._indexStart=y$c._byteLength,(y$Z=y$P._tempIB).length<this._ps.length&&(y$Z.length=this._ps.length);for(var y$X=0,y$u=this._ps.length;y$X<y$u;y$X++)y$Z[y$X]=this._ps[y$X]+y$e;y$c.appendEx2(y$Z,Uint16Array,this._ps.length,2)},y$_.getData=function(y$_,y$c,y$e){if(this.mVBBuffer=y$_,this.mIBBuffer=y$c,y$_.append(this.mVBData),this._indexStart=y$c._byteLength,this.mIBData.start!=y$e){for(var y$Z=0,y$X=this._ps.length;y$Z<y$X;y$Z++)this.mIBData[y$Z]=this._ps[y$Z]+y$e;this.mIBData.start=y$e}y$c.append(this.mIBData)},y$_.render=function(y$_,y$c,y$e){if(y$G.isWebGL&&this.mTexture){y$_._renderKey=0,y$_._shader2D.glTexture=null,y$c_.getInstance().addSkinMesh(this);var y$Z=y$u_.createShape(y$_,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,y$f_.create(512,0));this.transform||(this.transform=y$A.EMPTY),this.transform.translate(y$c,y$e),y$A.mul(this.transform,y$_._curMat,this._tempMatrix),this.transform.translate(-y$c,-y$e);var y$X=y$Z.shaderValue,y$u=y$X.u_mmat2||y$w_.getMatrArray();y$w_.mat2MatArray(this._tempMatrix,y$u),y$X.textureHost=this.mTexture,y$X.offsetX=0,y$X.offsetY=0,y$X.u_mmat2=y$u,y$X.ALPHA=y$_._shader2D.ALPHA,y$_._submits[y$_._submits._length++]=y$Z}else y$G.isConchApp&&this.mTexture&&(this.transform||(this.transform=y$A.EMPTY),y$_.setSkinMesh&&y$_.setSkinMesh(y$c,y$e,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},y$P._tempVS=[],y$P._tempIB=[],y$P._defaultPS=null,y$P._tVSLen=0,y$P}(),y$c_=function(){function y$_(){this.ib=null,this.vb=null;y$L_.mainContext;this.ib=y$d_.create(35048),this.vb=y$I_.create(8)}y$B(y$_,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var y$c=y$_.prototype;return y$c.addSkinMesh=function(y$_){y$_.getData2(this.vb,this.ib,this.vb._byteLength/32)},y$c.reset=function(){this.vb.clear(),this.ib.clear()},y$_.getInstance=function(){return y$_.instance=y$_.instance||new y$_},y$_.instance=null,y$_}(),y$e_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===y$s&&(y$s=0),this.x=y$_,this.y=y$c,this.width=y$e,this.height=y$Z,this.edges=y$X,this.color=y$u,this.borderWidth=y$P,this.borderColor=y$O}y$B(y$_,"laya.webgl.shapes.BasePoly");var y$c=y$_.prototype;return y$K.imps(y$c,{"laya.webgl.shapes.IShape":!0}),y$c.getData=function(y$_,y$c,y$e){},y$c.rebuild=function(y$_){},y$c.setMatrix=function(y$_){},y$c.needUpdate=function(y$_){return!0},y$c.sector=function(y$_,y$c,y$e){var y$Z=this.x,y$X=this.y,y$u=this.edges,y$P=(this.r1-this.r0)/y$u,y$O=this.width,y$s=this.height,y$n=this.color,y$m=(y$n>>16&255)/255,y$H=(y$n>>8&255)/255,y$B=(255&y$n)/255;y$_.push(y$Z,y$X,y$m,y$H,y$B);for(var y$D=0;y$D<y$u+1;y$D++)y$_.push(y$Z+Math.sin(y$P*y$D+this.r0)*y$O,y$X+Math.cos(y$P*y$D+this.r0)*y$s),y$_.push(y$m,y$H,y$B);for(y$D=0;y$D<y$u;y$D++)y$c.push(y$e,y$e+y$D+1,y$e+y$D+2)},y$c.createLine2=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P,y$O,y$s,y$n,y$m,y$H,y$B,y$D,y$U,y$k,y$a,y$G,y$w,y$z,y$L,y$q,y$K,y$M,y$f,y$A,y$v=y$_.concat(),y$r=y$X,y$C=this.borderColor,y$y=(y$C>>16&255)/255,y$$=(y$C>>8&255)/255,y$T=(255&y$C)/255,y$h=y$v.length/2,y$R=y$Z,y$i=y$e/2;y$s=y$v[0],y$n=y$v[1],y$k=y$s-(y$m=y$v[2]),y$U=(y$U=-(y$n-(y$H=y$v[3])))/(y$A=Math.sqrt(y$U*y$U+y$k*y$k))*y$i,y$k=y$k/y$A*y$i,y$r.push(y$s-y$U+this.x,y$n-y$k+this.y,y$y,y$$,y$T,y$s+y$U+this.x,y$n+y$k+this.y,y$y,y$$,y$T);for(var y$x=1;y$x<y$h-1;y$x++)y$s=y$v[2*(y$x-1)],y$n=y$v[2*(y$x-1)+1],y$m=y$v[2*y$x],y$H=y$v[2*y$x+1],y$B=y$v[2*(y$x+1)],y$D=y$v[2*(y$x+1)+1],y$k=y$s-y$m,y$G=y$m-y$B,y$L=(-(y$U=(y$U=-(y$n-y$H))/(y$A=Math.sqrt(y$U*y$U+y$k*y$k))*y$i)+y$s)*(-(y$k=y$k/y$A*y$i)+y$H)-(-y$U+y$m)*(-y$k+y$n),y$M=(-(y$a=(y$a=-(y$H-y$D))/(y$A=Math.sqrt(y$a*y$a+y$G*y$G))*y$i)+y$B)*(-(y$G=y$G/y$A*y$i)+y$H)-(-y$a+y$m)*(-y$G+y$D),y$f=(y$w=-y$k+y$n-(-y$k+y$H))*(y$K=-y$a+y$m-(-y$a+y$B))-(y$q=-y$G+y$D-(-y$G+y$H))*(y$z=-y$U+y$m-(-y$U+y$s)),Math.abs(y$f)<.1?(y$f+=10.1,y$r.push(y$m-y$U+this.x,y$H-y$k+this.y,y$y,y$$,y$T,y$m+y$U+this.x,y$H+y$k+this.y,y$y,y$$,y$T)):(((y$P=(y$z*y$M-y$K*y$L)/y$f)-y$m)*(y$P-y$m)+((y$O=(y$q*y$L-y$w*y$M)/y$f)-y$H)+(y$O-y$H),y$r.push(y$P+this.x,y$O+this.y,y$y,y$$,y$T,y$m-(y$P-y$m)+this.x,y$H-(y$O-y$H)+this.y,y$y,y$$,y$T));y$s=y$v[y$v.length-4],y$n=y$v[y$v.length-3],y$k=y$s-(y$m=y$v[y$v.length-2]),y$U=(y$U=-(y$n-(y$H=y$v[y$v.length-1])))/(y$A=Math.sqrt(y$U*y$U+y$k*y$k))*y$i,y$k=y$k/y$A*y$i,y$r.push(y$m-y$U+this.x,y$H-y$k+this.y,y$y,y$$,y$T,y$m+y$U+this.x,y$H+y$k+this.y,y$y,y$$,y$T);var y$F=y$u;for(y$x=1;y$x<y$F;y$x++)y$c.push(y$R+2*(y$x-1),y$R+2*(y$x-1)+1,y$R+2*y$x+1,y$R+2*y$x+1,y$R+2*y$x,y$R+2*(y$x-1));return y$r},y$c.createLine=function(y$_,y$c,y$e,y$Z){var y$X=y$_.concat(),y$u=y$_,y$P=this.borderColor,y$O=(y$P>>16&255)/255,y$s=(y$P>>8&255)/255,y$n=(255&y$P)/255;y$X.splice(0,5);var y$m,y$H,y$B,y$D,y$U,y$k,y$a,y$G,y$w,y$z,y$L,y$q,y$K,y$M,y$f,y$A,y$v,y$r,y$C,y$y,y$$=y$X.length/5,y$T=y$Z,y$h=y$e/2;y$B=y$X[0],y$D=y$X[1],y$z=y$B-(y$U=y$X[5]),y$w=(y$w=-(y$D-(y$k=y$X[6])))/(y$y=Math.sqrt(y$w*y$w+y$z*y$z))*y$h,y$z=y$z/y$y*y$h,y$u.push(y$B-y$w,y$D-y$z,y$O,y$s,y$n,y$B+y$w,y$D+y$z,y$O,y$s,y$n);for(var y$R=1;y$R<y$$-1;y$R++)y$B=y$X[5*(y$R-1)],y$D=y$X[5*(y$R-1)+1],y$U=y$X[5*y$R],y$k=y$X[5*y$R+1],y$a=y$X[5*(y$R+1)],y$G=y$X[5*(y$R+1)+1],y$z=y$B-y$U,y$q=y$U-y$a,y$f=(-(y$w=(y$w=-(y$D-y$k))/(y$y=Math.sqrt(y$w*y$w+y$z*y$z))*y$h)+y$B)*(-(y$z=y$z/y$y*y$h)+y$k)-(-y$w+y$U)*(-y$z+y$D),y$r=(-(y$L=(y$L=-(y$k-y$G))/(y$y=Math.sqrt(y$L*y$L+y$q*y$q))*y$h)+y$a)*(-(y$q=y$q/y$y*y$h)+y$k)-(-y$L+y$U)*(-y$q+y$G),y$C=(y$K=-y$z+y$D-(-y$z+y$k))*(y$v=-y$L+y$U-(-y$L+y$a))-(y$A=-y$q+y$G-(-y$q+y$k))*(y$M=-y$w+y$U-(-y$w+y$B)),Math.abs(y$C)<.1?(y$C+=10.1,y$u.push(y$U-y$w,y$k-y$z,y$O,y$s,y$n,y$U+y$w,y$k+y$z,y$O,y$s,y$n)):(((y$m=(y$M*y$r-y$v*y$f)/y$C)-y$U)*(y$m-y$U)+((y$H=(y$A*y$f-y$K*y$r)/y$C)-y$k)+(y$H-y$k),y$u.push(y$m,y$H,y$O,y$s,y$n,y$U-(y$m-y$U),y$k-(y$H-y$k),y$O,y$s,y$n));y$B=y$X[y$X.length-10],y$D=y$X[y$X.length-9],y$z=y$B-(y$U=y$X[y$X.length-5]),y$w=(y$w=-(y$D-(y$k=y$X[y$X.length-4])))/(y$y=Math.sqrt(y$w*y$w+y$z*y$z))*y$h,y$z=y$z/y$y*y$h,y$u.push(y$U-y$w,y$k-y$z,y$O,y$s,y$n,y$U+y$w,y$k+y$z,y$O,y$s,y$n);var y$i=this.edges+1;for(y$R=1;y$R<y$i;y$R++)y$c.push(y$T+2*(y$R-1),y$T+2*(y$R-1)+1,y$T+2*y$R+1,y$T+2*y$R+1,y$T+2*y$R,y$T+2*(y$R-1));return y$u},y$c.createLoopLine=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$_.concat(),y$O=y$X||y$_,y$s=this.borderColor,y$n=(y$s>>16&255)/255,y$m=(y$s>>8&255)/255,y$H=(255&y$s)/255;y$P.splice(0,5);var y$B=[y$P[0],y$P[1]],y$D=[y$P[y$P.length-5],y$P[y$P.length-4]],y$U=y$D[0]+.5*(y$B[0]-y$D[0]),y$k=y$D[1]+.5*(y$B[1]-y$D[1]);y$P.unshift(y$U,y$k,0,0,0),y$P.push(y$U,y$k,0,0,0);var y$a,y$G,y$w,y$z,y$L,y$q,y$K,y$M,y$f,y$A,y$v,y$r,y$C,y$y,y$$,y$T,y$h,y$R,y$i,y$x,y$F=y$P.length/5,y$Y=y$Z,y$p=y$e/2;y$w=y$P[0],y$z=y$P[1],y$A=y$w-(y$L=y$P[5]),y$f=(y$f=-(y$z-(y$q=y$P[6])))/(y$x=Math.sqrt(y$f*y$f+y$A*y$A))*y$p,y$A=y$A/y$x*y$p,y$O.push(y$w-y$f,y$z-y$A,y$n,y$m,y$H,y$w+y$f,y$z+y$A,y$n,y$m,y$H);for(var y$o=1;y$o<y$F-1;y$o++)y$w=y$P[5*(y$o-1)],y$z=y$P[5*(y$o-1)+1],y$L=y$P[5*y$o],y$q=y$P[5*y$o+1],y$K=y$P[5*(y$o+1)],y$M=y$P[5*(y$o+1)+1],y$A=y$w-y$L,y$r=y$L-y$K,y$$=(-(y$f=(y$f=-(y$z-y$q))/(y$x=Math.sqrt(y$f*y$f+y$A*y$A))*y$p)+y$w)*(-(y$A=y$A/y$x*y$p)+y$q)-(-y$f+y$L)*(-y$A+y$z),y$R=(-(y$v=(y$v=-(y$q-y$M))/(y$x=Math.sqrt(y$v*y$v+y$r*y$r))*y$p)+y$K)*(-(y$r=y$r/y$x*y$p)+y$q)-(-y$v+y$L)*(-y$r+y$M),y$i=(y$C=-y$A+y$z-(-y$A+y$q))*(y$h=-y$v+y$L-(-y$v+y$K))-(y$T=-y$r+y$M-(-y$r+y$q))*(y$y=-y$f+y$L-(-y$f+y$w)),Math.abs(y$i)<.1?(y$i+=10.1,y$O.push(y$L-y$f,y$q-y$A,y$n,y$m,y$H,y$L+y$f,y$q+y$A,y$n,y$m,y$H)):(((y$a=(y$y*y$R-y$h*y$$)/y$i)-y$L)*(y$a-y$L)+((y$G=(y$T*y$$-y$C*y$R)/y$i)-y$q)+(y$G-y$q),y$O.push(y$a,y$G,y$n,y$m,y$H,y$L-(y$a-y$L),y$q-(y$G-y$q),y$n,y$m,y$H));y$u&&(y$c=y$u);var y$Q=this.edges+1;for(y$o=1;y$o<y$Q;y$o++)y$c.push(y$Y+2*(y$o-1),y$Y+2*(y$o-1)+1,y$Y+2*y$o+1,y$Y+2*y$o+1,y$Y+2*y$o,y$Y+2*(y$o-1));return y$c.push(y$Y+2*(y$o-1),y$Y+2*(y$o-1)+1,y$Y+1,y$Y+1,y$Y,y$Y+2*(y$o-1)),y$O},y$_}(),y$Z_=function(){function y$k(){}return y$B(y$k,"laya.webgl.shapes.Earcut"),y$k.earcut=function(y$_,y$c,y$e){y$e=y$e||2;var y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m=y$c&&y$c.length,y$H=y$m?y$c[0]*y$e:y$_.length,y$B=y$k.linkedList(y$_,0,y$H,y$e,!0),y$D=[];if(!y$B)return y$D;if(y$m&&(y$B=y$k.eliminateHoles(y$_,y$c,y$B,y$e)),y$_.length>80*y$e){y$Z=y$u=y$_[0],y$X=y$P=y$_[1];for(var y$U=y$e;y$U<y$H;y$U+=y$e)(y$O=y$_[y$U])<y$Z&&(y$Z=y$O),(y$s=y$_[y$U+1])<y$X&&(y$X=y$s),y$u<y$O&&(y$u=y$O),y$P<y$s&&(y$P=y$s);y$n=0!==(y$n=Math.max(y$u-y$Z,y$P-y$X))?1/y$n:0}return y$k.earcutLinked(y$B,y$D,y$e,y$Z,y$X,y$n),y$D},y$k.linkedList=function(y$_,y$c,y$e,y$Z,y$X){var y$u,y$P;if(y$X===0<y$k.signedArea(y$_,y$c,y$e,y$Z))for(y$u=y$c;y$u<y$e;y$u+=y$Z)y$P=y$k.insertNode(y$u,y$_[y$u],y$_[y$u+1],y$P);else for(y$u=y$e-y$Z;y$c<=y$u;y$u-=y$Z)y$P=y$k.insertNode(y$u,y$_[y$u],y$_[y$u+1],y$P);return y$P&&y$k.equals(y$P,y$P.next)&&(y$k.removeNode(y$P),y$P=y$P.next),y$P},y$k.filterPoints=function(y$_,y$c){if(!y$_)return y$_;y$c||(y$c=y$_);var y$e,y$Z=y$_;do{if(y$e=!1,y$Z.steiner||!y$k.equals(y$Z,y$Z.next)&&0!==y$k.area(y$Z.prev,y$Z,y$Z.next))y$Z=y$Z.next;else{if(y$k.removeNode(y$Z),(y$Z=y$c=y$Z.prev)===y$Z.next)break;y$e=!0}}while(y$e||y$Z!==y$c);return y$c},y$k.earcutLinked=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){if(y$_){!y$P&&y$u&&y$k.indexCurve(y$_,y$Z,y$X,y$u);for(var y$O,y$s,y$n=y$_;y$_.prev!==y$_.next;)if(y$O=y$_.prev,y$s=y$_.next,y$u?y$k.isEarHashed(y$_,y$Z,y$X,y$u):y$k.isEar(y$_))y$c.push(y$O.i/y$e),y$c.push(y$_.i/y$e),y$c.push(y$s.i/y$e),y$k.removeNode(y$_),y$_=y$s.next,y$n=y$s.next;else if((y$_=y$s)===y$n){y$P?1===y$P?(y$_=y$k.cureLocalIntersections(y$_,y$c,y$e),y$k.earcutLinked(y$_,y$c,y$e,y$Z,y$X,y$u,2)):2===y$P&&y$k.splitEarcut(y$_,y$c,y$e,y$Z,y$X,y$u):y$k.earcutLinked(y$k.filterPoints(y$_,null),y$c,y$e,y$Z,y$X,y$u,1);break}}},y$k.isEar=function(y$_){var y$c=y$_.prev,y$e=y$_,y$Z=y$_.next;if(0<=y$k.area(y$c,y$e,y$Z))return!1;for(var y$X=y$_.next.next;y$X!==y$_.prev;){if(y$k.pointInTriangle(y$c.x,y$c.y,y$e.x,y$e.y,y$Z.x,y$Z.y,y$X.x,y$X.y)&&0<=y$k.area(y$X.prev,y$X,y$X.next))return!1;y$X=y$X.next}return!0},y$k.isEarHashed=function(y$_,y$c,y$e,y$Z){var y$X=y$_.prev,y$u=y$_,y$P=y$_.next;if(0<=y$k.area(y$X,y$u,y$P))return!1;for(var y$O=y$X.x<y$u.x?y$X.x<y$P.x?y$X.x:y$P.x:y$u.x<y$P.x?y$u.x:y$P.x,y$s=y$X.y<y$u.y?y$X.y<y$P.y?y$X.y:y$P.y:y$u.y<y$P.y?y$u.y:y$P.y,y$n=y$X.x>y$u.x?y$X.x>y$P.x?y$X.x:y$P.x:y$u.x>y$P.x?y$u.x:y$P.x,y$m=y$X.y>y$u.y?y$X.y>y$P.y?y$X.y:y$P.y:y$u.y>y$P.y?y$u.y:y$P.y,y$H=y$k.zOrder(y$O,y$s,y$c,y$e,y$Z),y$B=y$k.zOrder(y$n,y$m,y$c,y$e,y$Z),y$D=y$_.nextZ;y$D&&y$D.z<=y$B;){if(y$D!==y$_.prev&&y$D!==y$_.next&&y$k.pointInTriangle(y$X.x,y$X.y,y$u.x,y$u.y,y$P.x,y$P.y,y$D.x,y$D.y)&&0<=y$k.area(y$D.prev,y$D,y$D.next))return!1;y$D=y$D.nextZ}for(y$D=y$_.prevZ;y$D&&y$D.z>=y$H;){if(y$D!==y$_.prev&&y$D!==y$_.next&&y$k.pointInTriangle(y$X.x,y$X.y,y$u.x,y$u.y,y$P.x,y$P.y,y$D.x,y$D.y)&&0<=y$k.area(y$D.prev,y$D,y$D.next))return!1;y$D=y$D.prevZ}return!0},y$k.cureLocalIntersections=function(y$_,y$c,y$e){var y$Z=y$_;do{var y$X=y$Z.prev,y$u=y$Z.next.next;!y$k.equals(y$X,y$u)&&y$k.intersects(y$X,y$Z,y$Z.next,y$u)&&y$k.locallyInside(y$X,y$u)&&y$k.locallyInside(y$u,y$X)&&(y$c.push(y$X.i/y$e),y$c.push(y$Z.i/y$e),y$c.push(y$u.i/y$e),y$k.removeNode(y$Z),y$k.removeNode(y$Z.next),y$Z=y$_=y$u),y$Z=y$Z.next}while(y$Z!==y$_);return y$Z},y$k.splitEarcut=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$_;do{for(var y$O=y$P.next.next;y$O!==y$P.prev;){if(y$P.i!==y$O.i&&y$k.isValidDiagonal(y$P,y$O)){var y$s=y$k.splitPolygon(y$P,y$O);return y$P=y$k.filterPoints(y$P,y$P.next),y$s=y$k.filterPoints(y$s,y$s.next),y$k.earcutLinked(y$P,y$c,y$e,y$Z,y$X,y$u),void y$k.earcutLinked(y$s,y$c,y$e,y$Z,y$X,y$u)}y$O=y$O.next}y$P=y$P.next}while(y$P!==y$_)},y$k.eliminateHoles=function(y$_,y$c,y$e,y$Z){var y$X,y$u,y$P,y$O,y$s,y$n=[];for(y$X=0,y$u=y$c.length;y$X<y$u;y$X++)y$P=y$c[y$X]*y$Z,y$O=y$X<y$u-1?y$c[y$X+1]*y$Z:y$_.length,(y$s=y$k.linkedList(y$_,y$P,y$O,y$Z,!1))===y$s.next&&(y$s.steiner=!0),y$n.push(y$k.getLeftmost(y$s));for(y$n.sort(y$k.compareX),y$X=0;y$X<y$n.length;y$X++)y$k.eliminateHole(y$n[y$X],y$e),y$e=y$k.filterPoints(y$e,y$e.next);return y$e},y$k.compareX=function(y$_,y$c){return y$_.x-y$c.x},y$k.eliminateHole=function(y$_,y$c){if(y$c=y$k.findHoleBridge(y$_,y$c)){var y$e=y$k.splitPolygon(y$c,y$_);y$k.filterPoints(y$e,y$e.next)}},y$k.findHoleBridge=function(y$_,y$c){var y$e,y$Z=y$c,y$X=y$_.x,y$u=y$_.y,y$P=-1/0;do{if(y$u<=y$Z.y&&y$u>=y$Z.next.y&&y$Z.next.y!==y$Z.y){var y$O=y$Z.x+(y$u-y$Z.y)*(y$Z.next.x-y$Z.x)/(y$Z.next.y-y$Z.y);if(y$O<=y$X&&y$P<y$O){if((y$P=y$O)===y$X){if(y$u===y$Z.y)return y$Z;if(y$u===y$Z.next.y)return y$Z.next}y$e=y$Z.x<y$Z.next.x?y$Z:y$Z.next}}y$Z=y$Z.next}while(y$Z!==y$c);if(!y$e)return null;if(y$X===y$P)return y$e.prev;var y$s,y$n=y$e,y$m=y$e.x,y$H=y$e.y,y$B=1/0;for(y$Z=y$e.next;y$Z!==y$n;)y$X>=y$Z.x&&y$Z.x>=y$m&&y$X!==y$Z.x&&y$k.pointInTriangle(y$u<y$H?y$X:y$P,y$u,y$m,y$H,y$u<y$H?y$P:y$X,y$u,y$Z.x,y$Z.y)&&((y$s=Math.abs(y$u-y$Z.y)/(y$X-y$Z.x))<y$B||y$s===y$B&&y$Z.x>y$e.x)&&y$k.locallyInside(y$Z,y$_)&&(y$e=y$Z,y$B=y$s),y$Z=y$Z.next;return y$e},y$k.indexCurve=function(y$_,y$c,y$e,y$Z){for(var y$X=y$_;null===y$X.z&&(y$X.z=y$k.zOrder(y$X.x,y$X.y,y$c,y$e,y$Z)),y$X.prevZ=y$X.prev,y$X.nextZ=y$X.next,(y$X=y$X.next)!==y$_;);y$X.prevZ.nextZ=null,y$X.prevZ=null,y$k.sortLinked(y$X)},y$k.sortLinked=function(y$_){var y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n=1;do{for(y$e=y$_,y$u=y$_=null,y$P=0;y$e;){for(y$P++,y$Z=y$e,y$c=y$O=0;y$c<y$n&&(y$O++,y$Z=y$Z.nextZ);y$c++);for(y$s=y$n;0<y$O||0<y$s&&y$Z;)0!==y$O&&(0===y$s||!y$Z||y$e.z<=y$Z.z)?(y$e=(y$X=y$e).nextZ,y$O--):(y$Z=(y$X=y$Z).nextZ,y$s--),y$u?y$u.nextZ=y$X:y$_=y$X,y$X.prevZ=y$u,y$u=y$X;y$e=y$Z}y$u.nextZ=null,y$n*=2}while(1<y$P);return y$_},y$k.zOrder=function(y$_,y$c,y$e,y$Z,y$X){return(y$_=1431655765&((y$_=858993459&((y$_=252645135&((y$_=16711935&((y$_=32767*(y$_-y$e)*y$X)|y$_<<8))|y$_<<4))|y$_<<2))|y$_<<1))|(y$c=1431655765&((y$c=858993459&((y$c=252645135&((y$c=16711935&((y$c=32767*(y$c-y$Z)*y$X)|y$c<<8))|y$c<<4))|y$c<<2))|y$c<<1))<<1},y$k.getLeftmost=function(y$_){for(var y$c=y$_,y$e=y$_;y$c.x<y$e.x&&(y$e=y$c),(y$c=y$c.next)!==y$_;);return y$e},y$k.pointInTriangle=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){return 0<=(y$X-y$P)*(y$c-y$O)-(y$_-y$P)*(y$u-y$O)&&0<=(y$_-y$P)*(y$Z-y$O)-(y$e-y$P)*(y$c-y$O)&&0<=(y$e-y$P)*(y$u-y$O)-(y$X-y$P)*(y$Z-y$O)},y$k.isValidDiagonal=function(y$_,y$c){return y$_.next.i!==y$c.i&&y$_.prev.i!==y$c.i&&!y$k.intersectsPolygon(y$_,y$c)&&y$k.locallyInside(y$_,y$c)&&y$k.locallyInside(y$c,y$_)&&y$k.middleInside(y$_,y$c)},y$k.area=function(y$_,y$c,y$e){return(y$c.y-y$_.y)*(y$e.x-y$c.x)-(y$c.x-y$_.x)*(y$e.y-y$c.y)},y$k.equals=function(y$_,y$c){return y$_.x===y$c.x&&y$_.y===y$c.y},y$k.intersects=function(y$_,y$c,y$e,y$Z){return!!(y$k.equals(y$_,y$c)&&y$k.equals(y$e,y$Z)||y$k.equals(y$_,y$Z)&&y$k.equals(y$e,y$c))||0<y$k.area(y$_,y$c,y$e)!=0<y$k.area(y$_,y$c,y$Z)&&0<y$k.area(y$e,y$Z,y$_)!=0<y$k.area(y$e,y$Z,y$c)},y$k.intersectsPolygon=function(y$_,y$c){var y$e=y$_;do{if(y$e.i!==y$_.i&&y$e.next.i!==y$_.i&&y$e.i!==y$c.i&&y$e.next.i!==y$c.i&&y$k.intersects(y$e,y$e.next,y$_,y$c))return!0;y$e=y$e.next}while(y$e!==y$_);return!1},y$k.locallyInside=function(y$_,y$c){return y$k.area(y$_.prev,y$_,y$_.next)<0?0<=y$k.area(y$_,y$c,y$_.next)&&0<=y$k.area(y$_,y$_.prev,y$c):y$k.area(y$_,y$c,y$_.prev)<0||y$k.area(y$_,y$_.next,y$c)<0},y$k.middleInside=function(y$_,y$c){for(var y$e=y$_,y$Z=!1,y$X=(y$_.x+y$c.x)/2,y$u=(y$_.y+y$c.y)/2;y$e.y>y$u!=y$e.next.y>y$u&&y$e.next.y!==y$e.y&&y$X<(y$e.next.x-y$e.x)*(y$u-y$e.y)/(y$e.next.y-y$e.y)+y$e.x&&(y$Z=!y$Z),(y$e=y$e.next)!==y$_;);return y$Z},y$k.splitPolygon=function(y$_,y$c){var y$e=new y$X_(y$_.i,y$_.x,y$_.y),y$Z=new y$X_(y$c.i,y$c.x,y$c.y),y$X=y$_.next,y$u=y$c.prev;return(y$_.next=y$c).prev=y$_,(y$e.next=y$X).prev=y$e,(y$Z.next=y$e).prev=y$Z,(y$u.next=y$Z).prev=y$u,y$Z},y$k.insertNode=function(y$_,y$c,y$e,y$Z){var y$X=new y$X_(y$_,y$c,y$e);return y$Z?(y$X.next=y$Z.next,(y$X.prev=y$Z).next.prev=y$X,y$Z.next=y$X):(y$X.prev=y$X).next=y$X,y$X},y$k.removeNode=function(y$_){y$_.next.prev=y$_.prev,y$_.prev.next=y$_.next,y$_.prevZ&&(y$_.prevZ.nextZ=y$_.nextZ),y$_.nextZ&&(y$_.nextZ.prevZ=y$_.prevZ)},y$k.signedArea=function(y$_,y$c,y$e,y$Z){for(var y$X=0,y$u=y$c,y$P=y$e-y$Z;y$u<y$e;y$u+=y$Z)y$X+=(y$_[y$P]-y$_[y$u])*(y$_[y$u+1]+y$_[y$P+1]),y$P=y$u;return y$X},y$k}(),y$X_=function(){function y$_(y$_,y$c,y$e){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=y$_,this.x=y$c,this.y=y$e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return y$B(y$_,"laya.webgl.shapes.EarcutNode"),y$_}(),y$u_=(function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this.lineWidth=y$_,this.lineColor=y$c,this.lineAlpha=y$e,this.fillColor=y$Z,this.fillAlpha=y$X,this.shape=y$P,this.fill=y$u}y$B(y$_,"laya.webgl.shapes.GeometryData");var y$c=y$_.prototype;y$c.clone=function(){return new y$_(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},y$c.getIndexData=function(){return null},y$c.getVertexData=function(){return null},y$c.destroy=function(){this.shape=null}}(),function(){function y$_(y$_){if(y$_ instanceof Float32Array)this.points=y$_;else if(y$_ instanceof Array){y$_.length;this.points=new Float32Array(y$_)}}y$B(y$_,"laya.webgl.shapes.Vertex");var y$c=y$_.prototype;y$K.imps(y$c,{"laya.webgl.shapes.IShape":!0}),y$c.getData=function(y$_,y$c,y$e){},y$c.needUpdate=function(y$_){return!1},y$c.rebuild=function(y$_){},y$c.setMatrix=function(y$_){}}(),function(){function y$s(y$_){void 0===y$_&&(y$_=1e4),this._renderType=y$_}y$B(y$s,"laya.webgl.submit.Submit");var y$_=y$s.prototype;return y$K.imps(y$_,{"laya.webgl.submit.ISubmit":!0}),y$_.releaseRender=function(){var y$_=y$s._cache;(y$_[y$_._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},y$_.getRenderType=function(){return this._renderType},y$_.renderSubmit=function(){if(0===this._numEle)return 1;var y$_=this.shaderValue.textureHost;if(y$_){var y$c=y$_.source;if(!y$_.bitmap||!y$c)return 1;this.shaderValue.texture=y$c,y$_.alphaTexture&&y$_.alphaTexture.source&&(this.shaderValue.texture1=y$_.alphaTexture.source)}this._vb.bind_upload(this._ib);var y$e=y$L_.mainContext;return this.shaderValue.upload(),y$j.activeBlendFunction!==this._blendFn&&(y$e.enable(3042),this._blendFn(y$e),y$j.activeBlendFunction=this._blendFn),y$$.drawCall++,y$$.trianglesFaces+=this._numEle/3,y$e.drawElements(4,this._numEle,5123,this._startIdx),1},y$s.__init__=function(){var y$_=y$s.RENDERBASE=new y$s(-1);y$_.shaderValue=new y$f_(0,0),y$_.shaderValue.ALPHA=-1234},y$s.createSubmit=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$s._cache._length?y$s._cache[--y$s._cache._length]:new y$s;null==y$e&&((y$e=y$u._selfVb||(y$u._selfVb=y$I_.create(-1))).clear(),y$Z=0),y$u._ib=y$c,y$u._vb=y$e,y$u._startIdx=y$Z*y$k_.BYTES_PIDX,y$u._numEle=0;var y$P=y$_._nBlendType;y$u._blendFn=y$_._targets?y$j.targetFns[y$P]:y$j.fns[y$P],y$u.shaderValue=y$X,y$u.shaderValue.setValue(y$_._shader2D);var y$O=y$_._shader2D.filters;return y$O&&y$u.shaderValue.setFilters(y$O),y$u},y$s.createShape=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$s._cache._length?y$s._cache[--y$s._cache._length]:new y$s;y$P._ib=y$c,y$P._vb=y$e,y$P._numEle=y$Z,y$P._startIdx=y$X,y$P.shaderValue=y$u,y$P.shaderValue.setValue(y$_._shader2D);var y$O=y$_._nBlendType;return y$P._blendFn=y$_._targets?y$j.targetFns[y$O]:y$j.fns[y$O],y$P},y$s.TYPE_2D=1e4,y$s.TYPE_CANVAS=10003,y$s.TYPE_CMDSETRT=10004,y$s.TYPE_CUSTOM=10005,y$s.TYPE_BLURRT=10006,y$s.TYPE_CMDDESTORYPRERT=10007,y$s.TYPE_DISABLESTENCIL=10008,y$s.TYPE_OTHERIBVB=10009,y$s.TYPE_PRIMITIVE=10010,y$s.TYPE_RT=10011,y$s.TYPE_BLUR_RT=10012,y$s.TYPE_TARGET=10013,y$s.TYPE_CHANGE_VALUE=10014,y$s.TYPE_SHAPE=10015,y$s.TYPE_TEXTURE=10016,y$s.TYPE_FILLTEXTURE=10017,y$s.RENDERBASE=null,y$s._cache=((y$s._cache=[])._length=0,y$s._cache),y$s}()),y$P_=function(){function y$Z(){this.fun=null,this.args=null}y$B(y$Z,"laya.webgl.submit.SubmitCMD");var y$_=y$Z.prototype;return y$K.imps(y$_,{"laya.webgl.submit.ISubmit":!0}),y$_.renderSubmit=function(){return this.fun.apply(null,this.args),1},y$_.getRenderType=function(){return 0},y$_.releaseRender=function(){var y$_=y$Z._cache;y$_[y$_._length++]=this},y$Z.create=function(y$_,y$c){var y$e=y$Z._cache._length?y$Z._cache[--y$Z._cache._length]:new y$Z;return y$e.fun=y$c,y$e.args=y$_,y$e},y$Z._cache=((y$Z._cache=[])._length=0,y$Z._cache),y$Z}(),y$O_=function(){function y$c(){this.variables={}}y$B(y$c,"laya.webgl.submit.SubmitCMDScope");var y$_=y$c.prototype;return y$_.getValue=function(y$_){return this.variables[y$_]},y$_.addValue=function(y$_,y$c){return this.variables[y$_]=y$c},y$_.setValue=function(y$_,y$c){return this.variables.hasOwnProperty(y$_)?this.variables[y$_]=y$c:null},y$_.clear=function(){for(var y$_ in this.variables)delete this.variables[y$_]},y$_.recycle=function(){this.clear(),y$c.POOL.push(this)},y$c.create=function(){var y$_=y$c.POOL.pop();return y$_||(y$_=new y$c),y$_},y$c.POOL=[],y$c}(),y$s_=function(){function y$H(){this.offset=0,this.startIndex=0,this._mat=y$A.create()}y$B(y$H,"laya.webgl.submit.SubmitOtherIBVB");var y$_=y$H.prototype;return y$K.imps(y$_,{"laya.webgl.submit.ISubmit":!0}),y$_.releaseRender=function(){var y$_=y$H._cache;(y$_[y$_._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},y$_.getRenderType=function(){return 10009},y$_.renderSubmit=function(){var y$_=this._shaderValue.textureHost;if(y$_){var y$c=y$_.source;if(!y$_.bitmap||!y$c)return 1;this._shaderValue.texture=y$c}this._vb.bind_upload(this._ib);var y$e=y$w_.worldMatrix4,y$Z=y$A.TEMP;y$A.mulPre(this._mat,y$e[0],y$e[1],y$e[4],y$e[5],y$e[12],y$e[13],y$Z);var y$X=y$w_.worldMatrix4=y$H.tempMatrix4;y$X[0]=y$Z.a,y$X[1]=y$Z.b,y$X[4]=y$Z.c,y$X[5]=y$Z.d,y$X[12]=y$Z.tx,y$X[13]=y$Z.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var y$u=y$L_.mainContext;return y$j.activeBlendFunction!==this._blendFn&&(y$u.enable(3042),this._blendFn(y$u),y$j.activeBlendFunction=this._blendFn),y$$.drawCall++,y$$.trianglesFaces+=this._numEle/3,y$u.drawElements(4,this._numEle,5123,this.startIndex),y$w_.worldMatrix4=y$e,y$x_.activeShader=null,1},y$H.create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){void 0===y$s&&(y$s=0);var y$n=y$H._cache._length?y$H._cache[--y$H._cache._length]:new y$H;y$n._ib=y$e,y$n._vb=y$c,y$n._numEle=y$Z,y$n._shader=y$X,y$n._shaderValue=y$u;var y$m=y$_._nBlendType;switch(y$n._blendFn=y$_._targets?y$j.targetFns[y$m]:y$j.fns[y$m],y$s){case 0:y$n.offset=0,y$n.startIndex=y$O/(y$k_.BYTES_PE*y$c.vertexStride)*1.5,y$n.startIndex*=y$k_.BYTES_PIDX;break;case 1:y$n.startIndex=y$P,y$n.offset=y$O}return y$n},y$H._cache=((y$H._cache=[])._length=0,y$H._cache),y$H.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y$H}(),y$n_=function(){function y$e(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new y$r,this.screenRect=new y$r}y$B(y$e,"laya.webgl.submit.SubmitScissor");var y$_=y$e.prototype;return y$K.imps(y$_,{"laya.webgl.submit.ISubmit":!0}),y$_._scissor=function(y$_,y$c,y$e,y$Z){var y$X=y$w_.worldMatrix4,y$u=y$X[0],y$P=y$X[5],y$O=y$X[12],y$s=y$X[13];if(y$Z*=y$P,(y$e*=y$u)<1||y$Z<1)return!1;var y$n=(y$_=y$_*y$u+y$O)+y$e,y$m=(y$c=y$c*y$P+y$s)+y$Z;y$_<0&&(y$e=y$n-(y$_=0)),y$c<0&&(y$Z=y$m-(y$c=0));var y$H=y$w_.worldClipRect;if(y$_=Math.max(y$_,y$H.x),y$c=Math.max(y$c,y$H.y),y$e=Math.min(y$n,y$H.right)-y$_,y$Z=Math.min(y$m,y$H.bottom)-y$c,y$e<1||y$Z<1)return!1;var y$B=y$w_.worldScissorTest;return this.screenRect.copyFrom(y$H),y$H.x=y$_,y$H.y=y$c,y$H.width=y$e,y$H.height=y$Z,y$w_.worldScissorTest=!0,y$c=y$w_.height-y$c-y$Z,y$L_.mainContext.scissor(y$_,y$c,y$e,y$Z),y$L_.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),y$B?(y$c=y$w_.height-this.screenRect.y-this.screenRect.height,y$L_.mainContext.scissor(this.screenRect.x,y$c,this.screenRect.width,this.screenRect.height),y$L_.mainContext.enable(3089)):(y$L_.mainContext.disable(3089),y$w_.worldScissorTest=!1),y$H.copyFrom(this.screenRect),!0},y$_._scissorWithTagart=function(y$_,y$c,y$e,y$Z){if(y$e<1||y$Z<1)return!1;var y$X=y$_+y$e,y$u=y$c+y$Z;y$_<0&&(y$e=y$X-(y$_=0)),y$c<0&&(y$Z=y$u-(y$c=0));var y$P=y$w_.worldClipRect;if(y$_=Math.max(y$_,y$P.x),y$c=Math.max(y$c,y$P.y),y$e=Math.min(y$X,y$P.right)-y$_,y$Z=Math.min(y$u,y$P.bottom)-y$c,y$e<1||y$Z<1)return!1;var y$O=y$w_.worldScissorTest;return this.screenRect.copyFrom(y$P),y$w_.worldScissorTest=!0,y$P.x=y$_,y$P.y=y$c,y$P.width=y$e,y$P.height=y$Z,y$c=y$w_.height-y$c-y$Z,y$L_.mainContext.scissor(y$_,y$c,y$e,y$Z),y$L_.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),y$O?(y$c=y$w_.height-this.screenRect.y-this.screenRect.height,y$L_.mainContext.scissor(this.screenRect.x,y$c,this.screenRect.width,this.screenRect.height),y$L_.mainContext.enable(3089)):(y$L_.mainContext.disable(3089),y$w_.worldScissorTest=!1),y$P.copyFrom(this.screenRect),!0},y$_.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},y$_.getRenderType=function(){return 0},y$_.releaseRender=function(){var y$_=y$e._cache;(y$_[y$_._length++]=this).context=null},y$e.create=function(y$_){var y$c=y$e._cache._length?y$e._cache[--y$e._cache._length]:new y$e;return y$c.context=y$_,y$c},y$e._cache=((y$e._cache=[])._length=0,y$e._cache),y$e}(),y$m_=function(){function y$s(){this.step=0,this.blendMode=null,this.level=0}y$B(y$s,"laya.webgl.submit.SubmitStencil");var y$_=y$s.prototype;return y$K.imps(y$_,{"laya.webgl.submit.ISubmit":!0}),y$_.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},y$_.getRenderType=function(){return 0},y$_.releaseRender=function(){var y$_=y$s._cache;y$_[y$_._length++]=this},y$_.do1=function(){var y$_=y$L_.mainContext;y$_.enable(2960),y$_.clear(1024),y$_.colorMask(!1,!1,!1,!1),y$_.stencilFunc(514,this.level,255),y$_.stencilOp(7680,7680,7682)},y$_.do2=function(){var y$_=y$L_.mainContext;y$_.stencilFunc(514,this.level+1,255),y$_.colorMask(!0,!0,!0,!0),y$_.stencilOp(7680,7680,7680)},y$_.do3=function(){var y$_=y$L_.mainContext;y$_.colorMask(!0,!0,!0,!0),y$_.stencilOp(7680,7680,7680),y$_.clear(1024),y$_.disable(2960)},y$_.do4=function(){var y$_=y$L_.mainContext;0==this.level&&(y$_.enable(2960),y$_.clear(1024)),y$_.colorMask(!1,!1,!1,!1),y$_.stencilFunc(519,0,255),y$_.stencilOp(7680,7680,7682)},y$_.do5=function(){var y$_=y$L_.mainContext;y$_.stencilFunc(514,this.level,255),y$_.colorMask(!0,!0,!0,!0),y$_.stencilOp(7680,7680,7680)},y$_.do6=function(){var y$_=y$L_.mainContext;y$j.targetFns[y$j.TOINT[this.blendMode]](y$_)},y$_.do7=function(){var y$_=y$L_.mainContext;y$_.colorMask(!1,!1,!1,!1),y$_.stencilOp(7680,7680,7683)},y$_.do8=function(){var y$_=y$L_.mainContext;y$_.colorMask(!0,!0,!0,!0),y$_.stencilFunc(514,this.level,255),y$_.stencilOp(7680,7680,7680)},y$s.restore=function(y$_,y$c,y$e,y$Z,y$X){var y$u;if((y$_._renderKey=0)<y$s._mask&&y$s._mask--,0==y$s._mask)y$u=laya.webgl.submit.SubmitStencil.create(3),y$_.addRenderObject(y$u),y$_._curSubmit=y$u_.RENDERBASE;else{y$u=laya.webgl.submit.SubmitStencil.create(7),y$_.addRenderObject(y$u);var y$P=y$_._vb;y$P._byteLength;if(y$a_.fillRectImgVb(y$P,null,y$c.x,y$c.y,y$c.width,y$c.height,y$i.DEF_UV,y$e,y$Z,y$X,0,0)){y$_._shader2D.glTexture=null;var y$O=y$_._curSubmit=y$u_.createSubmit(y$_,y$_._ib,y$P,(y$P._byteLength-64)/32*3,y$f_.create(2,0));y$O.shaderValue.ALPHA=1,y$_._submits[y$_._submits._length++]=y$O,y$_._curSubmit._numEle+=6,y$_._curSubmit=y$u_.RENDERBASE}else alert("clipRect calc stencil rect error");y$u=laya.webgl.submit.SubmitStencil.create(8),y$_.addRenderObject(y$u)}},y$s.restore2=function(y$_,y$c){var y$e;(y$_._renderKey=0)<y$s._mask&&y$s._mask--,0==y$s._mask?(y$e=laya.webgl.submit.SubmitStencil.create(3),y$_.addRenderObject(y$e),y$_._curSubmit=y$u_.RENDERBASE):(y$e=laya.webgl.submit.SubmitStencil.create(7),y$_.addRenderObject(y$e),y$_._submits[y$_._submits._length++]=y$c,y$e=laya.webgl.submit.SubmitStencil.create(8),y$_.addRenderObject(y$e))},y$s.create=function(y$_){var y$c=y$s._cache._length?y$s._cache[--y$s._cache._length]:new y$s;return 5==(y$c.step=y$_)&&++y$s._mask,y$c.level=y$s._mask,y$c},y$s._cache=((y$s._cache=[])._length=0,y$s._cache),y$s._mask=0,y$s}(),y$H_=function(){function y$O(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}y$B(y$O,"laya.webgl.submit.SubmitTarget");var y$_=y$O.prototype;return y$K.imps(y$_,{"laya.webgl.submit.ISubmit":!0}),y$_.renderSubmit=function(){this._vb.bind_upload(this._ib);var y$_=this.scope.getValue(this.proName);return y$_&&(this.shaderValue.texture=y$_.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[y$_.width,y$_.height]),this.shaderValue.upload(),this.blend(),y$$.drawCall++,y$$.trianglesFaces+=this._numEle/3,y$L_.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},y$_.blend=function(){if(y$j.activeBlendFunction!==y$j.fns[this.blendType]){var y$_=y$L_.mainContext;y$_.enable(3042),y$j.fns[this.blendType](y$_),y$j.activeBlendFunction=y$j.fns[this.blendType]}},y$_.getRenderType=function(){return 0},y$_.releaseRender=function(){var y$_=y$O._cache;(y$_[y$_._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},y$O.create=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$O._cache._length?y$O._cache[--y$O._cache._length]:new y$O;return y$P._ib=y$c,y$P._vb=y$e,y$P.proName=y$u,y$P._startIdx=y$Z*y$k_.BYTES_PIDX,y$P._numEle=0,y$P.blendType=y$_._nBlendType,y$P.shaderValue=y$X,y$P.shaderValue.setValue(y$_._shader2D),y$P},y$O._cache=((y$O._cache=[])._length=0,y$O._cache),y$O}(),y$B_=function(){function y$_(){this._sourceStr=null}y$B(y$_,"laya.webgl.text.CharSegment");var y$c=y$_.prototype;return y$K.imps(y$c,{"laya.webgl.text.ICharSegment":!0}),y$c.textToSpit=function(y$_){this._sourceStr=y$_},y$c.getChar=function(y$_){return this._sourceStr.charAt(y$_)},y$c.getCharCode=function(y$_){return this._sourceStr.charCodeAt(y$_)},y$c.length=function(){return this._sourceStr.length},y$_}(),y$D_=function(){var y$_;function y$$(){}return y$B(y$$,"laya.webgl.text.DrawText"),y$$.__init__=function(){y$$._charsTemp=new Array,y$$._drawValue=new y$_,y$$._charSeg=new y$B_},y$$.customCharSeg=function(y$_){y$$._charSeg=y$_},y$$.getChar=function(y$_,y$c,y$e){var y$Z=y$N_.createOneChar(y$_,y$e);return-1!=y$c&&(y$$._charsCache[y$c]=y$Z),y$Z},y$$._drawSlow=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H,y$B,y$D,y$U){var y$k,y$a,y$G=y$$._drawValue.value(y$u,y$O,y$s,y$n,y$B,y$D,y$U),y$w=0,y$z=0,y$L=y$$._charsTemp,y$q=0,y$K=NaN;if(y$Z)for(y$L.length=y$Z.length,y$w=0,y$z=y$Z.length;y$w<y$z;y$w++)(y$a=y$Z[y$w])&&(y$K=y$a.charNum+y$G.txtID,y$L[y$w]=y$k=y$$._charsCache[y$K]||y$$.getChar(y$a.char,y$K,y$G),y$k.active());else{var y$M=y$e instanceof laya.utils.WordText?y$e.toString():y$e;if(y$R.CharacterCache){y$$._charSeg.textToSpit(y$M);var y$f=y$$._charSeg.length();for(y$w=0,y$z=y$L.length=y$f;y$w<y$z;y$w++)y$K=y$$._charSeg.getCharCode(y$w)+y$G.txtID,y$L[y$w]=y$k=y$$._charsCache[y$K]||y$$.getChar(y$$._charSeg.getChar(y$w),y$K,y$G),y$k.active(),y$q+=y$k.cw}else y$L.length=0,(y$k=y$$.getChar(y$M,-1,y$G)).active(),y$q+=y$k.cw,y$L[0]=y$k}var y$A=0;null!==y$P&&"left"!==y$P&&(y$A=-("center"==y$P?y$q/2:y$q));var y$v,y$r,y$C=NaN,y$y=0;if(y$Z)for(y$w=0,y$z=y$L.length;y$w<y$z;y$w++)y$k=y$L[y$w],y$a=y$Z[y$w],y$k&&y$a&&!y$k.isSpace&&(y$C=y$k.borderSize,y$v=y$k.texture,y$c._drawText(y$v,y$m+y$A+y$a.x*y$B-y$C,y$H+y$a.y*y$D-y$C,y$v.width,y$v.height,y$X,0,0,0,0));else{for(y$w=0,y$z=y$L.length;y$w<y$z;y$w++)(y$k=y$L[y$w])&&!y$k.isSpace&&(y$C=y$k.borderSize,y$v=y$k.texture,y$c._drawText(y$v,y$m+y$A-y$C,y$H-y$C,y$v.width,y$v.height,y$X,0,0,0,0),y$_&&((y$r=y$_[y$y++])||(y$r=y$_[y$y-1]=[]),y$r[0]=y$v,y$r[1]=y$A-y$C,y$r[2]=-y$C)),y$A+=y$k.cw;y$_&&(y$_.length=y$y)}},y$$._drawFast=function(y$_,y$c,y$e,y$Z,y$X){for(var y$u,y$P,y$O=0,y$s=y$_.length;y$O<y$s;y$O++)(y$u=(y$P=y$_[y$O])[0]).active(),y$c._drawText(y$u,y$Z+y$P[1],y$X+y$P[2],y$u.width,y$u.height,y$e,0,0,0,0)},y$$.drawText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H){if(void 0===y$H&&(y$H=0),!(y$c&&0===y$c.length||y$e&&0===y$e.length)){var y$B=y$Z.a,y$D=y$Z.d;(0!==y$Z.b||0!==y$Z.c)&&(y$B=y$D=1);var y$U=1!==y$B||1!==y$D;if(y$U&&y$K.stage.transform){var y$k=y$K.stage.transform;y$U=y$k.a===y$B&&y$k.d===y$D}else y$U=!1;if(y$U){var y$a=(y$Z=y$Z.copyTo(y$M_._tmpMatrix)).tx,y$G=y$Z.ty;y$Z.scale(1/y$B,1/y$D),y$Z._checkTransform(),y$n*=y$B,y$m*=y$D,y$n+=y$a-y$Z.tx,y$m+=y$G-y$Z.ty}else y$B=y$D=1;if(y$e)y$$._drawSlow(null,y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$B,y$D,y$H);else{if(null===y$c.toUpperCase){var y$w=y$B+1e5*y$D,y$z=y$c;return void(y$z.changed||y$z.id!==y$w?(y$z.id=y$w,y$z.changed=!1,y$$._drawSlow(y$z.save,y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$B,y$D,y$H)):y$$._drawFast(y$z.save,y$_,y$Z,y$n,y$m))}var y$L=y$c+y$X.toString()+y$P+y$O+y$s+y$B+y$D+y$u,y$q=y$$._textsCache[y$L];y$R.CharacterCache?y$q?y$$._drawFast(y$q,y$_,y$Z,y$n,y$m):(y$$._textsCache.__length||(y$$._textsCache.__length=0),y$$._textsCache.__length>y$M.WebGLTextCacheCount&&((y$$._textsCache={}).__length=0,y$$._curPoolIndex=0),y$$._textCachesPool[y$$._curPoolIndex]?(y$q=y$$._textsCache[y$L]=y$$._textCachesPool[y$$._curPoolIndex]).length=0:y$$._textCachesPool[y$$._curPoolIndex]=y$q=y$$._textsCache[y$L]=[],y$$._textsCache.__length++,y$$._curPoolIndex++,y$$._drawSlow(y$q,y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$B,y$D,y$H)):y$$._drawSlow(y$q,y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$B,y$D,y$H)}}},y$$._charsTemp=null,y$$._textCachesPool=[],y$$._curPoolIndex=0,y$$._charsCache={},y$$._textsCache={},y$$._drawValue=null,y$$.d=[],y$$._charSeg=null,y$$.__init$=function(){y$_=function(){function y$s(){}return y$B(y$s,""),y$s.prototype.value=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this.font=y$_,this.fillColor=y$c,this.borderColor=y$e,this.lineWidth=y$Z,this.scaleX=y$X,this.scaleY=y$u,this.underLine=y$P;var y$O=y$_.toString()+y$X+y$u+y$Z+(y$c?y$c.toLowerCase():" ")+(y$e?y$e.toLowerCase():" ")+y$P;return this.txtID=y$s._keymap[y$O],this.txtID||(this.txtID=1e-7*++y$s._keymapCount,y$s._keymap[y$O]=this.txtID),this},y$s.clear=function(){y$s._keymap={},y$s._keymapCount=1},y$s._keymap={},y$s._keymapCount=1,y$s}()},y$$}(),y$U_=function(){function y$X(y$_){this._index=0,this._size=14,this._italic=-2,y$X._cache2=y$X._cache2||[],this.setFont(y$_||"14px Arial")}y$B(y$X,"laya.webgl.text.FontInContext");var y$_=y$X.prototype;return y$_.setFont=function(y$_){var y$c=y$X._cache2[y$_];if(y$c)this._words=y$c[0],this._size=y$c[1];else{this._words=y$_.split(" ");for(var y$e=0,y$Z=this._words.length;y$e<y$Z;y$e++)if(0<this._words[y$e].indexOf("px")){this._index=y$e;break}this._size=parseInt(this._words[this._index]),y$X._cache2[y$_]=[this._words,this._size]}this._text=null,this._italic=-2},y$_.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},y$_.hasType=function(y$_){for(var y$c=0,y$e=this._words.length;y$c<y$e;y$c++)if(this._words[y$c]===y$_)return y$c;return-1},y$_.removeType=function(y$_){for(var y$c=0,y$e=this._words.length;y$c<y$e;y$c++)if(this._words[y$c]===y$_){this._words.splice(y$c,1),this._index>y$c&&this._index--;break}this._text=null,this._italic=-2},y$_.copyTo=function(y$_){return y$_._text=this._text,y$_._size=this._size,y$_._index=this._index,y$_._words=this._words.slice(),y$_._italic=-2,y$_},y$_.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},y$Z(0,y$_,"size",function(){return this._size},function(y$_){this._size=y$_,this._words[this._index]=y$_+"px",this._text=null}),y$X.create=function(y$_){var y$c=y$X._cache[y$_];return y$c||(y$c=y$X._cache[y$_]=new y$X(y$_))},y$X.EMPTY=new y$X,y$X._cache={},y$X._cache2=null,y$X}(),y$k_=function(){function y$_(){}return y$B(y$_,"laya.webgl.utils.CONST3D2D"),y$_.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y$_.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],y$_.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],y$_._TMPARRAY=[],y$_._OFFSETX=0,y$_._OFFSETY=0,y$P(y$_,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),y$_}(),y$a_=function(){function y$U(){}return y$B(y$U,"laya.webgl.utils.GlUtils"),y$U.make2DProjection=function(y$_,y$c,y$e){return[2/y$_,0,0,0,0,-2/y$c,0,0,0,0,2/y$e,0,-1,1,0,1]},y$U.fillIBQuadrangle=function(y$_,y$c){if(65535/4<y$c)throw Error("IBQuadrangle count:"+y$c+" must<:"+Math.floor(65535/4));y$c=Math.floor(y$c),y$_._resizeBuffer(6*(y$c+1)*2,!1),y$_.byteLength=y$_.bufferLength;for(var y$e=y$_.getUint16Array(),y$Z=0,y$X=0;y$X<y$c;y$X++)y$e[y$Z++]=4*y$X,y$e[y$Z++]=4*y$X+2,y$e[y$Z++]=4*y$X+1,y$e[y$Z++]=4*y$X,y$e[y$Z++]=4*y$X+3,y$e[y$Z++]=4*y$X+2;return y$_.setNeedUpload(),!0},y$U.expandIBQuadrangle=function(y$_,y$c){y$_.bufferLength>=6*y$c*2||y$U.fillIBQuadrangle(y$_,y$c)},y$U.mathCeilPowerOfTwo=function(y$_){return y$_--,y$_|=y$_>>1,y$_|=y$_>>2,y$_|=y$_>>4,y$_|=y$_>>8,y$_|=y$_>>16,++y$_},y$U.fillQuadrangleImgVb=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){var y$s=16+(y$_._byteLength>>2);y$_.byteLength=y$s<<2;var y$n=y$_.getFloat32Array();y$n[(y$s-=16)+2]=y$X[0],y$n[y$s+3]=y$X[1],y$n[y$s+6]=y$X[2],y$n[y$s+7]=y$X[3],y$n[y$s+10]=y$X[4],y$n[y$s+11]=y$X[5],y$n[y$s+14]=y$X[6],y$n[y$s+15]=y$X[7];var y$m=y$u.a,y$H=y$u.b,y$B=y$u.c,y$D=y$u.d;if(1!==y$m||0!==y$H||0!==y$B||1!==y$D){y$u.bTransform=!0;var y$U=y$u.tx+y$P,y$k=y$u.ty+y$O;y$n[y$s]=(y$Z[0]+y$c)*y$m+(y$Z[1]+y$e)*y$B+y$U,y$n[y$s+1]=(y$Z[0]+y$c)*y$H+(y$Z[1]+y$e)*y$D+y$k,y$n[y$s+4]=(y$Z[2]+y$c)*y$m+(y$Z[3]+y$e)*y$B+y$U,y$n[y$s+5]=(y$Z[2]+y$c)*y$H+(y$Z[3]+y$e)*y$D+y$k,y$n[y$s+8]=(y$Z[4]+y$c)*y$m+(y$Z[5]+y$e)*y$B+y$U,y$n[y$s+9]=(y$Z[4]+y$c)*y$H+(y$Z[5]+y$e)*y$D+y$k,y$n[y$s+12]=(y$Z[6]+y$c)*y$m+(y$Z[7]+y$e)*y$B+y$U,y$n[y$s+13]=(y$Z[6]+y$c)*y$H+(y$Z[7]+y$e)*y$D+y$k}else y$u.bTransform=!1,y$c+=y$u.tx+y$P,y$e+=y$u.ty+y$O,y$n[y$s]=y$c+y$Z[0],y$n[y$s+1]=y$e+y$Z[1],y$n[y$s+4]=y$c+y$Z[2],y$n[y$s+5]=y$e+y$Z[3],y$n[y$s+8]=y$c+y$Z[4],y$n[y$s+9]=y$e+y$Z[5],y$n[y$s+12]=y$c+y$Z[6],y$n[y$s+13]=y$e+y$Z[7];return y$_._upload=!0},y$U.fillTranglesVB=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){var y$O=(y$_._byteLength>>2)+y$Z.length;y$_.byteLength=y$O<<2;var y$s=y$_.getFloat32Array();y$O-=y$Z.length;for(var y$n=y$Z.length,y$m=y$X.a,y$H=y$X.b,y$B=y$X.c,y$D=y$X.d,y$U=0;y$U<y$n;y$U+=4)if(y$s[y$O+y$U+2]=y$Z[y$U+2],y$s[y$O+y$U+3]=y$Z[y$U+3],1!==y$m||0!==y$H||0!==y$B||1!==y$D){y$X.bTransform=!0;var y$k=y$X.tx+y$u,y$a=y$X.ty+y$P;y$s[y$O+y$U]=(y$Z[y$U]+y$c)*y$m+(y$Z[y$U+1]+y$e)*y$B+y$k,y$s[y$O+y$U+1]=(y$Z[y$U]+y$c)*y$H+(y$Z[y$U+1]+y$e)*y$D+y$a}else y$X.bTransform=!1,y$c+=y$X.tx+y$u,y$e+=y$X.ty+y$P,y$s[y$O+y$U]=y$c+y$Z[y$U],y$s[y$O+y$U+1]=y$e+y$Z[y$U+1];return y$_._upload=!0},y$U.copyPreImgVb=function(y$_,y$c,y$e){var y$Z=y$_._byteLength>>2;y$_.byteLength=y$Z+16<<2;for(var y$X=y$_.getFloat32Array(),y$u=0,y$P=y$Z-16;y$u<4;y$u++)y$X[y$Z]=y$X[y$P]+y$c,++y$P,y$X[++y$Z]=y$X[y$P]+y$e,++y$P,y$X[++y$Z]=y$X[y$P],++y$P,y$X[++y$Z]=y$X[y$P],++y$Z,++y$P;y$_._upload=!0},y$U.fillRectImgVb=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H,y$B){void 0===y$B&&(y$B=!1);var y$D,y$U,y$k,y$a,y$G,y$w,y$z,y$L,y$q,y$K,y$M,y$f,y$A,y$v,y$r,y$C,y$y=1,y$$=y$O.a,y$T=y$O.b,y$h=y$O.c,y$R=y$O.d,y$i=y$c&&y$c.width<99999999;if(1!==y$$||0!==y$T||0!==y$h||1!==y$R?(y$O.bTransform=!0,0===y$T&&0===y$h&&(y$y=23,y$q=y$X+y$e,y$K=y$u+y$Z,y$D=y$$*y$e+(y$M=y$O.tx+y$s),y$k=y$$*y$q+y$M,y$U=y$R*y$Z+(y$f=y$O.ty+y$n),y$a=y$R*y$K+y$f)):(y$y=23,y$O.bTransform=!1,y$k=(y$D=y$e+y$O.tx+y$s)+y$X,y$a=(y$U=y$Z+y$O.ty+y$n)+y$u),y$i&&(y$G=y$c.x,y$w=y$c.y,y$z=y$c.width+y$G,y$L=y$c.height+y$w),1!==y$y){if(Math.min(y$D,y$k)>=y$z)return!1;if(Math.min(y$U,y$a)>=y$L)return!1;if(Math.max(y$k,y$D)<=y$G)return!1;if(Math.max(y$a,y$U)<=y$w)return!1}var y$x=y$_._byteLength>>2;y$_.byteLength=16+y$x<<2;var y$F=y$_.getFloat32Array();switch(y$F[2+y$x]=y$P[0],y$F[3+y$x]=y$P[1],y$F[6+y$x]=y$P[2],y$F[7+y$x]=y$P[3],y$F[10+y$x]=y$P[4],y$F[11+y$x]=y$P[5],y$F[14+y$x]=y$P[6],y$F[15+y$x]=y$P[7],y$y){case 1:y$M=y$O.tx+y$s,y$f=y$O.ty+y$n;var y$Y=y$$*y$e,y$p=y$h*y$Z,y$o=y$R*y$Z,y$Q=y$T*y$e,y$J=y$$*(y$q=y$X+y$e),y$j=y$h*(y$K=y$u+y$Z),y$t=y$R*y$K,y$b=y$T*y$q;y$B?(y$A=y$Y+y$p+y$M,y$r=Math.round(y$A)-y$A,y$v=y$o+y$Q+y$f,y$C=Math.round(y$v)-y$v,y$F[y$x]=y$A+y$r,y$F[1+y$x]=y$v+y$C,y$F[4+y$x]=y$J+y$p+y$M+y$r,y$F[5+y$x]=y$o+y$b+y$f+y$C,y$F[8+y$x]=y$J+y$j+y$M+y$r,y$F[9+y$x]=y$t+y$b+y$f+y$C,y$F[12+y$x]=y$Y+y$j+y$M+y$r,y$F[13+y$x]=y$t+y$Q+y$f+y$C):(y$F[y$x]=y$Y+y$p+y$M,y$F[1+y$x]=y$o+y$Q+y$f,y$F[4+y$x]=y$J+y$p+y$M,y$F[5+y$x]=y$o+y$b+y$f,y$F[8+y$x]=y$J+y$j+y$M,y$F[9+y$x]=y$t+y$b+y$f,y$F[12+y$x]=y$Y+y$j+y$M,y$F[13+y$x]=y$t+y$Q+y$f);break;case 23:y$B?(y$A=y$D+y$m,y$r=Math.round(y$A)-y$A,y$v=y$U,y$C=Math.round(y$v)-y$v,y$F[y$x]=y$A+y$r,y$F[1+y$x]=y$v+y$C,y$F[4+y$x]=y$k+y$m+y$r,y$F[5+y$x]=y$U+y$C,y$F[8+y$x]=y$k+y$r,y$F[9+y$x]=y$a+y$C,y$F[12+y$x]=y$D+y$r,y$F[13+y$x]=y$a+y$C):(y$F[y$x]=y$D+y$m,y$F[1+y$x]=y$U,y$F[4+y$x]=y$k+y$m,y$F[5+y$x]=y$U,y$F[8+y$x]=y$k,y$F[9+y$x]=y$a,y$F[12+y$x]=y$D,y$F[13+y$x]=y$a)}return y$_._upload=!0},y$U.fillLineVb=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){var y$s=.5*y$P,y$n=y$U._fillLineArray,y$m=-(y$Z-y$u),y$H=y$e-y$X,y$B=Math.sqrt(y$m*y$m+y$H*y$H);y$m/=y$B,y$H/=y$B,y$m*=y$s,y$H*=y$s,y$n[0]=y$e-y$m,y$n[1]=y$Z-y$H,y$n[4]=y$e+y$m,y$n[5]=y$Z+y$H,y$n[8]=y$X+y$m,y$n[9]=y$u+y$H,y$n[12]=y$X-y$m,y$n[13]=y$u-y$H,y$O&&y$O.transformPointArray(y$n,y$n);var y$D=16+(y$_._byteLength>>2);return y$_.byteLength=y$D<<2,y$_.insertData(y$n,y$D-16),!0},y$U._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y$U}(),y$G_=(function(){function y$s(){}y$B(y$s,"laya.webgl.utils.MatirxArray"),y$s.ArrayMul=function(y$_,y$c,y$e){if(y$_)if(y$c)for(var y$Z=NaN,y$X=NaN,y$u=NaN,y$P=NaN,y$O=0;y$O<4;y$O++)y$Z=y$_[y$O],y$X=y$_[y$O+4],y$u=y$_[y$O+8],y$P=y$_[y$O+12],y$e[y$O]=y$Z*y$c[0]+y$X*y$c[1]+y$u*y$c[2]+y$P*y$c[3],y$e[y$O+4]=y$Z*y$c[4]+y$X*y$c[5]+y$u*y$c[6]+y$P*y$c[7],y$e[y$O+8]=y$Z*y$c[8]+y$X*y$c[9]+y$u*y$c[10]+y$P*y$c[11],y$e[y$O+12]=y$Z*y$c[12]+y$X*y$c[13]+y$u*y$c[14]+y$P*y$c[15];else y$s.copyArray(y$_,y$e);else y$s.copyArray(y$c,y$e)},y$s.copyArray=function(y$_,y$c){if(y$_&&y$c)for(var y$e=0;y$e<y$_.length;y$e++)y$c[y$e]=y$_[y$e]}}(),function(){function y$c(y$_,y$c,y$e){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=y$_,this._vb=new y$I_(y$_,35048),y$c&&this._vb._resizeBuffer(y$c,!1),this._ib=new y$d_,y$e&&this._ib._resizeBuffer(y$e,!1)}y$B(y$c,"laya.webgl.utils.Mesh2D");var y$_=y$c.prototype;return y$_.cloneWithNewVB=function(){var y$_=new y$c(this._stride,0,0);return y$_._ib=this._ib,y$_._quadNum=this._quadNum,y$_._attribInfo=this._attribInfo,y$_},y$_.cloneWithNewVBIB=function(){var y$_=new y$c(this._stride,0,0);return y$_._attribInfo=this._attribInfo,y$_},y$_.getVBW=function(){return this._vb.setNeedUpload(),this._vb},y$_.getVBR=function(){return this._vb},y$_.getIBR=function(){return this._ib},y$_.getIBW=function(){return this._ib.setNeedUpload(),this._ib},y$_.createQuadIB=function(y$_){this._quadNum=y$_,this._ib._resizeBuffer(6*y$_*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var y$c=this._ib.getUint16Array(),y$e=0,y$Z=0,y$X=0;y$X<y$_;y$X++)y$c[y$e++]=y$Z,y$c[y$e++]=y$Z+2,y$c[y$e++]=y$Z+1,y$c[y$e++]=y$Z,y$c[y$e++]=y$Z+3,y$c[y$e++]=y$Z+2,y$Z+=4;this._ib.setNeedUpload()},y$_.setAttributes=function(y$_){if(this._attribInfo=y$_,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},y$_.getEleNum=function(){return this._ib.getBuffer().byteLength/2},y$_.releaseMesh=function(){},y$_.destroy=function(){},y$_.clearVB=function(){this._vb.clear()},y$c._gvaoid=0,y$c}()),y$w_=function(){function y$X(){}return y$B(y$X,"laya.webgl.utils.RenderState2D"),y$X.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},y$X.mat2MatArray=function(y$_,y$c){var y$e=y$_,y$Z=y$c;return y$Z[0]=y$e.a,y$Z[1]=y$e.b,y$Z[2]=y$X.EMPTYMAT4_ARRAY[2],y$Z[3]=y$X.EMPTYMAT4_ARRAY[3],y$Z[4]=y$e.c,y$Z[5]=y$e.d,y$Z[6]=y$X.EMPTYMAT4_ARRAY[6],y$Z[7]=y$X.EMPTYMAT4_ARRAY[7],y$Z[8]=y$X.EMPTYMAT4_ARRAY[8],y$Z[9]=y$X.EMPTYMAT4_ARRAY[9],y$Z[10]=y$X.EMPTYMAT4_ARRAY[10],y$Z[11]=y$X.EMPTYMAT4_ARRAY[11],y$Z[12]=y$e.tx,y$Z[13]=y$e.ty,y$Z[14]=y$X.EMPTYMAT4_ARRAY[14],y$Z[15]=y$X.EMPTYMAT4_ARRAY[15],y$c},y$X.restoreTempArray=function(){y$X.TEMPMAT4_ARRAY[0]=1,y$X.TEMPMAT4_ARRAY[1]=0,y$X.TEMPMAT4_ARRAY[4]=0,y$X.TEMPMAT4_ARRAY[5]=1,y$X.TEMPMAT4_ARRAY[12]=0,y$X.TEMPMAT4_ARRAY[13]=0},y$X.clear=function(){y$X.worldScissorTest=!1,y$X.worldShaderDefines=null,y$X.worldFilters=null,y$X.worldAlpha=1,y$X.worldClipRect.x=y$X.worldClipRect.y=0,y$X.worldClipRect.width=y$X.width,y$X.worldClipRect.height=y$X.height,y$X.curRenderTarget=null},y$X._MAXSIZE=99999999,y$X.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y$X.worldMatrix4=y$X.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y$X.worldAlpha=1,y$X.worldScissorTest=!1,y$X.worldFilters=null,y$X.worldShaderDefines=null,y$X.curRenderTarget=null,y$X.width=0,y$X.height=0,y$P(y$X,["worldMatrix",function(){return this.worldMatrix=new y$A},"worldClipRect",function(){return this.worldClipRect=new y$r(0,0,99999999,99999999)}]),y$X}(),y$z_=function(){var y$w,y$e;function y$z(y$_,y$c,y$e,y$Z,y$X){var y$u=this;function y$P(y$_){var y$c=[],y$e=new y$w(y$c);return y$u._compileToTree(y$e,y$_.split("\n"),0,y$c,y$X),y$e}var y$O=y$D.now();this._VS=y$P(y$c),this._PS=y$P(y$e),this._nameMap=y$Z,2<y$D.now()-y$O&&console.log("ShaderCompile use time:"+(y$D.now()-y$O)+"  size:"+y$c.length+"/"+y$e.length)}y$B(y$z,"laya.webgl.utils.ShaderCompile");var y$_=y$z.prototype;return y$_._compileToTree=function(y$_,y$c,y$e,y$Z,y$X){var y$u,y$P,y$O,y$s,y$n,y$m,y$H,y$B=0,y$D=0,y$U=0,y$k=0;for(y$D=y$e;y$D<y$c.length;y$D++)if(!((y$O=y$c[y$D]).length<1)&&0!==(y$B=y$O.indexOf("//"))){if(0<=y$B&&(y$O=y$O.substr(0,y$B)),y$u=y$H||new y$w(y$Z),y$H=null,y$u.text=y$O,y$u.noCompile=!0,0<=(y$B=y$O.indexOf("#"))){for(y$s="#",y$k=y$B+1,y$U=y$O.length;y$k<y$U;y$k++){var y$a=y$O.charAt(y$k);if(" "===y$a||"\t"===y$a||"\r"===y$a||"\n"===y$a||"?"===y$a)break;y$s+=y$a}switch(y$u.name=y$s){case"#ifdef":case"#ifndef":if(y$u.src=y$O,y$u.noCompile=null!=y$O.match(/[!&|()=<>]/),y$u.noCompile?console.log("function():Boolean{return "+y$O.substr(y$B+y$u.name.length)+"}"):(y$m=y$O.replace(/^\s*/,"").split(/\s+/),y$u.setCondition(y$m[1],"#ifdef"===y$s?1:2),y$u.text="//"+y$u.text),y$u.setParent(y$_),y$_=y$u,y$X)for(y$m=y$O.substr(y$k).split(y$z._splitToWordExps3),y$k=0;y$k<y$m.length;y$k++)(y$O=y$m[y$k]).length&&(y$X[y$O]=!0);continue;case"#if":if(y$u.src=y$O,y$u.noCompile=!0,y$u.setParent(y$_),y$_=y$u,y$X)for(y$m=y$O.substr(y$k).split(y$z._splitToWordExps3),y$k=0;y$k<y$m.length;y$k++)(y$O=y$m[y$k]).length&&"defined"!=y$O&&(y$X[y$O]=!0);continue;case"#else":y$u.src=y$O,y$P=(y$_=y$_.parent).childs[y$_.childs.length-1],y$u.noCompile=y$P.noCompile,y$u.noCompile||(y$u.condition=y$P.condition,y$u.conditionType=1==y$P.conditionType?2:1,y$u.text="//"+y$u.text+" "+y$P.text+" "+y$u.conditionType),y$u.setParent(y$_),y$_=y$u;continue;case"#endif":y$P=(y$_=y$_.parent).childs[y$_.childs.length-1],y$u.noCompile=y$P.noCompile,y$u.noCompile||(y$u.text="//"+y$u.text),y$u.setParent(y$_);continue;case"#include":y$m=y$z.splitToWords(y$O,null);var y$G=y$z.includes[y$m[1]];if(!y$G)throw"ShaderCompile error no this include file:"+y$m[1];if((y$B=y$m[0].indexOf("?"))<0){y$u.setParent(y$_),y$O=y$G.getWith("with"==y$m[2]?y$m[3]:null),this._compileToTree(y$u,y$O.split("\n"),0,y$Z,y$X),y$u.text="";continue}y$u.setCondition(y$m[0].substr(y$B+1),1),y$u.text=y$G.getWith("with"==y$m[2]?y$m[3]:null);break;case"#import":y$n=(y$m=y$z.splitToWords(y$O,null))[1],y$Z.push({node:y$u,file:y$z.includes[y$n],ofs:y$u.text.length});continue}}else{if((y$P=y$_.childs[y$_.childs.length-1])&&!y$P.name){0<y$Z.length&&y$z.splitToWords(y$O,y$P),y$H=y$u,y$P.text+="\n"+y$O;continue}0<y$Z.length&&y$z.splitToWords(y$O,y$u)}y$u.setParent(y$_)}},y$_.createShader=function(y$_,y$c,y$e){var y$Z={},y$X="";if(y$_)for(var y$u in y$_)y$X+="#define "+y$u+"\n",y$Z[y$u]=!0;var y$P=this._VS.toscript(y$Z,[]),y$O=this._PS.toscript(y$Z,[]);return(y$e||y$S_.create)(y$X+y$P.join("\n"),y$X+y$O.join("\n"),y$c,this._nameMap)},y$z._parseOne=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P={type:y$z.shaderParamsMap[y$e[y$Z+1]],name:y$e[y$Z+2],size:isNaN(parseInt(y$e[y$Z+3]))?1:parseInt(y$e[y$Z+3])};return y$u&&("attribute"==y$X?y$_.push(y$P):y$c.push(y$P)),":"==y$e[y$Z+3]&&(y$P.type=y$e[y$Z+4],y$Z+=2),y$Z+=2},y$z.addInclude=function(y$_,y$c){if(!y$c||0===y$c.length)throw new Error("add shader include file err:"+y$_);if(y$z.includes[y$_])throw new Error("add shader include file err, has add:"+y$_);y$z.includes[y$_]=new y$e(y$c)},y$z.preGetParams=function(y$_,y$c){var y$e=[y$_,y$c],y$Z={},y$X=[],y$u=[],y$P={},y$O=[];y$Z.attributes=y$X,y$Z.uniforms=y$u,y$Z.defines=y$P;for(var y$s=0,y$n=0,y$m=0;y$m<2;y$m++){y$e[y$m]=y$e[y$m].replace(y$z._removeAnnotation,"");var y$H,y$B=y$e[y$m].match(y$z._reg);for(y$s=0,y$n=y$B.length;y$s<y$n;y$s++){var y$D=y$B[y$s];if("attribute"==y$D||"uniform"==y$D)y$s=y$z._parseOne(y$X,y$u,y$B,y$s,y$D,!0);else{if("#define"==y$D){y$O[y$D=y$B[++y$s]]=1;continue}if("#ifdef"==y$D){y$P[y$H=y$B[++y$s]]=y$P[y$H]||[];for(y$s++;y$s<y$n;y$s++)if("attribute"==(y$D=y$B[y$s])||"uniform"==y$D)y$s=y$z._parseOne(y$X,y$u,y$B,y$s,y$D,y$O[y$H]);else if("#else"==y$D)for(y$s++;y$s<y$n;y$s++)if("attribute"==(y$D=y$B[y$s])||"uniform"==y$D)y$s=y$z._parseOne(y$X,y$u,y$B,y$s,y$D,!y$O[y$H]);else if("#endif"==y$D)break}}}}return y$Z},y$z.splitToWords=function(y$_,y$c){for(var y$e,y$Z,y$X=[],y$u=-1,y$P=0,y$O=y$_.length;y$P<y$O;y$P++)if(y$e=y$_.charAt(y$P),0<=" \t=+-*/&%!<>()'\",;".indexOf(y$e)){if(0<=y$u&&1<y$P-y$u&&(y$Z=y$_.substr(y$u,y$P-y$u),y$X.push(y$Z)),'"'==y$e||"'"==y$e){var y$s=y$_.indexOf(y$e,y$P+1);if(y$s<0)throw"Sharder err:"+y$_;y$X.push(y$_.substr(y$P+1,y$s-y$P-1)),y$P=y$s,y$u=-1;continue}"("==y$e&&y$c&&0<y$X.length&&(y$Z=y$X[y$X.length-1]+";","vec4;main;".indexOf(y$Z)<0&&(y$c.useFuns+=y$Z)),y$u=-1}else y$u<0&&(y$u=y$P);return y$u<y$O&&1<y$O-y$u&&(y$Z=y$_.substr(y$u,y$O-y$u),y$X.push(y$Z)),y$X},y$z.IFDEF_NO=0,y$z.IFDEF_YES=1,y$z.IFDEF_ELSE=2,y$z.IFDEF_PARENT=3,y$z._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),y$z._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),y$z._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),y$z.includes={},y$P(y$z,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),y$z.__init$=function(){y$w=function(){function y$e(y$_){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=y$_}y$B(y$e,"");var y$_=y$e.prototype;return y$_.setParent=function(y$_){y$_.childs.push(this),this.z=y$_.z+1,this.parent=y$_},y$_.setCondition=function(y$_,y$c){y$_&&(this.conditionType=y$c,y$_=y$_.replace(/(\s*$)/g,""),this.condition=function(){return this[y$_]},this.condition.__condition=y$_)},y$_.toscript=function(y$_,y$c){return this._toscript(y$_,y$c,++y$e.__id)},y$_._toscript=function(y$Z,y$X,y$u){if(this.childs.length<1&&!this.text)return y$X;y$X.length;if(this.condition){var y$_=!!this.condition.call(y$Z);if(2===this.conditionType&&(y$_=!y$_),!y$_)return y$X}if(this.text&&y$X.push(this.text),0<this.childs.length&&this.childs.forEach(function(y$_,y$c,y$e){y$_._toscript(y$Z,y$X,y$u)}),0<this.includefiles.length&&0<this.useFuns.length)for(var y$c,y$e=0,y$P=this.includefiles.length;y$e<y$P;y$e++)this.includefiles[y$e].curUseID!=y$u&&0<(y$c=this.includefiles[y$e].file.getFunsScript(this.useFuns)).length&&(this.includefiles[y$e].curUseID=y$u,y$X[0]=y$c+y$X[0]);return y$X},y$e.__id=1,y$e}(),y$e=function(){function y$_(y$_){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=y$_;for(var y$c=0,y$e=0,y$Z=0;!((y$c=y$_.indexOf("#begin",y$c))<0);){for(y$Z=y$c+5;!((y$Z=y$_.indexOf("#end",y$Z))<0)&&"i"===y$_.charAt(y$Z+4);)y$Z+=5;if(y$Z<0)throw"add include err,no #end:"+y$_;y$e=y$_.indexOf("\n",y$c);var y$X=y$z.splitToWords(y$_.substr(y$c,y$e-y$c),null);"code"==y$X[1]?this.codes[y$X[2]]=y$_.substr(y$e+1,y$Z-y$e-1):"function"==y$X[1]&&(y$e=y$_.indexOf("function",y$c),y$e+="function".length,this.funs[y$X[3]]=y$_.substr(y$e+1,y$Z-y$e-1),this.funnames+=y$X[3]+";"),y$c=y$Z+1}}y$B(y$_,"");var y$c=y$_.prototype;return y$c.getWith=function(y$_){var y$c=y$_?this.codes[y$_]:this.script;if(!y$c)throw"get with error:"+y$_;return y$c},y$c.getFunsScript=function(y$_){var y$c="";for(var y$e in this.funs)0<=y$_.indexOf(y$e+";")&&(y$c+=this.funs[y$e]);return y$c},y$_}()},y$z}(),y$L_=function(){function y$P(){}return y$B(y$P,"laya.webgl.WebGL"),y$P._uint8ArraySlice=function(){for(var y$_=this.length,y$c=new Uint8Array(this.length),y$e=0;y$e<y$_;y$e++)y$c[y$e]=this[y$e];return y$c},y$P._float32ArraySlice=function(){for(var y$_=this.length,y$c=new Float32Array(this.length),y$e=0;y$e<y$_;y$e++)y$c[y$e]=this[y$e];return y$c},y$P._uint16ArraySlice=function(y$_){var y$c,y$e=arguments,y$Z=0,y$X=0;if(0===y$e.length)for(y$Z=this.length,y$c=new Uint16Array(y$Z),y$X=0;y$X<y$Z;y$X++)y$c[y$X]=this[y$X];else if(2===y$e.length){var y$u=y$e[0],y$P=y$e[1];if(y$u<y$P)for(y$Z=y$P-y$u,y$c=new Uint16Array(y$Z),y$X=y$u;y$X<y$P;y$X++)y$c[y$X-y$u]=this[y$X];else y$c=new Uint16Array(0)}return y$c},y$P.expandContext=function(){var y$_=y$X.prototype,y$c=CanvasRenderingContext2D.prototype;y$c.fillTrangles=y$_.fillTrangles,y$E_.__int__(null),y$c.setIBVB=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){void 0===y$s&&(y$s=0),void 0===y$n&&(y$n=0),null===y$e&&(this._ib=this._ib||y$d_.QuadrangleIB,y$e=this._ib,y$a_.expandIBQuadrangle(y$e,y$Z._byteLength/64+8)),this._setIBVB(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n)},y$c.fillTrangles=function(y$_,y$c,y$e,y$Z,y$X){this._curMat=this._curMat||y$A.create(),this._vb=this._vb||y$I_.create(),this._ib||(this._ib=y$d_.create(),y$a_.fillIBQuadrangle(this._ib,y$P/4));var y$u=this._vb,y$P=y$Z.length>>4;y$a_.fillTranglesVB(y$u,y$c,y$e,y$Z,y$X||this._curMat,0,0),y$a_.expandIBQuadrangle(this._ib,y$u._byteLength/64+8);var y$O=new y$f_(1,0);y$O.textureHost=y$_;var y$s=new y$l_("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");y$u._vertType=3,this._setIBVB(y$c,y$e,this._ib,y$u,6*y$P,y$X,y$s,y$O,0,0)}},y$P.enable=function(){if(y$D.__init__(),y$G.isConchApp&&!y$G.isConchWebGL)return y$q.skinAniSprite=function(){return new y$__},y$P.expandContext(),!1;if(y$q.getWebGLContext=function(y$_){for(var y$c,y$e=["webgl","experimental-webgl","webkit-3d","moz-webgl"],y$Z=0;y$Z<y$e.length;y$Z++){try{y$c=y$_.getContext(y$e[y$Z],{stencil:y$M.isStencil,alpha:y$M.isAlpha,antialias:y$M.isAntialias,premultipliedAlpha:y$M.premultipliedAlpha,preserveDrawingBuffer:y$M.preserveDrawingBuffer})}catch(y$_){}if(y$c)return y$c}return null},null==(y$P.mainContext=y$q.getWebGLContext(y$G._mainCanvas)))return!1;if(y$G.isWebGL)return!0;y$k.create=function(y$_,y$c){return new y$_c(y$_,y$c)},y$a.create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){return new y$g_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P)},y$G.WebGL=y$P,y$G.isWebGL=!0,y$D_.__init__(),y$q.createRenderSprite=function(y$_,y$c){return new y$A_(y$_,y$c)},y$q.createWebGLContext2D=function(y$_){return new y$M_(y$_)},y$q.changeWebGLSize=function(y$_,y$c){laya.webgl.WebGL.onStageResize(y$_,y$c)},y$q.createGraphics=function(){return new y$K_};var y$_=y$q.createFilterAction;return y$q.createFilterAction=y$_||function(y$_){return new y$v_},y$q.clear=function(y$_){y$w_.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var y$c=y$G.context.ctx,y$e=0==y$c._submits._length||y$M.preserveDrawingBuffer?y$U.create(y$_)._color:y$y._wgColor;y$e&&y$c.clearBG(y$e[0],y$e[1],y$e[2],y$e[3]),y$w_.clear()},y$q.addToAtlas=function(y$_,y$c){void 0===y$c&&(y$c=!1);var y$e=y$_.bitmap;y$G.optimizeTextureMemory(y$_.url,y$_)?y$K.__typeof(y$e,"laya.webgl.resource.IMergeAtlasBitmap")&&y$e.allowMerageInAtlas&&y$e.on("recovered",y$_,y$_.addTextureToAtlas):y$e.enableMerageInAtlas=!1},y$q.isAtlas=function(y$_){return y$_ instanceof laya.webgl.atlas.AtlasWebGLCanvas},y$Q._enable(),y$q.beginFlush=function(){for(var y$_=y$Q.instance,y$c=y$_.getAtlaserCount(),y$e=0;y$e<y$c;y$e++){var y$Z=y$_.getAtlaserByIndex(y$e).texture;y$Z._flashCacheImageNeedFlush&&y$q.flashFlushImage(y$Z)}},y$q.drawToCanvas=function(y$_,y$c,y$e,y$Z,y$X,y$u){(y$e<=0||y$Z<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),y$e|=0,y$Z|=0,y$X|=0,y$u|=0;var y$P=y$F_.create(y$e,y$Z,6408,5121,0,!1);y$P.start(),y$P.clear(0,0,0,0),y$G.context.clear(),y$w.renders[y$c]._fun(y$_,y$G.context,y$X,y$w_.height-y$Z+y$u),y$G.context.flush(),y$P.end();var y$O=y$P.getData(0,0,y$e,y$Z);if(y$P.recycle(),y$O.byteLength==y$e*y$Z*4){var y$s=new y$b_;y$s._canvas=y$D.createElement("canvas"),y$s.size(y$e,y$Z);var y$n=y$s._canvas.getContext("2d");y$D.canvas.size(y$e,y$Z);var y$m=y$D.context,y$H=y$m.createImageData(y$e,y$Z);return y$H.data.set(new Uint8ClampedArray(y$O.buffer)),y$s._imgData=y$H,y$m.putImageData(y$H,0,0),y$n.save(),y$n.translate(0,y$Z),y$n.scale(1,-1),y$n.drawImage(y$D.canvas.source,0,0),y$n.restore(),y$s}console.log("drawToCanvas error: w:"+y$e+",h:"+y$Z+",datalen:"+y$O.byteLength)},y$q.createFilterAction=function(y$_){var y$c;switch(y$_){case 32:y$c=new y$v_}return y$c},y$q.addTextureToAtlas=function(y$_){y$_._uvID++,y$Q._atlasRestore++,y$_.bitmap.enableMerageInAtlas&&y$Q.instance.addToAtlas(y$_)},y$q.getTexturePixels=function(y$_,y$c,y$e,y$Z,y$X){y$G.context.ctx.clear();var y$u=new y$C;y$u.graphics.drawTexture(y$_,-y$c,-y$e);var y$P=y$F_.create(y$Z,y$X);y$P.start(),y$P.clear(0,0,0,0),y$u.render(y$G.context,0,0),y$G.context.ctx.flush(),y$P.end();for(var y$O=y$P.getData(0,0,y$Z,y$X),y$s=[],y$n=0,y$m=y$X-1;0<=y$m;y$m--)for(var y$H=0;y$H<y$Z;y$H++)y$n=4*(y$m*y$Z+y$H),y$s.push(y$O[y$n]),y$s.push(y$O[y$n+1]),y$s.push(y$O[y$n+2]),y$s.push(y$O[y$n+3]);return y$s},y$q.skinAniSprite=function(){return new y$__},y$n.create=function(y$_,y$c){var y$e=new y$b_;return y$e._imgData=y$c,y$e.flipY=!1,y$e},y$f._filterStart=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$_.getValue("bounds"),y$P=y$F_.create(y$u.width,y$u.height);if(y$P.start(),y$P.clear(0,0,0,0),y$_.addValue("src",y$P),y$_.addValue("ScissorTest",y$w_.worldScissorTest),y$w_.worldScissorTest){var y$O=new y$r;y$O.copyFrom(y$e.ctx._clipRect),y$_.addValue("clipRect",y$O),y$w_.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},y$f._filterEnd=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$_.getValue("bounds");y$_.getValue("src").end();var y$P=y$F_.create(y$u.width,y$u.height);y$P.start(),y$P.clear(0,0,0,0),y$_.addValue("out",y$P),y$c._set$P("_filterCache",y$P),y$c._set$P("_isHaveGlowFilter",y$_.getValue("_isHaveGlowFilter"))},y$f._EndTarget=function(y$_,y$c){if(y$_.getValue("src").recycle(),y$_.getValue("out").end(),y$_.getValue("ScissorTest")){y$w_.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),y$c.ctx.save();var y$e=y$_.getValue("clipRect");y$c.ctx.clipRect(y$e.x,y$e.y,y$e.width,y$e.height)}},y$f._useSrc=function(y$_){var y$c=y$_.getValue("out");y$c.end(),(y$c=y$_.getValue("src")).start(),y$c.clear(0,0,0,0)},y$f._endSrc=function(y$_){y$_.getValue("src").end()},y$f._useOut=function(y$_){var y$c=y$_.getValue("src");y$c.end(),(y$c=y$_.getValue("out")).start(),y$c.clear(0,0,0,0)},y$f._endOut=function(y$_){y$_.getValue("out").end()},y$f._recycleScope=function(y$_){y$_.recycle()},y$f._filter=function(y$_,y$c,y$e,y$Z){var y$X=this._next;if(y$X){var y$u,y$P,y$O=y$_.filters,y$s=y$O.length;if(1==y$s&&32==y$O[0].type)return y$c.ctx.save(),y$c.ctx.setFilters([y$O[0]]),y$X._fun.call(y$X,y$_,y$c,y$e,y$Z),void y$c.ctx.restore();var y$n=y$O_.create(),y$m=y$v.TEMP,y$H=y$c.ctx._getTransformMatrix(),y$B=y$A.create();y$H.copyTo(y$B);var y$D=0,y$U=0,y$k=!1,y$a=y$_._$P._filterCache?y$_._$P._filterCache:null;if(!y$a||y$_._repaint){y$k=y$_._isHaveGlowFilter(),y$n.addValue("_isHaveGlowFilter",y$k),y$k&&(y$D=50,y$U=25),(y$P=new y$r).copyFrom(y$_.getSelfBounds()),y$P.x+=y$_.x,y$P.y+=y$_.y,y$P.x-=y$_.pivotX+4,y$P.y-=y$_.pivotY+4;var y$G=y$P.x,y$w=y$P.y;if(y$P.width+=y$D+8,y$P.height+=y$D+8,y$m.x=y$P.x*y$B.a+y$P.y*y$B.c,y$m.y=y$P.y*y$B.d+y$P.x*y$B.b,y$P.x=y$m.x,y$P.y=y$m.y,y$m.x=y$P.width*y$B.a+y$P.height*y$B.c,y$m.y=y$P.height*y$B.d+y$P.width*y$B.b,y$P.width=y$m.x,y$P.height=y$m.y,y$P.width<=0||y$P.height<=0)return;y$a&&y$a.recycle(),y$n.addValue("bounds",y$P);var y$z=y$P_.create([y$n,y$_,y$c,0,0],y$f._filterStart);y$c.addRenderObject(y$z),y$c.ctx._renderKey=0,y$c.ctx._shader2D.glTexture=null;var y$L=y$_.x-y$G+y$U,y$q=y$_.y-y$w+y$U;y$X._fun.call(y$X,y$_,y$c,y$L,y$q),y$z=y$P_.create([y$n,y$_,y$c,0,0],y$f._filterEnd),y$c.addRenderObject(y$z);for(var y$K=0;y$K<y$s;y$K++){0!=y$K&&(y$z=y$P_.create([y$n],y$f._useSrc),y$c.addRenderObject(y$z),y$u=y$f_.create(1,0),y$A.TEMP.identity(),y$c.ctx.drawTarget(y$n,0,0,y$P.width,y$P.height,y$A.TEMP,"out",y$u,null,y$j.TOINT.overlay),y$z=y$P_.create([y$n],y$f._useOut),y$c.addRenderObject(y$z)),y$O[y$K].action.apply3d(y$n,y$_,y$c,0,0)}y$z=y$P_.create([y$n,y$c],y$f._EndTarget),y$c.addRenderObject(y$z)}else{if((y$k=!!y$_._$P._isHaveGlowFilter&&y$_._$P._isHaveGlowFilter)&&(y$D=50,y$U=25),(y$P=y$_.getBounds()).width<=0||y$P.height<=0)return;y$P.width+=y$D,y$P.height+=y$D,y$m.x=y$P.x*y$B.a+y$P.y*y$B.c,y$m.y=y$P.y*y$B.d+y$P.x*y$B.b,y$P.x=y$m.x,y$P.y=y$m.y,y$m.x=y$P.width*y$B.a+y$P.height*y$B.c,y$m.y=y$P.height*y$B.d+y$P.width*y$B.b,y$P.width=y$m.x,y$P.height=y$m.y,y$n.addValue("out",y$a)}y$e=y$e-y$U-y$_.x,y$Z=y$Z-y$U-y$_.y,y$m.setTo(y$e,y$Z),y$B.transformPoint(y$m),y$e=y$m.x+y$P.x,y$Z=y$m.y+y$P.y,y$u=y$f_.create(1,0),y$A.TEMP.identity(),y$c.ctx.drawTarget(y$n,y$e,y$Z,y$P.width,y$P.height,y$A.TEMP,"out",y$u,null,y$j.TOINT.overlay),y$z=y$P_.create([y$n],y$f._recycleScope),y$c.addRenderObject(y$z),y$B.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=y$P._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=y$P._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=y$P._uint8ArraySlice),!0},y$P.onStageResize=function(y$_,y$c){null!=y$P.mainContext&&(y$P.mainContext.viewport(0,0,y$_,y$c),y$w_.width=y$_,y$w_.height=y$c)},y$P.onInvalidGLRes=function(){y$Q.instance.freeAll(),y$L.releaseContentManagers(!0),y$P.doNodeRepaint(y$K.stage),y$P.mainContext.viewport(0,0,y$w_.width,y$w_.height),y$K.stage.event("devicelost")},y$P.doNodeRepaint=function(y$_){0==y$_.numChildren&&y$_.repaint();for(var y$c=0;y$c<y$_.numChildren;y$c++)y$P.doNodeRepaint(y$_.getChildAt(y$c))},y$P.init=function(y$_,y$c,y$e){y$P.mainCanvas=y$_,y$n._createContext=function(y$_){return new y$M_(y$_)},y$b_._createContext=function(y$_){return new y$M_(y$_)};var y$Z=laya.webgl.WebGL.mainContext;if(null!=y$Z.getShaderPrecisionFormat){var y$X=y$Z.getShaderPrecisionFormat(35633,36338),y$u=y$Z.getShaderPrecisionFormat(35632,36338);y$P.shaderHighPrecision=!(!y$X.precision||!y$u.precision)}else y$P.shaderHighPrecision=!1;if(y$Z.deleteTexture1=y$Z.deleteTexture,y$Z.deleteTexture=function(y$_){y$_==y$q_.curBindTexValue&&(y$q_.curBindTexValue=null),y$Z.deleteTexture1(y$_)},y$P.onStageResize(y$c,y$e),null==y$P.mainContext)throw new Error("webGL getContext err!");y$h.__init__(),y$Q.__init__(),y$C_.__init__(),y$u_.__init__(),y$M_.__init__(),y$f_.__init__(),y$d.__init__(),y$E_.__int__(y$Z),y$j._init_(y$Z),y$G.isConchApp&&conch.setOnInvalidGLRes(y$P.onInvalidGLRes)},y$P.mainCanvas=null,y$P.mainContext=null,y$P.antialias=!0,y$P.shaderHighPrecision=!1,y$P._bg_null=[0,0,0,0],y$P}(),y$q_=function(){function y$Z(){}return y$B(y$Z,"laya.webgl.WebGLContext"),y$Z.UseProgram=function(y$_){return y$Z._useProgram!==y$_&&(y$L_.mainContext.useProgram(y$_),y$Z._useProgram=y$_,!0)},y$Z.setDepthTest=function(y$_,y$c){y$c!==y$Z._depthTest&&((y$Z._depthTest=y$c)?y$_.enable(2929):y$_.disable(2929))},y$Z.setDepthMask=function(y$_,y$c){y$c!==y$Z._depthMask&&(y$Z._depthMask=y$c,y$_.depthMask(y$c))},y$Z.setDepthFunc=function(y$_,y$c){y$c!==y$Z._depthFunc&&(y$Z._depthFunc=y$c,y$_.depthFunc(y$c))},y$Z.setBlend=function(y$_,y$c){y$c!==y$Z._blend&&((y$Z._blend=y$c)?y$_.enable(3042):y$_.disable(3042))},y$Z.setBlendFunc=function(y$_,y$c,y$e){(y$c!==y$Z._sFactor||y$e!==y$Z._dFactor)&&(y$Z._sFactor=y$c,y$Z._dFactor=y$e,y$_.blendFunc(y$c,y$e))},y$Z.setCullFace=function(y$_,y$c){y$c!==y$Z._cullFace&&((y$Z._cullFace=y$c)?y$_.enable(2884):y$_.disable(2884))},y$Z.setFrontFace=function(y$_,y$c){y$c!==y$Z._frontFace&&(y$Z._frontFace=y$c,y$_.frontFace(y$c))},y$Z.bindTexture=function(y$_,y$c,y$e){y$_.bindTexture(y$c,y$e),y$Z.curBindTexTarget=y$c,y$Z.curBindTexValue=y$e},y$Z.DEPTH_BUFFER_BIT=256,y$Z.STENCIL_BUFFER_BIT=1024,y$Z.COLOR_BUFFER_BIT=16384,y$Z.POINTS=0,y$Z.LINES=1,y$Z.LINE_LOOP=2,y$Z.LINE_STRIP=3,y$Z.TRIANGLES=4,y$Z.TRIANGLE_STRIP=5,y$Z.TRIANGLE_FAN=6,y$Z.ZERO=0,y$Z.ONE=1,y$Z.SRC_COLOR=768,y$Z.ONE_MINUS_SRC_COLOR=769,y$Z.SRC_ALPHA=770,y$Z.ONE_MINUS_SRC_ALPHA=771,y$Z.DST_ALPHA=772,y$Z.ONE_MINUS_DST_ALPHA=773,y$Z.DST_COLOR=774,y$Z.ONE_MINUS_DST_COLOR=775,y$Z.SRC_ALPHA_SATURATE=776,y$Z.FUNC_ADD=32774,y$Z.BLEND_EQUATION=32777,y$Z.BLEND_EQUATION_RGB=32777,y$Z.BLEND_EQUATION_ALPHA=34877,y$Z.FUNC_SUBTRACT=32778,y$Z.FUNC_REVERSE_SUBTRACT=32779,y$Z.BLEND_DST_RGB=32968,y$Z.BLEND_SRC_RGB=32969,y$Z.BLEND_DST_ALPHA=32970,y$Z.BLEND_SRC_ALPHA=32971,y$Z.CONSTANT_COLOR=32769,y$Z.ONE_MINUS_CONSTANT_COLOR=32770,y$Z.CONSTANT_ALPHA=32771,y$Z.ONE_MINUS_CONSTANT_ALPHA=32772,y$Z.BLEND_COLOR=32773,y$Z.ARRAY_BUFFER=34962,y$Z.ELEMENT_ARRAY_BUFFER=34963,y$Z.ARRAY_BUFFER_BINDING=34964,y$Z.ELEMENT_ARRAY_BUFFER_BINDING=34965,y$Z.STREAM_DRAW=35040,y$Z.STATIC_DRAW=35044,y$Z.DYNAMIC_DRAW=35048,y$Z.BUFFER_SIZE=34660,y$Z.BUFFER_USAGE=34661,y$Z.CURRENT_VERTEX_ATTRIB=34342,y$Z.FRONT=1028,y$Z.BACK=1029,y$Z.CULL_FACE=2884,y$Z.FRONT_AND_BACK=1032,y$Z.BLEND=3042,y$Z.DITHER=3024,y$Z.STENCIL_TEST=2960,y$Z.DEPTH_TEST=2929,y$Z.SCISSOR_TEST=3089,y$Z.POLYGON_OFFSET_FILL=32823,y$Z.SAMPLE_ALPHA_TO_COVERAGE=32926,y$Z.SAMPLE_COVERAGE=32928,y$Z.NO_ERROR=0,y$Z.INVALID_ENUM=1280,y$Z.INVALID_VALUE=1281,y$Z.INVALID_OPERATION=1282,y$Z.OUT_OF_MEMORY=1285,y$Z.CW=2304,y$Z.CCW=2305,y$Z.LINE_WIDTH=2849,y$Z.ALIASED_POINT_SIZE_RANGE=33901,y$Z.ALIASED_LINE_WIDTH_RANGE=33902,y$Z.CULL_FACE_MODE=2885,y$Z.FRONT_FACE=2886,y$Z.DEPTH_RANGE=2928,y$Z.DEPTH_WRITEMASK=2930,y$Z.DEPTH_CLEAR_VALUE=2931,y$Z.DEPTH_FUNC=2932,y$Z.STENCIL_CLEAR_VALUE=2961,y$Z.STENCIL_FUNC=2962,y$Z.STENCIL_FAIL=2964,y$Z.STENCIL_PASS_DEPTH_FAIL=2965,y$Z.STENCIL_PASS_DEPTH_PASS=2966,y$Z.STENCIL_REF=2967,y$Z.STENCIL_VALUE_MASK=2963,y$Z.STENCIL_WRITEMASK=2968,y$Z.STENCIL_BACK_FUNC=34816,y$Z.STENCIL_BACK_FAIL=34817,y$Z.STENCIL_BACK_PASS_DEPTH_FAIL=34818,y$Z.STENCIL_BACK_PASS_DEPTH_PASS=34819,y$Z.STENCIL_BACK_REF=36003,y$Z.STENCIL_BACK_VALUE_MASK=36004,y$Z.STENCIL_BACK_WRITEMASK=36005,y$Z.VIEWPORT=2978,y$Z.SCISSOR_BOX=3088,y$Z.COLOR_CLEAR_VALUE=3106,y$Z.COLOR_WRITEMASK=3107,y$Z.UNPACK_ALIGNMENT=3317,y$Z.PACK_ALIGNMENT=3333,y$Z.MAX_TEXTURE_SIZE=3379,y$Z.MAX_VIEWPORT_DIMS=3386,y$Z.SUBPIXEL_BITS=3408,y$Z.RED_BITS=3410,y$Z.GREEN_BITS=3411,y$Z.BLUE_BITS=3412,y$Z.ALPHA_BITS=3413,y$Z.DEPTH_BITS=3414,y$Z.STENCIL_BITS=3415,y$Z.POLYGON_OFFSET_UNITS=10752,y$Z.POLYGON_OFFSET_FACTOR=32824,y$Z.TEXTURE_BINDING_2D=32873,y$Z.SAMPLE_BUFFERS=32936,y$Z.SAMPLES=32937,y$Z.SAMPLE_COVERAGE_VALUE=32938,y$Z.SAMPLE_COVERAGE_INVERT=32939,y$Z.NUM_COMPRESSED_TEXTURE_FORMATS=34466,y$Z.COMPRESSED_TEXTURE_FORMATS=34467,y$Z.DONT_CARE=4352,y$Z.FASTEST=4353,y$Z.NICEST=4354,y$Z.GENERATE_MIPMAP_HINT=33170,y$Z.BYTE=5120,y$Z.UNSIGNED_BYTE=5121,y$Z.SHORT=5122,y$Z.UNSIGNED_SHORT=5123,y$Z.INT=5124,y$Z.UNSIGNED_INT=5125,y$Z.FLOAT=5126,y$Z.DEPTH_COMPONENT=6402,y$Z.ALPHA=6406,y$Z.RGB=6407,y$Z.RGBA=6408,y$Z.LUMINANCE=6409,y$Z.LUMINANCE_ALPHA=6410,y$Z.UNSIGNED_SHORT_4_4_4_4=32819,y$Z.UNSIGNED_SHORT_5_5_5_1=32820,y$Z.UNSIGNED_SHORT_5_6_5=33635,y$Z.FRAGMENT_SHADER=35632,y$Z.VERTEX_SHADER=35633,y$Z.MAX_VERTEX_ATTRIBS=34921,y$Z.MAX_VERTEX_UNIFORM_VECTORS=36347,y$Z.MAX_VARYING_VECTORS=36348,y$Z.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,y$Z.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,y$Z.MAX_TEXTURE_IMAGE_UNITS=34930,y$Z.MAX_FRAGMENT_UNIFORM_VECTORS=36349,y$Z.SHADER_TYPE=35663,y$Z.DELETE_STATUS=35712,y$Z.LINK_STATUS=35714,y$Z.VALIDATE_STATUS=35715,y$Z.ATTACHED_SHADERS=35717,y$Z.ACTIVE_UNIFORMS=35718,y$Z.ACTIVE_ATTRIBUTES=35721,y$Z.SHADING_LANGUAGE_VERSION=35724,y$Z.CURRENT_PROGRAM=35725,y$Z.NEVER=512,y$Z.LESS=513,y$Z.EQUAL=514,y$Z.LEQUAL=515,y$Z.GREATER=516,y$Z.NOTEQUAL=517,y$Z.GEQUAL=518,y$Z.ALWAYS=519,y$Z.KEEP=7680,y$Z.REPLACE=7681,y$Z.INCR=7682,y$Z.DECR=7683,y$Z.INVERT=5386,y$Z.INCR_WRAP=34055,y$Z.DECR_WRAP=34056,y$Z.VENDOR=7936,y$Z.RENDERER=7937,y$Z.VERSION=7938,y$Z.NEAREST=9728,y$Z.LINEAR=9729,y$Z.NEAREST_MIPMAP_NEAREST=9984,y$Z.LINEAR_MIPMAP_NEAREST=9985,y$Z.NEAREST_MIPMAP_LINEAR=9986,y$Z.LINEAR_MIPMAP_LINEAR=9987,y$Z.TEXTURE_MAG_FILTER=10240,y$Z.TEXTURE_MIN_FILTER=10241,y$Z.TEXTURE_WRAP_S=10242,y$Z.TEXTURE_WRAP_T=10243,y$Z.TEXTURE_2D=3553,y$Z.TEXTURE=5890,y$Z.TEXTURE_CUBE_MAP=34067,y$Z.TEXTURE_BINDING_CUBE_MAP=34068,y$Z.TEXTURE_CUBE_MAP_POSITIVE_X=34069,y$Z.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,y$Z.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,y$Z.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,y$Z.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,y$Z.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,y$Z.MAX_CUBE_MAP_TEXTURE_SIZE=34076,y$Z.TEXTURE0=33984,y$Z.TEXTURE1=33985,y$Z.TEXTURE2=33986,y$Z.TEXTURE3=33987,y$Z.TEXTURE4=33988,y$Z.TEXTURE5=33989,y$Z.TEXTURE6=33990,y$Z.TEXTURE7=33991,y$Z.TEXTURE8=33992,y$Z.TEXTURE9=33993,y$Z.TEXTURE10=33994,y$Z.TEXTURE11=33995,y$Z.TEXTURE12=33996,y$Z.TEXTURE13=33997,y$Z.TEXTURE14=33998,y$Z.TEXTURE15=33999,y$Z.TEXTURE16=34e3,y$Z.TEXTURE17=34001,y$Z.TEXTURE18=34002,y$Z.TEXTURE19=34003,y$Z.TEXTURE20=34004,y$Z.TEXTURE21=34005,y$Z.TEXTURE22=34006,y$Z.TEXTURE23=34007,y$Z.TEXTURE24=34008,y$Z.TEXTURE25=34009,y$Z.TEXTURE26=34010,y$Z.TEXTURE27=34011,y$Z.TEXTURE28=34012,y$Z.TEXTURE29=34013,y$Z.TEXTURE30=34014,y$Z.TEXTURE31=34015,y$Z.ACTIVE_TEXTURE=34016,y$Z.REPEAT=10497,y$Z.CLAMP_TO_EDGE=33071,y$Z.MIRRORED_REPEAT=33648,y$Z.FLOAT_VEC2=35664,y$Z.FLOAT_VEC3=35665,y$Z.FLOAT_VEC4=35666,y$Z.INT_VEC2=35667,y$Z.INT_VEC3=35668,y$Z.INT_VEC4=35669,y$Z.BOOL=35670,y$Z.BOOL_VEC2=35671,y$Z.BOOL_VEC3=35672,y$Z.BOOL_VEC4=35673,y$Z.FLOAT_MAT2=35674,y$Z.FLOAT_MAT3=35675,y$Z.FLOAT_MAT4=35676,y$Z.SAMPLER_2D=35678,y$Z.SAMPLER_CUBE=35680,y$Z.VERTEX_ATTRIB_ARRAY_ENABLED=34338,y$Z.VERTEX_ATTRIB_ARRAY_SIZE=34339,y$Z.VERTEX_ATTRIB_ARRAY_STRIDE=34340,y$Z.VERTEX_ATTRIB_ARRAY_TYPE=34341,y$Z.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,y$Z.VERTEX_ATTRIB_ARRAY_POINTER=34373,y$Z.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,y$Z.COMPILE_STATUS=35713,y$Z.LOW_FLOAT=36336,y$Z.MEDIUM_FLOAT=36337,y$Z.HIGH_FLOAT=36338,y$Z.LOW_INT=36339,y$Z.MEDIUM_INT=36340,y$Z.HIGH_INT=36341,y$Z.FRAMEBUFFER=36160,y$Z.RENDERBUFFER=36161,y$Z.RGBA4=32854,y$Z.RGB5_A1=32855,y$Z.RGB565=36194,y$Z.DEPTH_COMPONENT16=33189,y$Z.STENCIL_INDEX=6401,y$Z.STENCIL_INDEX8=36168,y$Z.DEPTH_STENCIL=34041,y$Z.RENDERBUFFER_WIDTH=36162,y$Z.RENDERBUFFER_HEIGHT=36163,y$Z.RENDERBUFFER_INTERNAL_FORMAT=36164,y$Z.RENDERBUFFER_RED_SIZE=36176,y$Z.RENDERBUFFER_GREEN_SIZE=36177,y$Z.RENDERBUFFER_BLUE_SIZE=36178,y$Z.RENDERBUFFER_ALPHA_SIZE=36179,y$Z.RENDERBUFFER_DEPTH_SIZE=36180,y$Z.RENDERBUFFER_STENCIL_SIZE=36181,y$Z.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,y$Z.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,y$Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,y$Z.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,y$Z.COLOR_ATTACHMENT0=36064,y$Z.DEPTH_ATTACHMENT=36096,y$Z.STENCIL_ATTACHMENT=36128,y$Z.DEPTH_STENCIL_ATTACHMENT=33306,y$Z.NONE=0,y$Z.FRAMEBUFFER_COMPLETE=36053,y$Z.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,y$Z.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,y$Z.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,y$Z.FRAMEBUFFER_UNSUPPORTED=36061,y$Z.FRAMEBUFFER_BINDING=36006,y$Z.RENDERBUFFER_BINDING=36007,y$Z.MAX_RENDERBUFFER_SIZE=34024,y$Z.INVALID_FRAMEBUFFER_OPERATION=1286,y$Z.UNPACK_FLIP_Y_WEBGL=37440,y$Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,y$Z.CONTEXT_LOST_WEBGL=37442,y$Z.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,y$Z.BROWSER_DEFAULT_WEBGL=37444,y$Z._useProgram=null,y$Z._depthTest=!0,y$Z._depthMask=!0,y$Z._blend=!1,y$Z._cullFace=!1,y$Z.curBindTexTarget=null,y$Z.curBindTexValue=null,y$P(y$Z,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),y$Z}(),y$K_=function(y$_){function y$c(){y$c.__super.call(this)}y$B(y$c,"laya.webgl.display.GraphicsGL",y$O);var y$e=y$c.prototype;return y$e.setShader=function(y$_){this._saveToCmd(y$G.context._setShader,[y$_])},y$e.setIBVB=function(y$_,y$c,y$e,y$Z,y$X,y$u){this._saveToCmd(y$G.context._setIBVB,[y$_,y$c,y$e,y$Z,y$X,y$u])},y$e.drawParticle=function(y$_,y$c,y$e){var y$Z=y$q.createParticleTemplate2D(y$e);y$Z.x=y$_,y$Z.y=y$c,this._saveToCmd(y$G.context._drawParticle,[y$Z])},y$c}(),y$M_=function(y$_){var y$e;function y$o(y$_){this._x=0,this._y=0,this._id=++y$o._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,y$o.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=y$o.MAXCLIPRECT,this.mOutPoint,this._canvas=y$_,this._canvas._addReference(),y$o._contextcount++,y$G.isFlash?(this._ib=y$d_.create(35044),y$a_.fillIBQuadrangle(this._ib,16)):this._ib=y$d_.QuadrangleIB,this.clear()}y$B(y$o,"laya.webgl.canvas.WebGLContext2D",y$X);var y$c=y$o.prototype;return y$c.setIsMainContext=function(){this._isMain=!0},y$c.clearBG=function(y$_,y$c,y$e,y$Z){var y$X=y$L_.mainContext;y$X.clearColor(y$_,y$c,y$e,y$Z),y$X.clear(16384)},y$c._getSubmits=function(){return this._submits},y$c._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var y$_=0,y$c=this._submits._length;y$_<y$c;y$_++)this._submits[y$_].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},y$c.destroy=function(){--y$o._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=y$d_.QuadrangleIB&&this._ib.releaseResource()},y$c.clear=function(){this._submits||(this._other=y$e.DEFAULT,this._curMat=y$A.create(),this._vb=y$I_.create(-1),this._submits=[],this._save=[y$S.Create(this)],this._save.length=10,this._shader2D=new y$d,this._triangleMesh=y$i_.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=y$e.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=y$o.MAXCLIPRECT,this._curSubmit=y$u_.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=y$t.DEFAULT;for(var y$_=0,y$c=this._submits._length;y$_<y$c;y$_++)this._submits[y$_].releaseRender(),this._submits[y$_]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},y$c.size=function(y$_,y$c){if(this._width!=y$_||this._height!=y$c)if(0==y$_||0==y$c){0!=this._vb._byteLength&&(this._width=y$_,this._height=y$c,this._vb.clear(),this._vb.upload());for(var y$e=0,y$Z=this._submits._length;y$e<y$Z;y$e++)this._submits[y$e].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=y$_,this._height=y$c,this._targets&&this._targets.size(y$_,y$c),this._canvas.memorySize-=this._canvas.memorySize;0===y$_&&0===y$c&&this._releaseMem()},y$c._getTransformMatrix=function(){return this._curMat},y$c.translate=function(y$_,y$c){0===y$_&&0===y$c||(y$W.save(this),this._curMat.bTransform&&(y$E.save(this),this._curMat.transformPointN(y$v.TEMP.setTo(y$_,y$c)),y$_=y$v.TEMP.x,y$c=y$v.TEMP.y),this._x+=y$_,this._y+=y$c)},y$c.save=function(){this._save[this._save._length++]=y$S.Create(this)},y$c.restore=function(){var y$_=this._save._length;if(!(y$_<1))for(var y$c=y$_-1;0<=y$c;y$c--){var y$e=this._save[y$c];if(y$e.restore(this),y$e.isSaveMark())return void(this._save._length=y$c)}},y$c._fillText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){void 0===y$n&&(y$n=0);var y$m=this._shader2D,y$H=this._curSubmit.shaderValue,y$B=y$X?y$U_.create(y$X):this._other.font;if(y$Q.enabled)y$m.ALPHA!==y$H.ALPHA&&(y$m.glTexture=null),y$D_.drawText(this,y$_,y$c,this._curMat,y$B,y$s||this._other.textAlign,y$u,y$P,y$O,y$e,y$Z,y$n);else{this._shader2D.defines.getValue();var y$D=y$u?y$U.create(y$u)._color:y$m.colorAdd;y$m.ALPHA===y$H.ALPHA&&y$D===y$m.colorAdd&&y$H.colorAdd===y$m.colorAdd||(y$m.glTexture=null,y$m.colorAdd=y$D),y$D_.drawText(this,y$_,y$c,this._curMat,y$B,y$s||this._other.textAlign,y$u,y$P,y$O,y$e,y$Z,y$n)}},y$c.fillWords=function(y$_,y$c,y$e,y$Z,y$X,y$u){this._fillText(null,y$_,y$c,y$e,y$Z,y$X,null,-1,null,y$u)},y$c.fillBorderWords=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._fillBorderText(null,y$_,y$c,y$e,y$Z,y$X,y$u,y$P,null)},y$c.fillText=function(y$_,y$c,y$e,y$Z,y$X,y$u){this._fillText(y$_,null,y$c,y$e,y$Z,y$X,null,-1,y$u)},y$c.strokeText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._fillText(y$_,null,y$c,y$e,y$Z,null,y$X,y$u||1,y$P)},y$c.fillBorderText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){this._fillBorderText(y$_,null,y$c,y$e,y$Z,y$X,y$u,y$P,y$O)},y$c._fillBorderText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){if(!y$Q.enabled)return this._fillText(y$_,y$c,y$e,y$Z,y$X,null,y$P,y$O||1,y$s),void this._fillText(y$_,y$c,y$e,y$Z,y$X,y$u,null,-1,y$s);var y$n=this._shader2D,y$m=this._curSubmit.shaderValue;y$n.ALPHA!==y$m.ALPHA&&(y$n.glTexture=null);var y$H=y$X?(y$o._fontTemp.setFont(y$X),y$o._fontTemp):this._other.font;y$D_.drawText(this,y$_,y$c,this._curMat,y$H,y$s||this._other.textAlign,y$u,y$P,y$O||1,y$e,y$Z,0)},y$c.fillRect=function(y$_,y$c,y$e,y$Z,y$X){var y$u=this._vb;if(y$a_.fillRectImgVb(y$u,this._clipRect,y$_,y$c,y$e,y$Z,y$i.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var y$P=this._shader2D.fillStyle;y$X&&(this._shader2D.fillStyle=y$t.create(y$X));var y$O=this._shader2D,y$s=this._curSubmit.shaderValue;if(y$O.fillStyle!==y$s.fillStyle||y$O.ALPHA!==y$s.ALPHA){y$O.glTexture=null;var y$n=this._curSubmit=y$u_.createSubmit(this,this._ib,y$u,(y$u._byteLength-64)/32*3,y$f_.create(2,0));y$n.shaderValue.color=y$O.fillStyle._color._color,y$n.shaderValue.ALPHA=y$O.ALPHA,this._submits[this._submits._length++]=y$n}this._curSubmit._numEle+=6,this._shader2D.fillStyle=y$P}},y$c.fillTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){if(y$_.loaded&&y$_.bitmap&&y$_.source){var y$s=this._vb,y$n=y$_.bitmap.width,y$m=y$_.bitmap.height,y$H=y$_.uv,y$B=y$P.x%y$_.width,y$D=y$P.y%y$_.height;if(y$n!=y$O.w||y$m!=y$O.h){if(!y$O.w&&!y$O.h)switch(y$O.oy=y$O.ox=0,y$u){case"repeat":y$O.width=y$Z,y$O.height=y$X;break;case"repeat-x":y$O.width=y$Z,y$D<0?y$_.height+y$D>y$X?y$O.height=y$X:y$O.height=y$_.height+y$D:(y$O.oy=y$D,y$_.height+y$D>y$X?y$O.height=y$X-y$D:y$O.height=y$_.height);break;case"repeat-y":y$B<0?y$_.width+y$B>y$Z?y$O.width=y$Z:y$O.width=y$_.width+y$B:(y$O.ox=y$B,y$_.width+y$B>y$Z?y$O.width=y$Z-y$B:y$O.width=y$_.width),y$O.height=y$X;break;case"no-repeat":y$B<0?y$_.width+y$B>y$Z?y$O.width=y$Z:y$O.width=y$_.width+y$B:(y$O.ox=y$B,y$_.width+y$B>y$Z?y$O.width=y$Z-y$B:y$O.width=y$_.width),y$D<0?y$_.height+y$D>y$X?y$O.height=y$X:y$O.height=y$_.height+y$D:(y$O.oy=y$D,y$_.height+y$D>y$X?y$O.height=y$X-y$D:y$O.height=y$_.height);break;default:y$O.width=y$Z,y$O.height=y$X}y$O.w=y$n,y$O.h=y$m,y$O.uv=[0,0,y$O.width/y$n,0,y$O.width/y$n,y$O.height/y$m,0,y$O.height/y$m]}if(y$c+=y$O.ox,y$e+=y$O.oy,y$B-=y$O.ox,y$D-=y$O.oy,y$a_.fillRectImgVb(y$s,this._clipRect,y$c,y$e,y$O.width,y$O.height,y$O.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var y$U=y$R_.create(this,this._ib,y$s,(y$s._byteLength-64)/32*3,y$f_.create(256,0)),y$k=(this._submits[this._submits._length++]=y$U).shaderValue;y$k.textureHost=y$_;var y$a=y$H[0]*y$n,y$G=y$H[1]*y$m,y$w=(y$H[2]-y$H[0])*y$n,y$z=(y$H[5]-y$H[3])*y$m,y$L=-y$B/y$n,y$q=-y$D/y$m;y$k.u_TexRange[0]=y$a/y$n,y$k.u_TexRange[1]=y$w/y$n,y$k.u_TexRange[2]=y$G/y$m,y$k.u_TexRange[3]=y$z/y$m,y$k.u_offset[0]=y$L,y$k.u_offset[1]=y$q,y$Q.enabled&&!this._isMain&&y$U.addTexture(y$_,(y$s._byteLength>>2)-16),(this._curSubmit=y$U)._renderType=10017,y$U._numEle+=6}}else this.sprite&&y$K.timer.callLater(this,this._repaintSprite)},y$c.setShader=function(y$_){y$N.save(this,1048576,this._shader2D,!0),this._shader2D.shader=y$_},y$c.setFilters=function(y$_){y$N.save(this,2097152,this._shader2D,!0),this._shader2D.filters=y$_,this._curSubmit=y$u_.RENDERBASE,this._renderKey=0,this._drawCount++},y$c.drawTexture=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._drawTextureM(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,null,1)},y$c.addTextureVb=function(y$_,y$c,y$e){var y$Z=this._curSubmit._vb||this._vb,y$X=y$Z._byteLength>>2;y$Z.byteLength=y$X+16<<2;for(var y$u=y$Z.getFloat32Array(),y$P=0;y$P<16;y$P+=4)y$u[y$X++]=y$_[y$P]+y$c,y$u[y$X++]=y$_[y$P+1]+y$e,y$u[y$X++]=y$_[y$P+2],y$u[y$X++]=y$_[y$P+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),y$Z._upload=!0},y$c.willDrawTexture=function(y$_,y$c){if(!(y$_.loaded&&y$_.bitmap&&y$_.source))return this.sprite&&y$K.timer.callLater(this,this._repaintSprite),0;var y$e=y$_.bitmap,y$Z=y$e.id+this._shader2D.ALPHA*y$c+10016;if(y$Z==this._renderKey)return y$Z;var y$X=this._shader2D,y$u=y$X.ALPHA,y$P=this._curSubmit.shaderValue;y$X.ALPHA*=y$c,this._renderKey=y$Z,this._drawCount++,y$X.glTexture=y$e;var y$O=this._vb,y$s=null,y$n=y$O._byteLength/32*3,y$m=y$P.textureHost&&y$P.textureHost==y$_&&y$P.textureHost.alphaTexture==y$_.alphaTexture;return y$s=y$R_.create(this,this._ib,y$O,y$n,y$f_.create(1,0)),(this._submits[this._submits._length++]=y$s).shaderValue.textureHost=y$_,y$s._renderType=10016,y$s._preIsSameTextureShader=10016===this._curSubmit._renderType&&y$X.ALPHA===y$P.ALPHA&&y$m,this._curSubmit=y$s,y$X.ALPHA=y$u,y$Z},y$c.drawTextures=function(y$_,y$c,y$e,y$Z){if(y$_.loaded&&y$_.bitmap&&y$_.source){var y$X=this._clipRect;if(this._clipRect=y$o.MAXCLIPRECT,this._drawTextureM(y$_,y$c[0],y$c[1],y$_.width,y$_.height,y$e,y$Z,null,1)){if(this._clipRect=y$X,y$$.drawCall++,!(y$c.length<4)){for(var y$u=this._curSubmit._vb||this._vb,y$P=this._curMat.a,y$O=this._curMat.d,y$s=2,y$n=y$c.length;y$s<y$n;y$s+=2)y$a_.copyPreImgVb(y$u,(y$c[y$s]-y$c[y$s-2])*y$P,(y$c[y$s+1]-y$c[y$s-1])*y$O),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&y$K.timer.callLater(this,this._repaintSprite)},y$c._drawTextureM=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){if(!y$_.loaded||!y$_.source)return this.sprite&&y$K.timer.callLater(this,this._repaintSprite),!1;var y$n=this._curSubmit._vb||this._vb,y$m=y$_.bitmap;y$c+=y$u,y$e+=y$P,this._drawCount++;var y$H=y$m.id+this._shader2D.ALPHA*y$s+10016;if(y$H!=this._renderKey){this._renderKey=y$H;var y$B=this._curSubmit.shaderValue,y$D=this._shader2D,y$U=y$D.ALPHA;y$D.ALPHA*=y$s,y$D.glTexture=y$m;var y$k=this._vb,y$a=null,y$G=y$k._byteLength/32*3,y$w=y$B.textureHost&&y$B.textureHost==y$_&&y$B.textureHost.alphaTexture==y$_.alphaTexture;y$a=y$R_.create(this,this._ib,y$k,y$G,y$f_.create(1,0)),(this._submits[this._submits._length++]=y$a).shaderValue.textureHost=y$_,y$a._renderType=10016,y$a._preIsSameTextureShader=10016===this._curSubmit._renderType&&y$D.ALPHA===y$B.ALPHA&&y$w,this._curSubmit=y$a,y$n=this._curSubmit._vb||this._vb,y$D.ALPHA=y$U}return!!y$a_.fillRectImgVb(y$n,this._clipRect,y$c,y$e,y$Z||y$_.width,y$X||y$_.height,y$_.uv,y$O||this._curMat,this._x,this._y,0,0)&&(y$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(y$_,(y$n._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},y$c._repaintSprite=function(){this.sprite&&this.sprite.repaint()},y$c._drawText=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){var y$m=y$_.bitmap;this._drawCount++;var y$H=y$m.id+this._shader2D.ALPHA+10016;if(y$H!=this._renderKey){this._renderKey=y$H;var y$B=this._curSubmit.shaderValue,y$D=this._shader2D;y$D.glTexture=y$m;var y$U=this._vb,y$k=null,y$a=y$U._byteLength/32*3,y$G=y$B.textureHost&&y$B.textureHost==y$_&&y$B.textureHost.alphaTexture==y$_.alphaTexture;(y$k=y$Q.enabled?y$R_.create(this,this._ib,y$U,y$a,y$f_.create(1,0)):y$R_.create(this,this._ib,y$U,y$a,y$W_.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&y$D.ALPHA===y$B.ALPHA&&y$G,(this._submits[this._submits._length++]=y$k).shaderValue.textureHost=y$_,y$k._renderType=10016,this._curSubmit=y$k}y$_.active();var y$w=this._curSubmit._vb||this._vb;y$a_.fillRectImgVb(y$w,this._clipRect,y$c+y$P,y$e+y$O,y$Z||y$_.width,y$X||y$_.height,y$_.uv,y$u||this._curMat,this._x,this._y,y$s,y$n,!0)&&(y$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(y$_,(y$w._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},y$c.drawTextureWithTransform=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){if(y$u){var y$n=this._curMat,y$m=this._x,y$H=this._y;(0!==y$P||0!==y$O)&&(this._x=y$P*y$n.a+y$O*y$n.c,this._y=y$O*y$n.d+y$P*y$n.b),y$u&&y$n.bTransform?(y$A.mul(y$u,y$n,y$o._tmpMatrix),(y$u=y$o._tmpMatrix)._checkTransform()):(this._x+=y$n.tx,this._y+=y$n.ty),this._drawTextureM(y$_,y$c,y$e,y$Z,y$X,0,0,y$u,y$s),this._x=y$m,this._y=y$H}else this._drawTextureM(y$_,y$c,y$e,y$Z,y$X,y$P,y$O,null,y$s)},y$c.fillQuadrangle=function(y$_,y$c,y$e,y$Z,y$X){var y$u=this._curSubmit,y$P=this._vb,y$O=this._shader2D,y$s=y$u.shaderValue;if(this._renderKey=0,y$_.bitmap){var y$n=y$_.bitmap;y$O.glTexture==y$n&&y$O.ALPHA===y$s.ALPHA||(y$O.glTexture=y$n,(y$u=this._curSubmit=y$u_.createSubmit(this,this._ib,y$P,y$P._byteLength/32*3,y$f_.create(1,0))).shaderValue.glTexture=y$n,this._submits[this._submits._length++]=y$u),y$a_.fillQuadrangleImgVb(y$P,y$c,y$e,y$Z,y$_.uv,y$X||this._curMat,this._x,this._y)}else y$u.shaderValue.fillStyle&&y$u.shaderValue.fillStyle.equal(y$_)&&y$O.ALPHA===y$s.ALPHA||(y$O.glTexture=null,(y$u=this._curSubmit=y$u_.createSubmit(this,this._ib,y$P,y$P._byteLength/32*3,y$f_.create(2,0))).shaderValue.defines.add(2),y$u.shaderValue.fillStyle=y$t.create(y$_),this._submits[this._submits._length++]=y$u),y$a_.fillQuadrangleImgVb(y$P,y$c,y$e,y$Z,y$i.DEF_UV,y$X||this._curMat,this._x,this._y);y$u._numEle+=6},y$c.drawTexture2=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){if(0!=y$u){var y$s=this._curMat;if(this._x=y$_*y$s.a+y$c*y$s.c,this._y=y$c*y$s.d+y$_*y$s.b,y$X&&(y$X=y$s.bTransform||y$X.bTransform?(y$A.mul(y$X,y$s,y$o._tmpMatrix),y$o._tmpMatrix):(this._x+=y$X.tx+y$s.tx,this._y+=y$X.ty+y$s.ty,y$A.EMPTY)),1!==y$u||y$P){var y$n=this._shader2D.ALPHA,y$m=this._nBlendType;this._shader2D.ALPHA=y$u,y$P&&(this._nBlendType=y$j.TOINT(y$P)),this._drawTextureM(y$O[0],y$O[1]-y$e,y$O[2]-y$Z,y$O[3],y$O[4],0,0,y$X,1),this._shader2D.ALPHA=y$n,this._nBlendType=y$m}else this._drawTextureM(y$O[0],y$O[1]-y$e,y$O[2]-y$Z,y$O[3],y$O[4],0,0,y$X,1);this._x=this._y=0}},y$c.drawCanvas=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$_.context;if(this._renderKey=0,y$u._targets)this._submits[this._submits._length++]=y$h_.create(y$u,0,null),this._curSubmit=y$u_.RENDERBASE,y$u._targets.drawTo(this,y$c,y$e,y$Z,y$X);else{var y$P=this._submits[this._submits._length++]=y$h_.create(y$u,this._shader2D.ALPHA,this._shader2D.filters),y$O=y$Z/y$_.width,y$s=y$X/y$_.height,y$n=y$P._matrix;this._curMat.copyTo(y$n),1!=y$O&&1!=y$s&&y$n.scale(y$O,y$s);var y$m=y$n.tx,y$H=y$n.ty;y$n.tx=y$n.ty=0,y$n.transformPoint(y$v.TEMP.setTo(y$c,y$e)),y$n.translate(y$v.TEMP.x+y$m,y$v.TEMP.y+y$H),this._curSubmit=y$u_.RENDERBASE}y$M.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=y$u._targets?"yellow":"green",this.strokeRect(y$c-1,y$e-1,y$Z+2,y$X+2,1),this.strokeRect(y$c,y$e,y$Z,y$X,1),this.restore())},y$c.drawTarget=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){void 0===y$n&&(y$n=-1);var y$m=this._vb;if(y$a_.fillRectImgVb(y$m,this._clipRect,y$c,y$e,y$Z,y$X,y$s||y$i.DEF_UV,y$u||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var y$H=this._curSubmit=y$H_.create(this,this._ib,y$m,(y$m._byteLength-64)/32*3,y$O,y$P);y$H.blendType=-1==y$n?this._nBlendType:y$n,y$H.scope=y$_,this._submits[this._submits._length++]=y$H,this._curSubmit._numEle+=6}},y$c.mixRGBandAlpha=function(y$_){return this._mixRGBandAlpha(y$_,this._shader2D.ALPHA)},y$c._mixRGBandAlpha=function(y$_,y$c){var y$e=(4278190080&y$_)>>>24;return 0!=y$e?y$e*=y$c:y$e=255*y$c,16777215&y$_|y$e<<24},y$c.drawTriangles=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){if(!y$_.loaded||!y$_.source)return this.sprite&&y$K.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;y$_.bitmap;var y$m=this._mixRGBandAlpha(4294967295,y$O),y$H=(y$Z.length,y$u.length);this._renderKey=-1;var y$B=this._curSubmit=y$R_.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,y$f_.create(1,0));return y$B.shaderValue.textureHost=y$_,y$B._renderType=10016,this._submits[this._submits._length++]=y$B,y$P?(y$o._tmpMatrix.a=y$P.a,y$o._tmpMatrix.b=y$P.b,y$o._tmpMatrix.c=y$P.c,y$o._tmpMatrix.d=y$P.d,y$o._tmpMatrix.tx=y$P.tx+y$c,y$o._tmpMatrix.ty=y$P.ty+y$e,y$A.mul(y$o._tmpMatrix,this._curMat,y$o._tmpMatrix)):(y$o._tmpMatrix.a=this._curMat.a,y$o._tmpMatrix.b=this._curMat.b,y$o._tmpMatrix.c=this._curMat.c,y$o._tmpMatrix.d=this._curMat.d,y$o._tmpMatrix.tx=this._curMat.tx+y$c,y$o._tmpMatrix.ty=this._curMat.ty+y$e),this._triangleMesh.addData(y$Z,y$X,y$u,y$o._tmpMatrix,y$m,this),this._curSubmit._numEle+=y$H,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},y$c.transform=function(y$_,y$c,y$e,y$Z,y$X,y$u){y$E.save(this),y$A.mul(y$A.TEMP.setTo(y$_,y$c,y$e,y$Z,y$X,y$u),this._curMat,this._curMat),this._curMat._checkTransform()},y$c.setTransformByMatrix=function(y$_){y$_.copyTo(this._curMat)},y$c.transformByMatrix=function(y$_){y$E.save(this),y$A.mul(y$_,this._curMat,this._curMat),this._curMat._checkTransform()},y$c.rotate=function(y$_){y$E.save(this),this._curMat.rotateEx(y$_)},y$c.scale=function(y$_,y$c){y$E.save(this),this._curMat.scaleEx(y$_,y$c)},y$c.clipRect=function(y$_,y$c,y$e,y$Z){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var y$X=y$m_.create(4);this.addRenderObject(y$X);var y$u=this._vb,y$P=y$u._byteLength>>2;if(y$a_.fillRectImgVb(y$u,null,y$_,y$c,y$e,y$Z,y$i.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var y$O=this._curSubmit=y$u_.createSubmit(this,this._ib,y$u,(y$u._byteLength-64)/32*3,y$f_.create(2,0));y$O.shaderValue.ALPHA=1,this._submits[this._submits._length++]=y$O,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var y$s=y$m_.create(5);this.addRenderObject(y$s);var y$n=y$u.getFloat32Array(),y$m=Math.min(Math.min(Math.min(y$n[0+y$P],y$n[4+y$P]),y$n[8+y$P]),y$n[12+y$P]),y$H=Math.max(Math.max(Math.max(y$n[0+y$P],y$n[4+y$P]),y$n[8+y$P]),y$n[12+y$P]),y$B=Math.min(Math.min(Math.min(y$n[1+y$P],y$n[5+y$P]),y$n[9+y$P]),y$n[13+y$P]),y$D=Math.max(Math.max(Math.max(y$n[1+y$P],y$n[5+y$P]),y$n[9+y$P]),y$n[13+y$P]);y$g.save(this,y$s,y$_,y$c,y$e,y$Z,y$m,y$B,y$H-y$m,y$D-y$B),this._curSubmit=y$u_.RENDERBASE}else{y$e*=this._curMat.a,y$Z*=this._curMat.d;var y$U=y$v.TEMP;this._curMat.transformPoint(y$U.setTo(y$_,y$c)),y$e<0&&(y$U.x=y$U.x+y$e,y$e=-y$e),y$Z<0&&(y$U.y=y$U.y+y$Z,y$Z=-y$Z),this._renderKey=0;var y$k=this._curSubmit=y$n_.create(this);(this._submits[this._submits._length++]=y$k).submitIndex=this._submits._length,y$k.submitLength=9999999,y$V.save(this,y$k);var y$a=this._clipRect,y$G=y$a.x,y$w=y$a.y,y$z=y$U.x+y$e,y$L=y$U.y+y$Z;y$G<y$U.x&&(y$a.x=y$U.x),y$w<y$U.y&&(y$a.y=y$U.y),y$a.width=Math.min(y$z,y$G+y$a.width)-y$a.x,y$a.height=Math.min(y$L,y$w+y$a.height)-y$a.y,this._shader2D.glTexture=null,y$k.clipRect.copyFrom(y$a),this._curSubmit=y$u_.RENDERBASE}},y$c.setIBVB=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m){if(void 0===y$s&&(y$s=0),void 0===y$n&&(y$n=0),void 0===y$m&&(y$m=0),null===y$e){if(y$G.isFlash){var y$H=y$Z;y$H._selfIB||(y$H._selfIB=y$d_.create(35044)),y$H._selfIB.clear(),y$e=y$H._selfIB}else y$e=this._ib;y$a_.expandIBQuadrangle(y$e,y$Z._byteLength/(4*y$Z.vertexStride*4))}if(!y$O||!y$P)throw Error("setIBVB must input:shader shaderValues");var y$B=y$s_.create(this,y$Z,y$e,y$X,y$P,y$O,y$s,y$n,y$m);y$u||(y$u=y$A.EMPTY),y$u.translate(y$_,y$c),y$A.mul(y$u,this._curMat,y$B._mat),y$u.translate(-y$_,-y$c),this._submits[this._submits._length++]=y$B,this._curSubmit=y$u_.RENDERBASE,this._renderKey=0},y$c.addRenderObject=function(y$_){this._submits[this._submits._length++]=y$_},y$c.fillTrangles=function(y$_,y$c,y$e,y$Z,y$X){var y$u=this._curSubmit,y$P=this._vb,y$O=this._shader2D,y$s=y$u.shaderValue,y$n=y$Z.length>>4,y$m=y$_.bitmap;this._renderKey=0,y$O.glTexture==y$m&&y$O.ALPHA===y$s.ALPHA||((y$u=this._curSubmit=y$u_.createSubmit(this,this._ib,y$P,y$P._byteLength/32*3,y$f_.create(1,0))).shaderValue.textureHost=y$_,this._submits[this._submits._length++]=y$u),y$a_.fillTranglesVB(y$P,y$c,y$e,y$Z,y$X||this._curMat,this._x,this._y),y$u._numEle+=6*y$n},y$c.submitElement=function(y$_,y$c){var y$e=this._submits;for(y$c<0&&(y$c=y$e._length);y$_<y$c;)y$_+=y$e[y$_].renderSubmit()},y$c.finish=function(){y$L_.mainContext.finish()},y$c.flush=function(){var y$_=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(y$_>this._ib.bufferLength/12&&y$a_.expandIBQuadrangle(this._ib,y$_),!this._isMain&&y$Q.enabled&&y$Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=y$Q._atlasRestore;for(var y$c=this._submits,y$e=0,y$Z=y$c._length;y$e<y$Z;y$e++){var y$X=y$c[y$e];10016===y$X.getRenderType()&&y$X.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),y$c_.instance&&y$c_.getInstance().reset();var y$u;for(y$e=0,y$u=this.meshlist.length;y$e<y$u;y$e++){var y$P=this.meshlist[y$e];y$P.canReuse?y$P.releaseMesh():y$P.destroy()}return this.meshlist.length=0,this._curSubmit=y$u_.RENDERBASE,this._renderKey=0,this._triangleMesh=y$i_.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},y$c.setPathId=function(y$_){if(this.mId=y$_,-1!=this.mId){this.mHaveKey=!1;var y$c=y$F.getInstance();y$c.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,y$c.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},y$c.movePath=function(y$_,y$c){var y$e=y$_,y$Z=y$c;y$_=this._curMat.a*y$e+this._curMat.c*y$Z+this._curMat.tx,y$c=this._curMat.b*y$e+this._curMat.d*y$Z+this._curMat.ty,this.mX+=y$_,this.mY+=y$c},y$c.beginPath=function(){var y$_=this._getPath();y$_.tempArray.length=0,y$_.closePath=!1,this.mX=0,this.mY=0},y$c.closePath=function(){this._path.closePath=!0},y$c.fill=function(y$_){void 0===y$_&&(y$_=!1);var y$c=this._getPath();this.drawPoly(0,0,y$c.tempArray,this.fillStyle._color.numColor,0,0,y$_)},y$c.stroke=function(){var y$_=this._getPath();if(0<this.lineWidth){if(-1==this.mId)y$_.drawLine(0,0,y$_.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var y$c=y$F.getInstance().shapeLineDic[this.mId];y$c.rebuild(y$_.tempArray),y$_.setGeomtry(y$c)}else y$F.getInstance().addLine(this.mId,y$_.drawLine(0,0,y$_.tempArray,this.lineWidth,this.strokeStyle._color.numColor));y$_.update();var y$e=[this.mX,this.mY],y$Z=y$u_.createShape(this,y$_.ib,y$_.vb,y$_.count,y$_.offset,y$f_.create(4,0));y$Z.shaderValue.ALPHA=this._shader2D.ALPHA,y$Z.shaderValue.u_pos=y$e,y$Z.shaderValue.u_mmat2=y$w_.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=y$Z,this._renderKey=-1}},y$c.line=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=this._curSubmit,y$O=this._vb;if(y$a_.fillLineVb(y$O,this._clipRect,y$_,y$c,y$e,y$Z,y$X,y$u)){this._renderKey=0;var y$s=this._shader2D,y$n=y$P.shaderValue;y$s.strokeStyle===y$n.strokeStyle&&y$s.ALPHA===y$n.ALPHA||(y$s.glTexture=null,(y$P=this._curSubmit=y$u_.createSubmit(this,this._ib,y$O,(y$O._byteLength-64)/32*3,y$f_.create(2,0))).shaderValue.strokeStyle=y$s.strokeStyle,y$P.shaderValue.mainID=2,y$P.shaderValue.ALPHA=y$s.ALPHA,this._submits[this._submits._length++]=y$P),y$P._numEle+=6}},y$c.moveTo=function(y$_,y$c,y$e){void 0===y$e&&(y$e=!0);var y$Z=this._getPath();if(y$e){var y$X=y$_,y$u=y$c;y$_=this._curMat.a*y$X+this._curMat.c*y$u,y$c=this._curMat.b*y$X+this._curMat.d*y$u}y$Z.addPoint(y$_,y$c)},y$c.lineTo=function(y$_,y$c,y$e){void 0===y$e&&(y$e=!0);var y$Z=this._getPath();if(y$e){var y$X=y$_,y$u=y$c;y$_=this._curMat.a*y$X+this._curMat.c*y$u,y$c=this._curMat.b*y$X+this._curMat.d*y$u}y$Z.addPoint(y$_,y$c)},y$c.drawCurves=function(y$_,y$c,y$e){this.setPathId(-1),this.beginPath(),this.strokeStyle=y$e[3],this.lineWidth=y$e[4];var y$Z=y$e[2];y$_+=y$e[0],y$c+=y$e[1],this.movePath(y$_,y$c),this.moveTo(y$Z[0],y$Z[1]);for(var y$X=2,y$u=y$Z.length;y$X<y$u;)this.quadraticCurveTo(y$Z[y$X++],y$Z[y$X++],y$Z[y$X++],y$Z[y$X++]);this.stroke()},y$c.arcTo=function(y$_,y$c,y$e,y$Z,y$X){if(-1==this.mId||!this.mHaveKey){var y$u=0,y$P=0,y$O=0,y$s=this._getPath();this._curMat.copyTo(y$o._tmpMatrix),y$o._tmpMatrix.tx=y$o._tmpMatrix.ty=0,y$o._tempPoint.setTo(y$s.getEndPointX(),y$s.getEndPointY()),y$o._tmpMatrix.invertTransformPoint(y$o._tempPoint);var y$n=y$o._tempPoint.x-y$_,y$m=y$o._tempPoint.y-y$c,y$H=Math.sqrt(y$n*y$n+y$m*y$m);if(!(y$H<=1e-6)){var y$B=y$n/y$H,y$D=y$m/y$H,y$U=y$e-y$_,y$k=y$Z-y$c,y$a=y$U*y$U+y$k*y$k,y$G=Math.sqrt(y$a);if(!(y$G<=1e-6)){var y$w=y$U/y$G,y$z=y$k/y$G,y$L=y$B+y$w,y$q=y$D+y$z,y$K=Math.sqrt(y$L*y$L+y$q*y$q);if(!(y$K<=1e-6)){var y$M=y$L/y$K,y$f=y$q/y$K,y$A=Math.acos(y$M*y$B+y$f*y$D),y$v=Math.PI/2-y$A,y$r=(y$H=y$X/Math.tan(y$v))*y$B+y$_,y$C=y$H*y$D+y$c,y$y=Math.sqrt(y$H*y$H+y$X*y$X),y$$=y$_+y$M*y$y,y$T=y$c+y$f*y$y,y$h=0,y$R=0;if(0<=y$B*y$z-y$D*y$w){var y$i=2*y$v/y$o.SEGNUM;y$h=Math.sin(y$i),y$R=Math.cos(y$i)}else y$i=2*-y$v/y$o.SEGNUM,y$h=Math.sin(y$i),y$R=Math.cos(y$i);y$P=this._curMat.a*y$r+this._curMat.c*y$C,y$O=this._curMat.b*y$r+this._curMat.d*y$C,y$P==this._path.getEndPointX()&&y$O==this._path.getEndPointY()||y$s.addPoint(y$P,y$O);var y$x=y$r-y$$,y$F=y$C-y$T;for(y$u=0;y$u<y$o.SEGNUM;y$u++){var y$Y=y$x*y$R+y$F*y$h,y$p=-y$x*y$h+y$F*y$R;y$P=y$Y+y$$,y$O=y$p+y$T,y$_=this._curMat.a*y$P+this._curMat.c*y$O,y$O=y$c=this._curMat.b*y$P+this._curMat.d*y$O,(y$P=y$_)==this._path.getEndPointX()&&y$O==this._path.getEndPointY()||y$s.addPoint(y$P,y$O),y$x=y$Y,y$F=y$p}}}}}},y$c.arc=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){if(void 0===y$u&&(y$u=!1),void 0===y$P&&(y$P=!0),-1!=this.mId){var y$O=y$F.getInstance().shapeDic[this.mId];if(y$O&&this.mHaveKey&&!y$O.needUpdate(this._curMat))return;y$c=y$_=0}var y$s,y$n=0,y$m=0,y$H=0,y$B=0,y$D=0,y$U=0,y$k=0;if(y$m=y$X-y$Z,y$u)if(Math.abs(y$m)>=2*Math.PI)y$m=2*-Math.PI;else for(;0<y$m;)y$m-=2*Math.PI;else if(Math.abs(y$m)>=2*Math.PI)y$m=2*Math.PI;else for(;y$m<0;)y$m+=2*Math.PI;y$s=y$m/(y$k=y$e<101?Math.max(10,y$m*y$e/5):y$e<201?Math.max(10,y$m*y$e/20):Math.max(10,y$m*y$e/40))/2,y$H=Math.abs(4/3*(1-Math.cos(y$s))/Math.sin(y$s)),y$u&&(y$H=-y$H);var y$a=this._getPath(),y$G=NaN,y$w=NaN;for(y$U=0;y$U<=y$k;y$U++)y$n=y$Z+y$m*(y$U/y$k),y$B=y$_+Math.cos(y$n)*y$e,y$D=y$c+Math.sin(y$n)*y$e,y$P&&(y$G=y$B,y$w=y$D,y$B=this._curMat.a*y$G+this._curMat.c*y$w,y$D=this._curMat.b*y$G+this._curMat.d*y$w),y$B==this._path.getEndPointX()&&y$D==this._path.getEndPointY()||y$a.addPoint(y$B,y$D);y$B=y$_+Math.cos(y$X)*y$e,y$D=y$c+Math.sin(y$X)*y$e,y$P&&(y$G=y$B,y$w=y$D,y$B=this._curMat.a*y$G+this._curMat.c*y$w,y$D=this._curMat.b*y$G+this._curMat.d*y$w),y$B==this._path.getEndPointX()&&y$D==this._path.getEndPointY()||y$a.addPoint(y$B,y$D)},y$c.quadraticCurveTo=function(y$_,y$c,y$e,y$Z){var y$X=y$H.I,y$u=y$e,y$P=y$Z;y$e=this._curMat.a*y$u+this._curMat.c*y$P,y$Z=this._curMat.b*y$u+this._curMat.d*y$P,y$u=y$_,y$P=y$c,y$_=this._curMat.a*y$u+this._curMat.c*y$P,y$c=this._curMat.b*y$u+this._curMat.d*y$P;for(var y$O=y$X.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),y$_,y$c,y$e,y$Z],30,2),y$s=0,y$n=y$O.length/2;y$s<y$n;y$s++)this.lineTo(y$O[2*y$s],y$O[2*y$s+1],!1);this.lineTo(y$e,y$Z,!1)},y$c.rect=function(y$_,y$c,y$e,y$Z){this._other=this._other.make(),this._other.path||(this._other.path=new y$b),this._other.path.rect(y$_,y$c,y$e,y$Z)},y$c.strokeRect=function(y$_,y$c,y$e,y$Z,y$X){var y$u=.5*y$X;this.line(y$_-y$u,y$c,y$_+y$e+y$u,y$c,y$X,this._curMat),this.line(y$_+y$e,y$c,y$_+y$e,y$c+y$Z,y$X,this._curMat),this.line(y$_,y$c,y$_,y$c+y$Z,y$X,this._curMat),this.line(y$_-y$u,y$c+y$Z,y$_+y$e+y$u,y$c+y$Z,y$X,this._curMat)},y$c.clip=function(){},y$c.drawPoly=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){void 0===y$P&&(y$P=!1),this._renderKey=0,this._shader2D.glTexture=null;var y$O=this._getPath();if(-1==this.mId)y$O.polygon(y$_,y$c,y$e,y$Z,y$X||1,y$u);else if(this.mHaveKey){var y$s=y$F.getInstance().shapeDic[this.mId];y$s.setMatrix(this._curMat),y$s.rebuild(y$O.tempArray),y$O.setGeomtry(y$s)}else{var y$n=y$O.polygon(y$_,y$c,y$e,y$Z,y$X||1,y$u);y$F.getInstance().addShape(this.mId,y$n),y$n.setMatrix(this._curMat)}y$O.update();var y$m,y$H=[this.mX,this.mY];if((y$m=y$u_.createShape(this,y$O.ib,y$O.vb,y$O.count,y$O.offset,y$f_.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,y$m.shaderValue.u_pos=y$H,y$m.shaderValue.u_mmat2=y$w_.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=y$m,0<y$X){if(this.mHaveLineKey){var y$B=y$F.getInstance().shapeLineDic[this.mId];y$B.rebuild(y$O.tempArray),y$O.setGeomtry(y$B)}else y$F.getInstance().addShape(this.mId,y$O.drawLine(y$_,y$c,y$e,y$X,y$u));y$O.update(),(y$m=y$u_.createShape(this,y$O.ib,y$O.vb,y$O.count,y$O.offset,y$f_.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,y$m.shaderValue.u_mmat2=y$w_.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=y$m}},y$c.drawParticle=function(y$_,y$c,y$e){y$e.x=y$_,y$e.y=y$c,this._submits[this._submits._length++]=y$e},y$c._getPath=function(){return this._path||(this._path=new y$b)},y$Z(0,y$c,"globalCompositeOperation",function(){return y$j.NAMES[this._nBlendType]},function(y$_){var y$c=y$j.TOINT[y$_];null==y$c||this._nBlendType===y$c||(y$N.save(this,65536,this,!0),this._curSubmit=y$u_.RENDERBASE,this._renderKey=0,this._nBlendType=y$c)}),y$Z(0,y$c,"strokeStyle",function(){return this._shader2D.strokeStyle},function(y$_){this._shader2D.strokeStyle.equal(y$_)||(y$N.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=y$t.create(y$_))}),y$Z(0,y$c,"globalAlpha",function(){return this._shader2D.ALPHA},function(y$_){(y$_=Math.floor(1e3*y$_)/1e3)!=this._shader2D.ALPHA&&(y$N.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=y$_)}),y$Z(0,y$c,"asBitmap",null,function(y$_){if(y$_){if(this._targets||(this._targets=new y$l),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),y$Z(0,y$c,"fillStyle",function(){return this._shader2D.fillStyle},function(y$_){this._shader2D.fillStyle.equal(y$_)||(y$N.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=y$t.create(y$_))}),y$Z(0,y$c,"textAlign",function(){return this._other.textAlign},function(y$_){this._other.textAlign===y$_||(this._other=this._other.make(),y$N.save(this,32768,this._other,!1),this._other.textAlign=y$_)}),y$Z(0,y$c,"lineWidth",function(){return this._other.lineWidth},function(y$_){this._other.lineWidth===y$_||(this._other=this._other.make(),y$N.save(this,256,this._other,!1),this._other.lineWidth=y$_)}),y$Z(0,y$c,"textBaseline",function(){return this._other.textBaseline},function(y$_){this._other.textBaseline===y$_||(this._other=this._other.make(),y$N.save(this,16384,this._other,!1),this._other.textBaseline=y$_)}),y$Z(0,y$c,"font",null,function(y$_){y$_!=this._other.font.toString()&&(this._other=this._other.make(),y$N.save(this,8,this._other,!1),this._other.font===y$U_.EMPTY?this._other.font=new y$U_(y$_):this._other.font.setFont(y$_))}),y$o.__init__=function(){y$e.DEFAULT=new y$e},y$o._tempPoint=new y$v,y$o._SUBMITVBSIZE=32e3,y$o._MAXSIZE=99999999,y$o._RECTVBSIZE=16,y$o.MAXCLIPRECT=new y$r(0,0,99999999,99999999),y$o._COUNT=0,y$o._tmpMatrix=new y$A,y$o.SEGNUM=32,y$o._contextcount=0,y$P(y$o,["_fontTemp",function(){return this._fontTemp=new y$U_},"_drawStyleTemp",function(){return this._drawStyleTemp=new y$t(null)}]),y$o.__init$=function(){y$e=function(){function y$_(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=y$U_.EMPTY}y$B(y$_,"");var y$c=y$_.prototype;return y$c.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=y$U_.EMPTY},y$c.make=function(){return this===y$_.DEFAULT?new y$_:this},y$_.DEFAULT=null,y$_}()},y$o}(),y$f_=function(y$_){function y$Z(y$_,y$c){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,y$Z.__super.call(this),this.defines=new y$C_,this.position=y$Z._POSITION,this.mainID=y$_,this.subID=y$c,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=y$_|y$c,this._inClassCache=y$Z._cache[this._cacheID],0<y$_&&!this._inClassCache&&(this._inClassCache=y$Z._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}y$B(y$Z,"laya.webgl.shader.d2.value.Value2D",y$p);var y$c=y$Z.prototype;return y$c.setValue=function(y$_){},y$c.refresh=function(){var y$_=this.size;return y$_[0]=y$w_.width,y$_[1]=y$w_.height,this.alpha=this.ALPHA*y$w_.worldAlpha,this.mmat=y$w_.worldMatrix4,this},y$c._ShaderWithCompile=function(){return y$S_.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,y$l_.create)},y$c._withWorldShaderDefines=function(){var y$_=y$w_.worldShaderDefines,y$c=y$S_.sharders[this.mainID|this.defines._value|y$_.getValue()];if(!y$c){var y$e,y$Z={};for(y$e in this.defines.toNameDic())y$Z[y$e]="";for(y$e in y$_.toNameDic())y$Z[y$e]="";y$c=y$S_.withCompile2D(0,this.mainID,y$Z,this.mainID|this.defines._value|y$_.getValue(),y$l_.create)}var y$X=y$w_.worldFilters;if(!y$X)return y$c;for(var y$u,y$P=y$X.length,y$O=0;y$O<y$P;y$O++)(y$u=y$X[y$O])&&y$u.action.setValue(this);return y$c},y$c.upload=function(){var y$_=y$w_;this.alpha=this.ALPHA*y$_.worldAlpha,y$w_.worldMatrix4!==y$w_.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),y$L_.shaderHighPrecision&&this.defines.add(1024);var y$c,y$e=y$_.worldShaderDefines?this._withWorldShaderDefines():y$S_.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=y$_.width,this.size[1]=y$_.height,this.mmat=y$_.worldMatrix4,y$x_.activeShader!==y$e?y$e._shaderValueWidth!==y$_.width||y$e._shaderValueHeight!==y$_.height?(y$e._shaderValueWidth=y$_.width,y$e._shaderValueHeight=y$_.height):y$c=y$e._params2dQuick2||y$e._make2dQuick2():y$e._shaderValueWidth!==y$_.width||y$e._shaderValueHeight!==y$_.height?(y$e._shaderValueWidth=y$_.width,y$e._shaderValueHeight=y$_.height):y$c=y$e._params2dQuick1||y$e._make2dQuick1(),y$e.upload(this,y$c)},y$c.setFilters=function(y$_){if(this.filters=y$_)for(var y$c,y$e=y$_.length,y$Z=0;y$Z<y$e;y$Z++)(y$c=y$_[y$Z])&&(this.defines.add(y$c.type),y$c.action.setValue(this))},y$c.clear=function(){this.defines.setValue(this.subID)},y$c.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},y$Z._initone=function(y$_,y$c){y$Z._typeClass[y$_]=y$c,y$Z._cache[y$_]=[],y$Z._cache[y$_]._length=0},y$Z.__init__=function(){y$Z._POSITION=[2,5126,!1,4*y$k_.BYTES_PE,0],y$Z._TEXCOORD=[2,5126,!1,4*y$k_.BYTES_PE,2*y$k_.BYTES_PE],y$Z._initone(2,y$o_),y$Z._initone(4,y$j_),y$Z._initone(256,y$Q_),y$Z._initone(512,y$p_),y$Z._initone(1,y$J_),y$Z._initone(65,y$W_),y$Z._initone(9,y$J_)},y$Z.create=function(y$_,y$c){var y$e=y$Z._cache[y$_|y$c];return y$e._length?y$e[--y$e._length]:new y$Z._typeClass[y$_|y$c](y$c)},y$Z._POSITION=null,y$Z._TEXCOORD=null,y$Z._cache=[],y$Z._typeClass=[],y$Z.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y$Z}(),y$A_=function(y$_){function y$a(y$_,y$c){y$a.__super.call(this,y$_,y$c)}y$B(y$a,"laya.webgl.utils.RenderSprite3D",y$w);var y$c=y$a.prototype;return y$c.onCreate=function(y$_){switch(y$_){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},y$c._mask=function(y$_,y$c,y$e,y$Z){var y$X,y$u,y$P=this._next,y$O=y$_.mask;if(y$O){y$c.ctx.save();var y$s=y$c.ctx.globalCompositeOperation,y$n=new y$r;if(y$n.copyFrom(y$O.getBounds()),y$n.width=Math.round(y$n.width),y$n.height=Math.round(y$n.height),y$n.x=Math.round(y$n.x),y$n.y=Math.round(y$n.y),0<y$n.width&&0<y$n.height){var y$m=y$_._style._tf,y$H=y$O_.create();y$H.addValue("bounds",y$n),y$X=y$P_.create([y$H,y$c],laya.webgl.utils.RenderSprite3D.tmpTarget),y$c.addRenderObject(y$X),y$O.render(y$c,-y$n.x,-y$n.y),y$X=y$P_.create([y$H],laya.webgl.utils.RenderSprite3D.endTmpTarget),y$c.addRenderObject(y$X),y$c.ctx.save(),y$c.clipRect(y$e-y$m.translateX+y$n.x,y$Z-y$m.translateY+y$n.y,y$n.width,y$n.height),y$P._fun.call(y$P,y$_,y$c,y$e,y$Z),y$c.ctx.restore(),y$u=y$m_.create(6),y$s=y$c.ctx.globalCompositeOperation,y$u.blendMode="mask",y$c.addRenderObject(y$u),y$A.TEMP.identity();var y$B=y$f_.create(1,0),y$D=y$i.INV_UV,y$U=y$n.width,y$k=y$n.height;(y$n.width<32||y$n.height<32)&&((y$D=y$a.tempUV)[0]=0,y$D[1]=0,y$D[2]=32<=y$n.width?1:y$n.width/32,y$D[3]=0,y$D[4]=32<=y$n.width?1:y$n.width/32,y$D[5]=32<=y$n.height?1:y$n.height/32,y$D[6]=0,y$D[7]=32<=y$n.height?1:y$n.height/32,y$n.width=32<=y$n.width?y$n.width:32,y$n.height=32<=y$n.height?y$n.height:32,y$D[1]*=-1,y$D[3]*=-1,y$D[5]*=-1,y$D[7]*=-1,y$D[1]+=1,y$D[3]+=1,y$D[5]+=1,y$D[7]+=1),y$c.ctx.drawTarget(y$H,y$e+y$n.x-y$m.translateX,y$Z+y$n.y-y$m.translateY,y$U,y$k,y$A.TEMP,"tmpTarget",y$B,y$D,6),y$X=y$P_.create([y$H],laya.webgl.utils.RenderSprite3D.recycleTarget),y$c.addRenderObject(y$X),(y$u=y$m_.create(6)).blendMode=y$s,y$c.addRenderObject(y$u)}y$c.ctx.restore()}else y$P._fun.call(y$P,y$_,y$c,y$e,y$Z)},y$c._blend=function(y$_,y$c,y$e,y$Z){var y$X=y$_._style,y$u=this._next;y$X.blendMode?(y$c.ctx.save(),y$c.ctx.globalCompositeOperation=y$X.blendMode,y$u._fun.call(y$u,y$_,y$c,y$e,y$Z),y$c.ctx.restore()):y$u._fun.call(y$u,y$_,y$c,y$e,y$Z)},y$c._transform=function(y$_,y$c,y$e,y$Z){var y$X=y$_.transform,y$u=this._next;if(y$X&&y$u!=y$w.NORENDER){var y$P=y$c.ctx;y$_._style;y$X.tx=y$e,y$X.ty=y$Z;var y$O=y$P._getTransformMatrix(),y$s=y$O.clone();y$A.mul(y$X,y$O,y$O),y$O._checkTransform(),y$X.tx=y$X.ty=0,y$u._fun.call(y$u,y$_,y$c,0,0),y$s.copyTo(y$O),y$s.destroy()}else y$u._fun.call(y$u,y$_,y$c,y$e,y$Z)},y$a.tmpTarget=function(y$_,y$c){var y$e=y$_.getValue("bounds"),y$Z=y$F_.create(y$e.width,y$e.height);y$Z.start(),y$Z.clear(0,0,0,0),y$_.addValue("tmpTarget",y$Z)},y$a.endTmpTarget=function(y$_){y$_.getValue("tmpTarget").end()},y$a.recycleTarget=function(y$_){y$_.getValue("tmpTarget").recycle(),y$_.recycle()},y$P(y$a,["tempUV",function(){return this.tempUV=new Array(8)}]),y$a}(),y$v_=function(y$_){function y$c(){this.data=null,y$c.__super.call(this)}y$B(y$c,"laya.filters.webgl.ColorFilterActionGL",y$Y);var y$e=y$c.prototype;return y$K.imps(y$e,{"laya.filters.IFilterActionGL":!0}),y$e.setValue=function(y$_){y$_.colorMat=this.data._mat,y$_.colorAlpha=this.data._alpha},y$e.apply3d=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$_.getValue("bounds"),y$P=y$f_.create(1,0);y$P.setFilters([this.data]);var y$O=y$A.TEMP;y$O.identity(),y$e.ctx.drawTarget(y$_,0,0,y$u.width,y$u.height,y$O,"src",y$P)},y$c}(),y$r_=function(y$_){function y$u(y$_,y$c,y$e,y$Z,y$X){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,y$u.__super.call(this,y$_,y$c,y$X),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new y$t_,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=y$e,this._atlasCanvas.height=y$Z,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}y$B(y$u,"laya.webgl.atlas.Atlaser",y$o);var y$c=y$u.prototype;return y$c.computeUVinAtlasTexture=function(y$_,y$c,y$e,y$Z){var y$X=y$Q.atlasTextureWidth,y$u=y$Q.atlasTextureHeight,y$P=y$e/y$X,y$O=y$Z/y$u,y$s=(y$e+y$_.bitmap.width)/y$X,y$n=(y$Z+y$_.bitmap.height)/y$u,y$m=y$_.bitmap.width/y$X,y$H=y$_.bitmap.height/y$u;y$_.uv=[y$P+y$c[0]*y$m,y$O+y$c[1]*y$H,y$s-(1-y$c[2])*y$m,y$O+y$c[3]*y$H,y$s-(1-y$c[4])*y$m,y$n-(1-y$c[5])*y$H,y$P+y$c[6]*y$m,y$n-(1-y$c[7])*y$H]},y$c.findBitmapIsExist=function(y$_){if(y$_ instanceof laya.webgl.resource.WebGLImage){var y$c=y$_,y$e=y$c.url,y$Z=this._InAtlasWebGLImagesKey[y$e||y$c.id];if(y$Z)return y$Z.offsetInfoID}return-1},y$c.addToAtlasTexture=function(y$_,y$c,y$e){if(y$_ instanceof laya.webgl.resource.WebGLImage){var y$Z=y$_,y$X=y$Z.url;this._InAtlasWebGLImagesKey[y$X||y$Z.id]={bitmap:y$_,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([y$c,y$e])}this._atlasCanvas.texSubImage2D(y$c,y$e,y$_.atlasSource),y$_.clearAtlasSource()},y$c.addToAtlas=function(y$_,y$c,y$e){y$_._atlasID=this._inAtlasTextureKey.length;var y$Z=y$_.uv.slice(),y$X=y$_.bitmap;this._inAtlasTextureKey.push(y$_),this._inAtlasTextureOriUVValue.push(y$Z),this._inAtlasTextureBitmapValue.push(y$X),this.computeUVinAtlasTexture(y$_,y$Z,y$c,y$e),y$_.bitmap=this._atlasCanvas},y$c.clear=function(){for(var y$_=0,y$c=this._inAtlasTextureKey.length;y$_<y$c;y$_++)this._inAtlasTextureKey[y$_].bitmap=this._inAtlasTextureBitmapValue[y$_],this._inAtlasTextureKey[y$_].uv=this._inAtlasTextureOriUVValue[y$_],this._inAtlasTextureKey[y$_]._atlasID=-1,this._inAtlasTextureKey[y$_].bitmap.lock=!1,this._inAtlasTextureKey[y$_].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},y$c.dispose=function(){this.clear(),this._atlasCanvas.destroy()},y$Z(0,y$c,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),y$Z(0,y$c,"texture",function(){return this._atlasCanvas}),y$Z(0,y$c,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),y$u}(),y$C_=function(y$_){function y$e(){y$e.__super.call(this,y$e.__name2int,y$e.__int2name,y$e.__int2nameMap)}return y$B(y$e,"laya.webgl.shader.d2.ShaderDefines2D",y$I),y$e.__init__=function(){y$e.reg("TEXTURE2D",1),y$e.reg("COLOR2D",2),y$e.reg("PRIMITIVE",4),y$e.reg("GLOW_FILTER",8),y$e.reg("BLUR_FILTER",16),y$e.reg("COLOR_FILTER",32),y$e.reg("COLOR_ADD",64),y$e.reg("WORLDMAT",128),y$e.reg("FILLTEXTURE",256),y$e.reg("FSHIGHPRECISION",1024),y$e.reg("TXTALPHA",2048),y$e.reg("TXTCOMPRESS",4096)},y$e.reg=function(y$_,y$c){y$I._reg(y$_,y$c,y$e.__name2int,y$e.__int2name)},y$e.toText=function(y$_,y$c,y$e){return y$I._toText(y$_,y$c,y$e)},y$e.toInt=function(y$_){return y$I._toInt(y$_,y$e.__name2int)},y$e.TEXTURE2D=1,y$e.COLOR2D=2,y$e.PRIMITIVE=4,y$e.FILTERGLOW=8,y$e.FILTERBLUR=16,y$e.FILTERCOLOR=32,y$e.COLORADD=64,y$e.WORLDMAT=128,y$e.FILLTEXTURE=256,y$e.SKINMESH=512,y$e.SHADERDEFINE_FSHIGHPRECISION=1024,y$e.TXTALPHA=2048,y$e.TXTCOMPRESS=4096,y$e.__name2int={},y$e.__int2name=[],y$e.__int2nameMap=[],y$e}(),y$y_=(function(y$_){function y$O(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$O.__super.call(this,y$_,y$c,y$e,y$Z,40,y$X,y$u,y$P)}y$B(y$O,"laya.webgl.shapes.Ellipse",y$e_)}(),function(y$_){function y$u(y$_,y$c,y$e,y$Z,y$X){this._points=[],this.rebuild(y$e),y$u.__super.call(this,y$_,y$c,0,0,0,y$X,y$Z,y$X,0)}y$B(y$u,"laya.webgl.shapes.Line",y$e_);var y$c=y$u.prototype;return y$c.rebuild=function(y$_){var y$c=y$_.length;y$c!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(y$c/2-1)),this.mFloat32Array=new Float32Array(5*y$c)),this._points.length=0;for(var y$e=NaN,y$Z=NaN,y$X=-1,y$u=-1,y$P=y$_.length/2,y$O=0;y$O<y$P;y$O++)y$e=y$_[2*y$O],y$Z=y$_[2*y$O+1],(.01<Math.abs(y$X-y$e)||.01<Math.abs(y$u-y$Z))&&this._points.push(y$e,y$Z),y$X=y$e,y$u=y$Z},y$c.getData=function(y$_,y$c,y$e){var y$Z=[],y$X=[];0<this.borderWidth&&this.createLine2(this._points,y$Z,this.borderWidth,y$e,y$X,this._points.length/2),this.mUint16Array.set(y$Z,0),this.mFloat32Array.set(y$X,0),y$_.append(this.mUint16Array),y$c.append(this.mFloat32Array)},y$u}()),y$$_=function(y$_){function y$H(y$_,y$c,y$e,y$Z,y$X){this._points=[];for(var y$u=NaN,y$P=NaN,y$O=-1,y$s=-1,y$n=y$e.length/2-1,y$m=0;y$m<y$n;y$m++)y$u=y$e[2*y$m],y$P=y$e[2*y$m+1],(.01<Math.abs(y$O-y$u)||.01<Math.abs(y$s-y$P))&&this._points.push(y$u,y$P),y$O=y$u,y$s=y$P;y$u=y$e[2*y$n],y$P=y$e[2*y$n+1],y$O=this._points[0],y$s=this._points[1],(.01<Math.abs(y$O-y$u)||.01<Math.abs(y$s-y$P))&&this._points.push(y$u,y$P),y$H.__super.call(this,y$_,y$c,0,0,this._points.length/2,0,y$Z,y$X)}y$B(y$H,"laya.webgl.shapes.LoopLine",y$e_);var y$c=y$H.prototype;return y$c.getData=function(y$_,y$c,y$e){if(0<this.borderWidth){for(var y$Z=this.color,y$X=(y$Z>>16&255)/255,y$u=(y$Z>>8&255)/255,y$P=(255&y$Z)/255,y$O=[],y$s=0,y$n=0,y$m=[],y$H=Math.floor(this._points.length/2),y$B=0;y$B<y$H;y$B++)y$s=this._points[2*y$B],y$n=this._points[2*y$B+1],y$O.push(this.x+y$s,this.y+y$n,y$X,y$u,y$P);this.createLoopLine(y$O,y$m,this.borderWidth,y$e+y$O.length/5),y$_.append(new Uint16Array(y$m)),y$c.append(new Float32Array(y$O))}},y$c.createLoopLine=function(y$_,y$c,y$e,y$Z,y$X,y$u){y$_.length;var y$P=y$_.concat(),y$O=y$X||y$_,y$s=this.borderColor,y$n=(y$s>>16&255)/255,y$m=(y$s>>8&255)/255,y$H=(255&y$s)/255,y$B=[y$P[0],y$P[1]],y$D=[y$P[y$P.length-5],y$P[y$P.length-4]],y$U=y$D[0]+.5*(y$B[0]-y$D[0]),y$k=y$D[1]+.5*(y$B[1]-y$D[1]);y$P.unshift(y$U,y$k,0,0,0),y$P.push(y$U,y$k,0,0,0);var y$a,y$G,y$w,y$z,y$L,y$q,y$K,y$M,y$f,y$A,y$v,y$r,y$C,y$y,y$$,y$T,y$h,y$R,y$i,y$x,y$F=y$P.length/5,y$Y=y$Z,y$p=y$e/2;y$w=y$P[0],y$z=y$P[1],y$A=y$w-(y$L=y$P[5]),y$f=(y$f=-(y$z-(y$q=y$P[6])))/(y$x=Math.sqrt(y$f*y$f+y$A*y$A))*y$p,y$A=y$A/y$x*y$p,y$O.push(y$w-y$f,y$z-y$A,y$n,y$m,y$H,y$w+y$f,y$z+y$A,y$n,y$m,y$H);for(var y$o=1;y$o<y$F-1;y$o++)y$w=y$P[5*(y$o-1)],y$z=y$P[5*(y$o-1)+1],y$L=y$P[5*y$o],y$q=y$P[5*y$o+1],y$K=y$P[5*(y$o+1)],y$M=y$P[5*(y$o+1)+1],y$A=y$w-y$L,y$r=y$L-y$K,y$$=(-(y$f=(y$f=-(y$z-y$q))/(y$x=Math.sqrt(y$f*y$f+y$A*y$A))*y$p)+y$w)*(-(y$A=y$A/y$x*y$p)+y$q)-(-y$f+y$L)*(-y$A+y$z),y$R=(-(y$v=(y$v=-(y$q-y$M))/(y$x=Math.sqrt(y$v*y$v+y$r*y$r))*y$p)+y$K)*(-(y$r=y$r/y$x*y$p)+y$q)-(-y$v+y$L)*(-y$r+y$M),y$i=(y$C=-y$A+y$z-(-y$A+y$q))*(y$h=-y$v+y$L-(-y$v+y$K))-(y$T=-y$r+y$M-(-y$r+y$q))*(y$y=-y$f+y$L-(-y$f+y$w)),Math.abs(y$i)<.1?(y$i+=10.1,y$O.push(y$L-y$f,y$q-y$A,y$n,y$m,y$H,y$L+y$f,y$q+y$A,y$n,y$m,y$H)):(((y$a=(y$y*y$R-y$h*y$$)/y$i)-y$L)*(y$a-y$L)+((y$G=(y$T*y$$-y$C*y$R)/y$i)-y$q)+(y$G-y$q),y$O.push(y$a,y$G,y$n,y$m,y$H,y$L-(y$a-y$L),y$q-(y$G-y$q),y$n,y$m,y$H));y$u&&(y$c=y$u);var y$Q=this.edges+1;for(y$o=1;y$o<y$Q;y$o++)y$c.push(y$Y+2*(y$o-1),y$Y+2*(y$o-1)+1,y$Y+2*y$o+1,y$Y+2*y$o+1,y$Y+2*y$o,y$Y+2*(y$o-1));return y$c.push(y$Y+2*(y$o-1),y$Y+2*(y$o-1)+1,y$Y+1,y$Y+1,y$Y,y$Y+2*(y$o-1)),y$O},y$H}(),y$T_=function(y$_){function y$P(y$_,y$c,y$e,y$Z,y$X,y$u){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=y$A.create(),this._points=y$e.slice(0,y$e.length),y$P.__super.call(this,y$_,y$c,0,0,this._points.length/2,y$Z,y$X,y$u)}y$B(y$P,"laya.webgl.shapes.Polygon",y$e_);var y$c=y$P.prototype;return y$c.rebuild=function(y$_){this._repaint||(this._points.length=0,this._points=this._points.concat(y$_))},y$c.setMatrix=function(y$_){y$_.copyTo(this._mat)},y$c.needUpdate=function(y$_){return this._repaint=this._mat.a==y$_.a&&this._mat.b==y$_.b&&this._mat.c==y$_.c&&this._mat.d==y$_.d&&this._mat.tx==y$_.tx&&this._mat.ty==y$_.ty,!this._repaint},y$c.getData=function(y$_,y$c,y$e){var y$Z,y$X=0,y$u=this._points,y$P=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=y$e){for(this._start=y$e,y$Z=[],y$P=this.earcutTriangles.length,y$X=0;y$X<y$P;y$X++)y$Z.push(this.earcutTriangles[y$X]+y$e);this.mUint16Array=new Uint16Array(y$Z)}}else{this._start=y$e,y$Z=[];var y$O=[],y$s=[],y$n=this.color,y$m=(y$n>>16&255)/255,y$H=(y$n>>8&255)/255,y$B=(255&y$n)/255;for(y$P=Math.floor(y$u.length/2),y$X=0;y$X<y$P;y$X++)y$O.push(this.x+y$u[2*y$X],this.y+y$u[2*y$X+1],y$m,y$H,y$B),y$s.push(this.x+y$u[2*y$X],this.y+y$u[2*y$X+1]);for(this.earcutTriangles=y$Z_.earcut(y$s,null,2),y$P=this.earcutTriangles.length,y$X=0;y$X<y$P;y$X++)y$Z.push(this.earcutTriangles[y$X]+y$e);this.mUint16Array=new Uint16Array(y$Z),this.mFloat32Array=new Float32Array(y$O)}y$_.append(this.mUint16Array),y$c.append(this.mFloat32Array)},y$P}(),y$h_=function(y$_){function y$u(){this._matrix=new y$A,this._matrix4=y$k_.defaultMatrix4.concat(),y$u.__super.call(this,1e4),this.shaderValue=new y$f_(0,0)}y$B(y$u,"laya.webgl.submit.SubmitCanvas",y$u_);var y$c=y$u.prototype;return y$c.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var y$_=y$w_.worldAlpha,y$c=y$w_.worldMatrix4,y$e=y$w_.worldMatrix,y$Z=y$w_.worldFilters,y$X=y$w_.worldShaderDefines,y$u=this.shaderValue,y$P=this._matrix,y$O=this._matrix4,y$s=y$A.TEMP;return y$A.mul(y$P,y$e,y$s),y$O[0]=y$s.a,y$O[1]=y$s.b,y$O[4]=y$s.c,y$O[5]=y$s.d,y$O[12]=y$s.tx,y$O[13]=y$s.ty,y$w_.worldMatrix=y$s.clone(),y$w_.worldMatrix4=y$O,y$w_.worldAlpha=y$w_.worldAlpha*y$u.alpha,y$u.filters&&y$u.filters.length&&(y$w_.worldFilters=y$u.filters,y$w_.worldShaderDefines=y$u.defines),this._ctx_src.flush(),y$w_.worldAlpha=y$_,y$w_.worldMatrix4=y$c,y$w_.worldMatrix.destroy(),y$w_.worldMatrix=y$e,y$w_.worldFilters=y$Z,y$w_.worldShaderDefines=y$X,1},y$c.releaseRender=function(){var y$_=y$u._cache;this._ctx_src=null,y$_[y$_._length++]=this},y$c.getRenderType=function(){return 10003},y$u.create=function(y$_,y$c,y$e){var y$Z=y$u._cache._length?y$u._cache[--y$u._cache._length]:new y$u;y$Z._ctx_src=y$_;var y$X=y$Z.shaderValue;return y$X.alpha=y$c,y$X.defines.setValue(0),y$e&&y$e.length&&y$X.setFilters(y$e),y$Z},y$u._cache=((y$u._cache=[])._length=0,y$u._cache),y$u}(),y$R_=function(y$_){function y$n(y$_){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===y$_&&(y$_=1e4),y$n.__super.call(this,y$_)}y$B(y$n,"laya.webgl.submit.SubmitTexture",y$u_);var y$c=y$n.prototype;return y$c.releaseRender=function(){var y$_=y$n._cache;(y$_[y$_._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},y$c.addTexture=function(y$_,y$c){this._texsID[this._texs.length]=y$_._uvID,this._texs.push(y$_),this._vbPos.push(y$c)},y$c.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var y$_=this.shaderValue.textureHost.bitmap;if(null!==y$_)for(var y$c=this._vb.getFloat32Array(),y$e=0,y$Z=this._texs.length;y$e<y$Z;y$e++){var y$X=this._texs[y$e];y$X.active();var y$u=y$X.uv;if(this._texsID[y$e]!==y$X._uvID){this._texsID[y$e]=y$X._uvID;var y$P=this._vbPos[y$e];y$c[y$P+2]=y$u[0],y$c[y$P+3]=y$u[1],y$c[y$P+6]=y$u[2],y$c[y$P+7]=y$u[3],y$c[y$P+10]=y$u[4],y$c[y$P+11]=y$u[5],y$c[y$P+14]=y$u[6],y$c[y$P+15]=y$u[7],this._vb.setNeedUpload()}y$X.bitmap!==y$_&&(this._isSameTexture=!1)}}},y$c.renderSubmit=function(){if(0===this._numEle)return y$n._shaderSet=!1,1;var y$_=this.shaderValue.textureHost;if(y$_){var y$c=y$_.source;if(!y$_.bitmap||!y$c)return y$n._shaderSet=!1,1;this.shaderValue.texture=y$c,y$_.alphaTexture&&y$_.alphaTexture.source&&(this.shaderValue.texture1=y$_.alphaTexture.source)}this._vb.bind_upload(this._ib);var y$e=y$L_.mainContext;if(y$j.activeBlendFunction!==this._blendFn&&(y$e.enable(3042),this._blendFn(y$e),y$j.activeBlendFunction=this._blendFn),y$$.drawCall++,y$$.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&y$x_.activeShader&&y$n._shaderSet?(y$x_.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&y$x_.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),y$n._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var y$Z=y$_.bitmap,y$X=0,y$u=y$x_.activeShader,y$P=0,y$O=this._texs.length;y$P<y$O;y$P++){var y$s=this._texs[y$P];y$s.bitmap===y$Z&&y$P+1!==y$O||(y$u.uploadTexture2D(y$s.source),y$e.drawElements(4,6*(y$P-y$X+1),5123,this._startIdx+6*y$X*y$k_.BYTES_PIDX),y$Z=y$s.bitmap,y$X=y$P)}else y$e.drawElements(4,this._numEle,5123,this._startIdx);return 1},y$n.create=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$n._cache._length?y$n._cache[--y$n._cache._length]:new y$n;null==y$e&&((y$e=y$u._selfVb||(y$u._selfVb=y$I_.create(-1))).clear(),y$Z=0),y$u._ib=y$c,y$u._vb=y$e,y$u._startIdx=y$Z*y$k_.BYTES_PIDX,y$u._numEle=0;var y$P=y$_._nBlendType;y$u._blendFn=y$_._targets?y$j.targetFns[y$P]:y$j.fns[y$P],y$u.shaderValue=y$X,y$u.shaderValue.setValue(y$_._shader2D);var y$O=y$_._shader2D.filters;return y$O&&y$u.shaderValue.setFilters(y$O),y$u},y$n._cache=((y$n._cache=[])._length=0,y$n._cache),y$n._shaderSet=!0,y$n}(),y$i_=function(y$_){function y$G(){y$G.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}y$B(y$G,"laya.webgl.utils.MeshTexture",y$G_);var y$c=y$G.prototype;return y$c.addData=function(y$_,y$c,y$e,y$Z,y$X,y$u){for(var y$P=y$_.length/2,y$O=this._vb.needSize(y$P*y$G.const_stride)>>2,y$s=this._vb.getFloat32Array(),y$n=0,y$m=0;y$m<y$P;y$m++){var y$H=y$_[y$n],y$B=y$_[y$n+1],y$D=y$H*y$Z.a+y$B*y$Z.c+y$Z.tx,y$U=y$H*y$Z.b+y$B*y$Z.d+y$Z.ty;y$s[y$O++]=y$D,y$s[y$O++]=y$U,y$s[y$O++]=y$c[y$n],y$s[y$O++]=y$c[y$n+1],y$n+=2}this._vb.setNeedUpload();var y$k=this.vertNum;if(0<y$k){(y$P=y$e.length)>y$G.tmpIdx.length&&(y$G.tmpIdx=new Uint16Array(y$P));for(var y$a=0;y$a<y$P;y$a++)y$G.tmpIdx[y$a]=y$e[y$a]+y$k;this._ib.appendU16Array(y$G.tmpIdx,y$e.length)}else this._ib.append(y$e);this._ib.setNeedUpload(),this.vertNum+=y$P,this.indexNum+=y$e.length},y$c.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},y$c.destroy=function(){this._ib.destroy(),this._vb.destroy()},y$G.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new y$G},y$G.const_stride=16,y$G._POOL=[],y$P(y$G,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),y$G}(),y$x_=function(y$_){function y$c(){y$c.__super.call(this),this.lock=!0}return y$B(y$c,"laya.webgl.shader.BaseShader",y$z),y$c.activeShader=null,y$c.bindShader=null,y$c}(),y$F_=function(y$c){function y$m(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===y$e&&(y$e=6408),void 0===y$Z&&(y$Z=5121),void 0===y$X&&(y$X=34041),void 0===y$u&&(y$u=!1),void 0===y$P&&(y$P=!1),void 0===y$O&&(y$O=-1),void 0===y$s&&(y$s=-1),this._type=1,this._w=y$_,this._h=y$c,this._surfaceFormat=y$e,this._surfaceType=y$Z,this._depthStencilFormat=y$X,y$G.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=y$u,this._repeat=y$P,this._minFifter=y$O,this._magFifter=y$s,this._createWebGLRenderTarget(),this.bitmap.lock=!0,y$m.__super.call(this,this.bitmap,y$i.INV_UV)}y$B(y$m,"laya.webgl.resource.RenderTarget2D",y$c);var y$_=y$m.prototype;return y$K.imps(y$_,{"laya.resource.IDispose":!0}),y$_.getType=function(){return this._type},y$_.getTexture=function(){return this},y$_.size=function(y$_,y$c){this._w==y$_&&this._h==y$c||(this._w=y$_,this._h=y$c,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},y$_.release=function(){this.destroy()},y$_.recycle=function(){y$m.POOL.push(this)},y$_.start=function(){var y$_=y$L_.mainContext;return this._preRenderTarget=y$w_.curRenderTarget,y$w_.curRenderTarget=this,y$_.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(y$_.viewport(0,0,this._w,this._h),this._svWidth=y$w_.width,this._svHeight=y$w_.height,y$w_.width=this._w,y$w_.height=this._h,y$x_.activeShader=null),this},y$_.clear=function(y$_,y$c,y$e,y$Z){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=1);var y$X=y$L_.mainContext;y$X.clearColor(y$_,y$c,y$e,y$Z);var y$u=16384;switch(this._depthStencilFormat){case 33189:y$u|=256;break;case 36168:y$u|=1024;break;case 34041:y$u|=256,y$u|=1024}y$X.clear(y$u)},y$_.end=function(){var y$_=y$L_.mainContext;y$_.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,y$w_.curRenderTarget=this._preRenderTarget,1==this._type?(y$_.viewport(0,0,this._svWidth,this._svHeight),y$w_.width=this._svWidth,y$w_.height=this._svHeight,y$x_.activeShader=null):y$_.viewport(0,0,y$K.stage.width,y$K.stage.height)},y$_.getData=function(y$_,y$c,y$e,y$Z){var y$X=y$L_.mainContext;if(y$X.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===y$X.checkFramebufferStatus(36160)))return y$X.bindFramebuffer(36160,null),null;var y$u=new Uint8Array(this._w*this._h*4);return y$X.readPixels(y$_,y$c,y$e,y$Z,this._surfaceFormat,this._surfaceType,y$u),y$X.bindFramebuffer(36160,null),y$u},y$_.destroy=function(y$_){void 0===y$_&&(y$_=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,y$c.prototype.destroy.call(this))},y$_.dispose=function(){},y$_._createWebGLRenderTarget=function(){this.bitmap=new y$V_(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(y$_){this.event("recovered")})},y$Z(0,y$_,"surfaceFormat",function(){return this._surfaceFormat}),y$Z(0,y$_,"magFifter",function(){return this._magFifter}),y$Z(0,y$_,"surfaceType",function(){return this._surfaceType}),y$Z(0,y$_,"mipMap",function(){return this._mipMap}),y$Z(0,y$_,"depthStencilFormat",function(){return this._depthStencilFormat}),y$Z(0,y$_,"minFifter",function(){return this._minFifter}),y$Z(0,y$_,"source",function(){return this._alreadyResolved?y$K.superGet(y$i,this,"source"):null}),y$m.create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){void 0===y$e&&(y$e=6408),void 0===y$Z&&(y$Z=5121),void 0===y$X&&(y$X=34041),void 0===y$u&&(y$u=!1),void 0===y$P&&(y$P=!1),void 0===y$O&&(y$O=-1),void 0===y$s&&(y$s=-1);var y$n=y$m.POOL.pop();return y$n||(y$n=new y$m(y$_,y$c)),y$n.bitmap&&y$n._w==y$_&&y$n._h==y$c&&y$n._surfaceFormat==y$e&&y$n._surfaceType==y$Z&&y$n._depthStencilFormat==y$X&&y$n._mipMap==y$u&&y$n._repeat==y$P&&y$n._minFifter==y$O&&y$n._magFifter==y$s||(y$n._w=y$_,y$n._h=y$c,y$n._surfaceFormat=y$e,y$n._surfaceType=y$Z,y$n._depthStencilFormat=y$X,y$G.isConchWebGL&&34041===y$n._depthStencilFormat&&(y$n._depthStencilFormat=33189),y$n._mipMap=y$u,y$n._repeat=y$P,y$n._minFifter=y$O,y$n._magFifter=y$s,y$n.release(),y$n._createWebGLRenderTarget()),y$n},y$m.TYPE2D=1,y$m.TYPE3D=2,y$m.POOL=[],y$m}(y$i),y$Y_=function(y$_){function y$c(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,y$c.__super.call(this),y$c._gl=y$L_.mainContext}y$B(y$c,"laya.webgl.utils.Buffer",y$z);var y$e=y$c.prototype;return y$e._bind=function(){this.activeResource(),y$c._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(y$c._bindVertexBuffer=this._glBuffer),y$c._gl.bindBuffer(this._bufferType,y$c._bindActive[this._bufferType]=this._glBuffer),y$x_.activeShader=null)},y$e.recreateResource=function(){this._glBuffer||(this._glBuffer=y$c._gl.createBuffer()),this.completeCreate()},y$e.disposeResource=function(){this._glBuffer&&(y$L_.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},y$Z(0,y$e,"bufferUsage",function(){return this._bufferUsage}),y$c._gl=null,y$c._bindActive={},y$c._bindVertexBuffer=null,y$c._enableAtributes=[],y$c}(),y$p_=function(y$_){function y$e(y$_){this.texcoord=null,this.offsetX=300,this.offsetY=0,y$e.__super.call(this,512,0);var y$c=8*y$k_.BYTES_PE;this.position=[2,5126,!1,y$c,0],this.texcoord=[2,5126,!1,y$c,2*y$k_.BYTES_PE],this.color=[4,5126,!1,y$c,4*y$k_.BYTES_PE]}return y$B(y$e,"laya.webgl.shader.d2.skinAnishader.SkinSV",y$f_),y$e}(),y$o_=function(y$_){function y$c(y$_){y$c.__super.call(this,2,0),this.color=[]}return y$B(y$c,"laya.webgl.shader.d2.value.Color2dSV",y$f_),y$c.prototype.setValue=function(y$_){y$_.fillStyle&&(this.color=y$_.fillStyle._color._color),y$_.strokeStyle&&(this.color=y$_.strokeStyle._color._color)},y$c}(),y$Q_=function(y$_){function y$c(y$_){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=y$f_._TEXCOORD,y$c.__super.call(this,256,0)}y$B(y$c,"laya.webgl.shader.d2.value.FillTextureSV",y$f_);var y$e=y$c.prototype;return y$e.setValue=function(y$_){this.ALPHA=y$_.ALPHA,y$_.filters&&this.setFilters(y$_.filters)},y$e.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},y$c}(),y$J_=function(y$_){function y$c(y$_){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=y$f_._TEXCOORD,void 0===y$_&&(y$_=0),y$c.__super.call(this,1,y$_)}y$B(y$c,"laya.webgl.shader.d2.value.TextureSV",y$f_);var y$e=y$c.prototype;return y$e.setValue=function(y$_){this.ALPHA=y$_.ALPHA,y$_.filters&&this.setFilters(y$_.filters)},y$e.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},y$c}(),y$j_=function(y$_){function y$c(y$_){this.a_color=null,this.u_pos=[0,0],y$c.__super.call(this,4,0),this.position=[2,5126,!1,5*y$k_.BYTES_PE,0],this.a_color=[3,5126,!1,5*y$k_.BYTES_PE,2*y$k_.BYTES_PE]}return y$B(y$c,"laya.webgl.shader.d2.value.PrimitiveSV",y$f_),y$c}(),y$t_=function(y$_){function y$c(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,y$c.__super.call(this)}y$B(y$c,"laya.webgl.atlas.AtlasWebGLCanvas",y$_);var y$e=y$c.prototype;return y$e.recreateResource=function(){var y$_=y$L_.mainContext,y$c=this._source=y$_.createTexture(),y$e=y$q_.curBindTexTarget,y$Z=y$q_.curBindTexValue;y$q_.bindTexture(y$_,3553,y$c),y$_.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),y$_.texParameteri(3553,10241,9729),y$_.texParameteri(3553,10240,9729),y$_.texParameteri(3553,10242,33071),y$_.texParameteri(3553,10243,33071),y$e&&y$Z&&y$q_.bindTexture(y$_,y$e,y$Z),this.memorySize=this._w*this._h*4,this.completeCreate()},y$e.disposeResource=function(){this._source&&(y$L_.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},y$e.texSubImage2D=function(y$_,y$c,y$e){if(y$G.isFlash){this._flashCacheImage||(this._flashCacheImage=y$k.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var y$Z=y$e.bitmapdata;this._flashCacheImage._image.copyPixels(y$Z,0,0,y$Z.width,y$Z.height,y$_,y$c),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var y$X=y$L_.mainContext,y$u=y$q_.curBindTexTarget,y$P=y$q_.curBindTexValue;y$q_.bindTexture(y$X,3553,this._source),y$X.pixelStorei(37441,!0),0<=y$_-1&&y$X.texSubImage2D(3553,0,y$_-1,y$c,6408,5121,y$e),y$_+1<=this._w&&y$X.texSubImage2D(3553,0,y$_+1,y$c,6408,5121,y$e),0<=y$c-1&&y$X.texSubImage2D(3553,0,y$_,y$c-1,6408,5121,y$e),y$c+1<=this._h&&y$X.texSubImage2D(3553,0,y$_,y$c+1,6408,5121,y$e),y$X.texSubImage2D(3553,0,y$_,y$c,6408,5121,y$e),y$X.pixelStorei(37441,!1),y$u&&y$P&&y$q_.bindTexture(y$X,y$u,y$P)}},y$e.texSubImage2DPixel=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$L_.mainContext,y$P=y$q_.curBindTexTarget,y$O=y$q_.curBindTexValue;y$q_.bindTexture(y$u,3553,this._source);var y$s=new Uint8Array(y$X.data);y$u.pixelStorei(37441,!0),y$u.texSubImage2D(3553,0,y$_,y$c,y$e,y$Z,6408,5121,y$s),y$u.pixelStorei(37441,!1),y$P&&y$O&&y$q_.bindTexture(y$u,y$P,y$O)},y$Z(0,y$e,"width",y$_.prototype._$get_width,function(y$_){this._w=y$_}),y$Z(0,y$e,"height",y$_.prototype._$get_height,function(y$_){this._h=y$_}),y$c}(y$e),y$b_=function(y$_){function y$X(){this.flipY=!0,this.alwaysChange=!1,y$X.__super.call(this)}y$B(y$X,"laya.webgl.resource.WebGLCanvas",y$e);var y$c=y$X.prototype;return y$c.getCanvas=function(){return this._canvas},y$c.clear=function(){this._ctx&&this._ctx.clear()},y$c.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},y$c._setContext=function(y$_){this._ctx=y$_},y$c.getContext=function(y$_,y$c){return this._ctx?this._ctx:this._ctx=y$X._createContext(this)},y$c.size=function(y$_,y$c){this._w==y$_&&this._h==y$c||(this._w=y$_,this._h=y$c,this._ctx&&this._ctx.size(y$_,y$c),this._canvas&&(this._canvas.height=y$c,this._canvas.width=y$_))},y$c.activeResource=function(y$_){void 0===y$_&&(y$_=!1),this._source||this.recreateResource()},y$c.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},y$c.disposeResource=function(){this._source&&!this.iscpuSource&&(y$L_.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},y$c.createWebGlTexture=function(){var y$_=y$L_.mainContext;this._canvas;var y$c=this._source=y$_.createTexture();this.iscpuSource=!1;var y$e=y$q_.curBindTexTarget,y$Z=y$q_.curBindTexValue;y$q_.bindTexture(y$_,3553,y$c),y$_.pixelStorei(37440,this.flipY?1:0),y$X.premulAlpha&&y$_.pixelStorei(37441,!0),y$_.texImage2D(3553,0,6408,6408,5121,this._imgData),y$X.premulAlpha&&y$_.pixelStorei(37441,!1),y$_.texParameteri(3553,10240,9729),y$_.texParameteri(3553,10241,9729),y$_.texParameteri(3553,10242,33071),y$_.texParameteri(3553,10243,33071),y$_.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,y$e&&y$Z&&y$q_.bindTexture(y$_,y$e,y$Z)},y$c.reloadCanvasData=function(){var y$_=y$L_.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var y$c=y$q_.curBindTexTarget,y$e=y$q_.curBindTexValue;y$q_.bindTexture(y$_,3553,this._source),y$X.premulAlpha&&y$_.pixelStorei(37441,!0),y$_.texImage2D(3553,0,6408,6408,5121,this._imgData),y$X.premulAlpha&&y$_.pixelStorei(37441,!1),y$_.pixelStorei(37440,0),y$c&&y$e&&y$q_.bindTexture(y$_,y$c,y$e)},y$c.texSubImage2D=function(y$_,y$c,y$e){var y$Z=y$L_.mainContext,y$X=y$q_.curBindTexTarget,y$u=y$q_.curBindTexValue;y$q_.bindTexture(y$Z,3553,this._source),y$Z.pixelStorei(37441,!0),y$Z.texSubImage2D(3553,0,y$c,y$e,6408,5121,y$_._source),y$Z.pixelStorei(37441,!1),y$X&&y$u&&y$q_.bindTexture(y$Z,y$X,y$u)},y$c.toBase64=function(y$_,y$c,y$e){var y$Z=null;this._canvas&&(y$Z=this._canvas.toDataURL(y$_,y$c)),y$e.call(this,y$Z)},y$Z(0,y$c,"context",function(){return this._ctx}),y$Z(0,y$c,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),y$Z(0,y$c,"asBitmap",null,function(y$_){this._ctx&&(this._ctx.asBitmap=y$_)}),y$X._createContext=null,y$X.premulAlpha=!1,y$X}(),y$N_=function(y$_){function y$u(y$_,y$c){this.CborderSize=12,y$u.__super.call(this),this.char=y$_,this.isSpace=" "===y$_,this.xs=y$c.scaleX,this.ys=y$c.scaleY,this.font=y$c.font.toString(),this.fontSize=y$c.font.size,this.fillColor=y$c.fillColor,this.borderColor=y$c.borderColor,this.lineWidth=y$c.lineWidth,this.underLine=y$c.underLine;var y$e,y$Z=y$G.isConchApp;y$Z?((y$e=ConchTextCanvas)._source=ConchTextCanvas,y$e._source.canvas=ConchTextCanvas):y$e=y$D.canvas.source,this.canvas=y$e,this._enableMerageInAtlas=!0,this._ctx=y$Z?y$e:this.canvas.getContext("2d",void 0);var y$X=y$x.measureText(this.char,this.font);this.cw=y$X.width*this.xs,this.ch=(y$X.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new y$i(this)}y$B(y$u,"laya.webgl.resource.WebGLCharImage",y$e);var y$c=y$u.prototype;return y$K.imps(y$c,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),y$c.active=function(){this.texture.active()},y$c.recreateResource=function(){var y$_=y$G.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),y$_){var y$c=this.fontSize;1==this.xs&&1==this.ys||(y$c=parseInt(y$c*(this.xs>this.ys?this.xs:this.ys)+""));var y$e="normal 100 "+this.font;y$e=y$e.replace(y$u._fontSizeReg,y$c),this.borderColor&&(y$e+=" 1 "+this.borderColor),this._ctx.font=y$e,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,y$R.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var y$Z=this._ctx.measureText(this.char).width+1;this._ctx.lineTo(y$Z,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},y$c.onresize=function(y$_,y$c){this._w=y$_,this._h=y$c,this._allowMerageInAtlas=!0},y$c.clearAtlasSource=function(){},y$Z(0,y$c,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),y$Z(0,y$c,"atlasSource",function(){return this.canvas}),y$Z(0,y$c,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(y$_){this._enableMerageInAtlas=y$_}),y$u.createOneChar=function(y$_,y$c){return new y$u(y$_,y$c)},y$u._fontSizeReg=new RegExp("\\d+(?=px)","g"),y$u}(),y$V_=function(y$_){function y$n(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){void 0===y$e&&(y$e=6408),void 0===y$Z&&(y$Z=5121),void 0===y$X&&(y$X=34041),void 0===y$u&&(y$u=!1),void 0===y$P&&(y$P=!1),void 0===y$O&&(y$O=-1),void 0===y$s&&(y$s=1),y$n.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=y$_,this._h=y$c,this._surfaceFormat=y$e,this._surfaceType=y$Z,this._depthStencilFormat=y$X,this._mipMap=y$u,this._repeat=y$P,this._minFifter=y$O,this._magFifter=y$s}y$B(y$n,"laya.webgl.resource.WebGLRenderTarget",y$e);var y$c=y$n.prototype;return y$c.recreateResource=function(){var y$_=y$L_.mainContext;this._frameBuffer||(this._frameBuffer=y$_.createFramebuffer()),this._source||(this._source=y$_.createTexture());var y$c=y$q_.curBindTexTarget,y$e=y$q_.curBindTexValue;y$q_.bindTexture(y$_,3553,this._source),y$_.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var y$Z=this._minFifter,y$X=this._magFifter,y$u=this._repeat?10497:33071,y$P=y$m.isPOT(this._w,this._h);if(y$P?(this._mipMap?-1!==y$Z||(y$Z=9987):-1!==y$Z||(y$Z=9729),-1!==y$X||(y$X=9729),y$_.texParameteri(3553,10241,y$Z),y$_.texParameteri(3553,10240,y$X),y$_.texParameteri(3553,10242,y$u),y$_.texParameteri(3553,10243,y$u),this._mipMap&&y$_.generateMipmap(3553)):(-1!==y$Z||(y$Z=9729),-1!==y$X||(y$X=9729),y$_.texParameteri(3553,10241,y$Z),y$_.texParameteri(3553,10240,y$X),y$_.texParameteri(3553,10242,33071),y$_.texParameteri(3553,10243,33071)),y$_.bindFramebuffer(36160,this._frameBuffer),y$_.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=y$_.createRenderbuffer()),y$_.bindRenderbuffer(36161,this._depthStencilBuffer),y$_.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:y$_.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:y$_.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:y$_.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}y$_.bindFramebuffer(36160,null),y$c&&y$e&&y$q_.bindTexture(y$_,y$c,y$e),y$_.bindRenderbuffer(36161,null),y$P&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},y$c.disposeResource=function(){this._frameBuffer&&(y$L_.mainContext.deleteTexture(this._source),y$L_.mainContext.deleteFramebuffer(this._frameBuffer),y$L_.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},y$Z(0,y$c,"depthStencilBuffer",function(){return this._depthStencilBuffer}),y$Z(0,y$c,"frameBuffer",function(){return this._frameBuffer}),y$n}(),y$g_=function(y$_){function y$O(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this.offsetX=0,this.offsetY=0,y$O.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=y$u,this.canvas=y$_,this._ctx=y$_.getContext("2d",void 0),this._w=y$Z,this._h=y$X,this.offsetX=y$c,this.offsetY=y$e,this.src=y$P,this._enableMerageInAtlas=!0,y$Q.enabled&&this._w<y$Q.atlasLimitWidth&&this._h<y$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}y$B(y$O,"laya.webgl.resource.WebGLSubImage",y$e);var y$c=y$O.prototype;return y$K.imps(y$c,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),y$c.size=function(y$_,y$c){this._w=y$_,this._h=y$c,this._ctx&&this._ctx.size(y$_,y$c),this.canvas&&(this.canvas.height=y$c,this.canvas.width=y$_)},y$c.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},y$c.createWebGlTexture=function(){var y$_=y$L_.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var y$c=this._source=y$_.createTexture(),y$e=y$q_.curBindTexTarget,y$Z=y$q_.curBindTexValue;y$q_.bindTexture(y$_,3553,y$c),y$_.pixelStorei(37441,!0),y$_.texImage2D(3553,0,6408,6408,5121,this.canvas),y$_.pixelStorei(37441,!1);var y$X=this.minFifter,y$u=this.magFifter,y$P=this.repeat?10497:33071,y$O=y$m.isPOT(this.width,this.height);y$O?(this.mipmap?-1!==y$X||(y$X=9987):-1!==y$X||(y$X=9729),-1!==y$u||(y$u=9729),y$_.texParameteri(3553,10240,y$u),y$_.texParameteri(3553,10241,y$X),y$_.texParameteri(3553,10242,y$P),y$_.texParameteri(3553,10243,y$P),this.mipmap&&y$_.generateMipmap(3553)):(-1!==y$X||(y$X=9729),-1!==y$u||(y$u=9729),y$_.texParameteri(3553,10241,y$X),y$_.texParameteri(3553,10240,y$u),y$_.texParameteri(3553,10242,33071),y$_.texParameteri(3553,10243,33071)),y$e&&y$Z&&y$q_.bindTexture(y$_,y$e,y$Z),this.canvas=null,y$O&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},y$c.disposeResource=function(){y$Q.enabled&&this._allowMerageInAtlas||!this._source||(y$L_.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},y$c.clearAtlasSource=function(){},y$Z(0,y$c,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),y$Z(0,y$c,"atlasSource",function(){return this.canvas}),y$Z(0,y$c,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(y$_){this._allowMerageInAtlas=y$_}),y$O}(),y$S_=function(y$_){function y$n(y$_,y$c,y$e,y$Z){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,y$n.__super.call(this),!y$_||!y$c)throw"Shader Error";this._id=++y$n._count,this._vs=y$_,this._ps=y$c,this._nameMap=y$Z||{},null!=y$e&&(y$n.sharders[y$e]=this)}y$B(y$n,"laya.webgl.shader.Shader",y$x_);var y$c=y$n.prototype;return y$c.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},y$c.disposeResource=function(){y$L_.mainContext.deleteShader(this._vshader),y$L_.mainContext.deleteShader(this._pshader),y$L_.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},y$c._compile=function(){if(!y$L_.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var y$_=[this._vs,this._ps],y$c=y$L_.mainContext;if(this._program=y$c.createProgram(),this._vshader=y$n._createShader(y$c,y$_[0],35633),this._pshader=y$n._createShader(y$c,y$_[1],35632),y$c.attachShader(this._program,this._vshader),y$c.attachShader(this._program,this._pshader),y$c.linkProgram(this._program),!y$G.isConchApp&&!y$c.getProgramParameter(this._program,35714))throw y$c.getProgramInfoLog(this._program);var y$e,y$Z,y$X=0,y$u=0;for(y$u=y$G.isConchApp?y$c.getProgramParameterEx(this._vs,this._ps,"",35721):y$c.getProgramParameter(this._program,35721),y$X=0;y$X<y$u;y$X++){var y$P=null;y$e={vartype:"attribute",glfun:null,ivartype:0,attrib:y$P=y$G.isConchApp?y$c.getActiveAttribEx(this._vs,this._ps,"",y$X):y$c.getActiveAttrib(this._program,y$X),location:y$c.getAttribLocation(this._program,y$P.name),name:y$P.name,type:y$P.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(y$e)}var y$O=0;for(y$O=y$G.isConchApp?y$c.getProgramParameterEx(this._vs,this._ps,"",35718):y$c.getProgramParameter(this._program,35718),y$X=0;y$X<y$O;y$X++){var y$s=null;y$s=y$G.isConchApp?y$c.getActiveUniformEx(this._vs,this._ps,"",y$X):y$c.getActiveUniform(this._program,y$X),0<(y$e={vartype:"uniform",glfun:null,ivartype:1,attrib:y$P,location:y$c.getUniformLocation(this._program,y$s.name),name:y$s.name,type:y$s.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(y$e.name=y$e.name.substr(0,y$e.name.length-3),y$e.isArray=!0,y$e.location=y$c.getUniformLocation(this._program,y$e.name)),this._params.push(y$e)}for(y$X=0,y$Z=this._params.length;y$X<y$Z;y$X++)if((y$e=this._params[y$X]).indexOfParams=y$X,y$e.index=1,y$e.value=[y$e.location,null],y$e.codename=y$e.name,y$e.name=this._nameMap[y$e.codename]?this._nameMap[y$e.codename]:y$e.codename,(this._paramsMap[y$e.name]=y$e)._this=this,y$e.uploadedValue=[],"attribute"!==y$e.vartype)switch(y$e.type){case 5124:y$e.fun=y$e.isArray?this._uniform1iv:this._uniform1i;break;case 5126:y$e.fun=y$e.isArray?this._uniform1fv:this._uniform1f;break;case 35664:y$e.fun=y$e.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:y$e.fun=y$e.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:y$e.fun=y$e.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:y$e.fun=this._uniform_sampler2D;break;case 35680:y$e.fun=this._uniform_samplerCube;break;case 35676:y$e.glfun=y$c.uniformMatrix4fv,y$e.fun=this._uniformMatrix4fv;break;case 35670:y$e.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else y$e.fun=this._attribute}},y$c.getUniform=function(y$_){return this._paramsMap[y$_]},y$c._attribute=function(y$_,y$c){var y$e=y$L_.mainContext,y$Z=y$Y_._enableAtributes,y$X=y$_.location;return y$Z[y$X]||y$e.enableVertexAttribArray(y$X),y$e.vertexAttribPointer(y$X,y$c[0],y$c[1],y$c[2],y$c[3],y$c[4]+this._offset),y$Z[y$X]=y$Y_._bindVertexBuffer,1},y$c._uniform1f=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c?(y$L_.mainContext.uniform1f(y$_.location,y$e[0]=y$c),1):0},y$c._uniform1fv=function(y$_,y$c){if(y$c.length<4){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$L_.mainContext.uniform1fv(y$_.location,y$c),y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3],1):0}return y$L_.mainContext.uniform1fv(y$_.location,y$c),1},y$c._uniform_vec2=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]?(y$L_.mainContext.uniform2f(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1]),1):0},y$c._uniform_vec2v=function(y$_,y$c){if(y$c.length<2){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$L_.mainContext.uniform2fv(y$_.location,y$c),y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3],1):0}return y$L_.mainContext.uniform2fv(y$_.location,y$c),1},y$c._uniform_vec3=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]?(y$L_.mainContext.uniform3f(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2]),1):0},y$c._uniform_vec3v=function(y$_,y$c){return y$L_.mainContext.uniform3fv(y$_.location,y$c),1},y$c._uniform_vec4=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$L_.mainContext.uniform4f(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3]),1):0},y$c._uniform_vec4v=function(y$_,y$c){return y$L_.mainContext.uniform4fv(y$_.location,y$c),1},y$c._uniformMatrix2fv=function(y$_,y$c){return y$L_.mainContext.uniformMatrix2fv(y$_.location,!1,y$c),1},y$c._uniformMatrix3fv=function(y$_,y$c){return y$L_.mainContext.uniformMatrix3fv(y$_.location,!1,y$c),1},y$c._uniformMatrix4fv=function(y$_,y$c){return y$L_.mainContext.uniformMatrix4fv(y$_.location,!1,y$c),1},y$c._uniform1i=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c?(y$L_.mainContext.uniform1i(y$_.location,y$e[0]=y$c),1):0},y$c._uniform1iv=function(y$_,y$c){return y$L_.mainContext.uniform1iv(y$_.location,y$c),1},y$c._uniform_ivec2=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]?(y$L_.mainContext.uniform2i(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1]),1):0},y$c._uniform_ivec2v=function(y$_,y$c){return y$L_.mainContext.uniform2iv(y$_.location,y$c),1},y$c._uniform_vec3i=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]?(y$L_.mainContext.uniform3i(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2]),1):0},y$c._uniform_vec3vi=function(y$_,y$c){return y$L_.mainContext.uniform3iv(y$_.location,y$c),1},y$c._uniform_vec4i=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$L_.mainContext.uniform4i(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3]),1):0},y$c._uniform_vec4vi=function(y$_,y$c){return y$L_.mainContext.uniform4iv(y$_.location,y$c),1},y$c._uniform_sampler2D=function(y$_,y$c){var y$e=y$L_.mainContext,y$Z=y$_.uploadedValue;return null==y$Z[0]?(y$Z[0]=this._curActTexIndex,y$e.uniform1i(y$_.location,this._curActTexIndex),y$e.activeTexture(y$n._TEXTURES[this._curActTexIndex]),y$q_.bindTexture(y$e,3553,y$c),this._curActTexIndex++,1):(y$e.activeTexture(y$n._TEXTURES[y$Z[0]]),y$q_.bindTexture(y$e,3553,y$c),0)},y$c._uniform_samplerCube=function(y$_,y$c){var y$e=y$L_.mainContext,y$Z=y$_.uploadedValue;return null==y$Z[0]?(y$Z[0]=this._curActTexIndex,y$e.uniform1i(y$_.location,this._curActTexIndex),y$e.activeTexture(y$n._TEXTURES[this._curActTexIndex]),y$q_.bindTexture(y$e,34067,y$c),this._curActTexIndex++,1):(y$e.activeTexture(y$n._TEXTURES[y$Z[0]]),y$q_.bindTexture(y$e,34067,y$c),0)},y$c._noSetValue=function(y$_){console.log("no....:"+y$_.name)},y$c.uploadOne=function(y$_,y$c){this.activeResource(),y$q_.UseProgram(this._program);var y$e=this._paramsMap[y$_];y$e.fun.call(this,y$e,y$c)},y$c.uploadTexture2D=function(y$_){y$$.shaderCall++;var y$c=y$L_.mainContext;y$c.activeTexture(33984),y$q_.bindTexture(y$c,3553,y$_)},y$c.uploadTexture2D1=function(y$_){y$$.shaderCall++;var y$c=y$L_.mainContext;y$c.activeTexture(33985),y$q_.bindTexture(y$c,3553,y$_)},y$c.upload=function(y$_,y$c){y$x_.activeShader=y$x_.bindShader=this,this._lastUseFrameCount===y$$.loopCount||this.activeResource(),y$q_.UseProgram(this._program),this._reCompile?(y$c=this._params,this._reCompile=!1):y$c=y$c||this._params;y$L_.mainContext;for(var y$e,y$Z,y$X=y$c.length,y$u=0,y$P=0;y$P<y$X;y$P++)null!==(y$Z=y$_[(y$e=y$c[y$P]).name])&&(y$u+=y$e.fun.call(this,y$e,y$Z));y$$.shaderCall+=y$u},y$c.uploadArray=function(y$_,y$c,y$e){y$x_.activeShader=this,(y$x_.bindShader=this).activeResource(),y$q_.UseProgram(this._program);this._params;for(var y$Z,y$X,y$u=0,y$P=y$c-2;0<=y$P;y$P-=2)(y$X=this._paramsMap[y$_[y$P]])&&null!=(y$Z=y$_[y$P+1])&&(y$e&&y$e[y$X.name]&&y$e[y$X.name].bind(),y$u+=y$X.fun.call(this,y$X,y$Z));y$$.shaderCall+=y$u},y$c.getParams=function(){return this._params},y$n.getShader=function(y$_){return y$n.sharders[y$_]},y$n.create=function(y$_,y$c,y$e,y$Z){return new y$n(y$_,y$c,y$e,y$Z)},y$n.withCompile=function(y$_,y$c,y$e,y$Z){if(y$e&&y$n.sharders[y$e])return y$n.sharders[y$e];var y$X=y$n._preCompileShader[2e-4*y$_];if(!y$X)throw new Error("withCompile shader err!"+y$_);return y$X.createShader(y$c,y$e,y$Z)},y$n.withCompile2D=function(y$_,y$c,y$e,y$Z,y$X){if(y$Z&&y$n.sharders[y$Z])return y$n.sharders[y$Z];var y$u=y$n._preCompileShader[2e-4*y$_+y$c];if(!y$u)throw new Error("withCompile shader err!"+y$_+" "+y$c);return y$u.createShader(y$e,y$Z,y$X)},y$n.addInclude=function(y$_,y$c){y$z_.addInclude(y$_,y$c)},y$n.preCompile=function(y$_,y$c,y$e,y$Z){var y$X=2e-4*y$_;y$n._preCompileShader[y$X]=new y$z_(y$X,y$c,y$e,y$Z)},y$n.preCompile2D=function(y$_,y$c,y$e,y$Z,y$X){var y$u=2e-4*y$_+y$c;y$n._preCompileShader[y$u]=new y$z_(y$u,y$e,y$Z,y$X)},y$n._createShader=function(y$_,y$c,y$e){var y$Z=y$_.createShader(y$e);return y$_.shaderSource(y$Z,y$c),y$_.compileShader(y$Z),y$Z},y$n._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],y$n._count=0,y$n._preCompileShader={},y$n.SHADERNAME2ID=2e-4,y$n.sharders=((y$n.sharders=[]).length=32,y$n.sharders),y$P(y$n,["nameKey",function(){return this.nameKey=new y$T}]),y$n}(),y$E_=function(y$_){function y$c(){this._maxsize=0,this._upload=!0,this._uploadSize=0,y$c.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}y$B(y$c,"laya.webgl.utils.Buffer2D",y$_);var y$e=y$c.prototype;return y$e.needSize=function(y$_){var y$c=this._byteLength;if(y$_){var y$e=this._byteLength+y$_;y$e<=this._buffer.byteLength||this._resizeBuffer(y$e<<1,!0),this._byteLength=y$e}return y$c},y$e._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),y$$.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,y$Y_._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),y$Y_._gl.bufferSubData(this._bufferType,0,this._buffer)},y$e._bufferSubData=function(y$_,y$c,y$e){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),this._maxsize=Math.max(this._maxsize,this._byteLength),y$$.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,y$Y_._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),y$c||y$e){var y$Z=this._buffer.slice(y$c,y$e);y$Y_._gl.bufferSubData(this._bufferType,y$_,y$Z)}else y$Y_._gl.bufferSubData(this._bufferType,y$_,this._buffer)},y$e._checkArrayUse=function(){},y$e._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},y$e._bind_subUpload=function(y$_,y$c,y$e){return void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(y$_,y$c,y$e),!0)},y$e._resizeBuffer=function(y$_,y$c){if(y$_<this._buffer.byteLength)return this;if(this.memorySize=y$_,y$c&&this._buffer&&0<this._buffer.byteLength){var y$e=new ArrayBuffer(y$_);new Uint8Array(y$e).set(new Uint8Array(this._buffer),0),this._buffer=y$e}else this._buffer=new ArrayBuffer(y$_);return this._checkArrayUse(),this._upload=!0,this},y$e.append=function(y$_){this._upload=!0;var y$c,y$e;y$c=y$_.byteLength,y$_ instanceof Uint8Array?(this._resizeBuffer(this._byteLength+y$c,!0),y$e=new Uint8Array(this._buffer,this._byteLength)):y$_ instanceof Uint16Array?(this._resizeBuffer(this._byteLength+y$c,!0),y$e=new Uint16Array(this._buffer,this._byteLength)):y$_ instanceof Float32Array&&(this._resizeBuffer(this._byteLength+y$c,!0),y$e=new Float32Array(this._buffer,this._byteLength)),y$e.set(y$_,0),this._byteLength+=y$c,this._checkArrayUse()},y$e.appendU16Array=function(y$_,y$c){this._resizeBuffer(this._byteLength+2*y$c,!0);for(var y$e=new Uint16Array(this._buffer,this._byteLength,y$c),y$Z=0;y$Z<y$c;y$Z++)y$e[y$Z]=y$_[y$Z];this._byteLength+=2*y$c,this._checkArrayUse()},y$e.appendEx=function(y$_,y$c){this._upload=!0;var y$e;y$e=y$_.byteLength,this._resizeBuffer(this._byteLength+y$e,!0),new y$c(this._buffer,this._byteLength).set(y$_,0),this._byteLength+=y$e,this._checkArrayUse()},y$e.appendEx2=function(y$_,y$c,y$e,y$Z){void 0===y$Z&&(y$Z=1),this._upload=!0;var y$X,y$u;y$X=y$e*y$Z,this._resizeBuffer(this._byteLength+y$X,!0),y$u=new y$c(this._buffer,this._byteLength);var y$P=0;for(y$P=0;y$P<y$e;y$P++)y$u[y$P]=y$_[y$P];this._byteLength+=y$X,this._checkArrayUse()},y$e.getBuffer=function(){return this._buffer},y$e.setNeedUpload=function(){this._upload=!0},y$e.getNeedUpload=function(){return this._upload},y$e.upload=function(){var y$_=this._bind_upload();return y$Y_._gl.bindBuffer(this._bufferType,null),y$Y_._bindActive[this._bufferType]=null,y$x_.activeShader=null,y$_},y$e.subUpload=function(y$_,y$c,y$e){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0);var y$Z=this._bind_subUpload();return y$Y_._gl.bindBuffer(this._bufferType,null),y$Y_._bindActive[this._bufferType]=null,y$x_.activeShader=null,y$Z},y$e.disposeResource=function(){y$_.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},y$e.clear=function(){this._byteLength=0,this._upload=!0},y$Z(0,y$e,"bufferLength",function(){return this._buffer.byteLength}),y$Z(0,y$e,"byteLength",null,function(y$_){this._byteLength!==y$_&&(y$_<=this._buffer.byteLength||this._resizeBuffer(2*y$_+256,!0),this._byteLength=y$_)}),y$c.__int__=function(y$_){y$d_.QuadrangleIB=y$d_.create(35044),y$a_.fillIBQuadrangle(y$d_.QuadrangleIB,16)},y$c.FLOAT32=4,y$c.SHORT=2,y$c}(y$Y_),y$W_=(function(y$c){function y$e(y$_){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,y$e.__super.call(this,9)}y$B(y$e,"laya.webgl.shader.d2.value.GlowSV",y$c);var y$_=y$e.prototype;y$_.setValue=function(y$_){y$c.prototype.setValue.call(this,y$_)},y$_.clear=function(){y$c.prototype.clear.call(this)}}(y$J_),function(y$_){function y$c(y$_){y$c.__super.call(this,64),this.defines.add(64)}y$B(y$c,"laya.webgl.shader.d2.value.TextSV",y$_);var y$e=y$c.prototype;return y$e.release=function(){(y$c.pool[y$c._length++]=this).clear()},y$e.clear=function(){y$_.prototype.clear.call(this)},y$c.create=function(){return y$c._length?y$c.pool[--y$c._length]:new y$c(null)},y$c.pool=[],y$c._length=0,y$c}(y$J_)),y$l_=function(y$_){function y$X(y$_,y$c,y$e,y$Z){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,y$X.__super.call(this,y$_,y$c,y$e,y$Z)}y$B(y$X,"laya.webgl.shader.d2.Shader2X",y$_);var y$c=y$X.prototype;return y$c.upload2dQuick1=function(y$_){this.upload(y$_,this._params2dQuick1||this._make2dQuick1())},y$c._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var y$_,y$c=this._params,y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++)y$_=y$c[y$e],(y$G.isFlash||"size"!==y$_.name&&"position"!==y$_.name&&"texcoord"!==y$_.name)&&this._params2dQuick1.push(y$_)}return this._params2dQuick1},y$c.disposeResource=function(){y$_.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},y$c.upload2dQuick2=function(y$_){this.upload(y$_,this._params2dQuick2||this._make2dQuick2())},y$c._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var y$_,y$c=this._params,y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++)y$_=y$c[y$e],(y$G.isFlash||"size"!==y$_.name)&&this._params2dQuick2.push(y$_)}return this._params2dQuick2},y$X.create=function(y$_,y$c,y$e,y$Z){return new y$X(y$_,y$c,y$e,y$Z)},y$X}(y$S_),y$d_=function(y$_){function y$c(y$_){this._uint8Array=null,this._uint16Array=null,void 0===y$_&&(y$_=35044),y$c.__super.call(this),this._bufferUsage=y$_,this._bufferType=34963,y$G.isFlash||(this._buffer=new ArrayBuffer(8))}y$B(y$c,"laya.webgl.utils.IndexBuffer2D",y$E_);var y$e=y$c.prototype;return y$e._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},y$e.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},y$e.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},y$e.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},y$c.QuadrangleIB=null,y$c.create=function(y$_){return void 0===y$_&&(y$_=35044),new y$c(y$_)},y$c}(),y$I_=function(y$_){function y$e(y$_,y$c){this._floatArray32=null,this._vertexStride=0,y$e.__super.call(this),this._vertexStride=y$_,this._bufferUsage=y$c,this._bufferType=34962,y$G.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}y$B(y$e,"laya.webgl.utils.VertexBuffer2D",y$_);var y$c=y$e.prototype;return y$c.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},y$c.bind=function(y$_){y$_&&y$_._bind(),this._bind()},y$c.insertData=function(y$_,y$c){this.getFloat32Array().set(y$_,y$c),this._upload=!0},y$c.bind_upload=function(y$_){y$_._bind_upload()||y$_._bind(),this._bind_upload()||this._bind()},y$c._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},y$c.disposeResource=function(){y$_.prototype.disposeResource.call(this)},y$c.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},y$Z(0,y$c,"vertexStride",function(){return this._vertexStride}),y$e.create=function(y$_,y$c){return void 0===y$c&&(y$c=35048),new y$e(y$_,y$c)},y$e}(y$E_),y$_c=function(y$_){function y$O(y$_,y$c,y$e,y$Z,y$X,y$u){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===y$e&&(y$e=6408),void 0===y$Z&&(y$Z=!0),y$O.__super.call(this,y$_,y$c),y$_){if(this._format=y$e,this._mipmap=y$Z,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof y$_)this._url=y$_,this._src=y$_,this._image=new y$D.window.Image,y$c&&(y$c.onload&&(this.onload=y$c.onload),y$c.onerror&&(this.onerror=y$c.onerror),y$c.onCreate&&y$c.onCreate(this)),this._image.crossOrigin=y$_&&0==y$_.indexOf("data:")?null:"",y$_&&(this._image.src=y$_);else if(y$_ instanceof ArrayBuffer){this._src=y$c,this._url=this._src;var y$P=new y$s(y$_);y$P.readUTFBytes(4),y$P.readUTFBytes(2),y$P.getInt16();y$P.endian="bigEndian",this._w=y$P.getInt16(),this._h=y$P.getInt16();y$P.getInt16(),y$P.getInt16();this._image=new Uint8Array(y$_,y$P.pos),this._format=y$L_.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,y$Q.enabled&&this._w<y$Q.atlasLimitWidth&&this._h<y$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(y$_ instanceof Uint8Array))return this._src=y$c,this._url=this._src,this._image=y$_.source||y$_,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=y$c,this._url=this._src,this._w=y$X,this._h=y$u,this._image=y$_,this._format=0===y$e?y$_.byteLength/(y$X*y$u)==4?6408:6407:y$e}this._$5__enableMerageInAtlas=!0}}y$B(y$O,"laya.webgl.resource.WebGLImage",y$k);var y$c=y$O.prototype;return y$K.imps(y$c,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),y$c._init_=function(y$_,y$c){},y$c._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var y$_=y$L_.mainContext,y$c=this._source=y$_.createTexture(),y$e=y$q_.curBindTexTarget,y$Z=y$q_.curBindTexValue;y$q_.bindTexture(y$_,3553,y$c);var y$X=this.minFifter,y$u=this.magFifter,y$P=this.repeat?10497:33071,y$O=y$m.isPOT(this._w,this._h),y$s=!1;switch(y$O?(this.mipmap?-1!==y$X||(y$X=9987):-1!==y$X||(y$X=9729),-1!==y$u||(y$u=9729),y$_.texParameteri(3553,10241,y$X),y$_.texParameteri(3553,10240,y$u),y$_.texParameteri(3553,10242,y$P),y$_.texParameteri(3553,10243,y$P),this.mipmap&&y$_.generateMipmap(3553)):(-1!==y$X||(y$X=9729),-1!==y$u||(y$u=9729),y$_.texParameteri(3553,10241,y$X),y$_.texParameteri(3553,10240,y$u),y$_.texParameteri(3553,10242,33071),y$_.texParameteri(3553,10243,33071)),y$_.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&y$_.pixelStorei(y$_.UNPACK_ALIGNMENT,1),y$_.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&y$_.pixelStorei(y$_.UNPACK_ALIGNMENT,1),y$_.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:y$s=!0,y$_.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case y$L_.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:y$s=!0,y$_.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}y$_.pixelStorei(37441,!1),y$e&&y$Z&&y$q_.bindTexture(y$_,y$e,y$Z),this.uri||(this.uri=this._url),y$s?this.memorySize=this._image.length:y$O&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},y$c.recreateResource=function(){var y$_=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var y$c=this;this._image=new y$D.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(y$c._needReleaseAgain)return y$c._needReleaseAgain=!1,y$c._image.onload=null,void(y$c._image=null);y$c._allowMerageInAtlas&&y$c._enableMerageInAtlas?(y$_.memorySize=0,y$_._recreateLock=!1):y$c._createWebGlTexture(),y$c.completeCreate()},this._image.src=this._src}},y$c.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&y$L_.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},y$c.onresize=function(){this._w=this._image.width,this._h=this._image.height,y$Q.enabled&&this._w<y$Q.atlasLimitWidth&&this._h<y$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},y$c.clearAtlasSource=function(){this._image=null},y$Z(0,y$c,"format",function(){return this._format}),y$Z(0,y$c,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(y$_){this._$5__enableMerageInAtlas=y$_}),y$Z(0,y$c,"mipmap",function(){return this._mipmap}),y$Z(0,y$c,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),y$Z(0,y$c,"atlasSource",function(){return this._image}),y$Z(0,y$c,"onload",null,function(y$_){var y$c=this;this._onload=y$_,this._image&&(this._image.onload=null!=this._onload?function(){y$c.onresize(),y$c._onload()}:null)}),y$Z(0,y$c,"onerror",null,function(y$_){var y$c=this;this._onerror=y$_,this._image&&(this._image.onerror=null!=this._onerror?function(){y$c._onerror()}:null)}),y$O}();y$K.__init([y$D_,y$o,y$M_,y$z_])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(y$_,y$c){"use strict";for(var y$e in Object.defineProperty(y$c,"__esModule",{value:!0}),Laya){var y$Z=Laya[y$e];y$Z&&y$Z.__isclass&&(y$c[y$e]=y$Z)}}),function(y$u,y$_,y$Z){y$Z.un,y$Z.uns;var y$X=y$Z.static,y$P=y$Z.class,y$O=y$Z.getset,y$s=(y$Z.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),y$U=laya.utils.ClassUtils,y$H=(laya.events.Event,laya.utils.HTMLChar),y$n=laya.net.Loader,y$m=(laya.display.Node,laya.maths.Rectangle),y$B=laya.renders.Render,y$D=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),y$k=laya.utils.Stat,y$x=laya.display.Text,y$a=laya.resource.Texture,y$G=laya.net.URL,y$w=laya.utils.Utils,y$z=function(){function y$D(){}return y$P(y$D,"laya.html.utils.HTMLParse"),y$D.parse=function(y$_,y$c,y$e){y$c=(y$c="<root>"+(y$c=y$c.replace(/<br>/g,"<br/>"))+"</root>").replace(y$D.spacePattern,y$D.char255);var y$Z=y$w.parseXMLFromString(y$c);y$D._parseXML(y$_,y$Z.childNodes[0].childNodes,y$e)},y$D._parseXML=function(y$_,y$c,y$e,y$Z){var y$X=0,y$u=0;if(y$c.join||y$c.item)for(y$X=0,y$u=y$c.length;y$X<y$u;++y$X)y$D._parseXML(y$_,y$c[y$X],y$e,y$Z);else{var y$P,y$O,y$s;if(3==y$c.nodeType)return void(y$_ instanceof laya.html.dom.HTMLDivElement?(null==y$c.nodeName&&(y$c.nodeName="#text"),y$O=y$c.nodeName.toLowerCase(),0<(y$s=y$c.textContent.replace(/^\s+|\s+$/g,"")).length&&(y$P=y$U.getInstance(y$O))&&(y$_.addChild(y$P),y$P.innerTEXT=y$s.replace(y$D.char255AndOneSpacePattern," "))):0<(y$s=y$c.textContent.replace(/^\s+|\s+$/g,"")).length&&(y$_.innerTEXT=y$s.replace(y$D.char255AndOneSpacePattern," ")));if("#comment"==(y$O=y$c.nodeName.toLowerCase()))return;if(y$P=y$U.getInstance(y$O)){(y$P=y$_.addChild(y$P)).URI=y$e,y$P.href=y$Z;var y$n=y$c.attributes;if(y$n&&0<y$n.length)for(y$X=0,y$u=y$n.length;y$X<y$u;++y$X){var y$m=y$n[y$X],y$H=y$m.nodeName,y$B=y$m.value;y$P._setAttributes(y$H,y$B)}y$D._parseXML(y$P,y$c.childNodes,y$e,y$P.href)}else y$D._parseXML(y$_,y$c.childNodes,y$e,y$Z)}},y$D.char255=String.fromCharCode(255),y$D.spacePattern=/&nbsp;|&#160;/g,y$D.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),y$D}(),y$L=function(){function y$i(){}return y$P(y$i,"laya.html.utils.Layout"),y$i.later=function(y$_){null==y$i._will&&(y$i._will=[],y$Z.stage.frameLoop(1,null,function(){if(!(y$i._will.length<1)){for(var y$_=0;y$_<y$i._will.length;y$_++)laya.html.utils.Layout.layout(y$i._will[y$_]);y$i._will.length=0}})),y$i._will.push(y$_)},y$i.layout=function(y$_){if(!y$_||!y$_._style)return null;if(0==(512&y$_._style._type))return null;y$_.getStyle()._type&=-513;var y$c=y$i._multiLineLayout(y$_);return y$B.isConchApp&&y$_.layaoutCallNative&&y$_.layaoutCallNative(),y$c},y$i._multiLineLayout=function(y$_){if(y$x.RightToLeft)return y$i._multiLineLayout2(y$_);var y$c=new Array;y$_._addChildsToLayout(y$c);var y$e,y$Z,y$X,y$u,y$P,y$O=0,y$s=y$c.length,y$n=y$_._getCSSStyle(),y$m=y$n.letterSpacing,y$H=y$n.leading,y$B=y$n.lineHeight,y$D=y$n._widthAuto()||!y$n.wordWrap,y$U=y$D?999999:y$_.width,y$k=(y$_.height,0),y$a=y$n.italic?y$n.fontSize/3:0,y$G=y$n._getAlign(),y$w=y$n._getValign(),y$z=0!==y$w||0!==y$G||0!=y$B,y$L=0,y$q=0,y$K=0,y$M=0,y$f=new Array,y$A=y$f[0]=new y$F,y$v=!1,y$r=!1;y$A.h=0,y$n.italic&&(y$U-=y$n.fontSize/3);var y$C=0,y$y=!0;function y$$(){y$A.y=y$q,y$q+=y$A.h+y$H,0==y$A.h&&(y$q+=y$B),y$A.mWidth=y$C,y$C=0,y$A=new y$F,y$f.push(y$A),y$A.h=0,y$v=!(y$y=!(y$L=0))}for(y$O=0;y$O<y$s;y$O++)if(null!=(y$e=y$c[y$O]))if(y$y=!1,y$e instanceof laya.html.dom.HTMLBrElement)y$$(),y$A.y=y$q;else{if(y$e._isChar()){if((y$u=y$e).isWord)y$v=y$r||"\n"===y$u.char,y$A.wordStartIndex=y$A.elements.length;else{if(y$K=y$u.width+y$u.style.letterSpacin,0<y$f.length&&y$U<y$L+y$K&&0<y$A.wordStartIndex){var y$T;y$T=y$A.elements.length-y$A.wordStartIndex+1,y$A.elements.length=y$A.wordStartIndex,y$O-=y$T,y$$();continue}y$v=!1,y$C+=y$u.width}y$K=y$u.width+y$m,y$M=y$u.height,y$r=!1,(y$v=y$v||y$U<y$L+y$K)&&y$$(),y$A.minTextHeight=Math.min(y$A.minTextHeight,y$e.height)}else y$Z=y$e._getCSSStyle(),y$P=y$e,y$X=y$Z.padding,0===y$Z._getCssFloat()||(y$z=!0),y$v=y$r||y$Z.lineElement,y$K=y$P.width*y$P._style._tf.scaleX+y$X[1]+y$X[3]+y$m,y$M=y$P.height*y$P._style._tf.scaleY+y$X[0]+y$X[2],y$r=y$Z.lineElement,(y$v=y$v||y$U<y$L+y$K&&y$Z.wordWrap)&&y$$();y$A.elements.push(y$e),y$A.h=Math.max(y$A.h,y$M),y$e.x=y$L,y$e.y=y$q,y$L+=y$K,y$A.w=y$L-y$m,y$A.y=y$q,y$k=Math.max(y$L+y$a,y$k)}else y$y||(y$L+=y$i.DIV_ELEMENT_PADDING),y$A.wordStartIndex=y$A.elements.length;if(y$q=y$A.y+y$A.h,y$z){var y$h=0,y$R=y$U;for(y$D&&0<y$_.width&&(y$R=y$_.width),y$O=0,y$s=y$f.length;y$O<y$s;y$O++)y$f[y$O].updatePos(0,y$R,y$O,y$h,y$G,y$w,y$B),y$h+=Math.max(y$B,y$f[y$O].h+y$H);y$q=y$h}return y$D&&(y$_.width=y$k),y$q>y$_.height&&(y$_.height=y$q),[y$k,y$q]},y$i._multiLineLayout2=function(y$_){var y$c=new Array;y$_._addChildsToLayout(y$c);var y$e,y$Z,y$X,y$u,y$P,y$O=0,y$s=y$c.length,y$n=y$_._getCSSStyle(),y$m=y$n.letterSpacing,y$H=y$n.leading,y$B=y$n.lineHeight,y$D=y$n._widthAuto()||!y$n.wordWrap,y$U=y$D?999999:y$_.width,y$k=(y$_.height,0),y$a=y$n.italic?y$n.fontSize/3:0,y$G=2-y$n._getAlign(),y$w=y$n._getValign(),y$z=0!==y$w||0!=y$G||0!=y$B,y$L=0,y$q=0,y$K=0,y$M=0,y$f=new Array,y$A=y$f[0]=new y$F,y$v=!1,y$r=!1;y$A.h=0,y$n.italic&&(y$U-=y$n.fontSize/3);var y$C=0,y$y=!0;function y$$(){y$A.y=y$q,y$q+=y$A.h+y$H,0==y$A.h&&(y$q+=y$B),y$A.mWidth=y$C,y$C=0,y$A=new y$F,y$f.push(y$A),y$A.h=0,y$v=!(y$y=!(y$L=0))}for(y$O=0;y$O<y$s;y$O++)if(null!=(y$e=y$c[y$O]))if(y$y=!1,y$e instanceof laya.html.dom.HTMLBrElement)y$$(),y$A.y=y$q;else{if(y$e._isChar()){if((y$u=y$e).isWord)y$v=y$r||"\n"===y$u.char,y$A.wordStartIndex=y$A.elements.length;else{if(0<y$f.length&&y$U<y$L+y$K&&0<y$A.wordStartIndex){var y$T;y$T=y$A.elements.length-y$A.wordStartIndex+1,y$A.elements.length=y$A.wordStartIndex,y$O-=y$T,y$$();continue}y$v=!1,y$C+=y$u.width}y$K=y$u.width+y$m,y$M=y$u.height,y$r=!1,(y$v=y$v||y$U<y$L+y$K)&&y$$(),y$A.minTextHeight=Math.min(y$A.minTextHeight,y$e.height)}else y$Z=y$e._getCSSStyle(),y$P=y$e,y$X=y$Z.padding,0===y$Z._getCssFloat()||(y$z=!0),y$v=y$r||y$Z.lineElement,y$K=y$P.width*y$P._style._tf.scaleX+y$X[1]+y$X[3]+y$m,y$M=y$P.height*y$P._style._tf.scaleY+y$X[0]+y$X[2],y$r=y$Z.lineElement,(y$v=y$v||y$U<y$L+y$K&&y$Z.wordWrap)&&y$$();y$A.elements.push(y$e),y$A.h=Math.max(y$A.h,y$M),y$e.x=y$L,y$e.y=y$q,y$L+=y$K,y$A.w=y$L-y$m,y$A.y=y$q,y$k=Math.max(y$L+y$a,y$k)}else y$y||(y$L+=y$i.DIV_ELEMENT_PADDING),y$A.wordStartIndex=y$A.elements.length;if(y$q=y$A.y+y$A.h,y$z){var y$h=0,y$R=y$U;for(y$O=0,y$s=y$f.length;y$O<y$s;y$O++)y$f[y$O].updatePos(0,y$R,y$O,y$h,y$G,y$w,y$B),y$h+=Math.max(y$B,y$f[y$O].h+y$H);y$q=y$h}for(y$D&&(y$_.width=y$k),y$q>y$_.height&&(y$_.height=y$q),y$O=0,y$s=y$f.length;y$O<y$s;y$O++)y$f[y$O].revertOrder(y$U);return[y$k,y$q]},y$i._will=null,y$i.DIV_ELEMENT_PADDING=0,y$i}(),y$F=function(){function y$_(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}y$P(y$_,"laya.html.utils.LayoutLine");var y$c=y$_.prototype;return y$c.updatePos=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){var y$O,y$s=0;0<this.elements.length&&(y$s=(y$O=this.elements[this.elements.length-1]).x+y$O.width-this.elements[0].x);var y$n=0,y$m=NaN;1===y$X&&(y$n=(y$c-y$s)/2),2===y$X&&(y$n=y$c-y$s),0===y$P||0!=y$u||(y$u=1);for(var y$H=0,y$B=this.elements.length;y$H<y$B;y$H++){var y$D=(y$O=this.elements[y$H])._getCSSStyle();switch(0!==y$n&&(y$O.x+=y$n),y$D._getValign()){case 0:y$O.y=y$Z;break;case 1:var y$U=0;99999!=this.minTextHeight&&(y$U=this.minTextHeight);var y$k=(y$U+y$P)/2;y$k=Math.max(y$k,this.h),y$m=(laya.html.dom.HTMLImageElement,y$Z+y$k-y$O.height),y$O.y=y$m;break;case 2:y$O.y=y$Z+(y$P-y$O.height)}}},y$c.revertOrder=function(y$_){var y$c;if(0<this.elements.length){var y$e,y$Z=0;for(y$e=this.elements.length,y$Z=0;y$Z<y$e;y$Z++)(y$c=this.elements[y$Z]).x=y$_-y$c.x-y$c.width}},y$_}(),y$q=function(y$e){function y$c(){this.URI=null,this._href=null,y$c.__super.call(this),this._text=y$c._EMPTYTEXT,this.setStyle(new y$s(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}y$P(y$c,"laya.html.dom.HTMLElement",y$e);var y$_=y$c.prototype;return y$_.layaoutCallNative=function(){var y$_=0;if(this._childs&&0<(y$_=this._childs.length))for(var y$c=0;y$c<y$_;y$c++)this._childs[y$c].layaoutCallNative&&this._childs[y$c].layaoutCallNative();var y$e=this._getWords();y$e?laya.html.dom.HTMLElement.fillWords(this,y$e,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},y$_.appendChild=function(y$_){return this.addChild(y$_)},y$_._getWords2=function(){var y$_=this._text.text;if(!y$_||0===y$_.length)return null;var y$c,y$e,y$Z=0,y$X=0;if(this._text.drawWords)y$e=this._text.drawWords;else{for(y$X=(y$c=y$_.split(" ")).length-1,y$e=[],y$Z=0;y$Z<y$X;y$Z++)y$e.push(y$c[y$Z]," ");0<=y$X&&y$e.push(y$c[y$X]),this._text.drawWords=y$e}var y$u,y$P=this._text.words;if(y$P&&y$P.length===y$e.length)return y$P;null===y$P&&(this._text.words=y$P=[]),y$P.length=y$e.length;var y$O=this.style,y$s=y$O.font;for(y$Z=0,y$X=y$e.length;y$Z<y$X;y$Z++){y$u=y$w.measureText(y$e[y$Z],y$s);var y$n=y$P[y$Z]=new y$H(y$e[y$Z],y$u.width,y$u.height||y$O.fontSize,y$O);if(1<y$n.char.length&&(y$n.charNum=y$n.char),this.href){var y$m=new y$D;this.addChild(y$m),y$n.setSprite(y$m)}}return y$P},y$_._getWords=function(){if(!y$x.CharacterCache)return this._getWords2();var y$_=this._text.text;if(!y$_||0===y$_.length)return null;var y$c,y$e=this._text.words;if(y$e&&y$e.length===y$_.length)return y$e;null===y$e&&(this._text.words=y$e=[]),y$e.length=y$_.length;for(var y$Z=this.style,y$X=y$Z.font,y$u=0,y$P=y$_.length;y$u<y$P;y$u++)if(y$c=y$w.measureText(y$_.charAt(y$u),y$X)){var y$O=y$e[y$u]=new y$H(y$_.charAt(y$u),y$c.width,y$c.height||y$Z.fontSize,y$Z);if(this.href){var y$s=new y$D;this.addChild(y$s),y$O.setSprite(y$s)}}else console.warn("_getWords size is null"+y$_.charAt(y$u),y$X);return y$e},y$_.showLinkSprite=function(){var y$_=this._text.words;if(y$_)for(var y$c,y$e,y$Z=[],y$X=0;y$X<y$_.length;y$X++)y$e=y$_[y$X],(y$c=new y$D).graphics.drawRect(0,0,y$e.width,y$e.height,"#ff0000"),y$c.width=y$e.width,y$c.height=y$e.height,this.addChild(y$c),y$Z.push(y$c)},y$_._layoutLater=function(){var y$_=this.style;512&y$_._type||(y$_.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&y$_.block?(y$L.later(this),y$_._type|=512):this.parent&&this.parent._layoutLater())},y$_._setAttributes=function(y$_,y$c){switch(y$_){case"style":return void this.style.cssText(y$c);case"class":return void(this.className=y$c)}y$e.prototype._setAttributes.call(this,y$_,y$c)},y$_.updateHref=function(){if(null!=this._href){var y$_=this._getWords();if(y$_)for(var y$c,y$e,y$Z=0;y$Z<y$_.length;y$Z++)(y$e=(y$c=y$_[y$Z]).getSprite())&&(y$e.size(y$c.width,y$c.height),y$e.on("click",this,this.onLinkHandler))}},y$_.onLinkHandler=function(y$_){switch(y$_.type){case"click":for(var y$c=this;y$c;)y$c.event("link",[this.href]),y$c=y$c.parent}},y$_.formatURL=function(y$_){return this.URI?y$G.formatURL(y$_,this.URI?this.URI.path:null):y$_},y$O(0,y$_,"href",function(){return this._href},function(y$_){null!=(this._href=y$_)&&(this._getCSSStyle().underLine=1,this.updateHref())}),y$O(0,y$_,"color",null,function(y$_){this.style.color=y$_}),y$O(0,y$_,"onClick",null,function(y$_){y$Z._runScript("fn=function(event){"+y$_+";}"),this.on("click",this,void 0)}),y$O(0,y$_,"id",null,function(y$_){y$K.document.setElementById(y$_,this)}),y$O(0,y$_,"innerTEXT",function(){return this._text.text},function(y$_){this.text=y$_}),y$O(0,y$_,"style",function(){return this._style}),y$O(0,y$_,"text",function(){return this._text.text},function(y$_){this._text==y$c._EMPTYTEXT?this._text={text:y$_,words:null}:(this._text.text=y$_,this._text.words&&(this._text.words.length=0)),y$B.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),y$O(0,y$_,"parent",y$e.prototype._$get_parent,function(y$_){if(y$_ instanceof laya.html.dom.HTMLElement){var y$c=y$_;this.URI||(this.URI=y$c.URI),this.style.inherit(y$c.style)}y$Z.superSet(y$D,this,"parent",y$_)}),y$O(0,y$_,"className",null,function(y$_){this.style.attrs(y$K.document.styleSheets["."+y$_])}),y$c.fillWords=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$_.graphics.clear();for(var y$O=0,y$s=y$c.length;y$O<y$s;y$O++){var y$n=y$c[y$O];y$_.graphics.fillText(y$n.char,y$n.x+y$e,y$n.y+y$Z,y$X,y$u,"left",y$P)}},y$c._EMPTYTEXT={text:null,words:null},y$c}(y$D),y$c=(function(y$_){function y$c(){y$c.__super.call(this),this.style.lineElement=!0,this.style.block=!0}y$P(y$c,"laya.html.dom.HTMLBrElement",y$q)}(),function(y$_){function y$c(){this.contextHeight=NaN,this.contextWidth=NaN,y$c.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}y$P(y$c,"laya.html.dom.HTMLDivElement",y$_);var y$e=y$c.prototype;return y$e.appendHTML=function(y$_){y$z.parse(this,y$_,this.URI),this.layout()},y$e._addChildsToLayout=function(y$c){var y$_=this._getWords();if(null==y$_&&0==this._childs.length)return!1;y$_&&y$_.forEach(function(y$_){y$c.push(y$_)});for(var y$e=!0,y$Z=0,y$X=this._childs.length;y$Z<y$X;y$Z++){var y$u=this._childs[y$Z];y$e?y$e=!1:y$c.push(null),y$u._addToLayout(y$c)}return!0},y$e._addToLayout=function(y$_){this.layout()},y$e.layout=function(){if(this.style){this.style._type|=512;var y$_=y$L.layout(this);if(y$_){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new y$m);var y$c=this._$P.mHtmlBounds;y$c.x=y$c.y=0,y$c.width=this.contextWidth=y$_[0],y$c.height=this.contextHeight=y$_[1],this.setBounds(y$c)}}},y$O(0,y$e,"height",function(){return this._height?this._height:this.contextHeight},y$_.prototype._$set_height),y$O(0,y$e,"innerHTML",null,function(y$_){this.destroyChildren(),this.appendHTML(y$_)}),y$O(0,y$e,"width",function(){return this._width?this._width:this.contextWidth},function(y$_){var y$c=!1;y$c=0===y$_?y$_!=this._width:y$_!=this.width,y$Z.superSet(y$q,this,"width",y$_),y$c&&this.layout()}),y$c}(y$q)),y$K=function(y$_){function y$c(){this.all=new Array,this.styleSheets=y$s.styleSheets,y$c.__super.call(this)}y$P(y$c,"laya.html.dom.HTMLDocument",y$q);var y$e=y$c.prototype;return y$e.getElementById=function(y$_){return this.all[y$_]},y$e.setElementById=function(y$_,y$c){this.all[y$_]=y$c},y$X(y$c,["document",function(){return this.document=new y$c}]),y$c}();(function(y$_){function y$c(){this._tex=null,this._url=null,this._renderArgs=[],y$c.__super.call(this),this.style.block=!0}y$P(y$c,"laya.html.dom.HTMLImageElement",y$q);var y$e=y$c.prototype;y$e._addToLayout=function(y$_){!this._style.absolute&&y$_.push(this)},y$e.render=function(y$_,y$c,y$e){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(y$k.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,y$_.ctx.drawTexture2(y$c,y$e,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},y$e.layaoutCallNative=function(){var y$_=0;if(this._childs&&0<(y$_=this._childs.length))for(var y$c=0;y$c<y$_;y$c++)this._childs[y$c].layaoutCallNative&&this._childs[y$c].layaoutCallNative()},y$O(0,y$e,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(y$_){this._width!==y$_&&(this._width=y$_,this._style.width=y$_,this.repaint())}),y$O(0,y$e,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(y$_){this._height!==y$_&&(this._height=y$_,this._style.height=y$_,this.repaint())}),y$e.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),y$n.clearCache(this,this._url),this._tex=null),y$q.prototype.destroy.call(this)},y$e.onloaded=function(){var y$_=this._style;y$_&&!y$_.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),y$_&&!y$_.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),y$B.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},y$e._loadImageComplete=function(y$_,y$c,y$e){if(!this._destroyed)if(null!=y$e)if(y$e instanceof ArrayBuffer){var y$Z=new DataView(y$e);new laya.webgl.resource.WebGLImage(new Uint8Array(y$e,8),y$_,0,!1,y$Z.getUint32(0),y$Z.getUint32(4));this.onloaded()}else if(y$e instanceof y$a)y$n.imgMgrSet[y$_]=y$c,y$u.imgMgrLock(y$_,y$n.imgMgrSet[y$_]),this._url=y$_,this._tex=y$e,y$n.keepCache(this,y$_),y$n.cacheRes(y$_,this._tex),this.onloaded();else{var y$X=-1!=y$_.indexOf(".png",y$_.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(y$e,y$_,y$X,!1,y$e.width,y$e.height);this.onloaded()}else this.event("error","Load image failed")},y$O(0,y$e,"src",null,function(y$_){(y$_=this.formatURL(y$_),this._url!=y$_)&&(null!=this._tex&&(y$n.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=y$_,(this._tex=y$n.getRes(y$_))?(y$n.keepCache(this,y$_),this.onloaded()):y$u.imgMgrLoad(y$_,this._loadImageComplete.bind(this),2,!1))})})(),function(y$_){function y$c(){this.type=null,y$c.__super.call(this),this.visible=!1}y$P(y$c,"laya.html.dom.HTMLLinkElement",y$_);var y$e=y$c.prototype;y$e._onload=function(y$_){switch(this.type){case"text/css":y$s.parseCSS(y$_,this.URI)}},y$O(0,y$e,"href",y$_.prototype._$get_href,function(y$_){var y$c=this;y$_=this.formatURL(y$_),this.URI=new y$G(y$_);var y$e=new y$n;y$e.once("complete",null,function(y$_){y$c._onload(y$_)}),y$e.load(y$_,"text")}),y$c._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(y$q),function(y$_){function y$c(){y$c.__super.call(this),this.visible=!1}y$P(y$c,"laya.html.dom.HTMLStyleElement",y$_),y$O(0,y$c.prototype,"text",y$_.prototype._$get_text,function(y$_){y$s.parseCSS(y$_,null)})}(y$q),function(y$_){function y$c(){y$c.__super.call(this),this._getCSSStyle().valign="middle"}y$P(y$c,"laya.html.dom.HTMLIframeElement",y$_),y$O(0,y$c.prototype,"href",y$_.prototype._$get_href,function(y$e){var y$Z=this;y$e=this.formatURL(y$e);var y$_=new y$n;y$_.once("complete",null,function(y$_){var y$c=y$Z.URI;y$Z.URI=new y$G(y$e),y$Z.innerHTML=y$_,!y$c||(y$Z.URI=y$c)}),y$_.load(y$e,"text")})}(y$c)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(y$_,y$c){"use strict";for(var y$e in Object.defineProperty(y$c,"__esModule",{value:!0}),Laya){var y$Z=Laya[y$e];y$Z&&y$Z.__isclass&&(y$c[y$e]=y$Z)}}),function(y$_,y$c,y$k){y$k.un,y$k.uns;var y$Z=y$k.static,y$u=y$k.class,y$X=y$k.getset,y$e=(y$k.__newvec,laya.display.Animation),y$a=(laya.utils.Browser,laya.utils.ClassUtils),y$P=laya.filters.ColorFilter,y$O=laya.utils.Ease,y$s=laya.events.Event,y$n=(laya.events.EventDispatcher,laya.display.css.Font),y$m=laya.display.FrameAnimation,y$H=laya.display.Graphics,y$B=laya.utils.Handler,y$D=laya.display.Input,y$w=laya.net.Loader,y$U=(laya.display.Node,laya.maths.Point),y$G=laya.maths.Rectangle,y$z=laya.renders.Render,y$L=laya.display.Sprite,y$q=laya.display.Text,y$K=laya.resource.Texture,y$M=laya.utils.Tween,y$f=laya.utils.Utils,y$A=laya.utils.WeakObject;y$k.interface("laya.ui.IItem"),y$k.interface("laya.ui.ISelect"),y$k.interface("laya.ui.IRender"),y$k.interface("laya.ui.IComponent"),y$k.interface("laya.ui.IBox","IComponent");var y$v=function(){function y$_(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return y$u(y$_,"laya.ui.LayoutStyle"),y$Z(y$_,["EMPTY",function(){return this.EMPTY=new y$_}]),y$_}(),y$r=function(){function y$_(){}return y$u(y$_,"laya.ui.Styles"),y$_.labelColor="#000000",y$_.buttonStateNum=3,y$_.scrollBarMinNum=15,y$_.scrollBarDelayTime=500,y$Z(y$_,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),y$_}(),y$C=function(){function y$X(){}return y$u(y$X,"laya.ui.UIUtils"),y$X.fillArray=function(y$_,y$c,y$e){var y$Z=y$_.concat();if(y$c)for(var y$X=y$c.split(","),y$u=0,y$P=Math.min(y$Z.length,y$X.length);y$u<y$P;y$u++){var y$O=y$X[y$u];y$Z[y$u]="true"==y$O||"false"!=y$O&&y$O,null!=y$e&&(y$Z[y$u]=y$e(y$O))}return y$Z},y$X.toColor=function(y$_){return y$f.toHexColor(y$_)},y$X.gray=function(y$_,y$c){void 0===y$c&&(y$c=!0),y$c?y$X.addFilter(y$_,y$X.grayFilter):y$X.clearFilter(y$_,y$P)},y$X.addFilter=function(y$_,y$c){var y$e=y$_.filters||[];y$e.push(y$c),y$_.filters=y$e},y$X.clearFilter=function(y$_,y$c){var y$e=y$_.filters;if(null!=y$e&&0<y$e.length){for(var y$Z=y$e.length-1;-1<y$Z;y$Z--){var y$X=y$e[y$Z];y$k.__typeof(y$X,y$c)&&y$e.splice(y$Z,1)}y$_.filters=y$e}},y$X._getReplaceStr=function(y$_){return y$X.escapeSequence[y$_]},y$X.adptString=function(y$_){return y$_.replace(/\\(\w)/g,y$X._getReplaceStr)},y$X.getBindFun=function(y$_){var y$c=y$X._funMap.get(y$_);if(null==y$c){var y$e='"'+y$_+'"',y$Z="(function(data){if(data==null)return;with(data){try{\nreturn "+(y$e=y$e.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";y$c=y$k._runScript(y$Z),y$X._funMap.set(y$_,y$c)}return y$c},y$Z(y$X,["grayFilter",function(){return this.grayFilter=new y$P([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new y$A}]),y$X}(),y$y=function(){function y$_(){}return y$u(y$_,"UIConfig"),y$_.touchScrollEnable=!0,y$_.mouseWheelEnable=!0,y$_.showButtons=!0,y$_.popupBgColor="#000000",y$_.popupBgAlpha=.5,y$_.closeDialogOnSide=!0,y$_}(),y$$=function(y$e){function y$G(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,y$G.__super.call(this),this._weakKeys=[]}y$u(y$G,"laya.ui.AutoBitmap",y$e);var y$_=y$G.prototype;return y$_.destroy=function(){if(y$w.clearObject(this,this._weakKey),this._weakKeys){for(var y$_=0,y$c=this._weakKeys.length;y$_<y$c;++y$_)y$w.clearObject(this,this._weakKeys[y$_]);this._weakKeys=null}y$e.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},y$_._setChanged=function(){this._isChanged||(this._isChanged=!0,y$k.timer.callLater(this,this.changeSource))},y$_.changeSource=function(){this._isChanged=!1;var y$_=this._source;if(y$_&&y$_.bitmap){var y$c=this.width,y$e=this.height,y$Z=this._sizeGrid,y$X=y$_.sourceWidth,y$u=y$_.sourceHeight;if(!y$Z||y$X===y$c&&y$u===y$e)this.cleanByTexture(y$_,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,y$c,y$e);else{y$w.clearObject(this,this._weakKey),y$_.$_GID||(y$_.$_GID=y$f.getGID());var y$P=y$_.$_GID+"."+y$c+"."+y$e+"."+y$Z.join("."),y$O=y$w.findObject(y$P);if(y$f.isOKCmdList(y$O))return this._weakKey=y$P,y$w.keepObject(this,this._weakKey),void(this.cmds=y$O);this.clear();var y$s,y$n,y$m=y$Z[0],y$H=y$Z[1],y$B=y$Z[2],y$D=y$Z[3],y$U=y$Z[4],y$k=!1;if(y$c==y$X&&(y$D=y$H=0),y$e==y$u&&(y$m=y$B=0),y$c<y$D+y$H){var y$a=y$c;y$k=!0,y$c=y$D+y$H,this.save(),this.clipRect(0,0,y$a,y$e)}y$D&&y$m&&(y$s=y$G.getTexture(y$_,0,0,y$D,y$m),y$n=this._weakKeys[0],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[0]=y$s.weakKey),this.drawTexture(y$s,0,0,y$D,y$m)):(y$w.clearObject(this,y$n),this._weakKeys[0]="")),y$H&&y$m&&(y$s=y$G.getTexture(y$_,y$X-y$H,0,y$H,y$m),y$n=this._weakKeys[1],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[1]=y$s.weakKey),this.drawTexture(y$s,y$c-y$H,0,y$H,y$m)):(y$w.clearObject(this,y$n),this._weakKeys[1]="")),y$D&&y$B&&(y$s=y$G.getTexture(y$_,0,y$u-y$B,y$D,y$B),y$n=this._weakKeys[2],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[2]=y$s.weakKey),this.drawTexture(y$s,0,y$e-y$B,y$D,y$B)):(y$w.clearObject(this,y$n),this._weakKeys[2]="")),y$H&&y$B&&(y$s=y$G.getTexture(y$_,y$X-y$H,y$u-y$B,y$H,y$B),y$n=this._weakKeys[3],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[3]=y$s.weakKey),this.drawTexture(y$s,y$c-y$H,y$e-y$B,y$H,y$B)):(y$w.clearObject(this,y$n),this._weakKeys[3]="")),y$m&&(y$s=y$G.getTexture(y$_,y$D,0,y$X-y$D-y$H,y$m),y$n=this._weakKeys[4],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[4]=y$s.weakKey),this.drawBitmap(y$U,y$s,y$D,0,y$c-y$D-y$H,y$m)):(y$w.clearObject(this,y$n),this._weakKeys[4]="")),y$B&&(y$s=y$G.getTexture(y$_,y$D,y$u-y$B,y$X-y$D-y$H,y$B),y$n=this._weakKeys[5],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[5]=y$s.weakKey),this.drawBitmap(y$U,y$s,y$D,y$e-y$B,y$c-y$D-y$H,y$B)):(y$w.clearObject(this,y$n),this._weakKeys[5]="")),y$D&&(y$s=y$G.getTexture(y$_,0,y$m,y$D,y$u-y$m-y$B),y$n=this._weakKeys[6],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[6]=y$s.weakKey),this.drawBitmap(y$U,y$s,0,y$m,y$D,y$e-y$m-y$B)):(y$w.clearObject(this,y$n),this._weakKeys[6]="")),y$H&&(y$s=y$G.getTexture(y$_,y$X-y$H,y$m,y$H,y$u-y$m-y$B),y$n=this._weakKeys[7],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[7]=y$s.weakKey),this.drawBitmap(y$U,y$s,y$c-y$H,y$m,y$H,y$e-y$m-y$B)):(y$w.clearObject(this,y$n),this._weakKeys[7]="")),y$s=y$G.getTexture(y$_,y$D,y$m,y$X-y$D-y$H,y$u-y$m-y$B),y$n=this._weakKeys[8],y$s?(y$n!=y$s.weakKey&&(y$w.clearObject(this,y$n),y$w.keepObject(this,y$s.weakKey),this._weakKeys[8]=y$s.weakKey),this.drawBitmap(y$U,y$s,y$D,y$m,y$c-y$D-y$H,y$e-y$m-y$B)):(y$w.clearObject(this,y$n),this._weakKeys[8]=""),y$k&&this.restore(),this.autoCacheCmd&&!y$z.isConchApp&&(y$w.saveObject(y$P,this.cmds,null),this._weakKey=y$P,y$w.keepObject(this,this._weakKey))}this._repaint()}},y$_.drawBitmap=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=0),y$X<.1||y$u<.1||(!y$_||y$c.width==y$X&&y$c.height==y$u?this.drawTexture(y$c,y$e,y$Z,y$X,y$u):this.fillTexture(y$c,y$e,y$Z,y$X,y$u))},y$_.clear=function(y$_){void 0===y$_&&(y$_=!0),y$e.prototype.clear.call(this,!1)},y$X(0,y$_,"sizeGrid",function(){return this._sizeGrid},function(y$_){this._sizeGrid=y$_,this._setChanged()}),y$X(0,y$_,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(y$_){this._width!=y$_&&(this._width=y$_,this._setChanged())}),y$X(0,y$_,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(y$_){this._height!=y$_&&(this._height=y$_,this._setChanged())}),y$X(0,y$_,"source",function(){return this._source},function(y$_){y$_?(this._source=y$_,this._setChanged()):(this._source=null,this.clear())}),y$G.getTexture=function(y$_,y$c,y$e,y$Z,y$X){y$Z<=0&&(y$Z=1),y$X<=0&&(y$X=1),y$_.$_GID||(y$_.$_GID=y$f.getGID());var y$u=y$_.$_GID+"."+y$c+"."+y$e+"."+y$Z+"."+y$X,y$P=y$w.findObject(y$u);if((!y$P||!y$P.source)&&(y$P=y$K.createFromTexture(y$_,y$c,y$e,y$Z,y$X))){if(y$_.alphaTexture){var y$O=y$_.width/y$_.alphaTexture.width;y$P.alphaTexture=y$K.createFromTexture(y$_.alphaTexture,y$c/y$O,y$e/y$O,y$Z/y$O,y$X/y$O)}y$w.saveObject(y$u,y$P),y$P.weakKey=y$u}return y$P},y$G}(y$H),y$T=(function(y$_){function y$c(){y$c.__super.call(this)}y$u(y$c,"laya.ui.UIEvent",y$s),y$c.SHOW_TIP="showtip",y$c.HIDE_TIP="hidetip"}(),function(y$c){function y$_(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,y$_.__super.call(this),this._layout=y$v.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}y$u(y$_,"laya.ui.Component",y$c);var y$e=y$_.prototype;return y$k.imps(y$e,{"laya.ui.IComponent":!0}),y$e.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},y$e.preinitialize=function(){},y$e.createChildren=function(){},y$e.initialize=function(){},y$e.callLater=function(y$_,y$c){y$k.timer.callLater(this,y$_,y$c)},y$e.runCallLater=function(y$_){y$k.timer.runCallLater(this,y$_)},y$e.commitMeasure=function(){},y$e.changeSize=function(){this.event("resize")},y$e.getLayout=function(){return this._layout===y$v.EMPTY&&(this._layout=new y$v),this._layout},y$e._setLayoutEnabled=function(y$_){this._layout&&this._layout.enable!=y$_&&(this._layout.enable=y$_,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},y$e.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},y$e.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},y$e.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},y$e.resetLayoutX=function(){var y$_=this._layout;if(isNaN(y$_.anchorX)||(this.pivotX=y$_.anchorX*this.width),this.layoutEnabled){var y$c=this.parent;y$c&&(isNaN(y$_.centerX)?isNaN(y$_.left)?isNaN(y$_.right)||(this.x=Math.round(y$c.width-this.displayWidth-y$_.right+this.pivotX*this.scaleX)):(this.x=Math.round(y$_.left+this.pivotX*this.scaleX),isNaN(y$_.right)||(this.width=(y$c._width-y$_.left-y$_.right)/(this.scaleX||.01))):this.x=Math.round(.5*(y$c.width-this.displayWidth)+y$_.centerX+this.pivotX*this.scaleX))}},y$e.resetLayoutY=function(){var y$_=this._layout;if(isNaN(y$_.anchorY)||(this.pivotY=y$_.anchorY*this.height),this.layoutEnabled){var y$c=this.parent;y$c&&(isNaN(y$_.centerY)?isNaN(y$_.top)?isNaN(y$_.bottom)||(this.y=Math.round(y$c.height-this.displayHeight-y$_.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(y$_.top+this.pivotY*this.scaleY),isNaN(y$_.bottom)||(this.height=(y$c._height-y$_.top-y$_.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(y$c.height-this.displayHeight)+y$_.centerY+this.pivotY*this.scaleY))}},y$e.onMouseOver=function(y$_){y$k.stage.event("showtip",this._toolTip)},y$e.onMouseOut=function(y$_){y$k.stage.event("hidetip",this._toolTip)},y$X(0,y$e,"displayWidth",function(){return this.width*this.scaleX}),y$X(0,y$e,"width",function(){return this._width?this._width:this.measureWidth},function(y$_){this._width!=y$_&&(this._width=y$_,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),y$X(0,y$e,"measureWidth",function(){var y$_=0;this.commitMeasure();for(var y$c=this.numChildren-1;-1<y$c;y$c--){var y$e=this.getChildAt(y$c);y$e.visible&&(y$_=Math.max(y$e.x+y$e.width*y$e.scaleX,y$_))}return y$_}),y$X(0,y$e,"displayHeight",function(){return this.height*this.scaleY}),y$X(0,y$e,"height",function(){return this._height?this._height:this.measureHeight},function(y$_){this._height!=y$_&&(this._height=y$_,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),y$X(0,y$e,"dataSource",function(){return this._dataSource},function(y$_){for(var y$c in this._dataSource=y$_,this._dataSource)this.hasOwnProperty(y$c)&&"function"!=typeof this[y$c]&&(this[y$c]=this._dataSource[y$c])}),y$X(0,y$e,"scaleY",y$c.prototype._$get_scaleY,function(y$_){y$k.superGet(y$L,this,"scaleY")!=y$_&&(y$k.superSet(y$L,this,"scaleY",y$_),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),y$X(0,y$e,"measureHeight",function(){var y$_=0;this.commitMeasure();for(var y$c=this.numChildren-1;-1<y$c;y$c--){var y$e=this.getChildAt(y$c);y$e.visible&&(y$_=Math.max(y$e.y+y$e.height*y$e.scaleY,y$_))}return y$_}),y$X(0,y$e,"scaleX",y$c.prototype._$get_scaleX,function(y$_){y$k.superGet(y$L,this,"scaleX")!=y$_&&(y$k.superSet(y$L,this,"scaleX",y$_),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),y$X(0,y$e,"top",function(){return this._layout.top},function(y$_){y$_!=this._layout.top&&(this.getLayout().top=y$_,this._setLayoutEnabled(!0)),this.resetLayoutY()}),y$X(0,y$e,"bottom",function(){return this._layout.bottom},function(y$_){y$_!=this._layout.bottom&&(this.getLayout().bottom=y$_,this._setLayoutEnabled(!0)),this.resetLayoutY()}),y$X(0,y$e,"left",function(){return this._layout.left},function(y$_){y$_!=this._layout.left&&(this.getLayout().left=y$_,this._setLayoutEnabled(!0)),this.resetLayoutX()}),y$X(0,y$e,"right",function(){return this._layout.right},function(y$_){y$_!=this._layout.right&&(this.getLayout().right=y$_,this._setLayoutEnabled(!0)),this.resetLayoutX()}),y$X(0,y$e,"centerX",function(){return this._layout.centerX},function(y$_){y$_!=this._layout.centerX&&(this.getLayout().centerX=y$_,this._setLayoutEnabled(!0)),this.resetLayoutX()}),y$X(0,y$e,"centerY",function(){return this._layout.centerY},function(y$_){y$_!=this._layout.centerY&&(this.getLayout().centerY=y$_,this._setLayoutEnabled(!0)),this.resetLayoutY()}),y$X(0,y$e,"anchorX",function(){return this._layout.anchorX},function(y$_){y$_!=this._layout.anchorX&&(this.getLayout().anchorX=y$_,this._setLayoutEnabled(!0)),this.resetLayoutX()}),y$X(0,y$e,"anchorY",function(){return this._layout.anchorY},function(y$_){y$_!=this._layout.anchorY&&(this.getLayout().anchorY=y$_,this._setLayoutEnabled(!0)),this.resetLayoutY()}),y$X(0,y$e,"tag",function(){return this._tag},function(y$_){this._tag=y$_}),y$X(0,y$e,"toolTip",function(){return this._toolTip},function(y$_){this._toolTip!=y$_&&(null!=(this._toolTip=y$_)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),y$X(0,y$e,"comXml",function(){return this._comXml},function(y$_){this._comXml=y$_}),y$X(0,y$e,"gray",function(){return this._gray},function(y$_){y$_!==this._gray&&(this._gray=y$_,y$C.gray(this,y$_))}),y$X(0,y$e,"disabled",function(){return this._disabled},function(y$_){y$_!==this._disabled&&(this.gray=this._disabled=y$_,this.mouseEnabled=!y$_)}),y$_}(y$L)),y$h=function(y$_){function y$c(){this.lockLayer=null,this.popupEffect=function(y$_){y$_.scale(1,1),y$M.from(y$_,{x:y$k.stage.width/2,y:y$k.stage.height/2,scaleX:0,scaleY:0},300,y$O.backOut,y$B.create(this,this.doOpen,[y$_]))},this.closeEffect=function(y$_,y$c){y$M.to(y$_,{x:y$k.stage.width/2,y:y$k.stage.height/2,scaleX:0,scaleY:0},300,y$O.strongOut,y$B.create(this,this.doClose,[y$_,y$c]))},y$c.__super.call(this),this.maskLayer=new y$L,this.popupEffectHandler=y$B.create(this,this.popupEffect,null,!1),this.closeEffectHandler=y$B.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,y$k.stage.addChild(this),y$k.stage.on("resize",this,this._onResize),y$y.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}y$u(y$c,"laya.ui.DialogManager",y$L);var y$e=y$c.prototype;return y$e._closeOnSide=function(){var y$_=this.getChildAt(this.numChildren-1);y$_ instanceof laya.ui.Dialog&&y$_.close("side")},y$e.setLockView=function(y$_){this.lockLayer||(this.lockLayer=new y$R,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(y$k.stage.width,y$k.stage.height)),this.lockLayer.removeChildren(),y$_&&(y$_.centerX=y$_.centerY=0,this.lockLayer.addChild(y$_))},y$e._onResize=function(y$_){var y$c=this.maskLayer.width=y$k.stage.width,y$e=this.maskLayer.height=y$k.stage.height;this.lockLayer&&this.lockLayer.size(y$c,y$e),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,y$c,y$e,y$y.popupBgColor),this.maskLayer.alpha=y$y.popupBgAlpha;for(var y$Z=this.numChildren-1;-1<y$Z;y$Z--){var y$X=this.getChildAt(y$Z);y$X.popupCenter&&this._centerDialog(y$X)}},y$e._centerDialog=function(y$_){y$_.x=Math.round((y$k.stage.width-y$_.width>>1)+y$_.pivotX),y$_.y=Math.round((y$k.stage.height-y$_.height>>1)+y$_.pivotY)},y$e.open=function(y$_,y$c,y$e){void 0===y$c&&(y$c=!1),void 0===y$e&&(y$e=!1),y$c&&this._closeAll(),y$_.popupCenter&&this._centerDialog(y$_),this.addChild(y$_),(y$_.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),y$e&&null!=y$_.popupEffect?y$_.popupEffect.runWith(y$_):this.doOpen(y$_),this.event("open")},y$e.doOpen=function(y$_){y$_.onOpened()},y$e.lock=function(y$_){this.lockLayer&&(y$_?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},y$e.close=function(y$_,y$c,y$e){void 0===y$e&&(y$e=!1),y$e&&null!=y$_.closeEffect?y$_.closeEffect.runWith([y$_,y$c]):this.doClose(y$_,y$c),this.event("close")},y$e.doClose=function(y$_,y$c){y$_.removeSelf(),y$_.isModal&&this._checkMask(),y$_.closeHandler&&y$_.closeHandler.runWith(y$c),y$_.onClosed(y$c)},y$e.closeAll=function(){this._closeAll(),this.event("close")},y$e._closeAll=function(){for(var y$_=this.numChildren-1;-1<y$_;y$_--){var y$c=this.getChildAt(y$_);y$c&&null!=y$c.close&&this.doClose(y$c)}},y$e.getDialogsByGroup=function(y$_){for(var y$c=[],y$e=this.numChildren-1;-1<y$e;y$e--){var y$Z=this.getChildAt(y$e);y$Z&&y$Z.group===y$_&&y$c.push(y$Z)}return y$c},y$e.closeByGroup=function(y$_){for(var y$c=[],y$e=this.numChildren-1;-1<y$e;y$e--){var y$Z=this.getChildAt(y$e);y$Z&&y$Z.group===y$_&&(y$Z.close(),y$c.push(y$Z))}return y$c},y$e._checkMask=function(){this.maskLayer.removeSelf();for(var y$_=this.numChildren-1;-1<y$_;y$_--){var y$c=this.getChildAt(y$_);if(y$c&&y$c.isModal)return void this.addChildAt(this.maskLayer,y$_)}},y$c}(),y$R=function(y$_){function y$c(){y$c.__super.call(this)}y$u(y$c,"laya.ui.Box",y$_);var y$e=y$c.prototype;return y$k.imps(y$e,{"laya.ui.IBox":!0}),y$X(0,y$e,"dataSource",y$_.prototype._$get_dataSource,function(y$_){for(var y$c in this._dataSource=y$_){var y$e=this.getChildByName(y$c);y$e?y$e.dataSource=y$_[y$c]:this.hasOwnProperty(y$c)&&"function"!=typeof this[y$c]&&(this[y$c]=y$_[y$c])}}),y$c}(y$T),y$i=function(y$c){function y$e(y$_,y$c){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,y$e.__super.call(this),this._labelColors=y$r.buttonLabelColors,this._stateNum=y$r.buttonStateNum,void 0===y$c&&(y$c=""),this.skin=y$_,this.label=y$c}y$u(y$e,"laya.ui.Button",y$c);var y$_=y$e.prototype;return y$k.imps(y$_,{"laya.ui.ISelect":!0}),y$_.destroy=function(y$_){y$w.clearCache(this,this._skin),y$w.clearObject(this,this._weakKey),void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(y$_),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},y$_.createChildren=function(){this.graphics=this._bitmap=new y$$},y$_.createText=function(){this._text||(this._text=new y$q,this._text.overflow=y$q.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},y$_.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},y$_.onMouse=function(y$_){if(!1!==this.toggle||!this._selected)return"click"===y$_.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=y$e.stateMap[y$_.type]))},y$_.changeClips=function(){var y$_=y$w.getRes(this._skin);if(y$_&&this._skin&&""!=this._skin){y$w.clearObject(this,this._weakKey);var y$c=y$_.sourceWidth,y$e=y$_.sourceHeight/this._stateNum;y$_.$_GID||(y$_.$_GID=y$f.getGID());var y$Z=y$_.$_GID+"-"+this._stateNum,y$X=y$w.findObject(y$Z);if(y$f.isOkTextureList(y$X)||(y$X=null),y$X)this._weakKey=y$Z,y$w.keepObject(this,this._weakKey),this._sources=y$X;else{if(this._sources=[],1===this._stateNum)this._sources.push(y$_);else for(var y$u=0;y$u<this._stateNum;y$u++){var y$P=y$K.createFromTexture(y$_,0,y$e*y$u,y$c,y$e);if(y$_.alphaTexture){var y$O=y$_.width/y$_.alphaTexture.width;y$P.alphaTexture=y$K.createFromTexture(y$_.alphaTexture,0/y$O,y$e*y$u/y$O,y$c/y$O,y$e/y$O)}this._sources.push(y$P)}y$w.saveObject(y$Z,this._sources),this._weakKey=y$Z,y$w.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||y$c,this._bitmap.height=this._height||y$e,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=y$c)}else console.warn("lose skin ",this._skin,this.name,this.__className)},y$_.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var y$_=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[y$_]),this.label&&(this._text.color=this._labelColors[y$_],this._strokeColors&&(this._text.strokeColor=this._strokeColors[y$_]))},y$_._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},y$X(0,y$_,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(y$_){this.createText(),this._text.strokeColor=y$_}),y$X(0,y$_,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),y$X(0,y$_,"skin",function(){return this._skin},function(y$_){this._skin!=y$_&&(y$w.clearCache(this,this._skin),this._skin=y$_,y$w.keepCache(this,this._skin),this.callLater(this.changeClips),this._setStateChanged())}),y$X(0,y$_,"state",function(){return this._state},function(y$_){this._state!=y$_&&(this._state=y$_,this._setStateChanged())}),y$X(0,y$_,"text",function(){return this.createText(),this._text}),y$X(0,y$_,"stateNum",function(){return this._stateNum},function(y$_){"string"==typeof y$_&&(y$_=parseInt(y$_)),this._stateNum!=y$_&&(this._stateNum=y$_<1?1:3<y$_?3:y$_,this.callLater(this.changeClips))}),y$X(0,y$_,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(y$_){this._strokeColors=y$C.fillArray(y$r.buttonLabelColors,y$_,String),this._setStateChanged()}),y$X(0,y$_,"labelColors",function(){return this._labelColors.join(",")},function(y$_){this._labelColors=y$C.fillArray(y$r.buttonLabelColors,y$_,String),this._setStateChanged()}),y$X(0,y$_,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),y$X(0,y$_,"label",function(){return this._text?this._text.text:null},function(y$_){(this._text||y$_)&&(this.createText(),this._text.text!=y$_&&(y$_&&!this._text.parent&&this.addChild(this._text),this._text.text=(y$_+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),y$X(0,y$_,"selected",function(){return this._selected},function(y$_){this._selected!=y$_&&(this._selected=y$_,this.state=this._selected?2:0,this.event("change"))}),y$X(0,y$_,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(y$_){this.createText(),this._text.padding=y$C.fillArray(y$r.labelPadding,y$_,Number)}),y$X(0,y$_,"labelSize",function(){return this.createText(),this._text.fontSize},function(y$_){this.createText(),this._text.fontSize=y$_}),y$X(0,y$_,"labelStroke",function(){return this.createText(),this._text.stroke},function(y$_){this.createText(),this._text.stroke=y$_}),y$X(0,y$_,"labelBold",function(){return this.createText(),this._text.bold},function(y$_){this.createText(),this._text.bold=y$_}),y$X(0,y$_,"labelFont",function(){return this.createText(),this._text.font},function(y$_){this.createText(),this._text.font=y$_}),y$X(0,y$_,"labelAlign",function(){return this.createText(),this._text.align},function(y$_){this.createText(),this._text.align=y$_}),y$X(0,y$_,"clickHandler",function(){return this._clickHandler},function(y$_){this._clickHandler=y$_}),y$X(0,y$_,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(y$_){this._bitmap.sizeGrid=y$C.fillArray(y$r.defaultSizeGrid,y$_,Number)}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$T,this,"width",y$_),this._autoSize&&(this._bitmap.width=y$_,this._text&&(this._text.width=y$_))}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$T,this,"height",y$_),this._autoSize&&(this._bitmap.height=y$_,this._text&&(this._text.height=y$_))}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)||"string"==typeof y$_?this.label=y$_+"":y$k.superSet(y$T,this,"dataSource",y$_)}),y$X(0,y$_,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(y$_){this._bitmap._offset=y$_?y$C.fillArray([1,1],y$_,Number):[]}),y$Z(y$e,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),y$e}(y$T),y$x=function(y$c){function y$Z(y$_,y$c,y$e){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,y$Z.__super.call(this),void 0===y$c&&(y$c=1),void 0===y$e&&(y$e=1),this._clipX=y$c,this._clipY=y$e,this.skin=y$_}y$u(y$Z,"laya.ui.Clip",y$c);var y$_=y$Z.prototype;return y$_.destroy=function(y$_){y$w.clearCache(this,this._skin),y$w.clearObject(this,this._weakKey),void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},y$_.dispose=function(){this.destroy(!0),y$k.loader.clearRes(this._skin)},y$_.createChildren=function(){this.graphics=this._bitmap=new y$$},y$_._onDisplay=function(y$_){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},y$_.changeClip=function(){if(this._clipChanged=!1,this._skin){var y$_=y$w.getRes(this._skin);y$_?this.loadComplete(this._skin,y$_):y$k.loader.load(this._skin,y$B.create(this,this.loadComplete,[this._skin]))}},y$_.loadComplete=function(y$_,y$c){if(y$_===this._skin&&y$c){y$w.clearObject(this,this._weakKey);var y$e=this._clipWidth||Math.ceil(y$c.sourceWidth/this._clipX),y$Z=this._clipHeight||Math.ceil(y$c.sourceHeight/this._clipY),y$X=this._skin+y$e+y$Z,y$u=y$w.findObject(y$X);if(y$f.isOkTextureList(y$u)||(y$u=null),y$u)this._weakKey=y$X,y$w.keepObject(this,this._weakKey),this._sources=y$u;else{this._sources=[];for(var y$P=0;y$P<this._clipY;y$P++)for(var y$O=0;y$O<this._clipX;y$O++){var y$s=y$K.createFromTexture(y$c,y$e*y$O,y$Z*y$P,y$e,y$Z);if(y$c.alphaTexture){var y$n=y$c.width/y$c.alphaTexture.width;y$s.alphaTexture=y$K.createFromTexture(y$c.alphaTexture,y$e*y$O/y$n,y$Z*y$P/y$n,y$e/y$n,y$Z/y$n)}this._sources.push(y$s)}y$w.saveObject(y$X,this._sources),this._weakKey=y$X,y$w.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},y$_.play=function(y$_,y$c){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=-1),this._isPlaying=!0,this.index=y$_,this._toIndex=y$c,this._index++,y$k.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},y$_._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},y$_.stop=function(){this._isPlaying=!1,y$k.timer.clear(this,this._loop),this.event("complete")},y$_._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},y$X(0,y$_,"interval",function(){return this._interval},function(y$_){this._interval!=y$_&&(this._interval=y$_,this._isPlaying&&this.play())}),y$X(0,y$_,"skin",function(){return this._skin},function(y$_){this._skin!=y$_&&(y$w.clearCache(this,this._skin),(this._skin=y$_)?(y$w.keepCache(this,this._skin),this._setClipChanged()):this._bitmap.source=null)}),y$X(0,y$_,"sources",function(){return this._sources},function(y$_){this._sources=y$_,this.index=this._index,this.event("loaded")}),y$X(0,y$_,"clipX",function(){return this._clipX},function(y$_){this._clipX=y$_||1,this._setClipChanged()}),y$X(0,y$_,"clipY",function(){return this._clipY},function(y$_){this._clipY=y$_||1,this._setClipChanged()}),y$X(0,y$_,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),y$X(0,y$_,"clipWidth",function(){return this._clipWidth},function(y$_){this._clipWidth=y$_,this._setClipChanged()}),y$X(0,y$_,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(y$_){this._bitmap.sizeGrid=y$C.fillArray(y$r.defaultSizeGrid,y$_,Number)}),y$X(0,y$_,"group",function(){return this._group},function(y$_){y$_&&this._skin&&y$w.setGroup(this._skin,y$_),this._group=y$_}),y$X(0,y$_,"clipHeight",function(){return this._clipHeight},function(y$_){this._clipHeight=y$_,this._setClipChanged()}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$T,this,"width",y$_),this._bitmap.width=y$_}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$T,this,"height",y$_),this._bitmap.height=y$_}),y$X(0,y$_,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),y$X(0,y$_,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),y$X(0,y$_,"index",function(){return this._index},function(y$_){this._index=y$_,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[y$_]),this.event("change")}),y$X(0,y$_,"autoPlay",function(){return this._autoPlay},function(y$_){this._autoPlay!=y$_&&((this._autoPlay=y$_)?this.play():this.stop())}),y$X(0,y$_,"isPlaying",function(){return this._isPlaying},function(y$_){this._isPlaying=y$_}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)&&Math.floor(y$_)==y$_||"string"==typeof y$_?this.index=parseInt(y$_):y$k.superSet(y$T,this,"dataSource",y$_)}),y$X(0,y$_,"bitmap",function(){return this._bitmap}),y$Z}(y$T),y$F=function(y$c){function y$_(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,y$_.__super.call(this)}y$u(y$_,"laya.ui.ColorPicker",y$c);var y$e=y$_.prototype;return y$e.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._colorPanel&&this._colorPanel.destroy(y$_),this._colorButton&&this._colorButton.destroy(y$_),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},y$e.createChildren=function(){this.addChild(this._colorButton=new y$i),this._colorPanel=new y$R,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new y$L),this._colorPanel.addChild(this._colorBlock=new y$L),this._colorPanel.addChild(this._colorInput=new y$D)},y$e.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},y$e.onPanelMouseDown=function(y$_){y$_.stopPropagation()},y$e.changePanel=function(){this._panelChanged=!1;var y$_=this._colorPanel.graphics;y$_.clear(),y$_.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(y$_=this._colorTiles.graphics).clear();for(var y$c=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],y$e=0;y$e<12;y$e++)for(var y$Z=0;y$Z<20;y$Z++){var y$X=0;y$X=0===y$Z?y$c[y$e]:1===y$Z?0:51*(((3*y$e+y$Z/6)%3<<0)+3*(y$e/6<<0))<<16|y$Z%6*51<<8|(y$e<<0)%6*51;var y$u=y$C.toColor(y$X);this._colors.push(y$u);var y$P=y$Z*this._gridSize,y$O=y$e*this._gridSize;y$_.drawRect(y$P,y$O,this._gridSize,this._gridSize,y$u,"#000000")}},y$e.onColorButtonClick=function(y$_){this._colorPanel.parent?this.close():this.open()},y$e.open=function(){var y$_=this.localToGlobal(new y$U),y$c=y$_.x+this._colorPanel.width<=y$k.stage.width?y$_.x:y$k.stage.width-this._colorPanel.width,y$e=y$_.y+this._colorButton.height;y$e=y$e+this._colorPanel.height<=y$k.stage.height?y$e:y$_.y-this._colorPanel.height,this._colorPanel.pos(y$c,y$e),this._colorPanel.zOrder=1001,y$k._currentStage.addChild(this._colorPanel),y$k.stage.on("mousedown",this,this.removeColorBox)},y$e.close=function(){y$k.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},y$e.removeColorBox=function(y$_){this.close()},y$e.onColorFieldKeyDown=function(y$_){13==y$_.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),y$_.stopPropagation())},y$e.onColorInputChange=function(y$_){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},y$e.onColorTilesClick=function(y$_){this.selectedColor=this.getColorByMouse(),this.close()},y$e.onColorTilesMouseMove=function(y$_){this._colorInput.focus=!1;var y$c=this.getColorByMouse();this._colorInput.text=y$c,this.drawBlock(y$c)},y$e.getColorByMouse=function(){var y$_=this._colorTiles.getMousePoint(),y$c=Math.floor(y$_.x/this._gridSize),y$e=Math.floor(y$_.y/this._gridSize);return this._colors[20*y$e+y$c]},y$e.drawBlock=function(y$_){var y$c=this._colorBlock.graphics;y$c.clear();var y$e=y$_||"#ffffff";y$c.drawRect(0,0,50,20,y$e,this._borderColor),y$_||y$c.drawLine(0,0,50,20,"#ff0000")},y$e.changeColor=function(){var y$_=this.graphics;y$_.clear();var y$c=this._selectedColor||"#000000";y$_.drawRect(0,0,this._colorButton.width,this._colorButton.height,y$c)},y$e._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},y$X(0,y$e,"inputBgColor",function(){return this._inputBgColor},function(y$_){this._inputBgColor=y$_,this._setPanelChanged()}),y$X(0,y$e,"selectedColor",function(){return this._selectedColor},function(y$_){this._selectedColor!=y$_&&(this._selectedColor=this._colorInput.text=y$_,this.drawBlock(y$_),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",y$s.EMPTY.setTo("change",this,this)))}),y$X(0,y$e,"skin",function(){return this._colorButton.skin},function(y$_){this._colorButton.skin=y$_,this.changeColor()}),y$X(0,y$e,"bgColor",function(){return this._bgColor},function(y$_){this._bgColor=y$_,this._setPanelChanged()}),y$X(0,y$e,"borderColor",function(){return this._borderColor},function(y$_){this._borderColor=y$_,this._setPanelChanged()}),y$X(0,y$e,"inputColor",function(){return this._inputColor},function(y$_){this._inputColor=y$_,this._setPanelChanged()}),y$_}(y$T),y$Y=function(y$c){function y$e(y$_,y$c){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,y$e.__super.call(this),this._itemColors=y$r.comboBoxItemColors,this.skin=y$_,this.labels=y$c}y$u(y$e,"laya.ui.ComboBox",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._button&&this._button.destroy(y$_),this._list&&this._list.destroy(y$_),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},y$_.createChildren=function(){this.addChild(this._button=new y$i),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},y$_._createList=function(){this._list=new y$g,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},y$_._setListEvent=function(y$_){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=y$B.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},y$_.onListDown=function(y$_){y$_.stopPropagation()},y$_.onScrollBarDown=function(y$_){y$_.stopPropagation()},y$_.onButtonMouseDown=function(y$_){this.callLater(this.switchTo,[!this._isOpen])},y$_.changeList=function(){this._listChanged=!1;var y$_=this.width-2,y$c=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:y$_,height:this._itemHeight,fontSize:this._itemSize,color:y$c}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},y$_.onlistItemMouse=function(y$_,y$c){var y$e=y$_.type;if("mouseover"===y$e||"mouseout"===y$e){if(this._isCustomList)return;var y$Z=this._list.getCell(y$c);if(!y$Z)return;var y$X=y$Z.getChildByName("label");y$X&&("mouseover"===y$e?(y$X.bgColor=this._itemColors[0],y$X.color=this._itemColors[1]):(y$X.bgColor=null,y$X.color=this._itemColors[2]))}else"click"===y$e&&(this.selectedIndex=y$c,this.isOpen=!1)},y$_.switchTo=function(y$_){this.isOpen=y$_},y$_.changeOpen=function(){this.isOpen=!this._isOpen},y$_.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var y$_=this._list.graphics;y$_.clear(),y$_.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var y$c=this._list.array||[],y$e=y$c.length=0,y$Z=this._labels.length;y$e<y$Z;y$e++)y$c.push({label:this._labels[y$e]});this._list.height=this._listHeight,this._list.array=y$c},y$_.changeSelected=function(){this._button.label=this.selectedLabel},y$_._onStageMouseWheel=function(y$_){this._list&&!this._list.contains(y$_.target)&&this.removeList(null)},y$_.removeList=function(y$_){y$k.stage.off("mousedown",this,this.removeList),y$k.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},y$X(0,y$_,"selectedIndex",function(){return this._selectedIndex},function(y$_){this._selectedIndex!=y$_&&(this._selectedIndex=y$_,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[y$s.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),y$X(0,y$_,"measureHeight",function(){return this._button.height}),y$X(0,y$_,"skin",function(){return this._button.skin},function(y$_){this._button.skin!=y$_&&(this._button.skin=y$_,this._listChanged=!0)}),y$X(0,y$_,"measureWidth",function(){return this._button.width}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$T,this,"width",y$_),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),y$X(0,y$_,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(y$_){this.selectedIndex=this._labels.indexOf(y$_)}),y$X(0,y$_,"labels",function(){return this._labels.join(",")},function(y$_){0<this._labels.length&&(this.selectedIndex=-1),y$_?this._labels=y$_.split(","):this._labels.length=0,this._itemChanged=!0}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$T,this,"height",y$_),this._button.height=this._height}),y$X(0,y$_,"selectHandler",function(){return this._selectHandler},function(y$_){this._selectHandler=y$_}),y$X(0,y$_,"visibleNum",function(){return this._visibleNum},function(y$_){this._visibleNum=y$_,this._listChanged=!0}),y$X(0,y$_,"labelBold",function(){return this._button.text.bold},function(y$_){this._button.text.bold=y$_}),y$X(0,y$_,"itemColors",function(){return String(this._itemColors)},function(y$_){this._itemColors=y$C.fillArray(this._itemColors,y$_,String),this._listChanged=!0}),y$X(0,y$_,"itemSize",function(){return this._itemSize},function(y$_){this._itemSize=y$_,this._listChanged=!0}),y$X(0,y$_,"scrollBar",function(){return this.list.scrollBar}),y$X(0,y$_,"isOpen",function(){return this._isOpen},function(y$_){if(this._isOpen!=y$_)if(this._isOpen=y$_,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var y$c=this.localToGlobal(y$U.TEMP.setTo(0,0)),y$e=y$c.y+this._button.height;y$e=y$e+this._listHeight<=y$k.stage.height?y$e:y$c.y-this._listHeight,this._list.pos(y$c.x,y$e),this._list.zOrder=1001,y$k._currentStage.addChild(this._list),y$k.stage.once("mousedown",this,this.removeList),y$k.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),y$X(0,y$_,"scrollBarSkin",function(){return this._scrollBarSkin},function(y$_){this._scrollBarSkin=y$_}),y$X(0,y$_,"sizeGrid",function(){return this._button.sizeGrid},function(y$_){this._button.sizeGrid=y$_}),y$X(0,y$_,"button",function(){return this._button}),y$X(0,y$_,"list",function(){return this._list||this._createList(),this._list},function(y$_){y$_&&(y$_.removeSelf(),this._isCustomList=!0,this._list=y$_,this._setListEvent(y$_),this._itemHeight=y$_.getCell(0).height+y$_.spaceY)}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)&&Math.floor(y$_)==y$_||"string"==typeof y$_?this.selectedIndex=parseInt(y$_):y$_ instanceof Array?this.labels=y$_.join(","):y$k.superSet(y$T,this,"dataSource",y$_)}),y$X(0,y$_,"labelColors",function(){return this._button.labelColors},function(y$_){this._button.labelColors!=y$_&&(this._button.labelColors=y$_)}),y$X(0,y$_,"labelPadding",function(){return this._button.text.padding.join(",")},function(y$_){this._button.text.padding=y$C.fillArray(y$r.labelPadding,y$_,Number)}),y$X(0,y$_,"labelSize",function(){return this._button.text.fontSize},function(y$_){this._button.text.fontSize=y$_}),y$X(0,y$_,"labelFont",function(){return this._button.text.font},function(y$_){this._button.text.font=y$_}),y$X(0,y$_,"stateNum",function(){return this._button.stateNum},function(y$_){this._button.stateNum=y$_}),y$e}(y$T),y$p=function(y$c){function y$e(y$_){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,y$e.__super.call(this),this._showButtons=y$y.showButtons,this._touchScrollEnable=y$y.touchScrollEnable,this._mouseWheelEnable=y$y.mouseWheelEnable,this.skin=y$_,this.max=1}y$u(y$e,"laya.ui.ScrollBar",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),this.stopScroll(),this.target=null,y$c.prototype.destroy.call(this,y$_),this.upButton&&this.upButton.destroy(y$_),this.downButton&&this.downButton.destroy(y$_),this.slider&&this.slider.destroy(y$_),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},y$_.createChildren=function(){this.addChild(this.slider=new y$o),this.addChild(this.upButton=new y$i),this.addChild(this.downButton=new y$i)},y$_.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},y$_.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},y$_.onButtonMouseDown=function(y$_){var y$c=y$_.currentTarget===this.upButton;this.slide(y$c),y$k.timer.once(y$r.scrollBarDelayTime,this,this.startLoop,[y$c]),y$k.stage.once("mouseup",this,this.onStageMouseUp)},y$_.startLoop=function(y$_){y$k.timer.frameLoop(1,this,this.slide,[y$_])},y$_.slide=function(y$_){y$_?this.value-=this._scrollSize:this.value+=this._scrollSize},y$_.onStageMouseUp=function(y$_){y$k.timer.clear(this,this.startLoop),y$k.timer.clear(this,this.slide)},y$_.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},y$_.changeSize=function(){y$c.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},y$_.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},y$_.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},y$_.setScroll=function(y$_,y$c,y$e){this.runCallLater(this.changeSize),this.slider.setSlider(y$_,y$c,y$e),this.slider.bar.visible=0<y$c,!this._hide&&this.autoHide&&(this.visible=!1)},y$_.onTargetMouseWheel=function(y$_){this.value-=y$_.delta*this._scrollSize,this.target=this._target},y$_.onTargetMouseDown=function(y$_){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new y$U),this._lastPoint.setTo(y$k.stage.mouseX,y$k.stage.mouseY),y$k.timer.clear(this,this.tweenMove),y$M.clearTween(this),y$k.stage.once("mouseup",this,this.onStageMouseUp2),y$k.stage.once("mouseout",this,this.onStageMouseUp2),y$k.timer.frameLoop(1,this,this.loop)},y$_.loop=function(){var y$_=y$k.stage.mouseY,y$c=y$k.stage.mouseX;if(this._lastOffset=this.isVertical?y$_-this._lastPoint.y:y$c-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?y$k.stage._canvasTransform.getScaleY():y$k.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=y$c,this._lastPoint.y=y$_,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},y$_.onStageMouseUp2=function(y$_){if(y$k.stage.off("mouseup",this,this.onStageMouseUp2),y$k.stage.off("mouseout",this,this.onStageMouseUp2),y$k.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?y$M.to(this,{value:this.min},this.elasticBackTime,y$O.sineOut,y$B.create(this,this.elasticOver)):this._value>this.max&&y$M.to(this,{value:this.max},this.elasticBackTime,y$O.sineOut,y$B.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?y$k.stage.mouseY-this._lastPoint.y:y$k.stage.mouseX-this._lastPoint.x);for(var y$c=0,y$e=Math.min(this._offsets.length,3),y$Z=0;y$Z<y$e;y$Z++)y$c+=this._offsets[this._offsets.length-1-y$Z];if(this._lastOffset=y$c/y$e,(y$c=Math.abs(this._lastOffset))<2)return void this.event("end");60<y$c&&(this._lastOffset=0<this._lastOffset?60:-60);var y$X=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));y$k.timer.frameLoop(1,this,this.tweenMove,[y$X])}},y$_.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&y$M.to(this,{alpha:0},500),this.event("end")},y$_.tweenMove=function(y$_){this._lastOffset*=this.rollRatio;var y$c=NaN;if(0<y$_&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,y$c=.5*-(this.min-y$_-this.value),this._lastOffset>y$c&&(this._lastOffset=y$c)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,y$c=.5*-(this.max+y$_-this.value),this._lastOffset<y$c&&(this._lastOffset=y$c))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(y$k.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?y$M.to(this,{value:this.min},this.elasticBackTime,y$O.sineOut,y$B.create(this,this.elasticOver)):this._value>this.max?y$M.to(this,{value:this.max},this.elasticBackTime,y$O.sineOut,y$B.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&y$M.to(this,{alpha:0},500)}},y$_.stopScroll=function(){this.onStageMouseUp2(null),y$k.timer.clear(this,this.tweenMove),y$M.clearTween(this)},y$X(0,y$_,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),y$X(0,y$_,"skin",function(){return this._skin},function(y$_){this._skin!=y$_&&(this._skin=y$_,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),y$X(0,y$_,"max",function(){return this.slider.max},function(y$_){this.slider.max=y$_}),y$X(0,y$_,"showButtons",function(){return this._showButtons},function(y$_){this._showButtons=y$_,this.callLater(this.changeScrollBar)}),y$X(0,y$_,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),y$X(0,y$_,"min",function(){return this.slider.min},function(y$_){this.slider.min=y$_}),y$X(0,y$_,"value",function(){return this._value},function(y$_){y$_!==this._value&&(this._value=y$_,this._isElastic||(this.slider._value!=y$_&&(this.slider._value=y$_,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),y$X(0,y$_,"isVertical",function(){return this.slider.isVertical},function(y$_){this.slider.isVertical=y$_}),y$X(0,y$_,"sizeGrid",function(){return this.slider.sizeGrid},function(y$_){this.slider.sizeGrid=y$_}),y$X(0,y$_,"scrollSize",function(){return this._scrollSize},function(y$_){this._scrollSize=y$_}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)||"string"==typeof y$_?this.value=Number(y$_):y$k.superSet(y$T,this,"dataSource",y$_)}),y$X(0,y$_,"thumbPercent",function(){return this._thumbPercent},function(y$_){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),y$_=1<=y$_?.99:y$_,this._thumbPercent=y$_,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*y$_,y$r.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*y$_,y$r.scrollBarMinNum))}),y$X(0,y$_,"target",function(){return this._target},function(y$_){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=y$_)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),y$X(0,y$_,"hide",function(){return this._hide},function(y$_){this._hide=y$_,this.visible=!y$_}),y$X(0,y$_,"touchScrollEnable",function(){return this._touchScrollEnable},function(y$_){this._touchScrollEnable=y$_,this.target=this._target}),y$X(0,y$_,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(y$_){this._mouseWheelEnable=y$_,this.target=this._target}),y$X(0,y$_,"tick",function(){return this.slider.tick},function(y$_){this.slider.tick=y$_}),y$e}(y$T),y$o=function(y$c){function y$e(y$_){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,y$e.__super.call(this),this.skin=y$_}y$u(y$e,"laya.ui.Slider",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._bg&&this._bg.destroy(y$_),this._bar&&this._bar.destroy(y$_),this._progress&&this._progress.destroy(y$_),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},y$_.createChildren=function(){this.addChild(this._bg=new y$Q),this.addChild(this._bar=new y$i)},y$_.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},y$_.onBarMouseDown=function(y$_){this._globalSacle||(this._globalSacle=new y$U),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=y$k.stage.mouseX,this._ty=y$k.stage.mouseY,y$k.stage.on("mousemove",this,this.mouseMove),y$k.stage.once("mouseup",this,this.mouseUp),y$k.stage.once("mouseout",this,this.mouseUp),this.showValueText()},y$_.showValueText=function(){if(this.showLabel){var y$_=laya.ui.Slider.label;this.addChild(y$_),y$_.textField.changeText(this._value+""),this.isVertical?(y$_.x=this._bar.x+20,y$_.y=.5*(this._bar.height-y$_.height)+this._bar.y):(y$_.y=this._bar.y-20,y$_.x=.5*(this._bar.width-y$_.width)+this._bar.x)}},y$_.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},y$_.mouseUp=function(y$_){y$k.stage.off("mousemove",this,this.mouseMove),y$k.stage.off("mouseup",this,this.mouseUp),y$k.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},y$_.mouseMove=function(y$_){var y$c=this._value;this.isVertical?(this._bar.y+=(y$k.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(y$k.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=y$k.stage.mouseX,this._ty=y$k.stage.mouseY;var y$e=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*y$e)/y$e,this._value!=y$c&&this.sendChangeEvent(),this.showValueText()},y$_.sendChangeEvent=function(y$_){void 0===y$_&&(y$_="change"),this.event(y$_),this.changeHandler&&this.changeHandler.runWith(this._value)},y$_.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},y$_.changeSize=function(){y$c.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},y$_.setSlider=function(y$_,y$c,y$e){this._value=-1,this._min=y$_,this._max=y$_<y$c?y$c:y$_,this.value=y$e<y$_?y$_:y$c<y$e?y$c:y$e},y$_.changeValue=function(){var y$_=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*y$_)/y$_,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var y$c=this._max-this._min;0===y$c&&(y$c=1),this.isVertical?(this._bar.y=(this._value-this._min)/y$c*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/y$c*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},y$_.onBgMouseDown=function(y$_){var y$c=this._bg.getMousePoint();this.isVertical?this.value=y$c.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=y$c.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},y$X(0,y$_,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),y$X(0,y$_,"skin",function(){return this._skin},function(y$_){if(this._skin!=y$_){this._skin=y$_,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var y$c=this._skin.replace(".png","$progress.png");y$w.getRes(y$c)&&(this._progress||(this.addChild(this._progress=new y$Q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=y$c),this.setBarPoint(),this.callLater(this.changeValue)}}),y$X(0,y$_,"allowClickBack",function(){return this._allowClickBack},function(y$_){this._allowClickBack!=y$_&&((this._allowClickBack=y$_)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),y$X(0,y$_,"max",function(){return this._max},function(y$_){this._max!=y$_&&(this._max=y$_,this.callLater(this.changeValue))}),y$X(0,y$_,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),y$X(0,y$_,"tick",function(){return this._tick},function(y$_){this._tick!=y$_&&(this._tick=y$_,this.callLater(this.changeValue))}),y$X(0,y$_,"sizeGrid",function(){return this._bg.sizeGrid},function(y$_){this._bg.sizeGrid=y$_,this._bar.sizeGrid=y$_,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),y$X(0,y$_,"min",function(){return this._min},function(y$_){this._min!=y$_&&(this._min=y$_,this.callLater(this.changeValue))}),y$X(0,y$_,"value",function(){return this._value},function(y$_){if(this._value!=y$_){var y$c=this._value;this._value=y$_,this.changeValue(),this._value!=y$c&&this.sendChangeEvent()}}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)||"string"==typeof y$_?this.value=Number(y$_):y$k.superSet(y$T,this,"dataSource",y$_)}),y$X(0,y$_,"bar",function(){return this._bar}),y$Z(y$e,["label",function(){return this.label=new y$J}]),y$e}(y$T),y$Q=function(y$c){function y$e(y$_){this._bitmap=null,this._skin=null,this._group=null,y$e.__super.call(this),this.skin=y$_}y$u(y$e,"laya.ui.Image",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,y$w.clearCache(this,this._skin)},y$_.dispose=function(){this.destroy(!0),y$w.clearCache(this,this._skin)},y$_.createChildren=function(){this.graphics=this._bitmap=new y$$},y$_.setSource=function(y$_,y$c){y$_===this._skin&&y$c&&(this.source=y$c,this.onCompResize())},y$X(0,y$_,"source",function(){return this._bitmap.source},function(y$_){this._bitmap&&(this._bitmap.source=y$_,this.event("loaded"),this.repaint())}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"string"==typeof(this._dataSource=y$_)?this.skin=y$_:y$k.superSet(y$T,this,"dataSource",y$_)}),y$X(0,y$_,"measureHeight",function(){return this._bitmap.height}),y$X(0,y$_,"skin",function(){return this._skin},function(y$_){if(this._skin!=y$_)if(y$w.clearCache(this,this._skin),this._skin=y$_){y$w.keepCache(this,this._skin);var y$c=y$w.getRes(y$_);y$c?(this.source=y$c,this.onCompResize()):y$k.loader.load(this._skin,y$B.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),y$X(0,y$_,"group",function(){return this._group},function(y$_){y$_&&this._skin&&y$w.setGroup(this._skin,y$_),this._group=y$_}),y$X(0,y$_,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(y$_){this._bitmap.sizeGrid=y$C.fillArray(y$r.defaultSizeGrid,y$_,Number)}),y$X(0,y$_,"measureWidth",function(){return this._bitmap.width}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$T,this,"width",y$_),this._bitmap.width=0==y$_?1e-7:y$_}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$T,this,"height",y$_),this._bitmap.height=0==y$_?1e-7:y$_}),y$e}(y$T),y$J=function(y$c){function y$e(y$_){this._tf=null,y$e.__super.call(this),void 0===y$_&&(y$_=""),y$n.defaultColor=y$r.labelColor,this.text=y$_}y$u(y$e,"laya.ui.Label",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._tf=null},y$_.createChildren=function(){this.addChild(this._tf=new y$q)},y$_.changeText=function(y$_){this._tf.changeText(y$_)},y$X(0,y$_,"padding",function(){return this._tf.padding.join(",")},function(y$_){this._tf.padding=y$C.fillArray(y$r.labelPadding,y$_,Number)}),y$X(0,y$_,"bold",function(){return this._tf.bold},function(y$_){this._tf.bold=y$_}),y$X(0,y$_,"align",function(){return this._tf.align},function(y$_){this._tf.align=y$_}),y$X(0,y$_,"text",function(){return this._tf.text},function(y$_){this._tf.text!=y$_&&(y$_&&(y$_=y$C.adptString(y$_+"")),this._tf.text=y$_,this.event("change"),this._width&&this._height||this.onCompResize())}),y$X(0,y$_,"italic",function(){return this._tf.italic},function(y$_){this._tf.italic=y$_}),y$X(0,y$_,"wordWrap",function(){return this._tf.wordWrap},function(y$_){this._tf.wordWrap=y$_}),y$X(0,y$_,"font",function(){return this._tf.font},function(y$_){this._tf.font=y$_}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)||"string"==typeof y$_?this.text=y$_+"":y$k.superSet(y$T,this,"dataSource",y$_)}),y$X(0,y$_,"color",function(){return this._tf.color},function(y$_){this._tf.color=y$_}),y$X(0,y$_,"valign",function(){return this._tf.valign},function(y$_){this._tf.valign=y$_}),y$X(0,y$_,"leading",function(){return this._tf.leading},function(y$_){this._tf.leading=y$_}),y$X(0,y$_,"fontSize",function(){return this._tf.fontSize},function(y$_){this._tf.fontSize=y$_}),y$X(0,y$_,"bgColor",function(){return this._tf.bgColor},function(y$_){this._tf.bgColor=y$_}),y$X(0,y$_,"borderColor",function(){return this._tf.borderColor},function(y$_){this._tf.borderColor=y$_}),y$X(0,y$_,"stroke",function(){return this._tf.stroke},function(y$_){this._tf.stroke=y$_}),y$X(0,y$_,"strokeColor",function(){return this._tf.strokeColor},function(y$_){this._tf.strokeColor=y$_}),y$X(0,y$_,"textField",function(){return this._tf}),y$X(0,y$_,"measureWidth",function(){return this._tf.width}),y$X(0,y$_,"measureHeight",function(){return this._tf.height}),y$X(0,y$_,"width",function(){return this._width||this._tf.text?y$k.superGet(y$T,this,"width"):0},function(y$_){y$k.superSet(y$T,this,"width",y$_),this._tf.width=y$_}),y$X(0,y$_,"height",function(){return this._height||this._tf.text?y$k.superGet(y$T,this,"height"):0},function(y$_){y$k.superSet(y$T,this,"height",y$_),this._tf.height=y$_}),y$X(0,y$_,"overflow",function(){return this._tf.overflow},function(y$_){this._tf.overflow=y$_}),y$X(0,y$_,"underline",function(){return this._tf.underline},function(y$_){this._tf.underline=y$_}),y$X(0,y$_,"underlineColor",function(){return this._tf.underlineColor},function(y$_){this._tf.underlineColor=y$_}),y$e}(y$T),y$j=function(y$c){function y$e(y$_){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,y$e.__super.call(this),this.skin=y$_}y$u(y$e,"laya.ui.ProgressBar",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._bg&&this._bg.destroy(y$_),this._bar&&this._bar.destroy(y$_),this._bg=this._bar=null,this.changeHandler=null},y$_.createChildren=function(){this.addChild(this._bg=new y$Q),this.addChild(this._bar=new y$Q)},y$_.changeValue=function(){if(this.sizeGrid){var y$_=this.sizeGrid.split(","),y$c=Number(y$_[3]),y$e=Number(y$_[1]),y$Z=(this.width-y$c-y$e)*this._value;this._bar.width=y$c+y$e+y$Z,this._bar.visible=this._bar.width>y$c+y$e}else this._bar.width=this.width*this._value},y$X(0,y$_,"measureHeight",function(){return this._bg.height}),y$X(0,y$_,"skin",function(){return this._skin},function(y$_){this._skin!=y$_&&(this._skin=y$_,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),y$X(0,y$_,"measureWidth",function(){return this._bg.width}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$T,this,"height",y$_),this._bg.height=this._height,this._bar.height=this._height}),y$X(0,y$_,"bar",function(){return this._bar}),y$X(0,y$_,"value",function(){return this._value},function(y$_){this._value!=y$_&&(y$_=1<y$_?1:y$_<0?0:y$_,this._value=y$_,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(y$_))}),y$X(0,y$_,"bg",function(){return this._bg}),y$X(0,y$_,"sizeGrid",function(){return this._bg.sizeGrid},function(y$_){this._bg.sizeGrid=this._bar.sizeGrid=y$_}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$T,this,"width",y$_),this._bg.width=this._width,this.callLater(this.changeValue)}),y$X(0,y$_,"dataSource",y$c.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)||"string"==typeof y$_?this.value=Number(y$_):y$k.superSet(y$T,this,"dataSource",y$_)}),y$e}(y$T),y$t=(function(y$_){function y$e(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,y$e.__super.call(this),this._tipBox=new y$T,this._tipBox.addChild(this._tipText=new y$q),this._tipText.x=this._tipText.y=5,this._tipText.color=y$e.tipTextColor,this._defaultTipHandler=this._showDefaultTip,y$k.stage.on("showtip",this,this._onStageShowTip),y$k.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}y$u(y$e,"laya.ui.TipManager",y$T);var y$c=y$e.prototype;y$c._onStageHideTip=function(y$_){y$k.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},y$c._onStageShowTip=function(y$_){y$k.timer.once(y$e.tipDelay,this,this._showTip,[y$_],!0)},y$c._showTip=function(y$_){if("string"==typeof y$_){var y$c=String(y$_);Boolean(y$c)&&this._defaultTipHandler(y$c)}else y$_ instanceof laya.utils.Handler?y$_.run():"function"==typeof y$_&&y$_.apply();y$k.stage.on("mousemove",this,this._onStageMouseMove),y$k.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},y$c._onStageMouseDown=function(y$_){this.closeAll()},y$c._onStageMouseMove=function(y$_){this._showToStage(this,y$e.offsetX,y$e.offsetY)},y$c._showToStage=function(y$_,y$c,y$e){void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0);var y$Z=y$_.getBounds();y$_.x=y$k.stage.mouseX+y$c,y$_.y=y$k.stage.mouseY+y$e,y$_.x+y$Z.width>y$k.stage.width&&(y$_.x-=y$Z.width+y$c),y$_.y+y$Z.height>y$k.stage.height&&(y$_.y-=y$Z.height+y$e)},y$c.closeAll=function(){y$k.timer.clear(this,this._showTip),y$k.stage.off("mousemove",this,this._onStageMouseMove),y$k.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},y$c.showDislayTip=function(y$_){this.addChild(y$_),this._showToStage(this),y$k._currentStage.addChild(this)},y$c._showDefaultTip=function(y$_){this._tipText.text=y$_;var y$c=this._tipBox.graphics;y$c.clear(),y$c.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,y$e.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),y$k._currentStage.addChild(this)},y$X(0,y$c,"defaultTipHandler",function(){return this._defaultTipHandler},function(y$_){this._defaultTipHandler=y$_}),y$e.offsetX=10,y$e.offsetY=15,y$e.tipTextColor="#ffffff",y$e.tipBackColor="#111111",y$e.tipDelay=200}(),function(y$_){var y$D;function y$U(){this._idMap=null,this._aniList=null,this._watchMap={},y$U.__super.call(this)}y$u(y$U,"laya.ui.View",y$R);var y$c=y$U.prototype;return y$c.createView=function(y$_){if(y$_.animations&&!this._idMap&&(this._idMap={}),y$U.createComp(y$_,this,this),y$_.animations){var y$c,y$e,y$Z=[],y$X=y$_.animations,y$u=0,y$P=y$X.length;for(y$u=0;y$u<y$P;y$u++){switch(y$c=new y$m,y$e=y$X[y$u],y$c._setUp(this._idMap,y$e),(this[y$e.name]=y$c)._setControlNode(this),y$e.action){case 1:y$c.play(0,!1);break;case 2:y$c.play(0,!0)}y$Z.push(y$c)}this._aniList=y$Z}0<this._width&&null==y$_.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},y$c.onEvent=function(y$_,y$c){},y$c.loadUI=function(y$_){var y$c=y$U.uiMap[y$_];y$c&&this.createView(y$c)},y$c.destroy=function(y$_){void 0===y$_&&(y$_=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,y$_)},y$c.changeData=function(y$_){var y$c=this._watchMap[y$_];if(y$c){console.log("change",y$_);for(var y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++){y$c[y$e].exe(this)}}},y$U._regs=function(){for(var y$_ in y$U.uiClassMap)y$a.regClass(y$_,y$U.uiClassMap[y$_])},y$U.createComp=function(y$_,y$c,y$e,y$Z){if(!(y$c=y$c||y$U.getCompInstance(y$_)))return console.warn("can not create:"+y$_.type),null;var y$X=y$_.child;if(y$X)for(var y$u=y$c instanceof laya.ui.List,y$P=0,y$O=y$X.length;y$P<y$O;y$P++){var y$s=y$X[y$P];if(!y$c.hasOwnProperty("itemRender")||"render"!=y$s.props.name&&"render"!==y$s.props.renderType)if("Graphic"==y$s.type)y$a.addGraphicsToSprite(y$s,y$c);else if(y$a.isDrawType(y$s.type))y$a.addGraphicToSprite(y$s,y$c,!0);else{if(y$u){var y$n=[],y$m=y$U.createComp(y$s,null,y$e,y$n);y$n.length&&(y$m._$bindData=y$n)}else y$m=y$U.createComp(y$s,null,y$e,y$Z);"Script"==y$s.type?"owner"in y$m?y$m.owner=y$c:"target"in y$m&&(y$m.target=y$c):"mask"==y$s.props.renderType||"mask"==y$s.props.name?y$c.mask=y$m:y$m instanceof laya.display.Sprite&&y$c.addChild(y$m)}else y$c.itemRender=y$s}var y$H=y$_.props;for(var y$B in y$H){var y$D=y$H[y$B];y$U.eventDic[y$B]?y$D&&y$e&&y$c.on(y$B,y$e,y$e.onEvent,[y$D]):y$U.setCompValue(y$c,y$B,y$D,y$e,y$Z)}return y$k.__typeof(y$c,"laya.ui.IItem")&&y$c.initItems(),y$_.compId&&y$e&&y$e._idMap&&(y$e._idMap[y$_.compId]=y$c),y$c},y$U.setCompValue=function(y$_,y$c,y$e,y$Z,y$X){if("string"==typeof y$e&&-1<y$e.indexOf("${")){if(y$U._sheet||(y$U._sheet=y$a.getClass("laya.data.Table")),!y$U._sheet)return void console.warn("Can not find class Sheet");if(y$X)y$X.push(y$_,y$c,y$e);else if(y$Z){-1==y$e.indexOf("].")&&(y$e=y$e.replace(".","[0]."));var y$u,y$P,y$O=new y$D(y$_,y$c,y$e);y$O.exe(y$Z);for(var y$s=y$e.replace(/\[.*?\]\./g,".");null!=(y$u=y$U._parseWatchData.exec(y$s));){for(var y$n=y$u[1];null!=(y$P=y$U._parseKeyWord.exec(y$n));){var y$m=y$P[0],y$H=y$Z._watchMap[y$m]||(y$Z._watchMap[y$m]=[]);y$H.push(y$O),y$U._sheet.I.notifer.on(y$m,y$Z,y$Z.changeData,[y$m])}(y$H=y$Z._watchMap[y$n]||(y$Z._watchMap[y$n]=[])).push(y$O),y$U._sheet.I.notifer.on(y$n,y$Z,y$Z.changeData,[y$n])}}}else if("var"===y$c&&y$Z)y$Z[y$e]=y$_;else if("onClick"==y$c){var y$B=y$k._runScript("(function(){"+y$e+"})");y$_.on("click",y$Z,y$B)}else y$_[y$c]="true"===y$e||"false"!==y$e&&y$e},y$U.getCompInstance=function(y$_){var y$c,y$e=y$_.props?y$_.props.runtime:null;return y$c=y$e?y$U.viewClassMap[y$e]||y$U.uiClassMap[y$e]||y$k.__classmap[y$e]:y$U.uiClassMap[y$_.type],y$_.props&&y$_.props.hasOwnProperty("renderType")&&"instance"==y$_.props.renderType?y$c.instance:y$c?new y$c:null},y$U.regComponent=function(y$_,y$c){y$U.uiClassMap[y$_]=y$c,y$a.regClass(y$_,y$c)},y$U.regViewRuntime=function(y$_,y$c){y$U.viewClassMap[y$_]=y$c},y$U.uiMap={},y$U.viewClassMap={},y$U._sheet=null,y$Z(y$U,["uiClassMap",function(){return this.uiClassMap={ViewStack:y$__,LinkButton:y$i,TextArea:y$n_,ColorPicker:y$F,Box:y$R,Button:y$i,CheckBox:y$b,Clip:y$x,ComboBox:y$Y,Component:y$T,HScrollBar:y$S,HSlider:y$W,Image:y$Q,Label:y$J,List:y$g,Panel:y$E,ProgressBar:y$j,Radio:y$d,RadioGroup:y$O_,ScrollBar:y$p,Slider:y$o,Tab:y$s_,TextInput:y$e_,View:y$U,VScrollBar:y$c_,VSlider:y$Z_,Tree:y$I,HBox:y$u_,VBox:y$P_,Sprite:y$L,Animation:y$e,Text:y$q,FontClip:y$V}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),y$U.__init$=function(){y$U._regs(),y$D=function(){function y$_(y$_,y$c,y$e){this.comp=null,this.prop=null,this.value=null,this.comp=y$_,this.prop=y$c,this.value=y$e}return y$u(y$_,""),y$_.prototype.exe=function(y$_){var y$c=y$C.getBindFun(this.value);this.comp[this.prop]=y$c.call(this,y$_)},y$_}()},y$U}()),y$b=function(y$_){function y$e(y$_,y$c){void 0===y$c&&(y$c=""),y$e.__super.call(this,y$_,y$c)}y$u(y$e,"laya.ui.CheckBox",y$_);var y$c=y$e.prototype;return y$c.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},y$c.initialize=function(){y$_.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},y$X(0,y$c,"dataSource",y$_.prototype._$get_dataSource,function(y$_){"boolean"==typeof(this._dataSource=y$_)?this.selected=y$_:"string"==typeof y$_?this.selected="true"===y$_:y$k.superSet(y$i,this,"dataSource",y$_)}),y$e}(y$i),y$N=function(y$_){function y$c(){this._space=0,this._align="none",this._itemChanged=!1,y$c.__super.call(this)}y$u(y$c,"laya.ui.LayoutBox",y$R);var y$e=y$c.prototype;return y$e.addChild=function(y$_){return y$_.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,y$_)},y$e.onResize=function(y$_){this._setItemChanged()},y$e.addChildAt=function(y$_,y$c){return y$_.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,y$_,y$c)},y$e.removeChild=function(y$_){return y$_.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,y$_)},y$e.removeChildAt=function(y$_){return this.getChildAt(y$_).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,y$_)},y$e.refresh=function(){this._setItemChanged()},y$e.changeItems=function(){this._itemChanged=!1},y$e.sortItem=function(y$_){y$_&&y$_.sort(function(y$_,y$c){return y$_.y-y$c.y})},y$e._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},y$X(0,y$e,"space",function(){return this._space},function(y$_){this._space=y$_,this._setItemChanged()}),y$X(0,y$e,"align",function(){return this._align},function(y$_){this._align=y$_,this._setItemChanged()}),y$c}(),y$V=function(y$c){function y$e(y$_,y$c){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,y$e.__super.call(this),y$_&&(this.skin=y$_),y$c&&(this.sheet=y$c)}y$u(y$e,"laya.ui.FontClip",y$c);var y$_=y$e.prototype;return y$_.createChildren=function(){this._bitmap=new y$$,this.on("loaded",this,this._onClipLoaded)},y$_._onClipLoaded=function(){this.callLater(this.changeValue)},y$_.changeValue=function(){var y$_;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),y$_=this._sources[0]))){var y$c="horizontal"===this._direction;y$c?(this._wordsW=this._valueArr.length*(y$_.sourceWidth+this.spaceX),this._wordsH=y$_.sourceHeight):(this._wordsW=y$_.sourceWidth,this._wordsH=(y$_.sourceHeight+this.spaceY)*this._valueArr.length);var y$e=0;if(this._width)switch(this._align){case"center":y$e=.5*(this._width-this._wordsW);break;case"right":y$e=this._width-this._wordsW;break;default:y$e=0}for(var y$Z=0,y$X=this._valueArr.length;y$Z<y$X;y$Z++){var y$u=this._indexMap[this._valueArr.charAt(y$Z)];this.sources[y$u]&&(y$_=this.sources[y$u],y$c?this.graphics.drawTexture(y$_,y$e+y$Z*(y$_.sourceWidth+this.spaceX),0,y$_.sourceWidth,y$_.sourceHeight):this.graphics.drawTexture(y$_,0+y$e,y$Z*(y$_.sourceHeight+this.spaceY),y$_.sourceWidth,y$_.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),y$c.prototype.destroy.call(this,y$_)},y$X(0,y$_,"sheet",function(){return this._sheet},function(y$_){y$_+="";var y$c=(this._sheet=y$_).split(" ");this._clipX=String(y$c[0]).length,this.clipY=y$c.length,this._indexMap={};for(var y$e=0;y$e<this._clipY;y$e++)for(var y$Z=y$c[y$e].split(""),y$X=0,y$u=y$Z.length;y$X<y$u;y$X++)this._indexMap[y$Z[y$X]]=y$e*this._clipX+y$X}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$x,this,"height",y$_),this.callLater(this.changeValue)}),y$X(0,y$_,"direction",function(){return this._direction},function(y$_){this._direction=y$_,this.callLater(this.changeValue)}),y$X(0,y$_,"value",function(){return this._valueArr?this._valueArr:""},function(y$_){y$_+="",this._valueArr=y$_,this.callLater(this.changeValue)}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$x,this,"width",y$_),this.callLater(this.changeValue)}),y$X(0,y$_,"spaceX",function(){return this._spaceX},function(y$_){this._spaceX=y$_,"horizontal"===this._direction&&this.callLater(this.changeValue)}),y$X(0,y$_,"spaceY",function(){return this._spaceY},function(y$_){this._spaceY=y$_,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),y$X(0,y$_,"align",function(){return this._align},function(y$_){this._align=y$_,this.callLater(this.changeValue)}),y$X(0,y$_,"measureWidth",function(){return this._wordsW}),y$X(0,y$_,"measureHeight",function(){return this._wordsH}),y$e}(y$x),y$g=function(y$_){function y$c(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new y$U,y$c.__super.call(this)}y$u(y$c,"laya.ui.List",y$_);var y$e=y$c.prototype;return y$k.imps(y$e,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),y$e.destroy=function(y$_){void 0===y$_&&(y$_=!0),this._content&&this._content.destroy(y$_),this._scrollBar&&this._scrollBar.destroy(y$_),laya.ui.Component.prototype.destroy.call(this,y$_),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},y$e.createChildren=function(){this.addChild(this._content=new y$R)},y$e.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=y$k.superGet(y$R,this,"cacheAs")),y$k.superSet(y$R,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},y$e.onScrollEnd=function(){y$k.superSet(y$R,this,"cacheAs",this._$P.cacheAs)},y$e._removePreScrollBar=function(){var y$_=this.removeChildByName("scrollBar");y$_&&y$_.destroy(!0)},y$e.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var y$_=this._getOneCell(),y$c=y$_.width+this._spaceX||1,y$e=y$_.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/y$c):Math.ceil(this._width/y$c)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/y$e):Math.round(this._height/y$e));var y$Z=this._width?this._width:y$c*this.repeatX-this._spaceX,y$X=this._height?this._height:y$e*this.repeatY-this._spaceY;this._cellSize=this._isVertical?y$e:y$c,this._cellOffset=this._isVertical?y$e*Math.max(this._repeatY2,this._repeatY)-y$X-this._spaceY:y$c*Math.max(this._repeatX2,this._repeatX)-y$Z-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=y$X:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=y$Z),this.setContentSize(y$Z,y$X);var y$u=this._isVertical?this.repeatX:this.repeatY,y$P=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,y$u,y$P),this._createdLine=y$P,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},y$e._getOneCell=function(){if(0===this._cells.length){var y$_=this.createItem();if(this._offset.setTo(y$_.x,y$_.y),this.cacheContent)return y$_;this._cells.push(y$_)}return this._cells[0]},y$e._createItems=function(y$_,y$c,y$e){var y$Z=this._content,y$X=this._getOneCell(),y$u=y$X.width+this._spaceX,y$P=y$X.height+this._spaceY;if(this.cacheContent){var y$O=new y$R;y$O.cacheAsBitmap=!0,y$O.pos((this._isVertical?0:y$_)*y$u,(this._isVertical?y$_:0)*y$P),this._content.addChild(y$O),this._content.optimizeScrollRect=!0,y$Z=y$O}else{for(var y$s=[],y$n=this._cells.length-1;-1<y$n;y$n--){var y$m=this._cells[y$n];y$m.removeSelf(),y$s.push(y$m)}this._cells.length=0}for(var y$H=y$_;y$H<y$e;y$H++)for(var y$B=0;y$B<y$c;y$B++)(y$X=y$s&&y$s.length?y$s.pop():this.createItem()).x=(this._isVertical?y$B:y$H)*y$u-y$Z.x,y$X.y=(this._isVertical?y$H:y$B)*y$P-y$Z.y,y$X.name="item"+(y$H*y$c+y$B),y$Z.addChild(y$X),this.addCell(y$X)},y$e.createItem=function(){var y$_=[];if("function"==typeof this._itemRender)var y$c=new this._itemRender;else y$c=y$t.createComp(this._itemRender,null,null,y$_);if(0==y$_.length&&y$c._watchMap){var y$e=y$c._watchMap;for(var y$Z in y$e)for(var y$X=y$e[y$Z],y$u=0;y$u<y$X.length;y$u++){var y$P=y$X[y$u];y$_.push(y$P.comp,y$P.prop,y$P.value)}}return y$_.length&&(y$c._$bindData=y$_),y$c},y$e.addCell=function(y$_){y$_.on("click",this,this.onCellMouse),y$_.on("rightclick",this,this.onCellMouse),y$_.on("mouseover",this,this.onCellMouse),y$_.on("mouseout",this,this.onCellMouse),y$_.on("mousedown",this,this.onCellMouse),y$_.on("mouseup",this,this.onCellMouse),this._cells.push(y$_)},y$e.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var y$_=0,y$c=y$_=0;y$c<1e4;y$c++){var y$e=this.getChildByName("item"+y$c);if(!y$e)break;this.addCell(y$e),y$_++}this.repeatY=y$_}},y$e.setContentSize=function(y$_,y$c){this._content.width=y$_,this._content.height=y$c,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new y$G),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,y$_,y$c),this._content.scrollRect=this._content.scrollRect),this.event("resize")},y$e.onCellMouse=function(y$_){"mousedown"===y$_.type&&(this._isMoved=!1);var y$c=y$_.currentTarget,y$e=this._startIndex+this._cells.indexOf(y$c);y$e<0||("click"===y$_.type||"rightclick"===y$_.type?this.selectEnable&&!this._isMoved?this.selectedIndex=y$e:this.changeCellState(y$c,!0,0):"mouseover"!==y$_.type&&"mouseout"!==y$_.type||this._selectedIndex===y$e||this.changeCellState(y$c,"mouseover"===y$_.type,0),this.mouseHandler&&this.mouseHandler.runWith([y$_,y$e]))},y$e.changeCellState=function(y$_,y$c,y$e){var y$Z=y$_.getChildByName("selectBox");y$Z&&(this.selectEnable=!0,y$Z.visible=y$c,y$Z.index=y$e)},y$e.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},y$e.onScrollBarChange=function(y$_){this.runCallLater(this.changeCells);var y$c=this._scrollBar.value,y$e=this._isVertical?this.repeatX:this.repeatY,y$Z=this._isVertical?this.repeatY:this.repeatX,y$X=Math.floor(y$c/this._cellSize);if(this.cacheContent)y$P=y$Z+1,this._createdLine-y$X<y$P&&(this._createItems(this._createdLine,y$e,this._createdLine+y$P),this.renderItems(this._createdLine*y$e,0),this._createdLine+=y$P);else{var y$u=y$X*y$e,y$P=0;if(y$u>this._startIndex){y$P=y$u-this._startIndex;var y$O=!0,y$s=this._startIndex+y$e*(y$Z+1);this._isMoved=!0}else y$u<this._startIndex&&(y$P=this._startIndex-y$u,y$O=!1,y$s=this._startIndex-1,this._isMoved=!0);for(var y$n=0;y$n<y$P;y$n++){if(y$O){var y$m=this._cells.shift();this._cells[this._cells.length]=y$m;var y$H=y$s+y$n}else y$m=this._cells.pop(),this._cells.unshift(y$m),y$H=y$s-y$n;var y$B=Math.floor(y$H/y$e)*this._cellSize;this._isVertical?y$m.y=y$B:y$m.x=y$B,this.renderItem(y$m,y$H)}this._startIndex=y$u,this.changeSelectStatus()}var y$D=this._content.scrollRect;this._isVertical?(y$D.y=y$c-this._offset.y,y$D.x=-this._offset.x):(y$D.y=-this._offset.y,y$D.x=y$c-this._offset.x),this._content.scrollRect=y$D},y$e.posCell=function(y$_,y$c){if(this._scrollBar){var y$e=this._isVertical?this.repeatX:this.repeatY,y$Z=(this._isVertical?this.repeatY:this.repeatX,Math.floor(y$c/y$e)*this._cellSize);this._isVertical?y$_.y=y$Z:y$_.x=y$Z}},y$e.changeSelectStatus=function(){for(var y$_=0,y$c=this._cells.length;y$_<y$c;y$_++)this.changeCellState(this._cells[y$_],this._selectedIndex===this._startIndex+y$_,1)},y$e.renderItems=function(y$_,y$c){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0);for(var y$e=y$_,y$Z=y$c||this._cells.length;y$e<y$Z;y$e++)this.renderItem(this._cells[y$e],this._startIndex+y$e);this.changeSelectStatus()},y$e.renderItem=function(y$_,y$c){this._array&&0<=y$c&&y$c<this._array.length?(y$_.visible=!0,y$_._$bindData?(y$_._dataSource=this._array[y$c],this._bindData(y$_,this._array[y$c])):y$_.dataSource=this._array[y$c],this.cacheContent||this.posCell(y$_,y$c),this.hasListener("render")&&this.event("render",[y$_,y$c]),this.renderHandler&&this.renderHandler.runWith([y$_,y$c])):(y$_.visible=!1,y$_.dataSource=null)},y$e._bindData=function(y$_,y$c){for(var y$e=y$_._$bindData,y$Z=0,y$X=y$e.length;y$Z<y$X;y$Z++){var y$u=y$e[y$Z++],y$P=y$e[y$Z++],y$O=y$e[y$Z],y$s=y$C.getBindFun(y$O);y$u[y$P]=y$s.call(this,y$c)}},y$e.refresh=function(){this.array=this._array},y$e.getItem=function(y$_){return-1<y$_&&y$_<this._array.length?this._array[y$_]:null},y$e.changeItem=function(y$_,y$c){-1<y$_&&y$_<this._array.length&&(this._array[y$_]=y$c,y$_>=this._startIndex&&y$_<this._startIndex+this._cells.length&&this.renderItem(this.getCell(y$_),y$_))},y$e.setItem=function(y$_,y$c){this.changeItem(y$_,y$c)},y$e.addItem=function(y$_){this._array.push(y$_),this.array=this._array},y$e.addItemAt=function(y$_,y$c){this._array.splice(y$c,0,y$_),this.array=this._array},y$e.deleteItem=function(y$_){this._array.splice(y$_,1),this.array=this._array},y$e.getCell=function(y$_){return this.runCallLater(this.changeCells),-1<y$_&&this._cells?this._cells[(y$_-this._startIndex)%this._cells.length]:null},y$e.scrollTo=function(y$_){if(this._scrollBar){var y$c=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(y$_/y$c)*this._cellSize}else this.startIndex=y$_},y$e.tweenTo=function(y$_,y$c,y$e){if(void 0===y$c&&(y$c=200),this._scrollBar){var y$Z=this._isVertical?this.repeatX:this.repeatY;y$M.to(this._scrollBar,{value:Math.floor(y$_/y$Z)*this._cellSize},y$c,null,y$e,0,!0)}else this.startIndex=y$_,y$e&&y$e.run()},y$e._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},y$e.commitMeasure=function(){this.runCallLater(this.changeCells)},y$X(0,y$e,"cacheAs",y$_.prototype._$get_cacheAs,function(y$_){y$k.superSet(y$R,this,"cacheAs",y$_),this._scrollBar&&(this._$P.cacheAs=null,"none"!==y$_?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),y$X(0,y$e,"content",function(){return this._content}),y$X(0,y$e,"height",y$_.prototype._$get_height,function(y$_){y$_!=this._height&&(y$k.superSet(y$R,this,"height",y$_),this._setCellChanged())}),y$X(0,y$e,"itemRender",function(){return this._itemRender},function(y$_){if(this._itemRender!=y$_){this._itemRender=y$_;for(var y$c=this._cells.length-1;-1<y$c;y$c--)this._cells[y$c].destroy();this._cells.length=0,this._setCellChanged()}}),y$X(0,y$e,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(y$_){this._removePreScrollBar();var y$c=new y$c_;y$c.name="scrollBar",y$c.right=0,y$_&&" "!=y$_&&(y$c.skin=y$_),this.scrollBar=y$c,this.addChild(y$c),this._setCellChanged()}),y$X(0,y$e,"page",function(){return this._page},function(y$_){this._page=y$_,this._array&&(this._page=0<y$_?y$_:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),y$X(0,y$e,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(y$_){this._removePreScrollBar();var y$c=new y$S;y$c.name="scrollBar",y$c.bottom=0,y$_&&" "!=y$_&&(y$c.skin=y$_),this.scrollBar=y$c,this.addChild(y$c),this._setCellChanged()}),y$X(0,y$e,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(y$_){this._repeatX=y$_,this._setCellChanged()}),y$X(0,y$e,"scrollBar",function(){return this._scrollBar},function(y$_){this._scrollBar!=y$_&&(this._scrollBar=y$_)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),y$X(0,y$e,"width",y$_.prototype._$get_width,function(y$_){y$_!=this._width&&(y$k.superSet(y$R,this,"width",y$_),this._setCellChanged())}),y$X(0,y$e,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(y$_){this._repeatY=y$_,this._setCellChanged()}),y$X(0,y$e,"spaceX",function(){return this._spaceX},function(y$_){this._spaceX=y$_,this._setCellChanged()}),y$X(0,y$e,"spaceY",function(){return this._spaceY},function(y$_){this._spaceY=y$_,this._setCellChanged()}),y$X(0,y$e,"selectedIndex",function(){return this._selectedIndex},function(y$_){this._selectedIndex!=y$_&&(this._selectedIndex=y$_,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(y$_),this.startIndex=this._startIndex)}),y$X(0,y$e,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(y$_){this.selectedIndex=this._array.indexOf(y$_)}),y$X(0,y$e,"length",function(){return this._array?this._array.length:0}),y$X(0,y$e,"selection",function(){return this.getCell(this._selectedIndex)},function(y$_){this.selectedIndex=this._startIndex+this._cells.indexOf(y$_)}),y$X(0,y$e,"startIndex",function(){return this._startIndex},function(y$_){this._startIndex=0<y$_?y$_:0,this.callLater(this.renderItems)}),y$X(0,y$e,"array",function(){return this._array},function(y$_){this.runCallLater(this.changeCells),this._array=y$_||[];var y$c=this._array.length;if(this.totalPage=Math.ceil(y$c/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<y$c?this._selectedIndex:y$c-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var y$e=this._isVertical?this.repeatX:this.repeatY,y$Z=this._isVertical?this.repeatY:this.repeatX,y$X=Math.ceil(y$c/y$e);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=y$Z/y$X,this._scrollBar.setScroll(0,(y$X-y$Z)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),y$X(0,y$e,"dataSource",y$_.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)&&Math.floor(y$_)==y$_||"string"==typeof y$_?this.selectedIndex=parseInt(y$_):y$_ instanceof Array?this.array=y$_:y$k.superSet(y$R,this,"dataSource",y$_)}),y$X(0,y$e,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),y$c}(y$R),y$S=function(y$_){function y$c(){y$c.__super.call(this)}return y$u(y$c,"laya.ui.HScrollBar",y$_),y$c.prototype.initialize=function(){y$_.prototype.initialize.call(this),this.slider.isVertical=!1},y$c}(y$p),y$E=function(y$_){function y$c(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,y$c.__super.call(this),this.width=this.height=100}y$u(y$c,"laya.ui.Panel",y$_);var y$e=y$c.prototype;return y$e.destroy=function(y$_){void 0===y$_&&(y$_=!0),laya.ui.Component.prototype.destroy.call(this,y$_),this._content&&this._content.destroy(y$_),this._vScrollBar&&this._vScrollBar.destroy(y$_),this._hScrollBar&&this._hScrollBar.destroy(y$_),this._vScrollBar=null,this._hScrollBar=null,this._content=null},y$e.destroyChildren=function(){this._content.destroyChildren()},y$e.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new y$R)},y$e.addChild=function(y$_){return y$_.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(y$_)},y$e.onResize=function(){this._setScrollChanged()},y$e.addChildAt=function(y$_,y$c){return y$_.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(y$_,y$c)},y$e.removeChild=function(y$_){return y$_.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(y$_)},y$e.removeChildAt=function(y$_){return this.getChildAt(y$_).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(y$_)},y$e.removeChildren=function(y$_,y$c){return void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=2147483647),this._content.removeChildren(y$_,y$c),this._setScrollChanged(),this},y$e.getChildAt=function(y$_){return this._content.getChildAt(y$_)},y$e.getChildByName=function(y$_){return this._content.getChildByName(y$_)},y$e.getChildIndex=function(y$_){return this._content.getChildIndex(y$_)},y$e.changeScroll=function(){this._scrollChanged=!1;var y$_=this.contentWidth||1,y$c=this.contentHeight||1,y$e=this._vScrollBar,y$Z=this._hScrollBar,y$X=y$e&&y$c>this._height,y$u=y$Z&&y$_>this._width,y$P=y$X?this._width-y$e.width:this._width,y$O=y$u?this._height-y$Z.height:this._height;y$e&&(y$e.x=this._width-y$e.width,y$e.y=0,y$e.height=this._height-(y$u?y$Z.height:0),y$e.scrollSize=Math.max(.033*this._height,1),y$e.thumbPercent=y$O/y$c,y$e.setScroll(0,y$c-y$O,y$e.value)),y$Z&&(y$Z.x=0,y$Z.y=this._height-y$Z.height,y$Z.width=this._width-(y$X?y$e.width:0),y$Z.scrollSize=Math.max(.033*this._width,1),y$Z.thumbPercent=y$P/y$_,y$Z.setScroll(0,y$_-y$P,y$Z.value))},y$e.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},y$e.setContentSize=function(y$_,y$c){var y$e=this._content;y$e.width=y$_,y$e.height=y$c,y$e.scrollRect||(y$e.scrollRect=new y$G),y$e.scrollRect.setTo(0,0,y$_,y$c),y$e.scrollRect=y$e.scrollRect},y$e.onScrollBarChange=function(y$_){var y$c=this._content.scrollRect;if(y$c){var y$e=Math.round(y$_.value);y$_.isVertical?y$c.y=y$e:y$c.x=y$e,this._content.scrollRect=y$c}},y$e.scrollTo=function(y$_,y$c){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),this.vScrollBar&&(this.vScrollBar.value=y$c),this.hScrollBar&&(this.hScrollBar.value=y$_)},y$e.refresh=function(){this.changeScroll()},y$e.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=y$k.superGet(y$R,this,"cacheAs")),y$k.superSet(y$R,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},y$e.onScrollEnd=function(){y$k.superSet(y$R,this,"cacheAs",this._$P.cacheAs)},y$e._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},y$X(0,y$e,"numChildren",function(){return this._content.numChildren}),y$X(0,y$e,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(y$_){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new y$S),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=y$_}),y$X(0,y$e,"contentWidth",function(){for(var y$_=0,y$c=this._content.numChildren-1;-1<y$c;y$c--){var y$e=this._content.getChildAt(y$c);y$_=Math.max(y$e.x+y$e.width*y$e.scaleX,y$_)}return y$_}),y$X(0,y$e,"contentHeight",function(){for(var y$_=0,y$c=this._content.numChildren-1;-1<y$c;y$c--){var y$e=this._content.getChildAt(y$c);y$_=Math.max(y$e.y+y$e.height*y$e.scaleY,y$_)}return y$_}),y$X(0,y$e,"width",y$_.prototype._$get_width,function(y$_){y$k.superSet(y$R,this,"width",y$_),this._setScrollChanged()}),y$X(0,y$e,"hScrollBar",function(){return this._hScrollBar}),y$X(0,y$e,"content",function(){return this._content}),y$X(0,y$e,"height",y$_.prototype._$get_height,function(y$_){y$k.superSet(y$R,this,"height",y$_),this._setScrollChanged()}),y$X(0,y$e,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(y$_){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new y$c_),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=y$_}),y$X(0,y$e,"vScrollBar",function(){return this._vScrollBar}),y$X(0,y$e,"cacheAs",y$_.prototype._$get_cacheAs,function(y$_){y$k.superSet(y$R,this,"cacheAs",y$_),this._$P.cacheAs=null,"none"!==y$_?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),y$c}(y$R),y$W=function(y$_){function y$c(y$_){y$c.__super.call(this,y$_),this.isVertical=!1}return y$u(y$c,"laya.ui.HSlider",y$o),y$c}(),y$l=function(y$_){function y$e(y$_,y$c){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,y$e.__super.call(this),this.skin=y$c,this.labels=y$_}y$u(y$e,"laya.ui.UIGroup",y$_);var y$c=y$e.prototype;return y$k.imps(y$c,{"laya.ui.IItem":!0}),y$c.preinitialize=function(){this.mouseEnabled=!0},y$c.destroy=function(y$_){void 0===y$_&&(y$_=!0),laya.ui.Component.prototype.destroy.call(this,y$_),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},y$c.addItem=function(y$_,y$c){void 0===y$c&&(y$c=!0);var y$e=y$_,y$Z=this._items.length;if(y$e.name="item"+y$Z,this.addChild(y$e),this.initItems(),y$c&&0<y$Z){var y$X=this._items[y$Z-1];"horizontal"==this._direction?y$e.x=y$X.x+y$X.width+this._space:y$e.y=y$X.y+y$X.height+this._space}else y$c&&(y$e.x=0,y$e.y=0);return y$Z},y$c.delItem=function(y$_,y$c){void 0===y$c&&(y$c=!0);var y$e=this._items.indexOf(y$_);if(-1!=y$e){var y$Z=y$_;this.removeChild(y$Z);for(var y$X=y$e+1,y$u=this._items.length;y$X<y$u;y$X++){var y$P=this._items[y$X];y$P.name="item"+(y$X-1),y$c&&("horizontal"==this._direction?y$P.x-=y$Z.width+this._space:y$P.y-=y$Z.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var y$O;y$O=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=y$O}}},y$c.initItems=function(){this._items||(this._items=[]);for(var y$_=this._items.length=0;y$_<1e4;y$_++){var y$c=this.getChildByName("item"+y$_);if(null==y$c)break;this._items.push(y$c),y$c.selected=y$_===this._selectedIndex,y$c.clickHandler=y$B.create(this,this.itemClick,[y$_],!1)}},y$c.itemClick=function(y$_){this.selectedIndex=y$_},y$c.setSelect=function(y$_,y$c){this._items&&-1<y$_&&y$_<this._items.length&&(this._items[y$_].selected=y$c)},y$c.createItem=function(y$_,y$c){return null},y$c.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var y$_=0,y$c=0,y$e=this._items.length;y$c<y$e;y$c++){var y$Z=this._items[y$c];this._skin&&(y$Z.skin=this._skin),this._labelColors&&(y$Z.labelColors=this._labelColors),this._labelSize&&(y$Z.labelSize=this._labelSize),this._labelStroke&&(y$Z.labelStroke=this._labelStroke),this._labelStrokeColor&&(y$Z.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(y$Z.strokeColors=this._strokeColors),this._labelBold&&(y$Z.labelBold=this._labelBold),this._labelPadding&&(y$Z.labelPadding=this._labelPadding),this._labelAlign&&(y$Z.labelAlign=this._labelAlign),this._stateNum&&(y$Z.stateNum=this._stateNum),this._labelFont&&(y$Z.labelFont=this._labelFont),"horizontal"===this._direction?(y$Z.y=0,y$Z.x=y$_,y$_+=y$Z.width+this._space):(y$Z.x=0,y$Z.y=y$_,y$_+=y$Z.height+this._space)}this.changeSize()},y$c.commitMeasure=function(){this.runCallLater(this.changeLabels)},y$c._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},y$X(0,y$c,"labelStrokeColor",function(){return this._labelStrokeColor},function(y$_){this._labelStrokeColor!=y$_&&(this._labelStrokeColor=y$_,this._setLabelChanged())}),y$X(0,y$c,"skin",function(){return this._skin},function(y$_){this._skin!=y$_&&(this._skin=y$_,this._setLabelChanged())}),y$X(0,y$c,"selectedIndex",function(){return this._selectedIndex},function(y$_){this._selectedIndex!=y$_&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=y$_,this.setSelect(y$_,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),y$X(0,y$c,"labels",function(){return this._labels},function(y$_){if(this._labels!=y$_){if(this._labels=y$_,this.removeChildren(),this._setLabelChanged(),this._labels)for(var y$c=this._labels.split(","),y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++){var y$X=this.createItem(this._skin,y$c[y$e]);y$X.name="item"+y$e,this.addChild(y$X)}this.initItems()}}),y$X(0,y$c,"strokeColors",function(){return this._strokeColors},function(y$_){this._strokeColors!=y$_&&(this._strokeColors=y$_,this._setLabelChanged())}),y$X(0,y$c,"labelColors",function(){return this._labelColors},function(y$_){this._labelColors!=y$_&&(this._labelColors=y$_,this._setLabelChanged())}),y$X(0,y$c,"labelStroke",function(){return this._labelStroke},function(y$_){this._labelStroke!=y$_&&(this._labelStroke=y$_,this._setLabelChanged())}),y$X(0,y$c,"labelSize",function(){return this._labelSize},function(y$_){this._labelSize!=y$_&&(this._labelSize=y$_,this._setLabelChanged())}),y$X(0,y$c,"stateNum",function(){return this._stateNum},function(y$_){this._stateNum!=y$_&&(this._stateNum=y$_,this._setLabelChanged())}),y$X(0,y$c,"labelBold",function(){return this._labelBold},function(y$_){this._labelBold!=y$_&&(this._labelBold=y$_,this._setLabelChanged())}),y$X(0,y$c,"labelFont",function(){return this._labelFont},function(y$_){this._labelFont!=y$_&&(this._labelFont=y$_,this._setLabelChanged())}),y$X(0,y$c,"labelPadding",function(){return this._labelPadding},function(y$_){this._labelPadding!=y$_&&(this._labelPadding=y$_,this._setLabelChanged())}),y$X(0,y$c,"direction",function(){return this._direction},function(y$_){this._direction=y$_,this._setLabelChanged()}),y$X(0,y$c,"space",function(){return this._space},function(y$_){this._space=y$_,this._setLabelChanged()}),y$X(0,y$c,"items",function(){return this._items}),y$X(0,y$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(y$_){this.selectedIndex=this._items.indexOf(y$_)}),y$X(0,y$c,"dataSource",y$_.prototype._$get_dataSource,function(y$_){"number"==typeof(this._dataSource=y$_)&&Math.floor(y$_)==y$_||"string"==typeof y$_?this.selectedIndex=parseInt(y$_):y$_ instanceof Array?this.labels=y$_.join(","):y$k.superSet(y$R,this,"dataSource",y$_)}),y$e}(y$R),y$d=function(y$c){function y$e(y$_,y$c){this._value=null,void 0===y$c&&(y$c=""),y$e.__super.call(this,y$_,y$c)}y$u(y$e,"laya.ui.Radio",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._value=null},y$_.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},y$_.initialize=function(){y$c.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},y$_.onClick=function(y$_){this.selected=!0},y$X(0,y$_,"value",function(){return null!=this._value?this._value:this.label},function(y$_){this._value=y$_}),y$e}(y$i),y$I=function(y$_){function y$c(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,y$c.__super.call(this),this.width=this.height=200}y$u(y$c,"laya.ui.Tree",y$_);var y$e=y$c.prototype;return y$k.imps(y$e,{"laya.ui.IRender":!0}),y$e.destroy=function(y$_){void 0===y$_&&(y$_=!0),laya.ui.Component.prototype.destroy.call(this,y$_),this._list&&this._list.destroy(y$_),this._list=null,this._source=null,this._renderHandler=null},y$e.createChildren=function(){this.addChild(this._list=new y$g),this._list.renderHandler=y$B.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},y$e.onListChange=function(y$_){this.event("change")},y$e.getArray=function(){var y$_,y$c=[];for(var y$e in this._source)y$_=this._source[y$e],this.getParentOpenStatus(y$_)&&(y$_.x=this._spaceLeft*this.getDepth(y$_),y$c.push(y$_));return y$c},y$e.getDepth=function(y$_,y$c){return void 0===y$c&&(y$c=0),null==y$_.nodeParent?y$c:this.getDepth(y$_.nodeParent,y$c+1)},y$e.getParentOpenStatus=function(y$_){var y$c=y$_.nodeParent;return null==y$c||!!y$c.isOpen&&(null==y$c.nodeParent||this.getParentOpenStatus(y$c))},y$e.renderItem=function(y$_,y$c){var y$e=y$_.dataSource;if(y$e){y$_.left=y$e.x;var y$Z=y$_.getChildByName("arrow");y$Z&&(y$e.hasChild?(y$Z.visible=!0,y$Z.index=y$e.isOpen?1:0,y$Z.tag=y$c,y$Z.off("click",this,this.onArrowClick),y$Z.on("click",this,this.onArrowClick)):y$Z.visible=!1);var y$X=y$_.getChildByName("folder");y$X&&(2==y$X.clipY?y$X.index=y$e.isDirectory?0:1:y$X.index=y$e.isDirectory?y$e.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([y$_,y$c])}},y$e.onArrowClick=function(y$_){var y$c=y$_.currentTarget.tag;this._list.array[y$c].isOpen=!this._list.array[y$c].isOpen,this.event("open"),this._list.array=this.getArray()},y$e.setItemState=function(y$_,y$c){this._list.array[y$_]&&(this._list.array[y$_].isOpen=y$c,this._list.array=this.getArray())},y$e.fresh=function(){this._list.array=this.getArray(),this.repaint()},y$e.parseXml=function(y$_,y$c,y$e,y$Z){var y$X,y$u=y$_.childNodes,y$P=y$u.length;if(!y$Z){y$X={};var y$O,y$s=y$_.attributes;for(var y$n in y$s){var y$m=(y$O=y$s[y$n]).nodeName,y$H=y$O.nodeValue;y$X[y$m]="true"==y$H||"false"!=y$H&&y$H}y$X.nodeParent=y$e,0<y$P&&(y$X.isDirectory=!0),y$X.hasChild=0<y$P,y$c.push(y$X)}for(var y$B=0;y$B<y$P;y$B++){var y$D=y$u[y$B];this.parseXml(y$D,y$c,y$X,!1)}},y$e.parseOpenStatus=function(y$_,y$c){for(var y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++){var y$X=y$c[y$e];if(y$X.isDirectory)for(var y$u=0,y$P=y$_.length;y$u<y$P;y$u++){var y$O=y$_[y$u];if(y$O.isDirectory&&this.isSameParent(y$O,y$X)&&y$X.label==y$O.label){y$X.isOpen=y$O.isOpen;break}}}},y$e.isSameParent=function(y$_,y$c){return null==y$_.nodeParent&&null==y$c.nodeParent||null!=y$_.nodeParent&&null!=y$c.nodeParent&&(y$_.nodeParent.label==y$c.nodeParent.label&&this.isSameParent(y$_.nodeParent,y$c.nodeParent))},y$e.filter=function(y$_){if(Boolean(y$_)){var y$c=[];this.getFilterSource(this._source,y$c,y$_),this._list.array=y$c}else this._list.array=this.getArray()},y$e.getFilterSource=function(y$_,y$c,y$e){var y$Z;for(var y$X in y$e=y$e.toLocaleLowerCase(),y$_)!(y$Z=y$_[y$X]).isDirectory&&-1<String(y$Z.label).toLowerCase().indexOf(y$e)&&(y$Z.x=0,y$c.push(y$Z)),y$Z.child&&0<y$Z.child.length&&this.getFilterSource(y$Z.child,y$c,y$e)},y$X(0,y$e,"spaceBottom",function(){return this._list.spaceY},function(y$_){this._list.spaceY=y$_}),y$X(0,y$e,"keepStatus",function(){return this._keepStatus},function(y$_){this._keepStatus=y$_}),y$X(0,y$e,"itemRender",function(){return this._list.itemRender},function(y$_){this._list.itemRender=y$_}),y$X(0,y$e,"array",function(){return this._list.array},function(y$_){this._keepStatus&&this._list.array&&y$_&&this.parseOpenStatus(this._list.array,y$_),this._source=y$_,this._list.array=this.getArray()}),y$X(0,y$e,"mouseHandler",function(){return this._list.mouseHandler},function(y$_){this._list.mouseHandler=y$_}),y$X(0,y$e,"dataSource",y$_.prototype._$get_dataSource,function(y$_){this._dataSource=y$_,y$k.superSet(y$R,this,"dataSource",y$_)}),y$X(0,y$e,"source",function(){return this._source}),y$X(0,y$e,"scrollBar",function(){return this._list.scrollBar}),y$X(0,y$e,"list",function(){return this._list}),y$X(0,y$e,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(y$_){this._list.vScrollBarSkin=y$_}),y$X(0,y$e,"renderHandler",function(){return this._renderHandler},function(y$_){this._renderHandler=y$_}),y$X(0,y$e,"selectedIndex",function(){return this._list.selectedIndex},function(y$_){this._list.selectedIndex=y$_}),y$X(0,y$e,"spaceLeft",function(){return this._spaceLeft},function(y$_){this._spaceLeft=y$_}),y$X(0,y$e,"selectedItem",function(){return this._list.selectedItem},function(y$_){this._list.selectedItem=y$_}),y$X(0,y$e,"width",y$_.prototype._$get_width,function(y$_){y$k.superSet(y$R,this,"width",y$_),this._list.width=y$_}),y$X(0,y$e,"height",y$_.prototype._$get_height,function(y$_){y$k.superSet(y$R,this,"height",y$_),this._list.height=y$_}),y$X(0,y$e,"xml",null,function(y$_){var y$c=[];this.parseXml(y$_.childNodes[0],y$c,null,!0),this.array=y$c}),y$X(0,y$e,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),y$c}(y$R),y$__=function(y$_){function y$c(){this._items=null,this._selectedIndex=0,y$c.__super.call(this),this._setIndexHandler=y$B.create(this,this.setIndex,null,!1)}y$u(y$c,"laya.ui.ViewStack",y$_);var y$e=y$c.prototype;return y$k.imps(y$e,{"laya.ui.IItem":!0}),y$e.setItems=function(y$_){this.removeChildren();for(var y$c=0,y$e=0,y$Z=y$_.length;y$e<y$Z;y$e++){var y$X=y$_[y$e];y$X&&(y$X.name="item"+y$c,this.addChild(y$X),y$c++)}this.initItems()},y$e.addItem=function(y$_){y$_.name="item"+this._items.length,this.addChild(y$_),this.initItems()},y$e.initItems=function(){this._items=[];for(var y$_=0;y$_<1e4;y$_++){var y$c=this.getChildByName("item"+y$_);if(null==y$c)break;this._items.push(y$c),y$c.visible=y$_==this._selectedIndex}},y$e.setSelect=function(y$_,y$c){this._items&&-1<y$_&&y$_<this._items.length&&(this._items[y$_].visible=y$c)},y$e.setIndex=function(y$_){this.selectedIndex=y$_},y$X(0,y$e,"dataSource",y$_.prototype._$get_dataSource,function(y$_){if("number"==typeof(this._dataSource=y$_)&&Math.floor(y$_)==y$_||"string"==typeof y$_)this.selectedIndex=parseInt(y$_);else for(var y$c in this._dataSource)this.hasOwnProperty(y$c)&&(this[y$c]=this._dataSource[y$c])}),y$X(0,y$e,"selectedIndex",function(){return this._selectedIndex},function(y$_){this._selectedIndex!=y$_&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=y$_,this.setSelect(this._selectedIndex,!0))}),y$X(0,y$e,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(y$_){this.selectedIndex=this._items.indexOf(y$_)}),y$X(0,y$e,"items",function(){return this._items}),y$X(0,y$e,"setIndexHandler",function(){return this._setIndexHandler},function(y$_){this._setIndexHandler=y$_}),y$c}(y$R),y$c_=function(y$_){function y$c(){y$c.__super.call(this)}return y$u(y$c,"laya.ui.VScrollBar",y$p),y$c}(),y$e_=function(y$c){function y$e(y$_){this._bg=null,this._skin=null,y$e.__super.call(this),void 0===y$_&&(y$_=""),this.text=y$_,this.skin=this.skin}y$u(y$e,"laya.ui.TextInput",y$c);var y$_=y$e.prototype;return y$_.preinitialize=function(){this.mouseEnabled=!0},y$_.destroy=function(y$_){y$w.clearCache(this,this._skin),void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._bg&&this._bg.destroy(),this._bg=null},y$_.createChildren=function(){this.addChild(this._tf=new y$D),this._tf.padding=y$r.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},y$_._onFocus=function(){this.event("focus",this)},y$_._onBlur=function(){this.event("blur",this)},y$_._onInput=function(){this.event("input",this)},y$_._onEnter=function(){this.event("enter",this)},y$_.initialize=function(){this.width=128,this.height=22},y$_.select=function(){this._tf.select()},y$_.setSelection=function(y$_,y$c){this._tf.setSelection(y$_,y$c)},y$X(0,y$_,"text",y$c.prototype._$get_text,function(y$_){this._tf.text!=y$_&&(y$_+="",this._tf.text=y$_,this.event("change"))}),y$X(0,y$_,"bg",function(){return this._bg},function(y$_){this.graphics=this._bg=y$_}),y$X(0,y$_,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(y$_){this._tf.inputElementYAdjuster=y$_}),y$X(0,y$_,"multiline",function(){return this._tf.multiline},function(y$_){this._tf.multiline=y$_}),y$X(0,y$_,"skin",function(){return this._skin},function(y$_){this._skin!=y$_&&(y$w.clearCache(this,this._skin),this._skin=y$_,this._bg||(this.graphics=this._bg=new y$$),y$w.keepCache(this,this._skin),this._bg.source=y$w.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),y$X(0,y$_,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(y$_){this._bg||(this.graphics=this._bg=new y$$),this._bg.sizeGrid=y$C.fillArray(y$r.defaultSizeGrid,y$_,Number)}),y$X(0,y$_,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(y$_){this._tf.inputElementXAdjuster=y$_}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$J,this,"width",y$_),this._bg&&(this._bg.width=y$_)}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$J,this,"height",y$_),this._bg&&(this._bg.height=y$_)}),y$X(0,y$_,"editable",function(){return this._tf.editable},function(y$_){this._tf.editable=y$_}),y$X(0,y$_,"restrict",function(){return this._tf.restrict},function(y$_){this._tf.restrict=y$_}),y$X(0,y$_,"prompt",function(){return this._tf.prompt},function(y$_){this._tf.prompt=y$_}),y$X(0,y$_,"promptColor",function(){return this._tf.promptColor},function(y$_){this._tf.promptColor=y$_}),y$X(0,y$_,"maxChars",function(){return this._tf.maxChars},function(y$_){this._tf.maxChars=y$_}),y$X(0,y$_,"focus",function(){return this._tf.focus},function(y$_){this._tf.focus=y$_}),y$X(0,y$_,"type",function(){return this._tf.type},function(y$_){this._tf.type=y$_}),y$X(0,y$_,"asPassword",function(){return this._tf.asPassword},function(y$_){this._tf.asPassword=y$_}),y$e}(y$J),y$Z_=function(y$_){function y$c(){y$c.__super.call(this)}return y$u(y$c,"laya.ui.VSlider",y$o),y$c}(),y$X_=function(y$_){function y$Z(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,y$Z.__super.call(this)}y$u(y$Z,"laya.ui.Dialog",y$_);var y$c=y$Z.prototype;return y$c.initialize=function(){this.popupEffect=y$Z.manager.popupEffectHandler,this.closeEffect=y$Z.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},y$c._dealDragArea=function(){var y$_=this.getChildByName("drag");y$_&&(this.dragArea=y$_.x+","+y$_.y+","+y$_.width+","+y$_.height,y$_.removeSelf())},y$c._onClick=function(y$_){var y$c=y$_.target;if(y$c)switch(y$c.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(y$c.name)}},y$c.show=function(y$_,y$c){void 0===y$_&&(y$_=!1),void 0===y$c&&(y$c=!0),this._open(!1,y$_,y$c)},y$c.popup=function(y$_,y$c){void 0===y$_&&(y$_=!1),void 0===y$c&&(y$c=!0),this._open(!0,y$_,y$c)},y$c._open=function(y$_,y$c,y$e){y$Z.manager.lock(!1),this.isModal=y$_,y$Z.manager.open(this,y$c,y$e)},y$c.onOpened=function(){},y$c.close=function(y$_,y$c){void 0===y$c&&(y$c=!0),y$Z.manager.close(this,y$_,y$c)},y$c.onClosed=function(y$_){},y$c._onMouseDown=function(y$_){var y$c=this.getMousePoint();this._dragArea.contains(y$c.x,y$c.y)?this.startDrag():this.stopDrag()},y$X(0,y$c,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(y$_){if(y$_){var y$c=y$C.fillArray([0,0,0,0],y$_,Number);this._dragArea=new y$G(y$c[0],y$c[1],y$c[2],y$c[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),y$X(0,y$c,"isPopup",function(){return null!=this.parent}),y$X(0,y$c,"zOrder",y$_.prototype._$get_zOrder,function(y$_){y$k.superSet(y$t,this,"zOrder",y$_),y$Z.manager._checkMask()}),y$X(1,y$Z,"manager",function(){return y$Z._manager=y$Z._manager||new y$h},function(y$_){y$Z._manager=y$_}),y$Z.setLockView=function(y$_){y$Z.manager.setLockView(y$_)},y$Z.lock=function(y$_){y$Z.manager.lock(y$_)},y$Z.closeAll=function(){y$Z.manager.closeAll()},y$Z.getDialogsByGroup=function(y$_){return y$Z.manager.getDialogsByGroup(y$_)},y$Z.closeByGroup=function(y$_){return y$Z.manager.closeByGroup(y$_)},y$Z.CLOSE="close",y$Z.CANCEL="cancel",y$Z.SURE="sure",y$Z.NO="no",y$Z.OK="ok",y$Z.YES="yes",y$Z._manager=null,y$Z}(y$t),y$u_=function(y$_){function y$c(){y$c.__super.call(this)}y$u(y$c,"laya.ui.HBox",y$_);var y$e=y$c.prototype;return y$e.sortItem=function(y$_){y$_&&y$_.sort(function(y$_,y$c){return y$_.x-y$c.x})},y$e.changeItems=function(){this._itemChanged=!1;for(var y$_=[],y$c=0,y$e=0,y$Z=this.numChildren;y$e<y$Z;y$e++){var y$X=this.getChildAt(y$e);y$X&&y$X.layoutEnabled&&(y$_.push(y$X),y$c=this._height?this._height:Math.max(y$c,y$X.height*y$X.scaleY))}this.sortItem(y$_);var y$u=0;for(y$e=0,y$Z=y$_.length;y$e<y$Z;y$e++)(y$X=y$_[y$e]).x=y$u,y$u+=y$X.width*y$X.scaleX+this._space,"top"==this._align?y$X.y=0:"middle"==this._align?y$X.y=.5*(y$c-y$X.height*y$X.scaleY):"bottom"==this._align&&(y$X.y=y$c-y$X.height*y$X.scaleY);this.changeSize()},y$X(0,y$e,"height",y$_.prototype._$get_height,function(y$_){this._height!=y$_&&(y$k.superSet(y$N,this,"height",y$_),this.callLater(this.changeItems))}),y$c.NONE="none",y$c.TOP="top",y$c.MIDDLE="middle",y$c.BOTTOM="bottom",y$c}(y$N),y$P_=function(y$_){function y$c(){y$c.__super.call(this)}y$u(y$c,"laya.ui.VBox",y$_);var y$e=y$c.prototype;return y$e.changeItems=function(){this._itemChanged=!1;for(var y$_=[],y$c=0,y$e=0,y$Z=this.numChildren;y$e<y$Z;y$e++){var y$X=this.getChildAt(y$e);y$X&&y$X.layoutEnabled&&(y$_.push(y$X),y$c=this._width?this._width:Math.max(y$c,y$X.width*y$X.scaleX))}this.sortItem(y$_);var y$u=0;for(y$e=0,y$Z=y$_.length;y$e<y$Z;y$e++)(y$X=y$_[y$e]).y=y$u,y$u+=y$X.height*y$X.scaleY+this._space,"left"==this._align?y$X.x=0:"center"==this._align?y$X.x=.5*(y$c-y$X.width*y$X.scaleX):"right"==this._align&&(y$X.x=y$c-y$X.width*y$X.scaleX);this.changeSize()},y$X(0,y$e,"width",y$_.prototype._$get_width,function(y$_){this._width!=y$_&&(y$k.superSet(y$N,this,"width",y$_),this.callLater(this.changeItems))}),y$c.NONE="none",y$c.LEFT="left",y$c.CENTER="center",y$c.RIGHT="right",y$c}(y$N),y$O_=function(y$_){function y$c(){y$c.__super.call(this)}return y$u(y$c,"laya.ui.RadioGroup",y$l),y$c.prototype.createItem=function(y$_,y$c){return new y$d(y$_,y$c)},y$c}(),y$s_=function(y$_){function y$c(){y$c.__super.call(this)}return y$u(y$c,"laya.ui.Tab",y$l),y$c.prototype.createItem=function(y$_,y$c){return new y$i(y$_,y$c)},y$c}(),y$n_=function(y$c){function y$e(y$_){this._vScrollBar=null,this._hScrollBar=null,void 0===y$_&&(y$_=""),y$e.__super.call(this,y$_)}y$u(y$e,"laya.ui.TextArea",y$c);var y$_=y$e.prototype;return y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},y$_.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},y$_.onVBarChanged=function(y$_){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},y$_.onHBarChanged=function(y$_){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},y$_.changeScroll=function(){var y$_=this._vScrollBar&&0<this._tf.maxScrollY,y$c=this._hScrollBar&&0<this._tf.maxScrollX,y$e=y$_?this._width-this._vScrollBar.width:this._width,y$Z=y$c?this._height-this._hScrollBar.height:this._height,y$X=this._tf.padding||y$r.labelPadding;this._tf.width=y$e,this._tf.height=y$Z,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-y$X[2],this._vScrollBar.y=y$X[1],this._vScrollBar.height=this._height-(y$c?this._hScrollBar.height:0)-y$X[1]-y$X[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=y$Z/Math.max(this._tf.textHeight,y$Z),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=y$_),this._hScrollBar&&(this._hScrollBar.x=y$X[0],this._hScrollBar.y=this._height-this._hScrollBar.height-y$X[3],this._hScrollBar.width=this._width-(y$_?this._vScrollBar.width:0)-y$X[0]-y$X[2],this._hScrollBar.scrollSize=Math.max(.033*y$e,1),this._hScrollBar.thumbPercent=y$e/Math.max(this._tf.textWidth,y$e),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=y$c)},y$_.scrollTo=function(y$_){this.commitMeasure(),this._tf.scrollY=y$_},y$X(0,y$_,"scrollY",function(){return this._tf.scrollY}),y$X(0,y$_,"width",y$c.prototype._$get_width,function(y$_){y$k.superSet(y$e_,this,"width",y$_),this.callLater(this.changeScroll)}),y$X(0,y$_,"hScrollBar",function(){return this._hScrollBar}),y$X(0,y$_,"height",y$c.prototype._$get_height,function(y$_){y$k.superSet(y$e_,this,"height",y$_),this.callLater(this.changeScroll)}),y$X(0,y$_,"maxScrollX",function(){return this._tf.maxScrollX}),y$X(0,y$_,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(y$_){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new y$c_),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=y$_}),y$X(0,y$_,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(y$_){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new y$S),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=y$_}),y$X(0,y$_,"vScrollBar",function(){return this._vScrollBar}),y$X(0,y$_,"maxScrollY",function(){return this._tf.maxScrollY}),y$X(0,y$_,"scrollX",function(){return this._tf.scrollX}),y$e}(y$e_);!function(y$_){function y$c(){this._uiView=null,this.isCloseOther=!1,y$c.__super.call(this)}y$u(y$c,"laya.ui.AsynDialog",y$X_);var y$e=y$c.prototype;y$e.createView=function(y$_){this._uiView=y$_},y$e._open=function(y$_,y$c,y$e){this.isModal=y$_,this.isCloseOther=y$c,y$X_.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},y$e.onCreated=function(){this.createUI(),this.onOpen()},y$e.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},y$e.onOpen=function(){y$X_.manager.open(this,this.isCloseOther),y$X_.manager.lock(!1)},y$e.close=function(y$_,y$c){void 0===y$c&&(y$c=!0),y$X_.manager.close(this),this.onClose()},y$e.onClose=function(){},y$e.destroy=function(y$_){void 0===y$_&&(y$_=!0),laya.ui.View.prototype.destroy.call(this,y$_),this._uiView=null,this.onDestroy()},y$e.onDestroy=function(){}}();y$k.__init([y$t])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(y$_,y$c){"use strict";for(var y$e in Object.defineProperty(y$c,"__esModule",{value:!0}),Laya){var y$Z=Laya[y$e];y$Z&&y$Z.__isclass&&(y$c[y$e]=y$Z)}}),function(y$B,y$_,y$q){y$q.un,y$q.uns;var y$H=y$q.static,y$D=y$q.class,y$U=y$q.getset,y$Z=y$q.__newvec,y$L=laya.maths.Arith,y$P=laya.webgl.atlas.AtlasResourceManager,y$e=laya.webgl.shader.BaseShader,y$T=laya.utils.Browser,y$O=laya.webgl.utils.Buffer,y$K=laya.utils.Byte,y$X=laya.utils.ClassUtils,y$s=y$q.Config,y$u=(laya.events.Event,laya.events.EventDispatcher),y$r=laya.utils.Handler,y$G=laya.net.Loader,y$c=laya.net.LoaderManager,y$n=(laya.maths.MathUtil,laya.display.Node),y$k=laya.renders.Render,y$m=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),y$a=laya.resource.Resource,y$w=laya.utils.RunDriver,y$z=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),y$M=laya.display.Sprite,y$f=laya.utils.Stat,y$A=laya.utils.StringKey,y$C=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),y$v=laya.utils.Utils,y$y=laya.webgl.WebGL,y$$=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;y$q.interface("laya.d3.core.IClone"),y$q.interface("laya.d3.graphics.IVertex"),y$q.interface("laya.d3.core.render.IUpdate"),y$q.interface("laya.d3.core.scene.ITreeNode"),y$q.interface("laya.d3.core.render.IRenderable");(function(){function y$i(){}y$D(y$i,"laya.d3.animation.AnimationClipParser01"),y$i.READ_DATA=function(){y$i._DATA.offset=y$i._reader.getUint32(),y$i._DATA.size=y$i._reader.getUint32()},y$i.READ_BLOCK=function(){for(var y$_=y$i._BLOCK.count=y$i._reader.getUint16(),y$c=y$i._BLOCK.blockStarts=[],y$e=y$i._BLOCK.blockLengths=[],y$Z=0;y$Z<y$_;y$Z++)y$c.push(y$i._reader.getUint32()),y$e.push(y$i._reader.getUint32())},y$i.READ_STRINGS=function(){var y$_=y$i._reader.getUint32(),y$c=y$i._reader.getUint16(),y$e=y$i._reader.pos;y$i._reader.pos=y$_+y$i._DATA.offset;for(var y$Z=0;y$Z<y$c;y$Z++)y$i._strings[y$Z]=y$i._reader.readUTFString();y$i._reader.pos=y$e},y$i.parse=function(y$_,y$c){y$i._animationClip=y$_;(y$i._reader=y$c).__getBuffer();y$i.READ_DATA(),y$i.READ_BLOCK(),y$i.READ_STRINGS();for(var y$e=0,y$Z=y$i._BLOCK.count;y$e<y$Z;y$e++){var y$X=y$c.getUint16(),y$u=y$i._strings[y$X],y$P=y$i["READ_"+y$u];if(null==y$P)throw new Error("model file err,no this function:"+y$X+" "+y$u);y$P.call()}},y$i.READ_ANIMATIONS=function(){var y$_,y$c=0,y$e=0,y$Z=y$i._reader,y$X=y$Z.__getBuffer(),y$u=[],y$P=y$Z.getUint8();for(y$u.length=y$P,y$c=0;y$c<y$P;y$c++)y$u[y$c]=y$Z.getUint16();var y$O=[],y$s=y$Z.getUint16();for(y$O.length=y$s,y$c=0;y$c<y$s;y$c++)y$O[y$c]=y$Z.getFloat32();var y$n=y$i._animationClip;y$n.name=y$i._strings[y$Z.getUint16()];var y$m=y$n._duration=y$Z.getFloat32();y$n.islooping=!!y$Z.getByte(),y$n._frameRate=y$Z.getInt16();var y$H=y$Z.getInt16(),y$B=y$n._nodes=new Array;y$B.length=y$H,(y$n._publicClipDatas=[]).length=y$H;var y$D=y$n._nodesMap={},y$U=0,y$k=0;for(y$c=0;y$c<y$H;y$c++){y$_=y$B[y$c]=new y$j;var y$a=y$Z.getUint16(),y$G=y$_.path=[];for(y$G.length=y$a,y$e=0;y$e<y$a;y$e++)y$G[y$e]=y$i._strings[y$Z.getUint16()];var y$w=y$G.join("/"),y$z=y$D[y$w];y$z||(y$D[y$w]=y$z=[]),y$z.push(y$_);var y$L=y$Z.getInt16();-1!==y$L&&(y$_.componentType=y$i._strings[y$L]);var y$q=y$Q._propertyIndexDic[y$i._strings[y$Z.getUint16()]];if(null==y$q)throw new Error("AnimationClipParser01:unknown property name.");var y$K=y$q<4,y$M=!y$K||y$K&&""===y$G[0];(y$_._cacheProperty=y$M)?y$U++:y$k++,y$_.propertyNameID=y$q;var y$f=y$u[y$Z.getUint8()];y$_.keyFrameWidth=y$f/4;var y$A=y$_.keyFrames=[],y$v=y$A.length=y$Z.getUint16(),y$r=null,y$C=NaN;for(y$e=0;y$e<y$v;y$e++){var y$y=y$A[y$e]=new y$J;y$C=y$y.startTime=y$O[y$Z.getUint16()];var y$$=y$Z.pos;y$y.inTangent=new Float32Array(y$X.slice(y$$,y$$+y$f)),y$Z.pos+=y$f,y$$=y$Z.pos,y$y.outTangent=new Float32Array(y$X.slice(y$$,y$$+y$f)),y$Z.pos+=y$f,y$$=y$Z.pos,y$y.data=new Float32Array(y$X.slice(y$$,y$$+y$f)),y$Z.pos+=y$f,y$r&&(y$r.next=y$y,y$r.duration=y$C-y$r.startTime),y$r=y$y}y$y.next=null,y$y.duration=y$m-y$C}var y$T=y$n._nodeToCachePropertyMap=new Int32Array(y$H),y$h=y$n._cachePropertyMap=new Int32Array(y$U),y$R=y$n._unCachePropertyMap=new Int32Array(y$k);for(y$U=y$k=0,y$c=0;y$c<y$H;y$c++)(y$_=y$B[y$c])._cacheProperty?(y$T[y$c]=y$U,y$h[y$U++]=y$c):y$R[y$k++]=y$c},y$i._animationClip=null,y$i._reader=null,y$i._strings=[],y$H(y$i,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function y$p(){}y$D(y$p,"laya.d3.animation.AnimationClipParser02"),y$p.READ_DATA=function(){y$p._DATA.offset=y$p._reader.getUint32(),y$p._DATA.size=y$p._reader.getUint32()},y$p.READ_BLOCK=function(){for(var y$_=y$p._BLOCK.count=y$p._reader.getUint16(),y$c=y$p._BLOCK.blockStarts=[],y$e=y$p._BLOCK.blockLengths=[],y$Z=0;y$Z<y$_;y$Z++)y$c.push(y$p._reader.getUint32()),y$e.push(y$p._reader.getUint32())},y$p.READ_STRINGS=function(){var y$_=y$p._reader.getUint32(),y$c=y$p._reader.getUint16(),y$e=y$p._reader.pos;y$p._reader.pos=y$_+y$p._DATA.offset;for(var y$Z=0;y$Z<y$c;y$Z++)y$p._strings[y$Z]=y$p._reader.readUTFString();y$p._reader.pos=y$e},y$p.parse=function(y$_,y$c){y$p._animationClip=y$_;(y$p._reader=y$c).__getBuffer();y$p.READ_DATA(),y$p.READ_BLOCK(),y$p.READ_STRINGS();for(var y$e=0,y$Z=y$p._BLOCK.count;y$e<y$Z;y$e++){var y$X=y$c.getUint16(),y$u=y$p._strings[y$X],y$P=y$p["READ_"+y$u];if(null==y$P)throw new Error("model file err,no this function:"+y$X+" "+y$u);y$P.call()}},y$p.READ_ANIMATIONS=function(){var y$_,y$c=0,y$e=0,y$Z=y$p._reader,y$X=y$Z.__getBuffer(),y$u=[],y$P=y$Z.getUint8();for(y$u.length=y$P,y$c=0;y$c<y$P;y$c++)y$u[y$c]=y$Z.getUint16();var y$O=[],y$s=y$Z.getUint16();for(y$O.length=y$s,y$c=0;y$c<y$s;y$c++)y$O[y$c]=y$Z.getFloat32();var y$n=y$p._animationClip;y$n.name=y$p._strings[y$Z.getUint16()];var y$m=y$n._duration=y$Z.getFloat32();y$n.islooping=!!y$Z.getByte(),y$n._frameRate=y$Z.getInt16();var y$H=y$Z.getInt16(),y$B=y$n._nodes=new Array;y$B.length=y$H,(y$n._publicClipDatas=[]).length=y$H;var y$D=y$n._nodesMap={},y$U=0,y$k=0;for(y$c=0;y$c<y$H;y$c++){y$_=y$B[y$c]=new y$j;var y$a=y$Z.getUint16(),y$G=y$_.path=[];for(y$G.length=y$a,y$e=0;y$e<y$a;y$e++)y$G[y$e]=y$p._strings[y$Z.getUint16()];var y$w=y$G.join("/"),y$z=y$D[y$w];y$z||(y$D[y$w]=y$z=[]),y$z.push(y$_);var y$L=y$Z.getInt16();-1!==y$L&&(y$_.componentType=y$p._strings[y$L]);var y$q=y$Q._propertyIndexDic[y$p._strings[y$Z.getUint16()]];if(null==y$q)throw new Error("AnimationClipParser02:unknown property name.");var y$K=y$q<4,y$M=!y$K||y$K&&""===y$G[0];(y$_._cacheProperty=y$M)?y$U++:y$k++,y$_.propertyNameID=y$q;var y$f=y$u[y$Z.getUint8()];y$_.keyFrameWidth=y$f/4;var y$A=y$_.keyFrames=[],y$v=y$A.length=y$Z.getUint16(),y$r=null,y$C=NaN;for(y$e=0;y$e<y$v;y$e++){var y$y=y$A[y$e]=new y$J;y$C=y$y.startTime=y$O[y$Z.getUint16()];var y$$=y$Z.pos;y$y.inTangent=new Float32Array(y$X.slice(y$$,y$$+y$f)),y$Z.pos+=y$f,y$$=y$Z.pos,y$y.outTangent=new Float32Array(y$X.slice(y$$,y$$+y$f)),y$Z.pos+=y$f,y$$=y$Z.pos,y$y.data=new Float32Array(y$X.slice(y$$,y$$+y$f)),y$Z.pos+=y$f,y$r&&(y$r.next=y$y,y$r.duration=y$C-y$r.startTime),y$r=y$y}y$y.next=null,y$y.duration=y$m-y$C}var y$T=y$Z.getUint16();for(y$c=0;y$c<y$T;y$c++){var y$h,y$R=new y$o;y$R.time=y$Z.getFloat32(),y$R.eventName=y$p._strings[y$Z.getUint16()];var y$i=y$Z.getUint16();for(0<y$i&&(y$R.params=y$h=[]),y$e=0;y$e<y$i;y$e++){switch(y$Z.getByte()){case 0:y$h.push(!!y$Z.getByte());break;case 1:y$h.push(y$Z.getInt32());break;case 2:y$h.push(y$Z.getFloat32());break;case 3:y$h.push(y$p._strings[y$Z.getUint16()]);break;default:throw new Error("unknown type.")}}y$n.addEvent(y$R)}var y$x=y$n._nodeToCachePropertyMap=new Int32Array(y$H),y$F=y$n._cachePropertyMap=new Int32Array(y$U),y$Y=y$n._unCachePropertyMap=new Int32Array(y$k);for(y$U=y$k=0,y$c=0;y$c<y$H;y$c++)(y$_=y$B[y$c])._cacheProperty?(y$x[y$c]=y$U,y$F[y$U++]=y$c):y$Y[y$k++]=y$c},y$p._animationClip=null,y$p._reader=null,y$p._strings=[],y$H(y$p,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var y$o=function(){function y$_(){this.time=NaN,this.eventName=null,this.params=null}return y$D(y$_,"laya.d3.animation.AnimationEvent"),y$_}(),y$Q=function(){function y$Z(){this._childs=[],this.transform=new y$wc(this)}y$D(y$Z,"laya.d3.animation.AnimationNode");var y$_=y$Z.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.addChild=function(y$_){y$_._parent=this,y$_.transform.setParent(this.transform),this._childs.push(y$_)},y$_.removeChild=function(y$_){var y$c=this._childs.indexOf(y$_);-1!==y$c&&this._childs.splice(y$c,1)},y$_.getChildByName=function(y$_){for(var y$c=0,y$e=this._childs.length;y$c<y$e;y$c++){var y$Z=this._childs[y$c];if(y$Z.name===y$_)return y$Z}return null},y$_.getChildByIndex=function(y$_){return this._childs[y$_]},y$_.getChildCount=function(){return this._childs.length},y$_.cloneTo=function(y$_){var y$c=y$_;y$c.name=this.name;for(var y$e=0,y$Z=this._childs.length;y$e<y$Z;y$e++){var y$X=this._childs[y$e],y$u=y$X.clone();y$c.addChild(y$u);var y$P=y$X.transform,y$O=y$u.transform;y$O.setLocalPosition(y$P.getLocalPosition()),y$O.setLocalRotation(y$P.getLocalRotation()),y$O.setLocalScale(y$P.getLocalScale()),y$O._localRotationEuler=y$P._localRotationEuler,y$O._setWorldMatrixIgnoreUpdate(y$P.getWorldMatrix())}},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$Z.__init__=function(){y$Z.registerAnimationNodeProperty("localPosition",y$Z._getLocalPosition,y$Z._setLocalPosition),y$Z.registerAnimationNodeProperty("localRotation",y$Z._getLocalRotation,y$Z._setLocalRotation),y$Z.registerAnimationNodeProperty("localScale",y$Z._getLocalScale,y$Z._setLocalScale),y$Z.registerAnimationNodeProperty("localRotationEuler",y$Z._getLocalRotationEuler,y$Z._setLocalRotationEuler),y$Z.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",y$Z._getParticleRenderSharedMaterialTintColor,y$Z._setParticleRenderSharedMaterialTintColor),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",y$Z._getMeshRenderSharedMaterialTilingOffset,y$Z._setMeshRenderSharedMaterialTilingOffset),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",y$Z._getMeshRenderSharedMaterialAlbedo,y$Z._setMeshRenderSharedMaterialAlbedo),y$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",y$Z._getSkinnedMeshRenderSharedMaterialTilingOffset,y$Z._setSkinnedMeshRenderSharedMaterialTilingOffset),y$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",y$Z._getSkinnedMeshRenderSharedMaterialAlbedo,y$Z._setSkinnedMeshRenderSharedMaterialAlbedo),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",y$Z._getMeshRenderSharedMaterialAlbedo,y$Z._setMeshRenderSharedMaterialAlbedo),y$Z.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",y$Z._getSkinnedMeshRenderSharedMaterialAlbedo,y$Z._setSkinnedMeshRenderSharedMaterialAlbedo),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",y$Z._getMeshRenderSharedMaterialIntensity,y$Z._setMeshRenderSharedMaterialIntensity),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",y$Z._getMeshRenderSharedMaterialAlpha,y$Z._setMeshRenderSharedMaterialAlpha),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",y$Z._getMeshRenderSharedMaterialAlphaColor,y$Z._setMeshRenderSharedMaterialAlphaColor),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",y$Z._getMeshRenderSharedMaterialBaseColor,y$Z._setMeshRenderSharedMaterialBaseColor),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",y$Z._getMeshRenderSharedMaterialDissolve,y$Z._setMeshRenderSharedMaterialDissolve),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",y$Z._getMeshRenderSharedMaterialDissolveSpeed,y$Z._setMeshRenderSharedMaterialDissolveSpeed),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",y$Z._getMeshRenderSharedMaterialMMultiplier,y$Z._setMeshRenderSharedMaterialMMultiplier),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",y$Z._getMeshRenderSharedMaterialBaseScrollSpeedX,y$Z._setMeshRenderSharedMaterialBaseScrollSpeedX),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",y$Z._getMeshRenderSharedMaterialBaseScrollSpeedY,y$Z._setMeshRenderSharedMaterialBaseScrollSpeedY),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",y$Z._getMeshRenderSharedMaterialSecondScrollSpeedX,y$Z._setMeshRenderSharedMaterialSecondScrollSpeedX),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",y$Z._getMeshRenderSharedMaterialSecondScrollSpeedY,y$Z._setMeshRenderSharedMaterialSecondScrollSpeedY),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",y$Z._getMeshRenderSharedMaterialDetailTilingOffset,y$Z._setMeshRenderSharedMaterialDetailTilingOffset),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",y$Z._getMeshRenderSharedMaterialDissolveTilingOffset,y$Z._setMeshRenderSharedMaterialDissolveTilingOffset),y$Z.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",y$Z._getMeshRenderSharedMaterialMaskTilingOffset,y$Z._setMeshRenderSharedMaterialMaskTilingOffset)},y$Z.registerAnimationNodeProperty=function(y$_,y$c,y$e){if(y$Z._propertyIndexDic[y$_])throw new Error("AnimationNode: this propertyName has registered.");y$Z._propertyIndexDic[y$_]=y$Z._propertyIDCounter,y$Z._propertyGetFuncs[y$Z._propertyIDCounter]=y$c,y$Z._propertySetFuncs[y$Z._propertyIDCounter]=y$e,y$Z._propertyIDCounter++},y$Z._getLocalPosition=function(y$_,y$c){return y$_?y$_.transform.getLocalPosition():y$c._transform.localPosition.elements},y$Z._setLocalPosition=function(y$_,y$c,y$e){if(y$_)y$_.transform.setLocalPosition(y$e);else{var y$Z=y$c._transform,y$X=y$Z.localPosition;y$X.elements=y$e,y$Z.localPosition=y$X}},y$Z._getLocalRotation=function(y$_,y$c){return y$_?y$_.transform.getLocalRotation():y$c._transform.localRotation.elements},y$Z._setLocalRotation=function(y$_,y$c,y$e){if(y$_)y$_.transform.setLocalRotation(y$e);else{var y$Z=y$c._transform,y$X=y$Z.localRotation;y$X.elements=y$e,y$Z.localRotation=y$X}},y$Z._getLocalScale=function(y$_,y$c){return y$_?y$_.transform.getLocalScale():y$c._transform.localScale.elements},y$Z._setLocalScale=function(y$_,y$c,y$e){if(y$_)y$_.transform.setLocalScale(y$e);else{var y$Z=y$c._transform,y$X=y$Z.localScale;y$X.elements=y$e,y$Z.localScale=y$X}},y$Z._getLocalRotationEuler=function(y$_,y$c){return y$_?y$_.transform.getLocalRotationEuler():y$c._transform.localRotationEuler.elements},y$Z._setLocalRotationEuler=function(y$_,y$c,y$e){if(y$_)y$_.transform.setLocalRotationEuler(y$e);else{var y$Z=y$c._transform,y$X=y$Z.localRotationEuler;y$X.elements=y$e,y$Z.localRotationEuler=y$X}},y$Z._getMeshRenderSharedMaterialTilingOffset=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return y$c.meshRender.sharedMaterial.tilingOffset.elements},y$Z._setMeshRenderSharedMaterialTilingOffset=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.meshRender.material).tilingOffset).elements=y$e,y$Z.tilingOffset=y$X)}else(y$X=(y$Z=y$c.meshRender.material).tilingOffset).elements=y$e,y$Z.tilingOffset=y$X},y$Z._getMeshRenderSharedMaterialAlbedo=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.albedoColor.elements:null}return y$c.meshRender.sharedMaterial.albedoColor.elements},y$Z._setMeshRenderSharedMaterialAlbedo=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.meshRender.material).albedoColor).elements=y$e,y$Z.albedoColor=y$X)}else(y$X=(y$Z=y$c.meshRender.material).albedoColor).elements=y$e,y$Z.albedoColor=y$X},y$Z._getSkinnedMeshRenderSharedMaterialTilingOffset=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return y$c.skinnedMeshRender.sharedMaterial.tilingOffset.elements},y$Z._setSkinnedMeshRenderSharedMaterialTilingOffset=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.skinnedMeshRender.material).tilingOffset).elements=y$e,y$Z.tilingOffset=y$X)}else(y$X=(y$Z=y$c.skinnedMeshRender.material).tilingOffset).elements=y$e,y$Z.tilingOffset=y$X},y$Z._getSkinnedMeshRenderSharedMaterialAlbedo=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return y$c.skinnedMeshRender.sharedMaterial.albedoColor.elements},y$Z._setSkinnedMeshRenderSharedMaterialAlbedo=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.skinnedMeshRender.material).albedoColor).elements=y$e,y$Z.albedoColor=y$X)}else(y$X=(y$Z=y$c.skinnedMeshRender.material).albedoColor).elements=y$e,y$Z.albedoColor=y$X},y$Z._getParticleRenderSharedMaterialTintColor=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.particleRender.sharedMaterial.tintColor.elements:null}return y$c.particleRender.sharedMaterial.tintColor.elements},y$Z._setParticleRenderSharedMaterialTintColor=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.particleRender.material).tintColor).elements=y$e,y$Z.tintColor=y$X)}else(y$X=(y$Z=y$c.particleRender.material).tintColor).elements=y$e,y$Z.tintColor=y$X},y$Z._getMeshRenderSharedMaterialAlphaColor=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.alphaColor.elements:null}return y$c.meshRender.sharedMaterial.alphaColor.elements},y$Z._setMeshRenderSharedMaterialAlphaColor=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.meshRender.material).alphaColor).elements=y$e,y$Z.alphaColor=y$X)}else(y$X=(y$Z=y$c.meshRender.material).alphaColor).elements=y$e,y$Z.alphaColor=y$X},y$Z._getMeshRenderSharedMaterialBaseColor=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.baseColor.elements:null}return y$c.meshRender.sharedMaterial.baseColor.elements},y$Z._setMeshRenderSharedMaterialBaseColor=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.meshRender.material).baseColor).elements=y$e,y$Z.baseColor=y$X)}else(y$X=(y$Z=y$c.meshRender.material).baseColor).elements=y$e,y$Z.baseColor=y$X},y$Z._getMeshRenderSharedMaterialDissolve=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.dissolve:0}return y$c.meshRender.sharedMaterial.dissolve},y$Z._setMeshRenderSharedMaterialDissolve=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.dissolve=y$e[0])}else y$c.meshRender.material.dissolve=y$e[0]},y$Z._getMeshRenderSharedMaterialDissolveSpeed=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.dissolveSpeed:0}return y$c.meshRender.sharedMaterial.dissolveSpeed},y$Z._setMeshRenderSharedMaterialDissolveSpeed=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.dissolveSpeed=y$e[0])}else y$c.meshRender.material.dissolveSpeed=y$e[0]},y$Z._getMeshRenderSharedMaterialMMultiplier=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.mMultiplier:0}return y$c.meshRender.sharedMaterial.mMultiplier},y$Z._setMeshRenderSharedMaterialMMultiplier=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.mMultiplier=y$e[0])}else y$c.meshRender.material.mMultiplier=y$e[0]},y$Z._getMeshRenderSharedMaterialBaseScrollSpeedX=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return y$c.meshRender.sharedMaterial.baseScrollSpeedX},y$Z._setMeshRenderSharedMaterialBaseScrollSpeedX=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.baseScrollSpeedX=y$e[0])}else y$c.meshRender.material.baseScrollSpeedX=y$e[0]},y$Z._getMeshRenderSharedMaterialBaseScrollSpeedY=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return y$c.meshRender.sharedMaterial.baseScrollSpeedY},y$Z._setMeshRenderSharedMaterialBaseScrollSpeedY=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.baseScrollSpeedY=y$e[0])}else y$c.meshRender.material.baseScrollSpeedY=y$e[0]},y$Z._getMeshRenderSharedMaterialSecondScrollSpeedX=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return y$c.meshRender.sharedMaterial.secondScrollSpeedX},y$Z._setMeshRenderSharedMaterialSecondScrollSpeedX=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.secondScrollSpeedX=y$e[0])}else y$c.meshRender.material.secondScrollSpeedX=y$e[0]},y$Z._getMeshRenderSharedMaterialSecondScrollSpeedY=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return y$c.meshRender.sharedMaterial.secondScrollSpeedY},y$Z._setMeshRenderSharedMaterialSecondScrollSpeedY=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.secondScrollSpeedY=y$e[0])}else y$c.meshRender.material.secondScrollSpeedY=y$e[0]},y$Z._getMeshRenderSharedMaterialAlpha=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.alpha:0}return y$c.meshRender.sharedMaterial.alpha},y$Z._setMeshRenderSharedMaterialAlpha=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.alpha=y$e[0])}else y$c.meshRender.material.alpha=y$e[0]},y$Z._getMeshRenderSharedMaterialIntensity=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.intensity:0}return y$c.meshRender.sharedMaterial.intensity},y$Z._setMeshRenderSharedMaterialIntensity=function(y$_,y$c,y$e){if(y$_){var y$Z=y$_.transform._entity;y$Z&&(y$Z.owner.meshRender.material.intensity=y$e[0])}else y$c.meshRender.material.intensity=y$e[0]},y$Z._getMeshRenderSharedMaterialDetailTilingOffset=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return y$c.meshRender.sharedMaterial.detailTilingOffset.elements},y$Z._setMeshRenderSharedMaterialDetailTilingOffset=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.meshRender.material).detailTilingOffset).elements=y$e,y$Z.detailTilingOffset=y$X)}else(y$X=(y$Z=y$c.meshRender.material).detailTilingOffset).elements=y$e,y$Z.detailTilingOffset=y$X},y$Z._getMeshRenderSharedMaterialDissolveTilingOffset=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return y$c.meshRender.sharedMaterial.dissolveTilingOffset.elements},y$Z._setMeshRenderSharedMaterialDissolveTilingOffset=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.meshRender.material).dissolveTilingOffset).elements=y$e,y$Z.dissolveTilingOffset=y$X)}else(y$X=(y$Z=y$c.meshRender.material).dissolveTilingOffset).elements=y$e,y$Z.dissolveTilingOffset=y$X},y$Z._getMeshRenderSharedMaterialMaskTilingOffset=function(y$_,y$c){if(y$_){var y$e=y$_.transform._entity;return y$e?y$e.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return y$c.meshRender.sharedMaterial.maskTilingOffset.elements},y$Z._setMeshRenderSharedMaterialMaskTilingOffset=function(y$_,y$c,y$e){var y$Z,y$X;if(y$_){var y$u=y$_.transform._entity;y$u&&((y$X=(y$Z=y$u.owner.meshRender.material).maskTilingOffset).elements=y$e,y$Z.maskTilingOffset=y$X)}else(y$X=(y$Z=y$c.meshRender.material).maskTilingOffset).elements=y$e,y$Z.maskTilingOffset=y$X},y$Z._propertyIDCounter=0,y$Z._propertyIndexDic={},y$Z._propertySetFuncs=[],y$Z._propertyGetFuncs=[],y$Z}(),y$J=function(){function y$_(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return y$D(y$_,"laya.d3.animation.Keyframe"),y$_}(),y$j=function(){function y$_(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return y$D(y$_,"laya.d3.animation.KeyframeNode"),y$_}(),y$h=(function(){function y$_(){this._tempVector30=new y$Pc,this._tempVector31=new y$Pc,this._tempVector32=new y$Pc,this._a=new y$Pc,this._b=new y$Pc,this._c=new y$Pc,this._d=new y$Pc}y$D(y$_,"laya.d3.core.glitter.SplineCurvePositionVelocity");var y$c=y$_.prototype;y$c.Init=function(y$_,y$c,y$e,y$Z){y$_.cloneTo(this._d),y$c.cloneTo(this._c),y$Pc.scale(y$_,2,this._a),y$Pc.scale(y$e,2,this._tempVector30),y$Pc.subtract(this._a,this._tempVector30,this._a),y$Pc.add(this._a,y$c,this._a),y$Pc.add(this._a,y$Z,this._a),y$Pc.scale(y$e,3,this._b),y$Pc.scale(y$_,3,this._tempVector30),y$Pc.subtract(this._b,this._tempVector30,this._b),y$Pc.subtract(this._b,y$Z,this._b),y$Pc.scale(y$c,2,this._tempVector30),y$Pc.subtract(this._b,this._tempVector30,this._b)},y$c.Slerp=function(y$_,y$c){y$Pc.scale(this._a,y$_*y$_*y$_,this._tempVector30),y$Pc.scale(this._b,y$_*y$_,this._tempVector31),y$Pc.scale(this._c,y$_,this._tempVector32),y$Pc.add(this._tempVector30,this._tempVector31,y$c),y$Pc.add(y$c,this._tempVector32,y$c),y$Pc.add(y$c,this._d,y$c)}}(),function(){function y$F(y$_,y$c,y$e,y$Z){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=y$_,this._h=y$c,this._minHeight=y$e,this._maxHeight=y$Z}y$D(y$F,"laya.d3.core.HeightMap");var y$_=y$F.prototype;y$_._inBounds=function(y$_,y$c){return 0<=y$_&&y$_<this._h&&0<=y$c&&y$c<this._w},y$_.getHeight=function(y$_,y$c){return this._inBounds(y$_,y$c)?this._datas[y$_][y$c]:NaN},y$U(0,y$_,"width",function(){return this._w}),y$U(0,y$_,"height",function(){return this._h}),y$U(0,y$_,"maxHeight",function(){return this._maxHeight}),y$U(0,y$_,"minHeight",function(){return this._minHeight}),y$F.creatFromMesh=function(y$_,y$c,y$e,y$Z){for(var y$X=[],y$u=[],y$P=y$_.getSubMeshCount(),y$O=0;y$O<y$P;y$O++){for(var y$s=y$_.getSubMesh(y$O),y$n=y$s._getVertexBuffer(),y$m=y$n.getData(),y$H=[],y$B=0;y$B<y$m.length;y$B+=y$n.vertexDeclaration.vertexStride/4){var y$D=new y$Pc(y$m[y$B+0],y$m[y$B+1],y$m[y$B+2]);y$H.push(y$D)}y$X.push(y$H);var y$U=y$s._getIndexBuffer();y$u.push(y$U.getData())}var y$k=y$_.boundingBox,y$a=y$k.min.x,y$G=y$k.min.z,y$w=y$k.max.x,y$z=y$k.max.z,y$L=y$k.min.y,y$q=y$k.max.y,y$K=y$w-y$a,y$M=y$z-y$G,y$f=y$Z.elements[0]=y$K/(y$c-1),y$A=y$Z.elements[1]=y$M/(y$e-1),y$v=new y$F(y$c,y$e,y$L,y$q),y$r=y$F._tempRay,y$C=y$r.direction.elements;y$C[0]=0,y$C[1]=-1,y$C[2]=0;var y$y=y$q+.1;y$r.origin.elements[1]=y$y;for(var y$$=0;y$$<y$e;y$$++){var y$T=y$G+y$$*y$A;y$v._datas[y$$]=[];for(var y$h=0;y$h<y$c;y$h++){var y$R=y$a+y$h*y$f,y$i=y$r.origin.elements;y$i[0]=y$R,y$i[2]=y$T;var y$x=y$F._getPosition(y$r,y$X,y$u);y$v._datas[y$$][y$h]=y$x===Number.MAX_VALUE?NaN:y$y-y$x}}return y$v},y$F.createFromImage=function(y$_,y$c,y$e){for(var y$Z=y$_.width,y$X=y$_.height,y$u=new y$F(y$Z,y$X,y$c,y$e),y$P=(y$e-y$c)/254,y$O=y$_.getPixels(),y$s=0,y$n=0;y$n<y$X;y$n++)for(var y$m=y$u._datas[y$n]=[],y$H=0;y$H<y$Z;y$H++){var y$B=y$O[y$s++],y$D=y$O[y$s++],y$U=y$O[y$s++],y$k=y$O[y$s++];y$m[y$H]=255==y$B&&255==y$D&&255==y$U&&255==y$k?NaN:(y$B+y$D+y$U)/3*y$P+y$c}return y$u},y$F._getPosition=function(y$_,y$c,y$e){for(var y$Z=Number.MAX_VALUE,y$X=0;y$X<y$c.length;y$X++)for(var y$u=y$c[y$X],y$P=y$e[y$X],y$O=0;y$O<y$P.length;y$O+=3){var y$s=y$u[y$P[y$O+0]],y$n=y$u[y$P[y$O+1]],y$m=y$u[y$P[y$O+2]],y$H=y$Uc.rayIntersectsTriangle(y$_,y$s,y$n,y$m);!isNaN(y$H)&&y$H<y$Z&&(y$Z=y$H)}return y$Z},y$H(y$F,["_tempRay",function(){return this._tempRay=new y$Xc(new y$Pc,new y$Pc)}])}(),function(){function y$X(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}y$D(y$X,"laya.d3.core.Layer");var y$_=y$X.prototype;return y$_._binarySearchIndex=function(){for(var y$_=0,y$c=y$X._collsionTestList.length-1,y$e=0;y$_<=y$c;){y$e=Math.floor((y$_+y$c)/2);var y$Z=y$X._collsionTestList[y$e];if(y$Z==this._number)return y$e;y$Z>this._number?y$c=y$e-1:y$_=y$e+1}return y$_},y$_._addCollider=function(y$_){0===this._colliders.length&&y$X._collsionTestList.splice(this._binarySearchIndex(),0,this._number),y$_._isRigidbody?(this._colliders.unshift(y$_),this._nonRigidbodyOffset++):this._colliders.push(y$_)},y$_._removeCollider=function(y$_){var y$c=this._colliders.indexOf(y$_);y$c<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(y$c,1),0===this._colliders.length&&y$X._collsionTestList.splice(y$X._collsionTestList.indexOf(this._number),1)},y$U(0,y$_,"number",function(){return this._number}),y$U(0,y$_,"visible",function(){return this._visible},function(y$_){this._visible=y$_,y$X._visibleLayers=y$_?y$X._visibleLayers|this.mask:y$X._visibleLayers&~this.mask}),y$U(0,y$_,"mask",function(){return this._mask}),y$U(1,y$X,"visibleLayers",function(){return y$X._visibleLayers},function(y$_){y$X._visibleLayers=y$_;for(var y$c=0,y$e=y$X._layerList.length;y$c<y$e;y$c++){var y$Z=y$X._layerList[y$c];y$Z._visible=0!=(y$Z._mask&y$X._visibleLayers)}}),y$X.__init__=function(){y$X._layerList.length=31;for(var y$_=0;y$_<31;y$_++){var y$c=new y$X;y$X._layerList[y$_]=y$c,0===y$_?(y$c.name="Default Layer",y$c.visible=!0):(y$c.name="Layer-"+y$_,y$c.visible=!1),y$c._number=y$_,y$c._mask=Math.pow(2,y$_)}y$X.currentCreationLayer=y$X._layerList[0]},y$X.getLayerByNumber=function(y$_){if(y$_<0||30<y$_)throw new Error("无法返回指定Layer，该number超出范围！");return y$X._layerList[y$_]},y$X.getLayerByName=function(y$_){for(var y$c=0;y$c<31;y$c++)if(y$X._layerList[y$c].name===y$_)return y$X._layerList[y$c];throw new Error("无法返回指定Layer,该name不存在")},y$X.isVisible=function(y$_){return 0!=(y$_&y$X._currentCameraCullingMask&y$X._visibleLayers)},y$X._layerList=[],y$X._visibleLayers=2147483647,y$X._collsionTestList=[],y$X._currentCameraCullingMask=2147483647,y$X.maxCount=31,y$X.currentCreationLayer=null,y$X}()),y$R=(function(){function y$_(y$_,y$c,y$e){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=y$_,this._minCount=y$c,this._maxCount=y$e}y$D(y$_,"laya.d3.core.particleShuriKen.module.Burst");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.cloneTo=function(y$_){var y$c=y$_;y$c._time=this._time,y$c._minCount=this._minCount,y$c._maxCount=this._maxCount},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"time",function(){return this._time}),y$U(0,y$c,"minCount",function(){return this._minCount}),y$U(0,y$c,"maxCount",function(){return this._maxCount})}(),function(){function y$_(y$_){this._color=null,this.enbale=!1,this._color=y$_}y$D(y$_,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var y$c=y$_.prototype;y$c.cloneTo=function(y$_){var y$c=y$_;this._color.cloneTo(y$c._color),y$c.enbale=this.enbale},y$c.clone=function(){var y$_;switch(this._color.type){case 0:y$_=y$x.createByConstant(this._color.constant.clone());break;case 1:y$_=y$x.createByGradient(this._color.gradient.clone());break;case 2:y$_=y$x.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:y$_=y$x.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var y$c=new this.constructor(y$_);return y$c.enbale=this.enbale,y$c},y$U(0,y$c,"color",function(){return this._color})}(),function(){function y$_(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}y$D(y$_,"laya.d3.core.particleShuriKen.module.Emission");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),y$c._destroy=function(){this._bursts=null,this._destroyed=!0},y$c.getBurstsCount=function(){return this._bursts.length},y$c.getBurstByIndex=function(y$_){return this._bursts[y$_]},y$c.addBurst=function(y$_){var y$c=this._bursts.length;if(0<y$c)for(var y$e=0;y$e<y$c;y$e++)this._bursts[y$e].time>y$_.time&&this._bursts.splice(y$e,0,y$_);this._bursts.push(y$_)},y$c.removeBurst=function(y$_){var y$c=this._bursts.indexOf(y$_);-1!==y$c&&this._bursts.splice(y$c,1)},y$c.removeBurstByIndex=function(y$_){this._bursts.splice(y$_,1)},y$c.clearBurst=function(){this._bursts.length=0},y$c.cloneTo=function(y$_){var y$c=y$_,y$e=y$c._bursts;y$e.length=this._bursts.length;for(var y$Z=0,y$X=this._bursts.length;y$Z<y$X;y$Z++){var y$u=y$e[y$Z];y$u?this._bursts[y$Z].cloneTo(y$u):y$e[y$Z]=this._bursts[y$Z].clone()}y$c._emissionRate=this._emissionRate,y$c.enbale=this.enbale},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"destroyed",function(){return this._destroyed}),y$U(0,y$c,"emissionRate",function(){return this._emissionRate},function(y$_){if(y$_<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=y$_})}(),function(){function y$Z(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}y$D(y$Z,"laya.d3.core.particleShuriKen.module.FrameOverTime");var y$_=y$Z.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.cloneTo=function(y$_){var y$c=y$_;y$c._type=this._type,y$c._constant=this._constant,this._overTime.cloneTo(y$c._overTime),y$c._constantMin=this._constantMin,y$c._constantMax=this._constantMax,this._overTimeMin.cloneTo(y$c._overTimeMin),this._overTimeMax.cloneTo(y$c._overTimeMax)},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$_,"frameOverTimeData",function(){return this._overTime}),y$U(0,y$_,"constant",function(){return this._constant}),y$U(0,y$_,"type",function(){return this._type}),y$U(0,y$_,"frameOverTimeDataMin",function(){return this._overTimeMin}),y$U(0,y$_,"constantMin",function(){return this._constantMin}),y$U(0,y$_,"frameOverTimeDataMax",function(){return this._overTimeMax}),y$U(0,y$_,"constantMax",function(){return this._constantMax}),y$Z.createByConstant=function(y$_){var y$c=new y$Z;return y$c._type=0,y$c._constant=y$_,y$c},y$Z.createByOverTime=function(y$_){var y$c=new y$Z;return y$c._type=1,y$c._overTime=y$_,y$c},y$Z.createByRandomTwoConstant=function(y$_,y$c){var y$e=new y$Z;return y$e._type=2,y$e._constantMin=y$_,y$e._constantMax=y$c,y$e},y$Z.createByRandomTwoOverTime=function(y$_,y$c){var y$e=new y$Z;return y$e._type=3,y$e._overTimeMin=y$_,y$e._overTimeMax=y$c,y$e},y$Z}()),y$i=function(){function y$n(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}y$D(y$n,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var y$_=y$n.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.cloneTo=function(y$_){var y$c=y$_;y$c._type=this._type,y$c._separateAxes=this._separateAxes,y$c._constant=this._constant,this._constantSeparate.cloneTo(y$c._constantSeparate),this._gradient.cloneTo(y$c._gradient),this._gradientX.cloneTo(y$c._gradientX),this._gradientY.cloneTo(y$c._gradientY),this._gradientZ.cloneTo(y$c._gradientZ),y$c._constantMin=this._constantMin,y$c._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(y$c._constantMinSeparate),this._constantMaxSeparate.cloneTo(y$c._constantMaxSeparate),this._gradientMin.cloneTo(y$c._gradientMin),this._gradientMax.cloneTo(y$c._gradientMax),this._gradientXMin.cloneTo(y$c._gradientXMin),this._gradientXMax.cloneTo(y$c._gradientXMax),this._gradientYMin.cloneTo(y$c._gradientYMin),this._gradientYMax.cloneTo(y$c._gradientYMax),this._gradientZMin.cloneTo(y$c._gradientZMin),this._gradientZMax.cloneTo(y$c._gradientZMax)},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$_,"gradientZ",function(){return this._gradientZ}),y$U(0,y$_,"constant",function(){return this._constant}),y$U(0,y$_,"gradient",function(){return this._gradient}),y$U(0,y$_,"separateAxes",function(){return this._separateAxes}),y$U(0,y$_,"type",function(){return this._type}),y$U(0,y$_,"constantSeparate",function(){return this._constantSeparate}),y$U(0,y$_,"gradientX",function(){return this._gradientX}),y$U(0,y$_,"gradientY",function(){return this._gradientY}),y$U(0,y$_,"gradientW",function(){return this._gradientW}),y$U(0,y$_,"gradientMin",function(){return this._gradientMin}),y$U(0,y$_,"constantMin",function(){return this._constantMin}),y$U(0,y$_,"gradientMax",function(){return this._gradientMax}),y$U(0,y$_,"constantMax",function(){return this._constantMax}),y$U(0,y$_,"gradientWMin",function(){return this._gradientWMin}),y$U(0,y$_,"constantMinSeparate",function(){return this._constantMinSeparate}),y$U(0,y$_,"constantMaxSeparate",function(){return this._constantMaxSeparate}),y$U(0,y$_,"gradientXMin",function(){return this._gradientXMin}),y$U(0,y$_,"gradientXMax",function(){return this._gradientXMax}),y$U(0,y$_,"gradientWMax",function(){return this._gradientWMax}),y$U(0,y$_,"gradientYMin",function(){return this._gradientYMin}),y$U(0,y$_,"gradientYMax",function(){return this._gradientYMax}),y$U(0,y$_,"gradientZMin",function(){return this._gradientZMin}),y$U(0,y$_,"gradientZMax",function(){return this._gradientZMax}),y$n.createByConstant=function(y$_){var y$c=new y$n;return y$c._type=0,y$c._separateAxes=!1,y$c._constant=y$_,y$c},y$n.createByConstantSeparate=function(y$_){var y$c=new y$n;return y$c._type=0,y$c._separateAxes=!0,y$c._constantSeparate=y$_,y$c},y$n.createByGradient=function(y$_){var y$c=new y$n;return y$c._type=1,y$c._separateAxes=!1,y$c._gradient=y$_,y$c},y$n.createByGradientSeparate=function(y$_,y$c,y$e,y$Z){var y$X=new y$n;return y$X._type=1,y$X._separateAxes=!0,y$X._gradientX=y$_,y$X._gradientY=y$c,y$X._gradientZ=y$e,y$X._gradientW=y$Z,y$X},y$n.createByRandomTwoConstant=function(y$_,y$c){var y$e=new y$n;return y$e._type=2,y$e._separateAxes=!1,y$e._constantMin=y$_,y$e._constantMax=y$c,y$e},y$n.createByRandomTwoConstantSeparate=function(y$_,y$c){var y$e=new y$n;return y$e._type=2,y$e._separateAxes=!0,y$e._constantMinSeparate=y$_,y$e._constantMaxSeparate=y$c,y$e},y$n.createByRandomTwoGradient=function(y$_,y$c){var y$e=new y$n;return y$e._type=3,y$e._separateAxes=!1,y$e._gradientMin=y$_,y$e._gradientMax=y$c,y$e},y$n.createByRandomTwoGradientSeparate=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){var y$s=new y$n;return y$s._type=3,y$s._separateAxes=!0,y$s._gradientXMin=y$_,y$s._gradientXMax=y$c,y$s._gradientYMin=y$e,y$s._gradientYMax=y$Z,y$s._gradientZMin=y$X,y$s._gradientZMax=y$u,y$s._gradientWMin=y$P,y$s._gradientWMax=y$O,y$s},y$n}(),y$x=function(){function y$Z(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}y$D(y$Z,"laya.d3.core.particleShuriKen.module.GradientColor");var y$_=y$Z.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.cloneTo=function(y$_){var y$c=y$_;y$c._type=this._type,this._constant.cloneTo(y$c._constant),this._constantMin.cloneTo(y$c._constantMin),this._constantMax.cloneTo(y$c._constantMax),this._gradient.cloneTo(y$c._gradient),this._gradientMin.cloneTo(y$c._gradientMin),this._gradientMax.cloneTo(y$c._gradientMax)},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$_,"gradient",function(){return this._gradient}),y$U(0,y$_,"constant",function(){return this._constant}),y$U(0,y$_,"type",function(){return this._type}),y$U(0,y$_,"gradientMin",function(){return this._gradientMin}),y$U(0,y$_,"constantMin",function(){return this._constantMin}),y$U(0,y$_,"gradientMax",function(){return this._gradientMax}),y$U(0,y$_,"constantMax",function(){return this._constantMax}),y$Z.createByConstant=function(y$_){var y$c=new y$Z;return y$c._type=0,y$c._constant=y$_,y$c},y$Z.createByGradient=function(y$_){var y$c=new y$Z;return y$c._type=1,y$c._gradient=y$_,y$c},y$Z.createByRandomTwoConstant=function(y$_,y$c){var y$e=new y$Z;return y$e._type=2,y$e._constantMin=y$_,y$e._constantMax=y$c,y$e},y$Z.createByRandomTwoGradient=function(y$_,y$c){var y$e=new y$Z;return y$e._type=3,y$e._gradientMin=y$_,y$e._gradientMax=y$c,y$e},y$Z}(),y$F=(function(){function y$_(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}y$D(y$_,"laya.d3.core.particleShuriKen.module.GradientDataColor");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.addAlpha=function(y$_,y$c){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==y$_&&(y$_=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=y$_,this._alphaElements[this._alphaCurrentLength++]=y$c):DEBUG},y$c.addRGB=function(y$_,y$c){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==y$_&&(y$_=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=y$_,this._rgbElements[this._rgbCurrentLength++]=y$c.x,this._rgbElements[this._rgbCurrentLength++]=y$c.y,this._rgbElements[this._rgbCurrentLength++]=y$c.z):DEBUG},y$c.cloneTo=function(y$_){var y$c=y$_,y$e=0,y$Z=0;y$c._alphaCurrentLength=this._alphaCurrentLength;var y$X=y$c._alphaElements;for(y$X.length=this._alphaElements.length,y$e=0,y$Z=this._alphaElements.length;y$e<y$Z;y$e++)y$X[y$e]=this._alphaElements[y$e];y$c._rgbCurrentLength=this._rgbCurrentLength;var y$u=y$c._rgbElements;for(y$u.length=this._rgbElements.length,y$e=0,y$Z=this._rgbElements.length;y$e<y$Z;y$e++)y$u[y$e]=this._rgbElements[y$e]},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),y$U(0,y$c,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function y$_(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}y$D(y$_,"laya.d3.core.particleShuriKen.module.GradientDataInt");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.add=function(y$_,y$c){this._currentLength<8?(6===this._currentLength&&1!==y$_&&(y$_=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=y$_,this._elements[this._currentLength++]=y$c):console.log("Warning:data count must lessEqual than 4")},y$c.cloneTo=function(y$_){var y$c=y$_;y$c._currentLength=this._currentLength;var y$e=y$c._elements;y$e.length=this._elements.length;for(var y$Z=0,y$X=this._elements.length;y$Z<y$X;y$Z++)y$e[y$Z]=this._elements[y$Z]},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"gradientCount",function(){return this._currentLength/2})}(),function(){function y$_(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}y$D(y$_,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.add=function(y$_,y$c){this._currentLength<8?(6===this._currentLength&&1!==y$_&&(y$_=1,DEBUG),this._elements[this._currentLength++]=y$_,this._elements[this._currentLength++]=y$c):DEBUG},y$c.getKeyByIndex=function(y$_){return this._elements[2*y$_]},y$c.getValueByIndex=function(y$_){return this._elements[2*y$_+1]},y$c.getAverageValue=function(){for(var y$_=0,y$c=this._currentLength-2;y$_<y$c;y$_+=2){this._elements[y$_+1];this._elements[y$_+3],this._elements[y$_+2]-this._elements[y$_]}return 0},y$c.cloneTo=function(y$_){var y$c=y$_;y$c._currentLength=this._currentLength;var y$e=y$c._elements;y$e.length=this._elements.length;for(var y$Z=0,y$X=this._elements.length;y$Z<y$X;y$Z++)y$e[y$Z]=this._elements[y$Z]},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"gradientCount",function(){return this._currentLength/2})}(),function(){function y$_(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}y$D(y$_,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.add=function(y$_,y$c){this._currentLength<8?(6===this._currentLength&&1!==y$_&&(y$_=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=y$_,this._elements[this._currentLength++]=y$c.x,this._elements[this._currentLength++]=y$c.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},y$c.cloneTo=function(y$_){var y$c=y$_;y$c._currentLength=this._currentLength;var y$e=y$c._elements;y$e.length=this._elements.length;for(var y$Z=0,y$X=this._elements.length;y$Z<y$X;y$Z++)y$e[y$Z]=this._elements[y$Z]},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"gradientCount",function(){return this._currentLength/3})}(),function(){function y$O(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}y$D(y$O,"laya.d3.core.particleShuriKen.module.GradientSize");var y$_=y$O.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.getMaxSizeInGradient=function(){var y$_=0,y$c=0,y$e=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(y$_=0,y$c=this._gradientX.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientX.getValueByIndex(y$_));for(y$_=0,y$c=this._gradientY.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientY.getValueByIndex(y$_))}else for(y$_=0,y$c=this._gradient.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradient.getValueByIndex(y$_));break;case 1:y$e=this._separateAxes?(y$e=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),y$e=Math.max(y$e,this._constantMinSeparate.y),Math.max(y$e,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(y$_=0,y$c=this._gradientXMin.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientXMin.getValueByIndex(y$_));for(y$_=0,y$c=this._gradientXMax.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientXMax.getValueByIndex(y$_));for(y$_=0,y$c=this._gradientYMin.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientYMin.getValueByIndex(y$_));for(y$_=0,y$c=this._gradientZMax.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientZMax.getValueByIndex(y$_))}else{for(y$_=0,y$c=this._gradientMin.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientMin.getValueByIndex(y$_));for(y$_=0,y$c=this._gradientMax.gradientCount;y$_<y$c;y$_++)y$e=Math.max(y$e,this._gradientMax.getValueByIndex(y$_))}}return y$e},y$_.cloneTo=function(y$_){var y$c=y$_;y$c._type=this._type,y$c._separateAxes=this._separateAxes,this._gradient.cloneTo(y$c._gradient),this._gradientX.cloneTo(y$c._gradientX),this._gradientY.cloneTo(y$c._gradientY),this._gradientZ.cloneTo(y$c._gradientZ),y$c._constantMin=this._constantMin,y$c._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(y$c._constantMinSeparate),this._constantMaxSeparate.cloneTo(y$c._constantMaxSeparate),this._gradientMin.cloneTo(y$c._gradientMin),this._gradientMax.cloneTo(y$c._gradientMax),this._gradientXMin.cloneTo(y$c._gradientXMin),this._gradientXMax.cloneTo(y$c._gradientXMax),this._gradientYMin.cloneTo(y$c._gradientYMin),this._gradientYMax.cloneTo(y$c._gradientYMax),this._gradientZMin.cloneTo(y$c._gradientZMin),this._gradientZMax.cloneTo(y$c._gradientZMax)},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$_,"gradientZ",function(){return this._gradientZ}),y$U(0,y$_,"gradient",function(){return this._gradient}),y$U(0,y$_,"separateAxes",function(){return this._separateAxes}),y$U(0,y$_,"type",function(){return this._type}),y$U(0,y$_,"gradientMin",function(){return this._gradientMin}),y$U(0,y$_,"constantMin",function(){return this._constantMin}),y$U(0,y$_,"gradientX",function(){return this._gradientX}),y$U(0,y$_,"gradientY",function(){return this._gradientY}),y$U(0,y$_,"gradientMax",function(){return this._gradientMax}),y$U(0,y$_,"constantMax",function(){return this._constantMax}),y$U(0,y$_,"constantMinSeparate",function(){return this._constantMinSeparate}),y$U(0,y$_,"constantMaxSeparate",function(){return this._constantMaxSeparate}),y$U(0,y$_,"gradientXMin",function(){return this._gradientXMin}),y$U(0,y$_,"gradientXMax",function(){return this._gradientXMax}),y$U(0,y$_,"gradientYMin",function(){return this._gradientYMin}),y$U(0,y$_,"gradientYMax",function(){return this._gradientYMax}),y$U(0,y$_,"gradientZMin",function(){return this._gradientZMin}),y$U(0,y$_,"gradientZMax",function(){return this._gradientZMax}),y$O.createByGradient=function(y$_){var y$c=new y$O;return y$c._type=0,y$c._separateAxes=!1,y$c._gradient=y$_,y$c},y$O.createByGradientSeparate=function(y$_,y$c,y$e){var y$Z=new y$O;return y$Z._type=0,y$Z._separateAxes=!0,y$Z._gradientX=y$_,y$Z._gradientY=y$c,y$Z._gradientZ=y$e,y$Z},y$O.createByRandomTwoConstant=function(y$_,y$c){var y$e=new y$O;return y$e._type=1,y$e._separateAxes=!1,y$e._constantMin=y$_,y$e._constantMax=y$c,y$e},y$O.createByRandomTwoConstantSeparate=function(y$_,y$c){var y$e=new y$O;return y$e._type=1,y$e._separateAxes=!0,y$e._constantMinSeparate=y$_,y$e._constantMaxSeparate=y$c,y$e},y$O.createByRandomTwoGradient=function(y$_,y$c){var y$e=new y$O;return y$e._type=2,y$e._separateAxes=!1,y$e._gradientMin=y$_,y$e._gradientMax=y$c,y$e},y$O.createByRandomTwoGradientSeparate=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=new y$O;return y$P._type=2,y$P._separateAxes=!0,y$P._gradientXMin=y$_,y$P._gradientXMax=y$c,y$P._gradientYMin=y$e,y$P._gradientYMax=y$Z,y$P._gradientZMin=y$X,y$P._gradientZMax=y$u,y$P},y$O}()),y$Y=function(){function y$O(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}y$D(y$O,"laya.d3.core.particleShuriKen.module.GradientVelocity");var y$_=y$O.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.cloneTo=function(y$_){var y$c=y$_;y$c._type=this._type,this._constant.cloneTo(y$c._constant),this._gradientX.cloneTo(y$c._gradientX),this._gradientY.cloneTo(y$c._gradientY),this._gradientZ.cloneTo(y$c._gradientZ),this._constantMin.cloneTo(y$c._constantMin),this._constantMax.cloneTo(y$c._constantMax),this._gradientXMin.cloneTo(y$c._gradientXMin),this._gradientXMax.cloneTo(y$c._gradientXMax),this._gradientYMin.cloneTo(y$c._gradientYMin),this._gradientYMax.cloneTo(y$c._gradientYMax),this._gradientZMin.cloneTo(y$c._gradientZMin),this._gradientZMax.cloneTo(y$c._gradientZMax)},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$_,"gradientZ",function(){return this._gradientZ}),y$U(0,y$_,"constant",function(){return this._constant}),y$U(0,y$_,"type",function(){return this._type}),y$U(0,y$_,"gradientXMax",function(){return this._gradientXMax}),y$U(0,y$_,"constantMin",function(){return this._constantMin}),y$U(0,y$_,"gradientX",function(){return this._gradientX}),y$U(0,y$_,"gradientY",function(){return this._gradientY}),y$U(0,y$_,"gradientXMin",function(){return this._gradientXMin}),y$U(0,y$_,"constantMax",function(){return this._constantMax}),y$U(0,y$_,"gradientYMin",function(){return this._gradientYMin}),y$U(0,y$_,"gradientYMax",function(){return this._gradientYMax}),y$U(0,y$_,"gradientZMin",function(){return this._gradientZMin}),y$U(0,y$_,"gradientZMax",function(){return this._gradientZMax}),y$O.createByConstant=function(y$_){var y$c=new y$O;return y$c._type=0,y$c._constant=y$_,y$c},y$O.createByGradient=function(y$_,y$c,y$e){var y$Z=new y$O;return y$Z._type=1,y$Z._gradientX=y$_,y$Z._gradientY=y$c,y$Z._gradientZ=y$e,y$Z},y$O.createByRandomTwoConstant=function(y$_,y$c){var y$e=new y$O;return y$e._type=2,y$e._constantMin=y$_,y$e._constantMax=y$c,y$e},y$O.createByRandomTwoGradient=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=new y$O;return y$P._type=3,y$P._gradientXMin=y$_,y$P._gradientXMax=y$c,y$P._gradientYMin=y$e,y$P._gradientYMax=y$Z,y$P._gradientZMin=y$X,y$P._gradientZMax=y$u,y$P},y$O}(),y$p=(function(){function y$_(y$_){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=y$_}y$D(y$_,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.cloneTo=function(y$_){var y$c=y$_;this._angularVelocity.cloneTo(y$c._angularVelocity),y$c.enbale=this.enbale},y$c.clone=function(){var y$_;switch(this._angularVelocity.type){case 0:y$_=this._angularVelocity.separateAxes?y$i.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):y$i.createByConstant(this._angularVelocity.constant);break;case 1:y$_=this._angularVelocity.separateAxes?y$i.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):y$i.createByGradient(this._angularVelocity.gradient.clone());break;case 2:y$_=this._angularVelocity.separateAxes?y$i.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):y$i.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:y$_=this._angularVelocity.separateAxes?y$i.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):y$i.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var y$c=new this.constructor(y$_);return y$c.enbale=this.enbale,y$c},y$U(0,y$c,"angularVelocity",function(){return this._angularVelocity})}(),function(){function y$_(){this.enable=!1,this.randomDirection=!1}y$D(y$_,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c._getShapeBoundBox=function(y$_){throw new Error("BaseShape: must override it.")},y$c._getSpeedBoundBox=function(y$_){throw new Error("BaseShape: must override it.")},y$c.generatePositionAndDirection=function(y$_,y$c,y$e,y$Z){throw new Error("BaseShape: must override it.")},y$c._calculateProceduralBounds=function(y$_,y$c,y$e){this._getShapeBoundBox(y$_);var y$Z=y$_.min,y$X=y$_.max;y$Pc.multiply(y$Z,y$c,y$Z),y$Pc.multiply(y$X,y$c,y$X);var y$u=new y$E_(new y$Pc,new y$Pc);this.randomDirection?(y$u.min=new y$Pc(-1,-1,-1),y$u.max=new y$Pc(1,1,1)):this._getSpeedBoundBox(y$u);var y$P=new y$E_(new y$Pc,new y$Pc),y$O=y$P.min,y$s=y$P.max;y$Pc.scale(y$u.min,y$e.y,y$O),y$Pc.scale(y$u.max,y$e.y,y$s),y$Pc.add(y$_.min,y$O,y$O),y$Pc.add(y$_.max,y$s,y$s),y$Pc.min(y$_.min,y$O,y$_.min),y$Pc.max(y$_.max,y$O,y$_.max);var y$n=new y$E_(new y$Pc,new y$Pc),y$m=y$n.min,y$H=y$n.max;y$Pc.scale(y$u.min,y$e.x,y$m),y$Pc.scale(y$u.max,y$e.x,y$H),y$Pc.min(y$n.min,y$H,y$O),y$Pc.max(y$n.min,y$H,y$s),y$Pc.min(y$_.min,y$O,y$_.min),y$Pc.max(y$_.max,y$O,y$_.max)},y$c.cloneTo=function(y$_){y$_.enable=this.enable},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$_}()),y$t=function(){function y$u(){}return y$D(y$u,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),y$u._randomPointUnitArcCircle=function(y$_,y$c,y$e){var y$Z=y$c.elements,y$X=NaN;y$X=y$e?y$e.getFloat()*y$_:Math.random()*y$_,y$Z[0]=Math.cos(y$X),y$Z[1]=Math.sin(y$X)},y$u._randomPointInsideUnitArcCircle=function(y$_,y$c,y$e){var y$Z=y$c.elements;y$u._randomPointUnitArcCircle(y$_,y$c,y$e);var y$X=NaN;y$X=y$e?Math.pow(y$e.getFloat(),.5):Math.pow(Math.random(),.5),y$Z[0]=y$Z[0]*y$X,y$Z[1]=y$Z[1]*y$X},y$u._randomPointUnitCircle=function(y$_,y$c){var y$e=y$_.elements,y$Z=NaN;y$Z=y$c?y$c.getFloat()*Math.PI*2:Math.random()*Math.PI*2,y$e[0]=Math.cos(y$Z),y$e[1]=Math.sin(y$Z)},y$u._randomPointInsideUnitCircle=function(y$_,y$c){var y$e=y$_.elements;y$u._randomPointUnitCircle(y$_);var y$Z=NaN;y$Z=y$c?Math.pow(y$c.getFloat(),.5):Math.pow(Math.random(),.5),y$e[0]=y$e[0]*y$Z,y$e[1]=y$e[1]*y$Z},y$u._randomPointUnitSphere=function(y$_,y$c){var y$e=y$_.elements,y$Z=NaN,y$X=NaN;y$X=y$c?(y$Z=y$e[2]=2*y$c.getFloat()-1,y$c.getFloat()*Math.PI*2):(y$Z=y$e[2]=2*Math.random()-1,Math.random()*Math.PI*2);var y$u=Math.sqrt(1-y$Z*y$Z);y$e[0]=y$u*Math.cos(y$X),y$e[1]=y$u*Math.sin(y$X)},y$u._randomPointInsideUnitSphere=function(y$_,y$c){var y$e=y$_.elements;y$u._randomPointUnitSphere(y$_);var y$Z=NaN;y$Z=y$c?Math.pow(y$c.getFloat(),1/3):Math.pow(Math.random(),1/3),y$e[0]=y$e[0]*y$Z,y$e[1]=y$e[1]*y$Z,y$e[2]=y$e[2]*y$Z},y$u._randomPointInsideHalfUnitBox=function(y$_,y$c){var y$e=y$_.elements;y$c?(y$e[0]=y$c.getFloat()-.5,y$e[1]=y$c.getFloat()-.5,y$e[2]=y$c.getFloat()-.5):(y$e[0]=Math.random()-.5,y$e[1]=Math.random()-.5,y$e[2]=Math.random()-.5)},y$u}(),y$b=(function(){function y$_(y$_){this._size=null,this.enbale=!1,this._size=y$_}y$D(y$_,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.cloneTo=function(y$_){var y$c=y$_;this._size.cloneTo(y$c._size),y$c.enbale=this.enbale},y$c.clone=function(){var y$_;switch(this._size.type){case 0:y$_=this._size.separateAxes?y$F.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):y$F.createByGradient(this._size.gradient.clone());break;case 1:y$_=this._size.separateAxes?y$F.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):y$F.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:y$_=this._size.separateAxes?y$F.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):y$F.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var y$c=new this.constructor(y$_);return y$c.enbale=this.enbale,y$c},y$U(0,y$c,"size",function(){return this._size})}(),function(){function y$Z(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}y$D(y$Z,"laya.d3.core.particleShuriKen.module.StartFrame");var y$_=y$Z.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.cloneTo=function(y$_){var y$c=y$_;y$c._type=this._type,y$c._constant=this._constant,y$c._constantMin=this._constantMin,y$c._constantMax=this._constantMax},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$_,"constant",function(){return this._constant}),y$U(0,y$_,"type",function(){return this._type}),y$U(0,y$_,"constantMin",function(){return this._constantMin}),y$U(0,y$_,"constantMax",function(){return this._constantMax}),y$Z.createByConstant=function(y$_){var y$c=new y$Z;return y$c._type=0,y$c._constant=y$_,y$c},y$Z.createByRandomTwoConstant=function(y$_,y$c){var y$e=new y$Z;return y$e._type=1,y$e._constantMin=y$_,y$e._constantMax=y$c,y$e},y$Z}()),y$N=(function(){function y$_(y$_,y$c){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new y$uc(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=y$_,this._startFrame=y$c}y$D(y$_,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.cloneTo=function(y$_){var y$c=y$_;this.tiles.cloneTo(y$c.tiles),y$c.type=this.type,y$c.randomRow=this.randomRow,this._frame.cloneTo(y$c._frame),this._startFrame.cloneTo(y$c._startFrame),y$c.cycles=this.cycles,y$c.enableUVChannels=this.enableUVChannels,y$c.enable=this.enable},y$c.clone=function(){var y$_,y$c;switch(this._frame.type){case 0:y$_=y$R.createByConstant(this._frame.constant);break;case 1:y$_=y$R.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:y$_=y$R.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:y$_=y$R.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:y$c=y$b.createByConstant(this._startFrame.constant);break;case 1:y$c=y$b.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var y$e=new this.constructor(y$_,y$c);return this.tiles.cloneTo(y$e.tiles),y$e.type=this.type,y$e.randomRow=this.randomRow,y$e.cycles=this.cycles,y$e.enableUVChannels=this.enableUVChannels,y$e.enable=this.enable,y$e},y$U(0,y$c,"frame",function(){return this._frame}),y$U(0,y$c,"startFrame",function(){return this._startFrame})}(),function(){function y$_(y$_){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=y$_}y$D(y$_,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.cloneTo=function(y$_){var y$c=y$_;this._velocity.cloneTo(y$c._velocity),y$c.enbale=this.enbale,y$c.space=this.space},y$c.clone=function(){var y$_;switch(this._velocity.type){case 0:y$_=y$Y.createByConstant(this._velocity.constant.clone());break;case 1:y$_=y$Y.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:y$_=y$Y.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:y$_=y$Y.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var y$c=new this.constructor(y$_);return y$c.enbale=this.enbale,y$c.space=this.space,y$c},y$U(0,y$c,"velocity",function(){return this._velocity})}(),function(){function y$_(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new y$Bc,this._vb=y$pc.create(y$_._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=y$Yc.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=y$xc.nameKey.getID("LINE"),this._shaderCompile=y$fc._preCompileShader[this._sharderNameID]}y$D(y$_,"laya.d3.core.PhasorSpriter3D");var y$c=y$_.prototype;return y$c.line=function(y$_,y$c,y$e,y$Z){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(y$_.x,y$_.y,y$_.z,y$c.x,y$c.y,y$c.z,y$c.w),this.addVertex(y$e.x,y$e.y,y$e.z,y$Z.x,y$Z.y,y$Z.z,y$Z.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},y$c.circle=function(y$_,y$c,y$e,y$Z,y$X,y$u){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*y$c,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/y$c,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*y$_,Math.cos(this._tempNumver0)*y$_,0,y$e,y$Z,y$X,y$u),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},y$c.plane=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=y$Z/2,this._tempNumver1=y$X/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(y$_-this._tempNumver0,y$c+this._tempNumver1,y$e,y$u,y$P,y$O,y$s),this.addVertex(y$_+this._tempNumver0,y$c+this._tempNumver1,y$e,y$u,y$P,y$O,y$s),this.addVertex(y$_-this._tempNumver0,y$c-this._tempNumver1,y$e,y$u,y$P,y$O,y$s),this.addVertex(y$_+this._tempNumver0,y$c-this._tempNumver1,y$e,y$u,y$P,y$O,y$s),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},y$c.box=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=y$Z/2,this._tempNumver1=y$X/2,this._tempNumver2=y$u/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(y$_-this._tempNumver0,y$c+this._tempNumver1,y$e+this._tempNumver2,y$P,y$O,y$s,y$n),this.addVertex(y$_+this._tempNumver0,y$c+this._tempNumver1,y$e+this._tempNumver2,y$P,y$O,y$s,y$n),this.addVertex(y$_-this._tempNumver0,y$c-this._tempNumver1,y$e+this._tempNumver2,y$P,y$O,y$s,y$n),this.addVertex(y$_+this._tempNumver0,y$c-this._tempNumver1,y$e+this._tempNumver2,y$P,y$O,y$s,y$n),this.addVertex(y$_+this._tempNumver0,y$c+this._tempNumver1,y$e-this._tempNumver2,y$P,y$O,y$s,y$n),this.addVertex(y$_-this._tempNumver0,y$c+this._tempNumver1,y$e-this._tempNumver2,y$P,y$O,y$s,y$n),this.addVertex(y$_+this._tempNumver0,y$c-this._tempNumver1,y$e-this._tempNumver2,y$P,y$O,y$s,y$n),this.addVertex(y$_-this._tempNumver0,y$c-this._tempNumver1,y$e-this._tempNumver2,y$P,y$O,y$s,y$n),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},y$c.cone=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*y$e+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*y$e>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/y$e,this.addVertexIndex(0,y$c,0,y$Z,y$X,y$u,y$P,this._tempUint0),this.addVertexIndex(0,0,0,y$Z,y$X,y$u,y$P,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<y$e;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(y$_*this._tempNumver2,0,y$_*this._tempNumver3,y$Z,y$X,y$u,y$P,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==y$e-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(y$_*this._tempNumver2,0,y$_*this._tempNumver3,y$Z,y$X,y$u,y$P,this._tempUint0+(this._tempInt0+y$e)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==y$e-1?this.addIndexes(this._tempUint1+y$e+2):this.addIndexes(this._tempUint1+this._tempInt0+y$e+1),this.addIndexes(this._tempUint1+this._tempInt0+y$e),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},y$c.boundingBoxLine=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(y$_,y$X,y$u,y$P,y$O,y$s,y$n),this.addVertex(y$Z,y$X,y$u,y$P,y$O,y$s,y$n),this.addVertex(y$_,y$c,y$u,y$P,y$O,y$s,y$n),this.addVertex(y$Z,y$c,y$u,y$P,y$O,y$s,y$n),this.addVertex(y$Z,y$X,y$e,y$P,y$O,y$s,y$n),this.addVertex(y$_,y$X,y$e,y$P,y$O,y$s,y$n),this.addVertex(y$Z,y$c,y$e,y$P,y$O,y$s,y$n),this.addVertex(y$_,y$c,y$e,y$P,y$O,y$s,y$n),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},y$c.addVertex=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=y$_,this._vbData[this._posInVBData+1]=y$c,this._vbData[this._posInVBData+2]=y$e,this._vbData[this._posInVBData+3]=y$Z,this._vbData[this._posInVBData+4]=y$X,this._vbData[this._posInVBData+5]=y$u,this._vbData[this._posInVBData+6]=y$P,this._posInVBData+=this._floatSizePerVer,this},y$c.addVertexIndex=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){return this._hasBegun||this.addVertexIndexException(),this._vbData[y$O]=y$_,this._vbData[y$O+1]=y$c,this._vbData[y$O+2]=y$e,this._vbData[y$O+3]=y$Z,this._vbData[y$O+4]=y$X,this._vbData[y$O+5]=y$u,this._vbData[y$O+6]=y$P,(y$O+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=y$O),this},y$c.addIndexes=function(y$_){var y$c=arguments;this._hasBegun||this.addVertexIndexException();for(var y$e=0;y$e<y$c.length;y$e++)this._ibData[this._posInIBData]=y$c[y$e],this._posInIBData++;return this},y$c.begin=function(y$_,y$c){return this._hasBegun&&this.beginException0(),1!==y$_&&4!==y$_&&this.beginException1(),this._primitiveType=y$_,this._camera=y$c,this._hasBegun=!0,this},y$c.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},y$c.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(y$_._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),y$f.drawCall++,y$y.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},y$c.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},y$c.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},y$c.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},y$c.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},y$c.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},y$c.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(28,[new y$P_(0,"vector3",0),new y$P_(12,"vector4",1)])}]),y$_}()),y$V=function(){function y$_(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++y$_._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new y$Bc}y$D(y$_,"laya.d3.core.render.RenderElement");var y$c=y$_.prototype;return y$c.getDynamicBatchBakedVertexs=function(y$_){for(var y$c=this._renderObj._getVertexBuffer(y$_),y$e=y$c.getData().slice(),y$Z=y$c.vertexDeclaration,y$X=y$Z.getVertexElementByUsage(0).offset/4,y$u=y$Z.getVertexElementByUsage(3).offset/4,y$P=this._sprite3D.transform,y$O=y$P.worldMatrix,y$s=y$P.rotation,y$n=y$Z.vertexStride/4,y$m=0,y$H=y$e.length;y$m<y$H;y$m+=y$n){var y$B=y$m+y$X,y$D=y$m+y$u;y$ac.transformVector3ArrayToVector3ArrayCoordinate(y$e,y$B,y$O,y$e,y$B),y$ac.transformVector3ArrayByQuat(y$e,y$D,y$s,y$e,y$D)}return y$e},y$c.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},y$c._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},y$U(0,y$c,"id",function(){return this._id}),y$U(0,y$c,"renderObj",function(){return this._renderObj},function(y$_){this._renderObj!==y$_&&(this._renderObj=y$_)}),y$_._uniqueIDCounter=0,y$_}(),y$g=function(){function y$c(y$_){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++y$c._uniqueIDCounter,this._needSort=!1,this._scene=y$_,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}y$D(y$c,"laya.d3.core.render.RenderQueue");var y$_=y$c.prototype;return y$_._sortOpaqueFunc=function(y$_,y$c){if(y$_._render&&y$c._render){var y$e=y$_._material.renderQueue-y$c._material.renderQueue;return 0==y$e?y$_._render._distanceForSort-y$c._render._distanceForSort:y$e}return 0},y$_._sortAlphaFunc=function(y$_,y$c){if(y$_._render&&y$c._render){var y$e=y$_._material.renderQueue-y$c._material.renderQueue;return 0==y$e?y$c._render._distanceForSort-y$_._render._distanceForSort:y$e}return 0},y$_._begainRenderElement=function(y$_,y$c,y$e){return!!y$c._beforeRender(y$_)},y$_._sortAlpha=function(y$_){y$c._cameraPosition=y$_,this._finalElements.sort(this._sortAlphaFunc)},y$_._sortOpaque=function(y$_){y$c._cameraPosition=y$_,this._finalElements.sort(this._sortOpaqueFunc)},y$_._preRender=function(y$_){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},y$_._render=function(y$_,y$c){for(var y$e,y$Z,y$X,y$u,y$P,y$O,y$s=y$f.loopCount,y$n=this._scene,y$m=y$_.camera,y$H=(y$m.id,!1),y$B=0,y$D=this._finalElements.length;y$B<y$D;y$B++){var y$U,y$k,y$a,y$G=this._finalElements[y$B];if(null!=y$G._onPreRenderFunction&&y$G._onPreRenderFunction.call(y$G._sprite3D,y$_),0===y$G._type){if(y$_.owner=y$a=y$G._sprite3D,y$_.renderElement=y$G,y$a._preRenderUpdateComponents(y$_),y$U=y$G.renderObj,y$k=y$G._material,this._begainRenderElement(y$_,y$U,y$k)){if(y$e=y$U._getVertexBuffers(),!(y$X=(y$Z=y$U._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[y$Z.id]){this._errorRecord[y$Z.id]=1;var y$w="vertexBuffer:"+("("+y$Z._destroyed+","+y$Z._released+","+y$Z._referenceCount+","+y$Z._buffer+")")+", material:"+(y$k?y$k.__className+"("+y$k._destroyed+","+y$k._released+")":"null")+", owner:"+(y$a?y$a.__className+"("+y$a._destroyed+","+y$a._activeInHierarchy+","+y$a._displayedInStage+")":"null")+", renderObj:"+(y$U?y$U.__className+"("+y$U._destroyed+","+y$U._released+","+y$U._referenceCount+")":"")+", parent:, url:"+(y$a?y$a.url:"")+", disposeStack:"+y$Z.disposeStack;y$q.recordError("报错：unknown vertexDeclaration  "+y$w)}continue}if(y$H=(y$u=y$_._shader=y$k._getShader(y$n._shaderDefineValue,y$X.shaderDefineValue,y$a._shaderDefineValue)).bind()||y$s!==y$u._uploadLoopCount,y$e){if(y$u._uploadVertexBuffer!==y$e||y$H){for(var y$z=0;y$z<y$e.length;y$z++){var y$L=y$e[y$z];y$u.uploadAttributesX(y$L.vertexDeclaration.shaderValues.data,y$L)}y$u._uploadVertexBuffer=y$e}}else(y$u._uploadVertexBuffer!==y$Z||y$H)&&(y$u.uploadAttributes(y$X.shaderValues.data,null),y$u._uploadVertexBuffer=y$Z);(y$u._uploadScene!==y$n||y$H)&&(y$u.uploadSceneUniforms(y$n._shaderValues.data),y$u._uploadScene=y$n),(y$m!==y$u._uploadCamera||y$u._uploadSprite3D!==y$a||y$H)&&(y$u.uploadSpriteUniforms(y$a._shaderValues.data),y$u._uploadSprite3D=y$a),(y$m!==y$u._uploadCamera||y$H)&&(y$u.uploadCameraUniforms(y$m._shaderValues.data),y$u._uploadCamera=y$m),(y$u._uploadMaterial!==y$k||y$H)&&(y$k._upload(),y$u._uploadMaterial=y$k),y$P!==y$k?(y$k._setRenderStateBlendDepth(),y$k._setRenderStateFrontFace(y$c,y$a.transform),y$P=y$k,y$O=y$a):y$O!==y$a&&(y$k._setRenderStateFrontFace(y$c,y$a.transform),y$O=y$a),y$U._render(y$_),y$u._uploadLoopCount=y$s}y$a._postRenderUpdateComponents(y$_)}else if(2===y$G._type){y$G.renderObj;y$_.owner=y$a=y$G._sprite3D,y$_.renderElement=y$G,y$_._batchIndexStart=y$G._tempBatchIndexStart,y$_._batchIndexEnd=y$G._tempBatchIndexEnd,y$U=y$G.renderObj,y$k=y$G._material,this._begainRenderElement(y$_,y$U,y$k)&&(y$X=(y$Z=y$U._getVertexBuffer(0)).vertexDeclaration,y$H=(y$u=y$_._shader=y$k._getShader(y$n._shaderDefineValue,y$X.shaderDefineValue,y$a._shaderDefineValue)).bind()||y$s!==y$u._uploadLoopCount,(y$u._uploadVertexBuffer!==y$Z||y$H)&&(y$u.uploadAttributes(y$X.shaderValues.data,null),y$u._uploadVertexBuffer=y$Z),(y$u._uploadScene!==y$n||y$H)&&(y$u.uploadSceneUniforms(y$n._shaderValues.data),y$u._uploadScene=y$n),(y$m!==y$u._uploadCamera||y$u._uploadSprite3D!==y$a||y$H)&&(y$u.uploadSpriteUniforms(y$a._shaderValues.data),y$u._uploadSprite3D=y$a),(y$m!==y$u._uploadCamera||y$H)&&(y$u.uploadCameraUniforms(y$m._shaderValues.data),y$u._uploadCamera=y$m),(y$u._uploadMaterial!==y$k||y$H)&&(y$k._upload(),y$u._uploadMaterial=y$k),y$P!==y$k?(y$k._setRenderStateBlendDepth(),y$k._setRenderStateFrontFace(y$c,y$a.transform),y$P=y$k,y$O=y$a):y$O!==y$a&&(y$k._setRenderStateFrontFace(y$c,y$a.transform),y$O=y$a),y$U._render(y$_),y$u._uploadLoopCount=y$s)}}},y$_._renderShadow=function(y$_,y$c){for(var y$e,y$Z,y$X,y$u,y$P,y$O=y$f.loopCount,y$s=this._scene,y$n=y$_.camera,y$m=!1,y$H=0,y$B=this._finalElements.length;y$H<y$B;y$H++){var y$D,y$U,y$k,y$a=this._finalElements[y$H];0===y$a._type&&(y$_.owner=y$k=y$a._sprite3D,y$c||y$k._projectionViewWorldUpdateCamera===y$n&&y$k._projectionViewWorldUpdateLoopCount===y$f.loopCount||(y$k._render._renderUpdate(y$_._projectionViewMatrix),y$k._projectionViewWorldUpdateLoopCount=y$f.loopCount,y$k._projectionViewWorldUpdateCamera=y$n),y$_.renderElement=y$a,y$k._preRenderUpdateComponents(y$_),y$D=y$a.renderObj,y$U=y$a._material,this._begainRenderElement(y$_,y$D,null)&&(y$Z=(y$e=y$D._getVertexBuffer(0)).vertexDeclaration,y$m=(y$X=y$_._shader=y$U._getShader(y$s._shaderDefineValue,y$Z.shaderDefineValue,y$k._shaderDefineValue)).bind()||y$O!==y$X._uploadLoopCount,(y$X._uploadVertexBuffer!==y$e||y$m)&&(y$X.uploadAttributes(y$Z.shaderValues.data,null),y$X._uploadVertexBuffer=y$e),(y$n!==y$X._uploadCamera||y$X._uploadSprite3D!==y$k||y$m)&&(y$X.uploadSpriteUniforms(y$k._shaderValues.data),y$X._uploadSprite3D=y$k),(y$n!==y$X._uploadCamera||y$m)&&(y$X.uploadCameraUniforms(y$n._shaderValues.data),y$X._uploadCamera=y$n),(y$X._uploadMaterial!==y$U||y$m)&&(y$U._upload(),y$X._uploadMaterial=y$U),y$X._uploadRenderElement,y$u!==y$U?(y$U._setRenderStateFrontFace(!1,y$k.transform),y$u=y$U,y$P=y$k):y$P!==y$k&&(y$U._setRenderStateFrontFace(!1,y$k.transform),y$P=y$k),y$D._render(y$_),y$X._uploadLoopCount=y$O),y$k._postRenderUpdateComponents(y$_))}},y$_._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},y$_._addRenderElement=function(y$_){this._renderElements.push(y$_),this._needSort=!0},y$_._addDynamicBatchElement=function(y$_){this._dynamicBatchCombineRenderElements.push(y$_)},y$U(0,y$_,"id",function(){return this._id}),y$c._uniqueIDCounter=0,y$c._cameraPosition=null,y$c}(),y$S=function(){function y$_(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return y$D(y$_,"laya.d3.core.render.RenderState"),y$_.clientWidth=0,y$_.clientHeight=0,y$_}(),y$E=function(){function y$P(y$_,y$c){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new y$l_(new y$Pc,0),this._corners=[new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc],this._boundingBoxCenter=new y$Pc,this._children=y$Z(8),this._objects=[],this._tempBoundBoxCorners=[new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc],this._scene=y$_,this._currentDepth=y$c}y$D(y$P,"laya.d3.core.scene.OctreeNode");var y$_=y$P.prototype;return y$q.imps(y$_,{"laya.d3.core.scene.ITreeNode":!0}),y$_.init=function(y$_,y$c){var y$e=new y$Pc,y$Z=new y$Pc;y$Pc.scale(y$c,-.5,y$e),y$Pc.scale(y$c,.5,y$Z),y$Pc.add(y$e,y$_,y$e),y$Pc.add(y$Z,y$_,y$Z),this.exactBox=new y$E_(y$e,y$Z),this.relaxBox=new y$E_(y$e,y$Z)},y$_.addTreeNode=function(y$_){1===Collision.boxContainsBox(this._relaxBox,y$_.boundingBox)?this.addNodeDown(y$_,0):this.addObject(y$_)},y$_.addChild=function(y$_){var y$c=this._children[y$_];if(null==y$c){y$c=new y$P(this._scene,this._currentDepth+1),(this._children[y$_]=y$c)._parent=this,y$Pc.subtract(this._exactBox.max,this._exactBox.min,y$P.tempSize),y$Pc.multiply(y$P.tempSize,y$P._octreeSplit[y$_],y$P.tempCenter),y$Pc.add(this._exactBox.min,y$P.tempCenter,y$P.tempCenter),y$Pc.scale(y$P.tempSize,.25,y$P.tempSize);var y$e=new y$Pc,y$Z=new y$Pc;y$Pc.subtract(y$P.tempCenter,y$P.tempSize,y$e),y$Pc.add(y$P.tempCenter,y$P.tempSize,y$Z),y$c.exactBox=new y$E_(y$e,y$Z),y$Pc.scale(y$P.tempSize,y$P.relax,y$P.tempSize);var y$X=new y$Pc,y$u=new y$Pc;y$Pc.subtract(y$P.tempCenter,y$P.tempSize,y$X),y$Pc.add(y$P.tempCenter,y$P.tempSize,y$u),y$c.relaxBox=new y$E_(y$X,y$u)}return y$c},y$_.addObject=function(y$_){(y$_._treeNode=this)._objects.push(y$_)},y$_.removeObject=function(y$_){if(y$_._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var y$c=this._objects.indexOf(y$_);return-1!==y$c&&(this._objects.splice(y$c,1),!0)},y$_.clearObject=function(){this._objects.length=0},y$_.addNodeUp=function(y$_,y$c){this._parent&&1!==Collision.boxContainsBox(this._exactBox,y$_.boundingBox)?this._parent.addNodeUp(y$_,y$c-1):this.addNodeDown(y$_,y$c)},y$_.addNodeDown=function(y$_,y$c){if(y$c<this._scene.treeLevel){var y$e=this.inChildIndex(y$_.boundingBoxCenter),y$Z=this.addChild(y$e);1===Collision.boxContainsBox(y$Z._relaxBox,y$_.boundingBox)?y$Z.addNodeDown(y$_,++y$c):this.addObject(y$_)}else this.addObject(y$_)},y$_.inChildIndex=function(y$_){return 4*(y$_.z<this._boundingBoxCenter.z?0:1)+2*(y$_.y<this._boundingBoxCenter.y?0:1)+(y$_.x<this._boundingBoxCenter.x?0:1)},y$_.updateObject=function(y$_){1===Collision.boxContainsBox(this._relaxBox,y$_.boundingBox)?(this.removeObject(y$_),y$_._treeNode=null,this.addNodeDown(y$_,this._currentDepth)):this._parent&&(this.removeObject(y$_),y$_._treeNode=null,this._parent.addNodeUp(y$_,this._currentDepth-1))},y$_.cullingObjects=function(y$_,y$c,y$e,y$Z,y$X){var y$u,y$P=0,y$O=0,y$s=0,y$n=this._scene._dynamicBatchManager;for(y$P=0,y$u=this._objects.length;y$P<y$u;y$P++){var y$m=this._objects[y$P];if(y$h.isVisible(y$m._owner.layer.mask)&&y$m.enable){if(y$c&&(y$f.treeSpriteCollision+=1,0===y$_.containsBoundSphere(y$m.boundingSphere)))continue;y$m._renderUpdate(y$X),y$m._distanceForSort=y$Pc.distance(y$m.boundingSphere.center,y$Z)+y$m.sortingFudge;var y$H=y$m._renderElements;for(y$O=0,y$s=y$H.length;y$O<y$s;y$O++){var y$B=y$H[y$O],y$D=y$B._staticBatch;if(y$D&&y$D._material===y$B._material)y$D._addBatchRenderElement(y$B);else{var y$U=y$B.renderObj;y$U.triangleCount<10&&1===y$U._vertexBufferCount&&y$U._getIndexBuffer()&&y$B._material.renderQueue<2&&y$B._canDynamicBatch&&!y$m._owner.isStatic?y$n._addPrepareRenderElement(y$B):this._scene.getRenderQueue(y$B._material.renderQueue)._addRenderElement(y$B)}}}}for(y$P=0;y$P<8;y$P++){var y$k=this._children[y$P];if(null!=y$k){var y$a=y$c;if(y$c){var y$G=y$_.containsBoundBox(y$k._relaxBox);if(y$f.treeNodeCollision+=1,0===y$G)continue;y$a=2===y$G}y$k.cullingObjects(y$_,y$a,y$e,y$Z,y$X)}}},y$_.cullingShadowObjects=function(y$_,y$c,y$e,y$Z,y$X){var y$u,y$P=0,y$O=0,y$s=0;this._scene._dynamicBatchManager;for(y$P=0,y$u=this._objects.length;y$P<y$u;y$P++){var y$n=this._objects[y$P];if(y$n.castShadow&&y$h.isVisible(y$n._owner.layer.mask)&&y$n.enable){if(y$e&&0===y$_[0].containsBoundSphere(y$n.boundingSphere))continue;for(var y$m=1,y$H=y$_.length;y$m<y$H;y$m++){var y$B=y$c[y$m-1];if(0!==y$_[y$m].containsBoundSphere(y$n.boundingSphere)){var y$D=y$n._renderElements;for(y$O=0,y$s=y$D.length;y$O<y$s;y$O++)y$B._addRenderElement(y$D[y$O])}}}}for(y$P=0;y$P<8;y$P++){var y$U=this._children[y$P];if(null!=y$U){var y$k=y$e;if(y$e){var y$a=y$_[0].containsBoundBox(y$U._relaxBox);if(0===y$a)continue;y$k=2===y$a}y$U.cullingShadowObjects(y$_,y$c,y$k,y$Z,y$X)}}},y$_.cullingShadowObjectsOnePSSM=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P,y$O=y$c[0],y$s=0,y$n=0,y$m=0;for(y$s=0,y$P=this._objects.length;y$s<y$P;y$s++){var y$H=this._objects[y$s];if(y$H.castShadow&&y$h.isVisible(y$H._owner.layer.mask)&&y$H.enable){if(y$Z&&0===y$_.containsBoundSphere(y$H.boundingSphere))continue;y$H._renderUpdate(y$e);var y$B=y$H._renderElements;for(y$n=0,y$m=y$B.length;y$n<y$m;y$n++)y$O._addRenderElement(y$B[y$n])}}for(y$s=0;y$s<8;y$s++){var y$D=this._children[y$s];if(null!=y$D){var y$U=y$Z;if(y$Z){var y$k=y$_.containsBoundBox(y$D._relaxBox);if(0===y$k)continue;y$U=2===y$k}y$D.cullingShadowObjectsOnePSSM(y$_,y$c,y$e,y$U,y$X,y$u)}}},y$_.renderBoudingBox=function(y$_){this._renderBoudingBox(y$_);for(var y$c=0;y$c<8;++y$c){var y$e=this._children[y$c];y$e&&y$e.renderBoudingBox(y$_)}},y$_.buildAllChild=function(y$_){if(y$_<this._scene.treeLevel)for(var y$c=0;y$c<8;y$c++){this.addChild(y$c).buildAllChild(y$_+1)}},y$_._renderBoudingBox=function(y$_){},y$U(0,y$_,"exactBox",function(){return this._exactBox},function(y$_){this._exactBox=y$_,y$Pc.add(y$_.min,y$_.max,this._boundingBoxCenter),y$Pc.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),y$U(0,y$_,"relaxBox",function(){return this._relaxBox},function(y$_){(this._relaxBox=y$_).getCorners(this._corners),y$l_.createfromPoints(this._corners,this._boundingSphere)}),y$P.debugMode=!1,y$P.relax=1.15,y$P.CHILDNUM=8,y$H(y$P,["tempVector0",function(){return this.tempVector0=new y$Pc},"tempSize",function(){return this.tempSize=new y$Pc},"tempCenter",function(){return this.tempCenter=new y$Pc},"_octreeSplit",function(){return this._octreeSplit=[new y$Pc(.25,.25,.25),new y$Pc(.75,.25,.25),new y$Pc(.25,.75,.25),new y$Pc(.75,.75,.25),new y$Pc(.25,.25,.75),new y$Pc(.75,.25,.75),new y$Pc(.25,.75,.75),new y$Pc(.75,.75,.75)]}]),y$P}(),y$W=(function(){function y$_(){}y$D(y$_,"laya.d3.core.scene.SceneManager")}(),function(){function y$_(y$_,y$c,y$e,y$Z){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===y$_&&(y$_=1),void 0===y$c&&(y$c=1),void 0===y$e&&(y$e=1),void 0===y$Z&&(y$Z=1),this._r=y$_,this._g=y$c,this._b=y$e,this._a=y$Z}return y$D(y$_,"laya.d3.core.trail.module.Color",null,"Color$1"),y$_.prototype.cloneTo=function(y$_){y$_._r=this._r,y$_._g=this._g,y$_._b=this._b,y$_._a=this._a},y$H(y$_,["RED",function(){return this.RED=new y$_(1,0,0,1)},"GREEN",function(){return this.GREEN=new y$_(0,1,0,1)},"BLUE",function(){return this.BLUE=new y$_(0,0,1,1)},"CYAN",function(){return this.CYAN=new y$_(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new y$_(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new y$_(1,0,1,1)},"GRAY",function(){return this.GRAY=new y$_(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new y$_(1,1,1,1)},"BLACK",function(){return this.BLACK=new y$_(0,0,0,1)}]),y$_}()),y$l=(function(){function y$_(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}y$D(y$_,"laya.d3.core.trail.module.Gradient");var y$c=y$_.prototype;y$c.setKeys=function(y$_,y$c){var y$e,y$Z;this._colorKeys=y$_;for(var y$X=this.index=0;y$X<y$_.length;y$X++){var y$u=(y$e=y$_[y$X]).color;this._colorKeyData[this.index++]=y$u._r,this._colorKeyData[this.index++]=y$u._g,this._colorKeyData[this.index++]=y$u._b,this._colorKeyData[this.index++]=y$e.time}this._alphaKeys=y$c;for(var y$P=this.index=0;y$P<y$c.length;y$P++)y$Z=y$c[y$P],this._alphaKeyData[this.index++]=y$Z.alpha,this._alphaKeyData[this.index++]=y$Z.time},y$c.cloneTo=function(y$_){var y$c=0,y$e=0,y$Z=this.colorKeys,y$X=[];for(y$c=0,y$e=y$Z.length;y$c<y$e;y$c++){var y$u=new y$d;y$Z[y$c].cloneTo(y$u),y$X.push(y$u)}var y$P=this.alphaKeys,y$O=[];for(y$c=0,y$e=y$P.length;y$c<y$e;y$c++){var y$s=new y$l;y$P[y$c].cloneTo(y$s),y$O.push(y$s)}y$_.setKeys(y$X,y$O)},y$U(0,y$c,"mode",function(){return this._mode},function(y$_){this._mode=y$_}),y$U(0,y$c,"colorKeys",function(){return this._colorKeys},function(y$_){this._colorKeys=y$_;for(var y$c=this.index=0;y$c<y$_.length;y$c++){var y$e=y$_[y$c],y$Z=y$e.color;this._colorKeyData[this.index++]=y$Z._r,this._colorKeyData[this.index++]=y$Z._g,this._colorKeyData[this.index++]=y$Z._b,this._colorKeyData[this.index++]=y$e.time}}),y$U(0,y$c,"alphaKeys",function(){return this._alphaKeys},function(y$_){this._alphaKeys=y$_;for(var y$c=this.index=0;y$c<y$_.length;y$c++){var y$e=y$_[y$c];this._alphaKeyData[this.index++]=y$e.alpha,this._alphaKeyData[this.index++]=y$e.time}})}(),function(){function y$_(y$_,y$c){this._alpha=NaN,this._time=NaN,void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),this._alpha=y$_,this._time=y$c}y$D(y$_,"laya.d3.core.trail.module.GradientAlphaKey");var y$c=y$_.prototype;return y$c.cloneTo=function(y$_){y$_.alpha=this.alpha,y$_.time=this.time},y$U(0,y$c,"alpha",function(){return this._alpha},function(y$_){this._alpha=y$_}),y$U(0,y$c,"time",function(){return this._time},function(y$_){this._time=y$_}),y$_}()),y$d=function(){function y$_(y$_,y$c){this._color=null,this._time=NaN,void 0===y$c&&(y$c=0),this._color=y$_||new y$W,this._time=y$c}y$D(y$_,"laya.d3.core.trail.module.GradientColorKey");var y$c=y$_.prototype;return y$c.cloneTo=function(y$_){this.color.cloneTo(y$_.color),y$_.time=this.time},y$U(0,y$c,"color",function(){return this._color},function(y$_){this._color=y$_}),y$U(0,y$c,"time",function(){return this._time},function(y$_){this._time=y$_}),y$_}(),y$I=(function(){function y$_(){}y$D(y$_,"laya.d3.core.trail.module.GradientMode"),y$_.Blend=0,y$_.Fixed=1}(),function(){function y$_(){}y$D(y$_,"laya.d3.core.trail.module.TextureMode"),y$_.Stretch=0,y$_.Tile=1}(),function(){function y$_(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}y$D(y$_,"laya.d3.core.trail.module.TrailKeyFrame"),y$_.prototype.cloneTo=function(y$_){y$_.time=this.time,y$_.inTangent=this.inTangent,y$_.outTangent=this.outTangent,y$_.value=this.value}}(),function(){function y$c(y$_){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new y$Pc,this._curPosition=new y$Pc,this._delVector3=new y$Pc,this._lastFixedVertexPosition=new y$Pc,this._pointAtoBVector3=new y$Pc,this._pointA=new y$Pc,this._pointB=new y$Pc,this._owner=y$_,this._id=y$c.renderElementCount++,0==this._id?y$_._owner.transform.position.cloneTo(this._lastPosition):y$_._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new y$pc(y$I.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new y$pc(y$I.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}y$D(y$c,"laya.d3.core.trail.TrailRenderElement");var y$_=y$c.prototype;y$q.imps(y$_,{"laya.d3.core.render.IRenderable":!0}),y$_._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},y$_._addTrailByFirstPosition=function(y$_,y$c){y$Pc.subtract(y$c,y$_,this._delVector3),y$Pc.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),y$Pc.normalize(this._pointAtoBVector3,this._pointAtoBVector3),y$Pc.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(y$_),y$_.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},y$_._addTrailByNextPosition=function(y$_){y$Pc.subtract(y$_,this._lastFixedVertexPosition,this._delVector3),y$Pc.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),y$Pc.normalize(this._pointAtoBVector3,this._pointAtoBVector3),y$Pc.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=y$Pc.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=y$d_.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(y$_),y$_.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(y$_),this._virtualVerticesCount=2)},y$_._updateVerticesByPosition=function(y$_){this._pointe=y$_.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},y$_._updateVertexBuffer2=function(){var y$_,y$c=0,y$e=0,y$Z=0;for(y$Z=0,y$_=(this._verticesCount+this._virtualVerticesCount)/2;y$Z<y$_;y$Z++)y$e=0==this._owner.textureMode?(this._VerticesToTailLength[y$Z]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[y$Z],this._vertices2[y$c++]=1-y$e,this._vertices2[y$c++]=1-y$e;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},y$_._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},y$_._updateDisappear=function(){var y$_,y$c=0;for(y$c=this._curDisappearIndex,y$_=(this._verticesCount+this._virtualVerticesCount)/2;y$c<y$_;y$c++)this._owner._curtime-this._everyGroupVertexBirthTime[y$c]>=this._owner.time+y$d_.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},y$_._beforeRender=function(y$_){return this._camera=y$_.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),y$Pc.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},y$_._render=function(y$_){this._isDead||(y$y.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),y$f.drawCall++,y$f.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},y$_._getVertexBuffer=function(y$_){return void 0===y$_&&(y$_=0),0===y$_?this._vertexBuffer1:1===y$_?this._vertexBuffer2:null},y$_._getVertexBuffers=function(){return this._vertexBuffers},y$_._getIndexBuffer=function(){return null},y$_.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},y$_._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},y$U(0,y$_,"_vertexBufferCount",function(){return this._vertexBuffers.length}),y$U(0,y$_,"triangleCount",function(){return 0}),y$c.renderElementCount=0}(),function(){function y$_(){}y$D(y$_,"laya.d3.core.trail.VertexTrail");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration1}),y$U(1,y$_,"vertexDeclaration1",function(){return y$_._vertexDeclaration1}),y$U(1,y$_,"vertexDeclaration2",function(){return y$_._vertexDeclaration2}),y$H(y$_,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new y$u_(32,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",41),new y$P_(24,"single",33),new y$P_(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new y$u_(4,[new y$P_(0,"single",38)])}]),y$_}()),y$__=function(){function y$L(y$_){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=y$_}y$D(y$L,"laya.d3.graphics.DynamicBatch");var y$_=y$L.prototype;return y$q.imps(y$_,{"laya.d3.core.render.IRenderable":!0}),y$_._getVertexBuffer=function(y$_){return void 0===y$_&&(y$_=0),0===y$_?this._vertexBuffer:null},y$_._getIndexBuffer=function(){return this._indexBuffer},y$_._getCombineRenderElementFromPool=function(y$_,y$c,y$e){var y$Z=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return y$Z||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=y$Z=new y$V,y$Z._sprite3D=new y$gc),y$Z._sprite3D._render._renderUpdate(y$e),y$Z},y$_._getRenderElement=function(y$_,y$c,y$e){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*y$L.maxVertexCount),this._indexDatas=new Uint16Array(y$L.maxIndexCount),this._vertexBuffer=y$pc.create(this._vertexDeclaration,y$L.maxVertexCount,35048),this._indexBuffer=y$Yc.create("ushort",y$L.maxIndexCount,35048));for(var y$Z=this._merageElements.length=0,y$X=0,y$u=0,y$P=this._combineRenderElements.length;y$u<y$P;y$u++){var y$O=this._combineRenderElements[y$u],y$s=y$O.getDynamicBatchBakedVertexs(0),y$n=y$O.getBakedIndices(),y$m=y$O._sprite3D.transform._isFrontFaceInvert,y$H=y$Z/(this._vertexDeclaration.vertexStride/4),y$B=y$X,y$D=y$B+y$n.length;y$O._tempBatchIndexStart=y$B,y$O._tempBatchIndexEnd=y$D,this._indexDatas.set(y$n,y$X);var y$U=0;if(y$m)for(y$U=y$B;y$U<y$D;y$U+=3){this._indexDatas[y$U]=y$H+this._indexDatas[y$U];var y$k=this._indexDatas[y$U+1],y$a=this._indexDatas[y$U+2];this._indexDatas[y$U+1]=y$H+y$a,this._indexDatas[y$U+2]=y$H+y$k}else for(y$U=y$B;y$U<y$D;y$U+=3)this._indexDatas[y$U]=y$H+this._indexDatas[y$U],this._indexDatas[y$U+1]=y$H+this._indexDatas[y$U+1],this._indexDatas[y$U+2]=y$H+this._indexDatas[y$U+2];y$X+=y$n.length,this._vertexDatas.set(y$s,y$Z),y$Z+=y$s.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),y$u=this._combineRenderElementPoolIndex=0,y$P=this._materials.length;y$u<y$P;y$u++){var y$G=this._getCombineRenderElementFromPool(y$_,y$c,y$e);y$G._type=2,y$G._staticBatch=null;var y$w=(y$G.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[y$u]]._tempBatchIndexStart,y$z=y$u+1===this._materialToRenderElementsOffsets.length?y$X:this._combineRenderElements[this._materialToRenderElementsOffsets[y$u+1]]._tempBatchIndexStart;y$G._tempBatchIndexStart=y$w,y$G._tempBatchIndexEnd=y$z,y$G._material=this._materials[y$u],this._merageElements.push(y$G)}},y$_._addCombineRenderObjTest=function(y$_){var y$c=y$_.renderObj,y$e=this._currentCombineIndexCount+y$c._getIndexBuffer().indexCount,y$Z=this._currentCombineVertexCount+y$c._getVertexBuffer().vertexCount;return!(y$L.maxVertexCount<y$Z||y$L.maxIndexCount<y$e)},y$_._addCombineRenderObj=function(y$_){var y$c=y$_.renderObj;this._combineRenderElements.push(y$_),this._currentCombineIndexCount=this._currentCombineIndexCount+y$c._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+y$c._getVertexBuffer().vertexCount},y$_._addCombineMaterial=function(y$_){this._materials.push(y$_)},y$_._addMaterialToRenderElementOffset=function(y$_){this._materialToRenderElementsOffsets.push(y$_)},y$_._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},y$_._addToRenderQueue=function(y$_,y$c,y$e,y$Z){this._getRenderElement(y$c,y$e,y$Z);for(var y$X=0,y$u=this._materials.length;y$X<y$u;y$X++)y$_.getRenderQueue(this._materials[y$X].renderQueue)._addDynamicBatchElement(this._merageElements[y$X])},y$_._beforeRender=function(y$_){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},y$_._render=function(y$_){var y$c=y$_._batchIndexEnd-y$_._batchIndexStart;y$y.mainContext.drawElements(4,y$c,5123,2*y$_._batchIndexStart),y$f.drawCall++,y$f.trianglesFaces+=y$c/3},y$_._getVertexBuffers=function(){return null},y$U(0,y$_,"_vertexBufferCount",function(){return 1}),y$U(0,y$_,"triangleCount",function(){return this._indexBuffer.indexCount/3}),y$U(0,y$_,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),y$L.maxVertexCount=2e4,y$L.maxIndexCount=4e4,y$L.maxCombineTriangleCount=10,y$L}(),y$c_=function(){function y$L(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}y$D(y$L,"laya.d3.graphics.DynamicBatchManager");var y$_=y$L.prototype;return y$_.getDynamicBatch=function(y$_,y$c){var y$e,y$Z=y$_.id.toString()+y$c;return this._dynamicBatches[y$Z]?y$e=this._dynamicBatches[y$Z]:this._dynamicBatches[y$Z]=y$e=new y$__(y$_),y$e},y$_._garbageCollection=function(){for(var y$_ in this._dynamicBatches)0===this._dynamicBatches[y$_].combineRenderElementsCount&&delete this._dynamicBatches[y$_]},y$_._addPrepareRenderElement=function(y$_){this._prepareDynamicBatchCombineElements.push(y$_)},y$_._finishCombineDynamicBatch=function(y$_){var y$c,y$e,y$Z;this._prepareDynamicBatchCombineElements.sort(y$L._sortPrepareDynamicBatch);for(var y$X,y$u,y$P,y$O,y$s,y$n=-1,y$m=!0,y$H=0,y$B=-1,y$D=0,y$U=this._prepareDynamicBatchCombineElements.length;y$D<y$U;y$D++){var y$k=(y$u=this._prepareDynamicBatchCombineElements[y$D]).renderObj._getVertexBuffer(0).vertexDeclaration,y$a=y$e!==y$k;y$a&&(y$H=0,y$e=y$k);var y$G=y$H!==y$n;if(y$G&&(y$n=y$H),(y$a||y$G)&&(y$P=this.getDynamicBatch(y$k,y$H),y$c=null),y$m)if(y$P._addCombineRenderObjTest(y$u)){if(y$c!==(y$X=y$u._material))y$O&&(y$_.getRenderQueue(y$s._material.renderQueue)._addRenderElement(y$s),y$s=y$O=null,y$B=-1),y$O=y$X,y$B=y$P.combineRenderElementsCount,y$s=y$u,y$c=y$X;else if(y$O){var y$w=y$s.renderObj,y$z=y$u.renderObj;y$w._getVertexBuffer().vertexCount+y$z._getVertexBuffer().vertexCount>y$__.maxVertexCount||y$w._getIndexBuffer().indexCount+y$z._getIndexBuffer().indexCount>y$__.maxIndexCount?(y$_.getRenderQueue(y$s._material.renderQueue)._addRenderElement(y$s),y$O=y$X,y$B=y$P.combineRenderElementsCount,y$s=y$u):(y$P._addCombineMaterial(y$O),y$P._addMaterialToRenderElementOffset(y$B),y$P._addCombineRenderObj(y$s),y$s=y$O=null,y$B=-1,y$P._addCombineRenderObj(y$u))}else y$P._addCombineRenderObj(y$u);y$m=!0}else y$O&&(y$_.getRenderQueue(y$s._material.renderQueue)._addRenderElement(y$s),y$s=y$O=null,y$B=-1),y$H++,y$m=!1;else y$Z=this._prepareDynamicBatchCombineElements[y$D-1],y$P._addMaterialToRenderElementOffset(y$P.combineRenderElementsCount),y$c=y$Z._material,y$P._addCombineMaterial(y$c),y$P._addCombineRenderObj(y$Z),y$m=!0,y$c!==(y$X=y$u._material)?(y$O=y$X,y$B=y$P.combineRenderElementsCount,y$s=y$u):y$P._addCombineRenderObj(y$u),y$c=y$X}y$O&&(y$_.getRenderQueue(y$s._material.renderQueue)._addRenderElement(y$s),y$s=y$O=null,y$B=-1),this._prepareDynamicBatchCombineElements.length=0},y$_._clearRenderElements=function(){for(var y$_ in this._dynamicBatches)this._dynamicBatches[y$_]._clearRenderElements()},y$_._addToRenderQueue=function(y$_,y$c,y$e,y$Z){for(var y$X in this._dynamicBatches){var y$u=this._dynamicBatches[y$X];0<y$u.combineRenderElementsCount&&y$u._addToRenderQueue(y$_,y$c,y$e,y$Z)}},y$_.dispose=function(){this._dynamicBatches=null},y$L._sortPrepareDynamicBatch=function(y$_,y$c){return y$_._mainSortID-y$c._mainSortID},y$L}(),y$e_=function(){function y$_(){}return y$D(y$_,"laya.d3.graphics.FrustumCulling"),y$_.renderShadowObjectCulling=function(y$_,y$c,y$e,y$Z,y$X){var y$u=0,y$P=0,y$O=0,y$s=0;for(y$u=0,y$O=y$e.length;y$u<y$O;y$u++){var y$n=y$e[y$u];y$n&&y$n._clearRenderElements()}var y$m,y$H,y$B,y$D=y$_._cullingRenders;if(1<y$X){for(y$u=0,y$O=y$_._cullingRendersLength;y$u<y$O;y$u++)if((y$m=y$D[y$u]).castShadow&&y$h.isVisible(y$m._owner.layer.mask)&&y$m.enable)for(var y$U=1,y$k=y$c.length;y$U<y$k;y$U++)if(y$H=y$e[y$U-1],0!==y$c[y$U].containsBoundSphere(y$m.boundingSphere))for(y$P=0,y$s=(y$B=y$m._renderElements).length;y$P<y$s;y$P++)y$H._addRenderElement(y$B[y$P])}else for(y$u=0,y$O=y$_._cullingRendersLength;y$u<y$O;y$u++)if((y$m=y$D[y$u]).castShadow&&y$h.isVisible(y$m._owner.layer.mask)&&y$m.enable&&0!==y$c[0].containsBoundSphere(y$m.boundingSphere))for(y$m._renderUpdate(y$Z),y$H=y$e[0],y$P=0,y$s=(y$B=y$m._renderElements).length;y$P<y$s;y$P++)y$H._addRenderElement(y$B[y$P])},y$_.renderShadowObjectCullingOctree=function(y$_,y$c,y$e,y$Z,y$X){for(var y$u=0,y$P=y$e.length;y$u<y$P;y$u++){var y$O=y$e[y$u];y$O&&y$O._clearRenderElements()}1<y$X?y$_.treeRoot.cullingShadowObjects(y$c,y$e,!0,0,y$_):y$_.treeRoot.cullingShadowObjectsOnePSSM(y$c[0],y$e,y$Z,!0,0,y$_)},y$_.renderObjectCulling=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=0,y$O=0,y$s=0,y$n=0,y$m=y$c._quenes,y$H=y$c._dynamicBatchManager,y$B=y$c._cullingRenders;for(y$P=0,y$O=y$m.length;y$P<y$O;y$P++){var y$D=y$m[y$P];y$D&&y$D._clearRenderElements()}var y$U=y$Z_._staticBatchManagers;for(y$P=0,y$O=y$U.length;y$P<y$O;y$P++)y$U[y$P]._clearRenderElements();y$H._clearRenderElements();var y$k=y$e.transform.position;for(y$P=0,y$O=y$c._cullingRendersLength;y$P<y$O;y$P++){var y$a=y$B[y$P];if(y$h.isVisible(y$a._owner.layer.mask)&&y$a.enable&&0!==y$_.containsBoundSphere(y$a.boundingSphere)&&y$a._renderUpdate(y$u)){y$a._distanceForSort=y$Pc.distance(y$a.boundingSphere.center,y$k)+y$a.sortingFudge;var y$G=y$a._renderElements;for(y$s=0,y$n=y$G.length;y$s<y$n;y$s++){var y$w=y$G[y$s],y$z=y$w._staticBatch;if(y$z&&y$z._material===y$w._material)y$z._addBatchRenderElement(y$w);else{var y$L=y$w.renderObj;y$L.triangleCount<10&&1===y$L._vertexBufferCount&&y$L._getIndexBuffer()&&y$w._material.renderQueue<2&&y$w._canDynamicBatch&&!y$a._owner.isStatic?y$H._addPrepareRenderElement(y$w):y$c.getRenderQueue(y$w._material.renderQueue)._addRenderElement(y$w)}}}}for(y$P=0,y$O=y$U.length;y$P<y$O;y$P++)y$U[y$P]._addToRenderQueue(y$c,y$Z,y$X,y$u);y$H._finishCombineDynamicBatch(y$c),y$H._addToRenderQueue(y$c,y$Z,y$X,y$u)},y$_.renderObjectCullingOctree=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=0,y$O=0,y$s=y$c._quenes,y$n=y$c._dynamicBatchManager;for(y$P=0,y$O=y$s.length;y$P<y$O;y$P++){var y$m=y$s[y$P];y$m&&y$m._clearRenderElements()}var y$H=y$Z_._staticBatchManagers;for(y$P=0,y$O=y$H.length;y$P<y$O;y$P++)y$H[y$P]._clearRenderElements();for(y$n._clearRenderElements(),y$c._cullingRenders.length=0,y$c.treeRoot.cullingObjects(y$_,!0,0,y$e.transform.position,y$u),y$P=0,y$O=y$H.length;y$P<y$O;y$P++)y$H[y$P]._addToRenderQueue(y$c,y$Z,y$X,y$u);y$n._finishCombineDynamicBatch(y$c),y$n._addToRenderQueue(y$c,y$Z,y$X,y$u)},y$_.renderObjectCullingNoBoundFrustum=function(y$_,y$c,y$e,y$Z,y$X){var y$u=0,y$P=0,y$O=0,y$s=0,y$n=y$_._quenes,y$m=y$_._dynamicBatchManager,y$H=y$_._cullingRenders;for(y$u=0,y$P=y$n.length;y$u<y$P;y$u++){var y$B=y$n[y$u];y$B&&y$B._clearRenderElements()}var y$D=y$Z_._staticBatchManagers;for(y$u=0,y$P=y$D.length;y$u<y$P;y$u++)y$D[y$u]._clearRenderElements();y$m._clearRenderElements();var y$U=y$c.transform.position;for(y$u=0,y$P=y$_._cullingRendersLength;y$u<y$P;y$u++){var y$k=y$H[y$u];if(y$h.isVisible(y$k._owner.layer.mask)&&y$k.enable){y$k._renderUpdate(y$X),y$k._distanceForSort=y$Pc.distance(y$k.boundingSphere.center,y$U)+y$k.sortingFudge;var y$a=y$k._renderElements;for(y$O=0,y$s=y$a.length;y$O<y$s;y$O++){var y$G=y$a[y$O],y$w=y$G._staticBatch;if(y$w&&y$w._material===y$G._material)y$w._addBatchRenderElement(y$G);else{var y$z=y$G.renderObj;y$z.triangleCount<10&&1===y$z._vertexBufferCount&&y$z._getIndexBuffer()&&y$G._material.renderQueue<2&&y$G._canDynamicBatch&&!y$k._owner.isStatic?y$m._addPrepareRenderElement(y$G):y$_.getRenderQueue(y$G._material.renderQueue)._addRenderElement(y$G)}}}}for(y$u=0,y$P=y$D.length;y$u<y$P;y$u++)y$D[y$u]._addToRenderQueue(y$_,y$e,y$Z,y$X);y$m._finishCombineDynamicBatch(y$_),y$m._addToRenderQueue(y$_,y$e,y$Z,y$X)},y$_}(),y$Z_=function(){function y$u(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}y$D(y$u,"laya.d3.graphics.StaticBatchManager");var y$_=y$u.prototype;return y$_._finishInit=function(){for(var y$_ in this._staticBatches)this._staticBatches[y$_]._finishInit();this._initBatchRenderElements.length=0},y$_._initStaticBatchs=function(y$_){throw new Error("StaticBatchManager:must override this function.")},y$_._addInitBatchSprite=function(y$_){for(var y$c=y$_._render._renderElements,y$e=0,y$Z=y$c.length;y$e<y$Z;y$e++)this._initBatchRenderElements.push(y$c[y$e])},y$_._clearRenderElements=function(){for(var y$_ in this._staticBatches)this._staticBatches[y$_]._clearRenderElements()},y$_._garbageCollection=function(y$_){var y$c=y$_._staticBatch,y$e=y$c._initBatchRenderElements,y$Z=y$e.indexOf(y$_);y$e.splice(y$Z,1),0===y$e.length&&(y$c.dispose(),delete this._staticBatches[y$c._key])},y$_._addToRenderQueue=function(y$_,y$c,y$e,y$Z){for(var y$X in this._staticBatches){var y$u=this._staticBatches[y$X];0<y$u._batchRenderElements.length&&y$u._updateToRenderQueue(y$_,y$Z)}},y$_.dispose=function(){this._staticBatches=null},y$u._addToStaticBatchQueue=function(y$_){y$_ instanceof laya.d3.core.RenderableSprite3D&&y$_._addToInitStaticBatchManager();for(var y$c=0,y$e=y$_.numChildren;y$c<y$e;y$c++)y$u._addToStaticBatchQueue(y$_._childs[y$c])},y$u.combine=function(y$_,y$c){var y$e,y$Z=0,y$X=0;if(y$c)for(y$Z=0,y$X=y$c.length;y$Z<y$X;y$Z++){y$c[y$Z]._addToInitStaticBatchManager()}else y$_&&y$u._addToStaticBatchQueue(y$_);for(y$Z=0,y$X=y$u._staticBatchManagers.length;y$Z<y$X;y$Z++)(y$e=y$u._staticBatchManagers[y$Z])._initStaticBatchs(y$_),y$e._finishInit()},y$u._staticBatchManagers=[],y$u}(),y$X_=function(){function y$_(y$_,y$c,y$e){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=y$_,this._manager=y$c,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=y$e}y$D(y$_,"laya.d3.graphics.StaticBatch");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),y$c._binarySearch=function(y$_){for(var y$c=0,y$e=this._batchRenderElements.length-1,y$Z=0;y$c<=y$e;)y$Z=Math.floor((y$c+y$e)/2),this._compareBatchRenderElement(this._batchRenderElements[y$Z],y$_)?y$e=y$Z-1:y$c=y$Z+1;return y$c},y$c._compareBatchRenderElement=function(y$_,y$c){throw new Error("StaticBatch:must override this function.")},y$c._getVertexDecLightMap=function(y$_){return y$_===y$Y_.vertexDeclaration?y$h_.vertexDeclaration:y$_===y$F_.vertexDeclaration?y$T_.vertexDeclaration:y$_===y$A_.vertexDeclaration?y$L_.vertexDeclaration:y$_===y$J_.vertexDeclaration?null:y$_===y$k_.vertexDeclaration?y$a_.vertexDeclaration:y$_===y$o_.vertexDeclaration?y$i_.vertexDeclaration:y$_===y$y_.vertexDeclaration?y$$_.vertexDeclaration:y$_===y$p_.vertexDeclaration?y$R_.vertexDeclaration:y$_===y$F_.vertexDeclaration?y$T_.vertexDeclaration:y$_===y$v_.vertexDeclaration?y$q_.vertexDeclaration:y$_===y$J_.vertexDeclaration?null:y$_===y$k_.vertexDeclaration?y$a_.vertexDeclaration:y$_===y$Q_.vertexDeclaration?y$x_.vertexDeclaration:y$_===y$y_.vertexDeclaration?y$$_.vertexDeclaration:y$_},y$c._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},y$c._addBatchRenderElement=function(y$_){this._batchRenderElements.splice(this._binarySearch(y$_),0,y$_)},y$c._updateToRenderQueue=function(y$_,y$c){this._combineRenderElementPoolIndex=0,this._getRenderElement(y$_.getRenderQueue(this._material.renderQueue)._renderElements,y$_,y$c)},y$c._getRenderElement=function(y$_,y$c,y$e){throw new Error("StaticBatch:must override this function.")},y$c._finishInit=function(){throw new Error("StaticBatch:must override this function.")},y$c._clearRenderElements=function(){this._batchRenderElements.length=0},y$c.dispose=function(){},y$c._getVertexBuffer=function(y$_){return void 0===y$_&&(y$_=0),null},y$c._getIndexBuffer=function(){return null},y$c._beforeRender=function(y$_){return!0},y$c._render=function(y$_){},y$c._getVertexBuffers=function(){return null},y$U(0,y$c,"_vertexBufferCount",function(){return 1}),y$U(0,y$c,"triangleCount",function(){return 0}),y$_.combine=function(y$_){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),y$Z_.combine(y$_)},y$_.maxBatchVertexCount=65535,y$_}(),y$u_=function(){function y$P(y$_,y$c){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++y$P._uniqueIDCounter,this._id>y$P.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",y$P.maxVertexDeclaration);this._shaderValues=new y$Bc,this._vertexElementsDic={},this._vertexStride=y$_,this._vertexElements=y$c;for(var y$e=0;y$e<y$c.length;y$e++){var y$Z=y$c[y$e],y$X=y$Z.elementUsage;this._vertexElementsDic[y$X]=y$Z;var y$u=[y$P._getTypeSize(y$Z.elementFormat)/4,5126,!1,this._vertexStride,y$Z.offset];switch(this._shaderValues.setValue(y$X,y$u),y$X){case 1:this._addShaderDefine(y$fc.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(y$fc.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(y$fc.SHADERDEFINE_UV1)}}}y$D(y$P,"laya.d3.graphics.VertexDeclaration");var y$_=y$P.prototype;return y$_._addShaderDefine=function(y$_){this._shaderDefineValue|=y$_},y$_._removeShaderDefine=function(y$_){this._shaderDefineValue&=~y$_},y$_.getVertexElements=function(){return this._vertexElements.slice()},y$_.getVertexElementByUsage=function(y$_){return this._vertexElementsDic[y$_]},y$_.unBinding=function(){},y$U(0,y$_,"shaderDefineValue",function(){return this._shaderDefineValue}),y$U(0,y$_,"id",function(){return this._id}),y$U(0,y$_,"vertexStride",function(){return this._vertexStride}),y$U(0,y$_,"shaderValues",function(){return this._shaderValues}),y$P._getTypeSize=function(y$_){switch(y$_){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},y$P.getVertexStride=function(y$_){for(var y$c=0,y$e=0;y$e<y$_.Length;y$e++){var y$Z=y$_[y$e],y$X=y$Z.offset+y$P._getTypeSize(y$Z.elementFormat);y$c<y$X&&(y$c=y$X)}return y$c},y$P._maxVertexDeclarationBit=1e3,y$P._uniqueIDCounter=1,y$H(y$P,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),y$P}(),y$P_=function(){function y$_(y$_,y$c,y$e){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=y$_,this.elementFormat=y$c,this.elementUsage=y$e}return y$D(y$_,"laya.d3.graphics.VertexElement"),y$_}(),y$O_=(function(){function y$_(){}y$D(y$_,"laya.d3.graphics.VertexElementFormat"),y$_.Single="single",y$_.Vector2="vector2",y$_.Vector3="vector3",y$_.Vector4="vector4",y$_.Color="color",y$_.Byte4="byte4",y$_.Short2="short2",y$_.Short4="short4",y$_.NormalizedShort2="normalizedshort2",y$_.NormalizedShort4="normalizedshort4",y$_.HalfVector2="halfvector2",y$_.HalfVector4="halfvector4"}(),function(){function y$_(){}y$D(y$_,"laya.d3.graphics.VertexElementUsage"),y$_.POSITION0=0,y$_.COLOR0=1,y$_.TEXTURECOORDINATE0=2,y$_.NORMAL0=3,y$_.BINORMAL0=4,y$_.TANGENT0=5,y$_.BLENDINDICES0=6,y$_.BLENDWEIGHT0=7,y$_.DEPTH0=8,y$_.FOG0=9,y$_.POINTSIZE0=10,y$_.SAMPLE0=11,y$_.TESSELLATEFACTOR0=12,y$_.COLOR1=13,y$_.NEXTTEXTURECOORDINATE0=14,y$_.TEXTURECOORDINATE1=15,y$_.NEXTTEXTURECOORDINATE1=16,y$_.CORNERTEXTURECOORDINATE0=17,y$_.VELOCITY0=18,y$_.STARTCOLOR0=19,y$_.STARTSIZE=20,y$_.AGEADDSCALE0=21,y$_.STARTROTATION=22,y$_.ENDCOLOR0=23,y$_.STARTLIFETIME=24,y$_.TIME0=33,y$_.SHAPEPOSITIONSTARTLIFETIME=30,y$_.DIRECTIONTIME=32,y$_.SIZEROTATION0=27,y$_.RADIUS0=28,y$_.RADIAN0=29,y$_.STARTSPEED=31,y$_.RANDOM0=34,y$_.RANDOM1=35,y$_.SIMULATIONWORLDPOSTION=36,y$_.SIMULATIONWORLDROTATION=37,y$_.TEXTURECOORDINATE0X=38,y$_.TEXTURECOORDINATE0X1=39,y$_.TEXTURECOORDINATE0Y=40,y$_.OFFSETVECTOR=41}(),function(){function y$_(y$_,y$c,y$e){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=y$_,this._textureCoordinate0=y$c,this._time=y$e}y$D(y$_,"laya.d3.graphics.VertexGlitter");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate0}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"time",function(){return this._time}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(24,[new y$P_(0,"vector3",0),new y$P_(12,"vector2",2),new y$P_(20,"single",33)])}])}(),function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=y$_,this._position=y$c,this._velocity=y$e,this._startColor=y$Z,this._endColor=y$X,this._sizeRotation=y$u,this._radius=y$P,this._radian=y$O,this._ageAddScale=y$s,this._time=y$n}y$D(y$_,"laya.d3.graphics.VertexParticle");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"endColor",function(){return this._endColor}),y$U(0,y$c,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),y$U(0,y$c,"sizeRotation",function(){return this._sizeRotation}),y$U(0,y$c,"velocity",function(){return this._velocity}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"startColor",function(){return this._startColor}),y$U(0,y$c,"radius",function(){return this._radius}),y$U(0,y$c,"radian",function(){return this._radian}),y$U(0,y$c,"ageAddScale",function(){return this._ageAddScale}),y$U(0,y$c,"time",function(){return this._time}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(116,[new y$P_(0,"vector4",17),new y$P_(16,"vector3",0),new y$P_(28,"vector3",18),new y$P_(40,"vector4",19),new y$P_(56,"vector4",23),new y$P_(72,"vector3",27),new y$P_(84,"vector2",28),new y$P_(92,"vector4",29),new y$P_(108,"single",24),new y$P_(112,"single",33)])}])}(),function(){function y$_(y$_){this._position=null,this._position=y$_}y$D(y$_,"laya.d3.graphics.VertexPosition");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(12,[new y$P_(0,"vector3",0)])}]),y$_}()),y$s_=function(){function y$_(y$_,y$c){this._position=null,this._normal=null,this._position=y$_,this._normal=y$c}y$D(y$_,"laya.d3.graphics.VertexPositionNormal");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(24,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3)])}]),y$_}(),y$n_=function(){function y$_(y$_,y$c,y$e){this._position=null,this._normal=null,this._color=null,this._position=y$_,this._normal=y$c,this._color=y$e}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColor");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(40,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1)])}]),y$_}(),y$m_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._blendIndex=y$Z,this._blendWeight=y$X}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorSkin");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(72,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector4",7),new y$P_(56,"vector4",6)])}]),y$_}(),y$H_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._tangent=y$Z,this._blendIndex=y$X,this._blendWeight=y$u}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(88,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector4",7),new y$P_(56,"vector4",6),new y$P_(72,"vector4",5)])}]),y$_}(),y$B_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._tangent=y$Z,this._blendIndex=y$X,this._blendWeight=y$u}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(84,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector4",7),new y$P_(56,"vector4",6),new y$P_(72,"vector3",5)])}]),y$_}(),y$D_=function(){function y$_(y$_,y$c,y$e,y$Z){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._tangent=y$Z}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(56,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector4",5)])}]),y$_}(),y$U_=function(){function y$_(y$_,y$c,y$e,y$Z){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._tangent=y$Z}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(52,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector3",5)])}]),y$_}(),y$k_=function(){function y$_(y$_,y$c,y$e,y$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate=y$Z}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTexture");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(48,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2)])}]),y$_}(),y$a_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate0=y$Z,this._textureCoordinate1=y$X}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(56,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector2",15)])}]),y$_}(),y$G_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate0=y$Z,this._textureCoordinate1=y$X,this._blendIndex=y$u,this._blendWeight=y$P}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(88,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector2",15),new y$P_(56,"vector4",7),new y$P_(72,"vector4",6)])}]),y$_}(),y$w_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate0=y$Z,this._textureCoordinate1=y$X,this._tangent=y$u,this._blendIndex=y$P,this._blendWeight=y$O}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(104,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector2",15),new y$P_(56,"vector4",7),new y$P_(72,"vector4",6),new y$P_(88,"vector4",5)])}]),y$_}(),y$z_=function(){function y$_(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$c.VertexPositionNormalColorTexture0SkinTangent=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate0=y$Z,this._textureCoordinate1=y$X,this._tangent=y$u,this._blendIndex=y$P,this._blendWeight=y$O},y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(100,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector2",15),new y$P_(56,"vector4",7),new y$P_(72,"vector4",6),new y$P_(88,"vector3",5)])}]),y$_}(),y$L_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate0=y$Z,this._textureCoordinate1=y$X,this._tangent=y$u}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(72,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector2",15),new y$P_(56,"vector4",5)])}]),y$_}(),y$q_=function(){function y$_(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$c.VertexPositionNormalColorTexture0Tangent=function(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate0=y$Z,this._textureCoordinate1=y$X,this._tangent=y$u},y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(68,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector2",15),new y$P_(56,"vector3",5)])}]),y$_}(),y$K_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate=y$Z,this._blendIndex=y$X,this._blendWeight=y$u}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(80,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector4",7),new y$P_(64,"vector4",6)])}]),y$_}(),y$M_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate=y$Z,this._tangent=y$X,this._blendIndex=y$u,this._blendWeight=y$P}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(96,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector4",7),new y$P_(64,"vector4",6),new y$P_(80,"vector4",5)])}]),y$_}(),y$f_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate=y$Z,this._tangent=y$X,this._blendIndex=y$u,this._blendWeight=y$P}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(92,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector4",7),new y$P_(64,"vector4",6),new y$P_(80,"vector3",5)])}]),y$_}(),y$A_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate=y$Z,this._tangent=y$X}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(64,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector4",5)])}]),y$_}(),y$v_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._color=y$e,this._textureCoordinate=y$Z,this._tangent=y$X}y$D(y$_,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"color",function(){return this._color}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(60,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",1),new y$P_(40,"vector2",2),new y$P_(48,"vector3",5)])}]),y$_}(),y$r_=function(){function y$_(y$_,y$c,y$e){this._position=null,this._normal=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._tangent=y$e}y$D(y$_,"laya.d3.graphics.VertexPositionNormalSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(40,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector4",5)])}]),y$_}(),y$C_=function(){function y$_(y$_,y$c,y$e){this._position=null,this._normal=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._tangent=y$e}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(36,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector3",5)])}]),y$_}(),y$y_=function(){function y$_(y$_,y$c,y$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTexture");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(32,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2)])}]),y$_}(),y$$_=function(){function y$_(y$_,y$c,y$e,y$Z){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=y$_,this._normal=y$c,this._textureCoordinate0=y$e,this._textureCoordinate1=y$Z}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(40,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector2",15)])}]),y$_}(),y$T_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=y$_,this._normal=y$c,this._textureCoordinate0=y$e,this._textureCoordinate1=y$Z,this._blendIndex=y$X,this._blendWeight=y$u}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(72,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector2",15),new y$P_(40,"vector4",7),new y$P_(56,"vector4",6)])}]),y$_}(),y$h_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._textureCoordinate0=y$e,this._textureCoordinate1=y$Z,this._tangent=y$X,this._blendIndex=y$u,this._blendWeight=y$P}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(88,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector2",15),new y$P_(40,"vector4",7),new y$P_(56,"vector4",6),new y$P_(72,"vector4",5)])}]),y$_}(),y$R_=function(){function y$_(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$c.VertexPositionNormalTexture0SkinTangent=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){this._position=y$_,this._normal=y$c,this._textureCoordinate0=y$e,this._textureCoordinate1=y$Z,this._tangent=y$X,this._blendIndex=y$u,this._blendWeight=y$P},y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(84,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector2",15),new y$P_(40,"vector4",7),new y$P_(56,"vector4",6),new y$P_(72,"vector3",5)])}]),y$_}(),y$i_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._textureCoordinate0=y$e,this._textureCoordinate1=y$Z,this._tangent=y$X}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(56,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector2",15),new y$P_(40,"vector4",5)])}]),y$_}(),y$x_=function(){function y$_(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$c.VertexPositionNormalTexture0Tangent=function(y$_,y$c,y$e,y$Z,y$X){this._position=y$_,this._normal=y$c,this._textureCoordinate0=y$e,this._textureCoordinate1=y$Z,this._tangent=y$X},y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(52,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector2",15),new y$P_(40,"vector3",5)])}]),y$_}(),y$F_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e,this._blendIndex=y$Z,this._blendWeight=y$X}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTextureSkin");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(64,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector4",7),new y$P_(48,"vector4",6)])}]),y$_}(),y$Y_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e,this._tangent=y$Z,this._blendIndex=y$X,this._blendWeight=y$u}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(80,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector4",7),new y$P_(48,"vector4",6),new y$P_(64,"vector4",5)])}]),y$_}(),y$p_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e,this._tangent=y$Z,this._blendIndex=y$X,this._blendWeight=y$u}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(76,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector4",7),new y$P_(48,"vector4",6),new y$P_(64,"vector3",5)])}]),y$_}(),y$o_=function(){function y$_(y$_,y$c,y$e,y$Z){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e,this._tangent=y$Z}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(48,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector4",5)])}]),y$_}(),y$Q_=function(){function y$_(y$_,y$c,y$e,y$Z){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e,this._tangent=y$Z}y$D(y$_,"laya.d3.graphics.VertexPositionNormalTextureTangent");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(44,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector3",5)])}]),y$_}(),y$J_=function(){function y$_(y$_,y$c,y$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e}y$D(y$_,"laya.d3.graphics.VertexPositionNTBTexture");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(56,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector3",5),new y$P_(36,"vector3",4),new y$P_(48,"vector2",2)])}]),y$_}(),y$j_=function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=y$_,this._normal=y$c,this._textureCoordinate0=y$Z,this._textureCoordinate1=y$X,this._tangent=y$u,y$e=y$e,this._blendIndex=y$P,this._blendWeight=y$O}y$D(y$_,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"tangent",function(){return this._tangent}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(0,y$c,"textureCoordinate1",function(){return this._textureCoordinate1}),y$U(0,y$c,"blendIndex",function(){return this._blendIndex}),y$U(0,y$c,"blendWeight",function(){return this._blendWeight}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(96,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector3",5),new y$P_(36,"vector3",4),new y$P_(48,"vector2",2),new y$P_(56,"vector2",15),new y$P_(64,"vector4",7),new y$P_(80,"vector4",6)])}]),y$_}(),y$t_=function(){function y$_(y$_,y$c,y$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=y$_,this._normal=y$c,this._textureCoordinate=y$e}y$D(y$_,"laya.d3.graphics.VertexPositionNTBTextureSkin");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"textureCoordinate",function(){return this._textureCoordinate}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(88,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector3",5),new y$P_(36,"vector3",4),new y$P_(48,"vector2",2),new y$P_(56,"vector4",7),new y$P_(72,"vector4",6)])}]),y$_}(),y$b_=(function(){function y$_(y$_,y$c,y$e,y$Z){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=y$_,this._normal=y$c,this._textureCoord0=y$e,this._textureCoord1=y$Z}y$D(y$_,"laya.d3.graphics.VertexPositionTerrain");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"normal",function(){return this._normal}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoord0",function(){return this._textureCoord0}),y$U(0,y$c,"textureCoord1",function(){return this._textureCoord1}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(40,[new y$P_(0,"vector3",0),new y$P_(12,"vector3",3),new y$P_(24,"vector2",2),new y$P_(32,"vector2",15)])}])}(),function(){function y$_(y$_,y$c){this._position=null,this._textureCoordinate0=null,this._position=y$_,this._textureCoordinate0=y$c}y$D(y$_,"laya.d3.graphics.VertexPositionTexture0");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"position",function(){return this._position}),y$U(0,y$c,"textureCoordinate0",function(){return this._textureCoordinate0}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(20,[new y$P_(0,"vector3",0),new y$P_(12,"vector2",2)])}]),y$_}()),y$N_=(function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H,y$B,y$D){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=y$_,this._positionStartLifeTime=y$c,this._velocity=y$e,this._startColor=y$Z,this._startSize=y$X,this._startRotation0=y$u,this._startRotation1=y$P,this._startRotation2=y$O,this._startLifeTime=y$s,this._time=y$n,this._startSpeed=y$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=y$D}y$D(y$_,"laya.d3.graphics.VertexShurikenParticleBillboard");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),y$U(0,y$c,"random1",function(){return this._randoms1}),y$U(0,y$c,"startRotation2",function(){return this._startRotation2}),y$U(0,y$c,"positionStartLifeTime",function(){return this._positionStartLifeTime}),y$U(0,y$c,"velocity",function(){return this._velocity}),y$U(0,y$c,"random0",function(){return this._randoms0}),y$U(0,y$c,"startSize",function(){return this._startSize}),y$U(0,y$c,"startColor",function(){return this._startColor}),y$U(0,y$c,"startRotation0",function(){return this._startRotation0}),y$U(0,y$c,"startRotation1",function(){return this._startRotation1}),y$U(0,y$c,"startLifeTime",function(){return this._startLifeTime}),y$U(0,y$c,"time",function(){return this._time}),y$U(0,y$c,"startSpeed",function(){return this._startSpeed}),y$U(0,y$c,"simulationWorldPostion",function(){return this._simulationWorldPostion}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(152,[new y$P_(0,"vector4",17),new y$P_(16,"vector4",30),new y$P_(32,"vector4",32),new y$P_(48,"vector4",19),new y$P_(64,"vector3",20),new y$P_(76,"vector3",22),new y$P_(88,"single",31),new y$P_(92,"vector4",34),new y$P_(108,"vector4",35),new y$P_(124,"vector3",36),new y$P_(136,"vector4",37)])}])}(),function(){function y$_(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H,y$B,y$D){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=y$_,this._positionStartLifeTime=y$c,this._velocity=y$e,this._startColor=y$Z,this._startSize=y$X,this._startRotation0=y$u,this._startRotation1=y$P,this._startRotation2=y$O,this._startLifeTime=y$s,this._time=y$n,this._startSpeed=y$m,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=y$D}y$D(y$_,"laya.d3.graphics.VertexShurikenParticleMesh");var y$c=y$_.prototype;y$q.imps(y$c,{"laya.d3.graphics.IVertex":!0}),y$U(0,y$c,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),y$U(0,y$c,"velocity",function(){return this._velocity}),y$U(0,y$c,"position",function(){return this._positionStartLifeTime}),y$U(0,y$c,"random0",function(){return this._randoms0}),y$U(0,y$c,"startSize",function(){return this._startSize}),y$U(0,y$c,"startColor",function(){return this._startColor}),y$U(0,y$c,"startRotation0",function(){return this._startRotation0}),y$U(0,y$c,"startRotation1",function(){return this._startRotation1}),y$U(0,y$c,"random1",function(){return this._randoms1}),y$U(0,y$c,"startRotation2",function(){return this._startRotation2}),y$U(0,y$c,"startLifeTime",function(){return this._startLifeTime}),y$U(0,y$c,"time",function(){return this._time}),y$U(0,y$c,"startSpeed",function(){return this._startSpeed}),y$U(0,y$c,"simulationWorldPostion",function(){return this._simulationWorldPostion}),y$U(0,y$c,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$U(1,y$_,"vertexDeclaration",function(){return y$_._vertexDeclaration}),y$H(y$_,["_vertexDeclaration",function(){return this._vertexDeclaration=new y$u_(172,[new y$P_(0,"vector3",0),new y$P_(12,"vector4",1),new y$P_(28,"vector2",2),new y$P_(36,"vector4",30),new y$P_(52,"vector4",32),new y$P_(68,"vector4",19),new y$P_(84,"vector3",20),new y$P_(96,"vector3",22),new y$P_(108,"single",31),new y$P_(112,"vector4",34),new y$P_(128,"vector4",35),new y$P_(144,"vector3",36),new y$P_(156,"vector4",37)])}])}(),function(){function y$z(y$_,y$c,y$e,y$Z,y$X,y$u){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=y$e,this._materials=y$Z,this._subMeshes=y$X,this._materialMap=y$u,this._version=y$c,this._onLoaded(y$_)}y$D(y$z,"laya.d3.loaders.LoadModelV01");var y$_=y$z.prototype;return y$_._onLoaded=function(y$_){this._readData=y$_,this.READ_BLOCK();for(var y$c=0;y$c<this._BLOCK.count;y$c++){var y$e=this._readData.getUint16(),y$Z=this._strings[y$e],y$X=this["READ_"+y$Z];if(null==y$X)throw new Error("model file err,no this function:"+y$e+" "+y$Z);if(!y$X.call(this))break}return this._mesh},y$_.onError=function(){},y$_._readString=function(){return this._strings[this._readData.getUint16()]},y$_.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},y$_.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},y$_.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var y$_=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var y$c=0;y$c<this._STRINGS.size;y$c++)this._strings[y$c]=this._readData.readUTFString();return this._readData.pos=y$_,!0},y$_.READ_MATERIAL=function(){var y$_=this._readData.getUint16(),y$c=(this._readString(),this._readString());return this._materials[y$_]="null"!==y$c?y$G.getRes(this._materialMap[y$c]):new y$Cc,!0},y$_.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var y$_,y$c=this._readData.__getBuffer(),y$e=0,y$Z=this._readData.getUint32(),y$X=this._readData.getUint32(),y$u=(new Float32Array(y$c.slice(y$Z+this._DATA.offset,y$Z+this._DATA.offset+y$X)),this._readData.getUint32()),y$P=this._readData.getUint32(),y$O=new Float32Array(y$c.slice(y$u+this._DATA.offset,y$u+this._DATA.offset+y$P));for(this.mesh._inverseBindPoses=[],y$e=0,y$_=y$O.length;y$e<y$_;y$e+=16){var y$s=new y$_c(y$O[y$e+0],y$O[y$e+1],y$O[y$e+2],y$O[y$e+3],y$O[y$e+4],y$O[y$e+5],y$O[y$e+6],y$O[y$e+7],y$O[y$e+8],y$O[y$e+9],y$O[y$e+10],y$O[y$e+11],y$O[y$e+12],y$O[y$e+13],y$O[y$e+14],y$O[y$e+15]);this.mesh._inverseBindPoses.push(y$s)}break;default:throw new Error("LoadModel:unknown version.")}return!0},y$_.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var y$_=this._readString();this._shaderAttributes=y$_.match(y$z._attrReg);var y$c=this._readData.getUint32(),y$e=this._readData.getUint32(),y$Z=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),y$X=this._readData.getUint32(),y$u=this._readData.getUint32(),y$P=this._readData.getUint32(),y$O=this._readData.__getBuffer(),y$s=new y$nc(this._mesh),y$n=this._getVertexDeclaration(),y$m=y$pc.create(y$n,y$X/y$n.vertexStride,35044,!0),y$H=y$Z+this._DATA.offset,y$B=y$O.slice(y$H,y$H+y$X);y$m.setData(new Float32Array(y$B));for(var y$D=(y$s._vertexBuffer=y$m).vertexDeclaration.getVertexElements(),y$U=0;y$U<y$D.length;y$U++)y$s._bufferUsage[y$D[y$U].elementUsage]=y$m;var y$k=y$Yc.create("ushort",y$e/2,35044,!0),y$a=y$c+this._DATA.offset,y$G=y$O.slice(y$a,y$a+y$e);y$k.setData(new Uint16Array(y$G)),y$s._indexBuffer=y$k;var y$w=y$O.slice(y$u+this._DATA.offset,y$u+this._DATA.offset+y$P);return y$s._boneIndicesList[0]=new Uint8Array(y$w),this._subMeshes.push(y$s),!0},y$_.READ_DATAAREA=function(){return!1},y$_._getVertexDeclaration=function(){for(var y$_,y$c=!1,y$e=!1,y$Z=!1,y$X=!1,y$u=!1,y$P=!1,y$O=!1,y$s=!1,y$n=!1,y$m=0;y$m<this._shaderAttributes.length;y$m+=8)switch(this._shaderAttributes[y$m]){case"POSITION":y$c=!0;break;case"NORMAL":y$e=!0;break;case"COLOR":y$Z=!0;break;case"UV":y$X=!0;break;case"UV1":y$u=!0;break;case"BLENDWEIGHT":y$O=!0;break;case"BLENDINDICES":y$s=!0;break;case"TANGENT":y$P=!0;break;case"BINORMAL":y$n=!0}return y$c&&y$e&&y$Z&&y$X&&y$u&&y$O&&y$s&&y$P?y$_=y$z_.vertexDeclaration:y$c&&y$e&&y$Z&&y$X&&y$u&&y$O&&y$s?y$_=y$G_.vertexDeclaration:y$c&&y$e&&y$X&&y$u&&y$O&&y$s&&y$P?y$_=y$R_.vertexDeclaration:y$c&&y$e&&y$X&&y$u&&y$O&&y$s?y$_=y$T_.vertexDeclaration:y$c&&y$e&&y$Z&&y$X&&y$O&&y$s&&y$P?y$_=y$f_.vertexDeclaration:y$c&&y$e&&y$Z&&y$X&&y$O&&y$s?y$_=y$K_.vertexDeclaration:y$c&&y$e&&y$P&&y$n&&y$X&&y$O&&y$s?y$_=y$t_.vertexDeclaration:y$c&&y$e&&y$X&&y$O&&y$s&&y$P?y$_=y$p_.vertexDeclaration:y$c&&y$e&&y$X&&y$O&&y$s?y$_=y$F_.vertexDeclaration:y$c&&y$e&&y$Z&&y$O&&y$s&&y$P?y$_=y$B_.vertexDeclaration:y$c&&y$e&&y$Z&&y$O&&y$s?y$_=y$m_.vertexDeclaration:y$c&&y$e&&y$Z&&y$X&&y$u&&y$P?y$_=y$q_.vertexDeclaration:y$c&&y$e&&y$Z&&y$X&&y$u?y$_=y$a_.vertexDeclaration:y$c&&y$e&&y$X&&y$u&&y$P?y$_=y$x_.vertexDeclaration:y$c&&y$e&&y$X&&y$u?y$_=y$$_.vertexDeclaration:y$c&&y$e&&y$Z&&y$X&&y$P?y$_=y$v_.vertexDeclaration:y$c&&y$e&&y$X&&y$P&&y$n?y$_=y$J_.vertexDeclaration:y$c&&y$e&&y$Z&&y$X?y$_=y$k_.vertexDeclaration:y$c&&y$e&&y$X&&y$P?y$_=y$Q_.vertexDeclaration:y$c&&y$e&&y$X?y$_=y$y_.vertexDeclaration:y$c&&y$e&&y$Z&&y$P?y$_=y$U_.vertexDeclaration:y$c&&y$e&&y$Z&&(y$_=y$n_.vertexDeclaration),y$_},y$U(0,y$_,"mesh",function(){return this._mesh}),y$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),y$z}()),y$V_=function(){function y$M(){}return y$D(y$M,"laya.d3.loaders.LoadModelV02"),y$M.parse=function(y$_,y$c,y$e,y$Z,y$X,y$u){y$M._mesh=y$e,y$M._materials=y$Z,y$M._subMeshes=y$X,y$M._materialMap=y$u,y$M._version=y$c,y$M._readData=y$_,y$M.READ_DATA(),y$M.READ_BLOCK(),y$M.READ_STRINGS();for(var y$P=0,y$O=y$M._BLOCK.count;y$P<y$O;y$P++){y$M._readData.pos=y$M._BLOCK.blockStarts[y$P];var y$s=y$M._readData.getUint16(),y$n=y$M._strings[y$s],y$m=y$M["READ_"+y$n];if(null==y$m)throw new Error("model file err,no this function:"+y$s+" "+y$n);y$m.call()}y$M._strings.length=0,y$M._readData=null,y$M._version=null,y$M._mesh=null,y$M._materials=null,y$M._subMeshes=null,y$M._materialMap=null},y$M._readString=function(){return y$M._strings[y$M._readData.getUint16()]},y$M.READ_DATA=function(){y$M._DATA.offset=y$M._readData.getUint32(),y$M._DATA.size=y$M._readData.getUint32()},y$M.READ_BLOCK=function(){for(var y$_=y$M._BLOCK.count=y$M._readData.getUint16(),y$c=y$M._BLOCK.blockStarts=[],y$e=y$M._BLOCK.blockLengths=[],y$Z=0;y$Z<y$_;y$Z++)y$c.push(y$M._readData.getUint32()),y$e.push(y$M._readData.getUint32())},y$M.READ_STRINGS=function(){var y$_=y$M._readData.getUint32(),y$c=y$M._readData.getUint16(),y$e=y$M._readData.pos;y$M._readData.pos=y$_+y$M._DATA.offset;for(var y$Z=0;y$Z<y$c;y$Z++)y$M._strings[y$Z]=y$M._readData.readUTFString();y$M._readData.pos=y$e},y$M.READ_MATERIAL=function(){y$M._readString(),y$M._readString();var y$_=y$M._readString();return""!==y$_&&y$M._materials.push(y$G.getRes(y$M._materialMap[y$_])),!0},y$M.READ_MESH=function(){y$M._readString();var y$_,y$c=y$M._readData.__getBuffer(),y$e=0,y$Z=y$M._readData.getInt16(),y$X=y$M._DATA.offset;for(y$e=0;y$e<y$Z;y$e++){var y$u=y$X+y$M._readData.getUint32(),y$P=y$M._readData.getUint32(),y$O=new Float32Array(y$c.slice(y$u,y$u+y$P)),y$s=y$M._readString().match(y$M._attrReg),y$n=y$M._getVertexDeclaration(y$s),y$m=y$pc.create(y$n,4*y$O.length/y$n.vertexStride,35044,!0);y$m.setData(y$O),y$M._mesh._vertexBuffers.push(y$m)}var y$H=y$X+y$M._readData.getUint32(),y$B=y$M._readData.getUint32(),y$D=new Uint16Array(y$c.slice(y$H,y$H+y$B)),y$U=y$Yc.create("ushort",y$B/2,35044,!0);y$U.setData(y$D),y$M._mesh._indexBuffer=y$U;var y$k=y$M._mesh._boneNames=[],y$a=y$M._readData.getUint16();for(y$k.length=y$a,y$e=0;y$e<y$a;y$e++)y$k[y$e]=y$M._strings[y$M._readData.getUint16()];var y$G=y$M._readData.getUint32(),y$w=y$M._readData.getUint32(),y$z=(new Float32Array(y$c.slice(y$X+y$G,y$X+y$G+y$w)),y$M._readData.getUint32()),y$L=y$M._readData.getUint32(),y$q=new Float32Array(y$c.slice(y$X+y$z,y$X+y$z+y$L));for(y$M._mesh._inverseBindPoses=[],y$e=0,y$_=y$q.length;y$e<y$_;y$e+=16){var y$K=new y$_c(y$q[y$e+0],y$q[y$e+1],y$q[y$e+2],y$q[y$e+3],y$q[y$e+4],y$q[y$e+5],y$q[y$e+6],y$q[y$e+7],y$q[y$e+8],y$q[y$e+9],y$q[y$e+10],y$q[y$e+11],y$q[y$e+12],y$q[y$e+13],y$q[y$e+14],y$q[y$e+15]);y$M._mesh._inverseBindPoses.push(y$K)}return y$M._mesh._skinnedDatas=new Float32Array(16*y$q.length),!0},y$M.READ_SUBMESH=function(){var y$_=y$M._readData.__getBuffer(),y$c=new y$nc(y$M._mesh),y$e=y$M._readData.getInt16(),y$Z=y$M._readData.getUint32(),y$X=y$M._readData.getUint32();y$c._vertexBuffer=y$M._mesh._vertexBuffers[y$e],y$c._vertexStart=y$Z,y$c._vertexCount=y$X;var y$u=y$M._readData.getUint32(),y$P=y$M._readData.getUint32(),y$O=y$M._mesh._indexBuffer;y$c._indexBuffer=y$O,y$c._indexStart=y$u,y$c._indexCount=y$P,y$c._indices=new Uint16Array(y$O.getData().buffer,2*y$u,y$P);var y$s=y$M._DATA.offset,y$n=y$c._subIndexBufferStart,y$m=y$c._subIndexBufferCount,y$H=y$c._boneIndicesList,y$B=y$M._readData.getUint16();y$n.length=y$B,y$m.length=y$B,y$H.length=y$B;for(var y$D=0;y$D<y$B;y$D++){y$n[y$D]=y$M._readData.getUint32(),y$m[y$D]=y$M._readData.getUint32();var y$U=y$M._readData.getUint32(),y$k=y$M._readData.getUint32();y$c._boneIndicesList[y$D]=new Uint8Array(y$_.slice(y$s+y$U,y$s+y$U+y$k))}return y$M._subMeshes.push(y$c),!0},y$M._getVertexDeclaration=function(y$_){for(var y$c,y$e=!1,y$Z=!1,y$X=!1,y$u=!1,y$P=!1,y$O=!1,y$s=!1,y$n=!1,y$m=!1,y$H=0;y$H<y$_.length;y$H++)switch(y$_[y$H]){case"POSITION":y$e=!0;break;case"NORMAL":y$Z=!0;break;case"COLOR":y$X=!0;break;case"UV":y$u=!0;break;case"UV1":y$P=!0;break;case"BLENDWEIGHT":y$s=!0;break;case"BLENDINDICES":y$n=!0;break;case"TANGENT":y$O=!0;break;case"BINORMAL":y$m=!0}return y$e&&y$Z&&y$X&&y$u&&y$P&&y$s&&y$n&&y$O?y$c=y$z_.vertexDeclaration:y$e&&y$Z&&y$X&&y$u&&y$P&&y$s&&y$n?y$c=y$G_.vertexDeclaration:y$e&&y$Z&&y$u&&y$P&&y$s&&y$n&&y$O?y$c=y$R_.vertexDeclaration:y$e&&y$Z&&y$u&&y$P&&y$s&&y$n?y$c=y$T_.vertexDeclaration:y$e&&y$Z&&y$X&&y$u&&y$s&&y$n&&y$O?y$c=y$f_.vertexDeclaration:y$e&&y$Z&&y$X&&y$u&&y$s&&y$n?y$c=y$K_.vertexDeclaration:y$e&&y$Z&&y$u&&y$s&&y$n&&y$O?y$c=y$p_.vertexDeclaration:y$e&&y$Z&&y$u&&y$s&&y$n?y$c=y$F_.vertexDeclaration:y$e&&y$Z&&y$X&&y$s&&y$n&&y$O?y$c=y$B_.vertexDeclaration:y$e&&y$Z&&y$X&&y$s&&y$n?y$c=y$m_.vertexDeclaration:y$e&&y$Z&&y$X&&y$u&&y$P&&y$O?y$c=y$q_.vertexDeclaration:y$e&&y$Z&&y$X&&y$u&&y$P?y$c=y$a_.vertexDeclaration:y$e&&y$Z&&y$u&&y$P&&y$O?y$c=y$x_.vertexDeclaration:y$e&&y$Z&&y$u&&y$P?y$c=y$$_.vertexDeclaration:y$e&&y$Z&&y$X&&y$u&&y$O?y$c=y$v_.vertexDeclaration:y$e&&y$Z&&y$u&&y$O&&y$m?y$c=y$J_.vertexDeclaration:y$e&&y$Z&&y$X&&y$u?y$c=y$k_.vertexDeclaration:y$e&&y$Z&&y$u&&y$O?y$c=y$Q_.vertexDeclaration:y$e&&y$Z&&y$u?y$c=y$y_.vertexDeclaration:y$e&&y$Z&&y$X&&y$O?y$c=y$U_.vertexDeclaration:y$e&&y$Z&&y$X&&(y$c=y$n_.vertexDeclaration),y$c},y$M._attrReg=new RegExp("(\\w+)|([:,;])","g"),y$M._strings=[],y$M._readData=null,y$M._version=null,y$M._mesh=null,y$M._materials=null,y$M._subMeshes=null,y$M._materialMap=null,y$H(y$M,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),y$M}(),y$g_=function(){function y$K(){}return y$D(y$K,"laya.d3.loaders.LoadModelV03"),y$K.parse=function(y$_,y$c,y$e,y$Z,y$X){y$K._mesh=y$e,y$K._subMeshes=y$Z,y$K._materialMap=y$X,y$K._version=y$c,y$K._readData=y$_,y$K.READ_DATA(),y$K.READ_BLOCK(),y$K.READ_STRINGS();for(var y$u=0,y$P=y$K._BLOCK.count;y$u<y$P;y$u++){y$K._readData.pos=y$K._BLOCK.blockStarts[y$u];var y$O=y$K._readData.getUint16(),y$s=y$K._strings[y$O],y$n=y$K["READ_"+y$s];if(null==y$n)throw new Error("model file err,no this function:"+y$O+" "+y$s);y$n.call()}y$K._strings.length=0,y$K._readData=null,y$K._version=null,y$K._mesh=null,y$K._subMeshes=null,y$K._materialMap=null},y$K._readString=function(){return y$K._strings[y$K._readData.getUint16()]},y$K.READ_DATA=function(){y$K._DATA.offset=y$K._readData.getUint32(),y$K._DATA.size=y$K._readData.getUint32()},y$K.READ_BLOCK=function(){for(var y$_=y$K._BLOCK.count=y$K._readData.getUint16(),y$c=y$K._BLOCK.blockStarts=[],y$e=y$K._BLOCK.blockLengths=[],y$Z=0;y$Z<y$_;y$Z++)y$c.push(y$K._readData.getUint32()),y$e.push(y$K._readData.getUint32())},y$K.READ_STRINGS=function(){var y$_=y$K._readData.getUint32(),y$c=y$K._readData.getUint16(),y$e=y$K._readData.pos;y$K._readData.pos=y$_+y$K._DATA.offset;for(var y$Z=0;y$Z<y$c;y$Z++)y$K._strings[y$Z]=y$K._readData.readUTFString();y$K._readData.pos=y$e},y$K.READ_MESH=function(){var y$_,y$c=y$K._readString(),y$e=y$K._readData.__getBuffer(),y$Z=0,y$X=y$K._readData.getInt16(),y$u=y$K._DATA.offset;for(y$Z=0;y$Z<y$X;y$Z++){var y$P,y$O=y$u+y$K._readData.getUint32(),y$s=y$K._readData.getUint32(),y$n=new Float32Array(y$e.slice(y$O,y$O+y$s)),y$m=y$K._readString();switch(y$K._version){case"LAYAMODEL:03":y$P=y$K._vertexDeclarationMap_Discard[y$m];break;case"LAYAMODEL:0301":y$P=y$K._vertexDeclarationMap[y$m];break;default:throw new Error("LoadModelV03: unknown version.")}if(!y$P)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+y$K._version+"  bufferAttribute="+y$m+"  name="+y$c+"  url="+(y$K._mesh?y$K._mesh.url:"null"));var y$H=y$pc.create(y$P,4*y$n.length/y$P.vertexStride,35044,!0,y$K._mesh._url+"_"+y$Z);y$H.setData(y$n),y$K._mesh._vertexBuffers.push(y$H)}var y$B=y$u+y$K._readData.getUint32(),y$D=y$K._readData.getUint32(),y$U=new Uint16Array(y$e.slice(y$B,y$B+y$D)),y$k=y$Yc.create("ushort",y$D/2,35044,!0,y$K._mesh._url);y$k.setData(y$U),y$K._mesh._indexBuffer=y$k;var y$a=y$K._mesh._boneNames=[],y$G=y$K._readData.getUint16();for(y$a.length=y$G,y$Z=0;y$Z<y$G;y$Z++)y$a[y$Z]=y$K._strings[y$K._readData.getUint16()];y$K._readData.pos+=8;var y$w=y$K._readData.getUint32(),y$z=y$K._readData.getUint32(),y$L=new Float32Array(y$e.slice(y$u+y$w,y$u+y$w+y$z));for(y$K._mesh._inverseBindPoses=[],y$Z=0,y$_=y$L.length;y$Z<y$_;y$Z+=16){var y$q=new y$_c(y$L[y$Z+0],y$L[y$Z+1],y$L[y$Z+2],y$L[y$Z+3],y$L[y$Z+4],y$L[y$Z+5],y$L[y$Z+6],y$L[y$Z+7],y$L[y$Z+8],y$L[y$Z+9],y$L[y$Z+10],y$L[y$Z+11],y$L[y$Z+12],y$L[y$Z+13],y$L[y$Z+14],y$L[y$Z+15]);y$K._mesh._inverseBindPoses.push(y$q)}return y$K._mesh._skinnedDatas=new Float32Array(16*y$L.length),!0},y$K.READ_SUBMESH=function(){var y$_=y$K._readData.__getBuffer(),y$c=new y$nc(y$K._mesh),y$e=y$K._readData.getInt16(),y$Z=y$K._readData.getUint32(),y$X=y$K._readData.getUint32();y$c._vertexBuffer=y$K._mesh._vertexBuffers[y$e],y$c._vertexStart=y$Z,y$c._vertexCount=y$X;var y$u=y$K._readData.getUint32(),y$P=y$K._readData.getUint32(),y$O=y$K._mesh._indexBuffer;y$c._indexBuffer=y$O,y$c._indexStart=y$u,y$c._indexCount=y$P,y$c._indices=new Uint16Array(y$O.getData().buffer,2*y$u,y$P);var y$s=y$K._DATA.offset,y$n=y$c._subIndexBufferStart,y$m=y$c._subIndexBufferCount,y$H=y$c._boneIndicesList,y$B=y$K._readData.getUint16();y$n.length=y$B,y$m.length=y$B,y$H.length=y$B;for(var y$D=0;y$D<y$B;y$D++){y$n[y$D]=y$K._readData.getUint32(),y$m[y$D]=y$K._readData.getUint32();var y$U=y$K._readData.getUint32(),y$k=y$K._readData.getUint32();y$H[y$D]=new Uint8Array(y$_.slice(y$s+y$U,y$s+y$U+y$k))}return y$K._subMeshes.push(y$c),!0},y$K._strings=[],y$K._readData=null,y$K._version=null,y$K._mesh=null,y$K._subMeshes=null,y$K._materialMap=null,y$H(y$K,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":y$z_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":y$G_.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":y$j_.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":y$R_.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":y$T_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":y$f_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":y$K_.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":y$p_.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":y$F_.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":y$B_.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":y$m_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":y$q_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":y$a_.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":y$x_.vertexDeclaration,"POSITION,NORMAL,UV,UV1":y$$_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":y$v_.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":y$J_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":y$k_.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":y$Q_.vertexDeclaration,"POSITION,NORMAL,UV":y$y_.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":y$U_.vertexDeclaration,"POSITION,NORMAL,COLOR":y$n_.vertexDeclaration,"POSITION,NORMAL,TANGENT":y$C_.vertexDeclaration,"POSITION,NORMAL":y$s_.vertexDeclaration,"POSITION,UV":y$b_.vertexDeclaration,POSITION:y$O_.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":y$w_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":y$G_.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":y$j_.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":y$h_.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":y$T_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":y$M_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":y$K_.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":y$Y_.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":y$F_.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":y$H_.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":y$m_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":y$L_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":y$a_.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":y$i_.vertexDeclaration,"POSITION,NORMAL,UV,UV1":y$$_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":y$A_.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":y$J_.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":y$k_.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":y$o_.vertexDeclaration,"POSITION,NORMAL,UV":y$y_.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":y$D_.vertexDeclaration,"POSITION,NORMAL,COLOR":y$n_.vertexDeclaration,"POSITION,NORMAL,TANGENT":y$r_.vertexDeclaration,"POSITION,NORMAL":y$s_.vertexDeclaration,"POSITION,UV":y$b_.vertexDeclaration,POSITION:y$O_.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),y$K}(),y$S_=function(){function y$O(){}return y$D(y$O,"laya.d3.loaders.MeshReader"),y$O.read=function(y$_,y$c,y$e,y$Z,y$X){var y$u=new y$K(y$_);y$u.pos=0;var y$P=y$u.readUTFString();switch(y$P){case"LAYAMODEL:01":case"LAYASKINANI:01":y$O._readVersion01(y$u,y$P,y$c,y$e,y$Z,y$X);break;case"LAYAMODEL:02":y$V_.parse(y$u,y$P,y$c,y$e,y$Z,y$X);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":y$g_.parse(y$u,y$P,y$c,y$Z,y$X);break;default:throw new Error("MeshReader: unknown mesh version.")}y$c._setSubMeshes(y$Z)},y$O._readVersion01=function(y$_,y$c,y$e,y$Z,y$X,y$u){new y$N_(y$_,y$c,y$e,y$Z,y$X,y$u)},y$O}(),y$E_=function(){function y$_(y$_,y$c){this.min=null,this.max=null,this.min=y$_,this.max=y$c}y$D(y$_,"laya.d3.math.BoundBox");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.getCorners=function(y$_){y$_.length=8;var y$c=this.min.elements,y$e=this.max.elements,y$Z=y$c[0],y$X=y$c[1],y$u=y$c[2],y$P=y$e[0],y$O=y$e[1],y$s=y$e[2];y$_[0]=new y$Pc(y$Z,y$O,y$s),y$_[1]=new y$Pc(y$P,y$O,y$s),y$_[2]=new y$Pc(y$P,y$X,y$s),y$_[3]=new y$Pc(y$Z,y$X,y$s),y$_[4]=new y$Pc(y$Z,y$O,y$u),y$_[5]=new y$Pc(y$P,y$O,y$u),y$_[6]=new y$Pc(y$P,y$X,y$u),y$_[7]=new y$Pc(y$Z,y$X,y$u)},y$c.toDefault=function(){this.min.toDefault(),this.max.toDefault()},y$c.cloneTo=function(y$_){var y$c=y$_;this.min.cloneTo(y$c.min),this.max.cloneTo(y$c.max)},y$c.clone=function(){var y$_=new this.constructor(new y$Pc,new y$Pc);return this.cloneTo(y$_),y$_},y$_.createfromPoints=function(y$_,y$c){if(null==y$_)throw new Error("points");var y$e=y$c.min,y$Z=y$c.max,y$X=y$e.elements;y$X[0]=Number.MAX_VALUE,y$X[1]=Number.MAX_VALUE,y$X[2]=Number.MAX_VALUE;var y$u=y$Z.elements;y$u[0]=-Number.MAX_VALUE,y$u[1]=-Number.MAX_VALUE,y$u[2]=-Number.MAX_VALUE;for(var y$P=0,y$O=y$_.length;y$P<y$O;++y$P)y$Pc.min(y$e,y$_[y$P],y$e),y$Pc.max(y$Z,y$_[y$P],y$Z)},y$_.merge=function(y$_,y$c,y$e){y$Pc.min(y$_.min,y$c.min,y$e.min),y$Pc.max(y$_.max,y$c.max,y$e.max)},y$_}(),y$W_=function(){function y$n(y$_){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=y$_,this._near=new y$cc(new y$Pc),this._far=new y$cc(new y$Pc),this._left=new y$cc(new y$Pc),this._right=new y$cc(new y$Pc),this._top=new y$cc(new y$Pc),this._bottom=new y$cc(new y$Pc),y$n._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}y$D(y$n,"laya.d3.math.BoundFrustum");var y$_=y$n.prototype;return y$_.equalsBoundFrustum=function(y$_){return this._matrix.equalsOtherMatrix(y$_.matrix)},y$_.equalsObj=function(y$_){if(y$_ instanceof laya.d3.math.BoundFrustum){var y$c=y$_;return this.equalsBoundFrustum(y$c)}return!1},y$_.getPlane=function(y$_){switch(y$_){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},y$_.getCorners=function(y$_){y$n._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(y$_[0]),y$n._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(y$_[1]),y$n._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(y$_[2]),y$n._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(y$_[3]),y$n._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(y$_[4]),y$n._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(y$_[5]),y$n._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(y$_[6]),y$n._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(y$_[7])},y$_.containsPoint=function(y$_){for(var y$c=y$cc.PlaneIntersectionType_Front,y$e=y$cc.PlaneIntersectionType_Front,y$Z=0;y$Z<6;y$Z++){switch(y$Z){case 0:y$e=Collision.intersectsPlaneAndPoint(this._near,y$_);break;case 1:y$e=Collision.intersectsPlaneAndPoint(this._far,y$_);break;case 2:y$e=Collision.intersectsPlaneAndPoint(this._left,y$_);break;case 3:y$e=Collision.intersectsPlaneAndPoint(this._right,y$_);break;case 4:y$e=Collision.intersectsPlaneAndPoint(this._top,y$_);break;case 5:y$e=Collision.intersectsPlaneAndPoint(this._bottom,y$_)}switch(y$e){case y$cc.PlaneIntersectionType_Back:return 0;case y$cc.PlaneIntersectionType_Intersecting:y$c=y$cc.PlaneIntersectionType_Intersecting}}switch(y$c){case y$cc.PlaneIntersectionType_Intersecting:return 2;default:return 1}},y$_.containsBoundBox=function(y$_){for(var y$c,y$e=y$n._tempV30,y$Z=y$n._tempV31,y$X=1,y$u=0;y$u<6;y$u++){if(y$c=this.getPlane(y$u),this._getBoxToPlanePVertexNVertex(y$_,y$c.normal,y$e,y$Z),Collision.intersectsPlaneAndPoint(y$c,y$e)===y$cc.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(y$c,y$Z)===y$cc.PlaneIntersectionType_Back&&(y$X=2)}return y$X},y$_.containsBoundSphere=function(y$_){for(var y$c=y$cc.PlaneIntersectionType_Front,y$e=y$cc.PlaneIntersectionType_Front,y$Z=0;y$Z<6;y$Z++){switch(y$Z){case 0:y$e=Collision.intersectsPlaneAndSphere(this._near,y$_);break;case 1:y$e=Collision.intersectsPlaneAndSphere(this._far,y$_);break;case 2:y$e=Collision.intersectsPlaneAndSphere(this._left,y$_);break;case 3:y$e=Collision.intersectsPlaneAndSphere(this._right,y$_);break;case 4:y$e=Collision.intersectsPlaneAndSphere(this._top,y$_);break;case 5:y$e=Collision.intersectsPlaneAndSphere(this._bottom,y$_)}switch(y$e){case y$cc.PlaneIntersectionType_Back:return 0;case y$cc.PlaneIntersectionType_Intersecting:y$c=y$cc.PlaneIntersectionType_Intersecting}}switch(y$c){case y$cc.PlaneIntersectionType_Intersecting:return 2;default:return 1}},y$_._getBoxToPlanePVertexNVertex=function(y$_,y$c,y$e,y$Z){var y$X=y$_.min,y$u=y$X.elements,y$P=y$_.max,y$O=y$P.elements,y$s=y$c.elements,y$n=y$s[0],y$m=y$s[1],y$H=y$s[2];y$X.cloneTo(y$e);var y$B=y$e.elements;0<=y$n&&(y$B[0]=y$O[0]),0<=y$m&&(y$B[1]=y$O[1]),0<=y$H&&(y$B[2]=y$O[2]),y$P.cloneTo(y$Z);var y$D=y$Z.elements;0<=y$n&&(y$D[0]=y$u[0]),0<=y$m&&(y$D[1]=y$u[1]),0<=y$H&&(y$D[2]=y$u[2])},y$U(0,y$_,"top",function(){return this._top}),y$U(0,y$_,"matrix",function(){return this._matrix},function(y$_){this._matrix=y$_,y$n._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),y$U(0,y$_,"near",function(){return this._near}),y$U(0,y$_,"far",function(){return this._far}),y$U(0,y$_,"left",function(){return this._left}),y$U(0,y$_,"right",function(){return this._right}),y$U(0,y$_,"bottom",function(){return this._bottom}),y$n._getPlanesFromMatrix=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){var y$O=y$_.elements,y$s=y$O[0],y$n=y$O[1],y$m=y$O[2],y$H=y$O[3],y$B=y$O[4],y$D=y$O[5],y$U=y$O[6],y$k=y$O[7],y$a=y$O[8],y$G=y$O[9],y$w=y$O[10],y$z=y$O[11],y$L=y$O[12],y$q=y$O[13],y$K=y$O[14],y$M=y$O[15],y$f=y$c.normal.elements;y$f[0]=y$H+y$m,y$f[1]=y$k+y$U,y$f[2]=y$z+y$w,y$c.distance=y$M+y$K,y$c.normalize();var y$A=y$e.normal.elements;y$A[0]=y$H-y$m,y$A[1]=y$k-y$U,y$A[2]=y$z-y$w,y$e.distance=y$M-y$K,y$e.normalize();var y$v=y$Z.normal.elements;y$v[0]=y$H+y$s,y$v[1]=y$k+y$B,y$v[2]=y$z+y$a,y$Z.distance=y$M+y$L,y$Z.normalize();var y$r=y$X.normal.elements;y$r[0]=y$H-y$s,y$r[1]=y$k-y$B,y$r[2]=y$z-y$a,y$X.distance=y$M-y$L,y$X.normalize();var y$C=y$u.normal.elements;y$C[0]=y$H-y$n,y$C[1]=y$k-y$D,y$C[2]=y$z-y$G,y$u.distance=y$M-y$q,y$u.normalize();var y$y=y$P.normal.elements;y$y[0]=y$H+y$n,y$y[1]=y$k+y$D,y$y[2]=y$z+y$G,y$P.distance=y$M+y$q,y$P.normalize()},y$n._get3PlaneInterPoint=function(y$_,y$c,y$e){var y$Z=y$_.normal,y$X=y$c.normal,y$u=y$e.normal;y$Pc.cross(y$X,y$u,y$n._tempV30),y$Pc.cross(y$u,y$Z,y$n._tempV31),y$Pc.cross(y$Z,y$X,y$n._tempV32);var y$P=y$Pc.dot(y$Z,y$n._tempV30),y$O=y$Pc.dot(y$X,y$n._tempV31),y$s=y$Pc.dot(y$u,y$n._tempV32);return y$Pc.scale(y$n._tempV30,-y$_.distance/y$P,y$n._tempV33),y$Pc.scale(y$n._tempV31,-y$c.distance/y$O,y$n._tempV34),y$Pc.scale(y$n._tempV32,-y$e.distance/y$s,y$n._tempV35),y$Pc.add(y$n._tempV33,y$n._tempV34,y$n._tempV36),y$Pc.add(y$n._tempV35,y$n._tempV36,y$n._tempV37),y$n._tempV37},y$H(y$n,["_tempV30",function(){return this._tempV30=new y$Pc},"_tempV31",function(){return this._tempV31=new y$Pc},"_tempV32",function(){return this._tempV32=new y$Pc},"_tempV33",function(){return this._tempV33=new y$Pc},"_tempV34",function(){return this._tempV34=new y$Pc},"_tempV35",function(){return this._tempV35=new y$Pc},"_tempV36",function(){return this._tempV36=new y$Pc},"_tempV37",function(){return this._tempV37=new y$Pc}]),y$n}(),y$l_=function(){function y$m(y$_,y$c){this.center=null,this.radius=NaN,this.center=y$_,this.radius=y$c}y$D(y$m,"laya.d3.math.BoundSphere");var y$_=y$m.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.toDefault=function(){this.center.toDefault(),this.radius=0},y$_.intersectsRayDistance=function(y$_){return Collision.intersectsRayAndSphereRD(y$_,this)},y$_.intersectsRayPoint=function(y$_,y$c){return Collision.intersectsRayAndSphereRP(y$_,this,y$c)},y$_.cloneTo=function(y$_){var y$c=y$_;this.center.cloneTo(y$c.center),y$c.radius=this.radius},y$_.clone=function(){var y$_=new this.constructor(new y$Pc,new y$Pc);return this.cloneTo(y$_),y$_},y$m.createFromSubPoints=function(y$_,y$c,y$e,y$Z){if(null==y$_)throw new Error("points");if(y$c<0||y$c>=y$_.length)throw new Error("start"+y$c+"Must be in the range [0, "+(y$_.length-1)+"]");if(y$e<0||y$c+y$e>y$_.length)throw new Error("count"+y$e+"Must be in the range <= "+y$_.length+"}");var y$X=y$c+y$e,y$u=y$m._tempVector3;y$u.elements[0]=0,y$u.elements[1]=0,y$u.elements[2]=0;for(var y$P=y$c;y$P<y$X;++y$P)y$Pc.add(y$_[y$P],y$u,y$u);var y$O=y$Z.center;y$Pc.scale(y$u,1/y$e,y$O);var y$s=0;for(y$P=y$c;y$P<y$X;++y$P){var y$n=y$Pc.distanceSquared(y$O,y$_[y$P]);y$s<y$n&&(y$s=y$n)}y$Z.radius=Math.sqrt(y$s)},y$m.createfromPoints=function(y$_,y$c){if(null==y$_)throw new Error("points");y$m.createFromSubPoints(y$_,0,y$_.length,y$c)},y$H(y$m,["_tempVector3",function(){return this._tempVector3=new y$Pc}]),y$m}(),y$d_=(function(){function y$_(){}y$D(y$_,"laya.d3.math.ContainmentType"),y$_.Disjoint=0,y$_.Contains=1,y$_.Intersects=2}(),function(){function y$e(){}return y$D(y$e,"laya.d3.math.MathUtils3D"),y$e.isZero=function(y$_){return Math.abs(y$_)<y$e.zeroTolerance},y$e.nearEqual=function(y$_,y$c){return!!y$e.isZero(y$_-y$c)},y$e.fastInvSqrt=function(y$_){return y$e.isZero(y$_)?y$_:1/Math.sqrt(y$_)},y$H(y$e,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),y$e}()),y$I_=function(){function y$s(){var y$_=this.elements=new Float32Array(9);y$_[0]=1,y$_[1]=0,y$_[2]=0,y$_[3]=0,y$_[4]=1,y$_[5]=0,y$_[6]=0,y$_[7]=0,y$_[8]=1}y$D(y$s,"laya.d3.math.Matrix3x3");var y$_=y$s.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.determinant=function(){var y$_=this.elements,y$c=y$_[0],y$e=y$_[1],y$Z=y$_[2],y$X=y$_[3],y$u=y$_[4],y$P=y$_[5],y$O=y$_[6],y$s=y$_[7],y$n=y$_[8];return y$c*(y$n*y$u-y$P*y$s)+y$e*(-y$n*y$X+y$P*y$O)+y$Z*(y$s*y$X-y$u*y$O)},y$_.translate=function(y$_,y$c){var y$e=y$c.elements,y$Z=this.elements,y$X=y$_.elements,y$u=y$Z[0],y$P=y$Z[1],y$O=y$Z[2],y$s=y$Z[3],y$n=y$Z[4],y$m=y$Z[5],y$H=y$Z[6],y$B=y$Z[7],y$D=y$Z[8],y$U=y$X[0],y$k=y$X[1];y$e[0]=y$u,y$e[1]=y$P,y$e[2]=y$O,y$e[3]=y$s,y$e[4]=y$n,y$e[5]=y$m,y$e[6]=y$U*y$u+y$k*y$s+y$H,y$e[7]=y$U*y$P+y$k*y$n+y$B,y$e[8]=y$U*y$O+y$k*y$m+y$D},y$_.rotate=function(y$_,y$c){var y$e=y$c.elements,y$Z=this.elements,y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$Z[3],y$s=y$Z[4],y$n=y$Z[5],y$m=y$Z[6],y$H=y$Z[7],y$B=y$Z[8],y$D=Math.sin(y$_),y$U=Math.cos(y$_);y$e[0]=y$U*y$X+y$D*y$O,y$e[1]=y$U*y$u+y$D*y$s,y$e[2]=y$U*y$P+y$D*y$n,y$e[3]=y$U*y$O-y$D*y$X,y$e[4]=y$U*y$s-y$D*y$u,y$e[5]=y$U*y$n-y$D*y$P,y$e[6]=y$m,y$e[7]=y$H,y$e[8]=y$B},y$_.scale=function(y$_,y$c){var y$e=y$c.elements,y$Z=this.elements,y$X=y$_.elements,y$u=y$X[0],y$P=y$X[1];y$e[0]=y$u*y$Z[0],y$e[1]=y$u*y$Z[1],y$e[2]=y$u*y$Z[2],y$e[3]=y$P*y$Z[3],y$e[4]=y$P*y$Z[4],y$e[5]=y$P*y$Z[5],y$e[6]=y$Z[6],y$e[7]=y$Z[7],y$e[8]=y$Z[8]},y$_.invert=function(y$_){var y$c=y$_.elements,y$e=this.elements,y$Z=y$e[0],y$X=y$e[1],y$u=y$e[2],y$P=y$e[3],y$O=y$e[4],y$s=y$e[5],y$n=y$e[6],y$m=y$e[7],y$H=y$e[8],y$B=y$H*y$O-y$s*y$m,y$D=-y$H*y$P+y$s*y$n,y$U=y$m*y$P-y$O*y$n,y$k=y$Z*y$B+y$X*y$D+y$u*y$U;y$k||(y$_=null),y$k=1/y$k,y$c[0]=y$B*y$k,y$c[1]=(-y$H*y$X+y$u*y$m)*y$k,y$c[2]=(y$s*y$X-y$u*y$O)*y$k,y$c[3]=y$D*y$k,y$c[4]=(y$H*y$Z-y$u*y$n)*y$k,y$c[5]=(-y$s*y$Z+y$u*y$P)*y$k,y$c[6]=y$U*y$k,y$c[7]=(-y$m*y$Z+y$X*y$n)*y$k,y$c[8]=(y$O*y$Z-y$X*y$P)*y$k},y$_.transpose=function(y$_){var y$c=y$_.elements,y$e=this.elements;if(y$_===this){var y$Z=y$e[1],y$X=y$e[2],y$u=y$e[5];y$c[1]=y$e[3],y$c[2]=y$e[6],y$c[3]=y$Z,y$c[5]=y$e[7],y$c[6]=y$X,y$c[7]=y$u}else y$c[0]=y$e[0],y$c[1]=y$e[3],y$c[2]=y$e[6],y$c[3]=y$e[1],y$c[4]=y$e[4],y$c[5]=y$e[7],y$c[6]=y$e[2],y$c[7]=y$e[5],y$c[8]=y$e[8]},y$_.identity=function(){var y$_=this.elements;y$_[0]=1,y$_[1]=0,y$_[2]=0,y$_[3]=0,y$_[4]=1,y$_[5]=0,y$_[6]=0,y$_[7]=0,y$_[8]=1},y$_.cloneTo=function(y$_){var y$c,y$e,y$Z;if((y$e=this.elements)!==(y$Z=y$_.elements))for(y$c=0;y$c<9;++y$c)y$Z[y$c]=y$e[y$c]},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$s.createFromTranslation=function(y$_,y$c){y$c.elements;var y$e=y$_.elements;y$c[0]=1,y$c[1]=0,y$c[2]=0,y$c[3]=0,y$c[4]=1,y$c[5]=0,y$c[6]=y$e[0],y$c[7]=y$e[1],y$c[8]=1},y$s.createFromRotation=function(y$_,y$c){var y$e=y$c.elements,y$Z=Math.sin(y$_),y$X=Math.cos(y$_);y$e[0]=y$X,y$e[1]=y$Z,y$e[2]=0,y$e[3]=-y$Z,y$e[4]=y$X,y$e[5]=0,y$e[6]=0,y$e[7]=0,y$e[8]=1},y$s.createFromScaling=function(y$_,y$c){var y$e=y$c.elements,y$Z=y$_.elements;y$e[0]=y$Z[0],y$e[1]=0,y$e[2]=0,y$e[3]=0,y$e[4]=y$Z[1],y$e[5]=0,y$e[6]=0,y$e[7]=0,y$e[8]=1},y$s.createFromMatrix4x4=function(y$_,y$c){y$c[0]=y$_[0],y$c[1]=y$_[1],y$c[2]=y$_[2],y$c[3]=y$_[4],y$c[4]=y$_[5],y$c[5]=y$_[6],y$c[6]=y$_[8],y$c[7]=y$_[9],y$c[8]=y$_[10]},y$s.multiply=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements,y$P=y$X[0],y$O=y$X[1],y$s=y$X[2],y$n=y$X[3],y$m=y$X[4],y$H=y$X[5],y$B=y$X[6],y$D=y$X[7],y$U=y$X[8],y$k=y$u[0],y$a=y$u[1],y$G=y$u[2],y$w=y$u[3],y$z=y$u[4],y$L=y$u[5],y$q=y$u[6],y$K=y$u[7],y$M=y$u[8];y$Z[0]=y$k*y$P+y$a*y$n+y$G*y$B,y$Z[1]=y$k*y$O+y$a*y$m+y$G*y$D,y$Z[2]=y$k*y$s+y$a*y$H+y$G*y$U,y$Z[3]=y$w*y$P+y$z*y$n+y$L*y$B,y$Z[4]=y$w*y$O+y$z*y$m+y$L*y$D,y$Z[5]=y$w*y$s+y$z*y$H+y$L*y$U,y$Z[6]=y$q*y$P+y$K*y$n+y$M*y$B,y$Z[7]=y$q*y$O+y$K*y$m+y$M*y$D,y$Z[8]=y$q*y$s+y$K*y$H+y$M*y$U},y$s.lookAt=function(y$_,y$c,y$e,y$Z){y$Pc.subtract(y$_,y$c,y$s._tempV30),y$Pc.normalize(y$s._tempV30,y$s._tempV30),y$Pc.cross(y$e,y$s._tempV30,y$s._tempV31),y$Pc.normalize(y$s._tempV31,y$s._tempV31),y$Pc.cross(y$s._tempV30,y$s._tempV31,y$s._tempV32);var y$X=y$s._tempV30.elements,y$u=y$s._tempV31.elements,y$P=y$s._tempV32.elements,y$O=y$Z.elements;y$O[0]=y$u[0],y$O[3]=y$u[1],y$O[6]=y$u[2],y$O[1]=y$P[0],y$O[4]=y$P[1],y$O[7]=y$P[2],y$O[2]=y$X[0],y$O[5]=y$X[1],y$O[8]=y$X[2]},y$s.DEFAULT=new y$s,y$H(y$s,["_tempV30",function(){return this._tempV30=new y$Pc},"_tempV31",function(){return this._tempV31=new y$Pc},"_tempV32",function(){return this._tempV32=new y$Pc}]),y$s}(),y$_c=function(){function y$A(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H,y$B,y$D,y$U,y$k){void 0===y$_&&(y$_=1),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=1),void 0===y$P&&(y$P=0),void 0===y$O&&(y$O=0),void 0===y$s&&(y$s=0),void 0===y$n&&(y$n=0),void 0===y$m&&(y$m=1),void 0===y$H&&(y$H=0),void 0===y$B&&(y$B=0),void 0===y$D&&(y$D=0),void 0===y$U&&(y$U=0),void 0===y$k&&(y$k=1);var y$a=this.elements=new Float32Array(16);y$a[0]=y$_,y$a[1]=y$c,y$a[2]=y$e,y$a[3]=y$Z,y$a[4]=y$X,y$a[5]=y$u,y$a[6]=y$P,y$a[7]=y$O,y$a[8]=y$s,y$a[9]=y$n,y$a[10]=y$m,y$a[11]=y$H,y$a[12]=y$B,y$a[13]=y$D,y$a[14]=y$U,y$a[15]=y$k}y$D(y$A,"laya.d3.math.Matrix4x4");var y$_=y$A.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.getElementByRowColumn=function(y$_,y$c){if(y$_<0||3<y$_)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(y$c<0||3<y$c)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*y$_+y$c]},y$_.setElementByRowColumn=function(y$_,y$c,y$e){if(y$_<0||3<y$_)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(y$c<0||3<y$c)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*y$_+y$c]=y$e},y$_.equalsOtherMatrix=function(y$_){var y$c=this.elements,y$e=y$_.elements;return y$d_.nearEqual(y$c[0],y$e[0])&&y$d_.nearEqual(y$c[1],y$e[1])&&y$d_.nearEqual(y$c[2],y$e[2])&&y$d_.nearEqual(y$c[3],y$e[3])&&y$d_.nearEqual(y$c[4],y$e[4])&&y$d_.nearEqual(y$c[5],y$e[5])&&y$d_.nearEqual(y$c[6],y$e[6])&&y$d_.nearEqual(y$c[7],y$e[7])&&y$d_.nearEqual(y$c[8],y$e[8])&&y$d_.nearEqual(y$c[9],y$e[9])&&y$d_.nearEqual(y$c[10],y$e[10])&&y$d_.nearEqual(y$c[11],y$e[11])&&y$d_.nearEqual(y$c[12],y$e[12])&&y$d_.nearEqual(y$c[13],y$e[13])&&y$d_.nearEqual(y$c[14],y$e[14])&&y$d_.nearEqual(y$c[15],y$e[15])},y$_.decomposeTransRotScale=function(y$_,y$c,y$e){var y$Z=y$A._tempMatrix4x4;return this.decomposeTransRotMatScale(y$_,y$Z,y$e)?(y$ec.createFromMatrix4x4(y$Z,y$c),!0):(y$c.identity(),!1)},y$_.decomposeTransRotMatScale=function(y$_,y$c,y$e){var y$Z=this.elements,y$X=y$_.elements,y$u=y$c.elements,y$P=y$e.elements;y$X[0]=y$Z[12],y$X[1]=y$Z[13],y$X[2]=y$Z[14];var y$O=y$Z[0],y$s=y$Z[1],y$n=y$Z[2],y$m=y$Z[4],y$H=y$Z[5],y$B=y$Z[6],y$D=y$Z[8],y$U=y$Z[9],y$k=y$Z[10],y$a=y$P[0]=Math.sqrt(y$O*y$O+y$s*y$s+y$n*y$n),y$G=y$P[1]=Math.sqrt(y$m*y$m+y$H*y$H+y$B*y$B),y$w=y$P[2]=Math.sqrt(y$D*y$D+y$U*y$U+y$k*y$k);if(y$d_.isZero(y$a)||y$d_.isZero(y$G)||y$d_.isZero(y$w))return y$u[1]=y$u[2]=y$u[3]=y$u[4]=y$u[6]=y$u[7]=y$u[8]=y$u[9]=y$u[11]=y$u[12]=y$u[13]=y$u[14]=0,y$u[0]=y$u[5]=y$u[10]=y$u[15]=1,!1;var y$z=y$A._tempVector0,y$L=y$z.elements;y$L[0]=y$D/y$w,y$L[1]=y$U/y$w,y$L[2]=y$k/y$w;var y$q=y$A._tempVector1,y$K=y$q.elements;y$K[0]=y$O/y$a,y$K[1]=y$s/y$a,y$K[2]=y$n/y$a;var y$M=y$A._tempVector2;y$Pc.cross(y$z,y$q,y$M);var y$f=y$A._tempVector1;return y$Pc.cross(y$M,y$z,y$f),y$u[3]=y$u[7]=y$u[11]=y$u[12]=y$u[13]=y$u[14]=0,y$u[15]=1,y$u[0]=y$f.x,y$u[1]=y$f.y,y$u[2]=y$f.z,y$u[4]=y$M.x,y$u[5]=y$M.y,y$u[6]=y$M.z,y$u[8]=y$z.x,y$u[9]=y$z.y,y$u[10]=y$z.z,y$u[0]*y$O+y$u[1]*y$s+y$u[2]*y$n<0&&(y$P[0]=-y$a),y$u[4]*y$m+y$u[5]*y$H+y$u[6]*y$B<0&&(y$P[1]=-y$G),y$u[8]*y$D+y$u[9]*y$U+y$u[10]*y$k<0&&(y$P[2]=-y$w),!0},y$_.decomposeYawPitchRoll=function(y$_){var y$c=y$_.elements,y$e=Math.asin(-this.elements[9]);y$c[1]=y$e,Math.cos(y$e)>y$d_.zeroTolerance?(y$c[2]=Math.atan2(this.elements[1],this.elements[5]),y$c[0]=Math.atan2(this.elements[8],this.elements[10])):(y$c[2]=Math.atan2(-this.elements[4],this.elements[0]),y$c[0]=0)},y$_.normalize=function(){var y$_=this.elements,y$c=y$_[0],y$e=y$_[1],y$Z=y$_[2],y$X=Math.sqrt(y$c*y$c+y$e*y$e+y$Z*y$Z);if(!y$X)return y$_[0]=0,y$_[1]=0,void(y$_[2]=0);1!=y$X&&(y$X=1/y$X,y$_[0]=y$c*y$X,y$_[1]=y$e*y$X,y$_[2]=y$Z*y$X)},y$_.transpose=function(){var y$_,y$c;return y$c=(y$_=this.elements)[1],y$_[1]=y$_[4],y$_[4]=y$c,y$c=y$_[2],y$_[2]=y$_[8],y$_[8]=y$c,y$c=y$_[3],y$_[3]=y$_[12],y$_[12]=y$c,y$c=y$_[6],y$_[6]=y$_[9],y$_[9]=y$c,y$c=y$_[7],y$_[7]=y$_[13],y$_[13]=y$c,y$c=y$_[11],y$_[11]=y$_[14],y$_[14]=y$c,this},y$_.invert=function(y$_){var y$c=this.elements,y$e=y$_.elements,y$Z=y$c[0],y$X=y$c[1],y$u=y$c[2],y$P=y$c[3],y$O=y$c[4],y$s=y$c[5],y$n=y$c[6],y$m=y$c[7],y$H=y$c[8],y$B=y$c[9],y$D=y$c[10],y$U=y$c[11],y$k=y$c[12],y$a=y$c[13],y$G=y$c[14],y$w=y$c[15],y$z=y$Z*y$s-y$X*y$O,y$L=y$Z*y$n-y$u*y$O,y$q=y$Z*y$m-y$P*y$O,y$K=y$X*y$n-y$u*y$s,y$M=y$X*y$m-y$P*y$s,y$f=y$u*y$m-y$P*y$n,y$A=y$H*y$a-y$B*y$k,y$v=y$H*y$G-y$D*y$k,y$r=y$H*y$w-y$U*y$k,y$C=y$B*y$G-y$D*y$a,y$y=y$B*y$w-y$U*y$a,y$$=y$D*y$w-y$U*y$G,y$T=y$z*y$$-y$L*y$y+y$q*y$C+y$K*y$r-y$M*y$v+y$f*y$A;0!==Math.abs(y$T)&&(y$T=1/y$T,y$e[0]=(y$s*y$$-y$n*y$y+y$m*y$C)*y$T,y$e[1]=(y$u*y$y-y$X*y$$-y$P*y$C)*y$T,y$e[2]=(y$a*y$f-y$G*y$M+y$w*y$K)*y$T,y$e[3]=(y$D*y$M-y$B*y$f-y$U*y$K)*y$T,y$e[4]=(y$n*y$r-y$O*y$$-y$m*y$v)*y$T,y$e[5]=(y$Z*y$$-y$u*y$r+y$P*y$v)*y$T,y$e[6]=(y$G*y$q-y$k*y$f-y$w*y$L)*y$T,y$e[7]=(y$H*y$f-y$D*y$q+y$U*y$L)*y$T,y$e[8]=(y$O*y$y-y$s*y$r+y$m*y$A)*y$T,y$e[9]=(y$X*y$r-y$Z*y$y-y$P*y$A)*y$T,y$e[10]=(y$k*y$M-y$a*y$q+y$w*y$z)*y$T,y$e[11]=(y$B*y$q-y$H*y$M-y$U*y$z)*y$T,y$e[12]=(y$s*y$v-y$O*y$C-y$n*y$A)*y$T,y$e[13]=(y$Z*y$C-y$X*y$v+y$u*y$A)*y$T,y$e[14]=(y$a*y$L-y$k*y$K-y$G*y$z)*y$T,y$e[15]=(y$H*y$K-y$B*y$L+y$D*y$z)*y$T)},y$_.identity=function(){var y$_=this.elements;y$_[1]=y$_[2]=y$_[3]=y$_[4]=y$_[6]=y$_[7]=y$_[8]=y$_[9]=y$_[11]=y$_[12]=y$_[13]=y$_[14]=0,y$_[0]=y$_[5]=y$_[10]=y$_[15]=1},y$_.cloneTo=function(y$_){var y$c,y$e,y$Z;if((y$e=this.elements)!==(y$Z=y$_.elements))for(y$c=0;y$c<16;++y$c)y$Z[y$c]=y$e[y$c]},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$_.getTranslationVector=function(y$_){var y$c=this.elements,y$e=y$_.elements;y$e[0]=y$c[12],y$e[1]=y$c[13],y$e[2]=y$c[14]},y$_.setTranslationVector=function(y$_){var y$c=this.elements,y$e=y$_.elements;y$c[12]=y$e[0],y$c[13]=y$e[1],y$c[14]=y$e[2]},y$_.getForward=function(y$_){var y$c=this.elements,y$e=y$_.elements;y$e[0]=-y$c[8],y$e[1]=-y$c[9],y$e[2]=-y$c[10]},y$_.setForward=function(y$_){var y$c=this.elements,y$e=y$_.elements;y$c[8]=-y$e[0],y$c[9]=-y$e[1],y$c[10]=-y$e[2]},y$A.createRotationX=function(y$_,y$c){var y$e=y$c.elements,y$Z=Math.sin(y$_),y$X=Math.cos(y$_);y$e[1]=y$e[2]=y$e[3]=y$e[4]=y$e[7]=y$e[8]=y$e[11]=y$e[12]=y$e[13]=y$e[14]=0,y$e[0]=y$e[15]=1,y$e[5]=y$e[10]=y$X,y$e[6]=y$Z,y$e[9]=-y$Z},y$A.createRotationY=function(y$_,y$c){var y$e=y$c.elements,y$Z=Math.sin(y$_),y$X=Math.cos(y$_);y$e[1]=y$e[3]=y$e[4]=y$e[6]=y$e[7]=y$e[9]=y$e[11]=y$e[12]=y$e[13]=y$e[14]=0,y$e[5]=y$e[15]=1,y$e[0]=y$e[10]=y$X,y$e[2]=-y$Z,y$e[8]=y$Z},y$A.createRotationZ=function(y$_,y$c){var y$e=y$c.elements,y$Z=Math.sin(y$_),y$X=Math.cos(y$_);y$e[2]=y$e[3]=y$e[6]=y$e[7]=y$e[8]=y$e[9]=y$e[11]=y$e[12]=y$e[13]=y$e[14]=0,y$e[10]=y$e[15]=1,y$e[0]=y$e[5]=y$X,y$e[1]=y$Z,y$e[4]=-y$Z},y$A.createRotationYawPitchRoll=function(y$_,y$c,y$e,y$Z){y$ec.createFromYawPitchRoll(y$_,y$c,y$e,y$A._tempQuaternion),y$A.createRotationQuaternion(y$A._tempQuaternion,y$Z)},y$A.createRotationAxis=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=Math.cos(y$c),y$s=Math.sin(y$c),y$n=y$X*y$X,y$m=y$u*y$u,y$H=y$P*y$P,y$B=y$X*y$u,y$D=y$X*y$P,y$U=y$u*y$P,y$k=y$e.elements;y$k[3]=y$k[7]=y$k[11]=y$k[12]=y$k[13]=y$k[14]=0,y$k[15]=1,y$k[0]=y$n+y$O*(1-y$n),y$k[1]=y$B-y$O*y$B+y$s*y$P,y$k[2]=y$D-y$O*y$D-y$s*y$u,y$k[4]=y$B-y$O*y$B-y$s*y$P,y$k[5]=y$m+y$O*(1-y$m),y$k[6]=y$U-y$O*y$U+y$s*y$X,y$k[8]=y$D-y$O*y$D+y$s*y$u,y$k[9]=y$U-y$O*y$U-y$s*y$X,y$k[10]=y$H+y$O*(1-y$H)},y$A.createRotationQuaternion=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$e[0],y$u=y$e[1],y$P=y$e[2],y$O=y$e[3],y$s=y$X*y$X,y$n=y$u*y$u,y$m=y$P*y$P,y$H=y$X*y$u,y$B=y$P*y$O,y$D=y$P*y$X,y$U=y$u*y$O,y$k=y$u*y$P,y$a=y$X*y$O;y$Z[3]=y$Z[7]=y$Z[11]=y$Z[12]=y$Z[13]=y$Z[14]=0,y$Z[15]=1,y$Z[0]=1-2*(y$n+y$m),y$Z[1]=2*(y$H+y$B),y$Z[2]=2*(y$D-y$U),y$Z[4]=2*(y$H-y$B),y$Z[5]=1-2*(y$m+y$s),y$Z[6]=2*(y$k+y$a),y$Z[8]=2*(y$D+y$U),y$Z[9]=2*(y$k-y$a),y$Z[10]=1-2*(y$n+y$s)},y$A.createTranslate=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;y$Z[4]=y$Z[8]=y$Z[1]=y$Z[9]=y$Z[2]=y$Z[6]=y$Z[3]=y$Z[7]=y$Z[11]=0,y$Z[0]=y$Z[5]=y$Z[10]=y$Z[15]=1,y$Z[12]=y$e[0],y$Z[13]=y$e[1],y$Z[14]=y$e[2]},y$A.createScaling=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;y$Z[0]=y$e[0],y$Z[5]=y$e[1],y$Z[10]=y$e[2],y$Z[1]=y$Z[4]=y$Z[8]=y$Z[12]=y$Z[9]=y$Z[13]=y$Z[2]=y$Z[6]=y$Z[14]=y$Z[3]=y$Z[7]=y$Z[11]=0,y$Z[15]=1},y$A.multiply=function(y$_,y$c,y$e){var y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m;for(y$X=y$e.elements,y$u=y$_.elements,y$X===(y$P=y$c.elements)&&(y$P=y$P.slice()),y$Z=0;y$Z<4;y$Z++)y$O=y$u[y$Z],y$s=y$u[y$Z+4],y$n=y$u[y$Z+8],y$m=y$u[y$Z+12],y$X[y$Z]=y$O*y$P[0]+y$s*y$P[1]+y$n*y$P[2]+y$m*y$P[3],y$X[y$Z+4]=y$O*y$P[4]+y$s*y$P[5]+y$n*y$P[6]+y$m*y$P[7],y$X[y$Z+8]=y$O*y$P[8]+y$s*y$P[9]+y$n*y$P[10]+y$m*y$P[11],y$X[y$Z+12]=y$O*y$P[12]+y$s*y$P[13]+y$n*y$P[14]+y$m*y$P[15]},y$A.createFromQuaternion=function(y$_,y$c){var y$e=y$c.elements,y$Z=y$_.elements,y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$Z[3],y$s=y$X+y$X,y$n=y$u+y$u,y$m=y$P+y$P,y$H=y$X*y$s,y$B=y$u*y$s,y$D=y$u*y$n,y$U=y$P*y$s,y$k=y$P*y$n,y$a=y$P*y$m,y$G=y$O*y$s,y$w=y$O*y$n,y$z=y$O*y$m;y$e[0]=1-y$D-y$a,y$e[1]=y$B+y$z,y$e[2]=y$U-y$w,y$e[3]=0,y$e[4]=y$B-y$z,y$e[5]=1-y$H-y$a,y$e[6]=y$k+y$G,y$e[7]=0,y$e[8]=y$U+y$w,y$e[9]=y$k-y$G,y$e[10]=1-y$H-y$D,y$e[11]=0,y$e[12]=0,y$e[13]=0,y$e[14]=0,y$e[15]=1},y$A.createAffineTransformation=function(y$_,y$c,y$e,y$Z){var y$X=y$_.elements,y$u=y$c.elements,y$P=y$e.elements,y$O=y$Z.elements,y$s=y$u[0],y$n=y$u[1],y$m=y$u[2],y$H=y$u[3],y$B=y$s+y$s,y$D=y$n+y$n,y$U=y$m+y$m,y$k=y$s*y$B,y$a=y$s*y$D,y$G=y$s*y$U,y$w=y$n*y$D,y$z=y$n*y$U,y$L=y$m*y$U,y$q=y$H*y$B,y$K=y$H*y$D,y$M=y$H*y$U,y$f=y$P[0],y$A=y$P[1],y$v=y$P[2];y$O[0]=(1-(y$w+y$L))*y$f,y$O[1]=(y$a+y$M)*y$f,y$O[2]=(y$G-y$K)*y$f,y$O[3]=0,y$O[4]=(y$a-y$M)*y$A,y$O[5]=(1-(y$k+y$L))*y$A,y$O[6]=(y$z+y$q)*y$A,y$O[7]=0,y$O[8]=(y$G+y$K)*y$v,y$O[9]=(y$z-y$q)*y$v,y$O[10]=(1-(y$k+y$w))*y$v,y$O[11]=0,y$O[12]=y$X[0],y$O[13]=y$X[1],y$O[14]=y$X[2],y$O[15]=1},y$A.createLookAt=function(y$_,y$c,y$e,y$Z){var y$X=y$Z.elements,y$u=y$A._tempVector0,y$P=y$A._tempVector1,y$O=y$A._tempVector2;y$Pc.subtract(y$_,y$c,y$O),y$Pc.normalize(y$O,y$O),y$Pc.cross(y$e,y$O,y$u),y$Pc.normalize(y$u,y$u),y$Pc.cross(y$O,y$u,y$P),y$Z.identity(),y$X[0]=y$u.x,y$X[4]=y$u.y,y$X[8]=y$u.z,y$X[1]=y$P.x,y$X[5]=y$P.y,y$X[9]=y$P.z,y$X[2]=y$O.x,y$X[6]=y$O.y,y$X[10]=y$O.z,y$X[12]=-y$Pc.dot(y$u,y$_),y$X[13]=-y$Pc.dot(y$P,y$_),y$X[14]=-y$Pc.dot(y$O,y$_)},y$A.createPerspective=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$X.elements,y$P=1/Math.tan(y$_/2),y$O=1/(y$e-y$Z);y$u[0]=y$P/y$c,y$u[5]=y$P,y$u[10]=(y$Z+y$e)*y$O,y$u[11]=-1,y$u[14]=2*y$Z*y$e*y$O,y$u[1]=y$u[2]=y$u[3]=y$u[4]=y$u[6]=y$u[7]=y$u[8]=y$u[9]=y$u[12]=y$u[13]=y$u[15]=0},y$A.createOrthoOffCenterRH=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){var y$O=y$P.elements,y$s=1/(y$_-y$c),y$n=1/(y$e-y$Z),y$m=1/(y$X-y$u);y$O[1]=y$O[2]=y$O[3]=y$O[4]=y$O[6]=y$O[7]=y$O[8]=y$O[9]=y$O[11]=0,y$O[15]=1,y$O[0]=-2*y$s,y$O[5]=-2*y$n,y$O[10]=2*y$m,y$O[12]=(y$_+y$c)*y$s,y$O[13]=(y$Z+y$e)*y$n,y$O[14]=(y$u+y$X)*y$m},y$A.translation=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;y$Z[0]=y$Z[5]=y$Z[10]=y$Z[15]=1,y$Z[12]=y$e[0],y$Z[13]=y$e[1],y$Z[14]=y$e[2]},y$H(y$A,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new y$A},"_tempVector0",function(){return this._tempVector0=new y$Pc},"_tempVector1",function(){return this._tempVector1=new y$Pc},"_tempVector2",function(){return this._tempVector2=new y$Pc},"_tempQuaternion",function(){return this._tempQuaternion=new y$ec},"DEFAULT",function(){return this.DEFAULT=new y$A},"ZERO",function(){return this.ZERO=new y$A(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),y$A}(),y$cc=(function(){function y$z(y$_,y$c){this.extents=null,this.transformation=null,this.extents=y$_,this.transformation=y$c}y$D(y$z,"laya.d3.math.OrientedBoundBox");var y$_=y$z.prototype;y$_.getCorners=function(y$_){var y$c=y$z._tempV30.elements,y$e=y$z._tempV31.elements,y$Z=y$z._tempV32.elements,y$X=this.extents.elements;y$c[0]=y$X[0],y$c[1]=y$c[2]=0,y$e[1]=y$X[1],y$e[0]=y$e[2]=0,y$Z[2]=y$X[2],y$Z[0]=y$Z[1]=0,y$Pc.TransformNormal(y$z._tempV30,this.transformation,y$z._tempV30),y$Pc.TransformNormal(y$z._tempV31,this.transformation,y$z._tempV31),y$Pc.TransformNormal(y$z._tempV32,this.transformation,y$z._tempV32);var y$u=y$z._tempV33;this.transformation.getTranslationVector(y$u),y$_.length=8,y$Pc.add(y$u,y$z._tempV30,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV32,y$_[0]),y$Pc.add(y$u,y$z._tempV30,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV32,y$_[1]),y$Pc.subtract(y$u,y$z._tempV30,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV32,y$_[2]),y$Pc.subtract(y$u,y$z._tempV30,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV32,y$_[3]),y$Pc.add(y$u,y$z._tempV30,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV32,y$_[4]),y$Pc.add(y$u,y$z._tempV30,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV32,y$_[5]),y$Pc.subtract(y$u,y$z._tempV30,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV32,y$_[6]),y$Pc.subtract(y$u,y$z._tempV30,y$z._tempV34),y$Pc.subtract(y$z._tempV34,y$z._tempV31,y$z._tempV34),y$Pc.add(y$z._tempV34,y$z._tempV32,y$_[7])},y$_.transform=function(y$_){y$_c.multiply(this.transformation,y$_,this.transformation)},y$_.scale=function(y$_){y$Pc.multiply(this.extents,y$_,this.extents)},y$_.translate=function(y$_){this.transformation.getTranslationVector(y$z._tempV30),y$Pc.add(y$z._tempV30,y$_,y$z._tempV31),this.transformation.setTranslationVector(y$z._tempV31)},y$_.Size=function(y$_){y$Pc.scale(this.extents,2,y$_)},y$_.getSize=function(y$_){var y$c=this.extents.elements;y$z._tempV30.x=y$c[0],y$z._tempV31.y=y$c[1],y$z._tempV32.z=y$c[2],y$Pc.TransformNormal(y$z._tempV30,this.transformation,y$z._tempV30),y$Pc.TransformNormal(y$z._tempV31,this.transformation,y$z._tempV31),y$Pc.TransformNormal(y$z._tempV31,this.transformation,y$z._tempV32);var y$e=y$_.elements;y$e[0]=y$Pc.scalarLength(y$z._tempV30),y$e[1]=y$Pc.scalarLength(y$z._tempV31),y$e[2]=y$Pc.scalarLength(y$z._tempV32)},y$_.getSizeSquared=function(y$_){var y$c=this.extents.elements;y$z._tempV30.x=y$c[0],y$z._tempV31.y=y$c[1],y$z._tempV32.z=y$c[2],y$Pc.TransformNormal(y$z._tempV30,this.transformation,y$z._tempV30),y$Pc.TransformNormal(y$z._tempV31,this.transformation,y$z._tempV31),y$Pc.TransformNormal(y$z._tempV31,this.transformation,y$z._tempV32);var y$e=y$_.elements;y$e[0]=y$Pc.scalarLengthSquared(y$z._tempV30),y$e[1]=y$Pc.scalarLengthSquared(y$z._tempV31),y$e[2]=y$Pc.scalarLengthSquared(y$z._tempV32)},y$_.getCenter=function(y$_){this.transformation.getTranslationVector(y$_)},y$_.containsPoint=function(y$_){var y$c=this.extents.elements,y$e=y$c[0],y$Z=y$c[1],y$X=y$c[2];this.transformation.invert(y$z._tempM0),y$Pc.transformCoordinate(y$_,y$z._tempM0,y$z._tempV30);var y$u=y$z._tempV30.elements,y$P=Math.abs(y$u[0]),y$O=Math.abs(y$u[1]),y$s=Math.abs(y$u[2]);return y$d_.nearEqual(y$P,y$e)&&y$d_.nearEqual(y$O,y$Z)&&y$d_.nearEqual(y$s,y$X)?2:y$P<y$e&&y$O<y$Z&&y$s<y$X?1:0},y$_.containsPoints=function(y$_){var y$c=this.extents.elements,y$e=y$c[0],y$Z=y$c[1],y$X=y$c[2];this.transformation.invert(y$z._tempM0);for(var y$u=!0,y$P=!1,y$O=0;y$O<y$_.length;y$O++){y$Pc.transformCoordinate(y$_[y$O],y$z._tempM0,y$z._tempV30);var y$s=y$z._tempV30.elements,y$n=Math.abs(y$s[0]),y$m=Math.abs(y$s[1]),y$H=Math.abs(y$s[2]);y$d_.nearEqual(y$n,y$e)&&y$d_.nearEqual(y$m,y$Z)&&y$d_.nearEqual(y$H,y$X)&&(y$P=!0),y$n<y$e&&y$m<y$Z&&y$H<y$X?y$P=!0:y$u=!1}return y$u?1:y$P?2:0},y$_.containsSphere=function(y$_,y$c){void 0===y$c&&(y$c=!1);var y$e=this.extents.elements,y$Z=y$e[0],y$X=y$e[1],y$u=y$e[2],y$P=y$_.radius;this.transformation.invert(y$z._tempM0),y$Pc.transformCoordinate(y$_.center,y$z._tempM0,y$z._tempV30);var y$O=NaN;if(y$O=y$c?y$P:(y$Pc.scale(y$Pc.UnitX,y$P,y$z._tempV31),y$Pc.TransformNormal(y$z._tempV31,y$z._tempM0,y$z._tempV31),y$Pc.scalarLength(y$z._tempV31)),y$Pc.scale(this.extents,-1,y$z._tempV32),y$Pc.Clamp(y$z._tempV30,y$z._tempV32,this.extents,y$z._tempV33),y$O*y$O<y$Pc.distanceSquared(y$z._tempV30,y$z._tempV33))return 0;var y$s=y$z._tempV30.elements,y$n=y$s[0],y$m=y$s[1],y$H=y$s[2],y$B=y$z._tempV32.elements,y$D=y$B[0],y$U=y$B[1],y$k=y$B[2];return y$D+y$O<=y$n&&y$n<=y$Z-y$O&&y$O<y$Z-y$D&&y$U+y$O<=y$m&&y$m<=y$X-y$O&&y$O<y$X-y$U&&y$k+y$O<=y$H&&y$H<=y$u-y$O&&y$O<y$u-y$k?1:2},y$_.containsOrientedBoundBox=function(y$_){var y$c=0,y$e=0;y$_.getCorners(y$z._corners);var y$Z=this.containsPoints(y$z._corners);if(0!=y$Z)return y$Z;var y$X=this.extents.elements;y$_.extents.cloneTo(y$z._tempV35);var y$u=y$z._tempV35.elements;y$z._getRows(this.transformation,y$z._rows1),y$z._getRows(y$_.transformation,y$z._rows2);var y$P=NaN;for(y$c=0;y$c<4;y$c++)for(y$e=0;y$e<4;y$e++)3==y$c||3==y$e?(y$z._tempM0.setElementByRowColumn(y$c,y$e,0),y$z._tempM1.setElementByRowColumn(y$c,y$e,0)):(y$P=y$Pc.dot(y$z._rows1[y$c],y$z._rows2[y$e]),y$z._tempM0.setElementByRowColumn(y$c,y$e,y$P),y$z._tempM1.setElementByRowColumn(y$c,y$e,Math.abs(y$P)));y$_.getCenter(y$z._tempV34),this.getCenter(y$z._tempV36),y$Pc.subtract(y$z._tempV34,y$z._tempV36,y$z._tempV30);var y$O=y$z._tempV31.elements;y$O[0]=y$Pc.dot(y$z._tempV30,y$z._rows1[0]),y$O[1]=y$Pc.dot(y$z._tempV30,y$z._rows1[1]),y$O[2]=y$Pc.dot(y$z._tempV30,y$z._rows1[2]);var y$s=y$z._tempV32.elements,y$n=y$z._tempV33.elements;for(y$c=0;y$c<3;y$c++)if(y$s[0]=y$z._tempM1.getElementByRowColumn(y$c,0),y$s[1]=y$z._tempM1.getElementByRowColumn(y$c,1),y$s[2]=y$z._tempM1.getElementByRowColumn(y$c,2),y$X[y$c]+y$Pc.dot(y$z._tempV35,y$z._tempV32)<Math.abs(y$O[y$c]))return 0;for(y$e=0;y$e<3;y$e++)if(y$s[0]=y$z._tempM1.getElementByRowColumn(0,y$e),y$s[1]=y$z._tempM1.getElementByRowColumn(1,y$e),y$s[2]=y$z._tempM1.getElementByRowColumn(2,y$e),y$n[0]=y$z._tempM0.getElementByRowColumn(0,y$e),y$n[1]=y$z._tempM0.getElementByRowColumn(1,y$e),y$n[2]=y$z._tempM0.getElementByRowColumn(2,y$e),y$Pc.dot(this.extents,y$z._tempV32)+y$u[y$e]<Math.abs(y$Pc.dot(y$z._tempV31,y$z._tempV33)))return 0;for(y$c=0;y$c<3;y$c++)for(y$e=0;y$e<3;y$e++){var y$m=(y$c+1)%3,y$H=(y$c+2)%3,y$B=(y$e+1)%3,y$D=(y$e+2)%3;if(y$X[y$m]*y$z._tempM1.getElementByRowColumn(y$H,y$e)+y$X[y$H]*y$z._tempM1.getElementByRowColumn(y$m,y$e)+(y$u[y$B]*y$z._tempM1.getElementByRowColumn(y$c,y$D)+y$u[y$D]*y$z._tempM1.getElementByRowColumn(y$c,y$B))<Math.abs(y$O[y$H]*y$z._tempM0.getElementByRowColumn(y$m,y$e)-y$O[y$m]*y$z._tempM0.getElementByRowColumn(y$H,y$e)))return 0}return 2},y$_.containsLine=function(y$_,y$c){y$z._corners[0]=y$_,y$z._corners[1]=y$c;var y$e=this.containsPoints(y$z._corners);if(0!=y$e)return y$e;var y$Z=this.extents.elements,y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2];this.transformation.invert(y$z._tempM0),y$Pc.transformCoordinate(y$_,y$z._tempM0,y$z._tempV30),y$Pc.transformCoordinate(y$c,y$z._tempM0,y$z._tempV31),y$Pc.add(y$z._tempV30,y$z._tempV31,y$z._tempV32),y$Pc.scale(y$z._tempV32,.5,y$z._tempV32),y$Pc.subtract(y$z._tempV30,y$z._tempV32,y$z._tempV33);var y$O=y$z._tempV33.elements,y$s=y$O[0],y$n=y$O[1],y$m=y$O[2],y$H=y$z._tempV34.elements,y$B=y$H[0]=Math.abs(y$O[0]),y$D=y$H[1]=Math.abs(y$O[1]),y$U=y$H[2]=Math.abs(y$O[2]),y$k=y$z._tempV32.elements,y$a=y$k[0],y$G=y$k[1],y$w=y$k[2];return Math.abs(y$a)>y$X+y$B?0:Math.abs(y$G)>y$u+y$D?0:Math.abs(y$w)>y$P+y$U?0:Math.abs(y$G*y$m-y$w*y$n)>y$u*y$U+y$P*y$D?0:Math.abs(y$a*y$m-y$w*y$s)>y$X*y$U+y$P*y$B?0:Math.abs(y$a*y$n-y$G*y$s)>y$X*y$D+y$u*y$B?0:2},y$_.containsBoundBox=function(y$_){var y$c=0,y$e=0,y$Z=y$_.min,y$X=y$_.max;y$_.getCorners(y$z._corners);var y$u=this.containsPoints(y$z._corners);if(0!=y$u)return y$u;y$Pc.subtract(y$X,y$Z,y$z._tempV30),y$Pc.scale(y$z._tempV30,.5,y$z._tempV30),y$Pc.add(y$Z,y$z._tempV30,y$z._tempV30),y$Pc.subtract(y$X,y$z._tempV30,y$z._tempV31);var y$P=this.extents.elements,y$O=y$z._tempV31.elements;y$z._getRows(this.transformation,y$z._rows1),this.transformation.invert(y$z._tempM0);for(y$c=0;y$c<3;y$c++)for(y$e=0;y$e<3;y$e++)y$z._tempM1.setElementByRowColumn(y$c,y$e,Math.abs(y$z._tempM0.getElementByRowColumn(y$c,y$e)));this.getCenter(y$z._tempV35),y$Pc.subtract(y$z._tempV30,y$z._tempV35,y$z._tempV32);var y$s=y$z._tempV31.elements;y$s[0]=y$Pc.dot(y$z._tempV32,y$z._rows1[0]),y$s[1]=y$Pc.dot(y$z._tempV32,y$z._rows1[1]),y$s[2]=y$Pc.dot(y$z._tempV32,y$z._rows1[2]);var y$n=y$z._tempV33.elements,y$m=y$z._tempV34.elements;for(y$c=0;y$c<3;y$c++)if(y$n[0]=y$z._tempM1.getElementByRowColumn(y$c,0),y$n[1]=y$z._tempM1.getElementByRowColumn(y$c,1),y$n[2]=y$z._tempM1.getElementByRowColumn(y$c,2),y$P[y$c]+y$Pc.dot(y$z._tempV31,y$z._tempV33)<Math.abs(y$s[y$c]))return 0;for(y$e=0;y$e<3;y$e++)if(y$n[0]=y$z._tempM1.getElementByRowColumn(0,y$e),y$n[1]=y$z._tempM1.getElementByRowColumn(1,y$e),y$n[2]=y$z._tempM1.getElementByRowColumn(2,y$e),y$m[0]=y$z._tempM0.getElementByRowColumn(0,y$e),y$m[1]=y$z._tempM0.getElementByRowColumn(1,y$e),y$m[2]=y$z._tempM0.getElementByRowColumn(2,y$e),y$Pc.dot(this.extents,y$z._tempV33)+y$O[y$e]<Math.abs(y$Pc.dot(y$z._tempV31,y$z._tempV34)))return 0;for(y$c=0;y$c<3;y$c++)for(y$e=0;y$e<3;y$e++){var y$H=(y$c+1)%3,y$B=(y$c+2)%3,y$D=(y$e+1)%3,y$U=(y$e+2)%3;if(y$P[y$H]*y$z._tempM1.getElementByRowColumn(y$B,y$e)+y$P[y$B]*y$z._tempM1.getElementByRowColumn(y$H,y$e)+(y$O[y$D]*y$z._tempM1.getElementByRowColumn(y$c,y$U)+y$O[y$U]*y$z._tempM1.getElementByRowColumn(y$c,y$D))<Math.abs(y$s[y$B]*y$z._tempM0.getElementByRowColumn(y$H,y$e)-y$s[y$H]*y$z._tempM0.getElementByRowColumn(y$B,y$e)))return 0}return 2},y$_.intersectsRay=function(y$_,y$c){y$Pc.scale(this.extents,-1,y$z._tempV30),this.transformation.invert(y$z._tempM0),y$Pc.TransformNormal(y$_.direction,y$z._tempM0,y$z._ray.direction),y$Pc.transformCoordinate(y$_.origin,y$z._tempM0,y$z._ray.origin),y$z._boxBound1.min=y$z._tempV30,y$z._boxBound1.max=this.extents;var y$e=Collision.intersectsRayAndBoxRP(y$z._ray,y$z._boxBound1,y$c);return-1!==y$e&&y$Pc.transformCoordinate(y$c,this.transformation,y$c),y$e},y$_._getLocalCorners=function(y$_){y$_.length=8;var y$c=this.extents.elements;y$z._tempV30.x=y$c[0],y$z._tempV31.y=y$c[1],y$z._tempV32.z=y$c[2],y$Pc.add(y$z._tempV30,y$z._tempV31,y$z._tempV33),y$Pc.add(y$z._tempV33,y$z._tempV32,y$_[0]),y$Pc.add(y$z._tempV30,y$z._tempV31,y$z._tempV33),y$Pc.subtract(y$z._tempV33,y$z._tempV32,y$_[1]),y$Pc.subtract(y$z._tempV31,y$z._tempV30,y$z._tempV33),y$Pc.subtract(y$z._tempV33,y$z._tempV30,y$_[2]),y$Pc.subtract(y$z._tempV31,y$z._tempV30,y$z._tempV33),y$Pc.add(y$z._tempV33,y$z._tempV32,y$_[3]),y$Pc.subtract(y$z._tempV30,y$z._tempV31,y$z._tempV33),y$Pc.add(y$z._tempV33,y$z._tempV32,y$_[4]),y$Pc.subtract(y$z._tempV30,y$z._tempV31,y$z._tempV33),y$Pc.subtract(y$z._tempV33,y$z._tempV32,y$_[5]),y$Pc.scale(y$_[0],-1,y$_[6]),y$Pc.subtract(y$z._tempV32,y$z._tempV30,y$z._tempV33),y$Pc.subtract(y$z._tempV33,y$z._tempV31,y$_[7])},y$_.equals=function(y$_){return this.extents==y$_.extents&&this.transformation==y$_.transformation},y$_.cloneTo=function(y$_){var y$c=y$_;this.extents.cloneTo(y$c.extents),this.transformation.cloneTo(y$c.transformation)},y$z.createByBoundBox=function(y$_,y$c){var y$e=y$_.min,y$Z=y$_.max;y$Pc.subtract(y$Z,y$e,y$z._tempV30),y$Pc.scale(y$z._tempV30,.5,y$z._tempV30),y$Pc.add(y$e,y$z._tempV30,y$z._tempV31),y$Pc.subtract(y$Z,y$z._tempV31,y$z._tempV32),y$_c.translation(y$z._tempV31,y$z._tempM0);var y$X=y$z._tempV32.clone(),y$u=y$z._tempM0.clone();y$c.extents=y$X,y$c.transformation=y$u},y$z.createByMinAndMaxVertex=function(y$_,y$c){return y$Pc.subtract(y$c,y$_,y$z._tempV30),y$Pc.scale(y$z._tempV30,.5,y$z._tempV30),y$Pc.add(y$_,y$z._tempV30,y$z._tempV31),y$Pc.subtract(y$c,y$z._tempV31,y$z._tempV32),y$_c.translation(y$z._tempV31,y$z._tempM0),new y$z(y$z._tempV32,y$z._tempM0)},y$z._getRows=function(y$_,y$c){y$c.length=3;var y$e=y$_.elements,y$Z=y$c[0].elements;y$Z[0]=y$e[0],y$Z[1]=y$e[1],y$Z[2]=y$e[2];var y$X=y$c[1].elements;y$X[0]=y$e[4],y$X[1]=y$e[5],y$X[2]=y$e[6];var y$u=y$c[2].elements;y$u[0]=y$e[8],y$u[1]=y$e[9],y$u[2]=y$e[10]},y$z.getObbtoObbMatrix4x4=function(y$_,y$c,y$e,y$Z){var y$X=y$_.transformation,y$u=y$c.transformation;if(y$e){y$z._getRows(y$X,y$z._rows1),y$z._getRows(y$u,y$z._rows2);for(var y$P=0;y$P<3;y$P++)for(var y$O=0;y$O<3;y$O++)y$Z.setElementByRowColumn(y$P,y$O,y$Pc.dot(y$z._rows2[y$P],y$z._rows1[y$O]));y$c.getCenter(y$z._tempV30),y$_.getCenter(y$z._tempV31),y$Pc.subtract(y$z._tempV30,y$z._tempV31,y$z._tempV32);var y$s=y$Z.elements;y$s[12]=y$Pc.dot(y$z._tempV32,y$z._rows1[0]),y$s[13]=y$Pc.dot(y$z._tempV32,y$z._rows1[1]),y$s[14]=y$Pc.dot(y$z._tempV32,y$z._rows1[2]),y$s[15]=1}else y$X.invert(y$z._tempM0),y$_c.multiply(y$u,y$z._tempM0,y$Z)},y$z.merge=function(y$_,y$c,y$e){var y$Z=y$_.extents,y$X=y$_.transformation;y$z.getObbtoObbMatrix4x4(y$_,y$c,y$e,y$z._tempM0),y$c._getLocalCorners(y$z._corners),y$Pc.transformCoordinate(y$z._corners[0],y$z._tempM0,y$z._corners[0]),y$Pc.transformCoordinate(y$z._corners[1],y$z._tempM0,y$z._corners[1]),y$Pc.transformCoordinate(y$z._corners[2],y$z._tempM0,y$z._corners[2]),y$Pc.transformCoordinate(y$z._corners[3],y$z._tempM0,y$z._corners[3]),y$Pc.transformCoordinate(y$z._corners[4],y$z._tempM0,y$z._corners[4]),y$Pc.transformCoordinate(y$z._corners[5],y$z._tempM0,y$z._corners[5]),y$Pc.transformCoordinate(y$z._corners[6],y$z._tempM0,y$z._corners[6]),y$Pc.transformCoordinate(y$z._corners[7],y$z._tempM0,y$z._corners[7]),y$Pc.scale(y$Z,-1,y$z._boxBound1.min),y$Z.cloneTo(y$z._boxBound1.max),y$E_.createfromPoints(y$z._corners,y$z._boxBound2),y$E_.merge(y$z._boxBound2,y$z._boxBound1,y$z._boxBound3);var y$u=y$z._boxBound3.min,y$P=y$z._boxBound3.max;y$Pc.subtract(y$P,y$u,y$z._tempV30),y$Pc.scale(y$z._tempV30,.5,y$z._tempV30),y$Pc.add(y$u,y$z._tempV30,y$z._tempV32),y$Pc.subtract(y$P,y$z._tempV32,y$Z),y$Pc.transformCoordinate(y$z._tempV32,y$X,y$z._tempV33)},y$H(y$z,["_tempV30",function(){return this._tempV30=new y$Pc},"_tempV31",function(){return this._tempV31=new y$Pc},"_tempV32",function(){return this._tempV32=new y$Pc},"_tempV33",function(){return this._tempV33=new y$Pc},"_tempV34",function(){return this._tempV34=new y$Pc},"_tempV35",function(){return this._tempV35=new y$Pc},"_tempV36",function(){return this._tempV36=new y$Pc},"_tempM0",function(){return this._tempM0=new y$_c},"_tempM1",function(){return this._tempM1=new y$_c},"_corners",function(){return this._corners=[new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc]},"_rows1",function(){return this._rows1=[new y$Pc,new y$Pc,new y$Pc]},"_rows2",function(){return this._rows2=[new y$Pc,new y$Pc,new y$Pc]},"_ray",function(){return this._ray=new y$Xc(new y$Pc,new y$Pc)},"_boxBound1",function(){return this._boxBound1=new y$E_(new y$Pc,new y$Pc)},"_boxBound2",function(){return this._boxBound2=new y$E_(new y$Pc,new y$Pc)},"_boxBound3",function(){return this._boxBound3=new y$E_(new y$Pc,new y$Pc)}])}(),function(){function y$q(y$_,y$c){this.normal=null,this.distance=NaN,void 0===y$c&&(y$c=0),this.normal=y$_,this.distance=y$c}return y$D(y$q,"laya.d3.math.Plane"),y$q.prototype.normalize=function(){var y$_=this.normal.elements,y$c=y$_[0],y$e=y$_[1],y$Z=y$_[2],y$X=1/Math.sqrt(y$c*y$c+y$e*y$e+y$Z*y$Z);y$_[0]=y$c*y$X,y$_[1]=y$e*y$X,y$_[2]=y$Z*y$X,this.distance*=y$X},y$q.createPlaneBy3P=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$c.elements,y$u=y$e.elements,y$P=y$X[0]-y$Z[0],y$O=y$X[1]-y$Z[1],y$s=y$X[2]-y$Z[2],y$n=y$u[0]-y$Z[0],y$m=y$u[1]-y$Z[1],y$H=y$u[2]-y$Z[2],y$B=y$O*y$H-y$s*y$m,y$D=y$s*y$n-y$P*y$H,y$U=y$P*y$m-y$O*y$n,y$k=1/Math.sqrt(y$B*y$B+y$D*y$D+y$U*y$U),y$a=y$B*y$k,y$G=y$D*y$k,y$w=y$U*y$k,y$z=y$q._TEMPVec3.elements;y$z[0]=y$a,y$z[1]=y$G,y$z[2]=y$w;var y$L=-(y$a*y$Z[0]+y$G*y$Z[1]+y$w*y$Z[2]);return new y$q(y$q._TEMPVec3,y$L)},y$q.PlaneIntersectionType_Back=0,y$q.PlaneIntersectionType_Front=1,y$q.PlaneIntersectionType_Intersecting=2,y$H(y$q,["_TEMPVec3",function(){return this._TEMPVec3=new y$Pc}]),y$q}()),y$ec=function(){function y$X(y$_,y$c,y$e,y$Z){this.elements=new Float32Array(4),void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=1),this.elements[0]=y$_,this.elements[1]=y$c,this.elements[2]=y$e,this.elements[3]=y$Z}y$D(y$X,"laya.d3.math.Quaternion");var y$_=y$X.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.scaling=function(y$_,y$c){var y$e=y$c.elements,y$Z=this.elements;y$e[0]=y$Z[0]*y$_,y$e[1]=y$Z[1]*y$_,y$e[2]=y$Z[2]*y$_,y$e[3]=y$Z[3]*y$_},y$_.normalize=function(y$_){var y$c=y$_.elements,y$e=this.elements,y$Z=y$e[0],y$X=y$e[1],y$u=y$e[2],y$P=y$e[3],y$O=y$Z*y$Z+y$X*y$X+y$u*y$u+y$P*y$P;0<y$O&&(y$O=1/Math.sqrt(y$O),y$c[0]=y$Z*y$O,y$c[1]=y$X*y$O,y$c[2]=y$u*y$O,y$c[3]=y$P*y$O)},y$_.length=function(){var y$_=this.elements,y$c=y$_[0],y$e=y$_[1],y$Z=y$_[2],y$X=y$_[3];return Math.sqrt(y$c*y$c+y$e*y$e+y$Z*y$Z+y$X*y$X)},y$_.rotateX=function(y$_,y$c){var y$e=y$c.elements,y$Z=this.elements;y$_*=.5;var y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$Z[3],y$s=Math.sin(y$_),y$n=Math.cos(y$_);y$e[0]=y$X*y$n+y$O*y$s,y$e[1]=y$u*y$n+y$P*y$s,y$e[2]=y$P*y$n-y$u*y$s,y$e[3]=y$O*y$n-y$X*y$s},y$_.rotateY=function(y$_,y$c){var y$e=y$c.elements,y$Z=this.elements;y$_*=.5;var y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$Z[3],y$s=Math.sin(y$_),y$n=Math.cos(y$_);y$e[0]=y$X*y$n-y$P*y$s,y$e[1]=y$u*y$n+y$O*y$s,y$e[2]=y$P*y$n+y$X*y$s,y$e[3]=y$O*y$n-y$u*y$s},y$_.rotateZ=function(y$_,y$c){var y$e=y$c.elements,y$Z=this.elements;y$_*=.5;var y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$Z[3],y$s=Math.sin(y$_),y$n=Math.cos(y$_);y$e[0]=y$X*y$n+y$u*y$s,y$e[1]=y$u*y$n-y$X*y$s,y$e[2]=y$P*y$n+y$O*y$s,y$e[3]=y$O*y$n-y$P*y$s},y$_.getYawPitchRoll=function(y$_){y$Pc.transformQuat(y$Pc.ForwardRH,this,y$X.TEMPVector31),y$Pc.transformQuat(y$Pc.Up,this,y$X.TEMPVector32);var y$c=y$X.TEMPVector32.elements;y$X.angleTo(y$Pc.ZERO,y$X.TEMPVector31,y$X.TEMPVector33);var y$e=y$X.TEMPVector33.elements;y$e[0]==Math.PI/2?(y$e[1]=y$X.arcTanAngle(y$c[2],y$c[0]),y$e[2]=0):y$e[0]==-Math.PI/2?(y$e[1]=y$X.arcTanAngle(-y$c[2],-y$c[0]),y$e[2]=0):(y$_c.createRotationY(-y$e[1],y$X.TEMPMatrix0),y$_c.createRotationX(-y$e[0],y$X.TEMPMatrix1),y$Pc.transformCoordinate(y$X.TEMPVector32,y$X.TEMPMatrix0,y$X.TEMPVector32),y$Pc.transformCoordinate(y$X.TEMPVector32,y$X.TEMPMatrix1,y$X.TEMPVector32),y$e[2]=y$X.arcTanAngle(y$c[1],-y$c[0])),y$e[1]<=-Math.PI&&(y$e[1]=Math.PI),y$e[2]<=-Math.PI&&(y$e[2]=Math.PI),y$e[1]>=Math.PI&&y$e[2]>=Math.PI&&(y$e[1]=0,y$e[2]=0,y$e[0]=Math.PI-y$e[0]);var y$Z=y$_.elements;y$Z[0]=y$e[1],y$Z[1]=y$e[0],y$Z[2]=y$e[2]},y$_.invert=function(y$_){var y$c=y$_.elements,y$e=this.elements,y$Z=y$e[0],y$X=y$e[1],y$u=y$e[2],y$P=y$e[3],y$O=y$Z*y$Z+y$X*y$X+y$u*y$u+y$P*y$P,y$s=y$O?1/y$O:0;y$c[0]=-y$Z*y$s,y$c[1]=-y$X*y$s,y$c[2]=-y$u*y$s,y$c[3]=y$P*y$s},y$_.identity=function(){var y$_=this.elements;y$_[0]=0,y$_[1]=0,y$_[2]=0,y$_[3]=1},y$_.fromArray=function(y$_,y$c){void 0===y$c&&(y$c=0),this.elements[0]=y$_[y$c+0],this.elements[1]=y$_[y$c+1],this.elements[2]=y$_[y$c+2],this.elements[3]=y$_[y$c+3]},y$_.cloneTo=function(y$_){var y$c,y$e,y$Z;if((y$e=this.elements)!==(y$Z=y$_.elements))for(y$c=0;y$c<4;++y$c)y$Z[y$c]=y$e[y$c]},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$_.equals=function(y$_){var y$c=this.elements,y$e=y$_.elements;return y$d_.nearEqual(y$c[0],y$e[0])&&y$d_.nearEqual(y$c[1],y$e[1])&&y$d_.nearEqual(y$c[2],y$e[2])&&y$d_.nearEqual(y$c[3],y$e[3])},y$_.lengthSquared=function(){var y$_=this.elements[0],y$c=this.elements[1],y$e=this.elements[2],y$Z=this.elements[3];return y$_*y$_+y$c*y$c+y$e*y$e+y$Z*y$Z},y$U(0,y$_,"x",function(){return this.elements[0]}),y$U(0,y$_,"y",function(){return this.elements[1]}),y$U(0,y$_,"z",function(){return this.elements[2]}),y$U(0,y$_,"w",function(){return this.elements[3]}),y$X.createFromYawPitchRoll=function(y$_,y$c,y$e,y$Z){var y$X=.5*y$e,y$u=.5*y$c,y$P=.5*y$_,y$O=Math.sin(y$X),y$s=Math.cos(y$X),y$n=Math.sin(y$u),y$m=Math.cos(y$u),y$H=Math.sin(y$P),y$B=Math.cos(y$P),y$D=y$Z.elements;y$D[0]=y$B*y$n*y$s+y$H*y$m*y$O,y$D[1]=y$H*y$m*y$s-y$B*y$n*y$O,y$D[2]=y$B*y$m*y$O-y$H*y$n*y$s,y$D[3]=y$B*y$m*y$s+y$H*y$n*y$O},y$X.multiply=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$c.elements,y$u=y$e.elements,y$P=y$Z[0],y$O=y$Z[1],y$s=y$Z[2],y$n=y$Z[3],y$m=y$X[0],y$H=y$X[1],y$B=y$X[2],y$D=y$X[3],y$U=y$O*y$B-y$s*y$H,y$k=y$s*y$m-y$P*y$B,y$a=y$P*y$H-y$O*y$m,y$G=y$P*y$m+y$O*y$H+y$s*y$B;y$u[0]=y$P*y$D+y$m*y$n+y$U,y$u[1]=y$O*y$D+y$H*y$n+y$k,y$u[2]=y$s*y$D+y$B*y$n+y$a,y$u[3]=y$n*y$D-y$G},y$X.arcTanAngle=function(y$_,y$c){return 0==y$_?1==y$c?Math.PI/2:-Math.PI/2:0<y$_?Math.atan(y$c/y$_):y$_<0?0<y$c?Math.atan(y$c/y$_)+Math.PI:Math.atan(y$c/y$_)-Math.PI:0},y$X.angleTo=function(y$_,y$c,y$e){y$Pc.subtract(y$c,y$_,y$X.TEMPVector30),y$Pc.normalize(y$X.TEMPVector30,y$X.TEMPVector30),y$e.elements[0]=Math.asin(y$X.TEMPVector30.y),y$e.elements[1]=y$X.arcTanAngle(-y$X.TEMPVector30.z,-y$X.TEMPVector30.x)},y$X.createFromAxisAngle=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements;y$c*=.5;var y$u=Math.sin(y$c);y$Z[0]=y$u*y$X[0],y$Z[1]=y$u*y$X[1],y$Z[2]=y$u*y$X[2],y$Z[3]=Math.cos(y$c)},y$X.createFromMatrix3x3=function(y$_,y$c){var y$e,y$Z=y$c.elements,y$X=y$_.elements,y$u=y$X[0]+y$X[4]+y$X[8];if(0<y$u)y$e=Math.sqrt(y$u+1),y$Z[3]=.5*y$e,y$e=.5/y$e,y$Z[0]=(y$X[5]-y$X[7])*y$e,y$Z[1]=(y$X[6]-y$X[2])*y$e,y$Z[2]=(y$X[1]-y$X[3])*y$e;else{var y$P=0;y$X[4]>y$X[0]&&(y$P=1),y$X[8]>y$X[3*y$P+y$P]&&(y$P=2);var y$O=(y$P+1)%3,y$s=(y$P+2)%3;y$e=Math.sqrt(y$X[3*y$P+y$P]-y$X[3*y$O+y$O]-y$X[3*y$s+y$s]+1),y$Z[y$P]=.5*y$e,y$e=.5/y$e,y$Z[3]=(y$X[3*y$O+y$s]-y$X[3*y$s+y$O])*y$e,y$Z[y$O]=(y$X[3*y$O+y$P]+y$X[3*y$P+y$O])*y$e,y$Z[y$s]=(y$X[3*y$s+y$P]+y$X[3*y$P+y$s])*y$e}},y$X.createFromMatrix4x4=function(y$_,y$c){var y$e,y$Z,y$X=y$_.elements,y$u=y$c.elements,y$P=y$X[0]+y$X[5]+y$X[10];0<y$P?(y$e=Math.sqrt(y$P+1),y$u[3]=.5*y$e,y$e=.5/y$e,y$u[0]=(y$X[6]-y$X[9])*y$e,y$u[1]=(y$X[8]-y$X[2])*y$e,y$u[2]=(y$X[1]-y$X[4])*y$e):y$X[0]>=y$X[5]&&y$X[0]>=y$X[10]?(y$Z=.5/(y$e=Math.sqrt(1+y$X[0]-y$X[5]-y$X[10])),y$u[0]=.5*y$e,y$u[1]=(y$X[1]+y$X[4])*y$Z,y$u[2]=(y$X[2]+y$X[8])*y$Z,y$u[3]=(y$X[6]-y$X[9])*y$Z):y$X[5]>y$X[10]?(y$Z=.5/(y$e=Math.sqrt(1+y$X[5]-y$X[0]-y$X[10])),y$u[0]=(y$X[4]+y$X[1])*y$Z,y$u[1]=.5*y$e,y$u[2]=(y$X[9]+y$X[6])*y$Z,y$u[3]=(y$X[8]-y$X[2])*y$Z):(y$Z=.5/(y$e=Math.sqrt(1+y$X[10]-y$X[0]-y$X[5])),y$u[0]=(y$X[8]+y$X[2])*y$Z,y$u[1]=(y$X[9]+y$X[6])*y$Z,y$u[2]=.5*y$e,y$u[3]=(y$X[1]-y$X[4])*y$Z)},y$X.slerp=function(y$_,y$c,y$e,y$Z){var y$X,y$u,y$P,y$O,y$s,y$n=y$_.elements,y$m=y$c.elements,y$H=y$Z.elements,y$B=y$n[0],y$D=y$n[1],y$U=y$n[2],y$k=y$n[3],y$a=y$m[0],y$G=y$m[1],y$w=y$m[2],y$z=y$m[3];return(y$u=y$B*y$a+y$D*y$G+y$U*y$w+y$k*y$z)<0&&(y$u=-y$u,y$a=-y$a,y$G=-y$G,y$w=-y$w,y$z=-y$z),y$s=1e-6<1-y$u?(y$X=Math.acos(y$u),y$P=Math.sin(y$X),y$O=Math.sin((1-y$e)*y$X)/y$P,Math.sin(y$e*y$X)/y$P):(y$O=1-y$e,y$e),y$H[0]=y$O*y$B+y$s*y$a,y$H[1]=y$O*y$D+y$s*y$G,y$H[2]=y$O*y$U+y$s*y$w,y$H[3]=y$O*y$k+y$s*y$z,y$H},y$X.lerp=function(y$_,y$c,y$e,y$Z){var y$X=y$Z.elements,y$u=y$_.elements,y$P=y$c.elements,y$O=y$u[0],y$s=y$u[1],y$n=y$u[2],y$m=y$u[3];y$X[0]=y$O+y$e*(y$P[0]-y$O),y$X[1]=y$s+y$e*(y$P[1]-y$s),y$X[2]=y$n+y$e*(y$P[2]-y$n),y$X[3]=y$m+y$e*(y$P[3]-y$m)},y$X.add=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=y$X[0]+y$u[0],y$Z[1]=y$X[1]+y$u[1],y$Z[2]=y$X[2]+y$u[2],y$Z[3]=y$X[3]+y$u[3]},y$X.dot=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;return y$e[0]*y$Z[0]+y$e[1]*y$Z[1]+y$e[2]*y$Z[2]+y$e[3]*y$Z[3]},y$X.rotationLookAt=function(y$_,y$c,y$e){y$X.lookAt(y$Pc.ZERO,y$_,y$c,y$e)},y$X.lookAt=function(y$_,y$c,y$e,y$Z){y$I_.lookAt(y$_,y$c,y$e,y$X._tempMatrix3x3),y$X.rotationMatrix(y$X._tempMatrix3x3,y$Z)},y$X.invert=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$_.lengthSquared();y$d_.isZero(y$X)||(y$X=1/y$X,y$Z[0]=-y$e[0]*y$X,y$Z[1]=-y$e[1]*y$X,y$Z[2]=-y$e[2]*y$X,y$Z[3]=y$e[3]*y$X)},y$X.rotationMatrix=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$e[0],y$X=y$e[1],y$u=y$e[2],y$P=y$e[3],y$O=y$e[4],y$s=y$e[5],y$n=y$e[6],y$m=y$e[7],y$H=y$e[8],y$B=y$c.elements,y$D=NaN,y$U=NaN,y$k=y$Z+y$O+y$H;0<y$k?(y$D=Math.sqrt(y$k+1),y$B[3]=.5*y$D,y$D=.5/y$D,y$B[0]=(y$s-y$m)*y$D,y$B[1]=(y$n-y$u)*y$D,y$B[2]=(y$X-y$P)*y$D):y$O<=y$Z&&y$H<=y$Z?(y$U=.5/(y$D=Math.sqrt(1+y$Z-y$O-y$H)),y$B[0]=.5*y$D,y$B[1]=(y$X+y$P)*y$U,y$B[2]=(y$u+y$n)*y$U,y$B[3]=(y$s-y$m)*y$U):y$H<y$O?(y$U=.5/(y$D=Math.sqrt(1+y$O-y$Z-y$H)),y$B[0]=(y$P+y$X)*y$U,y$B[1]=.5*y$D,y$B[2]=(y$m+y$s)*y$U,y$B[3]=(y$n-y$u)*y$U):(y$U=.5/(y$D=Math.sqrt(1+y$H-y$Z-y$O)),y$B[0]=(y$n+y$u)*y$U,y$B[1]=(y$m+y$s)*y$U,y$B[2]=.5*y$D,y$B[3]=(y$X-y$P)*y$U)},y$X.DEFAULT=new y$X,y$H(y$X,["TEMPVector30",function(){return this.TEMPVector30=new y$Pc},"TEMPVector31",function(){return this.TEMPVector31=new y$Pc},"TEMPVector32",function(){return this.TEMPVector32=new y$Pc},"TEMPVector33",function(){return this.TEMPVector33=new y$Pc},"TEMPMatrix0",function(){return this.TEMPMatrix0=new y$_c},"TEMPMatrix1",function(){return this.TEMPMatrix1=new y$_c},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new y$I_},"NAN",function(){return this.NAN=new y$X(NaN,NaN,NaN,NaN)}]),y$X}(),y$Zc=function(){function y$_(y$_){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=y$_,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}y$D(y$_,"laya.d3.math.Rand");var y$c=y$_.prototype;return y$c.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},y$c.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},y$c.getSignedFloat=function(){return 2*this.getFloat()-1},y$U(0,y$c,"seed",function(){return this.seeds[0]},function(y$_){this.seeds[0]=y$_,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),y$_.getFloatFromInt=function(y$_){return 1/8388607*(8388607&y$_)},y$_.getByteFromInt=function(y$_){return(8388607&y$_)>>>15},y$_}(),y$Xc=(function(){function y$X(y$_){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(y$_ instanceof Array)||4!==y$_.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|y$_[0],this._state0L=0|y$_[1],this._state1U=0|y$_[2],this._state1L=0|y$_[3]}y$D(y$X,"laya.d3.math.RandX");var y$_=y$X.prototype;y$_.randomint=function(){var y$_=this._state0U,y$c=this._state0L,y$e=this._state1U,y$Z=this._state1L,y$X=(y$Z>>>0)+(y$c>>>0),y$u=y$e+y$_+(y$X/2>>>31)>>>0,y$P=y$X>>>0,y$O=0,y$s=0;y$O=(y$_^=y$O=y$_<<23|(-512&y$c)>>>9)^(this._state0U=y$e),y$s=(y$c^=y$s=y$c<<23)^(this._state0L=y$Z);y$O^=y$_>>>18,y$s^=y$c>>>18|(262143&y$_)<<14;return y$O^=y$e>>>5,y$s^=y$Z>>>5|(31&y$e)<<27,this._state1U=y$O,this._state1L=y$s,[y$u,y$P]},y$_.random=function(){var y$_=this.randomint(),y$c=y$_[0],y$e=1023<<20|y$c>>>12,y$Z=0|(y$_[1]>>>12|(4095&y$c)<<20);return y$X._CONVERTION_BUFFER.setUint32(0,y$e,!1),y$X._CONVERTION_BUFFER.setUint32(4,y$Z,!1),y$Zc._CONVERTION_BUFFER.getFloat64(0,!1)-1},y$H(y$X,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new y$Zc([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function y$_(y$_,y$c){this.origin=null,this.direction=null,this.origin=y$_,this.direction=y$c}return y$D(y$_,"laya.d3.math.Ray"),y$_}()),y$uc=function(){function y$_(y$_,y$c){this.elements=new Float32Array(2),void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0);var y$e=this.elements;y$e[0]=y$_,y$e[1]=y$c}y$D(y$_,"laya.d3.math.Vector2");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.fromArray=function(y$_,y$c){void 0===y$c&&(y$c=0),this.elements[0]=y$_[y$c+0],this.elements[1]=y$_[y$c+1]},y$c.cloneTo=function(y$_){var y$c=y$_.elements,y$e=this.elements;y$c[0]=y$e[0],y$c[1]=y$e[1]},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"x",function(){return this.elements[0]},function(y$_){this.elements[0]=y$_}),y$U(0,y$c,"y",function(){return this.elements[1]},function(y$_){this.elements[1]=y$_}),y$_.scale=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements;y$Z[0]=y$X[0]*y$c,y$Z[1]=y$X[1]*y$c},y$H(y$_,["ZERO",function(){return this.ZERO=new y$_(0,0)},"ONE",function(){return this.ONE=new y$_(1,1)}]),y$_}(),y$Pc=function(){function y$m(y$_,y$c,y$e){this.elements=new Float32Array(3),void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0);var y$Z=this.elements;y$Z[0]=y$_,y$Z[1]=y$c,y$Z[2]=y$e}y$D(y$m,"laya.d3.math.Vector3");var y$_=y$m.prototype;return y$q.imps(y$_,{"laya.d3.core.IClone":!0}),y$_.fromArray=function(y$_,y$c){void 0===y$c&&(y$c=0),this.elements[0]=y$_[y$c+0],this.elements[1]=y$_[y$c+1],this.elements[2]=y$_[y$c+2]},y$_.cloneTo=function(y$_){var y$c=y$_.elements,y$e=this.elements;y$c[0]=y$e[0],y$c[1]=y$e[1],y$c[2]=y$e[2]},y$_.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$_.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},y$_.reset=function(y$_,y$c,y$e){this.elements[0]=y$_,this.elements[1]=y$c,this.elements[2]=y$e},y$U(0,y$_,"x",function(){return this.elements[0]},function(y$_){this.elements[0]=y$_}),y$U(0,y$_,"y",function(){return this.elements[1]},function(y$_){this.elements[1]=y$_}),y$U(0,y$_,"z",function(){return this.elements[2]},function(y$_){this.elements[2]=y$_}),y$m.distanceSquared=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$e[0]-y$Z[0],y$u=y$e[1]-y$Z[1],y$P=y$e[2]-y$Z[2];return y$X*y$X+y$u*y$u+y$P*y$P},y$m.distance=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$e[0]-y$Z[0],y$u=y$e[1]-y$Z[1],y$P=y$e[2]-y$Z[2];return Math.sqrt(y$X*y$X+y$u*y$u+y$P*y$P)},y$m.min=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=Math.min(y$X[0],y$u[0]),y$Z[1]=Math.min(y$X[1],y$u[1]),y$Z[2]=Math.min(y$X[2],y$u[2])},y$m.max=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=Math.max(y$X[0],y$u[0]),y$Z[1]=Math.max(y$X[1],y$u[1]),y$Z[2]=Math.max(y$X[2],y$u[2])},y$m.transformQuat=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements,y$P=y$X[0],y$O=y$X[1],y$s=y$X[2],y$n=y$u[0],y$m=y$u[1],y$H=y$u[2],y$B=y$u[3],y$D=y$B*y$P+y$m*y$s-y$H*y$O,y$U=y$B*y$O+y$H*y$P-y$n*y$s,y$k=y$B*y$s+y$n*y$O-y$m*y$P,y$a=-y$n*y$P-y$m*y$O-y$H*y$s;y$Z[0]=y$D*y$B+y$a*-y$n+y$U*-y$H-y$k*-y$m,y$Z[1]=y$U*y$B+y$a*-y$m+y$k*-y$n-y$D*-y$H,y$Z[2]=y$k*y$B+y$a*-y$H+y$D*-y$m-y$U*-y$n},y$m.scalarLength=function(y$_){var y$c=y$_.elements,y$e=y$c[0],y$Z=y$c[1],y$X=y$c[2];return Math.sqrt(y$e*y$e+y$Z*y$Z+y$X*y$X)},y$m.scalarLengthSquared=function(y$_){var y$c=y$_.elements,y$e=y$c[0],y$Z=y$c[1],y$X=y$c[2];return y$e*y$e+y$Z*y$Z+y$X*y$X},y$m.normalize=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$e[0],y$u=y$e[1],y$P=y$e[2],y$O=y$X*y$X+y$u*y$u+y$P*y$P;0<y$O&&(y$O=1/Math.sqrt(y$O),y$Z[0]=y$e[0]*y$O,y$Z[1]=y$e[1]*y$O,y$Z[2]=y$e[2]*y$O)},y$m.multiply=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=y$X[0]*y$u[0],y$Z[1]=y$X[1]*y$u[1],y$Z[2]=y$X[2]*y$u[2]},y$m.scale=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements;y$Z[0]=y$X[0]*y$c,y$Z[1]=y$X[1]*y$c,y$Z[2]=y$X[2]*y$c},y$m.lerp=function(y$_,y$c,y$e,y$Z){var y$X=y$Z.elements,y$u=y$_.elements,y$P=y$c.elements,y$O=y$u[0],y$s=y$u[1],y$n=y$u[2];y$X[0]=y$O+y$e*(y$P[0]-y$O),y$X[1]=y$s+y$e*(y$P[1]-y$s),y$X[2]=y$n+y$e*(y$P[2]-y$n)},y$m.transformV3ToV3=function(y$_,y$c,y$e){var y$Z=y$m._tempVector4;y$m.transformV3ToV4(y$_,y$c,y$Z);var y$X=y$Z.elements,y$u=y$e.elements;y$u[0]=y$X[0],y$u[1]=y$X[1],y$u[2]=y$X[2]},y$m.transformV3ToV4=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$c.elements,y$s=y$e.elements;y$s[0]=y$X*y$O[0]+y$u*y$O[4]+y$P*y$O[8]+y$O[12],y$s[1]=y$X*y$O[1]+y$u*y$O[5]+y$P*y$O[9]+y$O[13],y$s[2]=y$X*y$O[2]+y$u*y$O[6]+y$P*y$O[10]+y$O[14],y$s[3]=y$X*y$O[3]+y$u*y$O[7]+y$P*y$O[11]+y$O[15]},y$m.TransformNormal=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$c.elements,y$s=y$e.elements;y$s[0]=y$X*y$O[0]+y$u*y$O[4]+y$P*y$O[8],y$s[1]=y$X*y$O[1]+y$u*y$O[5]+y$P*y$O[9],y$s[2]=y$X*y$O[2]+y$u*y$O[6]+y$P*y$O[10]},y$m.transformCoordinate=function(y$_,y$c,y$e){var y$Z=y$m._tempVector4.elements,y$X=y$_.elements,y$u=y$X[0],y$P=y$X[1],y$O=y$X[2],y$s=y$c.elements;y$Z[0]=y$u*y$s[0]+y$P*y$s[4]+y$O*y$s[8]+y$s[12],y$Z[1]=y$u*y$s[1]+y$P*y$s[5]+y$O*y$s[9]+y$s[13],y$Z[2]=y$u*y$s[2]+y$P*y$s[6]+y$O*y$s[10]+y$s[14],y$Z[3]=1/(y$u*y$s[3]+y$P*y$s[7]+y$O*y$s[11]+y$s[15]);var y$n=y$e.elements;y$n[0]=y$Z[0]*y$Z[3],y$n[1]=y$Z[1]*y$Z[3],y$n[2]=y$Z[2]*y$Z[3]},y$m.Clamp=function(y$_,y$c,y$e,y$Z){var y$X=y$_.elements,y$u=y$X[0],y$P=y$X[1],y$O=y$X[2],y$s=y$c.elements,y$n=y$s[0],y$m=y$s[1],y$H=y$s[2],y$B=y$e.elements,y$D=y$B[0],y$U=y$B[1],y$k=y$B[2],y$a=y$Z.elements;y$u=(y$u=y$D<y$u?y$D:y$u)<y$n?y$n:y$u,y$P=(y$P=y$U<y$P?y$U:y$P)<y$m?y$m:y$P,y$O=(y$O=y$k<y$O?y$k:y$O)<y$H?y$H:y$O,y$a[0]=y$u,y$a[1]=y$P,y$a[2]=y$O},y$m.add=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=y$X[0]+y$u[0],y$Z[1]=y$X[1]+y$u[1],y$Z[2]=y$X[2]+y$u[2]},y$m.subtract=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=y$X[0]-y$u[0],y$Z[1]=y$X[1]-y$u[1],y$Z[2]=y$X[2]-y$u[2]},y$m.cross=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$c.elements,y$u=y$e.elements,y$P=y$Z[0],y$O=y$Z[1],y$s=y$Z[2],y$n=y$X[0],y$m=y$X[1],y$H=y$X[2];y$u[0]=y$O*y$H-y$s*y$m,y$u[1]=y$s*y$n-y$P*y$H,y$u[2]=y$P*y$m-y$O*y$n},y$m.dot=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;return y$e[0]*y$Z[0]+y$e[1]*y$Z[1]+y$e[2]*y$Z[2]},y$m.equals=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;return y$d_.nearEqual(Math.abs(y$e[0]),Math.abs(y$Z[0]))&&y$d_.nearEqual(Math.abs(y$e[1]),Math.abs(y$Z[1]))&&y$d_.nearEqual(Math.abs(y$e[2]),Math.abs(y$Z[2]))},y$m.ZERO=new y$m(0,0,0),y$m.ONE=new y$m(1,1,1),y$m.NegativeUnitX=new y$m(-1,0,0),y$m.UnitX=new y$m(1,0,0),y$m.UnitY=new y$m(0,1,0),y$m.UnitZ=new y$m(0,0,1),y$m.ForwardRH=new y$m(0,0,-1),y$m.ForwardLH=new y$m(0,0,1),y$m.Up=new y$m(0,1,0),y$m.NAN=new y$m(NaN,NaN,NaN),y$H(y$m,["_tempVector4",function(){return this._tempVector4=new y$Oc}]),y$m}(),y$Oc=function(){function y$_(y$_,y$c,y$e,y$Z){this.elements=new Float32Array(4),void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=0);var y$X=this.elements;y$X[0]=y$_,y$X[1]=y$c,y$X[2]=y$e,y$X[3]=y$Z}y$D(y$_,"laya.d3.math.Vector4");var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c.fromArray=function(y$_,y$c){void 0===y$c&&(y$c=0),this.elements[0]=y$_[y$c+0],this.elements[1]=y$_[y$c+1],this.elements[2]=y$_[y$c+2],this.elements[3]=y$_[y$c+3]},y$c.cloneTo=function(y$_){var y$c=y$_.elements,y$e=this.elements;y$c[0]=y$e[0],y$c[1]=y$e[1],y$c[2]=y$e[2],y$c[3]=y$e[3]},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$c.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},y$c.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},y$U(0,y$c,"x",function(){return this.elements[0]},function(y$_){this.elements[0]=y$_}),y$U(0,y$c,"y",function(){return this.elements[1]},function(y$_){this.elements[1]=y$_}),y$U(0,y$c,"z",function(){return this.elements[2]},function(y$_){this.elements[2]=y$_}),y$U(0,y$c,"w",function(){return this.elements[3]},function(y$_){this.elements[3]=y$_}),y$_.lerp=function(y$_,y$c,y$e,y$Z){var y$X=y$Z.elements,y$u=y$_.elements,y$P=y$c.elements,y$O=y$u[0],y$s=y$u[1],y$n=y$u[2],y$m=y$u[3];y$X[0]=y$O+y$e*(y$P[0]-y$O),y$X[1]=y$s+y$e*(y$P[1]-y$s),y$X[2]=y$n+y$e*(y$P[2]-y$n),y$X[3]=y$m+y$e*(y$P[3]-y$m)},y$_.transformByM4x4=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$Z[0],y$u=y$Z[1],y$P=y$Z[2],y$O=y$Z[3],y$s=y$c.elements,y$n=y$e.elements;y$n[0]=y$X*y$s[0]+y$u*y$s[4]+y$P*y$s[8]+y$O*y$s[12],y$n[1]=y$X*y$s[1]+y$u*y$s[5]+y$P*y$s[9]+y$O*y$s[13],y$n[2]=y$X*y$s[2]+y$u*y$s[6]+y$P*y$s[10]+y$O*y$s[14],y$n[3]=y$X*y$s[3]+y$u*y$s[7]+y$P*y$s[11]+y$O*y$s[15]},y$_.equals=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;return y$d_.nearEqual(Math.abs(y$e[0]),Math.abs(y$Z[0]))&&y$d_.nearEqual(Math.abs(y$e[1]),Math.abs(y$Z[1]))&&y$d_.nearEqual(Math.abs(y$e[2]),Math.abs(y$Z[2]))&&y$d_.nearEqual(Math.abs(y$e[3]),Math.abs(y$Z[3]))},y$_.normalize=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$_.length();0<y$X&&(y$Z[0]=y$e[0]*y$X,y$Z[1]=y$e[1]*y$X,y$Z[2]=y$e[2]*y$X,y$Z[3]=y$e[3]*y$X)},y$_.add=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=y$X[0]+y$u[0],y$Z[1]=y$X[1]+y$u[1],y$Z[2]=y$X[2]+y$u[2],y$Z[3]=y$X[3]+y$u[3]},y$_.subtract=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=y$X[0]-y$u[0],y$Z[1]=y$X[1]-y$u[1],y$Z[2]=y$X[2]-y$u[2],y$Z[3]=y$X[3]-y$u[3]},y$_.multiply=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=y$X[0]*y$u[0],y$Z[1]=y$X[1]*y$u[1],y$Z[2]=y$X[2]*y$u[2],y$Z[3]=y$X[3]*y$u[3]},y$_.scale=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements;y$Z[0]=y$X[0]*y$c,y$Z[1]=y$X[1]*y$c,y$Z[2]=y$X[2]*y$c,y$Z[3]=y$X[3]*y$c},y$_.Clamp=function(y$_,y$c,y$e,y$Z){var y$X=y$_.elements,y$u=y$X[0],y$P=y$X[1],y$O=y$X[2],y$s=y$X[3],y$n=y$c.elements,y$m=y$n[0],y$H=y$n[1],y$B=y$n[2],y$D=y$n[3],y$U=y$e.elements,y$k=y$U[0],y$a=y$U[1],y$G=y$U[2],y$w=y$U[3],y$z=y$Z.elements;y$u=(y$u=y$k<y$u?y$k:y$u)<y$m?y$m:y$u,y$P=(y$P=y$a<y$P?y$a:y$P)<y$H?y$H:y$P,y$O=(y$O=y$G<y$O?y$G:y$O)<y$B?y$B:y$O,y$s=(y$s=y$w<y$s?y$w:y$s)<y$D?y$D:y$s,y$z[0]=y$u,y$z[1]=y$P,y$z[2]=y$O,y$z[3]=y$s},y$_.distanceSquared=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$e[0]-y$Z[0],y$u=y$e[1]-y$Z[1],y$P=y$e[2]-y$Z[2],y$O=y$e[3]-y$Z[3];return y$X*y$X+y$u*y$u+y$P*y$P+y$O*y$O},y$_.distance=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements,y$X=y$e[0]-y$Z[0],y$u=y$e[1]-y$Z[1],y$P=y$e[2]-y$Z[2],y$O=y$e[3]-y$Z[3];return Math.sqrt(y$X*y$X+y$u*y$u+y$P*y$P+y$O*y$O)},y$_.dot=function(y$_,y$c){var y$e=y$_.elements,y$Z=y$c.elements;return y$e[0]*y$Z[0]+y$e[1]*y$Z[1]+y$e[2]*y$Z[2]+y$e[3]*y$Z[3]},y$_.min=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=Math.min(y$X[0],y$u[0]),y$Z[1]=Math.min(y$X[1],y$u[1]),y$Z[2]=Math.min(y$X[2],y$u[2]),y$Z[3]=Math.min(y$X[3],y$u[3])},y$_.max=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c.elements;y$Z[0]=Math.max(y$X[0],y$u[0]),y$Z[1]=Math.max(y$X[1],y$u[1]),y$Z[2]=Math.max(y$X[2],y$u[2]),y$Z[3]=Math.max(y$X[3],y$u[3])},y$H(y$_,["ZERO",function(){return this.ZERO=new y$_},"ONE",function(){return this.ONE=new y$_(1,1,1,1)},"UnitX",function(){return this.UnitX=new y$_(1,0,0,0)},"UnitY",function(){return this.UnitY=new y$_(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new y$_(0,0,1,0)},"UnitW",function(){return this.UnitW=new y$_(0,0,0,1)}]),y$_}(),y$sc=function(){function y$u(y$_,y$c,y$e,y$Z){this.minDepth=0,this.maxDepth=1,this.x=y$_,this.y=y$c,this.width=y$e,this.height=y$Z}y$D(y$u,"laya.d3.math.Viewport");var y$_=y$u.prototype;return y$_.project=function(y$_,y$c,y$e){y$Pc.transformV3ToV3(y$_,y$c,y$e);var y$Z=y$_.elements,y$X=y$c.elements,y$u=y$e.elements,y$P=y$Z[0]*y$X[3]+y$Z[1]*y$X[7]+y$Z[2]*y$X[11]+y$X[15];1!==y$P&&(y$u[0]=y$u[0]/y$P,y$u[1]=y$u[1]/y$P,y$u[2]=y$u[2]/y$P),y$u[0]=.5*(y$u[0]+1)*this.width+this.x,y$u[1]=.5*(1-y$u[1])*this.height+this.y,y$u[2]=y$u[2]*(this.maxDepth-this.minDepth)+this.minDepth},y$_.unprojectFromMat=function(y$_,y$c,y$e){var y$Z=y$_.elements,y$X=y$c.elements,y$u=y$e.elements;y$u[0]=(y$Z[0]-this.x)/this.width*2-1,y$u[1]=-((y$Z[1]-this.y)/this.height*2-1);var y$P=(this.maxDepth-this.minDepth)/2;y$u[2]=(y$Z[2]-this.minDepth-y$P)/y$P;var y$O=y$u[0]*y$X[3]+y$u[1]*y$X[7]+y$u[2]*y$X[11]+y$X[15];y$Pc.transformV3ToV3(y$e,y$c,y$e),1!==y$O&&(y$u[0]=y$u[0]/y$O,y$u[1]=y$u[1]/y$O,y$u[2]=y$u[2]/y$O)},y$_.unprojectFromWVP=function(y$_,y$c,y$e,y$Z,y$X){y$_c.multiply(y$c,y$e,y$u._tempMatrix4x4),y$Z&&y$_c.multiply(y$u._tempMatrix4x4,y$Z,y$u._tempMatrix4x4),y$u._tempMatrix4x4.invert(y$u._tempMatrix4x4),this.unprojectFromMat(y$_,y$u._tempMatrix4x4,y$X)},y$H(y$u,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new y$_c}]),y$u}(),y$nc=function(){function y$C(y$_){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=y$_,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}y$D(y$C,"laya.d3.resource.models.SubMesh");var y$_=y$C.prototype;return y$q.imps(y$_,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),y$_._getVertexBuffer=function(y$_){return void 0===y$_&&(y$_=0),0===y$_?this._vertexBuffer:null},y$_._getIndexBuffer=function(){return this._indexBuffer},y$_._getStaticBatchBakedVertexs=function(y$_,y$c){var y$e,y$Z,y$X=this._vertexBuffer,y$u=y$X.vertexDeclaration,y$P=y$u.getVertexElementByUsage(0).offset/4,y$O=y$u.getVertexElementByUsage(3).offset/4,y$s=y$c.meshRender.lightmapScaleOffset,y$n=0,y$m=0,y$H=0,y$B=0,y$D=0,y$U=0;if(y$s)if(y$Z=y$u.getVertexElementByUsage(15))y$H=y$u.vertexStride/4,y$e=0<this._vertexCount?y$X.getData().slice(this._vertexStart*y$H,(this._vertexStart+this._vertexCount)*y$H):y$X.getData().slice(),y$B=y$Z.offset/4;else{y$H=(y$U=y$u.vertexStride/4)+2,y$e=this._vertexCount?new Float32Array(this._vertexCount*(y$X.vertexDeclaration.vertexStride/4+2)):new Float32Array(y$X.vertexCount*(y$X.vertexDeclaration.vertexStride/4+2)),y$B=(y$D=y$u.getVertexElementByUsage(2).offset/4)+2;var y$k=y$X.getData();for(y$n=0,y$m=y$k.length/y$U;y$n<y$m;y$n++){var y$a=0;y$a=0<this._vertexCount?(this._vertexStart+y$n)*y$U:y$n*y$U;var y$G=y$n*y$H,y$w=0;for(y$w=0;y$w<y$B;y$w++)y$e[y$G+y$w]=y$k[y$a+y$w];for(y$w=y$B;y$w<y$U;y$w++)y$e[y$G+y$w+2]=y$k[y$a+y$w]}}else y$H=y$u.vertexStride/4,y$e=this._vertexCount?y$X.getData().slice(this._vertexStart*y$H,(this._vertexStart+this._vertexCount)*y$H):y$X.getData().slice();if(y$_){var y$z=y$_.worldMatrix,y$L=y$C._tempMatrix4x40;y$z.invert(y$L);var y$q=y$C._tempMatrix4x41,y$K=y$c.transform.worldMatrix;y$_c.multiply(y$L,y$K,y$q)}else y$q=y$c.transform.worldMatrix;var y$M=y$C._tempQuaternion0;for(y$q.decomposeTransRotScale(y$C._tempVector30,y$M,y$C._tempVector31),y$n=0,y$m=y$e.length/y$H;y$n<y$m;y$n++){var y$f=y$n*y$H+y$P,y$A=y$n*y$H+y$O;if(y$ac.transformVector3ArrayToVector3ArrayCoordinate(y$e,y$f,y$q,y$e,y$f),y$ac.transformVector3ArrayByQuat(y$e,y$A,y$M,y$e,y$A),y$s){var y$v=y$n*y$H+y$B;if(y$Z)y$ac.transformLightingMapTexcoordByUV1Array(y$e,y$v,y$s,y$e,y$v);else{var y$r=y$n*y$U+y$D;y$ac.transformLightingMapTexcoordByUV0Array(y$k,y$r,y$s,y$e,y$v)}}}return y$e},y$_._getVertexBuffers=function(){return null},y$_._beforeRender=function(y$_){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},y$_._render=function(y$_){var y$c,y$e=0,y$Z=y$_.renderElement;if(1<this._indexCount){var y$X=this._boneIndicesList.length;if(1<y$X){for(var y$u=0;y$u<y$X;y$u++)(y$c=y$Z._skinAnimationDatas||this._skinAnimationDatas)&&(y$Z._shaderValue.setValue(0,y$c[y$u]),y$_._shader.uploadRenderElementUniforms(y$Z._shaderValue.data)),y$y.mainContext.drawElements(4,this._subIndexBufferCount[y$u],5123,2*this._subIndexBufferStart[y$u]);y$f.drawCall+=y$X}else(y$c=y$Z._skinAnimationDatas||this._skinAnimationDatas)&&(y$Z._shaderValue.setValue(0,y$c[0]),y$_._shader.uploadRenderElementUniforms(y$Z._shaderValue.data)),y$y.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),y$f.drawCall++;y$e=this._indexCount}else y$e=this._indexBuffer.indexCount,(y$c=y$Z._skinAnimationDatas||this._skinAnimationDatas)&&(y$Z._shaderValue.setValue(0,y$c[0]),y$_._shader.uploadRenderElementUniforms(y$Z._shaderValue.data)),y$y.mainContext.drawElements(4,y$e,5123,0),y$f.drawCall++;y$f.trianglesFaces+=y$e/3},y$_.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},y$_.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},y$U(0,y$_,"_vertexBufferCount",function(){return 1}),y$U(0,y$_,"triangleCount",function(){return this._indexBuffer.indexCount/3}),y$H(y$C,["_tempVector30",function(){return this._tempVector30=new y$Pc},"_tempVector31",function(){return this._tempVector31=new y$Pc},"_tempQuaternion0",function(){return this._tempQuaternion0=new y$ec},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new y$_c},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new y$_c}]),y$C}(),y$mc=function(){function y$_(y$_){this.defineCounter=0,this.defines=null,y$_?(this.defineCounter=y$_.defineCounter,this.defines=y$_.defines.slice()):(this.defineCounter=0,this.defines=[])}return y$D(y$_,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),y$_.prototype.registerDefine=function(y$_){var y$c=Math.pow(2,this.defineCounter++);return this.defines[y$c]=y$_,y$c},y$_}(),y$Hc=function(){function y$_(){}return y$D(y$_,"laya.d3.shader.ShaderInit3D"),y$_.__init__=function(){var y$_,y$c;y$fc._globalRegDefine("HIGHPRECISION",y$fc.SHADERDEFINE_HIGHPRECISION),y$fc._globalRegDefine("FOG",y$fc.SHADERDEFINE_FOG),y$fc._globalRegDefine("DIRECTIONLIGHT",y$fc.SHADERDEFINE_DIRECTIONLIGHT),y$fc._globalRegDefine("POINTLIGHT",y$fc.SHADERDEFINE_POINTLIGHT),y$fc._globalRegDefine("SPOTLIGHT",y$fc.SHADERDEFINE_SPOTLIGHT),y$fc._globalRegDefine("UV",y$fc.SHADERDEFINE_UV0),y$fc._globalRegDefine("COLOR",y$fc.SHADERDEFINE_COLOR),y$fc._globalRegDefine("UV1",y$fc.SHADERDEFINE_UV1),y$fc._globalRegDefine("CASTSHADOW",y$Dc.SHADERDEFINE_CAST_SHADOW),y$fc._globalRegDefine("SHADOWMAP_PSSM1",y$Dc.SHADERDEFINE_SHADOW_PSSM1),y$fc._globalRegDefine("SHADOWMAP_PSSM2",y$Dc.SHADERDEFINE_SHADOW_PSSM2),y$fc._globalRegDefine("SHADOWMAP_PSSM3",y$Dc.SHADERDEFINE_SHADOW_PSSM3),y$fc._globalRegDefine("SHADOWMAP_PCF_NO",y$Dc.SHADERDEFINE_SHADOW_PCF_NO),y$fc._globalRegDefine("SHADOWMAP_PCF1",y$Dc.SHADERDEFINE_SHADOW_PCF1),y$fc._globalRegDefine("SHADOWMAP_PCF2",y$Dc.SHADERDEFINE_SHADOW_PCF2),y$fc._globalRegDefine("SHADOWMAP_PCF3",y$Dc.SHADERDEFINE_SHADOW_PCF3),y$fc._globalRegDefine("DEPTHFOG",y$fc.SAHDERDEFINE_DEPTHFOG),y$xc.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),y$xc.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),y$_={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},y$c={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var y$e=y$xc.nameKey.add("SIMPLE");shaderCompile=y$fc.add(y$e,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',y$_,y$c),y$Fc.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),y$Fc.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),y$Fc.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),y$Fc.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),y$Fc.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),y$Fc.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),y$Fc.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),y$Fc.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),y$Fc.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},y$_}(),y$Bc=function(){function y$_(){this._data=null,this._data=[]}y$D(y$_,"laya.d3.shader.ValusArray");var y$c=y$_.prototype;return y$c.setValue=function(y$_,y$c){this._data[y$_]=y$c},y$U(0,y$c,"data",function(){return this._data}),y$_}(),y$Dc=function(){function y$_(){}return y$_.SHADERDEFINE_RECEIVE_SHADOW=1,y$_.SHADERDEFINE_CAST_SHADOW=512,y$_.SHADERDEFINE_SHADOW_PSSM1=1024,y$_.SHADERDEFINE_SHADOW_PSSM2=2048,y$_.SHADERDEFINE_SHADOW_PSSM3=4096,y$_.SHADERDEFINE_SHADOW_PCF_NO=8192,y$_.SHADERDEFINE_SHADOW_PCF1=16384,y$_.SHADERDEFINE_SHADOW_PCF2=32768,y$_.SHADERDEFINE_SHADOW_PCF3=65536,y$_.MAX_PSSM_COUNT=3,y$_}(),y$Uc=function(){function y$g(){}return y$D(y$g,"laya.d3.utils.Picker"),y$g.calculateCursorRay=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$_.elements[0],y$O=y$_.elements[1],y$s=y$g._tempVector30,y$n=y$s.elements;y$n[0]=y$P,y$n[1]=y$O,y$n[2]=y$c.minDepth;var y$m=y$g._tempVector31,y$H=y$m.elements;y$H[0]=y$P,y$H[1]=y$O,y$H[2]=y$c.maxDepth;var y$B=y$u.origin,y$D=y$g._tempVector32;y$c.unprojectFromWVP(y$s,y$e,y$Z,y$X,y$B),y$c.unprojectFromWVP(y$m,y$e,y$Z,y$X,y$D);var y$U=y$u.direction.elements;y$U[0]=y$D.x-y$B.x,y$U[1]=y$D.y-y$B.y,y$U[2]=y$D.z-y$B.z,y$Pc.normalize(y$u.direction,y$u.direction)},y$g.rayIntersectsPositionsAndIndices=function(y$_,y$c,y$e,y$Z,y$X){for(var y$u=y$e.vertexStride/4,y$P=y$e.getVertexElementByUsage(0).offset/4,y$O=Number.MAX_VALUE,y$s=-1,y$n=-1,y$m=-1,y$H=0;y$H<y$Z.length;y$H+=3){var y$B=y$g._tempVector35,y$D=y$B.elements,y$U=y$Z[y$H]*y$u,y$k=y$U+y$P;y$D[0]=y$c[y$k],y$D[1]=y$c[1+y$k],y$D[2]=y$c[2+y$k];var y$a=y$g._tempVector36,y$G=y$a.elements,y$w=y$Z[y$H+1]*y$u,y$z=y$w+y$P;y$G[0]=y$c[y$z],y$G[1]=y$c[1+y$z],y$G[2]=y$c[2+y$z];var y$L=y$g._tempVector37,y$q=y$L.elements,y$K=y$Z[y$H+2]*y$u,y$M=y$K+y$P;y$q[0]=y$c[y$M],y$q[1]=y$c[1+y$M],y$q[2]=y$c[2+y$M];var y$f=laya.d3.utils.Picker.rayIntersectsTriangle(y$_,y$B,y$a,y$L);!isNaN(y$f)&&y$f<y$O&&(y$O=y$f,y$s=y$U,y$n=y$w,y$m=y$K)}if(y$O===Number.MAX_VALUE)return y$X.position.toDefault(),y$X.distance=Number.MAX_VALUE,y$X.trianglePositions[0].toDefault(),y$X.trianglePositions[1].toDefault(),y$X.trianglePositions[2].toDefault(),y$X.triangleNormals[0].toDefault(),y$X.triangleNormals[1].toDefault(),y$X.triangleNormals[2].toDefault(),!1;y$X.distance=y$O,y$Pc.scale(y$_.direction,y$O,y$X.position),y$Pc.add(y$_.origin,y$X.position,y$X.position);var y$A=y$X.trianglePositions,y$v=y$A[0],y$r=y$A[1],y$C=y$A[2],y$y=y$v.elements,y$$=y$r.elements,y$T=y$C.elements,y$h=y$s+y$P;y$y[0]=y$c[y$h],y$y[1]=y$c[y$h+1],y$y[2]=y$c[y$h+2];var y$R=y$n+y$P;y$$[0]=y$c[y$R],y$$[1]=y$c[y$R+1],y$$[2]=y$c[y$R+2];var y$i=y$m+y$P;y$T[0]=y$c[y$i],y$T[1]=y$c[y$i+1],y$T[2]=y$c[y$i+2];var y$x=y$e.getVertexElementByUsage(3);if(y$x){var y$F=y$x.offset/4,y$Y=y$X.triangleNormals,y$p=y$Y[0],y$o=y$Y[1],y$Q=y$Y[2],y$J=y$p.elements,y$j=y$o.elements,y$t=y$Q.elements,y$b=y$s+y$F;y$J[0]=y$c[y$b],y$J[1]=y$c[y$b+1],y$J[2]=y$c[y$b+2];var y$N=y$n+y$F;y$j[0]=y$c[y$N],y$j[1]=y$c[y$N+1],y$j[2]=y$c[y$N+2];var y$V=y$m+y$F;y$t[0]=y$c[y$V],y$t[1]=y$c[y$V+1],y$t[2]=y$c[y$V+2]}return!0},y$g.rayIntersectsTriangle=function(y$_,y$c,y$e,y$Z){var y$X=y$g._tempVector30,y$u=y$g._tempVector31;y$Pc.subtract(y$e,y$c,y$X),y$Pc.subtract(y$Z,y$c,y$u);var y$P,y$O=y$g._tempVector32;if(y$Pc.cross(y$_.direction,y$u,y$O),(y$P=y$Pc.dot(y$X,y$O))>-Number.MIN_VALUE&&y$P<Number.MIN_VALUE)return Number.NaN;var y$s,y$n=1/y$P,y$m=y$g._tempVector33;if(y$Pc.subtract(y$_.origin,y$c,y$m),y$s=y$Pc.dot(y$m,y$O),(y$s*=y$n)<0||1<y$s)return Number.NaN;var y$H,y$B,y$D=y$g._tempVector34;return y$Pc.cross(y$m,y$X,y$D),y$H=y$Pc.dot(y$_.direction,y$D),(y$H*=y$n)<0||1<y$s+y$H?Number.NaN:(y$B=y$Pc.dot(y$u,y$D),(y$B*=y$n)<0?Number.NaN:y$B)},y$H(y$g,["_tempVector30",function(){return this._tempVector30=new y$Pc},"_tempVector31",function(){return this._tempVector31=new y$Pc},"_tempVector32",function(){return this._tempVector32=new y$Pc},"_tempVector33",function(){return this._tempVector33=new y$Pc},"_tempVector34",function(){return this._tempVector34=new y$Pc},"_tempVector35",function(){return this._tempVector35=new y$Pc},"_tempVector36",function(){return this._tempVector36=new y$Pc},"_tempVector37",function(){return this._tempVector37=new y$Pc}]),y$g}(),y$kc=(function(){function y$_(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new y$Pc,new y$Pc,new y$Pc],this.trianglePositions.length=3,this.triangleNormals=[new y$Pc,new y$Pc,new y$Pc],this.triangleNormals.length=3,this.position=new y$Pc}y$D(y$_,"laya.d3.utils.RaycastHit"),y$_.prototype.cloneTo=function(y$_){y$_.distance=this.distance,this.trianglePositions[0].cloneTo(y$_.trianglePositions[0]),this.trianglePositions[1].cloneTo(y$_.trianglePositions[1]),this.trianglePositions[2].cloneTo(y$_.trianglePositions[2]),this.triangleNormals[0].cloneTo(y$_.triangleNormals[0]),this.triangleNormals[1].cloneTo(y$_.triangleNormals[1]),this.triangleNormals[2].cloneTo(y$_.triangleNormals[2]),this.position.cloneTo(y$_.position),y$_.sprite3D=this.sprite3D}}(),function(){function y$_(y$_,y$c){this._width=0,this._height=0,this._width=y$_,this._height=y$c}y$D(y$_,"laya.d3.utils.Size");var y$c=y$_.prototype;return y$U(0,y$c,"width",function(){return-1===this._width?y$S.clientWidth:this._width}),y$U(0,y$c,"height",function(){return-1===this._height?y$S.clientHeight:this._height}),y$U(1,y$_,"fullScreen",function(){return new y$_(-1,-1)}),y$_}()),y$ac=function(){function y$h(){}return y$D(y$h,"laya.d3.utils.Utils3D"),y$h._rotationTransformScaleSkinAnimation=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H){var y$B,y$D,y$U,y$k,y$a,y$G=y$h._tempArray16_0,y$w=y$h._tempArray16_1,y$z=y$h._tempArray16_2,y$L=y$Z+y$Z,y$q=y$X+y$X,y$K=y$u+y$u,y$M=y$Z*y$L,y$f=y$X*y$L,y$A=y$X*y$q,y$v=y$u*y$L,y$r=y$u*y$q,y$C=y$u*y$K,y$y=y$P*y$L,y$$=y$P*y$q,y$T=y$P*y$K;for(y$G[15]=1,y$G[0]=1-y$A-y$C,y$G[1]=y$f+y$T,y$G[2]=y$v-y$$,y$G[4]=y$f-y$T,y$G[5]=1-y$M-y$C,y$G[6]=y$r+y$y,y$G[8]=y$v+y$$,y$G[9]=y$r-y$y,y$G[10]=1-y$M-y$A,y$w[15]=1,y$w[0]=y$O,y$w[5]=y$s,y$w[10]=y$n,y$B=0;y$B<4;y$B++)y$D=y$G[y$B],y$U=y$G[y$B+4],y$k=y$G[y$B+8],y$a=y$G[y$B+12],y$z[y$B]=y$D,y$z[y$B+4]=y$U,y$z[y$B+8]=y$k,y$z[y$B+12]=y$D*y$_+y$U*y$c+y$k*y$e+y$a;for(y$B=0;y$B<4;y$B++)y$D=y$z[y$B],y$U=y$z[y$B+4],y$k=y$z[y$B+8],y$a=y$z[y$B+12],y$m[y$B+y$H]=y$D*y$w[0]+y$U*y$w[1]+y$k*y$w[2]+y$a*y$w[3],y$m[y$B+y$H+4]=y$D*y$w[4]+y$U*y$w[5]+y$k*y$w[6]+y$a*y$w[7],y$m[y$B+y$H+8]=y$D*y$w[8]+y$U*y$w[9]+y$k*y$w[10]+y$a*y$w[11],y$m[y$B+y$H+12]=y$D*y$w[12]+y$U*y$w[13]+y$k*y$w[14]+y$a*y$w[15]},y$h._createNodeByJson=function(y$_,y$c,y$e,y$Z){if(!y$e)switch(y$c.type){case"Sprite3D":y$e=new y$ic;break;case"MeshSprite3D":y$e=new y$gc;break;case"SkinnedMeshSprite3D":y$e=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":y$e=new ShuriKenParticle3D;break;case"TrailSprite3D":y$e=new TrailSprite3D;break;case"Terrain":y$e=new Terrain;break;case"Camera":y$e=new y$Vc;break;case"DirectionLight":y$e=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var y$X=y$c.props;if(y$X)for(var y$u in y$X)y$e[y$u]=y$X[y$u];var y$P=y$c.customProps;y$P&&(y$e instanceof laya.d3.core.Sprite3D?(y$e._parseBaseCustomProps(y$P),y$e._parseCustomProps(y$_,y$Z,y$P,y$c),y$e._parseCustomComponent(y$_,y$Z,y$c.components)):y$e._parseCustomProps(y$_,y$Z,y$P,y$c));var y$O=y$c.child;if(y$O)for(var y$s=0,y$n=y$O.length;y$s<y$n;y$s++){var y$m=y$h._createNodeByJson(y$_,y$O[y$s],null,y$Z);y$e.addChild(y$m)}return y$e},y$h._computeBoneAndAnimationDatasByBindPoseMatrxix=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P,y$O,y$s=0,y$n=0,y$m=y$_.length;for(y$P=0;y$P<y$m;y$s+=y$_[y$P].keyframeWidth,y$n+=16,y$P++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(y$c[y$s+0],y$c[y$s+1],y$c[y$s+2],y$c[y$s+3],y$c[y$s+4],y$c[y$s+5],y$c[y$s+6],y$c[y$s+7],y$c[y$s+8],y$c[y$s+9],y$Z,y$n),0!=y$P&&(y$O=16*y$_[y$P].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(y$Z,y$O,y$Z,y$n,y$Z,y$n));var y$H=y$e.length;for(y$P=0;y$P<y$H;y$P++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(y$Z,16*y$u[y$P],y$e[y$P],y$X,16*y$P)},y$h._computeAnimationDatasByArrayAndMatrixFast=function(y$_,y$c,y$e,y$Z){for(var y$X=0,y$u=y$_.length;y$X<y$u;y$X++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(y$c,16*y$Z[y$X],y$_[y$X],y$e,16*y$X)},y$h._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(y$_,y$c,y$e,y$Z,y$X){var y$u,y$P,y$O=0,y$s=0,y$n=y$_.length;for(y$u=0;y$u<y$n;y$O+=y$_[y$u].keyframeWidth,y$s+=16,y$u++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(y$c[y$O+7],y$c[y$O+8],y$c[y$O+9],y$c[y$O+3],y$c[y$O+4],y$c[y$O+5],y$c[y$O+6],y$c[y$O+0],y$c[y$O+1],y$c[y$O+2],y$Z,y$s),0!=y$u&&(y$P=16*y$_[y$u].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(y$Z,y$P,y$Z,y$s,y$Z,y$s));var y$m=y$e.length;for(y$u=0;y$u<y$m;y$u++){var y$H=16*y$u;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(y$Z,y$H,y$e[y$u],y$X,y$H)}},y$h._computeAnimationDatasByArrayAndMatrixFastOld=function(y$_,y$c,y$e){for(var y$Z=y$_.length,y$X=0;y$X<y$Z;y$X++){var y$u=16*y$X;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(y$c,y$u,y$_[y$X],y$e,y$u)}},y$h._computeRootAnimationData=function(y$_,y$c,y$e){for(var y$Z=0,y$X=0,y$u=0,y$P=y$_.length;y$Z<y$P;y$X+=y$_[y$Z].keyframeWidth,y$u+=16,y$Z++)laya.d3.utils.Utils3D.createAffineTransformationArray(y$c[y$X+0],y$c[y$X+1],y$c[y$X+2],y$c[y$X+3],y$c[y$X+4],y$c[y$X+5],y$c[y$X+6],y$c[y$X+7],y$c[y$X+8],y$c[y$X+9],y$e,y$u)},y$h.transformVector3ArrayByQuat=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$e.elements,y$P=y$_[y$c],y$O=y$_[y$c+1],y$s=y$_[y$c+2],y$n=y$u[0],y$m=y$u[1],y$H=y$u[2],y$B=y$u[3],y$D=y$B*y$P+y$m*y$s-y$H*y$O,y$U=y$B*y$O+y$H*y$P-y$n*y$s,y$k=y$B*y$s+y$n*y$O-y$m*y$P,y$a=-y$n*y$P-y$m*y$O-y$H*y$s;y$Z[y$X]=y$D*y$B+y$a*-y$n+y$U*-y$H-y$k*-y$m,y$Z[y$X+1]=y$U*y$B+y$a*-y$m+y$k*-y$n-y$D*-y$H,y$Z[y$X+2]=y$k*y$B+y$a*-y$H+y$D*-y$m-y$U*-y$n},y$h.mulMatrixByArray=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P,y$O,y$s,y$n,y$m;if(y$X===y$e){for(y$e=y$h._tempArray16_3,y$P=0;y$P<16;++y$P)y$e[y$P]=y$X[y$u+y$P];y$Z=0}for(y$P=0;y$P<4;y$P++)y$O=y$_[y$c+y$P],y$s=y$_[y$c+y$P+4],y$n=y$_[y$c+y$P+8],y$m=y$_[y$c+y$P+12],y$X[y$u+y$P]=y$O*y$e[y$Z+0]+y$s*y$e[y$Z+1]+y$n*y$e[y$Z+2]+y$m*y$e[y$Z+3],y$X[y$u+y$P+4]=y$O*y$e[y$Z+4]+y$s*y$e[y$Z+5]+y$n*y$e[y$Z+6]+y$m*y$e[y$Z+7],y$X[y$u+y$P+8]=y$O*y$e[y$Z+8]+y$s*y$e[y$Z+9]+y$n*y$e[y$Z+10]+y$m*y$e[y$Z+11],y$X[y$u+y$P+12]=y$O*y$e[y$Z+12]+y$s*y$e[y$Z+13]+y$n*y$e[y$Z+14]+y$m*y$e[y$Z+15]},y$h.mulMatrixByArrayFast=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P,y$O,y$s,y$n,y$m;for(y$P=0;y$P<4;y$P++)y$O=y$_[y$c+y$P],y$s=y$_[y$c+y$P+4],y$n=y$_[y$c+y$P+8],y$m=y$_[y$c+y$P+12],y$X[y$u+y$P]=y$O*y$e[y$Z+0]+y$s*y$e[y$Z+1]+y$n*y$e[y$Z+2]+y$m*y$e[y$Z+3],y$X[y$u+y$P+4]=y$O*y$e[y$Z+4]+y$s*y$e[y$Z+5]+y$n*y$e[y$Z+6]+y$m*y$e[y$Z+7],y$X[y$u+y$P+8]=y$O*y$e[y$Z+8]+y$s*y$e[y$Z+9]+y$n*y$e[y$Z+10]+y$m*y$e[y$Z+11],y$X[y$u+y$P+12]=y$O*y$e[y$Z+12]+y$s*y$e[y$Z+13]+y$n*y$e[y$Z+14]+y$m*y$e[y$Z+15]},y$h.mulMatrixByArrayAndMatrixFast=function(y$_,y$c,y$e,y$Z,y$X){var y$u,y$P,y$O,y$s,y$n,y$m=y$e.elements,y$H=y$m[0],y$B=y$m[1],y$D=y$m[2],y$U=y$m[3],y$k=y$m[4],y$a=y$m[5],y$G=y$m[6],y$w=y$m[7],y$z=y$m[8],y$L=y$m[9],y$q=y$m[10],y$K=y$m[11],y$M=y$m[12],y$f=y$m[13],y$A=y$m[14],y$v=y$m[15],y$r=y$c,y$C=y$c+4,y$y=y$c+8,y$$=y$c+12,y$T=y$X,y$h=y$X+4,y$R=y$X+8,y$i=y$X+12;for(y$u=0;y$u<4;y$u++)y$P=y$_[y$r+y$u],y$O=y$_[y$C+y$u],y$s=y$_[y$y+y$u],y$n=y$_[y$$+y$u],y$Z[y$T+y$u]=y$P*y$H+y$O*y$B+y$s*y$D+y$n*y$U,y$Z[y$h+y$u]=y$P*y$k+y$O*y$a+y$s*y$G+y$n*y$w,y$Z[y$R+y$u]=y$P*y$z+y$O*y$L+y$s*y$q+y$n*y$K,y$Z[y$i+y$u]=y$P*y$M+y$O*y$f+y$s*y$A+y$n*y$v},y$h.createAffineTransformationArray=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H){var y$B=y$Z+y$Z,y$D=y$X+y$X,y$U=y$u+y$u,y$k=y$Z*y$B,y$a=y$Z*y$D,y$G=y$Z*y$U,y$w=y$X*y$D,y$z=y$X*y$U,y$L=y$u*y$U,y$q=y$P*y$B,y$K=y$P*y$D,y$M=y$P*y$U;y$m[y$H+0]=(1-(y$w+y$L))*y$O,y$m[y$H+1]=(y$a+y$M)*y$O,y$m[y$H+2]=(y$G-y$K)*y$O,y$m[y$H+3]=0,y$m[y$H+4]=(y$a-y$M)*y$s,y$m[y$H+5]=(1-(y$k+y$L))*y$s,y$m[y$H+6]=(y$z+y$q)*y$s,y$m[y$H+7]=0,y$m[y$H+8]=(y$G+y$K)*y$n,y$m[y$H+9]=(y$z-y$q)*y$n,y$m[y$H+10]=(1-(y$k+y$w))*y$n,y$m[y$H+11]=0,y$m[y$H+12]=y$_,y$m[y$H+13]=y$c,y$m[y$H+14]=y$e,y$m[y$H+15]=1},y$h.transformVector3ArrayToVector3ArrayCoordinate=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$h._tempArray4_0,y$P=y$_[y$c+0],y$O=y$_[y$c+1],y$s=y$_[y$c+2],y$n=y$e.elements;y$u[0]=y$P*y$n[0]+y$O*y$n[4]+y$s*y$n[8]+y$n[12],y$u[1]=y$P*y$n[1]+y$O*y$n[5]+y$s*y$n[9]+y$n[13],y$u[2]=y$P*y$n[2]+y$O*y$n[6]+y$s*y$n[10]+y$n[14],y$u[3]=1/(y$P*y$n[3]+y$O*y$n[7]+y$s*y$n[11]+y$n[15]),y$Z[y$X+0]=y$u[0]*y$u[3],y$Z[y$X+1]=y$u[1]*y$u[3],y$Z[y$X+2]=y$u[2]*y$u[3]},y$h.transformLightingMapTexcoordByUV0Array=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$e.elements;y$Z[y$X+0]=y$_[y$c+0]*y$u[0]+y$u[2],y$Z[y$X+1]=(y$_[y$c+1]-1)*y$u[1]+y$u[3]},y$h.transformLightingMapTexcoordByUV1Array=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$e.elements;y$Z[y$X+0]=y$_[y$c+0]*y$u[0]+y$u[2],y$Z[y$X+1]=1+y$_[y$c+1]*y$u[1]+y$u[3]},y$h.getURLVerion=function(y$_){var y$c=y$_.indexOf("?");return 0<=y$c?y$_.substr(y$c):null},y$h._quaternionCreateFromYawPitchRollArray=function(y$_,y$c,y$e,y$Z){var y$X=.5*y$e,y$u=.5*y$c,y$P=.5*y$_,y$O=Math.sin(y$X),y$s=Math.cos(y$X),y$n=Math.sin(y$u),y$m=Math.cos(y$u),y$H=Math.sin(y$P),y$B=Math.cos(y$P);y$Z[0]=y$B*y$n*y$s+y$H*y$m*y$O,y$Z[1]=y$H*y$m*y$s-y$B*y$n*y$O,y$Z[2]=y$B*y$m*y$O-y$H*y$n*y$s,y$Z[3]=y$B*y$m*y$s+y$H*y$n*y$O},y$h._createAffineTransformationArray=function(y$_,y$c,y$e,y$Z){var y$X=y$c[0],y$u=y$c[1],y$P=y$c[2],y$O=y$c[3],y$s=y$X+y$X,y$n=y$u+y$u,y$m=y$P+y$P,y$H=y$X*y$s,y$B=y$X*y$n,y$D=y$X*y$m,y$U=y$u*y$n,y$k=y$u*y$m,y$a=y$P*y$m,y$G=y$O*y$s,y$w=y$O*y$n,y$z=y$O*y$m,y$L=y$e[0],y$q=y$e[1],y$K=y$e[2];y$Z[0]=(1-(y$U+y$a))*y$L,y$Z[1]=(y$B+y$z)*y$L,y$Z[2]=(y$D-y$w)*y$L,y$Z[3]=0,y$Z[4]=(y$B-y$z)*y$q,y$Z[5]=(1-(y$H+y$a))*y$q,y$Z[6]=(y$k+y$G)*y$q,y$Z[7]=0,y$Z[8]=(y$D+y$w)*y$K,y$Z[9]=(y$k-y$G)*y$K,y$Z[10]=(1-(y$H+y$U))*y$K,y$Z[11]=0,y$Z[12]=y$_[0],y$Z[13]=y$_[1],y$Z[14]=y$_[2],y$Z[15]=1},y$h._mulMatrixArray=function(y$_,y$c,y$e,y$Z){var y$X,y$u,y$P,y$O,y$s,y$n=y$c.elements,y$m=y$n[0],y$H=y$n[1],y$B=y$n[2],y$D=y$n[3],y$U=y$n[4],y$k=y$n[5],y$a=y$n[6],y$G=y$n[7],y$w=y$n[8],y$z=y$n[9],y$L=y$n[10],y$q=y$n[11],y$K=y$n[12],y$M=y$n[13],y$f=y$n[14],y$A=y$n[15],y$v=y$Z,y$r=y$Z+4,y$C=y$Z+8,y$y=y$Z+12;for(y$X=0;y$X<4;y$X++)y$u=y$_[y$X],y$P=y$_[y$X+4],y$O=y$_[y$X+8],y$s=y$_[y$X+12],y$e[y$v+y$X]=y$u*y$m+y$P*y$H+y$O*y$B+y$s*y$D,y$e[y$r+y$X]=y$u*y$U+y$P*y$k+y$O*y$a+y$s*y$G,y$e[y$C+y$X]=y$u*y$w+y$P*y$z+y$O*y$L+y$s*y$q,y$e[y$y+y$X]=y$u*y$K+y$P*y$M+y$O*y$f+y$s*y$A},y$h.getYawPitchRoll=function(y$_,y$c){y$h.transformQuat(y$Pc.ForwardRH,y$_,y$ec.TEMPVector31),y$h.transformQuat(y$Pc.Up,y$_,y$ec.TEMPVector32);var y$e=y$ec.TEMPVector32.elements;y$h.angleTo(y$Pc.ZERO,y$ec.TEMPVector31,y$ec.TEMPVector33);var y$Z=y$ec.TEMPVector33.elements;y$Z[0]==Math.PI/2?(y$Z[1]=y$h.arcTanAngle(y$e[2],y$e[0]),y$Z[2]=0):y$Z[0]==-Math.PI/2?(y$Z[1]=y$h.arcTanAngle(-y$e[2],-y$e[0]),y$Z[2]=0):(y$_c.createRotationY(-y$Z[1],y$ec.TEMPMatrix0),y$_c.createRotationX(-y$Z[0],y$ec.TEMPMatrix1),y$Pc.transformCoordinate(y$ec.TEMPVector32,y$ec.TEMPMatrix0,y$ec.TEMPVector32),y$Pc.transformCoordinate(y$ec.TEMPVector32,y$ec.TEMPMatrix1,y$ec.TEMPVector32),y$Z[2]=y$h.arcTanAngle(y$e[1],-y$e[0])),y$Z[1]<=-Math.PI&&(y$Z[1]=Math.PI),y$Z[2]<=-Math.PI&&(y$Z[2]=Math.PI),y$Z[1]>=Math.PI&&y$Z[2]>=Math.PI&&(y$Z[1]=0,y$Z[2]=0,y$Z[0]=Math.PI-y$Z[0]),y$c[0]=y$Z[1],y$c[1]=y$Z[0],y$c[2]=y$Z[2]},y$h.arcTanAngle=function(y$_,y$c){return 0==y$_?1==y$c?Math.PI/2:-Math.PI/2:0<y$_?Math.atan(y$c/y$_):y$_<0?0<y$c?Math.atan(y$c/y$_)+Math.PI:Math.atan(y$c/y$_)-Math.PI:0},y$h.angleTo=function(y$_,y$c,y$e){y$Pc.subtract(y$c,y$_,y$ec.TEMPVector30),y$Pc.normalize(y$ec.TEMPVector30,y$ec.TEMPVector30),y$e.elements[0]=Math.asin(y$ec.TEMPVector30.y),y$e.elements[1]=y$h.arcTanAngle(-y$ec.TEMPVector30.z,-y$ec.TEMPVector30.x)},y$h.transformQuat=function(y$_,y$c,y$e){var y$Z=y$e.elements,y$X=y$_.elements,y$u=y$c,y$P=y$X[0],y$O=y$X[1],y$s=y$X[2],y$n=y$u[0],y$m=y$u[1],y$H=y$u[2],y$B=y$u[3],y$D=y$B*y$P+y$m*y$s-y$H*y$O,y$U=y$B*y$O+y$H*y$P-y$n*y$s,y$k=y$B*y$s+y$n*y$O-y$m*y$P,y$a=-y$n*y$P-y$m*y$O-y$H*y$s;y$Z[0]=y$D*y$B+y$a*-y$n+y$U*-y$H-y$k*-y$m,y$Z[1]=y$U*y$B+y$a*-y$m+y$k*-y$n-y$D*-y$H,y$Z[2]=y$k*y$B+y$a*-y$H+y$D*-y$m-y$U*-y$n},y$h.quaterionNormalize=function(y$_,y$c){var y$e=y$_[0],y$Z=y$_[1],y$X=y$_[2],y$u=y$_[3],y$P=y$e*y$e+y$Z*y$Z+y$X*y$X+y$u*y$u;0<y$P&&(y$P=1/Math.sqrt(y$P),y$c[0]=y$e*y$P,y$c[1]=y$Z*y$P,y$c[2]=y$X*y$P,y$c[3]=y$u*y$P)},y$h.matrix4x4MultiplyFFF=function(y$_,y$c,y$e){var y$Z,y$X,y$u,y$P,y$O;if(y$e===y$c)for(y$c=new Float32Array(16),y$Z=0;y$Z<16;++y$Z)y$c[y$Z]=y$e[y$Z];for(y$Z=0;y$Z<4;y$Z++)y$X=y$_[y$Z],y$u=y$_[y$Z+4],y$P=y$_[y$Z+8],y$O=y$_[y$Z+12],y$e[y$Z]=y$X*y$c[0]+y$u*y$c[1]+y$P*y$c[2]+y$O*y$c[3],y$e[y$Z+4]=y$X*y$c[4]+y$u*y$c[5]+y$P*y$c[6]+y$O*y$c[7],y$e[y$Z+8]=y$X*y$c[8]+y$u*y$c[9]+y$P*y$c[10]+y$O*y$c[11],y$e[y$Z+12]=y$X*y$c[12]+y$u*y$c[13]+y$P*y$c[14]+y$O*y$c[15]},y$h.matrix4x4MultiplyMFM=function(y$_,y$c,y$e){y$h.matrix4x4MultiplyFFF(y$_.elements,y$c,y$e.elements)},y$H(y$h,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new y$Pc},"_tempVector3_1",function(){return this._tempVector3_1=new y$Pc},"_tempVector3_2",function(){return this._tempVector3_2=new y$Pc},"_tempVector3_3",function(){return this._tempVector3_3=new y$Pc},"_tempVector3_4",function(){return this._tempVector3_4=new y$Pc},"_tempVector3_5",function(){return this._tempVector3_5=new y$Pc},"_tempVector3_6",function(){return this._tempVector3_6=new y$Pc},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),y$h}(),y$Gc=function(){function y$$(){}return y$D(y$$,"Laya3D"),y$$._cancelLoadByUrl=function(y$_){y$q.loader.cancelLoadByUrl(y$_),y$$._innerFirstLevelLoaderManager.cancelLoadByUrl(y$_),y$$._innerSecondLevelLoaderManager.cancelLoadByUrl(y$_),y$$._innerThirdLevelLoaderManager.cancelLoadByUrl(y$_),y$$._innerFourthLevelLoaderManager.cancelLoadByUrl(y$_)},y$$._changeWebGLSize=function(y$_,y$c){y$y.onStageResize(y$_,y$c),y$S.clientWidth=y$_,y$S.clientHeight=y$c},y$$.__init__=function(){var y$_=y$c.createMap;y$_.lh=[y$ic,"SPRITE3DHIERARCHY"],y$_.ls=[y$Rc,"SPRITE3DHIERARCHY"],y$_.lm=[y$Jc,"MESH"],y$_.lmat=[y$Fc,"MATERIAL"],y$_.jpg=[y$tc,"nativeimage"],y$_.jpeg=[y$tc,"nativeimage"],y$_.png=[y$tc,"nativeimage"],y$_.pkm=[y$tc,"arraybuffer"],y$_.raw=[y$oc,"arraybuffer"],y$_.mipmaps=[y$oc,"arraybuffer"],y$G.parserMap.SPRITE3DHIERARCHY=y$$._loadHierarchy,y$G.parserMap.MESH=y$$._loadMesh,y$G.parserMap.MATERIAL=y$$._loadMaterial,y$G.parserMap.TEXTURECUBE=y$$._loadTextureCube,y$G.parserMap.TERRAIN=y$$._loadTerrain,y$$._innerFirstLevelLoaderManager.on("error",null,y$$._eventLoadManagerError),y$$._innerSecondLevelLoaderManager.on("error",null,y$$._eventLoadManagerError),y$$._innerThirdLevelLoaderManager.on("error",null,y$$._eventLoadManagerError),y$$._innerFourthLevelLoaderManager.on("error",null,y$$._eventLoadManagerError)},y$$.READ_BLOCK=function(){return y$$._readData.pos+=4,!0},y$$.READ_DATA=function(){return y$$._DATA.offset=y$$._readData.getUint32(),y$$._DATA.size=y$$._readData.getUint32(),!0},y$$.READ_STRINGS=function(){var y$_=[],y$c={offset:0,size:0};y$c.offset=y$$._readData.getUint16(),y$c.size=y$$._readData.getUint16();y$$._readData.pos;y$$._readData.pos=y$c.offset+y$$._DATA.offset;for(var y$e=0;y$e<y$c.size;y$e++){var y$Z=y$$._readData.readUTFString();-1===y$Z.lastIndexOf(".lmat")&&-1===y$Z.lastIndexOf(".lpbr")||y$_.push(y$Z)}return y$_},y$$.formatRelativePath=function(y$_,y$c){var y$e;if("."===y$c.charAt(0)){for(var y$Z=(y$_+y$c).split("/"),y$X=0,y$u=y$Z.length;y$X<y$u;y$X++)if(".."==y$Z[y$X]){var y$P=y$X-1;0<y$P&&".."!==y$Z[y$P]&&(y$Z.splice(y$P,2),y$X-=2)}y$e=y$Z.join("/")}else y$e=y$_+y$c;return null!=y$C.customFormat&&(y$e=y$C.customFormat(y$e,null)),y$e},y$$._eventLoadManagerError=function(y$_){y$q.loader.event("error",y$_)},y$$._addHierarchyInnerUrls=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P=y$$.formatRelativePath(y$Z,y$X);y$e&&(y$P+=y$e),y$_.push({url:y$P,clas:y$u}),y$c[y$X]=y$P},y$$._getSprite3DHierarchyInnerUrls=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){var y$O,y$s=0,y$n=0;switch(y$_.type){case"Scene":var y$m=y$_.customProps.lightmaps;for(y$s=0,y$n=y$m.length;y$s<y$n;y$s++){var y$H=y$m[y$s].replace(".exr",".png");y$$._addHierarchyInnerUrls(y$Z,y$X,y$u,y$P,y$H,y$tc)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var y$B;if(y$_.instanceParams)(y$B=y$_.instanceParams.loadPath)&&y$$._addHierarchyInnerUrls(y$c,y$X,y$u,y$P,y$B,y$Jc);else{(y$B=(y$O=y$_.customProps).meshPath)&&y$$._addHierarchyInnerUrls(y$c,y$X,y$u,y$P,y$B,y$Jc);var y$D=y$O.materials;if(y$D)for(y$s=0,y$n=y$D.length;y$s<y$n;y$s++){for(var y$U=y$D[y$s],y$k=y$U.type.split("."),y$a=y$T.window,y$G=0,y$w=y$k.length;y$G<y$w;++y$G){y$a=y$a[this.clasPaths[y$G]]}if("function"!=typeof y$a)throw"_getSprite3DHierarchyInnerUrls 错误: "+y$U.type+" 不是类";y$$._addHierarchyInnerUrls(y$e,y$X,y$u,y$P,y$U.path,y$a)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var y$z=(y$O=y$_.customProps).meshPath;y$z&&y$$._addHierarchyInnerUrls(y$c,y$X,y$u,y$P,y$z,y$Jc);var y$L=y$O.material;if(y$L){y$k=y$L.type.split("."),y$a=y$T.window;for(y$G=0,y$w=y$k.length;y$G<y$w;++y$G){y$a=y$a[this.clasPaths[y$G]]}y$$._addHierarchyInnerUrls(y$e,y$X,y$u,y$P,y$L.path,y$a)}else{var y$q=y$O.materialPath;if(y$q)y$$._addHierarchyInnerUrls(y$e,y$X,y$u,y$P,y$q,ShurikenParticleMaterial);else{var y$K=y$O.texturePath;y$K&&y$$._addHierarchyInnerUrls(y$Z,y$X,y$u,y$P,y$K,y$tc)}}break;case"Terrain":y$$._addHierarchyInnerUrls(y$Z,y$X,y$u,y$P,y$_.customProps.dataPath,TerrainRes)}var y$M=y$_.components;for(var y$f in y$M){var y$A=y$M[y$f];switch(y$f){case"Animator":var y$v=y$A.avatarPath;if(y$v)y$$._addHierarchyInnerUrls(y$Z,y$X,y$u,y$P,y$v,Avatar);else{var y$r=y$A.avatar;y$r&&y$$._addHierarchyInnerUrls(y$Z,y$X,y$u,y$P,y$r.path,Avatar)}var y$C=y$A.clipPaths;for(y$s=0,y$n=y$C.length;y$s<y$n;y$s++)y$$._addHierarchyInnerUrls(y$Z,y$X,y$u,y$P,y$C[y$s],AnimationClip)}}var y$y=y$_.child;for(y$s=0,y$n=y$y.length;y$s<y$n;y$s++)y$$._getSprite3DHierarchyInnerUrls(y$y[y$s],y$c,y$e,y$Z,y$X,y$u,y$P)},y$$._loadHierarchy=function(y$_){y$_.on("loaded",null,y$$._onHierarchylhLoaded,[y$_,y$_._class._getGroup()]),y$_.load(y$_.url,"json",!1,null,!0)},y$$._onHierarchylhLoaded=function(y$_,y$c,y$e){if(y$_._class.destroyed)y$_.endLoad();else{var y$Z=y$_.url,y$X=y$ac.getURLVerion(y$Z),y$u=y$C.getPath(y$Z),y$P=[],y$O=[],y$s=[],y$n={};y$$._getSprite3DHierarchyInnerUrls(y$e,y$P,y$O,y$s,y$n,y$X,y$u);var y$m=y$P.length+y$O.length+y$s.length,y$H=y$m+1,y$B=1/y$H;if(y$$._onProcessChange(y$_,0,y$B,1),0<y$s.length){var y$D=y$m/y$H,y$U=y$r.create(null,y$$._onProcessChange,[y$_,y$B,y$D],!1);y$$._innerFourthLevelLoaderManager.create(y$s,y$r.create(null,y$$._onHierarchyInnerForthLevResouLoaded,[y$_,y$c,y$U,y$e,y$n,y$P,y$O,y$B+y$D*y$s.length,y$D]),y$U,null,null,1,!0,y$c)}else y$$._onHierarchyInnerForthLevResouLoaded(y$_,y$c,null,y$e,y$n,y$P,y$O,y$B,y$D)}},y$$._onHierarchyInnerForthLevResouLoaded=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){if(y$_._class.destroyed)y$_.endLoad();else if(y$e&&y$e.recover(),0<y$P.length){var y$n=y$r.create(null,y$$._onProcessChange,[y$_,y$O,y$s],!1);y$$._innerSecondLevelLoaderManager.create(y$P,y$r.create(null,y$$._onHierarchyInnerSecondLevResouLoaded,[y$_,y$c,y$n,y$Z,y$X,y$u,y$O+y$s*y$P.length,y$s]),y$e,null,null,1,!0,y$c)}else y$$._onHierarchyInnerSecondLevResouLoaded(y$_,y$c,null,y$Z,y$X,y$u,y$O,y$s)},y$$._onHierarchyInnerSecondLevResouLoaded=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O){if(y$_._class.destroyed)y$_.endLoad();else if(y$e&&y$e.recover(),0<y$u.length){var y$s=y$r.create(null,y$$._onProcessChange,[y$_,y$P,y$O],!1);y$$._innerFirstLevelLoaderManager.create(y$u,y$r.create(null,y$$._onHierarchyInnerFirstLevResouLoaded,[y$_,y$s,y$Z,y$X]),y$e,null,null,1,!0,y$c)}else y$$._onHierarchyInnerFirstLevResouLoaded(y$_,null,y$Z,y$X)},y$$._onHierarchyInnerFirstLevResouLoaded=function(y$_,y$c,y$e,y$Z){y$c&&y$c.recover(),y$_.endLoad([y$e,y$Z])},y$$._loadTerrain=function(y$_){y$_.on("loaded",null,y$$._onTerrainLtLoaded,[y$_,y$_._class._getGroup()]),y$_.load(y$_.url,"json",!1,null,!0)},y$$._onTerrainLtLoaded=function(y$_,y$c,y$e){if(y$_._class.destroyed)y$_.endLoad();else{var y$Z,y$X,y$u=y$_.url,y$P=y$ac.getURLVerion(y$u),y$O=y$C.getPath(y$u),y$s=[],y$n={},y$m=0,y$H=0,y$B=y$e.heightData;y$Z=y$B.url,y$X=y$$.formatRelativePath(y$O,y$Z),y$P&&(y$X+=y$P),y$Z=y$n[y$Z]=y$X;var y$D=y$e.detailTexture;for(y$m=0,y$H=y$D.length;y$m<y$H;y$m++)y$s.push({url:y$D[y$m].diffuse});var y$U=y$e.normalMap;for(y$m=0,y$H=y$U.length;y$m<y$H;y$m++)y$s.push({url:y$U[y$m]});var y$k=y$e.alphaMap;for(y$m=0,y$H=y$k.length;y$m<y$H;y$m++)y$s.push({url:y$k[y$m],params:[!1,!1,6408,!0]});for(y$m=0,y$H=y$s.length;y$m<y$H;y$m++){var y$a=y$s[y$m].url;y$X=y$$.formatRelativePath(y$O,y$a),y$P&&(y$X+=y$P),y$s[y$m].url=y$X,y$n[y$a]=y$X}var y$G=y$s.length,y$w=y$G+2,y$z=1/y$w;y$$._onProcessChange(y$_,0,y$z,1);var y$L={heightMapLoaded:!1,texturesLoaded:!1},y$q=y$r.create(null,y$$._onProcessChange,[y$_,y$z,y$z],!1);y$$._innerFourthLevelLoaderManager.create(y$Z,y$r.create(null,y$$._onTerrainHeightMapLoaded,[y$_,y$q,y$e,y$n,y$L]),y$q,null,[y$B.numX,y$B.numZ,y$B.bitType,y$B.value],1,!0,y$c);var y$K=y$r.create(null,y$$._onProcessChange,[y$_,2*y$z,y$G/y$w],!1);y$$._innerFourthLevelLoaderManager.create(y$s,y$r.create(null,y$$._onTerrainTexturesLoaded,[y$_,y$K,y$e,y$n,y$L]),y$K,null,null,1,!0,y$c)}},y$$._onTerrainHeightMapLoaded=function(y$_,y$c,y$e,y$Z,y$X){y$X.heightMapLoaded=!0,y$X.texturesLoaded&&(y$_.endLoad([y$e,y$Z]),y$c.recover())},y$$._onTerrainTexturesLoaded=function(y$_,y$c,y$e,y$Z,y$X){y$X.texturesLoaded=!0,y$X.heightMapLoaded&&(y$_.endLoad([y$e,y$Z]),y$c.recover())},y$$._loadMesh=function(y$_){y$_.on("loaded",null,y$$._onMeshLmLoaded,[y$_,y$_._class._getGroup()]),y$_.load(y$_.url,"arraybuffer",!1,null,!0)},y$$._onMeshLmLoaded=function(y$_,y$c,y$e){if(y$_._class.destroyed)y$_.endLoad();else{var y$Z,y$X,y$u,y$P=y$_.url,y$O=y$ac.getURLVerion(y$P),y$s=y$C.getPath(y$P),y$n={},y$m=0,y$H=0;switch((y$$._readData=new y$K(y$e)).pos=0,y$$._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var y$B=y$$._readData.getUint32();y$$._readData.pos=y$$._readData.pos+4,y$H=y$$._readData.getUint16(),y$$._readData.pos=y$$._readData.pos+8*y$H;var y$D=y$$._readData.getUint32();for(y$H=y$$._readData.getUint16(),y$$._readData.pos=y$B+y$D,y$Z=[],y$m=0;y$m<y$H;y$m++){var y$U=y$$._readData.readUTFString();-1!==y$U.lastIndexOf(".lmat")&&y$Z.push(y$U)}break;default:for(y$$.READ_BLOCK(),y$m=0;y$m<2;y$m++){var y$k=y$$._readData.getUint16(),y$a=y$$._strings[y$k],y$G=y$$["READ_"+y$a];if(null==y$G)throw new Error("model file err,no this function:"+y$k+" "+y$a);1===y$m?y$Z=y$G.call():y$G.call()}}for(y$m=0,y$u=y$Z.length;y$m<y$u;y$m++){var y$w=y$Z[y$m];y$X=y$$.formatRelativePath(y$s,y$w),y$O&&(y$X+=y$O),y$Z[y$m]=y$X,y$n[y$w]=y$X}if(0<y$Z.length){y$$._onProcessChange(y$_,0,.5,1);var y$z=y$r.create(null,y$$._onProcessChange,[y$_,.5,.5],!1);y$$._innerSecondLevelLoaderManager.create(y$Z,y$r.create(null,y$$._onMeshMateialLoaded,[y$_,y$z,y$e,y$n]),y$z,null,null,1,!0,y$c)}else y$_.endLoad([y$e,y$n])}},y$$._onMeshMateialLoaded=function(y$_,y$c,y$e,y$Z){y$_.endLoad([y$e,y$Z]),y$c.recover()},y$$._getMaterialTexturePath=function(y$_,y$c,y$e){var y$Z=y$_.length-4;return y$_.indexOf(".dds")!=y$Z&&y$_.indexOf(".tga")!=y$Z&&y$_.indexOf(".exr")!=y$Z&&y$_.indexOf(".DDS")!=y$Z&&y$_.indexOf(".TGA")!=y$Z&&y$_.indexOf(".EXR")!=y$Z||(y$_=y$_.substr(0,y$Z)+".png"),y$_=y$$.formatRelativePath(y$e,y$_),y$c&&(y$_+=y$c),y$_},y$$._loadMaterial=function(y$_){y$_.on("loaded",null,y$$._onMaterilLmatLoaded,[y$_,y$_._class._getGroup()]),y$_.load(y$_.url,"json",!1,null,!0)},y$$._onMaterilLmatLoaded=function(y$_,y$c,y$e){if(y$_._class.destroyed)y$_.endLoad();else{var y$Z,y$X=y$_.url,y$u=y$ac.getURLVerion(y$X),y$P=y$C.getPath(y$X),y$O=[],y$s={},y$n=y$e.customProps,y$m=y$e.version;if(y$m)switch(y$m){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var y$H=y$e.props.textures,y$B=0,y$D=y$H.length;y$B<y$D;y$B++){var y$U=y$H[y$B],y$k=y$U.path;if(y$k){var y$a=y$k.length-4;y$k.indexOf(".exr")!=y$a&&y$k.indexOf(".EXR")!=y$a||(y$k=y$k.substr(0,y$a)+".png"),y$Z=y$$.formatRelativePath(y$P,y$k),y$u&&(y$Z+=y$u),y$O.push({url:y$Z,params:y$U.params}),y$s[y$k]=y$Z}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var y$G=y$n.diffuseTexture.texture2D;if(y$G&&(y$Z=y$$._getMaterialTexturePath(y$G,y$u,y$P),y$O.push(y$Z),y$s[y$G]=y$Z),y$n.normalTexture){var y$w=y$n.normalTexture.texture2D;y$w&&(y$Z=y$$._getMaterialTexturePath(y$w,y$u,y$P),y$O.push(y$Z),y$s[y$w]=y$Z)}if(y$n.specularTexture){var y$z=y$n.specularTexture.texture2D;y$z&&(y$Z=y$$._getMaterialTexturePath(y$z,y$u,y$P),y$O.push(y$Z),y$s[y$z]=y$Z)}if(y$n.emissiveTexture){var y$L=y$n.emissiveTexture.texture2D;y$L&&(y$Z=y$$._getMaterialTexturePath(y$L,y$u,y$P),y$O.push(y$Z),y$s[y$L]=y$Z)}if(y$n.ambientTexture){var y$q=y$n.ambientTexture.texture2D;y$q&&(y$Z=y$$._getMaterialTexturePath(y$q,y$u,y$P),y$O.push(y$Z),y$s[y$q]=y$Z)}if(y$n.reflectTexture){var y$K=y$n.reflectTexture.texture2D;y$K&&(y$Z=y$$._getMaterialTexturePath(y$K,y$u,y$P),y$O.push(y$Z),y$s[y$K]=y$Z)}}var y$M=y$O.length,y$f=y$M+1,y$A=1/y$f;if(y$$._onProcessChange(y$_,0,y$A,1),0<y$M){var y$v=y$r.create(null,y$$._onProcessChange,[y$_,y$A,y$M/y$f],!1);y$$._innerFourthLevelLoaderManager.create(y$O,y$r.create(null,y$$._onMateialTexturesLoaded,[y$_,y$v,y$e,y$s]),y$v,y$tc,null,1,!0,y$c)}else y$$._onMateialTexturesLoaded(y$_,null,y$e,null)}},y$$._onMateialTexturesLoaded=function(y$_,y$c,y$e,y$Z){y$_.endLoad([y$e,y$Z]),y$c&&y$c.recover()},y$$._loadTextureCube=function(y$_){y$_.on("loaded",null,y$$._onTextureCubeLtcLoaded,[y$_]),y$_.load(y$_.url,"json",!1,null,!0)},y$$._onTextureCubeLtcLoaded=function(y$_,y$c){if(y$_._class.destroyed)y$_.endLoad();else{var y$e=y$C.getPath(y$_.url),y$Z=[y$$.formatRelativePath(y$e,y$c.px),y$$.formatRelativePath(y$e,y$c.nx),y$$.formatRelativePath(y$e,y$c.py),y$$.formatRelativePath(y$e,y$c.ny),y$$.formatRelativePath(y$e,y$c.pz),y$$.formatRelativePath(y$e,y$c.nz)];y$$._onProcessChange(y$_,0,1/7,1);var y$X=y$r.create(null,y$$._onProcessChange,[y$_,1/7,6/7],!1);y$$._innerFourthLevelLoaderManager.load(y$Z,y$r.create(null,y$$._onTextureCubeImagesLoaded,[y$_,y$Z,y$X]),y$X,"nativeimage")}},y$$._onTextureCubeImagesLoaded=function(y$_,y$c,y$e){var y$Z=[];y$Z.length=6;for(var y$X=0;y$X<6;y$X++){var y$u=y$c[y$X];y$Z[y$X]=y$G.getRes(y$u),y$G.clearRes(y$u)}y$_.endLoad(y$Z),y$e.recover()},y$$._onProcessChange=function(y$_,y$c,y$e,y$Z){(y$Z=y$c+y$Z*y$e)<1&&y$_.event("progress",y$Z)},y$$.init=function(y$_,y$c,y$e,y$Z,y$X,y$u){if(void 0===y$e&&(y$e=!1),void 0===y$Z&&(y$Z=!1),void 0===y$X&&(y$X=!0),void 0===y$u&&(y$u=!0),y$w.update3DLoop=function(){},y$w.cancelLoadByUrl=function(y$_){y$$._cancelLoadByUrl(y$_)},y$s.isAntialias=y$e,y$s.isAlpha=y$Z,y$s.premultipliedAlpha=y$X,y$s.isStencil=y$u,!y$y.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");y$w.changeWebGLSize=y$$._changeWebGLSize,y$k.is3DMode=!0,y$q.init(y$_,y$c),y$h.__init__(),y$Hc.__init__(),y$gc.__init__(),y$Q.__init__(),y$$.__init__(),y$P.maxTextureCount=2,(y$$.debugMode||y$E.debugMode)&&(y$$._debugPhasorSprite=new y$N)},y$$.HIERARCHY="SPRITE3DHIERARCHY",y$$.MESH="MESH",y$$.MATERIAL="MATERIAL",y$$.PBRMATERIAL="PBRMTL",y$$.TEXTURECUBE="TEXTURECUBE",y$$.TERRAIN="TERRAIN",y$$._readData=null,y$$._debugPhasorSprite=null,y$$.debugMode=!1,y$H(y$$,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new y$c},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new y$c},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new y$c},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new y$c}]),y$$}(),y$wc=function(y$_){function y$X(y$_){y$X.__super.call(this),this._owner=y$_,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}y$D(y$X,"laya.d3.animation.AnimationTransform3D",y$u);var y$c=y$X.prototype;return y$c._getlocalMatrix=function(){return this._localUpdate&&(y$ac._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},y$c._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._onWorldTransform()}},y$c._setWorldMatrixAndUpdate=function(y$_){if(this._worldMatrix=y$_,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var y$c=this._getlocalMatrix(),y$e=0;y$e<16;++y$e)this._worldMatrix[y$e]=y$c[y$e];else y$ac.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},y$c._setWorldMatrixNoUpdate=function(y$_){this._worldMatrix=y$_},y$c._setWorldMatrixIgnoreUpdate=function(y$_){this._worldMatrix=y$_,this._worldUpdate=!1},y$c.getLocalPosition=function(){return this._localPosition},y$c.setLocalPosition=function(y$_){if(this._parent)this._localPosition=y$_,this._localUpdate=!0,this._onWorldTransform();else{var y$c=this._entity.owner._transform,y$e=this._entity.localPosition,y$Z=y$e.elements;y$Z[0]=y$_[0],y$Z[1]=y$_[1],y$Z[2]=y$_[2],y$c.localPosition=y$e}},y$c.getLocalRotation=function(){if(this._localQuaternionUpdate){var y$_=this._localRotationEuler;y$ac._quaternionCreateFromYawPitchRollArray(y$_[1]/y$X._angleToRandin,y$_[0]/y$X._angleToRandin,y$_[2]/y$X._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},y$c.setLocalRotation=function(y$_){if(this._parent)this._localRotation=y$_,y$ac.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var y$c=this._entity.owner._transform,y$e=this._entity.localRotation,y$Z=y$e.elements;y$Z[0]=y$_[0],y$Z[1]=y$_[1],y$Z[2]=y$_[2],y$Z[3]=y$_[3],y$c.localRotation=y$e}},y$c.getLocalScale=function(){return this._localScale},y$c.setLocalScale=function(y$_){if(this._parent)this._localScale=y$_,this._localUpdate=!0,this._onWorldTransform();else{var y$c=this._entity.owner._transform,y$e=this._entity.localScale,y$Z=y$e.elements;y$Z[0]=y$_[0],y$Z[1]=y$_[1],y$Z[2]=y$_[2],y$c.localScale=y$e}},y$c.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){y$ac.getYawPitchRoll(this._localRotation,y$X._tempVector3);var y$_=y$X._tempVector3,y$c=this._localRotationEuler;y$c[0]=y$_[1]*y$X._angleToRandin,y$c[1]=y$_[0]*y$X._angleToRandin,y$c[2]=y$_[2]*y$X._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},y$c.setLocalRotationEuler=function(y$_){if(this._parent)y$ac._quaternionCreateFromYawPitchRollArray(y$_[1]/y$X._angleToRandin,y$_[0]/y$X._angleToRandin,y$_[2]/y$X._angleToRandin,this._localRotation),this._localRotationEuler=y$_,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var y$c=this._entity.owner._transform,y$e=this._entity.localRotationEuler,y$Z=y$e.elements;y$Z[0]=y$_[0],y$Z[1]=y$_[1],y$Z[2]=y$_[2],y$c.localRotationEuler=y$e}},y$c.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)y$ac.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var y$_=this._getlocalMatrix(),y$c=0;y$c<16;++y$c)this._worldMatrix[y$c]=y$_[y$c];this._worldUpdate=!1}return this._worldMatrix},y$c.setParent=function(y$_){if(this._parent!==y$_){if(this._parent){var y$c=this._parent._childs,y$e=y$c.indexOf(this);y$c.splice(y$e,1)}y$_&&(y$_._childs.push(this),y$_&&this._onWorldTransform()),this._parent=y$_}},y$H(y$X,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),y$X}(),y$zc=function(y$_){function y$c(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,y$c.__super.call(this),this._destroyed=!1,this._id=y$c._uniqueIDCounter,y$c._uniqueIDCounter++}y$D(y$c,"laya.d3.component.Component3D",y$u);var y$e=y$c.prototype;return y$q.imps(y$e,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),y$e._initialize=function(y$_){this._owner=y$_,this._enable=!0,this.started=!1,this._load(y$_)},y$e._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},y$e._load=function(y$_){},y$e._start=function(y$_){},y$e._update=function(y$_){},y$e._lateUpdate=function(y$_){},y$e._preRenderUpdate=function(y$_){},y$e._postRenderUpdate=function(y$_){},y$e._unload=function(y$_){this.offAll()},y$e._cloneTo=function(y$_){},y$U(0,y$e,"id",function(){return this._id}),y$U(0,y$e,"destroyed",function(){return this._destroyed}),y$U(0,y$e,"owner",function(){return this._owner}),y$U(0,y$e,"enable",function(){return this._enable},function(y$_){this._enable!==y$_&&(this._enable=y$_,this.event("enablechanged",this._enable))}),y$U(0,y$e,"isSingleton",function(){return y$c._isSingleton}),y$c._isSingleton=!0,y$c._uniqueIDCounter=1,y$c}(),y$Lc=function(y$_){function y$c(){this._destroyed=!1,y$c.__super.call(this),this._destroyed=!1}y$D(y$c,"laya.d3.core.GeometryFilter",y$u);var y$e=y$c.prototype;return y$q.imps(y$e,{"laya.resource.IDestroy":!0}),y$e._destroy=function(){this.offAll(),this._destroyed=!0},y$U(0,y$e,"_isAsyncLoaded",function(){return!0}),y$U(0,y$e,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),y$U(0,y$e,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),y$U(0,y$e,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),y$U(0,y$e,"destroyed",function(){return this._destroyed}),y$c}(),y$qc=function(y$_){function y$Z(y$_){y$Z.__super.call(this),this._id=++y$Z._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new y$E_(new y$Pc,new y$Pc),this._boundingBoxCenter=new y$Pc,this._boundingSphere=new y$l_(new y$Pc,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=y$_,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}y$D(y$Z,"laya.d3.core.render.BaseRender",y$u);var y$c=y$Z.prototype;return y$q.imps(y$c,{"laya.resource.IDestroy":!0}),y$c._changeMaterialReference=function(y$_,y$c){y$_&&y$_._removeReference(),y$c._addReference()},y$c._getInstanceMaterial=function(y$_,y$c){var y$e=new y$_.constructor;return y$_.cloneTo(y$e),y$e.name=y$e.name+"(Instance)",this._materialsInstance[y$c]=!0,this._changeMaterialReference(this._materials[y$c],y$e),this._materials[y$c]=y$e},y$c._setShaderValuelightMap=function(y$_){this._setShaderValueTexture(3,y$_)},y$c._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},y$c._renderRenderableBoundBox=function(){var y$_=y$Gc._debugPhasorSprite,y$c=this.boundingBox,y$e=y$Z._tempBoundBoxCorners;y$c.getCorners(y$e),y$_.line(y$e[0],y$Z._greenColor,y$e[1],y$Z._greenColor),y$_.line(y$e[2],y$Z._greenColor,y$e[3],y$Z._greenColor),y$_.line(y$e[4],y$Z._greenColor,y$e[5],y$Z._greenColor),y$_.line(y$e[6],y$Z._greenColor,y$e[7],y$Z._greenColor),y$_.line(y$e[0],y$Z._greenColor,y$e[3],y$Z._greenColor),y$_.line(y$e[1],y$Z._greenColor,y$e[2],y$Z._greenColor),y$_.line(y$e[2],y$Z._greenColor,y$e[6],y$Z._greenColor),y$_.line(y$e[3],y$Z._greenColor,y$e[7],y$Z._greenColor),y$_.line(y$e[0],y$Z._greenColor,y$e[4],y$Z._greenColor),y$_.line(y$e[1],y$Z._greenColor,y$e[5],y$Z._greenColor),y$_.line(y$e[4],y$Z._greenColor,y$e[7],y$Z._greenColor),y$_.line(y$e[5],y$Z._greenColor,y$e[6],y$Z._greenColor)},y$c._calculateBoundingSphere=function(){throw"BaseRender: must override it."},y$c._calculateBoundingBox=function(){throw"BaseRender: must override it."},y$c._setShaderValueTexture=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c)},y$c._setShaderValueMatrix4x4=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c?y$c.elements:null)},y$c._setShaderValueColor=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c?y$c.elements:null)},y$c._setShaderValueBuffer=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c)},y$c._setShaderValueInt=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c)},y$c._setShaderValueBool=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c)},y$c._setShaderValueNumber=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c)},y$c._setShaderValueVector2=function(y$_,y$c){this._owner._shaderValues.setValue(y$_,y$c?y$c.elements:null)},y$c._addShaderDefine=function(y$_){this._owner._shaderDefineValue|=y$_},y$c._removeShaderDefine=function(y$_){this._owner._shaderDefineValue&=~y$_},y$c._renderUpdate=function(y$_){return!0},y$c._applyLightMapParams=function(){if(0<=this._lightmapIndex){var y$_=this._owner.scene;if(y$_){var y$c=y$_.getlightmaps()[this._lightmapIndex];y$c?(this._addShaderDefine(y$Nc.SAHDERDEFINE_LIGHTMAP),y$c.loaded?this._setShaderValuelightMap(y$c):y$c.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(y$Nc.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(y$Nc.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(y$Nc.SAHDERDEFINE_LIGHTMAP)},y$c._updateOctreeNode=function(){var y$_=this._treeNode;y$_&&this._octreeNodeNeedChange&&(y$_.updateObject(this),this._octreeNodeNeedChange=!1)},y$c._destroy=function(){this.offAll();var y$_=0,y$c=0;for(y$_=0,y$c=this._renderElements.length;y$_<y$c;y$_++)this._renderElements[y$_]._destroy();for(y$_=0,y$c=this._materials.length;y$_<y$c;y$_++)this._materials[y$_]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},y$U(0,y$c,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),y$U(0,y$c,"id",function(){return this._id}),y$U(0,y$c,"material",function(){var y$_=this._materials[0];if(y$_&&!this._materialsInstance[0]){var y$c=this._getInstanceMaterial(y$_,0);this.event("materialchanged",[this,0,y$c])}return this._materials[0]},function(y$_){this.sharedMaterial=y$_}),y$U(0,y$c,"sharedMaterial",function(){return this._materials[0]},function(y$_){var y$c=this._materials[0];y$c!==y$_&&(this._materials[0]=y$_,this._materialsInstance[0]=!1,this._changeMaterialReference(y$c,y$_),this.event("materialchanged",[this,0,y$_]))}),y$U(0,y$c,"lightmapIndex",function(){return this._lightmapIndex},function(y$_){this._lightmapIndex=y$_,this._applyLightMapParams()}),y$U(0,y$c,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(y$_){this._lightmapScaleOffset=y$_,this._setShaderValueColor(2,y$_),this._addShaderDefine(y$Nc.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),y$U(0,y$c,"enable",function(){return this._enable},function(y$_){this._enable=y$_,this.event("enablechanged",[this,y$_])}),y$U(0,y$c,"materials",function(){for(var y$_=0,y$c=this._materials.length;y$_<y$c;y$_++)if(!this._materialsInstance[y$_]){var y$e=this._getInstanceMaterial(this._materials[y$_],y$_);this.event("materialchanged",[this,y$_,y$e])}return this._materials.slice()},function(y$_){this.sharedMaterials=y$_}),y$U(0,y$c,"sharedMaterials",function(){return this._materials.slice()},function(y$_){if(!y$_)throw new Error("MeshRender: shadredMaterials value can't be null.");var y$c=y$_.length;this._materialsInstance.length=y$c;for(var y$e=0;y$e<y$c;y$e++){var y$Z=this._materials[y$e];y$Z!==y$_[y$e]&&(this._materialsInstance[y$e]=!1,this._changeMaterialReference(y$Z,y$_[y$e]),this.event("materialchanged",[this,y$e,y$_[y$e]]))}this._materials=y$_}),y$U(0,y$c,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),y$U(0,y$c,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var y$_=this.boundingBox;y$Pc.add(y$_.min,y$_.max,this._boundingBoxCenter),y$Pc.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),y$U(0,y$c,"receiveShadow",function(){return this._receiveShadow},function(y$_){this._receiveShadow!==y$_&&((this._receiveShadow=y$_)?this._addShaderDefine(y$Dc.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(y$Dc.SHADERDEFINE_RECEIVE_SHADOW))}),y$U(0,y$c,"destroyed",function(){return this._destroyed}),y$Z._uniqueIDCounter=0,y$H(y$Z,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc,new y$Pc]},"_greenColor",function(){return this._greenColor=new y$Oc(0,1,0,1)}]),y$Z}(),y$Kc=function(y$_){function y$O(y$_){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,y$O.__super.call(this),this._localPosition=new y$Pc,this._localRotation=new y$ec(0,0,0,1),this._localScale=new y$Pc(1,1,1),this._localRotationEuler=new y$Pc,this._localMatrix=new y$_c,this._position=new y$Pc,this._rotation=new y$ec(0,0,0,1),this._scale=new y$Pc(1,1,1),this._worldMatrix=new y$_c,this._forward=new y$Pc,this._up=new y$Pc,this._right=new y$Pc,this._owner=y$_,this._childs=[]}y$D(y$O,"laya.d3.core.Transform3D",y$u);var y$c=y$O.prototype;return y$c._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)y$_c.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var y$_=y$O._tempVector30;y$Pc.multiply(this.pivot,this._localScale,y$_);var y$c=y$O._tempVector31;y$Pc.subtract(y$_,this.pivot,y$c);var y$e=y$O._tempVector32,y$Z=this.localRotation;y$Pc.transformQuat(y$_,y$Z,y$e),y$Pc.subtract(y$e,y$_,y$e);var y$X=y$O._tempVector33;y$Pc.subtract(this._localPosition,y$c,y$X),y$Pc.subtract(y$X,y$e,y$X),y$_c.createAffineTransformation(y$X,y$Z,this._localScale,this._localMatrix)}},y$c._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._onWorldPositionRotationTransform()}},y$c._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._onWorldPositionScaleTransform()}},y$c._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._onWorldPositionTransform()}},y$c._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._onWorldPositionRotationTransform()}},y$c._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._onWorldPositionScaleTransform()}},y$c._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._onWorldTransform()}},y$c.translate=function(y$_,y$c){void 0===y$c&&(y$c=!0),y$c?(y$_c.createFromQuaternion(this.localRotation,y$O._tempMatrix0),y$Pc.transformCoordinate(y$_,y$O._tempMatrix0,y$O._tempVector30),y$Pc.add(this.localPosition,y$O._tempVector30,this._localPosition),this.localPosition=this._localPosition):(y$Pc.add(this.position,y$_,this._position),this.position=this._position)},y$c.rotate=function(y$_,y$c,y$e){var y$Z;void 0===y$c&&(y$c=!0),void 0===y$e&&(y$e=!0),y$Z=y$e?y$_:(y$Pc.scale(y$_,Math.PI/180,y$O._tempVector30),y$O._tempVector30),y$ec.createFromYawPitchRoll(y$Z.y,y$Z.x,y$Z.z,y$O._tempQuaternion0),y$c?(y$ec.multiply(this._localRotation,y$O._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(y$ec.multiply(y$O._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},y$c.lookAt=function(y$_,y$c,y$e){void 0===y$e&&(y$e=!1);var y$Z,y$X=y$_.elements;if(y$e){if(y$Z=this._localPosition.elements,Math.abs(y$Z[0]-y$X[0])<y$d_.zeroTolerance&&Math.abs(y$Z[1]-y$X[1])<y$d_.zeroTolerance&&Math.abs(y$Z[2]-y$X[2])<y$d_.zeroTolerance)return;y$ec.lookAt(this._localPosition,y$_,y$c,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var y$u=this.position;if(y$Z=y$u.elements,Math.abs(y$Z[0]-y$X[0])<y$d_.zeroTolerance&&Math.abs(y$Z[1]-y$X[1])<y$d_.zeroTolerance&&Math.abs(y$Z[2]-y$X[2])<y$d_.zeroTolerance)return;y$ec.lookAt(y$u,y$_,y$c,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},y$U(0,y$c,"_isFrontFaceInvert",function(){var y$_=this.scale,y$c=y$_.x<0;return y$_.y<0&&(y$c=!y$c),y$_.z<0&&(y$c=!y$c),y$c}),y$U(0,y$c,"owner",function(){return this._owner}),y$U(0,y$c,"localRotation",function(){if(this._localQuaternionUpdate){var y$_=this._localRotationEuler.elements;y$ec.createFromYawPitchRoll(y$_[1]/y$O._angleToRandin,y$_[0]/y$O._angleToRandin,y$_[2]/y$O._angleToRandin,this._localRotation)}return this._localRotation},function(y$_){this._localRotation=y$_,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),y$U(0,y$c,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?y$_c.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(y$_){null===this._parent?y$_.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),y$_c.multiply(this._localMatrix,y$_,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=y$_,this._worldUpdate=!1}),y$U(0,y$c,"worldNeedUpdate",function(){return this._worldUpdate}),y$U(0,y$c,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(y$_){this._localMatrix=y$_,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),y$U(0,y$c,"dummy",function(){return this._dummy},function(y$_){this._dummy!==y$_&&(this._dummy&&(this._dummy._entity=null),y$_&&(y$_._entity=this),this._dummy=y$_)}),y$U(0,y$c,"localPosition",function(){return this._localPosition},function(y$_){this._localPosition=y$_,this._localUpdate=!0,this._onWorldPositionTransform()}),y$U(0,y$c,"position",function(){if(this._positionUpdate){if(null!=this._parent){var y$_=this._parent.position;y$Pc.multiply(this._localPosition,this._parent.scale,y$O._tempVector30),y$Pc.transformQuat(y$O._tempVector30,this._parent.rotation,y$O._tempVector30),y$Pc.add(y$_,y$O._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(y$_){if(null!=this._parent){y$Pc.subtract(y$_,this._parent.position,this._localPosition);var y$c=this._parent.scale.elements,y$e=y$c[0],y$Z=y$c[1],y$X=y$c[2];if(1!==y$e||1!==y$Z||1!==y$X){var y$u=y$O._tempVector30,y$P=y$u.elements;y$P[0]=1/y$e,y$P[1]=1/y$Z,y$P[2]=1/y$X,y$Pc.multiply(this._localPosition,y$u,this._localPosition)}this._parent.rotation.invert(y$O._tempQuaternion0),y$Pc.transformQuat(this._localPosition,y$O._tempQuaternion0,this._localPosition)}else y$_.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=y$_,this._positionUpdate=!1}),y$U(0,y$c,"localScale",function(){return this._localScale},function(y$_){this._localScale=y$_,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),y$U(0,y$c,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(y$O._tempVector30);var y$_=y$O._tempVector30.elements,y$c=this._localRotationEuler.elements;y$c[0]=y$_[1]*y$O._angleToRandin,y$c[1]=y$_[0]*y$O._angleToRandin,y$c[2]=y$_[2]*y$O._angleToRandin}return this._localRotationEuler},function(y$_){this._localRotationEuler=y$_,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),y$U(0,y$c,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?y$ec.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(y$_){null!=this._parent?(this._parent.rotation.invert(y$O._tempQuaternion0),y$ec.multiply(y$_,y$O._tempQuaternion0,this._localRotation)):y$_.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=y$_,this._rotationUpdate=!1}),y$U(0,y$c,"scale",function(){return this._scaleUpdate&&(null!==this._parent?y$Pc.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(y$_){if(null!==this._parent){var y$c=this._parent.scale.elements,y$e=y$O._tempVector30.elements;y$e[0]=1/y$c[0],y$e[1]=1/y$c[1],y$e[2]=1/y$c[2],y$Pc.multiply(y$_,y$O._tempVector30,this._localScale)}else y$_.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=y$_,this._scaleUpdate=!1}),y$U(0,y$c,"rotationEuler",null,function(y$_){y$ec.createFromYawPitchRoll(y$_.y,y$_.x,y$_.z,this._rotation),this.rotation=this._rotation}),y$U(0,y$c,"forward",function(){var y$_=this.worldMatrix.elements;return this._forward.elements[0]=-y$_[8],this._forward.elements[1]=-y$_[9],this._forward.elements[2]=-y$_[10],this._forward}),y$U(0,y$c,"up",function(){var y$_=this.worldMatrix.elements;return this._up.elements[0]=y$_[4],this._up.elements[1]=y$_[5],this._up.elements[2]=y$_[6],this._up}),y$U(0,y$c,"right",function(){var y$_=this.worldMatrix.elements;return this._right.elements[0]=y$_[0],this._right.elements[1]=y$_[1],this._right.elements[2]=y$_[2],this._right}),y$U(0,y$c,"parent",function(){return this._parent},function(y$_){if(this._parent!==y$_){if(this._parent){var y$c=this._parent._childs,y$e=y$c.indexOf(this);y$c.splice(y$e,1)}y$_&&(y$_._childs.push(this),y$_&&this._onWorldTransform()),this._parent=y$_}}),y$H(y$O,["_tempVector30",function(){return this._tempVector30=new y$Pc},"_tempVector31",function(){return this._tempVector31=new y$Pc},"_tempVector32",function(){return this._tempVector32=new y$Pc},"_tempVector33",function(){return this._tempVector33=new y$Pc},"_tempQuaternion0",function(){return this._tempQuaternion0=new y$ec},"_tempMatrix0",function(){return this._tempMatrix0=new y$_c},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),y$O}(),y$Mc=(function(y$_){function y$c(){this._rotation=0,this._matNeedUpdte=!1,y$c.__super.call(this),this._matrix=new y$_c,this._offset=new y$uc,this._tiling=new y$uc(1,1)}y$D(y$c,"laya.d3.core.TransformUV",y$u);var y$e=y$c.prototype;y$q.imps(y$e,{"laya.d3.core.IClone":!0}),y$e._updateMatrix=function(){y$c._tempOffsetV3.elements[0]=this._offset.x,y$c._tempOffsetV3.elements[1]=this._offset.y,y$ec.createFromYawPitchRoll(0,0,this._rotation,y$c._tempRotationQua),y$c._tempTitlingV3.elements[0]=this._tiling.x,y$c._tempTitlingV3.elements[1]=this._tiling.y,y$_c.createAffineTransformation(y$c._tempOffsetV3,y$c._tempRotationQua,y$c._tempTitlingV3,this._matrix)},y$e.cloneTo=function(y$_){y$_._matrix=this._matrix.clone(),y$_._offset=this._offset.clone(),y$_._rotation=this._rotation,y$_._tiling=this._tiling.clone()},y$e.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$e,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),y$U(0,y$e,"tiling",function(){return this._tiling},function(y$_){this._tiling=y$_,this._matNeedUpdte=!0}),y$U(0,y$e,"offset",function(){return this._offset},function(y$_){this._offset=y$_,this._matNeedUpdte=!0}),y$U(0,y$e,"rotation",function(){return this._rotation},function(y$_){this._rotation=y$_,this._matNeedUpdte=!0}),y$H(y$c,["_tempOffsetV3",function(){return this._tempOffsetV3=new y$Pc(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new y$ec},"_tempTitlingV3",function(){return this._tempTitlingV3=new y$Pc(1,1,1)}])}(),function(y$e){function y$_(){this.x=NaN,this.y=NaN,this.z=NaN,y$_.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}y$D(y$_,"laya.d3.core.particleShuriKen.module.shape.BoxShape",y$e);var y$c=y$_.prototype;y$c._getShapeBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=.5*-this.x,y$c[1]=.5*-this.y,y$c[2]=.5*-this.z;var y$e=y$_.max.elements;y$e[0]=.5*this.x,y$e[1]=.5*this.y,y$e[2]=.5*this.z},y$c._getSpeedBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=0,y$c[1]=0,y$c[2]=0;var y$e=y$_.max.elements;y$e[0]=0,y$e[1]=1,y$e[2]=0},y$c.generatePositionAndDirection=function(y$_,y$c,y$e,y$Z){var y$X=y$_.elements,y$u=y$c.elements;y$e?(y$e.seed=y$Z[16],y$t._randomPointInsideHalfUnitBox(y$_,y$e),y$Z[16]=y$e.seed):y$t._randomPointInsideHalfUnitBox(y$_),y$X[0]=this.x*y$X[0],y$X[1]=this.y*y$X[1],y$X[2]=this.z*y$X[2],this.randomDirection?y$e?(y$e.seed=y$Z[17],y$t._randomPointUnitSphere(y$c,y$e),y$Z[17]=y$e.seed):y$t._randomPointUnitSphere(y$c):(y$u[0]=0,y$u[1]=0,y$u[2]=1)},y$c.cloneTo=function(y$_){y$e.prototype.cloneTo.call(this,y$_);var y$c=y$_;y$c.x=this.x,y$c.y=this.y,y$c.z=this.z,y$c.randomDirection=this.randomDirection}}(y$p),function(y$e){function y$P(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,y$P.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}y$D(y$P,"laya.d3.core.particleShuriKen.module.shape.CircleShape",y$e);var y$_=y$P.prototype;y$_._getShapeBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=y$c[2]=-this.radius,y$c[1]=0;var y$e=y$_.max.elements;y$e[0]=y$e[2]=this.radius,y$e[1]=0},y$_._getSpeedBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=y$c[1]=-1,y$c[2]=0;var y$e=y$_.max.elements;y$e[0]=y$e[1]=1,y$e[2]=0},y$_.generatePositionAndDirection=function(y$_,y$c,y$e,y$Z){var y$X=y$_.elements,y$u=y$P._tempPositionPoint.elements;y$e?(y$e.seed=y$Z[16],this.emitFromEdge?y$t._randomPointUnitArcCircle(this.arc,y$P._tempPositionPoint,y$e):y$t._randomPointInsideUnitArcCircle(this.arc,y$P._tempPositionPoint,y$e),y$Z[16]=y$e.seed):this.emitFromEdge?y$t._randomPointUnitArcCircle(this.arc,y$P._tempPositionPoint):y$t._randomPointInsideUnitArcCircle(this.arc,y$P._tempPositionPoint),y$X[0]=-y$u[0],y$X[1]=y$u[1],y$X[2]=0,y$Pc.scale(y$_,this.radius,y$_),this.randomDirection?y$e?(y$e.seed=y$Z[17],y$t._randomPointUnitSphere(y$c,y$e),y$Z[17]=y$e.seed):y$t._randomPointUnitSphere(y$c):y$_.cloneTo(y$c)},y$_.cloneTo=function(y$_){y$e.prototype.cloneTo.call(this,y$_);var y$c=y$_;y$c.radius=this.radius,y$c.arc=this.arc,y$c.emitFromEdge=this.emitFromEdge,y$c.randomDirection=this.randomDirection},y$H(y$P,["_tempPositionPoint",function(){return this._tempPositionPoint=new y$uc}])}(y$p),function(y$e){function y$B(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,y$B.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}y$D(y$B,"laya.d3.core.particleShuriKen.module.shape.ConeShape",y$e);var y$_=y$B.prototype;y$_._getShapeBoundBox=function(y$_){var y$c=this.radius+this.length*Math.sin(this.angle),y$e=this.length*Math.cos(this.angle),y$Z=y$_.min.elements;y$Z[0]=y$Z[1]=-y$c,y$Z[2]=0;var y$X=y$_.max.elements;y$X[0]=y$X[1]=y$c,y$X[2]=y$e},y$_._getSpeedBoundBox=function(y$_){var y$c=Math.sin(this.angle),y$e=y$_.min.elements;y$e[0]=y$e[1]=-y$c,y$e[2]=0;var y$Z=y$_.max.elements;y$Z[0]=y$e[1]=y$c,y$Z[2]=1},y$_.generatePositionAndDirection=function(y$_,y$c,y$e,y$Z){var y$X,y$u=y$_.elements,y$P=y$c.elements,y$O=y$B._tempPositionPoint.elements,y$s=NaN,y$n=NaN,y$m=Math.cos(this.angle),y$H=Math.sin(this.angle);switch(this.emitType){case 0:y$e?(y$e.seed=y$Z[16],y$t._randomPointInsideUnitCircle(y$B._tempPositionPoint,y$e),y$Z[16]=y$e.seed):y$t._randomPointInsideUnitCircle(y$B._tempPositionPoint),y$s=y$O[0],y$n=y$O[1],y$u[0]=y$s*this.radius,y$u[1]=y$n*this.radius,y$u[2]=0,this.randomDirection?(y$e?(y$e.seed=y$Z[17],y$t._randomPointInsideUnitCircle(y$B._tempDirectionPoint,y$e),y$Z[17]=y$e.seed):y$t._randomPointInsideUnitCircle(y$B._tempDirectionPoint),y$X=y$B._tempDirectionPoint.elements,y$P[0]=y$X[0]*y$H,y$P[1]=y$X[1]*y$H):(y$P[0]=y$s*y$H,y$P[1]=y$n*y$H),y$P[2]=y$m;break;case 1:y$e?(y$e.seed=y$Z[16],y$t._randomPointUnitCircle(y$B._tempPositionPoint,y$e),y$Z[16]=y$e.seed):y$t._randomPointUnitCircle(y$B._tempPositionPoint),y$s=y$O[0],y$n=y$O[1],y$u[0]=y$s*this.radius,y$u[1]=y$n*this.radius,y$u[2]=0,this.randomDirection?(y$e?(y$e.seed=y$Z[17],y$t._randomPointInsideUnitCircle(y$B._tempDirectionPoint,y$e),y$Z[17]=y$e.seed):y$t._randomPointInsideUnitCircle(y$B._tempDirectionPoint),y$X=y$B._tempDirectionPoint.elements,y$P[0]=y$X[0]*y$H,y$P[1]=y$X[1]*y$H):(y$P[0]=y$s*y$H,y$P[1]=y$n*y$H),y$P[2]=y$m;break;case 2:y$e?(y$e.seed=y$Z[16],y$t._randomPointInsideUnitCircle(y$B._tempPositionPoint,y$e)):y$t._randomPointInsideUnitCircle(y$B._tempPositionPoint),y$s=y$O[0],y$n=y$O[1],y$u[0]=y$s*this.radius,y$u[1]=y$n*this.radius,y$P[y$u[2]=0]=y$s*y$H,y$P[1]=y$n*y$H,y$P[2]=y$m,y$Pc.normalize(y$c,y$c),y$e?(y$Pc.scale(y$c,this.length*y$e.getFloat(),y$c),y$Z[16]=y$e.seed):y$Pc.scale(y$c,this.length*Math.random(),y$c),y$Pc.add(y$_,y$c,y$_),this.randomDirection&&(y$e?(y$e.seed=y$Z[17],y$t._randomPointUnitSphere(y$c,y$e),y$Z[17]=y$e.seed):y$t._randomPointUnitSphere(y$c));break;case 3:y$e?(y$e.seed=y$Z[16],y$t._randomPointUnitCircle(y$B._tempPositionPoint,y$e)):y$t._randomPointUnitCircle(y$B._tempPositionPoint),y$s=y$O[0],y$n=y$O[1],y$u[0]=y$s*this.radius,y$u[1]=y$n*this.radius,y$P[y$u[2]=0]=y$s*y$H,y$P[1]=y$n*y$H,y$P[2]=y$m,y$Pc.normalize(y$c,y$c),y$e?(y$Pc.scale(y$c,this.length*y$e.getFloat(),y$c),y$Z[16]=y$e.seed):y$Pc.scale(y$c,this.length*Math.random(),y$c),y$Pc.add(y$_,y$c,y$_),this.randomDirection&&(y$e?(y$e.seed=y$Z[17],y$t._randomPointUnitSphere(y$c,y$e),y$Z[17]=y$e.seed):y$t._randomPointUnitSphere(y$c));break;default:throw new Error("ConeShape:emitType is invalid.")}},y$_.cloneTo=function(y$_){y$e.prototype.cloneTo.call(this,y$_);var y$c=y$_;y$c.angle=this.angle,y$c.radius=this.radius,y$c.length=this.length,y$c.emitType=this.emitType,y$c.randomDirection=this.randomDirection},y$H(y$B,["_tempPositionPoint",function(){return this._tempPositionPoint=new y$uc},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new y$uc}])}(y$p),function(y$e){function y$_(){this.radius=NaN,this.emitFromShell=!1,y$_.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}y$D(y$_,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",y$e);var y$c=y$_.prototype;y$c._getShapeBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=y$c[1]=y$c[2]=-this.radius;var y$e=y$_.max.elements;y$e[0]=y$e[1]=this.radius,y$e[2]=0},y$c._getSpeedBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=y$c[1]=-1,y$c[2]=0;var y$e=y$_.max.elements;y$e[0]=y$e[1]=y$e[2]=1},y$c.generatePositionAndDirection=function(y$_,y$c,y$e,y$Z){var y$X=y$_.elements;y$e?(y$e.seed=y$Z[16],this.emitFromShell?y$t._randomPointUnitSphere(y$_,y$e):y$t._randomPointInsideUnitSphere(y$_,y$e),y$Z[16]=y$e.seed):this.emitFromShell?y$t._randomPointUnitSphere(y$_):y$t._randomPointInsideUnitSphere(y$_),y$Pc.scale(y$_,this.radius,y$_);var y$u=y$X[2];y$u<0&&(y$X[2]=-1*y$u),this.randomDirection?y$e?(y$e.seed=y$Z[17],y$t._randomPointUnitSphere(y$c,y$e),y$Z[17]=y$e.seed):y$t._randomPointUnitSphere(y$c):y$_.cloneTo(y$c)},y$c.cloneTo=function(y$_){y$e.prototype.cloneTo.call(this,y$_);var y$c=y$_;y$c.radius=this.radius,y$c.emitFromShell=this.emitFromShell,y$c.randomDirection=this.randomDirection}}(y$p),function(y$e){function y$_(){this.radius=NaN,this.emitFromShell=!1,y$_.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}y$D(y$_,"laya.d3.core.particleShuriKen.module.shape.SphereShape",y$e);var y$c=y$_.prototype;y$c._getShapeBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=y$c[1]=y$c[2]=-this.radius;var y$e=y$_.max.elements;y$e[0]=y$e[1]=y$e[2]=this.radius},y$c._getSpeedBoundBox=function(y$_){var y$c=y$_.min.elements;y$c[0]=y$c[1]=y$c[2]=-1;var y$e=y$_.max.elements;y$e[0]=y$e[1]=y$e[2]=1},y$c.generatePositionAndDirection=function(y$_,y$c,y$e,y$Z){y$e?(y$e.seed=y$Z[16],this.emitFromShell?y$t._randomPointUnitSphere(y$_,y$e):y$t._randomPointInsideUnitSphere(y$_,y$e),y$Z[16]=y$e.seed):this.emitFromShell?y$t._randomPointUnitSphere(y$_):y$t._randomPointInsideUnitSphere(y$_),y$Pc.scale(y$_,this.radius,y$_),this.randomDirection?y$e?(y$e.seed=y$Z[17],y$t._randomPointUnitSphere(y$c,y$e),y$Z[17]=y$e.seed):y$t._randomPointUnitSphere(y$c):y$_.cloneTo(y$c)},y$c.cloneTo=function(y$_){y$e.prototype.cloneTo.call(this,y$_);var y$c=y$_;y$c.radius=this.radius,y$c.emitFromShell=this.emitFromShell,y$c.randomDirection=this.randomDirection}}(y$p),function(y$_){function y$c(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,y$c.__super.call(this)}return y$D(y$c,"laya.d3.core.render.SubMeshRenderElement",y$V),y$c}()),y$fc=function(y$_){function y$a(y$_,y$c,y$e,y$Z,y$X,y$u){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=y$_,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[y$Dc.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[y$Nc.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[y$Nc.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[y$Cc.SHADERDEFINE_ALPHATEST]="ALPHATEST";y$a.__super.call(this,y$_,y$c,y$e,null,{}),this._attributeMap=y$Z;var y$P;for(y$P in y$X){var y$O=y$X[y$P];switch(y$O[1]){case 0:this._renderElementUniformMap[y$P]=y$O[0];break;case 1:this._materialUniformMap[y$P]=y$O[0];break;case 2:this._spriteUniformMap[y$P]=y$O[0];break;case 3:this._cameraUniformMap[y$P]=y$O[0];break;case 4:this._sceneUniformMap[y$P]=y$O[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}y$D(y$a,"laya.d3.shader.ShaderCompile3D",y$z);var y$c=y$a.prototype;return y$c._definesToNameDic=function(y$_,y$c){for(var y$e={},y$Z=1,y$X=0;y$X<32&&!(y$_<(y$Z=1<<y$X));y$X++)if(y$_&y$Z){var y$u=y$c[y$Z];y$u&&(y$e[y$u]="")}return y$e},y$c.withCompile=function(y$_,y$c,y$e,y$Z){var y$X,y$u,y$P;if(y$u=this.sharders[y$_])if(y$P=y$u[y$c]){if(y$X=y$P[y$e])return y$X}else y$P=y$u[y$c]=[];else y$P=(y$u=this.sharders[y$_]=[])[y$c]=[];var y$O,y$s=this._definesToNameDic(y$_,y$a._globalInt2name),y$n=this._definesToNameDic(y$c,this._spriteInt2name),y$m=this._definesToNameDic(y$e,this._materialInt2name),y$H={},y$B="";if(y$s)for(y$O in y$s)y$B+="#define "+y$O+"\n",y$H[y$O]=!0;if(y$n)for(y$O in y$n)y$B+="#define "+y$O+"\n",y$H[y$O]=!0;if(y$m)for(y$O in y$m)y$B+="#define "+y$O+"\n",y$H[y$O]=!0;var y$D=y$xc.nameKey.getName(this._name)+" compile ("+y$_+","+y$c+","+y$e+")",y$U=this._VS.toscript(y$H,[]),y$k=this._PS.toscript(y$H,[]);y$T.now();if(y$X=y$xc.create(y$B+y$U.join("\n"),y$B+y$k.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,y$Z,y$D),y$P[y$e]=y$X,laya.d3.shader.ShaderCompile3D.debugMode)y$T.now();return y$X},y$c.precompileShaderWithShaderDefine=function(y$_,y$c,y$e){this.withCompile(y$_,y$c,y$e,!0)},y$c.addMaterialDefines=function(y$_){var y$c=y$_.defines;for(var y$e in y$c){var y$Z=y$c[y$e],y$X=parseInt(y$e);this._materialInt2name[y$X]=y$Z,this._materialName2Int[y$Z]=y$X}},y$c.addSpriteDefines=function(y$_){var y$c=y$_.defines;for(var y$e in y$c){var y$Z=y$c[y$e],y$X=parseInt(y$e);this._spriteInt2name[y$X]=y$Z,this._spriteName2Int[y$Z]=y$X}},y$c.getMaterialDefineByName=function(y$_){return this._materialName2Int[y$_]},y$c.registerMaterialDefine=function(y$_){var y$c=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[y$c]=y$_,this._materialName2Int[y$_]=y$c},y$c.registerSpriteDefine=function(y$_){var y$c=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[y$c]=y$_,this._spriteName2Int[y$_]=y$c},y$a._globalRegDefine=function(y$_,y$c){y$a._globalInt2name[y$c]=y$_},y$a.add=function(y$_,y$c,y$e,y$Z,y$X){return laya.d3.shader.ShaderCompile3D._preCompileShader[y$_]=new y$a(y$_,y$c,y$e,y$Z,y$X,y$z.includes)},y$a.get=function(y$_){return laya.d3.shader.ShaderCompile3D._preCompileShader[y$xc.nameKey.getID(y$_)]},y$a._preCompileShader={},y$a._globalInt2name=[],y$a.debugMode=!1,y$a.SHADERDEFINE_HIGHPRECISION=1,y$a.SHADERDEFINE_FOG=4,y$a.SHADERDEFINE_DIRECTIONLIGHT=8,y$a.SHADERDEFINE_POINTLIGHT=16,y$a.SHADERDEFINE_SPOTLIGHT=32,y$a.SHADERDEFINE_UV0=64,y$a.SHADERDEFINE_COLOR=128,y$a.SHADERDEFINE_UV1=256,y$a.SAHDERDEFINE_DEPTHFOG=131072,y$a}(),y$Ac=function(y$_){function y$U(){y$U.__super.call(this)}y$D(y$U,"laya.d3.graphics.MeshSprite3DStaticBatchManager",y$Z_);var y$c=y$U.prototype;return y$c._getStaticBatch=function(y$_,y$c,y$e,y$Z){var y$X,y$u;return y$u=y$_?y$_.id.toString()+y$e.id.toString()+y$c.id.toString()+y$Z.toString():y$e.id.toString()+y$c.id.toString()+y$Z.toString(),this._staticBatches[y$u]?y$X=this._staticBatches[y$u]:this._staticBatches[y$u]=y$X=new y$vc(y$u,this,y$_,y$c,y$e),y$X},y$c._initStaticBatchs=function(y$_){var y$c,y$e;this._initBatchRenderElements.sort(y$U._sortPrepareStaticBatch);for(var y$Z,y$X=!1,y$u=0,y$P=0,y$O=this._initBatchRenderElements.length;y$P<y$O;y$P++){var y$s,y$n=this._initBatchRenderElements[y$P],y$m=y$n.renderObj._getVertexBuffer(0);y$n._sprite3D;if(y$e===y$m.vertexDeclaration&&y$c===y$n._material)if(y$X)y$Z._addCombineBatchRenderObjTest(y$n)?(y$s=y$n._staticBatch)!==y$Z&&(y$s&&y$s._deleteCombineBatchRenderObj(y$n),y$Z._addCombineBatchRenderObj(y$n)):(y$X=!1,y$u++);else{var y$H=this._initBatchRenderElements[y$P-1],y$B=y$H.renderObj,y$D=y$n.renderObj;y$X=!(65535<y$B._getVertexBuffer().vertexCount+y$D._getVertexBuffer().vertexCount)&&(y$Z=this._getStaticBatch(y$_,y$e,y$c,y$u),(y$s=y$H._staticBatch)!==y$Z&&(y$s&&y$s._deleteCombineBatchRenderObj(y$H),y$Z._addCombineBatchRenderObj(y$H)),(y$s=y$n._staticBatch)!==y$Z&&(y$s&&y$s._deleteCombineBatchRenderObj(y$n),y$Z._addCombineBatchRenderObj(y$n)),!0)}else y$X=!1,y$u=0;y$c=y$n._material,y$e=y$m.vertexDeclaration}},y$U._sortPrepareStaticBatch=function(y$_,y$c){var y$e=y$_._render,y$Z=y$c._render,y$X=y$e.lightmapIndex-y$Z.lightmapIndex;if(0!=y$X)return y$X;var y$u=y$e.receiveShadow-y$Z.receiveShadow;if(0!=y$u)return y$u;var y$P=y$_._mainSortID-y$c._mainSortID;return 0==y$P?y$_.renderObj.triangleCount-y$c.renderObj.triangleCount:y$P},y$U}(),y$vc=function(y$_){function y$u(y$_,y$c,y$e,y$Z,y$X){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,y$u.__super.call(this,y$_,y$c,y$e),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=y$Z,this._material=y$X}y$D(y$u,"laya.d3.graphics.SubMeshStaticBatch",y$X_);var y$c=y$u.prototype;return y$c._compareBatchRenderElement=function(y$_,y$c){return y$_._batchIndexStart>y$c._batchIndexStart},y$c._addCombineBatchRenderObjTest=function(y$_){var y$c=y$_.renderObj._vertexCount;return!(65535<(0<y$c?this._currentCombineVertexCount+y$c:this._currentCombineVertexCount+y$_.renderObj._getVertexBuffer().vertexCount))},y$c._addCombineBatchRenderObj=function(y$_){var y$c=y$_.renderObj,y$e=y$c._vertexCount;this._initBatchRenderElements.push(y$_),y$_._staticBatch=this,0<y$e?(this._currentCombineIndexCount+=y$c._indexCount,this._currentCombineVertexCount+=y$e):(this._currentCombineIndexCount=this._currentCombineIndexCount+y$c._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+y$c._getVertexBuffer().vertexCount),this._needFinishCombine=!0},y$c._deleteCombineBatchRenderObj=function(y$_){var y$c=y$_.renderObj,y$e=this._initBatchRenderElements.indexOf(y$_);if(-1!==y$e){this._initBatchRenderElements.splice(y$e,1),y$_._staticBatch=null;var y$Z=y$c._vertexCount;0<y$Z?(this._currentCombineIndexCount=this._currentCombineIndexCount-y$c._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-y$Z):(this._currentCombineIndexCount=this._currentCombineIndexCount-y$c._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-y$c._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},y$c._finishInit=function(){if(this._needFinishCombine){var y$_=0,y$c=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var y$e=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),y$Z=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=y$pc.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=y$Yc.create("ushort",this._currentCombineIndexCount,35044);for(var y$X=0,y$u=this._initBatchRenderElements.length;y$X<y$u;y$X++){var y$P=this._initBatchRenderElements[y$X],y$O=y$P.renderObj,y$s=y$O._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,y$P._sprite3D),y$n=y$O.getIndices(),y$m=y$P._sprite3D.transform._isFrontFaceInvert,y$H=y$_/(this._vertexDeclaration.vertexStride/4)-y$O._vertexStart,y$B=y$c,y$D=y$B+y$n.length;y$P._batchIndexStart=y$B,y$P._batchIndexEnd=y$D,y$Z.set(y$n,y$c);var y$U=0;if(y$m)for(y$U=y$B;y$U<y$D;y$U+=3){y$Z[y$U]=y$H+y$Z[y$U];var y$k=y$Z[y$U+1],y$a=y$Z[y$U+2];y$Z[y$U+1]=y$H+y$a,y$Z[y$U+2]=y$H+y$k}else for(y$U=y$B;y$U<y$D;y$U+=3)y$Z[y$U]=y$H+y$Z[y$U],y$Z[y$U+1]=y$H+y$Z[y$U+1],y$Z[y$U+2]=y$H+y$Z[y$U+2];y$c+=y$n.length,y$e.set(y$s,y$_),y$_+=y$s.length}this._vertexBuffer.setData(y$e),this._indexBuffer.setData(y$Z),this._needFinishCombine=!1}},y$c._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new y$Mc)},y$c._getRenderElement=function(y$_,y$c,y$e){for(var y$Z,y$X,y$u=this._batchRenderElements.length,y$P=!0,y$O=0;y$O<y$u;y$O++){var y$s,y$n,y$m=(y$X=this._batchRenderElements[y$O])._sprite3D._render;if(0!==y$O&&(y$P=(y$s=(y$Z=this._batchRenderElements[y$O-1])._sprite3D._render).lightmapIndex!==y$m.lightmapIndex||y$s.receiveShadow!==y$m.receiveShadow||y$Z._batchIndexEnd!==y$X._batchIndexStart),y$P){(y$n=this._getCombineRenderElementFromPool()).renderObj=this,y$n._material=this._material,y$n._batchIndexStart=y$X._batchIndexStart,y$n._batchIndexEnd=y$X._batchIndexEnd;var y$H=y$m.lightmapIndex,y$B=y$H+1,y$D=this._batchOwnerIndices[y$B];y$D||(y$D=this._batchOwnerIndices[y$B]=[]);var y$U,y$k=y$D[y$X._render.receiveShadow?1:0];void 0===y$k?(y$D[y$m.receiveShadow?1:0]=this._batchOwners.length,(y$U=new y$gc(null,"StaticBatchMeshSprite3D"))._scene=y$c,y$U._transform=this._rootOwner?this._rootOwner._transform:null,y$U._render.lightmapIndex=y$H,y$U._render.receiveShadow=y$X._render.receiveShadow,this._batchOwners.push(y$U)):y$U=this._batchOwners[y$k],y$U._render._renderUpdate(y$e),y$n._sprite3D=y$U,y$_.push(y$n)}else y$n._batchIndexEnd=y$X._batchIndexEnd}},y$c._beforeRender=function(y$_){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},y$c._render=function(y$_){var y$c=y$_.renderElement,y$e=y$c._batchIndexStart,y$Z=y$c._batchIndexEnd-y$e;y$y.mainContext.drawElements(4,y$Z,5123,2*y$e),y$f.drawCall++,y$f.trianglesFaces+=y$Z/3},y$c.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},y$c._getVertexBuffer=function(y$_){return void 0===y$_&&(y$_=0),this._vertexBuffer},y$u}(),y$rc=function(y$_){function y$c(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,y$c.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}y$D(y$c,"laya.d3.core.ComponentNode",y$n);var y$e=y$c.prototype;return y$e.addComponent=function(y$_){var y$c,y$e=this._componentsMap.indexOf(y$_);if(-1===y$e)y$c=[],this._componentsMap.push(y$_),this._typeComponentsIndices.push(y$c);else if(y$c=this._typeComponentsIndices[y$e],this._components[y$c[0]].isSingleton)throw new Error("无法单实例创建"+y$_+"组件，"+y$_+"组件已存在！");var y$Z=y$X.getInstance(y$_);return y$c.push(this._components.length),this._components.push(y$Z),y$Z instanceof laya.d3.component.Script&&this._scripts.push(y$Z),y$Z._initialize(this),y$Z},y$e._removeComponent=function(y$_,y$c){var y$e=this._typeComponentsIndices[y$_],y$Z=y$e[y$c],y$X=this._components[y$Z];this._components.splice(y$Z,1),y$X instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(y$X),1),y$e.splice(y$c,1),0===y$e.length&&(this._typeComponentsIndices.splice(y$_,1),this._componentsMap.splice(y$_,1));for(var y$u=0,y$P=this._componentsMap.length;y$u<y$P;y$u++)for(var y$O=(y$e=this._typeComponentsIndices[y$u]).length-1;0<=y$O;y$O--){var y$s=y$e[y$O];if(!(y$Z<y$s))break;y$e[y$O]=--y$s}y$X._destroy()},y$e.getComponentByType=function(y$_,y$c){void 0===y$c&&(y$c=0);var y$e=this._componentsMap.indexOf(y$_);return-1===y$e?null:this._components[this._typeComponentsIndices[y$e][y$c]]},y$e.getComponentsByType=function(y$_,y$c){var y$e=this._componentsMap.indexOf(y$_);if(-1!==y$e){var y$Z=this._typeComponentsIndices[y$e],y$X=y$Z.length;y$c.length=y$X;for(var y$u=0;y$u<y$X;y$u++)y$c[y$u]=this._components[y$Z[y$u]]}else y$c.length=0},y$e.getComponentByIndex=function(y$_){return this._components[y$_]},y$e.removeComponentByType=function(y$_,y$c){void 0===y$c&&(y$c=0);var y$e=this._componentsMap.indexOf(y$_);-1!==y$e&&this._removeComponent(y$e,y$c)},y$e.removeComponentsByType=function(y$_){var y$c=this._componentsMap.indexOf(y$_);if(-1!==y$c)for(var y$e=this._typeComponentsIndices[y$c],y$Z=0,y$X=y$e.length;y$Z<y$X;y$e.length<y$X?y$X--:y$Z++)this._removeComponent(y$c,y$Z)},y$e.removeAllComponent=function(){for(var y$_=0,y$c=this._componentsMap.length;y$_<y$c;this._componentsMap.length<y$c?y$c--:y$_++)this.removeComponentsByType(this._componentsMap[y$_])},y$e._updateComponents=function(y$_){for(var y$c=0,y$e=this._components.length;y$c<y$e;y$c++){var y$Z=this._components[y$c];!y$Z.started&&(y$Z._start(y$_),y$Z.started=!0),y$Z.enable&&y$Z._update(y$_)}},y$e._lateUpdateComponents=function(y$_){for(var y$c=0;y$c<this._components.length;y$c++){var y$e=this._components[y$c];!y$e.started&&(y$e._start(y$_),y$e.started=!0),y$e.enable&&y$e._lateUpdate(y$_)}},y$e._preRenderUpdateComponents=function(y$_){for(var y$c=0;y$c<this._components.length;y$c++){var y$e=this._components[y$c];!y$e.started&&(y$e._start(y$_),y$e.started=!0),y$e.enable&&y$e._preRenderUpdate(y$_)}},y$e._postRenderUpdateComponents=function(y$_){for(var y$c=0;y$c<this._components.length;y$c++){var y$e=this._components[y$c];!y$e.started&&(y$e._start(y$_),y$e.started=!0),y$e.enable&&y$e._postRenderUpdate(y$_)}},y$c}(),y$Cc=function(y$Z){function y$_(){y$_.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new y$Bc,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new y$Oc(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}y$D(y$_,"laya.d3.core.material.BaseMaterial",y$Z);var y$c=y$_.prototype;return y$q.imps(y$c,{"laya.d3.core.IClone":!0}),y$c._addShaderDefine=function(y$_){this._shaderDefineValue|=y$_},y$c._removeShaderDefine=function(y$_){this._shaderDefineValue&=~y$_},y$c._addDisablePublicShaderDefine=function(y$_){this._disablePublicShaderDefine|=y$_},y$c._removeDisablePublicShaderDefine=function(y$_){this._disablePublicShaderDefine&=~y$_},y$c._setBuffer=function(y$_,y$c){this._shaderValues.setValue(y$_,y$c),this._values[y$_]=y$c},y$c._getBuffer=function(y$_){return this._values[y$_]},y$c._setMatrix4x4=function(y$_,y$c){this._shaderValues.setValue(y$_,y$c?y$c.elements:null),this._values[y$_]=y$c},y$c._getMatrix4x4=function(y$_){return this._values[y$_]},y$c._setInt=function(y$_,y$c){this._shaderValues.setValue(y$_,y$c),this._values[y$_]=y$c},y$c._getInt=function(y$_){return this._values[y$_]},y$c._setNumber=function(y$_,y$c){this._shaderValues.setValue(y$_,y$c),this._values[y$_]=y$c},y$c._getNumber=function(y$_){return this._values[y$_]},y$c._setBool=function(y$_,y$c){this._shaderValues.setValue(y$_,y$c),this._values[y$_]=y$c},y$c._getBool=function(y$_){return this._values[y$_]},y$c._setVector2=function(y$_,y$c){this._shaderValues.setValue(y$_,y$c?y$c.elements:null),this._values[y$_]=y$c},y$c._getVector2=function(y$_){return this._values[y$_]},y$c._setColor=function(y$_,y$c){this._shaderValues.setValue(y$_,y$c?y$c.elements:null),this._values[y$_]=y$c},y$c._getColor=function(y$_){return this._values[y$_]},y$c._setTexture=function(y$_,y$c){var y$e=this._values[y$_];this._values[y$_]=y$c,this._shaderValues.setValue(y$_,y$c),0<this.referenceCount&&(y$e&&y$e._removeReference(),y$c&&y$c._addReference())},y$c._getTexture=function(y$_){return this._values[y$_]},y$c._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},y$c._getShader=function(y$_,y$c,y$e){var y$Z=(y$_|y$c)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(y$Z,y$e,this._shaderDefineValue),this._shader},y$c._setRenderStateBlendDepth=function(){var y$_=y$y.mainContext;switch(y$$.setDepthMask(y$_,this.depthWrite),0===this.depthTest?y$$.setDepthTest(y$_,!1):(y$$.setDepthTest(y$_,!0),y$$.setDepthFunc(y$_,this.depthTest)),this.blend){case 0:y$$.setBlend(y$_,!1);break;case 1:y$$.setBlend(y$_,!0),y$$.setBlendFunc(y$_,this.srcBlend,this.dstBlend);break;case 2:y$$.setBlend(y$_,!0)}},y$c._setRenderStateFrontFace=function(y$_,y$c){var y$e=y$y.mainContext,y$Z=0;switch(this.cull){case 0:y$$.setCullFace(y$e,!1);break;case 1:y$$.setCullFace(y$e,!0),y$Z=y$_?y$c&&y$c._isFrontFaceInvert?2305:2304:y$c&&y$c._isFrontFaceInvert?2304:2305,y$$.setFrontFace(y$e,y$Z);break;case 2:y$$.setCullFace(y$e,!0),y$Z=y$_?y$c&&y$c._isFrontFaceInvert?2304:2305:y$c&&y$c._isFrontFaceInvert?2305:2304,y$$.setFrontFace(y$e,y$Z)}},y$c.onAsynLoaded=function(y$_,y$c,y$e){var y$Z=y$c[0],y$X=y$c[1];switch(y$Z.version){case"LAYAMATERIAL:01":var y$u=0,y$P=0,y$O=y$Z.props;for(var y$s in y$O)switch(y$s){case"vectors":var y$n=y$O[y$s];for(y$u=0,y$P=y$n.length;y$u<y$P;y$u++){var y$m=y$n[y$u],y$H=y$m.value;switch(y$H.length){case 2:this[y$m.name]=new y$uc(y$H[0],y$H[1]);break;case 3:this[y$m.name]=new y$Pc(y$H[0],y$H[1],y$H[2]);break;case 4:this[y$m.name]=new y$Oc(y$H[0],y$H[1],y$H[2],y$H[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var y$B=y$O[y$s];for(y$u=0,y$P=y$B.length;y$u<y$P;y$u++){var y$D=y$B[y$u],y$U=y$D.path;y$U&&(this[y$D.name]=y$G.getRes(y$X[y$U]))}break;case"defines":var y$k=y$O[y$s];for(y$u=0,y$P=y$k.length;y$u<y$P;y$u++){var y$a=this._shaderCompile.getMaterialDefineByName(y$k[y$u]);this._addShaderDefine(y$a)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[y$s]=y$O[y$s];break;case"renderQueue":switch(y$O[y$s]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[y$s]=y$O[y$s]}break;case"LAYAMATERIAL:02":for(y$s in y$O=y$Z.props)switch(y$s){case"vectors":for(y$u=0,y$P=(y$n=y$O[y$s]).length;y$u<y$P;y$u++)switch((y$H=(y$m=y$n[y$u]).value).length){case 2:this[y$m.name]=new y$uc(y$H[0],y$H[1]);break;case 3:this[y$m.name]=new y$Pc(y$H[0],y$H[1],y$H[2]);break;case 4:this[y$m.name]=new y$Oc(y$H[0],y$H[1],y$H[2],y$H[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(y$u=0,y$P=(y$B=y$O[y$s]).length;y$u<y$P;y$u++)(y$U=(y$D=y$B[y$u]).path)&&(this[y$D.name]=y$G.getRes(y$X[y$U]));break;case"defines":for(y$u=0,y$P=(y$k=y$O[y$s]).length;y$u<y$P;y$u++)y$a=this._shaderCompile.getMaterialDefineByName(y$k[y$u]),this._addShaderDefine(y$a);break;default:this[y$s]=y$O[y$s]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},y$c._addReference=function(){y$Z.prototype._addReference.call(this);for(var y$_=0,y$c=this._values.length;y$_<y$c;y$_++){var y$e=this._values[y$_];y$e&&y$e instanceof laya.d3.resource.BaseTexture&&y$e._addReference()}},y$c._removeReference=function(){y$Z.prototype._removeReference.call(this);for(var y$_=0,y$c=this._values.length;y$_<y$c;y$_++){var y$e=this._values[y$_];y$e&&y$e instanceof laya.d3.resource.BaseTexture&&y$e._removeReference()}},y$c.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},y$c.setShaderName=function(y$_){var y$c=y$xc.nameKey.getID(y$_);if(-1===y$c)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=y$fc._preCompileShader[y$c]},y$c.cloneTo=function(y$_){var y$c=y$_;y$c.name=this.name,y$c.cull=this.cull,y$c.blend=this.blend,y$c.srcBlend=this.srcBlend,y$c.dstBlend=this.dstBlend,y$c.srcBlendRGB=this.srcBlendRGB,y$c.dstBlendRGB=this.dstBlendRGB,y$c.srcBlendAlpha=this.srcBlendAlpha,y$c.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(y$c.blendConstColor),y$c.blendEquation=this.blendEquation,y$c.blendEquationRGB=this.blendEquationRGB,y$c.blendEquationAlpha=this.blendEquationAlpha,y$c.depthTest=this.depthTest,y$c.depthWrite=this.depthWrite,y$c.renderQueue=this.renderQueue,y$c._shader=this._shader,y$c._disablePublicShaderDefine=this._disablePublicShaderDefine,y$c._shaderDefineValue=this._shaderDefineValue;var y$e,y$Z=0,y$X=y$c._shaderValues;y$c._shaderValues.data.length=this._shaderValues.data.length;var y$u=this._values.length,y$P=y$c._values;for(y$Z=0,y$e=y$P.length=y$u;y$Z<y$e;y$Z++){var y$O=this._values[y$Z];if(y$O)if("number"==typeof y$O)y$P[y$Z]=y$O,y$X.data[y$Z]=y$O;else if("number"==typeof y$O&&Math.floor(y$O)==y$O)y$P[y$Z]=y$O,y$X.data[y$Z]=y$O;else if("boolean"==typeof y$O)y$P[y$Z]=y$O,y$X.data[y$Z]=y$O;else if(y$O instanceof laya.d3.math.Vector2){var y$s=y$P[y$Z]||(y$P[y$Z]=new y$uc);y$O.cloneTo(y$s),y$X.data[y$Z]=y$s.elements}else if(y$O instanceof laya.d3.math.Vector3){var y$n=y$P[y$Z]||(y$P[y$Z]=new y$Pc);y$O.cloneTo(y$n),y$X.data[y$Z]=y$n.elements}else if(y$O instanceof laya.d3.math.Vector4){var y$m=y$P[y$Z]||(y$P[y$Z]=new y$Oc);y$O.cloneTo(y$m),y$X.data[y$Z]=y$m.elements}else if(y$O instanceof laya.d3.math.Matrix4x4){var y$H=y$P[y$Z]||(y$P[y$Z]=new y$_c);y$O.cloneTo(y$H),y$X.data[y$Z]=y$H.elements}else y$O instanceof laya.d3.resource.BaseTexture&&(y$P[y$Z]=y$O,y$X.data[y$Z]=y$O)}},y$c.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$U(0,y$c,"alphaTestValue",function(){return this._getNumber(0)},function(y$_){this._setNumber(0,y$_)}),y$U(0,y$c,"alphaTest",function(){return this._alphaTest},function(y$_){(this._alphaTest=y$_)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),y$_.__init__=function(){y$_.SHADERDEFINE_ALPHATEST=y$_.shaderDefines.registerDefine("ALPHATEST")},y$_.RENDERQUEUE_OPAQUE=2e3,y$_.RENDERQUEUE_ALPHATEST=2450,y$_.RENDERQUEUE_TRANSPARENT=3e3,y$_.CULL_NONE=0,y$_.CULL_FRONT=1,y$_.CULL_BACK=2,y$_.BLEND_DISABLE=0,y$_.BLEND_ENABLE_ALL=1,y$_.BLEND_ENABLE_SEPERATE=2,y$_.BLENDPARAM_ZERO=0,y$_.BLENDPARAM_ONE=1,y$_.BLENDPARAM_SRC_COLOR=768,y$_.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,y$_.BLENDPARAM_DST_COLOR=774,y$_.BLENDPARAM_ONE_MINUS_DST_COLOR=775,y$_.BLENDPARAM_SRC_ALPHA=770,y$_.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,y$_.BLENDPARAM_DST_ALPHA=772,y$_.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,y$_.BLENDPARAM_SRC_ALPHA_SATURATE=776,y$_.BLENDEQUATION_ADD=0,y$_.BLENDEQUATION_SUBTRACT=1,y$_.BLENDEQUATION_REVERSE_SUBTRACT=2,y$_.DEPTHTEST_OFF=0,y$_.DEPTHTEST_NEVER=512,y$_.DEPTHTEST_LESS=513,y$_.DEPTHTEST_EQUAL=514,y$_.DEPTHTEST_LEQUAL=515,y$_.DEPTHTEST_GREATER=516,y$_.DEPTHTEST_NOTEQUAL=517,y$_.DEPTHTEST_GEQUAL=518,y$_.DEPTHTEST_ALWAYS=519,y$_.SHADERDEFINE_ALPHATEST=1,y$_.ALPHATESTVALUE=0,y$H(y$_,["shaderDefines",function(){return this.shaderDefines=new y$mc}]),y$_}(y$a),y$yc=function(y$_){function y$c(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,y$c.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}y$D(y$c,"laya.d3.resource.BaseTexture",y$a);var y$e=y$c.prototype;return y$U(0,y$e,"width",function(){return this._width}),y$U(0,y$e,"repeat",function(){return this._repeat},function(y$_){if(this._repeat!==y$_&&(this._repeat=y$_,this._source)){var y$c=y$y.mainContext;y$$.bindTexture(y$c,this._type,this._source),y$L.isPOT(this._width,this._height)&&this._repeat?(y$c.texParameteri(this._type,10242,10497),y$c.texParameteri(this._type,10243,10497)):(y$c.texParameteri(this._type,10242,33071),y$c.texParameteri(this._type,10243,33071))}}),y$U(0,y$e,"height",function(){return this._height}),y$U(0,y$e,"magFifter",function(){return this._magFifter},function(y$_){(this._magFifter=y$_)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(y$_)}),y$U(0,y$e,"wrapModeV",function(){return this._wrapModeV}),y$U(0,y$e,"size",function(){return this._size}),y$U(0,y$e,"wrapModeU",function(){return this._wrapModeU}),y$U(0,y$e,"mipmap",function(){return this._mipmap},function(y$_){this._mipmap=y$_,this._mipmap!=y$_&&this._conchTexture&&this._conchTexture.setMipMap(y$_)}),y$U(0,y$e,"minFifter",function(){return this._minFifter},function(y$_){this._minFifter=y$_,this._minFifter!=y$_&&this._conchTexture&&this._conchTexture.setMinFifter(y$_)}),y$U(0,y$e,"format",function(){return this._format}),y$U(0,y$e,"source",function(){return this.activeResource(),this._source}),y$U(0,y$e,"defaulteTexture",function(){return y$jc.grayTexture}),y$c.WARPMODE_REPEAT=0,y$c.WARPMODE_CLAMP=1,y$c}(),y$$c=function(y$_){function y$c(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,y$c.__super.call(this),this._boundingBoxCorners=y$Z(8,null)}y$D(y$c,"laya.d3.resource.models.BaseMesh",y$a);var y$e=y$c.prototype;return y$e._getPositions=function(){throw new Error("未Override,请重载该属性！")},y$e._generateBoundingObject=function(){this._boundingSphere=new y$l_(new y$Pc,0),y$l_.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new y$E_(new y$Pc,new y$Pc),y$E_.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},y$e.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},y$e.getRenderElement=function(y$_){throw new Error("未Override,请重载该属性！")},y$U(0,y$e,"subMeshCount",function(){return this._subMeshCount}),y$U(0,y$e,"boundingBox",function(){return this._boundingBox}),y$U(0,y$e,"boundingBoxCorners",function(){return this._boundingBoxCorners}),y$U(0,y$e,"boundingSphere",function(){return this._boundingSphere}),y$c}(),y$Tc=(function(y$_){function y$c(){y$c.__super.call(this)}y$D(y$c,"laya.d3.component.Script",y$zc);var y$e=y$c.prototype;y$e.onTriggerEnter=function(y$_){},y$e.onTriggerExit=function(y$_){},y$e.onTriggerStay=function(y$_){},y$U(0,y$e,"isSingleton",function(){return y$c._isSingleton}),y$c._isSingleton=!1}(),function(y$_){function y$c(y$_){this._owner=null,this._sharedMesh=null,y$c.__super.call(this),this._owner=y$_}y$D(y$c,"laya.d3.core.MeshFilter",y$_);var y$e=y$c.prototype;return y$e._sharedMeshLoaded=function(){this.event("loaded")},y$e._destroy=function(){y$_.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},y$U(0,y$e,"sharedMesh",function(){return this._sharedMesh},function(y$_){var y$c=this._sharedMesh;y$c&&y$c._removeReference(),(this._sharedMesh=y$_)._addReference(),this.event("meshchanged",[this,y$c,y$_]),y$_.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),y$U(0,y$e,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),y$U(0,y$e,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),y$U(0,y$e,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),y$U(0,y$e,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),y$c}(y$Lc)),y$hc=function(y$_){function y$c(y$_){y$c.__super.call(this,y$_),y$_.meshFilter.on("meshchanged",this,this._onMeshChanged)}y$D(y$c,"laya.d3.core.MeshRender",y$qc);var y$e=y$c.prototype;return y$e._onMeshChanged=function(y$_,y$c,y$e){y$e.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:y$e.once("loaded",this,this._onMeshLoaed)},y$e._onMeshLoaed=function(y$_,y$c){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},y$e._calculateBoundingSphereByInitSphere=function(y$_){var y$c=NaN,y$e=this._owner.transform,y$Z=y$e.scale.elements,y$X=Math.abs(y$Z[0]),y$u=Math.abs(y$Z[1]),y$P=Math.abs(y$Z[2]);y$c=y$u<=y$X&&y$P<=y$X?y$X:y$P<=y$u?y$u:y$P,y$Pc.transformCoordinate(y$_.center,y$e.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=y$_.radius*y$c},y$e._calculateBoundBoxByInitCorners=function(y$_){for(var y$c=this._owner.transform.worldMatrix,y$e=0;y$e<8;y$e++)y$Pc.transformCoordinate(y$_[y$e],y$c,y$qc._tempBoundBoxCorners[y$e]);y$E_.createfromPoints(y$qc._tempBoundBoxCorners,this._boundingBox)},y$e._calculateBoundingSphere=function(){var y$_=this._owner.meshFilter.sharedMesh;null==y$_||null==y$_.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(y$_.boundingSphere)},y$e._calculateBoundingBox=function(){var y$_=this._owner.meshFilter.sharedMesh;null==y$_||null==y$_.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(y$_.boundingBoxCorners)},y$e._renderUpdate=function(y$_){var y$c=this._owner.transform;if(y$c){this._setShaderValueMatrix4x4(0,y$c.worldMatrix);var y$e=this._owner.getProjectionViewWorldMatrix(y$_);this._setShaderValueMatrix4x4(1,y$e)}else this._setShaderValueMatrix4x4(0,y$_c.DEFAULT),this._setShaderValueMatrix4x4(1,y$_);return y$Gc.debugMode&&this._renderRenderableBoundBox(),!0},y$c}(),y$Rc=function(y$c){function y$Z(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,y$Z.__super.call(this),this._renderState=new y$S,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new y$Bc,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new y$c_,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new y$Pc(.7,.7,.7),this.ambientColor=new y$Pc(.212,.227,.259),y$y.shaderHighPrecision&&this.addShaderDefine(y$fc.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}y$D(y$Z,"laya.d3.core.scene.Scene",y$c);var y$_=y$Z.prototype;return y$q.imps(y$_,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),y$_._setUrl=function(y$_){this._url=y$_},y$_._getGroup=function(){return this._group},y$_._setGroup=function(y$_){this._group=y$_},y$_._display=function(){y$q.stage._scenes.push(this),y$q.stage._scenes.sort(y$Z._sortScenes);for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++){var y$e=this._childs[y$_];y$e.active&&y$e._activeHierarchy()}},y$_._unDisplay=function(){var y$_=y$q.stage._scenes;y$_.splice(y$_.indexOf(this),1);for(var y$c=0,y$e=this._childs.length;y$c<y$e;y$c++){var y$Z=this._childs[y$c];y$Z.active&&y$Z._inActiveHierarchy()}},y$_._addChild3D=function(y$_){y$_.transform._onWorldTransform(),y$_._setBelongScene(this),this.displayedInStage&&y$_.active&&y$_._activeHierarchy()},y$_._removeChild3D=function(y$_){y$_.transform.parent=null,this.displayedInStage&&y$_.active&&y$_._inActiveHierarchy(),y$_._setUnBelongScene()},y$_.initOctree=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$X&&(y$X=6),this.treeSize=new y$Pc(y$_,y$c,y$e),this.treeLevel=y$X,this.treeRoot=new y$E(this,0),this.treeRoot.init(y$Z,this.treeSize)},y$_._prepareUpdateToRenderState=function(y$_,y$c){y$c.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,y$c.scene=this},y$_._prepareSceneToRender=function(y$_){var y$c=this._lights.length;if(0<y$c)for(var y$e=0,y$Z=0;y$Z<y$c&&!(this._lights[y$Z]._prepareToScene(y$_)&&++y$e>=this._enableLightCount);y$Z++);},y$_._updateChilds=function(y$_){for(var y$c=0,y$e=this._childs.length;y$c<y$e;++y$c)this._childs[y$c]._update(y$_)},y$_._preRenderScene=function(y$_,y$c,y$e){var y$Z,y$X=y$c._viewMatrix,y$u=y$c._projectionMatrix,y$P=y$c._projectionViewMatrix,y$O=0,y$s=y$c.camera;for(y$s.useOcclusionCulling?this.treeRoot?y$e_.renderObjectCullingOctree(y$e,this,y$s,y$X,y$u,y$P):y$e_.renderObjectCulling(y$e,this,y$s,y$X,y$u,y$P):y$e_.renderObjectCullingNoBoundFrustum(this,y$s,y$X,y$u,y$P),y$O=0,y$Z=this._quenes.length;y$O<y$Z;y$O++)this._quenes[y$O]&&this._quenes[y$O]._preRender(y$c)},y$_._clear=function(y$_,y$c){var y$e=y$c._viewport,y$Z=y$c.camera,y$X=y$e.x,y$u=y$Z.renderTargetSize.height-y$e.y-y$e.height,y$P=y$e.width,y$O=y$e.height;y$_.viewport(y$X,y$u,y$P,y$O);var y$s=256,y$n=y$Z.renderTarget;switch(y$Z.clearFlag){case 0:var y$m=y$Z.clearColor;if(y$m){y$_.enable(3089),y$_.scissor(y$X,y$u,y$P,y$O);var y$H=y$m.elements;y$_.clearColor(y$H[0],y$H[1],y$H[2],y$H[3]),y$s|=16384}if(y$n)switch(y$m||(y$s=16384),y$n.depthStencilFormat){case 33189:y$s|=256;break;case 36168:y$s|=1024;break;case 34041:y$s|=256,y$s|=1024}y$_.clear(y$s),y$m&&y$_.disable(3089);break;case 1:case 2:if(y$n)switch(y$s=16384,y$n.depthStencilFormat){case 33189:y$s|=256;break;case 36168:y$s|=1024;break;case 34041:y$s|=256,y$s|=1024}y$_.clear(y$s);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},y$_._renderScene=function(y$_,y$c){var y$e,y$Z,y$X=y$c.camera,y$u=0;for(y$u=0;y$u<2;y$u++)(y$Z=this._quenes[y$u])&&(y$X.renderTarget?y$Z._render(y$c,!0):y$Z._render(y$c,!1));if(1===y$X.clearFlag){var y$P=y$X.sky;y$P&&(y$$.setCullFace(y$_,!1),y$$.setDepthFunc(y$_,515),y$$.setDepthMask(y$_,!1),y$P._render(y$c),y$$.setDepthFunc(y$_,513),y$$.setDepthMask(y$_,!0))}for(y$u=2,y$e=this._quenes.length;y$u<y$e;y$u++)(y$Z=this._quenes[y$u])&&(y$Z._sortAlpha(y$c.camera.transform.position),y$X.renderTarget?y$Z._render(y$c,!0):y$Z._render(y$c,!1))},y$_._set3DRenderConfig=function(y$_){y$_.disable(3042),y$$._blend=!1,y$_.blendFunc(770,771),y$$._sFactor=770,y$$._dFactor=771,y$_.disable(2929),y$$._depthTest=!1,y$_.enable(2884),y$$._cullFace=!0,y$_.depthMask(1),y$$._depthMask=!0,y$_.frontFace(2304),y$$._frontFace=2304},y$_._set2DRenderConfig=function(y$_){y$$.setBlend(y$_,!0),y$$.setBlendFunc(y$_,1,771),y$$.setDepthTest(y$_,!1),y$$.setCullFace(y$_,!1),y$$.setDepthMask(y$_,!0),y$$.setFrontFace(y$_,2305),y$_.viewport(0,0,y$m.width,y$m.height)},y$_._parseCustomProps=function(y$_,y$c,y$e,y$Z){var y$X=y$Z.customProps.lightmaps,y$u=y$X.length,y$P=this._lightmaps;y$P.length=y$u;for(var y$O=0;y$O<y$u;y$O++)y$P[y$O]=y$G.getRes(y$c[y$X[y$O].replace(".exr",".png")]);this.setlightmaps(y$P);var y$s=y$Z.customProps.ambientColor;y$s&&(this.ambientColor=new y$Pc(y$s[0],y$s[1],y$s[2]));var y$n=y$Z.customProps.fogColor;y$n&&(this.fogColor=new y$Pc(y$n[0],y$n[1],y$n[2]))},y$_._addLight=function(y$_){this._lights.indexOf(y$_)<0&&this._lights.push(y$_)},y$_._removeLight=function(y$_){var y$c=this._lights.indexOf(y$_);0<=y$c&&this._lights.splice(y$c,1)},y$_._updateScene=function(){var y$_=this._renderState;this._prepareUpdateToRenderState(y$y.mainContext,y$_),this._updateComponents(y$_),this._updateChilds(y$_),this._lateUpdateComponents(y$_),this._time+=y$_.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},y$_._updateSceneConch=function(){var y$_=this._renderState;this._prepareUpdateToRenderState(y$y.mainContext,y$_),this._updateComponents(y$_),this._lateUpdateComponents(y$_),this._prepareSceneToRender(y$_);for(var y$c=0,y$e=this._cameraPool.length;y$c<y$e;y$c++){var y$Z=this._cameraPool[y$c];(y$_.camera=y$Z)._prepareCameraToRender()}},y$_._preRenderShadow=function(y$_,y$c,y$e,y$Z,y$X){this.treeRoot?y$e_.renderShadowObjectCullingOctree(this,y$c,y$e,y$Z,y$X):y$e_.renderShadowObjectCulling(this,y$c,y$e,y$Z,y$X);for(var y$u=0,y$P=y$e.length;y$u<y$P;y$u++)y$e[y$u]&&y$e[y$u]._preRender(y$_)},y$_._renderShadowMap=function(y$_,y$c,y$e){var y$Z=this.parallelSplitShadowMaps[0];y$Z._calcAllLightCameraInfo(y$e);var y$X,y$u,y$P,y$O=y$Z.PSSMNum;if(this._preRenderShadow(y$c,y$Z._lightCulling,y$Z._shadowQuenes,y$Z._lightVPMatrix[0],y$O),this.addShaderDefine(y$Dc.SHADERDEFINE_CAST_SHADOW),1<y$O)for(var y$s=0;y$s<y$O;y$s++)y$X=y$Z.getRenderTarget(y$s+1),y$Z.beginRenderTarget(y$s+1),y$_.clearColor(1,1,1,1),y$_.clear(16640),y$_.viewport(0,0,y$X.width,y$X.height),y$c.camera=y$P=y$Z.getLightCamera(y$s),y$P._prepareCameraToRender(),y$P._prepareCameraViewProject(y$P.viewMatrix,y$P.projectionMatrix),y$c._projectionViewMatrix=y$Z._lightVPMatrix[y$s+1],(y$u=y$Z._shadowQuenes[y$s])._preRender(y$c),y$u._renderShadow(y$c,!1),y$Z.endRenderTarget(y$s+1);else y$X=y$Z.getRenderTarget(1),y$Z.beginRenderTarget(1),y$_.clearColor(1,1,1,1),y$_.clear(16640),y$_.viewport(0,0,y$X.width,y$X.height),y$c.camera=y$P=y$Z.getLightCamera(0),y$P._prepareCameraToRender(),y$P._prepareCameraViewProject(y$P.viewMatrix,y$P.projectionMatrix),y$c._projectionViewMatrix=y$Z._lightVPMatrix[0],(y$u=y$Z._shadowQuenes[0])._preRender(y$c),y$u._renderShadow(y$c,!0),y$Z.endRenderTarget(1);this.removeShaderDefine(y$Dc.SHADERDEFINE_CAST_SHADOW)},y$_.addTreeNode=function(y$_){this.treeRoot.addTreeNode(y$_)},y$_.removeTreeNode=function(y$_){this.treeSize&&y$_._treeNode&&y$_._treeNode.removeObject(y$_)},y$_.setlightmaps=function(y$_){this._lightmaps=y$_;for(var y$c=0,y$e=this._renderableSprite3Ds.length;y$c<y$e;y$c++)this._renderableSprite3Ds[y$c]._render._applyLightMapParams()},y$_.getlightmaps=function(){return this._lightmaps},y$_.addChildAt=function(y$_,y$c){if(!(y$_ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(y$_&&y$_.__className));if(!y$_||this.destroyed||y$_===this)return y$_;if(y$_.zOrder&&this._set$P("hasZorder",!0),0<=y$c&&y$c<=this._childs.length){if(y$_._parent===this){var y$e=this.getChildIndex(y$_);this._childs.splice(y$e,1),this._childs.splice(y$c,0,y$_),this.conchModel&&(this.conchModel.removeChild(y$_.conchModel),this.conchModel.addChildAt(y$_.conchModel,y$c)),this._childChanged()}else y$_.parent&&y$_.parent.removeChild(y$_),this._childs===y$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(y$c,0,y$_),this.conchModel&&this.conchModel.addChildAt(y$_.conchModel,y$c),(y$_.parent=this)._addChild3D(y$_);return y$_}throw new Error("appendChildAt:The index is out of bounds")},y$_.addChild=function(y$_){if(!(y$_ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!y$_||this.destroyed||y$_===this)return y$_;if(y$_.zOrder&&this._set$P("hasZorder",!0),y$_._parent===this){var y$c=this.getChildIndex(y$_);y$c!==this._childs.length-1&&(this._childs.splice(y$c,1),this._childs.push(y$_),this.conchModel&&(this.conchModel.removeChild(y$_.conchModel),this.conchModel.addChildAt(y$_.conchModel,this._childs.length-1)),this._childChanged())}else y$_.parent&&y$_.parent.removeChild(y$_),this._childs===y$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(y$_),this.conchModel&&this.conchModel.addChildAt(y$_.conchModel,this._childs.length-1),(y$_.parent=this)._childChanged(),this._addChild3D(y$_);return y$_},y$_.removeChildAt=function(y$_){var y$c=this.getChildAt(y$_);return y$c&&(this._removeChild3D(y$c),this._childs.splice(y$_,1),this.conchModel&&this.conchModel.removeChild(y$c.conchModel),y$c.parent=null),y$c},y$_.removeChildren=function(y$_,y$c){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=2147483647),this._childs&&0<this._childs.length){var y$e=this._childs;if(0===y$_&&y$u<=y$c){var y$Z=y$e;this._childs=y$n.ARRAY_EMPTY}else y$Z=y$e.splice(y$_,y$c-y$_);for(var y$X=0,y$u=y$Z.length;y$X<y$u;y$X++)this._removeChild3D(y$Z[y$X]),y$Z[y$X].parent=null,this.conchModel&&this.conchModel.removeChild(y$Z[y$X].conchModel)}return this},y$_.addFrustumCullingObject=function(y$_){this.treeRoot?this.addTreeNode(y$_):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(y$_):this._cullingRenders[this._cullingRendersLength]=y$_,y$_._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},y$_.removeFrustumCullingObject=function(y$_){if(this.treeRoot)this.removeTreeNode(y$_);else{this._cullingRendersLength--;var y$c=y$_._indexInSceneFrustumCullingObjects;if(y$c!==this._cullingRendersLength){var y$e=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[y$c]=y$e)._indexInSceneFrustumCullingObjects=y$c,y$_._indexInSceneFrustumCullingObjects=-1}}},y$_.getRenderQueue=function(y$_){return y$_<3e3?this._quenes[1]||(this._quenes[1]=new y$g(this)):this._quenes[2]||(this._quenes[2]=new y$g(this))},y$_.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new y$g(this)},y$_.addShaderDefine=function(y$_){this._shaderDefineValue|=y$_},y$_.removeShaderDefine=function(y$_){this._shaderDefineValue&=~y$_},y$_.addScript=function(y$_){return this._addComponent(y$_)},y$_.getScriptByType=function(y$_,y$c){return void 0===y$c&&(y$c=0),this._getComponentByType(y$_,y$c)},y$_.getScriptsByType=function(y$_,y$c){this._getComponentsByType(y$_,y$c)},y$_.getScriptByIndex=function(y$_){return this._getComponentByIndex(y$_)},y$_.removeScriptByType=function(y$_,y$c){void 0===y$c&&(y$c=0),this._removeComponentByType(y$_,y$c)},y$_.removeScriptsByType=function(y$_){this._removeComponentByType(y$_)},y$_.removeAllScript=function(){this._removeAllComponent()},y$_.render=function(y$_,y$c,y$e){(y$k._context.ctx._renderKey=0)<this._childs.length&&y$_.addRenderObject(this)},y$_.renderSubmit=function(){var y$_=y$y.mainContext,y$c=this._renderState;this._set3DRenderConfig(y$_),this._prepareSceneToRender(this._renderState);var y$e,y$Z=0,y$X=0;if(y$Gc.debugMode||y$E.debugMode)for(y$Z=0,y$X=this._cameraPool.length;y$Z<y$X;y$Z++)y$e=this._cameraPool[y$Z],y$Gc._debugPhasorSprite.begin(1,y$e),y$e.activeInHierarchy&&y$e._renderCamera(y$_,y$c,this),y$Gc._debugPhasorSprite.end();else for(y$Z=0,y$X=this._cameraPool.length;y$Z<y$X;y$Z++)(y$e=this._cameraPool[y$Z]).activeInHierarchy&&y$e._renderCamera(y$_,y$c,this);return this._set2DRenderConfig(y$_),1},y$_.onAsynLoaded=function(y$_,y$c,y$e){var y$Z=y$c[0];if("Scene"!==y$Z.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var y$X=y$c[1];y$ac._createNodeByJson(this,y$Z,this,y$X),this.event("hierarchyloaded",[this]),this.__loaded=!0},y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),this.destroyed||(y$c.prototype.destroy.call(this,y$_),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,y$G.clearRes(this.url),this.loaded||y$Gc._cancelLoadByUrl(this.url))},y$_.getRenderType=function(){return 0},y$_.releaseRender=function(){},y$_._addComponent=function(y$_){var y$c,y$e=this._componentsMap.indexOf(y$_);if(-1===y$e)y$c=[],this._componentsMap.push(y$_),this._typeComponentsIndices.push(y$c);else if(y$c=this._typeComponentsIndices[y$e],this._components[y$c[0]].isSingleton)throw new Error("无法单实例创建"+y$_+"组件，"+y$_+"组件已存在！");var y$Z=y$X.getInstance(y$_);y$c.push(this._components.length),this._components.push(y$Z);return y$Z._initialize(this),y$Z},y$_._removeComponent=function(y$_,y$c){var y$e=this._typeComponentsIndices[y$_],y$Z=y$e[y$c],y$X=this._components[y$Z];this._components.splice(y$Z,1),y$e.splice(y$c,1),0===y$e.length&&(this._typeComponentsIndices.splice(y$_,1),this._componentsMap.splice(y$_,1));for(var y$u=0,y$P=this._componentsMap.length;y$u<y$P;y$u++)for(var y$O=(y$e=this._typeComponentsIndices[y$u]).length-1;0<=y$O;y$O--){var y$s=y$e[y$O];if(!(y$Z<y$s))break;y$e[y$O]=--y$s}y$X._destroy()},y$_._getComponentByType=function(y$_,y$c){void 0===y$c&&(y$c=0);var y$e=this._componentsMap.indexOf(y$_);return-1===y$e?null:this._components[this._typeComponentsIndices[y$e][y$c]]},y$_._getComponentsByType=function(y$_,y$c){var y$e=this._componentsMap.indexOf(y$_);if(-1!==y$e){var y$Z=this._typeComponentsIndices[y$e],y$X=y$Z.length;y$c.length=y$X;for(var y$u=0;y$u<y$X;y$u++)y$c[y$u]=this._components[y$Z[y$u]]}else y$c.length=0},y$_._getComponentByIndex=function(y$_){return this._components[y$_]},y$_._removeComponentByType=function(y$_,y$c){void 0===y$c&&(y$c=0);var y$e=this._componentsMap.indexOf(y$_);-1!==y$e&&this._removeComponent(y$e,y$c)},y$_._removeComponentsByType=function(y$_){var y$c=this._componentsMap.indexOf(y$_);if(-1!==y$c)for(var y$e=this._typeComponentsIndices[y$c],y$Z=0,y$X=y$e.length;y$Z<y$X;y$e.length<y$X?y$X--:y$Z++)this._removeComponent(y$c,y$Z)},y$_._removeAllComponent=function(){for(var y$_=0,y$c=this._componentsMap.length;y$_<y$c;this._componentsMap.length<y$c?y$c--:y$_++)this._removeComponentsByType(this._componentsMap[y$_])},y$_._updateComponents=function(y$_){for(var y$c=0,y$e=this._components.length;y$c<y$e;y$c++){var y$Z=this._components[y$c];!y$Z.started&&(y$Z._start(y$_),y$Z.started=!0),y$Z.enable&&y$Z._update(y$_)}},y$_._lateUpdateComponents=function(y$_){for(var y$c=0;y$c<this._components.length;y$c++){var y$e=this._components[y$c];!y$e.started&&(y$e._start(y$_),y$e.started=!0),y$e.enable&&y$e._lateUpdate(y$_)}},y$_._preRenderUpdateComponents=function(y$_){for(var y$c=0;y$c<this._components.length;y$c++){var y$e=this._components[y$c];!y$e.started&&(y$e._start(y$_),y$e.started=!0),y$e.enable&&y$e._preRenderUpdate(y$_)}},y$_._postRenderUpdateComponents=function(y$_){for(var y$c=0;y$c<this._components.length;y$c++){var y$e=this._components[y$c];!y$e.started&&(y$e._start(y$_),y$e.started=!0),y$e.enable&&y$e._postRenderUpdate(y$_)}},y$U(0,y$_,"_loaded",null,function(y$_){this.__loaded=y$_}),y$U(0,y$_,"fogColor",function(){return this._fogColor},function(y$_){this._fogColor=y$_,this._shaderValues.setValue(0,y$_.elements)}),y$U(0,y$_,"enableFog",function(){return this._enableFog},function(y$_){this._enableFog!==y$_&&((this._enableFog=y$_)?(this.addShaderDefine(y$fc.SHADERDEFINE_FOG),this.removeShaderDefine(y$fc.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(y$fc.SHADERDEFINE_FOG))}),y$U(0,y$_,"url",function(){return this._url}),y$U(0,y$_,"loaded",function(){return this.__loaded}),y$U(0,y$_,"enableDepthFog",function(){return this._enableDepthFog},function(y$_){this._enableDepthFog!=y$_&&((this._enableDepthFog=y$_)?(this.addShaderDefine(y$fc.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(y$fc.SHADERDEFINE_FOG)):this.removeShaderDefine(y$fc.SAHDERDEFINE_DEPTHFOG))}),y$U(0,y$_,"fogStart",function(){return this._fogStart},function(y$_){this._fogStart=y$_,this._shaderValues.setValue(1,y$_)}),y$U(0,y$_,"fogRange",function(){return this._fogRange},function(y$_){this._fogRange=y$_,this._shaderValues.setValue(2,y$_)}),y$U(0,y$_,"ambientColor",function(){return this._ambientColor},function(y$_){this._ambientColor=y$_,this._shaderValues.setValue(21,y$_.elements)}),y$U(0,y$_,"scene",function(){return this}),y$U(0,y$_,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),y$Z._sortScenes=function(y$_,y$c){if(y$_.parent!==y$q.stage||y$c.parent!==y$q.stage)return y$_.parent!==y$q.stage&&y$c.parent!==y$q.stage?y$Z._sortScenes(y$_.parent,y$c.parent):y$_.parent===y$q.stage?-1:1;var y$e=y$q.stage._childs;return y$e.indexOf(y$_)-y$e.indexOf(y$c)},y$Z.load=function(y$_){return y$q.loader.create(y$_,null,null,y$Z)},y$Z.FOGCOLOR=0,y$Z.FOGSTART=1,y$Z.FOGRANGE=2,y$Z.LIGHTDIRECTION=3,y$Z.LIGHTDIRCOLOR=4,y$Z.POINTLIGHTPOS=5,y$Z.POINTLIGHTRANGE=6,y$Z.POINTLIGHTATTENUATION=7,y$Z.POINTLIGHTCOLOR=8,y$Z.SPOTLIGHTPOS=9,y$Z.SPOTLIGHTDIRECTION=10,y$Z.SPOTLIGHTSPOT=11,y$Z.SPOTLIGHTRANGE=12,y$Z.SPOTLIGHTATTENUATION=13,y$Z.SPOTLIGHTCOLOR=14,y$Z.SHADOWDISTANCE=15,y$Z.SHADOWLIGHTVIEWPROJECT=16,y$Z.SHADOWMAPPCFOFFSET=17,y$Z.SHADOWMAPTEXTURE1=18,y$Z.SHADOWMAPTEXTURE2=19,y$Z.SHADOWMAPTEXTURE3=20,y$Z.AMBIENTCOLOR=21,y$Z.TIME=22,y$Z}(y$M),y$ic=function(y$_){function y$c(y$_){y$c.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new y$_c,this._shaderValues=new y$Bc,this._colliders=[],this._id=++y$c._uniqueIDCounter,this._transform=new y$Kc(this),this.name=y$_||"Sprite3D-"+y$c._nameNumberCounter++,this.layer=y$h.currentCreationLayer,this.active=!0}y$D(y$c,"laya.d3.core.Sprite3D",y$rc);var y$e=y$c.prototype;return y$q.imps(y$e,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),y$e._setUrl=function(y$_){this._url=y$_},y$e._getGroup=function(){return this._group},y$e._setGroup=function(y$_){this._group=y$_},y$e._addChild3D=function(y$_){y$_.transform.parent=this.transform,this._hierarchyAnimator&&(!y$_._hierarchyAnimator&&y$_._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(y$_,!0,[y$_.name])),this._scene&&(y$_._setBelongScene(this._scene),this._activeInHierarchy&&y$_._active&&y$_._activeHierarchy())},y$e._removeChild3D=function(y$_){y$_.transform.parent=null,this._scene&&(this._activeInHierarchy&&y$_._active&&y$_._inActiveHierarchy(),y$_._setUnBelongScene()),this._hierarchyAnimator&&(y$_._hierarchyAnimator==this._hierarchyAnimator&&y$_._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(y$_,!1,[y$_.name]))},y$e._parseBaseCustomProps=function(y$_){var y$c=this.transform.localPosition;y$_.translate?(y$c.fromArray(y$_.translate),y$c.x*=100,y$c.y*=100,y$c.z*=100):y$c.elements.fill(0),this.transform.localPosition=y$c;var y$e=this.transform.localRotation;y$_.rotation?y$e.fromArray(y$_.rotation):y$e.fromArray([0,0,0,-1]),this.transform.localRotation=y$e;var y$Z=this.transform.localScale;y$_.scale?y$Z.fromArray(y$_.scale):y$Z.elements.fill(1),this.transform.localScale=y$Z;var y$X=y$_.layer;null!=y$X&&(this.layer=y$h.getLayerByNumber(y$X))},y$e._parseCustomComponent=function(y$_,y$c,y$e){for(var y$Z in y$e){var y$X=y$e[y$Z];switch(y$Z){case"Animator":var y$u=this.addComponent(Animator);if(y$X.avatarPath)y$u.avatar=y$G.getRes(y$c[y$X.avatarPath]);else{var y$P=y$X.avatar;if(y$P){y$u.avatar=y$G.getRes(y$c[y$P.path]);var y$O=y$P.linkSprites;y$O&&y$_.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[y$u,y$O])}}for(var y$s=y$X.clipPaths,y$n=y$s.length,y$m=0;y$m<y$n;y$m++)y$u.addClip(y$G.getRes(y$c[y$s[y$m]]));y$u.clip=y$G.getRes(y$c[y$s[0]]);var y$H=y$X.playOnWake;void 0!==y$H&&(y$u.playOnWake=y$H);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var y$B=this.addComponent(SphereCollider);y$B.isTrigger=y$X.isTrigger;var y$D=y$B.center;y$D.fromArray(y$X.center),y$B.center=y$D,y$B.radius=y$X.radius;break;case"BoxCollider":var y$U=this.addComponent(BoxCollider);y$U.isTrigger=y$X.isTrigger,y$U.center.fromArray(y$X.center);var y$k=y$U.size;y$k.fromArray(y$X.size),y$U.size=y$k;break;case"MeshCollider":this.addComponent(MeshCollider)}}},y$e._onRootNodeHierarchyLoaded=function(y$_,y$c){for(var y$e in y$c){for(var y$Z=this,y$X=y$c[y$e],y$u=0,y$P=y$X.length;y$u<y$P;y$u++){var y$O=y$X[y$u];if(""===y$O)break;if(!(y$Z=y$Z.getChildByName(y$O)))break}y$Z&&y$_.linkSprite3DToAvatarNode(y$e,y$Z)}},y$e._setHierarchyAnimator=function(y$_,y$c){this._changeHierarchyAnimator(y$_);for(var y$e=0,y$Z=this._childs.length;y$e<y$Z;y$e++){var y$X=this._childs[y$e];y$X._hierarchyAnimator==y$c&&y$X._setHierarchyAnimator(y$_,y$c)}},y$e._clearHierarchyAnimator=function(y$_,y$c){this._changeHierarchyAnimator(y$c);for(var y$e=0,y$Z=this._childs.length;y$e<y$Z;y$e++){var y$X=this._childs[y$e];y$X._hierarchyAnimator==y$_&&y$X._clearHierarchyAnimator(y$_,y$c)}},y$e._getAnimatorToLinkSprite3D=function(y$_,y$c,y$e){var y$Z=this.getComponentByType(Animator);if(y$Z&&(y$Z.avatar?y$Z.avatar._version||y$_._setAnimatorToLinkAvatar(y$Z,y$c):y$_._setAnimatorToLinkSprite3DNoAvatar(y$Z,y$c,y$e)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){y$e.unshift(this._parent.name);var y$X=this._parent;y$X._hierarchyAnimator&&y$X._getAnimatorToLinkSprite3D(y$_,y$c,y$e)}},y$e._setAnimatorToLinkSprite3DNoAvatar=function(y$_,y$c,y$e){var y$Z=0,y$X=0;for(y$Z=0,y$X=y$_.getClipCount();y$Z<y$X;y$Z++)y$_._handleSpriteOwnersBySprite(y$Z,y$c,y$e,this);for(y$Z=0,y$X=this._childs.length;y$Z<y$X;y$Z++){var y$u=this._childs[y$Z],y$P=y$e.length;y$e.push(y$u.name),y$u._setAnimatorToLinkSprite3DNoAvatar(y$_,y$c,y$e),y$e.splice(y$P,1)}},y$e._changeHierarchyAnimator=function(y$_){this._hierarchyAnimator=y$_},y$e._isLinkSpriteToAnimationNode=function(y$_,y$c,y$e){var y$Z=y$_._avatarNodes.indexOf(y$c),y$X=y$_._cacheSpriteToNodesMap;if(y$e)this._transform.dummy=y$c.transform,y$_._cacheNodesToSpriteMap[y$Z]=y$X.length,y$X.push(y$Z);else{this._transform.dummy=null;var y$u=y$_._cacheNodesToSpriteMap[y$Z];y$_._cacheNodesToSpriteMap[y$Z]=null,y$X.splice(y$u,1)}},y$e._setBelongScene=function(y$_){this._scene=y$_;for(var y$c=0,y$e=this._childs.length;y$c<y$e;y$c++)this._childs[y$c]._setBelongScene(y$_)},y$e._setUnBelongScene=function(){this._scene=null;for(var y$_=0,y$c=this._childs.length;y$_<y$c;y$_++)this._childs[y$_]._setUnBelongScene()},y$e._activeHierarchy=function(){var y$_=0,y$c=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),y$_=0,y$c=this._colliders.length;y$_<y$c;y$_++)this._layer._addCollider(this._colliders[y$_]);for(this.event("activeinhierarchychanged",!0),y$_=0,y$c=this._childs.length;y$_<y$c;y$_++){var y$e=this._childs[y$_];y$e._active&&y$e._activeHierarchy()}},y$e._inActiveHierarchy=function(){var y$_=0,y$c=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),y$_=0,y$c=this._colliders.length;y$_<y$c;y$_++){var y$e=this._colliders[y$_];y$e._clearCollsionMap(),this._layer._removeCollider(y$e)}for(this.event("activeinhierarchychanged",!1),y$_=0,y$c=this._childs.length;y$_<y$c;y$_++){var y$Z=this._childs[y$_];y$Z._active&&y$Z._inActiveHierarchy()}},y$e.addComponent=function(y$_){var y$c,y$e=this._componentsMap.indexOf(y$_);if(-1===y$e)y$c=[],this._componentsMap.push(y$_),this._typeComponentsIndices.push(y$c);else if(y$c=this._typeComponentsIndices[y$e],this._components[y$c[0]].isSingleton)throw new Error("无法单实例创建"+y$_+"组件，"+y$_+"组件已存在！");var y$Z=y$X.getInstance(y$_);return y$c.push(this._components.length),this._components.push(y$Z),y$Z instanceof laya.d3.component.Script&&this._scripts.push(y$Z),y$Z._initialize(this),y$Z},y$e._removeComponent=function(y$_,y$c){var y$e,y$Z=0,y$X=this._typeComponentsIndices[y$_],y$u=y$X[y$c],y$P=this._components[y$u];for(y$P instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(y$P),1),y$X.splice(y$c,1),0===y$X.length&&(this._typeComponentsIndices.splice(y$_,1),this._componentsMap.splice(y$_,1)),y$Z=0,y$e=this._componentsMap.length;y$Z<y$e;y$Z++)for(var y$O=(y$X=this._typeComponentsIndices[y$Z]).length-1;0<=y$O;y$O--){var y$s=y$X[y$O];if(!(y$u<y$s))break;y$X[y$O]=--y$s}y$P._destroy()},y$e._clearSelfRenderObjects=function(){},y$e._addSelfRenderObjects=function(){},y$e._parseCustomProps=function(y$_,y$c,y$e,y$Z){},y$e._updateChilds=function(y$_){var y$c=this._childs.length;if(0!==y$c)for(var y$e=0;y$e<y$c;++y$e)this._childs[y$e]._update(y$_)},y$e._getSortID=function(y$_,y$c){return 1e3*y$c.id+y$_._getVertexBuffer().vertexDeclaration.id},y$e._update=function(y$_){(y$_.owner=this)._activeInHierarchy&&(this._updateComponents(y$_),this._lateUpdateComponents(y$_),y$f.spriteCount++,this._childs.length&&this._updateChilds(y$_))},y$e.getProjectionViewWorldMatrix=function(y$_){return y$_c.multiply(y$_,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},y$e.loadHierarchy=function(y$_){this.addChild(laya.d3.core.Sprite3D.load(y$_))},y$e.addChildAt=function(y$_,y$c){if(!(y$_ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!y$_||this.destroyed||y$_===this)return y$_;if(y$_.zOrder&&this._set$P("hasZorder",!0),0<=y$c&&y$c<=this._childs.length){if(y$_._parent===this){var y$e=this.getChildIndex(y$_);this._childs.splice(y$e,1),this._childs.splice(y$c,0,y$_),this.conchModel&&(this.conchModel.removeChild(y$_.conchModel),this.conchModel.addChildAt(y$_.conchModel,y$c)),this._childChanged()}else y$_.parent&&y$_.parent.removeChild(y$_),this._childs===y$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(y$c,0,y$_),this.conchModel&&this.conchModel.addChildAt(y$_.conchModel,y$c),(y$_.parent=this)._addChild3D(y$_);return y$_}throw new Error("appendChildAt:The index is out of bounds")},y$e.addChild=function(y$_){if(!(y$_ instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!y$_||this.destroyed||y$_===this)return y$_;if(y$_.zOrder&&this._set$P("hasZorder",!0),y$_._parent===this){var y$c=this.getChildIndex(y$_);y$c!==this._childs.length-1&&(this._childs.splice(y$c,1),this._childs.push(y$_),this.conchModel&&(this.conchModel.removeChild(y$_.conchModel),this.conchModel.addChildAt(y$_.conchModel,this._childs.length-1)),this._childChanged())}else y$_.parent&&y$_.parent.removeChild(y$_),this._childs===y$n.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(y$_),this.conchModel&&this.conchModel.addChildAt(y$_.conchModel,this._childs.length-1),(y$_.parent=this)._childChanged(),this._addChild3D(y$_);return y$_},y$e.removeChildAt=function(y$_){var y$c=this.getChildAt(y$_);return y$c&&(this._removeChild3D(y$c),this._childs.splice(y$_,1),this.conchModel&&this.conchModel.removeChild(y$c.conchModel),y$c.parent=null),y$c},y$e.removeChildren=function(y$_,y$c){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=2147483647),this._childs&&0<this._childs.length){var y$e=this._childs;if(0===y$_&&y$u<=y$c){var y$Z=y$e;this._childs=y$n.ARRAY_EMPTY}else y$Z=y$e.splice(y$_,y$c-y$_);for(var y$X=0,y$u=y$Z.length;y$X<y$u;y$X++)this._removeChild3D(y$Z[y$X]),y$Z[y$X].parent=null,this.conchModel&&this.conchModel.removeChild(y$Z[y$X].conchModel)}return this},y$e.onAsynLoaded=function(y$_,y$c,y$e){var y$Z=y$c[0];if("Sprite3D"!==y$Z.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var y$X=y$c[1];y$ac._createNodeByJson(this,y$Z,this,y$X),this.event("hierarchyloaded",[this]),this.__loaded=!0},y$e.cloneTo=function(y$_){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var y$c=y$_;y$c.name=this.name,y$c._destroyed=this._destroyed,y$c.timer=this.timer,y$c._$P=this._$P,y$c.active=this._active;var y$e=y$c.transform.localPosition;this.transform.localPosition.cloneTo(y$e),y$c.transform.localPosition=y$e;var y$Z=y$c.transform.localRotation;this.transform.localRotation.cloneTo(y$Z),y$c.transform.localRotation=y$Z;var y$X=y$c.transform.localScale;this.transform.localScale.cloneTo(y$X),y$c.transform.localScale=y$X,y$c.isStatic=this.isStatic;var y$u=0,y$P=0;for(y$u=0,y$P=this._componentsMap.length;y$u<y$P;y$u++){var y$O=y$c.addComponent(this._componentsMap[y$u]);this._components[y$u]._cloneTo(y$O)}for(y$u=0,y$P=this._childs.length;y$u<y$P;y$u++)y$c.addChild(this._childs[y$u].clone());var y$s=y$c.getComponentByType(Animator);if(y$s){var y$n=y$s._linkSpritesData;if(y$n)for(var y$m in y$n){for(var y$H=y$n[y$m],y$B=y$c,y$D=0,y$U=y$H.length;y$D<y$U&&(y$B=y$B.getChildByName(y$H[y$D]));y$D++);if(y$B){var y$k=y$s._avatarNodeMap[y$m];y$B._isLinkSpriteToAnimationNode(y$s,y$k,!0)}}}},y$e.clone=function(){var y$_=new this.constructor;return this.cloneTo(y$_),y$_},y$e.destroy=function(y$_){if(void 0===y$_&&(y$_=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,y$_);var y$c,y$e=0;for(y$e=0,y$c=this._components.length;y$e<y$c;y$e++)this._components[y$e]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,y$G.clearRes(this.url),this.loaded||y$Gc._cancelLoadByUrl(this.url)}},y$e._handleSpriteToAvatar=function(y$_,y$c){y$_._avatarNodes;var y$e=y$_._avatarNodeMap[this.name];y$e&&y$e.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(y$_,y$e,y$c)},y$e._setAnimatorToLinkAvatar=function(y$_,y$c){this._handleSpriteToAvatar(y$_,y$c);for(var y$e=0,y$Z=this._childs.length;y$e<y$Z;y$e++){this._childs[y$e]._setAnimatorToLinkAvatar(y$_,y$c)}},y$U(0,y$e,"activeInHierarchy",function(){return this._activeInHierarchy}),y$U(0,y$e,"_loaded",null,function(y$_){this.__loaded=y$_}),y$U(0,y$e,"active",function(){return this._active},function(y$_){this._active!==y$_&&(this._active=y$_,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(y$_?this._activeHierarchy():this._inActiveHierarchy()))}),y$U(0,y$e,"componentsCount",function(){return this._components.length}),y$U(0,y$e,"loaded",function(){return this.__loaded}),y$U(0,y$e,"id",function(){return this._id}),y$U(0,y$e,"url",function(){return this._url}),y$U(0,y$e,"layer",function(){return this._layer},function(y$_){if(this._layer!==y$_){if(!y$_)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var y$c=0,y$e=this._colliders.length;if(this._layer)for(y$c=0;y$c<y$e;y$c++)this._layer._removeCollider(this._colliders[y$c]);for(y$c=0;y$c<y$e;y$c++)y$_._addCollider(this._colliders[y$c])}this._layer=y$_,this.event("layerchanged",y$_)}}),y$U(0,y$e,"scene",function(){return this._scene}),y$U(0,y$e,"transform",function(){return this._transform}),y$c.instantiate=function(y$_,y$c,y$e,y$Z,y$X){void 0===y$e&&(y$e=!0);var y$u=y$_.clone();y$c&&y$c.addChild(y$u);var y$P=y$u.transform;if(y$e){var y$O=y$P.worldMatrix;y$_.transform.worldMatrix.cloneTo(y$O),y$P.worldMatrix=y$O}else y$Z&&(y$P.position=y$Z),y$X&&(y$P.rotation=y$X);return y$u},y$c.load=function(y$_){return y$q.loader.create(y$_,null,null,y$c)},y$c.WORLDMATRIX=0,y$c.MVPMATRIX=1,y$c._uniqueIDCounter=0,y$c._nameNumberCounter=0,y$c}(),y$xc=function(y$_){function y$m(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],y$m.__super.call(this),!y$_||!y$c)throw"Shader Error";this._id=++y$m._count,this._vs=y$_,this._ps=y$c,this._attributeMap=y$e,this._sceneUniformMap=y$Z,this._cameraUniformMap=y$X,this._spriteUniformMap=y$u,this._materialUniformMap=y$P,this._renderElementUniformMap=y$O,this._precompile=y$s,this._define=y$n,this._precompile&&y$m.extCompileObj&&y$m.extCompileFunc?y$m.extCompileFunc.call(y$m.extCompileObj,y$_,y$c,y$n):this.recreateResource()}y$D(y$m,"laya.d3.shader.Shader3D",y$e);var y$c=y$m.prototype;return y$c.recreateResource=function(){y$T.now();this._compile(),this.completeCreate(),this.memorySize=0},y$c.disposeResource=function(){y$y.mainContext.deleteShader(this._vshader),y$y.mainContext.deleteShader(this._pshader),y$y.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},y$c._compile=function(){if(!y$y.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var y$_=[this._vs,this._ps],y$c=y$y.mainContext;if(this._program=y$c.createProgram(),this._vshader=y$m._createShader(y$c,y$_[0],35633),this._pshader=y$m._createShader(y$c,y$_[1],35632),y$c.attachShader(this._program,this._vshader),y$c.attachShader(this._program,this._pshader),y$c.linkProgram(this._program),!y$k.isConchApp&&y$fc.debugMode&&!y$c.getProgramParameter(this._program,35714))throw y$c.getProgramInfoLog(this._program);var y$e,y$Z=0,y$X=0,y$u=0;for(y$u=y$k.isConchApp?y$c.getProgramParameterEx(this._vs,this._ps,"",35721):y$c.getProgramParameter(this._program,35721),y$Z=0;y$Z<y$u;y$Z++){var y$P=null;y$e={vartype:"attribute",ivartype:0,attrib:y$P=y$k.isConchApp?y$c.getActiveAttribEx(this._vs,this._ps,"",y$Z):y$c.getActiveAttrib(this._program,y$Z),location:y$c.getAttribLocation(this._program,y$P.name),name:y$P.name,type:y$P.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(y$e)}var y$O=0;for(y$O=y$k.isConchApp?y$c.getProgramParameterEx(this._vs,this._ps,"",35718):y$c.getProgramParameter(this._program,35718),y$Z=0;y$Z<y$O;y$Z++){var y$s=null;y$s=y$k.isConchApp?y$c.getActiveUniformEx(this._vs,this._ps,"",y$Z):y$c.getActiveUniform(this._program,y$Z),0<(y$e={vartype:"uniform",ivartype:1,attrib:y$P,location:y$c.getUniformLocation(this._program,y$s.name),name:y$s.name,type:y$s.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(y$e.name=y$e.name.substr(0,y$e.name.length-3),y$e.isArray=!0,y$e.location=y$c.getUniformLocation(this._program,y$e.name)),this._uniformParams.push(y$e)}for(y$Z=0,y$X=this._attributeParams.length;y$Z<y$X;y$Z++)(y$e=this._attributeParams[y$Z]).indexOfParams=y$Z,y$e.index=1,y$e.value=[y$e.location,null],y$e.codename=y$e.name,y$e.name=null!=this._attributeMap[y$e.codename]?this._attributeMap[y$e.codename]:y$e.codename,this._attributeParamsMap.push(y$e.name),this._attributeParamsMap.push(y$e),y$e._this=this,y$e.uploadedValue=[],y$e.fun=this._attribute;for(y$Z=0,y$X=this._uniformParams.length;y$Z<y$X;y$Z++)switch((y$e=this._uniformParams[y$Z]).indexOfParams=y$Z,y$e.index=1,y$e.value=[y$e.location,null],y$e.codename=y$e.name,null!=this._sceneUniformMap[y$e.codename]?(y$e.name=this._sceneUniformMap[y$e.codename],this._sceneUniformParamsMap.push(y$e.name),this._sceneUniformParamsMap.push(y$e)):null!=this._cameraUniformMap[y$e.codename]?(y$e.name=this._cameraUniformMap[y$e.codename],this._cameraUniformParamsMap.push(y$e.name),this._cameraUniformParamsMap.push(y$e)):null!=this._spriteUniformMap[y$e.codename]?(y$e.name=this._spriteUniformMap[y$e.codename],this._spriteUniformParamsMap.push(y$e.name),this._spriteUniformParamsMap.push(y$e)):null!=this._materialUniformMap[y$e.codename]?(y$e.name=this._materialUniformMap[y$e.codename],this._materialUniformParamsMap.push(y$e.name),this._materialUniformParamsMap.push(y$e)):null!=this._renderElementUniformMap[y$e.codename]?(y$e.name=this._renderElementUniformMap[y$e.codename],this._renderElementUniformParamsMap.push(y$e.name),this._renderElementUniformParamsMap.push(y$e)):console.log("Shader:can't find uinform name:"+y$e.codename+" in shader file."),y$e._this=this,y$e.uploadedValue=[],y$e.type){case 5124:y$e.fun=y$e.isArray?this._uniform1iv:this._uniform1i;break;case 5126:y$e.fun=y$e.isArray?this._uniform1fv:this._uniform1f;break;case 35664:y$e.fun=y$e.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:y$e.fun=y$e.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:y$e.fun=y$e.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:y$e.fun=this._uniform_sampler2D;break;case 35680:y$e.fun=this._uniform_samplerCube;break;case 35676:y$e.fun=this._uniformMatrix4fv;break;case 35670:y$e.fun=this._uniform1i;break;case 35674:y$e.fun=this._uinformMatrix2fv;break;case 35675:y$e.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},y$c._attribute=function(y$_,y$c){var y$e=y$y.mainContext,y$Z=y$O._enableAtributes,y$X=y$_.location;return y$Z[y$X]||y$e.enableVertexAttribArray(y$X),y$e.vertexAttribPointer(y$X,y$c[0],y$c[1],y$c[2],y$c[3],y$c[4]),y$Z[y$X]=y$O._bindVertexBuffer,1},y$c._uniform1f=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c?(y$y.mainContext.uniform1f(y$_.location,y$e[0]=y$c),1):0},y$c._uniform1fv=function(y$_,y$c){if(y$c.length<4){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$y.mainContext.uniform1fv(y$_.location,y$c),y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3],1):0}return y$y.mainContext.uniform1fv(y$_.location,y$c),1},y$c._uniform_vec2=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]?(y$y.mainContext.uniform2f(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1]),1):0},y$c._uniform_vec2v=function(y$_,y$c){if(y$c.length<2){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$y.mainContext.uniform2fv(y$_.location,y$c),y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3],1):0}return y$y.mainContext.uniform2fv(y$_.location,y$c),1},y$c._uniform_vec3=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]?(y$y.mainContext.uniform3f(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2]),1):0},y$c._uniform_vec3v=function(y$_,y$c){return y$y.mainContext.uniform3fv(y$_.location,y$c),1},y$c._uniform_vec4=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$y.mainContext.uniform4f(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3]),1):0},y$c._uniform_vec4v=function(y$_,y$c){return y$y.mainContext.uniform4fv(y$_.location,y$c),1},y$c._uniformMatrix2fv=function(y$_,y$c){return y$y.mainContext.uniformMatrix2fv(y$_.location,!1,y$c),1},y$c._uniformMatrix3fv=function(y$_,y$c){return y$y.mainContext.uniformMatrix3fv(y$_.location,!1,y$c),1},y$c._uniformMatrix4fv=function(y$_,y$c){return y$y.mainContext.uniformMatrix4fv(y$_.location,!1,y$c),1},y$c._uinformMatrix2fv=function(y$_,y$c){return y$y.mainContext.uniformMatrix2fv(y$_.location,!1,y$c),1},y$c._uinformMatrix3fv=function(y$_,y$c){return y$y.mainContext.uniformMatrix3fv(y$_.location,!1,y$c),1},y$c._uniform1i=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c?(y$y.mainContext.uniform1i(y$_.location,y$e[0]=y$c),1):0},y$c._uniform1iv=function(y$_,y$c){return y$y.mainContext.uniform1iv(y$_.location,y$c),1},y$c._uniform_ivec2=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]?(y$y.mainContext.uniform2i(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1]),1):0},y$c._uniform_ivec2v=function(y$_,y$c){return y$y.mainContext.uniform2iv(y$_.location,y$c),1},y$c._uniform_vec3i=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]?(y$y.mainContext.uniform3i(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2]),1):0},y$c._uniform_vec3vi=function(y$_,y$c){return y$y.mainContext.uniform3iv(y$_.location,y$c),1},y$c._uniform_vec4i=function(y$_,y$c){var y$e=y$_.uploadedValue;return y$e[0]!==y$c[0]||y$e[1]!==y$c[1]||y$e[2]!==y$c[2]||y$e[3]!==y$c[3]?(y$y.mainContext.uniform4i(y$_.location,y$e[0]=y$c[0],y$e[1]=y$c[1],y$e[2]=y$c[2],y$e[3]=y$c[3]),1):0},y$c._uniform_vec4vi=function(y$_,y$c){return y$y.mainContext.uniform4iv(y$_.location,y$c),1},y$c._uniform_sampler2D=function(y$_,y$c){var y$e=y$c.source||y$c.defaulteTexture.source,y$Z=y$y.mainContext,y$X=y$_.uploadedValue;if(null!=y$X[0])return y$Z.activeTexture(y$m._TEXTURES[y$X[0]]),y$e&&y$$.bindTexture(y$Z,3553,y$e),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return y$X[0]=this._curActTexIndex,y$Z.uniform1i(y$_.location,this._curActTexIndex),y$Z.activeTexture(y$m._TEXTURES[this._curActTexIndex]),y$e&&y$$.bindTexture(y$Z,3553,y$e),this._curActTexIndex++,1},y$c._uniform_samplerCube=function(y$_,y$c){var y$e=y$c.source||y$c.defaulteTexture.source,y$Z=y$y.mainContext,y$X=y$_.uploadedValue;if(null!=y$X[0])return y$Z.activeTexture(y$m._TEXTURES[y$X[0]]),y$e?y$$.bindTexture(y$Z,34067,y$e):y$$.bindTexture(y$Z,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return y$X[0]=this._curActTexIndex,y$Z.uniform1i(y$_.location,this._curActTexIndex),y$Z.activeTexture(y$m._TEXTURES[this._curActTexIndex]),y$e?y$$.bindTexture(y$Z,34067,y$e):y$$.bindTexture(y$Z,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},y$c._noSetValue=function(y$_){console.log("no....:"+y$_.name)},y$c.bind=function(){return y$e.activeShader=this,(y$e.bindShader=this).activeResource(),y$$.UseProgram(this._program)},y$c.uploadAttributes=function(y$_,y$c){for(var y$e,y$Z,y$X=0,y$u=0,y$P=this._attributeParamsMap.length;y$u<y$P;y$u+=2)y$Z=this._attributeParamsMap[y$u+1],null!=(y$e=y$_[this._attributeParamsMap[y$u]])&&(y$c&&y$c[y$Z.name]&&y$c[y$Z.name].bind(),y$X+=y$Z.fun.call(this,y$Z,y$e));y$f.shaderCall+=y$X},y$c.uploadAttributesX=function(y$_,y$c){for(var y$e,y$Z,y$X=0,y$u=0,y$P=this._attributeParamsMap.length;y$u<y$P;y$u+=2)y$Z=this._attributeParamsMap[y$u+1],null!=(y$e=y$_[this._attributeParamsMap[y$u]])&&(y$c._bind(),y$X+=y$Z.fun.call(this,y$Z,y$e));y$f.shaderCall+=y$X},y$c.uploadSceneUniforms=function(y$_){for(var y$c,y$e,y$Z=0,y$X=0,y$u=this._sceneUniformParamsMap.length;y$X<y$u;y$X+=2)y$e=this._sceneUniformParamsMap[y$X+1],null!=(y$c=y$_[this._sceneUniformParamsMap[y$X]])&&(y$Z+=y$e.fun.call(this,y$e,y$c));y$f.shaderCall+=y$Z},y$c.uploadCameraUniforms=function(y$_){for(var y$c,y$e,y$Z=0,y$X=0,y$u=this._cameraUniformParamsMap.length;y$X<y$u;y$X+=2)y$e=this._cameraUniformParamsMap[y$X+1],null!=(y$c=y$_[this._cameraUniformParamsMap[y$X]])&&(y$Z+=y$e.fun.call(this,y$e,y$c));y$f.shaderCall+=y$Z},y$c.uploadSpriteUniforms=function(y$_){for(var y$c,y$e,y$Z=0,y$X=0,y$u=this._spriteUniformParamsMap.length;y$X<y$u;y$X+=2)y$e=this._spriteUniformParamsMap[y$X+1],null!=(y$c=y$_[this._spriteUniformParamsMap[y$X]])&&(y$Z+=y$e.fun.call(this,y$e,y$c));y$f.shaderCall+=y$Z},y$c.uploadMaterialUniforms=function(y$_){for(var y$c,y$e,y$Z=0,y$X=0,y$u=this._materialUniformParamsMap.length;y$X<y$u;y$X+=2)y$e=this._materialUniformParamsMap[y$X+1],null!=(y$c=y$_[this._materialUniformParamsMap[y$X]])&&(y$Z+=y$e.fun.call(this,y$e,y$c));y$f.shaderCall+=y$Z},y$c.uploadRenderElementUniforms=function(y$_){for(var y$c,y$e,y$Z=0,y$X=0,y$u=this._renderElementUniformParamsMap.length;y$X<y$u;y$X+=2)y$e=this._renderElementUniformParamsMap[y$X+1],null!=(y$c=y$_[this._renderElementUniformParamsMap[y$X]])&&(y$Z+=y$e.fun.call(this,y$e,y$c));y$f.shaderCall+=y$Z},y$m.create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){return new y$m(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n)},y$m.addInclude=function(y$_,y$c){y$z.addInclude(y$_,y$c)},y$m._createShader=function(y$_,y$c,y$e){var y$Z=y$_.createShader(y$e);if(y$_.shaderSource(y$Z,y$c),y$_.compileShader(y$Z),y$fc.debugMode&&!y$_.getShaderParameter(y$Z,35713))throw y$_.getShaderInfoLog(y$Z);return y$Z},y$m.PERIOD_RENDERELEMENT=0,y$m.PERIOD_MATERIAL=1,y$m.PERIOD_SPRITE=2,y$m.PERIOD_CAMERA=3,y$m.PERIOD_SCENE=4,y$m._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],y$m._count=0,y$m._preCompile=!1,y$m.extCompileFunc=null,y$m.extCompileObj=null,y$H(y$m,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new y$A}]),y$m}(),y$Fc=function(y$O){function y$s(){this._transformUV=null,y$s.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new y$Pc(.6,.6,.6)),this._setColor(10,new y$Pc(1,1,1)),this._setColor(11,new y$Oc(1,1,1,8)),this._setColor(12,new y$Pc(1,1,1)),this._setColor(7,new y$Oc(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new y$Oc(1,1,0,0)),this.renderMode=1}y$D(y$s,"laya.d3.core.material.StandardMaterial",y$O);var y$_=y$s.prototype;return y$_.disableLight=function(){this._addDisablePublicShaderDefine(y$fc.SHADERDEFINE_POINTLIGHT|y$fc.SHADERDEFINE_SPOTLIGHT|y$fc.SHADERDEFINE_DIRECTIONLIGHT)},y$_.disableFog=function(){this._addDisablePublicShaderDefine(y$fc.SHADERDEFINE_FOG)},y$_.onAsynLoaded=function(y$_,y$c,y$e){var y$Z=y$c[0];if(y$Z.version)y$O.prototype.onAsynLoaded.call(this,y$_,y$c,y$e);else{var y$X=y$c[1],y$u=y$Z.props;for(var y$P in y$u)this[y$P]=y$u[y$P];y$s._parseStandardMaterial(y$X,this,y$Z),this._endLoaded()}},y$_.cloneTo=function(y$_){y$O.prototype.cloneTo.call(this,y$_);var y$c=y$_;this._transformUV&&(y$c._transformUV=this._transformUV.clone())},y$U(0,y$_,"ambientColor",function(){return this._getColor(9)},function(y$_){this._setColor(9,y$_)}),y$U(0,y$_,"ambientTexture",function(){return this._getTexture(5)},function(y$_){y$_?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,y$_)}),y$U(0,y$_,"renderMode",null,function(y$_){switch(y$_){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(y$s.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(y$_)}),y$U(0,y$_,"reflectColor",function(){return this._getColor(12)},function(y$_){this._setColor(12,y$_)}),y$U(0,y$_,"tilingOffset",function(){return this._getColor(15)},function(y$_){if(y$_){var y$c=y$_.elements;1!=y$c[0]||1!=y$c[1]||0!=y$c[2]||0!=y$c[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,y$_)}),y$U(0,y$_,"albedo",function(){return this._getColor(7)},function(y$_){this._setColor(7,y$_)}),y$U(0,y$_,"diffuseColor",function(){return this._getColor(10)},function(y$_){this._setColor(10,y$_)}),y$U(0,y$_,"albedoColor",function(){return this._getColor(7)},function(y$_){this._setColor(7,y$_)}),y$U(0,y$_,"specularColor",function(){return this._getColor(11)},function(y$_){this._setColor(11,y$_)}),y$U(0,y$_,"diffuseTexture",function(){return this._getTexture(1)},function(y$_){y$_?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,y$_)}),y$U(0,y$_,"normalTexture",function(){return this._getTexture(2)},function(y$_){y$_?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,y$_)}),y$U(0,y$_,"specularTexture",function(){return this._getTexture(3)},function(y$_){y$_?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,y$_)}),y$U(0,y$_,"emissiveTexture",function(){return this._getTexture(4)},function(y$_){y$_?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,y$_)}),y$U(0,y$_,"reflectTexture",function(){return this._getTexture(6)},function(y$_){y$_?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,y$_)}),y$U(0,y$_,"transformUV",function(){return this._transformUV},function(y$_){this._transformUV=y$_,this._setMatrix4x4(13,y$_.matrix),y$_?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,y$_.matrix.elements,0)}),y$s.__init__=function(){y$s.SHADERDEFINE_DIFFUSEMAP=y$s.shaderDefines.registerDefine("DIFFUSEMAP"),y$s.SHADERDEFINE_NORMALMAP=y$s.shaderDefines.registerDefine("NORMALMAP"),y$s.SHADERDEFINE_SPECULARMAP=y$s.shaderDefines.registerDefine("SPECULARMAP"),y$s.SHADERDEFINE_EMISSIVEMAP=y$s.shaderDefines.registerDefine("EMISSIVEMAP"),y$s.SHADERDEFINE_AMBIENTMAP=y$s.shaderDefines.registerDefine("AMBIENTMAP"),y$s.SHADERDEFINE_REFLECTMAP=y$s.shaderDefines.registerDefine("REFLECTMAP"),y$s.SHADERDEFINE_UVTRANSFORM=y$s.shaderDefines.registerDefine("UVTRANSFORM"),y$s.SHADERDEFINE_TILINGOFFSET=y$s.shaderDefines.registerDefine("TILINGOFFSET"),y$s.SHADERDEFINE_ADDTIVEFOG=y$s.shaderDefines.registerDefine("ADDTIVEFOG")},y$s.load=function(y$_){return y$q.loader.create(y$_,null,null,y$s)},y$s._parseStandardMaterial=function(y$_,y$c,y$e){var y$Z=y$e.customProps,y$X=y$Z.ambientColor;y$c.ambientColor=new y$Pc(y$X[0],y$X[1],y$X[2]);var y$u=y$Z.diffuseColor;y$c.diffuseColor=new y$Pc(y$u[0],y$u[1],y$u[2]);var y$P=y$Z.specularColor;y$c.specularColor=new y$Oc(y$P[0],y$P[1],y$P[2],y$P[3]);var y$O=y$Z.reflectColor;y$c.reflectColor=new y$Pc(y$O[0],y$O[1],y$O[2]);var y$s=y$Z.albedoColor;y$s&&(y$c.albedo=new y$Oc(y$s[0],y$s[1],y$s[2],y$s[3]));var y$n=y$Z.diffuseTexture.texture2D;y$n&&(y$c.diffuseTexture=y$G.getRes(y$_[y$n]));var y$m=y$Z.normalTexture.texture2D;y$m&&(y$c.normalTexture=y$G.getRes(y$_[y$m]));var y$H=y$Z.specularTexture.texture2D;y$H&&(y$c.specularTexture=y$G.getRes(y$_[y$H]));var y$B=y$Z.emissiveTexture.texture2D;y$B&&(y$c.emissiveTexture=y$G.getRes(y$_[y$B]));var y$D=y$Z.ambientTexture.texture2D;y$D&&(y$c.ambientTexture=y$G.getRes(y$_[y$D]));var y$U=y$Z.reflectTexture.texture2D;y$U&&(y$c.reflectTexture=y$G.getRes(y$_[y$U]))},y$s.RENDERMODE_OPAQUE=1,y$s.RENDERMODE_OPAQUEDOUBLEFACE=2,y$s.RENDERMODE_CUTOUT=3,y$s.RENDERMODE_CUTOUTDOUBLEFACE=4,y$s.RENDERMODE_TRANSPARENT=13,y$s.RENDERMODE_TRANSPARENTDOUBLEFACE=14,y$s.RENDERMODE_ADDTIVE=15,y$s.RENDERMODE_ADDTIVEDOUBLEFACE=16,y$s.RENDERMODE_DEPTHREAD_TRANSPARENT=5,y$s.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,y$s.RENDERMODE_DEPTHREAD_ADDTIVE=7,y$s.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,y$s.RENDERMODE_NONDEPTH_TRANSPARENT=9,y$s.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,y$s.RENDERMODE_NONDEPTH_ADDTIVE=11,y$s.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,y$s.SHADERDEFINE_DIFFUSEMAP=0,y$s.SHADERDEFINE_NORMALMAP=0,y$s.SHADERDEFINE_SPECULARMAP=0,y$s.SHADERDEFINE_EMISSIVEMAP=0,y$s.SHADERDEFINE_AMBIENTMAP=0,y$s.SHADERDEFINE_REFLECTMAP=0,y$s.SHADERDEFINE_UVTRANSFORM=0,y$s.SHADERDEFINE_TILINGOFFSET=0,y$s.SHADERDEFINE_ADDTIVEFOG=0,y$s.DIFFUSETEXTURE=1,y$s.NORMALTEXTURE=2,y$s.SPECULARTEXTURE=3,y$s.EMISSIVETEXTURE=4,y$s.AMBIENTTEXTURE=5,y$s.REFLECTTEXTURE=6,y$s.ALBEDO=7,y$s.UVANIAGE=8,y$s.MATERIALAMBIENT=9,y$s.MATERIALDIFFUSE=10,y$s.MATERIALSPECULAR=11,y$s.MATERIALREFLECT=12,y$s.UVMATRIX=13,y$s.UVAGE=14,y$s.TILINGOFFSET=15,y$H(y$s,["defaultMaterial",function(){var y$_=new y$s;return y$_.lock=!0,this.defaultMaterial=y$_},"shaderDefines",function(){return this.shaderDefines=new y$mc(y$Cc.shaderDefines)}]),y$s}(y$Cc),y$Yc=function(y$_){function y$P(y$_,y$c,y$e,y$Z,y$X){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===y$e&&(y$e=35044),void 0===y$Z&&(y$Z=!1),y$P.__super.call(this),this._indexType=y$_,this._indexCount=y$c,this._bufferUsage=y$e,this._bufferType=34963,this._canRead=y$Z;var y$u;if("ushort"==y$_)this._indexTypeByteCount=2;else{if("ubyte"!=y$_)throw new Error("unidentification index type.");this._indexTypeByteCount=1}y$u=this._indexTypeByteCount*y$c,this._byteLength=y$u,this._bind(),y$O._gl.bufferData(this._bufferType,y$u,this._bufferUsage),this.uri=y$X,y$Z?("ushort"==y$_?this._buffer=new Uint16Array(y$c):"ubyte"==y$_&&(this._buffer=new Uint8Array(y$c)),this.memorySize=2*y$u):this.memorySize=y$u}y$D(y$P,"laya.d3.graphics.IndexBuffer3D",y$_);var y$c=y$P.prototype;return y$c.setData=function(y$_,y$c,y$e,y$Z){void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=4294967295);var y$X=0;if("ushort"==this._indexType?(y$X=2,0===y$e&&4294967295===y$Z||(y$_=new Uint16Array(y$_.buffer,y$e*y$X,y$Z))):"ubyte"==this._indexType&&(y$X=1,0===y$e&&4294967295===y$Z||(y$_=new Uint8Array(y$_.buffer,y$e*y$X,y$Z))),this._bind(),y$O._gl.bufferSubData(this._bufferType,y$c*y$X,y$_),this._canRead)if(0!==y$c||0!==y$e||4294967295!==y$Z){var y$u=this._buffer.length-y$c;y$u<y$Z&&(y$Z=y$u);for(var y$P=0;y$P<y$Z;y$P++)this._buffer[y$c+y$P]=y$_[y$P]}else this._buffer=y$_},y$c.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},y$c.disposeResource=function(){y$_.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},y$U(0,y$c,"indexType",function(){return this._indexType}),y$U(0,y$c,"indexTypeByteCount",function(){return this._indexTypeByteCount}),y$U(0,y$c,"indexCount",function(){return this._indexCount}),y$U(0,y$c,"canRead",function(){return this._canRead}),y$P.INDEXTYPE_UBYTE="ubyte",y$P.INDEXTYPE_USHORT="ushort",y$P.create=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$e&&(y$e=35044),void 0===y$Z&&(y$Z=!1),new y$P(y$_,y$c,y$e,y$Z,y$X)},y$P}(y$O),y$pc=function(y$u){function y$P(y$_,y$c,y$e,y$Z,y$X){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===y$Z&&(y$Z=!1),y$P.__super.call(this),this._vertexDeclaration=y$_,this._vertexCount=y$c,this._bufferUsage=y$e,this._bufferType=34962,this._canRead=y$Z,this.uri=y$X,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*y$c,this._bind(),y$O._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),y$Z&&(this._buffer=new Float32Array(this._byteLength/4))}y$D(y$P,"laya.d3.graphics.VertexBuffer3D",y$u);var y$_=y$P.prototype;return y$_.bindWithIndexBuffer=function(y$_){y$_&&y$_._bind(),this._bind()},y$_.setData=function(y$_,y$c,y$e,y$Z){if(void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=4294967295),0===y$e&&4294967295===y$Z||(y$_=new Float32Array(y$_.buffer,4*y$e,y$Z)),this._bind(),y$O._gl.bufferSubData(this._bufferType,4*y$c,y$_),this._canRead)if(0!==y$c||0!==y$e||4294967295!==y$Z){var y$X=this._buffer.length-y$c;y$X<y$Z&&(y$Z=y$X);for(var y$u=0;y$u<y$Z;y$u++)this._buffer[y$c+y$u]=y$_[y$u]}else this._buffer=y$_},y$_.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},y$_.disposeResource=function(){for(var y$_=y$y.mainContext,y$c=this._vertexDeclaration.getVertexElements(),y$e=y$O._enableAtributes,y$Z=0,y$X=y$c.length;y$Z<y$X;y$Z++)y$e[y$Z]===this._glBuffer&&(y$_.disableVertexAttribArray(y$Z),y$e[y$Z]=null);y$u.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},y$U(0,y$_,"vertexDeclaration",function(){return this._vertexDeclaration}),y$U(0,y$_,"vertexCount",function(){return this._vertexCount}),y$U(0,y$_,"canRead",function(){return this._canRead}),y$P.create=function(y$_,y$c,y$e,y$Z,y$X){return void 0===y$e&&(y$e=35044),void 0===y$Z&&(y$Z=!1),new y$P(y$_,y$c,y$e,y$Z,y$X)},y$P}(y$O),y$oc=function(y$_){function y$z(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,y$z.__super.call(this),this._type=3553}y$D(y$z,"laya.d3.resource.DataTexture2D",y$yc);var y$c=y$z.prototype;return y$c.genDebugMipmaps=function(){var y$_=[];return y$_.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),y$_.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),y$_.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),y$_.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),y$_.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),y$_.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),y$_.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),y$_.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),y$_.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),y$_.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),y$_},y$c._onTextureLoaded=function(y$_){},y$c._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var y$_=y$y.mainContext,y$c=this._source=y$_.createTexture(),y$e=this._width,y$Z=this._height,y$X=y$$.curBindTexTarget,y$u=y$$.curBindTexValue,y$P=!1;if(y$$.bindTexture(y$_,this._type,y$c),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var y$O=0;y$_.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var y$s=0;y$s<this._mipmaps.length;y$s++){if(this._mipmaps[y$s].byteLength!=y$n*y$m*4)throw"mipmap size error  level:"+y$s;y$_.texSubImage2D(this._type,0,y$z.simLodRect[y$O++],y$z.simLodRect[y$O++],y$z.simLodRect[y$O++],y$z.simLodRect[y$O++],6408,5121,new Uint8Array(this._mipmaps[y$s]))}this.minFifter=9729,this.magFifter=9729}else{var y$n=this._width,y$m=this._height;for(y$O=0,y$_.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),y$s=0;y$s<this._mipmaps.length;y$s++){if(this._mipmaps[y$s].byteLength!=y$n*y$m*4)throw"mipmap size error  level:"+y$s;y$_.texImage2D(this._type,y$s,6408,y$n,y$m,0,6408,5121,new Uint8Array(this._mipmaps[y$s])),(y$n/=2)<1&&(y$n=1),(y$m/=2)<1&&(y$m=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&y$_.pixelStorei(y$_.UNPACK_ALIGNMENT,1),y$_.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var y$H=0,y$B=!1,y$D=!1;this._buffer.byteLength==4*y$e*y$Z?(y$H=6408,y$B=!0):this._buffer.byteLength==3*y$e*y$Z?(y$H=6407,y$D=!0):y$H=this._format,y$B||y$D?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),y$D&&y$_.pixelStorei(y$_.UNPACK_ALIGNMENT,1),y$_.texImage2D(this._type,0,y$H,y$e,y$Z,0,y$H,5121,this._buffer)):y$_&&y$H==y$_.ALPHA?(y$_.texImage2D(3553,0,y$H,y$e,y$Z,0,y$H,y$_.UNSIGNED_BYTE,this._buffer),y$P=!0):0!=y$H&&(y$_.compressedTexImage2D(3553,0,y$H,y$e,y$Z,0,this._buffer),y$P=!0)}var y$U=this._minFifter,y$k=this._magFifter,y$a=0==this._wrapModeU?10497:33071,y$G=0==this._wrapModeV?10497:33071,y$w=y$L.isPOT(y$e,y$Z);y$w?(this._mipmap||this._mipmaps?-1!==y$U||(y$U=9987):-1!==y$U||(y$U=9729),-1!==y$k||(y$k=9729),y$_.texParameteri(this._type,10241,y$U),y$_.texParameteri(this._type,10240,y$k),y$_.texParameteri(this._type,10242,y$a),y$_.texParameteri(this._type,10243,y$G),this._mipmap&&y$_.generateMipmap(this._type)):(-1!==y$U||(y$U=9729),-1!==y$k||(y$k=9729),y$_.texParameteri(this._type,10241,y$U),y$_.texParameteri(this._type,10240,y$k),y$_.texParameteri(this._type,10242,33071),y$_.texParameteri(this._type,10243,33071)),y$X&&y$u&&y$$.bindTexture(y$_,y$X,y$u),this.memorySize=y$P?this._buffer.length:y$w?y$e*y$Z*4*(1+1/3):y$e*y$Z*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},y$c.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},y$c.onAsynLoaded=function(y$_,y$c,y$e){var y$Z;y$e&&(y$Z=y$e[0].call(this,y$c)),y$Z&&(this._width=y$Z.width,this._height=y$Z.height,this._buffer=y$Z.data),this._src=y$_,this._size=new y$kc(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},y$c.getPixels=function(){return new Uint8Array(this._buffer)},y$c.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(y$y.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},y$U(0,y$c,"src",function(){return this._src}),y$z.create=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){if(void 0===y$Z&&(y$Z=9729),void 0===y$X&&(y$X=9729),void 0===y$u&&(y$u=!0),!y$_||y$_.byteLength<y$c*y$e*4)throw"DataTexture2D create error";var y$O=new y$z;return y$O.uri=y$P,y$O._buffer=y$_,y$O._width=y$c,y$O._height=y$e,y$O._mipmap=y$u,y$O._magFifter=y$Z,y$O._minFifter=y$X,y$O._size=new y$kc(y$O._width,y$O._height),y$O._conchTexture?alert("怎么给runtime传递datatexture数据"):y$O.activeResource(),y$O},y$z.load=function(y$_,y$c,y$e,y$Z,y$X){if(void 0===y$c&&(y$c=0),void 0===y$e&&(y$e=0),void 0===y$Z&&(y$Z=9729),void 0===y$X&&(y$X=9729),"mipmaps"===y$v.getFileExtension(y$_)){var y$u=y$q.loader.create(y$_,null,null,y$z,[function(y$_){this._mipmaps=[];var y$c=new Uint32Array(y$_);this._width=y$c[0];var y$e=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,y$e=1024),this._width!=y$e)throw"现在只支持512x256的环境贴图。当前的是"+y$c[0];this._height=y$c[1];for(var y$Z=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,y$X=this._height,y$u=8;;){var y$P=y$Z*y$X*4;if(y$u+y$P>y$_.byteLength)throw"load mipmaps data size error ";var y$O=new Uint8Array(y$_,y$u,y$P);if(this._mipmaps.push(y$O),y$u+=y$P,1==y$Z&&1==y$X)break;(y$Z/=2)<1&&(y$Z=1),(y$X/=2)<1&&(y$X=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){y$u.simLodInfo=new Float32Array(40);for(var y$P=0;y$P<y$u.simLodInfo.length;)y$u.simLodInfo[y$P]=(y$z.simLodRect[y$P]+.5)/1024,y$P++,y$u.simLodInfo[y$P]=(y$z.simLodRect[y$P]+.5)/256,y$P++,y$u.simLodInfo[y$P]=Math.max(y$z.simLodRect[y$P]-1,.1)/1024,y$P++,y$u.simLodInfo[y$P]=Math.max(y$z.simLodRect[y$P]-1.5,.1)/256,y$P++}return y$u}if("number"==typeof y$c)return y$q.loader.create(y$_,null,null,y$z,[function(y$_){return this._width=y$c,this._height=y$e,this._buffer=y$_,null}]);if("function"==typeof y$c)return y$q.loader.create(y$_,null,null,y$z,[y$c]);throw new Error("unknown params.")},y$z.lodasatlas=!1,y$H(y$z,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),y$z}(),y$Qc=function(y$_){function y$c(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,y$c.__super.call(this)}y$D(y$c,"laya.d3.resource.models.PrimitiveMesh",y$$c);var y$e=y$c.prototype;return y$q.imps(y$e,{"laya.d3.core.render.IRenderable":!0}),y$e._getVertexBuffer=function(y$_){return void 0===y$_&&(y$_=0),0===y$_?this._vertexBuffer:null},y$e._getVertexBuffers=function(){return null},y$e._getIndexBuffer=function(){return this._indexBuffer},y$e._getPositions=function(){var y$_,y$c=[],y$e=this._vertexBuffer.vertexDeclaration.getVertexElements(),y$Z=0;for(y$Z=0;y$Z<y$e.length;y$Z++){var y$X=y$e[y$Z];if("vector3"===y$X.elementFormat&&0===y$X.elementUsage){y$_=y$X;break}}var y$u=this._vertexBuffer.getData();for(y$Z=0;y$Z<y$u.length;y$Z+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var y$P=y$Z+y$_.offset/4,y$O=new y$Pc(y$u[y$P+0],y$u[y$P+1],y$u[y$P+2]);y$c.push(y$O)}return y$c},y$e.getRenderElement=function(y$_){return this},y$e.getRenderElementsCount=function(){return 1},y$e.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},y$e._beforeRender=function(y$_){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},y$e._render=function(y$_){y$y.mainContext.drawElements(4,this._numberIndices,5123,0),y$f.drawCall++,y$f.trianglesFaces+=this._numberIndices/3},y$U(0,y$e,"_vertexBufferCount",function(){return 1}),y$U(0,y$e,"triangleCount",function(){return this._indexBuffer.indexCount/3}),y$c}(),y$Jc=function(y$_){function y$c(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,y$c.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}y$D(y$c,"laya.d3.resource.models.Mesh",y$$c);var y$e=y$c.prototype;return y$e._getPositions=function(){var y$_,y$c,y$e,y$Z,y$X,y$u=[],y$P=0,y$O=0,y$s=0;if(0!==this._vertexBuffers.length){var y$n=this._vertexBuffers.length;for(y$P=0;y$P<y$n;y$P++){for(y$e=(y$_=this._vertexBuffers[y$P]).vertexDeclaration.getVertexElements(),y$O=0;y$O<y$e.length;y$O++)if("vector3"===(y$Z=y$e[y$O]).elementFormat&&0===y$Z.elementUsage){y$c=y$Z;break}for(y$X=y$_.getData(),y$O=0;y$O<y$X.length;y$O+=y$_.vertexDeclaration.vertexStride/4)y$s=y$O+y$c.offset/4,y$u.push(new y$Pc(y$X[y$s+0],y$X[y$s+1],y$X[y$s+2]))}}else{var y$m=this._subMeshes.length;for(y$P=0;y$P<y$m;y$P++){for(y$e=(y$_=this._subMeshes[y$P]._getVertexBuffer()).vertexDeclaration.getVertexElements(),y$O=0;y$O<y$e.length;y$O++)if("vector3"===(y$Z=y$e[y$O]).elementFormat&&0===y$Z.elementUsage){y$c=y$Z;break}for(y$X=y$_.getData(),y$O=0;y$O<y$X.length;y$O+=y$_.vertexDeclaration.vertexStride/4)y$s=y$O+y$c.offset/4,y$u.push(new y$Pc(y$X[y$s+0],y$X[y$s+1],y$X[y$s+2]))}}return y$u},y$e._setSubMeshes=function(y$_){this._subMeshes=y$_,this._subMeshCount=y$_.length;for(var y$c=0;y$c<this._subMeshCount;y$c++)y$_[y$c]._indexInMesh=y$c;this._positions=this._getPositions(),this._generateBoundingObject()},y$e.onAsynLoaded=function(y$_,y$c,y$e){var y$Z=y$c[0],y$X=y$c[1];y$S_.read(y$Z,this,this._materials,this._subMeshes,y$X),this.completeCreate(),this._endLoaded()},y$e.getSubMesh=function(y$_){return this._subMeshes[y$_]},y$e.getSubMeshCount=function(){return this._subMeshes.length},y$e.getRenderElementsCount=function(){return this._subMeshes.length},y$e.getRenderElement=function(y$_){return this._subMeshes[y$_]},y$e.disposeResource=function(){for(var y$_=0;y$_<this._subMeshes.length;y$_++)this._subMeshes[y$_].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},y$U(0,y$e,"materials",function(){return this._materials.slice()}),y$U(0,y$e,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),y$c.load=function(y$_){return y$q.loader.create(y$_,null,null,y$c)},y$c}(),y$jc=(function(y$_){function y$n(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===y$e&&(y$e=6408),void 0===y$Z&&(y$Z=5121),void 0===y$X&&(y$X=33189),void 0===y$u&&(y$u=!1),void 0===y$P&&(y$P=!1),void 0===y$O&&(y$O=-1),void 0===y$s&&(y$s=-1),y$n.__super.call(this),this._type=3553,this._width=y$_,this._height=y$c,this._size=new y$kc(y$_,y$c),this._surfaceFormat=y$e,this._surfaceType=y$Z,this._depthStencilFormat=y$X,y$k.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=y$u,this._repeat=y$P,this._minFifter=y$O,this._magFifter=y$s,this.activeResource(),this._alreadyResolved=!0}y$D(y$n,"laya.d3.resource.RenderTexture",y$yc);var y$c=y$n.prototype;y$c.recreateResource=function(){var y$_=y$y.mainContext;this._frameBuffer=y$_.createFramebuffer(),this._source=y$_.createTexture();var y$c=y$$.curBindTexTarget,y$e=y$$.curBindTexValue;y$$.bindTexture(y$_,this._type,this._source),y$_.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var y$Z=this._minFifter,y$X=this._magFifter,y$u=this._repeat?10497:33071;if(y$L.isPOT(this._width,this._height)?(this._mipmap?-1!==y$Z||(y$Z=9987):-1!==y$Z||(y$Z=9729),-1!==y$X||(y$X=9729),y$_.texParameteri(this._type,10241,y$Z),y$_.texParameteri(this._type,10240,y$X),y$_.texParameteri(this._type,10242,y$u),y$_.texParameteri(this._type,10243,y$u),this._mipmap&&y$_.generateMipmap(this._type)):(-1!==y$Z||(y$Z=9729),-1!==y$X||(y$X=9729),y$_.texParameteri(this._type,10241,y$Z),y$_.texParameteri(this._type,10240,y$X),y$_.texParameteri(this._type,10242,33071),y$_.texParameteri(this._type,10243,33071)),y$c&&y$e&&y$$.bindTexture(y$_,y$c,y$e),y$_.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=y$_.createRenderbuffer(),y$_.bindRenderbuffer(36161,this._depthStencilBuffer),y$_.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),y$_.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:y$_.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:y$_.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:y$_.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}y$_.framebufferTexture2D(36160,36064,3553,this._source,0),y$_.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},y$c.start=function(){y$y.mainContext.bindFramebuffer(36160,this.frameBuffer),(y$n._currentRenderTarget=this)._alreadyResolved=!1},y$c.end=function(){y$y.mainContext.bindFramebuffer(36160,null),y$n._currentRenderTarget=null,this._alreadyResolved=!0},y$c.getData=function(y$_,y$c,y$e,y$Z){var y$X=y$y.mainContext;if(y$X.bindFramebuffer(36160,this._frameBuffer),!(36053===y$X.checkFramebufferStatus(36160)))return y$X.bindFramebuffer(36160,null),null;var y$u=new Uint8Array(this._width*this._height*4);return y$X.readPixels(y$_,y$c,y$e,y$Z,this._surfaceFormat,this._surfaceType,y$u),y$X.bindFramebuffer(36160,null),y$u},y$c.disposeResource=function(){if(this._frameBuffer){var y$_=y$y.mainContext;y$_.deleteTexture(this._source),y$_.deleteFramebuffer(this._frameBuffer),y$_.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},y$U(0,y$c,"surfaceFormat",function(){return this._surfaceFormat}),y$U(0,y$c,"surfaceType",function(){return this._surfaceType}),y$U(0,y$c,"depthStencilFormat",function(){return this._depthStencilFormat}),y$U(0,y$c,"source",function(){return this._alreadyResolved?y$q.superGet(y$yc,this,"source"):null}),y$U(0,y$c,"depthStencilBuffer",function(){return this._depthStencilBuffer}),y$U(0,y$c,"frameBuffer",function(){return this._frameBuffer}),y$n._currentRenderTarget=null}(),function(y$_){function y$c(y$_){this._color=null,this._pixels=null,y$c.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new y$kc(this.width,this.height),this._color=y$_,this._pixels=new Uint8Array([255*y$_.x,255*y$_.y,255*y$_.z,255*y$_.w]),this.uri="SolidColorTexture2D_"+this.id}y$D(y$c,"laya.d3.resource.SolidColorTexture2D",y$yc);var y$e=y$c.prototype;return y$e._createWebGlTexture=function(){var y$_=y$y.mainContext,y$c=this._source=y$_.createTexture(),y$e=this._width,y$Z=this._height,y$X=y$$.curBindTexTarget,y$u=y$$.curBindTexValue;y$$.bindTexture(y$_,this._type,y$c),y$_.texImage2D(this._type,0,6408,y$e,y$Z,0,6408,5121,this._pixels);var y$P=this._minFifter,y$O=this._magFifter,y$s=this._repeat?10497:33071,y$n=y$L.isPOT(y$e,y$Z);y$n?(this._mipmap?-1!==y$P||(y$P=9987):-1!==y$P||(y$P=9729),-1!==y$O||(y$O=9729),y$_.texParameteri(this._type,10241,y$P),y$_.texParameteri(this._type,10240,y$O),y$_.texParameteri(this._type,10242,y$s),y$_.texParameteri(this._type,10243,y$s),this._mipmap&&y$_.generateMipmap(this._type)):(-1!==y$P||(y$P=9729),-1!==y$O||(y$O=9729),y$_.texParameteri(this._type,10241,y$P),y$_.texParameteri(this._type,10240,y$O),y$_.texParameteri(this._type,10242,33071),y$_.texParameteri(this._type,10243,33071)),y$X&&y$u&&y$$.bindTexture(y$_,y$X,y$u),this.memorySize=y$n?y$e*y$Z*4*(1+1/3):y$e*y$Z*4},y$e.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},y$e.disposeResource=function(){this._source&&(y$y.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},y$H(y$c,["magentaTexture",function(){var y$_=new y$c(new y$Oc(1,0,1,1));return y$_.lock=!0,this.magentaTexture=y$_},"grayTexture",function(){var y$_=new y$c(new y$Oc(.5,.5,.5,1));return y$_.lock=!0,this.grayTexture=y$_}]),y$c}()),y$tc=function(y$_){function y$X(y$_,y$c,y$e,y$Z){this._canRead=!1,this._image=null,this._pixels=null,void 0===y$_&&(y$_=!1),void 0===y$c&&(y$c=!0),void 0===y$e&&(y$e=6408),void 0===y$Z&&(y$Z=!0),y$X.__super.call(this),this._type=3553,this._repeat=y$c,this._canRead=y$_,this._format=y$e,this._mipmap=y$Z}y$D(y$X,"laya.d3.resource.Texture2D",y$yc);var y$c=y$X.prototype;return y$c._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var y$_=y$y.mainContext,y$c=this._source=y$_.createTexture(),y$e=this._width,y$Z=this._height,y$X=y$$.curBindTexTarget,y$u=y$$.curBindTexValue;switch(y$$.bindTexture(y$_,this._type,y$c),this._format){case 6407:case 6408:this._canRead?y$_.texImage2D(this._type,0,this._format,y$e,y$Z,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?y$_.texImage2D(this._type,0,this._image._format,y$e,y$Z,0,this._image._format,5121,this._image.atlasSource):y$_.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case y$y.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:y$_.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var y$P=this._minFifter,y$O=this._magFifter,y$s=this._repeat?10497:33071,y$n=0==this._wrapModeU?10497:33071,y$m=0==this._wrapModeV?10497:33071,y$H=y$L.isPOT(y$e,y$Z);y$H?(this._mipmap?-1!==y$P||(y$P=9987):-1!==y$P||(y$P=9729),-1!==y$O||(y$O=9729),y$_.texParameteri(this._type,10241,y$P),y$_.texParameteri(this._type,10240,y$O),y$_.texParameteri(this._type,10242,y$s),y$_.texParameteri(this._type,10243,y$s),y$_.texParameteri(this._type,10242,y$n),y$_.texParameteri(this._type,10243,y$m),this._mipmap&&y$_.generateMipmap(this._type)):(-1!==y$P||(y$P=9729),-1!==y$O||(y$O=9729),y$_.texParameteri(this._type,10241,y$P),y$_.texParameteri(this._type,10240,y$O),y$_.texParameteri(this._type,10242,33071),y$_.texParameteri(this._type,10243,33071)),y$X&&y$u&&y$$.bindTexture(y$_,y$X,y$u),this._image.onload=null,this._image=null,this.memorySize=y$H?y$e*y$Z*4*(1+1/3):y$e*y$Z*4},y$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},y$c.onAsynLoaded=function(y$_,y$c,y$e){if(y$e){var y$Z=y$e[0];void 0!==y$Z&&(this._canRead=y$Z);var y$X=y$e[1];void 0!==y$X&&(this._repeat=y$X);var y$u=y$e[2];void 0!==y$u&&(this._format=y$u);var y$P=y$e[3];void 0!==y$P&&(this._mipmap=y$P);var y$O=y$e.wrapModeU;void 0!==y$O&&(this._wrapModeU=y$O);var y$s=y$e.wrapModeV;void 0!==y$s&&(this._wrapModeV=y$s)}switch(this._format){case 6407:case 6408:var y$n=(this._image=y$c).width,y$m=y$c.height;this._width=y$n,this._height=y$m,this._size=new y$kc(y$n,y$m),this._canRead&&(y$k.isConchApp?y$c instanceof y$B.HTMLElement&&(this._pixels=new Uint8Array(y$c.getImageData(0,0,y$n,y$m))):(y$T.canvas.size(y$n,y$m),y$T.canvas.clear(),y$T.context.drawImage(y$c,0,0,y$n,y$m),this._pixels=new Uint8Array(y$T.context.getImageData(0,0,y$n,y$m).data.buffer)));break;case y$y.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var y$H=new y$K(y$c);y$H.readUTFBytes(4),y$H.readUTFBytes(2),y$H.getInt16();y$H.endian="bigEndian",this._width=y$H.getInt16(),this._height=y$H.getInt16(),this._size=new y$kc(this._width,this._height);y$H.getInt16(),y$H.getInt16();this._image=new Uint8Array(y$c,y$H.pos)}this.recreateResource(),this._endLoaded()},y$c.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},y$c.disposeResource=function(){this._source&&(y$y.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},y$U(0,y$c,"_src",function(){return this.url}),y$U(0,y$c,"src",function(){return this.url}),y$X.load=function(y$_){return y$q.loader.create(y$_,null,null,y$X)},y$X}(),y$bc=function(y$c){function y$e(y$_,y$c){y$e.__super.call(this),void 0===y$_&&(y$_=.3),void 0===y$c&&(y$c=1e3),this._tempVector3=new y$Pc,this._position=new y$Pc,this._up=new y$Pc,this._forward=new y$Pc,this._right=new y$Pc,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=y$kc.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=y$_,this._farPlane=y$c,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),y$q.stage.on("resize",this,this._onScreenSizeChanged)}y$D(y$e,"laya.d3.core.BaseCamera",y$c);var y$_=y$e.prototype;return y$_._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var y$_=this.scene._cameraPool,y$c=y$_.length-1,y$e=0;y$e<y$c;y$e++)if(y$_[y$e].renderingOrder>y$_[y$c].renderingOrder){var y$Z=y$_[y$e];y$_[y$e]=y$_[y$c],y$_[y$c]=y$Z}},y$_._calculateProjectionMatrix=function(){},y$_._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},y$_._prepareCameraToRender=function(){y$h._currentCameraCullingMask=this.cullingMask;var y$_=this._shaderValues;y$_.setValue(0,this.transform.position.elements),y$_.setValue(5,this.forward.elements),y$_.setValue(6,this.up.elements)},y$_._prepareCameraViewProject=function(y$_,y$c){var y$e=this._shaderValues;y$e.setValue(1,y$_.elements),y$e.setValue(2,y$c.elements)},y$_._renderCamera=function(y$_,y$c,y$e){},y$_.addLayer=function(y$_){29!==y$_.number&&30!=y$_.number&&(this.cullingMask=this.cullingMask|y$_.mask)},y$_.removeLayer=function(y$_){29!==y$_.number&&30!=y$_.number&&(this.cullingMask=this.cullingMask&~y$_.mask)},y$_.addAllLayers=function(){this.cullingMask=2147483647},y$_.removeAllLayers=function(){this.cullingMask=0|y$h.getLayerByNumber(29).mask|y$h.getLayerByNumber(30).mask},y$_.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},y$_.moveForward=function(y$_){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=y$_,this.transform.translate(this._tempVector3)},y$_.moveRight=function(y$_){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=y$_,this.transform.translate(this._tempVector3)},y$_.moveVertical=function(y$_){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=y$_,this.transform.translate(this._tempVector3,!1)},y$_._addSelfRenderObjects=function(){var y$_=this.scene._cameraPool,y$c=y$_.length;if(0<y$c){for(var y$e=y$c-1;0<=y$e;y$e--)if(this.renderingOrder<=y$_[y$e].renderingOrder){y$_.splice(y$e+1,0,this);break}}else y$_.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},y$_._clearSelfRenderObjects=function(){var y$_=this.scene._cameraPool;y$_.splice(y$_.indexOf(this),1)},y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,y$q.stage.off("resize",this,this._onScreenSizeChanged),y$c.prototype.destroy.call(this,y$_)},y$U(0,y$_,"sky",function(){return this._sky},function(y$_){(this._sky=y$_)._ownerCamera=this}),y$U(0,y$_,"forward",function(){var y$_=this.transform.worldMatrix.elements,y$c=this._forward.elements;return y$c[0]=-y$_[8],y$c[1]=-y$_[9],y$c[2]=-y$_[10],this._forward}),y$U(0,y$_,"position",function(){var y$_=this.transform.worldMatrix.elements,y$c=this._position.elements;return y$c[0]=y$_[12],y$c[1]=y$_[13],y$c[2]=y$_[14],this._position}),y$U(0,y$_,"renderTarget",function(){return this._renderTarget},function(y$_){null!=(this._renderTarget=y$_)&&(this._renderTargetSize=y$_.size)}),y$U(0,y$_,"up",function(){var y$_=this.transform.worldMatrix.elements,y$c=this._up.elements;return y$c[0]=y$_[4],y$c[1]=y$_[5],y$c[2]=y$_[6],this._up}),y$U(0,y$_,"right",function(){var y$_=this.transform.worldMatrix.elements,y$c=this._right.elements;return y$c[0]=y$_[0],y$c[1]=y$_[1],y$c[2]=y$_[2],this._right}),y$U(0,y$_,"renderTargetSize",function(){return this._renderTargetSize},function(y$_){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=y$_,this._calculateProjectionMatrix()}),y$U(0,y$_,"fieldOfView",function(){return this._fieldOfView},function(y$_){this._fieldOfView=y$_,this._calculateProjectionMatrix()}),y$U(0,y$_,"nearPlane",function(){return this._nearPlane},function(y$_){this._nearPlane=y$_,this._calculateProjectionMatrix()}),y$U(0,y$_,"farPlane",function(){return this._farPlane},function(y$_){this._farPlane=y$_,this._calculateProjectionMatrix()}),y$U(0,y$_,"orthographic",function(){return this._orthographic},function(y$_){this._orthographic=y$_,this._calculateProjectionMatrix()}),y$U(0,y$_,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(y$_){this._orthographicVerticalSize=y$_,this._calculateProjectionMatrix()}),y$U(0,y$_,"renderingOrder",function(){return this._renderingOrder},function(y$_){this._renderingOrder=y$_,this._sortCamerasByRenderingOrder()}),y$e.CAMERAPOS=0,y$e.VIEWMATRIX=1,y$e.PROJECTMATRIX=2,y$e.VPMATRIX=3,y$e.VPMATRIX_NO_TRANSLATE=4,y$e.CAMERADIRECTION=5,y$e.CAMERAUP=6,y$e.ENVIRONMENTDIFFUSE=7,y$e.ENVIRONMENTSPECULAR=8,y$e.SIMLODINFO=9,y$e.DIFFUSEIRRADMATR=10,y$e.DIFFUSEIRRADMATG=11,y$e.DIFFUSEIRRADMATB=12,y$e.HDREXPOSURE=13,y$e.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",y$e.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",y$e.CLEARFLAG_SOLIDCOLOR=0,y$e.CLEARFLAG_SKY=1,y$e.CLEARFLAG_DEPTHONLY=2,y$e.CLEARFLAG_NONE=3,y$H(y$e,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new y$_c(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new y$_c},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new y$_c}]),y$e}(y$ic),y$Nc=function(y$e){function y$c(y$_){this._render=null,this._geometryFilter=null,y$c.__super.call(this,y$_)}y$D(y$c,"laya.d3.core.RenderableSprite3D",y$e);var y$_=y$c.prototype;return y$_._addToInitStaticBatchManager=function(){},y$_._setBelongScene=function(y$_){y$e.prototype._setBelongScene.call(this,y$_),y$_._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},y$_._setUnBelongScene=function(){var y$_=this._scene._renderableSprite3Ds,y$c=y$_.indexOf(this);y$_.splice(y$c,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),y$e.prototype._setUnBelongScene.call(this)},y$_._update=function(y$_){(y$_.owner=this)._activeInHierarchy&&(this._updateComponents(y$_),this._render._updateOctreeNode(),this._lateUpdateComponents(y$_),y$f.spriteCount++,this._childs.length&&this._updateChilds(y$_))},y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$e.prototype.destroy.call(this,y$_),this._render._destroy(),this._render=null},y$c.__init__=function(){y$c.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=y$c.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),y$c.SAHDERDEFINE_LIGHTMAP=y$c.shaderDefines.registerDefine("LIGHTMAP")},y$c.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,y$c.SAHDERDEFINE_LIGHTMAP=4,y$c.LIGHTMAPSCALEOFFSET=2,y$c.LIGHTMAP=3,y$H(y$c,["shaderDefines",function(){return this.shaderDefines=new y$mc}]),y$c}(y$ic),y$Vc=(function(y$_){function y$Z(y$_,y$c,y$e){this._long=NaN,this._width=NaN,this._height=NaN,void 0===y$_&&(y$_=1),void 0===y$c&&(y$c=1),void 0===y$e&&(y$e=1),y$Z.__super.call(this),this._long=y$_,this._width=y$c,this._height=y$e,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}y$D(y$Z,"laya.d3.resource.models.BoxMesh",y$Qc);var y$c=y$Z.prototype;y$c.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var y$_=y$y_.vertexDeclaration,y$c=(y$_.vertexStride,this._long/2),y$e=this._height/2,y$Z=this._width/2,y$X=new Float32Array([-y$c,y$e,-y$Z,0,1,0,0,0,y$c,y$e,-y$Z,0,1,0,1,0,y$c,y$e,y$Z,0,1,0,1,1,-y$c,y$e,y$Z,0,1,0,0,1,-y$c,-y$e,-y$Z,0,-1,0,0,1,y$c,-y$e,-y$Z,0,-1,0,1,1,y$c,-y$e,y$Z,0,-1,0,1,0,-y$c,-y$e,y$Z,0,-1,0,0,0,-y$c,y$e,-y$Z,-1,0,0,0,0,-y$c,y$e,y$Z,-1,0,0,1,0,-y$c,-y$e,y$Z,-1,0,0,1,1,-y$c,-y$e,-y$Z,-1,0,0,0,1,y$c,y$e,-y$Z,1,0,0,1,0,y$c,y$e,y$Z,1,0,0,0,0,y$c,-y$e,y$Z,1,0,0,0,1,y$c,-y$e,-y$Z,1,0,0,1,1,-y$c,y$e,y$Z,0,0,1,0,0,y$c,y$e,y$Z,0,0,1,1,0,y$c,-y$e,y$Z,0,0,1,1,1,-y$c,-y$e,y$Z,0,0,1,0,1,-y$c,y$e,-y$Z,0,0,-1,1,0,y$c,y$e,-y$Z,0,0,-1,0,0,y$c,-y$e,-y$Z,0,0,-1,0,1,-y$c,-y$e,-y$Z,0,0,-1,1,1]),y$u=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new y$pc(y$_,this._numberVertices,35044,!0),this._indexBuffer=new y$Yc("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(y$X),this._indexBuffer.setData(y$u),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},y$U(0,y$c,"long",function(){return this._long},function(y$_){this._long!==y$_&&(this._long=y$_,this.releaseResource(),this.activeResource())}),y$U(0,y$c,"width",function(){return this._width},function(y$_){this._width!==y$_&&(this._width=y$_,this.releaseResource(),this.activeResource())}),y$U(0,y$c,"height",function(){return this._height},function(y$_){this._height!==y$_&&(this._height=y$_,this.releaseResource(),this.activeResource())})}(),function(y$_){function y$P(y$_,y$c,y$e){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=.3),void 0===y$e&&(y$e=1e3),this._viewMatrix=new y$_c,this._projectionMatrix=new y$_c,this._projectionViewMatrix=new y$_c,this._viewport=new y$sc(0,0,0,0),this._normalizedViewport=new y$sc(0,0,1,1),this._aspectRatio=y$_,this._boundFrustumUpdate=!0,this._boundFrustum=new y$W_(y$_c.DEFAULT),y$P.__super.call(this,y$c,y$e),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}y$D(y$P,"laya.d3.core.Camera",y$bc);var y$c=y$P.prototype;return y$c._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},y$c._parseCustomProps=function(y$_,y$c,y$e,y$Z){var y$X=y$e.clearColor;this.clearColor=new y$Oc(y$X[0],y$X[1],y$X[2],y$X[3]);var y$u=y$e.viewport;this.normalizedViewport=new y$sc(y$u[0],y$u[1],y$u[2],y$u[3])},y$c._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var y$_=this.orthographicVerticalSize*this.aspectRatio*.5,y$c=.5*this.orthographicVerticalSize;y$_c.createOrthoOffCenterRH(-y$_,y$_,-y$c,y$c,this.nearPlane,this.farPlane,this._projectionMatrix)}else y$_c.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},y$c._update=function(y$_){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,y$_)},y$c._renderCamera=function(y$_,y$c,y$e){var y$Z,y$X;y$e.parallelSplitShadowMaps[0]&&y$e._renderShadowMap(y$_,y$c,this),(y$c.camera=this)._prepareCameraToRender(),y$e._preRenderUpdateComponents(y$c),y$Z=y$c._viewMatrix=this.viewMatrix;var y$u=this._renderTarget;y$u?(y$u.start(),y$_c.multiply(y$bc._invertYScaleMatrix,this._projectionMatrix,y$bc._invertYProjectionMatrix),y$_c.multiply(y$bc._invertYScaleMatrix,this.projectionViewMatrix,y$bc._invertYProjectionViewMatrix),y$X=y$c._projectionMatrix=y$bc._invertYProjectionMatrix,y$c._projectionViewMatrix=y$bc._invertYProjectionViewMatrix):(y$X=y$c._projectionMatrix=this._projectionMatrix,y$c._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(y$Z,y$X),y$c._viewport=this.viewport,y$e._preRenderScene(y$_,y$c,this.boundFrustum),y$e._clear(y$_,y$c),y$e._renderScene(y$_,y$c),y$e._postRenderUpdateComponents(y$c),y$u&&y$u.end()},y$c.viewportPointToRay=function(y$_,y$c){y$Uc.calculateCursorRay(y$_,this.viewport,this._projectionMatrix,this.viewMatrix,null,y$c)},y$c.normalizedViewportPointToRay=function(y$_,y$c){var y$e=y$P._tempVector20,y$Z=this.viewport,y$X=y$_.elements,y$u=y$e.elements;y$u[0]=y$X[0]*y$Z.width,y$u[1]=y$X[1]*y$Z.height,y$Uc.calculateCursorRay(y$e,this.viewport,this._projectionMatrix,this.viewMatrix,null,y$c)},y$c.worldToViewportPoint=function(y$_,y$c){y$_c.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(y$_,this._projectionViewMatrix,y$c);var y$e=y$c.elements;y$e[0]=y$e[0]/y$q.stage.clientScaleX,y$e[1]=y$e[1]/y$q.stage.clientScaleY},y$c.worldToNormalizedViewportPoint=function(y$_,y$c){y$_c.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(y$_,this._projectionViewMatrix,y$c);var y$e=y$c.elements;y$e[0]=y$e[0]/y$q.stage.clientScaleX,y$e[1]=y$e[1]/y$q.stage.clientScaleY},y$c.convertScreenCoordToOrthographicCoord=function(y$_,y$c){if(this._orthographic){var y$e=y$S.clientWidth,y$Z=y$S.clientHeight,y$X=this.orthographicVerticalSize*this.aspectRatio/y$e,y$u=this.orthographicVerticalSize/y$Z,y$P=y$_.elements,y$O=y$c.elements;return y$O[0]=(-y$e/2+y$P[0])*y$X,y$O[1]=(y$Z/2-y$P[1])*y$u,y$O[2]=(this.nearPlane-this.farPlane)*(y$P[2]+1)/2-this.nearPlane,y$Pc.transformCoordinate(y$c,this.transform.worldMatrix,y$c),!0}return!1},y$U(0,y$c,"projectionViewMatrix",function(){return y$_c.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),y$U(0,y$c,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var y$_=this.viewport;return y$_.width/y$_.height},function(y$_){if(y$_<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=y$_,this._calculateProjectionMatrix()}),y$U(0,y$c,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),y$U(0,y$c,"needViewport",function(){var y$_=this.normalizedViewport;return 0===y$_.x&&0===y$_.y&&1===y$_.width&&1===y$_.height}),y$U(0,y$c,"viewport",function(){if(this._viewportExpressedInClipSpace){var y$_=this._normalizedViewport,y$c=this.renderTargetSize,y$e=y$c.width,y$Z=y$c.height;this._viewport.x=y$_.x*y$e,this._viewport.y=y$_.y*y$Z,this._viewport.width=y$_.width*y$e,this._viewport.height=y$_.height*y$Z}return this._viewport},function(y$_){if(null!=this.renderTarget&&(y$_.x<0||y$_.y<0||0==y$_.width||0==y$_.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=y$_,this._calculateProjectionMatrix()}),y$U(0,y$c,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var y$_=this._viewport,y$c=this.renderTargetSize,y$e=y$c.width,y$Z=y$c.height;this._normalizedViewport.x=y$_.x/y$e,this._normalizedViewport.y=y$_.y/y$Z,this._normalizedViewport.width=y$_.width/y$e,this._normalizedViewport.height=y$_.height/y$Z}return this._normalizedViewport},function(y$_){y$_.x<0&&(y$_.x=0,console.warn("Camera: viewport.x must large than 0.0.")),y$_.y<0&&(y$_.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<y$_.x+y$_.width&&(y$_.width=1-y$_.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<y$_.y+y$_.height&&(y$_.height=1-y$_.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=y$_,this._calculateProjectionMatrix()}),y$U(0,y$c,"projectionMatrix",function(){return this._projectionMatrix},function(y$_){this._projectionMatrix=y$_,this._useUserProjectionMatrix=!0}),y$U(0,y$c,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),y$H(y$P,["_tempVector20",function(){return this._tempVector20=new y$uc}]),y$P}()),y$gc=function(y$e){function y$Z(y$_,y$c){y$Z.__super.call(this,y$c),this._geometryFilter=new y$Tc(this),this._render=new y$hc(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),y$_&&(this._geometryFilter.sharedMesh=y$_)instanceof laya.d3.resource.models.Mesh&&(y$_.loaded?this._render.sharedMaterials=y$_.materials:y$_.once("loaded",this,this._applyMeshMaterials))}y$D(y$Z,"laya.d3.core.MeshSprite3D",y$e);var y$_=y$Z.prototype;return y$_._changeRenderObjectByMesh=function(y$_){var y$c=this._render._renderElements,y$e=y$c[y$_];y$e||(y$e=y$c[y$_]=new y$Mc),y$e._render=this._render;var y$Z=this._render.sharedMaterials[y$_];y$Z||(y$Z=y$Fc.defaultMaterial);var y$X=this._geometryFilter.sharedMesh.getRenderElement(y$_);return y$e._mainSortID=this._getSortID(y$X,y$Z),y$e._sprite3D=this,y$e.renderObj=y$X,y$e._material=y$Z,y$e},y$_._changeRenderObjectByMaterial=function(y$_,y$c){var y$e=this._render._renderElements[y$_];y$c||(y$c=y$Fc.defaultMaterial);var y$Z=this._geometryFilter.sharedMesh.getRenderElement(y$_);return y$e._mainSortID=this._getSortID(y$Z,y$c),y$e._sprite3D=this,y$e.renderObj=y$Z,y$e._material=y$c,y$e},y$_._changeRenderObjectsByMesh=function(){var y$_=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=y$_;for(var y$c=0;y$c<y$_;y$c++)this._changeRenderObjectByMesh(y$c)},y$_._onMeshChanged=function(y$_){var y$c=y$_.sharedMesh;y$c.loaded?this._changeRenderObjectsByMesh():y$c.once("loaded",this,this._onMeshLoaded)},y$_._onMeshLoaded=function(y$_){y$_===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},y$_._onMaterialChanged=function(y$_,y$c,y$e){y$c<this._render._renderElements.length&&this._changeRenderObjectByMaterial(y$c,y$e)},y$_._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},y$_._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},y$_._parseCustomProps=function(y$_,y$c,y$e,y$Z){var y$X=this.meshRender,y$u=y$e.lightmapIndex;null!=y$u&&(y$X.lightmapIndex=y$u);var y$P,y$O,y$s=y$e.lightmapScaleOffset;if(y$s&&(y$X.lightmapScaleOffset=new y$Oc(y$s[0],y$s[1],y$s[2],y$s[3])),y$Z.instanceParams)(y$P=y$Z.instanceParams.loadPath)&&(y$O=y$G.getRes(y$c[y$P]),(this.meshFilter.sharedMesh=y$O).loaded?y$X.sharedMaterials=y$O.materials:y$O.once("loaded",this,this._applyMeshMaterials));else{(y$P=y$e.meshPath)&&(y$O=y$G.getRes(y$c[y$P]),this.meshFilter.sharedMesh=y$O);var y$n=y$e.materials;if(y$n){var y$m=y$X.sharedMaterials,y$H=y$n.length;y$m.length=y$H;for(var y$B=0;y$B<y$H;y$B++)y$m[y$B]=y$G.getRes(y$c[y$n[y$B].path]);y$X.sharedMaterials=y$m}}},y$_._applyMeshMaterials=function(y$_){for(var y$c=this._render.sharedMaterials,y$e=y$_.materials,y$Z=0,y$X=y$e.length;y$Z<y$X;y$Z++)y$c[y$Z]||(y$c[y$Z]=y$e[y$Z]);this._render.sharedMaterials=y$c},y$_._addToInitStaticBatchManager=function(){y$Z._staticBatchManager._addInitBatchSprite(this)},y$_.cloneTo=function(y$_){var y$c=y$_;y$c._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var y$e=this._render,y$Z=y$c._render;y$Z.enable=y$e.enable,y$Z.sharedMaterials=y$e.sharedMaterials,y$Z.castShadow=y$e.castShadow;var y$X=y$e.lightmapScaleOffset;y$X&&(y$Z.lightmapScaleOffset=y$X.clone()),y$Z.lightmapIndex=y$e.lightmapIndex,y$Z.receiveShadow=y$e.receiveShadow,y$Z.sortingFudge=y$e.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,y$_)},y$_.destroy=function(y$_){if(void 0===y$_&&(y$_=!0),!this.destroyed){var y$c=this.meshFilter.sharedMesh;null!=y$c&&(y$c.loaded||y$c.off("loaded",this,this._applyMeshMaterials)),y$e.prototype.destroy.call(this,y$_),this._geometryFilter._destroy()}},y$U(0,y$_,"meshFilter",function(){return this._geometryFilter}),y$U(0,y$_,"meshRender",function(){return this._render}),y$Z.__init__=function(){y$Z_._staticBatchManagers.push(y$Z._staticBatchManager)},y$Z.load=function(y$_){return y$q.loader.create(y$_,null,null,y$Z)},y$H(y$Z,["_staticBatchManager",function(){return this._staticBatchManager=new y$Ac}]),y$Z}(y$Nc)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(y$_,y$c){"use strict";for(var y$e in Object.defineProperty(y$c,"__esModule",{value:!0}),Laya){var y$Z=Laya[y$e];y$Z&&y$Z.__isclass&&(y$c[y$e]=y$Z)}}),function(y$_,y$c,y$X_){y$X_.un,y$X_.uns;var y$e=y$X_.static,y$Z=y$X_.class,y$u=y$X_.getset,y$k=y$X_.__newvec,y$O=laya.maths.Bezier,y$H=laya.utils.Browser,y$y_=laya.utils.Byte,y$X=(laya.events.Event,laya.events.EventDispatcher),y$P=laya.display.Graphics,y$s=(laya.resource.HTMLCanvas,laya.utils.Handler),y$n=laya.net.Loader,y$B=laya.maths.MathUtil,y$$_=laya.maths.Matrix,y$a=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),y$m=(laya.renders.RenderContext,laya.resource.Resource),y$D=laya.utils.RunDriver,y$u_=laya.display.Sprite,y$U=laya.utils.Stat,y$T_=laya.resource.Texture,y$G=(laya.net.URL,laya.utils.Utils),y$$=function(){function y$_(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return y$Z(y$_,"laya.ani.AnimationContent"),y$_}(),y$T=function(){function y$_(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return y$Z(y$_,"laya.ani.AnimationNodeContent"),y$_}(),y$z=function(){function y$_(){}return y$Z(y$_,"laya.ani.AnimationParser01"),y$_.parse=function(y$_,y$c){var y$e=y$c.__getBuffer(),y$Z=0,y$X=0,y$u=0,y$P=0,y$O=0,y$s=0,y$n=0,y$m=y$c.readUTFString();y$_._aniClassName=y$m;var y$H,y$B=y$c.readUTFString().split("\n"),y$D=y$c.getUint8(),y$U=y$c.getUint32(),y$k=y$c.getUint32();0<y$U&&(y$H=y$e.slice(y$U,y$k));var y$a=new y$y_(y$H);for(0<y$k&&(y$_._publicExtData=y$e.slice(y$k,y$e.byteLength)),y$_._useParent=!!y$c.getUint8(),y$_._anis.length=y$D,y$Z=0;y$Z<y$D;y$Z++){var y$G=y$_._anis[y$Z]=new y$$;y$G.nodes=new Array;var y$w=y$G.name=y$B[y$c.getUint16()];y$_._aniMap[y$w]=y$Z,y$G.bone3DMap={},y$G.playTime=y$c.getFloat32(),y$G.playTime<=0&&console.error("播放时间不能为0  url="+y$_.url+" name="+y$G.name);var y$z=y$G.nodes.length=y$c.getUint8();for(y$X=y$G.totalKeyframeDatasLength=0;y$X<y$z;y$X++){var y$L=y$G.nodes[y$X]=new y$T;y$L.childs=[];var y$q=y$c.getInt16();0<=y$q&&(y$L.name=y$B[y$q],y$G.bone3DMap[y$L.name]=y$X),y$L.keyFrame=new Array,y$L.parentIndex=y$c.getInt16(),-1==y$L.parentIndex?y$L.parent=null:y$L.parent=y$G.nodes[y$L.parentIndex],y$L.lerpType=y$c.getUint8();var y$K=y$c.getUint32();y$a.pos=y$K;var y$M=y$L.keyframeWidth=y$a.getUint16();if(y$G.totalKeyframeDatasLength+=y$M,0===y$L.lerpType||1===y$L.lerpType)for(y$L.interpolationMethod=[],y$L.interpolationMethod.length=y$M,y$u=0;y$u<y$M;y$u++)y$L.interpolationMethod[y$u]=y$i.interpolation[y$a.getUint8()];null!=y$L.parent&&y$L.parent.childs.push(y$L);var y$f=y$c.getUint16();0<y$f&&(y$L.extenData=y$e.slice(y$c.pos,y$c.pos+y$f),y$c.pos+=y$f);var y$A,y$v=y$c.getUint16(),y$r=0;for(y$u=0,y$P=y$L.keyFrame.length=y$v;y$u<y$P;y$u++){if((y$A=y$L.keyFrame[y$u]=new y$h).duration=y$c.getFloat32(),y$A.startTime=y$r,2===y$L.lerpType){y$A.interpolationData=[];var y$C,y$y=y$c.getUint8();switch(y$C=y$c.getFloat32()){case 254:for(y$A.interpolationData.length=y$M,y$n=0;y$n<y$M;y$n++)y$A.interpolationData[y$n]=0;break;case 255:for(y$A.interpolationData.length=y$M,y$n=0;y$n<y$M;y$n++)y$A.interpolationData[y$n]=5;break;default:for(y$A.interpolationData.push(y$C),y$s=1;y$s<y$y;y$s++)y$A.interpolationData.push(y$c.getFloat32())}}for(y$A.data=new Float32Array(y$M),y$O=0;y$O<y$M;y$O++)y$A.data[y$O]=y$c.getFloat32(),-1e-8<y$A.data[y$O]&&y$A.data[y$O]<1e-8&&(y$A.data[y$O]=0);y$r+=y$A.duration}y$A.startTime=y$G.playTime,y$L.playTime=y$G.playTime,y$_._calculateKeyFrame(y$L,y$v,y$M)}}},y$_}(),y$L=function(){function y$q(){}return y$Z(y$q,"laya.ani.AnimationParser02"),y$q.READ_DATA=function(){y$q._DATA.offset=y$q._reader.getUint32(),y$q._DATA.size=y$q._reader.getUint32()},y$q.READ_BLOCK=function(){for(var y$_=y$q._BLOCK.count=y$q._reader.getUint16(),y$c=y$q._BLOCK.blockStarts=[],y$e=y$q._BLOCK.blockLengths=[],y$Z=0;y$Z<y$_;y$Z++)y$c.push(y$q._reader.getUint32()),y$e.push(y$q._reader.getUint32())},y$q.READ_STRINGS=function(){var y$_=y$q._reader.getUint32(),y$c=y$q._reader.getUint16(),y$e=y$q._reader.pos;y$q._reader.pos=y$_+y$q._DATA.offset;for(var y$Z=0;y$Z<y$c;y$Z++)y$q._strings[y$Z]=y$q._reader.readUTFString();y$q._reader.pos=y$e},y$q.parse=function(y$_,y$c){y$q._templet=y$_;(y$q._reader=y$c).__getBuffer();y$q.READ_DATA(),y$q.READ_BLOCK(),y$q.READ_STRINGS();for(var y$e=0,y$Z=y$q._BLOCK.count;y$e<y$Z;y$e++){var y$X=y$c.getUint16(),y$u=y$q._strings[y$X],y$P=y$q["READ_"+y$u];if(null==y$P)throw new Error("model file err,no this function:"+y$X+" "+y$u);y$P.call()}},y$q.READ_ANIMATIONS=function(){var y$_=y$q._reader,y$c=y$_.__getBuffer(),y$e=0,y$Z=0,y$X=0,y$u=0,y$P=y$_.getUint16(),y$O=[];for(y$O.length=y$P,y$e=0;y$e<y$P;y$e++)y$O[y$e]=y$i.interpolation[y$_.getByte()];var y$s=y$_.getUint8();for(y$q._templet._anis.length=y$s,y$e=0;y$e<y$s;y$e++){var y$n=y$q._templet._anis[y$e]={};y$n.nodes=new Array;var y$m=y$n.name=y$q._strings[y$_.getUint16()];y$q._templet._aniMap[y$m]=y$e,y$n.bone3DMap={},y$n.playTime=y$_.getFloat32();var y$H=y$n.nodes.length=y$_.getInt16();for(y$Z=y$n.totalKeyframeDatasLength=0;y$Z<y$H;y$Z++){var y$B=y$n.nodes[y$Z]={};y$B.keyframeWidth=y$P,y$B.childs=[];var y$D=y$_.getUint16();0<=y$D&&(y$B.name=y$q._strings[y$D],y$n.bone3DMap[y$B.name]=y$Z),y$B.keyFrame=new Array,y$B.parentIndex=y$_.getInt16(),-1==y$B.parentIndex?y$B.parent=null:y$B.parent=y$n.nodes[y$B.parentIndex],y$n.totalKeyframeDatasLength+=y$P,y$B.interpolationMethod=y$O,null!=y$B.parent&&y$B.parent.childs.push(y$B);var y$U=y$_.getUint16(),y$k=null,y$a=null;for(y$X=0,y$u=y$B.keyFrame.length=y$U;y$X<y$u;y$X++){(y$k=y$B.keyFrame[y$X]={}).startTime=y$_.getFloat32(),y$a&&(y$a.duration=y$k.startTime-y$a.startTime);var y$G=y$q._DATA.offset,y$w=y$_.getUint32(),y$z=4*y$P,y$L=y$c.slice(y$G+y$w,y$G+y$w+y$z);y$k.data=new Float32Array(y$L),y$a=y$k}y$k.duration=0,y$B.playTime=y$n.playTime,y$q._templet._calculateKeyFrame(y$B,y$U,y$P)}}},y$q._templet=null,y$q._reader=null,y$q._strings=[],y$e(y$q,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),y$q}(),y$h_=(function(){function y$_(){}y$Z(y$_,"laya.ani.AnimationState"),y$_.stopped=0,y$_.paused=1,y$_.playing=2}(),function(){function y$X(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new y$N_,this.resultMatrix=new y$$_,this._children=[]}y$Z(y$X,"laya.ani.bone.Bone");var y$_=y$X.prototype;return y$_.setTempMatrix=function(y$_){this._tempMatrix=y$_;var y$c,y$e=0;for(y$e=0,y$c=this._children.length;y$e<y$c;y$e++)this._children[y$e].setTempMatrix(this._tempMatrix)},y$_.update=function(y$_){var y$c;if(this.rotation=this.transform.skX,y$_)y$c=this.resultTransform.getMatrix(),y$$_.mul(y$c,y$_,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)y$c=this.resultTransform.getMatrix(),y$$_.mul(y$c,this.parentBone.resultMatrix,this.resultMatrix);else{var y$e=this.parentBone,y$Z=NaN,y$X=NaN,y$u=NaN,y$P=this.parentBone.resultMatrix;y$c=this.resultTransform.getMatrix();var y$O=y$P.a*y$c.tx+y$P.c*y$c.ty+y$P.tx,y$s=y$P.b*y$c.tx+y$P.d*y$c.ty+y$P.ty,y$n=new y$$_;this.inheritRotation?(y$Z=Math.atan2(y$e.resultMatrix.b,y$e.resultMatrix.a),y$X=Math.cos(y$Z),y$u=Math.sin(y$Z),y$n.setTo(y$X,y$u,-y$u,y$X,0,0),y$$_.mul(this._tempMatrix,y$n,y$$_.TEMP),y$$_.TEMP.copyTo(y$n),y$c=this.resultTransform.getMatrix(),y$$_.mul(y$c,y$n,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,y$c=this.resultTransform.getMatrix(),y$$_.TEMP.identity(),y$$_.TEMP.d=this.d,y$$_.mul(y$c,y$$_.TEMP,this.resultMatrix)),this.resultMatrix.tx=y$O,this.resultMatrix.ty=y$s}else(y$c=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var y$m,y$H=0;for(y$H=0,y$m=this._children.length;y$H<y$m;y$H++)this._children[y$H].update()},y$_.updateChild=function(){var y$_,y$c=0;for(y$c=0,y$_=this._children.length;y$c<y$_;y$c++)this._children[y$c].update()},y$_.setRotation=function(y$_){this._sprite&&(this._sprite.rotation=180*y$_/Math.PI)},y$_.updateDraw=function(y$_,y$c){y$X.ShowBones&&!y$X.ShowBones[this.name]||(this._sprite||(this._sprite=new y$u_,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),y$X_.stage.addChild(this._sprite)),this._sprite.x=y$_+this.resultMatrix.tx,this._sprite.y=y$c+this.resultMatrix.ty);var y$e,y$Z=0;for(y$Z=0,y$e=this._children.length;y$Z<y$e;y$Z++)this._children[y$Z].updateDraw(y$_,y$c)},y$_.addChild=function(y$_){this._children.push(y$_),y$_.parentBone=this},y$_.findBone=function(y$_){if(this.name==y$_)return this;var y$c,y$e,y$Z=0;for(y$Z=0,y$c=this._children.length;y$Z<y$c;y$Z++)if(y$e=this._children[y$Z].findBone(y$_))return y$e;return null},y$_.localToWorld=function(y$_){var y$c=y$_[0],y$e=y$_[1];y$_[0]=y$c*this.resultMatrix.a+y$e*this.resultMatrix.c+this.resultMatrix.tx,y$_[1]=y$c*this.resultMatrix.b+y$e*this.resultMatrix.d+this.resultMatrix.ty},y$X.ShowBones={},y$X}()),y$R_=function(){function y$k(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}y$Z(y$k,"laya.ani.bone.BoneSlot");var y$_=y$k.prototype;return y$_.showSlotData=function(y$_,y$c){void 0===y$c&&(y$c=!0),this.currSlotData=y$_,y$c&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},y$_.showDisplayByName=function(y$_){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(y$_))},y$_.replaceDisplayByName=function(y$_,y$c){if(this.currSlotData){var y$e;y$e=this.currSlotData.getDisplayByName(y$_);var y$Z;y$Z=this.currSlotData.getDisplayByName(y$c),this.replaceDisplayByIndex(y$e,y$Z)}},y$_.replaceDisplayByIndex=function(y$_,y$c){this.currSlotData&&(this._replaceDic[y$_]=y$c,this.displayIndex==y$_&&this.showDisplayByIndex(y$_))},y$_.showDisplayByIndex=function(y$_){if(null!=this._replaceDic[y$_]&&(y$_=this._replaceDic[y$_]),this.currSlotData&&-1<y$_&&y$_<this.currSlotData.displayArr.length){if(this.displayIndex=y$_,this.currDisplayData=this.currSlotData.displayArr[y$_],this.currDisplayData){var y$c=this.currDisplayData.name;this.currTexture=this.templet.getTexture(y$c),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!y$a.isConchApp||y$a.isConchApp&&"0.9.15"<y$u_.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},y$_.replaceSkin=function(y$_){this._diyTexture=y$_,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},y$_.setParentMatrix=function(y$_){this._parentMatrix=y$_},y$_.draw=function(y$_,y$c,y$e,y$Z){if(void 0===y$e&&(y$e=!1),void 0===y$Z&&(y$Z=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var y$X,y$u=this.currTexture;switch(this._diyTexture&&(y$u=this._diyTexture),this.currDisplayData.type){case 0:if(y$_){var y$P=this.getDisplayMatrix();if(this._parentMatrix){var y$O=!1;if(y$P){var y$s;if(y$$_.mul(y$P,this._parentMatrix,y$$_.TEMP),y$s=y$e?(null==this._resultMatrix&&(this._resultMatrix=new y$$_),this._resultMatrix):new y$$_,!y$a.isWebGL&&this.currDisplayData.uvs||y$a.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var y$n=y$k._tempMatrix;y$n.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(y$n.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(y$O=!0,y$n.rotate(-Math.PI/2)),y$$_.mul(y$n,y$$_.TEMP,y$s)}else y$$_.TEMP.copyTo(y$s);y$O?y$_.drawTexture(y$u,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,y$s):y$_.drawTexture(y$u,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,y$s)}}}break;case 1:if(null==(y$X=y$e?(null==this._skinSprite&&(this._skinSprite=y$k.createSkinMesh()),this._skinSprite):y$k.createSkinMesh()))return;var y$m;if(null==this.currDisplayData.bones){var y$H,y$B=this.currDisplayData.weights;this.deformData&&(y$B=this.deformData),y$H=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=y$M.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=y$M.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=y$B;this.currDisplayData.triangles.length;y$m=this.currDisplayData.triangles,y$X.init2(y$u,null,y$m,this._mVerticleArr,y$H);var y$D,y$U=this.getDisplayMatrix();if(this._parentMatrix)if(y$U)y$$_.mul(y$U,this._parentMatrix,y$$_.TEMP),y$D=y$e?(null==this._resultMatrix&&(this._resultMatrix=new y$$_),this._resultMatrix):new y$$_,y$$_.TEMP.copyTo(y$D),y$X.transform=y$D}else this.skinMesh(y$c,y$X,y$Z);y$_.drawSkin(y$X);break;case 2:if(null==(y$X=y$e?(null==this._skinSprite&&(this._skinSprite=y$k.createSkinMesh()),this._skinSprite):y$k.createSkinMesh()))return;this.skinMesh(y$c,y$X,y$Z),y$_.drawSkin(y$X)}}},y$_.skinMesh=function(y$_,y$c,y$e){var y$Z,y$X=this.currTexture,y$u=this.currDisplayData.bones;y$Z=this._diyTexture?(y$X=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=y$M.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=y$M.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var y$P,y$O,y$s=this.currDisplayData.weights,y$n=this.currDisplayData.triangles,y$m=0,y$H=0,y$B=0,y$D=NaN,y$U=NaN,y$k=0,y$a=0,y$G=[],y$w=0,y$z=0;if(this.deformData&&0<this.deformData.length){var y$L=0;for(y$w=0,y$z=y$u.length;y$w<y$z;){for(y$B=y$u[y$w++]+y$w,y$H=y$m=0;y$w<y$B;y$w++)y$O=y$_[y$u[y$w]],y$D=y$s[y$k]+this.deformData[y$L++],y$U=y$s[y$k+1]+this.deformData[y$L++],y$a=y$s[y$k+2],y$m+=(y$D*y$O.a+y$U*y$O.c+y$O.tx)*y$a,y$H+=(y$D*y$O.b+y$U*y$O.d+y$O.ty)*y$a,y$k+=3;y$G.push(y$m,y$H)}}else for(y$w=0,y$z=y$u.length;y$w<y$z;){for(y$B=y$u[y$w++]+y$w,y$H=y$m=0;y$w<y$B;y$w++)y$O=y$_[y$u[y$w]],y$D=y$s[y$k],y$U=y$s[y$k+1],y$a=y$s[y$k+2],y$m+=(y$D*y$O.a+y$U*y$O.c+y$O.tx)*y$a,y$H+=(y$D*y$O.b+y$U*y$O.d+y$O.ty)*y$a,y$k+=3;y$G.push(y$m,y$H)}this._mVerticleArr=y$G,y$P=y$n,y$c.init2(y$X,null,y$P,this._mVerticleArr,y$Z)},y$_.drawBonePoint=function(y$_){y$_&&this._parentMatrix&&y$_.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},y$_.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},y$_.getMatrix=function(){return this._resultMatrix},y$_.copy=function(){var y$_=new y$k;return y$_.type="copy",y$_.name=this.name,y$_.attachmentName=this.attachmentName,y$_.srcDisplayIndex=this.srcDisplayIndex,y$_.parent=this.parent,y$_.displayIndex=this.displayIndex,y$_.templet=this.templet,y$_.currSlotData=this.currSlotData,y$_.currTexture=this.currTexture,y$_.currDisplayData=this.currDisplayData,y$_},y$k.createSkinMesh=function(){return y$a.isWebGL||y$a.isConchApp?y$D.skinAniSprite():(y$a.isWebGL,null)},y$e(y$k,["_tempMatrix",function(){return this._tempMatrix=new y$$_}]),y$k}(),y$i_=function(){function y$_(){this.skinName=null,this.deformSlotDataList=[]}return y$Z(y$_,"laya.ani.bone.DeformAniData"),y$_}(),y$x_=function(){function y$_(){this.deformSlotDisplayList=[]}return y$Z(y$_,"laya.ani.bone.DeformSlotData"),y$_}(),y$F_=function(){function y$_(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}y$Z(y$_,"laya.ani.bone.DeformSlotDisplayData");var y$c=y$_.prototype;return y$c.binarySearch1=function(y$_,y$c){var y$e=0,y$Z=y$_.length-2;if(0==y$Z)return 1;for(var y$X=y$Z>>>1;;){if(y$_[Math.floor(y$X+1)]<=y$c?y$e=y$X+1:y$Z=y$X,y$e==y$Z)return y$e+1;y$X=y$e+y$Z>>>1}return 0},y$c.apply=function(y$_,y$c,y$e){if(void 0===y$e&&(y$e=1),y$_+=.05,!(this.timeList.length<=0)){var y$Z=0;if(!(y$_<this.timeList[0])){var y$X=this.vectices[0].length,y$u=[],y$P=this.binarySearch1(this.timeList,y$_);if(this.frameIndex=y$P,y$_>=this.timeList[this.timeList.length-1]){var y$O=this.vectices[this.vectices.length-1];if(y$e<1)for(y$Z=0;y$Z<y$X;y$Z++)y$u[y$Z]+=(y$O[y$Z]-y$u[y$Z])*y$e;else for(y$Z=0;y$Z<y$X;y$Z++)y$u[y$Z]=y$O[y$Z];this.deformData=y$u}else{this.tweenKeyList[this.frameIndex];var y$s=this.vectices[this.frameIndex-1],y$n=this.vectices[this.frameIndex],y$m=this.timeList[this.frameIndex-1],y$H=this.timeList[this.frameIndex];y$e=this.tweenKeyList[y$P-1]?(y$_-y$m)/(y$H-y$m):0;var y$B=NaN;for(y$Z=0;y$Z<y$X;y$Z++)y$B=y$s[y$Z],y$u[y$Z]=y$B+(y$n[y$Z]-y$B)*y$e;this.deformData=y$u}}}},y$_}(),y$Y_=function(){function y$_(){this.time=NaN,this.drawOrder=[]}return y$Z(y$_,"laya.ani.bone.DrawOrderData"),y$_}(),y$p_=function(){function y$_(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return y$Z(y$_,"laya.ani.bone.EventData"),y$_}(),y$w=function(){function y$Z_(y$_,y$c){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=y$_,this._targetBone=y$c[y$_.targetBoneIndex],this.isSpine=y$_.isSpine,null==this._bones&&(this._bones=[]);for(var y$e=this._bones.length=0,y$Z=y$_.boneIndexs.length;y$e<y$Z;y$e++)this._bones.push(y$c[y$_.boneIndexs[y$e]]);this.name=y$_.name,this.mix=y$_.mix,this.bendDirection=y$_.bendDirection}y$Z(y$Z_,"laya.ani.bone.IkConstraint");var y$_=y$Z_.prototype;return y$_.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},y$_._applyIk1=function(y$_,y$c,y$e,y$Z){var y$X=y$_.parentBone,y$u=1/(y$X.resultMatrix.a*y$X.resultMatrix.d-y$X.resultMatrix.b*y$X.resultMatrix.c),y$P=y$c-y$X.resultMatrix.tx,y$O=y$e-y$X.resultMatrix.ty,y$s=(y$P*y$X.resultMatrix.d-y$O*y$X.resultMatrix.c)*y$u-y$_.transform.x,y$n=(y$O*y$X.resultMatrix.a-y$P*y$X.resultMatrix.b)*y$u-y$_.transform.y,y$m=Math.atan2(y$n,y$s)*y$Z_.radDeg-0-y$_.transform.skX;y$_.transform.scX<0&&(y$m+=180),180<y$m?y$m-=360:y$m<-180&&(y$m+=360),y$_.transform.skX=y$_.transform.skY=y$_.transform.skX+y$m*y$Z,y$_.update()},y$_.updatePos=function(y$_,y$c){this._sp&&this._sp.pos(y$_,y$c)},y$_._applyIk2=function(y$_,y$c,y$e,y$Z,y$X,y$u){if(0!=y$u){var y$P=y$_.resultTransform.x,y$O=y$_.resultTransform.y,y$s=y$_.transform.scX,y$n=y$_.transform.scY,y$m=y$c.transform.scX,y$H=0,y$B=0,y$D=0;y$D=y$s<0?(y$s=-y$s,y$H=180,-1):(y$H=0,1),y$n<0&&(y$n=-y$n,y$D=-y$D),y$B=y$m<0?(y$m=-y$m,180):0;var y$U=y$c.resultTransform.x,y$k=NaN,y$a=NaN,y$G=NaN,y$w=y$_.resultMatrix.a,y$z=y$_.resultMatrix.c,y$L=y$_.resultMatrix.b,y$q=y$_.resultMatrix.d,y$K=Math.abs(y$s-y$n)<=1e-4;y$G=y$K?(y$a=y$w*y$U+y$z*(y$k=y$c.resultTransform.y)+y$_.resultMatrix.tx,y$L*y$U+y$q*y$k+y$_.resultMatrix.ty):(y$k=0,y$a=y$w*y$U+y$_.resultMatrix.tx,y$L*y$U+y$_.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new y$u_,y$X_.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(y$e,y$Z,15,"#ffff00"),this._sp.graphics.drawCircle(y$a,y$G,15,"#ff00ff")),y$_.setRotation(Math.atan2(y$G-y$_.resultMatrix.ty,y$a-y$_.resultMatrix.tx));var y$M=y$_.parentBone;y$w=y$M.resultMatrix.a,y$z=y$M.resultMatrix.c,y$L=y$M.resultMatrix.b;var y$f=1/(y$w*(y$q=y$M.resultMatrix.d)-y$z*y$L),y$A=y$e-y$M.resultMatrix.tx,y$v=y$Z-y$M.resultMatrix.ty,y$r=(y$A*y$q-y$v*y$z)*y$f-y$P,y$C=(y$v*y$w-y$A*y$L)*y$f-y$O,y$y=((y$A=y$a-y$M.resultMatrix.tx)*y$q-(y$v=y$G-y$M.resultMatrix.ty)*y$z)*y$f-y$P,y$$=(y$v*y$w-y$A*y$L)*y$f-y$O,y$T=Math.sqrt(y$y*y$y+y$$*y$$),y$h=y$c.length*y$m,y$R=NaN,y$i=NaN;if(y$K){var y$x=(y$r*y$r+y$C*y$C-y$T*y$T-(y$h*=y$s)*y$h)/(2*y$T*y$h);y$x<-1?y$x=-1:1<y$x&&(y$x=1),y$i=Math.acos(y$x)*y$X,y$w=y$T+y$h*y$x,y$z=y$h*Math.sin(y$i),y$R=Math.atan2(y$C*y$w-y$r*y$z,y$r*y$w+y$C*y$z)}else{var y$F=(y$w=y$s*y$h)*y$w,y$Y=(y$z=y$n*y$h)*y$z,y$p=y$r*y$r+y$C*y$C,y$o=Math.atan2(y$C,y$r),y$Q=-2*y$Y*y$T,y$J=y$Y-y$F;if(0<(y$q=y$Q*y$Q-4*y$J*(y$L=y$Y*y$T*y$T+y$F*y$p-y$F*y$Y))){var y$j=Math.sqrt(y$q);y$Q<0&&(y$j=-y$j);var y$t=(y$j=-(y$Q+y$j)/2)/y$J,y$b=y$L/y$j,y$N=Math.abs(y$t)<Math.abs(y$b)?y$t:y$b;y$N*y$N<=y$p&&(y$v=Math.sqrt(y$p-y$N*y$N)*y$X,y$R=y$o-Math.atan2(y$v,y$N),y$i=Math.atan2(y$v/y$n,(y$N-y$T)/y$s))}var y$V=0,y$g=Number.MAX_VALUE,y$S=0,y$E=0,y$W=0,y$l=0,y$d=0,y$I=0;y$l<(y$q=(y$A=y$T+y$w)*y$A)&&(y$W=0,y$l=y$q,y$d=y$A),(y$q=(y$A=y$T-y$w)*y$A)<y$g&&(y$V=Math.PI,y$g=y$q,y$S=y$A);var y$__=Math.acos(-y$w*y$T/(y$F-y$Y));(y$q=(y$A=y$w*Math.cos(y$__)+y$T)*y$A+(y$v=y$z*Math.sin(y$__))*y$v)<y$g&&(y$V=y$__,y$g=y$q,y$S=y$A,y$E=y$v),y$l<y$q&&(y$W=y$__,y$l=y$q,y$d=y$A,y$I=y$v),y$i=y$p<=(y$g+y$l)/2?(y$R=y$o-Math.atan2(y$E*y$X,y$S),y$V*y$X):(y$R=y$o-Math.atan2(y$I*y$X,y$d),y$W*y$X)}var y$c_=Math.atan2(y$k,y$U)*y$D,y$e_=y$_.resultTransform.skX;180<(y$R=(y$R-y$c_)*y$Z_.radDeg+y$H-y$e_)?y$R-=360:y$R<-180&&(y$R+=360),y$_.resultTransform.x=y$P,y$_.resultTransform.y=y$O,y$_.resultTransform.skX=y$_.resultTransform.skY=y$e_+y$R*y$u,y$e_=y$c.resultTransform.skX,180<(y$i=((y$i+y$c_)*y$Z_.radDeg-0)*y$D+y$B-(y$e_%=360))?y$i-=360:y$i<-180&&(y$i+=360),y$c.resultTransform.x=y$U,y$c.resultTransform.y=y$k,y$c.resultTransform.skX=y$c.resultTransform.skY=y$c.resultTransform.skY+y$i*y$u,y$_.update()}},y$_._applyIk3=function(y$_,y$c,y$e,y$Z,y$X,y$u){if(0!=y$u){var y$P,y$O,y$s=y$c.resultMatrix.a*y$c.length,y$n=y$c.resultMatrix.b*y$c.length,y$m=y$s*y$s+y$n*y$n,y$H=Math.sqrt(y$m),y$B=y$_.resultMatrix.tx,y$D=y$_.resultMatrix.ty,y$U=y$c.resultMatrix.tx,y$k=y$c.resultMatrix.ty,y$a=y$U-y$B,y$G=y$k-y$D,y$w=y$a*y$a+y$G*y$G,y$z=Math.sqrt(y$w),y$L=(y$a=y$e-y$_.resultMatrix.tx)*y$a+(y$G=y$Z-y$_.resultMatrix.ty)*y$G,y$q=Math.sqrt(y$L);if(y$H+y$z<=y$q||y$q+y$H<=y$z||y$q+y$z<=y$H){var y$K=NaN;y$U=y$B+(y$K=y$H+y$z<=y$q?1:-1)*(y$e-y$B)*y$z/y$q,y$k=y$D+y$K*(y$Z-y$D)*y$z/y$q}else{var y$M=(y$w-y$m+y$L)/(2*y$L),y$f=Math.sqrt(y$w-y$M*y$M*y$L)/y$q,y$A=y$B+y$a*y$M,y$v=y$D+y$G*y$M,y$r=-y$G*y$f,y$C=y$a*y$f;y$k=0<y$X?(y$U=y$A-y$r,y$v-y$C):(y$U=y$A+y$r,y$v+y$C)}y$P=y$U,y$O=y$k,this.isDebug&&(this._sp||(this._sp=new y$u_,y$X_.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(y$B,y$D,15,"#ff00ff"),this._sp.graphics.drawCircle(y$e,y$Z,15,"#ffff00"),this._sp.graphics.drawCircle(y$P,y$O,15,"#ff00ff"));var y$y,y$$;y$y=Math.atan2(y$O-y$_.resultMatrix.ty,y$P-y$_.resultMatrix.tx),y$_.setRotation(y$y),(y$$=y$Z_._tempMatrix).identity(),y$$.rotate(y$y),y$$.scale(y$_.resultMatrix.getScaleX(),y$_.resultMatrix.getScaleY()),y$$.translate(y$_.resultMatrix.tx,y$_.resultMatrix.ty),y$$.copyTo(y$_.resultMatrix),y$_.updateChild();var y$T,y$h;y$T=Math.atan2(y$Z-y$O,y$e-y$P),y$c.setRotation(y$T),(y$h=y$Z_._tempMatrix).identity(),y$h.rotate(y$T),y$h.scale(y$c.resultMatrix.getScaleX(),y$c.resultMatrix.getScaleY()),y$h.translate(y$P,y$O),y$$.copyTo(y$c.resultMatrix),y$c.updateChild()}},y$e(y$Z_,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new y$$_}]),y$Z_}(),y$o_=function(){function y$_(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return y$Z(y$_,"laya.ani.bone.IkConstraintData"),y$_}(),y$q=function(){function y$h(y$_,y$c){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=y$_,this.position=y$_.position,this.spacing=y$_.spacing,this.rotateMix=y$_.rotateMix,this.translateMix=y$_.translateMix,this.bones=[];for(var y$e=this.data.bones,y$Z=0,y$X=y$e.length;y$Z<y$X;y$Z++)this.bones.push(y$c[y$e[y$Z]])}y$Z(y$h,"laya.ani.bone.PathConstraint");var y$_=y$h.prototype;return y$_.apply=function(y$_,y$c){if(this.target){var y$e=this.translateMix,y$Z=this.translateMix,y$X=0<y$Z,y$u=this.data.spacingMode,y$P="length"==y$u,y$O=this.data.rotateMode,y$s="tangent"==y$O,y$n="chainScale"==y$O,y$m=[],y$H=this.bones.length,y$B=y$s?y$H:y$H+1,y$D=[];(this._spaces=y$D)[0]=this.position;var y$U=this.spacing;if(y$n||y$P)for(var y$k=0,y$a=y$B-1;y$k<y$a;){var y$G=this.bones[y$k],y$w=y$G.length,y$z=y$w*y$G.resultMatrix.a,y$L=y$w*y$G.resultMatrix.b;y$w=Math.sqrt(y$z*y$z+y$L*y$L),y$n&&(y$m[y$k]=y$w),y$D[++y$k]=y$P?Math.max(0,y$w+y$U):y$U}else for(y$k=1;y$k<y$B;y$k++)y$D[y$k]=y$U;var y$q=this.computeWorldPositions(this.target,y$_,y$c,y$B,y$s,"percent"==this.data.positionMode,"percent"==y$u);if(this._debugKey){for(y$k=0;y$k<y$q.length;y$k++)y$c.drawCircle(y$q[y$k++],y$q[y$k++],5,"#00ff00");var y$K=[];for(y$k=0;y$k<y$q.length;y$k++)y$K.push(y$q[y$k++],y$q[y$k++]);y$c.drawLines(0,0,y$K,"#ff0000")}var y$M=y$q[0],y$f=y$q[1],y$A=this.data.offsetRotation,y$v="chain"==y$O&&0==y$A,y$r=NaN;for(y$k=0,y$r=3;y$k<y$H;y$k++,y$r+=3){(y$G=this.bones[y$k]).resultMatrix.tx+=(y$M-y$G.resultMatrix.tx)*y$e,y$G.resultMatrix.ty+=(y$f-y$G.resultMatrix.ty)*y$e;var y$C=(y$z=y$q[y$r])-y$M,y$y=(y$L=y$q[y$r+1])-y$f;if(y$n&&0!=(y$w=y$m[y$k])){var y$$=(Math.sqrt(y$C*y$C+y$y*y$y)/y$w-1)*y$Z+1;y$G.resultMatrix.a*=y$$,y$G.resultMatrix.c*=y$$}if(y$M=y$z,y$f=y$L,y$X){var y$T=y$G.resultMatrix.a,y$h=y$G.resultMatrix.c,y$R=y$G.resultMatrix.b,y$i=y$G.resultMatrix.d,y$x=NaN,y$F=NaN,y$Y=NaN;y$x=y$s?y$q[y$r-1]:0==y$D[y$k+1]?y$q[y$r+2]:Math.atan2(y$y,y$C),y$x-=Math.atan2(y$R,y$T)-y$A/180*Math.PI,y$v&&(y$F=Math.cos(y$x),y$Y=Math.sin(y$x),y$M+=((y$w=y$G.length)*(y$F*y$T-y$Y*y$R)-y$C)*y$Z,y$f+=(y$w*(y$Y*y$T+y$F*y$R)-y$y)*y$Z),y$x>Math.PI?y$x-=2*Math.PI:y$x<-Math.PI&&(y$x+=2*Math.PI),y$x*=y$Z,y$F=Math.cos(y$x),y$Y=Math.sin(y$x),y$G.resultMatrix.a=y$F*y$T-y$Y*y$R,y$G.resultMatrix.c=y$F*y$h-y$Y*y$i,y$G.resultMatrix.b=y$Y*y$T+y$F*y$R,y$G.resultMatrix.d=y$Y*y$h+y$F*y$i}}}},y$_.computeWorldVertices2=function(y$_,y$c,y$e,y$Z,y$X,y$u){var y$P,y$O,y$s=y$_.currDisplayData.bones,y$n=y$_.currDisplayData.weights,y$m=y$_.currDisplayData.triangles,y$H=0,y$B=0,y$D=0,y$U=0,y$k=0,y$a=0,y$G=0,y$w=0,y$z=0,y$L=0,y$q=0;if(null!=y$s){for(y$H=0;y$H<y$e;y$H+=2)y$B+=(y$U=y$s[y$B])+1,y$D+=y$U;var y$K=y$c;for(y$k=y$u,y$a=3*y$D;y$k<y$Z;y$k+=2){for(y$w=y$G=0,y$U=y$s[y$B++],y$U+=y$B;y$B<y$U;y$B++,y$a+=3){y$P=y$K[y$s[y$B]].resultMatrix,y$z=y$n[y$a],y$L=y$n[y$a+1];var y$M=y$n[y$a+2];y$G+=(y$z*y$P.a+y$L*y$P.c+y$P.tx)*y$M,y$w+=(y$z*y$P.b+y$L*y$P.d+y$P.ty)*y$M}y$X[y$k]=y$G,y$X[y$k+1]=y$w}}else{var y$f,y$A;if(y$m||(y$m=y$n),y$_.deformData&&(y$m=y$_.deformData),y$f=y$_.parent,y$c)for(y$q=y$c.length,y$H=0;y$H<y$q;y$H++)if(y$c[y$H].name==y$f){y$O=y$c[y$H];break}y$O&&(y$A=y$O.resultMatrix),y$A||(y$A=y$h._tempMt);var y$v=y$A.tx,y$r=y$A.ty,y$C=y$A.a,y$y=y$A.b,y$$=y$A.c,y$T=y$A.d;for(y$O&&(y$T*=y$O.d),y$B=y$e,y$k=y$u;y$k<y$Z;y$B+=2,y$k+=2)y$z=y$m[y$B],y$L=y$m[y$B+1],y$X[y$k]=y$z*y$C+y$L*y$y+y$v,y$X[y$k+1]=-(y$z*y$$+y$L*y$T+y$r)}},y$_.computeWorldPositions=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P){y$_.currDisplayData.bones,y$_.currDisplayData.weights,y$_.currDisplayData.triangles;var y$O=[],y$s=0,y$n=y$_.currDisplayData.verLen,y$m=this.position,y$H=this._spaces,y$B=[],y$D=[],y$U=y$n/6,y$k=-1,y$a=NaN,y$G=0,y$w=0,y$z=NaN,y$L=NaN,y$q=NaN,y$K=NaN;if(y$U--,y$n-=4,this.computeWorldVertices2(y$_,y$c,2,y$n,y$O,0),this._debugKey)for(y$s=0;y$s<y$O.length;)y$e.drawCircle(y$O[y$s++],y$O[y$s++],10,"#ff0000");y$B=y$O,this._curves.length=y$U;var y$M=this._curves,y$f=y$B[y$a=0],y$A=y$B[1],y$v=0,y$r=0,y$C=0,y$y=0,y$$=0,y$T=0,y$h=NaN,y$R=NaN,y$i=NaN,y$x=NaN,y$F=NaN,y$Y=NaN,y$p=NaN,y$o=NaN,y$Q=0;for(y$s=0,y$Q=2;y$s<y$U;y$s++,y$Q+=6)y$v=y$B[y$Q],y$r=y$B[y$Q+1],y$C=y$B[y$Q+2],y$y=y$B[y$Q+3],y$F=2*(y$h=.1875*(y$f-2*y$v+y$C))+(y$i=.09375*(3*(y$v-y$C)-y$f+(y$$=y$B[y$Q+4]))),y$Y=2*(y$R=.1875*(y$A-2*y$r+y$y))+(y$x=.09375*(3*(y$r-y$y)-y$A+(y$T=y$B[y$Q+5]))),y$p=.75*(y$v-y$f)+y$h+.16666667*y$i,y$o=.75*(y$r-y$A)+y$R+.16666667*y$x,y$a+=Math.sqrt(y$p*y$p+y$o*y$o),y$p+=y$F,y$o+=y$Y,y$F+=y$i,y$Y+=y$x,y$a+=Math.sqrt(y$p*y$p+y$o*y$o),y$p+=y$F,y$o+=y$Y,y$a+=Math.sqrt(y$p*y$p+y$o*y$o),y$p+=y$F+y$i,y$o+=y$Y+y$x,y$a+=Math.sqrt(y$p*y$p+y$o*y$o),y$M[y$s]=y$a,y$f=y$$,y$A=y$T;if(y$u&&(y$m*=y$a),y$P)for(y$s=0;y$s<y$Z;y$s++)y$H[y$s]*=y$a;var y$J=this._segments,y$j=0,y$t=0;for(y$t=y$w=y$G=y$s=0;y$s<y$Z;y$s++,y$G+=3)if((y$z=y$m+=y$L=y$H[y$s])<0)this.addBeforePosition(y$z,y$B,0,y$D,y$G);else if(y$a<y$z)this.addAfterPosition(y$z-y$a,y$B,y$n-4,y$D,y$G);else{for(;;y$w++)if(!((y$K=y$M[y$w])<y$z)){0==y$w?y$z/=y$K:y$z=(y$z-(y$q=y$M[y$w-1]))/(y$K-y$q);break}if(y$w!=y$k){var y$b=6*(y$k=y$w);for(y$f=y$B[y$b],y$A=y$B[y$b+1],y$v=y$B[y$b+2],y$r=y$B[y$b+3],y$C=y$B[y$b+4],y$y=y$B[y$b+5],y$F=2*(y$h=.03*(y$f-2*y$v+y$C))+(y$i=.006*(3*(y$v-y$C)-y$f+(y$$=y$B[y$b+6]))),y$Y=2*(y$R=.03*(y$A-2*y$r+y$y))+(y$x=.006*(3*(y$r-y$y)-y$A+(y$T=y$B[y$b+7]))),y$p=.3*(y$v-y$f)+y$h+.16666667*y$i,y$o=.3*(y$r-y$A)+y$R+.16666667*y$x,y$j=Math.sqrt(y$p*y$p+y$o*y$o),y$J[0]=y$j,y$b=1;y$b<8;y$b++)y$p+=y$F,y$o+=y$Y,y$F+=y$i,y$Y+=y$x,y$j+=Math.sqrt(y$p*y$p+y$o*y$o),y$J[y$b]=y$j;y$p+=y$F,y$o+=y$Y,y$j+=Math.sqrt(y$p*y$p+y$o*y$o),y$J[8]=y$j,y$p+=y$F+y$i,y$o+=y$Y+y$x,y$j+=Math.sqrt(y$p*y$p+y$o*y$o),y$J[9]=y$j,y$t=0}for(y$z*=y$j;;y$t++)if(!((y$K=y$J[y$t])<y$z)){0==y$t?y$z/=y$K:y$z=y$t+(y$z-(y$q=y$J[y$t-1]))/(y$K-y$q);break}this.addCurvePosition(.1*y$z,y$f,y$A,y$v,y$r,y$C,y$y,y$$,y$T,y$D,y$G,y$X||0<y$s&&0==y$L)}return y$D},y$_.addBeforePosition=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$c[y$e],y$P=y$c[y$e+1],y$O=y$c[y$e+2]-y$u,y$s=y$c[y$e+3]-y$P,y$n=Math.atan2(y$s,y$O);y$Z[y$X]=y$u+y$_*Math.cos(y$n),y$Z[y$X+1]=y$P+y$_*Math.sin(y$n),y$Z[y$X+2]=y$n},y$_.addAfterPosition=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$c[y$e+2],y$P=y$c[y$e+3],y$O=y$u-y$c[y$e],y$s=y$P-y$c[y$e+1],y$n=Math.atan2(y$s,y$O);y$Z[y$X]=y$u+y$_*Math.cos(y$n),y$Z[y$X+1]=y$P+y$_*Math.sin(y$n),y$Z[y$X+2]=y$n},y$_.addCurvePosition=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m,y$H){0==y$_&&(y$_=1e-4);var y$B=y$_*y$_,y$D=y$B*y$_,y$U=1-y$_,y$k=y$U*y$U,y$a=y$k*y$U,y$G=y$U*y$_,y$w=3*y$G,y$z=y$U*y$w,y$L=y$w*y$_,y$q=y$c*y$a+y$Z*y$z+y$u*y$L+y$O*y$D,y$K=y$e*y$a+y$X*y$z+y$P*y$L+y$s*y$D;y$n[y$m]=y$q,y$n[y$m+1]=y$K,y$n[y$m+2]=y$H?Math.atan2(y$K-(y$e*y$k+y$X*y$G*2+y$P*y$B),y$q-(y$c*y$k+y$Z*y$G*2+y$u*y$B)):0},y$h.NONE=-1,y$h.BEFORE=-2,y$h.AFTER=-3,y$e(y$h,["_tempMt",function(){return this._tempMt=new y$$_}]),y$h}(),y$Q_=function(){function y$_(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return y$Z(y$_,"laya.ani.bone.PathConstraintData"),y$_}(),y$J_=function(){function y$_(){this.name=null,this.slotArr=[]}return y$Z(y$_,"laya.ani.bone.SkinData"),y$_}(),y$j_=function(){function y$_(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}y$Z(y$_,"laya.ani.bone.SkinSlotDisplayData");var y$c=y$_.prototype;return y$c.createTexture=function(y$_){return this.texture||(this.texture=new y$T_(y$_.bitmap,this.uvs),y$_.bitmap.alphaTexture&&(this.texture.alphaTexture=new y$T_(y$_.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=y$_.height,this.texture.height=y$_.width,this.texture.offsetX=-y$_.offsetX,this.texture.offsetY=-y$_.offsetY,this.texture.sourceWidth=y$_.sourceHeight,this.texture.sourceHeight=y$_.sourceWidth):(this.texture.width=y$_.width,this.texture.height=y$_.height,this.texture.offsetX=-y$_.offsetX,this.texture.offsetY=-y$_.offsetY,this.texture.sourceWidth=y$_.sourceWidth,this.texture.sourceHeight=y$_.sourceHeight),y$a.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},y$c.destory=function(){this.texture&&this.texture.destroy()},y$_}(),y$t_=function(){function y$_(){this.name=null,this.displayArr=[]}return y$Z(y$_,"laya.ani.bone.SlotData"),y$_.prototype.getDisplayByName=function(y$_){for(var y$c=0,y$e=this.displayArr.length;y$c<y$e;y$c++)if(this.displayArr[y$c].attachmentName==y$_)return y$c;return-1},y$_}(),y$K=function(){function y$_(y$_,y$c){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=y$k(2,0),this._data=y$_,null==this._bones&&(this._bones=[]),this.target=y$c[y$_.targetIndex];var y$e,y$Z=0;for(y$Z=0,y$e=y$_.boneIndexs.length;y$Z<y$e;y$Z++)this._bones.push(y$c[y$_.boneIndexs[y$Z]]);this.rotateMix=y$_.rotateMix,this.translateMix=y$_.translateMix,this.scaleMix=y$_.scaleMix,this.shearMix=y$_.shearMix}return y$Z(y$_,"laya.ani.bone.TfConstraint"),y$_.prototype.apply=function(){for(var y$_,y$c=this.target.resultMatrix.a,y$e=this.target.resultMatrix.b,y$Z=this.target.resultMatrix.c,y$X=this.target.resultMatrix.d,y$u=0,y$P=this._bones.length;y$u<y$P;y$u++){if(y$_=this._bones[y$u],0<this.rotateMix){var y$O=y$_.resultMatrix.a,y$s=y$_.resultMatrix.b,y$n=y$_.resultMatrix.c,y$m=y$_.resultMatrix.d,y$H=Math.atan2(y$Z,y$c)-Math.atan2(y$n,y$O)+this._data.offsetRotation*Math.PI/180;y$H>Math.PI?y$H-=2*Math.PI:y$H<-Math.PI&&(y$H+=2*Math.PI),y$H*=this.rotateMix;var y$B=Math.cos(y$H),y$D=Math.sin(y$H);y$_.resultMatrix.a=y$B*y$O-y$D*y$n,y$_.resultMatrix.b=y$B*y$s-y$D*y$m,y$_.resultMatrix.c=y$D*y$O+y$B*y$n,y$_.resultMatrix.d=y$D*y$s+y$B*y$m}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),y$_.resultMatrix.tx+=(this._temp[0]-y$_.resultMatrix.tx)*this.translateMix,y$_.resultMatrix.ty+=(this._temp[1]-y$_.resultMatrix.ty)*this.translateMix,y$_.updateChild()),0<this.scaleMix){var y$U=Math.sqrt(y$_.resultMatrix.a*y$_.resultMatrix.a+y$_.resultMatrix.c*y$_.resultMatrix.c),y$k=Math.sqrt(y$c*y$c+y$Z*y$Z),y$a=1e-5<y$U?(y$U+(y$k-y$U+this._data.offsetScaleX)*this.scaleMix)/y$U:0;y$_.resultMatrix.a*=y$a,y$_.resultMatrix.c*=y$a,y$U=Math.sqrt(y$_.resultMatrix.b*y$_.resultMatrix.b+y$_.resultMatrix.d*y$_.resultMatrix.d),y$k=Math.sqrt(y$e*y$e+y$X*y$X),y$a=1e-5<y$U?(y$U+(y$k-y$U+this._data.offsetScaleY)*this.scaleMix)/y$U:0,y$_.resultMatrix.b*=y$a,y$_.resultMatrix.d*=y$a}if(0<this.shearMix){y$s=y$_.resultMatrix.b,y$m=y$_.resultMatrix.d;var y$G=Math.atan2(y$m,y$s);(y$H=Math.atan2(y$X,y$e)-Math.atan2(y$Z,y$c)-(y$G-Math.atan2(y$_.resultMatrix.c,y$_.resultMatrix.a)))>Math.PI?y$H-=2*Math.PI:y$H<-Math.PI&&(y$H+=2*Math.PI),y$H=y$G+(y$H+this._data.offsetShearY*Math.PI/180)*this.shearMix,y$a=Math.sqrt(y$s*y$s+y$m*y$m),y$_.resultMatrix.b=Math.cos(y$H)*y$a,y$_.resultMatrix.d=Math.sin(y$H)*y$a}}},y$_}(),y$b_=function(){function y$_(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return y$Z(y$_,"laya.ani.bone.TfConstraintData"),y$_}(),y$N_=function(){function y$_(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}y$Z(y$_,"laya.ani.bone.Transform");var y$c=y$_.prototype;return y$c.initData=function(y$_){null!=y$_.x&&(this.x=y$_.x),null!=y$_.y&&(this.y=y$_.y),null!=y$_.skX&&(this.skX=y$_.skX),null!=y$_.skY&&(this.skY=y$_.skY),null!=y$_.scX&&(this.scX=y$_.scX),null!=y$_.scY&&(this.scY=y$_.scY)},y$c.getMatrix=function(){var y$_;return(y$_=this.mMatrix?this.mMatrix:this.mMatrix=new y$$_).identity(),y$_.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(y$_,this.skewX*Math.PI/180,this.skewY*Math.PI/180),y$_.rotate(this.skX*Math.PI/180),y$_.translate(this.x,this.y),y$_},y$c.skew=function(y$_,y$c,y$e){var y$Z=Math.sin(y$e),y$X=Math.cos(y$e),y$u=Math.sin(y$c),y$P=Math.cos(y$c);return y$_.setTo(y$_.a*y$P-y$_.b*y$Z,y$_.a*y$u+y$_.b*y$X,y$_.c*y$P-y$_.d*y$Z,y$_.c*y$u+y$_.d*y$X,y$_.tx*y$P-y$_.ty*y$Z,y$_.tx*y$u+y$_.ty*y$X),y$_},y$_}(),y$M=function(){function y$_(){}return y$Z(y$_,"laya.ani.bone.UVTools"),y$_.getRelativeUV=function(y$_,y$c,y$e){var y$Z=y$_[0],y$X=y$_[2]-y$_[0],y$u=y$_[1],y$P=y$_[5]-y$_[1];y$e||(y$e=[]),y$e.length=y$c.length;var y$O,y$s=0;y$O=y$e.length;var y$n=1/y$X,y$m=1/y$P;for(y$s=0;y$s<y$O;y$s+=2)y$e[y$s]=(y$c[y$s]-y$Z)*y$n,y$e[y$s+1]=(y$c[y$s+1]-y$u)*y$m;return y$e},y$_.getAbsoluteUV=function(y$_,y$c,y$e){if(0==y$_[0]&&0==y$_[1]&&1==y$_[4]&&1==y$_[5])return y$e?(y$G.copyArray(y$e,y$c),y$e):y$c;var y$Z=y$_[0],y$X=y$_[2]-y$_[0],y$u=y$_[1],y$P=y$_[5]-y$_[1];y$e||(y$e=[]),y$e.length=y$c.length;var y$O,y$s=0;for(y$O=y$e.length,y$s=0;y$s<y$O;y$s+=2)y$e[y$s]=y$c[y$s]*y$X+y$Z,y$e[y$s+1]=y$c[y$s+1]*y$P+y$u;return y$e},y$_}(),y$h=function(){function y$_(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return y$Z(y$_,"laya.ani.KeyFramesContent"),y$_}(),y$f=function(){function y$m(){}return y$Z(y$m,"laya.ani.math.BezierLerp"),y$m.getBezierRate=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$m._getBezierParamKey(y$c,y$e,y$Z,y$X),y$P=100*y$u+y$_;if(y$m._bezierResultCache[y$P])return y$m._bezierResultCache[y$P];var y$O,y$s=y$m._getBezierPoints(y$c,y$e,y$Z,y$X,y$u),y$n=0;for(y$O=y$s.length,y$n=0;y$n<y$O;y$n+=2)if(y$_<=y$s[y$n])return y$m._bezierResultCache[y$P]=y$s[y$n+1],y$s[y$n+1];return y$m._bezierResultCache[y$P]=1},y$m._getBezierParamKey=function(y$_,y$c,y$e,y$Z){return 100*(100*(100*(100*y$_+y$c)+y$e)+y$Z)},y$m._getBezierPoints=function(y$_,y$c,y$e,y$Z,y$X){return y$m._bezierPointsCache[y$X]?y$m._bezierPointsCache[y$X]:(y$u=[0,0,y$_,y$c,y$e,y$Z,1,1],y$P=(new y$O).getBezierPoints(y$u,100,3),y$m._bezierPointsCache[y$X]=y$P);var y$u,y$P},y$m._bezierResultCache={},y$m._bezierPointsCache={},y$m}(),y$A=function(y$_){function y$c(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,y$c.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}y$Z(y$c,"laya.ani.AnimationPlayer",y$X);var y$e=y$c.prototype;return y$X_.imps(y$e,{"laya.resource.IDestroy":!0}),y$e._onTempletLoadedComputeFullKeyframeIndices=function(y$_,y$c,y$e){this._templet===y$e&&this._cachePlayRate===y$_&&this._cacheFrameRate===y$c&&this._computeFullKeyframeIndices()},y$e._computeFullKeyframeIndices=function(){for(var y$_=this._fullFrames=[],y$c=this._templet,y$e=this._cacheFrameRateInterval*this._cachePlayRate,y$Z=0,y$X=y$c.getAnimationCount();y$Z<y$X;y$Z++){for(var y$u=[],y$P=0,y$O=y$c.getAnimation(y$Z).nodes.length;y$P<y$O;y$P++){for(var y$s=y$c.getAnimation(y$Z).nodes[y$P],y$n=Math.floor(y$s.playTime/y$e+.01),y$m=new Uint16Array(y$n+1),y$H=-1,y$B=0,y$D=y$s.keyFrame.length;y$B<y$D;y$B++){var y$U=y$s.keyFrame[y$B],y$k=y$U.startTime,y$a=y$k+y$U.duration+y$e;do{for(var y$G=Math.floor(y$k/y$e+.5),y$w=y$H+1;y$w<y$G;y$w++)y$m[y$w]=y$B;y$m[y$H=y$G]=y$B,y$k+=y$e}while(y$k<=y$a)}y$u.push(y$m)}y$_.push(y$u)}},y$e._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},y$e._calculatePlayDuration=function(){if(0!==this.state){var y$_=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=y$_),this._playEnd>y$_&&(this._playEnd=y$_),this._playDuration=this._playEnd-this._playStart}},y$e._setPlayParams=function(y$_,y$c){this._currentTime=y$_,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/y$c+.01),0),this._currentFrameTime=this._currentKeyframeIndex*y$c},y$e._setPlayParamsWhenStop=function(y$_,y$c){this._currentTime=y$_,this._currentKeyframeIndex=Math.max(Math.floor(y$_/y$c+.01),0),this._currentFrameTime=this._currentKeyframeIndex*y$c,this._currentAnimationClipIndex=-1},y$e._update=function(y$_){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var y$c=this._cacheFrameRateInterval*this._cachePlayRate,y$e=0;this._startUpdateLoopCount!==y$U.loopCount&&(y$e=y$_*this.playbackRate,this._elapsedPlaybackTime+=y$e);var y$Z=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=y$Z)return this._setPlayParamsWhenStop(y$Z,y$c),void this.event("stopped");if(y$e+=this._currentTime,0<y$Z)if(y$Z<=y$e)do{if(y$e-=y$Z,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(y$Z,y$c),this._stopWhenCircleFinish=!1,void this.event("stopped");y$e<y$Z&&(this._setPlayParams(y$e,y$c),this.event("complete"))}while(y$Z<=y$e);else this._setPlayParams(y$e,y$c);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(y$Z,y$c),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},y$e._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},y$e.play=function(y$_,y$c,y$e,y$Z,y$X){if(void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=1),void 0===y$e&&(y$e=2147483647),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(y$e<0||y$Z<0||y$X<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==y$X&&y$X<y$Z)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=y$c,this._overallDuration=y$e,this._playStart=y$Z,this._playEnd=y$X,this._paused=!1,this._currentAnimationClipIndex=y$_,this._currentKeyframeIndex=0,this._startUpdateLoopCount=y$U.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},y$e.playByFrame=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$_&&(y$_=0),void 0===y$c&&(y$c=1),void 0===y$e&&(y$e=2147483647),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=30);var y$P=1e3/y$u;this.play(y$_,y$c,y$e,y$Z*y$P,y$X*y$P)},y$e.stop=function(y$_){void 0===y$_&&(y$_=!0),y$_?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},y$u(0,y$e,"playEnd",function(){return this._playEnd}),y$u(0,y$e,"templet",function(){return this._templet},function(y$_){0===!this.state&&this.stop(!0),this._templet!==y$_&&((this._templet=y$_).loaded?this._computeFullKeyframeIndices():y$_.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),y$u(0,y$e,"playStart",function(){return this._playStart}),y$u(0,y$e,"playDuration",function(){return this._playDuration}),y$u(0,y$e,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),y$u(0,y$e,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),y$u(0,y$e,"overallDuration",function(){return this._overallDuration}),y$u(0,y$e,"currentFrameTime",function(){return this._currentFrameTime}),y$u(0,y$e,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),y$u(0,y$e,"currentPlayTime",function(){return this._currentTime+this._playStart}),y$u(0,y$e,"cachePlayRate",function(){return this._cachePlayRate},function(y$_){this._cachePlayRate!==y$_&&(this._cachePlayRate=y$_,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[y$_,this._cacheFrameRate])))}),y$u(0,y$e,"cacheFrameRate",function(){return this._cacheFrameRate},function(y$_){this._cacheFrameRate!==y$_&&(this._cacheFrameRate=y$_,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,y$_])))}),y$u(0,y$e,"currentTime",null,function(y$_){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(y$_<this._playStart||y$_>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=y$U.loopCount;var y$c=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=y$_,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/y$c),0),this._currentFrameTime=this._currentKeyframeIndex*y$c}}),y$u(0,y$e,"paused",function(){return this._paused},function(y$_){(this._paused=y$_)&&this.event("paused")}),y$u(0,y$e,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),y$u(0,y$e,"destroyed",function(){return this._destroyed}),y$c}(),y$R=function(y$_){function y$c(){y$c.__super.call(this),y$a.isConchNode&&(this.drawSkin=function(y$_){y$_.transform||(y$_.transform=y$$_.EMPTY),this._addCmd([y$_]),this.setSkinMesh&&this.setSkinMesh(y$_._ps,y$_.mVBData,y$_.mEleNum,0,y$_.mTexture,y$_.transform)})}return y$Z(y$c,"laya.ani.GraphicsAni",y$P),y$c.prototype.drawSkin=function(y$_){var y$c=[y$_];this._saveToCmd(y$a._context._drawSkin,y$c)},y$c.create=function(){return y$c._caches.pop()||new y$c},y$c.recycle=function(y$_){y$_.clear(),y$c._caches.push(y$_)},y$c._caches=[],y$c}(),y$i=function(y$_){function y$w(){this._aniMap={},this.unfixedLastAniIndex=-1,y$w.__super.call(this),this._anis=new Array}y$Z(y$w,"laya.ani.AnimationTemplet",y$m);var y$c=y$w.prototype;return y$c.parse=function(y$_){var y$c=new y$y_(y$_);this._aniVersion=y$c.readUTFString(),y$z.parse(this,y$c)},y$c._calculateKeyFrame=function(y$_,y$c,y$e){var y$Z=y$_.keyFrame;y$Z[y$c]=y$Z[0];for(var y$X=0;y$X<y$c;y$X++){var y$u=y$Z[y$X];y$u.nextData=0===y$u.duration?y$u.data:y$Z[y$X+1].data}y$Z.length--},y$c.onAsynLoaded=function(y$_,y$c,y$e){var y$Z=new y$y_(y$c);switch(this._aniVersion=y$Z.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":y$L.parse(this,y$Z);break;default:y$z.parse(this,y$Z)}this._endLoaded()},y$c.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},y$c.getAnimationCount=function(){return this._anis.length},y$c.getAnimation=function(y$_){return this._anis[y$_]},y$c.getAniDuration=function(y$_){return this._anis[y$_].playTime},y$c.getNodes=function(y$_){return this._anis[y$_].nodes},y$c.getNodeIndexWithName=function(y$_,y$c){return this._anis[y$_].bone3DMap[y$c]},y$c.getNodeCount=function(y$_){return this._anis[y$_].nodes.length},y$c.getTotalkeyframesLength=function(y$_){return this._anis[y$_].totalKeyframeDatasLength},y$c.getPublicExtData=function(){return this._publicExtData},y$c.getAnimationDataWithCache=function(y$_,y$c,y$e,y$Z){var y$X=y$c[y$e];if(y$X){var y$u=y$X[y$_];return y$u?y$u[y$Z]:null}return null},y$c.setAnimationDataWithCache=function(y$_,y$c,y$e,y$Z,y$X){var y$u=y$c[y$e]||(y$c[y$e]={});(y$u[y$_]||(y$u[y$_]=[]))[y$Z]=y$X},y$c.getOriginalData=function(y$_,y$c,y$e,y$Z,y$X){for(var y$u=this._anis[y$_].nodes,y$P=0,y$O=0,y$s=y$u.length,y$n=0;y$O<y$s;y$O++){var y$m,y$H=y$u[y$O];y$m=y$H.keyFrame[y$e[y$O][y$Z]],y$H.dataOffset=y$n;var y$B=y$X-y$m.startTime,y$D=y$H.lerpType;if(y$D)switch(y$D){case 0:case 1:for(y$P=0;y$P<y$H.keyframeWidth;)y$P+=y$H.interpolationMethod[y$P](y$H,y$P,y$c,y$n+y$P,y$m.data,y$B,null,y$m.duration,y$m.nextData);break;case 2:var y$U=y$m.interpolationData,y$k=y$U.length,y$a=0;for(y$P=0;y$P<y$k;){var y$G=y$U[y$P];switch(y$G){case 6:case 7:y$P+=y$w.interpolation[y$G](y$H,y$a,y$c,y$n+y$a,y$m.data,y$B,null,y$m.duration,y$m.nextData,y$U,y$P+1);break;default:y$P+=y$w.interpolation[y$G](y$H,y$a,y$c,y$n+y$a,y$m.data,y$B,null,y$m.duration,y$m.nextData)}y$a++}}else for(y$P=0;y$P<y$H.keyframeWidth;)y$P+=y$H.interpolationMethod[y$P](y$H,y$P,y$c,y$n+y$P,y$m.data,y$B,null,y$m.duration,y$m.nextData);y$n+=y$H.keyframeWidth}},y$c.getNodesCurrentFrameIndex=function(y$_,y$c){var y$e=this._anis[y$_].nodes;y$_!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(y$e.length),this.unfixedCurrentTimes=new Float32Array(y$e.length),this.unfixedLastAniIndex=y$_);for(var y$Z=0,y$X=y$e.length;y$Z<y$X;y$Z++){var y$u=y$e[y$Z];for(y$c<this.unfixedCurrentTimes[y$Z]&&(this.unfixedCurrentFrameIndexes[y$Z]=0),this.unfixedCurrentTimes[y$Z]=y$c;this.unfixedCurrentFrameIndexes[y$Z]<y$u.keyFrame.length&&!(y$u.keyFrame[this.unfixedCurrentFrameIndexes[y$Z]].startTime>this.unfixedCurrentTimes[y$Z]);)this.unfixedCurrentFrameIndexes[y$Z]++;this.unfixedCurrentFrameIndexes[y$Z]--}return this.unfixedCurrentFrameIndexes},y$c.getOriginalDataUnfixedRate=function(y$_,y$c,y$e){var y$Z=this._anis[y$_].nodes;y$_!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(y$Z.length),this.unfixedCurrentTimes=new Float32Array(y$Z.length),this.unfixedKeyframes=y$k(y$Z.length),this.unfixedLastAniIndex=y$_);for(var y$X=0,y$u=0,y$P=y$Z.length,y$O=0;y$u<y$P;y$u++){var y$s=y$Z[y$u];for(y$e<this.unfixedCurrentTimes[y$u]&&(this.unfixedCurrentFrameIndexes[y$u]=0),this.unfixedCurrentTimes[y$u]=y$e;this.unfixedCurrentFrameIndexes[y$u]<y$s.keyFrame.length&&!(y$s.keyFrame[this.unfixedCurrentFrameIndexes[y$u]].startTime>this.unfixedCurrentTimes[y$u]);)this.unfixedKeyframes[y$u]=y$s.keyFrame[this.unfixedCurrentFrameIndexes[y$u]],this.unfixedCurrentFrameIndexes[y$u]++;var y$n=this.unfixedKeyframes[y$u];y$s.dataOffset=y$O;var y$m=y$e-y$n.startTime;if(y$s.lerpType)switch(y$s.lerpType){case 0:case 1:for(y$X=0;y$X<y$s.keyframeWidth;)y$X+=y$s.interpolationMethod[y$X](y$s,y$X,y$c,y$O+y$X,y$n.data,y$m,null,y$n.duration,y$n.nextData);break;case 2:var y$H=y$n.interpolationData,y$B=y$H.length,y$D=0;for(y$X=0;y$X<y$B;){var y$U=y$H[y$X];switch(y$U){case 6:case 7:y$X+=y$w.interpolation[y$U](y$s,y$D,y$c,y$O+y$D,y$n.data,y$m,null,y$n.duration,y$n.nextData,y$H,y$X+1);break;default:y$X+=y$w.interpolation[y$U](y$s,y$D,y$c,y$O+y$D,y$n.data,y$m,null,y$n.duration,y$n.nextData)}y$D++}}else for(y$X=0;y$X<y$s.keyframeWidth;)y$X+=y$s.interpolationMethod[y$X](y$s,y$X,y$c,y$O+y$X,y$n.data,y$m,null,y$n.duration,y$n.nextData);y$O+=y$s.keyframeWidth}},y$w._LinearInterpolation_0=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){var y$m=0===y$O?0:y$u/y$O;return y$e[y$Z]=(1-y$m)*y$X[y$c]+y$m*y$s[y$c],1},y$w._QuaternionInterpolation_1=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){var y$m=0===y$O?0:y$u/y$O;return y$B.slerpQuaternionArray(y$X,y$c,y$s,y$c,y$m,y$e,y$Z),4},y$w._AngleInterpolation_2=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){return 0},y$w._RadiansInterpolation_3=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){return 0},y$w._Matrix4x4Interpolation_4=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){for(var y$m=0;y$m<16;y$m++,y$c++)y$e[y$Z+y$m]=y$X[y$c]+y$u*y$P[y$c];return 16},y$w._NoInterpolation_5=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n){return y$e[y$Z]=y$X[y$c],1},y$w._BezierInterpolation_6=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m){return void 0===y$m&&(y$m=0),y$e[y$Z]=y$X[y$c]+(y$s[y$c]-y$X[y$c])*y$f.getBezierRate(y$u/y$O,y$n[y$m],y$n[y$m+1],y$n[y$m+2],y$n[y$m+3]),5},y$w._BezierInterpolation_7=function(y$_,y$c,y$e,y$Z,y$X,y$u,y$P,y$O,y$s,y$n,y$m){return void 0===y$m&&(y$m=0),y$e[y$Z]=y$n[y$m+4]+y$n[y$m+5]*y$f.getBezierRate((.001*y$u+y$n[y$m+6])/y$n[y$m+7],y$n[y$m],y$n[y$m+1],y$n[y$m+2],y$n[y$m+3]),9},y$w.load=function(y$_){return y$X_.loader.create(y$_,null,null,y$w)},y$w.interpolation=[y$w._LinearInterpolation_0,y$w._QuaternionInterpolation_1,y$w._AngleInterpolation_2,y$w._RadiansInterpolation_3,y$w._Matrix4x4Interpolation_4,y$w._NoInterpolation_5,y$w._BezierInterpolation_6,y$w._BezierInterpolation_7],y$w}(),y$v=function(y$c){function y$e(y$_,y$c){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,y$e.__super.call(this),void 0===y$c&&(y$c=0),y$_&&this.init(y$_,y$c)}y$Z(y$e,"laya.ani.bone.Skeleton",y$c);var y$_=y$e.prototype;return y$_.init=function(y$_,y$c){void 0===y$c&&(y$c=0);var y$e,y$Z,y$X,y$u=0,y$P=0;if(1==y$c)for(this._graphicsCache=[],y$u=0,y$P=y$_.getAnimationCount();y$u<y$P;y$u++)this._graphicsCache.push([]);if(this._yReverseMatrix=y$_.yReverseMatrix,this._aniMode=y$c,this._templet=y$_,this._player=new y$A,this._player.cacheFrameRate=y$_.rate,this._player.templet=y$_,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=y$_.mBoneArr,this._rootBone=y$_.mRootBone,this._aniSectionDic=y$_.aniSectionDic,0<y$_.ikArr.length)for(this._ikArr=[],y$u=0,y$P=y$_.ikArr.length;y$u<y$P;y$u++)this._ikArr.push(new y$w(y$_.ikArr[y$u],this._boneList));if(0<y$_.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),y$u=0,y$P=y$_.pathArr.length;y$u<y$P;y$u++)y$e=y$_.pathArr[y$u],y$Z=new y$q(y$e,this._boneList),(y$X=this._boneSlotDic[y$e.name])&&((y$Z=new y$q(y$e,this._boneList)).target=y$X),this._pathDic[y$e.name]=y$Z;if(0<y$_.tfArr.length)for(this._tfArr=[],y$u=0,y$P=y$_.tfArr.length;y$u<y$P;y$u++)this._tfArr.push(new y$K(y$_.tfArr[y$u],this._boneList));if(0<y$_.skinDataArray.length){var y$O=this._templet.skinDataArray[this._skinIndex];this._skinName=y$O.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},y$_.load=function(y$_,y$c,y$e){},y$_._onLoaded=function(){},y$_._parseComplete=function(){var y$_=y$r.TEMPLET_DICTIONARY[this._aniPath];y$_&&(this.init(y$_,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},y$_._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},y$_._onPlay=function(){this.event("played")},y$_._onStop=function(){var y$_,y$c=this._templet.eventAniArr[this._aniClipIndex];if(y$c&&this._eventIndex<y$c.length)for(;this._eventIndex<y$c.length;this._eventIndex++)(y$_=y$c[this._eventIndex]).time>=this._player.playStart&&y$_.time<=this._player.playEnd&&this.event("label",y$_);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},y$_._onPause=function(){this.event("paused")},y$_._parseSrcBoneMatrix=function(){var y$_=0,y$c=0;for(y$c=this._templet.srcBoneMatrixArr.length,y$_=0;y$_<y$c;y$_++)this._boneMatrixArray.push(new y$$_);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var y$e,y$Z,y$X=this._templet.boneSlotArray;for(y$_=0,y$c=y$X.length;y$_<y$c;y$_++)y$e=y$X[y$_],null==(y$Z=this._bindBoneBoneSlotDic[y$e.parent])&&(this._bindBoneBoneSlotDic[y$e.parent]=y$Z=[]),this._boneSlotDic[y$e.name]=y$e=y$e.copy(),y$Z.push(y$e),this._boneSlotArray.push(y$e)}},y$_._emitMissedEvents=function(y$_,y$c,y$e){void 0===y$e&&(y$e=0);var y$Z=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(y$Z){var y$X,y$u,y$P=0;for(y$X=y$Z.length,y$P=y$e;y$P<y$X;y$P++)(y$u=y$Z[y$P]).time>=this._player.playStart&&y$u.time<=this._player.playEnd&&this.event("label",y$u)}},y$_._update=function(y$_){if(void 0===y$_&&(y$_=!0),!(this._pause||y$_&&this._indexControl)){var y$c=this.timer.currTimer,y$e=this._player.currentKeyframeIndex,y$Z=y$c-this._lastTime;if(y$_?this._player._update(y$Z):y$e=-1,this._lastTime=y$c,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<y$Z&&this._clipIndex==y$e&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var y$X;this._lastUpdateAniClipIndex=this._aniClipIndex,y$e>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var y$u,y$P=this._templet.eventAniArr[this._aniClipIndex];if(y$P&&this._eventIndex<y$P.length&&((y$X=y$P[this._eventIndex]).time>=this._player.playStart&&y$X.time<=this._player.playEnd?this._player.currentPlayTime>=y$X.time&&(this.event("label",y$X),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(y$u=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=y$u&&(this.graphics=y$u));var y$O=0,y$s=0;for(y$s=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,y$s-1)&&0<y$s;)y$s--;if(y$s<this._clipIndex)for(y$O=y$s;y$O<this._clipIndex;y$O++)this._createGraphics(y$O)}else if(1==this._aniMode){if(y$u=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=y$u&&(this.graphics=y$u));for(y$s=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,y$s-1)&&0<y$s;)y$s--;if(y$s<this._clipIndex)for(y$O=y$s;y$O<this._clipIndex;y$O++)this._createGraphics(y$O)}this._createGraphics()}}},y$_._createGraphics=function(y$_){void 0===y$_&&(y$_=-1),-1==y$_&&(y$_=this._clipIndex);var y$c,y$e,y$Z=y$_*this._player.cacheFrameRateInterval,y$X=this._templet.drawOrderAniArr[this._aniClipIndex];if(y$X&&0<y$X.length)for(this._drawOrderIndex=0,y$c=y$X[this._drawOrderIndex];y$Z>=y$c.time&&(this._drawOrder=y$c.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=y$X.length));)y$c=y$X[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=y$R.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=y$R.create(),y$e=this.graphics;var y$u=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],y$_,y$Z);var y$P,y$O,y$s,y$n,y$m=this._aniSectionDic[this._aniClipIndex],y$H=0,y$B=0,y$D=0,y$U=0,y$k=0,y$a=this._templet.srcBoneMatrixArr.length;for(y$k=y$m[y$B=0];y$B<y$a;y$B++)y$n=this._boneList[y$B],y$s=this._templet.srcBoneMatrixArr[y$B],y$n.resultTransform.scX=y$s.scX*this._curOriginalData[y$H++],y$n.resultTransform.skX=y$s.skX+this._curOriginalData[y$H++],y$n.resultTransform.skY=y$s.skY+this._curOriginalData[y$H++],y$n.resultTransform.scY=y$s.scY*this._curOriginalData[y$H++],y$n.resultTransform.x=y$s.x+this._curOriginalData[y$H++],y$n.resultTransform.y=y$s.y+this._curOriginalData[y$H++],8===this._templet.tMatrixDataLen&&(y$n.resultTransform.skewX=y$s.skewX+this._curOriginalData[y$H++],y$n.resultTransform.skewY=y$s.skewY+this._curOriginalData[y$H++]);var y$G,y$w={},y$z={};for(y$k+=y$m[1];y$B<y$k;y$B++)y$w[(y$G=y$u[y$B]).name]=this._curOriginalData[y$H++],y$z[y$G.name]=this._curOriginalData[y$H++],this._curOriginalData[y$H++],this._curOriginalData[y$H++],this._curOriginalData[y$H++],this._curOriginalData[y$H++];var y$L,y$q,y$K={},y$M={};for(y$k+=y$m[2];y$B<y$k;y$B++)y$K[(y$G=y$u[y$B]).name]=this._curOriginalData[y$H++],y$M[y$G.name]=this._curOriginalData[y$H++],this._curOriginalData[y$H++],this._curOriginalData[y$H++],this._curOriginalData[y$H++],this._curOriginalData[y$H++];if(this._pathDic)for(y$k+=y$m[3];y$B<y$k;y$B++){if(y$G=y$u[y$B],y$L=this._pathDic[y$G.name])switch(new y$y_(y$G.extenData).getByte()){case 1:y$L.position=this._curOriginalData[y$H++];break;case 2:y$L.spacing=this._curOriginalData[y$H++];break;case 3:y$L.rotateMix=this._curOriginalData[y$H++],y$L.translateMix=this._curOriginalData[y$H++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(y$$_.TEMP.identity()),this._ikArr)for(y$B=0,y$k=this._ikArr.length;y$B<y$k;y$B++)y$q=this._ikArr[y$B],y$K.hasOwnProperty(y$q.name)&&(y$q.bendDirection=y$K[y$q.name]),y$M.hasOwnProperty(y$q.name)&&(y$q.mix=y$M[y$q.name]),y$q.apply();if(this._pathDic)for(var y$f in this._pathDic)(y$L=this._pathDic[y$f]).apply(this._boneList,y$e);if(this._tfArr)for(y$B=0,y$U=this._tfArr.length;y$B<y$U;y$B++)this._tfArr[y$B].apply();for(y$B=0,y$U=this._boneList.length;y$B<y$U;y$B++)if(y$n=this._boneList[y$B],y$O=this._bindBoneBoneSlotDic[y$n.name],y$n.resultMatrix.copyTo(this._boneMatrixArray[y$B]),y$O)for(y$D=0,y$k=y$O.length;y$D<y$k;y$D++)(y$P=y$O[y$D])&&y$P.setParentMatrix(y$n.resultMatrix);var y$A,y$v,y$r,y$C,y$y={},y$$=this._templet.deformAniArr;if(y$$&&0<y$$.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,y$B=0,y$k=this._boneSlotArray.length;y$B<y$k;y$B++)(y$P=this._boneSlotArray[y$B]).deformData=null;var y$T,y$h=y$$[this._aniClipIndex];for(y$T in y$A=y$h.default,this._setDeform(y$A,y$y,this._boneSlotArray,y$Z),y$h)"default"!=y$T&&y$T!=this._skinName&&(y$A=y$h[y$T],this._setDeform(y$A,y$y,this._boneSlotArray,y$Z));y$A=y$h[this._skinName],this._setDeform(y$A,y$y,this._boneSlotArray,y$Z)}if(this._drawOrder)for(y$B=0,y$k=this._drawOrder.length;y$B<y$k;y$B++)y$v=y$w[(y$P=this._boneSlotArray[this._drawOrder[y$B]]).name],y$r=y$z[y$P.name],isNaN(y$r)||(y$e.save(),y$e.alpha(y$r)),isNaN(y$v)||-2==y$v||(this._templet.attachmentNames?y$P.showDisplayByName(this._templet.attachmentNames[y$v]):y$P.showDisplayByIndex(y$v)),y$y[this._drawOrder[y$B]]?(y$C=y$y[this._drawOrder[y$B]],y$P.currDisplayData&&y$C[y$P.currDisplayData.attachmentName]?y$P.deformData=y$C[y$P.currDisplayData.attachmentName]:y$P.deformData=null):y$P.deformData=null,isNaN(y$r)?y$P.draw(y$e,this._boneMatrixArray,2==this._aniMode):y$P.draw(y$e,this._boneMatrixArray,2==this._aniMode,y$r),isNaN(y$r)||y$e.restore();else for(y$B=0,y$k=this._boneSlotArray.length;y$B<y$k;y$B++)y$v=y$w[(y$P=this._boneSlotArray[y$B]).name],y$r=y$z[y$P.name],isNaN(y$r)||(y$e.save(),y$e.alpha(y$r)),isNaN(y$v)||-2==y$v||(this._templet.attachmentNames?y$P.showDisplayByName(this._templet.attachmentNames[y$v]):y$P.showDisplayByIndex(y$v)),y$y[y$B]?(y$C=y$y[y$B],y$P.currDisplayData&&y$C[y$P.currDisplayData.attachmentName]?y$P.deformData=y$C[y$P.currDisplayData.attachmentName]:y$P.deformData=null):y$P.deformData=null,isNaN(y$r)?y$P.draw(y$e,this._boneMatrixArray,2==this._aniMode):y$P.draw(y$e,this._boneMatrixArray,2==this._aniMode,y$r),isNaN(y$r)||y$e.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,y$_,y$e):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,y$_,y$e)},y$_._setDeform=function(y$_,y$c,y$e,y$Z){if(y$_){var y$X,y$u,y$P,y$O=0,y$s=0,y$n=0;if(y$_)for(y$O=0,y$s=y$_.deformSlotDataList.length;y$O<y$s;y$O++)for(y$X=y$_.deformSlotDataList[y$O],y$n=0;y$n<y$X.deformSlotDisplayList.length;y$n++)y$P=y$e[(y$u=y$X.deformSlotDisplayList[y$n]).slotIndex],y$u.apply(y$Z,y$P),y$c[y$u.slotIndex]||(y$c[y$u.slotIndex]={}),y$c[y$u.slotIndex][y$u.attachment]=y$u.deformData}},y$_.getAnimNum=function(){return this._templet.getAnimationCount()},y$_.getAniNameByIndex=function(y$_){return this._templet.getAniNameByIndex(y$_)},y$_.getSlotByName=function(y$_){return this._boneSlotDic[y$_]},y$_.showSkinByName=function(y$_,y$c){void 0===y$c&&(y$c=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(y$_),y$c)},y$_.showSkinByIndex=function(y$_,y$c){void 0===y$c&&(y$c=!0);for(var y$e=0;y$e<this._boneSlotArray.length;y$e++)this._boneSlotArray[y$e].showSlotData(null,y$c);if(this._templet.showSkinByIndex(this._boneSlotDic,y$_,y$c)){var y$Z=this._templet.skinDataArray[y$_];this._skinIndex=y$_,this._skinName=y$Z.name}this._clearCache()},y$_.showSlotSkinByIndex=function(y$_,y$c){if(0!=this._aniMode){var y$e=this.getSlotByName(y$_);y$e&&y$e.showDisplayByIndex(y$c),this._clearCache()}},y$_.showSlotSkinByName=function(y$_,y$c){if(0!=this._aniMode){var y$e=this.getSlotByName(y$_);y$e&&y$e.showDisplayByName(y$c),this._clearCache()}},y$_.replaceSlotSkinName=function(y$_,y$c,y$e){if(0!=this._aniMode){var y$Z=this.getSlotByName(y$_);y$Z&&y$Z.replaceDisplayByName(y$c,y$e),this._clearCache()}},y$_.replaceSlotSkinByIndex=function(y$_,y$c,y$e){if(0!=this._aniMode){var y$Z=this.getSlotByName(y$_);y$Z&&y$Z.replaceDisplayByIndex(y$c,y$e),this._clearCache()}},y$_.setSlotSkin=function(y$_,y$c){if(0!=this._aniMode){var y$e=this.getSlotByName(y$_);y$e&&y$e.replaceSkin(y$c),this._clearCache()}},y$_._clearCache=function(){if(1==this._aniMode)for(var y$_=0,y$c=this._graphicsCache.length;y$_<y$c;y$_++){for(var y$e=0,y$Z=this._graphicsCache[y$_].length;y$e<y$Z;y$e++){var y$X=this._graphicsCache[y$_][y$e];y$X!=this.graphics&&y$R.recycle(y$X)}this._graphicsCache[y$_].length=0}},y$_.play=function(y$_,y$c,y$e,y$Z,y$X,y$u){void 0===y$e&&(y$e=!0),void 0===y$Z&&(y$Z=0),void 0===y$X&&(y$X=0),void 0===y$u&&(y$u=!0),this._indexControl=!1;var y$P=-1,y$O=NaN;if(y$O=y$c?2147483647:0,"string"==typeof y$_)for(var y$s=0,y$n=this._templet.getAnimationCount();y$s<y$n;y$s++){var y$m=this._templet.getAnimation(y$s);if(y$m&&y$_==y$m.name){y$P=y$s;break}}else y$P=y$_;-1<y$P&&y$P<this.getAnimNum()&&(this._aniClipIndex=y$P,(y$e||this._pause||this._currAniIndex!=y$P)&&(this._currAniIndex=y$P,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(y$P)),this._drawOrder=null,this._eventIndex=0,this._player.play(y$P,this._player.playbackRate,y$O,y$Z,y$X),y$u&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=y$H.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},y$_.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},y$_.playbackRate=function(y$_){this._player&&(this._player.playbackRate=y$_)},y$_.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},y$_.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=y$H.now(),this.timer.frameLoop(1,this,this._update,null,!0))},y$_._getGrahicsDataWithCache=function(y$_,y$c){return this._graphicsCache[y$_][y$c]},y$_._setGrahicsDataWithCache=function(y$_,y$c,y$e){this._graphicsCache[y$_][y$c]=y$e},y$_.destroy=function(y$_){void 0===y$_&&(y$_=!0),y$c.prototype.destroy.call(this,y$_),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},y$u(0,y$_,"url",function(){return this._aniPath},function(y$_){this.load(y$_)}),y$u(0,y$_,"index",function(){return this._index},function(y$_){this.player&&(this._index=y$_,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),y$u(0,y$_,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),y$u(0,y$_,"templet",function(){return this._templet}),y$u(0,y$_,"player",function(){return this._player}),y$e.useSimpleMeshInCanvas=!1,y$e}(y$u_),y$r=function(y$c){function y$X(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,y$X.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}y$Z(y$X,"laya.ani.bone.Templet",y$c);var y$_=y$X.prototype;return y$_.getLoadList=function(){return this._loadList},y$_.loadAni=function(y$_){this._skBufferUrl=y$_,y$X_.loader.load(y$_,y$s.create(this,this.onComplete),null,"arraybuffer")},y$_.onComplete=function(y$_){if(this._isDestroyed)this.destroy();else{var y$c=y$n.getRes(this._skBufferUrl);y$c?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,y$c)):this.event("error","load failed:"+this._skBufferUrl)}},y$_.parseData=function(y$_,y$c,y$e){void 0===y$e&&(y$e=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=y$_,this._mainTexture&&y$a.isWebGL&&y$_.bitmap&&(y$_.bitmap.enableMerageInAtlas=!1),this._rate=y$e,this.parse(y$c)},y$_.buildArmature=function(y$_){return void 0===y$_&&(y$_=0),new y$v(this,y$_)},y$_.parse=function(y$_){y$c.prototype.parse.call(this,y$_),this._endLoaded(),this._aniVersion!=y$X.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+y$X.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},y$_._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var y$_=0;this._loadList=[];var y$c,y$e=new y$y_(this.getPublicExtData()),y$Z=0,y$X=0,y$u=0,y$P=y$e.getInt32(),y$O=y$e.readUTFString(),y$s=y$O.split("\n");for(y$_=0;y$_<y$P;y$_++)y$c=this._path+y$s[2*y$_],y$O=y$s[2*y$_+1],y$e.getFloat32(),y$e.getFloat32(),y$Z=y$e.getFloat32(),y$X=y$e.getFloat32(),y$u=y$e.getFloat32(),isNaN(y$u)?0:y$u,y$u=y$e.getFloat32(),isNaN(y$u)?0:y$u,y$u=y$e.getFloat32(),isNaN(y$u)?y$Z:y$u,y$u=y$e.getFloat32(),isNaN(y$u)?y$X:y$u,-1==this._loadList.indexOf(y$c)&&this._loadList.push(y$c);this.event("inited",this)}},y$_._textureComplete=function(){for(var y$_,y$c,y$e=0,y$Z=this._loadList.length;y$e<y$Z;y$e++)y$c=this._loadList[y$e],y$_=this._textureDic[y$c]=y$n.getRes(y$c),y$a.isWebGL&&y$_&&y$_.bitmap&&(y$_.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},y$_._parsePublicExtData=function(){var y$_=0,y$c=0,y$e=0,y$Z=0,y$X=0;for(y$_=0,y$X=this.getAnimationCount();y$_<y$X;y$_++)this._graphicsCache.push([]);var y$u;y$u="Dragon"!=this._aniClassName;var y$P,y$O,y$s=new y$y_(this.getPublicExtData()),y$n=0,y$m=0,y$H=0,y$B=0,y$D=0,y$U=0,y$k=0,y$a=0,y$G=0,y$w=y$s.getInt32(),y$z=y$s.readUTFString(),y$L=y$z.split("\n");for(y$_=0;y$_<y$w;y$_++){if(y$P=this._mainTexture,y$O=this._path+y$L[2*y$_],y$z=y$L[2*y$_+1],null==this._mainTexture&&(y$P=this._textureDic[y$O]),!y$P)return this.event("error",this),void(this.isParseFail=!0);y$n=y$s.getFloat32(),y$m=y$s.getFloat32(),y$H=y$s.getFloat32(),y$B=y$s.getFloat32(),y$G=y$s.getFloat32(),y$D=isNaN(y$G)?0:y$G,y$G=y$s.getFloat32(),y$U=isNaN(y$G)?0:y$G,y$G=y$s.getFloat32(),y$k=isNaN(y$G)?y$H:y$G,y$G=y$s.getFloat32(),y$a=isNaN(y$G)?y$B:y$G,this.subTextureDic[y$z]=y$T_.create(y$P,y$n,y$m,y$H,y$B,-y$D,-y$U,y$k,y$a),y$P.alphaTexture&&(this.subTextureDic[y$z].alphaTexture=y$T_.create(y$P.alphaTexture,y$n,y$m,y$H,y$B,-y$D,-y$U,y$k,y$a))}this._mainTexture=y$P;var y$q,y$K,y$M,y$f,y$A,y$v=y$s.getUint16();for(y$_=0;y$_<y$v;y$_++)(y$q=[]).push(y$s.getUint16()),y$q.push(y$s.getUint16()),y$q.push(y$s.getUint16()),y$q.push(y$s.getUint16()),this.aniSectionDic[y$_]=y$q;var y$r,y$C=y$s.getInt16(),y$y={};for(y$_=0;y$_<y$C;y$_++)y$K=new y$h_,0==y$_?y$r=y$K:y$K.root=y$r,y$K.d=y$u?-1:1,y$f=y$s.readUTFString(),y$A=y$s.readUTFString(),y$K.length=y$s.getFloat32(),1==y$s.getByte()&&(y$K.inheritRotation=!1),1==y$s.getByte()&&(y$K.inheritScale=!1),y$K.name=y$f,y$A&&((y$M=y$y[y$A])?y$M.addChild(y$K):this.mRootBone=y$K),y$y[y$f]=y$K,this.mBoneArr.push(y$K);this.tMatrixDataLen=y$s.getUint16();var y$$,y$T,y$h=y$s.getUint16(),y$R=Math.floor(y$h/this.tMatrixDataLen),y$i=this.srcBoneMatrixArr;for(y$_=0;y$_<y$R;y$_++)(y$$=new y$N_).scX=y$s.getFloat32(),y$$.skX=y$s.getFloat32(),y$$.skY=y$s.getFloat32(),y$$.scY=y$s.getFloat32(),y$$.x=y$s.getFloat32(),y$$.y=y$s.getFloat32(),8===this.tMatrixDataLen&&(y$$.skewX=y$s.getFloat32(),y$$.skewY=y$s.getFloat32()),y$i.push(y$$),(y$K=this.mBoneArr[y$_]).transform=y$$;var y$x,y$F=y$s.getUint16(),y$Y=0;for(y$_=0;y$_<y$F;y$_++){for(y$T=new y$o_,y$Y=y$s.getUint16(),y$c=0;y$c<y$Y;y$c++)y$T.boneNames.push(y$s.readUTFString()),y$T.boneIndexs.push(y$s.getInt16());y$T.name=y$s.readUTFString(),y$T.targetBoneName=y$s.readUTFString(),y$T.targetBoneIndex=y$s.getInt16(),y$T.bendDirection=y$s.getFloat32(),y$T.mix=y$s.getFloat32(),y$T.isSpine=y$u,this.ikArr.push(y$T)}var y$p,y$o=y$s.getUint16(),y$Q=0;for(y$_=0;y$_<y$o;y$_++){for(y$x=new y$b_,y$Q=y$s.getUint16(),y$c=0;y$c<y$Q;y$c++)y$x.boneIndexs.push(y$s.getInt16());y$x.name=y$s.getUTFString(),y$x.targetIndex=y$s.getInt16(),y$x.rotateMix=y$s.getFloat32(),y$x.translateMix=y$s.getFloat32(),y$x.scaleMix=y$s.getFloat32(),y$x.shearMix=y$s.getFloat32(),y$x.offsetRotation=y$s.getFloat32(),y$x.offsetX=y$s.getFloat32(),y$x.offsetY=y$s.getFloat32(),y$x.offsetScaleX=y$s.getFloat32(),y$x.offsetScaleY=y$s.getFloat32(),y$x.offsetShearY=y$s.getFloat32(),this.tfArr.push(y$x)}var y$J=y$s.getUint16(),y$j=0;for(y$_=0;y$_<y$J;y$_++){for((y$p=new y$Q_).name=y$s.readUTFString(),y$j=y$s.getUint16(),y$c=0;y$c<y$j;y$c++)y$p.bones.push(y$s.getInt16());y$p.target=y$s.readUTFString(),y$p.positionMode=y$s.readUTFString(),y$p.spacingMode=y$s.readUTFString(),y$p.rotateMode=y$s.readUTFString(),y$p.offsetRotation=y$s.getFloat32(),y$p.position=y$s.getFloat32(),y$p.spacing=y$s.getFloat32(),y$p.rotateMix=y$s.getFloat32(),y$p.translateMix=y$s.getFloat32(),this.pathArr.push(y$p)}var y$t,y$b,y$N,y$V,y$g,y$S=0,y$E=0,y$W=0,y$l=NaN,y$d=0,y$I=y$s.getInt16();for(y$_=0;y$_<y$I;y$_++){var y$__=y$s.getUint8(),y$c_={};this.deformAniArr.push(y$c_);for(var y$e_=0;y$e_<y$__;y$e_++)for((y$t=new y$i_).skinName=y$s.getUTFString(),y$c_[y$t.skinName]=y$t,y$S=y$s.getInt16(),y$c=0;y$c<y$S;y$c++)for(y$b=new y$x_,y$t.deformSlotDataList.push(y$b),y$E=y$s.getInt16(),y$e=0;y$e<y$E;y$e++)for(y$N=new y$F_,y$b.deformSlotDisplayList.push(y$N),y$N.slotIndex=y$s.getInt16(),y$N.attachment=y$s.getUTFString(),y$W=y$s.getInt16(),y$Z=0;y$Z<y$W;y$Z++)for(1==y$s.getByte()?y$N.tweenKeyList.push(!0):y$N.tweenKeyList.push(!1),y$l=y$s.getFloat32(),y$N.timeList.push(y$l),y$V=[],y$N.vectices.push(y$V),y$d=y$s.getInt16(),y$X=0;y$X<y$d;y$X++)y$V.push(y$s.getFloat32())}var y$Z_,y$X_,y$u_=y$s.getInt16(),y$P_=0,y$O_=0;for(y$_=0;y$_<y$u_;y$_++){for(y$P_=y$s.getInt16(),y$g=[],y$c=0;y$c<y$P_;y$c++){for((y$Z_=new y$Y_).time=y$s.getFloat32(),y$O_=y$s.getInt16(),y$e=0;y$e<y$O_;y$e++)y$Z_.drawOrder.push(y$s.getInt16());y$g.push(y$Z_)}this.drawOrderAniArr.push(y$g)}var y$s_,y$n_=y$s.getInt16(),y$m_=0;for(y$_=0;y$_<y$n_;y$_++){for(y$m_=y$s.getInt16(),y$X_=[],y$c=0;y$c<y$m_;y$c++)(y$s_=new y$p_).name=y$s.getUTFString(),y$s_.intValue=y$s.getInt32(),y$s_.floatValue=y$s.getFloat32(),y$s_.stringValue=y$s.getUTFString(),y$s_.time=y$s.getFloat32(),y$X_.push(y$s_);this.eventAniArr.push(y$X_)}var y$H_=y$s.getInt16();if(0<y$H_)for(this.attachmentNames=[],y$_=0;y$_<y$H_;y$_++)this.attachmentNames.push(y$s.getUTFString());var y$B_,y$D_,y$U_=y$s.getInt16();for(y$_=0;y$_<y$U_;y$_++)(y$B_=new y$R_).name=y$s.readUTFString(),y$B_.parent=y$s.readUTFString(),y$B_.attachmentName=y$s.readUTFString(),y$B_.srcDisplayIndex=y$B_.displayIndex=y$s.getInt16(),(y$B_.templet=this).boneSlotDic[y$B_.name]=y$B_,null==(y$D_=this.bindBoneBoneSlotDic[y$B_.parent])&&(this.bindBoneBoneSlotDic[y$B_.parent]=y$D_=[]),y$D_.push(y$B_),this.boneSlotArray.push(y$B_);var y$k_,y$a_,y$G_,y$w_=y$s.readUTFString().split("\n"),y$z_=0,y$L_=y$s.getUint8(),y$q_=0,y$K_=0,y$M_=0,y$f_=0,y$A_=0,y$v_=0,y$r_=0;for(y$_=0;y$_<y$L_;y$_++){for((y$k_=new y$J_).name=y$w_[y$z_++],y$q_=y$s.getUint8(),y$c=0;y$c<y$q_;y$c++){for((y$a_=new y$t_).name=y$w_[y$z_++],y$B_=this.boneSlotDic[y$a_.name],y$K_=y$s.getUint8(),y$e=0;y$e<y$K_;y$e++){if(y$G_=new y$j_,this.skinSlotDisplayDataArr.push(y$G_),y$G_.name=y$w_[y$z_++],y$G_.attachmentName=y$w_[y$z_++],y$G_.transform=new y$N_,y$G_.transform.scX=y$s.getFloat32(),y$G_.transform.skX=y$s.getFloat32(),y$G_.transform.skY=y$s.getFloat32(),y$G_.transform.scY=y$s.getFloat32(),y$G_.transform.x=y$s.getFloat32(),y$G_.transform.y=y$s.getFloat32(),y$a_.displayArr.push(y$G_),y$G_.width=y$s.getFloat32(),y$G_.height=y$s.getFloat32(),y$G_.type=y$s.getUint8(),y$G_.verLen=y$s.getUint16(),0<(y$C=y$s.getUint16()))for(y$G_.bones=[],y$Z=0;y$Z<y$C;y$Z++){var y$C_=y$s.getUint16();y$G_.bones.push(y$C_)}if(0<(y$M_=y$s.getUint16()))for(y$G_.uvs=[],y$Z=0;y$Z<y$M_;y$Z++)y$G_.uvs.push(y$s.getFloat32());if(0<(y$f_=y$s.getUint16()))for(y$G_.weights=[],y$Z=0;y$Z<y$f_;y$Z++)y$G_.weights.push(y$s.getFloat32());if(0<(y$A_=y$s.getUint16()))for(y$G_.triangles=[],y$Z=0;y$Z<y$A_;y$Z++)y$G_.triangles.push(y$s.getUint16());if(0<(y$v_=y$s.getUint16()))for(y$G_.vertices=[],y$Z=0;y$Z<y$v_;y$Z++)y$G_.vertices.push(y$s.getFloat32());if(0<(y$r_=y$s.getUint16()))for(y$G_.lengths=[],y$Z=0;y$Z<y$r_;y$Z++)y$G_.lengths.push(y$s.getFloat32())}y$k_.slotArr.push(y$a_)}this.skinDic[y$k_.name]=y$k_,this.skinDataArray.push(y$k_)}1==y$s.getUint8()?(this.yReverseMatrix=new y$$_(1,0,0,-1,0,0),y$r&&y$r.setTempMatrix(this.yReverseMatrix)):y$r&&y$r.setTempMatrix(new y$$_),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},y$_.getTexture=function(y$_){var y$c=this.subTextureDic[y$_];return y$c||(y$c=this.subTextureDic[y$_.substr(0,y$_.length-1)]),null==y$c?this._mainTexture:y$c},y$_.showSkinByIndex=function(y$_,y$c,y$e){if(void 0===y$e&&(y$e=!0),y$c<0&&y$c>=this.skinDataArray.length)return!1;var y$Z,y$X,y$u=0,y$P=0,y$O=this.skinDataArray[y$c];if(y$O){for(y$u=0,y$P=y$O.slotArr.length;y$u<y$P;y$u++)(y$X=y$O.slotArr[y$u])&&(y$Z=y$_[y$X.name])&&(y$Z.showSlotData(y$X,y$e),y$e&&"undefined"!=y$Z.attachmentName&&"null"!=y$Z.attachmentName?y$Z.showDisplayByName(y$Z.attachmentName):y$Z.showDisplayByIndex(y$Z.displayIndex));return!0}return!1},y$_.getSkinIndexByName=function(y$_){for(var y$c=0,y$e=this.skinDataArray.length;y$c<y$e;y$c++)if(this.skinDataArray[y$c].name==y$_)return y$c;return-1},y$_.getGrahicsDataWithCache=function(y$_,y$c){return this._graphicsCache[y$_][y$c]},y$_.setGrahicsDataWithCache=function(y$_,y$c,y$e){this._graphicsCache[y$_][y$c]=y$e},y$_.destroy=function(){var y$_;for(var y$c in this._isDestroyed=!0,this.subTextureDic)(y$_=this.subTextureDic[y$c])&&y$_.destroy();for(y$c in this._textureDic)(y$_=this._textureDic[y$c])&&y$_.destroy();for(var y$e=0,y$Z=this.skinSlotDisplayDataArr.length;y$e<y$Z;y$e++)this.skinSlotDisplayDataArr[y$e].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete y$X.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},y$_.getAniNameByIndex=function(y$_){var y$c=this.getAnimation(y$_);return y$c?y$c.name:null},y$u(0,y$_,"rate",function(){return this._rate},function(y$_){this._rate=y$_}),y$X.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",y$X.TEMPLET_DICTIONARY=null,y$X}(y$i)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(y$_,y$c){"use strict";for(var y$e in Object.defineProperty(y$c,"__esModule",{value:!0}),Laya){var y$Z=Laya[y$e];y$Z&&y$Z.__isclass&&(y$c[y$e]=y$Z)}});