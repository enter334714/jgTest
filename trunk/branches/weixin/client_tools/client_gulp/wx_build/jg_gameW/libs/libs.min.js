var Laya=window.Laya=function(w_$P,w_$B){var w_$G={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(w_$B,w_$h){return 1==arguments.length?w_$G.__presubstr.call(this,w_$B):w_$G.__presubstr.call(this,w_$B,0<w_$h?w_$h:this.length+w_$h)},__init:function(w_$B){w_$B.forEach(function(w_$B){w_$B.__init$&&w_$B.__init$()})},__isClass:function(w_$B){return w_$B&&(w_$B.__isclass||w_$B==Object||w_$B==String||w_$B==Array)},__newvec:function(w_$B,w_$h){var w_$l=[];w_$l.length=w_$B;for(var w_$A=0;w_$A<w_$B;w_$A++)w_$l[w_$A]=w_$h;return w_$l},__extend:function(w_$B,w_$h){for(var w_$l in w_$h)if(w_$h.hasOwnProperty(w_$l)){var w_$A=Object.getOwnPropertyDescriptor(w_$h,w_$l),w_$n=w_$A.get,w_$s=w_$A.set;w_$n||w_$s?w_$n&&w_$s?Object.defineProperty(w_$B,w_$l,w_$A):(w_$n&&Object.defineProperty(w_$B,w_$l,w_$n),w_$s&&Object.defineProperty(w_$B,w_$l,w_$s)):w_$B[w_$l]=w_$h[w_$l]}function w_$X(){w_$G.un(this,"constructor",w_$B)}w_$X.prototype=w_$h.prototype,w_$B.prototype=new w_$X,w_$G.un(w_$B.prototype,"__imps",w_$G.__copy({},w_$h.prototype.__imps))},__copy:function(w_$B,w_$h){if(!w_$h)return null;for(var w_$l in w_$B=w_$B||{},w_$h)w_$B[w_$l]=w_$h[w_$l];return w_$B},__package:function(w_$B,w_$h){if(!w_$G.__packages[w_$B]){w_$G.__packages[w_$B]=!0;var w_$l=w_$P,w_$A=w_$B.split(".");if(1<w_$A.length)for(var w_$n=0,w_$s=w_$A.length-1;w_$n<w_$s;w_$n++){var w_$X=w_$l[w_$A[w_$n]];w_$l=w_$X||(w_$l[w_$A[w_$n]]={})}w_$l[w_$A[w_$A.length-1]]||(w_$l[w_$A[w_$A.length-1]]=w_$h||{})}},__hasOwnProperty:function(w_$B,w_$h){return w_$h=w_$h||this,Object.hasOwnProperty.call(w_$h,w_$B)||function w_$B(w_$h,w_$l){if(Object.hasOwnProperty.call(w_$l.prototype,w_$h))return!0;var w_$A=w_$l.prototype.__super;return null==w_$A?null:w_$B(w_$h,w_$A)}(w_$B,w_$h.__class)},__typeof:function(w_$B,w_$h){if(!w_$B||!w_$h)return!1;if(w_$h===String)return"string"==typeof w_$B;if(w_$h===Number)return"number"==typeof w_$B;if(w_$h.__interface__)w_$h=w_$h.__interface__;else if("string"!=typeof w_$h)return w_$B instanceof w_$h;return w_$B.__imps&&w_$B.__imps[w_$h]||w_$B.__class==w_$h},__as:function(w_$B,w_$h){return this.__typeof(w_$B,w_$h)?w_$B:null},__int:function(w_$B){return w_$B?parseInt(w_$B):0},interface:function(w_$B,w_$h){w_$G.__package(w_$B,{});var w_$l=w_$G.__internals,w_$A=w_$l[w_$B]=w_$l[w_$B]||{self:w_$B};if(w_$h){var w_$n=w_$h.split(",");w_$A.extend=[];for(var w_$s=0;w_$s<w_$n.length;w_$s++){var w_$X=w_$n[w_$s];w_$l[w_$X]=w_$l[w_$X]||{self:w_$X},w_$A.extend.push(w_$l[w_$X])}}var w_$Z=w_$P,w_$t=w_$B.split(".");for(w_$s=0;w_$s<w_$t.length-1;w_$s++)w_$Z=w_$Z[w_$t[w_$s]];w_$Z[w_$t[w_$t.length-1]]={__interface__:w_$B}},class:function(w_$B,w_$h,w_$l,w_$A){if(w_$l&&w_$G.__extend(w_$B,w_$l),w_$h)if(w_$G.__package(w_$h,w_$B),w_$G.__classmap[w_$h]=w_$B,0<w_$h.indexOf(".")){if(0==w_$h.indexOf("laya.")){var w_$n=w_$h.split(".");w_$A=w_$A||w_$n[w_$n.length-1],w_$G[w_$A]&&console.log("Warning!,this class["+w_$A+"] already exist:",w_$G[w_$A]),w_$G[w_$A]=w_$B}}else"Main"==w_$h?w_$P.Main=w_$B:"MainWX"==w_$h?w_$P.MainWX=w_$B:(w_$G[w_$h]&&console.log("Error!,this class["+w_$h+"] already exist:",w_$G[w_$h]),w_$G[w_$h]=w_$B);var w_$s=w_$G.un,w_$X=w_$B.prototype;w_$s(w_$X,"hasOwnProperty",w_$G.__hasOwnProperty),w_$s(w_$X,"__class",w_$B),w_$s(w_$X,"__super",w_$l),w_$s(w_$X,"__className",w_$h),w_$s(w_$B,"__super",w_$l),w_$s(w_$B,"__className",w_$h),w_$s(w_$B,"__isclass",!0),w_$s(w_$B,"super",function(w_$B){this.__super.call(w_$B)})},imps:function(w_$B,w_$h){if(!w_$h)return null;var w_$n=w_$B.__imps||w_$G.un(w_$B,"__imps",{});function w_$s(w_$B){var w_$h,w_$l;if((w_$h=w_$G.__internals[w_$B])&&(w_$n[w_$B]=!0,w_$l=w_$h.extend))for(var w_$A=0;w_$A<w_$l.length;w_$A++)w_$s(w_$l[w_$A].self)}for(var w_$l in w_$h)w_$s(w_$l)},superSet:function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.prototype["_$set_"+w_$l];w_$n&&w_$n.call(w_$h,w_$A)},superGet:function(w_$B,w_$h,w_$l){var w_$A=w_$B.prototype["_$get_"+w_$l];return w_$A?w_$A.call(w_$h):null},getset:function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$B?(w_$A&&(w_$h["_$GET_"+w_$l]=w_$A),w_$n&&(w_$h["_$SET_"+w_$l]=w_$n)):(w_$A&&w_$G.un(w_$h,"_$get_"+w_$l,w_$A),w_$n&&w_$G.un(w_$h,"_$set_"+w_$l,w_$n)),w_$A&&w_$n?Object.defineProperty(w_$h,w_$l,{get:w_$A,set:w_$n,enumerable:!1,configurable:!0}):(w_$A&&Object.defineProperty(w_$h,w_$l,{get:w_$A,enumerable:!1,configurable:!0}),w_$n&&Object.defineProperty(w_$h,w_$l,{set:w_$n,enumerable:!1,configurable:!0}))},static:function(w_$l,w_$A){for(var w_$n=0,w_$B=w_$A.length;w_$n<w_$B;w_$n+=2)if("length"==w_$A[w_$n])w_$l.length=w_$A[w_$n+1].call(w_$l);else{function w_$h(){var w_$h=w_$A[w_$n],w_$B=w_$A[w_$n+1];Object.defineProperty(w_$l,w_$h,{get:function(){return delete this[w_$h],this[w_$h]=w_$B.call(this)},set:function(w_$B){delete this[w_$h],this[w_$h]=w_$B},enumerable:!0,configurable:!0})}w_$h()}},un:function(w_$B,w_$h,w_$l){return w_$l||(w_$l=w_$B[w_$h]),w_$G.__propun.value=w_$l,Object.defineProperty(w_$B,w_$h,w_$G.__propun),w_$l},uns:function(w_$h,w_$B){w_$B.forEach(function(w_$B){w_$G.un(w_$h,w_$B)})}};return w_$P.console=w_$P.console||{log:function(){}},w_$P.trace=w_$P.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),w_$G}(window,document);!function(w_$B,w_$h,w_$l){w_$l.un,w_$l.uns,w_$l.static,w_$l.class,w_$l.getset,w_$l.__newvec}(window,document,Laya),function(w_$X,w_$h,w_$v){w_$v.un,w_$v.uns;var w_$t=w_$v.static,w_$G=w_$v.class,w_$i=w_$v.getset;w_$v.__newvec;w_$v.interface("laya.runtime.IMarket"),w_$v.interface("laya.filters.IFilter"),w_$v.interface("laya.display.ILayout"),w_$v.interface("laya.resource.IDispose"),w_$v.interface("laya.runtime.IPlatform"),w_$v.interface("laya.resource.IDestroy"),w_$v.interface("laya.runtime.IConchNode"),w_$v.interface("laya.filters.IFilterAction"),w_$v.interface("laya.runtime.ICPlatformClass"),w_$v.interface("laya.resource.ICreateResource"),w_$v.interface("laya.runtime.IConchRenderObject"),w_$v.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var w_$S=function(){function w_$s(){}return w_$G(w_$s,"laya.utils.RunDriver"),w_$s.FILTER_ACTIONS=[],w_$s.pixelRatio=-1,w_$s._charSizeTestDiv=null,w_$s.now=function(){return Date.now()},w_$s.getWindow=function(){return w_$X},w_$s.getPixelRatio=function(){if(w_$s.pixelRatio<0){var w_$B=w_$d.context,w_$h=w_$B.backingStorePixelRatio||w_$B.webkitBackingStorePixelRatio||w_$B.mozBackingStorePixelRatio||w_$B.msBackingStorePixelRatio||w_$B.oBackingStorePixelRatio||w_$B.backingStorePixelRatio||1;(w_$s.pixelRatio=(w_$d.window.devicePixelRatio||1)/w_$h)<1&&(w_$s.pixelRatio=1)}return w_$s.pixelRatio},w_$s.getIncludeStr=function(w_$B){return null},w_$s.createShaderCondition=function(w_$B){var w_$h="(function() {return "+w_$B+";})";return w_$v._runScript(w_$h)},w_$s.fontMap=[],w_$s.measureText=function(w_$B,w_$h){var w_$l=w_$s.hanzi.test(w_$B);if(w_$l&&w_$s.fontMap[w_$h])return w_$s.fontMap[w_$h];var w_$A=w_$d.context;w_$A.font=w_$h;var w_$n=w_$A.measureText(w_$B);return w_$n||(w_$n={width:16,height:16}),w_$l&&(w_$s.fontMap[w_$h]=w_$n),w_$n},w_$s.getWebGLContext=function(w_$B){},w_$s.beginFlush=function(){},w_$s.endFinish=function(){},w_$s.addToAtlas=null,w_$s.flashFlushImage=function(w_$B){},w_$s.drawToCanvas=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$yB.create("2D"),w_$Z=new w_$E(w_$l,w_$A,w_$X);return w_$j.renders[w_$h]._fun(w_$B,w_$Z,w_$n,w_$s),w_$X},w_$s.createParticleTemplate2D=null,w_$s.createGLTextur=null,w_$s.createWebGLContext2D=null,w_$s.changeWebGLSize=function(w_$B,w_$h){},w_$s.createRenderSprite=function(w_$B,w_$h){return new w_$j(w_$B,w_$h)},w_$s.createFilterAction=function(w_$B){return new w_$y},w_$s.createGraphics=function(){return new w_$b},w_$s.clear=function(w_$B){w_$M._context.ctx.clear()},w_$s.cancelLoadByUrl=function(w_$B){},w_$s.clearAtlas=function(w_$B){},w_$s.isAtlas=function(w_$B){return!1},w_$s.addTextureToAtlas=function(w_$B){},w_$s.getTexturePixels=function(w_$B,w_$h,w_$l,w_$A,w_$n){return null},w_$s.skinAniSprite=function(){return null},w_$s.update3DLoop=function(){},w_$t(w_$s,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),w_$s}(),w_$A=(w_$i(1,w_$v,"alertGlobalError",null,function(w_$B){var w_$s=0;w_$d.window.onerror=w_$B?function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$s++<5&&w_$n&&alert(w_$n.stack||w_$n)}:null}),w_$v.init=function(w_$B,w_$h,w_$l){for(var w_$A=[],w_$n=2,w_$s=arguments.length;w_$n<w_$s;w_$n++)w_$A.push(arguments[w_$n]);if(!w_$v._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=w_$v._arrayBufferSlice),w_$v._isinit=!0,w_$d.__init__(),w_$g.__init__(),w_$b.__init__(),w_$v.timer=new w_$I,w_$v.scaleTimer=new w_$I,w_$v.loader=new w_$tB,w_$D.__init__(),w_$n=0;for(var w_$X=w_$A.length;w_$n<w_$X;w_$n++)w_$A[w_$n].enable&&w_$A[w_$n].enable();return w_$Q.__init__(),w_$Z.__init__(),w_$_.__init__(),w_$O.beginCheck(),w_$v._currentStage=w_$v.stage=new w_$JB,w_$v.stage.conchModel&&w_$v.stage.conchModel.setRootNode(),w_$v._getUrlPath(),w_$v.render=new w_$M(0,0),w_$v.stage.size(w_$B,w_$h),w_$j.__init__(),w_$T.__init__(),w_$$.instance.__init__(w_$v.stage,w_$M.canvas),w_$oB.__init__(),w_$a.autoStopMusic=!0,w_$w.__init__(),w_$M.canvas}},w_$v._getUrlPath=function(){var w_$B=w_$d.window.location,w_$h=w_$B.pathname;w_$h=w_$h&&":"==w_$h.charAt(2)?w_$h.substring(1):w_$h,w_$W.rootPath=w_$W.basePath=w_$W.getPath("file:"==w_$B.protocol?w_$h:w_$B.protocol+"//"+w_$B.host+w_$B.pathname)},w_$v._arrayBufferSlice=function(w_$B,w_$h){var w_$l=new Uint8Array(this,w_$B,w_$h-w_$B),w_$A=new Uint8Array(w_$l.length);return w_$A.set(w_$l),w_$A.buffer},w_$v._runScript=function(w_$B){return w_$d.window[w_$v._evcode](w_$B)},w_$v.stage=null,w_$v.timer=null,w_$v.scaleTimer=null,w_$v.loader=null,w_$v.version="1.8.6",w_$v.render=null,w_$v._currentStage=null,w_$v._isinit=!1,w_$v.isDebug=!1,w_$v.MiniAdpter={init:function(){w_$X.navigator&&w_$X.navigator.userAgent&&-1<w_$X.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},w_$t(w_$v,["conchMarket",function(){return this.conchMarket=w_$X.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=w_$X.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function w_$B(){}return w_$G(w_$B,"Config"),w_$B.WebGLTextCacheCount=500,w_$B.atlasEnable=!1,w_$B.showCanvasMark=!1,w_$B.animationInterval=50,w_$B.isAntialias=!1,w_$B.isAlpha=!1,w_$B.premultipliedAlpha=!0,w_$B.isStencil=!0,w_$B.preserveDrawingBuffer=!1,w_$B}()),w_$P=function(){function w_$P(){this._events=null}w_$G(w_$P,"laya.events.EventDispatcher");var w_$B=w_$P.prototype;return w_$B.hasListener=function(w_$B){return!!(this._events&&this._events[w_$B])},w_$B.getListener=function(w_$B){return this._events?this._events[w_$B]:null},w_$B.event=function(w_$B,w_$h){if(!this._events||!this._events[w_$B])return!1;var w_$l=this._events[w_$B];if(w_$l.lock)w_$l.queue||(w_$l.queue=[]),w_$l.queue.push(w_$h);else{var w_$A;for(w_$l.lock=!0,w_$l.cursor=w_$l.head;w_$l.cursor;)(w_$A=w_$l.cursor).recover?(w_$l.head=w_$l.tail=w_$l.cursor=null,console.error("node is recover："+w_$A.id)):(w_$l.cursor=w_$A.next,w_$A.once&&w_$P.delNode(w_$l,w_$A),w_$A.method&&(null!=w_$h?w_$A.args?w_$A.method.apply(w_$A.caller,w_$A.args.concat(w_$h)):w_$h instanceof Array?w_$A.method.apply(w_$A.caller,w_$h):w_$A.caller?w_$A.method.call(w_$A.caller,w_$h):w_$v.recordError("事件派发错误","node.caller:"+w_$A.caller+"node.method:"+w_$A.method+"data:"+w_$h+"node.prev"+w_$A.prev):w_$A.method.apply(w_$A.caller,w_$A.args)),w_$A.once&&w_$P.recoverHandler(w_$A));w_$l.lock=!1,!w_$l.head&&this._events&&this._events[w_$B]==w_$l&&delete this._events[w_$B],w_$l.queue&&w_$l.queue.length&&this.event(w_$B,w_$l.queue.shift())}return!0},w_$B.on=function(w_$B,w_$h,w_$l,w_$A){return this._createListener(w_$B,w_$h,w_$l,w_$A,!1)},w_$B.once=function(w_$B,w_$h,w_$l,w_$A){return this._createListener(w_$B,w_$h,w_$l,w_$A,!0)},w_$B._createListener=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$s&&(w_$s=!0),w_$s&&this.off(w_$B,w_$h,w_$l,w_$n);var w_$X=w_$P.createHandler(w_$h||this,w_$l,w_$A,w_$n);this._events||(this._events={});var w_$Z=this._events,w_$t=w_$Z[w_$B];return w_$t?w_$t.tail?(w_$X.prev=w_$t.tail,w_$t.tail.next=w_$X,w_$t.tail=w_$X):w_$t.head=w_$t.tail=w_$X:w_$Z[w_$B]={head:w_$X,tail:w_$X,cursor:null,lock:!1},this},w_$B.off=function(w_$B,w_$h,w_$l,w_$A){if(void 0===w_$A&&(w_$A=!1),!this._events||!this._events[w_$B])return this;for(var w_$n=this._events[w_$B],w_$s=w_$n.head;w_$s;){if((!w_$h||w_$s.caller===w_$h)&&w_$s.method===w_$l&&(!w_$A||w_$s.once)){w_$P.delNode(w_$n,w_$s),w_$n.cursor==w_$s&&(w_$n.cursor=w_$s.next),w_$P.recoverHandler(w_$s);break}w_$s=w_$s.next}return this},w_$B.offAll=function(w_$B){var w_$h=this._events;if(!w_$h)return this;if(w_$B)this._recoverHandlers(w_$h[w_$B]),delete w_$h[w_$B];else{for(var w_$l in w_$h)this._recoverHandlers(w_$h[w_$l]);this._events=null}return this},w_$B._recoverHandlers=function(w_$B){if(w_$B){for(var w_$h=w_$B.head;w_$h;){w_$P.delNode(w_$B,w_$h);var w_$l=w_$h.next;w_$P.recoverHandler(w_$h),w_$h=w_$l}w_$B.cursor=null}},w_$B.isMouseEvent=function(w_$B){return w_$P.MOUSE_EVENTS[w_$B]},w_$P.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},w_$P.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},w_$P.delNode=function(w_$B,w_$h){w_$h.prev?w_$h.prev.next=w_$h.next:w_$B.head=w_$h.next,w_$h.next?w_$h.next.prev=w_$h.prev:w_$B.tail=w_$h.prev},w_$P.createHandler=function(w_$B,w_$h,w_$l,w_$A){var w_$n=500<w_$P._freeHandler.length?w_$P._freeHandler.shift():null;if(w_$n)if(w_$n.recover)w_$n.recover=!1,w_$n.caller=w_$B,w_$n.method=w_$h,w_$n.args=w_$l,w_$n.once=w_$A;else{var w_$s="";try{arguments.propertyIsEnumerable.caller}catch(w_$B){w_$s=w_$B.stack}var w_$X=w_$n.caller?(w_$n.caller.__proto__&&w_$n.caller.__proto__.constructor&&w_$n.caller.__proto__.constructor.name)+"|"+w_$n.caller.__className+"|"+w_$n.caller.name:"",w_$Z=w_$n.method?w_$n.method.name:"";w_$v.recordError("EventDispatcher重复创建","caller="+w_$X+"  method="+w_$Z+"  stack="+w_$s),w_$n={id:++w_$P._nodeCount,caller:w_$B,method:w_$h,args:w_$l,once:w_$A,recover:!1}}else w_$n={id:++w_$P._nodeCount,caller:w_$B,method:w_$h,args:w_$l,once:w_$A,recover:!1};return w_$n.prev=w_$n.next=null,w_$n},w_$P.recoverHandler=function(w_$B){if(w_$B.recover){if(w_$P._errorCount<5){w_$P._errorCount++;var w_$h="";try{arguments.propertyIsEnumerable.caller}catch(w_$B){w_$h=w_$B.stack}var w_$l=w_$B.caller?(w_$B.caller.__proto__&&w_$B.caller.__proto__.constructor&&w_$B.caller.__proto__.constructor.name)+"|"+w_$B.caller.__className+"|"+w_$B.caller.name:"",w_$A=w_$B.method?w_$B.method.name:"";w_$v.recordError("EventDispatcher重复回收","id="+w_$B.id+"  caller="+w_$l+"  method="+w_$A+"  stack="+w_$h)}w_$B.caller=w_$B.method=w_$B.args=w_$B.prev=null}else w_$B.recover=!0,w_$B.caller=w_$B.method=w_$B.args=w_$B.prev=w_$B.next=null,w_$P._freeHandler.push(w_$B)},w_$P._freeHandler=[],w_$P._nodeCount=0,w_$P._errorCount=0,w_$P}(),w_$H=function(){function w_$n(w_$B,w_$h,w_$l,w_$A){this.once=!1,void(this._id=0)===w_$A&&(w_$A=!1),this.setTo(w_$B,w_$h,w_$l,w_$A)}w_$G(w_$n,"laya.utils.Handler");var w_$B=w_$n.prototype;return w_$B.setTo=function(w_$B,w_$h,w_$l,w_$A){return this._id=w_$n._gid++,this.caller=w_$B,this.method=w_$h,this.args=w_$l,this.once=w_$A,this},w_$B.run=function(){if(null==this.method)return null;var w_$B=this._id,w_$h=this.method.apply(this.caller,this.args);return this._id===w_$B&&this.once&&this.recover(),w_$h},w_$B.runWith=function(w_$B){if(null==this.method)return null;var w_$h=this._id;if(null==w_$B)var w_$l=this.method.apply(this.caller,this.args);else w_$l=this.args||w_$B.unshift?this.args?this.method.apply(this.caller,this.args.concat(w_$B)):this.method.apply(this.caller,w_$B):this.method.call(this.caller,w_$B);return this._id===w_$h&&this.once&&this.recover(),w_$l},w_$B.clear=function(){return this.caller=null,this.method=null,this.args=null,this},w_$B.recover=function(){0<this._id&&(this._id=0,this.clear())},w_$n.create=function(w_$B,w_$h,w_$l,w_$A){return void 0===w_$A&&(w_$A=!0),new w_$n(w_$B,w_$h,w_$l,w_$A)},w_$n._gid=1,w_$n}(),w_$z=function(){function w_$B(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}w_$G(w_$B,"laya.display.BitmapFont");var w_$h=w_$B.prototype;return w_$h.loadFont=function(w_$B,w_$h){this._path=w_$B,this._complete=w_$h,w_$v.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],w_$H.create(this,this.onLoaded))},w_$h.onLoaded=function(){this.parseFont(w_$ZB.getRes(this._path),w_$ZB.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},w_$h.parseFont=function(w_$B,w_$h){if(null!=w_$B&&null!=w_$h){this._texture=w_$h;var w_$l=w_$B.getElementsByTagName("info");if(!w_$l[0].getAttributeNode)return this.parseFont2(w_$B,w_$h);this.fontSize=parseInt(w_$l[0].getAttributeNode("size").nodeValue);var w_$A,w_$n=w_$l[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(w_$n[0]),parseInt(w_$n[1]),parseInt(w_$n[2]),parseInt(w_$n[3])],w_$A=w_$B.getElementsByTagName("char");var w_$s=0;for(w_$s=0;w_$s<w_$A.length;w_$s++){var w_$X=w_$A[w_$s],w_$Z=parseInt(w_$X.getAttributeNode("id").nodeValue),w_$t=parseInt(w_$X.getAttributeNode("xoffset").nodeValue)/1,w_$P=parseInt(w_$X.getAttributeNode("yoffset").nodeValue)/1,w_$G=parseInt(w_$X.getAttributeNode("xadvance").nodeValue)/1,w_$T=new w_$x;w_$T.x=parseInt(w_$X.getAttributeNode("x").nodeValue),w_$T.y=parseInt(w_$X.getAttributeNode("y").nodeValue),w_$T.width=parseInt(w_$X.getAttributeNode("width").nodeValue),w_$T.height=parseInt(w_$X.getAttributeNode("height").nodeValue);var w_$b=w_$GB.create(w_$h,w_$T.x,w_$T.y,w_$T.width,w_$T.height,w_$t,w_$P);this._maxWidth=Math.max(this._maxWidth,w_$G+this.letterSpacing),this._fontCharDic[w_$Z]=w_$b,this._fontWidthMap[w_$Z]=w_$G}}},w_$h.parseFont2=function(w_$B,w_$h){if(null!=w_$B&&null!=w_$h){this._texture=w_$h;var w_$l=w_$B.getElementsByTagName("info");this.fontSize=parseInt(w_$l[0].attributes.size.nodeValue);var w_$A=w_$l[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(w_$A[0]),parseInt(w_$A[1]),parseInt(w_$A[2]),parseInt(w_$A[3])];var w_$n=w_$B.getElementsByTagName("char"),w_$s=0;for(w_$s=0;w_$s<w_$n.length;w_$s++){var w_$X=w_$n[w_$s].attributes,w_$Z=parseInt(w_$X.id.nodeValue),w_$t=parseInt(w_$X.xoffset.nodeValue)/1,w_$P=parseInt(w_$X.yoffset.nodeValue)/1,w_$G=parseInt(w_$X.xadvance.nodeValue)/1,w_$T=new w_$x;w_$T.x=parseInt(w_$X.x.nodeValue),w_$T.y=parseInt(w_$X.y.nodeValue),w_$T.width=parseInt(w_$X.width.nodeValue),w_$T.height=parseInt(w_$X.height.nodeValue);var w_$b=w_$GB.create(w_$h,w_$T.x,w_$T.y,w_$T.width,w_$T.height,w_$t,w_$P);this._maxWidth=Math.max(this._maxWidth,w_$G+this.letterSpacing),this._fontCharDic[w_$Z]=w_$b,this._fontWidthMap[w_$Z]=w_$G}}},w_$h.getCharTexture=function(w_$B){return this._fontCharDic[w_$B.charCodeAt(0)]},w_$h.destroy=function(){if(this._texture){for(var w_$B in this._fontCharDic){var w_$h=this._fontCharDic[w_$B];w_$h&&w_$h.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},w_$h.setSpaceWidth=function(w_$B){this._spaceWidth=w_$B},w_$h.getCharWidth=function(w_$B){var w_$h=w_$B.charCodeAt(0);return this._fontWidthMap[w_$h]?this._fontWidthMap[w_$h]+this.letterSpacing:" "==w_$B?this._spaceWidth+this.letterSpacing:0},w_$h.getTextWidth=function(w_$B){for(var w_$h=0,w_$l=0,w_$A=w_$B.length;w_$l<w_$A;w_$l++)w_$h+=this.getCharWidth(w_$B.charAt(w_$l));return w_$h},w_$h.getMaxWidth=function(){return this._maxWidth},w_$h.getMaxHeight=function(){return this.fontSize},w_$h.drawText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X,w_$Z=this.getTextWidth(w_$B),w_$t=0;"center"===w_$n&&(w_$t=(w_$s-w_$Z)/2),"right"===w_$n&&(w_$t=w_$s-w_$Z);for(var w_$P=0,w_$G=0,w_$T=w_$B.length;w_$G<w_$T;w_$G++)(w_$X=this.getCharTexture(w_$B.charAt(w_$G)))&&(w_$h.graphics.drawTexture(w_$X,w_$l+w_$P+w_$t,w_$A),w_$P+=this.getCharWidth(w_$B.charAt(w_$G)))},w_$B}(),w_$Z=function(){function w_$l(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=w_$l._TF_EMPTY}w_$G(w_$l,"laya.display.css.Style");var w_$B=w_$l.prototype;return w_$B.getTransform=function(){return this._tf},w_$B.setTransform=function(w_$B){this._tf="none"!==w_$B&&w_$B?w_$B:w_$l._TF_EMPTY},w_$B.setTranslateX=function(w_$B){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.translateX=w_$B},w_$B.setTranslateY=function(w_$B){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.translateY=w_$B},w_$B.setScaleX=function(w_$B){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.scaleX=w_$B},w_$B.setScale=function(w_$B,w_$h){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.scaleX=w_$B,this._tf.scaleY=w_$h},w_$B.setScaleY=function(w_$B){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.scaleY=w_$B},w_$B.setRotate=function(w_$B){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.rotate=w_$B},w_$B.setSkewX=function(w_$B){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.skewX=w_$B},w_$B.setSkewY=function(w_$B){this._tf===w_$l._TF_EMPTY&&(this._tf=new w_$n),this._tf.skewY=w_$B},w_$B.destroy=function(){this.scrollRect=null},w_$B.render=function(w_$B,w_$h,w_$l,w_$A){},w_$B.getCSSStyle=function(){return w_$hB.EMPTY},w_$B._enableLayout=function(){return!1},w_$i(0,w_$B,"scaleX",function(){return this._tf.scaleX},function(w_$B){this.setScaleX(w_$B)}),w_$i(0,w_$B,"transform",function(){return this.getTransform()},function(w_$B){this.setTransform(w_$B)}),w_$i(0,w_$B,"translateX",function(){return this._tf.translateX},function(w_$B){this.setTranslateX(w_$B)}),w_$i(0,w_$B,"translateY",function(){return this._tf.translateY},function(w_$B){this.setTranslateY(w_$B)}),w_$i(0,w_$B,"scaleY",function(){return this._tf.scaleY},function(w_$B){this.setScaleY(w_$B)}),w_$i(0,w_$B,"block",function(){return 0!=(1&this._type)}),w_$i(0,w_$B,"skewY",function(){return this._tf.skewY},function(w_$B){this.setSkewY(w_$B)}),w_$i(0,w_$B,"rotate",function(){return this._tf.rotate},function(w_$B){this.setRotate(w_$B)}),w_$i(0,w_$B,"skewX",function(){return this._tf.skewX},function(w_$B){this.setSkewX(w_$B)}),w_$i(0,w_$B,"paddingLeft",function(){return 0}),w_$i(0,w_$B,"paddingTop",function(){return 0}),w_$i(0,w_$B,"absolute",function(){return!0}),w_$l.__init__=function(){w_$l._TF_EMPTY=new w_$n,w_$l.EMPTY=new w_$l},w_$l.EMPTY=null,w_$l._TF_EMPTY=null,w_$l}(),w_$Q=function(){function w_$h(w_$B){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=w_$F.create(w_$h.defaultColor),this.family=w_$h.defaultFamily,this.stroke=w_$h._STROKE,this.size=w_$h.defaultSize,w_$B&&w_$B!==w_$h.EMPTY&&w_$B.copyTo(this)}w_$G(w_$h,"laya.display.css.Font");var w_$B=w_$h.prototype;return w_$B.set=function(w_$B){this._text=null;for(var w_$h=w_$B.split(" "),w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++){var w_$n=w_$h[w_$l];switch(w_$n){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<w_$n.indexOf("px")&&(this.size=parseInt(w_$n),this.family=w_$h[w_$l+1],w_$l++)}},w_$B.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},w_$B.copyTo=function(w_$B){w_$B._type=this._type,w_$B._text=this._text,w_$B._weight=this._weight,w_$B._color=this._color,w_$B.family=this.family,w_$B.stroke=this.stroke!=w_$h._STROKE?this.stroke.slice():w_$h._STROKE,w_$B.indent=this.indent,w_$B.size=this.size},w_$i(0,w_$B,"password",function(){return 0!=(1024&this._type)},function(w_$B){w_$B?this._type|=1024:this._type&=-1025}),w_$i(0,w_$B,"color",function(){return this._color.strColor},function(w_$B){this._color=w_$F.create(w_$B)}),w_$i(0,w_$B,"italic",function(){return 0!=(512&this._type)},function(w_$B){w_$B?this._type|=512:this._type&=-513}),w_$i(0,w_$B,"bold",function(){return 0!=(2048&this._type)},function(w_$B){w_$B?this._type|=2048:this._type&=-2049}),w_$i(0,w_$B,"weight",function(){return""+this._weight},function(w_$B){var w_$h=0;switch(w_$B){case"normal":break;case"bold":this.bold=!0,w_$h=700;break;case"bolder":w_$h=800;break;case"lighter":w_$h=100;break;default:w_$h=parseInt(w_$B)}this._weight=w_$h,this._text=null}),w_$i(0,w_$B,"decoration",function(){return this._decoration?this._decoration.value:null},function(w_$B){var w_$h=w_$B.split(" ");switch(this._decoration||(this._decoration={}),w_$h[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=w_$h[0]}w_$h[1]&&(this._decoration.color=w_$F.create(w_$h)),this._decoration.value=w_$B}),w_$h.__init__=function(){w_$h.EMPTY=new w_$h(null)},w_$h.EMPTY=null,w_$h.defaultColor="#000000",w_$h.defaultSize=12,w_$h.defaultFamily="Arial",w_$h.defaultFont="12px Arial",w_$h._STROKE=[0,"#000000"],w_$h._ITALIC=512,w_$h._PASSWORD=1024,w_$h._BOLD=2048,w_$h}(),w_$n=function(){function w_$B(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return w_$G(w_$B,"laya.display.css.TransformInfo"),w_$B}(),w_$b=function(){function w_$T(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,w_$M.isConchNode){this._nativeObj=new w_$X._conchGraphics,this.id=this._nativeObj.conchID}}w_$G(w_$T,"laya.display.Graphics");var w_$B=w_$T.prototype;return w_$B.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},w_$B.clear=function(w_$B){void 0===w_$B&&(w_$B=!1);var w_$h=0,w_$l=0;if(w_$B){var w_$A=this._one;if(this._cmds){for(w_$l=this._cmds.length,w_$h=0;w_$h<w_$l;w_$h++)!(w_$A=this._cmds[w_$h])||w_$A.callee!==w_$M._context._drawTexture&&w_$A.callee!==w_$M._context._drawTextureWithTransform||(w_$A[0]=null,w_$T._cache.push(w_$A));this._cmds.length=0}else w_$A&&(!w_$A||w_$A.callee!==w_$M._context._drawTexture&&w_$A.callee!==w_$M._context._drawTextureWithTransform||(w_$A[0]=null,w_$T._cache.push(w_$A)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(w_$h=0,w_$l=this._vectorgraphArray.length;w_$h<w_$l;w_$h++)w_$q.getInstance().deleteShape(this._vectorgraphArray[w_$h]);this._vectorgraphArray.length=0}},w_$B._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},w_$B._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new w_$l,this._graphicBounds._graphics=this)},w_$B._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},w_$B._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},w_$B.getBounds=function(w_$B){return void 0===w_$B&&(w_$B=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(w_$B)},w_$B.getBoundPoints=function(w_$B){return void 0===w_$B&&(w_$B=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(w_$B)},w_$B._addCmd=function(w_$B){this._cmds=this._cmds||[],w_$B.callee=w_$B.shift(),this._cmds.push(w_$B)},w_$B.setFilters=function(w_$B){this._saveToCmd(w_$M._context._setFilters,w_$B)},w_$B.drawTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){if(void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),void 0===w_$X&&(w_$X=1),!w_$B||w_$X<.01)return null;w_$A||(w_$A=w_$B.sourceWidth),w_$n||(w_$n=w_$B.sourceHeight),w_$X=w_$X<0?0:1<w_$X?1:w_$X;var w_$Z,w_$t=!w_$M.isWebGL&&(w_$d.onFirefox||w_$d.onEdge||w_$d.onIE||w_$d.onSafari)?.5:0,w_$P=w_$A/w_$B.sourceWidth,w_$G=w_$n/w_$B.sourceHeight;return w_$A=w_$B.width*w_$P,w_$n=w_$B.height*w_$G,w_$B.loaded&&(w_$A<=0||w_$n<=0)?null:(w_$h+=w_$B.offsetX*w_$P,w_$l+=w_$B.offsetY*w_$G,this._sp&&(this._sp._renderType|=512),w_$h-=w_$t,w_$l-=w_$t,w_$A+=2*w_$t,w_$n+=2*w_$t,w_$T._cache.length?((w_$Z=w_$T._cache.pop())[0]=w_$B,w_$Z[1]=w_$h,w_$Z[2]=w_$l,w_$Z[3]=w_$A,w_$Z[4]=w_$n,w_$Z[5]=w_$s,w_$Z[6]=w_$X):w_$Z=[w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X],w_$Z.callee=w_$s||1!=w_$X?w_$M._context._drawTextureWithTransform:w_$M._context._drawTexture,null!=this._one||w_$s||1!=w_$X?this._saveToCmd(w_$Z.callee,w_$Z):(this._one=w_$Z,this._render=this._renderOneImg),w_$B.loaded||w_$B.once("loaded",this,this._textureLoaded,[w_$B,w_$Z]),this._repaint(),w_$Z)},w_$B.cleanByTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n){if(void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),!w_$B)return this.clear();if(this._one&&this._render===this._renderOneImg){w_$A||(w_$A=w_$B.sourceWidth),w_$n||(w_$n=w_$B.sourceHeight);var w_$s=w_$A/w_$B.sourceWidth,w_$X=w_$n/w_$B.sourceHeight;w_$A=w_$B.width*w_$s,w_$n=w_$B.height*w_$X,w_$h+=w_$B.offsetX*w_$s,w_$l+=w_$B.offsetY*w_$X,this._one[0]=w_$B,this._one[1]=w_$h,this._one[2]=w_$l,this._one[3]=w_$A,this._one[4]=w_$n,this._repaint()}else this.clear(),w_$B&&this.drawTexture(w_$B,w_$h,w_$l,w_$A,w_$n)},w_$B.drawTextures=function(w_$B,w_$h){w_$B&&this._saveToCmd(w_$M._context._drawTextures,[w_$B,w_$h])},w_$B.fillTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){if(void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s="repeat"),w_$B){var w_$Z=[w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X||w_$U.EMPTY,{}];w_$B.loaded||w_$B.once("loaded",this,this._textureLoaded,[w_$B,w_$Z]),this._saveToCmd(w_$M._context._fillTexture,w_$Z)}},w_$B._textureLoaded=function(w_$B,w_$h){w_$h[3]=w_$h[3]||w_$B.width,w_$h[4]=w_$h[4]||w_$B.height,this._repaint()},w_$B.fillCircle=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$l.bitmap.enableMerageInAtlas=!1;var w_$Z=new Float32Array(2*(w_$X+1)),w_$t=new Float32Array(2*(w_$X+1)),w_$P=new Uint16Array(3*w_$X),w_$G=2*Math.PI/w_$X,w_$T=0;w_$Z[0]=w_$A,w_$Z[1]=w_$n,w_$t[0]=w_$A/w_$l.width,w_$t[1]=w_$n/w_$l.height;for(var w_$b=2,w_$Q=0;w_$Q<w_$X;w_$Q++){var w_$i=w_$s*Math.cos(w_$T)+w_$A,w_$$=w_$s*Math.sin(w_$T)+w_$n;w_$Z[w_$b]=w_$i,w_$Z[w_$b+1]=w_$$,w_$t[w_$b]=w_$i/w_$l.width,w_$t[w_$b+1]=w_$$/w_$l.height,w_$T+=w_$G,w_$b+=2}for(w_$Q=w_$b=0;w_$Q<w_$X;w_$Q++)w_$P[w_$b++]=0,w_$P[w_$b++]=w_$Q+1,w_$P[w_$b++]=w_$X+1<=w_$Q+2?1:w_$Q+2;this.drawTriangles(w_$l,w_$B,w_$h,w_$Z,w_$t,w_$P)},w_$B.drawTriangles=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){void 0===w_$Z&&(w_$Z=1),this._saveToCmd(w_$M._context.drawTriangles,[w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P])},w_$B._saveToCmd=function(w_$B,w_$h){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=w_$h,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(w_$h)),w_$h.callee=w_$B,this._repaint(),w_$h},w_$B.clipRect=function(w_$B,w_$h,w_$l,w_$A){this._saveToCmd(w_$M._context._clipRect,[w_$B,w_$h,w_$l,w_$A])},w_$B.fillText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){void 0===w_$X&&(w_$X=0),this._saveToCmd(w_$M._context._fillText,[w_$B,w_$h,w_$l,w_$A||w_$Q.defaultFont,w_$n,w_$s])},w_$B.fillBorderText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){this._saveToCmd(w_$M._context._fillBorderText,[w_$B,w_$h,w_$l,w_$A||w_$Q.defaultFont,w_$n,w_$s,w_$X,w_$Z])},w_$B.strokeText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._saveToCmd(w_$M._context._strokeText,[w_$B,w_$h,w_$l,w_$A||w_$Q.defaultFont,w_$n,w_$s,w_$X])},w_$B.alpha=function(w_$B){w_$B=w_$B<0?0:1<w_$B?1:w_$B,this._saveToCmd(w_$M._context._alpha,[w_$B])},w_$B.setAlpha=function(w_$B){w_$B=w_$B<0?0:1<w_$B?1:w_$B,this._saveToCmd(w_$M._context._setAlpha,[w_$B])},w_$B.transform=function(w_$B,w_$h,w_$l){void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),this._saveToCmd(w_$M._context._transform,[w_$B,w_$h,w_$l])},w_$B.rotate=function(w_$B,w_$h,w_$l){void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),this._saveToCmd(w_$M._context._rotate,[w_$B,w_$h,w_$l])},w_$B.scale=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0),this._saveToCmd(w_$M._context._scale,[w_$B,w_$h,w_$l,w_$A])},w_$B.translate=function(w_$B,w_$h){this._saveToCmd(w_$M._context._translate,[w_$B,w_$h])},w_$B.save=function(){this._saveToCmd(w_$M._context._save,[])},w_$B.restore=function(){this._saveToCmd(w_$M._context._restore,[])},w_$B.replaceText=function(w_$B){this._repaint();var w_$h=this._cmds;if(w_$h){for(var w_$l=w_$h.length-1;-1<w_$l;w_$l--)if(this._isTextCmd(w_$h[w_$l].callee))return w_$h[w_$l][0].toUpperCase?w_$h[w_$l][0]=w_$B:w_$h[w_$l][0].setText(w_$B),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=w_$B:this._one[0].setText(w_$B),!0;return!1},w_$B._isTextCmd=function(w_$B){return w_$B===w_$M._context._fillText||w_$B===w_$M._context._fillBorderText||w_$B===w_$M._context._strokeText},w_$B.replaceTextColor=function(w_$B){this._repaint();var w_$h=this._cmds;if(w_$h)for(var w_$l=w_$h.length-1;-1<w_$l;w_$l--)this._isTextCmd(w_$h[w_$l].callee)&&(w_$h[w_$l][4]=w_$B,w_$h[w_$l][0].toUpperCase||(w_$h[w_$l][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=w_$B,this._one[0].toUpperCase||(this._one[0].changed=!0))},w_$B.loadImage=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=this;void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0);var w_$Z=w_$ZB.getRes(w_$B);function w_$t(w_$B){w_$B&&(w_$X.drawTexture(w_$B,w_$h,w_$l,w_$A,w_$n),null!=w_$s&&w_$s.call(w_$X._sp,w_$B))}w_$Z?w_$t(w_$Z):w_$v.loader.load(w_$B,w_$H.create(null,w_$t),null,"image")},w_$B._renderEmpty=function(w_$B,w_$h,w_$l,w_$A){},w_$B._renderAll=function(w_$B,w_$h,w_$l,w_$A){for(var w_$n,w_$s=this._cmds,w_$X=0,w_$Z=w_$s.length;w_$X<w_$Z;w_$X++)(w_$n=w_$s[w_$X]).callee.call(w_$h,w_$l,w_$A,w_$n)},w_$B._renderOne=function(w_$B,w_$h,w_$l,w_$A){this._one.callee.call(w_$h,w_$l,w_$A,this._one)},w_$B._renderOneImg=function(w_$B,w_$h,w_$l,w_$A){this._one.callee.call(w_$h,w_$l,w_$A,this._one),2305!==w_$B._renderType&&(w_$B._renderType|=1)},w_$B.drawLine=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$s&&(w_$s=1);var w_$X=0;w_$M.isWebGL&&(w_$X=w_$q.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w_$X));var w_$Z=w_$s%2==0?0:.5,w_$t=[w_$B+w_$Z,w_$h+w_$Z,w_$l+w_$Z,w_$A+w_$Z,w_$n,w_$s,w_$X];this._saveToCmd(w_$M._context._drawLine,w_$t)},w_$B.drawLines=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=1);var w_$s=0;if(w_$l&&!(w_$l.length<4)){w_$M.isWebGL&&(w_$s=w_$q.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w_$s));var w_$X=w_$n%2==0?0:.5,w_$Z=[w_$B+w_$X,w_$h+w_$X,w_$l,w_$A,w_$n,w_$s];this._saveToCmd(w_$M._context._drawLines,w_$Z)}},w_$B.drawCurves=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=1);var w_$s=[w_$B,w_$h,w_$l,w_$A,w_$n];this._saveToCmd(w_$M._context._drawCurves,w_$s)},w_$B.drawRect=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){void 0===w_$X&&(w_$X=1);var w_$Z=w_$s?w_$X/2:0,w_$t=w_$s?w_$X:0,w_$P=[w_$B+w_$Z,w_$h+w_$Z,w_$l-w_$t,w_$A-w_$t,w_$n,w_$s,w_$X];this._saveToCmd(w_$M._context._drawRect,w_$P)},w_$B.drawCircle=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$s&&(w_$s=1);var w_$X=w_$n?w_$s/2:0,w_$Z=0;w_$M.isWebGL&&(w_$Z=w_$q.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w_$Z));var w_$t=[w_$B,w_$h,w_$l-w_$X,w_$A,w_$n,w_$s,w_$Z];this._saveToCmd(w_$M._context._drawCircle,w_$t)},w_$B.drawPie=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){void 0===w_$Z&&(w_$Z=1);var w_$t=w_$X?w_$Z/2:0,w_$P=w_$X?w_$Z:0,w_$G=0;w_$M.isWebGL&&(w_$G=w_$q.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w_$G));var w_$T=[w_$B+w_$t,w_$h+w_$t,w_$l-w_$P,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$G];w_$T[3]=w_$e.toRadian(w_$A),w_$T[4]=w_$e.toRadian(w_$n),this._saveToCmd(w_$M._context._drawPie,w_$T)},w_$B.drawPoly=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$s&&(w_$s=1);var w_$X=0,w_$Z=!1;w_$M.isWebGL&&(w_$X=w_$q.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(w_$X),w_$Z=!(6<w_$l.length));var w_$t=w_$n?w_$s%2==0?0:.5:0,w_$P=[w_$B+w_$t,w_$h+w_$t,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z];this._saveToCmd(w_$M._context._drawPoly,w_$P)},w_$B.drawPath=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=[w_$B,w_$h,w_$l,w_$A,w_$n];this._saveToCmd(w_$M._context._drawPath,w_$s)},w_$i(0,w_$B,"cmds",function(){return this._cmds},function(w_$B){this._sp&&(this._sp._renderType|=512),this._cmds=w_$B,this._render=this._renderAll,this._repaint()}),w_$T.__init__=function(){if(w_$M.isConchNode){for(var w_$B=laya.display.Graphics.prototype,w_$h=w_$d.window.ConchGraphics.prototype,w_$l=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],w_$A=0,w_$n=w_$l.length;w_$A<=w_$n;w_$A++){var w_$s=w_$l[w_$A];w_$B[w_$s]=w_$h[w_$s]}w_$B._saveToCmd=null,w_$h.drawImageS&&(w_$B.drawTextures=function(w_$B,w_$h){if(w_$B&&w_$B.loaded&&w_$B.bitmap&&w_$B.source){var w_$l=w_$B.uv,w_$A=w_$B.bitmap.width,w_$n=w_$B.bitmap.height;this.drawImageS(w_$B.bitmap.source,w_$l[0]*w_$A,w_$l[1]*w_$n,(w_$l[2]-w_$l[0])*w_$A,(w_$l[5]-w_$l[3])*w_$n,w_$B.offsetX,w_$B.offsetY,w_$B.width,w_$B.height,w_$h)}}),w_$B.drawTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){if(void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),void 0===w_$X&&(w_$X=1),w_$B)if(w_$B.loaded){if(w_$B.loaded&&w_$B.bitmap&&w_$B.source&&(w_$A||(w_$A=w_$B.sourceWidth),w_$n||(w_$n=w_$B.sourceHeight),w_$X=w_$X<0?0:1<w_$X?1:w_$X,w_$A=w_$A-w_$B.sourceWidth+w_$B.width,w_$n=w_$n-w_$B.sourceHeight+w_$B.height,!(w_$A<=0||w_$n<=0))){w_$h+=w_$B.offsetX,w_$l+=w_$B.offsetY;var w_$Z=w_$B.uv,w_$t=w_$B.bitmap.width,w_$P=w_$B.bitmap.height;w_$Z[4]<w_$Z[0]&&w_$Z[5]<w_$Z[1]?this.drawImageM(w_$B.bitmap.source,w_$Z[4]*w_$t,w_$Z[5]*w_$P,(w_$Z[0]-w_$Z[4])*w_$t,(w_$Z[1]-w_$Z[5])*w_$P,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X):this.drawImageM(w_$B.bitmap.source,w_$Z[0]*w_$t,w_$Z[1]*w_$P,(w_$Z[2]-w_$Z[0])*w_$t,(w_$Z[5]-w_$Z[3])*w_$P,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X),this._repaint()}}else w_$B.once("loaded",this,function(){this.drawTexture(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)})},w_$B.fillTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){if(void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s="repeat"),w_$B&&w_$B.loaded){var w_$Z,w_$t=w_$M._context.ctx,w_$P=w_$B.bitmap.width,w_$G=w_$B.bitmap.height,w_$T=w_$B.uv;w_$Z=w_$B.uv!=w_$GB.DEF_UV?w_$t.createPattern(w_$B.bitmap.source,w_$s,w_$T[0]*w_$P,w_$T[1]*w_$G,(w_$T[2]-w_$T[0])*w_$P,(w_$T[5]-w_$T[3])*w_$G):w_$t.createPattern(w_$B.bitmap.source,w_$s);var w_$b=0,w_$Q=0;w_$X&&(w_$h+=w_$X.x%w_$B.width,w_$l+=w_$X.y%w_$B.height,w_$b-=w_$X.x%w_$B.width,w_$Q-=w_$X.y%w_$B.height),this._fillImage(w_$Z,w_$h,w_$l,w_$b,w_$Q,w_$A,w_$n)}}}},w_$T._cache=[],w_$T}(),w_$l=function(){function w_$y(){this._cacheBoundsType=!1}w_$G(w_$y,"laya.display.GraphicsBounds");var w_$B=w_$y.prototype;return w_$B.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},w_$B.reset=function(){this._temp&&(this._temp.length=0)},w_$B.getBounds=function(w_$B){return void 0===w_$B&&(w_$B=!1),(!this._bounds||!this._temp||this._temp.length<1||w_$B!=this._cacheBoundsType)&&(this._bounds=w_$x._getWrapRec(this.getBoundPoints(w_$B),this._bounds)),this._cacheBoundsType=w_$B,this._bounds},w_$B.getBoundPoints=function(w_$B){return void 0===w_$B&&(w_$B=!1),(!this._temp||this._temp.length<1||w_$B!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(w_$B)),this._cacheBoundsType=w_$B,this._rstBoundPoints=w_$e.copyArray(this._rstBoundPoints,this._temp)},w_$B._getCmdPoints=function(w_$B){void 0===w_$B&&(w_$B=!1);var w_$h,w_$l,w_$A=w_$M._context,w_$n=this._graphics.cmds;if((w_$h=this._temp||(this._temp=[])).length=0,w_$n||null==this._graphics._one||(w_$y._tempCmds.length=0,w_$y._tempCmds.push(this._graphics._one),w_$n=w_$y._tempCmds),!w_$n)return w_$h;(w_$l=w_$y._tempMatrixArrays).length=0;var w_$s=w_$y._initMatrix;w_$s.identity();for(var w_$X,w_$Z,w_$t=w_$y._tempMatrix,w_$P=NaN,w_$G=NaN,w_$T=NaN,w_$b=NaN,w_$Q=NaN,w_$i=NaN,w_$$=0,w_$V=w_$n.length;w_$$<w_$V;w_$$++)if((w_$X=w_$n[w_$$]).callee)switch(w_$X.callee){case w_$A._save:case 7:w_$l.push(w_$s),w_$s=w_$s.clone();break;case w_$A._restore:case 8:w_$s=w_$l.pop();break;case w_$A._scale:case 5:w_$t.identity(),w_$t.translate(-w_$X[2],-w_$X[3]),w_$t.scale(w_$X[0],w_$X[1]),w_$t.translate(w_$X[2],w_$X[3]),this._switchMatrix(w_$s,w_$t);break;case w_$A._rotate:case 3:w_$t.identity(),w_$t.translate(-w_$X[1],-w_$X[2]),w_$t.rotate(w_$X[0]),w_$t.translate(w_$X[1],w_$X[2]),this._switchMatrix(w_$s,w_$t);break;case w_$A._translate:case 6:w_$t.identity(),w_$t.translate(w_$X[0],w_$X[1]),this._switchMatrix(w_$s,w_$t);break;case w_$A._transform:case 4:w_$t.identity(),w_$t.translate(-w_$X[1],-w_$X[2]),w_$t.concat(w_$X[0]),w_$t.translate(w_$X[1],w_$X[2]),this._switchMatrix(w_$s,w_$t);break;case 16:case 24:w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[0],w_$X[1],w_$X[2],w_$X[3]),w_$s);break;case 17:w_$s.copyTo(w_$t),w_$t.concat(w_$X[4]),w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[0],w_$X[1],w_$X[2],w_$X[3]),w_$t);break;case w_$A._drawTexture:w_$Z=w_$X[0],w_$B?w_$X[3]&&w_$X[4]?w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1],w_$X[2],w_$X[3],w_$X[4]),w_$s):(w_$Z=w_$X[0],w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1],w_$X[2],w_$Z.width,w_$Z.height),w_$s)):(w_$P=(w_$X[3]||w_$Z.sourceWidth)/w_$Z.width,w_$G=(w_$X[4]||w_$Z.sourceHeight)/w_$Z.height,w_$T=w_$P*w_$Z.sourceWidth,w_$b=w_$G*w_$Z.sourceHeight,w_$Q=0<w_$Z.offsetX?w_$Z.offsetX:0,w_$i=0<w_$Z.offsetY?w_$Z.offsetY:0,w_$Q*=w_$P,w_$i*=w_$G,w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1]-w_$Q,w_$X[2]-w_$i,w_$T,w_$b),w_$s));break;case w_$A._fillTexture:w_$X[3]&&w_$X[4]?w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1],w_$X[2],w_$X[3],w_$X[4]),w_$s):(w_$Z=w_$X[0],w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1],w_$X[2],w_$Z.width,w_$Z.height),w_$s));break;case w_$A._drawTextureWithTransform:var w_$J;w_$J=w_$X[5]?(w_$s.copyTo(w_$t),w_$t.concat(w_$X[5]),w_$t):w_$s,w_$B?w_$X[3]&&w_$X[4]?w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1],w_$X[2],w_$X[3],w_$X[4]),w_$J):(w_$Z=w_$X[0],w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1],w_$X[2],w_$Z.width,w_$Z.height),w_$J)):(w_$Z=w_$X[0],w_$P=(w_$X[3]||w_$Z.sourceWidth)/w_$Z.width,w_$G=(w_$X[4]||w_$Z.sourceHeight)/w_$Z.height,w_$T=w_$P*w_$Z.sourceWidth,w_$b=w_$G*w_$Z.sourceHeight,w_$Q=0<w_$Z.offsetX?w_$Z.offsetX:0,w_$i=0<w_$Z.offsetY?w_$Z.offsetY:0,w_$Q*=w_$P,w_$i*=w_$G,w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[1]-w_$Q,w_$X[2]-w_$i,w_$T,w_$b),w_$J));break;case w_$A._drawRect:case 13:w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[0],w_$X[1],w_$X[2],w_$X[3]),w_$s);break;case w_$A._drawCircle:case w_$A._fillCircle:case 14:w_$y._addPointArrToRst(w_$h,w_$x._getBoundPointS(w_$X[0]-w_$X[2],w_$X[1]-w_$X[2],w_$X[2]+w_$X[2],w_$X[2]+w_$X[2]),w_$s);break;case w_$A._drawLine:case 20:w_$y._tempPoints.length=0;var w_$H;w_$H=.5*w_$X[5],w_$X[0]==w_$X[2]?w_$y._tempPoints.push(w_$X[0]+w_$H,w_$X[1],w_$X[2]+w_$H,w_$X[3],w_$X[0]-w_$H,w_$X[1],w_$X[2]-w_$H,w_$X[3]):w_$X[1]==w_$X[3]?w_$y._tempPoints.push(w_$X[0],w_$X[1]+w_$H,w_$X[2],w_$X[3]+w_$H,w_$X[0],w_$X[1]-w_$H,w_$X[2],w_$X[3]-w_$H):w_$y._tempPoints.push(w_$X[0],w_$X[1],w_$X[2],w_$X[3]),w_$y._addPointArrToRst(w_$h,w_$y._tempPoints,w_$s);break;case w_$A._drawCurves:case 22:w_$y._addPointArrToRst(w_$h,w_$C.I.getBezierPoints(w_$X[2]),w_$s,w_$X[0],w_$X[1]);break;case w_$A._drawPoly:case w_$A._drawLines:case 18:w_$y._addPointArrToRst(w_$h,w_$X[2],w_$s,w_$X[0],w_$X[1]);break;case w_$A._drawPath:case 19:w_$y._addPointArrToRst(w_$h,this._getPathPoints(w_$X[2]),w_$s,w_$X[0],w_$X[1]);break;case w_$A._drawPie:case 15:w_$y._addPointArrToRst(w_$h,this._getPiePoints(w_$X[0],w_$X[1],w_$X[2],w_$X[3],w_$X[4]),w_$s)}return 200<w_$h.length?w_$h=w_$e.copyArray(w_$h,w_$x._getWrapRec(w_$h)._getBoundPoints()):8<w_$h.length&&(w_$h=w_$o.scanPList(w_$h)),w_$h},w_$B._switchMatrix=function(w_$B,w_$h){w_$h.concat(w_$B),w_$h.copyTo(w_$B)},w_$B._getPiePoints=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$y._tempPoints;w_$y._tempPoints.length=0,w_$s.push(w_$B,w_$h);var w_$X=(w_$n-w_$A)%(2*Math.PI)/10,w_$Z=NaN,w_$t=w_$A;for(w_$Z=0;w_$Z<=10;w_$Z++)w_$s.push(w_$B+w_$l*Math.cos(w_$t),w_$h+w_$l*Math.sin(w_$t)),w_$t+=w_$X;return w_$s},w_$B._getPathPoints=function(w_$B){var w_$h,w_$l,w_$A=0,w_$n=w_$y._tempPoints;for(w_$n.length=0,w_$h=w_$B.length,w_$A=0;w_$A<w_$h;w_$A++)1<(w_$l=w_$B[w_$A]).length&&(w_$n.push(w_$l[1],w_$l[2]),3<w_$l.length&&w_$n.push(w_$l[3],w_$l[4]));return w_$n},w_$y._addPointArrToRst=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0);var w_$s,w_$X=0;for(w_$s=w_$h.length,w_$X=0;w_$X<w_$s;w_$X+=2)w_$y._addPointToRst(w_$B,w_$h[w_$X]+w_$A,w_$h[w_$X+1]+w_$n,w_$l)},w_$y._addPointToRst=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$U.TEMP;w_$n.setTo(w_$h||0,w_$l||0),w_$A.transformPoint(w_$n),w_$B.push(w_$n.x,w_$n.y)},w_$y._tempPoints=[],w_$y._tempMatrixArrays=[],w_$y._tempCmds=[],w_$t(w_$y,["_tempMatrix",function(){return this._tempMatrix=new w_$N},"_initMatrix",function(){return this._initMatrix=new w_$N}]),w_$y}(),w_$s=function(){function w_$B(){}w_$G(w_$B,"laya.events.Event");var w_$h=w_$B.prototype;return w_$h.setTo=function(w_$B,w_$h,w_$l){return this.type=w_$B,this.currentTarget=w_$h,this.target=w_$l,this},w_$h.stopPropagation=function(){this._stoped=!0},w_$i(0,w_$h,"stageY",function(){return w_$v.stage.mouseY}),w_$i(0,w_$h,"charCode",function(){return this.nativeEvent.charCode}),w_$i(0,w_$h,"touches",function(){var w_$B=this.nativeEvent.touches;if(w_$B)for(var w_$h=w_$v.stage,w_$l=0,w_$A=w_$B.length;w_$l<w_$A;w_$l++){var w_$n=w_$B[w_$l],w_$s=w_$U.TEMP;w_$s.setTo(w_$n.clientX,w_$n.clientY),w_$h._canvasTransform.invertTransformPoint(w_$s),w_$h.transform.invertTransformPoint(w_$s),w_$n.stageX=w_$s.x,w_$n.stageY=w_$s.y}return w_$B}),w_$i(0,w_$h,"keyLocation",function(){return this.nativeEvent.keyLocation}),w_$i(0,w_$h,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),w_$i(0,w_$h,"altKey",function(){return this.nativeEvent.altKey}),w_$i(0,w_$h,"shiftKey",function(){return this.nativeEvent.shiftKey}),w_$i(0,w_$h,"stageX",function(){return w_$v.stage.mouseX}),w_$B.EMPTY=new w_$B,w_$B.MOUSE_DOWN="mousedown",w_$B.MOUSE_UP="mouseup",w_$B.CLICK="click",w_$B.RIGHT_MOUSE_DOWN="rightmousedown",w_$B.RIGHT_MOUSE_UP="rightmouseup",w_$B.RIGHT_CLICK="rightclick",w_$B.MOUSE_MOVE="mousemove",w_$B.MOUSE_OVER="mouseover",w_$B.MOUSE_OUT="mouseout",w_$B.MOUSE_WHEEL="mousewheel",w_$B.ROLL_OVER="mouseover",w_$B.ROLL_OUT="mouseout",w_$B.DOUBLE_CLICK="doubleclick",w_$B.CHANGE="change",w_$B.CHANGED="changed",w_$B.RESIZE="resize",w_$B.ADDED="added",w_$B.REMOVED="removed",w_$B.DISPLAY="display",w_$B.UNDISPLAY="undisplay",w_$B.ERROR="error",w_$B.COMPLETE="complete",w_$B.LOADED="loaded",w_$B.INITED="inited",w_$B.PROGRESS="progress",w_$B.INPUT="input",w_$B.RENDER="render",w_$B.OPEN="open",w_$B.MESSAGE="message",w_$B.CLOSE="close",w_$B.KEY_DOWN="keydown",w_$B.KEY_PRESS="keypress",w_$B.KEY_UP="keyup",w_$B.FRAME="enterframe",w_$B.DRAG_START="dragstart",w_$B.DRAG_MOVE="dragmove",w_$B.DRAG_END="dragend",w_$B.ENTER="enter",w_$B.SELECT="select",w_$B.BLUR="blur",w_$B.FOCUS="focus",w_$B.VISIBILITY_CHANGE="visibilitychange",w_$B.FOCUS_CHANGE="focuschange",w_$B.PLAYED="played",w_$B.PAUSED="paused",w_$B.STOPPED="stopped",w_$B.START="start",w_$B.END="end",w_$B.ENABLE_CHANGED="enablechanged",w_$B.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",w_$B.COMPONENT_ADDED="componentadded",w_$B.COMPONENT_REMOVED="componentremoved",w_$B.LAYER_CHANGED="layerchanged",w_$B.HIERARCHY_LOADED="hierarchyloaded",w_$B.RECOVERED="recovered",w_$B.RELEASED="released",w_$B.LINK="link",w_$B.LABEL="label",w_$B.FULL_SCREEN_CHANGE="fullscreenchange",w_$B.DEVICE_LOST="devicelost",w_$B.MESH_CHANGED="meshchanged",w_$B.MATERIAL_CHANGED="materialchanged",w_$B.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",w_$B.ANIMATION_CHANGED="animationchanged",w_$B.TRIGGER_ENTER="triggerenter",w_$B.TRIGGER_STAY="triggerstay",w_$B.TRIGGER_EXIT="triggerexit",w_$B.TRAIL_FILTER_CHANGE="trailfilterchange",w_$B.DOMINO_FILTER_CHANGE="dominofilterchange",w_$B}(),w_$T=(function(){function w_$B(){}w_$G(w_$B,"laya.events.Keyboard"),w_$B.NUMBER_0=48,w_$B.NUMBER_1=49,w_$B.NUMBER_2=50,w_$B.NUMBER_3=51,w_$B.NUMBER_4=52,w_$B.NUMBER_5=53,w_$B.NUMBER_6=54,w_$B.NUMBER_7=55,w_$B.NUMBER_8=56,w_$B.NUMBER_9=57,w_$B.A=65,w_$B.B=66,w_$B.C=67,w_$B.D=68,w_$B.E=69,w_$B.F=70,w_$B.G=71,w_$B.H=72,w_$B.I=73,w_$B.J=74,w_$B.K=75,w_$B.L=76,w_$B.M=77,w_$B.N=78,w_$B.O=79,w_$B.P=80,w_$B.Q=81,w_$B.R=82,w_$B.S=83,w_$B.T=84,w_$B.U=85,w_$B.V=86,w_$B.W=87,w_$B.X=88,w_$B.Y=89,w_$B.Z=90,w_$B.F1=112,w_$B.F2=113,w_$B.F3=114,w_$B.F4=115,w_$B.F5=116,w_$B.F6=117,w_$B.F7=118,w_$B.F8=119,w_$B.F9=120,w_$B.F10=121,w_$B.F11=122,w_$B.F12=123,w_$B.F13=124,w_$B.F14=125,w_$B.F15=126,w_$B.NUMPAD=21,w_$B.NUMPAD_0=96,w_$B.NUMPAD_1=97,w_$B.NUMPAD_2=98,w_$B.NUMPAD_3=99,w_$B.NUMPAD_4=100,w_$B.NUMPAD_5=101,w_$B.NUMPAD_6=102,w_$B.NUMPAD_7=103,w_$B.NUMPAD_8=104,w_$B.NUMPAD_9=105,w_$B.NUMPAD_ADD=107,w_$B.NUMPAD_DECIMAL=110,w_$B.NUMPAD_DIVIDE=111,w_$B.NUMPAD_ENTER=108,w_$B.NUMPAD_MULTIPLY=106,w_$B.NUMPAD_SUBTRACT=109,w_$B.SEMICOLON=186,w_$B.EQUAL=187,w_$B.COMMA=188,w_$B.MINUS=189,w_$B.PERIOD=190,w_$B.SLASH=191,w_$B.BACKQUOTE=192,w_$B.LEFTBRACKET=219,w_$B.BACKSLASH=220,w_$B.RIGHTBRACKET=221,w_$B.QUOTE=222,w_$B.ALTERNATE=18,w_$B.BACKSPACE=8,w_$B.CAPS_LOCK=20,w_$B.COMMAND=15,w_$B.CONTROL=17,w_$B.DELETE=46,w_$B.ENTER=13,w_$B.ESCAPE=27,w_$B.PAGE_UP=33,w_$B.PAGE_DOWN=34,w_$B.END=35,w_$B.HOME=36,w_$B.LEFT=37,w_$B.UP=38,w_$B.RIGHT=39,w_$B.DOWN=40,w_$B.SHIFT=16,w_$B.SPACE=32,w_$B.TAB=9,w_$B.INSERT=45}(),function(){function w_$n(){}return w_$G(w_$n,"laya.events.KeyBoardManager"),w_$n.__init__=function(){w_$n._addEvent("keydown"),w_$n._addEvent("keypress"),w_$n._addEvent("keyup")},w_$n._addEvent=function(w_$h){w_$d.document.addEventListener(w_$h,function(w_$B){laya.events.KeyBoardManager._dispatch(w_$B,w_$h)},!0)},w_$n._dispatch=function(w_$B,w_$h){if(w_$n.enabled){w_$n._event._stoped=!1,w_$n._event.nativeEvent=w_$B,w_$n._event.keyCode=w_$B.keyCode||w_$B.which||w_$B.charCode,"keydown"===w_$h?w_$n._pressKeys[w_$n._event.keyCode]=!0:"keyup"===w_$h&&(w_$n._pressKeys[w_$n._event.keyCode]=null);for(var w_$l=w_$v.stage.focus&&null!=w_$v.stage.focus.event&&w_$v.stage.focus.displayedInStage?w_$v.stage.focus:w_$v.stage,w_$A=w_$l;w_$A;)w_$A.event(w_$h,w_$n._event.setTo(w_$h,w_$A,w_$l)),w_$A=w_$A.parent}},w_$n.hasKeyDown=function(w_$B){return w_$n._pressKeys[w_$B]},w_$n._pressKeys={},w_$n.enabled=!0,w_$t(w_$n,["_event",function(){return this._event=new w_$s}]),w_$n}()),w_$$=(function(){function w_$B(){}w_$G(w_$B,"laya.events.KeyLocation"),w_$B.STANDARD=0,w_$B.LEFT=1,w_$B.RIGHT=2,w_$B.NUM_PAD=3}(),function(){function w_$P(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=w_$d.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new w_$s,this._matrix=new w_$N,this._point=new w_$U,this._rect=new w_$x,this._prePoint=new w_$U,this._curTouchID=NaN}w_$G(w_$P,"laya.events.MouseManager");var w_$B=w_$P.prototype;return w_$B.__init__=function(w_$B,w_$h){var w_$l=this;this._stage=w_$B;var w_$A=this,w_$n=this._eventList;w_$h.oncontextmenu=function(w_$B){if(w_$P.enabled)return!1},w_$h.addEventListener("mousedown",function(w_$B){w_$P.enabled&&(w_$d.onIE||w_$B.preventDefault(),w_$n.push(w_$B),w_$A.mouseDownTime=w_$d.now())}),w_$h.addEventListener("mouseup",function(w_$B){w_$P.enabled&&(w_$B.preventDefault(),w_$n.push(w_$B),w_$A.mouseDownTime=-w_$d.now())},!0),w_$h.addEventListener("mousemove",function(w_$B){if(w_$P.enabled){w_$B.preventDefault();var w_$h=w_$d.now();if(w_$h-w_$A._lastMoveTimer<10)return;w_$A._lastMoveTimer=w_$h,w_$n.push(w_$B)}},!0),w_$h.addEventListener("mouseout",function(w_$B){w_$P.enabled&&w_$n.push(w_$B)}),w_$h.addEventListener("mouseover",function(w_$B){w_$P.enabled&&w_$n.push(w_$B)}),w_$h.addEventListener("touchstart",function(w_$B){w_$P.enabled&&(w_$n.push(w_$B),w_$P._isFirstTouch||w_$oB.isInputting||w_$B.preventDefault(),w_$A.mouseDownTime=w_$d.now())}),w_$h.addEventListener("touchend",function(w_$B){w_$P.enabled?(w_$P._isFirstTouch||w_$oB.isInputting||w_$B.preventDefault(),w_$P._isFirstTouch=!1,w_$n.push(w_$B),w_$A.mouseDownTime=-w_$d.now()):w_$l._curTouchID=NaN},!0),w_$h.addEventListener("touchmove",function(w_$B){w_$P.enabled&&(w_$B.preventDefault(),w_$n.push(w_$B))},!0),w_$h.addEventListener("touchcancel",function(w_$B){w_$P.enabled?(w_$B.preventDefault(),w_$n.push(w_$B)):w_$l._curTouchID=NaN},!0),w_$h.addEventListener("mousewheel",function(w_$B){w_$P.enabled&&w_$n.push(w_$B)}),w_$h.addEventListener("DOMMouseScroll",function(w_$B){w_$P.enabled&&w_$n.push(w_$B)})},w_$B.initEvent=function(w_$B,w_$h){var w_$l;this._event._stoped=!1,this._event.nativeEvent=w_$h||w_$B,this._target=null,this._point.setTo(w_$B.pageX||w_$B.clientX,w_$B.pageY||w_$B.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=w_$B.identifier||0,this._tTouchID=this._event.touchId,(w_$l=w_$V.I._event)._stoped=!1,w_$l.nativeEvent=this._event.nativeEvent,w_$l.touchId=this._event.touchId},w_$B.checkMouseWheel=function(w_$B){this._event.delta=w_$B.wheelDelta?.025*w_$B.wheelDelta:-w_$B.detail;for(var w_$h=w_$V.I.getLastOvers(),w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++){var w_$n=w_$h[w_$l];w_$n.event("mousewheel",this._event.setTo("mousewheel",w_$n,this._target))}},w_$B.onMouseMove=function(w_$B){w_$V.I.onMouseMove(w_$B,this._tTouchID)},w_$B.onMouseDown=function(w_$B){if(w_$oB.isInputting&&w_$v.stage.focus&&w_$v.stage.focus.focus&&!w_$v.stage.focus.contains(this._target)){var w_$h=w_$v.stage.focus._tf||w_$v.stage.focus,w_$l=w_$B._tf||w_$B;w_$l instanceof laya.display.Input&&w_$l.multiline==w_$h.multiline?w_$h._focusOut():w_$h.focus=!1}w_$V.I.onMouseDown(w_$B,this._tTouchID,this._isLeftMouse)},w_$B.onMouseUp=function(w_$B){w_$V.I.onMouseUp(w_$B,this._tTouchID,this._isLeftMouse)},w_$B.check=function(w_$B,w_$h,w_$l,w_$A){this._point.setTo(w_$h,w_$l),w_$B.fromParentPoint(this._point),w_$h=this._point.x,w_$l=this._point.y;var w_$n=w_$B.scrollRect;if(w_$n&&(this._rect.setTo(w_$n.x,w_$n.y,w_$n.width,w_$n.height),!this._rect.contains(w_$h,w_$l)))return!1;if(!this.disableMouseEvent){if(w_$B.hitTestPrior&&!w_$B.mouseThrough&&!this.hitTest(w_$B,w_$h,w_$l))return!1;for(var w_$s=w_$B._childs.length-1;-1<w_$s;w_$s--){var w_$X=w_$B._childs[w_$s];if(!w_$X.destroyed&&w_$X.mouseEnabled&&w_$X.visible&&this.check(w_$X,w_$h,w_$l,w_$A))return!0}}var w_$Z=!(!w_$B.hitTestPrior||w_$B.mouseThrough||this.disableMouseEvent)||this.hitTest(w_$B,w_$h,w_$l);return w_$Z?(this._target=w_$B,w_$A.call(this,w_$B)):w_$A===this.onMouseUp&&w_$B===this._stage&&(this._target=this._stage,w_$A.call(this,this._target)),w_$Z},w_$B.hitTest=function(w_$B,w_$h,w_$l){var w_$A=!1;if(w_$B.scrollRect&&(w_$h-=w_$B.scrollRect.x,w_$l-=w_$B.scrollRect.y),w_$B.hitArea instanceof laya.utils.HitArea)return w_$B.hitArea.isHit(w_$h,w_$l);if(0<w_$B.width&&0<w_$B.height||w_$B.mouseThrough||w_$B.hitArea)if(w_$B.mouseThrough)w_$A=w_$B.getGraphicBounds().contains(w_$h,w_$l);else{var w_$n=this._rect;w_$B.hitArea?w_$n=w_$B.hitArea:w_$n.setTo(0,0,w_$B.width,w_$B.height),w_$A=w_$n.contains(w_$h,w_$l)}return w_$A},w_$B.runEvent=function(){var w_$B=this._eventList.length;if(w_$B){this.mouseEventTime=w_$d.now();var w_$h,w_$l=0,w_$A=0,w_$n=0;try{for(;w_$l<w_$B;){var w_$s=this._eventList[w_$l];switch("mousemove"!==w_$s.type&&(this._prePoint.x=this._prePoint.y=-1e6),w_$s.type){case"mousedown":this._touchIDs[0]=this._id++,w_$P._isTouchRespond?w_$P._isTouchRespond=!1:(this._isLeftMouse=0===w_$s.button,this.initEvent(w_$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===w_$s.button,this.initEvent(w_$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-w_$s.clientX)+Math.abs(this._prePoint.y-w_$s.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=w_$s.clientX,this._prePoint.y=w_$s.clientY,this.initEvent(w_$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":w_$P._isTouchRespond=!0,this._isLeftMouse=!0;var w_$X=w_$s.changedTouches;for(w_$A=0,w_$n=w_$X.length;w_$A<w_$n;w_$A++)w_$h=w_$X[w_$A],(w_$P.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=w_$h.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[w_$h.identifier]=this._id++,this.initEvent(w_$h,w_$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":w_$P._isTouchRespond=!0,this._isLeftMouse=!0;var w_$Z=w_$s.changedTouches;for(w_$A=0,w_$n=w_$Z.length;w_$A<w_$n;w_$A++)if(w_$h=w_$Z[w_$A],w_$P.multiTouchEnabled||w_$h.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(w_$h,w_$s);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var w_$t=w_$s.changedTouches;for(w_$A=0,w_$n=w_$t.length;w_$A<w_$n;w_$A++)w_$h=w_$t[w_$A],(w_$P.multiTouchEnabled||w_$h.identifier==this._curTouchID)&&(this.initEvent(w_$h,w_$s),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(w_$s);break;case"mouseout":w_$V.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}w_$l++}}catch(w_$B){throw this._eventList.length=0,w_$B}this._eventList.length=0}},w_$P.enabled=!0,w_$P.multiTouchEnabled=!0,w_$P._isTouchRespond=!1,w_$P._isFirstTouch=!0,w_$t(w_$P,["instance",function(){return this.instance=new w_$P}]),w_$P}()),w_$V=function(){function w_$i(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new w_$s}w_$G(w_$i,"laya.events.TouchManager");var w_$B=w_$i.prototype;return w_$B._clearTempArrs=function(){w_$i._oldArr.length=0,w_$i._newArr.length=0,w_$i._tEleArr.length=0},w_$B.getTouchFromArr=function(w_$B,w_$h){var w_$l,w_$A,w_$n=0;for(w_$l=w_$h.length,w_$n=0;w_$n<w_$l;w_$n++)if((w_$A=w_$h[w_$n]).id==w_$B)return w_$A;return null},w_$B.removeTouchFromArr=function(w_$B,w_$h){var w_$l=0;for(w_$l=w_$h.length-1;0<=w_$l;w_$l--)w_$h[w_$l].id==w_$B&&w_$h.splice(w_$l,1)},w_$B.createTouchO=function(w_$B,w_$h){var w_$l;return(w_$l=w_$K.getItem("TouchData")||{}).id=w_$h,w_$l.tar=w_$B,w_$l},w_$B.onMouseDown=function(w_$B,w_$h,w_$l){var w_$A,w_$n,w_$s,w_$X;(void 0===w_$l&&(w_$l=!1),this.enable)&&(w_$A=this.getTouchFromArr(w_$h,this.preOvers),w_$s=this.getEles(w_$B,null,w_$i._tEleArr),w_$A?w_$A.tar=w_$B:(w_$n=this.createTouchO(w_$B,w_$h),this.preOvers.push(w_$n)),w_$d.onMobile&&this.sendEvents(w_$s,"mouseover",w_$h),w_$X=w_$l?this.preDowns:this.preRightDowns,(w_$A=this.getTouchFromArr(w_$h,w_$X))?w_$A.tar=w_$B:(w_$n=this.createTouchO(w_$B,w_$h),w_$X.push(w_$n)),this.sendEvents(w_$s,w_$l?"mousedown":"rightmousedown",w_$h),this._clearTempArrs())},w_$B.sendEvents=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=0);var w_$A,w_$n,w_$s,w_$X=0;for(w_$A=w_$B.length,this._event._stoped=!1,w_$n=w_$B[0],w_$X=0;w_$X<w_$A;w_$X++){if((w_$s=w_$B[w_$X]).destroyed)return;if(w_$s.event(w_$h,this._event.setTo(w_$h,w_$s,w_$n)),this._event._stoped)break}},w_$B.getEles=function(w_$B,w_$h,w_$l){for(w_$l?w_$l.length=0:w_$l=[];w_$B&&w_$B!=w_$h;)w_$l.push(w_$B),w_$B=w_$B.parent;return w_$l},w_$B.checkMouseOutAndOverOfMove=function(w_$B,w_$h,w_$l){if(void 0===w_$l&&(w_$l=0),w_$h!=w_$B){var w_$A,w_$n,w_$s=0,w_$X=0;if(w_$h.contains(w_$B))w_$n=this.getEles(w_$B,w_$h,w_$i._tEleArr),this.sendEvents(w_$n,"mouseover",w_$l);else if(w_$B.contains(w_$h))w_$n=this.getEles(w_$h,w_$B,w_$i._tEleArr),this.sendEvents(w_$n,"mouseout",w_$l);else{var w_$Z,w_$t;(w_$n=w_$i._tEleArr).length=0,w_$Z=this.getEles(w_$h,null,w_$i._oldArr),w_$t=this.getEles(w_$B,null,w_$i._newArr),w_$X=w_$Z.length;var w_$P=0;for(w_$s=0;w_$s<w_$X;w_$s++){if(w_$A=w_$Z[w_$s],0<=(w_$P=w_$t.indexOf(w_$A))){w_$t.splice(w_$P,w_$t.length-w_$P);break}w_$n.push(w_$A)}0<w_$n.length&&this.sendEvents(w_$n,"mouseout",w_$l),0<w_$t.length&&this.sendEvents(w_$t,"mouseover",w_$l)}}},w_$B.onMouseMove=function(w_$B,w_$h){var w_$l,w_$A;this.enable&&((w_$l=this.getTouchFromArr(w_$h,this.preOvers))?(this.checkMouseOutAndOverOfMove(w_$B,w_$l.tar),w_$l.tar=w_$B,w_$A=this.getEles(w_$B,null,w_$i._tEleArr)):(w_$A=this.getEles(w_$B,null,w_$i._tEleArr),this.sendEvents(w_$A,"mouseover",w_$h),this.preOvers.push(this.createTouchO(w_$B,w_$h))),this.sendEvents(w_$A,"mousemove",w_$h),this._clearTempArrs())},w_$B.getLastOvers=function(){return(w_$i._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,w_$i._tEleArr):(w_$i._tEleArr.push(w_$v.stage),w_$i._tEleArr)},w_$B.stageMouseOut=function(){var w_$B;w_$B=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(w_$B,"mouseout",0)},w_$B.onMouseUp=function(w_$B,w_$h,w_$l){if(void 0===w_$l&&(w_$l=!1),this.enable){var w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P=0,w_$G=0,w_$T=w_$d.onMobile;if(w_$n=this.getEles(w_$B,null,w_$i._tEleArr),this.sendEvents(w_$n,w_$l?"mouseup":"rightmouseup",w_$h),w_$t=w_$l?this.preDowns:this.preRightDowns,w_$A=this.getTouchFromArr(w_$h,w_$t)){var w_$b,w_$Q=w_$d.now();if(w_$b=w_$Q-this._lastClickTime<300,this._lastClickTime=w_$Q,w_$B==w_$A.tar)w_$Z=w_$n;else for(w_$s=this.getEles(w_$A.tar,null,w_$i._oldArr),(w_$Z=w_$i._newArr).length=0,w_$G=w_$s.length,w_$P=0;w_$P<w_$G;w_$P++)w_$X=w_$s[w_$P],0<=w_$n.indexOf(w_$X)&&w_$Z.push(w_$X);0<w_$Z.length&&this.sendEvents(w_$Z,w_$l?"click":"rightclick",w_$h),w_$l&&w_$b&&this.sendEvents(w_$Z,"doubleclick",w_$h),this.removeTouchFromArr(w_$h,w_$t),w_$A.tar=null,w_$K.recover("TouchData",w_$A)}else;(w_$A=this.getTouchFromArr(w_$h,this.preOvers))&&w_$T&&((w_$Z=this.getEles(w_$A.tar,null,w_$Z))&&0<w_$Z.length&&this.sendEvents(w_$Z,"mouseout",w_$h),this.removeTouchFromArr(w_$h,this.preOvers),w_$A.tar=null,w_$K.recover("TouchData",w_$A)),this._clearTempArrs()}},w_$i._oldArr=[],w_$i._newArr=[],w_$i._tEleArr=[],w_$t(w_$i,["I",function(){return this.I=new w_$i}]),w_$i}(),w_$J=function(){function w_$B(){this._action=null}w_$G(w_$B,"laya.filters.Filter");var w_$h=w_$B.prototype;return w_$v.imps(w_$h,{"laya.filters.IFilter":!0}),w_$h.callNative=function(w_$B){},w_$i(0,w_$h,"type",function(){return-1}),w_$i(0,w_$h,"action",function(){return this._action}),w_$B.BLUR=16,w_$B.COLOR=32,w_$B.GLOW=8,w_$B._filterStart=null,w_$B._filterEnd=null,w_$B._EndTarget=null,w_$B._recycleScope=null,w_$B._filter=null,w_$B._useSrc=null,w_$B._endSrc=null,w_$B._useOut=null,w_$B._endOut=null,w_$B}(),w_$y=function(){function w_$B(){this.data=null}w_$G(w_$B,"laya.filters.ColorFilterAction");var w_$h=w_$B.prototype;return w_$v.imps(w_$h,{"laya.filters.IFilterAction":!0}),w_$h.apply=function(w_$B){var w_$h=w_$B.ctx.ctx,w_$l=w_$B.ctx.ctx.canvas;if(0==w_$l.width||0==w_$l.height)return w_$l;for(var w_$A,w_$n=w_$h.getImageData(0,0,w_$l.width,w_$l.height),w_$s=w_$n.data,w_$X=0,w_$Z=w_$s.length;w_$X<w_$Z;w_$X+=4)w_$A=this.getColor(w_$s[w_$X],w_$s[w_$X+1],w_$s[w_$X+2],w_$s[w_$X+3]),0!=w_$s[w_$X+3]&&(w_$s[w_$X]=w_$A[0],w_$s[w_$X+1]=w_$A[1],w_$s[w_$X+2]=w_$A[2],w_$s[w_$X+3]=w_$A[3]);return w_$h.putImageData(w_$n,0,0),w_$B},w_$h.getColor=function(w_$B,w_$h,w_$l,w_$A){var w_$n=[];if(this.data._mat&&this.data._alpha){var w_$s=this.data._mat,w_$X=this.data._alpha;w_$n[0]=w_$s[0]*w_$B+w_$s[1]*w_$h+w_$s[2]*w_$l+w_$s[3]*w_$A+w_$X[0],w_$n[1]=w_$s[4]*w_$B+w_$s[5]*w_$h+w_$s[6]*w_$l+w_$s[7]*w_$A+w_$X[1],w_$n[2]=w_$s[8]*w_$B+w_$s[9]*w_$h+w_$s[10]*w_$l+w_$s[11]*w_$A+w_$X[2],w_$n[3]=w_$s[12]*w_$B+w_$s[13]*w_$h+w_$s[14]*w_$l+w_$s[15]*w_$A+w_$X[3]}return w_$n},w_$B}(),w_$C=(function(){function w_$B(){}w_$G(w_$B,"laya.maths.Arith"),w_$B.formatR=function(w_$B){return w_$B>Math.PI&&(w_$B-=2*Math.PI),w_$B<-Math.PI&&(w_$B+=2*Math.PI),w_$B},w_$B.isPOT=function(w_$B,w_$h){return 0<w_$B&&0==(w_$B&w_$B-1)&&0<w_$h&&0==(w_$h&w_$h-1)},w_$B.setMatToArray=function(w_$B,w_$h){w_$B.a,w_$B.b,w_$B.c,w_$B.d,w_$B.tx,w_$B.ty,w_$h[0]=w_$B.a,w_$h[1]=w_$B.b,w_$h[4]=w_$B.c,w_$h[5]=w_$B.d,w_$h[12]=w_$B.tx,w_$h[13]=w_$B.ty}}(),function(){function w_$B(){this._controlPoints=[new w_$U,new w_$U,new w_$U],this._calFun=this.getPoint2}w_$G(w_$B,"laya.maths.Bezier");var w_$h=w_$B.prototype;return w_$h._switchPoint=function(w_$B,w_$h){var w_$l=this._controlPoints.shift();w_$l.setTo(w_$B,w_$h),this._controlPoints.push(w_$l)},w_$h.getPoint2=function(w_$B,w_$h){var w_$l=this._controlPoints[0],w_$A=this._controlPoints[1],w_$n=this._controlPoints[2],w_$s=Math.pow(1-w_$B,2)*w_$l.x+2*w_$B*(1-w_$B)*w_$A.x+Math.pow(w_$B,2)*w_$n.x,w_$X=Math.pow(1-w_$B,2)*w_$l.y+2*w_$B*(1-w_$B)*w_$A.y+Math.pow(w_$B,2)*w_$n.y;w_$h.push(w_$s,w_$X)},w_$h.getPoint3=function(w_$B,w_$h){var w_$l=this._controlPoints[0],w_$A=this._controlPoints[1],w_$n=this._controlPoints[2],w_$s=this._controlPoints[3],w_$X=Math.pow(1-w_$B,3)*w_$l.x+3*w_$A.x*w_$B*(1-w_$B)*(1-w_$B)+3*w_$n.x*w_$B*w_$B*(1-w_$B)+w_$s.x*Math.pow(w_$B,3),w_$Z=Math.pow(1-w_$B,3)*w_$l.y+3*w_$A.y*w_$B*(1-w_$B)*(1-w_$B)+3*w_$n.y*w_$B*w_$B*(1-w_$B)+w_$s.y*Math.pow(w_$B,3);w_$h.push(w_$X,w_$Z)},w_$h.insertPoints=function(w_$B,w_$h){var w_$l,w_$A=NaN;for(w_$l=1/(w_$B=0<w_$B?w_$B:5),w_$A=0;w_$A<=1;w_$A+=w_$l)this._calFun(w_$A,w_$h)},w_$h.getBezierPoints=function(w_$B,w_$h,w_$l){void 0===w_$h&&(w_$h=5),void 0===w_$l&&(w_$l=2);var w_$A,w_$n,w_$s=0;if((w_$A=w_$B.length)<2*(w_$l+1))return[];switch(w_$n=[],w_$l){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=w_$l;)this._controlPoints.push(new w_$U);for(w_$s=0;w_$s<2*w_$l;w_$s+=2)this._switchPoint(w_$B[w_$s],w_$B[w_$s+1]);for(w_$s=2*w_$l;w_$s<w_$A;w_$s+=2)this._switchPoint(w_$B[w_$s],w_$B[w_$s+1]),w_$s/2%w_$l==0&&this.insertPoints(w_$h,w_$n);return w_$n},w_$t(w_$B,["I",function(){return this.I=new w_$B}]),w_$B}()),w_$o=function(){function w_$P(){}return w_$G(w_$P,"laya.maths.GrahamScan"),w_$P.multiply=function(w_$B,w_$h,w_$l){return(w_$B.x-w_$l.x)*(w_$h.y-w_$l.y)-(w_$h.x-w_$l.x)*(w_$B.y-w_$l.y)},w_$P.dis=function(w_$B,w_$h){return(w_$B.x-w_$h.x)*(w_$B.x-w_$h.x)+(w_$B.y-w_$h.y)*(w_$B.y-w_$h.y)},w_$P._getPoints=function(w_$B,w_$h,w_$l){for(void 0===w_$h&&(w_$h=!1),w_$P._mPointList||(w_$P._mPointList=[]);w_$P._mPointList.length<w_$B;)w_$P._mPointList.push(new w_$U);return w_$l||(w_$l=[]),w_$l.length=0,w_$h?w_$P.getFrom(w_$l,w_$P._mPointList,w_$B):w_$P.getFromR(w_$l,w_$P._mPointList,w_$B),w_$l},w_$P.getFrom=function(w_$B,w_$h,w_$l){var w_$A=0;for(w_$A=0;w_$A<w_$l;w_$A++)w_$B.push(w_$h[w_$A]);return w_$B},w_$P.getFromR=function(w_$B,w_$h,w_$l){var w_$A=0;for(w_$A=0;w_$A<w_$l;w_$A++)w_$B.push(w_$h.pop());return w_$B},w_$P.pListToPointList=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!1);var w_$l=0,w_$A=w_$B.length/2,w_$n=w_$P._getPoints(w_$A,w_$h,w_$P._tempPointList);for(w_$l=0;w_$l<w_$A;w_$l++)w_$n[w_$l].setTo(w_$B[w_$l+w_$l],w_$B[w_$l+w_$l+1]);return w_$n},w_$P.pointListToPlist=function(w_$B){var w_$h,w_$l=0,w_$A=w_$B.length,w_$n=w_$P._temPList;for(w_$l=w_$n.length=0;w_$l<w_$A;w_$l++)w_$h=w_$B[w_$l],w_$n.push(w_$h.x,w_$h.y);return w_$n},w_$P.scanPList=function(w_$B){return w_$e.copyArray(w_$B,w_$P.pointListToPlist(w_$P.scan(w_$P.pListToPointList(w_$B,!0))))},w_$P.scan=function(w_$B){var w_$h,w_$l,w_$A,w_$n=0,w_$s=0,w_$X=0,w_$Z=w_$B.length,w_$t={};for((w_$l=w_$P._temArr).length=0,w_$n=(w_$Z=w_$B.length)-1;0<=w_$n;w_$n--)w_$A=(w_$h=w_$B[w_$n]).x+"_"+w_$h.y,w_$t.hasOwnProperty(w_$A)||(w_$t[w_$A]=!0,w_$l.push(w_$h));for(w_$Z=w_$l.length,w_$e.copyArray(w_$B,w_$l),w_$n=1;w_$n<w_$Z;w_$n++)(w_$B[w_$n].y<w_$B[w_$X].y||w_$B[w_$n].y==w_$B[w_$X].y&&w_$B[w_$n].x<w_$B[w_$X].x)&&(w_$X=w_$n);for(w_$h=w_$B[0],w_$B[0]=w_$B[w_$X],w_$B[w_$X]=w_$h,w_$n=1;w_$n<w_$Z-1;w_$n++){for(w_$s=(w_$X=w_$n)+1;w_$s<w_$Z;w_$s++)(0<w_$P.multiply(w_$B[w_$s],w_$B[w_$X],w_$B[0])||0==w_$P.multiply(w_$B[w_$s],w_$B[w_$X],w_$B[0])&&w_$P.dis(w_$B[0],w_$B[w_$s])<w_$P.dis(w_$B[0],w_$B[w_$X]))&&(w_$X=w_$s);w_$h=w_$B[w_$n],w_$B[w_$n]=w_$B[w_$X],w_$B[w_$X]=w_$h}if((w_$l=w_$P._temArr).length=0,w_$B.length<3)return w_$e.copyArray(w_$l,w_$B);for(w_$l.push(w_$B[0],w_$B[1],w_$B[2]),w_$n=3;w_$n<w_$Z;w_$n++){for(;2<=w_$l.length&&0<=w_$P.multiply(w_$B[w_$n],w_$l[w_$l.length-1],w_$l[w_$l.length-2]);)w_$l.pop();w_$B[w_$n]&&w_$l.push(w_$B[w_$n])}return w_$l},w_$P._mPointList=null,w_$P._tempPointList=[],w_$P._temPList=[],w_$P._temArr=[],w_$P}(),w_$u=function(){function w_$n(){}return w_$G(w_$n,"laya.maths.MathUtil"),w_$n.subtractVector3=function(w_$B,w_$h,w_$l){w_$l[0]=w_$B[0]-w_$h[0],w_$l[1]=w_$B[1]-w_$h[1],w_$l[2]=w_$B[2]-w_$h[2]},w_$n.lerp=function(w_$B,w_$h,w_$l){return w_$B*(1-w_$l)+w_$h*w_$l},w_$n.scaleVector3=function(w_$B,w_$h,w_$l){w_$l[0]=w_$B[0]*w_$h,w_$l[1]=w_$B[1]*w_$h,w_$l[2]=w_$B[2]*w_$h},w_$n.lerpVector3=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B[0],w_$s=w_$B[1],w_$X=w_$B[2];w_$A[0]=w_$n+w_$l*(w_$h[0]-w_$n),w_$A[1]=w_$s+w_$l*(w_$h[1]-w_$s),w_$A[2]=w_$X+w_$l*(w_$h[2]-w_$X)},w_$n.lerpVector4=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B[0],w_$s=w_$B[1],w_$X=w_$B[2],w_$Z=w_$B[3];w_$A[0]=w_$n+w_$l*(w_$h[0]-w_$n),w_$A[1]=w_$s+w_$l*(w_$h[1]-w_$s),w_$A[2]=w_$X+w_$l*(w_$h[2]-w_$X),w_$A[3]=w_$Z+w_$l*(w_$h[3]-w_$Z)},w_$n.slerpQuaternionArray=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){var w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b=w_$B[w_$h+0],w_$Q=w_$B[w_$h+1],w_$i=w_$B[w_$h+2],w_$$=w_$B[w_$h+3],w_$V=w_$l[w_$A+0],w_$J=w_$l[w_$A+1],w_$H=w_$l[w_$A+2],w_$y=w_$l[w_$A+3];return(w_$t=w_$b*w_$V+w_$Q*w_$J+w_$i*w_$H+w_$$*w_$y)<0&&(w_$t=-w_$t,w_$V=-w_$V,w_$J=-w_$J,w_$H=-w_$H,w_$y=-w_$y),w_$T=1e-6<1-w_$t?(w_$Z=Math.acos(w_$t),w_$P=Math.sin(w_$Z),w_$G=Math.sin((1-w_$n)*w_$Z)/w_$P,Math.sin(w_$n*w_$Z)/w_$P):(w_$G=1-w_$n,w_$n),w_$s[w_$X+0]=w_$G*w_$b+w_$T*w_$V,w_$s[w_$X+1]=w_$G*w_$Q+w_$T*w_$J,w_$s[w_$X+2]=w_$G*w_$i+w_$T*w_$H,w_$s[w_$X+3]=w_$G*w_$$+w_$T*w_$y,w_$s},w_$n.getRotation=function(w_$B,w_$h,w_$l,w_$A){return Math.atan2(w_$A-w_$h,w_$l-w_$B)/Math.PI*180},w_$n.sortBigFirst=function(w_$B,w_$h){return w_$B==w_$h?0:w_$B<w_$h?1:-1},w_$n.sortSmallFirst=function(w_$B,w_$h){return w_$B==w_$h?0:w_$B<w_$h?-1:1},w_$n.sortNumBigFirst=function(w_$B,w_$h){return parseFloat(w_$h)-parseFloat(w_$B)},w_$n.sortNumSmallFirst=function(w_$B,w_$h){return parseFloat(w_$B)-parseFloat(w_$h)},w_$n.sortByKey=function(w_$l,w_$B,w_$h){var w_$A;return void 0===w_$B&&(w_$B=!1),void 0===w_$h&&(w_$h=!0),w_$A=w_$B?w_$h?w_$n.sortNumBigFirst:w_$n.sortBigFirst:w_$h?w_$n.sortNumSmallFirst:w_$n.sortSmallFirst,function(w_$B,w_$h){return w_$A(w_$B[w_$l],w_$h[w_$l])}},w_$n}(),w_$N=function(){function w_$l(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this.inPool=!1,this.bTransform=!1,void 0===w_$B&&(w_$B=1),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=1),void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=0),this.a=w_$B,this.b=w_$h,this.c=w_$l,this.d=w_$A,this.tx=w_$n,this.ty=w_$s,this._checkTransform()}w_$G(w_$l,"laya.maths.Matrix");var w_$B=w_$l.prototype;return w_$B.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},w_$B._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},w_$B.setTranslate=function(w_$B,w_$h){return this.tx=w_$B,this.ty=w_$h,this},w_$B.translate=function(w_$B,w_$h){return this.tx+=w_$B,this.ty+=w_$h,this},w_$B.scale=function(w_$B,w_$h){this.a*=w_$B,this.d*=w_$h,this.c*=w_$B,this.b*=w_$h,this.tx*=w_$B,this.ty*=w_$h,this.bTransform=!0},w_$B.rotate=function(w_$B){var w_$h=Math.cos(w_$B),w_$l=Math.sin(w_$B),w_$A=this.a,w_$n=this.c,w_$s=this.tx;this.a=w_$A*w_$h-this.b*w_$l,this.b=w_$A*w_$l+this.b*w_$h,this.c=w_$n*w_$h-this.d*w_$l,this.d=w_$n*w_$l+this.d*w_$h,this.tx=w_$s*w_$h-this.ty*w_$l,this.ty=w_$s*w_$l+this.ty*w_$h,this.bTransform=!0},w_$B.skew=function(w_$B,w_$h){var w_$l=Math.tan(w_$B),w_$A=Math.tan(w_$h),w_$n=this.a,w_$s=this.b;return this.a+=w_$A*this.c,this.b+=w_$A*this.d,this.c+=w_$l*w_$n,this.d+=w_$l*w_$s,this},w_$B.invertTransformPoint=function(w_$B){var w_$h=this.a,w_$l=this.b,w_$A=this.c,w_$n=this.d,w_$s=this.tx,w_$X=w_$h*w_$n-w_$l*w_$A,w_$Z=w_$n/w_$X,w_$t=-w_$l/w_$X,w_$P=-w_$A/w_$X,w_$G=w_$h/w_$X,w_$T=(w_$A*this.ty-w_$n*w_$s)/w_$X,w_$b=-(w_$h*this.ty-w_$l*w_$s)/w_$X;return w_$B.setTo(w_$Z*w_$B.x+w_$P*w_$B.y+w_$T,w_$t*w_$B.x+w_$G*w_$B.y+w_$b)},w_$B.transformPoint=function(w_$B){return w_$B.setTo(this.a*w_$B.x+this.c*w_$B.y+this.tx,this.b*w_$B.x+this.d*w_$B.y+this.ty)},w_$B.transformPointN=function(w_$B){return w_$B.setTo(this.a*w_$B.x+this.c*w_$B.y,this.b*w_$B.x+this.d*w_$B.y)},w_$B.transformPointArray=function(w_$B,w_$h){for(var w_$l=w_$B.length,w_$A=0;w_$A<w_$l;w_$A+=2){var w_$n=w_$B[w_$A],w_$s=w_$B[w_$A+1];w_$h[w_$A]=this.a*w_$n+this.c*w_$s+this.tx,w_$h[w_$A+1]=this.b*w_$n+this.d*w_$s+this.ty}return w_$h},w_$B.transformPointArrayScale=function(w_$B,w_$h){for(var w_$l=w_$B.length,w_$A=0;w_$A<w_$l;w_$A+=2){var w_$n=w_$B[w_$A],w_$s=w_$B[w_$A+1];w_$h[w_$A]=this.a*w_$n+this.c*w_$s,w_$h[w_$A+1]=this.b*w_$n+this.d*w_$s}return w_$h},w_$B.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},w_$B.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},w_$B.invert=function(){var w_$B=this.a,w_$h=this.b,w_$l=this.c,w_$A=this.d,w_$n=this.tx,w_$s=w_$B*w_$A-w_$h*w_$l;return this.a=w_$A/w_$s,this.b=-w_$h/w_$s,this.c=-w_$l/w_$s,this.d=w_$B/w_$s,this.tx=(w_$l*this.ty-w_$A*w_$n)/w_$s,this.ty=-(w_$B*this.ty-w_$h*w_$n)/w_$s,this},w_$B.setTo=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){return this.a=w_$B,this.b=w_$h,this.c=w_$l,this.d=w_$A,this.tx=w_$n,this.ty=w_$s,this},w_$B.concat=function(w_$B){var w_$h=this.a,w_$l=this.c,w_$A=this.tx;return this.a=w_$h*w_$B.a+this.b*w_$B.c,this.b=w_$h*w_$B.b+this.b*w_$B.d,this.c=w_$l*w_$B.a+this.d*w_$B.c,this.d=w_$l*w_$B.b+this.d*w_$B.d,this.tx=w_$A*w_$B.a+this.ty*w_$B.c+w_$B.tx,this.ty=w_$A*w_$B.b+this.ty*w_$B.d+w_$B.ty,this},w_$B.scaleEx=function(w_$B,w_$h){var w_$l=this.a,w_$A=this.b,w_$n=this.c,w_$s=this.d;0!==w_$A||0!==w_$n?(this.a=w_$B*w_$l,this.b=w_$B*w_$A,this.c=w_$h*w_$n):(this.a=w_$B*w_$l,this.b=0*w_$s,this.c=0*w_$l),this.d=w_$h*w_$s,this.bTransform=!0},w_$B.rotateEx=function(w_$B){var w_$h=Math.cos(w_$B),w_$l=Math.sin(w_$B),w_$A=this.a,w_$n=this.b,w_$s=this.c,w_$X=this.d;0!==w_$n||0!==w_$s?(this.a=w_$h*w_$A+w_$l*w_$s,this.b=w_$h*w_$n+w_$l*w_$X,this.c=-w_$l*w_$A+w_$h*w_$s,this.d=-w_$l*w_$n+w_$h*w_$X):(this.a=w_$h*w_$A,this.b=w_$l*w_$X,this.c=-w_$l*w_$A,this.d=w_$h*w_$X),this.bTransform=!0},w_$B.clone=function(){var w_$B=w_$l.create();return w_$B.a=this.a,w_$B.b=this.b,w_$B.c=this.c,w_$B.d=this.d,w_$B.tx=this.tx,w_$B.ty=this.ty,w_$B.bTransform=this.bTransform,w_$B},w_$B.copyTo=function(w_$B){return w_$B.a=this.a,w_$B.b=this.b,w_$B.c=this.c,w_$B.d=this.d,w_$B.tx=this.tx,w_$B.ty=this.ty,w_$B.bTransform=this.bTransform,w_$B},w_$B.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},w_$B.destroy=function(){if(!this.inPool){var w_$B=w_$l._cache;this.inPool=!0,w_$B._length||(w_$B._length=0),(w_$B[w_$B._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},w_$l.mul=function(w_$B,w_$h,w_$l){var w_$A=w_$B.a,w_$n=w_$B.b,w_$s=w_$B.c,w_$X=w_$B.d,w_$Z=w_$B.tx,w_$t=w_$B.ty,w_$P=w_$h.a,w_$G=w_$h.b,w_$T=w_$h.c,w_$b=w_$h.d,w_$Q=w_$h.tx,w_$i=w_$h.ty;return 0!==w_$G||0!==w_$T?(w_$l.a=w_$A*w_$P+w_$n*w_$T,w_$l.b=w_$A*w_$G+w_$n*w_$b,w_$l.c=w_$s*w_$P+w_$X*w_$T,w_$l.d=w_$s*w_$G+w_$X*w_$b,w_$l.tx=w_$P*w_$Z+w_$T*w_$t+w_$Q,w_$l.ty=w_$G*w_$Z+w_$b*w_$t+w_$i):(w_$l.a=w_$A*w_$P,w_$l.b=w_$n*w_$b,w_$l.c=w_$s*w_$P,w_$l.d=w_$X*w_$b,w_$l.tx=w_$P*w_$Z+w_$Q,w_$l.ty=w_$b*w_$t+w_$i),w_$l},w_$l.mul16=function(w_$B,w_$h,w_$l){var w_$A=w_$B.a,w_$n=w_$B.b,w_$s=w_$B.c,w_$X=w_$B.d,w_$Z=w_$B.tx,w_$t=w_$B.ty,w_$P=w_$h.a,w_$G=w_$h.b,w_$T=w_$h.c,w_$b=w_$h.d,w_$Q=w_$h.tx,w_$i=w_$h.ty;return 0!==w_$G||0!==w_$T?(w_$l[0]=w_$A*w_$P+w_$n*w_$T,w_$l[1]=w_$A*w_$G+w_$n*w_$b,w_$l[4]=w_$s*w_$P+w_$X*w_$T,w_$l[5]=w_$s*w_$G+w_$X*w_$b,w_$l[12]=w_$P*w_$Z+w_$T*w_$t+w_$Q,w_$l[13]=w_$G*w_$Z+w_$b*w_$t+w_$i):(w_$l[0]=w_$A*w_$P,w_$l[1]=w_$n*w_$b,w_$l[4]=w_$s*w_$P,w_$l[5]=w_$X*w_$b,w_$l[12]=w_$P*w_$Z+w_$Q,w_$l[13]=w_$b*w_$t+w_$i),w_$l},w_$l.mulPre=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){var w_$t=w_$B.a,w_$P=w_$B.b,w_$G=w_$B.c,w_$T=w_$B.d,w_$b=w_$B.tx,w_$Q=w_$B.ty;return 0!==w_$l||0!==w_$A?(w_$Z.a=w_$t*w_$h+w_$P*w_$A,w_$Z.b=w_$t*w_$l+w_$P*w_$n,w_$Z.c=w_$G*w_$h+w_$T*w_$A,w_$Z.d=w_$G*w_$l+w_$T*w_$n,w_$Z.tx=w_$h*w_$b+w_$A*w_$Q+w_$s,w_$Z.ty=w_$l*w_$b+w_$n*w_$Q+w_$X):(w_$Z.a=w_$t*w_$h,w_$Z.b=w_$P*w_$n,w_$Z.c=w_$G*w_$h,w_$Z.d=w_$T*w_$n,w_$Z.tx=w_$h*w_$b+w_$s,w_$Z.ty=w_$n*w_$Q+w_$X),w_$Z},w_$l.mulPos=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){var w_$t=w_$B.a,w_$P=w_$B.b,w_$G=w_$B.c,w_$T=w_$B.d,w_$b=w_$B.tx,w_$Q=w_$B.ty;return 0!==w_$P||0!==w_$G?(w_$Z.a=w_$h*w_$t+w_$l*w_$G,w_$Z.b=w_$h*w_$P+w_$l*w_$T,w_$Z.c=w_$A*w_$t+w_$n*w_$G,w_$Z.d=w_$A*w_$P+w_$n*w_$T,w_$Z.tx=w_$t*w_$s+w_$G*w_$X+w_$b,w_$Z.ty=w_$P*w_$s+w_$T*w_$X+w_$Q):(w_$Z.a=w_$h*w_$t,w_$Z.b=w_$l*w_$T,w_$Z.c=w_$A*w_$t,w_$Z.d=w_$n*w_$T,w_$Z.tx=w_$t*w_$s+w_$b,w_$Z.ty=w_$T*w_$X+w_$Q),w_$Z},w_$l.preMul=function(w_$B,w_$h,w_$l){var w_$A=w_$B.a,w_$n=w_$B.b,w_$s=w_$B.c,w_$X=w_$B.d,w_$Z=w_$h.a,w_$t=w_$h.b,w_$P=w_$h.c,w_$G=w_$h.d,w_$T=w_$h.tx,w_$b=w_$h.ty;return w_$l.a=w_$Z*w_$A,w_$l.b=w_$l.c=0,w_$l.d=w_$G*w_$X,w_$l.tx=w_$T*w_$A+w_$B.tx,w_$l.ty=w_$b*w_$X+w_$B.ty,0===w_$t&&0===w_$P&&0===w_$n&&0===w_$s||(w_$l.a+=w_$t*w_$s,w_$l.d+=w_$P*w_$n,w_$l.b+=w_$Z*w_$n+w_$t*w_$X,w_$l.c+=w_$P*w_$A+w_$G*w_$s,w_$l.tx+=w_$b*w_$s,w_$l.ty+=w_$T*w_$n),w_$l},w_$l.preMulXY=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.a,w_$s=w_$B.b,w_$X=w_$B.c,w_$Z=w_$B.d;return w_$A.a=w_$n,w_$A.b=w_$s,w_$A.c=w_$X,w_$A.d=w_$Z,w_$A.tx=w_$h*w_$n+w_$B.tx+w_$l*w_$X,w_$A.ty=w_$l*w_$Z+w_$B.ty+w_$h*w_$s,w_$A},w_$l.create=function(){var w_$B=w_$l._cache,w_$h=w_$B._length?w_$B[--w_$B._length]:new w_$l;return w_$h.inPool=!1,w_$h},w_$l.EMPTY=new w_$l,w_$l.TEMP=new w_$l,w_$l._cache=[],w_$l}(),w_$U=function(){function w_$B(w_$B,w_$h){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),this.x=w_$B,this.y=w_$h}w_$G(w_$B,"laya.maths.Point");var w_$h=w_$B.prototype;return w_$h.setTo=function(w_$B,w_$h){return this.x=w_$B,this.y=w_$h,this},w_$h.distance=function(w_$B,w_$h){return Math.sqrt((this.x-w_$B)*(this.x-w_$B)+(this.y-w_$h)*(this.y-w_$h))},w_$h.toString=function(){return this.x+","+this.y},w_$h.normalize=function(){var w_$B=Math.sqrt(this.x*this.x+this.y*this.y);if(0<w_$B){var w_$h=1/w_$B;this.x*=w_$h,this.y*=w_$h}},w_$B.TEMP=new w_$B,w_$B.EMPTY=new w_$B,w_$B}(),w_$x=function(){function w_$P(w_$B,w_$h,w_$l,w_$A){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0),this.x=w_$B,this.y=w_$h,this.width=w_$l,this.height=w_$A}w_$G(w_$P,"laya.maths.Rectangle");var w_$B=w_$P.prototype;return w_$B.setTo=function(w_$B,w_$h,w_$l,w_$A){return this.x=w_$B,this.y=w_$h,this.width=w_$l,this.height=w_$A,this},w_$B.copyFrom=function(w_$B){return this.x=w_$B.x,this.y=w_$B.y,this.width=w_$B.width,this.height=w_$B.height,this},w_$B.contains=function(w_$B,w_$h){return!(this.width<=0||this.height<=0)&&(w_$B>=this.x&&w_$B<this.right&&w_$h>=this.y&&w_$h<this.bottom)},w_$B.intersects=function(w_$B){return!(w_$B.x>this.x+this.width||w_$B.x+w_$B.width<this.x||w_$B.y>this.y+this.height||w_$B.y+w_$B.height<this.y)},w_$B.intersection=function(w_$B,w_$h){return this.intersects(w_$B)?(w_$h||(w_$h=new w_$P),w_$h.x=Math.max(this.x,w_$B.x),w_$h.y=Math.max(this.y,w_$B.y),w_$h.width=Math.min(this.right,w_$B.right)-w_$h.x,w_$h.height=Math.min(this.bottom,w_$B.bottom)-w_$h.y,w_$h):null},w_$B.union=function(w_$B,w_$h){return w_$h||(w_$h=new w_$P),this.clone(w_$h),w_$B.width<=0||w_$B.height<=0?w_$h:(w_$h.addPoint(w_$B.x,w_$B.y),w_$h.addPoint(w_$B.right,w_$B.bottom),this)},w_$B.clone=function(w_$B){return w_$B||(w_$B=new w_$P),w_$B.x=this.x,w_$B.y=this.y,w_$B.width=this.width,w_$B.height=this.height,w_$B},w_$B.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},w_$B.equals=function(w_$B){return!(!w_$B||w_$B.x!==this.x||w_$B.y!==this.y||w_$B.width!==this.width||w_$B.height!==this.height)},w_$B.addPoint=function(w_$B,w_$h){return this.x>w_$B&&(this.width+=this.x-w_$B,this.x=w_$B),this.y>w_$h&&(this.height+=this.y-w_$h,this.y=w_$h),this.width<w_$B-this.x&&(this.width=w_$B-this.x),this.height<w_$h-this.y&&(this.height=w_$h-this.y),this},w_$B._getBoundPoints=function(){var w_$B=w_$P._temB;return(w_$B.length=0)==this.width||0==this.height||w_$B.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),w_$B},w_$B.isEmpty=function(){return this.width<=0||this.height<=0},w_$i(0,w_$B,"right",function(){return this.x+this.width}),w_$i(0,w_$B,"bottom",function(){return this.y+this.height}),w_$P._getBoundPointS=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$P._temA;return(w_$n.length=0)==w_$l||0==w_$A||w_$n.push(w_$B,w_$h,w_$B+w_$l,w_$h,w_$B,w_$h+w_$A,w_$B+w_$l,w_$h+w_$A),w_$n},w_$P._getWrapRec=function(w_$B,w_$h){if(!w_$B||w_$B.length<1)return w_$h?w_$h.setTo(0,0,0,0):w_$P.TEMP.setTo(0,0,0,0);w_$h=w_$h||new w_$P;var w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z=w_$B.length,w_$t=w_$U.TEMP;for(w_$n=w_$X=-(w_$A=w_$s=99999),w_$l=0;w_$l<w_$Z;w_$l+=2)w_$t.x=w_$B[w_$l],w_$t.y=w_$B[w_$l+1],w_$A=w_$A<w_$t.x?w_$A:w_$t.x,w_$s=w_$s<w_$t.y?w_$s:w_$t.y,w_$n=w_$n>w_$t.x?w_$n:w_$t.x,w_$X=w_$X>w_$t.y?w_$X:w_$t.y;return w_$h.setTo(w_$A,w_$s,w_$n-w_$A,w_$X-w_$s)},w_$P.EMPTY=new w_$P,w_$P.TEMP=new w_$P,w_$P._temB=[],w_$P._temA=[],w_$P}(),w_$a=function(){function w_$t(){}return w_$G(w_$t,"laya.media.SoundManager"),w_$i(1,w_$t,"useAudioMusic",function(){return w_$t._useAudioMusic},function(w_$B){w_$t._useAudioMusic=w_$B,w_$t._musicClass=w_$B?w_$lB:null}),w_$i(1,w_$t,"autoStopMusic",function(){return w_$t._autoStopMusic},function(w_$B){w_$v.stage.off("blur",null,w_$t._stageOnBlur),w_$v.stage.off("focus",null,w_$t._stageOnFocus),w_$v.stage.off("visibilitychange",null,w_$t._visibilityChange),(w_$t._autoStopMusic=w_$B)&&(w_$v.stage.on("blur",null,w_$t._stageOnBlur),w_$v.stage.on("focus",null,w_$t._stageOnFocus),w_$v.stage.on("visibilitychange",null,w_$t._visibilityChange))}),w_$i(1,w_$t,"muted",function(){return w_$t._muted},function(w_$B){w_$B!=w_$t._muted&&(w_$B&&w_$t.stopAllSound(),w_$t.musicMuted=w_$B,w_$t._muted=w_$B)}),w_$i(1,w_$t,"musicMuted",function(){return w_$t._musicMuted},function(w_$B){w_$B!=w_$t._musicMuted&&(w_$B?(w_$t._tMusic&&w_$t._musicChannel&&!w_$t._musicChannel.isStopped?w_$t._musicChannel.pause():w_$t._musicChannel=null,w_$t._musicMuted=w_$B):(w_$t._musicMuted=w_$B,w_$t._tMusic&&w_$t._musicChannel&&w_$t._musicChannel.resume()))}),w_$i(1,w_$t,"soundMuted",function(){return w_$t._soundMuted},function(w_$B){w_$t._soundMuted=w_$B}),w_$t.addChannel=function(w_$B){0<=w_$t._channels.indexOf(w_$B)||(w_$t._channels.push(w_$B),w_$t.autoReleaseSound&&0!=w_$t._notUsedCount&&w_$t._notUsedUrls[w_$B.url]&&(delete w_$t._notUsedUrls[w_$B.url],0==--w_$t._notUsedCount&&w_$v.timer.clear(w_$t,w_$t.disposeSoundIfNotUsed)))},w_$t.removeChannel=function(w_$B){var w_$h=w_$t._channels,w_$l=w_$h.indexOf(w_$B);if(-1!=w_$l&&(w_$h.splice(w_$l,1),w_$t.autoReleaseSound)){var w_$A=w_$B.url,w_$n=w_$t.defaultIntervals[w_$A]||2e4;if(0<w_$n){var w_$s=!0;for(w_$l=w_$h.length-1;0<=w_$l;w_$l--)if(w_$h[w_$l].url==w_$A){w_$s=!1;break}w_$s&&(w_$t._notUsedUrls[w_$A]=Date.now()+w_$n,0==w_$t._notUsedCount++&&w_$v.timer.loop(1e4,w_$t,w_$t.disposeSoundIfNotUsed))}}},w_$t.disposeSoundIfNotUsed=function(){var w_$B=w_$t._notUsedUrls;if(0!=w_$t._notUsedCount){var w_$h=Date.now();for(var w_$l in w_$B)w_$h>=w_$B[w_$l]&&(delete w_$B[w_$l],--w_$t._notUsedCount,w_$t.destroySound(w_$l));if(0!=w_$t._notUsedCount)return}w_$v.timer.clear(w_$t,w_$t.disposeSoundIfNotUsed)},w_$t._visibilityChange=function(){w_$v.stage.isVisibility?w_$t._stageOnFocus():w_$t._stageOnBlur()},w_$t._stageOnBlur=function(){w_$t._isActive=!1,w_$t._musicChannel&&(w_$t._musicChannel.isStopped||(w_$t._blurPaused=!0,w_$t._musicChannel.pause())),w_$t.stopAllSound(),w_$v.stage.once("mousedown",null,w_$t._stageOnFocus)},w_$t._recoverWebAudio=function(){w_$sB.ctx&&"running"!=w_$sB.ctx.state&&w_$sB.ctx.resume&&w_$sB.ctx.resume()},w_$t._stageOnFocus=function(){if(w_$t._isActive=!0,w_$t._recoverWebAudio(),w_$v.stage.off("mousedown",null,w_$t._stageOnFocus),w_$t._blurPaused){var w_$B=w_$t._musicChannel;w_$B&&w_$t._music&&w_$B.isStopped&&(w_$t._blurPaused=!1,w_$t._music._disposed?w_$t.playMusic(w_$B.url,w_$B.loops,w_$B.startHandler,w_$B.completeHandler,w_$B.startTime):w_$B.audioBuffer?w_$B.resume():w_$t._music.play(w_$B.startTime,w_$B.loops,w_$B.startHandler,w_$B))}},w_$t.playSound=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){if(void 0===w_$h&&(w_$h=1),void 0===w_$s&&(w_$s=0),!w_$B)return null;if(w_$t._muted)return null;if(w_$t._recoverWebAudio(),w_$B==w_$t._tMusic){if(w_$t._musicMuted)return null}else{if(!w_$t._isActive)return null;if(w_$t._soundMuted)return null}var w_$X,w_$Z=w_$t._pool[w_$B];return w_$n||(w_$n=w_$t._soundClass),w_$Z||((w_$Z=new w_$n).load(w_$B),w_$t._pool[w_$B]=w_$Z),(w_$X=w_$Z.play(w_$s,w_$h,w_$l))?(w_$B==w_$t._tMusic&&(w_$t._music=w_$Z,w_$t._isActive||(w_$t._blurPaused=!0,w_$X.pause())),w_$X.url=w_$B,w_$X.volume=w_$B==w_$t._tMusic?w_$t.musicVolume:w_$t.soundVolume,w_$X.completeHandler=w_$A,w_$X):null},w_$t.destroySound=function(w_$B){var w_$h=w_$t._pool[w_$B];w_$h&&(delete w_$t._pool[w_$B],w_$h.dispose())},w_$t.playMusic=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$h&&(w_$h=0),void 0===w_$n&&(w_$n=0),w_$t._tMusic=w_$B,w_$t._musicChannel&&w_$t._musicChannel.stop(),w_$t._musicChannel=w_$t.playSound(w_$B,w_$h,w_$l,w_$A,null,w_$n)},w_$t.stopSound=function(w_$B){for(var w_$h,w_$l=w_$t._channels.length-1;0<=w_$l;w_$l--)(w_$h=w_$t._channels[w_$l]).url==w_$B&&w_$h.stop()},w_$t.stopAll=function(){w_$t._tMusic=null;var w_$B=0;for(w_$B=w_$t._channels.length-1;0<=w_$B;w_$B--)w_$t._channels[w_$B].stop()},w_$t.stopAllSound=function(){var w_$B,w_$h=0;for(w_$h=w_$t._channels.length-1;0<=w_$h;w_$h--)(w_$B=w_$t._channels[w_$h]).url!=w_$t._tMusic&&w_$B.stop()},w_$t.stopMusic=function(){w_$t._musicChannel&&w_$t._musicChannel.stop(),w_$t._tMusic=null},w_$t.setSoundVolume=function(w_$B,w_$h){if(w_$h)w_$t._setVolume(w_$h,w_$B);else{w_$t.soundVolume=w_$B;var w_$l,w_$A=0;for(w_$A=w_$t._channels.length-1;0<=w_$A;w_$A--)(w_$l=w_$t._channels[w_$A]).url!=w_$t._tMusic&&(w_$l.volume=w_$B)}},w_$t.setMusicVolume=function(w_$B){w_$t.musicVolume=w_$B,w_$t._setVolume(w_$t._tMusic,w_$B)},w_$t._setVolume=function(w_$B,w_$h){for(var w_$l,w_$A=w_$t._channels.length-1;0<=w_$A;w_$A--)(w_$l=w_$t._channels[w_$A]).url==w_$B&&(w_$l.volume=w_$h)},w_$t.musicVolume=1,w_$t.soundVolume=1,w_$t.playbackRate=1,w_$t._useAudioMusic=!0,w_$t._muted=!1,w_$t._soundMuted=!1,w_$t._musicMuted=!1,w_$t._tMusic=null,w_$t._musicChannel=null,w_$t._music=null,w_$t._channels=[],w_$t._autoStopMusic=!1,w_$t._blurPaused=!1,w_$t._isActive=!0,w_$t._soundClass=null,w_$t._musicClass=null,w_$t.autoReleaseSound=!0,w_$t._pool={},w_$t.defaultIntervals={},w_$t._notUsedUrls={},w_$t._notUsedCount=0,w_$t}(),w_$w=function(){var w_$B;function w_$l(){}return w_$G(w_$l,"laya.net.LocalStorage"),w_$l.__init__=function(){w_$l._baseClass||(w_$l._baseClass=w_$B).init(),w_$l.items=w_$l._baseClass.items,w_$l.support=w_$l._baseClass.support},w_$l.setItem=function(w_$B,w_$h){w_$l._baseClass.setItem(w_$B,w_$h)},w_$l.getItem=function(w_$B){return w_$l._baseClass.getItem(w_$B)},w_$l.setJSON=function(w_$B,w_$h){w_$l._baseClass.setJSON(w_$B,w_$h)},w_$l.getJSON=function(w_$B){return w_$l._baseClass.getJSON(w_$B)},w_$l.removeItem=function(w_$B){w_$l._baseClass.removeItem(w_$B)},w_$l.clear=function(){w_$l._baseClass.clear()},w_$l._baseClass=null,w_$l.items=null,w_$l.support=!1,w_$l.__init$=function(){w_$B=function(){function w_$l(){}return w_$G(w_$l,""),w_$l.init=function(){try{w_$l.support=!0,w_$l.items=w_$X.localStorage,w_$l.setItem("laya","1"),w_$l.removeItem("laya")}catch(w_$B){w_$l.support=!1}w_$l.support||console.log("LocalStorage is not supprot or browser is private mode.")},w_$l.setItem=function(w_$B,w_$h){try{w_$l.support&&w_$l.items.setItem(w_$B,w_$h)}catch(w_$B){console.warn("set localStorage failed",w_$B)}},w_$l.getItem=function(w_$B){return w_$l.support?w_$l.items.getItem(w_$B):null},w_$l.setJSON=function(w_$B,w_$h){try{w_$l.support&&w_$l.items.setItem(w_$B,JSON.stringify(w_$h))}catch(w_$B){console.warn("set localStorage failed",w_$B)}},w_$l.getJSON=function(w_$B){return JSON.parse(w_$l.support?w_$l.items.getItem(w_$B):null)},w_$l.removeItem=function(w_$B){w_$l.support&&w_$l.items.removeItem(w_$B)},w_$l.clear=function(){w_$l.support&&w_$l.items.clear()},w_$l.items=null,w_$l.support=!1,w_$l}()},w_$l}(),w_$R=(function(){function w_$A(){}w_$G(w_$A,"laya.net.ResourceVersion"),w_$A.enable=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=2),laya.net.ResourceVersion.type=w_$l,w_$v.loader.load(w_$B,w_$H.create(null,w_$A.onManifestLoaded,[w_$h]),null,"json"),w_$W.customFormat=w_$A.addVersionPrefix},w_$A.onManifestLoaded=function(w_$B,w_$h){w_$A.manifest=w_$h,w_$B.run(),w_$h||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},w_$A.addVersionPrefix=function(w_$B){return w_$A.manifest&&w_$A.manifest[w_$B]?2==w_$A.type?w_$A.manifest[w_$B]:w_$A.manifest[w_$B]+"/"+w_$B:w_$B},w_$A.FOLDER_VERSION=1,w_$A.FILENAME_VERSION=2,w_$A.manifest=null,w_$A.type=1}(),function(){function w_$B(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}w_$G(w_$B,"laya.net.TTFLoader");var w_$h=w_$B.prototype;return w_$h.load=function(w_$B){var w_$h=(this._url=w_$B).split(".ttf")[0].split("/");this.fontName=w_$h[w_$h.length-1],w_$d.window.conch?this._loadConch():w_$d.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},w_$h._loadConch=function(){this._http=new w_$XB,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},w_$h._onHttpLoaded=function(w_$B){w_$d.window.conch.setFontFaceFromBuffer(this.fontName,w_$B),this._clearHttp(),this._complete()},w_$h._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},w_$h._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},w_$h._complete=function(){w_$v.timer.clear(this,this._complete),w_$v.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},w_$h._checkComplete=function(){w_$S.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},w_$h._loadWithFontFace=function(){var w_$B=new w_$d.window.FontFace(this.fontName,"url('"+this._url+"')");w_$d.window.document.fonts.add(w_$B);var w_$h=this;w_$B.loaded.then(function(){w_$h._complete()}),w_$B.load()},w_$h._createDiv=function(){this._div=w_$d.createElement("div"),this._div.innerHTML="laya";var w_$B=this._div.style;w_$B.fontFamily=this.fontName,w_$B.position="absolute",w_$B.left="-100px",w_$B.top="-100px",w_$d.document.body.appendChild(this._div)},w_$h._loadWithCSS=function(){var w_$B=this,w_$h=w_$d.createElement("style");w_$h.type="text/css",w_$d.document.body.appendChild(w_$h),w_$h.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=w_$S.measureText("LayaTTFFont",this._fontTxt).width;var w_$l=this;w_$h.onload=function(){w_$v.timer.once(1e4,w_$l,w_$B._complete)},w_$v.timer.loop(20,this,this._checkComplete),this._createDiv()},w_$B._testString="LayaTTFFont",w_$B}()),w_$W=function(){function w_$A(w_$B){this._url=null,this._path=null,this._url=w_$A.formatURL(w_$B),this._path=w_$A.getPath(w_$B)}w_$G(w_$A,"laya.net.URL");var w_$B=w_$A.prototype;return w_$i(0,w_$B,"path",function(){return this._path}),w_$i(0,w_$B,"url",function(){return this._url}),w_$A.formatURL=function(w_$B,w_$h){if(!w_$B)return"null path";if(0<w_$B.indexOf(":"))return w_$B;null!=w_$A.customFormat&&(w_$B=w_$A.customFormat(w_$B,w_$h));var w_$l=w_$B.charAt(0);if("."===w_$l)return w_$A.formatRelativePath((w_$h||w_$A.basePath)+w_$B);if("~"===w_$l)return w_$A.rootPath+w_$B.substring(1);if("d"===w_$l){if(0===w_$B.indexOf("data:image"))return w_$B}else if("/"===w_$l)return w_$B;return(w_$h||w_$A.basePath)+w_$B},w_$A.formatRelativePath=function(w_$B){for(var w_$h=w_$B.split("/"),w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++)".."==w_$h[w_$l]&&(w_$h.splice(w_$l-1,2),w_$l-=2);return w_$h.join("/")},w_$A.isAbsolute=function(w_$B){return 0<w_$B.indexOf(":")||"/"==w_$B.charAt(0)},w_$A.getPath=function(w_$B){var w_$h=w_$B.lastIndexOf("/");return 0<w_$h?w_$B.substr(0,w_$h+1):""},w_$A.getFileName=function(w_$B){var w_$h=w_$B.lastIndexOf("/");return 0<w_$h?w_$B.substr(w_$h+1):w_$B},w_$A.version={},w_$A.basePath="",w_$A.rootPath="",w_$A.customFormat=function(w_$B){var w_$h=w_$A.version[w_$B];return!w_$M.isConchApp&&w_$h&&(w_$B+="?v="+w_$h),w_$B},w_$A}(),w_$M=function(){function w_$n(w_$B,w_$h){this._timeId=0;var w_$l=w_$n._mainCanvas.source.style;w_$l.position="absolute",w_$l.top=w_$l.left="0px",w_$l.background="#000000",w_$n._mainCanvas.source.id="layaCanvas";var w_$A=laya.renders.Render.isWebGL;w_$n._mainCanvas.source.width=w_$B,w_$n._mainCanvas.source.height=w_$h,w_$A&&w_$n.WebGL.init(w_$n._mainCanvas,w_$B,w_$h),w_$d.container.appendChild(w_$n._mainCanvas.source),(w_$n._context=new w_$E(w_$B,w_$h,w_$A?null:w_$n._mainCanvas)).ctx.setIsMainContext(),w_$d.window.requestAnimationFrame(function w_$B(w_$h){w_$d.window.requestAnimationFrame(w_$B);w_$v.stage._loop()}),w_$v.stage.on("visibilitychange",this,this._onVisibilitychange)}w_$G(w_$n,"laya.renders.Render");var w_$B=w_$n.prototype;return w_$B._onVisibilitychange=function(){w_$v.stage.isVisibility?0!=this._timeId&&w_$d.window.clearInterval(this._timeId):this._timeId=w_$d.window.setInterval(this._enterFrame,1e3)},w_$B._enterFrame=function(w_$B){w_$v.stage._loop()},w_$i(1,w_$n,"context",function(){return w_$n._context}),w_$i(1,w_$n,"canvas",function(){return w_$n._mainCanvas.source}),w_$n._context=null,w_$n._mainCanvas=null,w_$n.WebGL=null,w_$n.isConchNode=!1,w_$n.isConchApp=!1,w_$n.isConchWebGL=!1,w_$n.isWebGL=!1,w_$n.is3DMode=!1,w_$n.optimizeTextureMemory=function(w_$B,w_$h){return!0},w_$n.__init$=function(){w_$X.ConchRenderType=w_$X.ConchRenderType||1,w_$X.ConchRenderType|=w_$X.conch?4:0,w_$n.isConchNode=5==(5&w_$X.ConchRenderType),w_$n.isConchApp=4==(4&w_$X.ConchRenderType),w_$n.isConchWebGL=6==w_$X.ConchRenderType},w_$n}(),w_$E=function(){function w_$X(w_$B,w_$h,w_$l){this.x=0,this.y=0,this._drawTexture=function(w_$B,w_$h,w_$l){w_$l[0].loaded&&this.ctx.drawTexture(w_$l[0],w_$l[1],w_$l[2],w_$l[3],w_$l[4],w_$B,w_$h)},this._fillTexture=function(w_$B,w_$h,w_$l){w_$l[0].loaded&&this.ctx.fillTexture(w_$l[0],w_$l[1]+w_$B,w_$l[2]+w_$h,w_$l[3],w_$l[4],w_$l[5],w_$l[6],w_$l[7])},this._drawTextureWithTransform=function(w_$B,w_$h,w_$l){w_$l[0].loaded&&this.ctx.drawTextureWithTransform(w_$l[0],w_$l[1],w_$l[2],w_$l[3],w_$l[4],w_$l[5],w_$B,w_$h,w_$l[6])},this._fillQuadrangle=function(w_$B,w_$h,w_$l){this.ctx.fillQuadrangle(w_$l[0],w_$l[1],w_$l[2],w_$l[3],w_$l[4])},this._drawRect=function(w_$B,w_$h,w_$l){var w_$A=this.ctx;null!=w_$l[4]&&(w_$A.fillStyle=w_$l[4],w_$A.fillRect(w_$B+w_$l[0],w_$h+w_$l[1],w_$l[2],w_$l[3],null)),null!=w_$l[5]&&(w_$A.strokeStyle=w_$l[5],w_$A.lineWidth=w_$l[6],w_$A.strokeRect(w_$B+w_$l[0],w_$h+w_$l[1],w_$l[2],w_$l[3],w_$l[6]))},this._drawPie=function(w_$B,w_$h,w_$l){var w_$A=this.ctx;w_$M.isWebGL&&w_$A.setPathId(w_$l[8]),w_$A.beginPath(),w_$M.isWebGL?(w_$A.movePath(w_$l[0]+w_$B,w_$l[1]+w_$h),w_$A.moveTo(0,0)):w_$A.moveTo(w_$B+w_$l[0],w_$h+w_$l[1]),w_$A.arc(w_$B+w_$l[0],w_$h+w_$l[1],w_$l[2],w_$l[3],w_$l[4]),w_$A.closePath(),this._fillAndStroke(w_$l[5],w_$l[6],w_$l[7],!0)},this._clipRect=function(w_$B,w_$h,w_$l){this.ctx.clipRect(w_$B+w_$l[0],w_$h+w_$l[1],w_$l[2],w_$l[3])},this._fillRect=function(w_$B,w_$h,w_$l){this.ctx.fillRect(w_$B+w_$l[0],w_$h+w_$l[1],w_$l[2],w_$l[3],w_$l[4])},this._drawCircle=function(w_$B,w_$h,w_$l){var w_$A=this.ctx;w_$M.isWebGL&&w_$A.setPathId(w_$l[6]),w_$f.drawCall++,w_$A.beginPath(),w_$M.isWebGL&&w_$A.movePath(w_$l[0]+w_$B,w_$l[1]+w_$h),w_$A.arc(w_$l[0]+w_$B,w_$l[1]+w_$h,w_$l[2],0,w_$X.PI2),w_$A.closePath(),this._fillAndStroke(w_$l[3],w_$l[4],w_$l[5],!0)},this._fillCircle=function(w_$B,w_$h,w_$l){w_$f.drawCall++;var w_$A=this.ctx;w_$A.beginPath(),w_$A.fillStyle=w_$l[3],w_$A.arc(w_$l[0]+w_$B,w_$l[1]+w_$h,w_$l[2],0,w_$X.PI2),w_$A.fill()},this._setShader=function(w_$B,w_$h,w_$l){this.ctx.setShader(w_$l[0])},this._drawLine=function(w_$B,w_$h,w_$l){var w_$A=this.ctx;w_$M.isWebGL&&w_$A.setPathId(w_$l[6]),w_$A.beginPath(),w_$A.strokeStyle=w_$l[4],w_$A.lineWidth=w_$l[5],w_$M.isWebGL?(w_$A.movePath(w_$B,w_$h),w_$A.moveTo(w_$l[0],w_$l[1]),w_$A.lineTo(w_$l[2],w_$l[3])):(w_$A.moveTo(w_$B+w_$l[0],w_$h+w_$l[1]),w_$A.lineTo(w_$B+w_$l[2],w_$h+w_$l[3])),w_$A.stroke()},this._drawLines=function(w_$B,w_$h,w_$l){var w_$A=this.ctx;w_$M.isWebGL&&w_$A.setPathId(w_$l[5]),w_$A.beginPath(),w_$B+=w_$l[0],w_$h+=w_$l[1],w_$M.isWebGL&&w_$A.movePath(w_$B,w_$h),w_$A.strokeStyle=w_$l[3],w_$A.lineWidth=w_$l[4];var w_$n=w_$l[2],w_$s=2,w_$X=w_$n.length;if(w_$M.isWebGL)for(w_$A.moveTo(w_$n[0],w_$n[1]);w_$s<w_$X;)w_$A.lineTo(w_$n[w_$s++],w_$n[w_$s++]);else for(w_$A.moveTo(w_$B+w_$n[0],w_$h+w_$n[1]);w_$s<w_$X;)w_$A.lineTo(w_$B+w_$n[w_$s++],w_$h+w_$n[w_$s++]);w_$A.stroke()},this._drawLinesWebGL=function(w_$B,w_$h,w_$l){this.ctx.drawLines(w_$B+this.x+w_$l[0],w_$h+this.y+w_$l[1],w_$l[2],w_$l[3],w_$l[4])},this._drawCurves=function(w_$B,w_$h,w_$l){this.ctx.drawCurves(w_$B,w_$h,w_$l)},this._draw=function(w_$B,w_$h,w_$l){w_$l[0].call(null,this,w_$B,w_$h)},this._transformByMatrix=function(w_$B,w_$h,w_$l){this.ctx.transformByMatrix(w_$l[0])},this._setTransform=function(w_$B,w_$h,w_$l){this.ctx.setTransform(w_$l[0],w_$l[1],w_$l[2],w_$l[3],w_$l[4],w_$l[5])},this._setTransformByMatrix=function(w_$B,w_$h,w_$l){this.ctx.setTransformByMatrix(w_$l[0])},this._save=function(w_$B,w_$h,w_$l){this.ctx.save()},this._restore=function(w_$B,w_$h,w_$l){this.ctx.restore()},this._translate=function(w_$B,w_$h,w_$l){this.ctx.translate(w_$l[0],w_$l[1])},this._transform=function(w_$B,w_$h,w_$l){this.ctx.translate(w_$l[1]+w_$B,w_$l[2]+w_$h);var w_$A=w_$l[0];this.ctx.transform(w_$A.a,w_$A.b,w_$A.c,w_$A.d,w_$A.tx,w_$A.ty),this.ctx.translate(-w_$B-w_$l[1],-w_$h-w_$l[2])},this._rotate=function(w_$B,w_$h,w_$l){this.ctx.translate(w_$l[1]+w_$B,w_$l[2]+w_$h),this.ctx.rotate(w_$l[0]),this.ctx.translate(-w_$B-w_$l[1],-w_$h-w_$l[2])},this._scale=function(w_$B,w_$h,w_$l){this.ctx.translate(w_$l[2]+w_$B,w_$l[3]+w_$h),this.ctx.scale(w_$l[0],w_$l[1]),this.ctx.translate(-w_$B-w_$l[2],-w_$h-w_$l[3])},this._alpha=function(w_$B,w_$h,w_$l){this.ctx.globalAlpha*=w_$l[0]},this._setAlpha=function(w_$B,w_$h,w_$l){this.ctx.globalAlpha=w_$l[0]},this._fillText=function(w_$B,w_$h,w_$l){this.ctx.fillText(w_$l[0],w_$l[1]+w_$B,w_$l[2]+w_$h,w_$l[3],w_$l[4],w_$l[5])},this._strokeText=function(w_$B,w_$h,w_$l){this.ctx.strokeText(w_$l[0],w_$l[1]+w_$B,w_$l[2]+w_$h,w_$l[3],w_$l[4],w_$l[5],w_$l[6])},this._fillBorderText=function(w_$B,w_$h,w_$l){this.ctx.fillBorderText(w_$l[0],w_$l[1]+w_$B,w_$l[2]+w_$h,w_$l[3],w_$l[4],w_$l[5],w_$l[6],w_$l[7])},this._blendMode=function(w_$B,w_$h,w_$l){this.ctx.globalCompositeOperation=w_$l[0]},this._beginClip=function(w_$B,w_$h,w_$l){this.ctx.beginClip&&this.ctx.beginClip(w_$B+w_$l[0],w_$h+w_$l[1],w_$l[2],w_$l[3])},this._setIBVB=function(w_$B,w_$h,w_$l){this.ctx.setIBVB(w_$l[0]+w_$B,w_$l[1]+w_$h,w_$l[2],w_$l[3],w_$l[4],w_$l[5],w_$l[6],w_$l[7])},this._fillTrangles=function(w_$B,w_$h,w_$l){this.ctx.fillTrangles(w_$l[0],w_$l[1]+w_$B,w_$l[2]+w_$h,w_$l[3],w_$l[4])},this._drawPath=function(w_$B,w_$h,w_$l){var w_$A=this.ctx;w_$M.isWebGL&&w_$A.setPathId(-1),w_$A.beginPath(),w_$B+=w_$l[0],w_$h+=w_$l[1],w_$M.isWebGL&&w_$A.movePath(w_$B,w_$h);for(var w_$n=w_$l[2],w_$s=0,w_$X=w_$n.length;w_$s<w_$X;w_$s++){var w_$Z=w_$n[w_$s];switch(w_$Z[0]){case"moveTo":w_$M.isWebGL?w_$A.moveTo(w_$Z[1],w_$Z[2]):w_$A.moveTo(w_$B+w_$Z[1],w_$h+w_$Z[2]);break;case"lineTo":w_$M.isWebGL?w_$A.lineTo(w_$Z[1],w_$Z[2]):w_$A.lineTo(w_$B+w_$Z[1],w_$h+w_$Z[2]);break;case"arcTo":w_$M.isWebGL?w_$A.arcTo(w_$Z[1],w_$Z[2],w_$Z[3],w_$Z[4],w_$Z[5]):w_$A.arcTo(w_$B+w_$Z[1],w_$h+w_$Z[2],w_$B+w_$Z[3],w_$h+w_$Z[4],w_$Z[5]);break;case"closePath":w_$A.closePath()}}var w_$t=w_$l[3];null!=w_$t&&(w_$A.fillStyle=w_$t.fillStyle,w_$A.fill());var w_$P=w_$l[4];null!=w_$P&&(w_$A.strokeStyle=w_$P.strokeStyle,w_$A.lineWidth=w_$P.lineWidth||1,w_$A.lineJoin=w_$P.lineJoin,w_$A.lineCap=w_$P.lineCap,w_$A.miterLimit=w_$P.miterLimit,w_$A.stroke())},this.drawPoly=function(w_$B,w_$h,w_$l){this.ctx.drawPoly(w_$B+this.x+w_$l[0],w_$h+this.y+w_$l[1],w_$l[2],w_$l[3],w_$l[4],w_$l[5],w_$l[6])},this._drawPoly=function(w_$B,w_$h,w_$l){var w_$A=this.ctx,w_$n=w_$l[2],w_$s=2,w_$X=w_$n.length;if(w_$M.isWebGL)for(w_$A.setPathId(w_$l[6]),w_$A.beginPath(),w_$B+=w_$l[0],w_$h+=w_$l[1],w_$A.movePath(w_$B,w_$h),w_$A.moveTo(w_$n[0],w_$n[1]);w_$s<w_$X;)w_$A.lineTo(w_$n[w_$s++],w_$n[w_$s++]);else for(w_$A.beginPath(),w_$B+=w_$l[0],w_$h+=w_$l[1],w_$A.moveTo(w_$B+w_$n[0],w_$h+w_$n[1]);w_$s<w_$X;)w_$A.lineTo(w_$B+w_$n[w_$s++],w_$h+w_$n[w_$s++]);w_$A.closePath(),this._fillAndStroke(w_$l[3],w_$l[4],w_$l[5],w_$l[7])},this._drawSkin=function(w_$B,w_$h,w_$l){var w_$A=w_$l[0];if(w_$A){var w_$n=this.ctx;w_$A.render(w_$n,w_$B,w_$h)}},this._drawParticle=function(w_$B,w_$h,w_$l){this.ctx.drawParticle(w_$B+this.x,w_$h+this.y,w_$l[0])},this._setFilters=function(w_$B,w_$h,w_$l){this.ctx.setFilters(w_$l)},w_$l?this.ctx=w_$l.getContext("2d"):(w_$l=w_$yB.create("3D"),this.ctx=w_$S.createWebGLContext2D(w_$l),w_$l._setContext(this.ctx)),w_$l.size(w_$B,w_$h),this.canvas=w_$l}w_$G(w_$X,"laya.renders.RenderContext");var w_$B=w_$X.prototype;return w_$B.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},w_$B.drawTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$B.loaded&&this.ctx.drawTexture(w_$B,w_$h,w_$l,w_$A,w_$n,this.x,this.y)},w_$B._drawTextures=function(w_$B,w_$h,w_$l){w_$l[0].loaded&&this.ctx.drawTextures(w_$l[0],w_$l[1],w_$B+this.x,w_$h+this.y)},w_$B.drawTextureWithTransform=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$B.loaded&&this.ctx.drawTextureWithTransform(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,this.x,this.y,w_$X)},w_$B.fillQuadrangle=function(w_$B,w_$h,w_$l,w_$A,w_$n){this.ctx.fillQuadrangle(w_$B,w_$h,w_$l,w_$A,w_$n)},w_$B.drawCanvas=function(w_$B,w_$h,w_$l,w_$A,w_$n){this.ctx.drawCanvas(w_$B,w_$h+this.x,w_$l+this.y,w_$A,w_$n)},w_$B.drawRect=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$s&&(w_$s=1);var w_$X=this.ctx;w_$X.strokeStyle=w_$n,w_$X.lineWidth=w_$s,w_$X.strokeRect(w_$B+this.x,w_$h+this.y,w_$l,w_$A,w_$s)},w_$B._fillAndStroke=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$A&&(w_$A=!1);var w_$n=this.ctx;null!=w_$B&&(w_$n.fillStyle=w_$B,w_$M.isWebGL?w_$n.fill(w_$A):w_$n.fill()),null!=w_$h&&0<w_$l&&(w_$n.strokeStyle=w_$h,w_$n.lineWidth=w_$l,w_$n.stroke())},w_$B.clipRect=function(w_$B,w_$h,w_$l,w_$A){this.ctx.clipRect(w_$B+this.x,w_$h+this.y,w_$l,w_$A)},w_$B.fillRect=function(w_$B,w_$h,w_$l,w_$A,w_$n){this.ctx.fillRect(w_$B+this.x,w_$h+this.y,w_$l,w_$A,w_$n)},w_$B.drawCircle=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=1),w_$f.drawCall++;var w_$s=this.ctx;w_$s.beginPath(),w_$s.strokeStyle=w_$A,w_$s.lineWidth=w_$n,w_$s.arc(w_$B+this.x,w_$h+this.y,w_$l,0,w_$X.PI2),w_$s.stroke()},w_$B.drawTriangles=function(w_$B,w_$h,w_$l){if(w_$M.isWebGL)this.ctx.drawTriangles(w_$l[0],w_$B+w_$l[1],w_$h+w_$l[2],w_$l[3],w_$l[4],w_$l[5],w_$l[6],w_$l[7],w_$l[8],w_$l[9]);else{var w_$A=w_$l[5],w_$n=0,w_$s=w_$A.length,w_$X=this.ctx;for(w_$n=0;w_$n<w_$s;w_$n+=3){var w_$Z=2*w_$A[w_$n],w_$t=2*w_$A[w_$n+1],w_$P=2*w_$A[w_$n+2];w_$X.drawTriangle(w_$l[0],w_$l[3],w_$l[4],w_$Z,w_$t,w_$P,w_$l[6],!0)}}},w_$B.fillCircle=function(w_$B,w_$h,w_$l,w_$A){w_$f.drawCall++;var w_$n=this.ctx;w_$n.beginPath(),w_$n.fillStyle=w_$A,w_$n.arc(w_$B+this.x,w_$h+this.y,w_$l,0,w_$X.PI2),w_$n.fill()},w_$B.setShader=function(w_$B){this.ctx.setShader(w_$B)},w_$B.drawLine=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$s&&(w_$s=1);var w_$X=this.ctx;w_$X.beginPath(),w_$X.strokeStyle=w_$n,w_$X.lineWidth=w_$s,w_$X.moveTo(this.x+w_$B,this.y+w_$h),w_$X.lineTo(this.x+w_$l,this.y+w_$A),w_$X.stroke()},w_$B.clear=function(){this.ctx.clear()},w_$B.transformByMatrix=function(w_$B){this.ctx.transformByMatrix(w_$B)},w_$B.setTransform=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this.ctx.setTransform(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)},w_$B.setTransformByMatrix=function(w_$B){this.ctx.setTransformByMatrix(w_$B)},w_$B.save=function(){this.ctx.save()},w_$B.restore=function(){this.ctx.restore()},w_$B.translate=function(w_$B,w_$h){this.ctx.translate(w_$B,w_$h)},w_$B.transform=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this.ctx.transform(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)},w_$B.rotate=function(w_$B){this.ctx.rotate(w_$B)},w_$B.scale=function(w_$B,w_$h){this.ctx.scale(w_$B,w_$h)},w_$B.alpha=function(w_$B){this.ctx.globalAlpha*=w_$B},w_$B.setAlpha=function(w_$B){this.ctx.globalAlpha=w_$B},w_$B.fillWords=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$s&&(w_$s=0),this.ctx.fillWords(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)},w_$B.fillBorderWords=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this.ctx.fillBorderWords(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X)},w_$B.fillText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this.ctx.fillText(w_$B,w_$h+this.x,w_$l+this.y,w_$A,w_$n,w_$s)},w_$B.strokeText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this.ctx.strokeText(w_$B,w_$h+this.x,w_$l+this.y,w_$A,w_$n,w_$s,w_$X)},w_$B.blendMode=function(w_$B){this.ctx.globalCompositeOperation=w_$B},w_$B.flush=function(){this.ctx.flush&&this.ctx.flush()},w_$B.addRenderObject=function(w_$B){this.ctx.addRenderObject(w_$B)},w_$B.beginClip=function(w_$B,w_$h,w_$l,w_$A){this.ctx.beginClip&&this.ctx.beginClip(w_$B,w_$h,w_$l,w_$A)},w_$B.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},w_$B.fillTrangles=function(w_$B,w_$h,w_$l){this.ctx.fillTrangles(w_$l[0],w_$l[1],w_$l[2],w_$l[3],4<w_$l.length?w_$l[4]:null)},w_$X.PI2=2*Math.PI,w_$X}(),w_$j=function(){function w_$X(w_$B,w_$h){switch(this._next=w_$h||w_$X.NORENDER,w_$B){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=w_$J._filter);case 69905:return void(this._fun=w_$X._initRenderFun)}this.onCreate(w_$B)}w_$G(w_$X,"laya.renders.RenderSprite");var w_$B=w_$X.prototype;return w_$B.onCreate=function(w_$B){},w_$B._style=function(w_$B,w_$h,w_$l,w_$A){w_$B._style.render(w_$B,w_$h,w_$l,w_$A);var w_$n=this._next;w_$n._fun.call(w_$n,w_$B,w_$h,w_$l,w_$A)},w_$B._no=function(w_$B,w_$h,w_$l,w_$A){},w_$B._custom=function(w_$B,w_$h,w_$l,w_$A){w_$B.customRender(w_$h,w_$l,w_$A);var w_$n=w_$B._style._tf;this._next._fun.call(this._next,w_$B,w_$h,w_$l-w_$n.translateX,w_$A-w_$n.translateY)},w_$B._clip=function(w_$B,w_$h,w_$l,w_$A){var w_$n=this._next;if(w_$n!=w_$X.NORENDER){var w_$s=w_$B._style.scrollRect;w_$h.ctx.save(),w_$h.ctx.clipRect(w_$l,w_$A,w_$s.width,w_$s.height),w_$n._fun.call(w_$n,w_$B,w_$h,w_$l-w_$s.x,w_$A-w_$s.y),w_$h.ctx.restore()}},w_$B._blend=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._style;w_$n.blendMode&&(w_$h.ctx.globalCompositeOperation=w_$n.blendMode);var w_$s=this._next;w_$s._fun.call(w_$s,w_$B,w_$h,w_$l,w_$A),w_$h.ctx.globalCompositeOperation="source-over"},w_$B._mask=function(w_$B,w_$h,w_$l,w_$A){var w_$n=this._next;w_$n._fun.call(w_$n,w_$B,w_$h,w_$l,w_$A);var w_$s=w_$B.mask;w_$s&&(w_$h.ctx.globalCompositeOperation="destination-in",(0<w_$s.numChildren||!w_$s.graphics._isOnlyOne())&&(w_$s.cacheAsBitmap=!0),w_$s.render(w_$h,w_$l-w_$B.pivotX,w_$A-w_$B.pivotY)),w_$h.ctx.globalCompositeOperation="source-over"},w_$B._graphics=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._style._tf;w_$B._graphics&&w_$B._graphics._render(w_$B,w_$h,w_$l-w_$n.translateX,w_$A-w_$n.translateY);var w_$s=this._next;w_$s._fun.call(w_$s,w_$B,w_$h,w_$l,w_$A)},w_$B._image=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._style;w_$h.ctx.drawTexture2(w_$l,w_$A,w_$n._tf.translateX,w_$n._tf.translateY,w_$B.transform,w_$n.alpha,w_$n.blendMode,w_$B._graphics._one)},w_$B._image2=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._style._tf;w_$h.ctx.drawTexture2(w_$l,w_$A,w_$n.translateX,w_$n.translateY,w_$B.transform,1,null,w_$B._graphics._one)},w_$B._alpha=function(w_$B,w_$h,w_$l,w_$A){var w_$n;if(.01<(w_$n=w_$B._style.alpha)||w_$B._needRepaint()){var w_$s=w_$h.ctx.globalAlpha;w_$h.ctx.globalAlpha*=w_$n;var w_$X=this._next;w_$X._fun.call(w_$X,w_$B,w_$h,w_$l,w_$A),w_$h.ctx.globalAlpha=w_$s}},w_$B._transform=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.transform,w_$s=this._next;w_$n&&w_$s!=w_$X.NORENDER?(w_$h.save(),w_$h.transform(w_$n.a,w_$n.b,w_$n.c,w_$n.d,w_$n.tx+w_$l,w_$n.ty+w_$A),w_$s._fun.call(w_$s,w_$B,w_$h,0,0),w_$h.restore()):w_$s._fun.call(w_$s,w_$B,w_$h,w_$l,w_$A)},w_$B._childs=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._style,w_$s=w_$n._tf;if(w_$l=w_$l-w_$s.translateX+w_$n.paddingLeft,w_$A=w_$A-w_$s.translateY+w_$n.paddingTop,w_$n._calculation){var w_$X=w_$B._getWords();if(w_$X){var w_$Z=w_$n;w_$Z&&(w_$Z.stroke?w_$h.fillBorderWords(w_$X,w_$l,w_$A,w_$Z.font,w_$Z.color,w_$Z.strokeColor,w_$Z.stroke):w_$h.fillWords(w_$X,w_$l,w_$A,w_$Z.font,w_$Z.color,"none"!=w_$Z.textDecoration&&w_$Z.underLine?1:0))}}var w_$t,w_$P=w_$B._childs,w_$G=w_$P.length;if(w_$B.viewport||w_$B.optimizeScrollRect&&w_$B._style.scrollRect){var w_$T=w_$B.viewport||w_$B._style.scrollRect,w_$b=w_$T.x,w_$Q=w_$T.y,w_$i=w_$T.right,w_$$=w_$T.bottom,w_$V=NaN,w_$J=NaN;for(w_$H=0;w_$H<w_$G;++w_$H)(w_$t=w_$P[w_$H]).visible&&(w_$V=w_$t._x)<w_$i&&w_$V+w_$t.width>w_$b&&(w_$J=w_$t._y)<w_$$&&w_$J+w_$t.height>w_$Q&&w_$t.render(w_$h,w_$l,w_$A)}else for(var w_$H=0;w_$H<w_$G;++w_$H)(w_$t=w_$P[w_$H])._style.visible&&w_$t.render(w_$h,w_$l,w_$A)},w_$B._canvas=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._$P.cacheCanvas;if(w_$n){"bitmap"===w_$n.type?w_$f.canvasBitmap++:w_$f.canvasNormal++;var w_$s=w_$n.ctx;if(w_$B._needRepaint()||!w_$s)this._canvas_repaint(w_$B,w_$h,w_$l,w_$A);else{var w_$X=w_$n._cacheRec;w_$h.drawCanvas(w_$s.canvas,w_$l+w_$X.x,w_$A+w_$X.y,w_$X.width,w_$X.height)}}else this._next._fun.call(this._next,w_$B,w_$h,w_$l,w_$A)},w_$B._canvas_repaint=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._$P.cacheCanvas,w_$s=this._next;if(w_$n){var w_$X,w_$Z,w_$t,w_$P,w_$G=w_$n.ctx,w_$T=w_$B._needRepaint()||!w_$G,w_$b=w_$n.type;if("bitmap"===w_$b?w_$f.canvasBitmap++:w_$f.canvasNormal++,w_$T){var w_$Q,w_$i;w_$n._cacheRec||(w_$n._cacheRec=new w_$x),w_$M.isWebGL&&"bitmap"!==w_$b?w_$n._cacheRec.setTo(-w_$B.pivotX,-w_$B.pivotY,1,1):((w_$P=w_$B.getSelfBounds()).x=w_$P.x-w_$B.pivotX,w_$P.y=w_$P.y-w_$B.pivotY,w_$P.x=w_$P.x-16,w_$P.y=w_$P.y-16,w_$P.width=w_$P.width+32,w_$P.height=w_$P.height+32,w_$P.x=Math.floor(w_$P.x+w_$l)-w_$l,w_$P.y=Math.floor(w_$P.y+w_$A)-w_$A,w_$P.width=Math.floor(w_$P.width),w_$P.height=Math.floor(w_$P.height),w_$n._cacheRec.copyFrom(w_$P)),w_$P=w_$n._cacheRec;var w_$$,w_$V=w_$M.isWebGL?1:w_$d.pixelRatio*w_$v.stage.clientScaleX,w_$J=w_$M.isWebGL?1:w_$d.pixelRatio*w_$v.stage.clientScaleY;if(!w_$M.isWebGL){var w_$H,w_$y=1,w_$C=1;for(w_$H=w_$B;w_$H&&w_$H!=w_$v.stage;)w_$y*=w_$H.scaleX,w_$C*=w_$H.scaleY,w_$H=w_$H.parent;w_$M.isWebGL?(w_$y<1&&(w_$V*=w_$y),w_$C<1&&(w_$J*=w_$C)):(1<w_$y&&(w_$V*=w_$y),1<w_$C&&(w_$J*=w_$C))}if(w_$B.scrollRect){var w_$o=w_$B.scrollRect;w_$P.x-=w_$o.x,w_$P.y-=w_$o.y}if(w_$Q=w_$P.width*w_$V,w_$i=w_$P.height*w_$J,w_$Z=w_$P.x,w_$t=w_$P.y,w_$M.isWebGL&&"bitmap"===w_$b&&(2048<w_$Q||2048<w_$i))return console.warn("cache bitmap size larger than 2048,cache ignored"),w_$n.ctx&&(w_$K.recover("RenderContext",w_$n.ctx),w_$n.ctx.canvas.size(0,0),w_$n.ctx=null),void w_$s._fun.call(w_$s,w_$B,w_$h,w_$l,w_$A);if(w_$G||(w_$G=w_$n.ctx=w_$K.getItem("RenderContext")||new w_$E(w_$Q,w_$i,w_$yB.create("AUTO"))),w_$G.ctx.sprite=w_$B,(w_$X=w_$G.canvas).clear(),(w_$X.width!=w_$Q||w_$X.height!=w_$i)&&w_$X.size(w_$Q,w_$i),"bitmap"===w_$b?w_$X.context.asBitmap=!0:"normal"===w_$b&&(w_$X.context.asBitmap=!1),1!=w_$V||1!=w_$J){var w_$u=w_$G.ctx;w_$u.save(),w_$u.scale(w_$V,w_$J),!w_$M.isConchWebGL&&w_$M.isConchApp&&(w_$$=w_$B._$P.cf)&&w_$u.setFilterMatrix&&w_$u.setFilterMatrix(w_$$._mat,w_$$._alpha),w_$s._fun.call(w_$s,w_$B,w_$G,-w_$Z,-w_$t),w_$u.restore(),w_$M.isConchApp&&!w_$M.isConchWebGL||w_$B._applyFilters()}else w_$u=w_$G.ctx,!w_$M.isConchWebGL&&w_$M.isConchApp&&(w_$$=w_$B._$P.cf)&&w_$u.setFilterMatrix&&w_$u.setFilterMatrix(w_$$._mat,w_$$._alpha),w_$s._fun.call(w_$s,w_$B,w_$G,-w_$Z,-w_$t),w_$M.isConchApp&&!w_$M.isConchWebGL||w_$B._applyFilters();w_$B._$P.staticCache&&(w_$n.reCache=!1),w_$f.canvasReCache++}else w_$Z=(w_$P=w_$n._cacheRec).x,w_$t=w_$P.y,w_$X=w_$G.canvas;w_$h.drawCanvas(w_$X,w_$l+w_$Z,w_$A+w_$t,w_$P.width,w_$P.height)}else w_$s._fun.call(w_$s,w_$B,w_$G,w_$l,w_$A)},w_$X.__init__=function(){var w_$B,w_$h,w_$l=0;for(w_$h=w_$S.createRenderSprite(69905,null),w_$B=w_$X.renders.length=4096,w_$l=0;w_$l<w_$B;w_$l++)w_$X.renders[w_$l]=w_$h;w_$X.renders[0]=w_$S.createRenderSprite(0,null),function(w_$B,w_$h){for(var w_$l=0,w_$A=0;w_$A<w_$B.length;w_$A++)w_$l|=w_$B[w_$A],w_$X.renders[w_$l]=w_$h}([1,512,4,2],new w_$X(1,null)),w_$X.renders[513]=w_$S.createRenderSprite(513,null),w_$X.renders[517]=new w_$X(517,null)},w_$X._initRenderFun=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._renderType;(w_$X.renders[w_$n]=w_$X._getTypeRender(w_$n))._fun(w_$B,w_$h,w_$l,w_$A)},w_$X._getTypeRender=function(w_$B){for(var w_$h=null,w_$l=2048;1<w_$l;)w_$l&w_$B&&(w_$h=w_$S.createRenderSprite(w_$l,w_$h)),w_$l>>=1;return w_$h},w_$X.IMAGE=1,w_$X.ALPHA=2,w_$X.TRANSFORM=4,w_$X.BLEND=8,w_$X.CANVAS=16,w_$X.FILTERS=32,w_$X.MASK=64,w_$X.CLIP=128,w_$X.STYLE=256,w_$X.GRAPHICS=512,w_$X.CUSTOM=1024,w_$X.CHILDS=2048,w_$X.INIT=69905,w_$X.renders=[],w_$X.NORENDER=new w_$X(0,null),w_$X}(),w_$g=function(){function w_$Z(){this._repaint=!1}w_$G(w_$Z,"laya.resource.Context");var w_$B=w_$Z.prototype;return w_$B.replaceReset=function(){var w_$B,w_$h,w_$l=0;for(w_$B=w_$Z.replaceKeys.length,w_$l=0;w_$l<w_$B;w_$l++)w_$h=w_$Z.replaceKeys[w_$l],this[w_$Z.newKeys[w_$l]]=this[w_$h]},w_$B.replaceResotre=function(){this.__restore(),this.__reset()},w_$B.setIsMainContext=function(){},w_$B.drawTextures=function(w_$B,w_$h,w_$l,w_$A){w_$f.drawCall+=w_$h.length/2;for(var w_$n=w_$B.width,w_$s=w_$B.height,w_$X=0,w_$Z=w_$h.length;w_$X<w_$Z;w_$X+=2)this.drawTexture(w_$B,w_$h[w_$X],w_$h[w_$X+1],w_$n,w_$s,w_$l,w_$A)},w_$B.drawCanvas=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$f.drawCall++,this.drawImage(w_$B.source,w_$h,w_$l,w_$A,w_$n)},w_$B.fillRect=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$f.drawCall++,w_$n&&(this.fillStyle=w_$n),this.__fillRect(w_$B,w_$h,w_$l,w_$A)},w_$B.fillText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){w_$f.drawCall++,3<arguments.length&&null!=w_$A&&(this.font=w_$A,this.fillStyle=w_$n,this.textAlign=w_$s,this.textBaseline="top"),this.__fillText(w_$B,w_$h,w_$l)},w_$B.fillBorderText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){w_$f.drawCall++,this.font=w_$A,this.fillStyle=w_$n,this.textBaseline="top",this.strokeStyle=w_$s,this.lineWidth=w_$X,this.textAlign=w_$Z,this.__strokeText(w_$B,w_$h,w_$l),this.__fillText(w_$B,w_$h,w_$l)},w_$B.strokeText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$f.drawCall++,3<arguments.length&&null!=w_$A&&(this.font=w_$A,this.strokeStyle=w_$n,this.lineWidth=w_$s,this.textAlign=w_$X,this.textBaseline="top"),this.__strokeText(w_$B,w_$h,w_$l)},w_$B.transformByMatrix=function(w_$B){this.transform(w_$B.a,w_$B.b,w_$B.c,w_$B.d,w_$B.tx,w_$B.ty)},w_$B.setTransformByMatrix=function(w_$B){this.setTransform(w_$B.a,w_$B.b,w_$B.c,w_$B.d,w_$B.tx,w_$B.ty)},w_$B.clipRect=function(w_$B,w_$h,w_$l,w_$A){w_$f.drawCall++,this.beginPath(),this.rect(w_$B,w_$h,w_$l,w_$A),this.clip()},w_$B.drawTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$f.drawCall++;var w_$Z=w_$B.uv,w_$t=w_$B.bitmap.width,w_$P=w_$B.bitmap.height;this.drawImage(w_$B.source,w_$Z[0]*w_$t,w_$Z[1]*w_$P,(w_$Z[2]-w_$Z[0])*w_$t,(w_$Z[5]-w_$Z[3])*w_$P,w_$h+w_$s,w_$l+w_$X,w_$A,w_$n)},w_$B.drawTextureWithTransform=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){w_$f.drawCall++;var w_$P=w_$B.uv,w_$G=w_$B.bitmap.width,w_$T=w_$B.bitmap.height;this.save(),1!=w_$t&&(this.globalAlpha*=w_$t),w_$s?(this.transform(w_$s.a,w_$s.b,w_$s.c,w_$s.d,w_$s.tx+w_$X,w_$s.ty+w_$Z),this.drawImage(w_$B.source,w_$P[0]*w_$G,w_$P[1]*w_$T,(w_$P[2]-w_$P[0])*w_$G,(w_$P[5]-w_$P[3])*w_$T,w_$h,w_$l,w_$A,w_$n)):this.drawImage(w_$B.source,w_$P[0]*w_$G,w_$P[1]*w_$T,(w_$P[2]-w_$P[0])*w_$G,(w_$P[5]-w_$P[3])*w_$T,w_$h+w_$X,w_$l+w_$Z,w_$A,w_$n),this.restore()},w_$B.drawTexture2=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){var w_$t=w_$Z[0];if(w_$t.loaded&&w_$t.bitmap&&w_$t.source){w_$f.drawCall++;var w_$P=1!==w_$s;if(w_$P){var w_$G=this.globalAlpha;this.globalAlpha*=w_$s}var w_$T=w_$t.uv,w_$b=w_$t.bitmap.width,w_$Q=w_$t.bitmap.height;w_$n?(this.save(),this.transform(w_$n.a,w_$n.b,w_$n.c,w_$n.d,w_$n.tx+w_$B,w_$n.ty+w_$h),this.drawImage(w_$t.source,w_$T[0]*w_$b,w_$T[1]*w_$Q,(w_$T[2]-w_$T[0])*w_$b,(w_$T[5]-w_$T[3])*w_$Q,w_$Z[1]-w_$l,w_$Z[2]-w_$A,w_$Z[3],w_$Z[4]),this.restore()):this.drawImage(w_$t.source,w_$T[0]*w_$b,w_$T[1]*w_$Q,(w_$T[2]-w_$T[0])*w_$b,(w_$T[5]-w_$T[3])*w_$Q,w_$Z[1]-w_$l+w_$B,w_$Z[2]-w_$A+w_$h,w_$Z[3],w_$Z[4]),w_$P&&(this.globalAlpha=w_$G)}},w_$B.fillTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){if(!w_$Z.pat){if(w_$B.uv!=w_$GB.DEF_UV){var w_$t=new w_$yB("2D");w_$t.getContext("2d"),w_$t.size(w_$B.width,w_$B.height),w_$t.context.drawTexture(w_$B,0,0,w_$B.width,w_$B.height,0,0),w_$B=new w_$GB(w_$t)}w_$Z.pat=this.createPattern(w_$B.bitmap.source,w_$s)}var w_$P=w_$h,w_$G=w_$l,w_$T=0,w_$b=0;w_$X&&(w_$P+=w_$X.x%w_$B.width,w_$G+=w_$X.y%w_$B.height,w_$T-=w_$X.x%w_$B.width,w_$b-=w_$X.y%w_$B.height),this.translate(w_$P,w_$G),this.fillRect(w_$T,w_$b,w_$A,w_$n,w_$Z.pat),this.translate(-w_$P,-w_$G)},w_$B.drawTriangle=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){var w_$t=w_$B.bitmap,w_$P=w_$t.source,w_$G=w_$B.width,w_$T=w_$B.height,w_$b=w_$t.width,w_$Q=w_$t.height,w_$i=w_$l[w_$A]*w_$b,w_$$=w_$l[w_$n]*w_$b,w_$V=w_$l[w_$s]*w_$b,w_$J=w_$l[w_$A+1]*w_$Q,w_$H=w_$l[w_$n+1]*w_$Q,w_$y=w_$l[w_$s+1]*w_$Q,w_$C=w_$h[w_$A],w_$o=w_$h[w_$n],w_$u=w_$h[w_$s],w_$v=w_$h[w_$A+1],w_$U=w_$h[w_$n+1],w_$x=w_$h[w_$s+1];if(w_$Z){var w_$w=(w_$C+w_$o+w_$u)/3,w_$z=(w_$v+w_$U+w_$x)/3,w_$a=w_$C-w_$w,w_$S=w_$v-w_$z,w_$N=Math.sqrt(w_$a*w_$a+w_$S*w_$S);w_$C=w_$w+w_$a/w_$N*(w_$N+1),w_$v=w_$z+w_$S/w_$N*(w_$N+1),w_$S=w_$U-w_$z,w_$o=w_$w+(w_$a=w_$o-w_$w)/(w_$N=Math.sqrt(w_$a*w_$a+w_$S*w_$S))*(w_$N+1),w_$U=w_$z+w_$S/w_$N*(w_$N+1),w_$S=w_$x-w_$z,w_$u=w_$w+(w_$a=w_$u-w_$w)/(w_$N=Math.sqrt(w_$a*w_$a+w_$S*w_$S))*(w_$N+1),w_$x=w_$z+w_$S/w_$N*(w_$N+1)}this.save(),w_$X&&this.transform(w_$X.a,w_$X.b,w_$X.c,w_$X.d,w_$X.tx,w_$X.ty),this.beginPath(),this.moveTo(w_$C,w_$v),this.lineTo(w_$o,w_$U),this.lineTo(w_$u,w_$x),this.closePath(),this.clip();var w_$R=1/(w_$i*w_$H+w_$J*w_$V+w_$$*w_$y-w_$H*w_$V-w_$J*w_$$-w_$i*w_$y),w_$W=w_$C*w_$H+w_$J*w_$u+w_$o*w_$y-w_$H*w_$u-w_$J*w_$o-w_$C*w_$y,w_$M=w_$i*w_$o+w_$C*w_$V+w_$$*w_$u-w_$o*w_$V-w_$C*w_$$-w_$i*w_$u,w_$E=w_$i*w_$H*w_$u+w_$J*w_$o*w_$V+w_$C*w_$$*w_$y-w_$C*w_$H*w_$V-w_$J*w_$$*w_$u-w_$i*w_$o*w_$y,w_$j=w_$v*w_$H+w_$J*w_$x+w_$U*w_$y-w_$H*w_$x-w_$J*w_$U-w_$v*w_$y,w_$g=w_$i*w_$U+w_$v*w_$V+w_$$*w_$x-w_$U*w_$V-w_$v*w_$$-w_$i*w_$x,w_$_=w_$i*w_$H*w_$x+w_$J*w_$U*w_$V+w_$v*w_$$*w_$y-w_$v*w_$H*w_$V-w_$J*w_$$*w_$x-w_$i*w_$U*w_$y;this.transform(w_$W*w_$R,w_$j*w_$R,w_$M*w_$R,w_$g*w_$R,w_$E*w_$R,w_$_*w_$R),this.drawImage(w_$P,w_$B.uv[0]*w_$b,w_$B.uv[1]*w_$Q,w_$G,w_$T,w_$B.uv[0]*w_$b,w_$B.uv[1]*w_$Q,w_$G,w_$T),this.restore()},w_$B.flush=function(){return 0},w_$B.fillWords=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){w_$A&&(this.font=w_$A),w_$n&&(this.fillStyle=w_$n);this.textBaseline="top",this.textAlign="left";for(var w_$X=0,w_$Z=w_$B.length;w_$X<w_$Z;w_$X++){var w_$t=w_$B[w_$X];if(this.__fillText(w_$t.char,w_$t.x+w_$h,w_$t.y+w_$l),1===w_$s){var w_$P=w_$t.height,w_$G=.5*w_$t.style.letterSpacing;w_$G||(w_$G=0),this.beginPath(),this.strokeStyle=w_$n,this.lineWidth=1,this.moveTo(w_$h+w_$t.x-w_$G+.5,w_$l+w_$t.y+w_$P+.5),this.lineTo(w_$h+w_$t.x+w_$t.width+w_$G+.5,w_$l+w_$t.y+w_$P+.5),this.stroke()}}},w_$B.fillBorderWords=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$A&&(this.font=w_$A),w_$n&&(this.fillStyle=w_$n),this.textBaseline="top",this.lineWidth=w_$X,this.textAlign="left",this.strokeStyle=w_$s;for(var w_$Z=0,w_$t=w_$B.length;w_$Z<w_$t;w_$Z++){var w_$P=w_$B[w_$Z];this.__strokeText(w_$P.char,w_$P.x+w_$h,w_$P.y+w_$l),this.__fillText(w_$P.char,w_$P.x+w_$h,w_$P.y+w_$l)}},w_$B.destroy=function(){this.canvas.width=this.canvas.height=0},w_$B.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},w_$B.drawCurves=function(w_$B,w_$h,w_$l){this.beginPath(),this.strokeStyle=w_$l[3],this.lineWidth=w_$l[4];var w_$A=w_$l[2];w_$B+=w_$l[0],w_$h+=w_$l[1],this.moveTo(w_$B+w_$A[0],w_$h+w_$A[1]);for(var w_$n=2,w_$s=w_$A.length;w_$n<w_$s;)this.quadraticCurveTo(w_$B+w_$A[w_$n++],w_$h+w_$A[w_$n++],w_$B+w_$A[w_$n++],w_$h+w_$A[w_$n++]);this.stroke()},w_$Z.__init__=function(w_$h){var w_$l=laya.resource.Context.prototype;if(!(w_$h=w_$h||CanvasRenderingContext2D.prototype).inited){w_$h.inited=!0,w_$h.__fillText=w_$h.fillText,w_$h.__fillRect=w_$h.fillRect,w_$h.__strokeText=w_$h.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(w_$B){w_$h[w_$B]=w_$l[w_$B]})}},w_$Z.replaceCanvasGetSet=function(w_$B,w_$h){var w_$l=Object.getOwnPropertyDescriptor(w_$B,w_$h);if(!w_$l||!w_$l.configurable)return!1;var w_$A,w_$n={};for(w_$A in w_$l)"set"!=w_$A&&(w_$n[w_$A]=w_$l[w_$A]);var w_$s=w_$l.set;return w_$n.set=function(w_$B){w_$s.call(this,w_$B);var w_$h=this.getContext("2d");w_$h&&"__reset"in w_$h&&w_$h.__reset()},Object.defineProperty(w_$B,w_$h,w_$n),!0},w_$Z.replaceGetSet=function(w_$B,w_$h){var w_$l=Object.getOwnPropertyDescriptor(w_$B,w_$h);if(!w_$l||!w_$l.configurable)return!1;var w_$A,w_$n={};for(w_$A in w_$l)"set"!=w_$A&&(w_$n[w_$A]=w_$l[w_$A]);var w_$s=w_$l.set,w_$X="___"+w_$h+"__";return w_$Z.newKeys.push(w_$X),w_$n.set=function(w_$B){w_$B!=this[w_$X]&&(this[w_$X]=w_$B,w_$s.call(this,w_$B))},Object.defineProperty(w_$B,w_$h,w_$n),!0},w_$Z._default=new w_$Z,w_$Z.newKeys=[],w_$t(w_$Z,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),w_$Z}(),w_$_=function(){function w_$s(w_$B){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++w_$s._uniqueIDCounter,this._name=w_$B||"Content Manager",w_$s._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,w_$s._resourceManagers.push(this),this._resources=[],this._records={}}w_$G(w_$s,"laya.resource.ResourceManager");var w_$B=w_$s.prototype;return w_$v.imps(w_$B,{"laya.resource.IDispose":!0}),w_$B.getResourceByIndex=function(w_$B){return this._resources[w_$B]},w_$B.getResourcesLength=function(){return this._resources.length},w_$B.addResource=function(w_$B){return w_$B.resourceManager&&w_$B.resourceManager.removeResource(w_$B),-1===this._resources.indexOf(w_$B)&&((w_$B._resourceManager=this)._resources.push(w_$B),this.addRecord(w_$B.uri,w_$B.__className,w_$B.memorySize),this.addSize(w_$B.memorySize),!0)},w_$B.removeResource=function(w_$B){var w_$h=this._resources.indexOf(w_$B);return-1!==w_$h&&(this._resources.splice(w_$h,1),w_$B._resourceManager=null,this._memorySize-=w_$B.memorySize,this.addRecord(w_$B.uri,w_$B.__className,-w_$B.memorySize),!0)},w_$B.unload=function(){for(var w_$B=this._resources.slice(0,this._resources.length),w_$h=0;w_$h<w_$B.length;w_$h++){w_$B[w_$h].destroy()}w_$B.length=0},w_$B.dispose=function(){if(this===w_$s._systemResourceManager)throw new Error("systemResourceManager不能被释放！");w_$s._resourceManagers.splice(w_$s._resourceManagers.indexOf(this),1),w_$s._isResourceManagersSorted=!1;for(var w_$B=this._resources.slice(0,this._resources.length),w_$h=0;w_$h<w_$B.length;w_$h++){var w_$l=w_$B[w_$h];w_$l.resourceManager.removeResource(w_$l),w_$l.destroy()}w_$B.length=0},w_$B.addSize=function(w_$B){w_$B&&(this.autoRelease&&0<w_$B&&this._memorySize+w_$B>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=w_$B)},w_$B.addRecord=function(w_$B,w_$h,w_$l){DEBUG&&w_$l&&!w_$B&&console.error(w_$B,w_$h,w_$l),w_$B&&(this._records.hasOwnProperty(w_$h+"|"+w_$B)||(this._records[w_$h+"|"+w_$B]=0),this._records[w_$h+"|"+w_$B]+=w_$l,DEBUG&&this._records[w_$h+"|"+w_$B]<0&&console.error(w_$B,w_$h,this._records[w_$h+"|"+w_$B]))},w_$B.garbageCollection=function(w_$B){var w_$h=this._resources;(w_$h=w_$h.slice()).sort(function(w_$B,w_$h){if(!w_$B||!w_$h)throw new Error("a或b不能为空！");return w_$B.released&&w_$h.released?0:w_$B.released?1:w_$h.released?-1:w_$B._lastUseFrameCount-w_$h._lastUseFrameCount});for(var w_$l=w_$f.loopCount,w_$A=0,w_$n=w_$h.length;w_$A<w_$n;w_$A++){var w_$s=w_$h[w_$A];if(!(1<w_$l-w_$s._lastUseFrameCount))return void(this._memorySize>=w_$B&&(this._isOverflow=!0));if(w_$s.releaseResource(),this._memorySize<w_$B)return void(this._isOverflow=!1)}},w_$i(0,w_$B,"id",function(){return this._id}),w_$i(0,w_$B,"name",function(){return this._name},function(w_$B){!w_$B&&""===w_$B||this._name===w_$B||(this._name=w_$B,w_$s._isResourceManagersSorted=!1)}),w_$i(0,w_$B,"memorySize",function(){return this._memorySize}),w_$i(0,w_$B,"records",function(){return this._records}),w_$i(1,w_$s,"systemResourceManager",function(){return w_$s._systemResourceManager}),w_$s.__init__=function(){w_$s.currentResourceManager=w_$s.systemResourceManager},w_$s.getLoadedResourceManagerByIndex=function(w_$B){return w_$s._resourceManagers[w_$B]},w_$s.getLoadedResourceManagersCount=function(){return w_$s._resourceManagers.length},w_$s.recreateContentManagers=function(w_$B){void 0===w_$B&&(w_$B=!1);for(var w_$h=w_$s.currentResourceManager,w_$l=0;w_$l<w_$s._resourceManagers.length;w_$l++){w_$s.currentResourceManager=w_$s._resourceManagers[w_$l];for(var w_$A=0;w_$A<w_$s.currentResourceManager._resources.length;w_$A++)w_$s.currentResourceManager._resources[w_$A].releaseResource(w_$B),w_$s.currentResourceManager._resources[w_$A].activeResource(w_$B)}w_$s.currentResourceManager=w_$h},w_$s.releaseContentManagers=function(w_$B){void 0===w_$B&&(w_$B=!1);for(var w_$h=w_$s.currentResourceManager,w_$l=0;w_$l<w_$s._resourceManagers.length;w_$l++){w_$s.currentResourceManager=w_$s._resourceManagers[w_$l];for(var w_$A=0;w_$A<w_$s.currentResourceManager._resources.length;w_$A++){var w_$n=w_$s.currentResourceManager._resources[w_$A];!w_$n.released&&w_$n.releaseResource(w_$B)}}w_$s.currentResourceManager=w_$h},w_$s._uniqueIDCounter=0,w_$s._isResourceManagersSorted=!1,w_$s._resourceManagers=[],w_$t(w_$s,["_systemResourceManager",function(){return this._systemResourceManager=new w_$s("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=w_$s._systemResourceManager}]),w_$s}(),w_$d=(function(){function w_$B(){}w_$G(w_$B,"laya.system.System"),w_$B.changeDefinition=function(w_$B,w_$h){w_$v[w_$B]=w_$h;var w_$l=w_$B+"=classObj";w_$v._runScript(w_$l)},w_$B.__init__=function(){w_$M.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function w_$l(){}return w_$G(w_$l,"laya.utils.Browser"),w_$i(1,w_$l,"pixelRatio",function(){return w_$l.__init__(),-1<w_$l.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:w_$S.getPixelRatio()}),w_$i(1,w_$l,"height",function(){return w_$l.__init__(),(w_$v.stage&&w_$v.stage.canvasRotation?w_$l.clientWidth:w_$l.clientHeight)*w_$l.pixelRatio}),w_$i(1,w_$l,"clientWidth",function(){return w_$l.__init__(),w_$l.window.innerWidth||w_$l.document.body.clientWidth}),w_$i(1,w_$l,"window",function(){return w_$l.__init__(),w_$l._window}),w_$i(1,w_$l,"clientHeight",function(){return w_$l.__init__(),w_$l.window.innerHeight||w_$l.document.body.clientHeight||w_$l.document.documentElement.clientHeight}),w_$i(1,w_$l,"width",function(){return w_$l.__init__(),(w_$v.stage&&w_$v.stage.canvasRotation?w_$l.clientHeight:w_$l.clientWidth)*w_$l.pixelRatio}),w_$i(1,w_$l,"container",function(){return w_$l.__init__(),w_$l._container||((w_$l._container=w_$l.createElement("div")).id="layaContainer",w_$l.document.body.appendChild(w_$l._container)),w_$l._container},function(w_$B){w_$l._container=w_$B}),w_$i(1,w_$l,"document",function(){return w_$l.__init__(),w_$l._document}),w_$l.__init__=function(){if(!w_$l._window){w_$l._window=w_$S.getWindow(),w_$l._document=w_$l.window.document,w_$l._window.addEventListener("message",function(w_$B){laya.utils.Browser._onMessage(w_$B)},!1),w_$l.document.__createElement=w_$l.document.createElement,w_$X.requestAnimationFrame=w_$X.requestAnimationFrame||w_$X.webkitRequestAnimationFrame||w_$X.mozRequestAnimationFrame||w_$X.oRequestAnimationFrame||w_$X.msRequestAnimationFrame||function(w_$B){return w_$X.setTimeout(w_$B,1e3/60)};var w_$B=w_$X.document.body.style;w_$B["-webkit-user-select"]="none",w_$B["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",w_$l.userAgent=w_$l.window.navigator.userAgent,w_$l.onIOS=!!(w_$l.u=w_$l.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),w_$l.onMobile=-1<w_$l.u.indexOf("Mobile"),w_$l.onIPhone=-1<w_$l.u.indexOf("iPhone"),w_$l.onMac=-1<w_$l.u.indexOf("Mac OS X"),w_$l.onIPad=-1<w_$l.u.indexOf("iPad"),w_$l.onAndroid=-1<w_$l.u.indexOf("Android")||-1<w_$l.u.indexOf("Adr"),w_$l.onWP=-1<w_$l.u.indexOf("Windows Phone"),w_$l.onQQBrowser=-1<w_$l.u.indexOf("QQBrowser"),w_$l.onMQQBrowser=-1<w_$l.u.indexOf("MQQBrowser")||-1<w_$l.u.indexOf("Mobile")&&-1<w_$l.u.indexOf("QQ"),w_$l.onIE=!!w_$l.window.ActiveXObject||"ActiveXObject"in w_$l.window,w_$l.onWeiXin=-1<w_$l.u.indexOf("MicroMessenger"),w_$l.onPC=!w_$l.onMobile,w_$l.onSafari=-1<w_$l.u.indexOf("Safari"),w_$l.onFirefox=-1<w_$l.u.indexOf("Firefox"),w_$l.onEdge=-1<w_$l.u.indexOf("Edge"),w_$l.onMiniGame=-1<w_$l.u.indexOf("MiniGame"),w_$l.onLimixiu=-1<w_$l.u.indexOf("limixiu"),w_$l.httpProtocol="http:"==w_$l.window.location.protocol,w_$l.onMiniGame&&null==w_$l.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),w_$l.webAudioEnabled=!!(w_$l.window.AudioContext||w_$l.window.webkitAudioContext||w_$l.window.mozAudioContext),w_$l.soundType=w_$l.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",w_$nB=w_$l.webAudioEnabled?w_$sB:w_$lB,w_$l.webAudioEnabled&&w_$sB.initWebAudio(),w_$lB._initMusicAudio(),w_$l.enableTouch="ontouchstart"in w_$X||w_$X.DocumentTouch&&w_$h instanceof DocumentTouch,w_$X.focus(),w_$a._soundClass=w_$nB,w_$a._musicClass=w_$lB,w_$M._mainCanvas=w_$M._mainCanvas||w_$yB.create("2D"),w_$l.canvas||(w_$l.canvas=w_$yB.create("2D"),w_$l.context=w_$l.canvas.getContext("2d"))}},w_$l._onMessage=function(w_$B){if(w_$B.data&&"size"==w_$B.data.name){if(w_$l.window.innerWidth=w_$B.data.width,w_$l.window.innerHeight=w_$B.data.height,w_$l.window.__innerHeight=w_$B.data.clientHeight,!w_$l.document.createEvent)return void console.warn("no document.createEvent");var w_$h=w_$l.document.createEvent("HTMLEvents");return w_$h.initEvent("resize",!1,!1),void w_$l.window.dispatchEvent(w_$h)}},w_$l.createElement=function(w_$B){return w_$l.__init__(),w_$l.document.__createElement(w_$B)},w_$l.getElementById=function(w_$B){return w_$l.__init__(),w_$l.document.getElementById(w_$B)},w_$l.removeElement=function(w_$B){w_$B&&w_$B.parentNode&&w_$B.parentNode.removeChild(w_$B)},w_$l.now=function(){return w_$S.now()},w_$l._window=null,w_$l._document=null,w_$l._container=null,w_$l.userAgent=null,w_$l.u=null,w_$l.onIOS=!1,w_$l.onMac=!1,w_$l.onMobile=!1,w_$l.onIPhone=!1,w_$l.onIPad=!1,w_$l.onAndroid=!1,w_$l.onWP=!1,w_$l.onQQBrowser=!1,w_$l.onMQQBrowser=!1,w_$l.onSafari=!1,w_$l.onFirefox=!1,w_$l.onEdge=!1,w_$l.onIE=!1,w_$l.onWeiXin=!1,w_$l.onMiniGame=!1,w_$l.onLimixiu=!1,w_$l.onPC=!1,w_$l.httpProtocol=!1,w_$l.webAudioEnabled=!1,w_$l.soundType=null,w_$l.enableTouch=!1,w_$l.canvas=null,w_$l.context=null,w_$l.__init$=function(){},w_$l}()),w_$k=function(){function w_$h(w_$B){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,w_$B?(this._u8d_=new Uint8Array(w_$B),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}w_$G(w_$h,"laya.utils.Byte");var w_$B=w_$h.prototype;return w_$B.___resizeBuffer=function(w_$h){try{var w_$B=new Uint8Array(w_$h);null!=this._u8d_&&(this._u8d_.length<=w_$h?w_$B.set(this._u8d_):w_$B.set(this._u8d_.subarray(0,w_$h))),this._u8d_=w_$B,this._d_=new DataView(w_$B.buffer)}catch(w_$B){throw"___resizeBuffer err:"+w_$h}},w_$B.getString=function(){return this.rUTF(this.getUint16())},w_$B.getFloat32Array=function(w_$B,w_$h){var w_$l=w_$B+w_$h;w_$l=w_$l>this._length?this._length:w_$l;var w_$A=new Float32Array(this._d_.buffer.slice(w_$B,w_$l));return this._pos_=w_$l,w_$A},w_$B.getUint8Array=function(w_$B,w_$h){var w_$l=w_$B+w_$h;w_$l=w_$l>this._length?this._length:w_$l;var w_$A=new Uint8Array(this._d_.buffer.slice(w_$B,w_$l));return this._pos_=w_$l,w_$A},w_$B.getInt16Array=function(w_$B,w_$h){var w_$l=w_$B+w_$h;w_$l=w_$l>this._length?this._length:w_$l;var w_$A=new Int16Array(this._d_.buffer.slice(w_$B,w_$l));return this._pos_=w_$l,w_$A},w_$B.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var w_$B=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,w_$B},w_$B.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var w_$B=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,w_$B},w_$B.writeFloat32=function(w_$B){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,w_$B,this._xd_),this._pos_+=4},w_$B.writeFloat64=function(w_$B){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,w_$B,this._xd_),this._pos_+=8},w_$B.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var w_$B=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,w_$B},w_$B.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var w_$B=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,w_$B},w_$B.writeInt32=function(w_$B){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,w_$B,this._xd_),this._pos_+=4},w_$B.writeUint32=function(w_$B){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,w_$B,this._xd_),this._pos_+=4},w_$B.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var w_$B=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,w_$B},w_$B.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var w_$B=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,w_$B},w_$B.writeUint16=function(w_$B){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,w_$B,this._xd_),this._pos_+=2},w_$B.writeInt16=function(w_$B){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,w_$B,this._xd_),this._pos_+=2},w_$B.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},w_$B.writeUint8=function(w_$B){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,w_$B),this._pos_++},w_$B._getUInt8=function(w_$B){return this._d_.getUint8(w_$B)},w_$B._getUint16=function(w_$B){return this._d_.getUint16(w_$B,this._xd_)},w_$B._getMatrix=function(){return new w_$N(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},w_$B.rUTF=function(w_$B){for(var w_$h=[],w_$l=this._pos_+w_$B,w_$A=0,w_$n=0,w_$s=0,w_$X=String.fromCharCode,w_$Z=this._u8d_;this._pos_<w_$l;)(w_$A=w_$Z[this._pos_++])<128?0!=w_$A&&w_$h.push(w_$X(w_$A)):w_$A<224?w_$h.push(w_$X((63&w_$A)<<6|127&w_$Z[this._pos_++])):w_$A<240?(w_$n=w_$Z[this._pos_++],w_$h.push(w_$X((31&w_$A)<<12|(127&w_$n)<<6|127&w_$Z[this._pos_++]))):(w_$n=w_$Z[this._pos_++],w_$s=w_$Z[this._pos_++],w_$h.push(w_$X((15&w_$A)<<18|(127&w_$n)<<12|w_$s<<6&127|127&w_$Z[this._pos_++]))),0;return w_$h.join("")},w_$B.getCustomString=function(w_$B){for(var w_$h=[],w_$l=0,w_$A=0,w_$n=0,w_$s=String.fromCharCode,w_$X=this._u8d_;0<w_$B;)if((w_$A=w_$X[this._pos_])<128)w_$h.push(w_$s(w_$A)),this._pos_++,w_$B--;else for(w_$l=w_$A-128,this._pos_++,w_$B-=w_$l;0<w_$l;)w_$A=w_$X[this._pos_++],w_$n=w_$X[this._pos_++],w_$h.push(w_$s(w_$n<<8|w_$A)),w_$l--;return w_$h.join("")},w_$B.clear=function(){this._pos_=0,this.length=0},w_$B.__getBuffer=function(){return this._d_.buffer},w_$B.writeUTFBytes=function(w_$B){for(var w_$h=0,w_$l=(w_$B+="").length;w_$h<w_$l;w_$h++){var w_$A=w_$B.charCodeAt(w_$h);w_$A<=127?this.writeByte(w_$A):w_$A<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|w_$A>>6,128|63&w_$A],this._pos_),this._pos_+=2):w_$A<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|w_$A>>12,128|w_$A>>6&63,128|63&w_$A],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|w_$A>>18,128|w_$A>>12&63,128|w_$A>>6&63,128|63&w_$A],this._pos_),this._pos_+=4)}},w_$B.writeUTFString=function(w_$B){var w_$h=this.pos;this.writeUint16(1),this.writeUTFBytes(w_$B);var w_$l=this.pos-w_$h-2;if(65536<=w_$l)throw"writeUTFString byte len more than 65536";this._d_.setUint16(w_$h,w_$l,this._xd_)},w_$B.readUTFString=function(){return this.readUTFBytes(this.getUint16())},w_$B.getUTFString=function(){return this.readUTFString()},w_$B.readUTFBytes=function(w_$B){if(void 0===w_$B&&(w_$B=-1),0==w_$B)return"";var w_$h=this.bytesAvailable;if(w_$h<w_$B)throw"readUTFBytes error - Out of bounds";return w_$B=0<w_$B?w_$B:w_$h,this.rUTF(w_$B)},w_$B.getUTFBytes=function(w_$B){return void 0===w_$B&&(w_$B=-1),this.readUTFBytes(w_$B)},w_$B.writeByte=function(w_$B){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,w_$B),this._pos_+=1},w_$B.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},w_$B.getByte=function(){return this.readByte()},w_$B.ensureWrite=function(w_$B){this._length<w_$B&&(this._length=w_$B),this._allocated_<w_$B&&(this.length=w_$B)},w_$B.writeArrayBuffer=function(w_$B,w_$h,w_$l){if(void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),w_$h<0||w_$l<0)throw"writeArrayBuffer error - Out of bounds";0==w_$l&&(w_$l=w_$B.byteLength-w_$h),this.ensureWrite(this._pos_+w_$l);var w_$A=new Uint8Array(w_$B);this._u8d_.set(w_$A.subarray(w_$h,w_$h+w_$l),this._pos_),this._pos_+=w_$l},w_$i(0,w_$B,"buffer",function(){var w_$B=this._d_.buffer;return w_$B.byteLength==this.length?w_$B:w_$B.slice(0,this.length)}),w_$i(0,w_$B,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(w_$B){this._xd_="littleEndian"==w_$B}),w_$i(0,w_$B,"length",function(){return this._length},function(w_$B){this._allocated_<w_$B?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(w_$B,2*this._allocated_))):this._allocated_>w_$B&&this.___resizeBuffer(this._allocated_=w_$B),this._length=w_$B}),w_$i(0,w_$B,"pos",function(){return this._pos_},function(w_$B){this._pos_=w_$B}),w_$i(0,w_$B,"bytesAvailable",function(){return this._length-this._pos_}),w_$h.getSystemEndian=function(){if(!w_$h._sysEndian){var w_$B=new ArrayBuffer(2);new DataView(w_$B).setInt16(0,256,!0),w_$h._sysEndian=256===new Int16Array(w_$B)[0]?"littleEndian":"bigEndian"}return w_$h._sysEndian},w_$h.BIG_ENDIAN="bigEndian",w_$h.LITTLE_ENDIAN="littleEndian",w_$h._sysEndian=null,w_$h}(),w_$O=function(){function w_$n(){}return w_$G(w_$n,"laya.utils.CacheManager"),w_$n.regCacheByFunction=function(w_$B,w_$h){var w_$l;w_$n.unRegCacheByFunction(w_$B,w_$h),w_$l={tryDispose:w_$B,getCacheList:w_$h},w_$n._cacheList.push(w_$l)},w_$n.unRegCacheByFunction=function(w_$B,w_$h){var w_$l,w_$A=0;for(w_$l=w_$n._cacheList.length,w_$A=0;w_$A<w_$l;w_$A++)if(w_$n._cacheList[w_$A].tryDispose==w_$B&&w_$n._cacheList[w_$A].getCacheList==w_$h)return void w_$n._cacheList.splice(w_$A,1)},w_$n.forceDispose=function(){var w_$B=0,w_$h=w_$n._cacheList.length;for(w_$B=0;w_$B<w_$h;w_$B++)w_$n._cacheList[w_$B].tryDispose(!0)},w_$n.beginCheck=function(w_$B){void 0===w_$B&&(w_$B=15e3),w_$v.timer.loop(w_$B,null,w_$n._checkLoop)},w_$n.stopCheck=function(){w_$v.timer.clear(null,w_$n._checkLoop)},w_$n._checkLoop=function(){var w_$B=w_$n._cacheList;if(!(w_$B.length<1)){var w_$h,w_$l=w_$d.now(),w_$A=0;for(w_$h=w_$A=w_$B.length;0<w_$A&&(w_$B[w_$n._index=++w_$n._index%w_$h].tryDispose(!1),!(w_$d.now()-w_$l>w_$n.loopTimeLimit));)w_$A--}},w_$n.loopTimeLimit=2,w_$n._cacheList=[],w_$n._index=0,w_$n}(),w_$p=function(){function w_$Q(){}return w_$G(w_$Q,"laya.utils.ClassUtils"),w_$Q.regClass=function(w_$B,w_$h){w_$Q._classMap[w_$B]=w_$h},w_$Q.getRegClass=function(w_$B){return w_$Q._classMap[w_$B]},w_$Q.getInstance=function(w_$B){var w_$h=w_$Q.getClass(w_$B);return w_$h?new w_$h:(console.warn("[error] Undefined class:",w_$B),null)},w_$Q.createByJson=function(w_$B,w_$h,w_$l,w_$A,w_$n){"string"==typeof w_$B&&(w_$B=JSON.parse(w_$B));var w_$s=w_$B.props;if(!w_$h&&!(w_$h=w_$n?w_$n.runWith(w_$B):w_$Q.getInstance(w_$s.runtime||w_$B.type)))return null;var w_$X=w_$B.child;if(w_$X)for(var w_$Z=0,w_$t=w_$X.length;w_$Z<w_$t;w_$Z++){var w_$P=w_$X[w_$Z];if("render"!==w_$P.props.name&&"render"!==w_$P.props.renderType||!w_$h._$set_itemRender)if("Graphic"==w_$P.type)w_$Q.addGraphicsToSprite(w_$P,w_$h);else if(w_$Q.isDrawType(w_$P.type))w_$Q.addGraphicToSprite(w_$P,w_$h,!0);else{var w_$G=w_$Q.createByJson(w_$P,null,w_$l,w_$A,w_$n);"Script"==w_$P.type?w_$G.hasOwnProperty("owner")?w_$G.owner=w_$h:w_$G.hasOwnProperty("target")&&(w_$G.target=w_$h):"mask"==w_$P.props.renderType?w_$h.mask=w_$G:w_$h.addChild(w_$G)}else w_$h.itemRender=w_$P}if(w_$s)for(var w_$T in w_$s){var w_$b=w_$s[w_$T];"var"===w_$T&&w_$l?w_$l[w_$b]=w_$h:w_$b instanceof Array&&"function"==typeof w_$h[w_$T]?w_$h[w_$T].apply(w_$h,w_$b):w_$h[w_$T]=w_$b}return w_$A&&w_$B.customProps&&w_$A.runWith([w_$h,w_$B]),w_$h.created&&w_$h.created(),w_$h},w_$Q.addGraphicsToSprite=function(w_$B,w_$h){var w_$l;if((w_$l=w_$B.child)&&!(w_$l.length<1)){var w_$A;w_$A=w_$Q._getGraphicsFromSprite(w_$B,w_$h);var w_$n=0,w_$s=0;w_$B.props&&(w_$n=w_$Q._getObjVar(w_$B.props,"x",0),w_$s=w_$Q._getObjVar(w_$B.props,"y",0)),0!=w_$n&&0!=w_$s&&w_$A.translate(w_$n,w_$s);var w_$X,w_$Z=0;for(w_$X=w_$l.length,w_$Z=0;w_$Z<w_$X;w_$Z++)w_$Q._addGraphicToGraphics(w_$l[w_$Z],w_$A);0!=w_$n&&0!=w_$s&&w_$A.translate(-w_$n,-w_$s)}},w_$Q.addGraphicToSprite=function(w_$B,w_$h,w_$l){var w_$A;void 0===w_$l&&(w_$l=!1),w_$A=w_$l?w_$Q._getGraphicsFromSprite(w_$B,w_$h):w_$h.graphics,w_$Q._addGraphicToGraphics(w_$B,w_$A)},w_$Q._getGraphicsFromSprite=function(w_$B,w_$h){var w_$l,w_$A;if(!w_$B||!w_$B.props)return w_$h.graphics;switch(w_$A=w_$B.props.renderType){case"hit":case"unHit":var w_$n;w_$h.hitArea||(w_$h.hitArea=new w_$Y),(w_$n=w_$h.hitArea)[w_$A]||(w_$n[w_$A]=new w_$b),w_$l=w_$n[w_$A]}return w_$l||(w_$l=w_$h.graphics),w_$l},w_$Q._getTransformData=function(w_$B){var w_$h;(w_$B.hasOwnProperty("pivotX")||w_$B.hasOwnProperty("pivotY"))&&(w_$h=w_$h||new w_$N).translate(-w_$Q._getObjVar(w_$B,"pivotX",0),-w_$Q._getObjVar(w_$B,"pivotY",0));var w_$l=w_$Q._getObjVar(w_$B,"scaleX",1),w_$A=w_$Q._getObjVar(w_$B,"scaleY",1),w_$n=w_$Q._getObjVar(w_$B,"rotation",0);w_$Q._getObjVar(w_$B,"skewX",0),w_$Q._getObjVar(w_$B,"skewY",0);return 1==w_$l&&1==w_$A&&0==w_$n||((w_$h=w_$h||new w_$N).scale(w_$l,w_$A),w_$h.rotate(.0174532922222222*w_$n)),w_$h},w_$Q._addGraphicToGraphics=function(w_$B,w_$h){var w_$l,w_$A;if((w_$l=w_$B.props)&&(w_$A=w_$Q.DrawTypeDic[w_$B.type])){var w_$n,w_$s;w_$n=w_$h;var w_$X=w_$Q._getParams(w_$l,w_$A[1],w_$A[2],w_$A[3]);((w_$s=w_$Q._tM)||1!=w_$Q._alpha)&&(w_$n.save(),w_$s&&w_$n.transform(w_$s),1!=w_$Q._alpha&&w_$n.alpha(w_$Q._alpha)),w_$n[w_$A[0]].apply(w_$n,w_$X),(w_$s||1!=w_$Q._alpha)&&w_$n.restore()}},w_$Q._adptLineData=function(w_$B){return w_$B[2]=parseFloat(w_$B[0])+parseFloat(w_$B[2]),w_$B[3]=parseFloat(w_$B[1])+parseFloat(w_$B[3]),w_$B},w_$Q._adptTextureData=function(w_$B){return w_$B[0]=w_$ZB.getRes(w_$B[0]),w_$B},w_$Q._adptLinesData=function(w_$B){return w_$B[2]=w_$Q._getPointListByStr(w_$B[2]),w_$B},w_$Q.isDrawType=function(w_$B){return"Image"!=w_$B&&w_$Q.DrawTypeDic.hasOwnProperty(w_$B)},w_$Q._getParams=function(w_$B,w_$h,w_$l,w_$A){var w_$n;void 0===w_$l&&(w_$l=0),(w_$n=w_$Q._temParam).length=w_$h.length;var w_$s,w_$X,w_$Z=0;for(w_$s=w_$h.length,w_$Z=0;w_$Z<w_$s;w_$Z++)w_$n[w_$Z]=w_$Q._getObjVar(w_$B,w_$h[w_$Z][0],w_$h[w_$Z][1]);return w_$Q._alpha=w_$Q._getObjVar(w_$B,"alpha",1),w_$X=w_$Q._getTransformData(w_$B),w_$Q._tM=w_$X?(w_$l||(w_$l=0),w_$X.translate(w_$n[w_$l],w_$n[w_$l+1]),w_$n[w_$l]=w_$n[w_$l+1]=0,w_$X):null,w_$A&&w_$Q[w_$A]&&(w_$n=w_$Q[w_$A](w_$n)),w_$n},w_$Q._getPointListByStr=function(w_$B){var w_$h,w_$l,w_$A=0;for(w_$l=(w_$h=w_$B.split(",")).length,w_$A=0;w_$A<w_$l;w_$A++)w_$h[w_$A]=parseFloat(w_$h[w_$A]);return w_$h},w_$Q._getObjVar=function(w_$B,w_$h,w_$l){return w_$B.hasOwnProperty(w_$h)?w_$B[w_$h]:w_$l},w_$Q._temParam=[],w_$Q._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},w_$Q.getClass=function(w_$B){var w_$h=w_$Q._classMap[w_$B]||w_$B;return"string"==typeof w_$h?w_$v.__classmap[w_$h]:w_$h},w_$Q._tM=null,w_$Q._alpha=NaN,w_$t(w_$Q,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),w_$Q}(),w_$F=function(){function w_$s(w_$B){if(this._color=[],"string"==typeof w_$B){null===(this.strColor=w_$B)&&(w_$B="#000000"),"#"==w_$B.charAt(0)&&(w_$B=w_$B.substr(1));var w_$h=w_$B.length;if(3==w_$h||4==w_$h){for(var w_$l="",w_$A=0;w_$A<w_$h;w_$A++)w_$l+=w_$B[w_$A]+w_$B[w_$A];w_$B=w_$l}var w_$n=this.numColor=parseInt(w_$B,16);if(8==w_$B.length)return void(this._color=[parseInt(w_$B.substr(0,2),16)/255,((16711680&w_$n)>>16)/255,((65280&w_$n)>>8)/255,(255&w_$n)/255])}else w_$n=this.numColor=w_$B,this.strColor=w_$e.toHexColor(w_$n);this._color=[((16711680&w_$n)>>16)/255,((65280&w_$n)>>8)/255,(255&w_$n)/255,1],this._color.__id=++w_$s._COLODID}return w_$G(w_$s,"laya.utils.Color"),w_$s._initDefault=function(){for(var w_$B in w_$s._DEFAULT={},w_$s._COLOR_MAP)w_$s._SAVE[w_$B]=w_$s._DEFAULT[w_$B]=new w_$s(w_$s._COLOR_MAP[w_$B]);return w_$s._DEFAULT},w_$s._initSaveMap=function(){for(var w_$B in w_$s._SAVE_SIZE=0,w_$s._SAVE={},w_$s._DEFAULT)w_$s._SAVE[w_$B]=w_$s._DEFAULT[w_$B]},w_$s.create=function(w_$B){var w_$h=w_$s._SAVE[w_$B+""];return null!=w_$h?w_$h:(w_$s._SAVE_SIZE<1e3||w_$s._initSaveMap(),w_$s._SAVE[w_$B+""]=new w_$s(w_$B))},w_$s._SAVE={},w_$s._SAVE_SIZE=0,w_$s._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},w_$s._DEFAULT=w_$s._initDefault(),w_$s._COLODID=1,w_$s}(),w_$c=(function(){function w_$B(){this._values=[],this._keys=[]}w_$G(w_$B,"laya.utils.Dictionary");var w_$h=w_$B.prototype;w_$h.set=function(w_$B,w_$h){var w_$l=this.indexOf(w_$B);0<=w_$l?this._values[w_$l]=w_$h:(this._keys.push(w_$B),this._values.push(w_$h))},w_$h.indexOf=function(w_$B){var w_$h=this._keys.indexOf(w_$B);return 0<=w_$h?w_$h:(w_$B="string"==typeof w_$B?Number(w_$B):"number"==typeof w_$B?w_$B.toString():w_$B,this._keys.indexOf(w_$B))},w_$h.get=function(w_$B){var w_$h=this.indexOf(w_$B);return w_$h<0?null:this._values[w_$h]},w_$h.remove=function(w_$B){var w_$h=this.indexOf(w_$B);return 0<=w_$h&&(this._keys.splice(w_$h,1),this._values.splice(w_$h,1),!0)},w_$h.clear=function(){this._values.length=0,this._keys.length=0},w_$i(0,w_$h,"values",function(){return this._values}),w_$i(0,w_$h,"keys",function(){return this._keys})}(),function(){function w_$B(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}w_$G(w_$B,"laya.utils.Dragging");var w_$h=w_$B.prototype;return w_$h.start=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){void 0===w_$Z&&(w_$Z=.92),this.clearTimer(),this.target=w_$B,this.area=w_$h,this.hasInertia=w_$l,this.elasticDistance=w_$h?w_$A:0,this.elasticBackTime=w_$n,this.data=w_$s,this._disableMouseEvent=w_$X,this.ratio=w_$Z,1!=w_$B.globalScaleX||1!=w_$B.globalScaleY?this._parent=w_$B.parent:this._parent=w_$v.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,w_$v.stage.on("mouseup",this,this.onStageMouseUp),w_$v.stage.on("mouseout",this,this.onStageMouseUp),w_$v.timer.frameLoop(1,this,this.loop)},w_$h.clearTimer=function(){w_$v.timer.clear(this,this.loop),w_$v.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},w_$h.stop=function(){this._dragging&&(w_$$.instance.disableMouseEvent=!1,w_$v.stage.off("mouseup",this,this.onStageMouseUp),w_$v.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},w_$h.loop=function(){var w_$B=this._parent.getMousePoint(),w_$h=w_$B.x,w_$l=w_$B.y,w_$A=w_$h-this._lastX,w_$n=w_$l-this._lastY;if(this._clickOnly){if(!(1<Math.abs(w_$A*w_$v.stage._canvasTransform.getScaleX())||1<Math.abs(w_$n*w_$v.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),w_$$.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(w_$A,w_$n);0==w_$A&&0==w_$n||(this._lastX=w_$h,this._lastY=w_$l,this.target.x+=w_$A*this._elasticRateX,this.target.y+=w_$n*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},w_$h.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var w_$B=this.area.x-this.target.x;else w_$B=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-w_$B/this.elasticDistance),this.target.y<this.area.y)var w_$h=this.area.y-this.target.y;else w_$h=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-w_$h/this.elasticDistance)}},w_$h.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},w_$h.onStageMouseUp=function(w_$B){if(w_$$.instance.disableMouseEvent=!1,w_$v.stage.off("mouseup",this,this.onStageMouseUp),w_$v.stage.off("mouseout",this,this.onStageMouseUp),w_$v.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var w_$h=this._offsets.length,w_$l=Math.min(w_$h,6),w_$A=this._offsets.length-w_$l,w_$n=w_$h-1;w_$A<w_$n;w_$n--)this._offsetY+=this._offsets[w_$n--],this._offsetX+=this._offsets[w_$n];this._offsetX=this._offsetX/w_$l*2,this._offsetY=this._offsetY/w_$l*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),w_$v.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},w_$h.checkElastic=function(){var w_$B=NaN,w_$h=NaN;if(this.target.x<this.area.x?w_$B=this.area.x:this.target.x>this.area.x+this.area.width&&(w_$B=this.area.x+this.area.width),this.target.y<this.area.y?w_$h=this.area.y:this.target.y>this.area.y+this.area.height&&(w_$h=this.area.y+this.area.height),isNaN(w_$B)&&isNaN(w_$h))this.clear();else{var w_$l={};isNaN(w_$B)||(w_$l.x=w_$B),isNaN(w_$h)||(w_$l.y=w_$h),this._tween=w_$L.to(this.target,w_$l,this.elasticBackTime,w_$m.sineOut,w_$H.create(this,this.clear),0,!1,!1)}},w_$h.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(w_$v.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},w_$h.clear=function(){if(this.target){this.clearTimer();var w_$B=this.target;this.target=null,this._parent=null,w_$B.event("dragend",this.data)}},w_$B}()),w_$m=function(){function w_$Z(){}return w_$G(w_$Z,"laya.utils.Ease"),w_$Z.linearNone=function(w_$B,w_$h,w_$l,w_$A){return w_$l*w_$B/w_$A+w_$h},w_$Z.linearIn=function(w_$B,w_$h,w_$l,w_$A){return w_$l*w_$B/w_$A+w_$h},w_$Z.linearInOut=function(w_$B,w_$h,w_$l,w_$A){return w_$l*w_$B/w_$A+w_$h},w_$Z.linearOut=function(w_$B,w_$h,w_$l,w_$A){return w_$l*w_$B/w_$A+w_$h},w_$Z.bounceIn=function(w_$B,w_$h,w_$l,w_$A){return w_$l-w_$Z.bounceOut(w_$A-w_$B,0,w_$l,w_$A)+w_$h},w_$Z.bounceInOut=function(w_$B,w_$h,w_$l,w_$A){return w_$B<.5*w_$A?.5*w_$Z.bounceIn(2*w_$B,0,w_$l,w_$A)+w_$h:.5*w_$Z.bounceOut(2*w_$B-w_$A,0,w_$l,w_$A)+.5*w_$l+w_$h},w_$Z.bounceOut=function(w_$B,w_$h,w_$l,w_$A){return(w_$B/=w_$A)<1/2.75?w_$l*(7.5625*w_$B*w_$B)+w_$h:w_$B<2/2.75?w_$l*(7.5625*(w_$B-=1.5/2.75)*w_$B+.75)+w_$h:w_$B<2.5/2.75?w_$l*(7.5625*(w_$B-=2.25/2.75)*w_$B+.9375)+w_$h:w_$l*(7.5625*(w_$B-=2.625/2.75)*w_$B+.984375)+w_$h},w_$Z.backIn=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$n&&(w_$n=1.70158),w_$l*(w_$B/=w_$A)*w_$B*((w_$n+1)*w_$B-w_$n)+w_$h},w_$Z.backInOut=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$n&&(w_$n=1.70158),(w_$B/=.5*w_$A)<1?.5*w_$l*(w_$B*w_$B*((1+(w_$n*=1.525))*w_$B-w_$n))+w_$h:w_$l/2*((w_$B-=2)*w_$B*((1+(w_$n*=1.525))*w_$B+w_$n)+2)+w_$h},w_$Z.backOut=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$n&&(w_$n=1.70158),w_$l*((w_$B=w_$B/w_$A-1)*w_$B*((w_$n+1)*w_$B+w_$n)+1)+w_$h},w_$Z.elasticIn=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X;return void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=0),0==w_$B?w_$h:1==(w_$B/=w_$A)?w_$h+w_$l:(w_$s||(w_$s=.3*w_$A),w_$X=!w_$n||0<w_$l&&w_$n<w_$l||w_$l<0&&w_$n<-w_$l?(w_$n=w_$l,w_$s/4):w_$s/w_$Z.PI2*Math.asin(w_$l/w_$n),-w_$n*Math.pow(2,10*(w_$B-=1))*Math.sin((w_$B*w_$A-w_$X)*w_$Z.PI2/w_$s)+w_$h)},w_$Z.elasticInOut=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X;return void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=0),0==w_$B?w_$h:2==(w_$B/=.5*w_$A)?w_$h+w_$l:(w_$s||(w_$s=w_$A*(.3*1.5)),w_$X=!w_$n||0<w_$l&&w_$n<w_$l||w_$l<0&&w_$n<-w_$l?(w_$n=w_$l,w_$s/4):w_$s/w_$Z.PI2*Math.asin(w_$l/w_$n),w_$B<1?w_$n*Math.pow(2,10*(w_$B-=1))*Math.sin((w_$B*w_$A-w_$X)*w_$Z.PI2/w_$s)*-.5+w_$h:w_$n*Math.pow(2,-10*(w_$B-=1))*Math.sin((w_$B*w_$A-w_$X)*w_$Z.PI2/w_$s)*.5+w_$l+w_$h)},w_$Z.elasticOut=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X;return void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=0),0==w_$B?w_$h:1==(w_$B/=w_$A)?w_$h+w_$l:(w_$s||(w_$s=.3*w_$A),w_$X=!w_$n||0<w_$l&&w_$n<w_$l||w_$l<0&&w_$n<-w_$l?(w_$n=w_$l,w_$s/4):w_$s/w_$Z.PI2*Math.asin(w_$l/w_$n),w_$n*Math.pow(2,-10*w_$B)*Math.sin((w_$B*w_$A-w_$X)*w_$Z.PI2/w_$s)+w_$l+w_$h)},w_$Z.strongIn=function(w_$B,w_$h,w_$l,w_$A){return w_$l*(w_$B/=w_$A)*w_$B*w_$B*w_$B*w_$B+w_$h},w_$Z.strongInOut=function(w_$B,w_$h,w_$l,w_$A){return(w_$B/=.5*w_$A)<1?.5*w_$l*w_$B*w_$B*w_$B*w_$B*w_$B+w_$h:.5*w_$l*((w_$B-=2)*w_$B*w_$B*w_$B*w_$B+2)+w_$h},w_$Z.strongOut=function(w_$B,w_$h,w_$l,w_$A){return w_$l*((w_$B=w_$B/w_$A-1)*w_$B*w_$B*w_$B*w_$B+1)+w_$h},w_$Z.sineInOut=function(w_$B,w_$h,w_$l,w_$A){return.5*-w_$l*(Math.cos(Math.PI*w_$B/w_$A)-1)+w_$h},w_$Z.sineIn=function(w_$B,w_$h,w_$l,w_$A){return-w_$l*Math.cos(w_$B/w_$A*w_$Z.HALF_PI)+w_$l+w_$h},w_$Z.sineOut=function(w_$B,w_$h,w_$l,w_$A){return w_$l*Math.sin(w_$B/w_$A*w_$Z.HALF_PI)+w_$h},w_$Z.quintIn=function(w_$B,w_$h,w_$l,w_$A){return w_$l*(w_$B/=w_$A)*w_$B*w_$B*w_$B*w_$B+w_$h},w_$Z.quintInOut=function(w_$B,w_$h,w_$l,w_$A){return(w_$B/=.5*w_$A)<1?.5*w_$l*w_$B*w_$B*w_$B*w_$B*w_$B+w_$h:.5*w_$l*((w_$B-=2)*w_$B*w_$B*w_$B*w_$B+2)+w_$h},w_$Z.quintOut=function(w_$B,w_$h,w_$l,w_$A){return w_$l*((w_$B=w_$B/w_$A-1)*w_$B*w_$B*w_$B*w_$B+1)+w_$h},w_$Z.quartIn=function(w_$B,w_$h,w_$l,w_$A){return w_$l*(w_$B/=w_$A)*w_$B*w_$B*w_$B+w_$h},w_$Z.quartInOut=function(w_$B,w_$h,w_$l,w_$A){return(w_$B/=.5*w_$A)<1?.5*w_$l*w_$B*w_$B*w_$B*w_$B+w_$h:.5*-w_$l*((w_$B-=2)*w_$B*w_$B*w_$B-2)+w_$h},w_$Z.quartOut=function(w_$B,w_$h,w_$l,w_$A){return-w_$l*((w_$B=w_$B/w_$A-1)*w_$B*w_$B*w_$B-1)+w_$h},w_$Z.cubicIn=function(w_$B,w_$h,w_$l,w_$A){return w_$l*(w_$B/=w_$A)*w_$B*w_$B+w_$h},w_$Z.cubicInOut=function(w_$B,w_$h,w_$l,w_$A){return(w_$B/=.5*w_$A)<1?.5*w_$l*w_$B*w_$B*w_$B+w_$h:.5*w_$l*((w_$B-=2)*w_$B*w_$B+2)+w_$h},w_$Z.cubicOut=function(w_$B,w_$h,w_$l,w_$A){return w_$l*((w_$B=w_$B/w_$A-1)*w_$B*w_$B+1)+w_$h},w_$Z.quadIn=function(w_$B,w_$h,w_$l,w_$A){return w_$l*(w_$B/=w_$A)*w_$B+w_$h},w_$Z.quadInOut=function(w_$B,w_$h,w_$l,w_$A){return(w_$B/=.5*w_$A)<1?.5*w_$l*w_$B*w_$B+w_$h:.5*-w_$l*(--w_$B*(w_$B-2)-1)+w_$h},w_$Z.quadOut=function(w_$B,w_$h,w_$l,w_$A){return-w_$l*(w_$B/=w_$A)*(w_$B-2)+w_$h},w_$Z.expoIn=function(w_$B,w_$h,w_$l,w_$A){return 0==w_$B?w_$h:w_$l*Math.pow(2,10*(w_$B/w_$A-1))+w_$h-.001*w_$l},w_$Z.expoInOut=function(w_$B,w_$h,w_$l,w_$A){return 0==w_$B?w_$h:w_$B==w_$A?w_$h+w_$l:(w_$B/=.5*w_$A)<1?.5*w_$l*Math.pow(2,10*(w_$B-1))+w_$h:.5*w_$l*(2-Math.pow(2,-10*--w_$B))+w_$h},w_$Z.expoOut=function(w_$B,w_$h,w_$l,w_$A){return w_$B==w_$A?w_$h+w_$l:w_$l*(1-Math.pow(2,-10*w_$B/w_$A))+w_$h},w_$Z.circIn=function(w_$B,w_$h,w_$l,w_$A){return-w_$l*(Math.sqrt(1-(w_$B/=w_$A)*w_$B)-1)+w_$h},w_$Z.circInOut=function(w_$B,w_$h,w_$l,w_$A){return(w_$B/=.5*w_$A)<1?.5*-w_$l*(Math.sqrt(1-w_$B*w_$B)-1)+w_$h:.5*w_$l*(Math.sqrt(1-(w_$B-=2)*w_$B)+1)+w_$h},w_$Z.circOut=function(w_$B,w_$h,w_$l,w_$A){return w_$l*Math.sqrt(1-(w_$B=w_$B/w_$A-1)*w_$B)+w_$h},w_$Z.HALF_PI=.5*Math.PI,w_$Z.PI2=2*Math.PI,w_$Z}(),w_$Y=function(){function w_$T(){this._hit=null,this._unHit=null}w_$G(w_$T,"laya.utils.HitArea");var w_$B=w_$T.prototype;return w_$B.isHit=function(w_$B,w_$h){return!!w_$T.isHitGraphic(w_$B,w_$h,this.hit)&&!w_$T.isHitGraphic(w_$B,w_$h,this.unHit)},w_$B.contains=function(w_$B,w_$h){return this.isHit(w_$B,w_$h)},w_$i(0,w_$B,"hit",function(){return this._hit||(this._hit=new w_$b),this._hit},function(w_$B){this._hit=w_$B}),w_$i(0,w_$B,"unHit",function(){return this._unHit||(this._unHit=new w_$b),this._unHit},function(w_$B){this._unHit=w_$B}),w_$T.isHitGraphic=function(w_$B,w_$h,w_$l){if(!w_$l)return!1;var w_$A;if(!(w_$A=w_$l.cmds)&&w_$l._one&&((w_$A=w_$T._cmds).length=1,w_$A[0]=w_$l._one),!w_$A)return!1;var w_$n,w_$s,w_$X=0;for(w_$n=w_$A.length,w_$X=0;w_$X<w_$n;w_$X++)if(w_$s=w_$A[w_$X]){var w_$Z=w_$M._context;switch(w_$s.callee){case w_$Z._translate:case 6:w_$B-=w_$s[0],w_$h-=w_$s[1]}if(w_$T.isHitCmd(w_$B,w_$h,w_$s))return!0}return!1},w_$T.isHitCmd=function(w_$B,w_$h,w_$l){if(!w_$l)return!1;var w_$A=w_$M._context,w_$n=!1;switch(w_$l.callee){case w_$A._drawRect:case 13:w_$T._rec.setTo(w_$l[0],w_$l[1],w_$l[2],w_$l[3]),w_$n=w_$T._rec.contains(w_$B,w_$h);break;case w_$A._drawCircle:case w_$A._fillCircle:case 14:w_$n=(w_$B-=w_$l[0])*w_$B+(w_$h-=w_$l[1])*w_$h<w_$l[2]*w_$l[2];break;case w_$A._drawPoly:case 18:w_$B-=w_$l[0],w_$h-=w_$l[1],w_$n=w_$T.ptInPolygon(w_$B,w_$h,w_$l[2])}return w_$n},w_$T.ptInPolygon=function(w_$B,w_$h,w_$l){var w_$A;(w_$A=w_$T._ptPoint).setTo(w_$B,w_$h);var w_$n,w_$s=0,w_$X=NaN,w_$Z=NaN,w_$t=NaN,w_$P=NaN;w_$n=w_$l.length;for(var w_$G=0;w_$G<w_$n;w_$G+=2){if(w_$X=w_$l[w_$G],w_$Z=w_$l[w_$G+1],w_$t=w_$l[(w_$G+2)%w_$n],w_$Z!=(w_$P=w_$l[(w_$G+3)%w_$n]))if(!(w_$A.y<Math.min(w_$Z,w_$P)))if(!(w_$A.y>=Math.max(w_$Z,w_$P)))(w_$A.y-w_$Z)*(w_$t-w_$X)/(w_$P-w_$Z)+w_$X>w_$A.x&&w_$s++}return w_$s%2==1},w_$T._cmds=[],w_$t(w_$T,["_rec",function(){return this._rec=new w_$x},"_ptPoint",function(){return this._ptPoint=new w_$U}]),w_$T}(),w_$K=(function(){function w_$n(w_$B,w_$h,w_$l,w_$A){this.char=w_$B,this.charNum=w_$B.charCodeAt(0),this._x=this._y=0,this.width=w_$h,this.height=w_$l,this.style=w_$A,this.isWord=!w_$n._isWordRegExp.test(w_$B)}w_$G(w_$n,"laya.utils.HTMLChar");var w_$B=w_$n.prototype;w_$v.imps(w_$B,{"laya.display.ILayout":!0}),w_$B.setSprite=function(w_$B){this._sprite=w_$B},w_$B.getSprite=function(){return this._sprite},w_$B._isChar=function(){return!0},w_$B._getCSSStyle=function(){return this.style},w_$i(0,w_$B,"width",function(){return this._w},function(w_$B){this._w=w_$B}),w_$i(0,w_$B,"x",function(){return this._x},function(w_$B){this._sprite&&(this._sprite.x=w_$B),this._x=w_$B}),w_$i(0,w_$B,"y",function(){return this._y},function(w_$B){this._sprite&&(this._sprite.y=w_$B),this._y=w_$B}),w_$i(0,w_$B,"height",function(){return this._h},function(w_$B){this._h=w_$B}),w_$n._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function w_$h(){}w_$G(w_$h,"laya.utils.Log"),w_$h.enable=function(){w_$h._logdiv||(w_$h._logdiv=w_$d.window.document.createElement("div"),w_$d.window.document.body.appendChild(w_$h._logdiv),w_$h._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},w_$h.toggle=function(){var w_$B=w_$h._logdiv.style;"1px"==w_$B.width?w_$B.width=w_$B.height="50%":w_$B.width=w_$B.height="1px"},w_$h.print=function(w_$B){w_$h._logdiv&&(w_$h.maxCount<=w_$h._count&&w_$h.clear(),w_$h._count++,w_$h._logdiv.innerText+=w_$B+"\n",w_$h._logdiv.scrollTop=w_$h._logdiv.scrollHeight)},w_$h.clear=function(){w_$h._logdiv.innerText="",w_$h._count=0},w_$h._logdiv=null,w_$h._count=0,w_$h.maxCount=20}(),function(){function w_$h(){}w_$G(w_$h,"laya.utils.Mouse"),w_$i(1,w_$h,"cursor",function(){return w_$h._style.cursor},function(w_$B){w_$h._style.cursor=w_$B}),w_$h.hide=function(){"none"!=w_$h.cursor&&(w_$h._preCursor=w_$h.cursor,w_$h.cursor="none")},w_$h.show=function(){"none"==w_$h.cursor&&(w_$h.cursor=w_$h._preCursor?w_$h._preCursor:"auto")},w_$h._preCursor=null,w_$t(w_$h,["_style",function(){return this._style=w_$d.document.body.style}])}(),function(){function w_$s(){}return w_$G(w_$s,"laya.utils.Pool"),w_$s.getPoolBySign=function(w_$B){return w_$s._poolDic[w_$B]||(w_$s._poolDic[w_$B]=[])},w_$s.clearBySign=function(w_$B){w_$s._poolDic[w_$B]&&(w_$s._poolDic[w_$B].length=0)},w_$s.recover=function(w_$B,w_$h){w_$h.__InPool||(w_$h.__InPool=!0,w_$s.getPoolBySign(w_$B).push(w_$h))},w_$s.getItemByClass=function(w_$B,w_$h){var w_$l=w_$s.getPoolBySign(w_$B),w_$A=w_$l.length?w_$l.pop():new w_$h;return w_$A.__InPool=!1,w_$A},w_$s.getItemByCreateFun=function(w_$B,w_$h,w_$l){var w_$A=w_$s.getPoolBySign(w_$B),w_$n=w_$A.length?w_$A.pop():w_$h.call(w_$l);return w_$n.__InPool=!1,w_$n},w_$s.getItem=function(w_$B){var w_$h=w_$s.getPoolBySign(w_$B),w_$l=w_$h.length?w_$h.pop():null;return w_$l&&(w_$l.__InPool=!1),w_$l},w_$s._poolDic={},w_$s.InPoolSign="__InPool",w_$s}()),w_$f=function(){function w_$t(){}return w_$G(w_$t,"laya.utils.Stat"),w_$i(1,w_$t,"onclick",null,function(w_$B){w_$t._sp&&w_$t._sp.on("click",w_$t._sp,w_$B),w_$t._canvas&&(w_$t._canvas.source.onclick=w_$B,w_$t._canvas.source.style.pointerEvents="")}),w_$t.show=function(w_$B,w_$h,w_$l){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),!w_$M.isConchApp||w_$M.isConchWebGL){if(w_$M.isConchWebGL||w_$d.onMiniGame||w_$d.onLimixiu||(w_$t._useCanvas=!0),w_$t._show=!0,w_$t._fpsData.length=60,w_$t._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},w_$t._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},w_$t._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},w_$t._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},w_$M.isWebGL)if(w_$t._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},w_$M.is3DMode){if(w_$t._view[0].title="FPS(3D)",w_$t._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},w_$t._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},w_$t._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==w_$l){var w_$A=8;w_$t._view[w_$A++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},w_$t._view[w_$A++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},w_$t._view[w_$A++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},w_$t._view[w_$A++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},w_$t._view[w_$A++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},w_$t._view[w_$A++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},w_$t._view[w_$A++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},w_$t._view[w_$A++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},w_$t._view[w_$A++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==w_$l){w_$A=8;w_$t._view[w_$A++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},w_$t._view[w_$A++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},w_$t._view[w_$A++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},w_$t._view[w_$A++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},w_$t._view[w_$A++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},w_$t._view[w_$A++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},w_$t._view[w_$A++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else w_$t._view[0].title="FPS(WebGL)",w_$t._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else w_$t._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};w_$t._useCanvas?w_$t.createUIPre(w_$B,w_$h):w_$t.createUI(w_$B,w_$h),w_$t.enable()}else w_$d.window.conch.showFPS&&w_$d.window.conch.showFPS(w_$B,w_$h)},w_$t.createUIPre=function(w_$B,w_$h){var w_$l=w_$d.pixelRatio;w_$t._width=170*w_$l,w_$t._vx=75*w_$l,w_$t._height=w_$l*(12*w_$t._view.length+3*w_$l)+4,w_$t._fontSize=12*w_$l;for(var w_$A=0;w_$A<w_$t._view.length;w_$A++)w_$t._view[w_$A].x=4,w_$t._view[w_$A].y=w_$A*w_$t._fontSize+2*w_$l;w_$t._canvas||((w_$t._canvas=new w_$yB("2D")).size(w_$t._width,w_$t._height),(w_$t._ctx=w_$t._canvas.getContext("2d")).textBaseline="top",w_$t._ctx.font=w_$t._fontSize+"px Sans-serif",w_$t._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+w_$B+"px;top:"+w_$h+"px;width:"+w_$t._width/w_$l+"px;height:"+w_$t._height/w_$l+"px;"),w_$t._first=!0,w_$t.loop(),w_$t._first=!1,w_$d.container.appendChild(w_$t._canvas.source)},w_$t.createUI=function(w_$B,w_$h){var w_$l=w_$t._sp,w_$A=w_$d.pixelRatio;w_$l||(w_$l=new w_$TB,(w_$t._leftText=new w_$VB).pos(5,5),w_$t._leftText.color="#ffffff",w_$l.addChild(w_$t._leftText),(w_$t._txt=new w_$VB).pos(80*w_$A,5),w_$t._txt.color="#ffffff",w_$l.addChild(w_$t._txt),w_$t._sp=w_$l),w_$l.pos(w_$B,w_$h);for(var w_$n="",w_$s=0;w_$s<w_$t._view.length;w_$s++){w_$n+=w_$t._view[w_$s].title+"\n"}w_$t._leftText.text=w_$n;var w_$X=170*w_$A,w_$Z=w_$A*(12*w_$t._view.length+3*w_$A)+4;w_$t._txt.fontSize=w_$t._fontSize*w_$A,w_$t._leftText.fontSize=w_$t._fontSize*w_$A,w_$l.size(w_$X,w_$Z),w_$l.graphics.clear(),w_$l.graphics.setAlpha(.5),w_$l.graphics.drawRect(0,0,w_$X,w_$Z,"#999999"),w_$l.graphics.setAlpha(1),w_$t.loop()},w_$t.enable=function(){w_$v.timer.frameLoop(1,w_$t,w_$t.loop)},w_$t.hide=function(){w_$t._show=!1,w_$v.timer.clear(w_$t,w_$t.loop),w_$t._canvas&&w_$d.removeElement(w_$t._canvas.source)},w_$t.clear=function(){w_$t.trianglesFaces=w_$t.drawCall=w_$t.shaderCall=w_$t.spriteCount=w_$t.spriteRenderUseCacheCount=w_$t.treeNodeCollision=w_$t.treeSpriteCollision=w_$t.canvasNormal=w_$t.canvasBitmap=w_$t.canvasReCache=0},w_$t.loop=function(){w_$t._count++;var w_$B=w_$d.now();if(!(w_$B-w_$t._timer<1e3)){var w_$h=w_$t._count;if(w_$t.FPS=Math.round(1e3*w_$h/(w_$B-w_$t._timer)),w_$t._show){w_$t.trianglesFaces=Math.round(w_$t.trianglesFaces/w_$h),w_$t.spriteCount=w_$t._useCanvas?(w_$t.drawCall=Math.round(w_$t.drawCall/w_$h)-2,w_$t.shaderCall=Math.round(w_$t.shaderCall/w_$h),Math.round(w_$t.spriteCount/w_$h)-1):(w_$t.drawCall=Math.round(w_$t.drawCall/w_$h)-2,w_$t.shaderCall=Math.round(w_$t.shaderCall/w_$h)-4,Math.round(w_$t.spriteCount/w_$h)-4),w_$t.spriteRenderUseCacheCount=Math.round(w_$t.spriteRenderUseCacheCount/w_$h),w_$t.canvasNormal=Math.round(w_$t.canvasNormal/w_$h),w_$t.canvasBitmap=Math.round(w_$t.canvasBitmap/w_$h),w_$t.canvasReCache=Math.ceil(w_$t.canvasReCache/w_$h),w_$t.treeNodeCollision=Math.round(w_$t.treeNodeCollision/w_$h),w_$t.treeSpriteCollision=Math.round(w_$t.treeSpriteCollision/w_$h);var w_$l=0<w_$t.FPS?Math.floor(1e3/w_$t.FPS).toString():" ";w_$t._fpsStr=w_$t.FPS+(w_$t.renderSlow?" slow":"")+" "+w_$l,w_$t._spriteStr=w_$t.spriteCount+(w_$t.spriteRenderUseCacheCount?"/"+w_$t.spriteRenderUseCacheCount:""),w_$t._canvasStr=w_$t.canvasReCache+"/"+w_$t.canvasNormal+"/"+w_$t.canvasBitmap,w_$t.currentMemorySize=w_$_.systemResourceManager.memorySize,w_$t._useCanvas?w_$t.renderInfoPre():w_$t.renderInfo(),w_$t.clear()}w_$t._count=0,w_$t._timer=w_$B}},w_$t.renderInfoPre=function(){if(w_$t._canvas){var w_$B=w_$t._ctx;w_$B.clearRect(w_$t._first?0:w_$t._vx,0,w_$t._width,w_$t._height);for(var w_$h=w_$M.WebGL.mainContext,w_$l=0;w_$l<w_$t._view.length;w_$l++){var w_$A=w_$t._view[w_$l];w_$t._first&&(w_$B.fillStyle="white",w_$B.fillText(w_$A.title,w_$A.x,w_$A.y,null,null,null)),w_$B.fillStyle=w_$A.color;var w_$n=-1;if((w_$A=w_$t._view[w_$l]).varying){if(w_$h)switch(w_$A.varying){case 1:w_$n=w_$h.getParameter(w_$h[w_$A.value]);break;case 2:w_$n=w_$h.getExtension(w_$A.value)}}else w_$n=w_$t[w_$A.value];"M"==w_$A.units&&(w_$n=Math.floor(w_$n/1048576*100)/100+" M"),"K"==w_$A.units&&(w_$n=Math.floor(w_$n/1024*100)/100+" K"),"string"==w_$A.units&&(w_$n=w_$n.match(/\d+\.?\d/i)),w_$B.fillText(w_$n+"",w_$A.x+w_$t._vx,w_$A.y,null,null,null)}}},w_$t.renderInfo=function(){for(var w_$B="",w_$h=w_$M.WebGL.mainContext,w_$l=0;w_$l<w_$t._view.length;w_$l++){var w_$A=w_$t._view[w_$l],w_$n=-1;if(w_$A.varying){if(w_$h)switch(w_$A.varying){case 1:w_$n=w_$h.getParameter(w_$h[w_$A.value]);break;case 2:w_$n=w_$h.getExtension(w_$A.value)}}else w_$n=w_$t[w_$A.value];"M"==w_$A.units&&(w_$n=Math.floor(w_$n/1048576*100)/100+" M"),"K"==w_$A.units&&(w_$n=Math.floor(w_$n/1024*100)/100+" K"),"string"==w_$A.units&&(w_$n=w_$n.match(/\d+\.?\d/i)),w_$B+=w_$n+"\n"}w_$t._txt.text=w_$B},w_$t.FPS=0,w_$t.loopCount=0,w_$t.shaderCall=0,w_$t.drawCall=0,w_$t.trianglesFaces=0,w_$t.spriteCount=0,w_$t.spriteRenderUseCacheCount=0,w_$t.treeNodeCollision=0,w_$t.treeSpriteCollision=0,w_$t.canvasNormal=0,w_$t.canvasBitmap=0,w_$t.canvasReCache=0,w_$t.renderSlow=!1,w_$t.currentMemorySize=0,w_$t._fpsStr=null,w_$t._canvasStr=null,w_$t._spriteStr=null,w_$t._fpsData=[],w_$t._timer=0,w_$t._count=0,w_$t._view=[],w_$t._fontSize=12,w_$t._txt=null,w_$t._leftText=null,w_$t._sp=null,w_$t._show=!1,w_$t._useCanvas=!1,w_$t._canvas=null,w_$t._ctx=null,w_$t._first=!1,w_$t._vx=NaN,w_$t._width=0,w_$t._height=100,w_$t}(),w_$I=(function(){function w_$B(){this._strsToID={},this._idToStrs=[],this._length=0}w_$G(w_$B,"laya.utils.StringKey");var w_$h=w_$B.prototype;w_$h.add=function(w_$B){var w_$h=this._strsToID[w_$B];return null!=w_$h?w_$h:(this._idToStrs[this._length]=w_$B,this._strsToID[w_$B]=this._length++)},w_$h.getID=function(w_$B){var w_$h=this._strsToID[w_$B];return null==w_$h?-1:w_$h},w_$h.getName=function(w_$B){var w_$h=this._idToStrs[w_$B];return null==w_$h?void 0:w_$h}}(),function(){var w_$P;function w_$B(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}w_$G(w_$B,"laya.utils.Timer");var w_$h=w_$B.prototype;return w_$h._init=function(){w_$v.timer&&w_$v.timer.frameLoop(1,this,this._update)},w_$h._now=function(){return Date.now()},w_$h._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var w_$B=this.currFrame=this.currFrame+this.scale,w_$h=this._now();this._delta=(w_$h-this._lastTimer)*this.scale;var w_$l=this.currTimer=this.currTimer+this._delta;w_$v.isDebug&&6e4<Math.abs(w_$h-this._lastTimer)&&console.error("系统时间错误！"+(w_$h-this._lastTimer)),this._lastTimer=w_$h;var w_$A=this._handlers;for(w_$X=this._count=0,w_$Z=w_$A.length;w_$X<w_$Z;w_$X++)if(null!==(w_$t=w_$A[w_$X]).method){var w_$n=w_$t.userFrame?w_$B:w_$l;if(w_$n>=w_$t.exeTime)if(w_$t.repeat)if(w_$t.jumpFrame)for(;w_$n>=w_$t.exeTime;)w_$t.exeTime+=w_$t.delay,w_$t.run(!1);else w_$t.exeTime+=w_$t.delay,w_$t.run(!1),w_$n>w_$t.exeTime&&(w_$t.exeTime+=Math.ceil((w_$n-w_$t.exeTime)/w_$t.delay)*w_$t.delay);else w_$t.run(!0)}else this._count++;(30<this._count||w_$B%200==0)&&this._clearHandlers();for(var w_$s=this._laters,w_$X=0,w_$Z=w_$s.length-1;w_$X<=w_$Z;w_$X++){var w_$t=w_$s[w_$X];this._isIgnoreRecover(w_$t)||(null!==w_$t.method&&(delete this._map[w_$t.key],w_$t.run(!1)),this._recoverHandler(w_$t)),w_$X===w_$Z&&(w_$Z=w_$s.length-1)}w_$s.length=0}},w_$h._clearHandlers=function(){for(var w_$B=this._handlers,w_$h=0,w_$l=w_$B.length;w_$h<w_$l;w_$h++){var w_$A=w_$B[w_$h];null!==w_$A.method?this._temp.push(w_$A):this._isIgnoreRecover(w_$A)?this._temp.push(w_$A):this._recoverHandler(w_$A)}this._handlers=this._temp,this._temp=w_$B,this._temp.length=0},w_$h._recoverHandler=function(w_$B){this._map[w_$B.key]==w_$B&&delete this._map[w_$B.key],w_$B.recover()},w_$h._create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){if(!w_$l)return w_$n.apply(w_$A,w_$s),null;if(w_$X){var w_$t=this._getHandler(w_$A,w_$n);if(w_$t)return w_$t.repeat=w_$h,w_$t.userFrame=w_$B,w_$t.delay=w_$l,w_$t.ignoreRecover=w_$Z,w_$t.caller=w_$A,w_$t.method=w_$n,w_$t.args=w_$s,w_$t.exeTime=w_$l+(w_$B?this.currFrame:this.currTimer+this._now()-this._lastTimer),w_$t}return(w_$t=w_$P.create()).repeat=w_$h,w_$t.userFrame=w_$B,w_$t.delay=w_$l,w_$t.ignoreRecover=w_$Z,w_$t.caller=w_$A,w_$t.method=w_$n,w_$t.args=w_$s,w_$t.exeTime=w_$l+(w_$B?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(w_$t),this._handlers.push(w_$t),w_$t},w_$h._indexHandler=function(w_$B){var w_$h=w_$B.caller,w_$l=w_$B.method,w_$A=w_$h?w_$h.$_GID||(w_$h.$_GID=w_$e.getGID()):0,w_$n=w_$l.$_TID||(w_$l.$_TID=this._mid++);w_$B.key=w_$A+"_"+w_$n,this._map[w_$B.key]=w_$B},w_$h.once=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=!0),this._create(!1,!1,w_$B,w_$h,w_$l,w_$A,w_$n,!1)},w_$h.loop=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){void 0===w_$n&&(w_$n=!0),void 0===w_$s&&(w_$s=!1),void 0===w_$X&&(w_$X=!1);var w_$Z=this._create(!1,!0,w_$B,w_$h,w_$l,w_$A,w_$n,w_$X);w_$Z&&(w_$Z.jumpFrame=w_$s)},w_$h.frameOnce=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=!0),this._create(!0,!1,w_$B,w_$h,w_$l,w_$A,w_$n,!1)},w_$h.frameLoop=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$n&&(w_$n=!0),void 0===w_$s&&(w_$s=!1),this._create(!0,!0,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)},w_$h.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+w_$P._freeCount},w_$h.clear=function(w_$B,w_$h){var w_$l=this._getHandler(w_$B,w_$h);return!(!w_$l||this._isIgnoreRecover(w_$l))&&(delete this._map[w_$l.key],w_$l.key=null,w_$l.clear(),!0)},w_$h.clearAll=function(w_$B){if(w_$B)for(var w_$h=0,w_$l=this._handlers.length;w_$h<w_$l;w_$h++){var w_$A=this._handlers[w_$h];w_$A.caller===w_$B&&(this._isIgnoreRecover(w_$A)||(delete this._map[w_$A.key],w_$A.key=null,w_$A.clear()))}},w_$h._getHandler=function(w_$B,w_$h){var w_$l=w_$B?w_$B.$_GID||(w_$B.$_GID=w_$e.getGID()):0,w_$A=w_$h.$_TID||(w_$h.$_TID=this._mid++);return this._map[w_$l+"_"+w_$A]},w_$h._isIgnoreRecover=function(w_$B){if(w_$B.ignoreRecover||w_$B.caller&&"IgnoreRecover"==w_$B.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var w_$h="";try{arguments.propertyIsEnumerable.caller}catch(w_$B){w_$h=w_$B.stack}w_$v.recordError("报错：核心定时器销毁忽略  "+w_$h)}return!0}return!1},w_$h.hasHandler=function(w_$B,w_$h){return this._map[w_$B.$_GID+"_"+w_$h.$_TID]},w_$h.callLater=function(w_$B,w_$h,w_$l){if(null==this._getHandler(w_$B,w_$h)){var w_$A=w_$P.create();w_$A.caller=w_$B,w_$A.method=w_$h,w_$A.args=w_$l,this._indexHandler(w_$A),this._laters.push(w_$A)}},w_$h.runCallLater=function(w_$B,w_$h){var w_$l=this._getHandler(w_$B,w_$h);w_$l&&null!=w_$l.method&&(this._isIgnoreRecover(w_$l)||(delete this._map[w_$l.key],w_$l.run(!0)))},w_$h.runTimer=function(w_$B,w_$h){this.runCallLater(w_$B,w_$h)},w_$i(0,w_$h,"delta",function(){return this._delta}),w_$B.__init$=function(){w_$P=function(){function w_$h(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}w_$G(w_$h,"");var w_$B=w_$h.prototype;return w_$B.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},w_$B.recover=function(){this.clear(),this.args=w_$h._freeHandler,w_$h._freeHandler=this,w_$h._freeCount++},w_$B.run=function(w_$B){var w_$h=this.caller;if(w_$h&&w_$h.destroyed)return this.clear();var w_$l=this.method,w_$A=this.args;w_$B&&this.clear(),null!=w_$l&&(w_$A?w_$l.apply(w_$h,w_$A):w_$l.call(w_$h))},w_$h._freeHandler=null,w_$h._freeCount=0,w_$h.create=function(){var w_$B=w_$h._freeHandler;return w_$B?(w_$h._freeHandler=w_$B.args,--w_$h._freeCount,w_$B.args=null,w_$B):new w_$h},w_$h}()},w_$B}()),w_$L=function(){function w_$T(){this.gid=0}w_$G(w_$T,"laya.utils.Tween");var w_$B=w_$T.prototype;return w_$B.to=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){return void 0===w_$s&&(w_$s=0),void 0===w_$X&&(w_$X=!1),this._create(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,!0,!1,!0)},w_$B.from=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){return void 0===w_$s&&(w_$s=0),void 0===w_$X&&(w_$X=!1),this._create(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,!1,!1,!0)},w_$B._create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){if(!w_$B)throw new Error("Tween:target is null");this._target=w_$B,this._duration=w_$l,this._ease=w_$A||w_$h.ease||w_$T.easeNone,this._complete=w_$n||w_$h.complete,this._delay=w_$s,this._props=[],this._usedTimer=0,this._startTimer=w_$d.now(),this._usedPool=w_$t,this._delayParam=null,this.update=w_$h.update;var w_$G=w_$B.$_GID||(w_$B.$_GID=w_$e.getGID());return w_$T.tweenMap[w_$G]?(w_$X&&w_$T.clearTween(w_$B),w_$T.tweenMap[w_$G].push(this)):w_$T.tweenMap[w_$G]=[this],w_$P?w_$s<=0?this.firstStart(w_$B,w_$h,w_$Z):(this._delayParam=[w_$B,w_$h,w_$Z],w_$v.scaleTimer.once(w_$s,this,this.firstStart,this._delayParam)):this._initProps(w_$B,w_$h,w_$Z),this},w_$B.firstStart=function(w_$B,w_$h,w_$l){this._delayParam=null,w_$B.destroyed?this.clear():(this._initProps(w_$B,w_$h,w_$l),this._beginLoop())},w_$B._initProps=function(w_$B,w_$h,w_$l){for(var w_$A in w_$h)if("number"==typeof w_$B[w_$A]){var w_$n=w_$l?w_$B[w_$A]:w_$h[w_$A],w_$s=w_$l?w_$h[w_$A]:w_$B[w_$A];this._props.push([w_$A,w_$n,w_$s-w_$n]),w_$l||(w_$B[w_$A]=w_$n)}},w_$B._beginLoop=function(){w_$v.scaleTimer.frameLoop(1,this,this._doEase)},w_$B._doEase=function(){this._updateEase(w_$d.now())},w_$B._updateEase=function(w_$B){var w_$h=this._target;if(w_$h){if(w_$h.destroyed)return w_$T.clearTween(w_$h);var w_$l=this._usedTimer=w_$B-this._startTimer-this._delay;if(!(w_$l<0)){if(w_$l>=this._duration)return this.complete();for(var w_$A=0<w_$l?this._ease(w_$l,0,1,this._duration):0,w_$n=this._props,w_$s=0,w_$X=w_$n.length;w_$s<w_$X;w_$s++){var w_$Z=w_$n[w_$s];w_$h[w_$Z[0]]=w_$Z[1]+w_$A*w_$Z[2]}this.update&&this.update.run()}}},w_$B.complete=function(){if(this._target){w_$v.scaleTimer.runTimer(this,this.firstStart);for(var w_$B=this._target,w_$h=this._props,w_$l=this._complete,w_$A=0,w_$n=w_$h.length;w_$A<w_$n;w_$A++){var w_$s=w_$h[w_$A];w_$B[w_$s[0]]=w_$s[1]+w_$s[2]}this.update&&this.update.run(),this.clear(),w_$l&&w_$l.run()}},w_$B.pause=function(){w_$v.scaleTimer.clear(this,this._beginLoop),w_$v.scaleTimer.clear(this,this._doEase),w_$v.scaleTimer.clear(this,this.firstStart);var w_$B;(w_$B=w_$d.now()-this._startTimer-this._delay)<0&&(this._usedTimer=w_$B)},w_$B.setStartTime=function(w_$B){this._startTimer=w_$B},w_$B.clear=function(){this._target&&(this._remove(),this._clear())},w_$B._clear=function(){this.pause(),w_$v.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,w_$K.recover("tween",this))},w_$B.recover=function(){this._usedPool=!0,this._clear()},w_$B._remove=function(){var w_$B=w_$T.tweenMap[this._target.$_GID];if(w_$B)for(var w_$h=0,w_$l=w_$B.length;w_$h<w_$l;w_$h++)if(w_$B[w_$h]===this){w_$B.splice(w_$h,1);break}},w_$B.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=w_$d.now(),this._delayParam)w_$v.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var w_$B=this._props,w_$h=0,w_$l=w_$B.length;w_$h<w_$l;w_$h++){var w_$A=w_$B[w_$h];this._target[w_$A[0]]=w_$A[1]}w_$v.scaleTimer.once(this._delay,this,this._beginLoop)}},w_$B.resume=function(){this._usedTimer>=this._duration||(this._startTimer=w_$d.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?w_$v.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},w_$i(0,w_$B,"progress",null,function(w_$B){var w_$h=w_$B*this._duration;this._startTimer=w_$d.now()-this._delay-w_$h}),w_$T.to=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){return void 0===w_$s&&(w_$s=0),void 0===w_$X&&(w_$X=!1),void 0===w_$Z&&(w_$Z=!0),w_$K.getItemByClass("tween",w_$T)._create(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,!0,w_$Z,!0)},w_$T.from=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){return void 0===w_$s&&(w_$s=0),void 0===w_$X&&(w_$X=!1),void 0===w_$Z&&(w_$Z=!0),w_$K.getItemByClass("tween",w_$T)._create(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,!1,w_$Z,!0)},w_$T.clearAll=function(w_$B){if(w_$B&&w_$B.$_GID){var w_$h=w_$T.tweenMap[w_$B.$_GID];if(w_$h){for(var w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++)w_$h[w_$l]._clear();w_$h.length=0}}},w_$T.clear=function(w_$B){w_$B.clear()},w_$T.clearTween=function(w_$B){w_$T.clearAll(w_$B)},w_$T.easeNone=function(w_$B,w_$h,w_$l,w_$A){return w_$l*w_$B/w_$A+w_$h},w_$T.tweenMap={},w_$T}(),w_$e=function(){function w_$Z(){}return w_$G(w_$Z,"laya.utils.Utils"),w_$Z.toRadian=function(w_$B){return w_$B*w_$Z._pi2},w_$Z.toAngle=function(w_$B){return w_$B*w_$Z._pi},w_$Z.toHexColor=function(w_$B){if(w_$B<0||isNaN(w_$B))return null;for(var w_$h=w_$B.toString(16);w_$h.length<6;)w_$h="0"+w_$h;return"#"+w_$h},w_$Z.getGID=function(){return w_$Z._gid++},w_$Z.concatArray=function(w_$B,w_$h){if(!w_$h)return w_$B;if(!w_$B)return w_$h;var w_$l=0,w_$A=w_$h.length;for(w_$l=0;w_$l<w_$A;w_$l++)w_$B.push(w_$h[w_$l]);return w_$B},w_$Z.clearArray=function(w_$B){return w_$B&&(w_$B.length=0),w_$B},w_$Z.copyArray=function(w_$B,w_$h){if(w_$B||(w_$B=[]),!w_$h)return w_$B;w_$B.length=w_$h.length;var w_$l=0,w_$A=w_$h.length;for(w_$l=0;w_$l<w_$A;w_$l++)w_$B[w_$l]=w_$h[w_$l];return w_$B},w_$Z.getGlobalRecByPoints=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s,w_$X;return w_$s=new w_$U(w_$h,w_$l),w_$s=w_$B.localToGlobal(w_$s),w_$X=new w_$U(w_$A,w_$n),w_$X=w_$B.localToGlobal(w_$X),w_$x._getWrapRec([w_$s.x,w_$s.y,w_$X.x,w_$X.y])},w_$Z.getGlobalPosAndScale=function(w_$B){return w_$Z.getGlobalRecByPoints(w_$B,0,0,1,1)},w_$Z.bind=function(w_$B,w_$h){return w_$B.bind(w_$h)},w_$Z.measureText=function(w_$B,w_$h){return w_$S.measureText(w_$B,w_$h)},w_$Z.contextMeasureText=function(w_$B){var w_$h=w_$d.context.measureText(w_$B);return w_$h||(w_$h={width:16,height:16}),w_$h},w_$Z.updateOrder=function(w_$B){if(!w_$B||w_$B.length<2)return!1;for(var w_$h,w_$l=1,w_$A=0,w_$n=w_$B.length,w_$s=NaN;w_$l<w_$n;){for(w_$h=w_$B[w_$A=w_$l],w_$s=w_$B[w_$A]._zOrder;-1<--w_$A&&w_$B[w_$A]._zOrder>w_$s;)w_$B[w_$A+1]=w_$B[w_$A];w_$B[w_$A+1]=w_$h,w_$l++}var w_$X=w_$h.parent.conchModel;if(w_$X)if(null!=w_$X.updateZOrder)w_$X.updateZOrder();else{for(w_$l=0;w_$l<w_$n;w_$l++)w_$X.removeChild(w_$B[w_$l].conchModel);for(w_$l=0;w_$l<w_$n;w_$l++)w_$X.addChildAt(w_$B[w_$l].conchModel,w_$l)}return!0},w_$Z.transPointList=function(w_$B,w_$h,w_$l){var w_$A=0,w_$n=w_$B.length;for(w_$A=0;w_$A<w_$n;w_$A+=2)w_$B[w_$A]+=w_$h,w_$B[w_$A+1]+=w_$l},w_$Z.parseInt=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0);var w_$l=w_$d.window.parseInt(w_$B,w_$h);return isNaN(w_$l)?0:w_$l},w_$Z.getFileExtension=function(w_$B){w_$Z._extReg.lastIndex=w_$B.lastIndexOf(".");var w_$h=w_$Z._extReg.exec(w_$B);return w_$h&&1<w_$h.length?w_$h[1].toLowerCase():null},w_$Z.getTransformRelativeToWindow=function(w_$B,w_$h,w_$l){var w_$A=w_$v.stage,w_$n=laya.utils.Utils.getGlobalPosAndScale(w_$B),w_$s=w_$A._canvasTransform.clone(),w_$X=w_$s.tx,w_$Z=w_$s.ty;w_$s.rotate(-Math.PI/180*w_$v.stage.canvasDegree),w_$s.scale(w_$v.stage.clientScaleX,w_$v.stage.clientScaleY);var w_$t=w_$v.stage.canvasDegree%180!=0,w_$P=NaN,w_$G=NaN;w_$t?(w_$P=w_$l+w_$n.y,w_$G=w_$h+w_$n.x,w_$P*=w_$s.d,w_$G*=w_$s.a,90==w_$v.stage.canvasDegree?(w_$P=w_$X-w_$P,w_$G+=w_$Z):(w_$P+=w_$X,w_$G=w_$Z-w_$G)):(w_$P=w_$h+w_$n.x,w_$G=w_$l+w_$n.y,w_$P*=w_$s.a,w_$G*=w_$s.d,w_$P+=w_$X,w_$G+=w_$Z);var w_$T=NaN,w_$b=NaN;return w_$b=w_$t?(w_$T=w_$s.d*w_$n.height,w_$s.a*w_$n.width):(w_$T=w_$s.a*w_$n.width,w_$s.d*w_$n.height),{x:w_$P,y:w_$G,scaleX:w_$T,scaleY:w_$b}},w_$Z.fitDOMElementInArea=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){w_$B._fitLayaAirInitialized||(w_$B._fitLayaAirInitialized=!0,w_$B.style.transformOrigin=w_$B.style.webKittransformOrigin="left top",w_$B.style.position="absolute");var w_$X=w_$Z.getTransformRelativeToWindow(w_$h,w_$l,w_$A);w_$B.style.transform=w_$B.style.webkitTransform="scale("+w_$X.scaleX+","+w_$X.scaleY+") rotate("+w_$v.stage.canvasDegree+"deg)",w_$B.style.width=w_$n+"px",w_$B.style.height=w_$s+"px",w_$B.style.left=w_$X.x+"px",w_$B.style.top=w_$X.y+"px"},w_$Z.isOkTextureList=function(w_$B){if(!w_$B)return!1;var w_$h,w_$l=0,w_$A=w_$B.length;for(w_$l=0;w_$l<w_$A;w_$l++)if(!(w_$h=w_$B[w_$l])||!w_$h.source)return!1;return!0},w_$Z.isOKCmdList=function(w_$B){if(!w_$B)return!1;var w_$h,w_$l,w_$A=0,w_$n=w_$B.length,w_$s=w_$M._context;for(w_$A=0;w_$A<w_$n;w_$A++)switch((w_$h=w_$B[w_$A]).callee){case w_$s._drawTexture:case w_$s._fillTexture:case w_$s._drawTextureWithTransform:if(!(w_$l=w_$h[0])||!w_$l.source)return!1}return!0},w_$Z._gid=1,w_$Z._pi=180/Math.PI,w_$Z._pi2=Math.PI/180,w_$Z._extReg=/\.(\w+)\??/g,w_$Z.parseXMLFromString=function(w_$B){var w_$h;if(w_$B=w_$B.replace(/>\s+</g,"><"),-1<(w_$h=(new DOMParser).parseFromString(w_$B,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(w_$h.firstChild.firstChild.textContent);return w_$h},w_$Z}(),w_$q=function(){function w_$B(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],w_$M.isWebGL&&w_$O.regCacheByFunction(w_$e.bind(this.startDispose,this),w_$e.bind(this.getCacheList,this))}w_$G(w_$B,"laya.utils.VectorGraphManager");var w_$h=w_$B.prototype;return w_$h.getId=function(){return this._id++},w_$h.addShape=function(w_$B,w_$h){this.shapeDic[w_$B]=w_$h,this.useDic[w_$B]||(this.useDic[w_$B]=!0)},w_$h.addLine=function(w_$B,w_$h){this.shapeLineDic[w_$B]=w_$h,this.shapeLineDic[w_$B]||(this.shapeLineDic[w_$B]=!0)},w_$h.getShape=function(w_$B){this._checkKey&&null!=this.useDic[w_$B]&&(this.useDic[w_$B]=!0)},w_$h.deleteShape=function(w_$B){this.shapeDic[w_$B]&&(this.shapeDic[w_$B]=null,delete this.shapeDic[w_$B]),this.shapeLineDic[w_$B]&&(this.shapeLineDic[w_$B]=null,delete this.shapeLineDic[w_$B]),null!=this.useDic[w_$B]&&delete this.useDic[w_$B]},w_$h.getCacheList=function(){var w_$B,w_$h=[];for(w_$B in this.shapeDic)w_$h.push(this.shapeDic[w_$B]);for(w_$B in this.shapeLineDic)w_$h.push(this.shapeLineDic[w_$B]);return w_$h},w_$h.startDispose=function(w_$B){var w_$h;for(w_$h in this.useDic)this.useDic[w_$h]=!1;this._checkKey=!0},w_$h.endDispose=function(){if(this._checkKey){var w_$B;for(w_$B in this.useDic)this.useDic[w_$B]||this.deleteShape(w_$B);this._checkKey=!1}},w_$B.getInstance=function(){return w_$B.instance=w_$B.instance||new w_$B},w_$B.instance=null,w_$B}(),w_$D=function(){function w_$A(){this._obj=null,this._obj=w_$A.supportWeakMap?new w_$d.window.WeakMap:{},w_$A.supportWeakMap||w_$A._maps.push(this)}w_$G(w_$A,"laya.utils.WeakObject");var w_$B=w_$A.prototype;return w_$B.set=function(w_$B,w_$h){if(null!=w_$B)if(w_$A.supportWeakMap){var w_$l=w_$B;"string"!=typeof w_$B&&"number"!=typeof w_$B||(w_$l=w_$A._keys[w_$B])||(w_$l=w_$A._keys[w_$B]={k:w_$B}),this._obj.set(w_$l,w_$h)}else"string"==typeof w_$B||"number"==typeof w_$B?this._obj[w_$B]=w_$h:(w_$B.$_GID||(w_$B.$_GID=w_$e.getGID()),this._obj[w_$B.$_GID]=w_$h)},w_$B.get=function(w_$B){if(null==w_$B)return null;if(w_$A.supportWeakMap){var w_$h="string"==typeof w_$B||"number"==typeof w_$B?w_$A._keys[w_$B]:w_$B;return w_$h?this._obj.get(w_$h):null}return"string"==typeof w_$B||"number"==typeof w_$B?this._obj[w_$B]:this._obj[w_$B.$_GID]},w_$B.del=function(w_$B){if(null!=w_$B)if(w_$A.supportWeakMap){var w_$h="string"==typeof w_$B||"number"==typeof w_$B?w_$A._keys[w_$B]:w_$B;if(!w_$h)return;this._obj.delete(w_$h)}else"string"==typeof w_$B||"number"==typeof w_$B?delete this._obj[w_$B]:delete this._obj[this._obj.$_GID]},w_$B.has=function(w_$B){if(null==w_$B)return!1;if(w_$A.supportWeakMap){var w_$h="string"==typeof w_$B||"number"==typeof w_$B?w_$A._keys[w_$B]:w_$B;return this._obj.has(w_$h)}return"string"==typeof w_$B||"number"==typeof w_$B?null!=this._obj[w_$B]:null!=this._obj[this._obj.$_GID]},w_$A.__init__=function(){(w_$A.supportWeakMap=null!=w_$d.window.WeakMap)||w_$v.timer.loop(w_$A.delInterval,null,w_$A.clearCache)},w_$A.clearCache=function(){for(var w_$B=0,w_$h=w_$A._maps.length;w_$B<w_$h;w_$B++){w_$A._maps[w_$B]._obj={}}},w_$A.supportWeakMap=!1,w_$A.delInterval=3e5,w_$A._keys={},w_$A._maps=[],w_$t(w_$A,["I",function(){return this.I=new w_$A}]),w_$A}(),w_$r=function(){function w_$B(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}w_$G(w_$B,"laya.utils.WordText");var w_$h=w_$B.prototype;return w_$h.setText=function(w_$B){this.changed=!0,this._text=w_$B},w_$h.toString=function(){return this._text},w_$h.charCodeAt=function(w_$B){return this._text?this._text.charCodeAt(w_$B):NaN},w_$h.charAt=function(w_$B){return this._text?this._text.charAt(w_$B):null},w_$i(0,w_$h,"length",function(){return this._text?this._text.length:0}),w_$B}(),w_$BB=function(w_$B){function w_$X(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,w_$X.__super.call(this),this._childs=w_$X.ARRAY_EMPTY,this._$P=w_$X.PROP_EMPTY,this.timer=w_$v.scaleTimer,this.conchModel=w_$M.isConchNode?this.createConchModel():null}w_$G(w_$X,"laya.display.Node",w_$P);var w_$h=w_$X.prototype;return w_$h._setBit=function(w_$B,w_$h){1==w_$B&&(this._getBit(w_$B)!=w_$h&&this._updateDisplayedInstage());w_$h?this._bits|=w_$B:this._bits&=~w_$B},w_$h._getBit=function(w_$B){return 0!=(this._bits&w_$B)},w_$h._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},w_$h._setUpNoticeType=function(w_$B){var w_$h=this;for(w_$h._setBit(w_$B,!0),w_$h=w_$h.parent;w_$h;){if(w_$h._getBit(w_$B))return;w_$h._setBit(w_$B,!0),w_$h=w_$h.parent}},w_$h.on=function(w_$B,w_$h,w_$l,w_$A){return"display"!==w_$B&&"undisplay"!==w_$B||this._getBit(1)||this._setUpNoticeType(1),this._createListener(w_$B,w_$h,w_$l,w_$A,!1)},w_$h.once=function(w_$B,w_$h,w_$l,w_$A){return"display"!==w_$B&&"undisplay"!==w_$B||this._getBit(1)||this._setUpNoticeType(1),this._createListener(w_$B,w_$h,w_$l,w_$A,!0)},w_$h.createConchModel=function(){return null},w_$h.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(w_$B?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},w_$h.destroyChildren=function(){if(this._childs)for(var w_$B=this._childs.length-1;-1<w_$B;w_$B--)this._childs[w_$B].destroy(!0)},w_$h.addChild=function(w_$B){if(!w_$B||this.destroyed||w_$B===this)return w_$B;if(w_$B.zOrder&&this._set$P("hasZorder",!0),w_$B._parent===this){var w_$h=this.getChildIndex(w_$B);w_$h!==this._childs.length-1&&(this._childs.splice(w_$h,1),this._childs.push(w_$B),this.conchModel&&(this.conchModel.removeChild(w_$B.conchModel),this.conchModel.addChildAt(w_$B.conchModel,this._childs.length-1)),this._childChanged())}else w_$B.parent&&w_$B.parent.removeChild(w_$B),this._childs===w_$X.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(w_$B),this.conchModel&&this.conchModel.addChildAt(w_$B.conchModel,this._childs.length-1),(w_$B.parent=this)._childChanged();return w_$B},w_$h.addChildren=function(w_$B){for(var w_$h=arguments,w_$l=0,w_$A=w_$h.length;w_$l<w_$A;)this.addChild(w_$h[w_$l++])},w_$h.addChildAt=function(w_$B,w_$h){if(!w_$B||this.destroyed||w_$B===this)return w_$B;if(w_$B.zOrder&&this._set$P("hasZorder",!0),0<=w_$h&&w_$h<=this._childs.length){if(w_$B._parent===this){var w_$l=this.getChildIndex(w_$B);this._childs.splice(w_$l,1),this._childs.splice(w_$h,0,w_$B),this.conchModel&&(this.conchModel.removeChild(w_$B.conchModel),this.conchModel.addChildAt(w_$B.conchModel,w_$h)),this._childChanged()}else w_$B.parent&&w_$B.parent.removeChild(w_$B),this._childs===w_$X.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(w_$h,0,w_$B),this.conchModel&&this.conchModel.addChildAt(w_$B.conchModel,w_$h),w_$B.parent=this;return w_$B}throw new Error("appendChildAt:The index is out of bounds")},w_$h.getChildIndex=function(w_$B){return this._childs.indexOf(w_$B)},w_$h.getChildByName=function(w_$B){var w_$h=this._childs;if(w_$h)for(var w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++){var w_$n=w_$h[w_$l];if(w_$n.name===w_$B)return w_$n}return null},w_$h._get$P=function(w_$B){return this._$P[w_$B]},w_$h._set$P=function(w_$B,w_$h){return this.destroyed||(this._$P===w_$X.PROP_EMPTY&&(this._$P={}),this._$P[w_$B]=w_$h),w_$h},w_$h.getChildAt=function(w_$B){return this._childs[w_$B]},w_$h.setChildIndex=function(w_$B,w_$h){var w_$l=this._childs;if(w_$h<0||w_$h>=w_$l.length)throw new Error("setChildIndex:The index is out of bounds.");var w_$A=this.getChildIndex(w_$B);if(w_$A<0)throw new Error("setChildIndex:node is must child of this object.");return w_$l.splice(w_$A,1),w_$l.splice(w_$h,0,w_$B),this.conchModel&&(this.conchModel.removeChild(w_$B.conchModel),this.conchModel.addChildAt(w_$B.conchModel,w_$h)),this._childChanged(),w_$B},w_$h._childChanged=function(w_$B){},w_$h.removeChild=function(w_$B){if(!this._childs)return w_$B;var w_$h=this._childs.indexOf(w_$B);return this.removeChildAt(w_$h)},w_$h.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},w_$h.removeChildByName=function(w_$B){var w_$h=this.getChildByName(w_$B);return w_$h&&this.removeChild(w_$h),w_$h},w_$h.removeChildAt=function(w_$B){var w_$h=this.getChildAt(w_$B);if(w_$h){for(var w_$l=this._childs.length-1,w_$A=w_$B;w_$A<w_$l;++w_$A)this._childs[w_$A]=this._childs[w_$A+1];this._childs.length=w_$l,this.conchModel&&this.conchModel.removeChild(w_$h.conchModel),w_$h.parent=null}return w_$h},w_$h.removeChildren=function(w_$B,w_$h){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=2147483647),this._childs&&0<this._childs.length){var w_$l=this._childs;if(0===w_$B&&w_$s<=w_$h){var w_$A=w_$l;this._childs=w_$X.ARRAY_EMPTY}else w_$A=w_$l.splice(w_$B,w_$h-w_$B);for(var w_$n=0,w_$s=w_$A.length;w_$n<w_$s;w_$n++)w_$A[w_$n].parent=null,this.conchModel&&this.conchModel.removeChild(w_$A[w_$n].conchModel)}return this},w_$h.replaceChild=function(w_$B,w_$h){var w_$l=this._childs.indexOf(w_$h);return-1<w_$l?(this._childs.splice(w_$l,1,w_$B),this.conchModel&&(this.conchModel.removeChild(w_$h.conchModel),this.conchModel.addChildAt(w_$B.conchModel,w_$l)),w_$h.parent=null,w_$B.parent=this,w_$B):null},w_$h._updateDisplayedInstage=function(){var w_$B;w_$B=this;var w_$h=w_$v.stage;for(this._displayedInStage=!1;w_$B;){if(w_$B._getBit(1)){this._displayedInStage=w_$B._displayedInStage;break}if(w_$B==w_$h||w_$B._displayedInStage){this._displayedInStage=!0;break}w_$B=w_$B.parent}},w_$h._setDisplay=function(w_$B){this._displayedInStage!==w_$B&&((this._displayedInStage=w_$B)?this.event("display"):this.event("undisplay"))},w_$h._displayChild=function(w_$B,w_$h){var w_$l=w_$B._childs;if(w_$l)for(var w_$A=0;w_$A<w_$l.length;w_$A++){var w_$n=w_$l[w_$A];w_$n&&w_$n._getBit(1)&&(0<w_$n._childs.length?this._displayChild(w_$n,w_$h):w_$n._setDisplay(w_$h))}w_$B._setDisplay(w_$h)},w_$h.contains=function(w_$B){if(w_$B===this)return!0;for(;w_$B;){if(w_$B.parent===this)return!0;w_$B=w_$B.parent}return!1},w_$h.timerLoop=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$n&&(w_$n=!0),void 0===w_$s&&(w_$s=!1),this.timer.loop(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)},w_$h.timerOnce=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=!0),this.timer._create(!1,!1,w_$B,w_$h,w_$l,w_$A,w_$n)},w_$h.frameLoop=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=!0),this.timer._create(!0,!0,w_$B,w_$h,w_$l,w_$A,w_$n)},w_$h.frameOnce=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=!0),this.timer._create(!0,!1,w_$B,w_$h,w_$l,w_$A,w_$n)},w_$h.clearTimer=function(w_$B,w_$h){this.timer.clear(w_$B,w_$h)},w_$i(0,w_$h,"numChildren",function(){return this._childs.length}),w_$i(0,w_$h,"destroyed",function(){return this._destroyed}),w_$i(0,w_$h,"parent",function(){return this._parent},function(w_$B){this._parent!==w_$B&&(w_$B?(this._parent=w_$B,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),w_$B.displayedInStage&&this._displayChild(this,!0)),w_$B._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=w_$B))}),w_$i(0,w_$h,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),w_$X.ARRAY_EMPTY=[],w_$X.PROP_EMPTY={},w_$X.NOTICE_DISPLAY=1,w_$X.MOUSEENABLE=2,w_$X}(),w_$hB=function(w_$B){function w_$b(w_$B){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,w_$b.__super.call(this),this._padding=w_$b._PADDING,this._spacing=w_$b._SPACING,this._aligns=w_$b._ALIGNS,this._font=w_$Q.EMPTY,this._ower=w_$B}w_$G(w_$b,"laya.display.css.CSSStyle",w_$B);var w_$h=w_$b.prototype;return w_$h.destroy=function(){this._ower=null,this._font=null,this._rect=null},w_$h.inherit=function(w_$B){this._font=w_$B._font,this._spacing=w_$B._spacing===w_$b._SPACING?w_$b._SPACING:w_$B._spacing.slice(),this.lineHeight=w_$B.lineHeight},w_$h._widthAuto=function(){return 0!=(262144&this._type)},w_$h.widthed=function(w_$B){return 0!=(8&this._type)},w_$h._calculation=function(w_$B,w_$h){if(w_$h.indexOf("%")<0)return!1;var w_$A=this._ower,w_$n=w_$A.parent,w_$s=this._rect;function w_$X(w_$B,w_$h,w_$l){return w_$B*w_$l[0]+w_$h*w_$l[1]+w_$l[2]}function w_$l(w_$B){var w_$h=w_$n.width,w_$l=w_$A.width;w_$s.width&&(w_$A.width=w_$X(w_$h,w_$l,w_$s.width)),w_$s.height&&(w_$A.height=w_$X(w_$h,w_$l,w_$s.height)),w_$s.left&&(w_$A.x=w_$X(w_$h,w_$l,w_$s.left)),w_$s.top&&(w_$A.y=w_$X(w_$h,w_$l,w_$s.top))}null===w_$s&&(w_$n._getCSSStyle()._type|=524288,w_$n.on("resize",this,w_$l),this._rect=w_$s={input:{}});var w_$Z=w_$h.split(" ");return w_$Z[0]=parseFloat(w_$Z[0])/100,1==w_$Z.length?w_$Z[1]=w_$Z[2]=0:(w_$Z[1]=parseFloat(w_$Z[1])/100,w_$Z[2]=parseFloat(w_$Z[2])),w_$s[w_$B]=w_$Z,w_$s.input[w_$B]=w_$h,w_$l(),!0},w_$h.heighted=function(w_$B){return 0!=(8192&this._type)},w_$h.size=function(w_$B,w_$h){var w_$l=this._ower,w_$A=!1;-1!==w_$B&&w_$B!=this._ower.width&&(this._type|=8,this._ower.width=w_$B,w_$A=!0),-1!==w_$h&&w_$h!=this._ower.height&&(this._type|=8192,this._ower.height=w_$h,w_$A=!0),w_$A&&(w_$l._layoutLater(),524288&this._type&&w_$l.event("resize",this))},w_$h._getAlign=function(){return this._aligns[0]},w_$h._getValign=function(){return this._aligns[1]},w_$h._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},w_$h._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new w_$Q(this._font))},w_$h.render=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.width,w_$s=w_$B.height;w_$l-=w_$B.pivotX,w_$A-=w_$B.pivotY,this._bgground&&null!=this._bgground.color&&w_$h.ctx.fillRect(w_$l,w_$A,w_$n,w_$s,this._bgground.color),this._border&&this._border.color&&w_$h.drawRect(w_$l,w_$A,w_$n,w_$s,this._border.color.strColor,this._border.size)},w_$h.getCSSStyle=function(){return this},w_$h.cssText=function(w_$B){this.attrs(w_$b.parseOneCSS(w_$B,";"))},w_$h.attrs=function(w_$B){if(w_$B)for(var w_$h=0,w_$l=w_$B.length;w_$h<w_$l;w_$h++){var w_$A=w_$B[w_$h];this[w_$A[0]]=w_$A[1]}},w_$h.setTransform=function(w_$B){"none"===w_$B?this._tf=w_$Z._TF_EMPTY:this.attrs(w_$b.parseOneCSS(w_$B,","))},w_$h.translate=function(w_$B,w_$h){this._tf===w_$Z._TF_EMPTY&&(this._tf=new w_$n),this._tf.translateX=w_$B,this._tf.translateY=w_$h},w_$h.scale=function(w_$B,w_$h){this._tf===w_$Z._TF_EMPTY&&(this._tf=new w_$n),this._tf.scaleX=w_$B,this._tf.scaleY=w_$h},w_$h._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},w_$i(0,w_$h,"block",w_$B.prototype._$get_block,function(w_$B){w_$B?this._type|=1:this._type&=-2}),w_$i(0,w_$h,"valign",function(){return w_$b._valigndef[this._aligns[1]]},function(w_$B){this._aligns===w_$b._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=w_$b._valigndef[w_$B]}),w_$i(0,w_$h,"height",null,function(w_$B){if(this._type|=8192,"string"==typeof w_$B){if(this._calculation("height",w_$B))return;w_$B=parseInt(w_$B)}this.size(-1,w_$B)}),w_$i(0,w_$h,"width",null,function(w_$B){if(this._type|=8,"string"==typeof w_$B){var w_$h=w_$B.indexOf("auto");if(0<=w_$h&&(this._type|=262144,w_$B=w_$B.substr(0,w_$h)),this._calculation("width",w_$B))return;w_$B=parseInt(w_$B)}this.size(w_$B,-1)}),w_$i(0,w_$h,"fontWeight",function(){return this._font.weight},function(w_$B){this._createFont().weight=w_$B}),w_$i(0,w_$h,"left",null,function(w_$B){var w_$h=this._ower;if("string"==typeof w_$B){if("center"===w_$B?w_$B="50% -50% 0":"right"===w_$B&&(w_$B="100% -100% 0"),this._calculation("left",w_$B))return;w_$B=parseInt(w_$B)}w_$h.x=w_$B}),w_$i(0,w_$h,"_translate",null,function(w_$B){this.translate(w_$B[0],w_$B[1])}),w_$i(0,w_$h,"absolute",function(){return 0!=(4&this._type)}),w_$i(0,w_$h,"top",null,function(w_$B){var w_$h=this._ower;if("string"==typeof w_$B){if("middle"===w_$B?w_$B="50% -50% 0":"bottom"===w_$B&&(w_$B="100% -100% 0"),this._calculation("top",w_$B))return;w_$B=parseInt(w_$B)}w_$h.y=w_$B}),w_$i(0,w_$h,"align",function(){return w_$b._aligndef[this._aligns[0]]},function(w_$B){this._aligns===w_$b._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=w_$b._aligndef[w_$B]}),w_$i(0,w_$h,"bold",function(){return this._font.bold},function(w_$B){this._createFont().bold=w_$B}),w_$i(0,w_$h,"padding",function(){return this._padding},function(w_$B){this._padding=w_$B}),w_$i(0,w_$h,"leading",function(){return this._spacing[1]},function(w_$B){"string"==typeof w_$B&&(w_$B=parseInt(w_$B+"")),this._spacing===w_$b._SPACING&&(this._spacing=[0,0]),this._spacing[1]=w_$B}),w_$i(0,w_$h,"lineElement",function(){return 0!=(65536&this._type)},function(w_$B){w_$B?this._type|=65536:this._type&=-65537}),w_$i(0,w_$h,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(w_$B){this.lineElement=!1,"right"===w_$B?this._type|=32768:this._type&=-32769}),w_$i(0,w_$h,"textDecoration",function(){return this._font.decoration},function(w_$B){this._createFont().decoration=w_$B}),w_$i(0,w_$h,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(w_$B){"nowrap"===w_$B&&(this._type|=131072),"none"===w_$B&&(this._type&=-131073)}),w_$i(0,w_$h,"background",null,function(w_$B){w_$B?(this._bgground||(this._bgground={}),this._bgground.color=w_$B,this._ower.conchModel&&this._ower.conchModel.bgColor(w_$B),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),w_$i(0,w_$h,"wordWrap",function(){return 0==(131072&this._type)},function(w_$B){w_$B?this._type&=-131073:this._type|=131072}),w_$i(0,w_$h,"color",function(){return this._font.color},function(w_$B){this._createFont().color=w_$B}),w_$i(0,w_$h,"password",function(){return this._font.password},function(w_$B){this._createFont().password=w_$B}),w_$i(0,w_$h,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(w_$B){"none"===w_$B?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=w_$B),this._ower.conchModel&&this._ower.conchModel.bgColor(w_$B),this._ower._renderType|=256}),w_$i(0,w_$h,"font",function(){return this._font.toString()},function(w_$B){this._createFont().set(w_$B)}),w_$i(0,w_$h,"weight",null,function(w_$B){this._createFont().weight=w_$B}),w_$i(0,w_$h,"letterSpacing",function(){return this._spacing[0]},function(w_$B){"string"==typeof w_$B&&(w_$B=parseInt(w_$B+"")),this._spacing===w_$b._SPACING&&(this._spacing=[0,0]),this._spacing[0]=w_$B}),w_$i(0,w_$h,"fontSize",function(){return this._font.size},function(w_$B){this._createFont().size=w_$B}),w_$i(0,w_$h,"italic",function(){return this._font.italic},function(w_$B){this._createFont().italic=w_$B}),w_$i(0,w_$h,"fontFamily",function(){return this._font.family},function(w_$B){this._createFont().family=w_$B}),w_$i(0,w_$h,"stroke",function(){return this._font.stroke[0]},function(w_$B){this._createFont().stroke===w_$Q._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=w_$B}),w_$i(0,w_$h,"strokeColor",function(){return this._font.stroke[1]},function(w_$B){this._createFont().stroke===w_$Q._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=w_$B}),w_$i(0,w_$h,"border",function(){return this._border?this._border.value:""},function(w_$B){if("none"!=w_$B){this._border||(this._border={});var w_$h=(this._border.value=w_$B).split(" ");if(this._border.color=w_$F.create(w_$h[w_$h.length-1]),1==w_$h.length)return this._border.size=1,void(this._border.type="solid");var w_$l=0;0<w_$h[0].indexOf("px")?(this._border.size=parseInt(w_$h[0]),w_$l++):this._border.size=1,this._border.type=w_$h[w_$l],this._ower._renderType|=256}else this._border=null}),w_$i(0,w_$h,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(w_$B){w_$B?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==w_$B?null:w_$F.create(w_$B),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),w_$i(0,w_$h,"position",function(){return 4&this._type?"absolute":""},function(w_$B){"absolute"==w_$B?this._type|=4:this._type&=-5}),w_$i(0,w_$h,"display",null,function(w_$B){switch(w_$B){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),w_$i(0,w_$h,"paddingLeft",function(){return this.padding[3]}),w_$i(0,w_$h,"paddingTop",function(){return this.padding[0]}),w_$i(0,w_$h,"_scale",null,function(w_$B){this._ower.scale(w_$B[0],w_$B[1])}),w_$i(0,w_$h,"_rotate",null,function(w_$B){this._ower.rotation=w_$B}),w_$b.parseOneCSS=function(w_$B,w_$h){for(var w_$l,w_$A=[],w_$n=w_$B.split(w_$h),w_$s=0,w_$X=w_$n.length;w_$s<w_$X;w_$s++){var w_$Z=w_$n[w_$s],w_$t=w_$Z.indexOf(":"),w_$P=w_$Z.substr(0,w_$t).replace(/^\s+|\s+$/g,"");if(0!=w_$P.length){var w_$G=w_$Z.substr(w_$t+1).replace(/^\s+|\s+$/g,""),w_$T=[w_$P,w_$G];switch(w_$P){case"italic":case"bold":w_$T[1]="true"==w_$G;break;case"line-height":w_$T[0]="lineHeight",w_$T[1]=parseInt(w_$G);break;case"font-size":w_$T[0]="fontSize",w_$T[1]=parseInt(w_$G);break;case"padding":1<(w_$l=w_$G.split(" ")).length||(w_$l[1]=w_$l[2]=w_$l[3]=w_$l[0]),w_$T[1]=[parseInt(w_$l[0]),parseInt(w_$l[1]),parseInt(w_$l[2]),parseInt(w_$l[3])];break;case"rotate":w_$T[0]="_rotate",w_$T[1]=parseFloat(w_$G);break;case"scale":w_$l=w_$G.split(" "),w_$T[0]="_scale",w_$T[1]=[parseFloat(w_$l[0]),parseFloat(w_$l[1])];break;case"translate":w_$l=w_$G.split(" "),w_$T[0]="_translate",w_$T[1]=[parseInt(w_$l[0]),parseInt(w_$l[1])];break;default:(w_$T[0]=w_$b._CSSTOVALUE[w_$P])||(w_$T[0]=w_$P)}w_$A.push(w_$T)}}return w_$A},w_$b.parseCSS=function(w_$B,w_$h){for(var w_$l;null!=(w_$l=w_$b._parseCSSRegExp.exec(w_$B));)w_$b.styleSheets[w_$l[1]]=w_$b.parseOneCSS(w_$l[2],";")},w_$b.EMPTY=new w_$b(null),w_$b._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},w_$b._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),w_$b._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},w_$b._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},w_$b.styleSheets={},w_$b.ALIGN_CENTER=1,w_$b.ALIGN_RIGHT=2,w_$b.VALIGN_MIDDLE=1,w_$b.VALIGN_BOTTOM=2,w_$b._CSS_BLOCK=1,w_$b._DISPLAY_NONE=2,w_$b._ABSOLUTE=4,w_$b._WIDTH_SET=8,w_$b._PADDING=[0,0,0,0],w_$b._RECT=[-1,-1,-1,-1],w_$b._SPACING=[0,0],w_$b._ALIGNS=[0,0,0],w_$b.ADDLAYOUTED=512,w_$b._NEWFONT=4096,w_$b._HEIGHT_SET=8192,w_$b._BACKGROUND_SET=16384,w_$b._FLOAT_RIGHT=32768,w_$b._LINE_ELEMENT=65536,w_$b._NOWARP=131072,w_$b._WIDTHAUTO=262144,w_$b._LISTERRESZIE=524288,w_$b}(w_$Z),w_$lB=function(w_$B){function w_$X(){this.url=null,this.audio=null,this.loaded=!1,w_$X.__super.call(this)}w_$G(w_$X,"laya.media.h5audio.AudioSound",w_$P);var w_$h=w_$X.prototype;return w_$h.dispose=function(){var w_$B=w_$X._audioCache[this.url];w_$B&&(w_$B.src="",delete w_$X._audioCache[this.url])},w_$h.load=function(w_$B){var w_$h;if(w_$B=w_$W.formatURL(w_$B),(this.url=w_$B)==w_$a._tMusic?(w_$X._initMusicAudio(),(w_$h=w_$X._musicAudio).src!=w_$B&&(w_$X._audioCache[w_$h.src]=null,w_$h=null)):w_$h=w_$X._audioCache[w_$B],w_$h&&2<=w_$h.readyState)this.event("complete");else{w_$h||(w_$h=w_$B==w_$a._tMusic?(w_$X._initMusicAudio(),w_$X._musicAudio):w_$d.createElement("audio"),(w_$X._audioCache[w_$B]=w_$h).src=w_$B),w_$h.addEventListener("canplaythrough",w_$A),w_$h.addEventListener("error",w_$n);var w_$l=this;(this.audio=w_$h).load?w_$h.load():w_$n()}function w_$A(){w_$s(),w_$l.loaded=!0,w_$l.event("complete")}function w_$n(){w_$h.load=null,w_$s(),w_$l.event("error")}function w_$s(){w_$h.removeEventListener("canplaythrough",w_$A),w_$h.removeEventListener("error",w_$n)}},w_$h.play=function(w_$B,w_$h,w_$l){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),!this.url)return null;var w_$A,w_$n;if(!(w_$A=this.url==w_$a._tMusic?w_$X._musicAudio:w_$X._audioCache[this.url]))return null;w_$n=w_$K.getItem("audio:"+this.url),w_$M.isConchApp?w_$n||((w_$n=w_$d.createElement("audio")).src=this.url):this.url==w_$a._tMusic?(w_$X._initMusicAudio(),(w_$n=w_$X._musicAudio).src=this.url):w_$n=w_$n||w_$A.cloneNode(!0);var w_$s=new w_$bB(w_$n);return w_$s.url=this.url,w_$s.loops=w_$h,w_$s.startTime=w_$B,w_$s.startHandler=w_$l,w_$s.play(!1),w_$a.addChannel(w_$s),w_$s},w_$i(0,w_$h,"duration",function(){var w_$B;return(w_$B=w_$X._audioCache[this.url])?w_$B.duration:0}),w_$X._initMusicAudio=function(){w_$X._musicAudio||(w_$X._musicAudio||(w_$X._musicAudio=w_$d.createElement("audio")),w_$M.isConchApp||w_$d.document.addEventListener("mousedown",w_$X._makeMusicOK))},w_$X._makeMusicOK=function(){w_$d.document.removeEventListener("mousedown",w_$X._makeMusicOK),w_$X._musicAudio.src?w_$X._musicAudio.play():(w_$X._musicAudio.src="",w_$X._musicAudio.load())},w_$X._audioCache={},w_$X._musicAudio=null,w_$X}(),w_$AB=function(w_$B){function w_$h(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,w_$h.__super.call(this)}w_$G(w_$h,"laya.media.SoundChannel",w_$P);var w_$l=w_$h.prototype;return w_$l.play=function(){},w_$l.stop=function(){},w_$l.pause=function(){},w_$l.resume=function(){},w_$l.__runComplete=function(w_$B){w_$B&&w_$B.run()},w_$i(0,w_$l,"volume",function(){return 1},function(w_$B){}),w_$i(0,w_$l,"position",function(){return 0}),w_$i(0,w_$l,"duration",function(){return 0}),w_$h}(),w_$nB=function(w_$B){function w_$h(){w_$h.__super.call(this)}w_$G(w_$h,"laya.media.Sound",w_$P);var w_$l=w_$h.prototype;return w_$l.load=function(w_$B){},w_$l.play=function(w_$B,w_$h,w_$l){return void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),null},w_$l.dispose=function(){},w_$i(0,w_$l,"duration",function(){return 0}),w_$h}(),w_$sB=function(w_$B){function w_$n(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,w_$n.__super.call(this)}w_$G(w_$n,"laya.media.webaudio.WebAudioSound",w_$P);var w_$h=w_$n.prototype;return w_$h.load=function(w_$B){this.url=w_$B,this.audioBuffer=w_$n._dataCache[w_$B],this.audioBuffer?this._loaded(this.audioBuffer):(w_$n.e.on("loaded:"+w_$B,this,this._loaded),w_$n.e.on("err:"+w_$B,this,this._err),w_$n.__loadingSound[w_$B]||(w_$n.__loadingSound[w_$B]=!0,w_$v.loader.load(w_$B,w_$H.create(this,this.onloaded),null,w_$ZB.BUFFER,4,!1,null,!0)))},w_$h.onloaded=function(w_$B){w_$B||this._err(),this._disposed?this._removeLoadEvents():(this.data=w_$B,w_$n.buffs.push({buffer:this.data,url:this.url}),w_$n.decode())},w_$h._err=function(){if(this._removeLoadEvents(),w_$n.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var w_$B,w_$h,w_$l,w_$A=0;for(w_$B=(w_$h=this.__toPlays).length,w_$A=0;w_$A<w_$B;w_$A++)(w_$l=w_$h[w_$A])[3]&&!w_$l[3].isStopped&&w_$l[3].event("error");this.__toPlays.length=0}},w_$h._loaded=function(w_$B){this._removeLoadEvents(),this._disposed||(this.audioBuffer=w_$B,this.loaded=!0,this.event("complete"))},w_$h._removeLoadEvents=function(){w_$n.e.off("loaded:"+this.url,this,this._loaded),w_$n.e.off("err:"+this.url,this,this._err)},w_$h.__playAfterLoaded=function(){if(this.__toPlays){var w_$B,w_$h,w_$l,w_$A=0;for(w_$B=(w_$h=this.__toPlays).length,w_$A=0;w_$A<w_$B;w_$A++)(w_$l=w_$h[w_$A])[3]&&!w_$l[3].isStopped&&this.play(w_$l[0],w_$l[1],w_$l[2],w_$l[3]);this.__toPlays.length=0}},w_$h.play=function(w_$B,w_$h,w_$l,w_$A){return void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),w_$A=w_$A||new w_$QB,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([w_$B,w_$h,w_$l,w_$A]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),w_$A.url=this.url,w_$A.loops=w_$h,w_$A.audioBuffer=this.audioBuffer,w_$A.startTime=w_$B,w_$A.startHandler=w_$l,w_$A.play(!1),w_$a.addChannel(w_$A),w_$A},w_$h.dispose=function(){this._disposed=!0,delete w_$n._dataCache[this.url],delete w_$n.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},w_$i(0,w_$h,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),w_$n.decode=function(){if(!(w_$n.buffs.length<=0||w_$n.isDecoding))if(w_$n.isDecoding=!0,(w_$n.tInfo=w_$n.buffs.shift())&&w_$n.tInfo.buffer&&w_$n.tInfo.buffer.byteLength)try{w_$n.ctx.decodeAudioData(w_$n.tInfo.buffer,w_$n._done,w_$n._fail)}catch(w_$B){console.error("decodeAudioData error  byteLength:"+w_$n.tInfo.buffer.byteLength+"  url:"+w_$n.tInfo.url)}else w_$n._fail()},w_$n._done=function(w_$B){w_$n.e.event("loaded:"+w_$n.tInfo.url,w_$B),w_$n._dataCache[w_$n.tInfo.url]=w_$B,w_$n.isDecoding=!1,w_$n.decode()},w_$n._fail=function(){w_$n.e.event("err:"+w_$n.tInfo.url,null),w_$n.isDecoding=!1,w_$n.decode()},w_$n._playEmptySound=function(){if(null!=w_$n.ctx){if(w_$n._emptySource&&(w_$n._emptySource.stop(),w_$n._emptySource.disconnect(0),!w_$QB._tryCleanFailed))try{w_$n._emptySource.buffer=null}catch(w_$B){w_$QB._tryCleanFailed=!0}var w_$B=w_$n.ctx.createBufferSource();w_$B.buffer=w_$n._miniBuffer,w_$B.connect(w_$n.ctx.destination),w_$B.start(0,0,0),w_$n._emptySource=w_$B}},w_$n._unlock=function(){w_$n._unlocked||(w_$n._playEmptySound(),"running"==w_$n.ctx.state?(w_$d.document.removeEventListener("mousedown",w_$n._unlock,!0),w_$d.document.removeEventListener("touchend",w_$n._unlock,!0),w_$d.document.removeEventListener("touchstart",w_$n._unlock,!0),w_$n._unlocked=!0):"suspended"==w_$n.ctx.state&&w_$a._recoverWebAudio())},w_$n.initWebAudio=function(){"running"!=w_$n.ctx.state&&(w_$n._unlock(),w_$d.document.addEventListener("mousedown",w_$n._unlock,!0),w_$d.document.addEventListener("touchend",w_$n._unlock,!0),w_$d.document.addEventListener("touchstart",w_$n._unlock,!0))},w_$n._emptySource=null,w_$n._dataCache={},w_$n.buffs=[],w_$n.isDecoding=!1,w_$n._unlocked=!1,w_$n.tInfo=null,w_$n.__loadingSound={},w_$t(w_$n,["window",function(){return this.window=w_$d.window},"webAudioEnabled",function(){return this.webAudioEnabled=w_$n.window.AudioContext||w_$n.window.webkitAudioContext||w_$n.window.mozAudioContext},"ctx",function(){return this.ctx=w_$n.webAudioEnabled?new(w_$n.window.AudioContext||w_$n.window.webkitAudioContext||w_$n.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=w_$n.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new w_$P}]),w_$n}(),w_$XB=function(w_$B){function w_$h(){this._responseType=null,this._data=null,w_$h.__super.call(this),this._http=new w_$d.window.XMLHttpRequest}w_$G(w_$h,"laya.net.HttpRequest",w_$P);var w_$l=w_$h.prototype;return w_$l.send=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$l&&(w_$l="get"),void 0===w_$A&&(w_$A="text"),this._responseType=w_$A,this._data=null;var w_$s=this,w_$X=this._http;if(w_$X.open(w_$l,w_$B,!0),w_$n)for(var w_$Z=0;w_$Z<w_$n.length;w_$Z++)w_$X.setRequestHeader(w_$n[w_$Z++],w_$n[w_$Z]);else w_$M.isConchApp||(w_$h&&"string"!=typeof w_$h?w_$X.setRequestHeader("Content-Type","application/json"):w_$X.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));w_$X.responseType="arraybuffer"!==w_$A?"text":"arraybuffer",w_$X.onerror=function(w_$B){w_$s._onError(w_$B)},w_$X.onabort=function(w_$B){w_$s._onAbort(w_$B)},w_$X.onprogress=function(w_$B){w_$s._onProgress(w_$B)},w_$X.onload=function(w_$B){w_$s._onLoad(w_$B)},w_$X.send(w_$h)},w_$l._onProgress=function(w_$B){w_$B&&w_$B.lengthComputable&&this.event("progress",w_$B.loaded/w_$B.total)},w_$l._onAbort=function(w_$B){this.error("Request was aborted by user")},w_$l._onError=function(w_$B){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},w_$l._onLoad=function(w_$B){var w_$h=this._http,w_$l=void 0!==w_$h.status?w_$h.status:200;200===w_$l||204===w_$l||0===w_$l?this.complete():this.error("["+w_$h.status+"]"+w_$h.statusText+":"+w_$h.responseURL)},w_$l.error=function(w_$B){this.clear(),this.event("error",w_$B)},w_$l.complete=function(){this.clear();var w_$h=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=w_$e.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(w_$B){w_$h=!1,this.error(w_$B.message)}w_$h&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},w_$l.clear=function(){var w_$B=this._http;w_$B.onerror=w_$B.onabort=w_$B.onprogress=w_$B.onload=null},w_$i(0,w_$l,"url",function(){return this._http.responseURL}),w_$i(0,w_$l,"http",function(){return this._http}),w_$i(0,w_$l,"data",function(){return this._data}),w_$h}(),w_$ZB=function(w_$B){function w_$w(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,w_$w.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}w_$G(w_$w,"laya.net.Loader",w_$P);var w_$h=w_$w.prototype;return w_$h.load=function(w_$B,w_$h,w_$l,w_$A,w_$n){if(w_$B&&""!=w_$B||console.error("Loader 加载的url不合法 "+w_$B),void 0===w_$l&&(w_$l=!0),void 0===w_$n&&(w_$n=!1),0===(this._url=w_$B).indexOf("data:image")?this._type=w_$h="image":this._type=w_$h||(w_$h=this.getTypeFromUrl(w_$B)),this._cache=w_$l,this._data=null,!w_$n&&w_$w.loadedMap[w_$B])return this._data=w_$w.loadedMap[w_$B],this.event("progress",1),void this.event("complete",this._data);if(w_$A&&w_$w.setGroup(w_$B,w_$A),null!=w_$w.parserMap[w_$h])return this._customParse=!0,void(w_$w.parserMap[w_$h]instanceof laya.utils.Handler?w_$w.parserMap[w_$h].runWith(this):w_$w.parserMap[w_$h].call(null,this));if("image"===w_$h||"htmlimage"===w_$h||"nativeimage"===w_$h)return this._loadImage(w_$B);if("ttf"===w_$h)return this._loadTTF(w_$B);switch(w_$h){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:w_$h}w_$w.preLoadedMap[w_$B]?this.onLoaded(w_$w.preLoadedMap[w_$B]):w_$X.resMgrLoad(w_$B,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},w_$h.getTypeFromUrl=function(w_$B){var w_$h=w_$e.getFileExtension(w_$B);return w_$h?w_$w.typeMap[w_$h]:(console.warn("Not recognize the resources suffix",w_$B),"text")},w_$h._loadTTF=function(w_$B){w_$B=w_$W.formatURL(w_$B);var w_$h=new w_$R;w_$h.complete=w_$H.create(this,this.onLoaded),w_$h.load(w_$B)},w_$h._loadImage=function(w_$B){w_$X.imgMgrLoad(w_$B,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},w_$h._loadImageComplete=function(w_$B,w_$h,w_$l){if(null!=w_$l)if(w_$l instanceof ArrayBuffer){var w_$A=new DataView(w_$l),w_$n=new laya.webgl.resource.WebGLImage(new Uint8Array(w_$l,8),w_$B,0,!1,w_$A.getUint32(0),w_$A.getUint32(4));this.onLoaded(w_$n)}else if(w_$l instanceof w_$GB)w_$w.imgMgrSet[w_$B]=w_$h,w_$X.imgMgrLock(w_$B,w_$w.imgMgrSet[w_$B]),this._url=w_$B,this.complete(w_$l);else{var w_$s=-1!=w_$B.indexOf(".png",w_$B.length-4)?6408:6407;w_$n=new laya.webgl.resource.WebGLImage(w_$l,w_$B,w_$s,!1,w_$l.width,w_$l.height);this.onLoaded(w_$n)}else this.event("error","Load image failed")},w_$h.imageCancel=function(w_$B,w_$h,w_$l){w_$X.imgMgrCancel(w_$B,this._onImageCallback)},w_$h._loadSound=function(w_$B){var w_$h=new w_$a._soundClass,w_$l=this;function w_$A(){w_$h.offAll()}w_$h.on("complete",this,function(){w_$A(),w_$l.onLoaded(w_$h)}),w_$h.on("error",this,function(){w_$A(),w_$h.dispose(),w_$l.event("error","Load sound failed")}),w_$h.load(w_$B)},w_$h.onProgress=function(w_$B){"atlas"===this._type?this.event("progress",.3*w_$B):this.event("progress",w_$B)},w_$h.onError=function(w_$B){this.event("error",w_$B)},w_$h._loadedComplete=function(w_$B,w_$h,w_$l){if(null!=w_$l)switch(this._type){case"atlas":case"plf":case"json":var w_$A=new w_$k(w_$l);this.onLoaded(JSON.parse(w_$A.readUTFBytes()));break;case"font":w_$A=new w_$k(w_$l);this.onLoaded(w_$e.parseXMLFromString(w_$A.readUTFBytes()));break;default:this.onLoaded(w_$l)}else this.event("error",w_$B)},w_$h.onLoaded=function(w_$B){var w_$h=this._type;if("plf"==w_$h)this.parsePLFData(w_$B),this.complete(w_$B);else if("image"===w_$h){var w_$l=new w_$GB(w_$B);w_$l.url=this._url,this.complete(w_$l)}else if("sound"===w_$h||"htmlimage"===w_$h||"nativeimage"===w_$h)this.complete(w_$B);else if("atlas"===w_$h){if(!w_$B.src&&!w_$B._setContext){if(!this._data){if((this._data=w_$B).meta&&w_$B.meta.image)for(var w_$A=w_$B.meta.image.split(","),w_$n=0<=this._url.indexOf("/")?"/":"\\",w_$s=this._url.lastIndexOf(w_$n),w_$X=0<=w_$s?this._url.substr(0,w_$s+1):"",w_$Z=0,w_$t=w_$A.length;w_$Z<w_$t;w_$Z++)w_$A[w_$Z]=w_$X+w_$A[w_$Z];else w_$A=[this._url.replace(".json",".png")];w_$A.reverse(),w_$B.toLoads=w_$A,w_$B.pics=[]}return this.event("progress",.3+1/w_$A.length*.6),this._loadImage(w_$A.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(w_$B),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var w_$P=this._data.frames,w_$G=this._url.split("?")[0],w_$T=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:w_$G.substring(0,w_$G.lastIndexOf("."))+"/",w_$b=this._data.pics,w_$Q=w_$W.formatURL(this._url),w_$i=w_$w.atlasMap[w_$Q]||(w_$w.atlasMap[w_$Q]=[]);w_$i.dir=w_$T;var w_$$=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var w_$V in w_$$=parseFloat(this._data.meta.scale),w_$P){var w_$J,w_$H=w_$P[w_$V],w_$y=w_$b[w_$H.frame.idx?w_$H.frame.idx:0],w_$C=w_$W.formatURL(w_$T+w_$V);w_$y.scaleRate=w_$$,w_$J=w_$GB.create(w_$y,w_$H.frame.x,w_$H.frame.y,w_$H.frame.w,w_$H.frame.h,w_$H.spriteSourceSize.x,w_$H.spriteSourceSize.y,w_$H.sourceSize.w,w_$H.sourceSize.h),w_$w.cacheRes(w_$C,w_$J),w_$w.keepCache(this._url,w_$T+w_$V),w_$J.url=w_$C,w_$i.push(w_$C)}else for(w_$V in w_$P)w_$y=w_$b[(w_$H=w_$P[w_$V]).frame.idx?w_$H.frame.idx:0],w_$C=w_$W.formatURL(w_$T+w_$V),w_$w.cacheRes(w_$C,w_$GB.create(w_$y,w_$H.frame.x,w_$H.frame.y,w_$H.frame.w,w_$H.frame.h,w_$H.spriteSourceSize.x,w_$H.spriteSourceSize.y,w_$H.sourceSize.w,w_$H.sourceSize.h)),w_$w.loadedMap[w_$C].url=w_$C,w_$w.keepCache(this._url,w_$T+w_$V),w_$i.push(w_$C);delete this._data.pics,this.complete(this._data)}else if("font"==w_$h){if(!w_$B.src)return this._data=w_$B,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var w_$o=new w_$z;w_$o.parseFont(this._data,w_$B);var w_$u=this._url.split(".fnt")[0].split("/"),w_$v=w_$u[w_$u.length-1];w_$VB.registerBitmapFont(w_$v,w_$o),this._data=w_$o,this.complete(this._data)}else if("pkm"==w_$h){var w_$U=w_$uB.create(w_$B,this._url),w_$x=new w_$GB(w_$U);w_$x.url=this._url,this.complete(w_$x)}else this.complete(w_$B)},w_$h.parsePLFData=function(w_$B){var w_$h,w_$l,w_$A;for(w_$h in w_$B)switch(w_$A=w_$B[w_$h],w_$h){case"json":case"text":for(w_$l in w_$A)w_$w.preLoadedMap[w_$W.formatURL(w_$l)]=w_$A[w_$l];break;default:for(w_$l in w_$A)w_$w.preLoadedMap[w_$W.formatURL(w_$l)]=w_$A[w_$l]}},w_$h.complete=function(w_$B){this._data=w_$B,this._customParse?this.event("loaded",w_$B instanceof Array?[w_$B]:w_$B):(w_$w._loaders.push(this),w_$w._isWorking||w_$w.checkNext())},w_$h.endLoad=function(w_$B){w_$B&&(this._data=w_$B),this._cache&&w_$w.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},w_$i(0,w_$h,"url",function(){return this._url}),w_$i(0,w_$h,"data",function(){return this._data}),w_$i(0,w_$h,"cache",function(){return this._cache}),w_$i(0,w_$h,"type",function(){return this._type}),w_$w.checkNext=function(){w_$w._isWorking=!0;for(var w_$B=w_$d.now();w_$w._startIndex<w_$w._loaders.length;)if(w_$d.now(),w_$w._loaders[w_$w._startIndex].endLoad(),w_$w._startIndex++,w_$d.now()-w_$B>w_$w.maxTimeOut)return console.warn("loader callback cost a long time:"+(w_$d.now()-w_$B)+" url="+w_$w._loaders[w_$w._startIndex-1].url),void w_$v.timer.frameOnce(1,null,w_$w.checkNext);w_$w._loaders.length=0,w_$w._startIndex=0,w_$w._isWorking=!1},w_$w.clearRes=function(w_$B,w_$h){if(null!=w_$B){void 0===w_$h&&(w_$h=!1),w_$B=w_$W.formatURL(w_$B);var w_$l=w_$w.getAtlas(w_$B);if(w_$l){for(var w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$A++){var w_$s=w_$l[w_$A],w_$X=w_$w.getRes(w_$s);delete w_$w.loadedMap[w_$s],w_$w.clearCache(w_$B.substring(w_$W.basePath.length),w_$s.substring(w_$W.basePath.length)),w_$X&&w_$X.destroy(w_$h)}w_$l.length=0,delete w_$w.atlasMap[w_$B],delete w_$w.loadedMap[w_$B]}else{var w_$Z=w_$w.loadedMap[w_$B];w_$Z&&(delete w_$w.loadedMap[w_$B],w_$Z instanceof laya.resource.Texture&&w_$Z.bitmap&&w_$Z.destroy(w_$h))}}},w_$w.clearTextureRes=function(w_$B){w_$B=w_$W.formatURL(w_$B);var w_$h=laya.net.Loader.getAtlas(w_$B),w_$l=w_$h&&0<w_$h.length?laya.net.Loader.getRes(w_$h[0]):laya.net.Loader.getRes(w_$B);w_$l&&w_$l.bitmap&&(w_$M.isConchApp&&!w_$M.isConchWebGL?w_$l.bitmap.source.releaseTexture&&w_$l.bitmap.source.releaseTexture():null==w_$l.bitmap._atlaser&&w_$l.bitmap.releaseResource(!0))},w_$w.getRes=function(w_$B){return w_$w.loadedMap[w_$W.formatURL(w_$B)]},w_$w.getAtlas=function(w_$B){return w_$w.atlasMap[w_$W.formatURL(w_$B)]},w_$w.cacheRes=function(w_$B,w_$h){w_$B=w_$W.formatURL(w_$B),null!=w_$w.loadedMap[w_$B]?console.warn("Resources already exist,is repeated loading:",w_$B):w_$w.loadedMap[w_$B]=w_$h},w_$w.setGroup=function(w_$B,w_$h){w_$w.groupMap[w_$h]||(w_$w.groupMap[w_$h]=[]),w_$w.groupMap[w_$h].push(w_$B)},w_$w.clearResByGroup=function(w_$B){if(w_$w.groupMap[w_$B]){var w_$h=w_$w.groupMap[w_$B],w_$l=0,w_$A=w_$h.length;for(w_$l=0;w_$l<w_$A;w_$l++)w_$w.clearRes(w_$h[w_$l]);w_$h.length=0}},w_$w.keepCache=function(w_$B,w_$h){if(w_$B&&w_$h){var w_$l=w_$w.cacheSet[w_$h];w_$l?-1==w_$l.indexOf(w_$B)&&w_$l.push(w_$B):w_$w.cacheSet[w_$h]=[w_$B]}},w_$w.clearCache=function(w_$B,w_$h){if(w_$B&&w_$h){var w_$l=w_$w.cacheSet[w_$h];if(w_$l){var w_$A=w_$l.indexOf(w_$B);if(-1!==w_$A){var w_$n=w_$l.length-1;0==w_$n?(delete w_$w.cacheSet[w_$h],0<w_$w.imgMgrSet[w_$h]?w_$X.imgMgrFree(w_$h,w_$w.imgMgrSet[w_$h]):w_$w.clearRes(w_$h,!0)):(w_$l[w_$A]=w_$l[w_$n],w_$l.length=w_$n)}}}},w_$w.saveObject=function(w_$B,w_$h,w_$l){if(w_$h&&w_$B){var w_$A=w_$w.objectSet[w_$B];w_$A?(console.warn("Loader.saveObject: "+w_$B),w_$A[0]=w_$h,w_$A[1]=w_$l):w_$w.objectSet[w_$B]=[w_$h,w_$l,[]]}},w_$w.findObject=function(w_$B){if(w_$B){var w_$h=w_$w.objectSet[w_$B];if(w_$h)return w_$h[0]}return null},w_$w.keepObject=function(w_$B,w_$h){if(w_$B&&w_$h){var w_$l=w_$w.objectSet[w_$h];w_$l&&-1===w_$l[2].indexOf(w_$B)&&w_$l[2].push(w_$B)}},w_$w.clearObject=function(w_$B,w_$h){if(w_$B&&w_$h){var w_$l=w_$w.objectSet[w_$h];if(w_$l){var w_$A=w_$l[2],w_$n=w_$A.indexOf(w_$B);if(-1!==w_$n){var w_$s=w_$A.length-1;0==w_$s?(delete w_$w.objectSet[w_$h],w_$l[1]&&w_$l[1].call(null,w_$l[0])):(w_$A[w_$n]=w_$A[w_$s],w_$A.length=w_$s)}}}},w_$w.TEXT="text",w_$w.JSON="json",w_$w.XML="xml",w_$w.BUFFER="arraybuffer",w_$w.IMAGE="image",w_$w.SOUND="sound",w_$w.ATLAS="atlas",w_$w.FONT="font",w_$w.TTF="ttf",w_$w.PLF="plf",w_$w.PKM="pkm",w_$w.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},w_$w.parserMap={},w_$w.groupMap={},w_$w.maxTimeOut=100,w_$w.loadedMap={},w_$w.preLoadedMap={},w_$w.atlasMap={},w_$w._loaders=[],w_$w._isWorking=!1,w_$w._startIndex=0,w_$w.imgCache={},w_$w.cacheSet={},w_$w.objectSet={},w_$w.imgMgrSet={},w_$w}(),w_$tB=function(w_$B){var w_$b;function w_$Q(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},w_$Q.__super.call(this);for(var w_$B=0;w_$B<this._maxPriority;w_$B++)this._resInfos[w_$B]=[]}w_$G(w_$Q,"laya.net.LoaderManager",w_$P);var w_$h=w_$Q.prototype;return w_$h.create=function(w_$B,w_$l,w_$h,w_$A,w_$n,w_$s,w_$X,w_$Z){if(null==w_$s&&(w_$s=2),null==w_$X&&(w_$X=!0),w_$B instanceof Array){var w_$t=w_$B,w_$P=w_$t.length,w_$G=0;if(w_$h)var w_$T=w_$H.create(w_$h.caller,w_$h.method,w_$h.args,!1);for(var w_$b=0;w_$b<w_$P;w_$b++){var w_$Q=w_$t[w_$b];"string"==typeof w_$Q&&(w_$Q=w_$t[w_$b]={url:w_$Q}),w_$Q.progress=0}for(w_$b=0;w_$b<w_$P;w_$b++){w_$Q=w_$t[w_$b];var w_$i=w_$h?w_$H.create(null,w_$J,[w_$Q],!1):null,w_$$=w_$h||w_$l?w_$H.create(null,w_$V,[w_$Q]):null;this._create(w_$Q.url,w_$$,w_$i,w_$Q.clas||w_$A,w_$Q.params||w_$n,null!=w_$Q.priority&&0<=w_$Q.priority?w_$Q.priority:w_$s,w_$X,w_$Q.group||w_$Z)}function w_$V(w_$B,w_$h){w_$G++,w_$B.progress=1,w_$G===w_$P&&w_$l&&w_$l.run()}function w_$J(w_$B,w_$h){w_$B.progress=w_$h;for(var w_$l=0,w_$A=0;w_$A<w_$P;w_$A++){w_$l+=w_$t[w_$A].progress}var w_$n=w_$l/w_$P;w_$T.runWith(w_$n)}return!0}return this._create(w_$B,w_$l,w_$h,w_$A,w_$n,w_$s,w_$X,w_$Z)},w_$h._create=function(w_$h,w_$l,w_$B,w_$A,w_$n,w_$s,w_$X,w_$Z){w_$h&&""!=w_$h||console.error("加载的url不合法 "+w_$h),null==w_$s&&(w_$s=2),null==w_$X&&(w_$X=!0);var w_$t=w_$W.formatURL(w_$h),w_$P=this.getRes(w_$t);if(w_$P)!w_$P.hasOwnProperty("loaded")||w_$P.loaded?(w_$B&&w_$B.runWith(1),w_$l&&w_$l.run()):w_$l&&w_$v.loader._createListener(w_$h,w_$l.caller,w_$l.method,w_$l.args,!0,!1);else{var w_$G=w_$e.getFileExtension(w_$h),w_$T=w_$Q.createMap[w_$G];if(!w_$T)throw new Error("LoaderManager:unknown file("+w_$h+") extension with: "+w_$G+".");w_$A||(w_$A=w_$T[0]);var w_$b=w_$T[1];if("atlas"==w_$G)this.load(w_$h,w_$l,w_$B,w_$b,w_$s,w_$X);else{w_$A===w_$GB&&(w_$b="htmlimage"),(w_$P=w_$A?new w_$A:null).hasOwnProperty("_loaded")&&(w_$P._loaded=!1),w_$P._setUrl(w_$h),w_$Z&&w_$P._setGroup(w_$Z),this._createLoad(w_$P,w_$h,w_$H.create(null,function(w_$B){w_$P&&!w_$P.destroyed&&w_$B&&w_$P.onAsynLoaded.call(w_$P,w_$h,w_$B,w_$n),w_$l&&w_$l.run();w_$v.loader.event(w_$h)}),w_$B,w_$b,w_$s,!1,w_$Z,!0),w_$X&&this.cacheRes(w_$t,w_$P)}}return w_$P},w_$h.load=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){w_$B&&""!=w_$B||console.error("加载的url不合法 "+w_$B);var w_$t=this;if(null==w_$n&&(w_$n=2),null==w_$s&&(w_$s=!0),void 0===w_$Z&&(w_$Z=!1),w_$B instanceof Array)return this._loadAssets(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X);var w_$P=w_$ZB.getRes(w_$B);if(null!=w_$P)w_$v.timer.frameOnce(1,null,function(){w_$l&&w_$l.runWith(1),w_$h&&w_$h.runWith(w_$P),w_$t._loaderCount||w_$t.event("complete")});else{var w_$G=w_$Q._resMap[w_$B];w_$G?(w_$h&&w_$G._createListener("complete",w_$h.caller,w_$h.method,w_$h.args,!1,!1),w_$l&&w_$G._createListener("progress",w_$l.caller,w_$l.method,w_$l.args,!1,!1)):((w_$G=this._infoPool.length?this._infoPool.pop():new w_$b).url=w_$B,w_$G.clas=null,w_$G.type=w_$A,w_$G.cache=w_$s,w_$G.group=w_$X,w_$G.ignoreCache=w_$Z,w_$G.priority=w_$n,w_$h&&w_$G.on("complete",w_$h.caller,w_$h.method,w_$h.args),w_$l&&w_$G.on("progress",w_$l.caller,w_$l.method,w_$l.args),w_$Q._resMap[w_$B]=w_$G,w_$n=w_$n<this._maxPriority?0<=w_$n?w_$n:0:this._maxPriority-1,this._resInfos[w_$n].push(w_$G),this._next())}return this},w_$h.cancel=function(w_$B,w_$h,w_$l){if(w_$P=w_$Q._resMap[w_$B]){w_$h&&w_$P.off("complete",w_$h.caller,w_$h.method,!1),w_$l&&w_$P.off("progress",w_$l.caller,w_$l.method,!1);var w_$A=w_$P.getListener("complete"),w_$n=w_$P.getListener("progress");if(!(w_$A&&w_$A.head||w_$n&&w_$n.head)){if(w_$P.loader){var w_$s=w_$P.loader;w_$s.imageCancel(w_$B),w_$s.offAll(),w_$s._data=null,w_$s._customParse=!1,w_$s._url=null,w_$s._class=null,w_$s._type=null,this._loaders.push(w_$s),this._loaderCount--,delete this._loaderMap[w_$P.url]}for(var w_$X=0;w_$X<this._maxPriority;w_$X++)for(var w_$Z=this._resInfos[w_$X],w_$t=w_$Z.length-1;-1<w_$t;w_$t--){var w_$P;(w_$P=w_$Z[w_$t])&&w_$P.url===w_$B&&(w_$Z[w_$t]=null,w_$P.destroy(),w_$P.offAll(),this._infoPool.push(w_$P))}delete w_$Q._resMap[w_$B],this._next()}}},w_$h._createLoad=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){var w_$P=this;if(null==w_$s&&(w_$s=2),null==w_$X&&(w_$X=!0),void 0===w_$t&&(w_$t=!1),w_$h instanceof Array)return this._loadAssets(w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z);var w_$G=w_$ZB.getRes(w_$h);if(null!=w_$G)w_$v.timer.frameOnce(1,null,function(){w_$A&&w_$A.runWith(1),w_$l&&w_$l.runWith(w_$G),w_$P._loaderCount||w_$P.event("complete")});else{var w_$T=w_$Q._resMap[w_$h];w_$T?(w_$l&&w_$T._createListener("complete",w_$l.caller,w_$l.method,w_$l.args,!1,!1),w_$A&&w_$T._createListener("progress",w_$A.caller,w_$A.method,w_$A.args,!1,!1)):((w_$T=this._infoPool.length?this._infoPool.pop():new w_$b).url=w_$h,w_$T.clas=w_$B,w_$T.type=w_$n,w_$T.cache=w_$X,w_$T.group=w_$Z,w_$T.ignoreCache=w_$t,w_$T.priority=w_$s,w_$l&&w_$T.on("complete",w_$l.caller,w_$l.method,w_$l.args),w_$A&&w_$T.on("progress",w_$A.caller,w_$A.method,w_$A.args),w_$Q._resMap[w_$h]=w_$T,w_$s=w_$s<this._maxPriority?0<=w_$s?w_$s:0:this._maxPriority-1,this._resInfos[w_$s].push(w_$T),this._next())}return this},w_$h._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var w_$B=0;w_$B<this._maxPriority;w_$B++)for(var w_$h=this._resInfos[w_$B];0<w_$h.length;){var w_$l=w_$h.shift();if(w_$l)return this._doLoad(w_$l)}this._loaderCount||this.event("complete")}},w_$h._doLoad=function(w_$h){var w_$l=this._loaders.length?this._loaders.pop():new w_$ZB;this._loaderCount++,(this._loaderMap[w_$h.url]=w_$l).on("complete",null,w_$n),w_$l.on("progress",null,function(w_$B){w_$h.event("progress",w_$B)}),w_$l.on("error",null,function(w_$B){w_$n(null)}),w_$h.loader=w_$l;var w_$A=this;function w_$n(w_$B){w_$l.offAll(),w_$l._data=null,w_$l._customParse=!1,w_$l._url=null,w_$l._class=null,w_$l._type=null,w_$A._loaders.push(w_$l),w_$A._loaderCount--,delete w_$A._loaderMap[w_$h.url],w_$A._endLoad(w_$h,w_$B instanceof Array?[w_$B]:w_$B),w_$A._next()}w_$l._class=w_$h.clas,1<=w_$h.priority?(w_$l.priority=w_$h.priority,w_$l.realTime=!1):(w_$l.priority=0,w_$l.realTime=!0),w_$l.load(w_$h.url,w_$h.type,w_$h.cache,w_$h.group,w_$h.ignoreCache)},w_$h._endLoad=function(w_$B,w_$h){var w_$l=w_$B.url;if(null==w_$h){var w_$A=this._failRes[w_$l]||0;if(w_$A<this.retryNum)return console.warn("[warn]Retry to load:",w_$l),this._failRes[w_$l]=w_$A+1,void w_$v.timer.once(this.retryDelay,this,this._addReTry,[w_$B],!1);console.warn("[error]Failed to load:",w_$l),this.event("error",w_$l)}this._failRes[w_$l]&&(this._failRes[w_$l]=0),delete w_$Q._resMap[w_$l],w_$B.event("complete",w_$h),w_$B.destroy(),w_$B.offAll(),this._infoPool.push(w_$B)},w_$h._addReTry=function(w_$B){this._resInfos[this._maxPriority-1].push(w_$B),this._next()},w_$h.clearRes=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!1),w_$ZB.clearRes(w_$B,w_$h)},w_$h.getRes=function(w_$B){return w_$ZB.getRes(w_$B)},w_$h.cacheRes=function(w_$B,w_$h){w_$ZB.cacheRes(w_$B,w_$h)},w_$h.clearTextureRes=function(w_$B){w_$ZB.clearTextureRes(w_$B)},w_$h.setGroup=function(w_$B,w_$h){w_$ZB.setGroup(w_$B,w_$h)},w_$h.clearResByGroup=function(w_$B){w_$ZB.clearResByGroup(w_$B)},w_$h.clearUnLoaded=function(){for(var w_$B=0;w_$B<this._maxPriority;w_$B++){for(var w_$h=this._resInfos[w_$B],w_$l=w_$h.length-1;-1<w_$l;w_$l--){var w_$A=w_$h[w_$l];w_$A&&(w_$A.destroy(),w_$A.offAll(),this._infoPool.push(w_$A))}w_$h.length=0}this._loaderCount=0,w_$Q._resMap={}},w_$h.cancelLoadByUrls=function(w_$B){if(w_$B)for(var w_$h=0,w_$l=w_$B.length;w_$h<w_$l;w_$h++)this.cancelLoadByUrl(w_$B[w_$h])},w_$h.cancelLoadByUrl=function(w_$B){for(var w_$h=0;w_$h<this._maxPriority;w_$h++)for(var w_$l=this._resInfos[w_$h],w_$A=w_$l.length-1;-1<w_$A;w_$A--){var w_$n=w_$l[w_$A];w_$n&&w_$n.url===w_$B&&(w_$l[w_$A]=null,w_$n.destroy(),w_$n.offAll(),this._infoPool.push(w_$n))}w_$Q._resMap[w_$B]&&delete w_$Q._resMap[w_$B]},w_$h._loadAssets=function(w_$B,w_$l,w_$X,w_$h,w_$A,w_$n,w_$s){null==w_$A&&(w_$A=2),null==w_$n&&(w_$n=!0);for(var w_$Z=w_$B.length,w_$t=0,w_$P=0,w_$G=[],w_$T=!0,w_$b=0;w_$b<w_$Z;w_$b++){var w_$Q=w_$B[w_$b];if(!w_$Q)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+w_$B);"string"==typeof w_$Q&&(w_$Q={url:w_$Q,type:w_$h,size:1,priority:w_$A}),w_$Q.size||(w_$Q.size=1),w_$Q.progress=0,w_$P+=w_$Q.size,w_$G.push(w_$Q);var w_$i=w_$X?w_$H.create(null,w_$J,[w_$Q],!1):null,w_$$=w_$l||w_$X?w_$H.create(null,w_$V,[w_$Q]):null;this.load(w_$Q.url,w_$$,w_$i,w_$Q.type,null!=w_$Q.priority&&0<=w_$Q.priority?w_$Q.priority:2,w_$n,w_$Q.group||w_$s)}function w_$V(w_$B,w_$h){w_$t++,w_$B.progress=1,w_$h||(w_$T=!1),w_$t===w_$Z&&w_$l&&w_$l.runWith(w_$T)}function w_$J(w_$B,w_$h){if(null!=w_$X){w_$B.progress=w_$h;for(var w_$l=0,w_$A=0;w_$A<w_$G.length;w_$A++){var w_$n=w_$G[w_$A];w_$l+=w_$n.size*w_$n.progress}var w_$s=w_$l/w_$P;w_$X.runWith(w_$s)}}return this},w_$Q.cacheRes=function(w_$B,w_$h){w_$ZB.cacheRes(w_$B,w_$h)},w_$Q._resMap={},w_$t(w_$Q,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),w_$Q.__init$=function(){w_$b=function(w_$B){function w_$h(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,w_$h.__super.call(this)}return w_$G(w_$h,"",w_$P),w_$h.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},w_$h}()},w_$Q}(),w_$PB=(function(w_$B){function w_$n(w_$B){w_$n.__super.call(this),w_$B||(w_$B=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var w_$h=0,w_$l=0,w_$A=0;w_$A<20;w_$A++)w_$A%5!=4?this._mat[w_$h++]=w_$B[w_$A]:this._alpha[w_$l++]=w_$B[w_$A];this._action=w_$S.createFilterAction(32),this._action.data=this}w_$G(w_$n,"laya.filters.ColorFilter",w_$J);var w_$h=w_$n.prototype;w_$v.imps(w_$h,{"laya.filters.IFilter":!0}),w_$h.callNative=function(w_$B){w_$B._$P.cf=this;w_$B.conchModel&&w_$B.conchModel.setFilterMatrix&&w_$B.conchModel.setFilterMatrix(this._mat,this._alpha)},w_$i(0,w_$h,"type",function(){return 32}),w_$i(0,w_$h,"action",function(){return this._action})}(),function(w_$B){function w_$A(w_$B,w_$h,w_$l){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===w_$h&&(w_$h=0),w_$A.__super.call(this),this._byteClass=w_$l||w_$k,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,w_$B&&0<w_$h&&w_$h<65535&&this.connect(w_$B,w_$h)}w_$G(w_$A,"laya.net.Socket",w_$P);var w_$h=w_$A.prototype;w_$h.connect=function(w_$B,w_$h){var w_$l="ws://"+w_$B+":"+w_$h;w_$l="https:"==w_$d.window.location.protocol?"wss://"+w_$B+":"+w_$h:"ws://"+w_$B+":"+w_$h,this.connectByUrl(w_$l)},w_$h.connectByUrl=function(w_$B){var w_$h=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new w_$d.window.WebSocket(w_$B,this.protocols):this._socket=new w_$d.window.WebSocket(w_$B),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(w_$B){w_$h._onOpen(w_$B)},this._socket.onmessage=function(w_$B){w_$h._onMessage(w_$B)},this._socket.onclose=function(w_$B){w_$h._onClose(w_$B)},this._socket.onerror=function(w_$B){w_$h._onError(w_$B)}},w_$h.cleanSocket=function(){try{this._socket.close()}catch(w_$B){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},w_$h.close=function(){if(null!=this._socket)try{this._socket.close()}catch(w_$B){}},w_$h._onOpen=function(w_$B){this._connected=!0,this.event("open",w_$B)},w_$h._onMessage=function(w_$B){if(w_$B&&w_$B.data){var w_$h=w_$B.data;if(this.disableInput&&w_$h)this.event("message",w_$h);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var w_$l=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,w_$h&&("string"==typeof w_$h?this._input.writeUTFBytes(w_$h):this._input.writeArrayBuffer(w_$h),this._addInputPosition=this._input.pos,this._input.pos=w_$l),this.event("message",w_$h)}}},w_$h._onClose=function(w_$B){this._connected=!1,this.event("close",w_$B)},w_$h._onError=function(w_$B){this.event("error",w_$B)},w_$h.send=function(w_$B){this._socket.send(w_$B)},w_$h.flush=function(){if(this._output&&0<this._output.length){var w_$h;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(w_$B){w_$h=w_$B}this._output.endian=this.endian,this._output.clear(),w_$h&&this.event("error",w_$h)}},w_$i(0,w_$h,"input",function(){return this._input}),w_$i(0,w_$h,"output",function(){return this._output}),w_$i(0,w_$h,"connected",function(){return this._connected}),w_$i(0,w_$h,"endian",function(){return this._endian},function(w_$B){this._endian=w_$B,null!=this._input&&(this._input.endian=w_$B),null!=this._output&&(this._output.endian=w_$B)}),w_$A.LITTLE_ENDIAN="littleEndian",w_$A.BIG_ENDIAN="bigEndian"}(),function(w_$B){function w_$Z(){w_$Z.__super.call(this),this._$1__id=++w_$Z._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(w_$Z._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,w_$_.currentResourceManager&&w_$_.currentResourceManager.addResource(this)}w_$G(w_$Z,"laya.resource.Resource",w_$P);var w_$h=w_$Z.prototype;return w_$v.imps(w_$h,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),w_$h._setUrl=function(w_$B){var w_$h;this._url!==w_$B&&(this._url&&((w_$h=w_$Z._urlResourcesMap[this._url]).splice(w_$h.indexOf(this),1),0===w_$h.length&&delete w_$Z._urlResourcesMap[this._url]),w_$B&&((w_$h=w_$Z._urlResourcesMap[w_$B])||(w_$Z._urlResourcesMap[w_$B]=w_$h=[]),w_$h.push(this)),this._url=w_$B)},w_$h._getGroup=function(){return this._group},w_$h._setGroup=function(w_$B){var w_$h;this._group!==w_$B&&(this._group&&((w_$h=w_$Z._groupResourcesMap[this._group]).splice(w_$h.indexOf(this),1),0===w_$h.length&&delete w_$Z._groupResourcesMap[this._group]),w_$B&&((w_$h=w_$Z._groupResourcesMap[w_$B])||(w_$Z._groupResourcesMap[w_$B]=w_$h=[]),w_$h.push(this)),this._group=w_$B)},w_$h._addReference=function(){this._referenceCount++},w_$h._removeReference=function(){this._referenceCount--},w_$h._clearReference=function(){this._referenceCount=0},w_$h._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},w_$h.recreateResource=function(){this.completeCreate()},w_$h.disposeResource=function(){},w_$h.activeResource=function(w_$B){void 0===w_$B&&(w_$B=!1),this._lastUseFrameCount=w_$f.loopCount,!this._destroyed&&this.__loaded&&(this._released||w_$B)&&this.recreateResource()},w_$h.releaseResource=function(w_$B){return void 0===w_$B&&(w_$B=!0),!(!w_$B&&this.lock)&&(!(this._released&&!w_$B)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},w_$h.onAsynLoaded=function(w_$B,w_$h,w_$l){throw new Error("Resource: must override this function!")},w_$h.destroy=function(){var w_$B;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete w_$Z._idResourcesMap[this.id],this._url&&((w_$B=w_$Z._urlResourcesMap[this._url])&&(w_$B.splice(w_$B.indexOf(this),1),0===w_$B.length&&delete w_$Z._urlResourcesMap[this.url]),w_$ZB.clearRes(this._url),this.__loaded||w_$S.cancelLoadByUrl(this._url)),this._group&&((w_$B=w_$Z._groupResourcesMap[this._group]).splice(w_$B.indexOf(this),1),0===w_$B.length&&delete w_$Z._groupResourcesMap[this.url]))},w_$h.completeCreate=function(){this._released=!1,this.event("recovered",this)},w_$h.dispose=function(){this.destroy()},w_$i(0,w_$h,"memorySize",function(){return this._memorySize},function(w_$B){var w_$h=w_$B-this._memorySize;this._memorySize=w_$B,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,w_$h),this.resourceManager&&this.resourceManager.addSize(w_$h)}),w_$i(0,w_$h,"_loaded",null,function(w_$B){this.__loaded=w_$B}),w_$i(0,w_$h,"loaded",function(){return this.__loaded}),w_$i(0,w_$h,"id",function(){return this._$1__id}),w_$i(0,w_$h,"destroyed",function(){return this._destroyed}),w_$i(0,w_$h,"group",function(){return this._getGroup()},function(w_$B){this._setGroup(w_$B)}),w_$i(0,w_$h,"resourceManager",function(){return this._resourceManager}),w_$i(0,w_$h,"url",function(){return this._url}),w_$i(0,w_$h,"released",function(){return this._released}),w_$i(0,w_$h,"referenceCount",function(){return this._referenceCount}),w_$Z.getResourceByID=function(w_$B){return w_$Z._idResourcesMap[w_$B]},w_$Z.getResourceByURL=function(w_$B,w_$h){return void 0===w_$h&&(w_$h=0),null==w_$Z._urlResourcesMap[w_$B]?null:w_$Z._urlResourcesMap[w_$B][w_$h]},w_$Z.getResourceCountByURL=function(w_$B){return w_$Z._urlResourcesMap[w_$B].length},w_$Z.destroyUnusedResources=function(w_$B){var w_$h;if(w_$B){var w_$l=w_$Z._groupResourcesMap[w_$B];if(w_$l)for(var w_$A=w_$l.slice(),w_$n=0,w_$s=w_$A.length;w_$n<w_$s;w_$n++)(w_$h=w_$A[w_$n]).lock||0!==w_$h._referenceCount||w_$h.destroy()}else for(var w_$X in w_$Z._idResourcesMap)(w_$h=w_$Z._idResourcesMap[w_$X]).lock||0!==w_$h._referenceCount||w_$h.destroy()},w_$Z._uniqueIDCounter=0,w_$Z._idResourcesMap={},w_$Z._urlResourcesMap={},w_$Z._groupResourcesMap={},w_$Z}()),w_$GB=function(w_$B){function w_$w(w_$B,w_$h){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,w_$w.__super.call(this),w_$B&&null!=w_$B._addReference&&w_$B._addReference(),this.setTo(w_$B,w_$h)}w_$G(w_$w,"laya.resource.Texture",w_$P);var w_$h=w_$w.prototype;return w_$h._setUrl=function(w_$B){this.url=w_$B},w_$h.setTo=function(w_$B,w_$h){if(w_$B instanceof w_$X.HTMLElement){var w_$l=w_$yB.create("2D",w_$B);this.bitmap=w_$l}else this.bitmap=w_$B;if(this.uv=w_$h||w_$w.DEF_UV,w_$B){this._w=w_$B.width,this._h=w_$B.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var w_$A=this;if(this._loaded)w_$S.addToAtlas&&w_$S.addToAtlas(w_$A);else{var w_$n=w_$B;w_$n instanceof laya.resource.HTMLImage&&w_$n.image&&w_$n.image.addEventListener("load",function(w_$B){w_$S.addToAtlas&&w_$S.addToAtlas(w_$A)},!1)}}},w_$h.active=function(){this.bitmap&&this.bitmap.activeResource()},w_$h.destroy=function(w_$B){if(void 0===w_$B&&(w_$B=!1),this.alphaTexture&&(this.alphaTexture.destroy(w_$B),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var w_$h=this.bitmap;w_$B?(w_$M.isConchApp&&w_$h.source&&w_$h.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,w_$h.dispose(),w_$h._clearReference()):(w_$h._removeReference(),0==w_$h.referenceCount&&(w_$M.isConchApp&&w_$h.source&&w_$h.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,w_$h.dispose())),this.url&&this===w_$v.loader.getRes(this.url)&&w_$v.loader.clearRes(this.url,w_$B),this._loaded=!1}},w_$h.load=function(w_$B){var w_$h=this;this._loaded=!1,w_$B=w_$W.customFormat(w_$B);var w_$l=this.bitmap||(this.bitmap=w_$uB.create(w_$B));w_$l.uri=w_$B,w_$l&&w_$l._addReference();var w_$A=this;w_$l.onload=function(){w_$l.onload=null,w_$A._loaded=!0,w_$h.sourceWidth=w_$h._w=w_$l.width,w_$h.sourceHeight=w_$h._h=w_$l.height,w_$A.event("loaded",this),w_$S.addToAtlas&&w_$S.addToAtlas(w_$A)}},w_$h.addTextureToAtlas=function(w_$B){w_$S.addTextureToAtlas(this)},w_$h.getPixels=function(w_$B,w_$h,w_$l,w_$A){if(w_$M.isConchApp){var w_$n=this.bitmap;if(w_$n.source&&w_$n.source.getImageData){var w_$s=w_$n.source.getImageData(w_$B,w_$h,w_$l,w_$A),w_$X=new Uint8Array(w_$s);return Array.from(w_$X)}return null}return w_$M.isWebGL?w_$S.getTexturePixels(this,w_$B,w_$h,w_$l,w_$A):(w_$d.canvas.size(w_$l,w_$A),w_$d.canvas.clear(),w_$d.context.drawTexture(this,-w_$B,-w_$h,this.width,this.height,0,0),w_$d.context.getImageData(0,0,w_$l,w_$A).data)},w_$h.onAsynLoaded=function(w_$B,w_$h){if(w_$h){if("function"!=typeof w_$h._addReference)throw new Error("bitmap._addReference is not a function. "+w_$h.className+" "+typeof w_$h._addReference+" "+w_$h.constructor);w_$h._addReference()}this.setTo(w_$h,this.uv),this._loaded&&this.event("loaded",this)},w_$i(0,w_$h,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),w_$i(0,w_$h,"loaded",function(){return this._loaded}),w_$i(0,w_$h,"released",function(){return!this.bitmap||this.bitmap.released}),w_$i(0,w_$h,"width",function(){return this._w?this._w:this.uv&&this.uv!==w_$w.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(w_$B){this._w=w_$B,this.sourceWidth||(this.sourceWidth=w_$B)}),w_$i(0,w_$h,"repeat",function(){return!w_$M.isWebGL||!this.bitmap||this.bitmap.repeat},function(w_$B){w_$B&&w_$M.isWebGL&&this.bitmap&&(this.bitmap.repeat=w_$B)&&(this.bitmap.enableMerageInAtlas=!1)}),w_$i(0,w_$h,"height",function(){return this._h?this._h:this.uv&&this.uv!==w_$w.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(w_$B){this._h=w_$B,this.sourceHeight||(this.sourceHeight=w_$B)}),w_$i(0,w_$h,"isLinearSampling",function(){return!w_$M.isWebGL||9728!=this.bitmap.minFifter},function(w_$B){!w_$B&&w_$M.isWebGL&&(w_$B||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),w_$w.moveUV=function(w_$B,w_$h,w_$l){for(var w_$A=0;w_$A<8;w_$A+=2)w_$l[w_$A]+=w_$B,w_$l[w_$A+1]+=w_$h;return w_$l},w_$w.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){void 0===w_$s&&(w_$s=0),void 0===w_$X&&(w_$X=0),void 0===w_$Z&&(w_$Z=0),void 0===w_$t&&(w_$t=0);var w_$P=w_$B instanceof laya.resource.Texture,w_$G=w_$P?w_$B.uv:w_$w.DEF_UV,w_$T=w_$P?w_$B.bitmap:w_$B,w_$b=w_$S.isAtlas(w_$T);if(w_$b){var w_$Q=w_$T._atlaser,w_$i=w_$B._atlasID;if(-1==w_$i)throw new Error("create texture error");w_$T=w_$Q._inAtlasTextureBitmapValue[w_$i],w_$G=w_$Q._inAtlasTextureOriUVValue[w_$i]}var w_$$=new w_$w(w_$T,null);w_$T.width&&w_$h+w_$A>w_$T.width&&(w_$A=w_$T.width-w_$h),w_$T.height&&w_$l+w_$n>w_$T.height&&(w_$n=w_$T.height-w_$l),w_$$.width=w_$A,w_$$.height=w_$n,w_$$.offsetX=w_$s,w_$$.offsetY=w_$X,w_$$.sourceWidth=w_$Z||w_$A,w_$$.sourceHeight=w_$t||w_$n;var w_$V=1/w_$T.width,w_$J=1/w_$T.height;w_$h*=w_$V,w_$l*=w_$J,w_$A*=w_$V,w_$n*=w_$J;var w_$H=w_$$.uv[0],w_$y=w_$$.uv[1],w_$C=w_$$.uv[4],w_$o=w_$$.uv[5],w_$u=w_$C-w_$H,w_$v=w_$o-w_$y,w_$U=w_$w.moveUV(w_$G[0],w_$G[1],[w_$h,w_$l,w_$h+w_$A,w_$l,w_$h+w_$A,w_$l+w_$n,w_$h,w_$l+w_$n]);w_$$.uv=[w_$H+w_$U[0]*w_$u,w_$y+w_$U[1]*w_$v,w_$C-(1-w_$U[2])*w_$u,w_$y+w_$U[3]*w_$v,w_$C-(1-w_$U[4])*w_$u,w_$o-(1-w_$U[5])*w_$v,w_$H+w_$U[6]*w_$u,w_$o-(1-w_$U[7])*w_$v],w_$b&&w_$$.addTextureToAtlas();var w_$x=w_$T.scaleRate;return w_$x&&1!=w_$x?(w_$$.sourceWidth/=w_$x,w_$$.sourceHeight/=w_$x,w_$$.width/=w_$x,w_$$.height/=w_$x,w_$$.scaleRate=w_$x,w_$$.offsetX/=w_$x,w_$$.offsetY/=w_$x):w_$$.scaleRate=1,w_$$},w_$w.createFromTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$B.scaleRate;1!=w_$s&&(w_$h*=w_$s,w_$l*=w_$s,w_$A*=w_$s,w_$n*=w_$s);var w_$X=w_$x.TEMP.setTo(w_$h-w_$B.offsetX,w_$l-w_$B.offsetY,w_$A,w_$n),w_$Z=w_$X.intersection(w_$w._rect1.setTo(0,0,w_$B.width,w_$B.height),w_$w._rect2);if(!w_$Z)return null;var w_$t=w_$w.create(w_$B,w_$Z.x,w_$Z.y,w_$Z.width,w_$Z.height,w_$Z.x-w_$X.x,w_$Z.y-w_$X.y,w_$A,w_$n);if(w_$t.bitmap&&w_$t.bitmap._removeReference)return w_$t.bitmap._removeReference(),w_$t;var w_$P="bitmap:"+(w_$t.bitmap?w_$t.bitmap.constructor?w_$t.bitmap.constructor.name:w_$t.bitmap.__className:"")+", url:"+(w_$B.url+" | "+(w_$t.bitmap?w_$t.bitmap.url:w_$B.url))+", x="+w_$h+",y="+w_$l+",width="+w_$A+",height="+w_$n+", result="+(w_$Z?w_$Z.x+","+w_$Z.y+","+w_$Z.width+","+w_$Z.height:"null")+", rect="+w_$X.x+","+w_$X.y+","+w_$X.width+","+w_$X.height;throw new Error("报错：bitmap._removeReference is not a function  "+w_$P)},w_$w.DEF_UV=[0,0,1,0,1,1,0,1],w_$w.INV_UV=[0,1,1,1,1,0,0,0],w_$w._rect1=new w_$x,w_$w._rect2=new w_$x,w_$w}(),w_$B=function(w_$B){var w_$Z;function w_$s(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,w_$s.__super.call(this)}w_$G(w_$s,"laya.utils.TimeLine",w_$P);var w_$h=w_$s.prototype;return w_$h.to=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$n&&(w_$n=0),this._create(w_$B,w_$h,w_$l,w_$A,w_$n,!0)},w_$h.from=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$n&&(w_$n=0),this._create(w_$B,w_$h,w_$l,w_$A,w_$n,!1)},w_$h._create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$K.getItemByClass("tweenData",w_$Z);return w_$X.isTo=w_$s,w_$X.type=0,w_$X.target=w_$B,w_$X.duration=w_$l,w_$X.data=w_$h,w_$X.startTime=this._startTime+w_$n,w_$X.endTime=w_$X.startTime+w_$X.duration,w_$X.ease=w_$A,this._startTime=Math.max(w_$X.endTime,this._startTime),this._tweenDataList.push(w_$X),this._startTimeSort=!0,this._endTimeSort=!0,this},w_$h.addLabel=function(w_$B,w_$h){var w_$l=w_$K.getItemByClass("tweenData",w_$Z);return w_$l.type=1,w_$l.data=w_$B,w_$l.endTime=w_$l.startTime=this._startTime+w_$h,this._labelDic||(this._labelDic={}),this._labelDic[w_$B]=w_$l,this._tweenDataList.push(w_$l),this},w_$h.removeLabel=function(w_$B){if(this._labelDic&&this._labelDic[w_$B]){var w_$h=this._labelDic[w_$B];if(w_$h){var w_$l=this._tweenDataList.indexOf(w_$h);-1<w_$l&&this._tweenDataList.splice(w_$l,1)}delete this._labelDic[w_$B]}},w_$h.gotoTime=function(w_$B){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var w_$h,w_$l,w_$A,w_$n;for(var w_$s in this._firstTweenDic)if(w_$l=this._firstTweenDic[w_$s])for(var w_$X in w_$l)w_$l.diyTarget.hasOwnProperty(w_$X)&&(w_$l.diyTarget[w_$X]=w_$l[w_$X]);for(w_$s in this._tweenDic)(w_$h=this._tweenDic[w_$s]).clear(),delete this._tweenDic[w_$s];if(this._index=0,this._gidIndex=0,this._currTime=w_$B,this._lastTime=w_$d.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=w_$A=this._tweenDataList.concat(),w_$A.sort(function(w_$B,w_$h){return w_$B.endTime>w_$h.endTime?1:w_$B.endTime<w_$h.endTime?-1:0})}else w_$A=this._endTweenDataList;for(var w_$Z=0,w_$t=w_$A.length;w_$Z<w_$t;w_$Z++)if(0==(w_$n=w_$A[w_$Z]).type){if(!(w_$B>=w_$n.endTime))break;this._index=Math.max(this._index,w_$Z+1);var w_$P=w_$n.data;if(w_$n.isTo)for(var w_$G in w_$P)w_$n.target[w_$G]=w_$P[w_$G]}for(w_$Z=0,w_$t=this._tweenDataList.length;w_$Z<w_$t;w_$Z++)0==(w_$n=this._tweenDataList[w_$Z]).type&&w_$B>=w_$n.startTime&&w_$B<w_$n.endTime&&(this._index=Math.max(this._index,w_$Z+1),this._gidIndex++,(w_$h=w_$K.getItemByClass("tween",w_$L))._create(w_$n.target,w_$n.data,w_$n.duration,w_$n.ease,w_$H.create(this,this._animComplete,[this._gidIndex]),0,!1,w_$n.isTo,!0,!1),w_$h.setStartTime(this._currTime-(w_$B-w_$n.startTime)),w_$h._updateEase(this._currTime),w_$h.gid=this._gidIndex,this._tweenDic[this._gidIndex]=w_$h)}},w_$h.gotoLabel=function(w_$B){if(null!=this._labelDic){var w_$h=this._labelDic[w_$B];w_$h&&this.gotoTime(w_$h.startTime)}},w_$h.pause=function(){w_$v.timer.clear(this,this._update)},w_$h.resume=function(){this.play(this._currTime,this._loopKey)},w_$h.play=function(w_$B,w_$h){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(w_$B,w_$h){return w_$B.startTime>w_$h.startTime?1:w_$B.startTime<w_$h.startTime?-1:0});for(var w_$l=0,w_$A=this._tweenDataList.length;w_$l<w_$A;w_$l++){var w_$n=this._tweenDataList[w_$l];if(null!=w_$n&&0==w_$n.type){var w_$s=w_$n.target,w_$X=w_$s.$_GID||(w_$s.$_GID=w_$e.getGID()),w_$Z=null;for(var w_$t in null==this._firstTweenDic[w_$X]?((w_$Z={}).diyTarget=w_$s,this._firstTweenDic[w_$X]=w_$Z):w_$Z=this._firstTweenDic[w_$X],w_$n.data)null==w_$Z[w_$t]&&(w_$Z[w_$t]=w_$s[w_$t])}}}"string"==typeof w_$B?this.gotoLabel(w_$B):this.gotoTime(w_$B),this._loopKey=w_$h,this._lastTime=w_$d.now(),w_$v.timer.frameLoop(1,this,this._update)}},w_$h._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var w_$B in this._tweenDic)(w_$h=this._tweenDic[w_$B]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var w_$h,w_$l=w_$d.now(),w_$A=w_$l-this._lastTime,w_$n=this._currTime+=w_$A*this.scale;for(w_$B in this._lastTime=w_$l,this._tweenDic)(w_$h=this._tweenDic[w_$B])._updateEase(w_$n);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var w_$s=this._tweenDataList[this._index];w_$n>=w_$s.startTime&&(this._index++,0==w_$s.type?(this._gidIndex++,(w_$h=w_$K.getItemByClass("tween",w_$L))._create(w_$s.target,w_$s.data,w_$s.duration,w_$s.ease,w_$H.create(this,this._animComplete,[this._gidIndex]),0,!1,w_$s.isTo,!0,!1),w_$h.setStartTime(w_$n),w_$h.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=w_$h)._updateEase(w_$n)):this.event("label",w_$s.data))}},w_$h._animComplete=function(w_$B){this._tweenDic[w_$B]&&delete this._tweenDic[w_$B]},w_$h._complete=function(){this.event("complete")},w_$h.reset=function(){var w_$B;if(this._labelDic)for(w_$B in this._labelDic)delete this._labelDic[w_$B];for(w_$B in this._tweenDic)this._tweenDic[w_$B].clear(),delete this._tweenDic[w_$B];for(w_$B in this._firstTweenDic)delete this._firstTweenDic[w_$B];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var w_$h,w_$l=0;for(w_$h=this._tweenDataList.length,w_$l=0;w_$l<w_$h;w_$l++)this._tweenDataList[w_$l]&&this._tweenDataList[w_$l].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,w_$v.timer.clear(this,this._update)},w_$h.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},w_$i(0,w_$h,"index",function(){return this._frameIndex},function(w_$B){this._frameIndex=w_$B,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),w_$i(0,w_$h,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),w_$s.to=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$n&&(w_$n=0),(new w_$s).to(w_$B,w_$h,w_$l,w_$A,w_$n)},w_$s.from=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$n&&(w_$n=0),(new w_$s).from(w_$B,w_$h,w_$l,w_$A,w_$n)},w_$s.__init$=function(){w_$Z=function(){function w_$B(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return w_$G(w_$B,""),w_$B.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,w_$K.recover("tweenData",this)},w_$B}()},w_$s}(),w_$TB=function(w_$n){function w_$l(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,w_$l.__super.call(this),this._style=w_$Z.EMPTY}w_$G(w_$l,"laya.display.Sprite",w_$n);var w_$B=w_$l.prototype;return w_$v.imps(w_$B,{"laya.display.ILayout":!0}),w_$B.createConchModel=function(){return new ConchNode},w_$B.destroy=function(w_$B){if(void 0===w_$B&&(w_$B=!0),this._releaseMem(),!this._destroyed){this.filters=null;var w_$h=this.mask;w_$h&&(this.mask=null,w_$h.destroy(w_$B))}w_$n.prototype.destroy.call(this,w_$B),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},w_$B.updateZOrder=function(){w_$e.updateOrder(this._childs)&&this.repaint()},w_$B.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},w_$B.setBounds=function(w_$B){this._set$P("uBounds",w_$B)},w_$B.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new w_$x),w_$x._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},w_$B.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new w_$x),w_$x._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},w_$B._boundPointsToParent=function(w_$B){void 0===w_$B&&(w_$B=!1);var w_$h=0,w_$l=0;this._style&&(w_$h=this._style._tf.translateX,w_$l=this._style._tf.translateY,w_$B=w_$B||0!==this._style._tf.rotate,this._style.scrollRect&&(w_$h+=this._style.scrollRect.x,w_$l+=this._style.scrollRect.y));var w_$A=this._getBoundPointsM(w_$B);if(!w_$A||w_$A.length<1)return w_$A;if(8!=w_$A.length&&(w_$A=w_$B?w_$o.scanPList(w_$A):w_$x._getWrapRec(w_$A,w_$x.TEMP)._getBoundPoints()),!this.transform)return w_$e.transPointList(w_$A,this._x-w_$h,this._y-w_$l),w_$A;var w_$n=w_$U.TEMP,w_$s=0,w_$X=w_$A.length;for(w_$s=0;w_$s<w_$X;w_$s+=2)w_$n.x=w_$A[w_$s],w_$n.y=w_$A[w_$s+1],this.toParentPoint(w_$n),w_$A[w_$s]=w_$n.x,w_$A[w_$s+1]=w_$n.y;return w_$A},w_$B.getGraphicBounds=function(w_$B){return void 0===w_$B&&(w_$B=!1),this._graphics?this._graphics.getBounds(w_$B):w_$x.TEMP.setTo(0,0,0,0)},w_$B._getBoundPointsM=function(w_$B){if(void 0===w_$B&&(w_$B=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var w_$h=w_$e.clearArray(this._$P.temBM),w_$l=w_$x.TEMP;return w_$l.copyFrom(this.scrollRect),w_$e.concatArray(w_$h,w_$l._getBoundPoints()),w_$h}for(var w_$A,w_$n,w_$s,w_$X=this._graphics?this._graphics.getBoundPoints():w_$e.clearArray(this._$P.temBM),w_$Z=0,w_$t=(w_$s=this._childs).length;w_$Z<w_$t;w_$Z++)(w_$A=w_$s[w_$Z])instanceof laya.display.Sprite&&1==w_$A.visible&&(w_$n=w_$A._boundPointsToParent(w_$B))&&(w_$X=w_$X?w_$e.concatArray(w_$X,w_$n):w_$n);return w_$X},w_$B.getStyle=function(){return this._style===w_$Z.EMPTY&&(this._style=new w_$Z),this._style},w_$B.setStyle=function(w_$B){this._style=w_$B},w_$B._adjustTransform=function(){this._tfChanged=!1;var w_$B,w_$h=this._style._tf,w_$l=w_$h.scaleX,w_$A=w_$h.scaleY;if(w_$h.rotate||1!==w_$l||1!==w_$A||w_$h.skewX||w_$h.skewY){(w_$B=this._transform||(this._transform=w_$N.create())).bTransform=!0;var w_$n=.0174532922222222*(w_$h.rotate-w_$h.skewX),w_$s=.0174532922222222*(w_$h.rotate+w_$h.skewY),w_$X=Math.cos(w_$s),w_$Z=Math.sin(w_$s),w_$t=Math.sin(w_$n),w_$P=Math.cos(w_$n);return w_$B.a=w_$l*w_$X,w_$B.b=w_$l*w_$Z,w_$B.c=-w_$A*w_$t,w_$B.d=w_$A*w_$P,w_$B.tx=w_$B.ty=0,w_$B}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,w_$B},w_$B.pos=function(w_$B,w_$h,w_$l){if(void 0===w_$l&&(w_$l=!1),this._x!==w_$B||this._y!==w_$h){if(this.destroyed)return this;if(w_$l){this._x=w_$B,this._y=w_$h,this.conchModel&&this.conchModel.pos(this._x,this._y);var w_$A=this._parent;w_$A&&0===w_$A._repaint&&(w_$A._repaint=1,w_$A.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=w_$B,this.y=w_$h}return this},w_$B.pivot=function(w_$B,w_$h){return this.pivotX=w_$B,this.pivotY=w_$h,this},w_$B.size=function(w_$B,w_$h){return this.width=w_$B,this.height=w_$h,this},w_$B.scale=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=!1);var w_$A=this.getStyle(),w_$n=w_$A._tf;if(w_$n.scaleX!=w_$B||w_$n.scaleY!=w_$h){if(this.destroyed)return this;if(w_$l){w_$A.setScale(w_$B,w_$h),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(w_$B,w_$h),this._renderType|=4;var w_$s=this._parent;w_$s&&0===w_$s._repaint&&(w_$s._repaint=1,w_$s.parentRepaint())}else this.scaleX=w_$B,this.scaleY=w_$h}return this},w_$B.skew=function(w_$B,w_$h){return this.skewX=w_$B,this.skewY=w_$h,this},w_$B.render=function(w_$B,w_$h,w_$l){w_$f.spriteCount++,w_$j.renders[this._renderType]._fun(this,w_$B,w_$h+this._x,w_$l+this._y),this._repaint=0},w_$B.drawToCanvas=function(w_$B,w_$h,w_$l,w_$A){if(w_$M.isConchNode){var w_$n=w_$yB.create("2D");return new w_$E(w_$B,w_$h,w_$n).ctx.setCanvasType(1),this.conchModel.drawToCanvas(w_$n.source,w_$l,w_$A),w_$n}return w_$S.drawToCanvas(this,this._renderType,w_$B,w_$h,w_$l,w_$A)},w_$B.customRender=function(w_$B,w_$h,w_$l){this._renderType|=1024},w_$B._applyFilters=function(){var w_$B;if(!w_$M.isWebGL&&((w_$B=this._$P.filters)&&!(w_$B.length<1)))for(var w_$h=0,w_$l=w_$B.length;w_$h<w_$l;w_$h++)w_$B[w_$h].action.apply(this._$P.cacheCanvas)},w_$B._isHaveGlowFilter=function(){var w_$B,w_$h=0;if(this.filters)for(w_$h=0;w_$h<this.filters.length;w_$h++)if(8==this.filters[w_$h].type)return!0;for(w_$h=0,w_$B=this._childs.length;w_$h<w_$B;w_$h++)if(this._childs[w_$h]._isHaveGlowFilter())return!0;return!1},w_$B.localToGlobal=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!1),!0===w_$h&&(w_$B=new w_$U(w_$B.x,w_$B.y));for(var w_$l=this;w_$l&&w_$l!=w_$v.stage;)w_$B=w_$l.toParentPoint(w_$B),w_$l=w_$l.parent;return w_$B},w_$B.globalToLocal=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!1),w_$h&&(w_$B=new w_$U(w_$B.x,w_$B.y));for(var w_$l=this,w_$A=[];w_$l&&w_$l!=w_$v.stage;)w_$A.push(w_$l),w_$l=w_$l.parent;for(var w_$n=w_$A.length-1;0<=w_$n;)w_$B=(w_$l=w_$A[w_$n]).fromParentPoint(w_$B),w_$n--;return w_$B},w_$B.toParentPoint=function(w_$B){if(!w_$B)return w_$B;w_$B.x-=this.pivotX,w_$B.y-=this.pivotY,this.transform&&this._transform.transformPoint(w_$B),w_$B.x+=this._x,w_$B.y+=this._y;var w_$h=this._style.scrollRect;return w_$h&&(w_$B.x-=w_$h.x,w_$B.y-=w_$h.y),w_$B},w_$B.fromParentPoint=function(w_$B){if(!w_$B)return w_$B;w_$B.x-=this._x,w_$B.y-=this._y;var w_$h=this._style.scrollRect;return w_$h&&(w_$B.x+=w_$h.x,w_$B.y+=w_$h.y),this.transform&&this._transform.invertTransformPoint(w_$B),w_$B.x+=this.pivotX,w_$B.y+=this.pivotY,w_$B},w_$B.on=function(w_$B,w_$h,w_$l,w_$A){return 1!==this._mouseEnableState&&this.isMouseEvent(w_$B)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(w_$B,w_$h,w_$l,w_$A,!1)):w_$n.prototype.on.call(this,w_$B,w_$h,w_$l,w_$A)},w_$B.once=function(w_$B,w_$h,w_$l,w_$A){return 1!==this._mouseEnableState&&this.isMouseEvent(w_$B)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(w_$B,w_$h,w_$l,w_$A,!0)):w_$n.prototype.once.call(this,w_$B,w_$h,w_$l,w_$A)},w_$B._$2__onDisplay=function(){if(1!==this._mouseEnableState){var w_$B=this;for(w_$B=w_$B.parent;w_$B&&1!==w_$B._mouseEnableState&&!w_$B._getBit(2);)w_$B.mouseEnabled=!0,w_$B._setBit(2,!0),w_$B=w_$B.parent}},w_$B.loadImage=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=this;return void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),this.graphics.loadImage(w_$B,w_$h,w_$l,w_$A,w_$n,function(w_$B){w_$X.destroyed||(w_$X.size(w_$h+(w_$A||w_$B.width),w_$l+(w_$n||w_$B.height)),w_$X.repaint(),w_$s&&w_$s.runWith(w_$B))}),this},w_$B.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},w_$B._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},w_$B._childChanged=function(w_$B){this._childs.length?this._renderType|=2048:this._renderType&=-2049,w_$B&&this._get$P("hasZorder")&&w_$v.timer.callLater(this,this.updateZOrder),this.repaint()},w_$B.parentRepaint=function(){var w_$B=this._parent;w_$B&&0===w_$B._repaint&&(w_$B._repaint=1,w_$B.parentRepaint())},w_$B.startDrag=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){void 0===w_$h&&(w_$h=!1),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=300),void 0===w_$s&&(w_$s=!1),void 0===w_$X&&(w_$X=.92),this._$P.dragging||this._set$P("dragging",new w_$c),this._$P.dragging.start(this,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X)},w_$B.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},w_$B._releaseMem=function(){if(this._$P){var w_$B=this._$P.cacheCanvas;w_$B&&w_$B.ctx&&(w_$K.recover("RenderContext",w_$B.ctx),w_$B.ctx.canvas.size(0,0),w_$B.ctx=null);var w_$h=this._$P._filterCache;w_$h&&(w_$h.destroy(),w_$h.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},w_$B._setDisplay=function(w_$B){w_$B||this._releaseMem(),w_$n.prototype._setDisplay.call(this,w_$B)},w_$B.hitTestPoint=function(w_$B,w_$h){var w_$l=this.globalToLocal(w_$U.TEMP.setTo(w_$B,w_$h));return w_$B=w_$l.x,w_$h=w_$l.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?w_$x.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(w_$B,w_$h)},w_$B.getMousePoint=function(){return this.globalToLocal(w_$U.TEMP.setTo(w_$v.stage.mouseX,w_$v.stage.mouseY))},w_$B._getWords=function(){return null},w_$B._addChildsToLayout=function(w_$B){var w_$h=this._getWords();if(null==w_$h&&0==this._childs.length)return!1;if(w_$h)for(var w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++)w_$B.push(w_$h[w_$l]);w_$l=0;for(var w_$n=this._childs.length;w_$l<w_$n;++w_$l){var w_$s=this._childs[w_$l];w_$s._style._enableLayout()&&w_$s._addToLayout(w_$B)}return!0},w_$B._addToLayout=function(w_$B){this._style.absolute||(this._style.block?w_$B.push(this):this._addChildsToLayout(w_$B)&&(this.x=this.y=0))},w_$B._isChar=function(){return!1},w_$B._getCSSStyle=function(){return this._style.getCSSStyle()},w_$B._setAttributes=function(w_$B,w_$h){switch(w_$B){case"x":this.x=parseFloat(w_$h);break;case"y":this.y=parseFloat(w_$h);break;case"width":this.width=parseFloat(w_$h);break;case"height":this.height=parseFloat(w_$h);break;default:this[w_$B]=w_$h}},w_$B._layoutLater=function(){this.parent&&this.parent._layoutLater()},w_$i(0,w_$B,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(w_$B){this._optimizeScrollRect!=w_$B&&(this._optimizeScrollRect=w_$B,this.conchModel&&this.conchModel.optimizeScrollRect(w_$B))}),w_$i(0,w_$B,"customRenderEnable",null,function(w_$B){if(w_$B&&(this._renderType|=1024,w_$M.isConchNode)){w_$l.CustomList.push(this);var w_$h=new w_$yB("2d");w_$h._setContext(new CanvasRenderingContext2D),this.customContext=new w_$E(0,0,w_$h),w_$h.context.setCanvasType&&w_$h.context.setCanvasType(2),this.conchModel.custom(w_$h.context)}}),w_$i(0,w_$B,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(w_$B){this.cacheAs=w_$B?this._$P.hasFilter?"none":"normal":"none"}),w_$i(0,w_$B,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(w_$B){var w_$h=this._$P.cacheCanvas;if(w_$B!==(w_$h?w_$h.type:"none")){if("none"!==w_$B)this._getBit(1)||this._setUpNoticeType(1),w_$h||(w_$h=this._set$P("cacheCanvas",w_$K.getItemByClass("cacheCanvas",Object))),w_$h.type=w_$B,w_$h.reCache=!0,this._renderType|=16,"bitmap"==w_$B&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(w_$h){var w_$l=w_$h;w_$l&&w_$l.ctx&&(w_$K.recover("RenderContext",w_$l.ctx),w_$l.ctx.canvas.size(0,0),w_$l.ctx=null),w_$K.recover("cacheCanvas",w_$h)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),w_$i(0,w_$B,"zOrder",function(){return this._zOrder},function(w_$B){this._zOrder!=w_$B&&(this._zOrder=w_$B,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(w_$B),this._parent&&(w_$B&&this._parent._set$P("hasZorder",!0),w_$v.timer.callLater(this._parent,this.updateZOrder)))}),w_$i(0,w_$B,"rotation",function(){return this._style._tf.rotate},function(w_$B){var w_$h=this.getStyle();if(w_$h._tf.rotate!==w_$B){w_$h.setRotate(w_$B),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(w_$B),this._renderType|=4;var w_$l=this._parent;w_$l&&0===w_$l._repaint&&(w_$l._repaint=1,w_$l.parentRepaint())}}),w_$i(0,w_$B,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(w_$B){this._width!==w_$B&&(this._width=w_$B,this.conchModel&&this.conchModel.size(w_$B,this._height),this.repaint())}),w_$i(0,w_$B,"x",function(){return this._x},function(w_$B){if(this._x!==w_$B){if(this.destroyed)return;this._x=w_$B,this.conchModel&&this.conchModel.pos(w_$B,this._y);var w_$h=this._parent;w_$h&&0===w_$h._repaint&&(w_$h._repaint=1,w_$h.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),w_$i(0,w_$B,"globalScaleY",function(){for(var w_$B=1,w_$h=this;w_$h&&w_$h!==w_$v.stage;)w_$B*=w_$h.scaleY,w_$h=w_$h.parent;return w_$B}),w_$i(0,w_$B,"hitArea",function(){return this._$P.hitArea},function(w_$B){this._set$P("hitArea",w_$B)}),w_$i(0,w_$B,"staticCache",function(){return this._$P.staticCache},function(w_$B){this._set$P("staticCache",w_$B),w_$B||this.reCache()}),w_$i(0,w_$B,"texture",function(){return this._texture},function(w_$B){this._texture!=w_$B&&(this._texture=w_$B,this.graphics.cleanByTexture(w_$B,0,0))}),w_$i(0,w_$B,"y",function(){return this._y},function(w_$B){if(this._y!==w_$B){if(this.destroyed)return;this._y=w_$B,this.conchModel&&this.conchModel.pos(this._x,w_$B);var w_$h=this._parent;w_$h&&0===w_$h._repaint&&(w_$h._repaint=1,w_$h.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),w_$i(0,w_$B,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(w_$B){this._height!==w_$B&&(this._height=w_$B,this.conchModel&&this.conchModel.size(this._width,w_$B),this.repaint())}),w_$i(0,w_$B,"blendMode",function(){return this._style.blendMode},function(w_$B){this.getStyle().blendMode=w_$B,this.conchModel&&this.conchModel.blendMode(w_$B),w_$B&&"source-over"!=w_$B?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),w_$i(0,w_$B,"scaleX",function(){return this._style._tf.scaleX},function(w_$B){var w_$h=this.getStyle();if(w_$h._tf.scaleX!==w_$B){w_$h.setScaleX(w_$B),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(w_$B,w_$h._tf.scaleY),this._renderType|=4;var w_$l=this._parent;w_$l&&0===w_$l._repaint&&(w_$l._repaint=1,w_$l.parentRepaint())}}),w_$i(0,w_$B,"scaleY",function(){return this._style._tf.scaleY},function(w_$B){var w_$h=this.getStyle();if(w_$h._tf.scaleY!==w_$B){w_$h.setScaleY(w_$B),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(w_$h._tf.scaleX,w_$B),this._renderType|=4;var w_$l=this._parent;w_$l&&0===w_$l._repaint&&(w_$l._repaint=1,w_$l.parentRepaint())}}),w_$i(0,w_$B,"stage",function(){return w_$v.stage}),w_$i(0,w_$B,"skewX",function(){return this._style._tf.skewX},function(w_$B){var w_$h=this.getStyle();if(w_$h._tf.skewX!==w_$B){w_$h.setSkewX(w_$B),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(w_$B,w_$h._tf.skewY),this._renderType|=4;var w_$l=this._parent;w_$l&&0===w_$l._repaint&&(w_$l._repaint=1,w_$l.parentRepaint())}}),w_$i(0,w_$B,"scrollRect",function(){return this._style.scrollRect},function(w_$B){this.getStyle().scrollRect=w_$B,this.repaint(),w_$B?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(w_$B.x,w_$B.y,w_$B.width,w_$B.height)):(this._renderType&=-129,this.conchModel&&(w_$l.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),w_$i(0,w_$B,"skewY",function(){return this._style._tf.skewY},function(w_$B){var w_$h=this.getStyle();if(w_$h._tf.skewY!==w_$B){w_$h.setSkewY(w_$B),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(w_$h._tf.skewX,w_$B),this._renderType|=4;var w_$l=this._parent;w_$l&&0===w_$l._repaint&&(w_$l._repaint=1,w_$l.parentRepaint())}}),w_$i(0,w_$B,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(w_$B){this._tfChanged=!1,(this._transform=w_$B)&&(this._x=w_$B.tx,this._y=w_$B.ty,w_$B.tx=w_$B.ty=0,this.conchModel&&this.conchModel.transform(w_$B.a,w_$B.b,w_$B.c,w_$B.d,this._x,this._y)),w_$B?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),w_$i(0,w_$B,"pivotX",function(){return this._style._tf.translateX},function(w_$B){this.getStyle().setTranslateX(w_$B),this.conchModel&&this.conchModel.pivot(w_$B,this._style._tf.translateY),this.repaint()}),w_$i(0,w_$B,"pivotY",function(){return this._style._tf.translateY},function(w_$B){this.getStyle().setTranslateY(w_$B),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,w_$B),this.repaint()}),w_$i(0,w_$B,"alpha",function(){return this._style.alpha},function(w_$B){this._style&&this._style.alpha!==w_$B&&(w_$B=w_$B<0?0:1<w_$B?1:w_$B,this.getStyle().alpha=w_$B,this.conchModel&&this.conchModel.alpha(w_$B),1!==w_$B?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),w_$i(0,w_$B,"visible",function(){return this._style.visible},function(w_$B){this._style&&this._style.visible!==w_$B&&(this.getStyle().visible=w_$B,this.conchModel&&this.conchModel.visible(w_$B),this.parentRepaint())}),w_$i(0,w_$B,"graphics",function(){return this._graphics||(this.graphics=w_$S.createGraphics())},function(w_$B){this._graphics&&(this._graphics._sp=null),(this._graphics=w_$B)?(this._renderType&=-2,this._renderType|=512,(w_$B._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(w_$l.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),w_$i(0,w_$B,"filters",function(){return this._$P.filters},function(w_$B){w_$B&&0===w_$B.length&&(w_$B=null),this._$P.filters!=w_$B&&(this._set$P("filters",w_$B?w_$B.slice():null),w_$M.isConchApp&&(this.conchModel&&(w_$l.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),w_$M.isWebGL&&(w_$B&&w_$B.length?this._renderType|=32:this._renderType&=-33),w_$B&&0<w_$B.length?(this._getBit(1)||this._setUpNoticeType(1),w_$M.isWebGL&&1==w_$B.length&&w_$B[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(w_$M.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),w_$i(0,w_$B,"parent",w_$n.prototype._$get_parent,function(w_$B){w_$v.superSet(w_$BB,this,"parent",w_$B),w_$B&&this._getBit(2)&&this._$2__onDisplay()}),w_$i(0,w_$B,"mask",function(){return this._$P._mask},function(w_$B){w_$B&&this.mask&&this.mask._$P.maskParent||(w_$B?(this.cacheAs="bitmap",this._set$P("_mask",w_$B),w_$B._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",w_$B),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(w_$B?w_$B.conchModel:null),this._renderType|=64,this.parentRepaint())}),w_$i(0,w_$B,"mouseEnabled",function(){return 1<this._mouseEnableState},function(w_$B){this._mouseEnableState=w_$B?2:1}),w_$i(0,w_$B,"globalScaleX",function(){for(var w_$B=1,w_$h=this;w_$h&&w_$h!==w_$v.stage;)w_$B*=w_$h.scaleX,w_$h=w_$h.parent;return w_$B}),w_$i(0,w_$B,"mouseX",function(){return this.getMousePoint().x}),w_$i(0,w_$B,"mouseY",function(){return this.getMousePoint().y}),w_$l.fromImage=function(w_$B){return(new w_$l).loadImage(w_$B)},w_$l._cachePool=[],w_$l.CustomList=[],w_$t(w_$l,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=w_$X.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),w_$l}(w_$BB),w_$bB=function(w_$B){function w_$h(w_$B){this._audio=null,this._onEnd=null,this._resumePlay=null,w_$h.__super.call(this),this._onEnd=w_$e.bind(this.__onEnd,this),this._resumePlay=w_$e.bind(this.__resumePlay,this),w_$B.addEventListener("ended",this._onEnd),this._audio=w_$B}w_$G(w_$h,"laya.media.h5audio.AudioSoundChannel",w_$AB);var w_$l=w_$h.prototype;return w_$l.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(w_$v.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},w_$l.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,w_$d.container.appendChild(this._audio),this._audio.play()}catch(w_$B){this.event("error")}},w_$l.play=function(w_$B){this.isStopped=!1;try{this._audio.playbackRate=w_$a.playbackRate,this._audio.currentTime=this.startTime}catch(w_$B){return void this._audio.addEventListener("canplay",this._resumePlay)}w_$a.addChannel(this),w_$d.container.appendChild(this._audio),!w_$B&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},w_$l.stop=function(){this.isStopped=!0,w_$a.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&w_$M.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),w_$d.onIE||this._audio!=w_$lB._musicAudio&&w_$K.recover("audio:"+this.url,this._audio),w_$d.removeElement(this._audio),this._audio=null)},w_$l.pause=function(){this.isStopped=!0,w_$a.removeChannel(this),"pause"in this._audio&&this._audio.pause()},w_$l.resume=function(){this._audio&&(this.isStopped=!1,w_$a.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},w_$i(0,w_$l,"position",function(){return this._audio?this._audio.currentTime:0}),w_$i(0,w_$l,"duration",function(){return this._audio?this._audio.duration:0}),w_$i(0,w_$l,"volume",function(){return this._audio?this._audio.volume:1},function(w_$B){this._audio&&(this._audio.volume=w_$B)}),w_$h}(),w_$QB=function(w_$B){function w_$h(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=w_$sB.ctx,w_$h.__super.call(this),this._onPlayEnd=w_$e.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}w_$G(w_$h,"laya.media.webaudio.WebAudioSoundChannel",w_$AB);var w_$l=w_$h.prototype;return w_$l.play=function(w_$B){if(w_$a.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var w_$h=this.context,w_$l=this.gain,w_$A=w_$h.createBufferSource();(this.bufferSource=w_$A).buffer=this.audioBuffer,w_$A.connect(w_$l),w_$l&&w_$l.disconnect(),w_$l.connect(w_$h.destination),w_$A.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=w_$d.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(w_$A.loop=!0),w_$A.playbackRate.setTargetAtTime?w_$A.playbackRate.setTargetAtTime(w_$a.playbackRate,this.context.currentTime,.1):w_$A.playbackRate.value=w_$a.playbackRate,w_$A.start(0,this.startTime),!w_$B&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},w_$l.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(w_$v.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},w_$l._clearBufferSource=function(){if(this.bufferSource){var w_$B=this.bufferSource;w_$B.stop?w_$B.stop(0):w_$B.noteOff(0),w_$B.disconnect(0),w_$B.onended=null,w_$h._tryCleanFailed||this._tryClearBuffer(w_$B),this.bufferSource=null}},w_$l._tryClearBuffer=function(w_$B){try{w_$B.buffer=null}catch(w_$B){w_$h._tryCleanFailed=!0}},w_$l.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,w_$a.removeChannel(this),this.startHandler=null,this.completeHandler=null},w_$l.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,w_$a.removeChannel(this)},w_$l.resume=function(){this.startTime=this._pauseTime,this.play(!1)},w_$i(0,w_$l,"position",function(){return this.bufferSource?(w_$d.now()-this._startTime)/1e3+this.startTime:0}),w_$i(0,w_$l,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),w_$i(0,w_$l,"volume",function(){return this._volume},function(w_$B){this.isStopped||(this._volume=w_$B,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(w_$B,this.context.currentTime,.1):this.gain.gain.value=w_$B)}),w_$h._tryCleanFailed=!1,w_$h}(),w_$iB=function(w_$B){function w_$h(){w_$h.__super.call(this),this._w=0,this._h=0}w_$G(w_$h,"laya.resource.Bitmap",w_$PB);var w_$l=w_$h.prototype;return w_$i(0,w_$l,"width",function(){return this._w}),w_$i(0,w_$l,"height",function(){return this._h}),w_$i(0,w_$l,"source",function(){return this._source}),w_$h}(),w_$$B=function(w_$h){function w_$B(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,w_$B.__super.call(this),this._interval=w_$A.animationInterval,this._setUpNoticeType(1)}w_$G(w_$B,"laya.display.AnimationPlayerBase",w_$h);var w_$l=w_$B.prototype;return w_$l.play=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=!0),void 0===w_$l&&(w_$l=""),void 0===w_$A&&(w_$A=!0),this._isPlaying=!0,this.index="string"==typeof w_$B?this._getFrameByLabel(w_$B):w_$B,this.loop=w_$h,this._actionName=w_$l,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},w_$l._getFrameByLabel=function(w_$B){var w_$h=0;for(w_$h=0;w_$h<this._count;w_$h++)if(this._labels[w_$h]&&0<=this._labels[w_$h].indexOf(w_$B))return w_$h;return 0},w_$l._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},w_$l._setControlNode=function(w_$B){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=w_$B)&&w_$B!=this&&(w_$B.on("display",this,this._checkResumePlaying),w_$B.on("undisplay",this,this._checkResumePlaying))},w_$l._setDisplay=function(w_$B){w_$h.prototype._setDisplay.call(this,w_$B),this._checkResumePlaying()},w_$l._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},w_$l.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},w_$l.addLabel=function(w_$B,w_$h){this._labels||(this._labels={}),this._labels[w_$h]||(this._labels[w_$h]=[]),this._labels[w_$h].push(w_$B)},w_$l.removeLabel=function(w_$B){if(w_$B){if(this._labels)for(var w_$h in this._labels)this._removeLabelFromLabelList(this._labels[w_$h],w_$B)}else this._labels=null},w_$l._removeLabelFromLabelList=function(w_$B,w_$h){if(w_$B)for(var w_$l=w_$B.length-1;0<=w_$l;w_$l--)w_$B[w_$l]==w_$h&&w_$B.splice(w_$l,1)},w_$l.gotoAndStop=function(w_$B){this.index="string"==typeof w_$B?this._getFrameByLabel(w_$B):w_$B,this.stop()},w_$l._displayToIndex=function(w_$B){},w_$l.clear=function(){this.stop(),this._labels=null},w_$i(0,w_$l,"interval",function(){return this._interval},function(w_$B){this._interval!=w_$B&&(this._frameRateChanged=!0,this._interval=w_$B,this._isPlaying&&0<w_$B&&this.timerLoop(w_$B,this,this._frameLoop,null,!0,!0))}),w_$i(0,w_$l,"isPlaying",function(){return this._isPlaying}),w_$i(0,w_$l,"index",function(){return this._index},function(w_$B){if(this._index=w_$B,this._displayToIndex(w_$B),this._labels&&this._labels[w_$B])for(var w_$h=this._labels[w_$B],w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++)this.event("label",w_$h[w_$l])}),w_$i(0,w_$l,"count",function(){return this._count}),w_$B.WRAP_POSITIVE=0,w_$B.WRAP_REVERSE=1,w_$B.WRAP_PINGPONG=2,w_$B}(w_$TB),w_$VB=function(w_$h){function w_$Q(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,w_$Q.__super.call(this),this.overflow=w_$Q.VISIBLE,this._style=new w_$hB(this),this._style.wordWrap=!1}w_$G(w_$Q,"laya.display.Text",w_$h);var w_$B=w_$Q.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._lines=null,this._words&&(this._words.length=0,this._words=null)},w_$B._getBoundPointsM=function(w_$B){void 0===w_$B&&(w_$B=!1);var w_$h=w_$x.TEMP;return w_$h.setTo(0,0,this.width,this.height),w_$h._getBoundPoints()},w_$B.getGraphicBounds=function(w_$B){void 0===w_$B&&(w_$B=!1);var w_$h=w_$x.TEMP;return w_$h.setTo(0,0,this.width,this.height),w_$h},w_$B._getCSSStyle=function(){return this._style},w_$B.lang=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G){if(w_$B=w_$Q.langPacks&&w_$Q.langPacks[w_$B]?w_$Q.langPacks[w_$B]:w_$B,arguments.length<2)this._text=w_$B;else{for(var w_$T=0,w_$b=arguments.length;w_$T<w_$b;w_$T++)w_$B=w_$B.replace("{"+w_$T+"}",arguments[w_$T+1]);this._text=w_$B}},w_$B._isPassWordMode=function(){var w_$B=this._style.password;return"prompt"in this&&this.prompt==this._text&&(w_$B=!1),w_$B},w_$B._getPassWordTxt=function(w_$B){var w_$h;w_$h="";for(var w_$l=w_$B.length;0<w_$l;w_$l--)w_$h+="●";return w_$h},w_$B.renderText=function(w_$B,w_$h){var w_$l=this.graphics;w_$l.clear(!0);var w_$A=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(w_$d.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);w_$d.context.font=w_$A;var w_$n=this.padding,w_$s=w_$n[3],w_$X="left",w_$Z=this._lines,w_$t=this.leading+this._charSize.height,w_$P=this._currBitmapFont;w_$P&&(w_$t=this.leading+w_$P.getMaxHeight());var w_$G=w_$n[0];if(!w_$P&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(w_$X="right",w_$s=this._width-w_$n[1]):"center"==this.align&&(w_$X="center",w_$s=.5*this._width+w_$n[3]-w_$n[1])),0<this._height){var w_$T=this._textHeight>this._height?"top":this.valign;"middle"===w_$T?w_$G=.5*(this._height-w_$h*w_$t)+w_$n[0]-w_$n[2]:"bottom"===w_$T&&(w_$G=this._height-w_$h*w_$t-w_$n[2])}var w_$b=this._style;if(w_$P&&w_$P.autoScaleSize)var w_$Q=w_$P.fontSize/this.fontSize;if(this._clipPoint)if(w_$l.save(),w_$P&&w_$P.autoScaleSize){var w_$i=0,w_$$=0;w_$i=this._width?this._width-w_$n[3]-w_$n[1]:this._textWidth,w_$$=this._height?this._height-w_$n[0]-w_$n[2]:this._textHeight,w_$i*=w_$Q,w_$$*=w_$Q,w_$l.clipRect(w_$n[3],w_$n[0],w_$i,w_$$)}else w_$l.clipRect(w_$n[3],w_$n[0],this._width?this._width-w_$n[3]-w_$n[1]:this._textWidth,this._height?this._height-w_$n[0]-w_$n[2]:this._textHeight);var w_$V=w_$b.password;"prompt"in this&&this.prompt==this._text&&(w_$V=!1);for(var w_$J=0,w_$H=0,w_$y=Math.min(this._lines.length,w_$h+w_$B)||1,w_$C=w_$B;w_$C<w_$y;w_$C++){var w_$o,w_$u=w_$Z[w_$C];if(w_$V){var w_$v=w_$u.length;w_$u="";for(var w_$U=w_$v;0<w_$U;w_$U--)w_$u+="●"}if(w_$J=w_$s-(this._clipPoint?this._clipPoint.x:0),w_$H=w_$G+w_$t*w_$C-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(w_$X,w_$J,w_$H,w_$C),w_$P){var w_$x=this.width;w_$P.autoScaleSize&&(w_$x=this.width*w_$Q),w_$P.drawText(w_$u,this,w_$J,w_$H,this.align,w_$x)}else w_$M.isWebGL?(this._words||(this._words=[]),(w_$o=this._words.length>w_$C-w_$B?this._words[w_$C-w_$B]:new w_$r).setText(w_$u)):w_$o=w_$u,w_$b.stroke?w_$l.fillBorderText(w_$o,w_$J,w_$H,w_$A,this.color,w_$b.strokeColor,w_$b.stroke,w_$X):w_$l.fillText(w_$o,w_$J,w_$H,w_$A,this.color,w_$X)}if(w_$P&&w_$P.autoScaleSize){var w_$w=1/w_$Q;this.scale(w_$w,w_$w)}this._clipPoint&&w_$l.restore(),this._startX=w_$s,this._startY=w_$G},w_$B.drawUnderline=function(w_$B,w_$h,w_$l,w_$A){var w_$n=this._lineWidths[w_$A];switch(w_$B){case"center":w_$h-=w_$n/2;break;case"right":w_$h-=w_$n}w_$l+=this._charSize.height,this._graphics.drawLine(w_$h,w_$l,w_$h+w_$n,w_$l,this.underlineColor||this.color,1)},w_$B.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);w_$d.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new w_$U(0,0)):this._clipPoint=null;var w_$B=this._lines.length;if(this.overflow!=w_$Q.VISIBLE){var w_$h=this.overflow==w_$Q.HIDDEN?Math.floor:Math.ceil;w_$B=Math.min(w_$B,w_$h((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var w_$l=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(w_$l,w_$B),this.repaint()},w_$B.evalTextSize=function(){var w_$B,w_$h=NaN;w_$B=Math.max.apply(this,this._lineWidths),w_$h=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],w_$B==this._textWidth&&w_$h==this._textHeight||(this._textWidth=w_$B,this._textHeight=w_$h,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},w_$B.checkEnabledViewportOrNot=function(){return this.overflow==w_$Q.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},w_$B.changeText=function(w_$B){this._text!==w_$B&&(this.lang(w_$B+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},w_$B.parseLines=function(w_$B){var w_$h=this.wordWrap||this.overflow==w_$Q.HIDDEN;if(w_$h)var w_$l=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var w_$A=w_$e.contextMeasureText(w_$Q._testWord);w_$M.isConchApp&&0===w_$A.width&&0===w_$A.height&&(w_$A=w_$e.contextMeasureText("W")),this._charSize.width=w_$A.width,this._charSize.height=w_$A.height||this.fontSize}for(var w_$n=w_$B.replace(/\r\n/g,"\n").split("\n"),w_$s=0,w_$X=w_$n.length;w_$s<w_$X;w_$s++){var w_$Z=w_$n[w_$s];w_$h?this.parseLine(w_$Z,w_$l):(this._lineWidths.push(this.getTextWidth(w_$Z)),this._lines.push(w_$Z))}},w_$B.parseLine=function(w_$B,w_$h){w_$d.context;var w_$l,w_$A=this._lines,w_$n=0,w_$s=NaN,w_$X=NaN,w_$Z=0;if((w_$s=this.getTextWidth(w_$B))<=w_$h)return w_$A.push(w_$B),void this._lineWidths.push(w_$s);w_$s=this._charSize.width,0==(w_$n=Math.floor(w_$h/w_$s))&&(w_$n=1),w_$X=w_$s=this.getTextWidth(w_$B.substring(0,w_$n));for(var w_$t=w_$n,w_$P=w_$B.length;w_$t<w_$P;w_$t++)if(w_$h<(w_$X+=w_$s=this.getTextWidth(w_$B.charAt(w_$t))))if(this.wordWrap){var w_$G=w_$B.substring(w_$Z,w_$t);if(w_$G.charCodeAt(w_$G.length-1)<255?(w_$l=/(?:\w|-)+$/.exec(w_$G))&&(w_$t=w_$l.index+w_$Z,0==w_$l.index?w_$t+=w_$G.length:w_$G=w_$B.substring(w_$Z,w_$t)):w_$Q.RightToLeft&&(w_$l=/([\u0600-\u06FF])+$/.exec(w_$G))&&(w_$t=w_$l.index+w_$Z,0==w_$l.index?w_$t+=w_$G.length:w_$G=w_$B.substring(w_$Z,w_$t)),w_$A.push(w_$G),this._lineWidths.push(w_$X-w_$s),!((w_$Z=w_$t)+w_$n<w_$P)){w_$A.push(w_$B.substring(w_$Z,w_$P)),this._lineWidths.push(this.getTextWidth(w_$A[w_$A.length-1])),w_$Z=-1;break}w_$t+=w_$n,w_$X=w_$s=this.getTextWidth(w_$B.substring(w_$Z,w_$t)),w_$t--}else if(this.overflow==w_$Q.HIDDEN)return w_$A.push(w_$B.substring(0,w_$t)),void this._lineWidths.push(this.getTextWidth(w_$A[w_$A.length-1]));this.wordWrap&&-1!=w_$Z&&(w_$A.push(w_$B.substring(w_$Z,w_$P)),this._lineWidths.push(this.getTextWidth(w_$A[w_$A.length-1])))},w_$B.getTextWidth=function(w_$B){return this._currBitmapFont?this._currBitmapFont.getTextWidth(w_$B):w_$e.contextMeasureText(w_$B).width},w_$B.getWordWrapWidth=function(){var w_$B=this.padding,w_$h=NaN;return(w_$h=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(w_$h=this.wordWrap?100:w_$d.width),w_$h<=0&&(w_$h=100),w_$h-w_$B[3]-w_$B[1]},w_$B.getCharPoint=function(w_$B,w_$h){this._isChanged&&w_$v.timer.runCallLater(this,this.typeset);for(var w_$l=0,w_$A=this._lines,w_$n=0,w_$s=0,w_$X=w_$A.length;w_$s<w_$X;w_$s++){if(w_$B<(w_$l+=w_$A[w_$s].length)){var w_$Z=w_$s;break}w_$n=w_$l}var w_$t=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;w_$d.context.font=w_$t;var w_$P=this.getTextWidth(this._text.substring(w_$n,w_$B));return(w_$h||new w_$U).setTo(this._startX+w_$P-(this._clipPoint?this._clipPoint.x:0),this._startY+w_$Z*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},w_$i(0,w_$B,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(w_$B){w_$B!=this._width&&(w_$v.superSet(w_$TB,this,"width",w_$B),this.isChanged=!0)}),w_$i(0,w_$B,"textWidth",function(){return this._isChanged&&w_$v.timer.runCallLater(this,this.typeset),this._textWidth}),w_$i(0,w_$B,"height",function(){return this._height?this._height:this.textHeight},function(w_$B){w_$B!=this._height&&(w_$v.superSet(w_$TB,this,"height",w_$B),this.isChanged=!0)}),w_$i(0,w_$B,"textHeight",function(){return this._isChanged&&w_$v.timer.runCallLater(this,this.typeset),this._textHeight}),w_$i(0,w_$B,"padding",function(){return this._getCSSStyle().padding},function(w_$B){this._getCSSStyle().padding=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"bold",function(){return this._getCSSStyle().bold},function(w_$B){this._getCSSStyle().bold=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"text",function(){return this._text||""},function(w_$B){this._text!==w_$B&&(this.lang(w_$B+""),this.isChanged=!0,this.event("change"))}),w_$i(0,w_$B,"color",function(){return this._getCSSStyle().color},function(w_$B){this._getCSSStyle().color!=w_$B&&(this._getCSSStyle().color=w_$B,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),w_$i(0,w_$B,"font",function(){return this._getCSSStyle().fontFamily},function(w_$B){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),w_$Q._bitmapFonts&&w_$Q._bitmapFonts[w_$B]&&(this._currBitmapFont=w_$Q._bitmapFonts[w_$B]),this._getCSSStyle().fontFamily=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"fontSize",function(){return this._getCSSStyle().fontSize},function(w_$B){this._getCSSStyle().fontSize=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"italic",function(){return this._getCSSStyle().italic},function(w_$B){this._getCSSStyle().italic=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"align",function(){return this._getCSSStyle().align},function(w_$B){this._getCSSStyle().align=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"valign",function(){return this._getCSSStyle().valign},function(w_$B){this._getCSSStyle().valign=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(w_$B){this._getCSSStyle().wordWrap=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"leading",function(){return this._getCSSStyle().leading},function(w_$B){this._getCSSStyle().leading=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(w_$B){this._getCSSStyle().backgroundColor=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"borderColor",function(){return this._getCSSStyle().borderColor},function(w_$B){this._getCSSStyle().borderColor=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"stroke",function(){return this._getCSSStyle().stroke},function(w_$B){this._getCSSStyle().stroke=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(w_$B){this._getCSSStyle().strokeColor=w_$B,this.isChanged=!0}),w_$i(0,w_$B,"isChanged",null,function(w_$B){this._isChanged!==w_$B&&(this._isChanged=w_$B)&&w_$v.timer.callLater(this,this.typeset)}),w_$i(0,w_$B,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(w_$B){if(!(this.overflow!=w_$Q.SCROLL||this.textWidth<this._width)&&this._clipPoint){w_$B=w_$B<this.padding[3]?this.padding[3]:w_$B;var w_$h=this._textWidth-this._width;w_$B=w_$h<w_$B?w_$h:w_$B;var w_$l=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=w_$B,this.renderText(this._lastVisibleLineIndex,w_$l)}}),w_$i(0,w_$B,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(w_$B){if(!(this.overflow!=w_$Q.SCROLL||this.textHeight<this._height)&&this._clipPoint){w_$B=w_$B<this.padding[0]?this.padding[0]:w_$B;var w_$h=this._textHeight-this._height,w_$l=(w_$B=w_$h<w_$B?w_$h:w_$B)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=w_$l;var w_$A=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=w_$B,this.renderText(w_$l,w_$A)}}),w_$i(0,w_$B,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),w_$i(0,w_$B,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),w_$i(0,w_$B,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),w_$i(0,w_$B,"underlineColor",function(){return this._underlineColor},function(w_$B){this._underlineColor=w_$B,this._isChanged=!0,this.typeset()}),w_$Q.registerBitmapFont=function(w_$B,w_$h){w_$Q._bitmapFonts||(w_$Q._bitmapFonts={}),w_$Q._bitmapFonts[w_$B]=w_$h},w_$Q.unregisterBitmapFont=function(w_$B,w_$h){if(void 0===w_$h&&(w_$h=!0),w_$Q._bitmapFonts&&w_$Q._bitmapFonts[w_$B]){var w_$l=w_$Q._bitmapFonts[w_$B];w_$h&&w_$l.destroy(),delete w_$Q._bitmapFonts[w_$B]}},w_$Q.setTextRightToLeft=function(){var w_$B;(w_$B=w_$d.canvas.source.style).display="none",w_$B.position="absolute",w_$B.direction="rtl",w_$M._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,w_$d.document.body.appendChild(w_$d.canvas.source)},w_$Q.supportFont=function(w_$B){w_$d.context.font="10px sans-serif";var w_$h=w_$e.contextMeasureText("abcji").width;w_$d.context.font="10px "+w_$B;var w_$l=w_$e.contextMeasureText("abcji").width;return console.log(w_$h,w_$l),w_$h!==w_$l},w_$Q._testWord="游",w_$Q.langPacks=null,w_$Q.VISIBLE="visible",w_$Q.SCROLL="scroll",w_$Q.HIDDEN="hidden",w_$Q.CharacterCache=!0,w_$Q.RightToLeft=!1,w_$Q._bitmapFonts=null,w_$t(w_$Q,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),w_$Q}(w_$TB),w_$JB=function(w_$T){function w_$X(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",w_$X.__super.call(this),this.offset=new w_$U,this._canvasTransform=new w_$N,this._previousOrientation=w_$d.window.orientation;var w_$h=this;this.transform=w_$N.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var w_$B=w_$d.window,w_$l=this;w_$B.addEventListener("focus",function(){w_$h._isFocused=!0,w_$l.event("focus"),w_$l.event("focuschange")}),w_$B.addEventListener("blur",function(){w_$h._isFocused=!1,w_$l.event("blur"),w_$l.event("focuschange"),w_$l._isInputting()&&(w_$oB.inputElement.target.focus=!1)});var w_$A="visibilityState",w_$n="visibilitychange",w_$s=w_$B.document;void 0!==w_$s.hidden?(w_$n="visibilitychange",w_$A="visibilityState"):void 0!==w_$s.mozHidden?(w_$n="mozvisibilitychange",w_$A="mozVisibilityState"):void 0!==w_$s.msHidden?(w_$n="msvisibilitychange",w_$A="msVisibilityState"):void 0!==w_$s.webkitHidden&&(w_$n="webkitvisibilitychange",w_$A="webkitVisibilityState"),w_$B.document.addEventListener(w_$n,function(){"hidden"==w_$d.document[w_$A]?w_$l._setStageVisible(!1):w_$l._setStageVisible(!0)}),w_$B.document.addEventListener("qbrowserVisibilityChange",function(w_$B){w_$l._setStageVisible(!w_$B.hidden)}),w_$B.addEventListener("resize",function(){var w_$B=w_$d.window.orientation;null!=w_$B&&w_$B!=w_$h._previousOrientation&&w_$l._isInputting()&&(w_$oB.inputElement.target.focus=!1),w_$h._previousOrientation=w_$B,w_$l._isInputting()||w_$l._resetCanvas()}),w_$B.addEventListener("orientationchange",function(w_$B){w_$l._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),w_$d.onMobile&&this.on("mousedown",this,this._onmouseMove)}w_$G(w_$X,"laya.display.Stage",w_$T);var w_$B=w_$X.prototype;return w_$B._setStageVisible=function(w_$B){this._isVisibility!=w_$B&&(this._isVisibility=w_$B,this._isVisibility||this._isInputting()&&(w_$oB.inputElement.target.focus=!1),this.event("visibilitychange"))},w_$B._isInputting=function(){return w_$d.onMobile&&w_$oB.isInputting},w_$B._changeCanvasSize=function(){this.setScreenSize(w_$d.clientWidth*w_$d.pixelRatio,w_$d.clientHeight*w_$d.pixelRatio)},w_$B._resetCanvas=function(){if(this.screenAdaptationEnabled){var w_$B=w_$M._mainCanvas;w_$B.source.style;w_$B.size(1,1),w_$v.timer.once(100,this,this._changeCanvasSize)}},w_$B.setScreenSize=function(w_$B,w_$h){var w_$l=!1;if("none"!==this._screenMode&&(w_$l=(w_$B/w_$h<1?"vertical":"horizontal")!==this._screenMode)){var w_$A=w_$h;w_$h=w_$B,w_$B=w_$A}this.canvasRotation=w_$l;var w_$n=w_$M._mainCanvas,w_$s=w_$n.source.style,w_$X=this._canvasTransform.identity(),w_$Z=this._scaleMode,w_$t=w_$B/this.designWidth,w_$P=w_$h/this.designHeight,w_$G=this.designWidth,w_$T=this.designHeight,w_$b=w_$B,w_$Q=w_$h,w_$i=w_$d.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,w_$Z){case"noscale":w_$t=w_$P=1,w_$b=this.designWidth,w_$Q=this.designHeight;break;case"showall":w_$t=w_$P=Math.min(w_$t,w_$P),w_$G=w_$b=Math.round(this.designWidth*w_$t),w_$T=w_$Q=Math.round(this.designHeight*w_$P);break;case"noborder":w_$t=w_$P=Math.max(w_$t,w_$P),w_$b=Math.round(this.designWidth*w_$t),w_$Q=Math.round(this.designHeight*w_$P);break;case"full":w_$t=w_$P=1,this._width=w_$G=w_$B,this._height=w_$T=w_$h;break;case"fixedwidth":w_$P=w_$t,this._height=w_$T=Math.round(w_$h/w_$t);break;case"fixedheight":w_$t=w_$P,this._width=w_$G=Math.round(w_$B/w_$P);break;case"fixedauto":w_$B/w_$h<this.designWidth/this.designHeight?(w_$P=w_$t,this._height=w_$T=Math.round(w_$h/w_$t)):(w_$t=w_$P,this._width=w_$G=Math.round(w_$B/w_$P))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,w_$G=w_$G+1&2147483646,w_$T=w_$T+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),w_$t*=this.scaleX,w_$P*=this.scaleY,1===w_$t&&1===w_$P?this.transform.identity():(this.transform.a=this._formatData(w_$t/(w_$b/w_$G)),this.transform.d=this._formatData(w_$P/(w_$Q/w_$T)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),w_$n.size(w_$G,w_$T),w_$S.changeWebGLSize(w_$G,w_$T),w_$X.scale(w_$b/w_$G/w_$i,w_$Q/w_$T/w_$i),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(w_$B-w_$b)/w_$i:this.offset.x=.5*(w_$B-w_$b)/w_$i,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(w_$h-w_$Q)/w_$i:this.offset.y=.5*(w_$h-w_$Q)/w_$i,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),w_$X.translate(this.offset.x,this.offset.y),this.canvasDegree=0,w_$l&&("horizontal"===this._screenMode?(w_$X.rotate(Math.PI/2),w_$X.translate(w_$h/w_$i,0),this.canvasDegree=90):(w_$X.rotate(-Math.PI/2),w_$X.translate(0,w_$B/w_$i),this.canvasDegree=-90)),w_$X.a=this._formatData(w_$X.a),w_$X.d=this._formatData(w_$X.d),w_$X.tx=this._formatData(w_$X.tx),w_$X.ty=this._formatData(w_$X.ty),w_$s.transformOrigin=w_$s.webkitTransformOrigin=w_$s.msTransformOrigin=w_$s.mozTransformOrigin=w_$s.oTransformOrigin="0px 0px 0px",w_$s.transform=w_$s.webkitTransform=w_$s.msTransform=w_$s.mozTransform=w_$s.oTransform="matrix("+w_$X.toString()+")",w_$X.translate(parseInt(w_$s.left)||0,parseInt(w_$s.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},w_$B._formatData=function(w_$B){return Math.abs(w_$B)<1e-6?0:Math.abs(1-w_$B)<.001?0<w_$B?1:-1:w_$B},w_$B.getMousePoint=function(){return w_$U.TEMP.setTo(this.mouseX,this.mouseY)},w_$B.repaint=function(){this._repaint=1},w_$B.parentRepaint=function(){},w_$B._loop=function(){return this.render(w_$M.context,0,0),!0},w_$B._onmouseMove=function(w_$B){this._mouseMoveTime=w_$d.now()},w_$B.getTimeFromFrameStart=function(){return w_$d.now()-this._frameStartTime},w_$B.render=function(w_$B,w_$h,w_$l){if("sleep"===this._frameRate&&!w_$M.isConchApp){var w_$A=w_$d.now();if(!(1e3<=w_$A-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(w_$f.loopCount++,w_$$.instance.runEvent(),w_$v.timer._update()));this._frameStartTime=w_$A}if(this._renderCount++,w_$M.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=w_$d.now();var w_$n="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),w_$s=this._renderCount%2==0;if(w_$f.renderSlow=!w_$n,w_$n||w_$s||w_$M.isConchApp){var w_$X;w_$f.loopCount++,w_$$.instance.runEvent(),w_$v.timer._update(),w_$S.update3DLoop();var w_$Z=0,w_$t=0;if(w_$M.isConchNode)for(w_$Z=0,w_$t=this._scenes.length;w_$Z<w_$t;w_$Z++)(w_$X=this._scenes[w_$Z])&&w_$X._updateSceneConch();else for(w_$Z=0,w_$t=this._scenes.length;w_$Z<w_$t;w_$Z++)(w_$X=this._scenes[w_$Z])&&w_$X._updateScene();if(w_$M.isConchNode){var w_$P=w_$TB.CustomList;for(w_$Z=0,w_$t=w_$P.length;w_$Z<w_$t;w_$Z++){var w_$G=w_$P[w_$Z];w_$G.customRender(w_$G.customContext,0,0)}return}}w_$M.isConchNode||this.renderingEnabled&&(w_$n||!w_$s||w_$M.isConchWebGL)&&(w_$M.isWebGL?w_$M.WebGL.mainContext&&!w_$M.WebGL.mainContext.isContextLost()&&(w_$B.clear(),w_$T.prototype.render.call(this,w_$B,w_$h,w_$l),w_$f._show&&w_$f._sp&&w_$f._sp.render(w_$B,w_$h,w_$l),w_$S.clear(this._bgColor),w_$S.beginFlush(),w_$B.flush(),w_$S.endFinish(),w_$q.instance&&w_$q.getInstance().endDispose()):(w_$S.clear(this._bgColor),w_$T.prototype.render.call(this,w_$B,w_$h,w_$l),w_$f._show&&w_$f._sp&&w_$f._sp.render(w_$B,w_$h,w_$l)))}else this._renderCount%5==0&&(w_$f.loopCount++,w_$$.instance.runEvent(),w_$v.timer._update())},w_$B._requestFullscreen=function(){var w_$B=w_$d.document.documentElement;w_$B.requestFullscreen?w_$B.requestFullscreen():w_$B.mozRequestFullScreen?w_$B.mozRequestFullScreen():w_$B.webkitRequestFullscreen?w_$B.webkitRequestFullscreen():w_$B.msRequestFullscreen&&w_$B.msRequestFullscreen()},w_$B._fullScreenChanged=function(){w_$v.stage.event("fullscreenchange")},w_$B.exitFullscreen=function(){var w_$B=w_$d.document;w_$B.exitFullscreen?w_$B.exitFullscreen():w_$B.mozCancelFullScreen?w_$B.mozCancelFullScreen():w_$B.webkitExitFullscreen&&w_$B.webkitExitFullscreen()},w_$i(0,w_$B,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),w_$i(0,w_$B,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),w_$i(0,w_$B,"frameRate",function(){return this._frameRate},function(w_$B){if(this._frameRate=w_$B,w_$M.isConchApp)switch(this._frameRate){case"slow":w_$d.window.conch&&w_$d.window.conchConfig.setSlowFrame&&w_$d.window.conchConfig.setSlowFrame(!0);break;case"fast":w_$d.window.conch&&w_$d.window.conchConfig.setSlowFrame&&w_$d.window.conchConfig.setSlowFrame(!1);break;case"mouse":w_$d.window.conch&&w_$d.window.conchConfig.setMouseFrame&&w_$d.window.conchConfig.setMouseFrame(2e3);break;case"sleep":w_$d.window.conch&&w_$d.window.conchConfig.setLimitFPS&&w_$d.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),w_$i(0,w_$B,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),w_$i(0,w_$B,"width",w_$T.prototype._$get_width,function(w_$B){this.designWidth=w_$B,w_$v.superSet(w_$TB,this,"width",w_$B),w_$v.timer.callLater(this,this._changeCanvasSize)}),w_$i(0,w_$B,"alignH",function(){return this._alignH},function(w_$B){this._alignH=w_$B,w_$v.timer.callLater(this,this._changeCanvasSize)}),w_$i(0,w_$B,"isFocused",function(){return this._isFocused}),w_$i(0,w_$B,"height",w_$T.prototype._$get_height,function(w_$B){this.designHeight=w_$B,w_$v.superSet(w_$TB,this,"height",w_$B),w_$v.timer.callLater(this,this._changeCanvasSize)}),w_$i(0,w_$B,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||w_$N.create()},w_$T.prototype._$set_transform),w_$i(0,w_$B,"isVisibility",function(){return this._isVisibility}),w_$i(0,w_$B,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),w_$i(0,w_$B,"scaleMode",function(){return this._scaleMode},function(w_$B){this._scaleMode=w_$B,w_$v.timer.callLater(this,this._changeCanvasSize)}),w_$i(0,w_$B,"alignV",function(){return this._alignV},function(w_$B){this._alignV=w_$B,w_$v.timer.callLater(this,this._changeCanvasSize)}),w_$i(0,w_$B,"bgColor",function(){return this._bgColor},function(w_$B){this._bgColor=w_$B,this.conchModel&&this.conchModel.bgColor(w_$B),w_$M.isWebGL&&(w_$B?w_$X._wgColor=w_$F.create(w_$B)._color:w_$d.onMiniGame||(w_$X._wgColor=null)),w_$d.onLimixiu?w_$X._wgColor=w_$F.create(w_$B)._color:w_$M.canvas.style.background=w_$B||"none"}),w_$i(0,w_$B,"mouseX",function(){return Math.round(w_$$.instance.mouseX/this.clientScaleX)}),w_$i(0,w_$B,"mouseY",function(){return Math.round(w_$$.instance.mouseY/this.clientScaleY)}),w_$i(0,w_$B,"screenMode",function(){return this._screenMode},function(w_$B){this._screenMode=w_$B}),w_$i(0,w_$B,"visible",w_$T.prototype._$get_visible,function(w_$B){this.visible!==w_$B&&(w_$v.superSet(w_$TB,this,"visible",w_$B),w_$M._mainCanvas.source.style.visibility=w_$B?"visible":"hidden")}),w_$i(0,w_$B,"fullScreenEnabled",null,function(w_$B){var w_$h=w_$d.document,w_$l=w_$M.canvas;w_$B?(w_$l.addEventListener("mousedown",this._requestFullscreen),w_$l.addEventListener("touchstart",this._requestFullscreen),w_$h.addEventListener("fullscreenchange",this._fullScreenChanged),w_$h.addEventListener("mozfullscreenchange",this._fullScreenChanged),w_$h.addEventListener("webkitfullscreenchange",this._fullScreenChanged),w_$h.addEventListener("msfullscreenchange",this._fullScreenChanged)):(w_$l.removeEventListener("mousedown",this._requestFullscreen),w_$l.removeEventListener("touchstart",this._requestFullscreen),w_$h.removeEventListener("fullscreenchange",this._fullScreenChanged),w_$h.removeEventListener("mozfullscreenchange",this._fullScreenChanged),w_$h.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),w_$h.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),w_$X.SCALE_NOSCALE="noscale",w_$X.SCALE_EXACTFIT="exactfit",w_$X.SCALE_SHOWALL="showall",w_$X.SCALE_NOBORDER="noborder",w_$X.SCALE_FULL="full",w_$X.SCALE_FIXED_WIDTH="fixedwidth",w_$X.SCALE_FIXED_HEIGHT="fixedheight",w_$X.SCALE_FIXED_AUTO="fixedauto",w_$X.ALIGN_LEFT="left",w_$X.ALIGN_RIGHT="right",w_$X.ALIGN_CENTER="center",w_$X.ALIGN_TOP="top",w_$X.ALIGN_MIDDLE="middle",w_$X.ALIGN_BOTTOM="bottom",w_$X.SCREEN_NONE="none",w_$X.SCREEN_HORIZONTAL="horizontal",w_$X.SCREEN_VERTICAL="vertical",w_$X.FRAME_FAST="fast",w_$X.FRAME_SLOW="slow",w_$X.FRAME_MOUSE="mouse",w_$X.FRAME_SLEEP="sleep",w_$X.FRAME_MOUSE_THREDHOLD=2e3,w_$t(w_$X,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),w_$X}(w_$TB),w_$HB=(function(w_$B){function w_$h(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,w_$h.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}w_$G(w_$h,"laya.media.SoundNode",w_$TB);var w_$l=w_$h.prototype;w_$l._onParentChange=function(){this.target=this.parent},w_$l.play=function(w_$B,w_$h){void 0===w_$B&&(w_$B=1),isNaN(w_$B)&&(w_$B=1),this.url&&(this.stop(),this._channel=w_$a.playSound(this.url,w_$B,null,w_$h))},w_$l.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},w_$l._setPlayAction=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$A&&(w_$A=!0),this[w_$l]&&w_$B&&(w_$A?w_$B.on(w_$h,this,this[w_$l]):w_$B.off(w_$h,this,this[w_$l]))},w_$l._setPlayActions=function(w_$B,w_$h,w_$l,w_$A){if(void 0===w_$A&&(w_$A=!0),w_$B&&w_$h){var w_$n,w_$s=w_$h.split(","),w_$X=0;for(w_$n=w_$s.length,w_$X=0;w_$X<w_$n;w_$X++)this._setPlayAction(w_$B,w_$s[w_$X],w_$l,w_$A)}},w_$i(0,w_$l,"playEvent",null,function(w_$B){(this._playEvents=w_$B)&&this._tar&&this._setPlayActions(this._tar,w_$B,"play")}),w_$i(0,w_$l,"target",null,function(w_$B){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=w_$B,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),w_$i(0,w_$l,"stopEvent",null,function(w_$B){(this._stopEvents=w_$B)&&this._tar&&this._setPlayActions(this._tar,w_$B,"stop")})}(),function(w_$B){function w_$h(){this._src=null,this._onload=null,this._onerror=null,w_$h.__super.call(this)}w_$G(w_$h,"laya.resource.FileBitmap",w_$iB);var w_$l=w_$h.prototype;return w_$i(0,w_$l,"src",function(){return this._src},function(w_$B){this._src=w_$B}),w_$i(0,w_$l,"onload",null,function(w_$B){}),w_$i(0,w_$l,"onerror",null,function(w_$B){}),w_$h}()),w_$yB=function(w_$B){function w_$l(w_$B,w_$h){this._is2D=!1,w_$l.__super.call(this);var w_$A=this;if(this._source=this,"2D"===w_$B||"AUTO"===w_$B&&!w_$M.isWebGL){this._is2D=!0,this._source=w_$h||w_$d.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var w_$n=this;w_$n.getContext=function(w_$B,w_$h){if(w_$A._ctx)return w_$A._ctx;var w_$l=w_$A._ctx=w_$A._source.getContext(w_$B,w_$h);return w_$l&&(w_$l._canvas=w_$n,w_$M.isFlash||w_$d.onLimixiu||(w_$l.size=function(w_$B,w_$h){})),w_$l}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}w_$G(w_$l,"laya.resource.HTMLCanvas",w_$iB);var w_$h=w_$l.prototype;return w_$h.clear=function(){this._ctx&&this._ctx.clear()},w_$h.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},w_$h.release=function(){},w_$h._setContext=function(w_$B){this._ctx=w_$B},w_$h.getContext=function(w_$B,w_$h){return this._ctx?this._ctx:this._ctx=w_$l._createContext(this)},w_$h.getMemSize=function(){return 0},w_$h.size=function(w_$B,w_$h){(this._w!=w_$B||this._h!=w_$h||this._source&&(this._source.width!=w_$B||this._source.height!=w_$h))&&(this._w=w_$B,this._h=w_$h,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(w_$B,w_$h),this._source&&(this._source.height=w_$h,this._source.width=w_$B))},w_$h.getCanvas=function(){return this._source},w_$h.toBase64=function(w_$B,w_$h,w_$l){if(this._source)if(w_$M.isConchApp&&this._source.toBase64)this._source.toBase64(w_$B,w_$h,w_$l);else{var w_$A=this._source.toDataURL(w_$B,w_$h);w_$l.call(this,w_$A)}},w_$i(0,w_$h,"context",function(){return this._ctx}),w_$i(0,w_$h,"asBitmap",null,function(w_$B){}),w_$l.create=function(w_$B,w_$h){return new w_$l(w_$B,w_$h)},w_$l.TYPE2D="2D",w_$l.TYPE3D="3D",w_$l.TYPEAUTO="AUTO",w_$l._createContext=null,w_$l}(),w_$CB=(function(w_$B){function w_$t(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){throw w_$t.__super.call(this),new Error("不允许new！")}w_$G(w_$t,"laya.resource.HTMLSubImage",w_$iB),w_$t.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){return void 0===w_$Z&&(w_$Z=!1),new w_$t(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z)}}(),function(w_$B){function w_$T(){this._frames=null,this._url=null,w_$T.__super.call(this),this._setControlNode(this)}w_$G(w_$T,"laya.display.Animation",w_$B);var w_$h=w_$T.prototype;w_$h.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,w_$B),this._frames=null,this._labels=null},w_$h.play=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=!0),void 0===w_$l&&(w_$l=""),void 0===w_$A&&(w_$A=!0),w_$l&&this._setFramesFromCache(w_$l,w_$A),this._isPlaying=!0,this.index="string"==typeof w_$B?this._getFrameByLabel(w_$B):w_$B,this.loop=w_$h,this._actionName=w_$l,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},w_$h._setFramesFromCache=function(w_$B,w_$h){var w_$l;return void 0===w_$h&&(w_$h=!1),this._url&&(w_$B=this._url+"#"+w_$B),w_$B&&w_$T.framesMap[w_$B]?((w_$l=w_$T.framesMap[w_$B])instanceof Array?(this._frames=w_$T.framesMap[w_$B],this._count=this._frames.length):(w_$l.nodeRoot&&(w_$T.framesMap[w_$B]=this._parseGraphicAnimationByData(w_$l),w_$l=w_$T.framesMap[w_$B]),this._frames=w_$l.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=w_$l.interval),this._labels=this._copyLabels(w_$l.labels)),!0):(w_$h&&console.log("ani not found:",w_$B),!1)},w_$h._copyLabels=function(w_$B){if(!w_$B)return null;var w_$h,w_$l;for(w_$l in w_$h={},w_$B)w_$h[w_$l]=w_$e.copyArray([],w_$B[w_$l]);return w_$h},w_$h._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&w_$B.prototype._frameLoop.call(this)},w_$h._displayToIndex=function(w_$B){this._frames&&(this.graphics=this._frames[w_$B])},w_$h.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},w_$h.loadImages=function(w_$B,w_$h){return void 0===w_$h&&(w_$h=""),this._url="",this._setFramesFromCache(w_$h)||(this.frames=w_$T.framesMap[w_$h]?w_$T.framesMap[w_$h]:w_$T.createFrames(w_$B,w_$h)),this},w_$h.loadAtlas=function(w_$h,w_$l,w_$A){void 0===w_$A&&(w_$A=""),this._url="";var w_$n=this;function w_$B(w_$B){w_$h===w_$B&&(w_$n.frames=w_$T.framesMap[w_$A]?w_$T.framesMap[w_$A]:w_$T.createFrames(w_$h,w_$A),w_$l&&w_$l.run())}return w_$n._setFramesFromCache(w_$A)||(w_$ZB.getAtlas(w_$h)?w_$B(w_$h):w_$v.loader.load(w_$h,w_$H.create(null,w_$B,[w_$h]),null,"atlas")),this},w_$h.loadAnimation=function(w_$B,w_$h,w_$l){this._url=w_$B;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,w_$h&&w_$h.run()):!w_$l||w_$ZB.getAtlas(w_$l)?this._loadAnimationData(w_$B,w_$h,w_$l):w_$v.loader.load(w_$l,w_$H.create(this,this._loadAnimationData,[w_$B,w_$h,w_$l]),null,"atlas"),this},w_$h._loadAnimationData=function(w_$Z,w_$t,w_$B){var w_$P=this;if(!w_$B||w_$ZB.getAtlas(w_$B)){var w_$G=this;w_$ZB.getRes(w_$Z)?w_$h(w_$Z):w_$v.loader.load(w_$Z,w_$H.create(null,w_$h,[w_$Z]),null,"json"),w_$ZB.clearRes(w_$Z)}else console.warn("atlas load fail:"+w_$B);function w_$h(w_$B){if(w_$ZB.getRes(w_$B)&&w_$Z===w_$B){var w_$h;if(w_$T.framesMap[w_$Z+"#"])w_$G._setFramesFromCache(w_$P._actionName,!0),w_$P.index=0,w_$P._checkResumePlaying();else{var w_$l=w_$G._parseGraphicAnimation(w_$ZB.getRes(w_$Z));if(!w_$l)return;var w_$A,w_$n=w_$l.animationList,w_$s=0,w_$X=w_$n.length;for(w_$s=0;w_$s<w_$X;w_$s++)w_$h=w_$n[w_$s],w_$T.framesMap[w_$Z+"#"+w_$h.name]=w_$h,w_$A||(w_$A=w_$h);w_$A&&(w_$T.framesMap[w_$Z+"#"]=w_$A,w_$G._setFramesFromCache(w_$P._actionName,!0),w_$P.index=0),w_$P._checkResumePlaying()}w_$t&&w_$t.run()}}},w_$h._parseGraphicAnimation=function(w_$B){return w_$vB.parseAnimationData(w_$B)},w_$h._parseGraphicAnimationByData=function(w_$B){return w_$vB.parseAnimationByData(w_$B)},w_$i(0,w_$h,"frames",function(){return this._frames},function(w_$B){(this._frames=w_$B)&&(this._count=w_$B.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),w_$i(0,w_$h,"autoPlay",null,function(w_$B){w_$B?this.play():this.stop()}),w_$i(0,w_$h,"source",null,function(w_$B){-1<w_$B.indexOf(".ani")?this.loadAnimation(w_$B):-1<w_$B.indexOf(".json")||-1<w_$B.indexOf("als")||-1<w_$B.indexOf("atlas")?this.loadAtlas(w_$B):this.loadImages(w_$B.split(","))}),w_$i(0,w_$h,"autoAnimation",null,function(w_$B){this.play(0,!0,w_$B,!1)}),w_$T.createFrames=function(w_$B,w_$h){var w_$l,w_$A,w_$n=0,w_$s=0;if("string"==typeof w_$B){var w_$X=w_$ZB.getAtlas(w_$B);if(w_$X&&w_$X.length)for(w_$l=[],w_$n=0,w_$s=w_$X.length;w_$n<w_$s;w_$n++)(w_$A=new w_$S.createGraphics).drawTexture(w_$ZB.getRes(w_$X[w_$n]),0,0),w_$l.push(w_$A)}else if(w_$B instanceof Array)for(w_$l=[],w_$n=0,w_$s=w_$B.length;w_$n<w_$s;w_$n++)(w_$A=new w_$S.createGraphics).loadImage(w_$B[w_$n],0,0),w_$l.push(w_$A);return w_$h&&(w_$T.framesMap[w_$h]=w_$l),w_$l},w_$T.clearCache=function(w_$B){var w_$h,w_$l=w_$T.framesMap,w_$A=w_$B+"#";for(w_$h in w_$l)w_$h!==w_$B&&0!=w_$h.indexOf(w_$A)||delete w_$T.framesMap[w_$h]},w_$T.framesMap={}}(w_$$B),function(w_$B){function w_$s(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,w_$s.__super.call(this),null==w_$s._sortIndexFun&&(w_$s._sortIndexFun=w_$u.sortByKey("index",!1,!0))}w_$G(w_$s,"laya.display.FrameAnimation",w_$B);var w_$h=w_$s.prototype;return w_$h._setUp=function(w_$B,w_$h){this._labels=null,this._animationNewFrames=null,this._targetDic=w_$B,this._animationData=w_$h,this.interval=1e3/w_$h.frameRate,w_$h.parsed?(this._count=w_$h.count,this._labels=w_$h.labels,this._animationNewFrames=w_$h.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),w_$h.parsed=!0,w_$h.labels=this._labels,w_$h.count=this._count,w_$h.animationNewFrames=this._animationNewFrames},w_$h.clear=function(){w_$B.prototype.clear.call(this),this._targetDic=null,this._animationData=null},w_$h._displayToIndex=function(w_$B){if(this._animationData){w_$B<0&&(w_$B=0),w_$B>this._count&&(w_$B=this._count);var w_$h=this._animationData.nodes,w_$l=0,w_$A=w_$h.length;for(w_$l=0;w_$l<w_$A;w_$l++)this._displayNodeToFrame(w_$h[w_$l],w_$B)}},w_$h._displayNodeToFrame=function(w_$B,w_$h,w_$l){w_$l||(w_$l=this._targetDic);var w_$A=w_$l[w_$B.target];if(w_$A){var w_$n,w_$s,w_$X,w_$Z=w_$B.frames,w_$t=w_$B.keys,w_$P=0,w_$G=w_$t.length;for(w_$P=0;w_$P<w_$G;w_$P++)w_$X=(w_$s=w_$Z[w_$n=w_$t[w_$P]]).length>w_$h?w_$s[w_$h]:w_$s[w_$s.length-1],w_$A[w_$n]=w_$X}},w_$h._calculateDatas=function(){if(this._animationData){var w_$B,w_$h=this._animationData.nodes,w_$l=0,w_$A=w_$h.length;for(w_$l=this._count=0;w_$l<w_$A;w_$l++)w_$B=w_$h[w_$l],this._calculateNodeKeyFrames(w_$B);this._count+=1}},w_$h._calculateNodeKeyFrames=function(w_$B){var w_$h,w_$l,w_$A=w_$B.keyframes,w_$n=w_$B.target;for(w_$h in w_$B.frames||(w_$B.frames={}),w_$B.keys?w_$B.keys.length=0:w_$B.keys=[],w_$B.initValues||(w_$B.initValues={}),w_$A)w_$l=w_$A[w_$h],w_$B.frames[w_$h]||(w_$B.frames[w_$h]=[]),this._targetDic&&this._targetDic[w_$n]&&(w_$B.initValues[w_$h]=this._targetDic[w_$n][w_$h]),w_$l.sort(w_$s._sortIndexFun),w_$B.keys.push(w_$h),this._calculateNodePropFrames(w_$l,w_$B.frames[w_$h],w_$h,w_$n)},w_$h.resetToInitState=function(){if(this._targetDic&&this._animationData){var w_$B,w_$h,w_$l=this._animationData.nodes,w_$A=0,w_$n=w_$l.length;for(w_$A=0;w_$A<w_$n;w_$A++)if(w_$h=(w_$B=w_$l[w_$A]).initValues){var w_$s,w_$X=this._targetDic[w_$B.target];if(w_$X)for(w_$s in w_$h)w_$X[w_$s]=w_$h[w_$s]}}},w_$h._calculateNodePropFrames=function(w_$B,w_$h,w_$l,w_$A){var w_$n=0,w_$s=w_$B.length-1;if(0<w_$s){for(w_$h.length=w_$B[w_$s].index+1,w_$n=0;w_$n<w_$s;w_$n++)this._dealKeyFrame(w_$B[w_$n]),this._calculateFrameValues(w_$B[w_$n],w_$B[w_$n+1],w_$h);this._dealKeyFrame(w_$B[w_$n])}0==w_$s&&(w_$h[w_$B[0].index]=w_$B[0].value,this._animationNewFrames&&(this._animationNewFrames[w_$B[0].index]=!0))},w_$h._dealKeyFrame=function(w_$B){w_$B.label&&""!=w_$B.label&&this.addLabel(w_$B.label,w_$B.index)},w_$h._calculateFrameValues=function(w_$B,w_$h,w_$l){var w_$A,w_$n=0,w_$s=w_$B.index,w_$X=w_$h.index,w_$Z=w_$B.value,w_$t=w_$h.value-w_$B.value,w_$P=w_$X-w_$s;if(w_$X>this._count&&(this._count=w_$X),w_$B.tween)for(null==(w_$A=w_$m[w_$B.tweenMethod])&&(w_$A=w_$m.linearNone),w_$n=w_$s;w_$n<w_$X;w_$n++)w_$l[w_$n]=w_$A(w_$n-w_$s,w_$Z,w_$t,w_$P),this._animationNewFrames&&(this._animationNewFrames[w_$n]=!0);else for(w_$n=w_$s;w_$n<w_$X;w_$n++)w_$l[w_$n]=w_$Z;this._animationNewFrames&&(this._animationNewFrames[w_$B.index]=!0,this._animationNewFrames[w_$h.index]=!0),w_$l[w_$h.index]=w_$h.value},w_$s._sortIndexFun=null,w_$s}(w_$$B)),w_$oB=function(w_$h){function w_$n(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",w_$n.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=w_$VB.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}w_$G(w_$n,"laya.display.Input",w_$h);var w_$B=w_$n.prototype;return w_$B.setSelection=function(w_$B,w_$h){this.focus=!0,laya.display.Input.inputElement.selectionStart=w_$B,laya.display.Input.inputElement.selectionEnd=w_$h},w_$B._onUnDisplay=function(w_$B){this.focus=!1},w_$B._onMouseDown=function(w_$B){this.focus=!0},w_$B._syncInputTransform=function(){var w_$B=this.nativeInput,w_$h=w_$e.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),w_$l=this._width-this.padding[1]-this.padding[3],w_$A=this._height-this.padding[0]-this.padding[2];w_$M.isConchApp?(w_$B.setScale(w_$h.scaleX,w_$h.scaleY),w_$B.setSize(w_$l,w_$A),w_$B.setPos(w_$h.x,w_$h.y)):(w_$n.inputContainer.style.transform=w_$n.inputContainer.style.webkitTransform="scale("+w_$h.scaleX+","+w_$h.scaleY+") rotate("+w_$v.stage.canvasDegree+"deg)",w_$B.style.width=w_$l+"px",w_$B.style.height=w_$A+"px",w_$n.inputContainer.style.left=w_$h.x+"px",w_$n.inputContainer.style.top=w_$h.y+"px")},w_$B.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},w_$B._setInputMethod=function(){w_$n.input.parentElement&&w_$n.inputContainer.removeChild(w_$n.input),w_$n.area.parentElement&&w_$n.inputContainer.removeChild(w_$n.area),w_$n.inputElement=this._multiline?w_$n.area:w_$n.input,w_$n.inputContainer.appendChild(w_$n.inputElement),w_$VB.RightToLeft&&(w_$n.inputElement.style.direction="rtl")},w_$B._focusIn=function(){laya.display.Input.isInputting=!0;var w_$B=this.nativeInput;this._focus=!0;var w_$h=w_$B.style;w_$h.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),w_$B.readOnly=!this._editable,w_$M.isConchApp&&(w_$B.setType(this._type),w_$B.setForbidEdit(!this._editable)),w_$B.maxLength=this._maxChars;this.padding;if(w_$B.type=this._type,w_$B.value=this._content,w_$B.placeholder=this._prompt,w_$v.stage.off("keydown",this,this._onKeyDown),w_$v.stage.on("keydown",this,this._onKeyDown),(w_$v.stage.focus=this).event("focus"),w_$d.onPC&&w_$B.focus(),!w_$d.onMiniGame){this._text;this._text=null}this.typeset(),w_$B.setColor(this._originColor),w_$B.setFontSize(this.fontSize),w_$B.setFontFace(w_$d.onIPhone&&w_$VB._fontFamilyMap[this.font]||this.font),w_$M.isConchApp&&w_$B.setMultiAble&&w_$B.setMultiAble(this._multiline),w_$h.lineHeight=this.leading+this.fontSize+"px",w_$h.fontStyle=this.italic?"italic":"normal",w_$h.fontWeight=this.bold?"bold":"normal",w_$h.textAlign=this.align,w_$h.padding="0 0",this._syncInputTransform(),!w_$M.isConchApp&&w_$d.onPC&&w_$v.timer.frameLoop(1,this,this._syncInputTransform)},w_$B._setPromptColor=function(){(w_$n.promptStyleDOM=w_$d.getElementById("promptStyle"))||((w_$n.promptStyleDOM=w_$d.createElement("style")).setAttribute("id","promptStyle"),w_$d.document.head.appendChild(w_$n.promptStyleDOM)),w_$n.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},w_$B._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(w_$v.superSet(w_$VB,this,"text",this._content),w_$v.superSet(w_$VB,this,"color",this._originColor)):(w_$v.superSet(w_$VB,this,"text",this._prompt),w_$v.superSet(w_$VB,this,"color",this._promptColor)),w_$v.stage.off("keydown",this,this._onKeyDown),w_$v.stage.focus=null,this.event("blur"),w_$M.isConchApp&&this.nativeInput.blur(),w_$d.onPC&&w_$v.timer.clear(this,this._syncInputTransform)},w_$B._onKeyDown=function(w_$B){13===w_$B.keyCode&&(w_$d.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},w_$B.changeText=function(w_$B){this._content=w_$B,this._focus?(this.nativeInput.value=w_$B||"",this.event("change")):w_$h.prototype.changeText.call(this,w_$B)},w_$i(0,w_$B,"color",w_$h.prototype._$get_color,function(w_$B){this._focus&&this.nativeInput.setColor(w_$B),w_$v.superSet(w_$VB,this,"color",this._content?w_$B:this._promptColor),this._originColor=w_$B}),w_$i(0,w_$B,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(w_$B){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),w_$i(0,w_$B,"multiline",function(){return this._multiline},function(w_$B){this._multiline=w_$B,this.valign=w_$B?"top":"middle"}),w_$i(0,w_$B,"maxChars",function(){return this._maxChars},function(w_$B){w_$B<=0&&(w_$B=1e5),this._maxChars=w_$B}),w_$i(0,w_$B,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(w_$B){w_$v.superSet(w_$VB,this,"color",this._originColor),w_$B+="",this._focus?(this.nativeInput.value=w_$B||"",this.event("change")):(this._multiline||(w_$B=w_$B.replace(/\r?\n/g,"")),(this._content=w_$B)?w_$v.superSet(w_$VB,this,"text",w_$B):(w_$v.superSet(w_$VB,this,"text",this._prompt),w_$v.superSet(w_$VB,this,"color",this.promptColor)))}),w_$i(0,w_$B,"nativeInput",function(){return this._multiline?w_$n.area:w_$n.input}),w_$i(0,w_$B,"prompt",function(){return this._prompt},function(w_$B){!this._text&&w_$B&&w_$v.superSet(w_$VB,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?w_$v.superSet(w_$VB,this,"text",this._text==this._prompt?w_$B:this._text):w_$v.superSet(w_$VB,this,"text",w_$B),this._prompt=w_$VB.langPacks&&w_$VB.langPacks[w_$B]?w_$VB.langPacks[w_$B]:w_$B}),w_$i(0,w_$B,"focus",function(){return this._focus},function(w_$B){var w_$h=this.nativeInput;this._focus!==w_$B&&(w_$B?(w_$h.target?w_$h.target._focusOut():this._setInputMethod(),(w_$h.target=this)._focusIn()):(w_$h.target=null,this._focusOut(),w_$d.document.body.scrollTop=0,w_$h.blur(),w_$M.isConchApp?w_$h.setPos(-1e4,-1e4):w_$n.inputContainer.contains(w_$h)&&w_$n.inputContainer.removeChild(w_$h)))}),w_$i(0,w_$B,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(w_$B){w_$B?(-1<(w_$B="[^"+w_$B+"]").indexOf("^^")&&(w_$B=w_$B.replace("^^","")),this._restrictPattern=new RegExp(w_$B,"g")):this._restrictPattern=null}),w_$i(0,w_$B,"editable",function(){return this._editable},function(w_$B){this._editable=w_$B,w_$M.isConchApp&&w_$n.input.setForbidEdit(!w_$B)}),w_$i(0,w_$B,"promptColor",function(){return this._promptColor},function(w_$B){this._promptColor=w_$B,this._content||w_$v.superSet(w_$VB,this,"color",w_$B)}),w_$i(0,w_$B,"type",function(){return this._type},function(w_$B){this._getCSSStyle().password="password"==w_$B,this._type=w_$B,w_$M.isConchApp&&this.nativeInput.setType(w_$B)}),w_$i(0,w_$B,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(w_$B){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),w_$i(0,w_$B,"asPassword",function(){return this._getCSSStyle().password},function(w_$B){this._getCSSStyle().password=w_$B,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),w_$n.__init__=function(){w_$n._createInputElement(),w_$d.onMobile&&w_$M.canvas.addEventListener(w_$n.IOS_IFRAME?w_$d.onMiniGame?"touchend":"click":"touchend",w_$n._popupInputMethod)},w_$n._popupInputMethod=function(w_$B){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},w_$n._createInputElement=function(){w_$n._initInput(w_$n.area=w_$d.createElement("textarea")),w_$n._initInput(w_$n.input=w_$d.createElement("input")),(w_$n.inputContainer=w_$d.createElement("div")).style.position="absolute",w_$n.inputContainer.style.zIndex=1e5,w_$d.container.appendChild(w_$n.inputContainer),w_$n.inputContainer.setPos=function(w_$B,w_$h){w_$n.inputContainer.style.left=w_$B+"px",w_$n.inputContainer.style.top=w_$h+"px"}},w_$n._initInput=function(w_$h){var w_$B=w_$h.style;w_$B.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",w_$B.resize="none",w_$B.backgroundColor="transparent",w_$B.border="none",w_$B.outline="none",w_$B.zIndex=1,w_$h.addEventListener("input",w_$n._processInputting),w_$h.addEventListener("mousemove",w_$n._stopEvent),w_$h.addEventListener("mousedown",w_$n._stopEvent),w_$h.addEventListener("touchmove",w_$n._stopEvent),w_$h.setFontFace=function(w_$B){w_$h.style.fontFamily=w_$B},w_$M.isConchApp||(w_$h.setColor=function(w_$B){w_$h.style.color=w_$B},w_$h.setFontSize=function(w_$B){w_$h.style.fontSize=w_$B+"px"})},w_$n._processInputting=function(w_$B){var w_$h=laya.display.Input.inputElement.target;if(w_$h){var w_$l=laya.display.Input.inputElement.value;w_$h._restrictPattern&&(w_$l=w_$l.replace(/\u2006|\x27/g,""),w_$h._restrictPattern.test(w_$l)&&(w_$l=w_$l.replace(w_$h._restrictPattern,""),laya.display.Input.inputElement.value=w_$l)),w_$h._text=w_$l,w_$h.event("input")}},w_$n._stopEvent=function(w_$B){"touchmove"==w_$B.type&&w_$B.preventDefault(),w_$B.stopPropagation&&w_$B.stopPropagation()},w_$n.TYPE_TEXT="text",w_$n.TYPE_PASSWORD="password",w_$n.TYPE_EMAIL="email",w_$n.TYPE_URL="url",w_$n.TYPE_NUMBER="number",w_$n.TYPE_RANGE="range",w_$n.TYPE_DATE="date",w_$n.TYPE_MONTH="month",w_$n.TYPE_WEEK="week",w_$n.TYPE_TIME="time",w_$n.TYPE_DATE_TIME="datetime",w_$n.TYPE_DATE_TIME_LOCAL="datetime-local",w_$n.TYPE_SEARCH="search",w_$n.input=null,w_$n.area=null,w_$n.inputElement=null,w_$n.inputContainer=null,w_$n.confirmButton=null,w_$n.promptStyleDOM=null,w_$n.inputHeight=45,w_$n.isInputting=!1,w_$n.stageMatrix=null,w_$t(w_$n,["IOS_IFRAME",function(){return this.IOS_IFRAME=w_$d.onIOS&&w_$d.window.top!=w_$d.window.self}]),w_$n}(w_$VB),w_$uB=function(w_$B){function w_$l(w_$B,w_$h){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,w_$l.__super.call(this),w_$B&&this._init_(w_$B,w_$h)}w_$G(w_$l,"laya.resource.HTMLImage",w_$HB);var w_$h=w_$l.prototype;return w_$h._init_=function(w_$B,w_$h){this._src=w_$B,this._source=new w_$d.window.Image,w_$h&&(w_$h.onload&&(this.onload=w_$h.onload),w_$h.onerror&&(this.onerror=w_$h.onerror),w_$h.onCreate&&w_$h.onCreate(this)),0!=w_$B.indexOf("data:image")&&(this._source.crossOrigin=""),w_$B&&(this._source.src=w_$B)},w_$h.recreateResource=function(){var w_$B=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var w_$h=this;this._source=new w_$d.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(w_$h._needReleaseAgain)return w_$h._needReleaseAgain=!1,w_$h._source.onload=null,void(w_$h._source=null);w_$h._source.onload=null,w_$h.memorySize=w_$B._w*w_$B._h*4,w_$h._recreateLock=!1,w_$h.completeCreate()},this._source.src=this._src}},w_$h.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},w_$h.onresize=function(){this._w=this._source.width,this._h=this._source.height},w_$i(0,w_$h,"onload",null,function(w_$B){var w_$h=this;this._onload=w_$B,this._source&&(this._source.onload=null!=this._onload?function(){w_$h.onresize(),w_$h._onload()}:null)}),w_$i(0,w_$h,"onerror",null,function(w_$B){var w_$h=this;this._onerror=w_$B,this._source&&(this._source.onerror=null!=this._onerror?function(){w_$h._onerror()}:null)}),w_$i(0,w_$h,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(w_$B){this._enableMerageInAtlas=w_$B,w_$M.isConchApp&&this._source&&(this._source.enableMerageInAtlas=w_$B)}),w_$l.create=function(w_$B,w_$h){return new w_$l(w_$B,w_$h)},w_$l}(),w_$vB=(function(w_$s){function w_$B(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,w_$B.__super.call(this)}w_$G(w_$B,"laya.display.EffectAnimation",w_$s);var w_$h=w_$B.prototype;w_$h._onOtherBegin=function(w_$B){w_$B!=this&&this.stop()},w_$h.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},w_$h._onPlayAction=function(){this.play(0,!1)},w_$h.play=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=!0),void 0===w_$l&&(w_$l=""),void 0===w_$A&&(w_$A=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,w_$B,w_$h,w_$l,w_$A))},w_$h._recordInitData=function(){if(this._aniKeys){var w_$B,w_$h,w_$l=0;for(w_$B=this._aniKeys.length,w_$l=0;w_$l<w_$B;w_$l++)w_$h=this._aniKeys[w_$l],this._initData[w_$h]=this._target[w_$h]}},w_$h._displayToIndex=function(w_$B){if(this._animationData){w_$B<0&&(w_$B=0),w_$B>this._count&&(w_$B=this._count);var w_$h=this._animationData.nodes,w_$l=0,w_$A=w_$h.length;for(w_$A=1<w_$A?1:w_$A,w_$l=0;w_$l<w_$A;w_$l++)this._displayNodeToFrame(w_$h[w_$l],w_$B)}},w_$h._displayNodeToFrame=function(w_$B,w_$h,w_$l){if(this._target){var w_$A;w_$A=this._target;var w_$n,w_$s,w_$X,w_$Z,w_$t=w_$B.frames,w_$P=w_$B.keys,w_$G=0,w_$T=w_$P.length;w_$Z=w_$B.secondFrames;var w_$b,w_$Q,w_$i,w_$$,w_$V=0;for(w_$G=0;w_$G<w_$T;w_$G++)w_$s=w_$t[w_$n=w_$P[w_$G]],w_$X=-1==(w_$V=w_$Z[w_$n])?this._initData[w_$n]:w_$h<w_$V?(w_$i=(w_$Q=w_$B.keyframes[w_$n])[0]).tween?(null==(w_$b=w_$m[w_$i.tweenMethod])&&(w_$b=w_$m.linearNone),w_$$=w_$Q[1],w_$b(w_$h,this._initData[w_$n],w_$$.value-this._initData[w_$n],w_$$.index)):this._initData[w_$n]:w_$s.length>w_$h?w_$s[w_$h]:w_$s[w_$s.length-1],w_$A[w_$n]=w_$X}},w_$h._calculateNodeKeyFrames=function(w_$B){w_$s.prototype._calculateNodeKeyFrames.call(this,w_$B);var w_$h,w_$l,w_$A,w_$n=w_$B.keyframes;w_$B.target;for(w_$h in w_$A={},w_$B.secondFrames=w_$A,w_$n)(w_$l=w_$n[w_$h]).length<=1?w_$A[w_$h]=-1:w_$A[w_$h]=w_$l[1].index},w_$i(0,w_$h,"target",function(){return this._target},function(w_$B){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=w_$B,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),w_$i(0,w_$h,"playEvent",null,function(w_$B){(this._playEvents=w_$B)&&this.addEvent()}),w_$i(0,w_$h,"effectData",null,function(w_$B){var w_$h;w_$B&&((w_$h=w_$B.animations)&&w_$h[0]&&(this._setUp({},w_$h[0]),w_$h[0].nodes&&w_$h[0].nodes[0]&&(this._aniKeys=w_$h[0].nodes[0].keys)))}),w_$i(0,w_$h,"effectClass",null,function(w_$B){var w_$h,w_$l;(this._effectClass=w_$p.getClass(w_$B),this._effectClass)&&((w_$h=this._effectClass.uiView)&&(w_$l=w_$h.animations)&&w_$l[0]&&(this._setUp({},w_$l[0]),w_$l[0].nodes&&w_$l[0].nodes[0]&&(this._aniKeys=w_$l[0].nodes[0].keys)))}),w_$B.EffectAnimationBegin="effectanimationbegin"}(w_$CB),function(w_$h){var w_$z;function w_$a(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,w_$a.__super.call(this)}w_$G(w_$a,"laya.utils.GraphicAnimation",w_$h);var w_$B=w_$a.prototype;return w_$B._parseNodeList=function(w_$B){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[w_$B.compId]=w_$B.props,w_$B.compId&&this._nodeList.push(w_$B.compId);var w_$h=w_$B.child;if(w_$h){var w_$l=0,w_$A=w_$h.length;for(w_$l=0;w_$l<w_$A;w_$l++)this._parseNodeList(w_$h[w_$l])}},w_$B._calGraphicData=function(w_$B){var w_$h;if(this._setUp(null,w_$B),this._createGraphicData(),this._nodeIDAniDic)for(w_$h in this._nodeIDAniDic)this._nodeIDAniDic[w_$h]=null},w_$B._createGraphicData=function(){var w_$B,w_$h=[],w_$l=0,w_$A=this.count,w_$n=this._animationNewFrames;for(w_$n||(w_$n=[]),w_$l=0;w_$l<w_$A;w_$l++)!w_$n[w_$l]&&w_$B||(w_$B=this._createFrameGraphic(w_$l)),w_$h.push(w_$B);this._gList=w_$h},w_$B._createFrameGraphic=function(w_$B){var w_$h=w_$S.createGraphics();return w_$a._rootMatrix||(w_$a._rootMatrix=new w_$N),this._updateNodeGraphic(this._rootNode,w_$B,w_$a._rootMatrix,w_$h),w_$h},w_$B._updateNodeGraphic=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s;void 0===w_$n&&(w_$n=1);var w_$X,w_$Z,w_$t,w_$P=(w_$s=this._nodeGDic[w_$B.compId]=this._getNodeGraphicData(w_$B.compId,w_$h,this._nodeGDic[w_$B.compId])).alpha*w_$n;if(!(w_$P<.01)&&(w_$s.resultTransform||(w_$s.resultTransform=w_$N.create()),w_$X=w_$s.resultTransform,w_$N.mul(w_$s.transform,w_$l,w_$X),w_$s.skin&&(w_$Z=this._getTextureByUrl(w_$s.skin))&&(w_$X._checkTransform()?(w_$A.drawTexture(w_$Z,0,0,w_$s.width,w_$s.height,w_$X,w_$P),w_$s.resultTransform=null):w_$A.drawTexture(w_$Z,w_$X.tx,w_$X.ty,w_$s.width,w_$s.height,null,w_$P)),w_$t=w_$B.child)){var w_$G,w_$T=0;for(w_$G=w_$t.length,w_$T=0;w_$T<w_$G;w_$T++)this._updateNodeGraphic(w_$t[w_$T],w_$h,w_$X,w_$A,w_$P)}},w_$B._updateNoChilds=function(w_$B,w_$h){if(w_$B.skin){var w_$l=this._getTextureByUrl(w_$B.skin);if(w_$l){var w_$A=w_$B.transform;w_$A._checkTransform();!w_$A.bTransform?w_$h.drawTexture(w_$l,w_$A.tx,w_$A.ty,w_$B.width,w_$B.height,null,w_$B.alpha):w_$h.drawTexture(w_$l,0,0,w_$B.width,w_$B.height,w_$A.clone(),w_$B.alpha)}}},w_$B._updateNodeGraphic2=function(w_$B,w_$h,w_$l){var w_$A;if(w_$A=this._nodeGDic[w_$B.compId]=this._getNodeGraphicData(w_$B.compId,w_$h,this._nodeGDic[w_$B.compId]),w_$B.child){var w_$n=w_$A.transform;w_$n._checkTransform();var w_$s,w_$X;w_$X=(w_$s=!w_$n.bTransform)&&(0!=w_$n.tx||0!=w_$n.ty);var w_$Z,w_$t,w_$P;if((w_$Z=w_$n.bTransform||1!=w_$A.alpha)&&w_$l.save(),1!=w_$A.alpha&&w_$l.alpha(w_$A.alpha),w_$s?w_$X&&w_$l.translate(w_$n.tx,w_$n.ty):w_$l.transform(w_$n.clone()),w_$t=w_$B.child,w_$A.skin&&(w_$P=this._getTextureByUrl(w_$A.skin))&&w_$l.drawTexture(w_$P,0,0,w_$A.width,w_$A.height),w_$t){var w_$G,w_$T=0;for(w_$G=w_$t.length,w_$T=0;w_$T<w_$G;w_$T++)this._updateNodeGraphic2(w_$t[w_$T],w_$h,w_$l)}w_$Z?w_$l.restore():w_$s?w_$X&&w_$l.translate(-w_$n.tx,-w_$n.ty):w_$l.transform(w_$n.clone().invert())}else this._updateNoChilds(w_$A,w_$l)},w_$B._calculateNodeKeyFrames=function(w_$B){w_$h.prototype._calculateNodeKeyFrames.call(this,w_$B),this._nodeIDAniDic[w_$B.target]=w_$B},w_$B.getNodeDataByID=function(w_$B){return this._nodeIDAniDic[w_$B]},w_$B._getParams=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$a._temParam;w_$n.length=w_$h.length;var w_$s=0,w_$X=w_$h.length;for(w_$s=0;w_$s<w_$X;w_$s++)w_$n[w_$s]=this._getObjVar(w_$B,w_$h[w_$s][0],w_$l,w_$h[w_$s][1],w_$A);return w_$n},w_$B._getObjVar=function(w_$B,w_$h,w_$l,w_$A,w_$n){if(w_$B.hasOwnProperty(w_$h)){var w_$s=w_$B[w_$h];if(w_$l>=w_$s.length&&(w_$l=w_$s.length-1),null!=w_$B[w_$h][w_$l])return w_$B[w_$h][w_$l]}return w_$n.hasOwnProperty(w_$h)?w_$n[w_$h]:w_$A},w_$B._getNodeGraphicData=function(w_$B,w_$h,w_$l){w_$l||(w_$l=w_$z.create()),w_$l.transform?w_$l.transform.identity():w_$l.transform=w_$N.create();var w_$A=this.getNodeDataByID(w_$B);if(!w_$A)return w_$l;var w_$n,w_$s,w_$X=w_$A.frames,w_$Z=this._getParams(w_$X,w_$a._drawTextureCmd,w_$h,this._nodeDefaultProps[w_$B]),w_$t=w_$Z[0],w_$P=NaN,w_$G=NaN,w_$T=w_$Z[5],w_$b=w_$Z[6],w_$Q=w_$Z[13],w_$i=w_$Z[14],w_$$=w_$Z[7],w_$V=w_$Z[8],w_$J=w_$Z[9],w_$H=w_$Z[11],w_$y=w_$Z[12];w_$P=w_$Z[3],w_$G=w_$Z[4],0!=w_$P&&0!=w_$G||(w_$t=null),-1==w_$P&&(w_$P=0),-1==w_$G&&(w_$G=0),w_$l.skin=w_$t,w_$l.width=w_$P,w_$l.height=w_$G,w_$t&&((w_$n=this._getTextureByUrl(w_$t))?(w_$P||(w_$P=w_$n.sourceWidth),w_$G||(w_$G=w_$n.sourceHeight)):console.warn("lost skin:",w_$t,",you may load pics first")),w_$l.alpha=w_$Z[10],w_$s=w_$l.transform,0!=w_$Q&&(w_$T=w_$Q*w_$P),0!=w_$i&&(w_$b=w_$i*w_$G),0==w_$T&&0==w_$b||w_$s.translate(-w_$T,-w_$b);var w_$C=null;if(w_$J||1!==w_$$||1!==w_$V||w_$H||w_$y){(w_$C=w_$a._tempMt).identity(),w_$C.bTransform=!0;var w_$o=.0174532922222222*(w_$J-w_$H),w_$u=.0174532922222222*(w_$J+w_$y),w_$v=Math.cos(w_$u),w_$U=Math.sin(w_$u),w_$x=Math.sin(w_$o),w_$w=Math.cos(w_$o);w_$C.a=w_$$*w_$v,w_$C.b=w_$$*w_$U,w_$C.c=-w_$V*w_$x,w_$C.d=w_$V*w_$w,w_$C.tx=w_$C.ty=0}return w_$C&&(w_$s=w_$N.mul(w_$s,w_$C,w_$s)),w_$s.translate(w_$Z[1],w_$Z[2]),w_$l},w_$B._getTextureByUrl=function(w_$B){return w_$ZB.getRes(w_$B)},w_$B.setAniData=function(w_$B,w_$h){if(w_$B.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=w_$B,this._parseNodeList(w_$B);var w_$l,w_$A={},w_$n=[],w_$s=w_$B.animations,w_$X=0,w_$Z=w_$s.length;for(w_$X=0;w_$X<w_$Z;w_$X++)if(w_$l=w_$s[w_$X],this._labels=null,(!w_$h||w_$h==w_$l.name)&&w_$l){try{this._calGraphicData(w_$l)}catch(w_$B){console.warn("parse animation fail:"+w_$l.name+",empty animation created"),this._gList=[]}var w_$t={};w_$t.interval=1e3/w_$l.frameRate,w_$t.frames=this._gList,w_$t.labels=this._labels,w_$t.name=w_$l.name,w_$n.push(w_$t),w_$A[w_$l.name]=w_$t}this.animationList=w_$n,this.animationDic=w_$A}w_$a._temParam.length=0},w_$B.parseByData=function(w_$B){var w_$h,w_$l;w_$h=w_$B.nodeRoot,w_$l=w_$B.aniO,delete w_$B.nodeRoot,delete w_$B.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=w_$h,this._parseNodeList(w_$h),this._labels=null;try{this._calGraphicData(w_$l)}catch(w_$B){console.warn("parse animation fail:"+w_$l.name+",empty animation created"),this._gList=[]}var w_$A=w_$B;return w_$A.interval=1e3/w_$l.frameRate,w_$A.frames=this._gList,w_$A.labels=this._labels,w_$A.name=w_$l.name,w_$A},w_$B.setUpAniData=function(w_$B){if(w_$B.animations){var w_$h,w_$l={},w_$A=[],w_$n=w_$B.animations,w_$s=0,w_$X=w_$n.length;for(w_$s=0;w_$s<w_$X;w_$s++)if(w_$h=w_$n[w_$s]){var w_$Z={};w_$Z.name=w_$h.name,w_$Z.aniO=w_$h,w_$Z.nodeRoot=w_$B,w_$A.push(w_$Z),w_$l[w_$h.name]=w_$Z}this.animationList=w_$A,this.animationDic=w_$l}},w_$B._clear=function(){var w_$B,w_$h;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(w_$B in this._nodeGDic)(w_$h=this._nodeGDic[w_$B])&&w_$h.recover();this._nodeGDic=null},w_$a.parseAnimationByData=function(w_$B){var w_$h;return w_$a._I||(w_$a._I=new w_$a),w_$h=w_$a._I.parseByData(w_$B),w_$a._I._clear(),w_$h},w_$a.parseAnimationData=function(w_$B){var w_$h;return w_$a._I||(w_$a._I=new w_$a),w_$a._I.setUpAniData(w_$B),(w_$h={}).animationList=w_$a._I.animationList,w_$h.animationDic=w_$a._I.animationDic,w_$a._I._clear(),w_$h},w_$a._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],w_$a._temParam=[],w_$a._I=null,w_$a._rootMatrix=null,w_$t(w_$a,["_tempMt",function(){return this._tempMt=new w_$N}]),w_$a.__init$=function(){w_$z=function(){function w_$B(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return w_$G(w_$B,""),w_$B.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),w_$K.recover("GraphicNode",this)},w_$B.create=function(){return w_$K.getItemByClass("GraphicNode",w_$B)},w_$B}()},w_$a}(w_$CB));w_$v.__init([w_$P,w_$tB,w_$M,w_$d,w_$I,w_$w,w_$B,w_$vB])}(window,document,Laya),function(w_$B,w_$h,w_$l){w_$l.un,w_$l.uns,w_$l.static;var w_$A=w_$l.class;w_$l.getset,w_$l.__newvec;new(function(){function w_$B(){}return w_$A(w_$B,"LayaMain"),w_$B}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w_$B,w_$h){"use strict";for(var w_$l in Object.defineProperty(w_$h,"__esModule",{value:!0}),Laya){var w_$A=Laya[w_$l];w_$A&&w_$A.__isclass&&(w_$h[w_$l]=w_$A)}}),function(w_$B,w_$h,w_$u){w_$u.un,w_$u.uns;var w_$X=w_$u.static,w_$b=w_$u.class,w_$A=w_$u.getset,w_$s=w_$u.__newvec,w_$G=laya.maths.Arith,w_$T=laya.maths.Bezier,w_$l=laya.resource.Bitmap,w_$Q=laya.utils.Browser,w_$t=laya.utils.Byte,w_$i=laya.utils.Color,w_$v=(laya.filters.ColorFilter,w_$u.Config),w_$n=laya.resource.Context,w_$U=(laya.events.Event,laya.filters.Filter),w_$Z=laya.display.Graphics,w_$P=laya.resource.HTMLCanvas,w_$$=(laya.utils.HTMLChar,laya.resource.HTMLImage),w_$V=laya.resource.HTMLSubImage,w_$x=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),w_$w=laya.maths.Point,w_$z=laya.maths.Rectangle,w_$J=laya.renders.Render,w_$H=(laya.renders.RenderContext,laya.renders.RenderSprite),w_$y=laya.resource.Resource,w_$C=laya.resource.ResourceManager,w_$o=laya.utils.RunDriver,w_$a=laya.display.Sprite,w_$S=laya.display.Stage,w_$N=laya.utils.Stat,w_$R=laya.utils.StringKey,w_$W=(laya.display.css.Style,laya.system.System),w_$M=laya.display.Text,w_$E=laya.resource.Texture,w_$j=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),w_$g=laya.utils.VectorGraphManager;laya.utils.WordText;w_$u.interface("laya.webgl.shapes.IShape"),w_$u.interface("laya.webgl.submit.ISubmit"),w_$u.interface("laya.webgl.text.ICharSegment"),w_$u.interface("laya.webgl.canvas.save.ISaveData"),w_$u.interface("laya.webgl.resource.IMergeAtlasBitmap"),w_$u.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var w_$_=function(){function w_$B(){}w_$b(w_$B,"laya.filters.webgl.FilterActionGL");var w_$h=w_$B.prototype;return w_$u.imps(w_$h,{"laya.filters.IFilterActionGL":!0}),w_$h.setValue=function(w_$B){},w_$h.setValueMix=function(w_$B){},w_$h.apply3d=function(w_$B,w_$h,w_$l,w_$A,w_$n){return null},w_$h.apply=function(w_$B){return null},w_$A(0,w_$h,"typeMix",function(){return 0}),w_$B}(),w_$d=function(){function w_$B(){}return w_$b(w_$B,"laya.webgl.shader.ShaderValue"),w_$B}(),w_$k=function(){var w_$A,w_$n;function w_$B(w_$B,w_$h,w_$l){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new w_$n,void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),this._cells=null,this._rowInfo=null,this._init(w_$B,w_$h),this._atlasID=w_$l}w_$b(w_$B,"laya.webgl.atlas.AtlasGrid");var w_$h=w_$B.prototype;return w_$h.getAltasID=function(){return this._atlasID},w_$h.setAltasID=function(w_$B){0<=w_$B&&(this._atlasID=w_$B)},w_$h.addTex=function(w_$B,w_$h,w_$l){var w_$A=this._get(w_$h,w_$l);return 0==w_$A.ret||(this._fill(w_$A.x,w_$A.y,w_$h,w_$l,w_$B),this._texCount++),w_$A},w_$h._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},w_$h._init=function(w_$B,w_$h){if(this._width=w_$B,this._height=w_$h,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=w_$s(this._height);for(var w_$l=0;w_$l<this._height;w_$l++)this._rowInfo[w_$l]=new w_$A;return this._clear(),!0},w_$h._get=function(w_$B,w_$h){var w_$l=new w_$p;if(w_$B>=this._failSize.width&&w_$h>=this._failSize.height)return w_$l;for(var w_$A=-1,w_$n=-1,w_$s=this._width,w_$X=this._height,w_$Z=this._cells,w_$t=0;w_$t<w_$X;w_$t++)if(!(this._rowInfo[w_$t].spaceCount<w_$B))for(var w_$P=0;w_$P<w_$s;){var w_$G=3*(w_$t*w_$s+w_$P);if(0!=w_$Z[w_$G]||w_$Z[1+w_$G]<w_$B||w_$Z[2+w_$G]<w_$h)w_$P+=w_$Z[1+w_$G];else{w_$A=w_$P,w_$n=w_$t;for(var w_$T=0;w_$T<w_$B;w_$T++)if(w_$Z[3*w_$T+w_$G+2]<w_$h){w_$A=-1;break}if(!(w_$A<0))return w_$l.ret=!0,w_$l.x=w_$A,w_$l.y=w_$n,w_$l;w_$P+=w_$Z[1+w_$G]}}return w_$l},w_$h._fill=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=this._width,w_$X=this._height;this._check(w_$B+w_$l<=w_$s&&w_$h+w_$A<=w_$X);for(var w_$Z=w_$h;w_$Z<w_$A+w_$h;++w_$Z){this._check(this._rowInfo[w_$Z].spaceCount>=w_$l),this._rowInfo[w_$Z].spaceCount-=w_$l;for(var w_$t=0;w_$t<w_$l;w_$t++){var w_$P=3*(w_$B+w_$Z*w_$s+w_$t);this._check(0==this._cells[w_$P]),this._cells[w_$P]=w_$n,this._cells[1+w_$P]=w_$l,this._cells[2+w_$P]=w_$A}}if(0<w_$B)for(w_$Z=0;w_$Z<w_$A;++w_$Z){var w_$G=0;for(w_$t=w_$B-1;0<=w_$t&&0==this._cells[3*((w_$h+w_$Z)*w_$s+w_$t)];--w_$t,++w_$G);for(w_$t=w_$G;0<w_$t;--w_$t)this._cells[3*((w_$h+w_$Z)*w_$s+w_$B-w_$t)+1]=w_$t,this._check(0<w_$t)}if(0<w_$h)for(w_$t=w_$B;w_$t<w_$B+w_$l;++w_$t){for(w_$G=0,w_$Z=w_$h-1;0<=w_$Z&&0==this._cells[3*(w_$t+w_$Z*w_$s)];--w_$Z,w_$G++);for(w_$Z=w_$G;0<w_$Z;--w_$Z)this._cells[3*(w_$t+(w_$h-w_$Z)*w_$s)+2]=w_$Z,this._check(0<w_$Z)}},w_$h._check=function(w_$B){0==w_$B&&console.log("xtexMerger 错误啦")},w_$h._clear=function(){for(var w_$B=this._texCount=0;w_$B<this._height;w_$B++)this._rowInfo[w_$B].spaceCount=this._width;for(var w_$h=0;w_$h<this._height;w_$h++)for(var w_$l=0;w_$l<this._width;w_$l++){var w_$A=3*(w_$h*this._width+w_$l);this._cells[w_$A]=0,this._cells[1+w_$A]=this._width-w_$l,this._cells[2+w_$A]=this._width-w_$h}this._failSize.width=this._width+1,this._failSize.height=this._height+1},w_$B.__init$=function(){w_$A=function(){function w_$B(){this.spaceCount=0}return w_$b(w_$B,""),w_$B}(),w_$n=function(){function w_$B(){this.width=0,this.height=0}return w_$b(w_$B,""),w_$B}()},w_$B}(),w_$O=function(){function w_$J(w_$B,w_$h,w_$l,w_$A){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=w_$B,this._height=w_$h,this._gridSize=w_$l,this._maxAtlaserCount=w_$A,this._gridNumX=w_$B/w_$l,this._gridNumY=w_$h/w_$l,this._curAtlasIndex=0,this._atlaserArray=[]}w_$b(w_$J,"laya.webgl.atlas.AtlasResourceManager");var w_$B=w_$J.prototype;return w_$B.setAtlasParam=function(w_$B,w_$h,w_$l,w_$A){if(1==this._setAtlasParam)return w_$J._sid_=0,this._width=w_$B,this._height=w_$h,this._gridSize=w_$l,this._maxAtlaserCount=w_$A,this._gridNumX=w_$B/w_$l,this._gridNumY=w_$h/w_$l,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},w_$B.pushData=function(w_$B){var w_$h,w_$l=w_$B.bitmap,w_$A=-1,w_$n=null,w_$s=0,w_$X=0;for(w_$s=0,w_$h=this._atlaserArray.length;w_$s<w_$h&&(w_$X=(this._curAtlasIndex+w_$s)%w_$h,-1==(w_$A=(w_$n=this._atlaserArray[w_$X]).findBitmapIsExist(w_$l)));w_$s++);if(-1!=w_$A){var w_$Z=w_$n.InAtlasWebGLImagesOffsetValue[w_$A];return w_$i=w_$Z[0],w_$$=w_$Z[1],w_$n.addToAtlas(w_$B,w_$i,w_$$),!0}this._setAtlasParam=!1;for(var w_$t=Math.ceil((w_$B.bitmap.width+2)/this._gridSize),w_$P=Math.ceil((w_$B.bitmap.height+2)/this._gridSize),w_$G=!1,w_$T=0;w_$T<2;w_$T++){var w_$b=this._maxAtlaserCount;for(w_$s=0;w_$s<w_$b;w_$s++){w_$X=(this._curAtlasIndex+w_$s)%w_$b,this._atlaserArray.length-1>=w_$X||this._atlaserArray.push(new w_$zB(this._gridNumX,this._gridNumY,this._width,this._height,w_$J._sid_++));var w_$Q=this._atlaserArray[w_$X],w_$i=0,w_$$=0,w_$V=w_$Q.addTex(1,w_$t,w_$P);if(w_$V.ret){w_$i=w_$V.x*this._gridSize+1,w_$$=w_$V.y*this._gridSize+1,w_$l.lock=!0,w_$Q.addToAtlasTexture(w_$l,w_$i,w_$$),w_$Q.addToAtlas(w_$B,w_$i,w_$$),w_$G=!0,this._curAtlasIndex=w_$X;break}}if(w_$G)break;this._atlaserArray.push(new w_$zB(this._gridNumX,this._gridNumY,this._width,this._height,w_$J._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return w_$G||console.log(">>>AtlasManager pushData error"),w_$G},w_$B.addToAtlas=function(w_$B){laya.webgl.atlas.AtlasResourceManager.instance.pushData(w_$B)},w_$B.garbageCollection=function(){if(!0===this._needGC){for(var w_$B=this._atlaserArray.length-this._maxAtlaserCount,w_$h=0;w_$h<w_$B;w_$h++)this._atlaserArray[w_$h].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+w_$B),this._atlaserArray.splice(0,w_$B),this._needGC=!1}return!0},w_$B.freeAll=function(){for(var w_$B=0,w_$h=this._atlaserArray.length;w_$B<w_$h;w_$B++)this._atlaserArray[w_$B].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},w_$B.getAtlaserCount=function(){return this._atlaserArray.length},w_$B.getAtlaserByIndex=function(w_$B){return this._atlaserArray[w_$B]},w_$A(1,w_$J,"instance",function(){return w_$J._Instance||(w_$J._Instance=new w_$J(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),w_$J._Instance}),w_$A(1,w_$J,"enabled",function(){return w_$v.atlasEnable}),w_$A(1,w_$J,"atlasLimitWidth",function(){return w_$J._atlasLimitWidth},function(w_$B){w_$J._atlasLimitWidth=w_$B}),w_$A(1,w_$J,"atlasLimitHeight",function(){return w_$J._atlasLimitHeight},function(w_$B){w_$J._atlasLimitHeight=w_$B}),w_$J._enable=function(){w_$v.atlasEnable=!0},w_$J._disable=function(){w_$v.atlasEnable=!1},w_$J.__init__=function(){w_$J.atlasTextureWidth=2048,w_$J.atlasTextureHeight=2048,w_$J.maxTextureCount=6,w_$J.atlasLimitWidth=512,w_$J.atlasLimitHeight=512},w_$J._atlasLimitWidth=0,w_$J._atlasLimitHeight=0,w_$J.gridSize=16,w_$J.atlasTextureWidth=0,w_$J.atlasTextureHeight=0,w_$J.maxTextureCount=0,w_$J._atlasRestore=0,w_$J.BOARDER_TYPE_NO=0,w_$J.BOARDER_TYPE_RIGHT=1,w_$J.BOARDER_TYPE_LEFT=2,w_$J.BOARDER_TYPE_BOTTOM=4,w_$J.BOARDER_TYPE_TOP=8,w_$J.BOARDER_TYPE_ALL=15,w_$J._sid_=0,w_$J._Instance=null,w_$J}(),w_$p=function(){function w_$B(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return w_$b(w_$B,"laya.webgl.atlas.MergeFillInfo"),w_$B}(),w_$F=function(){function w_$h(){}return w_$b(w_$h,"laya.webgl.canvas.BlendMode"),w_$h._init_=function(w_$B){w_$h.fns=[w_$h.BlendNormal,w_$h.BlendAdd,w_$h.BlendMultiply,w_$h.BlendScreen,w_$h.BlendOverlay,w_$h.BlendLight,w_$h.BlendMask,w_$h.BlendDestinationOut],w_$h.targetFns=[w_$h.BlendNormalTarget,w_$h.BlendAddTarget,w_$h.BlendMultiplyTarget,w_$h.BlendScreenTarget,w_$h.BlendOverlayTarget,w_$h.BlendLightTarget,w_$h.BlendMask,w_$h.BlendDestinationOut]},w_$h.BlendNormal=function(w_$B){w_$B.blendFunc(1,771)},w_$h.BlendAdd=function(w_$B){w_$B.blendFunc(1,772)},w_$h.BlendMultiply=function(w_$B){w_$B.blendFunc(774,771)},w_$h.BlendScreen=function(w_$B){w_$B.blendFunc(1,1)},w_$h.BlendOverlay=function(w_$B){w_$B.blendFunc(1,769)},w_$h.BlendLight=function(w_$B){w_$B.blendFunc(1,1)},w_$h.BlendNormalTarget=function(w_$B){w_$B.blendFunc(1,771)},w_$h.BlendAddTarget=function(w_$B){w_$B.blendFunc(1,772)},w_$h.BlendMultiplyTarget=function(w_$B){w_$B.blendFunc(774,771)},w_$h.BlendScreenTarget=function(w_$B){w_$B.blendFunc(1,1)},w_$h.BlendOverlayTarget=function(w_$B){w_$B.blendFunc(1,769)},w_$h.BlendLightTarget=function(w_$B){w_$B.blendFunc(1,1)},w_$h.BlendMask=function(w_$B){w_$B.blendFunc(0,770)},w_$h.BlendDestinationOut=function(w_$B){w_$B.blendFunc(0,0)},w_$h.activeBlendFunction=null,w_$h.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],w_$h.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},w_$h.NORMAL="normal",w_$h.ADD="add",w_$h.MULTIPLY="multiply",w_$h.SCREEN="screen",w_$h.LIGHT="light",w_$h.OVERLAY="overlay",w_$h.DESTINATIONOUT="destination-out",w_$h.fns=[],w_$h.targetFns=[],w_$h}(),w_$c=function(){function w_$l(w_$B){this._color=w_$i.create("black"),this.setValue(w_$B)}w_$b(w_$l,"laya.webgl.canvas.DrawStyle");var w_$B=w_$l.prototype;return w_$B.setValue=function(w_$B){if(w_$B){if("string"==typeof w_$B)return void(this._color=w_$i.create(w_$B));if(w_$B instanceof laya.utils.Color)return void(this._color=w_$B)}},w_$B.reset=function(){this._color=w_$i.create("black")},w_$B.equal=function(w_$B){return"string"==typeof w_$B?this._color.strColor===w_$B:w_$B instanceof laya.utils.Color&&this._color.numColor===w_$B.numColor},w_$B.toColorStr=function(){return this._color.strColor},w_$l.create=function(w_$B){var w_$h;if(w_$B&&("string"==typeof w_$B?w_$h=w_$i.create(w_$B):w_$B instanceof laya.utils.Color&&(w_$h=w_$B),w_$h))return w_$h._drawStyle||(w_$h._drawStyle=new w_$l(w_$B));return laya.webgl.canvas.DrawStyle.DEFAULT},w_$X(w_$l,["DEFAULT",function(){return this.DEFAULT=new w_$l("#000000")}]),w_$l}(),w_$m=function(){function w_$B(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];w_$CB.mainContext;this.ib=w_$DB.create(35048),this.vb=w_$rB.create(5)}w_$b(w_$B,"laya.webgl.canvas.Path");var w_$h=w_$B.prototype;return w_$h.addPoint=function(w_$B,w_$h){this.tempArray.push(w_$B,w_$h)},w_$h.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},w_$h.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},w_$h.polygon=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X;return this.geomatrys.push(this._curGeomatry=w_$X=new w_$RB(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)),w_$A||(w_$X.fill=!1),null==w_$s&&(w_$X.borderWidth=0),w_$X},w_$h.setGeomtry=function(w_$B){this.geomatrys.push(this._curGeomatry=w_$B)},w_$h.drawLine=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s;return this.closePath?this.geomatrys.push(this._curGeomatry=w_$s=new w_$NB(w_$B,w_$h,w_$l,w_$A,w_$n)):this.geomatrys.push(this._curGeomatry=w_$s=new w_$SB(w_$B,w_$h,w_$l,w_$A,w_$n)),w_$s.fill=!1,w_$s},w_$h.update=function(){var w_$B=this.ib._byteLength,w_$h=this.geomatrys.length;this.offset=w_$B;for(var w_$l=this.geoStart;w_$l<w_$h;w_$l++)this.geomatrys[w_$l].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=w_$h,this.count=(this.ib._byteLength-w_$B)/w_$$B.BYTES_PIDX},w_$h.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},w_$h.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},w_$B}(),w_$Y=function(){function w_$Z(){}w_$b(w_$Z,"laya.webgl.canvas.save.SaveBase");var w_$B=w_$Z.prototype;return w_$u.imps(w_$B,{"laya.webgl.canvas.save.ISaveData":!0}),w_$B.isSaveMark=function(){return!1},w_$B.restore=function(w_$B){this._dataObj[this._valueName]=this._value,(w_$Z._cache[w_$Z._cache._length++]=this)._newSubmit&&(w_$B._curSubmit=w_$sB.RENDERBASE,w_$B._renderKey=0)},w_$Z._createArray=function(){var w_$B=[];return w_$B._length=0,w_$B},w_$Z._init=function(){var w_$B=w_$Z._namemap={};return w_$B[1]="ALPHA",w_$B[2]="fillStyle",w_$B[8]="font",w_$B[256]="lineWidth",w_$B[512]="strokeStyle",w_$B[8192]="_mergeID",w_$B[1024]=w_$B[2048]=w_$B[4096]=[],w_$B[16384]="textBaseline",w_$B[32768]="textAlign",w_$B[65536]="_nBlendType",w_$B[1048576]="shader",w_$B[2097152]="filters",w_$B},w_$Z.save=function(w_$B,w_$h,w_$l,w_$A){if((w_$B._saveMark._saveuse&w_$h)!==w_$h){w_$B._saveMark._saveuse|=w_$h;var w_$n=w_$Z._cache,w_$s=0<w_$n._length?w_$n[--w_$n._length]:new w_$Z;w_$s._value=w_$l[w_$s._valueName=w_$Z._namemap[w_$h]],w_$s._dataObj=w_$l,w_$s._newSubmit=w_$A;var w_$X=w_$B._save;w_$X[w_$X._length++]=w_$s}},w_$Z._cache=laya.webgl.canvas.save.SaveBase._createArray(),w_$Z._namemap=w_$Z._init(),w_$Z}(),w_$K=function(){function w_$s(){this._clipRect=new w_$z}w_$b(w_$s,"laya.webgl.canvas.save.SaveClipRect");var w_$B=w_$s.prototype;return w_$u.imps(w_$B,{"laya.webgl.canvas.save.ISaveData":!0}),w_$B.isSaveMark=function(){return!1},w_$B.restore=function(w_$B){w_$B._clipRect=this._clipSaveRect,(w_$s._cache[w_$s._cache._length++]=this)._submitScissor.submitLength=w_$B._submits._length-this._submitScissor.submitIndex,w_$B._curSubmit=w_$sB.RENDERBASE,w_$B._renderKey=0},w_$s.save=function(w_$B,w_$h){if(131072!=(131072&w_$B._saveMark._saveuse)){w_$B._saveMark._saveuse|=131072;var w_$l=w_$s._cache,w_$A=0<w_$l._length?w_$l[--w_$l._length]:new w_$s;w_$A._clipSaveRect=w_$B._clipRect,w_$B._clipRect=w_$A._clipRect.copyFrom(w_$B._clipRect),w_$A._submitScissor=w_$h;var w_$n=w_$B._save;w_$n[w_$n._length++]=w_$A}},w_$X(w_$s,["_cache",function(){return this._cache=w_$Y._createArray()}]),w_$s}(),w_$f=function(){function w_$Q(){this._contextX=0,this._contextY=0,this._clipRect=new w_$z,this._rect=new w_$z,this._matrix=new w_$x}w_$b(w_$Q,"laya.webgl.canvas.save.SaveClipRectStencil");var w_$B=w_$Q.prototype;return w_$u.imps(w_$B,{"laya.webgl.canvas.save.ISaveData":!0}),w_$B.isSaveMark=function(){return!1},w_$B.restore=function(w_$B){w_$GB.restore(w_$B,this._rect,this._saveMatrix,this._contextX,this._contextY),w_$B._clipRect=this._clipSaveRect,w_$B._curMat=this._saveMatrix,w_$B._x=this._contextX,w_$B._y=this._contextY,w_$Q._cache[w_$Q._cache._length++]=this,w_$B._curSubmit=w_$sB.RENDERBASE},w_$Q.save=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){if(262144!=(262144&w_$B._saveMark._saveuse)){w_$B._saveMark._saveuse|=262144;var w_$G=w_$Q._cache,w_$T=0<w_$G._length?w_$G[--w_$G._length]:new w_$Q;w_$T._clipSaveRect=w_$B._clipRect,w_$T._clipRect.setTo(w_$X,w_$Z,w_$t,w_$P),w_$B._clipRect=w_$T._clipRect,w_$T._rect.x=w_$l,w_$T._rect.y=w_$A,w_$T._rect.width=w_$n,w_$T._rect.height=w_$s,w_$T._contextX=w_$B._x,w_$T._contextY=w_$B._y,w_$T._saveMatrix=w_$B._curMat,w_$B._curMat.copyTo(w_$T._matrix),w_$B._curMat=w_$T._matrix,w_$T._submitStencil=w_$h;var w_$b=w_$B._save;w_$b[w_$b._length++]=w_$T}},w_$X(w_$Q,["_cache",function(){return this._cache=w_$Y._createArray()}]),w_$Q}(),w_$I=function(){function w_$A(){this._saveuse=0}w_$b(w_$A,"laya.webgl.canvas.save.SaveMark");var w_$B=w_$A.prototype;return w_$u.imps(w_$B,{"laya.webgl.canvas.save.ISaveData":!0}),w_$B.isSaveMark=function(){return!0},w_$B.restore=function(w_$B){w_$B._saveMark=this._preSaveMark,w_$A._no[w_$A._no._length++]=this},w_$A.Create=function(w_$B){var w_$h=w_$A._no,w_$l=0<w_$h._length?w_$h[--w_$h._length]:new w_$A;return w_$l._saveuse=0,w_$l._preSaveMark=w_$B._saveMark,w_$B._saveMark=w_$l},w_$X(w_$A,["_no",function(){return this._no=w_$Y._createArray()}]),w_$A}(),w_$L=function(){function w_$s(){this._matrix=new w_$x}w_$b(w_$s,"laya.webgl.canvas.save.SaveTransform");var w_$B=w_$s.prototype;return w_$u.imps(w_$B,{"laya.webgl.canvas.save.ISaveData":!0}),w_$B.isSaveMark=function(){return!1},w_$B.restore=function(w_$B){w_$B._curMat=this._savematrix,w_$s._no[w_$s._no._length++]=this},w_$s.save=function(w_$B){var w_$h=w_$B._saveMark;if(2048!=(2048&w_$h._saveuse)){w_$h._saveuse|=2048;var w_$l=w_$s._no,w_$A=0<w_$l._length?w_$l[--w_$l._length]:new w_$s;w_$A._savematrix=w_$B._curMat,w_$B._curMat=w_$B._curMat.copyTo(w_$A._matrix);var w_$n=w_$B._save;w_$n[w_$n._length++]=w_$A}},w_$X(w_$s,["_no",function(){return this._no=w_$Y._createArray()}]),w_$s}(),w_$e=function(){function w_$n(){}w_$b(w_$n,"laya.webgl.canvas.save.SaveTranslate");var w_$B=w_$n.prototype;return w_$u.imps(w_$B,{"laya.webgl.canvas.save.ISaveData":!0}),w_$B.isSaveMark=function(){return!1},w_$B.restore=function(w_$B){w_$B._curMat;w_$B._x=this._x,w_$B._y=this._y,w_$n._no[w_$n._no._length++]=this},w_$n.save=function(w_$B){var w_$h=w_$n._no,w_$l=0<w_$h._length?w_$h[--w_$h._length]:new w_$n;w_$l._x=w_$B._x,w_$l._y=w_$B._y;var w_$A=w_$B._save;w_$A[w_$A._length++]=w_$l},w_$X(w_$n,["_no",function(){return this._no=w_$Y._createArray()}]),w_$n}(),w_$q=function(){function w_$B(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new w_$z}w_$b(w_$B,"laya.webgl.resource.RenderTargetMAX");var w_$h=w_$B.prototype;return w_$h.setSP=function(w_$B){this._sp=w_$B},w_$h.size=function(w_$B,w_$h){var w_$l=this;this._width!==w_$B||this._height!==w_$h?(this.repaint=!0,this._width=w_$B,this._height=w_$h,this.target?this.target.size(w_$B,w_$h):this.target=w_$gB.create(w_$B,w_$h),this.target.hasListener("recovered")||this.target.on("recovered",this,function(w_$B){w_$u.timer.callLater(w_$l._sp,w_$l._sp.repaint)})):this.target.size(w_$B,w_$h)},w_$h._flushToTarget=function(w_$B,w_$h){if(!w_$h._destroy){var w_$l=w_$HB.worldScissorTest,w_$A=w_$HB.worldClipRect;w_$HB.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,w_$HB.worldScissorTest=!1,w_$CB.mainContext.disable(3089);var w_$n=w_$HB.worldAlpha,w_$s=w_$HB.worldMatrix4,w_$X=w_$HB.worldMatrix,w_$Z=w_$HB.worldFilters,w_$t=w_$HB.worldShaderDefines;if(w_$HB.worldMatrix=w_$x.EMPTY,w_$HB.restoreTempArray(),w_$HB.worldMatrix4=w_$HB.TEMPMAT4_ARRAY,w_$HB.worldAlpha=1,w_$HB.worldFilters=null,w_$HB.worldShaderDefines=null,w_$jB.activeShader=null,w_$h.start(),w_$v.showCanvasMark?w_$h.clear(0,1,0,.3):w_$h.clear(0,0,0,0),w_$B.flush(),w_$h.end(),w_$jB.activeShader=null,w_$HB.worldAlpha=w_$n,w_$HB.worldMatrix4=w_$s,w_$HB.worldMatrix=w_$X,w_$HB.worldFilters=w_$Z,w_$HB.worldShaderDefines=w_$t,w_$HB.worldScissorTest=w_$l){var w_$P=w_$HB.height-w_$A.y-w_$A.height;w_$CB.mainContext.scissor(w_$A.x,w_$P,w_$A.width,w_$A.height),w_$CB.mainContext.enable(3089)}w_$HB.worldClipRect=w_$A}},w_$h.flush=function(w_$B){this.repaint&&(this._flushToTarget(w_$B,this.target),this.repaint=!1)},w_$h.drawTo=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$B.drawTexture(this.target.getTexture(),w_$h,w_$l,w_$A,w_$n,0,0)},w_$h.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},w_$B}(),w_$D=function(){function w_$B(){this.ALPHA=1,this.shaderType=0,this.defines=new w_$aB}return w_$b(w_$B,"laya.webgl.shader.d2.Shader2D"),w_$B.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},w_$B.__init__=function(){var w_$B,w_$h;w_$IB.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),w_$IB.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),w_$IB.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),w_$IB.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),w_$IB.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),w_$IB.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),w_$IB.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),w_$IB.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),w_$B="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",w_$h='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',w_$IB.preCompile2D(0,1,w_$B,w_$h,null),w_$B="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",w_$h='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',w_$IB.preCompile2D(0,2,w_$B,w_$h,null),w_$B="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",w_$h="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",w_$IB.preCompile2D(0,4,w_$B,w_$h,null),w_$B="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",w_$h='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',w_$IB.preCompile2D(0,256,w_$B,w_$h,null),w_$B="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",w_$h="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",w_$IB.preCompile2D(0,512,w_$B,w_$h,null)},w_$B}(),w_$r=function(){function w_$h(w_$B,w_$h,w_$l){this._value=0,this._name2int=w_$B,this._int2name=w_$h,this._int2nameMap=w_$l}w_$b(w_$h,"laya.webgl.shader.ShaderDefines");var w_$B=w_$h.prototype;return w_$B.add=function(w_$B){return"string"==typeof w_$B&&(w_$B=this._name2int[w_$B]),this._value|=w_$B,this._value},w_$B.addInt=function(w_$B){return this._value|=w_$B,this._value},w_$B.remove=function(w_$B){return"string"==typeof w_$B&&(w_$B=this._name2int[w_$B]),this._value&=~w_$B,this._value},w_$B.isDefine=function(w_$B){return(this._value&w_$B)===w_$B},w_$B.getValue=function(){return this._value},w_$B.setValue=function(w_$B){this._value=w_$B},w_$B.toNameDic=function(){var w_$B=this._int2nameMap[this._value];return w_$B||w_$h._toText(this._value,this._int2name,this._int2nameMap)},w_$h._reg=function(w_$B,w_$h,w_$l,w_$A){w_$A[w_$l[w_$B]=w_$h]=w_$B},w_$h._toText=function(w_$B,w_$h,w_$l){var w_$A=w_$l[w_$B];if(w_$A)return w_$A;for(var w_$n={},w_$s=1,w_$X=0;w_$X<32&&!(w_$B<(w_$s=1<<w_$X));w_$X++)if(w_$B&w_$s){var w_$Z=w_$h[w_$s];w_$Z&&(w_$n[w_$Z]="")}return w_$l[w_$B]=w_$n},w_$h._toInt=function(w_$B,w_$h){for(var w_$l=w_$B.split("."),w_$A=0,w_$n=0,w_$s=w_$l.length;w_$n<w_$s;w_$n++){var w_$X=w_$h[w_$l[w_$n]];if(!w_$X)throw new Error("Defines to int err:"+w_$B+"/"+w_$l[w_$n]);w_$A|=w_$X}return w_$A},w_$h}(),w_$BB=function(){function w_$X(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new w_$x}w_$b(w_$X,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var w_$B=w_$X.prototype;return w_$B.init=function(w_$B,w_$h,w_$l){if(w_$h)this._vs=w_$h;else{this._vs=[];var w_$A=w_$B.width,w_$n=w_$B.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(w_$A,0,1,0,1,1,1,1),this._vs.push(w_$A,w_$n,1,1,1,1,1,1),this._vs.push(0,w_$n,0,1,1,1,1,1)}w_$l?this._ps=w_$l:(w_$X._defaultPS||(w_$X._defaultPS=[]).push(0,1,3,3,1,2),this._ps=w_$X._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=w_$B},w_$B.init2=function(w_$B,w_$h,w_$l,w_$A,w_$n){this.transform&&(this.transform=null),w_$l?this._ps=w_$l:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=w_$A,this._uvs=w_$n,this.mEleNum=this._ps.length,this.mTexture=w_$B,(w_$J.isConchNode||w_$J.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},w_$B._initMyData=function(){var w_$B=0,w_$h=0,w_$l=4*this._verticles.length;this._vs=w_$X._tempVS;var w_$A=!1;if(w_$J.isConchNode||w_$J.isConchApp?(this._vs.length=w_$l,w_$A=!0):this._vs.length<w_$l&&(this._vs.length=w_$l,w_$A=!0),w_$X._tVSLen=w_$l,w_$A)for(;w_$B<w_$l;)this._vs[w_$B]=this._verticles[w_$h],this._vs[w_$B+1]=this._verticles[w_$h+1],this._vs[w_$B+2]=this._uvs[w_$h],this._vs[w_$B+3]=this._uvs[w_$h+1],this._vs[w_$B+4]=1,this._vs[w_$B+5]=1,this._vs[w_$B+6]=1,this._vs[w_$B+7]=1,w_$B+=8,w_$h+=2;else for(;w_$B<w_$l;)this._vs[w_$B]=this._verticles[w_$h],this._vs[w_$B+1]=this._verticles[w_$h+1],this._vs[w_$B+2]=this._uvs[w_$h],this._vs[w_$B+3]=this._uvs[w_$h+1],w_$B+=8,w_$h+=2},w_$B.getData2=function(w_$B,w_$h,w_$l){var w_$A;this.mVBBuffer=w_$B,this.mIBBuffer=w_$h,this._initMyData(),w_$B.appendEx2(this._vs,Float32Array,w_$X._tVSLen,4),this._indexStart=w_$h._byteLength,(w_$A=w_$X._tempIB).length<this._ps.length&&(w_$A.length=this._ps.length);for(var w_$n=0,w_$s=this._ps.length;w_$n<w_$s;w_$n++)w_$A[w_$n]=this._ps[w_$n]+w_$l;w_$h.appendEx2(w_$A,Uint16Array,this._ps.length,2)},w_$B.getData=function(w_$B,w_$h,w_$l){if(this.mVBBuffer=w_$B,this.mIBBuffer=w_$h,w_$B.append(this.mVBData),this._indexStart=w_$h._byteLength,this.mIBData.start!=w_$l){for(var w_$A=0,w_$n=this._ps.length;w_$A<w_$n;w_$A++)this.mIBData[w_$A]=this._ps[w_$A]+w_$l;this.mIBData.start=w_$l}w_$h.append(this.mIBData)},w_$B.render=function(w_$B,w_$h,w_$l){if(w_$J.isWebGL&&this.mTexture){w_$B._renderKey=0,w_$B._shader2D.glTexture=null,w_$hB.getInstance().addSkinMesh(this);var w_$A=w_$sB.createShape(w_$B,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,w_$UB.create(512,0));this.transform||(this.transform=w_$x.EMPTY),this.transform.translate(w_$h,w_$l),w_$x.mul(this.transform,w_$B._curMat,this._tempMatrix),this.transform.translate(-w_$h,-w_$l);var w_$n=w_$A.shaderValue,w_$s=w_$n.u_mmat2||w_$HB.getMatrArray();w_$HB.mat2MatArray(this._tempMatrix,w_$s),w_$n.textureHost=this.mTexture,w_$n.offsetX=0,w_$n.offsetY=0,w_$n.u_mmat2=w_$s,w_$n.ALPHA=w_$B._shader2D.ALPHA,w_$B._submits[w_$B._submits._length++]=w_$A}else w_$J.isConchApp&&this.mTexture&&(this.transform||(this.transform=w_$x.EMPTY),w_$B.setSkinMesh&&w_$B.setSkinMesh(w_$h,w_$l,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},w_$X._tempVS=[],w_$X._tempIB=[],w_$X._defaultPS=null,w_$X._tVSLen=0,w_$X}(),w_$hB=function(){function w_$B(){this.ib=null,this.vb=null;w_$CB.mainContext;this.ib=w_$DB.create(35048),this.vb=w_$rB.create(8)}w_$b(w_$B,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var w_$h=w_$B.prototype;return w_$h.addSkinMesh=function(w_$B){w_$B.getData2(this.vb,this.ib,this.vb._byteLength/32)},w_$h.reset=function(){this.vb.clear(),this.ib.clear()},w_$B.getInstance=function(){return w_$B.instance=w_$B.instance||new w_$B},w_$B.instance=null,w_$B}(),w_$lB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===w_$t&&(w_$t=0),this.x=w_$B,this.y=w_$h,this.width=w_$l,this.height=w_$A,this.edges=w_$n,this.color=w_$s,this.borderWidth=w_$X,this.borderColor=w_$Z}w_$b(w_$B,"laya.webgl.shapes.BasePoly");var w_$h=w_$B.prototype;return w_$u.imps(w_$h,{"laya.webgl.shapes.IShape":!0}),w_$h.getData=function(w_$B,w_$h,w_$l){},w_$h.rebuild=function(w_$B){},w_$h.setMatrix=function(w_$B){},w_$h.needUpdate=function(w_$B){return!0},w_$h.sector=function(w_$B,w_$h,w_$l){var w_$A=this.x,w_$n=this.y,w_$s=this.edges,w_$X=(this.r1-this.r0)/w_$s,w_$Z=this.width,w_$t=this.height,w_$P=this.color,w_$G=(w_$P>>16&255)/255,w_$T=(w_$P>>8&255)/255,w_$b=(255&w_$P)/255;w_$B.push(w_$A,w_$n,w_$G,w_$T,w_$b);for(var w_$Q=0;w_$Q<w_$s+1;w_$Q++)w_$B.push(w_$A+Math.sin(w_$X*w_$Q+this.r0)*w_$Z,w_$n+Math.cos(w_$X*w_$Q+this.r0)*w_$t),w_$B.push(w_$G,w_$T,w_$b);for(w_$Q=0;w_$Q<w_$s;w_$Q++)w_$h.push(w_$l,w_$l+w_$Q+1,w_$l+w_$Q+2)},w_$h.createLine2=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b,w_$Q,w_$i,w_$$,w_$V,w_$J,w_$H,w_$y,w_$C,w_$o,w_$u,w_$v,w_$U,w_$x,w_$w=w_$B.concat(),w_$z=w_$n,w_$a=this.borderColor,w_$S=(w_$a>>16&255)/255,w_$N=(w_$a>>8&255)/255,w_$R=(255&w_$a)/255,w_$W=w_$w.length/2,w_$M=w_$A,w_$E=w_$l/2;w_$t=w_$w[0],w_$P=w_$w[1],w_$$=w_$t-(w_$G=w_$w[2]),w_$i=(w_$i=-(w_$P-(w_$T=w_$w[3])))/(w_$x=Math.sqrt(w_$i*w_$i+w_$$*w_$$))*w_$E,w_$$=w_$$/w_$x*w_$E,w_$z.push(w_$t-w_$i+this.x,w_$P-w_$$+this.y,w_$S,w_$N,w_$R,w_$t+w_$i+this.x,w_$P+w_$$+this.y,w_$S,w_$N,w_$R);for(var w_$j=1;w_$j<w_$W-1;w_$j++)w_$t=w_$w[2*(w_$j-1)],w_$P=w_$w[2*(w_$j-1)+1],w_$G=w_$w[2*w_$j],w_$T=w_$w[2*w_$j+1],w_$b=w_$w[2*(w_$j+1)],w_$Q=w_$w[2*(w_$j+1)+1],w_$$=w_$t-w_$G,w_$J=w_$G-w_$b,w_$C=(-(w_$i=(w_$i=-(w_$P-w_$T))/(w_$x=Math.sqrt(w_$i*w_$i+w_$$*w_$$))*w_$E)+w_$t)*(-(w_$$=w_$$/w_$x*w_$E)+w_$T)-(-w_$i+w_$G)*(-w_$$+w_$P),w_$v=(-(w_$V=(w_$V=-(w_$T-w_$Q))/(w_$x=Math.sqrt(w_$V*w_$V+w_$J*w_$J))*w_$E)+w_$b)*(-(w_$J=w_$J/w_$x*w_$E)+w_$T)-(-w_$V+w_$G)*(-w_$J+w_$Q),w_$U=(w_$H=-w_$$+w_$P-(-w_$$+w_$T))*(w_$u=-w_$V+w_$G-(-w_$V+w_$b))-(w_$o=-w_$J+w_$Q-(-w_$J+w_$T))*(w_$y=-w_$i+w_$G-(-w_$i+w_$t)),Math.abs(w_$U)<.1?(w_$U+=10.1,w_$z.push(w_$G-w_$i+this.x,w_$T-w_$$+this.y,w_$S,w_$N,w_$R,w_$G+w_$i+this.x,w_$T+w_$$+this.y,w_$S,w_$N,w_$R)):(((w_$X=(w_$y*w_$v-w_$u*w_$C)/w_$U)-w_$G)*(w_$X-w_$G)+((w_$Z=(w_$o*w_$C-w_$H*w_$v)/w_$U)-w_$T)+(w_$Z-w_$T),w_$z.push(w_$X+this.x,w_$Z+this.y,w_$S,w_$N,w_$R,w_$G-(w_$X-w_$G)+this.x,w_$T-(w_$Z-w_$T)+this.y,w_$S,w_$N,w_$R));w_$t=w_$w[w_$w.length-4],w_$P=w_$w[w_$w.length-3],w_$$=w_$t-(w_$G=w_$w[w_$w.length-2]),w_$i=(w_$i=-(w_$P-(w_$T=w_$w[w_$w.length-1])))/(w_$x=Math.sqrt(w_$i*w_$i+w_$$*w_$$))*w_$E,w_$$=w_$$/w_$x*w_$E,w_$z.push(w_$G-w_$i+this.x,w_$T-w_$$+this.y,w_$S,w_$N,w_$R,w_$G+w_$i+this.x,w_$T+w_$$+this.y,w_$S,w_$N,w_$R);var w_$g=w_$s;for(w_$j=1;w_$j<w_$g;w_$j++)w_$h.push(w_$M+2*(w_$j-1),w_$M+2*(w_$j-1)+1,w_$M+2*w_$j+1,w_$M+2*w_$j+1,w_$M+2*w_$j,w_$M+2*(w_$j-1));return w_$z},w_$h.createLine=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.concat(),w_$s=w_$B,w_$X=this.borderColor,w_$Z=(w_$X>>16&255)/255,w_$t=(w_$X>>8&255)/255,w_$P=(255&w_$X)/255;w_$n.splice(0,5);var w_$G,w_$T,w_$b,w_$Q,w_$i,w_$$,w_$V,w_$J,w_$H,w_$y,w_$C,w_$o,w_$u,w_$v,w_$U,w_$x,w_$w,w_$z,w_$a,w_$S,w_$N=w_$n.length/5,w_$R=w_$A,w_$W=w_$l/2;w_$b=w_$n[0],w_$Q=w_$n[1],w_$y=w_$b-(w_$i=w_$n[5]),w_$H=(w_$H=-(w_$Q-(w_$$=w_$n[6])))/(w_$S=Math.sqrt(w_$H*w_$H+w_$y*w_$y))*w_$W,w_$y=w_$y/w_$S*w_$W,w_$s.push(w_$b-w_$H,w_$Q-w_$y,w_$Z,w_$t,w_$P,w_$b+w_$H,w_$Q+w_$y,w_$Z,w_$t,w_$P);for(var w_$M=1;w_$M<w_$N-1;w_$M++)w_$b=w_$n[5*(w_$M-1)],w_$Q=w_$n[5*(w_$M-1)+1],w_$i=w_$n[5*w_$M],w_$$=w_$n[5*w_$M+1],w_$V=w_$n[5*(w_$M+1)],w_$J=w_$n[5*(w_$M+1)+1],w_$y=w_$b-w_$i,w_$o=w_$i-w_$V,w_$U=(-(w_$H=(w_$H=-(w_$Q-w_$$))/(w_$S=Math.sqrt(w_$H*w_$H+w_$y*w_$y))*w_$W)+w_$b)*(-(w_$y=w_$y/w_$S*w_$W)+w_$$)-(-w_$H+w_$i)*(-w_$y+w_$Q),w_$z=(-(w_$C=(w_$C=-(w_$$-w_$J))/(w_$S=Math.sqrt(w_$C*w_$C+w_$o*w_$o))*w_$W)+w_$V)*(-(w_$o=w_$o/w_$S*w_$W)+w_$$)-(-w_$C+w_$i)*(-w_$o+w_$J),w_$a=(w_$u=-w_$y+w_$Q-(-w_$y+w_$$))*(w_$w=-w_$C+w_$i-(-w_$C+w_$V))-(w_$x=-w_$o+w_$J-(-w_$o+w_$$))*(w_$v=-w_$H+w_$i-(-w_$H+w_$b)),Math.abs(w_$a)<.1?(w_$a+=10.1,w_$s.push(w_$i-w_$H,w_$$-w_$y,w_$Z,w_$t,w_$P,w_$i+w_$H,w_$$+w_$y,w_$Z,w_$t,w_$P)):(((w_$G=(w_$v*w_$z-w_$w*w_$U)/w_$a)-w_$i)*(w_$G-w_$i)+((w_$T=(w_$x*w_$U-w_$u*w_$z)/w_$a)-w_$$)+(w_$T-w_$$),w_$s.push(w_$G,w_$T,w_$Z,w_$t,w_$P,w_$i-(w_$G-w_$i),w_$$-(w_$T-w_$$),w_$Z,w_$t,w_$P));w_$b=w_$n[w_$n.length-10],w_$Q=w_$n[w_$n.length-9],w_$y=w_$b-(w_$i=w_$n[w_$n.length-5]),w_$H=(w_$H=-(w_$Q-(w_$$=w_$n[w_$n.length-4])))/(w_$S=Math.sqrt(w_$H*w_$H+w_$y*w_$y))*w_$W,w_$y=w_$y/w_$S*w_$W,w_$s.push(w_$i-w_$H,w_$$-w_$y,w_$Z,w_$t,w_$P,w_$i+w_$H,w_$$+w_$y,w_$Z,w_$t,w_$P);var w_$E=this.edges+1;for(w_$M=1;w_$M<w_$E;w_$M++)w_$h.push(w_$R+2*(w_$M-1),w_$R+2*(w_$M-1)+1,w_$R+2*w_$M+1,w_$R+2*w_$M+1,w_$R+2*w_$M,w_$R+2*(w_$M-1));return w_$s},w_$h.createLoopLine=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$B.concat(),w_$Z=w_$n||w_$B,w_$t=this.borderColor,w_$P=(w_$t>>16&255)/255,w_$G=(w_$t>>8&255)/255,w_$T=(255&w_$t)/255;w_$X.splice(0,5);var w_$b=[w_$X[0],w_$X[1]],w_$Q=[w_$X[w_$X.length-5],w_$X[w_$X.length-4]],w_$i=w_$Q[0]+.5*(w_$b[0]-w_$Q[0]),w_$$=w_$Q[1]+.5*(w_$b[1]-w_$Q[1]);w_$X.unshift(w_$i,w_$$,0,0,0),w_$X.push(w_$i,w_$$,0,0,0);var w_$V,w_$J,w_$H,w_$y,w_$C,w_$o,w_$u,w_$v,w_$U,w_$x,w_$w,w_$z,w_$a,w_$S,w_$N,w_$R,w_$W,w_$M,w_$E,w_$j,w_$g=w_$X.length/5,w_$_=w_$A,w_$d=w_$l/2;w_$H=w_$X[0],w_$y=w_$X[1],w_$x=w_$H-(w_$C=w_$X[5]),w_$U=(w_$U=-(w_$y-(w_$o=w_$X[6])))/(w_$j=Math.sqrt(w_$U*w_$U+w_$x*w_$x))*w_$d,w_$x=w_$x/w_$j*w_$d,w_$Z.push(w_$H-w_$U,w_$y-w_$x,w_$P,w_$G,w_$T,w_$H+w_$U,w_$y+w_$x,w_$P,w_$G,w_$T);for(var w_$k=1;w_$k<w_$g-1;w_$k++)w_$H=w_$X[5*(w_$k-1)],w_$y=w_$X[5*(w_$k-1)+1],w_$C=w_$X[5*w_$k],w_$o=w_$X[5*w_$k+1],w_$u=w_$X[5*(w_$k+1)],w_$v=w_$X[5*(w_$k+1)+1],w_$x=w_$H-w_$C,w_$z=w_$C-w_$u,w_$N=(-(w_$U=(w_$U=-(w_$y-w_$o))/(w_$j=Math.sqrt(w_$U*w_$U+w_$x*w_$x))*w_$d)+w_$H)*(-(w_$x=w_$x/w_$j*w_$d)+w_$o)-(-w_$U+w_$C)*(-w_$x+w_$y),w_$M=(-(w_$w=(w_$w=-(w_$o-w_$v))/(w_$j=Math.sqrt(w_$w*w_$w+w_$z*w_$z))*w_$d)+w_$u)*(-(w_$z=w_$z/w_$j*w_$d)+w_$o)-(-w_$w+w_$C)*(-w_$z+w_$v),w_$E=(w_$a=-w_$x+w_$y-(-w_$x+w_$o))*(w_$W=-w_$w+w_$C-(-w_$w+w_$u))-(w_$R=-w_$z+w_$v-(-w_$z+w_$o))*(w_$S=-w_$U+w_$C-(-w_$U+w_$H)),Math.abs(w_$E)<.1?(w_$E+=10.1,w_$Z.push(w_$C-w_$U,w_$o-w_$x,w_$P,w_$G,w_$T,w_$C+w_$U,w_$o+w_$x,w_$P,w_$G,w_$T)):(((w_$V=(w_$S*w_$M-w_$W*w_$N)/w_$E)-w_$C)*(w_$V-w_$C)+((w_$J=(w_$R*w_$N-w_$a*w_$M)/w_$E)-w_$o)+(w_$J-w_$o),w_$Z.push(w_$V,w_$J,w_$P,w_$G,w_$T,w_$C-(w_$V-w_$C),w_$o-(w_$J-w_$o),w_$P,w_$G,w_$T));w_$s&&(w_$h=w_$s);var w_$O=this.edges+1;for(w_$k=1;w_$k<w_$O;w_$k++)w_$h.push(w_$_+2*(w_$k-1),w_$_+2*(w_$k-1)+1,w_$_+2*w_$k+1,w_$_+2*w_$k+1,w_$_+2*w_$k,w_$_+2*(w_$k-1));return w_$h.push(w_$_+2*(w_$k-1),w_$_+2*(w_$k-1)+1,w_$_+1,w_$_+1,w_$_,w_$_+2*(w_$k-1)),w_$Z},w_$B}(),w_$AB=function(){function w_$$(){}return w_$b(w_$$,"laya.webgl.shapes.Earcut"),w_$$.earcut=function(w_$B,w_$h,w_$l){w_$l=w_$l||2;var w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G=w_$h&&w_$h.length,w_$T=w_$G?w_$h[0]*w_$l:w_$B.length,w_$b=w_$$.linkedList(w_$B,0,w_$T,w_$l,!0),w_$Q=[];if(!w_$b)return w_$Q;if(w_$G&&(w_$b=w_$$.eliminateHoles(w_$B,w_$h,w_$b,w_$l)),w_$B.length>80*w_$l){w_$A=w_$s=w_$B[0],w_$n=w_$X=w_$B[1];for(var w_$i=w_$l;w_$i<w_$T;w_$i+=w_$l)(w_$Z=w_$B[w_$i])<w_$A&&(w_$A=w_$Z),(w_$t=w_$B[w_$i+1])<w_$n&&(w_$n=w_$t),w_$s<w_$Z&&(w_$s=w_$Z),w_$X<w_$t&&(w_$X=w_$t);w_$P=0!==(w_$P=Math.max(w_$s-w_$A,w_$X-w_$n))?1/w_$P:0}return w_$$.earcutLinked(w_$b,w_$Q,w_$l,w_$A,w_$n,w_$P),w_$Q},w_$$.linkedList=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s,w_$X;if(w_$n===0<w_$$.signedArea(w_$B,w_$h,w_$l,w_$A))for(w_$s=w_$h;w_$s<w_$l;w_$s+=w_$A)w_$X=w_$$.insertNode(w_$s,w_$B[w_$s],w_$B[w_$s+1],w_$X);else for(w_$s=w_$l-w_$A;w_$h<=w_$s;w_$s-=w_$A)w_$X=w_$$.insertNode(w_$s,w_$B[w_$s],w_$B[w_$s+1],w_$X);return w_$X&&w_$$.equals(w_$X,w_$X.next)&&(w_$$.removeNode(w_$X),w_$X=w_$X.next),w_$X},w_$$.filterPoints=function(w_$B,w_$h){if(!w_$B)return w_$B;w_$h||(w_$h=w_$B);var w_$l,w_$A=w_$B;do{if(w_$l=!1,w_$A.steiner||!w_$$.equals(w_$A,w_$A.next)&&0!==w_$$.area(w_$A.prev,w_$A,w_$A.next))w_$A=w_$A.next;else{if(w_$$.removeNode(w_$A),(w_$A=w_$h=w_$A.prev)===w_$A.next)break;w_$l=!0}}while(w_$l||w_$A!==w_$h);return w_$h},w_$$.earcutLinked=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){if(w_$B){!w_$X&&w_$s&&w_$$.indexCurve(w_$B,w_$A,w_$n,w_$s);for(var w_$Z,w_$t,w_$P=w_$B;w_$B.prev!==w_$B.next;)if(w_$Z=w_$B.prev,w_$t=w_$B.next,w_$s?w_$$.isEarHashed(w_$B,w_$A,w_$n,w_$s):w_$$.isEar(w_$B))w_$h.push(w_$Z.i/w_$l),w_$h.push(w_$B.i/w_$l),w_$h.push(w_$t.i/w_$l),w_$$.removeNode(w_$B),w_$B=w_$t.next,w_$P=w_$t.next;else if((w_$B=w_$t)===w_$P){w_$X?1===w_$X?(w_$B=w_$$.cureLocalIntersections(w_$B,w_$h,w_$l),w_$$.earcutLinked(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,2)):2===w_$X&&w_$$.splitEarcut(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s):w_$$.earcutLinked(w_$$.filterPoints(w_$B,null),w_$h,w_$l,w_$A,w_$n,w_$s,1);break}}},w_$$.isEar=function(w_$B){var w_$h=w_$B.prev,w_$l=w_$B,w_$A=w_$B.next;if(0<=w_$$.area(w_$h,w_$l,w_$A))return!1;for(var w_$n=w_$B.next.next;w_$n!==w_$B.prev;){if(w_$$.pointInTriangle(w_$h.x,w_$h.y,w_$l.x,w_$l.y,w_$A.x,w_$A.y,w_$n.x,w_$n.y)&&0<=w_$$.area(w_$n.prev,w_$n,w_$n.next))return!1;w_$n=w_$n.next}return!0},w_$$.isEarHashed=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.prev,w_$s=w_$B,w_$X=w_$B.next;if(0<=w_$$.area(w_$n,w_$s,w_$X))return!1;for(var w_$Z=w_$n.x<w_$s.x?w_$n.x<w_$X.x?w_$n.x:w_$X.x:w_$s.x<w_$X.x?w_$s.x:w_$X.x,w_$t=w_$n.y<w_$s.y?w_$n.y<w_$X.y?w_$n.y:w_$X.y:w_$s.y<w_$X.y?w_$s.y:w_$X.y,w_$P=w_$n.x>w_$s.x?w_$n.x>w_$X.x?w_$n.x:w_$X.x:w_$s.x>w_$X.x?w_$s.x:w_$X.x,w_$G=w_$n.y>w_$s.y?w_$n.y>w_$X.y?w_$n.y:w_$X.y:w_$s.y>w_$X.y?w_$s.y:w_$X.y,w_$T=w_$$.zOrder(w_$Z,w_$t,w_$h,w_$l,w_$A),w_$b=w_$$.zOrder(w_$P,w_$G,w_$h,w_$l,w_$A),w_$Q=w_$B.nextZ;w_$Q&&w_$Q.z<=w_$b;){if(w_$Q!==w_$B.prev&&w_$Q!==w_$B.next&&w_$$.pointInTriangle(w_$n.x,w_$n.y,w_$s.x,w_$s.y,w_$X.x,w_$X.y,w_$Q.x,w_$Q.y)&&0<=w_$$.area(w_$Q.prev,w_$Q,w_$Q.next))return!1;w_$Q=w_$Q.nextZ}for(w_$Q=w_$B.prevZ;w_$Q&&w_$Q.z>=w_$T;){if(w_$Q!==w_$B.prev&&w_$Q!==w_$B.next&&w_$$.pointInTriangle(w_$n.x,w_$n.y,w_$s.x,w_$s.y,w_$X.x,w_$X.y,w_$Q.x,w_$Q.y)&&0<=w_$$.area(w_$Q.prev,w_$Q,w_$Q.next))return!1;w_$Q=w_$Q.prevZ}return!0},w_$$.cureLocalIntersections=function(w_$B,w_$h,w_$l){var w_$A=w_$B;do{var w_$n=w_$A.prev,w_$s=w_$A.next.next;!w_$$.equals(w_$n,w_$s)&&w_$$.intersects(w_$n,w_$A,w_$A.next,w_$s)&&w_$$.locallyInside(w_$n,w_$s)&&w_$$.locallyInside(w_$s,w_$n)&&(w_$h.push(w_$n.i/w_$l),w_$h.push(w_$A.i/w_$l),w_$h.push(w_$s.i/w_$l),w_$$.removeNode(w_$A),w_$$.removeNode(w_$A.next),w_$A=w_$B=w_$s),w_$A=w_$A.next}while(w_$A!==w_$B);return w_$A},w_$$.splitEarcut=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$B;do{for(var w_$Z=w_$X.next.next;w_$Z!==w_$X.prev;){if(w_$X.i!==w_$Z.i&&w_$$.isValidDiagonal(w_$X,w_$Z)){var w_$t=w_$$.splitPolygon(w_$X,w_$Z);return w_$X=w_$$.filterPoints(w_$X,w_$X.next),w_$t=w_$$.filterPoints(w_$t,w_$t.next),w_$$.earcutLinked(w_$X,w_$h,w_$l,w_$A,w_$n,w_$s),void w_$$.earcutLinked(w_$t,w_$h,w_$l,w_$A,w_$n,w_$s)}w_$Z=w_$Z.next}w_$X=w_$X.next}while(w_$X!==w_$B)},w_$$.eliminateHoles=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P=[];for(w_$n=0,w_$s=w_$h.length;w_$n<w_$s;w_$n++)w_$X=w_$h[w_$n]*w_$A,w_$Z=w_$n<w_$s-1?w_$h[w_$n+1]*w_$A:w_$B.length,(w_$t=w_$$.linkedList(w_$B,w_$X,w_$Z,w_$A,!1))===w_$t.next&&(w_$t.steiner=!0),w_$P.push(w_$$.getLeftmost(w_$t));for(w_$P.sort(w_$$.compareX),w_$n=0;w_$n<w_$P.length;w_$n++)w_$$.eliminateHole(w_$P[w_$n],w_$l),w_$l=w_$$.filterPoints(w_$l,w_$l.next);return w_$l},w_$$.compareX=function(w_$B,w_$h){return w_$B.x-w_$h.x},w_$$.eliminateHole=function(w_$B,w_$h){if(w_$h=w_$$.findHoleBridge(w_$B,w_$h)){var w_$l=w_$$.splitPolygon(w_$h,w_$B);w_$$.filterPoints(w_$l,w_$l.next)}},w_$$.findHoleBridge=function(w_$B,w_$h){var w_$l,w_$A=w_$h,w_$n=w_$B.x,w_$s=w_$B.y,w_$X=-1/0;do{if(w_$s<=w_$A.y&&w_$s>=w_$A.next.y&&w_$A.next.y!==w_$A.y){var w_$Z=w_$A.x+(w_$s-w_$A.y)*(w_$A.next.x-w_$A.x)/(w_$A.next.y-w_$A.y);if(w_$Z<=w_$n&&w_$X<w_$Z){if((w_$X=w_$Z)===w_$n){if(w_$s===w_$A.y)return w_$A;if(w_$s===w_$A.next.y)return w_$A.next}w_$l=w_$A.x<w_$A.next.x?w_$A:w_$A.next}}w_$A=w_$A.next}while(w_$A!==w_$h);if(!w_$l)return null;if(w_$n===w_$X)return w_$l.prev;var w_$t,w_$P=w_$l,w_$G=w_$l.x,w_$T=w_$l.y,w_$b=1/0;for(w_$A=w_$l.next;w_$A!==w_$P;)w_$n>=w_$A.x&&w_$A.x>=w_$G&&w_$n!==w_$A.x&&w_$$.pointInTriangle(w_$s<w_$T?w_$n:w_$X,w_$s,w_$G,w_$T,w_$s<w_$T?w_$X:w_$n,w_$s,w_$A.x,w_$A.y)&&((w_$t=Math.abs(w_$s-w_$A.y)/(w_$n-w_$A.x))<w_$b||w_$t===w_$b&&w_$A.x>w_$l.x)&&w_$$.locallyInside(w_$A,w_$B)&&(w_$l=w_$A,w_$b=w_$t),w_$A=w_$A.next;return w_$l},w_$$.indexCurve=function(w_$B,w_$h,w_$l,w_$A){for(var w_$n=w_$B;null===w_$n.z&&(w_$n.z=w_$$.zOrder(w_$n.x,w_$n.y,w_$h,w_$l,w_$A)),w_$n.prevZ=w_$n.prev,w_$n.nextZ=w_$n.next,(w_$n=w_$n.next)!==w_$B;);w_$n.prevZ.nextZ=null,w_$n.prevZ=null,w_$$.sortLinked(w_$n)},w_$$.sortLinked=function(w_$B){var w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P=1;do{for(w_$l=w_$B,w_$s=w_$B=null,w_$X=0;w_$l;){for(w_$X++,w_$A=w_$l,w_$h=w_$Z=0;w_$h<w_$P&&(w_$Z++,w_$A=w_$A.nextZ);w_$h++);for(w_$t=w_$P;0<w_$Z||0<w_$t&&w_$A;)0!==w_$Z&&(0===w_$t||!w_$A||w_$l.z<=w_$A.z)?(w_$l=(w_$n=w_$l).nextZ,w_$Z--):(w_$A=(w_$n=w_$A).nextZ,w_$t--),w_$s?w_$s.nextZ=w_$n:w_$B=w_$n,w_$n.prevZ=w_$s,w_$s=w_$n;w_$l=w_$A}w_$s.nextZ=null,w_$P*=2}while(1<w_$X);return w_$B},w_$$.zOrder=function(w_$B,w_$h,w_$l,w_$A,w_$n){return(w_$B=1431655765&((w_$B=858993459&((w_$B=252645135&((w_$B=16711935&((w_$B=32767*(w_$B-w_$l)*w_$n)|w_$B<<8))|w_$B<<4))|w_$B<<2))|w_$B<<1))|(w_$h=1431655765&((w_$h=858993459&((w_$h=252645135&((w_$h=16711935&((w_$h=32767*(w_$h-w_$A)*w_$n)|w_$h<<8))|w_$h<<4))|w_$h<<2))|w_$h<<1))<<1},w_$$.getLeftmost=function(w_$B){for(var w_$h=w_$B,w_$l=w_$B;w_$h.x<w_$l.x&&(w_$l=w_$h),(w_$h=w_$h.next)!==w_$B;);return w_$l},w_$$.pointInTriangle=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){return 0<=(w_$n-w_$X)*(w_$h-w_$Z)-(w_$B-w_$X)*(w_$s-w_$Z)&&0<=(w_$B-w_$X)*(w_$A-w_$Z)-(w_$l-w_$X)*(w_$h-w_$Z)&&0<=(w_$l-w_$X)*(w_$s-w_$Z)-(w_$n-w_$X)*(w_$A-w_$Z)},w_$$.isValidDiagonal=function(w_$B,w_$h){return w_$B.next.i!==w_$h.i&&w_$B.prev.i!==w_$h.i&&!w_$$.intersectsPolygon(w_$B,w_$h)&&w_$$.locallyInside(w_$B,w_$h)&&w_$$.locallyInside(w_$h,w_$B)&&w_$$.middleInside(w_$B,w_$h)},w_$$.area=function(w_$B,w_$h,w_$l){return(w_$h.y-w_$B.y)*(w_$l.x-w_$h.x)-(w_$h.x-w_$B.x)*(w_$l.y-w_$h.y)},w_$$.equals=function(w_$B,w_$h){return w_$B.x===w_$h.x&&w_$B.y===w_$h.y},w_$$.intersects=function(w_$B,w_$h,w_$l,w_$A){return!!(w_$$.equals(w_$B,w_$h)&&w_$$.equals(w_$l,w_$A)||w_$$.equals(w_$B,w_$A)&&w_$$.equals(w_$l,w_$h))||0<w_$$.area(w_$B,w_$h,w_$l)!=0<w_$$.area(w_$B,w_$h,w_$A)&&0<w_$$.area(w_$l,w_$A,w_$B)!=0<w_$$.area(w_$l,w_$A,w_$h)},w_$$.intersectsPolygon=function(w_$B,w_$h){var w_$l=w_$B;do{if(w_$l.i!==w_$B.i&&w_$l.next.i!==w_$B.i&&w_$l.i!==w_$h.i&&w_$l.next.i!==w_$h.i&&w_$$.intersects(w_$l,w_$l.next,w_$B,w_$h))return!0;w_$l=w_$l.next}while(w_$l!==w_$B);return!1},w_$$.locallyInside=function(w_$B,w_$h){return w_$$.area(w_$B.prev,w_$B,w_$B.next)<0?0<=w_$$.area(w_$B,w_$h,w_$B.next)&&0<=w_$$.area(w_$B,w_$B.prev,w_$h):w_$$.area(w_$B,w_$h,w_$B.prev)<0||w_$$.area(w_$B,w_$B.next,w_$h)<0},w_$$.middleInside=function(w_$B,w_$h){for(var w_$l=w_$B,w_$A=!1,w_$n=(w_$B.x+w_$h.x)/2,w_$s=(w_$B.y+w_$h.y)/2;w_$l.y>w_$s!=w_$l.next.y>w_$s&&w_$l.next.y!==w_$l.y&&w_$n<(w_$l.next.x-w_$l.x)*(w_$s-w_$l.y)/(w_$l.next.y-w_$l.y)+w_$l.x&&(w_$A=!w_$A),(w_$l=w_$l.next)!==w_$B;);return w_$A},w_$$.splitPolygon=function(w_$B,w_$h){var w_$l=new w_$nB(w_$B.i,w_$B.x,w_$B.y),w_$A=new w_$nB(w_$h.i,w_$h.x,w_$h.y),w_$n=w_$B.next,w_$s=w_$h.prev;return(w_$B.next=w_$h).prev=w_$B,(w_$l.next=w_$n).prev=w_$l,(w_$A.next=w_$l).prev=w_$A,(w_$s.next=w_$A).prev=w_$s,w_$A},w_$$.insertNode=function(w_$B,w_$h,w_$l,w_$A){var w_$n=new w_$nB(w_$B,w_$h,w_$l);return w_$A?(w_$n.next=w_$A.next,(w_$n.prev=w_$A).next.prev=w_$n,w_$A.next=w_$n):(w_$n.prev=w_$n).next=w_$n,w_$n},w_$$.removeNode=function(w_$B){w_$B.next.prev=w_$B.prev,w_$B.prev.next=w_$B.next,w_$B.prevZ&&(w_$B.prevZ.nextZ=w_$B.nextZ),w_$B.nextZ&&(w_$B.nextZ.prevZ=w_$B.prevZ)},w_$$.signedArea=function(w_$B,w_$h,w_$l,w_$A){for(var w_$n=0,w_$s=w_$h,w_$X=w_$l-w_$A;w_$s<w_$l;w_$s+=w_$A)w_$n+=(w_$B[w_$X]-w_$B[w_$s])*(w_$B[w_$s+1]+w_$B[w_$X+1]),w_$X=w_$s;return w_$n},w_$$}(),w_$nB=function(){function w_$B(w_$B,w_$h,w_$l){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=w_$B,this.x=w_$h,this.y=w_$l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return w_$b(w_$B,"laya.webgl.shapes.EarcutNode"),w_$B}(),w_$sB=(function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this.lineWidth=w_$B,this.lineColor=w_$h,this.lineAlpha=w_$l,this.fillColor=w_$A,this.fillAlpha=w_$n,this.shape=w_$X,this.fill=w_$s}w_$b(w_$B,"laya.webgl.shapes.GeometryData");var w_$h=w_$B.prototype;w_$h.clone=function(){return new w_$B(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},w_$h.getIndexData=function(){return null},w_$h.getVertexData=function(){return null},w_$h.destroy=function(){this.shape=null}}(),function(){function w_$B(w_$B){if(w_$B instanceof Float32Array)this.points=w_$B;else if(w_$B instanceof Array){w_$B.length;this.points=new Float32Array(w_$B)}}w_$b(w_$B,"laya.webgl.shapes.Vertex");var w_$h=w_$B.prototype;w_$u.imps(w_$h,{"laya.webgl.shapes.IShape":!0}),w_$h.getData=function(w_$B,w_$h,w_$l){},w_$h.needUpdate=function(w_$B){return!1},w_$h.rebuild=function(w_$B){},w_$h.setMatrix=function(w_$B){}}(),function(){function w_$t(w_$B){void 0===w_$B&&(w_$B=1e4),this._renderType=w_$B}w_$b(w_$t,"laya.webgl.submit.Submit");var w_$B=w_$t.prototype;return w_$u.imps(w_$B,{"laya.webgl.submit.ISubmit":!0}),w_$B.releaseRender=function(){var w_$B=w_$t._cache;(w_$B[w_$B._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},w_$B.getRenderType=function(){return this._renderType},w_$B.renderSubmit=function(){if(0===this._numEle)return 1;var w_$B=this.shaderValue.textureHost;if(w_$B){var w_$h=w_$B.source;if(!w_$B.bitmap||!w_$h)return 1;this.shaderValue.texture=w_$h,w_$B.alphaTexture&&w_$B.alphaTexture.source&&(this.shaderValue.texture1=w_$B.alphaTexture.source)}this._vb.bind_upload(this._ib);var w_$l=w_$CB.mainContext;return this.shaderValue.upload(),w_$F.activeBlendFunction!==this._blendFn&&(w_$l.enable(3042),this._blendFn(w_$l),w_$F.activeBlendFunction=this._blendFn),w_$N.drawCall++,w_$N.trianglesFaces+=this._numEle/3,w_$l.drawElements(4,this._numEle,5123,this._startIdx),1},w_$t.__init__=function(){var w_$B=w_$t.RENDERBASE=new w_$t(-1);w_$B.shaderValue=new w_$UB(0,0),w_$B.shaderValue.ALPHA=-1234},w_$t.createSubmit=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$t._cache._length?w_$t._cache[--w_$t._cache._length]:new w_$t;null==w_$l&&((w_$l=w_$s._selfVb||(w_$s._selfVb=w_$rB.create(-1))).clear(),w_$A=0),w_$s._ib=w_$h,w_$s._vb=w_$l,w_$s._startIdx=w_$A*w_$$B.BYTES_PIDX,w_$s._numEle=0;var w_$X=w_$B._nBlendType;w_$s._blendFn=w_$B._targets?w_$F.targetFns[w_$X]:w_$F.fns[w_$X],w_$s.shaderValue=w_$n,w_$s.shaderValue.setValue(w_$B._shader2D);var w_$Z=w_$B._shader2D.filters;return w_$Z&&w_$s.shaderValue.setFilters(w_$Z),w_$s},w_$t.createShape=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$t._cache._length?w_$t._cache[--w_$t._cache._length]:new w_$t;w_$X._ib=w_$h,w_$X._vb=w_$l,w_$X._numEle=w_$A,w_$X._startIdx=w_$n,w_$X.shaderValue=w_$s,w_$X.shaderValue.setValue(w_$B._shader2D);var w_$Z=w_$B._nBlendType;return w_$X._blendFn=w_$B._targets?w_$F.targetFns[w_$Z]:w_$F.fns[w_$Z],w_$X},w_$t.TYPE_2D=1e4,w_$t.TYPE_CANVAS=10003,w_$t.TYPE_CMDSETRT=10004,w_$t.TYPE_CUSTOM=10005,w_$t.TYPE_BLURRT=10006,w_$t.TYPE_CMDDESTORYPRERT=10007,w_$t.TYPE_DISABLESTENCIL=10008,w_$t.TYPE_OTHERIBVB=10009,w_$t.TYPE_PRIMITIVE=10010,w_$t.TYPE_RT=10011,w_$t.TYPE_BLUR_RT=10012,w_$t.TYPE_TARGET=10013,w_$t.TYPE_CHANGE_VALUE=10014,w_$t.TYPE_SHAPE=10015,w_$t.TYPE_TEXTURE=10016,w_$t.TYPE_FILLTEXTURE=10017,w_$t.RENDERBASE=null,w_$t._cache=((w_$t._cache=[])._length=0,w_$t._cache),w_$t}()),w_$XB=function(){function w_$A(){this.fun=null,this.args=null}w_$b(w_$A,"laya.webgl.submit.SubmitCMD");var w_$B=w_$A.prototype;return w_$u.imps(w_$B,{"laya.webgl.submit.ISubmit":!0}),w_$B.renderSubmit=function(){return this.fun.apply(null,this.args),1},w_$B.getRenderType=function(){return 0},w_$B.releaseRender=function(){var w_$B=w_$A._cache;w_$B[w_$B._length++]=this},w_$A.create=function(w_$B,w_$h){var w_$l=w_$A._cache._length?w_$A._cache[--w_$A._cache._length]:new w_$A;return w_$l.fun=w_$h,w_$l.args=w_$B,w_$l},w_$A._cache=((w_$A._cache=[])._length=0,w_$A._cache),w_$A}(),w_$ZB=function(){function w_$h(){this.variables={}}w_$b(w_$h,"laya.webgl.submit.SubmitCMDScope");var w_$B=w_$h.prototype;return w_$B.getValue=function(w_$B){return this.variables[w_$B]},w_$B.addValue=function(w_$B,w_$h){return this.variables[w_$B]=w_$h},w_$B.setValue=function(w_$B,w_$h){return this.variables.hasOwnProperty(w_$B)?this.variables[w_$B]=w_$h:null},w_$B.clear=function(){for(var w_$B in this.variables)delete this.variables[w_$B]},w_$B.recycle=function(){this.clear(),w_$h.POOL.push(this)},w_$h.create=function(){var w_$B=w_$h.POOL.pop();return w_$B||(w_$B=new w_$h),w_$B},w_$h.POOL=[],w_$h}(),w_$tB=function(){function w_$T(){this.offset=0,this.startIndex=0,this._mat=w_$x.create()}w_$b(w_$T,"laya.webgl.submit.SubmitOtherIBVB");var w_$B=w_$T.prototype;return w_$u.imps(w_$B,{"laya.webgl.submit.ISubmit":!0}),w_$B.releaseRender=function(){var w_$B=w_$T._cache;(w_$B[w_$B._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},w_$B.getRenderType=function(){return 10009},w_$B.renderSubmit=function(){var w_$B=this._shaderValue.textureHost;if(w_$B){var w_$h=w_$B.source;if(!w_$B.bitmap||!w_$h)return 1;this._shaderValue.texture=w_$h}this._vb.bind_upload(this._ib);var w_$l=w_$HB.worldMatrix4,w_$A=w_$x.TEMP;w_$x.mulPre(this._mat,w_$l[0],w_$l[1],w_$l[4],w_$l[5],w_$l[12],w_$l[13],w_$A);var w_$n=w_$HB.worldMatrix4=w_$T.tempMatrix4;w_$n[0]=w_$A.a,w_$n[1]=w_$A.b,w_$n[4]=w_$A.c,w_$n[5]=w_$A.d,w_$n[12]=w_$A.tx,w_$n[13]=w_$A.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var w_$s=w_$CB.mainContext;return w_$F.activeBlendFunction!==this._blendFn&&(w_$s.enable(3042),this._blendFn(w_$s),w_$F.activeBlendFunction=this._blendFn),w_$N.drawCall++,w_$N.trianglesFaces+=this._numEle/3,w_$s.drawElements(4,this._numEle,5123,this.startIndex),w_$HB.worldMatrix4=w_$l,w_$jB.activeShader=null,1},w_$T.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){void 0===w_$t&&(w_$t=0);var w_$P=w_$T._cache._length?w_$T._cache[--w_$T._cache._length]:new w_$T;w_$P._ib=w_$l,w_$P._vb=w_$h,w_$P._numEle=w_$A,w_$P._shader=w_$n,w_$P._shaderValue=w_$s;var w_$G=w_$B._nBlendType;switch(w_$P._blendFn=w_$B._targets?w_$F.targetFns[w_$G]:w_$F.fns[w_$G],w_$t){case 0:w_$P.offset=0,w_$P.startIndex=w_$Z/(w_$$B.BYTES_PE*w_$h.vertexStride)*1.5,w_$P.startIndex*=w_$$B.BYTES_PIDX;break;case 1:w_$P.startIndex=w_$X,w_$P.offset=w_$Z}return w_$P},w_$T._cache=((w_$T._cache=[])._length=0,w_$T._cache),w_$T.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w_$T}(),w_$PB=function(){function w_$l(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new w_$z,this.screenRect=new w_$z}w_$b(w_$l,"laya.webgl.submit.SubmitScissor");var w_$B=w_$l.prototype;return w_$u.imps(w_$B,{"laya.webgl.submit.ISubmit":!0}),w_$B._scissor=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$HB.worldMatrix4,w_$s=w_$n[0],w_$X=w_$n[5],w_$Z=w_$n[12],w_$t=w_$n[13];if(w_$A*=w_$X,(w_$l*=w_$s)<1||w_$A<1)return!1;var w_$P=(w_$B=w_$B*w_$s+w_$Z)+w_$l,w_$G=(w_$h=w_$h*w_$X+w_$t)+w_$A;w_$B<0&&(w_$l=w_$P-(w_$B=0)),w_$h<0&&(w_$A=w_$G-(w_$h=0));var w_$T=w_$HB.worldClipRect;if(w_$B=Math.max(w_$B,w_$T.x),w_$h=Math.max(w_$h,w_$T.y),w_$l=Math.min(w_$P,w_$T.right)-w_$B,w_$A=Math.min(w_$G,w_$T.bottom)-w_$h,w_$l<1||w_$A<1)return!1;var w_$b=w_$HB.worldScissorTest;return this.screenRect.copyFrom(w_$T),w_$T.x=w_$B,w_$T.y=w_$h,w_$T.width=w_$l,w_$T.height=w_$A,w_$HB.worldScissorTest=!0,w_$h=w_$HB.height-w_$h-w_$A,w_$CB.mainContext.scissor(w_$B,w_$h,w_$l,w_$A),w_$CB.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),w_$b?(w_$h=w_$HB.height-this.screenRect.y-this.screenRect.height,w_$CB.mainContext.scissor(this.screenRect.x,w_$h,this.screenRect.width,this.screenRect.height),w_$CB.mainContext.enable(3089)):(w_$CB.mainContext.disable(3089),w_$HB.worldScissorTest=!1),w_$T.copyFrom(this.screenRect),!0},w_$B._scissorWithTagart=function(w_$B,w_$h,w_$l,w_$A){if(w_$l<1||w_$A<1)return!1;var w_$n=w_$B+w_$l,w_$s=w_$h+w_$A;w_$B<0&&(w_$l=w_$n-(w_$B=0)),w_$h<0&&(w_$A=w_$s-(w_$h=0));var w_$X=w_$HB.worldClipRect;if(w_$B=Math.max(w_$B,w_$X.x),w_$h=Math.max(w_$h,w_$X.y),w_$l=Math.min(w_$n,w_$X.right)-w_$B,w_$A=Math.min(w_$s,w_$X.bottom)-w_$h,w_$l<1||w_$A<1)return!1;var w_$Z=w_$HB.worldScissorTest;return this.screenRect.copyFrom(w_$X),w_$HB.worldScissorTest=!0,w_$X.x=w_$B,w_$X.y=w_$h,w_$X.width=w_$l,w_$X.height=w_$A,w_$h=w_$HB.height-w_$h-w_$A,w_$CB.mainContext.scissor(w_$B,w_$h,w_$l,w_$A),w_$CB.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),w_$Z?(w_$h=w_$HB.height-this.screenRect.y-this.screenRect.height,w_$CB.mainContext.scissor(this.screenRect.x,w_$h,this.screenRect.width,this.screenRect.height),w_$CB.mainContext.enable(3089)):(w_$CB.mainContext.disable(3089),w_$HB.worldScissorTest=!1),w_$X.copyFrom(this.screenRect),!0},w_$B.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},w_$B.getRenderType=function(){return 0},w_$B.releaseRender=function(){var w_$B=w_$l._cache;(w_$B[w_$B._length++]=this).context=null},w_$l.create=function(w_$B){var w_$h=w_$l._cache._length?w_$l._cache[--w_$l._cache._length]:new w_$l;return w_$h.context=w_$B,w_$h},w_$l._cache=((w_$l._cache=[])._length=0,w_$l._cache),w_$l}(),w_$GB=function(){function w_$t(){this.step=0,this.blendMode=null,this.level=0}w_$b(w_$t,"laya.webgl.submit.SubmitStencil");var w_$B=w_$t.prototype;return w_$u.imps(w_$B,{"laya.webgl.submit.ISubmit":!0}),w_$B.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},w_$B.getRenderType=function(){return 0},w_$B.releaseRender=function(){var w_$B=w_$t._cache;w_$B[w_$B._length++]=this},w_$B.do1=function(){var w_$B=w_$CB.mainContext;w_$B.enable(2960),w_$B.clear(1024),w_$B.colorMask(!1,!1,!1,!1),w_$B.stencilFunc(514,this.level,255),w_$B.stencilOp(7680,7680,7682)},w_$B.do2=function(){var w_$B=w_$CB.mainContext;w_$B.stencilFunc(514,this.level+1,255),w_$B.colorMask(!0,!0,!0,!0),w_$B.stencilOp(7680,7680,7680)},w_$B.do3=function(){var w_$B=w_$CB.mainContext;w_$B.colorMask(!0,!0,!0,!0),w_$B.stencilOp(7680,7680,7680),w_$B.clear(1024),w_$B.disable(2960)},w_$B.do4=function(){var w_$B=w_$CB.mainContext;0==this.level&&(w_$B.enable(2960),w_$B.clear(1024)),w_$B.colorMask(!1,!1,!1,!1),w_$B.stencilFunc(519,0,255),w_$B.stencilOp(7680,7680,7682)},w_$B.do5=function(){var w_$B=w_$CB.mainContext;w_$B.stencilFunc(514,this.level,255),w_$B.colorMask(!0,!0,!0,!0),w_$B.stencilOp(7680,7680,7680)},w_$B.do6=function(){var w_$B=w_$CB.mainContext;w_$F.targetFns[w_$F.TOINT[this.blendMode]](w_$B)},w_$B.do7=function(){var w_$B=w_$CB.mainContext;w_$B.colorMask(!1,!1,!1,!1),w_$B.stencilOp(7680,7680,7683)},w_$B.do8=function(){var w_$B=w_$CB.mainContext;w_$B.colorMask(!0,!0,!0,!0),w_$B.stencilFunc(514,this.level,255),w_$B.stencilOp(7680,7680,7680)},w_$t.restore=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s;if((w_$B._renderKey=0)<w_$t._mask&&w_$t._mask--,0==w_$t._mask)w_$s=laya.webgl.submit.SubmitStencil.create(3),w_$B.addRenderObject(w_$s),w_$B._curSubmit=w_$sB.RENDERBASE;else{w_$s=laya.webgl.submit.SubmitStencil.create(7),w_$B.addRenderObject(w_$s);var w_$X=w_$B._vb;w_$X._byteLength;if(w_$VB.fillRectImgVb(w_$X,null,w_$h.x,w_$h.y,w_$h.width,w_$h.height,w_$E.DEF_UV,w_$l,w_$A,w_$n,0,0)){w_$B._shader2D.glTexture=null;var w_$Z=w_$B._curSubmit=w_$sB.createSubmit(w_$B,w_$B._ib,w_$X,(w_$X._byteLength-64)/32*3,w_$UB.create(2,0));w_$Z.shaderValue.ALPHA=1,w_$B._submits[w_$B._submits._length++]=w_$Z,w_$B._curSubmit._numEle+=6,w_$B._curSubmit=w_$sB.RENDERBASE}else alert("clipRect calc stencil rect error");w_$s=laya.webgl.submit.SubmitStencil.create(8),w_$B.addRenderObject(w_$s)}},w_$t.restore2=function(w_$B,w_$h){var w_$l;(w_$B._renderKey=0)<w_$t._mask&&w_$t._mask--,0==w_$t._mask?(w_$l=laya.webgl.submit.SubmitStencil.create(3),w_$B.addRenderObject(w_$l),w_$B._curSubmit=w_$sB.RENDERBASE):(w_$l=laya.webgl.submit.SubmitStencil.create(7),w_$B.addRenderObject(w_$l),w_$B._submits[w_$B._submits._length++]=w_$h,w_$l=laya.webgl.submit.SubmitStencil.create(8),w_$B.addRenderObject(w_$l))},w_$t.create=function(w_$B){var w_$h=w_$t._cache._length?w_$t._cache[--w_$t._cache._length]:new w_$t;return 5==(w_$h.step=w_$B)&&++w_$t._mask,w_$h.level=w_$t._mask,w_$h},w_$t._cache=((w_$t._cache=[])._length=0,w_$t._cache),w_$t._mask=0,w_$t}(),w_$TB=function(){function w_$Z(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}w_$b(w_$Z,"laya.webgl.submit.SubmitTarget");var w_$B=w_$Z.prototype;return w_$u.imps(w_$B,{"laya.webgl.submit.ISubmit":!0}),w_$B.renderSubmit=function(){this._vb.bind_upload(this._ib);var w_$B=this.scope.getValue(this.proName);return w_$B&&(this.shaderValue.texture=w_$B.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[w_$B.width,w_$B.height]),this.shaderValue.upload(),this.blend(),w_$N.drawCall++,w_$N.trianglesFaces+=this._numEle/3,w_$CB.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},w_$B.blend=function(){if(w_$F.activeBlendFunction!==w_$F.fns[this.blendType]){var w_$B=w_$CB.mainContext;w_$B.enable(3042),w_$F.fns[this.blendType](w_$B),w_$F.activeBlendFunction=w_$F.fns[this.blendType]}},w_$B.getRenderType=function(){return 0},w_$B.releaseRender=function(){var w_$B=w_$Z._cache;(w_$B[w_$B._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},w_$Z.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$Z._cache._length?w_$Z._cache[--w_$Z._cache._length]:new w_$Z;return w_$X._ib=w_$h,w_$X._vb=w_$l,w_$X.proName=w_$s,w_$X._startIdx=w_$A*w_$$B.BYTES_PIDX,w_$X._numEle=0,w_$X.blendType=w_$B._nBlendType,w_$X.shaderValue=w_$n,w_$X.shaderValue.setValue(w_$B._shader2D),w_$X},w_$Z._cache=((w_$Z._cache=[])._length=0,w_$Z._cache),w_$Z}(),w_$bB=function(){function w_$B(){this._sourceStr=null}w_$b(w_$B,"laya.webgl.text.CharSegment");var w_$h=w_$B.prototype;return w_$u.imps(w_$h,{"laya.webgl.text.ICharSegment":!0}),w_$h.textToSpit=function(w_$B){this._sourceStr=w_$B},w_$h.getChar=function(w_$B){return this._sourceStr.charAt(w_$B)},w_$h.getCharCode=function(w_$B){return this._sourceStr.charCodeAt(w_$B)},w_$h.length=function(){return this._sourceStr.length},w_$B}(),w_$QB=function(){var w_$B;function w_$N(){}return w_$b(w_$N,"laya.webgl.text.DrawText"),w_$N.__init__=function(){w_$N._charsTemp=new Array,w_$N._drawValue=new w_$B,w_$N._charSeg=new w_$bB},w_$N.customCharSeg=function(w_$B){w_$N._charSeg=w_$B},w_$N.getChar=function(w_$B,w_$h,w_$l){var w_$A=w_$YB.createOneChar(w_$B,w_$l);return-1!=w_$h&&(w_$N._charsCache[w_$h]=w_$A),w_$A},w_$N._drawSlow=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b,w_$Q,w_$i){var w_$$,w_$V,w_$J=w_$N._drawValue.value(w_$s,w_$Z,w_$t,w_$P,w_$b,w_$Q,w_$i),w_$H=0,w_$y=0,w_$C=w_$N._charsTemp,w_$o=0,w_$u=NaN;if(w_$A)for(w_$C.length=w_$A.length,w_$H=0,w_$y=w_$A.length;w_$H<w_$y;w_$H++)(w_$V=w_$A[w_$H])&&(w_$u=w_$V.charNum+w_$J.txtID,w_$C[w_$H]=w_$$=w_$N._charsCache[w_$u]||w_$N.getChar(w_$V.char,w_$u,w_$J),w_$$.active());else{var w_$v=w_$l instanceof laya.utils.WordText?w_$l.toString():w_$l;if(w_$M.CharacterCache){w_$N._charSeg.textToSpit(w_$v);var w_$U=w_$N._charSeg.length();for(w_$H=0,w_$y=w_$C.length=w_$U;w_$H<w_$y;w_$H++)w_$u=w_$N._charSeg.getCharCode(w_$H)+w_$J.txtID,w_$C[w_$H]=w_$$=w_$N._charsCache[w_$u]||w_$N.getChar(w_$N._charSeg.getChar(w_$H),w_$u,w_$J),w_$$.active(),w_$o+=w_$$.cw}else w_$C.length=0,(w_$$=w_$N.getChar(w_$v,-1,w_$J)).active(),w_$o+=w_$$.cw,w_$C[0]=w_$$}var w_$x=0;null!==w_$X&&"left"!==w_$X&&(w_$x=-("center"==w_$X?w_$o/2:w_$o));var w_$w,w_$z,w_$a=NaN,w_$S=0;if(w_$A)for(w_$H=0,w_$y=w_$C.length;w_$H<w_$y;w_$H++)w_$$=w_$C[w_$H],w_$V=w_$A[w_$H],w_$$&&w_$V&&!w_$$.isSpace&&(w_$a=w_$$.borderSize,w_$w=w_$$.texture,w_$h._drawText(w_$w,w_$G+w_$x+w_$V.x*w_$b-w_$a,w_$T+w_$V.y*w_$Q-w_$a,w_$w.width,w_$w.height,w_$n,0,0,0,0));else{for(w_$H=0,w_$y=w_$C.length;w_$H<w_$y;w_$H++)(w_$$=w_$C[w_$H])&&!w_$$.isSpace&&(w_$a=w_$$.borderSize,w_$w=w_$$.texture,w_$h._drawText(w_$w,w_$G+w_$x-w_$a,w_$T-w_$a,w_$w.width,w_$w.height,w_$n,0,0,0,0),w_$B&&((w_$z=w_$B[w_$S++])||(w_$z=w_$B[w_$S-1]=[]),w_$z[0]=w_$w,w_$z[1]=w_$x-w_$a,w_$z[2]=-w_$a)),w_$x+=w_$$.cw;w_$B&&(w_$B.length=w_$S)}},w_$N._drawFast=function(w_$B,w_$h,w_$l,w_$A,w_$n){for(var w_$s,w_$X,w_$Z=0,w_$t=w_$B.length;w_$Z<w_$t;w_$Z++)(w_$s=(w_$X=w_$B[w_$Z])[0]).active(),w_$h._drawText(w_$s,w_$A+w_$X[1],w_$n+w_$X[2],w_$s.width,w_$s.height,w_$l,0,0,0,0)},w_$N.drawText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T){if(void 0===w_$T&&(w_$T=0),!(w_$h&&0===w_$h.length||w_$l&&0===w_$l.length)){var w_$b=w_$A.a,w_$Q=w_$A.d;(0!==w_$A.b||0!==w_$A.c)&&(w_$b=w_$Q=1);var w_$i=1!==w_$b||1!==w_$Q;if(w_$i&&w_$u.stage.transform){var w_$$=w_$u.stage.transform;w_$i=w_$$.a===w_$b&&w_$$.d===w_$Q}else w_$i=!1;if(w_$i){var w_$V=(w_$A=w_$A.copyTo(w_$vB._tmpMatrix)).tx,w_$J=w_$A.ty;w_$A.scale(1/w_$b,1/w_$Q),w_$A._checkTransform(),w_$P*=w_$b,w_$G*=w_$Q,w_$P+=w_$V-w_$A.tx,w_$G+=w_$J-w_$A.ty}else w_$b=w_$Q=1;if(w_$l)w_$N._drawSlow(null,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$b,w_$Q,w_$T);else{if(null===w_$h.toUpperCase){var w_$H=w_$b+1e5*w_$Q,w_$y=w_$h;return void(w_$y.changed||w_$y.id!==w_$H?(w_$y.id=w_$H,w_$y.changed=!1,w_$N._drawSlow(w_$y.save,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$b,w_$Q,w_$T)):w_$N._drawFast(w_$y.save,w_$B,w_$A,w_$P,w_$G))}var w_$C=w_$h+w_$n.toString()+w_$X+w_$Z+w_$t+w_$b+w_$Q+w_$s,w_$o=w_$N._textsCache[w_$C];w_$M.CharacterCache?w_$o?w_$N._drawFast(w_$o,w_$B,w_$A,w_$P,w_$G):(w_$N._textsCache.__length||(w_$N._textsCache.__length=0),w_$N._textsCache.__length>w_$v.WebGLTextCacheCount&&((w_$N._textsCache={}).__length=0,w_$N._curPoolIndex=0),w_$N._textCachesPool[w_$N._curPoolIndex]?(w_$o=w_$N._textsCache[w_$C]=w_$N._textCachesPool[w_$N._curPoolIndex]).length=0:w_$N._textCachesPool[w_$N._curPoolIndex]=w_$o=w_$N._textsCache[w_$C]=[],w_$N._textsCache.__length++,w_$N._curPoolIndex++,w_$N._drawSlow(w_$o,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$b,w_$Q,w_$T)):w_$N._drawSlow(w_$o,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$b,w_$Q,w_$T)}}},w_$N._charsTemp=null,w_$N._textCachesPool=[],w_$N._curPoolIndex=0,w_$N._charsCache={},w_$N._textsCache={},w_$N._drawValue=null,w_$N.d=[],w_$N._charSeg=null,w_$N.__init$=function(){w_$B=function(){function w_$t(){}return w_$b(w_$t,""),w_$t.prototype.value=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this.font=w_$B,this.fillColor=w_$h,this.borderColor=w_$l,this.lineWidth=w_$A,this.scaleX=w_$n,this.scaleY=w_$s,this.underLine=w_$X;var w_$Z=w_$B.toString()+w_$n+w_$s+w_$A+(w_$h?w_$h.toLowerCase():" ")+(w_$l?w_$l.toLowerCase():" ")+w_$X;return this.txtID=w_$t._keymap[w_$Z],this.txtID||(this.txtID=1e-7*++w_$t._keymapCount,w_$t._keymap[w_$Z]=this.txtID),this},w_$t.clear=function(){w_$t._keymap={},w_$t._keymapCount=1},w_$t._keymap={},w_$t._keymapCount=1,w_$t}()},w_$N}(),w_$iB=function(){function w_$n(w_$B){this._index=0,this._size=14,this._italic=-2,w_$n._cache2=w_$n._cache2||[],this.setFont(w_$B||"14px Arial")}w_$b(w_$n,"laya.webgl.text.FontInContext");var w_$B=w_$n.prototype;return w_$B.setFont=function(w_$B){var w_$h=w_$n._cache2[w_$B];if(w_$h)this._words=w_$h[0],this._size=w_$h[1];else{this._words=w_$B.split(" ");for(var w_$l=0,w_$A=this._words.length;w_$l<w_$A;w_$l++)if(0<this._words[w_$l].indexOf("px")){this._index=w_$l;break}this._size=parseInt(this._words[this._index]),w_$n._cache2[w_$B]=[this._words,this._size]}this._text=null,this._italic=-2},w_$B.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},w_$B.hasType=function(w_$B){for(var w_$h=0,w_$l=this._words.length;w_$h<w_$l;w_$h++)if(this._words[w_$h]===w_$B)return w_$h;return-1},w_$B.removeType=function(w_$B){for(var w_$h=0,w_$l=this._words.length;w_$h<w_$l;w_$h++)if(this._words[w_$h]===w_$B){this._words.splice(w_$h,1),this._index>w_$h&&this._index--;break}this._text=null,this._italic=-2},w_$B.copyTo=function(w_$B){return w_$B._text=this._text,w_$B._size=this._size,w_$B._index=this._index,w_$B._words=this._words.slice(),w_$B._italic=-2,w_$B},w_$B.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},w_$A(0,w_$B,"size",function(){return this._size},function(w_$B){this._size=w_$B,this._words[this._index]=w_$B+"px",this._text=null}),w_$n.create=function(w_$B){var w_$h=w_$n._cache[w_$B];return w_$h||(w_$h=w_$n._cache[w_$B]=new w_$n(w_$B))},w_$n.EMPTY=new w_$n,w_$n._cache={},w_$n._cache2=null,w_$n}(),w_$$B=function(){function w_$B(){}return w_$b(w_$B,"laya.webgl.utils.CONST3D2D"),w_$B.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w_$B.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],w_$B.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],w_$B._TMPARRAY=[],w_$B._OFFSETX=0,w_$B._OFFSETY=0,w_$X(w_$B,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),w_$B}(),w_$VB=function(){function w_$i(){}return w_$b(w_$i,"laya.webgl.utils.GlUtils"),w_$i.make2DProjection=function(w_$B,w_$h,w_$l){return[2/w_$B,0,0,0,0,-2/w_$h,0,0,0,0,2/w_$l,0,-1,1,0,1]},w_$i.fillIBQuadrangle=function(w_$B,w_$h){if(65535/4<w_$h)throw Error("IBQuadrangle count:"+w_$h+" must<:"+Math.floor(65535/4));w_$h=Math.floor(w_$h),w_$B._resizeBuffer(6*(w_$h+1)*2,!1),w_$B.byteLength=w_$B.bufferLength;for(var w_$l=w_$B.getUint16Array(),w_$A=0,w_$n=0;w_$n<w_$h;w_$n++)w_$l[w_$A++]=4*w_$n,w_$l[w_$A++]=4*w_$n+2,w_$l[w_$A++]=4*w_$n+1,w_$l[w_$A++]=4*w_$n,w_$l[w_$A++]=4*w_$n+3,w_$l[w_$A++]=4*w_$n+2;return w_$B.setNeedUpload(),!0},w_$i.expandIBQuadrangle=function(w_$B,w_$h){w_$B.bufferLength>=6*w_$h*2||w_$i.fillIBQuadrangle(w_$B,w_$h)},w_$i.mathCeilPowerOfTwo=function(w_$B){return w_$B--,w_$B|=w_$B>>1,w_$B|=w_$B>>2,w_$B|=w_$B>>4,w_$B|=w_$B>>8,w_$B|=w_$B>>16,++w_$B},w_$i.fillQuadrangleImgVb=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){var w_$t=16+(w_$B._byteLength>>2);w_$B.byteLength=w_$t<<2;var w_$P=w_$B.getFloat32Array();w_$P[(w_$t-=16)+2]=w_$n[0],w_$P[w_$t+3]=w_$n[1],w_$P[w_$t+6]=w_$n[2],w_$P[w_$t+7]=w_$n[3],w_$P[w_$t+10]=w_$n[4],w_$P[w_$t+11]=w_$n[5],w_$P[w_$t+14]=w_$n[6],w_$P[w_$t+15]=w_$n[7];var w_$G=w_$s.a,w_$T=w_$s.b,w_$b=w_$s.c,w_$Q=w_$s.d;if(1!==w_$G||0!==w_$T||0!==w_$b||1!==w_$Q){w_$s.bTransform=!0;var w_$i=w_$s.tx+w_$X,w_$$=w_$s.ty+w_$Z;w_$P[w_$t]=(w_$A[0]+w_$h)*w_$G+(w_$A[1]+w_$l)*w_$b+w_$i,w_$P[w_$t+1]=(w_$A[0]+w_$h)*w_$T+(w_$A[1]+w_$l)*w_$Q+w_$$,w_$P[w_$t+4]=(w_$A[2]+w_$h)*w_$G+(w_$A[3]+w_$l)*w_$b+w_$i,w_$P[w_$t+5]=(w_$A[2]+w_$h)*w_$T+(w_$A[3]+w_$l)*w_$Q+w_$$,w_$P[w_$t+8]=(w_$A[4]+w_$h)*w_$G+(w_$A[5]+w_$l)*w_$b+w_$i,w_$P[w_$t+9]=(w_$A[4]+w_$h)*w_$T+(w_$A[5]+w_$l)*w_$Q+w_$$,w_$P[w_$t+12]=(w_$A[6]+w_$h)*w_$G+(w_$A[7]+w_$l)*w_$b+w_$i,w_$P[w_$t+13]=(w_$A[6]+w_$h)*w_$T+(w_$A[7]+w_$l)*w_$Q+w_$$}else w_$s.bTransform=!1,w_$h+=w_$s.tx+w_$X,w_$l+=w_$s.ty+w_$Z,w_$P[w_$t]=w_$h+w_$A[0],w_$P[w_$t+1]=w_$l+w_$A[1],w_$P[w_$t+4]=w_$h+w_$A[2],w_$P[w_$t+5]=w_$l+w_$A[3],w_$P[w_$t+8]=w_$h+w_$A[4],w_$P[w_$t+9]=w_$l+w_$A[5],w_$P[w_$t+12]=w_$h+w_$A[6],w_$P[w_$t+13]=w_$l+w_$A[7];return w_$B._upload=!0},w_$i.fillTranglesVB=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){var w_$Z=(w_$B._byteLength>>2)+w_$A.length;w_$B.byteLength=w_$Z<<2;var w_$t=w_$B.getFloat32Array();w_$Z-=w_$A.length;for(var w_$P=w_$A.length,w_$G=w_$n.a,w_$T=w_$n.b,w_$b=w_$n.c,w_$Q=w_$n.d,w_$i=0;w_$i<w_$P;w_$i+=4)if(w_$t[w_$Z+w_$i+2]=w_$A[w_$i+2],w_$t[w_$Z+w_$i+3]=w_$A[w_$i+3],1!==w_$G||0!==w_$T||0!==w_$b||1!==w_$Q){w_$n.bTransform=!0;var w_$$=w_$n.tx+w_$s,w_$V=w_$n.ty+w_$X;w_$t[w_$Z+w_$i]=(w_$A[w_$i]+w_$h)*w_$G+(w_$A[w_$i+1]+w_$l)*w_$b+w_$$,w_$t[w_$Z+w_$i+1]=(w_$A[w_$i]+w_$h)*w_$T+(w_$A[w_$i+1]+w_$l)*w_$Q+w_$V}else w_$n.bTransform=!1,w_$h+=w_$n.tx+w_$s,w_$l+=w_$n.ty+w_$X,w_$t[w_$Z+w_$i]=w_$h+w_$A[w_$i],w_$t[w_$Z+w_$i+1]=w_$l+w_$A[w_$i+1];return w_$B._upload=!0},w_$i.copyPreImgVb=function(w_$B,w_$h,w_$l){var w_$A=w_$B._byteLength>>2;w_$B.byteLength=w_$A+16<<2;for(var w_$n=w_$B.getFloat32Array(),w_$s=0,w_$X=w_$A-16;w_$s<4;w_$s++)w_$n[w_$A]=w_$n[w_$X]+w_$h,++w_$X,w_$n[++w_$A]=w_$n[w_$X]+w_$l,++w_$X,w_$n[++w_$A]=w_$n[w_$X],++w_$X,w_$n[++w_$A]=w_$n[w_$X],++w_$A,++w_$X;w_$B._upload=!0},w_$i.fillRectImgVb=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b){void 0===w_$b&&(w_$b=!1);var w_$Q,w_$i,w_$$,w_$V,w_$J,w_$H,w_$y,w_$C,w_$o,w_$u,w_$v,w_$U,w_$x,w_$w,w_$z,w_$a,w_$S=1,w_$N=w_$Z.a,w_$R=w_$Z.b,w_$W=w_$Z.c,w_$M=w_$Z.d,w_$E=w_$h&&w_$h.width<99999999;if(1!==w_$N||0!==w_$R||0!==w_$W||1!==w_$M?(w_$Z.bTransform=!0,0===w_$R&&0===w_$W&&(w_$S=23,w_$o=w_$n+w_$l,w_$u=w_$s+w_$A,w_$Q=w_$N*w_$l+(w_$v=w_$Z.tx+w_$t),w_$$=w_$N*w_$o+w_$v,w_$i=w_$M*w_$A+(w_$U=w_$Z.ty+w_$P),w_$V=w_$M*w_$u+w_$U)):(w_$S=23,w_$Z.bTransform=!1,w_$$=(w_$Q=w_$l+w_$Z.tx+w_$t)+w_$n,w_$V=(w_$i=w_$A+w_$Z.ty+w_$P)+w_$s),w_$E&&(w_$J=w_$h.x,w_$H=w_$h.y,w_$y=w_$h.width+w_$J,w_$C=w_$h.height+w_$H),1!==w_$S){if(Math.min(w_$Q,w_$$)>=w_$y)return!1;if(Math.min(w_$i,w_$V)>=w_$C)return!1;if(Math.max(w_$$,w_$Q)<=w_$J)return!1;if(Math.max(w_$V,w_$i)<=w_$H)return!1}var w_$j=w_$B._byteLength>>2;w_$B.byteLength=16+w_$j<<2;var w_$g=w_$B.getFloat32Array();switch(w_$g[2+w_$j]=w_$X[0],w_$g[3+w_$j]=w_$X[1],w_$g[6+w_$j]=w_$X[2],w_$g[7+w_$j]=w_$X[3],w_$g[10+w_$j]=w_$X[4],w_$g[11+w_$j]=w_$X[5],w_$g[14+w_$j]=w_$X[6],w_$g[15+w_$j]=w_$X[7],w_$S){case 1:w_$v=w_$Z.tx+w_$t,w_$U=w_$Z.ty+w_$P;var w_$_=w_$N*w_$l,w_$d=w_$W*w_$A,w_$k=w_$M*w_$A,w_$O=w_$R*w_$l,w_$p=w_$N*(w_$o=w_$n+w_$l),w_$F=w_$W*(w_$u=w_$s+w_$A),w_$c=w_$M*w_$u,w_$m=w_$R*w_$o;w_$b?(w_$x=w_$_+w_$d+w_$v,w_$z=Math.round(w_$x)-w_$x,w_$w=w_$k+w_$O+w_$U,w_$a=Math.round(w_$w)-w_$w,w_$g[w_$j]=w_$x+w_$z,w_$g[1+w_$j]=w_$w+w_$a,w_$g[4+w_$j]=w_$p+w_$d+w_$v+w_$z,w_$g[5+w_$j]=w_$k+w_$m+w_$U+w_$a,w_$g[8+w_$j]=w_$p+w_$F+w_$v+w_$z,w_$g[9+w_$j]=w_$c+w_$m+w_$U+w_$a,w_$g[12+w_$j]=w_$_+w_$F+w_$v+w_$z,w_$g[13+w_$j]=w_$c+w_$O+w_$U+w_$a):(w_$g[w_$j]=w_$_+w_$d+w_$v,w_$g[1+w_$j]=w_$k+w_$O+w_$U,w_$g[4+w_$j]=w_$p+w_$d+w_$v,w_$g[5+w_$j]=w_$k+w_$m+w_$U,w_$g[8+w_$j]=w_$p+w_$F+w_$v,w_$g[9+w_$j]=w_$c+w_$m+w_$U,w_$g[12+w_$j]=w_$_+w_$F+w_$v,w_$g[13+w_$j]=w_$c+w_$O+w_$U);break;case 23:w_$b?(w_$x=w_$Q+w_$G,w_$z=Math.round(w_$x)-w_$x,w_$w=w_$i,w_$a=Math.round(w_$w)-w_$w,w_$g[w_$j]=w_$x+w_$z,w_$g[1+w_$j]=w_$w+w_$a,w_$g[4+w_$j]=w_$$+w_$G+w_$z,w_$g[5+w_$j]=w_$i+w_$a,w_$g[8+w_$j]=w_$$+w_$z,w_$g[9+w_$j]=w_$V+w_$a,w_$g[12+w_$j]=w_$Q+w_$z,w_$g[13+w_$j]=w_$V+w_$a):(w_$g[w_$j]=w_$Q+w_$G,w_$g[1+w_$j]=w_$i,w_$g[4+w_$j]=w_$$+w_$G,w_$g[5+w_$j]=w_$i,w_$g[8+w_$j]=w_$$,w_$g[9+w_$j]=w_$V,w_$g[12+w_$j]=w_$Q,w_$g[13+w_$j]=w_$V)}return w_$B._upload=!0},w_$i.fillLineVb=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){var w_$t=.5*w_$X,w_$P=w_$i._fillLineArray,w_$G=-(w_$A-w_$s),w_$T=w_$l-w_$n,w_$b=Math.sqrt(w_$G*w_$G+w_$T*w_$T);w_$G/=w_$b,w_$T/=w_$b,w_$G*=w_$t,w_$T*=w_$t,w_$P[0]=w_$l-w_$G,w_$P[1]=w_$A-w_$T,w_$P[4]=w_$l+w_$G,w_$P[5]=w_$A+w_$T,w_$P[8]=w_$n+w_$G,w_$P[9]=w_$s+w_$T,w_$P[12]=w_$n-w_$G,w_$P[13]=w_$s-w_$T,w_$Z&&w_$Z.transformPointArray(w_$P,w_$P);var w_$Q=16+(w_$B._byteLength>>2);return w_$B.byteLength=w_$Q<<2,w_$B.insertData(w_$P,w_$Q-16),!0},w_$i._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w_$i}(),w_$JB=(function(){function w_$t(){}w_$b(w_$t,"laya.webgl.utils.MatirxArray"),w_$t.ArrayMul=function(w_$B,w_$h,w_$l){if(w_$B)if(w_$h)for(var w_$A=NaN,w_$n=NaN,w_$s=NaN,w_$X=NaN,w_$Z=0;w_$Z<4;w_$Z++)w_$A=w_$B[w_$Z],w_$n=w_$B[w_$Z+4],w_$s=w_$B[w_$Z+8],w_$X=w_$B[w_$Z+12],w_$l[w_$Z]=w_$A*w_$h[0]+w_$n*w_$h[1]+w_$s*w_$h[2]+w_$X*w_$h[3],w_$l[w_$Z+4]=w_$A*w_$h[4]+w_$n*w_$h[5]+w_$s*w_$h[6]+w_$X*w_$h[7],w_$l[w_$Z+8]=w_$A*w_$h[8]+w_$n*w_$h[9]+w_$s*w_$h[10]+w_$X*w_$h[11],w_$l[w_$Z+12]=w_$A*w_$h[12]+w_$n*w_$h[13]+w_$s*w_$h[14]+w_$X*w_$h[15];else w_$t.copyArray(w_$B,w_$l);else w_$t.copyArray(w_$h,w_$l)},w_$t.copyArray=function(w_$B,w_$h){if(w_$B&&w_$h)for(var w_$l=0;w_$l<w_$B.length;w_$l++)w_$h[w_$l]=w_$B[w_$l]}}(),function(){function w_$h(w_$B,w_$h,w_$l){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=w_$B,this._vb=new w_$rB(w_$B,35048),w_$h&&this._vb._resizeBuffer(w_$h,!1),this._ib=new w_$DB,w_$l&&this._ib._resizeBuffer(w_$l,!1)}w_$b(w_$h,"laya.webgl.utils.Mesh2D");var w_$B=w_$h.prototype;return w_$B.cloneWithNewVB=function(){var w_$B=new w_$h(this._stride,0,0);return w_$B._ib=this._ib,w_$B._quadNum=this._quadNum,w_$B._attribInfo=this._attribInfo,w_$B},w_$B.cloneWithNewVBIB=function(){var w_$B=new w_$h(this._stride,0,0);return w_$B._attribInfo=this._attribInfo,w_$B},w_$B.getVBW=function(){return this._vb.setNeedUpload(),this._vb},w_$B.getVBR=function(){return this._vb},w_$B.getIBR=function(){return this._ib},w_$B.getIBW=function(){return this._ib.setNeedUpload(),this._ib},w_$B.createQuadIB=function(w_$B){this._quadNum=w_$B,this._ib._resizeBuffer(6*w_$B*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var w_$h=this._ib.getUint16Array(),w_$l=0,w_$A=0,w_$n=0;w_$n<w_$B;w_$n++)w_$h[w_$l++]=w_$A,w_$h[w_$l++]=w_$A+2,w_$h[w_$l++]=w_$A+1,w_$h[w_$l++]=w_$A,w_$h[w_$l++]=w_$A+3,w_$h[w_$l++]=w_$A+2,w_$A+=4;this._ib.setNeedUpload()},w_$B.setAttributes=function(w_$B){if(this._attribInfo=w_$B,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},w_$B.getEleNum=function(){return this._ib.getBuffer().byteLength/2},w_$B.releaseMesh=function(){},w_$B.destroy=function(){},w_$B.clearVB=function(){this._vb.clear()},w_$h._gvaoid=0,w_$h}()),w_$HB=function(){function w_$n(){}return w_$b(w_$n,"laya.webgl.utils.RenderState2D"),w_$n.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},w_$n.mat2MatArray=function(w_$B,w_$h){var w_$l=w_$B,w_$A=w_$h;return w_$A[0]=w_$l.a,w_$A[1]=w_$l.b,w_$A[2]=w_$n.EMPTYMAT4_ARRAY[2],w_$A[3]=w_$n.EMPTYMAT4_ARRAY[3],w_$A[4]=w_$l.c,w_$A[5]=w_$l.d,w_$A[6]=w_$n.EMPTYMAT4_ARRAY[6],w_$A[7]=w_$n.EMPTYMAT4_ARRAY[7],w_$A[8]=w_$n.EMPTYMAT4_ARRAY[8],w_$A[9]=w_$n.EMPTYMAT4_ARRAY[9],w_$A[10]=w_$n.EMPTYMAT4_ARRAY[10],w_$A[11]=w_$n.EMPTYMAT4_ARRAY[11],w_$A[12]=w_$l.tx,w_$A[13]=w_$l.ty,w_$A[14]=w_$n.EMPTYMAT4_ARRAY[14],w_$A[15]=w_$n.EMPTYMAT4_ARRAY[15],w_$h},w_$n.restoreTempArray=function(){w_$n.TEMPMAT4_ARRAY[0]=1,w_$n.TEMPMAT4_ARRAY[1]=0,w_$n.TEMPMAT4_ARRAY[4]=0,w_$n.TEMPMAT4_ARRAY[5]=1,w_$n.TEMPMAT4_ARRAY[12]=0,w_$n.TEMPMAT4_ARRAY[13]=0},w_$n.clear=function(){w_$n.worldScissorTest=!1,w_$n.worldShaderDefines=null,w_$n.worldFilters=null,w_$n.worldAlpha=1,w_$n.worldClipRect.x=w_$n.worldClipRect.y=0,w_$n.worldClipRect.width=w_$n.width,w_$n.worldClipRect.height=w_$n.height,w_$n.curRenderTarget=null},w_$n._MAXSIZE=99999999,w_$n.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w_$n.worldMatrix4=w_$n.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w_$n.worldAlpha=1,w_$n.worldScissorTest=!1,w_$n.worldFilters=null,w_$n.worldShaderDefines=null,w_$n.curRenderTarget=null,w_$n.width=0,w_$n.height=0,w_$X(w_$n,["worldMatrix",function(){return this.worldMatrix=new w_$x},"worldClipRect",function(){return this.worldClipRect=new w_$z(0,0,99999999,99999999)}]),w_$n}(),w_$yB=function(){var w_$H,w_$l;function w_$y(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=this;function w_$X(w_$B){var w_$h=[],w_$l=new w_$H(w_$h);return w_$s._compileToTree(w_$l,w_$B.split("\n"),0,w_$h,w_$n),w_$l}var w_$Z=w_$Q.now();this._VS=w_$X(w_$h),this._PS=w_$X(w_$l),this._nameMap=w_$A,2<w_$Q.now()-w_$Z&&console.log("ShaderCompile use time:"+(w_$Q.now()-w_$Z)+"  size:"+w_$h.length+"/"+w_$l.length)}w_$b(w_$y,"laya.webgl.utils.ShaderCompile");var w_$B=w_$y.prototype;return w_$B._compileToTree=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b=0,w_$Q=0,w_$i=0,w_$$=0;for(w_$Q=w_$l;w_$Q<w_$h.length;w_$Q++)if(!((w_$Z=w_$h[w_$Q]).length<1)&&0!==(w_$b=w_$Z.indexOf("//"))){if(0<=w_$b&&(w_$Z=w_$Z.substr(0,w_$b)),w_$s=w_$T||new w_$H(w_$A),w_$T=null,w_$s.text=w_$Z,w_$s.noCompile=!0,0<=(w_$b=w_$Z.indexOf("#"))){for(w_$t="#",w_$$=w_$b+1,w_$i=w_$Z.length;w_$$<w_$i;w_$$++){var w_$V=w_$Z.charAt(w_$$);if(" "===w_$V||"\t"===w_$V||"\r"===w_$V||"\n"===w_$V||"?"===w_$V)break;w_$t+=w_$V}switch(w_$s.name=w_$t){case"#ifdef":case"#ifndef":if(w_$s.src=w_$Z,w_$s.noCompile=null!=w_$Z.match(/[!&|()=<>]/),w_$s.noCompile?console.log("function():Boolean{return "+w_$Z.substr(w_$b+w_$s.name.length)+"}"):(w_$G=w_$Z.replace(/^\s*/,"").split(/\s+/),w_$s.setCondition(w_$G[1],"#ifdef"===w_$t?1:2),w_$s.text="//"+w_$s.text),w_$s.setParent(w_$B),w_$B=w_$s,w_$n)for(w_$G=w_$Z.substr(w_$$).split(w_$y._splitToWordExps3),w_$$=0;w_$$<w_$G.length;w_$$++)(w_$Z=w_$G[w_$$]).length&&(w_$n[w_$Z]=!0);continue;case"#if":if(w_$s.src=w_$Z,w_$s.noCompile=!0,w_$s.setParent(w_$B),w_$B=w_$s,w_$n)for(w_$G=w_$Z.substr(w_$$).split(w_$y._splitToWordExps3),w_$$=0;w_$$<w_$G.length;w_$$++)(w_$Z=w_$G[w_$$]).length&&"defined"!=w_$Z&&(w_$n[w_$Z]=!0);continue;case"#else":w_$s.src=w_$Z,w_$X=(w_$B=w_$B.parent).childs[w_$B.childs.length-1],w_$s.noCompile=w_$X.noCompile,w_$s.noCompile||(w_$s.condition=w_$X.condition,w_$s.conditionType=1==w_$X.conditionType?2:1,w_$s.text="//"+w_$s.text+" "+w_$X.text+" "+w_$s.conditionType),w_$s.setParent(w_$B),w_$B=w_$s;continue;case"#endif":w_$X=(w_$B=w_$B.parent).childs[w_$B.childs.length-1],w_$s.noCompile=w_$X.noCompile,w_$s.noCompile||(w_$s.text="//"+w_$s.text),w_$s.setParent(w_$B);continue;case"#include":w_$G=w_$y.splitToWords(w_$Z,null);var w_$J=w_$y.includes[w_$G[1]];if(!w_$J)throw"ShaderCompile error no this include file:"+w_$G[1];if((w_$b=w_$G[0].indexOf("?"))<0){w_$s.setParent(w_$B),w_$Z=w_$J.getWith("with"==w_$G[2]?w_$G[3]:null),this._compileToTree(w_$s,w_$Z.split("\n"),0,w_$A,w_$n),w_$s.text="";continue}w_$s.setCondition(w_$G[0].substr(w_$b+1),1),w_$s.text=w_$J.getWith("with"==w_$G[2]?w_$G[3]:null);break;case"#import":w_$P=(w_$G=w_$y.splitToWords(w_$Z,null))[1],w_$A.push({node:w_$s,file:w_$y.includes[w_$P],ofs:w_$s.text.length});continue}}else{if((w_$X=w_$B.childs[w_$B.childs.length-1])&&!w_$X.name){0<w_$A.length&&w_$y.splitToWords(w_$Z,w_$X),w_$T=w_$s,w_$X.text+="\n"+w_$Z;continue}0<w_$A.length&&w_$y.splitToWords(w_$Z,w_$s)}w_$s.setParent(w_$B)}},w_$B.createShader=function(w_$B,w_$h,w_$l){var w_$A={},w_$n="";if(w_$B)for(var w_$s in w_$B)w_$n+="#define "+w_$s+"\n",w_$A[w_$s]=!0;var w_$X=this._VS.toscript(w_$A,[]),w_$Z=this._PS.toscript(w_$A,[]);return(w_$l||w_$IB.create)(w_$n+w_$X.join("\n"),w_$n+w_$Z.join("\n"),w_$h,this._nameMap)},w_$y._parseOne=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X={type:w_$y.shaderParamsMap[w_$l[w_$A+1]],name:w_$l[w_$A+2],size:isNaN(parseInt(w_$l[w_$A+3]))?1:parseInt(w_$l[w_$A+3])};return w_$s&&("attribute"==w_$n?w_$B.push(w_$X):w_$h.push(w_$X)),":"==w_$l[w_$A+3]&&(w_$X.type=w_$l[w_$A+4],w_$A+=2),w_$A+=2},w_$y.addInclude=function(w_$B,w_$h){if(!w_$h||0===w_$h.length)throw new Error("add shader include file err:"+w_$B);if(w_$y.includes[w_$B])throw new Error("add shader include file err, has add:"+w_$B);w_$y.includes[w_$B]=new w_$l(w_$h)},w_$y.preGetParams=function(w_$B,w_$h){var w_$l=[w_$B,w_$h],w_$A={},w_$n=[],w_$s=[],w_$X={},w_$Z=[];w_$A.attributes=w_$n,w_$A.uniforms=w_$s,w_$A.defines=w_$X;for(var w_$t=0,w_$P=0,w_$G=0;w_$G<2;w_$G++){w_$l[w_$G]=w_$l[w_$G].replace(w_$y._removeAnnotation,"");var w_$T,w_$b=w_$l[w_$G].match(w_$y._reg);for(w_$t=0,w_$P=w_$b.length;w_$t<w_$P;w_$t++){var w_$Q=w_$b[w_$t];if("attribute"==w_$Q||"uniform"==w_$Q)w_$t=w_$y._parseOne(w_$n,w_$s,w_$b,w_$t,w_$Q,!0);else{if("#define"==w_$Q){w_$Z[w_$Q=w_$b[++w_$t]]=1;continue}if("#ifdef"==w_$Q){w_$X[w_$T=w_$b[++w_$t]]=w_$X[w_$T]||[];for(w_$t++;w_$t<w_$P;w_$t++)if("attribute"==(w_$Q=w_$b[w_$t])||"uniform"==w_$Q)w_$t=w_$y._parseOne(w_$n,w_$s,w_$b,w_$t,w_$Q,w_$Z[w_$T]);else if("#else"==w_$Q)for(w_$t++;w_$t<w_$P;w_$t++)if("attribute"==(w_$Q=w_$b[w_$t])||"uniform"==w_$Q)w_$t=w_$y._parseOne(w_$n,w_$s,w_$b,w_$t,w_$Q,!w_$Z[w_$T]);else if("#endif"==w_$Q)break}}}}return w_$A},w_$y.splitToWords=function(w_$B,w_$h){for(var w_$l,w_$A,w_$n=[],w_$s=-1,w_$X=0,w_$Z=w_$B.length;w_$X<w_$Z;w_$X++)if(w_$l=w_$B.charAt(w_$X),0<=" \t=+-*/&%!<>()'\",;".indexOf(w_$l)){if(0<=w_$s&&1<w_$X-w_$s&&(w_$A=w_$B.substr(w_$s,w_$X-w_$s),w_$n.push(w_$A)),'"'==w_$l||"'"==w_$l){var w_$t=w_$B.indexOf(w_$l,w_$X+1);if(w_$t<0)throw"Sharder err:"+w_$B;w_$n.push(w_$B.substr(w_$X+1,w_$t-w_$X-1)),w_$X=w_$t,w_$s=-1;continue}"("==w_$l&&w_$h&&0<w_$n.length&&(w_$A=w_$n[w_$n.length-1]+";","vec4;main;".indexOf(w_$A)<0&&(w_$h.useFuns+=w_$A)),w_$s=-1}else w_$s<0&&(w_$s=w_$X);return w_$s<w_$Z&&1<w_$Z-w_$s&&(w_$A=w_$B.substr(w_$s,w_$Z-w_$s),w_$n.push(w_$A)),w_$n},w_$y.IFDEF_NO=0,w_$y.IFDEF_YES=1,w_$y.IFDEF_ELSE=2,w_$y.IFDEF_PARENT=3,w_$y._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),w_$y._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),w_$y._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),w_$y.includes={},w_$X(w_$y,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),w_$y.__init$=function(){w_$H=function(){function w_$l(w_$B){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=w_$B}w_$b(w_$l,"");var w_$B=w_$l.prototype;return w_$B.setParent=function(w_$B){w_$B.childs.push(this),this.z=w_$B.z+1,this.parent=w_$B},w_$B.setCondition=function(w_$B,w_$h){w_$B&&(this.conditionType=w_$h,w_$B=w_$B.replace(/(\s*$)/g,""),this.condition=function(){return this[w_$B]},this.condition.__condition=w_$B)},w_$B.toscript=function(w_$B,w_$h){return this._toscript(w_$B,w_$h,++w_$l.__id)},w_$B._toscript=function(w_$A,w_$n,w_$s){if(this.childs.length<1&&!this.text)return w_$n;w_$n.length;if(this.condition){var w_$B=!!this.condition.call(w_$A);if(2===this.conditionType&&(w_$B=!w_$B),!w_$B)return w_$n}if(this.text&&w_$n.push(this.text),0<this.childs.length&&this.childs.forEach(function(w_$B,w_$h,w_$l){w_$B._toscript(w_$A,w_$n,w_$s)}),0<this.includefiles.length&&0<this.useFuns.length)for(var w_$h,w_$l=0,w_$X=this.includefiles.length;w_$l<w_$X;w_$l++)this.includefiles[w_$l].curUseID!=w_$s&&0<(w_$h=this.includefiles[w_$l].file.getFunsScript(this.useFuns)).length&&(this.includefiles[w_$l].curUseID=w_$s,w_$n[0]=w_$h+w_$n[0]);return w_$n},w_$l.__id=1,w_$l}(),w_$l=function(){function w_$B(w_$B){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=w_$B;for(var w_$h=0,w_$l=0,w_$A=0;!((w_$h=w_$B.indexOf("#begin",w_$h))<0);){for(w_$A=w_$h+5;!((w_$A=w_$B.indexOf("#end",w_$A))<0)&&"i"===w_$B.charAt(w_$A+4);)w_$A+=5;if(w_$A<0)throw"add include err,no #end:"+w_$B;w_$l=w_$B.indexOf("\n",w_$h);var w_$n=w_$y.splitToWords(w_$B.substr(w_$h,w_$l-w_$h),null);"code"==w_$n[1]?this.codes[w_$n[2]]=w_$B.substr(w_$l+1,w_$A-w_$l-1):"function"==w_$n[1]&&(w_$l=w_$B.indexOf("function",w_$h),w_$l+="function".length,this.funs[w_$n[3]]=w_$B.substr(w_$l+1,w_$A-w_$l-1),this.funnames+=w_$n[3]+";"),w_$h=w_$A+1}}w_$b(w_$B,"");var w_$h=w_$B.prototype;return w_$h.getWith=function(w_$B){var w_$h=w_$B?this.codes[w_$B]:this.script;if(!w_$h)throw"get with error:"+w_$B;return w_$h},w_$h.getFunsScript=function(w_$B){var w_$h="";for(var w_$l in this.funs)0<=w_$B.indexOf(w_$l+";")&&(w_$h+=this.funs[w_$l]);return w_$h},w_$B}()},w_$y}(),w_$CB=function(){function w_$X(){}return w_$b(w_$X,"laya.webgl.WebGL"),w_$X._uint8ArraySlice=function(){for(var w_$B=this.length,w_$h=new Uint8Array(this.length),w_$l=0;w_$l<w_$B;w_$l++)w_$h[w_$l]=this[w_$l];return w_$h},w_$X._float32ArraySlice=function(){for(var w_$B=this.length,w_$h=new Float32Array(this.length),w_$l=0;w_$l<w_$B;w_$l++)w_$h[w_$l]=this[w_$l];return w_$h},w_$X._uint16ArraySlice=function(w_$B){var w_$h,w_$l=arguments,w_$A=0,w_$n=0;if(0===w_$l.length)for(w_$A=this.length,w_$h=new Uint16Array(w_$A),w_$n=0;w_$n<w_$A;w_$n++)w_$h[w_$n]=this[w_$n];else if(2===w_$l.length){var w_$s=w_$l[0],w_$X=w_$l[1];if(w_$s<w_$X)for(w_$A=w_$X-w_$s,w_$h=new Uint16Array(w_$A),w_$n=w_$s;w_$n<w_$X;w_$n++)w_$h[w_$n-w_$s]=this[w_$n];else w_$h=new Uint16Array(0)}return w_$h},w_$X.expandContext=function(){var w_$B=w_$n.prototype,w_$h=CanvasRenderingContext2D.prototype;w_$h.fillTrangles=w_$B.fillTrangles,w_$LB.__int__(null),w_$h.setIBVB=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){void 0===w_$t&&(w_$t=0),void 0===w_$P&&(w_$P=0),null===w_$l&&(this._ib=this._ib||w_$DB.QuadrangleIB,w_$l=this._ib,w_$VB.expandIBQuadrangle(w_$l,w_$A._byteLength/64+8)),this._setIBVB(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P)},w_$h.fillTrangles=function(w_$B,w_$h,w_$l,w_$A,w_$n){this._curMat=this._curMat||w_$x.create(),this._vb=this._vb||w_$rB.create(),this._ib||(this._ib=w_$DB.create(),w_$VB.fillIBQuadrangle(this._ib,w_$X/4));var w_$s=this._vb,w_$X=w_$A.length>>4;w_$VB.fillTranglesVB(w_$s,w_$h,w_$l,w_$A,w_$n||this._curMat,0,0),w_$VB.expandIBQuadrangle(this._ib,w_$s._byteLength/64+8);var w_$Z=new w_$UB(1,0);w_$Z.textureHost=w_$B;var w_$t=new w_$qB("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");w_$s._vertType=3,this._setIBVB(w_$h,w_$l,this._ib,w_$s,6*w_$X,w_$n,w_$t,w_$Z,0,0)}},w_$X.enable=function(){if(w_$Q.__init__(),w_$J.isConchApp&&!w_$J.isConchWebGL)return w_$o.skinAniSprite=function(){return new w_$BB},w_$X.expandContext(),!1;if(w_$o.getWebGLContext=function(w_$B){for(var w_$h,w_$l=["webgl","experimental-webgl","webkit-3d","moz-webgl"],w_$A=0;w_$A<w_$l.length;w_$A++){try{w_$h=w_$B.getContext(w_$l[w_$A],{stencil:w_$v.isStencil,alpha:w_$v.isAlpha,antialias:w_$v.isAntialias,premultipliedAlpha:w_$v.premultipliedAlpha,preserveDrawingBuffer:w_$v.preserveDrawingBuffer})}catch(w_$B){}if(w_$h)return w_$h}return null},null==(w_$X.mainContext=w_$X.mainContext||w_$o.getWebGLContext(w_$J._mainCanvas)))return!1;if(w_$J.isWebGL)return!0;w_$$.create=function(w_$B,w_$h){return new w_$Bh(w_$B,w_$h)},w_$V.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){return new w_$fB(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X)},w_$J.WebGL=w_$X,w_$J.isWebGL=!0,w_$QB.__init__(),w_$o.createRenderSprite=function(w_$B,w_$h){return new w_$xB(w_$B,w_$h)},w_$o.createWebGLContext2D=function(w_$B){return new w_$vB(w_$B)},w_$o.changeWebGLSize=function(w_$B,w_$h){laya.webgl.WebGL.onStageResize(w_$B,w_$h)},w_$o.createGraphics=function(){return new w_$uB};var w_$B=w_$o.createFilterAction;return w_$o.createFilterAction=w_$B||function(w_$B){return new w_$wB},w_$o.clear=function(w_$B){w_$HB.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var w_$h=w_$J.context.ctx,w_$l=0==w_$h._submits._length||w_$v.preserveDrawingBuffer?w_$i.create(w_$B)._color:w_$S._wgColor;w_$l&&w_$h.clearBG(w_$l[0],w_$l[1],w_$l[2],w_$l[3]),w_$HB.clear()},w_$o.addToAtlas=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!1);var w_$l=w_$B.bitmap;w_$J.optimizeTextureMemory(w_$B.url,w_$B)?w_$u.__typeof(w_$l,"laya.webgl.resource.IMergeAtlasBitmap")&&w_$l.allowMerageInAtlas&&w_$l.on("recovered",w_$B,w_$B.addTextureToAtlas):w_$l.enableMerageInAtlas=!1},w_$o.isAtlas=function(w_$B){return w_$B instanceof laya.webgl.atlas.AtlasWebGLCanvas},w_$O._enable(),w_$o.beginFlush=function(){for(var w_$B=w_$O.instance,w_$h=w_$B.getAtlaserCount(),w_$l=0;w_$l<w_$h;w_$l++){var w_$A=w_$B.getAtlaserByIndex(w_$l).texture;w_$A._flashCacheImageNeedFlush&&w_$o.flashFlushImage(w_$A)}},w_$o.drawToCanvas=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){(w_$l<=0||w_$A<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),w_$l|=0,w_$A|=0,w_$n|=0,w_$s|=0;var w_$X=w_$gB.create(w_$l,w_$A,6408,5121,0,!1);w_$X.start(),w_$X.clear(0,0,0,0),w_$J.context.clear(),w_$H.renders[w_$h]._fun(w_$B,w_$J.context,w_$n,w_$HB.height-w_$A+w_$s),w_$J.context.flush(),w_$X.end();var w_$Z=w_$X.getData(0,0,w_$l,w_$A);if(w_$X.recycle(),w_$Z.byteLength==w_$l*w_$A*4){var w_$t=new w_$mB;w_$t._canvas=w_$Q.createElement("canvas"),w_$t.size(w_$l,w_$A);var w_$P=w_$t._canvas.getContext("2d");w_$Q.canvas.size(w_$l,w_$A);var w_$G=w_$Q.context,w_$T=w_$G.createImageData(w_$l,w_$A);return w_$T.data.set(new Uint8ClampedArray(w_$Z.buffer)),w_$t._imgData=w_$T,w_$G.putImageData(w_$T,0,0),w_$P.save(),w_$P.translate(0,w_$A),w_$P.scale(1,-1),w_$P.drawImage(w_$Q.canvas.source,0,0),w_$P.restore(),w_$t}console.log("drawToCanvas error: w:"+w_$l+",h:"+w_$A+",datalen:"+w_$Z.byteLength)},w_$o.createFilterAction=function(w_$B){var w_$h;switch(w_$B){case 32:w_$h=new w_$wB}return w_$h},w_$o.addTextureToAtlas=function(w_$B){w_$B._uvID++,w_$O._atlasRestore++,w_$B.bitmap.enableMerageInAtlas&&w_$O.instance.addToAtlas(w_$B)},w_$o.getTexturePixels=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$J.context.ctx.clear();var w_$s=new w_$a;w_$s.graphics.drawTexture(w_$B,-w_$h,-w_$l);var w_$X=w_$gB.create(w_$A,w_$n);w_$X.start(),w_$X.clear(0,0,0,0),w_$s.render(w_$J.context,0,0),w_$J.context.ctx.flush(),w_$X.end();for(var w_$Z=w_$X.getData(0,0,w_$A,w_$n),w_$t=[],w_$P=0,w_$G=w_$n-1;0<=w_$G;w_$G--)for(var w_$T=0;w_$T<w_$A;w_$T++)w_$P=4*(w_$G*w_$A+w_$T),w_$t.push(w_$Z[w_$P]),w_$t.push(w_$Z[w_$P+1]),w_$t.push(w_$Z[w_$P+2]),w_$t.push(w_$Z[w_$P+3]);return w_$t},w_$o.skinAniSprite=function(){return new w_$BB},w_$P.create=function(w_$B,w_$h){var w_$l=new w_$mB;return w_$l._imgData=w_$h,w_$l.flipY=!1,w_$l},w_$U._filterStart=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$B.getValue("bounds"),w_$X=w_$gB.create(w_$s.width,w_$s.height);if(w_$X.start(),w_$X.clear(0,0,0,0),w_$B.addValue("src",w_$X),w_$B.addValue("ScissorTest",w_$HB.worldScissorTest),w_$HB.worldScissorTest){var w_$Z=new w_$z;w_$Z.copyFrom(w_$l.ctx._clipRect),w_$B.addValue("clipRect",w_$Z),w_$HB.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},w_$U._filterEnd=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$B.getValue("bounds");w_$B.getValue("src").end();var w_$X=w_$gB.create(w_$s.width,w_$s.height);w_$X.start(),w_$X.clear(0,0,0,0),w_$B.addValue("out",w_$X),w_$h._set$P("_filterCache",w_$X),w_$h._set$P("_isHaveGlowFilter",w_$B.getValue("_isHaveGlowFilter"))},w_$U._EndTarget=function(w_$B,w_$h){if(w_$B.getValue("src").recycle(),w_$B.getValue("out").end(),w_$B.getValue("ScissorTest")){w_$HB.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),w_$h.ctx.save();var w_$l=w_$B.getValue("clipRect");w_$h.ctx.clipRect(w_$l.x,w_$l.y,w_$l.width,w_$l.height)}},w_$U._useSrc=function(w_$B){var w_$h=w_$B.getValue("out");w_$h.end(),(w_$h=w_$B.getValue("src")).start(),w_$h.clear(0,0,0,0)},w_$U._endSrc=function(w_$B){w_$B.getValue("src").end()},w_$U._useOut=function(w_$B){var w_$h=w_$B.getValue("src");w_$h.end(),(w_$h=w_$B.getValue("out")).start(),w_$h.clear(0,0,0,0)},w_$U._endOut=function(w_$B){w_$B.getValue("out").end()},w_$U._recycleScope=function(w_$B){w_$B.recycle()},w_$U._filter=function(w_$B,w_$h,w_$l,w_$A){var w_$n=this._next;if(w_$n){var w_$s,w_$X,w_$Z=w_$B.filters,w_$t=w_$Z.length;if(1==w_$t&&32==w_$Z[0].type)return w_$h.ctx.save(),w_$h.ctx.setFilters([w_$Z[0]]),w_$n._fun.call(w_$n,w_$B,w_$h,w_$l,w_$A),void w_$h.ctx.restore();var w_$P=w_$ZB.create(),w_$G=w_$w.TEMP,w_$T=w_$h.ctx._getTransformMatrix(),w_$b=w_$x.create();w_$T.copyTo(w_$b);var w_$Q=0,w_$i=0,w_$$=!1,w_$V=w_$B._$P._filterCache?w_$B._$P._filterCache:null;if(!w_$V||w_$B._repaint){w_$$=w_$B._isHaveGlowFilter(),w_$P.addValue("_isHaveGlowFilter",w_$$),w_$$&&(w_$Q=50,w_$i=25),(w_$X=new w_$z).copyFrom(w_$B.getSelfBounds()),w_$X.x+=w_$B.x,w_$X.y+=w_$B.y,w_$X.x-=w_$B.pivotX+4,w_$X.y-=w_$B.pivotY+4;var w_$J=w_$X.x,w_$H=w_$X.y;if(w_$X.width+=w_$Q+8,w_$X.height+=w_$Q+8,w_$G.x=w_$X.x*w_$b.a+w_$X.y*w_$b.c,w_$G.y=w_$X.y*w_$b.d+w_$X.x*w_$b.b,w_$X.x=w_$G.x,w_$X.y=w_$G.y,w_$G.x=w_$X.width*w_$b.a+w_$X.height*w_$b.c,w_$G.y=w_$X.height*w_$b.d+w_$X.width*w_$b.b,w_$X.width=w_$G.x,w_$X.height=w_$G.y,w_$X.width<=0||w_$X.height<=0)return;w_$V&&w_$V.recycle(),w_$P.addValue("bounds",w_$X);var w_$y=w_$XB.create([w_$P,w_$B,w_$h,0,0],w_$U._filterStart);w_$h.addRenderObject(w_$y),w_$h.ctx._renderKey=0,w_$h.ctx._shader2D.glTexture=null;var w_$C=w_$B.x-w_$J+w_$i,w_$o=w_$B.y-w_$H+w_$i;w_$n._fun.call(w_$n,w_$B,w_$h,w_$C,w_$o),w_$y=w_$XB.create([w_$P,w_$B,w_$h,0,0],w_$U._filterEnd),w_$h.addRenderObject(w_$y);for(var w_$u=0;w_$u<w_$t;w_$u++){0!=w_$u&&(w_$y=w_$XB.create([w_$P],w_$U._useSrc),w_$h.addRenderObject(w_$y),w_$s=w_$UB.create(1,0),w_$x.TEMP.identity(),w_$h.ctx.drawTarget(w_$P,0,0,w_$X.width,w_$X.height,w_$x.TEMP,"out",w_$s,null,w_$F.TOINT.overlay),w_$y=w_$XB.create([w_$P],w_$U._useOut),w_$h.addRenderObject(w_$y)),w_$Z[w_$u].action.apply3d(w_$P,w_$B,w_$h,0,0)}w_$y=w_$XB.create([w_$P,w_$h],w_$U._EndTarget),w_$h.addRenderObject(w_$y)}else{if((w_$$=!!w_$B._$P._isHaveGlowFilter&&w_$B._$P._isHaveGlowFilter)&&(w_$Q=50,w_$i=25),(w_$X=w_$B.getBounds()).width<=0||w_$X.height<=0)return;w_$X.width+=w_$Q,w_$X.height+=w_$Q,w_$G.x=w_$X.x*w_$b.a+w_$X.y*w_$b.c,w_$G.y=w_$X.y*w_$b.d+w_$X.x*w_$b.b,w_$X.x=w_$G.x,w_$X.y=w_$G.y,w_$G.x=w_$X.width*w_$b.a+w_$X.height*w_$b.c,w_$G.y=w_$X.height*w_$b.d+w_$X.width*w_$b.b,w_$X.width=w_$G.x,w_$X.height=w_$G.y,w_$P.addValue("out",w_$V)}w_$l=w_$l-w_$i-w_$B.x,w_$A=w_$A-w_$i-w_$B.y,w_$G.setTo(w_$l,w_$A),w_$b.transformPoint(w_$G),w_$l=w_$G.x+w_$X.x,w_$A=w_$G.y+w_$X.y,w_$s=w_$UB.create(1,0),w_$x.TEMP.identity(),w_$h.ctx.drawTarget(w_$P,w_$l,w_$A,w_$X.width,w_$X.height,w_$x.TEMP,"out",w_$s,null,w_$F.TOINT.overlay),w_$y=w_$XB.create([w_$P],w_$U._recycleScope),w_$h.addRenderObject(w_$y),w_$b.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=w_$X._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=w_$X._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=w_$X._uint8ArraySlice),!0},w_$X.onStageResize=function(w_$B,w_$h){null!=w_$X.mainContext&&(w_$X.mainContext.viewport(0,0,w_$B,w_$h),w_$HB.width=w_$B,w_$HB.height=w_$h)},w_$X.onInvalidGLRes=function(){w_$O.instance.freeAll(),w_$C.releaseContentManagers(!0),w_$X.doNodeRepaint(w_$u.stage),w_$X.mainContext.viewport(0,0,w_$HB.width,w_$HB.height),w_$u.stage.event("devicelost")},w_$X.doNodeRepaint=function(w_$B){0==w_$B.numChildren&&w_$B.repaint();for(var w_$h=0;w_$h<w_$B.numChildren;w_$h++)w_$X.doNodeRepaint(w_$B.getChildAt(w_$h))},w_$X.init=function(w_$B,w_$h,w_$l){w_$X.mainCanvas=w_$B,w_$P._createContext=function(w_$B){return new w_$vB(w_$B)},w_$mB._createContext=function(w_$B){return new w_$vB(w_$B)};var w_$A=laya.webgl.WebGL.mainContext;if(null!=w_$A.getShaderPrecisionFormat){var w_$n=w_$A.getShaderPrecisionFormat(35633,36338),w_$s=w_$A.getShaderPrecisionFormat(35632,36338);w_$X.shaderHighPrecision=!(!w_$n.precision||!w_$s.precision)}else w_$X.shaderHighPrecision=!1;if(w_$X.compressAstc=w_$A.getExtension("WEBGL_compressed_texture_astc"),w_$X.compressAtc=w_$A.getExtension("WEBGL_compressed_texture_atc"),w_$X.compressEtc=w_$A.getExtension("WEBGL_compressed_texture_etc"),w_$X.compressEtc1=w_$A.getExtension("WEBGL_compressed_texture_etc1"),w_$X.compressPvrtc=w_$A.getExtension("WEBGL_compressed_texture_pvrtc"),w_$X.compressS3tc=w_$A.getExtension("WEBGL_compressed_texture_s3tc"),w_$X.compressS3tc_srgb=w_$A.getExtension("WEBGL_compressed_texture_s3tc_srgb"),w_$X.compressAstc=w_$X.compressAstc?w_$X.compressAstc:{},w_$X.compressAtc=w_$X.compressAtc?w_$X.compressAtc:{},w_$X.compressEtc=w_$X.compressEtc?w_$X.compressEtc:{},w_$X.compressEtc1=w_$X.compressEtc1?w_$X.compressEtc1:{},w_$X.compressPvrtc=w_$X.compressPvrtc?w_$X.compressPvrtc:{},w_$X.compressS3tc=w_$X.compressS3tc?w_$X.compressS3tc:{},w_$X.compressS3tc_srgb=w_$X.compressS3tc_srgb?w_$X.compressS3tc_srgb:{},w_$A.deleteTexture1=w_$A.deleteTexture,w_$A.deleteTexture=function(w_$B){w_$B==w_$oB.curBindTexValue&&(w_$oB.curBindTexValue=null),w_$A.deleteTexture1(w_$B)},w_$X.onStageResize(w_$h,w_$l),null==w_$X.mainContext)throw new Error("webGL getContext err!");w_$W.__init__(),w_$O.__init__(),w_$aB.__init__(),w_$sB.__init__(),w_$vB.__init__(),w_$UB.__init__(),w_$D.__init__(),w_$LB.__int__(w_$A),w_$F._init_(w_$A),w_$J.isConchApp&&conch.setOnInvalidGLRes(w_$X.onInvalidGLRes)},w_$X.mainCanvas=null,w_$X.antialias=!0,w_$X.shaderHighPrecision=!1,w_$X._bg_null=[0,0,0,0],w_$X}(),w_$oB=function(){function w_$A(){}return w_$b(w_$A,"laya.webgl.WebGLContext"),w_$A.UseProgram=function(w_$B){return w_$A._useProgram!==w_$B&&(w_$CB.mainContext.useProgram(w_$B),w_$A._useProgram=w_$B,!0)},w_$A.setDepthTest=function(w_$B,w_$h){w_$h!==w_$A._depthTest&&((w_$A._depthTest=w_$h)?w_$B.enable(2929):w_$B.disable(2929))},w_$A.setDepthMask=function(w_$B,w_$h){w_$h!==w_$A._depthMask&&(w_$A._depthMask=w_$h,w_$B.depthMask(w_$h))},w_$A.setDepthFunc=function(w_$B,w_$h){w_$h!==w_$A._depthFunc&&(w_$A._depthFunc=w_$h,w_$B.depthFunc(w_$h))},w_$A.setBlend=function(w_$B,w_$h){w_$h!==w_$A._blend&&((w_$A._blend=w_$h)?w_$B.enable(3042):w_$B.disable(3042))},w_$A.setBlendFunc=function(w_$B,w_$h,w_$l){(w_$h!==w_$A._sFactor||w_$l!==w_$A._dFactor)&&(w_$A._sFactor=w_$h,w_$A._dFactor=w_$l,w_$B.blendFunc(w_$h,w_$l))},w_$A.setCullFace=function(w_$B,w_$h){w_$h!==w_$A._cullFace&&((w_$A._cullFace=w_$h)?w_$B.enable(2884):w_$B.disable(2884))},w_$A.setFrontFace=function(w_$B,w_$h){w_$h!==w_$A._frontFace&&(w_$A._frontFace=w_$h,w_$B.frontFace(w_$h))},w_$A.bindTexture=function(w_$B,w_$h,w_$l){w_$B.bindTexture(w_$h,w_$l),w_$A.curBindTexTarget=w_$h,w_$A.curBindTexValue=w_$l},w_$A.DEPTH_BUFFER_BIT=256,w_$A.STENCIL_BUFFER_BIT=1024,w_$A.COLOR_BUFFER_BIT=16384,w_$A.POINTS=0,w_$A.LINES=1,w_$A.LINE_LOOP=2,w_$A.LINE_STRIP=3,w_$A.TRIANGLES=4,w_$A.TRIANGLE_STRIP=5,w_$A.TRIANGLE_FAN=6,w_$A.ZERO=0,w_$A.ONE=1,w_$A.SRC_COLOR=768,w_$A.ONE_MINUS_SRC_COLOR=769,w_$A.SRC_ALPHA=770,w_$A.ONE_MINUS_SRC_ALPHA=771,w_$A.DST_ALPHA=772,w_$A.ONE_MINUS_DST_ALPHA=773,w_$A.DST_COLOR=774,w_$A.ONE_MINUS_DST_COLOR=775,w_$A.SRC_ALPHA_SATURATE=776,w_$A.FUNC_ADD=32774,w_$A.BLEND_EQUATION=32777,w_$A.BLEND_EQUATION_RGB=32777,w_$A.BLEND_EQUATION_ALPHA=34877,w_$A.FUNC_SUBTRACT=32778,w_$A.FUNC_REVERSE_SUBTRACT=32779,w_$A.BLEND_DST_RGB=32968,w_$A.BLEND_SRC_RGB=32969,w_$A.BLEND_DST_ALPHA=32970,w_$A.BLEND_SRC_ALPHA=32971,w_$A.CONSTANT_COLOR=32769,w_$A.ONE_MINUS_CONSTANT_COLOR=32770,w_$A.CONSTANT_ALPHA=32771,w_$A.ONE_MINUS_CONSTANT_ALPHA=32772,w_$A.BLEND_COLOR=32773,w_$A.ARRAY_BUFFER=34962,w_$A.ELEMENT_ARRAY_BUFFER=34963,w_$A.ARRAY_BUFFER_BINDING=34964,w_$A.ELEMENT_ARRAY_BUFFER_BINDING=34965,w_$A.STREAM_DRAW=35040,w_$A.STATIC_DRAW=35044,w_$A.DYNAMIC_DRAW=35048,w_$A.BUFFER_SIZE=34660,w_$A.BUFFER_USAGE=34661,w_$A.CURRENT_VERTEX_ATTRIB=34342,w_$A.FRONT=1028,w_$A.BACK=1029,w_$A.CULL_FACE=2884,w_$A.FRONT_AND_BACK=1032,w_$A.BLEND=3042,w_$A.DITHER=3024,w_$A.STENCIL_TEST=2960,w_$A.DEPTH_TEST=2929,w_$A.SCISSOR_TEST=3089,w_$A.POLYGON_OFFSET_FILL=32823,w_$A.SAMPLE_ALPHA_TO_COVERAGE=32926,w_$A.SAMPLE_COVERAGE=32928,w_$A.NO_ERROR=0,w_$A.INVALID_ENUM=1280,w_$A.INVALID_VALUE=1281,w_$A.INVALID_OPERATION=1282,w_$A.OUT_OF_MEMORY=1285,w_$A.CW=2304,w_$A.CCW=2305,w_$A.LINE_WIDTH=2849,w_$A.ALIASED_POINT_SIZE_RANGE=33901,w_$A.ALIASED_LINE_WIDTH_RANGE=33902,w_$A.CULL_FACE_MODE=2885,w_$A.FRONT_FACE=2886,w_$A.DEPTH_RANGE=2928,w_$A.DEPTH_WRITEMASK=2930,w_$A.DEPTH_CLEAR_VALUE=2931,w_$A.DEPTH_FUNC=2932,w_$A.STENCIL_CLEAR_VALUE=2961,w_$A.STENCIL_FUNC=2962,w_$A.STENCIL_FAIL=2964,w_$A.STENCIL_PASS_DEPTH_FAIL=2965,w_$A.STENCIL_PASS_DEPTH_PASS=2966,w_$A.STENCIL_REF=2967,w_$A.STENCIL_VALUE_MASK=2963,w_$A.STENCIL_WRITEMASK=2968,w_$A.STENCIL_BACK_FUNC=34816,w_$A.STENCIL_BACK_FAIL=34817,w_$A.STENCIL_BACK_PASS_DEPTH_FAIL=34818,w_$A.STENCIL_BACK_PASS_DEPTH_PASS=34819,w_$A.STENCIL_BACK_REF=36003,w_$A.STENCIL_BACK_VALUE_MASK=36004,w_$A.STENCIL_BACK_WRITEMASK=36005,w_$A.VIEWPORT=2978,w_$A.SCISSOR_BOX=3088,w_$A.COLOR_CLEAR_VALUE=3106,w_$A.COLOR_WRITEMASK=3107,w_$A.UNPACK_ALIGNMENT=3317,w_$A.PACK_ALIGNMENT=3333,w_$A.MAX_TEXTURE_SIZE=3379,w_$A.MAX_VIEWPORT_DIMS=3386,w_$A.SUBPIXEL_BITS=3408,w_$A.RED_BITS=3410,w_$A.GREEN_BITS=3411,w_$A.BLUE_BITS=3412,w_$A.ALPHA_BITS=3413,w_$A.DEPTH_BITS=3414,w_$A.STENCIL_BITS=3415,w_$A.POLYGON_OFFSET_UNITS=10752,w_$A.POLYGON_OFFSET_FACTOR=32824,w_$A.TEXTURE_BINDING_2D=32873,w_$A.SAMPLE_BUFFERS=32936,w_$A.SAMPLES=32937,w_$A.SAMPLE_COVERAGE_VALUE=32938,w_$A.SAMPLE_COVERAGE_INVERT=32939,w_$A.NUM_COMPRESSED_TEXTURE_FORMATS=34466,w_$A.COMPRESSED_TEXTURE_FORMATS=34467,w_$A.DONT_CARE=4352,w_$A.FASTEST=4353,w_$A.NICEST=4354,w_$A.GENERATE_MIPMAP_HINT=33170,w_$A.BYTE=5120,w_$A.UNSIGNED_BYTE=5121,w_$A.SHORT=5122,w_$A.UNSIGNED_SHORT=5123,w_$A.INT=5124,w_$A.UNSIGNED_INT=5125,w_$A.FLOAT=5126,w_$A.DEPTH_COMPONENT=6402,w_$A.ALPHA=6406,w_$A.RGB=6407,w_$A.RGBA=6408,w_$A.LUMINANCE=6409,w_$A.LUMINANCE_ALPHA=6410,w_$A.UNSIGNED_SHORT_4_4_4_4=32819,w_$A.UNSIGNED_SHORT_5_5_5_1=32820,w_$A.UNSIGNED_SHORT_5_6_5=33635,w_$A.FRAGMENT_SHADER=35632,w_$A.VERTEX_SHADER=35633,w_$A.MAX_VERTEX_ATTRIBS=34921,w_$A.MAX_VERTEX_UNIFORM_VECTORS=36347,w_$A.MAX_VARYING_VECTORS=36348,w_$A.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,w_$A.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,w_$A.MAX_TEXTURE_IMAGE_UNITS=34930,w_$A.MAX_FRAGMENT_UNIFORM_VECTORS=36349,w_$A.SHADER_TYPE=35663,w_$A.DELETE_STATUS=35712,w_$A.LINK_STATUS=35714,w_$A.VALIDATE_STATUS=35715,w_$A.ATTACHED_SHADERS=35717,w_$A.ACTIVE_UNIFORMS=35718,w_$A.ACTIVE_ATTRIBUTES=35721,w_$A.SHADING_LANGUAGE_VERSION=35724,w_$A.CURRENT_PROGRAM=35725,w_$A.NEVER=512,w_$A.LESS=513,w_$A.EQUAL=514,w_$A.LEQUAL=515,w_$A.GREATER=516,w_$A.NOTEQUAL=517,w_$A.GEQUAL=518,w_$A.ALWAYS=519,w_$A.KEEP=7680,w_$A.REPLACE=7681,w_$A.INCR=7682,w_$A.DECR=7683,w_$A.INVERT=5386,w_$A.INCR_WRAP=34055,w_$A.DECR_WRAP=34056,w_$A.VENDOR=7936,w_$A.RENDERER=7937,w_$A.VERSION=7938,w_$A.NEAREST=9728,w_$A.LINEAR=9729,w_$A.NEAREST_MIPMAP_NEAREST=9984,w_$A.LINEAR_MIPMAP_NEAREST=9985,w_$A.NEAREST_MIPMAP_LINEAR=9986,w_$A.LINEAR_MIPMAP_LINEAR=9987,w_$A.TEXTURE_MAG_FILTER=10240,w_$A.TEXTURE_MIN_FILTER=10241,w_$A.TEXTURE_WRAP_S=10242,w_$A.TEXTURE_WRAP_T=10243,w_$A.TEXTURE_2D=3553,w_$A.TEXTURE=5890,w_$A.TEXTURE_CUBE_MAP=34067,w_$A.TEXTURE_BINDING_CUBE_MAP=34068,w_$A.TEXTURE_CUBE_MAP_POSITIVE_X=34069,w_$A.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,w_$A.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,w_$A.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,w_$A.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,w_$A.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,w_$A.MAX_CUBE_MAP_TEXTURE_SIZE=34076,w_$A.TEXTURE0=33984,w_$A.TEXTURE1=33985,w_$A.TEXTURE2=33986,w_$A.TEXTURE3=33987,w_$A.TEXTURE4=33988,w_$A.TEXTURE5=33989,w_$A.TEXTURE6=33990,w_$A.TEXTURE7=33991,w_$A.TEXTURE8=33992,w_$A.TEXTURE9=33993,w_$A.TEXTURE10=33994,w_$A.TEXTURE11=33995,w_$A.TEXTURE12=33996,w_$A.TEXTURE13=33997,w_$A.TEXTURE14=33998,w_$A.TEXTURE15=33999,w_$A.TEXTURE16=34e3,w_$A.TEXTURE17=34001,w_$A.TEXTURE18=34002,w_$A.TEXTURE19=34003,w_$A.TEXTURE20=34004,w_$A.TEXTURE21=34005,w_$A.TEXTURE22=34006,w_$A.TEXTURE23=34007,w_$A.TEXTURE24=34008,w_$A.TEXTURE25=34009,w_$A.TEXTURE26=34010,w_$A.TEXTURE27=34011,w_$A.TEXTURE28=34012,w_$A.TEXTURE29=34013,w_$A.TEXTURE30=34014,w_$A.TEXTURE31=34015,w_$A.ACTIVE_TEXTURE=34016,w_$A.REPEAT=10497,w_$A.CLAMP_TO_EDGE=33071,w_$A.MIRRORED_REPEAT=33648,w_$A.FLOAT_VEC2=35664,w_$A.FLOAT_VEC3=35665,w_$A.FLOAT_VEC4=35666,w_$A.INT_VEC2=35667,w_$A.INT_VEC3=35668,w_$A.INT_VEC4=35669,w_$A.BOOL=35670,w_$A.BOOL_VEC2=35671,w_$A.BOOL_VEC3=35672,w_$A.BOOL_VEC4=35673,w_$A.FLOAT_MAT2=35674,w_$A.FLOAT_MAT3=35675,w_$A.FLOAT_MAT4=35676,w_$A.SAMPLER_2D=35678,w_$A.SAMPLER_CUBE=35680,w_$A.VERTEX_ATTRIB_ARRAY_ENABLED=34338,w_$A.VERTEX_ATTRIB_ARRAY_SIZE=34339,w_$A.VERTEX_ATTRIB_ARRAY_STRIDE=34340,w_$A.VERTEX_ATTRIB_ARRAY_TYPE=34341,w_$A.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,w_$A.VERTEX_ATTRIB_ARRAY_POINTER=34373,w_$A.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,w_$A.COMPILE_STATUS=35713,w_$A.LOW_FLOAT=36336,w_$A.MEDIUM_FLOAT=36337,w_$A.HIGH_FLOAT=36338,w_$A.LOW_INT=36339,w_$A.MEDIUM_INT=36340,w_$A.HIGH_INT=36341,w_$A.FRAMEBUFFER=36160,w_$A.RENDERBUFFER=36161,w_$A.RGBA4=32854,w_$A.RGB5_A1=32855,w_$A.RGB565=36194,w_$A.DEPTH_COMPONENT16=33189,w_$A.STENCIL_INDEX=6401,w_$A.STENCIL_INDEX8=36168,w_$A.DEPTH_STENCIL=34041,w_$A.RENDERBUFFER_WIDTH=36162,w_$A.RENDERBUFFER_HEIGHT=36163,w_$A.RENDERBUFFER_INTERNAL_FORMAT=36164,w_$A.RENDERBUFFER_RED_SIZE=36176,w_$A.RENDERBUFFER_GREEN_SIZE=36177,w_$A.RENDERBUFFER_BLUE_SIZE=36178,w_$A.RENDERBUFFER_ALPHA_SIZE=36179,w_$A.RENDERBUFFER_DEPTH_SIZE=36180,w_$A.RENDERBUFFER_STENCIL_SIZE=36181,w_$A.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,w_$A.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,w_$A.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,w_$A.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,w_$A.COLOR_ATTACHMENT0=36064,w_$A.DEPTH_ATTACHMENT=36096,w_$A.STENCIL_ATTACHMENT=36128,w_$A.DEPTH_STENCIL_ATTACHMENT=33306,w_$A.NONE=0,w_$A.FRAMEBUFFER_COMPLETE=36053,w_$A.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,w_$A.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,w_$A.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,w_$A.FRAMEBUFFER_UNSUPPORTED=36061,w_$A.FRAMEBUFFER_BINDING=36006,w_$A.RENDERBUFFER_BINDING=36007,w_$A.MAX_RENDERBUFFER_SIZE=34024,w_$A.INVALID_FRAMEBUFFER_OPERATION=1286,w_$A.UNPACK_FLIP_Y_WEBGL=37440,w_$A.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,w_$A.CONTEXT_LOST_WEBGL=37442,w_$A.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,w_$A.BROWSER_DEFAULT_WEBGL=37444,w_$A._useProgram=null,w_$A._depthTest=!0,w_$A._depthMask=!0,w_$A._blend=!1,w_$A._cullFace=!1,w_$A.curBindTexTarget=null,w_$A.curBindTexValue=null,w_$X(w_$A,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),w_$A}(),w_$uB=function(w_$B){function w_$h(){w_$h.__super.call(this)}w_$b(w_$h,"laya.webgl.display.GraphicsGL",w_$Z);var w_$l=w_$h.prototype;return w_$l.setShader=function(w_$B){this._saveToCmd(w_$J.context._setShader,[w_$B])},w_$l.setIBVB=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._saveToCmd(w_$J.context._setIBVB,[w_$B,w_$h,w_$l,w_$A,w_$n,w_$s])},w_$l.drawParticle=function(w_$B,w_$h,w_$l){var w_$A=w_$o.createParticleTemplate2D(w_$l);w_$A.x=w_$B,w_$A.y=w_$h,this._saveToCmd(w_$J.context._drawParticle,[w_$A])},w_$h}(),w_$vB=function(w_$B){var w_$l;function w_$k(w_$B){this._x=0,this._y=0,this._id=++w_$k._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,w_$k.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=w_$k.MAXCLIPRECT,this.mOutPoint,this._canvas=w_$B,this._canvas._addReference(),w_$k._contextcount++,w_$J.isFlash?(this._ib=w_$DB.create(35044),w_$VB.fillIBQuadrangle(this._ib,16)):this._ib=w_$DB.QuadrangleIB,this.clear()}w_$b(w_$k,"laya.webgl.canvas.WebGLContext2D",w_$n);var w_$h=w_$k.prototype;return w_$h.setIsMainContext=function(){this._isMain=!0},w_$h.clearBG=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$CB.mainContext;w_$n.clearColor(w_$B,w_$h,w_$l,w_$A),w_$n.clear(16384)},w_$h._getSubmits=function(){return this._submits},w_$h._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var w_$B=0,w_$h=this._submits._length;w_$B<w_$h;w_$B++)this._submits[w_$B].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},w_$h.destroy=function(){--w_$k._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=w_$DB.QuadrangleIB&&this._ib.releaseResource()},w_$h.clear=function(){this._submits||(this._other=w_$l.DEFAULT,this._curMat=w_$x.create(),this._vb=w_$rB.create(-1),this._submits=[],this._save=[w_$I.Create(this)],this._save.length=10,this._shader2D=new w_$D,this._triangleMesh=w_$EB.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=w_$l.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=w_$k.MAXCLIPRECT,this._curSubmit=w_$sB.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=w_$c.DEFAULT;for(var w_$B=0,w_$h=this._submits._length;w_$B<w_$h;w_$B++)this._submits[w_$B].releaseRender(),this._submits[w_$B]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},w_$h.size=function(w_$B,w_$h){if(this._width!=w_$B||this._height!=w_$h)if(0==w_$B||0==w_$h){0!=this._vb._byteLength&&(this._width=w_$B,this._height=w_$h,this._vb.clear(),this._vb.upload());for(var w_$l=0,w_$A=this._submits._length;w_$l<w_$A;w_$l++)this._submits[w_$l].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=w_$B,this._height=w_$h,this._targets&&this._targets.size(w_$B,w_$h),this._canvas.memorySize-=this._canvas.memorySize;0===w_$B&&0===w_$h&&this._releaseMem()},w_$h._getTransformMatrix=function(){return this._curMat},w_$h.translate=function(w_$B,w_$h){0===w_$B&&0===w_$h||(w_$e.save(this),this._curMat.bTransform&&(w_$L.save(this),this._curMat.transformPointN(w_$w.TEMP.setTo(w_$B,w_$h)),w_$B=w_$w.TEMP.x,w_$h=w_$w.TEMP.y),this._x+=w_$B,this._y+=w_$h)},w_$h.save=function(){this._save[this._save._length++]=w_$I.Create(this)},w_$h.restore=function(){var w_$B=this._save._length;if(!(w_$B<1))for(var w_$h=w_$B-1;0<=w_$h;w_$h--){var w_$l=this._save[w_$h];if(w_$l.restore(this),w_$l.isSaveMark())return void(this._save._length=w_$h)}},w_$h._fillText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){void 0===w_$P&&(w_$P=0);var w_$G=this._shader2D,w_$T=this._curSubmit.shaderValue,w_$b=w_$n?w_$iB.create(w_$n):this._other.font;if(w_$O.enabled)w_$G.ALPHA!==w_$T.ALPHA&&(w_$G.glTexture=null),w_$QB.drawText(this,w_$B,w_$h,this._curMat,w_$b,w_$t||this._other.textAlign,w_$s,w_$X,w_$Z,w_$l,w_$A,w_$P);else{this._shader2D.defines.getValue();var w_$Q=w_$s?w_$i.create(w_$s)._color:w_$G.colorAdd;w_$G.ALPHA===w_$T.ALPHA&&w_$Q===w_$G.colorAdd&&w_$T.colorAdd===w_$G.colorAdd||(w_$G.glTexture=null,w_$G.colorAdd=w_$Q),w_$QB.drawText(this,w_$B,w_$h,this._curMat,w_$b,w_$t||this._other.textAlign,w_$s,w_$X,w_$Z,w_$l,w_$A,w_$P)}},w_$h.fillWords=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._fillText(null,w_$B,w_$h,w_$l,w_$A,w_$n,null,-1,null,w_$s)},w_$h.fillBorderWords=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._fillBorderText(null,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,null)},w_$h.fillText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._fillText(w_$B,null,w_$h,w_$l,w_$A,w_$n,null,-1,w_$s)},w_$h.strokeText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._fillText(w_$B,null,w_$h,w_$l,w_$A,null,w_$n,w_$s||1,w_$X)},w_$h.fillBorderText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){this._fillBorderText(w_$B,null,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z)},w_$h._fillBorderText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){if(!w_$O.enabled)return this._fillText(w_$B,w_$h,w_$l,w_$A,w_$n,null,w_$X,w_$Z||1,w_$t),void this._fillText(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,null,-1,w_$t);var w_$P=this._shader2D,w_$G=this._curSubmit.shaderValue;w_$P.ALPHA!==w_$G.ALPHA&&(w_$P.glTexture=null);var w_$T=w_$n?(w_$k._fontTemp.setFont(w_$n),w_$k._fontTemp):this._other.font;w_$QB.drawText(this,w_$B,w_$h,this._curMat,w_$T,w_$t||this._other.textAlign,w_$s,w_$X,w_$Z||1,w_$l,w_$A,0)},w_$h.fillRect=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=this._vb;if(w_$VB.fillRectImgVb(w_$s,this._clipRect,w_$B,w_$h,w_$l,w_$A,w_$E.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var w_$X=this._shader2D.fillStyle;w_$n&&(this._shader2D.fillStyle=w_$c.create(w_$n));var w_$Z=this._shader2D,w_$t=this._curSubmit.shaderValue;if(w_$Z.fillStyle!==w_$t.fillStyle||w_$Z.ALPHA!==w_$t.ALPHA){w_$Z.glTexture=null;var w_$P=this._curSubmit=w_$sB.createSubmit(this,this._ib,w_$s,(w_$s._byteLength-64)/32*3,w_$UB.create(2,0));w_$P.shaderValue.color=w_$Z.fillStyle._color._color,w_$P.shaderValue.ALPHA=w_$Z.ALPHA,this._submits[this._submits._length++]=w_$P}this._curSubmit._numEle+=6,this._shader2D.fillStyle=w_$X}},w_$h.fillTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){if(w_$B.loaded&&w_$B.bitmap&&w_$B.source){var w_$t=this._vb,w_$P=w_$B.bitmap.width,w_$G=w_$B.bitmap.height,w_$T=w_$B.uv,w_$b=w_$X.x%w_$B.width,w_$Q=w_$X.y%w_$B.height;if(w_$P!=w_$Z.w||w_$G!=w_$Z.h){if(!w_$Z.w&&!w_$Z.h)switch(w_$Z.oy=w_$Z.ox=0,w_$s){case"repeat":w_$Z.width=w_$A,w_$Z.height=w_$n;break;case"repeat-x":w_$Z.width=w_$A,w_$Q<0?w_$B.height+w_$Q>w_$n?w_$Z.height=w_$n:w_$Z.height=w_$B.height+w_$Q:(w_$Z.oy=w_$Q,w_$B.height+w_$Q>w_$n?w_$Z.height=w_$n-w_$Q:w_$Z.height=w_$B.height);break;case"repeat-y":w_$b<0?w_$B.width+w_$b>w_$A?w_$Z.width=w_$A:w_$Z.width=w_$B.width+w_$b:(w_$Z.ox=w_$b,w_$B.width+w_$b>w_$A?w_$Z.width=w_$A-w_$b:w_$Z.width=w_$B.width),w_$Z.height=w_$n;break;case"no-repeat":w_$b<0?w_$B.width+w_$b>w_$A?w_$Z.width=w_$A:w_$Z.width=w_$B.width+w_$b:(w_$Z.ox=w_$b,w_$B.width+w_$b>w_$A?w_$Z.width=w_$A-w_$b:w_$Z.width=w_$B.width),w_$Q<0?w_$B.height+w_$Q>w_$n?w_$Z.height=w_$n:w_$Z.height=w_$B.height+w_$Q:(w_$Z.oy=w_$Q,w_$B.height+w_$Q>w_$n?w_$Z.height=w_$n-w_$Q:w_$Z.height=w_$B.height);break;default:w_$Z.width=w_$A,w_$Z.height=w_$n}w_$Z.w=w_$P,w_$Z.h=w_$G,w_$Z.uv=[0,0,w_$Z.width/w_$P,0,w_$Z.width/w_$P,w_$Z.height/w_$G,0,w_$Z.height/w_$G]}if(w_$h+=w_$Z.ox,w_$l+=w_$Z.oy,w_$b-=w_$Z.ox,w_$Q-=w_$Z.oy,w_$VB.fillRectImgVb(w_$t,this._clipRect,w_$h,w_$l,w_$Z.width,w_$Z.height,w_$Z.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var w_$i=w_$MB.create(this,this._ib,w_$t,(w_$t._byteLength-64)/32*3,w_$UB.create(256,0)),w_$$=(this._submits[this._submits._length++]=w_$i).shaderValue;w_$$.textureHost=w_$B;var w_$V=w_$T[0]*w_$P,w_$J=w_$T[1]*w_$G,w_$H=(w_$T[2]-w_$T[0])*w_$P,w_$y=(w_$T[5]-w_$T[3])*w_$G,w_$C=-w_$b/w_$P,w_$o=-w_$Q/w_$G;w_$$.u_TexRange[0]=w_$V/w_$P,w_$$.u_TexRange[1]=w_$H/w_$P,w_$$.u_TexRange[2]=w_$J/w_$G,w_$$.u_TexRange[3]=w_$y/w_$G,w_$$.u_offset[0]=w_$C,w_$$.u_offset[1]=w_$o,w_$O.enabled&&!this._isMain&&w_$i.addTexture(w_$B,(w_$t._byteLength>>2)-16),(this._curSubmit=w_$i)._renderType=10017,w_$i._numEle+=6}}else this.sprite&&w_$u.timer.callLater(this,this._repaintSprite)},w_$h.setShader=function(w_$B){w_$Y.save(this,1048576,this._shader2D,!0),this._shader2D.shader=w_$B},w_$h.setFilters=function(w_$B){w_$Y.save(this,2097152,this._shader2D,!0),this._shader2D.filters=w_$B,this._curSubmit=w_$sB.RENDERBASE,this._renderKey=0,this._drawCount++},w_$h.drawTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._drawTextureM(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,null,1)},w_$h.addTextureVb=function(w_$B,w_$h,w_$l){var w_$A=this._curSubmit._vb||this._vb,w_$n=w_$A._byteLength>>2;w_$A.byteLength=w_$n+16<<2;for(var w_$s=w_$A.getFloat32Array(),w_$X=0;w_$X<16;w_$X+=4)w_$s[w_$n++]=w_$B[w_$X]+w_$h,w_$s[w_$n++]=w_$B[w_$X+1]+w_$l,w_$s[w_$n++]=w_$B[w_$X+2],w_$s[w_$n++]=w_$B[w_$X+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),w_$A._upload=!0},w_$h.willDrawTexture=function(w_$B,w_$h){if(!(w_$B.loaded&&w_$B.bitmap&&w_$B.source))return this.sprite&&w_$u.timer.callLater(this,this._repaintSprite),0;var w_$l=w_$B.bitmap,w_$A=w_$l.id+this._shader2D.ALPHA*w_$h+10016;if(w_$A==this._renderKey)return w_$A;var w_$n=this._shader2D,w_$s=w_$n.ALPHA,w_$X=this._curSubmit.shaderValue;w_$n.ALPHA*=w_$h,this._renderKey=w_$A,this._drawCount++,w_$n.glTexture=w_$l;var w_$Z=this._vb,w_$t=null,w_$P=w_$Z._byteLength/32*3,w_$G=w_$X.textureHost&&w_$X.textureHost==w_$B&&w_$X.textureHost.alphaTexture==w_$B.alphaTexture;return w_$t=w_$MB.create(this,this._ib,w_$Z,w_$P,w_$UB.create(1,0)),(this._submits[this._submits._length++]=w_$t).shaderValue.textureHost=w_$B,w_$t._renderType=10016,w_$t._preIsSameTextureShader=10016===this._curSubmit._renderType&&w_$n.ALPHA===w_$X.ALPHA&&w_$G,this._curSubmit=w_$t,w_$n.ALPHA=w_$s,w_$A},w_$h.drawTextures=function(w_$B,w_$h,w_$l,w_$A){if(w_$B.loaded&&w_$B.bitmap&&w_$B.source){var w_$n=this._clipRect;if(this._clipRect=w_$k.MAXCLIPRECT,this._drawTextureM(w_$B,w_$h[0],w_$h[1],w_$B.width,w_$B.height,w_$l,w_$A,null,1)){if(this._clipRect=w_$n,w_$N.drawCall++,!(w_$h.length<4)){for(var w_$s=this._curSubmit._vb||this._vb,w_$X=this._curMat.a,w_$Z=this._curMat.d,w_$t=2,w_$P=w_$h.length;w_$t<w_$P;w_$t+=2)w_$VB.copyPreImgVb(w_$s,(w_$h[w_$t]-w_$h[w_$t-2])*w_$X,(w_$h[w_$t+1]-w_$h[w_$t-1])*w_$Z),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&w_$u.timer.callLater(this,this._repaintSprite)},w_$h._drawTextureM=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){if(!w_$B.loaded||!w_$B.source)return this.sprite&&w_$u.timer.callLater(this,this._repaintSprite),!1;var w_$P=this._curSubmit._vb||this._vb,w_$G=w_$B.bitmap;w_$h+=w_$s,w_$l+=w_$X,this._drawCount++;var w_$T=w_$G.id+this._shader2D.ALPHA*w_$t+10016;if(w_$T!=this._renderKey){this._renderKey=w_$T;var w_$b=this._curSubmit.shaderValue,w_$Q=this._shader2D,w_$i=w_$Q.ALPHA;w_$Q.ALPHA*=w_$t,w_$Q.glTexture=w_$G;var w_$$=this._vb,w_$V=null,w_$J=w_$$._byteLength/32*3,w_$H=w_$b.textureHost&&w_$b.textureHost==w_$B&&w_$b.textureHost.alphaTexture==w_$B.alphaTexture;w_$V=w_$MB.create(this,this._ib,w_$$,w_$J,w_$UB.create(1,0)),(this._submits[this._submits._length++]=w_$V).shaderValue.textureHost=w_$B,w_$V._renderType=10016,w_$V._preIsSameTextureShader=10016===this._curSubmit._renderType&&w_$Q.ALPHA===w_$b.ALPHA&&w_$H,this._curSubmit=w_$V,w_$P=this._curSubmit._vb||this._vb,w_$Q.ALPHA=w_$i}return!!w_$VB.fillRectImgVb(w_$P,this._clipRect,w_$h,w_$l,w_$A||w_$B.width,w_$n||w_$B.height,w_$B.uv,w_$Z||this._curMat,this._x,this._y,0,0)&&(w_$O.enabled&&!this._isMain&&this._curSubmit.addTexture(w_$B,(w_$P._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},w_$h._repaintSprite=function(){this.sprite&&this.sprite.repaint()},w_$h._drawText=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){var w_$G=w_$B.bitmap;this._drawCount++;var w_$T=w_$G.id+this._shader2D.ALPHA+10016;if(w_$T!=this._renderKey){this._renderKey=w_$T;var w_$b=this._curSubmit.shaderValue,w_$Q=this._shader2D;w_$Q.glTexture=w_$G;var w_$i=this._vb,w_$$=null,w_$V=w_$i._byteLength/32*3,w_$J=w_$b.textureHost&&w_$b.textureHost==w_$B&&w_$b.textureHost.alphaTexture==w_$B.alphaTexture;(w_$$=w_$O.enabled?w_$MB.create(this,this._ib,w_$i,w_$V,w_$UB.create(1,0)):w_$MB.create(this,this._ib,w_$i,w_$V,w_$eB.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&w_$Q.ALPHA===w_$b.ALPHA&&w_$J,(this._submits[this._submits._length++]=w_$$).shaderValue.textureHost=w_$B,w_$$._renderType=10016,this._curSubmit=w_$$}w_$B.active();var w_$H=this._curSubmit._vb||this._vb;w_$VB.fillRectImgVb(w_$H,this._clipRect,w_$h+w_$X,w_$l+w_$Z,w_$A||w_$B.width,w_$n||w_$B.height,w_$B.uv,w_$s||this._curMat,this._x,this._y,w_$t,w_$P,!0)&&(w_$O.enabled&&!this._isMain&&this._curSubmit.addTexture(w_$B,(w_$H._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},w_$h.drawTextureWithTransform=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){if(w_$s){var w_$P=this._curMat,w_$G=this._x,w_$T=this._y;(0!==w_$X||0!==w_$Z)&&(this._x=w_$X*w_$P.a+w_$Z*w_$P.c,this._y=w_$Z*w_$P.d+w_$X*w_$P.b),w_$s&&w_$P.bTransform?(w_$x.mul(w_$s,w_$P,w_$k._tmpMatrix),(w_$s=w_$k._tmpMatrix)._checkTransform()):(this._x+=w_$P.tx,this._y+=w_$P.ty),this._drawTextureM(w_$B,w_$h,w_$l,w_$A,w_$n,0,0,w_$s,w_$t),this._x=w_$G,this._y=w_$T}else this._drawTextureM(w_$B,w_$h,w_$l,w_$A,w_$n,w_$X,w_$Z,null,w_$t)},w_$h.fillQuadrangle=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=this._curSubmit,w_$X=this._vb,w_$Z=this._shader2D,w_$t=w_$s.shaderValue;if(this._renderKey=0,w_$B.bitmap){var w_$P=w_$B.bitmap;w_$Z.glTexture==w_$P&&w_$Z.ALPHA===w_$t.ALPHA||(w_$Z.glTexture=w_$P,(w_$s=this._curSubmit=w_$sB.createSubmit(this,this._ib,w_$X,w_$X._byteLength/32*3,w_$UB.create(1,0))).shaderValue.glTexture=w_$P,this._submits[this._submits._length++]=w_$s),w_$VB.fillQuadrangleImgVb(w_$X,w_$h,w_$l,w_$A,w_$B.uv,w_$n||this._curMat,this._x,this._y)}else w_$s.shaderValue.fillStyle&&w_$s.shaderValue.fillStyle.equal(w_$B)&&w_$Z.ALPHA===w_$t.ALPHA||(w_$Z.glTexture=null,(w_$s=this._curSubmit=w_$sB.createSubmit(this,this._ib,w_$X,w_$X._byteLength/32*3,w_$UB.create(2,0))).shaderValue.defines.add(2),w_$s.shaderValue.fillStyle=w_$c.create(w_$B),this._submits[this._submits._length++]=w_$s),w_$VB.fillQuadrangleImgVb(w_$X,w_$h,w_$l,w_$A,w_$E.DEF_UV,w_$n||this._curMat,this._x,this._y);w_$s._numEle+=6},w_$h.drawTexture2=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){if(0!=w_$s){var w_$t=this._curMat;if(this._x=w_$B*w_$t.a+w_$h*w_$t.c,this._y=w_$h*w_$t.d+w_$B*w_$t.b,w_$n&&(w_$n=w_$t.bTransform||w_$n.bTransform?(w_$x.mul(w_$n,w_$t,w_$k._tmpMatrix),w_$k._tmpMatrix):(this._x+=w_$n.tx+w_$t.tx,this._y+=w_$n.ty+w_$t.ty,w_$x.EMPTY)),1!==w_$s||w_$X){var w_$P=this._shader2D.ALPHA,w_$G=this._nBlendType;this._shader2D.ALPHA=w_$s,w_$X&&(this._nBlendType=w_$F.TOINT(w_$X)),this._drawTextureM(w_$Z[0],w_$Z[1]-w_$l,w_$Z[2]-w_$A,w_$Z[3],w_$Z[4],0,0,w_$n,1),this._shader2D.ALPHA=w_$P,this._nBlendType=w_$G}else this._drawTextureM(w_$Z[0],w_$Z[1]-w_$l,w_$Z[2]-w_$A,w_$Z[3],w_$Z[4],0,0,w_$n,1);this._x=this._y=0}},w_$h.drawCanvas=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$B.context;if(this._renderKey=0,w_$s._targets)this._submits[this._submits._length++]=w_$WB.create(w_$s,0,null),this._curSubmit=w_$sB.RENDERBASE,w_$s._targets.drawTo(this,w_$h,w_$l,w_$A,w_$n);else{var w_$X=this._submits[this._submits._length++]=w_$WB.create(w_$s,this._shader2D.ALPHA,this._shader2D.filters),w_$Z=w_$A/w_$B.width,w_$t=w_$n/w_$B.height,w_$P=w_$X._matrix;this._curMat.copyTo(w_$P),1!=w_$Z&&1!=w_$t&&w_$P.scale(w_$Z,w_$t);var w_$G=w_$P.tx,w_$T=w_$P.ty;w_$P.tx=w_$P.ty=0,w_$P.transformPoint(w_$w.TEMP.setTo(w_$h,w_$l)),w_$P.translate(w_$w.TEMP.x+w_$G,w_$w.TEMP.y+w_$T),this._curSubmit=w_$sB.RENDERBASE}w_$v.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=w_$s._targets?"yellow":"green",this.strokeRect(w_$h-1,w_$l-1,w_$A+2,w_$n+2,1),this.strokeRect(w_$h,w_$l,w_$A,w_$n,1),this.restore())},w_$h.drawTarget=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){void 0===w_$P&&(w_$P=-1);var w_$G=this._vb;if(w_$VB.fillRectImgVb(w_$G,this._clipRect,w_$h,w_$l,w_$A,w_$n,w_$t||w_$E.DEF_UV,w_$s||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var w_$T=this._curSubmit=w_$TB.create(this,this._ib,w_$G,(w_$G._byteLength-64)/32*3,w_$Z,w_$X);w_$T.blendType=-1==w_$P?this._nBlendType:w_$P,w_$T.scope=w_$B,this._submits[this._submits._length++]=w_$T,this._curSubmit._numEle+=6}},w_$h.mixRGBandAlpha=function(w_$B){return this._mixRGBandAlpha(w_$B,this._shader2D.ALPHA)},w_$h._mixRGBandAlpha=function(w_$B,w_$h){var w_$l=(4278190080&w_$B)>>>24;return 0!=w_$l?w_$l*=w_$h:w_$l=255*w_$h,16777215&w_$B|w_$l<<24},w_$h.drawTriangles=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){if(!w_$B.loaded||!w_$B.source)return this.sprite&&w_$u.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;w_$B.bitmap;var w_$G=this._mixRGBandAlpha(4294967295,w_$Z),w_$T=(w_$A.length,w_$s.length);this._renderKey=-1;var w_$b=this._curSubmit=w_$MB.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,w_$UB.create(1,0));return w_$b.shaderValue.textureHost=w_$B,w_$b._renderType=10016,this._submits[this._submits._length++]=w_$b,w_$X?(w_$k._tmpMatrix.a=w_$X.a,w_$k._tmpMatrix.b=w_$X.b,w_$k._tmpMatrix.c=w_$X.c,w_$k._tmpMatrix.d=w_$X.d,w_$k._tmpMatrix.tx=w_$X.tx+w_$h,w_$k._tmpMatrix.ty=w_$X.ty+w_$l,w_$x.mul(w_$k._tmpMatrix,this._curMat,w_$k._tmpMatrix)):(w_$k._tmpMatrix.a=this._curMat.a,w_$k._tmpMatrix.b=this._curMat.b,w_$k._tmpMatrix.c=this._curMat.c,w_$k._tmpMatrix.d=this._curMat.d,w_$k._tmpMatrix.tx=this._curMat.tx+w_$h,w_$k._tmpMatrix.ty=this._curMat.ty+w_$l),this._triangleMesh.addData(w_$A,w_$n,w_$s,w_$k._tmpMatrix,w_$G,this),this._curSubmit._numEle+=w_$T,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},w_$h.transform=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){w_$L.save(this),w_$x.mul(w_$x.TEMP.setTo(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s),this._curMat,this._curMat),this._curMat._checkTransform()},w_$h.setTransformByMatrix=function(w_$B){w_$B.copyTo(this._curMat)},w_$h.transformByMatrix=function(w_$B){w_$L.save(this),w_$x.mul(w_$B,this._curMat,this._curMat),this._curMat._checkTransform()},w_$h.rotate=function(w_$B){w_$L.save(this),this._curMat.rotateEx(w_$B)},w_$h.scale=function(w_$B,w_$h){w_$L.save(this),this._curMat.scaleEx(w_$B,w_$h)},w_$h.clipRect=function(w_$B,w_$h,w_$l,w_$A){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var w_$n=w_$GB.create(4);this.addRenderObject(w_$n);var w_$s=this._vb,w_$X=w_$s._byteLength>>2;if(w_$VB.fillRectImgVb(w_$s,null,w_$B,w_$h,w_$l,w_$A,w_$E.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var w_$Z=this._curSubmit=w_$sB.createSubmit(this,this._ib,w_$s,(w_$s._byteLength-64)/32*3,w_$UB.create(2,0));w_$Z.shaderValue.ALPHA=1,this._submits[this._submits._length++]=w_$Z,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var w_$t=w_$GB.create(5);this.addRenderObject(w_$t);var w_$P=w_$s.getFloat32Array(),w_$G=Math.min(Math.min(Math.min(w_$P[0+w_$X],w_$P[4+w_$X]),w_$P[8+w_$X]),w_$P[12+w_$X]),w_$T=Math.max(Math.max(Math.max(w_$P[0+w_$X],w_$P[4+w_$X]),w_$P[8+w_$X]),w_$P[12+w_$X]),w_$b=Math.min(Math.min(Math.min(w_$P[1+w_$X],w_$P[5+w_$X]),w_$P[9+w_$X]),w_$P[13+w_$X]),w_$Q=Math.max(Math.max(Math.max(w_$P[1+w_$X],w_$P[5+w_$X]),w_$P[9+w_$X]),w_$P[13+w_$X]);w_$f.save(this,w_$t,w_$B,w_$h,w_$l,w_$A,w_$G,w_$b,w_$T-w_$G,w_$Q-w_$b),this._curSubmit=w_$sB.RENDERBASE}else{w_$l*=this._curMat.a,w_$A*=this._curMat.d;var w_$i=w_$w.TEMP;this._curMat.transformPoint(w_$i.setTo(w_$B,w_$h)),w_$l<0&&(w_$i.x=w_$i.x+w_$l,w_$l=-w_$l),w_$A<0&&(w_$i.y=w_$i.y+w_$A,w_$A=-w_$A),this._renderKey=0;var w_$$=this._curSubmit=w_$PB.create(this);(this._submits[this._submits._length++]=w_$$).submitIndex=this._submits._length,w_$$.submitLength=9999999,w_$K.save(this,w_$$);var w_$V=this._clipRect,w_$J=w_$V.x,w_$H=w_$V.y,w_$y=w_$i.x+w_$l,w_$C=w_$i.y+w_$A;w_$J<w_$i.x&&(w_$V.x=w_$i.x),w_$H<w_$i.y&&(w_$V.y=w_$i.y),w_$V.width=Math.min(w_$y,w_$J+w_$V.width)-w_$V.x,w_$V.height=Math.min(w_$C,w_$H+w_$V.height)-w_$V.y,this._shader2D.glTexture=null,w_$$.clipRect.copyFrom(w_$V),this._curSubmit=w_$sB.RENDERBASE}},w_$h.setIBVB=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G){if(void 0===w_$t&&(w_$t=0),void 0===w_$P&&(w_$P=0),void 0===w_$G&&(w_$G=0),null===w_$l){if(w_$J.isFlash){var w_$T=w_$A;w_$T._selfIB||(w_$T._selfIB=w_$DB.create(35044)),w_$T._selfIB.clear(),w_$l=w_$T._selfIB}else w_$l=this._ib;w_$VB.expandIBQuadrangle(w_$l,w_$A._byteLength/(4*w_$A.vertexStride*4))}if(!w_$Z||!w_$X)throw Error("setIBVB must input:shader shaderValues");var w_$b=w_$tB.create(this,w_$A,w_$l,w_$n,w_$X,w_$Z,w_$t,w_$P,w_$G);w_$s||(w_$s=w_$x.EMPTY),w_$s.translate(w_$B,w_$h),w_$x.mul(w_$s,this._curMat,w_$b._mat),w_$s.translate(-w_$B,-w_$h),this._submits[this._submits._length++]=w_$b,this._curSubmit=w_$sB.RENDERBASE,this._renderKey=0},w_$h.addRenderObject=function(w_$B){this._submits[this._submits._length++]=w_$B},w_$h.fillTrangles=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=this._curSubmit,w_$X=this._vb,w_$Z=this._shader2D,w_$t=w_$s.shaderValue,w_$P=w_$A.length>>4,w_$G=w_$B.bitmap;this._renderKey=0,w_$Z.glTexture==w_$G&&w_$Z.ALPHA===w_$t.ALPHA||((w_$s=this._curSubmit=w_$sB.createSubmit(this,this._ib,w_$X,w_$X._byteLength/32*3,w_$UB.create(1,0))).shaderValue.textureHost=w_$B,this._submits[this._submits._length++]=w_$s),w_$VB.fillTranglesVB(w_$X,w_$h,w_$l,w_$A,w_$n||this._curMat,this._x,this._y),w_$s._numEle+=6*w_$P},w_$h.submitElement=function(w_$B,w_$h){var w_$l=this._submits;for(w_$h<0&&(w_$h=w_$l._length);w_$B<w_$h;)w_$B+=w_$l[w_$B].renderSubmit()},w_$h.finish=function(){w_$CB.mainContext.finish()},w_$h.flush=function(){var w_$B=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(w_$B>this._ib.bufferLength/12&&w_$VB.expandIBQuadrangle(this._ib,w_$B),!this._isMain&&w_$O.enabled&&w_$O._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=w_$O._atlasRestore;for(var w_$h=this._submits,w_$l=0,w_$A=w_$h._length;w_$l<w_$A;w_$l++){var w_$n=w_$h[w_$l];10016===w_$n.getRenderType()&&w_$n.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),w_$hB.instance&&w_$hB.getInstance().reset();var w_$s;for(w_$l=0,w_$s=this.meshlist.length;w_$l<w_$s;w_$l++){var w_$X=this.meshlist[w_$l];w_$X.canReuse?w_$X.releaseMesh():w_$X.destroy()}return this.meshlist.length=0,this._curSubmit=w_$sB.RENDERBASE,this._renderKey=0,this._triangleMesh=w_$EB.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},w_$h.setPathId=function(w_$B){if(this.mId=w_$B,-1!=this.mId){this.mHaveKey=!1;var w_$h=w_$g.getInstance();w_$h.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,w_$h.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},w_$h.movePath=function(w_$B,w_$h){var w_$l=w_$B,w_$A=w_$h;w_$B=this._curMat.a*w_$l+this._curMat.c*w_$A+this._curMat.tx,w_$h=this._curMat.b*w_$l+this._curMat.d*w_$A+this._curMat.ty,this.mX+=w_$B,this.mY+=w_$h},w_$h.beginPath=function(){var w_$B=this._getPath();w_$B.tempArray.length=0,w_$B.closePath=!1,this.mX=0,this.mY=0},w_$h.closePath=function(){this._path.closePath=!0},w_$h.fill=function(w_$B){void 0===w_$B&&(w_$B=!1);var w_$h=this._getPath();this.drawPoly(0,0,w_$h.tempArray,this.fillStyle._color.numColor,0,0,w_$B)},w_$h.stroke=function(){var w_$B=this._getPath();if(0<this.lineWidth){if(-1==this.mId)w_$B.drawLine(0,0,w_$B.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var w_$h=w_$g.getInstance().shapeLineDic[this.mId];w_$h.rebuild(w_$B.tempArray),w_$B.setGeomtry(w_$h)}else w_$g.getInstance().addLine(this.mId,w_$B.drawLine(0,0,w_$B.tempArray,this.lineWidth,this.strokeStyle._color.numColor));w_$B.update();var w_$l=[this.mX,this.mY],w_$A=w_$sB.createShape(this,w_$B.ib,w_$B.vb,w_$B.count,w_$B.offset,w_$UB.create(4,0));w_$A.shaderValue.ALPHA=this._shader2D.ALPHA,w_$A.shaderValue.u_pos=w_$l,w_$A.shaderValue.u_mmat2=w_$HB.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=w_$A,this._renderKey=-1}},w_$h.line=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=this._curSubmit,w_$Z=this._vb;if(w_$VB.fillLineVb(w_$Z,this._clipRect,w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)){this._renderKey=0;var w_$t=this._shader2D,w_$P=w_$X.shaderValue;w_$t.strokeStyle===w_$P.strokeStyle&&w_$t.ALPHA===w_$P.ALPHA||(w_$t.glTexture=null,(w_$X=this._curSubmit=w_$sB.createSubmit(this,this._ib,w_$Z,(w_$Z._byteLength-64)/32*3,w_$UB.create(2,0))).shaderValue.strokeStyle=w_$t.strokeStyle,w_$X.shaderValue.mainID=2,w_$X.shaderValue.ALPHA=w_$t.ALPHA,this._submits[this._submits._length++]=w_$X),w_$X._numEle+=6}},w_$h.moveTo=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=!0);var w_$A=this._getPath();if(w_$l){var w_$n=w_$B,w_$s=w_$h;w_$B=this._curMat.a*w_$n+this._curMat.c*w_$s,w_$h=this._curMat.b*w_$n+this._curMat.d*w_$s}w_$A.addPoint(w_$B,w_$h)},w_$h.lineTo=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=!0);var w_$A=this._getPath();if(w_$l){var w_$n=w_$B,w_$s=w_$h;w_$B=this._curMat.a*w_$n+this._curMat.c*w_$s,w_$h=this._curMat.b*w_$n+this._curMat.d*w_$s}w_$A.addPoint(w_$B,w_$h)},w_$h.drawCurves=function(w_$B,w_$h,w_$l){this.setPathId(-1),this.beginPath(),this.strokeStyle=w_$l[3],this.lineWidth=w_$l[4];var w_$A=w_$l[2];w_$B+=w_$l[0],w_$h+=w_$l[1],this.movePath(w_$B,w_$h),this.moveTo(w_$A[0],w_$A[1]);for(var w_$n=2,w_$s=w_$A.length;w_$n<w_$s;)this.quadraticCurveTo(w_$A[w_$n++],w_$A[w_$n++],w_$A[w_$n++],w_$A[w_$n++]);this.stroke()},w_$h.arcTo=function(w_$B,w_$h,w_$l,w_$A,w_$n){if(-1==this.mId||!this.mHaveKey){var w_$s=0,w_$X=0,w_$Z=0,w_$t=this._getPath();this._curMat.copyTo(w_$k._tmpMatrix),w_$k._tmpMatrix.tx=w_$k._tmpMatrix.ty=0,w_$k._tempPoint.setTo(w_$t.getEndPointX(),w_$t.getEndPointY()),w_$k._tmpMatrix.invertTransformPoint(w_$k._tempPoint);var w_$P=w_$k._tempPoint.x-w_$B,w_$G=w_$k._tempPoint.y-w_$h,w_$T=Math.sqrt(w_$P*w_$P+w_$G*w_$G);if(!(w_$T<=1e-6)){var w_$b=w_$P/w_$T,w_$Q=w_$G/w_$T,w_$i=w_$l-w_$B,w_$$=w_$A-w_$h,w_$V=w_$i*w_$i+w_$$*w_$$,w_$J=Math.sqrt(w_$V);if(!(w_$J<=1e-6)){var w_$H=w_$i/w_$J,w_$y=w_$$/w_$J,w_$C=w_$b+w_$H,w_$o=w_$Q+w_$y,w_$u=Math.sqrt(w_$C*w_$C+w_$o*w_$o);if(!(w_$u<=1e-6)){var w_$v=w_$C/w_$u,w_$U=w_$o/w_$u,w_$x=Math.acos(w_$v*w_$b+w_$U*w_$Q),w_$w=Math.PI/2-w_$x,w_$z=(w_$T=w_$n/Math.tan(w_$w))*w_$b+w_$B,w_$a=w_$T*w_$Q+w_$h,w_$S=Math.sqrt(w_$T*w_$T+w_$n*w_$n),w_$N=w_$B+w_$v*w_$S,w_$R=w_$h+w_$U*w_$S,w_$W=0,w_$M=0;if(0<=w_$b*w_$y-w_$Q*w_$H){var w_$E=2*w_$w/w_$k.SEGNUM;w_$W=Math.sin(w_$E),w_$M=Math.cos(w_$E)}else w_$E=2*-w_$w/w_$k.SEGNUM,w_$W=Math.sin(w_$E),w_$M=Math.cos(w_$E);w_$X=this._curMat.a*w_$z+this._curMat.c*w_$a,w_$Z=this._curMat.b*w_$z+this._curMat.d*w_$a,w_$X==this._path.getEndPointX()&&w_$Z==this._path.getEndPointY()||w_$t.addPoint(w_$X,w_$Z);var w_$j=w_$z-w_$N,w_$g=w_$a-w_$R;for(w_$s=0;w_$s<w_$k.SEGNUM;w_$s++){var w_$_=w_$j*w_$M+w_$g*w_$W,w_$d=-w_$j*w_$W+w_$g*w_$M;w_$X=w_$_+w_$N,w_$Z=w_$d+w_$R,w_$B=this._curMat.a*w_$X+this._curMat.c*w_$Z,w_$Z=w_$h=this._curMat.b*w_$X+this._curMat.d*w_$Z,(w_$X=w_$B)==this._path.getEndPointX()&&w_$Z==this._path.getEndPointY()||w_$t.addPoint(w_$X,w_$Z),w_$j=w_$_,w_$g=w_$d}}}}}},w_$h.arc=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){if(void 0===w_$s&&(w_$s=!1),void 0===w_$X&&(w_$X=!0),-1!=this.mId){var w_$Z=w_$g.getInstance().shapeDic[this.mId];if(w_$Z&&this.mHaveKey&&!w_$Z.needUpdate(this._curMat))return;w_$h=w_$B=0}var w_$t,w_$P=0,w_$G=0,w_$T=0,w_$b=0,w_$Q=0,w_$i=0,w_$$=0;if(w_$G=w_$n-w_$A,w_$s)if(Math.abs(w_$G)>=2*Math.PI)w_$G=2*-Math.PI;else for(;0<w_$G;)w_$G-=2*Math.PI;else if(Math.abs(w_$G)>=2*Math.PI)w_$G=2*Math.PI;else for(;w_$G<0;)w_$G+=2*Math.PI;w_$t=w_$G/(w_$$=w_$l<101?Math.max(10,w_$G*w_$l/5):w_$l<201?Math.max(10,w_$G*w_$l/20):Math.max(10,w_$G*w_$l/40))/2,w_$T=Math.abs(4/3*(1-Math.cos(w_$t))/Math.sin(w_$t)),w_$s&&(w_$T=-w_$T);var w_$V=this._getPath(),w_$J=NaN,w_$H=NaN;for(w_$i=0;w_$i<=w_$$;w_$i++)w_$P=w_$A+w_$G*(w_$i/w_$$),w_$b=w_$B+Math.cos(w_$P)*w_$l,w_$Q=w_$h+Math.sin(w_$P)*w_$l,w_$X&&(w_$J=w_$b,w_$H=w_$Q,w_$b=this._curMat.a*w_$J+this._curMat.c*w_$H,w_$Q=this._curMat.b*w_$J+this._curMat.d*w_$H),w_$b==this._path.getEndPointX()&&w_$Q==this._path.getEndPointY()||w_$V.addPoint(w_$b,w_$Q);w_$b=w_$B+Math.cos(w_$n)*w_$l,w_$Q=w_$h+Math.sin(w_$n)*w_$l,w_$X&&(w_$J=w_$b,w_$H=w_$Q,w_$b=this._curMat.a*w_$J+this._curMat.c*w_$H,w_$Q=this._curMat.b*w_$J+this._curMat.d*w_$H),w_$b==this._path.getEndPointX()&&w_$Q==this._path.getEndPointY()||w_$V.addPoint(w_$b,w_$Q)},w_$h.quadraticCurveTo=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$T.I,w_$s=w_$l,w_$X=w_$A;w_$l=this._curMat.a*w_$s+this._curMat.c*w_$X,w_$A=this._curMat.b*w_$s+this._curMat.d*w_$X,w_$s=w_$B,w_$X=w_$h,w_$B=this._curMat.a*w_$s+this._curMat.c*w_$X,w_$h=this._curMat.b*w_$s+this._curMat.d*w_$X;for(var w_$Z=w_$n.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),w_$B,w_$h,w_$l,w_$A],30,2),w_$t=0,w_$P=w_$Z.length/2;w_$t<w_$P;w_$t++)this.lineTo(w_$Z[2*w_$t],w_$Z[2*w_$t+1],!1);this.lineTo(w_$l,w_$A,!1)},w_$h.rect=function(w_$B,w_$h,w_$l,w_$A){this._other=this._other.make(),this._other.path||(this._other.path=new w_$m),this._other.path.rect(w_$B,w_$h,w_$l,w_$A)},w_$h.strokeRect=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=.5*w_$n;this.line(w_$B-w_$s,w_$h,w_$B+w_$l+w_$s,w_$h,w_$n,this._curMat),this.line(w_$B+w_$l,w_$h,w_$B+w_$l,w_$h+w_$A,w_$n,this._curMat),this.line(w_$B,w_$h,w_$B,w_$h+w_$A,w_$n,this._curMat),this.line(w_$B-w_$s,w_$h+w_$A,w_$B+w_$l+w_$s,w_$h+w_$A,w_$n,this._curMat)},w_$h.clip=function(){},w_$h.drawPoly=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){void 0===w_$X&&(w_$X=!1),this._renderKey=0,this._shader2D.glTexture=null;var w_$Z=this._getPath();if(-1==this.mId)w_$Z.polygon(w_$B,w_$h,w_$l,w_$A,w_$n||1,w_$s);else if(this.mHaveKey){var w_$t=w_$g.getInstance().shapeDic[this.mId];w_$t.setMatrix(this._curMat),w_$t.rebuild(w_$Z.tempArray),w_$Z.setGeomtry(w_$t)}else{var w_$P=w_$Z.polygon(w_$B,w_$h,w_$l,w_$A,w_$n||1,w_$s);w_$g.getInstance().addShape(this.mId,w_$P),w_$P.setMatrix(this._curMat)}w_$Z.update();var w_$G,w_$T=[this.mX,this.mY];if((w_$G=w_$sB.createShape(this,w_$Z.ib,w_$Z.vb,w_$Z.count,w_$Z.offset,w_$UB.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,w_$G.shaderValue.u_pos=w_$T,w_$G.shaderValue.u_mmat2=w_$HB.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=w_$G,0<w_$n){if(this.mHaveLineKey){var w_$b=w_$g.getInstance().shapeLineDic[this.mId];w_$b.rebuild(w_$Z.tempArray),w_$Z.setGeomtry(w_$b)}else w_$g.getInstance().addShape(this.mId,w_$Z.drawLine(w_$B,w_$h,w_$l,w_$n,w_$s));w_$Z.update(),(w_$G=w_$sB.createShape(this,w_$Z.ib,w_$Z.vb,w_$Z.count,w_$Z.offset,w_$UB.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,w_$G.shaderValue.u_mmat2=w_$HB.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=w_$G}},w_$h.drawParticle=function(w_$B,w_$h,w_$l){w_$l.x=w_$B,w_$l.y=w_$h,this._submits[this._submits._length++]=w_$l},w_$h._getPath=function(){return this._path||(this._path=new w_$m)},w_$A(0,w_$h,"globalCompositeOperation",function(){return w_$F.NAMES[this._nBlendType]},function(w_$B){var w_$h=w_$F.TOINT[w_$B];null==w_$h||this._nBlendType===w_$h||(w_$Y.save(this,65536,this,!0),this._curSubmit=w_$sB.RENDERBASE,this._renderKey=0,this._nBlendType=w_$h)}),w_$A(0,w_$h,"strokeStyle",function(){return this._shader2D.strokeStyle},function(w_$B){this._shader2D.strokeStyle.equal(w_$B)||(w_$Y.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=w_$c.create(w_$B))}),w_$A(0,w_$h,"globalAlpha",function(){return this._shader2D.ALPHA},function(w_$B){(w_$B=Math.floor(1e3*w_$B)/1e3)!=this._shader2D.ALPHA&&(w_$Y.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=w_$B)}),w_$A(0,w_$h,"asBitmap",null,function(w_$B){if(w_$B){if(this._targets||(this._targets=new w_$q),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),w_$A(0,w_$h,"fillStyle",function(){return this._shader2D.fillStyle},function(w_$B){this._shader2D.fillStyle.equal(w_$B)||(w_$Y.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=w_$c.create(w_$B))}),w_$A(0,w_$h,"textAlign",function(){return this._other.textAlign},function(w_$B){this._other.textAlign===w_$B||(this._other=this._other.make(),w_$Y.save(this,32768,this._other,!1),this._other.textAlign=w_$B)}),w_$A(0,w_$h,"lineWidth",function(){return this._other.lineWidth},function(w_$B){this._other.lineWidth===w_$B||(this._other=this._other.make(),w_$Y.save(this,256,this._other,!1),this._other.lineWidth=w_$B)}),w_$A(0,w_$h,"textBaseline",function(){return this._other.textBaseline},function(w_$B){this._other.textBaseline===w_$B||(this._other=this._other.make(),w_$Y.save(this,16384,this._other,!1),this._other.textBaseline=w_$B)}),w_$A(0,w_$h,"font",null,function(w_$B){w_$B!=this._other.font.toString()&&(this._other=this._other.make(),w_$Y.save(this,8,this._other,!1),this._other.font===w_$iB.EMPTY?this._other.font=new w_$iB(w_$B):this._other.font.setFont(w_$B))}),w_$k.__init__=function(){w_$l.DEFAULT=new w_$l},w_$k._tempPoint=new w_$w,w_$k._SUBMITVBSIZE=32e3,w_$k._MAXSIZE=99999999,w_$k._RECTVBSIZE=16,w_$k.MAXCLIPRECT=new w_$z(0,0,99999999,99999999),w_$k._COUNT=0,w_$k._tmpMatrix=new w_$x,w_$k.SEGNUM=32,w_$k._contextcount=0,w_$X(w_$k,["_fontTemp",function(){return this._fontTemp=new w_$iB},"_drawStyleTemp",function(){return this._drawStyleTemp=new w_$c(null)}]),w_$k.__init$=function(){w_$l=function(){function w_$B(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=w_$iB.EMPTY}w_$b(w_$B,"");var w_$h=w_$B.prototype;return w_$h.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=w_$iB.EMPTY},w_$h.make=function(){return this===w_$B.DEFAULT?new w_$B:this},w_$B.DEFAULT=null,w_$B}()},w_$k}(),w_$UB=function(w_$B){function w_$A(w_$B,w_$h){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,w_$A.__super.call(this),this.defines=new w_$aB,this.position=w_$A._POSITION,this.mainID=w_$B,this.subID=w_$h,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=w_$B|w_$h,this._inClassCache=w_$A._cache[this._cacheID],0<w_$B&&!this._inClassCache&&(this._inClassCache=w_$A._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}w_$b(w_$A,"laya.webgl.shader.d2.value.Value2D",w_$d);var w_$h=w_$A.prototype;return w_$h.setValue=function(w_$B){},w_$h.refresh=function(){var w_$B=this.size;return w_$B[0]=w_$HB.width,w_$B[1]=w_$HB.height,this.alpha=this.ALPHA*w_$HB.worldAlpha,this.mmat=w_$HB.worldMatrix4,this},w_$h._ShaderWithCompile=function(){return w_$IB.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,w_$qB.create)},w_$h._withWorldShaderDefines=function(){var w_$B=w_$HB.worldShaderDefines,w_$h=w_$IB.sharders[this.mainID|this.defines._value|w_$B.getValue()];if(!w_$h){var w_$l,w_$A={};for(w_$l in this.defines.toNameDic())w_$A[w_$l]="";for(w_$l in w_$B.toNameDic())w_$A[w_$l]="";w_$h=w_$IB.withCompile2D(0,this.mainID,w_$A,this.mainID|this.defines._value|w_$B.getValue(),w_$qB.create)}var w_$n=w_$HB.worldFilters;if(!w_$n)return w_$h;for(var w_$s,w_$X=w_$n.length,w_$Z=0;w_$Z<w_$X;w_$Z++)(w_$s=w_$n[w_$Z])&&w_$s.action.setValue(this);return w_$h},w_$h.upload=function(){var w_$B=w_$HB;this.alpha=this.ALPHA*w_$B.worldAlpha,w_$HB.worldMatrix4!==w_$HB.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),w_$CB.shaderHighPrecision&&this.defines.add(1024);var w_$h,w_$l=w_$B.worldShaderDefines?this._withWorldShaderDefines():w_$IB.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=w_$B.width,this.size[1]=w_$B.height,this.mmat=w_$B.worldMatrix4,w_$jB.activeShader!==w_$l?w_$l._shaderValueWidth!==w_$B.width||w_$l._shaderValueHeight!==w_$B.height?(w_$l._shaderValueWidth=w_$B.width,w_$l._shaderValueHeight=w_$B.height):w_$h=w_$l._params2dQuick2||w_$l._make2dQuick2():w_$l._shaderValueWidth!==w_$B.width||w_$l._shaderValueHeight!==w_$B.height?(w_$l._shaderValueWidth=w_$B.width,w_$l._shaderValueHeight=w_$B.height):w_$h=w_$l._params2dQuick1||w_$l._make2dQuick1(),w_$l.upload(this,w_$h)},w_$h.setFilters=function(w_$B){if(this.filters=w_$B)for(var w_$h,w_$l=w_$B.length,w_$A=0;w_$A<w_$l;w_$A++)(w_$h=w_$B[w_$A])&&(this.defines.add(w_$h.type),w_$h.action.setValue(this))},w_$h.clear=function(){this.defines.setValue(this.subID)},w_$h.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},w_$A._initone=function(w_$B,w_$h){w_$A._typeClass[w_$B]=w_$h,w_$A._cache[w_$B]=[],w_$A._cache[w_$B]._length=0},w_$A.__init__=function(){w_$A._POSITION=[2,5126,!1,4*w_$$B.BYTES_PE,0],w_$A._TEXCOORD=[2,5126,!1,4*w_$$B.BYTES_PE,2*w_$$B.BYTES_PE],w_$A._initone(2,w_$kB),w_$A._initone(4,w_$FB),w_$A._initone(256,w_$OB),w_$A._initone(512,w_$dB),w_$A._initone(1,w_$pB),w_$A._initone(65,w_$eB),w_$A._initone(9,w_$pB)},w_$A.create=function(w_$B,w_$h){var w_$l=w_$A._cache[w_$B|w_$h];return w_$l._length?w_$l[--w_$l._length]:new w_$A._typeClass[w_$B|w_$h](w_$h)},w_$A._POSITION=null,w_$A._TEXCOORD=null,w_$A._cache=[],w_$A._typeClass=[],w_$A.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],w_$A}(),w_$xB=function(w_$B){function w_$V(w_$B,w_$h){w_$V.__super.call(this,w_$B,w_$h)}w_$b(w_$V,"laya.webgl.utils.RenderSprite3D",w_$H);var w_$h=w_$V.prototype;return w_$h.onCreate=function(w_$B){switch(w_$B){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},w_$h._mask=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s,w_$X=this._next,w_$Z=w_$B.mask;if(w_$Z){w_$h.ctx.save();var w_$t=w_$h.ctx.globalCompositeOperation,w_$P=new w_$z;if(w_$P.copyFrom(w_$Z.getBounds()),w_$P.width=Math.round(w_$P.width),w_$P.height=Math.round(w_$P.height),w_$P.x=Math.round(w_$P.x),w_$P.y=Math.round(w_$P.y),0<w_$P.width&&0<w_$P.height){var w_$G=w_$B._style._tf,w_$T=w_$ZB.create();w_$T.addValue("bounds",w_$P),w_$n=w_$XB.create([w_$T,w_$h],laya.webgl.utils.RenderSprite3D.tmpTarget),w_$h.addRenderObject(w_$n),w_$Z.render(w_$h,-w_$P.x,-w_$P.y),w_$n=w_$XB.create([w_$T],laya.webgl.utils.RenderSprite3D.endTmpTarget),w_$h.addRenderObject(w_$n),w_$h.ctx.save(),w_$h.clipRect(w_$l-w_$G.translateX+w_$P.x,w_$A-w_$G.translateY+w_$P.y,w_$P.width,w_$P.height),w_$X._fun.call(w_$X,w_$B,w_$h,w_$l,w_$A),w_$h.ctx.restore(),w_$s=w_$GB.create(6),w_$t=w_$h.ctx.globalCompositeOperation,w_$s.blendMode="mask",w_$h.addRenderObject(w_$s),w_$x.TEMP.identity();var w_$b=w_$UB.create(1,0),w_$Q=w_$E.INV_UV,w_$i=w_$P.width,w_$$=w_$P.height;(w_$P.width<32||w_$P.height<32)&&((w_$Q=w_$V.tempUV)[0]=0,w_$Q[1]=0,w_$Q[2]=32<=w_$P.width?1:w_$P.width/32,w_$Q[3]=0,w_$Q[4]=32<=w_$P.width?1:w_$P.width/32,w_$Q[5]=32<=w_$P.height?1:w_$P.height/32,w_$Q[6]=0,w_$Q[7]=32<=w_$P.height?1:w_$P.height/32,w_$P.width=32<=w_$P.width?w_$P.width:32,w_$P.height=32<=w_$P.height?w_$P.height:32,w_$Q[1]*=-1,w_$Q[3]*=-1,w_$Q[5]*=-1,w_$Q[7]*=-1,w_$Q[1]+=1,w_$Q[3]+=1,w_$Q[5]+=1,w_$Q[7]+=1),w_$h.ctx.drawTarget(w_$T,w_$l+w_$P.x-w_$G.translateX,w_$A+w_$P.y-w_$G.translateY,w_$i,w_$$,w_$x.TEMP,"tmpTarget",w_$b,w_$Q,6),w_$n=w_$XB.create([w_$T],laya.webgl.utils.RenderSprite3D.recycleTarget),w_$h.addRenderObject(w_$n),(w_$s=w_$GB.create(6)).blendMode=w_$t,w_$h.addRenderObject(w_$s)}w_$h.ctx.restore()}else w_$X._fun.call(w_$X,w_$B,w_$h,w_$l,w_$A)},w_$h._blend=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B._style,w_$s=this._next;w_$n.blendMode?(w_$h.ctx.save(),w_$h.ctx.globalCompositeOperation=w_$n.blendMode,w_$s._fun.call(w_$s,w_$B,w_$h,w_$l,w_$A),w_$h.ctx.restore()):w_$s._fun.call(w_$s,w_$B,w_$h,w_$l,w_$A)},w_$h._transform=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.transform,w_$s=this._next;if(w_$n&&w_$s!=w_$H.NORENDER){var w_$X=w_$h.ctx;w_$B._style;w_$n.tx=w_$l,w_$n.ty=w_$A;var w_$Z=w_$X._getTransformMatrix(),w_$t=w_$Z.clone();w_$x.mul(w_$n,w_$Z,w_$Z),w_$Z._checkTransform(),w_$n.tx=w_$n.ty=0,w_$s._fun.call(w_$s,w_$B,w_$h,0,0),w_$t.copyTo(w_$Z),w_$t.destroy()}else w_$s._fun.call(w_$s,w_$B,w_$h,w_$l,w_$A)},w_$V.tmpTarget=function(w_$B,w_$h){var w_$l=w_$B.getValue("bounds"),w_$A=w_$gB.create(w_$l.width,w_$l.height);w_$A.start(),w_$A.clear(0,0,0,0),w_$B.addValue("tmpTarget",w_$A)},w_$V.endTmpTarget=function(w_$B){w_$B.getValue("tmpTarget").end()},w_$V.recycleTarget=function(w_$B){w_$B.getValue("tmpTarget").recycle(),w_$B.recycle()},w_$X(w_$V,["tempUV",function(){return this.tempUV=new Array(8)}]),w_$V}(),w_$wB=function(w_$B){function w_$h(){this.data=null,w_$h.__super.call(this)}w_$b(w_$h,"laya.filters.webgl.ColorFilterActionGL",w_$_);var w_$l=w_$h.prototype;return w_$u.imps(w_$l,{"laya.filters.IFilterActionGL":!0}),w_$l.setValue=function(w_$B){w_$B.colorMat=this.data._mat,w_$B.colorAlpha=this.data._alpha},w_$l.apply3d=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$B.getValue("bounds"),w_$X=w_$UB.create(1,0);w_$X.setFilters([this.data]);var w_$Z=w_$x.TEMP;w_$Z.identity(),w_$l.ctx.drawTarget(w_$B,0,0,w_$s.width,w_$s.height,w_$Z,"src",w_$X)},w_$h}(),w_$zB=function(w_$B){function w_$s(w_$B,w_$h,w_$l,w_$A,w_$n){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,w_$s.__super.call(this,w_$B,w_$h,w_$n),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new w_$cB,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=w_$l,this._atlasCanvas.height=w_$A,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}w_$b(w_$s,"laya.webgl.atlas.Atlaser",w_$k);var w_$h=w_$s.prototype;return w_$h.computeUVinAtlasTexture=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$O.atlasTextureWidth,w_$s=w_$O.atlasTextureHeight,w_$X=w_$l/w_$n,w_$Z=w_$A/w_$s,w_$t=(w_$l+w_$B.bitmap.width)/w_$n,w_$P=(w_$A+w_$B.bitmap.height)/w_$s,w_$G=w_$B.bitmap.width/w_$n,w_$T=w_$B.bitmap.height/w_$s;w_$B.uv=[w_$X+w_$h[0]*w_$G,w_$Z+w_$h[1]*w_$T,w_$t-(1-w_$h[2])*w_$G,w_$Z+w_$h[3]*w_$T,w_$t-(1-w_$h[4])*w_$G,w_$P-(1-w_$h[5])*w_$T,w_$X+w_$h[6]*w_$G,w_$P-(1-w_$h[7])*w_$T]},w_$h.findBitmapIsExist=function(w_$B){if(w_$B instanceof laya.webgl.resource.WebGLImage){var w_$h=w_$B,w_$l=w_$h.url,w_$A=this._InAtlasWebGLImagesKey[w_$l||w_$h.id];if(w_$A)return w_$A.offsetInfoID}return-1},w_$h.addToAtlasTexture=function(w_$B,w_$h,w_$l){if(w_$B instanceof laya.webgl.resource.WebGLImage){var w_$A=w_$B,w_$n=w_$A.url;this._InAtlasWebGLImagesKey[w_$n||w_$A.id]={bitmap:w_$B,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([w_$h,w_$l])}this._atlasCanvas.texSubImage2D(w_$h,w_$l,w_$B.atlasSource),w_$B.clearAtlasSource()},w_$h.addToAtlas=function(w_$B,w_$h,w_$l){w_$B._atlasID=this._inAtlasTextureKey.length;var w_$A=w_$B.uv.slice(),w_$n=w_$B.bitmap;this._inAtlasTextureKey.push(w_$B),this._inAtlasTextureOriUVValue.push(w_$A),this._inAtlasTextureBitmapValue.push(w_$n),this.computeUVinAtlasTexture(w_$B,w_$A,w_$h,w_$l),w_$B.bitmap=this._atlasCanvas},w_$h.clear=function(){for(var w_$B=0,w_$h=this._inAtlasTextureKey.length;w_$B<w_$h;w_$B++)this._inAtlasTextureKey[w_$B].bitmap=this._inAtlasTextureBitmapValue[w_$B],this._inAtlasTextureKey[w_$B].uv=this._inAtlasTextureOriUVValue[w_$B],this._inAtlasTextureKey[w_$B]._atlasID=-1,this._inAtlasTextureKey[w_$B].bitmap.lock=!1,this._inAtlasTextureKey[w_$B].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},w_$h.dispose=function(){this.clear(),this._atlasCanvas.destroy()},w_$A(0,w_$h,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),w_$A(0,w_$h,"texture",function(){return this._atlasCanvas}),w_$A(0,w_$h,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),w_$s}(),w_$aB=function(w_$B){function w_$l(){w_$l.__super.call(this,w_$l.__name2int,w_$l.__int2name,w_$l.__int2nameMap)}return w_$b(w_$l,"laya.webgl.shader.d2.ShaderDefines2D",w_$r),w_$l.__init__=function(){w_$l.reg("TEXTURE2D",1),w_$l.reg("COLOR2D",2),w_$l.reg("PRIMITIVE",4),w_$l.reg("GLOW_FILTER",8),w_$l.reg("BLUR_FILTER",16),w_$l.reg("COLOR_FILTER",32),w_$l.reg("COLOR_ADD",64),w_$l.reg("WORLDMAT",128),w_$l.reg("FILLTEXTURE",256),w_$l.reg("FSHIGHPRECISION",1024),w_$l.reg("TXTALPHA",2048),w_$l.reg("TXTCOMPRESS",4096)},w_$l.reg=function(w_$B,w_$h){w_$r._reg(w_$B,w_$h,w_$l.__name2int,w_$l.__int2name)},w_$l.toText=function(w_$B,w_$h,w_$l){return w_$r._toText(w_$B,w_$h,w_$l)},w_$l.toInt=function(w_$B){return w_$r._toInt(w_$B,w_$l.__name2int)},w_$l.TEXTURE2D=1,w_$l.COLOR2D=2,w_$l.PRIMITIVE=4,w_$l.FILTERGLOW=8,w_$l.FILTERBLUR=16,w_$l.FILTERCOLOR=32,w_$l.COLORADD=64,w_$l.WORLDMAT=128,w_$l.FILLTEXTURE=256,w_$l.SKINMESH=512,w_$l.SHADERDEFINE_FSHIGHPRECISION=1024,w_$l.TXTALPHA=2048,w_$l.TXTCOMPRESS=4096,w_$l.__name2int={},w_$l.__int2name=[],w_$l.__int2nameMap=[],w_$l}(),w_$SB=(function(w_$B){function w_$Z(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$Z.__super.call(this,w_$B,w_$h,w_$l,w_$A,40,w_$n,w_$s,w_$X)}w_$b(w_$Z,"laya.webgl.shapes.Ellipse",w_$lB)}(),function(w_$B){function w_$s(w_$B,w_$h,w_$l,w_$A,w_$n){this._points=[],this.rebuild(w_$l),w_$s.__super.call(this,w_$B,w_$h,0,0,0,w_$n,w_$A,w_$n,0)}w_$b(w_$s,"laya.webgl.shapes.Line",w_$lB);var w_$h=w_$s.prototype;return w_$h.rebuild=function(w_$B){var w_$h=w_$B.length;w_$h!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(w_$h/2-1)),this.mFloat32Array=new Float32Array(5*w_$h)),this._points.length=0;for(var w_$l=NaN,w_$A=NaN,w_$n=-1,w_$s=-1,w_$X=w_$B.length/2,w_$Z=0;w_$Z<w_$X;w_$Z++)w_$l=w_$B[2*w_$Z],w_$A=w_$B[2*w_$Z+1],(.01<Math.abs(w_$n-w_$l)||.01<Math.abs(w_$s-w_$A))&&this._points.push(w_$l,w_$A),w_$n=w_$l,w_$s=w_$A},w_$h.getData=function(w_$B,w_$h,w_$l){var w_$A=[],w_$n=[];0<this.borderWidth&&this.createLine2(this._points,w_$A,this.borderWidth,w_$l,w_$n,this._points.length/2),this.mUint16Array.set(w_$A,0),this.mFloat32Array.set(w_$n,0),w_$B.append(this.mUint16Array),w_$h.append(this.mFloat32Array)},w_$s}()),w_$NB=function(w_$B){function w_$T(w_$B,w_$h,w_$l,w_$A,w_$n){this._points=[];for(var w_$s=NaN,w_$X=NaN,w_$Z=-1,w_$t=-1,w_$P=w_$l.length/2-1,w_$G=0;w_$G<w_$P;w_$G++)w_$s=w_$l[2*w_$G],w_$X=w_$l[2*w_$G+1],(.01<Math.abs(w_$Z-w_$s)||.01<Math.abs(w_$t-w_$X))&&this._points.push(w_$s,w_$X),w_$Z=w_$s,w_$t=w_$X;w_$s=w_$l[2*w_$P],w_$X=w_$l[2*w_$P+1],w_$Z=this._points[0],w_$t=this._points[1],(.01<Math.abs(w_$Z-w_$s)||.01<Math.abs(w_$t-w_$X))&&this._points.push(w_$s,w_$X),w_$T.__super.call(this,w_$B,w_$h,0,0,this._points.length/2,0,w_$A,w_$n)}w_$b(w_$T,"laya.webgl.shapes.LoopLine",w_$lB);var w_$h=w_$T.prototype;return w_$h.getData=function(w_$B,w_$h,w_$l){if(0<this.borderWidth){for(var w_$A=this.color,w_$n=(w_$A>>16&255)/255,w_$s=(w_$A>>8&255)/255,w_$X=(255&w_$A)/255,w_$Z=[],w_$t=0,w_$P=0,w_$G=[],w_$T=Math.floor(this._points.length/2),w_$b=0;w_$b<w_$T;w_$b++)w_$t=this._points[2*w_$b],w_$P=this._points[2*w_$b+1],w_$Z.push(this.x+w_$t,this.y+w_$P,w_$n,w_$s,w_$X);this.createLoopLine(w_$Z,w_$G,this.borderWidth,w_$l+w_$Z.length/5),w_$B.append(new Uint16Array(w_$G)),w_$h.append(new Float32Array(w_$Z))}},w_$h.createLoopLine=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){w_$B.length;var w_$X=w_$B.concat(),w_$Z=w_$n||w_$B,w_$t=this.borderColor,w_$P=(w_$t>>16&255)/255,w_$G=(w_$t>>8&255)/255,w_$T=(255&w_$t)/255,w_$b=[w_$X[0],w_$X[1]],w_$Q=[w_$X[w_$X.length-5],w_$X[w_$X.length-4]],w_$i=w_$Q[0]+.5*(w_$b[0]-w_$Q[0]),w_$$=w_$Q[1]+.5*(w_$b[1]-w_$Q[1]);w_$X.unshift(w_$i,w_$$,0,0,0),w_$X.push(w_$i,w_$$,0,0,0);var w_$V,w_$J,w_$H,w_$y,w_$C,w_$o,w_$u,w_$v,w_$U,w_$x,w_$w,w_$z,w_$a,w_$S,w_$N,w_$R,w_$W,w_$M,w_$E,w_$j,w_$g=w_$X.length/5,w_$_=w_$A,w_$d=w_$l/2;w_$H=w_$X[0],w_$y=w_$X[1],w_$x=w_$H-(w_$C=w_$X[5]),w_$U=(w_$U=-(w_$y-(w_$o=w_$X[6])))/(w_$j=Math.sqrt(w_$U*w_$U+w_$x*w_$x))*w_$d,w_$x=w_$x/w_$j*w_$d,w_$Z.push(w_$H-w_$U,w_$y-w_$x,w_$P,w_$G,w_$T,w_$H+w_$U,w_$y+w_$x,w_$P,w_$G,w_$T);for(var w_$k=1;w_$k<w_$g-1;w_$k++)w_$H=w_$X[5*(w_$k-1)],w_$y=w_$X[5*(w_$k-1)+1],w_$C=w_$X[5*w_$k],w_$o=w_$X[5*w_$k+1],w_$u=w_$X[5*(w_$k+1)],w_$v=w_$X[5*(w_$k+1)+1],w_$x=w_$H-w_$C,w_$z=w_$C-w_$u,w_$N=(-(w_$U=(w_$U=-(w_$y-w_$o))/(w_$j=Math.sqrt(w_$U*w_$U+w_$x*w_$x))*w_$d)+w_$H)*(-(w_$x=w_$x/w_$j*w_$d)+w_$o)-(-w_$U+w_$C)*(-w_$x+w_$y),w_$M=(-(w_$w=(w_$w=-(w_$o-w_$v))/(w_$j=Math.sqrt(w_$w*w_$w+w_$z*w_$z))*w_$d)+w_$u)*(-(w_$z=w_$z/w_$j*w_$d)+w_$o)-(-w_$w+w_$C)*(-w_$z+w_$v),w_$E=(w_$a=-w_$x+w_$y-(-w_$x+w_$o))*(w_$W=-w_$w+w_$C-(-w_$w+w_$u))-(w_$R=-w_$z+w_$v-(-w_$z+w_$o))*(w_$S=-w_$U+w_$C-(-w_$U+w_$H)),Math.abs(w_$E)<.1?(w_$E+=10.1,w_$Z.push(w_$C-w_$U,w_$o-w_$x,w_$P,w_$G,w_$T,w_$C+w_$U,w_$o+w_$x,w_$P,w_$G,w_$T)):(((w_$V=(w_$S*w_$M-w_$W*w_$N)/w_$E)-w_$C)*(w_$V-w_$C)+((w_$J=(w_$R*w_$N-w_$a*w_$M)/w_$E)-w_$o)+(w_$J-w_$o),w_$Z.push(w_$V,w_$J,w_$P,w_$G,w_$T,w_$C-(w_$V-w_$C),w_$o-(w_$J-w_$o),w_$P,w_$G,w_$T));w_$s&&(w_$h=w_$s);var w_$O=this.edges+1;for(w_$k=1;w_$k<w_$O;w_$k++)w_$h.push(w_$_+2*(w_$k-1),w_$_+2*(w_$k-1)+1,w_$_+2*w_$k+1,w_$_+2*w_$k+1,w_$_+2*w_$k,w_$_+2*(w_$k-1));return w_$h.push(w_$_+2*(w_$k-1),w_$_+2*(w_$k-1)+1,w_$_+1,w_$_+1,w_$_,w_$_+2*(w_$k-1)),w_$Z},w_$T}(),w_$RB=function(w_$B){function w_$X(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=w_$x.create(),this._points=w_$l.slice(0,w_$l.length),w_$X.__super.call(this,w_$B,w_$h,0,0,this._points.length/2,w_$A,w_$n,w_$s)}w_$b(w_$X,"laya.webgl.shapes.Polygon",w_$lB);var w_$h=w_$X.prototype;return w_$h.rebuild=function(w_$B){this._repaint||(this._points.length=0,this._points=this._points.concat(w_$B))},w_$h.setMatrix=function(w_$B){w_$B.copyTo(this._mat)},w_$h.needUpdate=function(w_$B){return this._repaint=this._mat.a==w_$B.a&&this._mat.b==w_$B.b&&this._mat.c==w_$B.c&&this._mat.d==w_$B.d&&this._mat.tx==w_$B.tx&&this._mat.ty==w_$B.ty,!this._repaint},w_$h.getData=function(w_$B,w_$h,w_$l){var w_$A,w_$n=0,w_$s=this._points,w_$X=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=w_$l){for(this._start=w_$l,w_$A=[],w_$X=this.earcutTriangles.length,w_$n=0;w_$n<w_$X;w_$n++)w_$A.push(this.earcutTriangles[w_$n]+w_$l);this.mUint16Array=new Uint16Array(w_$A)}}else{this._start=w_$l,w_$A=[];var w_$Z=[],w_$t=[],w_$P=this.color,w_$G=(w_$P>>16&255)/255,w_$T=(w_$P>>8&255)/255,w_$b=(255&w_$P)/255;for(w_$X=Math.floor(w_$s.length/2),w_$n=0;w_$n<w_$X;w_$n++)w_$Z.push(this.x+w_$s[2*w_$n],this.y+w_$s[2*w_$n+1],w_$G,w_$T,w_$b),w_$t.push(this.x+w_$s[2*w_$n],this.y+w_$s[2*w_$n+1]);for(this.earcutTriangles=w_$AB.earcut(w_$t,null,2),w_$X=this.earcutTriangles.length,w_$n=0;w_$n<w_$X;w_$n++)w_$A.push(this.earcutTriangles[w_$n]+w_$l);this.mUint16Array=new Uint16Array(w_$A),this.mFloat32Array=new Float32Array(w_$Z)}w_$B.append(this.mUint16Array),w_$h.append(this.mFloat32Array)},w_$X}(),w_$WB=function(w_$B){function w_$s(){this._matrix=new w_$x,this._matrix4=w_$$B.defaultMatrix4.concat(),w_$s.__super.call(this,1e4),this.shaderValue=new w_$UB(0,0)}w_$b(w_$s,"laya.webgl.submit.SubmitCanvas",w_$sB);var w_$h=w_$s.prototype;return w_$h.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var w_$B=w_$HB.worldAlpha,w_$h=w_$HB.worldMatrix4,w_$l=w_$HB.worldMatrix,w_$A=w_$HB.worldFilters,w_$n=w_$HB.worldShaderDefines,w_$s=this.shaderValue,w_$X=this._matrix,w_$Z=this._matrix4,w_$t=w_$x.TEMP;return w_$x.mul(w_$X,w_$l,w_$t),w_$Z[0]=w_$t.a,w_$Z[1]=w_$t.b,w_$Z[4]=w_$t.c,w_$Z[5]=w_$t.d,w_$Z[12]=w_$t.tx,w_$Z[13]=w_$t.ty,w_$HB.worldMatrix=w_$t.clone(),w_$HB.worldMatrix4=w_$Z,w_$HB.worldAlpha=w_$HB.worldAlpha*w_$s.alpha,w_$s.filters&&w_$s.filters.length&&(w_$HB.worldFilters=w_$s.filters,w_$HB.worldShaderDefines=w_$s.defines),this._ctx_src.flush(),w_$HB.worldAlpha=w_$B,w_$HB.worldMatrix4=w_$h,w_$HB.worldMatrix.destroy(),w_$HB.worldMatrix=w_$l,w_$HB.worldFilters=w_$A,w_$HB.worldShaderDefines=w_$n,1},w_$h.releaseRender=function(){var w_$B=w_$s._cache;this._ctx_src=null,w_$B[w_$B._length++]=this},w_$h.getRenderType=function(){return 10003},w_$s.create=function(w_$B,w_$h,w_$l){var w_$A=w_$s._cache._length?w_$s._cache[--w_$s._cache._length]:new w_$s;w_$A._ctx_src=w_$B;var w_$n=w_$A.shaderValue;return w_$n.alpha=w_$h,w_$n.defines.setValue(0),w_$l&&w_$l.length&&w_$n.setFilters(w_$l),w_$A},w_$s._cache=((w_$s._cache=[])._length=0,w_$s._cache),w_$s}(),w_$MB=function(w_$B){function w_$P(w_$B){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===w_$B&&(w_$B=1e4),w_$P.__super.call(this,w_$B)}w_$b(w_$P,"laya.webgl.submit.SubmitTexture",w_$sB);var w_$h=w_$P.prototype;return w_$h.releaseRender=function(){var w_$B=w_$P._cache;(w_$B[w_$B._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},w_$h.addTexture=function(w_$B,w_$h){this._texsID[this._texs.length]=w_$B._uvID,this._texs.push(w_$B),this._vbPos.push(w_$h)},w_$h.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var w_$B=this.shaderValue.textureHost.bitmap;if(null!==w_$B)for(var w_$h=this._vb.getFloat32Array(),w_$l=0,w_$A=this._texs.length;w_$l<w_$A;w_$l++){var w_$n=this._texs[w_$l];w_$n.active();var w_$s=w_$n.uv;if(this._texsID[w_$l]!==w_$n._uvID){this._texsID[w_$l]=w_$n._uvID;var w_$X=this._vbPos[w_$l];w_$h[w_$X+2]=w_$s[0],w_$h[w_$X+3]=w_$s[1],w_$h[w_$X+6]=w_$s[2],w_$h[w_$X+7]=w_$s[3],w_$h[w_$X+10]=w_$s[4],w_$h[w_$X+11]=w_$s[5],w_$h[w_$X+14]=w_$s[6],w_$h[w_$X+15]=w_$s[7],this._vb.setNeedUpload()}w_$n.bitmap!==w_$B&&(this._isSameTexture=!1)}}},w_$h.renderSubmit=function(){if(0===this._numEle)return w_$P._shaderSet=!1,1;var w_$B=this.shaderValue.textureHost;if(w_$B){var w_$h=w_$B.source;if(!w_$B.bitmap||!w_$h)return w_$P._shaderSet=!1,1;this.shaderValue.texture=w_$h,w_$B.alphaTexture&&w_$B.alphaTexture.source&&(this.shaderValue.texture1=w_$B.alphaTexture.source)}this._vb.bind_upload(this._ib);var w_$l=w_$CB.mainContext;if(w_$F.activeBlendFunction!==this._blendFn&&(w_$l.enable(3042),this._blendFn(w_$l),w_$F.activeBlendFunction=this._blendFn),w_$N.drawCall++,w_$N.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&w_$jB.activeShader&&w_$P._shaderSet?(w_$jB.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&w_$jB.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),w_$P._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var w_$A=w_$B.bitmap,w_$n=0,w_$s=w_$jB.activeShader,w_$X=0,w_$Z=this._texs.length;w_$X<w_$Z;w_$X++){var w_$t=this._texs[w_$X];w_$t.bitmap===w_$A&&w_$X+1!==w_$Z||(w_$s.uploadTexture2D(w_$t.source),w_$l.drawElements(4,6*(w_$X-w_$n+1),5123,this._startIdx+6*w_$n*w_$$B.BYTES_PIDX),w_$A=w_$t.bitmap,w_$n=w_$X)}else w_$l.drawElements(4,this._numEle,5123,this._startIdx);return 1},w_$P.create=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$P._cache._length?w_$P._cache[--w_$P._cache._length]:new w_$P;null==w_$l&&((w_$l=w_$s._selfVb||(w_$s._selfVb=w_$rB.create(-1))).clear(),w_$A=0),w_$s._ib=w_$h,w_$s._vb=w_$l,w_$s._startIdx=w_$A*w_$$B.BYTES_PIDX,w_$s._numEle=0;var w_$X=w_$B._nBlendType;w_$s._blendFn=w_$B._targets?w_$F.targetFns[w_$X]:w_$F.fns[w_$X],w_$s.shaderValue=w_$n,w_$s.shaderValue.setValue(w_$B._shader2D);var w_$Z=w_$B._shader2D.filters;return w_$Z&&w_$s.shaderValue.setFilters(w_$Z),w_$s},w_$P._cache=((w_$P._cache=[])._length=0,w_$P._cache),w_$P._shaderSet=!0,w_$P}(),w_$EB=function(w_$B){function w_$J(){w_$J.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}w_$b(w_$J,"laya.webgl.utils.MeshTexture",w_$JB);var w_$h=w_$J.prototype;return w_$h.addData=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){for(var w_$X=w_$B.length/2,w_$Z=this._vb.needSize(w_$X*w_$J.const_stride)>>2,w_$t=this._vb.getFloat32Array(),w_$P=0,w_$G=0;w_$G<w_$X;w_$G++){var w_$T=w_$B[w_$P],w_$b=w_$B[w_$P+1],w_$Q=w_$T*w_$A.a+w_$b*w_$A.c+w_$A.tx,w_$i=w_$T*w_$A.b+w_$b*w_$A.d+w_$A.ty;w_$t[w_$Z++]=w_$Q,w_$t[w_$Z++]=w_$i,w_$t[w_$Z++]=w_$h[w_$P],w_$t[w_$Z++]=w_$h[w_$P+1],w_$P+=2}this._vb.setNeedUpload();var w_$$=this.vertNum;if(0<w_$$){(w_$X=w_$l.length)>w_$J.tmpIdx.length&&(w_$J.tmpIdx=new Uint16Array(w_$X));for(var w_$V=0;w_$V<w_$X;w_$V++)w_$J.tmpIdx[w_$V]=w_$l[w_$V]+w_$$;this._ib.appendU16Array(w_$J.tmpIdx,w_$l.length)}else this._ib.append(w_$l);this._ib.setNeedUpload(),this.vertNum+=w_$X,this.indexNum+=w_$l.length},w_$h.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},w_$h.destroy=function(){this._ib.destroy(),this._vb.destroy()},w_$J.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new w_$J},w_$J.const_stride=16,w_$J._POOL=[],w_$X(w_$J,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),w_$J}(),w_$jB=function(w_$B){function w_$h(){w_$h.__super.call(this),this.lock=!0}return w_$b(w_$h,"laya.webgl.shader.BaseShader",w_$y),w_$h.activeShader=null,w_$h.bindShader=null,w_$h}(),w_$gB=function(w_$h){function w_$G(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===w_$l&&(w_$l=6408),void 0===w_$A&&(w_$A=5121),void 0===w_$n&&(w_$n=34041),void 0===w_$s&&(w_$s=!1),void 0===w_$X&&(w_$X=!1),void 0===w_$Z&&(w_$Z=-1),void 0===w_$t&&(w_$t=-1),this._type=1,this._w=w_$B,this._h=w_$h,this._surfaceFormat=w_$l,this._surfaceType=w_$A,this._depthStencilFormat=w_$n,w_$J.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=w_$s,this._repeat=w_$X,this._minFifter=w_$Z,this._magFifter=w_$t,this._createWebGLRenderTarget(),this.bitmap.lock=!0,w_$G.__super.call(this,this.bitmap,w_$E.INV_UV)}w_$b(w_$G,"laya.webgl.resource.RenderTarget2D",w_$h);var w_$B=w_$G.prototype;return w_$u.imps(w_$B,{"laya.resource.IDispose":!0}),w_$B.getType=function(){return this._type},w_$B.getTexture=function(){return this},w_$B.size=function(w_$B,w_$h){this._w==w_$B&&this._h==w_$h||(this._w=w_$B,this._h=w_$h,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},w_$B.release=function(){this.destroy()},w_$B.recycle=function(){w_$G.POOL.push(this)},w_$B.start=function(){var w_$B=w_$CB.mainContext;return this._preRenderTarget=w_$HB.curRenderTarget,w_$HB.curRenderTarget=this,w_$B.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(w_$B.viewport(0,0,this._w,this._h),this._svWidth=w_$HB.width,this._svHeight=w_$HB.height,w_$HB.width=this._w,w_$HB.height=this._h,w_$jB.activeShader=null),this},w_$B.clear=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=1);var w_$n=w_$CB.mainContext;w_$n.clearColor(w_$B,w_$h,w_$l,w_$A);var w_$s=16384;switch(this._depthStencilFormat){case 33189:w_$s|=256;break;case 36168:w_$s|=1024;break;case 34041:w_$s|=256,w_$s|=1024}w_$n.clear(w_$s)},w_$B.end=function(){var w_$B=w_$CB.mainContext;w_$B.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,w_$HB.curRenderTarget=this._preRenderTarget,1==this._type?(w_$B.viewport(0,0,this._svWidth,this._svHeight),w_$HB.width=this._svWidth,w_$HB.height=this._svHeight,w_$jB.activeShader=null):w_$B.viewport(0,0,w_$u.stage.width,w_$u.stage.height)},w_$B.getData=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$CB.mainContext;if(w_$n.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===w_$n.checkFramebufferStatus(36160)))return w_$n.bindFramebuffer(36160,null),null;var w_$s=new Uint8Array(this._w*this._h*4);return w_$n.readPixels(w_$B,w_$h,w_$l,w_$A,this._surfaceFormat,this._surfaceType,w_$s),w_$n.bindFramebuffer(36160,null),w_$s},w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,w_$h.prototype.destroy.call(this))},w_$B.dispose=function(){},w_$B._createWebGLRenderTarget=function(){this.bitmap=new w_$KB(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(w_$B){this.event("recovered")})},w_$A(0,w_$B,"surfaceFormat",function(){return this._surfaceFormat}),w_$A(0,w_$B,"magFifter",function(){return this._magFifter}),w_$A(0,w_$B,"surfaceType",function(){return this._surfaceType}),w_$A(0,w_$B,"mipMap",function(){return this._mipMap}),w_$A(0,w_$B,"depthStencilFormat",function(){return this._depthStencilFormat}),w_$A(0,w_$B,"minFifter",function(){return this._minFifter}),w_$A(0,w_$B,"source",function(){return this._alreadyResolved?w_$u.superGet(w_$E,this,"source"):null}),w_$G.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){void 0===w_$l&&(w_$l=6408),void 0===w_$A&&(w_$A=5121),void 0===w_$n&&(w_$n=34041),void 0===w_$s&&(w_$s=!1),void 0===w_$X&&(w_$X=!1),void 0===w_$Z&&(w_$Z=-1),void 0===w_$t&&(w_$t=-1);var w_$P=w_$G.POOL.pop();return w_$P||(w_$P=new w_$G(w_$B,w_$h)),w_$P.bitmap&&w_$P._w==w_$B&&w_$P._h==w_$h&&w_$P._surfaceFormat==w_$l&&w_$P._surfaceType==w_$A&&w_$P._depthStencilFormat==w_$n&&w_$P._mipMap==w_$s&&w_$P._repeat==w_$X&&w_$P._minFifter==w_$Z&&w_$P._magFifter==w_$t||(w_$P._w=w_$B,w_$P._h=w_$h,w_$P._surfaceFormat=w_$l,w_$P._surfaceType=w_$A,w_$P._depthStencilFormat=w_$n,w_$J.isConchWebGL&&34041===w_$P._depthStencilFormat&&(w_$P._depthStencilFormat=33189),w_$P._mipMap=w_$s,w_$P._repeat=w_$X,w_$P._minFifter=w_$Z,w_$P._magFifter=w_$t,w_$P.release(),w_$P._createWebGLRenderTarget()),w_$P},w_$G.TYPE2D=1,w_$G.TYPE3D=2,w_$G.POOL=[],w_$G}(w_$E),w_$_B=function(w_$B){function w_$h(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,w_$h.__super.call(this),w_$h._gl=w_$CB.mainContext}w_$b(w_$h,"laya.webgl.utils.Buffer",w_$y);var w_$l=w_$h.prototype;return w_$l._bind=function(){this.activeResource(),w_$h._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(w_$h._bindVertexBuffer=this._glBuffer),w_$h._gl.bindBuffer(this._bufferType,w_$h._bindActive[this._bufferType]=this._glBuffer),w_$jB.activeShader=null)},w_$l.recreateResource=function(){this._glBuffer||(this._glBuffer=w_$h._gl.createBuffer()),this.completeCreate()},w_$l.disposeResource=function(){this._glBuffer&&(w_$CB.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},w_$A(0,w_$l,"bufferUsage",function(){return this._bufferUsage}),w_$h._gl=null,w_$h._bindActive={},w_$h._bindVertexBuffer=null,w_$h._enableAtributes=[],w_$h}(),w_$dB=function(w_$B){function w_$l(w_$B){this.texcoord=null,this.offsetX=300,this.offsetY=0,w_$l.__super.call(this,512,0);var w_$h=8*w_$$B.BYTES_PE;this.position=[2,5126,!1,w_$h,0],this.texcoord=[2,5126,!1,w_$h,2*w_$$B.BYTES_PE],this.color=[4,5126,!1,w_$h,4*w_$$B.BYTES_PE]}return w_$b(w_$l,"laya.webgl.shader.d2.skinAnishader.SkinSV",w_$UB),w_$l}(),w_$kB=function(w_$B){function w_$h(w_$B){w_$h.__super.call(this,2,0),this.color=[]}return w_$b(w_$h,"laya.webgl.shader.d2.value.Color2dSV",w_$UB),w_$h.prototype.setValue=function(w_$B){w_$B.fillStyle&&(this.color=w_$B.fillStyle._color._color),w_$B.strokeStyle&&(this.color=w_$B.strokeStyle._color._color)},w_$h}(),w_$OB=function(w_$B){function w_$h(w_$B){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=w_$UB._TEXCOORD,w_$h.__super.call(this,256,0)}w_$b(w_$h,"laya.webgl.shader.d2.value.FillTextureSV",w_$UB);var w_$l=w_$h.prototype;return w_$l.setValue=function(w_$B){this.ALPHA=w_$B.ALPHA,w_$B.filters&&this.setFilters(w_$B.filters)},w_$l.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},w_$h}(),w_$pB=function(w_$B){function w_$h(w_$B){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=w_$UB._TEXCOORD,void 0===w_$B&&(w_$B=0),w_$h.__super.call(this,1,w_$B)}w_$b(w_$h,"laya.webgl.shader.d2.value.TextureSV",w_$UB);var w_$l=w_$h.prototype;return w_$l.setValue=function(w_$B){this.ALPHA=w_$B.ALPHA,w_$B.filters&&this.setFilters(w_$B.filters)},w_$l.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},w_$h}(),w_$FB=function(w_$B){function w_$h(w_$B){this.a_color=null,this.u_pos=[0,0],w_$h.__super.call(this,4,0),this.position=[2,5126,!1,5*w_$$B.BYTES_PE,0],this.a_color=[3,5126,!1,5*w_$$B.BYTES_PE,2*w_$$B.BYTES_PE]}return w_$b(w_$h,"laya.webgl.shader.d2.value.PrimitiveSV",w_$UB),w_$h}(),w_$cB=function(w_$B){function w_$h(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,w_$h.__super.call(this)}w_$b(w_$h,"laya.webgl.atlas.AtlasWebGLCanvas",w_$B);var w_$l=w_$h.prototype;return w_$l.recreateResource=function(){var w_$B=w_$CB.mainContext,w_$h=this._source=w_$B.createTexture(),w_$l=w_$oB.curBindTexTarget,w_$A=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$B,3553,w_$h),w_$B.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),w_$B.texParameteri(3553,10241,9729),w_$B.texParameteri(3553,10240,9729),w_$B.texParameteri(3553,10242,33071),w_$B.texParameteri(3553,10243,33071),w_$l&&w_$A&&w_$oB.bindTexture(w_$B,w_$l,w_$A),this.memorySize=this._w*this._h*4,this.completeCreate()},w_$l.disposeResource=function(){this._source&&(w_$CB.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w_$l.texSubImage2D=function(w_$B,w_$h,w_$l){if(w_$J.isFlash){this._flashCacheImage||(this._flashCacheImage=w_$$.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var w_$A=w_$l.bitmapdata;this._flashCacheImage._image.copyPixels(w_$A,0,0,w_$A.width,w_$A.height,w_$B,w_$h),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var w_$n=w_$CB.mainContext,w_$s=w_$oB.curBindTexTarget,w_$X=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$n,3553,this._source),w_$n.pixelStorei(37441,!0),0<=w_$B-1&&w_$n.texSubImage2D(3553,0,w_$B-1,w_$h,6408,5121,w_$l),w_$B+1<=this._w&&w_$n.texSubImage2D(3553,0,w_$B+1,w_$h,6408,5121,w_$l),0<=w_$h-1&&w_$n.texSubImage2D(3553,0,w_$B,w_$h-1,6408,5121,w_$l),w_$h+1<=this._h&&w_$n.texSubImage2D(3553,0,w_$B,w_$h+1,6408,5121,w_$l),w_$n.texSubImage2D(3553,0,w_$B,w_$h,6408,5121,w_$l),w_$n.pixelStorei(37441,!1),w_$s&&w_$X&&w_$oB.bindTexture(w_$n,w_$s,w_$X)}},w_$l.texSubImage2DPixel=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$CB.mainContext,w_$X=w_$oB.curBindTexTarget,w_$Z=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$s,3553,this._source);var w_$t=new Uint8Array(w_$n.data);w_$s.pixelStorei(37441,!0),w_$s.texSubImage2D(3553,0,w_$B,w_$h,w_$l,w_$A,6408,5121,w_$t),w_$s.pixelStorei(37441,!1),w_$X&&w_$Z&&w_$oB.bindTexture(w_$s,w_$X,w_$Z)},w_$A(0,w_$l,"width",w_$B.prototype._$get_width,function(w_$B){this._w=w_$B}),w_$A(0,w_$l,"height",w_$B.prototype._$get_height,function(w_$B){this._h=w_$B}),w_$h}(w_$l),w_$mB=function(w_$B){function w_$n(){this.flipY=!0,this.alwaysChange=!1,w_$n.__super.call(this)}w_$b(w_$n,"laya.webgl.resource.WebGLCanvas",w_$l);var w_$h=w_$n.prototype;return w_$h.getCanvas=function(){return this._canvas},w_$h.clear=function(){this._ctx&&this._ctx.clear()},w_$h.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},w_$h._setContext=function(w_$B){this._ctx=w_$B},w_$h.getContext=function(w_$B,w_$h){return this._ctx?this._ctx:this._ctx=w_$n._createContext(this)},w_$h.size=function(w_$B,w_$h){this._w==w_$B&&this._h==w_$h||(this._w=w_$B,this._h=w_$h,this._ctx&&this._ctx.size(w_$B,w_$h),this._canvas&&(this._canvas.height=w_$h,this._canvas.width=w_$B))},w_$h.activeResource=function(w_$B){void 0===w_$B&&(w_$B=!1),this._source||this.recreateResource()},w_$h.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},w_$h.disposeResource=function(){this._source&&!this.iscpuSource&&(w_$CB.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w_$h.createWebGlTexture=function(){var w_$B=w_$CB.mainContext;this._canvas;var w_$h=this._source=w_$B.createTexture();this.iscpuSource=!1;var w_$l=w_$oB.curBindTexTarget,w_$A=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$B,3553,w_$h),w_$B.pixelStorei(37440,this.flipY?1:0),w_$n.premulAlpha&&w_$B.pixelStorei(37441,!0),w_$B.texImage2D(3553,0,6408,6408,5121,this._imgData),w_$n.premulAlpha&&w_$B.pixelStorei(37441,!1),w_$B.texParameteri(3553,10240,9729),w_$B.texParameteri(3553,10241,9729),w_$B.texParameteri(3553,10242,33071),w_$B.texParameteri(3553,10243,33071),w_$B.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,w_$l&&w_$A&&w_$oB.bindTexture(w_$B,w_$l,w_$A)},w_$h.reloadCanvasData=function(){var w_$B=w_$CB.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var w_$h=w_$oB.curBindTexTarget,w_$l=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$B,3553,this._source),w_$n.premulAlpha&&w_$B.pixelStorei(37441,!0),w_$B.texImage2D(3553,0,6408,6408,5121,this._imgData),w_$n.premulAlpha&&w_$B.pixelStorei(37441,!1),w_$B.pixelStorei(37440,0),w_$h&&w_$l&&w_$oB.bindTexture(w_$B,w_$h,w_$l)},w_$h.texSubImage2D=function(w_$B,w_$h,w_$l){var w_$A=w_$CB.mainContext,w_$n=w_$oB.curBindTexTarget,w_$s=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$A,3553,this._source),w_$A.pixelStorei(37441,!0),w_$A.texSubImage2D(3553,0,w_$h,w_$l,6408,5121,w_$B._source),w_$A.pixelStorei(37441,!1),w_$n&&w_$s&&w_$oB.bindTexture(w_$A,w_$n,w_$s)},w_$h.toBase64=function(w_$B,w_$h,w_$l){var w_$A=null;this._canvas&&(w_$A=this._canvas.toDataURL(w_$B,w_$h)),w_$l.call(this,w_$A)},w_$A(0,w_$h,"context",function(){return this._ctx}),w_$A(0,w_$h,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),w_$A(0,w_$h,"asBitmap",null,function(w_$B){this._ctx&&(this._ctx.asBitmap=w_$B)}),w_$n._createContext=null,w_$n.premulAlpha=!1,w_$n}(),w_$YB=function(w_$B){function w_$s(w_$B,w_$h){this.CborderSize=12,w_$s.__super.call(this),this.char=w_$B,this.isSpace=" "===w_$B,this.xs=w_$h.scaleX,this.ys=w_$h.scaleY,this.font=w_$h.font.toString(),this.fontSize=w_$h.font.size,this.fillColor=w_$h.fillColor,this.borderColor=w_$h.borderColor,this.lineWidth=w_$h.lineWidth,this.underLine=w_$h.underLine;var w_$l,w_$A=w_$J.isConchApp;w_$A?((w_$l=ConchTextCanvas)._source=ConchTextCanvas,w_$l._source.canvas=ConchTextCanvas):w_$l=w_$Q.canvas.source,this.canvas=w_$l,this._enableMerageInAtlas=!0,this._ctx=w_$A?w_$l:this.canvas.getContext("2d",void 0);var w_$n=w_$j.measureText(this.char,this.font);this.cw=w_$n.width*this.xs,this.ch=(w_$n.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new w_$E(this)}w_$b(w_$s,"laya.webgl.resource.WebGLCharImage",w_$l);var w_$h=w_$s.prototype;return w_$u.imps(w_$h,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),w_$h.active=function(){this.texture.active()},w_$h.recreateResource=function(){var w_$B=w_$J.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),w_$B){var w_$h=this.fontSize;1==this.xs&&1==this.ys||(w_$h=parseInt(w_$h*(this.xs>this.ys?this.xs:this.ys)+""));var w_$l="normal 100 "+this.font;w_$l=w_$l.replace(w_$s._fontSizeReg,w_$h),this.borderColor&&(w_$l+=" 1 "+this.borderColor),this._ctx.font=w_$l,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,w_$M.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var w_$A=this._ctx.measureText(this.char);w_$A||(w_$A={width:16});var w_$n=w_$A.width+1;this._ctx.lineTo(w_$n,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},w_$h.onresize=function(w_$B,w_$h){this._w=w_$B,this._h=w_$h,this._allowMerageInAtlas=!0},w_$h.clearAtlasSource=function(){},w_$A(0,w_$h,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),w_$A(0,w_$h,"atlasSource",function(){return this.canvas}),w_$A(0,w_$h,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(w_$B){this._enableMerageInAtlas=w_$B}),w_$s.createOneChar=function(w_$B,w_$h){return new w_$s(w_$B,w_$h)},w_$s._fontSizeReg=new RegExp("\\d+(?=px)","g"),w_$s}(),w_$KB=function(w_$B){function w_$P(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){void 0===w_$l&&(w_$l=6408),void 0===w_$A&&(w_$A=5121),void 0===w_$n&&(w_$n=34041),void 0===w_$s&&(w_$s=!1),void 0===w_$X&&(w_$X=!1),void 0===w_$Z&&(w_$Z=-1),void 0===w_$t&&(w_$t=1),w_$P.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=w_$B,this._h=w_$h,this._surfaceFormat=w_$l,this._surfaceType=w_$A,this._depthStencilFormat=w_$n,this._mipMap=w_$s,this._repeat=w_$X,this._minFifter=w_$Z,this._magFifter=w_$t}w_$b(w_$P,"laya.webgl.resource.WebGLRenderTarget",w_$l);var w_$h=w_$P.prototype;return w_$h.recreateResource=function(){var w_$B=w_$CB.mainContext;this._frameBuffer||(this._frameBuffer=w_$B.createFramebuffer()),this._source||(this._source=w_$B.createTexture());var w_$h=w_$oB.curBindTexTarget,w_$l=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$B,3553,this._source),w_$B.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var w_$A=this._minFifter,w_$n=this._magFifter,w_$s=this._repeat?10497:33071,w_$X=w_$G.isPOT(this._w,this._h);if(w_$X?(this._mipMap?-1!==w_$A||(w_$A=9987):-1!==w_$A||(w_$A=9729),-1!==w_$n||(w_$n=9729),w_$B.texParameteri(3553,10241,w_$A),w_$B.texParameteri(3553,10240,w_$n),w_$B.texParameteri(3553,10242,w_$s),w_$B.texParameteri(3553,10243,w_$s),this._mipMap&&w_$B.generateMipmap(3553)):(-1!==w_$A||(w_$A=9729),-1!==w_$n||(w_$n=9729),w_$B.texParameteri(3553,10241,w_$A),w_$B.texParameteri(3553,10240,w_$n),w_$B.texParameteri(3553,10242,33071),w_$B.texParameteri(3553,10243,33071)),w_$B.bindFramebuffer(36160,this._frameBuffer),w_$B.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=w_$B.createRenderbuffer()),w_$B.bindRenderbuffer(36161,this._depthStencilBuffer),w_$B.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:w_$B.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:w_$B.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:w_$B.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}w_$B.bindFramebuffer(36160,null),w_$h&&w_$l&&w_$oB.bindTexture(w_$B,w_$h,w_$l),w_$B.bindRenderbuffer(36161,null),w_$X&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},w_$h.disposeResource=function(){this._frameBuffer&&(w_$CB.mainContext.deleteTexture(this._source),w_$CB.mainContext.deleteFramebuffer(this._frameBuffer),w_$CB.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},w_$A(0,w_$h,"depthStencilBuffer",function(){return this._depthStencilBuffer}),w_$A(0,w_$h,"frameBuffer",function(){return this._frameBuffer}),w_$P}(),w_$fB=function(w_$B){function w_$Z(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this.offsetX=0,this.offsetY=0,w_$Z.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=w_$s,this.canvas=w_$B,this._ctx=w_$B.getContext("2d",void 0),this._w=w_$A,this._h=w_$n,this.offsetX=w_$h,this.offsetY=w_$l,this.src=w_$X,this._enableMerageInAtlas=!0,w_$O.enabled&&this._w<w_$O.atlasLimitWidth&&this._h<w_$O.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}w_$b(w_$Z,"laya.webgl.resource.WebGLSubImage",w_$l);var w_$h=w_$Z.prototype;return w_$u.imps(w_$h,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),w_$h.size=function(w_$B,w_$h){this._w=w_$B,this._h=w_$h,this._ctx&&this._ctx.size(w_$B,w_$h),this.canvas&&(this.canvas.height=w_$h,this.canvas.width=w_$B)},w_$h.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},w_$h.createWebGlTexture=function(){var w_$B=w_$CB.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var w_$h=this._source=w_$B.createTexture(),w_$l=w_$oB.curBindTexTarget,w_$A=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$B,3553,w_$h),w_$B.pixelStorei(37441,!0),w_$B.texImage2D(3553,0,6408,6408,5121,this.canvas),w_$B.pixelStorei(37441,!1);var w_$n=this.minFifter,w_$s=this.magFifter,w_$X=this.repeat?10497:33071,w_$Z=w_$G.isPOT(this.width,this.height);w_$Z?(this.mipmap?-1!==w_$n||(w_$n=9987):-1!==w_$n||(w_$n=9729),-1!==w_$s||(w_$s=9729),w_$B.texParameteri(3553,10240,w_$s),w_$B.texParameteri(3553,10241,w_$n),w_$B.texParameteri(3553,10242,w_$X),w_$B.texParameteri(3553,10243,w_$X),this.mipmap&&w_$B.generateMipmap(3553)):(-1!==w_$n||(w_$n=9729),-1!==w_$s||(w_$s=9729),w_$B.texParameteri(3553,10241,w_$n),w_$B.texParameteri(3553,10240,w_$s),w_$B.texParameteri(3553,10242,33071),w_$B.texParameteri(3553,10243,33071)),w_$l&&w_$A&&w_$oB.bindTexture(w_$B,w_$l,w_$A),this.canvas=null,w_$Z&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},w_$h.disposeResource=function(){w_$O.enabled&&this._allowMerageInAtlas||!this._source||(w_$CB.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w_$h.clearAtlasSource=function(){},w_$A(0,w_$h,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),w_$A(0,w_$h,"atlasSource",function(){return this.canvas}),w_$A(0,w_$h,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(w_$B){this._allowMerageInAtlas=w_$B}),w_$Z}(),w_$IB=function(w_$B){function w_$P(w_$B,w_$h,w_$l,w_$A){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,w_$P.__super.call(this),!w_$B||!w_$h)throw"Shader Error";this._id=++w_$P._count,this._vs=w_$B,this._ps=w_$h,this._nameMap=w_$A||{},null!=w_$l&&(w_$P.sharders[w_$l]=this)}w_$b(w_$P,"laya.webgl.shader.Shader",w_$jB);var w_$h=w_$P.prototype;return w_$h.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},w_$h.disposeResource=function(){w_$CB.mainContext.deleteShader(this._vshader),w_$CB.mainContext.deleteShader(this._pshader),w_$CB.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},w_$h._compile=function(){if(!w_$CB.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var w_$B=[this._vs,this._ps],w_$h=w_$CB.mainContext;if(this._program=w_$h.createProgram(),this._vshader=w_$P._createShader(w_$h,w_$B[0],35633),this._pshader=w_$P._createShader(w_$h,w_$B[1],35632),w_$h.attachShader(this._program,this._vshader),w_$h.attachShader(this._program,this._pshader),w_$h.linkProgram(this._program),!w_$J.isConchApp&&!w_$h.getProgramParameter(this._program,35714))throw w_$h.getProgramInfoLog(this._program);var w_$l,w_$A,w_$n=0,w_$s=0;for(w_$s=w_$J.isConchApp?w_$h.getProgramParameterEx(this._vs,this._ps,"",35721):w_$h.getProgramParameter(this._program,35721),w_$n=0;w_$n<w_$s;w_$n++){var w_$X=null;w_$l={vartype:"attribute",glfun:null,ivartype:0,attrib:w_$X=w_$J.isConchApp?w_$h.getActiveAttribEx(this._vs,this._ps,"",w_$n):w_$h.getActiveAttrib(this._program,w_$n),location:w_$h.getAttribLocation(this._program,w_$X.name),name:w_$X.name,type:w_$X.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(w_$l)}var w_$Z=0;for(w_$Z=w_$J.isConchApp?w_$h.getProgramParameterEx(this._vs,this._ps,"",35718):w_$h.getProgramParameter(this._program,35718),w_$n=0;w_$n<w_$Z;w_$n++){var w_$t=null;w_$t=w_$J.isConchApp?w_$h.getActiveUniformEx(this._vs,this._ps,"",w_$n):w_$h.getActiveUniform(this._program,w_$n),0<(w_$l={vartype:"uniform",glfun:null,ivartype:1,attrib:w_$X,location:w_$h.getUniformLocation(this._program,w_$t.name),name:w_$t.name,type:w_$t.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(w_$l.name=w_$l.name.substr(0,w_$l.name.length-3),w_$l.isArray=!0,w_$l.location=w_$h.getUniformLocation(this._program,w_$l.name)),this._params.push(w_$l)}for(w_$n=0,w_$A=this._params.length;w_$n<w_$A;w_$n++)if((w_$l=this._params[w_$n]).indexOfParams=w_$n,w_$l.index=1,w_$l.value=[w_$l.location,null],w_$l.codename=w_$l.name,w_$l.name=this._nameMap[w_$l.codename]?this._nameMap[w_$l.codename]:w_$l.codename,(this._paramsMap[w_$l.name]=w_$l)._this=this,w_$l.uploadedValue=[],"attribute"!==w_$l.vartype)switch(w_$l.type){case 5124:w_$l.fun=w_$l.isArray?this._uniform1iv:this._uniform1i;break;case 5126:w_$l.fun=w_$l.isArray?this._uniform1fv:this._uniform1f;break;case 35664:w_$l.fun=w_$l.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:w_$l.fun=w_$l.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:w_$l.fun=w_$l.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:w_$l.fun=this._uniform_sampler2D;break;case 35680:w_$l.fun=this._uniform_samplerCube;break;case 35676:w_$l.glfun=w_$h.uniformMatrix4fv,w_$l.fun=this._uniformMatrix4fv;break;case 35670:w_$l.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else w_$l.fun=this._attribute}},w_$h.getUniform=function(w_$B){return this._paramsMap[w_$B]},w_$h._attribute=function(w_$B,w_$h){var w_$l=w_$CB.mainContext,w_$A=w_$_B._enableAtributes,w_$n=w_$B.location;return w_$A[w_$n]||w_$l.enableVertexAttribArray(w_$n),w_$l.vertexAttribPointer(w_$n,w_$h[0],w_$h[1],w_$h[2],w_$h[3],w_$h[4]+this._offset),w_$A[w_$n]=w_$_B._bindVertexBuffer,1},w_$h._uniform1f=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h?(w_$CB.mainContext.uniform1f(w_$B.location,w_$l[0]=w_$h),1):0},w_$h._uniform1fv=function(w_$B,w_$h){if(w_$h.length<4){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$CB.mainContext.uniform1fv(w_$B.location,w_$h),w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3],1):0}return w_$CB.mainContext.uniform1fv(w_$B.location,w_$h),1},w_$h._uniform_vec2=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]?(w_$CB.mainContext.uniform2f(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1]),1):0},w_$h._uniform_vec2v=function(w_$B,w_$h){if(w_$h.length<2){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$CB.mainContext.uniform2fv(w_$B.location,w_$h),w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3],1):0}return w_$CB.mainContext.uniform2fv(w_$B.location,w_$h),1},w_$h._uniform_vec3=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]?(w_$CB.mainContext.uniform3f(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2]),1):0},w_$h._uniform_vec3v=function(w_$B,w_$h){return w_$CB.mainContext.uniform3fv(w_$B.location,w_$h),1},w_$h._uniform_vec4=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$CB.mainContext.uniform4f(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3]),1):0},w_$h._uniform_vec4v=function(w_$B,w_$h){return w_$CB.mainContext.uniform4fv(w_$B.location,w_$h),1},w_$h._uniformMatrix2fv=function(w_$B,w_$h){return w_$CB.mainContext.uniformMatrix2fv(w_$B.location,!1,w_$h),1},w_$h._uniformMatrix3fv=function(w_$B,w_$h){return w_$CB.mainContext.uniformMatrix3fv(w_$B.location,!1,w_$h),1},w_$h._uniformMatrix4fv=function(w_$B,w_$h){return w_$CB.mainContext.uniformMatrix4fv(w_$B.location,!1,w_$h),1},w_$h._uniform1i=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h?(w_$CB.mainContext.uniform1i(w_$B.location,w_$l[0]=w_$h),1):0},w_$h._uniform1iv=function(w_$B,w_$h){return w_$CB.mainContext.uniform1iv(w_$B.location,w_$h),1},w_$h._uniform_ivec2=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]?(w_$CB.mainContext.uniform2i(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1]),1):0},w_$h._uniform_ivec2v=function(w_$B,w_$h){return w_$CB.mainContext.uniform2iv(w_$B.location,w_$h),1},w_$h._uniform_vec3i=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]?(w_$CB.mainContext.uniform3i(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2]),1):0},w_$h._uniform_vec3vi=function(w_$B,w_$h){return w_$CB.mainContext.uniform3iv(w_$B.location,w_$h),1},w_$h._uniform_vec4i=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$CB.mainContext.uniform4i(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3]),1):0},w_$h._uniform_vec4vi=function(w_$B,w_$h){return w_$CB.mainContext.uniform4iv(w_$B.location,w_$h),1},w_$h._uniform_sampler2D=function(w_$B,w_$h){var w_$l=w_$CB.mainContext,w_$A=w_$B.uploadedValue;return null==w_$A[0]?(w_$A[0]=this._curActTexIndex,w_$l.uniform1i(w_$B.location,this._curActTexIndex),w_$l.activeTexture(w_$P._TEXTURES[this._curActTexIndex]),w_$oB.bindTexture(w_$l,3553,w_$h),this._curActTexIndex++,1):(w_$l.activeTexture(w_$P._TEXTURES[w_$A[0]]),w_$oB.bindTexture(w_$l,3553,w_$h),0)},w_$h._uniform_samplerCube=function(w_$B,w_$h){var w_$l=w_$CB.mainContext,w_$A=w_$B.uploadedValue;return null==w_$A[0]?(w_$A[0]=this._curActTexIndex,w_$l.uniform1i(w_$B.location,this._curActTexIndex),w_$l.activeTexture(w_$P._TEXTURES[this._curActTexIndex]),w_$oB.bindTexture(w_$l,34067,w_$h),this._curActTexIndex++,1):(w_$l.activeTexture(w_$P._TEXTURES[w_$A[0]]),w_$oB.bindTexture(w_$l,34067,w_$h),0)},w_$h._noSetValue=function(w_$B){console.log("no....:"+w_$B.name)},w_$h.uploadOne=function(w_$B,w_$h){this.activeResource(),w_$oB.UseProgram(this._program);var w_$l=this._paramsMap[w_$B];w_$l.fun.call(this,w_$l,w_$h)},w_$h.uploadTexture2D=function(w_$B){w_$N.shaderCall++;var w_$h=w_$CB.mainContext;w_$h.activeTexture(33984),w_$oB.bindTexture(w_$h,3553,w_$B)},w_$h.uploadTexture2D1=function(w_$B){w_$N.shaderCall++;var w_$h=w_$CB.mainContext;w_$h.activeTexture(33985),w_$oB.bindTexture(w_$h,3553,w_$B)},w_$h.upload=function(w_$B,w_$h){w_$jB.activeShader=w_$jB.bindShader=this,this._lastUseFrameCount===w_$N.loopCount||this.activeResource(),w_$oB.UseProgram(this._program),this._reCompile?(w_$h=this._params,this._reCompile=!1):w_$h=w_$h||this._params;w_$CB.mainContext;for(var w_$l,w_$A,w_$n=w_$h.length,w_$s=0,w_$X=0;w_$X<w_$n;w_$X++)null!==(w_$A=w_$B[(w_$l=w_$h[w_$X]).name])&&(w_$s+=w_$l.fun.call(this,w_$l,w_$A));w_$N.shaderCall+=w_$s},w_$h.uploadArray=function(w_$B,w_$h,w_$l){w_$jB.activeShader=this,(w_$jB.bindShader=this).activeResource(),w_$oB.UseProgram(this._program);this._params;for(var w_$A,w_$n,w_$s=0,w_$X=w_$h-2;0<=w_$X;w_$X-=2)(w_$n=this._paramsMap[w_$B[w_$X]])&&null!=(w_$A=w_$B[w_$X+1])&&(w_$l&&w_$l[w_$n.name]&&w_$l[w_$n.name].bind(),w_$s+=w_$n.fun.call(this,w_$n,w_$A));w_$N.shaderCall+=w_$s},w_$h.getParams=function(){return this._params},w_$P.getShader=function(w_$B){return w_$P.sharders[w_$B]},w_$P.create=function(w_$B,w_$h,w_$l,w_$A){return new w_$P(w_$B,w_$h,w_$l,w_$A)},w_$P.withCompile=function(w_$B,w_$h,w_$l,w_$A){if(w_$l&&w_$P.sharders[w_$l])return w_$P.sharders[w_$l];var w_$n=w_$P._preCompileShader[2e-4*w_$B];if(!w_$n)throw new Error("withCompile shader err!"+w_$B);return w_$n.createShader(w_$h,w_$l,w_$A)},w_$P.withCompile2D=function(w_$B,w_$h,w_$l,w_$A,w_$n){if(w_$A&&w_$P.sharders[w_$A])return w_$P.sharders[w_$A];var w_$s=w_$P._preCompileShader[2e-4*w_$B+w_$h];if(!w_$s)throw new Error("withCompile shader err!"+w_$B+" "+w_$h);return w_$s.createShader(w_$l,w_$A,w_$n)},w_$P.addInclude=function(w_$B,w_$h){w_$yB.addInclude(w_$B,w_$h)},w_$P.preCompile=function(w_$B,w_$h,w_$l,w_$A){var w_$n=2e-4*w_$B;w_$P._preCompileShader[w_$n]=new w_$yB(w_$n,w_$h,w_$l,w_$A)},w_$P.preCompile2D=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=2e-4*w_$B+w_$h;w_$P._preCompileShader[w_$s]=new w_$yB(w_$s,w_$l,w_$A,w_$n)},w_$P._createShader=function(w_$B,w_$h,w_$l){var w_$A=w_$B.createShader(w_$l);return w_$B.shaderSource(w_$A,w_$h),w_$B.compileShader(w_$A),w_$A},w_$P._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],w_$P._count=0,w_$P._preCompileShader={},w_$P.SHADERNAME2ID=2e-4,w_$P.sharders=((w_$P.sharders=[]).length=32,w_$P.sharders),w_$X(w_$P,["nameKey",function(){return this.nameKey=new w_$R}]),w_$P}(),w_$LB=function(w_$B){function w_$h(){this._maxsize=0,this._upload=!0,this._uploadSize=0,w_$h.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}w_$b(w_$h,"laya.webgl.utils.Buffer2D",w_$B);var w_$l=w_$h.prototype;return w_$l.needSize=function(w_$B){var w_$h=this._byteLength;if(w_$B){var w_$l=this._byteLength+w_$B;w_$l<=this._buffer.byteLength||this._resizeBuffer(w_$l<<1,!0),this._byteLength=w_$l}return w_$h},w_$l._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),w_$N.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,w_$_B._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),w_$_B._gl.bufferSubData(this._bufferType,0,this._buffer)},w_$l._bufferSubData=function(w_$B,w_$h,w_$l){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),this._maxsize=Math.max(this._maxsize,this._byteLength),w_$N.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,w_$_B._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),w_$h||w_$l){var w_$A=this._buffer.slice(w_$h,w_$l);w_$_B._gl.bufferSubData(this._bufferType,w_$B,w_$A)}else w_$_B._gl.bufferSubData(this._bufferType,w_$B,this._buffer)},w_$l._checkArrayUse=function(){},w_$l._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},w_$l._bind_subUpload=function(w_$B,w_$h,w_$l){return void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(w_$B,w_$h,w_$l),!0)},w_$l._resizeBuffer=function(w_$B,w_$h){if(w_$B<this._buffer.byteLength)return this;if(this.memorySize=w_$B,w_$h&&this._buffer&&0<this._buffer.byteLength){var w_$l=new ArrayBuffer(w_$B);new Uint8Array(w_$l).set(new Uint8Array(this._buffer),0),this._buffer=w_$l}else this._buffer=new ArrayBuffer(w_$B);return this._checkArrayUse(),this._upload=!0,this},w_$l.append=function(w_$B){this._upload=!0;var w_$h,w_$l;w_$h=w_$B.byteLength,w_$B instanceof Uint8Array?(this._resizeBuffer(this._byteLength+w_$h,!0),w_$l=new Uint8Array(this._buffer,this._byteLength)):w_$B instanceof Uint16Array?(this._resizeBuffer(this._byteLength+w_$h,!0),w_$l=new Uint16Array(this._buffer,this._byteLength)):w_$B instanceof Float32Array&&(this._resizeBuffer(this._byteLength+w_$h,!0),w_$l=new Float32Array(this._buffer,this._byteLength)),w_$l.set(w_$B,0),this._byteLength+=w_$h,this._checkArrayUse()},w_$l.appendU16Array=function(w_$B,w_$h){this._resizeBuffer(this._byteLength+2*w_$h,!0);for(var w_$l=new Uint16Array(this._buffer,this._byteLength,w_$h),w_$A=0;w_$A<w_$h;w_$A++)w_$l[w_$A]=w_$B[w_$A];this._byteLength+=2*w_$h,this._checkArrayUse()},w_$l.appendEx=function(w_$B,w_$h){this._upload=!0;var w_$l;w_$l=w_$B.byteLength,this._resizeBuffer(this._byteLength+w_$l,!0),new w_$h(this._buffer,this._byteLength).set(w_$B,0),this._byteLength+=w_$l,this._checkArrayUse()},w_$l.appendEx2=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$A&&(w_$A=1),this._upload=!0;var w_$n,w_$s;w_$n=w_$l*w_$A,this._resizeBuffer(this._byteLength+w_$n,!0),w_$s=new w_$h(this._buffer,this._byteLength);var w_$X=0;for(w_$X=0;w_$X<w_$l;w_$X++)w_$s[w_$X]=w_$B[w_$X];this._byteLength+=w_$n,this._checkArrayUse()},w_$l.getBuffer=function(){return this._buffer},w_$l.setNeedUpload=function(){this._upload=!0},w_$l.getNeedUpload=function(){return this._upload},w_$l.upload=function(){var w_$B=this._bind_upload();return w_$_B._gl.bindBuffer(this._bufferType,null),w_$_B._bindActive[this._bufferType]=null,w_$jB.activeShader=null,w_$B},w_$l.subUpload=function(w_$B,w_$h,w_$l){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0);var w_$A=this._bind_subUpload();return w_$_B._gl.bindBuffer(this._bufferType,null),w_$_B._bindActive[this._bufferType]=null,w_$jB.activeShader=null,w_$A},w_$l.disposeResource=function(){w_$B.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},w_$l.clear=function(){this._byteLength=0,this._upload=!0},w_$A(0,w_$l,"bufferLength",function(){return this._buffer.byteLength}),w_$A(0,w_$l,"byteLength",null,function(w_$B){this._byteLength!==w_$B&&(w_$B<=this._buffer.byteLength||this._resizeBuffer(2*w_$B+256,!0),this._byteLength=w_$B)}),w_$h.__int__=function(w_$B){w_$DB.QuadrangleIB=w_$DB.create(35044),w_$VB.fillIBQuadrangle(w_$DB.QuadrangleIB,16)},w_$h.FLOAT32=4,w_$h.SHORT=2,w_$h}(w_$_B),w_$eB=(function(w_$h){function w_$l(w_$B){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,w_$l.__super.call(this,9)}w_$b(w_$l,"laya.webgl.shader.d2.value.GlowSV",w_$h);var w_$B=w_$l.prototype;w_$B.setValue=function(w_$B){w_$h.prototype.setValue.call(this,w_$B)},w_$B.clear=function(){w_$h.prototype.clear.call(this)}}(w_$pB),function(w_$B){function w_$h(w_$B){w_$h.__super.call(this,64),this.defines.add(64)}w_$b(w_$h,"laya.webgl.shader.d2.value.TextSV",w_$B);var w_$l=w_$h.prototype;return w_$l.release=function(){(w_$h.pool[w_$h._length++]=this).clear()},w_$l.clear=function(){w_$B.prototype.clear.call(this)},w_$h.create=function(){return w_$h._length?w_$h.pool[--w_$h._length]:new w_$h(null)},w_$h.pool=[],w_$h._length=0,w_$h}(w_$pB)),w_$qB=function(w_$B){function w_$n(w_$B,w_$h,w_$l,w_$A){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,w_$n.__super.call(this,w_$B,w_$h,w_$l,w_$A)}w_$b(w_$n,"laya.webgl.shader.d2.Shader2X",w_$B);var w_$h=w_$n.prototype;return w_$h.upload2dQuick1=function(w_$B){this.upload(w_$B,this._params2dQuick1||this._make2dQuick1())},w_$h._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var w_$B,w_$h=this._params,w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++)w_$B=w_$h[w_$l],(w_$J.isFlash||"size"!==w_$B.name&&"position"!==w_$B.name&&"texcoord"!==w_$B.name)&&this._params2dQuick1.push(w_$B)}return this._params2dQuick1},w_$h.disposeResource=function(){w_$B.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},w_$h.upload2dQuick2=function(w_$B){this.upload(w_$B,this._params2dQuick2||this._make2dQuick2())},w_$h._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var w_$B,w_$h=this._params,w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++)w_$B=w_$h[w_$l],(w_$J.isFlash||"size"!==w_$B.name)&&this._params2dQuick2.push(w_$B)}return this._params2dQuick2},w_$n.create=function(w_$B,w_$h,w_$l,w_$A){return new w_$n(w_$B,w_$h,w_$l,w_$A)},w_$n}(w_$IB),w_$DB=function(w_$B){function w_$h(w_$B){this._uint8Array=null,this._uint16Array=null,void 0===w_$B&&(w_$B=35044),w_$h.__super.call(this),this._bufferUsage=w_$B,this._bufferType=34963,w_$J.isFlash||(this._buffer=new ArrayBuffer(8))}w_$b(w_$h,"laya.webgl.utils.IndexBuffer2D",w_$LB);var w_$l=w_$h.prototype;return w_$l._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},w_$l.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},w_$l.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},w_$l.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},w_$h.QuadrangleIB=null,w_$h.create=function(w_$B){return void 0===w_$B&&(w_$B=35044),new w_$h(w_$B)},w_$h}(),w_$rB=function(w_$B){function w_$l(w_$B,w_$h){this._floatArray32=null,this._vertexStride=0,w_$l.__super.call(this),this._vertexStride=w_$B,this._bufferUsage=w_$h,this._bufferType=34962,w_$J.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}w_$b(w_$l,"laya.webgl.utils.VertexBuffer2D",w_$B);var w_$h=w_$l.prototype;return w_$h.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},w_$h.bind=function(w_$B){w_$B&&w_$B._bind(),this._bind()},w_$h.insertData=function(w_$B,w_$h){this.getFloat32Array().set(w_$B,w_$h),this._upload=!0},w_$h.bind_upload=function(w_$B){w_$B._bind_upload()||w_$B._bind(),this._bind_upload()||this._bind()},w_$h._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},w_$h.disposeResource=function(){w_$B.prototype.disposeResource.call(this)},w_$h.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},w_$A(0,w_$h,"vertexStride",function(){return this._vertexStride}),w_$l.create=function(w_$B,w_$h){return void 0===w_$h&&(w_$h=35048),new w_$l(w_$B,w_$h)},w_$l}(w_$LB),w_$Bh=function(w_$B){function w_$Z(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===w_$l&&(w_$l=6408),void 0===w_$A&&(w_$A=!0),w_$Z.__super.call(this,w_$B,w_$h),w_$B){if(this._format=w_$l,this._mipmap=w_$A,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof w_$B)this._url=w_$B,this._src=w_$B,this._image=new w_$Q.window.Image,w_$h&&(w_$h.onload&&(this.onload=w_$h.onload),w_$h.onerror&&(this.onerror=w_$h.onerror),w_$h.onCreate&&w_$h.onCreate(this)),this._image.crossOrigin=w_$B&&0==w_$B.indexOf("data:")?null:"",w_$B&&(this._image.src=w_$B);else if(w_$B instanceof ArrayBuffer){this._src=w_$h,this._url=this._src;var w_$X=new w_$t(w_$B);w_$X.readUTFBytes(4),w_$X.readUTFBytes(2),w_$X.getInt16();w_$X.endian="bigEndian",this._w=w_$X.getInt16(),this._h=w_$X.getInt16();w_$X.getInt16(),w_$X.getInt16();this._image=new Uint8Array(w_$B,w_$X.pos),this._format=w_$CB.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,w_$O.enabled&&this._w<w_$O.atlasLimitWidth&&this._h<w_$O.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(w_$B instanceof Uint8Array))return this._src=w_$h,this._url=this._src,this._image=w_$B.source||w_$B,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=w_$h,this._url=this._src,this._w=w_$n,this._h=w_$s,this._image=w_$B,this._format=0===w_$l?w_$B.byteLength/(w_$n*w_$s)==4?6408:6407:w_$l}this._$5__enableMerageInAtlas=!0}}w_$b(w_$Z,"laya.webgl.resource.WebGLImage",w_$$);var w_$h=w_$Z.prototype;return w_$u.imps(w_$h,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),w_$h._init_=function(w_$B,w_$h){},w_$h._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var w_$B=w_$CB.mainContext,w_$h=this._source=w_$B.createTexture(),w_$l=w_$oB.curBindTexTarget,w_$A=w_$oB.curBindTexValue;w_$oB.bindTexture(w_$B,3553,w_$h);var w_$n=this.minFifter,w_$s=this.magFifter,w_$X=this.repeat?10497:33071,w_$Z=w_$G.isPOT(this._w,this._h),w_$t=!1;switch(w_$Z?(this.mipmap?-1!==w_$n||(w_$n=9987):-1!==w_$n||(w_$n=9729),-1!==w_$s||(w_$s=9729),w_$B.texParameteri(3553,10241,w_$n),w_$B.texParameteri(3553,10240,w_$s),w_$B.texParameteri(3553,10242,w_$X),w_$B.texParameteri(3553,10243,w_$X),this.mipmap&&w_$B.generateMipmap(3553)):(-1!==w_$n||(w_$n=9729),-1!==w_$s||(w_$s=9729),w_$B.texParameteri(3553,10241,w_$n),w_$B.texParameteri(3553,10240,w_$s),w_$B.texParameteri(3553,10242,33071),w_$B.texParameteri(3553,10243,33071)),w_$B.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&w_$B.pixelStorei(w_$B.UNPACK_ALIGNMENT,1),w_$B.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&w_$B.pixelStorei(w_$B.UNPACK_ALIGNMENT,1),w_$B.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:w_$t=!0,w_$B.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case w_$CB.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:w_$t=!0,w_$B.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}w_$B.pixelStorei(37441,!1),w_$l&&w_$A&&w_$oB.bindTexture(w_$B,w_$l,w_$A),this.uri||(this.uri=this._url),w_$t?this.memorySize=this._image.length:w_$Z&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},w_$h.recreateResource=function(){var w_$B=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var w_$h=this;this._image=new w_$Q.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(w_$h._needReleaseAgain)return w_$h._needReleaseAgain=!1,w_$h._image.onload=null,void(w_$h._image=null);w_$h._allowMerageInAtlas&&w_$h._enableMerageInAtlas?(w_$B.memorySize=0,w_$B._recreateLock=!1):w_$h._createWebGlTexture(),w_$h.completeCreate()},this._image.src=this._src}},w_$h.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&w_$CB.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},w_$h.onresize=function(){this._w=this._image.width,this._h=this._image.height,w_$O.enabled&&this._w<w_$O.atlasLimitWidth&&this._h<w_$O.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},w_$h.clearAtlasSource=function(){this._image=null},w_$A(0,w_$h,"format",function(){return this._format}),w_$A(0,w_$h,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(w_$B){this._$5__enableMerageInAtlas=w_$B}),w_$A(0,w_$h,"mipmap",function(){return this._mipmap}),w_$A(0,w_$h,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),w_$A(0,w_$h,"atlasSource",function(){return this._image}),w_$A(0,w_$h,"onload",null,function(w_$B){var w_$h=this;this._onload=w_$B,this._image&&(this._image.onload=null!=this._onload?function(){w_$h.onresize(),w_$h._onload()}:null)}),w_$A(0,w_$h,"onerror",null,function(w_$B){var w_$h=this;this._onerror=w_$B,this._image&&(this._image.onerror=null!=this._onerror?function(){w_$h._onerror()}:null)}),w_$Z}();w_$u.__init([w_$QB,w_$k,w_$vB,w_$yB])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w_$B,w_$h){"use strict";for(var w_$l in Object.defineProperty(w_$h,"__esModule",{value:!0}),Laya){var w_$A=Laya[w_$l];w_$A&&w_$A.__isclass&&(w_$h[w_$l]=w_$A)}}),function(w_$s,w_$B,w_$A){w_$A.un,w_$A.uns;var w_$n=w_$A.static,w_$X=w_$A.class,w_$Z=w_$A.getset,w_$t=(w_$A.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),w_$i=laya.utils.ClassUtils,w_$T=(laya.events.Event,laya.utils.HTMLChar),w_$P=laya.net.Loader,w_$G=(laya.display.Node,laya.maths.Rectangle),w_$b=laya.renders.Render,w_$Q=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),w_$$=laya.utils.Stat,w_$j=laya.display.Text,w_$V=laya.resource.Texture,w_$J=laya.net.URL,w_$H=laya.utils.Utils,w_$y=function(){function w_$Q(){}return w_$X(w_$Q,"laya.html.utils.HTMLParse"),w_$Q.parse=function(w_$B,w_$h,w_$l){w_$h=(w_$h="<root>"+(w_$h=w_$h.replace(/<br>/g,"<br/>"))+"</root>").replace(w_$Q.spacePattern,w_$Q.char255);var w_$A=w_$H.parseXMLFromString(w_$h);w_$Q._parseXML(w_$B,w_$A.childNodes[0].childNodes,w_$l)},w_$Q._parseXML=function(w_$B,w_$h,w_$l,w_$A){var w_$n=0,w_$s=0;if(w_$h.join||w_$h.item)for(w_$n=0,w_$s=w_$h.length;w_$n<w_$s;++w_$n)w_$Q._parseXML(w_$B,w_$h[w_$n],w_$l,w_$A);else{var w_$X,w_$Z,w_$t;if(3==w_$h.nodeType)return void(w_$B instanceof laya.html.dom.HTMLDivElement?(null==w_$h.nodeName&&(w_$h.nodeName="#text"),w_$Z=w_$h.nodeName.toLowerCase(),0<(w_$t=w_$h.textContent.replace(/^\s+|\s+$/g,"")).length&&(w_$X=w_$i.getInstance(w_$Z))&&(w_$B.addChild(w_$X),w_$X.innerTEXT=w_$t.replace(w_$Q.char255AndOneSpacePattern," "))):0<(w_$t=w_$h.textContent.replace(/^\s+|\s+$/g,"")).length&&(w_$B.innerTEXT=w_$t.replace(w_$Q.char255AndOneSpacePattern," ")));if("#comment"==(w_$Z=w_$h.nodeName.toLowerCase()))return;if(w_$X=w_$i.getInstance(w_$Z)){(w_$X=w_$B.addChild(w_$X)).URI=w_$l,w_$X.href=w_$A;var w_$P=w_$h.attributes;if(w_$P&&0<w_$P.length)for(w_$n=0,w_$s=w_$P.length;w_$n<w_$s;++w_$n){var w_$G=w_$P[w_$n],w_$T=w_$G.nodeName,w_$b=w_$G.value;w_$X._setAttributes(w_$T,w_$b)}w_$Q._parseXML(w_$X,w_$h.childNodes,w_$l,w_$X.href)}else w_$Q._parseXML(w_$B,w_$h.childNodes,w_$l,w_$A)}},w_$Q.char255=String.fromCharCode(255),w_$Q.spacePattern=/&nbsp;|&#160;/g,w_$Q.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),w_$Q}(),w_$C=function(){function w_$E(){}return w_$X(w_$E,"laya.html.utils.Layout"),w_$E.later=function(w_$B){null==w_$E._will&&(w_$E._will=[],w_$A.stage.frameLoop(1,null,function(){if(!(w_$E._will.length<1)){for(var w_$B=0;w_$B<w_$E._will.length;w_$B++)laya.html.utils.Layout.layout(w_$E._will[w_$B]);w_$E._will.length=0}})),w_$E._will.push(w_$B)},w_$E.layout=function(w_$B){if(!w_$B||!w_$B._style)return null;if(0==(512&w_$B._style._type))return null;w_$B.getStyle()._type&=-513;var w_$h=w_$E._multiLineLayout(w_$B);return w_$b.isConchApp&&w_$B.layaoutCallNative&&w_$B.layaoutCallNative(),w_$h},w_$E._multiLineLayout=function(w_$B){if(w_$j.RightToLeft)return w_$E._multiLineLayout2(w_$B);var w_$h=new Array;w_$B._addChildsToLayout(w_$h);var w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z=0,w_$t=w_$h.length,w_$P=w_$B._getCSSStyle(),w_$G=w_$P.letterSpacing,w_$T=w_$P.leading,w_$b=w_$P.lineHeight,w_$Q=w_$P._widthAuto()||!w_$P.wordWrap,w_$i=w_$Q?999999:w_$B.width,w_$$=(w_$B.height,0),w_$V=w_$P.italic?w_$P.fontSize/3:0,w_$J=w_$P._getAlign(),w_$H=w_$P._getValign(),w_$y=0!==w_$H||0!==w_$J||0!=w_$b,w_$C=0,w_$o=0,w_$u=0,w_$v=0,w_$U=new Array,w_$x=w_$U[0]=new w_$g,w_$w=!1,w_$z=!1;w_$x.h=0,w_$P.italic&&(w_$i-=w_$P.fontSize/3);var w_$a=0,w_$S=!0;function w_$N(){w_$x.y=w_$o,w_$o+=w_$x.h+w_$T,0==w_$x.h&&(w_$o+=w_$b),w_$x.mWidth=w_$a,w_$a=0,w_$x=new w_$g,w_$U.push(w_$x),w_$x.h=0,w_$w=!(w_$S=!(w_$C=0))}for(w_$Z=0;w_$Z<w_$t;w_$Z++)if(null!=(w_$l=w_$h[w_$Z]))if(w_$S=!1,w_$l instanceof laya.html.dom.HTMLBrElement)w_$N(),w_$x.y=w_$o;else{if(w_$l._isChar()){if((w_$s=w_$l).isWord)w_$w=w_$z||"\n"===w_$s.char,w_$x.wordStartIndex=w_$x.elements.length;else{if(w_$u=w_$s.width+w_$s.style.letterSpacin,0<w_$U.length&&w_$i<w_$C+w_$u&&0<w_$x.wordStartIndex){var w_$R;w_$R=w_$x.elements.length-w_$x.wordStartIndex+1,w_$x.elements.length=w_$x.wordStartIndex,w_$Z-=w_$R,w_$N();continue}w_$w=!1,w_$a+=w_$s.width}w_$u=w_$s.width+w_$G,w_$v=w_$s.height,w_$z=!1,(w_$w=w_$w||w_$i<w_$C+w_$u)&&w_$N(),w_$x.minTextHeight=Math.min(w_$x.minTextHeight,w_$l.height)}else w_$A=w_$l._getCSSStyle(),w_$X=w_$l,w_$n=w_$A.padding,0===w_$A._getCssFloat()||(w_$y=!0),w_$w=w_$z||w_$A.lineElement,w_$u=w_$X.width*w_$X._style._tf.scaleX+w_$n[1]+w_$n[3]+w_$G,w_$v=w_$X.height*w_$X._style._tf.scaleY+w_$n[0]+w_$n[2],w_$z=w_$A.lineElement,(w_$w=w_$w||w_$i<w_$C+w_$u&&w_$A.wordWrap)&&w_$N();w_$x.elements.push(w_$l),w_$x.h=Math.max(w_$x.h,w_$v),w_$l.x=w_$C,w_$l.y=w_$o,w_$C+=w_$u,w_$x.w=w_$C-w_$G,w_$x.y=w_$o,w_$$=Math.max(w_$C+w_$V,w_$$)}else w_$S||(w_$C+=w_$E.DIV_ELEMENT_PADDING),w_$x.wordStartIndex=w_$x.elements.length;if(w_$o=w_$x.y+w_$x.h,w_$y){var w_$W=0,w_$M=w_$i;for(w_$Q&&0<w_$B.width&&(w_$M=w_$B.width),w_$Z=0,w_$t=w_$U.length;w_$Z<w_$t;w_$Z++)w_$U[w_$Z].updatePos(0,w_$M,w_$Z,w_$W,w_$J,w_$H,w_$b),w_$W+=Math.max(w_$b,w_$U[w_$Z].h+w_$T);w_$o=w_$W}return w_$Q&&(w_$B.width=w_$$),w_$o>w_$B.height&&(w_$B.height=w_$o),[w_$$,w_$o]},w_$E._multiLineLayout2=function(w_$B){var w_$h=new Array;w_$B._addChildsToLayout(w_$h);var w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z=0,w_$t=w_$h.length,w_$P=w_$B._getCSSStyle(),w_$G=w_$P.letterSpacing,w_$T=w_$P.leading,w_$b=w_$P.lineHeight,w_$Q=w_$P._widthAuto()||!w_$P.wordWrap,w_$i=w_$Q?999999:w_$B.width,w_$$=(w_$B.height,0),w_$V=w_$P.italic?w_$P.fontSize/3:0,w_$J=2-w_$P._getAlign(),w_$H=w_$P._getValign(),w_$y=0!==w_$H||0!=w_$J||0!=w_$b,w_$C=0,w_$o=0,w_$u=0,w_$v=0,w_$U=new Array,w_$x=w_$U[0]=new w_$g,w_$w=!1,w_$z=!1;w_$x.h=0,w_$P.italic&&(w_$i-=w_$P.fontSize/3);var w_$a=0,w_$S=!0;function w_$N(){w_$x.y=w_$o,w_$o+=w_$x.h+w_$T,0==w_$x.h&&(w_$o+=w_$b),w_$x.mWidth=w_$a,w_$a=0,w_$x=new w_$g,w_$U.push(w_$x),w_$x.h=0,w_$w=!(w_$S=!(w_$C=0))}for(w_$Z=0;w_$Z<w_$t;w_$Z++)if(null!=(w_$l=w_$h[w_$Z]))if(w_$S=!1,w_$l instanceof laya.html.dom.HTMLBrElement)w_$N(),w_$x.y=w_$o;else{if(w_$l._isChar()){if((w_$s=w_$l).isWord)w_$w=w_$z||"\n"===w_$s.char,w_$x.wordStartIndex=w_$x.elements.length;else{if(0<w_$U.length&&w_$i<w_$C+w_$u&&0<w_$x.wordStartIndex){var w_$R;w_$R=w_$x.elements.length-w_$x.wordStartIndex+1,w_$x.elements.length=w_$x.wordStartIndex,w_$Z-=w_$R,w_$N();continue}w_$w=!1,w_$a+=w_$s.width}w_$u=w_$s.width+w_$G,w_$v=w_$s.height,w_$z=!1,(w_$w=w_$w||w_$i<w_$C+w_$u)&&w_$N(),w_$x.minTextHeight=Math.min(w_$x.minTextHeight,w_$l.height)}else w_$A=w_$l._getCSSStyle(),w_$X=w_$l,w_$n=w_$A.padding,0===w_$A._getCssFloat()||(w_$y=!0),w_$w=w_$z||w_$A.lineElement,w_$u=w_$X.width*w_$X._style._tf.scaleX+w_$n[1]+w_$n[3]+w_$G,w_$v=w_$X.height*w_$X._style._tf.scaleY+w_$n[0]+w_$n[2],w_$z=w_$A.lineElement,(w_$w=w_$w||w_$i<w_$C+w_$u&&w_$A.wordWrap)&&w_$N();w_$x.elements.push(w_$l),w_$x.h=Math.max(w_$x.h,w_$v),w_$l.x=w_$C,w_$l.y=w_$o,w_$C+=w_$u,w_$x.w=w_$C-w_$G,w_$x.y=w_$o,w_$$=Math.max(w_$C+w_$V,w_$$)}else w_$S||(w_$C+=w_$E.DIV_ELEMENT_PADDING),w_$x.wordStartIndex=w_$x.elements.length;if(w_$o=w_$x.y+w_$x.h,w_$y){var w_$W=0,w_$M=w_$i;for(w_$Z=0,w_$t=w_$U.length;w_$Z<w_$t;w_$Z++)w_$U[w_$Z].updatePos(0,w_$M,w_$Z,w_$W,w_$J,w_$H,w_$b),w_$W+=Math.max(w_$b,w_$U[w_$Z].h+w_$T);w_$o=w_$W}for(w_$Q&&(w_$B.width=w_$$),w_$o>w_$B.height&&(w_$B.height=w_$o),w_$Z=0,w_$t=w_$U.length;w_$Z<w_$t;w_$Z++)w_$U[w_$Z].revertOrder(w_$i);return[w_$$,w_$o]},w_$E._will=null,w_$E.DIV_ELEMENT_PADDING=0,w_$E}(),w_$g=function(){function w_$B(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}w_$X(w_$B,"laya.html.utils.LayoutLine");var w_$h=w_$B.prototype;return w_$h.updatePos=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){var w_$Z,w_$t=0;0<this.elements.length&&(w_$t=(w_$Z=this.elements[this.elements.length-1]).x+w_$Z.width-this.elements[0].x);var w_$P=0,w_$G=NaN;1===w_$n&&(w_$P=(w_$h-w_$t)/2),2===w_$n&&(w_$P=w_$h-w_$t),0===w_$X||0!=w_$s||(w_$s=1);for(var w_$T=0,w_$b=this.elements.length;w_$T<w_$b;w_$T++){var w_$Q=(w_$Z=this.elements[w_$T])._getCSSStyle();switch(0!==w_$P&&(w_$Z.x+=w_$P),w_$Q._getValign()){case 0:w_$Z.y=w_$A;break;case 1:var w_$i=0;99999!=this.minTextHeight&&(w_$i=this.minTextHeight);var w_$$=(w_$i+w_$X)/2;w_$$=Math.max(w_$$,this.h),w_$G=(laya.html.dom.HTMLImageElement,w_$A+w_$$-w_$Z.height),w_$Z.y=w_$G;break;case 2:w_$Z.y=w_$A+(w_$X-w_$Z.height)}}},w_$h.revertOrder=function(w_$B){var w_$h;if(0<this.elements.length){var w_$l,w_$A=0;for(w_$l=this.elements.length,w_$A=0;w_$A<w_$l;w_$A++)(w_$h=this.elements[w_$A]).x=w_$B-w_$h.x-w_$h.width}},w_$B}(),w_$o=function(w_$l){function w_$h(){this.URI=null,this._href=null,w_$h.__super.call(this),this._text=w_$h._EMPTYTEXT,this.setStyle(new w_$t(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}w_$X(w_$h,"laya.html.dom.HTMLElement",w_$l);var w_$B=w_$h.prototype;return w_$B.layaoutCallNative=function(){var w_$B=0;if(this._childs&&0<(w_$B=this._childs.length))for(var w_$h=0;w_$h<w_$B;w_$h++)this._childs[w_$h].layaoutCallNative&&this._childs[w_$h].layaoutCallNative();var w_$l=this._getWords();w_$l?laya.html.dom.HTMLElement.fillWords(this,w_$l,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},w_$B.appendChild=function(w_$B){return this.addChild(w_$B)},w_$B._getWords2=function(){var w_$B=this._text.text;if(!w_$B||0===w_$B.length)return null;var w_$h,w_$l,w_$A=0,w_$n=0;if(this._text.drawWords)w_$l=this._text.drawWords;else{for(w_$n=(w_$h=w_$B.split(" ")).length-1,w_$l=[],w_$A=0;w_$A<w_$n;w_$A++)w_$l.push(w_$h[w_$A]," ");0<=w_$n&&w_$l.push(w_$h[w_$n]),this._text.drawWords=w_$l}var w_$s,w_$X=this._text.words;if(w_$X&&w_$X.length===w_$l.length)return w_$X;null===w_$X&&(this._text.words=w_$X=[]),w_$X.length=w_$l.length;var w_$Z=this.style,w_$t=w_$Z.font;for(w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$A++){w_$s=w_$H.measureText(w_$l[w_$A],w_$t);var w_$P=w_$X[w_$A]=new w_$T(w_$l[w_$A],w_$s.width,w_$s.height||w_$Z.fontSize,w_$Z);if(1<w_$P.char.length&&(w_$P.charNum=w_$P.char),this.href){var w_$G=new w_$Q;this.addChild(w_$G),w_$P.setSprite(w_$G)}}return w_$X},w_$B._getWords=function(){if(!w_$j.CharacterCache)return this._getWords2();var w_$B=this._text.text;if(!w_$B||0===w_$B.length)return null;var w_$h,w_$l=this._text.words;if(w_$l&&w_$l.length===w_$B.length)return w_$l;null===w_$l&&(this._text.words=w_$l=[]),w_$l.length=w_$B.length;for(var w_$A=this.style,w_$n=w_$A.font,w_$s=0,w_$X=w_$B.length;w_$s<w_$X;w_$s++)if(w_$h=w_$H.measureText(w_$B.charAt(w_$s),w_$n)){var w_$Z=w_$l[w_$s]=new w_$T(w_$B.charAt(w_$s),w_$h.width,w_$h.height||w_$A.fontSize,w_$A);if(this.href){var w_$t=new w_$Q;this.addChild(w_$t),w_$Z.setSprite(w_$t)}}else console.warn("_getWords size is null"+w_$B.charAt(w_$s),w_$n);return w_$l},w_$B.showLinkSprite=function(){var w_$B=this._text.words;if(w_$B)for(var w_$h,w_$l,w_$A=[],w_$n=0;w_$n<w_$B.length;w_$n++)w_$l=w_$B[w_$n],(w_$h=new w_$Q).graphics.drawRect(0,0,w_$l.width,w_$l.height,"#ff0000"),w_$h.width=w_$l.width,w_$h.height=w_$l.height,this.addChild(w_$h),w_$A.push(w_$h)},w_$B._layoutLater=function(){var w_$B=this.style;512&w_$B._type||(w_$B.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&w_$B.block?(w_$C.later(this),w_$B._type|=512):this.parent&&this.parent._layoutLater())},w_$B._setAttributes=function(w_$B,w_$h){switch(w_$B){case"style":return void this.style.cssText(w_$h);case"class":return void(this.className=w_$h)}w_$l.prototype._setAttributes.call(this,w_$B,w_$h)},w_$B.updateHref=function(){if(null!=this._href){var w_$B=this._getWords();if(w_$B)for(var w_$h,w_$l,w_$A=0;w_$A<w_$B.length;w_$A++)(w_$l=(w_$h=w_$B[w_$A]).getSprite())&&(w_$l.size(w_$h.width,w_$h.height),w_$l.on("click",this,this.onLinkHandler))}},w_$B.onLinkHandler=function(w_$B){switch(w_$B.type){case"click":for(var w_$h=this;w_$h;)w_$h.event("link",[this.href]),w_$h=w_$h.parent}},w_$B.formatURL=function(w_$B){return this.URI?w_$J.formatURL(w_$B,this.URI?this.URI.path:null):w_$B},w_$Z(0,w_$B,"href",function(){return this._href},function(w_$B){null!=(this._href=w_$B)&&(this._getCSSStyle().underLine=1,this.updateHref())}),w_$Z(0,w_$B,"color",null,function(w_$B){this.style.color=w_$B}),w_$Z(0,w_$B,"onClick",null,function(w_$B){w_$A._runScript("fn=function(event){"+w_$B+";}"),this.on("click",this,void 0)}),w_$Z(0,w_$B,"id",null,function(w_$B){w_$u.document.setElementById(w_$B,this)}),w_$Z(0,w_$B,"innerTEXT",function(){return this._text.text},function(w_$B){this.text=w_$B}),w_$Z(0,w_$B,"style",function(){return this._style}),w_$Z(0,w_$B,"text",function(){return this._text.text},function(w_$B){this._text==w_$h._EMPTYTEXT?this._text={text:w_$B,words:null}:(this._text.text=w_$B,this._text.words&&(this._text.words.length=0)),w_$b.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),w_$Z(0,w_$B,"parent",w_$l.prototype._$get_parent,function(w_$B){if(w_$B instanceof laya.html.dom.HTMLElement){var w_$h=w_$B;this.URI||(this.URI=w_$h.URI),this.style.inherit(w_$h.style)}w_$A.superSet(w_$Q,this,"parent",w_$B)}),w_$Z(0,w_$B,"className",null,function(w_$B){this.style.attrs(w_$u.document.styleSheets["."+w_$B])}),w_$h.fillWords=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$B.graphics.clear();for(var w_$Z=0,w_$t=w_$h.length;w_$Z<w_$t;w_$Z++){var w_$P=w_$h[w_$Z];w_$B.graphics.fillText(w_$P.char,w_$P.x+w_$l,w_$P.y+w_$A,w_$n,w_$s,"left",w_$X)}},w_$h._EMPTYTEXT={text:null,words:null},w_$h}(w_$Q),w_$h=(function(w_$B){function w_$h(){w_$h.__super.call(this),this.style.lineElement=!0,this.style.block=!0}w_$X(w_$h,"laya.html.dom.HTMLBrElement",w_$o)}(),function(w_$B){function w_$h(){this.contextHeight=NaN,this.contextWidth=NaN,w_$h.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}w_$X(w_$h,"laya.html.dom.HTMLDivElement",w_$B);var w_$l=w_$h.prototype;return w_$l.appendHTML=function(w_$B){w_$y.parse(this,w_$B,this.URI),this.layout()},w_$l._addChildsToLayout=function(w_$h){var w_$B=this._getWords();if(null==w_$B&&0==this._childs.length)return!1;w_$B&&w_$B.forEach(function(w_$B){w_$h.push(w_$B)});for(var w_$l=!0,w_$A=0,w_$n=this._childs.length;w_$A<w_$n;w_$A++){var w_$s=this._childs[w_$A];w_$l?w_$l=!1:w_$h.push(null),w_$s._addToLayout(w_$h)}return!0},w_$l._addToLayout=function(w_$B){this.layout()},w_$l.layout=function(){if(this.style){this.style._type|=512;var w_$B=w_$C.layout(this);if(w_$B){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new w_$G);var w_$h=this._$P.mHtmlBounds;w_$h.x=w_$h.y=0,w_$h.width=this.contextWidth=w_$B[0],w_$h.height=this.contextHeight=w_$B[1],this.setBounds(w_$h)}}},w_$Z(0,w_$l,"height",function(){return this._height?this._height:this.contextHeight},w_$B.prototype._$set_height),w_$Z(0,w_$l,"innerHTML",null,function(w_$B){this.destroyChildren(),this.appendHTML(w_$B)}),w_$Z(0,w_$l,"width",function(){return this._width?this._width:this.contextWidth},function(w_$B){var w_$h=!1;w_$h=0===w_$B?w_$B!=this._width:w_$B!=this.width,w_$A.superSet(w_$o,this,"width",w_$B),w_$h&&this.layout()}),w_$h}(w_$o)),w_$u=function(w_$B){function w_$h(){this.all=new Array,this.styleSheets=w_$t.styleSheets,w_$h.__super.call(this)}w_$X(w_$h,"laya.html.dom.HTMLDocument",w_$o);var w_$l=w_$h.prototype;return w_$l.getElementById=function(w_$B){return this.all[w_$B]},w_$l.setElementById=function(w_$B,w_$h){this.all[w_$B]=w_$h},w_$n(w_$h,["document",function(){return this.document=new w_$h}]),w_$h}();(function(w_$B){function w_$h(){this._tex=null,this._url=null,this._renderArgs=[],w_$h.__super.call(this),this.style.block=!0}w_$X(w_$h,"laya.html.dom.HTMLImageElement",w_$o);var w_$l=w_$h.prototype;w_$l._addToLayout=function(w_$B){!this._style.absolute&&w_$B.push(this)},w_$l.render=function(w_$B,w_$h,w_$l){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(w_$$.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,w_$B.ctx.drawTexture2(w_$h,w_$l,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},w_$l.layaoutCallNative=function(){var w_$B=0;if(this._childs&&0<(w_$B=this._childs.length))for(var w_$h=0;w_$h<w_$B;w_$h++)this._childs[w_$h].layaoutCallNative&&this._childs[w_$h].layaoutCallNative()},w_$Z(0,w_$l,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(w_$B){this._width!==w_$B&&(this._width=w_$B,this._style.width=w_$B,this.repaint())}),w_$Z(0,w_$l,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(w_$B){this._height!==w_$B&&(this._height=w_$B,this._style.height=w_$B,this.repaint())}),w_$l.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),w_$P.clearCache(this,this._url),this._tex=null),w_$o.prototype.destroy.call(this)},w_$l.onloaded=function(){var w_$B=this._style;w_$B&&!w_$B.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),w_$B&&!w_$B.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),w_$b.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},w_$l._loadImageComplete=function(w_$B,w_$h,w_$l){if(!this._destroyed)if(null!=w_$l)if(w_$l instanceof ArrayBuffer){var w_$A=new DataView(w_$l);new laya.webgl.resource.WebGLImage(new Uint8Array(w_$l,8),w_$B,0,!1,w_$A.getUint32(0),w_$A.getUint32(4));this.onloaded()}else if(w_$l instanceof w_$V)w_$P.imgMgrSet[w_$B]=w_$h,w_$s.imgMgrLock(w_$B,w_$P.imgMgrSet[w_$B]),this._url=w_$B,this._tex=w_$l,w_$P.keepCache(this,w_$B),w_$P.cacheRes(w_$B,this._tex),this.onloaded();else{var w_$n=-1!=w_$B.indexOf(".png",w_$B.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(w_$l,w_$B,w_$n,!1,w_$l.width,w_$l.height);this.onloaded()}else this.event("error","Load image failed")},w_$Z(0,w_$l,"src",null,function(w_$B){(w_$B=this.formatURL(w_$B),this._url!=w_$B)&&(null!=this._tex&&(w_$P.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=w_$B,(this._tex=w_$P.getRes(w_$B))?(w_$P.keepCache(this,w_$B),this.onloaded()):w_$s.imgMgrLoad(w_$B,this._loadImageComplete.bind(this),2,!1))})})(),function(w_$B){function w_$h(){this.type=null,w_$h.__super.call(this),this.visible=!1}w_$X(w_$h,"laya.html.dom.HTMLLinkElement",w_$B);var w_$l=w_$h.prototype;w_$l._onload=function(w_$B){switch(this.type){case"text/css":w_$t.parseCSS(w_$B,this.URI)}},w_$Z(0,w_$l,"href",w_$B.prototype._$get_href,function(w_$B){var w_$h=this;w_$B=this.formatURL(w_$B),this.URI=new w_$J(w_$B);var w_$l=new w_$P;w_$l.once("complete",null,function(w_$B){w_$h._onload(w_$B)}),w_$l.load(w_$B,"text")}),w_$h._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(w_$o),function(w_$B){function w_$h(){w_$h.__super.call(this),this.visible=!1}w_$X(w_$h,"laya.html.dom.HTMLStyleElement",w_$B),w_$Z(0,w_$h.prototype,"text",w_$B.prototype._$get_text,function(w_$B){w_$t.parseCSS(w_$B,null)})}(w_$o),function(w_$B){function w_$h(){w_$h.__super.call(this),this._getCSSStyle().valign="middle"}w_$X(w_$h,"laya.html.dom.HTMLIframeElement",w_$B),w_$Z(0,w_$h.prototype,"href",w_$B.prototype._$get_href,function(w_$l){var w_$A=this;w_$l=this.formatURL(w_$l);var w_$B=new w_$P;w_$B.once("complete",null,function(w_$B){var w_$h=w_$A.URI;w_$A.URI=new w_$J(w_$l),w_$A.innerHTML=w_$B,!w_$h||(w_$A.URI=w_$h)}),w_$B.load(w_$l,"text")})}(w_$h)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w_$B,w_$h){"use strict";for(var w_$l in Object.defineProperty(w_$h,"__esModule",{value:!0}),Laya){var w_$A=Laya[w_$l];w_$A&&w_$A.__isclass&&(w_$h[w_$l]=w_$A)}}),function(w_$n,w_$B,w_$$){w_$$.un,w_$$.uns;var w_$A=w_$$.static,w_$s=w_$$.class,w_$X=w_$$.getset,w_$l=(w_$$.__newvec,laya.display.Animation),w_$V=(laya.utils.Browser,laya.utils.ClassUtils),w_$Z=laya.filters.ColorFilter,w_$t=laya.utils.Ease,w_$P=laya.events.Event,w_$G=(laya.events.EventDispatcher,laya.display.css.Font),w_$T=laya.display.FrameAnimation,w_$h=laya.display.Graphics,w_$b=laya.utils.Handler,w_$Q=laya.display.Input,w_$H=laya.net.Loader,w_$i=(laya.display.Node,laya.maths.Point),w_$J=laya.maths.Rectangle,w_$y=laya.renders.Render,w_$C=laya.display.Sprite,w_$o=laya.display.Text,w_$u=laya.resource.Texture,w_$v=laya.utils.Tween,w_$U=laya.utils.Utils,w_$x=laya.utils.WeakObject;w_$$.interface("laya.ui.IItem"),w_$$.interface("laya.ui.ISelect"),w_$$.interface("laya.ui.IRender"),w_$$.interface("laya.ui.IComponent"),w_$$.interface("laya.ui.IBox","IComponent");var w_$w=function(){function w_$B(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return w_$s(w_$B,"laya.ui.LayoutStyle"),w_$A(w_$B,["EMPTY",function(){return this.EMPTY=new w_$B}]),w_$B}(),w_$z=function(){function w_$B(){}return w_$s(w_$B,"laya.ui.Styles"),w_$B.labelColor="#000000",w_$B.buttonStateNum=3,w_$B.scrollBarMinNum=15,w_$B.scrollBarDelayTime=500,w_$A(w_$B,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),w_$B}(),w_$a=function(){function w_$n(){}return w_$s(w_$n,"laya.ui.UIUtils"),w_$n.fillArray=function(w_$B,w_$h,w_$l){var w_$A=w_$B.concat();if(w_$h)for(var w_$n=w_$h.split(","),w_$s=0,w_$X=Math.min(w_$A.length,w_$n.length);w_$s<w_$X;w_$s++){var w_$Z=w_$n[w_$s];w_$A[w_$s]="true"==w_$Z||"false"!=w_$Z&&w_$Z,null!=w_$l&&(w_$A[w_$s]=w_$l(w_$Z))}return w_$A},w_$n.toColor=function(w_$B){return w_$U.toHexColor(w_$B)},w_$n.gray=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0),w_$h?w_$n.addFilter(w_$B,w_$n.grayFilter):w_$n.clearFilter(w_$B,w_$Z)},w_$n.addFilter=function(w_$B,w_$h){var w_$l=w_$B.filters||[];w_$l.push(w_$h),w_$B.filters=w_$l},w_$n.clearFilter=function(w_$B,w_$h){var w_$l=w_$B.filters;if(null!=w_$l&&0<w_$l.length){for(var w_$A=w_$l.length-1;-1<w_$A;w_$A--){var w_$n=w_$l[w_$A];w_$$.__typeof(w_$n,w_$h)&&w_$l.splice(w_$A,1)}w_$B.filters=w_$l}},w_$n._getReplaceStr=function(w_$B){return w_$n.escapeSequence[w_$B]},w_$n.adptString=function(w_$B){return w_$B.replace(/\\(\w)/g,w_$n._getReplaceStr)},w_$n.getBindFun=function(w_$B){var w_$h=w_$n._funMap.get(w_$B);if(null==w_$h){var w_$l='"'+w_$B+'"',w_$A="(function(data){if(data==null)return;with(data){try{\nreturn "+(w_$l=w_$l.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";w_$h=w_$$._runScript(w_$A),w_$n._funMap.set(w_$B,w_$h)}return w_$h},w_$A(w_$n,["grayFilter",function(){return this.grayFilter=new w_$Z([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new w_$x}]),w_$n}(),w_$S=function(){function w_$B(){}return w_$s(w_$B,"UIConfig"),w_$B.touchScrollEnable=!0,w_$B.mouseWheelEnable=!0,w_$B.showButtons=!0,w_$B.popupBgColor="#000000",w_$B.popupBgAlpha=.5,w_$B.closeDialogOnSide=!0,w_$B}(),w_$N=function(w_$l){function w_$J(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,w_$J.__super.call(this),this._weakKeys=[]}w_$s(w_$J,"laya.ui.AutoBitmap",w_$l);var w_$B=w_$J.prototype;return w_$B.destroy=function(){if(w_$H.clearObject(this,this._weakKey),this._weakKeys){for(var w_$B=0,w_$h=this._weakKeys.length;w_$B<w_$h;++w_$B)w_$H.clearObject(this,this._weakKeys[w_$B]);this._weakKeys=null}w_$l.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},w_$B._setChanged=function(){this._isChanged||(this._isChanged=!0,w_$$.timer.callLater(this,this.changeSource))},w_$B.changeSource=function(){this._isChanged=!1;var w_$B=this._source;if(w_$B&&w_$B.bitmap){var w_$h=this.width,w_$l=this.height,w_$A=this._sizeGrid,w_$n=w_$B.sourceWidth,w_$s=w_$B.sourceHeight;if(!w_$A||w_$n===w_$h&&w_$s===w_$l)this.cleanByTexture(w_$B,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,w_$h,w_$l);else{w_$H.clearObject(this,this._weakKey),w_$B.$_GID||(w_$B.$_GID=w_$U.getGID());var w_$X=w_$B.$_GID+"."+w_$h+"."+w_$l+"."+w_$A.join("."),w_$Z=w_$H.findObject(w_$X);if(w_$U.isOKCmdList(w_$Z))return this._weakKey=w_$X,w_$H.keepObject(this,this._weakKey),void(this.cmds=w_$Z);this.clear();var w_$t,w_$P,w_$G=w_$A[0],w_$T=w_$A[1],w_$b=w_$A[2],w_$Q=w_$A[3],w_$i=w_$A[4],w_$$=!1;if(w_$h==w_$n&&(w_$Q=w_$T=0),w_$l==w_$s&&(w_$G=w_$b=0),w_$h<w_$Q+w_$T){var w_$V=w_$h;w_$$=!0,w_$h=w_$Q+w_$T,this.save(),this.clipRect(0,0,w_$V,w_$l)}w_$Q&&w_$G&&(w_$t=w_$J.getTexture(w_$B,0,0,w_$Q,w_$G),w_$P=this._weakKeys[0],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[0]=w_$t.weakKey),this.drawTexture(w_$t,0,0,w_$Q,w_$G)):(w_$H.clearObject(this,w_$P),this._weakKeys[0]="")),w_$T&&w_$G&&(w_$t=w_$J.getTexture(w_$B,w_$n-w_$T,0,w_$T,w_$G),w_$P=this._weakKeys[1],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[1]=w_$t.weakKey),this.drawTexture(w_$t,w_$h-w_$T,0,w_$T,w_$G)):(w_$H.clearObject(this,w_$P),this._weakKeys[1]="")),w_$Q&&w_$b&&(w_$t=w_$J.getTexture(w_$B,0,w_$s-w_$b,w_$Q,w_$b),w_$P=this._weakKeys[2],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[2]=w_$t.weakKey),this.drawTexture(w_$t,0,w_$l-w_$b,w_$Q,w_$b)):(w_$H.clearObject(this,w_$P),this._weakKeys[2]="")),w_$T&&w_$b&&(w_$t=w_$J.getTexture(w_$B,w_$n-w_$T,w_$s-w_$b,w_$T,w_$b),w_$P=this._weakKeys[3],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[3]=w_$t.weakKey),this.drawTexture(w_$t,w_$h-w_$T,w_$l-w_$b,w_$T,w_$b)):(w_$H.clearObject(this,w_$P),this._weakKeys[3]="")),w_$G&&(w_$t=w_$J.getTexture(w_$B,w_$Q,0,w_$n-w_$Q-w_$T,w_$G),w_$P=this._weakKeys[4],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[4]=w_$t.weakKey),this.drawBitmap(w_$i,w_$t,w_$Q,0,w_$h-w_$Q-w_$T,w_$G)):(w_$H.clearObject(this,w_$P),this._weakKeys[4]="")),w_$b&&(w_$t=w_$J.getTexture(w_$B,w_$Q,w_$s-w_$b,w_$n-w_$Q-w_$T,w_$b),w_$P=this._weakKeys[5],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[5]=w_$t.weakKey),this.drawBitmap(w_$i,w_$t,w_$Q,w_$l-w_$b,w_$h-w_$Q-w_$T,w_$b)):(w_$H.clearObject(this,w_$P),this._weakKeys[5]="")),w_$Q&&(w_$t=w_$J.getTexture(w_$B,0,w_$G,w_$Q,w_$s-w_$G-w_$b),w_$P=this._weakKeys[6],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[6]=w_$t.weakKey),this.drawBitmap(w_$i,w_$t,0,w_$G,w_$Q,w_$l-w_$G-w_$b)):(w_$H.clearObject(this,w_$P),this._weakKeys[6]="")),w_$T&&(w_$t=w_$J.getTexture(w_$B,w_$n-w_$T,w_$G,w_$T,w_$s-w_$G-w_$b),w_$P=this._weakKeys[7],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[7]=w_$t.weakKey),this.drawBitmap(w_$i,w_$t,w_$h-w_$T,w_$G,w_$T,w_$l-w_$G-w_$b)):(w_$H.clearObject(this,w_$P),this._weakKeys[7]="")),w_$t=w_$J.getTexture(w_$B,w_$Q,w_$G,w_$n-w_$Q-w_$T,w_$s-w_$G-w_$b),w_$P=this._weakKeys[8],w_$t?(w_$P!=w_$t.weakKey&&(w_$H.clearObject(this,w_$P),w_$H.keepObject(this,w_$t.weakKey),this._weakKeys[8]=w_$t.weakKey),this.drawBitmap(w_$i,w_$t,w_$Q,w_$G,w_$h-w_$Q-w_$T,w_$l-w_$G-w_$b)):(w_$H.clearObject(this,w_$P),this._weakKeys[8]=""),w_$$&&this.restore(),this.autoCacheCmd&&!w_$y.isConchApp&&(w_$H.saveObject(w_$X,this.cmds,null),this._weakKey=w_$X,w_$H.keepObject(this,this._weakKey))}this._repaint()}},w_$B.drawBitmap=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=0),w_$n<.1||w_$s<.1||(!w_$B||w_$h.width==w_$n&&w_$h.height==w_$s?this.drawTexture(w_$h,w_$l,w_$A,w_$n,w_$s):this.fillTexture(w_$h,w_$l,w_$A,w_$n,w_$s))},w_$B.clear=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$l.prototype.clear.call(this,!1)},w_$X(0,w_$B,"sizeGrid",function(){return this._sizeGrid},function(w_$B){this._sizeGrid=w_$B,this._setChanged()}),w_$X(0,w_$B,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(w_$B){this._width!=w_$B&&(this._width=w_$B,this._setChanged())}),w_$X(0,w_$B,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(w_$B){this._height!=w_$B&&(this._height=w_$B,this._setChanged())}),w_$X(0,w_$B,"source",function(){return this._source},function(w_$B){w_$B?(this._source=w_$B,this._setChanged()):(this._source=null,this.clear())}),w_$J.getTexture=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$A<=0&&(w_$A=1),w_$n<=0&&(w_$n=1),w_$B.$_GID||(w_$B.$_GID=w_$U.getGID());var w_$s=w_$B.$_GID+"."+w_$h+"."+w_$l+"."+w_$A+"."+w_$n,w_$X=w_$H.findObject(w_$s);if((!w_$X||!w_$X.source)&&(w_$X=w_$u.createFromTexture(w_$B,w_$h,w_$l,w_$A,w_$n))){if(w_$B.alphaTexture){var w_$Z=w_$B.width/w_$B.alphaTexture.width;w_$X.alphaTexture=w_$u.createFromTexture(w_$B.alphaTexture,w_$h/w_$Z,w_$l/w_$Z,w_$A/w_$Z,w_$n/w_$Z)}w_$H.saveObject(w_$s,w_$X),w_$X.weakKey=w_$s}return w_$X},w_$J}(w_$h),w_$R=(function(w_$B){function w_$h(){w_$h.__super.call(this)}w_$s(w_$h,"laya.ui.UIEvent",w_$P),w_$h.SHOW_TIP="showtip",w_$h.HIDE_TIP="hidetip"}(),function(w_$h){function w_$B(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,w_$B.__super.call(this),this._layout=w_$w.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}w_$s(w_$B,"laya.ui.Component",w_$h);var w_$l=w_$B.prototype;return w_$$.imps(w_$l,{"laya.ui.IComponent":!0}),w_$l.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},w_$l.preinitialize=function(){},w_$l.createChildren=function(){},w_$l.initialize=function(){},w_$l.callLater=function(w_$B,w_$h){w_$$.timer.callLater(this,w_$B,w_$h)},w_$l.runCallLater=function(w_$B){w_$$.timer.runCallLater(this,w_$B)},w_$l.commitMeasure=function(){},w_$l.changeSize=function(){this.event("resize")},w_$l.getLayout=function(){return this._layout===w_$w.EMPTY&&(this._layout=new w_$w),this._layout},w_$l._setLayoutEnabled=function(w_$B){this._layout&&this._layout.enable!=w_$B&&(this._layout.enable=w_$B,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},w_$l.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},w_$l.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},w_$l.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},w_$l.resetLayoutX=function(){var w_$B=this._layout;if(isNaN(w_$B.anchorX)||(this.pivotX=w_$B.anchorX*this.width),this.layoutEnabled){var w_$h=this.parent;w_$h&&(isNaN(w_$B.centerX)?isNaN(w_$B.left)?isNaN(w_$B.right)||(this.x=Math.round(w_$h.width-this.displayWidth-w_$B.right+this.pivotX*this.scaleX)):(this.x=Math.round(w_$B.left+this.pivotX*this.scaleX),isNaN(w_$B.right)||(this.width=(w_$h._width-w_$B.left-w_$B.right)/(this.scaleX||.01))):this.x=Math.round(.5*(w_$h.width-this.displayWidth)+w_$B.centerX+this.pivotX*this.scaleX))}},w_$l.resetLayoutY=function(){var w_$B=this._layout;if(isNaN(w_$B.anchorY)||(this.pivotY=w_$B.anchorY*this.height),this.layoutEnabled){var w_$h=this.parent;w_$h&&(isNaN(w_$B.centerY)?isNaN(w_$B.top)?isNaN(w_$B.bottom)||(this.y=Math.round(w_$h.height-this.displayHeight-w_$B.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(w_$B.top+this.pivotY*this.scaleY),isNaN(w_$B.bottom)||(this.height=(w_$h._height-w_$B.top-w_$B.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(w_$h.height-this.displayHeight)+w_$B.centerY+this.pivotY*this.scaleY))}},w_$l.onMouseOver=function(w_$B){w_$$.stage.event("showtip",this._toolTip)},w_$l.onMouseOut=function(w_$B){w_$$.stage.event("hidetip",this._toolTip)},w_$X(0,w_$l,"displayWidth",function(){return this.width*this.scaleX}),w_$X(0,w_$l,"width",function(){return this._width?this._width:this.measureWidth},function(w_$B){this._width!=w_$B&&(this._width=w_$B,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),w_$X(0,w_$l,"measureWidth",function(){var w_$B=0;this.commitMeasure();for(var w_$h=this.numChildren-1;-1<w_$h;w_$h--){var w_$l=this.getChildAt(w_$h);w_$l.visible&&(w_$B=Math.max(w_$l.x+w_$l.width*w_$l.scaleX,w_$B))}return w_$B}),w_$X(0,w_$l,"displayHeight",function(){return this.height*this.scaleY}),w_$X(0,w_$l,"height",function(){return this._height?this._height:this.measureHeight},function(w_$B){this._height!=w_$B&&(this._height=w_$B,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),w_$X(0,w_$l,"dataSource",function(){return this._dataSource},function(w_$B){for(var w_$h in this._dataSource=w_$B,this._dataSource)this.hasOwnProperty(w_$h)&&"function"!=typeof this[w_$h]&&(this[w_$h]=this._dataSource[w_$h])}),w_$X(0,w_$l,"scaleY",w_$h.prototype._$get_scaleY,function(w_$B){w_$$.superGet(w_$C,this,"scaleY")!=w_$B&&(w_$$.superSet(w_$C,this,"scaleY",w_$B),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),w_$X(0,w_$l,"measureHeight",function(){var w_$B=0;this.commitMeasure();for(var w_$h=this.numChildren-1;-1<w_$h;w_$h--){var w_$l=this.getChildAt(w_$h);w_$l.visible&&(w_$B=Math.max(w_$l.y+w_$l.height*w_$l.scaleY,w_$B))}return w_$B}),w_$X(0,w_$l,"scaleX",w_$h.prototype._$get_scaleX,function(w_$B){w_$$.superGet(w_$C,this,"scaleX")!=w_$B&&(w_$$.superSet(w_$C,this,"scaleX",w_$B),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),w_$X(0,w_$l,"top",function(){return this._layout.top},function(w_$B){w_$B!=this._layout.top&&(this.getLayout().top=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w_$X(0,w_$l,"bottom",function(){return this._layout.bottom},function(w_$B){w_$B!=this._layout.bottom&&(this.getLayout().bottom=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w_$X(0,w_$l,"left",function(){return this._layout.left},function(w_$B){w_$B!=this._layout.left&&(this.getLayout().left=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w_$X(0,w_$l,"right",function(){return this._layout.right},function(w_$B){w_$B!=this._layout.right&&(this.getLayout().right=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w_$X(0,w_$l,"centerX",function(){return this._layout.centerX},function(w_$B){w_$B!=this._layout.centerX&&(this.getLayout().centerX=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w_$X(0,w_$l,"centerY",function(){return this._layout.centerY},function(w_$B){w_$B!=this._layout.centerY&&(this.getLayout().centerY=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w_$X(0,w_$l,"anchorX",function(){return this._layout.anchorX},function(w_$B){w_$B!=this._layout.anchorX&&(this.getLayout().anchorX=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutX()}),w_$X(0,w_$l,"anchorY",function(){return this._layout.anchorY},function(w_$B){w_$B!=this._layout.anchorY&&(this.getLayout().anchorY=w_$B,this._setLayoutEnabled(!0)),this.resetLayoutY()}),w_$X(0,w_$l,"tag",function(){return this._tag},function(w_$B){this._tag=w_$B}),w_$X(0,w_$l,"toolTip",function(){return this._toolTip},function(w_$B){this._toolTip!=w_$B&&(null!=(this._toolTip=w_$B)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),w_$X(0,w_$l,"comXml",function(){return this._comXml},function(w_$B){this._comXml=w_$B}),w_$X(0,w_$l,"gray",function(){return this._gray},function(w_$B){w_$B!==this._gray&&(this._gray=w_$B,w_$a.gray(this,w_$B))}),w_$X(0,w_$l,"disabled",function(){return this._disabled},function(w_$B){w_$B!==this._disabled&&(this.gray=this._disabled=w_$B,this.mouseEnabled=!w_$B)}),w_$B}(w_$C)),w_$W=function(w_$B){function w_$h(){this.lockLayer=null,this.popupEffect=function(w_$B){w_$B.scale(1,1),w_$v.from(w_$B,{x:w_$$.stage.width/2,y:w_$$.stage.height/2,scaleX:0,scaleY:0},300,w_$t.backOut,w_$b.create(this,this.doOpen,[w_$B]))},this.closeEffect=function(w_$B,w_$h){w_$v.to(w_$B,{x:w_$$.stage.width/2,y:w_$$.stage.height/2,scaleX:0,scaleY:0},300,w_$t.strongOut,w_$b.create(this,this.doClose,[w_$B,w_$h]))},w_$h.__super.call(this),this.maskLayer=new w_$C,this.popupEffectHandler=w_$b.create(this,this.popupEffect,null,!1),this.closeEffectHandler=w_$b.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,w_$$.stage.addChild(this),w_$$.stage.on("resize",this,this._onResize),w_$S.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}w_$s(w_$h,"laya.ui.DialogManager",w_$C);var w_$l=w_$h.prototype;return w_$l._closeOnSide=function(){var w_$B=this.getChildAt(this.numChildren-1);w_$B instanceof laya.ui.Dialog&&w_$B.close("side")},w_$l.setLockView=function(w_$B){this.lockLayer||(this.lockLayer=new w_$M,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(w_$$.stage.width,w_$$.stage.height)),this.lockLayer.removeChildren(),w_$B&&(w_$B.centerX=w_$B.centerY=0,this.lockLayer.addChild(w_$B))},w_$l._onResize=function(w_$B){var w_$h=this.maskLayer.width=w_$$.stage.width,w_$l=this.maskLayer.height=w_$$.stage.height;this.lockLayer&&this.lockLayer.size(w_$h,w_$l),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,w_$h,w_$l,w_$S.popupBgColor),this.maskLayer.alpha=w_$S.popupBgAlpha;for(var w_$A=this.numChildren-1;-1<w_$A;w_$A--){var w_$n=this.getChildAt(w_$A);w_$n.popupCenter&&this._centerDialog(w_$n)}},w_$l._centerDialog=function(w_$B){w_$B.x=Math.round((w_$$.stage.width-w_$B.width>>1)+w_$B.pivotX),w_$B.y=Math.round((w_$$.stage.height-w_$B.height>>1)+w_$B.pivotY)},w_$l.open=function(w_$B,w_$h,w_$l){void 0===w_$h&&(w_$h=!1),void 0===w_$l&&(w_$l=!1),w_$h&&this._closeAll(),w_$B.popupCenter&&this._centerDialog(w_$B),this.addChild(w_$B),(w_$B.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),w_$l&&null!=w_$B.popupEffect?w_$B.popupEffect.runWith(w_$B):this.doOpen(w_$B),this.event("open")},w_$l.doOpen=function(w_$B){w_$B.onOpened()},w_$l.lock=function(w_$B){this.lockLayer&&(w_$B?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},w_$l.close=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=!1),w_$l&&null!=w_$B.closeEffect?w_$B.closeEffect.runWith([w_$B,w_$h]):this.doClose(w_$B,w_$h),this.event("close")},w_$l.doClose=function(w_$B,w_$h){w_$B.removeSelf(),w_$B.isModal&&this._checkMask(),w_$B.closeHandler&&w_$B.closeHandler.runWith(w_$h),w_$B.onClosed(w_$h)},w_$l.closeAll=function(){this._closeAll(),this.event("close")},w_$l._closeAll=function(){for(var w_$B=this.numChildren-1;-1<w_$B;w_$B--){var w_$h=this.getChildAt(w_$B);w_$h&&null!=w_$h.close&&this.doClose(w_$h)}},w_$l.getDialogsByGroup=function(w_$B){for(var w_$h=[],w_$l=this.numChildren-1;-1<w_$l;w_$l--){var w_$A=this.getChildAt(w_$l);w_$A&&w_$A.group===w_$B&&w_$h.push(w_$A)}return w_$h},w_$l.closeByGroup=function(w_$B){for(var w_$h=[],w_$l=this.numChildren-1;-1<w_$l;w_$l--){var w_$A=this.getChildAt(w_$l);w_$A&&w_$A.group===w_$B&&(w_$A.close(),w_$h.push(w_$A))}return w_$h},w_$l._checkMask=function(){this.maskLayer.removeSelf();for(var w_$B=this.numChildren-1;-1<w_$B;w_$B--){var w_$h=this.getChildAt(w_$B);if(w_$h&&w_$h.isModal)return void this.addChildAt(this.maskLayer,w_$B)}},w_$h}(),w_$M=function(w_$B){function w_$h(){w_$h.__super.call(this)}w_$s(w_$h,"laya.ui.Box",w_$B);var w_$l=w_$h.prototype;return w_$$.imps(w_$l,{"laya.ui.IBox":!0}),w_$X(0,w_$l,"dataSource",w_$B.prototype._$get_dataSource,function(w_$B){for(var w_$h in this._dataSource=w_$B){var w_$l=this.getChildByName(w_$h);w_$l?w_$l.dataSource=w_$B[w_$h]:this.hasOwnProperty(w_$h)&&"function"!=typeof this[w_$h]&&(this[w_$h]=w_$B[w_$h])}}),w_$h}(w_$R),w_$E=function(w_$h){function w_$l(w_$B,w_$h){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,w_$l.__super.call(this),this._labelColors=w_$z.buttonLabelColors,this._stateNum=w_$z.buttonStateNum,void 0===w_$h&&(w_$h=""),this.skin=w_$B,this.label=w_$h}w_$s(w_$l,"laya.ui.Button",w_$h);var w_$B=w_$l.prototype;return w_$$.imps(w_$B,{"laya.ui.ISelect":!0}),w_$B.destroy=function(w_$B){this.clearEvent(),w_$H.clearCache(this,this._skin),w_$H.clearObject(this,this._weakKey),void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(w_$B),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},w_$B.clearEvent=function(){this._skin&&w_$n.atalsNotify&&w_$n.atalsNotify.off(this._skin,this,this._setBtnSource)},w_$B.createChildren=function(){this.graphics=this._bitmap=new w_$N},w_$B.createText=function(){this._text||(this._text=new w_$o,this._text.overflow=w_$o.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},w_$B.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},w_$B.onMouse=function(w_$B){if(!1!==this.toggle||!this._selected)return"click"===w_$B.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=w_$l.stateMap[w_$B.type]))},w_$B.changeClips=function(){var w_$B=w_$H.getRes(this._skin);if(w_$B)if(this._skin&&""!=this._skin){w_$H.clearObject(this,this._weakKey);var w_$h=w_$B.sourceWidth,w_$l=w_$B.sourceHeight/this._stateNum;w_$B.$_GID||(w_$B.$_GID=w_$U.getGID());var w_$A=w_$B.$_GID+"-"+this._stateNum,w_$n=w_$H.findObject(w_$A);if(w_$U.isOkTextureList(w_$n)||(w_$n=null),w_$n)this._weakKey=w_$A,w_$H.keepObject(this,this._weakKey),this._sources=w_$n;else{if(this._sources=[],1===this._stateNum)this._sources.push(w_$B);else for(var w_$s=0;w_$s<this._stateNum;w_$s++){var w_$X=w_$u.createFromTexture(w_$B,0,w_$l*w_$s,w_$h,w_$l);if(w_$B.alphaTexture){var w_$Z=w_$B.width/w_$B.alphaTexture.width;w_$X.alphaTexture=w_$u.createFromTexture(w_$B.alphaTexture,0/w_$Z,w_$l*w_$s/w_$Z,w_$h/w_$Z,w_$l/w_$Z)}this._sources.push(w_$X)}w_$H.saveObject(w_$A,this._sources),this._weakKey=w_$A,w_$H.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||w_$h,this._bitmap.height=this._height||w_$l,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=w_$h)}else console.warn("lose skin ",this._skin,this.name,this.__className)},w_$B.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var w_$B=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[w_$B]),this.label&&(this._text.color=this._labelColors[w_$B],this._strokeColors&&(this._text.strokeColor=this._strokeColors[w_$B]))},w_$B._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},w_$X(0,w_$B,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(w_$B){this.createText(),this._text.strokeColor=w_$B}),w_$X(0,w_$B,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),w_$X(0,w_$B,"skin",function(){return this._skin},function(w_$B){if(this._skin!=w_$B)if(this.clearEvent(),w_$H.clearCache(this,this._skin),this._skin=w_$B,w_$H.keepCache(this,this._skin),w_$H.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var w_$h=w_$n.resAtalsObj&&w_$n.resAtalsObj[this._skin];w_$h?(w_$n.atalsNotify&&w_$n.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=w_$h.sourceW),0==this.height&&(this.height=w_$h.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),w_$B._setBtnSource=function(w_$B,w_$h){w_$B===this._skin&&w_$h&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},w_$X(0,w_$B,"state",function(){return this._state},function(w_$B){this._state!=w_$B&&(this._state=w_$B,this._setStateChanged())}),w_$X(0,w_$B,"text",function(){return this.createText(),this._text}),w_$X(0,w_$B,"stateNum",function(){return this._stateNum},function(w_$B){"string"==typeof w_$B&&(w_$B=parseInt(w_$B)),this._stateNum!=w_$B&&(this._stateNum=w_$B<1?1:3<w_$B?3:w_$B,this.callLater(this.changeClips))}),w_$X(0,w_$B,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(w_$B){this._strokeColors=w_$a.fillArray(w_$z.buttonLabelColors,w_$B,String),this._setStateChanged()}),w_$X(0,w_$B,"labelColors",function(){return this._labelColors.join(",")},function(w_$B){this._labelColors=w_$a.fillArray(w_$z.buttonLabelColors,w_$B,String),this._setStateChanged()}),w_$X(0,w_$B,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),w_$X(0,w_$B,"label",function(){return this._text?this._text.text:null},function(w_$B){(this._text||w_$B)&&(this.createText(),this._text.text!=w_$B&&(w_$B&&!this._text.parent&&this.addChild(this._text),this._text.text=(w_$B+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),w_$X(0,w_$B,"selected",function(){return this._selected},function(w_$B){this._selected!=w_$B&&(this._selected=w_$B,this.state=this._selected?2:0,this.event("change"))}),w_$X(0,w_$B,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(w_$B){this.createText(),this._text.padding=w_$a.fillArray(w_$z.labelPadding,w_$B,Number)}),w_$X(0,w_$B,"labelSize",function(){return this.createText(),this._text.fontSize},function(w_$B){this.createText(),this._text.fontSize=w_$B}),w_$X(0,w_$B,"labelStroke",function(){return this.createText(),this._text.stroke},function(w_$B){this.createText(),this._text.stroke=w_$B}),w_$X(0,w_$B,"labelBold",function(){return this.createText(),this._text.bold},function(w_$B){this.createText(),this._text.bold=w_$B}),w_$X(0,w_$B,"labelFont",function(){return this.createText(),this._text.font},function(w_$B){this.createText(),this._text.font=w_$B}),w_$X(0,w_$B,"labelAlign",function(){return this.createText(),this._text.align},function(w_$B){this.createText(),this._text.align=w_$B}),w_$X(0,w_$B,"clickHandler",function(){return this._clickHandler},function(w_$B){this._clickHandler=w_$B}),w_$X(0,w_$B,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(w_$B){this._bitmap.sizeGrid=w_$a.fillArray(w_$z.defaultSizeGrid,w_$B,Number)}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$R,this,"width",w_$B),this._autoSize&&(this._bitmap.width=w_$B,this._text&&(this._text.width=w_$B))}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$R,this,"height",w_$B),this._autoSize&&(this._bitmap.height=w_$B,this._text&&(this._text.height=w_$B))}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)||"string"==typeof w_$B?this.label=w_$B+"":w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$X(0,w_$B,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(w_$B){this._bitmap._offset=w_$B?w_$a.fillArray([1,1],w_$B,Number):[]}),w_$A(w_$l,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),w_$l}(w_$R),w_$j=function(w_$h){function w_$A(w_$B,w_$h,w_$l){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,w_$A.__super.call(this),void 0===w_$h&&(w_$h=1),void 0===w_$l&&(w_$l=1),this._clipX=w_$h,this._clipY=w_$l,this.skin=w_$B}w_$s(w_$A,"laya.ui.Clip",w_$h);var w_$B=w_$A.prototype;return w_$B.destroy=function(w_$B){this.clearEvent(),this.clearLoad(),w_$H.clearCache(this,this._skin),w_$H.clearObject(this,this._weakKey),void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},w_$B.dispose=function(){this.destroy(!0),w_$$.loader.clearRes(this._skin)},w_$B.createChildren=function(){this.graphics=this._bitmap=new w_$N},w_$B._onDisplay=function(w_$B){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},w_$B.changeClip=function(){if(this._clipChanged=!1,this._skin){var w_$B=w_$H.getRes(this._skin);if(w_$B)this.loadComplete(this._skin,w_$B);else{if(w_$n.resAtalsObj&&w_$n.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=w_$b.create(this,this.loadComplete,[this._skin]),this._progress=null,w_$$.loader.load(this._skin,this._complete,this._progress)}}},w_$B.loadComplete=function(w_$B,w_$h){if(w_$B===this._skin&&w_$h){w_$H.clearObject(this,this._weakKey);var w_$l=this._clipWidth||Math.ceil(w_$h.sourceWidth/this._clipX),w_$A=this._clipHeight||Math.ceil(w_$h.sourceHeight/this._clipY),w_$n=this._skin+w_$l+w_$A,w_$s=w_$H.findObject(w_$n);if(w_$U.isOkTextureList(w_$s)||(w_$s=null),w_$s)this._weakKey=w_$n,w_$H.keepObject(this,this._weakKey),this._sources=w_$s;else{this._sources=[];for(var w_$X=0;w_$X<this._clipY;w_$X++)for(var w_$Z=0;w_$Z<this._clipX;w_$Z++){var w_$t=w_$u.createFromTexture(w_$h,w_$l*w_$Z,w_$A*w_$X,w_$l,w_$A);if(w_$h.alphaTexture){var w_$P=w_$h.width/w_$h.alphaTexture.width;w_$t.alphaTexture=w_$u.createFromTexture(w_$h.alphaTexture,w_$l*w_$Z/w_$P,w_$A*w_$X/w_$P,w_$l/w_$P,w_$A/w_$P)}this._sources.push(w_$t)}w_$H.saveObject(w_$n,this._sources),this._weakKey=w_$n,w_$H.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},w_$B.play=function(w_$B,w_$h){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=-1),this._isPlaying=!0,this.index=w_$B,this._toIndex=w_$h,this._index++,w_$$.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},w_$B._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},w_$B.stop=function(){this._isPlaying=!1,w_$$.timer.clear(this,this._loop),this.event("complete")},w_$B._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},w_$X(0,w_$B,"interval",function(){return this._interval},function(w_$B){this._interval!=w_$B&&(this._interval=w_$B,this._isPlaying&&this.play())}),w_$B.clearEvent=function(){this._skin&&w_$n.atalsNotify&&w_$n.atalsNotify.off(this._skin,this,this._setBtnSource)},w_$B.clearLoad=function(){this._skin&&((this._complete||this._progress)&&w_$$.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},w_$X(0,w_$B,"skin",function(){return this._skin},function(w_$B){if(this._skin!=w_$B)if(this.clearLoad(),this.clearEvent(),w_$H.clearCache(this,this._skin),this._skin=w_$B){w_$H.keepCache(this,this._skin);var w_$h=w_$H.getRes(w_$B),w_$l=w_$n.resAtalsObj&&w_$n.resAtalsObj[this._skin];!w_$h&&w_$l?w_$n.atalsNotify&&w_$n.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),w_$B._setBtnSource=function(w_$B,w_$h){w_$B===this._skin&&w_$h&&(this.loadComplete(w_$B,w_$h),this.clearEvent())},w_$X(0,w_$B,"sources",function(){return this._sources},function(w_$B){this._sources=w_$B,this.index=this._index,this.event("loaded")}),w_$X(0,w_$B,"clipX",function(){return this._clipX},function(w_$B){this._clipX=w_$B||1,this._setClipChanged()}),w_$X(0,w_$B,"clipY",function(){return this._clipY},function(w_$B){this._clipY=w_$B||1,this._setClipChanged()}),w_$X(0,w_$B,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),w_$X(0,w_$B,"clipWidth",function(){return this._clipWidth},function(w_$B){this._clipWidth=w_$B,this._setClipChanged()}),w_$X(0,w_$B,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(w_$B){this._bitmap.sizeGrid=w_$a.fillArray(w_$z.defaultSizeGrid,w_$B,Number)}),w_$X(0,w_$B,"group",function(){return this._group},function(w_$B){w_$B&&this._skin&&w_$H.setGroup(this._skin,w_$B),this._group=w_$B}),w_$X(0,w_$B,"clipHeight",function(){return this._clipHeight},function(w_$B){this._clipHeight=w_$B,this._setClipChanged()}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$R,this,"width",w_$B),this._bitmap.width=w_$B}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$R,this,"height",w_$B),this._bitmap.height=w_$B}),w_$X(0,w_$B,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),w_$X(0,w_$B,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),w_$X(0,w_$B,"index",function(){return this._index},function(w_$B){this._index=w_$B,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[w_$B]),this.event("change")}),w_$X(0,w_$B,"autoPlay",function(){return this._autoPlay},function(w_$B){this._autoPlay!=w_$B&&((this._autoPlay=w_$B)?this.play():this.stop())}),w_$X(0,w_$B,"isPlaying",function(){return this._isPlaying},function(w_$B){this._isPlaying=w_$B}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)&&Math.floor(w_$B)==w_$B||"string"==typeof w_$B?this.index=parseInt(w_$B):w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$X(0,w_$B,"bitmap",function(){return this._bitmap}),w_$A}(w_$R),w_$g=function(w_$h){function w_$B(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,w_$B.__super.call(this)}w_$s(w_$B,"laya.ui.ColorPicker",w_$h);var w_$l=w_$B.prototype;return w_$l.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._colorPanel&&this._colorPanel.destroy(w_$B),this._colorButton&&this._colorButton.destroy(w_$B),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},w_$l.createChildren=function(){this.addChild(this._colorButton=new w_$E),this._colorPanel=new w_$M,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new w_$C),this._colorPanel.addChild(this._colorBlock=new w_$C),this._colorPanel.addChild(this._colorInput=new w_$Q)},w_$l.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},w_$l.onPanelMouseDown=function(w_$B){w_$B.stopPropagation()},w_$l.changePanel=function(){this._panelChanged=!1;var w_$B=this._colorPanel.graphics;w_$B.clear(),w_$B.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(w_$B=this._colorTiles.graphics).clear();for(var w_$h=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],w_$l=0;w_$l<12;w_$l++)for(var w_$A=0;w_$A<20;w_$A++){var w_$n=0;w_$n=0===w_$A?w_$h[w_$l]:1===w_$A?0:51*(((3*w_$l+w_$A/6)%3<<0)+3*(w_$l/6<<0))<<16|w_$A%6*51<<8|(w_$l<<0)%6*51;var w_$s=w_$a.toColor(w_$n);this._colors.push(w_$s);var w_$X=w_$A*this._gridSize,w_$Z=w_$l*this._gridSize;w_$B.drawRect(w_$X,w_$Z,this._gridSize,this._gridSize,w_$s,"#000000")}},w_$l.onColorButtonClick=function(w_$B){this._colorPanel.parent?this.close():this.open()},w_$l.open=function(){var w_$B=this.localToGlobal(new w_$i),w_$h=w_$B.x+this._colorPanel.width<=w_$$.stage.width?w_$B.x:w_$$.stage.width-this._colorPanel.width,w_$l=w_$B.y+this._colorButton.height;w_$l=w_$l+this._colorPanel.height<=w_$$.stage.height?w_$l:w_$B.y-this._colorPanel.height,this._colorPanel.pos(w_$h,w_$l),this._colorPanel.zOrder=1001,w_$$._currentStage.addChild(this._colorPanel),w_$$.stage.on("mousedown",this,this.removeColorBox)},w_$l.close=function(){w_$$.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},w_$l.removeColorBox=function(w_$B){this.close()},w_$l.onColorFieldKeyDown=function(w_$B){13==w_$B.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),w_$B.stopPropagation())},w_$l.onColorInputChange=function(w_$B){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},w_$l.onColorTilesClick=function(w_$B){this.selectedColor=this.getColorByMouse(),this.close()},w_$l.onColorTilesMouseMove=function(w_$B){this._colorInput.focus=!1;var w_$h=this.getColorByMouse();this._colorInput.text=w_$h,this.drawBlock(w_$h)},w_$l.getColorByMouse=function(){var w_$B=this._colorTiles.getMousePoint(),w_$h=Math.floor(w_$B.x/this._gridSize),w_$l=Math.floor(w_$B.y/this._gridSize);return this._colors[20*w_$l+w_$h]},w_$l.drawBlock=function(w_$B){var w_$h=this._colorBlock.graphics;w_$h.clear();var w_$l=w_$B||"#ffffff";w_$h.drawRect(0,0,50,20,w_$l,this._borderColor),w_$B||w_$h.drawLine(0,0,50,20,"#ff0000")},w_$l.changeColor=function(){var w_$B=this.graphics;w_$B.clear();var w_$h=this._selectedColor||"#000000";w_$B.drawRect(0,0,this._colorButton.width,this._colorButton.height,w_$h)},w_$l._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},w_$X(0,w_$l,"inputBgColor",function(){return this._inputBgColor},function(w_$B){this._inputBgColor=w_$B,this._setPanelChanged()}),w_$X(0,w_$l,"selectedColor",function(){return this._selectedColor},function(w_$B){this._selectedColor!=w_$B&&(this._selectedColor=this._colorInput.text=w_$B,this.drawBlock(w_$B),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",w_$P.EMPTY.setTo("change",this,this)))}),w_$X(0,w_$l,"skin",function(){return this._colorButton.skin},function(w_$B){this._colorButton.skin=w_$B,this.changeColor()}),w_$X(0,w_$l,"bgColor",function(){return this._bgColor},function(w_$B){this._bgColor=w_$B,this._setPanelChanged()}),w_$X(0,w_$l,"borderColor",function(){return this._borderColor},function(w_$B){this._borderColor=w_$B,this._setPanelChanged()}),w_$X(0,w_$l,"inputColor",function(){return this._inputColor},function(w_$B){this._inputColor=w_$B,this._setPanelChanged()}),w_$B}(w_$R),w_$_=function(w_$h){function w_$l(w_$B,w_$h){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,w_$l.__super.call(this),this._itemColors=w_$z.comboBoxItemColors,this.skin=w_$B,this.labels=w_$h}w_$s(w_$l,"laya.ui.ComboBox",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._button&&this._button.destroy(w_$B),this._list&&this._list.destroy(w_$B),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},w_$B.createChildren=function(){this.addChild(this._button=new w_$E),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},w_$B._createList=function(){this._list=new w_$f,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},w_$B._setListEvent=function(w_$B){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=w_$b.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},w_$B.onListDown=function(w_$B){w_$B.stopPropagation()},w_$B.onScrollBarDown=function(w_$B){w_$B.stopPropagation()},w_$B.onButtonMouseDown=function(w_$B){this.callLater(this.switchTo,[!this._isOpen])},w_$B.changeList=function(){this._listChanged=!1;var w_$B=this.width-2,w_$h=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:w_$B,height:this._itemHeight,fontSize:this._itemSize,color:w_$h}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},w_$B.onlistItemMouse=function(w_$B,w_$h){var w_$l=w_$B.type;if("mouseover"===w_$l||"mouseout"===w_$l){if(this._isCustomList)return;var w_$A=this._list.getCell(w_$h);if(!w_$A)return;var w_$n=w_$A.getChildByName("label");w_$n&&("mouseover"===w_$l?(w_$n.bgColor=this._itemColors[0],w_$n.color=this._itemColors[1]):(w_$n.bgColor=null,w_$n.color=this._itemColors[2]))}else"click"===w_$l&&(this.selectedIndex=w_$h,this.isOpen=!1)},w_$B.switchTo=function(w_$B){this.isOpen=w_$B},w_$B.changeOpen=function(){this.isOpen=!this._isOpen},w_$B.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var w_$B=this._list.graphics;w_$B.clear(),w_$B.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var w_$h=this._list.array||[],w_$l=w_$h.length=0,w_$A=this._labels.length;w_$l<w_$A;w_$l++)w_$h.push({label:this._labels[w_$l]});this._list.height=this._listHeight,this._list.array=w_$h},w_$B.changeSelected=function(){this._button.label=this.selectedLabel},w_$B._onStageMouseWheel=function(w_$B){this._list&&!this._list.contains(w_$B.target)&&this.removeList(null)},w_$B.removeList=function(w_$B){w_$$.stage.off("mousedown",this,this.removeList),w_$$.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},w_$X(0,w_$B,"selectedIndex",function(){return this._selectedIndex},function(w_$B){this._selectedIndex!=w_$B&&(this._selectedIndex=w_$B,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[w_$P.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),w_$X(0,w_$B,"measureHeight",function(){return this._button.height}),w_$X(0,w_$B,"skin",function(){return this._button.skin},function(w_$B){this._button.skin!=w_$B&&(this._button.skin=w_$B,this._listChanged=!0)}),w_$X(0,w_$B,"measureWidth",function(){return this._button.width}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$R,this,"width",w_$B),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),w_$X(0,w_$B,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(w_$B){this.selectedIndex=this._labels.indexOf(w_$B)}),w_$X(0,w_$B,"labels",function(){return this._labels.join(",")},function(w_$B){0<this._labels.length&&(this.selectedIndex=-1),w_$B?this._labels=w_$B.split(","):this._labels.length=0,this._itemChanged=!0}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$R,this,"height",w_$B),this._button.height=this._height}),w_$X(0,w_$B,"selectHandler",function(){return this._selectHandler},function(w_$B){this._selectHandler=w_$B}),w_$X(0,w_$B,"visibleNum",function(){return this._visibleNum},function(w_$B){this._visibleNum=w_$B,this._listChanged=!0}),w_$X(0,w_$B,"labelBold",function(){return this._button.text.bold},function(w_$B){this._button.text.bold=w_$B}),w_$X(0,w_$B,"itemColors",function(){return String(this._itemColors)},function(w_$B){this._itemColors=w_$a.fillArray(this._itemColors,w_$B,String),this._listChanged=!0}),w_$X(0,w_$B,"itemSize",function(){return this._itemSize},function(w_$B){this._itemSize=w_$B,this._listChanged=!0}),w_$X(0,w_$B,"scrollBar",function(){return this.list.scrollBar}),w_$X(0,w_$B,"isOpen",function(){return this._isOpen},function(w_$B){if(this._isOpen!=w_$B)if(this._isOpen=w_$B,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var w_$h=this.localToGlobal(w_$i.TEMP.setTo(0,0)),w_$l=w_$h.y+this._button.height;w_$l=w_$l+this._listHeight<=w_$$.stage.height?w_$l:w_$h.y-this._listHeight,this._list.pos(w_$h.x,w_$l),this._list.zOrder=1001,w_$$._currentStage.addChild(this._list),w_$$.stage.once("mousedown",this,this.removeList),w_$$.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),w_$X(0,w_$B,"scrollBarSkin",function(){return this._scrollBarSkin},function(w_$B){this._scrollBarSkin=w_$B}),w_$X(0,w_$B,"sizeGrid",function(){return this._button.sizeGrid},function(w_$B){this._button.sizeGrid=w_$B}),w_$X(0,w_$B,"button",function(){return this._button}),w_$X(0,w_$B,"list",function(){return this._list||this._createList(),this._list},function(w_$B){w_$B&&(w_$B.removeSelf(),this._isCustomList=!0,this._list=w_$B,this._setListEvent(w_$B),this._itemHeight=w_$B.getCell(0).height+w_$B.spaceY)}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)&&Math.floor(w_$B)==w_$B||"string"==typeof w_$B?this.selectedIndex=parseInt(w_$B):w_$B instanceof Array?this.labels=w_$B.join(","):w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$X(0,w_$B,"labelColors",function(){return this._button.labelColors},function(w_$B){this._button.labelColors!=w_$B&&(this._button.labelColors=w_$B)}),w_$X(0,w_$B,"labelPadding",function(){return this._button.text.padding.join(",")},function(w_$B){this._button.text.padding=w_$a.fillArray(w_$z.labelPadding,w_$B,Number)}),w_$X(0,w_$B,"labelSize",function(){return this._button.text.fontSize},function(w_$B){this._button.text.fontSize=w_$B}),w_$X(0,w_$B,"labelFont",function(){return this._button.text.font},function(w_$B){this._button.text.font=w_$B}),w_$X(0,w_$B,"stateNum",function(){return this._button.stateNum},function(w_$B){this._button.stateNum=w_$B}),w_$l}(w_$R),w_$d=function(w_$h){function w_$l(w_$B){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,w_$l.__super.call(this),this._showButtons=w_$S.showButtons,this._touchScrollEnable=w_$S.touchScrollEnable,this._mouseWheelEnable=w_$S.mouseWheelEnable,this.skin=w_$B,this.max=1}w_$s(w_$l,"laya.ui.ScrollBar",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this.stopScroll(),this.target=null,w_$h.prototype.destroy.call(this,w_$B),this.upButton&&this.upButton.destroy(w_$B),this.downButton&&this.downButton.destroy(w_$B),this.slider&&this.slider.destroy(w_$B),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},w_$B.createChildren=function(){this.addChild(this.slider=new w_$k),this.addChild(this.upButton=new w_$E),this.addChild(this.downButton=new w_$E)},w_$B.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},w_$B.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},w_$B.onButtonMouseDown=function(w_$B){var w_$h=w_$B.currentTarget===this.upButton;this.slide(w_$h),w_$$.timer.once(w_$z.scrollBarDelayTime,this,this.startLoop,[w_$h]),w_$$.stage.once("mouseup",this,this.onStageMouseUp)},w_$B.startLoop=function(w_$B){w_$$.timer.frameLoop(1,this,this.slide,[w_$B])},w_$B.slide=function(w_$B){w_$B?this.value-=this._scrollSize:this.value+=this._scrollSize},w_$B.onStageMouseUp=function(w_$B){w_$$.timer.clear(this,this.startLoop),w_$$.timer.clear(this,this.slide)},w_$B.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},w_$B.changeSize=function(){w_$h.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},w_$B.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},w_$B.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},w_$B.setScroll=function(w_$B,w_$h,w_$l){this.runCallLater(this.changeSize),this.slider.setSlider(w_$B,w_$h,w_$l),this.slider.bar.visible=0<w_$h,!this._hide&&this.autoHide&&(this.visible=!1)},w_$B.onTargetMouseWheel=function(w_$B){this.value-=w_$B.delta*this._scrollSize,this.target=this._target},w_$B.onTargetMouseDown=function(w_$B){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new w_$i),this._lastPoint.setTo(w_$$.stage.mouseX,w_$$.stage.mouseY),w_$$.timer.clear(this,this.tweenMove),w_$v.clearTween(this),w_$$.stage.once("mouseup",this,this.onStageMouseUp2),w_$$.stage.once("mouseout",this,this.onStageMouseUp2),w_$$.timer.frameLoop(1,this,this.loop)},w_$B.loop=function(){var w_$B=w_$$.stage.mouseY,w_$h=w_$$.stage.mouseX;if(this._lastOffset=this.isVertical?w_$B-this._lastPoint.y:w_$h-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?w_$$.stage._canvasTransform.getScaleY():w_$$.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=w_$h,this._lastPoint.y=w_$B,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},w_$B.onStageMouseUp2=function(w_$B){if(w_$$.stage.off("mouseup",this,this.onStageMouseUp2),w_$$.stage.off("mouseout",this,this.onStageMouseUp2),w_$$.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?w_$v.to(this,{value:this.min},this.elasticBackTime,w_$t.sineOut,w_$b.create(this,this.elasticOver)):this._value>this.max&&w_$v.to(this,{value:this.max},this.elasticBackTime,w_$t.sineOut,w_$b.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?w_$$.stage.mouseY-this._lastPoint.y:w_$$.stage.mouseX-this._lastPoint.x);for(var w_$h=0,w_$l=Math.min(this._offsets.length,3),w_$A=0;w_$A<w_$l;w_$A++)w_$h+=this._offsets[this._offsets.length-1-w_$A];if(this._lastOffset=w_$h/w_$l,(w_$h=Math.abs(this._lastOffset))<2)return void this.event("end");60<w_$h&&(this._lastOffset=0<this._lastOffset?60:-60);var w_$n=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));w_$$.timer.frameLoop(1,this,this.tweenMove,[w_$n])}},w_$B.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&w_$v.to(this,{alpha:0},500),this.event("end")},w_$B.tweenMove=function(w_$B){this._lastOffset*=this.rollRatio;var w_$h=NaN;if(0<w_$B&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,w_$h=.5*-(this.min-w_$B-this.value),this._lastOffset>w_$h&&(this._lastOffset=w_$h)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,w_$h=.5*-(this.max+w_$B-this.value),this._lastOffset<w_$h&&(this._lastOffset=w_$h))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(w_$$.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?w_$v.to(this,{value:this.min},this.elasticBackTime,w_$t.sineOut,w_$b.create(this,this.elasticOver)):this._value>this.max?w_$v.to(this,{value:this.max},this.elasticBackTime,w_$t.sineOut,w_$b.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&w_$v.to(this,{alpha:0},500)}},w_$B.stopScroll=function(){this.onStageMouseUp2(null),w_$$.timer.clear(this,this.tweenMove),w_$v.clearTween(this)},w_$X(0,w_$B,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),w_$X(0,w_$B,"skin",function(){return this._skin},function(w_$B){this._skin!=w_$B&&(this._skin=w_$B,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),w_$X(0,w_$B,"max",function(){return this.slider.max},function(w_$B){this.slider.max=w_$B}),w_$X(0,w_$B,"showButtons",function(){return this._showButtons},function(w_$B){this._showButtons=w_$B,this.callLater(this.changeScrollBar)}),w_$X(0,w_$B,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),w_$X(0,w_$B,"min",function(){return this.slider.min},function(w_$B){this.slider.min=w_$B}),w_$X(0,w_$B,"value",function(){return this._value},function(w_$B){w_$B!==this._value&&(this._value=w_$B,this._isElastic||(this.slider._value!=w_$B&&(this.slider._value=w_$B,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),w_$X(0,w_$B,"isVertical",function(){return this.slider.isVertical},function(w_$B){this.slider.isVertical=w_$B}),w_$X(0,w_$B,"sizeGrid",function(){return this.slider.sizeGrid},function(w_$B){this.slider.sizeGrid=w_$B}),w_$X(0,w_$B,"scrollSize",function(){return this._scrollSize},function(w_$B){this._scrollSize=w_$B}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)||"string"==typeof w_$B?this.value=Number(w_$B):w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$X(0,w_$B,"thumbPercent",function(){return this._thumbPercent},function(w_$B){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),w_$B=1<=w_$B?.99:w_$B,this._thumbPercent=w_$B,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*w_$B,w_$z.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*w_$B,w_$z.scrollBarMinNum))}),w_$X(0,w_$B,"target",function(){return this._target},function(w_$B){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=w_$B)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),w_$X(0,w_$B,"hide",function(){return this._hide},function(w_$B){this._hide=w_$B,this.visible=!w_$B}),w_$X(0,w_$B,"touchScrollEnable",function(){return this._touchScrollEnable},function(w_$B){this._touchScrollEnable=w_$B,this.target=this._target}),w_$X(0,w_$B,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(w_$B){this._mouseWheelEnable=w_$B,this.target=this._target}),w_$X(0,w_$B,"tick",function(){return this.slider.tick},function(w_$B){this.slider.tick=w_$B}),w_$l}(w_$R),w_$k=function(w_$h){function w_$l(w_$B){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,w_$l.__super.call(this),this.skin=w_$B}w_$s(w_$l,"laya.ui.Slider",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._bg&&this._bg.destroy(w_$B),this._bar&&this._bar.destroy(w_$B),this._progress&&this._progress.destroy(w_$B),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},w_$B.createChildren=function(){this.addChild(this._bg=new w_$O),this.addChild(this._bar=new w_$E)},w_$B.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},w_$B.onBarMouseDown=function(w_$B){this._globalSacle||(this._globalSacle=new w_$i),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=w_$$.stage.mouseX,this._ty=w_$$.stage.mouseY,w_$$.stage.on("mousemove",this,this.mouseMove),w_$$.stage.once("mouseup",this,this.mouseUp),w_$$.stage.once("mouseout",this,this.mouseUp),this.showValueText()},w_$B.showValueText=function(){if(this.showLabel){var w_$B=laya.ui.Slider.label;this.addChild(w_$B),w_$B.textField.changeText(this._value+""),this.isVertical?(w_$B.x=this._bar.x+20,w_$B.y=.5*(this._bar.height-w_$B.height)+this._bar.y):(w_$B.y=this._bar.y-20,w_$B.x=.5*(this._bar.width-w_$B.width)+this._bar.x)}},w_$B.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},w_$B.mouseUp=function(w_$B){w_$$.stage.off("mousemove",this,this.mouseMove),w_$$.stage.off("mouseup",this,this.mouseUp),w_$$.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},w_$B.mouseMove=function(w_$B){var w_$h=this._value;this.isVertical?(this._bar.y+=(w_$$.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(w_$$.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=w_$$.stage.mouseX,this._ty=w_$$.stage.mouseY;var w_$l=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*w_$l)/w_$l,this._value!=w_$h&&this.sendChangeEvent(),this.showValueText()},w_$B.sendChangeEvent=function(w_$B){void 0===w_$B&&(w_$B="change"),this.event(w_$B),this.changeHandler&&this.changeHandler.runWith(this._value)},w_$B.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},w_$B.changeSize=function(){w_$h.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},w_$B.setSlider=function(w_$B,w_$h,w_$l){this._value=-1,this._min=w_$B,this._max=w_$B<w_$h?w_$h:w_$B,this.value=w_$l<w_$B?w_$B:w_$h<w_$l?w_$h:w_$l},w_$B.changeValue=function(){var w_$B=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*w_$B)/w_$B,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var w_$h=this._max-this._min;0===w_$h&&(w_$h=1),this.isVertical?(this._bar.y=(this._value-this._min)/w_$h*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/w_$h*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},w_$B.onBgMouseDown=function(w_$B){var w_$h=this._bg.getMousePoint();this.isVertical?this.value=w_$h.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=w_$h.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},w_$X(0,w_$B,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),w_$X(0,w_$B,"skin",function(){return this._skin},function(w_$B){if(this._skin!=w_$B){this._skin=w_$B,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var w_$h=this._skin.replace(".png","$progress.png");w_$H.getRes(w_$h)&&(this._progress||(this.addChild(this._progress=new w_$O),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=w_$h),this.setBarPoint(),this.callLater(this.changeValue)}}),w_$X(0,w_$B,"allowClickBack",function(){return this._allowClickBack},function(w_$B){this._allowClickBack!=w_$B&&((this._allowClickBack=w_$B)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),w_$X(0,w_$B,"max",function(){return this._max},function(w_$B){this._max!=w_$B&&(this._max=w_$B,this.callLater(this.changeValue))}),w_$X(0,w_$B,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),w_$X(0,w_$B,"tick",function(){return this._tick},function(w_$B){this._tick!=w_$B&&(this._tick=w_$B,this.callLater(this.changeValue))}),w_$X(0,w_$B,"sizeGrid",function(){return this._bg.sizeGrid},function(w_$B){this._bg.sizeGrid=w_$B,this._bar.sizeGrid=w_$B,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),w_$X(0,w_$B,"min",function(){return this._min},function(w_$B){this._min!=w_$B&&(this._min=w_$B,this.callLater(this.changeValue))}),w_$X(0,w_$B,"value",function(){return this._value},function(w_$B){if(this._value!=w_$B){var w_$h=this._value;this._value=w_$B,this.changeValue(),this._value!=w_$h&&this.sendChangeEvent()}}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)||"string"==typeof w_$B?this.value=Number(w_$B):w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$X(0,w_$B,"bar",function(){return this._bar}),w_$A(w_$l,["label",function(){return this.label=new w_$p}]),w_$l}(w_$R),w_$O=function(w_$h){function w_$l(w_$B){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,w_$l.__super.call(this),this.skin=w_$B}w_$s(w_$l,"laya.ui.Image",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,w_$H.clearCache(this,this._skin)},w_$B.dispose=function(){this.destroy(!0),w_$H.clearCache(this,this._skin),this.clearEvent()},w_$B.createChildren=function(){this.graphics=this._bitmap=new w_$N},w_$B.setSource=function(w_$B,w_$h){w_$B===this._skin&&w_$h&&(this.source=w_$h,this.onCompResize(),this.clearEvent())},w_$B.clearEvent=function(){this._skin&&w_$n.atalsNotify&&w_$n.atalsNotify.off(this._skin,this,this.setSource)},w_$B.clearLoad=function(){this._skin&&((this._complete||this._progress)&&w_$$.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},w_$X(0,w_$B,"source",function(){return this._bitmap.source},function(w_$B){this._bitmap&&(this._bitmap.source=w_$B,this.event("loaded"),this.repaint())}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"string"==typeof(this._dataSource=w_$B)?this.skin=w_$B:w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$X(0,w_$B,"measureHeight",function(){return this._bitmap.height}),w_$X(0,w_$B,"skin",function(){return this._skin},function(w_$B){if(this._skin!=w_$B)if(w_$H.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=w_$B){w_$H.keepCache(this,this._skin);var w_$h=w_$H.getRes(w_$B),w_$l=w_$n.resAtalsObj&&w_$n.resAtalsObj[this._skin];w_$h?(this.source=w_$h,this.onCompResize()):w_$l?(w_$n.atalsNotify&&w_$n.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=w_$l.sourceW),0==this.height&&(this.height=w_$l.sourceH)):(this._complete=w_$b.create(this,this.setSource,[this._skin]),this._progress=null,w_$$.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),w_$X(0,w_$B,"group",function(){return this._group},function(w_$B){w_$B&&this._skin&&w_$H.setGroup(this._skin,w_$B),this._group=w_$B}),w_$X(0,w_$B,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(w_$B){this._bitmap.sizeGrid=w_$a.fillArray(w_$z.defaultSizeGrid,w_$B,Number)}),w_$X(0,w_$B,"measureWidth",function(){return this._bitmap.width}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$R,this,"width",w_$B),this._bitmap.width=0==w_$B?1e-7:w_$B}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$R,this,"height",w_$B),this._bitmap.height=0==w_$B?1e-7:w_$B}),w_$l}(w_$R),w_$p=function(w_$h){function w_$l(w_$B){this._tf=null,w_$l.__super.call(this),void 0===w_$B&&(w_$B=""),w_$G.defaultColor=w_$z.labelColor,this.text=w_$B}w_$s(w_$l,"laya.ui.Label",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._tf=null},w_$B.createChildren=function(){this.addChild(this._tf=new w_$o)},w_$B.changeText=function(w_$B){this._tf.changeText(w_$B)},w_$X(0,w_$B,"padding",function(){return this._tf.padding.join(",")},function(w_$B){this._tf.padding=w_$a.fillArray(w_$z.labelPadding,w_$B,Number)}),w_$X(0,w_$B,"bold",function(){return this._tf.bold},function(w_$B){this._tf.bold=w_$B}),w_$X(0,w_$B,"align",function(){return this._tf.align},function(w_$B){this._tf.align=w_$B}),w_$X(0,w_$B,"text",function(){return this._tf.text},function(w_$B){this._tf.text!=w_$B&&(w_$B&&(w_$B=w_$a.adptString(w_$B+"")),this._tf.text=w_$B,this.event("change"),this._width&&this._height||this.onCompResize())}),w_$X(0,w_$B,"italic",function(){return this._tf.italic},function(w_$B){this._tf.italic=w_$B}),w_$X(0,w_$B,"wordWrap",function(){return this._tf.wordWrap},function(w_$B){this._tf.wordWrap=w_$B}),w_$X(0,w_$B,"font",function(){return this._tf.font},function(w_$B){this._tf.font=w_$B}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)||"string"==typeof w_$B?this.text=w_$B+"":w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$X(0,w_$B,"color",function(){return this._tf.color},function(w_$B){this._tf.color=w_$B}),w_$X(0,w_$B,"valign",function(){return this._tf.valign},function(w_$B){this._tf.valign=w_$B}),w_$X(0,w_$B,"leading",function(){return this._tf.leading},function(w_$B){this._tf.leading=w_$B}),w_$X(0,w_$B,"fontSize",function(){return this._tf.fontSize},function(w_$B){this._tf.fontSize=w_$B}),w_$X(0,w_$B,"bgColor",function(){return this._tf.bgColor},function(w_$B){this._tf.bgColor=w_$B}),w_$X(0,w_$B,"borderColor",function(){return this._tf.borderColor},function(w_$B){this._tf.borderColor=w_$B}),w_$X(0,w_$B,"stroke",function(){return this._tf.stroke},function(w_$B){this._tf.stroke=w_$B}),w_$X(0,w_$B,"strokeColor",function(){return this._tf.strokeColor},function(w_$B){this._tf.strokeColor=w_$B}),w_$X(0,w_$B,"textField",function(){return this._tf}),w_$X(0,w_$B,"measureWidth",function(){return this._tf.width}),w_$X(0,w_$B,"measureHeight",function(){return this._tf.height}),w_$X(0,w_$B,"width",function(){return this._width||this._tf.text?w_$$.superGet(w_$R,this,"width"):0},function(w_$B){w_$$.superSet(w_$R,this,"width",w_$B),this._tf.width=w_$B}),w_$X(0,w_$B,"height",function(){return this._height||this._tf.text?w_$$.superGet(w_$R,this,"height"):0},function(w_$B){w_$$.superSet(w_$R,this,"height",w_$B),this._tf.height=w_$B}),w_$X(0,w_$B,"overflow",function(){return this._tf.overflow},function(w_$B){this._tf.overflow=w_$B}),w_$X(0,w_$B,"underline",function(){return this._tf.underline},function(w_$B){this._tf.underline=w_$B}),w_$X(0,w_$B,"underlineColor",function(){return this._tf.underlineColor},function(w_$B){this._tf.underlineColor=w_$B}),w_$l}(w_$R),w_$F=function(w_$h){function w_$l(w_$B){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,w_$l.__super.call(this),this.skin=w_$B}w_$s(w_$l,"laya.ui.ProgressBar",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._bg&&this._bg.destroy(w_$B),this._bar&&this._bar.destroy(w_$B),this._bg=this._bar=null,this.changeHandler=null},w_$B.createChildren=function(){this.addChild(this._bg=new w_$O),this.addChild(this._bar=new w_$O)},w_$B.changeValue=function(){if(this.sizeGrid){var w_$B=this.sizeGrid.split(","),w_$h=Number(w_$B[3]),w_$l=Number(w_$B[1]),w_$A=(this.width-w_$h-w_$l)*this._value;this._bar.width=w_$h+w_$l+w_$A,this._bar.visible=this._bar.width>w_$h+w_$l}else this._bar.width=this.width*this._value},w_$X(0,w_$B,"measureHeight",function(){return this._bg.height}),w_$X(0,w_$B,"skin",function(){return this._skin},function(w_$B){this._skin!=w_$B&&(this._skin=w_$B,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),w_$X(0,w_$B,"measureWidth",function(){return this._bg.width}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$R,this,"height",w_$B),this._bg.height=this._height,this._bar.height=this._height}),w_$X(0,w_$B,"bar",function(){return this._bar}),w_$X(0,w_$B,"value",function(){return this._value},function(w_$B){this._value!=w_$B&&(w_$B=1<w_$B?1:w_$B<0?0:w_$B,this._value=w_$B,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(w_$B))}),w_$X(0,w_$B,"bg",function(){return this._bg}),w_$X(0,w_$B,"sizeGrid",function(){return this._bg.sizeGrid},function(w_$B){this._bg.sizeGrid=this._bar.sizeGrid=w_$B}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$R,this,"width",w_$B),this._bg.width=this._width,this.callLater(this.changeValue)}),w_$X(0,w_$B,"dataSource",w_$h.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)||"string"==typeof w_$B?this.value=Number(w_$B):w_$$.superSet(w_$R,this,"dataSource",w_$B)}),w_$l}(w_$R),w_$c=(function(w_$B){function w_$l(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,w_$l.__super.call(this),this._tipBox=new w_$R,this._tipBox.addChild(this._tipText=new w_$o),this._tipText.x=this._tipText.y=5,this._tipText.color=w_$l.tipTextColor,this._defaultTipHandler=this._showDefaultTip,w_$$.stage.on("showtip",this,this._onStageShowTip),w_$$.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}w_$s(w_$l,"laya.ui.TipManager",w_$R);var w_$h=w_$l.prototype;w_$h._onStageHideTip=function(w_$B){w_$$.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},w_$h._onStageShowTip=function(w_$B){w_$$.timer.once(w_$l.tipDelay,this,this._showTip,[w_$B],!0)},w_$h._showTip=function(w_$B){if("string"==typeof w_$B){var w_$h=String(w_$B);Boolean(w_$h)&&this._defaultTipHandler(w_$h)}else w_$B instanceof laya.utils.Handler?w_$B.run():"function"==typeof w_$B&&w_$B.apply();w_$$.stage.on("mousemove",this,this._onStageMouseMove),w_$$.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},w_$h._onStageMouseDown=function(w_$B){this.closeAll()},w_$h._onStageMouseMove=function(w_$B){this._showToStage(this,w_$l.offsetX,w_$l.offsetY)},w_$h._showToStage=function(w_$B,w_$h,w_$l){void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0);var w_$A=w_$B.getBounds();w_$B.x=w_$$.stage.mouseX+w_$h,w_$B.y=w_$$.stage.mouseY+w_$l,w_$B.x+w_$A.width>w_$$.stage.width&&(w_$B.x-=w_$A.width+w_$h),w_$B.y+w_$A.height>w_$$.stage.height&&(w_$B.y-=w_$A.height+w_$l)},w_$h.closeAll=function(){w_$$.timer.clear(this,this._showTip),w_$$.stage.off("mousemove",this,this._onStageMouseMove),w_$$.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},w_$h.showDislayTip=function(w_$B){this.addChild(w_$B),this._showToStage(this),w_$$._currentStage.addChild(this)},w_$h._showDefaultTip=function(w_$B){this._tipText.text=w_$B;var w_$h=this._tipBox.graphics;w_$h.clear(),w_$h.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,w_$l.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),w_$$._currentStage.addChild(this)},w_$X(0,w_$h,"defaultTipHandler",function(){return this._defaultTipHandler},function(w_$B){this._defaultTipHandler=w_$B}),w_$l.offsetX=10,w_$l.offsetY=15,w_$l.tipTextColor="#ffffff",w_$l.tipBackColor="#111111",w_$l.tipDelay=200}(),function(w_$B){var w_$Q;function w_$i(){this._idMap=null,this._aniList=null,this._watchMap={},w_$i.__super.call(this)}w_$s(w_$i,"laya.ui.View",w_$M);var w_$h=w_$i.prototype;return w_$h.createView=function(w_$B){if(w_$B.animations&&!this._idMap&&(this._idMap={}),w_$i.createComp(w_$B,this,this),w_$B.animations){var w_$h,w_$l,w_$A=[],w_$n=w_$B.animations,w_$s=0,w_$X=w_$n.length;for(w_$s=0;w_$s<w_$X;w_$s++){switch(w_$h=new w_$T,w_$l=w_$n[w_$s],w_$h._setUp(this._idMap,w_$l),(this[w_$l.name]=w_$h)._setControlNode(this),w_$l.action){case 1:w_$h.play(0,!1);break;case 2:w_$h.play(0,!0)}w_$A.push(w_$h)}this._aniList=w_$A}0<this._width&&null==w_$B.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},w_$h.onEvent=function(w_$B,w_$h){},w_$h.loadUI=function(w_$B){var w_$h=w_$i.uiMap[w_$B];w_$h&&this.createView(w_$h)},w_$h.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,w_$B)},w_$h.changeData=function(w_$B){var w_$h=this._watchMap[w_$B];if(w_$h){console.log("change",w_$B);for(var w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++){w_$h[w_$l].exe(this)}}},w_$i._regs=function(){for(var w_$B in w_$i.uiClassMap)w_$V.regClass(w_$B,w_$i.uiClassMap[w_$B])},w_$i.createComp=function(w_$B,w_$h,w_$l,w_$A){if(!(w_$h=w_$h||w_$i.getCompInstance(w_$B)))return console.warn("can not create:"+w_$B.type),null;var w_$n=w_$B.child;if(w_$n)for(var w_$s=w_$h instanceof laya.ui.List,w_$X=0,w_$Z=w_$n.length;w_$X<w_$Z;w_$X++){var w_$t=w_$n[w_$X];if(!w_$h.hasOwnProperty("itemRender")||"render"!=w_$t.props.name&&"render"!==w_$t.props.renderType)if("Graphic"==w_$t.type)w_$V.addGraphicsToSprite(w_$t,w_$h);else if(w_$V.isDrawType(w_$t.type))w_$V.addGraphicToSprite(w_$t,w_$h,!0);else{if(w_$s){var w_$P=[],w_$G=w_$i.createComp(w_$t,null,w_$l,w_$P);w_$P.length&&(w_$G._$bindData=w_$P)}else w_$G=w_$i.createComp(w_$t,null,w_$l,w_$A);"Script"==w_$t.type?"owner"in w_$G?w_$G.owner=w_$h:"target"in w_$G&&(w_$G.target=w_$h):"mask"==w_$t.props.renderType||"mask"==w_$t.props.name?w_$h.mask=w_$G:w_$G instanceof laya.display.Sprite&&w_$h.addChild(w_$G)}else w_$h.itemRender=w_$t}var w_$T=w_$B.props;for(var w_$b in w_$T){var w_$Q=w_$T[w_$b];w_$i.eventDic[w_$b]?w_$Q&&w_$l&&w_$h.on(w_$b,w_$l,w_$l.onEvent,[w_$Q]):w_$i.setCompValue(w_$h,w_$b,w_$Q,w_$l,w_$A)}return w_$$.__typeof(w_$h,"laya.ui.IItem")&&w_$h.initItems(),w_$B.compId&&w_$l&&w_$l._idMap&&(w_$l._idMap[w_$B.compId]=w_$h),w_$h},w_$i.setCompValue=function(w_$B,w_$h,w_$l,w_$A,w_$n){if("string"==typeof w_$l&&-1<w_$l.indexOf("${")){if(w_$i._sheet||(w_$i._sheet=w_$V.getClass("laya.data.Table")),!w_$i._sheet)return void console.warn("Can not find class Sheet");if(w_$n)w_$n.push(w_$B,w_$h,w_$l);else if(w_$A){-1==w_$l.indexOf("].")&&(w_$l=w_$l.replace(".","[0]."));var w_$s,w_$X,w_$Z=new w_$Q(w_$B,w_$h,w_$l);w_$Z.exe(w_$A);for(var w_$t=w_$l.replace(/\[.*?\]\./g,".");null!=(w_$s=w_$i._parseWatchData.exec(w_$t));){for(var w_$P=w_$s[1];null!=(w_$X=w_$i._parseKeyWord.exec(w_$P));){var w_$G=w_$X[0],w_$T=w_$A._watchMap[w_$G]||(w_$A._watchMap[w_$G]=[]);w_$T.push(w_$Z),w_$i._sheet.I.notifer.on(w_$G,w_$A,w_$A.changeData,[w_$G])}(w_$T=w_$A._watchMap[w_$P]||(w_$A._watchMap[w_$P]=[])).push(w_$Z),w_$i._sheet.I.notifer.on(w_$P,w_$A,w_$A.changeData,[w_$P])}}}else if("var"===w_$h&&w_$A)w_$A[w_$l]=w_$B;else if("onClick"==w_$h){var w_$b=w_$$._runScript("(function(){"+w_$l+"})");w_$B.on("click",w_$A,w_$b)}else w_$B[w_$h]="true"===w_$l||"false"!==w_$l&&w_$l},w_$i.getCompInstance=function(w_$B){var w_$h,w_$l=w_$B.props?w_$B.props.runtime:null;return w_$h=w_$l?w_$i.viewClassMap[w_$l]||w_$i.uiClassMap[w_$l]||w_$$.__classmap[w_$l]:w_$i.uiClassMap[w_$B.type],w_$B.props&&w_$B.props.hasOwnProperty("renderType")&&"instance"==w_$B.props.renderType?w_$h.instance:w_$h?new w_$h:null},w_$i.regComponent=function(w_$B,w_$h){w_$i.uiClassMap[w_$B]=w_$h,w_$V.regClass(w_$B,w_$h)},w_$i.regViewRuntime=function(w_$B,w_$h){w_$i.viewClassMap[w_$B]=w_$h},w_$i.uiMap={},w_$i.viewClassMap={},w_$i._sheet=null,w_$A(w_$i,["uiClassMap",function(){return this.uiClassMap={ViewStack:w_$BB,LinkButton:w_$E,TextArea:w_$PB,ColorPicker:w_$g,Box:w_$M,Button:w_$E,CheckBox:w_$m,Clip:w_$j,ComboBox:w_$_,Component:w_$R,HScrollBar:w_$I,HSlider:w_$e,Image:w_$O,Label:w_$p,List:w_$f,Panel:w_$L,ProgressBar:w_$F,Radio:w_$D,RadioGroup:w_$ZB,ScrollBar:w_$d,Slider:w_$k,Tab:w_$tB,TextInput:w_$lB,View:w_$i,VScrollBar:w_$hB,VSlider:w_$AB,Tree:w_$r,HBox:w_$sB,VBox:w_$XB,Sprite:w_$C,Animation:w_$l,Text:w_$o,FontClip:w_$K}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),w_$i.__init$=function(){w_$i._regs(),w_$Q=function(){function w_$B(w_$B,w_$h,w_$l){this.comp=null,this.prop=null,this.value=null,this.comp=w_$B,this.prop=w_$h,this.value=w_$l}return w_$s(w_$B,""),w_$B.prototype.exe=function(w_$B){var w_$h=w_$a.getBindFun(this.value);this.comp[this.prop]=w_$h.call(this,w_$B)},w_$B}()},w_$i}()),w_$m=function(w_$B){function w_$l(w_$B,w_$h){void 0===w_$h&&(w_$h=""),w_$l.__super.call(this,w_$B,w_$h)}w_$s(w_$l,"laya.ui.CheckBox",w_$B);var w_$h=w_$l.prototype;return w_$h.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},w_$h.initialize=function(){w_$B.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},w_$X(0,w_$h,"dataSource",w_$B.prototype._$get_dataSource,function(w_$B){"boolean"==typeof(this._dataSource=w_$B)?this.selected=w_$B:"string"==typeof w_$B?this.selected="true"===w_$B:w_$$.superSet(w_$E,this,"dataSource",w_$B)}),w_$l}(w_$E),w_$Y=function(w_$B){function w_$h(){this._space=0,this._align="none",this._itemChanged=!1,w_$h.__super.call(this)}w_$s(w_$h,"laya.ui.LayoutBox",w_$M);var w_$l=w_$h.prototype;return w_$l.addChild=function(w_$B){return w_$B.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,w_$B)},w_$l.onResize=function(w_$B){this._setItemChanged()},w_$l.addChildAt=function(w_$B,w_$h){return w_$B.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,w_$B,w_$h)},w_$l.removeChild=function(w_$B){return w_$B.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,w_$B)},w_$l.removeChildAt=function(w_$B){return this.getChildAt(w_$B).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,w_$B)},w_$l.refresh=function(){this._setItemChanged()},w_$l.changeItems=function(){this._itemChanged=!1},w_$l.sortItem=function(w_$B){w_$B&&w_$B.sort(function(w_$B,w_$h){return w_$B.y-w_$h.y})},w_$l._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},w_$X(0,w_$l,"space",function(){return this._space},function(w_$B){this._space=w_$B,this._setItemChanged()}),w_$X(0,w_$l,"align",function(){return this._align},function(w_$B){this._align=w_$B,this._setItemChanged()}),w_$h}(),w_$K=function(w_$h){function w_$l(w_$B,w_$h){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,w_$l.__super.call(this),w_$B&&(this.skin=w_$B),w_$h&&(this.sheet=w_$h)}w_$s(w_$l,"laya.ui.FontClip",w_$h);var w_$B=w_$l.prototype;return w_$B.createChildren=function(){this._bitmap=new w_$N,this.on("loaded",this,this._onClipLoaded)},w_$B._onClipLoaded=function(){this.callLater(this.changeValue)},w_$B.changeValue=function(){var w_$B;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),w_$B=this._sources[0]))){var w_$h="horizontal"===this._direction;w_$h?(this._wordsW=this._valueArr.length*(w_$B.sourceWidth+this.spaceX),this._wordsH=w_$B.sourceHeight):(this._wordsW=w_$B.sourceWidth,this._wordsH=(w_$B.sourceHeight+this.spaceY)*this._valueArr.length);var w_$l=0;if(this._width)switch(this._align){case"center":w_$l=.5*(this._width-this._wordsW);break;case"right":w_$l=this._width-this._wordsW;break;default:w_$l=0}for(var w_$A=0,w_$n=this._valueArr.length;w_$A<w_$n;w_$A++){var w_$s=this._indexMap[this._valueArr.charAt(w_$A)];this.sources[w_$s]&&(w_$B=this.sources[w_$s],w_$h?this.graphics.drawTexture(w_$B,w_$l+w_$A*(w_$B.sourceWidth+this.spaceX),0,w_$B.sourceWidth,w_$B.sourceHeight):this.graphics.drawTexture(w_$B,0+w_$l,w_$A*(w_$B.sourceHeight+this.spaceY),w_$B.sourceWidth,w_$B.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),w_$h.prototype.destroy.call(this,w_$B)},w_$X(0,w_$B,"sheet",function(){return this._sheet},function(w_$B){w_$B+="";var w_$h=(this._sheet=w_$B).split(" ");this._clipX=String(w_$h[0]).length,this.clipY=w_$h.length,this._indexMap={};for(var w_$l=0;w_$l<this._clipY;w_$l++)for(var w_$A=w_$h[w_$l].split(""),w_$n=0,w_$s=w_$A.length;w_$n<w_$s;w_$n++)this._indexMap[w_$A[w_$n]]=w_$l*this._clipX+w_$n}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$j,this,"height",w_$B),this.callLater(this.changeValue)}),w_$X(0,w_$B,"direction",function(){return this._direction},function(w_$B){this._direction=w_$B,this.callLater(this.changeValue)}),w_$X(0,w_$B,"value",function(){return this._valueArr?this._valueArr:""},function(w_$B){w_$B+="",this._valueArr=w_$B,this.callLater(this.changeValue)}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$j,this,"width",w_$B),this.callLater(this.changeValue)}),w_$X(0,w_$B,"spaceX",function(){return this._spaceX},function(w_$B){this._spaceX=w_$B,"horizontal"===this._direction&&this.callLater(this.changeValue)}),w_$X(0,w_$B,"spaceY",function(){return this._spaceY},function(w_$B){this._spaceY=w_$B,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),w_$X(0,w_$B,"align",function(){return this._align},function(w_$B){this._align=w_$B,this.callLater(this.changeValue)}),w_$X(0,w_$B,"measureWidth",function(){return this._wordsW}),w_$X(0,w_$B,"measureHeight",function(){return this._wordsH}),w_$l}(w_$j),w_$f=function(w_$B){function w_$h(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new w_$i,w_$h.__super.call(this)}w_$s(w_$h,"laya.ui.List",w_$B);var w_$l=w_$h.prototype;return w_$$.imps(w_$l,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),w_$l.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this._content&&this._content.destroy(w_$B),this._scrollBar&&this._scrollBar.destroy(w_$B),laya.ui.Component.prototype.destroy.call(this,w_$B),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},w_$l.createChildren=function(){this.addChild(this._content=new w_$M)},w_$l.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=w_$$.superGet(w_$M,this,"cacheAs")),w_$$.superSet(w_$M,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},w_$l.onScrollEnd=function(){w_$$.superSet(w_$M,this,"cacheAs",this._$P.cacheAs)},w_$l._removePreScrollBar=function(){var w_$B=this.removeChildByName("scrollBar");w_$B&&w_$B.destroy(!0)},w_$l.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var w_$B=this._getOneCell(),w_$h=w_$B.width+this._spaceX||1,w_$l=w_$B.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/w_$h):Math.ceil(this._width/w_$h)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/w_$l):Math.round(this._height/w_$l));var w_$A=this._width?this._width:w_$h*this.repeatX-this._spaceX,w_$n=this._height?this._height:w_$l*this.repeatY-this._spaceY;this._cellSize=this._isVertical?w_$l:w_$h,this._cellOffset=this._isVertical?w_$l*Math.max(this._repeatY2,this._repeatY)-w_$n-this._spaceY:w_$h*Math.max(this._repeatX2,this._repeatX)-w_$A-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=w_$n:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=w_$A),this.setContentSize(w_$A,w_$n);var w_$s=this._isVertical?this.repeatX:this.repeatY,w_$X=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,w_$s,w_$X),this._createdLine=w_$X,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},w_$l._getOneCell=function(){if(0===this._cells.length){var w_$B=this.createItem();if(this._offset.setTo(w_$B.x,w_$B.y),this.cacheContent)return w_$B;this._cells.push(w_$B)}return this._cells[0]},w_$l._createItems=function(w_$B,w_$h,w_$l){var w_$A=this._content,w_$n=this._getOneCell(),w_$s=w_$n.width+this._spaceX,w_$X=w_$n.height+this._spaceY;if(this.cacheContent){var w_$Z=new w_$M;w_$Z.cacheAsBitmap=!0,w_$Z.pos((this._isVertical?0:w_$B)*w_$s,(this._isVertical?w_$B:0)*w_$X),this._content.addChild(w_$Z),this._content.optimizeScrollRect=!0,w_$A=w_$Z}else{for(var w_$t=[],w_$P=this._cells.length-1;-1<w_$P;w_$P--){var w_$G=this._cells[w_$P];w_$G.removeSelf(),w_$t.push(w_$G)}this._cells.length=0}for(var w_$T=w_$B;w_$T<w_$l;w_$T++)for(var w_$b=0;w_$b<w_$h;w_$b++)(w_$n=w_$t&&w_$t.length?w_$t.pop():this.createItem()).x=(this._isVertical?w_$b:w_$T)*w_$s-w_$A.x,w_$n.y=(this._isVertical?w_$T:w_$b)*w_$X-w_$A.y,w_$n.name="item"+(w_$T*w_$h+w_$b),w_$A.addChild(w_$n),this.addCell(w_$n)},w_$l.createItem=function(){var w_$B=[];if("function"==typeof this._itemRender)var w_$h=new this._itemRender;else w_$h=w_$c.createComp(this._itemRender,null,null,w_$B);if(0==w_$B.length&&w_$h._watchMap){var w_$l=w_$h._watchMap;for(var w_$A in w_$l)for(var w_$n=w_$l[w_$A],w_$s=0;w_$s<w_$n.length;w_$s++){var w_$X=w_$n[w_$s];w_$B.push(w_$X.comp,w_$X.prop,w_$X.value)}}return w_$B.length&&(w_$h._$bindData=w_$B),w_$h},w_$l.addCell=function(w_$B){w_$B.on("click",this,this.onCellMouse),w_$B.on("rightclick",this,this.onCellMouse),w_$B.on("mouseover",this,this.onCellMouse),w_$B.on("mouseout",this,this.onCellMouse),w_$B.on("mousedown",this,this.onCellMouse),w_$B.on("mouseup",this,this.onCellMouse),this._cells.push(w_$B)},w_$l.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var w_$B=0,w_$h=w_$B=0;w_$h<1e4;w_$h++){var w_$l=this.getChildByName("item"+w_$h);if(!w_$l)break;this.addCell(w_$l),w_$B++}this.repeatY=w_$B}},w_$l.setContentSize=function(w_$B,w_$h){this._content.width=w_$B,this._content.height=w_$h,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new w_$J),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,w_$B,w_$h),this._content.scrollRect=this._content.scrollRect),this.event("resize")},w_$l.onCellMouse=function(w_$B){"mousedown"===w_$B.type&&(this._isMoved=!1);var w_$h=w_$B.currentTarget,w_$l=this._startIndex+this._cells.indexOf(w_$h);w_$l<0||("click"===w_$B.type||"rightclick"===w_$B.type?this.selectEnable&&!this._isMoved?this.selectedIndex=w_$l:this.changeCellState(w_$h,!0,0):"mouseover"!==w_$B.type&&"mouseout"!==w_$B.type||this._selectedIndex===w_$l||this.changeCellState(w_$h,"mouseover"===w_$B.type,0),this.mouseHandler&&this.mouseHandler.runWith([w_$B,w_$l]))},w_$l.changeCellState=function(w_$B,w_$h,w_$l){var w_$A=w_$B.getChildByName("selectBox");w_$A&&(this.selectEnable=!0,w_$A.visible=w_$h,w_$A.index=w_$l)},w_$l.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},w_$l.onScrollBarChange=function(w_$B){this.runCallLater(this.changeCells);var w_$h=this._scrollBar.value,w_$l=this._isVertical?this.repeatX:this.repeatY,w_$A=this._isVertical?this.repeatY:this.repeatX,w_$n=Math.floor(w_$h/this._cellSize);if(this.cacheContent)w_$X=w_$A+1,this._createdLine-w_$n<w_$X&&(this._createItems(this._createdLine,w_$l,this._createdLine+w_$X),this.renderItems(this._createdLine*w_$l,0),this._createdLine+=w_$X);else{var w_$s=w_$n*w_$l,w_$X=0;if(w_$s>this._startIndex){w_$X=w_$s-this._startIndex;var w_$Z=!0,w_$t=this._startIndex+w_$l*(w_$A+1);this._isMoved=!0}else w_$s<this._startIndex&&(w_$X=this._startIndex-w_$s,w_$Z=!1,w_$t=this._startIndex-1,this._isMoved=!0);for(var w_$P=0;w_$P<w_$X;w_$P++){if(w_$Z){var w_$G=this._cells.shift();this._cells[this._cells.length]=w_$G;var w_$T=w_$t+w_$P}else w_$G=this._cells.pop(),this._cells.unshift(w_$G),w_$T=w_$t-w_$P;var w_$b=Math.floor(w_$T/w_$l)*this._cellSize;this._isVertical?w_$G.y=w_$b:w_$G.x=w_$b,this.renderItem(w_$G,w_$T)}this._startIndex=w_$s,this.changeSelectStatus()}var w_$Q=this._content.scrollRect;this._isVertical?(w_$Q.y=w_$h-this._offset.y,w_$Q.x=-this._offset.x):(w_$Q.y=-this._offset.y,w_$Q.x=w_$h-this._offset.x),this._content.scrollRect=w_$Q},w_$l.posCell=function(w_$B,w_$h){if(this._scrollBar){var w_$l=this._isVertical?this.repeatX:this.repeatY,w_$A=(this._isVertical?this.repeatY:this.repeatX,Math.floor(w_$h/w_$l)*this._cellSize);this._isVertical?w_$B.y=w_$A:w_$B.x=w_$A}},w_$l.changeSelectStatus=function(){for(var w_$B=0,w_$h=this._cells.length;w_$B<w_$h;w_$B++)this.changeCellState(this._cells[w_$B],this._selectedIndex===this._startIndex+w_$B,1)},w_$l.renderItems=function(w_$B,w_$h){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0);for(var w_$l=w_$B,w_$A=w_$h||this._cells.length;w_$l<w_$A;w_$l++)this.renderItem(this._cells[w_$l],this._startIndex+w_$l);this.changeSelectStatus()},w_$l.renderItem=function(w_$B,w_$h){this._array&&0<=w_$h&&w_$h<this._array.length?(w_$B.visible=!0,w_$B._$bindData?(w_$B._dataSource=this._array[w_$h],this._bindData(w_$B,this._array[w_$h])):w_$B.dataSource=this._array[w_$h],this.cacheContent||this.posCell(w_$B,w_$h),this.hasListener("render")&&this.event("render",[w_$B,w_$h]),this.renderHandler&&this.renderHandler.runWith([w_$B,w_$h])):(w_$B.visible=!1,w_$B.dataSource=null)},w_$l._bindData=function(w_$B,w_$h){for(var w_$l=w_$B._$bindData,w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$A++){var w_$s=w_$l[w_$A++],w_$X=w_$l[w_$A++],w_$Z=w_$l[w_$A],w_$t=w_$a.getBindFun(w_$Z);w_$s[w_$X]=w_$t.call(this,w_$h)}},w_$l.refresh=function(){this.array=this._array},w_$l.getItem=function(w_$B){return-1<w_$B&&w_$B<this._array.length?this._array[w_$B]:null},w_$l.changeItem=function(w_$B,w_$h){-1<w_$B&&w_$B<this._array.length&&(this._array[w_$B]=w_$h,w_$B>=this._startIndex&&w_$B<this._startIndex+this._cells.length&&this.renderItem(this.getCell(w_$B),w_$B))},w_$l.setItem=function(w_$B,w_$h){this.changeItem(w_$B,w_$h)},w_$l.addItem=function(w_$B){this._array.push(w_$B),this.array=this._array},w_$l.addItemAt=function(w_$B,w_$h){this._array.splice(w_$h,0,w_$B),this.array=this._array},w_$l.deleteItem=function(w_$B){this._array.splice(w_$B,1),this.array=this._array},w_$l.getCell=function(w_$B){return this.runCallLater(this.changeCells),-1<w_$B&&this._cells?this._cells[(w_$B-this._startIndex)%this._cells.length]:null},w_$l.scrollTo=function(w_$B){if(this._scrollBar){var w_$h=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(w_$B/w_$h)*this._cellSize}else this.startIndex=w_$B},w_$l.tweenTo=function(w_$B,w_$h,w_$l){if(void 0===w_$h&&(w_$h=200),this._scrollBar){var w_$A=this._isVertical?this.repeatX:this.repeatY;w_$v.to(this._scrollBar,{value:Math.floor(w_$B/w_$A)*this._cellSize},w_$h,null,w_$l,0,!0)}else this.startIndex=w_$B,w_$l&&w_$l.run()},w_$l._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},w_$l.commitMeasure=function(){this.runCallLater(this.changeCells)},w_$X(0,w_$l,"cacheAs",w_$B.prototype._$get_cacheAs,function(w_$B){w_$$.superSet(w_$M,this,"cacheAs",w_$B),this._scrollBar&&(this._$P.cacheAs=null,"none"!==w_$B?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),w_$X(0,w_$l,"content",function(){return this._content}),w_$X(0,w_$l,"height",w_$B.prototype._$get_height,function(w_$B){w_$B!=this._height&&(w_$$.superSet(w_$M,this,"height",w_$B),this._setCellChanged())}),w_$X(0,w_$l,"itemRender",function(){return this._itemRender},function(w_$B){if(this._itemRender!=w_$B){this._itemRender=w_$B;for(var w_$h=this._cells.length-1;-1<w_$h;w_$h--)this._cells[w_$h].destroy();this._cells.length=0,this._setCellChanged()}}),w_$X(0,w_$l,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(w_$B){this._removePreScrollBar();var w_$h=new w_$hB;w_$h.name="scrollBar",w_$h.right=0,w_$B&&" "!=w_$B&&(w_$h.skin=w_$B),this.scrollBar=w_$h,this.addChild(w_$h),this._setCellChanged()}),w_$X(0,w_$l,"page",function(){return this._page},function(w_$B){this._page=w_$B,this._array&&(this._page=0<w_$B?w_$B:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),w_$X(0,w_$l,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(w_$B){this._removePreScrollBar();var w_$h=new w_$I;w_$h.name="scrollBar",w_$h.bottom=0,w_$B&&" "!=w_$B&&(w_$h.skin=w_$B),this.scrollBar=w_$h,this.addChild(w_$h),this._setCellChanged()}),w_$X(0,w_$l,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(w_$B){this._repeatX=w_$B,this._setCellChanged()}),w_$X(0,w_$l,"scrollBar",function(){return this._scrollBar},function(w_$B){this._scrollBar!=w_$B&&(this._scrollBar=w_$B)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),w_$X(0,w_$l,"width",w_$B.prototype._$get_width,function(w_$B){w_$B!=this._width&&(w_$$.superSet(w_$M,this,"width",w_$B),this._setCellChanged())}),w_$X(0,w_$l,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(w_$B){this._repeatY=w_$B,this._setCellChanged()}),w_$X(0,w_$l,"spaceX",function(){return this._spaceX},function(w_$B){this._spaceX=w_$B,this._setCellChanged()}),w_$X(0,w_$l,"spaceY",function(){return this._spaceY},function(w_$B){this._spaceY=w_$B,this._setCellChanged()}),w_$X(0,w_$l,"selectedIndex",function(){return this._selectedIndex},function(w_$B){this._selectedIndex!=w_$B&&(this._selectedIndex=w_$B,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(w_$B),this.startIndex=this._startIndex)}),w_$X(0,w_$l,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(w_$B){this.selectedIndex=this._array.indexOf(w_$B)}),w_$X(0,w_$l,"length",function(){return this._array?this._array.length:0}),w_$X(0,w_$l,"selection",function(){return this.getCell(this._selectedIndex)},function(w_$B){this.selectedIndex=this._startIndex+this._cells.indexOf(w_$B)}),w_$X(0,w_$l,"startIndex",function(){return this._startIndex},function(w_$B){this._startIndex=0<w_$B?w_$B:0,this.callLater(this.renderItems)}),w_$X(0,w_$l,"array",function(){return this._array},function(w_$B){this.runCallLater(this.changeCells),this._array=w_$B||[];var w_$h=this._array.length;if(this.totalPage=Math.ceil(w_$h/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<w_$h?this._selectedIndex:w_$h-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var w_$l=this._isVertical?this.repeatX:this.repeatY,w_$A=this._isVertical?this.repeatY:this.repeatX,w_$n=Math.ceil(w_$h/w_$l);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=w_$A/w_$n,this._scrollBar.setScroll(0,(w_$n-w_$A)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),w_$X(0,w_$l,"dataSource",w_$B.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)&&Math.floor(w_$B)==w_$B||"string"==typeof w_$B?this.selectedIndex=parseInt(w_$B):w_$B instanceof Array?this.array=w_$B:w_$$.superSet(w_$M,this,"dataSource",w_$B)}),w_$X(0,w_$l,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),w_$h}(w_$M),w_$I=function(w_$B){function w_$h(){w_$h.__super.call(this)}return w_$s(w_$h,"laya.ui.HScrollBar",w_$B),w_$h.prototype.initialize=function(){w_$B.prototype.initialize.call(this),this.slider.isVertical=!1},w_$h}(w_$d),w_$L=function(w_$B){function w_$h(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,w_$h.__super.call(this),this.width=this.height=100}w_$s(w_$h,"laya.ui.Panel",w_$B);var w_$l=w_$h.prototype;return w_$l.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),laya.ui.Component.prototype.destroy.call(this,w_$B),this._content&&this._content.destroy(w_$B),this._vScrollBar&&this._vScrollBar.destroy(w_$B),this._hScrollBar&&this._hScrollBar.destroy(w_$B),this._vScrollBar=null,this._hScrollBar=null,this._content=null},w_$l.destroyChildren=function(){this._content.destroyChildren()},w_$l.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new w_$M)},w_$l.addChild=function(w_$B){return w_$B.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(w_$B)},w_$l.onResize=function(){this._setScrollChanged()},w_$l.addChildAt=function(w_$B,w_$h){return w_$B.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(w_$B,w_$h)},w_$l.removeChild=function(w_$B){return w_$B.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(w_$B)},w_$l.removeChildAt=function(w_$B){return this.getChildAt(w_$B).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(w_$B)},w_$l.removeChildren=function(w_$B,w_$h){return void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=2147483647),this._content.removeChildren(w_$B,w_$h),this._setScrollChanged(),this},w_$l.getChildAt=function(w_$B){return this._content.getChildAt(w_$B)},w_$l.getChildByName=function(w_$B){return this._content.getChildByName(w_$B)},w_$l.getChildIndex=function(w_$B){return this._content.getChildIndex(w_$B)},w_$l.changeScroll=function(){this._scrollChanged=!1;var w_$B=this.contentWidth||1,w_$h=this.contentHeight||1,w_$l=this._vScrollBar,w_$A=this._hScrollBar,w_$n=w_$l&&w_$h>this._height,w_$s=w_$A&&w_$B>this._width,w_$X=w_$n?this._width-w_$l.width:this._width,w_$Z=w_$s?this._height-w_$A.height:this._height;w_$l&&(w_$l.x=this._width-w_$l.width,w_$l.y=0,w_$l.height=this._height-(w_$s?w_$A.height:0),w_$l.scrollSize=Math.max(.033*this._height,1),w_$l.thumbPercent=w_$Z/w_$h,w_$l.setScroll(0,w_$h-w_$Z,w_$l.value)),w_$A&&(w_$A.x=0,w_$A.y=this._height-w_$A.height,w_$A.width=this._width-(w_$n?w_$l.width:0),w_$A.scrollSize=Math.max(.033*this._width,1),w_$A.thumbPercent=w_$X/w_$B,w_$A.setScroll(0,w_$B-w_$X,w_$A.value))},w_$l.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},w_$l.setContentSize=function(w_$B,w_$h){var w_$l=this._content;w_$l.width=w_$B,w_$l.height=w_$h,w_$l.scrollRect||(w_$l.scrollRect=new w_$J),w_$l.scrollRect.setTo(0,0,w_$B,w_$h),w_$l.scrollRect=w_$l.scrollRect},w_$l.onScrollBarChange=function(w_$B){var w_$h=this._content.scrollRect;if(w_$h){var w_$l=Math.round(w_$B.value);w_$B.isVertical?w_$h.y=w_$l:w_$h.x=w_$l,this._content.scrollRect=w_$h}},w_$l.scrollTo=function(w_$B,w_$h){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),this.vScrollBar&&(this.vScrollBar.value=w_$h),this.hScrollBar&&(this.hScrollBar.value=w_$B)},w_$l.refresh=function(){this.changeScroll()},w_$l.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=w_$$.superGet(w_$M,this,"cacheAs")),w_$$.superSet(w_$M,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},w_$l.onScrollEnd=function(){w_$$.superSet(w_$M,this,"cacheAs",this._$P.cacheAs)},w_$l._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},w_$X(0,w_$l,"numChildren",function(){return this._content.numChildren}),w_$X(0,w_$l,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(w_$B){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new w_$I),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=w_$B}),w_$X(0,w_$l,"contentWidth",function(){for(var w_$B=0,w_$h=this._content.numChildren-1;-1<w_$h;w_$h--){var w_$l=this._content.getChildAt(w_$h);w_$B=Math.max(w_$l.x+w_$l.width*w_$l.scaleX,w_$B)}return w_$B}),w_$X(0,w_$l,"contentHeight",function(){for(var w_$B=0,w_$h=this._content.numChildren-1;-1<w_$h;w_$h--){var w_$l=this._content.getChildAt(w_$h);w_$B=Math.max(w_$l.y+w_$l.height*w_$l.scaleY,w_$B)}return w_$B}),w_$X(0,w_$l,"width",w_$B.prototype._$get_width,function(w_$B){w_$$.superSet(w_$M,this,"width",w_$B),this._setScrollChanged()}),w_$X(0,w_$l,"hScrollBar",function(){return this._hScrollBar}),w_$X(0,w_$l,"content",function(){return this._content}),w_$X(0,w_$l,"height",w_$B.prototype._$get_height,function(w_$B){w_$$.superSet(w_$M,this,"height",w_$B),this._setScrollChanged()}),w_$X(0,w_$l,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(w_$B){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new w_$hB),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=w_$B}),w_$X(0,w_$l,"vScrollBar",function(){return this._vScrollBar}),w_$X(0,w_$l,"cacheAs",w_$B.prototype._$get_cacheAs,function(w_$B){w_$$.superSet(w_$M,this,"cacheAs",w_$B),this._$P.cacheAs=null,"none"!==w_$B?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),w_$h}(w_$M),w_$e=function(w_$B){function w_$h(w_$B){w_$h.__super.call(this,w_$B),this.isVertical=!1}return w_$s(w_$h,"laya.ui.HSlider",w_$k),w_$h}(),w_$q=function(w_$B){function w_$l(w_$B,w_$h){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,w_$l.__super.call(this),this.skin=w_$h,this.labels=w_$B}w_$s(w_$l,"laya.ui.UIGroup",w_$B);var w_$h=w_$l.prototype;return w_$$.imps(w_$h,{"laya.ui.IItem":!0}),w_$h.preinitialize=function(){this.mouseEnabled=!0},w_$h.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),laya.ui.Component.prototype.destroy.call(this,w_$B),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},w_$h.addItem=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0);var w_$l=w_$B,w_$A=this._items.length;if(w_$l.name="item"+w_$A,this.addChild(w_$l),this.initItems(),w_$h&&0<w_$A){var w_$n=this._items[w_$A-1];"horizontal"==this._direction?w_$l.x=w_$n.x+w_$n.width+this._space:w_$l.y=w_$n.y+w_$n.height+this._space}else w_$h&&(w_$l.x=0,w_$l.y=0);return w_$A},w_$h.delItem=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0);var w_$l=this._items.indexOf(w_$B);if(-1!=w_$l){var w_$A=w_$B;this.removeChild(w_$A);for(var w_$n=w_$l+1,w_$s=this._items.length;w_$n<w_$s;w_$n++){var w_$X=this._items[w_$n];w_$X.name="item"+(w_$n-1),w_$h&&("horizontal"==this._direction?w_$X.x-=w_$A.width+this._space:w_$X.y-=w_$A.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var w_$Z;w_$Z=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=w_$Z}}},w_$h.initItems=function(){this._items||(this._items=[]);for(var w_$B=this._items.length=0;w_$B<1e4;w_$B++){var w_$h=this.getChildByName("item"+w_$B);if(null==w_$h)break;this._items.push(w_$h),w_$h.selected=w_$B===this._selectedIndex,w_$h.clickHandler=w_$b.create(this,this.itemClick,[w_$B],!1)}},w_$h.itemClick=function(w_$B){this.selectedIndex=w_$B},w_$h.setSelect=function(w_$B,w_$h){this._items&&-1<w_$B&&w_$B<this._items.length&&(this._items[w_$B].selected=w_$h)},w_$h.createItem=function(w_$B,w_$h){return null},w_$h.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var w_$B=0,w_$h=0,w_$l=this._items.length;w_$h<w_$l;w_$h++){var w_$A=this._items[w_$h];this._skin&&(w_$A.skin=this._skin),this._labelColors&&(w_$A.labelColors=this._labelColors),this._labelSize&&(w_$A.labelSize=this._labelSize),this._labelStroke&&(w_$A.labelStroke=this._labelStroke),this._labelStrokeColor&&(w_$A.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(w_$A.strokeColors=this._strokeColors),this._labelBold&&(w_$A.labelBold=this._labelBold),this._labelPadding&&(w_$A.labelPadding=this._labelPadding),this._labelAlign&&(w_$A.labelAlign=this._labelAlign),this._stateNum&&(w_$A.stateNum=this._stateNum),this._labelFont&&(w_$A.labelFont=this._labelFont),"horizontal"===this._direction?(w_$A.y=0,w_$A.x=w_$B,w_$B+=w_$A.width+this._space):(w_$A.x=0,w_$A.y=w_$B,w_$B+=w_$A.height+this._space)}this.changeSize()},w_$h.commitMeasure=function(){this.runCallLater(this.changeLabels)},w_$h._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},w_$X(0,w_$h,"labelStrokeColor",function(){return this._labelStrokeColor},function(w_$B){this._labelStrokeColor!=w_$B&&(this._labelStrokeColor=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"skin",function(){return this._skin},function(w_$B){this._skin!=w_$B&&(this._skin=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"selectedIndex",function(){return this._selectedIndex},function(w_$B){this._selectedIndex!=w_$B&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=w_$B,this.setSelect(w_$B,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),w_$X(0,w_$h,"labels",function(){return this._labels},function(w_$B){if(this._labels!=w_$B){if(this._labels=w_$B,this.removeChildren(),this._setLabelChanged(),this._labels)for(var w_$h=this._labels.split(","),w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++){var w_$n=this.createItem(this._skin,w_$h[w_$l]);w_$n.name="item"+w_$l,this.addChild(w_$n)}this.initItems()}}),w_$X(0,w_$h,"strokeColors",function(){return this._strokeColors},function(w_$B){this._strokeColors!=w_$B&&(this._strokeColors=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"labelColors",function(){return this._labelColors},function(w_$B){this._labelColors!=w_$B&&(this._labelColors=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"labelStroke",function(){return this._labelStroke},function(w_$B){this._labelStroke!=w_$B&&(this._labelStroke=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"labelSize",function(){return this._labelSize},function(w_$B){this._labelSize!=w_$B&&(this._labelSize=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"stateNum",function(){return this._stateNum},function(w_$B){this._stateNum!=w_$B&&(this._stateNum=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"labelBold",function(){return this._labelBold},function(w_$B){this._labelBold!=w_$B&&(this._labelBold=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"labelFont",function(){return this._labelFont},function(w_$B){this._labelFont!=w_$B&&(this._labelFont=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"labelPadding",function(){return this._labelPadding},function(w_$B){this._labelPadding!=w_$B&&(this._labelPadding=w_$B,this._setLabelChanged())}),w_$X(0,w_$h,"direction",function(){return this._direction},function(w_$B){this._direction=w_$B,this._setLabelChanged()}),w_$X(0,w_$h,"space",function(){return this._space},function(w_$B){this._space=w_$B,this._setLabelChanged()}),w_$X(0,w_$h,"items",function(){return this._items}),w_$X(0,w_$h,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(w_$B){this.selectedIndex=this._items.indexOf(w_$B)}),w_$X(0,w_$h,"dataSource",w_$B.prototype._$get_dataSource,function(w_$B){"number"==typeof(this._dataSource=w_$B)&&Math.floor(w_$B)==w_$B||"string"==typeof w_$B?this.selectedIndex=parseInt(w_$B):w_$B instanceof Array?this.labels=w_$B.join(","):w_$$.superSet(w_$M,this,"dataSource",w_$B)}),w_$l}(w_$M),w_$D=function(w_$h){function w_$l(w_$B,w_$h){this._value=null,void 0===w_$h&&(w_$h=""),w_$l.__super.call(this,w_$B,w_$h)}w_$s(w_$l,"laya.ui.Radio",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._value=null},w_$B.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},w_$B.initialize=function(){w_$h.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},w_$B.onClick=function(w_$B){this.selected=!0},w_$X(0,w_$B,"value",function(){return null!=this._value?this._value:this.label},function(w_$B){this._value=w_$B}),w_$l}(w_$E),w_$r=function(w_$B){function w_$h(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,w_$h.__super.call(this),this.width=this.height=200}w_$s(w_$h,"laya.ui.Tree",w_$B);var w_$l=w_$h.prototype;return w_$$.imps(w_$l,{"laya.ui.IRender":!0}),w_$l.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),laya.ui.Component.prototype.destroy.call(this,w_$B),this._list&&this._list.destroy(w_$B),this._list=null,this._source=null,this._renderHandler=null},w_$l.createChildren=function(){this.addChild(this._list=new w_$f),this._list.renderHandler=w_$b.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},w_$l.onListChange=function(w_$B){this.event("change")},w_$l.getArray=function(){var w_$B,w_$h=[];for(var w_$l in this._source)w_$B=this._source[w_$l],this.getParentOpenStatus(w_$B)&&(w_$B.x=this._spaceLeft*this.getDepth(w_$B),w_$h.push(w_$B));return w_$h},w_$l.getDepth=function(w_$B,w_$h){return void 0===w_$h&&(w_$h=0),null==w_$B.nodeParent?w_$h:this.getDepth(w_$B.nodeParent,w_$h+1)},w_$l.getParentOpenStatus=function(w_$B){var w_$h=w_$B.nodeParent;return null==w_$h||!!w_$h.isOpen&&(null==w_$h.nodeParent||this.getParentOpenStatus(w_$h))},w_$l.renderItem=function(w_$B,w_$h){var w_$l=w_$B.dataSource;if(w_$l){w_$B.left=w_$l.x;var w_$A=w_$B.getChildByName("arrow");w_$A&&(w_$l.hasChild?(w_$A.visible=!0,w_$A.index=w_$l.isOpen?1:0,w_$A.tag=w_$h,w_$A.off("click",this,this.onArrowClick),w_$A.on("click",this,this.onArrowClick)):w_$A.visible=!1);var w_$n=w_$B.getChildByName("folder");w_$n&&(2==w_$n.clipY?w_$n.index=w_$l.isDirectory?0:1:w_$n.index=w_$l.isDirectory?w_$l.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([w_$B,w_$h])}},w_$l.onArrowClick=function(w_$B){var w_$h=w_$B.currentTarget.tag;this._list.array[w_$h].isOpen=!this._list.array[w_$h].isOpen,this.event("open"),this._list.array=this.getArray()},w_$l.setItemState=function(w_$B,w_$h){this._list.array[w_$B]&&(this._list.array[w_$B].isOpen=w_$h,this._list.array=this.getArray())},w_$l.fresh=function(){this._list.array=this.getArray(),this.repaint()},w_$l.parseXml=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s=w_$B.childNodes,w_$X=w_$s.length;if(!w_$A){w_$n={};var w_$Z,w_$t=w_$B.attributes;for(var w_$P in w_$t){var w_$G=(w_$Z=w_$t[w_$P]).nodeName,w_$T=w_$Z.nodeValue;w_$n[w_$G]="true"==w_$T||"false"!=w_$T&&w_$T}w_$n.nodeParent=w_$l,0<w_$X&&(w_$n.isDirectory=!0),w_$n.hasChild=0<w_$X,w_$h.push(w_$n)}for(var w_$b=0;w_$b<w_$X;w_$b++){var w_$Q=w_$s[w_$b];this.parseXml(w_$Q,w_$h,w_$n,!1)}},w_$l.parseOpenStatus=function(w_$B,w_$h){for(var w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++){var w_$n=w_$h[w_$l];if(w_$n.isDirectory)for(var w_$s=0,w_$X=w_$B.length;w_$s<w_$X;w_$s++){var w_$Z=w_$B[w_$s];if(w_$Z.isDirectory&&this.isSameParent(w_$Z,w_$n)&&w_$n.label==w_$Z.label){w_$n.isOpen=w_$Z.isOpen;break}}}},w_$l.isSameParent=function(w_$B,w_$h){return null==w_$B.nodeParent&&null==w_$h.nodeParent||null!=w_$B.nodeParent&&null!=w_$h.nodeParent&&(w_$B.nodeParent.label==w_$h.nodeParent.label&&this.isSameParent(w_$B.nodeParent,w_$h.nodeParent))},w_$l.filter=function(w_$B){if(Boolean(w_$B)){var w_$h=[];this.getFilterSource(this._source,w_$h,w_$B),this._list.array=w_$h}else this._list.array=this.getArray()},w_$l.getFilterSource=function(w_$B,w_$h,w_$l){var w_$A;for(var w_$n in w_$l=w_$l.toLocaleLowerCase(),w_$B)!(w_$A=w_$B[w_$n]).isDirectory&&-1<String(w_$A.label).toLowerCase().indexOf(w_$l)&&(w_$A.x=0,w_$h.push(w_$A)),w_$A.child&&0<w_$A.child.length&&this.getFilterSource(w_$A.child,w_$h,w_$l)},w_$X(0,w_$l,"spaceBottom",function(){return this._list.spaceY},function(w_$B){this._list.spaceY=w_$B}),w_$X(0,w_$l,"keepStatus",function(){return this._keepStatus},function(w_$B){this._keepStatus=w_$B}),w_$X(0,w_$l,"itemRender",function(){return this._list.itemRender},function(w_$B){this._list.itemRender=w_$B}),w_$X(0,w_$l,"array",function(){return this._list.array},function(w_$B){this._keepStatus&&this._list.array&&w_$B&&this.parseOpenStatus(this._list.array,w_$B),this._source=w_$B,this._list.array=this.getArray()}),w_$X(0,w_$l,"mouseHandler",function(){return this._list.mouseHandler},function(w_$B){this._list.mouseHandler=w_$B}),w_$X(0,w_$l,"dataSource",w_$B.prototype._$get_dataSource,function(w_$B){this._dataSource=w_$B,w_$$.superSet(w_$M,this,"dataSource",w_$B)}),w_$X(0,w_$l,"source",function(){return this._source}),w_$X(0,w_$l,"scrollBar",function(){return this._list.scrollBar}),w_$X(0,w_$l,"list",function(){return this._list}),w_$X(0,w_$l,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(w_$B){this._list.vScrollBarSkin=w_$B}),w_$X(0,w_$l,"renderHandler",function(){return this._renderHandler},function(w_$B){this._renderHandler=w_$B}),w_$X(0,w_$l,"selectedIndex",function(){return this._list.selectedIndex},function(w_$B){this._list.selectedIndex=w_$B}),w_$X(0,w_$l,"spaceLeft",function(){return this._spaceLeft},function(w_$B){this._spaceLeft=w_$B}),w_$X(0,w_$l,"selectedItem",function(){return this._list.selectedItem},function(w_$B){this._list.selectedItem=w_$B}),w_$X(0,w_$l,"width",w_$B.prototype._$get_width,function(w_$B){w_$$.superSet(w_$M,this,"width",w_$B),this._list.width=w_$B}),w_$X(0,w_$l,"height",w_$B.prototype._$get_height,function(w_$B){w_$$.superSet(w_$M,this,"height",w_$B),this._list.height=w_$B}),w_$X(0,w_$l,"xml",null,function(w_$B){var w_$h=[];this.parseXml(w_$B.childNodes[0],w_$h,null,!0),this.array=w_$h}),w_$X(0,w_$l,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),w_$h}(w_$M),w_$BB=function(w_$B){function w_$h(){this._items=null,this._selectedIndex=0,w_$h.__super.call(this),this._setIndexHandler=w_$b.create(this,this.setIndex,null,!1)}w_$s(w_$h,"laya.ui.ViewStack",w_$B);var w_$l=w_$h.prototype;return w_$$.imps(w_$l,{"laya.ui.IItem":!0}),w_$l.setItems=function(w_$B){this.removeChildren();for(var w_$h=0,w_$l=0,w_$A=w_$B.length;w_$l<w_$A;w_$l++){var w_$n=w_$B[w_$l];w_$n&&(w_$n.name="item"+w_$h,this.addChild(w_$n),w_$h++)}this.initItems()},w_$l.addItem=function(w_$B){w_$B.name="item"+this._items.length,this.addChild(w_$B),this.initItems()},w_$l.initItems=function(){this._items=[];for(var w_$B=0;w_$B<1e4;w_$B++){var w_$h=this.getChildByName("item"+w_$B);if(null==w_$h)break;this._items.push(w_$h),w_$h.visible=w_$B==this._selectedIndex}},w_$l.setSelect=function(w_$B,w_$h){this._items&&-1<w_$B&&w_$B<this._items.length&&(this._items[w_$B].visible=w_$h)},w_$l.setIndex=function(w_$B){this.selectedIndex=w_$B},w_$X(0,w_$l,"dataSource",w_$B.prototype._$get_dataSource,function(w_$B){if("number"==typeof(this._dataSource=w_$B)&&Math.floor(w_$B)==w_$B||"string"==typeof w_$B)this.selectedIndex=parseInt(w_$B);else for(var w_$h in this._dataSource)this.hasOwnProperty(w_$h)&&(this[w_$h]=this._dataSource[w_$h])}),w_$X(0,w_$l,"selectedIndex",function(){return this._selectedIndex},function(w_$B){this._selectedIndex!=w_$B&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=w_$B,this.setSelect(this._selectedIndex,!0))}),w_$X(0,w_$l,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(w_$B){this.selectedIndex=this._items.indexOf(w_$B)}),w_$X(0,w_$l,"items",function(){return this._items}),w_$X(0,w_$l,"setIndexHandler",function(){return this._setIndexHandler},function(w_$B){this._setIndexHandler=w_$B}),w_$h}(w_$M),w_$hB=function(w_$B){function w_$h(){w_$h.__super.call(this)}return w_$s(w_$h,"laya.ui.VScrollBar",w_$d),w_$h}(),w_$lB=function(w_$h){function w_$l(w_$B){this._bg=null,this._skin=null,w_$l.__super.call(this),void 0===w_$B&&(w_$B=""),this.text=w_$B,this.skin=this.skin}w_$s(w_$l,"laya.ui.TextInput",w_$h);var w_$B=w_$l.prototype;return w_$B.preinitialize=function(){this.mouseEnabled=!0},w_$B.destroy=function(w_$B){w_$H.clearCache(this,this._skin),void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._bg&&this._bg.destroy(),this._bg=null},w_$B.createChildren=function(){this.addChild(this._tf=new w_$Q),this._tf.padding=w_$z.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},w_$B._onFocus=function(){this.event("focus",this)},w_$B._onBlur=function(){this.event("blur",this)},w_$B._onInput=function(){this.event("input",this)},w_$B._onEnter=function(){this.event("enter",this)},w_$B.initialize=function(){this.width=128,this.height=22},w_$B.select=function(){this._tf.select()},w_$B.setSelection=function(w_$B,w_$h){this._tf.setSelection(w_$B,w_$h)},w_$X(0,w_$B,"text",w_$h.prototype._$get_text,function(w_$B){this._tf.text!=w_$B&&(w_$B+="",this._tf.text=w_$B,this.event("change"))}),w_$X(0,w_$B,"bg",function(){return this._bg},function(w_$B){this.graphics=this._bg=w_$B}),w_$X(0,w_$B,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(w_$B){this._tf.inputElementYAdjuster=w_$B}),w_$X(0,w_$B,"multiline",function(){return this._tf.multiline},function(w_$B){this._tf.multiline=w_$B}),w_$X(0,w_$B,"skin",function(){return this._skin},function(w_$B){this._skin!=w_$B&&(w_$H.clearCache(this,this._skin),this._skin=w_$B,this._bg||(this.graphics=this._bg=new w_$N),w_$H.keepCache(this,this._skin),this._bg.source=w_$H.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),w_$X(0,w_$B,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(w_$B){this._bg||(this.graphics=this._bg=new w_$N),this._bg.sizeGrid=w_$a.fillArray(w_$z.defaultSizeGrid,w_$B,Number)}),w_$X(0,w_$B,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(w_$B){this._tf.inputElementXAdjuster=w_$B}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$p,this,"width",w_$B),this._bg&&(this._bg.width=w_$B)}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$p,this,"height",w_$B),this._bg&&(this._bg.height=w_$B)}),w_$X(0,w_$B,"editable",function(){return this._tf.editable},function(w_$B){this._tf.editable=w_$B}),w_$X(0,w_$B,"restrict",function(){return this._tf.restrict},function(w_$B){this._tf.restrict=w_$B}),w_$X(0,w_$B,"prompt",function(){return this._tf.prompt},function(w_$B){this._tf.prompt=w_$B}),w_$X(0,w_$B,"promptColor",function(){return this._tf.promptColor},function(w_$B){this._tf.promptColor=w_$B}),w_$X(0,w_$B,"maxChars",function(){return this._tf.maxChars},function(w_$B){this._tf.maxChars=w_$B}),w_$X(0,w_$B,"focus",function(){return this._tf.focus},function(w_$B){this._tf.focus=w_$B}),w_$X(0,w_$B,"type",function(){return this._tf.type},function(w_$B){this._tf.type=w_$B}),w_$X(0,w_$B,"asPassword",function(){return this._tf.asPassword},function(w_$B){this._tf.asPassword=w_$B}),w_$l}(w_$p),w_$AB=function(w_$B){function w_$h(){w_$h.__super.call(this)}return w_$s(w_$h,"laya.ui.VSlider",w_$k),w_$h}(),w_$nB=function(w_$B){function w_$A(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,w_$A.__super.call(this)}w_$s(w_$A,"laya.ui.Dialog",w_$B);var w_$h=w_$A.prototype;return w_$h.initialize=function(){this.popupEffect=w_$A.manager.popupEffectHandler,this.closeEffect=w_$A.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},w_$h._dealDragArea=function(){var w_$B=this.getChildByName("drag");w_$B&&(this.dragArea=w_$B.x+","+w_$B.y+","+w_$B.width+","+w_$B.height,w_$B.removeSelf())},w_$h._onClick=function(w_$B){var w_$h=w_$B.target;if(w_$h)switch(w_$h.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(w_$h.name)}},w_$h.show=function(w_$B,w_$h){void 0===w_$B&&(w_$B=!1),void 0===w_$h&&(w_$h=!0),this._open(!1,w_$B,w_$h)},w_$h.popup=function(w_$B,w_$h){void 0===w_$B&&(w_$B=!1),void 0===w_$h&&(w_$h=!0),this._open(!0,w_$B,w_$h)},w_$h._open=function(w_$B,w_$h,w_$l){w_$A.manager.lock(!1),this.isModal=w_$B,w_$A.manager.open(this,w_$h,w_$l)},w_$h.onOpened=function(){},w_$h.close=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0),w_$A.manager.close(this,w_$B,w_$h)},w_$h.onClosed=function(w_$B){},w_$h._onMouseDown=function(w_$B){var w_$h=this.getMousePoint();this._dragArea.contains(w_$h.x,w_$h.y)?this.startDrag():this.stopDrag()},w_$X(0,w_$h,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(w_$B){if(w_$B){var w_$h=w_$a.fillArray([0,0,0,0],w_$B,Number);this._dragArea=new w_$J(w_$h[0],w_$h[1],w_$h[2],w_$h[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),w_$X(0,w_$h,"isPopup",function(){return null!=this.parent}),w_$X(0,w_$h,"zOrder",w_$B.prototype._$get_zOrder,function(w_$B){w_$$.superSet(w_$c,this,"zOrder",w_$B),w_$A.manager._checkMask()}),w_$X(1,w_$A,"manager",function(){return w_$A._manager=w_$A._manager||new w_$W},function(w_$B){w_$A._manager=w_$B}),w_$A.setLockView=function(w_$B){w_$A.manager.setLockView(w_$B)},w_$A.lock=function(w_$B){w_$A.manager.lock(w_$B)},w_$A.closeAll=function(){w_$A.manager.closeAll()},w_$A.getDialogsByGroup=function(w_$B){return w_$A.manager.getDialogsByGroup(w_$B)},w_$A.closeByGroup=function(w_$B){return w_$A.manager.closeByGroup(w_$B)},w_$A.CLOSE="close",w_$A.CANCEL="cancel",w_$A.SURE="sure",w_$A.NO="no",w_$A.OK="ok",w_$A.YES="yes",w_$A._manager=null,w_$A}(w_$c),w_$sB=function(w_$B){function w_$h(){w_$h.__super.call(this)}w_$s(w_$h,"laya.ui.HBox",w_$B);var w_$l=w_$h.prototype;return w_$l.sortItem=function(w_$B){w_$B&&w_$B.sort(function(w_$B,w_$h){return w_$B.x-w_$h.x})},w_$l.changeItems=function(){this._itemChanged=!1;for(var w_$B=[],w_$h=0,w_$l=0,w_$A=this.numChildren;w_$l<w_$A;w_$l++){var w_$n=this.getChildAt(w_$l);w_$n&&w_$n.layoutEnabled&&(w_$B.push(w_$n),w_$h=this._height?this._height:Math.max(w_$h,w_$n.height*w_$n.scaleY))}this.sortItem(w_$B);var w_$s=0;for(w_$l=0,w_$A=w_$B.length;w_$l<w_$A;w_$l++)(w_$n=w_$B[w_$l]).x=w_$s,w_$s+=w_$n.width*w_$n.scaleX+this._space,"top"==this._align?w_$n.y=0:"middle"==this._align?w_$n.y=.5*(w_$h-w_$n.height*w_$n.scaleY):"bottom"==this._align&&(w_$n.y=w_$h-w_$n.height*w_$n.scaleY);this.changeSize()},w_$X(0,w_$l,"height",w_$B.prototype._$get_height,function(w_$B){this._height!=w_$B&&(w_$$.superSet(w_$Y,this,"height",w_$B),this.callLater(this.changeItems))}),w_$h.NONE="none",w_$h.TOP="top",w_$h.MIDDLE="middle",w_$h.BOTTOM="bottom",w_$h}(w_$Y),w_$XB=function(w_$B){function w_$h(){w_$h.__super.call(this)}w_$s(w_$h,"laya.ui.VBox",w_$B);var w_$l=w_$h.prototype;return w_$l.changeItems=function(){this._itemChanged=!1;for(var w_$B=[],w_$h=0,w_$l=0,w_$A=this.numChildren;w_$l<w_$A;w_$l++){var w_$n=this.getChildAt(w_$l);w_$n&&w_$n.layoutEnabled&&(w_$B.push(w_$n),w_$h=this._width?this._width:Math.max(w_$h,w_$n.width*w_$n.scaleX))}this.sortItem(w_$B);var w_$s=0;for(w_$l=0,w_$A=w_$B.length;w_$l<w_$A;w_$l++)(w_$n=w_$B[w_$l]).y=w_$s,w_$s+=w_$n.height*w_$n.scaleY+this._space,"left"==this._align?w_$n.x=0:"center"==this._align?w_$n.x=.5*(w_$h-w_$n.width*w_$n.scaleX):"right"==this._align&&(w_$n.x=w_$h-w_$n.width*w_$n.scaleX);this.changeSize()},w_$X(0,w_$l,"width",w_$B.prototype._$get_width,function(w_$B){this._width!=w_$B&&(w_$$.superSet(w_$Y,this,"width",w_$B),this.callLater(this.changeItems))}),w_$h.NONE="none",w_$h.LEFT="left",w_$h.CENTER="center",w_$h.RIGHT="right",w_$h}(w_$Y),w_$ZB=function(w_$B){function w_$h(){w_$h.__super.call(this)}return w_$s(w_$h,"laya.ui.RadioGroup",w_$q),w_$h.prototype.createItem=function(w_$B,w_$h){return new w_$D(w_$B,w_$h)},w_$h}(),w_$tB=function(w_$B){function w_$h(){w_$h.__super.call(this)}return w_$s(w_$h,"laya.ui.Tab",w_$q),w_$h.prototype.createItem=function(w_$B,w_$h){return new w_$E(w_$B,w_$h)},w_$h}(),w_$PB=function(w_$h){function w_$l(w_$B){this._vScrollBar=null,this._hScrollBar=null,void 0===w_$B&&(w_$B=""),w_$l.__super.call(this,w_$B)}w_$s(w_$l,"laya.ui.TextArea",w_$h);var w_$B=w_$l.prototype;return w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},w_$B.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},w_$B.onVBarChanged=function(w_$B){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},w_$B.onHBarChanged=function(w_$B){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},w_$B.changeScroll=function(){var w_$B=this._vScrollBar&&0<this._tf.maxScrollY,w_$h=this._hScrollBar&&0<this._tf.maxScrollX,w_$l=w_$B?this._width-this._vScrollBar.width:this._width,w_$A=w_$h?this._height-this._hScrollBar.height:this._height,w_$n=this._tf.padding||w_$z.labelPadding;this._tf.width=w_$l,this._tf.height=w_$A,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-w_$n[2],this._vScrollBar.y=w_$n[1],this._vScrollBar.height=this._height-(w_$h?this._hScrollBar.height:0)-w_$n[1]-w_$n[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=w_$A/Math.max(this._tf.textHeight,w_$A),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=w_$B),this._hScrollBar&&(this._hScrollBar.x=w_$n[0],this._hScrollBar.y=this._height-this._hScrollBar.height-w_$n[3],this._hScrollBar.width=this._width-(w_$B?this._vScrollBar.width:0)-w_$n[0]-w_$n[2],this._hScrollBar.scrollSize=Math.max(.033*w_$l,1),this._hScrollBar.thumbPercent=w_$l/Math.max(this._tf.textWidth,w_$l),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=w_$h)},w_$B.scrollTo=function(w_$B){this.commitMeasure(),this._tf.scrollY=w_$B},w_$X(0,w_$B,"scrollY",function(){return this._tf.scrollY}),w_$X(0,w_$B,"width",w_$h.prototype._$get_width,function(w_$B){w_$$.superSet(w_$lB,this,"width",w_$B),this.callLater(this.changeScroll)}),w_$X(0,w_$B,"hScrollBar",function(){return this._hScrollBar}),w_$X(0,w_$B,"height",w_$h.prototype._$get_height,function(w_$B){w_$$.superSet(w_$lB,this,"height",w_$B),this.callLater(this.changeScroll)}),w_$X(0,w_$B,"maxScrollX",function(){return this._tf.maxScrollX}),w_$X(0,w_$B,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(w_$B){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new w_$hB),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=w_$B}),w_$X(0,w_$B,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(w_$B){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new w_$I),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=w_$B}),w_$X(0,w_$B,"vScrollBar",function(){return this._vScrollBar}),w_$X(0,w_$B,"maxScrollY",function(){return this._tf.maxScrollY}),w_$X(0,w_$B,"scrollX",function(){return this._tf.scrollX}),w_$l}(w_$lB);!function(w_$B){function w_$h(){this._uiView=null,this.isCloseOther=!1,w_$h.__super.call(this)}w_$s(w_$h,"laya.ui.AsynDialog",w_$nB);var w_$l=w_$h.prototype;w_$l.createView=function(w_$B){this._uiView=w_$B},w_$l._open=function(w_$B,w_$h,w_$l){this.isModal=w_$B,this.isCloseOther=w_$h,w_$nB.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},w_$l.onCreated=function(){this.createUI(),this.onOpen()},w_$l.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},w_$l.onOpen=function(){w_$nB.manager.open(this,this.isCloseOther),w_$nB.manager.lock(!1)},w_$l.close=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0),w_$nB.manager.close(this),this.onClose()},w_$l.onClose=function(){},w_$l.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),laya.ui.View.prototype.destroy.call(this,w_$B),this._uiView=null,this.onDestroy()},w_$l.onDestroy=function(){}}();w_$$.__init([w_$c])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w_$B,w_$h){"use strict";for(var w_$l in Object.defineProperty(w_$h,"__esModule",{value:!0}),Laya){var w_$A=Laya[w_$l];w_$A&&w_$A.__isclass&&(w_$h[w_$l]=w_$A)}}),function(w_$b,w_$B,w_$o){w_$o.un,w_$o.uns;var w_$T=w_$o.static,w_$Q=w_$o.class,w_$i=w_$o.getset,w_$A=w_$o.__newvec,w_$C=laya.maths.Arith,w_$X=laya.webgl.atlas.AtlasResourceManager,w_$l=laya.webgl.shader.BaseShader,w_$R=laya.utils.Browser,w_$Z=laya.webgl.utils.Buffer,w_$u=laya.utils.Byte,w_$n=laya.utils.ClassUtils,w_$t=w_$o.Config,w_$s=(laya.events.Event,laya.events.EventDispatcher),w_$z=laya.utils.Handler,w_$J=laya.net.Loader,w_$h=laya.net.LoaderManager,w_$P=(laya.maths.MathUtil,laya.display.Node),w_$$=laya.renders.Render,w_$G=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),w_$V=laya.resource.Resource,w_$H=laya.utils.RunDriver,w_$y=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),w_$v=laya.display.Sprite,w_$U=laya.utils.Stat,w_$x=laya.utils.StringKey,w_$a=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),w_$w=laya.utils.Utils,w_$S=laya.webgl.WebGL,w_$N=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;w_$o.interface("laya.d3.core.IClone"),w_$o.interface("laya.d3.graphics.IVertex"),w_$o.interface("laya.d3.core.render.IUpdate"),w_$o.interface("laya.d3.core.scene.ITreeNode"),w_$o.interface("laya.d3.core.render.IRenderable");(function(){function w_$E(){}w_$Q(w_$E,"laya.d3.animation.AnimationClipParser01"),w_$E.READ_DATA=function(){w_$E._DATA.offset=w_$E._reader.getUint32(),w_$E._DATA.size=w_$E._reader.getUint32()},w_$E.READ_BLOCK=function(){for(var w_$B=w_$E._BLOCK.count=w_$E._reader.getUint16(),w_$h=w_$E._BLOCK.blockStarts=[],w_$l=w_$E._BLOCK.blockLengths=[],w_$A=0;w_$A<w_$B;w_$A++)w_$h.push(w_$E._reader.getUint32()),w_$l.push(w_$E._reader.getUint32())},w_$E.READ_STRINGS=function(){var w_$B=w_$E._reader.getUint32(),w_$h=w_$E._reader.getUint16(),w_$l=w_$E._reader.pos;w_$E._reader.pos=w_$B+w_$E._DATA.offset;for(var w_$A=0;w_$A<w_$h;w_$A++)w_$E._strings[w_$A]=w_$E._reader.readUTFString();w_$E._reader.pos=w_$l},w_$E.parse=function(w_$B,w_$h){w_$E._animationClip=w_$B;(w_$E._reader=w_$h).__getBuffer();w_$E.READ_DATA(),w_$E.READ_BLOCK(),w_$E.READ_STRINGS();for(var w_$l=0,w_$A=w_$E._BLOCK.count;w_$l<w_$A;w_$l++){var w_$n=w_$h.getUint16(),w_$s=w_$E._strings[w_$n],w_$X=w_$E["READ_"+w_$s];if(null==w_$X)throw new Error("model file err,no this function:"+w_$n+" "+w_$s);w_$X.call()}},w_$E.READ_ANIMATIONS=function(){var w_$B,w_$h=0,w_$l=0,w_$A=w_$E._reader,w_$n=w_$A.__getBuffer(),w_$s=[],w_$X=w_$A.getUint8();for(w_$s.length=w_$X,w_$h=0;w_$h<w_$X;w_$h++)w_$s[w_$h]=w_$A.getUint16();var w_$Z=[],w_$t=w_$A.getUint16();for(w_$Z.length=w_$t,w_$h=0;w_$h<w_$t;w_$h++)w_$Z[w_$h]=w_$A.getFloat32();var w_$P=w_$E._animationClip;w_$P.name=w_$E._strings[w_$A.getUint16()];var w_$G=w_$P._duration=w_$A.getFloat32();w_$P.islooping=!!w_$A.getByte(),w_$P._frameRate=w_$A.getInt16();var w_$T=w_$A.getInt16(),w_$b=w_$P._nodes=new Array;w_$b.length=w_$T,(w_$P._publicClipDatas=[]).length=w_$T;var w_$Q=w_$P._nodesMap={},w_$i=0,w_$$=0;for(w_$h=0;w_$h<w_$T;w_$h++){w_$B=w_$b[w_$h]=new w_$F;var w_$V=w_$A.getUint16(),w_$J=w_$B.path=[];for(w_$J.length=w_$V,w_$l=0;w_$l<w_$V;w_$l++)w_$J[w_$l]=w_$E._strings[w_$A.getUint16()];var w_$H=w_$J.join("/"),w_$y=w_$Q[w_$H];w_$y||(w_$Q[w_$H]=w_$y=[]),w_$y.push(w_$B);var w_$C=w_$A.getInt16();-1!==w_$C&&(w_$B.componentType=w_$E._strings[w_$C]);var w_$o=w_$O._propertyIndexDic[w_$E._strings[w_$A.getUint16()]];if(null==w_$o)throw new Error("AnimationClipParser01:unknown property name.");var w_$u=w_$o<4,w_$v=!w_$u||w_$u&&""===w_$J[0];(w_$B._cacheProperty=w_$v)?w_$i++:w_$$++,w_$B.propertyNameID=w_$o;var w_$U=w_$s[w_$A.getUint8()];w_$B.keyFrameWidth=w_$U/4;var w_$x=w_$B.keyFrames=[],w_$w=w_$x.length=w_$A.getUint16(),w_$z=null,w_$a=NaN;for(w_$l=0;w_$l<w_$w;w_$l++){var w_$S=w_$x[w_$l]=new w_$p;w_$a=w_$S.startTime=w_$Z[w_$A.getUint16()];var w_$N=w_$A.pos;w_$S.inTangent=new Float32Array(w_$n.slice(w_$N,w_$N+w_$U)),w_$A.pos+=w_$U,w_$N=w_$A.pos,w_$S.outTangent=new Float32Array(w_$n.slice(w_$N,w_$N+w_$U)),w_$A.pos+=w_$U,w_$N=w_$A.pos,w_$S.data=new Float32Array(w_$n.slice(w_$N,w_$N+w_$U)),w_$A.pos+=w_$U,w_$z&&(w_$z.next=w_$S,w_$z.duration=w_$a-w_$z.startTime),w_$z=w_$S}w_$S.next=null,w_$S.duration=w_$G-w_$a}var w_$R=w_$P._nodeToCachePropertyMap=new Int32Array(w_$T),w_$W=w_$P._cachePropertyMap=new Int32Array(w_$i),w_$M=w_$P._unCachePropertyMap=new Int32Array(w_$$);for(w_$i=w_$$=0,w_$h=0;w_$h<w_$T;w_$h++)(w_$B=w_$b[w_$h])._cacheProperty?(w_$R[w_$h]=w_$i,w_$W[w_$i++]=w_$h):w_$M[w_$$++]=w_$h},w_$E._animationClip=null,w_$E._reader=null,w_$E._strings=[],w_$T(w_$E,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function w_$d(){}w_$Q(w_$d,"laya.d3.animation.AnimationClipParser02"),w_$d.READ_DATA=function(){w_$d._DATA.offset=w_$d._reader.getUint32(),w_$d._DATA.size=w_$d._reader.getUint32()},w_$d.READ_BLOCK=function(){for(var w_$B=w_$d._BLOCK.count=w_$d._reader.getUint16(),w_$h=w_$d._BLOCK.blockStarts=[],w_$l=w_$d._BLOCK.blockLengths=[],w_$A=0;w_$A<w_$B;w_$A++)w_$h.push(w_$d._reader.getUint32()),w_$l.push(w_$d._reader.getUint32())},w_$d.READ_STRINGS=function(){var w_$B=w_$d._reader.getUint32(),w_$h=w_$d._reader.getUint16(),w_$l=w_$d._reader.pos;w_$d._reader.pos=w_$B+w_$d._DATA.offset;for(var w_$A=0;w_$A<w_$h;w_$A++)w_$d._strings[w_$A]=w_$d._reader.readUTFString();w_$d._reader.pos=w_$l},w_$d.parse=function(w_$B,w_$h){w_$d._animationClip=w_$B;(w_$d._reader=w_$h).__getBuffer();w_$d.READ_DATA(),w_$d.READ_BLOCK(),w_$d.READ_STRINGS();for(var w_$l=0,w_$A=w_$d._BLOCK.count;w_$l<w_$A;w_$l++){var w_$n=w_$h.getUint16(),w_$s=w_$d._strings[w_$n],w_$X=w_$d["READ_"+w_$s];if(null==w_$X)throw new Error("model file err,no this function:"+w_$n+" "+w_$s);w_$X.call()}},w_$d.READ_ANIMATIONS=function(){var w_$B,w_$h=0,w_$l=0,w_$A=w_$d._reader,w_$n=w_$A.__getBuffer(),w_$s=[],w_$X=w_$A.getUint8();for(w_$s.length=w_$X,w_$h=0;w_$h<w_$X;w_$h++)w_$s[w_$h]=w_$A.getUint16();var w_$Z=[],w_$t=w_$A.getUint16();for(w_$Z.length=w_$t,w_$h=0;w_$h<w_$t;w_$h++)w_$Z[w_$h]=w_$A.getFloat32();var w_$P=w_$d._animationClip;w_$P.name=w_$d._strings[w_$A.getUint16()];var w_$G=w_$P._duration=w_$A.getFloat32();w_$P.islooping=!!w_$A.getByte(),w_$P._frameRate=w_$A.getInt16();var w_$T=w_$A.getInt16(),w_$b=w_$P._nodes=new Array;w_$b.length=w_$T,(w_$P._publicClipDatas=[]).length=w_$T;var w_$Q=w_$P._nodesMap={},w_$i=0,w_$$=0;for(w_$h=0;w_$h<w_$T;w_$h++){w_$B=w_$b[w_$h]=new w_$F;var w_$V=w_$A.getUint16(),w_$J=w_$B.path=[];for(w_$J.length=w_$V,w_$l=0;w_$l<w_$V;w_$l++)w_$J[w_$l]=w_$d._strings[w_$A.getUint16()];var w_$H=w_$J.join("/"),w_$y=w_$Q[w_$H];w_$y||(w_$Q[w_$H]=w_$y=[]),w_$y.push(w_$B);var w_$C=w_$A.getInt16();-1!==w_$C&&(w_$B.componentType=w_$d._strings[w_$C]);var w_$o=w_$O._propertyIndexDic[w_$d._strings[w_$A.getUint16()]];if(null==w_$o)throw new Error("AnimationClipParser02:unknown property name.");var w_$u=w_$o<4,w_$v=!w_$u||w_$u&&""===w_$J[0];(w_$B._cacheProperty=w_$v)?w_$i++:w_$$++,w_$B.propertyNameID=w_$o;var w_$U=w_$s[w_$A.getUint8()];w_$B.keyFrameWidth=w_$U/4;var w_$x=w_$B.keyFrames=[],w_$w=w_$x.length=w_$A.getUint16(),w_$z=null,w_$a=NaN;for(w_$l=0;w_$l<w_$w;w_$l++){var w_$S=w_$x[w_$l]=new w_$p;w_$a=w_$S.startTime=w_$Z[w_$A.getUint16()];var w_$N=w_$A.pos;w_$S.inTangent=new Float32Array(w_$n.slice(w_$N,w_$N+w_$U)),w_$A.pos+=w_$U,w_$N=w_$A.pos,w_$S.outTangent=new Float32Array(w_$n.slice(w_$N,w_$N+w_$U)),w_$A.pos+=w_$U,w_$N=w_$A.pos,w_$S.data=new Float32Array(w_$n.slice(w_$N,w_$N+w_$U)),w_$A.pos+=w_$U,w_$z&&(w_$z.next=w_$S,w_$z.duration=w_$a-w_$z.startTime),w_$z=w_$S}w_$S.next=null,w_$S.duration=w_$G-w_$a}var w_$R=w_$A.getUint16();for(w_$h=0;w_$h<w_$R;w_$h++){var w_$W,w_$M=new w_$k;w_$M.time=w_$A.getFloat32(),w_$M.eventName=w_$d._strings[w_$A.getUint16()];var w_$E=w_$A.getUint16();for(0<w_$E&&(w_$M.params=w_$W=[]),w_$l=0;w_$l<w_$E;w_$l++){switch(w_$A.getByte()){case 0:w_$W.push(!!w_$A.getByte());break;case 1:w_$W.push(w_$A.getInt32());break;case 2:w_$W.push(w_$A.getFloat32());break;case 3:w_$W.push(w_$d._strings[w_$A.getUint16()]);break;default:throw new Error("unknown type.")}}w_$P.addEvent(w_$M)}var w_$j=w_$P._nodeToCachePropertyMap=new Int32Array(w_$T),w_$g=w_$P._cachePropertyMap=new Int32Array(w_$i),w_$_=w_$P._unCachePropertyMap=new Int32Array(w_$$);for(w_$i=w_$$=0,w_$h=0;w_$h<w_$T;w_$h++)(w_$B=w_$b[w_$h])._cacheProperty?(w_$j[w_$h]=w_$i,w_$g[w_$i++]=w_$h):w_$_[w_$$++]=w_$h},w_$d._animationClip=null,w_$d._reader=null,w_$d._strings=[],w_$T(w_$d,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var w_$k=function(){function w_$B(){this.time=NaN,this.eventName=null,this.params=null}return w_$Q(w_$B,"laya.d3.animation.AnimationEvent"),w_$B}(),w_$O=function(){function w_$A(){this._childs=[],this.transform=new w_$Hh(this)}w_$Q(w_$A,"laya.d3.animation.AnimationNode");var w_$B=w_$A.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.addChild=function(w_$B){w_$B._parent=this,w_$B.transform.setParent(this.transform),this._childs.push(w_$B)},w_$B.removeChild=function(w_$B){var w_$h=this._childs.indexOf(w_$B);-1!==w_$h&&this._childs.splice(w_$h,1)},w_$B.getChildByName=function(w_$B){for(var w_$h=0,w_$l=this._childs.length;w_$h<w_$l;w_$h++){var w_$A=this._childs[w_$h];if(w_$A.name===w_$B)return w_$A}return null},w_$B.getChildByIndex=function(w_$B){return this._childs[w_$B]},w_$B.getChildCount=function(){return this._childs.length},w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h.name=this.name;for(var w_$l=0,w_$A=this._childs.length;w_$l<w_$A;w_$l++){var w_$n=this._childs[w_$l],w_$s=w_$n.clone();w_$h.addChild(w_$s);var w_$X=w_$n.transform,w_$Z=w_$s.transform;w_$Z.setLocalPosition(w_$X.getLocalPosition()),w_$Z.setLocalRotation(w_$X.getLocalRotation()),w_$Z.setLocalScale(w_$X.getLocalScale()),w_$Z._localRotationEuler=w_$X._localRotationEuler,w_$Z._setWorldMatrixIgnoreUpdate(w_$X.getWorldMatrix())}},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$A.__init__=function(){w_$A.registerAnimationNodeProperty("localPosition",w_$A._getLocalPosition,w_$A._setLocalPosition),w_$A.registerAnimationNodeProperty("localRotation",w_$A._getLocalRotation,w_$A._setLocalRotation),w_$A.registerAnimationNodeProperty("localScale",w_$A._getLocalScale,w_$A._setLocalScale),w_$A.registerAnimationNodeProperty("localRotationEuler",w_$A._getLocalRotationEuler,w_$A._setLocalRotationEuler),w_$A.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",w_$A._getParticleRenderSharedMaterialTintColor,w_$A._setParticleRenderSharedMaterialTintColor),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",w_$A._getMeshRenderSharedMaterialTilingOffset,w_$A._setMeshRenderSharedMaterialTilingOffset),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",w_$A._getMeshRenderSharedMaterialAlbedo,w_$A._setMeshRenderSharedMaterialAlbedo),w_$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",w_$A._getSkinnedMeshRenderSharedMaterialTilingOffset,w_$A._setSkinnedMeshRenderSharedMaterialTilingOffset),w_$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",w_$A._getSkinnedMeshRenderSharedMaterialAlbedo,w_$A._setSkinnedMeshRenderSharedMaterialAlbedo),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",w_$A._getMeshRenderSharedMaterialAlbedo,w_$A._setMeshRenderSharedMaterialAlbedo),w_$A.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",w_$A._getSkinnedMeshRenderSharedMaterialAlbedo,w_$A._setSkinnedMeshRenderSharedMaterialAlbedo),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",w_$A._getMeshRenderSharedMaterialIntensity,w_$A._setMeshRenderSharedMaterialIntensity),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",w_$A._getMeshRenderSharedMaterialAlpha,w_$A._setMeshRenderSharedMaterialAlpha),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",w_$A._getMeshRenderSharedMaterialAlphaColor,w_$A._setMeshRenderSharedMaterialAlphaColor),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",w_$A._getMeshRenderSharedMaterialBaseColor,w_$A._setMeshRenderSharedMaterialBaseColor),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",w_$A._getMeshRenderSharedMaterialDissolve,w_$A._setMeshRenderSharedMaterialDissolve),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",w_$A._getMeshRenderSharedMaterialDissolveSpeed,w_$A._setMeshRenderSharedMaterialDissolveSpeed),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",w_$A._getMeshRenderSharedMaterialMMultiplier,w_$A._setMeshRenderSharedMaterialMMultiplier),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",w_$A._getMeshRenderSharedMaterialBaseScrollSpeedX,w_$A._setMeshRenderSharedMaterialBaseScrollSpeedX),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",w_$A._getMeshRenderSharedMaterialBaseScrollSpeedY,w_$A._setMeshRenderSharedMaterialBaseScrollSpeedY),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",w_$A._getMeshRenderSharedMaterialSecondScrollSpeedX,w_$A._setMeshRenderSharedMaterialSecondScrollSpeedX),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",w_$A._getMeshRenderSharedMaterialSecondScrollSpeedY,w_$A._setMeshRenderSharedMaterialSecondScrollSpeedY),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",w_$A._getMeshRenderSharedMaterialDetailTilingOffset,w_$A._setMeshRenderSharedMaterialDetailTilingOffset),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",w_$A._getMeshRenderSharedMaterialDissolveTilingOffset,w_$A._setMeshRenderSharedMaterialDissolveTilingOffset),w_$A.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",w_$A._getMeshRenderSharedMaterialMaskTilingOffset,w_$A._setMeshRenderSharedMaterialMaskTilingOffset)},w_$A.registerAnimationNodeProperty=function(w_$B,w_$h,w_$l){if(w_$A._propertyIndexDic[w_$B])throw new Error("AnimationNode: this propertyName has registered.");w_$A._propertyIndexDic[w_$B]=w_$A._propertyIDCounter,w_$A._propertyGetFuncs[w_$A._propertyIDCounter]=w_$h,w_$A._propertySetFuncs[w_$A._propertyIDCounter]=w_$l,w_$A._propertyIDCounter++},w_$A._getLocalPosition=function(w_$B,w_$h){return w_$B?w_$B.transform.getLocalPosition():w_$h._transform.localPosition.elements},w_$A._setLocalPosition=function(w_$B,w_$h,w_$l){if(w_$B)w_$B.transform.setLocalPosition(w_$l);else{var w_$A=w_$h._transform,w_$n=w_$A.localPosition;w_$n.elements=w_$l,w_$A.localPosition=w_$n}},w_$A._getLocalRotation=function(w_$B,w_$h){return w_$B?w_$B.transform.getLocalRotation():w_$h._transform.localRotation.elements},w_$A._setLocalRotation=function(w_$B,w_$h,w_$l){if(w_$B)w_$B.transform.setLocalRotation(w_$l);else{var w_$A=w_$h._transform,w_$n=w_$A.localRotation;w_$n.elements=w_$l,w_$A.localRotation=w_$n}},w_$A._getLocalScale=function(w_$B,w_$h){return w_$B?w_$B.transform.getLocalScale():w_$h._transform.localScale.elements},w_$A._setLocalScale=function(w_$B,w_$h,w_$l){if(w_$B)w_$B.transform.setLocalScale(w_$l);else{var w_$A=w_$h._transform,w_$n=w_$A.localScale;w_$n.elements=w_$l,w_$A.localScale=w_$n}},w_$A._getLocalRotationEuler=function(w_$B,w_$h){return w_$B?w_$B.transform.getLocalRotationEuler():w_$h._transform.localRotationEuler.elements},w_$A._setLocalRotationEuler=function(w_$B,w_$h,w_$l){if(w_$B)w_$B.transform.setLocalRotationEuler(w_$l);else{var w_$A=w_$h._transform,w_$n=w_$A.localRotationEuler;w_$n.elements=w_$l,w_$A.localRotationEuler=w_$n}},w_$A._getMeshRenderSharedMaterialTilingOffset=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return w_$h.meshRender.sharedMaterial.tilingOffset.elements},w_$A._setMeshRenderSharedMaterialTilingOffset=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.meshRender.material).tilingOffset).elements=w_$l,w_$A.tilingOffset=w_$n)}else(w_$n=(w_$A=w_$h.meshRender.material).tilingOffset).elements=w_$l,w_$A.tilingOffset=w_$n},w_$A._getMeshRenderSharedMaterialAlbedo=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.albedoColor.elements:null}return w_$h.meshRender.sharedMaterial.albedoColor.elements},w_$A._setMeshRenderSharedMaterialAlbedo=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.meshRender.material).albedoColor).elements=w_$l,w_$A.albedoColor=w_$n)}else(w_$n=(w_$A=w_$h.meshRender.material).albedoColor).elements=w_$l,w_$A.albedoColor=w_$n},w_$A._getSkinnedMeshRenderSharedMaterialTilingOffset=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return w_$h.skinnedMeshRender.sharedMaterial.tilingOffset.elements},w_$A._setSkinnedMeshRenderSharedMaterialTilingOffset=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.skinnedMeshRender.material).tilingOffset).elements=w_$l,w_$A.tilingOffset=w_$n)}else(w_$n=(w_$A=w_$h.skinnedMeshRender.material).tilingOffset).elements=w_$l,w_$A.tilingOffset=w_$n},w_$A._getSkinnedMeshRenderSharedMaterialAlbedo=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return w_$h.skinnedMeshRender.sharedMaterial.albedoColor.elements},w_$A._setSkinnedMeshRenderSharedMaterialAlbedo=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.skinnedMeshRender.material).albedoColor).elements=w_$l,w_$A.albedoColor=w_$n)}else(w_$n=(w_$A=w_$h.skinnedMeshRender.material).albedoColor).elements=w_$l,w_$A.albedoColor=w_$n},w_$A._getParticleRenderSharedMaterialTintColor=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.particleRender.sharedMaterial.tintColor.elements:null}return w_$h.particleRender.sharedMaterial.tintColor.elements},w_$A._setParticleRenderSharedMaterialTintColor=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.particleRender.material).tintColor).elements=w_$l,w_$A.tintColor=w_$n)}else(w_$n=(w_$A=w_$h.particleRender.material).tintColor).elements=w_$l,w_$A.tintColor=w_$n},w_$A._getMeshRenderSharedMaterialAlphaColor=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.alphaColor.elements:null}return w_$h.meshRender.sharedMaterial.alphaColor.elements},w_$A._setMeshRenderSharedMaterialAlphaColor=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.meshRender.material).alphaColor).elements=w_$l,w_$A.alphaColor=w_$n)}else(w_$n=(w_$A=w_$h.meshRender.material).alphaColor).elements=w_$l,w_$A.alphaColor=w_$n},w_$A._getMeshRenderSharedMaterialBaseColor=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.baseColor.elements:null}return w_$h.meshRender.sharedMaterial.baseColor.elements},w_$A._setMeshRenderSharedMaterialBaseColor=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.meshRender.material).baseColor).elements=w_$l,w_$A.baseColor=w_$n)}else(w_$n=(w_$A=w_$h.meshRender.material).baseColor).elements=w_$l,w_$A.baseColor=w_$n},w_$A._getMeshRenderSharedMaterialDissolve=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.dissolve:0}return w_$h.meshRender.sharedMaterial.dissolve},w_$A._setMeshRenderSharedMaterialDissolve=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.dissolve=w_$l[0])}else w_$h.meshRender.material.dissolve=w_$l[0]},w_$A._getMeshRenderSharedMaterialDissolveSpeed=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.dissolveSpeed:0}return w_$h.meshRender.sharedMaterial.dissolveSpeed},w_$A._setMeshRenderSharedMaterialDissolveSpeed=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.dissolveSpeed=w_$l[0])}else w_$h.meshRender.material.dissolveSpeed=w_$l[0]},w_$A._getMeshRenderSharedMaterialMMultiplier=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.mMultiplier:0}return w_$h.meshRender.sharedMaterial.mMultiplier},w_$A._setMeshRenderSharedMaterialMMultiplier=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.mMultiplier=w_$l[0])}else w_$h.meshRender.material.mMultiplier=w_$l[0]},w_$A._getMeshRenderSharedMaterialBaseScrollSpeedX=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return w_$h.meshRender.sharedMaterial.baseScrollSpeedX},w_$A._setMeshRenderSharedMaterialBaseScrollSpeedX=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.baseScrollSpeedX=w_$l[0])}else w_$h.meshRender.material.baseScrollSpeedX=w_$l[0]},w_$A._getMeshRenderSharedMaterialBaseScrollSpeedY=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return w_$h.meshRender.sharedMaterial.baseScrollSpeedY},w_$A._setMeshRenderSharedMaterialBaseScrollSpeedY=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.baseScrollSpeedY=w_$l[0])}else w_$h.meshRender.material.baseScrollSpeedY=w_$l[0]},w_$A._getMeshRenderSharedMaterialSecondScrollSpeedX=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return w_$h.meshRender.sharedMaterial.secondScrollSpeedX},w_$A._setMeshRenderSharedMaterialSecondScrollSpeedX=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.secondScrollSpeedX=w_$l[0])}else w_$h.meshRender.material.secondScrollSpeedX=w_$l[0]},w_$A._getMeshRenderSharedMaterialSecondScrollSpeedY=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return w_$h.meshRender.sharedMaterial.secondScrollSpeedY},w_$A._setMeshRenderSharedMaterialSecondScrollSpeedY=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.secondScrollSpeedY=w_$l[0])}else w_$h.meshRender.material.secondScrollSpeedY=w_$l[0]},w_$A._getMeshRenderSharedMaterialAlpha=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.alpha:0}return w_$h.meshRender.sharedMaterial.alpha},w_$A._setMeshRenderSharedMaterialAlpha=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.alpha=w_$l[0])}else w_$h.meshRender.material.alpha=w_$l[0]},w_$A._getMeshRenderSharedMaterialIntensity=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.intensity:0}return w_$h.meshRender.sharedMaterial.intensity},w_$A._setMeshRenderSharedMaterialIntensity=function(w_$B,w_$h,w_$l){if(w_$B){var w_$A=w_$B.transform._entity;w_$A&&(w_$A.owner.meshRender.material.intensity=w_$l[0])}else w_$h.meshRender.material.intensity=w_$l[0]},w_$A._getMeshRenderSharedMaterialDetailTilingOffset=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return w_$h.meshRender.sharedMaterial.detailTilingOffset.elements},w_$A._setMeshRenderSharedMaterialDetailTilingOffset=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.meshRender.material).detailTilingOffset).elements=w_$l,w_$A.detailTilingOffset=w_$n)}else(w_$n=(w_$A=w_$h.meshRender.material).detailTilingOffset).elements=w_$l,w_$A.detailTilingOffset=w_$n},w_$A._getMeshRenderSharedMaterialDissolveTilingOffset=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return w_$h.meshRender.sharedMaterial.dissolveTilingOffset.elements},w_$A._setMeshRenderSharedMaterialDissolveTilingOffset=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.meshRender.material).dissolveTilingOffset).elements=w_$l,w_$A.dissolveTilingOffset=w_$n)}else(w_$n=(w_$A=w_$h.meshRender.material).dissolveTilingOffset).elements=w_$l,w_$A.dissolveTilingOffset=w_$n},w_$A._getMeshRenderSharedMaterialMaskTilingOffset=function(w_$B,w_$h){if(w_$B){var w_$l=w_$B.transform._entity;return w_$l?w_$l.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return w_$h.meshRender.sharedMaterial.maskTilingOffset.elements},w_$A._setMeshRenderSharedMaterialMaskTilingOffset=function(w_$B,w_$h,w_$l){var w_$A,w_$n;if(w_$B){var w_$s=w_$B.transform._entity;w_$s&&((w_$n=(w_$A=w_$s.owner.meshRender.material).maskTilingOffset).elements=w_$l,w_$A.maskTilingOffset=w_$n)}else(w_$n=(w_$A=w_$h.meshRender.material).maskTilingOffset).elements=w_$l,w_$A.maskTilingOffset=w_$n},w_$A._propertyIDCounter=0,w_$A._propertyIndexDic={},w_$A._propertySetFuncs=[],w_$A._propertyGetFuncs=[],w_$A}(),w_$p=function(){function w_$B(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return w_$Q(w_$B,"laya.d3.animation.Keyframe"),w_$B}(),w_$F=function(){function w_$B(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return w_$Q(w_$B,"laya.d3.animation.KeyframeNode"),w_$B}(),w_$W=(function(){function w_$B(){this._tempVector30=new w_$Xh,this._tempVector31=new w_$Xh,this._tempVector32=new w_$Xh,this._a=new w_$Xh,this._b=new w_$Xh,this._c=new w_$Xh,this._d=new w_$Xh}w_$Q(w_$B,"laya.d3.core.glitter.SplineCurvePositionVelocity");var w_$h=w_$B.prototype;w_$h.Init=function(w_$B,w_$h,w_$l,w_$A){w_$B.cloneTo(this._d),w_$h.cloneTo(this._c),w_$Xh.scale(w_$B,2,this._a),w_$Xh.scale(w_$l,2,this._tempVector30),w_$Xh.subtract(this._a,this._tempVector30,this._a),w_$Xh.add(this._a,w_$h,this._a),w_$Xh.add(this._a,w_$A,this._a),w_$Xh.scale(w_$l,3,this._b),w_$Xh.scale(w_$B,3,this._tempVector30),w_$Xh.subtract(this._b,this._tempVector30,this._b),w_$Xh.subtract(this._b,w_$A,this._b),w_$Xh.scale(w_$h,2,this._tempVector30),w_$Xh.subtract(this._b,this._tempVector30,this._b)},w_$h.Slerp=function(w_$B,w_$h){w_$Xh.scale(this._a,w_$B*w_$B*w_$B,this._tempVector30),w_$Xh.scale(this._b,w_$B*w_$B,this._tempVector31),w_$Xh.scale(this._c,w_$B,this._tempVector32),w_$Xh.add(this._tempVector30,this._tempVector31,w_$h),w_$Xh.add(w_$h,this._tempVector32,w_$h),w_$Xh.add(w_$h,this._d,w_$h)}}(),function(){function w_$g(w_$B,w_$h,w_$l,w_$A){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=w_$B,this._h=w_$h,this._minHeight=w_$l,this._maxHeight=w_$A}w_$Q(w_$g,"laya.d3.core.HeightMap");var w_$B=w_$g.prototype;w_$B._inBounds=function(w_$B,w_$h){return 0<=w_$B&&w_$B<this._h&&0<=w_$h&&w_$h<this._w},w_$B.getHeight=function(w_$B,w_$h){return this._inBounds(w_$B,w_$h)?this._datas[w_$B][w_$h]:NaN},w_$i(0,w_$B,"width",function(){return this._w}),w_$i(0,w_$B,"height",function(){return this._h}),w_$i(0,w_$B,"maxHeight",function(){return this._maxHeight}),w_$i(0,w_$B,"minHeight",function(){return this._minHeight}),w_$g.creatFromMesh=function(w_$B,w_$h,w_$l,w_$A){for(var w_$n=[],w_$s=[],w_$X=w_$B.getSubMeshCount(),w_$Z=0;w_$Z<w_$X;w_$Z++){for(var w_$t=w_$B.getSubMesh(w_$Z),w_$P=w_$t._getVertexBuffer(),w_$G=w_$P.getData(),w_$T=[],w_$b=0;w_$b<w_$G.length;w_$b+=w_$P.vertexDeclaration.vertexStride/4){var w_$Q=new w_$Xh(w_$G[w_$b+0],w_$G[w_$b+1],w_$G[w_$b+2]);w_$T.push(w_$Q)}w_$n.push(w_$T);var w_$i=w_$t._getIndexBuffer();w_$s.push(w_$i.getData())}var w_$$=w_$B.boundingBox,w_$V=w_$$.min.x,w_$J=w_$$.min.z,w_$H=w_$$.max.x,w_$y=w_$$.max.z,w_$C=w_$$.min.y,w_$o=w_$$.max.y,w_$u=w_$H-w_$V,w_$v=w_$y-w_$J,w_$U=w_$A.elements[0]=w_$u/(w_$h-1),w_$x=w_$A.elements[1]=w_$v/(w_$l-1),w_$w=new w_$g(w_$h,w_$l,w_$C,w_$o),w_$z=w_$g._tempRay,w_$a=w_$z.direction.elements;w_$a[0]=0,w_$a[1]=-1,w_$a[2]=0;var w_$S=w_$o+.1;w_$z.origin.elements[1]=w_$S;for(var w_$N=0;w_$N<w_$l;w_$N++){var w_$R=w_$J+w_$N*w_$x;w_$w._datas[w_$N]=[];for(var w_$W=0;w_$W<w_$h;w_$W++){var w_$M=w_$V+w_$W*w_$U,w_$E=w_$z.origin.elements;w_$E[0]=w_$M,w_$E[2]=w_$R;var w_$j=w_$g._getPosition(w_$z,w_$n,w_$s);w_$w._datas[w_$N][w_$W]=w_$j===Number.MAX_VALUE?NaN:w_$S-w_$j}}return w_$w},w_$g.createFromImage=function(w_$B,w_$h,w_$l){for(var w_$A=w_$B.width,w_$n=w_$B.height,w_$s=new w_$g(w_$A,w_$n,w_$h,w_$l),w_$X=(w_$l-w_$h)/254,w_$Z=w_$B.getPixels(),w_$t=0,w_$P=0;w_$P<w_$n;w_$P++)for(var w_$G=w_$s._datas[w_$P]=[],w_$T=0;w_$T<w_$A;w_$T++){var w_$b=w_$Z[w_$t++],w_$Q=w_$Z[w_$t++],w_$i=w_$Z[w_$t++],w_$$=w_$Z[w_$t++];w_$G[w_$T]=255==w_$b&&255==w_$Q&&255==w_$i&&255==w_$$?NaN:(w_$b+w_$Q+w_$i)/3*w_$X+w_$h}return w_$s},w_$g._getPosition=function(w_$B,w_$h,w_$l){for(var w_$A=Number.MAX_VALUE,w_$n=0;w_$n<w_$h.length;w_$n++)for(var w_$s=w_$h[w_$n],w_$X=w_$l[w_$n],w_$Z=0;w_$Z<w_$X.length;w_$Z+=3){var w_$t=w_$s[w_$X[w_$Z+0]],w_$P=w_$s[w_$X[w_$Z+1]],w_$G=w_$s[w_$X[w_$Z+2]],w_$T=w_$ih.rayIntersectsTriangle(w_$B,w_$t,w_$P,w_$G);!isNaN(w_$T)&&w_$T<w_$A&&(w_$A=w_$T)}return w_$A},w_$T(w_$g,["_tempRay",function(){return this._tempRay=new w_$nh(new w_$Xh,new w_$Xh)}])}(),function(){function w_$n(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}w_$Q(w_$n,"laya.d3.core.Layer");var w_$B=w_$n.prototype;return w_$B._binarySearchIndex=function(){for(var w_$B=0,w_$h=w_$n._collsionTestList.length-1,w_$l=0;w_$B<=w_$h;){w_$l=Math.floor((w_$B+w_$h)/2);var w_$A=w_$n._collsionTestList[w_$l];if(w_$A==this._number)return w_$l;w_$A>this._number?w_$h=w_$l-1:w_$B=w_$l+1}return w_$B},w_$B._addCollider=function(w_$B){0===this._colliders.length&&w_$n._collsionTestList.splice(this._binarySearchIndex(),0,this._number),w_$B._isRigidbody?(this._colliders.unshift(w_$B),this._nonRigidbodyOffset++):this._colliders.push(w_$B)},w_$B._removeCollider=function(w_$B){var w_$h=this._colliders.indexOf(w_$B);w_$h<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(w_$h,1),0===this._colliders.length&&w_$n._collsionTestList.splice(w_$n._collsionTestList.indexOf(this._number),1)},w_$i(0,w_$B,"number",function(){return this._number}),w_$i(0,w_$B,"visible",function(){return this._visible},function(w_$B){this._visible=w_$B,w_$n._visibleLayers=w_$B?w_$n._visibleLayers|this.mask:w_$n._visibleLayers&~this.mask}),w_$i(0,w_$B,"mask",function(){return this._mask}),w_$i(1,w_$n,"visibleLayers",function(){return w_$n._visibleLayers},function(w_$B){w_$n._visibleLayers=w_$B;for(var w_$h=0,w_$l=w_$n._layerList.length;w_$h<w_$l;w_$h++){var w_$A=w_$n._layerList[w_$h];w_$A._visible=0!=(w_$A._mask&w_$n._visibleLayers)}}),w_$n.__init__=function(){w_$n._layerList.length=31;for(var w_$B=0;w_$B<31;w_$B++){var w_$h=new w_$n;w_$n._layerList[w_$B]=w_$h,0===w_$B?(w_$h.name="Default Layer",w_$h.visible=!0):(w_$h.name="Layer-"+w_$B,w_$h.visible=!1),w_$h._number=w_$B,w_$h._mask=Math.pow(2,w_$B)}w_$n.currentCreationLayer=w_$n._layerList[0]},w_$n.getLayerByNumber=function(w_$B){if(w_$B<0||30<w_$B)throw new Error("无法返回指定Layer，该number超出范围！");return w_$n._layerList[w_$B]},w_$n.getLayerByName=function(w_$B){for(var w_$h=0;w_$h<31;w_$h++)if(w_$n._layerList[w_$h].name===w_$B)return w_$n._layerList[w_$h];throw new Error("无法返回指定Layer,该name不存在")},w_$n.isVisible=function(w_$B){return 0!=(w_$B&w_$n._currentCameraCullingMask&w_$n._visibleLayers)},w_$n._layerList=[],w_$n._visibleLayers=2147483647,w_$n._collsionTestList=[],w_$n._currentCameraCullingMask=2147483647,w_$n.maxCount=31,w_$n.currentCreationLayer=null,w_$n}()),w_$M=(function(){function w_$B(w_$B,w_$h,w_$l){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=w_$B,this._minCount=w_$h,this._maxCount=w_$l}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.Burst");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._time=this._time,w_$h._minCount=this._minCount,w_$h._maxCount=this._maxCount},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"time",function(){return this._time}),w_$i(0,w_$h,"minCount",function(){return this._minCount}),w_$i(0,w_$h,"maxCount",function(){return this._maxCount})}(),function(){function w_$B(w_$B){this._color=null,this.enbale=!1,this._color=w_$B}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var w_$h=w_$B.prototype;w_$h.cloneTo=function(w_$B){var w_$h=w_$B;this._color.cloneTo(w_$h._color),w_$h.enbale=this.enbale},w_$h.clone=function(){var w_$B;switch(this._color.type){case 0:w_$B=w_$j.createByConstant(this._color.constant.clone());break;case 1:w_$B=w_$j.createByGradient(this._color.gradient.clone());break;case 2:w_$B=w_$j.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:w_$B=w_$j.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var w_$h=new this.constructor(w_$B);return w_$h.enbale=this.enbale,w_$h},w_$i(0,w_$h,"color",function(){return this._color})}(),function(){function w_$B(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.Emission");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),w_$h._destroy=function(){this._bursts=null,this._destroyed=!0},w_$h.getBurstsCount=function(){return this._bursts.length},w_$h.getBurstByIndex=function(w_$B){return this._bursts[w_$B]},w_$h.addBurst=function(w_$B){var w_$h=this._bursts.length;if(0<w_$h)for(var w_$l=0;w_$l<w_$h;w_$l++)this._bursts[w_$l].time>w_$B.time&&this._bursts.splice(w_$l,0,w_$B);this._bursts.push(w_$B)},w_$h.removeBurst=function(w_$B){var w_$h=this._bursts.indexOf(w_$B);-1!==w_$h&&this._bursts.splice(w_$h,1)},w_$h.removeBurstByIndex=function(w_$B){this._bursts.splice(w_$B,1)},w_$h.clearBurst=function(){this._bursts.length=0},w_$h.cloneTo=function(w_$B){var w_$h=w_$B,w_$l=w_$h._bursts;w_$l.length=this._bursts.length;for(var w_$A=0,w_$n=this._bursts.length;w_$A<w_$n;w_$A++){var w_$s=w_$l[w_$A];w_$s?this._bursts[w_$A].cloneTo(w_$s):w_$l[w_$A]=this._bursts[w_$A].clone()}w_$h._emissionRate=this._emissionRate,w_$h.enbale=this.enbale},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"destroyed",function(){return this._destroyed}),w_$i(0,w_$h,"emissionRate",function(){return this._emissionRate},function(w_$B){if(w_$B<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=w_$B})}(),function(){function w_$A(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}w_$Q(w_$A,"laya.d3.core.particleShuriKen.module.FrameOverTime");var w_$B=w_$A.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._type=this._type,w_$h._constant=this._constant,this._overTime.cloneTo(w_$h._overTime),w_$h._constantMin=this._constantMin,w_$h._constantMax=this._constantMax,this._overTimeMin.cloneTo(w_$h._overTimeMin),this._overTimeMax.cloneTo(w_$h._overTimeMax)},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$B,"frameOverTimeData",function(){return this._overTime}),w_$i(0,w_$B,"constant",function(){return this._constant}),w_$i(0,w_$B,"type",function(){return this._type}),w_$i(0,w_$B,"frameOverTimeDataMin",function(){return this._overTimeMin}),w_$i(0,w_$B,"constantMin",function(){return this._constantMin}),w_$i(0,w_$B,"frameOverTimeDataMax",function(){return this._overTimeMax}),w_$i(0,w_$B,"constantMax",function(){return this._constantMax}),w_$A.createByConstant=function(w_$B){var w_$h=new w_$A;return w_$h._type=0,w_$h._constant=w_$B,w_$h},w_$A.createByOverTime=function(w_$B){var w_$h=new w_$A;return w_$h._type=1,w_$h._overTime=w_$B,w_$h},w_$A.createByRandomTwoConstant=function(w_$B,w_$h){var w_$l=new w_$A;return w_$l._type=2,w_$l._constantMin=w_$B,w_$l._constantMax=w_$h,w_$l},w_$A.createByRandomTwoOverTime=function(w_$B,w_$h){var w_$l=new w_$A;return w_$l._type=3,w_$l._overTimeMin=w_$B,w_$l._overTimeMax=w_$h,w_$l},w_$A}()),w_$E=function(){function w_$P(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}w_$Q(w_$P,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var w_$B=w_$P.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._type=this._type,w_$h._separateAxes=this._separateAxes,w_$h._constant=this._constant,this._constantSeparate.cloneTo(w_$h._constantSeparate),this._gradient.cloneTo(w_$h._gradient),this._gradientX.cloneTo(w_$h._gradientX),this._gradientY.cloneTo(w_$h._gradientY),this._gradientZ.cloneTo(w_$h._gradientZ),w_$h._constantMin=this._constantMin,w_$h._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(w_$h._constantMinSeparate),this._constantMaxSeparate.cloneTo(w_$h._constantMaxSeparate),this._gradientMin.cloneTo(w_$h._gradientMin),this._gradientMax.cloneTo(w_$h._gradientMax),this._gradientXMin.cloneTo(w_$h._gradientXMin),this._gradientXMax.cloneTo(w_$h._gradientXMax),this._gradientYMin.cloneTo(w_$h._gradientYMin),this._gradientYMax.cloneTo(w_$h._gradientYMax),this._gradientZMin.cloneTo(w_$h._gradientZMin),this._gradientZMax.cloneTo(w_$h._gradientZMax)},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$B,"gradientZ",function(){return this._gradientZ}),w_$i(0,w_$B,"constant",function(){return this._constant}),w_$i(0,w_$B,"gradient",function(){return this._gradient}),w_$i(0,w_$B,"separateAxes",function(){return this._separateAxes}),w_$i(0,w_$B,"type",function(){return this._type}),w_$i(0,w_$B,"constantSeparate",function(){return this._constantSeparate}),w_$i(0,w_$B,"gradientX",function(){return this._gradientX}),w_$i(0,w_$B,"gradientY",function(){return this._gradientY}),w_$i(0,w_$B,"gradientW",function(){return this._gradientW}),w_$i(0,w_$B,"gradientMin",function(){return this._gradientMin}),w_$i(0,w_$B,"constantMin",function(){return this._constantMin}),w_$i(0,w_$B,"gradientMax",function(){return this._gradientMax}),w_$i(0,w_$B,"constantMax",function(){return this._constantMax}),w_$i(0,w_$B,"gradientWMin",function(){return this._gradientWMin}),w_$i(0,w_$B,"constantMinSeparate",function(){return this._constantMinSeparate}),w_$i(0,w_$B,"constantMaxSeparate",function(){return this._constantMaxSeparate}),w_$i(0,w_$B,"gradientXMin",function(){return this._gradientXMin}),w_$i(0,w_$B,"gradientXMax",function(){return this._gradientXMax}),w_$i(0,w_$B,"gradientWMax",function(){return this._gradientWMax}),w_$i(0,w_$B,"gradientYMin",function(){return this._gradientYMin}),w_$i(0,w_$B,"gradientYMax",function(){return this._gradientYMax}),w_$i(0,w_$B,"gradientZMin",function(){return this._gradientZMin}),w_$i(0,w_$B,"gradientZMax",function(){return this._gradientZMax}),w_$P.createByConstant=function(w_$B){var w_$h=new w_$P;return w_$h._type=0,w_$h._separateAxes=!1,w_$h._constant=w_$B,w_$h},w_$P.createByConstantSeparate=function(w_$B){var w_$h=new w_$P;return w_$h._type=0,w_$h._separateAxes=!0,w_$h._constantSeparate=w_$B,w_$h},w_$P.createByGradient=function(w_$B){var w_$h=new w_$P;return w_$h._type=1,w_$h._separateAxes=!1,w_$h._gradient=w_$B,w_$h},w_$P.createByGradientSeparate=function(w_$B,w_$h,w_$l,w_$A){var w_$n=new w_$P;return w_$n._type=1,w_$n._separateAxes=!0,w_$n._gradientX=w_$B,w_$n._gradientY=w_$h,w_$n._gradientZ=w_$l,w_$n._gradientW=w_$A,w_$n},w_$P.createByRandomTwoConstant=function(w_$B,w_$h){var w_$l=new w_$P;return w_$l._type=2,w_$l._separateAxes=!1,w_$l._constantMin=w_$B,w_$l._constantMax=w_$h,w_$l},w_$P.createByRandomTwoConstantSeparate=function(w_$B,w_$h){var w_$l=new w_$P;return w_$l._type=2,w_$l._separateAxes=!0,w_$l._constantMinSeparate=w_$B,w_$l._constantMaxSeparate=w_$h,w_$l},w_$P.createByRandomTwoGradient=function(w_$B,w_$h){var w_$l=new w_$P;return w_$l._type=3,w_$l._separateAxes=!1,w_$l._gradientMin=w_$B,w_$l._gradientMax=w_$h,w_$l},w_$P.createByRandomTwoGradientSeparate=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){var w_$t=new w_$P;return w_$t._type=3,w_$t._separateAxes=!0,w_$t._gradientXMin=w_$B,w_$t._gradientXMax=w_$h,w_$t._gradientYMin=w_$l,w_$t._gradientYMax=w_$A,w_$t._gradientZMin=w_$n,w_$t._gradientZMax=w_$s,w_$t._gradientWMin=w_$X,w_$t._gradientWMax=w_$Z,w_$t},w_$P}(),w_$j=function(){function w_$A(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}w_$Q(w_$A,"laya.d3.core.particleShuriKen.module.GradientColor");var w_$B=w_$A.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._type=this._type,this._constant.cloneTo(w_$h._constant),this._constantMin.cloneTo(w_$h._constantMin),this._constantMax.cloneTo(w_$h._constantMax),this._gradient.cloneTo(w_$h._gradient),this._gradientMin.cloneTo(w_$h._gradientMin),this._gradientMax.cloneTo(w_$h._gradientMax)},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$B,"gradient",function(){return this._gradient}),w_$i(0,w_$B,"constant",function(){return this._constant}),w_$i(0,w_$B,"type",function(){return this._type}),w_$i(0,w_$B,"gradientMin",function(){return this._gradientMin}),w_$i(0,w_$B,"constantMin",function(){return this._constantMin}),w_$i(0,w_$B,"gradientMax",function(){return this._gradientMax}),w_$i(0,w_$B,"constantMax",function(){return this._constantMax}),w_$A.createByConstant=function(w_$B){var w_$h=new w_$A;return w_$h._type=0,w_$h._constant=w_$B,w_$h},w_$A.createByGradient=function(w_$B){var w_$h=new w_$A;return w_$h._type=1,w_$h._gradient=w_$B,w_$h},w_$A.createByRandomTwoConstant=function(w_$B,w_$h){var w_$l=new w_$A;return w_$l._type=2,w_$l._constantMin=w_$B,w_$l._constantMax=w_$h,w_$l},w_$A.createByRandomTwoGradient=function(w_$B,w_$h){var w_$l=new w_$A;return w_$l._type=3,w_$l._gradientMin=w_$B,w_$l._gradientMax=w_$h,w_$l},w_$A}(),w_$g=(function(){function w_$B(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.GradientDataColor");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.addAlpha=function(w_$B,w_$h){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==w_$B&&(w_$B=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=w_$B,this._alphaElements[this._alphaCurrentLength++]=w_$h):DEBUG},w_$h.addRGB=function(w_$B,w_$h){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==w_$B&&(w_$B=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=w_$B,this._rgbElements[this._rgbCurrentLength++]=w_$h.x,this._rgbElements[this._rgbCurrentLength++]=w_$h.y,this._rgbElements[this._rgbCurrentLength++]=w_$h.z):DEBUG},w_$h.cloneTo=function(w_$B){var w_$h=w_$B,w_$l=0,w_$A=0;w_$h._alphaCurrentLength=this._alphaCurrentLength;var w_$n=w_$h._alphaElements;for(w_$n.length=this._alphaElements.length,w_$l=0,w_$A=this._alphaElements.length;w_$l<w_$A;w_$l++)w_$n[w_$l]=this._alphaElements[w_$l];w_$h._rgbCurrentLength=this._rgbCurrentLength;var w_$s=w_$h._rgbElements;for(w_$s.length=this._rgbElements.length,w_$l=0,w_$A=this._rgbElements.length;w_$l<w_$A;w_$l++)w_$s[w_$l]=this._rgbElements[w_$l]},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),w_$i(0,w_$h,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function w_$B(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.GradientDataInt");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.add=function(w_$B,w_$h){this._currentLength<8?(6===this._currentLength&&1!==w_$B&&(w_$B=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=w_$B,this._elements[this._currentLength++]=w_$h):console.log("Warning:data count must lessEqual than 4")},w_$h.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._currentLength=this._currentLength;var w_$l=w_$h._elements;w_$l.length=this._elements.length;for(var w_$A=0,w_$n=this._elements.length;w_$A<w_$n;w_$A++)w_$l[w_$A]=this._elements[w_$A]},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"gradientCount",function(){return this._currentLength/2})}(),function(){function w_$B(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.add=function(w_$B,w_$h){this._currentLength<8?(6===this._currentLength&&1!==w_$B&&(w_$B=1,DEBUG),this._elements[this._currentLength++]=w_$B,this._elements[this._currentLength++]=w_$h):DEBUG},w_$h.getKeyByIndex=function(w_$B){return this._elements[2*w_$B]},w_$h.getValueByIndex=function(w_$B){return this._elements[2*w_$B+1]},w_$h.getAverageValue=function(){for(var w_$B=0,w_$h=this._currentLength-2;w_$B<w_$h;w_$B+=2){this._elements[w_$B+1];this._elements[w_$B+3],this._elements[w_$B+2]-this._elements[w_$B]}return 0},w_$h.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._currentLength=this._currentLength;var w_$l=w_$h._elements;w_$l.length=this._elements.length;for(var w_$A=0,w_$n=this._elements.length;w_$A<w_$n;w_$A++)w_$l[w_$A]=this._elements[w_$A]},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"gradientCount",function(){return this._currentLength/2})}(),function(){function w_$B(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.add=function(w_$B,w_$h){this._currentLength<8?(6===this._currentLength&&1!==w_$B&&(w_$B=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=w_$B,this._elements[this._currentLength++]=w_$h.x,this._elements[this._currentLength++]=w_$h.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},w_$h.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._currentLength=this._currentLength;var w_$l=w_$h._elements;w_$l.length=this._elements.length;for(var w_$A=0,w_$n=this._elements.length;w_$A<w_$n;w_$A++)w_$l[w_$A]=this._elements[w_$A]},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"gradientCount",function(){return this._currentLength/3})}(),function(){function w_$Z(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}w_$Q(w_$Z,"laya.d3.core.particleShuriKen.module.GradientSize");var w_$B=w_$Z.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.getMaxSizeInGradient=function(){var w_$B=0,w_$h=0,w_$l=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(w_$B=0,w_$h=this._gradientX.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientX.getValueByIndex(w_$B));for(w_$B=0,w_$h=this._gradientY.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientY.getValueByIndex(w_$B))}else for(w_$B=0,w_$h=this._gradient.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradient.getValueByIndex(w_$B));break;case 1:w_$l=this._separateAxes?(w_$l=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),w_$l=Math.max(w_$l,this._constantMinSeparate.y),Math.max(w_$l,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(w_$B=0,w_$h=this._gradientXMin.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientXMin.getValueByIndex(w_$B));for(w_$B=0,w_$h=this._gradientXMax.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientXMax.getValueByIndex(w_$B));for(w_$B=0,w_$h=this._gradientYMin.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientYMin.getValueByIndex(w_$B));for(w_$B=0,w_$h=this._gradientZMax.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientZMax.getValueByIndex(w_$B))}else{for(w_$B=0,w_$h=this._gradientMin.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientMin.getValueByIndex(w_$B));for(w_$B=0,w_$h=this._gradientMax.gradientCount;w_$B<w_$h;w_$B++)w_$l=Math.max(w_$l,this._gradientMax.getValueByIndex(w_$B))}}return w_$l},w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._type=this._type,w_$h._separateAxes=this._separateAxes,this._gradient.cloneTo(w_$h._gradient),this._gradientX.cloneTo(w_$h._gradientX),this._gradientY.cloneTo(w_$h._gradientY),this._gradientZ.cloneTo(w_$h._gradientZ),w_$h._constantMin=this._constantMin,w_$h._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(w_$h._constantMinSeparate),this._constantMaxSeparate.cloneTo(w_$h._constantMaxSeparate),this._gradientMin.cloneTo(w_$h._gradientMin),this._gradientMax.cloneTo(w_$h._gradientMax),this._gradientXMin.cloneTo(w_$h._gradientXMin),this._gradientXMax.cloneTo(w_$h._gradientXMax),this._gradientYMin.cloneTo(w_$h._gradientYMin),this._gradientYMax.cloneTo(w_$h._gradientYMax),this._gradientZMin.cloneTo(w_$h._gradientZMin),this._gradientZMax.cloneTo(w_$h._gradientZMax)},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$B,"gradientZ",function(){return this._gradientZ}),w_$i(0,w_$B,"gradient",function(){return this._gradient}),w_$i(0,w_$B,"separateAxes",function(){return this._separateAxes}),w_$i(0,w_$B,"type",function(){return this._type}),w_$i(0,w_$B,"gradientMin",function(){return this._gradientMin}),w_$i(0,w_$B,"constantMin",function(){return this._constantMin}),w_$i(0,w_$B,"gradientX",function(){return this._gradientX}),w_$i(0,w_$B,"gradientY",function(){return this._gradientY}),w_$i(0,w_$B,"gradientMax",function(){return this._gradientMax}),w_$i(0,w_$B,"constantMax",function(){return this._constantMax}),w_$i(0,w_$B,"constantMinSeparate",function(){return this._constantMinSeparate}),w_$i(0,w_$B,"constantMaxSeparate",function(){return this._constantMaxSeparate}),w_$i(0,w_$B,"gradientXMin",function(){return this._gradientXMin}),w_$i(0,w_$B,"gradientXMax",function(){return this._gradientXMax}),w_$i(0,w_$B,"gradientYMin",function(){return this._gradientYMin}),w_$i(0,w_$B,"gradientYMax",function(){return this._gradientYMax}),w_$i(0,w_$B,"gradientZMin",function(){return this._gradientZMin}),w_$i(0,w_$B,"gradientZMax",function(){return this._gradientZMax}),w_$Z.createByGradient=function(w_$B){var w_$h=new w_$Z;return w_$h._type=0,w_$h._separateAxes=!1,w_$h._gradient=w_$B,w_$h},w_$Z.createByGradientSeparate=function(w_$B,w_$h,w_$l){var w_$A=new w_$Z;return w_$A._type=0,w_$A._separateAxes=!0,w_$A._gradientX=w_$B,w_$A._gradientY=w_$h,w_$A._gradientZ=w_$l,w_$A},w_$Z.createByRandomTwoConstant=function(w_$B,w_$h){var w_$l=new w_$Z;return w_$l._type=1,w_$l._separateAxes=!1,w_$l._constantMin=w_$B,w_$l._constantMax=w_$h,w_$l},w_$Z.createByRandomTwoConstantSeparate=function(w_$B,w_$h){var w_$l=new w_$Z;return w_$l._type=1,w_$l._separateAxes=!0,w_$l._constantMinSeparate=w_$B,w_$l._constantMaxSeparate=w_$h,w_$l},w_$Z.createByRandomTwoGradient=function(w_$B,w_$h){var w_$l=new w_$Z;return w_$l._type=2,w_$l._separateAxes=!1,w_$l._gradientMin=w_$B,w_$l._gradientMax=w_$h,w_$l},w_$Z.createByRandomTwoGradientSeparate=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=new w_$Z;return w_$X._type=2,w_$X._separateAxes=!0,w_$X._gradientXMin=w_$B,w_$X._gradientXMax=w_$h,w_$X._gradientYMin=w_$l,w_$X._gradientYMax=w_$A,w_$X._gradientZMin=w_$n,w_$X._gradientZMax=w_$s,w_$X},w_$Z}()),w_$_=function(){function w_$Z(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}w_$Q(w_$Z,"laya.d3.core.particleShuriKen.module.GradientVelocity");var w_$B=w_$Z.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._type=this._type,this._constant.cloneTo(w_$h._constant),this._gradientX.cloneTo(w_$h._gradientX),this._gradientY.cloneTo(w_$h._gradientY),this._gradientZ.cloneTo(w_$h._gradientZ),this._constantMin.cloneTo(w_$h._constantMin),this._constantMax.cloneTo(w_$h._constantMax),this._gradientXMin.cloneTo(w_$h._gradientXMin),this._gradientXMax.cloneTo(w_$h._gradientXMax),this._gradientYMin.cloneTo(w_$h._gradientYMin),this._gradientYMax.cloneTo(w_$h._gradientYMax),this._gradientZMin.cloneTo(w_$h._gradientZMin),this._gradientZMax.cloneTo(w_$h._gradientZMax)},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$B,"gradientZ",function(){return this._gradientZ}),w_$i(0,w_$B,"constant",function(){return this._constant}),w_$i(0,w_$B,"type",function(){return this._type}),w_$i(0,w_$B,"gradientXMax",function(){return this._gradientXMax}),w_$i(0,w_$B,"constantMin",function(){return this._constantMin}),w_$i(0,w_$B,"gradientX",function(){return this._gradientX}),w_$i(0,w_$B,"gradientY",function(){return this._gradientY}),w_$i(0,w_$B,"gradientXMin",function(){return this._gradientXMin}),w_$i(0,w_$B,"constantMax",function(){return this._constantMax}),w_$i(0,w_$B,"gradientYMin",function(){return this._gradientYMin}),w_$i(0,w_$B,"gradientYMax",function(){return this._gradientYMax}),w_$i(0,w_$B,"gradientZMin",function(){return this._gradientZMin}),w_$i(0,w_$B,"gradientZMax",function(){return this._gradientZMax}),w_$Z.createByConstant=function(w_$B){var w_$h=new w_$Z;return w_$h._type=0,w_$h._constant=w_$B,w_$h},w_$Z.createByGradient=function(w_$B,w_$h,w_$l){var w_$A=new w_$Z;return w_$A._type=1,w_$A._gradientX=w_$B,w_$A._gradientY=w_$h,w_$A._gradientZ=w_$l,w_$A},w_$Z.createByRandomTwoConstant=function(w_$B,w_$h){var w_$l=new w_$Z;return w_$l._type=2,w_$l._constantMin=w_$B,w_$l._constantMax=w_$h,w_$l},w_$Z.createByRandomTwoGradient=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=new w_$Z;return w_$X._type=3,w_$X._gradientXMin=w_$B,w_$X._gradientXMax=w_$h,w_$X._gradientYMin=w_$l,w_$X._gradientYMax=w_$A,w_$X._gradientZMin=w_$n,w_$X._gradientZMax=w_$s,w_$X},w_$Z}(),w_$d=(function(){function w_$B(w_$B){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=w_$B}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.cloneTo=function(w_$B){var w_$h=w_$B;this._angularVelocity.cloneTo(w_$h._angularVelocity),w_$h.enbale=this.enbale},w_$h.clone=function(){var w_$B;switch(this._angularVelocity.type){case 0:w_$B=this._angularVelocity.separateAxes?w_$E.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):w_$E.createByConstant(this._angularVelocity.constant);break;case 1:w_$B=this._angularVelocity.separateAxes?w_$E.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):w_$E.createByGradient(this._angularVelocity.gradient.clone());break;case 2:w_$B=this._angularVelocity.separateAxes?w_$E.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):w_$E.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:w_$B=this._angularVelocity.separateAxes?w_$E.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):w_$E.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var w_$h=new this.constructor(w_$B);return w_$h.enbale=this.enbale,w_$h},w_$i(0,w_$h,"angularVelocity",function(){return this._angularVelocity})}(),function(){function w_$B(){this.enable=!1,this.randomDirection=!1}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h._getShapeBoundBox=function(w_$B){throw new Error("BaseShape: must override it.")},w_$h._getSpeedBoundBox=function(w_$B){throw new Error("BaseShape: must override it.")},w_$h.generatePositionAndDirection=function(w_$B,w_$h,w_$l,w_$A){throw new Error("BaseShape: must override it.")},w_$h._calculateProceduralBounds=function(w_$B,w_$h,w_$l){this._getShapeBoundBox(w_$B);var w_$A=w_$B.min,w_$n=w_$B.max;w_$Xh.multiply(w_$A,w_$h,w_$A),w_$Xh.multiply(w_$n,w_$h,w_$n);var w_$s=new w_$LB(new w_$Xh,new w_$Xh);this.randomDirection?(w_$s.min=new w_$Xh(-1,-1,-1),w_$s.max=new w_$Xh(1,1,1)):this._getSpeedBoundBox(w_$s);var w_$X=new w_$LB(new w_$Xh,new w_$Xh),w_$Z=w_$X.min,w_$t=w_$X.max;w_$Xh.scale(w_$s.min,w_$l.y,w_$Z),w_$Xh.scale(w_$s.max,w_$l.y,w_$t),w_$Xh.add(w_$B.min,w_$Z,w_$Z),w_$Xh.add(w_$B.max,w_$t,w_$t),w_$Xh.min(w_$B.min,w_$Z,w_$B.min),w_$Xh.max(w_$B.max,w_$Z,w_$B.max);var w_$P=new w_$LB(new w_$Xh,new w_$Xh),w_$G=w_$P.min,w_$T=w_$P.max;w_$Xh.scale(w_$s.min,w_$l.x,w_$G),w_$Xh.scale(w_$s.max,w_$l.x,w_$T),w_$Xh.min(w_$P.min,w_$T,w_$Z),w_$Xh.max(w_$P.min,w_$T,w_$t),w_$Xh.min(w_$B.min,w_$Z,w_$B.min),w_$Xh.max(w_$B.max,w_$Z,w_$B.max)},w_$h.cloneTo=function(w_$B){w_$B.enable=this.enable},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$B}()),w_$c=function(){function w_$s(){}return w_$Q(w_$s,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),w_$s._randomPointUnitArcCircle=function(w_$B,w_$h,w_$l){var w_$A=w_$h.elements,w_$n=NaN;w_$n=w_$l?w_$l.getFloat()*w_$B:Math.random()*w_$B,w_$A[0]=Math.cos(w_$n),w_$A[1]=Math.sin(w_$n)},w_$s._randomPointInsideUnitArcCircle=function(w_$B,w_$h,w_$l){var w_$A=w_$h.elements;w_$s._randomPointUnitArcCircle(w_$B,w_$h,w_$l);var w_$n=NaN;w_$n=w_$l?Math.pow(w_$l.getFloat(),.5):Math.pow(Math.random(),.5),w_$A[0]=w_$A[0]*w_$n,w_$A[1]=w_$A[1]*w_$n},w_$s._randomPointUnitCircle=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=NaN;w_$A=w_$h?w_$h.getFloat()*Math.PI*2:Math.random()*Math.PI*2,w_$l[0]=Math.cos(w_$A),w_$l[1]=Math.sin(w_$A)},w_$s._randomPointInsideUnitCircle=function(w_$B,w_$h){var w_$l=w_$B.elements;w_$s._randomPointUnitCircle(w_$B);var w_$A=NaN;w_$A=w_$h?Math.pow(w_$h.getFloat(),.5):Math.pow(Math.random(),.5),w_$l[0]=w_$l[0]*w_$A,w_$l[1]=w_$l[1]*w_$A},w_$s._randomPointUnitSphere=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=NaN,w_$n=NaN;w_$n=w_$h?(w_$A=w_$l[2]=2*w_$h.getFloat()-1,w_$h.getFloat()*Math.PI*2):(w_$A=w_$l[2]=2*Math.random()-1,Math.random()*Math.PI*2);var w_$s=Math.sqrt(1-w_$A*w_$A);w_$l[0]=w_$s*Math.cos(w_$n),w_$l[1]=w_$s*Math.sin(w_$n)},w_$s._randomPointInsideUnitSphere=function(w_$B,w_$h){var w_$l=w_$B.elements;w_$s._randomPointUnitSphere(w_$B);var w_$A=NaN;w_$A=w_$h?Math.pow(w_$h.getFloat(),1/3):Math.pow(Math.random(),1/3),w_$l[0]=w_$l[0]*w_$A,w_$l[1]=w_$l[1]*w_$A,w_$l[2]=w_$l[2]*w_$A},w_$s._randomPointInsideHalfUnitBox=function(w_$B,w_$h){var w_$l=w_$B.elements;w_$h?(w_$l[0]=w_$h.getFloat()-.5,w_$l[1]=w_$h.getFloat()-.5,w_$l[2]=w_$h.getFloat()-.5):(w_$l[0]=Math.random()-.5,w_$l[1]=Math.random()-.5,w_$l[2]=Math.random()-.5)},w_$s}(),w_$m=(function(){function w_$B(w_$B){this._size=null,this.enbale=!1,this._size=w_$B}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.cloneTo=function(w_$B){var w_$h=w_$B;this._size.cloneTo(w_$h._size),w_$h.enbale=this.enbale},w_$h.clone=function(){var w_$B;switch(this._size.type){case 0:w_$B=this._size.separateAxes?w_$g.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):w_$g.createByGradient(this._size.gradient.clone());break;case 1:w_$B=this._size.separateAxes?w_$g.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):w_$g.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:w_$B=this._size.separateAxes?w_$g.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):w_$g.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var w_$h=new this.constructor(w_$B);return w_$h.enbale=this.enbale,w_$h},w_$i(0,w_$h,"size",function(){return this._size})}(),function(){function w_$A(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}w_$Q(w_$A,"laya.d3.core.particleShuriKen.module.StartFrame");var w_$B=w_$A.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._type=this._type,w_$h._constant=this._constant,w_$h._constantMin=this._constantMin,w_$h._constantMax=this._constantMax},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$B,"constant",function(){return this._constant}),w_$i(0,w_$B,"type",function(){return this._type}),w_$i(0,w_$B,"constantMin",function(){return this._constantMin}),w_$i(0,w_$B,"constantMax",function(){return this._constantMax}),w_$A.createByConstant=function(w_$B){var w_$h=new w_$A;return w_$h._type=0,w_$h._constant=w_$B,w_$h},w_$A.createByRandomTwoConstant=function(w_$B,w_$h){var w_$l=new w_$A;return w_$l._type=1,w_$l._constantMin=w_$B,w_$l._constantMax=w_$h,w_$l},w_$A}()),w_$Y=(function(){function w_$B(w_$B,w_$h){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new w_$sh(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=w_$B,this._startFrame=w_$h}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.cloneTo=function(w_$B){var w_$h=w_$B;this.tiles.cloneTo(w_$h.tiles),w_$h.type=this.type,w_$h.randomRow=this.randomRow,this._frame.cloneTo(w_$h._frame),this._startFrame.cloneTo(w_$h._startFrame),w_$h.cycles=this.cycles,w_$h.enableUVChannels=this.enableUVChannels,w_$h.enable=this.enable},w_$h.clone=function(){var w_$B,w_$h;switch(this._frame.type){case 0:w_$B=w_$M.createByConstant(this._frame.constant);break;case 1:w_$B=w_$M.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:w_$B=w_$M.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:w_$B=w_$M.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:w_$h=w_$m.createByConstant(this._startFrame.constant);break;case 1:w_$h=w_$m.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var w_$l=new this.constructor(w_$B,w_$h);return this.tiles.cloneTo(w_$l.tiles),w_$l.type=this.type,w_$l.randomRow=this.randomRow,w_$l.cycles=this.cycles,w_$l.enableUVChannels=this.enableUVChannels,w_$l.enable=this.enable,w_$l},w_$i(0,w_$h,"frame",function(){return this._frame}),w_$i(0,w_$h,"startFrame",function(){return this._startFrame})}(),function(){function w_$B(w_$B){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=w_$B}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.cloneTo=function(w_$B){var w_$h=w_$B;this._velocity.cloneTo(w_$h._velocity),w_$h.enbale=this.enbale,w_$h.space=this.space},w_$h.clone=function(){var w_$B;switch(this._velocity.type){case 0:w_$B=w_$_.createByConstant(this._velocity.constant.clone());break;case 1:w_$B=w_$_.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:w_$B=w_$_.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:w_$B=w_$_.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var w_$h=new this.constructor(w_$B);return w_$h.enbale=this.enbale,w_$h.space=this.space,w_$h},w_$i(0,w_$h,"velocity",function(){return this._velocity})}(),function(){function w_$B(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new w_$bh,this._vb=w_$dh.create(w_$B._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=w_$_h.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=w_$jh.nameKey.getID("LINE"),this._shaderCompile=w_$Uh._preCompileShader[this._sharderNameID]}w_$Q(w_$B,"laya.d3.core.PhasorSpriter3D");var w_$h=w_$B.prototype;return w_$h.line=function(w_$B,w_$h,w_$l,w_$A){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w_$B.x,w_$B.y,w_$B.z,w_$h.x,w_$h.y,w_$h.z,w_$h.w),this.addVertex(w_$l.x,w_$l.y,w_$l.z,w_$A.x,w_$A.y,w_$A.z,w_$A.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},w_$h.circle=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*w_$h,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/w_$h,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*w_$B,Math.cos(this._tempNumver0)*w_$B,0,w_$l,w_$A,w_$n,w_$s),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},w_$h.plane=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=w_$A/2,this._tempNumver1=w_$n/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w_$B-this._tempNumver0,w_$h+this._tempNumver1,w_$l,w_$s,w_$X,w_$Z,w_$t),this.addVertex(w_$B+this._tempNumver0,w_$h+this._tempNumver1,w_$l,w_$s,w_$X,w_$Z,w_$t),this.addVertex(w_$B-this._tempNumver0,w_$h-this._tempNumver1,w_$l,w_$s,w_$X,w_$Z,w_$t),this.addVertex(w_$B+this._tempNumver0,w_$h-this._tempNumver1,w_$l,w_$s,w_$X,w_$Z,w_$t),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},w_$h.box=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=w_$A/2,this._tempNumver1=w_$n/2,this._tempNumver2=w_$s/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w_$B-this._tempNumver0,w_$h+this._tempNumver1,w_$l+this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B+this._tempNumver0,w_$h+this._tempNumver1,w_$l+this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B-this._tempNumver0,w_$h-this._tempNumver1,w_$l+this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B+this._tempNumver0,w_$h-this._tempNumver1,w_$l+this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B+this._tempNumver0,w_$h+this._tempNumver1,w_$l-this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B-this._tempNumver0,w_$h+this._tempNumver1,w_$l-this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B+this._tempNumver0,w_$h-this._tempNumver1,w_$l-this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B-this._tempNumver0,w_$h-this._tempNumver1,w_$l-this._tempNumver2,w_$X,w_$Z,w_$t,w_$P),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},w_$h.cone=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*w_$l+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*w_$l>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/w_$l,this.addVertexIndex(0,w_$h,0,w_$A,w_$n,w_$s,w_$X,this._tempUint0),this.addVertexIndex(0,0,0,w_$A,w_$n,w_$s,w_$X,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<w_$l;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(w_$B*this._tempNumver2,0,w_$B*this._tempNumver3,w_$A,w_$n,w_$s,w_$X,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==w_$l-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(w_$B*this._tempNumver2,0,w_$B*this._tempNumver3,w_$A,w_$n,w_$s,w_$X,this._tempUint0+(this._tempInt0+w_$l)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==w_$l-1?this.addIndexes(this._tempUint1+w_$l+2):this.addIndexes(this._tempUint1+this._tempInt0+w_$l+1),this.addIndexes(this._tempUint1+this._tempInt0+w_$l),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},w_$h.boundingBoxLine=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(w_$B,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B,w_$h,w_$s,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$A,w_$h,w_$s,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$A,w_$n,w_$l,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B,w_$n,w_$l,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$A,w_$h,w_$l,w_$X,w_$Z,w_$t,w_$P),this.addVertex(w_$B,w_$h,w_$l,w_$X,w_$Z,w_$t,w_$P),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},w_$h.addVertex=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=w_$B,this._vbData[this._posInVBData+1]=w_$h,this._vbData[this._posInVBData+2]=w_$l,this._vbData[this._posInVBData+3]=w_$A,this._vbData[this._posInVBData+4]=w_$n,this._vbData[this._posInVBData+5]=w_$s,this._vbData[this._posInVBData+6]=w_$X,this._posInVBData+=this._floatSizePerVer,this},w_$h.addVertexIndex=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){return this._hasBegun||this.addVertexIndexException(),this._vbData[w_$Z]=w_$B,this._vbData[w_$Z+1]=w_$h,this._vbData[w_$Z+2]=w_$l,this._vbData[w_$Z+3]=w_$A,this._vbData[w_$Z+4]=w_$n,this._vbData[w_$Z+5]=w_$s,this._vbData[w_$Z+6]=w_$X,(w_$Z+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=w_$Z),this},w_$h.addIndexes=function(w_$B){var w_$h=arguments;this._hasBegun||this.addVertexIndexException();for(var w_$l=0;w_$l<w_$h.length;w_$l++)this._ibData[this._posInIBData]=w_$h[w_$l],this._posInIBData++;return this},w_$h.begin=function(w_$B,w_$h){return this._hasBegun&&this.beginException0(),1!==w_$B&&4!==w_$B&&this.beginException1(),this._primitiveType=w_$B,this._camera=w_$h,this._hasBegun=!0,this},w_$h.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},w_$h.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(w_$B._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),w_$U.drawCall++,w_$S.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},w_$h.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},w_$h.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},w_$h.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},w_$h.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},w_$h.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},w_$h.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(28,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector4",1)])}]),w_$B}()),w_$K=function(){function w_$B(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++w_$B._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new w_$bh}w_$Q(w_$B,"laya.d3.core.render.RenderElement");var w_$h=w_$B.prototype;return w_$h.getDynamicBatchBakedVertexs=function(w_$B){for(var w_$h=this._renderObj._getVertexBuffer(w_$B),w_$l=w_$h.getData().slice(),w_$A=w_$h.vertexDeclaration,w_$n=w_$A.getVertexElementByUsage(0).offset/4,w_$s=w_$A.getVertexElementByUsage(3).offset/4,w_$X=this._sprite3D.transform,w_$Z=w_$X.worldMatrix,w_$t=w_$X.rotation,w_$P=w_$A.vertexStride/4,w_$G=0,w_$T=w_$l.length;w_$G<w_$T;w_$G+=w_$P){var w_$b=w_$G+w_$n,w_$Q=w_$G+w_$s;w_$Vh.transformVector3ArrayToVector3ArrayCoordinate(w_$l,w_$b,w_$Z,w_$l,w_$b),w_$Vh.transformVector3ArrayByQuat(w_$l,w_$Q,w_$t,w_$l,w_$Q)}return w_$l},w_$h.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},w_$h._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},w_$i(0,w_$h,"id",function(){return this._id}),w_$i(0,w_$h,"renderObj",function(){return this._renderObj},function(w_$B){this._renderObj!==w_$B&&(this._renderObj=w_$B)}),w_$B._uniqueIDCounter=0,w_$B}(),w_$f=function(){function w_$h(w_$B){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++w_$h._uniqueIDCounter,this._needSort=!1,this._scene=w_$B,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}w_$Q(w_$h,"laya.d3.core.render.RenderQueue");var w_$B=w_$h.prototype;return w_$B._sortOpaqueFunc=function(w_$B,w_$h){if(w_$B._render&&w_$h._render){var w_$l=w_$B._material.renderQueue-w_$h._material.renderQueue;return 0==w_$l?w_$B._render._distanceForSort-w_$h._render._distanceForSort:w_$l}return 0},w_$B._sortAlphaFunc=function(w_$B,w_$h){if(w_$B._render&&w_$h._render){var w_$l=w_$B._material.renderQueue-w_$h._material.renderQueue;return 0==w_$l?w_$h._render._distanceForSort-w_$B._render._distanceForSort:w_$l}return 0},w_$B._begainRenderElement=function(w_$B,w_$h,w_$l){return!!w_$h._beforeRender(w_$B)},w_$B._sortAlpha=function(w_$B){w_$h._cameraPosition=w_$B,this._finalElements.sort(this._sortAlphaFunc)},w_$B._sortOpaque=function(w_$B){w_$h._cameraPosition=w_$B,this._finalElements.sort(this._sortOpaqueFunc)},w_$B._preRender=function(w_$B){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},w_$B._render=function(w_$B,w_$h){for(var w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t=w_$U.loopCount,w_$P=this._scene,w_$G=w_$B.camera,w_$T=(w_$G.id,!1),w_$b=0,w_$Q=this._finalElements.length;w_$b<w_$Q;w_$b++){var w_$i,w_$$,w_$V,w_$J=this._finalElements[w_$b];if(null!=w_$J._onPreRenderFunction&&w_$J._onPreRenderFunction.call(w_$J._sprite3D,w_$B),0===w_$J._type){if(w_$B.owner=w_$V=w_$J._sprite3D,w_$B.renderElement=w_$J,w_$V._preRenderUpdateComponents(w_$B),w_$i=w_$J.renderObj,w_$$=w_$J._material,this._begainRenderElement(w_$B,w_$i,w_$$)){if(w_$l=w_$i._getVertexBuffers(),!(w_$n=(w_$A=w_$i._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[w_$A.id]){this._errorRecord[w_$A.id]=1;var w_$H="vertexBuffer:"+("("+w_$A._destroyed+","+w_$A._released+","+w_$A._referenceCount+","+w_$A._buffer+")")+", material:"+(w_$$?w_$$.__className+"("+w_$$._destroyed+","+w_$$._released+")":"null")+", owner:"+(w_$V?w_$V.__className+"("+w_$V._destroyed+","+w_$V._activeInHierarchy+","+w_$V._displayedInStage+")":"null")+", renderObj:"+(w_$i?w_$i.__className+"("+w_$i._destroyed+","+w_$i._released+","+w_$i._referenceCount+")":"")+", parent:, url:"+(w_$V?w_$V.url:"")+", disposeStack:"+w_$A.disposeStack;w_$o.recordError("报错：unknown vertexDeclaration  "+w_$H)}continue}if(w_$T=(w_$s=w_$B._shader=w_$$._getShader(w_$P._shaderDefineValue,w_$n.shaderDefineValue,w_$V._shaderDefineValue)).bind()||w_$t!==w_$s._uploadLoopCount,w_$l){if(w_$s._uploadVertexBuffer!==w_$l||w_$T){for(var w_$y=0;w_$y<w_$l.length;w_$y++){var w_$C=w_$l[w_$y];w_$s.uploadAttributesX(w_$C.vertexDeclaration.shaderValues.data,w_$C)}w_$s._uploadVertexBuffer=w_$l}}else(w_$s._uploadVertexBuffer!==w_$A||w_$T)&&(w_$s.uploadAttributes(w_$n.shaderValues.data,null),w_$s._uploadVertexBuffer=w_$A);(w_$s._uploadScene!==w_$P||w_$T)&&(w_$s.uploadSceneUniforms(w_$P._shaderValues.data),w_$s._uploadScene=w_$P),(w_$G!==w_$s._uploadCamera||w_$s._uploadSprite3D!==w_$V||w_$T)&&(w_$s.uploadSpriteUniforms(w_$V._shaderValues.data),w_$s._uploadSprite3D=w_$V),(w_$G!==w_$s._uploadCamera||w_$T)&&(w_$s.uploadCameraUniforms(w_$G._shaderValues.data),w_$s._uploadCamera=w_$G),(w_$s._uploadMaterial!==w_$$||w_$T)&&(w_$$._upload(),w_$s._uploadMaterial=w_$$),w_$X!==w_$$?(w_$$._setRenderStateBlendDepth(),w_$$._setRenderStateFrontFace(w_$h,w_$V.transform),w_$X=w_$$,w_$Z=w_$V):w_$Z!==w_$V&&(w_$$._setRenderStateFrontFace(w_$h,w_$V.transform),w_$Z=w_$V),w_$i._render(w_$B),w_$s._uploadLoopCount=w_$t}w_$V._postRenderUpdateComponents(w_$B)}else if(2===w_$J._type){w_$J.renderObj;w_$B.owner=w_$V=w_$J._sprite3D,w_$B.renderElement=w_$J,w_$B._batchIndexStart=w_$J._tempBatchIndexStart,w_$B._batchIndexEnd=w_$J._tempBatchIndexEnd,w_$i=w_$J.renderObj,w_$$=w_$J._material,this._begainRenderElement(w_$B,w_$i,w_$$)&&(w_$n=(w_$A=w_$i._getVertexBuffer(0)).vertexDeclaration,w_$T=(w_$s=w_$B._shader=w_$$._getShader(w_$P._shaderDefineValue,w_$n.shaderDefineValue,w_$V._shaderDefineValue)).bind()||w_$t!==w_$s._uploadLoopCount,(w_$s._uploadVertexBuffer!==w_$A||w_$T)&&(w_$s.uploadAttributes(w_$n.shaderValues.data,null),w_$s._uploadVertexBuffer=w_$A),(w_$s._uploadScene!==w_$P||w_$T)&&(w_$s.uploadSceneUniforms(w_$P._shaderValues.data),w_$s._uploadScene=w_$P),(w_$G!==w_$s._uploadCamera||w_$s._uploadSprite3D!==w_$V||w_$T)&&(w_$s.uploadSpriteUniforms(w_$V._shaderValues.data),w_$s._uploadSprite3D=w_$V),(w_$G!==w_$s._uploadCamera||w_$T)&&(w_$s.uploadCameraUniforms(w_$G._shaderValues.data),w_$s._uploadCamera=w_$G),(w_$s._uploadMaterial!==w_$$||w_$T)&&(w_$$._upload(),w_$s._uploadMaterial=w_$$),w_$X!==w_$$?(w_$$._setRenderStateBlendDepth(),w_$$._setRenderStateFrontFace(w_$h,w_$V.transform),w_$X=w_$$,w_$Z=w_$V):w_$Z!==w_$V&&(w_$$._setRenderStateFrontFace(w_$h,w_$V.transform),w_$Z=w_$V),w_$i._render(w_$B),w_$s._uploadLoopCount=w_$t)}}},w_$B._renderShadow=function(w_$B,w_$h){for(var w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z=w_$U.loopCount,w_$t=this._scene,w_$P=w_$B.camera,w_$G=!1,w_$T=0,w_$b=this._finalElements.length;w_$T<w_$b;w_$T++){var w_$Q,w_$i,w_$$,w_$V=this._finalElements[w_$T];0===w_$V._type&&(w_$B.owner=w_$$=w_$V._sprite3D,w_$h||w_$$._projectionViewWorldUpdateCamera===w_$P&&w_$$._projectionViewWorldUpdateLoopCount===w_$U.loopCount||(w_$$._render._renderUpdate(w_$B._projectionViewMatrix),w_$$._projectionViewWorldUpdateLoopCount=w_$U.loopCount,w_$$._projectionViewWorldUpdateCamera=w_$P),w_$B.renderElement=w_$V,w_$$._preRenderUpdateComponents(w_$B),w_$Q=w_$V.renderObj,w_$i=w_$V._material,this._begainRenderElement(w_$B,w_$Q,null)&&(w_$A=(w_$l=w_$Q._getVertexBuffer(0)).vertexDeclaration,w_$G=(w_$n=w_$B._shader=w_$i._getShader(w_$t._shaderDefineValue,w_$A.shaderDefineValue,w_$$._shaderDefineValue)).bind()||w_$Z!==w_$n._uploadLoopCount,(w_$n._uploadVertexBuffer!==w_$l||w_$G)&&(w_$n.uploadAttributes(w_$A.shaderValues.data,null),w_$n._uploadVertexBuffer=w_$l),(w_$P!==w_$n._uploadCamera||w_$n._uploadSprite3D!==w_$$||w_$G)&&(w_$n.uploadSpriteUniforms(w_$$._shaderValues.data),w_$n._uploadSprite3D=w_$$),(w_$P!==w_$n._uploadCamera||w_$G)&&(w_$n.uploadCameraUniforms(w_$P._shaderValues.data),w_$n._uploadCamera=w_$P),(w_$n._uploadMaterial!==w_$i||w_$G)&&(w_$i._upload(),w_$n._uploadMaterial=w_$i),w_$n._uploadRenderElement,w_$s!==w_$i?(w_$i._setRenderStateFrontFace(!1,w_$$.transform),w_$s=w_$i,w_$X=w_$$):w_$X!==w_$$&&(w_$i._setRenderStateFrontFace(!1,w_$$.transform),w_$X=w_$$),w_$Q._render(w_$B),w_$n._uploadLoopCount=w_$Z),w_$$._postRenderUpdateComponents(w_$B))}},w_$B._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},w_$B._addRenderElement=function(w_$B){this._renderElements.push(w_$B),this._needSort=!0},w_$B._addDynamicBatchElement=function(w_$B){this._dynamicBatchCombineRenderElements.push(w_$B)},w_$i(0,w_$B,"id",function(){return this._id}),w_$h._uniqueIDCounter=0,w_$h._cameraPosition=null,w_$h}(),w_$I=function(){function w_$B(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return w_$Q(w_$B,"laya.d3.core.render.RenderState"),w_$B.clientWidth=0,w_$B.clientHeight=0,w_$B}(),w_$L=function(){function w_$X(w_$B,w_$h){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new w_$qB(new w_$Xh,0),this._corners=[new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh],this._boundingBoxCenter=new w_$Xh,this._children=w_$A(8),this._objects=[],this._tempBoundBoxCorners=[new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh],this._scene=w_$B,this._currentDepth=w_$h}w_$Q(w_$X,"laya.d3.core.scene.OctreeNode");var w_$B=w_$X.prototype;return w_$o.imps(w_$B,{"laya.d3.core.scene.ITreeNode":!0}),w_$B.init=function(w_$B,w_$h){var w_$l=new w_$Xh,w_$A=new w_$Xh;w_$Xh.scale(w_$h,-.5,w_$l),w_$Xh.scale(w_$h,.5,w_$A),w_$Xh.add(w_$l,w_$B,w_$l),w_$Xh.add(w_$A,w_$B,w_$A),this.exactBox=new w_$LB(w_$l,w_$A),this.relaxBox=new w_$LB(w_$l,w_$A)},w_$B.addTreeNode=function(w_$B){1===Collision.boxContainsBox(this._relaxBox,w_$B.boundingBox)?this.addNodeDown(w_$B,0):this.addObject(w_$B)},w_$B.addChild=function(w_$B){var w_$h=this._children[w_$B];if(null==w_$h){w_$h=new w_$X(this._scene,this._currentDepth+1),(this._children[w_$B]=w_$h)._parent=this,w_$Xh.subtract(this._exactBox.max,this._exactBox.min,w_$X.tempSize),w_$Xh.multiply(w_$X.tempSize,w_$X._octreeSplit[w_$B],w_$X.tempCenter),w_$Xh.add(this._exactBox.min,w_$X.tempCenter,w_$X.tempCenter),w_$Xh.scale(w_$X.tempSize,.25,w_$X.tempSize);var w_$l=new w_$Xh,w_$A=new w_$Xh;w_$Xh.subtract(w_$X.tempCenter,w_$X.tempSize,w_$l),w_$Xh.add(w_$X.tempCenter,w_$X.tempSize,w_$A),w_$h.exactBox=new w_$LB(w_$l,w_$A),w_$Xh.scale(w_$X.tempSize,w_$X.relax,w_$X.tempSize);var w_$n=new w_$Xh,w_$s=new w_$Xh;w_$Xh.subtract(w_$X.tempCenter,w_$X.tempSize,w_$n),w_$Xh.add(w_$X.tempCenter,w_$X.tempSize,w_$s),w_$h.relaxBox=new w_$LB(w_$n,w_$s)}return w_$h},w_$B.addObject=function(w_$B){(w_$B._treeNode=this)._objects.push(w_$B)},w_$B.removeObject=function(w_$B){if(w_$B._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var w_$h=this._objects.indexOf(w_$B);return-1!==w_$h&&(this._objects.splice(w_$h,1),!0)},w_$B.clearObject=function(){this._objects.length=0},w_$B.addNodeUp=function(w_$B,w_$h){this._parent&&1!==Collision.boxContainsBox(this._exactBox,w_$B.boundingBox)?this._parent.addNodeUp(w_$B,w_$h-1):this.addNodeDown(w_$B,w_$h)},w_$B.addNodeDown=function(w_$B,w_$h){if(w_$h<this._scene.treeLevel){var w_$l=this.inChildIndex(w_$B.boundingBoxCenter),w_$A=this.addChild(w_$l);1===Collision.boxContainsBox(w_$A._relaxBox,w_$B.boundingBox)?w_$A.addNodeDown(w_$B,++w_$h):this.addObject(w_$B)}else this.addObject(w_$B)},w_$B.inChildIndex=function(w_$B){return 4*(w_$B.z<this._boundingBoxCenter.z?0:1)+2*(w_$B.y<this._boundingBoxCenter.y?0:1)+(w_$B.x<this._boundingBoxCenter.x?0:1)},w_$B.updateObject=function(w_$B){1===Collision.boxContainsBox(this._relaxBox,w_$B.boundingBox)?(this.removeObject(w_$B),w_$B._treeNode=null,this.addNodeDown(w_$B,this._currentDepth)):this._parent&&(this.removeObject(w_$B),w_$B._treeNode=null,this._parent.addNodeUp(w_$B,this._currentDepth-1))},w_$B.cullingObjects=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s,w_$X=0,w_$Z=0,w_$t=0,w_$P=this._scene._dynamicBatchManager;for(w_$X=0,w_$s=this._objects.length;w_$X<w_$s;w_$X++){var w_$G=this._objects[w_$X];if(w_$W.isVisible(w_$G._owner.layer.mask)&&w_$G.enable){if(w_$h&&(w_$U.treeSpriteCollision+=1,0===w_$B.containsBoundSphere(w_$G.boundingSphere)))continue;w_$G._renderUpdate(w_$n),w_$G._distanceForSort=w_$Xh.distance(w_$G.boundingSphere.center,w_$A)+w_$G.sortingFudge;var w_$T=w_$G._renderElements;for(w_$Z=0,w_$t=w_$T.length;w_$Z<w_$t;w_$Z++){var w_$b=w_$T[w_$Z],w_$Q=w_$b._staticBatch;if(w_$Q&&w_$Q._material===w_$b._material)w_$Q._addBatchRenderElement(w_$b);else{var w_$i=w_$b.renderObj;w_$i.triangleCount<10&&1===w_$i._vertexBufferCount&&w_$i._getIndexBuffer()&&w_$b._material.renderQueue<2&&w_$b._canDynamicBatch&&!w_$G._owner.isStatic?w_$P._addPrepareRenderElement(w_$b):this._scene.getRenderQueue(w_$b._material.renderQueue)._addRenderElement(w_$b)}}}}for(w_$X=0;w_$X<8;w_$X++){var w_$$=this._children[w_$X];if(null!=w_$$){var w_$V=w_$h;if(w_$h){var w_$J=w_$B.containsBoundBox(w_$$._relaxBox);if(w_$U.treeNodeCollision+=1,0===w_$J)continue;w_$V=2===w_$J}w_$$.cullingObjects(w_$B,w_$V,w_$l,w_$A,w_$n)}}},w_$B.cullingShadowObjects=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s,w_$X=0,w_$Z=0,w_$t=0;this._scene._dynamicBatchManager;for(w_$X=0,w_$s=this._objects.length;w_$X<w_$s;w_$X++){var w_$P=this._objects[w_$X];if(w_$P.castShadow&&w_$W.isVisible(w_$P._owner.layer.mask)&&w_$P.enable){if(w_$l&&0===w_$B[0].containsBoundSphere(w_$P.boundingSphere))continue;for(var w_$G=1,w_$T=w_$B.length;w_$G<w_$T;w_$G++){var w_$b=w_$h[w_$G-1];if(0!==w_$B[w_$G].containsBoundSphere(w_$P.boundingSphere)){var w_$Q=w_$P._renderElements;for(w_$Z=0,w_$t=w_$Q.length;w_$Z<w_$t;w_$Z++)w_$b._addRenderElement(w_$Q[w_$Z])}}}}for(w_$X=0;w_$X<8;w_$X++){var w_$i=this._children[w_$X];if(null!=w_$i){var w_$$=w_$l;if(w_$l){var w_$V=w_$B[0].containsBoundBox(w_$i._relaxBox);if(0===w_$V)continue;w_$$=2===w_$V}w_$i.cullingShadowObjects(w_$B,w_$h,w_$$,w_$A,w_$n)}}},w_$B.cullingShadowObjectsOnePSSM=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X,w_$Z=w_$h[0],w_$t=0,w_$P=0,w_$G=0;for(w_$t=0,w_$X=this._objects.length;w_$t<w_$X;w_$t++){var w_$T=this._objects[w_$t];if(w_$T.castShadow&&w_$W.isVisible(w_$T._owner.layer.mask)&&w_$T.enable){if(w_$A&&0===w_$B.containsBoundSphere(w_$T.boundingSphere))continue;w_$T._renderUpdate(w_$l);var w_$b=w_$T._renderElements;for(w_$P=0,w_$G=w_$b.length;w_$P<w_$G;w_$P++)w_$Z._addRenderElement(w_$b[w_$P])}}for(w_$t=0;w_$t<8;w_$t++){var w_$Q=this._children[w_$t];if(null!=w_$Q){var w_$i=w_$A;if(w_$A){var w_$$=w_$B.containsBoundBox(w_$Q._relaxBox);if(0===w_$$)continue;w_$i=2===w_$$}w_$Q.cullingShadowObjectsOnePSSM(w_$B,w_$h,w_$l,w_$i,w_$n,w_$s)}}},w_$B.renderBoudingBox=function(w_$B){this._renderBoudingBox(w_$B);for(var w_$h=0;w_$h<8;++w_$h){var w_$l=this._children[w_$h];w_$l&&w_$l.renderBoudingBox(w_$B)}},w_$B.buildAllChild=function(w_$B){if(w_$B<this._scene.treeLevel)for(var w_$h=0;w_$h<8;w_$h++){this.addChild(w_$h).buildAllChild(w_$B+1)}},w_$B._renderBoudingBox=function(w_$B){},w_$i(0,w_$B,"exactBox",function(){return this._exactBox},function(w_$B){this._exactBox=w_$B,w_$Xh.add(w_$B.min,w_$B.max,this._boundingBoxCenter),w_$Xh.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),w_$i(0,w_$B,"relaxBox",function(){return this._relaxBox},function(w_$B){(this._relaxBox=w_$B).getCorners(this._corners),w_$qB.createfromPoints(this._corners,this._boundingSphere)}),w_$X.debugMode=!1,w_$X.relax=1.15,w_$X.CHILDNUM=8,w_$T(w_$X,["tempVector0",function(){return this.tempVector0=new w_$Xh},"tempSize",function(){return this.tempSize=new w_$Xh},"tempCenter",function(){return this.tempCenter=new w_$Xh},"_octreeSplit",function(){return this._octreeSplit=[new w_$Xh(.25,.25,.25),new w_$Xh(.75,.25,.25),new w_$Xh(.25,.75,.25),new w_$Xh(.75,.75,.25),new w_$Xh(.25,.25,.75),new w_$Xh(.75,.25,.75),new w_$Xh(.25,.75,.75),new w_$Xh(.75,.75,.75)]}]),w_$X}(),w_$e=(function(){function w_$B(){}w_$Q(w_$B,"laya.d3.core.scene.SceneManager")}(),function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===w_$B&&(w_$B=1),void 0===w_$h&&(w_$h=1),void 0===w_$l&&(w_$l=1),void 0===w_$A&&(w_$A=1),this._r=w_$B,this._g=w_$h,this._b=w_$l,this._a=w_$A}return w_$Q(w_$B,"laya.d3.core.trail.module.Color",null,"Color$1"),w_$B.prototype.cloneTo=function(w_$B){w_$B._r=this._r,w_$B._g=this._g,w_$B._b=this._b,w_$B._a=this._a},w_$T(w_$B,["RED",function(){return this.RED=new w_$B(1,0,0,1)},"GREEN",function(){return this.GREEN=new w_$B(0,1,0,1)},"BLUE",function(){return this.BLUE=new w_$B(0,0,1,1)},"CYAN",function(){return this.CYAN=new w_$B(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new w_$B(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new w_$B(1,0,1,1)},"GRAY",function(){return this.GRAY=new w_$B(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new w_$B(1,1,1,1)},"BLACK",function(){return this.BLACK=new w_$B(0,0,0,1)}]),w_$B}()),w_$q=(function(){function w_$B(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}w_$Q(w_$B,"laya.d3.core.trail.module.Gradient");var w_$h=w_$B.prototype;w_$h.setKeys=function(w_$B,w_$h){var w_$l,w_$A;this._colorKeys=w_$B;for(var w_$n=this.index=0;w_$n<w_$B.length;w_$n++){var w_$s=(w_$l=w_$B[w_$n]).color;this._colorKeyData[this.index++]=w_$s._r,this._colorKeyData[this.index++]=w_$s._g,this._colorKeyData[this.index++]=w_$s._b,this._colorKeyData[this.index++]=w_$l.time}this._alphaKeys=w_$h;for(var w_$X=this.index=0;w_$X<w_$h.length;w_$X++)w_$A=w_$h[w_$X],this._alphaKeyData[this.index++]=w_$A.alpha,this._alphaKeyData[this.index++]=w_$A.time},w_$h.cloneTo=function(w_$B){var w_$h=0,w_$l=0,w_$A=this.colorKeys,w_$n=[];for(w_$h=0,w_$l=w_$A.length;w_$h<w_$l;w_$h++){var w_$s=new w_$D;w_$A[w_$h].cloneTo(w_$s),w_$n.push(w_$s)}var w_$X=this.alphaKeys,w_$Z=[];for(w_$h=0,w_$l=w_$X.length;w_$h<w_$l;w_$h++){var w_$t=new w_$q;w_$X[w_$h].cloneTo(w_$t),w_$Z.push(w_$t)}w_$B.setKeys(w_$n,w_$Z)},w_$i(0,w_$h,"mode",function(){return this._mode},function(w_$B){this._mode=w_$B}),w_$i(0,w_$h,"colorKeys",function(){return this._colorKeys},function(w_$B){this._colorKeys=w_$B;for(var w_$h=this.index=0;w_$h<w_$B.length;w_$h++){var w_$l=w_$B[w_$h],w_$A=w_$l.color;this._colorKeyData[this.index++]=w_$A._r,this._colorKeyData[this.index++]=w_$A._g,this._colorKeyData[this.index++]=w_$A._b,this._colorKeyData[this.index++]=w_$l.time}}),w_$i(0,w_$h,"alphaKeys",function(){return this._alphaKeys},function(w_$B){this._alphaKeys=w_$B;for(var w_$h=this.index=0;w_$h<w_$B.length;w_$h++){var w_$l=w_$B[w_$h];this._alphaKeyData[this.index++]=w_$l.alpha,this._alphaKeyData[this.index++]=w_$l.time}})}(),function(){function w_$B(w_$B,w_$h){this._alpha=NaN,this._time=NaN,void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),this._alpha=w_$B,this._time=w_$h}w_$Q(w_$B,"laya.d3.core.trail.module.GradientAlphaKey");var w_$h=w_$B.prototype;return w_$h.cloneTo=function(w_$B){w_$B.alpha=this.alpha,w_$B.time=this.time},w_$i(0,w_$h,"alpha",function(){return this._alpha},function(w_$B){this._alpha=w_$B}),w_$i(0,w_$h,"time",function(){return this._time},function(w_$B){this._time=w_$B}),w_$B}()),w_$D=function(){function w_$B(w_$B,w_$h){this._color=null,this._time=NaN,void 0===w_$h&&(w_$h=0),this._color=w_$B||new w_$e,this._time=w_$h}w_$Q(w_$B,"laya.d3.core.trail.module.GradientColorKey");var w_$h=w_$B.prototype;return w_$h.cloneTo=function(w_$B){this.color.cloneTo(w_$B.color),w_$B.time=this.time},w_$i(0,w_$h,"color",function(){return this._color},function(w_$B){this._color=w_$B}),w_$i(0,w_$h,"time",function(){return this._time},function(w_$B){this._time=w_$B}),w_$B}(),w_$r=(function(){function w_$B(){}w_$Q(w_$B,"laya.d3.core.trail.module.GradientMode"),w_$B.Blend=0,w_$B.Fixed=1}(),function(){function w_$B(){}w_$Q(w_$B,"laya.d3.core.trail.module.TextureMode"),w_$B.Stretch=0,w_$B.Tile=1}(),function(){function w_$B(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}w_$Q(w_$B,"laya.d3.core.trail.module.TrailKeyFrame"),w_$B.prototype.cloneTo=function(w_$B){w_$B.time=this.time,w_$B.inTangent=this.inTangent,w_$B.outTangent=this.outTangent,w_$B.value=this.value}}(),function(){function w_$h(w_$B){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new w_$Xh,this._curPosition=new w_$Xh,this._delVector3=new w_$Xh,this._lastFixedVertexPosition=new w_$Xh,this._pointAtoBVector3=new w_$Xh,this._pointA=new w_$Xh,this._pointB=new w_$Xh,this._owner=w_$B,this._id=w_$h.renderElementCount++,0==this._id?w_$B._owner.transform.position.cloneTo(this._lastPosition):w_$B._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new w_$dh(w_$r.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new w_$dh(w_$r.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}w_$Q(w_$h,"laya.d3.core.trail.TrailRenderElement");var w_$B=w_$h.prototype;w_$o.imps(w_$B,{"laya.d3.core.render.IRenderable":!0}),w_$B._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},w_$B._addTrailByFirstPosition=function(w_$B,w_$h){w_$Xh.subtract(w_$h,w_$B,this._delVector3),w_$Xh.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),w_$Xh.normalize(this._pointAtoBVector3,this._pointAtoBVector3),w_$Xh.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(w_$B),w_$B.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},w_$B._addTrailByNextPosition=function(w_$B){w_$Xh.subtract(w_$B,this._lastFixedVertexPosition,this._delVector3),w_$Xh.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),w_$Xh.normalize(this._pointAtoBVector3,this._pointAtoBVector3),w_$Xh.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=w_$Xh.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=w_$DB.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(w_$B),w_$B.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(w_$B),this._virtualVerticesCount=2)},w_$B._updateVerticesByPosition=function(w_$B){this._pointe=w_$B.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},w_$B._updateVertexBuffer2=function(){var w_$B,w_$h=0,w_$l=0,w_$A=0;for(w_$A=0,w_$B=(this._verticesCount+this._virtualVerticesCount)/2;w_$A<w_$B;w_$A++)w_$l=0==this._owner.textureMode?(this._VerticesToTailLength[w_$A]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[w_$A],this._vertices2[w_$h++]=1-w_$l,this._vertices2[w_$h++]=1-w_$l;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},w_$B._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},w_$B._updateDisappear=function(){var w_$B,w_$h=0;for(w_$h=this._curDisappearIndex,w_$B=(this._verticesCount+this._virtualVerticesCount)/2;w_$h<w_$B;w_$h++)this._owner._curtime-this._everyGroupVertexBirthTime[w_$h]>=this._owner.time+w_$DB.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},w_$B._beforeRender=function(w_$B){return this._camera=w_$B.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),w_$Xh.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},w_$B._render=function(w_$B){this._isDead||(w_$S.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),w_$U.drawCall++,w_$U.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},w_$B._getVertexBuffer=function(w_$B){return void 0===w_$B&&(w_$B=0),0===w_$B?this._vertexBuffer1:1===w_$B?this._vertexBuffer2:null},w_$B._getVertexBuffers=function(){return this._vertexBuffers},w_$B._getIndexBuffer=function(){return null},w_$B.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},w_$B._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},w_$i(0,w_$B,"_vertexBufferCount",function(){return this._vertexBuffers.length}),w_$i(0,w_$B,"triangleCount",function(){return 0}),w_$h.renderElementCount=0}(),function(){function w_$B(){}w_$Q(w_$B,"laya.d3.core.trail.VertexTrail");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration1}),w_$i(1,w_$B,"vertexDeclaration1",function(){return w_$B._vertexDeclaration1}),w_$i(1,w_$B,"vertexDeclaration2",function(){return w_$B._vertexDeclaration2}),w_$T(w_$B,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new w_$sB(32,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",41),new w_$XB(24,"single",33),new w_$XB(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new w_$sB(4,[new w_$XB(0,"single",38)])}]),w_$B}()),w_$BB=function(){function w_$C(w_$B){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=w_$B}w_$Q(w_$C,"laya.d3.graphics.DynamicBatch");var w_$B=w_$C.prototype;return w_$o.imps(w_$B,{"laya.d3.core.render.IRenderable":!0}),w_$B._getVertexBuffer=function(w_$B){return void 0===w_$B&&(w_$B=0),0===w_$B?this._vertexBuffer:null},w_$B._getIndexBuffer=function(){return this._indexBuffer},w_$B._getCombineRenderElementFromPool=function(w_$B,w_$h,w_$l){var w_$A=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return w_$A||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=w_$A=new w_$K,w_$A._sprite3D=new w_$fh),w_$A._sprite3D._render._renderUpdate(w_$l),w_$A},w_$B._getRenderElement=function(w_$B,w_$h,w_$l){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*w_$C.maxVertexCount),this._indexDatas=new Uint16Array(w_$C.maxIndexCount),this._vertexBuffer=w_$dh.create(this._vertexDeclaration,w_$C.maxVertexCount,35048),this._indexBuffer=w_$_h.create("ushort",w_$C.maxIndexCount,35048));for(var w_$A=this._merageElements.length=0,w_$n=0,w_$s=0,w_$X=this._combineRenderElements.length;w_$s<w_$X;w_$s++){var w_$Z=this._combineRenderElements[w_$s],w_$t=w_$Z.getDynamicBatchBakedVertexs(0),w_$P=w_$Z.getBakedIndices(),w_$G=w_$Z._sprite3D.transform._isFrontFaceInvert,w_$T=w_$A/(this._vertexDeclaration.vertexStride/4),w_$b=w_$n,w_$Q=w_$b+w_$P.length;w_$Z._tempBatchIndexStart=w_$b,w_$Z._tempBatchIndexEnd=w_$Q,this._indexDatas.set(w_$P,w_$n);var w_$i=0;if(w_$G)for(w_$i=w_$b;w_$i<w_$Q;w_$i+=3){this._indexDatas[w_$i]=w_$T+this._indexDatas[w_$i];var w_$$=this._indexDatas[w_$i+1],w_$V=this._indexDatas[w_$i+2];this._indexDatas[w_$i+1]=w_$T+w_$V,this._indexDatas[w_$i+2]=w_$T+w_$$}else for(w_$i=w_$b;w_$i<w_$Q;w_$i+=3)this._indexDatas[w_$i]=w_$T+this._indexDatas[w_$i],this._indexDatas[w_$i+1]=w_$T+this._indexDatas[w_$i+1],this._indexDatas[w_$i+2]=w_$T+this._indexDatas[w_$i+2];w_$n+=w_$P.length,this._vertexDatas.set(w_$t,w_$A),w_$A+=w_$t.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),w_$s=this._combineRenderElementPoolIndex=0,w_$X=this._materials.length;w_$s<w_$X;w_$s++){var w_$J=this._getCombineRenderElementFromPool(w_$B,w_$h,w_$l);w_$J._type=2,w_$J._staticBatch=null;var w_$H=(w_$J.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[w_$s]]._tempBatchIndexStart,w_$y=w_$s+1===this._materialToRenderElementsOffsets.length?w_$n:this._combineRenderElements[this._materialToRenderElementsOffsets[w_$s+1]]._tempBatchIndexStart;w_$J._tempBatchIndexStart=w_$H,w_$J._tempBatchIndexEnd=w_$y,w_$J._material=this._materials[w_$s],this._merageElements.push(w_$J)}},w_$B._addCombineRenderObjTest=function(w_$B){var w_$h=w_$B.renderObj,w_$l=this._currentCombineIndexCount+w_$h._getIndexBuffer().indexCount,w_$A=this._currentCombineVertexCount+w_$h._getVertexBuffer().vertexCount;return!(w_$C.maxVertexCount<w_$A||w_$C.maxIndexCount<w_$l)},w_$B._addCombineRenderObj=function(w_$B){var w_$h=w_$B.renderObj;this._combineRenderElements.push(w_$B),this._currentCombineIndexCount=this._currentCombineIndexCount+w_$h._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+w_$h._getVertexBuffer().vertexCount},w_$B._addCombineMaterial=function(w_$B){this._materials.push(w_$B)},w_$B._addMaterialToRenderElementOffset=function(w_$B){this._materialToRenderElementsOffsets.push(w_$B)},w_$B._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},w_$B._addToRenderQueue=function(w_$B,w_$h,w_$l,w_$A){this._getRenderElement(w_$h,w_$l,w_$A);for(var w_$n=0,w_$s=this._materials.length;w_$n<w_$s;w_$n++)w_$B.getRenderQueue(this._materials[w_$n].renderQueue)._addDynamicBatchElement(this._merageElements[w_$n])},w_$B._beforeRender=function(w_$B){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w_$B._render=function(w_$B){var w_$h=w_$B._batchIndexEnd-w_$B._batchIndexStart;w_$S.mainContext.drawElements(4,w_$h,5123,2*w_$B._batchIndexStart),w_$U.drawCall++,w_$U.trianglesFaces+=w_$h/3},w_$B._getVertexBuffers=function(){return null},w_$i(0,w_$B,"_vertexBufferCount",function(){return 1}),w_$i(0,w_$B,"triangleCount",function(){return this._indexBuffer.indexCount/3}),w_$i(0,w_$B,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),w_$C.maxVertexCount=2e4,w_$C.maxIndexCount=4e4,w_$C.maxCombineTriangleCount=10,w_$C}(),w_$hB=function(){function w_$C(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}w_$Q(w_$C,"laya.d3.graphics.DynamicBatchManager");var w_$B=w_$C.prototype;return w_$B.getDynamicBatch=function(w_$B,w_$h){var w_$l,w_$A=w_$B.id.toString()+w_$h;return this._dynamicBatches[w_$A]?w_$l=this._dynamicBatches[w_$A]:this._dynamicBatches[w_$A]=w_$l=new w_$BB(w_$B),w_$l},w_$B._garbageCollection=function(){for(var w_$B in this._dynamicBatches)0===this._dynamicBatches[w_$B].combineRenderElementsCount&&delete this._dynamicBatches[w_$B]},w_$B._addPrepareRenderElement=function(w_$B){this._prepareDynamicBatchCombineElements.push(w_$B)},w_$B._finishCombineDynamicBatch=function(w_$B){var w_$h,w_$l,w_$A;this._prepareDynamicBatchCombineElements.sort(w_$C._sortPrepareDynamicBatch);for(var w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P=-1,w_$G=!0,w_$T=0,w_$b=-1,w_$Q=0,w_$i=this._prepareDynamicBatchCombineElements.length;w_$Q<w_$i;w_$Q++){var w_$$=(w_$s=this._prepareDynamicBatchCombineElements[w_$Q]).renderObj._getVertexBuffer(0).vertexDeclaration,w_$V=w_$l!==w_$$;w_$V&&(w_$T=0,w_$l=w_$$);var w_$J=w_$T!==w_$P;if(w_$J&&(w_$P=w_$T),(w_$V||w_$J)&&(w_$X=this.getDynamicBatch(w_$$,w_$T),w_$h=null),w_$G)if(w_$X._addCombineRenderObjTest(w_$s)){if(w_$h!==(w_$n=w_$s._material))w_$Z&&(w_$B.getRenderQueue(w_$t._material.renderQueue)._addRenderElement(w_$t),w_$t=w_$Z=null,w_$b=-1),w_$Z=w_$n,w_$b=w_$X.combineRenderElementsCount,w_$t=w_$s,w_$h=w_$n;else if(w_$Z){var w_$H=w_$t.renderObj,w_$y=w_$s.renderObj;w_$H._getVertexBuffer().vertexCount+w_$y._getVertexBuffer().vertexCount>w_$BB.maxVertexCount||w_$H._getIndexBuffer().indexCount+w_$y._getIndexBuffer().indexCount>w_$BB.maxIndexCount?(w_$B.getRenderQueue(w_$t._material.renderQueue)._addRenderElement(w_$t),w_$Z=w_$n,w_$b=w_$X.combineRenderElementsCount,w_$t=w_$s):(w_$X._addCombineMaterial(w_$Z),w_$X._addMaterialToRenderElementOffset(w_$b),w_$X._addCombineRenderObj(w_$t),w_$t=w_$Z=null,w_$b=-1,w_$X._addCombineRenderObj(w_$s))}else w_$X._addCombineRenderObj(w_$s);w_$G=!0}else w_$Z&&(w_$B.getRenderQueue(w_$t._material.renderQueue)._addRenderElement(w_$t),w_$t=w_$Z=null,w_$b=-1),w_$T++,w_$G=!1;else w_$A=this._prepareDynamicBatchCombineElements[w_$Q-1],w_$X._addMaterialToRenderElementOffset(w_$X.combineRenderElementsCount),w_$h=w_$A._material,w_$X._addCombineMaterial(w_$h),w_$X._addCombineRenderObj(w_$A),w_$G=!0,w_$h!==(w_$n=w_$s._material)?(w_$Z=w_$n,w_$b=w_$X.combineRenderElementsCount,w_$t=w_$s):w_$X._addCombineRenderObj(w_$s),w_$h=w_$n}w_$Z&&(w_$B.getRenderQueue(w_$t._material.renderQueue)._addRenderElement(w_$t),w_$t=w_$Z=null,w_$b=-1),this._prepareDynamicBatchCombineElements.length=0},w_$B._clearRenderElements=function(){for(var w_$B in this._dynamicBatches)this._dynamicBatches[w_$B]._clearRenderElements()},w_$B._addToRenderQueue=function(w_$B,w_$h,w_$l,w_$A){for(var w_$n in this._dynamicBatches){var w_$s=this._dynamicBatches[w_$n];0<w_$s.combineRenderElementsCount&&w_$s._addToRenderQueue(w_$B,w_$h,w_$l,w_$A)}},w_$B.dispose=function(){this._dynamicBatches=null},w_$C._sortPrepareDynamicBatch=function(w_$B,w_$h){return w_$B._mainSortID-w_$h._mainSortID},w_$C}(),w_$lB=function(){function w_$B(){}return w_$Q(w_$B,"laya.d3.graphics.FrustumCulling"),w_$B.renderShadowObjectCulling=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=0,w_$X=0,w_$Z=0,w_$t=0;for(w_$s=0,w_$Z=w_$l.length;w_$s<w_$Z;w_$s++){var w_$P=w_$l[w_$s];w_$P&&w_$P._clearRenderElements()}var w_$G,w_$T,w_$b,w_$Q=w_$B._cullingRenders;if(1<w_$n){for(w_$s=0,w_$Z=w_$B._cullingRendersLength;w_$s<w_$Z;w_$s++)if((w_$G=w_$Q[w_$s]).castShadow&&w_$W.isVisible(w_$G._owner.layer.mask)&&w_$G.enable)for(var w_$i=1,w_$$=w_$h.length;w_$i<w_$$;w_$i++)if(w_$T=w_$l[w_$i-1],0!==w_$h[w_$i].containsBoundSphere(w_$G.boundingSphere))for(w_$X=0,w_$t=(w_$b=w_$G._renderElements).length;w_$X<w_$t;w_$X++)w_$T._addRenderElement(w_$b[w_$X])}else for(w_$s=0,w_$Z=w_$B._cullingRendersLength;w_$s<w_$Z;w_$s++)if((w_$G=w_$Q[w_$s]).castShadow&&w_$W.isVisible(w_$G._owner.layer.mask)&&w_$G.enable&&0!==w_$h[0].containsBoundSphere(w_$G.boundingSphere))for(w_$G._renderUpdate(w_$A),w_$T=w_$l[0],w_$X=0,w_$t=(w_$b=w_$G._renderElements).length;w_$X<w_$t;w_$X++)w_$T._addRenderElement(w_$b[w_$X])},w_$B.renderShadowObjectCullingOctree=function(w_$B,w_$h,w_$l,w_$A,w_$n){for(var w_$s=0,w_$X=w_$l.length;w_$s<w_$X;w_$s++){var w_$Z=w_$l[w_$s];w_$Z&&w_$Z._clearRenderElements()}1<w_$n?w_$B.treeRoot.cullingShadowObjects(w_$h,w_$l,!0,0,w_$B):w_$B.treeRoot.cullingShadowObjectsOnePSSM(w_$h[0],w_$l,w_$A,!0,0,w_$B)},w_$B.renderObjectCulling=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=0,w_$Z=0,w_$t=0,w_$P=0,w_$G=w_$h._quenes,w_$T=w_$h._dynamicBatchManager,w_$b=w_$h._cullingRenders;for(w_$X=0,w_$Z=w_$G.length;w_$X<w_$Z;w_$X++){var w_$Q=w_$G[w_$X];w_$Q&&w_$Q._clearRenderElements()}var w_$i=w_$AB._staticBatchManagers;for(w_$X=0,w_$Z=w_$i.length;w_$X<w_$Z;w_$X++)w_$i[w_$X]._clearRenderElements();w_$T._clearRenderElements();var w_$$=w_$l.transform.position;for(w_$X=0,w_$Z=w_$h._cullingRendersLength;w_$X<w_$Z;w_$X++){var w_$V=w_$b[w_$X];if(w_$W.isVisible(w_$V._owner.layer.mask)&&w_$V.enable&&0!==w_$B.containsBoundSphere(w_$V.boundingSphere)&&w_$V._renderUpdate(w_$s)){w_$V._distanceForSort=w_$Xh.distance(w_$V.boundingSphere.center,w_$$)+w_$V.sortingFudge;var w_$J=w_$V._renderElements;for(w_$t=0,w_$P=w_$J.length;w_$t<w_$P;w_$t++){var w_$H=w_$J[w_$t],w_$y=w_$H._staticBatch;if(w_$y&&w_$y._material===w_$H._material)w_$y._addBatchRenderElement(w_$H);else{var w_$C=w_$H.renderObj;w_$C.triangleCount<10&&1===w_$C._vertexBufferCount&&w_$C._getIndexBuffer()&&w_$H._material.renderQueue<2&&w_$H._canDynamicBatch&&!w_$V._owner.isStatic?w_$T._addPrepareRenderElement(w_$H):w_$h.getRenderQueue(w_$H._material.renderQueue)._addRenderElement(w_$H)}}}}for(w_$X=0,w_$Z=w_$i.length;w_$X<w_$Z;w_$X++)w_$i[w_$X]._addToRenderQueue(w_$h,w_$A,w_$n,w_$s);w_$T._finishCombineDynamicBatch(w_$h),w_$T._addToRenderQueue(w_$h,w_$A,w_$n,w_$s)},w_$B.renderObjectCullingOctree=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=0,w_$Z=0,w_$t=w_$h._quenes,w_$P=w_$h._dynamicBatchManager;for(w_$X=0,w_$Z=w_$t.length;w_$X<w_$Z;w_$X++){var w_$G=w_$t[w_$X];w_$G&&w_$G._clearRenderElements()}var w_$T=w_$AB._staticBatchManagers;for(w_$X=0,w_$Z=w_$T.length;w_$X<w_$Z;w_$X++)w_$T[w_$X]._clearRenderElements();for(w_$P._clearRenderElements(),w_$h._cullingRenders.length=0,w_$h.treeRoot.cullingObjects(w_$B,!0,0,w_$l.transform.position,w_$s),w_$X=0,w_$Z=w_$T.length;w_$X<w_$Z;w_$X++)w_$T[w_$X]._addToRenderQueue(w_$h,w_$A,w_$n,w_$s);w_$P._finishCombineDynamicBatch(w_$h),w_$P._addToRenderQueue(w_$h,w_$A,w_$n,w_$s)},w_$B.renderObjectCullingNoBoundFrustum=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=0,w_$X=0,w_$Z=0,w_$t=0,w_$P=w_$B._quenes,w_$G=w_$B._dynamicBatchManager,w_$T=w_$B._cullingRenders;for(w_$s=0,w_$X=w_$P.length;w_$s<w_$X;w_$s++){var w_$b=w_$P[w_$s];w_$b&&w_$b._clearRenderElements()}var w_$Q=w_$AB._staticBatchManagers;for(w_$s=0,w_$X=w_$Q.length;w_$s<w_$X;w_$s++)w_$Q[w_$s]._clearRenderElements();w_$G._clearRenderElements();var w_$i=w_$h.transform.position;for(w_$s=0,w_$X=w_$B._cullingRendersLength;w_$s<w_$X;w_$s++){var w_$$=w_$T[w_$s];if(w_$W.isVisible(w_$$._owner.layer.mask)&&w_$$.enable){w_$$._renderUpdate(w_$n),w_$$._distanceForSort=w_$Xh.distance(w_$$.boundingSphere.center,w_$i)+w_$$.sortingFudge;var w_$V=w_$$._renderElements;for(w_$Z=0,w_$t=w_$V.length;w_$Z<w_$t;w_$Z++){var w_$J=w_$V[w_$Z],w_$H=w_$J._staticBatch;if(w_$H&&w_$H._material===w_$J._material)w_$H._addBatchRenderElement(w_$J);else{var w_$y=w_$J.renderObj;w_$y.triangleCount<10&&1===w_$y._vertexBufferCount&&w_$y._getIndexBuffer()&&w_$J._material.renderQueue<2&&w_$J._canDynamicBatch&&!w_$$._owner.isStatic?w_$G._addPrepareRenderElement(w_$J):w_$B.getRenderQueue(w_$J._material.renderQueue)._addRenderElement(w_$J)}}}}for(w_$s=0,w_$X=w_$Q.length;w_$s<w_$X;w_$s++)w_$Q[w_$s]._addToRenderQueue(w_$B,w_$l,w_$A,w_$n);w_$G._finishCombineDynamicBatch(w_$B),w_$G._addToRenderQueue(w_$B,w_$l,w_$A,w_$n)},w_$B}(),w_$AB=function(){function w_$s(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}w_$Q(w_$s,"laya.d3.graphics.StaticBatchManager");var w_$B=w_$s.prototype;return w_$B._finishInit=function(){for(var w_$B in this._staticBatches)this._staticBatches[w_$B]._finishInit();this._initBatchRenderElements.length=0},w_$B._initStaticBatchs=function(w_$B){throw new Error("StaticBatchManager:must override this function.")},w_$B._addInitBatchSprite=function(w_$B){for(var w_$h=w_$B._render._renderElements,w_$l=0,w_$A=w_$h.length;w_$l<w_$A;w_$l++)this._initBatchRenderElements.push(w_$h[w_$l])},w_$B._clearRenderElements=function(){for(var w_$B in this._staticBatches)this._staticBatches[w_$B]._clearRenderElements()},w_$B._garbageCollection=function(w_$B){var w_$h=w_$B._staticBatch,w_$l=w_$h._initBatchRenderElements,w_$A=w_$l.indexOf(w_$B);w_$l.splice(w_$A,1),0===w_$l.length&&(w_$h.dispose(),delete this._staticBatches[w_$h._key])},w_$B._addToRenderQueue=function(w_$B,w_$h,w_$l,w_$A){for(var w_$n in this._staticBatches){var w_$s=this._staticBatches[w_$n];0<w_$s._batchRenderElements.length&&w_$s._updateToRenderQueue(w_$B,w_$A)}},w_$B.dispose=function(){this._staticBatches=null},w_$s._addToStaticBatchQueue=function(w_$B){w_$B instanceof laya.d3.core.RenderableSprite3D&&w_$B._addToInitStaticBatchManager();for(var w_$h=0,w_$l=w_$B.numChildren;w_$h<w_$l;w_$h++)w_$s._addToStaticBatchQueue(w_$B._childs[w_$h])},w_$s.combine=function(w_$B,w_$h){var w_$l,w_$A=0,w_$n=0;if(w_$h)for(w_$A=0,w_$n=w_$h.length;w_$A<w_$n;w_$A++){w_$h[w_$A]._addToInitStaticBatchManager()}else w_$B&&w_$s._addToStaticBatchQueue(w_$B);for(w_$A=0,w_$n=w_$s._staticBatchManagers.length;w_$A<w_$n;w_$A++)(w_$l=w_$s._staticBatchManagers[w_$A])._initStaticBatchs(w_$B),w_$l._finishInit()},w_$s._staticBatchManagers=[],w_$s}(),w_$nB=function(){function w_$B(w_$B,w_$h,w_$l){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=w_$B,this._manager=w_$h,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=w_$l}w_$Q(w_$B,"laya.d3.graphics.StaticBatch");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),w_$h._binarySearch=function(w_$B){for(var w_$h=0,w_$l=this._batchRenderElements.length-1,w_$A=0;w_$h<=w_$l;)w_$A=Math.floor((w_$h+w_$l)/2),this._compareBatchRenderElement(this._batchRenderElements[w_$A],w_$B)?w_$l=w_$A-1:w_$h=w_$A+1;return w_$h},w_$h._compareBatchRenderElement=function(w_$B,w_$h){throw new Error("StaticBatch:must override this function.")},w_$h._getVertexDecLightMap=function(w_$B){return w_$B===w_$_B.vertexDeclaration?w_$WB.vertexDeclaration:w_$B===w_$gB.vertexDeclaration?w_$RB.vertexDeclaration:w_$B===w_$xB.vertexDeclaration?w_$CB.vertexDeclaration:w_$B===w_$pB.vertexDeclaration?null:w_$B===w_$$B.vertexDeclaration?w_$VB.vertexDeclaration:w_$B===w_$kB.vertexDeclaration?w_$EB.vertexDeclaration:w_$B===w_$SB.vertexDeclaration?w_$NB.vertexDeclaration:w_$B===w_$dB.vertexDeclaration?w_$MB.vertexDeclaration:w_$B===w_$gB.vertexDeclaration?w_$RB.vertexDeclaration:w_$B===w_$wB.vertexDeclaration?w_$oB.vertexDeclaration:w_$B===w_$pB.vertexDeclaration?null:w_$B===w_$$B.vertexDeclaration?w_$VB.vertexDeclaration:w_$B===w_$OB.vertexDeclaration?w_$jB.vertexDeclaration:w_$B===w_$SB.vertexDeclaration?w_$NB.vertexDeclaration:w_$B},w_$h._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},w_$h._addBatchRenderElement=function(w_$B){this._batchRenderElements.splice(this._binarySearch(w_$B),0,w_$B)},w_$h._updateToRenderQueue=function(w_$B,w_$h){this._combineRenderElementPoolIndex=0,this._getRenderElement(w_$B.getRenderQueue(this._material.renderQueue)._renderElements,w_$B,w_$h)},w_$h._getRenderElement=function(w_$B,w_$h,w_$l){throw new Error("StaticBatch:must override this function.")},w_$h._finishInit=function(){throw new Error("StaticBatch:must override this function.")},w_$h._clearRenderElements=function(){this._batchRenderElements.length=0},w_$h.dispose=function(){},w_$h._getVertexBuffer=function(w_$B){return void 0===w_$B&&(w_$B=0),null},w_$h._getIndexBuffer=function(){return null},w_$h._beforeRender=function(w_$B){return!0},w_$h._render=function(w_$B){},w_$h._getVertexBuffers=function(){return null},w_$i(0,w_$h,"_vertexBufferCount",function(){return 1}),w_$i(0,w_$h,"triangleCount",function(){return 0}),w_$B.combine=function(w_$B){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),w_$AB.combine(w_$B)},w_$B.maxBatchVertexCount=65535,w_$B}(),w_$sB=function(){function w_$X(w_$B,w_$h){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++w_$X._uniqueIDCounter,this._id>w_$X.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",w_$X.maxVertexDeclaration);this._shaderValues=new w_$bh,this._vertexElementsDic={},this._vertexStride=w_$B,this._vertexElements=w_$h;for(var w_$l=0;w_$l<w_$h.length;w_$l++){var w_$A=w_$h[w_$l],w_$n=w_$A.elementUsage;this._vertexElementsDic[w_$n]=w_$A;var w_$s=[w_$X._getTypeSize(w_$A.elementFormat)/4,5126,!1,this._vertexStride,w_$A.offset];switch(this._shaderValues.setValue(w_$n,w_$s),w_$n){case 1:this._addShaderDefine(w_$Uh.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(w_$Uh.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(w_$Uh.SHADERDEFINE_UV1)}}}w_$Q(w_$X,"laya.d3.graphics.VertexDeclaration");var w_$B=w_$X.prototype;return w_$B._addShaderDefine=function(w_$B){this._shaderDefineValue|=w_$B},w_$B._removeShaderDefine=function(w_$B){this._shaderDefineValue&=~w_$B},w_$B.getVertexElements=function(){return this._vertexElements.slice()},w_$B.getVertexElementByUsage=function(w_$B){return this._vertexElementsDic[w_$B]},w_$B.unBinding=function(){},w_$i(0,w_$B,"shaderDefineValue",function(){return this._shaderDefineValue}),w_$i(0,w_$B,"id",function(){return this._id}),w_$i(0,w_$B,"vertexStride",function(){return this._vertexStride}),w_$i(0,w_$B,"shaderValues",function(){return this._shaderValues}),w_$X._getTypeSize=function(w_$B){switch(w_$B){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},w_$X.getVertexStride=function(w_$B){for(var w_$h=0,w_$l=0;w_$l<w_$B.Length;w_$l++){var w_$A=w_$B[w_$l],w_$n=w_$A.offset+w_$X._getTypeSize(w_$A.elementFormat);w_$h<w_$n&&(w_$h=w_$n)}return w_$h},w_$X._maxVertexDeclarationBit=1e3,w_$X._uniqueIDCounter=1,w_$T(w_$X,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),w_$X}(),w_$XB=function(){function w_$B(w_$B,w_$h,w_$l){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=w_$B,this.elementFormat=w_$h,this.elementUsage=w_$l}return w_$Q(w_$B,"laya.d3.graphics.VertexElement"),w_$B}(),w_$ZB=(function(){function w_$B(){}w_$Q(w_$B,"laya.d3.graphics.VertexElementFormat"),w_$B.Single="single",w_$B.Vector2="vector2",w_$B.Vector3="vector3",w_$B.Vector4="vector4",w_$B.Color="color",w_$B.Byte4="byte4",w_$B.Short2="short2",w_$B.Short4="short4",w_$B.NormalizedShort2="normalizedshort2",w_$B.NormalizedShort4="normalizedshort4",w_$B.HalfVector2="halfvector2",w_$B.HalfVector4="halfvector4"}(),function(){function w_$B(){}w_$Q(w_$B,"laya.d3.graphics.VertexElementUsage"),w_$B.POSITION0=0,w_$B.COLOR0=1,w_$B.TEXTURECOORDINATE0=2,w_$B.NORMAL0=3,w_$B.BINORMAL0=4,w_$B.TANGENT0=5,w_$B.BLENDINDICES0=6,w_$B.BLENDWEIGHT0=7,w_$B.DEPTH0=8,w_$B.FOG0=9,w_$B.POINTSIZE0=10,w_$B.SAMPLE0=11,w_$B.TESSELLATEFACTOR0=12,w_$B.COLOR1=13,w_$B.NEXTTEXTURECOORDINATE0=14,w_$B.TEXTURECOORDINATE1=15,w_$B.NEXTTEXTURECOORDINATE1=16,w_$B.CORNERTEXTURECOORDINATE0=17,w_$B.VELOCITY0=18,w_$B.STARTCOLOR0=19,w_$B.STARTSIZE=20,w_$B.AGEADDSCALE0=21,w_$B.STARTROTATION=22,w_$B.ENDCOLOR0=23,w_$B.STARTLIFETIME=24,w_$B.TIME0=33,w_$B.SHAPEPOSITIONSTARTLIFETIME=30,w_$B.DIRECTIONTIME=32,w_$B.SIZEROTATION0=27,w_$B.RADIUS0=28,w_$B.RADIAN0=29,w_$B.STARTSPEED=31,w_$B.RANDOM0=34,w_$B.RANDOM1=35,w_$B.SIMULATIONWORLDPOSTION=36,w_$B.SIMULATIONWORLDROTATION=37,w_$B.TEXTURECOORDINATE0X=38,w_$B.TEXTURECOORDINATE0X1=39,w_$B.TEXTURECOORDINATE0Y=40,w_$B.OFFSETVECTOR=41}(),function(){function w_$B(w_$B,w_$h,w_$l){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=w_$B,this._textureCoordinate0=w_$h,this._time=w_$l}w_$Q(w_$B,"laya.d3.graphics.VertexGlitter");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"time",function(){return this._time}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(24,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector2",2),new w_$XB(20,"single",33)])}])}(),function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=w_$B,this._position=w_$h,this._velocity=w_$l,this._startColor=w_$A,this._endColor=w_$n,this._sizeRotation=w_$s,this._radius=w_$X,this._radian=w_$Z,this._ageAddScale=w_$t,this._time=w_$P}w_$Q(w_$B,"laya.d3.graphics.VertexParticle");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"endColor",function(){return this._endColor}),w_$i(0,w_$h,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),w_$i(0,w_$h,"sizeRotation",function(){return this._sizeRotation}),w_$i(0,w_$h,"velocity",function(){return this._velocity}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"startColor",function(){return this._startColor}),w_$i(0,w_$h,"radius",function(){return this._radius}),w_$i(0,w_$h,"radian",function(){return this._radian}),w_$i(0,w_$h,"ageAddScale",function(){return this._ageAddScale}),w_$i(0,w_$h,"time",function(){return this._time}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(116,[new w_$XB(0,"vector4",17),new w_$XB(16,"vector3",0),new w_$XB(28,"vector3",18),new w_$XB(40,"vector4",19),new w_$XB(56,"vector4",23),new w_$XB(72,"vector3",27),new w_$XB(84,"vector2",28),new w_$XB(92,"vector4",29),new w_$XB(108,"single",24),new w_$XB(112,"single",33)])}])}(),function(){function w_$B(w_$B){this._position=null,this._position=w_$B}w_$Q(w_$B,"laya.d3.graphics.VertexPosition");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(12,[new w_$XB(0,"vector3",0)])}]),w_$B}()),w_$tB=function(){function w_$B(w_$B,w_$h){this._position=null,this._normal=null,this._position=w_$B,this._normal=w_$h}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormal");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(24,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3)])}]),w_$B}(),w_$PB=function(){function w_$B(w_$B,w_$h,w_$l){this._position=null,this._normal=null,this._color=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColor");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(40,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1)])}]),w_$B}(),w_$GB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._blendIndex=w_$A,this._blendWeight=w_$n}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorSkin");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(72,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector4",7),new w_$XB(56,"vector4",6)])}]),w_$B}(),w_$TB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._tangent=w_$A,this._blendIndex=w_$n,this._blendWeight=w_$s}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(88,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector4",7),new w_$XB(56,"vector4",6),new w_$XB(72,"vector4",5)])}]),w_$B}(),w_$bB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._tangent=w_$A,this._blendIndex=w_$n,this._blendWeight=w_$s}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(84,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector4",7),new w_$XB(56,"vector4",6),new w_$XB(72,"vector3",5)])}]),w_$B}(),w_$QB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._tangent=w_$A}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(56,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector4",5)])}]),w_$B}(),w_$iB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._tangent=w_$A}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(52,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector3",5)])}]),w_$B}(),w_$$B=function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate=w_$A}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTexture");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(48,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2)])}]),w_$B}(),w_$VB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate0=w_$A,this._textureCoordinate1=w_$n}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(56,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector2",15)])}]),w_$B}(),w_$JB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate0=w_$A,this._textureCoordinate1=w_$n,this._blendIndex=w_$s,this._blendWeight=w_$X}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(88,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector2",15),new w_$XB(56,"vector4",7),new w_$XB(72,"vector4",6)])}]),w_$B}(),w_$HB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate0=w_$A,this._textureCoordinate1=w_$n,this._tangent=w_$s,this._blendIndex=w_$X,this._blendWeight=w_$Z}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(104,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector2",15),new w_$XB(56,"vector4",7),new w_$XB(72,"vector4",6),new w_$XB(88,"vector4",5)])}]),w_$B}(),w_$yB=function(){function w_$B(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$h.VertexPositionNormalColorTexture0SkinTangent=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate0=w_$A,this._textureCoordinate1=w_$n,this._tangent=w_$s,this._blendIndex=w_$X,this._blendWeight=w_$Z},w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(100,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector2",15),new w_$XB(56,"vector4",7),new w_$XB(72,"vector4",6),new w_$XB(88,"vector3",5)])}]),w_$B}(),w_$CB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate0=w_$A,this._textureCoordinate1=w_$n,this._tangent=w_$s}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(72,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector2",15),new w_$XB(56,"vector4",5)])}]),w_$B}(),w_$oB=function(){function w_$B(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$h.VertexPositionNormalColorTexture0Tangent=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate0=w_$A,this._textureCoordinate1=w_$n,this._tangent=w_$s},w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(68,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector2",15),new w_$XB(56,"vector3",5)])}]),w_$B}(),w_$uB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate=w_$A,this._blendIndex=w_$n,this._blendWeight=w_$s}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(80,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector4",7),new w_$XB(64,"vector4",6)])}]),w_$B}(),w_$vB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate=w_$A,this._tangent=w_$n,this._blendIndex=w_$s,this._blendWeight=w_$X}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(96,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector4",7),new w_$XB(64,"vector4",6),new w_$XB(80,"vector4",5)])}]),w_$B}(),w_$UB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate=w_$A,this._tangent=w_$n,this._blendIndex=w_$s,this._blendWeight=w_$X}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(92,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector4",7),new w_$XB(64,"vector4",6),new w_$XB(80,"vector3",5)])}]),w_$B}(),w_$xB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate=w_$A,this._tangent=w_$n}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(64,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector4",5)])}]),w_$B}(),w_$wB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._color=w_$l,this._textureCoordinate=w_$A,this._tangent=w_$n}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"color",function(){return this._color}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(60,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",1),new w_$XB(40,"vector2",2),new w_$XB(48,"vector3",5)])}]),w_$B}(),w_$zB=function(){function w_$B(w_$B,w_$h,w_$l){this._position=null,this._normal=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._tangent=w_$l}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(40,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector4",5)])}]),w_$B}(),w_$aB=function(){function w_$B(w_$B,w_$h,w_$l){this._position=null,this._normal=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._tangent=w_$l}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(36,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector3",5)])}]),w_$B}(),w_$SB=function(){function w_$B(w_$B,w_$h,w_$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTexture");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(32,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2)])}]),w_$B}(),w_$NB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate0=w_$l,this._textureCoordinate1=w_$A}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(40,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector2",15)])}]),w_$B}(),w_$RB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate0=w_$l,this._textureCoordinate1=w_$A,this._blendIndex=w_$n,this._blendWeight=w_$s}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(72,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector2",15),new w_$XB(40,"vector4",7),new w_$XB(56,"vector4",6)])}]),w_$B}(),w_$WB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate0=w_$l,this._textureCoordinate1=w_$A,this._tangent=w_$n,this._blendIndex=w_$s,this._blendWeight=w_$X}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(88,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector2",15),new w_$XB(40,"vector4",7),new w_$XB(56,"vector4",6),new w_$XB(72,"vector4",5)])}]),w_$B}(),w_$MB=function(){function w_$B(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$h.VertexPositionNormalTexture0SkinTangent=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){this._position=w_$B,this._normal=w_$h,this._textureCoordinate0=w_$l,this._textureCoordinate1=w_$A,this._tangent=w_$n,this._blendIndex=w_$s,this._blendWeight=w_$X},w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(84,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector2",15),new w_$XB(40,"vector4",7),new w_$XB(56,"vector4",6),new w_$XB(72,"vector3",5)])}]),w_$B}(),w_$EB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate0=w_$l,this._textureCoordinate1=w_$A,this._tangent=w_$n}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(56,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector2",15),new w_$XB(40,"vector4",5)])}]),w_$B}(),w_$jB=function(){function w_$B(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$h.VertexPositionNormalTexture0Tangent=function(w_$B,w_$h,w_$l,w_$A,w_$n){this._position=w_$B,this._normal=w_$h,this._textureCoordinate0=w_$l,this._textureCoordinate1=w_$A,this._tangent=w_$n},w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(52,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector2",15),new w_$XB(40,"vector3",5)])}]),w_$B}(),w_$gB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l,this._blendIndex=w_$A,this._blendWeight=w_$n}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTextureSkin");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(64,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector4",7),new w_$XB(48,"vector4",6)])}]),w_$B}(),w_$_B=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l,this._tangent=w_$A,this._blendIndex=w_$n,this._blendWeight=w_$s}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(80,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector4",7),new w_$XB(48,"vector4",6),new w_$XB(64,"vector4",5)])}]),w_$B}(),w_$dB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l,this._tangent=w_$A,this._blendIndex=w_$n,this._blendWeight=w_$s}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(76,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector4",7),new w_$XB(48,"vector4",6),new w_$XB(64,"vector3",5)])}]),w_$B}(),w_$kB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l,this._tangent=w_$A}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(48,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector4",5)])}]),w_$B}(),w_$OB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l,this._tangent=w_$A}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNormalTextureTangent");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(44,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector3",5)])}]),w_$B}(),w_$pB=function(){function w_$B(w_$B,w_$h,w_$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNTBTexture");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(56,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector3",5),new w_$XB(36,"vector3",4),new w_$XB(48,"vector2",2)])}]),w_$B}(),w_$FB=function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate0=w_$A,this._textureCoordinate1=w_$n,this._tangent=w_$s,w_$l=w_$l,this._blendIndex=w_$X,this._blendWeight=w_$Z}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"tangent",function(){return this._tangent}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(0,w_$h,"textureCoordinate1",function(){return this._textureCoordinate1}),w_$i(0,w_$h,"blendIndex",function(){return this._blendIndex}),w_$i(0,w_$h,"blendWeight",function(){return this._blendWeight}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(96,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector3",5),new w_$XB(36,"vector3",4),new w_$XB(48,"vector2",2),new w_$XB(56,"vector2",15),new w_$XB(64,"vector4",7),new w_$XB(80,"vector4",6)])}]),w_$B}(),w_$cB=function(){function w_$B(w_$B,w_$h,w_$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=w_$B,this._normal=w_$h,this._textureCoordinate=w_$l}w_$Q(w_$B,"laya.d3.graphics.VertexPositionNTBTextureSkin");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"textureCoordinate",function(){return this._textureCoordinate}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(88,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector3",5),new w_$XB(36,"vector3",4),new w_$XB(48,"vector2",2),new w_$XB(56,"vector4",7),new w_$XB(72,"vector4",6)])}]),w_$B}(),w_$mB=(function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=w_$B,this._normal=w_$h,this._textureCoord0=w_$l,this._textureCoord1=w_$A}w_$Q(w_$B,"laya.d3.graphics.VertexPositionTerrain");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"normal",function(){return this._normal}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoord0",function(){return this._textureCoord0}),w_$i(0,w_$h,"textureCoord1",function(){return this._textureCoord1}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(40,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector3",3),new w_$XB(24,"vector2",2),new w_$XB(32,"vector2",15)])}])}(),function(){function w_$B(w_$B,w_$h){this._position=null,this._textureCoordinate0=null,this._position=w_$B,this._textureCoordinate0=w_$h}w_$Q(w_$B,"laya.d3.graphics.VertexPositionTexture0");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"position",function(){return this._position}),w_$i(0,w_$h,"textureCoordinate0",function(){return this._textureCoordinate0}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(20,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector2",2)])}]),w_$B}()),w_$YB=(function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b,w_$Q){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=w_$B,this._positionStartLifeTime=w_$h,this._velocity=w_$l,this._startColor=w_$A,this._startSize=w_$n,this._startRotation0=w_$s,this._startRotation1=w_$X,this._startRotation2=w_$Z,this._startLifeTime=w_$t,this._time=w_$P,this._startSpeed=w_$G,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=w_$Q}w_$Q(w_$B,"laya.d3.graphics.VertexShurikenParticleBillboard");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),w_$i(0,w_$h,"random1",function(){return this._randoms1}),w_$i(0,w_$h,"startRotation2",function(){return this._startRotation2}),w_$i(0,w_$h,"positionStartLifeTime",function(){return this._positionStartLifeTime}),w_$i(0,w_$h,"velocity",function(){return this._velocity}),w_$i(0,w_$h,"random0",function(){return this._randoms0}),w_$i(0,w_$h,"startSize",function(){return this._startSize}),w_$i(0,w_$h,"startColor",function(){return this._startColor}),w_$i(0,w_$h,"startRotation0",function(){return this._startRotation0}),w_$i(0,w_$h,"startRotation1",function(){return this._startRotation1}),w_$i(0,w_$h,"startLifeTime",function(){return this._startLifeTime}),w_$i(0,w_$h,"time",function(){return this._time}),w_$i(0,w_$h,"startSpeed",function(){return this._startSpeed}),w_$i(0,w_$h,"simulationWorldPostion",function(){return this._simulationWorldPostion}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(152,[new w_$XB(0,"vector4",17),new w_$XB(16,"vector4",30),new w_$XB(32,"vector4",32),new w_$XB(48,"vector4",19),new w_$XB(64,"vector3",20),new w_$XB(76,"vector3",22),new w_$XB(88,"single",31),new w_$XB(92,"vector4",34),new w_$XB(108,"vector4",35),new w_$XB(124,"vector3",36),new w_$XB(136,"vector4",37)])}])}(),function(){function w_$B(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b,w_$Q){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=w_$B,this._positionStartLifeTime=w_$h,this._velocity=w_$l,this._startColor=w_$A,this._startSize=w_$n,this._startRotation0=w_$s,this._startRotation1=w_$X,this._startRotation2=w_$Z,this._startLifeTime=w_$t,this._time=w_$P,this._startSpeed=w_$G,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=w_$Q}w_$Q(w_$B,"laya.d3.graphics.VertexShurikenParticleMesh");var w_$h=w_$B.prototype;w_$o.imps(w_$h,{"laya.d3.graphics.IVertex":!0}),w_$i(0,w_$h,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),w_$i(0,w_$h,"velocity",function(){return this._velocity}),w_$i(0,w_$h,"position",function(){return this._positionStartLifeTime}),w_$i(0,w_$h,"random0",function(){return this._randoms0}),w_$i(0,w_$h,"startSize",function(){return this._startSize}),w_$i(0,w_$h,"startColor",function(){return this._startColor}),w_$i(0,w_$h,"startRotation0",function(){return this._startRotation0}),w_$i(0,w_$h,"startRotation1",function(){return this._startRotation1}),w_$i(0,w_$h,"random1",function(){return this._randoms1}),w_$i(0,w_$h,"startRotation2",function(){return this._startRotation2}),w_$i(0,w_$h,"startLifeTime",function(){return this._startLifeTime}),w_$i(0,w_$h,"time",function(){return this._time}),w_$i(0,w_$h,"startSpeed",function(){return this._startSpeed}),w_$i(0,w_$h,"simulationWorldPostion",function(){return this._simulationWorldPostion}),w_$i(0,w_$h,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$i(1,w_$B,"vertexDeclaration",function(){return w_$B._vertexDeclaration}),w_$T(w_$B,["_vertexDeclaration",function(){return this._vertexDeclaration=new w_$sB(172,[new w_$XB(0,"vector3",0),new w_$XB(12,"vector4",1),new w_$XB(28,"vector2",2),new w_$XB(36,"vector4",30),new w_$XB(52,"vector4",32),new w_$XB(68,"vector4",19),new w_$XB(84,"vector3",20),new w_$XB(96,"vector3",22),new w_$XB(108,"single",31),new w_$XB(112,"vector4",34),new w_$XB(128,"vector4",35),new w_$XB(144,"vector3",36),new w_$XB(156,"vector4",37)])}])}(),function(){function w_$y(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=w_$l,this._materials=w_$A,this._subMeshes=w_$n,this._materialMap=w_$s,this._version=w_$h,this._onLoaded(w_$B)}w_$Q(w_$y,"laya.d3.loaders.LoadModelV01");var w_$B=w_$y.prototype;return w_$B._onLoaded=function(w_$B){this._readData=w_$B,this.READ_BLOCK();for(var w_$h=0;w_$h<this._BLOCK.count;w_$h++){var w_$l=this._readData.getUint16(),w_$A=this._strings[w_$l],w_$n=this["READ_"+w_$A];if(null==w_$n)throw new Error("model file err,no this function:"+w_$l+" "+w_$A);if(!w_$n.call(this))break}return this._mesh},w_$B.onError=function(){},w_$B._readString=function(){return this._strings[this._readData.getUint16()]},w_$B.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},w_$B.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},w_$B.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var w_$B=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var w_$h=0;w_$h<this._STRINGS.size;w_$h++)this._strings[w_$h]=this._readData.readUTFString();return this._readData.pos=w_$B,!0},w_$B.READ_MATERIAL=function(){var w_$B=this._readData.getUint16(),w_$h=(this._readString(),this._readString());return this._materials[w_$B]="null"!==w_$h?w_$J.getRes(this._materialMap[w_$h]):new w_$ah,!0},w_$B.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var w_$B,w_$h=this._readData.__getBuffer(),w_$l=0,w_$A=this._readData.getUint32(),w_$n=this._readData.getUint32(),w_$s=(new Float32Array(w_$h.slice(w_$A+this._DATA.offset,w_$A+this._DATA.offset+w_$n)),this._readData.getUint32()),w_$X=this._readData.getUint32(),w_$Z=new Float32Array(w_$h.slice(w_$s+this._DATA.offset,w_$s+this._DATA.offset+w_$X));for(this.mesh._inverseBindPoses=[],w_$l=0,w_$B=w_$Z.length;w_$l<w_$B;w_$l+=16){var w_$t=new w_$Bh(w_$Z[w_$l+0],w_$Z[w_$l+1],w_$Z[w_$l+2],w_$Z[w_$l+3],w_$Z[w_$l+4],w_$Z[w_$l+5],w_$Z[w_$l+6],w_$Z[w_$l+7],w_$Z[w_$l+8],w_$Z[w_$l+9],w_$Z[w_$l+10],w_$Z[w_$l+11],w_$Z[w_$l+12],w_$Z[w_$l+13],w_$Z[w_$l+14],w_$Z[w_$l+15]);this.mesh._inverseBindPoses.push(w_$t)}break;default:throw new Error("LoadModel:unknown version.")}return!0},w_$B.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var w_$B=this._readString();this._shaderAttributes=w_$B.match(w_$y._attrReg);var w_$h=this._readData.getUint32(),w_$l=this._readData.getUint32(),w_$A=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),w_$n=this._readData.getUint32(),w_$s=this._readData.getUint32(),w_$X=this._readData.getUint32(),w_$Z=this._readData.__getBuffer(),w_$t=new w_$Ph(this._mesh),w_$P=this._getVertexDeclaration(),w_$G=w_$dh.create(w_$P,w_$n/w_$P.vertexStride,35044,!0),w_$T=w_$A+this._DATA.offset,w_$b=w_$Z.slice(w_$T,w_$T+w_$n);w_$G.setData(new Float32Array(w_$b));for(var w_$Q=(w_$t._vertexBuffer=w_$G).vertexDeclaration.getVertexElements(),w_$i=0;w_$i<w_$Q.length;w_$i++)w_$t._bufferUsage[w_$Q[w_$i].elementUsage]=w_$G;var w_$$=w_$_h.create("ushort",w_$l/2,35044,!0),w_$V=w_$h+this._DATA.offset,w_$J=w_$Z.slice(w_$V,w_$V+w_$l);w_$$.setData(new Uint16Array(w_$J)),w_$t._indexBuffer=w_$$;var w_$H=w_$Z.slice(w_$s+this._DATA.offset,w_$s+this._DATA.offset+w_$X);return w_$t._boneIndicesList[0]=new Uint8Array(w_$H),this._subMeshes.push(w_$t),!0},w_$B.READ_DATAAREA=function(){return!1},w_$B._getVertexDeclaration=function(){for(var w_$B,w_$h=!1,w_$l=!1,w_$A=!1,w_$n=!1,w_$s=!1,w_$X=!1,w_$Z=!1,w_$t=!1,w_$P=!1,w_$G=0;w_$G<this._shaderAttributes.length;w_$G+=8)switch(this._shaderAttributes[w_$G]){case"POSITION":w_$h=!0;break;case"NORMAL":w_$l=!0;break;case"COLOR":w_$A=!0;break;case"UV":w_$n=!0;break;case"UV1":w_$s=!0;break;case"BLENDWEIGHT":w_$Z=!0;break;case"BLENDINDICES":w_$t=!0;break;case"TANGENT":w_$X=!0;break;case"BINORMAL":w_$P=!0}return w_$h&&w_$l&&w_$A&&w_$n&&w_$s&&w_$Z&&w_$t&&w_$X?w_$B=w_$yB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$n&&w_$s&&w_$Z&&w_$t?w_$B=w_$JB.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$s&&w_$Z&&w_$t&&w_$X?w_$B=w_$MB.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$s&&w_$Z&&w_$t?w_$B=w_$RB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$n&&w_$Z&&w_$t&&w_$X?w_$B=w_$UB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$n&&w_$Z&&w_$t?w_$B=w_$uB.vertexDeclaration:w_$h&&w_$l&&w_$X&&w_$P&&w_$n&&w_$Z&&w_$t?w_$B=w_$cB.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$Z&&w_$t&&w_$X?w_$B=w_$dB.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$Z&&w_$t?w_$B=w_$gB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$Z&&w_$t&&w_$X?w_$B=w_$bB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$Z&&w_$t?w_$B=w_$GB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$n&&w_$s&&w_$X?w_$B=w_$oB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$n&&w_$s?w_$B=w_$VB.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$s&&w_$X?w_$B=w_$jB.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$s?w_$B=w_$NB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$n&&w_$X?w_$B=w_$wB.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$X&&w_$P?w_$B=w_$pB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$n?w_$B=w_$$B.vertexDeclaration:w_$h&&w_$l&&w_$n&&w_$X?w_$B=w_$OB.vertexDeclaration:w_$h&&w_$l&&w_$n?w_$B=w_$SB.vertexDeclaration:w_$h&&w_$l&&w_$A&&w_$X?w_$B=w_$iB.vertexDeclaration:w_$h&&w_$l&&w_$A&&(w_$B=w_$PB.vertexDeclaration),w_$B},w_$i(0,w_$B,"mesh",function(){return this._mesh}),w_$y._attrReg=new RegExp("(\\w+)|([:,;])","g"),w_$y}()),w_$KB=function(){function w_$v(){}return w_$Q(w_$v,"laya.d3.loaders.LoadModelV02"),w_$v.parse=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){w_$v._mesh=w_$l,w_$v._materials=w_$A,w_$v._subMeshes=w_$n,w_$v._materialMap=w_$s,w_$v._version=w_$h,w_$v._readData=w_$B,w_$v.READ_DATA(),w_$v.READ_BLOCK(),w_$v.READ_STRINGS();for(var w_$X=0,w_$Z=w_$v._BLOCK.count;w_$X<w_$Z;w_$X++){w_$v._readData.pos=w_$v._BLOCK.blockStarts[w_$X];var w_$t=w_$v._readData.getUint16(),w_$P=w_$v._strings[w_$t],w_$G=w_$v["READ_"+w_$P];if(null==w_$G)throw new Error("model file err,no this function:"+w_$t+" "+w_$P);w_$G.call()}w_$v._strings.length=0,w_$v._readData=null,w_$v._version=null,w_$v._mesh=null,w_$v._materials=null,w_$v._subMeshes=null,w_$v._materialMap=null},w_$v._readString=function(){return w_$v._strings[w_$v._readData.getUint16()]},w_$v.READ_DATA=function(){w_$v._DATA.offset=w_$v._readData.getUint32(),w_$v._DATA.size=w_$v._readData.getUint32()},w_$v.READ_BLOCK=function(){for(var w_$B=w_$v._BLOCK.count=w_$v._readData.getUint16(),w_$h=w_$v._BLOCK.blockStarts=[],w_$l=w_$v._BLOCK.blockLengths=[],w_$A=0;w_$A<w_$B;w_$A++)w_$h.push(w_$v._readData.getUint32()),w_$l.push(w_$v._readData.getUint32())},w_$v.READ_STRINGS=function(){var w_$B=w_$v._readData.getUint32(),w_$h=w_$v._readData.getUint16(),w_$l=w_$v._readData.pos;w_$v._readData.pos=w_$B+w_$v._DATA.offset;for(var w_$A=0;w_$A<w_$h;w_$A++)w_$v._strings[w_$A]=w_$v._readData.readUTFString();w_$v._readData.pos=w_$l},w_$v.READ_MATERIAL=function(){w_$v._readString(),w_$v._readString();var w_$B=w_$v._readString();return""!==w_$B&&w_$v._materials.push(w_$J.getRes(w_$v._materialMap[w_$B])),!0},w_$v.READ_MESH=function(){w_$v._readString();var w_$B,w_$h=w_$v._readData.__getBuffer(),w_$l=0,w_$A=w_$v._readData.getInt16(),w_$n=w_$v._DATA.offset;for(w_$l=0;w_$l<w_$A;w_$l++){var w_$s=w_$n+w_$v._readData.getUint32(),w_$X=w_$v._readData.getUint32(),w_$Z=new Float32Array(w_$h.slice(w_$s,w_$s+w_$X)),w_$t=w_$v._readString().match(w_$v._attrReg),w_$P=w_$v._getVertexDeclaration(w_$t),w_$G=w_$dh.create(w_$P,4*w_$Z.length/w_$P.vertexStride,35044,!0);w_$G.setData(w_$Z),w_$v._mesh._vertexBuffers.push(w_$G)}var w_$T=w_$n+w_$v._readData.getUint32(),w_$b=w_$v._readData.getUint32(),w_$Q=new Uint16Array(w_$h.slice(w_$T,w_$T+w_$b)),w_$i=w_$_h.create("ushort",w_$b/2,35044,!0);w_$i.setData(w_$Q),w_$v._mesh._indexBuffer=w_$i;var w_$$=w_$v._mesh._boneNames=[],w_$V=w_$v._readData.getUint16();for(w_$$.length=w_$V,w_$l=0;w_$l<w_$V;w_$l++)w_$$[w_$l]=w_$v._strings[w_$v._readData.getUint16()];var w_$J=w_$v._readData.getUint32(),w_$H=w_$v._readData.getUint32(),w_$y=(new Float32Array(w_$h.slice(w_$n+w_$J,w_$n+w_$J+w_$H)),w_$v._readData.getUint32()),w_$C=w_$v._readData.getUint32(),w_$o=new Float32Array(w_$h.slice(w_$n+w_$y,w_$n+w_$y+w_$C));for(w_$v._mesh._inverseBindPoses=[],w_$l=0,w_$B=w_$o.length;w_$l<w_$B;w_$l+=16){var w_$u=new w_$Bh(w_$o[w_$l+0],w_$o[w_$l+1],w_$o[w_$l+2],w_$o[w_$l+3],w_$o[w_$l+4],w_$o[w_$l+5],w_$o[w_$l+6],w_$o[w_$l+7],w_$o[w_$l+8],w_$o[w_$l+9],w_$o[w_$l+10],w_$o[w_$l+11],w_$o[w_$l+12],w_$o[w_$l+13],w_$o[w_$l+14],w_$o[w_$l+15]);w_$v._mesh._inverseBindPoses.push(w_$u)}return w_$v._mesh._skinnedDatas=new Float32Array(16*w_$o.length),!0},w_$v.READ_SUBMESH=function(){var w_$B=w_$v._readData.__getBuffer(),w_$h=new w_$Ph(w_$v._mesh),w_$l=w_$v._readData.getInt16(),w_$A=w_$v._readData.getUint32(),w_$n=w_$v._readData.getUint32();w_$h._vertexBuffer=w_$v._mesh._vertexBuffers[w_$l],w_$h._vertexStart=w_$A,w_$h._vertexCount=w_$n;var w_$s=w_$v._readData.getUint32(),w_$X=w_$v._readData.getUint32(),w_$Z=w_$v._mesh._indexBuffer;w_$h._indexBuffer=w_$Z,w_$h._indexStart=w_$s,w_$h._indexCount=w_$X,w_$h._indices=new Uint16Array(w_$Z.getData().buffer,2*w_$s,w_$X);var w_$t=w_$v._DATA.offset,w_$P=w_$h._subIndexBufferStart,w_$G=w_$h._subIndexBufferCount,w_$T=w_$h._boneIndicesList,w_$b=w_$v._readData.getUint16();w_$P.length=w_$b,w_$G.length=w_$b,w_$T.length=w_$b;for(var w_$Q=0;w_$Q<w_$b;w_$Q++){w_$P[w_$Q]=w_$v._readData.getUint32(),w_$G[w_$Q]=w_$v._readData.getUint32();var w_$i=w_$v._readData.getUint32(),w_$$=w_$v._readData.getUint32();w_$h._boneIndicesList[w_$Q]=new Uint8Array(w_$B.slice(w_$t+w_$i,w_$t+w_$i+w_$$))}return w_$v._subMeshes.push(w_$h),!0},w_$v._getVertexDeclaration=function(w_$B){for(var w_$h,w_$l=!1,w_$A=!1,w_$n=!1,w_$s=!1,w_$X=!1,w_$Z=!1,w_$t=!1,w_$P=!1,w_$G=!1,w_$T=0;w_$T<w_$B.length;w_$T++)switch(w_$B[w_$T]){case"POSITION":w_$l=!0;break;case"NORMAL":w_$A=!0;break;case"COLOR":w_$n=!0;break;case"UV":w_$s=!0;break;case"UV1":w_$X=!0;break;case"BLENDWEIGHT":w_$t=!0;break;case"BLENDINDICES":w_$P=!0;break;case"TANGENT":w_$Z=!0;break;case"BINORMAL":w_$G=!0}return w_$l&&w_$A&&w_$n&&w_$s&&w_$X&&w_$t&&w_$P&&w_$Z?w_$h=w_$yB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$s&&w_$X&&w_$t&&w_$P?w_$h=w_$JB.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$X&&w_$t&&w_$P&&w_$Z?w_$h=w_$MB.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$X&&w_$t&&w_$P?w_$h=w_$RB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$s&&w_$t&&w_$P&&w_$Z?w_$h=w_$UB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$s&&w_$t&&w_$P?w_$h=w_$uB.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$t&&w_$P&&w_$Z?w_$h=w_$dB.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$t&&w_$P?w_$h=w_$gB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$t&&w_$P&&w_$Z?w_$h=w_$bB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$t&&w_$P?w_$h=w_$GB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$s&&w_$X&&w_$Z?w_$h=w_$oB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$s&&w_$X?w_$h=w_$VB.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$X&&w_$Z?w_$h=w_$jB.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$X?w_$h=w_$NB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$s&&w_$Z?w_$h=w_$wB.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$Z&&w_$G?w_$h=w_$pB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$s?w_$h=w_$$B.vertexDeclaration:w_$l&&w_$A&&w_$s&&w_$Z?w_$h=w_$OB.vertexDeclaration:w_$l&&w_$A&&w_$s?w_$h=w_$SB.vertexDeclaration:w_$l&&w_$A&&w_$n&&w_$Z?w_$h=w_$iB.vertexDeclaration:w_$l&&w_$A&&w_$n&&(w_$h=w_$PB.vertexDeclaration),w_$h},w_$v._attrReg=new RegExp("(\\w+)|([:,;])","g"),w_$v._strings=[],w_$v._readData=null,w_$v._version=null,w_$v._mesh=null,w_$v._materials=null,w_$v._subMeshes=null,w_$v._materialMap=null,w_$T(w_$v,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),w_$v}(),w_$fB=function(){function w_$u(){}return w_$Q(w_$u,"laya.d3.loaders.LoadModelV03"),w_$u.parse=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$u._mesh=w_$l,w_$u._subMeshes=w_$A,w_$u._materialMap=w_$n,w_$u._version=w_$h,w_$u._readData=w_$B,w_$u.READ_DATA(),w_$u.READ_BLOCK(),w_$u.READ_STRINGS();for(var w_$s=0,w_$X=w_$u._BLOCK.count;w_$s<w_$X;w_$s++){w_$u._readData.pos=w_$u._BLOCK.blockStarts[w_$s];var w_$Z=w_$u._readData.getUint16(),w_$t=w_$u._strings[w_$Z],w_$P=w_$u["READ_"+w_$t];if(null==w_$P)throw new Error("model file err,no this function:"+w_$Z+" "+w_$t);w_$P.call()}w_$u._strings.length=0,w_$u._readData=null,w_$u._version=null,w_$u._mesh=null,w_$u._subMeshes=null,w_$u._materialMap=null},w_$u._readString=function(){return w_$u._strings[w_$u._readData.getUint16()]},w_$u.READ_DATA=function(){w_$u._DATA.offset=w_$u._readData.getUint32(),w_$u._DATA.size=w_$u._readData.getUint32()},w_$u.READ_BLOCK=function(){for(var w_$B=w_$u._BLOCK.count=w_$u._readData.getUint16(),w_$h=w_$u._BLOCK.blockStarts=[],w_$l=w_$u._BLOCK.blockLengths=[],w_$A=0;w_$A<w_$B;w_$A++)w_$h.push(w_$u._readData.getUint32()),w_$l.push(w_$u._readData.getUint32())},w_$u.READ_STRINGS=function(){var w_$B=w_$u._readData.getUint32(),w_$h=w_$u._readData.getUint16(),w_$l=w_$u._readData.pos;w_$u._readData.pos=w_$B+w_$u._DATA.offset;for(var w_$A=0;w_$A<w_$h;w_$A++)w_$u._strings[w_$A]=w_$u._readData.readUTFString();w_$u._readData.pos=w_$l},w_$u.READ_MESH=function(){var w_$B,w_$h=w_$u._readString(),w_$l=w_$u._readData.__getBuffer(),w_$A=0,w_$n=w_$u._readData.getInt16(),w_$s=w_$u._DATA.offset;for(w_$A=0;w_$A<w_$n;w_$A++){var w_$X,w_$Z=w_$s+w_$u._readData.getUint32(),w_$t=w_$u._readData.getUint32(),w_$P=new Float32Array(w_$l.slice(w_$Z,w_$Z+w_$t)),w_$G=w_$u._readString();switch(w_$u._version){case"LAYAMODEL:03":w_$X=w_$u._vertexDeclarationMap_Discard[w_$G];break;case"LAYAMODEL:0301":w_$X=w_$u._vertexDeclarationMap[w_$G];break;default:throw new Error("LoadModelV03: unknown version.")}if(!w_$X)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+w_$u._version+"  bufferAttribute="+w_$G+"  name="+w_$h+"  url="+(w_$u._mesh?w_$u._mesh.url:"null"));var w_$T=w_$dh.create(w_$X,4*w_$P.length/w_$X.vertexStride,35044,!0,w_$u._mesh._url+"_"+w_$A);w_$T.setData(w_$P),w_$u._mesh._vertexBuffers.push(w_$T)}var w_$b=w_$s+w_$u._readData.getUint32(),w_$Q=w_$u._readData.getUint32(),w_$i=new Uint16Array(w_$l.slice(w_$b,w_$b+w_$Q)),w_$$=w_$_h.create("ushort",w_$Q/2,35044,!0,w_$u._mesh._url);w_$$.setData(w_$i),w_$u._mesh._indexBuffer=w_$$;var w_$V=w_$u._mesh._boneNames=[],w_$J=w_$u._readData.getUint16();for(w_$V.length=w_$J,w_$A=0;w_$A<w_$J;w_$A++)w_$V[w_$A]=w_$u._strings[w_$u._readData.getUint16()];w_$u._readData.pos+=8;var w_$H=w_$u._readData.getUint32(),w_$y=w_$u._readData.getUint32(),w_$C=new Float32Array(w_$l.slice(w_$s+w_$H,w_$s+w_$H+w_$y));for(w_$u._mesh._inverseBindPoses=[],w_$A=0,w_$B=w_$C.length;w_$A<w_$B;w_$A+=16){var w_$o=new w_$Bh(w_$C[w_$A+0],w_$C[w_$A+1],w_$C[w_$A+2],w_$C[w_$A+3],w_$C[w_$A+4],w_$C[w_$A+5],w_$C[w_$A+6],w_$C[w_$A+7],w_$C[w_$A+8],w_$C[w_$A+9],w_$C[w_$A+10],w_$C[w_$A+11],w_$C[w_$A+12],w_$C[w_$A+13],w_$C[w_$A+14],w_$C[w_$A+15]);w_$u._mesh._inverseBindPoses.push(w_$o)}return w_$u._mesh._skinnedDatas=new Float32Array(16*w_$C.length),!0},w_$u.READ_SUBMESH=function(){var w_$B=w_$u._readData.__getBuffer(),w_$h=new w_$Ph(w_$u._mesh),w_$l=w_$u._readData.getInt16(),w_$A=w_$u._readData.getUint32(),w_$n=w_$u._readData.getUint32();w_$h._vertexBuffer=w_$u._mesh._vertexBuffers[w_$l],w_$h._vertexStart=w_$A,w_$h._vertexCount=w_$n;var w_$s=w_$u._readData.getUint32(),w_$X=w_$u._readData.getUint32(),w_$Z=w_$u._mesh._indexBuffer;w_$h._indexBuffer=w_$Z,w_$h._indexStart=w_$s,w_$h._indexCount=w_$X,w_$h._indices=new Uint16Array(w_$Z.getData().buffer,2*w_$s,w_$X);var w_$t=w_$u._DATA.offset,w_$P=w_$h._subIndexBufferStart,w_$G=w_$h._subIndexBufferCount,w_$T=w_$h._boneIndicesList,w_$b=w_$u._readData.getUint16();w_$P.length=w_$b,w_$G.length=w_$b,w_$T.length=w_$b;for(var w_$Q=0;w_$Q<w_$b;w_$Q++){w_$P[w_$Q]=w_$u._readData.getUint32(),w_$G[w_$Q]=w_$u._readData.getUint32();var w_$i=w_$u._readData.getUint32(),w_$$=w_$u._readData.getUint32();w_$T[w_$Q]=new Uint8Array(w_$B.slice(w_$t+w_$i,w_$t+w_$i+w_$$))}return w_$u._subMeshes.push(w_$h),!0},w_$u._strings=[],w_$u._readData=null,w_$u._version=null,w_$u._mesh=null,w_$u._subMeshes=null,w_$u._materialMap=null,w_$T(w_$u,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$yB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":w_$JB.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":w_$FB.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$MB.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":w_$RB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$UB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":w_$uB.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$dB.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":w_$gB.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$bB.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":w_$GB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":w_$oB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":w_$VB.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":w_$jB.vertexDeclaration,"POSITION,NORMAL,UV,UV1":w_$NB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":w_$wB.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":w_$pB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":w_$$B.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":w_$OB.vertexDeclaration,"POSITION,NORMAL,UV":w_$SB.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":w_$iB.vertexDeclaration,"POSITION,NORMAL,COLOR":w_$PB.vertexDeclaration,"POSITION,NORMAL,TANGENT":w_$aB.vertexDeclaration,"POSITION,NORMAL":w_$tB.vertexDeclaration,"POSITION,UV":w_$mB.vertexDeclaration,POSITION:w_$ZB.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$HB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":w_$JB.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":w_$FB.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$WB.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":w_$RB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$vB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":w_$uB.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$_B.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":w_$gB.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":w_$TB.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":w_$GB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":w_$CB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":w_$VB.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":w_$EB.vertexDeclaration,"POSITION,NORMAL,UV,UV1":w_$NB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":w_$xB.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":w_$pB.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":w_$$B.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":w_$kB.vertexDeclaration,"POSITION,NORMAL,UV":w_$SB.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":w_$QB.vertexDeclaration,"POSITION,NORMAL,COLOR":w_$PB.vertexDeclaration,"POSITION,NORMAL,TANGENT":w_$zB.vertexDeclaration,"POSITION,NORMAL":w_$tB.vertexDeclaration,"POSITION,UV":w_$mB.vertexDeclaration,POSITION:w_$ZB.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),w_$u}(),w_$IB=function(){function w_$Z(){}return w_$Q(w_$Z,"laya.d3.loaders.MeshReader"),w_$Z.read=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=new w_$u(w_$B);w_$s.pos=0;var w_$X=w_$s.readUTFString();switch(w_$X){case"LAYAMODEL:01":case"LAYASKINANI:01":w_$Z._readVersion01(w_$s,w_$X,w_$h,w_$l,w_$A,w_$n);break;case"LAYAMODEL:02":w_$KB.parse(w_$s,w_$X,w_$h,w_$l,w_$A,w_$n);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":w_$fB.parse(w_$s,w_$X,w_$h,w_$A,w_$n);break;default:throw new Error("MeshReader: unknown mesh version.")}w_$h._setSubMeshes(w_$A)},w_$Z._readVersion01=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){new w_$YB(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s)},w_$Z}(),w_$LB=function(){function w_$B(w_$B,w_$h){this.min=null,this.max=null,this.min=w_$B,this.max=w_$h}w_$Q(w_$B,"laya.d3.math.BoundBox");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.getCorners=function(w_$B){w_$B.length=8;var w_$h=this.min.elements,w_$l=this.max.elements,w_$A=w_$h[0],w_$n=w_$h[1],w_$s=w_$h[2],w_$X=w_$l[0],w_$Z=w_$l[1],w_$t=w_$l[2];w_$B[0]=new w_$Xh(w_$A,w_$Z,w_$t),w_$B[1]=new w_$Xh(w_$X,w_$Z,w_$t),w_$B[2]=new w_$Xh(w_$X,w_$n,w_$t),w_$B[3]=new w_$Xh(w_$A,w_$n,w_$t),w_$B[4]=new w_$Xh(w_$A,w_$Z,w_$s),w_$B[5]=new w_$Xh(w_$X,w_$Z,w_$s),w_$B[6]=new w_$Xh(w_$X,w_$n,w_$s),w_$B[7]=new w_$Xh(w_$A,w_$n,w_$s)},w_$h.toDefault=function(){this.min.toDefault(),this.max.toDefault()},w_$h.cloneTo=function(w_$B){var w_$h=w_$B;this.min.cloneTo(w_$h.min),this.max.cloneTo(w_$h.max)},w_$h.clone=function(){var w_$B=new this.constructor(new w_$Xh,new w_$Xh);return this.cloneTo(w_$B),w_$B},w_$B.createfromPoints=function(w_$B,w_$h){if(null==w_$B)throw new Error("points");var w_$l=w_$h.min,w_$A=w_$h.max,w_$n=w_$l.elements;w_$n[0]=Number.MAX_VALUE,w_$n[1]=Number.MAX_VALUE,w_$n[2]=Number.MAX_VALUE;var w_$s=w_$A.elements;w_$s[0]=-Number.MAX_VALUE,w_$s[1]=-Number.MAX_VALUE,w_$s[2]=-Number.MAX_VALUE;for(var w_$X=0,w_$Z=w_$B.length;w_$X<w_$Z;++w_$X)w_$Xh.min(w_$l,w_$B[w_$X],w_$l),w_$Xh.max(w_$A,w_$B[w_$X],w_$A)},w_$B.merge=function(w_$B,w_$h,w_$l){w_$Xh.min(w_$B.min,w_$h.min,w_$l.min),w_$Xh.max(w_$B.max,w_$h.max,w_$l.max)},w_$B}(),w_$eB=function(){function w_$P(w_$B){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=w_$B,this._near=new w_$hh(new w_$Xh),this._far=new w_$hh(new w_$Xh),this._left=new w_$hh(new w_$Xh),this._right=new w_$hh(new w_$Xh),this._top=new w_$hh(new w_$Xh),this._bottom=new w_$hh(new w_$Xh),w_$P._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}w_$Q(w_$P,"laya.d3.math.BoundFrustum");var w_$B=w_$P.prototype;return w_$B.equalsBoundFrustum=function(w_$B){return this._matrix.equalsOtherMatrix(w_$B.matrix)},w_$B.equalsObj=function(w_$B){if(w_$B instanceof laya.d3.math.BoundFrustum){var w_$h=w_$B;return this.equalsBoundFrustum(w_$h)}return!1},w_$B.getPlane=function(w_$B){switch(w_$B){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},w_$B.getCorners=function(w_$B){w_$P._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(w_$B[0]),w_$P._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(w_$B[1]),w_$P._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(w_$B[2]),w_$P._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(w_$B[3]),w_$P._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(w_$B[4]),w_$P._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(w_$B[5]),w_$P._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(w_$B[6]),w_$P._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(w_$B[7])},w_$B.containsPoint=function(w_$B){for(var w_$h=w_$hh.PlaneIntersectionType_Front,w_$l=w_$hh.PlaneIntersectionType_Front,w_$A=0;w_$A<6;w_$A++){switch(w_$A){case 0:w_$l=Collision.intersectsPlaneAndPoint(this._near,w_$B);break;case 1:w_$l=Collision.intersectsPlaneAndPoint(this._far,w_$B);break;case 2:w_$l=Collision.intersectsPlaneAndPoint(this._left,w_$B);break;case 3:w_$l=Collision.intersectsPlaneAndPoint(this._right,w_$B);break;case 4:w_$l=Collision.intersectsPlaneAndPoint(this._top,w_$B);break;case 5:w_$l=Collision.intersectsPlaneAndPoint(this._bottom,w_$B)}switch(w_$l){case w_$hh.PlaneIntersectionType_Back:return 0;case w_$hh.PlaneIntersectionType_Intersecting:w_$h=w_$hh.PlaneIntersectionType_Intersecting}}switch(w_$h){case w_$hh.PlaneIntersectionType_Intersecting:return 2;default:return 1}},w_$B.containsBoundBox=function(w_$B){for(var w_$h,w_$l=w_$P._tempV30,w_$A=w_$P._tempV31,w_$n=1,w_$s=0;w_$s<6;w_$s++){if(w_$h=this.getPlane(w_$s),this._getBoxToPlanePVertexNVertex(w_$B,w_$h.normal,w_$l,w_$A),Collision.intersectsPlaneAndPoint(w_$h,w_$l)===w_$hh.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(w_$h,w_$A)===w_$hh.PlaneIntersectionType_Back&&(w_$n=2)}return w_$n},w_$B.containsBoundSphere=function(w_$B){for(var w_$h=w_$hh.PlaneIntersectionType_Front,w_$l=w_$hh.PlaneIntersectionType_Front,w_$A=0;w_$A<6;w_$A++){switch(w_$A){case 0:w_$l=Collision.intersectsPlaneAndSphere(this._near,w_$B);break;case 1:w_$l=Collision.intersectsPlaneAndSphere(this._far,w_$B);break;case 2:w_$l=Collision.intersectsPlaneAndSphere(this._left,w_$B);break;case 3:w_$l=Collision.intersectsPlaneAndSphere(this._right,w_$B);break;case 4:w_$l=Collision.intersectsPlaneAndSphere(this._top,w_$B);break;case 5:w_$l=Collision.intersectsPlaneAndSphere(this._bottom,w_$B)}switch(w_$l){case w_$hh.PlaneIntersectionType_Back:return 0;case w_$hh.PlaneIntersectionType_Intersecting:w_$h=w_$hh.PlaneIntersectionType_Intersecting}}switch(w_$h){case w_$hh.PlaneIntersectionType_Intersecting:return 2;default:return 1}},w_$B._getBoxToPlanePVertexNVertex=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.min,w_$s=w_$n.elements,w_$X=w_$B.max,w_$Z=w_$X.elements,w_$t=w_$h.elements,w_$P=w_$t[0],w_$G=w_$t[1],w_$T=w_$t[2];w_$n.cloneTo(w_$l);var w_$b=w_$l.elements;0<=w_$P&&(w_$b[0]=w_$Z[0]),0<=w_$G&&(w_$b[1]=w_$Z[1]),0<=w_$T&&(w_$b[2]=w_$Z[2]),w_$X.cloneTo(w_$A);var w_$Q=w_$A.elements;0<=w_$P&&(w_$Q[0]=w_$s[0]),0<=w_$G&&(w_$Q[1]=w_$s[1]),0<=w_$T&&(w_$Q[2]=w_$s[2])},w_$i(0,w_$B,"top",function(){return this._top}),w_$i(0,w_$B,"matrix",function(){return this._matrix},function(w_$B){this._matrix=w_$B,w_$P._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),w_$i(0,w_$B,"near",function(){return this._near}),w_$i(0,w_$B,"far",function(){return this._far}),w_$i(0,w_$B,"left",function(){return this._left}),w_$i(0,w_$B,"right",function(){return this._right}),w_$i(0,w_$B,"bottom",function(){return this._bottom}),w_$P._getPlanesFromMatrix=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){var w_$Z=w_$B.elements,w_$t=w_$Z[0],w_$P=w_$Z[1],w_$G=w_$Z[2],w_$T=w_$Z[3],w_$b=w_$Z[4],w_$Q=w_$Z[5],w_$i=w_$Z[6],w_$$=w_$Z[7],w_$V=w_$Z[8],w_$J=w_$Z[9],w_$H=w_$Z[10],w_$y=w_$Z[11],w_$C=w_$Z[12],w_$o=w_$Z[13],w_$u=w_$Z[14],w_$v=w_$Z[15],w_$U=w_$h.normal.elements;w_$U[0]=w_$T+w_$G,w_$U[1]=w_$$+w_$i,w_$U[2]=w_$y+w_$H,w_$h.distance=w_$v+w_$u,w_$h.normalize();var w_$x=w_$l.normal.elements;w_$x[0]=w_$T-w_$G,w_$x[1]=w_$$-w_$i,w_$x[2]=w_$y-w_$H,w_$l.distance=w_$v-w_$u,w_$l.normalize();var w_$w=w_$A.normal.elements;w_$w[0]=w_$T+w_$t,w_$w[1]=w_$$+w_$b,w_$w[2]=w_$y+w_$V,w_$A.distance=w_$v+w_$C,w_$A.normalize();var w_$z=w_$n.normal.elements;w_$z[0]=w_$T-w_$t,w_$z[1]=w_$$-w_$b,w_$z[2]=w_$y-w_$V,w_$n.distance=w_$v-w_$C,w_$n.normalize();var w_$a=w_$s.normal.elements;w_$a[0]=w_$T-w_$P,w_$a[1]=w_$$-w_$Q,w_$a[2]=w_$y-w_$J,w_$s.distance=w_$v-w_$o,w_$s.normalize();var w_$S=w_$X.normal.elements;w_$S[0]=w_$T+w_$P,w_$S[1]=w_$$+w_$Q,w_$S[2]=w_$y+w_$J,w_$X.distance=w_$v+w_$o,w_$X.normalize()},w_$P._get3PlaneInterPoint=function(w_$B,w_$h,w_$l){var w_$A=w_$B.normal,w_$n=w_$h.normal,w_$s=w_$l.normal;w_$Xh.cross(w_$n,w_$s,w_$P._tempV30),w_$Xh.cross(w_$s,w_$A,w_$P._tempV31),w_$Xh.cross(w_$A,w_$n,w_$P._tempV32);var w_$X=w_$Xh.dot(w_$A,w_$P._tempV30),w_$Z=w_$Xh.dot(w_$n,w_$P._tempV31),w_$t=w_$Xh.dot(w_$s,w_$P._tempV32);return w_$Xh.scale(w_$P._tempV30,-w_$B.distance/w_$X,w_$P._tempV33),w_$Xh.scale(w_$P._tempV31,-w_$h.distance/w_$Z,w_$P._tempV34),w_$Xh.scale(w_$P._tempV32,-w_$l.distance/w_$t,w_$P._tempV35),w_$Xh.add(w_$P._tempV33,w_$P._tempV34,w_$P._tempV36),w_$Xh.add(w_$P._tempV35,w_$P._tempV36,w_$P._tempV37),w_$P._tempV37},w_$T(w_$P,["_tempV30",function(){return this._tempV30=new w_$Xh},"_tempV31",function(){return this._tempV31=new w_$Xh},"_tempV32",function(){return this._tempV32=new w_$Xh},"_tempV33",function(){return this._tempV33=new w_$Xh},"_tempV34",function(){return this._tempV34=new w_$Xh},"_tempV35",function(){return this._tempV35=new w_$Xh},"_tempV36",function(){return this._tempV36=new w_$Xh},"_tempV37",function(){return this._tempV37=new w_$Xh}]),w_$P}(),w_$qB=function(){function w_$G(w_$B,w_$h){this.center=null,this.radius=NaN,this.center=w_$B,this.radius=w_$h}w_$Q(w_$G,"laya.d3.math.BoundSphere");var w_$B=w_$G.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.toDefault=function(){this.center.toDefault(),this.radius=0},w_$B.intersectsRayDistance=function(w_$B){return Collision.intersectsRayAndSphereRD(w_$B,this)},w_$B.intersectsRayPoint=function(w_$B,w_$h){return Collision.intersectsRayAndSphereRP(w_$B,this,w_$h)},w_$B.cloneTo=function(w_$B){var w_$h=w_$B;this.center.cloneTo(w_$h.center),w_$h.radius=this.radius},w_$B.clone=function(){var w_$B=new this.constructor(new w_$Xh,new w_$Xh);return this.cloneTo(w_$B),w_$B},w_$G.createFromSubPoints=function(w_$B,w_$h,w_$l,w_$A){if(null==w_$B)throw new Error("points");if(w_$h<0||w_$h>=w_$B.length)throw new Error("start"+w_$h+"Must be in the range [0, "+(w_$B.length-1)+"]");if(w_$l<0||w_$h+w_$l>w_$B.length)throw new Error("count"+w_$l+"Must be in the range <= "+w_$B.length+"}");var w_$n=w_$h+w_$l,w_$s=w_$G._tempVector3;w_$s.elements[0]=0,w_$s.elements[1]=0,w_$s.elements[2]=0;for(var w_$X=w_$h;w_$X<w_$n;++w_$X)w_$Xh.add(w_$B[w_$X],w_$s,w_$s);var w_$Z=w_$A.center;w_$Xh.scale(w_$s,1/w_$l,w_$Z);var w_$t=0;for(w_$X=w_$h;w_$X<w_$n;++w_$X){var w_$P=w_$Xh.distanceSquared(w_$Z,w_$B[w_$X]);w_$t<w_$P&&(w_$t=w_$P)}w_$A.radius=Math.sqrt(w_$t)},w_$G.createfromPoints=function(w_$B,w_$h){if(null==w_$B)throw new Error("points");w_$G.createFromSubPoints(w_$B,0,w_$B.length,w_$h)},w_$T(w_$G,["_tempVector3",function(){return this._tempVector3=new w_$Xh}]),w_$G}(),w_$DB=(function(){function w_$B(){}w_$Q(w_$B,"laya.d3.math.ContainmentType"),w_$B.Disjoint=0,w_$B.Contains=1,w_$B.Intersects=2}(),function(){function w_$l(){}return w_$Q(w_$l,"laya.d3.math.MathUtils3D"),w_$l.isZero=function(w_$B){return Math.abs(w_$B)<w_$l.zeroTolerance},w_$l.nearEqual=function(w_$B,w_$h){return!!w_$l.isZero(w_$B-w_$h)},w_$l.fastInvSqrt=function(w_$B){return w_$l.isZero(w_$B)?w_$B:1/Math.sqrt(w_$B)},w_$T(w_$l,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),w_$l}()),w_$rB=function(){function w_$t(){var w_$B=this.elements=new Float32Array(9);w_$B[0]=1,w_$B[1]=0,w_$B[2]=0,w_$B[3]=0,w_$B[4]=1,w_$B[5]=0,w_$B[6]=0,w_$B[7]=0,w_$B[8]=1}w_$Q(w_$t,"laya.d3.math.Matrix3x3");var w_$B=w_$t.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.determinant=function(){var w_$B=this.elements,w_$h=w_$B[0],w_$l=w_$B[1],w_$A=w_$B[2],w_$n=w_$B[3],w_$s=w_$B[4],w_$X=w_$B[5],w_$Z=w_$B[6],w_$t=w_$B[7],w_$P=w_$B[8];return w_$h*(w_$P*w_$s-w_$X*w_$t)+w_$l*(-w_$P*w_$n+w_$X*w_$Z)+w_$A*(w_$t*w_$n-w_$s*w_$Z)},w_$B.translate=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=this.elements,w_$n=w_$B.elements,w_$s=w_$A[0],w_$X=w_$A[1],w_$Z=w_$A[2],w_$t=w_$A[3],w_$P=w_$A[4],w_$G=w_$A[5],w_$T=w_$A[6],w_$b=w_$A[7],w_$Q=w_$A[8],w_$i=w_$n[0],w_$$=w_$n[1];w_$l[0]=w_$s,w_$l[1]=w_$X,w_$l[2]=w_$Z,w_$l[3]=w_$t,w_$l[4]=w_$P,w_$l[5]=w_$G,w_$l[6]=w_$i*w_$s+w_$$*w_$t+w_$T,w_$l[7]=w_$i*w_$X+w_$$*w_$P+w_$b,w_$l[8]=w_$i*w_$Z+w_$$*w_$G+w_$Q},w_$B.rotate=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=this.elements,w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$A[3],w_$t=w_$A[4],w_$P=w_$A[5],w_$G=w_$A[6],w_$T=w_$A[7],w_$b=w_$A[8],w_$Q=Math.sin(w_$B),w_$i=Math.cos(w_$B);w_$l[0]=w_$i*w_$n+w_$Q*w_$Z,w_$l[1]=w_$i*w_$s+w_$Q*w_$t,w_$l[2]=w_$i*w_$X+w_$Q*w_$P,w_$l[3]=w_$i*w_$Z-w_$Q*w_$n,w_$l[4]=w_$i*w_$t-w_$Q*w_$s,w_$l[5]=w_$i*w_$P-w_$Q*w_$X,w_$l[6]=w_$G,w_$l[7]=w_$T,w_$l[8]=w_$b},w_$B.scale=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=this.elements,w_$n=w_$B.elements,w_$s=w_$n[0],w_$X=w_$n[1];w_$l[0]=w_$s*w_$A[0],w_$l[1]=w_$s*w_$A[1],w_$l[2]=w_$s*w_$A[2],w_$l[3]=w_$X*w_$A[3],w_$l[4]=w_$X*w_$A[4],w_$l[5]=w_$X*w_$A[5],w_$l[6]=w_$A[6],w_$l[7]=w_$A[7],w_$l[8]=w_$A[8]},w_$B.invert=function(w_$B){var w_$h=w_$B.elements,w_$l=this.elements,w_$A=w_$l[0],w_$n=w_$l[1],w_$s=w_$l[2],w_$X=w_$l[3],w_$Z=w_$l[4],w_$t=w_$l[5],w_$P=w_$l[6],w_$G=w_$l[7],w_$T=w_$l[8],w_$b=w_$T*w_$Z-w_$t*w_$G,w_$Q=-w_$T*w_$X+w_$t*w_$P,w_$i=w_$G*w_$X-w_$Z*w_$P,w_$$=w_$A*w_$b+w_$n*w_$Q+w_$s*w_$i;w_$$||(w_$B=null),w_$$=1/w_$$,w_$h[0]=w_$b*w_$$,w_$h[1]=(-w_$T*w_$n+w_$s*w_$G)*w_$$,w_$h[2]=(w_$t*w_$n-w_$s*w_$Z)*w_$$,w_$h[3]=w_$Q*w_$$,w_$h[4]=(w_$T*w_$A-w_$s*w_$P)*w_$$,w_$h[5]=(-w_$t*w_$A+w_$s*w_$X)*w_$$,w_$h[6]=w_$i*w_$$,w_$h[7]=(-w_$G*w_$A+w_$n*w_$P)*w_$$,w_$h[8]=(w_$Z*w_$A-w_$n*w_$X)*w_$$},w_$B.transpose=function(w_$B){var w_$h=w_$B.elements,w_$l=this.elements;if(w_$B===this){var w_$A=w_$l[1],w_$n=w_$l[2],w_$s=w_$l[5];w_$h[1]=w_$l[3],w_$h[2]=w_$l[6],w_$h[3]=w_$A,w_$h[5]=w_$l[7],w_$h[6]=w_$n,w_$h[7]=w_$s}else w_$h[0]=w_$l[0],w_$h[1]=w_$l[3],w_$h[2]=w_$l[6],w_$h[3]=w_$l[1],w_$h[4]=w_$l[4],w_$h[5]=w_$l[7],w_$h[6]=w_$l[2],w_$h[7]=w_$l[5],w_$h[8]=w_$l[8]},w_$B.identity=function(){var w_$B=this.elements;w_$B[0]=1,w_$B[1]=0,w_$B[2]=0,w_$B[3]=0,w_$B[4]=1,w_$B[5]=0,w_$B[6]=0,w_$B[7]=0,w_$B[8]=1},w_$B.cloneTo=function(w_$B){var w_$h,w_$l,w_$A;if((w_$l=this.elements)!==(w_$A=w_$B.elements))for(w_$h=0;w_$h<9;++w_$h)w_$A[w_$h]=w_$l[w_$h]},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$t.createFromTranslation=function(w_$B,w_$h){w_$h.elements;var w_$l=w_$B.elements;w_$h[0]=1,w_$h[1]=0,w_$h[2]=0,w_$h[3]=0,w_$h[4]=1,w_$h[5]=0,w_$h[6]=w_$l[0],w_$h[7]=w_$l[1],w_$h[8]=1},w_$t.createFromRotation=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=Math.sin(w_$B),w_$n=Math.cos(w_$B);w_$l[0]=w_$n,w_$l[1]=w_$A,w_$l[2]=0,w_$l[3]=-w_$A,w_$l[4]=w_$n,w_$l[5]=0,w_$l[6]=0,w_$l[7]=0,w_$l[8]=1},w_$t.createFromScaling=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=w_$B.elements;w_$l[0]=w_$A[0],w_$l[1]=0,w_$l[2]=0,w_$l[3]=0,w_$l[4]=w_$A[1],w_$l[5]=0,w_$l[6]=0,w_$l[7]=0,w_$l[8]=1},w_$t.createFromMatrix4x4=function(w_$B,w_$h){w_$h[0]=w_$B[0],w_$h[1]=w_$B[1],w_$h[2]=w_$B[2],w_$h[3]=w_$B[4],w_$h[4]=w_$B[5],w_$h[5]=w_$B[6],w_$h[6]=w_$B[8],w_$h[7]=w_$B[9],w_$h[8]=w_$B[10]},w_$t.multiply=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements,w_$X=w_$n[0],w_$Z=w_$n[1],w_$t=w_$n[2],w_$P=w_$n[3],w_$G=w_$n[4],w_$T=w_$n[5],w_$b=w_$n[6],w_$Q=w_$n[7],w_$i=w_$n[8],w_$$=w_$s[0],w_$V=w_$s[1],w_$J=w_$s[2],w_$H=w_$s[3],w_$y=w_$s[4],w_$C=w_$s[5],w_$o=w_$s[6],w_$u=w_$s[7],w_$v=w_$s[8];w_$A[0]=w_$$*w_$X+w_$V*w_$P+w_$J*w_$b,w_$A[1]=w_$$*w_$Z+w_$V*w_$G+w_$J*w_$Q,w_$A[2]=w_$$*w_$t+w_$V*w_$T+w_$J*w_$i,w_$A[3]=w_$H*w_$X+w_$y*w_$P+w_$C*w_$b,w_$A[4]=w_$H*w_$Z+w_$y*w_$G+w_$C*w_$Q,w_$A[5]=w_$H*w_$t+w_$y*w_$T+w_$C*w_$i,w_$A[6]=w_$o*w_$X+w_$u*w_$P+w_$v*w_$b,w_$A[7]=w_$o*w_$Z+w_$u*w_$G+w_$v*w_$Q,w_$A[8]=w_$o*w_$t+w_$u*w_$T+w_$v*w_$i},w_$t.lookAt=function(w_$B,w_$h,w_$l,w_$A){w_$Xh.subtract(w_$B,w_$h,w_$t._tempV30),w_$Xh.normalize(w_$t._tempV30,w_$t._tempV30),w_$Xh.cross(w_$l,w_$t._tempV30,w_$t._tempV31),w_$Xh.normalize(w_$t._tempV31,w_$t._tempV31),w_$Xh.cross(w_$t._tempV30,w_$t._tempV31,w_$t._tempV32);var w_$n=w_$t._tempV30.elements,w_$s=w_$t._tempV31.elements,w_$X=w_$t._tempV32.elements,w_$Z=w_$A.elements;w_$Z[0]=w_$s[0],w_$Z[3]=w_$s[1],w_$Z[6]=w_$s[2],w_$Z[1]=w_$X[0],w_$Z[4]=w_$X[1],w_$Z[7]=w_$X[2],w_$Z[2]=w_$n[0],w_$Z[5]=w_$n[1],w_$Z[8]=w_$n[2]},w_$t.DEFAULT=new w_$t,w_$T(w_$t,["_tempV30",function(){return this._tempV30=new w_$Xh},"_tempV31",function(){return this._tempV31=new w_$Xh},"_tempV32",function(){return this._tempV32=new w_$Xh}]),w_$t}(),w_$Bh=function(){function w_$x(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T,w_$b,w_$Q,w_$i,w_$$){void 0===w_$B&&(w_$B=1),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=1),void 0===w_$X&&(w_$X=0),void 0===w_$Z&&(w_$Z=0),void 0===w_$t&&(w_$t=0),void 0===w_$P&&(w_$P=0),void 0===w_$G&&(w_$G=1),void 0===w_$T&&(w_$T=0),void 0===w_$b&&(w_$b=0),void 0===w_$Q&&(w_$Q=0),void 0===w_$i&&(w_$i=0),void 0===w_$$&&(w_$$=1);var w_$V=this.elements=new Float32Array(16);w_$V[0]=w_$B,w_$V[1]=w_$h,w_$V[2]=w_$l,w_$V[3]=w_$A,w_$V[4]=w_$n,w_$V[5]=w_$s,w_$V[6]=w_$X,w_$V[7]=w_$Z,w_$V[8]=w_$t,w_$V[9]=w_$P,w_$V[10]=w_$G,w_$V[11]=w_$T,w_$V[12]=w_$b,w_$V[13]=w_$Q,w_$V[14]=w_$i,w_$V[15]=w_$$}w_$Q(w_$x,"laya.d3.math.Matrix4x4");var w_$B=w_$x.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.getElementByRowColumn=function(w_$B,w_$h){if(w_$B<0||3<w_$B)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(w_$h<0||3<w_$h)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*w_$B+w_$h]},w_$B.setElementByRowColumn=function(w_$B,w_$h,w_$l){if(w_$B<0||3<w_$B)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(w_$h<0||3<w_$h)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*w_$B+w_$h]=w_$l},w_$B.equalsOtherMatrix=function(w_$B){var w_$h=this.elements,w_$l=w_$B.elements;return w_$DB.nearEqual(w_$h[0],w_$l[0])&&w_$DB.nearEqual(w_$h[1],w_$l[1])&&w_$DB.nearEqual(w_$h[2],w_$l[2])&&w_$DB.nearEqual(w_$h[3],w_$l[3])&&w_$DB.nearEqual(w_$h[4],w_$l[4])&&w_$DB.nearEqual(w_$h[5],w_$l[5])&&w_$DB.nearEqual(w_$h[6],w_$l[6])&&w_$DB.nearEqual(w_$h[7],w_$l[7])&&w_$DB.nearEqual(w_$h[8],w_$l[8])&&w_$DB.nearEqual(w_$h[9],w_$l[9])&&w_$DB.nearEqual(w_$h[10],w_$l[10])&&w_$DB.nearEqual(w_$h[11],w_$l[11])&&w_$DB.nearEqual(w_$h[12],w_$l[12])&&w_$DB.nearEqual(w_$h[13],w_$l[13])&&w_$DB.nearEqual(w_$h[14],w_$l[14])&&w_$DB.nearEqual(w_$h[15],w_$l[15])},w_$B.decomposeTransRotScale=function(w_$B,w_$h,w_$l){var w_$A=w_$x._tempMatrix4x4;return this.decomposeTransRotMatScale(w_$B,w_$A,w_$l)?(w_$lh.createFromMatrix4x4(w_$A,w_$h),!0):(w_$h.identity(),!1)},w_$B.decomposeTransRotMatScale=function(w_$B,w_$h,w_$l){var w_$A=this.elements,w_$n=w_$B.elements,w_$s=w_$h.elements,w_$X=w_$l.elements;w_$n[0]=w_$A[12],w_$n[1]=w_$A[13],w_$n[2]=w_$A[14];var w_$Z=w_$A[0],w_$t=w_$A[1],w_$P=w_$A[2],w_$G=w_$A[4],w_$T=w_$A[5],w_$b=w_$A[6],w_$Q=w_$A[8],w_$i=w_$A[9],w_$$=w_$A[10],w_$V=w_$X[0]=Math.sqrt(w_$Z*w_$Z+w_$t*w_$t+w_$P*w_$P),w_$J=w_$X[1]=Math.sqrt(w_$G*w_$G+w_$T*w_$T+w_$b*w_$b),w_$H=w_$X[2]=Math.sqrt(w_$Q*w_$Q+w_$i*w_$i+w_$$*w_$$);if(w_$DB.isZero(w_$V)||w_$DB.isZero(w_$J)||w_$DB.isZero(w_$H))return w_$s[1]=w_$s[2]=w_$s[3]=w_$s[4]=w_$s[6]=w_$s[7]=w_$s[8]=w_$s[9]=w_$s[11]=w_$s[12]=w_$s[13]=w_$s[14]=0,w_$s[0]=w_$s[5]=w_$s[10]=w_$s[15]=1,!1;var w_$y=w_$x._tempVector0,w_$C=w_$y.elements;w_$C[0]=w_$Q/w_$H,w_$C[1]=w_$i/w_$H,w_$C[2]=w_$$/w_$H;var w_$o=w_$x._tempVector1,w_$u=w_$o.elements;w_$u[0]=w_$Z/w_$V,w_$u[1]=w_$t/w_$V,w_$u[2]=w_$P/w_$V;var w_$v=w_$x._tempVector2;w_$Xh.cross(w_$y,w_$o,w_$v);var w_$U=w_$x._tempVector1;return w_$Xh.cross(w_$v,w_$y,w_$U),w_$s[3]=w_$s[7]=w_$s[11]=w_$s[12]=w_$s[13]=w_$s[14]=0,w_$s[15]=1,w_$s[0]=w_$U.x,w_$s[1]=w_$U.y,w_$s[2]=w_$U.z,w_$s[4]=w_$v.x,w_$s[5]=w_$v.y,w_$s[6]=w_$v.z,w_$s[8]=w_$y.x,w_$s[9]=w_$y.y,w_$s[10]=w_$y.z,w_$s[0]*w_$Z+w_$s[1]*w_$t+w_$s[2]*w_$P<0&&(w_$X[0]=-w_$V),w_$s[4]*w_$G+w_$s[5]*w_$T+w_$s[6]*w_$b<0&&(w_$X[1]=-w_$J),w_$s[8]*w_$Q+w_$s[9]*w_$i+w_$s[10]*w_$$<0&&(w_$X[2]=-w_$H),!0},w_$B.decomposeYawPitchRoll=function(w_$B){var w_$h=w_$B.elements,w_$l=Math.asin(-this.elements[9]);w_$h[1]=w_$l,Math.cos(w_$l)>w_$DB.zeroTolerance?(w_$h[2]=Math.atan2(this.elements[1],this.elements[5]),w_$h[0]=Math.atan2(this.elements[8],this.elements[10])):(w_$h[2]=Math.atan2(-this.elements[4],this.elements[0]),w_$h[0]=0)},w_$B.normalize=function(){var w_$B=this.elements,w_$h=w_$B[0],w_$l=w_$B[1],w_$A=w_$B[2],w_$n=Math.sqrt(w_$h*w_$h+w_$l*w_$l+w_$A*w_$A);if(!w_$n)return w_$B[0]=0,w_$B[1]=0,void(w_$B[2]=0);1!=w_$n&&(w_$n=1/w_$n,w_$B[0]=w_$h*w_$n,w_$B[1]=w_$l*w_$n,w_$B[2]=w_$A*w_$n)},w_$B.transpose=function(){var w_$B,w_$h;return w_$h=(w_$B=this.elements)[1],w_$B[1]=w_$B[4],w_$B[4]=w_$h,w_$h=w_$B[2],w_$B[2]=w_$B[8],w_$B[8]=w_$h,w_$h=w_$B[3],w_$B[3]=w_$B[12],w_$B[12]=w_$h,w_$h=w_$B[6],w_$B[6]=w_$B[9],w_$B[9]=w_$h,w_$h=w_$B[7],w_$B[7]=w_$B[13],w_$B[13]=w_$h,w_$h=w_$B[11],w_$B[11]=w_$B[14],w_$B[14]=w_$h,this},w_$B.invert=function(w_$B){var w_$h=this.elements,w_$l=w_$B.elements,w_$A=w_$h[0],w_$n=w_$h[1],w_$s=w_$h[2],w_$X=w_$h[3],w_$Z=w_$h[4],w_$t=w_$h[5],w_$P=w_$h[6],w_$G=w_$h[7],w_$T=w_$h[8],w_$b=w_$h[9],w_$Q=w_$h[10],w_$i=w_$h[11],w_$$=w_$h[12],w_$V=w_$h[13],w_$J=w_$h[14],w_$H=w_$h[15],w_$y=w_$A*w_$t-w_$n*w_$Z,w_$C=w_$A*w_$P-w_$s*w_$Z,w_$o=w_$A*w_$G-w_$X*w_$Z,w_$u=w_$n*w_$P-w_$s*w_$t,w_$v=w_$n*w_$G-w_$X*w_$t,w_$U=w_$s*w_$G-w_$X*w_$P,w_$x=w_$T*w_$V-w_$b*w_$$,w_$w=w_$T*w_$J-w_$Q*w_$$,w_$z=w_$T*w_$H-w_$i*w_$$,w_$a=w_$b*w_$J-w_$Q*w_$V,w_$S=w_$b*w_$H-w_$i*w_$V,w_$N=w_$Q*w_$H-w_$i*w_$J,w_$R=w_$y*w_$N-w_$C*w_$S+w_$o*w_$a+w_$u*w_$z-w_$v*w_$w+w_$U*w_$x;0!==Math.abs(w_$R)&&(w_$R=1/w_$R,w_$l[0]=(w_$t*w_$N-w_$P*w_$S+w_$G*w_$a)*w_$R,w_$l[1]=(w_$s*w_$S-w_$n*w_$N-w_$X*w_$a)*w_$R,w_$l[2]=(w_$V*w_$U-w_$J*w_$v+w_$H*w_$u)*w_$R,w_$l[3]=(w_$Q*w_$v-w_$b*w_$U-w_$i*w_$u)*w_$R,w_$l[4]=(w_$P*w_$z-w_$Z*w_$N-w_$G*w_$w)*w_$R,w_$l[5]=(w_$A*w_$N-w_$s*w_$z+w_$X*w_$w)*w_$R,w_$l[6]=(w_$J*w_$o-w_$$*w_$U-w_$H*w_$C)*w_$R,w_$l[7]=(w_$T*w_$U-w_$Q*w_$o+w_$i*w_$C)*w_$R,w_$l[8]=(w_$Z*w_$S-w_$t*w_$z+w_$G*w_$x)*w_$R,w_$l[9]=(w_$n*w_$z-w_$A*w_$S-w_$X*w_$x)*w_$R,w_$l[10]=(w_$$*w_$v-w_$V*w_$o+w_$H*w_$y)*w_$R,w_$l[11]=(w_$b*w_$o-w_$T*w_$v-w_$i*w_$y)*w_$R,w_$l[12]=(w_$t*w_$w-w_$Z*w_$a-w_$P*w_$x)*w_$R,w_$l[13]=(w_$A*w_$a-w_$n*w_$w+w_$s*w_$x)*w_$R,w_$l[14]=(w_$V*w_$C-w_$$*w_$u-w_$J*w_$y)*w_$R,w_$l[15]=(w_$T*w_$u-w_$b*w_$C+w_$Q*w_$y)*w_$R)},w_$B.identity=function(){var w_$B=this.elements;w_$B[1]=w_$B[2]=w_$B[3]=w_$B[4]=w_$B[6]=w_$B[7]=w_$B[8]=w_$B[9]=w_$B[11]=w_$B[12]=w_$B[13]=w_$B[14]=0,w_$B[0]=w_$B[5]=w_$B[10]=w_$B[15]=1},w_$B.cloneTo=function(w_$B){var w_$h,w_$l,w_$A;if((w_$l=this.elements)!==(w_$A=w_$B.elements))for(w_$h=0;w_$h<16;++w_$h)w_$A[w_$h]=w_$l[w_$h]},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$B.getTranslationVector=function(w_$B){var w_$h=this.elements,w_$l=w_$B.elements;w_$l[0]=w_$h[12],w_$l[1]=w_$h[13],w_$l[2]=w_$h[14]},w_$B.setTranslationVector=function(w_$B){var w_$h=this.elements,w_$l=w_$B.elements;w_$h[12]=w_$l[0],w_$h[13]=w_$l[1],w_$h[14]=w_$l[2]},w_$B.getForward=function(w_$B){var w_$h=this.elements,w_$l=w_$B.elements;w_$l[0]=-w_$h[8],w_$l[1]=-w_$h[9],w_$l[2]=-w_$h[10]},w_$B.setForward=function(w_$B){var w_$h=this.elements,w_$l=w_$B.elements;w_$h[8]=-w_$l[0],w_$h[9]=-w_$l[1],w_$h[10]=-w_$l[2]},w_$x.createRotationX=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=Math.sin(w_$B),w_$n=Math.cos(w_$B);w_$l[1]=w_$l[2]=w_$l[3]=w_$l[4]=w_$l[7]=w_$l[8]=w_$l[11]=w_$l[12]=w_$l[13]=w_$l[14]=0,w_$l[0]=w_$l[15]=1,w_$l[5]=w_$l[10]=w_$n,w_$l[6]=w_$A,w_$l[9]=-w_$A},w_$x.createRotationY=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=Math.sin(w_$B),w_$n=Math.cos(w_$B);w_$l[1]=w_$l[3]=w_$l[4]=w_$l[6]=w_$l[7]=w_$l[9]=w_$l[11]=w_$l[12]=w_$l[13]=w_$l[14]=0,w_$l[5]=w_$l[15]=1,w_$l[0]=w_$l[10]=w_$n,w_$l[2]=-w_$A,w_$l[8]=w_$A},w_$x.createRotationZ=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=Math.sin(w_$B),w_$n=Math.cos(w_$B);w_$l[2]=w_$l[3]=w_$l[6]=w_$l[7]=w_$l[8]=w_$l[9]=w_$l[11]=w_$l[12]=w_$l[13]=w_$l[14]=0,w_$l[10]=w_$l[15]=1,w_$l[0]=w_$l[5]=w_$n,w_$l[1]=w_$A,w_$l[4]=-w_$A},w_$x.createRotationYawPitchRoll=function(w_$B,w_$h,w_$l,w_$A){w_$lh.createFromYawPitchRoll(w_$B,w_$h,w_$l,w_$x._tempQuaternion),w_$x.createRotationQuaternion(w_$x._tempQuaternion,w_$A)},w_$x.createRotationAxis=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=Math.cos(w_$h),w_$t=Math.sin(w_$h),w_$P=w_$n*w_$n,w_$G=w_$s*w_$s,w_$T=w_$X*w_$X,w_$b=w_$n*w_$s,w_$Q=w_$n*w_$X,w_$i=w_$s*w_$X,w_$$=w_$l.elements;w_$$[3]=w_$$[7]=w_$$[11]=w_$$[12]=w_$$[13]=w_$$[14]=0,w_$$[15]=1,w_$$[0]=w_$P+w_$Z*(1-w_$P),w_$$[1]=w_$b-w_$Z*w_$b+w_$t*w_$X,w_$$[2]=w_$Q-w_$Z*w_$Q-w_$t*w_$s,w_$$[4]=w_$b-w_$Z*w_$b-w_$t*w_$X,w_$$[5]=w_$G+w_$Z*(1-w_$G),w_$$[6]=w_$i-w_$Z*w_$i+w_$t*w_$n,w_$$[8]=w_$Q-w_$Z*w_$Q+w_$t*w_$s,w_$$[9]=w_$i-w_$Z*w_$i-w_$t*w_$n,w_$$[10]=w_$T+w_$Z*(1-w_$T)},w_$x.createRotationQuaternion=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$l[0],w_$s=w_$l[1],w_$X=w_$l[2],w_$Z=w_$l[3],w_$t=w_$n*w_$n,w_$P=w_$s*w_$s,w_$G=w_$X*w_$X,w_$T=w_$n*w_$s,w_$b=w_$X*w_$Z,w_$Q=w_$X*w_$n,w_$i=w_$s*w_$Z,w_$$=w_$s*w_$X,w_$V=w_$n*w_$Z;w_$A[3]=w_$A[7]=w_$A[11]=w_$A[12]=w_$A[13]=w_$A[14]=0,w_$A[15]=1,w_$A[0]=1-2*(w_$P+w_$G),w_$A[1]=2*(w_$T+w_$b),w_$A[2]=2*(w_$Q-w_$i),w_$A[4]=2*(w_$T-w_$b),w_$A[5]=1-2*(w_$G+w_$t),w_$A[6]=2*(w_$$+w_$V),w_$A[8]=2*(w_$Q+w_$i),w_$A[9]=2*(w_$$-w_$V),w_$A[10]=1-2*(w_$P+w_$t)},w_$x.createTranslate=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;w_$A[4]=w_$A[8]=w_$A[1]=w_$A[9]=w_$A[2]=w_$A[6]=w_$A[3]=w_$A[7]=w_$A[11]=0,w_$A[0]=w_$A[5]=w_$A[10]=w_$A[15]=1,w_$A[12]=w_$l[0],w_$A[13]=w_$l[1],w_$A[14]=w_$l[2]},w_$x.createScaling=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;w_$A[0]=w_$l[0],w_$A[5]=w_$l[1],w_$A[10]=w_$l[2],w_$A[1]=w_$A[4]=w_$A[8]=w_$A[12]=w_$A[9]=w_$A[13]=w_$A[2]=w_$A[6]=w_$A[14]=w_$A[3]=w_$A[7]=w_$A[11]=0,w_$A[15]=1},w_$x.multiply=function(w_$B,w_$h,w_$l){var w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G;for(w_$n=w_$l.elements,w_$s=w_$B.elements,w_$n===(w_$X=w_$h.elements)&&(w_$X=w_$X.slice()),w_$A=0;w_$A<4;w_$A++)w_$Z=w_$s[w_$A],w_$t=w_$s[w_$A+4],w_$P=w_$s[w_$A+8],w_$G=w_$s[w_$A+12],w_$n[w_$A]=w_$Z*w_$X[0]+w_$t*w_$X[1]+w_$P*w_$X[2]+w_$G*w_$X[3],w_$n[w_$A+4]=w_$Z*w_$X[4]+w_$t*w_$X[5]+w_$P*w_$X[6]+w_$G*w_$X[7],w_$n[w_$A+8]=w_$Z*w_$X[8]+w_$t*w_$X[9]+w_$P*w_$X[10]+w_$G*w_$X[11],w_$n[w_$A+12]=w_$Z*w_$X[12]+w_$t*w_$X[13]+w_$P*w_$X[14]+w_$G*w_$X[15]},w_$x.createFromQuaternion=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=w_$B.elements,w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$A[3],w_$t=w_$n+w_$n,w_$P=w_$s+w_$s,w_$G=w_$X+w_$X,w_$T=w_$n*w_$t,w_$b=w_$s*w_$t,w_$Q=w_$s*w_$P,w_$i=w_$X*w_$t,w_$$=w_$X*w_$P,w_$V=w_$X*w_$G,w_$J=w_$Z*w_$t,w_$H=w_$Z*w_$P,w_$y=w_$Z*w_$G;w_$l[0]=1-w_$Q-w_$V,w_$l[1]=w_$b+w_$y,w_$l[2]=w_$i-w_$H,w_$l[3]=0,w_$l[4]=w_$b-w_$y,w_$l[5]=1-w_$T-w_$V,w_$l[6]=w_$$+w_$J,w_$l[7]=0,w_$l[8]=w_$i+w_$H,w_$l[9]=w_$$-w_$J,w_$l[10]=1-w_$T-w_$Q,w_$l[11]=0,w_$l[12]=0,w_$l[13]=0,w_$l[14]=0,w_$l[15]=1},w_$x.createAffineTransformation=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.elements,w_$s=w_$h.elements,w_$X=w_$l.elements,w_$Z=w_$A.elements,w_$t=w_$s[0],w_$P=w_$s[1],w_$G=w_$s[2],w_$T=w_$s[3],w_$b=w_$t+w_$t,w_$Q=w_$P+w_$P,w_$i=w_$G+w_$G,w_$$=w_$t*w_$b,w_$V=w_$t*w_$Q,w_$J=w_$t*w_$i,w_$H=w_$P*w_$Q,w_$y=w_$P*w_$i,w_$C=w_$G*w_$i,w_$o=w_$T*w_$b,w_$u=w_$T*w_$Q,w_$v=w_$T*w_$i,w_$U=w_$X[0],w_$x=w_$X[1],w_$w=w_$X[2];w_$Z[0]=(1-(w_$H+w_$C))*w_$U,w_$Z[1]=(w_$V+w_$v)*w_$U,w_$Z[2]=(w_$J-w_$u)*w_$U,w_$Z[3]=0,w_$Z[4]=(w_$V-w_$v)*w_$x,w_$Z[5]=(1-(w_$$+w_$C))*w_$x,w_$Z[6]=(w_$y+w_$o)*w_$x,w_$Z[7]=0,w_$Z[8]=(w_$J+w_$u)*w_$w,w_$Z[9]=(w_$y-w_$o)*w_$w,w_$Z[10]=(1-(w_$$+w_$H))*w_$w,w_$Z[11]=0,w_$Z[12]=w_$n[0],w_$Z[13]=w_$n[1],w_$Z[14]=w_$n[2],w_$Z[15]=1},w_$x.createLookAt=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$A.elements,w_$s=w_$x._tempVector0,w_$X=w_$x._tempVector1,w_$Z=w_$x._tempVector2;w_$Xh.subtract(w_$B,w_$h,w_$Z),w_$Xh.normalize(w_$Z,w_$Z),w_$Xh.cross(w_$l,w_$Z,w_$s),w_$Xh.normalize(w_$s,w_$s),w_$Xh.cross(w_$Z,w_$s,w_$X),w_$A.identity(),w_$n[0]=w_$s.x,w_$n[4]=w_$s.y,w_$n[8]=w_$s.z,w_$n[1]=w_$X.x,w_$n[5]=w_$X.y,w_$n[9]=w_$X.z,w_$n[2]=w_$Z.x,w_$n[6]=w_$Z.y,w_$n[10]=w_$Z.z,w_$n[12]=-w_$Xh.dot(w_$s,w_$B),w_$n[13]=-w_$Xh.dot(w_$X,w_$B),w_$n[14]=-w_$Xh.dot(w_$Z,w_$B)},w_$x.createPerspective=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$n.elements,w_$X=1/Math.tan(w_$B/2),w_$Z=1/(w_$l-w_$A);w_$s[0]=w_$X/w_$h,w_$s[5]=w_$X,w_$s[10]=(w_$A+w_$l)*w_$Z,w_$s[11]=-1,w_$s[14]=2*w_$A*w_$l*w_$Z,w_$s[1]=w_$s[2]=w_$s[3]=w_$s[4]=w_$s[6]=w_$s[7]=w_$s[8]=w_$s[9]=w_$s[12]=w_$s[13]=w_$s[15]=0},w_$x.createOrthoOffCenterRH=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){var w_$Z=w_$X.elements,w_$t=1/(w_$B-w_$h),w_$P=1/(w_$l-w_$A),w_$G=1/(w_$n-w_$s);w_$Z[1]=w_$Z[2]=w_$Z[3]=w_$Z[4]=w_$Z[6]=w_$Z[7]=w_$Z[8]=w_$Z[9]=w_$Z[11]=0,w_$Z[15]=1,w_$Z[0]=-2*w_$t,w_$Z[5]=-2*w_$P,w_$Z[10]=2*w_$G,w_$Z[12]=(w_$B+w_$h)*w_$t,w_$Z[13]=(w_$A+w_$l)*w_$P,w_$Z[14]=(w_$s+w_$n)*w_$G},w_$x.translation=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;w_$A[0]=w_$A[5]=w_$A[10]=w_$A[15]=1,w_$A[12]=w_$l[0],w_$A[13]=w_$l[1],w_$A[14]=w_$l[2]},w_$T(w_$x,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new w_$x},"_tempVector0",function(){return this._tempVector0=new w_$Xh},"_tempVector1",function(){return this._tempVector1=new w_$Xh},"_tempVector2",function(){return this._tempVector2=new w_$Xh},"_tempQuaternion",function(){return this._tempQuaternion=new w_$lh},"DEFAULT",function(){return this.DEFAULT=new w_$x},"ZERO",function(){return this.ZERO=new w_$x(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),w_$x}(),w_$hh=(function(){function w_$y(w_$B,w_$h){this.extents=null,this.transformation=null,this.extents=w_$B,this.transformation=w_$h}w_$Q(w_$y,"laya.d3.math.OrientedBoundBox");var w_$B=w_$y.prototype;w_$B.getCorners=function(w_$B){var w_$h=w_$y._tempV30.elements,w_$l=w_$y._tempV31.elements,w_$A=w_$y._tempV32.elements,w_$n=this.extents.elements;w_$h[0]=w_$n[0],w_$h[1]=w_$h[2]=0,w_$l[1]=w_$n[1],w_$l[0]=w_$l[2]=0,w_$A[2]=w_$n[2],w_$A[0]=w_$A[1]=0,w_$Xh.TransformNormal(w_$y._tempV30,this.transformation,w_$y._tempV30),w_$Xh.TransformNormal(w_$y._tempV31,this.transformation,w_$y._tempV31),w_$Xh.TransformNormal(w_$y._tempV32,this.transformation,w_$y._tempV32);var w_$s=w_$y._tempV33;this.transformation.getTranslationVector(w_$s),w_$B.length=8,w_$Xh.add(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV32,w_$B[0]),w_$Xh.add(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV32,w_$B[1]),w_$Xh.subtract(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV32,w_$B[2]),w_$Xh.subtract(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV32,w_$B[3]),w_$Xh.add(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV32,w_$B[4]),w_$Xh.add(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV32,w_$B[5]),w_$Xh.subtract(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV32,w_$B[6]),w_$Xh.subtract(w_$s,w_$y._tempV30,w_$y._tempV34),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV31,w_$y._tempV34),w_$Xh.add(w_$y._tempV34,w_$y._tempV32,w_$B[7])},w_$B.transform=function(w_$B){w_$Bh.multiply(this.transformation,w_$B,this.transformation)},w_$B.scale=function(w_$B){w_$Xh.multiply(this.extents,w_$B,this.extents)},w_$B.translate=function(w_$B){this.transformation.getTranslationVector(w_$y._tempV30),w_$Xh.add(w_$y._tempV30,w_$B,w_$y._tempV31),this.transformation.setTranslationVector(w_$y._tempV31)},w_$B.Size=function(w_$B){w_$Xh.scale(this.extents,2,w_$B)},w_$B.getSize=function(w_$B){var w_$h=this.extents.elements;w_$y._tempV30.x=w_$h[0],w_$y._tempV31.y=w_$h[1],w_$y._tempV32.z=w_$h[2],w_$Xh.TransformNormal(w_$y._tempV30,this.transformation,w_$y._tempV30),w_$Xh.TransformNormal(w_$y._tempV31,this.transformation,w_$y._tempV31),w_$Xh.TransformNormal(w_$y._tempV31,this.transformation,w_$y._tempV32);var w_$l=w_$B.elements;w_$l[0]=w_$Xh.scalarLength(w_$y._tempV30),w_$l[1]=w_$Xh.scalarLength(w_$y._tempV31),w_$l[2]=w_$Xh.scalarLength(w_$y._tempV32)},w_$B.getSizeSquared=function(w_$B){var w_$h=this.extents.elements;w_$y._tempV30.x=w_$h[0],w_$y._tempV31.y=w_$h[1],w_$y._tempV32.z=w_$h[2],w_$Xh.TransformNormal(w_$y._tempV30,this.transformation,w_$y._tempV30),w_$Xh.TransformNormal(w_$y._tempV31,this.transformation,w_$y._tempV31),w_$Xh.TransformNormal(w_$y._tempV31,this.transformation,w_$y._tempV32);var w_$l=w_$B.elements;w_$l[0]=w_$Xh.scalarLengthSquared(w_$y._tempV30),w_$l[1]=w_$Xh.scalarLengthSquared(w_$y._tempV31),w_$l[2]=w_$Xh.scalarLengthSquared(w_$y._tempV32)},w_$B.getCenter=function(w_$B){this.transformation.getTranslationVector(w_$B)},w_$B.containsPoint=function(w_$B){var w_$h=this.extents.elements,w_$l=w_$h[0],w_$A=w_$h[1],w_$n=w_$h[2];this.transformation.invert(w_$y._tempM0),w_$Xh.transformCoordinate(w_$B,w_$y._tempM0,w_$y._tempV30);var w_$s=w_$y._tempV30.elements,w_$X=Math.abs(w_$s[0]),w_$Z=Math.abs(w_$s[1]),w_$t=Math.abs(w_$s[2]);return w_$DB.nearEqual(w_$X,w_$l)&&w_$DB.nearEqual(w_$Z,w_$A)&&w_$DB.nearEqual(w_$t,w_$n)?2:w_$X<w_$l&&w_$Z<w_$A&&w_$t<w_$n?1:0},w_$B.containsPoints=function(w_$B){var w_$h=this.extents.elements,w_$l=w_$h[0],w_$A=w_$h[1],w_$n=w_$h[2];this.transformation.invert(w_$y._tempM0);for(var w_$s=!0,w_$X=!1,w_$Z=0;w_$Z<w_$B.length;w_$Z++){w_$Xh.transformCoordinate(w_$B[w_$Z],w_$y._tempM0,w_$y._tempV30);var w_$t=w_$y._tempV30.elements,w_$P=Math.abs(w_$t[0]),w_$G=Math.abs(w_$t[1]),w_$T=Math.abs(w_$t[2]);w_$DB.nearEqual(w_$P,w_$l)&&w_$DB.nearEqual(w_$G,w_$A)&&w_$DB.nearEqual(w_$T,w_$n)&&(w_$X=!0),w_$P<w_$l&&w_$G<w_$A&&w_$T<w_$n?w_$X=!0:w_$s=!1}return w_$s?1:w_$X?2:0},w_$B.containsSphere=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!1);var w_$l=this.extents.elements,w_$A=w_$l[0],w_$n=w_$l[1],w_$s=w_$l[2],w_$X=w_$B.radius;this.transformation.invert(w_$y._tempM0),w_$Xh.transformCoordinate(w_$B.center,w_$y._tempM0,w_$y._tempV30);var w_$Z=NaN;if(w_$Z=w_$h?w_$X:(w_$Xh.scale(w_$Xh.UnitX,w_$X,w_$y._tempV31),w_$Xh.TransformNormal(w_$y._tempV31,w_$y._tempM0,w_$y._tempV31),w_$Xh.scalarLength(w_$y._tempV31)),w_$Xh.scale(this.extents,-1,w_$y._tempV32),w_$Xh.Clamp(w_$y._tempV30,w_$y._tempV32,this.extents,w_$y._tempV33),w_$Z*w_$Z<w_$Xh.distanceSquared(w_$y._tempV30,w_$y._tempV33))return 0;var w_$t=w_$y._tempV30.elements,w_$P=w_$t[0],w_$G=w_$t[1],w_$T=w_$t[2],w_$b=w_$y._tempV32.elements,w_$Q=w_$b[0],w_$i=w_$b[1],w_$$=w_$b[2];return w_$Q+w_$Z<=w_$P&&w_$P<=w_$A-w_$Z&&w_$Z<w_$A-w_$Q&&w_$i+w_$Z<=w_$G&&w_$G<=w_$n-w_$Z&&w_$Z<w_$n-w_$i&&w_$$+w_$Z<=w_$T&&w_$T<=w_$s-w_$Z&&w_$Z<w_$s-w_$$?1:2},w_$B.containsOrientedBoundBox=function(w_$B){var w_$h=0,w_$l=0;w_$B.getCorners(w_$y._corners);var w_$A=this.containsPoints(w_$y._corners);if(0!=w_$A)return w_$A;var w_$n=this.extents.elements;w_$B.extents.cloneTo(w_$y._tempV35);var w_$s=w_$y._tempV35.elements;w_$y._getRows(this.transformation,w_$y._rows1),w_$y._getRows(w_$B.transformation,w_$y._rows2);var w_$X=NaN;for(w_$h=0;w_$h<4;w_$h++)for(w_$l=0;w_$l<4;w_$l++)3==w_$h||3==w_$l?(w_$y._tempM0.setElementByRowColumn(w_$h,w_$l,0),w_$y._tempM1.setElementByRowColumn(w_$h,w_$l,0)):(w_$X=w_$Xh.dot(w_$y._rows1[w_$h],w_$y._rows2[w_$l]),w_$y._tempM0.setElementByRowColumn(w_$h,w_$l,w_$X),w_$y._tempM1.setElementByRowColumn(w_$h,w_$l,Math.abs(w_$X)));w_$B.getCenter(w_$y._tempV34),this.getCenter(w_$y._tempV36),w_$Xh.subtract(w_$y._tempV34,w_$y._tempV36,w_$y._tempV30);var w_$Z=w_$y._tempV31.elements;w_$Z[0]=w_$Xh.dot(w_$y._tempV30,w_$y._rows1[0]),w_$Z[1]=w_$Xh.dot(w_$y._tempV30,w_$y._rows1[1]),w_$Z[2]=w_$Xh.dot(w_$y._tempV30,w_$y._rows1[2]);var w_$t=w_$y._tempV32.elements,w_$P=w_$y._tempV33.elements;for(w_$h=0;w_$h<3;w_$h++)if(w_$t[0]=w_$y._tempM1.getElementByRowColumn(w_$h,0),w_$t[1]=w_$y._tempM1.getElementByRowColumn(w_$h,1),w_$t[2]=w_$y._tempM1.getElementByRowColumn(w_$h,2),w_$n[w_$h]+w_$Xh.dot(w_$y._tempV35,w_$y._tempV32)<Math.abs(w_$Z[w_$h]))return 0;for(w_$l=0;w_$l<3;w_$l++)if(w_$t[0]=w_$y._tempM1.getElementByRowColumn(0,w_$l),w_$t[1]=w_$y._tempM1.getElementByRowColumn(1,w_$l),w_$t[2]=w_$y._tempM1.getElementByRowColumn(2,w_$l),w_$P[0]=w_$y._tempM0.getElementByRowColumn(0,w_$l),w_$P[1]=w_$y._tempM0.getElementByRowColumn(1,w_$l),w_$P[2]=w_$y._tempM0.getElementByRowColumn(2,w_$l),w_$Xh.dot(this.extents,w_$y._tempV32)+w_$s[w_$l]<Math.abs(w_$Xh.dot(w_$y._tempV31,w_$y._tempV33)))return 0;for(w_$h=0;w_$h<3;w_$h++)for(w_$l=0;w_$l<3;w_$l++){var w_$G=(w_$h+1)%3,w_$T=(w_$h+2)%3,w_$b=(w_$l+1)%3,w_$Q=(w_$l+2)%3;if(w_$n[w_$G]*w_$y._tempM1.getElementByRowColumn(w_$T,w_$l)+w_$n[w_$T]*w_$y._tempM1.getElementByRowColumn(w_$G,w_$l)+(w_$s[w_$b]*w_$y._tempM1.getElementByRowColumn(w_$h,w_$Q)+w_$s[w_$Q]*w_$y._tempM1.getElementByRowColumn(w_$h,w_$b))<Math.abs(w_$Z[w_$T]*w_$y._tempM0.getElementByRowColumn(w_$G,w_$l)-w_$Z[w_$G]*w_$y._tempM0.getElementByRowColumn(w_$T,w_$l)))return 0}return 2},w_$B.containsLine=function(w_$B,w_$h){w_$y._corners[0]=w_$B,w_$y._corners[1]=w_$h;var w_$l=this.containsPoints(w_$y._corners);if(0!=w_$l)return w_$l;var w_$A=this.extents.elements,w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2];this.transformation.invert(w_$y._tempM0),w_$Xh.transformCoordinate(w_$B,w_$y._tempM0,w_$y._tempV30),w_$Xh.transformCoordinate(w_$h,w_$y._tempM0,w_$y._tempV31),w_$Xh.add(w_$y._tempV30,w_$y._tempV31,w_$y._tempV32),w_$Xh.scale(w_$y._tempV32,.5,w_$y._tempV32),w_$Xh.subtract(w_$y._tempV30,w_$y._tempV32,w_$y._tempV33);var w_$Z=w_$y._tempV33.elements,w_$t=w_$Z[0],w_$P=w_$Z[1],w_$G=w_$Z[2],w_$T=w_$y._tempV34.elements,w_$b=w_$T[0]=Math.abs(w_$Z[0]),w_$Q=w_$T[1]=Math.abs(w_$Z[1]),w_$i=w_$T[2]=Math.abs(w_$Z[2]),w_$$=w_$y._tempV32.elements,w_$V=w_$$[0],w_$J=w_$$[1],w_$H=w_$$[2];return Math.abs(w_$V)>w_$n+w_$b?0:Math.abs(w_$J)>w_$s+w_$Q?0:Math.abs(w_$H)>w_$X+w_$i?0:Math.abs(w_$J*w_$G-w_$H*w_$P)>w_$s*w_$i+w_$X*w_$Q?0:Math.abs(w_$V*w_$G-w_$H*w_$t)>w_$n*w_$i+w_$X*w_$b?0:Math.abs(w_$V*w_$P-w_$J*w_$t)>w_$n*w_$Q+w_$s*w_$b?0:2},w_$B.containsBoundBox=function(w_$B){var w_$h=0,w_$l=0,w_$A=w_$B.min,w_$n=w_$B.max;w_$B.getCorners(w_$y._corners);var w_$s=this.containsPoints(w_$y._corners);if(0!=w_$s)return w_$s;w_$Xh.subtract(w_$n,w_$A,w_$y._tempV30),w_$Xh.scale(w_$y._tempV30,.5,w_$y._tempV30),w_$Xh.add(w_$A,w_$y._tempV30,w_$y._tempV30),w_$Xh.subtract(w_$n,w_$y._tempV30,w_$y._tempV31);var w_$X=this.extents.elements,w_$Z=w_$y._tempV31.elements;w_$y._getRows(this.transformation,w_$y._rows1),this.transformation.invert(w_$y._tempM0);for(w_$h=0;w_$h<3;w_$h++)for(w_$l=0;w_$l<3;w_$l++)w_$y._tempM1.setElementByRowColumn(w_$h,w_$l,Math.abs(w_$y._tempM0.getElementByRowColumn(w_$h,w_$l)));this.getCenter(w_$y._tempV35),w_$Xh.subtract(w_$y._tempV30,w_$y._tempV35,w_$y._tempV32);var w_$t=w_$y._tempV31.elements;w_$t[0]=w_$Xh.dot(w_$y._tempV32,w_$y._rows1[0]),w_$t[1]=w_$Xh.dot(w_$y._tempV32,w_$y._rows1[1]),w_$t[2]=w_$Xh.dot(w_$y._tempV32,w_$y._rows1[2]);var w_$P=w_$y._tempV33.elements,w_$G=w_$y._tempV34.elements;for(w_$h=0;w_$h<3;w_$h++)if(w_$P[0]=w_$y._tempM1.getElementByRowColumn(w_$h,0),w_$P[1]=w_$y._tempM1.getElementByRowColumn(w_$h,1),w_$P[2]=w_$y._tempM1.getElementByRowColumn(w_$h,2),w_$X[w_$h]+w_$Xh.dot(w_$y._tempV31,w_$y._tempV33)<Math.abs(w_$t[w_$h]))return 0;for(w_$l=0;w_$l<3;w_$l++)if(w_$P[0]=w_$y._tempM1.getElementByRowColumn(0,w_$l),w_$P[1]=w_$y._tempM1.getElementByRowColumn(1,w_$l),w_$P[2]=w_$y._tempM1.getElementByRowColumn(2,w_$l),w_$G[0]=w_$y._tempM0.getElementByRowColumn(0,w_$l),w_$G[1]=w_$y._tempM0.getElementByRowColumn(1,w_$l),w_$G[2]=w_$y._tempM0.getElementByRowColumn(2,w_$l),w_$Xh.dot(this.extents,w_$y._tempV33)+w_$Z[w_$l]<Math.abs(w_$Xh.dot(w_$y._tempV31,w_$y._tempV34)))return 0;for(w_$h=0;w_$h<3;w_$h++)for(w_$l=0;w_$l<3;w_$l++){var w_$T=(w_$h+1)%3,w_$b=(w_$h+2)%3,w_$Q=(w_$l+1)%3,w_$i=(w_$l+2)%3;if(w_$X[w_$T]*w_$y._tempM1.getElementByRowColumn(w_$b,w_$l)+w_$X[w_$b]*w_$y._tempM1.getElementByRowColumn(w_$T,w_$l)+(w_$Z[w_$Q]*w_$y._tempM1.getElementByRowColumn(w_$h,w_$i)+w_$Z[w_$i]*w_$y._tempM1.getElementByRowColumn(w_$h,w_$Q))<Math.abs(w_$t[w_$b]*w_$y._tempM0.getElementByRowColumn(w_$T,w_$l)-w_$t[w_$T]*w_$y._tempM0.getElementByRowColumn(w_$b,w_$l)))return 0}return 2},w_$B.intersectsRay=function(w_$B,w_$h){w_$Xh.scale(this.extents,-1,w_$y._tempV30),this.transformation.invert(w_$y._tempM0),w_$Xh.TransformNormal(w_$B.direction,w_$y._tempM0,w_$y._ray.direction),w_$Xh.transformCoordinate(w_$B.origin,w_$y._tempM0,w_$y._ray.origin),w_$y._boxBound1.min=w_$y._tempV30,w_$y._boxBound1.max=this.extents;var w_$l=Collision.intersectsRayAndBoxRP(w_$y._ray,w_$y._boxBound1,w_$h);return-1!==w_$l&&w_$Xh.transformCoordinate(w_$h,this.transformation,w_$h),w_$l},w_$B._getLocalCorners=function(w_$B){w_$B.length=8;var w_$h=this.extents.elements;w_$y._tempV30.x=w_$h[0],w_$y._tempV31.y=w_$h[1],w_$y._tempV32.z=w_$h[2],w_$Xh.add(w_$y._tempV30,w_$y._tempV31,w_$y._tempV33),w_$Xh.add(w_$y._tempV33,w_$y._tempV32,w_$B[0]),w_$Xh.add(w_$y._tempV30,w_$y._tempV31,w_$y._tempV33),w_$Xh.subtract(w_$y._tempV33,w_$y._tempV32,w_$B[1]),w_$Xh.subtract(w_$y._tempV31,w_$y._tempV30,w_$y._tempV33),w_$Xh.subtract(w_$y._tempV33,w_$y._tempV30,w_$B[2]),w_$Xh.subtract(w_$y._tempV31,w_$y._tempV30,w_$y._tempV33),w_$Xh.add(w_$y._tempV33,w_$y._tempV32,w_$B[3]),w_$Xh.subtract(w_$y._tempV30,w_$y._tempV31,w_$y._tempV33),w_$Xh.add(w_$y._tempV33,w_$y._tempV32,w_$B[4]),w_$Xh.subtract(w_$y._tempV30,w_$y._tempV31,w_$y._tempV33),w_$Xh.subtract(w_$y._tempV33,w_$y._tempV32,w_$B[5]),w_$Xh.scale(w_$B[0],-1,w_$B[6]),w_$Xh.subtract(w_$y._tempV32,w_$y._tempV30,w_$y._tempV33),w_$Xh.subtract(w_$y._tempV33,w_$y._tempV31,w_$B[7])},w_$B.equals=function(w_$B){return this.extents==w_$B.extents&&this.transformation==w_$B.transformation},w_$B.cloneTo=function(w_$B){var w_$h=w_$B;this.extents.cloneTo(w_$h.extents),this.transformation.cloneTo(w_$h.transformation)},w_$y.createByBoundBox=function(w_$B,w_$h){var w_$l=w_$B.min,w_$A=w_$B.max;w_$Xh.subtract(w_$A,w_$l,w_$y._tempV30),w_$Xh.scale(w_$y._tempV30,.5,w_$y._tempV30),w_$Xh.add(w_$l,w_$y._tempV30,w_$y._tempV31),w_$Xh.subtract(w_$A,w_$y._tempV31,w_$y._tempV32),w_$Bh.translation(w_$y._tempV31,w_$y._tempM0);var w_$n=w_$y._tempV32.clone(),w_$s=w_$y._tempM0.clone();w_$h.extents=w_$n,w_$h.transformation=w_$s},w_$y.createByMinAndMaxVertex=function(w_$B,w_$h){return w_$Xh.subtract(w_$h,w_$B,w_$y._tempV30),w_$Xh.scale(w_$y._tempV30,.5,w_$y._tempV30),w_$Xh.add(w_$B,w_$y._tempV30,w_$y._tempV31),w_$Xh.subtract(w_$h,w_$y._tempV31,w_$y._tempV32),w_$Bh.translation(w_$y._tempV31,w_$y._tempM0),new w_$y(w_$y._tempV32,w_$y._tempM0)},w_$y._getRows=function(w_$B,w_$h){w_$h.length=3;var w_$l=w_$B.elements,w_$A=w_$h[0].elements;w_$A[0]=w_$l[0],w_$A[1]=w_$l[1],w_$A[2]=w_$l[2];var w_$n=w_$h[1].elements;w_$n[0]=w_$l[4],w_$n[1]=w_$l[5],w_$n[2]=w_$l[6];var w_$s=w_$h[2].elements;w_$s[0]=w_$l[8],w_$s[1]=w_$l[9],w_$s[2]=w_$l[10]},w_$y.getObbtoObbMatrix4x4=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.transformation,w_$s=w_$h.transformation;if(w_$l){w_$y._getRows(w_$n,w_$y._rows1),w_$y._getRows(w_$s,w_$y._rows2);for(var w_$X=0;w_$X<3;w_$X++)for(var w_$Z=0;w_$Z<3;w_$Z++)w_$A.setElementByRowColumn(w_$X,w_$Z,w_$Xh.dot(w_$y._rows2[w_$X],w_$y._rows1[w_$Z]));w_$h.getCenter(w_$y._tempV30),w_$B.getCenter(w_$y._tempV31),w_$Xh.subtract(w_$y._tempV30,w_$y._tempV31,w_$y._tempV32);var w_$t=w_$A.elements;w_$t[12]=w_$Xh.dot(w_$y._tempV32,w_$y._rows1[0]),w_$t[13]=w_$Xh.dot(w_$y._tempV32,w_$y._rows1[1]),w_$t[14]=w_$Xh.dot(w_$y._tempV32,w_$y._rows1[2]),w_$t[15]=1}else w_$n.invert(w_$y._tempM0),w_$Bh.multiply(w_$s,w_$y._tempM0,w_$A)},w_$y.merge=function(w_$B,w_$h,w_$l){var w_$A=w_$B.extents,w_$n=w_$B.transformation;w_$y.getObbtoObbMatrix4x4(w_$B,w_$h,w_$l,w_$y._tempM0),w_$h._getLocalCorners(w_$y._corners),w_$Xh.transformCoordinate(w_$y._corners[0],w_$y._tempM0,w_$y._corners[0]),w_$Xh.transformCoordinate(w_$y._corners[1],w_$y._tempM0,w_$y._corners[1]),w_$Xh.transformCoordinate(w_$y._corners[2],w_$y._tempM0,w_$y._corners[2]),w_$Xh.transformCoordinate(w_$y._corners[3],w_$y._tempM0,w_$y._corners[3]),w_$Xh.transformCoordinate(w_$y._corners[4],w_$y._tempM0,w_$y._corners[4]),w_$Xh.transformCoordinate(w_$y._corners[5],w_$y._tempM0,w_$y._corners[5]),w_$Xh.transformCoordinate(w_$y._corners[6],w_$y._tempM0,w_$y._corners[6]),w_$Xh.transformCoordinate(w_$y._corners[7],w_$y._tempM0,w_$y._corners[7]),w_$Xh.scale(w_$A,-1,w_$y._boxBound1.min),w_$A.cloneTo(w_$y._boxBound1.max),w_$LB.createfromPoints(w_$y._corners,w_$y._boxBound2),w_$LB.merge(w_$y._boxBound2,w_$y._boxBound1,w_$y._boxBound3);var w_$s=w_$y._boxBound3.min,w_$X=w_$y._boxBound3.max;w_$Xh.subtract(w_$X,w_$s,w_$y._tempV30),w_$Xh.scale(w_$y._tempV30,.5,w_$y._tempV30),w_$Xh.add(w_$s,w_$y._tempV30,w_$y._tempV32),w_$Xh.subtract(w_$X,w_$y._tempV32,w_$A),w_$Xh.transformCoordinate(w_$y._tempV32,w_$n,w_$y._tempV33)},w_$T(w_$y,["_tempV30",function(){return this._tempV30=new w_$Xh},"_tempV31",function(){return this._tempV31=new w_$Xh},"_tempV32",function(){return this._tempV32=new w_$Xh},"_tempV33",function(){return this._tempV33=new w_$Xh},"_tempV34",function(){return this._tempV34=new w_$Xh},"_tempV35",function(){return this._tempV35=new w_$Xh},"_tempV36",function(){return this._tempV36=new w_$Xh},"_tempM0",function(){return this._tempM0=new w_$Bh},"_tempM1",function(){return this._tempM1=new w_$Bh},"_corners",function(){return this._corners=[new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh]},"_rows1",function(){return this._rows1=[new w_$Xh,new w_$Xh,new w_$Xh]},"_rows2",function(){return this._rows2=[new w_$Xh,new w_$Xh,new w_$Xh]},"_ray",function(){return this._ray=new w_$nh(new w_$Xh,new w_$Xh)},"_boxBound1",function(){return this._boxBound1=new w_$LB(new w_$Xh,new w_$Xh)},"_boxBound2",function(){return this._boxBound2=new w_$LB(new w_$Xh,new w_$Xh)},"_boxBound3",function(){return this._boxBound3=new w_$LB(new w_$Xh,new w_$Xh)}])}(),function(){function w_$o(w_$B,w_$h){this.normal=null,this.distance=NaN,void 0===w_$h&&(w_$h=0),this.normal=w_$B,this.distance=w_$h}return w_$Q(w_$o,"laya.d3.math.Plane"),w_$o.prototype.normalize=function(){var w_$B=this.normal.elements,w_$h=w_$B[0],w_$l=w_$B[1],w_$A=w_$B[2],w_$n=1/Math.sqrt(w_$h*w_$h+w_$l*w_$l+w_$A*w_$A);w_$B[0]=w_$h*w_$n,w_$B[1]=w_$l*w_$n,w_$B[2]=w_$A*w_$n,this.distance*=w_$n},w_$o.createPlaneBy3P=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$h.elements,w_$s=w_$l.elements,w_$X=w_$n[0]-w_$A[0],w_$Z=w_$n[1]-w_$A[1],w_$t=w_$n[2]-w_$A[2],w_$P=w_$s[0]-w_$A[0],w_$G=w_$s[1]-w_$A[1],w_$T=w_$s[2]-w_$A[2],w_$b=w_$Z*w_$T-w_$t*w_$G,w_$Q=w_$t*w_$P-w_$X*w_$T,w_$i=w_$X*w_$G-w_$Z*w_$P,w_$$=1/Math.sqrt(w_$b*w_$b+w_$Q*w_$Q+w_$i*w_$i),w_$V=w_$b*w_$$,w_$J=w_$Q*w_$$,w_$H=w_$i*w_$$,w_$y=w_$o._TEMPVec3.elements;w_$y[0]=w_$V,w_$y[1]=w_$J,w_$y[2]=w_$H;var w_$C=-(w_$V*w_$A[0]+w_$J*w_$A[1]+w_$H*w_$A[2]);return new w_$o(w_$o._TEMPVec3,w_$C)},w_$o.PlaneIntersectionType_Back=0,w_$o.PlaneIntersectionType_Front=1,w_$o.PlaneIntersectionType_Intersecting=2,w_$T(w_$o,["_TEMPVec3",function(){return this._TEMPVec3=new w_$Xh}]),w_$o}()),w_$lh=function(){function w_$n(w_$B,w_$h,w_$l,w_$A){this.elements=new Float32Array(4),void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=1),this.elements[0]=w_$B,this.elements[1]=w_$h,this.elements[2]=w_$l,this.elements[3]=w_$A}w_$Q(w_$n,"laya.d3.math.Quaternion");var w_$B=w_$n.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.scaling=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=this.elements;w_$l[0]=w_$A[0]*w_$B,w_$l[1]=w_$A[1]*w_$B,w_$l[2]=w_$A[2]*w_$B,w_$l[3]=w_$A[3]*w_$B},w_$B.normalize=function(w_$B){var w_$h=w_$B.elements,w_$l=this.elements,w_$A=w_$l[0],w_$n=w_$l[1],w_$s=w_$l[2],w_$X=w_$l[3],w_$Z=w_$A*w_$A+w_$n*w_$n+w_$s*w_$s+w_$X*w_$X;0<w_$Z&&(w_$Z=1/Math.sqrt(w_$Z),w_$h[0]=w_$A*w_$Z,w_$h[1]=w_$n*w_$Z,w_$h[2]=w_$s*w_$Z,w_$h[3]=w_$X*w_$Z)},w_$B.length=function(){var w_$B=this.elements,w_$h=w_$B[0],w_$l=w_$B[1],w_$A=w_$B[2],w_$n=w_$B[3];return Math.sqrt(w_$h*w_$h+w_$l*w_$l+w_$A*w_$A+w_$n*w_$n)},w_$B.rotateX=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=this.elements;w_$B*=.5;var w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$A[3],w_$t=Math.sin(w_$B),w_$P=Math.cos(w_$B);w_$l[0]=w_$n*w_$P+w_$Z*w_$t,w_$l[1]=w_$s*w_$P+w_$X*w_$t,w_$l[2]=w_$X*w_$P-w_$s*w_$t,w_$l[3]=w_$Z*w_$P-w_$n*w_$t},w_$B.rotateY=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=this.elements;w_$B*=.5;var w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$A[3],w_$t=Math.sin(w_$B),w_$P=Math.cos(w_$B);w_$l[0]=w_$n*w_$P-w_$X*w_$t,w_$l[1]=w_$s*w_$P+w_$Z*w_$t,w_$l[2]=w_$X*w_$P+w_$n*w_$t,w_$l[3]=w_$Z*w_$P-w_$s*w_$t},w_$B.rotateZ=function(w_$B,w_$h){var w_$l=w_$h.elements,w_$A=this.elements;w_$B*=.5;var w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$A[3],w_$t=Math.sin(w_$B),w_$P=Math.cos(w_$B);w_$l[0]=w_$n*w_$P+w_$s*w_$t,w_$l[1]=w_$s*w_$P-w_$n*w_$t,w_$l[2]=w_$X*w_$P+w_$Z*w_$t,w_$l[3]=w_$Z*w_$P-w_$X*w_$t},w_$B.getYawPitchRoll=function(w_$B){w_$Xh.transformQuat(w_$Xh.ForwardRH,this,w_$n.TEMPVector31),w_$Xh.transformQuat(w_$Xh.Up,this,w_$n.TEMPVector32);var w_$h=w_$n.TEMPVector32.elements;w_$n.angleTo(w_$Xh.ZERO,w_$n.TEMPVector31,w_$n.TEMPVector33);var w_$l=w_$n.TEMPVector33.elements;w_$l[0]==Math.PI/2?(w_$l[1]=w_$n.arcTanAngle(w_$h[2],w_$h[0]),w_$l[2]=0):w_$l[0]==-Math.PI/2?(w_$l[1]=w_$n.arcTanAngle(-w_$h[2],-w_$h[0]),w_$l[2]=0):(w_$Bh.createRotationY(-w_$l[1],w_$n.TEMPMatrix0),w_$Bh.createRotationX(-w_$l[0],w_$n.TEMPMatrix1),w_$Xh.transformCoordinate(w_$n.TEMPVector32,w_$n.TEMPMatrix0,w_$n.TEMPVector32),w_$Xh.transformCoordinate(w_$n.TEMPVector32,w_$n.TEMPMatrix1,w_$n.TEMPVector32),w_$l[2]=w_$n.arcTanAngle(w_$h[1],-w_$h[0])),w_$l[1]<=-Math.PI&&(w_$l[1]=Math.PI),w_$l[2]<=-Math.PI&&(w_$l[2]=Math.PI),w_$l[1]>=Math.PI&&w_$l[2]>=Math.PI&&(w_$l[1]=0,w_$l[2]=0,w_$l[0]=Math.PI-w_$l[0]);var w_$A=w_$B.elements;w_$A[0]=w_$l[1],w_$A[1]=w_$l[0],w_$A[2]=w_$l[2]},w_$B.invert=function(w_$B){var w_$h=w_$B.elements,w_$l=this.elements,w_$A=w_$l[0],w_$n=w_$l[1],w_$s=w_$l[2],w_$X=w_$l[3],w_$Z=w_$A*w_$A+w_$n*w_$n+w_$s*w_$s+w_$X*w_$X,w_$t=w_$Z?1/w_$Z:0;w_$h[0]=-w_$A*w_$t,w_$h[1]=-w_$n*w_$t,w_$h[2]=-w_$s*w_$t,w_$h[3]=w_$X*w_$t},w_$B.identity=function(){var w_$B=this.elements;w_$B[0]=0,w_$B[1]=0,w_$B[2]=0,w_$B[3]=1},w_$B.fromArray=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0),this.elements[0]=w_$B[w_$h+0],this.elements[1]=w_$B[w_$h+1],this.elements[2]=w_$B[w_$h+2],this.elements[3]=w_$B[w_$h+3]},w_$B.cloneTo=function(w_$B){var w_$h,w_$l,w_$A;if((w_$l=this.elements)!==(w_$A=w_$B.elements))for(w_$h=0;w_$h<4;++w_$h)w_$A[w_$h]=w_$l[w_$h]},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$B.equals=function(w_$B){var w_$h=this.elements,w_$l=w_$B.elements;return w_$DB.nearEqual(w_$h[0],w_$l[0])&&w_$DB.nearEqual(w_$h[1],w_$l[1])&&w_$DB.nearEqual(w_$h[2],w_$l[2])&&w_$DB.nearEqual(w_$h[3],w_$l[3])},w_$B.lengthSquared=function(){var w_$B=this.elements[0],w_$h=this.elements[1],w_$l=this.elements[2],w_$A=this.elements[3];return w_$B*w_$B+w_$h*w_$h+w_$l*w_$l+w_$A*w_$A},w_$i(0,w_$B,"x",function(){return this.elements[0]}),w_$i(0,w_$B,"y",function(){return this.elements[1]}),w_$i(0,w_$B,"z",function(){return this.elements[2]}),w_$i(0,w_$B,"w",function(){return this.elements[3]}),w_$n.createFromYawPitchRoll=function(w_$B,w_$h,w_$l,w_$A){var w_$n=.5*w_$l,w_$s=.5*w_$h,w_$X=.5*w_$B,w_$Z=Math.sin(w_$n),w_$t=Math.cos(w_$n),w_$P=Math.sin(w_$s),w_$G=Math.cos(w_$s),w_$T=Math.sin(w_$X),w_$b=Math.cos(w_$X),w_$Q=w_$A.elements;w_$Q[0]=w_$b*w_$P*w_$t+w_$T*w_$G*w_$Z,w_$Q[1]=w_$T*w_$G*w_$t-w_$b*w_$P*w_$Z,w_$Q[2]=w_$b*w_$G*w_$Z-w_$T*w_$P*w_$t,w_$Q[3]=w_$b*w_$G*w_$t+w_$T*w_$P*w_$Z},w_$n.multiply=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$h.elements,w_$s=w_$l.elements,w_$X=w_$A[0],w_$Z=w_$A[1],w_$t=w_$A[2],w_$P=w_$A[3],w_$G=w_$n[0],w_$T=w_$n[1],w_$b=w_$n[2],w_$Q=w_$n[3],w_$i=w_$Z*w_$b-w_$t*w_$T,w_$$=w_$t*w_$G-w_$X*w_$b,w_$V=w_$X*w_$T-w_$Z*w_$G,w_$J=w_$X*w_$G+w_$Z*w_$T+w_$t*w_$b;w_$s[0]=w_$X*w_$Q+w_$G*w_$P+w_$i,w_$s[1]=w_$Z*w_$Q+w_$T*w_$P+w_$$,w_$s[2]=w_$t*w_$Q+w_$b*w_$P+w_$V,w_$s[3]=w_$P*w_$Q-w_$J},w_$n.arcTanAngle=function(w_$B,w_$h){return 0==w_$B?1==w_$h?Math.PI/2:-Math.PI/2:0<w_$B?Math.atan(w_$h/w_$B):w_$B<0?0<w_$h?Math.atan(w_$h/w_$B)+Math.PI:Math.atan(w_$h/w_$B)-Math.PI:0},w_$n.angleTo=function(w_$B,w_$h,w_$l){w_$Xh.subtract(w_$h,w_$B,w_$n.TEMPVector30),w_$Xh.normalize(w_$n.TEMPVector30,w_$n.TEMPVector30),w_$l.elements[0]=Math.asin(w_$n.TEMPVector30.y),w_$l.elements[1]=w_$n.arcTanAngle(-w_$n.TEMPVector30.z,-w_$n.TEMPVector30.x)},w_$n.createFromAxisAngle=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements;w_$h*=.5;var w_$s=Math.sin(w_$h);w_$A[0]=w_$s*w_$n[0],w_$A[1]=w_$s*w_$n[1],w_$A[2]=w_$s*w_$n[2],w_$A[3]=Math.cos(w_$h)},w_$n.createFromMatrix3x3=function(w_$B,w_$h){var w_$l,w_$A=w_$h.elements,w_$n=w_$B.elements,w_$s=w_$n[0]+w_$n[4]+w_$n[8];if(0<w_$s)w_$l=Math.sqrt(w_$s+1),w_$A[3]=.5*w_$l,w_$l=.5/w_$l,w_$A[0]=(w_$n[5]-w_$n[7])*w_$l,w_$A[1]=(w_$n[6]-w_$n[2])*w_$l,w_$A[2]=(w_$n[1]-w_$n[3])*w_$l;else{var w_$X=0;w_$n[4]>w_$n[0]&&(w_$X=1),w_$n[8]>w_$n[3*w_$X+w_$X]&&(w_$X=2);var w_$Z=(w_$X+1)%3,w_$t=(w_$X+2)%3;w_$l=Math.sqrt(w_$n[3*w_$X+w_$X]-w_$n[3*w_$Z+w_$Z]-w_$n[3*w_$t+w_$t]+1),w_$A[w_$X]=.5*w_$l,w_$l=.5/w_$l,w_$A[3]=(w_$n[3*w_$Z+w_$t]-w_$n[3*w_$t+w_$Z])*w_$l,w_$A[w_$Z]=(w_$n[3*w_$Z+w_$X]+w_$n[3*w_$X+w_$Z])*w_$l,w_$A[w_$t]=(w_$n[3*w_$t+w_$X]+w_$n[3*w_$X+w_$t])*w_$l}},w_$n.createFromMatrix4x4=function(w_$B,w_$h){var w_$l,w_$A,w_$n=w_$B.elements,w_$s=w_$h.elements,w_$X=w_$n[0]+w_$n[5]+w_$n[10];0<w_$X?(w_$l=Math.sqrt(w_$X+1),w_$s[3]=.5*w_$l,w_$l=.5/w_$l,w_$s[0]=(w_$n[6]-w_$n[9])*w_$l,w_$s[1]=(w_$n[8]-w_$n[2])*w_$l,w_$s[2]=(w_$n[1]-w_$n[4])*w_$l):w_$n[0]>=w_$n[5]&&w_$n[0]>=w_$n[10]?(w_$A=.5/(w_$l=Math.sqrt(1+w_$n[0]-w_$n[5]-w_$n[10])),w_$s[0]=.5*w_$l,w_$s[1]=(w_$n[1]+w_$n[4])*w_$A,w_$s[2]=(w_$n[2]+w_$n[8])*w_$A,w_$s[3]=(w_$n[6]-w_$n[9])*w_$A):w_$n[5]>w_$n[10]?(w_$A=.5/(w_$l=Math.sqrt(1+w_$n[5]-w_$n[0]-w_$n[10])),w_$s[0]=(w_$n[4]+w_$n[1])*w_$A,w_$s[1]=.5*w_$l,w_$s[2]=(w_$n[9]+w_$n[6])*w_$A,w_$s[3]=(w_$n[8]-w_$n[2])*w_$A):(w_$A=.5/(w_$l=Math.sqrt(1+w_$n[10]-w_$n[0]-w_$n[5])),w_$s[0]=(w_$n[8]+w_$n[2])*w_$A,w_$s[1]=(w_$n[9]+w_$n[6])*w_$A,w_$s[2]=.5*w_$l,w_$s[3]=(w_$n[1]-w_$n[4])*w_$A)},w_$n.slerp=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P=w_$B.elements,w_$G=w_$h.elements,w_$T=w_$A.elements,w_$b=w_$P[0],w_$Q=w_$P[1],w_$i=w_$P[2],w_$$=w_$P[3],w_$V=w_$G[0],w_$J=w_$G[1],w_$H=w_$G[2],w_$y=w_$G[3];return(w_$s=w_$b*w_$V+w_$Q*w_$J+w_$i*w_$H+w_$$*w_$y)<0&&(w_$s=-w_$s,w_$V=-w_$V,w_$J=-w_$J,w_$H=-w_$H,w_$y=-w_$y),w_$t=1e-6<1-w_$s?(w_$n=Math.acos(w_$s),w_$X=Math.sin(w_$n),w_$Z=Math.sin((1-w_$l)*w_$n)/w_$X,Math.sin(w_$l*w_$n)/w_$X):(w_$Z=1-w_$l,w_$l),w_$T[0]=w_$Z*w_$b+w_$t*w_$V,w_$T[1]=w_$Z*w_$Q+w_$t*w_$J,w_$T[2]=w_$Z*w_$i+w_$t*w_$H,w_$T[3]=w_$Z*w_$$+w_$t*w_$y,w_$T},w_$n.lerp=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$A.elements,w_$s=w_$B.elements,w_$X=w_$h.elements,w_$Z=w_$s[0],w_$t=w_$s[1],w_$P=w_$s[2],w_$G=w_$s[3];w_$n[0]=w_$Z+w_$l*(w_$X[0]-w_$Z),w_$n[1]=w_$t+w_$l*(w_$X[1]-w_$t),w_$n[2]=w_$P+w_$l*(w_$X[2]-w_$P),w_$n[3]=w_$G+w_$l*(w_$X[3]-w_$G)},w_$n.add=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=w_$n[0]+w_$s[0],w_$A[1]=w_$n[1]+w_$s[1],w_$A[2]=w_$n[2]+w_$s[2],w_$A[3]=w_$n[3]+w_$s[3]},w_$n.dot=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;return w_$l[0]*w_$A[0]+w_$l[1]*w_$A[1]+w_$l[2]*w_$A[2]+w_$l[3]*w_$A[3]},w_$n.rotationLookAt=function(w_$B,w_$h,w_$l){w_$n.lookAt(w_$Xh.ZERO,w_$B,w_$h,w_$l)},w_$n.lookAt=function(w_$B,w_$h,w_$l,w_$A){w_$rB.lookAt(w_$B,w_$h,w_$l,w_$n._tempMatrix3x3),w_$n.rotationMatrix(w_$n._tempMatrix3x3,w_$A)},w_$n.invert=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$B.lengthSquared();w_$DB.isZero(w_$n)||(w_$n=1/w_$n,w_$A[0]=-w_$l[0]*w_$n,w_$A[1]=-w_$l[1]*w_$n,w_$A[2]=-w_$l[2]*w_$n,w_$A[3]=w_$l[3]*w_$n)},w_$n.rotationMatrix=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$l[0],w_$n=w_$l[1],w_$s=w_$l[2],w_$X=w_$l[3],w_$Z=w_$l[4],w_$t=w_$l[5],w_$P=w_$l[6],w_$G=w_$l[7],w_$T=w_$l[8],w_$b=w_$h.elements,w_$Q=NaN,w_$i=NaN,w_$$=w_$A+w_$Z+w_$T;0<w_$$?(w_$Q=Math.sqrt(w_$$+1),w_$b[3]=.5*w_$Q,w_$Q=.5/w_$Q,w_$b[0]=(w_$t-w_$G)*w_$Q,w_$b[1]=(w_$P-w_$s)*w_$Q,w_$b[2]=(w_$n-w_$X)*w_$Q):w_$Z<=w_$A&&w_$T<=w_$A?(w_$i=.5/(w_$Q=Math.sqrt(1+w_$A-w_$Z-w_$T)),w_$b[0]=.5*w_$Q,w_$b[1]=(w_$n+w_$X)*w_$i,w_$b[2]=(w_$s+w_$P)*w_$i,w_$b[3]=(w_$t-w_$G)*w_$i):w_$T<w_$Z?(w_$i=.5/(w_$Q=Math.sqrt(1+w_$Z-w_$A-w_$T)),w_$b[0]=(w_$X+w_$n)*w_$i,w_$b[1]=.5*w_$Q,w_$b[2]=(w_$G+w_$t)*w_$i,w_$b[3]=(w_$P-w_$s)*w_$i):(w_$i=.5/(w_$Q=Math.sqrt(1+w_$T-w_$A-w_$Z)),w_$b[0]=(w_$P+w_$s)*w_$i,w_$b[1]=(w_$G+w_$t)*w_$i,w_$b[2]=.5*w_$Q,w_$b[3]=(w_$n-w_$X)*w_$i)},w_$n.DEFAULT=new w_$n,w_$T(w_$n,["TEMPVector30",function(){return this.TEMPVector30=new w_$Xh},"TEMPVector31",function(){return this.TEMPVector31=new w_$Xh},"TEMPVector32",function(){return this.TEMPVector32=new w_$Xh},"TEMPVector33",function(){return this.TEMPVector33=new w_$Xh},"TEMPMatrix0",function(){return this.TEMPMatrix0=new w_$Bh},"TEMPMatrix1",function(){return this.TEMPMatrix1=new w_$Bh},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new w_$rB},"NAN",function(){return this.NAN=new w_$n(NaN,NaN,NaN,NaN)}]),w_$n}(),w_$Ah=function(){function w_$B(w_$B){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=w_$B,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}w_$Q(w_$B,"laya.d3.math.Rand");var w_$h=w_$B.prototype;return w_$h.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},w_$h.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},w_$h.getSignedFloat=function(){return 2*this.getFloat()-1},w_$i(0,w_$h,"seed",function(){return this.seeds[0]},function(w_$B){this.seeds[0]=w_$B,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),w_$B.getFloatFromInt=function(w_$B){return 1/8388607*(8388607&w_$B)},w_$B.getByteFromInt=function(w_$B){return(8388607&w_$B)>>>15},w_$B}(),w_$nh=(function(){function w_$n(w_$B){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(w_$B instanceof Array)||4!==w_$B.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|w_$B[0],this._state0L=0|w_$B[1],this._state1U=0|w_$B[2],this._state1L=0|w_$B[3]}w_$Q(w_$n,"laya.d3.math.RandX");var w_$B=w_$n.prototype;w_$B.randomint=function(){var w_$B=this._state0U,w_$h=this._state0L,w_$l=this._state1U,w_$A=this._state1L,w_$n=(w_$A>>>0)+(w_$h>>>0),w_$s=w_$l+w_$B+(w_$n/2>>>31)>>>0,w_$X=w_$n>>>0,w_$Z=0,w_$t=0;w_$Z=(w_$B^=w_$Z=w_$B<<23|(-512&w_$h)>>>9)^(this._state0U=w_$l),w_$t=(w_$h^=w_$t=w_$h<<23)^(this._state0L=w_$A);w_$Z^=w_$B>>>18,w_$t^=w_$h>>>18|(262143&w_$B)<<14;return w_$Z^=w_$l>>>5,w_$t^=w_$A>>>5|(31&w_$l)<<27,this._state1U=w_$Z,this._state1L=w_$t,[w_$s,w_$X]},w_$B.random=function(){var w_$B=this.randomint(),w_$h=w_$B[0],w_$l=1023<<20|w_$h>>>12,w_$A=0|(w_$B[1]>>>12|(4095&w_$h)<<20);return w_$n._CONVERTION_BUFFER.setUint32(0,w_$l,!1),w_$n._CONVERTION_BUFFER.setUint32(4,w_$A,!1),w_$Ah._CONVERTION_BUFFER.getFloat64(0,!1)-1},w_$T(w_$n,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new w_$Ah([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function w_$B(w_$B,w_$h){this.origin=null,this.direction=null,this.origin=w_$B,this.direction=w_$h}return w_$Q(w_$B,"laya.d3.math.Ray"),w_$B}()),w_$sh=function(){function w_$B(w_$B,w_$h){this.elements=new Float32Array(2),void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0);var w_$l=this.elements;w_$l[0]=w_$B,w_$l[1]=w_$h}w_$Q(w_$B,"laya.d3.math.Vector2");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.fromArray=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0),this.elements[0]=w_$B[w_$h+0],this.elements[1]=w_$B[w_$h+1]},w_$h.cloneTo=function(w_$B){var w_$h=w_$B.elements,w_$l=this.elements;w_$h[0]=w_$l[0],w_$h[1]=w_$l[1]},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"x",function(){return this.elements[0]},function(w_$B){this.elements[0]=w_$B}),w_$i(0,w_$h,"y",function(){return this.elements[1]},function(w_$B){this.elements[1]=w_$B}),w_$B.scale=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements;w_$A[0]=w_$n[0]*w_$h,w_$A[1]=w_$n[1]*w_$h},w_$T(w_$B,["ZERO",function(){return this.ZERO=new w_$B(0,0)},"ONE",function(){return this.ONE=new w_$B(1,1)}]),w_$B}(),w_$Xh=function(){function w_$G(w_$B,w_$h,w_$l){this.elements=new Float32Array(3),void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0);var w_$A=this.elements;w_$A[0]=w_$B,w_$A[1]=w_$h,w_$A[2]=w_$l}w_$Q(w_$G,"laya.d3.math.Vector3");var w_$B=w_$G.prototype;return w_$o.imps(w_$B,{"laya.d3.core.IClone":!0}),w_$B.fromArray=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0),this.elements[0]=w_$B[w_$h+0],this.elements[1]=w_$B[w_$h+1],this.elements[2]=w_$B[w_$h+2]},w_$B.cloneTo=function(w_$B){var w_$h=w_$B.elements,w_$l=this.elements;w_$h[0]=w_$l[0],w_$h[1]=w_$l[1],w_$h[2]=w_$l[2]},w_$B.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$B.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},w_$B.reset=function(w_$B,w_$h,w_$l){this.elements[0]=w_$B,this.elements[1]=w_$h,this.elements[2]=w_$l},w_$i(0,w_$B,"x",function(){return this.elements[0]},function(w_$B){this.elements[0]=w_$B}),w_$i(0,w_$B,"y",function(){return this.elements[1]},function(w_$B){this.elements[1]=w_$B}),w_$i(0,w_$B,"z",function(){return this.elements[2]},function(w_$B){this.elements[2]=w_$B}),w_$G.distanceSquared=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$l[0]-w_$A[0],w_$s=w_$l[1]-w_$A[1],w_$X=w_$l[2]-w_$A[2];return w_$n*w_$n+w_$s*w_$s+w_$X*w_$X},w_$G.distance=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$l[0]-w_$A[0],w_$s=w_$l[1]-w_$A[1],w_$X=w_$l[2]-w_$A[2];return Math.sqrt(w_$n*w_$n+w_$s*w_$s+w_$X*w_$X)},w_$G.min=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=Math.min(w_$n[0],w_$s[0]),w_$A[1]=Math.min(w_$n[1],w_$s[1]),w_$A[2]=Math.min(w_$n[2],w_$s[2])},w_$G.max=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=Math.max(w_$n[0],w_$s[0]),w_$A[1]=Math.max(w_$n[1],w_$s[1]),w_$A[2]=Math.max(w_$n[2],w_$s[2])},w_$G.transformQuat=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements,w_$X=w_$n[0],w_$Z=w_$n[1],w_$t=w_$n[2],w_$P=w_$s[0],w_$G=w_$s[1],w_$T=w_$s[2],w_$b=w_$s[3],w_$Q=w_$b*w_$X+w_$G*w_$t-w_$T*w_$Z,w_$i=w_$b*w_$Z+w_$T*w_$X-w_$P*w_$t,w_$$=w_$b*w_$t+w_$P*w_$Z-w_$G*w_$X,w_$V=-w_$P*w_$X-w_$G*w_$Z-w_$T*w_$t;w_$A[0]=w_$Q*w_$b+w_$V*-w_$P+w_$i*-w_$T-w_$$*-w_$G,w_$A[1]=w_$i*w_$b+w_$V*-w_$G+w_$$*-w_$P-w_$Q*-w_$T,w_$A[2]=w_$$*w_$b+w_$V*-w_$T+w_$Q*-w_$G-w_$i*-w_$P},w_$G.scalarLength=function(w_$B){var w_$h=w_$B.elements,w_$l=w_$h[0],w_$A=w_$h[1],w_$n=w_$h[2];return Math.sqrt(w_$l*w_$l+w_$A*w_$A+w_$n*w_$n)},w_$G.scalarLengthSquared=function(w_$B){var w_$h=w_$B.elements,w_$l=w_$h[0],w_$A=w_$h[1],w_$n=w_$h[2];return w_$l*w_$l+w_$A*w_$A+w_$n*w_$n},w_$G.normalize=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$l[0],w_$s=w_$l[1],w_$X=w_$l[2],w_$Z=w_$n*w_$n+w_$s*w_$s+w_$X*w_$X;0<w_$Z&&(w_$Z=1/Math.sqrt(w_$Z),w_$A[0]=w_$l[0]*w_$Z,w_$A[1]=w_$l[1]*w_$Z,w_$A[2]=w_$l[2]*w_$Z)},w_$G.multiply=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=w_$n[0]*w_$s[0],w_$A[1]=w_$n[1]*w_$s[1],w_$A[2]=w_$n[2]*w_$s[2]},w_$G.scale=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements;w_$A[0]=w_$n[0]*w_$h,w_$A[1]=w_$n[1]*w_$h,w_$A[2]=w_$n[2]*w_$h},w_$G.lerp=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$A.elements,w_$s=w_$B.elements,w_$X=w_$h.elements,w_$Z=w_$s[0],w_$t=w_$s[1],w_$P=w_$s[2];w_$n[0]=w_$Z+w_$l*(w_$X[0]-w_$Z),w_$n[1]=w_$t+w_$l*(w_$X[1]-w_$t),w_$n[2]=w_$P+w_$l*(w_$X[2]-w_$P)},w_$G.transformV3ToV3=function(w_$B,w_$h,w_$l){var w_$A=w_$G._tempVector4;w_$G.transformV3ToV4(w_$B,w_$h,w_$A);var w_$n=w_$A.elements,w_$s=w_$l.elements;w_$s[0]=w_$n[0],w_$s[1]=w_$n[1],w_$s[2]=w_$n[2]},w_$G.transformV3ToV4=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$h.elements,w_$t=w_$l.elements;w_$t[0]=w_$n*w_$Z[0]+w_$s*w_$Z[4]+w_$X*w_$Z[8]+w_$Z[12],w_$t[1]=w_$n*w_$Z[1]+w_$s*w_$Z[5]+w_$X*w_$Z[9]+w_$Z[13],w_$t[2]=w_$n*w_$Z[2]+w_$s*w_$Z[6]+w_$X*w_$Z[10]+w_$Z[14],w_$t[3]=w_$n*w_$Z[3]+w_$s*w_$Z[7]+w_$X*w_$Z[11]+w_$Z[15]},w_$G.TransformNormal=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$h.elements,w_$t=w_$l.elements;w_$t[0]=w_$n*w_$Z[0]+w_$s*w_$Z[4]+w_$X*w_$Z[8],w_$t[1]=w_$n*w_$Z[1]+w_$s*w_$Z[5]+w_$X*w_$Z[9],w_$t[2]=w_$n*w_$Z[2]+w_$s*w_$Z[6]+w_$X*w_$Z[10]},w_$G.transformCoordinate=function(w_$B,w_$h,w_$l){var w_$A=w_$G._tempVector4.elements,w_$n=w_$B.elements,w_$s=w_$n[0],w_$X=w_$n[1],w_$Z=w_$n[2],w_$t=w_$h.elements;w_$A[0]=w_$s*w_$t[0]+w_$X*w_$t[4]+w_$Z*w_$t[8]+w_$t[12],w_$A[1]=w_$s*w_$t[1]+w_$X*w_$t[5]+w_$Z*w_$t[9]+w_$t[13],w_$A[2]=w_$s*w_$t[2]+w_$X*w_$t[6]+w_$Z*w_$t[10]+w_$t[14],w_$A[3]=1/(w_$s*w_$t[3]+w_$X*w_$t[7]+w_$Z*w_$t[11]+w_$t[15]);var w_$P=w_$l.elements;w_$P[0]=w_$A[0]*w_$A[3],w_$P[1]=w_$A[1]*w_$A[3],w_$P[2]=w_$A[2]*w_$A[3]},w_$G.Clamp=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.elements,w_$s=w_$n[0],w_$X=w_$n[1],w_$Z=w_$n[2],w_$t=w_$h.elements,w_$P=w_$t[0],w_$G=w_$t[1],w_$T=w_$t[2],w_$b=w_$l.elements,w_$Q=w_$b[0],w_$i=w_$b[1],w_$$=w_$b[2],w_$V=w_$A.elements;w_$s=(w_$s=w_$Q<w_$s?w_$Q:w_$s)<w_$P?w_$P:w_$s,w_$X=(w_$X=w_$i<w_$X?w_$i:w_$X)<w_$G?w_$G:w_$X,w_$Z=(w_$Z=w_$$<w_$Z?w_$$:w_$Z)<w_$T?w_$T:w_$Z,w_$V[0]=w_$s,w_$V[1]=w_$X,w_$V[2]=w_$Z},w_$G.add=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=w_$n[0]+w_$s[0],w_$A[1]=w_$n[1]+w_$s[1],w_$A[2]=w_$n[2]+w_$s[2]},w_$G.subtract=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=w_$n[0]-w_$s[0],w_$A[1]=w_$n[1]-w_$s[1],w_$A[2]=w_$n[2]-w_$s[2]},w_$G.cross=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$h.elements,w_$s=w_$l.elements,w_$X=w_$A[0],w_$Z=w_$A[1],w_$t=w_$A[2],w_$P=w_$n[0],w_$G=w_$n[1],w_$T=w_$n[2];w_$s[0]=w_$Z*w_$T-w_$t*w_$G,w_$s[1]=w_$t*w_$P-w_$X*w_$T,w_$s[2]=w_$X*w_$G-w_$Z*w_$P},w_$G.dot=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;return w_$l[0]*w_$A[0]+w_$l[1]*w_$A[1]+w_$l[2]*w_$A[2]},w_$G.equals=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;return w_$DB.nearEqual(Math.abs(w_$l[0]),Math.abs(w_$A[0]))&&w_$DB.nearEqual(Math.abs(w_$l[1]),Math.abs(w_$A[1]))&&w_$DB.nearEqual(Math.abs(w_$l[2]),Math.abs(w_$A[2]))},w_$G.ZERO=new w_$G(0,0,0),w_$G.ONE=new w_$G(1,1,1),w_$G.NegativeUnitX=new w_$G(-1,0,0),w_$G.UnitX=new w_$G(1,0,0),w_$G.UnitY=new w_$G(0,1,0),w_$G.UnitZ=new w_$G(0,0,1),w_$G.ForwardRH=new w_$G(0,0,-1),w_$G.ForwardLH=new w_$G(0,0,1),w_$G.Up=new w_$G(0,1,0),w_$G.NAN=new w_$G(NaN,NaN,NaN),w_$T(w_$G,["_tempVector4",function(){return this._tempVector4=new w_$Zh}]),w_$G}(),w_$Zh=function(){function w_$B(w_$B,w_$h,w_$l,w_$A){this.elements=new Float32Array(4),void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=0);var w_$n=this.elements;w_$n[0]=w_$B,w_$n[1]=w_$h,w_$n[2]=w_$l,w_$n[3]=w_$A}w_$Q(w_$B,"laya.d3.math.Vector4");var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h.fromArray=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0),this.elements[0]=w_$B[w_$h+0],this.elements[1]=w_$B[w_$h+1],this.elements[2]=w_$B[w_$h+2],this.elements[3]=w_$B[w_$h+3]},w_$h.cloneTo=function(w_$B){var w_$h=w_$B.elements,w_$l=this.elements;w_$h[0]=w_$l[0],w_$h[1]=w_$l[1],w_$h[2]=w_$l[2],w_$h[3]=w_$l[3]},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$h.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},w_$h.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},w_$i(0,w_$h,"x",function(){return this.elements[0]},function(w_$B){this.elements[0]=w_$B}),w_$i(0,w_$h,"y",function(){return this.elements[1]},function(w_$B){this.elements[1]=w_$B}),w_$i(0,w_$h,"z",function(){return this.elements[2]},function(w_$B){this.elements[2]=w_$B}),w_$i(0,w_$h,"w",function(){return this.elements[3]},function(w_$B){this.elements[3]=w_$B}),w_$B.lerp=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$A.elements,w_$s=w_$B.elements,w_$X=w_$h.elements,w_$Z=w_$s[0],w_$t=w_$s[1],w_$P=w_$s[2],w_$G=w_$s[3];w_$n[0]=w_$Z+w_$l*(w_$X[0]-w_$Z),w_$n[1]=w_$t+w_$l*(w_$X[1]-w_$t),w_$n[2]=w_$P+w_$l*(w_$X[2]-w_$P),w_$n[3]=w_$G+w_$l*(w_$X[3]-w_$G)},w_$B.transformByM4x4=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$A[0],w_$s=w_$A[1],w_$X=w_$A[2],w_$Z=w_$A[3],w_$t=w_$h.elements,w_$P=w_$l.elements;w_$P[0]=w_$n*w_$t[0]+w_$s*w_$t[4]+w_$X*w_$t[8]+w_$Z*w_$t[12],w_$P[1]=w_$n*w_$t[1]+w_$s*w_$t[5]+w_$X*w_$t[9]+w_$Z*w_$t[13],w_$P[2]=w_$n*w_$t[2]+w_$s*w_$t[6]+w_$X*w_$t[10]+w_$Z*w_$t[14],w_$P[3]=w_$n*w_$t[3]+w_$s*w_$t[7]+w_$X*w_$t[11]+w_$Z*w_$t[15]},w_$B.equals=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;return w_$DB.nearEqual(Math.abs(w_$l[0]),Math.abs(w_$A[0]))&&w_$DB.nearEqual(Math.abs(w_$l[1]),Math.abs(w_$A[1]))&&w_$DB.nearEqual(Math.abs(w_$l[2]),Math.abs(w_$A[2]))&&w_$DB.nearEqual(Math.abs(w_$l[3]),Math.abs(w_$A[3]))},w_$B.normalize=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$B.length();0<w_$n&&(w_$A[0]=w_$l[0]*w_$n,w_$A[1]=w_$l[1]*w_$n,w_$A[2]=w_$l[2]*w_$n,w_$A[3]=w_$l[3]*w_$n)},w_$B.add=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=w_$n[0]+w_$s[0],w_$A[1]=w_$n[1]+w_$s[1],w_$A[2]=w_$n[2]+w_$s[2],w_$A[3]=w_$n[3]+w_$s[3]},w_$B.subtract=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=w_$n[0]-w_$s[0],w_$A[1]=w_$n[1]-w_$s[1],w_$A[2]=w_$n[2]-w_$s[2],w_$A[3]=w_$n[3]-w_$s[3]},w_$B.multiply=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=w_$n[0]*w_$s[0],w_$A[1]=w_$n[1]*w_$s[1],w_$A[2]=w_$n[2]*w_$s[2],w_$A[3]=w_$n[3]*w_$s[3]},w_$B.scale=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements;w_$A[0]=w_$n[0]*w_$h,w_$A[1]=w_$n[1]*w_$h,w_$A[2]=w_$n[2]*w_$h,w_$A[3]=w_$n[3]*w_$h},w_$B.Clamp=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.elements,w_$s=w_$n[0],w_$X=w_$n[1],w_$Z=w_$n[2],w_$t=w_$n[3],w_$P=w_$h.elements,w_$G=w_$P[0],w_$T=w_$P[1],w_$b=w_$P[2],w_$Q=w_$P[3],w_$i=w_$l.elements,w_$$=w_$i[0],w_$V=w_$i[1],w_$J=w_$i[2],w_$H=w_$i[3],w_$y=w_$A.elements;w_$s=(w_$s=w_$$<w_$s?w_$$:w_$s)<w_$G?w_$G:w_$s,w_$X=(w_$X=w_$V<w_$X?w_$V:w_$X)<w_$T?w_$T:w_$X,w_$Z=(w_$Z=w_$J<w_$Z?w_$J:w_$Z)<w_$b?w_$b:w_$Z,w_$t=(w_$t=w_$H<w_$t?w_$H:w_$t)<w_$Q?w_$Q:w_$t,w_$y[0]=w_$s,w_$y[1]=w_$X,w_$y[2]=w_$Z,w_$y[3]=w_$t},w_$B.distanceSquared=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$l[0]-w_$A[0],w_$s=w_$l[1]-w_$A[1],w_$X=w_$l[2]-w_$A[2],w_$Z=w_$l[3]-w_$A[3];return w_$n*w_$n+w_$s*w_$s+w_$X*w_$X+w_$Z*w_$Z},w_$B.distance=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements,w_$n=w_$l[0]-w_$A[0],w_$s=w_$l[1]-w_$A[1],w_$X=w_$l[2]-w_$A[2],w_$Z=w_$l[3]-w_$A[3];return Math.sqrt(w_$n*w_$n+w_$s*w_$s+w_$X*w_$X+w_$Z*w_$Z)},w_$B.dot=function(w_$B,w_$h){var w_$l=w_$B.elements,w_$A=w_$h.elements;return w_$l[0]*w_$A[0]+w_$l[1]*w_$A[1]+w_$l[2]*w_$A[2]+w_$l[3]*w_$A[3]},w_$B.min=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=Math.min(w_$n[0],w_$s[0]),w_$A[1]=Math.min(w_$n[1],w_$s[1]),w_$A[2]=Math.min(w_$n[2],w_$s[2]),w_$A[3]=Math.min(w_$n[3],w_$s[3])},w_$B.max=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h.elements;w_$A[0]=Math.max(w_$n[0],w_$s[0]),w_$A[1]=Math.max(w_$n[1],w_$s[1]),w_$A[2]=Math.max(w_$n[2],w_$s[2]),w_$A[3]=Math.max(w_$n[3],w_$s[3])},w_$T(w_$B,["ZERO",function(){return this.ZERO=new w_$B},"ONE",function(){return this.ONE=new w_$B(1,1,1,1)},"UnitX",function(){return this.UnitX=new w_$B(1,0,0,0)},"UnitY",function(){return this.UnitY=new w_$B(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new w_$B(0,0,1,0)},"UnitW",function(){return this.UnitW=new w_$B(0,0,0,1)}]),w_$B}(),w_$th=function(){function w_$s(w_$B,w_$h,w_$l,w_$A){this.minDepth=0,this.maxDepth=1,this.x=w_$B,this.y=w_$h,this.width=w_$l,this.height=w_$A}w_$Q(w_$s,"laya.d3.math.Viewport");var w_$B=w_$s.prototype;return w_$B.project=function(w_$B,w_$h,w_$l){w_$Xh.transformV3ToV3(w_$B,w_$h,w_$l);var w_$A=w_$B.elements,w_$n=w_$h.elements,w_$s=w_$l.elements,w_$X=w_$A[0]*w_$n[3]+w_$A[1]*w_$n[7]+w_$A[2]*w_$n[11]+w_$n[15];1!==w_$X&&(w_$s[0]=w_$s[0]/w_$X,w_$s[1]=w_$s[1]/w_$X,w_$s[2]=w_$s[2]/w_$X),w_$s[0]=.5*(w_$s[0]+1)*this.width+this.x,w_$s[1]=.5*(1-w_$s[1])*this.height+this.y,w_$s[2]=w_$s[2]*(this.maxDepth-this.minDepth)+this.minDepth},w_$B.unprojectFromMat=function(w_$B,w_$h,w_$l){var w_$A=w_$B.elements,w_$n=w_$h.elements,w_$s=w_$l.elements;w_$s[0]=(w_$A[0]-this.x)/this.width*2-1,w_$s[1]=-((w_$A[1]-this.y)/this.height*2-1);var w_$X=(this.maxDepth-this.minDepth)/2;w_$s[2]=(w_$A[2]-this.minDepth-w_$X)/w_$X;var w_$Z=w_$s[0]*w_$n[3]+w_$s[1]*w_$n[7]+w_$s[2]*w_$n[11]+w_$n[15];w_$Xh.transformV3ToV3(w_$l,w_$h,w_$l),1!==w_$Z&&(w_$s[0]=w_$s[0]/w_$Z,w_$s[1]=w_$s[1]/w_$Z,w_$s[2]=w_$s[2]/w_$Z)},w_$B.unprojectFromWVP=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$Bh.multiply(w_$h,w_$l,w_$s._tempMatrix4x4),w_$A&&w_$Bh.multiply(w_$s._tempMatrix4x4,w_$A,w_$s._tempMatrix4x4),w_$s._tempMatrix4x4.invert(w_$s._tempMatrix4x4),this.unprojectFromMat(w_$B,w_$s._tempMatrix4x4,w_$n)},w_$T(w_$s,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new w_$Bh}]),w_$s}(),w_$Ph=function(){function w_$a(w_$B){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=w_$B,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}w_$Q(w_$a,"laya.d3.resource.models.SubMesh");var w_$B=w_$a.prototype;return w_$o.imps(w_$B,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),w_$B._getVertexBuffer=function(w_$B){return void 0===w_$B&&(w_$B=0),0===w_$B?this._vertexBuffer:null},w_$B._getIndexBuffer=function(){return this._indexBuffer},w_$B._getStaticBatchBakedVertexs=function(w_$B,w_$h){var w_$l,w_$A,w_$n=this._vertexBuffer,w_$s=w_$n.vertexDeclaration,w_$X=w_$s.getVertexElementByUsage(0).offset/4,w_$Z=w_$s.getVertexElementByUsage(3).offset/4,w_$t=w_$h.meshRender.lightmapScaleOffset,w_$P=0,w_$G=0,w_$T=0,w_$b=0,w_$Q=0,w_$i=0;if(w_$t)if(w_$A=w_$s.getVertexElementByUsage(15))w_$T=w_$s.vertexStride/4,w_$l=0<this._vertexCount?w_$n.getData().slice(this._vertexStart*w_$T,(this._vertexStart+this._vertexCount)*w_$T):w_$n.getData().slice(),w_$b=w_$A.offset/4;else{w_$T=(w_$i=w_$s.vertexStride/4)+2,w_$l=this._vertexCount?new Float32Array(this._vertexCount*(w_$n.vertexDeclaration.vertexStride/4+2)):new Float32Array(w_$n.vertexCount*(w_$n.vertexDeclaration.vertexStride/4+2)),w_$b=(w_$Q=w_$s.getVertexElementByUsage(2).offset/4)+2;var w_$$=w_$n.getData();for(w_$P=0,w_$G=w_$$.length/w_$i;w_$P<w_$G;w_$P++){var w_$V=0;w_$V=0<this._vertexCount?(this._vertexStart+w_$P)*w_$i:w_$P*w_$i;var w_$J=w_$P*w_$T,w_$H=0;for(w_$H=0;w_$H<w_$b;w_$H++)w_$l[w_$J+w_$H]=w_$$[w_$V+w_$H];for(w_$H=w_$b;w_$H<w_$i;w_$H++)w_$l[w_$J+w_$H+2]=w_$$[w_$V+w_$H]}}else w_$T=w_$s.vertexStride/4,w_$l=this._vertexCount?w_$n.getData().slice(this._vertexStart*w_$T,(this._vertexStart+this._vertexCount)*w_$T):w_$n.getData().slice();if(w_$B){var w_$y=w_$B.worldMatrix,w_$C=w_$a._tempMatrix4x40;w_$y.invert(w_$C);var w_$o=w_$a._tempMatrix4x41,w_$u=w_$h.transform.worldMatrix;w_$Bh.multiply(w_$C,w_$u,w_$o)}else w_$o=w_$h.transform.worldMatrix;var w_$v=w_$a._tempQuaternion0;for(w_$o.decomposeTransRotScale(w_$a._tempVector30,w_$v,w_$a._tempVector31),w_$P=0,w_$G=w_$l.length/w_$T;w_$P<w_$G;w_$P++){var w_$U=w_$P*w_$T+w_$X,w_$x=w_$P*w_$T+w_$Z;if(w_$Vh.transformVector3ArrayToVector3ArrayCoordinate(w_$l,w_$U,w_$o,w_$l,w_$U),w_$Vh.transformVector3ArrayByQuat(w_$l,w_$x,w_$v,w_$l,w_$x),w_$t){var w_$w=w_$P*w_$T+w_$b;if(w_$A)w_$Vh.transformLightingMapTexcoordByUV1Array(w_$l,w_$w,w_$t,w_$l,w_$w);else{var w_$z=w_$P*w_$i+w_$Q;w_$Vh.transformLightingMapTexcoordByUV0Array(w_$$,w_$z,w_$t,w_$l,w_$w)}}}return w_$l},w_$B._getVertexBuffers=function(){return null},w_$B._beforeRender=function(w_$B){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w_$B._render=function(w_$B){var w_$h,w_$l=0,w_$A=w_$B.renderElement;if(1<this._indexCount){var w_$n=this._boneIndicesList.length;if(1<w_$n){for(var w_$s=0;w_$s<w_$n;w_$s++)(w_$h=w_$A._skinAnimationDatas||this._skinAnimationDatas)&&(w_$A._shaderValue.setValue(0,w_$h[w_$s]),w_$B._shader.uploadRenderElementUniforms(w_$A._shaderValue.data)),w_$S.mainContext.drawElements(4,this._subIndexBufferCount[w_$s],5123,2*this._subIndexBufferStart[w_$s]);w_$U.drawCall+=w_$n}else(w_$h=w_$A._skinAnimationDatas||this._skinAnimationDatas)&&(w_$A._shaderValue.setValue(0,w_$h[0]),w_$B._shader.uploadRenderElementUniforms(w_$A._shaderValue.data)),w_$S.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),w_$U.drawCall++;w_$l=this._indexCount}else w_$l=this._indexBuffer.indexCount,(w_$h=w_$A._skinAnimationDatas||this._skinAnimationDatas)&&(w_$A._shaderValue.setValue(0,w_$h[0]),w_$B._shader.uploadRenderElementUniforms(w_$A._shaderValue.data)),w_$S.mainContext.drawElements(4,w_$l,5123,0),w_$U.drawCall++;w_$U.trianglesFaces+=w_$l/3},w_$B.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},w_$B.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},w_$i(0,w_$B,"_vertexBufferCount",function(){return 1}),w_$i(0,w_$B,"triangleCount",function(){return this._indexBuffer.indexCount/3}),w_$T(w_$a,["_tempVector30",function(){return this._tempVector30=new w_$Xh},"_tempVector31",function(){return this._tempVector31=new w_$Xh},"_tempQuaternion0",function(){return this._tempQuaternion0=new w_$lh},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new w_$Bh},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new w_$Bh}]),w_$a}(),w_$Gh=function(){function w_$B(w_$B){this.defineCounter=0,this.defines=null,w_$B?(this.defineCounter=w_$B.defineCounter,this.defines=w_$B.defines.slice()):(this.defineCounter=0,this.defines=[])}return w_$Q(w_$B,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),w_$B.prototype.registerDefine=function(w_$B){var w_$h=Math.pow(2,this.defineCounter++);return this.defines[w_$h]=w_$B,w_$h},w_$B}(),w_$Th=function(){function w_$B(){}return w_$Q(w_$B,"laya.d3.shader.ShaderInit3D"),w_$B.__init__=function(){var w_$B,w_$h;w_$Uh._globalRegDefine("HIGHPRECISION",w_$Uh.SHADERDEFINE_HIGHPRECISION),w_$Uh._globalRegDefine("FOG",w_$Uh.SHADERDEFINE_FOG),w_$Uh._globalRegDefine("DIRECTIONLIGHT",w_$Uh.SHADERDEFINE_DIRECTIONLIGHT),w_$Uh._globalRegDefine("POINTLIGHT",w_$Uh.SHADERDEFINE_POINTLIGHT),w_$Uh._globalRegDefine("SPOTLIGHT",w_$Uh.SHADERDEFINE_SPOTLIGHT),w_$Uh._globalRegDefine("UV",w_$Uh.SHADERDEFINE_UV0),w_$Uh._globalRegDefine("COLOR",w_$Uh.SHADERDEFINE_COLOR),w_$Uh._globalRegDefine("UV1",w_$Uh.SHADERDEFINE_UV1),w_$Uh._globalRegDefine("CASTSHADOW",w_$Qh.SHADERDEFINE_CAST_SHADOW),w_$Uh._globalRegDefine("SHADOWMAP_PSSM1",w_$Qh.SHADERDEFINE_SHADOW_PSSM1),w_$Uh._globalRegDefine("SHADOWMAP_PSSM2",w_$Qh.SHADERDEFINE_SHADOW_PSSM2),w_$Uh._globalRegDefine("SHADOWMAP_PSSM3",w_$Qh.SHADERDEFINE_SHADOW_PSSM3),w_$Uh._globalRegDefine("SHADOWMAP_PCF_NO",w_$Qh.SHADERDEFINE_SHADOW_PCF_NO),w_$Uh._globalRegDefine("SHADOWMAP_PCF1",w_$Qh.SHADERDEFINE_SHADOW_PCF1),w_$Uh._globalRegDefine("SHADOWMAP_PCF2",w_$Qh.SHADERDEFINE_SHADOW_PCF2),w_$Uh._globalRegDefine("SHADOWMAP_PCF3",w_$Qh.SHADERDEFINE_SHADOW_PCF3),w_$Uh._globalRegDefine("DEPTHFOG",w_$Uh.SAHDERDEFINE_DEPTHFOG),w_$jh.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),w_$jh.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),w_$B={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},w_$h={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var w_$l=w_$jh.nameKey.add("SIMPLE");shaderCompile=w_$Uh.add(w_$l,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',w_$B,w_$h),w_$gh.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),w_$gh.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),w_$gh.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),w_$gh.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),w_$gh.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),w_$gh.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),w_$gh.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),w_$gh.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),w_$gh.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},w_$B}(),w_$bh=function(){function w_$B(){this._data=null,this._data=[]}w_$Q(w_$B,"laya.d3.shader.ValusArray");var w_$h=w_$B.prototype;return w_$h.setValue=function(w_$B,w_$h){this._data[w_$B]=w_$h},w_$i(0,w_$h,"data",function(){return this._data}),w_$B}(),w_$Qh=function(){function w_$B(){}return w_$B.SHADERDEFINE_RECEIVE_SHADOW=1,w_$B.SHADERDEFINE_CAST_SHADOW=512,w_$B.SHADERDEFINE_SHADOW_PSSM1=1024,w_$B.SHADERDEFINE_SHADOW_PSSM2=2048,w_$B.SHADERDEFINE_SHADOW_PSSM3=4096,w_$B.SHADERDEFINE_SHADOW_PCF_NO=8192,w_$B.SHADERDEFINE_SHADOW_PCF1=16384,w_$B.SHADERDEFINE_SHADOW_PCF2=32768,w_$B.SHADERDEFINE_SHADOW_PCF3=65536,w_$B.MAX_PSSM_COUNT=3,w_$B}(),w_$ih=function(){function w_$f(){}return w_$Q(w_$f,"laya.d3.utils.Picker"),w_$f.calculateCursorRay=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$B.elements[0],w_$Z=w_$B.elements[1],w_$t=w_$f._tempVector30,w_$P=w_$t.elements;w_$P[0]=w_$X,w_$P[1]=w_$Z,w_$P[2]=w_$h.minDepth;var w_$G=w_$f._tempVector31,w_$T=w_$G.elements;w_$T[0]=w_$X,w_$T[1]=w_$Z,w_$T[2]=w_$h.maxDepth;var w_$b=w_$s.origin,w_$Q=w_$f._tempVector32;w_$h.unprojectFromWVP(w_$t,w_$l,w_$A,w_$n,w_$b),w_$h.unprojectFromWVP(w_$G,w_$l,w_$A,w_$n,w_$Q);var w_$i=w_$s.direction.elements;w_$i[0]=w_$Q.x-w_$b.x,w_$i[1]=w_$Q.y-w_$b.y,w_$i[2]=w_$Q.z-w_$b.z,w_$Xh.normalize(w_$s.direction,w_$s.direction)},w_$f.rayIntersectsPositionsAndIndices=function(w_$B,w_$h,w_$l,w_$A,w_$n){for(var w_$s=w_$l.vertexStride/4,w_$X=w_$l.getVertexElementByUsage(0).offset/4,w_$Z=Number.MAX_VALUE,w_$t=-1,w_$P=-1,w_$G=-1,w_$T=0;w_$T<w_$A.length;w_$T+=3){var w_$b=w_$f._tempVector35,w_$Q=w_$b.elements,w_$i=w_$A[w_$T]*w_$s,w_$$=w_$i+w_$X;w_$Q[0]=w_$h[w_$$],w_$Q[1]=w_$h[1+w_$$],w_$Q[2]=w_$h[2+w_$$];var w_$V=w_$f._tempVector36,w_$J=w_$V.elements,w_$H=w_$A[w_$T+1]*w_$s,w_$y=w_$H+w_$X;w_$J[0]=w_$h[w_$y],w_$J[1]=w_$h[1+w_$y],w_$J[2]=w_$h[2+w_$y];var w_$C=w_$f._tempVector37,w_$o=w_$C.elements,w_$u=w_$A[w_$T+2]*w_$s,w_$v=w_$u+w_$X;w_$o[0]=w_$h[w_$v],w_$o[1]=w_$h[1+w_$v],w_$o[2]=w_$h[2+w_$v];var w_$U=laya.d3.utils.Picker.rayIntersectsTriangle(w_$B,w_$b,w_$V,w_$C);!isNaN(w_$U)&&w_$U<w_$Z&&(w_$Z=w_$U,w_$t=w_$i,w_$P=w_$H,w_$G=w_$u)}if(w_$Z===Number.MAX_VALUE)return w_$n.position.toDefault(),w_$n.distance=Number.MAX_VALUE,w_$n.trianglePositions[0].toDefault(),w_$n.trianglePositions[1].toDefault(),w_$n.trianglePositions[2].toDefault(),w_$n.triangleNormals[0].toDefault(),w_$n.triangleNormals[1].toDefault(),w_$n.triangleNormals[2].toDefault(),!1;w_$n.distance=w_$Z,w_$Xh.scale(w_$B.direction,w_$Z,w_$n.position),w_$Xh.add(w_$B.origin,w_$n.position,w_$n.position);var w_$x=w_$n.trianglePositions,w_$w=w_$x[0],w_$z=w_$x[1],w_$a=w_$x[2],w_$S=w_$w.elements,w_$N=w_$z.elements,w_$R=w_$a.elements,w_$W=w_$t+w_$X;w_$S[0]=w_$h[w_$W],w_$S[1]=w_$h[w_$W+1],w_$S[2]=w_$h[w_$W+2];var w_$M=w_$P+w_$X;w_$N[0]=w_$h[w_$M],w_$N[1]=w_$h[w_$M+1],w_$N[2]=w_$h[w_$M+2];var w_$E=w_$G+w_$X;w_$R[0]=w_$h[w_$E],w_$R[1]=w_$h[w_$E+1],w_$R[2]=w_$h[w_$E+2];var w_$j=w_$l.getVertexElementByUsage(3);if(w_$j){var w_$g=w_$j.offset/4,w_$_=w_$n.triangleNormals,w_$d=w_$_[0],w_$k=w_$_[1],w_$O=w_$_[2],w_$p=w_$d.elements,w_$F=w_$k.elements,w_$c=w_$O.elements,w_$m=w_$t+w_$g;w_$p[0]=w_$h[w_$m],w_$p[1]=w_$h[w_$m+1],w_$p[2]=w_$h[w_$m+2];var w_$Y=w_$P+w_$g;w_$F[0]=w_$h[w_$Y],w_$F[1]=w_$h[w_$Y+1],w_$F[2]=w_$h[w_$Y+2];var w_$K=w_$G+w_$g;w_$c[0]=w_$h[w_$K],w_$c[1]=w_$h[w_$K+1],w_$c[2]=w_$h[w_$K+2]}return!0},w_$f.rayIntersectsTriangle=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$f._tempVector30,w_$s=w_$f._tempVector31;w_$Xh.subtract(w_$l,w_$h,w_$n),w_$Xh.subtract(w_$A,w_$h,w_$s);var w_$X,w_$Z=w_$f._tempVector32;if(w_$Xh.cross(w_$B.direction,w_$s,w_$Z),(w_$X=w_$Xh.dot(w_$n,w_$Z))>-Number.MIN_VALUE&&w_$X<Number.MIN_VALUE)return Number.NaN;var w_$t,w_$P=1/w_$X,w_$G=w_$f._tempVector33;if(w_$Xh.subtract(w_$B.origin,w_$h,w_$G),w_$t=w_$Xh.dot(w_$G,w_$Z),(w_$t*=w_$P)<0||1<w_$t)return Number.NaN;var w_$T,w_$b,w_$Q=w_$f._tempVector34;return w_$Xh.cross(w_$G,w_$n,w_$Q),w_$T=w_$Xh.dot(w_$B.direction,w_$Q),(w_$T*=w_$P)<0||1<w_$t+w_$T?Number.NaN:(w_$b=w_$Xh.dot(w_$s,w_$Q),(w_$b*=w_$P)<0?Number.NaN:w_$b)},w_$T(w_$f,["_tempVector30",function(){return this._tempVector30=new w_$Xh},"_tempVector31",function(){return this._tempVector31=new w_$Xh},"_tempVector32",function(){return this._tempVector32=new w_$Xh},"_tempVector33",function(){return this._tempVector33=new w_$Xh},"_tempVector34",function(){return this._tempVector34=new w_$Xh},"_tempVector35",function(){return this._tempVector35=new w_$Xh},"_tempVector36",function(){return this._tempVector36=new w_$Xh},"_tempVector37",function(){return this._tempVector37=new w_$Xh}]),w_$f}(),w_$$h=(function(){function w_$B(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new w_$Xh,new w_$Xh,new w_$Xh],this.trianglePositions.length=3,this.triangleNormals=[new w_$Xh,new w_$Xh,new w_$Xh],this.triangleNormals.length=3,this.position=new w_$Xh}w_$Q(w_$B,"laya.d3.utils.RaycastHit"),w_$B.prototype.cloneTo=function(w_$B){w_$B.distance=this.distance,this.trianglePositions[0].cloneTo(w_$B.trianglePositions[0]),this.trianglePositions[1].cloneTo(w_$B.trianglePositions[1]),this.trianglePositions[2].cloneTo(w_$B.trianglePositions[2]),this.triangleNormals[0].cloneTo(w_$B.triangleNormals[0]),this.triangleNormals[1].cloneTo(w_$B.triangleNormals[1]),this.triangleNormals[2].cloneTo(w_$B.triangleNormals[2]),this.position.cloneTo(w_$B.position),w_$B.sprite3D=this.sprite3D}}(),function(){function w_$B(w_$B,w_$h){this._width=0,this._height=0,this._width=w_$B,this._height=w_$h}w_$Q(w_$B,"laya.d3.utils.Size");var w_$h=w_$B.prototype;return w_$i(0,w_$h,"width",function(){return-1===this._width?w_$I.clientWidth:this._width}),w_$i(0,w_$h,"height",function(){return-1===this._height?w_$I.clientHeight:this._height}),w_$i(1,w_$B,"fullScreen",function(){return new w_$B(-1,-1)}),w_$B}()),w_$Vh=function(){function w_$W(){}return w_$Q(w_$W,"laya.d3.utils.Utils3D"),w_$W._rotationTransformScaleSkinAnimation=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T){var w_$b,w_$Q,w_$i,w_$$,w_$V,w_$J=w_$W._tempArray16_0,w_$H=w_$W._tempArray16_1,w_$y=w_$W._tempArray16_2,w_$C=w_$A+w_$A,w_$o=w_$n+w_$n,w_$u=w_$s+w_$s,w_$v=w_$A*w_$C,w_$U=w_$n*w_$C,w_$x=w_$n*w_$o,w_$w=w_$s*w_$C,w_$z=w_$s*w_$o,w_$a=w_$s*w_$u,w_$S=w_$X*w_$C,w_$N=w_$X*w_$o,w_$R=w_$X*w_$u;for(w_$J[15]=1,w_$J[0]=1-w_$x-w_$a,w_$J[1]=w_$U+w_$R,w_$J[2]=w_$w-w_$N,w_$J[4]=w_$U-w_$R,w_$J[5]=1-w_$v-w_$a,w_$J[6]=w_$z+w_$S,w_$J[8]=w_$w+w_$N,w_$J[9]=w_$z-w_$S,w_$J[10]=1-w_$v-w_$x,w_$H[15]=1,w_$H[0]=w_$Z,w_$H[5]=w_$t,w_$H[10]=w_$P,w_$b=0;w_$b<4;w_$b++)w_$Q=w_$J[w_$b],w_$i=w_$J[w_$b+4],w_$$=w_$J[w_$b+8],w_$V=w_$J[w_$b+12],w_$y[w_$b]=w_$Q,w_$y[w_$b+4]=w_$i,w_$y[w_$b+8]=w_$$,w_$y[w_$b+12]=w_$Q*w_$B+w_$i*w_$h+w_$$*w_$l+w_$V;for(w_$b=0;w_$b<4;w_$b++)w_$Q=w_$y[w_$b],w_$i=w_$y[w_$b+4],w_$$=w_$y[w_$b+8],w_$V=w_$y[w_$b+12],w_$G[w_$b+w_$T]=w_$Q*w_$H[0]+w_$i*w_$H[1]+w_$$*w_$H[2]+w_$V*w_$H[3],w_$G[w_$b+w_$T+4]=w_$Q*w_$H[4]+w_$i*w_$H[5]+w_$$*w_$H[6]+w_$V*w_$H[7],w_$G[w_$b+w_$T+8]=w_$Q*w_$H[8]+w_$i*w_$H[9]+w_$$*w_$H[10]+w_$V*w_$H[11],w_$G[w_$b+w_$T+12]=w_$Q*w_$H[12]+w_$i*w_$H[13]+w_$$*w_$H[14]+w_$V*w_$H[15]},w_$W._createNodeByJson=function(w_$B,w_$h,w_$l,w_$A){if(!w_$l)switch(w_$h.type){case"Sprite3D":w_$l=new w_$Eh;break;case"MeshSprite3D":w_$l=new w_$fh;break;case"SkinnedMeshSprite3D":w_$l=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":w_$l=new ShuriKenParticle3D;break;case"TrailSprite3D":w_$l=new TrailSprite3D;break;case"Terrain":w_$l=new Terrain;break;case"Camera":w_$l=new w_$Kh;break;case"DirectionLight":w_$l=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var w_$n=w_$h.props;if(w_$n)for(var w_$s in w_$n)w_$l[w_$s]=w_$n[w_$s];var w_$X=w_$h.customProps;w_$X&&(w_$l instanceof laya.d3.core.Sprite3D?(w_$l._parseBaseCustomProps(w_$X),w_$l._parseCustomProps(w_$B,w_$A,w_$X,w_$h),w_$l._parseCustomComponent(w_$B,w_$A,w_$h.components)):w_$l._parseCustomProps(w_$B,w_$A,w_$X,w_$h));var w_$Z=w_$h.child;if(w_$Z)for(var w_$t=0,w_$P=w_$Z.length;w_$t<w_$P;w_$t++){var w_$G=w_$W._createNodeByJson(w_$B,w_$Z[w_$t],null,w_$A);w_$l.addChild(w_$G)}return w_$l},w_$W._computeBoneAndAnimationDatasByBindPoseMatrxix=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X,w_$Z,w_$t=0,w_$P=0,w_$G=w_$B.length;for(w_$X=0;w_$X<w_$G;w_$t+=w_$B[w_$X].keyframeWidth,w_$P+=16,w_$X++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(w_$h[w_$t+0],w_$h[w_$t+1],w_$h[w_$t+2],w_$h[w_$t+3],w_$h[w_$t+4],w_$h[w_$t+5],w_$h[w_$t+6],w_$h[w_$t+7],w_$h[w_$t+8],w_$h[w_$t+9],w_$A,w_$P),0!=w_$X&&(w_$Z=16*w_$B[w_$X].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(w_$A,w_$Z,w_$A,w_$P,w_$A,w_$P));var w_$T=w_$l.length;for(w_$X=0;w_$X<w_$T;w_$X++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w_$A,16*w_$s[w_$X],w_$l[w_$X],w_$n,16*w_$X)},w_$W._computeAnimationDatasByArrayAndMatrixFast=function(w_$B,w_$h,w_$l,w_$A){for(var w_$n=0,w_$s=w_$B.length;w_$n<w_$s;w_$n++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w_$h,16*w_$A[w_$n],w_$B[w_$n],w_$l,16*w_$n)},w_$W._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s,w_$X,w_$Z=0,w_$t=0,w_$P=w_$B.length;for(w_$s=0;w_$s<w_$P;w_$Z+=w_$B[w_$s].keyframeWidth,w_$t+=16,w_$s++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(w_$h[w_$Z+7],w_$h[w_$Z+8],w_$h[w_$Z+9],w_$h[w_$Z+3],w_$h[w_$Z+4],w_$h[w_$Z+5],w_$h[w_$Z+6],w_$h[w_$Z+0],w_$h[w_$Z+1],w_$h[w_$Z+2],w_$A,w_$t),0!=w_$s&&(w_$X=16*w_$B[w_$s].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(w_$A,w_$X,w_$A,w_$t,w_$A,w_$t));var w_$G=w_$l.length;for(w_$s=0;w_$s<w_$G;w_$s++){var w_$T=16*w_$s;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w_$A,w_$T,w_$l[w_$s],w_$n,w_$T)}},w_$W._computeAnimationDatasByArrayAndMatrixFastOld=function(w_$B,w_$h,w_$l){for(var w_$A=w_$B.length,w_$n=0;w_$n<w_$A;w_$n++){var w_$s=16*w_$n;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(w_$h,w_$s,w_$B[w_$n],w_$l,w_$s)}},w_$W._computeRootAnimationData=function(w_$B,w_$h,w_$l){for(var w_$A=0,w_$n=0,w_$s=0,w_$X=w_$B.length;w_$A<w_$X;w_$n+=w_$B[w_$A].keyframeWidth,w_$s+=16,w_$A++)laya.d3.utils.Utils3D.createAffineTransformationArray(w_$h[w_$n+0],w_$h[w_$n+1],w_$h[w_$n+2],w_$h[w_$n+3],w_$h[w_$n+4],w_$h[w_$n+5],w_$h[w_$n+6],w_$h[w_$n+7],w_$h[w_$n+8],w_$h[w_$n+9],w_$l,w_$s)},w_$W.transformVector3ArrayByQuat=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$l.elements,w_$X=w_$B[w_$h],w_$Z=w_$B[w_$h+1],w_$t=w_$B[w_$h+2],w_$P=w_$s[0],w_$G=w_$s[1],w_$T=w_$s[2],w_$b=w_$s[3],w_$Q=w_$b*w_$X+w_$G*w_$t-w_$T*w_$Z,w_$i=w_$b*w_$Z+w_$T*w_$X-w_$P*w_$t,w_$$=w_$b*w_$t+w_$P*w_$Z-w_$G*w_$X,w_$V=-w_$P*w_$X-w_$G*w_$Z-w_$T*w_$t;w_$A[w_$n]=w_$Q*w_$b+w_$V*-w_$P+w_$i*-w_$T-w_$$*-w_$G,w_$A[w_$n+1]=w_$i*w_$b+w_$V*-w_$G+w_$$*-w_$P-w_$Q*-w_$T,w_$A[w_$n+2]=w_$$*w_$b+w_$V*-w_$T+w_$Q*-w_$G-w_$i*-w_$P},w_$W.mulMatrixByArray=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X,w_$Z,w_$t,w_$P,w_$G;if(w_$n===w_$l){for(w_$l=w_$W._tempArray16_3,w_$X=0;w_$X<16;++w_$X)w_$l[w_$X]=w_$n[w_$s+w_$X];w_$A=0}for(w_$X=0;w_$X<4;w_$X++)w_$Z=w_$B[w_$h+w_$X],w_$t=w_$B[w_$h+w_$X+4],w_$P=w_$B[w_$h+w_$X+8],w_$G=w_$B[w_$h+w_$X+12],w_$n[w_$s+w_$X]=w_$Z*w_$l[w_$A+0]+w_$t*w_$l[w_$A+1]+w_$P*w_$l[w_$A+2]+w_$G*w_$l[w_$A+3],w_$n[w_$s+w_$X+4]=w_$Z*w_$l[w_$A+4]+w_$t*w_$l[w_$A+5]+w_$P*w_$l[w_$A+6]+w_$G*w_$l[w_$A+7],w_$n[w_$s+w_$X+8]=w_$Z*w_$l[w_$A+8]+w_$t*w_$l[w_$A+9]+w_$P*w_$l[w_$A+10]+w_$G*w_$l[w_$A+11],w_$n[w_$s+w_$X+12]=w_$Z*w_$l[w_$A+12]+w_$t*w_$l[w_$A+13]+w_$P*w_$l[w_$A+14]+w_$G*w_$l[w_$A+15]},w_$W.mulMatrixByArrayFast=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X,w_$Z,w_$t,w_$P,w_$G;for(w_$X=0;w_$X<4;w_$X++)w_$Z=w_$B[w_$h+w_$X],w_$t=w_$B[w_$h+w_$X+4],w_$P=w_$B[w_$h+w_$X+8],w_$G=w_$B[w_$h+w_$X+12],w_$n[w_$s+w_$X]=w_$Z*w_$l[w_$A+0]+w_$t*w_$l[w_$A+1]+w_$P*w_$l[w_$A+2]+w_$G*w_$l[w_$A+3],w_$n[w_$s+w_$X+4]=w_$Z*w_$l[w_$A+4]+w_$t*w_$l[w_$A+5]+w_$P*w_$l[w_$A+6]+w_$G*w_$l[w_$A+7],w_$n[w_$s+w_$X+8]=w_$Z*w_$l[w_$A+8]+w_$t*w_$l[w_$A+9]+w_$P*w_$l[w_$A+10]+w_$G*w_$l[w_$A+11],w_$n[w_$s+w_$X+12]=w_$Z*w_$l[w_$A+12]+w_$t*w_$l[w_$A+13]+w_$P*w_$l[w_$A+14]+w_$G*w_$l[w_$A+15]},w_$W.mulMatrixByArrayAndMatrixFast=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G=w_$l.elements,w_$T=w_$G[0],w_$b=w_$G[1],w_$Q=w_$G[2],w_$i=w_$G[3],w_$$=w_$G[4],w_$V=w_$G[5],w_$J=w_$G[6],w_$H=w_$G[7],w_$y=w_$G[8],w_$C=w_$G[9],w_$o=w_$G[10],w_$u=w_$G[11],w_$v=w_$G[12],w_$U=w_$G[13],w_$x=w_$G[14],w_$w=w_$G[15],w_$z=w_$h,w_$a=w_$h+4,w_$S=w_$h+8,w_$N=w_$h+12,w_$R=w_$n,w_$W=w_$n+4,w_$M=w_$n+8,w_$E=w_$n+12;for(w_$s=0;w_$s<4;w_$s++)w_$X=w_$B[w_$z+w_$s],w_$Z=w_$B[w_$a+w_$s],w_$t=w_$B[w_$S+w_$s],w_$P=w_$B[w_$N+w_$s],w_$A[w_$R+w_$s]=w_$X*w_$T+w_$Z*w_$b+w_$t*w_$Q+w_$P*w_$i,w_$A[w_$W+w_$s]=w_$X*w_$$+w_$Z*w_$V+w_$t*w_$J+w_$P*w_$H,w_$A[w_$M+w_$s]=w_$X*w_$y+w_$Z*w_$C+w_$t*w_$o+w_$P*w_$u,w_$A[w_$E+w_$s]=w_$X*w_$v+w_$Z*w_$U+w_$t*w_$x+w_$P*w_$w},w_$W.createAffineTransformationArray=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T){var w_$b=w_$A+w_$A,w_$Q=w_$n+w_$n,w_$i=w_$s+w_$s,w_$$=w_$A*w_$b,w_$V=w_$A*w_$Q,w_$J=w_$A*w_$i,w_$H=w_$n*w_$Q,w_$y=w_$n*w_$i,w_$C=w_$s*w_$i,w_$o=w_$X*w_$b,w_$u=w_$X*w_$Q,w_$v=w_$X*w_$i;w_$G[w_$T+0]=(1-(w_$H+w_$C))*w_$Z,w_$G[w_$T+1]=(w_$V+w_$v)*w_$Z,w_$G[w_$T+2]=(w_$J-w_$u)*w_$Z,w_$G[w_$T+3]=0,w_$G[w_$T+4]=(w_$V-w_$v)*w_$t,w_$G[w_$T+5]=(1-(w_$$+w_$C))*w_$t,w_$G[w_$T+6]=(w_$y+w_$o)*w_$t,w_$G[w_$T+7]=0,w_$G[w_$T+8]=(w_$J+w_$u)*w_$P,w_$G[w_$T+9]=(w_$y-w_$o)*w_$P,w_$G[w_$T+10]=(1-(w_$$+w_$H))*w_$P,w_$G[w_$T+11]=0,w_$G[w_$T+12]=w_$B,w_$G[w_$T+13]=w_$h,w_$G[w_$T+14]=w_$l,w_$G[w_$T+15]=1},w_$W.transformVector3ArrayToVector3ArrayCoordinate=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$W._tempArray4_0,w_$X=w_$B[w_$h+0],w_$Z=w_$B[w_$h+1],w_$t=w_$B[w_$h+2],w_$P=w_$l.elements;w_$s[0]=w_$X*w_$P[0]+w_$Z*w_$P[4]+w_$t*w_$P[8]+w_$P[12],w_$s[1]=w_$X*w_$P[1]+w_$Z*w_$P[5]+w_$t*w_$P[9]+w_$P[13],w_$s[2]=w_$X*w_$P[2]+w_$Z*w_$P[6]+w_$t*w_$P[10]+w_$P[14],w_$s[3]=1/(w_$X*w_$P[3]+w_$Z*w_$P[7]+w_$t*w_$P[11]+w_$P[15]),w_$A[w_$n+0]=w_$s[0]*w_$s[3],w_$A[w_$n+1]=w_$s[1]*w_$s[3],w_$A[w_$n+2]=w_$s[2]*w_$s[3]},w_$W.transformLightingMapTexcoordByUV0Array=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$l.elements;w_$A[w_$n+0]=w_$B[w_$h+0]*w_$s[0]+w_$s[2],w_$A[w_$n+1]=(w_$B[w_$h+1]-1)*w_$s[1]+w_$s[3]},w_$W.transformLightingMapTexcoordByUV1Array=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$l.elements;w_$A[w_$n+0]=w_$B[w_$h+0]*w_$s[0]+w_$s[2],w_$A[w_$n+1]=1+w_$B[w_$h+1]*w_$s[1]+w_$s[3]},w_$W.getURLVerion=function(w_$B){var w_$h=w_$B.indexOf("?");return 0<=w_$h?w_$B.substr(w_$h):null},w_$W._quaternionCreateFromYawPitchRollArray=function(w_$B,w_$h,w_$l,w_$A){var w_$n=.5*w_$l,w_$s=.5*w_$h,w_$X=.5*w_$B,w_$Z=Math.sin(w_$n),w_$t=Math.cos(w_$n),w_$P=Math.sin(w_$s),w_$G=Math.cos(w_$s),w_$T=Math.sin(w_$X),w_$b=Math.cos(w_$X);w_$A[0]=w_$b*w_$P*w_$t+w_$T*w_$G*w_$Z,w_$A[1]=w_$T*w_$G*w_$t-w_$b*w_$P*w_$Z,w_$A[2]=w_$b*w_$G*w_$Z-w_$T*w_$P*w_$t,w_$A[3]=w_$b*w_$G*w_$t+w_$T*w_$P*w_$Z},w_$W._createAffineTransformationArray=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$h[0],w_$s=w_$h[1],w_$X=w_$h[2],w_$Z=w_$h[3],w_$t=w_$n+w_$n,w_$P=w_$s+w_$s,w_$G=w_$X+w_$X,w_$T=w_$n*w_$t,w_$b=w_$n*w_$P,w_$Q=w_$n*w_$G,w_$i=w_$s*w_$P,w_$$=w_$s*w_$G,w_$V=w_$X*w_$G,w_$J=w_$Z*w_$t,w_$H=w_$Z*w_$P,w_$y=w_$Z*w_$G,w_$C=w_$l[0],w_$o=w_$l[1],w_$u=w_$l[2];w_$A[0]=(1-(w_$i+w_$V))*w_$C,w_$A[1]=(w_$b+w_$y)*w_$C,w_$A[2]=(w_$Q-w_$H)*w_$C,w_$A[3]=0,w_$A[4]=(w_$b-w_$y)*w_$o,w_$A[5]=(1-(w_$T+w_$V))*w_$o,w_$A[6]=(w_$$+w_$J)*w_$o,w_$A[7]=0,w_$A[8]=(w_$Q+w_$H)*w_$u,w_$A[9]=(w_$$-w_$J)*w_$u,w_$A[10]=(1-(w_$T+w_$i))*w_$u,w_$A[11]=0,w_$A[12]=w_$B[0],w_$A[13]=w_$B[1],w_$A[14]=w_$B[2],w_$A[15]=1},w_$W._mulMatrixArray=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P=w_$h.elements,w_$G=w_$P[0],w_$T=w_$P[1],w_$b=w_$P[2],w_$Q=w_$P[3],w_$i=w_$P[4],w_$$=w_$P[5],w_$V=w_$P[6],w_$J=w_$P[7],w_$H=w_$P[8],w_$y=w_$P[9],w_$C=w_$P[10],w_$o=w_$P[11],w_$u=w_$P[12],w_$v=w_$P[13],w_$U=w_$P[14],w_$x=w_$P[15],w_$w=w_$A,w_$z=w_$A+4,w_$a=w_$A+8,w_$S=w_$A+12;for(w_$n=0;w_$n<4;w_$n++)w_$s=w_$B[w_$n],w_$X=w_$B[w_$n+4],w_$Z=w_$B[w_$n+8],w_$t=w_$B[w_$n+12],w_$l[w_$w+w_$n]=w_$s*w_$G+w_$X*w_$T+w_$Z*w_$b+w_$t*w_$Q,w_$l[w_$z+w_$n]=w_$s*w_$i+w_$X*w_$$+w_$Z*w_$V+w_$t*w_$J,w_$l[w_$a+w_$n]=w_$s*w_$H+w_$X*w_$y+w_$Z*w_$C+w_$t*w_$o,w_$l[w_$S+w_$n]=w_$s*w_$u+w_$X*w_$v+w_$Z*w_$U+w_$t*w_$x},w_$W.getYawPitchRoll=function(w_$B,w_$h){w_$W.transformQuat(w_$Xh.ForwardRH,w_$B,w_$lh.TEMPVector31),w_$W.transformQuat(w_$Xh.Up,w_$B,w_$lh.TEMPVector32);var w_$l=w_$lh.TEMPVector32.elements;w_$W.angleTo(w_$Xh.ZERO,w_$lh.TEMPVector31,w_$lh.TEMPVector33);var w_$A=w_$lh.TEMPVector33.elements;w_$A[0]==Math.PI/2?(w_$A[1]=w_$W.arcTanAngle(w_$l[2],w_$l[0]),w_$A[2]=0):w_$A[0]==-Math.PI/2?(w_$A[1]=w_$W.arcTanAngle(-w_$l[2],-w_$l[0]),w_$A[2]=0):(w_$Bh.createRotationY(-w_$A[1],w_$lh.TEMPMatrix0),w_$Bh.createRotationX(-w_$A[0],w_$lh.TEMPMatrix1),w_$Xh.transformCoordinate(w_$lh.TEMPVector32,w_$lh.TEMPMatrix0,w_$lh.TEMPVector32),w_$Xh.transformCoordinate(w_$lh.TEMPVector32,w_$lh.TEMPMatrix1,w_$lh.TEMPVector32),w_$A[2]=w_$W.arcTanAngle(w_$l[1],-w_$l[0])),w_$A[1]<=-Math.PI&&(w_$A[1]=Math.PI),w_$A[2]<=-Math.PI&&(w_$A[2]=Math.PI),w_$A[1]>=Math.PI&&w_$A[2]>=Math.PI&&(w_$A[1]=0,w_$A[2]=0,w_$A[0]=Math.PI-w_$A[0]),w_$h[0]=w_$A[1],w_$h[1]=w_$A[0],w_$h[2]=w_$A[2]},w_$W.arcTanAngle=function(w_$B,w_$h){return 0==w_$B?1==w_$h?Math.PI/2:-Math.PI/2:0<w_$B?Math.atan(w_$h/w_$B):w_$B<0?0<w_$h?Math.atan(w_$h/w_$B)+Math.PI:Math.atan(w_$h/w_$B)-Math.PI:0},w_$W.angleTo=function(w_$B,w_$h,w_$l){w_$Xh.subtract(w_$h,w_$B,w_$lh.TEMPVector30),w_$Xh.normalize(w_$lh.TEMPVector30,w_$lh.TEMPVector30),w_$l.elements[0]=Math.asin(w_$lh.TEMPVector30.y),w_$l.elements[1]=w_$W.arcTanAngle(-w_$lh.TEMPVector30.z,-w_$lh.TEMPVector30.x)},w_$W.transformQuat=function(w_$B,w_$h,w_$l){var w_$A=w_$l.elements,w_$n=w_$B.elements,w_$s=w_$h,w_$X=w_$n[0],w_$Z=w_$n[1],w_$t=w_$n[2],w_$P=w_$s[0],w_$G=w_$s[1],w_$T=w_$s[2],w_$b=w_$s[3],w_$Q=w_$b*w_$X+w_$G*w_$t-w_$T*w_$Z,w_$i=w_$b*w_$Z+w_$T*w_$X-w_$P*w_$t,w_$$=w_$b*w_$t+w_$P*w_$Z-w_$G*w_$X,w_$V=-w_$P*w_$X-w_$G*w_$Z-w_$T*w_$t;w_$A[0]=w_$Q*w_$b+w_$V*-w_$P+w_$i*-w_$T-w_$$*-w_$G,w_$A[1]=w_$i*w_$b+w_$V*-w_$G+w_$$*-w_$P-w_$Q*-w_$T,w_$A[2]=w_$$*w_$b+w_$V*-w_$T+w_$Q*-w_$G-w_$i*-w_$P},w_$W.quaterionNormalize=function(w_$B,w_$h){var w_$l=w_$B[0],w_$A=w_$B[1],w_$n=w_$B[2],w_$s=w_$B[3],w_$X=w_$l*w_$l+w_$A*w_$A+w_$n*w_$n+w_$s*w_$s;0<w_$X&&(w_$X=1/Math.sqrt(w_$X),w_$h[0]=w_$l*w_$X,w_$h[1]=w_$A*w_$X,w_$h[2]=w_$n*w_$X,w_$h[3]=w_$s*w_$X)},w_$W.matrix4x4MultiplyFFF=function(w_$B,w_$h,w_$l){var w_$A,w_$n,w_$s,w_$X,w_$Z;if(w_$l===w_$h)for(w_$h=new Float32Array(16),w_$A=0;w_$A<16;++w_$A)w_$h[w_$A]=w_$l[w_$A];for(w_$A=0;w_$A<4;w_$A++)w_$n=w_$B[w_$A],w_$s=w_$B[w_$A+4],w_$X=w_$B[w_$A+8],w_$Z=w_$B[w_$A+12],w_$l[w_$A]=w_$n*w_$h[0]+w_$s*w_$h[1]+w_$X*w_$h[2]+w_$Z*w_$h[3],w_$l[w_$A+4]=w_$n*w_$h[4]+w_$s*w_$h[5]+w_$X*w_$h[6]+w_$Z*w_$h[7],w_$l[w_$A+8]=w_$n*w_$h[8]+w_$s*w_$h[9]+w_$X*w_$h[10]+w_$Z*w_$h[11],w_$l[w_$A+12]=w_$n*w_$h[12]+w_$s*w_$h[13]+w_$X*w_$h[14]+w_$Z*w_$h[15]},w_$W.matrix4x4MultiplyMFM=function(w_$B,w_$h,w_$l){w_$W.matrix4x4MultiplyFFF(w_$B.elements,w_$h,w_$l.elements)},w_$T(w_$W,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new w_$Xh},"_tempVector3_1",function(){return this._tempVector3_1=new w_$Xh},"_tempVector3_2",function(){return this._tempVector3_2=new w_$Xh},"_tempVector3_3",function(){return this._tempVector3_3=new w_$Xh},"_tempVector3_4",function(){return this._tempVector3_4=new w_$Xh},"_tempVector3_5",function(){return this._tempVector3_5=new w_$Xh},"_tempVector3_6",function(){return this._tempVector3_6=new w_$Xh},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),w_$W}(),w_$Jh=function(){function w_$N(){}return w_$Q(w_$N,"Laya3D"),w_$N._cancelLoadByUrl=function(w_$B){w_$o.loader.cancelLoadByUrl(w_$B),w_$N._innerFirstLevelLoaderManager.cancelLoadByUrl(w_$B),w_$N._innerSecondLevelLoaderManager.cancelLoadByUrl(w_$B),w_$N._innerThirdLevelLoaderManager.cancelLoadByUrl(w_$B),w_$N._innerFourthLevelLoaderManager.cancelLoadByUrl(w_$B)},w_$N._changeWebGLSize=function(w_$B,w_$h){w_$S.onStageResize(w_$B,w_$h),w_$I.clientWidth=w_$B,w_$I.clientHeight=w_$h},w_$N.__init__=function(){var w_$B=w_$h.createMap;w_$B.lh=[w_$Eh,"SPRITE3DHIERARCHY"],w_$B.ls=[w_$Mh,"SPRITE3DHIERARCHY"],w_$B.lm=[w_$ph,"MESH"],w_$B.lmat=[w_$gh,"MATERIAL"],w_$B.jpg=[w_$ch,"nativeimage"],w_$B.jpeg=[w_$ch,"nativeimage"],w_$B.png=[w_$ch,"nativeimage"],w_$B.pkm=[w_$ch,"arraybuffer"],w_$B.raw=[w_$kh,"arraybuffer"],w_$B.mipmaps=[w_$kh,"arraybuffer"],w_$J.parserMap.SPRITE3DHIERARCHY=w_$N._loadHierarchy,w_$J.parserMap.MESH=w_$N._loadMesh,w_$J.parserMap.MATERIAL=w_$N._loadMaterial,w_$J.parserMap.TEXTURECUBE=w_$N._loadTextureCube,w_$J.parserMap.TERRAIN=w_$N._loadTerrain,w_$N._innerFirstLevelLoaderManager.on("error",null,w_$N._eventLoadManagerError),w_$N._innerSecondLevelLoaderManager.on("error",null,w_$N._eventLoadManagerError),w_$N._innerThirdLevelLoaderManager.on("error",null,w_$N._eventLoadManagerError),w_$N._innerFourthLevelLoaderManager.on("error",null,w_$N._eventLoadManagerError)},w_$N.READ_BLOCK=function(){return w_$N._readData.pos+=4,!0},w_$N.READ_DATA=function(){return w_$N._DATA.offset=w_$N._readData.getUint32(),w_$N._DATA.size=w_$N._readData.getUint32(),!0},w_$N.READ_STRINGS=function(){var w_$B=[],w_$h={offset:0,size:0};w_$h.offset=w_$N._readData.getUint16(),w_$h.size=w_$N._readData.getUint16();w_$N._readData.pos;w_$N._readData.pos=w_$h.offset+w_$N._DATA.offset;for(var w_$l=0;w_$l<w_$h.size;w_$l++){var w_$A=w_$N._readData.readUTFString();-1===w_$A.lastIndexOf(".lmat")&&-1===w_$A.lastIndexOf(".lpbr")||w_$B.push(w_$A)}return w_$B},w_$N.formatRelativePath=function(w_$B,w_$h){var w_$l;if("."===w_$h.charAt(0)){for(var w_$A=(w_$B+w_$h).split("/"),w_$n=0,w_$s=w_$A.length;w_$n<w_$s;w_$n++)if(".."==w_$A[w_$n]){var w_$X=w_$n-1;0<w_$X&&".."!==w_$A[w_$X]&&(w_$A.splice(w_$X,2),w_$n-=2)}w_$l=w_$A.join("/")}else w_$l=w_$B+w_$h;return null!=w_$a.customFormat&&(w_$l=w_$a.customFormat(w_$l,null)),w_$l},w_$N._eventLoadManagerError=function(w_$B){w_$o.loader.event("error",w_$B)},w_$N._addHierarchyInnerUrls=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X=w_$N.formatRelativePath(w_$A,w_$n);w_$l&&(w_$X+=w_$l),w_$B.push({url:w_$X,clas:w_$s}),w_$h[w_$n]=w_$X},w_$N._getSprite3DHierarchyInnerUrls=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){var w_$Z,w_$t=0,w_$P=0;switch(w_$B.type){case"Scene":var w_$G=w_$B.customProps.lightmaps;for(w_$t=0,w_$P=w_$G.length;w_$t<w_$P;w_$t++){var w_$T=w_$G[w_$t].replace(".exr",".png");w_$N._addHierarchyInnerUrls(w_$A,w_$n,w_$s,w_$X,w_$T,w_$ch)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var w_$b;if(w_$B.instanceParams)(w_$b=w_$B.instanceParams.loadPath)&&w_$N._addHierarchyInnerUrls(w_$h,w_$n,w_$s,w_$X,w_$b,w_$ph);else{(w_$b=(w_$Z=w_$B.customProps).meshPath)&&w_$N._addHierarchyInnerUrls(w_$h,w_$n,w_$s,w_$X,w_$b,w_$ph);var w_$Q=w_$Z.materials;if(w_$Q)for(w_$t=0,w_$P=w_$Q.length;w_$t<w_$P;w_$t++){for(var w_$i=w_$Q[w_$t],w_$$=w_$i.type.split("."),w_$V=w_$R.window,w_$J=0,w_$H=w_$$.length;w_$J<w_$H;++w_$J){w_$V=w_$V[this.clasPaths[w_$J]]}if("function"!=typeof w_$V)throw"_getSprite3DHierarchyInnerUrls 错误: "+w_$i.type+" 不是类";w_$N._addHierarchyInnerUrls(w_$l,w_$n,w_$s,w_$X,w_$i.path,w_$V)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var w_$y=(w_$Z=w_$B.customProps).meshPath;w_$y&&w_$N._addHierarchyInnerUrls(w_$h,w_$n,w_$s,w_$X,w_$y,w_$ph);var w_$C=w_$Z.material;if(w_$C){w_$$=w_$C.type.split("."),w_$V=w_$R.window;for(w_$J=0,w_$H=w_$$.length;w_$J<w_$H;++w_$J){w_$V=w_$V[this.clasPaths[w_$J]]}w_$N._addHierarchyInnerUrls(w_$l,w_$n,w_$s,w_$X,w_$C.path,w_$V)}else{var w_$o=w_$Z.materialPath;if(w_$o)w_$N._addHierarchyInnerUrls(w_$l,w_$n,w_$s,w_$X,w_$o,ShurikenParticleMaterial);else{var w_$u=w_$Z.texturePath;w_$u&&w_$N._addHierarchyInnerUrls(w_$A,w_$n,w_$s,w_$X,w_$u,w_$ch)}}break;case"Terrain":w_$N._addHierarchyInnerUrls(w_$A,w_$n,w_$s,w_$X,w_$B.customProps.dataPath,TerrainRes)}var w_$v=w_$B.components;for(var w_$U in w_$v){var w_$x=w_$v[w_$U];switch(w_$U){case"Animator":var w_$w=w_$x.avatarPath;if(w_$w)w_$N._addHierarchyInnerUrls(w_$A,w_$n,w_$s,w_$X,w_$w,Avatar);else{var w_$z=w_$x.avatar;w_$z&&w_$N._addHierarchyInnerUrls(w_$A,w_$n,w_$s,w_$X,w_$z.path,Avatar)}var w_$a=w_$x.clipPaths;for(w_$t=0,w_$P=w_$a.length;w_$t<w_$P;w_$t++)w_$N._addHierarchyInnerUrls(w_$A,w_$n,w_$s,w_$X,w_$a[w_$t],AnimationClip)}}var w_$S=w_$B.child;for(w_$t=0,w_$P=w_$S.length;w_$t<w_$P;w_$t++)w_$N._getSprite3DHierarchyInnerUrls(w_$S[w_$t],w_$h,w_$l,w_$A,w_$n,w_$s,w_$X)},w_$N._loadHierarchy=function(w_$B){w_$B.on("loaded",null,w_$N._onHierarchylhLoaded,[w_$B,w_$B._class._getGroup()]),w_$B.load(w_$B.url,"json",!1,null,!0)},w_$N._onHierarchylhLoaded=function(w_$B,w_$h,w_$l){if(w_$B._class.destroyed)w_$B.endLoad();else{var w_$A=w_$B.url,w_$n=w_$Vh.getURLVerion(w_$A),w_$s=w_$a.getPath(w_$A),w_$X=[],w_$Z=[],w_$t=[],w_$P={};w_$N._getSprite3DHierarchyInnerUrls(w_$l,w_$X,w_$Z,w_$t,w_$P,w_$n,w_$s);var w_$G=w_$X.length+w_$Z.length+w_$t.length,w_$T=w_$G+1,w_$b=1/w_$T;if(w_$N._onProcessChange(w_$B,0,w_$b,1),0<w_$t.length){var w_$Q=w_$G/w_$T,w_$i=w_$z.create(null,w_$N._onProcessChange,[w_$B,w_$b,w_$Q],!1);w_$N._innerFourthLevelLoaderManager.create(w_$t,w_$z.create(null,w_$N._onHierarchyInnerForthLevResouLoaded,[w_$B,w_$h,w_$i,w_$l,w_$P,w_$X,w_$Z,w_$b+w_$Q*w_$t.length,w_$Q]),w_$i,null,null,1,!0,w_$h)}else w_$N._onHierarchyInnerForthLevResouLoaded(w_$B,w_$h,null,w_$l,w_$P,w_$X,w_$Z,w_$b,w_$Q)}},w_$N._onHierarchyInnerForthLevResouLoaded=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){if(w_$B._class.destroyed)w_$B.endLoad();else if(w_$l&&w_$l.recover(),0<w_$X.length){var w_$P=w_$z.create(null,w_$N._onProcessChange,[w_$B,w_$Z,w_$t],!1);w_$N._innerSecondLevelLoaderManager.create(w_$X,w_$z.create(null,w_$N._onHierarchyInnerSecondLevResouLoaded,[w_$B,w_$h,w_$P,w_$A,w_$n,w_$s,w_$Z+w_$t*w_$X.length,w_$t]),w_$l,null,null,1,!0,w_$h)}else w_$N._onHierarchyInnerSecondLevResouLoaded(w_$B,w_$h,null,w_$A,w_$n,w_$s,w_$Z,w_$t)},w_$N._onHierarchyInnerSecondLevResouLoaded=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z){if(w_$B._class.destroyed)w_$B.endLoad();else if(w_$l&&w_$l.recover(),0<w_$s.length){var w_$t=w_$z.create(null,w_$N._onProcessChange,[w_$B,w_$X,w_$Z],!1);w_$N._innerFirstLevelLoaderManager.create(w_$s,w_$z.create(null,w_$N._onHierarchyInnerFirstLevResouLoaded,[w_$B,w_$t,w_$A,w_$n]),w_$l,null,null,1,!0,w_$h)}else w_$N._onHierarchyInnerFirstLevResouLoaded(w_$B,null,w_$A,w_$n)},w_$N._onHierarchyInnerFirstLevResouLoaded=function(w_$B,w_$h,w_$l,w_$A){w_$h&&w_$h.recover(),w_$B.endLoad([w_$l,w_$A])},w_$N._loadTerrain=function(w_$B){w_$B.on("loaded",null,w_$N._onTerrainLtLoaded,[w_$B,w_$B._class._getGroup()]),w_$B.load(w_$B.url,"json",!1,null,!0)},w_$N._onTerrainLtLoaded=function(w_$B,w_$h,w_$l){if(w_$B._class.destroyed)w_$B.endLoad();else{var w_$A,w_$n,w_$s=w_$B.url,w_$X=w_$Vh.getURLVerion(w_$s),w_$Z=w_$a.getPath(w_$s),w_$t=[],w_$P={},w_$G=0,w_$T=0,w_$b=w_$l.heightData;w_$A=w_$b.url,w_$n=w_$N.formatRelativePath(w_$Z,w_$A),w_$X&&(w_$n+=w_$X),w_$A=w_$P[w_$A]=w_$n;var w_$Q=w_$l.detailTexture;for(w_$G=0,w_$T=w_$Q.length;w_$G<w_$T;w_$G++)w_$t.push({url:w_$Q[w_$G].diffuse});var w_$i=w_$l.normalMap;for(w_$G=0,w_$T=w_$i.length;w_$G<w_$T;w_$G++)w_$t.push({url:w_$i[w_$G]});var w_$$=w_$l.alphaMap;for(w_$G=0,w_$T=w_$$.length;w_$G<w_$T;w_$G++)w_$t.push({url:w_$$[w_$G],params:[!1,!1,6408,!0]});for(w_$G=0,w_$T=w_$t.length;w_$G<w_$T;w_$G++){var w_$V=w_$t[w_$G].url;w_$n=w_$N.formatRelativePath(w_$Z,w_$V),w_$X&&(w_$n+=w_$X),w_$t[w_$G].url=w_$n,w_$P[w_$V]=w_$n}var w_$J=w_$t.length,w_$H=w_$J+2,w_$y=1/w_$H;w_$N._onProcessChange(w_$B,0,w_$y,1);var w_$C={heightMapLoaded:!1,texturesLoaded:!1},w_$o=w_$z.create(null,w_$N._onProcessChange,[w_$B,w_$y,w_$y],!1);w_$N._innerFourthLevelLoaderManager.create(w_$A,w_$z.create(null,w_$N._onTerrainHeightMapLoaded,[w_$B,w_$o,w_$l,w_$P,w_$C]),w_$o,null,[w_$b.numX,w_$b.numZ,w_$b.bitType,w_$b.value],1,!0,w_$h);var w_$u=w_$z.create(null,w_$N._onProcessChange,[w_$B,2*w_$y,w_$J/w_$H],!1);w_$N._innerFourthLevelLoaderManager.create(w_$t,w_$z.create(null,w_$N._onTerrainTexturesLoaded,[w_$B,w_$u,w_$l,w_$P,w_$C]),w_$u,null,null,1,!0,w_$h)}},w_$N._onTerrainHeightMapLoaded=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$n.heightMapLoaded=!0,w_$n.texturesLoaded&&(w_$B.endLoad([w_$l,w_$A]),w_$h.recover())},w_$N._onTerrainTexturesLoaded=function(w_$B,w_$h,w_$l,w_$A,w_$n){w_$n.texturesLoaded=!0,w_$n.heightMapLoaded&&(w_$B.endLoad([w_$l,w_$A]),w_$h.recover())},w_$N._loadMesh=function(w_$B){w_$B.on("loaded",null,w_$N._onMeshLmLoaded,[w_$B,w_$B._class._getGroup()]),w_$B.load(w_$B.url,"arraybuffer",!1,null,!0)},w_$N._onMeshLmLoaded=function(w_$B,w_$h,w_$l){if(w_$B._class.destroyed)w_$B.endLoad();else{var w_$A,w_$n,w_$s,w_$X=w_$B.url,w_$Z=w_$Vh.getURLVerion(w_$X),w_$t=w_$a.getPath(w_$X),w_$P={},w_$G=0,w_$T=0;switch((w_$N._readData=new w_$u(w_$l)).pos=0,w_$N._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var w_$b=w_$N._readData.getUint32();w_$N._readData.pos=w_$N._readData.pos+4,w_$T=w_$N._readData.getUint16(),w_$N._readData.pos=w_$N._readData.pos+8*w_$T;var w_$Q=w_$N._readData.getUint32();for(w_$T=w_$N._readData.getUint16(),w_$N._readData.pos=w_$b+w_$Q,w_$A=[],w_$G=0;w_$G<w_$T;w_$G++){var w_$i=w_$N._readData.readUTFString();-1!==w_$i.lastIndexOf(".lmat")&&w_$A.push(w_$i)}break;default:for(w_$N.READ_BLOCK(),w_$G=0;w_$G<2;w_$G++){var w_$$=w_$N._readData.getUint16(),w_$V=w_$N._strings[w_$$],w_$J=w_$N["READ_"+w_$V];if(null==w_$J)throw new Error("model file err,no this function:"+w_$$+" "+w_$V);1===w_$G?w_$A=w_$J.call():w_$J.call()}}for(w_$G=0,w_$s=w_$A.length;w_$G<w_$s;w_$G++){var w_$H=w_$A[w_$G];w_$n=w_$N.formatRelativePath(w_$t,w_$H),w_$Z&&(w_$n+=w_$Z),w_$A[w_$G]=w_$n,w_$P[w_$H]=w_$n}if(0<w_$A.length){w_$N._onProcessChange(w_$B,0,.5,1);var w_$y=w_$z.create(null,w_$N._onProcessChange,[w_$B,.5,.5],!1);w_$N._innerSecondLevelLoaderManager.create(w_$A,w_$z.create(null,w_$N._onMeshMateialLoaded,[w_$B,w_$y,w_$l,w_$P]),w_$y,null,null,1,!0,w_$h)}else w_$B.endLoad([w_$l,w_$P])}},w_$N._onMeshMateialLoaded=function(w_$B,w_$h,w_$l,w_$A){w_$B.endLoad([w_$l,w_$A]),w_$h.recover()},w_$N._getMaterialTexturePath=function(w_$B,w_$h,w_$l){var w_$A=w_$B.length-4;return w_$B.indexOf(".dds")!=w_$A&&w_$B.indexOf(".tga")!=w_$A&&w_$B.indexOf(".exr")!=w_$A&&w_$B.indexOf(".DDS")!=w_$A&&w_$B.indexOf(".TGA")!=w_$A&&w_$B.indexOf(".EXR")!=w_$A||(w_$B=w_$B.substr(0,w_$A)+".png"),w_$B=w_$N.formatRelativePath(w_$l,w_$B),w_$h&&(w_$B+=w_$h),w_$B},w_$N._loadMaterial=function(w_$B){w_$B.on("loaded",null,w_$N._onMaterilLmatLoaded,[w_$B,w_$B._class._getGroup()]),w_$B.load(w_$B.url,"json",!1,null,!0)},w_$N._onMaterilLmatLoaded=function(w_$B,w_$h,w_$l){if(w_$B._class.destroyed)w_$B.endLoad();else{var w_$A,w_$n=w_$B.url,w_$s=w_$Vh.getURLVerion(w_$n),w_$X=w_$a.getPath(w_$n),w_$Z=[],w_$t={},w_$P=w_$l.customProps,w_$G=w_$l.version;if(w_$G)switch(w_$G){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var w_$T=w_$l.props.textures,w_$b=0,w_$Q=w_$T.length;w_$b<w_$Q;w_$b++){var w_$i=w_$T[w_$b],w_$$=w_$i.path;if(w_$$){var w_$V=w_$$.length-4;w_$$.indexOf(".exr")!=w_$V&&w_$$.indexOf(".EXR")!=w_$V||(w_$$=w_$$.substr(0,w_$V)+".png"),w_$A=w_$N.formatRelativePath(w_$X,w_$$),w_$s&&(w_$A+=w_$s),w_$Z.push({url:w_$A,params:w_$i.params}),w_$t[w_$$]=w_$A}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var w_$J=w_$P.diffuseTexture.texture2D;if(w_$J&&(w_$A=w_$N._getMaterialTexturePath(w_$J,w_$s,w_$X),w_$Z.push(w_$A),w_$t[w_$J]=w_$A),w_$P.normalTexture){var w_$H=w_$P.normalTexture.texture2D;w_$H&&(w_$A=w_$N._getMaterialTexturePath(w_$H,w_$s,w_$X),w_$Z.push(w_$A),w_$t[w_$H]=w_$A)}if(w_$P.specularTexture){var w_$y=w_$P.specularTexture.texture2D;w_$y&&(w_$A=w_$N._getMaterialTexturePath(w_$y,w_$s,w_$X),w_$Z.push(w_$A),w_$t[w_$y]=w_$A)}if(w_$P.emissiveTexture){var w_$C=w_$P.emissiveTexture.texture2D;w_$C&&(w_$A=w_$N._getMaterialTexturePath(w_$C,w_$s,w_$X),w_$Z.push(w_$A),w_$t[w_$C]=w_$A)}if(w_$P.ambientTexture){var w_$o=w_$P.ambientTexture.texture2D;w_$o&&(w_$A=w_$N._getMaterialTexturePath(w_$o,w_$s,w_$X),w_$Z.push(w_$A),w_$t[w_$o]=w_$A)}if(w_$P.reflectTexture){var w_$u=w_$P.reflectTexture.texture2D;w_$u&&(w_$A=w_$N._getMaterialTexturePath(w_$u,w_$s,w_$X),w_$Z.push(w_$A),w_$t[w_$u]=w_$A)}}var w_$v=w_$Z.length,w_$U=w_$v+1,w_$x=1/w_$U;if(w_$N._onProcessChange(w_$B,0,w_$x,1),0<w_$v){var w_$w=w_$z.create(null,w_$N._onProcessChange,[w_$B,w_$x,w_$v/w_$U],!1);w_$N._innerFourthLevelLoaderManager.create(w_$Z,w_$z.create(null,w_$N._onMateialTexturesLoaded,[w_$B,w_$w,w_$l,w_$t]),w_$w,w_$ch,null,1,!0,w_$h)}else w_$N._onMateialTexturesLoaded(w_$B,null,w_$l,null)}},w_$N._onMateialTexturesLoaded=function(w_$B,w_$h,w_$l,w_$A){w_$B.endLoad([w_$l,w_$A]),w_$h&&w_$h.recover()},w_$N._loadTextureCube=function(w_$B){w_$B.on("loaded",null,w_$N._onTextureCubeLtcLoaded,[w_$B]),w_$B.load(w_$B.url,"json",!1,null,!0)},w_$N._onTextureCubeLtcLoaded=function(w_$B,w_$h){if(w_$B._class.destroyed)w_$B.endLoad();else{var w_$l=w_$a.getPath(w_$B.url),w_$A=[w_$N.formatRelativePath(w_$l,w_$h.px),w_$N.formatRelativePath(w_$l,w_$h.nx),w_$N.formatRelativePath(w_$l,w_$h.py),w_$N.formatRelativePath(w_$l,w_$h.ny),w_$N.formatRelativePath(w_$l,w_$h.pz),w_$N.formatRelativePath(w_$l,w_$h.nz)];w_$N._onProcessChange(w_$B,0,1/7,1);var w_$n=w_$z.create(null,w_$N._onProcessChange,[w_$B,1/7,6/7],!1);w_$N._innerFourthLevelLoaderManager.load(w_$A,w_$z.create(null,w_$N._onTextureCubeImagesLoaded,[w_$B,w_$A,w_$n]),w_$n,"nativeimage")}},w_$N._onTextureCubeImagesLoaded=function(w_$B,w_$h,w_$l){var w_$A=[];w_$A.length=6;for(var w_$n=0;w_$n<6;w_$n++){var w_$s=w_$h[w_$n];w_$A[w_$n]=w_$J.getRes(w_$s),w_$J.clearRes(w_$s)}w_$B.endLoad(w_$A),w_$l.recover()},w_$N._onProcessChange=function(w_$B,w_$h,w_$l,w_$A){(w_$A=w_$h+w_$A*w_$l)<1&&w_$B.event("progress",w_$A)},w_$N.init=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){if(void 0===w_$l&&(w_$l=!1),void 0===w_$A&&(w_$A=!1),void 0===w_$n&&(w_$n=!0),void 0===w_$s&&(w_$s=!0),w_$H.update3DLoop=function(){},w_$H.cancelLoadByUrl=function(w_$B){w_$N._cancelLoadByUrl(w_$B)},w_$t.isAntialias=w_$l,w_$t.isAlpha=w_$A,w_$t.premultipliedAlpha=w_$n,w_$t.isStencil=w_$s,!w_$S.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");w_$H.changeWebGLSize=w_$N._changeWebGLSize,w_$$.is3DMode=!0,w_$o.init(w_$B,w_$h),w_$W.__init__(),w_$Th.__init__(),w_$fh.__init__(),w_$O.__init__(),w_$N.__init__(),w_$X.maxTextureCount=2,(w_$N.debugMode||w_$L.debugMode)&&(w_$N._debugPhasorSprite=new w_$Y)},w_$N.HIERARCHY="SPRITE3DHIERARCHY",w_$N.MESH="MESH",w_$N.MATERIAL="MATERIAL",w_$N.PBRMATERIAL="PBRMTL",w_$N.TEXTURECUBE="TEXTURECUBE",w_$N.TERRAIN="TERRAIN",w_$N._readData=null,w_$N._debugPhasorSprite=null,w_$N.debugMode=!1,w_$T(w_$N,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new w_$h},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new w_$h},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new w_$h},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new w_$h}]),w_$N}(),w_$Hh=function(w_$B){function w_$n(w_$B){w_$n.__super.call(this),this._owner=w_$B,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}w_$Q(w_$n,"laya.d3.animation.AnimationTransform3D",w_$s);var w_$h=w_$n.prototype;return w_$h._getlocalMatrix=function(){return this._localUpdate&&(w_$Vh._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},w_$h._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._onWorldTransform()}},w_$h._setWorldMatrixAndUpdate=function(w_$B){if(this._worldMatrix=w_$B,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var w_$h=this._getlocalMatrix(),w_$l=0;w_$l<16;++w_$l)this._worldMatrix[w_$l]=w_$h[w_$l];else w_$Vh.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},w_$h._setWorldMatrixNoUpdate=function(w_$B){this._worldMatrix=w_$B},w_$h._setWorldMatrixIgnoreUpdate=function(w_$B){this._worldMatrix=w_$B,this._worldUpdate=!1},w_$h.getLocalPosition=function(){return this._localPosition},w_$h.setLocalPosition=function(w_$B){if(this._parent)this._localPosition=w_$B,this._localUpdate=!0,this._onWorldTransform();else{var w_$h=this._entity.owner._transform,w_$l=this._entity.localPosition,w_$A=w_$l.elements;w_$A[0]=w_$B[0],w_$A[1]=w_$B[1],w_$A[2]=w_$B[2],w_$h.localPosition=w_$l}},w_$h.getLocalRotation=function(){if(this._localQuaternionUpdate){var w_$B=this._localRotationEuler;w_$Vh._quaternionCreateFromYawPitchRollArray(w_$B[1]/w_$n._angleToRandin,w_$B[0]/w_$n._angleToRandin,w_$B[2]/w_$n._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},w_$h.setLocalRotation=function(w_$B){if(this._parent)this._localRotation=w_$B,w_$Vh.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var w_$h=this._entity.owner._transform,w_$l=this._entity.localRotation,w_$A=w_$l.elements;w_$A[0]=w_$B[0],w_$A[1]=w_$B[1],w_$A[2]=w_$B[2],w_$A[3]=w_$B[3],w_$h.localRotation=w_$l}},w_$h.getLocalScale=function(){return this._localScale},w_$h.setLocalScale=function(w_$B){if(this._parent)this._localScale=w_$B,this._localUpdate=!0,this._onWorldTransform();else{var w_$h=this._entity.owner._transform,w_$l=this._entity.localScale,w_$A=w_$l.elements;w_$A[0]=w_$B[0],w_$A[1]=w_$B[1],w_$A[2]=w_$B[2],w_$h.localScale=w_$l}},w_$h.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){w_$Vh.getYawPitchRoll(this._localRotation,w_$n._tempVector3);var w_$B=w_$n._tempVector3,w_$h=this._localRotationEuler;w_$h[0]=w_$B[1]*w_$n._angleToRandin,w_$h[1]=w_$B[0]*w_$n._angleToRandin,w_$h[2]=w_$B[2]*w_$n._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},w_$h.setLocalRotationEuler=function(w_$B){if(this._parent)w_$Vh._quaternionCreateFromYawPitchRollArray(w_$B[1]/w_$n._angleToRandin,w_$B[0]/w_$n._angleToRandin,w_$B[2]/w_$n._angleToRandin,this._localRotation),this._localRotationEuler=w_$B,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var w_$h=this._entity.owner._transform,w_$l=this._entity.localRotationEuler,w_$A=w_$l.elements;w_$A[0]=w_$B[0],w_$A[1]=w_$B[1],w_$A[2]=w_$B[2],w_$h.localRotationEuler=w_$l}},w_$h.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)w_$Vh.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var w_$B=this._getlocalMatrix(),w_$h=0;w_$h<16;++w_$h)this._worldMatrix[w_$h]=w_$B[w_$h];this._worldUpdate=!1}return this._worldMatrix},w_$h.setParent=function(w_$B){if(this._parent!==w_$B){if(this._parent){var w_$h=this._parent._childs,w_$l=w_$h.indexOf(this);w_$h.splice(w_$l,1)}w_$B&&(w_$B._childs.push(this),w_$B&&this._onWorldTransform()),this._parent=w_$B}},w_$T(w_$n,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),w_$n}(),w_$yh=function(w_$B){function w_$h(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,w_$h.__super.call(this),this._destroyed=!1,this._id=w_$h._uniqueIDCounter,w_$h._uniqueIDCounter++}w_$Q(w_$h,"laya.d3.component.Component3D",w_$s);var w_$l=w_$h.prototype;return w_$o.imps(w_$l,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),w_$l._initialize=function(w_$B){this._owner=w_$B,this._enable=!0,this.started=!1,this._load(w_$B)},w_$l._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},w_$l._load=function(w_$B){},w_$l._start=function(w_$B){},w_$l._update=function(w_$B){},w_$l._lateUpdate=function(w_$B){},w_$l._preRenderUpdate=function(w_$B){},w_$l._postRenderUpdate=function(w_$B){},w_$l._unload=function(w_$B){this.offAll()},w_$l._cloneTo=function(w_$B){},w_$i(0,w_$l,"id",function(){return this._id}),w_$i(0,w_$l,"destroyed",function(){return this._destroyed}),w_$i(0,w_$l,"owner",function(){return this._owner}),w_$i(0,w_$l,"enable",function(){return this._enable},function(w_$B){this._enable!==w_$B&&(this._enable=w_$B,this.event("enablechanged",this._enable))}),w_$i(0,w_$l,"isSingleton",function(){return w_$h._isSingleton}),w_$h._isSingleton=!0,w_$h._uniqueIDCounter=1,w_$h}(),w_$Ch=function(w_$B){function w_$h(){this._destroyed=!1,w_$h.__super.call(this),this._destroyed=!1}w_$Q(w_$h,"laya.d3.core.GeometryFilter",w_$s);var w_$l=w_$h.prototype;return w_$o.imps(w_$l,{"laya.resource.IDestroy":!0}),w_$l._destroy=function(){this.offAll(),this._destroyed=!0},w_$i(0,w_$l,"_isAsyncLoaded",function(){return!0}),w_$i(0,w_$l,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),w_$i(0,w_$l,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),w_$i(0,w_$l,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),w_$i(0,w_$l,"destroyed",function(){return this._destroyed}),w_$h}(),w_$oh=function(w_$B){function w_$A(w_$B){w_$A.__super.call(this),this._id=++w_$A._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new w_$LB(new w_$Xh,new w_$Xh),this._boundingBoxCenter=new w_$Xh,this._boundingSphere=new w_$qB(new w_$Xh,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=w_$B,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}w_$Q(w_$A,"laya.d3.core.render.BaseRender",w_$s);var w_$h=w_$A.prototype;return w_$o.imps(w_$h,{"laya.resource.IDestroy":!0}),w_$h._changeMaterialReference=function(w_$B,w_$h){w_$B&&w_$B._removeReference(),w_$h._addReference()},w_$h._getInstanceMaterial=function(w_$B,w_$h){var w_$l=new w_$B.constructor;return w_$B.cloneTo(w_$l),w_$l.name=w_$l.name+"(Instance)",this._materialsInstance[w_$h]=!0,this._changeMaterialReference(this._materials[w_$h],w_$l),this._materials[w_$h]=w_$l},w_$h._setShaderValuelightMap=function(w_$B){this._setShaderValueTexture(3,w_$B)},w_$h._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},w_$h._renderRenderableBoundBox=function(){var w_$B=w_$Jh._debugPhasorSprite,w_$h=this.boundingBox,w_$l=w_$A._tempBoundBoxCorners;w_$h.getCorners(w_$l),w_$B.line(w_$l[0],w_$A._greenColor,w_$l[1],w_$A._greenColor),w_$B.line(w_$l[2],w_$A._greenColor,w_$l[3],w_$A._greenColor),w_$B.line(w_$l[4],w_$A._greenColor,w_$l[5],w_$A._greenColor),w_$B.line(w_$l[6],w_$A._greenColor,w_$l[7],w_$A._greenColor),w_$B.line(w_$l[0],w_$A._greenColor,w_$l[3],w_$A._greenColor),w_$B.line(w_$l[1],w_$A._greenColor,w_$l[2],w_$A._greenColor),w_$B.line(w_$l[2],w_$A._greenColor,w_$l[6],w_$A._greenColor),w_$B.line(w_$l[3],w_$A._greenColor,w_$l[7],w_$A._greenColor),w_$B.line(w_$l[0],w_$A._greenColor,w_$l[4],w_$A._greenColor),w_$B.line(w_$l[1],w_$A._greenColor,w_$l[5],w_$A._greenColor),w_$B.line(w_$l[4],w_$A._greenColor,w_$l[7],w_$A._greenColor),w_$B.line(w_$l[5],w_$A._greenColor,w_$l[6],w_$A._greenColor)},w_$h._calculateBoundingSphere=function(){throw"BaseRender: must override it."},w_$h._calculateBoundingBox=function(){throw"BaseRender: must override it."},w_$h._setShaderValueTexture=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h)},w_$h._setShaderValueMatrix4x4=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h?w_$h.elements:null)},w_$h._setShaderValueColor=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h?w_$h.elements:null)},w_$h._setShaderValueBuffer=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h)},w_$h._setShaderValueInt=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h)},w_$h._setShaderValueBool=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h)},w_$h._setShaderValueNumber=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h)},w_$h._setShaderValueVector2=function(w_$B,w_$h){this._owner._shaderValues.setValue(w_$B,w_$h?w_$h.elements:null)},w_$h._addShaderDefine=function(w_$B){this._owner._shaderDefineValue|=w_$B},w_$h._removeShaderDefine=function(w_$B){this._owner._shaderDefineValue&=~w_$B},w_$h._renderUpdate=function(w_$B){return!0},w_$h._applyLightMapParams=function(){if(0<=this._lightmapIndex){var w_$B=this._owner.scene;if(w_$B){var w_$h=w_$B.getlightmaps()[this._lightmapIndex];w_$h?(this._addShaderDefine(w_$Yh.SAHDERDEFINE_LIGHTMAP),w_$h.loaded?this._setShaderValuelightMap(w_$h):w_$h.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(w_$Yh.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(w_$Yh.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(w_$Yh.SAHDERDEFINE_LIGHTMAP)},w_$h._updateOctreeNode=function(){var w_$B=this._treeNode;w_$B&&this._octreeNodeNeedChange&&(w_$B.updateObject(this),this._octreeNodeNeedChange=!1)},w_$h._destroy=function(){this.offAll();var w_$B=0,w_$h=0;for(w_$B=0,w_$h=this._renderElements.length;w_$B<w_$h;w_$B++)this._renderElements[w_$B]._destroy();for(w_$B=0,w_$h=this._materials.length;w_$B<w_$h;w_$B++)this._materials[w_$B]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},w_$i(0,w_$h,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),w_$i(0,w_$h,"id",function(){return this._id}),w_$i(0,w_$h,"material",function(){var w_$B=this._materials[0];if(w_$B&&!this._materialsInstance[0]){var w_$h=this._getInstanceMaterial(w_$B,0);this.event("materialchanged",[this,0,w_$h])}return this._materials[0]},function(w_$B){this.sharedMaterial=w_$B}),w_$i(0,w_$h,"sharedMaterial",function(){return this._materials[0]},function(w_$B){var w_$h=this._materials[0];w_$h!==w_$B&&(this._materials[0]=w_$B,this._materialsInstance[0]=!1,this._changeMaterialReference(w_$h,w_$B),this.event("materialchanged",[this,0,w_$B]))}),w_$i(0,w_$h,"lightmapIndex",function(){return this._lightmapIndex},function(w_$B){this._lightmapIndex=w_$B,this._applyLightMapParams()}),w_$i(0,w_$h,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(w_$B){this._lightmapScaleOffset=w_$B,this._setShaderValueColor(2,w_$B),this._addShaderDefine(w_$Yh.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),w_$i(0,w_$h,"enable",function(){return this._enable},function(w_$B){this._enable=w_$B,this.event("enablechanged",[this,w_$B])}),w_$i(0,w_$h,"materials",function(){for(var w_$B=0,w_$h=this._materials.length;w_$B<w_$h;w_$B++)if(!this._materialsInstance[w_$B]){var w_$l=this._getInstanceMaterial(this._materials[w_$B],w_$B);this.event("materialchanged",[this,w_$B,w_$l])}return this._materials.slice()},function(w_$B){this.sharedMaterials=w_$B}),w_$i(0,w_$h,"sharedMaterials",function(){return this._materials.slice()},function(w_$B){if(!w_$B)throw new Error("MeshRender: shadredMaterials value can't be null.");var w_$h=w_$B.length;this._materialsInstance.length=w_$h;for(var w_$l=0;w_$l<w_$h;w_$l++){var w_$A=this._materials[w_$l];w_$A!==w_$B[w_$l]&&(this._materialsInstance[w_$l]=!1,this._changeMaterialReference(w_$A,w_$B[w_$l]),this.event("materialchanged",[this,w_$l,w_$B[w_$l]]))}this._materials=w_$B}),w_$i(0,w_$h,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),w_$i(0,w_$h,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var w_$B=this.boundingBox;w_$Xh.add(w_$B.min,w_$B.max,this._boundingBoxCenter),w_$Xh.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),w_$i(0,w_$h,"receiveShadow",function(){return this._receiveShadow},function(w_$B){this._receiveShadow!==w_$B&&((this._receiveShadow=w_$B)?this._addShaderDefine(w_$Qh.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(w_$Qh.SHADERDEFINE_RECEIVE_SHADOW))}),w_$i(0,w_$h,"destroyed",function(){return this._destroyed}),w_$A._uniqueIDCounter=0,w_$T(w_$A,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh,new w_$Xh]},"_greenColor",function(){return this._greenColor=new w_$Zh(0,1,0,1)}]),w_$A}(),w_$uh=function(w_$B){function w_$Z(w_$B){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,w_$Z.__super.call(this),this._localPosition=new w_$Xh,this._localRotation=new w_$lh(0,0,0,1),this._localScale=new w_$Xh(1,1,1),this._localRotationEuler=new w_$Xh,this._localMatrix=new w_$Bh,this._position=new w_$Xh,this._rotation=new w_$lh(0,0,0,1),this._scale=new w_$Xh(1,1,1),this._worldMatrix=new w_$Bh,this._forward=new w_$Xh,this._up=new w_$Xh,this._right=new w_$Xh,this._owner=w_$B,this._childs=[]}w_$Q(w_$Z,"laya.d3.core.Transform3D",w_$s);var w_$h=w_$Z.prototype;return w_$h._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)w_$Bh.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var w_$B=w_$Z._tempVector30;w_$Xh.multiply(this.pivot,this._localScale,w_$B);var w_$h=w_$Z._tempVector31;w_$Xh.subtract(w_$B,this.pivot,w_$h);var w_$l=w_$Z._tempVector32,w_$A=this.localRotation;w_$Xh.transformQuat(w_$B,w_$A,w_$l),w_$Xh.subtract(w_$l,w_$B,w_$l);var w_$n=w_$Z._tempVector33;w_$Xh.subtract(this._localPosition,w_$h,w_$n),w_$Xh.subtract(w_$n,w_$l,w_$n),w_$Bh.createAffineTransformation(w_$n,w_$A,this._localScale,this._localMatrix)}},w_$h._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._onWorldPositionRotationTransform()}},w_$h._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._onWorldPositionScaleTransform()}},w_$h._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._onWorldPositionTransform()}},w_$h._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._onWorldPositionRotationTransform()}},w_$h._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._onWorldPositionScaleTransform()}},w_$h._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._onWorldTransform()}},w_$h.translate=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0),w_$h?(w_$Bh.createFromQuaternion(this.localRotation,w_$Z._tempMatrix0),w_$Xh.transformCoordinate(w_$B,w_$Z._tempMatrix0,w_$Z._tempVector30),w_$Xh.add(this.localPosition,w_$Z._tempVector30,this._localPosition),this.localPosition=this._localPosition):(w_$Xh.add(this.position,w_$B,this._position),this.position=this._position)},w_$h.rotate=function(w_$B,w_$h,w_$l){var w_$A;void 0===w_$h&&(w_$h=!0),void 0===w_$l&&(w_$l=!0),w_$A=w_$l?w_$B:(w_$Xh.scale(w_$B,Math.PI/180,w_$Z._tempVector30),w_$Z._tempVector30),w_$lh.createFromYawPitchRoll(w_$A.y,w_$A.x,w_$A.z,w_$Z._tempQuaternion0),w_$h?(w_$lh.multiply(this._localRotation,w_$Z._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(w_$lh.multiply(w_$Z._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},w_$h.lookAt=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=!1);var w_$A,w_$n=w_$B.elements;if(w_$l){if(w_$A=this._localPosition.elements,Math.abs(w_$A[0]-w_$n[0])<w_$DB.zeroTolerance&&Math.abs(w_$A[1]-w_$n[1])<w_$DB.zeroTolerance&&Math.abs(w_$A[2]-w_$n[2])<w_$DB.zeroTolerance)return;w_$lh.lookAt(this._localPosition,w_$B,w_$h,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var w_$s=this.position;if(w_$A=w_$s.elements,Math.abs(w_$A[0]-w_$n[0])<w_$DB.zeroTolerance&&Math.abs(w_$A[1]-w_$n[1])<w_$DB.zeroTolerance&&Math.abs(w_$A[2]-w_$n[2])<w_$DB.zeroTolerance)return;w_$lh.lookAt(w_$s,w_$B,w_$h,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},w_$i(0,w_$h,"_isFrontFaceInvert",function(){var w_$B=this.scale,w_$h=w_$B.x<0;return w_$B.y<0&&(w_$h=!w_$h),w_$B.z<0&&(w_$h=!w_$h),w_$h}),w_$i(0,w_$h,"owner",function(){return this._owner}),w_$i(0,w_$h,"localRotation",function(){if(this._localQuaternionUpdate){var w_$B=this._localRotationEuler.elements;w_$lh.createFromYawPitchRoll(w_$B[1]/w_$Z._angleToRandin,w_$B[0]/w_$Z._angleToRandin,w_$B[2]/w_$Z._angleToRandin,this._localRotation)}return this._localRotation},function(w_$B){this._localRotation=w_$B,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),w_$i(0,w_$h,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?w_$Bh.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(w_$B){null===this._parent?w_$B.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),w_$Bh.multiply(this._localMatrix,w_$B,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=w_$B,this._worldUpdate=!1}),w_$i(0,w_$h,"worldNeedUpdate",function(){return this._worldUpdate}),w_$i(0,w_$h,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(w_$B){this._localMatrix=w_$B,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),w_$i(0,w_$h,"dummy",function(){return this._dummy},function(w_$B){this._dummy!==w_$B&&(this._dummy&&(this._dummy._entity=null),w_$B&&(w_$B._entity=this),this._dummy=w_$B)}),w_$i(0,w_$h,"localPosition",function(){return this._localPosition},function(w_$B){this._localPosition=w_$B,this._localUpdate=!0,this._onWorldPositionTransform()}),w_$i(0,w_$h,"position",function(){if(this._positionUpdate){if(null!=this._parent){var w_$B=this._parent.position;w_$Xh.multiply(this._localPosition,this._parent.scale,w_$Z._tempVector30),w_$Xh.transformQuat(w_$Z._tempVector30,this._parent.rotation,w_$Z._tempVector30),w_$Xh.add(w_$B,w_$Z._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(w_$B){if(null!=this._parent){w_$Xh.subtract(w_$B,this._parent.position,this._localPosition);var w_$h=this._parent.scale.elements,w_$l=w_$h[0],w_$A=w_$h[1],w_$n=w_$h[2];if(1!==w_$l||1!==w_$A||1!==w_$n){var w_$s=w_$Z._tempVector30,w_$X=w_$s.elements;w_$X[0]=1/w_$l,w_$X[1]=1/w_$A,w_$X[2]=1/w_$n,w_$Xh.multiply(this._localPosition,w_$s,this._localPosition)}this._parent.rotation.invert(w_$Z._tempQuaternion0),w_$Xh.transformQuat(this._localPosition,w_$Z._tempQuaternion0,this._localPosition)}else w_$B.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=w_$B,this._positionUpdate=!1}),w_$i(0,w_$h,"localScale",function(){return this._localScale},function(w_$B){this._localScale=w_$B,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),w_$i(0,w_$h,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(w_$Z._tempVector30);var w_$B=w_$Z._tempVector30.elements,w_$h=this._localRotationEuler.elements;w_$h[0]=w_$B[1]*w_$Z._angleToRandin,w_$h[1]=w_$B[0]*w_$Z._angleToRandin,w_$h[2]=w_$B[2]*w_$Z._angleToRandin}return this._localRotationEuler},function(w_$B){this._localRotationEuler=w_$B,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),w_$i(0,w_$h,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?w_$lh.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(w_$B){null!=this._parent?(this._parent.rotation.invert(w_$Z._tempQuaternion0),w_$lh.multiply(w_$B,w_$Z._tempQuaternion0,this._localRotation)):w_$B.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=w_$B,this._rotationUpdate=!1}),w_$i(0,w_$h,"scale",function(){return this._scaleUpdate&&(null!==this._parent?w_$Xh.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(w_$B){if(null!==this._parent){var w_$h=this._parent.scale.elements,w_$l=w_$Z._tempVector30.elements;w_$l[0]=1/w_$h[0],w_$l[1]=1/w_$h[1],w_$l[2]=1/w_$h[2],w_$Xh.multiply(w_$B,w_$Z._tempVector30,this._localScale)}else w_$B.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=w_$B,this._scaleUpdate=!1}),w_$i(0,w_$h,"rotationEuler",null,function(w_$B){w_$lh.createFromYawPitchRoll(w_$B.y,w_$B.x,w_$B.z,this._rotation),this.rotation=this._rotation}),w_$i(0,w_$h,"forward",function(){var w_$B=this.worldMatrix.elements;return this._forward.elements[0]=-w_$B[8],this._forward.elements[1]=-w_$B[9],this._forward.elements[2]=-w_$B[10],this._forward}),w_$i(0,w_$h,"up",function(){var w_$B=this.worldMatrix.elements;return this._up.elements[0]=w_$B[4],this._up.elements[1]=w_$B[5],this._up.elements[2]=w_$B[6],this._up}),w_$i(0,w_$h,"right",function(){var w_$B=this.worldMatrix.elements;return this._right.elements[0]=w_$B[0],this._right.elements[1]=w_$B[1],this._right.elements[2]=w_$B[2],this._right}),w_$i(0,w_$h,"parent",function(){return this._parent},function(w_$B){if(this._parent!==w_$B){if(this._parent){var w_$h=this._parent._childs,w_$l=w_$h.indexOf(this);w_$h.splice(w_$l,1)}w_$B&&(w_$B._childs.push(this),w_$B&&this._onWorldTransform()),this._parent=w_$B}}),w_$T(w_$Z,["_tempVector30",function(){return this._tempVector30=new w_$Xh},"_tempVector31",function(){return this._tempVector31=new w_$Xh},"_tempVector32",function(){return this._tempVector32=new w_$Xh},"_tempVector33",function(){return this._tempVector33=new w_$Xh},"_tempQuaternion0",function(){return this._tempQuaternion0=new w_$lh},"_tempMatrix0",function(){return this._tempMatrix0=new w_$Bh},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),w_$Z}(),w_$vh=(function(w_$B){function w_$h(){this._rotation=0,this._matNeedUpdte=!1,w_$h.__super.call(this),this._matrix=new w_$Bh,this._offset=new w_$sh,this._tiling=new w_$sh(1,1)}w_$Q(w_$h,"laya.d3.core.TransformUV",w_$s);var w_$l=w_$h.prototype;w_$o.imps(w_$l,{"laya.d3.core.IClone":!0}),w_$l._updateMatrix=function(){w_$h._tempOffsetV3.elements[0]=this._offset.x,w_$h._tempOffsetV3.elements[1]=this._offset.y,w_$lh.createFromYawPitchRoll(0,0,this._rotation,w_$h._tempRotationQua),w_$h._tempTitlingV3.elements[0]=this._tiling.x,w_$h._tempTitlingV3.elements[1]=this._tiling.y,w_$Bh.createAffineTransformation(w_$h._tempOffsetV3,w_$h._tempRotationQua,w_$h._tempTitlingV3,this._matrix)},w_$l.cloneTo=function(w_$B){w_$B._matrix=this._matrix.clone(),w_$B._offset=this._offset.clone(),w_$B._rotation=this._rotation,w_$B._tiling=this._tiling.clone()},w_$l.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$l,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),w_$i(0,w_$l,"tiling",function(){return this._tiling},function(w_$B){this._tiling=w_$B,this._matNeedUpdte=!0}),w_$i(0,w_$l,"offset",function(){return this._offset},function(w_$B){this._offset=w_$B,this._matNeedUpdte=!0}),w_$i(0,w_$l,"rotation",function(){return this._rotation},function(w_$B){this._rotation=w_$B,this._matNeedUpdte=!0}),w_$T(w_$h,["_tempOffsetV3",function(){return this._tempOffsetV3=new w_$Xh(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new w_$lh},"_tempTitlingV3",function(){return this._tempTitlingV3=new w_$Xh(1,1,1)}])}(),function(w_$l){function w_$B(){this.x=NaN,this.y=NaN,this.z=NaN,w_$B.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.shape.BoxShape",w_$l);var w_$h=w_$B.prototype;w_$h._getShapeBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=.5*-this.x,w_$h[1]=.5*-this.y,w_$h[2]=.5*-this.z;var w_$l=w_$B.max.elements;w_$l[0]=.5*this.x,w_$l[1]=.5*this.y,w_$l[2]=.5*this.z},w_$h._getSpeedBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=0,w_$h[1]=0,w_$h[2]=0;var w_$l=w_$B.max.elements;w_$l[0]=0,w_$l[1]=1,w_$l[2]=0},w_$h.generatePositionAndDirection=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.elements,w_$s=w_$h.elements;w_$l?(w_$l.seed=w_$A[16],w_$c._randomPointInsideHalfUnitBox(w_$B,w_$l),w_$A[16]=w_$l.seed):w_$c._randomPointInsideHalfUnitBox(w_$B),w_$n[0]=this.x*w_$n[0],w_$n[1]=this.y*w_$n[1],w_$n[2]=this.z*w_$n[2],this.randomDirection?w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointUnitSphere(w_$h,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointUnitSphere(w_$h):(w_$s[0]=0,w_$s[1]=0,w_$s[2]=1)},w_$h.cloneTo=function(w_$B){w_$l.prototype.cloneTo.call(this,w_$B);var w_$h=w_$B;w_$h.x=this.x,w_$h.y=this.y,w_$h.z=this.z,w_$h.randomDirection=this.randomDirection}}(w_$d),function(w_$l){function w_$X(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,w_$X.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}w_$Q(w_$X,"laya.d3.core.particleShuriKen.module.shape.CircleShape",w_$l);var w_$B=w_$X.prototype;w_$B._getShapeBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=w_$h[2]=-this.radius,w_$h[1]=0;var w_$l=w_$B.max.elements;w_$l[0]=w_$l[2]=this.radius,w_$l[1]=0},w_$B._getSpeedBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=w_$h[1]=-1,w_$h[2]=0;var w_$l=w_$B.max.elements;w_$l[0]=w_$l[1]=1,w_$l[2]=0},w_$B.generatePositionAndDirection=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.elements,w_$s=w_$X._tempPositionPoint.elements;w_$l?(w_$l.seed=w_$A[16],this.emitFromEdge?w_$c._randomPointUnitArcCircle(this.arc,w_$X._tempPositionPoint,w_$l):w_$c._randomPointInsideUnitArcCircle(this.arc,w_$X._tempPositionPoint,w_$l),w_$A[16]=w_$l.seed):this.emitFromEdge?w_$c._randomPointUnitArcCircle(this.arc,w_$X._tempPositionPoint):w_$c._randomPointInsideUnitArcCircle(this.arc,w_$X._tempPositionPoint),w_$n[0]=-w_$s[0],w_$n[1]=w_$s[1],w_$n[2]=0,w_$Xh.scale(w_$B,this.radius,w_$B),this.randomDirection?w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointUnitSphere(w_$h,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointUnitSphere(w_$h):w_$B.cloneTo(w_$h)},w_$B.cloneTo=function(w_$B){w_$l.prototype.cloneTo.call(this,w_$B);var w_$h=w_$B;w_$h.radius=this.radius,w_$h.arc=this.arc,w_$h.emitFromEdge=this.emitFromEdge,w_$h.randomDirection=this.randomDirection},w_$T(w_$X,["_tempPositionPoint",function(){return this._tempPositionPoint=new w_$sh}])}(w_$d),function(w_$l){function w_$b(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,w_$b.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}w_$Q(w_$b,"laya.d3.core.particleShuriKen.module.shape.ConeShape",w_$l);var w_$B=w_$b.prototype;w_$B._getShapeBoundBox=function(w_$B){var w_$h=this.radius+this.length*Math.sin(this.angle),w_$l=this.length*Math.cos(this.angle),w_$A=w_$B.min.elements;w_$A[0]=w_$A[1]=-w_$h,w_$A[2]=0;var w_$n=w_$B.max.elements;w_$n[0]=w_$n[1]=w_$h,w_$n[2]=w_$l},w_$B._getSpeedBoundBox=function(w_$B){var w_$h=Math.sin(this.angle),w_$l=w_$B.min.elements;w_$l[0]=w_$l[1]=-w_$h,w_$l[2]=0;var w_$A=w_$B.max.elements;w_$A[0]=w_$l[1]=w_$h,w_$A[2]=1},w_$B.generatePositionAndDirection=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s=w_$B.elements,w_$X=w_$h.elements,w_$Z=w_$b._tempPositionPoint.elements,w_$t=NaN,w_$P=NaN,w_$G=Math.cos(this.angle),w_$T=Math.sin(this.angle);switch(this.emitType){case 0:w_$l?(w_$l.seed=w_$A[16],w_$c._randomPointInsideUnitCircle(w_$b._tempPositionPoint,w_$l),w_$A[16]=w_$l.seed):w_$c._randomPointInsideUnitCircle(w_$b._tempPositionPoint),w_$t=w_$Z[0],w_$P=w_$Z[1],w_$s[0]=w_$t*this.radius,w_$s[1]=w_$P*this.radius,w_$s[2]=0,this.randomDirection?(w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointInsideUnitCircle(w_$b._tempDirectionPoint,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointInsideUnitCircle(w_$b._tempDirectionPoint),w_$n=w_$b._tempDirectionPoint.elements,w_$X[0]=w_$n[0]*w_$T,w_$X[1]=w_$n[1]*w_$T):(w_$X[0]=w_$t*w_$T,w_$X[1]=w_$P*w_$T),w_$X[2]=w_$G;break;case 1:w_$l?(w_$l.seed=w_$A[16],w_$c._randomPointUnitCircle(w_$b._tempPositionPoint,w_$l),w_$A[16]=w_$l.seed):w_$c._randomPointUnitCircle(w_$b._tempPositionPoint),w_$t=w_$Z[0],w_$P=w_$Z[1],w_$s[0]=w_$t*this.radius,w_$s[1]=w_$P*this.radius,w_$s[2]=0,this.randomDirection?(w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointInsideUnitCircle(w_$b._tempDirectionPoint,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointInsideUnitCircle(w_$b._tempDirectionPoint),w_$n=w_$b._tempDirectionPoint.elements,w_$X[0]=w_$n[0]*w_$T,w_$X[1]=w_$n[1]*w_$T):(w_$X[0]=w_$t*w_$T,w_$X[1]=w_$P*w_$T),w_$X[2]=w_$G;break;case 2:w_$l?(w_$l.seed=w_$A[16],w_$c._randomPointInsideUnitCircle(w_$b._tempPositionPoint,w_$l)):w_$c._randomPointInsideUnitCircle(w_$b._tempPositionPoint),w_$t=w_$Z[0],w_$P=w_$Z[1],w_$s[0]=w_$t*this.radius,w_$s[1]=w_$P*this.radius,w_$X[w_$s[2]=0]=w_$t*w_$T,w_$X[1]=w_$P*w_$T,w_$X[2]=w_$G,w_$Xh.normalize(w_$h,w_$h),w_$l?(w_$Xh.scale(w_$h,this.length*w_$l.getFloat(),w_$h),w_$A[16]=w_$l.seed):w_$Xh.scale(w_$h,this.length*Math.random(),w_$h),w_$Xh.add(w_$B,w_$h,w_$B),this.randomDirection&&(w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointUnitSphere(w_$h,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointUnitSphere(w_$h));break;case 3:w_$l?(w_$l.seed=w_$A[16],w_$c._randomPointUnitCircle(w_$b._tempPositionPoint,w_$l)):w_$c._randomPointUnitCircle(w_$b._tempPositionPoint),w_$t=w_$Z[0],w_$P=w_$Z[1],w_$s[0]=w_$t*this.radius,w_$s[1]=w_$P*this.radius,w_$X[w_$s[2]=0]=w_$t*w_$T,w_$X[1]=w_$P*w_$T,w_$X[2]=w_$G,w_$Xh.normalize(w_$h,w_$h),w_$l?(w_$Xh.scale(w_$h,this.length*w_$l.getFloat(),w_$h),w_$A[16]=w_$l.seed):w_$Xh.scale(w_$h,this.length*Math.random(),w_$h),w_$Xh.add(w_$B,w_$h,w_$B),this.randomDirection&&(w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointUnitSphere(w_$h,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointUnitSphere(w_$h));break;default:throw new Error("ConeShape:emitType is invalid.")}},w_$B.cloneTo=function(w_$B){w_$l.prototype.cloneTo.call(this,w_$B);var w_$h=w_$B;w_$h.angle=this.angle,w_$h.radius=this.radius,w_$h.length=this.length,w_$h.emitType=this.emitType,w_$h.randomDirection=this.randomDirection},w_$T(w_$b,["_tempPositionPoint",function(){return this._tempPositionPoint=new w_$sh},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new w_$sh}])}(w_$d),function(w_$l){function w_$B(){this.radius=NaN,this.emitFromShell=!1,w_$B.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",w_$l);var w_$h=w_$B.prototype;w_$h._getShapeBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=w_$h[1]=w_$h[2]=-this.radius;var w_$l=w_$B.max.elements;w_$l[0]=w_$l[1]=this.radius,w_$l[2]=0},w_$h._getSpeedBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=w_$h[1]=-1,w_$h[2]=0;var w_$l=w_$B.max.elements;w_$l[0]=w_$l[1]=w_$l[2]=1},w_$h.generatePositionAndDirection=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.elements;w_$l?(w_$l.seed=w_$A[16],this.emitFromShell?w_$c._randomPointUnitSphere(w_$B,w_$l):w_$c._randomPointInsideUnitSphere(w_$B,w_$l),w_$A[16]=w_$l.seed):this.emitFromShell?w_$c._randomPointUnitSphere(w_$B):w_$c._randomPointInsideUnitSphere(w_$B),w_$Xh.scale(w_$B,this.radius,w_$B);var w_$s=w_$n[2];w_$s<0&&(w_$n[2]=-1*w_$s),this.randomDirection?w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointUnitSphere(w_$h,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointUnitSphere(w_$h):w_$B.cloneTo(w_$h)},w_$h.cloneTo=function(w_$B){w_$l.prototype.cloneTo.call(this,w_$B);var w_$h=w_$B;w_$h.radius=this.radius,w_$h.emitFromShell=this.emitFromShell,w_$h.randomDirection=this.randomDirection}}(w_$d),function(w_$l){function w_$B(){this.radius=NaN,this.emitFromShell=!1,w_$B.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}w_$Q(w_$B,"laya.d3.core.particleShuriKen.module.shape.SphereShape",w_$l);var w_$h=w_$B.prototype;w_$h._getShapeBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=w_$h[1]=w_$h[2]=-this.radius;var w_$l=w_$B.max.elements;w_$l[0]=w_$l[1]=w_$l[2]=this.radius},w_$h._getSpeedBoundBox=function(w_$B){var w_$h=w_$B.min.elements;w_$h[0]=w_$h[1]=w_$h[2]=-1;var w_$l=w_$B.max.elements;w_$l[0]=w_$l[1]=w_$l[2]=1},w_$h.generatePositionAndDirection=function(w_$B,w_$h,w_$l,w_$A){w_$l?(w_$l.seed=w_$A[16],this.emitFromShell?w_$c._randomPointUnitSphere(w_$B,w_$l):w_$c._randomPointInsideUnitSphere(w_$B,w_$l),w_$A[16]=w_$l.seed):this.emitFromShell?w_$c._randomPointUnitSphere(w_$B):w_$c._randomPointInsideUnitSphere(w_$B),w_$Xh.scale(w_$B,this.radius,w_$B),this.randomDirection?w_$l?(w_$l.seed=w_$A[17],w_$c._randomPointUnitSphere(w_$h,w_$l),w_$A[17]=w_$l.seed):w_$c._randomPointUnitSphere(w_$h):w_$B.cloneTo(w_$h)},w_$h.cloneTo=function(w_$B){w_$l.prototype.cloneTo.call(this,w_$B);var w_$h=w_$B;w_$h.radius=this.radius,w_$h.emitFromShell=this.emitFromShell,w_$h.randomDirection=this.randomDirection}}(w_$d),function(w_$B){function w_$h(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,w_$h.__super.call(this)}return w_$Q(w_$h,"laya.d3.core.render.SubMeshRenderElement",w_$K),w_$h}()),w_$Uh=function(w_$B){function w_$V(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=w_$B,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[w_$Qh.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[w_$Yh.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[w_$Yh.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[w_$ah.SHADERDEFINE_ALPHATEST]="ALPHATEST";w_$V.__super.call(this,w_$B,w_$h,w_$l,null,{}),this._attributeMap=w_$A;var w_$X;for(w_$X in w_$n){var w_$Z=w_$n[w_$X];switch(w_$Z[1]){case 0:this._renderElementUniformMap[w_$X]=w_$Z[0];break;case 1:this._materialUniformMap[w_$X]=w_$Z[0];break;case 2:this._spriteUniformMap[w_$X]=w_$Z[0];break;case 3:this._cameraUniformMap[w_$X]=w_$Z[0];break;case 4:this._sceneUniformMap[w_$X]=w_$Z[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}w_$Q(w_$V,"laya.d3.shader.ShaderCompile3D",w_$y);var w_$h=w_$V.prototype;return w_$h._definesToNameDic=function(w_$B,w_$h){for(var w_$l={},w_$A=1,w_$n=0;w_$n<32&&!(w_$B<(w_$A=1<<w_$n));w_$n++)if(w_$B&w_$A){var w_$s=w_$h[w_$A];w_$s&&(w_$l[w_$s]="")}return w_$l},w_$h.withCompile=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s,w_$X;if(w_$s=this.sharders[w_$B])if(w_$X=w_$s[w_$h]){if(w_$n=w_$X[w_$l])return w_$n}else w_$X=w_$s[w_$h]=[];else w_$X=(w_$s=this.sharders[w_$B]=[])[w_$h]=[];var w_$Z,w_$t=this._definesToNameDic(w_$B,w_$V._globalInt2name),w_$P=this._definesToNameDic(w_$h,this._spriteInt2name),w_$G=this._definesToNameDic(w_$l,this._materialInt2name),w_$T={},w_$b="";if(w_$t)for(w_$Z in w_$t)w_$b+="#define "+w_$Z+"\n",w_$T[w_$Z]=!0;if(w_$P)for(w_$Z in w_$P)w_$b+="#define "+w_$Z+"\n",w_$T[w_$Z]=!0;if(w_$G)for(w_$Z in w_$G)w_$b+="#define "+w_$Z+"\n",w_$T[w_$Z]=!0;var w_$Q=w_$jh.nameKey.getName(this._name)+" compile ("+w_$B+","+w_$h+","+w_$l+")",w_$i=this._VS.toscript(w_$T,[]),w_$$=this._PS.toscript(w_$T,[]);w_$R.now();if(w_$n=w_$jh.create(w_$b+w_$i.join("\n"),w_$b+w_$$.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,w_$A,w_$Q),w_$X[w_$l]=w_$n,laya.d3.shader.ShaderCompile3D.debugMode)w_$R.now();return w_$n},w_$h.precompileShaderWithShaderDefine=function(w_$B,w_$h,w_$l){this.withCompile(w_$B,w_$h,w_$l,!0)},w_$h.addMaterialDefines=function(w_$B){var w_$h=w_$B.defines;for(var w_$l in w_$h){var w_$A=w_$h[w_$l],w_$n=parseInt(w_$l);this._materialInt2name[w_$n]=w_$A,this._materialName2Int[w_$A]=w_$n}},w_$h.addSpriteDefines=function(w_$B){var w_$h=w_$B.defines;for(var w_$l in w_$h){var w_$A=w_$h[w_$l],w_$n=parseInt(w_$l);this._spriteInt2name[w_$n]=w_$A,this._spriteName2Int[w_$A]=w_$n}},w_$h.getMaterialDefineByName=function(w_$B){return this._materialName2Int[w_$B]},w_$h.registerMaterialDefine=function(w_$B){var w_$h=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[w_$h]=w_$B,this._materialName2Int[w_$B]=w_$h},w_$h.registerSpriteDefine=function(w_$B){var w_$h=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[w_$h]=w_$B,this._spriteName2Int[w_$B]=w_$h},w_$V._globalRegDefine=function(w_$B,w_$h){w_$V._globalInt2name[w_$h]=w_$B},w_$V.add=function(w_$B,w_$h,w_$l,w_$A,w_$n){return laya.d3.shader.ShaderCompile3D._preCompileShader[w_$B]=new w_$V(w_$B,w_$h,w_$l,w_$A,w_$n,w_$y.includes)},w_$V.get=function(w_$B){return laya.d3.shader.ShaderCompile3D._preCompileShader[w_$jh.nameKey.getID(w_$B)]},w_$V._preCompileShader={},w_$V._globalInt2name=[],w_$V.debugMode=!1,w_$V.SHADERDEFINE_HIGHPRECISION=1,w_$V.SHADERDEFINE_FOG=4,w_$V.SHADERDEFINE_DIRECTIONLIGHT=8,w_$V.SHADERDEFINE_POINTLIGHT=16,w_$V.SHADERDEFINE_SPOTLIGHT=32,w_$V.SHADERDEFINE_UV0=64,w_$V.SHADERDEFINE_COLOR=128,w_$V.SHADERDEFINE_UV1=256,w_$V.SAHDERDEFINE_DEPTHFOG=131072,w_$V}(),w_$xh=function(w_$B){function w_$i(){w_$i.__super.call(this)}w_$Q(w_$i,"laya.d3.graphics.MeshSprite3DStaticBatchManager",w_$AB);var w_$h=w_$i.prototype;return w_$h._getStaticBatch=function(w_$B,w_$h,w_$l,w_$A){var w_$n,w_$s;return w_$s=w_$B?w_$B.id.toString()+w_$l.id.toString()+w_$h.id.toString()+w_$A.toString():w_$l.id.toString()+w_$h.id.toString()+w_$A.toString(),this._staticBatches[w_$s]?w_$n=this._staticBatches[w_$s]:this._staticBatches[w_$s]=w_$n=new w_$wh(w_$s,this,w_$B,w_$h,w_$l),w_$n},w_$h._initStaticBatchs=function(w_$B){var w_$h,w_$l;this._initBatchRenderElements.sort(w_$i._sortPrepareStaticBatch);for(var w_$A,w_$n=!1,w_$s=0,w_$X=0,w_$Z=this._initBatchRenderElements.length;w_$X<w_$Z;w_$X++){var w_$t,w_$P=this._initBatchRenderElements[w_$X],w_$G=w_$P.renderObj._getVertexBuffer(0);w_$P._sprite3D;if(w_$l===w_$G.vertexDeclaration&&w_$h===w_$P._material)if(w_$n)w_$A._addCombineBatchRenderObjTest(w_$P)?(w_$t=w_$P._staticBatch)!==w_$A&&(w_$t&&w_$t._deleteCombineBatchRenderObj(w_$P),w_$A._addCombineBatchRenderObj(w_$P)):(w_$n=!1,w_$s++);else{var w_$T=this._initBatchRenderElements[w_$X-1],w_$b=w_$T.renderObj,w_$Q=w_$P.renderObj;w_$n=!(65535<w_$b._getVertexBuffer().vertexCount+w_$Q._getVertexBuffer().vertexCount)&&(w_$A=this._getStaticBatch(w_$B,w_$l,w_$h,w_$s),(w_$t=w_$T._staticBatch)!==w_$A&&(w_$t&&w_$t._deleteCombineBatchRenderObj(w_$T),w_$A._addCombineBatchRenderObj(w_$T)),(w_$t=w_$P._staticBatch)!==w_$A&&(w_$t&&w_$t._deleteCombineBatchRenderObj(w_$P),w_$A._addCombineBatchRenderObj(w_$P)),!0)}else w_$n=!1,w_$s=0;w_$h=w_$P._material,w_$l=w_$G.vertexDeclaration}},w_$i._sortPrepareStaticBatch=function(w_$B,w_$h){var w_$l=w_$B._render,w_$A=w_$h._render,w_$n=w_$l.lightmapIndex-w_$A.lightmapIndex;if(0!=w_$n)return w_$n;var w_$s=w_$l.receiveShadow-w_$A.receiveShadow;if(0!=w_$s)return w_$s;var w_$X=w_$B._mainSortID-w_$h._mainSortID;return 0==w_$X?w_$B.renderObj.triangleCount-w_$h.renderObj.triangleCount:w_$X},w_$i}(),w_$wh=function(w_$B){function w_$s(w_$B,w_$h,w_$l,w_$A,w_$n){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,w_$s.__super.call(this,w_$B,w_$h,w_$l),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=w_$A,this._material=w_$n}w_$Q(w_$s,"laya.d3.graphics.SubMeshStaticBatch",w_$nB);var w_$h=w_$s.prototype;return w_$h._compareBatchRenderElement=function(w_$B,w_$h){return w_$B._batchIndexStart>w_$h._batchIndexStart},w_$h._addCombineBatchRenderObjTest=function(w_$B){var w_$h=w_$B.renderObj._vertexCount;return!(65535<(0<w_$h?this._currentCombineVertexCount+w_$h:this._currentCombineVertexCount+w_$B.renderObj._getVertexBuffer().vertexCount))},w_$h._addCombineBatchRenderObj=function(w_$B){var w_$h=w_$B.renderObj,w_$l=w_$h._vertexCount;this._initBatchRenderElements.push(w_$B),w_$B._staticBatch=this,0<w_$l?(this._currentCombineIndexCount+=w_$h._indexCount,this._currentCombineVertexCount+=w_$l):(this._currentCombineIndexCount=this._currentCombineIndexCount+w_$h._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+w_$h._getVertexBuffer().vertexCount),this._needFinishCombine=!0},w_$h._deleteCombineBatchRenderObj=function(w_$B){var w_$h=w_$B.renderObj,w_$l=this._initBatchRenderElements.indexOf(w_$B);if(-1!==w_$l){this._initBatchRenderElements.splice(w_$l,1),w_$B._staticBatch=null;var w_$A=w_$h._vertexCount;0<w_$A?(this._currentCombineIndexCount=this._currentCombineIndexCount-w_$h._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-w_$A):(this._currentCombineIndexCount=this._currentCombineIndexCount-w_$h._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-w_$h._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},w_$h._finishInit=function(){if(this._needFinishCombine){var w_$B=0,w_$h=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var w_$l=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),w_$A=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=w_$dh.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=w_$_h.create("ushort",this._currentCombineIndexCount,35044);for(var w_$n=0,w_$s=this._initBatchRenderElements.length;w_$n<w_$s;w_$n++){var w_$X=this._initBatchRenderElements[w_$n],w_$Z=w_$X.renderObj,w_$t=w_$Z._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,w_$X._sprite3D),w_$P=w_$Z.getIndices(),w_$G=w_$X._sprite3D.transform._isFrontFaceInvert,w_$T=w_$B/(this._vertexDeclaration.vertexStride/4)-w_$Z._vertexStart,w_$b=w_$h,w_$Q=w_$b+w_$P.length;w_$X._batchIndexStart=w_$b,w_$X._batchIndexEnd=w_$Q,w_$A.set(w_$P,w_$h);var w_$i=0;if(w_$G)for(w_$i=w_$b;w_$i<w_$Q;w_$i+=3){w_$A[w_$i]=w_$T+w_$A[w_$i];var w_$$=w_$A[w_$i+1],w_$V=w_$A[w_$i+2];w_$A[w_$i+1]=w_$T+w_$V,w_$A[w_$i+2]=w_$T+w_$$}else for(w_$i=w_$b;w_$i<w_$Q;w_$i+=3)w_$A[w_$i]=w_$T+w_$A[w_$i],w_$A[w_$i+1]=w_$T+w_$A[w_$i+1],w_$A[w_$i+2]=w_$T+w_$A[w_$i+2];w_$h+=w_$P.length,w_$l.set(w_$t,w_$B),w_$B+=w_$t.length}this._vertexBuffer.setData(w_$l),this._indexBuffer.setData(w_$A),this._needFinishCombine=!1}},w_$h._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new w_$vh)},w_$h._getRenderElement=function(w_$B,w_$h,w_$l){for(var w_$A,w_$n,w_$s=this._batchRenderElements.length,w_$X=!0,w_$Z=0;w_$Z<w_$s;w_$Z++){var w_$t,w_$P,w_$G=(w_$n=this._batchRenderElements[w_$Z])._sprite3D._render;if(0!==w_$Z&&(w_$X=(w_$t=(w_$A=this._batchRenderElements[w_$Z-1])._sprite3D._render).lightmapIndex!==w_$G.lightmapIndex||w_$t.receiveShadow!==w_$G.receiveShadow||w_$A._batchIndexEnd!==w_$n._batchIndexStart),w_$X){(w_$P=this._getCombineRenderElementFromPool()).renderObj=this,w_$P._material=this._material,w_$P._batchIndexStart=w_$n._batchIndexStart,w_$P._batchIndexEnd=w_$n._batchIndexEnd;var w_$T=w_$G.lightmapIndex,w_$b=w_$T+1,w_$Q=this._batchOwnerIndices[w_$b];w_$Q||(w_$Q=this._batchOwnerIndices[w_$b]=[]);var w_$i,w_$$=w_$Q[w_$n._render.receiveShadow?1:0];void 0===w_$$?(w_$Q[w_$G.receiveShadow?1:0]=this._batchOwners.length,(w_$i=new w_$fh(null,"StaticBatchMeshSprite3D"))._scene=w_$h,w_$i._transform=this._rootOwner?this._rootOwner._transform:null,w_$i._render.lightmapIndex=w_$T,w_$i._render.receiveShadow=w_$n._render.receiveShadow,this._batchOwners.push(w_$i)):w_$i=this._batchOwners[w_$$],w_$i._render._renderUpdate(w_$l),w_$P._sprite3D=w_$i,w_$B.push(w_$P)}else w_$P._batchIndexEnd=w_$n._batchIndexEnd}},w_$h._beforeRender=function(w_$B){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w_$h._render=function(w_$B){var w_$h=w_$B.renderElement,w_$l=w_$h._batchIndexStart,w_$A=w_$h._batchIndexEnd-w_$l;w_$S.mainContext.drawElements(4,w_$A,5123,2*w_$l),w_$U.drawCall++,w_$U.trianglesFaces+=w_$A/3},w_$h.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},w_$h._getVertexBuffer=function(w_$B){return void 0===w_$B&&(w_$B=0),this._vertexBuffer},w_$s}(),w_$zh=function(w_$B){function w_$h(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,w_$h.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}w_$Q(w_$h,"laya.d3.core.ComponentNode",w_$P);var w_$l=w_$h.prototype;return w_$l.addComponent=function(w_$B){var w_$h,w_$l=this._componentsMap.indexOf(w_$B);if(-1===w_$l)w_$h=[],this._componentsMap.push(w_$B),this._typeComponentsIndices.push(w_$h);else if(w_$h=this._typeComponentsIndices[w_$l],this._components[w_$h[0]].isSingleton)throw new Error("无法单实例创建"+w_$B+"组件，"+w_$B+"组件已存在！");var w_$A=w_$n.getInstance(w_$B);return w_$h.push(this._components.length),this._components.push(w_$A),w_$A instanceof laya.d3.component.Script&&this._scripts.push(w_$A),w_$A._initialize(this),w_$A},w_$l._removeComponent=function(w_$B,w_$h){var w_$l=this._typeComponentsIndices[w_$B],w_$A=w_$l[w_$h],w_$n=this._components[w_$A];this._components.splice(w_$A,1),w_$n instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(w_$n),1),w_$l.splice(w_$h,1),0===w_$l.length&&(this._typeComponentsIndices.splice(w_$B,1),this._componentsMap.splice(w_$B,1));for(var w_$s=0,w_$X=this._componentsMap.length;w_$s<w_$X;w_$s++)for(var w_$Z=(w_$l=this._typeComponentsIndices[w_$s]).length-1;0<=w_$Z;w_$Z--){var w_$t=w_$l[w_$Z];if(!(w_$A<w_$t))break;w_$l[w_$Z]=--w_$t}w_$n._destroy()},w_$l.getComponentByType=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0);var w_$l=this._componentsMap.indexOf(w_$B);return-1===w_$l?null:this._components[this._typeComponentsIndices[w_$l][w_$h]]},w_$l.getComponentsByType=function(w_$B,w_$h){var w_$l=this._componentsMap.indexOf(w_$B);if(-1!==w_$l){var w_$A=this._typeComponentsIndices[w_$l],w_$n=w_$A.length;w_$h.length=w_$n;for(var w_$s=0;w_$s<w_$n;w_$s++)w_$h[w_$s]=this._components[w_$A[w_$s]]}else w_$h.length=0},w_$l.getComponentByIndex=function(w_$B){return this._components[w_$B]},w_$l.removeComponentByType=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0);var w_$l=this._componentsMap.indexOf(w_$B);-1!==w_$l&&this._removeComponent(w_$l,w_$h)},w_$l.removeComponentsByType=function(w_$B){var w_$h=this._componentsMap.indexOf(w_$B);if(-1!==w_$h)for(var w_$l=this._typeComponentsIndices[w_$h],w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$l.length<w_$n?w_$n--:w_$A++)this._removeComponent(w_$h,w_$A)},w_$l.removeAllComponent=function(){for(var w_$B=0,w_$h=this._componentsMap.length;w_$B<w_$h;this._componentsMap.length<w_$h?w_$h--:w_$B++)this.removeComponentsByType(this._componentsMap[w_$B])},w_$l._updateComponents=function(w_$B){for(var w_$h=0,w_$l=this._components.length;w_$h<w_$l;w_$h++){var w_$A=this._components[w_$h];!w_$A.started&&(w_$A._start(w_$B),w_$A.started=!0),w_$A.enable&&w_$A._update(w_$B)}},w_$l._lateUpdateComponents=function(w_$B){for(var w_$h=0;w_$h<this._components.length;w_$h++){var w_$l=this._components[w_$h];!w_$l.started&&(w_$l._start(w_$B),w_$l.started=!0),w_$l.enable&&w_$l._lateUpdate(w_$B)}},w_$l._preRenderUpdateComponents=function(w_$B){for(var w_$h=0;w_$h<this._components.length;w_$h++){var w_$l=this._components[w_$h];!w_$l.started&&(w_$l._start(w_$B),w_$l.started=!0),w_$l.enable&&w_$l._preRenderUpdate(w_$B)}},w_$l._postRenderUpdateComponents=function(w_$B){for(var w_$h=0;w_$h<this._components.length;w_$h++){var w_$l=this._components[w_$h];!w_$l.started&&(w_$l._start(w_$B),w_$l.started=!0),w_$l.enable&&w_$l._postRenderUpdate(w_$B)}},w_$h}(),w_$ah=function(w_$A){function w_$B(){w_$B.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new w_$bh,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new w_$Zh(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}w_$Q(w_$B,"laya.d3.core.material.BaseMaterial",w_$A);var w_$h=w_$B.prototype;return w_$o.imps(w_$h,{"laya.d3.core.IClone":!0}),w_$h._addShaderDefine=function(w_$B){this._shaderDefineValue|=w_$B},w_$h._removeShaderDefine=function(w_$B){this._shaderDefineValue&=~w_$B},w_$h._addDisablePublicShaderDefine=function(w_$B){this._disablePublicShaderDefine|=w_$B},w_$h._removeDisablePublicShaderDefine=function(w_$B){this._disablePublicShaderDefine&=~w_$B},w_$h._setBuffer=function(w_$B,w_$h){this._shaderValues.setValue(w_$B,w_$h),this._values[w_$B]=w_$h},w_$h._getBuffer=function(w_$B){return this._values[w_$B]},w_$h._setMatrix4x4=function(w_$B,w_$h){this._shaderValues.setValue(w_$B,w_$h?w_$h.elements:null),this._values[w_$B]=w_$h},w_$h._getMatrix4x4=function(w_$B){return this._values[w_$B]},w_$h._setInt=function(w_$B,w_$h){this._shaderValues.setValue(w_$B,w_$h),this._values[w_$B]=w_$h},w_$h._getInt=function(w_$B){return this._values[w_$B]},w_$h._setNumber=function(w_$B,w_$h){this._shaderValues.setValue(w_$B,w_$h),this._values[w_$B]=w_$h},w_$h._getNumber=function(w_$B){return this._values[w_$B]},w_$h._setBool=function(w_$B,w_$h){this._shaderValues.setValue(w_$B,w_$h),this._values[w_$B]=w_$h},w_$h._getBool=function(w_$B){return this._values[w_$B]},w_$h._setVector2=function(w_$B,w_$h){this._shaderValues.setValue(w_$B,w_$h?w_$h.elements:null),this._values[w_$B]=w_$h},w_$h._getVector2=function(w_$B){return this._values[w_$B]},w_$h._setColor=function(w_$B,w_$h){this._shaderValues.setValue(w_$B,w_$h?w_$h.elements:null),this._values[w_$B]=w_$h},w_$h._getColor=function(w_$B){return this._values[w_$B]},w_$h._setTexture=function(w_$B,w_$h){var w_$l=this._values[w_$B];this._values[w_$B]=w_$h,this._shaderValues.setValue(w_$B,w_$h),0<this.referenceCount&&(w_$l&&w_$l._removeReference(),w_$h&&w_$h._addReference())},w_$h._getTexture=function(w_$B){return this._values[w_$B]},w_$h._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},w_$h._getShader=function(w_$B,w_$h,w_$l){var w_$A=(w_$B|w_$h)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(w_$A,w_$l,this._shaderDefineValue),this._shader},w_$h._setRenderStateBlendDepth=function(){var w_$B=w_$S.mainContext;switch(w_$N.setDepthMask(w_$B,this.depthWrite),0===this.depthTest?w_$N.setDepthTest(w_$B,!1):(w_$N.setDepthTest(w_$B,!0),w_$N.setDepthFunc(w_$B,this.depthTest)),this.blend){case 0:w_$N.setBlend(w_$B,!1);break;case 1:w_$N.setBlend(w_$B,!0),w_$N.setBlendFunc(w_$B,this.srcBlend,this.dstBlend);break;case 2:w_$N.setBlend(w_$B,!0)}},w_$h._setRenderStateFrontFace=function(w_$B,w_$h){var w_$l=w_$S.mainContext,w_$A=0;switch(this.cull){case 0:w_$N.setCullFace(w_$l,!1);break;case 1:w_$N.setCullFace(w_$l,!0),w_$A=w_$B?w_$h&&w_$h._isFrontFaceInvert?2305:2304:w_$h&&w_$h._isFrontFaceInvert?2304:2305,w_$N.setFrontFace(w_$l,w_$A);break;case 2:w_$N.setCullFace(w_$l,!0),w_$A=w_$B?w_$h&&w_$h._isFrontFaceInvert?2304:2305:w_$h&&w_$h._isFrontFaceInvert?2305:2304,w_$N.setFrontFace(w_$l,w_$A)}},w_$h.onAsynLoaded=function(w_$B,w_$h,w_$l){var w_$A=w_$h[0],w_$n=w_$h[1];switch(w_$A.version){case"LAYAMATERIAL:01":var w_$s=0,w_$X=0,w_$Z=w_$A.props;for(var w_$t in w_$Z)switch(w_$t){case"vectors":var w_$P=w_$Z[w_$t];for(w_$s=0,w_$X=w_$P.length;w_$s<w_$X;w_$s++){var w_$G=w_$P[w_$s],w_$T=w_$G.value;switch(w_$T.length){case 2:this[w_$G.name]=new w_$sh(w_$T[0],w_$T[1]);break;case 3:this[w_$G.name]=new w_$Xh(w_$T[0],w_$T[1],w_$T[2]);break;case 4:this[w_$G.name]=new w_$Zh(w_$T[0],w_$T[1],w_$T[2],w_$T[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var w_$b=w_$Z[w_$t];for(w_$s=0,w_$X=w_$b.length;w_$s<w_$X;w_$s++){var w_$Q=w_$b[w_$s],w_$i=w_$Q.path;w_$i&&(this[w_$Q.name]=w_$J.getRes(w_$n[w_$i]))}break;case"defines":var w_$$=w_$Z[w_$t];for(w_$s=0,w_$X=w_$$.length;w_$s<w_$X;w_$s++){var w_$V=this._shaderCompile.getMaterialDefineByName(w_$$[w_$s]);this._addShaderDefine(w_$V)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[w_$t]=w_$Z[w_$t];break;case"renderQueue":switch(w_$Z[w_$t]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[w_$t]=w_$Z[w_$t]}break;case"LAYAMATERIAL:02":for(w_$t in w_$Z=w_$A.props)switch(w_$t){case"vectors":for(w_$s=0,w_$X=(w_$P=w_$Z[w_$t]).length;w_$s<w_$X;w_$s++)switch((w_$T=(w_$G=w_$P[w_$s]).value).length){case 2:this[w_$G.name]=new w_$sh(w_$T[0],w_$T[1]);break;case 3:this[w_$G.name]=new w_$Xh(w_$T[0],w_$T[1],w_$T[2]);break;case 4:this[w_$G.name]=new w_$Zh(w_$T[0],w_$T[1],w_$T[2],w_$T[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(w_$s=0,w_$X=(w_$b=w_$Z[w_$t]).length;w_$s<w_$X;w_$s++)(w_$i=(w_$Q=w_$b[w_$s]).path)&&(this[w_$Q.name]=w_$J.getRes(w_$n[w_$i]));break;case"defines":for(w_$s=0,w_$X=(w_$$=w_$Z[w_$t]).length;w_$s<w_$X;w_$s++)w_$V=this._shaderCompile.getMaterialDefineByName(w_$$[w_$s]),this._addShaderDefine(w_$V);break;default:this[w_$t]=w_$Z[w_$t]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},w_$h._addReference=function(){w_$A.prototype._addReference.call(this);for(var w_$B=0,w_$h=this._values.length;w_$B<w_$h;w_$B++){var w_$l=this._values[w_$B];w_$l&&w_$l instanceof laya.d3.resource.BaseTexture&&w_$l._addReference()}},w_$h._removeReference=function(){w_$A.prototype._removeReference.call(this);for(var w_$B=0,w_$h=this._values.length;w_$B<w_$h;w_$B++){var w_$l=this._values[w_$B];w_$l&&w_$l instanceof laya.d3.resource.BaseTexture&&w_$l._removeReference()}},w_$h.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},w_$h.setShaderName=function(w_$B){var w_$h=w_$jh.nameKey.getID(w_$B);if(-1===w_$h)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=w_$Uh._preCompileShader[w_$h]},w_$h.cloneTo=function(w_$B){var w_$h=w_$B;w_$h.name=this.name,w_$h.cull=this.cull,w_$h.blend=this.blend,w_$h.srcBlend=this.srcBlend,w_$h.dstBlend=this.dstBlend,w_$h.srcBlendRGB=this.srcBlendRGB,w_$h.dstBlendRGB=this.dstBlendRGB,w_$h.srcBlendAlpha=this.srcBlendAlpha,w_$h.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(w_$h.blendConstColor),w_$h.blendEquation=this.blendEquation,w_$h.blendEquationRGB=this.blendEquationRGB,w_$h.blendEquationAlpha=this.blendEquationAlpha,w_$h.depthTest=this.depthTest,w_$h.depthWrite=this.depthWrite,w_$h.renderQueue=this.renderQueue,w_$h._shader=this._shader,w_$h._disablePublicShaderDefine=this._disablePublicShaderDefine,w_$h._shaderDefineValue=this._shaderDefineValue;var w_$l,w_$A=0,w_$n=w_$h._shaderValues;w_$h._shaderValues.data.length=this._shaderValues.data.length;var w_$s=this._values.length,w_$X=w_$h._values;for(w_$A=0,w_$l=w_$X.length=w_$s;w_$A<w_$l;w_$A++){var w_$Z=this._values[w_$A];if(w_$Z)if("number"==typeof w_$Z)w_$X[w_$A]=w_$Z,w_$n.data[w_$A]=w_$Z;else if("number"==typeof w_$Z&&Math.floor(w_$Z)==w_$Z)w_$X[w_$A]=w_$Z,w_$n.data[w_$A]=w_$Z;else if("boolean"==typeof w_$Z)w_$X[w_$A]=w_$Z,w_$n.data[w_$A]=w_$Z;else if(w_$Z instanceof laya.d3.math.Vector2){var w_$t=w_$X[w_$A]||(w_$X[w_$A]=new w_$sh);w_$Z.cloneTo(w_$t),w_$n.data[w_$A]=w_$t.elements}else if(w_$Z instanceof laya.d3.math.Vector3){var w_$P=w_$X[w_$A]||(w_$X[w_$A]=new w_$Xh);w_$Z.cloneTo(w_$P),w_$n.data[w_$A]=w_$P.elements}else if(w_$Z instanceof laya.d3.math.Vector4){var w_$G=w_$X[w_$A]||(w_$X[w_$A]=new w_$Zh);w_$Z.cloneTo(w_$G),w_$n.data[w_$A]=w_$G.elements}else if(w_$Z instanceof laya.d3.math.Matrix4x4){var w_$T=w_$X[w_$A]||(w_$X[w_$A]=new w_$Bh);w_$Z.cloneTo(w_$T),w_$n.data[w_$A]=w_$T.elements}else w_$Z instanceof laya.d3.resource.BaseTexture&&(w_$X[w_$A]=w_$Z,w_$n.data[w_$A]=w_$Z)}},w_$h.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$i(0,w_$h,"alphaTestValue",function(){return this._getNumber(0)},function(w_$B){this._setNumber(0,w_$B)}),w_$i(0,w_$h,"alphaTest",function(){return this._alphaTest},function(w_$B){(this._alphaTest=w_$B)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),w_$B.__init__=function(){w_$B.SHADERDEFINE_ALPHATEST=w_$B.shaderDefines.registerDefine("ALPHATEST")},w_$B.RENDERQUEUE_OPAQUE=2e3,w_$B.RENDERQUEUE_ALPHATEST=2450,w_$B.RENDERQUEUE_TRANSPARENT=3e3,w_$B.CULL_NONE=0,w_$B.CULL_FRONT=1,w_$B.CULL_BACK=2,w_$B.BLEND_DISABLE=0,w_$B.BLEND_ENABLE_ALL=1,w_$B.BLEND_ENABLE_SEPERATE=2,w_$B.BLENDPARAM_ZERO=0,w_$B.BLENDPARAM_ONE=1,w_$B.BLENDPARAM_SRC_COLOR=768,w_$B.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,w_$B.BLENDPARAM_DST_COLOR=774,w_$B.BLENDPARAM_ONE_MINUS_DST_COLOR=775,w_$B.BLENDPARAM_SRC_ALPHA=770,w_$B.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,w_$B.BLENDPARAM_DST_ALPHA=772,w_$B.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,w_$B.BLENDPARAM_SRC_ALPHA_SATURATE=776,w_$B.BLENDEQUATION_ADD=0,w_$B.BLENDEQUATION_SUBTRACT=1,w_$B.BLENDEQUATION_REVERSE_SUBTRACT=2,w_$B.DEPTHTEST_OFF=0,w_$B.DEPTHTEST_NEVER=512,w_$B.DEPTHTEST_LESS=513,w_$B.DEPTHTEST_EQUAL=514,w_$B.DEPTHTEST_LEQUAL=515,w_$B.DEPTHTEST_GREATER=516,w_$B.DEPTHTEST_NOTEQUAL=517,w_$B.DEPTHTEST_GEQUAL=518,w_$B.DEPTHTEST_ALWAYS=519,w_$B.SHADERDEFINE_ALPHATEST=1,w_$B.ALPHATESTVALUE=0,w_$T(w_$B,["shaderDefines",function(){return this.shaderDefines=new w_$Gh}]),w_$B}(w_$V),w_$Sh=function(w_$B){function w_$h(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,w_$h.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}w_$Q(w_$h,"laya.d3.resource.BaseTexture",w_$V);var w_$l=w_$h.prototype;return w_$i(0,w_$l,"width",function(){return this._width}),w_$i(0,w_$l,"repeat",function(){return this._repeat},function(w_$B){if(this._repeat!==w_$B&&(this._repeat=w_$B,this._source)){var w_$h=w_$S.mainContext;w_$N.bindTexture(w_$h,this._type,this._source),w_$C.isPOT(this._width,this._height)&&this._repeat?(w_$h.texParameteri(this._type,10242,10497),w_$h.texParameteri(this._type,10243,10497)):(w_$h.texParameteri(this._type,10242,33071),w_$h.texParameteri(this._type,10243,33071))}}),w_$i(0,w_$l,"height",function(){return this._height}),w_$i(0,w_$l,"magFifter",function(){return this._magFifter},function(w_$B){(this._magFifter=w_$B)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(w_$B)}),w_$i(0,w_$l,"wrapModeV",function(){return this._wrapModeV}),w_$i(0,w_$l,"size",function(){return this._size}),w_$i(0,w_$l,"wrapModeU",function(){return this._wrapModeU}),w_$i(0,w_$l,"mipmap",function(){return this._mipmap},function(w_$B){this._mipmap=w_$B,this._mipmap!=w_$B&&this._conchTexture&&this._conchTexture.setMipMap(w_$B)}),w_$i(0,w_$l,"minFifter",function(){return this._minFifter},function(w_$B){this._minFifter=w_$B,this._minFifter!=w_$B&&this._conchTexture&&this._conchTexture.setMinFifter(w_$B)}),w_$i(0,w_$l,"format",function(){return this._format}),w_$i(0,w_$l,"source",function(){return this.activeResource(),this._source}),w_$i(0,w_$l,"defaulteTexture",function(){return w_$Fh.grayTexture}),w_$h.WARPMODE_REPEAT=0,w_$h.WARPMODE_CLAMP=1,w_$h}(),w_$Nh=function(w_$B){function w_$h(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,w_$h.__super.call(this),this._boundingBoxCorners=w_$A(8,null)}w_$Q(w_$h,"laya.d3.resource.models.BaseMesh",w_$V);var w_$l=w_$h.prototype;return w_$l._getPositions=function(){throw new Error("未Override,请重载该属性！")},w_$l._generateBoundingObject=function(){this._boundingSphere=new w_$qB(new w_$Xh,0),w_$qB.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new w_$LB(new w_$Xh,new w_$Xh),w_$LB.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},w_$l.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},w_$l.getRenderElement=function(w_$B){throw new Error("未Override,请重载该属性！")},w_$i(0,w_$l,"subMeshCount",function(){return this._subMeshCount}),w_$i(0,w_$l,"boundingBox",function(){return this._boundingBox}),w_$i(0,w_$l,"boundingBoxCorners",function(){return this._boundingBoxCorners}),w_$i(0,w_$l,"boundingSphere",function(){return this._boundingSphere}),w_$h}(),w_$Rh=(function(w_$B){function w_$h(){w_$h.__super.call(this)}w_$Q(w_$h,"laya.d3.component.Script",w_$yh);var w_$l=w_$h.prototype;w_$l.onTriggerEnter=function(w_$B){},w_$l.onTriggerExit=function(w_$B){},w_$l.onTriggerStay=function(w_$B){},w_$i(0,w_$l,"isSingleton",function(){return w_$h._isSingleton}),w_$h._isSingleton=!1}(),function(w_$B){function w_$h(w_$B){this._owner=null,this._sharedMesh=null,w_$h.__super.call(this),this._owner=w_$B}w_$Q(w_$h,"laya.d3.core.MeshFilter",w_$B);var w_$l=w_$h.prototype;return w_$l._sharedMeshLoaded=function(){this.event("loaded")},w_$l._destroy=function(){w_$B.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},w_$i(0,w_$l,"sharedMesh",function(){return this._sharedMesh},function(w_$B){var w_$h=this._sharedMesh;w_$h&&w_$h._removeReference(),(this._sharedMesh=w_$B)._addReference(),this.event("meshchanged",[this,w_$h,w_$B]),w_$B.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),w_$i(0,w_$l,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),w_$i(0,w_$l,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),w_$i(0,w_$l,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),w_$i(0,w_$l,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),w_$h}(w_$Ch)),w_$Wh=function(w_$B){function w_$h(w_$B){w_$h.__super.call(this,w_$B),w_$B.meshFilter.on("meshchanged",this,this._onMeshChanged)}w_$Q(w_$h,"laya.d3.core.MeshRender",w_$oh);var w_$l=w_$h.prototype;return w_$l._onMeshChanged=function(w_$B,w_$h,w_$l){w_$l.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:w_$l.once("loaded",this,this._onMeshLoaed)},w_$l._onMeshLoaed=function(w_$B,w_$h){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},w_$l._calculateBoundingSphereByInitSphere=function(w_$B){var w_$h=NaN,w_$l=this._owner.transform,w_$A=w_$l.scale.elements,w_$n=Math.abs(w_$A[0]),w_$s=Math.abs(w_$A[1]),w_$X=Math.abs(w_$A[2]);w_$h=w_$s<=w_$n&&w_$X<=w_$n?w_$n:w_$X<=w_$s?w_$s:w_$X,w_$Xh.transformCoordinate(w_$B.center,w_$l.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=w_$B.radius*w_$h},w_$l._calculateBoundBoxByInitCorners=function(w_$B){for(var w_$h=this._owner.transform.worldMatrix,w_$l=0;w_$l<8;w_$l++)w_$Xh.transformCoordinate(w_$B[w_$l],w_$h,w_$oh._tempBoundBoxCorners[w_$l]);w_$LB.createfromPoints(w_$oh._tempBoundBoxCorners,this._boundingBox)},w_$l._calculateBoundingSphere=function(){var w_$B=this._owner.meshFilter.sharedMesh;null==w_$B||null==w_$B.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(w_$B.boundingSphere)},w_$l._calculateBoundingBox=function(){var w_$B=this._owner.meshFilter.sharedMesh;null==w_$B||null==w_$B.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(w_$B.boundingBoxCorners)},w_$l._renderUpdate=function(w_$B){var w_$h=this._owner.transform;if(w_$h){this._setShaderValueMatrix4x4(0,w_$h.worldMatrix);var w_$l=this._owner.getProjectionViewWorldMatrix(w_$B);this._setShaderValueMatrix4x4(1,w_$l)}else this._setShaderValueMatrix4x4(0,w_$Bh.DEFAULT),this._setShaderValueMatrix4x4(1,w_$B);return w_$Jh.debugMode&&this._renderRenderableBoundBox(),!0},w_$h}(),w_$Mh=function(w_$h){function w_$A(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,w_$A.__super.call(this),this._renderState=new w_$I,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new w_$bh,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new w_$hB,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new w_$Xh(.7,.7,.7),this.ambientColor=new w_$Xh(.212,.227,.259),w_$S.shaderHighPrecision&&this.addShaderDefine(w_$Uh.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}w_$Q(w_$A,"laya.d3.core.scene.Scene",w_$h);var w_$B=w_$A.prototype;return w_$o.imps(w_$B,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),w_$B._setUrl=function(w_$B){this._url=w_$B},w_$B._getGroup=function(){return this._group},w_$B._setGroup=function(w_$B){this._group=w_$B},w_$B._display=function(){w_$o.stage._scenes.push(this),w_$o.stage._scenes.sort(w_$A._sortScenes);for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++){var w_$l=this._childs[w_$B];w_$l.active&&w_$l._activeHierarchy()}},w_$B._unDisplay=function(){var w_$B=w_$o.stage._scenes;w_$B.splice(w_$B.indexOf(this),1);for(var w_$h=0,w_$l=this._childs.length;w_$h<w_$l;w_$h++){var w_$A=this._childs[w_$h];w_$A.active&&w_$A._inActiveHierarchy()}},w_$B._addChild3D=function(w_$B){w_$B.transform._onWorldTransform(),w_$B._setBelongScene(this),this.displayedInStage&&w_$B.active&&w_$B._activeHierarchy()},w_$B._removeChild3D=function(w_$B){w_$B.transform.parent=null,this.displayedInStage&&w_$B.active&&w_$B._inActiveHierarchy(),w_$B._setUnBelongScene()},w_$B.initOctree=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$n&&(w_$n=6),this.treeSize=new w_$Xh(w_$B,w_$h,w_$l),this.treeLevel=w_$n,this.treeRoot=new w_$L(this,0),this.treeRoot.init(w_$A,this.treeSize)},w_$B._prepareUpdateToRenderState=function(w_$B,w_$h){w_$h.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,w_$h.scene=this},w_$B._prepareSceneToRender=function(w_$B){var w_$h=this._lights.length;if(0<w_$h)for(var w_$l=0,w_$A=0;w_$A<w_$h&&!(this._lights[w_$A]._prepareToScene(w_$B)&&++w_$l>=this._enableLightCount);w_$A++);},w_$B._updateChilds=function(w_$B){for(var w_$h=0,w_$l=this._childs.length;w_$h<w_$l;++w_$h)this._childs[w_$h]._update(w_$B)},w_$B._preRenderScene=function(w_$B,w_$h,w_$l){var w_$A,w_$n=w_$h._viewMatrix,w_$s=w_$h._projectionMatrix,w_$X=w_$h._projectionViewMatrix,w_$Z=0,w_$t=w_$h.camera;for(w_$t.useOcclusionCulling?this.treeRoot?w_$lB.renderObjectCullingOctree(w_$l,this,w_$t,w_$n,w_$s,w_$X):w_$lB.renderObjectCulling(w_$l,this,w_$t,w_$n,w_$s,w_$X):w_$lB.renderObjectCullingNoBoundFrustum(this,w_$t,w_$n,w_$s,w_$X),w_$Z=0,w_$A=this._quenes.length;w_$Z<w_$A;w_$Z++)this._quenes[w_$Z]&&this._quenes[w_$Z]._preRender(w_$h)},w_$B._clear=function(w_$B,w_$h){var w_$l=w_$h._viewport,w_$A=w_$h.camera,w_$n=w_$l.x,w_$s=w_$A.renderTargetSize.height-w_$l.y-w_$l.height,w_$X=w_$l.width,w_$Z=w_$l.height;w_$B.viewport(w_$n,w_$s,w_$X,w_$Z);var w_$t=256,w_$P=w_$A.renderTarget;switch(w_$A.clearFlag){case 0:var w_$G=w_$A.clearColor;if(w_$G){w_$B.enable(3089),w_$B.scissor(w_$n,w_$s,w_$X,w_$Z);var w_$T=w_$G.elements;w_$B.clearColor(w_$T[0],w_$T[1],w_$T[2],w_$T[3]),w_$t|=16384}if(w_$P)switch(w_$G||(w_$t=16384),w_$P.depthStencilFormat){case 33189:w_$t|=256;break;case 36168:w_$t|=1024;break;case 34041:w_$t|=256,w_$t|=1024}w_$B.clear(w_$t),w_$G&&w_$B.disable(3089);break;case 1:case 2:if(w_$P)switch(w_$t=16384,w_$P.depthStencilFormat){case 33189:w_$t|=256;break;case 36168:w_$t|=1024;break;case 34041:w_$t|=256,w_$t|=1024}w_$B.clear(w_$t);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},w_$B._renderScene=function(w_$B,w_$h){var w_$l,w_$A,w_$n=w_$h.camera,w_$s=0;for(w_$s=0;w_$s<2;w_$s++)(w_$A=this._quenes[w_$s])&&(w_$n.renderTarget?w_$A._render(w_$h,!0):w_$A._render(w_$h,!1));if(1===w_$n.clearFlag){var w_$X=w_$n.sky;w_$X&&(w_$N.setCullFace(w_$B,!1),w_$N.setDepthFunc(w_$B,515),w_$N.setDepthMask(w_$B,!1),w_$X._render(w_$h),w_$N.setDepthFunc(w_$B,513),w_$N.setDepthMask(w_$B,!0))}for(w_$s=2,w_$l=this._quenes.length;w_$s<w_$l;w_$s++)(w_$A=this._quenes[w_$s])&&(w_$A._sortAlpha(w_$h.camera.transform.position),w_$n.renderTarget?w_$A._render(w_$h,!0):w_$A._render(w_$h,!1))},w_$B._set3DRenderConfig=function(w_$B){w_$B.disable(3042),w_$N._blend=!1,w_$B.blendFunc(770,771),w_$N._sFactor=770,w_$N._dFactor=771,w_$B.disable(2929),w_$N._depthTest=!1,w_$B.enable(2884),w_$N._cullFace=!0,w_$B.depthMask(1),w_$N._depthMask=!0,w_$B.frontFace(2304),w_$N._frontFace=2304},w_$B._set2DRenderConfig=function(w_$B){w_$N.setBlend(w_$B,!0),w_$N.setBlendFunc(w_$B,1,771),w_$N.setDepthTest(w_$B,!1),w_$N.setCullFace(w_$B,!1),w_$N.setDepthMask(w_$B,!0),w_$N.setFrontFace(w_$B,2305),w_$B.viewport(0,0,w_$G.width,w_$G.height)},w_$B._parseCustomProps=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$A.customProps.lightmaps,w_$s=w_$n.length,w_$X=this._lightmaps;w_$X.length=w_$s;for(var w_$Z=0;w_$Z<w_$s;w_$Z++)w_$X[w_$Z]=w_$J.getRes(w_$h[w_$n[w_$Z].replace(".exr",".png")]);this.setlightmaps(w_$X);var w_$t=w_$A.customProps.ambientColor;w_$t&&(this.ambientColor=new w_$Xh(w_$t[0],w_$t[1],w_$t[2]));var w_$P=w_$A.customProps.fogColor;w_$P&&(this.fogColor=new w_$Xh(w_$P[0],w_$P[1],w_$P[2]))},w_$B._addLight=function(w_$B){this._lights.indexOf(w_$B)<0&&this._lights.push(w_$B)},w_$B._removeLight=function(w_$B){var w_$h=this._lights.indexOf(w_$B);0<=w_$h&&this._lights.splice(w_$h,1)},w_$B._updateScene=function(){var w_$B=this._renderState;this._prepareUpdateToRenderState(w_$S.mainContext,w_$B),this._updateComponents(w_$B),this._updateChilds(w_$B),this._lateUpdateComponents(w_$B),this._time+=w_$B.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},w_$B._updateSceneConch=function(){var w_$B=this._renderState;this._prepareUpdateToRenderState(w_$S.mainContext,w_$B),this._updateComponents(w_$B),this._lateUpdateComponents(w_$B),this._prepareSceneToRender(w_$B);for(var w_$h=0,w_$l=this._cameraPool.length;w_$h<w_$l;w_$h++){var w_$A=this._cameraPool[w_$h];(w_$B.camera=w_$A)._prepareCameraToRender()}},w_$B._preRenderShadow=function(w_$B,w_$h,w_$l,w_$A,w_$n){this.treeRoot?w_$lB.renderShadowObjectCullingOctree(this,w_$h,w_$l,w_$A,w_$n):w_$lB.renderShadowObjectCulling(this,w_$h,w_$l,w_$A,w_$n);for(var w_$s=0,w_$X=w_$l.length;w_$s<w_$X;w_$s++)w_$l[w_$s]&&w_$l[w_$s]._preRender(w_$B)},w_$B._renderShadowMap=function(w_$B,w_$h,w_$l){var w_$A=this.parallelSplitShadowMaps[0];w_$A._calcAllLightCameraInfo(w_$l);var w_$n,w_$s,w_$X,w_$Z=w_$A.PSSMNum;if(this._preRenderShadow(w_$h,w_$A._lightCulling,w_$A._shadowQuenes,w_$A._lightVPMatrix[0],w_$Z),this.addShaderDefine(w_$Qh.SHADERDEFINE_CAST_SHADOW),1<w_$Z)for(var w_$t=0;w_$t<w_$Z;w_$t++)w_$n=w_$A.getRenderTarget(w_$t+1),w_$A.beginRenderTarget(w_$t+1),w_$B.clearColor(1,1,1,1),w_$B.clear(16640),w_$B.viewport(0,0,w_$n.width,w_$n.height),w_$h.camera=w_$X=w_$A.getLightCamera(w_$t),w_$X._prepareCameraToRender(),w_$X._prepareCameraViewProject(w_$X.viewMatrix,w_$X.projectionMatrix),w_$h._projectionViewMatrix=w_$A._lightVPMatrix[w_$t+1],(w_$s=w_$A._shadowQuenes[w_$t])._preRender(w_$h),w_$s._renderShadow(w_$h,!1),w_$A.endRenderTarget(w_$t+1);else w_$n=w_$A.getRenderTarget(1),w_$A.beginRenderTarget(1),w_$B.clearColor(1,1,1,1),w_$B.clear(16640),w_$B.viewport(0,0,w_$n.width,w_$n.height),w_$h.camera=w_$X=w_$A.getLightCamera(0),w_$X._prepareCameraToRender(),w_$X._prepareCameraViewProject(w_$X.viewMatrix,w_$X.projectionMatrix),w_$h._projectionViewMatrix=w_$A._lightVPMatrix[0],(w_$s=w_$A._shadowQuenes[0])._preRender(w_$h),w_$s._renderShadow(w_$h,!0),w_$A.endRenderTarget(1);this.removeShaderDefine(w_$Qh.SHADERDEFINE_CAST_SHADOW)},w_$B.addTreeNode=function(w_$B){this.treeRoot.addTreeNode(w_$B)},w_$B.removeTreeNode=function(w_$B){this.treeSize&&w_$B._treeNode&&w_$B._treeNode.removeObject(w_$B)},w_$B.setlightmaps=function(w_$B){this._lightmaps=w_$B;for(var w_$h=0,w_$l=this._renderableSprite3Ds.length;w_$h<w_$l;w_$h++)this._renderableSprite3Ds[w_$h]._render._applyLightMapParams()},w_$B.getlightmaps=function(){return this._lightmaps},w_$B.addChildAt=function(w_$B,w_$h){if(!(w_$B instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(w_$B&&w_$B.__className));if(!w_$B||this.destroyed||w_$B===this)return w_$B;if(w_$B.zOrder&&this._set$P("hasZorder",!0),0<=w_$h&&w_$h<=this._childs.length){if(w_$B._parent===this){var w_$l=this.getChildIndex(w_$B);this._childs.splice(w_$l,1),this._childs.splice(w_$h,0,w_$B),this.conchModel&&(this.conchModel.removeChild(w_$B.conchModel),this.conchModel.addChildAt(w_$B.conchModel,w_$h)),this._childChanged()}else w_$B.parent&&w_$B.parent.removeChild(w_$B),this._childs===w_$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(w_$h,0,w_$B),this.conchModel&&this.conchModel.addChildAt(w_$B.conchModel,w_$h),(w_$B.parent=this)._addChild3D(w_$B);return w_$B}throw new Error("appendChildAt:The index is out of bounds")},w_$B.addChild=function(w_$B){if(!(w_$B instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!w_$B||this.destroyed||w_$B===this)return w_$B;if(w_$B.zOrder&&this._set$P("hasZorder",!0),w_$B._parent===this){var w_$h=this.getChildIndex(w_$B);w_$h!==this._childs.length-1&&(this._childs.splice(w_$h,1),this._childs.push(w_$B),this.conchModel&&(this.conchModel.removeChild(w_$B.conchModel),this.conchModel.addChildAt(w_$B.conchModel,this._childs.length-1)),this._childChanged())}else w_$B.parent&&w_$B.parent.removeChild(w_$B),this._childs===w_$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(w_$B),this.conchModel&&this.conchModel.addChildAt(w_$B.conchModel,this._childs.length-1),(w_$B.parent=this)._childChanged(),this._addChild3D(w_$B);return w_$B},w_$B.removeChildAt=function(w_$B){var w_$h=this.getChildAt(w_$B);return w_$h&&(this._removeChild3D(w_$h),this._childs.splice(w_$B,1),this.conchModel&&this.conchModel.removeChild(w_$h.conchModel),w_$h.parent=null),w_$h},w_$B.removeChildren=function(w_$B,w_$h){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=2147483647),this._childs&&0<this._childs.length){var w_$l=this._childs;if(0===w_$B&&w_$s<=w_$h){var w_$A=w_$l;this._childs=w_$P.ARRAY_EMPTY}else w_$A=w_$l.splice(w_$B,w_$h-w_$B);for(var w_$n=0,w_$s=w_$A.length;w_$n<w_$s;w_$n++)this._removeChild3D(w_$A[w_$n]),w_$A[w_$n].parent=null,this.conchModel&&this.conchModel.removeChild(w_$A[w_$n].conchModel)}return this},w_$B.addFrustumCullingObject=function(w_$B){this.treeRoot?this.addTreeNode(w_$B):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(w_$B):this._cullingRenders[this._cullingRendersLength]=w_$B,w_$B._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},w_$B.removeFrustumCullingObject=function(w_$B){if(this.treeRoot)this.removeTreeNode(w_$B);else{this._cullingRendersLength--;var w_$h=w_$B._indexInSceneFrustumCullingObjects;if(w_$h!==this._cullingRendersLength){var w_$l=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[w_$h]=w_$l)._indexInSceneFrustumCullingObjects=w_$h,w_$B._indexInSceneFrustumCullingObjects=-1}}},w_$B.getRenderQueue=function(w_$B){return w_$B<3e3?this._quenes[1]||(this._quenes[1]=new w_$f(this)):this._quenes[2]||(this._quenes[2]=new w_$f(this))},w_$B.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new w_$f(this)},w_$B.addShaderDefine=function(w_$B){this._shaderDefineValue|=w_$B},w_$B.removeShaderDefine=function(w_$B){this._shaderDefineValue&=~w_$B},w_$B.addScript=function(w_$B){return this._addComponent(w_$B)},w_$B.getScriptByType=function(w_$B,w_$h){return void 0===w_$h&&(w_$h=0),this._getComponentByType(w_$B,w_$h)},w_$B.getScriptsByType=function(w_$B,w_$h){this._getComponentsByType(w_$B,w_$h)},w_$B.getScriptByIndex=function(w_$B){return this._getComponentByIndex(w_$B)},w_$B.removeScriptByType=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0),this._removeComponentByType(w_$B,w_$h)},w_$B.removeScriptsByType=function(w_$B){this._removeComponentByType(w_$B)},w_$B.removeAllScript=function(){this._removeAllComponent()},w_$B.render=function(w_$B,w_$h,w_$l){(w_$$._context.ctx._renderKey=0)<this._childs.length&&w_$B.addRenderObject(this)},w_$B.renderSubmit=function(){var w_$B=w_$S.mainContext,w_$h=this._renderState;this._set3DRenderConfig(w_$B),this._prepareSceneToRender(this._renderState);var w_$l,w_$A=0,w_$n=0;if(w_$Jh.debugMode||w_$L.debugMode)for(w_$A=0,w_$n=this._cameraPool.length;w_$A<w_$n;w_$A++)w_$l=this._cameraPool[w_$A],w_$Jh._debugPhasorSprite.begin(1,w_$l),w_$l.activeInHierarchy&&w_$l._renderCamera(w_$B,w_$h,this),w_$Jh._debugPhasorSprite.end();else for(w_$A=0,w_$n=this._cameraPool.length;w_$A<w_$n;w_$A++)(w_$l=this._cameraPool[w_$A]).activeInHierarchy&&w_$l._renderCamera(w_$B,w_$h,this);return this._set2DRenderConfig(w_$B),1},w_$B.onAsynLoaded=function(w_$B,w_$h,w_$l){var w_$A=w_$h[0];if("Scene"!==w_$A.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var w_$n=w_$h[1];w_$Vh._createNodeByJson(this,w_$A,this,w_$n),this.event("hierarchyloaded",[this]),this.__loaded=!0},w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this.destroyed||(w_$h.prototype.destroy.call(this,w_$B),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,w_$J.clearRes(this.url),this.loaded||w_$Jh._cancelLoadByUrl(this.url))},w_$B.getRenderType=function(){return 0},w_$B.releaseRender=function(){},w_$B._addComponent=function(w_$B){var w_$h,w_$l=this._componentsMap.indexOf(w_$B);if(-1===w_$l)w_$h=[],this._componentsMap.push(w_$B),this._typeComponentsIndices.push(w_$h);else if(w_$h=this._typeComponentsIndices[w_$l],this._components[w_$h[0]].isSingleton)throw new Error("无法单实例创建"+w_$B+"组件，"+w_$B+"组件已存在！");var w_$A=w_$n.getInstance(w_$B);w_$h.push(this._components.length),this._components.push(w_$A);return w_$A._initialize(this),w_$A},w_$B._removeComponent=function(w_$B,w_$h){var w_$l=this._typeComponentsIndices[w_$B],w_$A=w_$l[w_$h],w_$n=this._components[w_$A];this._components.splice(w_$A,1),w_$l.splice(w_$h,1),0===w_$l.length&&(this._typeComponentsIndices.splice(w_$B,1),this._componentsMap.splice(w_$B,1));for(var w_$s=0,w_$X=this._componentsMap.length;w_$s<w_$X;w_$s++)for(var w_$Z=(w_$l=this._typeComponentsIndices[w_$s]).length-1;0<=w_$Z;w_$Z--){var w_$t=w_$l[w_$Z];if(!(w_$A<w_$t))break;w_$l[w_$Z]=--w_$t}w_$n._destroy()},w_$B._getComponentByType=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0);var w_$l=this._componentsMap.indexOf(w_$B);return-1===w_$l?null:this._components[this._typeComponentsIndices[w_$l][w_$h]]},w_$B._getComponentsByType=function(w_$B,w_$h){var w_$l=this._componentsMap.indexOf(w_$B);if(-1!==w_$l){var w_$A=this._typeComponentsIndices[w_$l],w_$n=w_$A.length;w_$h.length=w_$n;for(var w_$s=0;w_$s<w_$n;w_$s++)w_$h[w_$s]=this._components[w_$A[w_$s]]}else w_$h.length=0},w_$B._getComponentByIndex=function(w_$B){return this._components[w_$B]},w_$B._removeComponentByType=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0);var w_$l=this._componentsMap.indexOf(w_$B);-1!==w_$l&&this._removeComponent(w_$l,w_$h)},w_$B._removeComponentsByType=function(w_$B){var w_$h=this._componentsMap.indexOf(w_$B);if(-1!==w_$h)for(var w_$l=this._typeComponentsIndices[w_$h],w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$l.length<w_$n?w_$n--:w_$A++)this._removeComponent(w_$h,w_$A)},w_$B._removeAllComponent=function(){for(var w_$B=0,w_$h=this._componentsMap.length;w_$B<w_$h;this._componentsMap.length<w_$h?w_$h--:w_$B++)this._removeComponentsByType(this._componentsMap[w_$B])},w_$B._updateComponents=function(w_$B){for(var w_$h=0,w_$l=this._components.length;w_$h<w_$l;w_$h++){var w_$A=this._components[w_$h];!w_$A.started&&(w_$A._start(w_$B),w_$A.started=!0),w_$A.enable&&w_$A._update(w_$B)}},w_$B._lateUpdateComponents=function(w_$B){for(var w_$h=0;w_$h<this._components.length;w_$h++){var w_$l=this._components[w_$h];!w_$l.started&&(w_$l._start(w_$B),w_$l.started=!0),w_$l.enable&&w_$l._lateUpdate(w_$B)}},w_$B._preRenderUpdateComponents=function(w_$B){for(var w_$h=0;w_$h<this._components.length;w_$h++){var w_$l=this._components[w_$h];!w_$l.started&&(w_$l._start(w_$B),w_$l.started=!0),w_$l.enable&&w_$l._preRenderUpdate(w_$B)}},w_$B._postRenderUpdateComponents=function(w_$B){for(var w_$h=0;w_$h<this._components.length;w_$h++){var w_$l=this._components[w_$h];!w_$l.started&&(w_$l._start(w_$B),w_$l.started=!0),w_$l.enable&&w_$l._postRenderUpdate(w_$B)}},w_$i(0,w_$B,"_loaded",null,function(w_$B){this.__loaded=w_$B}),w_$i(0,w_$B,"fogColor",function(){return this._fogColor},function(w_$B){this._fogColor=w_$B,this._shaderValues.setValue(0,w_$B.elements)}),w_$i(0,w_$B,"enableFog",function(){return this._enableFog},function(w_$B){this._enableFog!==w_$B&&((this._enableFog=w_$B)?(this.addShaderDefine(w_$Uh.SHADERDEFINE_FOG),this.removeShaderDefine(w_$Uh.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(w_$Uh.SHADERDEFINE_FOG))}),w_$i(0,w_$B,"url",function(){return this._url}),w_$i(0,w_$B,"loaded",function(){return this.__loaded}),w_$i(0,w_$B,"enableDepthFog",function(){return this._enableDepthFog},function(w_$B){this._enableDepthFog!=w_$B&&((this._enableDepthFog=w_$B)?(this.addShaderDefine(w_$Uh.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(w_$Uh.SHADERDEFINE_FOG)):this.removeShaderDefine(w_$Uh.SAHDERDEFINE_DEPTHFOG))}),w_$i(0,w_$B,"fogStart",function(){return this._fogStart},function(w_$B){this._fogStart=w_$B,this._shaderValues.setValue(1,w_$B)}),w_$i(0,w_$B,"fogRange",function(){return this._fogRange},function(w_$B){this._fogRange=w_$B,this._shaderValues.setValue(2,w_$B)}),w_$i(0,w_$B,"ambientColor",function(){return this._ambientColor},function(w_$B){this._ambientColor=w_$B,this._shaderValues.setValue(21,w_$B.elements)}),w_$i(0,w_$B,"scene",function(){return this}),w_$i(0,w_$B,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),w_$A._sortScenes=function(w_$B,w_$h){if(w_$B.parent!==w_$o.stage||w_$h.parent!==w_$o.stage)return w_$B.parent!==w_$o.stage&&w_$h.parent!==w_$o.stage?w_$A._sortScenes(w_$B.parent,w_$h.parent):w_$B.parent===w_$o.stage?-1:1;var w_$l=w_$o.stage._childs;return w_$l.indexOf(w_$B)-w_$l.indexOf(w_$h)},w_$A.load=function(w_$B){return w_$o.loader.create(w_$B,null,null,w_$A)},w_$A.FOGCOLOR=0,w_$A.FOGSTART=1,w_$A.FOGRANGE=2,w_$A.LIGHTDIRECTION=3,w_$A.LIGHTDIRCOLOR=4,w_$A.POINTLIGHTPOS=5,w_$A.POINTLIGHTRANGE=6,w_$A.POINTLIGHTATTENUATION=7,w_$A.POINTLIGHTCOLOR=8,w_$A.SPOTLIGHTPOS=9,w_$A.SPOTLIGHTDIRECTION=10,w_$A.SPOTLIGHTSPOT=11,w_$A.SPOTLIGHTRANGE=12,w_$A.SPOTLIGHTATTENUATION=13,w_$A.SPOTLIGHTCOLOR=14,w_$A.SHADOWDISTANCE=15,w_$A.SHADOWLIGHTVIEWPROJECT=16,w_$A.SHADOWMAPPCFOFFSET=17,w_$A.SHADOWMAPTEXTURE1=18,w_$A.SHADOWMAPTEXTURE2=19,w_$A.SHADOWMAPTEXTURE3=20,w_$A.AMBIENTCOLOR=21,w_$A.TIME=22,w_$A}(w_$v),w_$Eh=function(w_$B){function w_$h(w_$B){w_$h.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new w_$Bh,this._shaderValues=new w_$bh,this._colliders=[],this._id=++w_$h._uniqueIDCounter,this._transform=new w_$uh(this),this.name=w_$B||"Sprite3D-"+w_$h._nameNumberCounter++,this.layer=w_$W.currentCreationLayer,this.active=!0}w_$Q(w_$h,"laya.d3.core.Sprite3D",w_$zh);var w_$l=w_$h.prototype;return w_$o.imps(w_$l,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),w_$l._setUrl=function(w_$B){this._url=w_$B},w_$l._getGroup=function(){return this._group},w_$l._setGroup=function(w_$B){this._group=w_$B},w_$l._addChild3D=function(w_$B){w_$B.transform.parent=this.transform,this._hierarchyAnimator&&(!w_$B._hierarchyAnimator&&w_$B._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(w_$B,!0,[w_$B.name])),this._scene&&(w_$B._setBelongScene(this._scene),this._activeInHierarchy&&w_$B._active&&w_$B._activeHierarchy())},w_$l._removeChild3D=function(w_$B){w_$B.transform.parent=null,this._scene&&(this._activeInHierarchy&&w_$B._active&&w_$B._inActiveHierarchy(),w_$B._setUnBelongScene()),this._hierarchyAnimator&&(w_$B._hierarchyAnimator==this._hierarchyAnimator&&w_$B._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(w_$B,!1,[w_$B.name]))},w_$l._parseBaseCustomProps=function(w_$B){var w_$h=this.transform.localPosition;w_$B.translate?(w_$h.fromArray(w_$B.translate),w_$h.x*=100,w_$h.y*=100,w_$h.z*=100):w_$h.elements.fill(0),this.transform.localPosition=w_$h;var w_$l=this.transform.localRotation;w_$B.rotation?w_$l.fromArray(w_$B.rotation):w_$l.fromArray([0,0,0,-1]),this.transform.localRotation=w_$l;var w_$A=this.transform.localScale;w_$B.scale?w_$A.fromArray(w_$B.scale):w_$A.elements.fill(1),this.transform.localScale=w_$A;var w_$n=w_$B.layer;null!=w_$n&&(this.layer=w_$W.getLayerByNumber(w_$n))},w_$l._parseCustomComponent=function(w_$B,w_$h,w_$l){for(var w_$A in w_$l){var w_$n=w_$l[w_$A];switch(w_$A){case"Animator":var w_$s=this.addComponent(Animator);if(w_$n.avatarPath)w_$s.avatar=w_$J.getRes(w_$h[w_$n.avatarPath]);else{var w_$X=w_$n.avatar;if(w_$X){w_$s.avatar=w_$J.getRes(w_$h[w_$X.path]);var w_$Z=w_$X.linkSprites;w_$Z&&w_$B.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[w_$s,w_$Z])}}for(var w_$t=w_$n.clipPaths,w_$P=w_$t.length,w_$G=0;w_$G<w_$P;w_$G++)w_$s.addClip(w_$J.getRes(w_$h[w_$t[w_$G]]));w_$s.clip=w_$J.getRes(w_$h[w_$t[0]]);var w_$T=w_$n.playOnWake;void 0!==w_$T&&(w_$s.playOnWake=w_$T);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var w_$b=this.addComponent(SphereCollider);w_$b.isTrigger=w_$n.isTrigger;var w_$Q=w_$b.center;w_$Q.fromArray(w_$n.center),w_$b.center=w_$Q,w_$b.radius=w_$n.radius;break;case"BoxCollider":var w_$i=this.addComponent(BoxCollider);w_$i.isTrigger=w_$n.isTrigger,w_$i.center.fromArray(w_$n.center);var w_$$=w_$i.size;w_$$.fromArray(w_$n.size),w_$i.size=w_$$;break;case"MeshCollider":this.addComponent(MeshCollider)}}},w_$l._onRootNodeHierarchyLoaded=function(w_$B,w_$h){for(var w_$l in w_$h){for(var w_$A=this,w_$n=w_$h[w_$l],w_$s=0,w_$X=w_$n.length;w_$s<w_$X;w_$s++){var w_$Z=w_$n[w_$s];if(""===w_$Z)break;if(!(w_$A=w_$A.getChildByName(w_$Z)))break}w_$A&&w_$B.linkSprite3DToAvatarNode(w_$l,w_$A)}},w_$l._setHierarchyAnimator=function(w_$B,w_$h){this._changeHierarchyAnimator(w_$B);for(var w_$l=0,w_$A=this._childs.length;w_$l<w_$A;w_$l++){var w_$n=this._childs[w_$l];w_$n._hierarchyAnimator==w_$h&&w_$n._setHierarchyAnimator(w_$B,w_$h)}},w_$l._clearHierarchyAnimator=function(w_$B,w_$h){this._changeHierarchyAnimator(w_$h);for(var w_$l=0,w_$A=this._childs.length;w_$l<w_$A;w_$l++){var w_$n=this._childs[w_$l];w_$n._hierarchyAnimator==w_$B&&w_$n._clearHierarchyAnimator(w_$B,w_$h)}},w_$l._getAnimatorToLinkSprite3D=function(w_$B,w_$h,w_$l){var w_$A=this.getComponentByType(Animator);if(w_$A&&(w_$A.avatar?w_$A.avatar._version||w_$B._setAnimatorToLinkAvatar(w_$A,w_$h):w_$B._setAnimatorToLinkSprite3DNoAvatar(w_$A,w_$h,w_$l)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){w_$l.unshift(this._parent.name);var w_$n=this._parent;w_$n._hierarchyAnimator&&w_$n._getAnimatorToLinkSprite3D(w_$B,w_$h,w_$l)}},w_$l._setAnimatorToLinkSprite3DNoAvatar=function(w_$B,w_$h,w_$l){var w_$A=0,w_$n=0;for(w_$A=0,w_$n=w_$B.getClipCount();w_$A<w_$n;w_$A++)w_$B._handleSpriteOwnersBySprite(w_$A,w_$h,w_$l,this);for(w_$A=0,w_$n=this._childs.length;w_$A<w_$n;w_$A++){var w_$s=this._childs[w_$A],w_$X=w_$l.length;w_$l.push(w_$s.name),w_$s._setAnimatorToLinkSprite3DNoAvatar(w_$B,w_$h,w_$l),w_$l.splice(w_$X,1)}},w_$l._changeHierarchyAnimator=function(w_$B){this._hierarchyAnimator=w_$B},w_$l._isLinkSpriteToAnimationNode=function(w_$B,w_$h,w_$l){var w_$A=w_$B._avatarNodes.indexOf(w_$h),w_$n=w_$B._cacheSpriteToNodesMap;if(w_$l)this._transform.dummy=w_$h.transform,w_$B._cacheNodesToSpriteMap[w_$A]=w_$n.length,w_$n.push(w_$A);else{this._transform.dummy=null;var w_$s=w_$B._cacheNodesToSpriteMap[w_$A];w_$B._cacheNodesToSpriteMap[w_$A]=null,w_$n.splice(w_$s,1)}},w_$l._setBelongScene=function(w_$B){this._scene=w_$B;for(var w_$h=0,w_$l=this._childs.length;w_$h<w_$l;w_$h++)this._childs[w_$h]._setBelongScene(w_$B)},w_$l._setUnBelongScene=function(){this._scene=null;for(var w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++)this._childs[w_$B]._setUnBelongScene()},w_$l._activeHierarchy=function(){var w_$B=0,w_$h=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),w_$B=0,w_$h=this._colliders.length;w_$B<w_$h;w_$B++)this._layer._addCollider(this._colliders[w_$B]);for(this.event("activeinhierarchychanged",!0),w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++){var w_$l=this._childs[w_$B];w_$l._active&&w_$l._activeHierarchy()}},w_$l._inActiveHierarchy=function(){var w_$B=0,w_$h=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),w_$B=0,w_$h=this._colliders.length;w_$B<w_$h;w_$B++){var w_$l=this._colliders[w_$B];w_$l._clearCollsionMap(),this._layer._removeCollider(w_$l)}for(this.event("activeinhierarchychanged",!1),w_$B=0,w_$h=this._childs.length;w_$B<w_$h;w_$B++){var w_$A=this._childs[w_$B];w_$A._active&&w_$A._inActiveHierarchy()}},w_$l.addComponent=function(w_$B){var w_$h,w_$l=this._componentsMap.indexOf(w_$B);if(-1===w_$l)w_$h=[],this._componentsMap.push(w_$B),this._typeComponentsIndices.push(w_$h);else if(w_$h=this._typeComponentsIndices[w_$l],this._components[w_$h[0]].isSingleton)throw new Error("无法单实例创建"+w_$B+"组件，"+w_$B+"组件已存在！");var w_$A=w_$n.getInstance(w_$B);return w_$h.push(this._components.length),this._components.push(w_$A),w_$A instanceof laya.d3.component.Script&&this._scripts.push(w_$A),w_$A._initialize(this),w_$A},w_$l._removeComponent=function(w_$B,w_$h){var w_$l,w_$A=0,w_$n=this._typeComponentsIndices[w_$B],w_$s=w_$n[w_$h],w_$X=this._components[w_$s];for(w_$X instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(w_$X),1),w_$n.splice(w_$h,1),0===w_$n.length&&(this._typeComponentsIndices.splice(w_$B,1),this._componentsMap.splice(w_$B,1)),w_$A=0,w_$l=this._componentsMap.length;w_$A<w_$l;w_$A++)for(var w_$Z=(w_$n=this._typeComponentsIndices[w_$A]).length-1;0<=w_$Z;w_$Z--){var w_$t=w_$n[w_$Z];if(!(w_$s<w_$t))break;w_$n[w_$Z]=--w_$t}w_$X._destroy()},w_$l._clearSelfRenderObjects=function(){},w_$l._addSelfRenderObjects=function(){},w_$l._parseCustomProps=function(w_$B,w_$h,w_$l,w_$A){},w_$l._updateChilds=function(w_$B){var w_$h=this._childs.length;if(0!==w_$h)for(var w_$l=0;w_$l<w_$h;++w_$l)this._childs[w_$l]._update(w_$B)},w_$l._getSortID=function(w_$B,w_$h){return 1e3*w_$h.id+w_$B._getVertexBuffer().vertexDeclaration.id},w_$l._update=function(w_$B){(w_$B.owner=this)._activeInHierarchy&&(this._updateComponents(w_$B),this._lateUpdateComponents(w_$B),w_$U.spriteCount++,this._childs.length&&this._updateChilds(w_$B))},w_$l.getProjectionViewWorldMatrix=function(w_$B){return w_$Bh.multiply(w_$B,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},w_$l.loadHierarchy=function(w_$B){this.addChild(laya.d3.core.Sprite3D.load(w_$B))},w_$l.addChildAt=function(w_$B,w_$h){if(!(w_$B instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!w_$B||this.destroyed||w_$B===this)return w_$B;if(w_$B.zOrder&&this._set$P("hasZorder",!0),0<=w_$h&&w_$h<=this._childs.length){if(w_$B._parent===this){var w_$l=this.getChildIndex(w_$B);this._childs.splice(w_$l,1),this._childs.splice(w_$h,0,w_$B),this.conchModel&&(this.conchModel.removeChild(w_$B.conchModel),this.conchModel.addChildAt(w_$B.conchModel,w_$h)),this._childChanged()}else w_$B.parent&&w_$B.parent.removeChild(w_$B),this._childs===w_$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(w_$h,0,w_$B),this.conchModel&&this.conchModel.addChildAt(w_$B.conchModel,w_$h),(w_$B.parent=this)._addChild3D(w_$B);return w_$B}throw new Error("appendChildAt:The index is out of bounds")},w_$l.addChild=function(w_$B){if(!(w_$B instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!w_$B||this.destroyed||w_$B===this)return w_$B;if(w_$B.zOrder&&this._set$P("hasZorder",!0),w_$B._parent===this){var w_$h=this.getChildIndex(w_$B);w_$h!==this._childs.length-1&&(this._childs.splice(w_$h,1),this._childs.push(w_$B),this.conchModel&&(this.conchModel.removeChild(w_$B.conchModel),this.conchModel.addChildAt(w_$B.conchModel,this._childs.length-1)),this._childChanged())}else w_$B.parent&&w_$B.parent.removeChild(w_$B),this._childs===w_$P.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(w_$B),this.conchModel&&this.conchModel.addChildAt(w_$B.conchModel,this._childs.length-1),(w_$B.parent=this)._childChanged(),this._addChild3D(w_$B);return w_$B},w_$l.removeChildAt=function(w_$B){var w_$h=this.getChildAt(w_$B);return w_$h&&(this._removeChild3D(w_$h),this._childs.splice(w_$B,1),this.conchModel&&this.conchModel.removeChild(w_$h.conchModel),w_$h.parent=null),w_$h},w_$l.removeChildren=function(w_$B,w_$h){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=2147483647),this._childs&&0<this._childs.length){var w_$l=this._childs;if(0===w_$B&&w_$s<=w_$h){var w_$A=w_$l;this._childs=w_$P.ARRAY_EMPTY}else w_$A=w_$l.splice(w_$B,w_$h-w_$B);for(var w_$n=0,w_$s=w_$A.length;w_$n<w_$s;w_$n++)this._removeChild3D(w_$A[w_$n]),w_$A[w_$n].parent=null,this.conchModel&&this.conchModel.removeChild(w_$A[w_$n].conchModel)}return this},w_$l.onAsynLoaded=function(w_$B,w_$h,w_$l){var w_$A=w_$h[0];if("Sprite3D"!==w_$A.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var w_$n=w_$h[1];w_$Vh._createNodeByJson(this,w_$A,this,w_$n),this.event("hierarchyloaded",[this]),this.__loaded=!0},w_$l.cloneTo=function(w_$B){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var w_$h=w_$B;w_$h.name=this.name,w_$h._destroyed=this._destroyed,w_$h.timer=this.timer,w_$h._$P=this._$P,w_$h.active=this._active;var w_$l=w_$h.transform.localPosition;this.transform.localPosition.cloneTo(w_$l),w_$h.transform.localPosition=w_$l;var w_$A=w_$h.transform.localRotation;this.transform.localRotation.cloneTo(w_$A),w_$h.transform.localRotation=w_$A;var w_$n=w_$h.transform.localScale;this.transform.localScale.cloneTo(w_$n),w_$h.transform.localScale=w_$n,w_$h.isStatic=this.isStatic;var w_$s=0,w_$X=0;for(w_$s=0,w_$X=this._componentsMap.length;w_$s<w_$X;w_$s++){var w_$Z=w_$h.addComponent(this._componentsMap[w_$s]);this._components[w_$s]._cloneTo(w_$Z)}for(w_$s=0,w_$X=this._childs.length;w_$s<w_$X;w_$s++)w_$h.addChild(this._childs[w_$s].clone());var w_$t=w_$h.getComponentByType(Animator);if(w_$t){var w_$P=w_$t._linkSpritesData;if(w_$P)for(var w_$G in w_$P){for(var w_$T=w_$P[w_$G],w_$b=w_$h,w_$Q=0,w_$i=w_$T.length;w_$Q<w_$i&&(w_$b=w_$b.getChildByName(w_$T[w_$Q]));w_$Q++);if(w_$b){var w_$$=w_$t._avatarNodeMap[w_$G];w_$b._isLinkSpriteToAnimationNode(w_$t,w_$$,!0)}}}},w_$l.clone=function(){var w_$B=new this.constructor;return this.cloneTo(w_$B),w_$B},w_$l.destroy=function(w_$B){if(void 0===w_$B&&(w_$B=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,w_$B);var w_$h,w_$l=0;for(w_$l=0,w_$h=this._components.length;w_$l<w_$h;w_$l++)this._components[w_$l]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,w_$J.clearRes(this.url),this.loaded||w_$Jh._cancelLoadByUrl(this.url)}},w_$l._handleSpriteToAvatar=function(w_$B,w_$h){w_$B._avatarNodes;var w_$l=w_$B._avatarNodeMap[this.name];w_$l&&w_$l.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(w_$B,w_$l,w_$h)},w_$l._setAnimatorToLinkAvatar=function(w_$B,w_$h){this._handleSpriteToAvatar(w_$B,w_$h);for(var w_$l=0,w_$A=this._childs.length;w_$l<w_$A;w_$l++){this._childs[w_$l]._setAnimatorToLinkAvatar(w_$B,w_$h)}},w_$i(0,w_$l,"activeInHierarchy",function(){return this._activeInHierarchy}),w_$i(0,w_$l,"_loaded",null,function(w_$B){this.__loaded=w_$B}),w_$i(0,w_$l,"active",function(){return this._active},function(w_$B){this._active!==w_$B&&(this._active=w_$B,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(w_$B?this._activeHierarchy():this._inActiveHierarchy()))}),w_$i(0,w_$l,"componentsCount",function(){return this._components.length}),w_$i(0,w_$l,"loaded",function(){return this.__loaded}),w_$i(0,w_$l,"id",function(){return this._id}),w_$i(0,w_$l,"url",function(){return this._url}),w_$i(0,w_$l,"layer",function(){return this._layer},function(w_$B){if(this._layer!==w_$B){if(!w_$B)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var w_$h=0,w_$l=this._colliders.length;if(this._layer)for(w_$h=0;w_$h<w_$l;w_$h++)this._layer._removeCollider(this._colliders[w_$h]);for(w_$h=0;w_$h<w_$l;w_$h++)w_$B._addCollider(this._colliders[w_$h])}this._layer=w_$B,this.event("layerchanged",w_$B)}}),w_$i(0,w_$l,"scene",function(){return this._scene}),w_$i(0,w_$l,"transform",function(){return this._transform}),w_$h.instantiate=function(w_$B,w_$h,w_$l,w_$A,w_$n){void 0===w_$l&&(w_$l=!0);var w_$s=w_$B.clone();w_$h&&w_$h.addChild(w_$s);var w_$X=w_$s.transform;if(w_$l){var w_$Z=w_$X.worldMatrix;w_$B.transform.worldMatrix.cloneTo(w_$Z),w_$X.worldMatrix=w_$Z}else w_$A&&(w_$X.position=w_$A),w_$n&&(w_$X.rotation=w_$n);return w_$s},w_$h.load=function(w_$B){return w_$o.loader.create(w_$B,null,null,w_$h)},w_$h.WORLDMATRIX=0,w_$h.MVPMATRIX=1,w_$h._uniqueIDCounter=0,w_$h._nameNumberCounter=0,w_$h}(),w_$jh=function(w_$B){function w_$G(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],w_$G.__super.call(this),!w_$B||!w_$h)throw"Shader Error";this._id=++w_$G._count,this._vs=w_$B,this._ps=w_$h,this._attributeMap=w_$l,this._sceneUniformMap=w_$A,this._cameraUniformMap=w_$n,this._spriteUniformMap=w_$s,this._materialUniformMap=w_$X,this._renderElementUniformMap=w_$Z,this._precompile=w_$t,this._define=w_$P,this._precompile&&w_$G.extCompileObj&&w_$G.extCompileFunc?w_$G.extCompileFunc.call(w_$G.extCompileObj,w_$B,w_$h,w_$P):this.recreateResource()}w_$Q(w_$G,"laya.d3.shader.Shader3D",w_$l);var w_$h=w_$G.prototype;return w_$h.recreateResource=function(){w_$R.now();this._compile(),this.completeCreate(),this.memorySize=0},w_$h.disposeResource=function(){w_$S.mainContext.deleteShader(this._vshader),w_$S.mainContext.deleteShader(this._pshader),w_$S.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},w_$h._compile=function(){if(!w_$S.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var w_$B=[this._vs,this._ps],w_$h=w_$S.mainContext;if(this._program=w_$h.createProgram(),this._vshader=w_$G._createShader(w_$h,w_$B[0],35633),this._pshader=w_$G._createShader(w_$h,w_$B[1],35632),w_$h.attachShader(this._program,this._vshader),w_$h.attachShader(this._program,this._pshader),w_$h.linkProgram(this._program),!w_$$.isConchApp&&w_$Uh.debugMode&&!w_$h.getProgramParameter(this._program,35714))throw w_$h.getProgramInfoLog(this._program);var w_$l,w_$A=0,w_$n=0,w_$s=0;for(w_$s=w_$$.isConchApp?w_$h.getProgramParameterEx(this._vs,this._ps,"",35721):w_$h.getProgramParameter(this._program,35721),w_$A=0;w_$A<w_$s;w_$A++){var w_$X=null;w_$l={vartype:"attribute",ivartype:0,attrib:w_$X=w_$$.isConchApp?w_$h.getActiveAttribEx(this._vs,this._ps,"",w_$A):w_$h.getActiveAttrib(this._program,w_$A),location:w_$h.getAttribLocation(this._program,w_$X.name),name:w_$X.name,type:w_$X.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(w_$l)}var w_$Z=0;for(w_$Z=w_$$.isConchApp?w_$h.getProgramParameterEx(this._vs,this._ps,"",35718):w_$h.getProgramParameter(this._program,35718),w_$A=0;w_$A<w_$Z;w_$A++){var w_$t=null;w_$t=w_$$.isConchApp?w_$h.getActiveUniformEx(this._vs,this._ps,"",w_$A):w_$h.getActiveUniform(this._program,w_$A),0<(w_$l={vartype:"uniform",ivartype:1,attrib:w_$X,location:w_$h.getUniformLocation(this._program,w_$t.name),name:w_$t.name,type:w_$t.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(w_$l.name=w_$l.name.substr(0,w_$l.name.length-3),w_$l.isArray=!0,w_$l.location=w_$h.getUniformLocation(this._program,w_$l.name)),this._uniformParams.push(w_$l)}for(w_$A=0,w_$n=this._attributeParams.length;w_$A<w_$n;w_$A++)(w_$l=this._attributeParams[w_$A]).indexOfParams=w_$A,w_$l.index=1,w_$l.value=[w_$l.location,null],w_$l.codename=w_$l.name,w_$l.name=null!=this._attributeMap[w_$l.codename]?this._attributeMap[w_$l.codename]:w_$l.codename,this._attributeParamsMap.push(w_$l.name),this._attributeParamsMap.push(w_$l),w_$l._this=this,w_$l.uploadedValue=[],w_$l.fun=this._attribute;for(w_$A=0,w_$n=this._uniformParams.length;w_$A<w_$n;w_$A++)switch((w_$l=this._uniformParams[w_$A]).indexOfParams=w_$A,w_$l.index=1,w_$l.value=[w_$l.location,null],w_$l.codename=w_$l.name,null!=this._sceneUniformMap[w_$l.codename]?(w_$l.name=this._sceneUniformMap[w_$l.codename],this._sceneUniformParamsMap.push(w_$l.name),this._sceneUniformParamsMap.push(w_$l)):null!=this._cameraUniformMap[w_$l.codename]?(w_$l.name=this._cameraUniformMap[w_$l.codename],this._cameraUniformParamsMap.push(w_$l.name),this._cameraUniformParamsMap.push(w_$l)):null!=this._spriteUniformMap[w_$l.codename]?(w_$l.name=this._spriteUniformMap[w_$l.codename],this._spriteUniformParamsMap.push(w_$l.name),this._spriteUniformParamsMap.push(w_$l)):null!=this._materialUniformMap[w_$l.codename]?(w_$l.name=this._materialUniformMap[w_$l.codename],this._materialUniformParamsMap.push(w_$l.name),this._materialUniformParamsMap.push(w_$l)):null!=this._renderElementUniformMap[w_$l.codename]?(w_$l.name=this._renderElementUniformMap[w_$l.codename],this._renderElementUniformParamsMap.push(w_$l.name),this._renderElementUniformParamsMap.push(w_$l)):console.log("Shader:can't find uinform name:"+w_$l.codename+" in shader file."),w_$l._this=this,w_$l.uploadedValue=[],w_$l.type){case 5124:w_$l.fun=w_$l.isArray?this._uniform1iv:this._uniform1i;break;case 5126:w_$l.fun=w_$l.isArray?this._uniform1fv:this._uniform1f;break;case 35664:w_$l.fun=w_$l.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:w_$l.fun=w_$l.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:w_$l.fun=w_$l.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:w_$l.fun=this._uniform_sampler2D;break;case 35680:w_$l.fun=this._uniform_samplerCube;break;case 35676:w_$l.fun=this._uniformMatrix4fv;break;case 35670:w_$l.fun=this._uniform1i;break;case 35674:w_$l.fun=this._uinformMatrix2fv;break;case 35675:w_$l.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},w_$h._attribute=function(w_$B,w_$h){var w_$l=w_$S.mainContext,w_$A=w_$Z._enableAtributes,w_$n=w_$B.location;return w_$A[w_$n]||w_$l.enableVertexAttribArray(w_$n),w_$l.vertexAttribPointer(w_$n,w_$h[0],w_$h[1],w_$h[2],w_$h[3],w_$h[4]),w_$A[w_$n]=w_$Z._bindVertexBuffer,1},w_$h._uniform1f=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h?(w_$S.mainContext.uniform1f(w_$B.location,w_$l[0]=w_$h),1):0},w_$h._uniform1fv=function(w_$B,w_$h){if(w_$h.length<4){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$S.mainContext.uniform1fv(w_$B.location,w_$h),w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3],1):0}return w_$S.mainContext.uniform1fv(w_$B.location,w_$h),1},w_$h._uniform_vec2=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]?(w_$S.mainContext.uniform2f(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1]),1):0},w_$h._uniform_vec2v=function(w_$B,w_$h){if(w_$h.length<2){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$S.mainContext.uniform2fv(w_$B.location,w_$h),w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3],1):0}return w_$S.mainContext.uniform2fv(w_$B.location,w_$h),1},w_$h._uniform_vec3=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]?(w_$S.mainContext.uniform3f(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2]),1):0},w_$h._uniform_vec3v=function(w_$B,w_$h){return w_$S.mainContext.uniform3fv(w_$B.location,w_$h),1},w_$h._uniform_vec4=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$S.mainContext.uniform4f(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3]),1):0},w_$h._uniform_vec4v=function(w_$B,w_$h){return w_$S.mainContext.uniform4fv(w_$B.location,w_$h),1},w_$h._uniformMatrix2fv=function(w_$B,w_$h){return w_$S.mainContext.uniformMatrix2fv(w_$B.location,!1,w_$h),1},w_$h._uniformMatrix3fv=function(w_$B,w_$h){return w_$S.mainContext.uniformMatrix3fv(w_$B.location,!1,w_$h),1},w_$h._uniformMatrix4fv=function(w_$B,w_$h){return w_$S.mainContext.uniformMatrix4fv(w_$B.location,!1,w_$h),1},w_$h._uinformMatrix2fv=function(w_$B,w_$h){return w_$S.mainContext.uniformMatrix2fv(w_$B.location,!1,w_$h),1},w_$h._uinformMatrix3fv=function(w_$B,w_$h){return w_$S.mainContext.uniformMatrix3fv(w_$B.location,!1,w_$h),1},w_$h._uniform1i=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h?(w_$S.mainContext.uniform1i(w_$B.location,w_$l[0]=w_$h),1):0},w_$h._uniform1iv=function(w_$B,w_$h){return w_$S.mainContext.uniform1iv(w_$B.location,w_$h),1},w_$h._uniform_ivec2=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]?(w_$S.mainContext.uniform2i(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1]),1):0},w_$h._uniform_ivec2v=function(w_$B,w_$h){return w_$S.mainContext.uniform2iv(w_$B.location,w_$h),1},w_$h._uniform_vec3i=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]?(w_$S.mainContext.uniform3i(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2]),1):0},w_$h._uniform_vec3vi=function(w_$B,w_$h){return w_$S.mainContext.uniform3iv(w_$B.location,w_$h),1},w_$h._uniform_vec4i=function(w_$B,w_$h){var w_$l=w_$B.uploadedValue;return w_$l[0]!==w_$h[0]||w_$l[1]!==w_$h[1]||w_$l[2]!==w_$h[2]||w_$l[3]!==w_$h[3]?(w_$S.mainContext.uniform4i(w_$B.location,w_$l[0]=w_$h[0],w_$l[1]=w_$h[1],w_$l[2]=w_$h[2],w_$l[3]=w_$h[3]),1):0},w_$h._uniform_vec4vi=function(w_$B,w_$h){return w_$S.mainContext.uniform4iv(w_$B.location,w_$h),1},w_$h._uniform_sampler2D=function(w_$B,w_$h){var w_$l=w_$h.source||w_$h.defaulteTexture.source,w_$A=w_$S.mainContext,w_$n=w_$B.uploadedValue;if(null!=w_$n[0])return w_$A.activeTexture(w_$G._TEXTURES[w_$n[0]]),w_$l&&w_$N.bindTexture(w_$A,3553,w_$l),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return w_$n[0]=this._curActTexIndex,w_$A.uniform1i(w_$B.location,this._curActTexIndex),w_$A.activeTexture(w_$G._TEXTURES[this._curActTexIndex]),w_$l&&w_$N.bindTexture(w_$A,3553,w_$l),this._curActTexIndex++,1},w_$h._uniform_samplerCube=function(w_$B,w_$h){var w_$l=w_$h.source||w_$h.defaulteTexture.source,w_$A=w_$S.mainContext,w_$n=w_$B.uploadedValue;if(null!=w_$n[0])return w_$A.activeTexture(w_$G._TEXTURES[w_$n[0]]),w_$l?w_$N.bindTexture(w_$A,34067,w_$l):w_$N.bindTexture(w_$A,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return w_$n[0]=this._curActTexIndex,w_$A.uniform1i(w_$B.location,this._curActTexIndex),w_$A.activeTexture(w_$G._TEXTURES[this._curActTexIndex]),w_$l?w_$N.bindTexture(w_$A,34067,w_$l):w_$N.bindTexture(w_$A,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},w_$h._noSetValue=function(w_$B){console.log("no....:"+w_$B.name)},w_$h.bind=function(){return w_$l.activeShader=this,(w_$l.bindShader=this).activeResource(),w_$N.UseProgram(this._program)},w_$h.uploadAttributes=function(w_$B,w_$h){for(var w_$l,w_$A,w_$n=0,w_$s=0,w_$X=this._attributeParamsMap.length;w_$s<w_$X;w_$s+=2)w_$A=this._attributeParamsMap[w_$s+1],null!=(w_$l=w_$B[this._attributeParamsMap[w_$s]])&&(w_$h&&w_$h[w_$A.name]&&w_$h[w_$A.name].bind(),w_$n+=w_$A.fun.call(this,w_$A,w_$l));w_$U.shaderCall+=w_$n},w_$h.uploadAttributesX=function(w_$B,w_$h){for(var w_$l,w_$A,w_$n=0,w_$s=0,w_$X=this._attributeParamsMap.length;w_$s<w_$X;w_$s+=2)w_$A=this._attributeParamsMap[w_$s+1],null!=(w_$l=w_$B[this._attributeParamsMap[w_$s]])&&(w_$h._bind(),w_$n+=w_$A.fun.call(this,w_$A,w_$l));w_$U.shaderCall+=w_$n},w_$h.uploadSceneUniforms=function(w_$B){for(var w_$h,w_$l,w_$A=0,w_$n=0,w_$s=this._sceneUniformParamsMap.length;w_$n<w_$s;w_$n+=2)w_$l=this._sceneUniformParamsMap[w_$n+1],null!=(w_$h=w_$B[this._sceneUniformParamsMap[w_$n]])&&(w_$A+=w_$l.fun.call(this,w_$l,w_$h));w_$U.shaderCall+=w_$A},w_$h.uploadCameraUniforms=function(w_$B){for(var w_$h,w_$l,w_$A=0,w_$n=0,w_$s=this._cameraUniformParamsMap.length;w_$n<w_$s;w_$n+=2)w_$l=this._cameraUniformParamsMap[w_$n+1],null!=(w_$h=w_$B[this._cameraUniformParamsMap[w_$n]])&&(w_$A+=w_$l.fun.call(this,w_$l,w_$h));w_$U.shaderCall+=w_$A},w_$h.uploadSpriteUniforms=function(w_$B){for(var w_$h,w_$l,w_$A=0,w_$n=0,w_$s=this._spriteUniformParamsMap.length;w_$n<w_$s;w_$n+=2)w_$l=this._spriteUniformParamsMap[w_$n+1],null!=(w_$h=w_$B[this._spriteUniformParamsMap[w_$n]])&&(w_$A+=w_$l.fun.call(this,w_$l,w_$h));w_$U.shaderCall+=w_$A},w_$h.uploadMaterialUniforms=function(w_$B){for(var w_$h,w_$l,w_$A=0,w_$n=0,w_$s=this._materialUniformParamsMap.length;w_$n<w_$s;w_$n+=2)w_$l=this._materialUniformParamsMap[w_$n+1],null!=(w_$h=w_$B[this._materialUniformParamsMap[w_$n]])&&(w_$A+=w_$l.fun.call(this,w_$l,w_$h));w_$U.shaderCall+=w_$A},w_$h.uploadRenderElementUniforms=function(w_$B){for(var w_$h,w_$l,w_$A=0,w_$n=0,w_$s=this._renderElementUniformParamsMap.length;w_$n<w_$s;w_$n+=2)w_$l=this._renderElementUniformParamsMap[w_$n+1],null!=(w_$h=w_$B[this._renderElementUniformParamsMap[w_$n]])&&(w_$A+=w_$l.fun.call(this,w_$l,w_$h));w_$U.shaderCall+=w_$A},w_$G.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){return new w_$G(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P)},w_$G.addInclude=function(w_$B,w_$h){w_$y.addInclude(w_$B,w_$h)},w_$G._createShader=function(w_$B,w_$h,w_$l){var w_$A=w_$B.createShader(w_$l);if(w_$B.shaderSource(w_$A,w_$h),w_$B.compileShader(w_$A),w_$Uh.debugMode&&!w_$B.getShaderParameter(w_$A,35713))throw w_$B.getShaderInfoLog(w_$A);return w_$A},w_$G.PERIOD_RENDERELEMENT=0,w_$G.PERIOD_MATERIAL=1,w_$G.PERIOD_SPRITE=2,w_$G.PERIOD_CAMERA=3,w_$G.PERIOD_SCENE=4,w_$G._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],w_$G._count=0,w_$G._preCompile=!1,w_$G.extCompileFunc=null,w_$G.extCompileObj=null,w_$T(w_$G,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new w_$x}]),w_$G}(),w_$gh=function(w_$Z){function w_$t(){this._transformUV=null,w_$t.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new w_$Xh(.6,.6,.6)),this._setColor(10,new w_$Xh(1,1,1)),this._setColor(11,new w_$Zh(1,1,1,8)),this._setColor(12,new w_$Xh(1,1,1)),this._setColor(7,new w_$Zh(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new w_$Zh(1,1,0,0)),this.renderMode=1}w_$Q(w_$t,"laya.d3.core.material.StandardMaterial",w_$Z);var w_$B=w_$t.prototype;return w_$B.disableLight=function(){this._addDisablePublicShaderDefine(w_$Uh.SHADERDEFINE_POINTLIGHT|w_$Uh.SHADERDEFINE_SPOTLIGHT|w_$Uh.SHADERDEFINE_DIRECTIONLIGHT)},w_$B.disableFog=function(){this._addDisablePublicShaderDefine(w_$Uh.SHADERDEFINE_FOG)},w_$B.onAsynLoaded=function(w_$B,w_$h,w_$l){var w_$A=w_$h[0];if(w_$A.version)w_$Z.prototype.onAsynLoaded.call(this,w_$B,w_$h,w_$l);else{var w_$n=w_$h[1],w_$s=w_$A.props;for(var w_$X in w_$s)this[w_$X]=w_$s[w_$X];w_$t._parseStandardMaterial(w_$n,this,w_$A),this._endLoaded()}},w_$B.cloneTo=function(w_$B){w_$Z.prototype.cloneTo.call(this,w_$B);var w_$h=w_$B;this._transformUV&&(w_$h._transformUV=this._transformUV.clone())},w_$i(0,w_$B,"ambientColor",function(){return this._getColor(9)},function(w_$B){this._setColor(9,w_$B)}),w_$i(0,w_$B,"ambientTexture",function(){return this._getTexture(5)},function(w_$B){w_$B?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,w_$B)}),w_$i(0,w_$B,"renderMode",null,function(w_$B){switch(w_$B){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(w_$t.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(w_$B)}),w_$i(0,w_$B,"reflectColor",function(){return this._getColor(12)},function(w_$B){this._setColor(12,w_$B)}),w_$i(0,w_$B,"tilingOffset",function(){return this._getColor(15)},function(w_$B){if(w_$B){var w_$h=w_$B.elements;1!=w_$h[0]||1!=w_$h[1]||0!=w_$h[2]||0!=w_$h[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,w_$B)}),w_$i(0,w_$B,"albedo",function(){return this._getColor(7)},function(w_$B){this._setColor(7,w_$B)}),w_$i(0,w_$B,"diffuseColor",function(){return this._getColor(10)},function(w_$B){this._setColor(10,w_$B)}),w_$i(0,w_$B,"albedoColor",function(){return this._getColor(7)},function(w_$B){this._setColor(7,w_$B)}),w_$i(0,w_$B,"specularColor",function(){return this._getColor(11)},function(w_$B){this._setColor(11,w_$B)}),w_$i(0,w_$B,"diffuseTexture",function(){return this._getTexture(1)},function(w_$B){w_$B?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,w_$B)}),w_$i(0,w_$B,"normalTexture",function(){return this._getTexture(2)},function(w_$B){w_$B?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,w_$B)}),w_$i(0,w_$B,"specularTexture",function(){return this._getTexture(3)},function(w_$B){w_$B?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,w_$B)}),w_$i(0,w_$B,"emissiveTexture",function(){return this._getTexture(4)},function(w_$B){w_$B?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,w_$B)}),w_$i(0,w_$B,"reflectTexture",function(){return this._getTexture(6)},function(w_$B){w_$B?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,w_$B)}),w_$i(0,w_$B,"transformUV",function(){return this._transformUV},function(w_$B){this._transformUV=w_$B,this._setMatrix4x4(13,w_$B.matrix),w_$B?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,w_$B.matrix.elements,0)}),w_$t.__init__=function(){w_$t.SHADERDEFINE_DIFFUSEMAP=w_$t.shaderDefines.registerDefine("DIFFUSEMAP"),w_$t.SHADERDEFINE_NORMALMAP=w_$t.shaderDefines.registerDefine("NORMALMAP"),w_$t.SHADERDEFINE_SPECULARMAP=w_$t.shaderDefines.registerDefine("SPECULARMAP"),w_$t.SHADERDEFINE_EMISSIVEMAP=w_$t.shaderDefines.registerDefine("EMISSIVEMAP"),w_$t.SHADERDEFINE_AMBIENTMAP=w_$t.shaderDefines.registerDefine("AMBIENTMAP"),w_$t.SHADERDEFINE_REFLECTMAP=w_$t.shaderDefines.registerDefine("REFLECTMAP"),w_$t.SHADERDEFINE_UVTRANSFORM=w_$t.shaderDefines.registerDefine("UVTRANSFORM"),w_$t.SHADERDEFINE_TILINGOFFSET=w_$t.shaderDefines.registerDefine("TILINGOFFSET"),w_$t.SHADERDEFINE_ADDTIVEFOG=w_$t.shaderDefines.registerDefine("ADDTIVEFOG")},w_$t.load=function(w_$B){return w_$o.loader.create(w_$B,null,null,w_$t)},w_$t._parseStandardMaterial=function(w_$B,w_$h,w_$l){var w_$A=w_$l.customProps,w_$n=w_$A.ambientColor;w_$h.ambientColor=new w_$Xh(w_$n[0],w_$n[1],w_$n[2]);var w_$s=w_$A.diffuseColor;w_$h.diffuseColor=new w_$Xh(w_$s[0],w_$s[1],w_$s[2]);var w_$X=w_$A.specularColor;w_$h.specularColor=new w_$Zh(w_$X[0],w_$X[1],w_$X[2],w_$X[3]);var w_$Z=w_$A.reflectColor;w_$h.reflectColor=new w_$Xh(w_$Z[0],w_$Z[1],w_$Z[2]);var w_$t=w_$A.albedoColor;w_$t&&(w_$h.albedo=new w_$Zh(w_$t[0],w_$t[1],w_$t[2],w_$t[3]));var w_$P=w_$A.diffuseTexture.texture2D;w_$P&&(w_$h.diffuseTexture=w_$J.getRes(w_$B[w_$P]));var w_$G=w_$A.normalTexture.texture2D;w_$G&&(w_$h.normalTexture=w_$J.getRes(w_$B[w_$G]));var w_$T=w_$A.specularTexture.texture2D;w_$T&&(w_$h.specularTexture=w_$J.getRes(w_$B[w_$T]));var w_$b=w_$A.emissiveTexture.texture2D;w_$b&&(w_$h.emissiveTexture=w_$J.getRes(w_$B[w_$b]));var w_$Q=w_$A.ambientTexture.texture2D;w_$Q&&(w_$h.ambientTexture=w_$J.getRes(w_$B[w_$Q]));var w_$i=w_$A.reflectTexture.texture2D;w_$i&&(w_$h.reflectTexture=w_$J.getRes(w_$B[w_$i]))},w_$t.RENDERMODE_OPAQUE=1,w_$t.RENDERMODE_OPAQUEDOUBLEFACE=2,w_$t.RENDERMODE_CUTOUT=3,w_$t.RENDERMODE_CUTOUTDOUBLEFACE=4,w_$t.RENDERMODE_TRANSPARENT=13,w_$t.RENDERMODE_TRANSPARENTDOUBLEFACE=14,w_$t.RENDERMODE_ADDTIVE=15,w_$t.RENDERMODE_ADDTIVEDOUBLEFACE=16,w_$t.RENDERMODE_DEPTHREAD_TRANSPARENT=5,w_$t.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,w_$t.RENDERMODE_DEPTHREAD_ADDTIVE=7,w_$t.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,w_$t.RENDERMODE_NONDEPTH_TRANSPARENT=9,w_$t.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,w_$t.RENDERMODE_NONDEPTH_ADDTIVE=11,w_$t.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,w_$t.SHADERDEFINE_DIFFUSEMAP=0,w_$t.SHADERDEFINE_NORMALMAP=0,w_$t.SHADERDEFINE_SPECULARMAP=0,w_$t.SHADERDEFINE_EMISSIVEMAP=0,w_$t.SHADERDEFINE_AMBIENTMAP=0,w_$t.SHADERDEFINE_REFLECTMAP=0,w_$t.SHADERDEFINE_UVTRANSFORM=0,w_$t.SHADERDEFINE_TILINGOFFSET=0,w_$t.SHADERDEFINE_ADDTIVEFOG=0,w_$t.DIFFUSETEXTURE=1,w_$t.NORMALTEXTURE=2,w_$t.SPECULARTEXTURE=3,w_$t.EMISSIVETEXTURE=4,w_$t.AMBIENTTEXTURE=5,w_$t.REFLECTTEXTURE=6,w_$t.ALBEDO=7,w_$t.UVANIAGE=8,w_$t.MATERIALAMBIENT=9,w_$t.MATERIALDIFFUSE=10,w_$t.MATERIALSPECULAR=11,w_$t.MATERIALREFLECT=12,w_$t.UVMATRIX=13,w_$t.UVAGE=14,w_$t.TILINGOFFSET=15,w_$T(w_$t,["defaultMaterial",function(){var w_$B=new w_$t;return w_$B.lock=!0,this.defaultMaterial=w_$B},"shaderDefines",function(){return this.shaderDefines=new w_$Gh(w_$ah.shaderDefines)}]),w_$t}(w_$ah),w_$_h=function(w_$B){function w_$X(w_$B,w_$h,w_$l,w_$A,w_$n){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===w_$l&&(w_$l=35044),void 0===w_$A&&(w_$A=!1),w_$X.__super.call(this),this._indexType=w_$B,this._indexCount=w_$h,this._bufferUsage=w_$l,this._bufferType=34963,this._canRead=w_$A;var w_$s;if("ushort"==w_$B)this._indexTypeByteCount=2;else{if("ubyte"!=w_$B)throw new Error("unidentification index type.");this._indexTypeByteCount=1}w_$s=this._indexTypeByteCount*w_$h,this._byteLength=w_$s,this._bind(),w_$Z._gl.bufferData(this._bufferType,w_$s,this._bufferUsage),this.uri=w_$n,w_$A?("ushort"==w_$B?this._buffer=new Uint16Array(w_$h):"ubyte"==w_$B&&(this._buffer=new Uint8Array(w_$h)),this.memorySize=2*w_$s):this.memorySize=w_$s}w_$Q(w_$X,"laya.d3.graphics.IndexBuffer3D",w_$B);var w_$h=w_$X.prototype;return w_$h.setData=function(w_$B,w_$h,w_$l,w_$A){void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=4294967295);var w_$n=0;if("ushort"==this._indexType?(w_$n=2,0===w_$l&&4294967295===w_$A||(w_$B=new Uint16Array(w_$B.buffer,w_$l*w_$n,w_$A))):"ubyte"==this._indexType&&(w_$n=1,0===w_$l&&4294967295===w_$A||(w_$B=new Uint8Array(w_$B.buffer,w_$l*w_$n,w_$A))),this._bind(),w_$Z._gl.bufferSubData(this._bufferType,w_$h*w_$n,w_$B),this._canRead)if(0!==w_$h||0!==w_$l||4294967295!==w_$A){var w_$s=this._buffer.length-w_$h;w_$s<w_$A&&(w_$A=w_$s);for(var w_$X=0;w_$X<w_$A;w_$X++)this._buffer[w_$h+w_$X]=w_$B[w_$X]}else this._buffer=w_$B},w_$h.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},w_$h.disposeResource=function(){w_$B.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},w_$i(0,w_$h,"indexType",function(){return this._indexType}),w_$i(0,w_$h,"indexTypeByteCount",function(){return this._indexTypeByteCount}),w_$i(0,w_$h,"indexCount",function(){return this._indexCount}),w_$i(0,w_$h,"canRead",function(){return this._canRead}),w_$X.INDEXTYPE_UBYTE="ubyte",w_$X.INDEXTYPE_USHORT="ushort",w_$X.create=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$l&&(w_$l=35044),void 0===w_$A&&(w_$A=!1),new w_$X(w_$B,w_$h,w_$l,w_$A,w_$n)},w_$X}(w_$Z),w_$dh=function(w_$s){function w_$X(w_$B,w_$h,w_$l,w_$A,w_$n){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===w_$A&&(w_$A=!1),w_$X.__super.call(this),this._vertexDeclaration=w_$B,this._vertexCount=w_$h,this._bufferUsage=w_$l,this._bufferType=34962,this._canRead=w_$A,this.uri=w_$n,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*w_$h,this._bind(),w_$Z._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),w_$A&&(this._buffer=new Float32Array(this._byteLength/4))}w_$Q(w_$X,"laya.d3.graphics.VertexBuffer3D",w_$s);var w_$B=w_$X.prototype;return w_$B.bindWithIndexBuffer=function(w_$B){w_$B&&w_$B._bind(),this._bind()},w_$B.setData=function(w_$B,w_$h,w_$l,w_$A){if(void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=4294967295),0===w_$l&&4294967295===w_$A||(w_$B=new Float32Array(w_$B.buffer,4*w_$l,w_$A)),this._bind(),w_$Z._gl.bufferSubData(this._bufferType,4*w_$h,w_$B),this._canRead)if(0!==w_$h||0!==w_$l||4294967295!==w_$A){var w_$n=this._buffer.length-w_$h;w_$n<w_$A&&(w_$A=w_$n);for(var w_$s=0;w_$s<w_$A;w_$s++)this._buffer[w_$h+w_$s]=w_$B[w_$s]}else this._buffer=w_$B},w_$B.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},w_$B.disposeResource=function(){for(var w_$B=w_$S.mainContext,w_$h=this._vertexDeclaration.getVertexElements(),w_$l=w_$Z._enableAtributes,w_$A=0,w_$n=w_$h.length;w_$A<w_$n;w_$A++)w_$l[w_$A]===this._glBuffer&&(w_$B.disableVertexAttribArray(w_$A),w_$l[w_$A]=null);w_$s.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},w_$i(0,w_$B,"vertexDeclaration",function(){return this._vertexDeclaration}),w_$i(0,w_$B,"vertexCount",function(){return this._vertexCount}),w_$i(0,w_$B,"canRead",function(){return this._canRead}),w_$X.create=function(w_$B,w_$h,w_$l,w_$A,w_$n){return void 0===w_$l&&(w_$l=35044),void 0===w_$A&&(w_$A=!1),new w_$X(w_$B,w_$h,w_$l,w_$A,w_$n)},w_$X}(w_$Z),w_$kh=function(w_$B){function w_$y(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,w_$y.__super.call(this),this._type=3553}w_$Q(w_$y,"laya.d3.resource.DataTexture2D",w_$Sh);var w_$h=w_$y.prototype;return w_$h.genDebugMipmaps=function(){var w_$B=[];return w_$B.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),w_$B.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),w_$B.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),w_$B.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),w_$B.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),w_$B.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),w_$B.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),w_$B.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),w_$B.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),w_$B.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),w_$B},w_$h._onTextureLoaded=function(w_$B){},w_$h._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var w_$B=w_$S.mainContext,w_$h=this._source=w_$B.createTexture(),w_$l=this._width,w_$A=this._height,w_$n=w_$N.curBindTexTarget,w_$s=w_$N.curBindTexValue,w_$X=!1;if(w_$N.bindTexture(w_$B,this._type,w_$h),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var w_$Z=0;w_$B.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var w_$t=0;w_$t<this._mipmaps.length;w_$t++){if(this._mipmaps[w_$t].byteLength!=w_$P*w_$G*4)throw"mipmap size error  level:"+w_$t;w_$B.texSubImage2D(this._type,0,w_$y.simLodRect[w_$Z++],w_$y.simLodRect[w_$Z++],w_$y.simLodRect[w_$Z++],w_$y.simLodRect[w_$Z++],6408,5121,new Uint8Array(this._mipmaps[w_$t]))}this.minFifter=9729,this.magFifter=9729}else{var w_$P=this._width,w_$G=this._height;for(w_$Z=0,w_$B.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),w_$t=0;w_$t<this._mipmaps.length;w_$t++){if(this._mipmaps[w_$t].byteLength!=w_$P*w_$G*4)throw"mipmap size error  level:"+w_$t;w_$B.texImage2D(this._type,w_$t,6408,w_$P,w_$G,0,6408,5121,new Uint8Array(this._mipmaps[w_$t])),(w_$P/=2)<1&&(w_$P=1),(w_$G/=2)<1&&(w_$G=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&w_$B.pixelStorei(w_$B.UNPACK_ALIGNMENT,1),w_$B.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var w_$T=0,w_$b=!1,w_$Q=!1;this._buffer.byteLength==4*w_$l*w_$A?(w_$T=6408,w_$b=!0):this._buffer.byteLength==3*w_$l*w_$A?(w_$T=6407,w_$Q=!0):w_$T=this._format,w_$b||w_$Q?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),w_$Q&&w_$B.pixelStorei(w_$B.UNPACK_ALIGNMENT,1),w_$B.texImage2D(this._type,0,w_$T,w_$l,w_$A,0,w_$T,5121,this._buffer)):w_$B&&w_$T==w_$B.ALPHA?(w_$B.texImage2D(3553,0,w_$T,w_$l,w_$A,0,w_$T,w_$B.UNSIGNED_BYTE,this._buffer),w_$X=!0):0!=w_$T&&(w_$B.compressedTexImage2D(3553,0,w_$T,w_$l,w_$A,0,this._buffer),w_$X=!0)}var w_$i=this._minFifter,w_$$=this._magFifter,w_$V=0==this._wrapModeU?10497:33071,w_$J=0==this._wrapModeV?10497:33071,w_$H=w_$C.isPOT(w_$l,w_$A);w_$H?(this._mipmap||this._mipmaps?-1!==w_$i||(w_$i=9987):-1!==w_$i||(w_$i=9729),-1!==w_$$||(w_$$=9729),w_$B.texParameteri(this._type,10241,w_$i),w_$B.texParameteri(this._type,10240,w_$$),w_$B.texParameteri(this._type,10242,w_$V),w_$B.texParameteri(this._type,10243,w_$J),this._mipmap&&w_$B.generateMipmap(this._type)):(-1!==w_$i||(w_$i=9729),-1!==w_$$||(w_$$=9729),w_$B.texParameteri(this._type,10241,w_$i),w_$B.texParameteri(this._type,10240,w_$$),w_$B.texParameteri(this._type,10242,33071),w_$B.texParameteri(this._type,10243,33071)),w_$n&&w_$s&&w_$N.bindTexture(w_$B,w_$n,w_$s),this.memorySize=w_$X?this._buffer.length:w_$H?w_$l*w_$A*4*(1+1/3):w_$l*w_$A*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},w_$h.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},w_$h.onAsynLoaded=function(w_$B,w_$h,w_$l){var w_$A;w_$l&&(w_$A=w_$l[0].call(this,w_$h)),w_$A&&(this._width=w_$A.width,this._height=w_$A.height,this._buffer=w_$A.data),this._src=w_$B,this._size=new w_$$h(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},w_$h.getPixels=function(){return new Uint8Array(this._buffer)},w_$h.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(w_$S.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},w_$i(0,w_$h,"src",function(){return this._src}),w_$y.create=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){if(void 0===w_$A&&(w_$A=9729),void 0===w_$n&&(w_$n=9729),void 0===w_$s&&(w_$s=!0),!w_$B||w_$B.byteLength<w_$h*w_$l*4)throw"DataTexture2D create error";var w_$Z=new w_$y;return w_$Z.uri=w_$X,w_$Z._buffer=w_$B,w_$Z._width=w_$h,w_$Z._height=w_$l,w_$Z._mipmap=w_$s,w_$Z._magFifter=w_$A,w_$Z._minFifter=w_$n,w_$Z._size=new w_$$h(w_$Z._width,w_$Z._height),w_$Z._conchTexture?alert("怎么给runtime传递datatexture数据"):w_$Z.activeResource(),w_$Z},w_$y.load=function(w_$B,w_$h,w_$l,w_$A,w_$n){if(void 0===w_$h&&(w_$h=0),void 0===w_$l&&(w_$l=0),void 0===w_$A&&(w_$A=9729),void 0===w_$n&&(w_$n=9729),"mipmaps"===w_$w.getFileExtension(w_$B)){var w_$s=w_$o.loader.create(w_$B,null,null,w_$y,[function(w_$B){this._mipmaps=[];var w_$h=new Uint32Array(w_$B);this._width=w_$h[0];var w_$l=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,w_$l=1024),this._width!=w_$l)throw"现在只支持512x256的环境贴图。当前的是"+w_$h[0];this._height=w_$h[1];for(var w_$A=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,w_$n=this._height,w_$s=8;;){var w_$X=w_$A*w_$n*4;if(w_$s+w_$X>w_$B.byteLength)throw"load mipmaps data size error ";var w_$Z=new Uint8Array(w_$B,w_$s,w_$X);if(this._mipmaps.push(w_$Z),w_$s+=w_$X,1==w_$A&&1==w_$n)break;(w_$A/=2)<1&&(w_$A=1),(w_$n/=2)<1&&(w_$n=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){w_$s.simLodInfo=new Float32Array(40);for(var w_$X=0;w_$X<w_$s.simLodInfo.length;)w_$s.simLodInfo[w_$X]=(w_$y.simLodRect[w_$X]+.5)/1024,w_$X++,w_$s.simLodInfo[w_$X]=(w_$y.simLodRect[w_$X]+.5)/256,w_$X++,w_$s.simLodInfo[w_$X]=Math.max(w_$y.simLodRect[w_$X]-1,.1)/1024,w_$X++,w_$s.simLodInfo[w_$X]=Math.max(w_$y.simLodRect[w_$X]-1.5,.1)/256,w_$X++}return w_$s}if("number"==typeof w_$h)return w_$o.loader.create(w_$B,null,null,w_$y,[function(w_$B){return this._width=w_$h,this._height=w_$l,this._buffer=w_$B,null}]);if("function"==typeof w_$h)return w_$o.loader.create(w_$B,null,null,w_$y,[w_$h]);throw new Error("unknown params.")},w_$y.lodasatlas=!1,w_$T(w_$y,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),w_$y}(),w_$Oh=function(w_$B){function w_$h(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,w_$h.__super.call(this)}w_$Q(w_$h,"laya.d3.resource.models.PrimitiveMesh",w_$Nh);var w_$l=w_$h.prototype;return w_$o.imps(w_$l,{"laya.d3.core.render.IRenderable":!0}),w_$l._getVertexBuffer=function(w_$B){return void 0===w_$B&&(w_$B=0),0===w_$B?this._vertexBuffer:null},w_$l._getVertexBuffers=function(){return null},w_$l._getIndexBuffer=function(){return this._indexBuffer},w_$l._getPositions=function(){var w_$B,w_$h=[],w_$l=this._vertexBuffer.vertexDeclaration.getVertexElements(),w_$A=0;for(w_$A=0;w_$A<w_$l.length;w_$A++){var w_$n=w_$l[w_$A];if("vector3"===w_$n.elementFormat&&0===w_$n.elementUsage){w_$B=w_$n;break}}var w_$s=this._vertexBuffer.getData();for(w_$A=0;w_$A<w_$s.length;w_$A+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var w_$X=w_$A+w_$B.offset/4,w_$Z=new w_$Xh(w_$s[w_$X+0],w_$s[w_$X+1],w_$s[w_$X+2]);w_$h.push(w_$Z)}return w_$h},w_$l.getRenderElement=function(w_$B){return this},w_$l.getRenderElementsCount=function(){return 1},w_$l.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},w_$l._beforeRender=function(w_$B){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},w_$l._render=function(w_$B){w_$S.mainContext.drawElements(4,this._numberIndices,5123,0),w_$U.drawCall++,w_$U.trianglesFaces+=this._numberIndices/3},w_$i(0,w_$l,"_vertexBufferCount",function(){return 1}),w_$i(0,w_$l,"triangleCount",function(){return this._indexBuffer.indexCount/3}),w_$h}(),w_$ph=function(w_$B){function w_$h(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,w_$h.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}w_$Q(w_$h,"laya.d3.resource.models.Mesh",w_$Nh);var w_$l=w_$h.prototype;return w_$l._getPositions=function(){var w_$B,w_$h,w_$l,w_$A,w_$n,w_$s=[],w_$X=0,w_$Z=0,w_$t=0;if(0!==this._vertexBuffers.length){var w_$P=this._vertexBuffers.length;for(w_$X=0;w_$X<w_$P;w_$X++){for(w_$l=(w_$B=this._vertexBuffers[w_$X]).vertexDeclaration.getVertexElements(),w_$Z=0;w_$Z<w_$l.length;w_$Z++)if("vector3"===(w_$A=w_$l[w_$Z]).elementFormat&&0===w_$A.elementUsage){w_$h=w_$A;break}for(w_$n=w_$B.getData(),w_$Z=0;w_$Z<w_$n.length;w_$Z+=w_$B.vertexDeclaration.vertexStride/4)w_$t=w_$Z+w_$h.offset/4,w_$s.push(new w_$Xh(w_$n[w_$t+0],w_$n[w_$t+1],w_$n[w_$t+2]))}}else{var w_$G=this._subMeshes.length;for(w_$X=0;w_$X<w_$G;w_$X++){for(w_$l=(w_$B=this._subMeshes[w_$X]._getVertexBuffer()).vertexDeclaration.getVertexElements(),w_$Z=0;w_$Z<w_$l.length;w_$Z++)if("vector3"===(w_$A=w_$l[w_$Z]).elementFormat&&0===w_$A.elementUsage){w_$h=w_$A;break}for(w_$n=w_$B.getData(),w_$Z=0;w_$Z<w_$n.length;w_$Z+=w_$B.vertexDeclaration.vertexStride/4)w_$t=w_$Z+w_$h.offset/4,w_$s.push(new w_$Xh(w_$n[w_$t+0],w_$n[w_$t+1],w_$n[w_$t+2]))}}return w_$s},w_$l._setSubMeshes=function(w_$B){this._subMeshes=w_$B,this._subMeshCount=w_$B.length;for(var w_$h=0;w_$h<this._subMeshCount;w_$h++)w_$B[w_$h]._indexInMesh=w_$h;this._positions=this._getPositions(),this._generateBoundingObject()},w_$l.onAsynLoaded=function(w_$B,w_$h,w_$l){var w_$A=w_$h[0],w_$n=w_$h[1];w_$IB.read(w_$A,this,this._materials,this._subMeshes,w_$n),this.completeCreate(),this._endLoaded()},w_$l.getSubMesh=function(w_$B){return this._subMeshes[w_$B]},w_$l.getSubMeshCount=function(){return this._subMeshes.length},w_$l.getRenderElementsCount=function(){return this._subMeshes.length},w_$l.getRenderElement=function(w_$B){return this._subMeshes[w_$B]},w_$l.disposeResource=function(){for(var w_$B=0;w_$B<this._subMeshes.length;w_$B++)this._subMeshes[w_$B].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},w_$i(0,w_$l,"materials",function(){return this._materials.slice()}),w_$i(0,w_$l,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),w_$h.load=function(w_$B){return w_$o.loader.create(w_$B,null,null,w_$h)},w_$h}(),w_$Fh=(function(w_$B){function w_$P(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===w_$l&&(w_$l=6408),void 0===w_$A&&(w_$A=5121),void 0===w_$n&&(w_$n=33189),void 0===w_$s&&(w_$s=!1),void 0===w_$X&&(w_$X=!1),void 0===w_$Z&&(w_$Z=-1),void 0===w_$t&&(w_$t=-1),w_$P.__super.call(this),this._type=3553,this._width=w_$B,this._height=w_$h,this._size=new w_$$h(w_$B,w_$h),this._surfaceFormat=w_$l,this._surfaceType=w_$A,this._depthStencilFormat=w_$n,w_$$.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=w_$s,this._repeat=w_$X,this._minFifter=w_$Z,this._magFifter=w_$t,this.activeResource(),this._alreadyResolved=!0}w_$Q(w_$P,"laya.d3.resource.RenderTexture",w_$Sh);var w_$h=w_$P.prototype;w_$h.recreateResource=function(){var w_$B=w_$S.mainContext;this._frameBuffer=w_$B.createFramebuffer(),this._source=w_$B.createTexture();var w_$h=w_$N.curBindTexTarget,w_$l=w_$N.curBindTexValue;w_$N.bindTexture(w_$B,this._type,this._source),w_$B.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var w_$A=this._minFifter,w_$n=this._magFifter,w_$s=this._repeat?10497:33071;if(w_$C.isPOT(this._width,this._height)?(this._mipmap?-1!==w_$A||(w_$A=9987):-1!==w_$A||(w_$A=9729),-1!==w_$n||(w_$n=9729),w_$B.texParameteri(this._type,10241,w_$A),w_$B.texParameteri(this._type,10240,w_$n),w_$B.texParameteri(this._type,10242,w_$s),w_$B.texParameteri(this._type,10243,w_$s),this._mipmap&&w_$B.generateMipmap(this._type)):(-1!==w_$A||(w_$A=9729),-1!==w_$n||(w_$n=9729),w_$B.texParameteri(this._type,10241,w_$A),w_$B.texParameteri(this._type,10240,w_$n),w_$B.texParameteri(this._type,10242,33071),w_$B.texParameteri(this._type,10243,33071)),w_$h&&w_$l&&w_$N.bindTexture(w_$B,w_$h,w_$l),w_$B.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=w_$B.createRenderbuffer(),w_$B.bindRenderbuffer(36161,this._depthStencilBuffer),w_$B.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),w_$B.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:w_$B.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:w_$B.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:w_$B.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}w_$B.framebufferTexture2D(36160,36064,3553,this._source,0),w_$B.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},w_$h.start=function(){w_$S.mainContext.bindFramebuffer(36160,this.frameBuffer),(w_$P._currentRenderTarget=this)._alreadyResolved=!1},w_$h.end=function(){w_$S.mainContext.bindFramebuffer(36160,null),w_$P._currentRenderTarget=null,this._alreadyResolved=!0},w_$h.getData=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$S.mainContext;if(w_$n.bindFramebuffer(36160,this._frameBuffer),!(36053===w_$n.checkFramebufferStatus(36160)))return w_$n.bindFramebuffer(36160,null),null;var w_$s=new Uint8Array(this._width*this._height*4);return w_$n.readPixels(w_$B,w_$h,w_$l,w_$A,this._surfaceFormat,this._surfaceType,w_$s),w_$n.bindFramebuffer(36160,null),w_$s},w_$h.disposeResource=function(){if(this._frameBuffer){var w_$B=w_$S.mainContext;w_$B.deleteTexture(this._source),w_$B.deleteFramebuffer(this._frameBuffer),w_$B.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},w_$i(0,w_$h,"surfaceFormat",function(){return this._surfaceFormat}),w_$i(0,w_$h,"surfaceType",function(){return this._surfaceType}),w_$i(0,w_$h,"depthStencilFormat",function(){return this._depthStencilFormat}),w_$i(0,w_$h,"source",function(){return this._alreadyResolved?w_$o.superGet(w_$Sh,this,"source"):null}),w_$i(0,w_$h,"depthStencilBuffer",function(){return this._depthStencilBuffer}),w_$i(0,w_$h,"frameBuffer",function(){return this._frameBuffer}),w_$P._currentRenderTarget=null}(),function(w_$B){function w_$h(w_$B){this._color=null,this._pixels=null,w_$h.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new w_$$h(this.width,this.height),this._color=w_$B,this._pixels=new Uint8Array([255*w_$B.x,255*w_$B.y,255*w_$B.z,255*w_$B.w]),this.uri="SolidColorTexture2D_"+this.id}w_$Q(w_$h,"laya.d3.resource.SolidColorTexture2D",w_$Sh);var w_$l=w_$h.prototype;return w_$l._createWebGlTexture=function(){var w_$B=w_$S.mainContext,w_$h=this._source=w_$B.createTexture(),w_$l=this._width,w_$A=this._height,w_$n=w_$N.curBindTexTarget,w_$s=w_$N.curBindTexValue;w_$N.bindTexture(w_$B,this._type,w_$h),w_$B.texImage2D(this._type,0,6408,w_$l,w_$A,0,6408,5121,this._pixels);var w_$X=this._minFifter,w_$Z=this._magFifter,w_$t=this._repeat?10497:33071,w_$P=w_$C.isPOT(w_$l,w_$A);w_$P?(this._mipmap?-1!==w_$X||(w_$X=9987):-1!==w_$X||(w_$X=9729),-1!==w_$Z||(w_$Z=9729),w_$B.texParameteri(this._type,10241,w_$X),w_$B.texParameteri(this._type,10240,w_$Z),w_$B.texParameteri(this._type,10242,w_$t),w_$B.texParameteri(this._type,10243,w_$t),this._mipmap&&w_$B.generateMipmap(this._type)):(-1!==w_$X||(w_$X=9729),-1!==w_$Z||(w_$Z=9729),w_$B.texParameteri(this._type,10241,w_$X),w_$B.texParameteri(this._type,10240,w_$Z),w_$B.texParameteri(this._type,10242,33071),w_$B.texParameteri(this._type,10243,33071)),w_$n&&w_$s&&w_$N.bindTexture(w_$B,w_$n,w_$s),this.memorySize=w_$P?w_$l*w_$A*4*(1+1/3):w_$l*w_$A*4},w_$l.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},w_$l.disposeResource=function(){this._source&&(w_$S.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},w_$T(w_$h,["magentaTexture",function(){var w_$B=new w_$h(new w_$Zh(1,0,1,1));return w_$B.lock=!0,this.magentaTexture=w_$B},"grayTexture",function(){var w_$B=new w_$h(new w_$Zh(.5,.5,.5,1));return w_$B.lock=!0,this.grayTexture=w_$B}]),w_$h}()),w_$ch=function(w_$B){function w_$n(w_$B,w_$h,w_$l,w_$A){this._canRead=!1,this._image=null,this._pixels=null,void 0===w_$B&&(w_$B=!1),void 0===w_$h&&(w_$h=!0),void 0===w_$l&&(w_$l=6408),void 0===w_$A&&(w_$A=!0),w_$n.__super.call(this),this._type=3553,this._repeat=w_$h,this._canRead=w_$B,this._format=w_$l,this._mipmap=w_$A}w_$Q(w_$n,"laya.d3.resource.Texture2D",w_$Sh);var w_$h=w_$n.prototype;return w_$h._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var w_$B=w_$S.mainContext,w_$h=this._source=w_$B.createTexture(),w_$l=this._width,w_$A=this._height,w_$n=w_$N.curBindTexTarget,w_$s=w_$N.curBindTexValue;switch(w_$N.bindTexture(w_$B,this._type,w_$h),this._format){case 6407:case 6408:this._canRead?w_$B.texImage2D(this._type,0,this._format,w_$l,w_$A,0,this._format,5121,this._pixels):this._image instanceof laya.webgl.resource.WebGLImage?w_$B.texImage2D(this._type,0,this._image._format,w_$l,w_$A,0,this._image._format,5121,this._image.atlasSource):w_$B.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case w_$S.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:w_$B.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var w_$X=this._minFifter,w_$Z=this._magFifter,w_$t=this._repeat?10497:33071,w_$P=0==this._wrapModeU?10497:33071,w_$G=0==this._wrapModeV?10497:33071,w_$T=w_$C.isPOT(w_$l,w_$A);w_$T?(this._mipmap?-1!==w_$X||(w_$X=9987):-1!==w_$X||(w_$X=9729),-1!==w_$Z||(w_$Z=9729),w_$B.texParameteri(this._type,10241,w_$X),w_$B.texParameteri(this._type,10240,w_$Z),w_$B.texParameteri(this._type,10242,w_$t),w_$B.texParameteri(this._type,10243,w_$t),w_$B.texParameteri(this._type,10242,w_$P),w_$B.texParameteri(this._type,10243,w_$G),this._mipmap&&w_$B.generateMipmap(this._type)):(-1!==w_$X||(w_$X=9729),-1!==w_$Z||(w_$Z=9729),w_$B.texParameteri(this._type,10241,w_$X),w_$B.texParameteri(this._type,10240,w_$Z),w_$B.texParameteri(this._type,10242,33071),w_$B.texParameteri(this._type,10243,33071)),w_$n&&w_$s&&w_$N.bindTexture(w_$B,w_$n,w_$s),this._image.onload=null,this._image=null,this.memorySize=w_$T?w_$l*w_$A*4*(1+1/3):w_$l*w_$A*4},w_$h.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},w_$h.onAsynLoaded=function(w_$B,w_$h,w_$l){if(w_$l){var w_$A=w_$l[0];void 0!==w_$A&&(this._canRead=w_$A);var w_$n=w_$l[1];void 0!==w_$n&&(this._repeat=w_$n);var w_$s=w_$l[2];void 0!==w_$s&&(this._format=w_$s);var w_$X=w_$l[3];void 0!==w_$X&&(this._mipmap=w_$X);var w_$Z=w_$l.wrapModeU;void 0!==w_$Z&&(this._wrapModeU=w_$Z);var w_$t=w_$l.wrapModeV;void 0!==w_$t&&(this._wrapModeV=w_$t)}switch(this._format){case 6407:case 6408:var w_$P=(this._image=w_$h).width,w_$G=w_$h.height;this._width=w_$P,this._height=w_$G,this._size=new w_$$h(w_$P,w_$G),this._canRead&&(w_$$.isConchApp?w_$h instanceof w_$b.HTMLElement&&(this._pixels=new Uint8Array(w_$h.getImageData(0,0,w_$P,w_$G))):(w_$R.canvas.size(w_$P,w_$G),w_$R.canvas.clear(),w_$R.context.drawImage(w_$h,0,0,w_$P,w_$G),this._pixels=new Uint8Array(w_$R.context.getImageData(0,0,w_$P,w_$G).data.buffer)));break;case w_$S.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var w_$T=new w_$u(w_$h);w_$T.readUTFBytes(4),w_$T.readUTFBytes(2),w_$T.getInt16();w_$T.endian="bigEndian",this._width=w_$T.getInt16(),this._height=w_$T.getInt16(),this._size=new w_$$h(this._width,this._height);w_$T.getInt16(),w_$T.getInt16();this._image=new Uint8Array(w_$h,w_$T.pos)}this.recreateResource(),this._endLoaded()},w_$h.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},w_$h.disposeResource=function(){this._source&&(w_$S.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},w_$i(0,w_$h,"_src",function(){return this.url}),w_$i(0,w_$h,"src",function(){return this.url}),w_$n.load=function(w_$B){return w_$o.loader.create(w_$B,null,null,w_$n)},w_$n}(),w_$mh=function(w_$h){function w_$l(w_$B,w_$h){w_$l.__super.call(this),void 0===w_$B&&(w_$B=.3),void 0===w_$h&&(w_$h=1e3),this._tempVector3=new w_$Xh,this._position=new w_$Xh,this._up=new w_$Xh,this._forward=new w_$Xh,this._right=new w_$Xh,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=w_$$h.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=w_$B,this._farPlane=w_$h,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),w_$o.stage.on("resize",this,this._onScreenSizeChanged)}w_$Q(w_$l,"laya.d3.core.BaseCamera",w_$h);var w_$B=w_$l.prototype;return w_$B._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var w_$B=this.scene._cameraPool,w_$h=w_$B.length-1,w_$l=0;w_$l<w_$h;w_$l++)if(w_$B[w_$l].renderingOrder>w_$B[w_$h].renderingOrder){var w_$A=w_$B[w_$l];w_$B[w_$l]=w_$B[w_$h],w_$B[w_$h]=w_$A}},w_$B._calculateProjectionMatrix=function(){},w_$B._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},w_$B._prepareCameraToRender=function(){w_$W._currentCameraCullingMask=this.cullingMask;var w_$B=this._shaderValues;w_$B.setValue(0,this.transform.position.elements),w_$B.setValue(5,this.forward.elements),w_$B.setValue(6,this.up.elements)},w_$B._prepareCameraViewProject=function(w_$B,w_$h){var w_$l=this._shaderValues;w_$l.setValue(1,w_$B.elements),w_$l.setValue(2,w_$h.elements)},w_$B._renderCamera=function(w_$B,w_$h,w_$l){},w_$B.addLayer=function(w_$B){29!==w_$B.number&&30!=w_$B.number&&(this.cullingMask=this.cullingMask|w_$B.mask)},w_$B.removeLayer=function(w_$B){29!==w_$B.number&&30!=w_$B.number&&(this.cullingMask=this.cullingMask&~w_$B.mask)},w_$B.addAllLayers=function(){this.cullingMask=2147483647},w_$B.removeAllLayers=function(){this.cullingMask=0|w_$W.getLayerByNumber(29).mask|w_$W.getLayerByNumber(30).mask},w_$B.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},w_$B.moveForward=function(w_$B){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=w_$B,this.transform.translate(this._tempVector3)},w_$B.moveRight=function(w_$B){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=w_$B,this.transform.translate(this._tempVector3)},w_$B.moveVertical=function(w_$B){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=w_$B,this.transform.translate(this._tempVector3,!1)},w_$B._addSelfRenderObjects=function(){var w_$B=this.scene._cameraPool,w_$h=w_$B.length;if(0<w_$h){for(var w_$l=w_$h-1;0<=w_$l;w_$l--)if(this.renderingOrder<=w_$B[w_$l].renderingOrder){w_$B.splice(w_$l+1,0,this);break}}else w_$B.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},w_$B._clearSelfRenderObjects=function(){var w_$B=this.scene._cameraPool;w_$B.splice(w_$B.indexOf(this),1)},w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,w_$o.stage.off("resize",this,this._onScreenSizeChanged),w_$h.prototype.destroy.call(this,w_$B)},w_$i(0,w_$B,"sky",function(){return this._sky},function(w_$B){(this._sky=w_$B)._ownerCamera=this}),w_$i(0,w_$B,"forward",function(){var w_$B=this.transform.worldMatrix.elements,w_$h=this._forward.elements;return w_$h[0]=-w_$B[8],w_$h[1]=-w_$B[9],w_$h[2]=-w_$B[10],this._forward}),w_$i(0,w_$B,"position",function(){var w_$B=this.transform.worldMatrix.elements,w_$h=this._position.elements;return w_$h[0]=w_$B[12],w_$h[1]=w_$B[13],w_$h[2]=w_$B[14],this._position}),w_$i(0,w_$B,"renderTarget",function(){return this._renderTarget},function(w_$B){null!=(this._renderTarget=w_$B)&&(this._renderTargetSize=w_$B.size)}),w_$i(0,w_$B,"up",function(){var w_$B=this.transform.worldMatrix.elements,w_$h=this._up.elements;return w_$h[0]=w_$B[4],w_$h[1]=w_$B[5],w_$h[2]=w_$B[6],this._up}),w_$i(0,w_$B,"right",function(){var w_$B=this.transform.worldMatrix.elements,w_$h=this._right.elements;return w_$h[0]=w_$B[0],w_$h[1]=w_$B[1],w_$h[2]=w_$B[2],this._right}),w_$i(0,w_$B,"renderTargetSize",function(){return this._renderTargetSize},function(w_$B){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$B,"fieldOfView",function(){return this._fieldOfView},function(w_$B){this._fieldOfView=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$B,"nearPlane",function(){return this._nearPlane},function(w_$B){this._nearPlane=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$B,"farPlane",function(){return this._farPlane},function(w_$B){this._farPlane=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$B,"orthographic",function(){return this._orthographic},function(w_$B){this._orthographic=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$B,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(w_$B){this._orthographicVerticalSize=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$B,"renderingOrder",function(){return this._renderingOrder},function(w_$B){this._renderingOrder=w_$B,this._sortCamerasByRenderingOrder()}),w_$l.CAMERAPOS=0,w_$l.VIEWMATRIX=1,w_$l.PROJECTMATRIX=2,w_$l.VPMATRIX=3,w_$l.VPMATRIX_NO_TRANSLATE=4,w_$l.CAMERADIRECTION=5,w_$l.CAMERAUP=6,w_$l.ENVIRONMENTDIFFUSE=7,w_$l.ENVIRONMENTSPECULAR=8,w_$l.SIMLODINFO=9,w_$l.DIFFUSEIRRADMATR=10,w_$l.DIFFUSEIRRADMATG=11,w_$l.DIFFUSEIRRADMATB=12,w_$l.HDREXPOSURE=13,w_$l.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",w_$l.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",w_$l.CLEARFLAG_SOLIDCOLOR=0,w_$l.CLEARFLAG_SKY=1,w_$l.CLEARFLAG_DEPTHONLY=2,w_$l.CLEARFLAG_NONE=3,w_$T(w_$l,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new w_$Bh(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new w_$Bh},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new w_$Bh}]),w_$l}(w_$Eh),w_$Yh=function(w_$l){function w_$h(w_$B){this._render=null,this._geometryFilter=null,w_$h.__super.call(this,w_$B)}w_$Q(w_$h,"laya.d3.core.RenderableSprite3D",w_$l);var w_$B=w_$h.prototype;return w_$B._addToInitStaticBatchManager=function(){},w_$B._setBelongScene=function(w_$B){w_$l.prototype._setBelongScene.call(this,w_$B),w_$B._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},w_$B._setUnBelongScene=function(){var w_$B=this._scene._renderableSprite3Ds,w_$h=w_$B.indexOf(this);w_$B.splice(w_$h,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),w_$l.prototype._setUnBelongScene.call(this)},w_$B._update=function(w_$B){(w_$B.owner=this)._activeInHierarchy&&(this._updateComponents(w_$B),this._render._updateOctreeNode(),this._lateUpdateComponents(w_$B),w_$U.spriteCount++,this._childs.length&&this._updateChilds(w_$B))},w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$l.prototype.destroy.call(this,w_$B),this._render._destroy(),this._render=null},w_$h.__init__=function(){w_$h.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=w_$h.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),w_$h.SAHDERDEFINE_LIGHTMAP=w_$h.shaderDefines.registerDefine("LIGHTMAP")},w_$h.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,w_$h.SAHDERDEFINE_LIGHTMAP=4,w_$h.LIGHTMAPSCALEOFFSET=2,w_$h.LIGHTMAP=3,w_$T(w_$h,["shaderDefines",function(){return this.shaderDefines=new w_$Gh}]),w_$h}(w_$Eh),w_$Kh=(function(w_$B){function w_$A(w_$B,w_$h,w_$l){this._long=NaN,this._width=NaN,this._height=NaN,void 0===w_$B&&(w_$B=1),void 0===w_$h&&(w_$h=1),void 0===w_$l&&(w_$l=1),w_$A.__super.call(this),this._long=w_$B,this._width=w_$h,this._height=w_$l,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}w_$Q(w_$A,"laya.d3.resource.models.BoxMesh",w_$Oh);var w_$h=w_$A.prototype;w_$h.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var w_$B=w_$SB.vertexDeclaration,w_$h=(w_$B.vertexStride,this._long/2),w_$l=this._height/2,w_$A=this._width/2,w_$n=new Float32Array([-w_$h,w_$l,-w_$A,0,1,0,0,0,w_$h,w_$l,-w_$A,0,1,0,1,0,w_$h,w_$l,w_$A,0,1,0,1,1,-w_$h,w_$l,w_$A,0,1,0,0,1,-w_$h,-w_$l,-w_$A,0,-1,0,0,1,w_$h,-w_$l,-w_$A,0,-1,0,1,1,w_$h,-w_$l,w_$A,0,-1,0,1,0,-w_$h,-w_$l,w_$A,0,-1,0,0,0,-w_$h,w_$l,-w_$A,-1,0,0,0,0,-w_$h,w_$l,w_$A,-1,0,0,1,0,-w_$h,-w_$l,w_$A,-1,0,0,1,1,-w_$h,-w_$l,-w_$A,-1,0,0,0,1,w_$h,w_$l,-w_$A,1,0,0,1,0,w_$h,w_$l,w_$A,1,0,0,0,0,w_$h,-w_$l,w_$A,1,0,0,0,1,w_$h,-w_$l,-w_$A,1,0,0,1,1,-w_$h,w_$l,w_$A,0,0,1,0,0,w_$h,w_$l,w_$A,0,0,1,1,0,w_$h,-w_$l,w_$A,0,0,1,1,1,-w_$h,-w_$l,w_$A,0,0,1,0,1,-w_$h,w_$l,-w_$A,0,0,-1,1,0,w_$h,w_$l,-w_$A,0,0,-1,0,0,w_$h,-w_$l,-w_$A,0,0,-1,0,1,-w_$h,-w_$l,-w_$A,0,0,-1,1,1]),w_$s=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new w_$dh(w_$B,this._numberVertices,35044,!0),this._indexBuffer=new w_$_h("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(w_$n),this._indexBuffer.setData(w_$s),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},w_$i(0,w_$h,"long",function(){return this._long},function(w_$B){this._long!==w_$B&&(this._long=w_$B,this.releaseResource(),this.activeResource())}),w_$i(0,w_$h,"width",function(){return this._width},function(w_$B){this._width!==w_$B&&(this._width=w_$B,this.releaseResource(),this.activeResource())}),w_$i(0,w_$h,"height",function(){return this._height},function(w_$B){this._height!==w_$B&&(this._height=w_$B,this.releaseResource(),this.activeResource())})}(),function(w_$B){function w_$X(w_$B,w_$h,w_$l){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=.3),void 0===w_$l&&(w_$l=1e3),this._viewMatrix=new w_$Bh,this._projectionMatrix=new w_$Bh,this._projectionViewMatrix=new w_$Bh,this._viewport=new w_$th(0,0,0,0),this._normalizedViewport=new w_$th(0,0,1,1),this._aspectRatio=w_$B,this._boundFrustumUpdate=!0,this._boundFrustum=new w_$eB(w_$Bh.DEFAULT),w_$X.__super.call(this,w_$h,w_$l),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}w_$Q(w_$X,"laya.d3.core.Camera",w_$mh);var w_$h=w_$X.prototype;return w_$h._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},w_$h._parseCustomProps=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$l.clearColor;this.clearColor=new w_$Zh(w_$n[0],w_$n[1],w_$n[2],w_$n[3]);var w_$s=w_$l.viewport;this.normalizedViewport=new w_$th(w_$s[0],w_$s[1],w_$s[2],w_$s[3])},w_$h._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var w_$B=this.orthographicVerticalSize*this.aspectRatio*.5,w_$h=.5*this.orthographicVerticalSize;w_$Bh.createOrthoOffCenterRH(-w_$B,w_$B,-w_$h,w_$h,this.nearPlane,this.farPlane,this._projectionMatrix)}else w_$Bh.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},w_$h._update=function(w_$B){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,w_$B)},w_$h._renderCamera=function(w_$B,w_$h,w_$l){var w_$A,w_$n;w_$l.parallelSplitShadowMaps[0]&&w_$l._renderShadowMap(w_$B,w_$h,this),(w_$h.camera=this)._prepareCameraToRender(),w_$l._preRenderUpdateComponents(w_$h),w_$A=w_$h._viewMatrix=this.viewMatrix;var w_$s=this._renderTarget;w_$s?(w_$s.start(),w_$Bh.multiply(w_$mh._invertYScaleMatrix,this._projectionMatrix,w_$mh._invertYProjectionMatrix),w_$Bh.multiply(w_$mh._invertYScaleMatrix,this.projectionViewMatrix,w_$mh._invertYProjectionViewMatrix),w_$n=w_$h._projectionMatrix=w_$mh._invertYProjectionMatrix,w_$h._projectionViewMatrix=w_$mh._invertYProjectionViewMatrix):(w_$n=w_$h._projectionMatrix=this._projectionMatrix,w_$h._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(w_$A,w_$n),w_$h._viewport=this.viewport,w_$l._preRenderScene(w_$B,w_$h,this.boundFrustum),w_$l._clear(w_$B,w_$h),w_$l._renderScene(w_$B,w_$h),w_$l._postRenderUpdateComponents(w_$h),w_$s&&w_$s.end()},w_$h.viewportPointToRay=function(w_$B,w_$h){w_$ih.calculateCursorRay(w_$B,this.viewport,this._projectionMatrix,this.viewMatrix,null,w_$h)},w_$h.normalizedViewportPointToRay=function(w_$B,w_$h){var w_$l=w_$X._tempVector20,w_$A=this.viewport,w_$n=w_$B.elements,w_$s=w_$l.elements;w_$s[0]=w_$n[0]*w_$A.width,w_$s[1]=w_$n[1]*w_$A.height,w_$ih.calculateCursorRay(w_$l,this.viewport,this._projectionMatrix,this.viewMatrix,null,w_$h)},w_$h.worldToViewportPoint=function(w_$B,w_$h){w_$Bh.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(w_$B,this._projectionViewMatrix,w_$h);var w_$l=w_$h.elements;w_$l[0]=w_$l[0]/w_$o.stage.clientScaleX,w_$l[1]=w_$l[1]/w_$o.stage.clientScaleY},w_$h.worldToNormalizedViewportPoint=function(w_$B,w_$h){w_$Bh.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(w_$B,this._projectionViewMatrix,w_$h);var w_$l=w_$h.elements;w_$l[0]=w_$l[0]/w_$o.stage.clientScaleX,w_$l[1]=w_$l[1]/w_$o.stage.clientScaleY},w_$h.convertScreenCoordToOrthographicCoord=function(w_$B,w_$h){if(this._orthographic){var w_$l=w_$I.clientWidth,w_$A=w_$I.clientHeight,w_$n=this.orthographicVerticalSize*this.aspectRatio/w_$l,w_$s=this.orthographicVerticalSize/w_$A,w_$X=w_$B.elements,w_$Z=w_$h.elements;return w_$Z[0]=(-w_$l/2+w_$X[0])*w_$n,w_$Z[1]=(w_$A/2-w_$X[1])*w_$s,w_$Z[2]=(this.nearPlane-this.farPlane)*(w_$X[2]+1)/2-this.nearPlane,w_$Xh.transformCoordinate(w_$h,this.transform.worldMatrix,w_$h),!0}return!1},w_$i(0,w_$h,"projectionViewMatrix",function(){return w_$Bh.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),w_$i(0,w_$h,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var w_$B=this.viewport;return w_$B.width/w_$B.height},function(w_$B){if(w_$B<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$h,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),w_$i(0,w_$h,"needViewport",function(){var w_$B=this.normalizedViewport;return 0===w_$B.x&&0===w_$B.y&&1===w_$B.width&&1===w_$B.height}),w_$i(0,w_$h,"viewport",function(){if(this._viewportExpressedInClipSpace){var w_$B=this._normalizedViewport,w_$h=this.renderTargetSize,w_$l=w_$h.width,w_$A=w_$h.height;this._viewport.x=w_$B.x*w_$l,this._viewport.y=w_$B.y*w_$A,this._viewport.width=w_$B.width*w_$l,this._viewport.height=w_$B.height*w_$A}return this._viewport},function(w_$B){if(null!=this.renderTarget&&(w_$B.x<0||w_$B.y<0||0==w_$B.width||0==w_$B.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$h,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var w_$B=this._viewport,w_$h=this.renderTargetSize,w_$l=w_$h.width,w_$A=w_$h.height;this._normalizedViewport.x=w_$B.x/w_$l,this._normalizedViewport.y=w_$B.y/w_$A,this._normalizedViewport.width=w_$B.width/w_$l,this._normalizedViewport.height=w_$B.height/w_$A}return this._normalizedViewport},function(w_$B){w_$B.x<0&&(w_$B.x=0,console.warn("Camera: viewport.x must large than 0.0.")),w_$B.y<0&&(w_$B.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<w_$B.x+w_$B.width&&(w_$B.width=1-w_$B.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<w_$B.y+w_$B.height&&(w_$B.height=1-w_$B.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=w_$B,this._calculateProjectionMatrix()}),w_$i(0,w_$h,"projectionMatrix",function(){return this._projectionMatrix},function(w_$B){this._projectionMatrix=w_$B,this._useUserProjectionMatrix=!0}),w_$i(0,w_$h,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),w_$T(w_$X,["_tempVector20",function(){return this._tempVector20=new w_$sh}]),w_$X}()),w_$fh=function(w_$l){function w_$A(w_$B,w_$h){w_$A.__super.call(this,w_$h),this._geometryFilter=new w_$Rh(this),this._render=new w_$Wh(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),w_$B&&(this._geometryFilter.sharedMesh=w_$B)instanceof laya.d3.resource.models.Mesh&&(w_$B.loaded?this._render.sharedMaterials=w_$B.materials:w_$B.once("loaded",this,this._applyMeshMaterials))}w_$Q(w_$A,"laya.d3.core.MeshSprite3D",w_$l);var w_$B=w_$A.prototype;return w_$B._changeRenderObjectByMesh=function(w_$B){var w_$h=this._render._renderElements,w_$l=w_$h[w_$B];w_$l||(w_$l=w_$h[w_$B]=new w_$vh),w_$l._render=this._render;var w_$A=this._render.sharedMaterials[w_$B];w_$A||(w_$A=w_$gh.defaultMaterial);var w_$n=this._geometryFilter.sharedMesh.getRenderElement(w_$B);return w_$l._mainSortID=this._getSortID(w_$n,w_$A),w_$l._sprite3D=this,w_$l.renderObj=w_$n,w_$l._material=w_$A,w_$l},w_$B._changeRenderObjectByMaterial=function(w_$B,w_$h){var w_$l=this._render._renderElements[w_$B];w_$h||(w_$h=w_$gh.defaultMaterial);var w_$A=this._geometryFilter.sharedMesh.getRenderElement(w_$B);return w_$l._mainSortID=this._getSortID(w_$A,w_$h),w_$l._sprite3D=this,w_$l.renderObj=w_$A,w_$l._material=w_$h,w_$l},w_$B._changeRenderObjectsByMesh=function(){var w_$B=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=w_$B;for(var w_$h=0;w_$h<w_$B;w_$h++)this._changeRenderObjectByMesh(w_$h)},w_$B._onMeshChanged=function(w_$B){var w_$h=w_$B.sharedMesh;w_$h.loaded?this._changeRenderObjectsByMesh():w_$h.once("loaded",this,this._onMeshLoaded)},w_$B._onMeshLoaded=function(w_$B){w_$B===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},w_$B._onMaterialChanged=function(w_$B,w_$h,w_$l){w_$h<this._render._renderElements.length&&this._changeRenderObjectByMaterial(w_$h,w_$l)},w_$B._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},w_$B._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},w_$B._parseCustomProps=function(w_$B,w_$h,w_$l,w_$A){var w_$n=this.meshRender,w_$s=w_$l.lightmapIndex;null!=w_$s&&(w_$n.lightmapIndex=w_$s);var w_$X,w_$Z,w_$t=w_$l.lightmapScaleOffset;if(w_$t&&(w_$n.lightmapScaleOffset=new w_$Zh(w_$t[0],w_$t[1],w_$t[2],w_$t[3])),w_$A.instanceParams)(w_$X=w_$A.instanceParams.loadPath)&&(w_$Z=w_$J.getRes(w_$h[w_$X]),(this.meshFilter.sharedMesh=w_$Z).loaded?w_$n.sharedMaterials=w_$Z.materials:w_$Z.once("loaded",this,this._applyMeshMaterials));else{(w_$X=w_$l.meshPath)&&(w_$Z=w_$J.getRes(w_$h[w_$X]),this.meshFilter.sharedMesh=w_$Z);var w_$P=w_$l.materials;if(w_$P){var w_$G=w_$n.sharedMaterials,w_$T=w_$P.length;w_$G.length=w_$T;for(var w_$b=0;w_$b<w_$T;w_$b++)w_$G[w_$b]=w_$J.getRes(w_$h[w_$P[w_$b].path]);w_$n.sharedMaterials=w_$G}}},w_$B._applyMeshMaterials=function(w_$B){for(var w_$h=this._render.sharedMaterials,w_$l=w_$B.materials,w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$A++)w_$h[w_$A]||(w_$h[w_$A]=w_$l[w_$A]);this._render.sharedMaterials=w_$h},w_$B._addToInitStaticBatchManager=function(){w_$A._staticBatchManager._addInitBatchSprite(this)},w_$B.cloneTo=function(w_$B){var w_$h=w_$B;w_$h._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var w_$l=this._render,w_$A=w_$h._render;w_$A.enable=w_$l.enable,w_$A.sharedMaterials=w_$l.sharedMaterials,w_$A.castShadow=w_$l.castShadow;var w_$n=w_$l.lightmapScaleOffset;w_$n&&(w_$A.lightmapScaleOffset=w_$n.clone()),w_$A.lightmapIndex=w_$l.lightmapIndex,w_$A.receiveShadow=w_$l.receiveShadow,w_$A.sortingFudge=w_$l.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,w_$B)},w_$B.destroy=function(w_$B){if(void 0===w_$B&&(w_$B=!0),!this.destroyed){var w_$h=this.meshFilter.sharedMesh;null!=w_$h&&(w_$h.loaded||w_$h.off("loaded",this,this._applyMeshMaterials)),w_$l.prototype.destroy.call(this,w_$B),this._geometryFilter._destroy()}},w_$i(0,w_$B,"meshFilter",function(){return this._geometryFilter}),w_$i(0,w_$B,"meshRender",function(){return this._render}),w_$A.__init__=function(){w_$AB._staticBatchManagers.push(w_$A._staticBatchManager)},w_$A.load=function(w_$B){return w_$o.loader.create(w_$B,null,null,w_$A)},w_$T(w_$A,["_staticBatchManager",function(){return this._staticBatchManager=new w_$xh}]),w_$A}(w_$Yh)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w_$B,w_$h){"use strict";for(var w_$l in Object.defineProperty(w_$h,"__esModule",{value:!0}),Laya){var w_$A=Laya[w_$l];w_$A&&w_$A.__isclass&&(w_$h[w_$l]=w_$A)}}),function(w_$B,w_$h,w_$nB){w_$nB.un,w_$nB.uns;var w_$l=w_$nB.static,w_$A=w_$nB.class,w_$s=w_$nB.getset,w_$$=w_$nB.__newvec,w_$Z=laya.maths.Bezier,w_$T=laya.utils.Browser,w_$SB=laya.utils.Byte,w_$n=(laya.events.Event,laya.events.EventDispatcher),w_$X=laya.display.Graphics,w_$t=(laya.resource.HTMLCanvas,laya.utils.Handler),w_$P=laya.net.Loader,w_$b=laya.maths.MathUtil,w_$NB=laya.maths.Matrix,w_$V=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),w_$G=(laya.renders.RenderContext,laya.resource.Resource),w_$Q=laya.utils.RunDriver,w_$sB=laya.display.Sprite,w_$i=laya.utils.Stat,w_$RB=laya.resource.Texture,w_$J=(laya.net.URL,laya.utils.Utils),w_$N=function(){function w_$B(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return w_$A(w_$B,"laya.ani.AnimationContent"),w_$B}(),w_$R=function(){function w_$B(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return w_$A(w_$B,"laya.ani.AnimationNodeContent"),w_$B}(),w_$y=function(){function w_$B(){}return w_$A(w_$B,"laya.ani.AnimationParser01"),w_$B.parse=function(w_$B,w_$h){var w_$l=w_$h.__getBuffer(),w_$A=0,w_$n=0,w_$s=0,w_$X=0,w_$Z=0,w_$t=0,w_$P=0,w_$G=w_$h.readUTFString();w_$B._aniClassName=w_$G;var w_$T,w_$b=w_$h.readUTFString().split("\n"),w_$Q=w_$h.getUint8(),w_$i=w_$h.getUint32(),w_$$=w_$h.getUint32();0<w_$i&&(w_$T=w_$l.slice(w_$i,w_$$));var w_$V=new w_$SB(w_$T);for(0<w_$$&&(w_$B._publicExtData=w_$l.slice(w_$$,w_$l.byteLength)),w_$B._useParent=!!w_$h.getUint8(),w_$B._anis.length=w_$Q,w_$A=0;w_$A<w_$Q;w_$A++){var w_$J=w_$B._anis[w_$A]=new w_$N;w_$J.nodes=new Array;var w_$H=w_$J.name=w_$b[w_$h.getUint16()];w_$B._aniMap[w_$H]=w_$A,w_$J.bone3DMap={},w_$J.playTime=w_$h.getFloat32(),w_$J.playTime<=0&&console.error("播放时间不能为0  url="+w_$B.url+" name="+w_$J.name);var w_$y=w_$J.nodes.length=w_$h.getUint8();for(w_$n=w_$J.totalKeyframeDatasLength=0;w_$n<w_$y;w_$n++){var w_$C=w_$J.nodes[w_$n]=new w_$R;w_$C.childs=[];var w_$o=w_$h.getInt16();0<=w_$o&&(w_$C.name=w_$b[w_$o],w_$J.bone3DMap[w_$C.name]=w_$n),w_$C.keyFrame=new Array,w_$C.parentIndex=w_$h.getInt16(),-1==w_$C.parentIndex?w_$C.parent=null:w_$C.parent=w_$J.nodes[w_$C.parentIndex],w_$C.lerpType=w_$h.getUint8();var w_$u=w_$h.getUint32();w_$V.pos=w_$u;var w_$v=w_$C.keyframeWidth=w_$V.getUint16();if(w_$J.totalKeyframeDatasLength+=w_$v,0===w_$C.lerpType||1===w_$C.lerpType)for(w_$C.interpolationMethod=[],w_$C.interpolationMethod.length=w_$v,w_$s=0;w_$s<w_$v;w_$s++)w_$C.interpolationMethod[w_$s]=w_$E.interpolation[w_$V.getUint8()];null!=w_$C.parent&&w_$C.parent.childs.push(w_$C);var w_$U=w_$h.getUint16();0<w_$U&&(w_$C.extenData=w_$l.slice(w_$h.pos,w_$h.pos+w_$U),w_$h.pos+=w_$U);var w_$x,w_$w=w_$h.getUint16(),w_$z=0;for(w_$s=0,w_$X=w_$C.keyFrame.length=w_$w;w_$s<w_$X;w_$s++){if((w_$x=w_$C.keyFrame[w_$s]=new w_$W).duration=w_$h.getFloat32(),w_$x.startTime=w_$z,2===w_$C.lerpType){w_$x.interpolationData=[];var w_$a,w_$S=w_$h.getUint8();switch(w_$a=w_$h.getFloat32()){case 254:for(w_$x.interpolationData.length=w_$v,w_$P=0;w_$P<w_$v;w_$P++)w_$x.interpolationData[w_$P]=0;break;case 255:for(w_$x.interpolationData.length=w_$v,w_$P=0;w_$P<w_$v;w_$P++)w_$x.interpolationData[w_$P]=5;break;default:for(w_$x.interpolationData.push(w_$a),w_$t=1;w_$t<w_$S;w_$t++)w_$x.interpolationData.push(w_$h.getFloat32())}}for(w_$x.data=new Float32Array(w_$v),w_$Z=0;w_$Z<w_$v;w_$Z++)w_$x.data[w_$Z]=w_$h.getFloat32(),-1e-8<w_$x.data[w_$Z]&&w_$x.data[w_$Z]<1e-8&&(w_$x.data[w_$Z]=0);w_$z+=w_$x.duration}w_$x.startTime=w_$J.playTime,w_$C.playTime=w_$J.playTime,w_$B._calculateKeyFrame(w_$C,w_$w,w_$v)}}},w_$B}(),w_$C=function(){function w_$o(){}return w_$A(w_$o,"laya.ani.AnimationParser02"),w_$o.READ_DATA=function(){w_$o._DATA.offset=w_$o._reader.getUint32(),w_$o._DATA.size=w_$o._reader.getUint32()},w_$o.READ_BLOCK=function(){for(var w_$B=w_$o._BLOCK.count=w_$o._reader.getUint16(),w_$h=w_$o._BLOCK.blockStarts=[],w_$l=w_$o._BLOCK.blockLengths=[],w_$A=0;w_$A<w_$B;w_$A++)w_$h.push(w_$o._reader.getUint32()),w_$l.push(w_$o._reader.getUint32())},w_$o.READ_STRINGS=function(){var w_$B=w_$o._reader.getUint32(),w_$h=w_$o._reader.getUint16(),w_$l=w_$o._reader.pos;w_$o._reader.pos=w_$B+w_$o._DATA.offset;for(var w_$A=0;w_$A<w_$h;w_$A++)w_$o._strings[w_$A]=w_$o._reader.readUTFString();w_$o._reader.pos=w_$l},w_$o.parse=function(w_$B,w_$h){w_$o._templet=w_$B;(w_$o._reader=w_$h).__getBuffer();w_$o.READ_DATA(),w_$o.READ_BLOCK(),w_$o.READ_STRINGS();for(var w_$l=0,w_$A=w_$o._BLOCK.count;w_$l<w_$A;w_$l++){var w_$n=w_$h.getUint16(),w_$s=w_$o._strings[w_$n],w_$X=w_$o["READ_"+w_$s];if(null==w_$X)throw new Error("model file err,no this function:"+w_$n+" "+w_$s);w_$X.call()}},w_$o.READ_ANIMATIONS=function(){var w_$B=w_$o._reader,w_$h=w_$B.__getBuffer(),w_$l=0,w_$A=0,w_$n=0,w_$s=0,w_$X=w_$B.getUint16(),w_$Z=[];for(w_$Z.length=w_$X,w_$l=0;w_$l<w_$X;w_$l++)w_$Z[w_$l]=w_$E.interpolation[w_$B.getByte()];var w_$t=w_$B.getUint8();for(w_$o._templet._anis.length=w_$t,w_$l=0;w_$l<w_$t;w_$l++){var w_$P=w_$o._templet._anis[w_$l]={};w_$P.nodes=new Array;var w_$G=w_$P.name=w_$o._strings[w_$B.getUint16()];w_$o._templet._aniMap[w_$G]=w_$l,w_$P.bone3DMap={},w_$P.playTime=w_$B.getFloat32();var w_$T=w_$P.nodes.length=w_$B.getInt16();for(w_$A=w_$P.totalKeyframeDatasLength=0;w_$A<w_$T;w_$A++){var w_$b=w_$P.nodes[w_$A]={};w_$b.keyframeWidth=w_$X,w_$b.childs=[];var w_$Q=w_$B.getUint16();0<=w_$Q&&(w_$b.name=w_$o._strings[w_$Q],w_$P.bone3DMap[w_$b.name]=w_$A),w_$b.keyFrame=new Array,w_$b.parentIndex=w_$B.getInt16(),-1==w_$b.parentIndex?w_$b.parent=null:w_$b.parent=w_$P.nodes[w_$b.parentIndex],w_$P.totalKeyframeDatasLength+=w_$X,w_$b.interpolationMethod=w_$Z,null!=w_$b.parent&&w_$b.parent.childs.push(w_$b);var w_$i=w_$B.getUint16(),w_$$=null,w_$V=null;for(w_$n=0,w_$s=w_$b.keyFrame.length=w_$i;w_$n<w_$s;w_$n++){(w_$$=w_$b.keyFrame[w_$n]={}).startTime=w_$B.getFloat32(),w_$V&&(w_$V.duration=w_$$.startTime-w_$V.startTime);var w_$J=w_$o._DATA.offset,w_$H=w_$B.getUint32(),w_$y=4*w_$X,w_$C=w_$h.slice(w_$J+w_$H,w_$J+w_$H+w_$y);w_$$.data=new Float32Array(w_$C),w_$V=w_$$}w_$$.duration=0,w_$b.playTime=w_$P.playTime,w_$o._templet._calculateKeyFrame(w_$b,w_$i,w_$X)}}},w_$o._templet=null,w_$o._reader=null,w_$o._strings=[],w_$l(w_$o,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),w_$o}(),w_$WB=(function(){function w_$B(){}w_$A(w_$B,"laya.ani.AnimationState"),w_$B.stopped=0,w_$B.paused=1,w_$B.playing=2}(),function(){function w_$n(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new w_$YB,this.resultMatrix=new w_$NB,this._children=[]}w_$A(w_$n,"laya.ani.bone.Bone");var w_$B=w_$n.prototype;return w_$B.setTempMatrix=function(w_$B){this._tempMatrix=w_$B;var w_$h,w_$l=0;for(w_$l=0,w_$h=this._children.length;w_$l<w_$h;w_$l++)this._children[w_$l].setTempMatrix(this._tempMatrix)},w_$B.update=function(w_$B){var w_$h;if(this.rotation=this.transform.skX,w_$B)w_$h=this.resultTransform.getMatrix(),w_$NB.mul(w_$h,w_$B,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)w_$h=this.resultTransform.getMatrix(),w_$NB.mul(w_$h,this.parentBone.resultMatrix,this.resultMatrix);else{var w_$l=this.parentBone,w_$A=NaN,w_$n=NaN,w_$s=NaN,w_$X=this.parentBone.resultMatrix;w_$h=this.resultTransform.getMatrix();var w_$Z=w_$X.a*w_$h.tx+w_$X.c*w_$h.ty+w_$X.tx,w_$t=w_$X.b*w_$h.tx+w_$X.d*w_$h.ty+w_$X.ty,w_$P=new w_$NB;this.inheritRotation?(w_$A=Math.atan2(w_$l.resultMatrix.b,w_$l.resultMatrix.a),w_$n=Math.cos(w_$A),w_$s=Math.sin(w_$A),w_$P.setTo(w_$n,w_$s,-w_$s,w_$n,0,0),w_$NB.mul(this._tempMatrix,w_$P,w_$NB.TEMP),w_$NB.TEMP.copyTo(w_$P),w_$h=this.resultTransform.getMatrix(),w_$NB.mul(w_$h,w_$P,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,w_$h=this.resultTransform.getMatrix(),w_$NB.TEMP.identity(),w_$NB.TEMP.d=this.d,w_$NB.mul(w_$h,w_$NB.TEMP,this.resultMatrix)),this.resultMatrix.tx=w_$Z,this.resultMatrix.ty=w_$t}else(w_$h=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var w_$G,w_$T=0;for(w_$T=0,w_$G=this._children.length;w_$T<w_$G;w_$T++)this._children[w_$T].update()},w_$B.updateChild=function(){var w_$B,w_$h=0;for(w_$h=0,w_$B=this._children.length;w_$h<w_$B;w_$h++)this._children[w_$h].update()},w_$B.setRotation=function(w_$B){this._sprite&&(this._sprite.rotation=180*w_$B/Math.PI)},w_$B.updateDraw=function(w_$B,w_$h){w_$n.ShowBones&&!w_$n.ShowBones[this.name]||(this._sprite||(this._sprite=new w_$sB,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),w_$nB.stage.addChild(this._sprite)),this._sprite.x=w_$B+this.resultMatrix.tx,this._sprite.y=w_$h+this.resultMatrix.ty);var w_$l,w_$A=0;for(w_$A=0,w_$l=this._children.length;w_$A<w_$l;w_$A++)this._children[w_$A].updateDraw(w_$B,w_$h)},w_$B.addChild=function(w_$B){this._children.push(w_$B),w_$B.parentBone=this},w_$B.findBone=function(w_$B){if(this.name==w_$B)return this;var w_$h,w_$l,w_$A=0;for(w_$A=0,w_$h=this._children.length;w_$A<w_$h;w_$A++)if(w_$l=this._children[w_$A].findBone(w_$B))return w_$l;return null},w_$B.localToWorld=function(w_$B){var w_$h=w_$B[0],w_$l=w_$B[1];w_$B[0]=w_$h*this.resultMatrix.a+w_$l*this.resultMatrix.c+this.resultMatrix.tx,w_$B[1]=w_$h*this.resultMatrix.b+w_$l*this.resultMatrix.d+this.resultMatrix.ty},w_$n.ShowBones={},w_$n}()),w_$MB=function(){function w_$$(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}w_$A(w_$$,"laya.ani.bone.BoneSlot");var w_$B=w_$$.prototype;return w_$B.showSlotData=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0),this.currSlotData=w_$B,w_$h&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},w_$B.showDisplayByName=function(w_$B){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(w_$B))},w_$B.replaceDisplayByName=function(w_$B,w_$h){if(this.currSlotData){var w_$l;w_$l=this.currSlotData.getDisplayByName(w_$B);var w_$A;w_$A=this.currSlotData.getDisplayByName(w_$h),this.replaceDisplayByIndex(w_$l,w_$A)}},w_$B.replaceDisplayByIndex=function(w_$B,w_$h){this.currSlotData&&(this._replaceDic[w_$B]=w_$h,this.displayIndex==w_$B&&this.showDisplayByIndex(w_$B))},w_$B.showDisplayByIndex=function(w_$B){if(null!=this._replaceDic[w_$B]&&(w_$B=this._replaceDic[w_$B]),this.currSlotData&&-1<w_$B&&w_$B<this.currSlotData.displayArr.length){if(this.displayIndex=w_$B,this.currDisplayData=this.currSlotData.displayArr[w_$B],this.currDisplayData){var w_$h=this.currDisplayData.name;this.currTexture=this.templet.getTexture(w_$h),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!w_$V.isConchApp||w_$V.isConchApp&&"0.9.15"<w_$sB.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},w_$B.replaceSkin=function(w_$B){this._diyTexture=w_$B,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},w_$B.setParentMatrix=function(w_$B){this._parentMatrix=w_$B},w_$B.draw=function(w_$B,w_$h,w_$l,w_$A){if(void 0===w_$l&&(w_$l=!1),void 0===w_$A&&(w_$A=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var w_$n,w_$s=this.currTexture;switch(this._diyTexture&&(w_$s=this._diyTexture),this.currDisplayData.type){case 0:if(w_$B){var w_$X=this.getDisplayMatrix();if(this._parentMatrix){var w_$Z=!1;if(w_$X){var w_$t;if(w_$NB.mul(w_$X,this._parentMatrix,w_$NB.TEMP),w_$t=w_$l?(null==this._resultMatrix&&(this._resultMatrix=new w_$NB),this._resultMatrix):new w_$NB,!w_$V.isWebGL&&this.currDisplayData.uvs||w_$V.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var w_$P=w_$$._tempMatrix;w_$P.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(w_$P.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(w_$Z=!0,w_$P.rotate(-Math.PI/2)),w_$NB.mul(w_$P,w_$NB.TEMP,w_$t)}else w_$NB.TEMP.copyTo(w_$t);w_$Z?w_$B.drawTexture(w_$s,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,w_$t):w_$B.drawTexture(w_$s,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,w_$t)}}}break;case 1:if(null==(w_$n=w_$l?(null==this._skinSprite&&(this._skinSprite=w_$$.createSkinMesh()),this._skinSprite):w_$$.createSkinMesh()))return;var w_$G;if(null==this.currDisplayData.bones){var w_$T,w_$b=this.currDisplayData.weights;this.deformData&&(w_$b=this.deformData),w_$T=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=w_$v.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=w_$v.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=w_$b;this.currDisplayData.triangles.length;w_$G=this.currDisplayData.triangles,w_$n.init2(w_$s,null,w_$G,this._mVerticleArr,w_$T);var w_$Q,w_$i=this.getDisplayMatrix();if(this._parentMatrix)if(w_$i)w_$NB.mul(w_$i,this._parentMatrix,w_$NB.TEMP),w_$Q=w_$l?(null==this._resultMatrix&&(this._resultMatrix=new w_$NB),this._resultMatrix):new w_$NB,w_$NB.TEMP.copyTo(w_$Q),w_$n.transform=w_$Q}else this.skinMesh(w_$h,w_$n,w_$A);w_$B.drawSkin(w_$n);break;case 2:if(null==(w_$n=w_$l?(null==this._skinSprite&&(this._skinSprite=w_$$.createSkinMesh()),this._skinSprite):w_$$.createSkinMesh()))return;this.skinMesh(w_$h,w_$n,w_$A),w_$B.drawSkin(w_$n)}}},w_$B.skinMesh=function(w_$B,w_$h,w_$l){var w_$A,w_$n=this.currTexture,w_$s=this.currDisplayData.bones;w_$A=this._diyTexture?(w_$n=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=w_$v.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=w_$v.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var w_$X,w_$Z,w_$t=this.currDisplayData.weights,w_$P=this.currDisplayData.triangles,w_$G=0,w_$T=0,w_$b=0,w_$Q=NaN,w_$i=NaN,w_$$=0,w_$V=0,w_$J=[],w_$H=0,w_$y=0;if(this.deformData&&0<this.deformData.length){var w_$C=0;for(w_$H=0,w_$y=w_$s.length;w_$H<w_$y;){for(w_$b=w_$s[w_$H++]+w_$H,w_$T=w_$G=0;w_$H<w_$b;w_$H++)w_$Z=w_$B[w_$s[w_$H]],w_$Q=w_$t[w_$$]+this.deformData[w_$C++],w_$i=w_$t[w_$$+1]+this.deformData[w_$C++],w_$V=w_$t[w_$$+2],w_$G+=(w_$Q*w_$Z.a+w_$i*w_$Z.c+w_$Z.tx)*w_$V,w_$T+=(w_$Q*w_$Z.b+w_$i*w_$Z.d+w_$Z.ty)*w_$V,w_$$+=3;w_$J.push(w_$G,w_$T)}}else for(w_$H=0,w_$y=w_$s.length;w_$H<w_$y;){for(w_$b=w_$s[w_$H++]+w_$H,w_$T=w_$G=0;w_$H<w_$b;w_$H++)w_$Z=w_$B[w_$s[w_$H]],w_$Q=w_$t[w_$$],w_$i=w_$t[w_$$+1],w_$V=w_$t[w_$$+2],w_$G+=(w_$Q*w_$Z.a+w_$i*w_$Z.c+w_$Z.tx)*w_$V,w_$T+=(w_$Q*w_$Z.b+w_$i*w_$Z.d+w_$Z.ty)*w_$V,w_$$+=3;w_$J.push(w_$G,w_$T)}this._mVerticleArr=w_$J,w_$X=w_$P,w_$h.init2(w_$n,null,w_$X,this._mVerticleArr,w_$A)},w_$B.drawBonePoint=function(w_$B){w_$B&&this._parentMatrix&&w_$B.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},w_$B.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},w_$B.getMatrix=function(){return this._resultMatrix},w_$B.copy=function(){var w_$B=new w_$$;return w_$B.type="copy",w_$B.name=this.name,w_$B.attachmentName=this.attachmentName,w_$B.srcDisplayIndex=this.srcDisplayIndex,w_$B.parent=this.parent,w_$B.displayIndex=this.displayIndex,w_$B.templet=this.templet,w_$B.currSlotData=this.currSlotData,w_$B.currTexture=this.currTexture,w_$B.currDisplayData=this.currDisplayData,w_$B},w_$$.createSkinMesh=function(){return w_$V.isWebGL||w_$V.isConchApp?w_$Q.skinAniSprite():(w_$V.isWebGL,null)},w_$l(w_$$,["_tempMatrix",function(){return this._tempMatrix=new w_$NB}]),w_$$}(),w_$EB=function(){function w_$B(){this.skinName=null,this.deformSlotDataList=[]}return w_$A(w_$B,"laya.ani.bone.DeformAniData"),w_$B}(),w_$jB=function(){function w_$B(){this.deformSlotDisplayList=[]}return w_$A(w_$B,"laya.ani.bone.DeformSlotData"),w_$B}(),w_$gB=function(){function w_$B(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}w_$A(w_$B,"laya.ani.bone.DeformSlotDisplayData");var w_$h=w_$B.prototype;return w_$h.binarySearch1=function(w_$B,w_$h){var w_$l=0,w_$A=w_$B.length-2;if(0==w_$A)return 1;for(var w_$n=w_$A>>>1;;){if(w_$B[Math.floor(w_$n+1)]<=w_$h?w_$l=w_$n+1:w_$A=w_$n,w_$l==w_$A)return w_$l+1;w_$n=w_$l+w_$A>>>1}return 0},w_$h.apply=function(w_$B,w_$h,w_$l){if(void 0===w_$l&&(w_$l=1),w_$B+=.05,!(this.timeList.length<=0)){var w_$A=0;if(!(w_$B<this.timeList[0])){var w_$n=this.vectices[0].length,w_$s=[],w_$X=this.binarySearch1(this.timeList,w_$B);if(this.frameIndex=w_$X,w_$B>=this.timeList[this.timeList.length-1]){var w_$Z=this.vectices[this.vectices.length-1];if(w_$l<1)for(w_$A=0;w_$A<w_$n;w_$A++)w_$s[w_$A]+=(w_$Z[w_$A]-w_$s[w_$A])*w_$l;else for(w_$A=0;w_$A<w_$n;w_$A++)w_$s[w_$A]=w_$Z[w_$A];this.deformData=w_$s}else{this.tweenKeyList[this.frameIndex];var w_$t=this.vectices[this.frameIndex-1],w_$P=this.vectices[this.frameIndex],w_$G=this.timeList[this.frameIndex-1],w_$T=this.timeList[this.frameIndex];w_$l=this.tweenKeyList[w_$X-1]?(w_$B-w_$G)/(w_$T-w_$G):0;var w_$b=NaN;for(w_$A=0;w_$A<w_$n;w_$A++)w_$b=w_$t[w_$A],w_$s[w_$A]=w_$b+(w_$P[w_$A]-w_$b)*w_$l;this.deformData=w_$s}}}},w_$B}(),w_$_B=function(){function w_$B(){this.time=NaN,this.drawOrder=[]}return w_$A(w_$B,"laya.ani.bone.DrawOrderData"),w_$B}(),w_$dB=function(){function w_$B(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return w_$A(w_$B,"laya.ani.bone.EventData"),w_$B}(),w_$H=function(){function w_$AB(w_$B,w_$h){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=w_$B,this._targetBone=w_$h[w_$B.targetBoneIndex],this.isSpine=w_$B.isSpine,null==this._bones&&(this._bones=[]);for(var w_$l=this._bones.length=0,w_$A=w_$B.boneIndexs.length;w_$l<w_$A;w_$l++)this._bones.push(w_$h[w_$B.boneIndexs[w_$l]]);this.name=w_$B.name,this.mix=w_$B.mix,this.bendDirection=w_$B.bendDirection}w_$A(w_$AB,"laya.ani.bone.IkConstraint");var w_$B=w_$AB.prototype;return w_$B.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},w_$B._applyIk1=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$B.parentBone,w_$s=1/(w_$n.resultMatrix.a*w_$n.resultMatrix.d-w_$n.resultMatrix.b*w_$n.resultMatrix.c),w_$X=w_$h-w_$n.resultMatrix.tx,w_$Z=w_$l-w_$n.resultMatrix.ty,w_$t=(w_$X*w_$n.resultMatrix.d-w_$Z*w_$n.resultMatrix.c)*w_$s-w_$B.transform.x,w_$P=(w_$Z*w_$n.resultMatrix.a-w_$X*w_$n.resultMatrix.b)*w_$s-w_$B.transform.y,w_$G=Math.atan2(w_$P,w_$t)*w_$AB.radDeg-0-w_$B.transform.skX;w_$B.transform.scX<0&&(w_$G+=180),180<w_$G?w_$G-=360:w_$G<-180&&(w_$G+=360),w_$B.transform.skX=w_$B.transform.skY=w_$B.transform.skX+w_$G*w_$A,w_$B.update()},w_$B.updatePos=function(w_$B,w_$h){this._sp&&this._sp.pos(w_$B,w_$h)},w_$B._applyIk2=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){if(0!=w_$s){var w_$X=w_$B.resultTransform.x,w_$Z=w_$B.resultTransform.y,w_$t=w_$B.transform.scX,w_$P=w_$B.transform.scY,w_$G=w_$h.transform.scX,w_$T=0,w_$b=0,w_$Q=0;w_$Q=w_$t<0?(w_$t=-w_$t,w_$T=180,-1):(w_$T=0,1),w_$P<0&&(w_$P=-w_$P,w_$Q=-w_$Q),w_$b=w_$G<0?(w_$G=-w_$G,180):0;var w_$i=w_$h.resultTransform.x,w_$$=NaN,w_$V=NaN,w_$J=NaN,w_$H=w_$B.resultMatrix.a,w_$y=w_$B.resultMatrix.c,w_$C=w_$B.resultMatrix.b,w_$o=w_$B.resultMatrix.d,w_$u=Math.abs(w_$t-w_$P)<=1e-4;w_$J=w_$u?(w_$V=w_$H*w_$i+w_$y*(w_$$=w_$h.resultTransform.y)+w_$B.resultMatrix.tx,w_$C*w_$i+w_$o*w_$$+w_$B.resultMatrix.ty):(w_$$=0,w_$V=w_$H*w_$i+w_$B.resultMatrix.tx,w_$C*w_$i+w_$B.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new w_$sB,w_$nB.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(w_$l,w_$A,15,"#ffff00"),this._sp.graphics.drawCircle(w_$V,w_$J,15,"#ff00ff")),w_$B.setRotation(Math.atan2(w_$J-w_$B.resultMatrix.ty,w_$V-w_$B.resultMatrix.tx));var w_$v=w_$B.parentBone;w_$H=w_$v.resultMatrix.a,w_$y=w_$v.resultMatrix.c,w_$C=w_$v.resultMatrix.b;var w_$U=1/(w_$H*(w_$o=w_$v.resultMatrix.d)-w_$y*w_$C),w_$x=w_$l-w_$v.resultMatrix.tx,w_$w=w_$A-w_$v.resultMatrix.ty,w_$z=(w_$x*w_$o-w_$w*w_$y)*w_$U-w_$X,w_$a=(w_$w*w_$H-w_$x*w_$C)*w_$U-w_$Z,w_$S=((w_$x=w_$V-w_$v.resultMatrix.tx)*w_$o-(w_$w=w_$J-w_$v.resultMatrix.ty)*w_$y)*w_$U-w_$X,w_$N=(w_$w*w_$H-w_$x*w_$C)*w_$U-w_$Z,w_$R=Math.sqrt(w_$S*w_$S+w_$N*w_$N),w_$W=w_$h.length*w_$G,w_$M=NaN,w_$E=NaN;if(w_$u){var w_$j=(w_$z*w_$z+w_$a*w_$a-w_$R*w_$R-(w_$W*=w_$t)*w_$W)/(2*w_$R*w_$W);w_$j<-1?w_$j=-1:1<w_$j&&(w_$j=1),w_$E=Math.acos(w_$j)*w_$n,w_$H=w_$R+w_$W*w_$j,w_$y=w_$W*Math.sin(w_$E),w_$M=Math.atan2(w_$a*w_$H-w_$z*w_$y,w_$z*w_$H+w_$a*w_$y)}else{var w_$g=(w_$H=w_$t*w_$W)*w_$H,w_$_=(w_$y=w_$P*w_$W)*w_$y,w_$d=w_$z*w_$z+w_$a*w_$a,w_$k=Math.atan2(w_$a,w_$z),w_$O=-2*w_$_*w_$R,w_$p=w_$_-w_$g;if(0<(w_$o=w_$O*w_$O-4*w_$p*(w_$C=w_$_*w_$R*w_$R+w_$g*w_$d-w_$g*w_$_))){var w_$F=Math.sqrt(w_$o);w_$O<0&&(w_$F=-w_$F);var w_$c=(w_$F=-(w_$O+w_$F)/2)/w_$p,w_$m=w_$C/w_$F,w_$Y=Math.abs(w_$c)<Math.abs(w_$m)?w_$c:w_$m;w_$Y*w_$Y<=w_$d&&(w_$w=Math.sqrt(w_$d-w_$Y*w_$Y)*w_$n,w_$M=w_$k-Math.atan2(w_$w,w_$Y),w_$E=Math.atan2(w_$w/w_$P,(w_$Y-w_$R)/w_$t))}var w_$K=0,w_$f=Number.MAX_VALUE,w_$I=0,w_$L=0,w_$e=0,w_$q=0,w_$D=0,w_$r=0;w_$q<(w_$o=(w_$x=w_$R+w_$H)*w_$x)&&(w_$e=0,w_$q=w_$o,w_$D=w_$x),(w_$o=(w_$x=w_$R-w_$H)*w_$x)<w_$f&&(w_$K=Math.PI,w_$f=w_$o,w_$I=w_$x);var w_$BB=Math.acos(-w_$H*w_$R/(w_$g-w_$_));(w_$o=(w_$x=w_$H*Math.cos(w_$BB)+w_$R)*w_$x+(w_$w=w_$y*Math.sin(w_$BB))*w_$w)<w_$f&&(w_$K=w_$BB,w_$f=w_$o,w_$I=w_$x,w_$L=w_$w),w_$q<w_$o&&(w_$e=w_$BB,w_$q=w_$o,w_$D=w_$x,w_$r=w_$w),w_$E=w_$d<=(w_$f+w_$q)/2?(w_$M=w_$k-Math.atan2(w_$L*w_$n,w_$I),w_$K*w_$n):(w_$M=w_$k-Math.atan2(w_$r*w_$n,w_$D),w_$e*w_$n)}var w_$hB=Math.atan2(w_$$,w_$i)*w_$Q,w_$lB=w_$B.resultTransform.skX;180<(w_$M=(w_$M-w_$hB)*w_$AB.radDeg+w_$T-w_$lB)?w_$M-=360:w_$M<-180&&(w_$M+=360),w_$B.resultTransform.x=w_$X,w_$B.resultTransform.y=w_$Z,w_$B.resultTransform.skX=w_$B.resultTransform.skY=w_$lB+w_$M*w_$s,w_$lB=w_$h.resultTransform.skX,180<(w_$E=((w_$E+w_$hB)*w_$AB.radDeg-0)*w_$Q+w_$b-(w_$lB%=360))?w_$E-=360:w_$E<-180&&(w_$E+=360),w_$h.resultTransform.x=w_$i,w_$h.resultTransform.y=w_$$,w_$h.resultTransform.skX=w_$h.resultTransform.skY=w_$h.resultTransform.skY+w_$E*w_$s,w_$B.update()}},w_$B._applyIk3=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){if(0!=w_$s){var w_$X,w_$Z,w_$t=w_$h.resultMatrix.a*w_$h.length,w_$P=w_$h.resultMatrix.b*w_$h.length,w_$G=w_$t*w_$t+w_$P*w_$P,w_$T=Math.sqrt(w_$G),w_$b=w_$B.resultMatrix.tx,w_$Q=w_$B.resultMatrix.ty,w_$i=w_$h.resultMatrix.tx,w_$$=w_$h.resultMatrix.ty,w_$V=w_$i-w_$b,w_$J=w_$$-w_$Q,w_$H=w_$V*w_$V+w_$J*w_$J,w_$y=Math.sqrt(w_$H),w_$C=(w_$V=w_$l-w_$B.resultMatrix.tx)*w_$V+(w_$J=w_$A-w_$B.resultMatrix.ty)*w_$J,w_$o=Math.sqrt(w_$C);if(w_$T+w_$y<=w_$o||w_$o+w_$T<=w_$y||w_$o+w_$y<=w_$T){var w_$u=NaN;w_$i=w_$b+(w_$u=w_$T+w_$y<=w_$o?1:-1)*(w_$l-w_$b)*w_$y/w_$o,w_$$=w_$Q+w_$u*(w_$A-w_$Q)*w_$y/w_$o}else{var w_$v=(w_$H-w_$G+w_$C)/(2*w_$C),w_$U=Math.sqrt(w_$H-w_$v*w_$v*w_$C)/w_$o,w_$x=w_$b+w_$V*w_$v,w_$w=w_$Q+w_$J*w_$v,w_$z=-w_$J*w_$U,w_$a=w_$V*w_$U;w_$$=0<w_$n?(w_$i=w_$x-w_$z,w_$w-w_$a):(w_$i=w_$x+w_$z,w_$w+w_$a)}w_$X=w_$i,w_$Z=w_$$,this.isDebug&&(this._sp||(this._sp=new w_$sB,w_$nB.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(w_$b,w_$Q,15,"#ff00ff"),this._sp.graphics.drawCircle(w_$l,w_$A,15,"#ffff00"),this._sp.graphics.drawCircle(w_$X,w_$Z,15,"#ff00ff"));var w_$S,w_$N;w_$S=Math.atan2(w_$Z-w_$B.resultMatrix.ty,w_$X-w_$B.resultMatrix.tx),w_$B.setRotation(w_$S),(w_$N=w_$AB._tempMatrix).identity(),w_$N.rotate(w_$S),w_$N.scale(w_$B.resultMatrix.getScaleX(),w_$B.resultMatrix.getScaleY()),w_$N.translate(w_$B.resultMatrix.tx,w_$B.resultMatrix.ty),w_$N.copyTo(w_$B.resultMatrix),w_$B.updateChild();var w_$R,w_$W;w_$R=Math.atan2(w_$A-w_$Z,w_$l-w_$X),w_$h.setRotation(w_$R),(w_$W=w_$AB._tempMatrix).identity(),w_$W.rotate(w_$R),w_$W.scale(w_$h.resultMatrix.getScaleX(),w_$h.resultMatrix.getScaleY()),w_$W.translate(w_$X,w_$Z),w_$N.copyTo(w_$h.resultMatrix),w_$h.updateChild()}},w_$l(w_$AB,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new w_$NB}]),w_$AB}(),w_$kB=function(){function w_$B(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return w_$A(w_$B,"laya.ani.bone.IkConstraintData"),w_$B}(),w_$o=function(){function w_$W(w_$B,w_$h){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=w_$B,this.position=w_$B.position,this.spacing=w_$B.spacing,this.rotateMix=w_$B.rotateMix,this.translateMix=w_$B.translateMix,this.bones=[];for(var w_$l=this.data.bones,w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$A++)this.bones.push(w_$h[w_$l[w_$A]])}w_$A(w_$W,"laya.ani.bone.PathConstraint");var w_$B=w_$W.prototype;return w_$B.apply=function(w_$B,w_$h){if(this.target){var w_$l=this.translateMix,w_$A=this.translateMix,w_$n=0<w_$A,w_$s=this.data.spacingMode,w_$X="length"==w_$s,w_$Z=this.data.rotateMode,w_$t="tangent"==w_$Z,w_$P="chainScale"==w_$Z,w_$G=[],w_$T=this.bones.length,w_$b=w_$t?w_$T:w_$T+1,w_$Q=[];(this._spaces=w_$Q)[0]=this.position;var w_$i=this.spacing;if(w_$P||w_$X)for(var w_$$=0,w_$V=w_$b-1;w_$$<w_$V;){var w_$J=this.bones[w_$$],w_$H=w_$J.length,w_$y=w_$H*w_$J.resultMatrix.a,w_$C=w_$H*w_$J.resultMatrix.b;w_$H=Math.sqrt(w_$y*w_$y+w_$C*w_$C),w_$P&&(w_$G[w_$$]=w_$H),w_$Q[++w_$$]=w_$X?Math.max(0,w_$H+w_$i):w_$i}else for(w_$$=1;w_$$<w_$b;w_$$++)w_$Q[w_$$]=w_$i;var w_$o=this.computeWorldPositions(this.target,w_$B,w_$h,w_$b,w_$t,"percent"==this.data.positionMode,"percent"==w_$s);if(this._debugKey){for(w_$$=0;w_$$<w_$o.length;w_$$++)w_$h.drawCircle(w_$o[w_$$++],w_$o[w_$$++],5,"#00ff00");var w_$u=[];for(w_$$=0;w_$$<w_$o.length;w_$$++)w_$u.push(w_$o[w_$$++],w_$o[w_$$++]);w_$h.drawLines(0,0,w_$u,"#ff0000")}var w_$v=w_$o[0],w_$U=w_$o[1],w_$x=this.data.offsetRotation,w_$w="chain"==w_$Z&&0==w_$x,w_$z=NaN;for(w_$$=0,w_$z=3;w_$$<w_$T;w_$$++,w_$z+=3){(w_$J=this.bones[w_$$]).resultMatrix.tx+=(w_$v-w_$J.resultMatrix.tx)*w_$l,w_$J.resultMatrix.ty+=(w_$U-w_$J.resultMatrix.ty)*w_$l;var w_$a=(w_$y=w_$o[w_$z])-w_$v,w_$S=(w_$C=w_$o[w_$z+1])-w_$U;if(w_$P&&0!=(w_$H=w_$G[w_$$])){var w_$N=(Math.sqrt(w_$a*w_$a+w_$S*w_$S)/w_$H-1)*w_$A+1;w_$J.resultMatrix.a*=w_$N,w_$J.resultMatrix.c*=w_$N}if(w_$v=w_$y,w_$U=w_$C,w_$n){var w_$R=w_$J.resultMatrix.a,w_$W=w_$J.resultMatrix.c,w_$M=w_$J.resultMatrix.b,w_$E=w_$J.resultMatrix.d,w_$j=NaN,w_$g=NaN,w_$_=NaN;w_$j=w_$t?w_$o[w_$z-1]:0==w_$Q[w_$$+1]?w_$o[w_$z+2]:Math.atan2(w_$S,w_$a),w_$j-=Math.atan2(w_$M,w_$R)-w_$x/180*Math.PI,w_$w&&(w_$g=Math.cos(w_$j),w_$_=Math.sin(w_$j),w_$v+=((w_$H=w_$J.length)*(w_$g*w_$R-w_$_*w_$M)-w_$a)*w_$A,w_$U+=(w_$H*(w_$_*w_$R+w_$g*w_$M)-w_$S)*w_$A),w_$j>Math.PI?w_$j-=2*Math.PI:w_$j<-Math.PI&&(w_$j+=2*Math.PI),w_$j*=w_$A,w_$g=Math.cos(w_$j),w_$_=Math.sin(w_$j),w_$J.resultMatrix.a=w_$g*w_$R-w_$_*w_$M,w_$J.resultMatrix.c=w_$g*w_$W-w_$_*w_$E,w_$J.resultMatrix.b=w_$_*w_$R+w_$g*w_$M,w_$J.resultMatrix.d=w_$_*w_$W+w_$g*w_$E}}}},w_$B.computeWorldVertices2=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){var w_$X,w_$Z,w_$t=w_$B.currDisplayData.bones,w_$P=w_$B.currDisplayData.weights,w_$G=w_$B.currDisplayData.triangles,w_$T=0,w_$b=0,w_$Q=0,w_$i=0,w_$$=0,w_$V=0,w_$J=0,w_$H=0,w_$y=0,w_$C=0,w_$o=0;if(null!=w_$t){for(w_$T=0;w_$T<w_$l;w_$T+=2)w_$b+=(w_$i=w_$t[w_$b])+1,w_$Q+=w_$i;var w_$u=w_$h;for(w_$$=w_$s,w_$V=3*w_$Q;w_$$<w_$A;w_$$+=2){for(w_$H=w_$J=0,w_$i=w_$t[w_$b++],w_$i+=w_$b;w_$b<w_$i;w_$b++,w_$V+=3){w_$X=w_$u[w_$t[w_$b]].resultMatrix,w_$y=w_$P[w_$V],w_$C=w_$P[w_$V+1];var w_$v=w_$P[w_$V+2];w_$J+=(w_$y*w_$X.a+w_$C*w_$X.c+w_$X.tx)*w_$v,w_$H+=(w_$y*w_$X.b+w_$C*w_$X.d+w_$X.ty)*w_$v}w_$n[w_$$]=w_$J,w_$n[w_$$+1]=w_$H}}else{var w_$U,w_$x;if(w_$G||(w_$G=w_$P),w_$B.deformData&&(w_$G=w_$B.deformData),w_$U=w_$B.parent,w_$h)for(w_$o=w_$h.length,w_$T=0;w_$T<w_$o;w_$T++)if(w_$h[w_$T].name==w_$U){w_$Z=w_$h[w_$T];break}w_$Z&&(w_$x=w_$Z.resultMatrix),w_$x||(w_$x=w_$W._tempMt);var w_$w=w_$x.tx,w_$z=w_$x.ty,w_$a=w_$x.a,w_$S=w_$x.b,w_$N=w_$x.c,w_$R=w_$x.d;for(w_$Z&&(w_$R*=w_$Z.d),w_$b=w_$l,w_$$=w_$s;w_$$<w_$A;w_$b+=2,w_$$+=2)w_$y=w_$G[w_$b],w_$C=w_$G[w_$b+1],w_$n[w_$$]=w_$y*w_$a+w_$C*w_$S+w_$w,w_$n[w_$$+1]=-(w_$y*w_$N+w_$C*w_$R+w_$z)}},w_$B.computeWorldPositions=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X){w_$B.currDisplayData.bones,w_$B.currDisplayData.weights,w_$B.currDisplayData.triangles;var w_$Z=[],w_$t=0,w_$P=w_$B.currDisplayData.verLen,w_$G=this.position,w_$T=this._spaces,w_$b=[],w_$Q=[],w_$i=w_$P/6,w_$$=-1,w_$V=NaN,w_$J=0,w_$H=0,w_$y=NaN,w_$C=NaN,w_$o=NaN,w_$u=NaN;if(w_$i--,w_$P-=4,this.computeWorldVertices2(w_$B,w_$h,2,w_$P,w_$Z,0),this._debugKey)for(w_$t=0;w_$t<w_$Z.length;)w_$l.drawCircle(w_$Z[w_$t++],w_$Z[w_$t++],10,"#ff0000");w_$b=w_$Z,this._curves.length=w_$i;var w_$v=this._curves,w_$U=w_$b[w_$V=0],w_$x=w_$b[1],w_$w=0,w_$z=0,w_$a=0,w_$S=0,w_$N=0,w_$R=0,w_$W=NaN,w_$M=NaN,w_$E=NaN,w_$j=NaN,w_$g=NaN,w_$_=NaN,w_$d=NaN,w_$k=NaN,w_$O=0;for(w_$t=0,w_$O=2;w_$t<w_$i;w_$t++,w_$O+=6)w_$w=w_$b[w_$O],w_$z=w_$b[w_$O+1],w_$a=w_$b[w_$O+2],w_$S=w_$b[w_$O+3],w_$g=2*(w_$W=.1875*(w_$U-2*w_$w+w_$a))+(w_$E=.09375*(3*(w_$w-w_$a)-w_$U+(w_$N=w_$b[w_$O+4]))),w_$_=2*(w_$M=.1875*(w_$x-2*w_$z+w_$S))+(w_$j=.09375*(3*(w_$z-w_$S)-w_$x+(w_$R=w_$b[w_$O+5]))),w_$d=.75*(w_$w-w_$U)+w_$W+.16666667*w_$E,w_$k=.75*(w_$z-w_$x)+w_$M+.16666667*w_$j,w_$V+=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$d+=w_$g,w_$k+=w_$_,w_$g+=w_$E,w_$_+=w_$j,w_$V+=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$d+=w_$g,w_$k+=w_$_,w_$V+=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$d+=w_$g+w_$E,w_$k+=w_$_+w_$j,w_$V+=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$v[w_$t]=w_$V,w_$U=w_$N,w_$x=w_$R;if(w_$s&&(w_$G*=w_$V),w_$X)for(w_$t=0;w_$t<w_$A;w_$t++)w_$T[w_$t]*=w_$V;var w_$p=this._segments,w_$F=0,w_$c=0;for(w_$c=w_$H=w_$J=w_$t=0;w_$t<w_$A;w_$t++,w_$J+=3)if((w_$y=w_$G+=w_$C=w_$T[w_$t])<0)this.addBeforePosition(w_$y,w_$b,0,w_$Q,w_$J);else if(w_$V<w_$y)this.addAfterPosition(w_$y-w_$V,w_$b,w_$P-4,w_$Q,w_$J);else{for(;;w_$H++)if(!((w_$u=w_$v[w_$H])<w_$y)){0==w_$H?w_$y/=w_$u:w_$y=(w_$y-(w_$o=w_$v[w_$H-1]))/(w_$u-w_$o);break}if(w_$H!=w_$$){var w_$m=6*(w_$$=w_$H);for(w_$U=w_$b[w_$m],w_$x=w_$b[w_$m+1],w_$w=w_$b[w_$m+2],w_$z=w_$b[w_$m+3],w_$a=w_$b[w_$m+4],w_$S=w_$b[w_$m+5],w_$g=2*(w_$W=.03*(w_$U-2*w_$w+w_$a))+(w_$E=.006*(3*(w_$w-w_$a)-w_$U+(w_$N=w_$b[w_$m+6]))),w_$_=2*(w_$M=.03*(w_$x-2*w_$z+w_$S))+(w_$j=.006*(3*(w_$z-w_$S)-w_$x+(w_$R=w_$b[w_$m+7]))),w_$d=.3*(w_$w-w_$U)+w_$W+.16666667*w_$E,w_$k=.3*(w_$z-w_$x)+w_$M+.16666667*w_$j,w_$F=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$p[0]=w_$F,w_$m=1;w_$m<8;w_$m++)w_$d+=w_$g,w_$k+=w_$_,w_$g+=w_$E,w_$_+=w_$j,w_$F+=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$p[w_$m]=w_$F;w_$d+=w_$g,w_$k+=w_$_,w_$F+=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$p[8]=w_$F,w_$d+=w_$g+w_$E,w_$k+=w_$_+w_$j,w_$F+=Math.sqrt(w_$d*w_$d+w_$k*w_$k),w_$p[9]=w_$F,w_$c=0}for(w_$y*=w_$F;;w_$c++)if(!((w_$u=w_$p[w_$c])<w_$y)){0==w_$c?w_$y/=w_$u:w_$y=w_$c+(w_$y-(w_$o=w_$p[w_$c-1]))/(w_$u-w_$o);break}this.addCurvePosition(.1*w_$y,w_$U,w_$x,w_$w,w_$z,w_$a,w_$S,w_$N,w_$R,w_$Q,w_$J,w_$n||0<w_$t&&0==w_$C)}return w_$Q},w_$B.addBeforePosition=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$h[w_$l],w_$X=w_$h[w_$l+1],w_$Z=w_$h[w_$l+2]-w_$s,w_$t=w_$h[w_$l+3]-w_$X,w_$P=Math.atan2(w_$t,w_$Z);w_$A[w_$n]=w_$s+w_$B*Math.cos(w_$P),w_$A[w_$n+1]=w_$X+w_$B*Math.sin(w_$P),w_$A[w_$n+2]=w_$P},w_$B.addAfterPosition=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$h[w_$l+2],w_$X=w_$h[w_$l+3],w_$Z=w_$s-w_$h[w_$l],w_$t=w_$X-w_$h[w_$l+1],w_$P=Math.atan2(w_$t,w_$Z);w_$A[w_$n]=w_$s+w_$B*Math.cos(w_$P),w_$A[w_$n+1]=w_$X+w_$B*Math.sin(w_$P),w_$A[w_$n+2]=w_$P},w_$B.addCurvePosition=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G,w_$T){0==w_$B&&(w_$B=1e-4);var w_$b=w_$B*w_$B,w_$Q=w_$b*w_$B,w_$i=1-w_$B,w_$$=w_$i*w_$i,w_$V=w_$$*w_$i,w_$J=w_$i*w_$B,w_$H=3*w_$J,w_$y=w_$i*w_$H,w_$C=w_$H*w_$B,w_$o=w_$h*w_$V+w_$A*w_$y+w_$s*w_$C+w_$Z*w_$Q,w_$u=w_$l*w_$V+w_$n*w_$y+w_$X*w_$C+w_$t*w_$Q;w_$P[w_$G]=w_$o,w_$P[w_$G+1]=w_$u,w_$P[w_$G+2]=w_$T?Math.atan2(w_$u-(w_$l*w_$$+w_$n*w_$J*2+w_$X*w_$b),w_$o-(w_$h*w_$$+w_$A*w_$J*2+w_$s*w_$b)):0},w_$W.NONE=-1,w_$W.BEFORE=-2,w_$W.AFTER=-3,w_$l(w_$W,["_tempMt",function(){return this._tempMt=new w_$NB}]),w_$W}(),w_$OB=function(){function w_$B(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return w_$A(w_$B,"laya.ani.bone.PathConstraintData"),w_$B}(),w_$pB=function(){function w_$B(){this.name=null,this.slotArr=[]}return w_$A(w_$B,"laya.ani.bone.SkinData"),w_$B}(),w_$FB=function(){function w_$B(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}w_$A(w_$B,"laya.ani.bone.SkinSlotDisplayData");var w_$h=w_$B.prototype;return w_$h.createTexture=function(w_$B){return this.texture||(this.texture=new w_$RB(w_$B.bitmap,this.uvs),w_$B.bitmap.alphaTexture&&(this.texture.alphaTexture=new w_$RB(w_$B.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=w_$B.height,this.texture.height=w_$B.width,this.texture.offsetX=-w_$B.offsetX,this.texture.offsetY=-w_$B.offsetY,this.texture.sourceWidth=w_$B.sourceHeight,this.texture.sourceHeight=w_$B.sourceWidth):(this.texture.width=w_$B.width,this.texture.height=w_$B.height,this.texture.offsetX=-w_$B.offsetX,this.texture.offsetY=-w_$B.offsetY,this.texture.sourceWidth=w_$B.sourceWidth,this.texture.sourceHeight=w_$B.sourceHeight),w_$V.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},w_$h.destory=function(){this.texture&&this.texture.destroy()},w_$B}(),w_$cB=function(){function w_$B(){this.name=null,this.displayArr=[]}return w_$A(w_$B,"laya.ani.bone.SlotData"),w_$B.prototype.getDisplayByName=function(w_$B){for(var w_$h=0,w_$l=this.displayArr.length;w_$h<w_$l;w_$h++)if(this.displayArr[w_$h].attachmentName==w_$B)return w_$h;return-1},w_$B}(),w_$u=function(){function w_$B(w_$B,w_$h){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=w_$$(2,0),this._data=w_$B,null==this._bones&&(this._bones=[]),this.target=w_$h[w_$B.targetIndex];var w_$l,w_$A=0;for(w_$A=0,w_$l=w_$B.boneIndexs.length;w_$A<w_$l;w_$A++)this._bones.push(w_$h[w_$B.boneIndexs[w_$A]]);this.rotateMix=w_$B.rotateMix,this.translateMix=w_$B.translateMix,this.scaleMix=w_$B.scaleMix,this.shearMix=w_$B.shearMix}return w_$A(w_$B,"laya.ani.bone.TfConstraint"),w_$B.prototype.apply=function(){for(var w_$B,w_$h=this.target.resultMatrix.a,w_$l=this.target.resultMatrix.b,w_$A=this.target.resultMatrix.c,w_$n=this.target.resultMatrix.d,w_$s=0,w_$X=this._bones.length;w_$s<w_$X;w_$s++){if(w_$B=this._bones[w_$s],0<this.rotateMix){var w_$Z=w_$B.resultMatrix.a,w_$t=w_$B.resultMatrix.b,w_$P=w_$B.resultMatrix.c,w_$G=w_$B.resultMatrix.d,w_$T=Math.atan2(w_$A,w_$h)-Math.atan2(w_$P,w_$Z)+this._data.offsetRotation*Math.PI/180;w_$T>Math.PI?w_$T-=2*Math.PI:w_$T<-Math.PI&&(w_$T+=2*Math.PI),w_$T*=this.rotateMix;var w_$b=Math.cos(w_$T),w_$Q=Math.sin(w_$T);w_$B.resultMatrix.a=w_$b*w_$Z-w_$Q*w_$P,w_$B.resultMatrix.b=w_$b*w_$t-w_$Q*w_$G,w_$B.resultMatrix.c=w_$Q*w_$Z+w_$b*w_$P,w_$B.resultMatrix.d=w_$Q*w_$t+w_$b*w_$G}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),w_$B.resultMatrix.tx+=(this._temp[0]-w_$B.resultMatrix.tx)*this.translateMix,w_$B.resultMatrix.ty+=(this._temp[1]-w_$B.resultMatrix.ty)*this.translateMix,w_$B.updateChild()),0<this.scaleMix){var w_$i=Math.sqrt(w_$B.resultMatrix.a*w_$B.resultMatrix.a+w_$B.resultMatrix.c*w_$B.resultMatrix.c),w_$$=Math.sqrt(w_$h*w_$h+w_$A*w_$A),w_$V=1e-5<w_$i?(w_$i+(w_$$-w_$i+this._data.offsetScaleX)*this.scaleMix)/w_$i:0;w_$B.resultMatrix.a*=w_$V,w_$B.resultMatrix.c*=w_$V,w_$i=Math.sqrt(w_$B.resultMatrix.b*w_$B.resultMatrix.b+w_$B.resultMatrix.d*w_$B.resultMatrix.d),w_$$=Math.sqrt(w_$l*w_$l+w_$n*w_$n),w_$V=1e-5<w_$i?(w_$i+(w_$$-w_$i+this._data.offsetScaleY)*this.scaleMix)/w_$i:0,w_$B.resultMatrix.b*=w_$V,w_$B.resultMatrix.d*=w_$V}if(0<this.shearMix){w_$t=w_$B.resultMatrix.b,w_$G=w_$B.resultMatrix.d;var w_$J=Math.atan2(w_$G,w_$t);(w_$T=Math.atan2(w_$n,w_$l)-Math.atan2(w_$A,w_$h)-(w_$J-Math.atan2(w_$B.resultMatrix.c,w_$B.resultMatrix.a)))>Math.PI?w_$T-=2*Math.PI:w_$T<-Math.PI&&(w_$T+=2*Math.PI),w_$T=w_$J+(w_$T+this._data.offsetShearY*Math.PI/180)*this.shearMix,w_$V=Math.sqrt(w_$t*w_$t+w_$G*w_$G),w_$B.resultMatrix.b=Math.cos(w_$T)*w_$V,w_$B.resultMatrix.d=Math.sin(w_$T)*w_$V}}},w_$B}(),w_$mB=function(){function w_$B(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return w_$A(w_$B,"laya.ani.bone.TfConstraintData"),w_$B}(),w_$YB=function(){function w_$B(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}w_$A(w_$B,"laya.ani.bone.Transform");var w_$h=w_$B.prototype;return w_$h.initData=function(w_$B){null!=w_$B.x&&(this.x=w_$B.x),null!=w_$B.y&&(this.y=w_$B.y),null!=w_$B.skX&&(this.skX=w_$B.skX),null!=w_$B.skY&&(this.skY=w_$B.skY),null!=w_$B.scX&&(this.scX=w_$B.scX),null!=w_$B.scY&&(this.scY=w_$B.scY)},w_$h.getMatrix=function(){var w_$B;return(w_$B=this.mMatrix?this.mMatrix:this.mMatrix=new w_$NB).identity(),w_$B.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(w_$B,this.skewX*Math.PI/180,this.skewY*Math.PI/180),w_$B.rotate(this.skX*Math.PI/180),w_$B.translate(this.x,this.y),w_$B},w_$h.skew=function(w_$B,w_$h,w_$l){var w_$A=Math.sin(w_$l),w_$n=Math.cos(w_$l),w_$s=Math.sin(w_$h),w_$X=Math.cos(w_$h);return w_$B.setTo(w_$B.a*w_$X-w_$B.b*w_$A,w_$B.a*w_$s+w_$B.b*w_$n,w_$B.c*w_$X-w_$B.d*w_$A,w_$B.c*w_$s+w_$B.d*w_$n,w_$B.tx*w_$X-w_$B.ty*w_$A,w_$B.tx*w_$s+w_$B.ty*w_$n),w_$B},w_$B}(),w_$v=function(){function w_$B(){}return w_$A(w_$B,"laya.ani.bone.UVTools"),w_$B.getRelativeUV=function(w_$B,w_$h,w_$l){var w_$A=w_$B[0],w_$n=w_$B[2]-w_$B[0],w_$s=w_$B[1],w_$X=w_$B[5]-w_$B[1];w_$l||(w_$l=[]),w_$l.length=w_$h.length;var w_$Z,w_$t=0;w_$Z=w_$l.length;var w_$P=1/w_$n,w_$G=1/w_$X;for(w_$t=0;w_$t<w_$Z;w_$t+=2)w_$l[w_$t]=(w_$h[w_$t]-w_$A)*w_$P,w_$l[w_$t+1]=(w_$h[w_$t+1]-w_$s)*w_$G;return w_$l},w_$B.getAbsoluteUV=function(w_$B,w_$h,w_$l){if(0==w_$B[0]&&0==w_$B[1]&&1==w_$B[4]&&1==w_$B[5])return w_$l?(w_$J.copyArray(w_$l,w_$h),w_$l):w_$h;var w_$A=w_$B[0],w_$n=w_$B[2]-w_$B[0],w_$s=w_$B[1],w_$X=w_$B[5]-w_$B[1];w_$l||(w_$l=[]),w_$l.length=w_$h.length;var w_$Z,w_$t=0;for(w_$Z=w_$l.length,w_$t=0;w_$t<w_$Z;w_$t+=2)w_$l[w_$t]=w_$h[w_$t]*w_$n+w_$A,w_$l[w_$t+1]=w_$h[w_$t+1]*w_$X+w_$s;return w_$l},w_$B}(),w_$W=function(){function w_$B(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return w_$A(w_$B,"laya.ani.KeyFramesContent"),w_$B}(),w_$U=function(){function w_$G(){}return w_$A(w_$G,"laya.ani.math.BezierLerp"),w_$G.getBezierRate=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$G._getBezierParamKey(w_$h,w_$l,w_$A,w_$n),w_$X=100*w_$s+w_$B;if(w_$G._bezierResultCache[w_$X])return w_$G._bezierResultCache[w_$X];var w_$Z,w_$t=w_$G._getBezierPoints(w_$h,w_$l,w_$A,w_$n,w_$s),w_$P=0;for(w_$Z=w_$t.length,w_$P=0;w_$P<w_$Z;w_$P+=2)if(w_$B<=w_$t[w_$P])return w_$G._bezierResultCache[w_$X]=w_$t[w_$P+1],w_$t[w_$P+1];return w_$G._bezierResultCache[w_$X]=1},w_$G._getBezierParamKey=function(w_$B,w_$h,w_$l,w_$A){return 100*(100*(100*(100*w_$B+w_$h)+w_$l)+w_$A)},w_$G._getBezierPoints=function(w_$B,w_$h,w_$l,w_$A,w_$n){return w_$G._bezierPointsCache[w_$n]?w_$G._bezierPointsCache[w_$n]:(w_$s=[0,0,w_$B,w_$h,w_$l,w_$A,1,1],w_$X=(new w_$Z).getBezierPoints(w_$s,100,3),w_$G._bezierPointsCache[w_$n]=w_$X);var w_$s,w_$X},w_$G._bezierResultCache={},w_$G._bezierPointsCache={},w_$G}(),w_$x=function(w_$B){function w_$h(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,w_$h.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}w_$A(w_$h,"laya.ani.AnimationPlayer",w_$n);var w_$l=w_$h.prototype;return w_$nB.imps(w_$l,{"laya.resource.IDestroy":!0}),w_$l._onTempletLoadedComputeFullKeyframeIndices=function(w_$B,w_$h,w_$l){this._templet===w_$l&&this._cachePlayRate===w_$B&&this._cacheFrameRate===w_$h&&this._computeFullKeyframeIndices()},w_$l._computeFullKeyframeIndices=function(){for(var w_$B=this._fullFrames=[],w_$h=this._templet,w_$l=this._cacheFrameRateInterval*this._cachePlayRate,w_$A=0,w_$n=w_$h.getAnimationCount();w_$A<w_$n;w_$A++){for(var w_$s=[],w_$X=0,w_$Z=w_$h.getAnimation(w_$A).nodes.length;w_$X<w_$Z;w_$X++){for(var w_$t=w_$h.getAnimation(w_$A).nodes[w_$X],w_$P=Math.floor(w_$t.playTime/w_$l+.01),w_$G=new Uint16Array(w_$P+1),w_$T=-1,w_$b=0,w_$Q=w_$t.keyFrame.length;w_$b<w_$Q;w_$b++){var w_$i=w_$t.keyFrame[w_$b],w_$$=w_$i.startTime,w_$V=w_$$+w_$i.duration+w_$l;do{for(var w_$J=Math.floor(w_$$/w_$l+.5),w_$H=w_$T+1;w_$H<w_$J;w_$H++)w_$G[w_$H]=w_$b;w_$G[w_$T=w_$J]=w_$b,w_$$+=w_$l}while(w_$$<=w_$V)}w_$s.push(w_$G)}w_$B.push(w_$s)}},w_$l._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},w_$l._calculatePlayDuration=function(){if(0!==this.state){var w_$B=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=w_$B),this._playEnd>w_$B&&(this._playEnd=w_$B),this._playDuration=this._playEnd-this._playStart}},w_$l._setPlayParams=function(w_$B,w_$h){this._currentTime=w_$B,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/w_$h+.01),0),this._currentFrameTime=this._currentKeyframeIndex*w_$h},w_$l._setPlayParamsWhenStop=function(w_$B,w_$h){this._currentTime=w_$B,this._currentKeyframeIndex=Math.max(Math.floor(w_$B/w_$h+.01),0),this._currentFrameTime=this._currentKeyframeIndex*w_$h,this._currentAnimationClipIndex=-1},w_$l._update=function(w_$B){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var w_$h=this._cacheFrameRateInterval*this._cachePlayRate,w_$l=0;this._startUpdateLoopCount!==w_$i.loopCount&&(w_$l=w_$B*this.playbackRate,this._elapsedPlaybackTime+=w_$l);var w_$A=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=w_$A)return this._setPlayParamsWhenStop(w_$A,w_$h),void this.event("stopped");if(w_$l+=this._currentTime,0<w_$A)if(w_$A<=w_$l)do{if(w_$l-=w_$A,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(w_$A,w_$h),this._stopWhenCircleFinish=!1,void this.event("stopped");w_$l<w_$A&&(this._setPlayParams(w_$l,w_$h),this.event("complete"))}while(w_$A<=w_$l);else this._setPlayParams(w_$l,w_$h);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(w_$A,w_$h),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},w_$l._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},w_$l.play=function(w_$B,w_$h,w_$l,w_$A,w_$n){if(void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=1),void 0===w_$l&&(w_$l=2147483647),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(w_$l<0||w_$A<0||w_$n<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==w_$n&&w_$n<w_$A)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=w_$h,this._overallDuration=w_$l,this._playStart=w_$A,this._playEnd=w_$n,this._paused=!1,this._currentAnimationClipIndex=w_$B,this._currentKeyframeIndex=0,this._startUpdateLoopCount=w_$i.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},w_$l.playByFrame=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$B&&(w_$B=0),void 0===w_$h&&(w_$h=1),void 0===w_$l&&(w_$l=2147483647),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=30);var w_$X=1e3/w_$s;this.play(w_$B,w_$h,w_$l,w_$A*w_$X,w_$n*w_$X)},w_$l.stop=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$B?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},w_$s(0,w_$l,"playEnd",function(){return this._playEnd}),w_$s(0,w_$l,"templet",function(){return this._templet},function(w_$B){0===!this.state&&this.stop(!0),this._templet!==w_$B&&((this._templet=w_$B).loaded?this._computeFullKeyframeIndices():w_$B.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),w_$s(0,w_$l,"playStart",function(){return this._playStart}),w_$s(0,w_$l,"playDuration",function(){return this._playDuration}),w_$s(0,w_$l,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),w_$s(0,w_$l,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),w_$s(0,w_$l,"overallDuration",function(){return this._overallDuration}),w_$s(0,w_$l,"currentFrameTime",function(){return this._currentFrameTime}),w_$s(0,w_$l,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),w_$s(0,w_$l,"currentPlayTime",function(){return this._currentTime+this._playStart}),w_$s(0,w_$l,"cachePlayRate",function(){return this._cachePlayRate},function(w_$B){this._cachePlayRate!==w_$B&&(this._cachePlayRate=w_$B,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[w_$B,this._cacheFrameRate])))}),w_$s(0,w_$l,"cacheFrameRate",function(){return this._cacheFrameRate},function(w_$B){this._cacheFrameRate!==w_$B&&(this._cacheFrameRate=w_$B,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,w_$B])))}),w_$s(0,w_$l,"currentTime",null,function(w_$B){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(w_$B<this._playStart||w_$B>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=w_$i.loopCount;var w_$h=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=w_$B,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/w_$h),0),this._currentFrameTime=this._currentKeyframeIndex*w_$h}}),w_$s(0,w_$l,"paused",function(){return this._paused},function(w_$B){(this._paused=w_$B)&&this.event("paused")}),w_$s(0,w_$l,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),w_$s(0,w_$l,"destroyed",function(){return this._destroyed}),w_$h}(),w_$M=function(w_$B){function w_$h(){w_$h.__super.call(this),w_$V.isConchNode&&(this.drawSkin=function(w_$B){w_$B.transform||(w_$B.transform=w_$NB.EMPTY),this._addCmd([w_$B]),this.setSkinMesh&&this.setSkinMesh(w_$B._ps,w_$B.mVBData,w_$B.mEleNum,0,w_$B.mTexture,w_$B.transform)})}return w_$A(w_$h,"laya.ani.GraphicsAni",w_$X),w_$h.prototype.drawSkin=function(w_$B){var w_$h=[w_$B];this._saveToCmd(w_$V._context._drawSkin,w_$h)},w_$h.create=function(){return w_$h._caches.pop()||new w_$h},w_$h.recycle=function(w_$B){w_$B.clear(),w_$h._caches.push(w_$B)},w_$h._caches=[],w_$h}(),w_$E=function(w_$B){function w_$H(){this._aniMap={},this.unfixedLastAniIndex=-1,w_$H.__super.call(this),this._anis=new Array}w_$A(w_$H,"laya.ani.AnimationTemplet",w_$G);var w_$h=w_$H.prototype;return w_$h.parse=function(w_$B){var w_$h=new w_$SB(w_$B);this._aniVersion=w_$h.readUTFString(),w_$y.parse(this,w_$h)},w_$h._calculateKeyFrame=function(w_$B,w_$h,w_$l){var w_$A=w_$B.keyFrame;w_$A[w_$h]=w_$A[0];for(var w_$n=0;w_$n<w_$h;w_$n++){var w_$s=w_$A[w_$n];w_$s.nextData=0===w_$s.duration?w_$s.data:w_$A[w_$n+1].data}w_$A.length--},w_$h.onAsynLoaded=function(w_$B,w_$h,w_$l){var w_$A=new w_$SB(w_$h);switch(this._aniVersion=w_$A.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":w_$C.parse(this,w_$A);break;default:w_$y.parse(this,w_$A)}this._endLoaded()},w_$h.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},w_$h.getAnimationCount=function(){return this._anis.length},w_$h.getAnimation=function(w_$B){return this._anis[w_$B]},w_$h.getAniDuration=function(w_$B){return this._anis[w_$B].playTime},w_$h.getNodes=function(w_$B){return this._anis[w_$B].nodes},w_$h.getNodeIndexWithName=function(w_$B,w_$h){return this._anis[w_$B].bone3DMap[w_$h]},w_$h.getNodeCount=function(w_$B){return this._anis[w_$B].nodes.length},w_$h.getTotalkeyframesLength=function(w_$B){return this._anis[w_$B].totalKeyframeDatasLength},w_$h.getPublicExtData=function(){return this._publicExtData},w_$h.getAnimationDataWithCache=function(w_$B,w_$h,w_$l,w_$A){var w_$n=w_$h[w_$l];if(w_$n){var w_$s=w_$n[w_$B];return w_$s?w_$s[w_$A]:null}return null},w_$h.setAnimationDataWithCache=function(w_$B,w_$h,w_$l,w_$A,w_$n){var w_$s=w_$h[w_$l]||(w_$h[w_$l]={});(w_$s[w_$B]||(w_$s[w_$B]=[]))[w_$A]=w_$n},w_$h.getOriginalData=function(w_$B,w_$h,w_$l,w_$A,w_$n){for(var w_$s=this._anis[w_$B].nodes,w_$X=0,w_$Z=0,w_$t=w_$s.length,w_$P=0;w_$Z<w_$t;w_$Z++){var w_$G,w_$T=w_$s[w_$Z];w_$G=w_$T.keyFrame[w_$l[w_$Z][w_$A]],w_$T.dataOffset=w_$P;var w_$b=w_$n-w_$G.startTime,w_$Q=w_$T.lerpType;if(w_$Q)switch(w_$Q){case 0:case 1:for(w_$X=0;w_$X<w_$T.keyframeWidth;)w_$X+=w_$T.interpolationMethod[w_$X](w_$T,w_$X,w_$h,w_$P+w_$X,w_$G.data,w_$b,null,w_$G.duration,w_$G.nextData);break;case 2:var w_$i=w_$G.interpolationData,w_$$=w_$i.length,w_$V=0;for(w_$X=0;w_$X<w_$$;){var w_$J=w_$i[w_$X];switch(w_$J){case 6:case 7:w_$X+=w_$H.interpolation[w_$J](w_$T,w_$V,w_$h,w_$P+w_$V,w_$G.data,w_$b,null,w_$G.duration,w_$G.nextData,w_$i,w_$X+1);break;default:w_$X+=w_$H.interpolation[w_$J](w_$T,w_$V,w_$h,w_$P+w_$V,w_$G.data,w_$b,null,w_$G.duration,w_$G.nextData)}w_$V++}}else for(w_$X=0;w_$X<w_$T.keyframeWidth;)w_$X+=w_$T.interpolationMethod[w_$X](w_$T,w_$X,w_$h,w_$P+w_$X,w_$G.data,w_$b,null,w_$G.duration,w_$G.nextData);w_$P+=w_$T.keyframeWidth}},w_$h.getNodesCurrentFrameIndex=function(w_$B,w_$h){var w_$l=this._anis[w_$B].nodes;w_$B!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(w_$l.length),this.unfixedCurrentTimes=new Float32Array(w_$l.length),this.unfixedLastAniIndex=w_$B);for(var w_$A=0,w_$n=w_$l.length;w_$A<w_$n;w_$A++){var w_$s=w_$l[w_$A];for(w_$h<this.unfixedCurrentTimes[w_$A]&&(this.unfixedCurrentFrameIndexes[w_$A]=0),this.unfixedCurrentTimes[w_$A]=w_$h;this.unfixedCurrentFrameIndexes[w_$A]<w_$s.keyFrame.length&&!(w_$s.keyFrame[this.unfixedCurrentFrameIndexes[w_$A]].startTime>this.unfixedCurrentTimes[w_$A]);)this.unfixedCurrentFrameIndexes[w_$A]++;this.unfixedCurrentFrameIndexes[w_$A]--}return this.unfixedCurrentFrameIndexes},w_$h.getOriginalDataUnfixedRate=function(w_$B,w_$h,w_$l){var w_$A=this._anis[w_$B].nodes;w_$B!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(w_$A.length),this.unfixedCurrentTimes=new Float32Array(w_$A.length),this.unfixedKeyframes=w_$$(w_$A.length),this.unfixedLastAniIndex=w_$B);for(var w_$n=0,w_$s=0,w_$X=w_$A.length,w_$Z=0;w_$s<w_$X;w_$s++){var w_$t=w_$A[w_$s];for(w_$l<this.unfixedCurrentTimes[w_$s]&&(this.unfixedCurrentFrameIndexes[w_$s]=0),this.unfixedCurrentTimes[w_$s]=w_$l;this.unfixedCurrentFrameIndexes[w_$s]<w_$t.keyFrame.length&&!(w_$t.keyFrame[this.unfixedCurrentFrameIndexes[w_$s]].startTime>this.unfixedCurrentTimes[w_$s]);)this.unfixedKeyframes[w_$s]=w_$t.keyFrame[this.unfixedCurrentFrameIndexes[w_$s]],this.unfixedCurrentFrameIndexes[w_$s]++;var w_$P=this.unfixedKeyframes[w_$s];w_$t.dataOffset=w_$Z;var w_$G=w_$l-w_$P.startTime;if(w_$t.lerpType)switch(w_$t.lerpType){case 0:case 1:for(w_$n=0;w_$n<w_$t.keyframeWidth;)w_$n+=w_$t.interpolationMethod[w_$n](w_$t,w_$n,w_$h,w_$Z+w_$n,w_$P.data,w_$G,null,w_$P.duration,w_$P.nextData);break;case 2:var w_$T=w_$P.interpolationData,w_$b=w_$T.length,w_$Q=0;for(w_$n=0;w_$n<w_$b;){var w_$i=w_$T[w_$n];switch(w_$i){case 6:case 7:w_$n+=w_$H.interpolation[w_$i](w_$t,w_$Q,w_$h,w_$Z+w_$Q,w_$P.data,w_$G,null,w_$P.duration,w_$P.nextData,w_$T,w_$n+1);break;default:w_$n+=w_$H.interpolation[w_$i](w_$t,w_$Q,w_$h,w_$Z+w_$Q,w_$P.data,w_$G,null,w_$P.duration,w_$P.nextData)}w_$Q++}}else for(w_$n=0;w_$n<w_$t.keyframeWidth;)w_$n+=w_$t.interpolationMethod[w_$n](w_$t,w_$n,w_$h,w_$Z+w_$n,w_$P.data,w_$G,null,w_$P.duration,w_$P.nextData);w_$Z+=w_$t.keyframeWidth}},w_$H._LinearInterpolation_0=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){var w_$G=0===w_$Z?0:w_$s/w_$Z;return w_$l[w_$A]=(1-w_$G)*w_$n[w_$h]+w_$G*w_$t[w_$h],1},w_$H._QuaternionInterpolation_1=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){var w_$G=0===w_$Z?0:w_$s/w_$Z;return w_$b.slerpQuaternionArray(w_$n,w_$h,w_$t,w_$h,w_$G,w_$l,w_$A),4},w_$H._AngleInterpolation_2=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){return 0},w_$H._RadiansInterpolation_3=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){return 0},w_$H._Matrix4x4Interpolation_4=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){for(var w_$G=0;w_$G<16;w_$G++,w_$h++)w_$l[w_$A+w_$G]=w_$n[w_$h]+w_$s*w_$X[w_$h];return 16},w_$H._NoInterpolation_5=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P){return w_$l[w_$A]=w_$n[w_$h],1},w_$H._BezierInterpolation_6=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G){return void 0===w_$G&&(w_$G=0),w_$l[w_$A]=w_$n[w_$h]+(w_$t[w_$h]-w_$n[w_$h])*w_$U.getBezierRate(w_$s/w_$Z,w_$P[w_$G],w_$P[w_$G+1],w_$P[w_$G+2],w_$P[w_$G+3]),5},w_$H._BezierInterpolation_7=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s,w_$X,w_$Z,w_$t,w_$P,w_$G){return void 0===w_$G&&(w_$G=0),w_$l[w_$A]=w_$P[w_$G+4]+w_$P[w_$G+5]*w_$U.getBezierRate((.001*w_$s+w_$P[w_$G+6])/w_$P[w_$G+7],w_$P[w_$G],w_$P[w_$G+1],w_$P[w_$G+2],w_$P[w_$G+3]),9},w_$H.load=function(w_$B){return w_$nB.loader.create(w_$B,null,null,w_$H)},w_$H.interpolation=[w_$H._LinearInterpolation_0,w_$H._QuaternionInterpolation_1,w_$H._AngleInterpolation_2,w_$H._RadiansInterpolation_3,w_$H._Matrix4x4Interpolation_4,w_$H._NoInterpolation_5,w_$H._BezierInterpolation_6,w_$H._BezierInterpolation_7],w_$H}(),w_$w=function(w_$h){function w_$l(w_$B,w_$h){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,w_$l.__super.call(this),void 0===w_$h&&(w_$h=0),w_$B&&this.init(w_$B,w_$h)}w_$A(w_$l,"laya.ani.bone.Skeleton",w_$h);var w_$B=w_$l.prototype;return w_$B.init=function(w_$B,w_$h){void 0===w_$h&&(w_$h=0);var w_$l,w_$A,w_$n,w_$s=0,w_$X=0;if(1==w_$h)for(this._graphicsCache=[],w_$s=0,w_$X=w_$B.getAnimationCount();w_$s<w_$X;w_$s++)this._graphicsCache.push([]);if(this._yReverseMatrix=w_$B.yReverseMatrix,this._aniMode=w_$h,this._templet=w_$B,this._player=new w_$x,this._player.cacheFrameRate=w_$B.rate,this._player.templet=w_$B,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=w_$B.mBoneArr,this._rootBone=w_$B.mRootBone,this._aniSectionDic=w_$B.aniSectionDic,0<w_$B.ikArr.length)for(this._ikArr=[],w_$s=0,w_$X=w_$B.ikArr.length;w_$s<w_$X;w_$s++)this._ikArr.push(new w_$H(w_$B.ikArr[w_$s],this._boneList));if(0<w_$B.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),w_$s=0,w_$X=w_$B.pathArr.length;w_$s<w_$X;w_$s++)w_$l=w_$B.pathArr[w_$s],w_$A=new w_$o(w_$l,this._boneList),(w_$n=this._boneSlotDic[w_$l.name])&&((w_$A=new w_$o(w_$l,this._boneList)).target=w_$n),this._pathDic[w_$l.name]=w_$A;if(0<w_$B.tfArr.length)for(this._tfArr=[],w_$s=0,w_$X=w_$B.tfArr.length;w_$s<w_$X;w_$s++)this._tfArr.push(new w_$u(w_$B.tfArr[w_$s],this._boneList));if(0<w_$B.skinDataArray.length){var w_$Z=this._templet.skinDataArray[this._skinIndex];this._skinName=w_$Z.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},w_$B.load=function(w_$B,w_$h,w_$l){},w_$B._onLoaded=function(){},w_$B._parseComplete=function(){var w_$B=w_$z.TEMPLET_DICTIONARY[this._aniPath];w_$B&&(this.init(w_$B,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},w_$B._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},w_$B._onPlay=function(){this.event("played")},w_$B._onStop=function(){var w_$B,w_$h=this._templet.eventAniArr[this._aniClipIndex];if(w_$h&&this._eventIndex<w_$h.length)for(;this._eventIndex<w_$h.length;this._eventIndex++)(w_$B=w_$h[this._eventIndex]).time>=this._player.playStart&&w_$B.time<=this._player.playEnd&&this.event("label",w_$B);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},w_$B._onPause=function(){this.event("paused")},w_$B._parseSrcBoneMatrix=function(){var w_$B=0,w_$h=0;for(w_$h=this._templet.srcBoneMatrixArr.length,w_$B=0;w_$B<w_$h;w_$B++)this._boneMatrixArray.push(new w_$NB);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var w_$l,w_$A,w_$n=this._templet.boneSlotArray;for(w_$B=0,w_$h=w_$n.length;w_$B<w_$h;w_$B++)w_$l=w_$n[w_$B],null==(w_$A=this._bindBoneBoneSlotDic[w_$l.parent])&&(this._bindBoneBoneSlotDic[w_$l.parent]=w_$A=[]),this._boneSlotDic[w_$l.name]=w_$l=w_$l.copy(),w_$A.push(w_$l),this._boneSlotArray.push(w_$l)}},w_$B._emitMissedEvents=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=0);var w_$A=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(w_$A){var w_$n,w_$s,w_$X=0;for(w_$n=w_$A.length,w_$X=w_$l;w_$X<w_$n;w_$X++)(w_$s=w_$A[w_$X]).time>=this._player.playStart&&w_$s.time<=this._player.playEnd&&this.event("label",w_$s)}},w_$B._update=function(w_$B){if(void 0===w_$B&&(w_$B=!0),!(this._pause||w_$B&&this._indexControl)){var w_$h=this.timer.currTimer,w_$l=this._player.currentKeyframeIndex,w_$A=w_$h-this._lastTime;if(w_$B?this._player._update(w_$A):w_$l=-1,this._lastTime=w_$h,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<w_$A&&this._clipIndex==w_$l&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var w_$n;this._lastUpdateAniClipIndex=this._aniClipIndex,w_$l>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var w_$s,w_$X=this._templet.eventAniArr[this._aniClipIndex];if(w_$X&&this._eventIndex<w_$X.length&&((w_$n=w_$X[this._eventIndex]).time>=this._player.playStart&&w_$n.time<=this._player.playEnd?this._player.currentPlayTime>=w_$n.time&&(this.event("label",w_$n),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(w_$s=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=w_$s&&(this.graphics=w_$s));var w_$Z=0,w_$t=0;for(w_$t=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,w_$t-1)&&0<w_$t;)w_$t--;if(w_$t<this._clipIndex)for(w_$Z=w_$t;w_$Z<this._clipIndex;w_$Z++)this._createGraphics(w_$Z)}else if(1==this._aniMode){if(w_$s=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=w_$s&&(this.graphics=w_$s));for(w_$t=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,w_$t-1)&&0<w_$t;)w_$t--;if(w_$t<this._clipIndex)for(w_$Z=w_$t;w_$Z<this._clipIndex;w_$Z++)this._createGraphics(w_$Z)}this._createGraphics()}}},w_$B._createGraphics=function(w_$B){void 0===w_$B&&(w_$B=-1),-1==w_$B&&(w_$B=this._clipIndex);var w_$h,w_$l,w_$A=w_$B*this._player.cacheFrameRateInterval,w_$n=this._templet.drawOrderAniArr[this._aniClipIndex];if(w_$n&&0<w_$n.length)for(this._drawOrderIndex=0,w_$h=w_$n[this._drawOrderIndex];w_$A>=w_$h.time&&(this._drawOrder=w_$h.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=w_$n.length));)w_$h=w_$n[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=w_$M.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=w_$M.create(),w_$l=this.graphics;var w_$s=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],w_$B,w_$A);var w_$X,w_$Z,w_$t,w_$P,w_$G=this._aniSectionDic[this._aniClipIndex],w_$T=0,w_$b=0,w_$Q=0,w_$i=0,w_$$=0,w_$V=this._templet.srcBoneMatrixArr.length;for(w_$$=w_$G[w_$b=0];w_$b<w_$V;w_$b++)w_$P=this._boneList[w_$b],w_$t=this._templet.srcBoneMatrixArr[w_$b],w_$P.resultTransform.scX=w_$t.scX*this._curOriginalData[w_$T++],w_$P.resultTransform.skX=w_$t.skX+this._curOriginalData[w_$T++],w_$P.resultTransform.skY=w_$t.skY+this._curOriginalData[w_$T++],w_$P.resultTransform.scY=w_$t.scY*this._curOriginalData[w_$T++],w_$P.resultTransform.x=w_$t.x+this._curOriginalData[w_$T++],w_$P.resultTransform.y=w_$t.y+this._curOriginalData[w_$T++],8===this._templet.tMatrixDataLen&&(w_$P.resultTransform.skewX=w_$t.skewX+this._curOriginalData[w_$T++],w_$P.resultTransform.skewY=w_$t.skewY+this._curOriginalData[w_$T++]);var w_$J,w_$H={},w_$y={};for(w_$$+=w_$G[1];w_$b<w_$$;w_$b++)w_$H[(w_$J=w_$s[w_$b]).name]=this._curOriginalData[w_$T++],w_$y[w_$J.name]=this._curOriginalData[w_$T++],this._curOriginalData[w_$T++],this._curOriginalData[w_$T++],this._curOriginalData[w_$T++],this._curOriginalData[w_$T++];var w_$C,w_$o,w_$u={},w_$v={};for(w_$$+=w_$G[2];w_$b<w_$$;w_$b++)w_$u[(w_$J=w_$s[w_$b]).name]=this._curOriginalData[w_$T++],w_$v[w_$J.name]=this._curOriginalData[w_$T++],this._curOriginalData[w_$T++],this._curOriginalData[w_$T++],this._curOriginalData[w_$T++],this._curOriginalData[w_$T++];if(this._pathDic)for(w_$$+=w_$G[3];w_$b<w_$$;w_$b++){if(w_$J=w_$s[w_$b],w_$C=this._pathDic[w_$J.name])switch(new w_$SB(w_$J.extenData).getByte()){case 1:w_$C.position=this._curOriginalData[w_$T++];break;case 2:w_$C.spacing=this._curOriginalData[w_$T++];break;case 3:w_$C.rotateMix=this._curOriginalData[w_$T++],w_$C.translateMix=this._curOriginalData[w_$T++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(w_$NB.TEMP.identity()),this._ikArr)for(w_$b=0,w_$$=this._ikArr.length;w_$b<w_$$;w_$b++)w_$o=this._ikArr[w_$b],w_$u.hasOwnProperty(w_$o.name)&&(w_$o.bendDirection=w_$u[w_$o.name]),w_$v.hasOwnProperty(w_$o.name)&&(w_$o.mix=w_$v[w_$o.name]),w_$o.apply();if(this._pathDic)for(var w_$U in this._pathDic)(w_$C=this._pathDic[w_$U]).apply(this._boneList,w_$l);if(this._tfArr)for(w_$b=0,w_$i=this._tfArr.length;w_$b<w_$i;w_$b++)this._tfArr[w_$b].apply();for(w_$b=0,w_$i=this._boneList.length;w_$b<w_$i;w_$b++)if(w_$P=this._boneList[w_$b],w_$Z=this._bindBoneBoneSlotDic[w_$P.name],w_$P.resultMatrix.copyTo(this._boneMatrixArray[w_$b]),w_$Z)for(w_$Q=0,w_$$=w_$Z.length;w_$Q<w_$$;w_$Q++)(w_$X=w_$Z[w_$Q])&&w_$X.setParentMatrix(w_$P.resultMatrix);var w_$x,w_$w,w_$z,w_$a,w_$S={},w_$N=this._templet.deformAniArr;if(w_$N&&0<w_$N.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,w_$b=0,w_$$=this._boneSlotArray.length;w_$b<w_$$;w_$b++)(w_$X=this._boneSlotArray[w_$b]).deformData=null;var w_$R,w_$W=w_$N[this._aniClipIndex];for(w_$R in w_$x=w_$W.default,this._setDeform(w_$x,w_$S,this._boneSlotArray,w_$A),w_$W)"default"!=w_$R&&w_$R!=this._skinName&&(w_$x=w_$W[w_$R],this._setDeform(w_$x,w_$S,this._boneSlotArray,w_$A));w_$x=w_$W[this._skinName],this._setDeform(w_$x,w_$S,this._boneSlotArray,w_$A)}if(this._drawOrder)for(w_$b=0,w_$$=this._drawOrder.length;w_$b<w_$$;w_$b++)w_$w=w_$H[(w_$X=this._boneSlotArray[this._drawOrder[w_$b]]).name],w_$z=w_$y[w_$X.name],isNaN(w_$z)||(w_$l.save(),w_$l.alpha(w_$z)),isNaN(w_$w)||-2==w_$w||(this._templet.attachmentNames?w_$X.showDisplayByName(this._templet.attachmentNames[w_$w]):w_$X.showDisplayByIndex(w_$w)),w_$S[this._drawOrder[w_$b]]?(w_$a=w_$S[this._drawOrder[w_$b]],w_$X.currDisplayData&&w_$a[w_$X.currDisplayData.attachmentName]?w_$X.deformData=w_$a[w_$X.currDisplayData.attachmentName]:w_$X.deformData=null):w_$X.deformData=null,isNaN(w_$z)?w_$X.draw(w_$l,this._boneMatrixArray,2==this._aniMode):w_$X.draw(w_$l,this._boneMatrixArray,2==this._aniMode,w_$z),isNaN(w_$z)||w_$l.restore();else for(w_$b=0,w_$$=this._boneSlotArray.length;w_$b<w_$$;w_$b++)w_$w=w_$H[(w_$X=this._boneSlotArray[w_$b]).name],w_$z=w_$y[w_$X.name],isNaN(w_$z)||(w_$l.save(),w_$l.alpha(w_$z)),isNaN(w_$w)||-2==w_$w||(this._templet.attachmentNames?w_$X.showDisplayByName(this._templet.attachmentNames[w_$w]):w_$X.showDisplayByIndex(w_$w)),w_$S[w_$b]?(w_$a=w_$S[w_$b],w_$X.currDisplayData&&w_$a[w_$X.currDisplayData.attachmentName]?w_$X.deformData=w_$a[w_$X.currDisplayData.attachmentName]:w_$X.deformData=null):w_$X.deformData=null,isNaN(w_$z)?w_$X.draw(w_$l,this._boneMatrixArray,2==this._aniMode):w_$X.draw(w_$l,this._boneMatrixArray,2==this._aniMode,w_$z),isNaN(w_$z)||w_$l.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,w_$B,w_$l):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,w_$B,w_$l)},w_$B._setDeform=function(w_$B,w_$h,w_$l,w_$A){if(w_$B){var w_$n,w_$s,w_$X,w_$Z=0,w_$t=0,w_$P=0;if(w_$B)for(w_$Z=0,w_$t=w_$B.deformSlotDataList.length;w_$Z<w_$t;w_$Z++)for(w_$n=w_$B.deformSlotDataList[w_$Z],w_$P=0;w_$P<w_$n.deformSlotDisplayList.length;w_$P++)w_$X=w_$l[(w_$s=w_$n.deformSlotDisplayList[w_$P]).slotIndex],w_$s.apply(w_$A,w_$X),w_$h[w_$s.slotIndex]||(w_$h[w_$s.slotIndex]={}),w_$h[w_$s.slotIndex][w_$s.attachment]=w_$s.deformData}},w_$B.getAnimNum=function(){return this._templet.getAnimationCount()},w_$B.getAniNameByIndex=function(w_$B){return this._templet.getAniNameByIndex(w_$B)},w_$B.getSlotByName=function(w_$B){return this._boneSlotDic[w_$B]},w_$B.showSkinByName=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(w_$B),w_$h)},w_$B.showSkinByIndex=function(w_$B,w_$h){void 0===w_$h&&(w_$h=!0);for(var w_$l=0;w_$l<this._boneSlotArray.length;w_$l++)this._boneSlotArray[w_$l].showSlotData(null,w_$h);if(this._templet.showSkinByIndex(this._boneSlotDic,w_$B,w_$h)){var w_$A=this._templet.skinDataArray[w_$B];this._skinIndex=w_$B,this._skinName=w_$A.name}this._clearCache()},w_$B.showSlotSkinByIndex=function(w_$B,w_$h){if(0!=this._aniMode){var w_$l=this.getSlotByName(w_$B);w_$l&&w_$l.showDisplayByIndex(w_$h),this._clearCache()}},w_$B.showSlotSkinByName=function(w_$B,w_$h){if(0!=this._aniMode){var w_$l=this.getSlotByName(w_$B);w_$l&&w_$l.showDisplayByName(w_$h),this._clearCache()}},w_$B.replaceSlotSkinName=function(w_$B,w_$h,w_$l){if(0!=this._aniMode){var w_$A=this.getSlotByName(w_$B);w_$A&&w_$A.replaceDisplayByName(w_$h,w_$l),this._clearCache()}},w_$B.replaceSlotSkinByIndex=function(w_$B,w_$h,w_$l){if(0!=this._aniMode){var w_$A=this.getSlotByName(w_$B);w_$A&&w_$A.replaceDisplayByIndex(w_$h,w_$l),this._clearCache()}},w_$B.setSlotSkin=function(w_$B,w_$h){if(0!=this._aniMode){var w_$l=this.getSlotByName(w_$B);w_$l&&w_$l.replaceSkin(w_$h),this._clearCache()}},w_$B._clearCache=function(){if(1==this._aniMode)for(var w_$B=0,w_$h=this._graphicsCache.length;w_$B<w_$h;w_$B++){for(var w_$l=0,w_$A=this._graphicsCache[w_$B].length;w_$l<w_$A;w_$l++){var w_$n=this._graphicsCache[w_$B][w_$l];w_$n!=this.graphics&&w_$M.recycle(w_$n)}this._graphicsCache[w_$B].length=0}},w_$B.play=function(w_$B,w_$h,w_$l,w_$A,w_$n,w_$s){void 0===w_$l&&(w_$l=!0),void 0===w_$A&&(w_$A=0),void 0===w_$n&&(w_$n=0),void 0===w_$s&&(w_$s=!0),this._indexControl=!1;var w_$X=-1,w_$Z=NaN;if(w_$Z=w_$h?2147483647:0,"string"==typeof w_$B)for(var w_$t=0,w_$P=this._templet.getAnimationCount();w_$t<w_$P;w_$t++){var w_$G=this._templet.getAnimation(w_$t);if(w_$G&&w_$B==w_$G.name){w_$X=w_$t;break}}else w_$X=w_$B;-1<w_$X&&w_$X<this.getAnimNum()&&(this._aniClipIndex=w_$X,(w_$l||this._pause||this._currAniIndex!=w_$X)&&(this._currAniIndex=w_$X,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(w_$X)),this._drawOrder=null,this._eventIndex=0,this._player.play(w_$X,this._player.playbackRate,w_$Z,w_$A,w_$n),w_$s&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=w_$T.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},w_$B.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},w_$B.playbackRate=function(w_$B){this._player&&(this._player.playbackRate=w_$B)},w_$B.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},w_$B.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=w_$T.now(),this.timer.frameLoop(1,this,this._update,null,!0))},w_$B._getGrahicsDataWithCache=function(w_$B,w_$h){return this._graphicsCache[w_$B][w_$h]},w_$B._setGrahicsDataWithCache=function(w_$B,w_$h,w_$l){this._graphicsCache[w_$B][w_$h]=w_$l},w_$B.destroy=function(w_$B){void 0===w_$B&&(w_$B=!0),w_$h.prototype.destroy.call(this,w_$B),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},w_$s(0,w_$B,"url",function(){return this._aniPath},function(w_$B){this.load(w_$B)}),w_$s(0,w_$B,"index",function(){return this._index},function(w_$B){this.player&&(this._index=w_$B,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),w_$s(0,w_$B,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),w_$s(0,w_$B,"templet",function(){return this._templet}),w_$s(0,w_$B,"player",function(){return this._player}),w_$l.useSimpleMeshInCanvas=!1,w_$l}(w_$sB),w_$z=function(w_$h){function w_$n(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,w_$n.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}w_$A(w_$n,"laya.ani.bone.Templet",w_$h);var w_$B=w_$n.prototype;return w_$B.getLoadList=function(){return this._loadList},w_$B.loadAni=function(w_$B){this._skBufferUrl=w_$B,w_$nB.loader.load(w_$B,w_$t.create(this,this.onComplete),null,"arraybuffer")},w_$B.onComplete=function(w_$B){if(this._isDestroyed)this.destroy();else{var w_$h=w_$P.getRes(this._skBufferUrl);w_$h?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,w_$h)):this.event("error","load failed:"+this._skBufferUrl)}},w_$B.parseData=function(w_$B,w_$h,w_$l){void 0===w_$l&&(w_$l=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=w_$B,this._mainTexture&&w_$V.isWebGL&&w_$B.bitmap&&(w_$B.bitmap.enableMerageInAtlas=!1),this._rate=w_$l,this.parse(w_$h)},w_$B.buildArmature=function(w_$B){return void 0===w_$B&&(w_$B=0),new w_$w(this,w_$B)},w_$B.parse=function(w_$B){w_$h.prototype.parse.call(this,w_$B),this._endLoaded(),this._aniVersion!=w_$n.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+w_$n.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},w_$B._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var w_$B=0;this._loadList=[];var w_$h,w_$l=new w_$SB(this.getPublicExtData()),w_$A=0,w_$n=0,w_$s=0,w_$X=w_$l.getInt32(),w_$Z=w_$l.readUTFString(),w_$t=w_$Z.split("\n");for(w_$B=0;w_$B<w_$X;w_$B++)w_$h=this._path+w_$t[2*w_$B],w_$Z=w_$t[2*w_$B+1],w_$l.getFloat32(),w_$l.getFloat32(),w_$A=w_$l.getFloat32(),w_$n=w_$l.getFloat32(),w_$s=w_$l.getFloat32(),isNaN(w_$s)?0:w_$s,w_$s=w_$l.getFloat32(),isNaN(w_$s)?0:w_$s,w_$s=w_$l.getFloat32(),isNaN(w_$s)?w_$A:w_$s,w_$s=w_$l.getFloat32(),isNaN(w_$s)?w_$n:w_$s,-1==this._loadList.indexOf(w_$h)&&this._loadList.push(w_$h);this.event("inited",this)}},w_$B._textureComplete=function(){for(var w_$B,w_$h,w_$l=0,w_$A=this._loadList.length;w_$l<w_$A;w_$l++)w_$h=this._loadList[w_$l],w_$B=this._textureDic[w_$h]=w_$P.getRes(w_$h),w_$V.isWebGL&&w_$B&&w_$B.bitmap&&(w_$B.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},w_$B._parsePublicExtData=function(){var w_$B=0,w_$h=0,w_$l=0,w_$A=0,w_$n=0;for(w_$B=0,w_$n=this.getAnimationCount();w_$B<w_$n;w_$B++)this._graphicsCache.push([]);var w_$s;w_$s="Dragon"!=this._aniClassName;var w_$X,w_$Z,w_$t=new w_$SB(this.getPublicExtData()),w_$P=0,w_$G=0,w_$T=0,w_$b=0,w_$Q=0,w_$i=0,w_$$=0,w_$V=0,w_$J=0,w_$H=w_$t.getInt32(),w_$y=w_$t.readUTFString(),w_$C=w_$y.split("\n");for(w_$B=0;w_$B<w_$H;w_$B++){if(w_$X=this._mainTexture,w_$Z=this._path+w_$C[2*w_$B],w_$y=w_$C[2*w_$B+1],null==this._mainTexture&&(w_$X=this._textureDic[w_$Z]),!w_$X)return this.event("error",this),void(this.isParseFail=!0);w_$P=w_$t.getFloat32(),w_$G=w_$t.getFloat32(),w_$T=w_$t.getFloat32(),w_$b=w_$t.getFloat32(),w_$J=w_$t.getFloat32(),w_$Q=isNaN(w_$J)?0:w_$J,w_$J=w_$t.getFloat32(),w_$i=isNaN(w_$J)?0:w_$J,w_$J=w_$t.getFloat32(),w_$$=isNaN(w_$J)?w_$T:w_$J,w_$J=w_$t.getFloat32(),w_$V=isNaN(w_$J)?w_$b:w_$J,this.subTextureDic[w_$y]=w_$RB.create(w_$X,w_$P,w_$G,w_$T,w_$b,-w_$Q,-w_$i,w_$$,w_$V),w_$X.alphaTexture&&(this.subTextureDic[w_$y].alphaTexture=w_$RB.create(w_$X.alphaTexture,w_$P,w_$G,w_$T,w_$b,-w_$Q,-w_$i,w_$$,w_$V))}this._mainTexture=w_$X;var w_$o,w_$u,w_$v,w_$U,w_$x,w_$w=w_$t.getUint16();for(w_$B=0;w_$B<w_$w;w_$B++)(w_$o=[]).push(w_$t.getUint16()),w_$o.push(w_$t.getUint16()),w_$o.push(w_$t.getUint16()),w_$o.push(w_$t.getUint16()),this.aniSectionDic[w_$B]=w_$o;var w_$z,w_$a=w_$t.getInt16(),w_$S={};for(w_$B=0;w_$B<w_$a;w_$B++)w_$u=new w_$WB,0==w_$B?w_$z=w_$u:w_$u.root=w_$z,w_$u.d=w_$s?-1:1,w_$U=w_$t.readUTFString(),w_$x=w_$t.readUTFString(),w_$u.length=w_$t.getFloat32(),1==w_$t.getByte()&&(w_$u.inheritRotation=!1),1==w_$t.getByte()&&(w_$u.inheritScale=!1),w_$u.name=w_$U,w_$x&&((w_$v=w_$S[w_$x])?w_$v.addChild(w_$u):this.mRootBone=w_$u),w_$S[w_$U]=w_$u,this.mBoneArr.push(w_$u);this.tMatrixDataLen=w_$t.getUint16();var w_$N,w_$R,w_$W=w_$t.getUint16(),w_$M=Math.floor(w_$W/this.tMatrixDataLen),w_$E=this.srcBoneMatrixArr;for(w_$B=0;w_$B<w_$M;w_$B++)(w_$N=new w_$YB).scX=w_$t.getFloat32(),w_$N.skX=w_$t.getFloat32(),w_$N.skY=w_$t.getFloat32(),w_$N.scY=w_$t.getFloat32(),w_$N.x=w_$t.getFloat32(),w_$N.y=w_$t.getFloat32(),8===this.tMatrixDataLen&&(w_$N.skewX=w_$t.getFloat32(),w_$N.skewY=w_$t.getFloat32()),w_$E.push(w_$N),(w_$u=this.mBoneArr[w_$B]).transform=w_$N;var w_$j,w_$g=w_$t.getUint16(),w_$_=0;for(w_$B=0;w_$B<w_$g;w_$B++){for(w_$R=new w_$kB,w_$_=w_$t.getUint16(),w_$h=0;w_$h<w_$_;w_$h++)w_$R.boneNames.push(w_$t.readUTFString()),w_$R.boneIndexs.push(w_$t.getInt16());w_$R.name=w_$t.readUTFString(),w_$R.targetBoneName=w_$t.readUTFString(),w_$R.targetBoneIndex=w_$t.getInt16(),w_$R.bendDirection=w_$t.getFloat32(),w_$R.mix=w_$t.getFloat32(),w_$R.isSpine=w_$s,this.ikArr.push(w_$R)}var w_$d,w_$k=w_$t.getUint16(),w_$O=0;for(w_$B=0;w_$B<w_$k;w_$B++){for(w_$j=new w_$mB,w_$O=w_$t.getUint16(),w_$h=0;w_$h<w_$O;w_$h++)w_$j.boneIndexs.push(w_$t.getInt16());w_$j.name=w_$t.getUTFString(),w_$j.targetIndex=w_$t.getInt16(),w_$j.rotateMix=w_$t.getFloat32(),w_$j.translateMix=w_$t.getFloat32(),w_$j.scaleMix=w_$t.getFloat32(),w_$j.shearMix=w_$t.getFloat32(),w_$j.offsetRotation=w_$t.getFloat32(),w_$j.offsetX=w_$t.getFloat32(),w_$j.offsetY=w_$t.getFloat32(),w_$j.offsetScaleX=w_$t.getFloat32(),w_$j.offsetScaleY=w_$t.getFloat32(),w_$j.offsetShearY=w_$t.getFloat32(),this.tfArr.push(w_$j)}var w_$p=w_$t.getUint16(),w_$F=0;for(w_$B=0;w_$B<w_$p;w_$B++){for((w_$d=new w_$OB).name=w_$t.readUTFString(),w_$F=w_$t.getUint16(),w_$h=0;w_$h<w_$F;w_$h++)w_$d.bones.push(w_$t.getInt16());w_$d.target=w_$t.readUTFString(),w_$d.positionMode=w_$t.readUTFString(),w_$d.spacingMode=w_$t.readUTFString(),w_$d.rotateMode=w_$t.readUTFString(),w_$d.offsetRotation=w_$t.getFloat32(),w_$d.position=w_$t.getFloat32(),w_$d.spacing=w_$t.getFloat32(),w_$d.rotateMix=w_$t.getFloat32(),w_$d.translateMix=w_$t.getFloat32(),this.pathArr.push(w_$d)}var w_$c,w_$m,w_$Y,w_$K,w_$f,w_$I=0,w_$L=0,w_$e=0,w_$q=NaN,w_$D=0,w_$r=w_$t.getInt16();for(w_$B=0;w_$B<w_$r;w_$B++){var w_$BB=w_$t.getUint8(),w_$hB={};this.deformAniArr.push(w_$hB);for(var w_$lB=0;w_$lB<w_$BB;w_$lB++)for((w_$c=new w_$EB).skinName=w_$t.getUTFString(),w_$hB[w_$c.skinName]=w_$c,w_$I=w_$t.getInt16(),w_$h=0;w_$h<w_$I;w_$h++)for(w_$m=new w_$jB,w_$c.deformSlotDataList.push(w_$m),w_$L=w_$t.getInt16(),w_$l=0;w_$l<w_$L;w_$l++)for(w_$Y=new w_$gB,w_$m.deformSlotDisplayList.push(w_$Y),w_$Y.slotIndex=w_$t.getInt16(),w_$Y.attachment=w_$t.getUTFString(),w_$e=w_$t.getInt16(),w_$A=0;w_$A<w_$e;w_$A++)for(1==w_$t.getByte()?w_$Y.tweenKeyList.push(!0):w_$Y.tweenKeyList.push(!1),w_$q=w_$t.getFloat32(),w_$Y.timeList.push(w_$q),w_$K=[],w_$Y.vectices.push(w_$K),w_$D=w_$t.getInt16(),w_$n=0;w_$n<w_$D;w_$n++)w_$K.push(w_$t.getFloat32())}var w_$AB,w_$nB,w_$sB=w_$t.getInt16(),w_$XB=0,w_$ZB=0;for(w_$B=0;w_$B<w_$sB;w_$B++){for(w_$XB=w_$t.getInt16(),w_$f=[],w_$h=0;w_$h<w_$XB;w_$h++){for((w_$AB=new w_$_B).time=w_$t.getFloat32(),w_$ZB=w_$t.getInt16(),w_$l=0;w_$l<w_$ZB;w_$l++)w_$AB.drawOrder.push(w_$t.getInt16());w_$f.push(w_$AB)}this.drawOrderAniArr.push(w_$f)}var w_$tB,w_$PB=w_$t.getInt16(),w_$GB=0;for(w_$B=0;w_$B<w_$PB;w_$B++){for(w_$GB=w_$t.getInt16(),w_$nB=[],w_$h=0;w_$h<w_$GB;w_$h++)(w_$tB=new w_$dB).name=w_$t.getUTFString(),w_$tB.intValue=w_$t.getInt32(),w_$tB.floatValue=w_$t.getFloat32(),w_$tB.stringValue=w_$t.getUTFString(),w_$tB.time=w_$t.getFloat32(),w_$nB.push(w_$tB);this.eventAniArr.push(w_$nB)}var w_$TB=w_$t.getInt16();if(0<w_$TB)for(this.attachmentNames=[],w_$B=0;w_$B<w_$TB;w_$B++)this.attachmentNames.push(w_$t.getUTFString());var w_$bB,w_$QB,w_$iB=w_$t.getInt16();for(w_$B=0;w_$B<w_$iB;w_$B++)(w_$bB=new w_$MB).name=w_$t.readUTFString(),w_$bB.parent=w_$t.readUTFString(),w_$bB.attachmentName=w_$t.readUTFString(),w_$bB.srcDisplayIndex=w_$bB.displayIndex=w_$t.getInt16(),(w_$bB.templet=this).boneSlotDic[w_$bB.name]=w_$bB,null==(w_$QB=this.bindBoneBoneSlotDic[w_$bB.parent])&&(this.bindBoneBoneSlotDic[w_$bB.parent]=w_$QB=[]),w_$QB.push(w_$bB),this.boneSlotArray.push(w_$bB);var w_$$B,w_$VB,w_$JB,w_$HB=w_$t.readUTFString().split("\n"),w_$yB=0,w_$CB=w_$t.getUint8(),w_$oB=0,w_$uB=0,w_$vB=0,w_$UB=0,w_$xB=0,w_$wB=0,w_$zB=0;for(w_$B=0;w_$B<w_$CB;w_$B++){for((w_$$B=new w_$pB).name=w_$HB[w_$yB++],w_$oB=w_$t.getUint8(),w_$h=0;w_$h<w_$oB;w_$h++){for((w_$VB=new w_$cB).name=w_$HB[w_$yB++],w_$bB=this.boneSlotDic[w_$VB.name],w_$uB=w_$t.getUint8(),w_$l=0;w_$l<w_$uB;w_$l++){if(w_$JB=new w_$FB,this.skinSlotDisplayDataArr.push(w_$JB),w_$JB.name=w_$HB[w_$yB++],w_$JB.attachmentName=w_$HB[w_$yB++],w_$JB.transform=new w_$YB,w_$JB.transform.scX=w_$t.getFloat32(),w_$JB.transform.skX=w_$t.getFloat32(),w_$JB.transform.skY=w_$t.getFloat32(),w_$JB.transform.scY=w_$t.getFloat32(),w_$JB.transform.x=w_$t.getFloat32(),w_$JB.transform.y=w_$t.getFloat32(),w_$VB.displayArr.push(w_$JB),w_$JB.width=w_$t.getFloat32(),w_$JB.height=w_$t.getFloat32(),w_$JB.type=w_$t.getUint8(),w_$JB.verLen=w_$t.getUint16(),0<(w_$a=w_$t.getUint16()))for(w_$JB.bones=[],w_$A=0;w_$A<w_$a;w_$A++){var w_$aB=w_$t.getUint16();w_$JB.bones.push(w_$aB)}if(0<(w_$vB=w_$t.getUint16()))for(w_$JB.uvs=[],w_$A=0;w_$A<w_$vB;w_$A++)w_$JB.uvs.push(w_$t.getFloat32());if(0<(w_$UB=w_$t.getUint16()))for(w_$JB.weights=[],w_$A=0;w_$A<w_$UB;w_$A++)w_$JB.weights.push(w_$t.getFloat32());if(0<(w_$xB=w_$t.getUint16()))for(w_$JB.triangles=[],w_$A=0;w_$A<w_$xB;w_$A++)w_$JB.triangles.push(w_$t.getUint16());if(0<(w_$wB=w_$t.getUint16()))for(w_$JB.vertices=[],w_$A=0;w_$A<w_$wB;w_$A++)w_$JB.vertices.push(w_$t.getFloat32());if(0<(w_$zB=w_$t.getUint16()))for(w_$JB.lengths=[],w_$A=0;w_$A<w_$zB;w_$A++)w_$JB.lengths.push(w_$t.getFloat32())}w_$$B.slotArr.push(w_$VB)}this.skinDic[w_$$B.name]=w_$$B,this.skinDataArray.push(w_$$B)}1==w_$t.getUint8()?(this.yReverseMatrix=new w_$NB(1,0,0,-1,0,0),w_$z&&w_$z.setTempMatrix(this.yReverseMatrix)):w_$z&&w_$z.setTempMatrix(new w_$NB),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},w_$B.getTexture=function(w_$B){var w_$h=this.subTextureDic[w_$B];return w_$h||(w_$h=this.subTextureDic[w_$B.substr(0,w_$B.length-1)]),null==w_$h?this._mainTexture:w_$h},w_$B.showSkinByIndex=function(w_$B,w_$h,w_$l){if(void 0===w_$l&&(w_$l=!0),w_$h<0&&w_$h>=this.skinDataArray.length)return!1;var w_$A,w_$n,w_$s=0,w_$X=0,w_$Z=this.skinDataArray[w_$h];if(w_$Z){for(w_$s=0,w_$X=w_$Z.slotArr.length;w_$s<w_$X;w_$s++)(w_$n=w_$Z.slotArr[w_$s])&&(w_$A=w_$B[w_$n.name])&&(w_$A.showSlotData(w_$n,w_$l),w_$l&&"undefined"!=w_$A.attachmentName&&"null"!=w_$A.attachmentName?w_$A.showDisplayByName(w_$A.attachmentName):w_$A.showDisplayByIndex(w_$A.displayIndex));return!0}return!1},w_$B.getSkinIndexByName=function(w_$B){for(var w_$h=0,w_$l=this.skinDataArray.length;w_$h<w_$l;w_$h++)if(this.skinDataArray[w_$h].name==w_$B)return w_$h;return-1},w_$B.getGrahicsDataWithCache=function(w_$B,w_$h){return this._graphicsCache[w_$B][w_$h]},w_$B.setGrahicsDataWithCache=function(w_$B,w_$h,w_$l){this._graphicsCache[w_$B][w_$h]=w_$l},w_$B.destroy=function(){var w_$B;for(var w_$h in this._isDestroyed=!0,this.subTextureDic)(w_$B=this.subTextureDic[w_$h])&&w_$B.destroy();for(w_$h in this._textureDic)(w_$B=this._textureDic[w_$h])&&w_$B.destroy();for(var w_$l=0,w_$A=this.skinSlotDisplayDataArr.length;w_$l<w_$A;w_$l++)this.skinSlotDisplayDataArr[w_$l].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete w_$n.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},w_$B.getAniNameByIndex=function(w_$B){var w_$h=this.getAnimation(w_$B);return w_$h?w_$h.name:null},w_$s(0,w_$B,"rate",function(){return this._rate},function(w_$B){this._rate=w_$B}),w_$n.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",w_$n.TEMPLET_DICTIONARY=null,w_$n}(w_$E)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(w_$B,w_$h){"use strict";for(var w_$l in Object.defineProperty(w_$h,"__esModule",{value:!0}),Laya){var w_$A=Laya[w_$l];w_$A&&w_$A.__isclass&&(w_$h[w_$l]=w_$A)}});