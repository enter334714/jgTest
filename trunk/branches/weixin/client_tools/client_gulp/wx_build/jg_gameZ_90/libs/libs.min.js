var Laya=window.Laya=function(G$N,G$q){var G$x={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(G$q,G$r){return 1==arguments.length?G$x.__presubstr.call(this,G$q):G$x.__presubstr.call(this,G$q,0<G$r?G$r:this.length+G$r)},__init:function(G$q){G$q.forEach(function(G$q){G$q.__init$&&G$q.__init$()})},__isClass:function(G$q){return G$q&&(G$q.__isclass||G$q==Object||G$q==String||G$q==Array)},__newvec:function(G$q,G$r){var G$v=[];G$v.length=G$q;for(var G$H=0;G$H<G$q;G$H++)G$v[G$H]=G$r;return G$v},__extend:function(G$q,G$r){for(var G$v in G$r)if(G$r.hasOwnProperty(G$v)){var G$H=Object.getOwnPropertyDescriptor(G$r,G$v),G$A=G$H.get,G$y=G$H.set;G$A||G$y?G$A&&G$y?Object.defineProperty(G$q,G$v,G$H):(G$A&&Object.defineProperty(G$q,G$v,G$A),G$y&&Object.defineProperty(G$q,G$v,G$y)):G$q[G$v]=G$r[G$v]}function G$R(){G$x.un(this,"constructor",G$q)}G$R.prototype=G$r.prototype,G$q.prototype=new G$R,G$x.un(G$q.prototype,"__imps",G$x.__copy({},G$r.prototype.__imps))},__copy:function(G$q,G$r){if(!G$r)return null;for(var G$v in G$q=G$q||{},G$r)G$q[G$v]=G$r[G$v];return G$q},__package:function(G$q,G$r){if(!G$x.__packages[G$q]){G$x.__packages[G$q]=!0;var G$v=G$N,G$H=G$q.split(".");if(1<G$H.length)for(var G$A=0,G$y=G$H.length-1;G$A<G$y;G$A++){var G$R=G$v[G$H[G$A]];G$v=G$R||(G$v[G$H[G$A]]={})}G$v[G$H[G$H.length-1]]||(G$v[G$H[G$H.length-1]]=G$r||{})}},__hasOwnProperty:function(G$q,G$r){return G$r=G$r||this,Object.hasOwnProperty.call(G$r,G$q)||function G$q(G$r,G$v){if(Object.hasOwnProperty.call(G$v.prototype,G$r))return!0;var G$H=G$v.prototype.__super;return null==G$H?null:G$q(G$r,G$H)}(G$q,G$r.__class)},__typeof:function(G$q,G$r){if(!G$q||!G$r)return!1;if(G$r===String)return"string"==typeof G$q;if(G$r===Number)return"number"==typeof G$q;if(G$r.__interface__)G$r=G$r.__interface__;else if("string"!=typeof G$r)return G$q instanceof G$r;return G$q.__imps&&G$q.__imps[G$r]||G$q.__class==G$r},__as:function(G$q,G$r){return this.__typeof(G$q,G$r)?G$q:null},__int:function(G$q){return G$q?parseInt(G$q):0},interface:function(G$q,G$r){G$x.__package(G$q,{});var G$v=G$x.__internals,G$H=G$v[G$q]=G$v[G$q]||{self:G$q};if(G$r){var G$A=G$r.split(",");G$H.extend=[];for(var G$y=0;G$y<G$A.length;G$y++){var G$R=G$A[G$y];G$v[G$R]=G$v[G$R]||{self:G$R},G$H.extend.push(G$v[G$R])}}var G$W=G$N,G$O=G$q.split(".");for(G$y=0;G$y<G$O.length-1;G$y++)G$W=G$W[G$O[G$y]];G$W[G$O[G$O.length-1]]={__interface__:G$q}},class:function(G$q,G$r,G$v,G$H){if(G$v&&G$x.__extend(G$q,G$v),G$r)if(G$x.__package(G$r,G$q),G$x.__classmap[G$r]=G$q,0<G$r.indexOf(".")){if(0==G$r.indexOf("laya.")){var G$A=G$r.split(".");G$H=G$H||G$A[G$A.length-1],G$x[G$H]&&console.log("Warning!,this class["+G$H+"] already exist:",G$x[G$H]),G$x[G$H]=G$q}}else"Main"==G$r?G$N.Main=G$q:"MainWX"==G$r?G$N.MainWX=G$q:(G$x[G$r]&&console.log("Error!,this class["+G$r+"] already exist:",G$x[G$r]),G$x[G$r]=G$q);var G$y=G$x.un,G$R=G$q.prototype;G$y(G$R,"hasOwnProperty",G$x.__hasOwnProperty),G$y(G$R,"__class",G$q),G$y(G$R,"__super",G$v),G$y(G$R,"__className",G$r),G$y(G$q,"__super",G$v),G$y(G$q,"__className",G$r),G$y(G$q,"__isclass",!0),G$y(G$q,"super",function(G$q){this.__super.call(G$q)})},imps:function(G$q,G$r){if(!G$r)return null;var G$A=G$q.__imps||G$x.un(G$q,"__imps",{});function G$y(G$q){var G$r,G$v;if((G$r=G$x.__internals[G$q])&&(G$A[G$q]=!0,G$v=G$r.extend))for(var G$H=0;G$H<G$v.length;G$H++)G$y(G$v[G$H].self)}for(var G$v in G$r)G$y(G$v)},superSet:function(G$q,G$r,G$v,G$H){var G$A=G$q.prototype["_$set_"+G$v];G$A&&G$A.call(G$r,G$H)},superGet:function(G$q,G$r,G$v){var G$H=G$q.prototype["_$get_"+G$v];return G$H?G$H.call(G$r):null},getset:function(G$q,G$r,G$v,G$H,G$A){G$q?(G$H&&(G$r["_$GET_"+G$v]=G$H),G$A&&(G$r["_$SET_"+G$v]=G$A)):(G$H&&G$x.un(G$r,"_$get_"+G$v,G$H),G$A&&G$x.un(G$r,"_$set_"+G$v,G$A)),G$H&&G$A?Object.defineProperty(G$r,G$v,{get:G$H,set:G$A,enumerable:!1,configurable:!0}):(G$H&&Object.defineProperty(G$r,G$v,{get:G$H,enumerable:!1,configurable:!0}),G$A&&Object.defineProperty(G$r,G$v,{set:G$A,enumerable:!1,configurable:!0}))},static:function(G$v,G$H){for(var G$A=0,G$q=G$H.length;G$A<G$q;G$A+=2)if("length"==G$H[G$A])G$v.length=G$H[G$A+1].call(G$v);else{function G$r(){var G$r=G$H[G$A],G$q=G$H[G$A+1];Object.defineProperty(G$v,G$r,{get:function(){return delete this[G$r],this[G$r]=G$q.call(this)},set:function(G$q){delete this[G$r],this[G$r]=G$q},enumerable:!0,configurable:!0})}G$r()}},un:function(G$q,G$r,G$v){return G$v||(G$v=G$q[G$r]),G$x.__propun.value=G$v,Object.defineProperty(G$q,G$r,G$x.__propun),G$v},uns:function(G$r,G$q){G$q.forEach(function(G$q){G$x.un(G$r,G$q)})}};return G$N.console=G$N.console||{log:function(){}},G$N.trace=G$N.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),G$x}(window,document);!function(G$q,G$r,G$v){G$v.un,G$v.uns,G$v.static,G$v.class,G$v.getset,G$v.__newvec}(window,document,Laya),function(G$R,G$r,G$P){G$P.un,G$P.uns;var G$O=G$P.static,G$x=G$P.class,G$D=G$P.getset;G$P.__newvec;G$P.interface("laya.runtime.IMarket"),G$P.interface("laya.filters.IFilter"),G$P.interface("laya.display.ILayout"),G$P.interface("laya.resource.IDispose"),G$P.interface("laya.runtime.IPlatform"),G$P.interface("laya.resource.IDestroy"),G$P.interface("laya.runtime.IConchNode"),G$P.interface("laya.filters.IFilterAction"),G$P.interface("laya.runtime.ICPlatformClass"),G$P.interface("laya.resource.ICreateResource"),G$P.interface("laya.runtime.IConchRenderObject"),G$P.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var G$E=function(){function G$y(){}return G$x(G$y,"laya.utils.RunDriver"),G$y.FILTER_ACTIONS=[],G$y.pixelRatio=-1,G$y._charSizeTestDiv=null,G$y.now=function(){return Date.now()},G$y.getWindow=function(){return G$R},G$y.getPixelRatio=function(){if(G$y.pixelRatio<0){var G$q=G$d.context,G$r=G$q.backingStorePixelRatio||G$q.webkitBackingStorePixelRatio||G$q.mozBackingStorePixelRatio||G$q.msBackingStorePixelRatio||G$q.oBackingStorePixelRatio||G$q.backingStorePixelRatio||1;(G$y.pixelRatio=(G$d.window.devicePixelRatio||1)/G$r)<1&&(G$y.pixelRatio=1)}return G$y.pixelRatio},G$y.getIncludeStr=function(G$q){return null},G$y.createShaderCondition=function(G$q){var G$r="(function() {return "+G$q+";})";return G$P._runScript(G$r)},G$y.fontMap=[],G$y.measureText=function(G$q,G$r){var G$v=G$y.hanzi.test(G$q);if(G$v&&G$y.fontMap[G$r])return G$y.fontMap[G$r];var G$H=G$d.context;G$H.font=G$r;var G$A=G$H.measureText(G$q);return G$A||(G$A={width:16,height:16}),G$v&&(G$y.fontMap[G$r]=G$A),G$A},G$y.getWebGLContext=function(G$q){},G$y.beginFlush=function(){},G$y.endFinish=function(){},G$y.addToAtlas=null,G$y.flashFlushImage=function(G$q){},G$y.drawToCanvas=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$eq.create("2D"),G$W=new G$o(G$v,G$H,G$R);return G$C.renders[G$r]._fun(G$q,G$W,G$A,G$y),G$R},G$y.createParticleTemplate2D=null,G$y.createGLTextur=null,G$y.createWebGLContext2D=null,G$y.changeWebGLSize=function(G$q,G$r){},G$y.createRenderSprite=function(G$q,G$r){return new G$C(G$q,G$r)},G$y.createFilterAction=function(G$q){return new G$e},G$y.createGraphics=function(){return new G$T},G$y.clear=function(G$q){G$Y._context.ctx.clear()},G$y.cancelLoadByUrl=function(G$q){},G$y.clearAtlas=function(G$q){},G$y.isAtlas=function(G$q){return!1},G$y.addTextureToAtlas=function(G$q){},G$y.getTexturePixels=function(G$q,G$r,G$v,G$H,G$A){return null},G$y.skinAniSprite=function(){return null},G$y.update3DLoop=function(){},G$O(G$y,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),G$y}(),G$H=(G$D(1,G$P,"alertGlobalError",null,function(G$q){var G$y=0;G$d.window.onerror=G$q?function(G$q,G$r,G$v,G$H,G$A){G$y++<5&&G$A&&alert(G$A.stack||G$A)}:null}),G$P.init=function(G$q,G$r,G$v){for(var G$H=[],G$A=2,G$y=arguments.length;G$A<G$y;G$A++)G$H.push(arguments[G$A]);if(!G$P._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=G$P._arrayBufferSlice),G$P._isinit=!0,G$d.__init__(),G$c.__init__(),G$T.__init__(),G$P.timer=new G$L,G$P.scaleTimer=new G$L,G$P.loader=new G$Oq,G$n.__init__(),G$A=0;for(var G$R=G$H.length;G$A<G$R;G$A++)G$H[G$A].enable&&G$H[G$A].enable();return G$j.__init__(),G$W.__init__(),G$b.__init__(),G$I.beginCheck(),G$P._currentStage=G$P.stage=new G$mq,G$P.stage.conchModel&&G$P.stage.conchModel.setRootNode(),G$P._getUrlPath(),G$P.render=new G$Y(0,0),G$P.stage.size(G$q,G$r),G$C.__init__(),G$K.__init__(),G$g.instance.__init__(G$P.stage,G$Y.canvas),G$Mq.__init__(),G$G.autoStopMusic=!0,G$J.__init__(),G$Y.canvas}},G$P._getUrlPath=function(){var G$q=G$d.window.location,G$r=G$q.pathname;G$r=G$r&&":"==G$r.charAt(2)?G$r.substring(1):G$r,G$Z.rootPath=G$Z.basePath=G$Z.getPath("file:"==G$q.protocol?G$r:G$q.protocol+"//"+G$q.host+G$q.pathname)},G$P._arrayBufferSlice=function(G$q,G$r){var G$v=new Uint8Array(this,G$q,G$r-G$q),G$H=new Uint8Array(G$v.length);return G$H.set(G$v),G$H.buffer},G$P._runScript=function(G$q){return G$d.window[G$P._evcode](G$q)},G$P.stage=null,G$P.timer=null,G$P.scaleTimer=null,G$P.loader=null,G$P.version="1.8.6",G$P.render=null,G$P._currentStage=null,G$P._isinit=!1,G$P.isDebug=!1,G$P.MiniAdpter={init:function(){G$R.navigator&&G$R.navigator.userAgent&&-1<G$R.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},G$O(G$P,["conchMarket",function(){return this.conchMarket=G$R.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=G$R.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function G$q(){}return G$x(G$q,"Config"),G$q.WebGLTextCacheCount=500,G$q.atlasEnable=!1,G$q.showCanvasMark=!1,G$q.animationInterval=50,G$q.isAntialias=!1,G$q.isAlpha=!1,G$q.premultipliedAlpha=!0,G$q.isStencil=!0,G$q.preserveDrawingBuffer=!1,G$q}()),G$N=function(){function G$N(){this._events=null}G$x(G$N,"laya.events.EventDispatcher");var G$q=G$N.prototype;return G$q.hasListener=function(G$q){return!!(this._events&&this._events[G$q])},G$q.getListener=function(G$q){return this._events?this._events[G$q]:null},G$q.event=function(G$q,G$r){if(!this._events||!this._events[G$q])return!1;var G$v=this._events[G$q];if(G$v.lock)G$v.queue||(G$v.queue=[]),G$v.queue.push(G$r);else{var G$H;for(G$v.lock=!0,G$v.cursor=G$v.head;G$v.cursor;)(G$H=G$v.cursor).recover?(G$v.head=G$v.tail=G$v.cursor=null,console.error("node is recover："+G$H.id)):(G$v.cursor=G$H.next,G$H.once&&G$N.delNode(G$v,G$H),G$H.method&&(null!=G$r?G$H.args?G$H.method.apply(G$H.caller,G$H.args.concat(G$r)):G$r instanceof Array?G$H.method.apply(G$H.caller,G$r):G$H.caller?G$H.method.call(G$H.caller,G$r):G$P.recordError("事件派发错误","node.caller:"+G$H.caller+"node.method:"+G$H.method+"data:"+G$r+"node.prev"+G$H.prev):G$H.method.apply(G$H.caller,G$H.args)),G$H.once&&G$N.recoverHandler(G$H));G$v.lock=!1,!G$v.head&&this._events&&this._events[G$q]==G$v&&delete this._events[G$q],G$v.queue&&G$v.queue.length&&this.event(G$q,G$v.queue.shift())}return!0},G$q.on=function(G$q,G$r,G$v,G$H){return this._createListener(G$q,G$r,G$v,G$H,!1)},G$q.once=function(G$q,G$r,G$v,G$H){return this._createListener(G$q,G$r,G$v,G$H,!0)},G$q._createListener=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$y&&(G$y=!0),G$y&&this.off(G$q,G$r,G$v,G$A);var G$R=G$N.createHandler(G$r||this,G$v,G$H,G$A);this._events||(this._events={});var G$W=this._events,G$O=G$W[G$q];return G$O?G$O.tail?(G$R.prev=G$O.tail,G$O.tail.next=G$R,G$O.tail=G$R):G$O.head=G$O.tail=G$R:G$W[G$q]={head:G$R,tail:G$R,cursor:null,lock:!1},this},G$q.off=function(G$q,G$r,G$v,G$H){if(void 0===G$H&&(G$H=!1),!this._events||!this._events[G$q])return this;for(var G$A=this._events[G$q],G$y=G$A.head;G$y;){if((!G$r||G$y.caller===G$r)&&G$y.method===G$v&&(!G$H||G$y.once)){G$N.delNode(G$A,G$y),G$A.cursor==G$y&&(G$A.cursor=G$y.next),G$N.recoverHandler(G$y);break}G$y=G$y.next}return this},G$q.offAll=function(G$q){var G$r=this._events;if(!G$r)return this;if(G$q)this._recoverHandlers(G$r[G$q]),delete G$r[G$q];else{for(var G$v in G$r)this._recoverHandlers(G$r[G$v]);this._events=null}return this},G$q._recoverHandlers=function(G$q){if(G$q){for(var G$r=G$q.head;G$r;){G$N.delNode(G$q,G$r);var G$v=G$r.next;G$N.recoverHandler(G$r),G$r=G$v}G$q.cursor=null}},G$q.isMouseEvent=function(G$q){return G$N.MOUSE_EVENTS[G$q]},G$N.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},G$N.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},G$N.delNode=function(G$q,G$r){G$r.prev?G$r.prev.next=G$r.next:G$q.head=G$r.next,G$r.next?G$r.next.prev=G$r.prev:G$q.tail=G$r.prev},G$N.createHandler=function(G$q,G$r,G$v,G$H){var G$A=500<G$N._freeHandler.length?G$N._freeHandler.shift():null;if(G$A)if(G$A.recover)G$A.recover=!1,G$A.caller=G$q,G$A.method=G$r,G$A.args=G$v,G$A.once=G$H;else{var G$y="";try{arguments.propertyIsEnumerable.caller}catch(G$q){G$y=G$q.stack}var G$R=G$A.caller?(G$A.caller.__proto__&&G$A.caller.__proto__.constructor&&G$A.caller.__proto__.constructor.name)+"|"+G$A.caller.__className+"|"+G$A.caller.name:"",G$W=G$A.method?G$A.method.name:"";G$P.recordError("EventDispatcher重复创建","caller="+G$R+"  method="+G$W+"  stack="+G$y),G$A={id:++G$N._nodeCount,caller:G$q,method:G$r,args:G$v,once:G$H,recover:!1}}else G$A={id:++G$N._nodeCount,caller:G$q,method:G$r,args:G$v,once:G$H,recover:!1};return G$A.prev=G$A.next=null,G$A},G$N.recoverHandler=function(G$q){if(G$q.recover){if(G$N._errorCount<5){G$N._errorCount++;var G$r="";try{arguments.propertyIsEnumerable.caller}catch(G$q){G$r=G$q.stack}var G$v=G$q.caller?(G$q.caller.__proto__&&G$q.caller.__proto__.constructor&&G$q.caller.__proto__.constructor.name)+"|"+G$q.caller.__className+"|"+G$q.caller.name:"",G$H=G$q.method?G$q.method.name:"";G$P.recordError("EventDispatcher重复回收","id="+G$q.id+"  caller="+G$v+"  method="+G$H+"  stack="+G$r)}G$q.caller=G$q.method=G$q.args=G$q.prev=null}else G$q.recover=!0,G$q.caller=G$q.method=G$q.args=G$q.prev=G$q.next=null,G$N._freeHandler&&G$N._freeHandler.length<3e3&&G$N._freeHandler.push(G$q)},G$N._freeHandler=[],G$N._nodeCount=0,G$N._errorCount=0,G$N}(),G$B=function(){function G$A(G$q,G$r,G$v,G$H){this.once=!1,void(this._id=0)===G$H&&(G$H=!1),this.setTo(G$q,G$r,G$v,G$H)}G$x(G$A,"laya.utils.Handler");var G$q=G$A.prototype;return G$q.setTo=function(G$q,G$r,G$v,G$H){return this._id=G$A._gid++,this.caller=G$q,this.method=G$r,this.args=G$v,this.once=G$H,this},G$q.run=function(){if(null==this.method)return null;var G$q=this._id,G$r=this.method.apply(this.caller,this.args);return this._id===G$q&&this.once&&this.recover(),G$r},G$q.runWith=function(G$q){if(null==this.method)return null;var G$r=this._id;if(null==G$q)var G$v=this.method.apply(this.caller,this.args);else G$v=this.args||G$q.unshift?this.args?this.method.apply(this.caller,this.args.concat(G$q)):this.method.apply(this.caller,G$q):this.method.call(this.caller,G$q);return this._id===G$r&&this.once&&this.recover(),G$v},G$q.clear=function(){return this.caller=null,this.method=null,this.args=null,this},G$q.recover=function(){0<this._id&&(this._id=0,this.clear())},G$A.create=function(G$q,G$r,G$v,G$H){return void 0===G$H&&(G$H=!0),new G$A(G$q,G$r,G$v,G$H)},G$A._gid=1,G$A}(),G$$=function(){function G$q(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}G$x(G$q,"laya.display.BitmapFont");var G$r=G$q.prototype;return G$r.loadFont=function(G$q,G$r){this._path=G$q,this._complete=G$r,G$P.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],G$B.create(this,this.onLoaded))},G$r.onLoaded=function(){this.parseFont(G$Wq.getRes(this._path),G$Wq.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},G$r.parseFont=function(G$q,G$r){if(null!=G$q&&null!=G$r){this._texture=G$r;var G$v=G$q.getElementsByTagName("info");if(!G$v[0].getAttributeNode)return this.parseFont2(G$q,G$r);this.fontSize=parseInt(G$v[0].getAttributeNode("size").nodeValue);var G$H,G$A=G$v[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(G$A[0]),parseInt(G$A[1]),parseInt(G$A[2]),parseInt(G$A[3])],G$H=G$q.getElementsByTagName("char");var G$y=0;for(G$y=0;G$y<G$H.length;G$y++){var G$R=G$H[G$y],G$W=parseInt(G$R.getAttributeNode("id").nodeValue),G$O=parseInt(G$R.getAttributeNode("xoffset").nodeValue)/1,G$N=parseInt(G$R.getAttributeNode("yoffset").nodeValue)/1,G$x=parseInt(G$R.getAttributeNode("xadvance").nodeValue)/1,G$K=new G$a;G$K.x=parseInt(G$R.getAttributeNode("x").nodeValue),G$K.y=parseInt(G$R.getAttributeNode("y").nodeValue),G$K.width=parseInt(G$R.getAttributeNode("width").nodeValue),G$K.height=parseInt(G$R.getAttributeNode("height").nodeValue);var G$T=G$xq.create(G$r,G$K.x,G$K.y,G$K.width,G$K.height,G$O,G$N);this._maxWidth=Math.max(this._maxWidth,G$x+this.letterSpacing),this._fontCharDic[G$W]=G$T,this._fontWidthMap[G$W]=G$x}}},G$r.parseFont2=function(G$q,G$r){if(null!=G$q&&null!=G$r){this._texture=G$r;var G$v=G$q.getElementsByTagName("info");this.fontSize=parseInt(G$v[0].attributes.size.nodeValue);var G$H=G$v[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(G$H[0]),parseInt(G$H[1]),parseInt(G$H[2]),parseInt(G$H[3])];var G$A=G$q.getElementsByTagName("char"),G$y=0;for(G$y=0;G$y<G$A.length;G$y++){var G$R=G$A[G$y].attributes,G$W=parseInt(G$R.id.nodeValue),G$O=parseInt(G$R.xoffset.nodeValue)/1,G$N=parseInt(G$R.yoffset.nodeValue)/1,G$x=parseInt(G$R.xadvance.nodeValue)/1,G$K=new G$a;G$K.x=parseInt(G$R.x.nodeValue),G$K.y=parseInt(G$R.y.nodeValue),G$K.width=parseInt(G$R.width.nodeValue),G$K.height=parseInt(G$R.height.nodeValue);var G$T=G$xq.create(G$r,G$K.x,G$K.y,G$K.width,G$K.height,G$O,G$N);this._maxWidth=Math.max(this._maxWidth,G$x+this.letterSpacing),this._fontCharDic[G$W]=G$T,this._fontWidthMap[G$W]=G$x}}},G$r.getCharTexture=function(G$q){return this._fontCharDic[G$q.charCodeAt(0)]},G$r.destroy=function(){if(this._texture){for(var G$q in this._fontCharDic){var G$r=this._fontCharDic[G$q];G$r&&G$r.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},G$r.setSpaceWidth=function(G$q){this._spaceWidth=G$q},G$r.getCharWidth=function(G$q){var G$r=G$q.charCodeAt(0);return this._fontWidthMap[G$r]?this._fontWidthMap[G$r]+this.letterSpacing:" "==G$q?this._spaceWidth+this.letterSpacing:0},G$r.getTextWidth=function(G$q){for(var G$r=0,G$v=0,G$H=G$q.length;G$v<G$H;G$v++)G$r+=this.getCharWidth(G$q.charAt(G$v));return G$r},G$r.getMaxWidth=function(){return this._maxWidth},G$r.getMaxHeight=function(){return this.fontSize},G$r.drawText=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R,G$W=this.getTextWidth(G$q),G$O=0;"center"===G$A&&(G$O=(G$y-G$W)/2),"right"===G$A&&(G$O=G$y-G$W);for(var G$N=0,G$x=0,G$K=G$q.length;G$x<G$K;G$x++)(G$R=this.getCharTexture(G$q.charAt(G$x)))&&(G$r.graphics.drawTexture(G$R,G$v+G$N+G$O,G$H),G$N+=this.getCharWidth(G$q.charAt(G$x)))},G$q}(),G$W=function(){function G$v(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=G$v._TF_EMPTY}G$x(G$v,"laya.display.css.Style");var G$q=G$v.prototype;return G$q.getTransform=function(){return this._tf},G$q.setTransform=function(G$q){this._tf="none"!==G$q&&G$q?G$q:G$v._TF_EMPTY},G$q.setTranslateX=function(G$q){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.translateX=G$q},G$q.setTranslateY=function(G$q){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.translateY=G$q},G$q.setScaleX=function(G$q){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.scaleX=G$q},G$q.setScale=function(G$q,G$r){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.scaleX=G$q,this._tf.scaleY=G$r},G$q.setScaleY=function(G$q){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.scaleY=G$q},G$q.setRotate=function(G$q){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.rotate=G$q},G$q.setSkewX=function(G$q){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.skewX=G$q},G$q.setSkewY=function(G$q){this._tf===G$v._TF_EMPTY&&(this._tf=new G$A),this._tf.skewY=G$q},G$q.destroy=function(){this.scrollRect=null},G$q.render=function(G$q,G$r,G$v,G$H){},G$q.getCSSStyle=function(){return G$rq.EMPTY},G$q._enableLayout=function(){return!1},G$D(0,G$q,"scaleX",function(){return this._tf.scaleX},function(G$q){this.setScaleX(G$q)}),G$D(0,G$q,"transform",function(){return this.getTransform()},function(G$q){this.setTransform(G$q)}),G$D(0,G$q,"translateX",function(){return this._tf.translateX},function(G$q){this.setTranslateX(G$q)}),G$D(0,G$q,"translateY",function(){return this._tf.translateY},function(G$q){this.setTranslateY(G$q)}),G$D(0,G$q,"scaleY",function(){return this._tf.scaleY},function(G$q){this.setScaleY(G$q)}),G$D(0,G$q,"block",function(){return 0!=(1&this._type)}),G$D(0,G$q,"skewY",function(){return this._tf.skewY},function(G$q){this.setSkewY(G$q)}),G$D(0,G$q,"rotate",function(){return this._tf.rotate},function(G$q){this.setRotate(G$q)}),G$D(0,G$q,"skewX",function(){return this._tf.skewX},function(G$q){this.setSkewX(G$q)}),G$D(0,G$q,"paddingLeft",function(){return 0}),G$D(0,G$q,"paddingTop",function(){return 0}),G$D(0,G$q,"absolute",function(){return!0}),G$v.__init__=function(){G$v._TF_EMPTY=new G$A,G$v.EMPTY=new G$v},G$v.EMPTY=null,G$v._TF_EMPTY=null,G$v}(),G$j=function(){function G$r(G$q){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=G$F.create(G$r.defaultColor),this.family=G$r.defaultFamily,this.stroke=G$r._STROKE,this.size=G$r.defaultSize,G$q&&G$q!==G$r.EMPTY&&G$q.copyTo(this)}G$x(G$r,"laya.display.css.Font");var G$q=G$r.prototype;return G$q.set=function(G$q){this._text=null;for(var G$r=G$q.split(" "),G$v=0,G$H=G$r.length;G$v<G$H;G$v++){var G$A=G$r[G$v];switch(G$A){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<G$A.indexOf("px")&&(this.size=parseInt(G$A),this.family=G$r[G$v+1],G$v++)}},G$q.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},G$q.copyTo=function(G$q){G$q._type=this._type,G$q._text=this._text,G$q._weight=this._weight,G$q._color=this._color,G$q.family=this.family,G$q.stroke=this.stroke!=G$r._STROKE?this.stroke.slice():G$r._STROKE,G$q.indent=this.indent,G$q.size=this.size},G$D(0,G$q,"password",function(){return 0!=(1024&this._type)},function(G$q){G$q?this._type|=1024:this._type&=-1025}),G$D(0,G$q,"color",function(){return this._color.strColor},function(G$q){this._color=G$F.create(G$q)}),G$D(0,G$q,"italic",function(){return 0!=(512&this._type)},function(G$q){G$q?this._type|=512:this._type&=-513}),G$D(0,G$q,"bold",function(){return 0!=(2048&this._type)},function(G$q){G$q?this._type|=2048:this._type&=-2049}),G$D(0,G$q,"weight",function(){return""+this._weight},function(G$q){var G$r=0;switch(G$q){case"normal":break;case"bold":this.bold=!0,G$r=700;break;case"bolder":G$r=800;break;case"lighter":G$r=100;break;default:G$r=parseInt(G$q)}this._weight=G$r,this._text=null}),G$D(0,G$q,"decoration",function(){return this._decoration?this._decoration.value:null},function(G$q){var G$r=G$q.split(" ");switch(this._decoration||(this._decoration={}),G$r[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=G$r[0]}G$r[1]&&(this._decoration.color=G$F.create(G$r)),this._decoration.value=G$q}),G$r.__init__=function(){G$r.EMPTY=new G$r(null)},G$r.EMPTY=null,G$r.defaultColor="#000000",G$r.defaultSize=12,G$r.defaultFamily="Arial",G$r.defaultFont="12px Arial",G$r._STROKE=[0,"#000000"],G$r._ITALIC=512,G$r._PASSWORD=1024,G$r._BOLD=2048,G$r}(),G$A=function(){function G$q(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return G$x(G$q,"laya.display.css.TransformInfo"),G$q}(),G$T=function(){function G$K(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,G$Y.isConchNode){this._nativeObj=new G$R._conchGraphics,this.id=this._nativeObj.conchID}}G$x(G$K,"laya.display.Graphics");var G$q=G$K.prototype;return G$q.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},G$q.clear=function(G$q){void 0===G$q&&(G$q=!1);var G$r=0,G$v=0;if(G$q){var G$H=this._one;if(this._cmds){for(G$v=this._cmds.length,G$r=0;G$r<G$v;G$r++)!(G$H=this._cmds[G$r])||G$H.callee!==G$Y._context._drawTexture&&G$H.callee!==G$Y._context._drawTextureWithTransform||(G$H[0]=null,G$K._cache.push(G$H));this._cmds.length=0}else G$H&&(!G$H||G$H.callee!==G$Y._context._drawTexture&&G$H.callee!==G$Y._context._drawTextureWithTransform||(G$H[0]=null,G$K._cache.push(G$H)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(G$r=0,G$v=this._vectorgraphArray.length;G$r<G$v;G$r++)G$h.getInstance().deleteShape(this._vectorgraphArray[G$r]);this._vectorgraphArray.length=0}},G$q._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},G$q._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new G$v,this._graphicBounds._graphics=this)},G$q._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},G$q._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},G$q.getBounds=function(G$q){return void 0===G$q&&(G$q=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(G$q)},G$q.getBoundPoints=function(G$q){return void 0===G$q&&(G$q=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(G$q)},G$q._addCmd=function(G$q){this._cmds=this._cmds||[],G$q.callee=G$q.shift(),this._cmds.push(G$q)},G$q.setFilters=function(G$q){this._saveToCmd(G$Y._context._setFilters,G$q)},G$q.drawTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){if(void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),void 0===G$R&&(G$R=1),!G$q||G$R<.01)return null;G$H||(G$H=G$q.sourceWidth),G$A||(G$A=G$q.sourceHeight),G$R=G$R<0?0:1<G$R?1:G$R;var G$W,G$O=!G$Y.isWebGL&&(G$d.onFirefox||G$d.onEdge||G$d.onIE||G$d.onSafari)?.5:0,G$N=G$H/G$q.sourceWidth,G$x=G$A/G$q.sourceHeight;return G$H=G$q.width*G$N,G$A=G$q.height*G$x,G$q.loaded&&(G$H<=0||G$A<=0)?null:(G$r+=G$q.offsetX*G$N,G$v+=G$q.offsetY*G$x,this._sp&&(this._sp._renderType|=512),G$r-=G$O,G$v-=G$O,G$H+=2*G$O,G$A+=2*G$O,G$K._cache.length?((G$W=G$K._cache.pop())[0]=G$q,G$W[1]=G$r,G$W[2]=G$v,G$W[3]=G$H,G$W[4]=G$A,G$W[5]=G$y,G$W[6]=G$R):G$W=[G$q,G$r,G$v,G$H,G$A,G$y,G$R],G$W.callee=G$y||1!=G$R?G$Y._context._drawTextureWithTransform:G$Y._context._drawTexture,null!=this._one||G$y||1!=G$R?this._saveToCmd(G$W.callee,G$W):(this._one=G$W,this._render=this._renderOneImg),G$q.loaded||G$q.once("loaded",this,this._textureLoaded,[G$q,G$W]),this._repaint(),G$W)},G$q.cleanByTexture=function(G$q,G$r,G$v,G$H,G$A){if(void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),!G$q)return this.clear();if(this._one&&this._render===this._renderOneImg){G$H||(G$H=G$q.sourceWidth),G$A||(G$A=G$q.sourceHeight);var G$y=G$H/G$q.sourceWidth,G$R=G$A/G$q.sourceHeight;G$H=G$q.width*G$y,G$A=G$q.height*G$R,G$r+=G$q.offsetX*G$y,G$v+=G$q.offsetY*G$R,this._one[0]=G$q,this._one[1]=G$r,this._one[2]=G$v,this._one[3]=G$H,this._one[4]=G$A,this._repaint()}else this.clear(),G$q&&this.drawTexture(G$q,G$r,G$v,G$H,G$A)},G$q.drawTextures=function(G$q,G$r){G$q&&this._saveToCmd(G$Y._context._drawTextures,[G$q,G$r])},G$q.fillTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){if(void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),void 0===G$y&&(G$y="repeat"),G$q){var G$W=[G$q,G$r,G$v,G$H,G$A,G$y,G$R||G$V.EMPTY,{}];G$q.loaded||G$q.once("loaded",this,this._textureLoaded,[G$q,G$W]),this._saveToCmd(G$Y._context._fillTexture,G$W)}},G$q._textureLoaded=function(G$q,G$r){G$r[3]=G$r[3]||G$q.width,G$r[4]=G$r[4]||G$q.height,this._repaint()},G$q.fillCircle=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$v.bitmap.enableMerageInAtlas=!1;var G$W=new Float32Array(2*(G$R+1)),G$O=new Float32Array(2*(G$R+1)),G$N=new Uint16Array(3*G$R),G$x=2*Math.PI/G$R,G$K=0;G$W[0]=G$H,G$W[1]=G$A,G$O[0]=G$H/G$v.width,G$O[1]=G$A/G$v.height;for(var G$T=2,G$j=0;G$j<G$R;G$j++){var G$D=G$y*Math.cos(G$K)+G$H,G$g=G$y*Math.sin(G$K)+G$A;G$W[G$T]=G$D,G$W[G$T+1]=G$g,G$O[G$T]=G$D/G$v.width,G$O[G$T+1]=G$g/G$v.height,G$K+=G$x,G$T+=2}for(G$j=G$T=0;G$j<G$R;G$j++)G$N[G$T++]=0,G$N[G$T++]=G$j+1,G$N[G$T++]=G$R+1<=G$j+2?1:G$j+2;this.drawTriangles(G$v,G$q,G$r,G$W,G$O,G$N)},G$q.drawTriangles=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){void 0===G$W&&(G$W=1),this._saveToCmd(G$Y._context.drawTriangles,[G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N])},G$q._saveToCmd=function(G$q,G$r){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=G$r,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(G$r)),G$r.callee=G$q,this._repaint(),G$r},G$q.clipRect=function(G$q,G$r,G$v,G$H){this._saveToCmd(G$Y._context._clipRect,[G$q,G$r,G$v,G$H])},G$q.fillText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){void 0===G$R&&(G$R=0),this._saveToCmd(G$Y._context._fillText,[G$q,G$r,G$v,G$H||G$j.defaultFont,G$A,G$y])},G$q.fillBorderText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){this._saveToCmd(G$Y._context._fillBorderText,[G$q,G$r,G$v,G$H||G$j.defaultFont,G$A,G$y,G$R,G$W])},G$q.strokeText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._saveToCmd(G$Y._context._strokeText,[G$q,G$r,G$v,G$H||G$j.defaultFont,G$A,G$y,G$R])},G$q.alpha=function(G$q){G$q=G$q<0?0:1<G$q?1:G$q,this._saveToCmd(G$Y._context._alpha,[G$q])},G$q.setAlpha=function(G$q){G$q=G$q<0?0:1<G$q?1:G$q,this._saveToCmd(G$Y._context._setAlpha,[G$q])},G$q.transform=function(G$q,G$r,G$v){void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),this._saveToCmd(G$Y._context._transform,[G$q,G$r,G$v])},G$q.rotate=function(G$q,G$r,G$v){void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),this._saveToCmd(G$Y._context._rotate,[G$q,G$r,G$v])},G$q.scale=function(G$q,G$r,G$v,G$H){void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0),this._saveToCmd(G$Y._context._scale,[G$q,G$r,G$v,G$H])},G$q.translate=function(G$q,G$r){this._saveToCmd(G$Y._context._translate,[G$q,G$r])},G$q.save=function(){this._saveToCmd(G$Y._context._save,[])},G$q.restore=function(){this._saveToCmd(G$Y._context._restore,[])},G$q.replaceText=function(G$q){this._repaint();var G$r=this._cmds;if(G$r){for(var G$v=G$r.length-1;-1<G$v;G$v--)if(this._isTextCmd(G$r[G$v].callee))return G$r[G$v][0].toUpperCase?G$r[G$v][0]=G$q:G$r[G$v][0].setText(G$q),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=G$q:this._one[0].setText(G$q),!0;return!1},G$q._isTextCmd=function(G$q){return G$q===G$Y._context._fillText||G$q===G$Y._context._fillBorderText||G$q===G$Y._context._strokeText},G$q.replaceTextColor=function(G$q){this._repaint();var G$r=this._cmds;if(G$r)for(var G$v=G$r.length-1;-1<G$v;G$v--)this._isTextCmd(G$r[G$v].callee)&&(G$r[G$v][4]=G$q,G$r[G$v][0].toUpperCase||(G$r[G$v][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=G$q,this._one[0].toUpperCase||(this._one[0].changed=!0))},G$q.loadImage=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=this;void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0);var G$W=G$Wq.getRes(G$q);function G$O(G$q){G$q&&(G$R.drawTexture(G$q,G$r,G$v,G$H,G$A),null!=G$y&&G$y.call(G$R._sp,G$q))}G$W?G$O(G$W):G$P.loader.load(G$q,G$B.create(null,G$O),null,"image")},G$q._renderEmpty=function(G$q,G$r,G$v,G$H){},G$q._renderAll=function(G$q,G$r,G$v,G$H){for(var G$A,G$y=this._cmds,G$R=0,G$W=G$y.length;G$R<G$W;G$R++)(G$A=G$y[G$R]).callee.call(G$r,G$v,G$H,G$A)},G$q._renderOne=function(G$q,G$r,G$v,G$H){this._one.callee.call(G$r,G$v,G$H,this._one)},G$q._renderOneImg=function(G$q,G$r,G$v,G$H){this._one.callee.call(G$r,G$v,G$H,this._one),2305!==G$q._renderType&&(G$q._renderType|=1)},G$q.drawLine=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$y&&(G$y=1);var G$R=0;G$Y.isWebGL&&(G$R=G$h.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$R));var G$W=G$y%2==0?0:.5,G$O=[G$q+G$W,G$r+G$W,G$v+G$W,G$H+G$W,G$A,G$y,G$R];this._saveToCmd(G$Y._context._drawLine,G$O)},G$q.drawLines=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=1);var G$y=0;if(G$v&&!(G$v.length<4)){G$Y.isWebGL&&(G$y=G$h.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$y));var G$R=G$A%2==0?0:.5,G$W=[G$q+G$R,G$r+G$R,G$v,G$H,G$A,G$y];this._saveToCmd(G$Y._context._drawLines,G$W)}},G$q.drawCurves=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=1);var G$y=[G$q,G$r,G$v,G$H,G$A];this._saveToCmd(G$Y._context._drawCurves,G$y)},G$q.drawRect=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){void 0===G$R&&(G$R=1);var G$W=G$y?G$R/2:0,G$O=G$y?G$R:0,G$N=[G$q+G$W,G$r+G$W,G$v-G$O,G$H-G$O,G$A,G$y,G$R];this._saveToCmd(G$Y._context._drawRect,G$N)},G$q.drawCircle=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$y&&(G$y=1);var G$R=G$A?G$y/2:0,G$W=0;G$Y.isWebGL&&(G$W=G$h.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$W));var G$O=[G$q,G$r,G$v-G$R,G$H,G$A,G$y,G$W];this._saveToCmd(G$Y._context._drawCircle,G$O)},G$q.drawPie=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){void 0===G$W&&(G$W=1);var G$O=G$R?G$W/2:0,G$N=G$R?G$W:0,G$x=0;G$Y.isWebGL&&(G$x=G$h.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$x));var G$K=[G$q+G$O,G$r+G$O,G$v-G$N,G$H,G$A,G$y,G$R,G$W,G$x];G$K[3]=G$w.toRadian(G$H),G$K[4]=G$w.toRadian(G$A),this._saveToCmd(G$Y._context._drawPie,G$K)},G$q.drawPoly=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$y&&(G$y=1);var G$R=0,G$W=!1;G$Y.isWebGL&&(G$R=G$h.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(G$R),G$W=!(6<G$v.length));var G$O=G$A?G$y%2==0?0:.5:0,G$N=[G$q+G$O,G$r+G$O,G$v,G$H,G$A,G$y,G$R,G$W];this._saveToCmd(G$Y._context._drawPoly,G$N)},G$q.drawPath=function(G$q,G$r,G$v,G$H,G$A){var G$y=[G$q,G$r,G$v,G$H,G$A];this._saveToCmd(G$Y._context._drawPath,G$y)},G$D(0,G$q,"cmds",function(){return this._cmds},function(G$q){this._sp&&(this._sp._renderType|=512),this._cmds=G$q,this._render=this._renderAll,this._repaint()}),G$K.__init__=function(){if(G$Y.isConchNode){for(var G$q=laya.display.Graphics.prototype,G$r=G$d.window.ConchGraphics.prototype,G$v=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],G$H=0,G$A=G$v.length;G$H<=G$A;G$H++){var G$y=G$v[G$H];G$q[G$y]=G$r[G$y]}G$q._saveToCmd=null,G$r.drawImageS&&(G$q.drawTextures=function(G$q,G$r){if(G$q&&G$q.loaded&&G$q.bitmap&&G$q.source){var G$v=G$q.uv,G$H=G$q.bitmap.width,G$A=G$q.bitmap.height;this.drawImageS(G$q.bitmap.source,G$v[0]*G$H,G$v[1]*G$A,(G$v[2]-G$v[0])*G$H,(G$v[5]-G$v[3])*G$A,G$q.offsetX,G$q.offsetY,G$q.width,G$q.height,G$r)}}),G$q.drawTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){if(void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),void 0===G$R&&(G$R=1),G$q)if(G$q.loaded){if(G$q.loaded&&G$q.bitmap&&G$q.source&&(G$H||(G$H=G$q.sourceWidth),G$A||(G$A=G$q.sourceHeight),G$R=G$R<0?0:1<G$R?1:G$R,G$H=G$H-G$q.sourceWidth+G$q.width,G$A=G$A-G$q.sourceHeight+G$q.height,!(G$H<=0||G$A<=0))){G$r+=G$q.offsetX,G$v+=G$q.offsetY;var G$W=G$q.uv,G$O=G$q.bitmap.width,G$N=G$q.bitmap.height;G$W[4]<G$W[0]&&G$W[5]<G$W[1]?this.drawImageM(G$q.bitmap.source,G$W[4]*G$O,G$W[5]*G$N,(G$W[0]-G$W[4])*G$O,(G$W[1]-G$W[5])*G$N,G$r,G$v,G$H,G$A,G$y,G$R):this.drawImageM(G$q.bitmap.source,G$W[0]*G$O,G$W[1]*G$N,(G$W[2]-G$W[0])*G$O,(G$W[5]-G$W[3])*G$N,G$r,G$v,G$H,G$A,G$y,G$R),this._repaint()}}else G$q.once("loaded",this,function(){this.drawTexture(G$q,G$r,G$v,G$H,G$A,G$y)})},G$q.fillTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){if(void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),void 0===G$y&&(G$y="repeat"),G$q&&G$q.loaded){var G$W,G$O=G$Y._context.ctx,G$N=G$q.bitmap.width,G$x=G$q.bitmap.height,G$K=G$q.uv;G$W=G$q.uv!=G$xq.DEF_UV?G$O.createPattern(G$q.bitmap.source,G$y,G$K[0]*G$N,G$K[1]*G$x,(G$K[2]-G$K[0])*G$N,(G$K[5]-G$K[3])*G$x):G$O.createPattern(G$q.bitmap.source,G$y);var G$T=0,G$j=0;G$R&&(G$r+=G$R.x%G$q.width,G$v+=G$R.y%G$q.height,G$T-=G$R.x%G$q.width,G$j-=G$R.y%G$q.height),this._fillImage(G$W,G$r,G$v,G$T,G$j,G$H,G$A)}}}},G$K._cache=[],G$K}(),G$v=function(){function G$e(){this._cacheBoundsType=!1}G$x(G$e,"laya.display.GraphicsBounds");var G$q=G$e.prototype;return G$q.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},G$q.reset=function(){this._temp&&(this._temp.length=0)},G$q.getBounds=function(G$q){return void 0===G$q&&(G$q=!1),(!this._bounds||!this._temp||this._temp.length<1||G$q!=this._cacheBoundsType)&&(this._bounds=G$a._getWrapRec(this.getBoundPoints(G$q),this._bounds)),this._cacheBoundsType=G$q,this._bounds},G$q.getBoundPoints=function(G$q){return void 0===G$q&&(G$q=!1),(!this._temp||this._temp.length<1||G$q!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(G$q)),this._cacheBoundsType=G$q,this._rstBoundPoints=G$w.copyArray(this._rstBoundPoints,this._temp)},G$q._getCmdPoints=function(G$q){void 0===G$q&&(G$q=!1);var G$r,G$v,G$H=G$Y._context,G$A=this._graphics.cmds;if((G$r=this._temp||(this._temp=[])).length=0,G$A||null==this._graphics._one||(G$e._tempCmds.length=0,G$e._tempCmds.push(this._graphics._one),G$A=G$e._tempCmds),!G$A)return G$r;(G$v=G$e._tempMatrixArrays).length=0;var G$y=G$e._initMatrix;G$y.identity();for(var G$R,G$W,G$O=G$e._tempMatrix,G$N=NaN,G$x=NaN,G$K=NaN,G$T=NaN,G$j=NaN,G$D=NaN,G$g=0,G$X=G$A.length;G$g<G$X;G$g++)if((G$R=G$A[G$g]).callee)switch(G$R.callee){case G$H._save:case 7:G$v.push(G$y),G$y=G$y.clone();break;case G$H._restore:case 8:G$y=G$v.pop();break;case G$H._scale:case 5:G$O.identity(),G$O.translate(-G$R[2],-G$R[3]),G$O.scale(G$R[0],G$R[1]),G$O.translate(G$R[2],G$R[3]),this._switchMatrix(G$y,G$O);break;case G$H._rotate:case 3:G$O.identity(),G$O.translate(-G$R[1],-G$R[2]),G$O.rotate(G$R[0]),G$O.translate(G$R[1],G$R[2]),this._switchMatrix(G$y,G$O);break;case G$H._translate:case 6:G$O.identity(),G$O.translate(G$R[0],G$R[1]),this._switchMatrix(G$y,G$O);break;case G$H._transform:case 4:G$O.identity(),G$O.translate(-G$R[1],-G$R[2]),G$O.concat(G$R[0]),G$O.translate(G$R[1],G$R[2]),this._switchMatrix(G$y,G$O);break;case 16:case 24:G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[0],G$R[1],G$R[2],G$R[3]),G$y);break;case 17:G$y.copyTo(G$O),G$O.concat(G$R[4]),G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[0],G$R[1],G$R[2],G$R[3]),G$O);break;case G$H._drawTexture:G$W=G$R[0],G$q?G$R[3]&&G$R[4]?G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1],G$R[2],G$R[3],G$R[4]),G$y):(G$W=G$R[0],G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1],G$R[2],G$W.width,G$W.height),G$y)):(G$N=(G$R[3]||G$W.sourceWidth)/G$W.width,G$x=(G$R[4]||G$W.sourceHeight)/G$W.height,G$K=G$N*G$W.sourceWidth,G$T=G$x*G$W.sourceHeight,G$j=0<G$W.offsetX?G$W.offsetX:0,G$D=0<G$W.offsetY?G$W.offsetY:0,G$j*=G$N,G$D*=G$x,G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1]-G$j,G$R[2]-G$D,G$K,G$T),G$y));break;case G$H._fillTexture:G$R[3]&&G$R[4]?G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1],G$R[2],G$R[3],G$R[4]),G$y):(G$W=G$R[0],G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1],G$R[2],G$W.width,G$W.height),G$y));break;case G$H._drawTextureWithTransform:var G$m;G$m=G$R[5]?(G$y.copyTo(G$O),G$O.concat(G$R[5]),G$O):G$y,G$q?G$R[3]&&G$R[4]?G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1],G$R[2],G$R[3],G$R[4]),G$m):(G$W=G$R[0],G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1],G$R[2],G$W.width,G$W.height),G$m)):(G$W=G$R[0],G$N=(G$R[3]||G$W.sourceWidth)/G$W.width,G$x=(G$R[4]||G$W.sourceHeight)/G$W.height,G$K=G$N*G$W.sourceWidth,G$T=G$x*G$W.sourceHeight,G$j=0<G$W.offsetX?G$W.offsetX:0,G$D=0<G$W.offsetY?G$W.offsetY:0,G$j*=G$N,G$D*=G$x,G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[1]-G$j,G$R[2]-G$D,G$K,G$T),G$m));break;case G$H._drawRect:case 13:G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[0],G$R[1],G$R[2],G$R[3]),G$y);break;case G$H._drawCircle:case G$H._fillCircle:case 14:G$e._addPointArrToRst(G$r,G$a._getBoundPointS(G$R[0]-G$R[2],G$R[1]-G$R[2],G$R[2]+G$R[2],G$R[2]+G$R[2]),G$y);break;case G$H._drawLine:case 20:G$e._tempPoints.length=0;var G$B;G$B=.5*G$R[5],G$R[0]==G$R[2]?G$e._tempPoints.push(G$R[0]+G$B,G$R[1],G$R[2]+G$B,G$R[3],G$R[0]-G$B,G$R[1],G$R[2]-G$B,G$R[3]):G$R[1]==G$R[3]?G$e._tempPoints.push(G$R[0],G$R[1]+G$B,G$R[2],G$R[3]+G$B,G$R[0],G$R[1]-G$B,G$R[2],G$R[3]-G$B):G$e._tempPoints.push(G$R[0],G$R[1],G$R[2],G$R[3]),G$e._addPointArrToRst(G$r,G$e._tempPoints,G$y);break;case G$H._drawCurves:case 22:G$e._addPointArrToRst(G$r,G$p.I.getBezierPoints(G$R[2]),G$y,G$R[0],G$R[1]);break;case G$H._drawPoly:case G$H._drawLines:case 18:G$e._addPointArrToRst(G$r,G$R[2],G$y,G$R[0],G$R[1]);break;case G$H._drawPath:case 19:G$e._addPointArrToRst(G$r,this._getPathPoints(G$R[2]),G$y,G$R[0],G$R[1]);break;case G$H._drawPie:case 15:G$e._addPointArrToRst(G$r,this._getPiePoints(G$R[0],G$R[1],G$R[2],G$R[3],G$R[4]),G$y)}return 200<G$r.length?G$r=G$w.copyArray(G$r,G$a._getWrapRec(G$r)._getBoundPoints()):8<G$r.length&&(G$r=G$M.scanPList(G$r)),G$r},G$q._switchMatrix=function(G$q,G$r){G$r.concat(G$q),G$r.copyTo(G$q)},G$q._getPiePoints=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$e._tempPoints;G$e._tempPoints.length=0,G$y.push(G$q,G$r);var G$R=(G$A-G$H)%(2*Math.PI)/10,G$W=NaN,G$O=G$H;for(G$W=0;G$W<=10;G$W++)G$y.push(G$q+G$v*Math.cos(G$O),G$r+G$v*Math.sin(G$O)),G$O+=G$R;return G$y},G$q._getPathPoints=function(G$q){var G$r,G$v,G$H=0,G$A=G$e._tempPoints;for(G$A.length=0,G$r=G$q.length,G$H=0;G$H<G$r;G$H++)1<(G$v=G$q[G$H]).length&&(G$A.push(G$v[1],G$v[2]),3<G$v.length&&G$A.push(G$v[3],G$v[4]));return G$A},G$e._addPointArrToRst=function(G$q,G$r,G$v,G$H,G$A){void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0);var G$y,G$R=0;for(G$y=G$r.length,G$R=0;G$R<G$y;G$R+=2)G$e._addPointToRst(G$q,G$r[G$R]+G$H,G$r[G$R+1]+G$A,G$v)},G$e._addPointToRst=function(G$q,G$r,G$v,G$H){var G$A=G$V.TEMP;G$A.setTo(G$r||0,G$v||0),G$H.transformPoint(G$A),G$q.push(G$A.x,G$A.y)},G$e._tempPoints=[],G$e._tempMatrixArrays=[],G$e._tempCmds=[],G$O(G$e,["_tempMatrix",function(){return this._tempMatrix=new G$Q},"_initMatrix",function(){return this._initMatrix=new G$Q}]),G$e}(),G$y=function(){function G$q(){}G$x(G$q,"laya.events.Event");var G$r=G$q.prototype;return G$r.setTo=function(G$q,G$r,G$v){return this.type=G$q,this.currentTarget=G$r,this.target=G$v,this},G$r.stopPropagation=function(){this._stoped=!0},G$D(0,G$r,"stageY",function(){return G$P.stage.mouseY}),G$D(0,G$r,"charCode",function(){return this.nativeEvent.charCode}),G$D(0,G$r,"touches",function(){var G$q=this.nativeEvent.touches;if(G$q)for(var G$r=G$P.stage,G$v=0,G$H=G$q.length;G$v<G$H;G$v++){var G$A=G$q[G$v],G$y=G$V.TEMP;G$y.setTo(G$A.clientX,G$A.clientY),G$r._canvasTransform.invertTransformPoint(G$y),G$r.transform.invertTransformPoint(G$y),G$A.stageX=G$y.x,G$A.stageY=G$y.y}return G$q}),G$D(0,G$r,"keyLocation",function(){return this.nativeEvent.keyLocation}),G$D(0,G$r,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),G$D(0,G$r,"altKey",function(){return this.nativeEvent.altKey}),G$D(0,G$r,"shiftKey",function(){return this.nativeEvent.shiftKey}),G$D(0,G$r,"stageX",function(){return G$P.stage.mouseX}),G$q.EMPTY=new G$q,G$q.MOUSE_DOWN="mousedown",G$q.MOUSE_UP="mouseup",G$q.CLICK="click",G$q.RIGHT_MOUSE_DOWN="rightmousedown",G$q.RIGHT_MOUSE_UP="rightmouseup",G$q.RIGHT_CLICK="rightclick",G$q.MOUSE_MOVE="mousemove",G$q.MOUSE_OVER="mouseover",G$q.MOUSE_OUT="mouseout",G$q.MOUSE_WHEEL="mousewheel",G$q.ROLL_OVER="mouseover",G$q.ROLL_OUT="mouseout",G$q.DOUBLE_CLICK="doubleclick",G$q.CHANGE="change",G$q.CHANGED="changed",G$q.RESIZE="resize",G$q.ADDED="added",G$q.REMOVED="removed",G$q.DISPLAY="display",G$q.UNDISPLAY="undisplay",G$q.ERROR="error",G$q.COMPLETE="complete",G$q.LOADED="loaded",G$q.INITED="inited",G$q.PROGRESS="progress",G$q.INPUT="input",G$q.RENDER="render",G$q.OPEN="open",G$q.MESSAGE="message",G$q.CLOSE="close",G$q.KEY_DOWN="keydown",G$q.KEY_PRESS="keypress",G$q.KEY_UP="keyup",G$q.FRAME="enterframe",G$q.DRAG_START="dragstart",G$q.DRAG_MOVE="dragmove",G$q.DRAG_END="dragend",G$q.ENTER="enter",G$q.SELECT="select",G$q.BLUR="blur",G$q.FOCUS="focus",G$q.VISIBILITY_CHANGE="visibilitychange",G$q.FOCUS_CHANGE="focuschange",G$q.PLAYED="played",G$q.PAUSED="paused",G$q.STOPPED="stopped",G$q.START="start",G$q.END="end",G$q.ENABLE_CHANGED="enablechanged",G$q.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",G$q.COMPONENT_ADDED="componentadded",G$q.COMPONENT_REMOVED="componentremoved",G$q.LAYER_CHANGED="layerchanged",G$q.HIERARCHY_LOADED="hierarchyloaded",G$q.RECOVERED="recovered",G$q.RELEASED="released",G$q.LINK="link",G$q.LABEL="label",G$q.FULL_SCREEN_CHANGE="fullscreenchange",G$q.DEVICE_LOST="devicelost",G$q.MESH_CHANGED="meshchanged",G$q.MATERIAL_CHANGED="materialchanged",G$q.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",G$q.ANIMATION_CHANGED="animationchanged",G$q.TRIGGER_ENTER="triggerenter",G$q.TRIGGER_STAY="triggerstay",G$q.TRIGGER_EXIT="triggerexit",G$q.TRAIL_FILTER_CHANGE="trailfilterchange",G$q.DOMINO_FILTER_CHANGE="dominofilterchange",G$q}(),G$K=(function(){function G$q(){}G$x(G$q,"laya.events.Keyboard"),G$q.NUMBER_0=48,G$q.NUMBER_1=49,G$q.NUMBER_2=50,G$q.NUMBER_3=51,G$q.NUMBER_4=52,G$q.NUMBER_5=53,G$q.NUMBER_6=54,G$q.NUMBER_7=55,G$q.NUMBER_8=56,G$q.NUMBER_9=57,G$q.A=65,G$q.B=66,G$q.C=67,G$q.D=68,G$q.E=69,G$q.F=70,G$q.G=71,G$q.H=72,G$q.I=73,G$q.J=74,G$q.K=75,G$q.L=76,G$q.M=77,G$q.N=78,G$q.O=79,G$q.P=80,G$q.Q=81,G$q.R=82,G$q.S=83,G$q.T=84,G$q.U=85,G$q.V=86,G$q.W=87,G$q.X=88,G$q.Y=89,G$q.Z=90,G$q.F1=112,G$q.F2=113,G$q.F3=114,G$q.F4=115,G$q.F5=116,G$q.F6=117,G$q.F7=118,G$q.F8=119,G$q.F9=120,G$q.F10=121,G$q.F11=122,G$q.F12=123,G$q.F13=124,G$q.F14=125,G$q.F15=126,G$q.NUMPAD=21,G$q.NUMPAD_0=96,G$q.NUMPAD_1=97,G$q.NUMPAD_2=98,G$q.NUMPAD_3=99,G$q.NUMPAD_4=100,G$q.NUMPAD_5=101,G$q.NUMPAD_6=102,G$q.NUMPAD_7=103,G$q.NUMPAD_8=104,G$q.NUMPAD_9=105,G$q.NUMPAD_ADD=107,G$q.NUMPAD_DECIMAL=110,G$q.NUMPAD_DIVIDE=111,G$q.NUMPAD_ENTER=108,G$q.NUMPAD_MULTIPLY=106,G$q.NUMPAD_SUBTRACT=109,G$q.SEMICOLON=186,G$q.EQUAL=187,G$q.COMMA=188,G$q.MINUS=189,G$q.PERIOD=190,G$q.SLASH=191,G$q.BACKQUOTE=192,G$q.LEFTBRACKET=219,G$q.BACKSLASH=220,G$q.RIGHTBRACKET=221,G$q.QUOTE=222,G$q.ALTERNATE=18,G$q.BACKSPACE=8,G$q.CAPS_LOCK=20,G$q.COMMAND=15,G$q.CONTROL=17,G$q.DELETE=46,G$q.ENTER=13,G$q.ESCAPE=27,G$q.PAGE_UP=33,G$q.PAGE_DOWN=34,G$q.END=35,G$q.HOME=36,G$q.LEFT=37,G$q.UP=38,G$q.RIGHT=39,G$q.DOWN=40,G$q.SHIFT=16,G$q.SPACE=32,G$q.TAB=9,G$q.INSERT=45}(),function(){function G$A(){}return G$x(G$A,"laya.events.KeyBoardManager"),G$A.__init__=function(){G$A._addEvent("keydown"),G$A._addEvent("keypress"),G$A._addEvent("keyup")},G$A._addEvent=function(G$r){G$d.document.addEventListener(G$r,function(G$q){laya.events.KeyBoardManager._dispatch(G$q,G$r)},!0)},G$A._dispatch=function(G$q,G$r){if(G$A.enabled){G$A._event._stoped=!1,G$A._event.nativeEvent=G$q,G$A._event.keyCode=G$q.keyCode||G$q.which||G$q.charCode,"keydown"===G$r?G$A._pressKeys[G$A._event.keyCode]=!0:"keyup"===G$r&&(G$A._pressKeys[G$A._event.keyCode]=null);for(var G$v=G$P.stage.focus&&null!=G$P.stage.focus.event&&G$P.stage.focus.displayedInStage?G$P.stage.focus:G$P.stage,G$H=G$v;G$H;)G$H.event(G$r,G$A._event.setTo(G$r,G$H,G$v)),G$H=G$H.parent}},G$A.hasKeyDown=function(G$q){return G$A._pressKeys[G$q]},G$A._pressKeys={},G$A.enabled=!0,G$O(G$A,["_event",function(){return this._event=new G$y}]),G$A}()),G$g=(function(){function G$q(){}G$x(G$q,"laya.events.KeyLocation"),G$q.STANDARD=0,G$q.LEFT=1,G$q.RIGHT=2,G$q.NUM_PAD=3}(),function(){function G$N(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=G$d.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new G$y,this._matrix=new G$Q,this._point=new G$V,this._rect=new G$a,this._prePoint=new G$V,this._curTouchID=NaN}G$x(G$N,"laya.events.MouseManager");var G$q=G$N.prototype;return G$q.__init__=function(G$q,G$r){var G$v=this;this._stage=G$q;var G$H=this,G$A=this._eventList;G$r.oncontextmenu=function(G$q){if(G$N.enabled)return!1},G$r.addEventListener("mousedown",function(G$q){G$N.enabled&&(G$d.onIE||G$q.preventDefault(),G$A.push(G$q),G$H.mouseDownTime=G$d.now())}),G$r.addEventListener("mouseup",function(G$q){G$N.enabled&&(G$q.preventDefault(),G$A.push(G$q),G$H.mouseDownTime=-G$d.now())},!0),G$r.addEventListener("mousemove",function(G$q){if(G$N.enabled){G$q.preventDefault();var G$r=G$d.now();if(G$r-G$H._lastMoveTimer<10)return;G$H._lastMoveTimer=G$r,G$A.push(G$q)}},!0),G$r.addEventListener("mouseout",function(G$q){G$N.enabled&&G$A.push(G$q)}),G$r.addEventListener("mouseover",function(G$q){G$N.enabled&&G$A.push(G$q)}),G$r.addEventListener("touchstart",function(G$q){G$N.enabled&&(G$A.push(G$q),G$N._isFirstTouch||G$Mq.isInputting||G$q.preventDefault(),G$H.mouseDownTime=G$d.now())}),G$r.addEventListener("touchend",function(G$q){G$N.enabled?(G$N._isFirstTouch||G$Mq.isInputting||G$q.preventDefault(),G$N._isFirstTouch=!1,G$A.push(G$q),G$H.mouseDownTime=-G$d.now()):G$v._curTouchID=NaN},!0),G$r.addEventListener("touchmove",function(G$q){G$N.enabled&&(G$q.preventDefault(),G$A.push(G$q))},!0),G$r.addEventListener("touchcancel",function(G$q){G$N.enabled?(G$q.preventDefault(),G$A.push(G$q)):G$v._curTouchID=NaN},!0),G$r.addEventListener("mousewheel",function(G$q){G$N.enabled&&G$A.push(G$q)}),G$r.addEventListener("DOMMouseScroll",function(G$q){G$N.enabled&&G$A.push(G$q)})},G$q.initEvent=function(G$q,G$r){var G$v;this._event._stoped=!1,this._event.nativeEvent=G$r||G$q,this._target=null,this._point.setTo(G$q.pageX||G$q.clientX,G$q.pageY||G$q.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=G$q.identifier||0,this._tTouchID=this._event.touchId,(G$v=G$X.I._event)._stoped=!1,G$v.nativeEvent=this._event.nativeEvent,G$v.touchId=this._event.touchId},G$q.checkMouseWheel=function(G$q){this._event.delta=G$q.wheelDelta?.025*G$q.wheelDelta:-G$q.detail;for(var G$r=G$X.I.getLastOvers(),G$v=0,G$H=G$r.length;G$v<G$H;G$v++){var G$A=G$r[G$v];G$A.event("mousewheel",this._event.setTo("mousewheel",G$A,this._target))}},G$q.onMouseMove=function(G$q){G$X.I.onMouseMove(G$q,this._tTouchID)},G$q.onMouseDown=function(G$q){if(G$Mq.isInputting&&G$P.stage.focus&&G$P.stage.focus.focus&&!G$P.stage.focus.contains(this._target)){var G$r=G$P.stage.focus._tf||G$P.stage.focus,G$v=G$q._tf||G$q;G$v instanceof laya.display.Input&&G$v.multiline==G$r.multiline?G$r._focusOut():G$r.focus=!1}G$X.I.onMouseDown(G$q,this._tTouchID,this._isLeftMouse)},G$q.onMouseUp=function(G$q){G$X.I.onMouseUp(G$q,this._tTouchID,this._isLeftMouse)},G$q.check=function(G$q,G$r,G$v,G$H){this._point.setTo(G$r,G$v),G$q.fromParentPoint(this._point),G$r=this._point.x,G$v=this._point.y;var G$A=G$q.scrollRect;if(G$A&&(this._rect.setTo(G$A.x,G$A.y,G$A.width,G$A.height),!this._rect.contains(G$r,G$v)))return!1;if(!this.disableMouseEvent){if(G$q.hitTestPrior&&!G$q.mouseThrough&&!this.hitTest(G$q,G$r,G$v))return!1;for(var G$y=G$q._childs.length-1;-1<G$y;G$y--){var G$R=G$q._childs[G$y];if(!G$R.destroyed&&G$R.mouseEnabled&&G$R.visible&&this.check(G$R,G$r,G$v,G$H))return!0}}var G$W=!(!G$q.hitTestPrior||G$q.mouseThrough||this.disableMouseEvent)||this.hitTest(G$q,G$r,G$v);return G$W?(this._target=G$q,G$H.call(this,G$q)):G$H===this.onMouseUp&&G$q===this._stage&&(this._target=this._stage,G$H.call(this,this._target)),G$W},G$q.hitTest=function(G$q,G$r,G$v){var G$H=!1;if(G$q.scrollRect&&(G$r-=G$q.scrollRect.x,G$v-=G$q.scrollRect.y),G$q.hitArea instanceof laya.utils.HitArea)return G$q.hitArea.isHit(G$r,G$v);if(0<G$q.width&&0<G$q.height||G$q.mouseThrough||G$q.hitArea)if(G$q.mouseThrough)G$H=G$q.getGraphicBounds().contains(G$r,G$v);else{var G$A=this._rect;G$q.hitArea?G$A=G$q.hitArea:G$A.setTo(0,0,G$q.width,G$q.height),G$H=G$A.contains(G$r,G$v)}return G$H},G$q.runEvent=function(){var G$q=this._eventList.length;if(G$q){this.mouseEventTime=G$d.now();var G$r,G$v=0,G$H=0,G$A=0;try{for(;G$v<G$q;){var G$y=this._eventList[G$v];switch("mousemove"!==G$y.type&&(this._prePoint.x=this._prePoint.y=-1e6),G$y.type){case"mousedown":this._touchIDs[0]=this._id++,G$N._isTouchRespond?G$N._isTouchRespond=!1:(this._isLeftMouse=0===G$y.button,this.initEvent(G$y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===G$y.button,this.initEvent(G$y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-G$y.clientX)+Math.abs(this._prePoint.y-G$y.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=G$y.clientX,this._prePoint.y=G$y.clientY,this.initEvent(G$y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":G$N._isTouchRespond=!0,this._isLeftMouse=!0;var G$R=G$y.changedTouches;for(G$H=0,G$A=G$R.length;G$H<G$A;G$H++)G$r=G$R[G$H],(G$N.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=G$r.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[G$r.identifier]=this._id++,this.initEvent(G$r,G$y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":G$N._isTouchRespond=!0,this._isLeftMouse=!0;var G$W=G$y.changedTouches;for(G$H=0,G$A=G$W.length;G$H<G$A;G$H++)if(G$r=G$W[G$H],G$N.multiTouchEnabled||G$r.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(G$r,G$y);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var G$O=G$y.changedTouches;for(G$H=0,G$A=G$O.length;G$H<G$A;G$H++)G$r=G$O[G$H],(G$N.multiTouchEnabled||G$r.identifier==this._curTouchID)&&(this.initEvent(G$r,G$y),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(G$y);break;case"mouseout":G$X.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}G$v++}}catch(G$q){throw this._eventList.length=0,G$q}this._eventList.length=0}},G$N.enabled=!0,G$N.multiTouchEnabled=!0,G$N._isTouchRespond=!1,G$N._isFirstTouch=!0,G$O(G$N,["instance",function(){return this.instance=new G$N}]),G$N}()),G$X=function(){function G$D(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new G$y}G$x(G$D,"laya.events.TouchManager");var G$q=G$D.prototype;return G$q._clearTempArrs=function(){G$D._oldArr.length=0,G$D._newArr.length=0,G$D._tEleArr.length=0},G$q.getTouchFromArr=function(G$q,G$r){var G$v,G$H,G$A=0;for(G$v=G$r.length,G$A=0;G$A<G$v;G$A++)if((G$H=G$r[G$A]).id==G$q)return G$H;return null},G$q.removeTouchFromArr=function(G$q,G$r){var G$v=0;for(G$v=G$r.length-1;0<=G$v;G$v--)G$r[G$v].id==G$q&&G$r.splice(G$v,1)},G$q.createTouchO=function(G$q,G$r){var G$v;return(G$v=G$S.getItem("TouchData")||{}).id=G$r,G$v.tar=G$q,G$v},G$q.onMouseDown=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R;(void 0===G$v&&(G$v=!1),this.enable)&&(G$H=this.getTouchFromArr(G$r,this.preOvers),G$y=this.getEles(G$q,null,G$D._tEleArr),G$H?G$H.tar=G$q:(G$A=this.createTouchO(G$q,G$r),this.preOvers.push(G$A)),G$d.onMobile&&this.sendEvents(G$y,"mouseover",G$r),G$R=G$v?this.preDowns:this.preRightDowns,(G$H=this.getTouchFromArr(G$r,G$R))?G$H.tar=G$q:(G$A=this.createTouchO(G$q,G$r),G$R.push(G$A)),this.sendEvents(G$y,G$v?"mousedown":"rightmousedown",G$r),this._clearTempArrs())},G$q.sendEvents=function(G$q,G$r,G$v){void 0===G$v&&(G$v=0);var G$H,G$A,G$y,G$R=0;for(G$H=G$q.length,this._event._stoped=!1,G$A=G$q[0],G$R=0;G$R<G$H;G$R++){if((G$y=G$q[G$R]).destroyed)return;if(G$y.event(G$r,this._event.setTo(G$r,G$y,G$A)),this._event._stoped)break}},G$q.getEles=function(G$q,G$r,G$v){for(G$v?G$v.length=0:G$v=[];G$q&&G$q!=G$r;)G$v.push(G$q),G$q=G$q.parent;return G$v},G$q.checkMouseOutAndOverOfMove=function(G$q,G$r,G$v){if(void 0===G$v&&(G$v=0),G$r!=G$q){var G$H,G$A,G$y=0,G$R=0;if(G$r.contains(G$q))G$A=this.getEles(G$q,G$r,G$D._tEleArr),this.sendEvents(G$A,"mouseover",G$v);else if(G$q.contains(G$r))G$A=this.getEles(G$r,G$q,G$D._tEleArr),this.sendEvents(G$A,"mouseout",G$v);else{var G$W,G$O;(G$A=G$D._tEleArr).length=0,G$W=this.getEles(G$r,null,G$D._oldArr),G$O=this.getEles(G$q,null,G$D._newArr),G$R=G$W.length;var G$N=0;for(G$y=0;G$y<G$R;G$y++){if(G$H=G$W[G$y],0<=(G$N=G$O.indexOf(G$H))){G$O.splice(G$N,G$O.length-G$N);break}G$A.push(G$H)}0<G$A.length&&this.sendEvents(G$A,"mouseout",G$v),0<G$O.length&&this.sendEvents(G$O,"mouseover",G$v)}}},G$q.onMouseMove=function(G$q,G$r){var G$v,G$H;this.enable&&((G$v=this.getTouchFromArr(G$r,this.preOvers))?(this.checkMouseOutAndOverOfMove(G$q,G$v.tar),G$v.tar=G$q,G$H=this.getEles(G$q,null,G$D._tEleArr)):(G$H=this.getEles(G$q,null,G$D._tEleArr),this.sendEvents(G$H,"mouseover",G$r),this.preOvers.push(this.createTouchO(G$q,G$r))),this.sendEvents(G$H,"mousemove",G$r),this._clearTempArrs())},G$q.getLastOvers=function(){return(G$D._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,G$D._tEleArr):(G$D._tEleArr.push(G$P.stage),G$D._tEleArr)},G$q.stageMouseOut=function(){var G$q;G$q=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(G$q,"mouseout",0)},G$q.onMouseUp=function(G$q,G$r,G$v){if(void 0===G$v&&(G$v=!1),this.enable){var G$H,G$A,G$y,G$R,G$W,G$O,G$N=0,G$x=0,G$K=G$d.onMobile;if(G$A=this.getEles(G$q,null,G$D._tEleArr),this.sendEvents(G$A,G$v?"mouseup":"rightmouseup",G$r),G$O=G$v?this.preDowns:this.preRightDowns,G$H=this.getTouchFromArr(G$r,G$O)){var G$T,G$j=G$d.now();if(G$T=G$j-this._lastClickTime<300,this._lastClickTime=G$j,G$q==G$H.tar)G$W=G$A;else for(G$y=this.getEles(G$H.tar,null,G$D._oldArr),(G$W=G$D._newArr).length=0,G$x=G$y.length,G$N=0;G$N<G$x;G$N++)G$R=G$y[G$N],0<=G$A.indexOf(G$R)&&G$W.push(G$R);0<G$W.length&&this.sendEvents(G$W,G$v?"click":"rightclick",G$r),G$v&&G$T&&this.sendEvents(G$W,"doubleclick",G$r),this.removeTouchFromArr(G$r,G$O),G$H.tar=null,G$S.recover("TouchData",G$H)}else;(G$H=this.getTouchFromArr(G$r,this.preOvers))&&G$K&&((G$W=this.getEles(G$H.tar,null,G$W))&&0<G$W.length&&this.sendEvents(G$W,"mouseout",G$r),this.removeTouchFromArr(G$r,this.preOvers),G$H.tar=null,G$S.recover("TouchData",G$H)),this._clearTempArrs()}},G$D._oldArr=[],G$D._newArr=[],G$D._tEleArr=[],G$O(G$D,["I",function(){return this.I=new G$D}]),G$D}(),G$m=function(){function G$q(){this._action=null}G$x(G$q,"laya.filters.Filter");var G$r=G$q.prototype;return G$P.imps(G$r,{"laya.filters.IFilter":!0}),G$r.callNative=function(G$q){},G$D(0,G$r,"type",function(){return-1}),G$D(0,G$r,"action",function(){return this._action}),G$q.BLUR=16,G$q.COLOR=32,G$q.GLOW=8,G$q._filterStart=null,G$q._filterEnd=null,G$q._EndTarget=null,G$q._recycleScope=null,G$q._filter=null,G$q._useSrc=null,G$q._endSrc=null,G$q._useOut=null,G$q._endOut=null,G$q}(),G$e=function(){function G$q(){this.data=null}G$x(G$q,"laya.filters.ColorFilterAction");var G$r=G$q.prototype;return G$P.imps(G$r,{"laya.filters.IFilterAction":!0}),G$r.apply=function(G$q){var G$r=G$q.ctx.ctx,G$v=G$q.ctx.ctx.canvas;if(0==G$v.width||0==G$v.height)return G$v;for(var G$H,G$A=G$r.getImageData(0,0,G$v.width,G$v.height),G$y=G$A.data,G$R=0,G$W=G$y.length;G$R<G$W;G$R+=4)G$H=this.getColor(G$y[G$R],G$y[G$R+1],G$y[G$R+2],G$y[G$R+3]),0!=G$y[G$R+3]&&(G$y[G$R]=G$H[0],G$y[G$R+1]=G$H[1],G$y[G$R+2]=G$H[2],G$y[G$R+3]=G$H[3]);return G$r.putImageData(G$A,0,0),G$q},G$r.getColor=function(G$q,G$r,G$v,G$H){var G$A=[];if(this.data._mat&&this.data._alpha){var G$y=this.data._mat,G$R=this.data._alpha;G$A[0]=G$y[0]*G$q+G$y[1]*G$r+G$y[2]*G$v+G$y[3]*G$H+G$R[0],G$A[1]=G$y[4]*G$q+G$y[5]*G$r+G$y[6]*G$v+G$y[7]*G$H+G$R[1],G$A[2]=G$y[8]*G$q+G$y[9]*G$r+G$y[10]*G$v+G$y[11]*G$H+G$R[2],G$A[3]=G$y[12]*G$q+G$y[13]*G$r+G$y[14]*G$v+G$y[15]*G$H+G$R[3]}return G$A},G$q}(),G$p=(function(){function G$q(){}G$x(G$q,"laya.maths.Arith"),G$q.formatR=function(G$q){return G$q>Math.PI&&(G$q-=2*Math.PI),G$q<-Math.PI&&(G$q+=2*Math.PI),G$q},G$q.isPOT=function(G$q,G$r){return 0<G$q&&0==(G$q&G$q-1)&&0<G$r&&0==(G$r&G$r-1)},G$q.setMatToArray=function(G$q,G$r){G$q.a,G$q.b,G$q.c,G$q.d,G$q.tx,G$q.ty,G$r[0]=G$q.a,G$r[1]=G$q.b,G$r[4]=G$q.c,G$r[5]=G$q.d,G$r[12]=G$q.tx,G$r[13]=G$q.ty}}(),function(){function G$q(){this._controlPoints=[new G$V,new G$V,new G$V],this._calFun=this.getPoint2}G$x(G$q,"laya.maths.Bezier");var G$r=G$q.prototype;return G$r._switchPoint=function(G$q,G$r){var G$v=this._controlPoints.shift();G$v.setTo(G$q,G$r),this._controlPoints.push(G$v)},G$r.getPoint2=function(G$q,G$r){var G$v=this._controlPoints[0],G$H=this._controlPoints[1],G$A=this._controlPoints[2],G$y=Math.pow(1-G$q,2)*G$v.x+2*G$q*(1-G$q)*G$H.x+Math.pow(G$q,2)*G$A.x,G$R=Math.pow(1-G$q,2)*G$v.y+2*G$q*(1-G$q)*G$H.y+Math.pow(G$q,2)*G$A.y;G$r.push(G$y,G$R)},G$r.getPoint3=function(G$q,G$r){var G$v=this._controlPoints[0],G$H=this._controlPoints[1],G$A=this._controlPoints[2],G$y=this._controlPoints[3],G$R=Math.pow(1-G$q,3)*G$v.x+3*G$H.x*G$q*(1-G$q)*(1-G$q)+3*G$A.x*G$q*G$q*(1-G$q)+G$y.x*Math.pow(G$q,3),G$W=Math.pow(1-G$q,3)*G$v.y+3*G$H.y*G$q*(1-G$q)*(1-G$q)+3*G$A.y*G$q*G$q*(1-G$q)+G$y.y*Math.pow(G$q,3);G$r.push(G$R,G$W)},G$r.insertPoints=function(G$q,G$r){var G$v,G$H=NaN;for(G$v=1/(G$q=0<G$q?G$q:5),G$H=0;G$H<=1;G$H+=G$v)this._calFun(G$H,G$r)},G$r.getBezierPoints=function(G$q,G$r,G$v){void 0===G$r&&(G$r=5),void 0===G$v&&(G$v=2);var G$H,G$A,G$y=0;if((G$H=G$q.length)<2*(G$v+1))return[];switch(G$A=[],G$v){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=G$v;)this._controlPoints.push(new G$V);for(G$y=0;G$y<2*G$v;G$y+=2)this._switchPoint(G$q[G$y],G$q[G$y+1]);for(G$y=2*G$v;G$y<G$H;G$y+=2)this._switchPoint(G$q[G$y],G$q[G$y+1]),G$y/2%G$v==0&&this.insertPoints(G$r,G$A);return G$A},G$O(G$q,["I",function(){return this.I=new G$q}]),G$q}()),G$M=function(){function G$N(){}return G$x(G$N,"laya.maths.GrahamScan"),G$N.multiply=function(G$q,G$r,G$v){return(G$q.x-G$v.x)*(G$r.y-G$v.y)-(G$r.x-G$v.x)*(G$q.y-G$v.y)},G$N.dis=function(G$q,G$r){return(G$q.x-G$r.x)*(G$q.x-G$r.x)+(G$q.y-G$r.y)*(G$q.y-G$r.y)},G$N._getPoints=function(G$q,G$r,G$v){for(void 0===G$r&&(G$r=!1),G$N._mPointList||(G$N._mPointList=[]);G$N._mPointList.length<G$q;)G$N._mPointList.push(new G$V);return G$v||(G$v=[]),G$v.length=0,G$r?G$N.getFrom(G$v,G$N._mPointList,G$q):G$N.getFromR(G$v,G$N._mPointList,G$q),G$v},G$N.getFrom=function(G$q,G$r,G$v){var G$H=0;for(G$H=0;G$H<G$v;G$H++)G$q.push(G$r[G$H]);return G$q},G$N.getFromR=function(G$q,G$r,G$v){var G$H=0;for(G$H=0;G$H<G$v;G$H++)G$q.push(G$r.pop());return G$q},G$N.pListToPointList=function(G$q,G$r){void 0===G$r&&(G$r=!1);var G$v=0,G$H=G$q.length/2,G$A=G$N._getPoints(G$H,G$r,G$N._tempPointList);for(G$v=0;G$v<G$H;G$v++)G$A[G$v].setTo(G$q[G$v+G$v],G$q[G$v+G$v+1]);return G$A},G$N.pointListToPlist=function(G$q){var G$r,G$v=0,G$H=G$q.length,G$A=G$N._temPList;for(G$v=G$A.length=0;G$v<G$H;G$v++)G$r=G$q[G$v],G$A.push(G$r.x,G$r.y);return G$A},G$N.scanPList=function(G$q){return G$w.copyArray(G$q,G$N.pointListToPlist(G$N.scan(G$N.pListToPointList(G$q,!0))))},G$N.scan=function(G$q){var G$r,G$v,G$H,G$A=0,G$y=0,G$R=0,G$W=G$q.length,G$O={};for((G$v=G$N._temArr).length=0,G$A=(G$W=G$q.length)-1;0<=G$A;G$A--)G$H=(G$r=G$q[G$A]).x+"_"+G$r.y,G$O.hasOwnProperty(G$H)||(G$O[G$H]=!0,G$v.push(G$r));for(G$W=G$v.length,G$w.copyArray(G$q,G$v),G$A=1;G$A<G$W;G$A++)(G$q[G$A].y<G$q[G$R].y||G$q[G$A].y==G$q[G$R].y&&G$q[G$A].x<G$q[G$R].x)&&(G$R=G$A);for(G$r=G$q[0],G$q[0]=G$q[G$R],G$q[G$R]=G$r,G$A=1;G$A<G$W-1;G$A++){for(G$y=(G$R=G$A)+1;G$y<G$W;G$y++)(0<G$N.multiply(G$q[G$y],G$q[G$R],G$q[0])||0==G$N.multiply(G$q[G$y],G$q[G$R],G$q[0])&&G$N.dis(G$q[0],G$q[G$y])<G$N.dis(G$q[0],G$q[G$R]))&&(G$R=G$y);G$r=G$q[G$A],G$q[G$A]=G$q[G$R],G$q[G$R]=G$r}if((G$v=G$N._temArr).length=0,G$q.length<3)return G$w.copyArray(G$v,G$q);for(G$v.push(G$q[0],G$q[1],G$q[2]),G$A=3;G$A<G$W;G$A++){for(;2<=G$v.length&&0<=G$N.multiply(G$q[G$A],G$v[G$v.length-1],G$v[G$v.length-2]);)G$v.pop();G$q[G$A]&&G$v.push(G$q[G$A])}return G$v},G$N._mPointList=null,G$N._tempPointList=[],G$N._temPList=[],G$N._temArr=[],G$N}(),G$z=function(){function G$A(){}return G$x(G$A,"laya.maths.MathUtil"),G$A.subtractVector3=function(G$q,G$r,G$v){G$v[0]=G$q[0]-G$r[0],G$v[1]=G$q[1]-G$r[1],G$v[2]=G$q[2]-G$r[2]},G$A.lerp=function(G$q,G$r,G$v){return G$q*(1-G$v)+G$r*G$v},G$A.scaleVector3=function(G$q,G$r,G$v){G$v[0]=G$q[0]*G$r,G$v[1]=G$q[1]*G$r,G$v[2]=G$q[2]*G$r},G$A.lerpVector3=function(G$q,G$r,G$v,G$H){var G$A=G$q[0],G$y=G$q[1],G$R=G$q[2];G$H[0]=G$A+G$v*(G$r[0]-G$A),G$H[1]=G$y+G$v*(G$r[1]-G$y),G$H[2]=G$R+G$v*(G$r[2]-G$R)},G$A.lerpVector4=function(G$q,G$r,G$v,G$H){var G$A=G$q[0],G$y=G$q[1],G$R=G$q[2],G$W=G$q[3];G$H[0]=G$A+G$v*(G$r[0]-G$A),G$H[1]=G$y+G$v*(G$r[1]-G$y),G$H[2]=G$R+G$v*(G$r[2]-G$R),G$H[3]=G$W+G$v*(G$r[3]-G$W)},G$A.slerpQuaternionArray=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){var G$W,G$O,G$N,G$x,G$K,G$T=G$q[G$r+0],G$j=G$q[G$r+1],G$D=G$q[G$r+2],G$g=G$q[G$r+3],G$X=G$v[G$H+0],G$m=G$v[G$H+1],G$B=G$v[G$H+2],G$e=G$v[G$H+3];return(G$O=G$T*G$X+G$j*G$m+G$D*G$B+G$g*G$e)<0&&(G$O=-G$O,G$X=-G$X,G$m=-G$m,G$B=-G$B,G$e=-G$e),G$K=1e-6<1-G$O?(G$W=Math.acos(G$O),G$N=Math.sin(G$W),G$x=Math.sin((1-G$A)*G$W)/G$N,Math.sin(G$A*G$W)/G$N):(G$x=1-G$A,G$A),G$y[G$R+0]=G$x*G$T+G$K*G$X,G$y[G$R+1]=G$x*G$j+G$K*G$m,G$y[G$R+2]=G$x*G$D+G$K*G$B,G$y[G$R+3]=G$x*G$g+G$K*G$e,G$y},G$A.getRotation=function(G$q,G$r,G$v,G$H){return Math.atan2(G$H-G$r,G$v-G$q)/Math.PI*180},G$A.sortBigFirst=function(G$q,G$r){return G$q==G$r?0:G$q<G$r?1:-1},G$A.sortSmallFirst=function(G$q,G$r){return G$q==G$r?0:G$q<G$r?-1:1},G$A.sortNumBigFirst=function(G$q,G$r){return parseFloat(G$r)-parseFloat(G$q)},G$A.sortNumSmallFirst=function(G$q,G$r){return parseFloat(G$q)-parseFloat(G$r)},G$A.sortByKey=function(G$v,G$q,G$r){var G$H;return void 0===G$q&&(G$q=!1),void 0===G$r&&(G$r=!0),G$H=G$q?G$r?G$A.sortNumBigFirst:G$A.sortBigFirst:G$r?G$A.sortNumSmallFirst:G$A.sortSmallFirst,function(G$q,G$r){return G$H(G$q[G$v],G$r[G$v])}},G$A}(),G$Q=function(){function G$v(G$q,G$r,G$v,G$H,G$A,G$y){this.inPool=!1,this.bTransform=!1,void 0===G$q&&(G$q=1),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=1),void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=0),this.a=G$q,this.b=G$r,this.c=G$v,this.d=G$H,this.tx=G$A,this.ty=G$y,this._checkTransform()}G$x(G$v,"laya.maths.Matrix");var G$q=G$v.prototype;return G$q.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},G$q._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},G$q.setTranslate=function(G$q,G$r){return this.tx=G$q,this.ty=G$r,this},G$q.translate=function(G$q,G$r){return this.tx+=G$q,this.ty+=G$r,this},G$q.scale=function(G$q,G$r){this.a*=G$q,this.d*=G$r,this.c*=G$q,this.b*=G$r,this.tx*=G$q,this.ty*=G$r,this.bTransform=!0},G$q.rotate=function(G$q){var G$r=Math.cos(G$q),G$v=Math.sin(G$q),G$H=this.a,G$A=this.c,G$y=this.tx;this.a=G$H*G$r-this.b*G$v,this.b=G$H*G$v+this.b*G$r,this.c=G$A*G$r-this.d*G$v,this.d=G$A*G$v+this.d*G$r,this.tx=G$y*G$r-this.ty*G$v,this.ty=G$y*G$v+this.ty*G$r,this.bTransform=!0},G$q.skew=function(G$q,G$r){var G$v=Math.tan(G$q),G$H=Math.tan(G$r),G$A=this.a,G$y=this.b;return this.a+=G$H*this.c,this.b+=G$H*this.d,this.c+=G$v*G$A,this.d+=G$v*G$y,this},G$q.invertTransformPoint=function(G$q){var G$r=this.a,G$v=this.b,G$H=this.c,G$A=this.d,G$y=this.tx,G$R=G$r*G$A-G$v*G$H,G$W=G$A/G$R,G$O=-G$v/G$R,G$N=-G$H/G$R,G$x=G$r/G$R,G$K=(G$H*this.ty-G$A*G$y)/G$R,G$T=-(G$r*this.ty-G$v*G$y)/G$R;return G$q.setTo(G$W*G$q.x+G$N*G$q.y+G$K,G$O*G$q.x+G$x*G$q.y+G$T)},G$q.transformPoint=function(G$q){return G$q.setTo(this.a*G$q.x+this.c*G$q.y+this.tx,this.b*G$q.x+this.d*G$q.y+this.ty)},G$q.transformPointN=function(G$q){return G$q.setTo(this.a*G$q.x+this.c*G$q.y,this.b*G$q.x+this.d*G$q.y)},G$q.transformPointArray=function(G$q,G$r){for(var G$v=G$q.length,G$H=0;G$H<G$v;G$H+=2){var G$A=G$q[G$H],G$y=G$q[G$H+1];G$r[G$H]=this.a*G$A+this.c*G$y+this.tx,G$r[G$H+1]=this.b*G$A+this.d*G$y+this.ty}return G$r},G$q.transformPointArrayScale=function(G$q,G$r){for(var G$v=G$q.length,G$H=0;G$H<G$v;G$H+=2){var G$A=G$q[G$H],G$y=G$q[G$H+1];G$r[G$H]=this.a*G$A+this.c*G$y,G$r[G$H+1]=this.b*G$A+this.d*G$y}return G$r},G$q.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},G$q.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},G$q.invert=function(){var G$q=this.a,G$r=this.b,G$v=this.c,G$H=this.d,G$A=this.tx,G$y=G$q*G$H-G$r*G$v;return this.a=G$H/G$y,this.b=-G$r/G$y,this.c=-G$v/G$y,this.d=G$q/G$y,this.tx=(G$v*this.ty-G$H*G$A)/G$y,this.ty=-(G$q*this.ty-G$r*G$A)/G$y,this},G$q.setTo=function(G$q,G$r,G$v,G$H,G$A,G$y){return this.a=G$q,this.b=G$r,this.c=G$v,this.d=G$H,this.tx=G$A,this.ty=G$y,this},G$q.concat=function(G$q){var G$r=this.a,G$v=this.c,G$H=this.tx;return this.a=G$r*G$q.a+this.b*G$q.c,this.b=G$r*G$q.b+this.b*G$q.d,this.c=G$v*G$q.a+this.d*G$q.c,this.d=G$v*G$q.b+this.d*G$q.d,this.tx=G$H*G$q.a+this.ty*G$q.c+G$q.tx,this.ty=G$H*G$q.b+this.ty*G$q.d+G$q.ty,this},G$q.scaleEx=function(G$q,G$r){var G$v=this.a,G$H=this.b,G$A=this.c,G$y=this.d;0!==G$H||0!==G$A?(this.a=G$q*G$v,this.b=G$q*G$H,this.c=G$r*G$A):(this.a=G$q*G$v,this.b=0*G$y,this.c=0*G$v),this.d=G$r*G$y,this.bTransform=!0},G$q.rotateEx=function(G$q){var G$r=Math.cos(G$q),G$v=Math.sin(G$q),G$H=this.a,G$A=this.b,G$y=this.c,G$R=this.d;0!==G$A||0!==G$y?(this.a=G$r*G$H+G$v*G$y,this.b=G$r*G$A+G$v*G$R,this.c=-G$v*G$H+G$r*G$y,this.d=-G$v*G$A+G$r*G$R):(this.a=G$r*G$H,this.b=G$v*G$R,this.c=-G$v*G$H,this.d=G$r*G$R),this.bTransform=!0},G$q.clone=function(){var G$q=G$v.create();return G$q.a=this.a,G$q.b=this.b,G$q.c=this.c,G$q.d=this.d,G$q.tx=this.tx,G$q.ty=this.ty,G$q.bTransform=this.bTransform,G$q},G$q.copyTo=function(G$q){return G$q.a=this.a,G$q.b=this.b,G$q.c=this.c,G$q.d=this.d,G$q.tx=this.tx,G$q.ty=this.ty,G$q.bTransform=this.bTransform,G$q},G$q.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},G$q.destroy=function(){if(!this.inPool){var G$q=G$v._cache;this.inPool=!0,G$q._length||(G$q._length=0),(G$q[G$q._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},G$v.mul=function(G$q,G$r,G$v){var G$H=G$q.a,G$A=G$q.b,G$y=G$q.c,G$R=G$q.d,G$W=G$q.tx,G$O=G$q.ty,G$N=G$r.a,G$x=G$r.b,G$K=G$r.c,G$T=G$r.d,G$j=G$r.tx,G$D=G$r.ty;return 0!==G$x||0!==G$K?(G$v.a=G$H*G$N+G$A*G$K,G$v.b=G$H*G$x+G$A*G$T,G$v.c=G$y*G$N+G$R*G$K,G$v.d=G$y*G$x+G$R*G$T,G$v.tx=G$N*G$W+G$K*G$O+G$j,G$v.ty=G$x*G$W+G$T*G$O+G$D):(G$v.a=G$H*G$N,G$v.b=G$A*G$T,G$v.c=G$y*G$N,G$v.d=G$R*G$T,G$v.tx=G$N*G$W+G$j,G$v.ty=G$T*G$O+G$D),G$v},G$v.mul16=function(G$q,G$r,G$v){var G$H=G$q.a,G$A=G$q.b,G$y=G$q.c,G$R=G$q.d,G$W=G$q.tx,G$O=G$q.ty,G$N=G$r.a,G$x=G$r.b,G$K=G$r.c,G$T=G$r.d,G$j=G$r.tx,G$D=G$r.ty;return 0!==G$x||0!==G$K?(G$v[0]=G$H*G$N+G$A*G$K,G$v[1]=G$H*G$x+G$A*G$T,G$v[4]=G$y*G$N+G$R*G$K,G$v[5]=G$y*G$x+G$R*G$T,G$v[12]=G$N*G$W+G$K*G$O+G$j,G$v[13]=G$x*G$W+G$T*G$O+G$D):(G$v[0]=G$H*G$N,G$v[1]=G$A*G$T,G$v[4]=G$y*G$N,G$v[5]=G$R*G$T,G$v[12]=G$N*G$W+G$j,G$v[13]=G$T*G$O+G$D),G$v},G$v.mulPre=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O=G$q.a,G$N=G$q.b,G$x=G$q.c,G$K=G$q.d,G$T=G$q.tx,G$j=G$q.ty;return 0!==G$v||0!==G$H?(G$W.a=G$O*G$r+G$N*G$H,G$W.b=G$O*G$v+G$N*G$A,G$W.c=G$x*G$r+G$K*G$H,G$W.d=G$x*G$v+G$K*G$A,G$W.tx=G$r*G$T+G$H*G$j+G$y,G$W.ty=G$v*G$T+G$A*G$j+G$R):(G$W.a=G$O*G$r,G$W.b=G$N*G$A,G$W.c=G$x*G$r,G$W.d=G$K*G$A,G$W.tx=G$r*G$T+G$y,G$W.ty=G$A*G$j+G$R),G$W},G$v.mulPos=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O=G$q.a,G$N=G$q.b,G$x=G$q.c,G$K=G$q.d,G$T=G$q.tx,G$j=G$q.ty;return 0!==G$N||0!==G$x?(G$W.a=G$r*G$O+G$v*G$x,G$W.b=G$r*G$N+G$v*G$K,G$W.c=G$H*G$O+G$A*G$x,G$W.d=G$H*G$N+G$A*G$K,G$W.tx=G$O*G$y+G$x*G$R+G$T,G$W.ty=G$N*G$y+G$K*G$R+G$j):(G$W.a=G$r*G$O,G$W.b=G$v*G$K,G$W.c=G$H*G$O,G$W.d=G$A*G$K,G$W.tx=G$O*G$y+G$T,G$W.ty=G$K*G$R+G$j),G$W},G$v.preMul=function(G$q,G$r,G$v){var G$H=G$q.a,G$A=G$q.b,G$y=G$q.c,G$R=G$q.d,G$W=G$r.a,G$O=G$r.b,G$N=G$r.c,G$x=G$r.d,G$K=G$r.tx,G$T=G$r.ty;return G$v.a=G$W*G$H,G$v.b=G$v.c=0,G$v.d=G$x*G$R,G$v.tx=G$K*G$H+G$q.tx,G$v.ty=G$T*G$R+G$q.ty,0===G$O&&0===G$N&&0===G$A&&0===G$y||(G$v.a+=G$O*G$y,G$v.d+=G$N*G$A,G$v.b+=G$W*G$A+G$O*G$R,G$v.c+=G$N*G$H+G$x*G$y,G$v.tx+=G$T*G$y,G$v.ty+=G$K*G$A),G$v},G$v.preMulXY=function(G$q,G$r,G$v,G$H){var G$A=G$q.a,G$y=G$q.b,G$R=G$q.c,G$W=G$q.d;return G$H.a=G$A,G$H.b=G$y,G$H.c=G$R,G$H.d=G$W,G$H.tx=G$r*G$A+G$q.tx+G$v*G$R,G$H.ty=G$v*G$W+G$q.ty+G$r*G$y,G$H},G$v.create=function(){var G$q=G$v._cache,G$r=G$q._length?G$q[--G$q._length]:new G$v;return G$r.inPool=!1,G$r},G$v.EMPTY=new G$v,G$v.TEMP=new G$v,G$v._cache=[],G$v}(),G$V=function(){function G$q(G$q,G$r){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),this.x=G$q,this.y=G$r}G$x(G$q,"laya.maths.Point");var G$r=G$q.prototype;return G$r.setTo=function(G$q,G$r){return this.x=G$q,this.y=G$r,this},G$r.distance=function(G$q,G$r){return Math.sqrt((this.x-G$q)*(this.x-G$q)+(this.y-G$r)*(this.y-G$r))},G$r.toString=function(){return this.x+","+this.y},G$r.normalize=function(){var G$q=Math.sqrt(this.x*this.x+this.y*this.y);if(0<G$q){var G$r=1/G$q;this.x*=G$r,this.y*=G$r}},G$q.TEMP=new G$q,G$q.EMPTY=new G$q,G$q}(),G$a=function(){function G$N(G$q,G$r,G$v,G$H){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0),this.x=G$q,this.y=G$r,this.width=G$v,this.height=G$H}G$x(G$N,"laya.maths.Rectangle");var G$q=G$N.prototype;return G$q.setTo=function(G$q,G$r,G$v,G$H){return this.x=G$q,this.y=G$r,this.width=G$v,this.height=G$H,this},G$q.copyFrom=function(G$q){return this.x=G$q.x,this.y=G$q.y,this.width=G$q.width,this.height=G$q.height,this},G$q.contains=function(G$q,G$r){return!(this.width<=0||this.height<=0)&&(G$q>=this.x&&G$q<this.right&&G$r>=this.y&&G$r<this.bottom)},G$q.intersects=function(G$q){return!(G$q.x>this.x+this.width||G$q.x+G$q.width<this.x||G$q.y>this.y+this.height||G$q.y+G$q.height<this.y)},G$q.intersection=function(G$q,G$r){return this.intersects(G$q)?(G$r||(G$r=new G$N),G$r.x=Math.max(this.x,G$q.x),G$r.y=Math.max(this.y,G$q.y),G$r.width=Math.min(this.right,G$q.right)-G$r.x,G$r.height=Math.min(this.bottom,G$q.bottom)-G$r.y,G$r):null},G$q.union=function(G$q,G$r){return G$r||(G$r=new G$N),this.clone(G$r),G$q.width<=0||G$q.height<=0?G$r:(G$r.addPoint(G$q.x,G$q.y),G$r.addPoint(G$q.right,G$q.bottom),this)},G$q.clone=function(G$q){return G$q||(G$q=new G$N),G$q.x=this.x,G$q.y=this.y,G$q.width=this.width,G$q.height=this.height,G$q},G$q.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},G$q.equals=function(G$q){return!(!G$q||G$q.x!==this.x||G$q.y!==this.y||G$q.width!==this.width||G$q.height!==this.height)},G$q.addPoint=function(G$q,G$r){return this.x>G$q&&(this.width+=this.x-G$q,this.x=G$q),this.y>G$r&&(this.height+=this.y-G$r,this.y=G$r),this.width<G$q-this.x&&(this.width=G$q-this.x),this.height<G$r-this.y&&(this.height=G$r-this.y),this},G$q._getBoundPoints=function(){var G$q=G$N._temB;return(G$q.length=0)==this.width||0==this.height||G$q.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),G$q},G$q.isEmpty=function(){return this.width<=0||this.height<=0},G$D(0,G$q,"right",function(){return this.x+this.width}),G$D(0,G$q,"bottom",function(){return this.y+this.height}),G$N._getBoundPointS=function(G$q,G$r,G$v,G$H){var G$A=G$N._temA;return(G$A.length=0)==G$v||0==G$H||G$A.push(G$q,G$r,G$q+G$v,G$r,G$q,G$r+G$H,G$q+G$v,G$r+G$H),G$A},G$N._getWrapRec=function(G$q,G$r){if(!G$q||G$q.length<1)return G$r?G$r.setTo(0,0,0,0):G$N.TEMP.setTo(0,0,0,0);G$r=G$r||new G$N;var G$v,G$H,G$A,G$y,G$R,G$W=G$q.length,G$O=G$V.TEMP;for(G$A=G$R=-(G$H=G$y=99999),G$v=0;G$v<G$W;G$v+=2)G$O.x=G$q[G$v],G$O.y=G$q[G$v+1],G$H=G$H<G$O.x?G$H:G$O.x,G$y=G$y<G$O.y?G$y:G$O.y,G$A=G$A>G$O.x?G$A:G$O.x,G$R=G$R>G$O.y?G$R:G$O.y;return G$r.setTo(G$H,G$y,G$A-G$H,G$R-G$y)},G$N.EMPTY=new G$N,G$N.TEMP=new G$N,G$N._temB=[],G$N._temA=[],G$N}(),G$G=function(){function G$O(){}return G$x(G$O,"laya.media.SoundManager"),G$D(1,G$O,"useAudioMusic",function(){return G$O._useAudioMusic},function(G$q){G$O._useAudioMusic=G$q,G$O._musicClass=G$q?G$vq:null}),G$D(1,G$O,"autoStopMusic",function(){return G$O._autoStopMusic},function(G$q){G$P.stage.off("blur",null,G$O._stageOnBlur),G$P.stage.off("focus",null,G$O._stageOnFocus),G$P.stage.off("visibilitychange",null,G$O._visibilityChange),(G$O._autoStopMusic=G$q)&&(G$P.stage.on("blur",null,G$O._stageOnBlur),G$P.stage.on("focus",null,G$O._stageOnFocus),G$P.stage.on("visibilitychange",null,G$O._visibilityChange))}),G$D(1,G$O,"muted",function(){return G$O._muted},function(G$q){G$q!=G$O._muted&&(G$q&&G$O.stopAllSound(),G$O.musicMuted=G$q,G$O._muted=G$q)}),G$D(1,G$O,"musicMuted",function(){return G$O._musicMuted},function(G$q){G$q!=G$O._musicMuted&&(G$q?(G$O._tMusic&&G$O._musicChannel&&!G$O._musicChannel.isStopped?G$O._musicChannel.pause():G$O._musicChannel=null,G$O._musicMuted=G$q):(G$O._musicMuted=G$q,G$O._tMusic&&G$O._musicChannel&&G$O._musicChannel.resume()))}),G$D(1,G$O,"soundMuted",function(){return G$O._soundMuted},function(G$q){G$O._soundMuted=G$q}),G$O.addChannel=function(G$q){0<=G$O._channels.indexOf(G$q)||(G$O._channels.push(G$q),G$O.autoReleaseSound&&0!=G$O._notUsedCount&&G$O._notUsedUrls[G$q.url]&&(delete G$O._notUsedUrls[G$q.url],0==--G$O._notUsedCount&&G$P.timer.clear(G$O,G$O.disposeSoundIfNotUsed)))},G$O.removeChannel=function(G$q){var G$r=G$O._channels,G$v=G$r.indexOf(G$q);if(-1!=G$v&&(G$r.splice(G$v,1),G$O.autoReleaseSound)){var G$H=G$q.url,G$A=G$O.defaultIntervals[G$H]||2e4;if(0<G$A){var G$y=!0;for(G$v=G$r.length-1;0<=G$v;G$v--)if(G$r[G$v].url==G$H){G$y=!1;break}G$y&&(G$O._notUsedUrls[G$H]=Date.now()+G$A,0==G$O._notUsedCount++&&G$P.timer.loop(1e4,G$O,G$O.disposeSoundIfNotUsed))}}},G$O.disposeSoundIfNotUsed=function(){var G$q=G$O._notUsedUrls;if(0!=G$O._notUsedCount){var G$r=Date.now();for(var G$v in G$q)G$r>=G$q[G$v]&&(delete G$q[G$v],--G$O._notUsedCount,G$O.destroySound(G$v));if(0!=G$O._notUsedCount)return}G$P.timer.clear(G$O,G$O.disposeSoundIfNotUsed)},G$O._visibilityChange=function(){G$P.stage.isVisibility?G$O._stageOnFocus():G$O._stageOnBlur()},G$O._stageOnBlur=function(){G$O._isActive=!1,G$O._musicChannel&&(G$O._musicChannel.isStopped||(G$O._blurPaused=!0,G$O._musicChannel.pause())),G$O.stopAllSound(),G$P.stage.once("mousedown",null,G$O._stageOnFocus)},G$O._recoverWebAudio=function(){G$yq.ctx&&"running"!=G$yq.ctx.state&&G$yq.ctx.resume&&G$yq.ctx.resume()},G$O._stageOnFocus=function(){if(G$O._isActive=!0,G$O._recoverWebAudio(),G$P.stage.off("mousedown",null,G$O._stageOnFocus),G$O._blurPaused){var G$q=G$O._musicChannel;G$q&&G$O._music&&G$q.isStopped&&(G$O._blurPaused=!1,G$O._music._disposed?G$O.playMusic(G$q.url,G$q.loops,G$q.startHandler,G$q.completeHandler,G$q.startTime):G$q.audioBuffer?G$q.resume():G$O._music.play(G$q.startTime,G$q.loops,G$q.startHandler,G$q))}},G$O.playSound=function(G$q,G$r,G$v,G$H,G$A,G$y){if(void 0===G$r&&(G$r=1),void 0===G$y&&(G$y=0),!G$q)return null;if(G$O._muted)return null;if(G$O._recoverWebAudio(),G$q==G$O._tMusic){if(G$O._musicMuted)return null}else{if(!G$O._isActive)return null;if(G$O._soundMuted)return null}var G$R,G$W=G$O._pool[G$q];return G$A||(G$A=G$O._soundClass),G$W||((G$W=new G$A).load(G$q),G$O._pool[G$q]=G$W),(G$R=G$W.play(G$y,G$r,G$v))?(G$q==G$O._tMusic&&(G$O._music=G$W,G$O._isActive||(G$O._blurPaused=!0,G$R.pause())),G$R.url=G$q,G$R.volume=G$q==G$O._tMusic?G$O.musicVolume:G$O.soundVolume,G$R.completeHandler=G$H,G$R):null},G$O.destroySound=function(G$q){var G$r=G$O._pool[G$q];G$r&&(delete G$O._pool[G$q],G$r.dispose())},G$O.playMusic=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$r&&(G$r=0),void 0===G$A&&(G$A=0),G$O._tMusic=G$q,G$O._musicChannel&&G$O._musicChannel.stop(),G$O._musicChannel=G$O.playSound(G$q,G$r,G$v,G$H,null,G$A)},G$O.stopSound=function(G$q){for(var G$r,G$v=G$O._channels.length-1;0<=G$v;G$v--)(G$r=G$O._channels[G$v]).url==G$q&&G$r.stop()},G$O.stopAll=function(){G$O._tMusic=null;var G$q=0;for(G$q=G$O._channels.length-1;0<=G$q;G$q--)G$O._channels[G$q].stop()},G$O.stopAllSound=function(){var G$q,G$r=0;for(G$r=G$O._channels.length-1;0<=G$r;G$r--)(G$q=G$O._channels[G$r]).url!=G$O._tMusic&&G$q.stop()},G$O.stopMusic=function(){G$O._musicChannel&&G$O._musicChannel.stop(),G$O._tMusic=null},G$O.setSoundVolume=function(G$q,G$r){if(G$r)G$O._setVolume(G$r,G$q);else{G$O.soundVolume=G$q;var G$v,G$H=0;for(G$H=G$O._channels.length-1;0<=G$H;G$H--)(G$v=G$O._channels[G$H]).url!=G$O._tMusic&&(G$v.volume=G$q)}},G$O.setMusicVolume=function(G$q){G$O.musicVolume=G$q,G$O._setVolume(G$O._tMusic,G$q)},G$O._setVolume=function(G$q,G$r){for(var G$v,G$H=G$O._channels.length-1;0<=G$H;G$H--)(G$v=G$O._channels[G$H]).url==G$q&&(G$v.volume=G$r)},G$O.musicVolume=1,G$O.soundVolume=1,G$O.playbackRate=1,G$O._useAudioMusic=!0,G$O._muted=!1,G$O._soundMuted=!1,G$O._musicMuted=!1,G$O._tMusic=null,G$O._musicChannel=null,G$O._music=null,G$O._channels=[],G$O._autoStopMusic=!1,G$O._blurPaused=!1,G$O._isActive=!0,G$O._soundClass=null,G$O._musicClass=null,G$O.autoReleaseSound=!0,G$O._pool={},G$O.defaultIntervals={},G$O._notUsedUrls={},G$O._notUsedCount=0,G$O}(),G$J=function(){var G$q;function G$v(){}return G$x(G$v,"laya.net.LocalStorage"),G$v.__init__=function(){G$v._baseClass||(G$v._baseClass=G$q).init(),G$v.items=G$v._baseClass.items,G$v.support=G$v._baseClass.support},G$v.setItem=function(G$q,G$r){G$v._baseClass.setItem(G$q,G$r)},G$v.getItem=function(G$q){return G$v._baseClass.getItem(G$q)},G$v.setJSON=function(G$q,G$r){G$v._baseClass.setJSON(G$q,G$r)},G$v.getJSON=function(G$q){return G$v._baseClass.getJSON(G$q)},G$v.removeItem=function(G$q){G$v._baseClass.removeItem(G$q)},G$v.clear=function(){G$v._baseClass.clear()},G$v._baseClass=null,G$v.items=null,G$v.support=!1,G$v.__init$=function(){G$q=function(){function G$v(){}return G$x(G$v,""),G$v.init=function(){try{G$v.support=!0,G$v.items=G$R.localStorage,G$v.setItem("laya","1"),G$v.removeItem("laya")}catch(G$q){G$v.support=!1}G$v.support||console.log("LocalStorage is not supprot or browser is private mode.")},G$v.setItem=function(G$q,G$r){try{G$v.support&&G$v.items.setItem(G$q,G$r)}catch(G$q){console.warn("set localStorage failed",G$q)}},G$v.getItem=function(G$q){return G$v.support?G$v.items.getItem(G$q):null},G$v.setJSON=function(G$q,G$r){try{G$v.support&&G$v.items.setItem(G$q,JSON.stringify(G$r))}catch(G$q){console.warn("set localStorage failed",G$q)}},G$v.getJSON=function(G$q){return JSON.parse(G$v.support?G$v.items.getItem(G$q):null)},G$v.removeItem=function(G$q){G$v.support&&G$v.items.removeItem(G$q)},G$v.clear=function(){G$v.support&&G$v.items.clear()},G$v.items=null,G$v.support=!1,G$v}()},G$v}(),G$s=(function(){function G$H(){}G$x(G$H,"laya.net.ResourceVersion"),G$H.enable=function(G$q,G$r,G$v){void 0===G$v&&(G$v=2),laya.net.ResourceVersion.type=G$v,G$P.loader.load(G$q,G$B.create(null,G$H.onManifestLoaded,[G$r]),null,"json"),G$Z.customFormat=G$H.addVersionPrefix},G$H.onManifestLoaded=function(G$q,G$r){G$H.manifest=G$r,G$q.run(),G$r||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},G$H.addVersionPrefix=function(G$q){return G$H.manifest&&G$H.manifest[G$q]?2==G$H.type?G$H.manifest[G$q]:G$H.manifest[G$q]+"/"+G$q:G$q},G$H.FOLDER_VERSION=1,G$H.FILENAME_VERSION=2,G$H.manifest=null,G$H.type=1}(),function(){function G$q(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}G$x(G$q,"laya.net.TTFLoader");var G$r=G$q.prototype;return G$r.load=function(G$q){var G$r=(this._url=G$q).split(".ttf")[0].split("/");this.fontName=G$r[G$r.length-1],G$d.window.conch?this._loadConch():G$d.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},G$r._loadConch=function(){this._http=new G$Rq,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},G$r._onHttpLoaded=function(G$q){G$d.window.conch.setFontFaceFromBuffer(this.fontName,G$q),this._clearHttp(),this._complete()},G$r._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},G$r._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},G$r._complete=function(){G$P.timer.clear(this,this._complete),G$P.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},G$r._checkComplete=function(){G$E.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},G$r._loadWithFontFace=function(){var G$q=new G$d.window.FontFace(this.fontName,"url('"+this._url+"')");G$d.window.document.fonts.add(G$q);var G$r=this;G$q.loaded.then(function(){G$r._complete()}),G$q.load()},G$r._createDiv=function(){this._div=G$d.createElement("div"),this._div.innerHTML="laya";var G$q=this._div.style;G$q.fontFamily=this.fontName,G$q.position="absolute",G$q.left="-100px",G$q.top="-100px",G$d.document.body.appendChild(this._div)},G$r._loadWithCSS=function(){var G$q=this,G$r=G$d.createElement("style");G$r.type="text/css",G$d.document.body.appendChild(G$r),G$r.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=G$E.measureText("LayaTTFFont",this._fontTxt).width;var G$v=this;G$r.onload=function(){G$P.timer.once(1e4,G$v,G$q._complete)},G$P.timer.loop(20,this,this._checkComplete),this._createDiv()},G$q._testString="LayaTTFFont",G$q}()),G$Z=function(){function G$H(G$q){this._url=null,this._path=null,this._url=G$H.formatURL(G$q),this._path=G$H.getPath(G$q)}G$x(G$H,"laya.net.URL");var G$q=G$H.prototype;return G$D(0,G$q,"path",function(){return this._path}),G$D(0,G$q,"url",function(){return this._url}),G$H.formatURL=function(G$q,G$r){if(!G$q)return"null path";if(0<G$q.indexOf(":"))return G$q;null!=G$H.customFormat&&(G$q=G$H.customFormat(G$q,G$r));var G$v=G$q.charAt(0);if("."===G$v)return G$H.formatRelativePath((G$r||G$H.basePath)+G$q);if("~"===G$v)return G$H.rootPath+G$q.substring(1);if("d"===G$v){if(0===G$q.indexOf("data:image"))return G$q}else if("/"===G$v)return G$q;return(G$r||G$H.basePath)+G$q},G$H.formatRelativePath=function(G$q){for(var G$r=G$q.split("/"),G$v=0,G$H=G$r.length;G$v<G$H;G$v++)".."==G$r[G$v]&&(G$r.splice(G$v-1,2),G$v-=2);return G$r.join("/")},G$H.isAbsolute=function(G$q){return 0<G$q.indexOf(":")||"/"==G$q.charAt(0)},G$H.getPath=function(G$q){var G$r=G$q.lastIndexOf("/");return 0<G$r?G$q.substr(0,G$r+1):""},G$H.getFileName=function(G$q){var G$r=G$q.lastIndexOf("/");return 0<G$r?G$q.substr(G$r+1):G$q},G$H.version={},G$H.basePath="",G$H.rootPath="",G$H.customFormat=function(G$q){var G$r=G$H.version[G$q];return!G$Y.isConchApp&&G$r&&(G$q+="?v="+G$r),G$q},G$H}(),G$Y=function(){function G$A(G$q,G$r){this._timeId=0;var G$v=G$A._mainCanvas.source.style;G$v.position="absolute",G$v.top=G$v.left="0px",G$v.background="#000000",G$A._mainCanvas.source.id="layaCanvas";var G$H=laya.renders.Render.isWebGL;G$A._mainCanvas.source.width=G$q,G$A._mainCanvas.source.height=G$r,G$H&&G$A.WebGL.init(G$A._mainCanvas,G$q,G$r),G$d.container.appendChild(G$A._mainCanvas.source),(G$A._context=new G$o(G$q,G$r,G$H?null:G$A._mainCanvas)).ctx.setIsMainContext(),G$d.window.requestAnimationFrame(function G$q(G$r){G$d.window.requestAnimationFrame(G$q);G$P.stage._loop()}),G$P.stage.on("visibilitychange",this,this._onVisibilitychange)}G$x(G$A,"laya.renders.Render");var G$q=G$A.prototype;return G$q._onVisibilitychange=function(){G$P.stage.isVisibility?0!=this._timeId&&G$d.window.clearInterval(this._timeId):this._timeId=G$d.window.setInterval(this._enterFrame,1e3)},G$q._enterFrame=function(G$q){G$P.stage._loop()},G$D(1,G$A,"context",function(){return G$A._context}),G$D(1,G$A,"canvas",function(){return G$A._mainCanvas.source}),G$A._context=null,G$A._mainCanvas=null,G$A.WebGL=null,G$A.isConchNode=!1,G$A.isConchApp=!1,G$A.isConchWebGL=!1,G$A.isWebGL=!1,G$A.is3DMode=!1,G$A.optimizeTextureMemory=function(G$q,G$r){return!0},G$A.__init$=function(){G$R.ConchRenderType=G$R.ConchRenderType||1,G$R.ConchRenderType|=G$R.conch?4:0,G$A.isConchNode=5==(5&G$R.ConchRenderType),G$A.isConchApp=4==(4&G$R.ConchRenderType),G$A.isConchWebGL=6==G$R.ConchRenderType},G$A}(),G$o=function(){function G$R(G$q,G$r,G$v){this.x=0,this.y=0,this._drawTexture=function(G$q,G$r,G$v){G$v[0].loaded&&this.ctx.drawTexture(G$v[0],G$v[1],G$v[2],G$v[3],G$v[4],G$q,G$r)},this._fillTexture=function(G$q,G$r,G$v){G$v[0].loaded&&this.ctx.fillTexture(G$v[0],G$v[1]+G$q,G$v[2]+G$r,G$v[3],G$v[4],G$v[5],G$v[6],G$v[7])},this._drawTextureWithTransform=function(G$q,G$r,G$v){G$v[0].loaded&&this.ctx.drawTextureWithTransform(G$v[0],G$v[1],G$v[2],G$v[3],G$v[4],G$v[5],G$q,G$r,G$v[6])},this._fillQuadrangle=function(G$q,G$r,G$v){this.ctx.fillQuadrangle(G$v[0],G$v[1],G$v[2],G$v[3],G$v[4])},this._drawRect=function(G$q,G$r,G$v){var G$H=this.ctx;null!=G$v[4]&&(G$H.fillStyle=G$v[4],G$H.fillRect(G$q+G$v[0],G$r+G$v[1],G$v[2],G$v[3],null)),null!=G$v[5]&&(G$H.strokeStyle=G$v[5],G$H.lineWidth=G$v[6],G$H.strokeRect(G$q+G$v[0],G$r+G$v[1],G$v[2],G$v[3],G$v[6]))},this._drawPie=function(G$q,G$r,G$v){var G$H=this.ctx;G$Y.isWebGL&&G$H.setPathId(G$v[8]),G$H.beginPath(),G$Y.isWebGL?(G$H.movePath(G$v[0]+G$q,G$v[1]+G$r),G$H.moveTo(0,0)):G$H.moveTo(G$q+G$v[0],G$r+G$v[1]),G$H.arc(G$q+G$v[0],G$r+G$v[1],G$v[2],G$v[3],G$v[4]),G$H.closePath(),this._fillAndStroke(G$v[5],G$v[6],G$v[7],!0)},this._clipRect=function(G$q,G$r,G$v){this.ctx.clipRect(G$q+G$v[0],G$r+G$v[1],G$v[2],G$v[3])},this._fillRect=function(G$q,G$r,G$v){this.ctx.fillRect(G$q+G$v[0],G$r+G$v[1],G$v[2],G$v[3],G$v[4])},this._drawCircle=function(G$q,G$r,G$v){var G$H=this.ctx;G$Y.isWebGL&&G$H.setPathId(G$v[6]),G$l.drawCall++,G$H.beginPath(),G$Y.isWebGL&&G$H.movePath(G$v[0]+G$q,G$v[1]+G$r),G$H.arc(G$v[0]+G$q,G$v[1]+G$r,G$v[2],0,G$R.PI2),G$H.closePath(),this._fillAndStroke(G$v[3],G$v[4],G$v[5],!0)},this._fillCircle=function(G$q,G$r,G$v){G$l.drawCall++;var G$H=this.ctx;G$H.beginPath(),G$H.fillStyle=G$v[3],G$H.arc(G$v[0]+G$q,G$v[1]+G$r,G$v[2],0,G$R.PI2),G$H.fill()},this._setShader=function(G$q,G$r,G$v){this.ctx.setShader(G$v[0])},this._drawLine=function(G$q,G$r,G$v){var G$H=this.ctx;G$Y.isWebGL&&G$H.setPathId(G$v[6]),G$H.beginPath(),G$H.strokeStyle=G$v[4],G$H.lineWidth=G$v[5],G$Y.isWebGL?(G$H.movePath(G$q,G$r),G$H.moveTo(G$v[0],G$v[1]),G$H.lineTo(G$v[2],G$v[3])):(G$H.moveTo(G$q+G$v[0],G$r+G$v[1]),G$H.lineTo(G$q+G$v[2],G$r+G$v[3])),G$H.stroke()},this._drawLines=function(G$q,G$r,G$v){var G$H=this.ctx;G$Y.isWebGL&&G$H.setPathId(G$v[5]),G$H.beginPath(),G$q+=G$v[0],G$r+=G$v[1],G$Y.isWebGL&&G$H.movePath(G$q,G$r),G$H.strokeStyle=G$v[3],G$H.lineWidth=G$v[4];var G$A=G$v[2],G$y=2,G$R=G$A.length;if(G$Y.isWebGL)for(G$H.moveTo(G$A[0],G$A[1]);G$y<G$R;)G$H.lineTo(G$A[G$y++],G$A[G$y++]);else for(G$H.moveTo(G$q+G$A[0],G$r+G$A[1]);G$y<G$R;)G$H.lineTo(G$q+G$A[G$y++],G$r+G$A[G$y++]);G$H.stroke()},this._drawLinesWebGL=function(G$q,G$r,G$v){this.ctx.drawLines(G$q+this.x+G$v[0],G$r+this.y+G$v[1],G$v[2],G$v[3],G$v[4])},this._drawCurves=function(G$q,G$r,G$v){this.ctx.drawCurves(G$q,G$r,G$v)},this._draw=function(G$q,G$r,G$v){G$v[0].call(null,this,G$q,G$r)},this._transformByMatrix=function(G$q,G$r,G$v){this.ctx.transformByMatrix(G$v[0])},this._setTransform=function(G$q,G$r,G$v){this.ctx.setTransform(G$v[0],G$v[1],G$v[2],G$v[3],G$v[4],G$v[5])},this._setTransformByMatrix=function(G$q,G$r,G$v){this.ctx.setTransformByMatrix(G$v[0])},this._save=function(G$q,G$r,G$v){this.ctx.save()},this._restore=function(G$q,G$r,G$v){this.ctx.restore()},this._translate=function(G$q,G$r,G$v){this.ctx.translate(G$v[0],G$v[1])},this._transform=function(G$q,G$r,G$v){this.ctx.translate(G$v[1]+G$q,G$v[2]+G$r);var G$H=G$v[0];this.ctx.transform(G$H.a,G$H.b,G$H.c,G$H.d,G$H.tx,G$H.ty),this.ctx.translate(-G$q-G$v[1],-G$r-G$v[2])},this._rotate=function(G$q,G$r,G$v){this.ctx.translate(G$v[1]+G$q,G$v[2]+G$r),this.ctx.rotate(G$v[0]),this.ctx.translate(-G$q-G$v[1],-G$r-G$v[2])},this._scale=function(G$q,G$r,G$v){this.ctx.translate(G$v[2]+G$q,G$v[3]+G$r),this.ctx.scale(G$v[0],G$v[1]),this.ctx.translate(-G$q-G$v[2],-G$r-G$v[3])},this._alpha=function(G$q,G$r,G$v){this.ctx.globalAlpha*=G$v[0]},this._setAlpha=function(G$q,G$r,G$v){this.ctx.globalAlpha=G$v[0]},this._fillText=function(G$q,G$r,G$v){this.ctx.fillText(G$v[0],G$v[1]+G$q,G$v[2]+G$r,G$v[3],G$v[4],G$v[5])},this._strokeText=function(G$q,G$r,G$v){this.ctx.strokeText(G$v[0],G$v[1]+G$q,G$v[2]+G$r,G$v[3],G$v[4],G$v[5],G$v[6])},this._fillBorderText=function(G$q,G$r,G$v){this.ctx.fillBorderText(G$v[0],G$v[1]+G$q,G$v[2]+G$r,G$v[3],G$v[4],G$v[5],G$v[6],G$v[7])},this._blendMode=function(G$q,G$r,G$v){this.ctx.globalCompositeOperation=G$v[0]},this._beginClip=function(G$q,G$r,G$v){this.ctx.beginClip&&this.ctx.beginClip(G$q+G$v[0],G$r+G$v[1],G$v[2],G$v[3])},this._setIBVB=function(G$q,G$r,G$v){this.ctx.setIBVB(G$v[0]+G$q,G$v[1]+G$r,G$v[2],G$v[3],G$v[4],G$v[5],G$v[6],G$v[7])},this._fillTrangles=function(G$q,G$r,G$v){this.ctx.fillTrangles(G$v[0],G$v[1]+G$q,G$v[2]+G$r,G$v[3],G$v[4])},this._drawPath=function(G$q,G$r,G$v){var G$H=this.ctx;G$Y.isWebGL&&G$H.setPathId(-1),G$H.beginPath(),G$q+=G$v[0],G$r+=G$v[1],G$Y.isWebGL&&G$H.movePath(G$q,G$r);for(var G$A=G$v[2],G$y=0,G$R=G$A.length;G$y<G$R;G$y++){var G$W=G$A[G$y];switch(G$W[0]){case"moveTo":G$Y.isWebGL?G$H.moveTo(G$W[1],G$W[2]):G$H.moveTo(G$q+G$W[1],G$r+G$W[2]);break;case"lineTo":G$Y.isWebGL?G$H.lineTo(G$W[1],G$W[2]):G$H.lineTo(G$q+G$W[1],G$r+G$W[2]);break;case"arcTo":G$Y.isWebGL?G$H.arcTo(G$W[1],G$W[2],G$W[3],G$W[4],G$W[5]):G$H.arcTo(G$q+G$W[1],G$r+G$W[2],G$q+G$W[3],G$r+G$W[4],G$W[5]);break;case"closePath":G$H.closePath()}}var G$O=G$v[3];null!=G$O&&(G$H.fillStyle=G$O.fillStyle,G$H.fill());var G$N=G$v[4];null!=G$N&&(G$H.strokeStyle=G$N.strokeStyle,G$H.lineWidth=G$N.lineWidth||1,G$H.lineJoin=G$N.lineJoin,G$H.lineCap=G$N.lineCap,G$H.miterLimit=G$N.miterLimit,G$H.stroke())},this.drawPoly=function(G$q,G$r,G$v){this.ctx.drawPoly(G$q+this.x+G$v[0],G$r+this.y+G$v[1],G$v[2],G$v[3],G$v[4],G$v[5],G$v[6])},this._drawPoly=function(G$q,G$r,G$v){var G$H=this.ctx,G$A=G$v[2],G$y=2,G$R=G$A.length;if(G$Y.isWebGL)for(G$H.setPathId(G$v[6]),G$H.beginPath(),G$q+=G$v[0],G$r+=G$v[1],G$H.movePath(G$q,G$r),G$H.moveTo(G$A[0],G$A[1]);G$y<G$R;)G$H.lineTo(G$A[G$y++],G$A[G$y++]);else for(G$H.beginPath(),G$q+=G$v[0],G$r+=G$v[1],G$H.moveTo(G$q+G$A[0],G$r+G$A[1]);G$y<G$R;)G$H.lineTo(G$q+G$A[G$y++],G$r+G$A[G$y++]);G$H.closePath(),this._fillAndStroke(G$v[3],G$v[4],G$v[5],G$v[7])},this._drawSkin=function(G$q,G$r,G$v){var G$H=G$v[0];if(G$H){var G$A=this.ctx;G$H.render(G$A,G$q,G$r)}},this._drawParticle=function(G$q,G$r,G$v){this.ctx.drawParticle(G$q+this.x,G$r+this.y,G$v[0])},this._setFilters=function(G$q,G$r,G$v){this.ctx.setFilters(G$v)},G$v?this.ctx=G$v.getContext("2d"):(G$v=G$eq.create("3D"),this.ctx=G$E.createWebGLContext2D(G$v),G$v._setContext(this.ctx)),G$v.size(G$q,G$r),this.canvas=G$v}G$x(G$R,"laya.renders.RenderContext");var G$q=G$R.prototype;return G$q.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},G$q.drawTexture=function(G$q,G$r,G$v,G$H,G$A){G$q.loaded&&this.ctx.drawTexture(G$q,G$r,G$v,G$H,G$A,this.x,this.y)},G$q._drawTextures=function(G$q,G$r,G$v){G$v[0].loaded&&this.ctx.drawTextures(G$v[0],G$v[1],G$q+this.x,G$r+this.y)},G$q.drawTextureWithTransform=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$q.loaded&&this.ctx.drawTextureWithTransform(G$q,G$r,G$v,G$H,G$A,G$y,this.x,this.y,G$R)},G$q.fillQuadrangle=function(G$q,G$r,G$v,G$H,G$A){this.ctx.fillQuadrangle(G$q,G$r,G$v,G$H,G$A)},G$q.drawCanvas=function(G$q,G$r,G$v,G$H,G$A){this.ctx.drawCanvas(G$q,G$r+this.x,G$v+this.y,G$H,G$A)},G$q.drawRect=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$y&&(G$y=1);var G$R=this.ctx;G$R.strokeStyle=G$A,G$R.lineWidth=G$y,G$R.strokeRect(G$q+this.x,G$r+this.y,G$v,G$H,G$y)},G$q._fillAndStroke=function(G$q,G$r,G$v,G$H){void 0===G$H&&(G$H=!1);var G$A=this.ctx;null!=G$q&&(G$A.fillStyle=G$q,G$Y.isWebGL?G$A.fill(G$H):G$A.fill()),null!=G$r&&0<G$v&&(G$A.strokeStyle=G$r,G$A.lineWidth=G$v,G$A.stroke())},G$q.clipRect=function(G$q,G$r,G$v,G$H){this.ctx.clipRect(G$q+this.x,G$r+this.y,G$v,G$H)},G$q.fillRect=function(G$q,G$r,G$v,G$H,G$A){this.ctx.fillRect(G$q+this.x,G$r+this.y,G$v,G$H,G$A)},G$q.drawCircle=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=1),G$l.drawCall++;var G$y=this.ctx;G$y.beginPath(),G$y.strokeStyle=G$H,G$y.lineWidth=G$A,G$y.arc(G$q+this.x,G$r+this.y,G$v,0,G$R.PI2),G$y.stroke()},G$q.drawTriangles=function(G$q,G$r,G$v){if(G$Y.isWebGL)this.ctx.drawTriangles(G$v[0],G$q+G$v[1],G$r+G$v[2],G$v[3],G$v[4],G$v[5],G$v[6],G$v[7],G$v[8],G$v[9]);else{var G$H=G$v[5],G$A=0,G$y=G$H.length,G$R=this.ctx;for(G$A=0;G$A<G$y;G$A+=3){var G$W=2*G$H[G$A],G$O=2*G$H[G$A+1],G$N=2*G$H[G$A+2];G$R.drawTriangle(G$v[0],G$v[3],G$v[4],G$W,G$O,G$N,G$v[6],!0)}}},G$q.fillCircle=function(G$q,G$r,G$v,G$H){G$l.drawCall++;var G$A=this.ctx;G$A.beginPath(),G$A.fillStyle=G$H,G$A.arc(G$q+this.x,G$r+this.y,G$v,0,G$R.PI2),G$A.fill()},G$q.setShader=function(G$q){this.ctx.setShader(G$q)},G$q.drawLine=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$y&&(G$y=1);var G$R=this.ctx;G$R.beginPath(),G$R.strokeStyle=G$A,G$R.lineWidth=G$y,G$R.moveTo(this.x+G$q,this.y+G$r),G$R.lineTo(this.x+G$v,this.y+G$H),G$R.stroke()},G$q.clear=function(){this.ctx.clear()},G$q.transformByMatrix=function(G$q){this.ctx.transformByMatrix(G$q)},G$q.setTransform=function(G$q,G$r,G$v,G$H,G$A,G$y){this.ctx.setTransform(G$q,G$r,G$v,G$H,G$A,G$y)},G$q.setTransformByMatrix=function(G$q){this.ctx.setTransformByMatrix(G$q)},G$q.save=function(){this.ctx.save()},G$q.restore=function(){this.ctx.restore()},G$q.translate=function(G$q,G$r){this.ctx.translate(G$q,G$r)},G$q.transform=function(G$q,G$r,G$v,G$H,G$A,G$y){this.ctx.transform(G$q,G$r,G$v,G$H,G$A,G$y)},G$q.rotate=function(G$q){this.ctx.rotate(G$q)},G$q.scale=function(G$q,G$r){this.ctx.scale(G$q,G$r)},G$q.alpha=function(G$q){this.ctx.globalAlpha*=G$q},G$q.setAlpha=function(G$q){this.ctx.globalAlpha=G$q},G$q.fillWords=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$y&&(G$y=0),this.ctx.fillWords(G$q,G$r,G$v,G$H,G$A,G$y)},G$q.fillBorderWords=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this.ctx.fillBorderWords(G$q,G$r,G$v,G$H,G$A,G$y,G$R)},G$q.fillText=function(G$q,G$r,G$v,G$H,G$A,G$y){this.ctx.fillText(G$q,G$r+this.x,G$v+this.y,G$H,G$A,G$y)},G$q.strokeText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this.ctx.strokeText(G$q,G$r+this.x,G$v+this.y,G$H,G$A,G$y,G$R)},G$q.blendMode=function(G$q){this.ctx.globalCompositeOperation=G$q},G$q.flush=function(){this.ctx.flush&&this.ctx.flush()},G$q.addRenderObject=function(G$q){this.ctx.addRenderObject(G$q)},G$q.beginClip=function(G$q,G$r,G$v,G$H){this.ctx.beginClip&&this.ctx.beginClip(G$q,G$r,G$v,G$H)},G$q.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},G$q.fillTrangles=function(G$q,G$r,G$v){this.ctx.fillTrangles(G$v[0],G$v[1],G$v[2],G$v[3],4<G$v.length?G$v[4]:null)},G$R.PI2=2*Math.PI,G$R}(),G$C=function(){function G$R(G$q,G$r){switch(this._next=G$r||G$R.NORENDER,G$q){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=G$m._filter);case 69905:return void(this._fun=G$R._initRenderFun)}this.onCreate(G$q)}G$x(G$R,"laya.renders.RenderSprite");var G$q=G$R.prototype;return G$q.onCreate=function(G$q){},G$q._style=function(G$q,G$r,G$v,G$H){G$q._style.render(G$q,G$r,G$v,G$H);var G$A=this._next;G$A._fun.call(G$A,G$q,G$r,G$v,G$H)},G$q._no=function(G$q,G$r,G$v,G$H){},G$q._custom=function(G$q,G$r,G$v,G$H){G$q.customRender(G$r,G$v,G$H);var G$A=G$q._style._tf;this._next._fun.call(this._next,G$q,G$r,G$v-G$A.translateX,G$H-G$A.translateY)},G$q._clip=function(G$q,G$r,G$v,G$H){var G$A=this._next;if(G$A!=G$R.NORENDER){var G$y=G$q._style.scrollRect;G$r.ctx.save(),G$r.ctx.clipRect(G$v,G$H,G$y.width,G$y.height),G$A._fun.call(G$A,G$q,G$r,G$v-G$y.x,G$H-G$y.y),G$r.ctx.restore()}},G$q._blend=function(G$q,G$r,G$v,G$H){var G$A=G$q._style;G$A.blendMode&&(G$r.ctx.globalCompositeOperation=G$A.blendMode);var G$y=this._next;G$y._fun.call(G$y,G$q,G$r,G$v,G$H),G$r.ctx.globalCompositeOperation="source-over"},G$q._mask=function(G$q,G$r,G$v,G$H){var G$A=this._next;G$A._fun.call(G$A,G$q,G$r,G$v,G$H);var G$y=G$q.mask;G$y&&(G$r.ctx.globalCompositeOperation="destination-in",(0<G$y.numChildren||!G$y.graphics._isOnlyOne())&&(G$y.cacheAsBitmap=!0),G$y.render(G$r,G$v-G$q.pivotX,G$H-G$q.pivotY)),G$r.ctx.globalCompositeOperation="source-over"},G$q._graphics=function(G$q,G$r,G$v,G$H){var G$A=G$q._style._tf;G$q._graphics&&G$q._graphics._render(G$q,G$r,G$v-G$A.translateX,G$H-G$A.translateY);var G$y=this._next;G$y._fun.call(G$y,G$q,G$r,G$v,G$H)},G$q._image=function(G$q,G$r,G$v,G$H){var G$A=G$q._style;G$r.ctx.drawTexture2(G$v,G$H,G$A._tf.translateX,G$A._tf.translateY,G$q.transform,G$A.alpha,G$A.blendMode,G$q._graphics._one)},G$q._image2=function(G$q,G$r,G$v,G$H){var G$A=G$q._style._tf;G$r.ctx.drawTexture2(G$v,G$H,G$A.translateX,G$A.translateY,G$q.transform,1,null,G$q._graphics._one)},G$q._alpha=function(G$q,G$r,G$v,G$H){var G$A;if(.01<(G$A=G$q._style.alpha)||G$q._needRepaint()){var G$y=G$r.ctx.globalAlpha;G$r.ctx.globalAlpha*=G$A;var G$R=this._next;G$R._fun.call(G$R,G$q,G$r,G$v,G$H),G$r.ctx.globalAlpha=G$y}},G$q._transform=function(G$q,G$r,G$v,G$H){var G$A=G$q.transform,G$y=this._next;G$A&&G$y!=G$R.NORENDER?(G$r.save(),G$r.transform(G$A.a,G$A.b,G$A.c,G$A.d,G$A.tx+G$v,G$A.ty+G$H),G$y._fun.call(G$y,G$q,G$r,0,0),G$r.restore()):G$y._fun.call(G$y,G$q,G$r,G$v,G$H)},G$q._childs=function(G$q,G$r,G$v,G$H){var G$A=G$q._style,G$y=G$A._tf;if(G$v=G$v-G$y.translateX+G$A.paddingLeft,G$H=G$H-G$y.translateY+G$A.paddingTop,G$A._calculation){var G$R=G$q._getWords();if(G$R){var G$W=G$A;G$W&&(G$W.stroke?G$r.fillBorderWords(G$R,G$v,G$H,G$W.font,G$W.color,G$W.strokeColor,G$W.stroke):G$r.fillWords(G$R,G$v,G$H,G$W.font,G$W.color,"none"!=G$W.textDecoration&&G$W.underLine?1:0))}}var G$O,G$N=G$q._childs,G$x=G$N.length;if(G$q.viewport||G$q.optimizeScrollRect&&G$q._style.scrollRect){var G$K=G$q.viewport||G$q._style.scrollRect,G$T=G$K.x,G$j=G$K.y,G$D=G$K.right,G$g=G$K.bottom,G$X=NaN,G$m=NaN;for(G$B=0;G$B<G$x;++G$B)(G$O=G$N[G$B]).visible&&(G$X=G$O._x)<G$D&&G$X+G$O.width>G$T&&(G$m=G$O._y)<G$g&&G$m+G$O.height>G$j&&G$O.render(G$r,G$v,G$H)}else for(var G$B=0;G$B<G$x;++G$B)(G$O=G$N[G$B])._style.visible&&G$O.render(G$r,G$v,G$H)},G$q._canvas=function(G$q,G$r,G$v,G$H){var G$A=G$q._$P.cacheCanvas;if(G$A){"bitmap"===G$A.type?G$l.canvasBitmap++:G$l.canvasNormal++;var G$y=G$A.ctx;if(G$q._needRepaint()||!G$y)this._canvas_repaint(G$q,G$r,G$v,G$H);else{var G$R=G$A._cacheRec;G$r.drawCanvas(G$y.canvas,G$v+G$R.x,G$H+G$R.y,G$R.width,G$R.height)}}else this._next._fun.call(this._next,G$q,G$r,G$v,G$H)},G$q._canvas_repaint=function(G$q,G$r,G$v,G$H){var G$A=G$q._$P.cacheCanvas,G$y=this._next;if(G$A){var G$R,G$W,G$O,G$N,G$x=G$A.ctx,G$K=G$q._needRepaint()||!G$x,G$T=G$A.type;if("bitmap"===G$T?G$l.canvasBitmap++:G$l.canvasNormal++,G$K){var G$j,G$D;G$A._cacheRec||(G$A._cacheRec=new G$a),G$Y.isWebGL&&"bitmap"!==G$T?G$A._cacheRec.setTo(-G$q.pivotX,-G$q.pivotY,1,1):((G$N=G$q.getSelfBounds()).x=G$N.x-G$q.pivotX,G$N.y=G$N.y-G$q.pivotY,G$N.x=G$N.x-16,G$N.y=G$N.y-16,G$N.width=G$N.width+32,G$N.height=G$N.height+32,G$N.x=Math.floor(G$N.x+G$v)-G$v,G$N.y=Math.floor(G$N.y+G$H)-G$H,G$N.width=Math.floor(G$N.width),G$N.height=Math.floor(G$N.height),G$A._cacheRec.copyFrom(G$N)),G$N=G$A._cacheRec;var G$g,G$X=G$Y.isWebGL?1:G$d.pixelRatio*G$P.stage.clientScaleX,G$m=G$Y.isWebGL?1:G$d.pixelRatio*G$P.stage.clientScaleY;if(!G$Y.isWebGL){var G$B,G$e=1,G$p=1;for(G$B=G$q;G$B&&G$B!=G$P.stage;)G$e*=G$B.scaleX,G$p*=G$B.scaleY,G$B=G$B.parent;G$Y.isWebGL?(G$e<1&&(G$X*=G$e),G$p<1&&(G$m*=G$p)):(1<G$e&&(G$X*=G$e),1<G$p&&(G$m*=G$p))}if(G$q.scrollRect){var G$M=G$q.scrollRect;G$N.x-=G$M.x,G$N.y-=G$M.y}if(G$j=G$N.width*G$X,G$D=G$N.height*G$m,G$W=G$N.x,G$O=G$N.y,G$Y.isWebGL&&"bitmap"===G$T&&(2048<G$j||2048<G$D))return console.warn("cache bitmap size larger than 2048,cache ignored"),G$A.ctx&&(G$S.recover("RenderContext",G$A.ctx),G$A.ctx.canvas.size(0,0),G$A.ctx=null),void G$y._fun.call(G$y,G$q,G$r,G$v,G$H);if(G$x||(G$x=G$A.ctx=G$S.getItem("RenderContext")||new G$o(G$j,G$D,G$eq.create("AUTO"))),G$x.ctx.sprite=G$q,(G$R=G$x.canvas).clear(),(G$R.width!=G$j||G$R.height!=G$D)&&G$R.size(G$j,G$D),"bitmap"===G$T?G$R.context.asBitmap=!0:"normal"===G$T&&(G$R.context.asBitmap=!1),1!=G$X||1!=G$m){var G$z=G$x.ctx;G$z.save(),G$z.scale(G$X,G$m),!G$Y.isConchWebGL&&G$Y.isConchApp&&(G$g=G$q._$P.cf)&&G$z.setFilterMatrix&&G$z.setFilterMatrix(G$g._mat,G$g._alpha),G$y._fun.call(G$y,G$q,G$x,-G$W,-G$O),G$z.restore(),G$Y.isConchApp&&!G$Y.isConchWebGL||G$q._applyFilters()}else G$z=G$x.ctx,!G$Y.isConchWebGL&&G$Y.isConchApp&&(G$g=G$q._$P.cf)&&G$z.setFilterMatrix&&G$z.setFilterMatrix(G$g._mat,G$g._alpha),G$y._fun.call(G$y,G$q,G$x,-G$W,-G$O),G$Y.isConchApp&&!G$Y.isConchWebGL||G$q._applyFilters();G$q._$P.staticCache&&(G$A.reCache=!1),G$l.canvasReCache++}else G$W=(G$N=G$A._cacheRec).x,G$O=G$N.y,G$R=G$x.canvas;G$r.drawCanvas(G$R,G$v+G$W,G$H+G$O,G$N.width,G$N.height)}else G$y._fun.call(G$y,G$q,G$x,G$v,G$H)},G$R.__init__=function(){var G$q,G$r,G$v=0;for(G$r=G$E.createRenderSprite(69905,null),G$q=G$R.renders.length=4096,G$v=0;G$v<G$q;G$v++)G$R.renders[G$v]=G$r;G$R.renders[0]=G$E.createRenderSprite(0,null),function(G$q,G$r){for(var G$v=0,G$H=0;G$H<G$q.length;G$H++)G$v|=G$q[G$H],G$R.renders[G$v]=G$r}([1,512,4,2],new G$R(1,null)),G$R.renders[513]=G$E.createRenderSprite(513,null),G$R.renders[517]=new G$R(517,null)},G$R._initRenderFun=function(G$q,G$r,G$v,G$H){var G$A=G$q._renderType;(G$R.renders[G$A]=G$R._getTypeRender(G$A))._fun(G$q,G$r,G$v,G$H)},G$R._getTypeRender=function(G$q){for(var G$r=null,G$v=2048;1<G$v;)G$v&G$q&&(G$r=G$E.createRenderSprite(G$v,G$r)),G$v>>=1;return G$r},G$R.IMAGE=1,G$R.ALPHA=2,G$R.TRANSFORM=4,G$R.BLEND=8,G$R.CANVAS=16,G$R.FILTERS=32,G$R.MASK=64,G$R.CLIP=128,G$R.STYLE=256,G$R.GRAPHICS=512,G$R.CUSTOM=1024,G$R.CHILDS=2048,G$R.INIT=69905,G$R.renders=[],G$R.NORENDER=new G$R(0,null),G$R}(),G$c=function(){function G$W(){this._repaint=!1}G$x(G$W,"laya.resource.Context");var G$q=G$W.prototype;return G$q.replaceReset=function(){var G$q,G$r,G$v=0;for(G$q=G$W.replaceKeys.length,G$v=0;G$v<G$q;G$v++)G$r=G$W.replaceKeys[G$v],this[G$W.newKeys[G$v]]=this[G$r]},G$q.replaceResotre=function(){this.__restore(),this.__reset()},G$q.setIsMainContext=function(){},G$q.drawTextures=function(G$q,G$r,G$v,G$H){G$l.drawCall+=G$r.length/2;for(var G$A=G$q.width,G$y=G$q.height,G$R=0,G$W=G$r.length;G$R<G$W;G$R+=2)this.drawTexture(G$q,G$r[G$R],G$r[G$R+1],G$A,G$y,G$v,G$H)},G$q.drawCanvas=function(G$q,G$r,G$v,G$H,G$A){G$l.drawCall++,this.drawImage(G$q.source,G$r,G$v,G$H,G$A)},G$q.fillRect=function(G$q,G$r,G$v,G$H,G$A){G$l.drawCall++,G$A&&(this.fillStyle=G$A),this.__fillRect(G$q,G$r,G$v,G$H)},G$q.fillText=function(G$q,G$r,G$v,G$H,G$A,G$y){G$l.drawCall++,3<arguments.length&&null!=G$H&&(this.font=G$H,this.fillStyle=G$A,this.textAlign=G$y,this.textBaseline="top"),this.__fillText(G$q,G$r,G$v)},G$q.fillBorderText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){G$l.drawCall++,this.font=G$H,this.fillStyle=G$A,this.textBaseline="top",this.strokeStyle=G$y,this.lineWidth=G$R,this.textAlign=G$W,this.__strokeText(G$q,G$r,G$v),this.__fillText(G$q,G$r,G$v)},G$q.strokeText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$l.drawCall++,3<arguments.length&&null!=G$H&&(this.font=G$H,this.strokeStyle=G$A,this.lineWidth=G$y,this.textAlign=G$R,this.textBaseline="top"),this.__strokeText(G$q,G$r,G$v)},G$q.transformByMatrix=function(G$q){this.transform(G$q.a,G$q.b,G$q.c,G$q.d,G$q.tx,G$q.ty)},G$q.setTransformByMatrix=function(G$q){this.setTransform(G$q.a,G$q.b,G$q.c,G$q.d,G$q.tx,G$q.ty)},G$q.clipRect=function(G$q,G$r,G$v,G$H){G$l.drawCall++,this.beginPath(),this.rect(G$q,G$r,G$v,G$H),this.clip()},G$q.drawTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$l.drawCall++;var G$W=G$q.uv,G$O=G$q.bitmap.width,G$N=G$q.bitmap.height;this.drawImage(G$q.source,G$W[0]*G$O,G$W[1]*G$N,(G$W[2]-G$W[0])*G$O,(G$W[5]-G$W[3])*G$N,G$r+G$y,G$v+G$R,G$H,G$A)},G$q.drawTextureWithTransform=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){G$l.drawCall++;var G$N=G$q.uv,G$x=G$q.bitmap.width,G$K=G$q.bitmap.height;this.save(),1!=G$O&&(this.globalAlpha*=G$O),G$y?(this.transform(G$y.a,G$y.b,G$y.c,G$y.d,G$y.tx+G$R,G$y.ty+G$W),this.drawImage(G$q.source,G$N[0]*G$x,G$N[1]*G$K,(G$N[2]-G$N[0])*G$x,(G$N[5]-G$N[3])*G$K,G$r,G$v,G$H,G$A)):this.drawImage(G$q.source,G$N[0]*G$x,G$N[1]*G$K,(G$N[2]-G$N[0])*G$x,(G$N[5]-G$N[3])*G$K,G$r+G$R,G$v+G$W,G$H,G$A),this.restore()},G$q.drawTexture2=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O=G$W[0];if(G$O.loaded&&G$O.bitmap&&G$O.source){G$l.drawCall++;var G$N=1!==G$y;if(G$N){var G$x=this.globalAlpha;this.globalAlpha*=G$y}var G$K=G$O.uv,G$T=G$O.bitmap.width,G$j=G$O.bitmap.height;G$A?(this.save(),this.transform(G$A.a,G$A.b,G$A.c,G$A.d,G$A.tx+G$q,G$A.ty+G$r),this.drawImage(G$O.source,G$K[0]*G$T,G$K[1]*G$j,(G$K[2]-G$K[0])*G$T,(G$K[5]-G$K[3])*G$j,G$W[1]-G$v,G$W[2]-G$H,G$W[3],G$W[4]),this.restore()):this.drawImage(G$O.source,G$K[0]*G$T,G$K[1]*G$j,(G$K[2]-G$K[0])*G$T,(G$K[5]-G$K[3])*G$j,G$W[1]-G$v+G$q,G$W[2]-G$H+G$r,G$W[3],G$W[4]),G$N&&(this.globalAlpha=G$x)}},G$q.fillTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){if(!G$W.pat){if(G$q.uv!=G$xq.DEF_UV){var G$O=new G$eq("2D");G$O.getContext("2d"),G$O.size(G$q.width,G$q.height),G$O.context.drawTexture(G$q,0,0,G$q.width,G$q.height,0,0),G$q=new G$xq(G$O)}G$W.pat=this.createPattern(G$q.bitmap.source,G$y)}var G$N=G$r,G$x=G$v,G$K=0,G$T=0;G$R&&(G$N+=G$R.x%G$q.width,G$x+=G$R.y%G$q.height,G$K-=G$R.x%G$q.width,G$T-=G$R.y%G$q.height),this.translate(G$N,G$x),this.fillRect(G$K,G$T,G$H,G$A,G$W.pat),this.translate(-G$N,-G$x)},G$q.drawTriangle=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O=G$q.bitmap,G$N=G$O.source,G$x=G$q.width,G$K=G$q.height,G$T=G$O.width,G$j=G$O.height,G$D=G$v[G$H]*G$T,G$g=G$v[G$A]*G$T,G$X=G$v[G$y]*G$T,G$m=G$v[G$H+1]*G$j,G$B=G$v[G$A+1]*G$j,G$e=G$v[G$y+1]*G$j,G$p=G$r[G$H],G$M=G$r[G$A],G$z=G$r[G$y],G$P=G$r[G$H+1],G$V=G$r[G$A+1],G$a=G$r[G$y+1];if(G$W){var G$J=(G$p+G$M+G$z)/3,G$$=(G$P+G$V+G$a)/3,G$G=G$p-G$J,G$E=G$P-G$$,G$Q=Math.sqrt(G$G*G$G+G$E*G$E);G$p=G$J+G$G/G$Q*(G$Q+1),G$P=G$$+G$E/G$Q*(G$Q+1),G$E=G$V-G$$,G$M=G$J+(G$G=G$M-G$J)/(G$Q=Math.sqrt(G$G*G$G+G$E*G$E))*(G$Q+1),G$V=G$$+G$E/G$Q*(G$Q+1),G$E=G$a-G$$,G$z=G$J+(G$G=G$z-G$J)/(G$Q=Math.sqrt(G$G*G$G+G$E*G$E))*(G$Q+1),G$a=G$$+G$E/G$Q*(G$Q+1)}this.save(),G$R&&this.transform(G$R.a,G$R.b,G$R.c,G$R.d,G$R.tx,G$R.ty),this.beginPath(),this.moveTo(G$p,G$P),this.lineTo(G$M,G$V),this.lineTo(G$z,G$a),this.closePath(),this.clip();var G$s=1/(G$D*G$B+G$m*G$X+G$g*G$e-G$B*G$X-G$m*G$g-G$D*G$e),G$Z=G$p*G$B+G$m*G$z+G$M*G$e-G$B*G$z-G$m*G$M-G$p*G$e,G$Y=G$D*G$M+G$p*G$X+G$g*G$z-G$M*G$X-G$p*G$g-G$D*G$z,G$o=G$D*G$B*G$z+G$m*G$M*G$X+G$p*G$g*G$e-G$p*G$B*G$X-G$m*G$g*G$z-G$D*G$M*G$e,G$C=G$P*G$B+G$m*G$a+G$V*G$e-G$B*G$a-G$m*G$V-G$P*G$e,G$c=G$D*G$V+G$P*G$X+G$g*G$a-G$V*G$X-G$P*G$g-G$D*G$a,G$b=G$D*G$B*G$a+G$m*G$V*G$X+G$P*G$g*G$e-G$P*G$B*G$X-G$m*G$g*G$a-G$D*G$V*G$e;this.transform(G$Z*G$s,G$C*G$s,G$Y*G$s,G$c*G$s,G$o*G$s,G$b*G$s),this.drawImage(G$N,G$q.uv[0]*G$T,G$q.uv[1]*G$j,G$x,G$K,G$q.uv[0]*G$T,G$q.uv[1]*G$j,G$x,G$K),this.restore()},G$q.flush=function(){return 0},G$q.fillWords=function(G$q,G$r,G$v,G$H,G$A,G$y){G$H&&(this.font=G$H),G$A&&(this.fillStyle=G$A);this.textBaseline="top",this.textAlign="left";for(var G$R=0,G$W=G$q.length;G$R<G$W;G$R++){var G$O=G$q[G$R];if(this.__fillText(G$O.char,G$O.x+G$r,G$O.y+G$v),1===G$y){var G$N=G$O.height,G$x=.5*G$O.style.letterSpacing;G$x||(G$x=0),this.beginPath(),this.strokeStyle=G$A,this.lineWidth=1,this.moveTo(G$r+G$O.x-G$x+.5,G$v+G$O.y+G$N+.5),this.lineTo(G$r+G$O.x+G$O.width+G$x+.5,G$v+G$O.y+G$N+.5),this.stroke()}}},G$q.fillBorderWords=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$H&&(this.font=G$H),G$A&&(this.fillStyle=G$A),this.textBaseline="top",this.lineWidth=G$R,this.textAlign="left",this.strokeStyle=G$y;for(var G$W=0,G$O=G$q.length;G$W<G$O;G$W++){var G$N=G$q[G$W];this.__strokeText(G$N.char,G$N.x+G$r,G$N.y+G$v),this.__fillText(G$N.char,G$N.x+G$r,G$N.y+G$v)}},G$q.destroy=function(){this.canvas.width=this.canvas.height=0},G$q.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},G$q.drawCurves=function(G$q,G$r,G$v){this.beginPath(),this.strokeStyle=G$v[3],this.lineWidth=G$v[4];var G$H=G$v[2];G$q+=G$v[0],G$r+=G$v[1],this.moveTo(G$q+G$H[0],G$r+G$H[1]);for(var G$A=2,G$y=G$H.length;G$A<G$y;)this.quadraticCurveTo(G$q+G$H[G$A++],G$r+G$H[G$A++],G$q+G$H[G$A++],G$r+G$H[G$A++]);this.stroke()},G$W.__init__=function(G$r){var G$v=laya.resource.Context.prototype;if(!(G$r=G$r||CanvasRenderingContext2D.prototype).inited){G$r.inited=!0,G$r.__fillText=G$r.fillText,G$r.__fillRect=G$r.fillRect,G$r.__strokeText=G$r.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(G$q){G$r[G$q]=G$v[G$q]})}},G$W.replaceCanvasGetSet=function(G$q,G$r){var G$v=Object.getOwnPropertyDescriptor(G$q,G$r);if(!G$v||!G$v.configurable)return!1;var G$H,G$A={};for(G$H in G$v)"set"!=G$H&&(G$A[G$H]=G$v[G$H]);var G$y=G$v.set;return G$A.set=function(G$q){G$y.call(this,G$q);var G$r=this.getContext("2d");G$r&&"__reset"in G$r&&G$r.__reset()},Object.defineProperty(G$q,G$r,G$A),!0},G$W.replaceGetSet=function(G$q,G$r){var G$v=Object.getOwnPropertyDescriptor(G$q,G$r);if(!G$v||!G$v.configurable)return!1;var G$H,G$A={};for(G$H in G$v)"set"!=G$H&&(G$A[G$H]=G$v[G$H]);var G$y=G$v.set,G$R="___"+G$r+"__";return G$W.newKeys.push(G$R),G$A.set=function(G$q){G$q!=this[G$R]&&(this[G$R]=G$q,G$y.call(this,G$q))},Object.defineProperty(G$q,G$r,G$A),!0},G$W._default=new G$W,G$W.newKeys=[],G$O(G$W,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),G$W}(),G$b=function(){function G$y(G$q){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++G$y._uniqueIDCounter,this._name=G$q||"Content Manager",G$y._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,G$y._resourceManagers.push(this),this._resources=[],this._records={}}G$x(G$y,"laya.resource.ResourceManager");var G$q=G$y.prototype;return G$P.imps(G$q,{"laya.resource.IDispose":!0}),G$q.getResourceByIndex=function(G$q){return this._resources[G$q]},G$q.getResourcesLength=function(){return this._resources.length},G$q.addResource=function(G$q){return G$q.resourceManager&&G$q.resourceManager.removeResource(G$q),-1===this._resources.indexOf(G$q)&&((G$q._resourceManager=this)._resources.push(G$q),this.addRecord(G$q.uri,G$q.__className,G$q.memorySize),this.addSize(G$q.memorySize),!0)},G$q.removeResource=function(G$q){var G$r=this._resources.indexOf(G$q);return-1!==G$r&&(this._resources.splice(G$r,1),G$q._resourceManager=null,this._memorySize-=G$q.memorySize,this.addRecord(G$q.uri,G$q.__className,-G$q.memorySize),!0)},G$q.unload=function(){for(var G$q=this._resources.slice(0,this._resources.length),G$r=0;G$r<G$q.length;G$r++){G$q[G$r].destroy()}G$q.length=0},G$q.dispose=function(){if(this===G$y._systemResourceManager)throw new Error("systemResourceManager不能被释放！");G$y._resourceManagers.splice(G$y._resourceManagers.indexOf(this),1),G$y._isResourceManagersSorted=!1;for(var G$q=this._resources.slice(0,this._resources.length),G$r=0;G$r<G$q.length;G$r++){var G$v=G$q[G$r];G$v.resourceManager.removeResource(G$v),G$v.destroy()}G$q.length=0},G$q.addSize=function(G$q){G$q&&(this.autoRelease&&0<G$q&&this._memorySize+G$q>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=G$q)},G$q.addRecord=function(G$q,G$r,G$v){DEBUG&&G$v&&!G$q&&console.error(G$q,G$r,G$v)},G$q.garbageCollection=function(G$q){var G$r=this._resources;(G$r=G$r.slice()).sort(function(G$q,G$r){if(!G$q||!G$r)throw new Error("a或b不能为空！");return G$q.released&&G$r.released?0:G$q.released?1:G$r.released?-1:G$q._lastUseFrameCount-G$r._lastUseFrameCount});for(var G$v=G$l.loopCount,G$H=0,G$A=G$r.length;G$H<G$A;G$H++){var G$y=G$r[G$H];if(!(1<G$v-G$y._lastUseFrameCount))return void(this._memorySize>=G$q&&(this._isOverflow=!0));if(G$y.releaseResource(),this._memorySize<G$q)return void(this._isOverflow=!1)}},G$D(0,G$q,"id",function(){return this._id}),G$D(0,G$q,"name",function(){return this._name},function(G$q){!G$q&&""===G$q||this._name===G$q||(this._name=G$q,G$y._isResourceManagersSorted=!1)}),G$D(0,G$q,"memorySize",function(){return this._memorySize}),G$D(0,G$q,"records",function(){return this._records}),G$D(1,G$y,"systemResourceManager",function(){return G$y._systemResourceManager}),G$y.__init__=function(){G$y.currentResourceManager=G$y.systemResourceManager},G$y.getLoadedResourceManagerByIndex=function(G$q){return G$y._resourceManagers[G$q]},G$y.getLoadedResourceManagersCount=function(){return G$y._resourceManagers.length},G$y.recreateContentManagers=function(G$q){void 0===G$q&&(G$q=!1);for(var G$r=G$y.currentResourceManager,G$v=0;G$v<G$y._resourceManagers.length;G$v++){G$y.currentResourceManager=G$y._resourceManagers[G$v];for(var G$H=0;G$H<G$y.currentResourceManager._resources.length;G$H++)G$y.currentResourceManager._resources[G$H].releaseResource(G$q),G$y.currentResourceManager._resources[G$H].activeResource(G$q)}G$y.currentResourceManager=G$r},G$y.releaseContentManagers=function(G$q){void 0===G$q&&(G$q=!1);for(var G$r=G$y.currentResourceManager,G$v=0;G$v<G$y._resourceManagers.length;G$v++){G$y.currentResourceManager=G$y._resourceManagers[G$v];for(var G$H=0;G$H<G$y.currentResourceManager._resources.length;G$H++){var G$A=G$y.currentResourceManager._resources[G$H];!G$A.released&&G$A.releaseResource(G$q)}}G$y.currentResourceManager=G$r},G$y._uniqueIDCounter=0,G$y._isResourceManagersSorted=!1,G$y._resourceManagers=[],G$O(G$y,["_systemResourceManager",function(){return this._systemResourceManager=new G$y("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=G$y._systemResourceManager}]),G$y}(),G$d=(function(){function G$q(){}G$x(G$q,"laya.system.System"),G$q.changeDefinition=function(G$q,G$r){G$P[G$q]=G$r;var G$v=G$q+"=classObj";G$P._runScript(G$v)},G$q.__init__=function(){G$Y.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function G$v(){}return G$x(G$v,"laya.utils.Browser"),G$D(1,G$v,"pixelRatio",function(){return G$v.__init__(),-1<G$v.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:G$E.getPixelRatio()}),G$D(1,G$v,"height",function(){return G$v.__init__(),(G$P.stage&&G$P.stage.canvasRotation?G$v.clientWidth:G$v.clientHeight)*G$v.pixelRatio}),G$D(1,G$v,"clientWidth",function(){return G$v.__init__(),G$v.window.innerWidth||G$v.document.body.clientWidth}),G$D(1,G$v,"window",function(){return G$v.__init__(),G$v._window}),G$D(1,G$v,"clientHeight",function(){return G$v.__init__(),G$v.window.innerHeight||G$v.document.body.clientHeight||G$v.document.documentElement.clientHeight}),G$D(1,G$v,"width",function(){return G$v.__init__(),(G$P.stage&&G$P.stage.canvasRotation?G$v.clientHeight:G$v.clientWidth)*G$v.pixelRatio}),G$D(1,G$v,"container",function(){return G$v.__init__(),G$v._container||((G$v._container=G$v.createElement("div")).id="layaContainer",G$v.document.body.appendChild(G$v._container)),G$v._container},function(G$q){G$v._container=G$q}),G$D(1,G$v,"document",function(){return G$v.__init__(),G$v._document}),G$v.__init__=function(){if(!G$v._window){G$v._window=G$E.getWindow(),G$v._document=G$v.window.document,G$v._window.addEventListener("message",function(G$q){laya.utils.Browser._onMessage(G$q)},!1),G$v.document.__createElement=G$v.document.createElement,G$R.requestAnimationFrame=G$R.requestAnimationFrame||G$R.webkitRequestAnimationFrame||G$R.mozRequestAnimationFrame||G$R.oRequestAnimationFrame||G$R.msRequestAnimationFrame||function(G$q){return G$R.setTimeout(G$q,1e3/60)};var G$q=G$R.document.body.style;G$q["-webkit-user-select"]="none",G$q["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",G$v.userAgent=G$v.window.navigator.userAgent,G$v.onIOS=!!(G$v.u=G$v.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),G$v.onMobile=-1<G$v.u.indexOf("Mobile"),G$v.onIPhone=-1<G$v.u.indexOf("iPhone"),G$v.onMac=-1<G$v.u.indexOf("Mac OS X"),G$v.onIPad=-1<G$v.u.indexOf("iPad"),G$v.onAndroid=-1<G$v.u.indexOf("Android")||-1<G$v.u.indexOf("Adr"),G$v.onWP=-1<G$v.u.indexOf("Windows Phone"),G$v.onQQBrowser=-1<G$v.u.indexOf("QQBrowser"),G$v.onMQQBrowser=-1<G$v.u.indexOf("MQQBrowser")||-1<G$v.u.indexOf("Mobile")&&-1<G$v.u.indexOf("QQ"),G$v.onIE=!!G$v.window.ActiveXObject||"ActiveXObject"in G$v.window,G$v.onWeiXin=-1<G$v.u.indexOf("MicroMessenger"),G$v.onPC=!G$v.onMobile,G$v.onSafari=-1<G$v.u.indexOf("Safari"),G$v.onFirefox=-1<G$v.u.indexOf("Firefox"),G$v.onEdge=-1<G$v.u.indexOf("Edge"),G$v.onMiniGame=-1<G$v.u.indexOf("MiniGame"),G$v.onLimixiu=-1<G$v.u.indexOf("limixiu"),G$v.httpProtocol="http:"==G$v.window.location.protocol,G$v.onMiniGame&&null==G$v.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),G$v.webAudioEnabled=!!(G$v.window.AudioContext||G$v.window.webkitAudioContext||G$v.window.mozAudioContext),G$v.soundType=G$v.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",G$Aq=G$v.webAudioEnabled?G$yq:G$vq,G$v.webAudioEnabled&&G$yq.initWebAudio(),G$vq._initMusicAudio(),G$v.enableTouch="ontouchstart"in G$R||G$R.DocumentTouch&&G$r instanceof DocumentTouch,G$R.focus(),G$G._soundClass=G$Aq,G$G._musicClass=G$vq,G$Y._mainCanvas=G$Y._mainCanvas||G$eq.create("2D"),G$v.canvas||(G$v.canvas=G$eq.create("2D"),G$v.context=G$v.canvas.getContext("2d"))}},G$v._onMessage=function(G$q){if(G$q.data&&"size"==G$q.data.name){if(G$v.window.innerWidth=G$q.data.width,G$v.window.innerHeight=G$q.data.height,G$v.window.__innerHeight=G$q.data.clientHeight,!G$v.document.createEvent)return void console.warn("no document.createEvent");var G$r=G$v.document.createEvent("HTMLEvents");return G$r.initEvent("resize",!1,!1),void G$v.window.dispatchEvent(G$r)}},G$v.createElement=function(G$q){return G$v.__init__(),G$v.document.__createElement(G$q)},G$v.getElementById=function(G$q){return G$v.__init__(),G$v.document.getElementById(G$q)},G$v.removeElement=function(G$q){G$q&&G$q.parentNode&&G$q.parentNode.removeChild(G$q)},G$v.now=function(){return G$E.now()},G$v._window=null,G$v._document=null,G$v._container=null,G$v.userAgent=null,G$v.u=null,G$v.onIOS=!1,G$v.onMac=!1,G$v.onMobile=!1,G$v.onIPhone=!1,G$v.onIPad=!1,G$v.onAndroid=!1,G$v.onWP=!1,G$v.onQQBrowser=!1,G$v.onMQQBrowser=!1,G$v.onSafari=!1,G$v.onFirefox=!1,G$v.onEdge=!1,G$v.onIE=!1,G$v.onWeiXin=!1,G$v.onMiniGame=!1,G$v.onLimixiu=!1,G$v.onPC=!1,G$v.httpProtocol=!1,G$v.webAudioEnabled=!1,G$v.soundType=null,G$v.enableTouch=!1,G$v.canvas=null,G$v.context=null,G$v.__init$=function(){},G$v}()),G$u=function(){function G$r(G$q){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,G$q?(this._u8d_=new Uint8Array(G$q),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}G$x(G$r,"laya.utils.Byte");var G$q=G$r.prototype;return G$q.___resizeBuffer=function(G$r){try{var G$q=new Uint8Array(G$r);null!=this._u8d_&&(this._u8d_.length<=G$r?G$q.set(this._u8d_):G$q.set(this._u8d_.subarray(0,G$r))),this._u8d_=G$q,this._d_=new DataView(G$q.buffer)}catch(G$q){throw"___resizeBuffer err:"+G$r}},G$q.getString=function(){return this.rUTF(this.getUint16())},G$q.getFloat32Array=function(G$q,G$r){var G$v=G$q+G$r;G$v=G$v>this._length?this._length:G$v;var G$H=new Float32Array(this._d_.buffer.slice(G$q,G$v));return this._pos_=G$v,G$H},G$q.getUint8Array=function(G$q,G$r){var G$v=G$q+G$r;G$v=G$v>this._length?this._length:G$v;var G$H=new Uint8Array(this._d_.buffer.slice(G$q,G$v));return this._pos_=G$v,G$H},G$q.getInt16Array=function(G$q,G$r){var G$v=G$q+G$r;G$v=G$v>this._length?this._length:G$v;var G$H=new Int16Array(this._d_.buffer.slice(G$q,G$v));return this._pos_=G$v,G$H},G$q.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var G$q=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,G$q},G$q.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var G$q=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,G$q},G$q.writeFloat32=function(G$q){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,G$q,this._xd_),this._pos_+=4},G$q.writeFloat64=function(G$q){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,G$q,this._xd_),this._pos_+=8},G$q.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var G$q=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,G$q},G$q.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var G$q=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,G$q},G$q.writeInt32=function(G$q){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,G$q,this._xd_),this._pos_+=4},G$q.writeUint32=function(G$q){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,G$q,this._xd_),this._pos_+=4},G$q.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var G$q=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,G$q},G$q.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var G$q=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,G$q},G$q.writeUint16=function(G$q){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,G$q,this._xd_),this._pos_+=2},G$q.writeInt16=function(G$q){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,G$q,this._xd_),this._pos_+=2},G$q.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},G$q.writeUint8=function(G$q){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,G$q),this._pos_++},G$q._getUInt8=function(G$q){return this._d_.getUint8(G$q)},G$q._getUint16=function(G$q){return this._d_.getUint16(G$q,this._xd_)},G$q._getMatrix=function(){return new G$Q(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},G$q.rUTF=function(G$q){for(var G$r=[],G$v=this._pos_+G$q,G$H=0,G$A=0,G$y=0,G$R=String.fromCharCode,G$W=this._u8d_;this._pos_<G$v;)(G$H=G$W[this._pos_++])<128?0!=G$H&&G$r.push(G$R(G$H)):G$H<224?G$r.push(G$R((63&G$H)<<6|127&G$W[this._pos_++])):G$H<240?(G$A=G$W[this._pos_++],G$r.push(G$R((31&G$H)<<12|(127&G$A)<<6|127&G$W[this._pos_++]))):(G$A=G$W[this._pos_++],G$y=G$W[this._pos_++],G$r.push(G$R((15&G$H)<<18|(127&G$A)<<12|G$y<<6&127|127&G$W[this._pos_++]))),0;return G$r.join("")},G$q.getCustomString=function(G$q){for(var G$r=[],G$v=0,G$H=0,G$A=0,G$y=String.fromCharCode,G$R=this._u8d_;0<G$q;)if((G$H=G$R[this._pos_])<128)G$r.push(G$y(G$H)),this._pos_++,G$q--;else for(G$v=G$H-128,this._pos_++,G$q-=G$v;0<G$v;)G$H=G$R[this._pos_++],G$A=G$R[this._pos_++],G$r.push(G$y(G$A<<8|G$H)),G$v--;return G$r.join("")},G$q.clear=function(){this._pos_=0,this.length=0},G$q.__getBuffer=function(){return this._d_.buffer},G$q.writeUTFBytes=function(G$q){for(var G$r=0,G$v=(G$q+="").length;G$r<G$v;G$r++){var G$H=G$q.charCodeAt(G$r);G$H<=127?this.writeByte(G$H):G$H<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|G$H>>6,128|63&G$H],this._pos_),this._pos_+=2):G$H<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|G$H>>12,128|G$H>>6&63,128|63&G$H],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|G$H>>18,128|G$H>>12&63,128|G$H>>6&63,128|63&G$H],this._pos_),this._pos_+=4)}},G$q.writeUTFString=function(G$q){var G$r=this.pos;this.writeUint16(1),this.writeUTFBytes(G$q);var G$v=this.pos-G$r-2;if(65536<=G$v)throw"writeUTFString byte len more than 65536";this._d_.setUint16(G$r,G$v,this._xd_)},G$q.readUTFString=function(){return this.readUTFBytes(this.getUint16())},G$q.getUTFString=function(){return this.readUTFString()},G$q.readUTFBytes=function(G$q){if(void 0===G$q&&(G$q=-1),0==G$q)return"";var G$r=this.bytesAvailable;if(G$r<G$q)throw"readUTFBytes error - Out of bounds";return G$q=0<G$q?G$q:G$r,this.rUTF(G$q)},G$q.getUTFBytes=function(G$q){return void 0===G$q&&(G$q=-1),this.readUTFBytes(G$q)},G$q.writeByte=function(G$q){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,G$q),this._pos_+=1},G$q.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},G$q.getByte=function(){return this.readByte()},G$q.ensureWrite=function(G$q){this._length<G$q&&(this._length=G$q),this._allocated_<G$q&&(this.length=G$q)},G$q.writeArrayBuffer=function(G$q,G$r,G$v){if(void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),G$r<0||G$v<0)throw"writeArrayBuffer error - Out of bounds";0==G$v&&(G$v=G$q.byteLength-G$r),this.ensureWrite(this._pos_+G$v);var G$H=new Uint8Array(G$q);this._u8d_.set(G$H.subarray(G$r,G$r+G$v),this._pos_),this._pos_+=G$v},G$D(0,G$q,"buffer",function(){var G$q=this._d_.buffer;return G$q.byteLength==this.length?G$q:G$q.slice(0,this.length)}),G$D(0,G$q,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(G$q){this._xd_="littleEndian"==G$q}),G$D(0,G$q,"length",function(){return this._length},function(G$q){this._allocated_<G$q?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(G$q,2*this._allocated_))):this._allocated_>G$q&&this.___resizeBuffer(this._allocated_=G$q),this._length=G$q}),G$D(0,G$q,"pos",function(){return this._pos_},function(G$q){this._pos_=G$q}),G$D(0,G$q,"bytesAvailable",function(){return this._length-this._pos_}),G$r.getSystemEndian=function(){if(!G$r._sysEndian){var G$q=new ArrayBuffer(2);new DataView(G$q).setInt16(0,256,!0),G$r._sysEndian=256===new Int16Array(G$q)[0]?"littleEndian":"bigEndian"}return G$r._sysEndian},G$r.BIG_ENDIAN="bigEndian",G$r.LITTLE_ENDIAN="littleEndian",G$r._sysEndian=null,G$r}(),G$I=function(){function G$A(){}return G$x(G$A,"laya.utils.CacheManager"),G$A.regCacheByFunction=function(G$q,G$r){var G$v;G$A.unRegCacheByFunction(G$q,G$r),G$v={tryDispose:G$q,getCacheList:G$r},G$A._cacheList.push(G$v)},G$A.unRegCacheByFunction=function(G$q,G$r){var G$v,G$H=0;for(G$v=G$A._cacheList.length,G$H=0;G$H<G$v;G$H++)if(G$A._cacheList[G$H].tryDispose==G$q&&G$A._cacheList[G$H].getCacheList==G$r)return void G$A._cacheList.splice(G$H,1)},G$A.forceDispose=function(){var G$q=0,G$r=G$A._cacheList.length;for(G$q=0;G$q<G$r;G$q++)G$A._cacheList[G$q].tryDispose(!0)},G$A.beginCheck=function(G$q){void 0===G$q&&(G$q=15e3),G$P.timer.loop(G$q,null,G$A._checkLoop)},G$A.stopCheck=function(){G$P.timer.clear(null,G$A._checkLoop)},G$A._checkLoop=function(){var G$q=G$A._cacheList;if(!(G$q.length<1)){var G$r,G$v=G$d.now(),G$H=0;for(G$r=G$H=G$q.length;0<G$H&&(G$q[G$A._index=++G$A._index%G$r].tryDispose(!1),!(G$d.now()-G$v>G$A.loopTimeLimit));)G$H--}},G$A.loopTimeLimit=2,G$A._cacheList=[],G$A._index=0,G$A}(),G$t=function(){function G$j(){}return G$x(G$j,"laya.utils.ClassUtils"),G$j.regClass=function(G$q,G$r){G$j._classMap[G$q]=G$r},G$j.getRegClass=function(G$q){return G$j._classMap[G$q]},G$j.getInstance=function(G$q){var G$r=G$j.getClass(G$q);return G$r?new G$r:(console.warn("[error] Undefined class:",G$q),null)},G$j.createByJson=function(G$q,G$r,G$v,G$H,G$A){"string"==typeof G$q&&(G$q=JSON.parse(G$q));var G$y=G$q.props;if(!G$r&&!(G$r=G$A?G$A.runWith(G$q):G$j.getInstance(G$y.runtime||G$q.type)))return null;var G$R=G$q.child;if(G$R)for(var G$W=0,G$O=G$R.length;G$W<G$O;G$W++){var G$N=G$R[G$W];if("render"!==G$N.props.name&&"render"!==G$N.props.renderType||!G$r._$set_itemRender)if("Graphic"==G$N.type)G$j.addGraphicsToSprite(G$N,G$r);else if(G$j.isDrawType(G$N.type))G$j.addGraphicToSprite(G$N,G$r,!0);else{var G$x=G$j.createByJson(G$N,null,G$v,G$H,G$A);"Script"==G$N.type?G$x.hasOwnProperty("owner")?G$x.owner=G$r:G$x.hasOwnProperty("target")&&(G$x.target=G$r):"mask"==G$N.props.renderType?G$r.mask=G$x:G$r.addChild(G$x)}else G$r.itemRender=G$N}if(G$y)for(var G$K in G$y){var G$T=G$y[G$K];"var"===G$K&&G$v?G$v[G$T]=G$r:G$T instanceof Array&&"function"==typeof G$r[G$K]?G$r[G$K].apply(G$r,G$T):G$r[G$K]=G$T}return G$H&&G$q.customProps&&G$H.runWith([G$r,G$q]),G$r.created&&G$r.created(),G$r},G$j.addGraphicsToSprite=function(G$q,G$r){var G$v;if((G$v=G$q.child)&&!(G$v.length<1)){var G$H;G$H=G$j._getGraphicsFromSprite(G$q,G$r);var G$A=0,G$y=0;G$q.props&&(G$A=G$j._getObjVar(G$q.props,"x",0),G$y=G$j._getObjVar(G$q.props,"y",0)),0!=G$A&&0!=G$y&&G$H.translate(G$A,G$y);var G$R,G$W=0;for(G$R=G$v.length,G$W=0;G$W<G$R;G$W++)G$j._addGraphicToGraphics(G$v[G$W],G$H);0!=G$A&&0!=G$y&&G$H.translate(-G$A,-G$y)}},G$j.addGraphicToSprite=function(G$q,G$r,G$v){var G$H;void 0===G$v&&(G$v=!1),G$H=G$v?G$j._getGraphicsFromSprite(G$q,G$r):G$r.graphics,G$j._addGraphicToGraphics(G$q,G$H)},G$j._getGraphicsFromSprite=function(G$q,G$r){var G$v,G$H;if(!G$q||!G$q.props)return G$r.graphics;switch(G$H=G$q.props.renderType){case"hit":case"unHit":var G$A;G$r.hitArea||(G$r.hitArea=new G$f),(G$A=G$r.hitArea)[G$H]||(G$A[G$H]=new G$T),G$v=G$A[G$H]}return G$v||(G$v=G$r.graphics),G$v},G$j._getTransformData=function(G$q){var G$r;(G$q.hasOwnProperty("pivotX")||G$q.hasOwnProperty("pivotY"))&&(G$r=G$r||new G$Q).translate(-G$j._getObjVar(G$q,"pivotX",0),-G$j._getObjVar(G$q,"pivotY",0));var G$v=G$j._getObjVar(G$q,"scaleX",1),G$H=G$j._getObjVar(G$q,"scaleY",1),G$A=G$j._getObjVar(G$q,"rotation",0);G$j._getObjVar(G$q,"skewX",0),G$j._getObjVar(G$q,"skewY",0);return 1==G$v&&1==G$H&&0==G$A||((G$r=G$r||new G$Q).scale(G$v,G$H),G$r.rotate(.0174532922222222*G$A)),G$r},G$j._addGraphicToGraphics=function(G$q,G$r){var G$v,G$H;if((G$v=G$q.props)&&(G$H=G$j.DrawTypeDic[G$q.type])){var G$A,G$y;G$A=G$r;var G$R=G$j._getParams(G$v,G$H[1],G$H[2],G$H[3]);((G$y=G$j._tM)||1!=G$j._alpha)&&(G$A.save(),G$y&&G$A.transform(G$y),1!=G$j._alpha&&G$A.alpha(G$j._alpha)),G$A[G$H[0]].apply(G$A,G$R),(G$y||1!=G$j._alpha)&&G$A.restore()}},G$j._adptLineData=function(G$q){return G$q[2]=parseFloat(G$q[0])+parseFloat(G$q[2]),G$q[3]=parseFloat(G$q[1])+parseFloat(G$q[3]),G$q},G$j._adptTextureData=function(G$q){return G$q[0]=G$Wq.getRes(G$q[0]),G$q},G$j._adptLinesData=function(G$q){return G$q[2]=G$j._getPointListByStr(G$q[2]),G$q},G$j.isDrawType=function(G$q){return"Image"!=G$q&&G$j.DrawTypeDic.hasOwnProperty(G$q)},G$j._getParams=function(G$q,G$r,G$v,G$H){var G$A;void 0===G$v&&(G$v=0),(G$A=G$j._temParam).length=G$r.length;var G$y,G$R,G$W=0;for(G$y=G$r.length,G$W=0;G$W<G$y;G$W++)G$A[G$W]=G$j._getObjVar(G$q,G$r[G$W][0],G$r[G$W][1]);return G$j._alpha=G$j._getObjVar(G$q,"alpha",1),G$R=G$j._getTransformData(G$q),G$j._tM=G$R?(G$v||(G$v=0),G$R.translate(G$A[G$v],G$A[G$v+1]),G$A[G$v]=G$A[G$v+1]=0,G$R):null,G$H&&G$j[G$H]&&(G$A=G$j[G$H](G$A)),G$A},G$j._getPointListByStr=function(G$q){var G$r,G$v,G$H=0;for(G$v=(G$r=G$q.split(",")).length,G$H=0;G$H<G$v;G$H++)G$r[G$H]=parseFloat(G$r[G$H]);return G$r},G$j._getObjVar=function(G$q,G$r,G$v){return G$q.hasOwnProperty(G$r)?G$q[G$r]:G$v},G$j._temParam=[],G$j._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},G$j.getClass=function(G$q){var G$r=G$j._classMap[G$q]||G$q;return"string"==typeof G$r?G$P.__classmap[G$r]:G$r},G$j._tM=null,G$j._alpha=NaN,G$O(G$j,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),G$j}(),G$F=function(){function G$y(G$q){if(this._color=[],"string"==typeof G$q){null===(this.strColor=G$q)&&(G$q="#000000"),"#"==G$q.charAt(0)&&(G$q=G$q.substr(1));var G$r=G$q.length;if(3==G$r||4==G$r){for(var G$v="",G$H=0;G$H<G$r;G$H++)G$v+=G$q[G$H]+G$q[G$H];G$q=G$v}var G$A=this.numColor=parseInt(G$q,16);if(8==G$q.length)return void(this._color=[parseInt(G$q.substr(0,2),16)/255,((16711680&G$A)>>16)/255,((65280&G$A)>>8)/255,(255&G$A)/255])}else G$A=this.numColor=G$q,this.strColor=G$w.toHexColor(G$A);this._color=[((16711680&G$A)>>16)/255,((65280&G$A)>>8)/255,(255&G$A)/255,1],this._color.__id=++G$y._COLODID}return G$x(G$y,"laya.utils.Color"),G$y._initDefault=function(){for(var G$q in G$y._DEFAULT={},G$y._COLOR_MAP)G$y._SAVE[G$q]=G$y._DEFAULT[G$q]=new G$y(G$y._COLOR_MAP[G$q]);return G$y._DEFAULT},G$y._initSaveMap=function(){for(var G$q in G$y._SAVE_SIZE=0,G$y._SAVE={},G$y._DEFAULT)G$y._SAVE[G$q]=G$y._DEFAULT[G$q]},G$y.create=function(G$q){var G$r=G$y._SAVE[G$q+""];return null!=G$r?G$r:(G$y._SAVE_SIZE<1e3||G$y._initSaveMap(),G$y._SAVE[G$q+""]=new G$y(G$q))},G$y._SAVE={},G$y._SAVE_SIZE=0,G$y._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},G$y._DEFAULT=G$y._initDefault(),G$y._COLODID=1,G$y}(),G$U=(function(){function G$q(){this._values=[],this._keys=[]}G$x(G$q,"laya.utils.Dictionary");var G$r=G$q.prototype;G$r.set=function(G$q,G$r){var G$v=this.indexOf(G$q);0<=G$v?this._values[G$v]=G$r:(this._keys.push(G$q),this._values.push(G$r))},G$r.indexOf=function(G$q){var G$r=this._keys.indexOf(G$q);return 0<=G$r?G$r:(G$q="string"==typeof G$q?Number(G$q):"number"==typeof G$q?G$q.toString():G$q,this._keys.indexOf(G$q))},G$r.get=function(G$q){var G$r=this.indexOf(G$q);return G$r<0?null:this._values[G$r]},G$r.remove=function(G$q){var G$r=this.indexOf(G$q);return 0<=G$r&&(this._keys.splice(G$r,1),this._values.splice(G$r,1),!0)},G$r.clear=function(){this._values.length=0,this._keys.length=0},G$D(0,G$r,"values",function(){return this._values}),G$D(0,G$r,"keys",function(){return this._keys})}(),function(){function G$q(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}G$x(G$q,"laya.utils.Dragging");var G$r=G$q.prototype;return G$r.start=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){void 0===G$W&&(G$W=.92),this.clearTimer(),this.target=G$q,this.area=G$r,this.hasInertia=G$v,this.elasticDistance=G$r?G$H:0,this.elasticBackTime=G$A,this.data=G$y,this._disableMouseEvent=G$R,this.ratio=G$W,1!=G$q.globalScaleX||1!=G$q.globalScaleY?this._parent=G$q.parent:this._parent=G$P.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,G$P.stage.on("mouseup",this,this.onStageMouseUp),G$P.stage.on("mouseout",this,this.onStageMouseUp),G$P.timer.frameLoop(1,this,this.loop)},G$r.clearTimer=function(){G$P.timer.clear(this,this.loop),G$P.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},G$r.stop=function(){this._dragging&&(G$g.instance.disableMouseEvent=!1,G$P.stage.off("mouseup",this,this.onStageMouseUp),G$P.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},G$r.loop=function(){var G$q=this._parent.getMousePoint(),G$r=G$q.x,G$v=G$q.y,G$H=G$r-this._lastX,G$A=G$v-this._lastY;if(this._clickOnly){if(!(1<Math.abs(G$H*G$P.stage._canvasTransform.getScaleX())||1<Math.abs(G$A*G$P.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),G$g.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(G$H,G$A);0==G$H&&0==G$A||(this._lastX=G$r,this._lastY=G$v,this.target.x+=G$H*this._elasticRateX,this.target.y+=G$A*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},G$r.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var G$q=this.area.x-this.target.x;else G$q=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-G$q/this.elasticDistance),this.target.y<this.area.y)var G$r=this.area.y-this.target.y;else G$r=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-G$r/this.elasticDistance)}},G$r.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},G$r.onStageMouseUp=function(G$q){if(G$g.instance.disableMouseEvent=!1,G$P.stage.off("mouseup",this,this.onStageMouseUp),G$P.stage.off("mouseout",this,this.onStageMouseUp),G$P.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var G$r=this._offsets.length,G$v=Math.min(G$r,6),G$H=this._offsets.length-G$v,G$A=G$r-1;G$H<G$A;G$A--)this._offsetY+=this._offsets[G$A--],this._offsetX+=this._offsets[G$A];this._offsetX=this._offsetX/G$v*2,this._offsetY=this._offsetY/G$v*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),G$P.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},G$r.checkElastic=function(){var G$q=NaN,G$r=NaN;if(this.target.x<this.area.x?G$q=this.area.x:this.target.x>this.area.x+this.area.width&&(G$q=this.area.x+this.area.width),this.target.y<this.area.y?G$r=this.area.y:this.target.y>this.area.y+this.area.height&&(G$r=this.area.y+this.area.height),isNaN(G$q)&&isNaN(G$r))this.clear();else{var G$v={};isNaN(G$q)||(G$v.x=G$q),isNaN(G$r)||(G$v.y=G$r),this._tween=G$i.to(this.target,G$v,this.elasticBackTime,G$_.sineOut,G$B.create(this,this.clear),0,!1,!1)}},G$r.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(G$P.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},G$r.clear=function(){if(this.target){this.clearTimer();var G$q=this.target;this.target=null,this._parent=null,G$q.event("dragend",this.data)}},G$q}()),G$_=function(){function G$W(){}return G$x(G$W,"laya.utils.Ease"),G$W.linearNone=function(G$q,G$r,G$v,G$H){return G$v*G$q/G$H+G$r},G$W.linearIn=function(G$q,G$r,G$v,G$H){return G$v*G$q/G$H+G$r},G$W.linearInOut=function(G$q,G$r,G$v,G$H){return G$v*G$q/G$H+G$r},G$W.linearOut=function(G$q,G$r,G$v,G$H){return G$v*G$q/G$H+G$r},G$W.bounceIn=function(G$q,G$r,G$v,G$H){return G$v-G$W.bounceOut(G$H-G$q,0,G$v,G$H)+G$r},G$W.bounceInOut=function(G$q,G$r,G$v,G$H){return G$q<.5*G$H?.5*G$W.bounceIn(2*G$q,0,G$v,G$H)+G$r:.5*G$W.bounceOut(2*G$q-G$H,0,G$v,G$H)+.5*G$v+G$r},G$W.bounceOut=function(G$q,G$r,G$v,G$H){return(G$q/=G$H)<1/2.75?G$v*(7.5625*G$q*G$q)+G$r:G$q<2/2.75?G$v*(7.5625*(G$q-=1.5/2.75)*G$q+.75)+G$r:G$q<2.5/2.75?G$v*(7.5625*(G$q-=2.25/2.75)*G$q+.9375)+G$r:G$v*(7.5625*(G$q-=2.625/2.75)*G$q+.984375)+G$r},G$W.backIn=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$A&&(G$A=1.70158),G$v*(G$q/=G$H)*G$q*((G$A+1)*G$q-G$A)+G$r},G$W.backInOut=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$A&&(G$A=1.70158),(G$q/=.5*G$H)<1?.5*G$v*(G$q*G$q*((1+(G$A*=1.525))*G$q-G$A))+G$r:G$v/2*((G$q-=2)*G$q*((1+(G$A*=1.525))*G$q+G$A)+2)+G$r},G$W.backOut=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$A&&(G$A=1.70158),G$v*((G$q=G$q/G$H-1)*G$q*((G$A+1)*G$q+G$A)+1)+G$r},G$W.elasticIn=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R;return void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=0),0==G$q?G$r:1==(G$q/=G$H)?G$r+G$v:(G$y||(G$y=.3*G$H),G$R=!G$A||0<G$v&&G$A<G$v||G$v<0&&G$A<-G$v?(G$A=G$v,G$y/4):G$y/G$W.PI2*Math.asin(G$v/G$A),-G$A*Math.pow(2,10*(G$q-=1))*Math.sin((G$q*G$H-G$R)*G$W.PI2/G$y)+G$r)},G$W.elasticInOut=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R;return void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=0),0==G$q?G$r:2==(G$q/=.5*G$H)?G$r+G$v:(G$y||(G$y=G$H*(.3*1.5)),G$R=!G$A||0<G$v&&G$A<G$v||G$v<0&&G$A<-G$v?(G$A=G$v,G$y/4):G$y/G$W.PI2*Math.asin(G$v/G$A),G$q<1?G$A*Math.pow(2,10*(G$q-=1))*Math.sin((G$q*G$H-G$R)*G$W.PI2/G$y)*-.5+G$r:G$A*Math.pow(2,-10*(G$q-=1))*Math.sin((G$q*G$H-G$R)*G$W.PI2/G$y)*.5+G$v+G$r)},G$W.elasticOut=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R;return void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=0),0==G$q?G$r:1==(G$q/=G$H)?G$r+G$v:(G$y||(G$y=.3*G$H),G$R=!G$A||0<G$v&&G$A<G$v||G$v<0&&G$A<-G$v?(G$A=G$v,G$y/4):G$y/G$W.PI2*Math.asin(G$v/G$A),G$A*Math.pow(2,-10*G$q)*Math.sin((G$q*G$H-G$R)*G$W.PI2/G$y)+G$v+G$r)},G$W.strongIn=function(G$q,G$r,G$v,G$H){return G$v*(G$q/=G$H)*G$q*G$q*G$q*G$q+G$r},G$W.strongInOut=function(G$q,G$r,G$v,G$H){return(G$q/=.5*G$H)<1?.5*G$v*G$q*G$q*G$q*G$q*G$q+G$r:.5*G$v*((G$q-=2)*G$q*G$q*G$q*G$q+2)+G$r},G$W.strongOut=function(G$q,G$r,G$v,G$H){return G$v*((G$q=G$q/G$H-1)*G$q*G$q*G$q*G$q+1)+G$r},G$W.sineInOut=function(G$q,G$r,G$v,G$H){return.5*-G$v*(Math.cos(Math.PI*G$q/G$H)-1)+G$r},G$W.sineIn=function(G$q,G$r,G$v,G$H){return-G$v*Math.cos(G$q/G$H*G$W.HALF_PI)+G$v+G$r},G$W.sineOut=function(G$q,G$r,G$v,G$H){return G$v*Math.sin(G$q/G$H*G$W.HALF_PI)+G$r},G$W.quintIn=function(G$q,G$r,G$v,G$H){return G$v*(G$q/=G$H)*G$q*G$q*G$q*G$q+G$r},G$W.quintInOut=function(G$q,G$r,G$v,G$H){return(G$q/=.5*G$H)<1?.5*G$v*G$q*G$q*G$q*G$q*G$q+G$r:.5*G$v*((G$q-=2)*G$q*G$q*G$q*G$q+2)+G$r},G$W.quintOut=function(G$q,G$r,G$v,G$H){return G$v*((G$q=G$q/G$H-1)*G$q*G$q*G$q*G$q+1)+G$r},G$W.quartIn=function(G$q,G$r,G$v,G$H){return G$v*(G$q/=G$H)*G$q*G$q*G$q+G$r},G$W.quartInOut=function(G$q,G$r,G$v,G$H){return(G$q/=.5*G$H)<1?.5*G$v*G$q*G$q*G$q*G$q+G$r:.5*-G$v*((G$q-=2)*G$q*G$q*G$q-2)+G$r},G$W.quartOut=function(G$q,G$r,G$v,G$H){return-G$v*((G$q=G$q/G$H-1)*G$q*G$q*G$q-1)+G$r},G$W.cubicIn=function(G$q,G$r,G$v,G$H){return G$v*(G$q/=G$H)*G$q*G$q+G$r},G$W.cubicInOut=function(G$q,G$r,G$v,G$H){return(G$q/=.5*G$H)<1?.5*G$v*G$q*G$q*G$q+G$r:.5*G$v*((G$q-=2)*G$q*G$q+2)+G$r},G$W.cubicOut=function(G$q,G$r,G$v,G$H){return G$v*((G$q=G$q/G$H-1)*G$q*G$q+1)+G$r},G$W.quadIn=function(G$q,G$r,G$v,G$H){return G$v*(G$q/=G$H)*G$q+G$r},G$W.quadInOut=function(G$q,G$r,G$v,G$H){return(G$q/=.5*G$H)<1?.5*G$v*G$q*G$q+G$r:.5*-G$v*(--G$q*(G$q-2)-1)+G$r},G$W.quadOut=function(G$q,G$r,G$v,G$H){return-G$v*(G$q/=G$H)*(G$q-2)+G$r},G$W.expoIn=function(G$q,G$r,G$v,G$H){return 0==G$q?G$r:G$v*Math.pow(2,10*(G$q/G$H-1))+G$r-.001*G$v},G$W.expoInOut=function(G$q,G$r,G$v,G$H){return 0==G$q?G$r:G$q==G$H?G$r+G$v:(G$q/=.5*G$H)<1?.5*G$v*Math.pow(2,10*(G$q-1))+G$r:.5*G$v*(2-Math.pow(2,-10*--G$q))+G$r},G$W.expoOut=function(G$q,G$r,G$v,G$H){return G$q==G$H?G$r+G$v:G$v*(1-Math.pow(2,-10*G$q/G$H))+G$r},G$W.circIn=function(G$q,G$r,G$v,G$H){return-G$v*(Math.sqrt(1-(G$q/=G$H)*G$q)-1)+G$r},G$W.circInOut=function(G$q,G$r,G$v,G$H){return(G$q/=.5*G$H)<1?.5*-G$v*(Math.sqrt(1-G$q*G$q)-1)+G$r:.5*G$v*(Math.sqrt(1-(G$q-=2)*G$q)+1)+G$r},G$W.circOut=function(G$q,G$r,G$v,G$H){return G$v*Math.sqrt(1-(G$q=G$q/G$H-1)*G$q)+G$r},G$W.HALF_PI=.5*Math.PI,G$W.PI2=2*Math.PI,G$W}(),G$f=function(){function G$K(){this._hit=null,this._unHit=null}G$x(G$K,"laya.utils.HitArea");var G$q=G$K.prototype;return G$q.isHit=function(G$q,G$r){return!!G$K.isHitGraphic(G$q,G$r,this.hit)&&!G$K.isHitGraphic(G$q,G$r,this.unHit)},G$q.contains=function(G$q,G$r){return this.isHit(G$q,G$r)},G$D(0,G$q,"hit",function(){return this._hit||(this._hit=new G$T),this._hit},function(G$q){this._hit=G$q}),G$D(0,G$q,"unHit",function(){return this._unHit||(this._unHit=new G$T),this._unHit},function(G$q){this._unHit=G$q}),G$K.isHitGraphic=function(G$q,G$r,G$v){if(!G$v)return!1;var G$H;if(!(G$H=G$v.cmds)&&G$v._one&&((G$H=G$K._cmds).length=1,G$H[0]=G$v._one),!G$H)return!1;var G$A,G$y,G$R=0;for(G$A=G$H.length,G$R=0;G$R<G$A;G$R++)if(G$y=G$H[G$R]){var G$W=G$Y._context;switch(G$y.callee){case G$W._translate:case 6:G$q-=G$y[0],G$r-=G$y[1]}if(G$K.isHitCmd(G$q,G$r,G$y))return!0}return!1},G$K.isHitCmd=function(G$q,G$r,G$v){if(!G$v)return!1;var G$H=G$Y._context,G$A=!1;switch(G$v.callee){case G$H._drawRect:case 13:G$K._rec.setTo(G$v[0],G$v[1],G$v[2],G$v[3]),G$A=G$K._rec.contains(G$q,G$r);break;case G$H._drawCircle:case G$H._fillCircle:case 14:G$A=(G$q-=G$v[0])*G$q+(G$r-=G$v[1])*G$r<G$v[2]*G$v[2];break;case G$H._drawPoly:case 18:G$q-=G$v[0],G$r-=G$v[1],G$A=G$K.ptInPolygon(G$q,G$r,G$v[2])}return G$A},G$K.ptInPolygon=function(G$q,G$r,G$v){var G$H;(G$H=G$K._ptPoint).setTo(G$q,G$r);var G$A,G$y=0,G$R=NaN,G$W=NaN,G$O=NaN,G$N=NaN;G$A=G$v.length;for(var G$x=0;G$x<G$A;G$x+=2){if(G$R=G$v[G$x],G$W=G$v[G$x+1],G$O=G$v[(G$x+2)%G$A],G$W!=(G$N=G$v[(G$x+3)%G$A]))if(!(G$H.y<Math.min(G$W,G$N)))if(!(G$H.y>=Math.max(G$W,G$N)))(G$H.y-G$W)*(G$O-G$R)/(G$N-G$W)+G$R>G$H.x&&G$y++}return G$y%2==1},G$K._cmds=[],G$O(G$K,["_rec",function(){return this._rec=new G$a},"_ptPoint",function(){return this._ptPoint=new G$V}]),G$K}(),G$S=(function(){function G$A(G$q,G$r,G$v,G$H){this.char=G$q,this.charNum=G$q.charCodeAt(0),this._x=this._y=0,this.width=G$r,this.height=G$v,this.style=G$H,this.isWord=!G$A._isWordRegExp.test(G$q)}G$x(G$A,"laya.utils.HTMLChar");var G$q=G$A.prototype;G$P.imps(G$q,{"laya.display.ILayout":!0}),G$q.setSprite=function(G$q){this._sprite=G$q},G$q.getSprite=function(){return this._sprite},G$q._isChar=function(){return!0},G$q._getCSSStyle=function(){return this.style},G$D(0,G$q,"width",function(){return this._w},function(G$q){this._w=G$q}),G$D(0,G$q,"x",function(){return this._x},function(G$q){this._sprite&&(this._sprite.x=G$q),this._x=G$q}),G$D(0,G$q,"y",function(){return this._y},function(G$q){this._sprite&&(this._sprite.y=G$q),this._y=G$q}),G$D(0,G$q,"height",function(){return this._h},function(G$q){this._h=G$q}),G$A._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function G$r(){}G$x(G$r,"laya.utils.Log"),G$r.enable=function(){G$r._logdiv||(G$r._logdiv=G$d.window.document.createElement("div"),G$d.window.document.body.appendChild(G$r._logdiv),G$r._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},G$r.toggle=function(){var G$q=G$r._logdiv.style;"1px"==G$q.width?G$q.width=G$q.height="50%":G$q.width=G$q.height="1px"},G$r.print=function(G$q){G$r._logdiv&&(G$r.maxCount<=G$r._count&&G$r.clear(),G$r._count++,G$r._logdiv.innerText+=G$q+"\n",G$r._logdiv.scrollTop=G$r._logdiv.scrollHeight)},G$r.clear=function(){G$r._logdiv.innerText="",G$r._count=0},G$r._logdiv=null,G$r._count=0,G$r.maxCount=20}(),function(){function G$r(){}G$x(G$r,"laya.utils.Mouse"),G$D(1,G$r,"cursor",function(){return G$r._style.cursor},function(G$q){G$r._style.cursor=G$q}),G$r.hide=function(){"none"!=G$r.cursor&&(G$r._preCursor=G$r.cursor,G$r.cursor="none")},G$r.show=function(){"none"==G$r.cursor&&(G$r.cursor=G$r._preCursor?G$r._preCursor:"auto")},G$r._preCursor=null,G$O(G$r,["_style",function(){return this._style=G$d.document.body.style}])}(),function(){function G$y(){}return G$x(G$y,"laya.utils.Pool"),G$y.getPoolBySign=function(G$q){return G$y._poolDic[G$q]||(G$y._poolDic[G$q]=[])},G$y.clearBySign=function(G$q){G$y._poolDic[G$q]&&(G$y._poolDic[G$q].length=0)},G$y.recover=function(G$q,G$r){G$r.__InPool||(G$r.__InPool=!0,G$y.getPoolBySign(G$q).push(G$r))},G$y.getItemByClass=function(G$q,G$r){var G$v=G$y.getPoolBySign(G$q),G$H=G$v.length?G$v.pop():new G$r;return G$H.__InPool=!1,G$H},G$y.getItemByCreateFun=function(G$q,G$r,G$v){var G$H=G$y.getPoolBySign(G$q),G$A=G$H.length?G$H.pop():G$r.call(G$v);return G$A.__InPool=!1,G$A},G$y.getItem=function(G$q){var G$r=G$y.getPoolBySign(G$q),G$v=G$r.length?G$r.pop():null;return G$v&&(G$v.__InPool=!1),G$v},G$y._poolDic={},G$y.InPoolSign="__InPool",G$y}()),G$l=function(){function G$O(){}return G$x(G$O,"laya.utils.Stat"),G$D(1,G$O,"onclick",null,function(G$q){G$O._sp&&G$O._sp.on("click",G$O._sp,G$q),G$O._canvas&&(G$O._canvas.source.onclick=G$q,G$O._canvas.source.style.pointerEvents="")}),G$O.show=function(G$q,G$r,G$v){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),!G$Y.isConchApp||G$Y.isConchWebGL){if(G$Y.isConchWebGL||G$d.onMiniGame||G$d.onLimixiu||(G$O._useCanvas=!0),G$O._show=!0,G$O._fpsData.length=60,G$O._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},G$O._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},G$O._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},G$O._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},G$Y.isWebGL)if(G$O._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},G$Y.is3DMode){if(G$O._view[0].title="FPS(3D)",G$O._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},G$O._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},G$O._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==G$v){var G$H=8;G$O._view[G$H++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},G$O._view[G$H++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},G$O._view[G$H++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},G$O._view[G$H++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},G$O._view[G$H++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},G$O._view[G$H++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},G$O._view[G$H++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},G$O._view[G$H++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},G$O._view[G$H++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==G$v){G$H=8;G$O._view[G$H++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},G$O._view[G$H++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},G$O._view[G$H++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},G$O._view[G$H++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},G$O._view[G$H++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},G$O._view[G$H++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},G$O._view[G$H++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else G$O._view[0].title="FPS(WebGL)",G$O._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else G$O._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};G$O._useCanvas?G$O.createUIPre(G$q,G$r):G$O.createUI(G$q,G$r),G$O.enable()}else G$d.window.conch.showFPS&&G$d.window.conch.showFPS(G$q,G$r)},G$O.createUIPre=function(G$q,G$r){var G$v=G$d.pixelRatio;G$O._width=170*G$v,G$O._vx=75*G$v,G$O._height=G$v*(12*G$O._view.length+3*G$v)+4,G$O._fontSize=12*G$v;for(var G$H=0;G$H<G$O._view.length;G$H++)G$O._view[G$H].x=4,G$O._view[G$H].y=G$H*G$O._fontSize+2*G$v;G$O._canvas||((G$O._canvas=new G$eq("2D")).size(G$O._width,G$O._height),(G$O._ctx=G$O._canvas.getContext("2d")).textBaseline="top",G$O._ctx.font=G$O._fontSize+"px Sans-serif",G$O._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+G$q+"px;top:"+G$r+"px;width:"+G$O._width/G$v+"px;height:"+G$O._height/G$v+"px;"),G$O._first=!0,G$O.loop(),G$O._first=!1,G$d.container.appendChild(G$O._canvas.source)},G$O.createUI=function(G$q,G$r){var G$v=G$O._sp,G$H=G$d.pixelRatio;G$v||(G$v=new G$Kq,(G$O._leftText=new G$Xq).pos(5,5),G$O._leftText.color="#ffffff",G$v.addChild(G$O._leftText),(G$O._txt=new G$Xq).pos(80*G$H,5),G$O._txt.color="#ffffff",G$v.addChild(G$O._txt),G$O._sp=G$v),G$v.pos(G$q,G$r);for(var G$A="",G$y=0;G$y<G$O._view.length;G$y++){G$A+=G$O._view[G$y].title+"\n"}G$O._leftText.text=G$A;var G$R=170*G$H,G$W=G$H*(12*G$O._view.length+3*G$H)+4;G$O._txt.fontSize=G$O._fontSize*G$H,G$O._leftText.fontSize=G$O._fontSize*G$H,G$v.size(G$R,G$W),G$v.graphics.clear(),G$v.graphics.setAlpha(.5),G$v.graphics.drawRect(0,0,G$R,G$W,"#999999"),G$v.graphics.setAlpha(1),G$O.loop()},G$O.enable=function(){G$P.timer.frameLoop(1,G$O,G$O.loop)},G$O.hide=function(){G$O._show=!1,G$P.timer.clear(G$O,G$O.loop),G$O._canvas&&G$d.removeElement(G$O._canvas.source)},G$O.clear=function(){G$O.trianglesFaces=G$O.drawCall=G$O.shaderCall=G$O.spriteCount=G$O.spriteRenderUseCacheCount=G$O.treeNodeCollision=G$O.treeSpriteCollision=G$O.canvasNormal=G$O.canvasBitmap=G$O.canvasReCache=0},G$O.loop=function(){G$O._count++;var G$q=G$d.now();if(!(G$q-G$O._timer<1e3)){var G$r=G$O._count;if(G$O.FPS=Math.round(1e3*G$r/(G$q-G$O._timer)),G$O._show){G$O.trianglesFaces=Math.round(G$O.trianglesFaces/G$r),G$O.spriteCount=G$O._useCanvas?(G$O.drawCall=Math.round(G$O.drawCall/G$r)-2,G$O.shaderCall=Math.round(G$O.shaderCall/G$r),Math.round(G$O.spriteCount/G$r)-1):(G$O.drawCall=Math.round(G$O.drawCall/G$r)-2,G$O.shaderCall=Math.round(G$O.shaderCall/G$r)-4,Math.round(G$O.spriteCount/G$r)-4),G$O.spriteRenderUseCacheCount=Math.round(G$O.spriteRenderUseCacheCount/G$r),G$O.canvasNormal=Math.round(G$O.canvasNormal/G$r),G$O.canvasBitmap=Math.round(G$O.canvasBitmap/G$r),G$O.canvasReCache=Math.ceil(G$O.canvasReCache/G$r),G$O.treeNodeCollision=Math.round(G$O.treeNodeCollision/G$r),G$O.treeSpriteCollision=Math.round(G$O.treeSpriteCollision/G$r);var G$v=0<G$O.FPS?Math.floor(1e3/G$O.FPS).toString():" ";G$O._fpsStr=G$O.FPS+(G$O.renderSlow?" slow":"")+" "+G$v,G$O._spriteStr=G$O.spriteCount+(G$O.spriteRenderUseCacheCount?"/"+G$O.spriteRenderUseCacheCount:""),G$O._canvasStr=G$O.canvasReCache+"/"+G$O.canvasNormal+"/"+G$O.canvasBitmap,G$O.currentMemorySize=G$b.systemResourceManager.memorySize,G$O._useCanvas?G$O.renderInfoPre():G$O.renderInfo(),G$O.clear()}G$O._count=0,G$O._timer=G$q}},G$O.renderInfoPre=function(){if(G$O._canvas){var G$q=G$O._ctx;G$q.clearRect(G$O._first?0:G$O._vx,0,G$O._width,G$O._height);for(var G$r=G$Y.WebGL.mainContext,G$v=0;G$v<G$O._view.length;G$v++){var G$H=G$O._view[G$v];G$O._first&&(G$q.fillStyle="white",G$q.fillText(G$H.title,G$H.x,G$H.y,null,null,null)),G$q.fillStyle=G$H.color;var G$A=-1;if((G$H=G$O._view[G$v]).varying){if(G$r)switch(G$H.varying){case 1:G$A=G$r.getParameter(G$r[G$H.value]);break;case 2:G$A=G$r.getExtension(G$H.value)}}else G$A=G$O[G$H.value];"M"==G$H.units&&(G$A=Math.floor(G$A/1048576*100)/100+" M"),"K"==G$H.units&&(G$A=Math.floor(G$A/1024*100)/100+" K"),"string"==G$H.units&&(G$A=G$A.match(/\d+\.?\d/i)),G$q.fillText(G$A+"",G$H.x+G$O._vx,G$H.y,null,null,null)}}},G$O.renderInfo=function(){for(var G$q="",G$r=G$Y.WebGL.mainContext,G$v=0;G$v<G$O._view.length;G$v++){var G$H=G$O._view[G$v],G$A=-1;if(G$H.varying){if(G$r)switch(G$H.varying){case 1:G$A=G$r.getParameter(G$r[G$H.value]);break;case 2:G$A=G$r.getExtension(G$H.value)}}else G$A=G$O[G$H.value];"M"==G$H.units&&(G$A=Math.floor(G$A/1048576*100)/100+" M"),"K"==G$H.units&&(G$A=Math.floor(G$A/1024*100)/100+" K"),"string"==G$H.units&&(G$A=G$A.match(/\d+\.?\d/i)),G$q+=G$A+"\n"}G$O._txt.text=G$q},G$O.FPS=0,G$O.loopCount=0,G$O.shaderCall=0,G$O.drawCall=0,G$O.trianglesFaces=0,G$O.spriteCount=0,G$O.spriteRenderUseCacheCount=0,G$O.treeNodeCollision=0,G$O.treeSpriteCollision=0,G$O.canvasNormal=0,G$O.canvasBitmap=0,G$O.canvasReCache=0,G$O.renderSlow=!1,G$O.currentMemorySize=0,G$O._fpsStr=null,G$O._canvasStr=null,G$O._spriteStr=null,G$O._fpsData=[],G$O._timer=0,G$O._count=0,G$O._view=[],G$O._fontSize=12,G$O._txt=null,G$O._leftText=null,G$O._sp=null,G$O._show=!1,G$O._useCanvas=!1,G$O._canvas=null,G$O._ctx=null,G$O._first=!1,G$O._vx=NaN,G$O._width=0,G$O._height=100,G$O}(),G$L=(function(){function G$q(){this._strsToID={},this._idToStrs=[],this._length=0}G$x(G$q,"laya.utils.StringKey");var G$r=G$q.prototype;G$r.add=function(G$q){var G$r=this._strsToID[G$q];return null!=G$r?G$r:(this._idToStrs[this._length]=G$q,this._strsToID[G$q]=this._length++)},G$r.getID=function(G$q){var G$r=this._strsToID[G$q];return null==G$r?-1:G$r},G$r.getName=function(G$q){var G$r=this._idToStrs[G$q];return null==G$r?void 0:G$r}}(),function(){var G$N;function G$q(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}G$x(G$q,"laya.utils.Timer");var G$r=G$q.prototype;return G$r._init=function(){G$P.timer&&G$P.timer.frameLoop(1,this,this._update)},G$r._now=function(){return Date.now()},G$r._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var G$q=this.currFrame=this.currFrame+this.scale,G$r=this._now();this._delta=(G$r-this._lastTimer)*this.scale;var G$v=this.currTimer=this.currTimer+this._delta;G$P.isDebug&&6e4<Math.abs(G$r-this._lastTimer)&&console.error("系统时间错误！"+(G$r-this._lastTimer)),this._lastTimer=G$r;var G$H=this._handlers;for(G$R=this._count=0,G$W=G$H.length;G$R<G$W;G$R++)if(null!==(G$O=G$H[G$R]).method){var G$A=G$O.userFrame?G$q:G$v;if(G$A>=G$O.exeTime)if(G$O.repeat)if(G$O.jumpFrame)for(;G$A>=G$O.exeTime;)G$O.exeTime+=G$O.delay,G$O.run(!1);else G$O.exeTime+=G$O.delay,G$O.run(!1),G$A>G$O.exeTime&&(G$O.exeTime+=Math.ceil((G$A-G$O.exeTime)/G$O.delay)*G$O.delay);else G$O.run(!0)}else this._count++;(30<this._count||G$q%200==0)&&this._clearHandlers();for(var G$y=this._laters,G$R=0,G$W=G$y.length-1;G$R<=G$W;G$R++){var G$O=G$y[G$R];this._isIgnoreRecover(G$O)||(null!==G$O.method&&(delete this._map[G$O.key],G$O.run(!1)),this._recoverHandler(G$O)),G$R===G$W&&(G$W=G$y.length-1)}G$y.length=0}},G$r._clearHandlers=function(){for(var G$q=this._handlers,G$r=0,G$v=G$q.length;G$r<G$v;G$r++){var G$H=G$q[G$r];null!==G$H.method?this._temp.push(G$H):this._isIgnoreRecover(G$H)?this._temp.push(G$H):this._recoverHandler(G$H)}this._handlers=this._temp,this._temp=G$q,this._temp.length=0},G$r._recoverHandler=function(G$q){this._map[G$q.key]==G$q&&delete this._map[G$q.key],G$q.recover()},G$r._create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){if(!G$v)return G$A.apply(G$H,G$y),null;if(G$R){var G$O=this._getHandler(G$H,G$A);if(G$O)return G$O.repeat=G$r,G$O.userFrame=G$q,G$O.delay=G$v,G$O.ignoreRecover=G$W,G$O.caller=G$H,G$O.method=G$A,G$O.args=G$y,G$O.exeTime=G$v+(G$q?this.currFrame:this.currTimer+this._now()-this._lastTimer),G$O}return(G$O=G$N.create()).repeat=G$r,G$O.userFrame=G$q,G$O.delay=G$v,G$O.ignoreRecover=G$W,G$O.caller=G$H,G$O.method=G$A,G$O.args=G$y,G$O.exeTime=G$v+(G$q?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(G$O),this._handlers.push(G$O),G$O},G$r._indexHandler=function(G$q){var G$r=G$q.caller,G$v=G$q.method,G$H=G$r?G$r.$_GID||(G$r.$_GID=G$w.getGID()):0,G$A=G$v.$_TID||(G$v.$_TID=this._mid++);G$q.key=G$H+"_"+G$A,this._map[G$q.key]=G$q},G$r.once=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=!0),this._create(!1,!1,G$q,G$r,G$v,G$H,G$A,!1)},G$r.loop=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){void 0===G$A&&(G$A=!0),void 0===G$y&&(G$y=!1),void 0===G$R&&(G$R=!1);var G$W=this._create(!1,!0,G$q,G$r,G$v,G$H,G$A,G$R);G$W&&(G$W.jumpFrame=G$y)},G$r.frameOnce=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=!0),this._create(!0,!1,G$q,G$r,G$v,G$H,G$A,!1)},G$r.frameLoop=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$A&&(G$A=!0),void 0===G$y&&(G$y=!1),this._create(!0,!0,G$q,G$r,G$v,G$H,G$A,G$y)},G$r.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+G$N._freeCount},G$r.clear=function(G$q,G$r){var G$v=this._getHandler(G$q,G$r);return!(!G$v||this._isIgnoreRecover(G$v))&&(delete this._map[G$v.key],G$v.key=null,G$v.clear(),!0)},G$r.clearAll=function(G$q){if(G$q)for(var G$r=0,G$v=this._handlers.length;G$r<G$v;G$r++){var G$H=this._handlers[G$r];G$H.caller===G$q&&(this._isIgnoreRecover(G$H)||(delete this._map[G$H.key],G$H.key=null,G$H.clear()))}},G$r._getHandler=function(G$q,G$r){var G$v=G$q?G$q.$_GID||(G$q.$_GID=G$w.getGID()):0,G$H=G$r.$_TID||(G$r.$_TID=this._mid++);return this._map[G$v+"_"+G$H]},G$r._isIgnoreRecover=function(G$q){if(G$q.ignoreRecover||G$q.caller&&"IgnoreRecover"==G$q.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var G$r="";try{arguments.propertyIsEnumerable.caller}catch(G$q){G$r=G$q.stack}G$P.recordError("报错：核心定时器销毁忽略  "+G$r)}return!0}return!1},G$r.hasHandler=function(G$q,G$r){return this._map[G$q.$_GID+"_"+G$r.$_TID]},G$r.callLater=function(G$q,G$r,G$v){if(null==this._getHandler(G$q,G$r)){var G$H=G$N.create();G$H.caller=G$q,G$H.method=G$r,G$H.args=G$v,this._indexHandler(G$H),this._laters.push(G$H)}},G$r.runCallLater=function(G$q,G$r){var G$v=this._getHandler(G$q,G$r);G$v&&null!=G$v.method&&(this._isIgnoreRecover(G$v)||(delete this._map[G$v.key],G$v.run(!0)))},G$r.runTimer=function(G$q,G$r){this.runCallLater(G$q,G$r)},G$D(0,G$r,"delta",function(){return this._delta}),G$q.__init$=function(){G$N=function(){function G$r(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}G$x(G$r,"");var G$q=G$r.prototype;return G$q.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},G$q.recover=function(){this.clear(),this.args=G$r._freeHandler,G$r._freeHandler=this,G$r._freeCount++},G$q.run=function(G$q){var G$r=this.caller;if(G$r&&G$r.destroyed)return this.clear();var G$v=this.method,G$H=this.args;G$q&&this.clear(),null!=G$v&&(G$H?G$v.apply(G$r,G$H):G$v.call(G$r))},G$r._freeHandler=null,G$r._freeCount=0,G$r.create=function(){var G$q=G$r._freeHandler;return G$q?(G$r._freeHandler=G$q.args,--G$r._freeCount,G$q.args=null,G$q):new G$r},G$r}()},G$q}()),G$i=function(){function G$K(){this.gid=0}G$x(G$K,"laya.utils.Tween");var G$q=G$K.prototype;return G$q.to=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){return void 0===G$y&&(G$y=0),void 0===G$R&&(G$R=!1),this._create(G$q,G$r,G$v,G$H,G$A,G$y,G$R,!0,!1,!0)},G$q.from=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){return void 0===G$y&&(G$y=0),void 0===G$R&&(G$R=!1),this._create(G$q,G$r,G$v,G$H,G$A,G$y,G$R,!1,!1,!0)},G$q._create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){if(!G$q)throw new Error("Tween:target is null");this._target=G$q,this._duration=G$v,this._ease=G$H||G$r.ease||G$K.easeNone,this._complete=G$A||G$r.complete,this._delay=G$y,this._props=[],this._usedTimer=0,this._startTimer=G$d.now(),this._usedPool=G$O,this._delayParam=null,this.update=G$r.update;var G$x=G$q.$_GID||(G$q.$_GID=G$w.getGID());return G$K.tweenMap[G$x]?(G$R&&G$K.clearTween(G$q),G$K.tweenMap[G$x].push(this)):G$K.tweenMap[G$x]=[this],G$N?G$y<=0?this.firstStart(G$q,G$r,G$W):(this._delayParam=[G$q,G$r,G$W],G$P.scaleTimer.once(G$y,this,this.firstStart,this._delayParam)):this._initProps(G$q,G$r,G$W),this},G$q.firstStart=function(G$q,G$r,G$v){this._delayParam=null,G$q.destroyed?this.clear():(this._initProps(G$q,G$r,G$v),this._beginLoop())},G$q._initProps=function(G$q,G$r,G$v){for(var G$H in G$r)if("number"==typeof G$q[G$H]){var G$A=G$v?G$q[G$H]:G$r[G$H],G$y=G$v?G$r[G$H]:G$q[G$H];this._props.push([G$H,G$A,G$y-G$A]),G$v||(G$q[G$H]=G$A)}},G$q._beginLoop=function(){G$P.scaleTimer.frameLoop(1,this,this._doEase)},G$q._doEase=function(){this._updateEase(G$d.now())},G$q._updateEase=function(G$q){var G$r=this._target;if(G$r){if(G$r.destroyed)return G$K.clearTween(G$r);var G$v=this._usedTimer=G$q-this._startTimer-this._delay;if(!(G$v<0)){if(G$v>=this._duration)return this.complete();for(var G$H=0<G$v?this._ease(G$v,0,1,this._duration):0,G$A=this._props,G$y=0,G$R=G$A.length;G$y<G$R;G$y++){var G$W=G$A[G$y];G$r[G$W[0]]=G$W[1]+G$H*G$W[2]}this.update&&this.update.run()}}},G$q.complete=function(){if(this._target){G$P.scaleTimer.runTimer(this,this.firstStart);for(var G$q=this._target,G$r=this._props,G$v=this._complete,G$H=0,G$A=G$r.length;G$H<G$A;G$H++){var G$y=G$r[G$H];G$q[G$y[0]]=G$y[1]+G$y[2]}this.update&&this.update.run(),this.clear(),G$v&&G$v.run()}},G$q.pause=function(){G$P.scaleTimer.clear(this,this._beginLoop),G$P.scaleTimer.clear(this,this._doEase),G$P.scaleTimer.clear(this,this.firstStart);var G$q;(G$q=G$d.now()-this._startTimer-this._delay)<0&&(this._usedTimer=G$q)},G$q.setStartTime=function(G$q){this._startTimer=G$q},G$q.clear=function(){this._target&&(this._remove(),this._clear())},G$q._clear=function(){this.pause(),G$P.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,G$S.recover("tween",this))},G$q.recover=function(){this._usedPool=!0,this._clear()},G$q._remove=function(){var G$q=G$K.tweenMap[this._target.$_GID];if(G$q)for(var G$r=0,G$v=G$q.length;G$r<G$v;G$r++)if(G$q[G$r]===this){G$q.splice(G$r,1);break}},G$q.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=G$d.now(),this._delayParam)G$P.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var G$q=this._props,G$r=0,G$v=G$q.length;G$r<G$v;G$r++){var G$H=G$q[G$r];this._target[G$H[0]]=G$H[1]}G$P.scaleTimer.once(this._delay,this,this._beginLoop)}},G$q.resume=function(){this._usedTimer>=this._duration||(this._startTimer=G$d.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?G$P.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},G$D(0,G$q,"progress",null,function(G$q){var G$r=G$q*this._duration;this._startTimer=G$d.now()-this._delay-G$r}),G$K.to=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){return void 0===G$y&&(G$y=0),void 0===G$R&&(G$R=!1),void 0===G$W&&(G$W=!0),G$S.getItemByClass("tween",G$K)._create(G$q,G$r,G$v,G$H,G$A,G$y,G$R,!0,G$W,!0)},G$K.from=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){return void 0===G$y&&(G$y=0),void 0===G$R&&(G$R=!1),void 0===G$W&&(G$W=!0),G$S.getItemByClass("tween",G$K)._create(G$q,G$r,G$v,G$H,G$A,G$y,G$R,!1,G$W,!0)},G$K.clearAll=function(G$q){if(G$q&&G$q.$_GID){var G$r=G$K.tweenMap[G$q.$_GID];if(G$r){for(var G$v=0,G$H=G$r.length;G$v<G$H;G$v++)G$r[G$v]._clear();G$r.length=0}}},G$K.clear=function(G$q){G$q.clear()},G$K.clearTween=function(G$q){G$K.clearAll(G$q)},G$K.easeNone=function(G$q,G$r,G$v,G$H){return G$v*G$q/G$H+G$r},G$K.tweenMap={},G$K}(),G$w=function(){function G$W(){}return G$x(G$W,"laya.utils.Utils"),G$W.toRadian=function(G$q){return G$q*G$W._pi2},G$W.toAngle=function(G$q){return G$q*G$W._pi},G$W.toHexColor=function(G$q){if(G$q<0||isNaN(G$q))return null;for(var G$r=G$q.toString(16);G$r.length<6;)G$r="0"+G$r;return"#"+G$r},G$W.getGID=function(){return G$W._gid++},G$W.concatArray=function(G$q,G$r){if(!G$r)return G$q;if(!G$q)return G$r;var G$v=0,G$H=G$r.length;for(G$v=0;G$v<G$H;G$v++)G$q.push(G$r[G$v]);return G$q},G$W.clearArray=function(G$q){return G$q&&(G$q.length=0),G$q},G$W.copyArray=function(G$q,G$r){if(G$q||(G$q=[]),!G$r)return G$q;G$q.length=G$r.length;var G$v=0,G$H=G$r.length;for(G$v=0;G$v<G$H;G$v++)G$q[G$v]=G$r[G$v];return G$q},G$W.getGlobalRecByPoints=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R;return G$y=new G$V(G$r,G$v),G$y=G$q.localToGlobal(G$y),G$R=new G$V(G$H,G$A),G$R=G$q.localToGlobal(G$R),G$a._getWrapRec([G$y.x,G$y.y,G$R.x,G$R.y])},G$W.getGlobalPosAndScale=function(G$q){return G$W.getGlobalRecByPoints(G$q,0,0,1,1)},G$W.bind=function(G$q,G$r){return G$q.bind(G$r)},G$W.measureText=function(G$q,G$r){return G$E.measureText(G$q,G$r)},G$W.contextMeasureText=function(G$q){var G$r=G$d.context.measureText(G$q);return G$r||(G$r={width:16,height:16}),G$r},G$W.updateOrder=function(G$q){if(!G$q||G$q.length<2)return!1;for(var G$r,G$v=1,G$H=0,G$A=G$q.length,G$y=NaN;G$v<G$A;){for(G$r=G$q[G$H=G$v],G$y=G$q[G$H]._zOrder;-1<--G$H&&G$q[G$H]._zOrder>G$y;)G$q[G$H+1]=G$q[G$H];G$q[G$H+1]=G$r,G$v++}var G$R=G$r.parent.conchModel;if(G$R)if(null!=G$R.updateZOrder)G$R.updateZOrder();else{for(G$v=0;G$v<G$A;G$v++)G$R.removeChild(G$q[G$v].conchModel);for(G$v=0;G$v<G$A;G$v++)G$R.addChildAt(G$q[G$v].conchModel,G$v)}return!0},G$W.transPointList=function(G$q,G$r,G$v){var G$H=0,G$A=G$q.length;for(G$H=0;G$H<G$A;G$H+=2)G$q[G$H]+=G$r,G$q[G$H+1]+=G$v},G$W.parseInt=function(G$q,G$r){void 0===G$r&&(G$r=0);var G$v=G$d.window.parseInt(G$q,G$r);return isNaN(G$v)?0:G$v},G$W.getFileExtension=function(G$q){G$W._extReg.lastIndex=G$q.lastIndexOf(".");var G$r=G$W._extReg.exec(G$q);return G$r&&1<G$r.length?G$r[1].toLowerCase():null},G$W.getTransformRelativeToWindow=function(G$q,G$r,G$v){var G$H=G$P.stage,G$A=laya.utils.Utils.getGlobalPosAndScale(G$q),G$y=G$H._canvasTransform.clone(),G$R=G$y.tx,G$W=G$y.ty;G$y.rotate(-Math.PI/180*G$P.stage.canvasDegree),G$y.scale(G$P.stage.clientScaleX,G$P.stage.clientScaleY);var G$O=G$P.stage.canvasDegree%180!=0,G$N=NaN,G$x=NaN;G$O?(G$N=G$v+G$A.y,G$x=G$r+G$A.x,G$N*=G$y.d,G$x*=G$y.a,90==G$P.stage.canvasDegree?(G$N=G$R-G$N,G$x+=G$W):(G$N+=G$R,G$x=G$W-G$x)):(G$N=G$r+G$A.x,G$x=G$v+G$A.y,G$N*=G$y.a,G$x*=G$y.d,G$N+=G$R,G$x+=G$W);var G$K=NaN,G$T=NaN;return G$T=G$O?(G$K=G$y.d*G$A.height,G$y.a*G$A.width):(G$K=G$y.a*G$A.width,G$y.d*G$A.height),{x:G$N,y:G$x,scaleX:G$K,scaleY:G$T}},G$W.fitDOMElementInArea=function(G$q,G$r,G$v,G$H,G$A,G$y){G$q._fitLayaAirInitialized||(G$q._fitLayaAirInitialized=!0,G$q.style.transformOrigin=G$q.style.webKittransformOrigin="left top",G$q.style.position="absolute");var G$R=G$W.getTransformRelativeToWindow(G$r,G$v,G$H);G$q.style.transform=G$q.style.webkitTransform="scale("+G$R.scaleX+","+G$R.scaleY+") rotate("+G$P.stage.canvasDegree+"deg)",G$q.style.width=G$A+"px",G$q.style.height=G$y+"px",G$q.style.left=G$R.x+"px",G$q.style.top=G$R.y+"px"},G$W.isOkTextureList=function(G$q){if(!G$q)return!1;var G$r,G$v=0,G$H=G$q.length;for(G$v=0;G$v<G$H;G$v++)if(!(G$r=G$q[G$v])||!G$r.source)return!1;return!0},G$W.isOKCmdList=function(G$q){if(!G$q)return!1;var G$r,G$v,G$H=0,G$A=G$q.length,G$y=G$Y._context;for(G$H=0;G$H<G$A;G$H++)switch((G$r=G$q[G$H]).callee){case G$y._drawTexture:case G$y._fillTexture:case G$y._drawTextureWithTransform:if(!(G$v=G$r[0])||!G$v.source)return!1}return!0},G$W._gid=1,G$W._pi=180/Math.PI,G$W._pi2=Math.PI/180,G$W._extReg=/\.(\w+)\??/g,G$W.parseXMLFromString=function(G$q){var G$r;if(G$q=G$q.replace(/>\s+</g,"><"),-1<(G$r=(new DOMParser).parseFromString(G$q,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(G$r.firstChild.firstChild.textContent);return G$r},G$W}(),G$h=function(){function G$q(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],G$Y.isWebGL&&G$I.regCacheByFunction(G$w.bind(this.startDispose,this),G$w.bind(this.getCacheList,this))}G$x(G$q,"laya.utils.VectorGraphManager");var G$r=G$q.prototype;return G$r.getId=function(){return this._id++},G$r.addShape=function(G$q,G$r){this.shapeDic[G$q]=G$r,this.useDic[G$q]||(this.useDic[G$q]=!0)},G$r.addLine=function(G$q,G$r){this.shapeLineDic[G$q]=G$r,this.shapeLineDic[G$q]||(this.shapeLineDic[G$q]=!0)},G$r.getShape=function(G$q){this._checkKey&&null!=this.useDic[G$q]&&(this.useDic[G$q]=!0)},G$r.deleteShape=function(G$q){this.shapeDic[G$q]&&(this.shapeDic[G$q]=null,delete this.shapeDic[G$q]),this.shapeLineDic[G$q]&&(this.shapeLineDic[G$q]=null,delete this.shapeLineDic[G$q]),null!=this.useDic[G$q]&&delete this.useDic[G$q]},G$r.getCacheList=function(){var G$q,G$r=[];for(G$q in this.shapeDic)G$r.push(this.shapeDic[G$q]);for(G$q in this.shapeLineDic)G$r.push(this.shapeLineDic[G$q]);return G$r},G$r.startDispose=function(G$q){var G$r;for(G$r in this.useDic)this.useDic[G$r]=!1;this._checkKey=!0},G$r.endDispose=function(){if(this._checkKey){var G$q;for(G$q in this.useDic)this.useDic[G$q]||this.deleteShape(G$q);this._checkKey=!1}},G$q.getInstance=function(){return G$q.instance=G$q.instance||new G$q},G$q.instance=null,G$q}(),G$n=function(){function G$H(){this._obj=null,this._obj=G$H.supportWeakMap?new G$d.window.WeakMap:{},G$H.supportWeakMap||G$H._maps.push(this)}G$x(G$H,"laya.utils.WeakObject");var G$q=G$H.prototype;return G$q.set=function(G$q,G$r){if(null!=G$q)if(G$H.supportWeakMap){var G$v=G$q;"string"!=typeof G$q&&"number"!=typeof G$q||(G$v=G$H._keys[G$q])||(G$v=G$H._keys[G$q]={k:G$q}),this._obj.set(G$v,G$r)}else"string"==typeof G$q||"number"==typeof G$q?this._obj[G$q]=G$r:(G$q.$_GID||(G$q.$_GID=G$w.getGID()),this._obj[G$q.$_GID]=G$r)},G$q.get=function(G$q){if(null==G$q)return null;if(G$H.supportWeakMap){var G$r="string"==typeof G$q||"number"==typeof G$q?G$H._keys[G$q]:G$q;return G$r?this._obj.get(G$r):null}return"string"==typeof G$q||"number"==typeof G$q?this._obj[G$q]:this._obj[G$q.$_GID]},G$q.del=function(G$q){if(null!=G$q)if(G$H.supportWeakMap){var G$r="string"==typeof G$q||"number"==typeof G$q?G$H._keys[G$q]:G$q;if(!G$r)return;this._obj.delete(G$r)}else"string"==typeof G$q||"number"==typeof G$q?delete this._obj[G$q]:delete this._obj[this._obj.$_GID]},G$q.has=function(G$q){if(null==G$q)return!1;if(G$H.supportWeakMap){var G$r="string"==typeof G$q||"number"==typeof G$q?G$H._keys[G$q]:G$q;return this._obj.has(G$r)}return"string"==typeof G$q||"number"==typeof G$q?null!=this._obj[G$q]:null!=this._obj[this._obj.$_GID]},G$H.__init__=function(){(G$H.supportWeakMap=null!=G$d.window.WeakMap)||G$P.timer.loop(G$H.delInterval,null,G$H.clearCache)},G$H.clearCache=function(){for(var G$q=0,G$r=G$H._maps.length;G$q<G$r;G$q++){G$H._maps[G$q]._obj={}}},G$H.supportWeakMap=!1,G$H.delInterval=3e5,G$H._keys={},G$H._maps=[],G$O(G$H,["I",function(){return this.I=new G$H}]),G$H}(),G$k=function(){function G$q(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}G$x(G$q,"laya.utils.WordText");var G$r=G$q.prototype;return G$r.setText=function(G$q){this.changed=!0,this._text=G$q},G$r.toString=function(){return this._text},G$r.charCodeAt=function(G$q){return this._text?this._text.charCodeAt(G$q):NaN},G$r.charAt=function(G$q){return this._text?this._text.charAt(G$q):null},G$D(0,G$r,"length",function(){return this._text?this._text.length:0}),G$q}(),G$qq=function(G$q){function G$R(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,G$R.__super.call(this),this._childs=G$R.ARRAY_EMPTY,this._$P=G$R.PROP_EMPTY,this.timer=G$P.scaleTimer,this.conchModel=G$Y.isConchNode?this.createConchModel():null}G$x(G$R,"laya.display.Node",G$N);var G$r=G$R.prototype;return G$r._setBit=function(G$q,G$r){1==G$q&&(this._getBit(G$q)!=G$r&&this._updateDisplayedInstage());G$r?this._bits|=G$q:this._bits&=~G$q},G$r._getBit=function(G$q){return 0!=(this._bits&G$q)},G$r._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},G$r._setUpNoticeType=function(G$q){var G$r=this;for(G$r._setBit(G$q,!0),G$r=G$r.parent;G$r;){if(G$r._getBit(G$q))return;G$r._setBit(G$q,!0),G$r=G$r.parent}},G$r.on=function(G$q,G$r,G$v,G$H){return"display"!==G$q&&"undisplay"!==G$q||this._getBit(1)||this._setUpNoticeType(1),this._createListener(G$q,G$r,G$v,G$H,!1)},G$r.once=function(G$q,G$r,G$v,G$H){return"display"!==G$q&&"undisplay"!==G$q||this._getBit(1)||this._setUpNoticeType(1),this._createListener(G$q,G$r,G$v,G$H,!0)},G$r.createConchModel=function(){return null},G$r.destroy=function(G$q){void 0===G$q&&(G$q=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(G$q?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},G$r.destroyChildren=function(){if(this._childs)for(var G$q=this._childs.length-1;-1<G$q;G$q--)this._childs[G$q].destroy(!0)},G$r.addChild=function(G$q){if(!G$q||this.destroyed||G$q===this)return G$q;if(G$q.zOrder&&this._set$P("hasZorder",!0),G$q._parent===this){var G$r=this.getChildIndex(G$q);G$r!==this._childs.length-1&&(this._childs.splice(G$r,1),this._childs.push(G$q),this.conchModel&&(this.conchModel.removeChild(G$q.conchModel),this.conchModel.addChildAt(G$q.conchModel,this._childs.length-1)),this._childChanged())}else G$q.parent&&G$q.parent.removeChild(G$q),this._childs===G$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(G$q),this.conchModel&&this.conchModel.addChildAt(G$q.conchModel,this._childs.length-1),(G$q.parent=this)._childChanged();return G$q},G$r.addChildren=function(G$q){for(var G$r=arguments,G$v=0,G$H=G$r.length;G$v<G$H;)this.addChild(G$r[G$v++])},G$r.addChildAt=function(G$q,G$r){if(!G$q||this.destroyed||G$q===this)return G$q;if(G$q.zOrder&&this._set$P("hasZorder",!0),0<=G$r&&G$r<=this._childs.length){if(G$q._parent===this){var G$v=this.getChildIndex(G$q);this._childs.splice(G$v,1),this._childs.splice(G$r,0,G$q),this.conchModel&&(this.conchModel.removeChild(G$q.conchModel),this.conchModel.addChildAt(G$q.conchModel,G$r)),this._childChanged()}else G$q.parent&&G$q.parent.removeChild(G$q),this._childs===G$R.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(G$r,0,G$q),this.conchModel&&this.conchModel.addChildAt(G$q.conchModel,G$r),G$q.parent=this;return G$q}throw new Error("appendChildAt:The index is out of bounds")},G$r.getChildIndex=function(G$q){return this._childs.indexOf(G$q)},G$r.getChildByName=function(G$q){var G$r=this._childs;if(G$r)for(var G$v=0,G$H=G$r.length;G$v<G$H;G$v++){var G$A=G$r[G$v];if(G$A.name===G$q)return G$A}return null},G$r._get$P=function(G$q){return this._$P[G$q]},G$r._set$P=function(G$q,G$r){return this.destroyed||(this._$P===G$R.PROP_EMPTY&&(this._$P={}),this._$P[G$q]=G$r),G$r},G$r.getChildAt=function(G$q){return this._childs[G$q]},G$r.setChildIndex=function(G$q,G$r){var G$v=this._childs;if(G$r<0||G$r>=G$v.length)throw new Error("setChildIndex:The index is out of bounds.");var G$H=this.getChildIndex(G$q);if(G$H<0)throw new Error("setChildIndex:node is must child of this object.");return G$v.splice(G$H,1),G$v.splice(G$r,0,G$q),this.conchModel&&(this.conchModel.removeChild(G$q.conchModel),this.conchModel.addChildAt(G$q.conchModel,G$r)),this._childChanged(),G$q},G$r._childChanged=function(G$q){},G$r.removeChild=function(G$q){if(!this._childs)return G$q;var G$r=this._childs.indexOf(G$q);return this.removeChildAt(G$r)},G$r.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},G$r.removeChildByName=function(G$q){var G$r=this.getChildByName(G$q);return G$r&&this.removeChild(G$r),G$r},G$r.removeChildAt=function(G$q){var G$r=this.getChildAt(G$q);if(G$r){for(var G$v=this._childs.length-1,G$H=G$q;G$H<G$v;++G$H)this._childs[G$H]=this._childs[G$H+1];this._childs.length=G$v,this.conchModel&&this.conchModel.removeChild(G$r.conchModel),G$r.parent=null}return G$r},G$r.removeChildren=function(G$q,G$r){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=2147483647),this._childs&&0<this._childs.length){var G$v=this._childs;if(0===G$q&&G$y<=G$r){var G$H=G$v;this._childs=G$R.ARRAY_EMPTY}else G$H=G$v.splice(G$q,G$r-G$q);for(var G$A=0,G$y=G$H.length;G$A<G$y;G$A++)G$H[G$A].parent=null,this.conchModel&&this.conchModel.removeChild(G$H[G$A].conchModel)}return this},G$r.replaceChild=function(G$q,G$r){var G$v=this._childs.indexOf(G$r);return-1<G$v?(this._childs.splice(G$v,1,G$q),this.conchModel&&(this.conchModel.removeChild(G$r.conchModel),this.conchModel.addChildAt(G$q.conchModel,G$v)),G$r.parent=null,G$q.parent=this,G$q):null},G$r._updateDisplayedInstage=function(){var G$q;G$q=this;var G$r=G$P.stage;for(this._displayedInStage=!1;G$q;){if(G$q._getBit(1)){this._displayedInStage=G$q._displayedInStage;break}if(G$q==G$r||G$q._displayedInStage){this._displayedInStage=!0;break}G$q=G$q.parent}},G$r._setDisplay=function(G$q){this._displayedInStage!==G$q&&((this._displayedInStage=G$q)?this.event("display"):this.event("undisplay"))},G$r._displayChild=function(G$q,G$r){var G$v=G$q._childs;if(G$v)for(var G$H=0;G$H<G$v.length;G$H++){var G$A=G$v[G$H];G$A&&G$A._getBit(1)&&(0<G$A._childs.length?this._displayChild(G$A,G$r):G$A._setDisplay(G$r))}G$q._setDisplay(G$r)},G$r.contains=function(G$q){if(G$q===this)return!0;for(;G$q;){if(G$q.parent===this)return!0;G$q=G$q.parent}return!1},G$r.timerLoop=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$A&&(G$A=!0),void 0===G$y&&(G$y=!1),this.timer.loop(G$q,G$r,G$v,G$H,G$A,G$y)},G$r.timerOnce=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=!0),this.timer._create(!1,!1,G$q,G$r,G$v,G$H,G$A)},G$r.frameLoop=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=!0),this.timer._create(!0,!0,G$q,G$r,G$v,G$H,G$A)},G$r.frameOnce=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=!0),this.timer._create(!0,!1,G$q,G$r,G$v,G$H,G$A)},G$r.clearTimer=function(G$q,G$r){this.timer.clear(G$q,G$r)},G$D(0,G$r,"numChildren",function(){return this._childs.length}),G$D(0,G$r,"destroyed",function(){return this._destroyed}),G$D(0,G$r,"parent",function(){return this._parent},function(G$q){this._parent!==G$q&&(G$q?(this._parent=G$q,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),G$q.displayedInStage&&this._displayChild(this,!0)),G$q._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=G$q))}),G$D(0,G$r,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),G$R.ARRAY_EMPTY=[],G$R.PROP_EMPTY={},G$R.NOTICE_DISPLAY=1,G$R.MOUSEENABLE=2,G$R}(),G$rq=function(G$q){function G$T(G$q){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,G$T.__super.call(this),this._padding=G$T._PADDING,this._spacing=G$T._SPACING,this._aligns=G$T._ALIGNS,this._font=G$j.EMPTY,this._ower=G$q}G$x(G$T,"laya.display.css.CSSStyle",G$q);var G$r=G$T.prototype;return G$r.destroy=function(){this._ower=null,this._font=null,this._rect=null},G$r.inherit=function(G$q){this._font=G$q._font,this._spacing=G$q._spacing===G$T._SPACING?G$T._SPACING:G$q._spacing.slice(),this.lineHeight=G$q.lineHeight},G$r._widthAuto=function(){return 0!=(262144&this._type)},G$r.widthed=function(G$q){return 0!=(8&this._type)},G$r._calculation=function(G$q,G$r){if(G$r.indexOf("%")<0)return!1;var G$H=this._ower,G$A=G$H.parent,G$y=this._rect;function G$R(G$q,G$r,G$v){return G$q*G$v[0]+G$r*G$v[1]+G$v[2]}function G$v(G$q){var G$r=G$A.width,G$v=G$H.width;G$y.width&&(G$H.width=G$R(G$r,G$v,G$y.width)),G$y.height&&(G$H.height=G$R(G$r,G$v,G$y.height)),G$y.left&&(G$H.x=G$R(G$r,G$v,G$y.left)),G$y.top&&(G$H.y=G$R(G$r,G$v,G$y.top))}null===G$y&&(G$A._getCSSStyle()._type|=524288,G$A.on("resize",this,G$v),this._rect=G$y={input:{}});var G$W=G$r.split(" ");return G$W[0]=parseFloat(G$W[0])/100,1==G$W.length?G$W[1]=G$W[2]=0:(G$W[1]=parseFloat(G$W[1])/100,G$W[2]=parseFloat(G$W[2])),G$y[G$q]=G$W,G$y.input[G$q]=G$r,G$v(),!0},G$r.heighted=function(G$q){return 0!=(8192&this._type)},G$r.size=function(G$q,G$r){var G$v=this._ower,G$H=!1;-1!==G$q&&G$q!=this._ower.width&&(this._type|=8,this._ower.width=G$q,G$H=!0),-1!==G$r&&G$r!=this._ower.height&&(this._type|=8192,this._ower.height=G$r,G$H=!0),G$H&&(G$v._layoutLater(),524288&this._type&&G$v.event("resize",this))},G$r._getAlign=function(){return this._aligns[0]},G$r._getValign=function(){return this._aligns[1]},G$r._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},G$r._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new G$j(this._font))},G$r.render=function(G$q,G$r,G$v,G$H){var G$A=G$q.width,G$y=G$q.height;G$v-=G$q.pivotX,G$H-=G$q.pivotY,this._bgground&&null!=this._bgground.color&&G$r.ctx.fillRect(G$v,G$H,G$A,G$y,this._bgground.color),this._border&&this._border.color&&G$r.drawRect(G$v,G$H,G$A,G$y,this._border.color.strColor,this._border.size)},G$r.getCSSStyle=function(){return this},G$r.cssText=function(G$q){this.attrs(G$T.parseOneCSS(G$q,";"))},G$r.attrs=function(G$q){if(G$q)for(var G$r=0,G$v=G$q.length;G$r<G$v;G$r++){var G$H=G$q[G$r];this[G$H[0]]=G$H[1]}},G$r.setTransform=function(G$q){"none"===G$q?this._tf=G$W._TF_EMPTY:this.attrs(G$T.parseOneCSS(G$q,","))},G$r.translate=function(G$q,G$r){this._tf===G$W._TF_EMPTY&&(this._tf=new G$A),this._tf.translateX=G$q,this._tf.translateY=G$r},G$r.scale=function(G$q,G$r){this._tf===G$W._TF_EMPTY&&(this._tf=new G$A),this._tf.scaleX=G$q,this._tf.scaleY=G$r},G$r._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},G$D(0,G$r,"block",G$q.prototype._$get_block,function(G$q){G$q?this._type|=1:this._type&=-2}),G$D(0,G$r,"valign",function(){return G$T._valigndef[this._aligns[1]]},function(G$q){this._aligns===G$T._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=G$T._valigndef[G$q]}),G$D(0,G$r,"height",null,function(G$q){if(this._type|=8192,"string"==typeof G$q){if(this._calculation("height",G$q))return;G$q=parseInt(G$q)}this.size(-1,G$q)}),G$D(0,G$r,"width",null,function(G$q){if(this._type|=8,"string"==typeof G$q){var G$r=G$q.indexOf("auto");if(0<=G$r&&(this._type|=262144,G$q=G$q.substr(0,G$r)),this._calculation("width",G$q))return;G$q=parseInt(G$q)}this.size(G$q,-1)}),G$D(0,G$r,"fontWeight",function(){return this._font.weight},function(G$q){this._createFont().weight=G$q}),G$D(0,G$r,"left",null,function(G$q){var G$r=this._ower;if("string"==typeof G$q){if("center"===G$q?G$q="50% -50% 0":"right"===G$q&&(G$q="100% -100% 0"),this._calculation("left",G$q))return;G$q=parseInt(G$q)}G$r.x=G$q}),G$D(0,G$r,"_translate",null,function(G$q){this.translate(G$q[0],G$q[1])}),G$D(0,G$r,"absolute",function(){return 0!=(4&this._type)}),G$D(0,G$r,"top",null,function(G$q){var G$r=this._ower;if("string"==typeof G$q){if("middle"===G$q?G$q="50% -50% 0":"bottom"===G$q&&(G$q="100% -100% 0"),this._calculation("top",G$q))return;G$q=parseInt(G$q)}G$r.y=G$q}),G$D(0,G$r,"align",function(){return G$T._aligndef[this._aligns[0]]},function(G$q){this._aligns===G$T._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=G$T._aligndef[G$q]}),G$D(0,G$r,"bold",function(){return this._font.bold},function(G$q){this._createFont().bold=G$q}),G$D(0,G$r,"padding",function(){return this._padding},function(G$q){this._padding=G$q}),G$D(0,G$r,"leading",function(){return this._spacing[1]},function(G$q){"string"==typeof G$q&&(G$q=parseInt(G$q+"")),this._spacing===G$T._SPACING&&(this._spacing=[0,0]),this._spacing[1]=G$q}),G$D(0,G$r,"lineElement",function(){return 0!=(65536&this._type)},function(G$q){G$q?this._type|=65536:this._type&=-65537}),G$D(0,G$r,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(G$q){this.lineElement=!1,"right"===G$q?this._type|=32768:this._type&=-32769}),G$D(0,G$r,"textDecoration",function(){return this._font.decoration},function(G$q){this._createFont().decoration=G$q}),G$D(0,G$r,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(G$q){"nowrap"===G$q&&(this._type|=131072),"none"===G$q&&(this._type&=-131073)}),G$D(0,G$r,"background",null,function(G$q){G$q?(this._bgground||(this._bgground={}),this._bgground.color=G$q,this._ower.conchModel&&this._ower.conchModel.bgColor(G$q),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),G$D(0,G$r,"wordWrap",function(){return 0==(131072&this._type)},function(G$q){G$q?this._type&=-131073:this._type|=131072}),G$D(0,G$r,"color",function(){return this._font.color},function(G$q){this._createFont().color=G$q}),G$D(0,G$r,"password",function(){return this._font.password},function(G$q){this._createFont().password=G$q}),G$D(0,G$r,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(G$q){"none"===G$q?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=G$q),this._ower.conchModel&&this._ower.conchModel.bgColor(G$q),this._ower._renderType|=256}),G$D(0,G$r,"font",function(){return this._font.toString()},function(G$q){this._createFont().set(G$q)}),G$D(0,G$r,"weight",null,function(G$q){this._createFont().weight=G$q}),G$D(0,G$r,"letterSpacing",function(){return this._spacing[0]},function(G$q){"string"==typeof G$q&&(G$q=parseInt(G$q+"")),this._spacing===G$T._SPACING&&(this._spacing=[0,0]),this._spacing[0]=G$q}),G$D(0,G$r,"fontSize",function(){return this._font.size},function(G$q){this._createFont().size=G$q}),G$D(0,G$r,"italic",function(){return this._font.italic},function(G$q){this._createFont().italic=G$q}),G$D(0,G$r,"fontFamily",function(){return this._font.family},function(G$q){this._createFont().family=G$q}),G$D(0,G$r,"stroke",function(){return this._font.stroke[0]},function(G$q){this._createFont().stroke===G$j._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=G$q}),G$D(0,G$r,"strokeColor",function(){return this._font.stroke[1]},function(G$q){this._createFont().stroke===G$j._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=G$q}),G$D(0,G$r,"border",function(){return this._border?this._border.value:""},function(G$q){if("none"!=G$q){this._border||(this._border={});var G$r=(this._border.value=G$q).split(" ");if(this._border.color=G$F.create(G$r[G$r.length-1]),1==G$r.length)return this._border.size=1,void(this._border.type="solid");var G$v=0;0<G$r[0].indexOf("px")?(this._border.size=parseInt(G$r[0]),G$v++):this._border.size=1,this._border.type=G$r[G$v],this._ower._renderType|=256}else this._border=null}),G$D(0,G$r,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(G$q){G$q?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==G$q?null:G$F.create(G$q),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),G$D(0,G$r,"position",function(){return 4&this._type?"absolute":""},function(G$q){"absolute"==G$q?this._type|=4:this._type&=-5}),G$D(0,G$r,"display",null,function(G$q){switch(G$q){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),G$D(0,G$r,"paddingLeft",function(){return this.padding[3]}),G$D(0,G$r,"paddingTop",function(){return this.padding[0]}),G$D(0,G$r,"_scale",null,function(G$q){this._ower.scale(G$q[0],G$q[1])}),G$D(0,G$r,"_rotate",null,function(G$q){this._ower.rotation=G$q}),G$T.parseOneCSS=function(G$q,G$r){for(var G$v,G$H=[],G$A=G$q.split(G$r),G$y=0,G$R=G$A.length;G$y<G$R;G$y++){var G$W=G$A[G$y],G$O=G$W.indexOf(":"),G$N=G$W.substr(0,G$O).replace(/^\s+|\s+$/g,"");if(0!=G$N.length){var G$x=G$W.substr(G$O+1).replace(/^\s+|\s+$/g,""),G$K=[G$N,G$x];switch(G$N){case"italic":case"bold":G$K[1]="true"==G$x;break;case"line-height":G$K[0]="lineHeight",G$K[1]=parseInt(G$x);break;case"font-size":G$K[0]="fontSize",G$K[1]=parseInt(G$x);break;case"padding":1<(G$v=G$x.split(" ")).length||(G$v[1]=G$v[2]=G$v[3]=G$v[0]),G$K[1]=[parseInt(G$v[0]),parseInt(G$v[1]),parseInt(G$v[2]),parseInt(G$v[3])];break;case"rotate":G$K[0]="_rotate",G$K[1]=parseFloat(G$x);break;case"scale":G$v=G$x.split(" "),G$K[0]="_scale",G$K[1]=[parseFloat(G$v[0]),parseFloat(G$v[1])];break;case"translate":G$v=G$x.split(" "),G$K[0]="_translate",G$K[1]=[parseInt(G$v[0]),parseInt(G$v[1])];break;default:(G$K[0]=G$T._CSSTOVALUE[G$N])||(G$K[0]=G$N)}G$H.push(G$K)}}return G$H},G$T.parseCSS=function(G$q,G$r){for(var G$v;null!=(G$v=G$T._parseCSSRegExp.exec(G$q));)G$T.styleSheets[G$v[1]]=G$T.parseOneCSS(G$v[2],";")},G$T.EMPTY=new G$T(null),G$T._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},G$T._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),G$T._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},G$T._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},G$T.styleSheets={},G$T.ALIGN_CENTER=1,G$T.ALIGN_RIGHT=2,G$T.VALIGN_MIDDLE=1,G$T.VALIGN_BOTTOM=2,G$T._CSS_BLOCK=1,G$T._DISPLAY_NONE=2,G$T._ABSOLUTE=4,G$T._WIDTH_SET=8,G$T._PADDING=[0,0,0,0],G$T._RECT=[-1,-1,-1,-1],G$T._SPACING=[0,0],G$T._ALIGNS=[0,0,0],G$T.ADDLAYOUTED=512,G$T._NEWFONT=4096,G$T._HEIGHT_SET=8192,G$T._BACKGROUND_SET=16384,G$T._FLOAT_RIGHT=32768,G$T._LINE_ELEMENT=65536,G$T._NOWARP=131072,G$T._WIDTHAUTO=262144,G$T._LISTERRESZIE=524288,G$T}(G$W),G$vq=function(G$q){function G$R(){this.url=null,this.audio=null,this.loaded=!1,G$R.__super.call(this)}G$x(G$R,"laya.media.h5audio.AudioSound",G$N);var G$r=G$R.prototype;return G$r.dispose=function(){var G$q=G$R._audioCache[this.url];G$q&&(G$q.src="",delete G$R._audioCache[this.url])},G$r.load=function(G$q){var G$r;if(G$q=G$Z.formatURL(G$q),(this.url=G$q)==G$G._tMusic?(G$R._initMusicAudio(),(G$r=G$R._musicAudio).src!=G$q&&(G$R._audioCache[G$r.src]=null,G$r=null)):G$r=G$R._audioCache[G$q],G$r&&2<=G$r.readyState)this.event("complete");else{G$r||(G$r=G$q==G$G._tMusic?(G$R._initMusicAudio(),G$R._musicAudio):G$d.createElement("audio"),(G$R._audioCache[G$q]=G$r).src=G$q),G$r.addEventListener("canplaythrough",G$H),G$r.addEventListener("error",G$A);var G$v=this;(this.audio=G$r).load?G$r.load():G$A()}function G$H(){G$y(),G$v.loaded=!0,G$v.event("complete")}function G$A(){G$r.load=null,G$y(),G$v.event("error")}function G$y(){G$r.removeEventListener("canplaythrough",G$H),G$r.removeEventListener("error",G$A)}},G$r.play=function(G$q,G$r,G$v){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),!this.url)return null;var G$H,G$A;if(!(G$H=this.url==G$G._tMusic?G$R._musicAudio:G$R._audioCache[this.url]))return null;G$A=G$S.getItem("audio:"+this.url),G$Y.isConchApp?G$A||((G$A=G$d.createElement("audio")).src=this.url):this.url==G$G._tMusic?(G$R._initMusicAudio(),(G$A=G$R._musicAudio).src=this.url):G$A=G$A||G$H.cloneNode(!0);var G$y=new G$Tq(G$A);return G$y.url=this.url,G$y.loops=G$r,G$y.startTime=G$q,G$y.startHandler=G$v,G$y.play(!1),G$G.addChannel(G$y),G$y},G$D(0,G$r,"duration",function(){var G$q;return(G$q=G$R._audioCache[this.url])?G$q.duration:0}),G$R._initMusicAudio=function(){G$R._musicAudio||(G$R._musicAudio||(G$R._musicAudio=G$d.createElement("audio")),G$Y.isConchApp||G$d.document.addEventListener("mousedown",G$R._makeMusicOK))},G$R._makeMusicOK=function(){G$d.document.removeEventListener("mousedown",G$R._makeMusicOK),G$R._musicAudio.src?G$R._musicAudio.play():(G$R._musicAudio.src="",G$R._musicAudio.load())},G$R._audioCache={},G$R._musicAudio=null,G$R}(),G$Hq=function(G$q){function G$r(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,G$r.__super.call(this)}G$x(G$r,"laya.media.SoundChannel",G$N);var G$v=G$r.prototype;return G$v.play=function(){},G$v.stop=function(){},G$v.pause=function(){},G$v.resume=function(){},G$v.__runComplete=function(G$q){G$q&&G$q.run()},G$D(0,G$v,"volume",function(){return 1},function(G$q){}),G$D(0,G$v,"position",function(){return 0}),G$D(0,G$v,"duration",function(){return 0}),G$r}(),G$Aq=function(G$q){function G$r(){G$r.__super.call(this)}G$x(G$r,"laya.media.Sound",G$N);var G$v=G$r.prototype;return G$v.load=function(G$q){},G$v.play=function(G$q,G$r,G$v){return void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),null},G$v.dispose=function(){},G$D(0,G$v,"duration",function(){return 0}),G$r}(),G$yq=function(G$q){function G$A(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,G$A.__super.call(this)}G$x(G$A,"laya.media.webaudio.WebAudioSound",G$N);var G$r=G$A.prototype;return G$r.load=function(G$q){this.url=G$q,this.audioBuffer=G$A._dataCache[G$q],this.audioBuffer?this._loaded(this.audioBuffer):(G$A.e.on("loaded:"+G$q,this,this._loaded),G$A.e.on("err:"+G$q,this,this._err),G$A.__loadingSound[G$q]||(G$A.__loadingSound[G$q]=!0,G$P.loader.load(G$q,G$B.create(this,this.onloaded),null,G$Wq.BUFFER,4,!1,null,!0)))},G$r.onloaded=function(G$q){G$q||this._err(),this._disposed?this._removeLoadEvents():(this.data=G$q,G$A.buffs.push({buffer:this.data,url:this.url}),G$A.decode())},G$r._err=function(){if(this._removeLoadEvents(),G$A.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var G$q,G$r,G$v,G$H=0;for(G$q=(G$r=this.__toPlays).length,G$H=0;G$H<G$q;G$H++)(G$v=G$r[G$H])[3]&&!G$v[3].isStopped&&G$v[3].event("error");this.__toPlays.length=0}},G$r._loaded=function(G$q){this._removeLoadEvents(),this._disposed||(this.audioBuffer=G$q,this.loaded=!0,this.event("complete"))},G$r._removeLoadEvents=function(){G$A.e.off("loaded:"+this.url,this,this._loaded),G$A.e.off("err:"+this.url,this,this._err)},G$r.__playAfterLoaded=function(){if(this.__toPlays){var G$q,G$r,G$v,G$H=0;for(G$q=(G$r=this.__toPlays).length,G$H=0;G$H<G$q;G$H++)(G$v=G$r[G$H])[3]&&!G$v[3].isStopped&&this.play(G$v[0],G$v[1],G$v[2],G$v[3]);this.__toPlays.length=0}},G$r.play=function(G$q,G$r,G$v,G$H){return void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),G$H=G$H||new G$jq,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([G$q,G$r,G$v,G$H]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),G$H.url=this.url,G$H.loops=G$r,G$H.audioBuffer=this.audioBuffer,G$H.startTime=G$q,G$H.startHandler=G$v,G$H.play(!1),G$G.addChannel(G$H),G$H},G$r.dispose=function(){this._disposed=!0,delete G$A._dataCache[this.url],delete G$A.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},G$D(0,G$r,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),G$A.decode=function(){if(!(G$A.buffs.length<=0||G$A.isDecoding))if(G$A.isDecoding=!0,(G$A.tInfo=G$A.buffs.shift())&&G$A.tInfo.buffer&&G$A.tInfo.buffer.byteLength)try{G$A.ctx.decodeAudioData(G$A.tInfo.buffer,G$A._done,G$A._fail)}catch(G$q){console.error("decodeAudioData error  byteLength:"+G$A.tInfo.buffer.byteLength+"  url:"+G$A.tInfo.url)}else G$A._fail()},G$A._done=function(G$q){G$A.e.event("loaded:"+G$A.tInfo.url,G$q),G$A._dataCache[G$A.tInfo.url]=G$q,G$A.isDecoding=!1,G$A.decode()},G$A._fail=function(){G$A.e.event("err:"+G$A.tInfo.url,null),G$A.isDecoding=!1,G$A.decode()},G$A._playEmptySound=function(){if(null!=G$A.ctx){if(G$A._emptySource&&(G$A._emptySource.stop(),G$A._emptySource.disconnect(0),!G$jq._tryCleanFailed))try{G$A._emptySource.buffer=null}catch(G$q){G$jq._tryCleanFailed=!0}var G$q=G$A.ctx.createBufferSource();G$q.buffer=G$A._miniBuffer,G$q.connect(G$A.ctx.destination),G$q.start(0,0,0),G$A._emptySource=G$q}},G$A._unlock=function(){G$A._unlocked||(G$A._playEmptySound(),"running"==G$A.ctx.state?(G$d.document.removeEventListener("mousedown",G$A._unlock,!0),G$d.document.removeEventListener("touchend",G$A._unlock,!0),G$d.document.removeEventListener("touchstart",G$A._unlock,!0),G$A._unlocked=!0):"suspended"==G$A.ctx.state&&G$G._recoverWebAudio())},G$A.initWebAudio=function(){"running"!=G$A.ctx.state&&(G$A._unlock(),G$d.document.addEventListener("mousedown",G$A._unlock,!0),G$d.document.addEventListener("touchend",G$A._unlock,!0),G$d.document.addEventListener("touchstart",G$A._unlock,!0))},G$A._emptySource=null,G$A._dataCache={},G$A.buffs=[],G$A.isDecoding=!1,G$A._unlocked=!1,G$A.tInfo=null,G$A.__loadingSound={},G$O(G$A,["window",function(){return this.window=G$d.window},"webAudioEnabled",function(){return this.webAudioEnabled=G$A.window.AudioContext||G$A.window.webkitAudioContext||G$A.window.mozAudioContext},"ctx",function(){return this.ctx=G$A.webAudioEnabled?new(G$A.window.AudioContext||G$A.window.webkitAudioContext||G$A.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=G$A.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new G$N}]),G$A}(),G$Rq=function(G$q){function G$r(){this._responseType=null,this._data=null,G$r.__super.call(this),this._http=new G$d.window.XMLHttpRequest}G$x(G$r,"laya.net.HttpRequest",G$N);var G$v=G$r.prototype;return G$v.send=function(G$q,G$r,G$v,G$H,G$A){void 0===G$v&&(G$v="get"),void 0===G$H&&(G$H="text"),this._responseType=G$H,this._data=null;var G$y=this,G$R=this._http;if(G$R.open(G$v,G$q,!0),G$A)for(var G$W=0;G$W<G$A.length;G$W++)G$R.setRequestHeader(G$A[G$W++],G$A[G$W]);else G$Y.isConchApp||(G$r&&"string"!=typeof G$r?G$R.setRequestHeader("Content-Type","application/json"):G$R.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));G$R.responseType="arraybuffer"!==G$H?"text":"arraybuffer",G$R.onerror=function(G$q){G$y._onError(G$q)},G$R.onabort=function(G$q){G$y._onAbort(G$q)},G$R.onprogress=function(G$q){G$y._onProgress(G$q)},G$R.onload=function(G$q){G$y._onLoad(G$q)},G$R.send(G$r)},G$v._onProgress=function(G$q){G$q&&G$q.lengthComputable&&this.event("progress",G$q.loaded/G$q.total)},G$v._onAbort=function(G$q){this.error("Request was aborted by user")},G$v._onError=function(G$q){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},G$v._onLoad=function(G$q){var G$r=this._http,G$v=void 0!==G$r.status?G$r.status:200;200===G$v||204===G$v||0===G$v?this.complete():this.error("["+G$r.status+"]"+G$r.statusText+":"+G$r.responseURL)},G$v.error=function(G$q){this.clear(),this.event("error",G$q)},G$v.complete=function(){this.clear();var G$r=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=G$w.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(G$q){G$r=!1,this.error(G$q.message)}G$r&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},G$v.clear=function(){var G$q=this._http;G$q.onerror=G$q.onabort=G$q.onprogress=G$q.onload=null},G$D(0,G$v,"url",function(){return this._http.responseURL}),G$D(0,G$v,"http",function(){return this._http}),G$D(0,G$v,"data",function(){return this._data}),G$r}(),G$Wq=function(G$q){function G$J(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,G$J.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1,this._base64=!1}G$x(G$J,"laya.net.Loader",G$N);var G$r=G$J.prototype;return G$r.load=function(G$q,G$r,G$v,G$H,G$A){if(G$q&&""!=G$q||console.error("Loader 加载的url不合法 "+G$q),void 0===G$v&&(G$v=!0),void 0===G$A&&(G$A=!1),this._url=G$q,this._base64=!1,0===G$q.indexOf("data:image")?(this._base64=!0,this._type=G$r="image"):this._type=G$r||(G$r=this.getTypeFromUrl(G$q)),this._cache=G$v,this._data=null,!G$A&&G$J.loadedMap[G$q])return this._data=G$J.loadedMap[G$q],this.event("progress",1),void this.event("complete",this._data);if(G$H&&G$J.setGroup(G$q,G$H),null!=G$J.parserMap[G$r])return this._customParse=!0,void(G$J.parserMap[G$r]instanceof laya.utils.Handler?G$J.parserMap[G$r].runWith(this):G$J.parserMap[G$r].call(null,this));if("image"===G$r||"htmlimage"===G$r||"nativeimage"===G$r)return this._loadImage(G$q);if("ttf"===G$r)return this._loadTTF(G$q);switch(G$r){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:G$r}G$J.preLoadedMap[G$q]?this.onLoaded(G$J.preLoadedMap[G$q]):G$R.resMgrLoad(G$q,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},G$r.getTypeFromUrl=function(G$q){var G$r=G$w.getFileExtension(G$q);return G$r?G$J.typeMap[G$r]:(console.warn("Not recognize the resources suffix",G$q),"text")},G$r._loadTTF=function(G$q){G$q=G$Z.formatURL(G$q);var G$r=new G$s;G$r.complete=G$B.create(this,this.onLoaded),G$r.load(G$q)},G$r._loadBase64Image=function(G$r){G$r=G$Z.formatURL(G$r);var G$v,G$q=this;function G$H(){G$v.onload=null,G$v.onerror=null,delete G$J.imgCache[G$r]}function G$A(){G$H(),G$q.onLoaded(G$v)}function G$y(){G$H(),G$q.event("error","Load image failed")}"nativeimage"===this._type?((G$v=new G$d.window.Image).crossOrigin="",G$v.onload=G$A,G$v.onerror=G$y,G$v.src=G$r,G$J.imgCache[G$r]=G$v):new G$zq.create(G$r,{onload:G$A,onerror:G$y,onCreate:function(G$q){G$v=G$q,G$J.imgCache[G$r]=G$q}})},G$r._loadImage=function(G$q){this._base64?this._loadBase64Image(G$q):G$R.imgMgrLoad(G$q,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},G$r._loadImageComplete=function(G$q,G$r,G$v){if(null!=G$v)if(G$v instanceof ArrayBuffer){var G$H=new DataView(G$v),G$A=new laya.webgl.resource.WebGLImage(new Uint8Array(G$v,8),G$q,0,!1,G$H.getUint32(0),G$H.getUint32(4));this.onLoaded(G$A)}else if(G$v instanceof G$xq)G$J.imgMgrSet[G$q]=G$r,G$R.imgMgrLock(G$q,G$J.imgMgrSet[G$q]),this._url=G$q,this.complete(G$v);else{var G$y=-1!=G$q.indexOf(".png",G$q.length-4)?6408:6407;G$A=new laya.webgl.resource.WebGLImage(G$v,G$q,G$y,!1,G$v.width,G$v.height);this.onLoaded(G$A)}else this.event("error","Load image failed")},G$r.imageCancel=function(G$q,G$r,G$v){G$R.imgMgrCancel&&G$R.imgMgrCancel(G$q,this._onImageCallback)},G$r._loadSound=function(G$q){var G$r=new G$G._soundClass,G$v=this;function G$H(){G$r.offAll()}G$r.on("complete",this,function(){G$H(),G$v.onLoaded(G$r)}),G$r.on("error",this,function(){G$H(),G$r.dispose(),G$v.event("error","Load sound failed")}),G$r.load(G$q)},G$r.onProgress=function(G$q){"atlas"===this._type?this.event("progress",.3*G$q):this.event("progress",G$q)},G$r.onError=function(G$q){this.event("error",G$q)},G$r._loadedComplete=function(G$q,G$r,G$v){if(null!=G$v)switch(this._type){case"atlas":case"plf":case"json":var G$H=new G$u(G$v);this.onLoaded(JSON.parse(G$H.readUTFBytes()));break;case"font":G$H=new G$u(G$v);this.onLoaded(G$w.parseXMLFromString(G$H.readUTFBytes()));break;default:this.onLoaded(G$v)}else this.event("error",G$q)},G$r.onLoaded=function(G$q){var G$r=this._type;if("plf"==G$r)this.parsePLFData(G$q),this.complete(G$q);else if("image"===G$r){var G$v=new G$xq(G$q);G$v.url=this._url,this.complete(G$v)}else if("sound"===G$r||"htmlimage"===G$r||"nativeimage"===G$r)this.complete(G$q);else if("atlas"===G$r){if(!G$q.src&&!G$q._setContext){if(!this._data){if((this._data=G$q).meta&&G$q.meta.image)for(var G$H=G$q.meta.image.split(","),G$A=0<=this._url.indexOf("/")?"/":"\\",G$y=this._url.lastIndexOf(G$A),G$R=0<=G$y?this._url.substr(0,G$y+1):"",G$W=0,G$O=G$H.length;G$W<G$O;G$W++)G$H[G$W]=G$R+G$H[G$W];else G$H=[this._url.replace(".json",".png")];G$H.reverse(),G$q.toLoads=G$H,G$q.pics=[]}return this.event("progress",.3+1/G$H.length*.6),this._loadImage(G$H.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(G$q),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var G$N=this._data.frames,G$x=this._url.split("?")[0],G$K=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:G$x.substring(0,G$x.lastIndexOf("."))+"/",G$T=this._data.pics,G$j=G$Z.formatURL(this._url),G$D=G$J.atlasMap[G$j]||(G$J.atlasMap[G$j]=[]);G$D.dir=G$K;var G$g=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var G$X in G$g=parseFloat(this._data.meta.scale),G$N){var G$m,G$B=G$N[G$X],G$e=G$T[G$B.frame.idx?G$B.frame.idx:0],G$p=G$Z.formatURL(G$K+G$X);G$e.scaleRate=G$g,G$m=G$xq.create(G$e,G$B.frame.x,G$B.frame.y,G$B.frame.w,G$B.frame.h,G$B.spriteSourceSize.x,G$B.spriteSourceSize.y,G$B.sourceSize.w,G$B.sourceSize.h),G$J.cacheRes(G$p,G$m),G$J.keepCache(this._url,G$K+G$X),G$m.url=G$p,G$D.push(G$p)}else for(G$X in G$N)G$e=G$T[(G$B=G$N[G$X]).frame.idx?G$B.frame.idx:0],G$p=G$Z.formatURL(G$K+G$X),G$J.cacheRes(G$p,G$xq.create(G$e,G$B.frame.x,G$B.frame.y,G$B.frame.w,G$B.frame.h,G$B.spriteSourceSize.x,G$B.spriteSourceSize.y,G$B.sourceSize.w,G$B.sourceSize.h)),G$J.loadedMap[G$p].url=G$p,G$J.keepCache(this._url,G$K+G$X),G$D.push(G$p);delete this._data.pics,this.complete(this._data)}else if("font"==G$r){if(!G$q.src)return this._data=G$q,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var G$M=new G$$;G$M.parseFont(this._data,G$q);var G$z=this._url.split(".fnt")[0].split("/"),G$P=G$z[G$z.length-1];G$Xq.registerBitmapFont(G$P,G$M),this._data=G$M,this.complete(this._data)}else if("pkm"==G$r){var G$V=G$zq.create(G$q,this._url),G$a=new G$xq(G$V);G$a.url=this._url,this.complete(G$a)}else this.complete(G$q)},G$r.parsePLFData=function(G$q){var G$r,G$v,G$H;for(G$r in G$q)switch(G$H=G$q[G$r],G$r){case"json":case"text":for(G$v in G$H)G$J.preLoadedMap[G$Z.formatURL(G$v)]=G$H[G$v];break;default:for(G$v in G$H)G$J.preLoadedMap[G$Z.formatURL(G$v)]=G$H[G$v]}},G$r.complete=function(G$q){this._data=G$q,this._customParse?this.event("loaded",G$q instanceof Array?[G$q]:G$q):(G$J._loaders.push(this),G$J._isWorking||G$J.checkNext())},G$r.endLoad=function(G$q){G$q&&(this._data=G$q),this._cache&&G$J.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},G$D(0,G$r,"url",function(){return this._url}),G$D(0,G$r,"data",function(){return this._data}),G$D(0,G$r,"cache",function(){return this._cache}),G$D(0,G$r,"type",function(){return this._type}),G$J.checkNext=function(){G$J._isWorking=!0;for(var G$q=G$d.now();G$J._startIndex<G$J._loaders.length;)if(G$d.now(),G$J._loaders[G$J._startIndex].endLoad(),G$J._startIndex++,G$d.now()-G$q>G$J.maxTimeOut)return console.warn("loader callback cost a long time:"+(G$d.now()-G$q)+" url="+G$J._loaders[G$J._startIndex-1].url),void G$P.timer.frameOnce(1,null,G$J.checkNext);G$J._loaders.length=0,G$J._startIndex=0,G$J._isWorking=!1},G$J.clearRes=function(G$q,G$r){if(null!=G$q){void 0===G$r&&(G$r=!1),G$q=G$Z.formatURL(G$q);var G$v=G$J.getAtlas(G$q);if(G$v){for(var G$H=0,G$A=G$v.length;G$H<G$A;G$H++){var G$y=G$v[G$H],G$R=G$J.getRes(G$y);delete G$J.loadedMap[G$y],G$J.clearCache(G$q.substring(G$Z.basePath.length),G$y.substring(G$Z.basePath.length)),G$R&&G$R.destroy(G$r)}G$v.length=0,delete G$J.atlasMap[G$q],delete G$J.loadedMap[G$q]}else{var G$W=G$J.loadedMap[G$q];G$W&&(delete G$J.loadedMap[G$q],G$W instanceof laya.resource.Texture&&G$W.bitmap&&G$W.destroy(G$r))}}},G$J.clearTextureRes=function(G$q){G$q=G$Z.formatURL(G$q);var G$r=laya.net.Loader.getAtlas(G$q),G$v=G$r&&0<G$r.length?laya.net.Loader.getRes(G$r[0]):laya.net.Loader.getRes(G$q);G$v&&G$v.bitmap&&(G$Y.isConchApp&&!G$Y.isConchWebGL?G$v.bitmap.source.releaseTexture&&G$v.bitmap.source.releaseTexture():null==G$v.bitmap._atlaser&&G$v.bitmap.releaseResource(!0))},G$J.getRes=function(G$q){return G$J.loadedMap[G$Z.formatURL(G$q)]},G$J.getAtlas=function(G$q){return G$J.atlasMap[G$Z.formatURL(G$q)]},G$J.cacheRes=function(G$q,G$r){G$q=G$Z.formatURL(G$q),null!=G$J.loadedMap[G$q]?console.warn("Resources already exist,is repeated loading:",G$q):G$J.loadedMap[G$q]=G$r},G$J.setGroup=function(G$q,G$r){G$J.groupMap[G$r]||(G$J.groupMap[G$r]=[]),G$J.groupMap[G$r].push(G$q)},G$J.clearResByGroup=function(G$q){if(G$J.groupMap[G$q]){var G$r=G$J.groupMap[G$q],G$v=0,G$H=G$r.length;for(G$v=0;G$v<G$H;G$v++)G$J.clearRes(G$r[G$v]);G$r.length=0}},G$J.keepCache=function(G$q,G$r){if(G$q&&G$r){var G$v=G$J.cacheSet[G$r];G$v?-1==G$v.indexOf(G$q)&&G$v.push(G$q):G$J.cacheSet[G$r]=[G$q]}},G$J.clearCache=function(G$q,G$r){if(G$q&&G$r){var G$v=G$J.cacheSet[G$r];if(G$v){var G$H=G$v.indexOf(G$q);if(-1!==G$H){var G$A=G$v.length-1;0==G$A?(delete G$J.cacheSet[G$r],0<G$J.imgMgrSet[G$r]?G$R.imgMgrFree(G$r,G$J.imgMgrSet[G$r]):G$J.clearRes(G$r,!0)):(G$v[G$H]=G$v[G$A],G$v.length=G$A)}}}},G$J.saveObject=function(G$q,G$r,G$v){if(G$r&&G$q){var G$H=G$J.objectSet[G$q];G$H?(console.warn("Loader.saveObject: "+G$q),G$H[0]=G$r,G$H[1]=G$v):G$J.objectSet[G$q]=[G$r,G$v,[]]}},G$J.findObject=function(G$q){if(G$q){var G$r=G$J.objectSet[G$q];if(G$r)return G$r[0]}return null},G$J.keepObject=function(G$q,G$r){if(G$q&&G$r){var G$v=G$J.objectSet[G$r];G$v&&-1===G$v[2].indexOf(G$q)&&G$v[2].push(G$q)}},G$J.clearObject=function(G$q,G$r){if(G$q&&G$r){var G$v=G$J.objectSet[G$r];if(G$v){var G$H=G$v[2],G$A=G$H.indexOf(G$q);if(-1!==G$A){var G$y=G$H.length-1;0==G$y?(delete G$J.objectSet[G$r],G$v[1]&&G$v[1].call(null,G$v[0])):(G$H[G$A]=G$H[G$y],G$H.length=G$y)}}}},G$J.TEXT="text",G$J.JSON="json",G$J.XML="xml",G$J.BUFFER="arraybuffer",G$J.IMAGE="image",G$J.SOUND="sound",G$J.ATLAS="atlas",G$J.FONT="font",G$J.TTF="ttf",G$J.PLF="plf",G$J.PKM="pkm",G$J.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},G$J.parserMap={},G$J.groupMap={},G$J.maxTimeOut=100,G$J.loadedMap={},G$J.preLoadedMap={},G$J.atlasMap={},G$J._loaders=[],G$J._isWorking=!1,G$J._startIndex=0,G$J.imgCache={},G$J.cacheSet={},G$J.objectSet={},G$J.imgMgrSet={},G$J}(),G$Oq=function(G$q){var G$T;function G$j(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},G$j.__super.call(this);for(var G$q=0;G$q<this._maxPriority;G$q++)this._resInfos[G$q]=[]}G$x(G$j,"laya.net.LoaderManager",G$N);var G$r=G$j.prototype;return G$r.create=function(G$q,G$v,G$r,G$H,G$A,G$y,G$R,G$W){if(null==G$y&&(G$y=2),null==G$R&&(G$R=!0),G$q instanceof Array){var G$O=G$q,G$N=G$O.length,G$x=0;if(G$r)var G$K=G$B.create(G$r.caller,G$r.method,G$r.args,!1);for(var G$T=0;G$T<G$N;G$T++){var G$j=G$O[G$T];"string"==typeof G$j&&(G$j=G$O[G$T]={url:G$j}),G$j.progress=0}for(G$T=0;G$T<G$N;G$T++){G$j=G$O[G$T];var G$D=G$r?G$B.create(null,G$m,[G$j],!1):null,G$g=G$r||G$v?G$B.create(null,G$X,[G$j]):null;this._create(G$j.url,G$g,G$D,G$j.clas||G$H,G$j.params||G$A,null!=G$j.priority&&0<=G$j.priority?G$j.priority:G$y,G$R,G$j.group||G$W)}function G$X(G$q,G$r){G$x++,G$q.progress=1,G$x===G$N&&G$v&&G$v.run()}function G$m(G$q,G$r){G$q.progress=G$r;for(var G$v=0,G$H=0;G$H<G$N;G$H++){G$v+=G$O[G$H].progress}var G$A=G$v/G$N;G$K.runWith(G$A)}return!0}return this._create(G$q,G$v,G$r,G$H,G$A,G$y,G$R,G$W)},G$r._create=function(G$r,G$v,G$q,G$H,G$A,G$y,G$R,G$W){G$r&&""!=G$r||console.error("加载的url不合法 "+G$r),null==G$y&&(G$y=2),null==G$R&&(G$R=!0);var G$O=G$Z.formatURL(G$r),G$N=this.getRes(G$O);if(G$N)!G$N.hasOwnProperty("loaded")||G$N.loaded?(G$q&&G$q.runWith(1),G$v&&G$v.run()):G$v&&G$P.loader._createListener(G$r,G$v.caller,G$v.method,G$v.args,!0,!1);else{var G$x=G$w.getFileExtension(G$r),G$K=G$j.createMap[G$x];if(!G$K)throw new Error("LoaderManager:unknown file("+G$r+") extension with: "+G$x+".");G$H||(G$H=G$K[0]);var G$T=G$K[1];if("atlas"==G$x)this.load(G$r,G$v,G$q,G$T,G$y,G$R);else{G$H===G$xq&&(G$T="htmlimage"),(G$N=G$H?new G$H:null).hasOwnProperty("_loaded")&&(G$N._loaded=!1),G$N._setUrl(G$r),G$W&&G$N._setGroup(G$W),this._createLoad(G$N,G$r,G$B.create(null,function(G$q){G$N&&!G$N.destroyed&&G$q&&G$N.onAsynLoaded.call(G$N,G$r,G$q,G$A),G$v&&G$v.run();G$P.loader.event(G$r)}),G$q,G$T,G$y,!1,G$W,!0),G$R&&this.cacheRes(G$O,G$N)}}return G$N},G$r.load=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){G$q&&""!=G$q||console.error("加载的url不合法 "+G$q);var G$O=this;if(null==G$A&&(G$A=2),null==G$y&&(G$y=!0),void 0===G$W&&(G$W=!1),G$q instanceof Array)return this._loadAssets(G$q,G$r,G$v,G$H,G$A,G$y,G$R);var G$N=G$Wq.getRes(G$q);if(null!=G$N)G$P.timer.frameOnce(1,null,function(){G$v&&G$v.runWith(1),G$r&&G$r.runWith(G$N),G$O._loaderCount||G$O.event("complete")});else{var G$x=G$j._resMap[G$q];G$x?(G$r&&G$x._createListener("complete",G$r.caller,G$r.method,G$r.args,!1,!1),G$v&&G$x._createListener("progress",G$v.caller,G$v.method,G$v.args,!1,!1)):((G$x=this._infoPool.length?this._infoPool.pop():new G$T).url=G$q,G$x.clas=null,G$x.type=G$H,G$x.cache=G$y,G$x.group=G$R,G$x.ignoreCache=G$W,G$x.priority=G$A,G$r&&G$x.on("complete",G$r.caller,G$r.method,G$r.args),G$v&&G$x.on("progress",G$v.caller,G$v.method,G$v.args),G$j._resMap[G$q]=G$x,G$A=G$A<this._maxPriority?0<=G$A?G$A:0:this._maxPriority-1,this._resInfos[G$A].push(G$x),this._next())}return this},G$r.cancel=function(G$q,G$r,G$v){if(G$N=G$j._resMap[G$q]){G$r&&G$N.off("complete",G$r.caller,G$r.method,!1),G$v&&G$N.off("progress",G$v.caller,G$v.method,!1);var G$H=G$N.getListener("complete"),G$A=G$N.getListener("progress");if(!(G$H&&G$H.head||G$A&&G$A.head)){if(G$N.loader){var G$y=G$N.loader;G$y.imageCancel(G$q),G$y.offAll(),G$y._data=null,G$y._customParse=!1,G$y._url=null,G$y._class=null,G$y._type=null,this._loaders.push(G$y),this._loaderCount--,delete this._loaderMap[G$N.url]}for(var G$R=0;G$R<this._maxPriority;G$R++)for(var G$W=this._resInfos[G$R],G$O=G$W.length-1;-1<G$O;G$O--){var G$N;(G$N=G$W[G$O])&&G$N.url===G$q&&(G$W[G$O]=null,G$N.destroy(),G$N.offAll(),this._infoPool.push(G$N))}delete G$j._resMap[G$q],this._next()}}},G$r._createLoad=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){var G$N=this;if(null==G$y&&(G$y=2),null==G$R&&(G$R=!0),void 0===G$O&&(G$O=!1),G$r instanceof Array)return this._loadAssets(G$r,G$v,G$H,G$A,G$y,G$R,G$W);var G$x=G$Wq.getRes(G$r);if(null!=G$x)G$P.timer.frameOnce(1,null,function(){G$H&&G$H.runWith(1),G$v&&G$v.runWith(G$x),G$N._loaderCount||G$N.event("complete")});else{var G$K=G$j._resMap[G$r];G$K?(G$v&&G$K._createListener("complete",G$v.caller,G$v.method,G$v.args,!1,!1),G$H&&G$K._createListener("progress",G$H.caller,G$H.method,G$H.args,!1,!1)):((G$K=this._infoPool.length?this._infoPool.pop():new G$T).url=G$r,G$K.clas=G$q,G$K.type=G$A,G$K.cache=G$R,G$K.group=G$W,G$K.ignoreCache=G$O,G$K.priority=G$y,G$v&&G$K.on("complete",G$v.caller,G$v.method,G$v.args),G$H&&G$K.on("progress",G$H.caller,G$H.method,G$H.args),G$j._resMap[G$r]=G$K,G$y=G$y<this._maxPriority?0<=G$y?G$y:0:this._maxPriority-1,this._resInfos[G$y].push(G$K),this._next())}return this},G$r._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var G$q=0;G$q<this._maxPriority;G$q++)for(var G$r=this._resInfos[G$q];0<G$r.length;){var G$v=G$r.shift();if(G$v)return this._doLoad(G$v)}this._loaderCount||this.event("complete")}},G$r._doLoad=function(G$r){var G$v=this._loaders.length?this._loaders.pop():new G$Wq;this._loaderCount++,(this._loaderMap[G$r.url]=G$v).on("complete",null,G$A),G$v.on("progress",null,function(G$q){G$r.event("progress",G$q)}),G$v.on("error",null,function(G$q){G$A(null)}),G$r.loader=G$v;var G$H=this;function G$A(G$q){G$v.offAll(),G$v._data=null,G$v._customParse=!1,G$v._url=null,G$v._class=null,G$v._type=null,G$H._loaders.push(G$v),G$H._loaderCount--,delete G$H._loaderMap[G$r.url],G$H._endLoad(G$r,G$q instanceof Array?[G$q]:G$q),G$H._next()}G$v._class=G$r.clas,1<=G$r.priority?(G$v.priority=G$r.priority,G$v.realTime=!1):(G$v.priority=0,G$v.realTime=!0),G$v.load(G$r.url,G$r.type,G$r.cache,G$r.group,G$r.ignoreCache)},G$r._endLoad=function(G$q,G$r){var G$v=G$q.url;if(null==G$r){var G$H=this._failRes[G$v]||0;if(G$H<this.retryNum)return console.warn("[warn]Retry to load:",G$v),this._failRes[G$v]=G$H+1,void G$P.timer.once(this.retryDelay,this,this._addReTry,[G$q],!1);console.warn("[error]Failed to load:",G$v),this.event("error",G$v)}this._failRes[G$v]&&(this._failRes[G$v]=0),delete G$j._resMap[G$v],G$q.event("complete",G$r),G$q.destroy(),G$q.offAll(),this._infoPool.push(G$q)},G$r._addReTry=function(G$q){this._resInfos[this._maxPriority-1].push(G$q),this._next()},G$r.clearRes=function(G$q,G$r){void 0===G$r&&(G$r=!1),G$Wq.clearRes(G$q,G$r)},G$r.getRes=function(G$q){return G$Wq.getRes(G$q)},G$r.cacheRes=function(G$q,G$r){G$Wq.cacheRes(G$q,G$r)},G$r.clearTextureRes=function(G$q){G$Wq.clearTextureRes(G$q)},G$r.setGroup=function(G$q,G$r){G$Wq.setGroup(G$q,G$r)},G$r.clearResByGroup=function(G$q){G$Wq.clearResByGroup(G$q)},G$r.clearUnLoaded=function(){for(var G$q=0;G$q<this._maxPriority;G$q++){for(var G$r=this._resInfos[G$q],G$v=G$r.length-1;-1<G$v;G$v--){var G$H=G$r[G$v];G$H&&(G$H.destroy(),G$H.offAll(),this._infoPool.push(G$H))}G$r.length=0}this._loaderCount=0,G$j._resMap={}},G$r.cancelLoadByUrls=function(G$q){if(G$q)for(var G$r=0,G$v=G$q.length;G$r<G$v;G$r++)this.cancelLoadByUrl(G$q[G$r])},G$r.cancelLoadByUrl=function(G$q){for(var G$r=0;G$r<this._maxPriority;G$r++)for(var G$v=this._resInfos[G$r],G$H=G$v.length-1;-1<G$H;G$H--){var G$A=G$v[G$H];G$A&&G$A.url===G$q&&(G$v[G$H]=null,G$A.destroy(),G$A.offAll(),this._infoPool.push(G$A))}G$j._resMap[G$q]&&delete G$j._resMap[G$q]},G$r._loadAssets=function(G$q,G$v,G$R,G$r,G$H,G$A,G$y){null==G$H&&(G$H=2),null==G$A&&(G$A=!0);for(var G$W=G$q.length,G$O=0,G$N=0,G$x=[],G$K=!0,G$T=0;G$T<G$W;G$T++){var G$j=G$q[G$T];if(!G$j)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+G$q);"string"==typeof G$j&&(G$j={url:G$j,type:G$r,size:1,priority:G$H}),G$j.size||(G$j.size=1),G$j.progress=0,G$N+=G$j.size,G$x.push(G$j);var G$D=G$R?G$B.create(null,G$m,[G$j],!1):null,G$g=G$v||G$R?G$B.create(null,G$X,[G$j]):null;this.load(G$j.url,G$g,G$D,G$j.type,null!=G$j.priority&&0<=G$j.priority?G$j.priority:2,G$A,G$j.group||G$y)}function G$X(G$q,G$r){G$O++,G$q.progress=1,G$r||(G$K=!1),G$O===G$W&&G$v&&G$v.runWith(G$K)}function G$m(G$q,G$r){if(null!=G$R){G$q.progress=G$r;for(var G$v=0,G$H=0;G$H<G$x.length;G$H++){var G$A=G$x[G$H];G$v+=G$A.size*G$A.progress}var G$y=G$v/G$N;G$R.runWith(G$y)}}return this},G$j.cacheRes=function(G$q,G$r){G$Wq.cacheRes(G$q,G$r)},G$j._resMap={},G$O(G$j,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),G$j.__init$=function(){G$T=function(G$q){function G$r(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,G$r.__super.call(this)}return G$x(G$r,"",G$N),G$r.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},G$r}()},G$j}(),G$Nq=(function(G$q){function G$A(G$q){G$A.__super.call(this),G$q||(G$q=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var G$r=0,G$v=0,G$H=0;G$H<20;G$H++)G$H%5!=4?this._mat[G$r++]=G$q[G$H]:this._alpha[G$v++]=G$q[G$H];this._action=G$E.createFilterAction(32),this._action.data=this}G$x(G$A,"laya.filters.ColorFilter",G$m);var G$r=G$A.prototype;G$P.imps(G$r,{"laya.filters.IFilter":!0}),G$r.callNative=function(G$q){G$q._$P.cf=this;G$q.conchModel&&G$q.conchModel.setFilterMatrix&&G$q.conchModel.setFilterMatrix(this._mat,this._alpha)},G$D(0,G$r,"type",function(){return 32}),G$D(0,G$r,"action",function(){return this._action})}(),function(G$q){function G$H(G$q,G$r,G$v){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===G$r&&(G$r=0),G$H.__super.call(this),this._byteClass=G$v||G$u,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,G$q&&0<G$r&&G$r<65535&&this.connect(G$q,G$r)}G$x(G$H,"laya.net.Socket",G$N);var G$r=G$H.prototype;G$r.connect=function(G$q,G$r){var G$v="ws://"+G$q+":"+G$r;G$v="https:"==G$d.window.location.protocol?"wss://"+G$q+":"+G$r:"ws://"+G$q+":"+G$r,this.connectByUrl(G$v)},G$r.connectByUrl=function(G$q){var G$r=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new G$d.window.WebSocket(G$q,this.protocols):this._socket=new G$d.window.WebSocket(G$q),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(G$q){G$r._onOpen(G$q)},this._socket.onmessage=function(G$q){G$r._onMessage(G$q)},this._socket.onclose=function(G$q){G$r._onClose(G$q)},this._socket.onerror=function(G$q){G$r._onError(G$q)}},G$r.cleanSocket=function(){try{this._socket.close()}catch(G$q){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},G$r.close=function(){if(null!=this._socket)try{this._socket.close()}catch(G$q){}},G$r._onOpen=function(G$q){this._connected=!0,this.event("open",G$q)},G$r._onMessage=function(G$q){if(G$q&&G$q.data){var G$r=G$q.data;if(this.disableInput&&G$r)this.event("message",G$r);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var G$v=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,G$r&&("string"==typeof G$r?this._input.writeUTFBytes(G$r):this._input.writeArrayBuffer(G$r),this._addInputPosition=this._input.pos,this._input.pos=G$v),this.event("message",G$r)}}},G$r._onClose=function(G$q){this._connected=!1,this.event("close",G$q)},G$r._onError=function(G$q){this.event("error",G$q)},G$r.send=function(G$q){this._socket.send(G$q)},G$r.flush=function(){if(this._output&&0<this._output.length){var G$r;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(G$q){G$r=G$q}this._output.endian=this.endian,this._output.clear(),G$r&&this.event("error",G$r)}},G$D(0,G$r,"input",function(){return this._input}),G$D(0,G$r,"output",function(){return this._output}),G$D(0,G$r,"connected",function(){return this._connected}),G$D(0,G$r,"endian",function(){return this._endian},function(G$q){this._endian=G$q,null!=this._input&&(this._input.endian=G$q),null!=this._output&&(this._output.endian=G$q)}),G$H.LITTLE_ENDIAN="littleEndian",G$H.BIG_ENDIAN="bigEndian"}(),function(G$q){function G$W(){G$W.__super.call(this),this._$1__id=++G$W._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(G$W._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,G$b.currentResourceManager&&G$b.currentResourceManager.addResource(this)}G$x(G$W,"laya.resource.Resource",G$N);var G$r=G$W.prototype;return G$P.imps(G$r,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),G$r._setUrl=function(G$q){var G$r;this._url!==G$q&&(this._url&&((G$r=G$W._urlResourcesMap[this._url]).splice(G$r.indexOf(this),1),0===G$r.length&&delete G$W._urlResourcesMap[this._url]),G$q&&((G$r=G$W._urlResourcesMap[G$q])||(G$W._urlResourcesMap[G$q]=G$r=[]),G$r.push(this)),this._url=G$q)},G$r._getGroup=function(){return this._group},G$r._setGroup=function(G$q){var G$r;this._group!==G$q&&(this._group&&((G$r=G$W._groupResourcesMap[this._group]).splice(G$r.indexOf(this),1),0===G$r.length&&delete G$W._groupResourcesMap[this._group]),G$q&&((G$r=G$W._groupResourcesMap[G$q])||(G$W._groupResourcesMap[G$q]=G$r=[]),G$r.push(this)),this._group=G$q)},G$r._addReference=function(){this._referenceCount++},G$r._removeReference=function(){this._referenceCount--},G$r._clearReference=function(){this._referenceCount=0},G$r._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},G$r.recreateResource=function(){this.completeCreate()},G$r.disposeResource=function(){},G$r.activeResource=function(G$q){void 0===G$q&&(G$q=!1),this._lastUseFrameCount=G$l.loopCount,!this._destroyed&&this.__loaded&&(this._released||G$q)&&this.recreateResource()},G$r.releaseResource=function(G$q){return void 0===G$q&&(G$q=!0),!(!G$q&&this.lock)&&(!(this._released&&!G$q)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},G$r.onAsynLoaded=function(G$q,G$r,G$v){throw new Error("Resource: must override this function!")},G$r.destroy=function(){var G$q;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete G$W._idResourcesMap[this.id],this._url&&((G$q=G$W._urlResourcesMap[this._url])&&(G$q.splice(G$q.indexOf(this),1),0===G$q.length&&delete G$W._urlResourcesMap[this.url]),G$Wq.clearRes(this._url),this.__loaded||G$E.cancelLoadByUrl(this._url)),this._group&&((G$q=G$W._groupResourcesMap[this._group]).splice(G$q.indexOf(this),1),0===G$q.length&&delete G$W._groupResourcesMap[this.url]))},G$r.completeCreate=function(){this._released=!1,this.event("recovered",this)},G$r.dispose=function(){this.destroy()},G$D(0,G$r,"memorySize",function(){return this._memorySize},function(G$q){var G$r=G$q-this._memorySize;this._memorySize=G$q,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,G$r),this.resourceManager&&this.resourceManager.addSize(G$r)}),G$D(0,G$r,"_loaded",null,function(G$q){this.__loaded=G$q}),G$D(0,G$r,"loaded",function(){return this.__loaded}),G$D(0,G$r,"id",function(){return this._$1__id}),G$D(0,G$r,"destroyed",function(){return this._destroyed}),G$D(0,G$r,"group",function(){return this._getGroup()},function(G$q){this._setGroup(G$q)}),G$D(0,G$r,"resourceManager",function(){return this._resourceManager}),G$D(0,G$r,"url",function(){return this._url}),G$D(0,G$r,"released",function(){return this._released}),G$D(0,G$r,"referenceCount",function(){return this._referenceCount}),G$W.getResourceByID=function(G$q){return G$W._idResourcesMap[G$q]},G$W.getResourceByURL=function(G$q,G$r){return void 0===G$r&&(G$r=0),null==G$W._urlResourcesMap[G$q]?null:G$W._urlResourcesMap[G$q][G$r]},G$W.getResourceCountByURL=function(G$q){return G$W._urlResourcesMap[G$q].length},G$W.destroyUnusedResources=function(G$q){var G$r;if(G$q){var G$v=G$W._groupResourcesMap[G$q];if(G$v)for(var G$H=G$v.slice(),G$A=0,G$y=G$H.length;G$A<G$y;G$A++)(G$r=G$H[G$A]).lock||0!==G$r._referenceCount||G$r.destroy()}else for(var G$R in G$W._idResourcesMap)(G$r=G$W._idResourcesMap[G$R]).lock||0!==G$r._referenceCount||G$r.destroy()},G$W._uniqueIDCounter=0,G$W._idResourcesMap={},G$W._urlResourcesMap={},G$W._groupResourcesMap={},G$W}()),G$xq=function(G$q){function G$J(G$q,G$r){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,G$J.__super.call(this),G$q&&null!=G$q._addReference&&G$q._addReference(),this.setTo(G$q,G$r)}G$x(G$J,"laya.resource.Texture",G$N);var G$r=G$J.prototype;return G$r._setUrl=function(G$q){this.url=G$q},G$r.setTo=function(G$q,G$r){if(G$q instanceof G$R.HTMLElement){var G$v=G$eq.create("2D",G$q);this.bitmap=G$v}else this.bitmap=G$q;if(this.uv=G$r||G$J.DEF_UV,G$q){this._w=G$q.width,this._h=G$q.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var G$H=this;if(this._loaded)G$E.addToAtlas&&G$E.addToAtlas(G$H);else{var G$A=G$q;G$A instanceof laya.resource.HTMLImage&&G$A.image&&G$A.image.addEventListener("load",function(G$q){G$E.addToAtlas&&G$E.addToAtlas(G$H)},!1)}}},G$r.active=function(){this.bitmap&&this.bitmap.activeResource()},G$r.destroy=function(G$q){if(void 0===G$q&&(G$q=!1),this.alphaTexture&&(this.alphaTexture.destroy(G$q),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var G$r=this.bitmap;G$q?(G$Y.isConchApp&&G$r.source&&G$r.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,G$r.dispose(),G$r._clearReference()):(G$r._removeReference(),0==G$r.referenceCount&&(G$Y.isConchApp&&G$r.source&&G$r.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,G$r.dispose())),this.url&&this===G$P.loader.getRes(this.url)&&G$P.loader.clearRes(this.url,G$q),this._loaded=!1}},G$r.load=function(G$q){var G$r=this;this._loaded=!1,G$q=G$Z.customFormat(G$q);var G$v=this.bitmap||(this.bitmap=G$zq.create(G$q));G$v.uri=G$q,G$v&&G$v._addReference();var G$H=this;G$v.onload=function(){G$v.onload=null,G$H._loaded=!0,G$r.sourceWidth=G$r._w=G$v.width,G$r.sourceHeight=G$r._h=G$v.height,G$H.event("loaded",this),G$E.addToAtlas&&G$E.addToAtlas(G$H)}},G$r.addTextureToAtlas=function(G$q){G$E.addTextureToAtlas(this)},G$r.getPixels=function(G$q,G$r,G$v,G$H){if(G$Y.isConchApp){var G$A=this.bitmap;if(G$A.source&&G$A.source.getImageData){var G$y=G$A.source.getImageData(G$q,G$r,G$v,G$H),G$R=new Uint8Array(G$y);return Array.from(G$R)}return null}return G$Y.isWebGL?G$E.getTexturePixels(this,G$q,G$r,G$v,G$H):(G$d.canvas.size(G$v,G$H),G$d.canvas.clear(),G$d.context.drawTexture(this,-G$q,-G$r,this.width,this.height,0,0),G$d.context.getImageData(0,0,G$v,G$H).data)},G$r.onAsynLoaded=function(G$q,G$r){if(G$r){if("function"!=typeof G$r._addReference)throw new Error("bitmap._addReference is not a function. "+G$r.className+" "+typeof G$r._addReference+" "+G$r.constructor);G$r._addReference()}this.setTo(G$r,this.uv),this._loaded&&this.event("loaded",this)},G$D(0,G$r,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),G$D(0,G$r,"loaded",function(){return this._loaded}),G$D(0,G$r,"released",function(){return!this.bitmap||this.bitmap.released}),G$D(0,G$r,"width",function(){return this._w?this._w:this.uv&&this.uv!==G$J.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(G$q){this._w=G$q,this.sourceWidth||(this.sourceWidth=G$q)}),G$D(0,G$r,"repeat",function(){return!G$Y.isWebGL||!this.bitmap||this.bitmap.repeat},function(G$q){G$q&&G$Y.isWebGL&&this.bitmap&&(this.bitmap.repeat=G$q)&&(this.bitmap.enableMerageInAtlas=!1)}),G$D(0,G$r,"height",function(){return this._h?this._h:this.uv&&this.uv!==G$J.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(G$q){this._h=G$q,this.sourceHeight||(this.sourceHeight=G$q)}),G$D(0,G$r,"isLinearSampling",function(){return!G$Y.isWebGL||9728!=this.bitmap.minFifter},function(G$q){!G$q&&G$Y.isWebGL&&(G$q||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),G$J.moveUV=function(G$q,G$r,G$v){for(var G$H=0;G$H<8;G$H+=2)G$v[G$H]+=G$q,G$v[G$H+1]+=G$r;return G$v},G$J.create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){void 0===G$y&&(G$y=0),void 0===G$R&&(G$R=0),void 0===G$W&&(G$W=0),void 0===G$O&&(G$O=0);var G$N=G$q instanceof laya.resource.Texture,G$x=G$N?G$q.uv:G$J.DEF_UV,G$K=G$N?G$q.bitmap:G$q,G$T=G$E.isAtlas(G$K);if(G$T){var G$j=G$K._atlaser,G$D=G$q._atlasID;if(-1==G$D)throw new Error("create texture error");G$K=G$j._inAtlasTextureBitmapValue[G$D],G$x=G$j._inAtlasTextureOriUVValue[G$D]}var G$g=new G$J(G$K,null);G$K.width&&G$r+G$H>G$K.width&&(G$H=G$K.width-G$r),G$K.height&&G$v+G$A>G$K.height&&(G$A=G$K.height-G$v),G$g.width=G$H,G$g.height=G$A,G$g.offsetX=G$y,G$g.offsetY=G$R,G$g.sourceWidth=G$W||G$H,G$g.sourceHeight=G$O||G$A;var G$X=1/G$K.width,G$m=1/G$K.height;G$r*=G$X,G$v*=G$m,G$H*=G$X,G$A*=G$m;var G$B=G$g.uv[0],G$e=G$g.uv[1],G$p=G$g.uv[4],G$M=G$g.uv[5],G$z=G$p-G$B,G$P=G$M-G$e,G$V=G$J.moveUV(G$x[0],G$x[1],[G$r,G$v,G$r+G$H,G$v,G$r+G$H,G$v+G$A,G$r,G$v+G$A]);G$g.uv=[G$B+G$V[0]*G$z,G$e+G$V[1]*G$P,G$p-(1-G$V[2])*G$z,G$e+G$V[3]*G$P,G$p-(1-G$V[4])*G$z,G$M-(1-G$V[5])*G$P,G$B+G$V[6]*G$z,G$M-(1-G$V[7])*G$P],G$T&&G$g.addTextureToAtlas();var G$a=G$K.scaleRate;return G$a&&1!=G$a?(G$g.sourceWidth/=G$a,G$g.sourceHeight/=G$a,G$g.width/=G$a,G$g.height/=G$a,G$g.scaleRate=G$a,G$g.offsetX/=G$a,G$g.offsetY/=G$a):G$g.scaleRate=1,G$g},G$J.createFromTexture=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$q.scaleRate;1!=G$y&&(G$r*=G$y,G$v*=G$y,G$H*=G$y,G$A*=G$y);var G$R=G$a.TEMP.setTo(G$r-G$q.offsetX,G$v-G$q.offsetY,G$H,G$A),G$W=G$R.intersection(G$J._rect1.setTo(0,0,G$q.width,G$q.height),G$J._rect2);if(!G$W)return null;var G$O=G$J.create(G$q,G$W.x,G$W.y,G$W.width,G$W.height,G$W.x-G$R.x,G$W.y-G$R.y,G$H,G$A);if(G$O.bitmap&&G$O.bitmap._removeReference)return G$O.bitmap._removeReference(),G$O;var G$N="bitmap:"+(G$O.bitmap?G$O.bitmap.constructor?G$O.bitmap.constructor.name:G$O.bitmap.__className:"")+", url:"+(G$q.url+" | "+(G$O.bitmap?G$O.bitmap.url:G$q.url))+", x="+G$r+",y="+G$v+",width="+G$H+",height="+G$A+", result="+(G$W?G$W.x+","+G$W.y+","+G$W.width+","+G$W.height:"null")+", rect="+G$R.x+","+G$R.y+","+G$R.width+","+G$R.height;throw new Error("报错：bitmap._removeReference is not a function  "+G$N)},G$J.DEF_UV=[0,0,1,0,1,1,0,1],G$J.INV_UV=[0,1,1,1,1,0,0,0],G$J._rect1=new G$a,G$J._rect2=new G$a,G$J}(),G$q=function(G$q){var G$W;function G$y(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,G$y.__super.call(this)}G$x(G$y,"laya.utils.TimeLine",G$N);var G$r=G$y.prototype;return G$r.to=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$A&&(G$A=0),this._create(G$q,G$r,G$v,G$H,G$A,!0)},G$r.from=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$A&&(G$A=0),this._create(G$q,G$r,G$v,G$H,G$A,!1)},G$r._create=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$S.getItemByClass("tweenData",G$W);return G$R.isTo=G$y,G$R.type=0,G$R.target=G$q,G$R.duration=G$v,G$R.data=G$r,G$R.startTime=this._startTime+G$A,G$R.endTime=G$R.startTime+G$R.duration,G$R.ease=G$H,this._startTime=Math.max(G$R.endTime,this._startTime),this._tweenDataList.push(G$R),this._startTimeSort=!0,this._endTimeSort=!0,this},G$r.addLabel=function(G$q,G$r){var G$v=G$S.getItemByClass("tweenData",G$W);return G$v.type=1,G$v.data=G$q,G$v.endTime=G$v.startTime=this._startTime+G$r,this._labelDic||(this._labelDic={}),this._labelDic[G$q]=G$v,this._tweenDataList.push(G$v),this},G$r.removeLabel=function(G$q){if(this._labelDic&&this._labelDic[G$q]){var G$r=this._labelDic[G$q];if(G$r){var G$v=this._tweenDataList.indexOf(G$r);-1<G$v&&this._tweenDataList.splice(G$v,1)}delete this._labelDic[G$q]}},G$r.gotoTime=function(G$q){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var G$r,G$v,G$H,G$A;for(var G$y in this._firstTweenDic)if(G$v=this._firstTweenDic[G$y])for(var G$R in G$v)G$v.diyTarget.hasOwnProperty(G$R)&&(G$v.diyTarget[G$R]=G$v[G$R]);for(G$y in this._tweenDic)(G$r=this._tweenDic[G$y]).clear(),delete this._tweenDic[G$y];if(this._index=0,this._gidIndex=0,this._currTime=G$q,this._lastTime=G$d.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=G$H=this._tweenDataList.concat(),G$H.sort(function(G$q,G$r){return G$q.endTime>G$r.endTime?1:G$q.endTime<G$r.endTime?-1:0})}else G$H=this._endTweenDataList;for(var G$W=0,G$O=G$H.length;G$W<G$O;G$W++)if(0==(G$A=G$H[G$W]).type){if(!(G$q>=G$A.endTime))break;this._index=Math.max(this._index,G$W+1);var G$N=G$A.data;if(G$A.isTo)for(var G$x in G$N)G$A.target[G$x]=G$N[G$x]}for(G$W=0,G$O=this._tweenDataList.length;G$W<G$O;G$W++)0==(G$A=this._tweenDataList[G$W]).type&&G$q>=G$A.startTime&&G$q<G$A.endTime&&(this._index=Math.max(this._index,G$W+1),this._gidIndex++,(G$r=G$S.getItemByClass("tween",G$i))._create(G$A.target,G$A.data,G$A.duration,G$A.ease,G$B.create(this,this._animComplete,[this._gidIndex]),0,!1,G$A.isTo,!0,!1),G$r.setStartTime(this._currTime-(G$q-G$A.startTime)),G$r._updateEase(this._currTime),G$r.gid=this._gidIndex,this._tweenDic[this._gidIndex]=G$r)}},G$r.gotoLabel=function(G$q){if(null!=this._labelDic){var G$r=this._labelDic[G$q];G$r&&this.gotoTime(G$r.startTime)}},G$r.pause=function(){G$P.timer.clear(this,this._update)},G$r.resume=function(){this.play(this._currTime,this._loopKey)},G$r.play=function(G$q,G$r){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(G$q,G$r){return G$q.startTime>G$r.startTime?1:G$q.startTime<G$r.startTime?-1:0});for(var G$v=0,G$H=this._tweenDataList.length;G$v<G$H;G$v++){var G$A=this._tweenDataList[G$v];if(null!=G$A&&0==G$A.type){var G$y=G$A.target,G$R=G$y.$_GID||(G$y.$_GID=G$w.getGID()),G$W=null;for(var G$O in null==this._firstTweenDic[G$R]?((G$W={}).diyTarget=G$y,this._firstTweenDic[G$R]=G$W):G$W=this._firstTweenDic[G$R],G$A.data)null==G$W[G$O]&&(G$W[G$O]=G$y[G$O])}}}"string"==typeof G$q?this.gotoLabel(G$q):this.gotoTime(G$q),this._loopKey=G$r,this._lastTime=G$d.now(),G$P.timer.frameLoop(1,this,this._update)}},G$r._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var G$q in this._tweenDic)(G$r=this._tweenDic[G$q]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var G$r,G$v=G$d.now(),G$H=G$v-this._lastTime,G$A=this._currTime+=G$H*this.scale;for(G$q in this._lastTime=G$v,this._tweenDic)(G$r=this._tweenDic[G$q])._updateEase(G$A);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var G$y=this._tweenDataList[this._index];G$A>=G$y.startTime&&(this._index++,0==G$y.type?(this._gidIndex++,(G$r=G$S.getItemByClass("tween",G$i))._create(G$y.target,G$y.data,G$y.duration,G$y.ease,G$B.create(this,this._animComplete,[this._gidIndex]),0,!1,G$y.isTo,!0,!1),G$r.setStartTime(G$A),G$r.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=G$r)._updateEase(G$A)):this.event("label",G$y.data))}},G$r._animComplete=function(G$q){this._tweenDic[G$q]&&delete this._tweenDic[G$q]},G$r._complete=function(){this.event("complete")},G$r.reset=function(){var G$q;if(this._labelDic)for(G$q in this._labelDic)delete this._labelDic[G$q];for(G$q in this._tweenDic)this._tweenDic[G$q].clear(),delete this._tweenDic[G$q];for(G$q in this._firstTweenDic)delete this._firstTweenDic[G$q];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var G$r,G$v=0;for(G$r=this._tweenDataList.length,G$v=0;G$v<G$r;G$v++)this._tweenDataList[G$v]&&this._tweenDataList[G$v].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,G$P.timer.clear(this,this._update)},G$r.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},G$D(0,G$r,"index",function(){return this._frameIndex},function(G$q){this._frameIndex=G$q,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),G$D(0,G$r,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),G$y.to=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$A&&(G$A=0),(new G$y).to(G$q,G$r,G$v,G$H,G$A)},G$y.from=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$A&&(G$A=0),(new G$y).from(G$q,G$r,G$v,G$H,G$A)},G$y.__init$=function(){G$W=function(){function G$q(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return G$x(G$q,""),G$q.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,G$S.recover("tweenData",this)},G$q}()},G$y}(),G$Kq=function(G$A){function G$v(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,G$v.__super.call(this),this._style=G$W.EMPTY}G$x(G$v,"laya.display.Sprite",G$A);var G$q=G$v.prototype;return G$P.imps(G$q,{"laya.display.ILayout":!0}),G$q.createConchModel=function(){return new ConchNode},G$q.destroy=function(G$q){if(void 0===G$q&&(G$q=!0),this._releaseMem(),!this._destroyed){this.filters=null;var G$r=this.mask;G$r&&(this.mask=null,G$r.destroy(G$q))}G$A.prototype.destroy.call(this,G$q),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},G$q.updateZOrder=function(){G$w.updateOrder(this._childs)&&this.repaint()},G$q.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},G$q.setBounds=function(G$q){this._set$P("uBounds",G$q)},G$q.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new G$a),G$a._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},G$q.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new G$a),G$a._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},G$q._boundPointsToParent=function(G$q){void 0===G$q&&(G$q=!1);var G$r=0,G$v=0;this._style&&(G$r=this._style._tf.translateX,G$v=this._style._tf.translateY,G$q=G$q||0!==this._style._tf.rotate,this._style.scrollRect&&(G$r+=this._style.scrollRect.x,G$v+=this._style.scrollRect.y));var G$H=this._getBoundPointsM(G$q);if(!G$H||G$H.length<1)return G$H;if(8!=G$H.length&&(G$H=G$q?G$M.scanPList(G$H):G$a._getWrapRec(G$H,G$a.TEMP)._getBoundPoints()),!this.transform)return G$w.transPointList(G$H,this._x-G$r,this._y-G$v),G$H;var G$A=G$V.TEMP,G$y=0,G$R=G$H.length;for(G$y=0;G$y<G$R;G$y+=2)G$A.x=G$H[G$y],G$A.y=G$H[G$y+1],this.toParentPoint(G$A),G$H[G$y]=G$A.x,G$H[G$y+1]=G$A.y;return G$H},G$q.getGraphicBounds=function(G$q){return void 0===G$q&&(G$q=!1),this._graphics?this._graphics.getBounds(G$q):G$a.TEMP.setTo(0,0,0,0)},G$q._getBoundPointsM=function(G$q){if(void 0===G$q&&(G$q=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var G$r=G$w.clearArray(this._$P.temBM),G$v=G$a.TEMP;return G$v.copyFrom(this.scrollRect),G$w.concatArray(G$r,G$v._getBoundPoints()),G$r}for(var G$H,G$A,G$y,G$R=this._graphics?this._graphics.getBoundPoints():G$w.clearArray(this._$P.temBM),G$W=0,G$O=(G$y=this._childs).length;G$W<G$O;G$W++)(G$H=G$y[G$W])instanceof laya.display.Sprite&&1==G$H.visible&&(G$A=G$H._boundPointsToParent(G$q))&&(G$R=G$R?G$w.concatArray(G$R,G$A):G$A);return G$R},G$q.getStyle=function(){return this._style===G$W.EMPTY&&(this._style=new G$W),this._style},G$q.setStyle=function(G$q){this._style=G$q},G$q._adjustTransform=function(){this._tfChanged=!1;var G$q,G$r=this._style._tf,G$v=G$r.scaleX,G$H=G$r.scaleY;if(G$r.rotate||1!==G$v||1!==G$H||G$r.skewX||G$r.skewY){(G$q=this._transform||(this._transform=G$Q.create())).bTransform=!0;var G$A=.0174532922222222*(G$r.rotate-G$r.skewX),G$y=.0174532922222222*(G$r.rotate+G$r.skewY),G$R=Math.cos(G$y),G$W=Math.sin(G$y),G$O=Math.sin(G$A),G$N=Math.cos(G$A);return G$q.a=G$v*G$R,G$q.b=G$v*G$W,G$q.c=-G$H*G$O,G$q.d=G$H*G$N,G$q.tx=G$q.ty=0,G$q}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,G$q},G$q.pos=function(G$q,G$r,G$v){if(void 0===G$v&&(G$v=!1),this._x!==G$q||this._y!==G$r){if(this.destroyed)return this;if(G$v){this._x=G$q,this._y=G$r,this.conchModel&&this.conchModel.pos(this._x,this._y);var G$H=this._parent;G$H&&0===G$H._repaint&&(G$H._repaint=1,G$H.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=G$q,this.y=G$r}return this},G$q.pivot=function(G$q,G$r){return this.pivotX=G$q,this.pivotY=G$r,this},G$q.size=function(G$q,G$r){return this.width=G$q,this.height=G$r,this},G$q.scale=function(G$q,G$r,G$v){void 0===G$v&&(G$v=!1);var G$H=this.getStyle(),G$A=G$H._tf;if(G$A.scaleX!=G$q||G$A.scaleY!=G$r){if(this.destroyed)return this;if(G$v){G$H.setScale(G$q,G$r),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(G$q,G$r),this._renderType|=4;var G$y=this._parent;G$y&&0===G$y._repaint&&(G$y._repaint=1,G$y.parentRepaint())}else this.scaleX=G$q,this.scaleY=G$r}return this},G$q.skew=function(G$q,G$r){return this.skewX=G$q,this.skewY=G$r,this},G$q.render=function(G$q,G$r,G$v){G$l.spriteCount++,G$C.renders[this._renderType]._fun(this,G$q,G$r+this._x,G$v+this._y),this._repaint=0},G$q.drawToCanvas=function(G$q,G$r,G$v,G$H){if(G$Y.isConchNode){var G$A=G$eq.create("2D");return new G$o(G$q,G$r,G$A).ctx.setCanvasType(1),this.conchModel.drawToCanvas(G$A.source,G$v,G$H),G$A}return G$E.drawToCanvas(this,this._renderType,G$q,G$r,G$v,G$H)},G$q.customRender=function(G$q,G$r,G$v){this._renderType|=1024},G$q._applyFilters=function(){var G$q;if(!G$Y.isWebGL&&((G$q=this._$P.filters)&&!(G$q.length<1)))for(var G$r=0,G$v=G$q.length;G$r<G$v;G$r++)G$q[G$r].action.apply(this._$P.cacheCanvas)},G$q._isHaveGlowFilter=function(){var G$q,G$r=0;if(this.filters)for(G$r=0;G$r<this.filters.length;G$r++)if(8==this.filters[G$r].type)return!0;for(G$r=0,G$q=this._childs.length;G$r<G$q;G$r++)if(this._childs[G$r]._isHaveGlowFilter())return!0;return!1},G$q.localToGlobal=function(G$q,G$r){void 0===G$r&&(G$r=!1),!0===G$r&&(G$q=new G$V(G$q.x,G$q.y));for(var G$v=this;G$v&&G$v!=G$P.stage;)G$q=G$v.toParentPoint(G$q),G$v=G$v.parent;return G$q},G$q.globalToLocal=function(G$q,G$r){void 0===G$r&&(G$r=!1),G$r&&(G$q=new G$V(G$q.x,G$q.y));for(var G$v=this,G$H=[];G$v&&G$v!=G$P.stage;)G$H.push(G$v),G$v=G$v.parent;for(var G$A=G$H.length-1;0<=G$A;)G$q=(G$v=G$H[G$A]).fromParentPoint(G$q),G$A--;return G$q},G$q.toParentPoint=function(G$q){if(!G$q)return G$q;G$q.x-=this.pivotX,G$q.y-=this.pivotY,this.transform&&this._transform.transformPoint(G$q),G$q.x+=this._x,G$q.y+=this._y;var G$r=this._style.scrollRect;return G$r&&(G$q.x-=G$r.x,G$q.y-=G$r.y),G$q},G$q.fromParentPoint=function(G$q){if(!G$q)return G$q;G$q.x-=this._x,G$q.y-=this._y;var G$r=this._style.scrollRect;return G$r&&(G$q.x+=G$r.x,G$q.y+=G$r.y),this.transform&&this._transform.invertTransformPoint(G$q),G$q.x+=this.pivotX,G$q.y+=this.pivotY,G$q},G$q.on=function(G$q,G$r,G$v,G$H){return 1!==this._mouseEnableState&&this.isMouseEvent(G$q)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(G$q,G$r,G$v,G$H,!1)):G$A.prototype.on.call(this,G$q,G$r,G$v,G$H)},G$q.once=function(G$q,G$r,G$v,G$H){return 1!==this._mouseEnableState&&this.isMouseEvent(G$q)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(G$q,G$r,G$v,G$H,!0)):G$A.prototype.once.call(this,G$q,G$r,G$v,G$H)},G$q._$2__onDisplay=function(){if(1!==this._mouseEnableState){var G$q=this;for(G$q=G$q.parent;G$q&&1!==G$q._mouseEnableState&&!G$q._getBit(2);)G$q.mouseEnabled=!0,G$q._setBit(2,!0),G$q=G$q.parent}},G$q.loadImage=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=this;return void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),this.graphics.loadImage(G$q,G$r,G$v,G$H,G$A,function(G$q){G$R.destroyed||(G$R.size(G$r+(G$H||G$q.width),G$v+(G$A||G$q.height)),G$R.repaint(),G$y&&G$y.runWith(G$q))}),this},G$q.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},G$q._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},G$q._childChanged=function(G$q){this._childs.length?this._renderType|=2048:this._renderType&=-2049,G$q&&this._get$P("hasZorder")&&G$P.timer.callLater(this,this.updateZOrder),this.repaint()},G$q.parentRepaint=function(){var G$q=this._parent;G$q&&0===G$q._repaint&&(G$q._repaint=1,G$q.parentRepaint())},G$q.startDrag=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){void 0===G$r&&(G$r=!1),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=300),void 0===G$y&&(G$y=!1),void 0===G$R&&(G$R=.92),this._$P.dragging||this._set$P("dragging",new G$U),this._$P.dragging.start(this,G$q,G$r,G$v,G$H,G$A,G$y,G$R)},G$q.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},G$q._releaseMem=function(){if(this._$P){var G$q=this._$P.cacheCanvas;G$q&&G$q.ctx&&(G$S.recover("RenderContext",G$q.ctx),G$q.ctx.canvas.size(0,0),G$q.ctx=null);var G$r=this._$P._filterCache;G$r&&(G$r.destroy(),G$r.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},G$q._setDisplay=function(G$q){G$q||this._releaseMem(),G$A.prototype._setDisplay.call(this,G$q)},G$q.hitTestPoint=function(G$q,G$r){var G$v=this.globalToLocal(G$V.TEMP.setTo(G$q,G$r));return G$q=G$v.x,G$r=G$v.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?G$a.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(G$q,G$r)},G$q.getMousePoint=function(){return this.globalToLocal(G$V.TEMP.setTo(G$P.stage.mouseX,G$P.stage.mouseY))},G$q._getWords=function(){return null},G$q._addChildsToLayout=function(G$q){var G$r=this._getWords();if(null==G$r&&0==this._childs.length)return!1;if(G$r)for(var G$v=0,G$H=G$r.length;G$v<G$H;G$v++)G$q.push(G$r[G$v]);G$v=0;for(var G$A=this._childs.length;G$v<G$A;++G$v){var G$y=this._childs[G$v];G$y._style._enableLayout()&&G$y._addToLayout(G$q)}return!0},G$q._addToLayout=function(G$q){this._style.absolute||(this._style.block?G$q.push(this):this._addChildsToLayout(G$q)&&(this.x=this.y=0))},G$q._isChar=function(){return!1},G$q._getCSSStyle=function(){return this._style.getCSSStyle()},G$q._setAttributes=function(G$q,G$r){switch(G$q){case"x":this.x=parseFloat(G$r);break;case"y":this.y=parseFloat(G$r);break;case"width":this.width=parseFloat(G$r);break;case"height":this.height=parseFloat(G$r);break;default:this[G$q]=G$r}},G$q._layoutLater=function(){this.parent&&this.parent._layoutLater()},G$D(0,G$q,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(G$q){this._optimizeScrollRect!=G$q&&(this._optimizeScrollRect=G$q,this.conchModel&&this.conchModel.optimizeScrollRect(G$q))}),G$D(0,G$q,"customRenderEnable",null,function(G$q){if(G$q&&(this._renderType|=1024,G$Y.isConchNode)){G$v.CustomList.push(this);var G$r=new G$eq("2d");G$r._setContext(new CanvasRenderingContext2D),this.customContext=new G$o(0,0,G$r),G$r.context.setCanvasType&&G$r.context.setCanvasType(2),this.conchModel.custom(G$r.context)}}),G$D(0,G$q,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(G$q){this.cacheAs=G$q?this._$P.hasFilter?"none":"normal":"none"}),G$D(0,G$q,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(G$q){var G$r=this._$P.cacheCanvas;if(G$q!==(G$r?G$r.type:"none")){if("none"!==G$q)this._getBit(1)||this._setUpNoticeType(1),G$r||(G$r=this._set$P("cacheCanvas",G$S.getItemByClass("cacheCanvas",Object))),G$r.type=G$q,G$r.reCache=!0,this._renderType|=16,"bitmap"==G$q&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(G$r){var G$v=G$r;G$v&&G$v.ctx&&(G$S.recover("RenderContext",G$v.ctx),G$v.ctx.canvas.size(0,0),G$v.ctx=null),G$S.recover("cacheCanvas",G$r)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),G$D(0,G$q,"zOrder",function(){return this._zOrder},function(G$q){this._zOrder!=G$q&&(this._zOrder=G$q,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(G$q),this._parent&&(G$q&&this._parent._set$P("hasZorder",!0),G$P.timer.callLater(this._parent,this.updateZOrder)))}),G$D(0,G$q,"rotation",function(){return this._style._tf.rotate},function(G$q){var G$r=this.getStyle();if(G$r._tf.rotate!==G$q){G$r.setRotate(G$q),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(G$q),this._renderType|=4;var G$v=this._parent;G$v&&0===G$v._repaint&&(G$v._repaint=1,G$v.parentRepaint())}}),G$D(0,G$q,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(G$q){this._width!==G$q&&(this._width=G$q,this.conchModel&&this.conchModel.size(G$q,this._height),this.repaint())}),G$D(0,G$q,"x",function(){return this._x},function(G$q){if(this._x!==G$q){if(this.destroyed)return;this._x=G$q,this.conchModel&&this.conchModel.pos(G$q,this._y);var G$r=this._parent;G$r&&0===G$r._repaint&&(G$r._repaint=1,G$r.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),G$D(0,G$q,"globalScaleY",function(){for(var G$q=1,G$r=this;G$r&&G$r!==G$P.stage;)G$q*=G$r.scaleY,G$r=G$r.parent;return G$q}),G$D(0,G$q,"hitArea",function(){return this._$P.hitArea},function(G$q){this._set$P("hitArea",G$q)}),G$D(0,G$q,"staticCache",function(){return this._$P.staticCache},function(G$q){this._set$P("staticCache",G$q),G$q||this.reCache()}),G$D(0,G$q,"texture",function(){return this._texture},function(G$q){this._texture!=G$q&&(this._texture=G$q,this.graphics.cleanByTexture(G$q,0,0))}),G$D(0,G$q,"y",function(){return this._y},function(G$q){if(this._y!==G$q){if(this.destroyed)return;this._y=G$q,this.conchModel&&this.conchModel.pos(this._x,G$q);var G$r=this._parent;G$r&&0===G$r._repaint&&(G$r._repaint=1,G$r.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),G$D(0,G$q,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(G$q){this._height!==G$q&&(this._height=G$q,this.conchModel&&this.conchModel.size(this._width,G$q),this.repaint())}),G$D(0,G$q,"blendMode",function(){return this._style.blendMode},function(G$q){this.getStyle().blendMode=G$q,this.conchModel&&this.conchModel.blendMode(G$q),G$q&&"source-over"!=G$q?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),G$D(0,G$q,"scaleX",function(){return this._style._tf.scaleX},function(G$q){var G$r=this.getStyle();if(G$r._tf.scaleX!==G$q){G$r.setScaleX(G$q),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(G$q,G$r._tf.scaleY),this._renderType|=4;var G$v=this._parent;G$v&&0===G$v._repaint&&(G$v._repaint=1,G$v.parentRepaint())}}),G$D(0,G$q,"scaleY",function(){return this._style._tf.scaleY},function(G$q){var G$r=this.getStyle();if(G$r._tf.scaleY!==G$q){G$r.setScaleY(G$q),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(G$r._tf.scaleX,G$q),this._renderType|=4;var G$v=this._parent;G$v&&0===G$v._repaint&&(G$v._repaint=1,G$v.parentRepaint())}}),G$D(0,G$q,"stage",function(){return G$P.stage}),G$D(0,G$q,"skewX",function(){return this._style._tf.skewX},function(G$q){var G$r=this.getStyle();if(G$r._tf.skewX!==G$q){G$r.setSkewX(G$q),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(G$q,G$r._tf.skewY),this._renderType|=4;var G$v=this._parent;G$v&&0===G$v._repaint&&(G$v._repaint=1,G$v.parentRepaint())}}),G$D(0,G$q,"scrollRect",function(){return this._style.scrollRect},function(G$q){this.getStyle().scrollRect=G$q,this.repaint(),G$q?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(G$q.x,G$q.y,G$q.width,G$q.height)):(this._renderType&=-129,this.conchModel&&(G$v.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),G$D(0,G$q,"skewY",function(){return this._style._tf.skewY},function(G$q){var G$r=this.getStyle();if(G$r._tf.skewY!==G$q){G$r.setSkewY(G$q),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(G$r._tf.skewX,G$q),this._renderType|=4;var G$v=this._parent;G$v&&0===G$v._repaint&&(G$v._repaint=1,G$v.parentRepaint())}}),G$D(0,G$q,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(G$q){this._tfChanged=!1,(this._transform=G$q)&&(this._x=G$q.tx,this._y=G$q.ty,G$q.tx=G$q.ty=0,this.conchModel&&this.conchModel.transform(G$q.a,G$q.b,G$q.c,G$q.d,this._x,this._y)),G$q?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),G$D(0,G$q,"pivotX",function(){return this._style._tf.translateX},function(G$q){this.getStyle().setTranslateX(G$q),this.conchModel&&this.conchModel.pivot(G$q,this._style._tf.translateY),this.repaint()}),G$D(0,G$q,"pivotY",function(){return this._style._tf.translateY},function(G$q){this.getStyle().setTranslateY(G$q),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,G$q),this.repaint()}),G$D(0,G$q,"alpha",function(){return this._style.alpha},function(G$q){this._style&&this._style.alpha!==G$q&&(G$q=G$q<0?0:1<G$q?1:G$q,this.getStyle().alpha=G$q,this.conchModel&&this.conchModel.alpha(G$q),1!==G$q?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),G$D(0,G$q,"visible",function(){return this._style.visible},function(G$q){this._style&&this._style.visible!==G$q&&(this.getStyle().visible=G$q,this.conchModel&&this.conchModel.visible(G$q),this.parentRepaint())}),G$D(0,G$q,"graphics",function(){return this._graphics||(this.graphics=G$E.createGraphics())},function(G$q){this._graphics&&(this._graphics._sp=null),(this._graphics=G$q)?(this._renderType&=-2,this._renderType|=512,(G$q._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(G$v.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),G$D(0,G$q,"filters",function(){return this._$P.filters},function(G$q){G$q&&0===G$q.length&&(G$q=null),this._$P.filters!=G$q&&(this._set$P("filters",G$q?G$q.slice():null),G$Y.isConchApp&&(this.conchModel&&(G$v.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),G$Y.isWebGL&&(G$q&&G$q.length?this._renderType|=32:this._renderType&=-33),G$q&&0<G$q.length?(this._getBit(1)||this._setUpNoticeType(1),G$Y.isWebGL&&1==G$q.length&&G$q[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(G$Y.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),G$D(0,G$q,"parent",G$A.prototype._$get_parent,function(G$q){G$P.superSet(G$qq,this,"parent",G$q),G$q&&this._getBit(2)&&this._$2__onDisplay()}),G$D(0,G$q,"mask",function(){return this._$P._mask},function(G$q){G$q&&this.mask&&this.mask._$P.maskParent||(G$q?(this.cacheAs="bitmap",this._set$P("_mask",G$q),G$q._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",G$q),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(G$q?G$q.conchModel:null),this._renderType|=64,this.parentRepaint())}),G$D(0,G$q,"mouseEnabled",function(){return 1<this._mouseEnableState},function(G$q){this._mouseEnableState=G$q?2:1}),G$D(0,G$q,"globalScaleX",function(){for(var G$q=1,G$r=this;G$r&&G$r!==G$P.stage;)G$q*=G$r.scaleX,G$r=G$r.parent;return G$q}),G$D(0,G$q,"mouseX",function(){return this.getMousePoint().x}),G$D(0,G$q,"mouseY",function(){return this.getMousePoint().y}),G$v.fromImage=function(G$q){return(new G$v).loadImage(G$q)},G$v._cachePool=[],G$v.CustomList=[],G$O(G$v,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=G$R.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),G$v}(G$qq),G$Tq=function(G$q){function G$r(G$q){this._audio=null,this._onEnd=null,this._resumePlay=null,G$r.__super.call(this),this._onEnd=G$w.bind(this.__onEnd,this),this._resumePlay=G$w.bind(this.__resumePlay,this),G$q.addEventListener("ended",this._onEnd),this._audio=G$q}G$x(G$r,"laya.media.h5audio.AudioSoundChannel",G$Hq);var G$v=G$r.prototype;return G$v.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(G$P.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},G$v.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,G$d.container.appendChild(this._audio),this._audio.play()}catch(G$q){this.event("error")}},G$v.play=function(G$q){this.isStopped=!1;try{this._audio.playbackRate=G$G.playbackRate,this._audio.currentTime=this.startTime}catch(G$q){return void this._audio.addEventListener("canplay",this._resumePlay)}G$G.addChannel(this),G$d.container.appendChild(this._audio),!G$q&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},G$v.stop=function(){this.isStopped=!0,G$G.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&G$Y.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),G$d.onIE||this._audio!=G$vq._musicAudio&&G$S.recover("audio:"+this.url,this._audio),G$d.removeElement(this._audio),this._audio=null)},G$v.pause=function(){this.isStopped=!0,G$G.removeChannel(this),"pause"in this._audio&&this._audio.pause()},G$v.resume=function(){this._audio&&(this.isStopped=!1,G$G.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},G$D(0,G$v,"position",function(){return this._audio?this._audio.currentTime:0}),G$D(0,G$v,"duration",function(){return this._audio?this._audio.duration:0}),G$D(0,G$v,"volume",function(){return this._audio?this._audio.volume:1},function(G$q){this._audio&&(this._audio.volume=G$q)}),G$r}(),G$jq=function(G$q){function G$r(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=G$yq.ctx,G$r.__super.call(this),this._onPlayEnd=G$w.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}G$x(G$r,"laya.media.webaudio.WebAudioSoundChannel",G$Hq);var G$v=G$r.prototype;return G$v.play=function(G$q){if(G$G.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var G$r=this.context,G$v=this.gain,G$H=G$r.createBufferSource();(this.bufferSource=G$H).buffer=this.audioBuffer,G$H.connect(G$v),G$v&&G$v.disconnect(),G$v.connect(G$r.destination),G$H.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=G$d.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(G$H.loop=!0),G$H.playbackRate.setTargetAtTime?G$H.playbackRate.setTargetAtTime(G$G.playbackRate,this.context.currentTime,.1):G$H.playbackRate.value=G$G.playbackRate,G$H.start(0,this.startTime),!G$q&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},G$v.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(G$P.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},G$v._clearBufferSource=function(){if(this.bufferSource){var G$q=this.bufferSource;G$q.stop?G$q.stop(0):G$q.noteOff(0),G$q.disconnect(0),G$q.onended=null,G$r._tryCleanFailed||this._tryClearBuffer(G$q),this.bufferSource=null}},G$v._tryClearBuffer=function(G$q){try{G$q.buffer=null}catch(G$q){G$r._tryCleanFailed=!0}},G$v.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,G$G.removeChannel(this),this.startHandler=null,this.completeHandler=null},G$v.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,G$G.removeChannel(this)},G$v.resume=function(){this.startTime=this._pauseTime,this.play(!1)},G$D(0,G$v,"position",function(){return this.bufferSource?(G$d.now()-this._startTime)/1e3+this.startTime:0}),G$D(0,G$v,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),G$D(0,G$v,"volume",function(){return this._volume},function(G$q){this.isStopped||(this._volume=G$q,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(G$q,this.context.currentTime,.1):this.gain.gain.value=G$q)}),G$r._tryCleanFailed=!1,G$r}(),G$Dq=function(G$q){function G$r(){G$r.__super.call(this),this._w=0,this._h=0}G$x(G$r,"laya.resource.Bitmap",G$Nq);var G$v=G$r.prototype;return G$D(0,G$v,"width",function(){return this._w}),G$D(0,G$v,"height",function(){return this._h}),G$D(0,G$v,"source",function(){return this._source}),G$r}(),G$gq=function(G$r){function G$q(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,G$q.__super.call(this),this._interval=G$H.animationInterval,this._setUpNoticeType(1)}G$x(G$q,"laya.display.AnimationPlayerBase",G$r);var G$v=G$q.prototype;return G$v.play=function(G$q,G$r,G$v,G$H){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=!0),void 0===G$v&&(G$v=""),void 0===G$H&&(G$H=!0),this._isPlaying=!0,this.index="string"==typeof G$q?this._getFrameByLabel(G$q):G$q,this.loop=G$r,this._actionName=G$v,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},G$v._getFrameByLabel=function(G$q){var G$r=0;for(G$r=0;G$r<this._count;G$r++)if(this._labels[G$r]&&0<=this._labels[G$r].indexOf(G$q))return G$r;return 0},G$v._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},G$v._setControlNode=function(G$q){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=G$q)&&G$q!=this&&(G$q.on("display",this,this._checkResumePlaying),G$q.on("undisplay",this,this._checkResumePlaying))},G$v._setDisplay=function(G$q){G$r.prototype._setDisplay.call(this,G$q),this._checkResumePlaying()},G$v._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},G$v.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},G$v.addLabel=function(G$q,G$r){this._labels||(this._labels={}),this._labels[G$r]||(this._labels[G$r]=[]),this._labels[G$r].push(G$q)},G$v.removeLabel=function(G$q){if(G$q){if(this._labels)for(var G$r in this._labels)this._removeLabelFromLabelList(this._labels[G$r],G$q)}else this._labels=null},G$v._removeLabelFromLabelList=function(G$q,G$r){if(G$q)for(var G$v=G$q.length-1;0<=G$v;G$v--)G$q[G$v]==G$r&&G$q.splice(G$v,1)},G$v.gotoAndStop=function(G$q){this.index="string"==typeof G$q?this._getFrameByLabel(G$q):G$q,this.stop()},G$v._displayToIndex=function(G$q){},G$v.clear=function(){this.stop(),this._labels=null},G$D(0,G$v,"interval",function(){return this._interval},function(G$q){this._interval!=G$q&&(this._frameRateChanged=!0,this._interval=G$q,this._isPlaying&&0<G$q&&this.timerLoop(G$q,this,this._frameLoop,null,!0,!0))}),G$D(0,G$v,"isPlaying",function(){return this._isPlaying}),G$D(0,G$v,"index",function(){return this._index},function(G$q){if(this._index=G$q,this._displayToIndex(G$q),this._labels&&this._labels[G$q])for(var G$r=this._labels[G$q],G$v=0,G$H=G$r.length;G$v<G$H;G$v++)this.event("label",G$r[G$v])}),G$D(0,G$v,"count",function(){return this._count}),G$q.WRAP_POSITIVE=0,G$q.WRAP_REVERSE=1,G$q.WRAP_PINGPONG=2,G$q}(G$Kq),G$Xq=function(G$r){function G$j(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,G$j.__super.call(this),this.overflow=G$j.VISIBLE,this._style=new G$rq(this),this._style.wordWrap=!1}G$x(G$j,"laya.display.Text",G$r);var G$q=G$j.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._lines=null,this._words&&(this._words.length=0,this._words=null)},G$q._getBoundPointsM=function(G$q){void 0===G$q&&(G$q=!1);var G$r=G$a.TEMP;return G$r.setTo(0,0,this.width,this.height),G$r._getBoundPoints()},G$q.getGraphicBounds=function(G$q){void 0===G$q&&(G$q=!1);var G$r=G$a.TEMP;return G$r.setTo(0,0,this.width,this.height),G$r},G$q._getCSSStyle=function(){return this._style},G$q.lang=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x){if(G$q=G$j.langPacks&&G$j.langPacks[G$q]?G$j.langPacks[G$q]:G$q,arguments.length<2)this._text=G$q;else{for(var G$K=0,G$T=arguments.length;G$K<G$T;G$K++)G$q=G$q.replace("{"+G$K+"}",arguments[G$K+1]);this._text=G$q}},G$q._isPassWordMode=function(){var G$q=this._style.password;return"prompt"in this&&this.prompt==this._text&&(G$q=!1),G$q},G$q._getPassWordTxt=function(G$q){var G$r;G$r="";for(var G$v=G$q.length;0<G$v;G$v--)G$r+="●";return G$r},G$q.renderText=function(G$q,G$r){var G$v=this.graphics;G$v.clear(!0);var G$H=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(G$d.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);G$d.context.font=G$H;var G$A=this.padding,G$y=G$A[3],G$R="left",G$W=this._lines,G$O=this.leading+this._charSize.height,G$N=this._currBitmapFont;G$N&&(G$O=this.leading+G$N.getMaxHeight());var G$x=G$A[0];if(!G$N&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(G$R="right",G$y=this._width-G$A[1]):"center"==this.align&&(G$R="center",G$y=.5*this._width+G$A[3]-G$A[1])),0<this._height){var G$K=this._textHeight>this._height?"top":this.valign;"middle"===G$K?G$x=.5*(this._height-G$r*G$O)+G$A[0]-G$A[2]:"bottom"===G$K&&(G$x=this._height-G$r*G$O-G$A[2])}var G$T=this._style;if(G$N&&G$N.autoScaleSize)var G$j=G$N.fontSize/this.fontSize;if(this._clipPoint)if(G$v.save(),G$N&&G$N.autoScaleSize){var G$D=0,G$g=0;G$D=this._width?this._width-G$A[3]-G$A[1]:this._textWidth,G$g=this._height?this._height-G$A[0]-G$A[2]:this._textHeight,G$D*=G$j,G$g*=G$j,G$v.clipRect(G$A[3],G$A[0],G$D,G$g)}else G$v.clipRect(G$A[3],G$A[0],this._width?this._width-G$A[3]-G$A[1]:this._textWidth,this._height?this._height-G$A[0]-G$A[2]:this._textHeight);var G$X=G$T.password;"prompt"in this&&this.prompt==this._text&&(G$X=!1);for(var G$m=0,G$B=0,G$e=Math.min(this._lines.length,G$r+G$q)||1,G$p=G$q;G$p<G$e;G$p++){var G$M,G$z=G$W[G$p];if(G$X){var G$P=G$z.length;G$z="";for(var G$V=G$P;0<G$V;G$V--)G$z+="●"}if(G$m=G$y-(this._clipPoint?this._clipPoint.x:0),G$B=G$x+G$O*G$p-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(G$R,G$m,G$B,G$p),G$N){var G$a=this.width;G$N.autoScaleSize&&(G$a=this.width*G$j),G$N.drawText(G$z,this,G$m,G$B,this.align,G$a)}else G$Y.isWebGL?(this._words||(this._words=[]),(G$M=this._words.length>G$p-G$q?this._words[G$p-G$q]:new G$k).setText(G$z)):G$M=G$z,G$T.stroke?G$v.fillBorderText(G$M,G$m,G$B,G$H,this.color,G$T.strokeColor,G$T.stroke,G$R):G$v.fillText(G$M,G$m,G$B,G$H,this.color,G$R)}if(G$N&&G$N.autoScaleSize){var G$J=1/G$j;this.scale(G$J,G$J)}this._clipPoint&&G$v.restore(),this._startX=G$y,this._startY=G$x},G$q.drawUnderline=function(G$q,G$r,G$v,G$H){var G$A=this._lineWidths[G$H];switch(G$q){case"center":G$r-=G$A/2;break;case"right":G$r-=G$A}G$v+=this._charSize.height,this._graphics.drawLine(G$r,G$v,G$r+G$A,G$v,this.underlineColor||this.color,1)},G$q.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);G$d.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new G$V(0,0)):this._clipPoint=null;var G$q=this._lines.length;if(this.overflow!=G$j.VISIBLE){var G$r=this.overflow==G$j.HIDDEN?Math.floor:Math.ceil;G$q=Math.min(G$q,G$r((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var G$v=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(G$v,G$q),this.repaint()},G$q.evalTextSize=function(){var G$q,G$r=NaN;G$q=Math.max.apply(this,this._lineWidths),G$r=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],G$q==this._textWidth&&G$r==this._textHeight||(this._textWidth=G$q,this._textHeight=G$r,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},G$q.checkEnabledViewportOrNot=function(){return this.overflow==G$j.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},G$q.changeText=function(G$q){this._text!==G$q&&(this.lang(G$q+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},G$q.parseLines=function(G$q){var G$r=this.wordWrap||this.overflow==G$j.HIDDEN;if(G$r)var G$v=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var G$H=G$w.contextMeasureText(G$j._testWord);G$Y.isConchApp&&0===G$H.width&&0===G$H.height&&(G$H=G$w.contextMeasureText("W")),this._charSize.width=G$H.width,this._charSize.height=G$H.height||this.fontSize}for(var G$A=G$q.replace(/\r\n/g,"\n").split("\n"),G$y=0,G$R=G$A.length;G$y<G$R;G$y++){var G$W=G$A[G$y];G$r?this.parseLine(G$W,G$v):(this._lineWidths.push(this.getTextWidth(G$W)),this._lines.push(G$W))}},G$q.parseLine=function(G$q,G$r){G$d.context;var G$v,G$H=this._lines,G$A=0,G$y=NaN,G$R=NaN,G$W=0;if((G$y=this.getTextWidth(G$q))<=G$r)return G$H.push(G$q),void this._lineWidths.push(G$y);G$y=this._charSize.width,0==(G$A=Math.floor(G$r/G$y))&&(G$A=1),G$R=G$y=this.getTextWidth(G$q.substring(0,G$A));for(var G$O=G$A,G$N=G$q.length;G$O<G$N;G$O++)if(G$r<(G$R+=G$y=this.getTextWidth(G$q.charAt(G$O))))if(this.wordWrap){var G$x=G$q.substring(G$W,G$O);if(G$x.charCodeAt(G$x.length-1)<255?(G$v=/(?:\w|-)+$/.exec(G$x))&&(G$O=G$v.index+G$W,0==G$v.index?G$O+=G$x.length:G$x=G$q.substring(G$W,G$O)):G$j.RightToLeft&&(G$v=/([\u0600-\u06FF])+$/.exec(G$x))&&(G$O=G$v.index+G$W,0==G$v.index?G$O+=G$x.length:G$x=G$q.substring(G$W,G$O)),G$H.push(G$x),this._lineWidths.push(G$R-G$y),!((G$W=G$O)+G$A<G$N)){G$H.push(G$q.substring(G$W,G$N)),this._lineWidths.push(this.getTextWidth(G$H[G$H.length-1])),G$W=-1;break}G$O+=G$A,G$R=G$y=this.getTextWidth(G$q.substring(G$W,G$O)),G$O--}else if(this.overflow==G$j.HIDDEN)return G$H.push(G$q.substring(0,G$O)),void this._lineWidths.push(this.getTextWidth(G$H[G$H.length-1]));this.wordWrap&&-1!=G$W&&(G$H.push(G$q.substring(G$W,G$N)),this._lineWidths.push(this.getTextWidth(G$H[G$H.length-1])))},G$q.getTextWidth=function(G$q){return this._currBitmapFont?this._currBitmapFont.getTextWidth(G$q):G$w.contextMeasureText(G$q).width},G$q.getWordWrapWidth=function(){var G$q=this.padding,G$r=NaN;return(G$r=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(G$r=this.wordWrap?100:G$d.width),G$r<=0&&(G$r=100),G$r-G$q[3]-G$q[1]},G$q.getCharPoint=function(G$q,G$r){this._isChanged&&G$P.timer.runCallLater(this,this.typeset);for(var G$v=0,G$H=this._lines,G$A=0,G$y=0,G$R=G$H.length;G$y<G$R;G$y++){if(G$q<(G$v+=G$H[G$y].length)){var G$W=G$y;break}G$A=G$v}var G$O=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;G$d.context.font=G$O;var G$N=this.getTextWidth(this._text.substring(G$A,G$q));return(G$r||new G$V).setTo(this._startX+G$N-(this._clipPoint?this._clipPoint.x:0),this._startY+G$W*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},G$D(0,G$q,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(G$q){G$q!=this._width&&(G$P.superSet(G$Kq,this,"width",G$q),this.isChanged=!0)}),G$D(0,G$q,"textWidth",function(){return this._isChanged&&G$P.timer.runCallLater(this,this.typeset),this._textWidth}),G$D(0,G$q,"height",function(){return this._height?this._height:this.textHeight},function(G$q){G$q!=this._height&&(G$P.superSet(G$Kq,this,"height",G$q),this.isChanged=!0)}),G$D(0,G$q,"textHeight",function(){return this._isChanged&&G$P.timer.runCallLater(this,this.typeset),this._textHeight}),G$D(0,G$q,"padding",function(){return this._getCSSStyle().padding},function(G$q){this._getCSSStyle().padding=G$q,this.isChanged=!0}),G$D(0,G$q,"bold",function(){return this._getCSSStyle().bold},function(G$q){this._getCSSStyle().bold=G$q,this.isChanged=!0}),G$D(0,G$q,"text",function(){return this._text||""},function(G$q){this._text!==G$q&&(this.lang(G$q+""),this.isChanged=!0,this.event("change"))}),G$D(0,G$q,"color",function(){return this._getCSSStyle().color},function(G$q){this._getCSSStyle().color!=G$q&&(this._getCSSStyle().color=G$q,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),G$D(0,G$q,"font",function(){return this._getCSSStyle().fontFamily},function(G$q){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),G$j._bitmapFonts&&G$j._bitmapFonts[G$q]&&(this._currBitmapFont=G$j._bitmapFonts[G$q]),this._getCSSStyle().fontFamily=G$q,this.isChanged=!0}),G$D(0,G$q,"fontSize",function(){return this._getCSSStyle().fontSize},function(G$q){this._getCSSStyle().fontSize=G$q,this.isChanged=!0}),G$D(0,G$q,"italic",function(){return this._getCSSStyle().italic},function(G$q){this._getCSSStyle().italic=G$q,this.isChanged=!0}),G$D(0,G$q,"align",function(){return this._getCSSStyle().align},function(G$q){this._getCSSStyle().align=G$q,this.isChanged=!0}),G$D(0,G$q,"valign",function(){return this._getCSSStyle().valign},function(G$q){this._getCSSStyle().valign=G$q,this.isChanged=!0}),G$D(0,G$q,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(G$q){this._getCSSStyle().wordWrap=G$q,this.isChanged=!0}),G$D(0,G$q,"leading",function(){return this._getCSSStyle().leading},function(G$q){this._getCSSStyle().leading=G$q,this.isChanged=!0}),G$D(0,G$q,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(G$q){this._getCSSStyle().backgroundColor=G$q,this.isChanged=!0}),G$D(0,G$q,"borderColor",function(){return this._getCSSStyle().borderColor},function(G$q){this._getCSSStyle().borderColor=G$q,this.isChanged=!0}),G$D(0,G$q,"stroke",function(){return this._getCSSStyle().stroke},function(G$q){this._getCSSStyle().stroke=G$q,this.isChanged=!0}),G$D(0,G$q,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(G$q){this._getCSSStyle().strokeColor=G$q,this.isChanged=!0}),G$D(0,G$q,"isChanged",null,function(G$q){this._isChanged!==G$q&&(this._isChanged=G$q)&&G$P.timer.callLater(this,this.typeset)}),G$D(0,G$q,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(G$q){if(!(this.overflow!=G$j.SCROLL||this.textWidth<this._width)&&this._clipPoint){G$q=G$q<this.padding[3]?this.padding[3]:G$q;var G$r=this._textWidth-this._width;G$q=G$r<G$q?G$r:G$q;var G$v=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=G$q,this.renderText(this._lastVisibleLineIndex,G$v)}}),G$D(0,G$q,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(G$q){if(!(this.overflow!=G$j.SCROLL||this.textHeight<this._height)&&this._clipPoint){G$q=G$q<this.padding[0]?this.padding[0]:G$q;var G$r=this._textHeight-this._height,G$v=(G$q=G$r<G$q?G$r:G$q)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=G$v;var G$H=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=G$q,this.renderText(G$v,G$H)}}),G$D(0,G$q,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),G$D(0,G$q,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),G$D(0,G$q,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),G$D(0,G$q,"underlineColor",function(){return this._underlineColor},function(G$q){this._underlineColor=G$q,this._isChanged=!0,this.typeset()}),G$j.registerBitmapFont=function(G$q,G$r){G$j._bitmapFonts||(G$j._bitmapFonts={}),G$j._bitmapFonts[G$q]=G$r},G$j.unregisterBitmapFont=function(G$q,G$r){if(void 0===G$r&&(G$r=!0),G$j._bitmapFonts&&G$j._bitmapFonts[G$q]){var G$v=G$j._bitmapFonts[G$q];G$r&&G$v.destroy(),delete G$j._bitmapFonts[G$q]}},G$j.setTextRightToLeft=function(){var G$q;(G$q=G$d.canvas.source.style).display="none",G$q.position="absolute",G$q.direction="rtl",G$Y._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,G$d.document.body.appendChild(G$d.canvas.source)},G$j.supportFont=function(G$q){G$d.context.font="10px sans-serif";var G$r=G$w.contextMeasureText("abcji").width;G$d.context.font="10px "+G$q;var G$v=G$w.contextMeasureText("abcji").width;return console.log(G$r,G$v),G$r!==G$v},G$j._testWord="游",G$j.langPacks=null,G$j.VISIBLE="visible",G$j.SCROLL="scroll",G$j.HIDDEN="hidden",G$j.CharacterCache=!0,G$j.RightToLeft=!1,G$j._bitmapFonts=null,G$O(G$j,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),G$j}(G$Kq),G$mq=function(G$K){function G$R(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",G$R.__super.call(this),this.offset=new G$V,this._canvasTransform=new G$Q,this._previousOrientation=G$d.window.orientation;var G$r=this;this.transform=G$Q.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var G$q=G$d.window,G$v=this;G$q.addEventListener("focus",function(){G$r._isFocused=!0,G$v.event("focus"),G$v.event("focuschange")}),G$q.addEventListener("blur",function(){G$r._isFocused=!1,G$v.event("blur"),G$v.event("focuschange"),G$v._isInputting()&&(G$Mq.inputElement.target.focus=!1)});var G$H="visibilityState",G$A="visibilitychange",G$y=G$q.document;void 0!==G$y.hidden?(G$A="visibilitychange",G$H="visibilityState"):void 0!==G$y.mozHidden?(G$A="mozvisibilitychange",G$H="mozVisibilityState"):void 0!==G$y.msHidden?(G$A="msvisibilitychange",G$H="msVisibilityState"):void 0!==G$y.webkitHidden&&(G$A="webkitvisibilitychange",G$H="webkitVisibilityState"),G$q.document.addEventListener(G$A,function(){"hidden"==G$d.document[G$H]?G$v._setStageVisible(!1):G$v._setStageVisible(!0)}),G$q.document.addEventListener("qbrowserVisibilityChange",function(G$q){G$v._setStageVisible(!G$q.hidden)}),G$q.addEventListener("resize",function(){var G$q=G$d.window.orientation;null!=G$q&&G$q!=G$r._previousOrientation&&G$v._isInputting()&&(G$Mq.inputElement.target.focus=!1),G$r._previousOrientation=G$q,G$v._isInputting()||G$v._resetCanvas()}),G$q.addEventListener("orientationchange",function(G$q){G$v._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),G$d.onMobile&&this.on("mousedown",this,this._onmouseMove)}G$x(G$R,"laya.display.Stage",G$K);var G$q=G$R.prototype;return G$q._setStageVisible=function(G$q){this._isVisibility!=G$q&&(this._isVisibility=G$q,this._isVisibility||this._isInputting()&&(G$Mq.inputElement.target.focus=!1),this.event("visibilitychange"))},G$q._isInputting=function(){return G$d.onMobile&&G$Mq.isInputting},G$q._changeCanvasSize=function(){this.setScreenSize(G$d.clientWidth*G$d.pixelRatio,G$d.clientHeight*G$d.pixelRatio)},G$q._resetCanvas=function(){if(this.screenAdaptationEnabled){var G$q=G$Y._mainCanvas;G$q.source.style;G$q.size(1,1),G$P.timer.once(100,this,this._changeCanvasSize)}},G$q.setScreenSize=function(G$q,G$r){var G$v=!1;if("none"!==this._screenMode&&(G$v=(G$q/G$r<1?"vertical":"horizontal")!==this._screenMode)){var G$H=G$r;G$r=G$q,G$q=G$H}this.canvasRotation=G$v;var G$A=G$Y._mainCanvas,G$y=G$A.source.style,G$R=this._canvasTransform.identity(),G$W=this._scaleMode,G$O=G$q/this.designWidth,G$N=G$r/this.designHeight,G$x=this.designWidth,G$K=this.designHeight,G$T=G$q,G$j=G$r,G$D=G$d.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,G$W){case"noscale":G$O=G$N=1,G$T=this.designWidth,G$j=this.designHeight;break;case"showall":G$O=G$N=Math.min(G$O,G$N),G$x=G$T=Math.round(this.designWidth*G$O),G$K=G$j=Math.round(this.designHeight*G$N);break;case"noborder":G$O=G$N=Math.max(G$O,G$N),G$T=Math.round(this.designWidth*G$O),G$j=Math.round(this.designHeight*G$N);break;case"full":G$O=G$N=1,this._width=G$x=G$q,this._height=G$K=G$r;break;case"fixedwidth":G$N=G$O,this._height=G$K=Math.round(G$r/G$O);break;case"fixedheight":G$O=G$N,this._width=G$x=Math.round(G$q/G$N);break;case"fixedauto":G$q/G$r<this.designWidth/this.designHeight?(G$N=G$O,this._height=G$K=Math.round(G$r/G$O)):(G$O=G$N,this._width=G$x=Math.round(G$q/G$N))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,G$x=G$x+1&2147483646,G$K=G$K+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),G$O*=this.scaleX,G$N*=this.scaleY,1===G$O&&1===G$N?this.transform.identity():(this.transform.a=this._formatData(G$O/(G$T/G$x)),this.transform.d=this._formatData(G$N/(G$j/G$K)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),G$A.size(G$x,G$K),G$E.changeWebGLSize(G$x,G$K),G$R.scale(G$T/G$x/G$D,G$j/G$K/G$D),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(G$q-G$T)/G$D:this.offset.x=.5*(G$q-G$T)/G$D,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(G$r-G$j)/G$D:this.offset.y=.5*(G$r-G$j)/G$D,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),G$R.translate(this.offset.x,this.offset.y),this.canvasDegree=0,G$v&&("horizontal"===this._screenMode?(G$R.rotate(Math.PI/2),G$R.translate(G$r/G$D,0),this.canvasDegree=90):(G$R.rotate(-Math.PI/2),G$R.translate(0,G$q/G$D),this.canvasDegree=-90)),G$R.a=this._formatData(G$R.a),G$R.d=this._formatData(G$R.d),G$R.tx=this._formatData(G$R.tx),G$R.ty=this._formatData(G$R.ty),G$y.transformOrigin=G$y.webkitTransformOrigin=G$y.msTransformOrigin=G$y.mozTransformOrigin=G$y.oTransformOrigin="0px 0px 0px",G$y.transform=G$y.webkitTransform=G$y.msTransform=G$y.mozTransform=G$y.oTransform="matrix("+G$R.toString()+")",G$R.translate(parseInt(G$y.left)||0,parseInt(G$y.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},G$q._formatData=function(G$q){return Math.abs(G$q)<1e-6?0:Math.abs(1-G$q)<.001?0<G$q?1:-1:G$q},G$q.getMousePoint=function(){return G$V.TEMP.setTo(this.mouseX,this.mouseY)},G$q.repaint=function(){this._repaint=1},G$q.parentRepaint=function(){},G$q._loop=function(){return this.render(G$Y.context,0,0),!0},G$q._onmouseMove=function(G$q){this._mouseMoveTime=G$d.now()},G$q.getTimeFromFrameStart=function(){return G$d.now()-this._frameStartTime},G$q.render=function(G$q,G$r,G$v){if("sleep"===this._frameRate&&!G$Y.isConchApp){var G$H=G$d.now();if(!(1e3<=G$H-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(G$l.loopCount++,G$g.instance.runEvent(),G$P.timer._update()));this._frameStartTime=G$H}if(this._renderCount++,G$Y.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=G$d.now();var G$A="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),G$y=this._renderCount%2==0;if(G$l.renderSlow=!G$A,G$A||G$y||G$Y.isConchApp){var G$R;G$l.loopCount++,G$g.instance.runEvent(),G$P.timer._update(),G$E.update3DLoop();var G$W=0,G$O=0;if(G$Y.isConchNode)for(G$W=0,G$O=this._scenes.length;G$W<G$O;G$W++)(G$R=this._scenes[G$W])&&G$R._updateSceneConch();else for(G$W=0,G$O=this._scenes.length;G$W<G$O;G$W++)(G$R=this._scenes[G$W])&&G$R._updateScene();if(G$Y.isConchNode){var G$N=G$Kq.CustomList;for(G$W=0,G$O=G$N.length;G$W<G$O;G$W++){var G$x=G$N[G$W];G$x.customRender(G$x.customContext,0,0)}return}}G$Y.isConchNode||this.renderingEnabled&&(G$A||!G$y||G$Y.isConchWebGL)&&(G$Y.isWebGL?G$Y.WebGL.mainContext&&!G$Y.WebGL.mainContext.isContextLost()&&(G$q.clear(),G$K.prototype.render.call(this,G$q,G$r,G$v),G$l._show&&G$l._sp&&G$l._sp.render(G$q,G$r,G$v),G$E.clear(this._bgColor),G$E.beginFlush(),G$q.flush(),G$E.endFinish(),G$h.instance&&G$h.getInstance().endDispose()):(G$E.clear(this._bgColor),G$K.prototype.render.call(this,G$q,G$r,G$v),G$l._show&&G$l._sp&&G$l._sp.render(G$q,G$r,G$v)))}else this._renderCount%5==0&&(G$l.loopCount++,G$g.instance.runEvent(),G$P.timer._update())},G$q._requestFullscreen=function(){var G$q=G$d.document.documentElement;G$q.requestFullscreen?G$q.requestFullscreen():G$q.mozRequestFullScreen?G$q.mozRequestFullScreen():G$q.webkitRequestFullscreen?G$q.webkitRequestFullscreen():G$q.msRequestFullscreen&&G$q.msRequestFullscreen()},G$q._fullScreenChanged=function(){G$P.stage.event("fullscreenchange")},G$q.exitFullscreen=function(){var G$q=G$d.document;G$q.exitFullscreen?G$q.exitFullscreen():G$q.mozCancelFullScreen?G$q.mozCancelFullScreen():G$q.webkitExitFullscreen&&G$q.webkitExitFullscreen()},G$D(0,G$q,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),G$D(0,G$q,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),G$D(0,G$q,"frameRate",function(){return this._frameRate},function(G$q){if(this._frameRate=G$q,G$Y.isConchApp)switch(this._frameRate){case"slow":G$d.window.conch&&G$d.window.conchConfig.setSlowFrame&&G$d.window.conchConfig.setSlowFrame(!0);break;case"fast":G$d.window.conch&&G$d.window.conchConfig.setSlowFrame&&G$d.window.conchConfig.setSlowFrame(!1);break;case"mouse":G$d.window.conch&&G$d.window.conchConfig.setMouseFrame&&G$d.window.conchConfig.setMouseFrame(2e3);break;case"sleep":G$d.window.conch&&G$d.window.conchConfig.setLimitFPS&&G$d.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),G$D(0,G$q,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),G$D(0,G$q,"width",G$K.prototype._$get_width,function(G$q){this.designWidth=G$q,G$P.superSet(G$Kq,this,"width",G$q),G$P.timer.callLater(this,this._changeCanvasSize)}),G$D(0,G$q,"alignH",function(){return this._alignH},function(G$q){this._alignH=G$q,G$P.timer.callLater(this,this._changeCanvasSize)}),G$D(0,G$q,"isFocused",function(){return this._isFocused}),G$D(0,G$q,"height",G$K.prototype._$get_height,function(G$q){this.designHeight=G$q,G$P.superSet(G$Kq,this,"height",G$q),G$P.timer.callLater(this,this._changeCanvasSize)}),G$D(0,G$q,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||G$Q.create()},G$K.prototype._$set_transform),G$D(0,G$q,"isVisibility",function(){return this._isVisibility}),G$D(0,G$q,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),G$D(0,G$q,"scaleMode",function(){return this._scaleMode},function(G$q){this._scaleMode=G$q,G$P.timer.callLater(this,this._changeCanvasSize)}),G$D(0,G$q,"alignV",function(){return this._alignV},function(G$q){this._alignV=G$q,G$P.timer.callLater(this,this._changeCanvasSize)}),G$D(0,G$q,"bgColor",function(){return this._bgColor},function(G$q){this._bgColor=G$q,this.conchModel&&this.conchModel.bgColor(G$q),G$Y.isWebGL&&(G$q?G$R._wgColor=G$F.create(G$q)._color:G$d.onMiniGame||(G$R._wgColor=null)),G$d.onLimixiu?G$R._wgColor=G$F.create(G$q)._color:G$Y.canvas.style.background=G$q||"none"}),G$D(0,G$q,"mouseX",function(){return Math.round(G$g.instance.mouseX/this.clientScaleX)}),G$D(0,G$q,"mouseY",function(){return Math.round(G$g.instance.mouseY/this.clientScaleY)}),G$D(0,G$q,"screenMode",function(){return this._screenMode},function(G$q){this._screenMode=G$q}),G$D(0,G$q,"visible",G$K.prototype._$get_visible,function(G$q){this.visible!==G$q&&(G$P.superSet(G$Kq,this,"visible",G$q),G$Y._mainCanvas.source.style.visibility=G$q?"visible":"hidden")}),G$D(0,G$q,"fullScreenEnabled",null,function(G$q){var G$r=G$d.document,G$v=G$Y.canvas;G$q?(G$v.addEventListener("mousedown",this._requestFullscreen),G$v.addEventListener("touchstart",this._requestFullscreen),G$r.addEventListener("fullscreenchange",this._fullScreenChanged),G$r.addEventListener("mozfullscreenchange",this._fullScreenChanged),G$r.addEventListener("webkitfullscreenchange",this._fullScreenChanged),G$r.addEventListener("msfullscreenchange",this._fullScreenChanged)):(G$v.removeEventListener("mousedown",this._requestFullscreen),G$v.removeEventListener("touchstart",this._requestFullscreen),G$r.removeEventListener("fullscreenchange",this._fullScreenChanged),G$r.removeEventListener("mozfullscreenchange",this._fullScreenChanged),G$r.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),G$r.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),G$R.SCALE_NOSCALE="noscale",G$R.SCALE_EXACTFIT="exactfit",G$R.SCALE_SHOWALL="showall",G$R.SCALE_NOBORDER="noborder",G$R.SCALE_FULL="full",G$R.SCALE_FIXED_WIDTH="fixedwidth",G$R.SCALE_FIXED_HEIGHT="fixedheight",G$R.SCALE_FIXED_AUTO="fixedauto",G$R.ALIGN_LEFT="left",G$R.ALIGN_RIGHT="right",G$R.ALIGN_CENTER="center",G$R.ALIGN_TOP="top",G$R.ALIGN_MIDDLE="middle",G$R.ALIGN_BOTTOM="bottom",G$R.SCREEN_NONE="none",G$R.SCREEN_HORIZONTAL="horizontal",G$R.SCREEN_VERTICAL="vertical",G$R.FRAME_FAST="fast",G$R.FRAME_SLOW="slow",G$R.FRAME_MOUSE="mouse",G$R.FRAME_SLEEP="sleep",G$R.FRAME_MOUSE_THREDHOLD=2e3,G$O(G$R,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),G$R}(G$Kq),G$Bq=(function(G$q){function G$r(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,G$r.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}G$x(G$r,"laya.media.SoundNode",G$Kq);var G$v=G$r.prototype;G$v._onParentChange=function(){this.target=this.parent},G$v.play=function(G$q,G$r){void 0===G$q&&(G$q=1),isNaN(G$q)&&(G$q=1),this.url&&(this.stop(),this._channel=G$G.playSound(this.url,G$q,null,G$r))},G$v.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},G$v._setPlayAction=function(G$q,G$r,G$v,G$H){void 0===G$H&&(G$H=!0),this[G$v]&&G$q&&(G$H?G$q.on(G$r,this,this[G$v]):G$q.off(G$r,this,this[G$v]))},G$v._setPlayActions=function(G$q,G$r,G$v,G$H){if(void 0===G$H&&(G$H=!0),G$q&&G$r){var G$A,G$y=G$r.split(","),G$R=0;for(G$A=G$y.length,G$R=0;G$R<G$A;G$R++)this._setPlayAction(G$q,G$y[G$R],G$v,G$H)}},G$D(0,G$v,"playEvent",null,function(G$q){(this._playEvents=G$q)&&this._tar&&this._setPlayActions(this._tar,G$q,"play")}),G$D(0,G$v,"target",null,function(G$q){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=G$q,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),G$D(0,G$v,"stopEvent",null,function(G$q){(this._stopEvents=G$q)&&this._tar&&this._setPlayActions(this._tar,G$q,"stop")})}(),function(G$q){function G$r(){this._src=null,this._onload=null,this._onerror=null,G$r.__super.call(this)}G$x(G$r,"laya.resource.FileBitmap",G$Dq);var G$v=G$r.prototype;return G$D(0,G$v,"src",function(){return this._src},function(G$q){this._src=G$q}),G$D(0,G$v,"onload",null,function(G$q){}),G$D(0,G$v,"onerror",null,function(G$q){}),G$r}()),G$eq=function(G$q){function G$v(G$q,G$r){this._is2D=!1,G$v.__super.call(this);var G$H=this;if(this._source=this,"2D"===G$q||"AUTO"===G$q&&!G$Y.isWebGL){this._is2D=!0,this._source=G$r||G$d.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var G$A=this;G$A.getContext=function(G$q,G$r){if(G$H._ctx)return G$H._ctx;var G$v=G$H._ctx=G$H._source.getContext(G$q,G$r);return G$v&&(G$v._canvas=G$A,G$Y.isFlash||G$d.onLimixiu||(G$v.size=function(G$q,G$r){})),G$v}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}G$x(G$v,"laya.resource.HTMLCanvas",G$Dq);var G$r=G$v.prototype;return G$r.clear=function(){this._ctx&&this._ctx.clear()},G$r.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},G$r.release=function(){},G$r._setContext=function(G$q){this._ctx=G$q},G$r.getContext=function(G$q,G$r){return this._ctx?this._ctx:this._ctx=G$v._createContext(this)},G$r.getMemSize=function(){return 0},G$r.size=function(G$q,G$r){(this._w!=G$q||this._h!=G$r||this._source&&(this._source.width!=G$q||this._source.height!=G$r))&&(this._w=G$q,this._h=G$r,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(G$q,G$r),this._source&&(this._source.height=G$r,this._source.width=G$q))},G$r.getCanvas=function(){return this._source},G$r.toBase64=function(G$q,G$r,G$v){if(this._source)if(G$Y.isConchApp&&this._source.toBase64)this._source.toBase64(G$q,G$r,G$v);else{var G$H=this._source.toDataURL(G$q,G$r);G$v.call(this,G$H)}},G$D(0,G$r,"context",function(){return this._ctx}),G$D(0,G$r,"asBitmap",null,function(G$q){}),G$v.create=function(G$q,G$r){return new G$v(G$q,G$r)},G$v.TYPE2D="2D",G$v.TYPE3D="3D",G$v.TYPEAUTO="AUTO",G$v._createContext=null,G$v}(),G$pq=(function(G$q){function G$O(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){throw G$O.__super.call(this),new Error("不允许new！")}G$x(G$O,"laya.resource.HTMLSubImage",G$Dq),G$O.create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){return void 0===G$W&&(G$W=!1),new G$O(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W)}}(),function(G$q){function G$K(){this._frames=null,this._url=null,G$K.__super.call(this),this._setControlNode(this)}G$x(G$K,"laya.display.Animation",G$q);var G$r=G$K.prototype;G$r.destroy=function(G$q){void 0===G$q&&(G$q=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,G$q),this._frames=null,this._labels=null},G$r.play=function(G$q,G$r,G$v,G$H){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=!0),void 0===G$v&&(G$v=""),void 0===G$H&&(G$H=!0),G$v&&this._setFramesFromCache(G$v,G$H),this._isPlaying=!0,this.index="string"==typeof G$q?this._getFrameByLabel(G$q):G$q,this.loop=G$r,this._actionName=G$v,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},G$r._setFramesFromCache=function(G$q,G$r){var G$v;return void 0===G$r&&(G$r=!1),this._url&&(G$q=this._url+"#"+G$q),G$q&&G$K.framesMap[G$q]?((G$v=G$K.framesMap[G$q])instanceof Array?(this._frames=G$K.framesMap[G$q],this._count=this._frames.length):(G$v.nodeRoot&&(G$K.framesMap[G$q]=this._parseGraphicAnimationByData(G$v),G$v=G$K.framesMap[G$q]),this._frames=G$v.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=G$v.interval),this._labels=this._copyLabels(G$v.labels)),!0):(G$r&&console.log("ani not found:",G$q),!1)},G$r._copyLabels=function(G$q){if(!G$q)return null;var G$r,G$v;for(G$v in G$r={},G$q)G$r[G$v]=G$w.copyArray([],G$q[G$v]);return G$r},G$r._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&G$q.prototype._frameLoop.call(this)},G$r._displayToIndex=function(G$q){this._frames&&(this.graphics=this._frames[G$q])},G$r.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},G$r.loadImages=function(G$q,G$r){return void 0===G$r&&(G$r=""),this._url="",this._setFramesFromCache(G$r)||(this.frames=G$K.framesMap[G$r]?G$K.framesMap[G$r]:G$K.createFrames(G$q,G$r)),this},G$r.loadAtlas=function(G$r,G$v,G$H){void 0===G$H&&(G$H=""),this._url="";var G$A=this;function G$q(G$q){G$r===G$q&&(G$A.frames=G$K.framesMap[G$H]?G$K.framesMap[G$H]:G$K.createFrames(G$r,G$H),G$v&&G$v.run())}return G$A._setFramesFromCache(G$H)||(G$Wq.getAtlas(G$r)?G$q(G$r):G$P.loader.load(G$r,G$B.create(null,G$q,[G$r]),null,"atlas")),this},G$r.loadAnimation=function(G$q,G$r,G$v){this._url=G$q;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,G$r&&G$r.run()):!G$v||G$Wq.getAtlas(G$v)?this._loadAnimationData(G$q,G$r,G$v):G$P.loader.load(G$v,G$B.create(this,this._loadAnimationData,[G$q,G$r,G$v]),null,"atlas"),this},G$r._loadAnimationData=function(G$W,G$O,G$q){var G$N=this;if(!G$q||G$Wq.getAtlas(G$q)){var G$x=this;G$Wq.getRes(G$W)?G$r(G$W):G$P.loader.load(G$W,G$B.create(null,G$r,[G$W]),null,"json"),G$Wq.clearRes(G$W)}else console.warn("atlas load fail:"+G$q);function G$r(G$q){if(G$Wq.getRes(G$q)&&G$W===G$q){var G$r;if(G$K.framesMap[G$W+"#"])G$x._setFramesFromCache(G$N._actionName,!0),G$N.index=0,G$N._checkResumePlaying();else{var G$v=G$x._parseGraphicAnimation(G$Wq.getRes(G$W));if(!G$v)return;var G$H,G$A=G$v.animationList,G$y=0,G$R=G$A.length;for(G$y=0;G$y<G$R;G$y++)G$r=G$A[G$y],G$K.framesMap[G$W+"#"+G$r.name]=G$r,G$H||(G$H=G$r);G$H&&(G$K.framesMap[G$W+"#"]=G$H,G$x._setFramesFromCache(G$N._actionName,!0),G$N.index=0),G$N._checkResumePlaying()}G$O&&G$O.run()}}},G$r._parseGraphicAnimation=function(G$q){return G$Pq.parseAnimationData(G$q)},G$r._parseGraphicAnimationByData=function(G$q){return G$Pq.parseAnimationByData(G$q)},G$D(0,G$r,"frames",function(){return this._frames},function(G$q){(this._frames=G$q)&&(this._count=G$q.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),G$D(0,G$r,"autoPlay",null,function(G$q){G$q?this.play():this.stop()}),G$D(0,G$r,"source",null,function(G$q){-1<G$q.indexOf(".ani")?this.loadAnimation(G$q):-1<G$q.indexOf(".json")||-1<G$q.indexOf("als")||-1<G$q.indexOf("atlas")?this.loadAtlas(G$q):this.loadImages(G$q.split(","))}),G$D(0,G$r,"autoAnimation",null,function(G$q){this.play(0,!0,G$q,!1)}),G$K.createFrames=function(G$q,G$r){var G$v,G$H,G$A=0,G$y=0;if("string"==typeof G$q){var G$R=G$Wq.getAtlas(G$q);if(G$R&&G$R.length)for(G$v=[],G$A=0,G$y=G$R.length;G$A<G$y;G$A++)(G$H=new G$E.createGraphics).drawTexture(G$Wq.getRes(G$R[G$A]),0,0),G$v.push(G$H)}else if(G$q instanceof Array)for(G$v=[],G$A=0,G$y=G$q.length;G$A<G$y;G$A++)(G$H=new G$E.createGraphics).loadImage(G$q[G$A],0,0),G$v.push(G$H);return G$r&&(G$K.framesMap[G$r]=G$v),G$v},G$K.clearCache=function(G$q){var G$r,G$v=G$K.framesMap,G$H=G$q+"#";for(G$r in G$v)G$r!==G$q&&0!=G$r.indexOf(G$H)||delete G$K.framesMap[G$r]},G$K.framesMap={}}(G$gq),function(G$q){function G$y(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,G$y.__super.call(this),null==G$y._sortIndexFun&&(G$y._sortIndexFun=G$z.sortByKey("index",!1,!0))}G$x(G$y,"laya.display.FrameAnimation",G$q);var G$r=G$y.prototype;return G$r._setUp=function(G$q,G$r){this._labels=null,this._animationNewFrames=null,this._targetDic=G$q,this._animationData=G$r,this.interval=1e3/G$r.frameRate,G$r.parsed?(this._count=G$r.count,this._labels=G$r.labels,this._animationNewFrames=G$r.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),G$r.parsed=!0,G$r.labels=this._labels,G$r.count=this._count,G$r.animationNewFrames=this._animationNewFrames},G$r.clear=function(){G$q.prototype.clear.call(this),this._targetDic=null,this._animationData=null},G$r._displayToIndex=function(G$q){if(this._animationData){G$q<0&&(G$q=0),G$q>this._count&&(G$q=this._count);var G$r=this._animationData.nodes,G$v=0,G$H=G$r.length;for(G$v=0;G$v<G$H;G$v++)this._displayNodeToFrame(G$r[G$v],G$q)}},G$r._displayNodeToFrame=function(G$q,G$r,G$v){G$v||(G$v=this._targetDic);var G$H=G$v[G$q.target];if(G$H){var G$A,G$y,G$R,G$W=G$q.frames,G$O=G$q.keys,G$N=0,G$x=G$O.length;for(G$N=0;G$N<G$x;G$N++)G$R=(G$y=G$W[G$A=G$O[G$N]]).length>G$r?G$y[G$r]:G$y[G$y.length-1],G$H[G$A]=G$R}},G$r._calculateDatas=function(){if(this._animationData){var G$q,G$r=this._animationData.nodes,G$v=0,G$H=G$r.length;for(G$v=this._count=0;G$v<G$H;G$v++)G$q=G$r[G$v],this._calculateNodeKeyFrames(G$q);this._count+=1}},G$r._calculateNodeKeyFrames=function(G$q){var G$r,G$v,G$H=G$q.keyframes,G$A=G$q.target;for(G$r in G$q.frames||(G$q.frames={}),G$q.keys?G$q.keys.length=0:G$q.keys=[],G$q.initValues||(G$q.initValues={}),G$H)G$v=G$H[G$r],G$q.frames[G$r]||(G$q.frames[G$r]=[]),this._targetDic&&this._targetDic[G$A]&&(G$q.initValues[G$r]=this._targetDic[G$A][G$r]),G$v.sort(G$y._sortIndexFun),G$q.keys.push(G$r),this._calculateNodePropFrames(G$v,G$q.frames[G$r],G$r,G$A)},G$r.resetToInitState=function(){if(this._targetDic&&this._animationData){var G$q,G$r,G$v=this._animationData.nodes,G$H=0,G$A=G$v.length;for(G$H=0;G$H<G$A;G$H++)if(G$r=(G$q=G$v[G$H]).initValues){var G$y,G$R=this._targetDic[G$q.target];if(G$R)for(G$y in G$r)G$R[G$y]=G$r[G$y]}}},G$r._calculateNodePropFrames=function(G$q,G$r,G$v,G$H){var G$A=0,G$y=G$q.length-1;if(0<G$y){for(G$r.length=G$q[G$y].index+1,G$A=0;G$A<G$y;G$A++)this._dealKeyFrame(G$q[G$A]),this._calculateFrameValues(G$q[G$A],G$q[G$A+1],G$r);this._dealKeyFrame(G$q[G$A])}0==G$y&&(G$r[G$q[0].index]=G$q[0].value,this._animationNewFrames&&(this._animationNewFrames[G$q[0].index]=!0))},G$r._dealKeyFrame=function(G$q){G$q.label&&""!=G$q.label&&this.addLabel(G$q.label,G$q.index)},G$r._calculateFrameValues=function(G$q,G$r,G$v){var G$H,G$A=0,G$y=G$q.index,G$R=G$r.index,G$W=G$q.value,G$O=G$r.value-G$q.value,G$N=G$R-G$y;if(G$R>this._count&&(this._count=G$R),G$q.tween)for(null==(G$H=G$_[G$q.tweenMethod])&&(G$H=G$_.linearNone),G$A=G$y;G$A<G$R;G$A++)G$v[G$A]=G$H(G$A-G$y,G$W,G$O,G$N),this._animationNewFrames&&(this._animationNewFrames[G$A]=!0);else for(G$A=G$y;G$A<G$R;G$A++)G$v[G$A]=G$W;this._animationNewFrames&&(this._animationNewFrames[G$q.index]=!0,this._animationNewFrames[G$r.index]=!0),G$v[G$r.index]=G$r.value},G$y._sortIndexFun=null,G$y}(G$gq)),G$Mq=function(G$r){function G$A(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",G$A.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=G$Xq.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}G$x(G$A,"laya.display.Input",G$r);var G$q=G$A.prototype;return G$q.setSelection=function(G$q,G$r){this.focus=!0,laya.display.Input.inputElement.selectionStart=G$q,laya.display.Input.inputElement.selectionEnd=G$r},G$q._onUnDisplay=function(G$q){this.focus=!1},G$q._onMouseDown=function(G$q){this.focus=!0},G$q._syncInputTransform=function(){var G$q=this.nativeInput,G$r=G$w.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),G$v=this._width-this.padding[1]-this.padding[3],G$H=this._height-this.padding[0]-this.padding[2];G$Y.isConchApp?(G$q.setScale(G$r.scaleX,G$r.scaleY),G$q.setSize(G$v,G$H),G$q.setPos(G$r.x,G$r.y)):(G$A.inputContainer.style.transform=G$A.inputContainer.style.webkitTransform="scale("+G$r.scaleX+","+G$r.scaleY+") rotate("+G$P.stage.canvasDegree+"deg)",G$q.style.width=G$v+"px",G$q.style.height=G$H+"px",G$A.inputContainer.style.left=G$r.x+"px",G$A.inputContainer.style.top=G$r.y+"px")},G$q.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},G$q._setInputMethod=function(){G$A.input.parentElement&&G$A.inputContainer.removeChild(G$A.input),G$A.area.parentElement&&G$A.inputContainer.removeChild(G$A.area),G$A.inputElement=this._multiline?G$A.area:G$A.input,G$A.inputContainer.appendChild(G$A.inputElement),G$Xq.RightToLeft&&(G$A.inputElement.style.direction="rtl")},G$q._focusIn=function(){laya.display.Input.isInputting=!0;var G$q=this.nativeInput;this._focus=!0;var G$r=G$q.style;G$r.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),G$q.readOnly=!this._editable,G$Y.isConchApp&&(G$q.setType(this._type),G$q.setForbidEdit(!this._editable)),G$q.maxLength=this._maxChars;this.padding;if(G$q.type=this._type,G$q.value=this._content,G$q.placeholder=this._prompt,G$P.stage.off("keydown",this,this._onKeyDown),G$P.stage.on("keydown",this,this._onKeyDown),(G$P.stage.focus=this).event("focus"),G$d.onPC&&G$q.focus(),!G$d.onMiniGame){this._text;this._text=null}this.typeset(),G$q.setColor(this._originColor),G$q.setFontSize(this.fontSize),G$q.setFontFace(G$d.onIPhone&&G$Xq._fontFamilyMap[this.font]||this.font),G$Y.isConchApp&&G$q.setMultiAble&&G$q.setMultiAble(this._multiline),G$r.lineHeight=this.leading+this.fontSize+"px",G$r.fontStyle=this.italic?"italic":"normal",G$r.fontWeight=this.bold?"bold":"normal",G$r.textAlign=this.align,G$r.padding="0 0",this._syncInputTransform(),!G$Y.isConchApp&&G$d.onPC&&G$P.timer.frameLoop(1,this,this._syncInputTransform)},G$q._setPromptColor=function(){(G$A.promptStyleDOM=G$d.getElementById("promptStyle"))||((G$A.promptStyleDOM=G$d.createElement("style")).setAttribute("id","promptStyle"),G$d.document.head.appendChild(G$A.promptStyleDOM)),G$A.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},G$q._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(G$P.superSet(G$Xq,this,"text",this._content),G$P.superSet(G$Xq,this,"color",this._originColor)):(G$P.superSet(G$Xq,this,"text",this._prompt),G$P.superSet(G$Xq,this,"color",this._promptColor)),G$P.stage.off("keydown",this,this._onKeyDown),G$P.stage.focus=null,this.event("blur"),G$Y.isConchApp&&this.nativeInput.blur(),G$d.onPC&&G$P.timer.clear(this,this._syncInputTransform)},G$q._onKeyDown=function(G$q){13===G$q.keyCode&&(G$d.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},G$q.changeText=function(G$q){this._content=G$q,this._focus?(this.nativeInput.value=G$q||"",this.event("change")):G$r.prototype.changeText.call(this,G$q)},G$D(0,G$q,"color",G$r.prototype._$get_color,function(G$q){this._focus&&this.nativeInput.setColor(G$q),G$P.superSet(G$Xq,this,"color",this._content?G$q:this._promptColor),this._originColor=G$q}),G$D(0,G$q,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(G$q){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),G$D(0,G$q,"multiline",function(){return this._multiline},function(G$q){this._multiline=G$q,this.valign=G$q?"top":"middle"}),G$D(0,G$q,"maxChars",function(){return this._maxChars},function(G$q){G$q<=0&&(G$q=1e5),this._maxChars=G$q}),G$D(0,G$q,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(G$q){G$P.superSet(G$Xq,this,"color",this._originColor),G$q+="",this._focus?(this.nativeInput.value=G$q||"",this.event("change")):(this._multiline||(G$q=G$q.replace(/\r?\n/g,"")),(this._content=G$q)?G$P.superSet(G$Xq,this,"text",G$q):(G$P.superSet(G$Xq,this,"text",this._prompt),G$P.superSet(G$Xq,this,"color",this.promptColor)))}),G$D(0,G$q,"nativeInput",function(){return this._multiline?G$A.area:G$A.input}),G$D(0,G$q,"prompt",function(){return this._prompt},function(G$q){!this._text&&G$q&&G$P.superSet(G$Xq,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?G$P.superSet(G$Xq,this,"text",this._text==this._prompt?G$q:this._text):G$P.superSet(G$Xq,this,"text",G$q),this._prompt=G$Xq.langPacks&&G$Xq.langPacks[G$q]?G$Xq.langPacks[G$q]:G$q}),G$D(0,G$q,"focus",function(){return this._focus},function(G$q){var G$r=this.nativeInput;this._focus!==G$q&&(G$q?(G$r.target?G$r.target._focusOut():this._setInputMethod(),(G$r.target=this)._focusIn()):(G$r.target=null,this._focusOut(),G$d.document.body.scrollTop=0,G$r.blur(),G$Y.isConchApp?G$r.setPos(-1e4,-1e4):G$A.inputContainer.contains(G$r)&&G$A.inputContainer.removeChild(G$r)))}),G$D(0,G$q,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(G$q){G$q?(-1<(G$q="[^"+G$q+"]").indexOf("^^")&&(G$q=G$q.replace("^^","")),this._restrictPattern=new RegExp(G$q,"g")):this._restrictPattern=null}),G$D(0,G$q,"editable",function(){return this._editable},function(G$q){this._editable=G$q,G$Y.isConchApp&&G$A.input.setForbidEdit(!G$q)}),G$D(0,G$q,"promptColor",function(){return this._promptColor},function(G$q){this._promptColor=G$q,this._content||G$P.superSet(G$Xq,this,"color",G$q)}),G$D(0,G$q,"type",function(){return this._type},function(G$q){this._getCSSStyle().password="password"==G$q,this._type=G$q,G$Y.isConchApp&&this.nativeInput.setType(G$q)}),G$D(0,G$q,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(G$q){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),G$D(0,G$q,"asPassword",function(){return this._getCSSStyle().password},function(G$q){this._getCSSStyle().password=G$q,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),G$A.__init__=function(){G$A._createInputElement(),G$d.onMobile&&G$Y.canvas.addEventListener(G$A.IOS_IFRAME?G$d.onMiniGame?"touchend":"click":"touchend",G$A._popupInputMethod)},G$A._popupInputMethod=function(G$q){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},G$A._createInputElement=function(){G$A._initInput(G$A.area=G$d.createElement("textarea")),G$A._initInput(G$A.input=G$d.createElement("input")),(G$A.inputContainer=G$d.createElement("div")).style.position="absolute",G$A.inputContainer.style.zIndex=1e5,G$d.container.appendChild(G$A.inputContainer),G$A.inputContainer.setPos=function(G$q,G$r){G$A.inputContainer.style.left=G$q+"px",G$A.inputContainer.style.top=G$r+"px"}},G$A._initInput=function(G$r){var G$q=G$r.style;G$q.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",G$q.resize="none",G$q.backgroundColor="transparent",G$q.border="none",G$q.outline="none",G$q.zIndex=1,G$r.addEventListener("input",G$A._processInputting),G$r.addEventListener("mousemove",G$A._stopEvent),G$r.addEventListener("mousedown",G$A._stopEvent),G$r.addEventListener("touchmove",G$A._stopEvent),G$r.setFontFace=function(G$q){G$r.style.fontFamily=G$q},G$Y.isConchApp||(G$r.setColor=function(G$q){G$r.style.color=G$q},G$r.setFontSize=function(G$q){G$r.style.fontSize=G$q+"px"})},G$A._processInputting=function(G$q){var G$r=laya.display.Input.inputElement.target;if(G$r){var G$v=laya.display.Input.inputElement.value;G$r._restrictPattern&&(G$v=G$v.replace(/\u2006|\x27/g,""),G$r._restrictPattern.test(G$v)&&(G$v=G$v.replace(G$r._restrictPattern,""),laya.display.Input.inputElement.value=G$v)),G$r._text=G$v,G$r.event("input")}},G$A._stopEvent=function(G$q){"touchmove"==G$q.type&&G$q.preventDefault(),G$q.stopPropagation&&G$q.stopPropagation()},G$A.TYPE_TEXT="text",G$A.TYPE_PASSWORD="password",G$A.TYPE_EMAIL="email",G$A.TYPE_URL="url",G$A.TYPE_NUMBER="number",G$A.TYPE_RANGE="range",G$A.TYPE_DATE="date",G$A.TYPE_MONTH="month",G$A.TYPE_WEEK="week",G$A.TYPE_TIME="time",G$A.TYPE_DATE_TIME="datetime",G$A.TYPE_DATE_TIME_LOCAL="datetime-local",G$A.TYPE_SEARCH="search",G$A.input=null,G$A.area=null,G$A.inputElement=null,G$A.inputContainer=null,G$A.confirmButton=null,G$A.promptStyleDOM=null,G$A.inputHeight=45,G$A.isInputting=!1,G$A.stageMatrix=null,G$O(G$A,["IOS_IFRAME",function(){return this.IOS_IFRAME=G$d.onIOS&&G$d.window.top!=G$d.window.self}]),G$A}(G$Xq),G$zq=function(G$q){function G$v(G$q,G$r){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,G$v.__super.call(this),G$q&&this._init_(G$q,G$r)}G$x(G$v,"laya.resource.HTMLImage",G$Bq);var G$r=G$v.prototype;return G$r._init_=function(G$q,G$r){this._src=G$q,this._source=new G$d.window.Image,G$r&&(G$r.onload&&(this.onload=G$r.onload),G$r.onerror&&(this.onerror=G$r.onerror),G$r.onCreate&&G$r.onCreate(this)),0!=G$q.indexOf("data:image")&&(this._source.crossOrigin=""),G$q&&(this._source.src=G$q)},G$r.recreateResource=function(){var G$q=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var G$r=this;this._source=new G$d.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(G$r._needReleaseAgain)return G$r._needReleaseAgain=!1,G$r._source.onload=null,void(G$r._source=null);G$r._source.onload=null,G$r.memorySize=G$q._w*G$q._h*4,G$r._recreateLock=!1,G$r.completeCreate()},this._source.src=this._src}},G$r.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},G$r.onresize=function(){this._w=this._source.width,this._h=this._source.height},G$D(0,G$r,"onload",null,function(G$q){var G$r=this;this._onload=G$q,this._source&&(this._source.onload=null!=this._onload?function(){G$r.onresize(),G$r._onload()}:null)}),G$D(0,G$r,"onerror",null,function(G$q){var G$r=this;this._onerror=G$q,this._source&&(this._source.onerror=null!=this._onerror?function(){G$r._onerror()}:null)}),G$D(0,G$r,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(G$q){this._enableMerageInAtlas=G$q,G$Y.isConchApp&&this._source&&(this._source.enableMerageInAtlas=G$q)}),G$v.create=function(G$q,G$r){return new G$v(G$q,G$r)},G$v}(),G$Pq=(function(G$y){function G$q(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,G$q.__super.call(this)}G$x(G$q,"laya.display.EffectAnimation",G$y);var G$r=G$q.prototype;G$r._onOtherBegin=function(G$q){G$q!=this&&this.stop()},G$r.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},G$r._onPlayAction=function(){this.play(0,!1)},G$r.play=function(G$q,G$r,G$v,G$H){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=!0),void 0===G$v&&(G$v=""),void 0===G$H&&(G$H=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,G$q,G$r,G$v,G$H))},G$r._recordInitData=function(){if(this._aniKeys){var G$q,G$r,G$v=0;for(G$q=this._aniKeys.length,G$v=0;G$v<G$q;G$v++)G$r=this._aniKeys[G$v],this._initData[G$r]=this._target[G$r]}},G$r._displayToIndex=function(G$q){if(this._animationData){G$q<0&&(G$q=0),G$q>this._count&&(G$q=this._count);var G$r=this._animationData.nodes,G$v=0,G$H=G$r.length;for(G$H=1<G$H?1:G$H,G$v=0;G$v<G$H;G$v++)this._displayNodeToFrame(G$r[G$v],G$q)}},G$r._displayNodeToFrame=function(G$q,G$r,G$v){if(this._target){var G$H;G$H=this._target;var G$A,G$y,G$R,G$W,G$O=G$q.frames,G$N=G$q.keys,G$x=0,G$K=G$N.length;G$W=G$q.secondFrames;var G$T,G$j,G$D,G$g,G$X=0;for(G$x=0;G$x<G$K;G$x++)G$y=G$O[G$A=G$N[G$x]],G$R=-1==(G$X=G$W[G$A])?this._initData[G$A]:G$r<G$X?(G$D=(G$j=G$q.keyframes[G$A])[0]).tween?(null==(G$T=G$_[G$D.tweenMethod])&&(G$T=G$_.linearNone),G$g=G$j[1],G$T(G$r,this._initData[G$A],G$g.value-this._initData[G$A],G$g.index)):this._initData[G$A]:G$y.length>G$r?G$y[G$r]:G$y[G$y.length-1],G$H[G$A]=G$R}},G$r._calculateNodeKeyFrames=function(G$q){G$y.prototype._calculateNodeKeyFrames.call(this,G$q);var G$r,G$v,G$H,G$A=G$q.keyframes;G$q.target;for(G$r in G$H={},G$q.secondFrames=G$H,G$A)(G$v=G$A[G$r]).length<=1?G$H[G$r]=-1:G$H[G$r]=G$v[1].index},G$D(0,G$r,"target",function(){return this._target},function(G$q){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=G$q,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),G$D(0,G$r,"playEvent",null,function(G$q){(this._playEvents=G$q)&&this.addEvent()}),G$D(0,G$r,"effectData",null,function(G$q){var G$r;G$q&&((G$r=G$q.animations)&&G$r[0]&&(this._setUp({},G$r[0]),G$r[0].nodes&&G$r[0].nodes[0]&&(this._aniKeys=G$r[0].nodes[0].keys)))}),G$D(0,G$r,"effectClass",null,function(G$q){var G$r,G$v;(this._effectClass=G$t.getClass(G$q),this._effectClass)&&((G$r=this._effectClass.uiView)&&(G$v=G$r.animations)&&G$v[0]&&(this._setUp({},G$v[0]),G$v[0].nodes&&G$v[0].nodes[0]&&(this._aniKeys=G$v[0].nodes[0].keys)))}),G$q.EffectAnimationBegin="effectanimationbegin"}(G$pq),function(G$r){var G$$;function G$G(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,G$G.__super.call(this)}G$x(G$G,"laya.utils.GraphicAnimation",G$r);var G$q=G$G.prototype;return G$q._parseNodeList=function(G$q){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[G$q.compId]=G$q.props,G$q.compId&&this._nodeList.push(G$q.compId);var G$r=G$q.child;if(G$r){var G$v=0,G$H=G$r.length;for(G$v=0;G$v<G$H;G$v++)this._parseNodeList(G$r[G$v])}},G$q._calGraphicData=function(G$q){var G$r;if(this._setUp(null,G$q),this._createGraphicData(),this._nodeIDAniDic)for(G$r in this._nodeIDAniDic)this._nodeIDAniDic[G$r]=null},G$q._createGraphicData=function(){var G$q,G$r=[],G$v=0,G$H=this.count,G$A=this._animationNewFrames;for(G$A||(G$A=[]),G$v=0;G$v<G$H;G$v++)!G$A[G$v]&&G$q||(G$q=this._createFrameGraphic(G$v)),G$r.push(G$q);this._gList=G$r},G$q._createFrameGraphic=function(G$q){var G$r=G$E.createGraphics();return G$G._rootMatrix||(G$G._rootMatrix=new G$Q),this._updateNodeGraphic(this._rootNode,G$q,G$G._rootMatrix,G$r),G$r},G$q._updateNodeGraphic=function(G$q,G$r,G$v,G$H,G$A){var G$y;void 0===G$A&&(G$A=1);var G$R,G$W,G$O,G$N=(G$y=this._nodeGDic[G$q.compId]=this._getNodeGraphicData(G$q.compId,G$r,this._nodeGDic[G$q.compId])).alpha*G$A;if(!(G$N<.01)&&(G$y.resultTransform||(G$y.resultTransform=G$Q.create()),G$R=G$y.resultTransform,G$Q.mul(G$y.transform,G$v,G$R),G$y.skin&&(G$W=this._getTextureByUrl(G$y.skin))&&(G$R._checkTransform()?(G$H.drawTexture(G$W,0,0,G$y.width,G$y.height,G$R,G$N),G$y.resultTransform=null):G$H.drawTexture(G$W,G$R.tx,G$R.ty,G$y.width,G$y.height,null,G$N)),G$O=G$q.child)){var G$x,G$K=0;for(G$x=G$O.length,G$K=0;G$K<G$x;G$K++)this._updateNodeGraphic(G$O[G$K],G$r,G$R,G$H,G$N)}},G$q._updateNoChilds=function(G$q,G$r){if(G$q.skin){var G$v=this._getTextureByUrl(G$q.skin);if(G$v){var G$H=G$q.transform;G$H._checkTransform();!G$H.bTransform?G$r.drawTexture(G$v,G$H.tx,G$H.ty,G$q.width,G$q.height,null,G$q.alpha):G$r.drawTexture(G$v,0,0,G$q.width,G$q.height,G$H.clone(),G$q.alpha)}}},G$q._updateNodeGraphic2=function(G$q,G$r,G$v){var G$H;if(G$H=this._nodeGDic[G$q.compId]=this._getNodeGraphicData(G$q.compId,G$r,this._nodeGDic[G$q.compId]),G$q.child){var G$A=G$H.transform;G$A._checkTransform();var G$y,G$R;G$R=(G$y=!G$A.bTransform)&&(0!=G$A.tx||0!=G$A.ty);var G$W,G$O,G$N;if((G$W=G$A.bTransform||1!=G$H.alpha)&&G$v.save(),1!=G$H.alpha&&G$v.alpha(G$H.alpha),G$y?G$R&&G$v.translate(G$A.tx,G$A.ty):G$v.transform(G$A.clone()),G$O=G$q.child,G$H.skin&&(G$N=this._getTextureByUrl(G$H.skin))&&G$v.drawTexture(G$N,0,0,G$H.width,G$H.height),G$O){var G$x,G$K=0;for(G$x=G$O.length,G$K=0;G$K<G$x;G$K++)this._updateNodeGraphic2(G$O[G$K],G$r,G$v)}G$W?G$v.restore():G$y?G$R&&G$v.translate(-G$A.tx,-G$A.ty):G$v.transform(G$A.clone().invert())}else this._updateNoChilds(G$H,G$v)},G$q._calculateNodeKeyFrames=function(G$q){G$r.prototype._calculateNodeKeyFrames.call(this,G$q),this._nodeIDAniDic[G$q.target]=G$q},G$q.getNodeDataByID=function(G$q){return this._nodeIDAniDic[G$q]},G$q._getParams=function(G$q,G$r,G$v,G$H){var G$A=G$G._temParam;G$A.length=G$r.length;var G$y=0,G$R=G$r.length;for(G$y=0;G$y<G$R;G$y++)G$A[G$y]=this._getObjVar(G$q,G$r[G$y][0],G$v,G$r[G$y][1],G$H);return G$A},G$q._getObjVar=function(G$q,G$r,G$v,G$H,G$A){if(G$q.hasOwnProperty(G$r)){var G$y=G$q[G$r];if(G$v>=G$y.length&&(G$v=G$y.length-1),null!=G$q[G$r][G$v])return G$q[G$r][G$v]}return G$A.hasOwnProperty(G$r)?G$A[G$r]:G$H},G$q._getNodeGraphicData=function(G$q,G$r,G$v){G$v||(G$v=G$$.create()),G$v.transform?G$v.transform.identity():G$v.transform=G$Q.create();var G$H=this.getNodeDataByID(G$q);if(!G$H)return G$v;var G$A,G$y,G$R=G$H.frames,G$W=this._getParams(G$R,G$G._drawTextureCmd,G$r,this._nodeDefaultProps[G$q]),G$O=G$W[0],G$N=NaN,G$x=NaN,G$K=G$W[5],G$T=G$W[6],G$j=G$W[13],G$D=G$W[14],G$g=G$W[7],G$X=G$W[8],G$m=G$W[9],G$B=G$W[11],G$e=G$W[12];G$N=G$W[3],G$x=G$W[4],0!=G$N&&0!=G$x||(G$O=null),-1==G$N&&(G$N=0),-1==G$x&&(G$x=0),G$v.skin=G$O,G$v.width=G$N,G$v.height=G$x,G$O&&((G$A=this._getTextureByUrl(G$O))?(G$N||(G$N=G$A.sourceWidth),G$x||(G$x=G$A.sourceHeight)):console.warn("lost skin:",G$O,",you may load pics first")),G$v.alpha=G$W[10],G$y=G$v.transform,0!=G$j&&(G$K=G$j*G$N),0!=G$D&&(G$T=G$D*G$x),0==G$K&&0==G$T||G$y.translate(-G$K,-G$T);var G$p=null;if(G$m||1!==G$g||1!==G$X||G$B||G$e){(G$p=G$G._tempMt).identity(),G$p.bTransform=!0;var G$M=.0174532922222222*(G$m-G$B),G$z=.0174532922222222*(G$m+G$e),G$P=Math.cos(G$z),G$V=Math.sin(G$z),G$a=Math.sin(G$M),G$J=Math.cos(G$M);G$p.a=G$g*G$P,G$p.b=G$g*G$V,G$p.c=-G$X*G$a,G$p.d=G$X*G$J,G$p.tx=G$p.ty=0}return G$p&&(G$y=G$Q.mul(G$y,G$p,G$y)),G$y.translate(G$W[1],G$W[2]),G$v},G$q._getTextureByUrl=function(G$q){return G$Wq.getRes(G$q)},G$q.setAniData=function(G$q,G$r){if(G$q.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=G$q,this._parseNodeList(G$q);var G$v,G$H={},G$A=[],G$y=G$q.animations,G$R=0,G$W=G$y.length;for(G$R=0;G$R<G$W;G$R++)if(G$v=G$y[G$R],this._labels=null,(!G$r||G$r==G$v.name)&&G$v){try{this._calGraphicData(G$v)}catch(G$q){console.warn("parse animation fail:"+G$v.name+",empty animation created"),this._gList=[]}var G$O={};G$O.interval=1e3/G$v.frameRate,G$O.frames=this._gList,G$O.labels=this._labels,G$O.name=G$v.name,G$A.push(G$O),G$H[G$v.name]=G$O}this.animationList=G$A,this.animationDic=G$H}G$G._temParam.length=0},G$q.parseByData=function(G$q){var G$r,G$v;G$r=G$q.nodeRoot,G$v=G$q.aniO,delete G$q.nodeRoot,delete G$q.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=G$r,this._parseNodeList(G$r),this._labels=null;try{this._calGraphicData(G$v)}catch(G$q){console.warn("parse animation fail:"+G$v.name+",empty animation created"),this._gList=[]}var G$H=G$q;return G$H.interval=1e3/G$v.frameRate,G$H.frames=this._gList,G$H.labels=this._labels,G$H.name=G$v.name,G$H},G$q.setUpAniData=function(G$q){if(G$q.animations){var G$r,G$v={},G$H=[],G$A=G$q.animations,G$y=0,G$R=G$A.length;for(G$y=0;G$y<G$R;G$y++)if(G$r=G$A[G$y]){var G$W={};G$W.name=G$r.name,G$W.aniO=G$r,G$W.nodeRoot=G$q,G$H.push(G$W),G$v[G$r.name]=G$W}this.animationList=G$H,this.animationDic=G$v}},G$q._clear=function(){var G$q,G$r;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(G$q in this._nodeGDic)(G$r=this._nodeGDic[G$q])&&G$r.recover();this._nodeGDic=null},G$G.parseAnimationByData=function(G$q){var G$r;return G$G._I||(G$G._I=new G$G),G$r=G$G._I.parseByData(G$q),G$G._I._clear(),G$r},G$G.parseAnimationData=function(G$q){var G$r;return G$G._I||(G$G._I=new G$G),G$G._I.setUpAniData(G$q),(G$r={}).animationList=G$G._I.animationList,G$r.animationDic=G$G._I.animationDic,G$G._I._clear(),G$r},G$G._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],G$G._temParam=[],G$G._I=null,G$G._rootMatrix=null,G$O(G$G,["_tempMt",function(){return this._tempMt=new G$Q}]),G$G.__init$=function(){G$$=function(){function G$q(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return G$x(G$q,""),G$q.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),G$S.recover("GraphicNode",this)},G$q.create=function(){return G$S.getItemByClass("GraphicNode",G$q)},G$q}()},G$G}(G$pq));G$P.__init([G$N,G$Oq,G$Y,G$d,G$L,G$J,G$q,G$Pq])}(window,document,Laya),function(G$q,G$r,G$v){G$v.un,G$v.uns,G$v.static;var G$H=G$v.class;G$v.getset,G$v.__newvec;new(function(){function G$q(){}return G$H(G$q,"LayaMain"),G$q}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$q,G$r){"use strict";for(var G$v in Object.defineProperty(G$r,"__esModule",{value:!0}),Laya){var G$H=Laya[G$v];G$H&&G$H.__isclass&&(G$r[G$v]=G$H)}}),function(G$A,G$q,G$z){G$z.un,G$z.uns;var G$R=G$z.static,G$T=G$z.class,G$H=G$z.getset,G$y=G$z.__newvec,G$x=laya.maths.Arith,G$K=laya.maths.Bezier,G$v=laya.resource.Bitmap,G$j=laya.utils.Browser,G$O=laya.utils.Byte,G$D=laya.utils.Color,G$P=(laya.filters.ColorFilter,G$z.Config),G$W=laya.resource.Context,G$V=(laya.events.Event,laya.filters.Filter),G$N=laya.display.Graphics,G$g=laya.resource.HTMLCanvas,G$X=(laya.utils.HTMLChar,laya.resource.HTMLImage),G$r=laya.resource.HTMLSubImage,G$a=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),G$J=laya.maths.Point,G$$=laya.maths.Rectangle,G$m=laya.renders.Render,G$B=(laya.renders.RenderContext,laya.renders.RenderSprite),G$e=laya.resource.Resource,G$p=laya.resource.ResourceManager,G$M=laya.utils.RunDriver,G$G=laya.display.Sprite,G$E=laya.display.Stage,G$Q=laya.utils.Stat,G$s=laya.utils.StringKey,G$Z=(laya.display.css.Style,laya.system.System),G$Y=laya.display.Text,G$o=laya.resource.Texture,G$C=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),G$c=laya.utils.VectorGraphManager;laya.utils.WordText;G$z.interface("laya.webgl.shapes.IShape"),G$z.interface("laya.webgl.submit.ISubmit"),G$z.interface("laya.webgl.text.ICharSegment"),G$z.interface("laya.webgl.canvas.save.ISaveData"),G$z.interface("laya.webgl.resource.IMergeAtlasBitmap"),G$z.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var G$b=function(){function G$q(){}G$T(G$q,"laya.filters.webgl.FilterActionGL");var G$r=G$q.prototype;return G$z.imps(G$r,{"laya.filters.IFilterActionGL":!0}),G$r.setValue=function(G$q){},G$r.setValueMix=function(G$q){},G$r.apply3d=function(G$q,G$r,G$v,G$H,G$A){return null},G$r.apply=function(G$q){return null},G$H(0,G$r,"typeMix",function(){return 0}),G$q}(),G$d=function(){function G$q(){}return G$T(G$q,"laya.webgl.shader.ShaderValue"),G$q}(),G$u=function(){var G$H,G$A;function G$q(G$q,G$r,G$v){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new G$A,void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),this._cells=null,this._rowInfo=null,this._init(G$q,G$r),this._atlasID=G$v}G$T(G$q,"laya.webgl.atlas.AtlasGrid");var G$r=G$q.prototype;return G$r.getAltasID=function(){return this._atlasID},G$r.setAltasID=function(G$q){0<=G$q&&(this._atlasID=G$q)},G$r.addTex=function(G$q,G$r,G$v){var G$H=this._get(G$r,G$v);return 0==G$H.ret||(this._fill(G$H.x,G$H.y,G$r,G$v,G$q),this._texCount++),G$H},G$r._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},G$r._init=function(G$q,G$r){if(this._width=G$q,this._height=G$r,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=G$y(this._height);for(var G$v=0;G$v<this._height;G$v++)this._rowInfo[G$v]=new G$H;return this._clear(),!0},G$r._get=function(G$q,G$r){var G$v=new G$t;if(G$q>=this._failSize.width&&G$r>=this._failSize.height)return G$v;for(var G$H=-1,G$A=-1,G$y=this._width,G$R=this._height,G$W=this._cells,G$O=0;G$O<G$R;G$O++)if(!(this._rowInfo[G$O].spaceCount<G$q))for(var G$N=0;G$N<G$y;){var G$x=3*(G$O*G$y+G$N);if(0!=G$W[G$x]||G$W[1+G$x]<G$q||G$W[2+G$x]<G$r)G$N+=G$W[1+G$x];else{G$H=G$N,G$A=G$O;for(var G$K=0;G$K<G$q;G$K++)if(G$W[3*G$K+G$x+2]<G$r){G$H=-1;break}if(!(G$H<0))return G$v.ret=!0,G$v.x=G$H,G$v.y=G$A,G$v;G$N+=G$W[1+G$x]}}return G$v},G$r._fill=function(G$q,G$r,G$v,G$H,G$A){var G$y=this._width,G$R=this._height;this._check(G$q+G$v<=G$y&&G$r+G$H<=G$R);for(var G$W=G$r;G$W<G$H+G$r;++G$W){this._check(this._rowInfo[G$W].spaceCount>=G$v),this._rowInfo[G$W].spaceCount-=G$v;for(var G$O=0;G$O<G$v;G$O++){var G$N=3*(G$q+G$W*G$y+G$O);this._check(0==this._cells[G$N]),this._cells[G$N]=G$A,this._cells[1+G$N]=G$v,this._cells[2+G$N]=G$H}}if(0<G$q)for(G$W=0;G$W<G$H;++G$W){var G$x=0;for(G$O=G$q-1;0<=G$O&&0==this._cells[3*((G$r+G$W)*G$y+G$O)];--G$O,++G$x);for(G$O=G$x;0<G$O;--G$O)this._cells[3*((G$r+G$W)*G$y+G$q-G$O)+1]=G$O,this._check(0<G$O)}if(0<G$r)for(G$O=G$q;G$O<G$q+G$v;++G$O){for(G$x=0,G$W=G$r-1;0<=G$W&&0==this._cells[3*(G$O+G$W*G$y)];--G$W,G$x++);for(G$W=G$x;0<G$W;--G$W)this._cells[3*(G$O+(G$r-G$W)*G$y)+2]=G$W,this._check(0<G$W)}},G$r._check=function(G$q){0==G$q&&console.log("xtexMerger 错误啦")},G$r._clear=function(){for(var G$q=this._texCount=0;G$q<this._height;G$q++)this._rowInfo[G$q].spaceCount=this._width;for(var G$r=0;G$r<this._height;G$r++)for(var G$v=0;G$v<this._width;G$v++){var G$H=3*(G$r*this._width+G$v);this._cells[G$H]=0,this._cells[1+G$H]=this._width-G$v,this._cells[2+G$H]=this._width-G$r}this._failSize.width=this._width+1,this._failSize.height=this._height+1},G$q.__init$=function(){G$H=function(){function G$q(){this.spaceCount=0}return G$T(G$q,""),G$q}(),G$A=function(){function G$q(){this.width=0,this.height=0}return G$T(G$q,""),G$q}()},G$q}(),G$I=function(){function G$m(G$q,G$r,G$v,G$H){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=G$q,this._height=G$r,this._gridSize=G$v,this._maxAtlaserCount=G$H,this._gridNumX=G$q/G$v,this._gridNumY=G$r/G$v,this._curAtlasIndex=0,this._atlaserArray=[]}G$T(G$m,"laya.webgl.atlas.AtlasResourceManager");var G$q=G$m.prototype;return G$q.setAtlasParam=function(G$q,G$r,G$v,G$H){if(1==this._setAtlasParam)return G$m._sid_=0,this._width=G$q,this._height=G$r,this._gridSize=G$v,this._maxAtlaserCount=G$H,this._gridNumX=G$q/G$v,this._gridNumY=G$r/G$v,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},G$q.pushData=function(G$q){var G$r,G$v=G$q.bitmap,G$H=-1,G$A=null,G$y=0,G$R=0;for(G$y=0,G$r=this._atlaserArray.length;G$y<G$r&&(G$R=(this._curAtlasIndex+G$y)%G$r,-1==(G$H=(G$A=this._atlaserArray[G$R]).findBitmapIsExist(G$v)));G$y++);if(-1!=G$H){var G$W=G$A.InAtlasWebGLImagesOffsetValue[G$H];return G$D=G$W[0],G$g=G$W[1],G$A.addToAtlas(G$q,G$D,G$g),!0}this._setAtlasParam=!1;for(var G$O=Math.ceil((G$q.bitmap.width+2)/this._gridSize),G$N=Math.ceil((G$q.bitmap.height+2)/this._gridSize),G$x=!1,G$K=0;G$K<2;G$K++){var G$T=this._maxAtlaserCount;for(G$y=0;G$y<G$T;G$y++){G$R=(this._curAtlasIndex+G$y)%G$T,this._atlaserArray.length-1>=G$R||this._atlaserArray.push(new G$$q(this._gridNumX,this._gridNumY,this._width,this._height,G$m._sid_++));var G$j=this._atlaserArray[G$R],G$D=0,G$g=0,G$X=G$j.addTex(1,G$O,G$N);if(G$X.ret){G$D=G$X.x*this._gridSize+1,G$g=G$X.y*this._gridSize+1,G$v.lock=!0,G$j.addToAtlasTexture(G$v,G$D,G$g),G$j.addToAtlas(G$q,G$D,G$g),G$x=!0,this._curAtlasIndex=G$R;break}}if(G$x)break;this._atlaserArray.push(new G$$q(this._gridNumX,this._gridNumY,this._width,this._height,G$m._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return G$x||console.log(">>>AtlasManager pushData error"),G$x},G$q.addToAtlas=function(G$q){laya.webgl.atlas.AtlasResourceManager.instance.pushData(G$q)},G$q.garbageCollection=function(){if(!0===this._needGC){for(var G$q=this._atlaserArray.length-this._maxAtlaserCount,G$r=0;G$r<G$q;G$r++)this._atlaserArray[G$r].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+G$q),this._atlaserArray.splice(0,G$q),this._needGC=!1}return!0},G$q.freeAll=function(){for(var G$q=0,G$r=this._atlaserArray.length;G$q<G$r;G$q++)this._atlaserArray[G$q].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},G$q.getAtlaserCount=function(){return this._atlaserArray.length},G$q.getAtlaserByIndex=function(G$q){return this._atlaserArray[G$q]},G$H(1,G$m,"instance",function(){return G$m._Instance||(G$m._Instance=new G$m(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),G$m._Instance}),G$H(1,G$m,"enabled",function(){return G$P.atlasEnable}),G$H(1,G$m,"atlasLimitWidth",function(){return G$m._atlasLimitWidth},function(G$q){G$m._atlasLimitWidth=G$q}),G$H(1,G$m,"atlasLimitHeight",function(){return G$m._atlasLimitHeight},function(G$q){G$m._atlasLimitHeight=G$q}),G$m._enable=function(){G$P.atlasEnable=!0},G$m._disable=function(){G$P.atlasEnable=!1},G$m.__init__=function(){G$m.atlasTextureWidth=2048,G$m.atlasTextureHeight=2048,G$m.maxTextureCount=6,G$m.atlasLimitWidth=512,G$m.atlasLimitHeight=512},G$m._atlasLimitWidth=0,G$m._atlasLimitHeight=0,G$m.gridSize=16,G$m.atlasTextureWidth=0,G$m.atlasTextureHeight=0,G$m.maxTextureCount=0,G$m._atlasRestore=0,G$m.BOARDER_TYPE_NO=0,G$m.BOARDER_TYPE_RIGHT=1,G$m.BOARDER_TYPE_LEFT=2,G$m.BOARDER_TYPE_BOTTOM=4,G$m.BOARDER_TYPE_TOP=8,G$m.BOARDER_TYPE_ALL=15,G$m._sid_=0,G$m._Instance=null,G$m}(),G$t=function(){function G$q(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return G$T(G$q,"laya.webgl.atlas.MergeFillInfo"),G$q}(),G$F=function(){function G$r(){}return G$T(G$r,"laya.webgl.canvas.BlendMode"),G$r._init_=function(G$q){G$r.fns=[G$r.BlendNormal,G$r.BlendAdd,G$r.BlendMultiply,G$r.BlendScreen,G$r.BlendOverlay,G$r.BlendLight,G$r.BlendMask,G$r.BlendDestinationOut],G$r.targetFns=[G$r.BlendNormalTarget,G$r.BlendAddTarget,G$r.BlendMultiplyTarget,G$r.BlendScreenTarget,G$r.BlendOverlayTarget,G$r.BlendLightTarget,G$r.BlendMask,G$r.BlendDestinationOut]},G$r.BlendNormal=function(G$q){G$q.blendFunc(1,771)},G$r.BlendAdd=function(G$q){G$q.blendFunc(1,772)},G$r.BlendMultiply=function(G$q){G$q.blendFunc(774,771)},G$r.BlendScreen=function(G$q){G$q.blendFunc(1,1)},G$r.BlendOverlay=function(G$q){G$q.blendFunc(1,769)},G$r.BlendLight=function(G$q){G$q.blendFunc(1,1)},G$r.BlendNormalTarget=function(G$q){G$q.blendFunc(1,771)},G$r.BlendAddTarget=function(G$q){G$q.blendFunc(1,772)},G$r.BlendMultiplyTarget=function(G$q){G$q.blendFunc(774,771)},G$r.BlendScreenTarget=function(G$q){G$q.blendFunc(1,1)},G$r.BlendOverlayTarget=function(G$q){G$q.blendFunc(1,769)},G$r.BlendLightTarget=function(G$q){G$q.blendFunc(1,1)},G$r.BlendMask=function(G$q){G$q.blendFunc(0,770)},G$r.BlendDestinationOut=function(G$q){G$q.blendFunc(0,0)},G$r.activeBlendFunction=null,G$r.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],G$r.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},G$r.NORMAL="normal",G$r.ADD="add",G$r.MULTIPLY="multiply",G$r.SCREEN="screen",G$r.LIGHT="light",G$r.OVERLAY="overlay",G$r.DESTINATIONOUT="destination-out",G$r.fns=[],G$r.targetFns=[],G$r}(),G$U=function(){function G$v(G$q){this._color=G$D.create("black"),this.setValue(G$q)}G$T(G$v,"laya.webgl.canvas.DrawStyle");var G$q=G$v.prototype;return G$q.setValue=function(G$q){if(G$q){if("string"==typeof G$q)return void(this._color=G$D.create(G$q));if(G$q instanceof laya.utils.Color)return void(this._color=G$q)}},G$q.reset=function(){this._color=G$D.create("black")},G$q.equal=function(G$q){return"string"==typeof G$q?this._color.strColor===G$q:G$q instanceof laya.utils.Color&&this._color.numColor===G$q.numColor},G$q.toColorStr=function(){return this._color.strColor},G$v.create=function(G$q){var G$r;if(G$q&&("string"==typeof G$q?G$r=G$D.create(G$q):G$q instanceof laya.utils.Color&&(G$r=G$q),G$r))return G$r._drawStyle||(G$r._drawStyle=new G$v(G$q));return laya.webgl.canvas.DrawStyle.DEFAULT},G$R(G$v,["DEFAULT",function(){return this.DEFAULT=new G$v("#000000")}]),G$v}(),G$_=function(){function G$q(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];G$pq.mainContext;this.ib=G$nq.create(35048),this.vb=G$kq.create(5)}G$T(G$q,"laya.webgl.canvas.Path");var G$r=G$q.prototype;return G$r.addPoint=function(G$q,G$r){this.tempArray.push(G$q,G$r)},G$r.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},G$r.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},G$r.polygon=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R;return this.geomatrys.push(this._curGeomatry=G$R=new G$sq(G$q,G$r,G$v,G$H,G$A,G$y)),G$H||(G$R.fill=!1),null==G$y&&(G$R.borderWidth=0),G$R},G$r.setGeomtry=function(G$q){this.geomatrys.push(this._curGeomatry=G$q)},G$r.drawLine=function(G$q,G$r,G$v,G$H,G$A){var G$y;return this.closePath?this.geomatrys.push(this._curGeomatry=G$y=new G$Qq(G$q,G$r,G$v,G$H,G$A)):this.geomatrys.push(this._curGeomatry=G$y=new G$Eq(G$q,G$r,G$v,G$H,G$A)),G$y.fill=!1,G$y},G$r.update=function(){var G$q=this.ib._byteLength,G$r=this.geomatrys.length;this.offset=G$q;for(var G$v=this.geoStart;G$v<G$r;G$v++)this.geomatrys[G$v].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=G$r,this.count=(this.ib._byteLength-G$q)/G$gq.BYTES_PIDX},G$r.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},G$r.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},G$q}(),G$f=function(){function G$W(){}G$T(G$W,"laya.webgl.canvas.save.SaveBase");var G$q=G$W.prototype;return G$z.imps(G$q,{"laya.webgl.canvas.save.ISaveData":!0}),G$q.isSaveMark=function(){return!1},G$q.restore=function(G$q){this._dataObj[this._valueName]=this._value,(G$W._cache[G$W._cache._length++]=this)._newSubmit&&(G$q._curSubmit=G$yq.RENDERBASE,G$q._renderKey=0)},G$W._createArray=function(){var G$q=[];return G$q._length=0,G$q},G$W._init=function(){var G$q=G$W._namemap={};return G$q[1]="ALPHA",G$q[2]="fillStyle",G$q[8]="font",G$q[256]="lineWidth",G$q[512]="strokeStyle",G$q[8192]="_mergeID",G$q[1024]=G$q[2048]=G$q[4096]=[],G$q[16384]="textBaseline",G$q[32768]="textAlign",G$q[65536]="_nBlendType",G$q[1048576]="shader",G$q[2097152]="filters",G$q},G$W.save=function(G$q,G$r,G$v,G$H){if((G$q._saveMark._saveuse&G$r)!==G$r){G$q._saveMark._saveuse|=G$r;var G$A=G$W._cache,G$y=0<G$A._length?G$A[--G$A._length]:new G$W;G$y._value=G$v[G$y._valueName=G$W._namemap[G$r]],G$y._dataObj=G$v,G$y._newSubmit=G$H;var G$R=G$q._save;G$R[G$R._length++]=G$y}},G$W._cache=laya.webgl.canvas.save.SaveBase._createArray(),G$W._namemap=G$W._init(),G$W}(),G$S=function(){function G$y(){this._clipRect=new G$$}G$T(G$y,"laya.webgl.canvas.save.SaveClipRect");var G$q=G$y.prototype;return G$z.imps(G$q,{"laya.webgl.canvas.save.ISaveData":!0}),G$q.isSaveMark=function(){return!1},G$q.restore=function(G$q){G$q._clipRect=this._clipSaveRect,(G$y._cache[G$y._cache._length++]=this)._submitScissor.submitLength=G$q._submits._length-this._submitScissor.submitIndex,G$q._curSubmit=G$yq.RENDERBASE,G$q._renderKey=0},G$y.save=function(G$q,G$r){if(131072!=(131072&G$q._saveMark._saveuse)){G$q._saveMark._saveuse|=131072;var G$v=G$y._cache,G$H=0<G$v._length?G$v[--G$v._length]:new G$y;G$H._clipSaveRect=G$q._clipRect,G$q._clipRect=G$H._clipRect.copyFrom(G$q._clipRect),G$H._submitScissor=G$r;var G$A=G$q._save;G$A[G$A._length++]=G$H}},G$R(G$y,["_cache",function(){return this._cache=G$f._createArray()}]),G$y}(),G$l=function(){function G$j(){this._contextX=0,this._contextY=0,this._clipRect=new G$$,this._rect=new G$$,this._matrix=new G$a}G$T(G$j,"laya.webgl.canvas.save.SaveClipRectStencil");var G$q=G$j.prototype;return G$z.imps(G$q,{"laya.webgl.canvas.save.ISaveData":!0}),G$q.isSaveMark=function(){return!1},G$q.restore=function(G$q){G$xq.restore(G$q,this._rect,this._saveMatrix,this._contextX,this._contextY),G$q._clipRect=this._clipSaveRect,G$q._curMat=this._saveMatrix,G$q._x=this._contextX,G$q._y=this._contextY,G$j._cache[G$j._cache._length++]=this,G$q._curSubmit=G$yq.RENDERBASE},G$j.save=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){if(262144!=(262144&G$q._saveMark._saveuse)){G$q._saveMark._saveuse|=262144;var G$x=G$j._cache,G$K=0<G$x._length?G$x[--G$x._length]:new G$j;G$K._clipSaveRect=G$q._clipRect,G$K._clipRect.setTo(G$R,G$W,G$O,G$N),G$q._clipRect=G$K._clipRect,G$K._rect.x=G$v,G$K._rect.y=G$H,G$K._rect.width=G$A,G$K._rect.height=G$y,G$K._contextX=G$q._x,G$K._contextY=G$q._y,G$K._saveMatrix=G$q._curMat,G$q._curMat.copyTo(G$K._matrix),G$q._curMat=G$K._matrix,G$K._submitStencil=G$r;var G$T=G$q._save;G$T[G$T._length++]=G$K}},G$R(G$j,["_cache",function(){return this._cache=G$f._createArray()}]),G$j}(),G$L=function(){function G$H(){this._saveuse=0}G$T(G$H,"laya.webgl.canvas.save.SaveMark");var G$q=G$H.prototype;return G$z.imps(G$q,{"laya.webgl.canvas.save.ISaveData":!0}),G$q.isSaveMark=function(){return!0},G$q.restore=function(G$q){G$q._saveMark=this._preSaveMark,G$H._no[G$H._no._length++]=this},G$H.Create=function(G$q){var G$r=G$H._no,G$v=0<G$r._length?G$r[--G$r._length]:new G$H;return G$v._saveuse=0,G$v._preSaveMark=G$q._saveMark,G$q._saveMark=G$v},G$R(G$H,["_no",function(){return this._no=G$f._createArray()}]),G$H}(),G$i=function(){function G$y(){this._matrix=new G$a}G$T(G$y,"laya.webgl.canvas.save.SaveTransform");var G$q=G$y.prototype;return G$z.imps(G$q,{"laya.webgl.canvas.save.ISaveData":!0}),G$q.isSaveMark=function(){return!1},G$q.restore=function(G$q){G$q._curMat=this._savematrix,G$y._no[G$y._no._length++]=this},G$y.save=function(G$q){var G$r=G$q._saveMark;if(2048!=(2048&G$r._saveuse)){G$r._saveuse|=2048;var G$v=G$y._no,G$H=0<G$v._length?G$v[--G$v._length]:new G$y;G$H._savematrix=G$q._curMat,G$q._curMat=G$q._curMat.copyTo(G$H._matrix);var G$A=G$q._save;G$A[G$A._length++]=G$H}},G$R(G$y,["_no",function(){return this._no=G$f._createArray()}]),G$y}(),G$w=function(){function G$A(){}G$T(G$A,"laya.webgl.canvas.save.SaveTranslate");var G$q=G$A.prototype;return G$z.imps(G$q,{"laya.webgl.canvas.save.ISaveData":!0}),G$q.isSaveMark=function(){return!1},G$q.restore=function(G$q){G$q._curMat;G$q._x=this._x,G$q._y=this._y,G$A._no[G$A._no._length++]=this},G$A.save=function(G$q){var G$r=G$A._no,G$v=0<G$r._length?G$r[--G$r._length]:new G$A;G$v._x=G$q._x,G$v._y=G$q._y;var G$H=G$q._save;G$H[G$H._length++]=G$v},G$R(G$A,["_no",function(){return this._no=G$f._createArray()}]),G$A}(),G$h=function(){function G$q(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new G$$}G$T(G$q,"laya.webgl.resource.RenderTargetMAX");var G$r=G$q.prototype;return G$r.setSP=function(G$q){this._sp=G$q},G$r.size=function(G$q,G$r){var G$v=this;this._width!==G$q||this._height!==G$r?(this.repaint=!0,this._width=G$q,this._height=G$r,this.target?this.target.size(G$q,G$r):this.target=G$cq.create(G$q,G$r),this.target.hasListener("recovered")||this.target.on("recovered",this,function(G$q){G$z.timer.callLater(G$v._sp,G$v._sp.repaint)})):this.target.size(G$q,G$r)},G$r._flushToTarget=function(G$q,G$r){if(!G$r._destroy){var G$v=G$Bq.worldScissorTest,G$H=G$Bq.worldClipRect;G$Bq.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,G$Bq.worldScissorTest=!1,G$pq.mainContext.disable(3089);var G$A=G$Bq.worldAlpha,G$y=G$Bq.worldMatrix4,G$R=G$Bq.worldMatrix,G$W=G$Bq.worldFilters,G$O=G$Bq.worldShaderDefines;if(G$Bq.worldMatrix=G$a.EMPTY,G$Bq.restoreTempArray(),G$Bq.worldMatrix4=G$Bq.TEMPMAT4_ARRAY,G$Bq.worldAlpha=1,G$Bq.worldFilters=null,G$Bq.worldShaderDefines=null,G$Cq.activeShader=null,G$r.start(),G$P.showCanvasMark?G$r.clear(0,1,0,.3):G$r.clear(0,0,0,0),G$q.flush(),G$r.end(),G$Cq.activeShader=null,G$Bq.worldAlpha=G$A,G$Bq.worldMatrix4=G$y,G$Bq.worldMatrix=G$R,G$Bq.worldFilters=G$W,G$Bq.worldShaderDefines=G$O,G$Bq.worldScissorTest=G$v){var G$N=G$Bq.height-G$H.y-G$H.height;G$pq.mainContext.scissor(G$H.x,G$N,G$H.width,G$H.height),G$pq.mainContext.enable(3089)}G$Bq.worldClipRect=G$H}},G$r.flush=function(G$q){this.repaint&&(this._flushToTarget(G$q,this.target),this.repaint=!1)},G$r.drawTo=function(G$q,G$r,G$v,G$H,G$A){G$q.drawTexture(this.target.getTexture(),G$r,G$v,G$H,G$A,0,0)},G$r.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},G$q}(),G$n=function(){function G$q(){this.ALPHA=1,this.shaderType=0,this.defines=new G$Gq}return G$T(G$q,"laya.webgl.shader.d2.Shader2D"),G$q.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},G$q.__init__=function(){var G$q,G$r;G$Lq.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),G$Lq.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),G$Lq.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),G$Lq.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),G$Lq.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),G$Lq.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),G$Lq.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),G$Lq.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),G$q="attribute vec4 position;\n",G$q+="attribute vec2 texcoord;\n",G$q+="uniform vec2 size;\n\n",G$q+="#ifdef WORLDMAT\n",G$q+="  uniform mat4 mmat;\n",G$q+="#endif\n",G$q+="varying vec2 v_texcoord;\n",G$q+="void main() {\n",G$q+="  #ifdef WORLDMAT\n",G$q+="  vec4 pos=mmat*position;\n",G$q+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",G$q+="  #else\n",G$q+="  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",G$q+="  #endif\n\n",G$q+="  v_texcoord = texcoord;\n",G$q+="}",G$r="precision mediump float;\n",G$r+="varying vec2 v_texcoord;\n",G$r+="uniform sampler2D texture;\n\n",G$r+="#ifdef COLORMUL\n",G$r+="  uniform vec4 colorMul;\n",G$r+="#endif\n\n",G$r+="#ifdef TXTALPHA\n",G$r+="  uniform sampler2D texture1;\n",G$r+="#endif\n\n",G$r+="uniform float alpha;\n",G$r+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',G$r+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',G$r+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',G$r+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',G$r+="void main() {\n",G$r+="   vec4 color= texture2D(texture, v_texcoord);\n\n",G$r+="   #ifdef TXTCOMPRESS\n",G$r+="      color.rgb *= color.a;\n",G$r+="   #endif\n\n",G$r+="   #ifdef TXTALPHA\n",G$r+="      color.rgba *= texture2D(texture1, v_texcoord).a;\n",G$r+="   #endif\n\n",G$r+="   color.a*=alpha;\n",G$r+="   color.rgb*=alpha;\n",G$r+="   #ifdef COLORMUL\n",G$r+="      color.rgba *= colorMul;\n",G$r+="   #endif\n\n",G$r+="   gl_FragColor=color;\n",G$r+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',G$r+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',G$r+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',G$r+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',G$r+="}",G$Lq.preCompile2D(0,1,G$q,G$r,null),G$q="attribute vec4 position;\n",G$q+="uniform vec2 size;\n",G$q+="uniform mat4 mmat;\n",G$q+="void main() {\n",G$q+="  vec4 pos=mmat*position;\n",G$q+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",G$q+="}",G$r="precision mediump float;\n",G$r+="uniform vec4 color;\n",G$r+="uniform float alpha;\n",G$r+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',G$r+="void main() {\n",G$r+="\t vec4 a = vec4(color.r, color.g, color.b, color.a);\n",G$r+="\t a.w = alpha;\n",G$r+="\t a.xyz *= alpha;\n",G$r+="\t gl_FragColor = a;\n",G$r+='\t #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',G$r+="}",G$Lq.preCompile2D(0,2,G$q,G$r,null),G$q="attribute vec4 position;\n",G$q+="attribute vec3 a_color;\n",G$q+="uniform mat4 mmat;\n",G$q+="uniform mat4 u_mmat2;\n",G$q+="uniform vec2 u_pos;\n",G$q+="uniform vec2 size;\n",G$q+="varying vec3 color;\n",G$q+="void main(){\n",G$q+="  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n",G$q+="  vec4 pos=mmat*u_mmat2*tPos;\n",G$q+="  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",G$q+="  color=a_color;\n",G$q+="}",G$r="precision mediump float;\n",G$r+="varying vec3 color;\n",G$r+="uniform float alpha;\n",G$r+="void main(){\n",G$r+="  gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n",G$r+="\t gl_FragColor.rgb*=alpha;\n",G$r+="}",G$Lq.preCompile2D(0,4,G$q,G$r,null),G$q="attribute vec4 position;\n",G$q+="attribute vec2 texcoord;\n",G$q+="uniform vec2 size;\n\n",G$q+="#ifdef WORLDMAT\n",G$q+="  uniform mat4 mmat;\n",G$q+="#endif\n",G$q+="varying vec2 v_texcoord;\n",G$q+="void main() {\n",G$q+="  #ifdef WORLDMAT\n",G$q+="    vec4 pos=mmat*position;\n",G$q+="    gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",G$q+="  #else\n",G$q+="    gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n",G$q+="  #endif\n\n",G$q+="  v_texcoord = texcoord;\n",G$q+="}",G$r="#ifdef FSHIGHPRECISION\n",G$r+="   precision highp float;\n",G$r+="#else\n",G$r+="   precision mediump float;\n",G$r+="#endif\n",G$r+="varying vec2 v_texcoord;\n",G$r+="uniform sampler2D texture;\n\n",G$r+="#ifdef TXTALPHA\n",G$r+="   uniform sampler2D texture1;\n",G$r+="#endif\n\n",G$r+="uniform float alpha;\n",G$r+="uniform vec4 u_TexRange;\n",G$r+="uniform vec2 u_offset;\n",G$r+='#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n',G$r+='#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n',G$r+='#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n',G$r+='#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\n',G$r+="void main() {\n",G$r+="   vec2 newTexCoord;\n",G$r+="   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n",G$r+="   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n",G$r+="   vec4 color= texture2D(texture, newTexCoord);\n\n",G$r+="   #ifdef TXTALPHA\n",G$r+="      color.a = texture2D(texture1, newTexCoord).a;\n",G$r+="   #endif\n\n",G$r+="   color.a*=alpha;\n",G$r+="   gl_FragColor=color;\n",G$r+='   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";\n',G$r+='   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n',G$r+='   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n',G$r+='   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n',G$r+="}",G$Lq.preCompile2D(0,256,G$q,G$r,null),G$q="attribute vec2 position;\n",G$q+="attribute vec2 texcoord;\n",G$q+="attribute vec4 color;\n",G$q+="uniform vec2 size;\n",G$q+="uniform float offsetX;\n",G$q+="uniform float offsetY;\n",G$q+="uniform mat4 mmat;\n",G$q+="uniform mat4 u_mmat2;\n",G$q+="varying vec2 v_texcoord;\n",G$q+="varying vec4 v_color;\n",G$q+="void main() {\n",G$q+="  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n",G$q+="  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n",G$q+="  v_color = color;\n",G$q+="  v_color.rgb *= v_color.a;\n",G$q+="  v_texcoord = texcoord;  \n",G$q+="}",G$r="precision mediump float;\n",G$r+="varying vec2 v_texcoord;\n",G$r+="varying vec4 v_color;\n",G$r+="uniform sampler2D texture;\n\n",G$r+="#ifdef TXTALPHA\n",G$r+="  uniform sampler2D texture1;\n",G$r+="#endif\n\n",G$r+="uniform float alpha;\n",G$r+="void main() {\n",G$r+="\t vec4 t_color = texture2D(texture, v_texcoord);\n\n",G$r+="  #ifdef TXTALPHA\n",G$r+="    t_color.a = texture2D(texture1, v_texcoord).a;\n",G$r+="  #endif\n\n",G$r+="\t gl_FragColor = t_color.rgba * v_color;\n",G$r+="\t gl_FragColor *= alpha;\n",G$r+="}",G$Lq.preCompile2D(0,512,G$q,G$r,null)},G$q}(),G$k=function(){function G$r(G$q,G$r,G$v){this._value=0,this._name2int=G$q,this._int2name=G$r,this._int2nameMap=G$v}G$T(G$r,"laya.webgl.shader.ShaderDefines");var G$q=G$r.prototype;return G$q.add=function(G$q){return"string"==typeof G$q&&(G$q=this._name2int[G$q]),this._value|=G$q,this._value},G$q.addInt=function(G$q){return this._value|=G$q,this._value},G$q.remove=function(G$q){return"string"==typeof G$q&&(G$q=this._name2int[G$q]),this._value&=~G$q,this._value},G$q.isDefine=function(G$q){return(this._value&G$q)===G$q},G$q.getValue=function(){return this._value},G$q.setValue=function(G$q){this._value=G$q},G$q.toNameDic=function(){var G$q=this._int2nameMap[this._value];return G$q||G$r._toText(this._value,this._int2name,this._int2nameMap)},G$r._reg=function(G$q,G$r,G$v,G$H){G$H[G$v[G$q]=G$r]=G$q},G$r._toText=function(G$q,G$r,G$v){var G$H=G$v[G$q];if(G$H)return G$H;for(var G$A={},G$y=1,G$R=0;G$R<32&&!(G$q<(G$y=1<<G$R));G$R++)if(G$q&G$y){var G$W=G$r[G$y];G$W&&(G$A[G$W]="")}return G$v[G$q]=G$A},G$r._toInt=function(G$q,G$r){for(var G$v=G$q.split("."),G$H=0,G$A=0,G$y=G$v.length;G$A<G$y;G$A++){var G$R=G$r[G$v[G$A]];if(!G$R)throw new Error("Defines to int err:"+G$q+"/"+G$v[G$A]);G$H|=G$R}return G$H},G$r}(),G$qq=function(){function G$R(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new G$a}G$T(G$R,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var G$q=G$R.prototype;return G$q.init=function(G$q,G$r,G$v){if(G$r)this._vs=G$r;else{this._vs=[];var G$H=G$q.width,G$A=G$q.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(G$H,0,1,0,1,1,1,1),this._vs.push(G$H,G$A,1,1,1,1,1,1),this._vs.push(0,G$A,0,1,1,1,1,1)}G$v?this._ps=G$v:(G$R._defaultPS||(G$R._defaultPS=[]).push(0,1,3,3,1,2),this._ps=G$R._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=G$q},G$q.init2=function(G$q,G$r,G$v,G$H,G$A){this.transform&&(this.transform=null),G$v?this._ps=G$v:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=G$H,this._uvs=G$A,this.mEleNum=this._ps.length,this.mTexture=G$q,(G$m.isConchNode||G$m.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},G$q._initMyData=function(){var G$q=0,G$r=0,G$v=4*this._verticles.length;this._vs=G$R._tempVS;var G$H=!1;if(G$m.isConchNode||G$m.isConchApp?(this._vs.length=G$v,G$H=!0):this._vs.length<G$v&&(this._vs.length=G$v,G$H=!0),G$R._tVSLen=G$v,G$H)for(;G$q<G$v;)this._vs[G$q]=this._verticles[G$r],this._vs[G$q+1]=this._verticles[G$r+1],this._vs[G$q+2]=this._uvs[G$r],this._vs[G$q+3]=this._uvs[G$r+1],this._vs[G$q+4]=1,this._vs[G$q+5]=1,this._vs[G$q+6]=1,this._vs[G$q+7]=1,G$q+=8,G$r+=2;else for(;G$q<G$v;)this._vs[G$q]=this._verticles[G$r],this._vs[G$q+1]=this._verticles[G$r+1],this._vs[G$q+2]=this._uvs[G$r],this._vs[G$q+3]=this._uvs[G$r+1],G$q+=8,G$r+=2},G$q.getData2=function(G$q,G$r,G$v){var G$H;this.mVBBuffer=G$q,this.mIBBuffer=G$r,this._initMyData(),G$q.appendEx2(this._vs,Float32Array,G$R._tVSLen,4),this._indexStart=G$r._byteLength,(G$H=G$R._tempIB).length<this._ps.length&&(G$H.length=this._ps.length);for(var G$A=0,G$y=this._ps.length;G$A<G$y;G$A++)G$H[G$A]=this._ps[G$A]+G$v;G$r.appendEx2(G$H,Uint16Array,this._ps.length,2)},G$q.getData=function(G$q,G$r,G$v){if(this.mVBBuffer=G$q,this.mIBBuffer=G$r,G$q.append(this.mVBData),this._indexStart=G$r._byteLength,this.mIBData.start!=G$v){for(var G$H=0,G$A=this._ps.length;G$H<G$A;G$H++)this.mIBData[G$H]=this._ps[G$H]+G$v;this.mIBData.start=G$v}G$r.append(this.mIBData)},G$q.render=function(G$q,G$r,G$v){if(G$m.isWebGL&&this.mTexture){G$q._renderKey=0,G$q._shader2D.glTexture=null,G$rq.getInstance().addSkinMesh(this);var G$H=G$yq.createShape(G$q,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,G$Vq.create(512,0));this.transform||(this.transform=G$a.EMPTY),this.transform.translate(G$r,G$v),G$a.mul(this.transform,G$q._curMat,this._tempMatrix),this.transform.translate(-G$r,-G$v);var G$A=G$H.shaderValue,G$y=G$A.u_mmat2||G$Bq.getMatrArray();G$Bq.mat2MatArray(this._tempMatrix,G$y),G$A.textureHost=this.mTexture,G$A.offsetX=0,G$A.offsetY=0,G$A.u_mmat2=G$y,G$A.ALPHA=G$q._shader2D.ALPHA,G$q._submits[G$q._submits._length++]=G$H}else G$m.isConchApp&&this.mTexture&&(this.transform||(this.transform=G$a.EMPTY),G$q.setSkinMesh&&G$q.setSkinMesh(G$r,G$v,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},G$R._tempVS=[],G$R._tempIB=[],G$R._defaultPS=null,G$R._tVSLen=0,G$R}(),G$rq=function(){function G$q(){this.ib=null,this.vb=null;G$pq.mainContext;this.ib=G$nq.create(35048),this.vb=G$kq.create(8)}G$T(G$q,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var G$r=G$q.prototype;return G$r.addSkinMesh=function(G$q){G$q.getData2(this.vb,this.ib,this.vb._byteLength/32)},G$r.reset=function(){this.vb.clear(),this.ib.clear()},G$q.getInstance=function(){return G$q.instance=G$q.instance||new G$q},G$q.instance=null,G$q}(),G$vq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===G$O&&(G$O=0),this.x=G$q,this.y=G$r,this.width=G$v,this.height=G$H,this.edges=G$A,this.color=G$y,this.borderWidth=G$R,this.borderColor=G$W}G$T(G$q,"laya.webgl.shapes.BasePoly");var G$r=G$q.prototype;return G$z.imps(G$r,{"laya.webgl.shapes.IShape":!0}),G$r.getData=function(G$q,G$r,G$v){},G$r.rebuild=function(G$q){},G$r.setMatrix=function(G$q){},G$r.needUpdate=function(G$q){return!0},G$r.sector=function(G$q,G$r,G$v){var G$H=this.x,G$A=this.y,G$y=this.edges,G$R=(this.r1-this.r0)/G$y,G$W=this.width,G$O=this.height,G$N=this.color,G$x=(G$N>>16&255)/255,G$K=(G$N>>8&255)/255,G$T=(255&G$N)/255;G$q.push(G$H,G$A,G$x,G$K,G$T);for(var G$j=0;G$j<G$y+1;G$j++)G$q.push(G$H+Math.sin(G$R*G$j+this.r0)*G$W,G$A+Math.cos(G$R*G$j+this.r0)*G$O),G$q.push(G$x,G$K,G$T);for(G$j=0;G$j<G$y;G$j++)G$r.push(G$v,G$v+G$j+1,G$v+G$j+2)},G$r.createLine2=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R,G$W,G$O,G$N,G$x,G$K,G$T,G$j,G$D,G$g,G$X,G$m,G$B,G$e,G$p,G$M,G$z,G$P,G$V,G$a,G$J=G$q.concat(),G$$=G$A,G$G=this.borderColor,G$E=(G$G>>16&255)/255,G$Q=(G$G>>8&255)/255,G$s=(255&G$G)/255,G$Z=G$J.length/2,G$Y=G$H,G$o=G$v/2;G$O=G$J[0],G$N=G$J[1],G$g=G$O-(G$x=G$J[2]),G$D=(G$D=-(G$N-(G$K=G$J[3])))/(G$a=Math.sqrt(G$D*G$D+G$g*G$g))*G$o,G$g=G$g/G$a*G$o,G$$.push(G$O-G$D+this.x,G$N-G$g+this.y,G$E,G$Q,G$s,G$O+G$D+this.x,G$N+G$g+this.y,G$E,G$Q,G$s);for(var G$C=1;G$C<G$Z-1;G$C++)G$O=G$J[2*(G$C-1)],G$N=G$J[2*(G$C-1)+1],G$x=G$J[2*G$C],G$K=G$J[2*G$C+1],G$T=G$J[2*(G$C+1)],G$j=G$J[2*(G$C+1)+1],G$g=G$O-G$x,G$m=G$x-G$T,G$p=(-(G$D=(G$D=-(G$N-G$K))/(G$a=Math.sqrt(G$D*G$D+G$g*G$g))*G$o)+G$O)*(-(G$g=G$g/G$a*G$o)+G$K)-(-G$D+G$x)*(-G$g+G$N),G$P=(-(G$X=(G$X=-(G$K-G$j))/(G$a=Math.sqrt(G$X*G$X+G$m*G$m))*G$o)+G$T)*(-(G$m=G$m/G$a*G$o)+G$K)-(-G$X+G$x)*(-G$m+G$j),G$V=(G$B=-G$g+G$N-(-G$g+G$K))*(G$z=-G$X+G$x-(-G$X+G$T))-(G$M=-G$m+G$j-(-G$m+G$K))*(G$e=-G$D+G$x-(-G$D+G$O)),Math.abs(G$V)<.1?(G$V+=10.1,G$$.push(G$x-G$D+this.x,G$K-G$g+this.y,G$E,G$Q,G$s,G$x+G$D+this.x,G$K+G$g+this.y,G$E,G$Q,G$s)):(((G$R=(G$e*G$P-G$z*G$p)/G$V)-G$x)*(G$R-G$x)+((G$W=(G$M*G$p-G$B*G$P)/G$V)-G$K)+(G$W-G$K),G$$.push(G$R+this.x,G$W+this.y,G$E,G$Q,G$s,G$x-(G$R-G$x)+this.x,G$K-(G$W-G$K)+this.y,G$E,G$Q,G$s));G$O=G$J[G$J.length-4],G$N=G$J[G$J.length-3],G$g=G$O-(G$x=G$J[G$J.length-2]),G$D=(G$D=-(G$N-(G$K=G$J[G$J.length-1])))/(G$a=Math.sqrt(G$D*G$D+G$g*G$g))*G$o,G$g=G$g/G$a*G$o,G$$.push(G$x-G$D+this.x,G$K-G$g+this.y,G$E,G$Q,G$s,G$x+G$D+this.x,G$K+G$g+this.y,G$E,G$Q,G$s);var G$c=G$y;for(G$C=1;G$C<G$c;G$C++)G$r.push(G$Y+2*(G$C-1),G$Y+2*(G$C-1)+1,G$Y+2*G$C+1,G$Y+2*G$C+1,G$Y+2*G$C,G$Y+2*(G$C-1));return G$$},G$r.createLine=function(G$q,G$r,G$v,G$H){var G$A=G$q.concat(),G$y=G$q,G$R=this.borderColor,G$W=(G$R>>16&255)/255,G$O=(G$R>>8&255)/255,G$N=(255&G$R)/255;G$A.splice(0,5);var G$x,G$K,G$T,G$j,G$D,G$g,G$X,G$m,G$B,G$e,G$p,G$M,G$z,G$P,G$V,G$a,G$J,G$$,G$G,G$E,G$Q=G$A.length/5,G$s=G$H,G$Z=G$v/2;G$T=G$A[0],G$j=G$A[1],G$e=G$T-(G$D=G$A[5]),G$B=(G$B=-(G$j-(G$g=G$A[6])))/(G$E=Math.sqrt(G$B*G$B+G$e*G$e))*G$Z,G$e=G$e/G$E*G$Z,G$y.push(G$T-G$B,G$j-G$e,G$W,G$O,G$N,G$T+G$B,G$j+G$e,G$W,G$O,G$N);for(var G$Y=1;G$Y<G$Q-1;G$Y++)G$T=G$A[5*(G$Y-1)],G$j=G$A[5*(G$Y-1)+1],G$D=G$A[5*G$Y],G$g=G$A[5*G$Y+1],G$X=G$A[5*(G$Y+1)],G$m=G$A[5*(G$Y+1)+1],G$e=G$T-G$D,G$M=G$D-G$X,G$V=(-(G$B=(G$B=-(G$j-G$g))/(G$E=Math.sqrt(G$B*G$B+G$e*G$e))*G$Z)+G$T)*(-(G$e=G$e/G$E*G$Z)+G$g)-(-G$B+G$D)*(-G$e+G$j),G$$=(-(G$p=(G$p=-(G$g-G$m))/(G$E=Math.sqrt(G$p*G$p+G$M*G$M))*G$Z)+G$X)*(-(G$M=G$M/G$E*G$Z)+G$g)-(-G$p+G$D)*(-G$M+G$m),G$G=(G$z=-G$e+G$j-(-G$e+G$g))*(G$J=-G$p+G$D-(-G$p+G$X))-(G$a=-G$M+G$m-(-G$M+G$g))*(G$P=-G$B+G$D-(-G$B+G$T)),Math.abs(G$G)<.1?(G$G+=10.1,G$y.push(G$D-G$B,G$g-G$e,G$W,G$O,G$N,G$D+G$B,G$g+G$e,G$W,G$O,G$N)):(((G$x=(G$P*G$$-G$J*G$V)/G$G)-G$D)*(G$x-G$D)+((G$K=(G$a*G$V-G$z*G$$)/G$G)-G$g)+(G$K-G$g),G$y.push(G$x,G$K,G$W,G$O,G$N,G$D-(G$x-G$D),G$g-(G$K-G$g),G$W,G$O,G$N));G$T=G$A[G$A.length-10],G$j=G$A[G$A.length-9],G$e=G$T-(G$D=G$A[G$A.length-5]),G$B=(G$B=-(G$j-(G$g=G$A[G$A.length-4])))/(G$E=Math.sqrt(G$B*G$B+G$e*G$e))*G$Z,G$e=G$e/G$E*G$Z,G$y.push(G$D-G$B,G$g-G$e,G$W,G$O,G$N,G$D+G$B,G$g+G$e,G$W,G$O,G$N);var G$o=this.edges+1;for(G$Y=1;G$Y<G$o;G$Y++)G$r.push(G$s+2*(G$Y-1),G$s+2*(G$Y-1)+1,G$s+2*G$Y+1,G$s+2*G$Y+1,G$s+2*G$Y,G$s+2*(G$Y-1));return G$y},G$r.createLoopLine=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$q.concat(),G$W=G$A||G$q,G$O=this.borderColor,G$N=(G$O>>16&255)/255,G$x=(G$O>>8&255)/255,G$K=(255&G$O)/255;G$R.splice(0,5);var G$T=[G$R[0],G$R[1]],G$j=[G$R[G$R.length-5],G$R[G$R.length-4]],G$D=G$j[0]+.5*(G$T[0]-G$j[0]),G$g=G$j[1]+.5*(G$T[1]-G$j[1]);G$R.unshift(G$D,G$g,0,0,0),G$R.push(G$D,G$g,0,0,0);var G$X,G$m,G$B,G$e,G$p,G$M,G$z,G$P,G$V,G$a,G$J,G$$,G$G,G$E,G$Q,G$s,G$Z,G$Y,G$o,G$C,G$c=G$R.length/5,G$b=G$H,G$d=G$v/2;G$B=G$R[0],G$e=G$R[1],G$a=G$B-(G$p=G$R[5]),G$V=(G$V=-(G$e-(G$M=G$R[6])))/(G$C=Math.sqrt(G$V*G$V+G$a*G$a))*G$d,G$a=G$a/G$C*G$d,G$W.push(G$B-G$V,G$e-G$a,G$N,G$x,G$K,G$B+G$V,G$e+G$a,G$N,G$x,G$K);for(var G$u=1;G$u<G$c-1;G$u++)G$B=G$R[5*(G$u-1)],G$e=G$R[5*(G$u-1)+1],G$p=G$R[5*G$u],G$M=G$R[5*G$u+1],G$z=G$R[5*(G$u+1)],G$P=G$R[5*(G$u+1)+1],G$a=G$B-G$p,G$$=G$p-G$z,G$Q=(-(G$V=(G$V=-(G$e-G$M))/(G$C=Math.sqrt(G$V*G$V+G$a*G$a))*G$d)+G$B)*(-(G$a=G$a/G$C*G$d)+G$M)-(-G$V+G$p)*(-G$a+G$e),G$Y=(-(G$J=(G$J=-(G$M-G$P))/(G$C=Math.sqrt(G$J*G$J+G$$*G$$))*G$d)+G$z)*(-(G$$=G$$/G$C*G$d)+G$M)-(-G$J+G$p)*(-G$$+G$P),G$o=(G$G=-G$a+G$e-(-G$a+G$M))*(G$Z=-G$J+G$p-(-G$J+G$z))-(G$s=-G$$+G$P-(-G$$+G$M))*(G$E=-G$V+G$p-(-G$V+G$B)),Math.abs(G$o)<.1?(G$o+=10.1,G$W.push(G$p-G$V,G$M-G$a,G$N,G$x,G$K,G$p+G$V,G$M+G$a,G$N,G$x,G$K)):(((G$X=(G$E*G$Y-G$Z*G$Q)/G$o)-G$p)*(G$X-G$p)+((G$m=(G$s*G$Q-G$G*G$Y)/G$o)-G$M)+(G$m-G$M),G$W.push(G$X,G$m,G$N,G$x,G$K,G$p-(G$X-G$p),G$M-(G$m-G$M),G$N,G$x,G$K));G$y&&(G$r=G$y);var G$I=this.edges+1;for(G$u=1;G$u<G$I;G$u++)G$r.push(G$b+2*(G$u-1),G$b+2*(G$u-1)+1,G$b+2*G$u+1,G$b+2*G$u+1,G$b+2*G$u,G$b+2*(G$u-1));return G$r.push(G$b+2*(G$u-1),G$b+2*(G$u-1)+1,G$b+1,G$b+1,G$b,G$b+2*(G$u-1)),G$W},G$q}(),G$Hq=function(){function G$g(){}return G$T(G$g,"laya.webgl.shapes.Earcut"),G$g.earcut=function(G$q,G$r,G$v){G$v=G$v||2;var G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x=G$r&&G$r.length,G$K=G$x?G$r[0]*G$v:G$q.length,G$T=G$g.linkedList(G$q,0,G$K,G$v,!0),G$j=[];if(!G$T)return G$j;if(G$x&&(G$T=G$g.eliminateHoles(G$q,G$r,G$T,G$v)),G$q.length>80*G$v){G$H=G$y=G$q[0],G$A=G$R=G$q[1];for(var G$D=G$v;G$D<G$K;G$D+=G$v)(G$W=G$q[G$D])<G$H&&(G$H=G$W),(G$O=G$q[G$D+1])<G$A&&(G$A=G$O),G$y<G$W&&(G$y=G$W),G$R<G$O&&(G$R=G$O);G$N=0!==(G$N=Math.max(G$y-G$H,G$R-G$A))?1/G$N:0}return G$g.earcutLinked(G$T,G$j,G$v,G$H,G$A,G$N),G$j},G$g.linkedList=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R;if(G$A===0<G$g.signedArea(G$q,G$r,G$v,G$H))for(G$y=G$r;G$y<G$v;G$y+=G$H)G$R=G$g.insertNode(G$y,G$q[G$y],G$q[G$y+1],G$R);else for(G$y=G$v-G$H;G$r<=G$y;G$y-=G$H)G$R=G$g.insertNode(G$y,G$q[G$y],G$q[G$y+1],G$R);return G$R&&G$g.equals(G$R,G$R.next)&&(G$g.removeNode(G$R),G$R=G$R.next),G$R},G$g.filterPoints=function(G$q,G$r){if(!G$q)return G$q;G$r||(G$r=G$q);var G$v,G$H=G$q;do{if(G$v=!1,G$H.steiner||!G$g.equals(G$H,G$H.next)&&0!==G$g.area(G$H.prev,G$H,G$H.next))G$H=G$H.next;else{if(G$g.removeNode(G$H),(G$H=G$r=G$H.prev)===G$H.next)break;G$v=!0}}while(G$v||G$H!==G$r);return G$r},G$g.earcutLinked=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){if(G$q){!G$R&&G$y&&G$g.indexCurve(G$q,G$H,G$A,G$y);for(var G$W,G$O,G$N=G$q;G$q.prev!==G$q.next;)if(G$W=G$q.prev,G$O=G$q.next,G$y?G$g.isEarHashed(G$q,G$H,G$A,G$y):G$g.isEar(G$q))G$r.push(G$W.i/G$v),G$r.push(G$q.i/G$v),G$r.push(G$O.i/G$v),G$g.removeNode(G$q),G$q=G$O.next,G$N=G$O.next;else if((G$q=G$O)===G$N){G$R?1===G$R?(G$q=G$g.cureLocalIntersections(G$q,G$r,G$v),G$g.earcutLinked(G$q,G$r,G$v,G$H,G$A,G$y,2)):2===G$R&&G$g.splitEarcut(G$q,G$r,G$v,G$H,G$A,G$y):G$g.earcutLinked(G$g.filterPoints(G$q,null),G$r,G$v,G$H,G$A,G$y,1);break}}},G$g.isEar=function(G$q){var G$r=G$q.prev,G$v=G$q,G$H=G$q.next;if(0<=G$g.area(G$r,G$v,G$H))return!1;for(var G$A=G$q.next.next;G$A!==G$q.prev;){if(G$g.pointInTriangle(G$r.x,G$r.y,G$v.x,G$v.y,G$H.x,G$H.y,G$A.x,G$A.y)&&0<=G$g.area(G$A.prev,G$A,G$A.next))return!1;G$A=G$A.next}return!0},G$g.isEarHashed=function(G$q,G$r,G$v,G$H){var G$A=G$q.prev,G$y=G$q,G$R=G$q.next;if(0<=G$g.area(G$A,G$y,G$R))return!1;for(var G$W=G$A.x<G$y.x?G$A.x<G$R.x?G$A.x:G$R.x:G$y.x<G$R.x?G$y.x:G$R.x,G$O=G$A.y<G$y.y?G$A.y<G$R.y?G$A.y:G$R.y:G$y.y<G$R.y?G$y.y:G$R.y,G$N=G$A.x>G$y.x?G$A.x>G$R.x?G$A.x:G$R.x:G$y.x>G$R.x?G$y.x:G$R.x,G$x=G$A.y>G$y.y?G$A.y>G$R.y?G$A.y:G$R.y:G$y.y>G$R.y?G$y.y:G$R.y,G$K=G$g.zOrder(G$W,G$O,G$r,G$v,G$H),G$T=G$g.zOrder(G$N,G$x,G$r,G$v,G$H),G$j=G$q.nextZ;G$j&&G$j.z<=G$T;){if(G$j!==G$q.prev&&G$j!==G$q.next&&G$g.pointInTriangle(G$A.x,G$A.y,G$y.x,G$y.y,G$R.x,G$R.y,G$j.x,G$j.y)&&0<=G$g.area(G$j.prev,G$j,G$j.next))return!1;G$j=G$j.nextZ}for(G$j=G$q.prevZ;G$j&&G$j.z>=G$K;){if(G$j!==G$q.prev&&G$j!==G$q.next&&G$g.pointInTriangle(G$A.x,G$A.y,G$y.x,G$y.y,G$R.x,G$R.y,G$j.x,G$j.y)&&0<=G$g.area(G$j.prev,G$j,G$j.next))return!1;G$j=G$j.prevZ}return!0},G$g.cureLocalIntersections=function(G$q,G$r,G$v){var G$H=G$q;do{var G$A=G$H.prev,G$y=G$H.next.next;!G$g.equals(G$A,G$y)&&G$g.intersects(G$A,G$H,G$H.next,G$y)&&G$g.locallyInside(G$A,G$y)&&G$g.locallyInside(G$y,G$A)&&(G$r.push(G$A.i/G$v),G$r.push(G$H.i/G$v),G$r.push(G$y.i/G$v),G$g.removeNode(G$H),G$g.removeNode(G$H.next),G$H=G$q=G$y),G$H=G$H.next}while(G$H!==G$q);return G$H},G$g.splitEarcut=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$q;do{for(var G$W=G$R.next.next;G$W!==G$R.prev;){if(G$R.i!==G$W.i&&G$g.isValidDiagonal(G$R,G$W)){var G$O=G$g.splitPolygon(G$R,G$W);return G$R=G$g.filterPoints(G$R,G$R.next),G$O=G$g.filterPoints(G$O,G$O.next),G$g.earcutLinked(G$R,G$r,G$v,G$H,G$A,G$y),void G$g.earcutLinked(G$O,G$r,G$v,G$H,G$A,G$y)}G$W=G$W.next}G$R=G$R.next}while(G$R!==G$q)},G$g.eliminateHoles=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R,G$W,G$O,G$N=[];for(G$A=0,G$y=G$r.length;G$A<G$y;G$A++)G$R=G$r[G$A]*G$H,G$W=G$A<G$y-1?G$r[G$A+1]*G$H:G$q.length,(G$O=G$g.linkedList(G$q,G$R,G$W,G$H,!1))===G$O.next&&(G$O.steiner=!0),G$N.push(G$g.getLeftmost(G$O));for(G$N.sort(G$g.compareX),G$A=0;G$A<G$N.length;G$A++)G$g.eliminateHole(G$N[G$A],G$v),G$v=G$g.filterPoints(G$v,G$v.next);return G$v},G$g.compareX=function(G$q,G$r){return G$q.x-G$r.x},G$g.eliminateHole=function(G$q,G$r){if(G$r=G$g.findHoleBridge(G$q,G$r)){var G$v=G$g.splitPolygon(G$r,G$q);G$g.filterPoints(G$v,G$v.next)}},G$g.findHoleBridge=function(G$q,G$r){var G$v,G$H=G$r,G$A=G$q.x,G$y=G$q.y,G$R=-1/0;do{if(G$y<=G$H.y&&G$y>=G$H.next.y&&G$H.next.y!==G$H.y){var G$W=G$H.x+(G$y-G$H.y)*(G$H.next.x-G$H.x)/(G$H.next.y-G$H.y);if(G$W<=G$A&&G$R<G$W){if((G$R=G$W)===G$A){if(G$y===G$H.y)return G$H;if(G$y===G$H.next.y)return G$H.next}G$v=G$H.x<G$H.next.x?G$H:G$H.next}}G$H=G$H.next}while(G$H!==G$r);if(!G$v)return null;if(G$A===G$R)return G$v.prev;var G$O,G$N=G$v,G$x=G$v.x,G$K=G$v.y,G$T=1/0;for(G$H=G$v.next;G$H!==G$N;)G$A>=G$H.x&&G$H.x>=G$x&&G$A!==G$H.x&&G$g.pointInTriangle(G$y<G$K?G$A:G$R,G$y,G$x,G$K,G$y<G$K?G$R:G$A,G$y,G$H.x,G$H.y)&&((G$O=Math.abs(G$y-G$H.y)/(G$A-G$H.x))<G$T||G$O===G$T&&G$H.x>G$v.x)&&G$g.locallyInside(G$H,G$q)&&(G$v=G$H,G$T=G$O),G$H=G$H.next;return G$v},G$g.indexCurve=function(G$q,G$r,G$v,G$H){for(var G$A=G$q;null===G$A.z&&(G$A.z=G$g.zOrder(G$A.x,G$A.y,G$r,G$v,G$H)),G$A.prevZ=G$A.prev,G$A.nextZ=G$A.next,(G$A=G$A.next)!==G$q;);G$A.prevZ.nextZ=null,G$A.prevZ=null,G$g.sortLinked(G$A)},G$g.sortLinked=function(G$q){var G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N=1;do{for(G$v=G$q,G$y=G$q=null,G$R=0;G$v;){for(G$R++,G$H=G$v,G$r=G$W=0;G$r<G$N&&(G$W++,G$H=G$H.nextZ);G$r++);for(G$O=G$N;0<G$W||0<G$O&&G$H;)0!==G$W&&(0===G$O||!G$H||G$v.z<=G$H.z)?(G$v=(G$A=G$v).nextZ,G$W--):(G$H=(G$A=G$H).nextZ,G$O--),G$y?G$y.nextZ=G$A:G$q=G$A,G$A.prevZ=G$y,G$y=G$A;G$v=G$H}G$y.nextZ=null,G$N*=2}while(1<G$R);return G$q},G$g.zOrder=function(G$q,G$r,G$v,G$H,G$A){return(G$q=1431655765&((G$q=858993459&((G$q=252645135&((G$q=16711935&((G$q=32767*(G$q-G$v)*G$A)|G$q<<8))|G$q<<4))|G$q<<2))|G$q<<1))|(G$r=1431655765&((G$r=858993459&((G$r=252645135&((G$r=16711935&((G$r=32767*(G$r-G$H)*G$A)|G$r<<8))|G$r<<4))|G$r<<2))|G$r<<1))<<1},G$g.getLeftmost=function(G$q){for(var G$r=G$q,G$v=G$q;G$r.x<G$v.x&&(G$v=G$r),(G$r=G$r.next)!==G$q;);return G$v},G$g.pointInTriangle=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){return 0<=(G$A-G$R)*(G$r-G$W)-(G$q-G$R)*(G$y-G$W)&&0<=(G$q-G$R)*(G$H-G$W)-(G$v-G$R)*(G$r-G$W)&&0<=(G$v-G$R)*(G$y-G$W)-(G$A-G$R)*(G$H-G$W)},G$g.isValidDiagonal=function(G$q,G$r){return G$q.next.i!==G$r.i&&G$q.prev.i!==G$r.i&&!G$g.intersectsPolygon(G$q,G$r)&&G$g.locallyInside(G$q,G$r)&&G$g.locallyInside(G$r,G$q)&&G$g.middleInside(G$q,G$r)},G$g.area=function(G$q,G$r,G$v){return(G$r.y-G$q.y)*(G$v.x-G$r.x)-(G$r.x-G$q.x)*(G$v.y-G$r.y)},G$g.equals=function(G$q,G$r){return G$q.x===G$r.x&&G$q.y===G$r.y},G$g.intersects=function(G$q,G$r,G$v,G$H){return!!(G$g.equals(G$q,G$r)&&G$g.equals(G$v,G$H)||G$g.equals(G$q,G$H)&&G$g.equals(G$v,G$r))||0<G$g.area(G$q,G$r,G$v)!=0<G$g.area(G$q,G$r,G$H)&&0<G$g.area(G$v,G$H,G$q)!=0<G$g.area(G$v,G$H,G$r)},G$g.intersectsPolygon=function(G$q,G$r){var G$v=G$q;do{if(G$v.i!==G$q.i&&G$v.next.i!==G$q.i&&G$v.i!==G$r.i&&G$v.next.i!==G$r.i&&G$g.intersects(G$v,G$v.next,G$q,G$r))return!0;G$v=G$v.next}while(G$v!==G$q);return!1},G$g.locallyInside=function(G$q,G$r){return G$g.area(G$q.prev,G$q,G$q.next)<0?0<=G$g.area(G$q,G$r,G$q.next)&&0<=G$g.area(G$q,G$q.prev,G$r):G$g.area(G$q,G$r,G$q.prev)<0||G$g.area(G$q,G$q.next,G$r)<0},G$g.middleInside=function(G$q,G$r){for(var G$v=G$q,G$H=!1,G$A=(G$q.x+G$r.x)/2,G$y=(G$q.y+G$r.y)/2;G$v.y>G$y!=G$v.next.y>G$y&&G$v.next.y!==G$v.y&&G$A<(G$v.next.x-G$v.x)*(G$y-G$v.y)/(G$v.next.y-G$v.y)+G$v.x&&(G$H=!G$H),(G$v=G$v.next)!==G$q;);return G$H},G$g.splitPolygon=function(G$q,G$r){var G$v=new G$Aq(G$q.i,G$q.x,G$q.y),G$H=new G$Aq(G$r.i,G$r.x,G$r.y),G$A=G$q.next,G$y=G$r.prev;return(G$q.next=G$r).prev=G$q,(G$v.next=G$A).prev=G$v,(G$H.next=G$v).prev=G$H,(G$y.next=G$H).prev=G$y,G$H},G$g.insertNode=function(G$q,G$r,G$v,G$H){var G$A=new G$Aq(G$q,G$r,G$v);return G$H?(G$A.next=G$H.next,(G$A.prev=G$H).next.prev=G$A,G$H.next=G$A):(G$A.prev=G$A).next=G$A,G$A},G$g.removeNode=function(G$q){G$q.next.prev=G$q.prev,G$q.prev.next=G$q.next,G$q.prevZ&&(G$q.prevZ.nextZ=G$q.nextZ),G$q.nextZ&&(G$q.nextZ.prevZ=G$q.prevZ)},G$g.signedArea=function(G$q,G$r,G$v,G$H){for(var G$A=0,G$y=G$r,G$R=G$v-G$H;G$y<G$v;G$y+=G$H)G$A+=(G$q[G$R]-G$q[G$y])*(G$q[G$y+1]+G$q[G$R+1]),G$R=G$y;return G$A},G$g}(),G$Aq=function(){function G$q(G$q,G$r,G$v){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=G$q,this.x=G$r,this.y=G$v,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return G$T(G$q,"laya.webgl.shapes.EarcutNode"),G$q}(),G$yq=(function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this.lineWidth=G$q,this.lineColor=G$r,this.lineAlpha=G$v,this.fillColor=G$H,this.fillAlpha=G$A,this.shape=G$R,this.fill=G$y}G$T(G$q,"laya.webgl.shapes.GeometryData");var G$r=G$q.prototype;G$r.clone=function(){return new G$q(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},G$r.getIndexData=function(){return null},G$r.getVertexData=function(){return null},G$r.destroy=function(){this.shape=null}}(),function(){function G$q(G$q){if(G$q instanceof Float32Array)this.points=G$q;else if(G$q instanceof Array){G$q.length;this.points=new Float32Array(G$q)}}G$T(G$q,"laya.webgl.shapes.Vertex");var G$r=G$q.prototype;G$z.imps(G$r,{"laya.webgl.shapes.IShape":!0}),G$r.getData=function(G$q,G$r,G$v){},G$r.needUpdate=function(G$q){return!1},G$r.rebuild=function(G$q){},G$r.setMatrix=function(G$q){}}(),function(){function G$O(G$q){void 0===G$q&&(G$q=1e4),this._renderType=G$q}G$T(G$O,"laya.webgl.submit.Submit");var G$q=G$O.prototype;return G$z.imps(G$q,{"laya.webgl.submit.ISubmit":!0}),G$q.releaseRender=function(){var G$q=G$O._cache;(G$q[G$q._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},G$q.getRenderType=function(){return this._renderType},G$q.renderSubmit=function(){if(0===this._numEle)return 1;var G$q=this.shaderValue.textureHost;if(G$q){var G$r=G$q.source;if(!G$q.bitmap||!G$r)return 1;this.shaderValue.texture=G$r,G$q.alphaTexture&&G$q.alphaTexture.source&&(this.shaderValue.texture1=G$q.alphaTexture.source)}this._vb.bind_upload(this._ib);var G$v=G$pq.mainContext;return this.shaderValue.upload(),G$F.activeBlendFunction!==this._blendFn&&(G$v.enable(3042),this._blendFn(G$v),G$F.activeBlendFunction=this._blendFn),G$Q.drawCall++,G$Q.trianglesFaces+=this._numEle/3,G$v.drawElements(4,this._numEle,5123,this._startIdx),1},G$O.__init__=function(){var G$q=G$O.RENDERBASE=new G$O(-1);G$q.shaderValue=new G$Vq(0,0),G$q.shaderValue.ALPHA=-1234},G$O.createSubmit=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$O._cache._length?G$O._cache[--G$O._cache._length]:new G$O;null==G$v&&((G$v=G$y._selfVb||(G$y._selfVb=G$kq.create(-1))).clear(),G$H=0),G$y._ib=G$r,G$y._vb=G$v,G$y._startIdx=G$H*G$gq.BYTES_PIDX,G$y._numEle=0;var G$R=G$q._nBlendType;G$y._blendFn=G$q._targets?G$F.targetFns[G$R]:G$F.fns[G$R],G$y.shaderValue=G$A,G$y.shaderValue.setValue(G$q._shader2D);var G$W=G$q._shader2D.filters;return G$W&&G$y.shaderValue.setFilters(G$W),G$y},G$O.createShape=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$O._cache._length?G$O._cache[--G$O._cache._length]:new G$O;G$R._ib=G$r,G$R._vb=G$v,G$R._numEle=G$H,G$R._startIdx=G$A,G$R.shaderValue=G$y,G$R.shaderValue.setValue(G$q._shader2D);var G$W=G$q._nBlendType;return G$R._blendFn=G$q._targets?G$F.targetFns[G$W]:G$F.fns[G$W],G$R},G$O.TYPE_2D=1e4,G$O.TYPE_CANVAS=10003,G$O.TYPE_CMDSETRT=10004,G$O.TYPE_CUSTOM=10005,G$O.TYPE_BLURRT=10006,G$O.TYPE_CMDDESTORYPRERT=10007,G$O.TYPE_DISABLESTENCIL=10008,G$O.TYPE_OTHERIBVB=10009,G$O.TYPE_PRIMITIVE=10010,G$O.TYPE_RT=10011,G$O.TYPE_BLUR_RT=10012,G$O.TYPE_TARGET=10013,G$O.TYPE_CHANGE_VALUE=10014,G$O.TYPE_SHAPE=10015,G$O.TYPE_TEXTURE=10016,G$O.TYPE_FILLTEXTURE=10017,G$O.RENDERBASE=null,G$O._cache=((G$O._cache=[])._length=0,G$O._cache),G$O}()),G$Rq=function(){function G$H(){this.fun=null,this.args=null}G$T(G$H,"laya.webgl.submit.SubmitCMD");var G$q=G$H.prototype;return G$z.imps(G$q,{"laya.webgl.submit.ISubmit":!0}),G$q.renderSubmit=function(){return this.fun.apply(null,this.args),1},G$q.getRenderType=function(){return 0},G$q.releaseRender=function(){var G$q=G$H._cache;G$q[G$q._length++]=this},G$H.create=function(G$q,G$r){var G$v=G$H._cache._length?G$H._cache[--G$H._cache._length]:new G$H;return G$v.fun=G$r,G$v.args=G$q,G$v},G$H._cache=((G$H._cache=[])._length=0,G$H._cache),G$H}(),G$Wq=function(){function G$r(){this.variables={}}G$T(G$r,"laya.webgl.submit.SubmitCMDScope");var G$q=G$r.prototype;return G$q.getValue=function(G$q){return this.variables[G$q]},G$q.addValue=function(G$q,G$r){return this.variables[G$q]=G$r},G$q.setValue=function(G$q,G$r){return this.variables.hasOwnProperty(G$q)?this.variables[G$q]=G$r:null},G$q.clear=function(){for(var G$q in this.variables)delete this.variables[G$q]},G$q.recycle=function(){this.clear(),G$r.POOL.push(this)},G$r.create=function(){var G$q=G$r.POOL.pop();return G$q||(G$q=new G$r),G$q},G$r.POOL=[],G$r}(),G$Oq=function(){function G$K(){this.offset=0,this.startIndex=0,this._mat=G$a.create()}G$T(G$K,"laya.webgl.submit.SubmitOtherIBVB");var G$q=G$K.prototype;return G$z.imps(G$q,{"laya.webgl.submit.ISubmit":!0}),G$q.releaseRender=function(){var G$q=G$K._cache;(G$q[G$q._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},G$q.getRenderType=function(){return 10009},G$q.renderSubmit=function(){var G$q=this._shaderValue.textureHost;if(G$q){var G$r=G$q.source;if(!G$q.bitmap||!G$r)return 1;this._shaderValue.texture=G$r}this._vb.bind_upload(this._ib);var G$v=G$Bq.worldMatrix4,G$H=G$a.TEMP;G$a.mulPre(this._mat,G$v[0],G$v[1],G$v[4],G$v[5],G$v[12],G$v[13],G$H);var G$A=G$Bq.worldMatrix4=G$K.tempMatrix4;G$A[0]=G$H.a,G$A[1]=G$H.b,G$A[4]=G$H.c,G$A[5]=G$H.d,G$A[12]=G$H.tx,G$A[13]=G$H.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var G$y=G$pq.mainContext;return G$F.activeBlendFunction!==this._blendFn&&(G$y.enable(3042),this._blendFn(G$y),G$F.activeBlendFunction=this._blendFn),G$Q.drawCall++,G$Q.trianglesFaces+=this._numEle/3,G$y.drawElements(4,this._numEle,5123,this.startIndex),G$Bq.worldMatrix4=G$v,G$Cq.activeShader=null,1},G$K.create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){void 0===G$O&&(G$O=0);var G$N=G$K._cache._length?G$K._cache[--G$K._cache._length]:new G$K;G$N._ib=G$v,G$N._vb=G$r,G$N._numEle=G$H,G$N._shader=G$A,G$N._shaderValue=G$y;var G$x=G$q._nBlendType;switch(G$N._blendFn=G$q._targets?G$F.targetFns[G$x]:G$F.fns[G$x],G$O){case 0:G$N.offset=0,G$N.startIndex=G$W/(G$gq.BYTES_PE*G$r.vertexStride)*1.5,G$N.startIndex*=G$gq.BYTES_PIDX;break;case 1:G$N.startIndex=G$R,G$N.offset=G$W}return G$N},G$K._cache=((G$K._cache=[])._length=0,G$K._cache),G$K.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$K}(),G$Nq=function(){function G$v(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new G$$,this.screenRect=new G$$}G$T(G$v,"laya.webgl.submit.SubmitScissor");var G$q=G$v.prototype;return G$z.imps(G$q,{"laya.webgl.submit.ISubmit":!0}),G$q._scissor=function(G$q,G$r,G$v,G$H){var G$A=G$Bq.worldMatrix4,G$y=G$A[0],G$R=G$A[5],G$W=G$A[12],G$O=G$A[13];if(G$H*=G$R,(G$v*=G$y)<1||G$H<1)return!1;var G$N=(G$q=G$q*G$y+G$W)+G$v,G$x=(G$r=G$r*G$R+G$O)+G$H;G$q<0&&(G$v=G$N-(G$q=0)),G$r<0&&(G$H=G$x-(G$r=0));var G$K=G$Bq.worldClipRect;if(G$q=Math.max(G$q,G$K.x),G$r=Math.max(G$r,G$K.y),G$v=Math.min(G$N,G$K.right)-G$q,G$H=Math.min(G$x,G$K.bottom)-G$r,G$v<1||G$H<1)return!1;var G$T=G$Bq.worldScissorTest;return this.screenRect.copyFrom(G$K),G$K.x=G$q,G$K.y=G$r,G$K.width=G$v,G$K.height=G$H,G$Bq.worldScissorTest=!0,G$r=G$Bq.height-G$r-G$H,G$pq.mainContext.scissor(G$q,G$r,G$v,G$H),G$pq.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),G$T?(G$r=G$Bq.height-this.screenRect.y-this.screenRect.height,G$pq.mainContext.scissor(this.screenRect.x,G$r,this.screenRect.width,this.screenRect.height),G$pq.mainContext.enable(3089)):(G$pq.mainContext.disable(3089),G$Bq.worldScissorTest=!1),G$K.copyFrom(this.screenRect),!0},G$q._scissorWithTagart=function(G$q,G$r,G$v,G$H){if(G$v<1||G$H<1)return!1;var G$A=G$q+G$v,G$y=G$r+G$H;G$q<0&&(G$v=G$A-(G$q=0)),G$r<0&&(G$H=G$y-(G$r=0));var G$R=G$Bq.worldClipRect;if(G$q=Math.max(G$q,G$R.x),G$r=Math.max(G$r,G$R.y),G$v=Math.min(G$A,G$R.right)-G$q,G$H=Math.min(G$y,G$R.bottom)-G$r,G$v<1||G$H<1)return!1;var G$W=G$Bq.worldScissorTest;return this.screenRect.copyFrom(G$R),G$Bq.worldScissorTest=!0,G$R.x=G$q,G$R.y=G$r,G$R.width=G$v,G$R.height=G$H,G$r=G$Bq.height-G$r-G$H,G$pq.mainContext.scissor(G$q,G$r,G$v,G$H),G$pq.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),G$W?(G$r=G$Bq.height-this.screenRect.y-this.screenRect.height,G$pq.mainContext.scissor(this.screenRect.x,G$r,this.screenRect.width,this.screenRect.height),G$pq.mainContext.enable(3089)):(G$pq.mainContext.disable(3089),G$Bq.worldScissorTest=!1),G$R.copyFrom(this.screenRect),!0},G$q.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},G$q.getRenderType=function(){return 0},G$q.releaseRender=function(){var G$q=G$v._cache;(G$q[G$q._length++]=this).context=null},G$v.create=function(G$q){var G$r=G$v._cache._length?G$v._cache[--G$v._cache._length]:new G$v;return G$r.context=G$q,G$r},G$v._cache=((G$v._cache=[])._length=0,G$v._cache),G$v}(),G$xq=function(){function G$O(){this.step=0,this.blendMode=null,this.level=0}G$T(G$O,"laya.webgl.submit.SubmitStencil");var G$q=G$O.prototype;return G$z.imps(G$q,{"laya.webgl.submit.ISubmit":!0}),G$q.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},G$q.getRenderType=function(){return 0},G$q.releaseRender=function(){var G$q=G$O._cache;G$q[G$q._length++]=this},G$q.do1=function(){var G$q=G$pq.mainContext;G$q.enable(2960),G$q.clear(1024),G$q.colorMask(!1,!1,!1,!1),G$q.stencilFunc(514,this.level,255),G$q.stencilOp(7680,7680,7682)},G$q.do2=function(){var G$q=G$pq.mainContext;G$q.stencilFunc(514,this.level+1,255),G$q.colorMask(!0,!0,!0,!0),G$q.stencilOp(7680,7680,7680)},G$q.do3=function(){var G$q=G$pq.mainContext;G$q.colorMask(!0,!0,!0,!0),G$q.stencilOp(7680,7680,7680),G$q.clear(1024),G$q.disable(2960)},G$q.do4=function(){var G$q=G$pq.mainContext;0==this.level&&(G$q.enable(2960),G$q.clear(1024)),G$q.colorMask(!1,!1,!1,!1),G$q.stencilFunc(519,0,255),G$q.stencilOp(7680,7680,7682)},G$q.do5=function(){var G$q=G$pq.mainContext;G$q.stencilFunc(514,this.level,255),G$q.colorMask(!0,!0,!0,!0),G$q.stencilOp(7680,7680,7680)},G$q.do6=function(){var G$q=G$pq.mainContext;G$F.targetFns[G$F.TOINT[this.blendMode]](G$q)},G$q.do7=function(){var G$q=G$pq.mainContext;G$q.colorMask(!1,!1,!1,!1),G$q.stencilOp(7680,7680,7683)},G$q.do8=function(){var G$q=G$pq.mainContext;G$q.colorMask(!0,!0,!0,!0),G$q.stencilFunc(514,this.level,255),G$q.stencilOp(7680,7680,7680)},G$O.restore=function(G$q,G$r,G$v,G$H,G$A){var G$y;if((G$q._renderKey=0)<G$O._mask&&G$O._mask--,0==G$O._mask)G$y=laya.webgl.submit.SubmitStencil.create(3),G$q.addRenderObject(G$y),G$q._curSubmit=G$yq.RENDERBASE;else{G$y=laya.webgl.submit.SubmitStencil.create(7),G$q.addRenderObject(G$y);var G$R=G$q._vb;G$R._byteLength;if(G$Xq.fillRectImgVb(G$R,null,G$r.x,G$r.y,G$r.width,G$r.height,G$o.DEF_UV,G$v,G$H,G$A,0,0)){G$q._shader2D.glTexture=null;var G$W=G$q._curSubmit=G$yq.createSubmit(G$q,G$q._ib,G$R,(G$R._byteLength-64)/32*3,G$Vq.create(2,0));G$W.shaderValue.ALPHA=1,G$q._submits[G$q._submits._length++]=G$W,G$q._curSubmit._numEle+=6,G$q._curSubmit=G$yq.RENDERBASE}else alert("clipRect calc stencil rect error");G$y=laya.webgl.submit.SubmitStencil.create(8),G$q.addRenderObject(G$y)}},G$O.restore2=function(G$q,G$r){var G$v;(G$q._renderKey=0)<G$O._mask&&G$O._mask--,0==G$O._mask?(G$v=laya.webgl.submit.SubmitStencil.create(3),G$q.addRenderObject(G$v),G$q._curSubmit=G$yq.RENDERBASE):(G$v=laya.webgl.submit.SubmitStencil.create(7),G$q.addRenderObject(G$v),G$q._submits[G$q._submits._length++]=G$r,G$v=laya.webgl.submit.SubmitStencil.create(8),G$q.addRenderObject(G$v))},G$O.create=function(G$q){var G$r=G$O._cache._length?G$O._cache[--G$O._cache._length]:new G$O;return 5==(G$r.step=G$q)&&++G$O._mask,G$r.level=G$O._mask,G$r},G$O._cache=((G$O._cache=[])._length=0,G$O._cache),G$O._mask=0,G$O}(),G$Kq=function(){function G$W(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}G$T(G$W,"laya.webgl.submit.SubmitTarget");var G$q=G$W.prototype;return G$z.imps(G$q,{"laya.webgl.submit.ISubmit":!0}),G$q.renderSubmit=function(){this._vb.bind_upload(this._ib);var G$q=this.scope.getValue(this.proName);return G$q&&(this.shaderValue.texture=G$q.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[G$q.width,G$q.height]),this.shaderValue.upload(),this.blend(),G$Q.drawCall++,G$Q.trianglesFaces+=this._numEle/3,G$pq.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},G$q.blend=function(){if(G$F.activeBlendFunction!==G$F.fns[this.blendType]){var G$q=G$pq.mainContext;G$q.enable(3042),G$F.fns[this.blendType](G$q),G$F.activeBlendFunction=G$F.fns[this.blendType]}},G$q.getRenderType=function(){return 0},G$q.releaseRender=function(){var G$q=G$W._cache;(G$q[G$q._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},G$W.create=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$W._cache._length?G$W._cache[--G$W._cache._length]:new G$W;return G$R._ib=G$r,G$R._vb=G$v,G$R.proName=G$y,G$R._startIdx=G$H*G$gq.BYTES_PIDX,G$R._numEle=0,G$R.blendType=G$q._nBlendType,G$R.shaderValue=G$A,G$R.shaderValue.setValue(G$q._shader2D),G$R},G$W._cache=((G$W._cache=[])._length=0,G$W._cache),G$W}(),G$Tq=function(){function G$q(){this._sourceStr=null}G$T(G$q,"laya.webgl.text.CharSegment");var G$r=G$q.prototype;return G$z.imps(G$r,{"laya.webgl.text.ICharSegment":!0}),G$r.textToSpit=function(G$q){this._sourceStr=G$q},G$r.getChar=function(G$q){return this._sourceStr.charAt(G$q)},G$r.getCharCode=function(G$q){return this._sourceStr.charCodeAt(G$q)},G$r.length=function(){return this._sourceStr.length},G$q}(),G$jq=function(){var G$q;function G$Q(){}return G$T(G$Q,"laya.webgl.text.DrawText"),G$Q.__init__=function(){G$Q._charsTemp=new Array,G$Q._drawValue=new G$q,G$Q._charSeg=new G$Tq},G$Q.customCharSeg=function(G$q){G$Q._charSeg=G$q},G$Q.getChar=function(G$q,G$r,G$v){var G$H=G$fq.createOneChar(G$q,G$v);return-1!=G$r&&(G$Q._charsCache[G$r]=G$H),G$H},G$Q._drawSlow=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K,G$T,G$j,G$D){var G$g,G$X,G$m=G$Q._drawValue.value(G$y,G$W,G$O,G$N,G$T,G$j,G$D),G$B=0,G$e=0,G$p=G$Q._charsTemp,G$M=0,G$z=NaN;if(G$H)for(G$p.length=G$H.length,G$B=0,G$e=G$H.length;G$B<G$e;G$B++)(G$X=G$H[G$B])&&(G$z=G$X.charNum+G$m.txtID,G$p[G$B]=G$g=G$Q._charsCache[G$z]||G$Q.getChar(G$X.char,G$z,G$m),G$g.active());else{var G$P=G$v instanceof laya.utils.WordText?G$v.toString():G$v;if(G$Y.CharacterCache){G$Q._charSeg.textToSpit(G$P);var G$V=G$Q._charSeg.length();for(G$B=0,G$e=G$p.length=G$V;G$B<G$e;G$B++)G$z=G$Q._charSeg.getCharCode(G$B)+G$m.txtID,G$p[G$B]=G$g=G$Q._charsCache[G$z]||G$Q.getChar(G$Q._charSeg.getChar(G$B),G$z,G$m),G$g.active(),G$M+=G$g.cw}else G$p.length=0,(G$g=G$Q.getChar(G$P,-1,G$m)).active(),G$M+=G$g.cw,G$p[0]=G$g}var G$a=0;null!==G$R&&"left"!==G$R&&(G$a=-("center"==G$R?G$M/2:G$M));var G$J,G$$,G$G=NaN,G$E=0;if(G$H)for(G$B=0,G$e=G$p.length;G$B<G$e;G$B++)G$g=G$p[G$B],G$X=G$H[G$B],G$g&&G$X&&!G$g.isSpace&&(G$G=G$g.borderSize,G$J=G$g.texture,G$r._drawText(G$J,G$x+G$a+G$X.x*G$T-G$G,G$K+G$X.y*G$j-G$G,G$J.width,G$J.height,G$A,0,0,0,0));else{for(G$B=0,G$e=G$p.length;G$B<G$e;G$B++)(G$g=G$p[G$B])&&!G$g.isSpace&&(G$G=G$g.borderSize,G$J=G$g.texture,G$r._drawText(G$J,G$x+G$a-G$G,G$K-G$G,G$J.width,G$J.height,G$A,0,0,0,0),G$q&&((G$$=G$q[G$E++])||(G$$=G$q[G$E-1]=[]),G$$[0]=G$J,G$$[1]=G$a-G$G,G$$[2]=-G$G)),G$a+=G$g.cw;G$q&&(G$q.length=G$E)}},G$Q._drawFast=function(G$q,G$r,G$v,G$H,G$A){for(var G$y,G$R,G$W=0,G$O=G$q.length;G$W<G$O;G$W++)(G$y=(G$R=G$q[G$W])[0]).active(),G$r._drawText(G$y,G$H+G$R[1],G$A+G$R[2],G$y.width,G$y.height,G$v,0,0,0,0)},G$Q.drawText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K){if(void 0===G$K&&(G$K=0),!(G$r&&0===G$r.length||G$v&&0===G$v.length)){var G$T=G$H.a,G$j=G$H.d;(0!==G$H.b||0!==G$H.c)&&(G$T=G$j=1);var G$D=1!==G$T||1!==G$j;if(G$D&&G$z.stage.transform){var G$g=G$z.stage.transform;G$D=G$g.a===G$T&&G$g.d===G$j}else G$D=!1;if(G$D){var G$X=(G$H=G$H.copyTo(G$Pq._tmpMatrix)).tx,G$m=G$H.ty;G$H.scale(1/G$T,1/G$j),G$H._checkTransform(),G$N*=G$T,G$x*=G$j,G$N+=G$X-G$H.tx,G$x+=G$m-G$H.ty}else G$T=G$j=1;if(G$v)G$Q._drawSlow(null,G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$T,G$j,G$K);else{if(null===G$r.toUpperCase){var G$B=G$T+1e5*G$j,G$e=G$r;return void(G$e.changed||G$e.id!==G$B?(G$e.id=G$B,G$e.changed=!1,G$Q._drawSlow(G$e.save,G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$T,G$j,G$K)):G$Q._drawFast(G$e.save,G$q,G$H,G$N,G$x))}var G$p=G$r+G$A.toString()+G$R+G$W+G$O+G$T+G$j+G$y,G$M=G$Q._textsCache[G$p];G$Y.CharacterCache?G$M?G$Q._drawFast(G$M,G$q,G$H,G$N,G$x):(G$Q._textsCache.__length||(G$Q._textsCache.__length=0),G$Q._textsCache.__length>G$P.WebGLTextCacheCount&&((G$Q._textsCache={}).__length=0,G$Q._curPoolIndex=0),G$Q._textCachesPool[G$Q._curPoolIndex]?(G$M=G$Q._textsCache[G$p]=G$Q._textCachesPool[G$Q._curPoolIndex]).length=0:G$Q._textCachesPool[G$Q._curPoolIndex]=G$M=G$Q._textsCache[G$p]=[],G$Q._textsCache.__length++,G$Q._curPoolIndex++,G$Q._drawSlow(G$M,G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$T,G$j,G$K)):G$Q._drawSlow(G$M,G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$T,G$j,G$K)}}},G$Q._charsTemp=null,G$Q._textCachesPool=[],G$Q._curPoolIndex=0,G$Q._charsCache={},G$Q._textsCache={},G$Q._drawValue=null,G$Q.d=[],G$Q._charSeg=null,G$Q.__init$=function(){G$q=function(){function G$O(){}return G$T(G$O,""),G$O.prototype.value=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this.font=G$q,this.fillColor=G$r,this.borderColor=G$v,this.lineWidth=G$H,this.scaleX=G$A,this.scaleY=G$y,this.underLine=G$R;var G$W=G$q.toString()+G$A+G$y+G$H+(G$r?G$r.toLowerCase():" ")+(G$v?G$v.toLowerCase():" ")+G$R;return this.txtID=G$O._keymap[G$W],this.txtID||(this.txtID=1e-7*++G$O._keymapCount,G$O._keymap[G$W]=this.txtID),this},G$O.clear=function(){G$O._keymap={},G$O._keymapCount=1},G$O._keymap={},G$O._keymapCount=1,G$O}()},G$Q}(),G$Dq=function(){function G$A(G$q){this._index=0,this._size=14,this._italic=-2,G$A._cache2=G$A._cache2||[],this.setFont(G$q||"14px Arial")}G$T(G$A,"laya.webgl.text.FontInContext");var G$q=G$A.prototype;return G$q.setFont=function(G$q){var G$r=G$A._cache2[G$q];if(G$r)this._words=G$r[0],this._size=G$r[1];else{this._words=G$q.split(" ");for(var G$v=0,G$H=this._words.length;G$v<G$H;G$v++)if(0<this._words[G$v].indexOf("px")){this._index=G$v;break}this._size=parseInt(this._words[this._index]),G$A._cache2[G$q]=[this._words,this._size]}this._text=null,this._italic=-2},G$q.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},G$q.hasType=function(G$q){for(var G$r=0,G$v=this._words.length;G$r<G$v;G$r++)if(this._words[G$r]===G$q)return G$r;return-1},G$q.removeType=function(G$q){for(var G$r=0,G$v=this._words.length;G$r<G$v;G$r++)if(this._words[G$r]===G$q){this._words.splice(G$r,1),this._index>G$r&&this._index--;break}this._text=null,this._italic=-2},G$q.copyTo=function(G$q){return G$q._text=this._text,G$q._size=this._size,G$q._index=this._index,G$q._words=this._words.slice(),G$q._italic=-2,G$q},G$q.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},G$H(0,G$q,"size",function(){return this._size},function(G$q){this._size=G$q,this._words[this._index]=G$q+"px",this._text=null}),G$A.create=function(G$q){var G$r=G$A._cache[G$q];return G$r||(G$r=G$A._cache[G$q]=new G$A(G$q))},G$A.EMPTY=new G$A,G$A._cache={},G$A._cache2=null,G$A}(),G$gq=function(){function G$q(){}return G$T(G$q,"laya.webgl.utils.CONST3D2D"),G$q.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$q.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],G$q.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],G$q._TMPARRAY=[],G$q._OFFSETX=0,G$q._OFFSETY=0,G$R(G$q,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),G$q}(),G$Xq=function(){function G$D(){}return G$T(G$D,"laya.webgl.utils.GlUtils"),G$D.make2DProjection=function(G$q,G$r,G$v){return[2/G$q,0,0,0,0,-2/G$r,0,0,0,0,2/G$v,0,-1,1,0,1]},G$D.fillIBQuadrangle=function(G$q,G$r){if(65535/4<G$r)throw Error("IBQuadrangle count:"+G$r+" must<:"+Math.floor(65535/4));G$r=Math.floor(G$r),G$q._resizeBuffer(6*(G$r+1)*2,!1),G$q.byteLength=G$q.bufferLength;for(var G$v=G$q.getUint16Array(),G$H=0,G$A=0;G$A<G$r;G$A++)G$v[G$H++]=4*G$A,G$v[G$H++]=4*G$A+2,G$v[G$H++]=4*G$A+1,G$v[G$H++]=4*G$A,G$v[G$H++]=4*G$A+3,G$v[G$H++]=4*G$A+2;return G$q.setNeedUpload(),!0},G$D.expandIBQuadrangle=function(G$q,G$r){G$q.bufferLength>=6*G$r*2||G$D.fillIBQuadrangle(G$q,G$r)},G$D.mathCeilPowerOfTwo=function(G$q){return G$q--,G$q|=G$q>>1,G$q|=G$q>>2,G$q|=G$q>>4,G$q|=G$q>>8,G$q|=G$q>>16,++G$q},G$D.fillQuadrangleImgVb=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O=16+(G$q._byteLength>>2);G$q.byteLength=G$O<<2;var G$N=G$q.getFloat32Array();G$N[(G$O-=16)+2]=G$A[0],G$N[G$O+3]=G$A[1],G$N[G$O+6]=G$A[2],G$N[G$O+7]=G$A[3],G$N[G$O+10]=G$A[4],G$N[G$O+11]=G$A[5],G$N[G$O+14]=G$A[6],G$N[G$O+15]=G$A[7];var G$x=G$y.a,G$K=G$y.b,G$T=G$y.c,G$j=G$y.d;if(1!==G$x||0!==G$K||0!==G$T||1!==G$j){G$y.bTransform=!0;var G$D=G$y.tx+G$R,G$g=G$y.ty+G$W;G$N[G$O]=(G$H[0]+G$r)*G$x+(G$H[1]+G$v)*G$T+G$D,G$N[G$O+1]=(G$H[0]+G$r)*G$K+(G$H[1]+G$v)*G$j+G$g,G$N[G$O+4]=(G$H[2]+G$r)*G$x+(G$H[3]+G$v)*G$T+G$D,G$N[G$O+5]=(G$H[2]+G$r)*G$K+(G$H[3]+G$v)*G$j+G$g,G$N[G$O+8]=(G$H[4]+G$r)*G$x+(G$H[5]+G$v)*G$T+G$D,G$N[G$O+9]=(G$H[4]+G$r)*G$K+(G$H[5]+G$v)*G$j+G$g,G$N[G$O+12]=(G$H[6]+G$r)*G$x+(G$H[7]+G$v)*G$T+G$D,G$N[G$O+13]=(G$H[6]+G$r)*G$K+(G$H[7]+G$v)*G$j+G$g}else G$y.bTransform=!1,G$r+=G$y.tx+G$R,G$v+=G$y.ty+G$W,G$N[G$O]=G$r+G$H[0],G$N[G$O+1]=G$v+G$H[1],G$N[G$O+4]=G$r+G$H[2],G$N[G$O+5]=G$v+G$H[3],G$N[G$O+8]=G$r+G$H[4],G$N[G$O+9]=G$v+G$H[5],G$N[G$O+12]=G$r+G$H[6],G$N[G$O+13]=G$v+G$H[7];return G$q._upload=!0},G$D.fillTranglesVB=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){var G$W=(G$q._byteLength>>2)+G$H.length;G$q.byteLength=G$W<<2;var G$O=G$q.getFloat32Array();G$W-=G$H.length;for(var G$N=G$H.length,G$x=G$A.a,G$K=G$A.b,G$T=G$A.c,G$j=G$A.d,G$D=0;G$D<G$N;G$D+=4)if(G$O[G$W+G$D+2]=G$H[G$D+2],G$O[G$W+G$D+3]=G$H[G$D+3],1!==G$x||0!==G$K||0!==G$T||1!==G$j){G$A.bTransform=!0;var G$g=G$A.tx+G$y,G$X=G$A.ty+G$R;G$O[G$W+G$D]=(G$H[G$D]+G$r)*G$x+(G$H[G$D+1]+G$v)*G$T+G$g,G$O[G$W+G$D+1]=(G$H[G$D]+G$r)*G$K+(G$H[G$D+1]+G$v)*G$j+G$X}else G$A.bTransform=!1,G$r+=G$A.tx+G$y,G$v+=G$A.ty+G$R,G$O[G$W+G$D]=G$r+G$H[G$D],G$O[G$W+G$D+1]=G$v+G$H[G$D+1];return G$q._upload=!0},G$D.copyPreImgVb=function(G$q,G$r,G$v){var G$H=G$q._byteLength>>2;G$q.byteLength=G$H+16<<2;for(var G$A=G$q.getFloat32Array(),G$y=0,G$R=G$H-16;G$y<4;G$y++)G$A[G$H]=G$A[G$R]+G$r,++G$R,G$A[++G$H]=G$A[G$R]+G$v,++G$R,G$A[++G$H]=G$A[G$R],++G$R,G$A[++G$H]=G$A[G$R],++G$H,++G$R;G$q._upload=!0},G$D.fillRectImgVb=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K,G$T){void 0===G$T&&(G$T=!1);var G$j,G$D,G$g,G$X,G$m,G$B,G$e,G$p,G$M,G$z,G$P,G$V,G$a,G$J,G$$,G$G,G$E=1,G$Q=G$W.a,G$s=G$W.b,G$Z=G$W.c,G$Y=G$W.d,G$o=G$r&&G$r.width<99999999;if(1!==G$Q||0!==G$s||0!==G$Z||1!==G$Y?(G$W.bTransform=!0,0===G$s&&0===G$Z&&(G$E=23,G$M=G$A+G$v,G$z=G$y+G$H,G$j=G$Q*G$v+(G$P=G$W.tx+G$O),G$g=G$Q*G$M+G$P,G$D=G$Y*G$H+(G$V=G$W.ty+G$N),G$X=G$Y*G$z+G$V)):(G$E=23,G$W.bTransform=!1,G$g=(G$j=G$v+G$W.tx+G$O)+G$A,G$X=(G$D=G$H+G$W.ty+G$N)+G$y),G$o&&(G$m=G$r.x,G$B=G$r.y,G$e=G$r.width+G$m,G$p=G$r.height+G$B),1!==G$E){if(Math.min(G$j,G$g)>=G$e)return!1;if(Math.min(G$D,G$X)>=G$p)return!1;if(Math.max(G$g,G$j)<=G$m)return!1;if(Math.max(G$X,G$D)<=G$B)return!1}var G$C=G$q._byteLength>>2;G$q.byteLength=16+G$C<<2;var G$c=G$q.getFloat32Array();switch(G$c[2+G$C]=G$R[0],G$c[3+G$C]=G$R[1],G$c[6+G$C]=G$R[2],G$c[7+G$C]=G$R[3],G$c[10+G$C]=G$R[4],G$c[11+G$C]=G$R[5],G$c[14+G$C]=G$R[6],G$c[15+G$C]=G$R[7],G$E){case 1:G$P=G$W.tx+G$O,G$V=G$W.ty+G$N;var G$b=G$Q*G$v,G$d=G$Z*G$H,G$u=G$Y*G$H,G$I=G$s*G$v,G$t=G$Q*(G$M=G$A+G$v),G$F=G$Z*(G$z=G$y+G$H),G$U=G$Y*G$z,G$_=G$s*G$M;G$T?(G$a=G$b+G$d+G$P,G$$=Math.round(G$a)-G$a,G$J=G$u+G$I+G$V,G$G=Math.round(G$J)-G$J,G$c[G$C]=G$a+G$$,G$c[1+G$C]=G$J+G$G,G$c[4+G$C]=G$t+G$d+G$P+G$$,G$c[5+G$C]=G$u+G$_+G$V+G$G,G$c[8+G$C]=G$t+G$F+G$P+G$$,G$c[9+G$C]=G$U+G$_+G$V+G$G,G$c[12+G$C]=G$b+G$F+G$P+G$$,G$c[13+G$C]=G$U+G$I+G$V+G$G):(G$c[G$C]=G$b+G$d+G$P,G$c[1+G$C]=G$u+G$I+G$V,G$c[4+G$C]=G$t+G$d+G$P,G$c[5+G$C]=G$u+G$_+G$V,G$c[8+G$C]=G$t+G$F+G$P,G$c[9+G$C]=G$U+G$_+G$V,G$c[12+G$C]=G$b+G$F+G$P,G$c[13+G$C]=G$U+G$I+G$V);break;case 23:G$T?(G$a=G$j+G$x,G$$=Math.round(G$a)-G$a,G$J=G$D,G$G=Math.round(G$J)-G$J,G$c[G$C]=G$a+G$$,G$c[1+G$C]=G$J+G$G,G$c[4+G$C]=G$g+G$x+G$$,G$c[5+G$C]=G$D+G$G,G$c[8+G$C]=G$g+G$$,G$c[9+G$C]=G$X+G$G,G$c[12+G$C]=G$j+G$$,G$c[13+G$C]=G$X+G$G):(G$c[G$C]=G$j+G$x,G$c[1+G$C]=G$D,G$c[4+G$C]=G$g+G$x,G$c[5+G$C]=G$D,G$c[8+G$C]=G$g,G$c[9+G$C]=G$X,G$c[12+G$C]=G$j,G$c[13+G$C]=G$X)}return G$q._upload=!0},G$D.fillLineVb=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O=.5*G$R,G$N=G$D._fillLineArray,G$x=-(G$H-G$y),G$K=G$v-G$A,G$T=Math.sqrt(G$x*G$x+G$K*G$K);G$x/=G$T,G$K/=G$T,G$x*=G$O,G$K*=G$O,G$N[0]=G$v-G$x,G$N[1]=G$H-G$K,G$N[4]=G$v+G$x,G$N[5]=G$H+G$K,G$N[8]=G$A+G$x,G$N[9]=G$y+G$K,G$N[12]=G$A-G$x,G$N[13]=G$y-G$K,G$W&&G$W.transformPointArray(G$N,G$N);var G$j=16+(G$q._byteLength>>2);return G$q.byteLength=G$j<<2,G$q.insertData(G$N,G$j-16),!0},G$D._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G$D}(),G$mq=(function(){function G$O(){}G$T(G$O,"laya.webgl.utils.MatirxArray"),G$O.ArrayMul=function(G$q,G$r,G$v){if(G$q)if(G$r)for(var G$H=NaN,G$A=NaN,G$y=NaN,G$R=NaN,G$W=0;G$W<4;G$W++)G$H=G$q[G$W],G$A=G$q[G$W+4],G$y=G$q[G$W+8],G$R=G$q[G$W+12],G$v[G$W]=G$H*G$r[0]+G$A*G$r[1]+G$y*G$r[2]+G$R*G$r[3],G$v[G$W+4]=G$H*G$r[4]+G$A*G$r[5]+G$y*G$r[6]+G$R*G$r[7],G$v[G$W+8]=G$H*G$r[8]+G$A*G$r[9]+G$y*G$r[10]+G$R*G$r[11],G$v[G$W+12]=G$H*G$r[12]+G$A*G$r[13]+G$y*G$r[14]+G$R*G$r[15];else G$O.copyArray(G$q,G$v);else G$O.copyArray(G$r,G$v)},G$O.copyArray=function(G$q,G$r){if(G$q&&G$r)for(var G$v=0;G$v<G$q.length;G$v++)G$r[G$v]=G$q[G$v]}}(),function(){function G$r(G$q,G$r,G$v){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=G$q,this._vb=new G$kq(G$q,35048),G$r&&this._vb._resizeBuffer(G$r,!1),this._ib=new G$nq,G$v&&this._ib._resizeBuffer(G$v,!1)}G$T(G$r,"laya.webgl.utils.Mesh2D");var G$q=G$r.prototype;return G$q.cloneWithNewVB=function(){var G$q=new G$r(this._stride,0,0);return G$q._ib=this._ib,G$q._quadNum=this._quadNum,G$q._attribInfo=this._attribInfo,G$q},G$q.cloneWithNewVBIB=function(){var G$q=new G$r(this._stride,0,0);return G$q._attribInfo=this._attribInfo,G$q},G$q.getVBW=function(){return this._vb.setNeedUpload(),this._vb},G$q.getVBR=function(){return this._vb},G$q.getIBR=function(){return this._ib},G$q.getIBW=function(){return this._ib.setNeedUpload(),this._ib},G$q.createQuadIB=function(G$q){this._quadNum=G$q,this._ib._resizeBuffer(6*G$q*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var G$r=this._ib.getUint16Array(),G$v=0,G$H=0,G$A=0;G$A<G$q;G$A++)G$r[G$v++]=G$H,G$r[G$v++]=G$H+2,G$r[G$v++]=G$H+1,G$r[G$v++]=G$H,G$r[G$v++]=G$H+3,G$r[G$v++]=G$H+2,G$H+=4;this._ib.setNeedUpload()},G$q.setAttributes=function(G$q){if(this._attribInfo=G$q,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},G$q.getEleNum=function(){return this._ib.getBuffer().byteLength/2},G$q.releaseMesh=function(){},G$q.destroy=function(){},G$q.clearVB=function(){this._vb.clear()},G$r._gvaoid=0,G$r}()),G$Bq=function(){function G$A(){}return G$T(G$A,"laya.webgl.utils.RenderState2D"),G$A.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},G$A.mat2MatArray=function(G$q,G$r){var G$v=G$q,G$H=G$r;return G$H[0]=G$v.a,G$H[1]=G$v.b,G$H[2]=G$A.EMPTYMAT4_ARRAY[2],G$H[3]=G$A.EMPTYMAT4_ARRAY[3],G$H[4]=G$v.c,G$H[5]=G$v.d,G$H[6]=G$A.EMPTYMAT4_ARRAY[6],G$H[7]=G$A.EMPTYMAT4_ARRAY[7],G$H[8]=G$A.EMPTYMAT4_ARRAY[8],G$H[9]=G$A.EMPTYMAT4_ARRAY[9],G$H[10]=G$A.EMPTYMAT4_ARRAY[10],G$H[11]=G$A.EMPTYMAT4_ARRAY[11],G$H[12]=G$v.tx,G$H[13]=G$v.ty,G$H[14]=G$A.EMPTYMAT4_ARRAY[14],G$H[15]=G$A.EMPTYMAT4_ARRAY[15],G$r},G$A.restoreTempArray=function(){G$A.TEMPMAT4_ARRAY[0]=1,G$A.TEMPMAT4_ARRAY[1]=0,G$A.TEMPMAT4_ARRAY[4]=0,G$A.TEMPMAT4_ARRAY[5]=1,G$A.TEMPMAT4_ARRAY[12]=0,G$A.TEMPMAT4_ARRAY[13]=0},G$A.clear=function(){G$A.worldScissorTest=!1,G$A.worldShaderDefines=null,G$A.worldFilters=null,G$A.worldAlpha=1,G$A.worldClipRect.x=G$A.worldClipRect.y=0,G$A.worldClipRect.width=G$A.width,G$A.worldClipRect.height=G$A.height,G$A.curRenderTarget=null},G$A._MAXSIZE=99999999,G$A.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$A.worldMatrix4=G$A.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$A.worldAlpha=1,G$A.worldScissorTest=!1,G$A.worldFilters=null,G$A.worldShaderDefines=null,G$A.curRenderTarget=null,G$A.width=0,G$A.height=0,G$R(G$A,["worldMatrix",function(){return this.worldMatrix=new G$a},"worldClipRect",function(){return this.worldClipRect=new G$$(0,0,99999999,99999999)}]),G$A}(),G$eq=function(){var G$B,G$v;function G$e(G$q,G$r,G$v,G$H,G$A){var G$y=this;function G$R(G$q){var G$r=[],G$v=new G$B(G$r);return G$y._compileToTree(G$v,G$q.split("\n"),0,G$r,G$A),G$v}var G$W=G$j.now();this._VS=G$R(G$r),this._PS=G$R(G$v),this._nameMap=G$H,2<G$j.now()-G$W&&console.log("ShaderCompile use time:"+(G$j.now()-G$W)+"  size:"+G$r.length+"/"+G$v.length)}G$T(G$e,"laya.webgl.utils.ShaderCompile");var G$q=G$e.prototype;return G$q._compileToTree=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R,G$W,G$O,G$N,G$x,G$K,G$T=0,G$j=0,G$D=0,G$g=0;for(G$j=G$v;G$j<G$r.length;G$j++)if(!((G$W=G$r[G$j]).length<1)&&0!==(G$T=G$W.indexOf("//"))){if(0<=G$T&&(G$W=G$W.substr(0,G$T)),G$y=G$K||new G$B(G$H),G$K=null,G$y.text=G$W,G$y.noCompile=!0,0<=(G$T=G$W.indexOf("#"))){for(G$O="#",G$g=G$T+1,G$D=G$W.length;G$g<G$D;G$g++){var G$X=G$W.charAt(G$g);if(" "===G$X||"\t"===G$X||"\r"===G$X||"\n"===G$X||"?"===G$X)break;G$O+=G$X}switch(G$y.name=G$O){case"#ifdef":case"#ifndef":if(G$y.src=G$W,G$y.noCompile=null!=G$W.match(/[!&|()=<>]/),G$y.noCompile?console.log("function():Boolean{return "+G$W.substr(G$T+G$y.name.length)+"}"):(G$x=G$W.replace(/^\s*/,"").split(/\s+/),G$y.setCondition(G$x[1],"#ifdef"===G$O?1:2),G$y.text="//"+G$y.text),G$y.setParent(G$q),G$q=G$y,G$A)for(G$x=G$W.substr(G$g).split(G$e._splitToWordExps3),G$g=0;G$g<G$x.length;G$g++)(G$W=G$x[G$g]).length&&(G$A[G$W]=!0);continue;case"#if":if(G$y.src=G$W,G$y.noCompile=!0,G$y.setParent(G$q),G$q=G$y,G$A)for(G$x=G$W.substr(G$g).split(G$e._splitToWordExps3),G$g=0;G$g<G$x.length;G$g++)(G$W=G$x[G$g]).length&&"defined"!=G$W&&(G$A[G$W]=!0);continue;case"#else":G$y.src=G$W,G$R=(G$q=G$q.parent).childs[G$q.childs.length-1],G$y.noCompile=G$R.noCompile,G$y.noCompile||(G$y.condition=G$R.condition,G$y.conditionType=1==G$R.conditionType?2:1,G$y.text="//"+G$y.text+" "+G$R.text+" "+G$y.conditionType),G$y.setParent(G$q),G$q=G$y;continue;case"#endif":G$R=(G$q=G$q.parent).childs[G$q.childs.length-1],G$y.noCompile=G$R.noCompile,G$y.noCompile||(G$y.text="//"+G$y.text),G$y.setParent(G$q);continue;case"#include":G$x=G$e.splitToWords(G$W,null);var G$m=G$e.includes[G$x[1]];if(!G$m)throw"ShaderCompile error no this include file:"+G$x[1];if((G$T=G$x[0].indexOf("?"))<0){G$y.setParent(G$q),G$W=G$m.getWith("with"==G$x[2]?G$x[3]:null),this._compileToTree(G$y,G$W.split("\n"),0,G$H,G$A),G$y.text="";continue}G$y.setCondition(G$x[0].substr(G$T+1),1),G$y.text=G$m.getWith("with"==G$x[2]?G$x[3]:null);break;case"#import":G$N=(G$x=G$e.splitToWords(G$W,null))[1],G$H.push({node:G$y,file:G$e.includes[G$N],ofs:G$y.text.length});continue}}else{if((G$R=G$q.childs[G$q.childs.length-1])&&!G$R.name){0<G$H.length&&G$e.splitToWords(G$W,G$R),G$K=G$y,G$R.text+="\n"+G$W;continue}0<G$H.length&&G$e.splitToWords(G$W,G$y)}G$y.setParent(G$q)}},G$q.createShader=function(G$q,G$r,G$v){var G$H={},G$A="";if(G$q)for(var G$y in G$q)G$A+="#define "+G$y+"\n",G$H[G$y]=!0;var G$R=this._VS.toscript(G$H,[]),G$W=this._PS.toscript(G$H,[]);return(G$v||G$Lq.create)(G$A+G$R.join("\n"),G$A+G$W.join("\n"),G$r,this._nameMap)},G$e._parseOne=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R={type:G$e.shaderParamsMap[G$v[G$H+1]],name:G$v[G$H+2],size:isNaN(parseInt(G$v[G$H+3]))?1:parseInt(G$v[G$H+3])};return G$y&&("attribute"==G$A?G$q.push(G$R):G$r.push(G$R)),":"==G$v[G$H+3]&&(G$R.type=G$v[G$H+4],G$H+=2),G$H+=2},G$e.addInclude=function(G$q,G$r){if(!G$r||0===G$r.length)throw new Error("add shader include file err:"+G$q);if(G$e.includes[G$q])throw new Error("add shader include file err, has add:"+G$q);G$e.includes[G$q]=new G$v(G$r)},G$e.preGetParams=function(G$q,G$r){var G$v=[G$q,G$r],G$H={},G$A=[],G$y=[],G$R={},G$W=[];G$H.attributes=G$A,G$H.uniforms=G$y,G$H.defines=G$R;for(var G$O=0,G$N=0,G$x=0;G$x<2;G$x++){G$v[G$x]=G$v[G$x].replace(G$e._removeAnnotation,"");var G$K,G$T=G$v[G$x].match(G$e._reg);for(G$O=0,G$N=G$T.length;G$O<G$N;G$O++){var G$j=G$T[G$O];if("attribute"==G$j||"uniform"==G$j)G$O=G$e._parseOne(G$A,G$y,G$T,G$O,G$j,!0);else{if("#define"==G$j){G$W[G$j=G$T[++G$O]]=1;continue}if("#ifdef"==G$j){G$R[G$K=G$T[++G$O]]=G$R[G$K]||[];for(G$O++;G$O<G$N;G$O++)if("attribute"==(G$j=G$T[G$O])||"uniform"==G$j)G$O=G$e._parseOne(G$A,G$y,G$T,G$O,G$j,G$W[G$K]);else if("#else"==G$j)for(G$O++;G$O<G$N;G$O++)if("attribute"==(G$j=G$T[G$O])||"uniform"==G$j)G$O=G$e._parseOne(G$A,G$y,G$T,G$O,G$j,!G$W[G$K]);else if("#endif"==G$j)break}}}}return G$H},G$e.splitToWords=function(G$q,G$r){for(var G$v,G$H,G$A=[],G$y=-1,G$R=0,G$W=G$q.length;G$R<G$W;G$R++)if(G$v=G$q.charAt(G$R),0<=" \t=+-*/&%!<>()'\",;".indexOf(G$v)){if(0<=G$y&&1<G$R-G$y&&(G$H=G$q.substr(G$y,G$R-G$y),G$A.push(G$H)),'"'==G$v||"'"==G$v){var G$O=G$q.indexOf(G$v,G$R+1);if(G$O<0)throw"Sharder err:"+G$q;G$A.push(G$q.substr(G$R+1,G$O-G$R-1)),G$R=G$O,G$y=-1;continue}"("==G$v&&G$r&&0<G$A.length&&(G$H=G$A[G$A.length-1]+";","vec4;main;".indexOf(G$H)<0&&(G$r.useFuns+=G$H)),G$y=-1}else G$y<0&&(G$y=G$R);return G$y<G$W&&1<G$W-G$y&&(G$H=G$q.substr(G$y,G$W-G$y),G$A.push(G$H)),G$A},G$e.IFDEF_NO=0,G$e.IFDEF_YES=1,G$e.IFDEF_ELSE=2,G$e.IFDEF_PARENT=3,G$e._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),G$e._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),G$e._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),G$e.includes={},G$R(G$e,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),G$e.__init$=function(){G$B=function(){function G$v(G$q){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=G$q}G$T(G$v,"");var G$q=G$v.prototype;return G$q.setParent=function(G$q){G$q.childs.push(this),this.z=G$q.z+1,this.parent=G$q},G$q.setCondition=function(G$q,G$r){G$q&&(this.conditionType=G$r,G$q=G$q.replace(/(\s*$)/g,""),this.condition=function(){return this[G$q]},this.condition.__condition=G$q)},G$q.toscript=function(G$q,G$r){return this._toscript(G$q,G$r,++G$v.__id)},G$q._toscript=function(G$H,G$A,G$y){if(this.childs.length<1&&!this.text)return G$A;G$A.length;if(this.condition){var G$q=!!this.condition.call(G$H);if(2===this.conditionType&&(G$q=!G$q),!G$q)return G$A}if(this.text&&G$A.push(this.text),0<this.childs.length&&this.childs.forEach(function(G$q,G$r,G$v){G$q._toscript(G$H,G$A,G$y)}),0<this.includefiles.length&&0<this.useFuns.length)for(var G$r,G$v=0,G$R=this.includefiles.length;G$v<G$R;G$v++)this.includefiles[G$v].curUseID!=G$y&&0<(G$r=this.includefiles[G$v].file.getFunsScript(this.useFuns)).length&&(this.includefiles[G$v].curUseID=G$y,G$A[0]=G$r+G$A[0]);return G$A},G$v.__id=1,G$v}(),G$v=function(){function G$q(G$q){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=G$q;for(var G$r=0,G$v=0,G$H=0;!((G$r=G$q.indexOf("#begin",G$r))<0);){for(G$H=G$r+5;!((G$H=G$q.indexOf("#end",G$H))<0)&&"i"===G$q.charAt(G$H+4);)G$H+=5;if(G$H<0)throw"add include err,no #end:"+G$q;G$v=G$q.indexOf("\n",G$r);var G$A=G$e.splitToWords(G$q.substr(G$r,G$v-G$r),null);"code"==G$A[1]?this.codes[G$A[2]]=G$q.substr(G$v+1,G$H-G$v-1):"function"==G$A[1]&&(G$v=G$q.indexOf("function",G$r),G$v+="function".length,this.funs[G$A[3]]=G$q.substr(G$v+1,G$H-G$v-1),this.funnames+=G$A[3]+";"),G$r=G$H+1}}G$T(G$q,"");var G$r=G$q.prototype;return G$r.getWith=function(G$q){var G$r=G$q?this.codes[G$q]:this.script;if(!G$r)throw"get with error:"+G$q;return G$r},G$r.getFunsScript=function(G$q){var G$r="";for(var G$v in this.funs)0<=G$q.indexOf(G$v+";")&&(G$r+=this.funs[G$v]);return G$r},G$q}()},G$e}(),G$pq=function(){function G$R(){}return G$T(G$R,"laya.webgl.WebGL"),G$R._uint8ArraySlice=function(){for(var G$q=this.length,G$r=new Uint8Array(this.length),G$v=0;G$v<G$q;G$v++)G$r[G$v]=this[G$v];return G$r},G$R._float32ArraySlice=function(){for(var G$q=this.length,G$r=new Float32Array(this.length),G$v=0;G$v<G$q;G$v++)G$r[G$v]=this[G$v];return G$r},G$R._uint16ArraySlice=function(G$q){var G$r,G$v=arguments,G$H=0,G$A=0;if(0===G$v.length)for(G$H=this.length,G$r=new Uint16Array(G$H),G$A=0;G$A<G$H;G$A++)G$r[G$A]=this[G$A];else if(2===G$v.length){var G$y=G$v[0],G$R=G$v[1];if(G$y<G$R)for(G$H=G$R-G$y,G$r=new Uint16Array(G$H),G$A=G$y;G$A<G$R;G$A++)G$r[G$A-G$y]=this[G$A];else G$r=new Uint16Array(0)}return G$r},G$R.expandContext=function(){var G$q=G$W.prototype,G$r=CanvasRenderingContext2D.prototype;G$r.fillTrangles=G$q.fillTrangles,G$iq.__int__(null),G$r.setIBVB=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){void 0===G$O&&(G$O=0),void 0===G$N&&(G$N=0),null===G$v&&(this._ib=this._ib||G$nq.QuadrangleIB,G$v=this._ib,G$Xq.expandIBQuadrangle(G$v,G$H._byteLength/64+8)),this._setIBVB(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N)},G$r.fillTrangles=function(G$q,G$r,G$v,G$H,G$A){this._curMat=this._curMat||G$a.create(),this._vb=this._vb||G$kq.create(),this._ib||(this._ib=G$nq.create(),G$Xq.fillIBQuadrangle(this._ib,G$R/4));var G$y=this._vb,G$R=G$H.length>>4;G$Xq.fillTranglesVB(G$y,G$r,G$v,G$H,G$A||this._curMat,0,0),G$Xq.expandIBQuadrangle(this._ib,G$y._byteLength/64+8);var G$W=new G$Vq(1,0);G$W.textureHost=G$q;var G$O=new G$hq("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");G$y._vertType=3,this._setIBVB(G$r,G$v,this._ib,G$y,6*G$R,G$A,G$O,G$W,0,0)}},G$R.enable=function(){if(G$j.__init__(),G$m.isConchApp&&!G$m.isConchWebGL)return G$M.skinAniSprite=function(){return new G$qq},G$R.expandContext(),!1;if(G$M.getWebGLContext=function(G$q){for(var G$r,G$v=["webgl","experimental-webgl","webkit-3d","moz-webgl"],G$H=0;G$H<G$v.length;G$H++){try{G$r=G$q.getContext(G$v[G$H],{stencil:G$P.isStencil,alpha:G$P.isAlpha,antialias:G$P.isAntialias,premultipliedAlpha:G$P.premultipliedAlpha,preserveDrawingBuffer:G$P.preserveDrawingBuffer})}catch(G$q){}if(G$r)return G$r}return null},null==(G$R.mainContext=G$R.mainContext||G$M.getWebGLContext(G$m._mainCanvas)))return!1;if(G$m.isWebGL)return!0;G$X.create=function(G$q,G$r){return new G$qr(G$q,G$r)},G$r.create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){return new G$lq(G$q,G$r,G$v,G$H,G$A,G$y,G$R)},G$m.WebGL=G$R,G$m.isWebGL=!0,G$jq.__init__(),G$M.createRenderSprite=function(G$q,G$r){return new G$aq(G$q,G$r)},G$M.createWebGLContext2D=function(G$q){return new G$Pq(G$q)},G$M.changeWebGLSize=function(G$q,G$r){laya.webgl.WebGL.onStageResize(G$q,G$r)},G$M.createGraphics=function(){return new G$zq};var G$q=G$M.createFilterAction;return G$M.createFilterAction=G$q||function(G$q){return new G$Jq},G$M.clear=function(G$q){G$Bq.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var G$r=G$m.context.ctx,G$v=0==G$r._submits._length||G$P.preserveDrawingBuffer?G$D.create(G$q)._color:G$E._wgColor;G$v&&G$r.clearBG(G$v[0],G$v[1],G$v[2],G$v[3]),G$Bq.clear()},G$M.addToAtlas=function(G$q,G$r){void 0===G$r&&(G$r=!1);var G$v=G$q.bitmap;G$m.optimizeTextureMemory(G$q.url,G$q)?G$z.__typeof(G$v,"laya.webgl.resource.IMergeAtlasBitmap")&&G$v.allowMerageInAtlas&&G$v.on("recovered",G$q,G$q.addTextureToAtlas):G$v.enableMerageInAtlas=!1},G$M.isAtlas=function(G$q){return G$q instanceof laya.webgl.atlas.AtlasWebGLCanvas},G$I._enable(),G$M.beginFlush=function(){for(var G$q=G$I.instance,G$r=G$q.getAtlaserCount(),G$v=0;G$v<G$r;G$v++){var G$H=G$q.getAtlaserByIndex(G$v).texture;G$H._flashCacheImageNeedFlush&&G$M.flashFlushImage(G$H)}},G$M.drawToCanvas=function(G$q,G$r,G$v,G$H,G$A,G$y){(G$v<=0||G$H<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),G$v|=0,G$H|=0,G$A|=0,G$y|=0;var G$R=G$cq.create(G$v,G$H,6408,5121,0,!1);G$R.start(),G$R.clear(0,0,0,0),G$m.context.clear(),G$B.renders[G$r]._fun(G$q,G$m.context,G$A,G$Bq.height-G$H+G$y),G$m.context.flush(),G$R.end();var G$W=G$R.getData(0,0,G$v,G$H);if(G$R.recycle(),G$W.byteLength==G$v*G$H*4){var G$O=new G$_q;G$O._canvas=G$j.createElement("canvas"),G$O.size(G$v,G$H);var G$N=G$O._canvas.getContext("2d");G$j.canvas.size(G$v,G$H);var G$x=G$j.context,G$K=G$x.createImageData(G$v,G$H);return G$K.data.set(new Uint8ClampedArray(G$W.buffer)),G$O._imgData=G$K,G$x.putImageData(G$K,0,0),G$N.save(),G$N.translate(0,G$H),G$N.scale(1,-1),G$N.drawImage(G$j.canvas.source,0,0),G$N.restore(),G$O}console.log("drawToCanvas error: w:"+G$v+",h:"+G$H+",datalen:"+G$W.byteLength)},G$M.createFilterAction=function(G$q){var G$r;switch(G$q){case 32:G$r=new G$Jq}return G$r},G$M.addTextureToAtlas=function(G$q){G$q._uvID++,G$I._atlasRestore++,G$q.bitmap.enableMerageInAtlas&&G$I.instance.addToAtlas(G$q)},G$M.getTexturePixels=function(G$q,G$r,G$v,G$H,G$A){G$m.context.ctx.clear();var G$y=new G$G;G$y.graphics.drawTexture(G$q,-G$r,-G$v);var G$R=G$cq.create(G$H,G$A);G$R.start(),G$R.clear(0,0,0,0),G$y.render(G$m.context,0,0),G$m.context.ctx.flush(),G$R.end();for(var G$W=G$R.getData(0,0,G$H,G$A),G$O=[],G$N=0,G$x=G$A-1;0<=G$x;G$x--)for(var G$K=0;G$K<G$H;G$K++)G$N=4*(G$x*G$H+G$K),G$O.push(G$W[G$N]),G$O.push(G$W[G$N+1]),G$O.push(G$W[G$N+2]),G$O.push(G$W[G$N+3]);return G$O},G$M.skinAniSprite=function(){return new G$qq},G$g.create=function(G$q,G$r){var G$v=new G$_q;return G$v._imgData=G$r,G$v.flipY=!1,G$v},G$V._filterStart=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$q.getValue("bounds"),G$R=G$cq.create(G$y.width,G$y.height);if(G$R.start(),G$R.clear(0,0,0,0),G$q.addValue("src",G$R),G$q.addValue("ScissorTest",G$Bq.worldScissorTest),G$Bq.worldScissorTest){var G$W=new G$$;G$W.copyFrom(G$v.ctx._clipRect),G$q.addValue("clipRect",G$W),G$Bq.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},G$V._filterEnd=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$q.getValue("bounds");G$q.getValue("src").end();var G$R=G$cq.create(G$y.width,G$y.height);G$R.start(),G$R.clear(0,0,0,0),G$q.addValue("out",G$R),G$r._set$P("_filterCache",G$R),G$r._set$P("_isHaveGlowFilter",G$q.getValue("_isHaveGlowFilter"))},G$V._EndTarget=function(G$q,G$r){if(G$q.getValue("src").recycle(),G$q.getValue("out").end(),G$q.getValue("ScissorTest")){G$Bq.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),G$r.ctx.save();var G$v=G$q.getValue("clipRect");G$r.ctx.clipRect(G$v.x,G$v.y,G$v.width,G$v.height)}},G$V._useSrc=function(G$q){var G$r=G$q.getValue("out");G$r.end(),(G$r=G$q.getValue("src")).start(),G$r.clear(0,0,0,0)},G$V._endSrc=function(G$q){G$q.getValue("src").end()},G$V._useOut=function(G$q){var G$r=G$q.getValue("src");G$r.end(),(G$r=G$q.getValue("out")).start(),G$r.clear(0,0,0,0)},G$V._endOut=function(G$q){G$q.getValue("out").end()},G$V._recycleScope=function(G$q){G$q.recycle()},G$V._filter=function(G$q,G$r,G$v,G$H){var G$A=this._next;if(G$A){var G$y,G$R,G$W=G$q.filters,G$O=G$W.length;if(1==G$O&&32==G$W[0].type)return G$r.ctx.save(),G$r.ctx.setFilters([G$W[0]]),G$A._fun.call(G$A,G$q,G$r,G$v,G$H),void G$r.ctx.restore();var G$N=G$Wq.create(),G$x=G$J.TEMP,G$K=G$r.ctx._getTransformMatrix(),G$T=G$a.create();G$K.copyTo(G$T);var G$j=0,G$D=0,G$g=!1,G$X=G$q._$P._filterCache?G$q._$P._filterCache:null;if(!G$X||G$q._repaint){G$g=G$q._isHaveGlowFilter(),G$N.addValue("_isHaveGlowFilter",G$g),G$g&&(G$j=50,G$D=25),(G$R=new G$$).copyFrom(G$q.getSelfBounds()),G$R.x+=G$q.x,G$R.y+=G$q.y,G$R.x-=G$q.pivotX+4,G$R.y-=G$q.pivotY+4;var G$m=G$R.x,G$B=G$R.y;if(G$R.width+=G$j+8,G$R.height+=G$j+8,G$x.x=G$R.x*G$T.a+G$R.y*G$T.c,G$x.y=G$R.y*G$T.d+G$R.x*G$T.b,G$R.x=G$x.x,G$R.y=G$x.y,G$x.x=G$R.width*G$T.a+G$R.height*G$T.c,G$x.y=G$R.height*G$T.d+G$R.width*G$T.b,G$R.width=G$x.x,G$R.height=G$x.y,G$R.width<=0||G$R.height<=0)return;G$X&&G$X.recycle(),G$N.addValue("bounds",G$R);var G$e=G$Rq.create([G$N,G$q,G$r,0,0],G$V._filterStart);G$r.addRenderObject(G$e),G$r.ctx._renderKey=0,G$r.ctx._shader2D.glTexture=null;var G$p=G$q.x-G$m+G$D,G$M=G$q.y-G$B+G$D;G$A._fun.call(G$A,G$q,G$r,G$p,G$M),G$e=G$Rq.create([G$N,G$q,G$r,0,0],G$V._filterEnd),G$r.addRenderObject(G$e);for(var G$z=0;G$z<G$O;G$z++){0!=G$z&&(G$e=G$Rq.create([G$N],G$V._useSrc),G$r.addRenderObject(G$e),G$y=G$Vq.create(1,0),G$a.TEMP.identity(),G$r.ctx.drawTarget(G$N,0,0,G$R.width,G$R.height,G$a.TEMP,"out",G$y,null,G$F.TOINT.overlay),G$e=G$Rq.create([G$N],G$V._useOut),G$r.addRenderObject(G$e)),G$W[G$z].action.apply3d(G$N,G$q,G$r,0,0)}G$e=G$Rq.create([G$N,G$r],G$V._EndTarget),G$r.addRenderObject(G$e)}else{if((G$g=!!G$q._$P._isHaveGlowFilter&&G$q._$P._isHaveGlowFilter)&&(G$j=50,G$D=25),(G$R=G$q.getBounds()).width<=0||G$R.height<=0)return;G$R.width+=G$j,G$R.height+=G$j,G$x.x=G$R.x*G$T.a+G$R.y*G$T.c,G$x.y=G$R.y*G$T.d+G$R.x*G$T.b,G$R.x=G$x.x,G$R.y=G$x.y,G$x.x=G$R.width*G$T.a+G$R.height*G$T.c,G$x.y=G$R.height*G$T.d+G$R.width*G$T.b,G$R.width=G$x.x,G$R.height=G$x.y,G$N.addValue("out",G$X)}G$v=G$v-G$D-G$q.x,G$H=G$H-G$D-G$q.y,G$x.setTo(G$v,G$H),G$T.transformPoint(G$x),G$v=G$x.x+G$R.x,G$H=G$x.y+G$R.y,G$y=G$Vq.create(1,0),G$a.TEMP.identity(),G$r.ctx.drawTarget(G$N,G$v,G$H,G$R.width,G$R.height,G$a.TEMP,"out",G$y,null,G$F.TOINT.overlay),G$e=G$Rq.create([G$N],G$V._recycleScope),G$r.addRenderObject(G$e),G$T.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=G$R._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=G$R._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=G$R._uint8ArraySlice),!0},G$R.onStageResize=function(G$q,G$r){null!=G$R.mainContext&&(G$R.mainContext.viewport(0,0,G$q,G$r),G$Bq.width=G$q,G$Bq.height=G$r)},G$R.onInvalidGLRes=function(){G$I.instance.freeAll(),G$p.releaseContentManagers(!0),G$R.doNodeRepaint(G$z.stage),G$R.mainContext.viewport(0,0,G$Bq.width,G$Bq.height),G$z.stage.event("devicelost")},G$R.doNodeRepaint=function(G$q){0==G$q.numChildren&&G$q.repaint();for(var G$r=0;G$r<G$q.numChildren;G$r++)G$R.doNodeRepaint(G$q.getChildAt(G$r))},G$R.init=function(G$q,G$r,G$v){G$R.mainCanvas=G$q,G$g._createContext=function(G$q){return new G$Pq(G$q)},G$_q._createContext=function(G$q){return new G$Pq(G$q)};var G$H=laya.webgl.WebGL.mainContext;if(null!=G$H.getShaderPrecisionFormat){var G$A=G$H.getShaderPrecisionFormat(35633,36338),G$y=G$H.getShaderPrecisionFormat(35632,36338);G$R.shaderHighPrecision=!(!G$A.precision||!G$y.precision)}else G$R.shaderHighPrecision=!1;if(G$R.compressAstc=G$H.getExtension("WEBGL_compressed_texture_astc"),G$R.compressAtc=G$H.getExtension("WEBGL_compressed_texture_atc"),G$R.compressEtc=G$H.getExtension("WEBGL_compressed_texture_etc"),G$R.compressEtc1=G$H.getExtension("WEBGL_compressed_texture_etc1"),G$R.compressPvrtc=G$H.getExtension("WEBGL_compressed_texture_pvrtc"),G$R.compressS3tc=G$H.getExtension("WEBGL_compressed_texture_s3tc"),G$R.compressS3tc_srgb=G$H.getExtension("WEBGL_compressed_texture_s3tc_srgb"),G$R.compressAstc=G$R.compressAstc?G$R.compressAstc:{},G$R.compressAtc=G$R.compressAtc?G$R.compressAtc:{},G$R.compressEtc=G$R.compressEtc?G$R.compressEtc:{},G$R.compressEtc1=G$R.compressEtc1?G$R.compressEtc1:{},G$R.compressPvrtc=G$R.compressPvrtc?G$R.compressPvrtc:{},G$R.compressS3tc=G$R.compressS3tc?G$R.compressS3tc:{},G$R.compressS3tc_srgb=G$R.compressS3tc_srgb?G$R.compressS3tc_srgb:{},G$H.deleteTexture1=G$H.deleteTexture,G$H.deleteTexture=function(G$q){G$q==G$Mq.curBindTexValue&&(G$Mq.curBindTexValue=null),G$H.deleteTexture1(G$q)},G$R.onStageResize(G$r,G$v),null==G$R.mainContext)throw new Error("webGL getContext err!");G$Z.__init__(),G$I.__init__(),G$Gq.__init__(),G$yq.__init__(),G$Pq.__init__(),G$Vq.__init__(),G$n.__init__(),G$iq.__int__(G$H),G$F._init_(G$H),G$m.isConchApp&&conch.setOnInvalidGLRes(G$R.onInvalidGLRes)},G$R.mainCanvas=null,G$R.antialias=!0,G$R.shaderHighPrecision=!1,G$R._bg_null=[0,0,0,0],G$R}(),G$Mq=function(){function G$H(){}return G$T(G$H,"laya.webgl.WebGLContext"),G$H.UseProgram=function(G$q){return G$H._useProgram!==G$q&&(G$pq.mainContext.useProgram(G$q),G$H._useProgram=G$q,!0)},G$H.setDepthTest=function(G$q,G$r){G$r!==G$H._depthTest&&((G$H._depthTest=G$r)?G$q.enable(2929):G$q.disable(2929))},G$H.setDepthMask=function(G$q,G$r){G$r!==G$H._depthMask&&(G$H._depthMask=G$r,G$q.depthMask(G$r))},G$H.setDepthFunc=function(G$q,G$r){G$r!==G$H._depthFunc&&(G$H._depthFunc=G$r,G$q.depthFunc(G$r))},G$H.setBlend=function(G$q,G$r){G$r!==G$H._blend&&((G$H._blend=G$r)?G$q.enable(3042):G$q.disable(3042))},G$H.setBlendFunc=function(G$q,G$r,G$v){(G$r!==G$H._sFactor||G$v!==G$H._dFactor)&&(G$H._sFactor=G$r,G$H._dFactor=G$v,G$q.blendFunc(G$r,G$v))},G$H.setCullFace=function(G$q,G$r){G$r!==G$H._cullFace&&((G$H._cullFace=G$r)?G$q.enable(2884):G$q.disable(2884))},G$H.setFrontFace=function(G$q,G$r){G$r!==G$H._frontFace&&(G$H._frontFace=G$r,G$q.frontFace(G$r))},G$H.bindTexture=function(G$q,G$r,G$v){G$q.bindTexture(G$r,G$v),G$H.curBindTexTarget=G$r,G$H.curBindTexValue=G$v},G$H.DEPTH_BUFFER_BIT=256,G$H.STENCIL_BUFFER_BIT=1024,G$H.COLOR_BUFFER_BIT=16384,G$H.POINTS=0,G$H.LINES=1,G$H.LINE_LOOP=2,G$H.LINE_STRIP=3,G$H.TRIANGLES=4,G$H.TRIANGLE_STRIP=5,G$H.TRIANGLE_FAN=6,G$H.ZERO=0,G$H.ONE=1,G$H.SRC_COLOR=768,G$H.ONE_MINUS_SRC_COLOR=769,G$H.SRC_ALPHA=770,G$H.ONE_MINUS_SRC_ALPHA=771,G$H.DST_ALPHA=772,G$H.ONE_MINUS_DST_ALPHA=773,G$H.DST_COLOR=774,G$H.ONE_MINUS_DST_COLOR=775,G$H.SRC_ALPHA_SATURATE=776,G$H.FUNC_ADD=32774,G$H.BLEND_EQUATION=32777,G$H.BLEND_EQUATION_RGB=32777,G$H.BLEND_EQUATION_ALPHA=34877,G$H.FUNC_SUBTRACT=32778,G$H.FUNC_REVERSE_SUBTRACT=32779,G$H.BLEND_DST_RGB=32968,G$H.BLEND_SRC_RGB=32969,G$H.BLEND_DST_ALPHA=32970,G$H.BLEND_SRC_ALPHA=32971,G$H.CONSTANT_COLOR=32769,G$H.ONE_MINUS_CONSTANT_COLOR=32770,G$H.CONSTANT_ALPHA=32771,G$H.ONE_MINUS_CONSTANT_ALPHA=32772,G$H.BLEND_COLOR=32773,G$H.ARRAY_BUFFER=34962,G$H.ELEMENT_ARRAY_BUFFER=34963,G$H.ARRAY_BUFFER_BINDING=34964,G$H.ELEMENT_ARRAY_BUFFER_BINDING=34965,G$H.STREAM_DRAW=35040,G$H.STATIC_DRAW=35044,G$H.DYNAMIC_DRAW=35048,G$H.BUFFER_SIZE=34660,G$H.BUFFER_USAGE=34661,G$H.CURRENT_VERTEX_ATTRIB=34342,G$H.FRONT=1028,G$H.BACK=1029,G$H.CULL_FACE=2884,G$H.FRONT_AND_BACK=1032,G$H.BLEND=3042,G$H.DITHER=3024,G$H.STENCIL_TEST=2960,G$H.DEPTH_TEST=2929,G$H.SCISSOR_TEST=3089,G$H.POLYGON_OFFSET_FILL=32823,G$H.SAMPLE_ALPHA_TO_COVERAGE=32926,G$H.SAMPLE_COVERAGE=32928,G$H.NO_ERROR=0,G$H.INVALID_ENUM=1280,G$H.INVALID_VALUE=1281,G$H.INVALID_OPERATION=1282,G$H.OUT_OF_MEMORY=1285,G$H.CW=2304,G$H.CCW=2305,G$H.LINE_WIDTH=2849,G$H.ALIASED_POINT_SIZE_RANGE=33901,G$H.ALIASED_LINE_WIDTH_RANGE=33902,G$H.CULL_FACE_MODE=2885,G$H.FRONT_FACE=2886,G$H.DEPTH_RANGE=2928,G$H.DEPTH_WRITEMASK=2930,G$H.DEPTH_CLEAR_VALUE=2931,G$H.DEPTH_FUNC=2932,G$H.STENCIL_CLEAR_VALUE=2961,G$H.STENCIL_FUNC=2962,G$H.STENCIL_FAIL=2964,G$H.STENCIL_PASS_DEPTH_FAIL=2965,G$H.STENCIL_PASS_DEPTH_PASS=2966,G$H.STENCIL_REF=2967,G$H.STENCIL_VALUE_MASK=2963,G$H.STENCIL_WRITEMASK=2968,G$H.STENCIL_BACK_FUNC=34816,G$H.STENCIL_BACK_FAIL=34817,G$H.STENCIL_BACK_PASS_DEPTH_FAIL=34818,G$H.STENCIL_BACK_PASS_DEPTH_PASS=34819,G$H.STENCIL_BACK_REF=36003,G$H.STENCIL_BACK_VALUE_MASK=36004,G$H.STENCIL_BACK_WRITEMASK=36005,G$H.VIEWPORT=2978,G$H.SCISSOR_BOX=3088,G$H.COLOR_CLEAR_VALUE=3106,G$H.COLOR_WRITEMASK=3107,G$H.UNPACK_ALIGNMENT=3317,G$H.PACK_ALIGNMENT=3333,G$H.MAX_TEXTURE_SIZE=3379,G$H.MAX_VIEWPORT_DIMS=3386,G$H.SUBPIXEL_BITS=3408,G$H.RED_BITS=3410,G$H.GREEN_BITS=3411,G$H.BLUE_BITS=3412,G$H.ALPHA_BITS=3413,G$H.DEPTH_BITS=3414,G$H.STENCIL_BITS=3415,G$H.POLYGON_OFFSET_UNITS=10752,G$H.POLYGON_OFFSET_FACTOR=32824,G$H.TEXTURE_BINDING_2D=32873,G$H.SAMPLE_BUFFERS=32936,G$H.SAMPLES=32937,G$H.SAMPLE_COVERAGE_VALUE=32938,G$H.SAMPLE_COVERAGE_INVERT=32939,G$H.NUM_COMPRESSED_TEXTURE_FORMATS=34466,G$H.COMPRESSED_TEXTURE_FORMATS=34467,G$H.DONT_CARE=4352,G$H.FASTEST=4353,G$H.NICEST=4354,G$H.GENERATE_MIPMAP_HINT=33170,G$H.BYTE=5120,G$H.UNSIGNED_BYTE=5121,G$H.SHORT=5122,G$H.UNSIGNED_SHORT=5123,G$H.INT=5124,G$H.UNSIGNED_INT=5125,G$H.FLOAT=5126,G$H.DEPTH_COMPONENT=6402,G$H.ALPHA=6406,G$H.RGB=6407,G$H.RGBA=6408,G$H.LUMINANCE=6409,G$H.LUMINANCE_ALPHA=6410,G$H.UNSIGNED_SHORT_4_4_4_4=32819,G$H.UNSIGNED_SHORT_5_5_5_1=32820,G$H.UNSIGNED_SHORT_5_6_5=33635,G$H.FRAGMENT_SHADER=35632,G$H.VERTEX_SHADER=35633,G$H.MAX_VERTEX_ATTRIBS=34921,G$H.MAX_VERTEX_UNIFORM_VECTORS=36347,G$H.MAX_VARYING_VECTORS=36348,G$H.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,G$H.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,G$H.MAX_TEXTURE_IMAGE_UNITS=34930,G$H.MAX_FRAGMENT_UNIFORM_VECTORS=36349,G$H.SHADER_TYPE=35663,G$H.DELETE_STATUS=35712,G$H.LINK_STATUS=35714,G$H.VALIDATE_STATUS=35715,G$H.ATTACHED_SHADERS=35717,G$H.ACTIVE_UNIFORMS=35718,G$H.ACTIVE_ATTRIBUTES=35721,G$H.SHADING_LANGUAGE_VERSION=35724,G$H.CURRENT_PROGRAM=35725,G$H.NEVER=512,G$H.LESS=513,G$H.EQUAL=514,G$H.LEQUAL=515,G$H.GREATER=516,G$H.NOTEQUAL=517,G$H.GEQUAL=518,G$H.ALWAYS=519,G$H.KEEP=7680,G$H.REPLACE=7681,G$H.INCR=7682,G$H.DECR=7683,G$H.INVERT=5386,G$H.INCR_WRAP=34055,G$H.DECR_WRAP=34056,G$H.VENDOR=7936,G$H.RENDERER=7937,G$H.VERSION=7938,G$H.NEAREST=9728,G$H.LINEAR=9729,G$H.NEAREST_MIPMAP_NEAREST=9984,G$H.LINEAR_MIPMAP_NEAREST=9985,G$H.NEAREST_MIPMAP_LINEAR=9986,G$H.LINEAR_MIPMAP_LINEAR=9987,G$H.TEXTURE_MAG_FILTER=10240,G$H.TEXTURE_MIN_FILTER=10241,G$H.TEXTURE_WRAP_S=10242,G$H.TEXTURE_WRAP_T=10243,G$H.TEXTURE_2D=3553,G$H.TEXTURE=5890,G$H.TEXTURE_CUBE_MAP=34067,G$H.TEXTURE_BINDING_CUBE_MAP=34068,G$H.TEXTURE_CUBE_MAP_POSITIVE_X=34069,G$H.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,G$H.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,G$H.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,G$H.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,G$H.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,G$H.MAX_CUBE_MAP_TEXTURE_SIZE=34076,G$H.TEXTURE0=33984,G$H.TEXTURE1=33985,G$H.TEXTURE2=33986,G$H.TEXTURE3=33987,G$H.TEXTURE4=33988,G$H.TEXTURE5=33989,G$H.TEXTURE6=33990,G$H.TEXTURE7=33991,G$H.TEXTURE8=33992,G$H.TEXTURE9=33993,G$H.TEXTURE10=33994,G$H.TEXTURE11=33995,G$H.TEXTURE12=33996,G$H.TEXTURE13=33997,G$H.TEXTURE14=33998,G$H.TEXTURE15=33999,G$H.TEXTURE16=34e3,G$H.TEXTURE17=34001,G$H.TEXTURE18=34002,G$H.TEXTURE19=34003,G$H.TEXTURE20=34004,G$H.TEXTURE21=34005,G$H.TEXTURE22=34006,G$H.TEXTURE23=34007,G$H.TEXTURE24=34008,G$H.TEXTURE25=34009,G$H.TEXTURE26=34010,G$H.TEXTURE27=34011,G$H.TEXTURE28=34012,G$H.TEXTURE29=34013,G$H.TEXTURE30=34014,G$H.TEXTURE31=34015,G$H.ACTIVE_TEXTURE=34016,G$H.REPEAT=10497,G$H.CLAMP_TO_EDGE=33071,G$H.MIRRORED_REPEAT=33648,G$H.FLOAT_VEC2=35664,G$H.FLOAT_VEC3=35665,G$H.FLOAT_VEC4=35666,G$H.INT_VEC2=35667,G$H.INT_VEC3=35668,G$H.INT_VEC4=35669,G$H.BOOL=35670,G$H.BOOL_VEC2=35671,G$H.BOOL_VEC3=35672,G$H.BOOL_VEC4=35673,G$H.FLOAT_MAT2=35674,G$H.FLOAT_MAT3=35675,G$H.FLOAT_MAT4=35676,G$H.SAMPLER_2D=35678,G$H.SAMPLER_CUBE=35680,G$H.VERTEX_ATTRIB_ARRAY_ENABLED=34338,G$H.VERTEX_ATTRIB_ARRAY_SIZE=34339,G$H.VERTEX_ATTRIB_ARRAY_STRIDE=34340,G$H.VERTEX_ATTRIB_ARRAY_TYPE=34341,G$H.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,G$H.VERTEX_ATTRIB_ARRAY_POINTER=34373,G$H.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,G$H.COMPILE_STATUS=35713,G$H.LOW_FLOAT=36336,G$H.MEDIUM_FLOAT=36337,G$H.HIGH_FLOAT=36338,G$H.LOW_INT=36339,G$H.MEDIUM_INT=36340,G$H.HIGH_INT=36341,G$H.FRAMEBUFFER=36160,G$H.RENDERBUFFER=36161,G$H.RGBA4=32854,G$H.RGB5_A1=32855,G$H.RGB565=36194,G$H.DEPTH_COMPONENT16=33189,G$H.STENCIL_INDEX=6401,G$H.STENCIL_INDEX8=36168,G$H.DEPTH_STENCIL=34041,G$H.RENDERBUFFER_WIDTH=36162,G$H.RENDERBUFFER_HEIGHT=36163,G$H.RENDERBUFFER_INTERNAL_FORMAT=36164,G$H.RENDERBUFFER_RED_SIZE=36176,G$H.RENDERBUFFER_GREEN_SIZE=36177,G$H.RENDERBUFFER_BLUE_SIZE=36178,G$H.RENDERBUFFER_ALPHA_SIZE=36179,G$H.RENDERBUFFER_DEPTH_SIZE=36180,G$H.RENDERBUFFER_STENCIL_SIZE=36181,G$H.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,G$H.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,G$H.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,G$H.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,G$H.COLOR_ATTACHMENT0=36064,G$H.DEPTH_ATTACHMENT=36096,G$H.STENCIL_ATTACHMENT=36128,G$H.DEPTH_STENCIL_ATTACHMENT=33306,G$H.NONE=0,G$H.FRAMEBUFFER_COMPLETE=36053,G$H.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,G$H.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,G$H.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,G$H.FRAMEBUFFER_UNSUPPORTED=36061,G$H.FRAMEBUFFER_BINDING=36006,G$H.RENDERBUFFER_BINDING=36007,G$H.MAX_RENDERBUFFER_SIZE=34024,G$H.INVALID_FRAMEBUFFER_OPERATION=1286,G$H.UNPACK_FLIP_Y_WEBGL=37440,G$H.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,G$H.CONTEXT_LOST_WEBGL=37442,G$H.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,G$H.BROWSER_DEFAULT_WEBGL=37444,G$H._useProgram=null,G$H._depthTest=!0,G$H._depthMask=!0,G$H._blend=!1,G$H._cullFace=!1,G$H.curBindTexTarget=null,G$H.curBindTexValue=null,G$R(G$H,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),G$H}(),G$zq=function(G$q){function G$r(){G$r.__super.call(this)}G$T(G$r,"laya.webgl.display.GraphicsGL",G$N);var G$v=G$r.prototype;return G$v.setShader=function(G$q){this._saveToCmd(G$m.context._setShader,[G$q])},G$v.setIBVB=function(G$q,G$r,G$v,G$H,G$A,G$y){this._saveToCmd(G$m.context._setIBVB,[G$q,G$r,G$v,G$H,G$A,G$y])},G$v.drawParticle=function(G$q,G$r,G$v){var G$H=G$M.createParticleTemplate2D(G$v);G$H.x=G$q,G$H.y=G$r,this._saveToCmd(G$m.context._drawParticle,[G$H])},G$r}(),G$Pq=function(G$q){var G$v;function G$u(G$q){this._x=0,this._y=0,this._id=++G$u._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,G$u.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=G$u.MAXCLIPRECT,this.mOutPoint,this._canvas=G$q,this._canvas._addReference(),G$u._contextcount++,G$m.isFlash?(this._ib=G$nq.create(35044),G$Xq.fillIBQuadrangle(this._ib,16)):this._ib=G$nq.QuadrangleIB,this.clear()}G$T(G$u,"laya.webgl.canvas.WebGLContext2D",G$W);var G$r=G$u.prototype;return G$r.setIsMainContext=function(){this._isMain=!0},G$r.clearBG=function(G$q,G$r,G$v,G$H){var G$A=G$pq.mainContext;G$A.clearColor(G$q,G$r,G$v,G$H),G$A.clear(16384)},G$r._getSubmits=function(){return this._submits},G$r._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var G$q=0,G$r=this._submits._length;G$q<G$r;G$q++)this._submits[G$q].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},G$r.destroy=function(){--G$u._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=G$nq.QuadrangleIB&&this._ib.releaseResource()},G$r.clear=function(){this._submits||(this._other=G$v.DEFAULT,this._curMat=G$a.create(),this._vb=G$kq.create(-1),this._submits=[],this._save=[G$L.Create(this)],this._save.length=10,this._shader2D=new G$n,this._triangleMesh=G$oq.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=G$v.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=G$u.MAXCLIPRECT,this._curSubmit=G$yq.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=G$U.DEFAULT;for(var G$q=0,G$r=this._submits._length;G$q<G$r;G$q++)this._submits[G$q].releaseRender(),this._submits[G$q]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},G$r.size=function(G$q,G$r){if(this._width!=G$q||this._height!=G$r)if(0==G$q||0==G$r){0!=this._vb._byteLength&&(this._width=G$q,this._height=G$r,this._vb.clear(),this._vb.upload());for(var G$v=0,G$H=this._submits._length;G$v<G$H;G$v++)this._submits[G$v].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=G$q,this._height=G$r,this._targets&&this._targets.size(G$q,G$r),this._canvas.memorySize-=this._canvas.memorySize;0===G$q&&0===G$r&&this._releaseMem()},G$r._getTransformMatrix=function(){return this._curMat},G$r.translate=function(G$q,G$r){0===G$q&&0===G$r||(G$w.save(this),this._curMat.bTransform&&(G$i.save(this),this._curMat.transformPointN(G$J.TEMP.setTo(G$q,G$r)),G$q=G$J.TEMP.x,G$r=G$J.TEMP.y),this._x+=G$q,this._y+=G$r)},G$r.save=function(){this._save[this._save._length++]=G$L.Create(this)},G$r.restore=function(){var G$q=this._save._length;if(!(G$q<1))for(var G$r=G$q-1;0<=G$r;G$r--){var G$v=this._save[G$r];if(G$v.restore(this),G$v.isSaveMark())return void(this._save._length=G$r)}},G$r._fillText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){void 0===G$N&&(G$N=0);var G$x=this._shader2D,G$K=this._curSubmit.shaderValue,G$T=G$A?G$Dq.create(G$A):this._other.font;if(G$I.enabled)G$x.ALPHA!==G$K.ALPHA&&(G$x.glTexture=null),G$jq.drawText(this,G$q,G$r,this._curMat,G$T,G$O||this._other.textAlign,G$y,G$R,G$W,G$v,G$H,G$N);else{this._shader2D.defines.getValue();var G$j=G$y?G$D.create(G$y)._color:G$x.colorAdd;G$x.ALPHA===G$K.ALPHA&&G$j===G$x.colorAdd&&G$K.colorAdd===G$x.colorAdd||(G$x.glTexture=null,G$x.colorAdd=G$j),G$jq.drawText(this,G$q,G$r,this._curMat,G$T,G$O||this._other.textAlign,G$y,G$R,G$W,G$v,G$H,G$N)}},G$r.fillWords=function(G$q,G$r,G$v,G$H,G$A,G$y){this._fillText(null,G$q,G$r,G$v,G$H,G$A,null,-1,null,G$y)},G$r.fillBorderWords=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._fillBorderText(null,G$q,G$r,G$v,G$H,G$A,G$y,G$R,null)},G$r.fillText=function(G$q,G$r,G$v,G$H,G$A,G$y){this._fillText(G$q,null,G$r,G$v,G$H,G$A,null,-1,G$y)},G$r.strokeText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._fillText(G$q,null,G$r,G$v,G$H,null,G$A,G$y||1,G$R)},G$r.fillBorderText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){this._fillBorderText(G$q,null,G$r,G$v,G$H,G$A,G$y,G$R,G$W)},G$r._fillBorderText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){if(!G$I.enabled)return this._fillText(G$q,G$r,G$v,G$H,G$A,null,G$R,G$W||1,G$O),void this._fillText(G$q,G$r,G$v,G$H,G$A,G$y,null,-1,G$O);var G$N=this._shader2D,G$x=this._curSubmit.shaderValue;G$N.ALPHA!==G$x.ALPHA&&(G$N.glTexture=null);var G$K=G$A?(G$u._fontTemp.setFont(G$A),G$u._fontTemp):this._other.font;G$jq.drawText(this,G$q,G$r,this._curMat,G$K,G$O||this._other.textAlign,G$y,G$R,G$W||1,G$v,G$H,0)},G$r.fillRect=function(G$q,G$r,G$v,G$H,G$A){var G$y=this._vb;if(G$Xq.fillRectImgVb(G$y,this._clipRect,G$q,G$r,G$v,G$H,G$o.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var G$R=this._shader2D.fillStyle;G$A&&(this._shader2D.fillStyle=G$U.create(G$A));var G$W=this._shader2D,G$O=this._curSubmit.shaderValue;if(G$W.fillStyle!==G$O.fillStyle||G$W.ALPHA!==G$O.ALPHA){G$W.glTexture=null;var G$N=this._curSubmit=G$yq.createSubmit(this,this._ib,G$y,(G$y._byteLength-64)/32*3,G$Vq.create(2,0));G$N.shaderValue.color=G$W.fillStyle._color._color,G$N.shaderValue.ALPHA=G$W.ALPHA,this._submits[this._submits._length++]=G$N}this._curSubmit._numEle+=6,this._shader2D.fillStyle=G$R}},G$r.fillTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){if(G$q.loaded&&G$q.bitmap&&G$q.source){var G$O=this._vb,G$N=G$q.bitmap.width,G$x=G$q.bitmap.height,G$K=G$q.uv,G$T=G$R.x%G$q.width,G$j=G$R.y%G$q.height;if(G$N!=G$W.w||G$x!=G$W.h){if(!G$W.w&&!G$W.h)switch(G$W.oy=G$W.ox=0,G$y){case"repeat":G$W.width=G$H,G$W.height=G$A;break;case"repeat-x":G$W.width=G$H,G$j<0?G$q.height+G$j>G$A?G$W.height=G$A:G$W.height=G$q.height+G$j:(G$W.oy=G$j,G$q.height+G$j>G$A?G$W.height=G$A-G$j:G$W.height=G$q.height);break;case"repeat-y":G$T<0?G$q.width+G$T>G$H?G$W.width=G$H:G$W.width=G$q.width+G$T:(G$W.ox=G$T,G$q.width+G$T>G$H?G$W.width=G$H-G$T:G$W.width=G$q.width),G$W.height=G$A;break;case"no-repeat":G$T<0?G$q.width+G$T>G$H?G$W.width=G$H:G$W.width=G$q.width+G$T:(G$W.ox=G$T,G$q.width+G$T>G$H?G$W.width=G$H-G$T:G$W.width=G$q.width),G$j<0?G$q.height+G$j>G$A?G$W.height=G$A:G$W.height=G$q.height+G$j:(G$W.oy=G$j,G$q.height+G$j>G$A?G$W.height=G$A-G$j:G$W.height=G$q.height);break;default:G$W.width=G$H,G$W.height=G$A}G$W.w=G$N,G$W.h=G$x,G$W.uv=[0,0,G$W.width/G$N,0,G$W.width/G$N,G$W.height/G$x,0,G$W.height/G$x]}if(G$r+=G$W.ox,G$v+=G$W.oy,G$T-=G$W.ox,G$j-=G$W.oy,G$Xq.fillRectImgVb(G$O,this._clipRect,G$r,G$v,G$W.width,G$W.height,G$W.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var G$D=G$Yq.create(this,this._ib,G$O,(G$O._byteLength-64)/32*3,G$Vq.create(256,0)),G$g=(this._submits[this._submits._length++]=G$D).shaderValue;G$g.textureHost=G$q;var G$X=G$K[0]*G$N,G$m=G$K[1]*G$x,G$B=(G$K[2]-G$K[0])*G$N,G$e=(G$K[5]-G$K[3])*G$x,G$p=-G$T/G$N,G$M=-G$j/G$x;G$g.u_TexRange[0]=G$X/G$N,G$g.u_TexRange[1]=G$B/G$N,G$g.u_TexRange[2]=G$m/G$x,G$g.u_TexRange[3]=G$e/G$x,G$g.u_offset[0]=G$p,G$g.u_offset[1]=G$M,G$I.enabled&&!this._isMain&&G$D.addTexture(G$q,(G$O._byteLength>>2)-16),(this._curSubmit=G$D)._renderType=10017,G$D._numEle+=6}}else this.sprite&&G$z.timer.callLater(this,this._repaintSprite)},G$r.setShader=function(G$q){G$f.save(this,1048576,this._shader2D,!0),this._shader2D.shader=G$q},G$r.setFilters=function(G$q){G$f.save(this,2097152,this._shader2D,!0),this._shader2D.filters=G$q,this._curSubmit=G$yq.RENDERBASE,this._renderKey=0,this._drawCount++},G$r.drawTexture=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._drawTextureM(G$q,G$r,G$v,G$H,G$A,G$y,G$R,null,1)},G$r.addTextureVb=function(G$q,G$r,G$v){var G$H=this._curSubmit._vb||this._vb,G$A=G$H._byteLength>>2;G$H.byteLength=G$A+16<<2;for(var G$y=G$H.getFloat32Array(),G$R=0;G$R<16;G$R+=4)G$y[G$A++]=G$q[G$R]+G$r,G$y[G$A++]=G$q[G$R+1]+G$v,G$y[G$A++]=G$q[G$R+2],G$y[G$A++]=G$q[G$R+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),G$H._upload=!0},G$r.willDrawTexture=function(G$q,G$r){if(!(G$q.loaded&&G$q.bitmap&&G$q.source))return this.sprite&&G$z.timer.callLater(this,this._repaintSprite),0;var G$v=G$q.bitmap,G$H=G$v.id+this._shader2D.ALPHA*G$r+10016;if(G$H==this._renderKey)return G$H;var G$A=this._shader2D,G$y=G$A.ALPHA,G$R=this._curSubmit.shaderValue;G$A.ALPHA*=G$r,this._renderKey=G$H,this._drawCount++,G$A.glTexture=G$v;var G$W=this._vb,G$O=null,G$N=G$W._byteLength/32*3,G$x=G$R.textureHost&&G$R.textureHost==G$q&&G$R.textureHost.alphaTexture==G$q.alphaTexture;return G$O=G$Yq.create(this,this._ib,G$W,G$N,G$Vq.create(1,0)),(this._submits[this._submits._length++]=G$O).shaderValue.textureHost=G$q,G$O._renderType=10016,G$O._preIsSameTextureShader=10016===this._curSubmit._renderType&&G$A.ALPHA===G$R.ALPHA&&G$x,this._curSubmit=G$O,G$A.ALPHA=G$y,G$H},G$r.drawTextures=function(G$q,G$r,G$v,G$H){if(G$q.loaded&&G$q.bitmap&&G$q.source){var G$A=this._clipRect;if(this._clipRect=G$u.MAXCLIPRECT,this._drawTextureM(G$q,G$r[0],G$r[1],G$q.width,G$q.height,G$v,G$H,null,1)){if(this._clipRect=G$A,G$Q.drawCall++,!(G$r.length<4)){for(var G$y=this._curSubmit._vb||this._vb,G$R=this._curMat.a,G$W=this._curMat.d,G$O=2,G$N=G$r.length;G$O<G$N;G$O+=2)G$Xq.copyPreImgVb(G$y,(G$r[G$O]-G$r[G$O-2])*G$R,(G$r[G$O+1]-G$r[G$O-1])*G$W),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&G$z.timer.callLater(this,this._repaintSprite)},G$r._drawTextureM=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){if(!G$q.loaded||!G$q.source)return this.sprite&&G$z.timer.callLater(this,this._repaintSprite),!1;var G$N=this._curSubmit._vb||this._vb,G$x=G$q.bitmap;G$r+=G$y,G$v+=G$R,this._drawCount++;var G$K=G$x.id+this._shader2D.ALPHA*G$O+10016;if(G$K!=this._renderKey){this._renderKey=G$K;var G$T=this._curSubmit.shaderValue,G$j=this._shader2D,G$D=G$j.ALPHA;G$j.ALPHA*=G$O,G$j.glTexture=G$x;var G$g=this._vb,G$X=null,G$m=G$g._byteLength/32*3,G$B=G$T.textureHost&&G$T.textureHost==G$q&&G$T.textureHost.alphaTexture==G$q.alphaTexture;G$X=G$Yq.create(this,this._ib,G$g,G$m,G$Vq.create(1,0)),(this._submits[this._submits._length++]=G$X).shaderValue.textureHost=G$q,G$X._renderType=10016,G$X._preIsSameTextureShader=10016===this._curSubmit._renderType&&G$j.ALPHA===G$T.ALPHA&&G$B,this._curSubmit=G$X,G$N=this._curSubmit._vb||this._vb,G$j.ALPHA=G$D}return!!G$Xq.fillRectImgVb(G$N,this._clipRect,G$r,G$v,G$H||G$q.width,G$A||G$q.height,G$q.uv,G$W||this._curMat,this._x,this._y,0,0)&&(G$I.enabled&&!this._isMain&&this._curSubmit.addTexture(G$q,(G$N._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},G$r._repaintSprite=function(){this.sprite&&this.sprite.repaint()},G$r._drawText=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){var G$x=G$q.bitmap;this._drawCount++;var G$K=G$x.id+this._shader2D.ALPHA+10016;if(G$K!=this._renderKey){this._renderKey=G$K;var G$T=this._curSubmit.shaderValue,G$j=this._shader2D;G$j.glTexture=G$x;var G$D=this._vb,G$g=null,G$X=G$D._byteLength/32*3,G$m=G$T.textureHost&&G$T.textureHost==G$q&&G$T.textureHost.alphaTexture==G$q.alphaTexture;(G$g=G$I.enabled?G$Yq.create(this,this._ib,G$D,G$X,G$Vq.create(1,0)):G$Yq.create(this,this._ib,G$D,G$X,G$wq.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&G$j.ALPHA===G$T.ALPHA&&G$m,(this._submits[this._submits._length++]=G$g).shaderValue.textureHost=G$q,G$g._renderType=10016,this._curSubmit=G$g}G$q.active();var G$B=this._curSubmit._vb||this._vb;G$Xq.fillRectImgVb(G$B,this._clipRect,G$r+G$R,G$v+G$W,G$H||G$q.width,G$A||G$q.height,G$q.uv,G$y||this._curMat,this._x,this._y,G$O,G$N,!0)&&(G$I.enabled&&!this._isMain&&this._curSubmit.addTexture(G$q,(G$B._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},G$r.drawTextureWithTransform=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){if(G$y){var G$N=this._curMat,G$x=this._x,G$K=this._y;(0!==G$R||0!==G$W)&&(this._x=G$R*G$N.a+G$W*G$N.c,this._y=G$W*G$N.d+G$R*G$N.b),G$y&&G$N.bTransform?(G$a.mul(G$y,G$N,G$u._tmpMatrix),(G$y=G$u._tmpMatrix)._checkTransform()):(this._x+=G$N.tx,this._y+=G$N.ty),this._drawTextureM(G$q,G$r,G$v,G$H,G$A,0,0,G$y,G$O),this._x=G$x,this._y=G$K}else this._drawTextureM(G$q,G$r,G$v,G$H,G$A,G$R,G$W,null,G$O)},G$r.fillQuadrangle=function(G$q,G$r,G$v,G$H,G$A){var G$y=this._curSubmit,G$R=this._vb,G$W=this._shader2D,G$O=G$y.shaderValue;if(this._renderKey=0,G$q.bitmap){var G$N=G$q.bitmap;G$W.glTexture==G$N&&G$W.ALPHA===G$O.ALPHA||(G$W.glTexture=G$N,(G$y=this._curSubmit=G$yq.createSubmit(this,this._ib,G$R,G$R._byteLength/32*3,G$Vq.create(1,0))).shaderValue.glTexture=G$N,this._submits[this._submits._length++]=G$y),G$Xq.fillQuadrangleImgVb(G$R,G$r,G$v,G$H,G$q.uv,G$A||this._curMat,this._x,this._y)}else G$y.shaderValue.fillStyle&&G$y.shaderValue.fillStyle.equal(G$q)&&G$W.ALPHA===G$O.ALPHA||(G$W.glTexture=null,(G$y=this._curSubmit=G$yq.createSubmit(this,this._ib,G$R,G$R._byteLength/32*3,G$Vq.create(2,0))).shaderValue.defines.add(2),G$y.shaderValue.fillStyle=G$U.create(G$q),this._submits[this._submits._length++]=G$y),G$Xq.fillQuadrangleImgVb(G$R,G$r,G$v,G$H,G$o.DEF_UV,G$A||this._curMat,this._x,this._y);G$y._numEle+=6},G$r.drawTexture2=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){if(0!=G$y){var G$O=this._curMat;if(this._x=G$q*G$O.a+G$r*G$O.c,this._y=G$r*G$O.d+G$q*G$O.b,G$A&&(G$A=G$O.bTransform||G$A.bTransform?(G$a.mul(G$A,G$O,G$u._tmpMatrix),G$u._tmpMatrix):(this._x+=G$A.tx+G$O.tx,this._y+=G$A.ty+G$O.ty,G$a.EMPTY)),1!==G$y||G$R){var G$N=this._shader2D.ALPHA,G$x=this._nBlendType;this._shader2D.ALPHA=G$y,G$R&&(this._nBlendType=G$F.TOINT(G$R)),this._drawTextureM(G$W[0],G$W[1]-G$v,G$W[2]-G$H,G$W[3],G$W[4],0,0,G$A,1),this._shader2D.ALPHA=G$N,this._nBlendType=G$x}else this._drawTextureM(G$W[0],G$W[1]-G$v,G$W[2]-G$H,G$W[3],G$W[4],0,0,G$A,1);this._x=this._y=0}},G$r.drawCanvas=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$q.context;if(this._renderKey=0,G$y._targets)this._submits[this._submits._length++]=G$Zq.create(G$y,0,null),this._curSubmit=G$yq.RENDERBASE,G$y._targets.drawTo(this,G$r,G$v,G$H,G$A);else{var G$R=this._submits[this._submits._length++]=G$Zq.create(G$y,this._shader2D.ALPHA,this._shader2D.filters),G$W=G$H/G$q.width,G$O=G$A/G$q.height,G$N=G$R._matrix;this._curMat.copyTo(G$N),1!=G$W&&1!=G$O&&G$N.scale(G$W,G$O);var G$x=G$N.tx,G$K=G$N.ty;G$N.tx=G$N.ty=0,G$N.transformPoint(G$J.TEMP.setTo(G$r,G$v)),G$N.translate(G$J.TEMP.x+G$x,G$J.TEMP.y+G$K),this._curSubmit=G$yq.RENDERBASE}G$P.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=G$y._targets?"yellow":"green",this.strokeRect(G$r-1,G$v-1,G$H+2,G$A+2,1),this.strokeRect(G$r,G$v,G$H,G$A,1),this.restore())},G$r.drawTarget=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){void 0===G$N&&(G$N=-1);var G$x=this._vb;if(G$Xq.fillRectImgVb(G$x,this._clipRect,G$r,G$v,G$H,G$A,G$O||G$o.DEF_UV,G$y||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var G$K=this._curSubmit=G$Kq.create(this,this._ib,G$x,(G$x._byteLength-64)/32*3,G$W,G$R);G$K.blendType=-1==G$N?this._nBlendType:G$N,G$K.scope=G$q,this._submits[this._submits._length++]=G$K,this._curSubmit._numEle+=6}},G$r.mixRGBandAlpha=function(G$q){return this._mixRGBandAlpha(G$q,this._shader2D.ALPHA)},G$r._mixRGBandAlpha=function(G$q,G$r){var G$v=(4278190080&G$q)>>>24;return 0!=G$v?G$v*=G$r:G$v=255*G$r,16777215&G$q|G$v<<24},G$r.drawTriangles=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){if(!G$q.loaded||!G$q.source)return this.sprite&&G$z.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;G$q.bitmap;var G$x=this._mixRGBandAlpha(4294967295,G$W),G$K=(G$H.length,G$y.length);this._renderKey=-1;var G$T=this._curSubmit=G$Yq.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,G$Vq.create(1,0));return G$T.shaderValue.textureHost=G$q,G$T._renderType=10016,this._submits[this._submits._length++]=G$T,G$R?(G$u._tmpMatrix.a=G$R.a,G$u._tmpMatrix.b=G$R.b,G$u._tmpMatrix.c=G$R.c,G$u._tmpMatrix.d=G$R.d,G$u._tmpMatrix.tx=G$R.tx+G$r,G$u._tmpMatrix.ty=G$R.ty+G$v,G$a.mul(G$u._tmpMatrix,this._curMat,G$u._tmpMatrix)):(G$u._tmpMatrix.a=this._curMat.a,G$u._tmpMatrix.b=this._curMat.b,G$u._tmpMatrix.c=this._curMat.c,G$u._tmpMatrix.d=this._curMat.d,G$u._tmpMatrix.tx=this._curMat.tx+G$r,G$u._tmpMatrix.ty=this._curMat.ty+G$v),this._triangleMesh.addData(G$H,G$A,G$y,G$u._tmpMatrix,G$x,this),this._curSubmit._numEle+=G$K,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},G$r.transform=function(G$q,G$r,G$v,G$H,G$A,G$y){G$i.save(this),G$a.mul(G$a.TEMP.setTo(G$q,G$r,G$v,G$H,G$A,G$y),this._curMat,this._curMat),this._curMat._checkTransform()},G$r.setTransformByMatrix=function(G$q){G$q.copyTo(this._curMat)},G$r.transformByMatrix=function(G$q){G$i.save(this),G$a.mul(G$q,this._curMat,this._curMat),this._curMat._checkTransform()},G$r.rotate=function(G$q){G$i.save(this),this._curMat.rotateEx(G$q)},G$r.scale=function(G$q,G$r){G$i.save(this),this._curMat.scaleEx(G$q,G$r)},G$r.clipRect=function(G$q,G$r,G$v,G$H){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var G$A=G$xq.create(4);this.addRenderObject(G$A);var G$y=this._vb,G$R=G$y._byteLength>>2;if(G$Xq.fillRectImgVb(G$y,null,G$q,G$r,G$v,G$H,G$o.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var G$W=this._curSubmit=G$yq.createSubmit(this,this._ib,G$y,(G$y._byteLength-64)/32*3,G$Vq.create(2,0));G$W.shaderValue.ALPHA=1,this._submits[this._submits._length++]=G$W,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var G$O=G$xq.create(5);this.addRenderObject(G$O);var G$N=G$y.getFloat32Array(),G$x=Math.min(Math.min(Math.min(G$N[0+G$R],G$N[4+G$R]),G$N[8+G$R]),G$N[12+G$R]),G$K=Math.max(Math.max(Math.max(G$N[0+G$R],G$N[4+G$R]),G$N[8+G$R]),G$N[12+G$R]),G$T=Math.min(Math.min(Math.min(G$N[1+G$R],G$N[5+G$R]),G$N[9+G$R]),G$N[13+G$R]),G$j=Math.max(Math.max(Math.max(G$N[1+G$R],G$N[5+G$R]),G$N[9+G$R]),G$N[13+G$R]);G$l.save(this,G$O,G$q,G$r,G$v,G$H,G$x,G$T,G$K-G$x,G$j-G$T),this._curSubmit=G$yq.RENDERBASE}else{G$v*=this._curMat.a,G$H*=this._curMat.d;var G$D=G$J.TEMP;this._curMat.transformPoint(G$D.setTo(G$q,G$r)),G$v<0&&(G$D.x=G$D.x+G$v,G$v=-G$v),G$H<0&&(G$D.y=G$D.y+G$H,G$H=-G$H),this._renderKey=0;var G$g=this._curSubmit=G$Nq.create(this);(this._submits[this._submits._length++]=G$g).submitIndex=this._submits._length,G$g.submitLength=9999999,G$S.save(this,G$g);var G$X=this._clipRect,G$m=G$X.x,G$B=G$X.y,G$e=G$D.x+G$v,G$p=G$D.y+G$H;G$m<G$D.x&&(G$X.x=G$D.x),G$B<G$D.y&&(G$X.y=G$D.y),G$X.width=Math.min(G$e,G$m+G$X.width)-G$X.x,G$X.height=Math.min(G$p,G$B+G$X.height)-G$X.y,this._shader2D.glTexture=null,G$g.clipRect.copyFrom(G$X),this._curSubmit=G$yq.RENDERBASE}},G$r.setIBVB=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x){if(void 0===G$O&&(G$O=0),void 0===G$N&&(G$N=0),void 0===G$x&&(G$x=0),null===G$v){if(G$m.isFlash){var G$K=G$H;G$K._selfIB||(G$K._selfIB=G$nq.create(35044)),G$K._selfIB.clear(),G$v=G$K._selfIB}else G$v=this._ib;G$Xq.expandIBQuadrangle(G$v,G$H._byteLength/(4*G$H.vertexStride*4))}if(!G$W||!G$R)throw Error("setIBVB must input:shader shaderValues");var G$T=G$Oq.create(this,G$H,G$v,G$A,G$R,G$W,G$O,G$N,G$x);G$y||(G$y=G$a.EMPTY),G$y.translate(G$q,G$r),G$a.mul(G$y,this._curMat,G$T._mat),G$y.translate(-G$q,-G$r),this._submits[this._submits._length++]=G$T,this._curSubmit=G$yq.RENDERBASE,this._renderKey=0},G$r.addRenderObject=function(G$q){this._submits[this._submits._length++]=G$q},G$r.fillTrangles=function(G$q,G$r,G$v,G$H,G$A){var G$y=this._curSubmit,G$R=this._vb,G$W=this._shader2D,G$O=G$y.shaderValue,G$N=G$H.length>>4,G$x=G$q.bitmap;this._renderKey=0,G$W.glTexture==G$x&&G$W.ALPHA===G$O.ALPHA||((G$y=this._curSubmit=G$yq.createSubmit(this,this._ib,G$R,G$R._byteLength/32*3,G$Vq.create(1,0))).shaderValue.textureHost=G$q,this._submits[this._submits._length++]=G$y),G$Xq.fillTranglesVB(G$R,G$r,G$v,G$H,G$A||this._curMat,this._x,this._y),G$y._numEle+=6*G$N},G$r.submitElement=function(G$q,G$r){var G$v=this._submits;for(G$r<0&&(G$r=G$v._length);G$q<G$r;)G$q+=G$v[G$q].renderSubmit()},G$r.finish=function(){G$pq.mainContext.finish()},G$r.flush=function(){var G$q=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(G$q>this._ib.bufferLength/12&&G$Xq.expandIBQuadrangle(this._ib,G$q),!this._isMain&&G$I.enabled&&G$I._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=G$I._atlasRestore;for(var G$r=this._submits,G$v=0,G$H=G$r._length;G$v<G$H;G$v++){var G$A=G$r[G$v];10016===G$A.getRenderType()&&G$A.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),G$rq.instance&&G$rq.getInstance().reset();var G$y;for(G$v=0,G$y=this.meshlist.length;G$v<G$y;G$v++){var G$R=this.meshlist[G$v];G$R.canReuse?G$R.releaseMesh():G$R.destroy()}return this.meshlist.length=0,this._curSubmit=G$yq.RENDERBASE,this._renderKey=0,this._triangleMesh=G$oq.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},G$r.setPathId=function(G$q){if(this.mId=G$q,-1!=this.mId){this.mHaveKey=!1;var G$r=G$c.getInstance();G$r.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,G$r.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},G$r.movePath=function(G$q,G$r){var G$v=G$q,G$H=G$r;G$q=this._curMat.a*G$v+this._curMat.c*G$H+this._curMat.tx,G$r=this._curMat.b*G$v+this._curMat.d*G$H+this._curMat.ty,this.mX+=G$q,this.mY+=G$r},G$r.beginPath=function(){var G$q=this._getPath();G$q.tempArray.length=0,G$q.closePath=!1,this.mX=0,this.mY=0},G$r.closePath=function(){this._path.closePath=!0},G$r.fill=function(G$q){void 0===G$q&&(G$q=!1);var G$r=this._getPath();this.drawPoly(0,0,G$r.tempArray,this.fillStyle._color.numColor,0,0,G$q)},G$r.stroke=function(){var G$q=this._getPath();if(0<this.lineWidth){if(-1==this.mId)G$q.drawLine(0,0,G$q.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var G$r=G$c.getInstance().shapeLineDic[this.mId];G$r.rebuild(G$q.tempArray),G$q.setGeomtry(G$r)}else G$c.getInstance().addLine(this.mId,G$q.drawLine(0,0,G$q.tempArray,this.lineWidth,this.strokeStyle._color.numColor));G$q.update();var G$v=[this.mX,this.mY],G$H=G$yq.createShape(this,G$q.ib,G$q.vb,G$q.count,G$q.offset,G$Vq.create(4,0));G$H.shaderValue.ALPHA=this._shader2D.ALPHA,G$H.shaderValue.u_pos=G$v,G$H.shaderValue.u_mmat2=G$Bq.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=G$H,this._renderKey=-1}},G$r.line=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=this._curSubmit,G$W=this._vb;if(G$Xq.fillLineVb(G$W,this._clipRect,G$q,G$r,G$v,G$H,G$A,G$y)){this._renderKey=0;var G$O=this._shader2D,G$N=G$R.shaderValue;G$O.strokeStyle===G$N.strokeStyle&&G$O.ALPHA===G$N.ALPHA||(G$O.glTexture=null,(G$R=this._curSubmit=G$yq.createSubmit(this,this._ib,G$W,(G$W._byteLength-64)/32*3,G$Vq.create(2,0))).shaderValue.strokeStyle=G$O.strokeStyle,G$R.shaderValue.mainID=2,G$R.shaderValue.ALPHA=G$O.ALPHA,this._submits[this._submits._length++]=G$R),G$R._numEle+=6}},G$r.moveTo=function(G$q,G$r,G$v){void 0===G$v&&(G$v=!0);var G$H=this._getPath();if(G$v){var G$A=G$q,G$y=G$r;G$q=this._curMat.a*G$A+this._curMat.c*G$y,G$r=this._curMat.b*G$A+this._curMat.d*G$y}G$H.addPoint(G$q,G$r)},G$r.lineTo=function(G$q,G$r,G$v){void 0===G$v&&(G$v=!0);var G$H=this._getPath();if(G$v){var G$A=G$q,G$y=G$r;G$q=this._curMat.a*G$A+this._curMat.c*G$y,G$r=this._curMat.b*G$A+this._curMat.d*G$y}G$H.addPoint(G$q,G$r)},G$r.drawCurves=function(G$q,G$r,G$v){this.setPathId(-1),this.beginPath(),this.strokeStyle=G$v[3],this.lineWidth=G$v[4];var G$H=G$v[2];G$q+=G$v[0],G$r+=G$v[1],this.movePath(G$q,G$r),this.moveTo(G$H[0],G$H[1]);for(var G$A=2,G$y=G$H.length;G$A<G$y;)this.quadraticCurveTo(G$H[G$A++],G$H[G$A++],G$H[G$A++],G$H[G$A++]);this.stroke()},G$r.arcTo=function(G$q,G$r,G$v,G$H,G$A){if(-1==this.mId||!this.mHaveKey){var G$y=0,G$R=0,G$W=0,G$O=this._getPath();this._curMat.copyTo(G$u._tmpMatrix),G$u._tmpMatrix.tx=G$u._tmpMatrix.ty=0,G$u._tempPoint.setTo(G$O.getEndPointX(),G$O.getEndPointY()),G$u._tmpMatrix.invertTransformPoint(G$u._tempPoint);var G$N=G$u._tempPoint.x-G$q,G$x=G$u._tempPoint.y-G$r,G$K=Math.sqrt(G$N*G$N+G$x*G$x);if(!(G$K<=1e-6)){var G$T=G$N/G$K,G$j=G$x/G$K,G$D=G$v-G$q,G$g=G$H-G$r,G$X=G$D*G$D+G$g*G$g,G$m=Math.sqrt(G$X);if(!(G$m<=1e-6)){var G$B=G$D/G$m,G$e=G$g/G$m,G$p=G$T+G$B,G$M=G$j+G$e,G$z=Math.sqrt(G$p*G$p+G$M*G$M);if(!(G$z<=1e-6)){var G$P=G$p/G$z,G$V=G$M/G$z,G$a=Math.acos(G$P*G$T+G$V*G$j),G$J=Math.PI/2-G$a,G$$=(G$K=G$A/Math.tan(G$J))*G$T+G$q,G$G=G$K*G$j+G$r,G$E=Math.sqrt(G$K*G$K+G$A*G$A),G$Q=G$q+G$P*G$E,G$s=G$r+G$V*G$E,G$Z=0,G$Y=0;if(0<=G$T*G$e-G$j*G$B){var G$o=2*G$J/G$u.SEGNUM;G$Z=Math.sin(G$o),G$Y=Math.cos(G$o)}else G$o=2*-G$J/G$u.SEGNUM,G$Z=Math.sin(G$o),G$Y=Math.cos(G$o);G$R=this._curMat.a*G$$+this._curMat.c*G$G,G$W=this._curMat.b*G$$+this._curMat.d*G$G,G$R==this._path.getEndPointX()&&G$W==this._path.getEndPointY()||G$O.addPoint(G$R,G$W);var G$C=G$$-G$Q,G$c=G$G-G$s;for(G$y=0;G$y<G$u.SEGNUM;G$y++){var G$b=G$C*G$Y+G$c*G$Z,G$d=-G$C*G$Z+G$c*G$Y;G$R=G$b+G$Q,G$W=G$d+G$s,G$q=this._curMat.a*G$R+this._curMat.c*G$W,G$W=G$r=this._curMat.b*G$R+this._curMat.d*G$W,(G$R=G$q)==this._path.getEndPointX()&&G$W==this._path.getEndPointY()||G$O.addPoint(G$R,G$W),G$C=G$b,G$c=G$d}}}}}},G$r.arc=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){if(void 0===G$y&&(G$y=!1),void 0===G$R&&(G$R=!0),-1!=this.mId){var G$W=G$c.getInstance().shapeDic[this.mId];if(G$W&&this.mHaveKey&&!G$W.needUpdate(this._curMat))return;G$r=G$q=0}var G$O,G$N=0,G$x=0,G$K=0,G$T=0,G$j=0,G$D=0,G$g=0;if(G$x=G$A-G$H,G$y)if(Math.abs(G$x)>=2*Math.PI)G$x=2*-Math.PI;else for(;0<G$x;)G$x-=2*Math.PI;else if(Math.abs(G$x)>=2*Math.PI)G$x=2*Math.PI;else for(;G$x<0;)G$x+=2*Math.PI;G$O=G$x/(G$g=G$v<101?Math.max(10,G$x*G$v/5):G$v<201?Math.max(10,G$x*G$v/20):Math.max(10,G$x*G$v/40))/2,G$K=Math.abs(4/3*(1-Math.cos(G$O))/Math.sin(G$O)),G$y&&(G$K=-G$K);var G$X=this._getPath(),G$m=NaN,G$B=NaN;for(G$D=0;G$D<=G$g;G$D++)G$N=G$H+G$x*(G$D/G$g),G$T=G$q+Math.cos(G$N)*G$v,G$j=G$r+Math.sin(G$N)*G$v,G$R&&(G$m=G$T,G$B=G$j,G$T=this._curMat.a*G$m+this._curMat.c*G$B,G$j=this._curMat.b*G$m+this._curMat.d*G$B),G$T==this._path.getEndPointX()&&G$j==this._path.getEndPointY()||G$X.addPoint(G$T,G$j);G$T=G$q+Math.cos(G$A)*G$v,G$j=G$r+Math.sin(G$A)*G$v,G$R&&(G$m=G$T,G$B=G$j,G$T=this._curMat.a*G$m+this._curMat.c*G$B,G$j=this._curMat.b*G$m+this._curMat.d*G$B),G$T==this._path.getEndPointX()&&G$j==this._path.getEndPointY()||G$X.addPoint(G$T,G$j)},G$r.quadraticCurveTo=function(G$q,G$r,G$v,G$H){var G$A=G$K.I,G$y=G$v,G$R=G$H;G$v=this._curMat.a*G$y+this._curMat.c*G$R,G$H=this._curMat.b*G$y+this._curMat.d*G$R,G$y=G$q,G$R=G$r,G$q=this._curMat.a*G$y+this._curMat.c*G$R,G$r=this._curMat.b*G$y+this._curMat.d*G$R;for(var G$W=G$A.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),G$q,G$r,G$v,G$H],30,2),G$O=0,G$N=G$W.length/2;G$O<G$N;G$O++)this.lineTo(G$W[2*G$O],G$W[2*G$O+1],!1);this.lineTo(G$v,G$H,!1)},G$r.rect=function(G$q,G$r,G$v,G$H){this._other=this._other.make(),this._other.path||(this._other.path=new G$_),this._other.path.rect(G$q,G$r,G$v,G$H)},G$r.strokeRect=function(G$q,G$r,G$v,G$H,G$A){var G$y=.5*G$A;this.line(G$q-G$y,G$r,G$q+G$v+G$y,G$r,G$A,this._curMat),this.line(G$q+G$v,G$r,G$q+G$v,G$r+G$H,G$A,this._curMat),this.line(G$q,G$r,G$q,G$r+G$H,G$A,this._curMat),this.line(G$q-G$y,G$r+G$H,G$q+G$v+G$y,G$r+G$H,G$A,this._curMat)},G$r.clip=function(){},G$r.drawPoly=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){void 0===G$R&&(G$R=!1),this._renderKey=0,this._shader2D.glTexture=null;var G$W=this._getPath();if(-1==this.mId)G$W.polygon(G$q,G$r,G$v,G$H,G$A||1,G$y);else if(this.mHaveKey){var G$O=G$c.getInstance().shapeDic[this.mId];G$O.setMatrix(this._curMat),G$O.rebuild(G$W.tempArray),G$W.setGeomtry(G$O)}else{var G$N=G$W.polygon(G$q,G$r,G$v,G$H,G$A||1,G$y);G$c.getInstance().addShape(this.mId,G$N),G$N.setMatrix(this._curMat)}G$W.update();var G$x,G$K=[this.mX,this.mY];if((G$x=G$yq.createShape(this,G$W.ib,G$W.vb,G$W.count,G$W.offset,G$Vq.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,G$x.shaderValue.u_pos=G$K,G$x.shaderValue.u_mmat2=G$Bq.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=G$x,0<G$A){if(this.mHaveLineKey){var G$T=G$c.getInstance().shapeLineDic[this.mId];G$T.rebuild(G$W.tempArray),G$W.setGeomtry(G$T)}else G$c.getInstance().addShape(this.mId,G$W.drawLine(G$q,G$r,G$v,G$A,G$y));G$W.update(),(G$x=G$yq.createShape(this,G$W.ib,G$W.vb,G$W.count,G$W.offset,G$Vq.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,G$x.shaderValue.u_mmat2=G$Bq.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=G$x}},G$r.drawParticle=function(G$q,G$r,G$v){G$v.x=G$q,G$v.y=G$r,this._submits[this._submits._length++]=G$v},G$r._getPath=function(){return this._path||(this._path=new G$_)},G$H(0,G$r,"globalCompositeOperation",function(){return G$F.NAMES[this._nBlendType]},function(G$q){var G$r=G$F.TOINT[G$q];null==G$r||this._nBlendType===G$r||(G$f.save(this,65536,this,!0),this._curSubmit=G$yq.RENDERBASE,this._renderKey=0,this._nBlendType=G$r)}),G$H(0,G$r,"strokeStyle",function(){return this._shader2D.strokeStyle},function(G$q){this._shader2D.strokeStyle.equal(G$q)||(G$f.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=G$U.create(G$q))}),G$H(0,G$r,"globalAlpha",function(){return this._shader2D.ALPHA},function(G$q){(G$q=Math.floor(1e3*G$q)/1e3)!=this._shader2D.ALPHA&&(G$f.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=G$q)}),G$H(0,G$r,"asBitmap",null,function(G$q){if(G$q){if(this._targets||(this._targets=new G$h),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),G$H(0,G$r,"fillStyle",function(){return this._shader2D.fillStyle},function(G$q){this._shader2D.fillStyle.equal(G$q)||(G$f.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=G$U.create(G$q))}),G$H(0,G$r,"textAlign",function(){return this._other.textAlign},function(G$q){this._other.textAlign===G$q||(this._other=this._other.make(),G$f.save(this,32768,this._other,!1),this._other.textAlign=G$q)}),G$H(0,G$r,"lineWidth",function(){return this._other.lineWidth},function(G$q){this._other.lineWidth===G$q||(this._other=this._other.make(),G$f.save(this,256,this._other,!1),this._other.lineWidth=G$q)}),G$H(0,G$r,"textBaseline",function(){return this._other.textBaseline},function(G$q){this._other.textBaseline===G$q||(this._other=this._other.make(),G$f.save(this,16384,this._other,!1),this._other.textBaseline=G$q)}),G$H(0,G$r,"font",null,function(G$q){G$q!=this._other.font.toString()&&(this._other=this._other.make(),G$f.save(this,8,this._other,!1),this._other.font===G$Dq.EMPTY?this._other.font=new G$Dq(G$q):this._other.font.setFont(G$q))}),G$u.__init__=function(){G$v.DEFAULT=new G$v},G$u._tempPoint=new G$J,G$u._SUBMITVBSIZE=32e3,G$u._MAXSIZE=99999999,G$u._RECTVBSIZE=16,G$u.MAXCLIPRECT=new G$$(0,0,99999999,99999999),G$u._COUNT=0,G$u._tmpMatrix=new G$a,G$u.SEGNUM=32,G$u._contextcount=0,G$R(G$u,["_fontTemp",function(){return this._fontTemp=new G$Dq},"_drawStyleTemp",function(){return this._drawStyleTemp=new G$U(null)}]),G$u.__init$=function(){G$v=function(){function G$q(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=G$Dq.EMPTY}G$T(G$q,"");var G$r=G$q.prototype;return G$r.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=G$Dq.EMPTY},G$r.make=function(){return this===G$q.DEFAULT?new G$q:this},G$q.DEFAULT=null,G$q}()},G$u}(),G$Vq=function(G$q){function G$H(G$q,G$r){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,G$H.__super.call(this),this.defines=new G$Gq,this.position=G$H._POSITION,this.mainID=G$q,this.subID=G$r,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.colorMul=G$A.ShieldColor?G$D.create(G$A.ShieldColor)._color:null,this.glTexture=null,this.u_mmat2=null,this._cacheID=G$q|G$r,this._inClassCache=G$H._cache[this._cacheID],0<G$q&&!this._inClassCache&&(this._inClassCache=G$H._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}G$T(G$H,"laya.webgl.shader.d2.value.Value2D",G$d);var G$r=G$H.prototype;return G$r.setValue=function(G$q){},G$r.refresh=function(){var G$q=this.size;return G$q[0]=G$Bq.width,G$q[1]=G$Bq.height,this.alpha=this.ALPHA*G$Bq.worldAlpha,this.mmat=G$Bq.worldMatrix4,this},G$r._ShaderWithCompile=function(){return G$Lq.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,G$hq.create)},G$r._withWorldShaderDefines=function(){var G$q=G$Bq.worldShaderDefines,G$r=G$Lq.sharders[this.mainID|this.defines._value|G$q.getValue()];if(!G$r){var G$v,G$H={};for(G$v in this.defines.toNameDic())G$H[G$v]="";for(G$v in G$q.toNameDic())G$H[G$v]="";G$r=G$Lq.withCompile2D(0,this.mainID,G$H,this.mainID|this.defines._value|G$q.getValue(),G$hq.create)}var G$A=G$Bq.worldFilters;if(!G$A)return G$r;for(var G$y,G$R=G$A.length,G$W=0;G$W<G$R;G$W++)(G$y=G$A[G$W])&&G$y.action.setValue(this);return G$r},G$r.upload=function(){var G$q=G$Bq;this.alpha=this.ALPHA*G$q.worldAlpha,G$Bq.worldMatrix4!==G$Bq.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),G$A.ShieldColor&&!this.colorMul&&(this.colorMul=G$A.ShieldColor?G$D.create(G$A.ShieldColor)._color:null),this.colorMul?this.defines.add(16384):this.defines.remove(16384),G$pq.shaderHighPrecision&&this.defines.add(1024);var G$r,G$v=G$q.worldShaderDefines?this._withWorldShaderDefines():G$Lq.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=G$q.width,this.size[1]=G$q.height,this.mmat=G$q.worldMatrix4,G$Cq.activeShader!==G$v?G$v._shaderValueWidth!==G$q.width||G$v._shaderValueHeight!==G$q.height?(G$v._shaderValueWidth=G$q.width,G$v._shaderValueHeight=G$q.height):G$r=G$v._params2dQuick2||G$v._make2dQuick2():G$v._shaderValueWidth!==G$q.width||G$v._shaderValueHeight!==G$q.height?(G$v._shaderValueWidth=G$q.width,G$v._shaderValueHeight=G$q.height):G$r=G$v._params2dQuick1||G$v._make2dQuick1(),G$v.upload(this,G$r)},G$r.setFilters=function(G$q){if(this.filters=G$q)for(var G$r,G$v=G$q.length,G$H=0;G$H<G$v;G$H++)(G$r=G$q[G$H])&&(this.defines.add(G$r.type),G$r.action.setValue(this))},G$r.clear=function(){this.defines.setValue(this.subID)},G$r.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},G$H._initone=function(G$q,G$r){G$H._typeClass[G$q]=G$r,G$H._cache[G$q]=[],G$H._cache[G$q]._length=0},G$H.__init__=function(){G$H._POSITION=[2,5126,!1,4*G$gq.BYTES_PE,0],G$H._TEXCOORD=[2,5126,!1,4*G$gq.BYTES_PE,2*G$gq.BYTES_PE],G$H._initone(2,G$uq),G$H._initone(4,G$Fq),G$H._initone(256,G$Iq),G$H._initone(512,G$dq),G$H._initone(1,G$tq),G$H._initone(65,G$wq),G$H._initone(9,G$tq)},G$H.create=function(G$q,G$r){var G$v=G$H._cache[G$q|G$r];return G$v._length?G$v[--G$v._length]:new G$H._typeClass[G$q|G$r](G$r)},G$H._POSITION=null,G$H._TEXCOORD=null,G$H._cache=[],G$H._typeClass=[],G$H.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],G$H}(),G$aq=function(G$q){function G$X(G$q,G$r){G$X.__super.call(this,G$q,G$r)}G$T(G$X,"laya.webgl.utils.RenderSprite3D",G$B);var G$r=G$X.prototype;return G$r.onCreate=function(G$q){switch(G$q){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},G$r._mask=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R=this._next,G$W=G$q.mask;if(G$W){G$r.ctx.save();var G$O=G$r.ctx.globalCompositeOperation,G$N=new G$$;if(G$N.copyFrom(G$W.getBounds()),G$N.width=Math.round(G$N.width),G$N.height=Math.round(G$N.height),G$N.x=Math.round(G$N.x),G$N.y=Math.round(G$N.y),0<G$N.width&&0<G$N.height){var G$x=G$q._style._tf,G$K=G$Wq.create();G$K.addValue("bounds",G$N),G$A=G$Rq.create([G$K,G$r],laya.webgl.utils.RenderSprite3D.tmpTarget),G$r.addRenderObject(G$A),G$W.render(G$r,-G$N.x,-G$N.y),G$A=G$Rq.create([G$K],laya.webgl.utils.RenderSprite3D.endTmpTarget),G$r.addRenderObject(G$A),G$r.ctx.save(),G$r.clipRect(G$v-G$x.translateX+G$N.x,G$H-G$x.translateY+G$N.y,G$N.width,G$N.height),G$R._fun.call(G$R,G$q,G$r,G$v,G$H),G$r.ctx.restore(),G$y=G$xq.create(6),G$O=G$r.ctx.globalCompositeOperation,G$y.blendMode="mask",G$r.addRenderObject(G$y),G$a.TEMP.identity();var G$T=G$Vq.create(1,0),G$j=G$o.INV_UV,G$D=G$N.width,G$g=G$N.height;(G$N.width<32||G$N.height<32)&&((G$j=G$X.tempUV)[0]=0,G$j[1]=0,G$j[2]=32<=G$N.width?1:G$N.width/32,G$j[3]=0,G$j[4]=32<=G$N.width?1:G$N.width/32,G$j[5]=32<=G$N.height?1:G$N.height/32,G$j[6]=0,G$j[7]=32<=G$N.height?1:G$N.height/32,G$N.width=32<=G$N.width?G$N.width:32,G$N.height=32<=G$N.height?G$N.height:32,G$j[1]*=-1,G$j[3]*=-1,G$j[5]*=-1,G$j[7]*=-1,G$j[1]+=1,G$j[3]+=1,G$j[5]+=1,G$j[7]+=1),G$r.ctx.drawTarget(G$K,G$v+G$N.x-G$x.translateX,G$H+G$N.y-G$x.translateY,G$D,G$g,G$a.TEMP,"tmpTarget",G$T,G$j,6),G$A=G$Rq.create([G$K],laya.webgl.utils.RenderSprite3D.recycleTarget),G$r.addRenderObject(G$A),(G$y=G$xq.create(6)).blendMode=G$O,G$r.addRenderObject(G$y)}G$r.ctx.restore()}else G$R._fun.call(G$R,G$q,G$r,G$v,G$H)},G$r._blend=function(G$q,G$r,G$v,G$H){var G$A=G$q._style,G$y=this._next;G$A.blendMode?(G$r.ctx.save(),G$r.ctx.globalCompositeOperation=G$A.blendMode,G$y._fun.call(G$y,G$q,G$r,G$v,G$H),G$r.ctx.restore()):G$y._fun.call(G$y,G$q,G$r,G$v,G$H)},G$r._transform=function(G$q,G$r,G$v,G$H){var G$A=G$q.transform,G$y=this._next;if(G$A&&G$y!=G$B.NORENDER){var G$R=G$r.ctx;G$q._style;G$A.tx=G$v,G$A.ty=G$H;var G$W=G$R._getTransformMatrix(),G$O=G$W.clone();G$a.mul(G$A,G$W,G$W),G$W._checkTransform(),G$A.tx=G$A.ty=0,G$y._fun.call(G$y,G$q,G$r,0,0),G$O.copyTo(G$W),G$O.destroy()}else G$y._fun.call(G$y,G$q,G$r,G$v,G$H)},G$X.tmpTarget=function(G$q,G$r){var G$v=G$q.getValue("bounds"),G$H=G$cq.create(G$v.width,G$v.height);G$H.start(),G$H.clear(0,0,0,0),G$q.addValue("tmpTarget",G$H)},G$X.endTmpTarget=function(G$q){G$q.getValue("tmpTarget").end()},G$X.recycleTarget=function(G$q){G$q.getValue("tmpTarget").recycle(),G$q.recycle()},G$R(G$X,["tempUV",function(){return this.tempUV=new Array(8)}]),G$X}(),G$Jq=function(G$q){function G$r(){this.data=null,G$r.__super.call(this)}G$T(G$r,"laya.filters.webgl.ColorFilterActionGL",G$b);var G$v=G$r.prototype;return G$z.imps(G$v,{"laya.filters.IFilterActionGL":!0}),G$v.setValue=function(G$q){G$q.colorMat=this.data._mat,G$q.colorAlpha=this.data._alpha},G$v.apply3d=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$q.getValue("bounds"),G$R=G$Vq.create(1,0);G$R.setFilters([this.data]);var G$W=G$a.TEMP;G$W.identity(),G$v.ctx.drawTarget(G$q,0,0,G$y.width,G$y.height,G$W,"src",G$R)},G$r}(),G$$q=function(G$q){function G$y(G$q,G$r,G$v,G$H,G$A){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,G$y.__super.call(this,G$q,G$r,G$A),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new G$Uq,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=G$v,this._atlasCanvas.height=G$H,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}G$T(G$y,"laya.webgl.atlas.Atlaser",G$u);var G$r=G$y.prototype;return G$r.computeUVinAtlasTexture=function(G$q,G$r,G$v,G$H){var G$A=G$I.atlasTextureWidth,G$y=G$I.atlasTextureHeight,G$R=G$v/G$A,G$W=G$H/G$y,G$O=(G$v+G$q.bitmap.width)/G$A,G$N=(G$H+G$q.bitmap.height)/G$y,G$x=G$q.bitmap.width/G$A,G$K=G$q.bitmap.height/G$y;G$q.uv=[G$R+G$r[0]*G$x,G$W+G$r[1]*G$K,G$O-(1-G$r[2])*G$x,G$W+G$r[3]*G$K,G$O-(1-G$r[4])*G$x,G$N-(1-G$r[5])*G$K,G$R+G$r[6]*G$x,G$N-(1-G$r[7])*G$K]},G$r.findBitmapIsExist=function(G$q){if(G$q instanceof laya.webgl.resource.WebGLImage){var G$r=G$q,G$v=G$r.url,G$H=this._InAtlasWebGLImagesKey[G$v||G$r.id];if(G$H)return G$H.offsetInfoID}return-1},G$r.addToAtlasTexture=function(G$q,G$r,G$v){if(G$q instanceof laya.webgl.resource.WebGLImage){var G$H=G$q,G$A=G$H.url;this._InAtlasWebGLImagesKey[G$A||G$H.id]={bitmap:G$q,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([G$r,G$v])}this._atlasCanvas.texSubImage2D(G$r,G$v,G$q.atlasSource),G$q.clearAtlasSource()},G$r.addToAtlas=function(G$q,G$r,G$v){G$q._atlasID=this._inAtlasTextureKey.length;var G$H=G$q.uv.slice(),G$A=G$q.bitmap;this._inAtlasTextureKey.push(G$q),this._inAtlasTextureOriUVValue.push(G$H),this._inAtlasTextureBitmapValue.push(G$A),this.computeUVinAtlasTexture(G$q,G$H,G$r,G$v),G$q.bitmap=this._atlasCanvas},G$r.clear=function(){for(var G$q=0,G$r=this._inAtlasTextureKey.length;G$q<G$r;G$q++)this._inAtlasTextureKey[G$q].bitmap=this._inAtlasTextureBitmapValue[G$q],this._inAtlasTextureKey[G$q].uv=this._inAtlasTextureOriUVValue[G$q],this._inAtlasTextureKey[G$q]._atlasID=-1,this._inAtlasTextureKey[G$q].bitmap.lock=!1,this._inAtlasTextureKey[G$q].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},G$r.dispose=function(){this.clear(),this._atlasCanvas.destroy()},G$H(0,G$r,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),G$H(0,G$r,"texture",function(){return this._atlasCanvas}),G$H(0,G$r,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),G$y}(),G$Gq=function(G$q){function G$v(){G$v.__super.call(this,G$v.__name2int,G$v.__int2name,G$v.__int2nameMap)}return G$T(G$v,"laya.webgl.shader.d2.ShaderDefines2D",G$k),G$v.__init__=function(){G$v.reg("TEXTURE2D",1),G$v.reg("COLOR2D",2),G$v.reg("PRIMITIVE",4),G$v.reg("GLOW_FILTER",8),G$v.reg("BLUR_FILTER",16),G$v.reg("COLOR_FILTER",32),G$v.reg("COLOR_ADD",64),G$v.reg("WORLDMAT",128),G$v.reg("FILLTEXTURE",256),G$v.reg("FSHIGHPRECISION",1024),G$v.reg("TXTALPHA",2048),G$v.reg("TXTCOMPRESS",4096),G$v.reg("COLORMUL",16384)},G$v.reg=function(G$q,G$r){G$k._reg(G$q,G$r,G$v.__name2int,G$v.__int2name)},G$v.toText=function(G$q,G$r,G$v){return G$k._toText(G$q,G$r,G$v)},G$v.toInt=function(G$q){return G$k._toInt(G$q,G$v.__name2int)},G$v.TEXTURE2D=1,G$v.COLOR2D=2,G$v.PRIMITIVE=4,G$v.FILTERGLOW=8,G$v.FILTERBLUR=16,G$v.FILTERCOLOR=32,G$v.COLORADD=64,G$v.WORLDMAT=128,G$v.FILLTEXTURE=256,G$v.SKINMESH=512,G$v.SHADERDEFINE_FSHIGHPRECISION=1024,G$v.TXTALPHA=2048,G$v.TXTCOMPRESS=4096,G$v.COLORMUL=16384,G$v.__name2int={},G$v.__int2name=[],G$v.__int2nameMap=[],G$v}(),G$Eq=(function(G$q){function G$W(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$W.__super.call(this,G$q,G$r,G$v,G$H,40,G$A,G$y,G$R)}G$T(G$W,"laya.webgl.shapes.Ellipse",G$vq)}(),function(G$q){function G$y(G$q,G$r,G$v,G$H,G$A){this._points=[],this.rebuild(G$v),G$y.__super.call(this,G$q,G$r,0,0,0,G$A,G$H,G$A,0)}G$T(G$y,"laya.webgl.shapes.Line",G$vq);var G$r=G$y.prototype;return G$r.rebuild=function(G$q){var G$r=G$q.length;G$r!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(G$r/2-1)),this.mFloat32Array=new Float32Array(5*G$r)),this._points.length=0;for(var G$v=NaN,G$H=NaN,G$A=-1,G$y=-1,G$R=G$q.length/2,G$W=0;G$W<G$R;G$W++)G$v=G$q[2*G$W],G$H=G$q[2*G$W+1],(.01<Math.abs(G$A-G$v)||.01<Math.abs(G$y-G$H))&&this._points.push(G$v,G$H),G$A=G$v,G$y=G$H},G$r.getData=function(G$q,G$r,G$v){var G$H=[],G$A=[];0<this.borderWidth&&this.createLine2(this._points,G$H,this.borderWidth,G$v,G$A,this._points.length/2),this.mUint16Array.set(G$H,0),this.mFloat32Array.set(G$A,0),G$q.append(this.mUint16Array),G$r.append(this.mFloat32Array)},G$y}()),G$Qq=function(G$q){function G$K(G$q,G$r,G$v,G$H,G$A){this._points=[];for(var G$y=NaN,G$R=NaN,G$W=-1,G$O=-1,G$N=G$v.length/2-1,G$x=0;G$x<G$N;G$x++)G$y=G$v[2*G$x],G$R=G$v[2*G$x+1],(.01<Math.abs(G$W-G$y)||.01<Math.abs(G$O-G$R))&&this._points.push(G$y,G$R),G$W=G$y,G$O=G$R;G$y=G$v[2*G$N],G$R=G$v[2*G$N+1],G$W=this._points[0],G$O=this._points[1],(.01<Math.abs(G$W-G$y)||.01<Math.abs(G$O-G$R))&&this._points.push(G$y,G$R),G$K.__super.call(this,G$q,G$r,0,0,this._points.length/2,0,G$H,G$A)}G$T(G$K,"laya.webgl.shapes.LoopLine",G$vq);var G$r=G$K.prototype;return G$r.getData=function(G$q,G$r,G$v){if(0<this.borderWidth){for(var G$H=this.color,G$A=(G$H>>16&255)/255,G$y=(G$H>>8&255)/255,G$R=(255&G$H)/255,G$W=[],G$O=0,G$N=0,G$x=[],G$K=Math.floor(this._points.length/2),G$T=0;G$T<G$K;G$T++)G$O=this._points[2*G$T],G$N=this._points[2*G$T+1],G$W.push(this.x+G$O,this.y+G$N,G$A,G$y,G$R);this.createLoopLine(G$W,G$x,this.borderWidth,G$v+G$W.length/5),G$q.append(new Uint16Array(G$x)),G$r.append(new Float32Array(G$W))}},G$r.createLoopLine=function(G$q,G$r,G$v,G$H,G$A,G$y){G$q.length;var G$R=G$q.concat(),G$W=G$A||G$q,G$O=this.borderColor,G$N=(G$O>>16&255)/255,G$x=(G$O>>8&255)/255,G$K=(255&G$O)/255,G$T=[G$R[0],G$R[1]],G$j=[G$R[G$R.length-5],G$R[G$R.length-4]],G$D=G$j[0]+.5*(G$T[0]-G$j[0]),G$g=G$j[1]+.5*(G$T[1]-G$j[1]);G$R.unshift(G$D,G$g,0,0,0),G$R.push(G$D,G$g,0,0,0);var G$X,G$m,G$B,G$e,G$p,G$M,G$z,G$P,G$V,G$a,G$J,G$$,G$G,G$E,G$Q,G$s,G$Z,G$Y,G$o,G$C,G$c=G$R.length/5,G$b=G$H,G$d=G$v/2;G$B=G$R[0],G$e=G$R[1],G$a=G$B-(G$p=G$R[5]),G$V=(G$V=-(G$e-(G$M=G$R[6])))/(G$C=Math.sqrt(G$V*G$V+G$a*G$a))*G$d,G$a=G$a/G$C*G$d,G$W.push(G$B-G$V,G$e-G$a,G$N,G$x,G$K,G$B+G$V,G$e+G$a,G$N,G$x,G$K);for(var G$u=1;G$u<G$c-1;G$u++)G$B=G$R[5*(G$u-1)],G$e=G$R[5*(G$u-1)+1],G$p=G$R[5*G$u],G$M=G$R[5*G$u+1],G$z=G$R[5*(G$u+1)],G$P=G$R[5*(G$u+1)+1],G$a=G$B-G$p,G$$=G$p-G$z,G$Q=(-(G$V=(G$V=-(G$e-G$M))/(G$C=Math.sqrt(G$V*G$V+G$a*G$a))*G$d)+G$B)*(-(G$a=G$a/G$C*G$d)+G$M)-(-G$V+G$p)*(-G$a+G$e),G$Y=(-(G$J=(G$J=-(G$M-G$P))/(G$C=Math.sqrt(G$J*G$J+G$$*G$$))*G$d)+G$z)*(-(G$$=G$$/G$C*G$d)+G$M)-(-G$J+G$p)*(-G$$+G$P),G$o=(G$G=-G$a+G$e-(-G$a+G$M))*(G$Z=-G$J+G$p-(-G$J+G$z))-(G$s=-G$$+G$P-(-G$$+G$M))*(G$E=-G$V+G$p-(-G$V+G$B)),Math.abs(G$o)<.1?(G$o+=10.1,G$W.push(G$p-G$V,G$M-G$a,G$N,G$x,G$K,G$p+G$V,G$M+G$a,G$N,G$x,G$K)):(((G$X=(G$E*G$Y-G$Z*G$Q)/G$o)-G$p)*(G$X-G$p)+((G$m=(G$s*G$Q-G$G*G$Y)/G$o)-G$M)+(G$m-G$M),G$W.push(G$X,G$m,G$N,G$x,G$K,G$p-(G$X-G$p),G$M-(G$m-G$M),G$N,G$x,G$K));G$y&&(G$r=G$y);var G$I=this.edges+1;for(G$u=1;G$u<G$I;G$u++)G$r.push(G$b+2*(G$u-1),G$b+2*(G$u-1)+1,G$b+2*G$u+1,G$b+2*G$u+1,G$b+2*G$u,G$b+2*(G$u-1));return G$r.push(G$b+2*(G$u-1),G$b+2*(G$u-1)+1,G$b+1,G$b+1,G$b,G$b+2*(G$u-1)),G$W},G$K}(),G$sq=function(G$q){function G$R(G$q,G$r,G$v,G$H,G$A,G$y){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=G$a.create(),this._points=G$v.slice(0,G$v.length),G$R.__super.call(this,G$q,G$r,0,0,this._points.length/2,G$H,G$A,G$y)}G$T(G$R,"laya.webgl.shapes.Polygon",G$vq);var G$r=G$R.prototype;return G$r.rebuild=function(G$q){this._repaint||(this._points.length=0,this._points=this._points.concat(G$q))},G$r.setMatrix=function(G$q){G$q.copyTo(this._mat)},G$r.needUpdate=function(G$q){return this._repaint=this._mat.a==G$q.a&&this._mat.b==G$q.b&&this._mat.c==G$q.c&&this._mat.d==G$q.d&&this._mat.tx==G$q.tx&&this._mat.ty==G$q.ty,!this._repaint},G$r.getData=function(G$q,G$r,G$v){var G$H,G$A=0,G$y=this._points,G$R=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=G$v){for(this._start=G$v,G$H=[],G$R=this.earcutTriangles.length,G$A=0;G$A<G$R;G$A++)G$H.push(this.earcutTriangles[G$A]+G$v);this.mUint16Array=new Uint16Array(G$H)}}else{this._start=G$v,G$H=[];var G$W=[],G$O=[],G$N=this.color,G$x=(G$N>>16&255)/255,G$K=(G$N>>8&255)/255,G$T=(255&G$N)/255;for(G$R=Math.floor(G$y.length/2),G$A=0;G$A<G$R;G$A++)G$W.push(this.x+G$y[2*G$A],this.y+G$y[2*G$A+1],G$x,G$K,G$T),G$O.push(this.x+G$y[2*G$A],this.y+G$y[2*G$A+1]);for(this.earcutTriangles=G$Hq.earcut(G$O,null,2),G$R=this.earcutTriangles.length,G$A=0;G$A<G$R;G$A++)G$H.push(this.earcutTriangles[G$A]+G$v);this.mUint16Array=new Uint16Array(G$H),this.mFloat32Array=new Float32Array(G$W)}G$q.append(this.mUint16Array),G$r.append(this.mFloat32Array)},G$R}(),G$Zq=function(G$q){function G$y(){this._matrix=new G$a,this._matrix4=G$gq.defaultMatrix4.concat(),G$y.__super.call(this,1e4),this.shaderValue=new G$Vq(0,0)}G$T(G$y,"laya.webgl.submit.SubmitCanvas",G$yq);var G$r=G$y.prototype;return G$r.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var G$q=G$Bq.worldAlpha,G$r=G$Bq.worldMatrix4,G$v=G$Bq.worldMatrix,G$H=G$Bq.worldFilters,G$A=G$Bq.worldShaderDefines,G$y=this.shaderValue,G$R=this._matrix,G$W=this._matrix4,G$O=G$a.TEMP;return G$a.mul(G$R,G$v,G$O),G$W[0]=G$O.a,G$W[1]=G$O.b,G$W[4]=G$O.c,G$W[5]=G$O.d,G$W[12]=G$O.tx,G$W[13]=G$O.ty,G$Bq.worldMatrix=G$O.clone(),G$Bq.worldMatrix4=G$W,G$Bq.worldAlpha=G$Bq.worldAlpha*G$y.alpha,G$y.filters&&G$y.filters.length&&(G$Bq.worldFilters=G$y.filters,G$Bq.worldShaderDefines=G$y.defines),this._ctx_src.flush(),G$Bq.worldAlpha=G$q,G$Bq.worldMatrix4=G$r,G$Bq.worldMatrix.destroy(),G$Bq.worldMatrix=G$v,G$Bq.worldFilters=G$H,G$Bq.worldShaderDefines=G$A,1},G$r.releaseRender=function(){var G$q=G$y._cache;this._ctx_src=null,G$q[G$q._length++]=this},G$r.getRenderType=function(){return 10003},G$y.create=function(G$q,G$r,G$v){var G$H=G$y._cache._length?G$y._cache[--G$y._cache._length]:new G$y;G$H._ctx_src=G$q;var G$A=G$H.shaderValue;return G$A.alpha=G$r,G$A.defines.setValue(0),G$v&&G$v.length&&G$A.setFilters(G$v),G$H},G$y._cache=((G$y._cache=[])._length=0,G$y._cache),G$y}(),G$Yq=function(G$q){function G$N(G$q){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===G$q&&(G$q=1e4),G$N.__super.call(this,G$q)}G$T(G$N,"laya.webgl.submit.SubmitTexture",G$yq);var G$r=G$N.prototype;return G$r.releaseRender=function(){var G$q=G$N._cache;(G$q[G$q._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},G$r.addTexture=function(G$q,G$r){this._texsID[this._texs.length]=G$q._uvID,this._texs.push(G$q),this._vbPos.push(G$r)},G$r.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var G$q=this.shaderValue.textureHost.bitmap;if(null!==G$q)for(var G$r=this._vb.getFloat32Array(),G$v=0,G$H=this._texs.length;G$v<G$H;G$v++){var G$A=this._texs[G$v];G$A.active();var G$y=G$A.uv;if(this._texsID[G$v]!==G$A._uvID){this._texsID[G$v]=G$A._uvID;var G$R=this._vbPos[G$v];G$r[G$R+2]=G$y[0],G$r[G$R+3]=G$y[1],G$r[G$R+6]=G$y[2],G$r[G$R+7]=G$y[3],G$r[G$R+10]=G$y[4],G$r[G$R+11]=G$y[5],G$r[G$R+14]=G$y[6],G$r[G$R+15]=G$y[7],this._vb.setNeedUpload()}G$A.bitmap!==G$q&&(this._isSameTexture=!1)}}},G$r.renderSubmit=function(){if(0===this._numEle)return G$N._shaderSet=!1,1;var G$q=this.shaderValue.textureHost;if(G$q){var G$r=G$q.source;if(!G$q.bitmap||!G$r)return G$N._shaderSet=!1,1;this.shaderValue.texture=G$r,G$q.alphaTexture&&G$q.alphaTexture.source&&(this.shaderValue.texture1=G$q.alphaTexture.source)}this._vb.bind_upload(this._ib);var G$v=G$pq.mainContext;if(G$F.activeBlendFunction!==this._blendFn&&(G$v.enable(3042),this._blendFn(G$v),G$F.activeBlendFunction=this._blendFn),G$Q.drawCall++,G$Q.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&G$Cq.activeShader&&G$N._shaderSet?(G$Cq.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&G$Cq.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),G$N._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var G$H=G$q.bitmap,G$A=0,G$y=G$Cq.activeShader,G$R=0,G$W=this._texs.length;G$R<G$W;G$R++){var G$O=this._texs[G$R];G$O.bitmap===G$H&&G$R+1!==G$W||(G$y.uploadTexture2D(G$O.source),G$v.drawElements(4,6*(G$R-G$A+1),5123,this._startIdx+6*G$A*G$gq.BYTES_PIDX),G$H=G$O.bitmap,G$A=G$R)}else G$v.drawElements(4,this._numEle,5123,this._startIdx);return 1},G$N.create=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$N._cache._length?G$N._cache[--G$N._cache._length]:new G$N;null==G$v&&((G$v=G$y._selfVb||(G$y._selfVb=G$kq.create(-1))).clear(),G$H=0),G$y._ib=G$r,G$y._vb=G$v,G$y._startIdx=G$H*G$gq.BYTES_PIDX,G$y._numEle=0;var G$R=G$q._nBlendType;G$y._blendFn=G$q._targets?G$F.targetFns[G$R]:G$F.fns[G$R],G$y.shaderValue=G$A,G$y.shaderValue.setValue(G$q._shader2D);var G$W=G$q._shader2D.filters;return G$W&&G$y.shaderValue.setFilters(G$W),G$y},G$N._cache=((G$N._cache=[])._length=0,G$N._cache),G$N._shaderSet=!0,G$N}(),G$oq=function(G$q){function G$m(){G$m.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}G$T(G$m,"laya.webgl.utils.MeshTexture",G$mq);var G$r=G$m.prototype;return G$r.addData=function(G$q,G$r,G$v,G$H,G$A,G$y){for(var G$R=G$q.length/2,G$W=this._vb.needSize(G$R*G$m.const_stride)>>2,G$O=this._vb.getFloat32Array(),G$N=0,G$x=0;G$x<G$R;G$x++){var G$K=G$q[G$N],G$T=G$q[G$N+1],G$j=G$K*G$H.a+G$T*G$H.c+G$H.tx,G$D=G$K*G$H.b+G$T*G$H.d+G$H.ty;G$O[G$W++]=G$j,G$O[G$W++]=G$D,G$O[G$W++]=G$r[G$N],G$O[G$W++]=G$r[G$N+1],G$N+=2}this._vb.setNeedUpload();var G$g=this.vertNum;if(0<G$g){(G$R=G$v.length)>G$m.tmpIdx.length&&(G$m.tmpIdx=new Uint16Array(G$R));for(var G$X=0;G$X<G$R;G$X++)G$m.tmpIdx[G$X]=G$v[G$X]+G$g;this._ib.appendU16Array(G$m.tmpIdx,G$v.length)}else this._ib.append(G$v);this._ib.setNeedUpload(),this.vertNum+=G$R,this.indexNum+=G$v.length},G$r.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},G$r.destroy=function(){this._ib.destroy(),this._vb.destroy()},G$m.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new G$m},G$m.const_stride=16,G$m._POOL=[],G$R(G$m,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),G$m}(),G$Cq=function(G$q){function G$r(){G$r.__super.call(this),this.lock=!0}return G$T(G$r,"laya.webgl.shader.BaseShader",G$e),G$r.activeShader=null,G$r.bindShader=null,G$r}(),G$cq=function(G$r){function G$x(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===G$v&&(G$v=6408),void 0===G$H&&(G$H=5121),void 0===G$A&&(G$A=34041),void 0===G$y&&(G$y=!1),void 0===G$R&&(G$R=!1),void 0===G$W&&(G$W=-1),void 0===G$O&&(G$O=-1),this._type=1,this._w=G$q,this._h=G$r,this._surfaceFormat=G$v,this._surfaceType=G$H,this._depthStencilFormat=G$A,G$m.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=G$y,this._repeat=G$R,this._minFifter=G$W,this._magFifter=G$O,this._createWebGLRenderTarget(),this.bitmap.lock=!0,G$x.__super.call(this,this.bitmap,G$o.INV_UV)}G$T(G$x,"laya.webgl.resource.RenderTarget2D",G$r);var G$q=G$x.prototype;return G$z.imps(G$q,{"laya.resource.IDispose":!0}),G$q.getType=function(){return this._type},G$q.getTexture=function(){return this},G$q.size=function(G$q,G$r){this._w==G$q&&this._h==G$r||(this._w=G$q,this._h=G$r,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},G$q.release=function(){this.destroy()},G$q.recycle=function(){G$x.POOL.push(this)},G$q.start=function(){var G$q=G$pq.mainContext;return this._preRenderTarget=G$Bq.curRenderTarget,G$Bq.curRenderTarget=this,G$q.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(G$q.viewport(0,0,this._w,this._h),this._svWidth=G$Bq.width,this._svHeight=G$Bq.height,G$Bq.width=this._w,G$Bq.height=this._h,G$Cq.activeShader=null),this},G$q.clear=function(G$q,G$r,G$v,G$H){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=1);var G$A=G$pq.mainContext;G$A.clearColor(G$q,G$r,G$v,G$H);var G$y=16384;switch(this._depthStencilFormat){case 33189:G$y|=256;break;case 36168:G$y|=1024;break;case 34041:G$y|=256,G$y|=1024}G$A.clear(G$y)},G$q.end=function(){var G$q=G$pq.mainContext;G$q.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,G$Bq.curRenderTarget=this._preRenderTarget,1==this._type?(G$q.viewport(0,0,this._svWidth,this._svHeight),G$Bq.width=this._svWidth,G$Bq.height=this._svHeight,G$Cq.activeShader=null):G$q.viewport(0,0,G$z.stage.width,G$z.stage.height)},G$q.getData=function(G$q,G$r,G$v,G$H){var G$A=G$pq.mainContext;if(G$A.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===G$A.checkFramebufferStatus(36160)))return G$A.bindFramebuffer(36160,null),null;var G$y=new Uint8Array(this._w*this._h*4);return G$A.readPixels(G$q,G$r,G$v,G$H,this._surfaceFormat,this._surfaceType,G$y),G$A.bindFramebuffer(36160,null),G$y},G$q.destroy=function(G$q){void 0===G$q&&(G$q=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,G$r.prototype.destroy.call(this))},G$q.dispose=function(){},G$q._createWebGLRenderTarget=function(){this.bitmap=new G$Sq(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(G$q){this.event("recovered")})},G$H(0,G$q,"surfaceFormat",function(){return this._surfaceFormat}),G$H(0,G$q,"magFifter",function(){return this._magFifter}),G$H(0,G$q,"surfaceType",function(){return this._surfaceType}),G$H(0,G$q,"mipMap",function(){return this._mipMap}),G$H(0,G$q,"depthStencilFormat",function(){return this._depthStencilFormat}),G$H(0,G$q,"minFifter",function(){return this._minFifter}),G$H(0,G$q,"source",function(){return this._alreadyResolved?G$z.superGet(G$o,this,"source"):null}),G$x.create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){void 0===G$v&&(G$v=6408),void 0===G$H&&(G$H=5121),void 0===G$A&&(G$A=34041),void 0===G$y&&(G$y=!1),void 0===G$R&&(G$R=!1),void 0===G$W&&(G$W=-1),void 0===G$O&&(G$O=-1);var G$N=G$x.POOL.pop();return G$N||(G$N=new G$x(G$q,G$r)),G$N.bitmap&&G$N._w==G$q&&G$N._h==G$r&&G$N._surfaceFormat==G$v&&G$N._surfaceType==G$H&&G$N._depthStencilFormat==G$A&&G$N._mipMap==G$y&&G$N._repeat==G$R&&G$N._minFifter==G$W&&G$N._magFifter==G$O||(G$N._w=G$q,G$N._h=G$r,G$N._surfaceFormat=G$v,G$N._surfaceType=G$H,G$N._depthStencilFormat=G$A,G$m.isConchWebGL&&34041===G$N._depthStencilFormat&&(G$N._depthStencilFormat=33189),G$N._mipMap=G$y,G$N._repeat=G$R,G$N._minFifter=G$W,G$N._magFifter=G$O,G$N.release(),G$N._createWebGLRenderTarget()),G$N},G$x.TYPE2D=1,G$x.TYPE3D=2,G$x.POOL=[],G$x}(G$o),G$bq=function(G$q){function G$r(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,G$r.__super.call(this),G$r._gl=G$pq.mainContext}G$T(G$r,"laya.webgl.utils.Buffer",G$e);var G$v=G$r.prototype;return G$v._bind=function(){this.activeResource(),G$r._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(G$r._bindVertexBuffer=this._glBuffer),G$r._gl.bindBuffer(this._bufferType,G$r._bindActive[this._bufferType]=this._glBuffer),G$Cq.activeShader=null)},G$v.recreateResource=function(){this._glBuffer||(this._glBuffer=G$r._gl.createBuffer()),this.completeCreate()},G$v.disposeResource=function(){this._glBuffer&&(G$pq.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},G$H(0,G$v,"bufferUsage",function(){return this._bufferUsage}),G$r._gl=null,G$r._bindActive={},G$r._bindVertexBuffer=null,G$r._enableAtributes=[],G$r}(),G$dq=function(G$q){function G$v(G$q){this.texcoord=null,this.offsetX=300,this.offsetY=0,G$v.__super.call(this,512,0);var G$r=8*G$gq.BYTES_PE;this.position=[2,5126,!1,G$r,0],this.texcoord=[2,5126,!1,G$r,2*G$gq.BYTES_PE],this.color=[4,5126,!1,G$r,4*G$gq.BYTES_PE]}return G$T(G$v,"laya.webgl.shader.d2.skinAnishader.SkinSV",G$Vq),G$v}(),G$uq=function(G$q){function G$r(G$q){G$r.__super.call(this,2,0),this.color=[]}return G$T(G$r,"laya.webgl.shader.d2.value.Color2dSV",G$Vq),G$r.prototype.setValue=function(G$q){G$q.fillStyle&&(this.color=G$q.fillStyle._color._color),G$q.strokeStyle&&(this.color=G$q.strokeStyle._color._color)},G$r}(),G$Iq=function(G$q){function G$r(G$q){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=G$Vq._TEXCOORD,G$r.__super.call(this,256,0)}G$T(G$r,"laya.webgl.shader.d2.value.FillTextureSV",G$Vq);var G$v=G$r.prototype;return G$v.setValue=function(G$q){this.ALPHA=G$q.ALPHA,G$q.filters&&this.setFilters(G$q.filters)},G$v.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},G$r}(),G$tq=function(G$q){function G$r(G$q){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=G$Vq._TEXCOORD,void 0===G$q&&(G$q=0),G$r.__super.call(this,1,G$q)}G$T(G$r,"laya.webgl.shader.d2.value.TextureSV",G$Vq);var G$v=G$r.prototype;return G$v.setValue=function(G$q){this.ALPHA=G$q.ALPHA,G$q.filters&&this.setFilters(G$q.filters)},G$v.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},G$r}(),G$Fq=function(G$q){function G$r(G$q){this.a_color=null,this.u_pos=[0,0],G$r.__super.call(this,4,0),this.position=[2,5126,!1,5*G$gq.BYTES_PE,0],this.a_color=[3,5126,!1,5*G$gq.BYTES_PE,2*G$gq.BYTES_PE]}return G$T(G$r,"laya.webgl.shader.d2.value.PrimitiveSV",G$Vq),G$r}(),G$Uq=function(G$q){function G$r(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,G$r.__super.call(this)}G$T(G$r,"laya.webgl.atlas.AtlasWebGLCanvas",G$q);var G$v=G$r.prototype;return G$v.recreateResource=function(){var G$q=G$pq.mainContext,G$r=this._source=G$q.createTexture(),G$v=G$Mq.curBindTexTarget,G$H=G$Mq.curBindTexValue;G$Mq.bindTexture(G$q,3553,G$r),G$q.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),G$q.texParameteri(3553,10241,9729),G$q.texParameteri(3553,10240,9729),G$q.texParameteri(3553,10242,33071),G$q.texParameteri(3553,10243,33071),G$v&&G$H&&G$Mq.bindTexture(G$q,G$v,G$H),this.memorySize=this._w*this._h*4,this.completeCreate()},G$v.disposeResource=function(){this._source&&(G$pq.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$v.texSubImage2D=function(G$q,G$r,G$v){if(G$m.isFlash){this._flashCacheImage||(this._flashCacheImage=G$X.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var G$H=G$v.bitmapdata;this._flashCacheImage._image.copyPixels(G$H,0,0,G$H.width,G$H.height,G$q,G$r),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var G$A=G$pq.mainContext,G$y=G$Mq.curBindTexTarget,G$R=G$Mq.curBindTexValue;G$Mq.bindTexture(G$A,3553,this._source),G$A.pixelStorei(37441,!0),0<=G$q-1&&G$A.texSubImage2D(3553,0,G$q-1,G$r,6408,5121,G$v),G$q+1<=this._w&&G$A.texSubImage2D(3553,0,G$q+1,G$r,6408,5121,G$v),0<=G$r-1&&G$A.texSubImage2D(3553,0,G$q,G$r-1,6408,5121,G$v),G$r+1<=this._h&&G$A.texSubImage2D(3553,0,G$q,G$r+1,6408,5121,G$v),G$A.texSubImage2D(3553,0,G$q,G$r,6408,5121,G$v),G$A.pixelStorei(37441,!1),G$y&&G$R&&G$Mq.bindTexture(G$A,G$y,G$R)}},G$v.texSubImage2DPixel=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$pq.mainContext,G$R=G$Mq.curBindTexTarget,G$W=G$Mq.curBindTexValue;G$Mq.bindTexture(G$y,3553,this._source);var G$O=new Uint8Array(G$A.data);G$y.pixelStorei(37441,!0),G$y.texSubImage2D(3553,0,G$q,G$r,G$v,G$H,6408,5121,G$O),G$y.pixelStorei(37441,!1),G$R&&G$W&&G$Mq.bindTexture(G$y,G$R,G$W)},G$H(0,G$v,"width",G$q.prototype._$get_width,function(G$q){this._w=G$q}),G$H(0,G$v,"height",G$q.prototype._$get_height,function(G$q){this._h=G$q}),G$r}(G$v),G$_q=function(G$q){function G$A(){this.flipY=!0,this.alwaysChange=!1,G$A.__super.call(this)}G$T(G$A,"laya.webgl.resource.WebGLCanvas",G$v);var G$r=G$A.prototype;return G$r.getCanvas=function(){return this._canvas},G$r.clear=function(){this._ctx&&this._ctx.clear()},G$r.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},G$r._setContext=function(G$q){this._ctx=G$q},G$r.getContext=function(G$q,G$r){return this._ctx?this._ctx:this._ctx=G$A._createContext(this)},G$r.size=function(G$q,G$r){this._w==G$q&&this._h==G$r||(this._w=G$q,this._h=G$r,this._ctx&&this._ctx.size(G$q,G$r),this._canvas&&(this._canvas.height=G$r,this._canvas.width=G$q))},G$r.activeResource=function(G$q){void 0===G$q&&(G$q=!1),this._source||this.recreateResource()},G$r.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},G$r.disposeResource=function(){this._source&&!this.iscpuSource&&(G$pq.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$r.createWebGlTexture=function(){var G$q=G$pq.mainContext;this._canvas;var G$r=this._source=G$q.createTexture();this.iscpuSource=!1;var G$v=G$Mq.curBindTexTarget,G$H=G$Mq.curBindTexValue;G$Mq.bindTexture(G$q,3553,G$r),G$q.pixelStorei(37440,this.flipY?1:0),G$A.premulAlpha&&G$q.pixelStorei(37441,!0),G$q.texImage2D(3553,0,6408,6408,5121,this._imgData),G$A.premulAlpha&&G$q.pixelStorei(37441,!1),G$q.texParameteri(3553,10240,9729),G$q.texParameteri(3553,10241,9729),G$q.texParameteri(3553,10242,33071),G$q.texParameteri(3553,10243,33071),G$q.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,G$v&&G$H&&G$Mq.bindTexture(G$q,G$v,G$H)},G$r.reloadCanvasData=function(){var G$q=G$pq.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var G$r=G$Mq.curBindTexTarget,G$v=G$Mq.curBindTexValue;G$Mq.bindTexture(G$q,3553,this._source),G$A.premulAlpha&&G$q.pixelStorei(37441,!0),G$q.texImage2D(3553,0,6408,6408,5121,this._imgData),G$A.premulAlpha&&G$q.pixelStorei(37441,!1),G$q.pixelStorei(37440,0),G$r&&G$v&&G$Mq.bindTexture(G$q,G$r,G$v)},G$r.texSubImage2D=function(G$q,G$r,G$v){var G$H=G$pq.mainContext,G$A=G$Mq.curBindTexTarget,G$y=G$Mq.curBindTexValue;G$Mq.bindTexture(G$H,3553,this._source),G$H.pixelStorei(37441,!0),G$H.texSubImage2D(3553,0,G$r,G$v,6408,5121,G$q._source),G$H.pixelStorei(37441,!1),G$A&&G$y&&G$Mq.bindTexture(G$H,G$A,G$y)},G$r.toBase64=function(G$q,G$r,G$v){var G$H=null;this._canvas&&(G$H=this._canvas.toDataURL(G$q,G$r)),G$v.call(this,G$H)},G$H(0,G$r,"context",function(){return this._ctx}),G$H(0,G$r,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),G$H(0,G$r,"asBitmap",null,function(G$q){this._ctx&&(this._ctx.asBitmap=G$q)}),G$A._createContext=null,G$A.premulAlpha=!1,G$A}(),G$fq=function(G$q){function G$y(G$q,G$r){this.CborderSize=12,G$y.__super.call(this),this.char=G$q,this.isSpace=" "===G$q,this.xs=G$r.scaleX,this.ys=G$r.scaleY,this.font=G$r.font.toString(),this.fontSize=G$r.font.size,this.fillColor=G$r.fillColor,this.borderColor=G$r.borderColor,this.lineWidth=G$r.lineWidth,this.underLine=G$r.underLine;var G$v,G$H=G$m.isConchApp;G$H?((G$v=ConchTextCanvas)._source=ConchTextCanvas,G$v._source.canvas=ConchTextCanvas):G$v=G$j.canvas.source,this.canvas=G$v,this._enableMerageInAtlas=!0,this._ctx=G$H?G$v:this.canvas.getContext("2d",void 0);var G$A=G$C.measureText(this.char,this.font);this.cw=G$A.width*this.xs,this.ch=(G$A.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new G$o(this)}G$T(G$y,"laya.webgl.resource.WebGLCharImage",G$v);var G$r=G$y.prototype;return G$z.imps(G$r,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),G$r.active=function(){this.texture.active()},G$r.recreateResource=function(){var G$q=G$m.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),G$q){var G$r=this.fontSize;1==this.xs&&1==this.ys||(G$r=parseInt(G$r*(this.xs>this.ys?this.xs:this.ys)+""));var G$v="normal 100 "+this.font;G$v=G$v.replace(G$y._fontSizeReg,G$r),this.borderColor&&(G$v+=" 1 "+this.borderColor),this._ctx.font=G$v,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,G$Y.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var G$H=this._ctx.measureText(this.char);G$H||(G$H={width:16});var G$A=G$H.width+1;this._ctx.lineTo(G$A,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},G$r.onresize=function(G$q,G$r){this._w=G$q,this._h=G$r,this._allowMerageInAtlas=!0},G$r.clearAtlasSource=function(){},G$H(0,G$r,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),G$H(0,G$r,"atlasSource",function(){return this.canvas}),G$H(0,G$r,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(G$q){this._enableMerageInAtlas=G$q}),G$y.createOneChar=function(G$q,G$r){return new G$y(G$q,G$r)},G$y._fontSizeReg=new RegExp("\\d+(?=px)","g"),G$y}(),G$Sq=function(G$q){function G$N(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){void 0===G$v&&(G$v=6408),void 0===G$H&&(G$H=5121),void 0===G$A&&(G$A=34041),void 0===G$y&&(G$y=!1),void 0===G$R&&(G$R=!1),void 0===G$W&&(G$W=-1),void 0===G$O&&(G$O=1),G$N.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=G$q,this._h=G$r,this._surfaceFormat=G$v,this._surfaceType=G$H,this._depthStencilFormat=G$A,this._mipMap=G$y,this._repeat=G$R,this._minFifter=G$W,this._magFifter=G$O}G$T(G$N,"laya.webgl.resource.WebGLRenderTarget",G$v);var G$r=G$N.prototype;return G$r.recreateResource=function(){var G$q=G$pq.mainContext;this._frameBuffer||(this._frameBuffer=G$q.createFramebuffer()),this._source||(this._source=G$q.createTexture());var G$r=G$Mq.curBindTexTarget,G$v=G$Mq.curBindTexValue;G$Mq.bindTexture(G$q,3553,this._source),G$q.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var G$H=this._minFifter,G$A=this._magFifter,G$y=this._repeat?10497:33071,G$R=G$x.isPOT(this._w,this._h);if(G$R?(this._mipMap?-1!==G$H||(G$H=9987):-1!==G$H||(G$H=9729),-1!==G$A||(G$A=9729),G$q.texParameteri(3553,10241,G$H),G$q.texParameteri(3553,10240,G$A),G$q.texParameteri(3553,10242,G$y),G$q.texParameteri(3553,10243,G$y),this._mipMap&&G$q.generateMipmap(3553)):(-1!==G$H||(G$H=9729),-1!==G$A||(G$A=9729),G$q.texParameteri(3553,10241,G$H),G$q.texParameteri(3553,10240,G$A),G$q.texParameteri(3553,10242,33071),G$q.texParameteri(3553,10243,33071)),G$q.bindFramebuffer(36160,this._frameBuffer),G$q.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=G$q.createRenderbuffer()),G$q.bindRenderbuffer(36161,this._depthStencilBuffer),G$q.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:G$q.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:G$q.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:G$q.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}G$q.bindFramebuffer(36160,null),G$r&&G$v&&G$Mq.bindTexture(G$q,G$r,G$v),G$q.bindRenderbuffer(36161,null),G$R&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},G$r.disposeResource=function(){this._frameBuffer&&(G$pq.mainContext.deleteTexture(this._source),G$pq.mainContext.deleteFramebuffer(this._frameBuffer),G$pq.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},G$H(0,G$r,"depthStencilBuffer",function(){return this._depthStencilBuffer}),G$H(0,G$r,"frameBuffer",function(){return this._frameBuffer}),G$N}(),G$lq=function(G$q){function G$W(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this.offsetX=0,this.offsetY=0,G$W.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=G$y,this.canvas=G$q,this._ctx=G$q.getContext("2d",void 0),this._w=G$H,this._h=G$A,this.offsetX=G$r,this.offsetY=G$v,this.src=G$R,this._enableMerageInAtlas=!0,G$I.enabled&&this._w<G$I.atlasLimitWidth&&this._h<G$I.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}G$T(G$W,"laya.webgl.resource.WebGLSubImage",G$v);var G$r=G$W.prototype;return G$z.imps(G$r,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),G$r.size=function(G$q,G$r){this._w=G$q,this._h=G$r,this._ctx&&this._ctx.size(G$q,G$r),this.canvas&&(this.canvas.height=G$r,this.canvas.width=G$q)},G$r.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},G$r.createWebGlTexture=function(){var G$q=G$pq.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var G$r=this._source=G$q.createTexture(),G$v=G$Mq.curBindTexTarget,G$H=G$Mq.curBindTexValue;G$Mq.bindTexture(G$q,3553,G$r),G$q.pixelStorei(37441,!0),G$q.texImage2D(3553,0,6408,6408,5121,this.canvas),G$q.pixelStorei(37441,!1);var G$A=this.minFifter,G$y=this.magFifter,G$R=this.repeat?10497:33071,G$W=G$x.isPOT(this.width,this.height);G$W?(this.mipmap?-1!==G$A||(G$A=9987):-1!==G$A||(G$A=9729),-1!==G$y||(G$y=9729),G$q.texParameteri(3553,10240,G$y),G$q.texParameteri(3553,10241,G$A),G$q.texParameteri(3553,10242,G$R),G$q.texParameteri(3553,10243,G$R),this.mipmap&&G$q.generateMipmap(3553)):(-1!==G$A||(G$A=9729),-1!==G$y||(G$y=9729),G$q.texParameteri(3553,10241,G$A),G$q.texParameteri(3553,10240,G$y),G$q.texParameteri(3553,10242,33071),G$q.texParameteri(3553,10243,33071)),G$v&&G$H&&G$Mq.bindTexture(G$q,G$v,G$H),this.canvas=null,G$W&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},G$r.disposeResource=function(){G$I.enabled&&this._allowMerageInAtlas||!this._source||(G$pq.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$r.clearAtlasSource=function(){},G$H(0,G$r,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),G$H(0,G$r,"atlasSource",function(){return this.canvas}),G$H(0,G$r,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(G$q){this._allowMerageInAtlas=G$q}),G$W}(),G$Lq=function(G$q){function G$N(G$q,G$r,G$v,G$H){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,G$N.__super.call(this),!G$q||!G$r)throw"Shader Error";this._id=++G$N._count,this._vs=G$q,this._ps=G$r,this._nameMap=G$H||{},null!=G$v&&(G$N.sharders[G$v]=this)}G$T(G$N,"laya.webgl.shader.Shader",G$Cq);var G$r=G$N.prototype;return G$r.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},G$r.disposeResource=function(){G$pq.mainContext.deleteShader(this._vshader),G$pq.mainContext.deleteShader(this._pshader),G$pq.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},G$r._compile=function(){if(!G$pq.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var G$q=[this._vs,this._ps],G$r=G$pq.mainContext;if(this._program=G$r.createProgram(),this._vshader=G$N._createShader(G$r,G$q[0],35633),this._pshader=G$N._createShader(G$r,G$q[1],35632),G$r.attachShader(this._program,this._vshader),G$r.attachShader(this._program,this._pshader),G$r.linkProgram(this._program),!G$m.isConchApp&&!G$r.getProgramParameter(this._program,35714))throw G$r.getProgramInfoLog(this._program);var G$v,G$H,G$A=0,G$y=0;for(G$y=G$m.isConchApp?G$r.getProgramParameterEx(this._vs,this._ps,"",35721):G$r.getProgramParameter(this._program,35721),G$A=0;G$A<G$y;G$A++){var G$R=null;G$v={vartype:"attribute",glfun:null,ivartype:0,attrib:G$R=G$m.isConchApp?G$r.getActiveAttribEx(this._vs,this._ps,"",G$A):G$r.getActiveAttrib(this._program,G$A),location:G$r.getAttribLocation(this._program,G$R.name),name:G$R.name,type:G$R.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(G$v)}var G$W=0;for(G$W=G$m.isConchApp?G$r.getProgramParameterEx(this._vs,this._ps,"",35718):G$r.getProgramParameter(this._program,35718),G$A=0;G$A<G$W;G$A++){var G$O=null;G$O=G$m.isConchApp?G$r.getActiveUniformEx(this._vs,this._ps,"",G$A):G$r.getActiveUniform(this._program,G$A),0<(G$v={vartype:"uniform",glfun:null,ivartype:1,attrib:G$R,location:G$r.getUniformLocation(this._program,G$O.name),name:G$O.name,type:G$O.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(G$v.name=G$v.name.substr(0,G$v.name.length-3),G$v.isArray=!0,G$v.location=G$r.getUniformLocation(this._program,G$v.name)),this._params.push(G$v)}for(G$A=0,G$H=this._params.length;G$A<G$H;G$A++)if((G$v=this._params[G$A]).indexOfParams=G$A,G$v.index=1,G$v.value=[G$v.location,null],G$v.codename=G$v.name,G$v.name=this._nameMap[G$v.codename]?this._nameMap[G$v.codename]:G$v.codename,(this._paramsMap[G$v.name]=G$v)._this=this,G$v.uploadedValue=[],"attribute"!==G$v.vartype)switch(G$v.type){case 5124:G$v.fun=G$v.isArray?this._uniform1iv:this._uniform1i;break;case 5126:G$v.fun=G$v.isArray?this._uniform1fv:this._uniform1f;break;case 35664:G$v.fun=G$v.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:G$v.fun=G$v.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:G$v.fun=G$v.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:G$v.fun=this._uniform_sampler2D;break;case 35680:G$v.fun=this._uniform_samplerCube;break;case 35676:G$v.glfun=G$r.uniformMatrix4fv,G$v.fun=this._uniformMatrix4fv;break;case 35670:G$v.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else G$v.fun=this._attribute}},G$r.getUniform=function(G$q){return this._paramsMap[G$q]},G$r._attribute=function(G$q,G$r){var G$v=G$pq.mainContext,G$H=G$bq._enableAtributes,G$A=G$q.location;return G$H[G$A]||G$v.enableVertexAttribArray(G$A),G$v.vertexAttribPointer(G$A,G$r[0],G$r[1],G$r[2],G$r[3],G$r[4]+this._offset),G$H[G$A]=G$bq._bindVertexBuffer,1},G$r._uniform1f=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r?(G$pq.mainContext.uniform1f(G$q.location,G$v[0]=G$r),1):0},G$r._uniform1fv=function(G$q,G$r){if(G$r.length<4){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$pq.mainContext.uniform1fv(G$q.location,G$r),G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3],1):0}return G$pq.mainContext.uniform1fv(G$q.location,G$r),1},G$r._uniform_vec2=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]?(G$pq.mainContext.uniform2f(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1]),1):0},G$r._uniform_vec2v=function(G$q,G$r){if(G$r.length<2){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$pq.mainContext.uniform2fv(G$q.location,G$r),G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3],1):0}return G$pq.mainContext.uniform2fv(G$q.location,G$r),1},G$r._uniform_vec3=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]?(G$pq.mainContext.uniform3f(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2]),1):0},G$r._uniform_vec3v=function(G$q,G$r){return G$pq.mainContext.uniform3fv(G$q.location,G$r),1},G$r._uniform_vec4=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$pq.mainContext.uniform4f(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3]),1):0},G$r._uniform_vec4v=function(G$q,G$r){return G$pq.mainContext.uniform4fv(G$q.location,G$r),1},G$r._uniformMatrix2fv=function(G$q,G$r){return G$pq.mainContext.uniformMatrix2fv(G$q.location,!1,G$r),1},G$r._uniformMatrix3fv=function(G$q,G$r){return G$pq.mainContext.uniformMatrix3fv(G$q.location,!1,G$r),1},G$r._uniformMatrix4fv=function(G$q,G$r){return G$pq.mainContext.uniformMatrix4fv(G$q.location,!1,G$r),1},G$r._uniform1i=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r?(G$pq.mainContext.uniform1i(G$q.location,G$v[0]=G$r),1):0},G$r._uniform1iv=function(G$q,G$r){return G$pq.mainContext.uniform1iv(G$q.location,G$r),1},G$r._uniform_ivec2=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]?(G$pq.mainContext.uniform2i(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1]),1):0},G$r._uniform_ivec2v=function(G$q,G$r){return G$pq.mainContext.uniform2iv(G$q.location,G$r),1},G$r._uniform_vec3i=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]?(G$pq.mainContext.uniform3i(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2]),1):0},G$r._uniform_vec3vi=function(G$q,G$r){return G$pq.mainContext.uniform3iv(G$q.location,G$r),1},G$r._uniform_vec4i=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$pq.mainContext.uniform4i(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3]),1):0},G$r._uniform_vec4vi=function(G$q,G$r){return G$pq.mainContext.uniform4iv(G$q.location,G$r),1},G$r._uniform_sampler2D=function(G$q,G$r){var G$v=G$pq.mainContext,G$H=G$q.uploadedValue;return null==G$H[0]?(G$H[0]=this._curActTexIndex,G$v.uniform1i(G$q.location,this._curActTexIndex),G$v.activeTexture(G$N._TEXTURES[this._curActTexIndex]),G$Mq.bindTexture(G$v,3553,G$r),this._curActTexIndex++,1):(G$v.activeTexture(G$N._TEXTURES[G$H[0]]),G$Mq.bindTexture(G$v,3553,G$r),0)},G$r._uniform_samplerCube=function(G$q,G$r){var G$v=G$pq.mainContext,G$H=G$q.uploadedValue;return null==G$H[0]?(G$H[0]=this._curActTexIndex,G$v.uniform1i(G$q.location,this._curActTexIndex),G$v.activeTexture(G$N._TEXTURES[this._curActTexIndex]),G$Mq.bindTexture(G$v,34067,G$r),this._curActTexIndex++,1):(G$v.activeTexture(G$N._TEXTURES[G$H[0]]),G$Mq.bindTexture(G$v,34067,G$r),0)},G$r._noSetValue=function(G$q){console.log("no....:"+G$q.name)},G$r.uploadOne=function(G$q,G$r){this.activeResource(),G$Mq.UseProgram(this._program);var G$v=this._paramsMap[G$q];G$v.fun.call(this,G$v,G$r)},G$r.uploadTexture2D=function(G$q){G$Q.shaderCall++;var G$r=G$pq.mainContext;G$r.activeTexture(33984),G$Mq.bindTexture(G$r,3553,G$q)},G$r.uploadTexture2D1=function(G$q){G$Q.shaderCall++;var G$r=G$pq.mainContext;G$r.activeTexture(33985),G$Mq.bindTexture(G$r,3553,G$q)},G$r.upload=function(G$q,G$r){G$Cq.activeShader=G$Cq.bindShader=this,this._lastUseFrameCount===G$Q.loopCount||this.activeResource(),G$Mq.UseProgram(this._program),this._reCompile?(G$r=this._params,this._reCompile=!1):G$r=G$r||this._params;G$pq.mainContext;for(var G$v,G$H,G$A=G$r.length,G$y=0,G$R=0;G$R<G$A;G$R++)null!==(G$H=G$q[(G$v=G$r[G$R]).name])&&(G$y+=G$v.fun.call(this,G$v,G$H));G$Q.shaderCall+=G$y},G$r.uploadArray=function(G$q,G$r,G$v){G$Cq.activeShader=this,(G$Cq.bindShader=this).activeResource(),G$Mq.UseProgram(this._program);this._params;for(var G$H,G$A,G$y=0,G$R=G$r-2;0<=G$R;G$R-=2)(G$A=this._paramsMap[G$q[G$R]])&&null!=(G$H=G$q[G$R+1])&&(G$v&&G$v[G$A.name]&&G$v[G$A.name].bind(),G$y+=G$A.fun.call(this,G$A,G$H));G$Q.shaderCall+=G$y},G$r.getParams=function(){return this._params},G$N.getShader=function(G$q){return G$N.sharders[G$q]},G$N.create=function(G$q,G$r,G$v,G$H){return new G$N(G$q,G$r,G$v,G$H)},G$N.withCompile=function(G$q,G$r,G$v,G$H){if(G$v&&G$N.sharders[G$v])return G$N.sharders[G$v];var G$A=G$N._preCompileShader[2e-4*G$q];if(!G$A)throw new Error("withCompile shader err!"+G$q);return G$A.createShader(G$r,G$v,G$H)},G$N.withCompile2D=function(G$q,G$r,G$v,G$H,G$A){if(G$H&&G$N.sharders[G$H])return G$N.sharders[G$H];var G$y=G$N._preCompileShader[2e-4*G$q+G$r];if(!G$y)throw new Error("withCompile shader err!"+G$q+" "+G$r);return G$y.createShader(G$v,G$H,G$A)},G$N.addInclude=function(G$q,G$r){G$eq.addInclude(G$q,G$r)},G$N.preCompile=function(G$q,G$r,G$v,G$H){var G$A=2e-4*G$q;G$N._preCompileShader[G$A]=new G$eq(G$A,G$r,G$v,G$H)},G$N.preCompile2D=function(G$q,G$r,G$v,G$H,G$A){var G$y=2e-4*G$q+G$r;G$N._preCompileShader[G$y]=new G$eq(G$y,G$v,G$H,G$A)},G$N._createShader=function(G$q,G$r,G$v){var G$H=G$q.createShader(G$v);return G$q.shaderSource(G$H,G$r),G$q.compileShader(G$H),G$H},G$N._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],G$N._count=0,G$N._preCompileShader={},G$N.SHADERNAME2ID=2e-4,G$N.sharders=((G$N.sharders=[]).length=32,G$N.sharders),G$R(G$N,["nameKey",function(){return this.nameKey=new G$s}]),G$N}(),G$iq=function(G$q){function G$r(){this._maxsize=0,this._upload=!0,this._uploadSize=0,G$r.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}G$T(G$r,"laya.webgl.utils.Buffer2D",G$q);var G$v=G$r.prototype;return G$v.needSize=function(G$q){var G$r=this._byteLength;if(G$q){var G$v=this._byteLength+G$q;G$v<=this._buffer.byteLength||this._resizeBuffer(G$v<<1,!0),this._byteLength=G$v}return G$r},G$v._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),G$Q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,G$bq._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),G$bq._gl.bufferSubData(this._bufferType,0,this._buffer)},G$v._bufferSubData=function(G$q,G$r,G$v){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),this._maxsize=Math.max(this._maxsize,this._byteLength),G$Q.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,G$bq._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),G$r||G$v){var G$H=this._buffer.slice(G$r,G$v);G$bq._gl.bufferSubData(this._bufferType,G$q,G$H)}else G$bq._gl.bufferSubData(this._bufferType,G$q,this._buffer)},G$v._checkArrayUse=function(){},G$v._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},G$v._bind_subUpload=function(G$q,G$r,G$v){return void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(G$q,G$r,G$v),!0)},G$v._resizeBuffer=function(G$q,G$r){if(G$q<this._buffer.byteLength)return this;if(this.memorySize=G$q,G$r&&this._buffer&&0<this._buffer.byteLength){var G$v=new ArrayBuffer(G$q);new Uint8Array(G$v).set(new Uint8Array(this._buffer),0),this._buffer=G$v}else this._buffer=new ArrayBuffer(G$q);return this._checkArrayUse(),this._upload=!0,this},G$v.append=function(G$q){this._upload=!0;var G$r,G$v;G$r=G$q.byteLength,G$q instanceof Uint8Array?(this._resizeBuffer(this._byteLength+G$r,!0),G$v=new Uint8Array(this._buffer,this._byteLength)):G$q instanceof Uint16Array?(this._resizeBuffer(this._byteLength+G$r,!0),G$v=new Uint16Array(this._buffer,this._byteLength)):G$q instanceof Float32Array&&(this._resizeBuffer(this._byteLength+G$r,!0),G$v=new Float32Array(this._buffer,this._byteLength)),G$v.set(G$q,0),this._byteLength+=G$r,this._checkArrayUse()},G$v.appendU16Array=function(G$q,G$r){this._resizeBuffer(this._byteLength+2*G$r,!0);for(var G$v=new Uint16Array(this._buffer,this._byteLength,G$r),G$H=0;G$H<G$r;G$H++)G$v[G$H]=G$q[G$H];this._byteLength+=2*G$r,this._checkArrayUse()},G$v.appendEx=function(G$q,G$r){this._upload=!0;var G$v;G$v=G$q.byteLength,this._resizeBuffer(this._byteLength+G$v,!0),new G$r(this._buffer,this._byteLength).set(G$q,0),this._byteLength+=G$v,this._checkArrayUse()},G$v.appendEx2=function(G$q,G$r,G$v,G$H){void 0===G$H&&(G$H=1),this._upload=!0;var G$A,G$y;G$A=G$v*G$H,this._resizeBuffer(this._byteLength+G$A,!0),G$y=new G$r(this._buffer,this._byteLength);var G$R=0;for(G$R=0;G$R<G$v;G$R++)G$y[G$R]=G$q[G$R];this._byteLength+=G$A,this._checkArrayUse()},G$v.getBuffer=function(){return this._buffer},G$v.setNeedUpload=function(){this._upload=!0},G$v.getNeedUpload=function(){return this._upload},G$v.upload=function(){var G$q=this._bind_upload();return G$bq._gl.bindBuffer(this._bufferType,null),G$bq._bindActive[this._bufferType]=null,G$Cq.activeShader=null,G$q},G$v.subUpload=function(G$q,G$r,G$v){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0);var G$H=this._bind_subUpload();return G$bq._gl.bindBuffer(this._bufferType,null),G$bq._bindActive[this._bufferType]=null,G$Cq.activeShader=null,G$H},G$v.disposeResource=function(){G$q.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},G$v.clear=function(){this._byteLength=0,this._upload=!0},G$H(0,G$v,"bufferLength",function(){return this._buffer.byteLength}),G$H(0,G$v,"byteLength",null,function(G$q){this._byteLength!==G$q&&(G$q<=this._buffer.byteLength||this._resizeBuffer(2*G$q+256,!0),this._byteLength=G$q)}),G$r.__int__=function(G$q){G$nq.QuadrangleIB=G$nq.create(35044),G$Xq.fillIBQuadrangle(G$nq.QuadrangleIB,16)},G$r.FLOAT32=4,G$r.SHORT=2,G$r}(G$bq),G$wq=(function(G$r){function G$v(G$q){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,G$v.__super.call(this,9)}G$T(G$v,"laya.webgl.shader.d2.value.GlowSV",G$r);var G$q=G$v.prototype;G$q.setValue=function(G$q){G$r.prototype.setValue.call(this,G$q)},G$q.clear=function(){G$r.prototype.clear.call(this)}}(G$tq),function(G$q){function G$r(G$q){G$r.__super.call(this,64),this.defines.add(64)}G$T(G$r,"laya.webgl.shader.d2.value.TextSV",G$q);var G$v=G$r.prototype;return G$v.release=function(){(G$r.pool[G$r._length++]=this).clear()},G$v.clear=function(){G$q.prototype.clear.call(this)},G$r.create=function(){return G$r._length?G$r.pool[--G$r._length]:new G$r(null)},G$r.pool=[],G$r._length=0,G$r}(G$tq)),G$hq=function(G$q){function G$A(G$q,G$r,G$v,G$H){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,G$A.__super.call(this,G$q,G$r,G$v,G$H)}G$T(G$A,"laya.webgl.shader.d2.Shader2X",G$q);var G$r=G$A.prototype;return G$r.upload2dQuick1=function(G$q){this.upload(G$q,this._params2dQuick1||this._make2dQuick1())},G$r._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var G$q,G$r=this._params,G$v=0,G$H=G$r.length;G$v<G$H;G$v++)G$q=G$r[G$v],(G$m.isFlash||"size"!==G$q.name&&"position"!==G$q.name&&"texcoord"!==G$q.name)&&this._params2dQuick1.push(G$q)}return this._params2dQuick1},G$r.disposeResource=function(){G$q.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},G$r.upload2dQuick2=function(G$q){this.upload(G$q,this._params2dQuick2||this._make2dQuick2())},G$r._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var G$q,G$r=this._params,G$v=0,G$H=G$r.length;G$v<G$H;G$v++)G$q=G$r[G$v],(G$m.isFlash||"size"!==G$q.name)&&this._params2dQuick2.push(G$q)}return this._params2dQuick2},G$A.create=function(G$q,G$r,G$v,G$H){return new G$A(G$q,G$r,G$v,G$H)},G$A}(G$Lq),G$nq=function(G$q){function G$r(G$q){this._uint8Array=null,this._uint16Array=null,void 0===G$q&&(G$q=35044),G$r.__super.call(this),this._bufferUsage=G$q,this._bufferType=34963,G$m.isFlash||(this._buffer=new ArrayBuffer(8))}G$T(G$r,"laya.webgl.utils.IndexBuffer2D",G$iq);var G$v=G$r.prototype;return G$v._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},G$v.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},G$v.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},G$v.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},G$r.QuadrangleIB=null,G$r.create=function(G$q){return void 0===G$q&&(G$q=35044),new G$r(G$q)},G$r}(),G$kq=function(G$q){function G$v(G$q,G$r){this._floatArray32=null,this._vertexStride=0,G$v.__super.call(this),this._vertexStride=G$q,this._bufferUsage=G$r,this._bufferType=34962,G$m.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}G$T(G$v,"laya.webgl.utils.VertexBuffer2D",G$q);var G$r=G$v.prototype;return G$r.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},G$r.bind=function(G$q){G$q&&G$q._bind(),this._bind()},G$r.insertData=function(G$q,G$r){this.getFloat32Array().set(G$q,G$r),this._upload=!0},G$r.bind_upload=function(G$q){G$q._bind_upload()||G$q._bind(),this._bind_upload()||this._bind()},G$r._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},G$r.disposeResource=function(){G$q.prototype.disposeResource.call(this)},G$r.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},G$H(0,G$r,"vertexStride",function(){return this._vertexStride}),G$v.create=function(G$q,G$r){return void 0===G$r&&(G$r=35048),new G$v(G$q,G$r)},G$v}(G$iq),G$qr=function(G$q){function G$W(G$q,G$r,G$v,G$H,G$A,G$y){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===G$v&&(G$v=6408),void 0===G$H&&(G$H=!0),G$W.__super.call(this,G$q,G$r),G$q){if(this._format=G$v,this._mipmap=G$H,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof G$q)this._url=G$q,this._src=G$q,this._image=new G$j.window.Image,G$r&&(G$r.onload&&(this.onload=G$r.onload),G$r.onerror&&(this.onerror=G$r.onerror),G$r.onCreate&&G$r.onCreate(this)),this._image.crossOrigin=G$q&&0==G$q.indexOf("data:")?null:"",G$q&&(this._image.src=G$q);else if(G$q instanceof ArrayBuffer){this._src=G$r,this._url=this._src;var G$R=new G$O(G$q);G$R.readUTFBytes(4),G$R.readUTFBytes(2),G$R.getInt16();G$R.endian="bigEndian",this._w=G$R.getInt16(),this._h=G$R.getInt16();G$R.getInt16(),G$R.getInt16();this._image=new Uint8Array(G$q,G$R.pos),this._format=G$pq.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,G$I.enabled&&this._w<G$I.atlasLimitWidth&&this._h<G$I.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(G$q instanceof Uint8Array))return this._src=G$r,this._url=this._src,this._image=G$q.source||G$q,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=G$r,this._url=this._src,this._w=G$A,this._h=G$y,this._image=G$q,this._format=0===G$v?G$q.byteLength/(G$A*G$y)==4?6408:6407:G$v}this._$5__enableMerageInAtlas=!0}}G$T(G$W,"laya.webgl.resource.WebGLImage",G$X);var G$r=G$W.prototype;return G$z.imps(G$r,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),G$r._init_=function(G$q,G$r){},G$r._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var G$q=G$pq.mainContext,G$r=this._source=G$q.createTexture(),G$v=G$Mq.curBindTexTarget,G$H=G$Mq.curBindTexValue;G$Mq.bindTexture(G$q,3553,G$r);var G$A=this.minFifter,G$y=this.magFifter,G$R=this.repeat?10497:33071,G$W=G$x.isPOT(this._w,this._h),G$O=!1;switch(G$W?(this.mipmap?-1!==G$A||(G$A=9987):-1!==G$A||(G$A=9729),-1!==G$y||(G$y=9729),G$q.texParameteri(3553,10241,G$A),G$q.texParameteri(3553,10240,G$y),G$q.texParameteri(3553,10242,G$R),G$q.texParameteri(3553,10243,G$R),this.mipmap&&G$q.generateMipmap(3553)):(-1!==G$A||(G$A=9729),-1!==G$y||(G$y=9729),G$q.texParameteri(3553,10241,G$A),G$q.texParameteri(3553,10240,G$y),G$q.texParameteri(3553,10242,33071),G$q.texParameteri(3553,10243,33071)),G$q.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&G$q.pixelStorei(G$q.UNPACK_ALIGNMENT,1),G$q.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&G$q.pixelStorei(G$q.UNPACK_ALIGNMENT,1),G$q.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:G$O=!0,G$q.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case G$pq.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:G$O=!0,G$q.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}G$q.pixelStorei(37441,!1),G$v&&G$H&&G$Mq.bindTexture(G$q,G$v,G$H),this.uri||(this.uri=this._url),G$O?this.memorySize=this._image.length:G$W&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},G$r.recreateResource=function(){var G$q=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var G$r=this;this._image=new G$j.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(G$r._needReleaseAgain)return G$r._needReleaseAgain=!1,G$r._image.onload=null,void(G$r._image=null);G$r._allowMerageInAtlas&&G$r._enableMerageInAtlas?(G$q.memorySize=0,G$q._recreateLock=!1):G$r._createWebGlTexture(),G$r.completeCreate()},this._image.src=this._src}},G$r.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&G$pq.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},G$r.onresize=function(){this._w=this._image.width,this._h=this._image.height,G$I.enabled&&this._w<G$I.atlasLimitWidth&&this._h<G$I.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},G$r.clearAtlasSource=function(){this._image=null},G$H(0,G$r,"format",function(){return this._format}),G$H(0,G$r,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(G$q){this._$5__enableMerageInAtlas=G$q}),G$H(0,G$r,"mipmap",function(){return this._mipmap}),G$H(0,G$r,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),G$H(0,G$r,"atlasSource",function(){return this._image}),G$H(0,G$r,"onload",null,function(G$q){var G$r=this;this._onload=G$q,this._image&&(this._image.onload=null!=this._onload?function(){G$r.onresize(),G$r._onload()}:null)}),G$H(0,G$r,"onerror",null,function(G$q){var G$r=this;this._onerror=G$q,this._image&&(this._image.onerror=null!=this._onerror?function(){G$r._onerror()}:null)}),G$W}();G$z.__init([G$jq,G$u,G$Pq,G$eq])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$q,G$r){"use strict";for(var G$v in Object.defineProperty(G$r,"__esModule",{value:!0}),Laya){var G$H=Laya[G$v];G$H&&G$H.__isclass&&(G$r[G$v]=G$H)}}),function(G$y,G$q,G$H){G$H.un,G$H.uns;var G$A=G$H.static,G$R=G$H.class,G$W=G$H.getset,G$O=(G$H.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),G$D=laya.utils.ClassUtils,G$K=(laya.events.Event,laya.utils.HTMLChar),G$N=laya.net.Loader,G$x=(laya.display.Node,laya.maths.Rectangle),G$T=laya.renders.Render,G$j=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),G$g=laya.utils.Stat,G$C=laya.display.Text,G$X=laya.resource.Texture,G$m=laya.net.URL,G$B=laya.utils.Utils,G$e=function(){function G$j(){}return G$R(G$j,"laya.html.utils.HTMLParse"),G$j.parse=function(G$q,G$r,G$v){G$r=(G$r="<root>"+(G$r=G$r.replace(/<br>/g,"<br/>"))+"</root>").replace(G$j.spacePattern,G$j.char255);var G$H=G$B.parseXMLFromString(G$r);G$j._parseXML(G$q,G$H.childNodes[0].childNodes,G$v)},G$j._parseXML=function(G$q,G$r,G$v,G$H){var G$A=0,G$y=0;if(G$r.join||G$r.item)for(G$A=0,G$y=G$r.length;G$A<G$y;++G$A)G$j._parseXML(G$q,G$r[G$A],G$v,G$H);else{var G$R,G$W,G$O;if(3==G$r.nodeType)return void(G$q instanceof laya.html.dom.HTMLDivElement?(null==G$r.nodeName&&(G$r.nodeName="#text"),G$W=G$r.nodeName.toLowerCase(),0<(G$O=G$r.textContent.replace(/^\s+|\s+$/g,"")).length&&(G$R=G$D.getInstance(G$W))&&(G$q.addChild(G$R),G$R.innerTEXT=G$O.replace(G$j.char255AndOneSpacePattern," "))):0<(G$O=G$r.textContent.replace(/^\s+|\s+$/g,"")).length&&(G$q.innerTEXT=G$O.replace(G$j.char255AndOneSpacePattern," ")));if("#comment"==(G$W=G$r.nodeName.toLowerCase()))return;if(G$R=G$D.getInstance(G$W)){(G$R=G$q.addChild(G$R)).URI=G$v,G$R.href=G$H;var G$N=G$r.attributes;if(G$N&&0<G$N.length)for(G$A=0,G$y=G$N.length;G$A<G$y;++G$A){var G$x=G$N[G$A],G$K=G$x.nodeName,G$T=G$x.value;G$R._setAttributes(G$K,G$T)}G$j._parseXML(G$R,G$r.childNodes,G$v,G$R.href)}else G$j._parseXML(G$q,G$r.childNodes,G$v,G$H)}},G$j.char255=String.fromCharCode(255),G$j.spacePattern=/&nbsp;|&#160;/g,G$j.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),G$j}(),G$p=function(){function G$o(){}return G$R(G$o,"laya.html.utils.Layout"),G$o.later=function(G$q){null==G$o._will&&(G$o._will=[],G$H.stage.frameLoop(1,null,function(){if(!(G$o._will.length<1)){for(var G$q=0;G$q<G$o._will.length;G$q++)laya.html.utils.Layout.layout(G$o._will[G$q]);G$o._will.length=0}})),G$o._will.push(G$q)},G$o.layout=function(G$q){if(!G$q||!G$q._style)return null;if(0==(512&G$q._style._type))return null;G$q.getStyle()._type&=-513;var G$r=G$o._multiLineLayout(G$q);return G$T.isConchApp&&G$q.layaoutCallNative&&G$q.layaoutCallNative(),G$r},G$o._multiLineLayout=function(G$q){if(G$C.RightToLeft)return G$o._multiLineLayout2(G$q);var G$r=new Array;G$q._addChildsToLayout(G$r);var G$v,G$H,G$A,G$y,G$R,G$W=0,G$O=G$r.length,G$N=G$q._getCSSStyle(),G$x=G$N.letterSpacing,G$K=G$N.leading,G$T=G$N.lineHeight,G$j=G$N._widthAuto()||!G$N.wordWrap,G$D=G$j?999999:G$q.width,G$g=(G$q.height,0),G$X=G$N.italic?G$N.fontSize/3:0,G$m=G$N._getAlign(),G$B=G$N._getValign(),G$e=0!==G$B||0!==G$m||0!=G$T,G$p=0,G$M=0,G$z=0,G$P=0,G$V=new Array,G$a=G$V[0]=new G$c,G$J=!1,G$$=!1;G$a.h=0,G$N.italic&&(G$D-=G$N.fontSize/3);var G$G=0,G$E=!0;function G$Q(){G$a.y=G$M,G$M+=G$a.h+G$K,0==G$a.h&&(G$M+=G$T),G$a.mWidth=G$G,G$G=0,G$a=new G$c,G$V.push(G$a),G$a.h=0,G$J=!(G$E=!(G$p=0))}for(G$W=0;G$W<G$O;G$W++)if(null!=(G$v=G$r[G$W]))if(G$E=!1,G$v instanceof laya.html.dom.HTMLBrElement)G$Q(),G$a.y=G$M;else{if(G$v._isChar()){if((G$y=G$v).isWord)G$J=G$$||"\n"===G$y.char,G$a.wordStartIndex=G$a.elements.length;else{if(G$z=G$y.width+G$y.style.letterSpacin,0<G$V.length&&G$D<G$p+G$z&&0<G$a.wordStartIndex){var G$s;G$s=G$a.elements.length-G$a.wordStartIndex+1,G$a.elements.length=G$a.wordStartIndex,G$W-=G$s,G$Q();continue}G$J=!1,G$G+=G$y.width}G$z=G$y.width+G$x,G$P=G$y.height,G$$=!1,(G$J=G$J||G$D<G$p+G$z)&&G$Q(),G$a.minTextHeight=Math.min(G$a.minTextHeight,G$v.height)}else G$H=G$v._getCSSStyle(),G$R=G$v,G$A=G$H.padding,0===G$H._getCssFloat()||(G$e=!0),G$J=G$$||G$H.lineElement,G$z=G$R.width*G$R._style._tf.scaleX+G$A[1]+G$A[3]+G$x,G$P=G$R.height*G$R._style._tf.scaleY+G$A[0]+G$A[2],G$$=G$H.lineElement,(G$J=G$J||G$D<G$p+G$z&&G$H.wordWrap)&&G$Q();G$a.elements.push(G$v),G$a.h=Math.max(G$a.h,G$P),G$v.x=G$p,G$v.y=G$M,G$p+=G$z,G$a.w=G$p-G$x,G$a.y=G$M,G$g=Math.max(G$p+G$X,G$g)}else G$E||(G$p+=G$o.DIV_ELEMENT_PADDING),G$a.wordStartIndex=G$a.elements.length;if(G$M=G$a.y+G$a.h,G$e){var G$Z=0,G$Y=G$D;for(G$j&&0<G$q.width&&(G$Y=G$q.width),G$W=0,G$O=G$V.length;G$W<G$O;G$W++)G$V[G$W].updatePos(0,G$Y,G$W,G$Z,G$m,G$B,G$T),G$Z+=Math.max(G$T,G$V[G$W].h+G$K);G$M=G$Z}return G$j&&(G$q.width=G$g),G$M>G$q.height&&(G$q.height=G$M),[G$g,G$M]},G$o._multiLineLayout2=function(G$q){var G$r=new Array;G$q._addChildsToLayout(G$r);var G$v,G$H,G$A,G$y,G$R,G$W=0,G$O=G$r.length,G$N=G$q._getCSSStyle(),G$x=G$N.letterSpacing,G$K=G$N.leading,G$T=G$N.lineHeight,G$j=G$N._widthAuto()||!G$N.wordWrap,G$D=G$j?999999:G$q.width,G$g=(G$q.height,0),G$X=G$N.italic?G$N.fontSize/3:0,G$m=2-G$N._getAlign(),G$B=G$N._getValign(),G$e=0!==G$B||0!=G$m||0!=G$T,G$p=0,G$M=0,G$z=0,G$P=0,G$V=new Array,G$a=G$V[0]=new G$c,G$J=!1,G$$=!1;G$a.h=0,G$N.italic&&(G$D-=G$N.fontSize/3);var G$G=0,G$E=!0;function G$Q(){G$a.y=G$M,G$M+=G$a.h+G$K,0==G$a.h&&(G$M+=G$T),G$a.mWidth=G$G,G$G=0,G$a=new G$c,G$V.push(G$a),G$a.h=0,G$J=!(G$E=!(G$p=0))}for(G$W=0;G$W<G$O;G$W++)if(null!=(G$v=G$r[G$W]))if(G$E=!1,G$v instanceof laya.html.dom.HTMLBrElement)G$Q(),G$a.y=G$M;else{if(G$v._isChar()){if((G$y=G$v).isWord)G$J=G$$||"\n"===G$y.char,G$a.wordStartIndex=G$a.elements.length;else{if(0<G$V.length&&G$D<G$p+G$z&&0<G$a.wordStartIndex){var G$s;G$s=G$a.elements.length-G$a.wordStartIndex+1,G$a.elements.length=G$a.wordStartIndex,G$W-=G$s,G$Q();continue}G$J=!1,G$G+=G$y.width}G$z=G$y.width+G$x,G$P=G$y.height,G$$=!1,(G$J=G$J||G$D<G$p+G$z)&&G$Q(),G$a.minTextHeight=Math.min(G$a.minTextHeight,G$v.height)}else G$H=G$v._getCSSStyle(),G$R=G$v,G$A=G$H.padding,0===G$H._getCssFloat()||(G$e=!0),G$J=G$$||G$H.lineElement,G$z=G$R.width*G$R._style._tf.scaleX+G$A[1]+G$A[3]+G$x,G$P=G$R.height*G$R._style._tf.scaleY+G$A[0]+G$A[2],G$$=G$H.lineElement,(G$J=G$J||G$D<G$p+G$z&&G$H.wordWrap)&&G$Q();G$a.elements.push(G$v),G$a.h=Math.max(G$a.h,G$P),G$v.x=G$p,G$v.y=G$M,G$p+=G$z,G$a.w=G$p-G$x,G$a.y=G$M,G$g=Math.max(G$p+G$X,G$g)}else G$E||(G$p+=G$o.DIV_ELEMENT_PADDING),G$a.wordStartIndex=G$a.elements.length;if(G$M=G$a.y+G$a.h,G$e){var G$Z=0,G$Y=G$D;for(G$W=0,G$O=G$V.length;G$W<G$O;G$W++)G$V[G$W].updatePos(0,G$Y,G$W,G$Z,G$m,G$B,G$T),G$Z+=Math.max(G$T,G$V[G$W].h+G$K);G$M=G$Z}for(G$j&&(G$q.width=G$g),G$M>G$q.height&&(G$q.height=G$M),G$W=0,G$O=G$V.length;G$W<G$O;G$W++)G$V[G$W].revertOrder(G$D);return[G$g,G$M]},G$o._will=null,G$o.DIV_ELEMENT_PADDING=0,G$o}(),G$c=function(){function G$q(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}G$R(G$q,"laya.html.utils.LayoutLine");var G$r=G$q.prototype;return G$r.updatePos=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){var G$W,G$O=0;0<this.elements.length&&(G$O=(G$W=this.elements[this.elements.length-1]).x+G$W.width-this.elements[0].x);var G$N=0,G$x=NaN;1===G$A&&(G$N=(G$r-G$O)/2),2===G$A&&(G$N=G$r-G$O),0===G$R||0!=G$y||(G$y=1);for(var G$K=0,G$T=this.elements.length;G$K<G$T;G$K++){var G$j=(G$W=this.elements[G$K])._getCSSStyle();switch(0!==G$N&&(G$W.x+=G$N),G$j._getValign()){case 0:G$W.y=G$H;break;case 1:var G$D=0;99999!=this.minTextHeight&&(G$D=this.minTextHeight);var G$g=(G$D+G$R)/2;G$g=Math.max(G$g,this.h),G$x=(laya.html.dom.HTMLImageElement,G$H+G$g-G$W.height),G$W.y=G$x;break;case 2:G$W.y=G$H+(G$R-G$W.height)}}},G$r.revertOrder=function(G$q){var G$r;if(0<this.elements.length){var G$v,G$H=0;for(G$v=this.elements.length,G$H=0;G$H<G$v;G$H++)(G$r=this.elements[G$H]).x=G$q-G$r.x-G$r.width}},G$q}(),G$M=function(G$v){function G$r(){this.URI=null,this._href=null,G$r.__super.call(this),this._text=G$r._EMPTYTEXT,this.setStyle(new G$O(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}G$R(G$r,"laya.html.dom.HTMLElement",G$v);var G$q=G$r.prototype;return G$q.layaoutCallNative=function(){var G$q=0;if(this._childs&&0<(G$q=this._childs.length))for(var G$r=0;G$r<G$q;G$r++)this._childs[G$r].layaoutCallNative&&this._childs[G$r].layaoutCallNative();var G$v=this._getWords();G$v?laya.html.dom.HTMLElement.fillWords(this,G$v,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},G$q.appendChild=function(G$q){return this.addChild(G$q)},G$q._getWords2=function(){var G$q=this._text.text;if(!G$q||0===G$q.length)return null;var G$r,G$v,G$H=0,G$A=0;if(this._text.drawWords)G$v=this._text.drawWords;else{for(G$A=(G$r=G$q.split(" ")).length-1,G$v=[],G$H=0;G$H<G$A;G$H++)G$v.push(G$r[G$H]," ");0<=G$A&&G$v.push(G$r[G$A]),this._text.drawWords=G$v}var G$y,G$R=this._text.words;if(G$R&&G$R.length===G$v.length)return G$R;null===G$R&&(this._text.words=G$R=[]),G$R.length=G$v.length;var G$W=this.style,G$O=G$W.font;for(G$H=0,G$A=G$v.length;G$H<G$A;G$H++){G$y=G$B.measureText(G$v[G$H],G$O);var G$N=G$R[G$H]=new G$K(G$v[G$H],G$y.width,G$y.height||G$W.fontSize,G$W);if(1<G$N.char.length&&(G$N.charNum=G$N.char),this.href){var G$x=new G$j;this.addChild(G$x),G$N.setSprite(G$x)}}return G$R},G$q._getWords=function(){if(!G$C.CharacterCache)return this._getWords2();var G$q=this._text.text;if(!G$q||0===G$q.length)return null;var G$r,G$v=this._text.words;if(G$v&&G$v.length===G$q.length)return G$v;null===G$v&&(this._text.words=G$v=[]),G$v.length=G$q.length;for(var G$H=this.style,G$A=G$H.font,G$y=0,G$R=G$q.length;G$y<G$R;G$y++)if(G$r=G$B.measureText(G$q.charAt(G$y),G$A)){var G$W=G$v[G$y]=new G$K(G$q.charAt(G$y),G$r.width,G$r.height||G$H.fontSize,G$H);if(this.href){var G$O=new G$j;this.addChild(G$O),G$W.setSprite(G$O)}}else console.warn("_getWords size is null"+G$q.charAt(G$y),G$A);return G$v},G$q.showLinkSprite=function(){var G$q=this._text.words;if(G$q)for(var G$r,G$v,G$H=[],G$A=0;G$A<G$q.length;G$A++)G$v=G$q[G$A],(G$r=new G$j).graphics.drawRect(0,0,G$v.width,G$v.height,"#ff0000"),G$r.width=G$v.width,G$r.height=G$v.height,this.addChild(G$r),G$H.push(G$r)},G$q._layoutLater=function(){var G$q=this.style;512&G$q._type||(G$q.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&G$q.block?(G$p.later(this),G$q._type|=512):this.parent&&this.parent._layoutLater())},G$q._setAttributes=function(G$q,G$r){switch(G$q){case"style":return void this.style.cssText(G$r);case"class":return void(this.className=G$r)}G$v.prototype._setAttributes.call(this,G$q,G$r)},G$q.updateHref=function(){if(null!=this._href){var G$q=this._getWords();if(G$q)for(var G$r,G$v,G$H=0;G$H<G$q.length;G$H++)(G$v=(G$r=G$q[G$H]).getSprite())&&(G$v.size(G$r.width,G$r.height),G$v.on("click",this,this.onLinkHandler))}},G$q.onLinkHandler=function(G$q){switch(G$q.type){case"click":for(var G$r=this;G$r;)G$r.event("link",[this.href]),G$r=G$r.parent}},G$q.formatURL=function(G$q){return this.URI?G$m.formatURL(G$q,this.URI?this.URI.path:null):G$q},G$W(0,G$q,"href",function(){return this._href},function(G$q){null!=(this._href=G$q)&&(this._getCSSStyle().underLine=1,this.updateHref())}),G$W(0,G$q,"color",null,function(G$q){this.style.color=G$q}),G$W(0,G$q,"onClick",null,function(G$q){G$H._runScript("fn=function(event){"+G$q+";}"),this.on("click",this,void 0)}),G$W(0,G$q,"id",null,function(G$q){G$z.document.setElementById(G$q,this)}),G$W(0,G$q,"innerTEXT",function(){return this._text.text},function(G$q){this.text=G$q}),G$W(0,G$q,"style",function(){return this._style}),G$W(0,G$q,"text",function(){return this._text.text},function(G$q){this._text==G$r._EMPTYTEXT?this._text={text:G$q,words:null}:(this._text.text=G$q,this._text.words&&(this._text.words.length=0)),G$T.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),G$W(0,G$q,"parent",G$v.prototype._$get_parent,function(G$q){if(G$q instanceof laya.html.dom.HTMLElement){var G$r=G$q;this.URI||(this.URI=G$r.URI),this.style.inherit(G$r.style)}G$H.superSet(G$j,this,"parent",G$q)}),G$W(0,G$q,"className",null,function(G$q){this.style.attrs(G$z.document.styleSheets["."+G$q])}),G$r.fillWords=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$q.graphics.clear();for(var G$W=0,G$O=G$r.length;G$W<G$O;G$W++){var G$N=G$r[G$W];G$q.graphics.fillText(G$N.char,G$N.x+G$v,G$N.y+G$H,G$A,G$y,"left",G$R)}},G$r._EMPTYTEXT={text:null,words:null},G$r}(G$j),G$r=(function(G$q){function G$r(){G$r.__super.call(this),this.style.lineElement=!0,this.style.block=!0}G$R(G$r,"laya.html.dom.HTMLBrElement",G$M)}(),function(G$q){function G$r(){this.contextHeight=NaN,this.contextWidth=NaN,G$r.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}G$R(G$r,"laya.html.dom.HTMLDivElement",G$q);var G$v=G$r.prototype;return G$v.appendHTML=function(G$q){G$e.parse(this,G$q,this.URI),this.layout()},G$v._addChildsToLayout=function(G$r){var G$q=this._getWords();if(null==G$q&&0==this._childs.length)return!1;G$q&&G$q.forEach(function(G$q){G$r.push(G$q)});for(var G$v=!0,G$H=0,G$A=this._childs.length;G$H<G$A;G$H++){var G$y=this._childs[G$H];G$v?G$v=!1:G$r.push(null),G$y._addToLayout(G$r)}return!0},G$v._addToLayout=function(G$q){this.layout()},G$v.layout=function(){if(this.style){this.style._type|=512;var G$q=G$p.layout(this);if(G$q){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new G$x);var G$r=this._$P.mHtmlBounds;G$r.x=G$r.y=0,G$r.width=this.contextWidth=G$q[0],G$r.height=this.contextHeight=G$q[1],this.setBounds(G$r)}}},G$W(0,G$v,"height",function(){return this._height?this._height:this.contextHeight},G$q.prototype._$set_height),G$W(0,G$v,"innerHTML",null,function(G$q){this.destroyChildren(),this.appendHTML(G$q)}),G$W(0,G$v,"width",function(){return this._width?this._width:this.contextWidth},function(G$q){var G$r=!1;G$r=0===G$q?G$q!=this._width:G$q!=this.width,G$H.superSet(G$M,this,"width",G$q),G$r&&this.layout()}),G$r}(G$M)),G$z=function(G$q){function G$r(){this.all=new Array,this.styleSheets=G$O.styleSheets,G$r.__super.call(this)}G$R(G$r,"laya.html.dom.HTMLDocument",G$M);var G$v=G$r.prototype;return G$v.getElementById=function(G$q){return this.all[G$q]},G$v.setElementById=function(G$q,G$r){this.all[G$q]=G$r},G$A(G$r,["document",function(){return this.document=new G$r}]),G$r}();(function(G$q){function G$r(){this._tex=null,this._url=null,this._renderArgs=[],G$r.__super.call(this),this.style.block=!0}G$R(G$r,"laya.html.dom.HTMLImageElement",G$M);var G$v=G$r.prototype;G$v._addToLayout=function(G$q){!this._style.absolute&&G$q.push(this)},G$v.render=function(G$q,G$r,G$v){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(G$g.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,G$q.ctx.drawTexture2(G$r,G$v,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},G$v.layaoutCallNative=function(){var G$q=0;if(this._childs&&0<(G$q=this._childs.length))for(var G$r=0;G$r<G$q;G$r++)this._childs[G$r].layaoutCallNative&&this._childs[G$r].layaoutCallNative()},G$W(0,G$v,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(G$q){this._width!==G$q&&(this._width=G$q,this._style.width=G$q,this.repaint())}),G$W(0,G$v,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(G$q){this._height!==G$q&&(this._height=G$q,this._style.height=G$q,this.repaint())}),G$v.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),G$N.clearCache(this,this._url),this._tex=null),G$M.prototype.destroy.call(this)},G$v.onloaded=function(){var G$q=this._style;G$q&&!G$q.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),G$q&&!G$q.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),G$T.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},G$v._loadImageComplete=function(G$q,G$r,G$v){if(!this._destroyed)if(null!=G$v)if(G$v instanceof ArrayBuffer){var G$H=new DataView(G$v);new laya.webgl.resource.WebGLImage(new Uint8Array(G$v,8),G$q,0,!1,G$H.getUint32(0),G$H.getUint32(4));this.onloaded()}else if(G$v instanceof G$X)G$N.imgMgrSet[G$q]=G$r,G$y.imgMgrLock(G$q,G$N.imgMgrSet[G$q]),this._url=G$q,this._tex=G$v,G$N.keepCache(this,G$q),G$N.cacheRes(G$q,this._tex),this.onloaded();else{var G$A=-1!=G$q.indexOf(".png",G$q.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(G$v,G$q,G$A,!1,G$v.width,G$v.height);this.onloaded()}else this.event("error","Load image failed")},G$W(0,G$v,"src",null,function(G$q){(G$q=this.formatURL(G$q),this._url!=G$q)&&(null!=this._tex&&(G$N.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=G$q,(this._tex=G$N.getRes(G$q))?(G$N.keepCache(this,G$q),this.onloaded()):G$y.imgMgrLoad(G$q,this._loadImageComplete.bind(this),2,!1))})})(),function(G$q){function G$r(){this.type=null,G$r.__super.call(this),this.visible=!1}G$R(G$r,"laya.html.dom.HTMLLinkElement",G$q);var G$v=G$r.prototype;G$v._onload=function(G$q){switch(this.type){case"text/css":G$O.parseCSS(G$q,this.URI)}},G$W(0,G$v,"href",G$q.prototype._$get_href,function(G$q){var G$r=this;G$q=this.formatURL(G$q),this.URI=new G$m(G$q);var G$v=new G$N;G$v.once("complete",null,function(G$q){G$r._onload(G$q)}),G$v.load(G$q,"text")}),G$r._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(G$M),function(G$q){function G$r(){G$r.__super.call(this),this.visible=!1}G$R(G$r,"laya.html.dom.HTMLStyleElement",G$q),G$W(0,G$r.prototype,"text",G$q.prototype._$get_text,function(G$q){G$O.parseCSS(G$q,null)})}(G$M),function(G$q){function G$r(){G$r.__super.call(this),this._getCSSStyle().valign="middle"}G$R(G$r,"laya.html.dom.HTMLIframeElement",G$q),G$W(0,G$r.prototype,"href",G$q.prototype._$get_href,function(G$v){var G$H=this;G$v=this.formatURL(G$v);var G$q=new G$N;G$q.once("complete",null,function(G$q){var G$r=G$H.URI;G$H.URI=new G$m(G$v),G$H.innerHTML=G$q,!G$r||(G$H.URI=G$r)}),G$q.load(G$v,"text")})}(G$r)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$q,G$r){"use strict";for(var G$v in Object.defineProperty(G$r,"__esModule",{value:!0}),Laya){var G$H=Laya[G$v];G$H&&G$H.__isclass&&(G$r[G$v]=G$H)}}),function(G$A,G$q,G$g){G$g.un,G$g.uns;var G$H=G$g.static,G$y=G$g.class,G$R=G$g.getset,G$v=(G$g.__newvec,laya.display.Animation),G$X=(laya.utils.Browser,laya.utils.ClassUtils),G$W=laya.filters.ColorFilter,G$O=laya.utils.Ease,G$N=laya.events.Event,G$x=(laya.events.EventDispatcher,laya.display.css.Font),G$K=laya.display.FrameAnimation,G$r=laya.display.Graphics,G$T=laya.utils.Handler,G$j=laya.display.Input,G$B=laya.net.Loader,G$D=(laya.display.Node,laya.maths.Point),G$m=laya.maths.Rectangle,G$e=laya.renders.Render,G$p=laya.display.Sprite,G$M=laya.display.Text,G$z=laya.resource.Texture,G$P=laya.utils.Tween,G$V=laya.utils.Utils,G$a=laya.utils.WeakObject;G$g.interface("laya.ui.IItem"),G$g.interface("laya.ui.ISelect"),G$g.interface("laya.ui.IRender"),G$g.interface("laya.ui.IComponent"),G$g.interface("laya.ui.IBox","IComponent");var G$J=function(){function G$q(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return G$y(G$q,"laya.ui.LayoutStyle"),G$H(G$q,["EMPTY",function(){return this.EMPTY=new G$q}]),G$q}(),G$$=function(){function G$q(){}return G$y(G$q,"laya.ui.Styles"),G$q.labelColor="#000000",G$q.buttonStateNum=3,G$q.scrollBarMinNum=15,G$q.scrollBarDelayTime=500,G$H(G$q,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),G$q}(),G$G=function(){function G$A(){}return G$y(G$A,"laya.ui.UIUtils"),G$A.fillArray=function(G$q,G$r,G$v){var G$H=G$q.concat();if(G$r)for(var G$A=G$r.split(","),G$y=0,G$R=Math.min(G$H.length,G$A.length);G$y<G$R;G$y++){var G$W=G$A[G$y];G$H[G$y]="true"==G$W||"false"!=G$W&&G$W,null!=G$v&&(G$H[G$y]=G$v(G$W))}return G$H},G$A.toColor=function(G$q){return G$V.toHexColor(G$q)},G$A.gray=function(G$q,G$r){void 0===G$r&&(G$r=!0),G$r?G$A.addFilter(G$q,G$A.grayFilter):G$A.clearFilter(G$q,G$W)},G$A.addFilter=function(G$q,G$r){var G$v=G$q.filters||[];G$v.push(G$r),G$q.filters=G$v},G$A.clearFilter=function(G$q,G$r){var G$v=G$q.filters;if(null!=G$v&&0<G$v.length){for(var G$H=G$v.length-1;-1<G$H;G$H--){var G$A=G$v[G$H];G$g.__typeof(G$A,G$r)&&G$v.splice(G$H,1)}G$q.filters=G$v}},G$A._getReplaceStr=function(G$q){return G$A.escapeSequence[G$q]},G$A.adptString=function(G$q){return G$q.replace(/\\(\w)/g,G$A._getReplaceStr)},G$A.getBindFun=function(G$q){var G$r=G$A._funMap.get(G$q);if(null==G$r){var G$v='"'+G$q+'"',G$H="(function(data){if(data==null)return;with(data){try{\nreturn "+(G$v=G$v.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";G$r=G$g._runScript(G$H),G$A._funMap.set(G$q,G$r)}return G$r},G$H(G$A,["grayFilter",function(){return this.grayFilter=new G$W([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new G$a}]),G$A}(),G$E=function(){function G$q(){}return G$y(G$q,"UIConfig"),G$q.touchScrollEnable=!0,G$q.mouseWheelEnable=!0,G$q.showButtons=!0,G$q.popupBgColor="#000000",G$q.popupBgAlpha=.5,G$q.closeDialogOnSide=!0,G$q}(),G$Q=function(G$v){function G$m(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,G$m.__super.call(this),this._weakKeys=[]}G$y(G$m,"laya.ui.AutoBitmap",G$v);var G$q=G$m.prototype;return G$q.destroy=function(){if(G$B.clearObject(this,this._weakKey),this._weakKeys){for(var G$q=0,G$r=this._weakKeys.length;G$q<G$r;++G$q)G$B.clearObject(this,this._weakKeys[G$q]);this._weakKeys=null}G$v.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},G$q._setChanged=function(){this._isChanged||(this._isChanged=!0,G$g.timer.callLater(this,this.changeSource))},G$q.changeSource=function(){this._isChanged=!1;var G$q=this._source;if(G$q&&G$q.bitmap){var G$r=this.width,G$v=this.height,G$H=this._sizeGrid,G$A=G$q.sourceWidth,G$y=G$q.sourceHeight;if(!G$H||G$A===G$r&&G$y===G$v)this.cleanByTexture(G$q,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,G$r,G$v);else{G$B.clearObject(this,this._weakKey),G$q.$_GID||(G$q.$_GID=G$V.getGID());var G$R=G$q.$_GID+"."+G$r+"."+G$v+"."+G$H.join("."),G$W=G$B.findObject(G$R);if(G$V.isOKCmdList(G$W))return this._weakKey=G$R,G$B.keepObject(this,this._weakKey),void(this.cmds=G$W);this.clear();var G$O,G$N,G$x=G$H[0],G$K=G$H[1],G$T=G$H[2],G$j=G$H[3],G$D=G$H[4],G$g=!1;if(G$r==G$A&&(G$j=G$K=0),G$v==G$y&&(G$x=G$T=0),G$r<G$j+G$K){var G$X=G$r;G$g=!0,G$r=G$j+G$K,this.save(),this.clipRect(0,0,G$X,G$v)}G$j&&G$x&&(G$O=G$m.getTexture(G$q,0,0,G$j,G$x),G$N=this._weakKeys[0],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[0]=G$O.weakKey),this.drawTexture(G$O,0,0,G$j,G$x)):(G$B.clearObject(this,G$N),this._weakKeys[0]="")),G$K&&G$x&&(G$O=G$m.getTexture(G$q,G$A-G$K,0,G$K,G$x),G$N=this._weakKeys[1],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[1]=G$O.weakKey),this.drawTexture(G$O,G$r-G$K,0,G$K,G$x)):(G$B.clearObject(this,G$N),this._weakKeys[1]="")),G$j&&G$T&&(G$O=G$m.getTexture(G$q,0,G$y-G$T,G$j,G$T),G$N=this._weakKeys[2],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[2]=G$O.weakKey),this.drawTexture(G$O,0,G$v-G$T,G$j,G$T)):(G$B.clearObject(this,G$N),this._weakKeys[2]="")),G$K&&G$T&&(G$O=G$m.getTexture(G$q,G$A-G$K,G$y-G$T,G$K,G$T),G$N=this._weakKeys[3],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[3]=G$O.weakKey),this.drawTexture(G$O,G$r-G$K,G$v-G$T,G$K,G$T)):(G$B.clearObject(this,G$N),this._weakKeys[3]="")),G$x&&(G$O=G$m.getTexture(G$q,G$j,0,G$A-G$j-G$K,G$x),G$N=this._weakKeys[4],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[4]=G$O.weakKey),this.drawBitmap(G$D,G$O,G$j,0,G$r-G$j-G$K,G$x)):(G$B.clearObject(this,G$N),this._weakKeys[4]="")),G$T&&(G$O=G$m.getTexture(G$q,G$j,G$y-G$T,G$A-G$j-G$K,G$T),G$N=this._weakKeys[5],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[5]=G$O.weakKey),this.drawBitmap(G$D,G$O,G$j,G$v-G$T,G$r-G$j-G$K,G$T)):(G$B.clearObject(this,G$N),this._weakKeys[5]="")),G$j&&(G$O=G$m.getTexture(G$q,0,G$x,G$j,G$y-G$x-G$T),G$N=this._weakKeys[6],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[6]=G$O.weakKey),this.drawBitmap(G$D,G$O,0,G$x,G$j,G$v-G$x-G$T)):(G$B.clearObject(this,G$N),this._weakKeys[6]="")),G$K&&(G$O=G$m.getTexture(G$q,G$A-G$K,G$x,G$K,G$y-G$x-G$T),G$N=this._weakKeys[7],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[7]=G$O.weakKey),this.drawBitmap(G$D,G$O,G$r-G$K,G$x,G$K,G$v-G$x-G$T)):(G$B.clearObject(this,G$N),this._weakKeys[7]="")),G$O=G$m.getTexture(G$q,G$j,G$x,G$A-G$j-G$K,G$y-G$x-G$T),G$N=this._weakKeys[8],G$O?(G$N!=G$O.weakKey&&(G$B.clearObject(this,G$N),G$B.keepObject(this,G$O.weakKey),this._weakKeys[8]=G$O.weakKey),this.drawBitmap(G$D,G$O,G$j,G$x,G$r-G$j-G$K,G$v-G$x-G$T)):(G$B.clearObject(this,G$N),this._weakKeys[8]=""),G$g&&this.restore(),this.autoCacheCmd&&!G$e.isConchApp&&(G$B.saveObject(G$R,this.cmds,null),this._weakKey=G$R,G$B.keepObject(this,this._weakKey))}this._repaint()}},G$q.drawBitmap=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=0),G$A<.1||G$y<.1||(!G$q||G$r.width==G$A&&G$r.height==G$y?this.drawTexture(G$r,G$v,G$H,G$A,G$y):this.fillTexture(G$r,G$v,G$H,G$A,G$y))},G$q.clear=function(G$q){void 0===G$q&&(G$q=!0),G$v.prototype.clear.call(this,!1)},G$R(0,G$q,"sizeGrid",function(){return this._sizeGrid},function(G$q){this._sizeGrid=G$q,this._setChanged()}),G$R(0,G$q,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(G$q){this._width!=G$q&&(this._width=G$q,this._setChanged())}),G$R(0,G$q,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(G$q){this._height!=G$q&&(this._height=G$q,this._setChanged())}),G$R(0,G$q,"source",function(){return this._source},function(G$q){G$q?(this._source=G$q,this._setChanged()):(this._source=null,this.clear())}),G$m.getTexture=function(G$q,G$r,G$v,G$H,G$A){G$H<=0&&(G$H=1),G$A<=0&&(G$A=1),G$q.$_GID||(G$q.$_GID=G$V.getGID());var G$y=G$q.$_GID+"."+G$r+"."+G$v+"."+G$H+"."+G$A,G$R=G$B.findObject(G$y);if((!G$R||!G$R.source)&&(G$R=G$z.createFromTexture(G$q,G$r,G$v,G$H,G$A))){if(G$q.alphaTexture){var G$W=G$q.width/G$q.alphaTexture.width;G$R.alphaTexture=G$z.createFromTexture(G$q.alphaTexture,G$r/G$W,G$v/G$W,G$H/G$W,G$A/G$W)}G$B.saveObject(G$y,G$R),G$R.weakKey=G$y}return G$R},G$m}(G$r),G$s=(function(G$q){function G$r(){G$r.__super.call(this)}G$y(G$r,"laya.ui.UIEvent",G$N),G$r.SHOW_TIP="showtip",G$r.HIDE_TIP="hidetip"}(),function(G$r){function G$q(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,G$q.__super.call(this),this._layout=G$J.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}G$y(G$q,"laya.ui.Component",G$r);var G$v=G$q.prototype;return G$g.imps(G$v,{"laya.ui.IComponent":!0}),G$v.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},G$v.preinitialize=function(){},G$v.createChildren=function(){},G$v.initialize=function(){},G$v.callLater=function(G$q,G$r){G$g.timer.callLater(this,G$q,G$r)},G$v.runCallLater=function(G$q){G$g.timer.runCallLater(this,G$q)},G$v.commitMeasure=function(){},G$v.changeSize=function(){this.event("resize")},G$v.getLayout=function(){return this._layout===G$J.EMPTY&&(this._layout=new G$J),this._layout},G$v._setLayoutEnabled=function(G$q){this._layout&&this._layout.enable!=G$q&&(this._layout.enable=G$q,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},G$v.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},G$v.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},G$v.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},G$v.resetLayoutX=function(){var G$q=this._layout;if(isNaN(G$q.anchorX)||(this.pivotX=G$q.anchorX*this.width),this.layoutEnabled){var G$r=this.parent;G$r&&(isNaN(G$q.centerX)?isNaN(G$q.left)?isNaN(G$q.right)||(this.x=Math.round(G$r.width-this.displayWidth-G$q.right+this.pivotX*this.scaleX)):(this.x=Math.round(G$q.left+this.pivotX*this.scaleX),isNaN(G$q.right)||(this.width=(G$r._width-G$q.left-G$q.right)/(this.scaleX||.01))):this.x=Math.round(.5*(G$r.width-this.displayWidth)+G$q.centerX+this.pivotX*this.scaleX))}},G$v.resetLayoutY=function(){var G$q=this._layout;if(isNaN(G$q.anchorY)||(this.pivotY=G$q.anchorY*this.height),this.layoutEnabled){var G$r=this.parent;G$r&&(isNaN(G$q.centerY)?isNaN(G$q.top)?isNaN(G$q.bottom)||(this.y=Math.round(G$r.height-this.displayHeight-G$q.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(G$q.top+this.pivotY*this.scaleY),isNaN(G$q.bottom)||(this.height=(G$r._height-G$q.top-G$q.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(G$r.height-this.displayHeight)+G$q.centerY+this.pivotY*this.scaleY))}},G$v.onMouseOver=function(G$q){G$g.stage.event("showtip",this._toolTip)},G$v.onMouseOut=function(G$q){G$g.stage.event("hidetip",this._toolTip)},G$R(0,G$v,"displayWidth",function(){return this.width*this.scaleX}),G$R(0,G$v,"width",function(){return this._width?this._width:this.measureWidth},function(G$q){this._width!=G$q&&(this._width=G$q,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),G$R(0,G$v,"measureWidth",function(){var G$q=0;this.commitMeasure();for(var G$r=this.numChildren-1;-1<G$r;G$r--){var G$v=this.getChildAt(G$r);G$v.visible&&(G$q=Math.max(G$v.x+G$v.width*G$v.scaleX,G$q))}return G$q}),G$R(0,G$v,"displayHeight",function(){return this.height*this.scaleY}),G$R(0,G$v,"height",function(){return this._height?this._height:this.measureHeight},function(G$q){this._height!=G$q&&(this._height=G$q,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),G$R(0,G$v,"dataSource",function(){return this._dataSource},function(G$q){for(var G$r in this._dataSource=G$q,this._dataSource)this.hasOwnProperty(G$r)&&"function"!=typeof this[G$r]&&(this[G$r]=this._dataSource[G$r])}),G$R(0,G$v,"scaleY",G$r.prototype._$get_scaleY,function(G$q){G$g.superGet(G$p,this,"scaleY")!=G$q&&(G$g.superSet(G$p,this,"scaleY",G$q),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),G$R(0,G$v,"measureHeight",function(){var G$q=0;this.commitMeasure();for(var G$r=this.numChildren-1;-1<G$r;G$r--){var G$v=this.getChildAt(G$r);G$v.visible&&(G$q=Math.max(G$v.y+G$v.height*G$v.scaleY,G$q))}return G$q}),G$R(0,G$v,"scaleX",G$r.prototype._$get_scaleX,function(G$q){G$g.superGet(G$p,this,"scaleX")!=G$q&&(G$g.superSet(G$p,this,"scaleX",G$q),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),G$R(0,G$v,"top",function(){return this._layout.top},function(G$q){G$q!=this._layout.top&&(this.getLayout().top=G$q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$R(0,G$v,"bottom",function(){return this._layout.bottom},function(G$q){G$q!=this._layout.bottom&&(this.getLayout().bottom=G$q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$R(0,G$v,"left",function(){return this._layout.left},function(G$q){G$q!=this._layout.left&&(this.getLayout().left=G$q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$R(0,G$v,"right",function(){return this._layout.right},function(G$q){G$q!=this._layout.right&&(this.getLayout().right=G$q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$R(0,G$v,"centerX",function(){return this._layout.centerX},function(G$q){G$q!=this._layout.centerX&&(this.getLayout().centerX=G$q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$R(0,G$v,"centerY",function(){return this._layout.centerY},function(G$q){G$q!=this._layout.centerY&&(this.getLayout().centerY=G$q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$R(0,G$v,"anchorX",function(){return this._layout.anchorX},function(G$q){G$q!=this._layout.anchorX&&(this.getLayout().anchorX=G$q,this._setLayoutEnabled(!0)),this.resetLayoutX()}),G$R(0,G$v,"anchorY",function(){return this._layout.anchorY},function(G$q){G$q!=this._layout.anchorY&&(this.getLayout().anchorY=G$q,this._setLayoutEnabled(!0)),this.resetLayoutY()}),G$R(0,G$v,"tag",function(){return this._tag},function(G$q){this._tag=G$q}),G$R(0,G$v,"toolTip",function(){return this._toolTip},function(G$q){this._toolTip!=G$q&&(null!=(this._toolTip=G$q)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),G$R(0,G$v,"comXml",function(){return this._comXml},function(G$q){this._comXml=G$q}),G$R(0,G$v,"gray",function(){return this._gray},function(G$q){G$q!==this._gray&&(this._gray=G$q,G$G.gray(this,G$q))}),G$R(0,G$v,"disabled",function(){return this._disabled},function(G$q){G$q!==this._disabled&&(this.gray=this._disabled=G$q,this.mouseEnabled=!G$q)}),G$q}(G$p)),G$Z=function(G$q){function G$r(){this.lockLayer=null,this.popupEffect=function(G$q){G$q.scale(1,1),G$P.from(G$q,{x:G$g.stage.width/2,y:G$g.stage.height/2,scaleX:0,scaleY:0},300,G$O.backOut,G$T.create(this,this.doOpen,[G$q]))},this.closeEffect=function(G$q,G$r){G$P.to(G$q,{x:G$g.stage.width/2,y:G$g.stage.height/2,scaleX:0,scaleY:0},300,G$O.strongOut,G$T.create(this,this.doClose,[G$q,G$r]))},G$r.__super.call(this),this.maskLayer=new G$p,this.popupEffectHandler=G$T.create(this,this.popupEffect,null,!1),this.closeEffectHandler=G$T.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,G$g.stage.addChild(this),G$g.stage.on("resize",this,this._onResize),G$E.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}G$y(G$r,"laya.ui.DialogManager",G$p);var G$v=G$r.prototype;return G$v._closeOnSide=function(){var G$q=this.getChildAt(this.numChildren-1);G$q instanceof laya.ui.Dialog&&G$q.close("side")},G$v.setLockView=function(G$q){this.lockLayer||(this.lockLayer=new G$Y,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(G$g.stage.width,G$g.stage.height)),this.lockLayer.removeChildren(),G$q&&(G$q.centerX=G$q.centerY=0,this.lockLayer.addChild(G$q))},G$v._onResize=function(G$q){var G$r=this.maskLayer.width=G$g.stage.width,G$v=this.maskLayer.height=G$g.stage.height;this.lockLayer&&this.lockLayer.size(G$r,G$v),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,G$r,G$v,G$E.popupBgColor),this.maskLayer.alpha=G$E.popupBgAlpha;for(var G$H=this.numChildren-1;-1<G$H;G$H--){var G$A=this.getChildAt(G$H);G$A.popupCenter&&this._centerDialog(G$A)}},G$v._centerDialog=function(G$q){G$q.x=Math.round((G$g.stage.width-G$q.width>>1)+G$q.pivotX),G$q.y=Math.round((G$g.stage.height-G$q.height>>1)+G$q.pivotY)},G$v.open=function(G$q,G$r,G$v){void 0===G$r&&(G$r=!1),void 0===G$v&&(G$v=!1),G$r&&this._closeAll(),G$q.popupCenter&&this._centerDialog(G$q),this.addChild(G$q),(G$q.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),G$v&&null!=G$q.popupEffect?G$q.popupEffect.runWith(G$q):this.doOpen(G$q),this.event("open")},G$v.doOpen=function(G$q){G$q.onOpened()},G$v.lock=function(G$q){this.lockLayer&&(G$q?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},G$v.close=function(G$q,G$r,G$v){void 0===G$v&&(G$v=!1),G$v&&null!=G$q.closeEffect?G$q.closeEffect.runWith([G$q,G$r]):this.doClose(G$q,G$r),this.event("close")},G$v.doClose=function(G$q,G$r){G$q.removeSelf(),G$q.isModal&&this._checkMask(),G$q.closeHandler&&G$q.closeHandler.runWith(G$r),G$q.onClosed(G$r)},G$v.closeAll=function(){this._closeAll(),this.event("close")},G$v._closeAll=function(){for(var G$q=this.numChildren-1;-1<G$q;G$q--){var G$r=this.getChildAt(G$q);G$r&&null!=G$r.close&&this.doClose(G$r)}},G$v.getDialogsByGroup=function(G$q){for(var G$r=[],G$v=this.numChildren-1;-1<G$v;G$v--){var G$H=this.getChildAt(G$v);G$H&&G$H.group===G$q&&G$r.push(G$H)}return G$r},G$v.closeByGroup=function(G$q){for(var G$r=[],G$v=this.numChildren-1;-1<G$v;G$v--){var G$H=this.getChildAt(G$v);G$H&&G$H.group===G$q&&(G$H.close(),G$r.push(G$H))}return G$r},G$v._checkMask=function(){this.maskLayer.removeSelf();for(var G$q=this.numChildren-1;-1<G$q;G$q--){var G$r=this.getChildAt(G$q);if(G$r&&G$r.isModal)return void this.addChildAt(this.maskLayer,G$q)}},G$r}(),G$Y=function(G$q){function G$r(){G$r.__super.call(this)}G$y(G$r,"laya.ui.Box",G$q);var G$v=G$r.prototype;return G$g.imps(G$v,{"laya.ui.IBox":!0}),G$R(0,G$v,"dataSource",G$q.prototype._$get_dataSource,function(G$q){for(var G$r in this._dataSource=G$q){var G$v=this.getChildByName(G$r);G$v?G$v.dataSource=G$q[G$r]:this.hasOwnProperty(G$r)&&"function"!=typeof this[G$r]&&(this[G$r]=G$q[G$r])}}),G$r}(G$s),G$o=function(G$r){function G$v(G$q,G$r){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,G$v.__super.call(this),this._labelColors=G$$.buttonLabelColors,this._stateNum=G$$.buttonStateNum,void 0===G$r&&(G$r=""),this.skin=G$q,this.label=G$r}G$y(G$v,"laya.ui.Button",G$r);var G$q=G$v.prototype;return G$g.imps(G$q,{"laya.ui.ISelect":!0}),G$q.destroy=function(G$q){this.clearEvent(),G$B.clearCache(this,this._skin),G$B.clearObject(this,this._weakKey),void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(G$q),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},G$q.clearEvent=function(){this._skin&&G$A.atalsNotify&&G$A.atalsNotify.off(this._skin,this,this._setBtnSource)},G$q.createChildren=function(){this.graphics=this._bitmap=new G$Q},G$q.createText=function(){this._text||(this._text=new G$M,this._text.overflow=G$M.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},G$q.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},G$q.onMouse=function(G$q){if(!1!==this.toggle||!this._selected)return"click"===G$q.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=G$v.stateMap[G$q.type]))},G$q.changeClips=function(){var G$q=G$B.getRes(this._skin);if(G$q)if(this._skin&&""!=this._skin){G$B.clearObject(this,this._weakKey);var G$r=G$q.sourceWidth,G$v=G$q.sourceHeight/this._stateNum;G$q.$_GID||(G$q.$_GID=G$V.getGID());var G$H=G$q.$_GID+"-"+this._stateNum,G$A=G$B.findObject(G$H);if(G$V.isOkTextureList(G$A)||(G$A=null),G$A)this._weakKey=G$H,G$B.keepObject(this,this._weakKey),this._sources=G$A;else{if(this._sources=[],1===this._stateNum)this._sources.push(G$q);else for(var G$y=0;G$y<this._stateNum;G$y++){var G$R=G$z.createFromTexture(G$q,0,G$v*G$y,G$r,G$v);if(G$q.alphaTexture){var G$W=G$q.width/G$q.alphaTexture.width;G$R.alphaTexture=G$z.createFromTexture(G$q.alphaTexture,0/G$W,G$v*G$y/G$W,G$r/G$W,G$v/G$W)}this._sources.push(G$R)}G$B.saveObject(G$H,this._sources),this._weakKey=G$H,G$B.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||G$r,this._bitmap.height=this._height||G$v,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=G$r)}else console.warn("lose skin ",this._skin,this.name,this.__className)},G$q.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var G$q=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[G$q]),this.label&&(this._text.color=this._labelColors[G$q],this._strokeColors&&(this._text.strokeColor=this._strokeColors[G$q]))},G$q._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},G$R(0,G$q,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(G$q){this.createText(),this._text.strokeColor=G$q}),G$R(0,G$q,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),G$R(0,G$q,"skin",function(){return this._skin},function(G$q){if(this._skin!=G$q)if(this.clearEvent(),G$B.clearCache(this,this._skin),this._skin=G$q,G$B.keepCache(this,this._skin),G$B.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var G$r=G$A.resAtalsObj&&G$A.resAtalsObj[this._skin];G$r?(G$A.atalsNotify&&G$A.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=G$r.sourceW),0==this.height&&(this.height=G$r.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),G$q._setBtnSource=function(G$q,G$r){G$q===this._skin&&G$r&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},G$R(0,G$q,"state",function(){return this._state},function(G$q){this._state!=G$q&&(this._state=G$q,this._setStateChanged())}),G$R(0,G$q,"text",function(){return this.createText(),this._text}),G$R(0,G$q,"stateNum",function(){return this._stateNum},function(G$q){"string"==typeof G$q&&(G$q=parseInt(G$q)),this._stateNum!=G$q&&(this._stateNum=G$q<1?1:3<G$q?3:G$q,this.callLater(this.changeClips))}),G$R(0,G$q,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(G$q){this._strokeColors=G$G.fillArray(G$$.buttonLabelColors,G$q,String),this._setStateChanged()}),G$R(0,G$q,"labelColors",function(){return this._labelColors.join(",")},function(G$q){this._labelColors=G$G.fillArray(G$$.buttonLabelColors,G$q,String),this._setStateChanged()}),G$R(0,G$q,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),G$R(0,G$q,"label",function(){return this._text?this._text.text:null},function(G$q){(this._text||G$q)&&(this.createText(),this._text.text!=G$q&&(G$q&&!this._text.parent&&this.addChild(this._text),this._text.text=(G$q+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),G$R(0,G$q,"selected",function(){return this._selected},function(G$q){this._selected!=G$q&&(this._selected=G$q,this.state=this._selected?2:0,this.event("change"))}),G$R(0,G$q,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(G$q){this.createText(),this._text.padding=G$G.fillArray(G$$.labelPadding,G$q,Number)}),G$R(0,G$q,"labelSize",function(){return this.createText(),this._text.fontSize},function(G$q){this.createText(),this._text.fontSize=G$q}),G$R(0,G$q,"labelStroke",function(){return this.createText(),this._text.stroke},function(G$q){this.createText(),this._text.stroke=G$q}),G$R(0,G$q,"labelBold",function(){return this.createText(),this._text.bold},function(G$q){this.createText(),this._text.bold=G$q}),G$R(0,G$q,"labelFont",function(){return this.createText(),this._text.font},function(G$q){this.createText(),this._text.font=G$q}),G$R(0,G$q,"labelAlign",function(){return this.createText(),this._text.align},function(G$q){this.createText(),this._text.align=G$q}),G$R(0,G$q,"clickHandler",function(){return this._clickHandler},function(G$q){this._clickHandler=G$q}),G$R(0,G$q,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(G$q){this._bitmap.sizeGrid=G$G.fillArray(G$$.defaultSizeGrid,G$q,Number)}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$s,this,"width",G$q),this._autoSize&&(this._bitmap.width=G$q,this._text&&(this._text.width=G$q))}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$s,this,"height",G$q),this._autoSize&&(this._bitmap.height=G$q,this._text&&(this._text.height=G$q))}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)||"string"==typeof G$q?this.label=G$q+"":G$g.superSet(G$s,this,"dataSource",G$q)}),G$R(0,G$q,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(G$q){this._bitmap._offset=G$q?G$G.fillArray([1,1],G$q,Number):[]}),G$H(G$v,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),G$v}(G$s),G$C=function(G$r){function G$H(G$q,G$r,G$v){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,G$H.__super.call(this),void 0===G$r&&(G$r=1),void 0===G$v&&(G$v=1),this._clipX=G$r,this._clipY=G$v,this.skin=G$q}G$y(G$H,"laya.ui.Clip",G$r);var G$q=G$H.prototype;return G$q.destroy=function(G$q){this.clearEvent(),this.clearLoad(),G$B.clearCache(this,this._skin),G$B.clearObject(this,this._weakKey),void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},G$q.dispose=function(){this.destroy(!0),G$g.loader.clearRes(this._skin)},G$q.createChildren=function(){this.graphics=this._bitmap=new G$Q},G$q._onDisplay=function(G$q){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},G$q.changeClip=function(){if(this._clipChanged=!1,this._skin){var G$q=G$B.getRes(this._skin);if(G$q)this.loadComplete(this._skin,G$q);else{if(G$A.resAtalsObj&&G$A.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=G$T.create(this,this.loadComplete,[this._skin]),this._progress=null,G$g.loader.load(this._skin,this._complete,this._progress)}}},G$q.loadComplete=function(G$q,G$r){if(G$q===this._skin&&G$r){G$B.clearObject(this,this._weakKey);var G$v=this._clipWidth||Math.ceil(G$r.sourceWidth/this._clipX),G$H=this._clipHeight||Math.ceil(G$r.sourceHeight/this._clipY),G$A=this._skin+G$v+G$H,G$y=G$B.findObject(G$A);if(G$V.isOkTextureList(G$y)||(G$y=null),G$y)this._weakKey=G$A,G$B.keepObject(this,this._weakKey),this._sources=G$y;else{this._sources=[];for(var G$R=0;G$R<this._clipY;G$R++)for(var G$W=0;G$W<this._clipX;G$W++){var G$O=G$z.createFromTexture(G$r,G$v*G$W,G$H*G$R,G$v,G$H);if(G$r.alphaTexture){var G$N=G$r.width/G$r.alphaTexture.width;G$O.alphaTexture=G$z.createFromTexture(G$r.alphaTexture,G$v*G$W/G$N,G$H*G$R/G$N,G$v/G$N,G$H/G$N)}this._sources.push(G$O)}G$B.saveObject(G$A,this._sources),this._weakKey=G$A,G$B.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},G$q.play=function(G$q,G$r){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=-1),this._isPlaying=!0,this.index=G$q,this._toIndex=G$r,this._index++,G$g.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},G$q._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},G$q.stop=function(){this._isPlaying=!1,G$g.timer.clear(this,this._loop),this.event("complete")},G$q._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},G$R(0,G$q,"interval",function(){return this._interval},function(G$q){this._interval!=G$q&&(this._interval=G$q,this._isPlaying&&this.play())}),G$q.clearEvent=function(){this._skin&&G$A.atalsNotify&&G$A.atalsNotify.off(this._skin,this,this._setBtnSource)},G$q.clearLoad=function(){this._skin&&((this._complete||this._progress)&&G$g.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},G$R(0,G$q,"skin",function(){return this._skin},function(G$q){if(this._skin!=G$q)if(this.clearLoad(),this.clearEvent(),G$B.clearCache(this,this._skin),this._skin=G$q){G$B.keepCache(this,this._skin);var G$r=G$B.getRes(G$q),G$v=G$A.resAtalsObj&&G$A.resAtalsObj[this._skin];!G$r&&G$v?G$A.atalsNotify&&G$A.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),G$q._setBtnSource=function(G$q,G$r){G$q===this._skin&&G$r&&(this.loadComplete(G$q,G$r),this.clearEvent())},G$R(0,G$q,"sources",function(){return this._sources},function(G$q){this._sources=G$q,this.index=this._index,this.event("loaded")}),G$R(0,G$q,"clipX",function(){return this._clipX},function(G$q){this._clipX=G$q||1,this._setClipChanged()}),G$R(0,G$q,"clipY",function(){return this._clipY},function(G$q){this._clipY=G$q||1,this._setClipChanged()}),G$R(0,G$q,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),G$R(0,G$q,"clipWidth",function(){return this._clipWidth},function(G$q){this._clipWidth=G$q,this._setClipChanged()}),G$R(0,G$q,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(G$q){this._bitmap.sizeGrid=G$G.fillArray(G$$.defaultSizeGrid,G$q,Number)}),G$R(0,G$q,"group",function(){return this._group},function(G$q){G$q&&this._skin&&G$B.setGroup(this._skin,G$q),this._group=G$q}),G$R(0,G$q,"clipHeight",function(){return this._clipHeight},function(G$q){this._clipHeight=G$q,this._setClipChanged()}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$s,this,"width",G$q),this._bitmap.width=G$q}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$s,this,"height",G$q),this._bitmap.height=G$q}),G$R(0,G$q,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),G$R(0,G$q,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),G$R(0,G$q,"index",function(){return this._index},function(G$q){this._index=G$q,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[G$q]),this.event("change")}),G$R(0,G$q,"autoPlay",function(){return this._autoPlay},function(G$q){this._autoPlay!=G$q&&((this._autoPlay=G$q)?this.play():this.stop())}),G$R(0,G$q,"isPlaying",function(){return this._isPlaying},function(G$q){this._isPlaying=G$q}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)&&Math.floor(G$q)==G$q||"string"==typeof G$q?this.index=parseInt(G$q):G$g.superSet(G$s,this,"dataSource",G$q)}),G$R(0,G$q,"bitmap",function(){return this._bitmap}),G$H}(G$s),G$c=function(G$r){function G$q(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,G$q.__super.call(this)}G$y(G$q,"laya.ui.ColorPicker",G$r);var G$v=G$q.prototype;return G$v.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._colorPanel&&this._colorPanel.destroy(G$q),this._colorButton&&this._colorButton.destroy(G$q),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},G$v.createChildren=function(){this.addChild(this._colorButton=new G$o),this._colorPanel=new G$Y,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new G$p),this._colorPanel.addChild(this._colorBlock=new G$p),this._colorPanel.addChild(this._colorInput=new G$j)},G$v.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},G$v.onPanelMouseDown=function(G$q){G$q.stopPropagation()},G$v.changePanel=function(){this._panelChanged=!1;var G$q=this._colorPanel.graphics;G$q.clear(),G$q.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(G$q=this._colorTiles.graphics).clear();for(var G$r=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],G$v=0;G$v<12;G$v++)for(var G$H=0;G$H<20;G$H++){var G$A=0;G$A=0===G$H?G$r[G$v]:1===G$H?0:51*(((3*G$v+G$H/6)%3<<0)+3*(G$v/6<<0))<<16|G$H%6*51<<8|(G$v<<0)%6*51;var G$y=G$G.toColor(G$A);this._colors.push(G$y);var G$R=G$H*this._gridSize,G$W=G$v*this._gridSize;G$q.drawRect(G$R,G$W,this._gridSize,this._gridSize,G$y,"#000000")}},G$v.onColorButtonClick=function(G$q){this._colorPanel.parent?this.close():this.open()},G$v.open=function(){var G$q=this.localToGlobal(new G$D),G$r=G$q.x+this._colorPanel.width<=G$g.stage.width?G$q.x:G$g.stage.width-this._colorPanel.width,G$v=G$q.y+this._colorButton.height;G$v=G$v+this._colorPanel.height<=G$g.stage.height?G$v:G$q.y-this._colorPanel.height,this._colorPanel.pos(G$r,G$v),this._colorPanel.zOrder=1001,G$g._currentStage.addChild(this._colorPanel),G$g.stage.on("mousedown",this,this.removeColorBox)},G$v.close=function(){G$g.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},G$v.removeColorBox=function(G$q){this.close()},G$v.onColorFieldKeyDown=function(G$q){13==G$q.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),G$q.stopPropagation())},G$v.onColorInputChange=function(G$q){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},G$v.onColorTilesClick=function(G$q){this.selectedColor=this.getColorByMouse(),this.close()},G$v.onColorTilesMouseMove=function(G$q){this._colorInput.focus=!1;var G$r=this.getColorByMouse();this._colorInput.text=G$r,this.drawBlock(G$r)},G$v.getColorByMouse=function(){var G$q=this._colorTiles.getMousePoint(),G$r=Math.floor(G$q.x/this._gridSize),G$v=Math.floor(G$q.y/this._gridSize);return this._colors[20*G$v+G$r]},G$v.drawBlock=function(G$q){var G$r=this._colorBlock.graphics;G$r.clear();var G$v=G$q||"#ffffff";G$r.drawRect(0,0,50,20,G$v,this._borderColor),G$q||G$r.drawLine(0,0,50,20,"#ff0000")},G$v.changeColor=function(){var G$q=this.graphics;G$q.clear();var G$r=this._selectedColor||"#000000";G$q.drawRect(0,0,this._colorButton.width,this._colorButton.height,G$r)},G$v._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},G$R(0,G$v,"inputBgColor",function(){return this._inputBgColor},function(G$q){this._inputBgColor=G$q,this._setPanelChanged()}),G$R(0,G$v,"selectedColor",function(){return this._selectedColor},function(G$q){this._selectedColor!=G$q&&(this._selectedColor=this._colorInput.text=G$q,this.drawBlock(G$q),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",G$N.EMPTY.setTo("change",this,this)))}),G$R(0,G$v,"skin",function(){return this._colorButton.skin},function(G$q){this._colorButton.skin=G$q,this.changeColor()}),G$R(0,G$v,"bgColor",function(){return this._bgColor},function(G$q){this._bgColor=G$q,this._setPanelChanged()}),G$R(0,G$v,"borderColor",function(){return this._borderColor},function(G$q){this._borderColor=G$q,this._setPanelChanged()}),G$R(0,G$v,"inputColor",function(){return this._inputColor},function(G$q){this._inputColor=G$q,this._setPanelChanged()}),G$q}(G$s),G$b=function(G$r){function G$v(G$q,G$r){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,G$v.__super.call(this),this._itemColors=G$$.comboBoxItemColors,this.skin=G$q,this.labels=G$r}G$y(G$v,"laya.ui.ComboBox",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._button&&this._button.destroy(G$q),this._list&&this._list.destroy(G$q),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},G$q.createChildren=function(){this.addChild(this._button=new G$o),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},G$q._createList=function(){this._list=new G$l,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},G$q._setListEvent=function(G$q){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=G$T.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},G$q.onListDown=function(G$q){G$q.stopPropagation()},G$q.onScrollBarDown=function(G$q){G$q.stopPropagation()},G$q.onButtonMouseDown=function(G$q){this.callLater(this.switchTo,[!this._isOpen])},G$q.changeList=function(){this._listChanged=!1;var G$q=this.width-2,G$r=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:G$q,height:this._itemHeight,fontSize:this._itemSize,color:G$r}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},G$q.onlistItemMouse=function(G$q,G$r){var G$v=G$q.type;if("mouseover"===G$v||"mouseout"===G$v){if(this._isCustomList)return;var G$H=this._list.getCell(G$r);if(!G$H)return;var G$A=G$H.getChildByName("label");G$A&&("mouseover"===G$v?(G$A.bgColor=this._itemColors[0],G$A.color=this._itemColors[1]):(G$A.bgColor=null,G$A.color=this._itemColors[2]))}else"click"===G$v&&(this.selectedIndex=G$r,this.isOpen=!1)},G$q.switchTo=function(G$q){this.isOpen=G$q},G$q.changeOpen=function(){this.isOpen=!this._isOpen},G$q.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var G$q=this._list.graphics;G$q.clear(),G$q.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var G$r=this._list.array||[],G$v=G$r.length=0,G$H=this._labels.length;G$v<G$H;G$v++)G$r.push({label:this._labels[G$v]});this._list.height=this._listHeight,this._list.array=G$r},G$q.changeSelected=function(){this._button.label=this.selectedLabel},G$q._onStageMouseWheel=function(G$q){this._list&&!this._list.contains(G$q.target)&&this.removeList(null)},G$q.removeList=function(G$q){G$g.stage.off("mousedown",this,this.removeList),G$g.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},G$R(0,G$q,"selectedIndex",function(){return this._selectedIndex},function(G$q){this._selectedIndex!=G$q&&(this._selectedIndex=G$q,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[G$N.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),G$R(0,G$q,"measureHeight",function(){return this._button.height}),G$R(0,G$q,"skin",function(){return this._button.skin},function(G$q){this._button.skin!=G$q&&(this._button.skin=G$q,this._listChanged=!0)}),G$R(0,G$q,"measureWidth",function(){return this._button.width}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$s,this,"width",G$q),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),G$R(0,G$q,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(G$q){this.selectedIndex=this._labels.indexOf(G$q)}),G$R(0,G$q,"labels",function(){return this._labels.join(",")},function(G$q){0<this._labels.length&&(this.selectedIndex=-1),G$q?this._labels=G$q.split(","):this._labels.length=0,this._itemChanged=!0}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$s,this,"height",G$q),this._button.height=this._height}),G$R(0,G$q,"selectHandler",function(){return this._selectHandler},function(G$q){this._selectHandler=G$q}),G$R(0,G$q,"visibleNum",function(){return this._visibleNum},function(G$q){this._visibleNum=G$q,this._listChanged=!0}),G$R(0,G$q,"labelBold",function(){return this._button.text.bold},function(G$q){this._button.text.bold=G$q}),G$R(0,G$q,"itemColors",function(){return String(this._itemColors)},function(G$q){this._itemColors=G$G.fillArray(this._itemColors,G$q,String),this._listChanged=!0}),G$R(0,G$q,"itemSize",function(){return this._itemSize},function(G$q){this._itemSize=G$q,this._listChanged=!0}),G$R(0,G$q,"scrollBar",function(){return this.list.scrollBar}),G$R(0,G$q,"isOpen",function(){return this._isOpen},function(G$q){if(this._isOpen!=G$q)if(this._isOpen=G$q,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var G$r=this.localToGlobal(G$D.TEMP.setTo(0,0)),G$v=G$r.y+this._button.height;G$v=G$v+this._listHeight<=G$g.stage.height?G$v:G$r.y-this._listHeight,this._list.pos(G$r.x,G$v),this._list.zOrder=1001,G$g._currentStage.addChild(this._list),G$g.stage.once("mousedown",this,this.removeList),G$g.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),G$R(0,G$q,"scrollBarSkin",function(){return this._scrollBarSkin},function(G$q){this._scrollBarSkin=G$q}),G$R(0,G$q,"sizeGrid",function(){return this._button.sizeGrid},function(G$q){this._button.sizeGrid=G$q}),G$R(0,G$q,"button",function(){return this._button}),G$R(0,G$q,"list",function(){return this._list||this._createList(),this._list},function(G$q){G$q&&(G$q.removeSelf(),this._isCustomList=!0,this._list=G$q,this._setListEvent(G$q),this._itemHeight=G$q.getCell(0).height+G$q.spaceY)}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)&&Math.floor(G$q)==G$q||"string"==typeof G$q?this.selectedIndex=parseInt(G$q):G$q instanceof Array?this.labels=G$q.join(","):G$g.superSet(G$s,this,"dataSource",G$q)}),G$R(0,G$q,"labelColors",function(){return this._button.labelColors},function(G$q){this._button.labelColors!=G$q&&(this._button.labelColors=G$q)}),G$R(0,G$q,"labelPadding",function(){return this._button.text.padding.join(",")},function(G$q){this._button.text.padding=G$G.fillArray(G$$.labelPadding,G$q,Number)}),G$R(0,G$q,"labelSize",function(){return this._button.text.fontSize},function(G$q){this._button.text.fontSize=G$q}),G$R(0,G$q,"labelFont",function(){return this._button.text.font},function(G$q){this._button.text.font=G$q}),G$R(0,G$q,"stateNum",function(){return this._button.stateNum},function(G$q){this._button.stateNum=G$q}),G$v}(G$s),G$d=function(G$r){function G$v(G$q){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,G$v.__super.call(this),this._showButtons=G$E.showButtons,this._touchScrollEnable=G$E.touchScrollEnable,this._mouseWheelEnable=G$E.mouseWheelEnable,this.skin=G$q,this.max=1}G$y(G$v,"laya.ui.ScrollBar",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),this.stopScroll(),this.target=null,G$r.prototype.destroy.call(this,G$q),this.upButton&&this.upButton.destroy(G$q),this.downButton&&this.downButton.destroy(G$q),this.slider&&this.slider.destroy(G$q),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},G$q.createChildren=function(){this.addChild(this.slider=new G$u),this.addChild(this.upButton=new G$o),this.addChild(this.downButton=new G$o)},G$q.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},G$q.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},G$q.onButtonMouseDown=function(G$q){var G$r=G$q.currentTarget===this.upButton;this.slide(G$r),G$g.timer.once(G$$.scrollBarDelayTime,this,this.startLoop,[G$r]),G$g.stage.once("mouseup",this,this.onStageMouseUp)},G$q.startLoop=function(G$q){G$g.timer.frameLoop(1,this,this.slide,[G$q])},G$q.slide=function(G$q){G$q?this.value-=this._scrollSize:this.value+=this._scrollSize},G$q.onStageMouseUp=function(G$q){G$g.timer.clear(this,this.startLoop),G$g.timer.clear(this,this.slide)},G$q.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},G$q.changeSize=function(){G$r.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},G$q.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},G$q.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},G$q.setScroll=function(G$q,G$r,G$v){this.runCallLater(this.changeSize),this.slider.setSlider(G$q,G$r,G$v),this.slider.bar.visible=0<G$r,!this._hide&&this.autoHide&&(this.visible=!1)},G$q.onTargetMouseWheel=function(G$q){this.value-=G$q.delta*this._scrollSize,this.target=this._target},G$q.onTargetMouseDown=function(G$q){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new G$D),this._lastPoint.setTo(G$g.stage.mouseX,G$g.stage.mouseY),G$g.timer.clear(this,this.tweenMove),G$P.clearTween(this),G$g.stage.once("mouseup",this,this.onStageMouseUp2),G$g.stage.once("mouseout",this,this.onStageMouseUp2),G$g.timer.frameLoop(1,this,this.loop)},G$q.loop=function(){var G$q=G$g.stage.mouseY,G$r=G$g.stage.mouseX;if(this._lastOffset=this.isVertical?G$q-this._lastPoint.y:G$r-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?G$g.stage._canvasTransform.getScaleY():G$g.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=G$r,this._lastPoint.y=G$q,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},G$q.onStageMouseUp2=function(G$q){if(G$g.stage.off("mouseup",this,this.onStageMouseUp2),G$g.stage.off("mouseout",this,this.onStageMouseUp2),G$g.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?G$P.to(this,{value:this.min},this.elasticBackTime,G$O.sineOut,G$T.create(this,this.elasticOver)):this._value>this.max&&G$P.to(this,{value:this.max},this.elasticBackTime,G$O.sineOut,G$T.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?G$g.stage.mouseY-this._lastPoint.y:G$g.stage.mouseX-this._lastPoint.x);for(var G$r=0,G$v=Math.min(this._offsets.length,3),G$H=0;G$H<G$v;G$H++)G$r+=this._offsets[this._offsets.length-1-G$H];if(this._lastOffset=G$r/G$v,(G$r=Math.abs(this._lastOffset))<2)return void this.event("end");60<G$r&&(this._lastOffset=0<this._lastOffset?60:-60);var G$A=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));G$g.timer.frameLoop(1,this,this.tweenMove,[G$A])}},G$q.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&G$P.to(this,{alpha:0},500),this.event("end")},G$q.tweenMove=function(G$q){this._lastOffset*=this.rollRatio;var G$r=NaN;if(0<G$q&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,G$r=.5*-(this.min-G$q-this.value),this._lastOffset>G$r&&(this._lastOffset=G$r)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,G$r=.5*-(this.max+G$q-this.value),this._lastOffset<G$r&&(this._lastOffset=G$r))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(G$g.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?G$P.to(this,{value:this.min},this.elasticBackTime,G$O.sineOut,G$T.create(this,this.elasticOver)):this._value>this.max?G$P.to(this,{value:this.max},this.elasticBackTime,G$O.sineOut,G$T.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&G$P.to(this,{alpha:0},500)}},G$q.stopScroll=function(){this.onStageMouseUp2(null),G$g.timer.clear(this,this.tweenMove),G$P.clearTween(this)},G$R(0,G$q,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),G$R(0,G$q,"skin",function(){return this._skin},function(G$q){this._skin!=G$q&&(this._skin=G$q,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),G$R(0,G$q,"max",function(){return this.slider.max},function(G$q){this.slider.max=G$q}),G$R(0,G$q,"showButtons",function(){return this._showButtons},function(G$q){this._showButtons=G$q,this.callLater(this.changeScrollBar)}),G$R(0,G$q,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),G$R(0,G$q,"min",function(){return this.slider.min},function(G$q){this.slider.min=G$q}),G$R(0,G$q,"value",function(){return this._value},function(G$q){G$q!==this._value&&(this._value=G$q,this._isElastic||(this.slider._value!=G$q&&(this.slider._value=G$q,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),G$R(0,G$q,"isVertical",function(){return this.slider.isVertical},function(G$q){this.slider.isVertical=G$q}),G$R(0,G$q,"sizeGrid",function(){return this.slider.sizeGrid},function(G$q){this.slider.sizeGrid=G$q}),G$R(0,G$q,"scrollSize",function(){return this._scrollSize},function(G$q){this._scrollSize=G$q}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)||"string"==typeof G$q?this.value=Number(G$q):G$g.superSet(G$s,this,"dataSource",G$q)}),G$R(0,G$q,"thumbPercent",function(){return this._thumbPercent},function(G$q){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),G$q=1<=G$q?.99:G$q,this._thumbPercent=G$q,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*G$q,G$$.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*G$q,G$$.scrollBarMinNum))}),G$R(0,G$q,"target",function(){return this._target},function(G$q){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=G$q)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),G$R(0,G$q,"hide",function(){return this._hide},function(G$q){this._hide=G$q,this.visible=!G$q}),G$R(0,G$q,"touchScrollEnable",function(){return this._touchScrollEnable},function(G$q){this._touchScrollEnable=G$q,this.target=this._target}),G$R(0,G$q,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(G$q){this._mouseWheelEnable=G$q,this.target=this._target}),G$R(0,G$q,"tick",function(){return this.slider.tick},function(G$q){this.slider.tick=G$q}),G$v}(G$s),G$u=function(G$r){function G$v(G$q){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,G$v.__super.call(this),this.skin=G$q}G$y(G$v,"laya.ui.Slider",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._bg&&this._bg.destroy(G$q),this._bar&&this._bar.destroy(G$q),this._progress&&this._progress.destroy(G$q),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},G$q.createChildren=function(){this.addChild(this._bg=new G$I),this.addChild(this._bar=new G$o)},G$q.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},G$q.onBarMouseDown=function(G$q){this._globalSacle||(this._globalSacle=new G$D),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=G$g.stage.mouseX,this._ty=G$g.stage.mouseY,G$g.stage.on("mousemove",this,this.mouseMove),G$g.stage.once("mouseup",this,this.mouseUp),G$g.stage.once("mouseout",this,this.mouseUp),this.showValueText()},G$q.showValueText=function(){if(this.showLabel){var G$q=laya.ui.Slider.label;this.addChild(G$q),G$q.textField.changeText(this._value+""),this.isVertical?(G$q.x=this._bar.x+20,G$q.y=.5*(this._bar.height-G$q.height)+this._bar.y):(G$q.y=this._bar.y-20,G$q.x=.5*(this._bar.width-G$q.width)+this._bar.x)}},G$q.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},G$q.mouseUp=function(G$q){G$g.stage.off("mousemove",this,this.mouseMove),G$g.stage.off("mouseup",this,this.mouseUp),G$g.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},G$q.mouseMove=function(G$q){var G$r=this._value;this.isVertical?(this._bar.y+=(G$g.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(G$g.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=G$g.stage.mouseX,this._ty=G$g.stage.mouseY;var G$v=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*G$v)/G$v,this._value!=G$r&&this.sendChangeEvent(),this.showValueText()},G$q.sendChangeEvent=function(G$q){void 0===G$q&&(G$q="change"),this.event(G$q),this.changeHandler&&this.changeHandler.runWith(this._value)},G$q.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},G$q.changeSize=function(){G$r.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},G$q.setSlider=function(G$q,G$r,G$v){this._value=-1,this._min=G$q,this._max=G$q<G$r?G$r:G$q,this.value=G$v<G$q?G$q:G$r<G$v?G$r:G$v},G$q.changeValue=function(){var G$q=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*G$q)/G$q,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var G$r=this._max-this._min;0===G$r&&(G$r=1),this.isVertical?(this._bar.y=(this._value-this._min)/G$r*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/G$r*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},G$q.onBgMouseDown=function(G$q){var G$r=this._bg.getMousePoint();this.isVertical?this.value=G$r.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=G$r.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},G$R(0,G$q,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),G$R(0,G$q,"skin",function(){return this._skin},function(G$q){if(this._skin!=G$q){this._skin=G$q,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var G$r=this._skin.replace(".png","$progress.png");G$B.getRes(G$r)&&(this._progress||(this.addChild(this._progress=new G$I),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=G$r),this.setBarPoint(),this.callLater(this.changeValue)}}),G$R(0,G$q,"allowClickBack",function(){return this._allowClickBack},function(G$q){this._allowClickBack!=G$q&&((this._allowClickBack=G$q)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),G$R(0,G$q,"max",function(){return this._max},function(G$q){this._max!=G$q&&(this._max=G$q,this.callLater(this.changeValue))}),G$R(0,G$q,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),G$R(0,G$q,"tick",function(){return this._tick},function(G$q){this._tick!=G$q&&(this._tick=G$q,this.callLater(this.changeValue))}),G$R(0,G$q,"sizeGrid",function(){return this._bg.sizeGrid},function(G$q){this._bg.sizeGrid=G$q,this._bar.sizeGrid=G$q,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),G$R(0,G$q,"min",function(){return this._min},function(G$q){this._min!=G$q&&(this._min=G$q,this.callLater(this.changeValue))}),G$R(0,G$q,"value",function(){return this._value},function(G$q){if(this._value!=G$q){var G$r=this._value;this._value=G$q,this.changeValue(),this._value!=G$r&&this.sendChangeEvent()}}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)||"string"==typeof G$q?this.value=Number(G$q):G$g.superSet(G$s,this,"dataSource",G$q)}),G$R(0,G$q,"bar",function(){return this._bar}),G$H(G$v,["label",function(){return this.label=new G$t}]),G$v}(G$s),G$I=function(G$r){function G$v(G$q){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,G$v.__super.call(this),this.skin=G$q}G$y(G$v,"laya.ui.Image",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,G$B.clearCache(this,this._skin)},G$q.dispose=function(){this.destroy(!0),G$B.clearCache(this,this._skin),this.clearEvent()},G$q.createChildren=function(){this.graphics=this._bitmap=new G$Q},G$q.setSource=function(G$q,G$r){this.destroyed||G$q===this._skin&&G$r&&(this.source=G$r,this.onCompResize(),this.clearEvent())},G$q.clearEvent=function(){this._skin&&G$A.atalsNotify&&G$A.atalsNotify.off(this._skin,this,this.setSource)},G$q.clearLoad=function(){this._skin&&((this._complete||this._progress)&&G$g.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},G$R(0,G$q,"source",function(){return this._bitmap.source},function(G$q){this._bitmap&&(this._bitmap.source=G$q,this.event("loaded"),this.repaint())}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"string"==typeof(this._dataSource=G$q)?this.skin=G$q:G$g.superSet(G$s,this,"dataSource",G$q)}),G$R(0,G$q,"measureHeight",function(){return this._bitmap.height}),G$R(0,G$q,"skin",function(){return this._skin},function(G$q){if(this._skin!=G$q)if(G$B.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=G$q){G$B.keepCache(this,this._skin);var G$r=G$B.getRes(G$q),G$v=G$A.resAtalsObj&&G$A.resAtalsObj[this._skin];G$r?(this.source=G$r,this.onCompResize()):G$v?(G$A.atalsNotify&&G$A.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=G$v.sourceW),0==this.height&&(this.height=G$v.sourceH)):(this._complete=G$T.create(this,this.setSource,[this._skin]),this._progress=null,G$g.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),G$R(0,G$q,"group",function(){return this._group},function(G$q){G$q&&this._skin&&G$B.setGroup(this._skin,G$q),this._group=G$q}),G$R(0,G$q,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(G$q){this._bitmap.sizeGrid=G$G.fillArray(G$$.defaultSizeGrid,G$q,Number)}),G$R(0,G$q,"measureWidth",function(){return this._bitmap.width}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$s,this,"width",G$q),this._bitmap.width=0==G$q?1e-7:G$q}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$s,this,"height",G$q),this._bitmap.height=0==G$q?1e-7:G$q}),G$v}(G$s),G$t=function(G$r){function G$v(G$q){this._tf=null,G$v.__super.call(this),void 0===G$q&&(G$q=""),G$x.defaultColor=G$$.labelColor,this.text=G$q}G$y(G$v,"laya.ui.Label",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._tf=null},G$q.createChildren=function(){this.addChild(this._tf=new G$M)},G$q.changeText=function(G$q){this._tf.changeText(G$q)},G$R(0,G$q,"padding",function(){return this._tf.padding.join(",")},function(G$q){this._tf.padding=G$G.fillArray(G$$.labelPadding,G$q,Number)}),G$R(0,G$q,"bold",function(){return this._tf.bold},function(G$q){this._tf.bold=G$q}),G$R(0,G$q,"align",function(){return this._tf.align},function(G$q){this._tf.align=G$q}),G$R(0,G$q,"text",function(){return this._tf.text},function(G$q){this._tf.text!=G$q&&(G$q&&(G$q=G$G.adptString(G$q+"")),this._tf.text=G$q,this.event("change"),this._width&&this._height||this.onCompResize())}),G$R(0,G$q,"italic",function(){return this._tf.italic},function(G$q){this._tf.italic=G$q}),G$R(0,G$q,"wordWrap",function(){return this._tf.wordWrap},function(G$q){this._tf.wordWrap=G$q}),G$R(0,G$q,"font",function(){return this._tf.font},function(G$q){this._tf.font=G$q}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)||"string"==typeof G$q?this.text=G$q+"":G$g.superSet(G$s,this,"dataSource",G$q)}),G$R(0,G$q,"color",function(){return this._tf.color},function(G$q){this._tf.color=G$q}),G$R(0,G$q,"valign",function(){return this._tf.valign},function(G$q){this._tf.valign=G$q}),G$R(0,G$q,"leading",function(){return this._tf.leading},function(G$q){this._tf.leading=G$q}),G$R(0,G$q,"fontSize",function(){return this._tf.fontSize},function(G$q){this._tf.fontSize=G$q}),G$R(0,G$q,"bgColor",function(){return this._tf.bgColor},function(G$q){this._tf.bgColor=G$q}),G$R(0,G$q,"borderColor",function(){return this._tf.borderColor},function(G$q){this._tf.borderColor=G$q}),G$R(0,G$q,"stroke",function(){return this._tf.stroke},function(G$q){this._tf.stroke=G$q}),G$R(0,G$q,"strokeColor",function(){return this._tf.strokeColor},function(G$q){this._tf.strokeColor=G$q}),G$R(0,G$q,"textField",function(){return this._tf}),G$R(0,G$q,"measureWidth",function(){return this._tf.width}),G$R(0,G$q,"measureHeight",function(){return this._tf.height}),G$R(0,G$q,"width",function(){return this._width||this._tf.text?G$g.superGet(G$s,this,"width"):0},function(G$q){G$g.superSet(G$s,this,"width",G$q),this._tf.width=G$q}),G$R(0,G$q,"height",function(){return this._height||this._tf.text?G$g.superGet(G$s,this,"height"):0},function(G$q){G$g.superSet(G$s,this,"height",G$q),this._tf.height=G$q}),G$R(0,G$q,"overflow",function(){return this._tf.overflow},function(G$q){this._tf.overflow=G$q}),G$R(0,G$q,"underline",function(){return this._tf.underline},function(G$q){this._tf.underline=G$q}),G$R(0,G$q,"underlineColor",function(){return this._tf.underlineColor},function(G$q){this._tf.underlineColor=G$q}),G$v}(G$s),G$F=function(G$r){function G$v(G$q){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,G$v.__super.call(this),this.skin=G$q}G$y(G$v,"laya.ui.ProgressBar",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._bg&&this._bg.destroy(G$q),this._bar&&this._bar.destroy(G$q),this._bg=this._bar=null,this.changeHandler=null},G$q.createChildren=function(){this.addChild(this._bg=new G$I),this.addChild(this._bar=new G$I)},G$q.changeValue=function(){if(this.sizeGrid){var G$q=this.sizeGrid.split(","),G$r=Number(G$q[3]),G$v=Number(G$q[1]),G$H=(this.width-G$r-G$v)*this._value;this._bar.width=G$r+G$v+G$H,this._bar.visible=this._bar.width>G$r+G$v}else this._bar.width=this.width*this._value},G$R(0,G$q,"measureHeight",function(){return this._bg.height}),G$R(0,G$q,"skin",function(){return this._skin},function(G$q){this._skin!=G$q&&(this._skin=G$q,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),G$R(0,G$q,"measureWidth",function(){return this._bg.width}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$s,this,"height",G$q),this._bg.height=this._height,this._bar.height=this._height}),G$R(0,G$q,"bar",function(){return this._bar}),G$R(0,G$q,"value",function(){return this._value},function(G$q){this._value!=G$q&&(G$q=1<G$q?1:G$q<0?0:G$q,this._value=G$q,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(G$q))}),G$R(0,G$q,"bg",function(){return this._bg}),G$R(0,G$q,"sizeGrid",function(){return this._bg.sizeGrid},function(G$q){this._bg.sizeGrid=this._bar.sizeGrid=G$q}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$s,this,"width",G$q),this._bg.width=this._width,this.callLater(this.changeValue)}),G$R(0,G$q,"dataSource",G$r.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)||"string"==typeof G$q?this.value=Number(G$q):G$g.superSet(G$s,this,"dataSource",G$q)}),G$v}(G$s),G$U=(function(G$q){function G$v(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,G$v.__super.call(this),this._tipBox=new G$s,this._tipBox.addChild(this._tipText=new G$M),this._tipText.x=this._tipText.y=5,this._tipText.color=G$v.tipTextColor,this._defaultTipHandler=this._showDefaultTip,G$g.stage.on("showtip",this,this._onStageShowTip),G$g.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}G$y(G$v,"laya.ui.TipManager",G$s);var G$r=G$v.prototype;G$r._onStageHideTip=function(G$q){G$g.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},G$r._onStageShowTip=function(G$q){G$g.timer.once(G$v.tipDelay,this,this._showTip,[G$q],!0)},G$r._showTip=function(G$q){if("string"==typeof G$q){var G$r=String(G$q);Boolean(G$r)&&this._defaultTipHandler(G$r)}else G$q instanceof laya.utils.Handler?G$q.run():"function"==typeof G$q&&G$q.apply();G$g.stage.on("mousemove",this,this._onStageMouseMove),G$g.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},G$r._onStageMouseDown=function(G$q){this.closeAll()},G$r._onStageMouseMove=function(G$q){this._showToStage(this,G$v.offsetX,G$v.offsetY)},G$r._showToStage=function(G$q,G$r,G$v){void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0);var G$H=G$q.getBounds();G$q.x=G$g.stage.mouseX+G$r,G$q.y=G$g.stage.mouseY+G$v,G$q.x+G$H.width>G$g.stage.width&&(G$q.x-=G$H.width+G$r),G$q.y+G$H.height>G$g.stage.height&&(G$q.y-=G$H.height+G$v)},G$r.closeAll=function(){G$g.timer.clear(this,this._showTip),G$g.stage.off("mousemove",this,this._onStageMouseMove),G$g.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},G$r.showDislayTip=function(G$q){this.addChild(G$q),this._showToStage(this),G$g._currentStage.addChild(this)},G$r._showDefaultTip=function(G$q){this._tipText.text=G$q;var G$r=this._tipBox.graphics;G$r.clear(),G$r.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,G$v.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),G$g._currentStage.addChild(this)},G$R(0,G$r,"defaultTipHandler",function(){return this._defaultTipHandler},function(G$q){this._defaultTipHandler=G$q}),G$v.offsetX=10,G$v.offsetY=15,G$v.tipTextColor="#ffffff",G$v.tipBackColor="#111111",G$v.tipDelay=200}(),function(G$q){var G$j;function G$D(){this._idMap=null,this._aniList=null,this._watchMap={},G$D.__super.call(this)}G$y(G$D,"laya.ui.View",G$Y);var G$r=G$D.prototype;return G$r.createView=function(G$q){if(G$q.animations&&!this._idMap&&(this._idMap={}),G$D.createComp(G$q,this,this),G$q.animations){var G$r,G$v,G$H=[],G$A=G$q.animations,G$y=0,G$R=G$A.length;for(G$y=0;G$y<G$R;G$y++){switch(G$r=new G$K,G$v=G$A[G$y],G$r._setUp(this._idMap,G$v),(this[G$v.name]=G$r)._setControlNode(this),G$v.action){case 1:G$r.play(0,!1);break;case 2:G$r.play(0,!0)}G$H.push(G$r)}this._aniList=G$H}0<this._width&&null==G$q.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},G$r.onEvent=function(G$q,G$r){},G$r.loadUI=function(G$q){var G$r=G$D.uiMap[G$q];G$r&&this.createView(G$r)},G$r.destroy=function(G$q){void 0===G$q&&(G$q=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,G$q)},G$r.changeData=function(G$q){var G$r=this._watchMap[G$q];if(G$r){console.log("change",G$q);for(var G$v=0,G$H=G$r.length;G$v<G$H;G$v++){G$r[G$v].exe(this)}}},G$D._regs=function(){for(var G$q in G$D.uiClassMap)G$X.regClass(G$q,G$D.uiClassMap[G$q])},G$D.createComp=function(G$q,G$r,G$v,G$H){if(!(G$r=G$r||G$D.getCompInstance(G$q)))return console.warn("can not create:"+G$q.type),null;var G$A=G$q.child;if(G$A)for(var G$y=G$r instanceof laya.ui.List,G$R=0,G$W=G$A.length;G$R<G$W;G$R++){var G$O=G$A[G$R];if(!G$r.hasOwnProperty("itemRender")||"render"!=G$O.props.name&&"render"!==G$O.props.renderType)if("Graphic"==G$O.type)G$X.addGraphicsToSprite(G$O,G$r);else if(G$X.isDrawType(G$O.type))G$X.addGraphicToSprite(G$O,G$r,!0);else{if(G$y){var G$N=[],G$x=G$D.createComp(G$O,null,G$v,G$N);G$N.length&&(G$x._$bindData=G$N)}else G$x=G$D.createComp(G$O,null,G$v,G$H);"Script"==G$O.type?"owner"in G$x?G$x.owner=G$r:"target"in G$x&&(G$x.target=G$r):"mask"==G$O.props.renderType||"mask"==G$O.props.name?G$r.mask=G$x:G$x instanceof laya.display.Sprite&&G$r.addChild(G$x)}else G$r.itemRender=G$O}var G$K=G$q.props;for(var G$T in G$K){var G$j=G$K[G$T];G$D.eventDic[G$T]?G$j&&G$v&&G$r.on(G$T,G$v,G$v.onEvent,[G$j]):G$D.setCompValue(G$r,G$T,G$j,G$v,G$H)}return G$g.__typeof(G$r,"laya.ui.IItem")&&G$r.initItems(),G$q.compId&&G$v&&G$v._idMap&&(G$v._idMap[G$q.compId]=G$r),G$r},G$D.setCompValue=function(G$q,G$r,G$v,G$H,G$A){if("string"==typeof G$v&&-1<G$v.indexOf("${")){if(G$D._sheet||(G$D._sheet=G$X.getClass("laya.data.Table")),!G$D._sheet)return void console.warn("Can not find class Sheet");if(G$A)G$A.push(G$q,G$r,G$v);else if(G$H){-1==G$v.indexOf("].")&&(G$v=G$v.replace(".","[0]."));var G$y,G$R,G$W=new G$j(G$q,G$r,G$v);G$W.exe(G$H);for(var G$O=G$v.replace(/\[.*?\]\./g,".");null!=(G$y=G$D._parseWatchData.exec(G$O));){for(var G$N=G$y[1];null!=(G$R=G$D._parseKeyWord.exec(G$N));){var G$x=G$R[0],G$K=G$H._watchMap[G$x]||(G$H._watchMap[G$x]=[]);G$K.push(G$W),G$D._sheet.I.notifer.on(G$x,G$H,G$H.changeData,[G$x])}(G$K=G$H._watchMap[G$N]||(G$H._watchMap[G$N]=[])).push(G$W),G$D._sheet.I.notifer.on(G$N,G$H,G$H.changeData,[G$N])}}}else if("var"===G$r&&G$H)G$H[G$v]=G$q;else if("onClick"==G$r){var G$T=G$g._runScript("(function(){"+G$v+"})");G$q.on("click",G$H,G$T)}else G$q[G$r]="true"===G$v||"false"!==G$v&&G$v},G$D.getCompInstance=function(G$q){var G$r,G$v=G$q.props?G$q.props.runtime:null;return G$r=G$v?G$D.viewClassMap[G$v]||G$D.uiClassMap[G$v]||G$g.__classmap[G$v]:G$D.uiClassMap[G$q.type],G$q.props&&G$q.props.hasOwnProperty("renderType")&&"instance"==G$q.props.renderType?G$r.instance:G$r?new G$r:null},G$D.regComponent=function(G$q,G$r){G$D.uiClassMap[G$q]=G$r,G$X.regClass(G$q,G$r)},G$D.regViewRuntime=function(G$q,G$r){G$D.viewClassMap[G$q]=G$r},G$D.uiMap={},G$D.viewClassMap={},G$D._sheet=null,G$H(G$D,["uiClassMap",function(){return this.uiClassMap={ViewStack:G$qq,LinkButton:G$o,TextArea:G$Nq,ColorPicker:G$c,Box:G$Y,Button:G$o,CheckBox:G$_,Clip:G$C,ComboBox:G$b,Component:G$s,HScrollBar:G$L,HSlider:G$w,Image:G$I,Label:G$t,List:G$l,Panel:G$i,ProgressBar:G$F,Radio:G$n,RadioGroup:G$Wq,ScrollBar:G$d,Slider:G$u,Tab:G$Oq,TextInput:G$vq,View:G$D,VScrollBar:G$rq,VSlider:G$Hq,Tree:G$k,HBox:G$yq,VBox:G$Rq,Sprite:G$p,Animation:G$v,Text:G$M,FontClip:G$S}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),G$D.__init$=function(){G$D._regs(),G$j=function(){function G$q(G$q,G$r,G$v){this.comp=null,this.prop=null,this.value=null,this.comp=G$q,this.prop=G$r,this.value=G$v}return G$y(G$q,""),G$q.prototype.exe=function(G$q){var G$r=G$G.getBindFun(this.value);this.comp[this.prop]=G$r.call(this,G$q)},G$q}()},G$D}()),G$_=function(G$q){function G$v(G$q,G$r){void 0===G$r&&(G$r=""),G$v.__super.call(this,G$q,G$r)}G$y(G$v,"laya.ui.CheckBox",G$q);var G$r=G$v.prototype;return G$r.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},G$r.initialize=function(){G$q.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},G$R(0,G$r,"dataSource",G$q.prototype._$get_dataSource,function(G$q){"boolean"==typeof(this._dataSource=G$q)?this.selected=G$q:"string"==typeof G$q?this.selected="true"===G$q:G$g.superSet(G$o,this,"dataSource",G$q)}),G$v}(G$o),G$f=function(G$q){function G$r(){this._space=0,this._align="none",this._itemChanged=!1,G$r.__super.call(this)}G$y(G$r,"laya.ui.LayoutBox",G$Y);var G$v=G$r.prototype;return G$v.addChild=function(G$q){return G$q.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,G$q)},G$v.onResize=function(G$q){this._setItemChanged()},G$v.addChildAt=function(G$q,G$r){return G$q.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,G$q,G$r)},G$v.removeChild=function(G$q){return G$q.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,G$q)},G$v.removeChildAt=function(G$q){return this.getChildAt(G$q).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,G$q)},G$v.refresh=function(){this._setItemChanged()},G$v.changeItems=function(){this._itemChanged=!1},G$v.sortItem=function(G$q){G$q&&G$q.sort(function(G$q,G$r){return G$q.y-G$r.y})},G$v._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},G$R(0,G$v,"space",function(){return this._space},function(G$q){this._space=G$q,this._setItemChanged()}),G$R(0,G$v,"align",function(){return this._align},function(G$q){this._align=G$q,this._setItemChanged()}),G$r}(),G$S=function(G$r){function G$v(G$q,G$r){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,G$v.__super.call(this),G$q&&(this.skin=G$q),G$r&&(this.sheet=G$r)}G$y(G$v,"laya.ui.FontClip",G$r);var G$q=G$v.prototype;return G$q.createChildren=function(){this._bitmap=new G$Q,this.on("loaded",this,this._onClipLoaded)},G$q._onClipLoaded=function(){this.callLater(this.changeValue)},G$q.changeValue=function(){var G$q;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),G$q=this._sources[0]))){var G$r="horizontal"===this._direction;G$r?(this._wordsW=this._valueArr.length*(G$q.sourceWidth+this.spaceX),this._wordsH=G$q.sourceHeight):(this._wordsW=G$q.sourceWidth,this._wordsH=(G$q.sourceHeight+this.spaceY)*this._valueArr.length);var G$v=0;if(this._width)switch(this._align){case"center":G$v=.5*(this._width-this._wordsW);break;case"right":G$v=this._width-this._wordsW;break;default:G$v=0}for(var G$H=0,G$A=this._valueArr.length;G$H<G$A;G$H++){var G$y=this._indexMap[this._valueArr.charAt(G$H)];this.sources[G$y]&&(G$q=this.sources[G$y],G$r?this.graphics.drawTexture(G$q,G$v+G$H*(G$q.sourceWidth+this.spaceX),0,G$q.sourceWidth,G$q.sourceHeight):this.graphics.drawTexture(G$q,0+G$v,G$H*(G$q.sourceHeight+this.spaceY),G$q.sourceWidth,G$q.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),G$r.prototype.destroy.call(this,G$q)},G$R(0,G$q,"sheet",function(){return this._sheet},function(G$q){G$q+="";var G$r=(this._sheet=G$q).split(" ");this._clipX=String(G$r[0]).length,this.clipY=G$r.length,this._indexMap={};for(var G$v=0;G$v<this._clipY;G$v++)for(var G$H=G$r[G$v].split(""),G$A=0,G$y=G$H.length;G$A<G$y;G$A++)this._indexMap[G$H[G$A]]=G$v*this._clipX+G$A}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$C,this,"height",G$q),this.callLater(this.changeValue)}),G$R(0,G$q,"direction",function(){return this._direction},function(G$q){this._direction=G$q,this.callLater(this.changeValue)}),G$R(0,G$q,"value",function(){return this._valueArr?this._valueArr:""},function(G$q){G$q+="",this._valueArr=G$q,this.callLater(this.changeValue)}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$C,this,"width",G$q),this.callLater(this.changeValue)}),G$R(0,G$q,"spaceX",function(){return this._spaceX},function(G$q){this._spaceX=G$q,"horizontal"===this._direction&&this.callLater(this.changeValue)}),G$R(0,G$q,"spaceY",function(){return this._spaceY},function(G$q){this._spaceY=G$q,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),G$R(0,G$q,"align",function(){return this._align},function(G$q){this._align=G$q,this.callLater(this.changeValue)}),G$R(0,G$q,"measureWidth",function(){return this._wordsW}),G$R(0,G$q,"measureHeight",function(){return this._wordsH}),G$v}(G$C),G$l=function(G$q){function G$r(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new G$D,G$r.__super.call(this)}G$y(G$r,"laya.ui.List",G$q);var G$v=G$r.prototype;return G$g.imps(G$v,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),G$v.destroy=function(G$q){void 0===G$q&&(G$q=!0),this._content&&this._content.destroy(G$q),this._scrollBar&&this._scrollBar.destroy(G$q),laya.ui.Component.prototype.destroy.call(this,G$q),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},G$v.createChildren=function(){this.addChild(this._content=new G$Y)},G$v.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=G$g.superGet(G$Y,this,"cacheAs")),G$g.superSet(G$Y,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},G$v.onScrollEnd=function(){G$g.superSet(G$Y,this,"cacheAs",this._$P.cacheAs)},G$v._removePreScrollBar=function(){var G$q=this.removeChildByName("scrollBar");G$q&&G$q.destroy(!0)},G$v.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var G$q=this._getOneCell(),G$r=G$q.width+this._spaceX||1,G$v=G$q.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/G$r):Math.ceil(this._width/G$r)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/G$v):Math.round(this._height/G$v));var G$H=this._width?this._width:G$r*this.repeatX-this._spaceX,G$A=this._height?this._height:G$v*this.repeatY-this._spaceY;this._cellSize=this._isVertical?G$v:G$r,this._cellOffset=this._isVertical?G$v*Math.max(this._repeatY2,this._repeatY)-G$A-this._spaceY:G$r*Math.max(this._repeatX2,this._repeatX)-G$H-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=G$A:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=G$H),this.setContentSize(G$H,G$A);var G$y=this._isVertical?this.repeatX:this.repeatY,G$R=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,G$y,G$R),this._createdLine=G$R,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},G$v._getOneCell=function(){if(0===this._cells.length){var G$q=this.createItem();if(this._offset.setTo(G$q.x,G$q.y),this.cacheContent)return G$q;this._cells.push(G$q)}return this._cells[0]},G$v._createItems=function(G$q,G$r,G$v){var G$H=this._content,G$A=this._getOneCell(),G$y=G$A.width+this._spaceX,G$R=G$A.height+this._spaceY;if(this.cacheContent){var G$W=new G$Y;G$W.cacheAsBitmap=!0,G$W.pos((this._isVertical?0:G$q)*G$y,(this._isVertical?G$q:0)*G$R),this._content.addChild(G$W),this._content.optimizeScrollRect=!0,G$H=G$W}else{for(var G$O=[],G$N=this._cells.length-1;-1<G$N;G$N--){var G$x=this._cells[G$N];G$x.removeSelf(),G$O.push(G$x)}this._cells.length=0}for(var G$K=G$q;G$K<G$v;G$K++)for(var G$T=0;G$T<G$r;G$T++)(G$A=G$O&&G$O.length?G$O.pop():this.createItem()).x=(this._isVertical?G$T:G$K)*G$y-G$H.x,G$A.y=(this._isVertical?G$K:G$T)*G$R-G$H.y,G$A.name="item"+(G$K*G$r+G$T),G$H.addChild(G$A),this.addCell(G$A)},G$v.createItem=function(){var G$q=[];if("function"==typeof this._itemRender)var G$r=new this._itemRender;else G$r=G$U.createComp(this._itemRender,null,null,G$q);if(0==G$q.length&&G$r._watchMap){var G$v=G$r._watchMap;for(var G$H in G$v)for(var G$A=G$v[G$H],G$y=0;G$y<G$A.length;G$y++){var G$R=G$A[G$y];G$q.push(G$R.comp,G$R.prop,G$R.value)}}return G$q.length&&(G$r._$bindData=G$q),G$r},G$v.addCell=function(G$q){G$q.on("click",this,this.onCellMouse),G$q.on("rightclick",this,this.onCellMouse),G$q.on("mouseover",this,this.onCellMouse),G$q.on("mouseout",this,this.onCellMouse),G$q.on("mousedown",this,this.onCellMouse),G$q.on("mouseup",this,this.onCellMouse),this._cells.push(G$q)},G$v.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var G$q=0,G$r=G$q=0;G$r<1e4;G$r++){var G$v=this.getChildByName("item"+G$r);if(!G$v)break;this.addCell(G$v),G$q++}this.repeatY=G$q}},G$v.setContentSize=function(G$q,G$r){this._content.width=G$q,this._content.height=G$r,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new G$m),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,G$q,G$r),this._content.scrollRect=this._content.scrollRect),this.event("resize")},G$v.onCellMouse=function(G$q){"mousedown"===G$q.type&&(this._isMoved=!1);var G$r=G$q.currentTarget,G$v=this._startIndex+this._cells.indexOf(G$r);G$v<0||("click"===G$q.type||"rightclick"===G$q.type?this.selectEnable&&!this._isMoved?this.selectedIndex=G$v:this.changeCellState(G$r,!0,0):"mouseover"!==G$q.type&&"mouseout"!==G$q.type||this._selectedIndex===G$v||this.changeCellState(G$r,"mouseover"===G$q.type,0),this.mouseHandler&&this.mouseHandler.runWith([G$q,G$v]))},G$v.changeCellState=function(G$q,G$r,G$v){var G$H=G$q.getChildByName("selectBox");G$H&&(this.selectEnable=!0,G$H.visible=G$r,G$H.index=G$v)},G$v.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},G$v.onScrollBarChange=function(G$q){this.runCallLater(this.changeCells);var G$r=this._scrollBar.value,G$v=this._isVertical?this.repeatX:this.repeatY,G$H=this._isVertical?this.repeatY:this.repeatX,G$A=Math.floor(G$r/this._cellSize);if(this.cacheContent)G$R=G$H+1,this._createdLine-G$A<G$R&&(this._createItems(this._createdLine,G$v,this._createdLine+G$R),this.renderItems(this._createdLine*G$v,0),this._createdLine+=G$R);else{var G$y=G$A*G$v,G$R=0;if(G$y>this._startIndex){G$R=G$y-this._startIndex;var G$W=!0,G$O=this._startIndex+G$v*(G$H+1);this._isMoved=!0}else G$y<this._startIndex&&(G$R=this._startIndex-G$y,G$W=!1,G$O=this._startIndex-1,this._isMoved=!0);for(var G$N=0;G$N<G$R;G$N++){if(G$W){var G$x=this._cells.shift();this._cells[this._cells.length]=G$x;var G$K=G$O+G$N}else G$x=this._cells.pop(),this._cells.unshift(G$x),G$K=G$O-G$N;var G$T=Math.floor(G$K/G$v)*this._cellSize;this._isVertical?G$x.y=G$T:G$x.x=G$T,this.renderItem(G$x,G$K)}this._startIndex=G$y,this.changeSelectStatus()}var G$j=this._content.scrollRect;this._isVertical?(G$j.y=G$r-this._offset.y,G$j.x=-this._offset.x):(G$j.y=-this._offset.y,G$j.x=G$r-this._offset.x),this._content.scrollRect=G$j},G$v.posCell=function(G$q,G$r){if(this._scrollBar){var G$v=this._isVertical?this.repeatX:this.repeatY,G$H=(this._isVertical?this.repeatY:this.repeatX,Math.floor(G$r/G$v)*this._cellSize);this._isVertical?G$q.y=G$H:G$q.x=G$H}},G$v.changeSelectStatus=function(){for(var G$q=0,G$r=this._cells.length;G$q<G$r;G$q++)this.changeCellState(this._cells[G$q],this._selectedIndex===this._startIndex+G$q,1)},G$v.renderItems=function(G$q,G$r){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0);for(var G$v=G$q,G$H=G$r||this._cells.length;G$v<G$H;G$v++)this.renderItem(this._cells[G$v],this._startIndex+G$v);this.changeSelectStatus(),this._twDone=!0},G$v.renderItem=function(G$q,G$r){this._array&&0<=G$r&&G$r<this._array.length?(G$q.visible=!0,G$q._$bindData?(G$q._dataSource=this._array[G$r],this._bindData(G$q,this._array[G$r])):G$q.dataSource=this._array[G$r],this.cacheContent||this.posCell(G$q,G$r),this.hasListener("render")&&this.event("render",[G$q,G$r]),this.renderHandler&&this.renderHandler.runWith([G$q,G$r]),this.renderTwHandler&&this.renderTwHandler.runWith([G$q,G$r])):(G$q.visible=!1,G$q.dataSource=null)},G$v._bindData=function(G$q,G$r){for(var G$v=G$q._$bindData,G$H=0,G$A=G$v.length;G$H<G$A;G$H++){var G$y=G$v[G$H++],G$R=G$v[G$H++],G$W=G$v[G$H],G$O=G$G.getBindFun(G$W);G$y[G$R]=G$O.call(this,G$r)}},G$v.refresh=function(){this.array=this._array},G$v.getItem=function(G$q){return-1<G$q&&G$q<this._array.length?this._array[G$q]:null},G$v.changeItem=function(G$q,G$r){-1<G$q&&G$q<this._array.length&&(this._array[G$q]=G$r,G$q>=this._startIndex&&G$q<this._startIndex+this._cells.length&&this.renderItem(this.getCell(G$q),G$q))},G$v.setItem=function(G$q,G$r){this.changeItem(G$q,G$r)},G$v.addItem=function(G$q){this._array.push(G$q),this.array=this._array},G$v.addItemAt=function(G$q,G$r){this._array.splice(G$r,0,G$q),this.array=this._array},G$v.deleteItem=function(G$q){this._array.splice(G$q,1),this.array=this._array},G$v.getCell=function(G$q){return this.runCallLater(this.changeCells),-1<G$q&&this._cells?this._cells[(G$q-this._startIndex)%this._cells.length]:null},G$v.scrollTo=function(G$q){if(this._scrollBar){var G$r=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(G$q/G$r)*this._cellSize}else this.startIndex=G$q},G$v.tweenTo=function(G$q,G$r,G$v){if(void 0===G$r&&(G$r=200),this._scrollBar){var G$H=this._isVertical?this.repeatX:this.repeatY;G$P.to(this._scrollBar,{value:Math.floor(G$q/G$H)*this._cellSize},G$r,null,G$v,0,!0)}else this.startIndex=G$q,G$v&&G$v.run()},G$v._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},G$v.commitMeasure=function(){this.runCallLater(this.changeCells)},G$R(0,G$v,"cacheAs",G$q.prototype._$get_cacheAs,function(G$q){G$g.superSet(G$Y,this,"cacheAs",G$q),this._scrollBar&&(this._$P.cacheAs=null,"none"!==G$q?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),G$R(0,G$v,"content",function(){return this._content}),G$R(0,G$v,"height",G$q.prototype._$get_height,function(G$q){G$q!=this._height&&(G$g.superSet(G$Y,this,"height",G$q),this._setCellChanged())}),G$R(0,G$v,"itemRender",function(){return this._itemRender},function(G$q){if(this._itemRender!=G$q){this._itemRender=G$q;for(var G$r=this._cells.length-1;-1<G$r;G$r--)this._cells[G$r].destroy();this._cells.length=0,this._setCellChanged()}}),G$R(0,G$v,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(G$q){this._removePreScrollBar();var G$r=new G$rq;G$r.name="scrollBar",G$r.right=0,G$q&&" "!=G$q&&(G$r.skin=G$q),this.scrollBar=G$r,this.addChild(G$r),this._setCellChanged()}),G$R(0,G$v,"page",function(){return this._page},function(G$q){this._page=G$q,this._array&&(this._page=0<G$q?G$q:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),G$R(0,G$v,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(G$q){this._removePreScrollBar();var G$r=new G$L;G$r.name="scrollBar",G$r.bottom=0,G$q&&" "!=G$q&&(G$r.skin=G$q),this.scrollBar=G$r,this.addChild(G$r),this._setCellChanged()}),G$R(0,G$v,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(G$q){this._repeatX=G$q,this._setCellChanged()}),G$R(0,G$v,"scrollBar",function(){return this._scrollBar},function(G$q){this._scrollBar!=G$q&&(this._scrollBar=G$q)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),G$R(0,G$v,"width",G$q.prototype._$get_width,function(G$q){G$q!=this._width&&(G$g.superSet(G$Y,this,"width",G$q),this._setCellChanged())}),G$R(0,G$v,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(G$q){this._repeatY=G$q,this._setCellChanged()}),G$R(0,G$v,"spaceX",function(){return this._spaceX},function(G$q){this._spaceX=G$q,this._setCellChanged()}),G$R(0,G$v,"spaceY",function(){return this._spaceY},function(G$q){this._spaceY=G$q,this._setCellChanged()}),G$R(0,G$v,"selectedIndex",function(){return this._selectedIndex},function(G$q){this._selectedIndex!=G$q&&(this._selectedIndex=G$q,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(G$q),this.startIndex=this._startIndex)}),G$R(0,G$v,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(G$q){this.selectedIndex=this._array.indexOf(G$q)}),G$R(0,G$v,"length",function(){return this._array?this._array.length:0}),G$R(0,G$v,"selection",function(){return this.getCell(this._selectedIndex)},function(G$q){this.selectedIndex=this._startIndex+this._cells.indexOf(G$q)}),G$R(0,G$v,"startIndex",function(){return this._startIndex},function(G$q){this._startIndex=0<G$q?G$q:0,this.callLater(this.renderItems)}),G$R(0,G$v,"twSwitch",function(){return this._twSwitch},function(G$q){this._twSwitch=G$q}),G$R(0,G$v,"twDone",function(){return this._twDone},function(G$q){this._twDone=G$q}),G$R(0,G$v,"array",function(){return this._array},function(G$q){this.runCallLater(this.changeCells),this._array=G$q||[];var G$r=this._array.length;if(this.totalPage=Math.ceil(G$r/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<G$r?this._selectedIndex:G$r-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var G$v=this._isVertical?this.repeatX:this.repeatY,G$H=this._isVertical?this.repeatY:this.repeatX,G$A=Math.ceil(G$r/G$v);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=G$H/G$A,this._scrollBar.setScroll(0,(G$A-G$H)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),G$R(0,G$v,"dataSource",G$q.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)&&Math.floor(G$q)==G$q||"string"==typeof G$q?this.selectedIndex=parseInt(G$q):G$q instanceof Array?this.array=G$q:G$g.superSet(G$Y,this,"dataSource",G$q)}),G$R(0,G$v,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),G$r}(G$Y),G$L=function(G$q){function G$r(){G$r.__super.call(this)}return G$y(G$r,"laya.ui.HScrollBar",G$q),G$r.prototype.initialize=function(){G$q.prototype.initialize.call(this),this.slider.isVertical=!1},G$r}(G$d),G$i=function(G$q){function G$r(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,G$r.__super.call(this),this.width=this.height=100}G$y(G$r,"laya.ui.Panel",G$q);var G$v=G$r.prototype;return G$v.destroy=function(G$q){void 0===G$q&&(G$q=!0),laya.ui.Component.prototype.destroy.call(this,G$q),this._content&&this._content.destroy(G$q),this._vScrollBar&&this._vScrollBar.destroy(G$q),this._hScrollBar&&this._hScrollBar.destroy(G$q),this._vScrollBar=null,this._hScrollBar=null,this._content=null},G$v.destroyChildren=function(){this._content.destroyChildren()},G$v.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new G$Y)},G$v.addChild=function(G$q){return G$q.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(G$q)},G$v.onResize=function(){this._setScrollChanged()},G$v.addChildAt=function(G$q,G$r){return G$q.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(G$q,G$r)},G$v.removeChild=function(G$q){return G$q.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(G$q)},G$v.removeChildAt=function(G$q){return this.getChildAt(G$q).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(G$q)},G$v.removeChildren=function(G$q,G$r){return void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=2147483647),this._content.removeChildren(G$q,G$r),this._setScrollChanged(),this},G$v.getChildAt=function(G$q){return this._content.getChildAt(G$q)},G$v.getChildByName=function(G$q){return this._content.getChildByName(G$q)},G$v.getChildIndex=function(G$q){return this._content.getChildIndex(G$q)},G$v.changeScroll=function(){this._scrollChanged=!1;var G$q=this.contentWidth||1,G$r=this.contentHeight||1,G$v=this._vScrollBar,G$H=this._hScrollBar,G$A=G$v&&G$r>this._height,G$y=G$H&&G$q>this._width,G$R=G$A?this._width-G$v.width:this._width,G$W=G$y?this._height-G$H.height:this._height;G$v&&(G$v.x=this._width-G$v.width,G$v.y=0,G$v.height=this._height-(G$y?G$H.height:0),G$v.scrollSize=Math.max(.033*this._height,1),G$v.thumbPercent=G$W/G$r,G$v.setScroll(0,G$r-G$W,G$v.value)),G$H&&(G$H.x=0,G$H.y=this._height-G$H.height,G$H.width=this._width-(G$A?G$v.width:0),G$H.scrollSize=Math.max(.033*this._width,1),G$H.thumbPercent=G$R/G$q,G$H.setScroll(0,G$q-G$R,G$H.value))},G$v.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},G$v.setContentSize=function(G$q,G$r){var G$v=this._content;G$v.width=G$q,G$v.height=G$r,G$v.scrollRect||(G$v.scrollRect=new G$m),G$v.scrollRect.setTo(0,0,G$q,G$r),G$v.scrollRect=G$v.scrollRect},G$v.onScrollBarChange=function(G$q){var G$r=this._content.scrollRect;if(G$r){var G$v=Math.round(G$q.value);G$q.isVertical?G$r.y=G$v:G$r.x=G$v,this._content.scrollRect=G$r}},G$v.scrollTo=function(G$q,G$r){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),this.vScrollBar&&(this.vScrollBar.value=G$r),this.hScrollBar&&(this.hScrollBar.value=G$q)},G$v.refresh=function(){this.changeScroll()},G$v.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=G$g.superGet(G$Y,this,"cacheAs")),G$g.superSet(G$Y,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},G$v.onScrollEnd=function(){G$g.superSet(G$Y,this,"cacheAs",this._$P.cacheAs)},G$v._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},G$R(0,G$v,"numChildren",function(){return this._content.numChildren}),G$R(0,G$v,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(G$q){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new G$L),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=G$q}),G$R(0,G$v,"contentWidth",function(){for(var G$q=0,G$r=this._content.numChildren-1;-1<G$r;G$r--){var G$v=this._content.getChildAt(G$r);G$q=Math.max(G$v.x+G$v.width*G$v.scaleX,G$q)}return G$q}),G$R(0,G$v,"contentHeight",function(){for(var G$q=0,G$r=this._content.numChildren-1;-1<G$r;G$r--){var G$v=this._content.getChildAt(G$r);G$q=Math.max(G$v.y+G$v.height*G$v.scaleY,G$q)}return G$q}),G$R(0,G$v,"width",G$q.prototype._$get_width,function(G$q){G$g.superSet(G$Y,this,"width",G$q),this._setScrollChanged()}),G$R(0,G$v,"hScrollBar",function(){return this._hScrollBar}),G$R(0,G$v,"content",function(){return this._content}),G$R(0,G$v,"height",G$q.prototype._$get_height,function(G$q){G$g.superSet(G$Y,this,"height",G$q),this._setScrollChanged()}),G$R(0,G$v,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(G$q){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new G$rq),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=G$q}),G$R(0,G$v,"vScrollBar",function(){return this._vScrollBar}),G$R(0,G$v,"cacheAs",G$q.prototype._$get_cacheAs,function(G$q){G$g.superSet(G$Y,this,"cacheAs",G$q),this._$P.cacheAs=null,"none"!==G$q?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),G$r}(G$Y),G$w=function(G$q){function G$r(G$q){G$r.__super.call(this,G$q),this.isVertical=!1}return G$y(G$r,"laya.ui.HSlider",G$u),G$r}(),G$h=function(G$q){function G$v(G$q,G$r){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,G$v.__super.call(this),this.skin=G$r,this.labels=G$q}G$y(G$v,"laya.ui.UIGroup",G$q);var G$r=G$v.prototype;return G$g.imps(G$r,{"laya.ui.IItem":!0}),G$r.preinitialize=function(){this.mouseEnabled=!0},G$r.destroy=function(G$q){void 0===G$q&&(G$q=!0),laya.ui.Component.prototype.destroy.call(this,G$q),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},G$r.addItem=function(G$q,G$r){void 0===G$r&&(G$r=!0);var G$v=G$q,G$H=this._items.length;if(G$v.name="item"+G$H,this.addChild(G$v),this.initItems(),G$r&&0<G$H){var G$A=this._items[G$H-1];"horizontal"==this._direction?G$v.x=G$A.x+G$A.width+this._space:G$v.y=G$A.y+G$A.height+this._space}else G$r&&(G$v.x=0,G$v.y=0);return G$H},G$r.delItem=function(G$q,G$r){void 0===G$r&&(G$r=!0);var G$v=this._items.indexOf(G$q);if(-1!=G$v){var G$H=G$q;this.removeChild(G$H);for(var G$A=G$v+1,G$y=this._items.length;G$A<G$y;G$A++){var G$R=this._items[G$A];G$R.name="item"+(G$A-1),G$r&&("horizontal"==this._direction?G$R.x-=G$H.width+this._space:G$R.y-=G$H.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var G$W;G$W=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=G$W}}},G$r.initItems=function(){this._items||(this._items=[]);for(var G$q=this._items.length=0;G$q<1e4;G$q++){var G$r=this.getChildByName("item"+G$q);if(null==G$r)break;this._items.push(G$r),G$r.selected=G$q===this._selectedIndex,G$r.clickHandler=G$T.create(this,this.itemClick,[G$q],!1)}},G$r.itemClick=function(G$q){this.selectedIndex=G$q},G$r.setSelect=function(G$q,G$r){this._items&&-1<G$q&&G$q<this._items.length&&(this._items[G$q].selected=G$r)},G$r.createItem=function(G$q,G$r){return null},G$r.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var G$q=0,G$r=0,G$v=this._items.length;G$r<G$v;G$r++){var G$H=this._items[G$r];this._skin&&(G$H.skin=this._skin),this._labelColors&&(G$H.labelColors=this._labelColors),this._labelSize&&(G$H.labelSize=this._labelSize),this._labelStroke&&(G$H.labelStroke=this._labelStroke),this._labelStrokeColor&&(G$H.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(G$H.strokeColors=this._strokeColors),this._labelBold&&(G$H.labelBold=this._labelBold),this._labelPadding&&(G$H.labelPadding=this._labelPadding),this._labelAlign&&(G$H.labelAlign=this._labelAlign),this._stateNum&&(G$H.stateNum=this._stateNum),this._labelFont&&(G$H.labelFont=this._labelFont),"horizontal"===this._direction?(G$H.y=0,G$H.x=G$q,G$q+=G$H.width+this._space):(G$H.x=0,G$H.y=G$q,G$q+=G$H.height+this._space)}this.changeSize()},G$r.commitMeasure=function(){this.runCallLater(this.changeLabels)},G$r._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},G$R(0,G$r,"labelStrokeColor",function(){return this._labelStrokeColor},function(G$q){this._labelStrokeColor!=G$q&&(this._labelStrokeColor=G$q,this._setLabelChanged())}),G$R(0,G$r,"skin",function(){return this._skin},function(G$q){this._skin!=G$q&&(this._skin=G$q,this._setLabelChanged())}),G$R(0,G$r,"selectedIndex",function(){return this._selectedIndex},function(G$q){this._selectedIndex!=G$q&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=G$q,this.setSelect(G$q,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),G$R(0,G$r,"labels",function(){return this._labels},function(G$q){if(this._labels!=G$q){if(this._labels=G$q,this.removeChildren(),this._setLabelChanged(),this._labels)for(var G$r=this._labels.split(","),G$v=0,G$H=G$r.length;G$v<G$H;G$v++){var G$A=this.createItem(this._skin,G$r[G$v]);G$A.name="item"+G$v,this.addChild(G$A)}this.initItems()}}),G$R(0,G$r,"strokeColors",function(){return this._strokeColors},function(G$q){this._strokeColors!=G$q&&(this._strokeColors=G$q,this._setLabelChanged())}),G$R(0,G$r,"labelColors",function(){return this._labelColors},function(G$q){this._labelColors!=G$q&&(this._labelColors=G$q,this._setLabelChanged())}),G$R(0,G$r,"labelStroke",function(){return this._labelStroke},function(G$q){this._labelStroke!=G$q&&(this._labelStroke=G$q,this._setLabelChanged())}),G$R(0,G$r,"labelSize",function(){return this._labelSize},function(G$q){this._labelSize!=G$q&&(this._labelSize=G$q,this._setLabelChanged())}),G$R(0,G$r,"stateNum",function(){return this._stateNum},function(G$q){this._stateNum!=G$q&&(this._stateNum=G$q,this._setLabelChanged())}),G$R(0,G$r,"labelBold",function(){return this._labelBold},function(G$q){this._labelBold!=G$q&&(this._labelBold=G$q,this._setLabelChanged())}),G$R(0,G$r,"labelFont",function(){return this._labelFont},function(G$q){this._labelFont!=G$q&&(this._labelFont=G$q,this._setLabelChanged())}),G$R(0,G$r,"labelPadding",function(){return this._labelPadding},function(G$q){this._labelPadding!=G$q&&(this._labelPadding=G$q,this._setLabelChanged())}),G$R(0,G$r,"direction",function(){return this._direction},function(G$q){this._direction=G$q,this._setLabelChanged()}),G$R(0,G$r,"space",function(){return this._space},function(G$q){this._space=G$q,this._setLabelChanged()}),G$R(0,G$r,"items",function(){return this._items}),G$R(0,G$r,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(G$q){this.selectedIndex=this._items.indexOf(G$q)}),G$R(0,G$r,"dataSource",G$q.prototype._$get_dataSource,function(G$q){"number"==typeof(this._dataSource=G$q)&&Math.floor(G$q)==G$q||"string"==typeof G$q?this.selectedIndex=parseInt(G$q):G$q instanceof Array?this.labels=G$q.join(","):G$g.superSet(G$Y,this,"dataSource",G$q)}),G$v}(G$Y),G$n=function(G$r){function G$v(G$q,G$r){this._value=null,void 0===G$r&&(G$r=""),G$v.__super.call(this,G$q,G$r)}G$y(G$v,"laya.ui.Radio",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._value=null},G$q.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},G$q.initialize=function(){G$r.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},G$q.onClick=function(G$q){this.selected=!0},G$R(0,G$q,"value",function(){return null!=this._value?this._value:this.label},function(G$q){this._value=G$q}),G$v}(G$o),G$k=function(G$q){function G$r(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,G$r.__super.call(this),this.width=this.height=200}G$y(G$r,"laya.ui.Tree",G$q);var G$v=G$r.prototype;return G$g.imps(G$v,{"laya.ui.IRender":!0}),G$v.destroy=function(G$q){void 0===G$q&&(G$q=!0),laya.ui.Component.prototype.destroy.call(this,G$q),this._list&&this._list.destroy(G$q),this._list=null,this._source=null,this._renderHandler=null},G$v.createChildren=function(){this.addChild(this._list=new G$l),this._list.renderHandler=G$T.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},G$v.onListChange=function(G$q){this.event("change")},G$v.getArray=function(){var G$q,G$r=[];for(var G$v in this._source)G$q=this._source[G$v],this.getParentOpenStatus(G$q)&&(G$q.x=this._spaceLeft*this.getDepth(G$q),G$r.push(G$q));return G$r},G$v.getDepth=function(G$q,G$r){return void 0===G$r&&(G$r=0),null==G$q.nodeParent?G$r:this.getDepth(G$q.nodeParent,G$r+1)},G$v.getParentOpenStatus=function(G$q){var G$r=G$q.nodeParent;return null==G$r||!!G$r.isOpen&&(null==G$r.nodeParent||this.getParentOpenStatus(G$r))},G$v.renderItem=function(G$q,G$r){var G$v=G$q.dataSource;if(G$v){G$q.left=G$v.x;var G$H=G$q.getChildByName("arrow");G$H&&(G$v.hasChild?(G$H.visible=!0,G$H.index=G$v.isOpen?1:0,G$H.tag=G$r,G$H.off("click",this,this.onArrowClick),G$H.on("click",this,this.onArrowClick)):G$H.visible=!1);var G$A=G$q.getChildByName("folder");G$A&&(2==G$A.clipY?G$A.index=G$v.isDirectory?0:1:G$A.index=G$v.isDirectory?G$v.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([G$q,G$r])}},G$v.onArrowClick=function(G$q){var G$r=G$q.currentTarget.tag;this._list.array[G$r].isOpen=!this._list.array[G$r].isOpen,this.event("open"),this._list.array=this.getArray()},G$v.setItemState=function(G$q,G$r){this._list.array[G$q]&&(this._list.array[G$q].isOpen=G$r,this._list.array=this.getArray())},G$v.fresh=function(){this._list.array=this.getArray(),this.repaint()},G$v.parseXml=function(G$q,G$r,G$v,G$H){var G$A,G$y=G$q.childNodes,G$R=G$y.length;if(!G$H){G$A={};var G$W,G$O=G$q.attributes;for(var G$N in G$O){var G$x=(G$W=G$O[G$N]).nodeName,G$K=G$W.nodeValue;G$A[G$x]="true"==G$K||"false"!=G$K&&G$K}G$A.nodeParent=G$v,0<G$R&&(G$A.isDirectory=!0),G$A.hasChild=0<G$R,G$r.push(G$A)}for(var G$T=0;G$T<G$R;G$T++){var G$j=G$y[G$T];this.parseXml(G$j,G$r,G$A,!1)}},G$v.parseOpenStatus=function(G$q,G$r){for(var G$v=0,G$H=G$r.length;G$v<G$H;G$v++){var G$A=G$r[G$v];if(G$A.isDirectory)for(var G$y=0,G$R=G$q.length;G$y<G$R;G$y++){var G$W=G$q[G$y];if(G$W.isDirectory&&this.isSameParent(G$W,G$A)&&G$A.label==G$W.label){G$A.isOpen=G$W.isOpen;break}}}},G$v.isSameParent=function(G$q,G$r){return null==G$q.nodeParent&&null==G$r.nodeParent||null!=G$q.nodeParent&&null!=G$r.nodeParent&&(G$q.nodeParent.label==G$r.nodeParent.label&&this.isSameParent(G$q.nodeParent,G$r.nodeParent))},G$v.filter=function(G$q){if(Boolean(G$q)){var G$r=[];this.getFilterSource(this._source,G$r,G$q),this._list.array=G$r}else this._list.array=this.getArray()},G$v.getFilterSource=function(G$q,G$r,G$v){var G$H;for(var G$A in G$v=G$v.toLocaleLowerCase(),G$q)!(G$H=G$q[G$A]).isDirectory&&-1<String(G$H.label).toLowerCase().indexOf(G$v)&&(G$H.x=0,G$r.push(G$H)),G$H.child&&0<G$H.child.length&&this.getFilterSource(G$H.child,G$r,G$v)},G$R(0,G$v,"spaceBottom",function(){return this._list.spaceY},function(G$q){this._list.spaceY=G$q}),G$R(0,G$v,"keepStatus",function(){return this._keepStatus},function(G$q){this._keepStatus=G$q}),G$R(0,G$v,"itemRender",function(){return this._list.itemRender},function(G$q){this._list.itemRender=G$q}),G$R(0,G$v,"array",function(){return this._list.array},function(G$q){this._keepStatus&&this._list.array&&G$q&&this.parseOpenStatus(this._list.array,G$q),this._source=G$q,this._list.array=this.getArray()}),G$R(0,G$v,"mouseHandler",function(){return this._list.mouseHandler},function(G$q){this._list.mouseHandler=G$q}),G$R(0,G$v,"dataSource",G$q.prototype._$get_dataSource,function(G$q){this._dataSource=G$q,G$g.superSet(G$Y,this,"dataSource",G$q)}),G$R(0,G$v,"source",function(){return this._source}),G$R(0,G$v,"scrollBar",function(){return this._list.scrollBar}),G$R(0,G$v,"list",function(){return this._list}),G$R(0,G$v,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(G$q){this._list.vScrollBarSkin=G$q}),G$R(0,G$v,"renderHandler",function(){return this._renderHandler},function(G$q){this._renderHandler=G$q}),G$R(0,G$v,"selectedIndex",function(){return this._list.selectedIndex},function(G$q){this._list.selectedIndex=G$q}),G$R(0,G$v,"spaceLeft",function(){return this._spaceLeft},function(G$q){this._spaceLeft=G$q}),G$R(0,G$v,"selectedItem",function(){return this._list.selectedItem},function(G$q){this._list.selectedItem=G$q}),G$R(0,G$v,"width",G$q.prototype._$get_width,function(G$q){G$g.superSet(G$Y,this,"width",G$q),this._list.width=G$q}),G$R(0,G$v,"height",G$q.prototype._$get_height,function(G$q){G$g.superSet(G$Y,this,"height",G$q),this._list.height=G$q}),G$R(0,G$v,"xml",null,function(G$q){var G$r=[];this.parseXml(G$q.childNodes[0],G$r,null,!0),this.array=G$r}),G$R(0,G$v,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),G$r}(G$Y),G$qq=function(G$q){function G$r(){this._items=null,this._selectedIndex=0,G$r.__super.call(this),this._setIndexHandler=G$T.create(this,this.setIndex,null,!1)}G$y(G$r,"laya.ui.ViewStack",G$q);var G$v=G$r.prototype;return G$g.imps(G$v,{"laya.ui.IItem":!0}),G$v.setItems=function(G$q){this.removeChildren();for(var G$r=0,G$v=0,G$H=G$q.length;G$v<G$H;G$v++){var G$A=G$q[G$v];G$A&&(G$A.name="item"+G$r,this.addChild(G$A),G$r++)}this.initItems()},G$v.addItem=function(G$q){G$q.name="item"+this._items.length,this.addChild(G$q),this.initItems()},G$v.initItems=function(){this._items=[];for(var G$q=0;G$q<1e4;G$q++){var G$r=this.getChildByName("item"+G$q);if(null==G$r)break;this._items.push(G$r),G$r.visible=G$q==this._selectedIndex}},G$v.setSelect=function(G$q,G$r){this._items&&-1<G$q&&G$q<this._items.length&&(this._items[G$q].visible=G$r)},G$v.setIndex=function(G$q){this.selectedIndex=G$q},G$R(0,G$v,"dataSource",G$q.prototype._$get_dataSource,function(G$q){if("number"==typeof(this._dataSource=G$q)&&Math.floor(G$q)==G$q||"string"==typeof G$q)this.selectedIndex=parseInt(G$q);else for(var G$r in this._dataSource)this.hasOwnProperty(G$r)&&(this[G$r]=this._dataSource[G$r])}),G$R(0,G$v,"selectedIndex",function(){return this._selectedIndex},function(G$q){this._selectedIndex!=G$q&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=G$q,this.setSelect(this._selectedIndex,!0))}),G$R(0,G$v,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(G$q){this.selectedIndex=this._items.indexOf(G$q)}),G$R(0,G$v,"items",function(){return this._items}),G$R(0,G$v,"setIndexHandler",function(){return this._setIndexHandler},function(G$q){this._setIndexHandler=G$q}),G$r}(G$Y),G$rq=function(G$q){function G$r(){G$r.__super.call(this)}return G$y(G$r,"laya.ui.VScrollBar",G$d),G$r}(),G$vq=function(G$r){function G$v(G$q){this._bg=null,this._skin=null,G$v.__super.call(this),void 0===G$q&&(G$q=""),this.text=G$q,this.skin=this.skin}G$y(G$v,"laya.ui.TextInput",G$r);var G$q=G$v.prototype;return G$q.preinitialize=function(){this.mouseEnabled=!0},G$q.destroy=function(G$q){G$B.clearCache(this,this._skin),void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._bg&&this._bg.destroy(),this._bg=null},G$q.createChildren=function(){this.addChild(this._tf=new G$j),this._tf.padding=G$$.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},G$q._onFocus=function(){this.event("focus",this)},G$q._onBlur=function(){this.event("blur",this)},G$q._onInput=function(){this.event("input",this)},G$q._onEnter=function(){this.event("enter",this)},G$q.initialize=function(){this.width=128,this.height=22},G$q.select=function(){this._tf.select()},G$q.setSelection=function(G$q,G$r){this._tf.setSelection(G$q,G$r)},G$R(0,G$q,"text",G$r.prototype._$get_text,function(G$q){this._tf.text!=G$q&&(G$q+="",this._tf.text=G$q,this.event("change"))}),G$R(0,G$q,"bg",function(){return this._bg},function(G$q){this.graphics=this._bg=G$q}),G$R(0,G$q,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(G$q){this._tf.inputElementYAdjuster=G$q}),G$R(0,G$q,"multiline",function(){return this._tf.multiline},function(G$q){this._tf.multiline=G$q}),G$R(0,G$q,"skin",function(){return this._skin},function(G$q){this._skin!=G$q&&(G$B.clearCache(this,this._skin),this._skin=G$q,this._bg||(this.graphics=this._bg=new G$Q),G$B.keepCache(this,this._skin),this._bg.source=G$B.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),G$R(0,G$q,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(G$q){this._bg||(this.graphics=this._bg=new G$Q),this._bg.sizeGrid=G$G.fillArray(G$$.defaultSizeGrid,G$q,Number)}),G$R(0,G$q,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(G$q){this._tf.inputElementXAdjuster=G$q}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$t,this,"width",G$q),this._bg&&(this._bg.width=G$q)}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$t,this,"height",G$q),this._bg&&(this._bg.height=G$q)}),G$R(0,G$q,"editable",function(){return this._tf.editable},function(G$q){this._tf.editable=G$q}),G$R(0,G$q,"restrict",function(){return this._tf.restrict},function(G$q){this._tf.restrict=G$q}),G$R(0,G$q,"prompt",function(){return this._tf.prompt},function(G$q){this._tf.prompt=G$q}),G$R(0,G$q,"promptColor",function(){return this._tf.promptColor},function(G$q){this._tf.promptColor=G$q}),G$R(0,G$q,"maxChars",function(){return this._tf.maxChars},function(G$q){this._tf.maxChars=G$q}),G$R(0,G$q,"focus",function(){return this._tf.focus},function(G$q){this._tf.focus=G$q}),G$R(0,G$q,"type",function(){return this._tf.type},function(G$q){this._tf.type=G$q}),G$R(0,G$q,"asPassword",function(){return this._tf.asPassword},function(G$q){this._tf.asPassword=G$q}),G$v}(G$t),G$Hq=function(G$q){function G$r(){G$r.__super.call(this)}return G$y(G$r,"laya.ui.VSlider",G$u),G$r}(),G$Aq=function(G$q){function G$H(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,G$H.__super.call(this)}G$y(G$H,"laya.ui.Dialog",G$q);var G$r=G$H.prototype;return G$r.initialize=function(){this.popupEffect=G$H.manager.popupEffectHandler,this.closeEffect=G$H.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},G$r._dealDragArea=function(){var G$q=this.getChildByName("drag");G$q&&(this.dragArea=G$q.x+","+G$q.y+","+G$q.width+","+G$q.height,G$q.removeSelf())},G$r._onClick=function(G$q){var G$r=G$q.target;if(G$r)switch(G$r.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(G$r.name)}},G$r.show=function(G$q,G$r){void 0===G$q&&(G$q=!1),void 0===G$r&&(G$r=!0),this._open(!1,G$q,G$r)},G$r.popup=function(G$q,G$r){void 0===G$q&&(G$q=!1),void 0===G$r&&(G$r=!0),this._open(!0,G$q,G$r)},G$r._open=function(G$q,G$r,G$v){G$H.manager.lock(!1),this.isModal=G$q,G$H.manager.open(this,G$r,G$v)},G$r.onOpened=function(){},G$r.close=function(G$q,G$r){void 0===G$r&&(G$r=!0),G$H.manager.close(this,G$q,G$r)},G$r.onClosed=function(G$q){},G$r._onMouseDown=function(G$q){var G$r=this.getMousePoint();this._dragArea.contains(G$r.x,G$r.y)?this.startDrag():this.stopDrag()},G$R(0,G$r,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(G$q){if(G$q){var G$r=G$G.fillArray([0,0,0,0],G$q,Number);this._dragArea=new G$m(G$r[0],G$r[1],G$r[2],G$r[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),G$R(0,G$r,"isPopup",function(){return null!=this.parent}),G$R(0,G$r,"zOrder",G$q.prototype._$get_zOrder,function(G$q){G$g.superSet(G$U,this,"zOrder",G$q),G$H.manager._checkMask()}),G$R(1,G$H,"manager",function(){return G$H._manager=G$H._manager||new G$Z},function(G$q){G$H._manager=G$q}),G$H.setLockView=function(G$q){G$H.manager.setLockView(G$q)},G$H.lock=function(G$q){G$H.manager.lock(G$q)},G$H.closeAll=function(){G$H.manager.closeAll()},G$H.getDialogsByGroup=function(G$q){return G$H.manager.getDialogsByGroup(G$q)},G$H.closeByGroup=function(G$q){return G$H.manager.closeByGroup(G$q)},G$H.CLOSE="close",G$H.CANCEL="cancel",G$H.SURE="sure",G$H.NO="no",G$H.OK="ok",G$H.YES="yes",G$H._manager=null,G$H}(G$U),G$yq=function(G$q){function G$r(){G$r.__super.call(this)}G$y(G$r,"laya.ui.HBox",G$q);var G$v=G$r.prototype;return G$v.sortItem=function(G$q){G$q&&G$q.sort(function(G$q,G$r){return G$q.x-G$r.x})},G$v.changeItems=function(){this._itemChanged=!1;for(var G$q=[],G$r=0,G$v=0,G$H=this.numChildren;G$v<G$H;G$v++){var G$A=this.getChildAt(G$v);G$A&&G$A.layoutEnabled&&(G$q.push(G$A),G$r=this._height?this._height:Math.max(G$r,G$A.height*G$A.scaleY))}this.sortItem(G$q);var G$y=0;for(G$v=0,G$H=G$q.length;G$v<G$H;G$v++)(G$A=G$q[G$v]).x=G$y,G$y+=G$A.width*G$A.scaleX+this._space,"top"==this._align?G$A.y=0:"middle"==this._align?G$A.y=.5*(G$r-G$A.height*G$A.scaleY):"bottom"==this._align&&(G$A.y=G$r-G$A.height*G$A.scaleY);this.changeSize()},G$R(0,G$v,"height",G$q.prototype._$get_height,function(G$q){this._height!=G$q&&(G$g.superSet(G$f,this,"height",G$q),this.callLater(this.changeItems))}),G$r.NONE="none",G$r.TOP="top",G$r.MIDDLE="middle",G$r.BOTTOM="bottom",G$r}(G$f),G$Rq=function(G$q){function G$r(){G$r.__super.call(this)}G$y(G$r,"laya.ui.VBox",G$q);var G$v=G$r.prototype;return G$v.changeItems=function(){this._itemChanged=!1;for(var G$q=[],G$r=0,G$v=0,G$H=this.numChildren;G$v<G$H;G$v++){var G$A=this.getChildAt(G$v);G$A&&G$A.layoutEnabled&&(G$q.push(G$A),G$r=this._width?this._width:Math.max(G$r,G$A.width*G$A.scaleX))}this.sortItem(G$q);var G$y=0;for(G$v=0,G$H=G$q.length;G$v<G$H;G$v++)(G$A=G$q[G$v]).y=G$y,G$y+=G$A.height*G$A.scaleY+this._space,"left"==this._align?G$A.x=0:"center"==this._align?G$A.x=.5*(G$r-G$A.width*G$A.scaleX):"right"==this._align&&(G$A.x=G$r-G$A.width*G$A.scaleX);this.changeSize()},G$R(0,G$v,"width",G$q.prototype._$get_width,function(G$q){this._width!=G$q&&(G$g.superSet(G$f,this,"width",G$q),this.callLater(this.changeItems))}),G$r.NONE="none",G$r.LEFT="left",G$r.CENTER="center",G$r.RIGHT="right",G$r}(G$f),G$Wq=function(G$q){function G$r(){G$r.__super.call(this)}return G$y(G$r,"laya.ui.RadioGroup",G$h),G$r.prototype.createItem=function(G$q,G$r){return new G$n(G$q,G$r)},G$r}(),G$Oq=function(G$q){function G$r(){G$r.__super.call(this)}return G$y(G$r,"laya.ui.Tab",G$h),G$r.prototype.createItem=function(G$q,G$r){return new G$o(G$q,G$r)},G$r}(),G$Nq=function(G$r){function G$v(G$q){this._vScrollBar=null,this._hScrollBar=null,void 0===G$q&&(G$q=""),G$v.__super.call(this,G$q)}G$y(G$v,"laya.ui.TextArea",G$r);var G$q=G$v.prototype;return G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},G$q.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},G$q.onVBarChanged=function(G$q){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},G$q.onHBarChanged=function(G$q){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},G$q.changeScroll=function(){var G$q=this._vScrollBar&&0<this._tf.maxScrollY,G$r=this._hScrollBar&&0<this._tf.maxScrollX,G$v=G$q?this._width-this._vScrollBar.width:this._width,G$H=G$r?this._height-this._hScrollBar.height:this._height,G$A=this._tf.padding||G$$.labelPadding;this._tf.width=G$v,this._tf.height=G$H,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-G$A[2],this._vScrollBar.y=G$A[1],this._vScrollBar.height=this._height-(G$r?this._hScrollBar.height:0)-G$A[1]-G$A[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=G$H/Math.max(this._tf.textHeight,G$H),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=G$q),this._hScrollBar&&(this._hScrollBar.x=G$A[0],this._hScrollBar.y=this._height-this._hScrollBar.height-G$A[3],this._hScrollBar.width=this._width-(G$q?this._vScrollBar.width:0)-G$A[0]-G$A[2],this._hScrollBar.scrollSize=Math.max(.033*G$v,1),this._hScrollBar.thumbPercent=G$v/Math.max(this._tf.textWidth,G$v),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=G$r)},G$q.scrollTo=function(G$q){this.commitMeasure(),this._tf.scrollY=G$q},G$R(0,G$q,"scrollY",function(){return this._tf.scrollY}),G$R(0,G$q,"width",G$r.prototype._$get_width,function(G$q){G$g.superSet(G$vq,this,"width",G$q),this.callLater(this.changeScroll)}),G$R(0,G$q,"hScrollBar",function(){return this._hScrollBar}),G$R(0,G$q,"height",G$r.prototype._$get_height,function(G$q){G$g.superSet(G$vq,this,"height",G$q),this.callLater(this.changeScroll)}),G$R(0,G$q,"maxScrollX",function(){return this._tf.maxScrollX}),G$R(0,G$q,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(G$q){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new G$rq),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=G$q}),G$R(0,G$q,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(G$q){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new G$L),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=G$q}),G$R(0,G$q,"vScrollBar",function(){return this._vScrollBar}),G$R(0,G$q,"maxScrollY",function(){return this._tf.maxScrollY}),G$R(0,G$q,"scrollX",function(){return this._tf.scrollX}),G$v}(G$vq);!function(G$q){function G$r(){this._uiView=null,this.isCloseOther=!1,G$r.__super.call(this)}G$y(G$r,"laya.ui.AsynDialog",G$Aq);var G$v=G$r.prototype;G$v.createView=function(G$q){this._uiView=G$q},G$v._open=function(G$q,G$r,G$v){this.isModal=G$q,this.isCloseOther=G$r,G$Aq.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},G$v.onCreated=function(){this.createUI(),this.onOpen()},G$v.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},G$v.onOpen=function(){G$Aq.manager.open(this,this.isCloseOther),G$Aq.manager.lock(!1)},G$v.close=function(G$q,G$r){void 0===G$r&&(G$r=!0),G$Aq.manager.close(this),this.onClose()},G$v.onClose=function(){},G$v.destroy=function(G$q){void 0===G$q&&(G$q=!0),laya.ui.View.prototype.destroy.call(this,G$q),this._uiView=null,this.onDestroy()},G$v.onDestroy=function(){}}();G$g.__init([G$U])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$q,G$r){"use strict";for(var G$v in Object.defineProperty(G$r,"__esModule",{value:!0}),Laya){var G$H=Laya[G$v];G$H&&G$H.__isclass&&(G$r[G$v]=G$H)}}),function(G$T,G$q,G$M){G$M.un,G$M.uns;var G$K=G$M.static,G$j=G$M.class,G$D=G$M.getset,G$H=G$M.__newvec,G$p=laya.maths.Arith,G$R=laya.webgl.atlas.AtlasResourceManager,G$v=laya.webgl.shader.BaseShader,G$s=laya.utils.Browser,G$W=laya.webgl.utils.Buffer,G$z=laya.utils.Byte,G$A=laya.utils.ClassUtils,G$O=G$M.Config,G$y=(laya.events.Event,laya.events.EventDispatcher),G$$=laya.utils.Handler,G$m=laya.net.Loader,G$r=laya.net.LoaderManager,G$N=(laya.maths.MathUtil,laya.display.Node),G$g=laya.renders.Render,G$x=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),G$X=laya.resource.Resource,G$B=laya.utils.RunDriver,G$e=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),G$P=laya.display.Sprite,G$V=laya.utils.Stat,G$a=laya.utils.StringKey,G$G=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),G$J=laya.utils.Utils,G$E=laya.webgl.WebGL,G$Q=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;G$M.interface("laya.d3.core.IClone"),G$M.interface("laya.d3.graphics.IVertex"),G$M.interface("laya.d3.core.render.IUpdate"),G$M.interface("laya.d3.core.scene.ITreeNode"),G$M.interface("laya.d3.core.render.IRenderable");(function(){function G$o(){}G$j(G$o,"laya.d3.animation.AnimationClipParser01"),G$o.READ_DATA=function(){G$o._DATA.offset=G$o._reader.getUint32(),G$o._DATA.size=G$o._reader.getUint32()},G$o.READ_BLOCK=function(){for(var G$q=G$o._BLOCK.count=G$o._reader.getUint16(),G$r=G$o._BLOCK.blockStarts=[],G$v=G$o._BLOCK.blockLengths=[],G$H=0;G$H<G$q;G$H++)G$r.push(G$o._reader.getUint32()),G$v.push(G$o._reader.getUint32())},G$o.READ_STRINGS=function(){var G$q=G$o._reader.getUint32(),G$r=G$o._reader.getUint16(),G$v=G$o._reader.pos;G$o._reader.pos=G$q+G$o._DATA.offset;for(var G$H=0;G$H<G$r;G$H++)G$o._strings[G$H]=G$o._reader.readUTFString();G$o._reader.pos=G$v},G$o.parse=function(G$q,G$r){G$o._animationClip=G$q;(G$o._reader=G$r).__getBuffer();G$o.READ_DATA(),G$o.READ_BLOCK(),G$o.READ_STRINGS();for(var G$v=0,G$H=G$o._BLOCK.count;G$v<G$H;G$v++){var G$A=G$r.getUint16(),G$y=G$o._strings[G$A],G$R=G$o["READ_"+G$y];if(null==G$R)throw new Error("model file err,no this function:"+G$A+" "+G$y);G$R.call()}},G$o.READ_ANIMATIONS=function(){var G$q,G$r=0,G$v=0,G$H=G$o._reader,G$A=G$H.__getBuffer(),G$y=[],G$R=G$H.getUint8();for(G$y.length=G$R,G$r=0;G$r<G$R;G$r++)G$y[G$r]=G$H.getUint16();var G$W=[],G$O=G$H.getUint16();for(G$W.length=G$O,G$r=0;G$r<G$O;G$r++)G$W[G$r]=G$H.getFloat32();var G$N=G$o._animationClip;G$N.name=G$o._strings[G$H.getUint16()];var G$x=G$N._duration=G$H.getFloat32();G$N.islooping=!!G$H.getByte(),G$N._frameRate=G$H.getInt16();var G$K=G$H.getInt16(),G$T=G$N._nodes=new Array;G$T.length=G$K,(G$N._publicClipDatas=[]).length=G$K;var G$j=G$N._nodesMap={},G$D=0,G$g=0;for(G$r=0;G$r<G$K;G$r++){G$q=G$T[G$r]=new G$F;var G$X=G$H.getUint16(),G$m=G$q.path=[];for(G$m.length=G$X,G$v=0;G$v<G$X;G$v++)G$m[G$v]=G$o._strings[G$H.getUint16()];var G$B=G$m.join("/"),G$e=G$j[G$B];G$e||(G$j[G$B]=G$e=[]),G$e.push(G$q);var G$p=G$H.getInt16();-1!==G$p&&(G$q.componentType=G$o._strings[G$p]);var G$M=G$I._propertyIndexDic[G$o._strings[G$H.getUint16()]];if(null==G$M)throw new Error("AnimationClipParser01:unknown property name.");var G$z=G$M<4,G$P=!G$z||G$z&&""===G$m[0];(G$q._cacheProperty=G$P)?G$D++:G$g++,G$q.propertyNameID=G$M;var G$V=G$y[G$H.getUint8()];G$q.keyFrameWidth=G$V/4;var G$a=G$q.keyFrames=[],G$J=G$a.length=G$H.getUint16(),G$$=null,G$G=NaN;for(G$v=0;G$v<G$J;G$v++){var G$E=G$a[G$v]=new G$t;G$G=G$E.startTime=G$W[G$H.getUint16()];var G$Q=G$H.pos;G$E.inTangent=new Float32Array(G$A.slice(G$Q,G$Q+G$V)),G$H.pos+=G$V,G$Q=G$H.pos,G$E.outTangent=new Float32Array(G$A.slice(G$Q,G$Q+G$V)),G$H.pos+=G$V,G$Q=G$H.pos,G$E.data=new Float32Array(G$A.slice(G$Q,G$Q+G$V)),G$H.pos+=G$V,G$$&&(G$$.next=G$E,G$$.duration=G$G-G$$.startTime),G$$=G$E}G$E.next=null,G$E.duration=G$x-G$G}var G$s=G$N._nodeToCachePropertyMap=new Int32Array(G$K),G$Z=G$N._cachePropertyMap=new Int32Array(G$D),G$Y=G$N._unCachePropertyMap=new Int32Array(G$g);for(G$D=G$g=0,G$r=0;G$r<G$K;G$r++)(G$q=G$T[G$r])._cacheProperty?(G$s[G$r]=G$D,G$Z[G$D++]=G$r):G$Y[G$g++]=G$r},G$o._animationClip=null,G$o._reader=null,G$o._strings=[],G$K(G$o,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function G$d(){}G$j(G$d,"laya.d3.animation.AnimationClipParser02"),G$d.READ_DATA=function(){G$d._DATA.offset=G$d._reader.getUint32(),G$d._DATA.size=G$d._reader.getUint32()},G$d.READ_BLOCK=function(){for(var G$q=G$d._BLOCK.count=G$d._reader.getUint16(),G$r=G$d._BLOCK.blockStarts=[],G$v=G$d._BLOCK.blockLengths=[],G$H=0;G$H<G$q;G$H++)G$r.push(G$d._reader.getUint32()),G$v.push(G$d._reader.getUint32())},G$d.READ_STRINGS=function(){var G$q=G$d._reader.getUint32(),G$r=G$d._reader.getUint16(),G$v=G$d._reader.pos;G$d._reader.pos=G$q+G$d._DATA.offset;for(var G$H=0;G$H<G$r;G$H++)G$d._strings[G$H]=G$d._reader.readUTFString();G$d._reader.pos=G$v},G$d.parse=function(G$q,G$r){G$d._animationClip=G$q;(G$d._reader=G$r).__getBuffer();G$d.READ_DATA(),G$d.READ_BLOCK(),G$d.READ_STRINGS();for(var G$v=0,G$H=G$d._BLOCK.count;G$v<G$H;G$v++){var G$A=G$r.getUint16(),G$y=G$d._strings[G$A],G$R=G$d["READ_"+G$y];if(null==G$R)throw new Error("model file err,no this function:"+G$A+" "+G$y);G$R.call()}},G$d.READ_ANIMATIONS=function(){var G$q,G$r=0,G$v=0,G$H=G$d._reader,G$A=G$H.__getBuffer(),G$y=[],G$R=G$H.getUint8();for(G$y.length=G$R,G$r=0;G$r<G$R;G$r++)G$y[G$r]=G$H.getUint16();var G$W=[],G$O=G$H.getUint16();for(G$W.length=G$O,G$r=0;G$r<G$O;G$r++)G$W[G$r]=G$H.getFloat32();var G$N=G$d._animationClip;G$N.name=G$d._strings[G$H.getUint16()];var G$x=G$N._duration=G$H.getFloat32();G$N.islooping=!!G$H.getByte(),G$N._frameRate=G$H.getInt16();var G$K=G$H.getInt16(),G$T=G$N._nodes=new Array;G$T.length=G$K,(G$N._publicClipDatas=[]).length=G$K;var G$j=G$N._nodesMap={},G$D=0,G$g=0;for(G$r=0;G$r<G$K;G$r++){G$q=G$T[G$r]=new G$F;var G$X=G$H.getUint16(),G$m=G$q.path=[];for(G$m.length=G$X,G$v=0;G$v<G$X;G$v++)G$m[G$v]=G$d._strings[G$H.getUint16()];var G$B=G$m.join("/"),G$e=G$j[G$B];G$e||(G$j[G$B]=G$e=[]),G$e.push(G$q);var G$p=G$H.getInt16();-1!==G$p&&(G$q.componentType=G$d._strings[G$p]);var G$M=G$I._propertyIndexDic[G$d._strings[G$H.getUint16()]];if(null==G$M)throw new Error("AnimationClipParser02:unknown property name.");var G$z=G$M<4,G$P=!G$z||G$z&&""===G$m[0];(G$q._cacheProperty=G$P)?G$D++:G$g++,G$q.propertyNameID=G$M;var G$V=G$y[G$H.getUint8()];G$q.keyFrameWidth=G$V/4;var G$a=G$q.keyFrames=[],G$J=G$a.length=G$H.getUint16(),G$$=null,G$G=NaN;for(G$v=0;G$v<G$J;G$v++){var G$E=G$a[G$v]=new G$t;G$G=G$E.startTime=G$W[G$H.getUint16()];var G$Q=G$H.pos;G$E.inTangent=new Float32Array(G$A.slice(G$Q,G$Q+G$V)),G$H.pos+=G$V,G$Q=G$H.pos,G$E.outTangent=new Float32Array(G$A.slice(G$Q,G$Q+G$V)),G$H.pos+=G$V,G$Q=G$H.pos,G$E.data=new Float32Array(G$A.slice(G$Q,G$Q+G$V)),G$H.pos+=G$V,G$$&&(G$$.next=G$E,G$$.duration=G$G-G$$.startTime),G$$=G$E}G$E.next=null,G$E.duration=G$x-G$G}var G$s=G$H.getUint16();for(G$r=0;G$r<G$s;G$r++){var G$Z,G$Y=new G$u;G$Y.time=G$H.getFloat32(),G$Y.eventName=G$d._strings[G$H.getUint16()];var G$o=G$H.getUint16();for(0<G$o&&(G$Y.params=G$Z=[]),G$v=0;G$v<G$o;G$v++){switch(G$H.getByte()){case 0:G$Z.push(!!G$H.getByte());break;case 1:G$Z.push(G$H.getInt32());break;case 2:G$Z.push(G$H.getFloat32());break;case 3:G$Z.push(G$d._strings[G$H.getUint16()]);break;default:throw new Error("unknown type.")}}G$N.addEvent(G$Y)}var G$C=G$N._nodeToCachePropertyMap=new Int32Array(G$K),G$c=G$N._cachePropertyMap=new Int32Array(G$D),G$b=G$N._unCachePropertyMap=new Int32Array(G$g);for(G$D=G$g=0,G$r=0;G$r<G$K;G$r++)(G$q=G$T[G$r])._cacheProperty?(G$C[G$r]=G$D,G$c[G$D++]=G$r):G$b[G$g++]=G$r},G$d._animationClip=null,G$d._reader=null,G$d._strings=[],G$K(G$d,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var G$u=function(){function G$q(){this.time=NaN,this.eventName=null,this.params=null}return G$j(G$q,"laya.d3.animation.AnimationEvent"),G$q}(),G$I=function(){function G$H(){this._childs=[],this.transform=new G$Br(this)}G$j(G$H,"laya.d3.animation.AnimationNode");var G$q=G$H.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.addChild=function(G$q){G$q._parent=this,G$q.transform.setParent(this.transform),this._childs.push(G$q)},G$q.removeChild=function(G$q){var G$r=this._childs.indexOf(G$q);-1!==G$r&&this._childs.splice(G$r,1)},G$q.getChildByName=function(G$q){for(var G$r=0,G$v=this._childs.length;G$r<G$v;G$r++){var G$H=this._childs[G$r];if(G$H.name===G$q)return G$H}return null},G$q.getChildByIndex=function(G$q){return this._childs[G$q]},G$q.getChildCount=function(){return this._childs.length},G$q.cloneTo=function(G$q){var G$r=G$q;G$r.name=this.name;for(var G$v=0,G$H=this._childs.length;G$v<G$H;G$v++){var G$A=this._childs[G$v],G$y=G$A.clone();G$r.addChild(G$y);var G$R=G$A.transform,G$W=G$y.transform;G$W.setLocalPosition(G$R.getLocalPosition()),G$W.setLocalRotation(G$R.getLocalRotation()),G$W.setLocalScale(G$R.getLocalScale()),G$W._localRotationEuler=G$R._localRotationEuler,G$W._setWorldMatrixIgnoreUpdate(G$R.getWorldMatrix())}},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$H.__init__=function(){G$H.registerAnimationNodeProperty("localPosition",G$H._getLocalPosition,G$H._setLocalPosition),G$H.registerAnimationNodeProperty("localRotation",G$H._getLocalRotation,G$H._setLocalRotation),G$H.registerAnimationNodeProperty("localScale",G$H._getLocalScale,G$H._setLocalScale),G$H.registerAnimationNodeProperty("localRotationEuler",G$H._getLocalRotationEuler,G$H._setLocalRotationEuler),G$H.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",G$H._getParticleRenderSharedMaterialTintColor,G$H._setParticleRenderSharedMaterialTintColor),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",G$H._getMeshRenderSharedMaterialTilingOffset,G$H._setMeshRenderSharedMaterialTilingOffset),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",G$H._getMeshRenderSharedMaterialAlbedo,G$H._setMeshRenderSharedMaterialAlbedo),G$H.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",G$H._getSkinnedMeshRenderSharedMaterialTilingOffset,G$H._setSkinnedMeshRenderSharedMaterialTilingOffset),G$H.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",G$H._getSkinnedMeshRenderSharedMaterialAlbedo,G$H._setSkinnedMeshRenderSharedMaterialAlbedo),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",G$H._getMeshRenderSharedMaterialAlbedo,G$H._setMeshRenderSharedMaterialAlbedo),G$H.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",G$H._getSkinnedMeshRenderSharedMaterialAlbedo,G$H._setSkinnedMeshRenderSharedMaterialAlbedo),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",G$H._getMeshRenderSharedMaterialIntensity,G$H._setMeshRenderSharedMaterialIntensity),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",G$H._getMeshRenderSharedMaterialAlpha,G$H._setMeshRenderSharedMaterialAlpha),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",G$H._getMeshRenderSharedMaterialAlphaColor,G$H._setMeshRenderSharedMaterialAlphaColor),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",G$H._getMeshRenderSharedMaterialBaseColor,G$H._setMeshRenderSharedMaterialBaseColor),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",G$H._getMeshRenderSharedMaterialDissolve,G$H._setMeshRenderSharedMaterialDissolve),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",G$H._getMeshRenderSharedMaterialDissolveSpeed,G$H._setMeshRenderSharedMaterialDissolveSpeed),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",G$H._getMeshRenderSharedMaterialMMultiplier,G$H._setMeshRenderSharedMaterialMMultiplier),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",G$H._getMeshRenderSharedMaterialBaseScrollSpeedX,G$H._setMeshRenderSharedMaterialBaseScrollSpeedX),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",G$H._getMeshRenderSharedMaterialBaseScrollSpeedY,G$H._setMeshRenderSharedMaterialBaseScrollSpeedY),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",G$H._getMeshRenderSharedMaterialSecondScrollSpeedX,G$H._setMeshRenderSharedMaterialSecondScrollSpeedX),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",G$H._getMeshRenderSharedMaterialSecondScrollSpeedY,G$H._setMeshRenderSharedMaterialSecondScrollSpeedY),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",G$H._getMeshRenderSharedMaterialDetailTilingOffset,G$H._setMeshRenderSharedMaterialDetailTilingOffset),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",G$H._getMeshRenderSharedMaterialDissolveTilingOffset,G$H._setMeshRenderSharedMaterialDissolveTilingOffset),G$H.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",G$H._getMeshRenderSharedMaterialMaskTilingOffset,G$H._setMeshRenderSharedMaterialMaskTilingOffset)},G$H.registerAnimationNodeProperty=function(G$q,G$r,G$v){if(G$H._propertyIndexDic[G$q])throw new Error("AnimationNode: this propertyName has registered.");G$H._propertyIndexDic[G$q]=G$H._propertyIDCounter,G$H._propertyGetFuncs[G$H._propertyIDCounter]=G$r,G$H._propertySetFuncs[G$H._propertyIDCounter]=G$v,G$H._propertyIDCounter++},G$H._getLocalPosition=function(G$q,G$r){return G$q?G$q.transform.getLocalPosition():G$r._transform.localPosition.elements},G$H._setLocalPosition=function(G$q,G$r,G$v){if(G$q)G$q.transform.setLocalPosition(G$v);else{var G$H=G$r._transform,G$A=G$H.localPosition;G$A.elements=G$v,G$H.localPosition=G$A}},G$H._getLocalRotation=function(G$q,G$r){return G$q?G$q.transform.getLocalRotation():G$r._transform.localRotation.elements},G$H._setLocalRotation=function(G$q,G$r,G$v){if(G$q)G$q.transform.setLocalRotation(G$v);else{var G$H=G$r._transform,G$A=G$H.localRotation;G$A.elements=G$v,G$H.localRotation=G$A}},G$H._getLocalScale=function(G$q,G$r){return G$q?G$q.transform.getLocalScale():G$r._transform.localScale.elements},G$H._setLocalScale=function(G$q,G$r,G$v){if(G$q)G$q.transform.setLocalScale(G$v);else{var G$H=G$r._transform,G$A=G$H.localScale;G$A.elements=G$v,G$H.localScale=G$A}},G$H._getLocalRotationEuler=function(G$q,G$r){return G$q?G$q.transform.getLocalRotationEuler():G$r._transform.localRotationEuler.elements},G$H._setLocalRotationEuler=function(G$q,G$r,G$v){if(G$q)G$q.transform.setLocalRotationEuler(G$v);else{var G$H=G$r._transform,G$A=G$H.localRotationEuler;G$A.elements=G$v,G$H.localRotationEuler=G$A}},G$H._getMeshRenderSharedMaterialTilingOffset=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return G$r.meshRender.sharedMaterial.tilingOffset.elements},G$H._setMeshRenderSharedMaterialTilingOffset=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.meshRender.material).tilingOffset).elements=G$v,G$H.tilingOffset=G$A)}else(G$A=(G$H=G$r.meshRender.material).tilingOffset).elements=G$v,G$H.tilingOffset=G$A},G$H._getMeshRenderSharedMaterialAlbedo=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.albedoColor.elements:null}return G$r.meshRender.sharedMaterial.albedoColor.elements},G$H._setMeshRenderSharedMaterialAlbedo=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.meshRender.material).albedoColor).elements=G$v,G$H.albedoColor=G$A)}else(G$A=(G$H=G$r.meshRender.material).albedoColor).elements=G$v,G$H.albedoColor=G$A},G$H._getSkinnedMeshRenderSharedMaterialTilingOffset=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return G$r.skinnedMeshRender.sharedMaterial.tilingOffset.elements},G$H._setSkinnedMeshRenderSharedMaterialTilingOffset=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.skinnedMeshRender.material).tilingOffset).elements=G$v,G$H.tilingOffset=G$A)}else(G$A=(G$H=G$r.skinnedMeshRender.material).tilingOffset).elements=G$v,G$H.tilingOffset=G$A},G$H._getSkinnedMeshRenderSharedMaterialAlbedo=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return G$r.skinnedMeshRender.sharedMaterial.albedoColor.elements},G$H._setSkinnedMeshRenderSharedMaterialAlbedo=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.skinnedMeshRender.material).albedoColor).elements=G$v,G$H.albedoColor=G$A)}else(G$A=(G$H=G$r.skinnedMeshRender.material).albedoColor).elements=G$v,G$H.albedoColor=G$A},G$H._getParticleRenderSharedMaterialTintColor=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.particleRender.sharedMaterial.tintColor.elements:null}return G$r.particleRender.sharedMaterial.tintColor.elements},G$H._setParticleRenderSharedMaterialTintColor=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.particleRender.material).tintColor).elements=G$v,G$H.tintColor=G$A)}else(G$A=(G$H=G$r.particleRender.material).tintColor).elements=G$v,G$H.tintColor=G$A},G$H._getMeshRenderSharedMaterialAlphaColor=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.alphaColor.elements:null}return G$r.meshRender.sharedMaterial.alphaColor.elements},G$H._setMeshRenderSharedMaterialAlphaColor=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.meshRender.material).alphaColor).elements=G$v,G$H.alphaColor=G$A)}else(G$A=(G$H=G$r.meshRender.material).alphaColor).elements=G$v,G$H.alphaColor=G$A},G$H._getMeshRenderSharedMaterialBaseColor=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.baseColor.elements:null}return G$r.meshRender.sharedMaterial.baseColor.elements},G$H._setMeshRenderSharedMaterialBaseColor=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.meshRender.material).baseColor).elements=G$v,G$H.baseColor=G$A)}else(G$A=(G$H=G$r.meshRender.material).baseColor).elements=G$v,G$H.baseColor=G$A},G$H._getMeshRenderSharedMaterialDissolve=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.dissolve:0}return G$r.meshRender.sharedMaterial.dissolve},G$H._setMeshRenderSharedMaterialDissolve=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.dissolve=G$v[0])}else G$r.meshRender.material.dissolve=G$v[0]},G$H._getMeshRenderSharedMaterialDissolveSpeed=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.dissolveSpeed:0}return G$r.meshRender.sharedMaterial.dissolveSpeed},G$H._setMeshRenderSharedMaterialDissolveSpeed=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.dissolveSpeed=G$v[0])}else G$r.meshRender.material.dissolveSpeed=G$v[0]},G$H._getMeshRenderSharedMaterialMMultiplier=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.mMultiplier:0}return G$r.meshRender.sharedMaterial.mMultiplier},G$H._setMeshRenderSharedMaterialMMultiplier=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.mMultiplier=G$v[0])}else G$r.meshRender.material.mMultiplier=G$v[0]},G$H._getMeshRenderSharedMaterialBaseScrollSpeedX=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return G$r.meshRender.sharedMaterial.baseScrollSpeedX},G$H._setMeshRenderSharedMaterialBaseScrollSpeedX=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.baseScrollSpeedX=G$v[0])}else G$r.meshRender.material.baseScrollSpeedX=G$v[0]},G$H._getMeshRenderSharedMaterialBaseScrollSpeedY=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return G$r.meshRender.sharedMaterial.baseScrollSpeedY},G$H._setMeshRenderSharedMaterialBaseScrollSpeedY=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.baseScrollSpeedY=G$v[0])}else G$r.meshRender.material.baseScrollSpeedY=G$v[0]},G$H._getMeshRenderSharedMaterialSecondScrollSpeedX=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return G$r.meshRender.sharedMaterial.secondScrollSpeedX},G$H._setMeshRenderSharedMaterialSecondScrollSpeedX=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.secondScrollSpeedX=G$v[0])}else G$r.meshRender.material.secondScrollSpeedX=G$v[0]},G$H._getMeshRenderSharedMaterialSecondScrollSpeedY=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return G$r.meshRender.sharedMaterial.secondScrollSpeedY},G$H._setMeshRenderSharedMaterialSecondScrollSpeedY=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.secondScrollSpeedY=G$v[0])}else G$r.meshRender.material.secondScrollSpeedY=G$v[0]},G$H._getMeshRenderSharedMaterialAlpha=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.alpha:0}return G$r.meshRender.sharedMaterial.alpha},G$H._setMeshRenderSharedMaterialAlpha=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.alpha=G$v[0])}else G$r.meshRender.material.alpha=G$v[0]},G$H._getMeshRenderSharedMaterialIntensity=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.intensity:0}return G$r.meshRender.sharedMaterial.intensity},G$H._setMeshRenderSharedMaterialIntensity=function(G$q,G$r,G$v){if(G$q){var G$H=G$q.transform._entity;G$H&&(G$H.owner.meshRender.material.intensity=G$v[0])}else G$r.meshRender.material.intensity=G$v[0]},G$H._getMeshRenderSharedMaterialDetailTilingOffset=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return G$r.meshRender.sharedMaterial.detailTilingOffset.elements},G$H._setMeshRenderSharedMaterialDetailTilingOffset=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.meshRender.material).detailTilingOffset).elements=G$v,G$H.detailTilingOffset=G$A)}else(G$A=(G$H=G$r.meshRender.material).detailTilingOffset).elements=G$v,G$H.detailTilingOffset=G$A},G$H._getMeshRenderSharedMaterialDissolveTilingOffset=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return G$r.meshRender.sharedMaterial.dissolveTilingOffset.elements},G$H._setMeshRenderSharedMaterialDissolveTilingOffset=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.meshRender.material).dissolveTilingOffset).elements=G$v,G$H.dissolveTilingOffset=G$A)}else(G$A=(G$H=G$r.meshRender.material).dissolveTilingOffset).elements=G$v,G$H.dissolveTilingOffset=G$A},G$H._getMeshRenderSharedMaterialMaskTilingOffset=function(G$q,G$r){if(G$q){var G$v=G$q.transform._entity;return G$v?G$v.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return G$r.meshRender.sharedMaterial.maskTilingOffset.elements},G$H._setMeshRenderSharedMaterialMaskTilingOffset=function(G$q,G$r,G$v){var G$H,G$A;if(G$q){var G$y=G$q.transform._entity;G$y&&((G$A=(G$H=G$y.owner.meshRender.material).maskTilingOffset).elements=G$v,G$H.maskTilingOffset=G$A)}else(G$A=(G$H=G$r.meshRender.material).maskTilingOffset).elements=G$v,G$H.maskTilingOffset=G$A},G$H._propertyIDCounter=0,G$H._propertyIndexDic={},G$H._propertySetFuncs=[],G$H._propertyGetFuncs=[],G$H}(),G$t=function(){function G$q(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return G$j(G$q,"laya.d3.animation.Keyframe"),G$q}(),G$F=function(){function G$q(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return G$j(G$q,"laya.d3.animation.KeyframeNode"),G$q}(),G$Z=(function(){function G$q(){this._tempVector30=new G$Rr,this._tempVector31=new G$Rr,this._tempVector32=new G$Rr,this._a=new G$Rr,this._b=new G$Rr,this._c=new G$Rr,this._d=new G$Rr}G$j(G$q,"laya.d3.core.glitter.SplineCurvePositionVelocity");var G$r=G$q.prototype;G$r.Init=function(G$q,G$r,G$v,G$H){G$q.cloneTo(this._d),G$r.cloneTo(this._c),G$Rr.scale(G$q,2,this._a),G$Rr.scale(G$v,2,this._tempVector30),G$Rr.subtract(this._a,this._tempVector30,this._a),G$Rr.add(this._a,G$r,this._a),G$Rr.add(this._a,G$H,this._a),G$Rr.scale(G$v,3,this._b),G$Rr.scale(G$q,3,this._tempVector30),G$Rr.subtract(this._b,this._tempVector30,this._b),G$Rr.subtract(this._b,G$H,this._b),G$Rr.scale(G$r,2,this._tempVector30),G$Rr.subtract(this._b,this._tempVector30,this._b)},G$r.Slerp=function(G$q,G$r){G$Rr.scale(this._a,G$q*G$q*G$q,this._tempVector30),G$Rr.scale(this._b,G$q*G$q,this._tempVector31),G$Rr.scale(this._c,G$q,this._tempVector32),G$Rr.add(this._tempVector30,this._tempVector31,G$r),G$Rr.add(G$r,this._tempVector32,G$r),G$Rr.add(G$r,this._d,G$r)}}(),function(){function G$c(G$q,G$r,G$v,G$H){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=G$q,this._h=G$r,this._minHeight=G$v,this._maxHeight=G$H}G$j(G$c,"laya.d3.core.HeightMap");var G$q=G$c.prototype;G$q._inBounds=function(G$q,G$r){return 0<=G$q&&G$q<this._h&&0<=G$r&&G$r<this._w},G$q.getHeight=function(G$q,G$r){return this._inBounds(G$q,G$r)?this._datas[G$q][G$r]:NaN},G$D(0,G$q,"width",function(){return this._w}),G$D(0,G$q,"height",function(){return this._h}),G$D(0,G$q,"maxHeight",function(){return this._maxHeight}),G$D(0,G$q,"minHeight",function(){return this._minHeight}),G$c.creatFromMesh=function(G$q,G$r,G$v,G$H){for(var G$A=[],G$y=[],G$R=G$q.getSubMeshCount(),G$W=0;G$W<G$R;G$W++){for(var G$O=G$q.getSubMesh(G$W),G$N=G$O._getVertexBuffer(),G$x=G$N.getData(),G$K=[],G$T=0;G$T<G$x.length;G$T+=G$N.vertexDeclaration.vertexStride/4){var G$j=new G$Rr(G$x[G$T+0],G$x[G$T+1],G$x[G$T+2]);G$K.push(G$j)}G$A.push(G$K);var G$D=G$O._getIndexBuffer();G$y.push(G$D.getData())}var G$g=G$q.boundingBox,G$X=G$g.min.x,G$m=G$g.min.z,G$B=G$g.max.x,G$e=G$g.max.z,G$p=G$g.min.y,G$M=G$g.max.y,G$z=G$B-G$X,G$P=G$e-G$m,G$V=G$H.elements[0]=G$z/(G$r-1),G$a=G$H.elements[1]=G$P/(G$v-1),G$J=new G$c(G$r,G$v,G$p,G$M),G$$=G$c._tempRay,G$G=G$$.direction.elements;G$G[0]=0,G$G[1]=-1,G$G[2]=0;var G$E=G$M+.1;G$$.origin.elements[1]=G$E;for(var G$Q=0;G$Q<G$v;G$Q++){var G$s=G$m+G$Q*G$a;G$J._datas[G$Q]=[];for(var G$Z=0;G$Z<G$r;G$Z++){var G$Y=G$X+G$Z*G$V,G$o=G$$.origin.elements;G$o[0]=G$Y,G$o[2]=G$s;var G$C=G$c._getPosition(G$$,G$A,G$y);G$J._datas[G$Q][G$Z]=G$C===Number.MAX_VALUE?NaN:G$E-G$C}}return G$J},G$c.createFromImage=function(G$q,G$r,G$v){for(var G$H=G$q.width,G$A=G$q.height,G$y=new G$c(G$H,G$A,G$r,G$v),G$R=(G$v-G$r)/254,G$W=G$q.getPixels(),G$O=0,G$N=0;G$N<G$A;G$N++)for(var G$x=G$y._datas[G$N]=[],G$K=0;G$K<G$H;G$K++){var G$T=G$W[G$O++],G$j=G$W[G$O++],G$D=G$W[G$O++],G$g=G$W[G$O++];G$x[G$K]=255==G$T&&255==G$j&&255==G$D&&255==G$g?NaN:(G$T+G$j+G$D)/3*G$R+G$r}return G$y},G$c._getPosition=function(G$q,G$r,G$v){for(var G$H=Number.MAX_VALUE,G$A=0;G$A<G$r.length;G$A++)for(var G$y=G$r[G$A],G$R=G$v[G$A],G$W=0;G$W<G$R.length;G$W+=3){var G$O=G$y[G$R[G$W+0]],G$N=G$y[G$R[G$W+1]],G$x=G$y[G$R[G$W+2]],G$K=G$Dr.rayIntersectsTriangle(G$q,G$O,G$N,G$x);!isNaN(G$K)&&G$K<G$H&&(G$H=G$K)}return G$H},G$K(G$c,["_tempRay",function(){return this._tempRay=new G$Ar(new G$Rr,new G$Rr)}])}(),function(){function G$A(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}G$j(G$A,"laya.d3.core.Layer");var G$q=G$A.prototype;return G$q._binarySearchIndex=function(){for(var G$q=0,G$r=G$A._collsionTestList.length-1,G$v=0;G$q<=G$r;){G$v=Math.floor((G$q+G$r)/2);var G$H=G$A._collsionTestList[G$v];if(G$H==this._number)return G$v;G$H>this._number?G$r=G$v-1:G$q=G$v+1}return G$q},G$q._addCollider=function(G$q){0===this._colliders.length&&G$A._collsionTestList.splice(this._binarySearchIndex(),0,this._number),G$q._isRigidbody?(this._colliders.unshift(G$q),this._nonRigidbodyOffset++):this._colliders.push(G$q)},G$q._removeCollider=function(G$q){var G$r=this._colliders.indexOf(G$q);G$r<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(G$r,1),0===this._colliders.length&&G$A._collsionTestList.splice(G$A._collsionTestList.indexOf(this._number),1)},G$D(0,G$q,"number",function(){return this._number}),G$D(0,G$q,"visible",function(){return this._visible},function(G$q){this._visible=G$q,G$A._visibleLayers=G$q?G$A._visibleLayers|this.mask:G$A._visibleLayers&~this.mask}),G$D(0,G$q,"mask",function(){return this._mask}),G$D(1,G$A,"visibleLayers",function(){return G$A._visibleLayers},function(G$q){G$A._visibleLayers=G$q;for(var G$r=0,G$v=G$A._layerList.length;G$r<G$v;G$r++){var G$H=G$A._layerList[G$r];G$H._visible=0!=(G$H._mask&G$A._visibleLayers)}}),G$A.__init__=function(){G$A._layerList.length=31;for(var G$q=0;G$q<31;G$q++){var G$r=new G$A;G$A._layerList[G$q]=G$r,0===G$q?(G$r.name="Default Layer",G$r.visible=!0):(G$r.name="Layer-"+G$q,G$r.visible=!1),G$r._number=G$q,G$r._mask=Math.pow(2,G$q)}G$A.currentCreationLayer=G$A._layerList[0]},G$A.getLayerByNumber=function(G$q){if(G$q<0||30<G$q)throw new Error("无法返回指定Layer，该number超出范围！");return G$A._layerList[G$q]},G$A.getLayerByName=function(G$q){for(var G$r=0;G$r<31;G$r++)if(G$A._layerList[G$r].name===G$q)return G$A._layerList[G$r];throw new Error("无法返回指定Layer,该name不存在")},G$A.isVisible=function(G$q){return 0!=(G$q&G$A._currentCameraCullingMask&G$A._visibleLayers)},G$A._layerList=[],G$A._visibleLayers=2147483647,G$A._collsionTestList=[],G$A._currentCameraCullingMask=2147483647,G$A.maxCount=31,G$A.currentCreationLayer=null,G$A}()),G$Y=(function(){function G$q(G$q,G$r,G$v){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=G$q,this._minCount=G$r,this._maxCount=G$v}G$j(G$q,"laya.d3.core.particleShuriKen.module.Burst");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.cloneTo=function(G$q){var G$r=G$q;G$r._time=this._time,G$r._minCount=this._minCount,G$r._maxCount=this._maxCount},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"time",function(){return this._time}),G$D(0,G$r,"minCount",function(){return this._minCount}),G$D(0,G$r,"maxCount",function(){return this._maxCount})}(),function(){function G$q(G$q){this._color=null,this.enbale=!1,this._color=G$q}G$j(G$q,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var G$r=G$q.prototype;G$r.cloneTo=function(G$q){var G$r=G$q;this._color.cloneTo(G$r._color),G$r.enbale=this.enbale},G$r.clone=function(){var G$q;switch(this._color.type){case 0:G$q=G$C.createByConstant(this._color.constant.clone());break;case 1:G$q=G$C.createByGradient(this._color.gradient.clone());break;case 2:G$q=G$C.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:G$q=G$C.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var G$r=new this.constructor(G$q);return G$r.enbale=this.enbale,G$r},G$D(0,G$r,"color",function(){return this._color})}(),function(){function G$q(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}G$j(G$q,"laya.d3.core.particleShuriKen.module.Emission");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),G$r._destroy=function(){this._bursts=null,this._destroyed=!0},G$r.getBurstsCount=function(){return this._bursts.length},G$r.getBurstByIndex=function(G$q){return this._bursts[G$q]},G$r.addBurst=function(G$q){var G$r=this._bursts.length;if(0<G$r)for(var G$v=0;G$v<G$r;G$v++)this._bursts[G$v].time>G$q.time&&this._bursts.splice(G$v,0,G$q);this._bursts.push(G$q)},G$r.removeBurst=function(G$q){var G$r=this._bursts.indexOf(G$q);-1!==G$r&&this._bursts.splice(G$r,1)},G$r.removeBurstByIndex=function(G$q){this._bursts.splice(G$q,1)},G$r.clearBurst=function(){this._bursts.length=0},G$r.cloneTo=function(G$q){var G$r=G$q,G$v=G$r._bursts;G$v.length=this._bursts.length;for(var G$H=0,G$A=this._bursts.length;G$H<G$A;G$H++){var G$y=G$v[G$H];G$y?this._bursts[G$H].cloneTo(G$y):G$v[G$H]=this._bursts[G$H].clone()}G$r._emissionRate=this._emissionRate,G$r.enbale=this.enbale},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"destroyed",function(){return this._destroyed}),G$D(0,G$r,"emissionRate",function(){return this._emissionRate},function(G$q){if(G$q<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=G$q})}(),function(){function G$H(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}G$j(G$H,"laya.d3.core.particleShuriKen.module.FrameOverTime");var G$q=G$H.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.cloneTo=function(G$q){var G$r=G$q;G$r._type=this._type,G$r._constant=this._constant,this._overTime.cloneTo(G$r._overTime),G$r._constantMin=this._constantMin,G$r._constantMax=this._constantMax,this._overTimeMin.cloneTo(G$r._overTimeMin),this._overTimeMax.cloneTo(G$r._overTimeMax)},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$q,"frameOverTimeData",function(){return this._overTime}),G$D(0,G$q,"constant",function(){return this._constant}),G$D(0,G$q,"type",function(){return this._type}),G$D(0,G$q,"frameOverTimeDataMin",function(){return this._overTimeMin}),G$D(0,G$q,"constantMin",function(){return this._constantMin}),G$D(0,G$q,"frameOverTimeDataMax",function(){return this._overTimeMax}),G$D(0,G$q,"constantMax",function(){return this._constantMax}),G$H.createByConstant=function(G$q){var G$r=new G$H;return G$r._type=0,G$r._constant=G$q,G$r},G$H.createByOverTime=function(G$q){var G$r=new G$H;return G$r._type=1,G$r._overTime=G$q,G$r},G$H.createByRandomTwoConstant=function(G$q,G$r){var G$v=new G$H;return G$v._type=2,G$v._constantMin=G$q,G$v._constantMax=G$r,G$v},G$H.createByRandomTwoOverTime=function(G$q,G$r){var G$v=new G$H;return G$v._type=3,G$v._overTimeMin=G$q,G$v._overTimeMax=G$r,G$v},G$H}()),G$o=function(){function G$N(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}G$j(G$N,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var G$q=G$N.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.cloneTo=function(G$q){var G$r=G$q;G$r._type=this._type,G$r._separateAxes=this._separateAxes,G$r._constant=this._constant,this._constantSeparate.cloneTo(G$r._constantSeparate),this._gradient.cloneTo(G$r._gradient),this._gradientX.cloneTo(G$r._gradientX),this._gradientY.cloneTo(G$r._gradientY),this._gradientZ.cloneTo(G$r._gradientZ),G$r._constantMin=this._constantMin,G$r._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(G$r._constantMinSeparate),this._constantMaxSeparate.cloneTo(G$r._constantMaxSeparate),this._gradientMin.cloneTo(G$r._gradientMin),this._gradientMax.cloneTo(G$r._gradientMax),this._gradientXMin.cloneTo(G$r._gradientXMin),this._gradientXMax.cloneTo(G$r._gradientXMax),this._gradientYMin.cloneTo(G$r._gradientYMin),this._gradientYMax.cloneTo(G$r._gradientYMax),this._gradientZMin.cloneTo(G$r._gradientZMin),this._gradientZMax.cloneTo(G$r._gradientZMax)},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$q,"gradientZ",function(){return this._gradientZ}),G$D(0,G$q,"constant",function(){return this._constant}),G$D(0,G$q,"gradient",function(){return this._gradient}),G$D(0,G$q,"separateAxes",function(){return this._separateAxes}),G$D(0,G$q,"type",function(){return this._type}),G$D(0,G$q,"constantSeparate",function(){return this._constantSeparate}),G$D(0,G$q,"gradientX",function(){return this._gradientX}),G$D(0,G$q,"gradientY",function(){return this._gradientY}),G$D(0,G$q,"gradientW",function(){return this._gradientW}),G$D(0,G$q,"gradientMin",function(){return this._gradientMin}),G$D(0,G$q,"constantMin",function(){return this._constantMin}),G$D(0,G$q,"gradientMax",function(){return this._gradientMax}),G$D(0,G$q,"constantMax",function(){return this._constantMax}),G$D(0,G$q,"gradientWMin",function(){return this._gradientWMin}),G$D(0,G$q,"constantMinSeparate",function(){return this._constantMinSeparate}),G$D(0,G$q,"constantMaxSeparate",function(){return this._constantMaxSeparate}),G$D(0,G$q,"gradientXMin",function(){return this._gradientXMin}),G$D(0,G$q,"gradientXMax",function(){return this._gradientXMax}),G$D(0,G$q,"gradientWMax",function(){return this._gradientWMax}),G$D(0,G$q,"gradientYMin",function(){return this._gradientYMin}),G$D(0,G$q,"gradientYMax",function(){return this._gradientYMax}),G$D(0,G$q,"gradientZMin",function(){return this._gradientZMin}),G$D(0,G$q,"gradientZMax",function(){return this._gradientZMax}),G$N.createByConstant=function(G$q){var G$r=new G$N;return G$r._type=0,G$r._separateAxes=!1,G$r._constant=G$q,G$r},G$N.createByConstantSeparate=function(G$q){var G$r=new G$N;return G$r._type=0,G$r._separateAxes=!0,G$r._constantSeparate=G$q,G$r},G$N.createByGradient=function(G$q){var G$r=new G$N;return G$r._type=1,G$r._separateAxes=!1,G$r._gradient=G$q,G$r},G$N.createByGradientSeparate=function(G$q,G$r,G$v,G$H){var G$A=new G$N;return G$A._type=1,G$A._separateAxes=!0,G$A._gradientX=G$q,G$A._gradientY=G$r,G$A._gradientZ=G$v,G$A._gradientW=G$H,G$A},G$N.createByRandomTwoConstant=function(G$q,G$r){var G$v=new G$N;return G$v._type=2,G$v._separateAxes=!1,G$v._constantMin=G$q,G$v._constantMax=G$r,G$v},G$N.createByRandomTwoConstantSeparate=function(G$q,G$r){var G$v=new G$N;return G$v._type=2,G$v._separateAxes=!0,G$v._constantMinSeparate=G$q,G$v._constantMaxSeparate=G$r,G$v},G$N.createByRandomTwoGradient=function(G$q,G$r){var G$v=new G$N;return G$v._type=3,G$v._separateAxes=!1,G$v._gradientMin=G$q,G$v._gradientMax=G$r,G$v},G$N.createByRandomTwoGradientSeparate=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O=new G$N;return G$O._type=3,G$O._separateAxes=!0,G$O._gradientXMin=G$q,G$O._gradientXMax=G$r,G$O._gradientYMin=G$v,G$O._gradientYMax=G$H,G$O._gradientZMin=G$A,G$O._gradientZMax=G$y,G$O._gradientWMin=G$R,G$O._gradientWMax=G$W,G$O},G$N}(),G$C=function(){function G$H(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}G$j(G$H,"laya.d3.core.particleShuriKen.module.GradientColor");var G$q=G$H.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.cloneTo=function(G$q){var G$r=G$q;G$r._type=this._type,this._constant.cloneTo(G$r._constant),this._constantMin.cloneTo(G$r._constantMin),this._constantMax.cloneTo(G$r._constantMax),this._gradient.cloneTo(G$r._gradient),this._gradientMin.cloneTo(G$r._gradientMin),this._gradientMax.cloneTo(G$r._gradientMax)},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$q,"gradient",function(){return this._gradient}),G$D(0,G$q,"constant",function(){return this._constant}),G$D(0,G$q,"type",function(){return this._type}),G$D(0,G$q,"gradientMin",function(){return this._gradientMin}),G$D(0,G$q,"constantMin",function(){return this._constantMin}),G$D(0,G$q,"gradientMax",function(){return this._gradientMax}),G$D(0,G$q,"constantMax",function(){return this._constantMax}),G$H.createByConstant=function(G$q){var G$r=new G$H;return G$r._type=0,G$r._constant=G$q,G$r},G$H.createByGradient=function(G$q){var G$r=new G$H;return G$r._type=1,G$r._gradient=G$q,G$r},G$H.createByRandomTwoConstant=function(G$q,G$r){var G$v=new G$H;return G$v._type=2,G$v._constantMin=G$q,G$v._constantMax=G$r,G$v},G$H.createByRandomTwoGradient=function(G$q,G$r){var G$v=new G$H;return G$v._type=3,G$v._gradientMin=G$q,G$v._gradientMax=G$r,G$v},G$H}(),G$c=(function(){function G$q(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}G$j(G$q,"laya.d3.core.particleShuriKen.module.GradientDataColor");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.addAlpha=function(G$q,G$r){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==G$q&&(G$q=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=G$q,this._alphaElements[this._alphaCurrentLength++]=G$r):DEBUG},G$r.addRGB=function(G$q,G$r){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==G$q&&(G$q=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=G$q,this._rgbElements[this._rgbCurrentLength++]=G$r.x,this._rgbElements[this._rgbCurrentLength++]=G$r.y,this._rgbElements[this._rgbCurrentLength++]=G$r.z):DEBUG},G$r.cloneTo=function(G$q){var G$r=G$q,G$v=0,G$H=0;G$r._alphaCurrentLength=this._alphaCurrentLength;var G$A=G$r._alphaElements;for(G$A.length=this._alphaElements.length,G$v=0,G$H=this._alphaElements.length;G$v<G$H;G$v++)G$A[G$v]=this._alphaElements[G$v];G$r._rgbCurrentLength=this._rgbCurrentLength;var G$y=G$r._rgbElements;for(G$y.length=this._rgbElements.length,G$v=0,G$H=this._rgbElements.length;G$v<G$H;G$v++)G$y[G$v]=this._rgbElements[G$v]},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),G$D(0,G$r,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function G$q(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}G$j(G$q,"laya.d3.core.particleShuriKen.module.GradientDataInt");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.add=function(G$q,G$r){this._currentLength<8?(6===this._currentLength&&1!==G$q&&(G$q=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=G$q,this._elements[this._currentLength++]=G$r):console.log("Warning:data count must lessEqual than 4")},G$r.cloneTo=function(G$q){var G$r=G$q;G$r._currentLength=this._currentLength;var G$v=G$r._elements;G$v.length=this._elements.length;for(var G$H=0,G$A=this._elements.length;G$H<G$A;G$H++)G$v[G$H]=this._elements[G$H]},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"gradientCount",function(){return this._currentLength/2})}(),function(){function G$q(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}G$j(G$q,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.add=function(G$q,G$r){this._currentLength<8?(6===this._currentLength&&1!==G$q&&(G$q=1,DEBUG),this._elements[this._currentLength++]=G$q,this._elements[this._currentLength++]=G$r):DEBUG},G$r.getKeyByIndex=function(G$q){return this._elements[2*G$q]},G$r.getValueByIndex=function(G$q){return this._elements[2*G$q+1]},G$r.getAverageValue=function(){for(var G$q=0,G$r=this._currentLength-2;G$q<G$r;G$q+=2){this._elements[G$q+1];this._elements[G$q+3],this._elements[G$q+2]-this._elements[G$q]}return 0},G$r.cloneTo=function(G$q){var G$r=G$q;G$r._currentLength=this._currentLength;var G$v=G$r._elements;G$v.length=this._elements.length;for(var G$H=0,G$A=this._elements.length;G$H<G$A;G$H++)G$v[G$H]=this._elements[G$H]},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"gradientCount",function(){return this._currentLength/2})}(),function(){function G$q(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}G$j(G$q,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.add=function(G$q,G$r){this._currentLength<8?(6===this._currentLength&&1!==G$q&&(G$q=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=G$q,this._elements[this._currentLength++]=G$r.x,this._elements[this._currentLength++]=G$r.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},G$r.cloneTo=function(G$q){var G$r=G$q;G$r._currentLength=this._currentLength;var G$v=G$r._elements;G$v.length=this._elements.length;for(var G$H=0,G$A=this._elements.length;G$H<G$A;G$H++)G$v[G$H]=this._elements[G$H]},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"gradientCount",function(){return this._currentLength/3})}(),function(){function G$W(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}G$j(G$W,"laya.d3.core.particleShuriKen.module.GradientSize");var G$q=G$W.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.getMaxSizeInGradient=function(){var G$q=0,G$r=0,G$v=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(G$q=0,G$r=this._gradientX.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientX.getValueByIndex(G$q));for(G$q=0,G$r=this._gradientY.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientY.getValueByIndex(G$q))}else for(G$q=0,G$r=this._gradient.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradient.getValueByIndex(G$q));break;case 1:G$v=this._separateAxes?(G$v=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),G$v=Math.max(G$v,this._constantMinSeparate.y),Math.max(G$v,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(G$q=0,G$r=this._gradientXMin.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientXMin.getValueByIndex(G$q));for(G$q=0,G$r=this._gradientXMax.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientXMax.getValueByIndex(G$q));for(G$q=0,G$r=this._gradientYMin.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientYMin.getValueByIndex(G$q));for(G$q=0,G$r=this._gradientZMax.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientZMax.getValueByIndex(G$q))}else{for(G$q=0,G$r=this._gradientMin.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientMin.getValueByIndex(G$q));for(G$q=0,G$r=this._gradientMax.gradientCount;G$q<G$r;G$q++)G$v=Math.max(G$v,this._gradientMax.getValueByIndex(G$q))}}return G$v},G$q.cloneTo=function(G$q){var G$r=G$q;G$r._type=this._type,G$r._separateAxes=this._separateAxes,this._gradient.cloneTo(G$r._gradient),this._gradientX.cloneTo(G$r._gradientX),this._gradientY.cloneTo(G$r._gradientY),this._gradientZ.cloneTo(G$r._gradientZ),G$r._constantMin=this._constantMin,G$r._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(G$r._constantMinSeparate),this._constantMaxSeparate.cloneTo(G$r._constantMaxSeparate),this._gradientMin.cloneTo(G$r._gradientMin),this._gradientMax.cloneTo(G$r._gradientMax),this._gradientXMin.cloneTo(G$r._gradientXMin),this._gradientXMax.cloneTo(G$r._gradientXMax),this._gradientYMin.cloneTo(G$r._gradientYMin),this._gradientYMax.cloneTo(G$r._gradientYMax),this._gradientZMin.cloneTo(G$r._gradientZMin),this._gradientZMax.cloneTo(G$r._gradientZMax)},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$q,"gradientZ",function(){return this._gradientZ}),G$D(0,G$q,"gradient",function(){return this._gradient}),G$D(0,G$q,"separateAxes",function(){return this._separateAxes}),G$D(0,G$q,"type",function(){return this._type}),G$D(0,G$q,"gradientMin",function(){return this._gradientMin}),G$D(0,G$q,"constantMin",function(){return this._constantMin}),G$D(0,G$q,"gradientX",function(){return this._gradientX}),G$D(0,G$q,"gradientY",function(){return this._gradientY}),G$D(0,G$q,"gradientMax",function(){return this._gradientMax}),G$D(0,G$q,"constantMax",function(){return this._constantMax}),G$D(0,G$q,"constantMinSeparate",function(){return this._constantMinSeparate}),G$D(0,G$q,"constantMaxSeparate",function(){return this._constantMaxSeparate}),G$D(0,G$q,"gradientXMin",function(){return this._gradientXMin}),G$D(0,G$q,"gradientXMax",function(){return this._gradientXMax}),G$D(0,G$q,"gradientYMin",function(){return this._gradientYMin}),G$D(0,G$q,"gradientYMax",function(){return this._gradientYMax}),G$D(0,G$q,"gradientZMin",function(){return this._gradientZMin}),G$D(0,G$q,"gradientZMax",function(){return this._gradientZMax}),G$W.createByGradient=function(G$q){var G$r=new G$W;return G$r._type=0,G$r._separateAxes=!1,G$r._gradient=G$q,G$r},G$W.createByGradientSeparate=function(G$q,G$r,G$v){var G$H=new G$W;return G$H._type=0,G$H._separateAxes=!0,G$H._gradientX=G$q,G$H._gradientY=G$r,G$H._gradientZ=G$v,G$H},G$W.createByRandomTwoConstant=function(G$q,G$r){var G$v=new G$W;return G$v._type=1,G$v._separateAxes=!1,G$v._constantMin=G$q,G$v._constantMax=G$r,G$v},G$W.createByRandomTwoConstantSeparate=function(G$q,G$r){var G$v=new G$W;return G$v._type=1,G$v._separateAxes=!0,G$v._constantMinSeparate=G$q,G$v._constantMaxSeparate=G$r,G$v},G$W.createByRandomTwoGradient=function(G$q,G$r){var G$v=new G$W;return G$v._type=2,G$v._separateAxes=!1,G$v._gradientMin=G$q,G$v._gradientMax=G$r,G$v},G$W.createByRandomTwoGradientSeparate=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=new G$W;return G$R._type=2,G$R._separateAxes=!0,G$R._gradientXMin=G$q,G$R._gradientXMax=G$r,G$R._gradientYMin=G$v,G$R._gradientYMax=G$H,G$R._gradientZMin=G$A,G$R._gradientZMax=G$y,G$R},G$W}()),G$b=function(){function G$W(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}G$j(G$W,"laya.d3.core.particleShuriKen.module.GradientVelocity");var G$q=G$W.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.cloneTo=function(G$q){var G$r=G$q;G$r._type=this._type,this._constant.cloneTo(G$r._constant),this._gradientX.cloneTo(G$r._gradientX),this._gradientY.cloneTo(G$r._gradientY),this._gradientZ.cloneTo(G$r._gradientZ),this._constantMin.cloneTo(G$r._constantMin),this._constantMax.cloneTo(G$r._constantMax),this._gradientXMin.cloneTo(G$r._gradientXMin),this._gradientXMax.cloneTo(G$r._gradientXMax),this._gradientYMin.cloneTo(G$r._gradientYMin),this._gradientYMax.cloneTo(G$r._gradientYMax),this._gradientZMin.cloneTo(G$r._gradientZMin),this._gradientZMax.cloneTo(G$r._gradientZMax)},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$q,"gradientZ",function(){return this._gradientZ}),G$D(0,G$q,"constant",function(){return this._constant}),G$D(0,G$q,"type",function(){return this._type}),G$D(0,G$q,"gradientXMax",function(){return this._gradientXMax}),G$D(0,G$q,"constantMin",function(){return this._constantMin}),G$D(0,G$q,"gradientX",function(){return this._gradientX}),G$D(0,G$q,"gradientY",function(){return this._gradientY}),G$D(0,G$q,"gradientXMin",function(){return this._gradientXMin}),G$D(0,G$q,"constantMax",function(){return this._constantMax}),G$D(0,G$q,"gradientYMin",function(){return this._gradientYMin}),G$D(0,G$q,"gradientYMax",function(){return this._gradientYMax}),G$D(0,G$q,"gradientZMin",function(){return this._gradientZMin}),G$D(0,G$q,"gradientZMax",function(){return this._gradientZMax}),G$W.createByConstant=function(G$q){var G$r=new G$W;return G$r._type=0,G$r._constant=G$q,G$r},G$W.createByGradient=function(G$q,G$r,G$v){var G$H=new G$W;return G$H._type=1,G$H._gradientX=G$q,G$H._gradientY=G$r,G$H._gradientZ=G$v,G$H},G$W.createByRandomTwoConstant=function(G$q,G$r){var G$v=new G$W;return G$v._type=2,G$v._constantMin=G$q,G$v._constantMax=G$r,G$v},G$W.createByRandomTwoGradient=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=new G$W;return G$R._type=3,G$R._gradientXMin=G$q,G$R._gradientXMax=G$r,G$R._gradientYMin=G$v,G$R._gradientYMax=G$H,G$R._gradientZMin=G$A,G$R._gradientZMax=G$y,G$R},G$W}(),G$d=(function(){function G$q(G$q){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=G$q}G$j(G$q,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.cloneTo=function(G$q){var G$r=G$q;this._angularVelocity.cloneTo(G$r._angularVelocity),G$r.enbale=this.enbale},G$r.clone=function(){var G$q;switch(this._angularVelocity.type){case 0:G$q=this._angularVelocity.separateAxes?G$o.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):G$o.createByConstant(this._angularVelocity.constant);break;case 1:G$q=this._angularVelocity.separateAxes?G$o.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):G$o.createByGradient(this._angularVelocity.gradient.clone());break;case 2:G$q=this._angularVelocity.separateAxes?G$o.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):G$o.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:G$q=this._angularVelocity.separateAxes?G$o.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):G$o.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var G$r=new this.constructor(G$q);return G$r.enbale=this.enbale,G$r},G$D(0,G$r,"angularVelocity",function(){return this._angularVelocity})}(),function(){function G$q(){this.enable=!1,this.randomDirection=!1}G$j(G$q,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r._getShapeBoundBox=function(G$q){throw new Error("BaseShape: must override it.")},G$r._getSpeedBoundBox=function(G$q){throw new Error("BaseShape: must override it.")},G$r.generatePositionAndDirection=function(G$q,G$r,G$v,G$H){throw new Error("BaseShape: must override it.")},G$r._calculateProceduralBounds=function(G$q,G$r,G$v){this._getShapeBoundBox(G$q);var G$H=G$q.min,G$A=G$q.max;G$Rr.multiply(G$H,G$r,G$H),G$Rr.multiply(G$A,G$r,G$A);var G$y=new G$iq(new G$Rr,new G$Rr);this.randomDirection?(G$y.min=new G$Rr(-1,-1,-1),G$y.max=new G$Rr(1,1,1)):this._getSpeedBoundBox(G$y);var G$R=new G$iq(new G$Rr,new G$Rr),G$W=G$R.min,G$O=G$R.max;G$Rr.scale(G$y.min,G$v.y,G$W),G$Rr.scale(G$y.max,G$v.y,G$O),G$Rr.add(G$q.min,G$W,G$W),G$Rr.add(G$q.max,G$O,G$O),G$Rr.min(G$q.min,G$W,G$q.min),G$Rr.max(G$q.max,G$W,G$q.max);var G$N=new G$iq(new G$Rr,new G$Rr),G$x=G$N.min,G$K=G$N.max;G$Rr.scale(G$y.min,G$v.x,G$x),G$Rr.scale(G$y.max,G$v.x,G$K),G$Rr.min(G$N.min,G$K,G$W),G$Rr.max(G$N.min,G$K,G$O),G$Rr.min(G$q.min,G$W,G$q.min),G$Rr.max(G$q.max,G$W,G$q.max)},G$r.cloneTo=function(G$q){G$q.enable=this.enable},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$q}()),G$U=function(){function G$y(){}return G$j(G$y,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),G$y._randomPointUnitArcCircle=function(G$q,G$r,G$v){var G$H=G$r.elements,G$A=NaN;G$A=G$v?G$v.getFloat()*G$q:Math.random()*G$q,G$H[0]=Math.cos(G$A),G$H[1]=Math.sin(G$A)},G$y._randomPointInsideUnitArcCircle=function(G$q,G$r,G$v){var G$H=G$r.elements;G$y._randomPointUnitArcCircle(G$q,G$r,G$v);var G$A=NaN;G$A=G$v?Math.pow(G$v.getFloat(),.5):Math.pow(Math.random(),.5),G$H[0]=G$H[0]*G$A,G$H[1]=G$H[1]*G$A},G$y._randomPointUnitCircle=function(G$q,G$r){var G$v=G$q.elements,G$H=NaN;G$H=G$r?G$r.getFloat()*Math.PI*2:Math.random()*Math.PI*2,G$v[0]=Math.cos(G$H),G$v[1]=Math.sin(G$H)},G$y._randomPointInsideUnitCircle=function(G$q,G$r){var G$v=G$q.elements;G$y._randomPointUnitCircle(G$q);var G$H=NaN;G$H=G$r?Math.pow(G$r.getFloat(),.5):Math.pow(Math.random(),.5),G$v[0]=G$v[0]*G$H,G$v[1]=G$v[1]*G$H},G$y._randomPointUnitSphere=function(G$q,G$r){var G$v=G$q.elements,G$H=NaN,G$A=NaN;G$A=G$r?(G$H=G$v[2]=2*G$r.getFloat()-1,G$r.getFloat()*Math.PI*2):(G$H=G$v[2]=2*Math.random()-1,Math.random()*Math.PI*2);var G$y=Math.sqrt(1-G$H*G$H);G$v[0]=G$y*Math.cos(G$A),G$v[1]=G$y*Math.sin(G$A)},G$y._randomPointInsideUnitSphere=function(G$q,G$r){var G$v=G$q.elements;G$y._randomPointUnitSphere(G$q);var G$H=NaN;G$H=G$r?Math.pow(G$r.getFloat(),1/3):Math.pow(Math.random(),1/3),G$v[0]=G$v[0]*G$H,G$v[1]=G$v[1]*G$H,G$v[2]=G$v[2]*G$H},G$y._randomPointInsideHalfUnitBox=function(G$q,G$r){var G$v=G$q.elements;G$r?(G$v[0]=G$r.getFloat()-.5,G$v[1]=G$r.getFloat()-.5,G$v[2]=G$r.getFloat()-.5):(G$v[0]=Math.random()-.5,G$v[1]=Math.random()-.5,G$v[2]=Math.random()-.5)},G$y}(),G$_=(function(){function G$q(G$q){this._size=null,this.enbale=!1,this._size=G$q}G$j(G$q,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.cloneTo=function(G$q){var G$r=G$q;this._size.cloneTo(G$r._size),G$r.enbale=this.enbale},G$r.clone=function(){var G$q;switch(this._size.type){case 0:G$q=this._size.separateAxes?G$c.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):G$c.createByGradient(this._size.gradient.clone());break;case 1:G$q=this._size.separateAxes?G$c.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):G$c.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:G$q=this._size.separateAxes?G$c.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):G$c.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var G$r=new this.constructor(G$q);return G$r.enbale=this.enbale,G$r},G$D(0,G$r,"size",function(){return this._size})}(),function(){function G$H(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}G$j(G$H,"laya.d3.core.particleShuriKen.module.StartFrame");var G$q=G$H.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.cloneTo=function(G$q){var G$r=G$q;G$r._type=this._type,G$r._constant=this._constant,G$r._constantMin=this._constantMin,G$r._constantMax=this._constantMax},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$q,"constant",function(){return this._constant}),G$D(0,G$q,"type",function(){return this._type}),G$D(0,G$q,"constantMin",function(){return this._constantMin}),G$D(0,G$q,"constantMax",function(){return this._constantMax}),G$H.createByConstant=function(G$q){var G$r=new G$H;return G$r._type=0,G$r._constant=G$q,G$r},G$H.createByRandomTwoConstant=function(G$q,G$r){var G$v=new G$H;return G$v._type=1,G$v._constantMin=G$q,G$v._constantMax=G$r,G$v},G$H}()),G$f=(function(){function G$q(G$q,G$r){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new G$yr(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=G$q,this._startFrame=G$r}G$j(G$q,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.cloneTo=function(G$q){var G$r=G$q;this.tiles.cloneTo(G$r.tiles),G$r.type=this.type,G$r.randomRow=this.randomRow,this._frame.cloneTo(G$r._frame),this._startFrame.cloneTo(G$r._startFrame),G$r.cycles=this.cycles,G$r.enableUVChannels=this.enableUVChannels,G$r.enable=this.enable},G$r.clone=function(){var G$q,G$r;switch(this._frame.type){case 0:G$q=G$Y.createByConstant(this._frame.constant);break;case 1:G$q=G$Y.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:G$q=G$Y.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:G$q=G$Y.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:G$r=G$_.createByConstant(this._startFrame.constant);break;case 1:G$r=G$_.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var G$v=new this.constructor(G$q,G$r);return this.tiles.cloneTo(G$v.tiles),G$v.type=this.type,G$v.randomRow=this.randomRow,G$v.cycles=this.cycles,G$v.enableUVChannels=this.enableUVChannels,G$v.enable=this.enable,G$v},G$D(0,G$r,"frame",function(){return this._frame}),G$D(0,G$r,"startFrame",function(){return this._startFrame})}(),function(){function G$q(G$q){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=G$q}G$j(G$q,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.cloneTo=function(G$q){var G$r=G$q;this._velocity.cloneTo(G$r._velocity),G$r.enbale=this.enbale,G$r.space=this.space},G$r.clone=function(){var G$q;switch(this._velocity.type){case 0:G$q=G$b.createByConstant(this._velocity.constant.clone());break;case 1:G$q=G$b.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:G$q=G$b.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:G$q=G$b.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var G$r=new this.constructor(G$q);return G$r.enbale=this.enbale,G$r.space=this.space,G$r},G$D(0,G$r,"velocity",function(){return this._velocity})}(),function(){function G$q(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new G$Tr,this._vb=G$dr.create(G$q._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=G$br.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=G$Cr.nameKey.getID("LINE"),this._shaderCompile=G$Vr._preCompileShader[this._sharderNameID]}G$j(G$q,"laya.d3.core.PhasorSpriter3D");var G$r=G$q.prototype;return G$r.line=function(G$q,G$r,G$v,G$H){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$q.x,G$q.y,G$q.z,G$r.x,G$r.y,G$r.z,G$r.w),this.addVertex(G$v.x,G$v.y,G$v.z,G$H.x,G$H.y,G$H.z,G$H.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},G$r.circle=function(G$q,G$r,G$v,G$H,G$A,G$y){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*G$r,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/G$r,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*G$q,Math.cos(this._tempNumver0)*G$q,0,G$v,G$H,G$A,G$y),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},G$r.plane=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=G$H/2,this._tempNumver1=G$A/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$q-this._tempNumver0,G$r+this._tempNumver1,G$v,G$y,G$R,G$W,G$O),this.addVertex(G$q+this._tempNumver0,G$r+this._tempNumver1,G$v,G$y,G$R,G$W,G$O),this.addVertex(G$q-this._tempNumver0,G$r-this._tempNumver1,G$v,G$y,G$R,G$W,G$O),this.addVertex(G$q+this._tempNumver0,G$r-this._tempNumver1,G$v,G$y,G$R,G$W,G$O),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},G$r.box=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=G$H/2,this._tempNumver1=G$A/2,this._tempNumver2=G$y/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$q-this._tempNumver0,G$r+this._tempNumver1,G$v+this._tempNumver2,G$R,G$W,G$O,G$N),this.addVertex(G$q+this._tempNumver0,G$r+this._tempNumver1,G$v+this._tempNumver2,G$R,G$W,G$O,G$N),this.addVertex(G$q-this._tempNumver0,G$r-this._tempNumver1,G$v+this._tempNumver2,G$R,G$W,G$O,G$N),this.addVertex(G$q+this._tempNumver0,G$r-this._tempNumver1,G$v+this._tempNumver2,G$R,G$W,G$O,G$N),this.addVertex(G$q+this._tempNumver0,G$r+this._tempNumver1,G$v-this._tempNumver2,G$R,G$W,G$O,G$N),this.addVertex(G$q-this._tempNumver0,G$r+this._tempNumver1,G$v-this._tempNumver2,G$R,G$W,G$O,G$N),this.addVertex(G$q+this._tempNumver0,G$r-this._tempNumver1,G$v-this._tempNumver2,G$R,G$W,G$O,G$N),this.addVertex(G$q-this._tempNumver0,G$r-this._tempNumver1,G$v-this._tempNumver2,G$R,G$W,G$O,G$N),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},G$r.cone=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*G$v+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*G$v>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/G$v,this.addVertexIndex(0,G$r,0,G$H,G$A,G$y,G$R,this._tempUint0),this.addVertexIndex(0,0,0,G$H,G$A,G$y,G$R,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<G$v;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(G$q*this._tempNumver2,0,G$q*this._tempNumver3,G$H,G$A,G$y,G$R,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==G$v-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(G$q*this._tempNumver2,0,G$q*this._tempNumver3,G$H,G$A,G$y,G$R,this._tempUint0+(this._tempInt0+G$v)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==G$v-1?this.addIndexes(this._tempUint1+G$v+2):this.addIndexes(this._tempUint1+this._tempInt0+G$v+1),this.addIndexes(this._tempUint1+this._tempInt0+G$v),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},G$r.boundingBoxLine=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(G$q,G$A,G$y,G$R,G$W,G$O,G$N),this.addVertex(G$H,G$A,G$y,G$R,G$W,G$O,G$N),this.addVertex(G$q,G$r,G$y,G$R,G$W,G$O,G$N),this.addVertex(G$H,G$r,G$y,G$R,G$W,G$O,G$N),this.addVertex(G$H,G$A,G$v,G$R,G$W,G$O,G$N),this.addVertex(G$q,G$A,G$v,G$R,G$W,G$O,G$N),this.addVertex(G$H,G$r,G$v,G$R,G$W,G$O,G$N),this.addVertex(G$q,G$r,G$v,G$R,G$W,G$O,G$N),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},G$r.addVertex=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=G$q,this._vbData[this._posInVBData+1]=G$r,this._vbData[this._posInVBData+2]=G$v,this._vbData[this._posInVBData+3]=G$H,this._vbData[this._posInVBData+4]=G$A,this._vbData[this._posInVBData+5]=G$y,this._vbData[this._posInVBData+6]=G$R,this._posInVBData+=this._floatSizePerVer,this},G$r.addVertexIndex=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){return this._hasBegun||this.addVertexIndexException(),this._vbData[G$W]=G$q,this._vbData[G$W+1]=G$r,this._vbData[G$W+2]=G$v,this._vbData[G$W+3]=G$H,this._vbData[G$W+4]=G$A,this._vbData[G$W+5]=G$y,this._vbData[G$W+6]=G$R,(G$W+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=G$W),this},G$r.addIndexes=function(G$q){var G$r=arguments;this._hasBegun||this.addVertexIndexException();for(var G$v=0;G$v<G$r.length;G$v++)this._ibData[this._posInIBData]=G$r[G$v],this._posInIBData++;return this},G$r.begin=function(G$q,G$r){return this._hasBegun&&this.beginException0(),1!==G$q&&4!==G$q&&this.beginException1(),this._primitiveType=G$q,this._camera=G$r,this._hasBegun=!0,this},G$r.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},G$r.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(G$q._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),G$V.drawCall++,G$E.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},G$r.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},G$r.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},G$r.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},G$r.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},G$r.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},G$r.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(28,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector4",1)])}]),G$q}()),G$S=function(){function G$q(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++G$q._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new G$Tr}G$j(G$q,"laya.d3.core.render.RenderElement");var G$r=G$q.prototype;return G$r.getDynamicBatchBakedVertexs=function(G$q){for(var G$r=this._renderObj._getVertexBuffer(G$q),G$v=G$r.getData().slice(),G$H=G$r.vertexDeclaration,G$A=G$H.getVertexElementByUsage(0).offset/4,G$y=G$H.getVertexElementByUsage(3).offset/4,G$R=this._sprite3D.transform,G$W=G$R.worldMatrix,G$O=G$R.rotation,G$N=G$H.vertexStride/4,G$x=0,G$K=G$v.length;G$x<G$K;G$x+=G$N){var G$T=G$x+G$A,G$j=G$x+G$y;G$Xr.transformVector3ArrayToVector3ArrayCoordinate(G$v,G$T,G$W,G$v,G$T),G$Xr.transformVector3ArrayByQuat(G$v,G$j,G$O,G$v,G$j)}return G$v},G$r.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},G$r._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},G$D(0,G$r,"id",function(){return this._id}),G$D(0,G$r,"renderObj",function(){return this._renderObj},function(G$q){this._renderObj!==G$q&&(this._renderObj=G$q)}),G$q._uniqueIDCounter=0,G$q}(),G$l=function(){function G$r(G$q){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++G$r._uniqueIDCounter,this._needSort=!1,this._scene=G$q,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}G$j(G$r,"laya.d3.core.render.RenderQueue");var G$q=G$r.prototype;return G$q._sortOpaqueFunc=function(G$q,G$r){if(G$q._render&&G$r._render){var G$v=G$q._material.renderQueue-G$r._material.renderQueue;return 0==G$v?G$q._render._distanceForSort-G$r._render._distanceForSort:G$v}return 0},G$q._sortAlphaFunc=function(G$q,G$r){if(G$q._render&&G$r._render){var G$v=G$q._material.renderQueue-G$r._material.renderQueue;return 0==G$v?G$r._render._distanceForSort-G$q._render._distanceForSort:G$v}return 0},G$q._begainRenderElement=function(G$q,G$r,G$v){return!!G$r._beforeRender(G$q)},G$q._sortAlpha=function(G$q){G$r._cameraPosition=G$q,this._finalElements.sort(this._sortAlphaFunc)},G$q._sortOpaque=function(G$q){G$r._cameraPosition=G$q,this._finalElements.sort(this._sortOpaqueFunc)},G$q._preRender=function(G$q){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},G$q._render=function(G$q,G$r){for(var G$v,G$H,G$A,G$y,G$R,G$W,G$O=G$V.loopCount,G$N=this._scene,G$x=G$q.camera,G$K=(G$x.id,!1),G$T=0,G$j=this._finalElements.length;G$T<G$j;G$T++){var G$D,G$g,G$X,G$m=this._finalElements[G$T];if(null!=G$m._onPreRenderFunction&&G$m._onPreRenderFunction.call(G$m._sprite3D,G$q),0===G$m._type){if(G$q.owner=G$X=G$m._sprite3D,G$q.renderElement=G$m,G$X._preRenderUpdateComponents(G$q),G$D=G$m.renderObj,G$g=G$m._material,this._begainRenderElement(G$q,G$D,G$g)){if(G$v=G$D._getVertexBuffers(),!(G$A=(G$H=G$D._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[G$H.id]){this._errorRecord[G$H.id]=1;var G$B="vertexBuffer:"+("("+G$H._destroyed+","+G$H._released+","+G$H._referenceCount+","+G$H._buffer+")")+", material:"+(G$g?G$g.__className+"("+G$g._destroyed+","+G$g._released+")":"null")+", owner:"+(G$X?G$X.__className+"("+G$X._destroyed+","+G$X._activeInHierarchy+","+G$X._displayedInStage+")":"null")+", renderObj:"+(G$D?G$D.__className+"("+G$D._destroyed+","+G$D._released+","+G$D._referenceCount+")":"")+", parent:, url:"+(G$X?G$X.url:"")+", disposeStack:"+G$H.disposeStack;G$M.recordError("报错：unknown vertexDeclaration  "+G$B)}continue}if(G$K=(G$y=G$q._shader=G$g._getShader(G$N._shaderDefineValue,G$A.shaderDefineValue,G$X._shaderDefineValue)).bind()||G$O!==G$y._uploadLoopCount,G$v){if(G$y._uploadVertexBuffer!==G$v||G$K){for(var G$e=0;G$e<G$v.length;G$e++){var G$p=G$v[G$e];G$y.uploadAttributesX(G$p.vertexDeclaration.shaderValues.data,G$p)}G$y._uploadVertexBuffer=G$v}}else(G$y._uploadVertexBuffer!==G$H||G$K)&&(G$y.uploadAttributes(G$A.shaderValues.data,null),G$y._uploadVertexBuffer=G$H);(G$y._uploadScene!==G$N||G$K)&&(G$y.uploadSceneUniforms(G$N._shaderValues.data),G$y._uploadScene=G$N),(G$x!==G$y._uploadCamera||G$y._uploadSprite3D!==G$X||G$K)&&(G$y.uploadSpriteUniforms(G$X._shaderValues.data),G$y._uploadSprite3D=G$X),(G$x!==G$y._uploadCamera||G$K)&&(G$y.uploadCameraUniforms(G$x._shaderValues.data),G$y._uploadCamera=G$x),(G$y._uploadMaterial!==G$g||G$K)&&(G$g._upload(),G$y._uploadMaterial=G$g),G$R!==G$g?(G$g._setRenderStateBlendDepth(),G$g._setRenderStateFrontFace(G$r,G$X.transform),G$R=G$g,G$W=G$X):G$W!==G$X&&(G$g._setRenderStateFrontFace(G$r,G$X.transform),G$W=G$X),G$D._render(G$q),G$y._uploadLoopCount=G$O}G$X._postRenderUpdateComponents(G$q)}else if(2===G$m._type){G$m.renderObj;G$q.owner=G$X=G$m._sprite3D,G$q.renderElement=G$m,G$q._batchIndexStart=G$m._tempBatchIndexStart,G$q._batchIndexEnd=G$m._tempBatchIndexEnd,G$D=G$m.renderObj,G$g=G$m._material,this._begainRenderElement(G$q,G$D,G$g)&&(G$A=(G$H=G$D._getVertexBuffer(0)).vertexDeclaration,G$K=(G$y=G$q._shader=G$g._getShader(G$N._shaderDefineValue,G$A.shaderDefineValue,G$X._shaderDefineValue)).bind()||G$O!==G$y._uploadLoopCount,(G$y._uploadVertexBuffer!==G$H||G$K)&&(G$y.uploadAttributes(G$A.shaderValues.data,null),G$y._uploadVertexBuffer=G$H),(G$y._uploadScene!==G$N||G$K)&&(G$y.uploadSceneUniforms(G$N._shaderValues.data),G$y._uploadScene=G$N),(G$x!==G$y._uploadCamera||G$y._uploadSprite3D!==G$X||G$K)&&(G$y.uploadSpriteUniforms(G$X._shaderValues.data),G$y._uploadSprite3D=G$X),(G$x!==G$y._uploadCamera||G$K)&&(G$y.uploadCameraUniforms(G$x._shaderValues.data),G$y._uploadCamera=G$x),(G$y._uploadMaterial!==G$g||G$K)&&(G$g._upload(),G$y._uploadMaterial=G$g),G$R!==G$g?(G$g._setRenderStateBlendDepth(),G$g._setRenderStateFrontFace(G$r,G$X.transform),G$R=G$g,G$W=G$X):G$W!==G$X&&(G$g._setRenderStateFrontFace(G$r,G$X.transform),G$W=G$X),G$D._render(G$q),G$y._uploadLoopCount=G$O)}}},G$q._renderShadow=function(G$q,G$r){for(var G$v,G$H,G$A,G$y,G$R,G$W=G$V.loopCount,G$O=this._scene,G$N=G$q.camera,G$x=!1,G$K=0,G$T=this._finalElements.length;G$K<G$T;G$K++){var G$j,G$D,G$g,G$X=this._finalElements[G$K];0===G$X._type&&(G$q.owner=G$g=G$X._sprite3D,G$r||G$g._projectionViewWorldUpdateCamera===G$N&&G$g._projectionViewWorldUpdateLoopCount===G$V.loopCount||(G$g._render._renderUpdate(G$q._projectionViewMatrix),G$g._projectionViewWorldUpdateLoopCount=G$V.loopCount,G$g._projectionViewWorldUpdateCamera=G$N),G$q.renderElement=G$X,G$g._preRenderUpdateComponents(G$q),G$j=G$X.renderObj,G$D=G$X._material,this._begainRenderElement(G$q,G$j,null)&&(G$H=(G$v=G$j._getVertexBuffer(0)).vertexDeclaration,G$x=(G$A=G$q._shader=G$D._getShader(G$O._shaderDefineValue,G$H.shaderDefineValue,G$g._shaderDefineValue)).bind()||G$W!==G$A._uploadLoopCount,(G$A._uploadVertexBuffer!==G$v||G$x)&&(G$A.uploadAttributes(G$H.shaderValues.data,null),G$A._uploadVertexBuffer=G$v),(G$N!==G$A._uploadCamera||G$A._uploadSprite3D!==G$g||G$x)&&(G$A.uploadSpriteUniforms(G$g._shaderValues.data),G$A._uploadSprite3D=G$g),(G$N!==G$A._uploadCamera||G$x)&&(G$A.uploadCameraUniforms(G$N._shaderValues.data),G$A._uploadCamera=G$N),(G$A._uploadMaterial!==G$D||G$x)&&(G$D._upload(),G$A._uploadMaterial=G$D),G$A._uploadRenderElement,G$y!==G$D?(G$D._setRenderStateFrontFace(!1,G$g.transform),G$y=G$D,G$R=G$g):G$R!==G$g&&(G$D._setRenderStateFrontFace(!1,G$g.transform),G$R=G$g),G$j._render(G$q),G$A._uploadLoopCount=G$W),G$g._postRenderUpdateComponents(G$q))}},G$q._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},G$q._addRenderElement=function(G$q){this._renderElements.push(G$q),this._needSort=!0},G$q._addDynamicBatchElement=function(G$q){this._dynamicBatchCombineRenderElements.push(G$q)},G$D(0,G$q,"id",function(){return this._id}),G$r._uniqueIDCounter=0,G$r._cameraPosition=null,G$r}(),G$L=function(){function G$q(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return G$j(G$q,"laya.d3.core.render.RenderState"),G$q.clientWidth=0,G$q.clientHeight=0,G$q}(),G$i=function(){function G$R(G$q,G$r){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new G$hq(new G$Rr,0),this._corners=[new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr],this._boundingBoxCenter=new G$Rr,this._children=G$H(8),this._objects=[],this._tempBoundBoxCorners=[new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr],this._scene=G$q,this._currentDepth=G$r}G$j(G$R,"laya.d3.core.scene.OctreeNode");var G$q=G$R.prototype;return G$M.imps(G$q,{"laya.d3.core.scene.ITreeNode":!0}),G$q.init=function(G$q,G$r){var G$v=new G$Rr,G$H=new G$Rr;G$Rr.scale(G$r,-.5,G$v),G$Rr.scale(G$r,.5,G$H),G$Rr.add(G$v,G$q,G$v),G$Rr.add(G$H,G$q,G$H),this.exactBox=new G$iq(G$v,G$H),this.relaxBox=new G$iq(G$v,G$H)},G$q.addTreeNode=function(G$q){1===Collision.boxContainsBox(this._relaxBox,G$q.boundingBox)?this.addNodeDown(G$q,0):this.addObject(G$q)},G$q.addChild=function(G$q){var G$r=this._children[G$q];if(null==G$r){G$r=new G$R(this._scene,this._currentDepth+1),(this._children[G$q]=G$r)._parent=this,G$Rr.subtract(this._exactBox.max,this._exactBox.min,G$R.tempSize),G$Rr.multiply(G$R.tempSize,G$R._octreeSplit[G$q],G$R.tempCenter),G$Rr.add(this._exactBox.min,G$R.tempCenter,G$R.tempCenter),G$Rr.scale(G$R.tempSize,.25,G$R.tempSize);var G$v=new G$Rr,G$H=new G$Rr;G$Rr.subtract(G$R.tempCenter,G$R.tempSize,G$v),G$Rr.add(G$R.tempCenter,G$R.tempSize,G$H),G$r.exactBox=new G$iq(G$v,G$H),G$Rr.scale(G$R.tempSize,G$R.relax,G$R.tempSize);var G$A=new G$Rr,G$y=new G$Rr;G$Rr.subtract(G$R.tempCenter,G$R.tempSize,G$A),G$Rr.add(G$R.tempCenter,G$R.tempSize,G$y),G$r.relaxBox=new G$iq(G$A,G$y)}return G$r},G$q.addObject=function(G$q){(G$q._treeNode=this)._objects.push(G$q)},G$q.removeObject=function(G$q){if(G$q._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var G$r=this._objects.indexOf(G$q);return-1!==G$r&&(this._objects.splice(G$r,1),!0)},G$q.clearObject=function(){this._objects.length=0},G$q.addNodeUp=function(G$q,G$r){this._parent&&1!==Collision.boxContainsBox(this._exactBox,G$q.boundingBox)?this._parent.addNodeUp(G$q,G$r-1):this.addNodeDown(G$q,G$r)},G$q.addNodeDown=function(G$q,G$r){if(G$r<this._scene.treeLevel){var G$v=this.inChildIndex(G$q.boundingBoxCenter),G$H=this.addChild(G$v);1===Collision.boxContainsBox(G$H._relaxBox,G$q.boundingBox)?G$H.addNodeDown(G$q,++G$r):this.addObject(G$q)}else this.addObject(G$q)},G$q.inChildIndex=function(G$q){return 4*(G$q.z<this._boundingBoxCenter.z?0:1)+2*(G$q.y<this._boundingBoxCenter.y?0:1)+(G$q.x<this._boundingBoxCenter.x?0:1)},G$q.updateObject=function(G$q){1===Collision.boxContainsBox(this._relaxBox,G$q.boundingBox)?(this.removeObject(G$q),G$q._treeNode=null,this.addNodeDown(G$q,this._currentDepth)):this._parent&&(this.removeObject(G$q),G$q._treeNode=null,this._parent.addNodeUp(G$q,this._currentDepth-1))},G$q.cullingObjects=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R=0,G$W=0,G$O=0,G$N=this._scene._dynamicBatchManager;for(G$R=0,G$y=this._objects.length;G$R<G$y;G$R++){var G$x=this._objects[G$R];if(G$Z.isVisible(G$x._owner.layer.mask)&&G$x.enable){if(G$r&&(G$V.treeSpriteCollision+=1,0===G$q.containsBoundSphere(G$x.boundingSphere)))continue;G$x._renderUpdate(G$A),G$x._distanceForSort=G$Rr.distance(G$x.boundingSphere.center,G$H)+G$x.sortingFudge;var G$K=G$x._renderElements;for(G$W=0,G$O=G$K.length;G$W<G$O;G$W++){var G$T=G$K[G$W],G$j=G$T._staticBatch;if(G$j&&G$j._material===G$T._material)G$j._addBatchRenderElement(G$T);else{var G$D=G$T.renderObj;G$D.triangleCount<10&&1===G$D._vertexBufferCount&&G$D._getIndexBuffer()&&G$T._material.renderQueue<2&&G$T._canDynamicBatch&&!G$x._owner.isStatic?G$N._addPrepareRenderElement(G$T):this._scene.getRenderQueue(G$T._material.renderQueue)._addRenderElement(G$T)}}}}for(G$R=0;G$R<8;G$R++){var G$g=this._children[G$R];if(null!=G$g){var G$X=G$r;if(G$r){var G$m=G$q.containsBoundBox(G$g._relaxBox);if(G$V.treeNodeCollision+=1,0===G$m)continue;G$X=2===G$m}G$g.cullingObjects(G$q,G$X,G$v,G$H,G$A)}}},G$q.cullingShadowObjects=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R=0,G$W=0,G$O=0;this._scene._dynamicBatchManager;for(G$R=0,G$y=this._objects.length;G$R<G$y;G$R++){var G$N=this._objects[G$R];if(G$N.castShadow&&G$Z.isVisible(G$N._owner.layer.mask)&&G$N.enable){if(G$v&&0===G$q[0].containsBoundSphere(G$N.boundingSphere))continue;for(var G$x=1,G$K=G$q.length;G$x<G$K;G$x++){var G$T=G$r[G$x-1];if(0!==G$q[G$x].containsBoundSphere(G$N.boundingSphere)){var G$j=G$N._renderElements;for(G$W=0,G$O=G$j.length;G$W<G$O;G$W++)G$T._addRenderElement(G$j[G$W])}}}}for(G$R=0;G$R<8;G$R++){var G$D=this._children[G$R];if(null!=G$D){var G$g=G$v;if(G$v){var G$X=G$q[0].containsBoundBox(G$D._relaxBox);if(0===G$X)continue;G$g=2===G$X}G$D.cullingShadowObjects(G$q,G$r,G$g,G$H,G$A)}}},G$q.cullingShadowObjectsOnePSSM=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R,G$W=G$r[0],G$O=0,G$N=0,G$x=0;for(G$O=0,G$R=this._objects.length;G$O<G$R;G$O++){var G$K=this._objects[G$O];if(G$K.castShadow&&G$Z.isVisible(G$K._owner.layer.mask)&&G$K.enable){if(G$H&&0===G$q.containsBoundSphere(G$K.boundingSphere))continue;G$K._renderUpdate(G$v);var G$T=G$K._renderElements;for(G$N=0,G$x=G$T.length;G$N<G$x;G$N++)G$W._addRenderElement(G$T[G$N])}}for(G$O=0;G$O<8;G$O++){var G$j=this._children[G$O];if(null!=G$j){var G$D=G$H;if(G$H){var G$g=G$q.containsBoundBox(G$j._relaxBox);if(0===G$g)continue;G$D=2===G$g}G$j.cullingShadowObjectsOnePSSM(G$q,G$r,G$v,G$D,G$A,G$y)}}},G$q.renderBoudingBox=function(G$q){this._renderBoudingBox(G$q);for(var G$r=0;G$r<8;++G$r){var G$v=this._children[G$r];G$v&&G$v.renderBoudingBox(G$q)}},G$q.buildAllChild=function(G$q){if(G$q<this._scene.treeLevel)for(var G$r=0;G$r<8;G$r++){this.addChild(G$r).buildAllChild(G$q+1)}},G$q._renderBoudingBox=function(G$q){},G$D(0,G$q,"exactBox",function(){return this._exactBox},function(G$q){this._exactBox=G$q,G$Rr.add(G$q.min,G$q.max,this._boundingBoxCenter),G$Rr.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),G$D(0,G$q,"relaxBox",function(){return this._relaxBox},function(G$q){(this._relaxBox=G$q).getCorners(this._corners),G$hq.createfromPoints(this._corners,this._boundingSphere)}),G$R.debugMode=!1,G$R.relax=1.15,G$R.CHILDNUM=8,G$K(G$R,["tempVector0",function(){return this.tempVector0=new G$Rr},"tempSize",function(){return this.tempSize=new G$Rr},"tempCenter",function(){return this.tempCenter=new G$Rr},"_octreeSplit",function(){return this._octreeSplit=[new G$Rr(.25,.25,.25),new G$Rr(.75,.25,.25),new G$Rr(.25,.75,.25),new G$Rr(.75,.75,.25),new G$Rr(.25,.25,.75),new G$Rr(.75,.25,.75),new G$Rr(.25,.75,.75),new G$Rr(.75,.75,.75)]}]),G$R}(),G$w=(function(){function G$q(){}G$j(G$q,"laya.d3.core.scene.SceneManager")}(),function(){function G$q(G$q,G$r,G$v,G$H){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===G$q&&(G$q=1),void 0===G$r&&(G$r=1),void 0===G$v&&(G$v=1),void 0===G$H&&(G$H=1),this._r=G$q,this._g=G$r,this._b=G$v,this._a=G$H}return G$j(G$q,"laya.d3.core.trail.module.Color",null,"Color$1"),G$q.prototype.cloneTo=function(G$q){G$q._r=this._r,G$q._g=this._g,G$q._b=this._b,G$q._a=this._a},G$K(G$q,["RED",function(){return this.RED=new G$q(1,0,0,1)},"GREEN",function(){return this.GREEN=new G$q(0,1,0,1)},"BLUE",function(){return this.BLUE=new G$q(0,0,1,1)},"CYAN",function(){return this.CYAN=new G$q(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new G$q(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new G$q(1,0,1,1)},"GRAY",function(){return this.GRAY=new G$q(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new G$q(1,1,1,1)},"BLACK",function(){return this.BLACK=new G$q(0,0,0,1)}]),G$q}()),G$h=(function(){function G$q(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}G$j(G$q,"laya.d3.core.trail.module.Gradient");var G$r=G$q.prototype;G$r.setKeys=function(G$q,G$r){var G$v,G$H;this._colorKeys=G$q;for(var G$A=this.index=0;G$A<G$q.length;G$A++){var G$y=(G$v=G$q[G$A]).color;this._colorKeyData[this.index++]=G$y._r,this._colorKeyData[this.index++]=G$y._g,this._colorKeyData[this.index++]=G$y._b,this._colorKeyData[this.index++]=G$v.time}this._alphaKeys=G$r;for(var G$R=this.index=0;G$R<G$r.length;G$R++)G$H=G$r[G$R],this._alphaKeyData[this.index++]=G$H.alpha,this._alphaKeyData[this.index++]=G$H.time},G$r.cloneTo=function(G$q){var G$r=0,G$v=0,G$H=this.colorKeys,G$A=[];for(G$r=0,G$v=G$H.length;G$r<G$v;G$r++){var G$y=new G$n;G$H[G$r].cloneTo(G$y),G$A.push(G$y)}var G$R=this.alphaKeys,G$W=[];for(G$r=0,G$v=G$R.length;G$r<G$v;G$r++){var G$O=new G$h;G$R[G$r].cloneTo(G$O),G$W.push(G$O)}G$q.setKeys(G$A,G$W)},G$D(0,G$r,"mode",function(){return this._mode},function(G$q){this._mode=G$q}),G$D(0,G$r,"colorKeys",function(){return this._colorKeys},function(G$q){this._colorKeys=G$q;for(var G$r=this.index=0;G$r<G$q.length;G$r++){var G$v=G$q[G$r],G$H=G$v.color;this._colorKeyData[this.index++]=G$H._r,this._colorKeyData[this.index++]=G$H._g,this._colorKeyData[this.index++]=G$H._b,this._colorKeyData[this.index++]=G$v.time}}),G$D(0,G$r,"alphaKeys",function(){return this._alphaKeys},function(G$q){this._alphaKeys=G$q;for(var G$r=this.index=0;G$r<G$q.length;G$r++){var G$v=G$q[G$r];this._alphaKeyData[this.index++]=G$v.alpha,this._alphaKeyData[this.index++]=G$v.time}})}(),function(){function G$q(G$q,G$r){this._alpha=NaN,this._time=NaN,void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),this._alpha=G$q,this._time=G$r}G$j(G$q,"laya.d3.core.trail.module.GradientAlphaKey");var G$r=G$q.prototype;return G$r.cloneTo=function(G$q){G$q.alpha=this.alpha,G$q.time=this.time},G$D(0,G$r,"alpha",function(){return this._alpha},function(G$q){this._alpha=G$q}),G$D(0,G$r,"time",function(){return this._time},function(G$q){this._time=G$q}),G$q}()),G$n=function(){function G$q(G$q,G$r){this._color=null,this._time=NaN,void 0===G$r&&(G$r=0),this._color=G$q||new G$w,this._time=G$r}G$j(G$q,"laya.d3.core.trail.module.GradientColorKey");var G$r=G$q.prototype;return G$r.cloneTo=function(G$q){this.color.cloneTo(G$q.color),G$q.time=this.time},G$D(0,G$r,"color",function(){return this._color},function(G$q){this._color=G$q}),G$D(0,G$r,"time",function(){return this._time},function(G$q){this._time=G$q}),G$q}(),G$k=(function(){function G$q(){}G$j(G$q,"laya.d3.core.trail.module.GradientMode"),G$q.Blend=0,G$q.Fixed=1}(),function(){function G$q(){}G$j(G$q,"laya.d3.core.trail.module.TextureMode"),G$q.Stretch=0,G$q.Tile=1}(),function(){function G$q(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}G$j(G$q,"laya.d3.core.trail.module.TrailKeyFrame"),G$q.prototype.cloneTo=function(G$q){G$q.time=this.time,G$q.inTangent=this.inTangent,G$q.outTangent=this.outTangent,G$q.value=this.value}}(),function(){function G$r(G$q){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new G$Rr,this._curPosition=new G$Rr,this._delVector3=new G$Rr,this._lastFixedVertexPosition=new G$Rr,this._pointAtoBVector3=new G$Rr,this._pointA=new G$Rr,this._pointB=new G$Rr,this._owner=G$q,this._id=G$r.renderElementCount++,0==this._id?G$q._owner.transform.position.cloneTo(this._lastPosition):G$q._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new G$dr(G$k.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new G$dr(G$k.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}G$j(G$r,"laya.d3.core.trail.TrailRenderElement");var G$q=G$r.prototype;G$M.imps(G$q,{"laya.d3.core.render.IRenderable":!0}),G$q._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},G$q._addTrailByFirstPosition=function(G$q,G$r){G$Rr.subtract(G$r,G$q,this._delVector3),G$Rr.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),G$Rr.normalize(this._pointAtoBVector3,this._pointAtoBVector3),G$Rr.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(G$q),G$q.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},G$q._addTrailByNextPosition=function(G$q){G$Rr.subtract(G$q,this._lastFixedVertexPosition,this._delVector3),G$Rr.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),G$Rr.normalize(this._pointAtoBVector3,this._pointAtoBVector3),G$Rr.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=G$Rr.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=G$nq.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(G$q),G$q.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(G$q),this._virtualVerticesCount=2)},G$q._updateVerticesByPosition=function(G$q){this._pointe=G$q.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},G$q._updateVertexBuffer2=function(){var G$q,G$r=0,G$v=0,G$H=0;for(G$H=0,G$q=(this._verticesCount+this._virtualVerticesCount)/2;G$H<G$q;G$H++)G$v=0==this._owner.textureMode?(this._VerticesToTailLength[G$H]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[G$H],this._vertices2[G$r++]=1-G$v,this._vertices2[G$r++]=1-G$v;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},G$q._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},G$q._updateDisappear=function(){var G$q,G$r=0;for(G$r=this._curDisappearIndex,G$q=(this._verticesCount+this._virtualVerticesCount)/2;G$r<G$q;G$r++)this._owner._curtime-this._everyGroupVertexBirthTime[G$r]>=this._owner.time+G$nq.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},G$q._beforeRender=function(G$q){return this._camera=G$q.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),G$Rr.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},G$q._render=function(G$q){this._isDead||(G$E.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),G$V.drawCall++,G$V.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},G$q._getVertexBuffer=function(G$q){return void 0===G$q&&(G$q=0),0===G$q?this._vertexBuffer1:1===G$q?this._vertexBuffer2:null},G$q._getVertexBuffers=function(){return this._vertexBuffers},G$q._getIndexBuffer=function(){return null},G$q.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},G$q._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},G$D(0,G$q,"_vertexBufferCount",function(){return this._vertexBuffers.length}),G$D(0,G$q,"triangleCount",function(){return 0}),G$r.renderElementCount=0}(),function(){function G$q(){}G$j(G$q,"laya.d3.core.trail.VertexTrail");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration1}),G$D(1,G$q,"vertexDeclaration1",function(){return G$q._vertexDeclaration1}),G$D(1,G$q,"vertexDeclaration2",function(){return G$q._vertexDeclaration2}),G$K(G$q,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new G$yq(32,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",41),new G$Rq(24,"single",33),new G$Rq(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new G$yq(4,[new G$Rq(0,"single",38)])}]),G$q}()),G$qq=function(){function G$p(G$q){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=G$q}G$j(G$p,"laya.d3.graphics.DynamicBatch");var G$q=G$p.prototype;return G$M.imps(G$q,{"laya.d3.core.render.IRenderable":!0}),G$q._getVertexBuffer=function(G$q){return void 0===G$q&&(G$q=0),0===G$q?this._vertexBuffer:null},G$q._getIndexBuffer=function(){return this._indexBuffer},G$q._getCombineRenderElementFromPool=function(G$q,G$r,G$v){var G$H=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return G$H||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=G$H=new G$S,G$H._sprite3D=new G$lr),G$H._sprite3D._render._renderUpdate(G$v),G$H},G$q._getRenderElement=function(G$q,G$r,G$v){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*G$p.maxVertexCount),this._indexDatas=new Uint16Array(G$p.maxIndexCount),this._vertexBuffer=G$dr.create(this._vertexDeclaration,G$p.maxVertexCount,35048),this._indexBuffer=G$br.create("ushort",G$p.maxIndexCount,35048));for(var G$H=this._merageElements.length=0,G$A=0,G$y=0,G$R=this._combineRenderElements.length;G$y<G$R;G$y++){var G$W=this._combineRenderElements[G$y],G$O=G$W.getDynamicBatchBakedVertexs(0),G$N=G$W.getBakedIndices(),G$x=G$W._sprite3D.transform._isFrontFaceInvert,G$K=G$H/(this._vertexDeclaration.vertexStride/4),G$T=G$A,G$j=G$T+G$N.length;G$W._tempBatchIndexStart=G$T,G$W._tempBatchIndexEnd=G$j,this._indexDatas.set(G$N,G$A);var G$D=0;if(G$x)for(G$D=G$T;G$D<G$j;G$D+=3){this._indexDatas[G$D]=G$K+this._indexDatas[G$D];var G$g=this._indexDatas[G$D+1],G$X=this._indexDatas[G$D+2];this._indexDatas[G$D+1]=G$K+G$X,this._indexDatas[G$D+2]=G$K+G$g}else for(G$D=G$T;G$D<G$j;G$D+=3)this._indexDatas[G$D]=G$K+this._indexDatas[G$D],this._indexDatas[G$D+1]=G$K+this._indexDatas[G$D+1],this._indexDatas[G$D+2]=G$K+this._indexDatas[G$D+2];G$A+=G$N.length,this._vertexDatas.set(G$O,G$H),G$H+=G$O.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),G$y=this._combineRenderElementPoolIndex=0,G$R=this._materials.length;G$y<G$R;G$y++){var G$m=this._getCombineRenderElementFromPool(G$q,G$r,G$v);G$m._type=2,G$m._staticBatch=null;var G$B=(G$m.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[G$y]]._tempBatchIndexStart,G$e=G$y+1===this._materialToRenderElementsOffsets.length?G$A:this._combineRenderElements[this._materialToRenderElementsOffsets[G$y+1]]._tempBatchIndexStart;G$m._tempBatchIndexStart=G$B,G$m._tempBatchIndexEnd=G$e,G$m._material=this._materials[G$y],this._merageElements.push(G$m)}},G$q._addCombineRenderObjTest=function(G$q){var G$r=G$q.renderObj,G$v=this._currentCombineIndexCount+G$r._getIndexBuffer().indexCount,G$H=this._currentCombineVertexCount+G$r._getVertexBuffer().vertexCount;return!(G$p.maxVertexCount<G$H||G$p.maxIndexCount<G$v)},G$q._addCombineRenderObj=function(G$q){var G$r=G$q.renderObj;this._combineRenderElements.push(G$q),this._currentCombineIndexCount=this._currentCombineIndexCount+G$r._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+G$r._getVertexBuffer().vertexCount},G$q._addCombineMaterial=function(G$q){this._materials.push(G$q)},G$q._addMaterialToRenderElementOffset=function(G$q){this._materialToRenderElementsOffsets.push(G$q)},G$q._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},G$q._addToRenderQueue=function(G$q,G$r,G$v,G$H){this._getRenderElement(G$r,G$v,G$H);for(var G$A=0,G$y=this._materials.length;G$A<G$y;G$A++)G$q.getRenderQueue(this._materials[G$A].renderQueue)._addDynamicBatchElement(this._merageElements[G$A])},G$q._beforeRender=function(G$q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$q._render=function(G$q){var G$r=G$q._batchIndexEnd-G$q._batchIndexStart;G$E.mainContext.drawElements(4,G$r,5123,2*G$q._batchIndexStart),G$V.drawCall++,G$V.trianglesFaces+=G$r/3},G$q._getVertexBuffers=function(){return null},G$D(0,G$q,"_vertexBufferCount",function(){return 1}),G$D(0,G$q,"triangleCount",function(){return this._indexBuffer.indexCount/3}),G$D(0,G$q,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),G$p.maxVertexCount=2e4,G$p.maxIndexCount=4e4,G$p.maxCombineTriangleCount=10,G$p}(),G$rq=function(){function G$p(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}G$j(G$p,"laya.d3.graphics.DynamicBatchManager");var G$q=G$p.prototype;return G$q.getDynamicBatch=function(G$q,G$r){var G$v,G$H=G$q.id.toString()+G$r;return this._dynamicBatches[G$H]?G$v=this._dynamicBatches[G$H]:this._dynamicBatches[G$H]=G$v=new G$qq(G$q),G$v},G$q._garbageCollection=function(){for(var G$q in this._dynamicBatches)0===this._dynamicBatches[G$q].combineRenderElementsCount&&delete this._dynamicBatches[G$q]},G$q._addPrepareRenderElement=function(G$q){this._prepareDynamicBatchCombineElements.push(G$q)},G$q._finishCombineDynamicBatch=function(G$q){var G$r,G$v,G$H;this._prepareDynamicBatchCombineElements.sort(G$p._sortPrepareDynamicBatch);for(var G$A,G$y,G$R,G$W,G$O,G$N=-1,G$x=!0,G$K=0,G$T=-1,G$j=0,G$D=this._prepareDynamicBatchCombineElements.length;G$j<G$D;G$j++){var G$g=(G$y=this._prepareDynamicBatchCombineElements[G$j]).renderObj._getVertexBuffer(0).vertexDeclaration,G$X=G$v!==G$g;G$X&&(G$K=0,G$v=G$g);var G$m=G$K!==G$N;if(G$m&&(G$N=G$K),(G$X||G$m)&&(G$R=this.getDynamicBatch(G$g,G$K),G$r=null),G$x)if(G$R._addCombineRenderObjTest(G$y)){if(G$r!==(G$A=G$y._material))G$W&&(G$q.getRenderQueue(G$O._material.renderQueue)._addRenderElement(G$O),G$O=G$W=null,G$T=-1),G$W=G$A,G$T=G$R.combineRenderElementsCount,G$O=G$y,G$r=G$A;else if(G$W){var G$B=G$O.renderObj,G$e=G$y.renderObj;G$B._getVertexBuffer().vertexCount+G$e._getVertexBuffer().vertexCount>G$qq.maxVertexCount||G$B._getIndexBuffer().indexCount+G$e._getIndexBuffer().indexCount>G$qq.maxIndexCount?(G$q.getRenderQueue(G$O._material.renderQueue)._addRenderElement(G$O),G$W=G$A,G$T=G$R.combineRenderElementsCount,G$O=G$y):(G$R._addCombineMaterial(G$W),G$R._addMaterialToRenderElementOffset(G$T),G$R._addCombineRenderObj(G$O),G$O=G$W=null,G$T=-1,G$R._addCombineRenderObj(G$y))}else G$R._addCombineRenderObj(G$y);G$x=!0}else G$W&&(G$q.getRenderQueue(G$O._material.renderQueue)._addRenderElement(G$O),G$O=G$W=null,G$T=-1),G$K++,G$x=!1;else G$H=this._prepareDynamicBatchCombineElements[G$j-1],G$R._addMaterialToRenderElementOffset(G$R.combineRenderElementsCount),G$r=G$H._material,G$R._addCombineMaterial(G$r),G$R._addCombineRenderObj(G$H),G$x=!0,G$r!==(G$A=G$y._material)?(G$W=G$A,G$T=G$R.combineRenderElementsCount,G$O=G$y):G$R._addCombineRenderObj(G$y),G$r=G$A}G$W&&(G$q.getRenderQueue(G$O._material.renderQueue)._addRenderElement(G$O),G$O=G$W=null,G$T=-1),this._prepareDynamicBatchCombineElements.length=0},G$q._clearRenderElements=function(){for(var G$q in this._dynamicBatches)this._dynamicBatches[G$q]._clearRenderElements()},G$q._addToRenderQueue=function(G$q,G$r,G$v,G$H){for(var G$A in this._dynamicBatches){var G$y=this._dynamicBatches[G$A];0<G$y.combineRenderElementsCount&&G$y._addToRenderQueue(G$q,G$r,G$v,G$H)}},G$q.dispose=function(){this._dynamicBatches=null},G$p._sortPrepareDynamicBatch=function(G$q,G$r){return G$q._mainSortID-G$r._mainSortID},G$p}(),G$vq=function(){function G$q(){}return G$j(G$q,"laya.d3.graphics.FrustumCulling"),G$q.renderShadowObjectCulling=function(G$q,G$r,G$v,G$H,G$A){var G$y=0,G$R=0,G$W=0,G$O=0;for(G$y=0,G$W=G$v.length;G$y<G$W;G$y++){var G$N=G$v[G$y];G$N&&G$N._clearRenderElements()}var G$x,G$K,G$T,G$j=G$q._cullingRenders;if(1<G$A){for(G$y=0,G$W=G$q._cullingRendersLength;G$y<G$W;G$y++)if((G$x=G$j[G$y]).castShadow&&G$Z.isVisible(G$x._owner.layer.mask)&&G$x.enable)for(var G$D=1,G$g=G$r.length;G$D<G$g;G$D++)if(G$K=G$v[G$D-1],0!==G$r[G$D].containsBoundSphere(G$x.boundingSphere))for(G$R=0,G$O=(G$T=G$x._renderElements).length;G$R<G$O;G$R++)G$K._addRenderElement(G$T[G$R])}else for(G$y=0,G$W=G$q._cullingRendersLength;G$y<G$W;G$y++)if((G$x=G$j[G$y]).castShadow&&G$Z.isVisible(G$x._owner.layer.mask)&&G$x.enable&&0!==G$r[0].containsBoundSphere(G$x.boundingSphere))for(G$x._renderUpdate(G$H),G$K=G$v[0],G$R=0,G$O=(G$T=G$x._renderElements).length;G$R<G$O;G$R++)G$K._addRenderElement(G$T[G$R])},G$q.renderShadowObjectCullingOctree=function(G$q,G$r,G$v,G$H,G$A){for(var G$y=0,G$R=G$v.length;G$y<G$R;G$y++){var G$W=G$v[G$y];G$W&&G$W._clearRenderElements()}1<G$A?G$q.treeRoot.cullingShadowObjects(G$r,G$v,!0,0,G$q):G$q.treeRoot.cullingShadowObjectsOnePSSM(G$r[0],G$v,G$H,!0,0,G$q)},G$q.renderObjectCulling=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=0,G$W=0,G$O=0,G$N=0,G$x=G$r._quenes,G$K=G$r._dynamicBatchManager,G$T=G$r._cullingRenders;for(G$R=0,G$W=G$x.length;G$R<G$W;G$R++){var G$j=G$x[G$R];G$j&&G$j._clearRenderElements()}var G$D=G$Hq._staticBatchManagers;for(G$R=0,G$W=G$D.length;G$R<G$W;G$R++)G$D[G$R]._clearRenderElements();G$K._clearRenderElements();var G$g=G$v.transform.position;for(G$R=0,G$W=G$r._cullingRendersLength;G$R<G$W;G$R++){var G$X=G$T[G$R];if(G$Z.isVisible(G$X._owner.layer.mask)&&G$X.enable&&0!==G$q.containsBoundSphere(G$X.boundingSphere)&&G$X._renderUpdate(G$y)){G$X._distanceForSort=G$Rr.distance(G$X.boundingSphere.center,G$g)+G$X.sortingFudge;var G$m=G$X._renderElements;for(G$O=0,G$N=G$m.length;G$O<G$N;G$O++){var G$B=G$m[G$O],G$e=G$B._staticBatch;if(G$e&&G$e._material===G$B._material)G$e._addBatchRenderElement(G$B);else{var G$p=G$B.renderObj;G$p.triangleCount<10&&1===G$p._vertexBufferCount&&G$p._getIndexBuffer()&&G$B._material.renderQueue<2&&G$B._canDynamicBatch&&!G$X._owner.isStatic?G$K._addPrepareRenderElement(G$B):G$r.getRenderQueue(G$B._material.renderQueue)._addRenderElement(G$B)}}}}for(G$R=0,G$W=G$D.length;G$R<G$W;G$R++)G$D[G$R]._addToRenderQueue(G$r,G$H,G$A,G$y);G$K._finishCombineDynamicBatch(G$r),G$K._addToRenderQueue(G$r,G$H,G$A,G$y)},G$q.renderObjectCullingOctree=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=0,G$W=0,G$O=G$r._quenes,G$N=G$r._dynamicBatchManager;for(G$R=0,G$W=G$O.length;G$R<G$W;G$R++){var G$x=G$O[G$R];G$x&&G$x._clearRenderElements()}var G$K=G$Hq._staticBatchManagers;for(G$R=0,G$W=G$K.length;G$R<G$W;G$R++)G$K[G$R]._clearRenderElements();for(G$N._clearRenderElements(),G$r._cullingRenders.length=0,G$r.treeRoot.cullingObjects(G$q,!0,0,G$v.transform.position,G$y),G$R=0,G$W=G$K.length;G$R<G$W;G$R++)G$K[G$R]._addToRenderQueue(G$r,G$H,G$A,G$y);G$N._finishCombineDynamicBatch(G$r),G$N._addToRenderQueue(G$r,G$H,G$A,G$y)},G$q.renderObjectCullingNoBoundFrustum=function(G$q,G$r,G$v,G$H,G$A){var G$y=0,G$R=0,G$W=0,G$O=0,G$N=G$q._quenes,G$x=G$q._dynamicBatchManager,G$K=G$q._cullingRenders;for(G$y=0,G$R=G$N.length;G$y<G$R;G$y++){var G$T=G$N[G$y];G$T&&G$T._clearRenderElements()}var G$j=G$Hq._staticBatchManagers;for(G$y=0,G$R=G$j.length;G$y<G$R;G$y++)G$j[G$y]._clearRenderElements();G$x._clearRenderElements();var G$D=G$r.transform.position;for(G$y=0,G$R=G$q._cullingRendersLength;G$y<G$R;G$y++){var G$g=G$K[G$y];if(G$Z.isVisible(G$g._owner.layer.mask)&&G$g.enable){G$g._renderUpdate(G$A),G$g._distanceForSort=G$Rr.distance(G$g.boundingSphere.center,G$D)+G$g.sortingFudge;var G$X=G$g._renderElements;for(G$W=0,G$O=G$X.length;G$W<G$O;G$W++){var G$m=G$X[G$W],G$B=G$m._staticBatch;if(G$B&&G$B._material===G$m._material)G$B._addBatchRenderElement(G$m);else{var G$e=G$m.renderObj;G$e.triangleCount<10&&1===G$e._vertexBufferCount&&G$e._getIndexBuffer()&&G$m._material.renderQueue<2&&G$m._canDynamicBatch&&!G$g._owner.isStatic?G$x._addPrepareRenderElement(G$m):G$q.getRenderQueue(G$m._material.renderQueue)._addRenderElement(G$m)}}}}for(G$y=0,G$R=G$j.length;G$y<G$R;G$y++)G$j[G$y]._addToRenderQueue(G$q,G$v,G$H,G$A);G$x._finishCombineDynamicBatch(G$q),G$x._addToRenderQueue(G$q,G$v,G$H,G$A)},G$q}(),G$Hq=function(){function G$y(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}G$j(G$y,"laya.d3.graphics.StaticBatchManager");var G$q=G$y.prototype;return G$q._finishInit=function(){for(var G$q in this._staticBatches)this._staticBatches[G$q]._finishInit();this._initBatchRenderElements.length=0},G$q._initStaticBatchs=function(G$q){throw new Error("StaticBatchManager:must override this function.")},G$q._addInitBatchSprite=function(G$q){for(var G$r=G$q._render._renderElements,G$v=0,G$H=G$r.length;G$v<G$H;G$v++)this._initBatchRenderElements.push(G$r[G$v])},G$q._clearRenderElements=function(){for(var G$q in this._staticBatches)this._staticBatches[G$q]._clearRenderElements()},G$q._garbageCollection=function(G$q){var G$r=G$q._staticBatch,G$v=G$r._initBatchRenderElements,G$H=G$v.indexOf(G$q);G$v.splice(G$H,1),0===G$v.length&&(G$r.dispose(),delete this._staticBatches[G$r._key])},G$q._addToRenderQueue=function(G$q,G$r,G$v,G$H){for(var G$A in this._staticBatches){var G$y=this._staticBatches[G$A];0<G$y._batchRenderElements.length&&G$y._updateToRenderQueue(G$q,G$H)}},G$q.dispose=function(){this._staticBatches=null},G$y._addToStaticBatchQueue=function(G$q){G$q instanceof laya.d3.core.RenderableSprite3D&&G$q._addToInitStaticBatchManager();for(var G$r=0,G$v=G$q.numChildren;G$r<G$v;G$r++)G$y._addToStaticBatchQueue(G$q._childs[G$r])},G$y.combine=function(G$q,G$r){var G$v,G$H=0,G$A=0;if(G$r)for(G$H=0,G$A=G$r.length;G$H<G$A;G$H++){G$r[G$H]._addToInitStaticBatchManager()}else G$q&&G$y._addToStaticBatchQueue(G$q);for(G$H=0,G$A=G$y._staticBatchManagers.length;G$H<G$A;G$H++)(G$v=G$y._staticBatchManagers[G$H])._initStaticBatchs(G$q),G$v._finishInit()},G$y._staticBatchManagers=[],G$y}(),G$Aq=function(){function G$q(G$q,G$r,G$v){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=G$q,this._manager=G$r,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=G$v}G$j(G$q,"laya.d3.graphics.StaticBatch");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),G$r._binarySearch=function(G$q){for(var G$r=0,G$v=this._batchRenderElements.length-1,G$H=0;G$r<=G$v;)G$H=Math.floor((G$r+G$v)/2),this._compareBatchRenderElement(this._batchRenderElements[G$H],G$q)?G$v=G$H-1:G$r=G$H+1;return G$r},G$r._compareBatchRenderElement=function(G$q,G$r){throw new Error("StaticBatch:must override this function.")},G$r._getVertexDecLightMap=function(G$q){return G$q===G$bq.vertexDeclaration?G$Zq.vertexDeclaration:G$q===G$cq.vertexDeclaration?G$sq.vertexDeclaration:G$q===G$aq.vertexDeclaration?G$pq.vertexDeclaration:G$q===G$tq.vertexDeclaration?null:G$q===G$gq.vertexDeclaration?G$Xq.vertexDeclaration:G$q===G$uq.vertexDeclaration?G$oq.vertexDeclaration:G$q===G$Eq.vertexDeclaration?G$Qq.vertexDeclaration:G$q===G$dq.vertexDeclaration?G$Yq.vertexDeclaration:G$q===G$cq.vertexDeclaration?G$sq.vertexDeclaration:G$q===G$Jq.vertexDeclaration?G$Mq.vertexDeclaration:G$q===G$tq.vertexDeclaration?null:G$q===G$gq.vertexDeclaration?G$Xq.vertexDeclaration:G$q===G$Iq.vertexDeclaration?G$Cq.vertexDeclaration:G$q===G$Eq.vertexDeclaration?G$Qq.vertexDeclaration:G$q},G$r._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},G$r._addBatchRenderElement=function(G$q){this._batchRenderElements.splice(this._binarySearch(G$q),0,G$q)},G$r._updateToRenderQueue=function(G$q,G$r){this._combineRenderElementPoolIndex=0,this._getRenderElement(G$q.getRenderQueue(this._material.renderQueue)._renderElements,G$q,G$r)},G$r._getRenderElement=function(G$q,G$r,G$v){throw new Error("StaticBatch:must override this function.")},G$r._finishInit=function(){throw new Error("StaticBatch:must override this function.")},G$r._clearRenderElements=function(){this._batchRenderElements.length=0},G$r.dispose=function(){},G$r._getVertexBuffer=function(G$q){return void 0===G$q&&(G$q=0),null},G$r._getIndexBuffer=function(){return null},G$r._beforeRender=function(G$q){return!0},G$r._render=function(G$q){},G$r._getVertexBuffers=function(){return null},G$D(0,G$r,"_vertexBufferCount",function(){return 1}),G$D(0,G$r,"triangleCount",function(){return 0}),G$q.combine=function(G$q){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),G$Hq.combine(G$q)},G$q.maxBatchVertexCount=65535,G$q}(),G$yq=function(){function G$R(G$q,G$r){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++G$R._uniqueIDCounter,this._id>G$R.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",G$R.maxVertexDeclaration);this._shaderValues=new G$Tr,this._vertexElementsDic={},this._vertexStride=G$q,this._vertexElements=G$r;for(var G$v=0;G$v<G$r.length;G$v++){var G$H=G$r[G$v],G$A=G$H.elementUsage;this._vertexElementsDic[G$A]=G$H;var G$y=[G$R._getTypeSize(G$H.elementFormat)/4,5126,!1,this._vertexStride,G$H.offset];switch(this._shaderValues.setValue(G$A,G$y),G$A){case 1:this._addShaderDefine(G$Vr.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(G$Vr.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(G$Vr.SHADERDEFINE_UV1)}}}G$j(G$R,"laya.d3.graphics.VertexDeclaration");var G$q=G$R.prototype;return G$q._addShaderDefine=function(G$q){this._shaderDefineValue|=G$q},G$q._removeShaderDefine=function(G$q){this._shaderDefineValue&=~G$q},G$q.getVertexElements=function(){return this._vertexElements.slice()},G$q.getVertexElementByUsage=function(G$q){return this._vertexElementsDic[G$q]},G$q.unBinding=function(){},G$D(0,G$q,"shaderDefineValue",function(){return this._shaderDefineValue}),G$D(0,G$q,"id",function(){return this._id}),G$D(0,G$q,"vertexStride",function(){return this._vertexStride}),G$D(0,G$q,"shaderValues",function(){return this._shaderValues}),G$R._getTypeSize=function(G$q){switch(G$q){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},G$R.getVertexStride=function(G$q){for(var G$r=0,G$v=0;G$v<G$q.Length;G$v++){var G$H=G$q[G$v],G$A=G$H.offset+G$R._getTypeSize(G$H.elementFormat);G$r<G$A&&(G$r=G$A)}return G$r},G$R._maxVertexDeclarationBit=1e3,G$R._uniqueIDCounter=1,G$K(G$R,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),G$R}(),G$Rq=function(){function G$q(G$q,G$r,G$v){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=G$q,this.elementFormat=G$r,this.elementUsage=G$v}return G$j(G$q,"laya.d3.graphics.VertexElement"),G$q}(),G$Wq=(function(){function G$q(){}G$j(G$q,"laya.d3.graphics.VertexElementFormat"),G$q.Single="single",G$q.Vector2="vector2",G$q.Vector3="vector3",G$q.Vector4="vector4",G$q.Color="color",G$q.Byte4="byte4",G$q.Short2="short2",G$q.Short4="short4",G$q.NormalizedShort2="normalizedshort2",G$q.NormalizedShort4="normalizedshort4",G$q.HalfVector2="halfvector2",G$q.HalfVector4="halfvector4"}(),function(){function G$q(){}G$j(G$q,"laya.d3.graphics.VertexElementUsage"),G$q.POSITION0=0,G$q.COLOR0=1,G$q.TEXTURECOORDINATE0=2,G$q.NORMAL0=3,G$q.BINORMAL0=4,G$q.TANGENT0=5,G$q.BLENDINDICES0=6,G$q.BLENDWEIGHT0=7,G$q.DEPTH0=8,G$q.FOG0=9,G$q.POINTSIZE0=10,G$q.SAMPLE0=11,G$q.TESSELLATEFACTOR0=12,G$q.COLOR1=13,G$q.NEXTTEXTURECOORDINATE0=14,G$q.TEXTURECOORDINATE1=15,G$q.NEXTTEXTURECOORDINATE1=16,G$q.CORNERTEXTURECOORDINATE0=17,G$q.VELOCITY0=18,G$q.STARTCOLOR0=19,G$q.STARTSIZE=20,G$q.AGEADDSCALE0=21,G$q.STARTROTATION=22,G$q.ENDCOLOR0=23,G$q.STARTLIFETIME=24,G$q.TIME0=33,G$q.SHAPEPOSITIONSTARTLIFETIME=30,G$q.DIRECTIONTIME=32,G$q.SIZEROTATION0=27,G$q.RADIUS0=28,G$q.RADIAN0=29,G$q.STARTSPEED=31,G$q.RANDOM0=34,G$q.RANDOM1=35,G$q.SIMULATIONWORLDPOSTION=36,G$q.SIMULATIONWORLDROTATION=37,G$q.TEXTURECOORDINATE0X=38,G$q.TEXTURECOORDINATE0X1=39,G$q.TEXTURECOORDINATE0Y=40,G$q.OFFSETVECTOR=41}(),function(){function G$q(G$q,G$r,G$v){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=G$q,this._textureCoordinate0=G$r,this._time=G$v}G$j(G$q,"laya.d3.graphics.VertexGlitter");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate0}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"time",function(){return this._time}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(24,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector2",2),new G$Rq(20,"single",33)])}])}(),function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=G$q,this._position=G$r,this._velocity=G$v,this._startColor=G$H,this._endColor=G$A,this._sizeRotation=G$y,this._radius=G$R,this._radian=G$W,this._ageAddScale=G$O,this._time=G$N}G$j(G$q,"laya.d3.graphics.VertexParticle");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"endColor",function(){return this._endColor}),G$D(0,G$r,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),G$D(0,G$r,"sizeRotation",function(){return this._sizeRotation}),G$D(0,G$r,"velocity",function(){return this._velocity}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"startColor",function(){return this._startColor}),G$D(0,G$r,"radius",function(){return this._radius}),G$D(0,G$r,"radian",function(){return this._radian}),G$D(0,G$r,"ageAddScale",function(){return this._ageAddScale}),G$D(0,G$r,"time",function(){return this._time}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(116,[new G$Rq(0,"vector4",17),new G$Rq(16,"vector3",0),new G$Rq(28,"vector3",18),new G$Rq(40,"vector4",19),new G$Rq(56,"vector4",23),new G$Rq(72,"vector3",27),new G$Rq(84,"vector2",28),new G$Rq(92,"vector4",29),new G$Rq(108,"single",24),new G$Rq(112,"single",33)])}])}(),function(){function G$q(G$q){this._position=null,this._position=G$q}G$j(G$q,"laya.d3.graphics.VertexPosition");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(12,[new G$Rq(0,"vector3",0)])}]),G$q}()),G$Oq=function(){function G$q(G$q,G$r){this._position=null,this._normal=null,this._position=G$q,this._normal=G$r}G$j(G$q,"laya.d3.graphics.VertexPositionNormal");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(24,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3)])}]),G$q}(),G$Nq=function(){function G$q(G$q,G$r,G$v){this._position=null,this._normal=null,this._color=null,this._position=G$q,this._normal=G$r,this._color=G$v}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColor");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(40,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1)])}]),G$q}(),G$xq=function(){function G$q(G$q,G$r,G$v,G$H,G$A){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._blendIndex=G$H,this._blendWeight=G$A}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorSkin");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(72,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector4",7),new G$Rq(56,"vector4",6)])}]),G$q}(),G$Kq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._tangent=G$H,this._blendIndex=G$A,this._blendWeight=G$y}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(88,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector4",7),new G$Rq(56,"vector4",6),new G$Rq(72,"vector4",5)])}]),G$q}(),G$Tq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._tangent=G$H,this._blendIndex=G$A,this._blendWeight=G$y}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(84,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector4",7),new G$Rq(56,"vector4",6),new G$Rq(72,"vector3",5)])}]),G$q}(),G$jq=function(){function G$q(G$q,G$r,G$v,G$H){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._tangent=G$H}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(56,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector4",5)])}]),G$q}(),G$Dq=function(){function G$q(G$q,G$r,G$v,G$H){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._tangent=G$H}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(52,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector3",5)])}]),G$q}(),G$gq=function(){function G$q(G$q,G$r,G$v,G$H){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate=G$H}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTexture");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(48,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2)])}]),G$q}(),G$Xq=function(){function G$q(G$q,G$r,G$v,G$H,G$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate0=G$H,this._textureCoordinate1=G$A}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(56,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector2",15)])}]),G$q}(),G$mq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate0=G$H,this._textureCoordinate1=G$A,this._blendIndex=G$y,this._blendWeight=G$R}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(88,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector2",15),new G$Rq(56,"vector4",7),new G$Rq(72,"vector4",6)])}]),G$q}(),G$Bq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate0=G$H,this._textureCoordinate1=G$A,this._tangent=G$y,this._blendIndex=G$R,this._blendWeight=G$W}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(104,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector2",15),new G$Rq(56,"vector4",7),new G$Rq(72,"vector4",6),new G$Rq(88,"vector4",5)])}]),G$q}(),G$eq=function(){function G$q(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$r.VertexPositionNormalColorTexture0SkinTangent=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate0=G$H,this._textureCoordinate1=G$A,this._tangent=G$y,this._blendIndex=G$R,this._blendWeight=G$W},G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(100,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector2",15),new G$Rq(56,"vector4",7),new G$Rq(72,"vector4",6),new G$Rq(88,"vector3",5)])}]),G$q}(),G$pq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate0=G$H,this._textureCoordinate1=G$A,this._tangent=G$y}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(72,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector2",15),new G$Rq(56,"vector4",5)])}]),G$q}(),G$Mq=function(){function G$q(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$r.VertexPositionNormalColorTexture0Tangent=function(G$q,G$r,G$v,G$H,G$A,G$y){this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate0=G$H,this._textureCoordinate1=G$A,this._tangent=G$y},G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(68,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector2",15),new G$Rq(56,"vector3",5)])}]),G$q}(),G$zq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate=G$H,this._blendIndex=G$A,this._blendWeight=G$y}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(80,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector4",7),new G$Rq(64,"vector4",6)])}]),G$q}(),G$Pq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate=G$H,this._tangent=G$A,this._blendIndex=G$y,this._blendWeight=G$R}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(96,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector4",7),new G$Rq(64,"vector4",6),new G$Rq(80,"vector4",5)])}]),G$q}(),G$Vq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate=G$H,this._tangent=G$A,this._blendIndex=G$y,this._blendWeight=G$R}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(92,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector4",7),new G$Rq(64,"vector4",6),new G$Rq(80,"vector3",5)])}]),G$q}(),G$aq=function(){function G$q(G$q,G$r,G$v,G$H,G$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate=G$H,this._tangent=G$A}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(64,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector4",5)])}]),G$q}(),G$Jq=function(){function G$q(G$q,G$r,G$v,G$H,G$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._color=G$v,this._textureCoordinate=G$H,this._tangent=G$A}G$j(G$q,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"color",function(){return this._color}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(60,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",1),new G$Rq(40,"vector2",2),new G$Rq(48,"vector3",5)])}]),G$q}(),G$$q=function(){function G$q(G$q,G$r,G$v){this._position=null,this._normal=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._tangent=G$v}G$j(G$q,"laya.d3.graphics.VertexPositionNormalSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(40,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector4",5)])}]),G$q}(),G$Gq=function(){function G$q(G$q,G$r,G$v){this._position=null,this._normal=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._tangent=G$v}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(36,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector3",5)])}]),G$q}(),G$Eq=function(){function G$q(G$q,G$r,G$v){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTexture");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(32,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2)])}]),G$q}(),G$Qq=function(){function G$q(G$q,G$r,G$v,G$H){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=G$q,this._normal=G$r,this._textureCoordinate0=G$v,this._textureCoordinate1=G$H}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(40,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector2",15)])}]),G$q}(),G$sq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=G$q,this._normal=G$r,this._textureCoordinate0=G$v,this._textureCoordinate1=G$H,this._blendIndex=G$A,this._blendWeight=G$y}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(72,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector2",15),new G$Rq(40,"vector4",7),new G$Rq(56,"vector4",6)])}]),G$q}(),G$Zq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._textureCoordinate0=G$v,this._textureCoordinate1=G$H,this._tangent=G$A,this._blendIndex=G$y,this._blendWeight=G$R}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(88,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector2",15),new G$Rq(40,"vector4",7),new G$Rq(56,"vector4",6),new G$Rq(72,"vector4",5)])}]),G$q}(),G$Yq=function(){function G$q(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$r.VertexPositionNormalTexture0SkinTangent=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){this._position=G$q,this._normal=G$r,this._textureCoordinate0=G$v,this._textureCoordinate1=G$H,this._tangent=G$A,this._blendIndex=G$y,this._blendWeight=G$R},G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(84,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector2",15),new G$Rq(40,"vector4",7),new G$Rq(56,"vector4",6),new G$Rq(72,"vector3",5)])}]),G$q}(),G$oq=function(){function G$q(G$q,G$r,G$v,G$H,G$A){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._textureCoordinate0=G$v,this._textureCoordinate1=G$H,this._tangent=G$A}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(56,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector2",15),new G$Rq(40,"vector4",5)])}]),G$q}(),G$Cq=function(){function G$q(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$r.VertexPositionNormalTexture0Tangent=function(G$q,G$r,G$v,G$H,G$A){this._position=G$q,this._normal=G$r,this._textureCoordinate0=G$v,this._textureCoordinate1=G$H,this._tangent=G$A},G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(52,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector2",15),new G$Rq(40,"vector3",5)])}]),G$q}(),G$cq=function(){function G$q(G$q,G$r,G$v,G$H,G$A){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v,this._blendIndex=G$H,this._blendWeight=G$A}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTextureSkin");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(64,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector4",7),new G$Rq(48,"vector4",6)])}]),G$q}(),G$bq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v,this._tangent=G$H,this._blendIndex=G$A,this._blendWeight=G$y}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(80,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector4",7),new G$Rq(48,"vector4",6),new G$Rq(64,"vector4",5)])}]),G$q}(),G$dq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v,this._tangent=G$H,this._blendIndex=G$A,this._blendWeight=G$y}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(76,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector4",7),new G$Rq(48,"vector4",6),new G$Rq(64,"vector3",5)])}]),G$q}(),G$uq=function(){function G$q(G$q,G$r,G$v,G$H){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v,this._tangent=G$H}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(48,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector4",5)])}]),G$q}(),G$Iq=function(){function G$q(G$q,G$r,G$v,G$H){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v,this._tangent=G$H}G$j(G$q,"laya.d3.graphics.VertexPositionNormalTextureTangent");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(44,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector3",5)])}]),G$q}(),G$tq=function(){function G$q(G$q,G$r,G$v){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v}G$j(G$q,"laya.d3.graphics.VertexPositionNTBTexture");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(56,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector3",5),new G$Rq(36,"vector3",4),new G$Rq(48,"vector2",2)])}]),G$q}(),G$Fq=function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=G$q,this._normal=G$r,this._textureCoordinate0=G$H,this._textureCoordinate1=G$A,this._tangent=G$y,G$v=G$v,this._blendIndex=G$R,this._blendWeight=G$W}G$j(G$q,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"tangent",function(){return this._tangent}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(0,G$r,"textureCoordinate1",function(){return this._textureCoordinate1}),G$D(0,G$r,"blendIndex",function(){return this._blendIndex}),G$D(0,G$r,"blendWeight",function(){return this._blendWeight}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(96,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector3",5),new G$Rq(36,"vector3",4),new G$Rq(48,"vector2",2),new G$Rq(56,"vector2",15),new G$Rq(64,"vector4",7),new G$Rq(80,"vector4",6)])}]),G$q}(),G$Uq=function(){function G$q(G$q,G$r,G$v){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=G$q,this._normal=G$r,this._textureCoordinate=G$v}G$j(G$q,"laya.d3.graphics.VertexPositionNTBTextureSkin");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"textureCoordinate",function(){return this._textureCoordinate}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(88,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector3",5),new G$Rq(36,"vector3",4),new G$Rq(48,"vector2",2),new G$Rq(56,"vector4",7),new G$Rq(72,"vector4",6)])}]),G$q}(),G$_q=(function(){function G$q(G$q,G$r,G$v,G$H){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=G$q,this._normal=G$r,this._textureCoord0=G$v,this._textureCoord1=G$H}G$j(G$q,"laya.d3.graphics.VertexPositionTerrain");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"normal",function(){return this._normal}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoord0",function(){return this._textureCoord0}),G$D(0,G$r,"textureCoord1",function(){return this._textureCoord1}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(40,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector3",3),new G$Rq(24,"vector2",2),new G$Rq(32,"vector2",15)])}])}(),function(){function G$q(G$q,G$r){this._position=null,this._textureCoordinate0=null,this._position=G$q,this._textureCoordinate0=G$r}G$j(G$q,"laya.d3.graphics.VertexPositionTexture0");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"position",function(){return this._position}),G$D(0,G$r,"textureCoordinate0",function(){return this._textureCoordinate0}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(20,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector2",2)])}]),G$q}()),G$fq=(function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K,G$T,G$j){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=G$q,this._positionStartLifeTime=G$r,this._velocity=G$v,this._startColor=G$H,this._startSize=G$A,this._startRotation0=G$y,this._startRotation1=G$R,this._startRotation2=G$W,this._startLifeTime=G$O,this._time=G$N,this._startSpeed=G$x,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=G$j}G$j(G$q,"laya.d3.graphics.VertexShurikenParticleBillboard");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),G$D(0,G$r,"random1",function(){return this._randoms1}),G$D(0,G$r,"startRotation2",function(){return this._startRotation2}),G$D(0,G$r,"positionStartLifeTime",function(){return this._positionStartLifeTime}),G$D(0,G$r,"velocity",function(){return this._velocity}),G$D(0,G$r,"random0",function(){return this._randoms0}),G$D(0,G$r,"startSize",function(){return this._startSize}),G$D(0,G$r,"startColor",function(){return this._startColor}),G$D(0,G$r,"startRotation0",function(){return this._startRotation0}),G$D(0,G$r,"startRotation1",function(){return this._startRotation1}),G$D(0,G$r,"startLifeTime",function(){return this._startLifeTime}),G$D(0,G$r,"time",function(){return this._time}),G$D(0,G$r,"startSpeed",function(){return this._startSpeed}),G$D(0,G$r,"simulationWorldPostion",function(){return this._simulationWorldPostion}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(152,[new G$Rq(0,"vector4",17),new G$Rq(16,"vector4",30),new G$Rq(32,"vector4",32),new G$Rq(48,"vector4",19),new G$Rq(64,"vector3",20),new G$Rq(76,"vector3",22),new G$Rq(88,"single",31),new G$Rq(92,"vector4",34),new G$Rq(108,"vector4",35),new G$Rq(124,"vector3",36),new G$Rq(136,"vector4",37)])}])}(),function(){function G$q(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K,G$T,G$j){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=G$q,this._positionStartLifeTime=G$r,this._velocity=G$v,this._startColor=G$H,this._startSize=G$A,this._startRotation0=G$y,this._startRotation1=G$R,this._startRotation2=G$W,this._startLifeTime=G$O,this._time=G$N,this._startSpeed=G$x,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=G$j}G$j(G$q,"laya.d3.graphics.VertexShurikenParticleMesh");var G$r=G$q.prototype;G$M.imps(G$r,{"laya.d3.graphics.IVertex":!0}),G$D(0,G$r,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),G$D(0,G$r,"velocity",function(){return this._velocity}),G$D(0,G$r,"position",function(){return this._positionStartLifeTime}),G$D(0,G$r,"random0",function(){return this._randoms0}),G$D(0,G$r,"startSize",function(){return this._startSize}),G$D(0,G$r,"startColor",function(){return this._startColor}),G$D(0,G$r,"startRotation0",function(){return this._startRotation0}),G$D(0,G$r,"startRotation1",function(){return this._startRotation1}),G$D(0,G$r,"random1",function(){return this._randoms1}),G$D(0,G$r,"startRotation2",function(){return this._startRotation2}),G$D(0,G$r,"startLifeTime",function(){return this._startLifeTime}),G$D(0,G$r,"time",function(){return this._time}),G$D(0,G$r,"startSpeed",function(){return this._startSpeed}),G$D(0,G$r,"simulationWorldPostion",function(){return this._simulationWorldPostion}),G$D(0,G$r,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$D(1,G$q,"vertexDeclaration",function(){return G$q._vertexDeclaration}),G$K(G$q,["_vertexDeclaration",function(){return this._vertexDeclaration=new G$yq(172,[new G$Rq(0,"vector3",0),new G$Rq(12,"vector4",1),new G$Rq(28,"vector2",2),new G$Rq(36,"vector4",30),new G$Rq(52,"vector4",32),new G$Rq(68,"vector4",19),new G$Rq(84,"vector3",20),new G$Rq(96,"vector3",22),new G$Rq(108,"single",31),new G$Rq(112,"vector4",34),new G$Rq(128,"vector4",35),new G$Rq(144,"vector3",36),new G$Rq(156,"vector4",37)])}])}(),function(){function G$e(G$q,G$r,G$v,G$H,G$A,G$y){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=G$v,this._materials=G$H,this._subMeshes=G$A,this._materialMap=G$y,this._version=G$r,this._onLoaded(G$q)}G$j(G$e,"laya.d3.loaders.LoadModelV01");var G$q=G$e.prototype;return G$q._onLoaded=function(G$q){this._readData=G$q,this.READ_BLOCK();for(var G$r=0;G$r<this._BLOCK.count;G$r++){var G$v=this._readData.getUint16(),G$H=this._strings[G$v],G$A=this["READ_"+G$H];if(null==G$A)throw new Error("model file err,no this function:"+G$v+" "+G$H);if(!G$A.call(this))break}return this._mesh},G$q.onError=function(){},G$q._readString=function(){return this._strings[this._readData.getUint16()]},G$q.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},G$q.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},G$q.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var G$q=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var G$r=0;G$r<this._STRINGS.size;G$r++)this._strings[G$r]=this._readData.readUTFString();return this._readData.pos=G$q,!0},G$q.READ_MATERIAL=function(){var G$q=this._readData.getUint16(),G$r=(this._readString(),this._readString());return this._materials[G$q]="null"!==G$r?G$m.getRes(this._materialMap[G$r]):new G$Gr,!0},G$q.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var G$q,G$r=this._readData.__getBuffer(),G$v=0,G$H=this._readData.getUint32(),G$A=this._readData.getUint32(),G$y=(new Float32Array(G$r.slice(G$H+this._DATA.offset,G$H+this._DATA.offset+G$A)),this._readData.getUint32()),G$R=this._readData.getUint32(),G$W=new Float32Array(G$r.slice(G$y+this._DATA.offset,G$y+this._DATA.offset+G$R));for(this.mesh._inverseBindPoses=[],G$v=0,G$q=G$W.length;G$v<G$q;G$v+=16){var G$O=new G$qr(G$W[G$v+0],G$W[G$v+1],G$W[G$v+2],G$W[G$v+3],G$W[G$v+4],G$W[G$v+5],G$W[G$v+6],G$W[G$v+7],G$W[G$v+8],G$W[G$v+9],G$W[G$v+10],G$W[G$v+11],G$W[G$v+12],G$W[G$v+13],G$W[G$v+14],G$W[G$v+15]);this.mesh._inverseBindPoses.push(G$O)}break;default:throw new Error("LoadModel:unknown version.")}return!0},G$q.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var G$q=this._readString();this._shaderAttributes=G$q.match(G$e._attrReg);var G$r=this._readData.getUint32(),G$v=this._readData.getUint32(),G$H=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),G$A=this._readData.getUint32(),G$y=this._readData.getUint32(),G$R=this._readData.getUint32(),G$W=this._readData.__getBuffer(),G$O=new G$Nr(this._mesh),G$N=this._getVertexDeclaration(),G$x=G$dr.create(G$N,G$A/G$N.vertexStride,35044,!0),G$K=G$H+this._DATA.offset,G$T=G$W.slice(G$K,G$K+G$A);G$x.setData(new Float32Array(G$T));for(var G$j=(G$O._vertexBuffer=G$x).vertexDeclaration.getVertexElements(),G$D=0;G$D<G$j.length;G$D++)G$O._bufferUsage[G$j[G$D].elementUsage]=G$x;var G$g=G$br.create("ushort",G$v/2,35044,!0),G$X=G$r+this._DATA.offset,G$m=G$W.slice(G$X,G$X+G$v);G$g.setData(new Uint16Array(G$m)),G$O._indexBuffer=G$g;var G$B=G$W.slice(G$y+this._DATA.offset,G$y+this._DATA.offset+G$R);return G$O._boneIndicesList[0]=new Uint8Array(G$B),this._subMeshes.push(G$O),!0},G$q.READ_DATAAREA=function(){return!1},G$q._getVertexDeclaration=function(){for(var G$q,G$r=!1,G$v=!1,G$H=!1,G$A=!1,G$y=!1,G$R=!1,G$W=!1,G$O=!1,G$N=!1,G$x=0;G$x<this._shaderAttributes.length;G$x+=8)switch(this._shaderAttributes[G$x]){case"POSITION":G$r=!0;break;case"NORMAL":G$v=!0;break;case"COLOR":G$H=!0;break;case"UV":G$A=!0;break;case"UV1":G$y=!0;break;case"BLENDWEIGHT":G$W=!0;break;case"BLENDINDICES":G$O=!0;break;case"TANGENT":G$R=!0;break;case"BINORMAL":G$N=!0}return G$r&&G$v&&G$H&&G$A&&G$y&&G$W&&G$O&&G$R?G$q=G$eq.vertexDeclaration:G$r&&G$v&&G$H&&G$A&&G$y&&G$W&&G$O?G$q=G$mq.vertexDeclaration:G$r&&G$v&&G$A&&G$y&&G$W&&G$O&&G$R?G$q=G$Yq.vertexDeclaration:G$r&&G$v&&G$A&&G$y&&G$W&&G$O?G$q=G$sq.vertexDeclaration:G$r&&G$v&&G$H&&G$A&&G$W&&G$O&&G$R?G$q=G$Vq.vertexDeclaration:G$r&&G$v&&G$H&&G$A&&G$W&&G$O?G$q=G$zq.vertexDeclaration:G$r&&G$v&&G$R&&G$N&&G$A&&G$W&&G$O?G$q=G$Uq.vertexDeclaration:G$r&&G$v&&G$A&&G$W&&G$O&&G$R?G$q=G$dq.vertexDeclaration:G$r&&G$v&&G$A&&G$W&&G$O?G$q=G$cq.vertexDeclaration:G$r&&G$v&&G$H&&G$W&&G$O&&G$R?G$q=G$Tq.vertexDeclaration:G$r&&G$v&&G$H&&G$W&&G$O?G$q=G$xq.vertexDeclaration:G$r&&G$v&&G$H&&G$A&&G$y&&G$R?G$q=G$Mq.vertexDeclaration:G$r&&G$v&&G$H&&G$A&&G$y?G$q=G$Xq.vertexDeclaration:G$r&&G$v&&G$A&&G$y&&G$R?G$q=G$Cq.vertexDeclaration:G$r&&G$v&&G$A&&G$y?G$q=G$Qq.vertexDeclaration:G$r&&G$v&&G$H&&G$A&&G$R?G$q=G$Jq.vertexDeclaration:G$r&&G$v&&G$A&&G$R&&G$N?G$q=G$tq.vertexDeclaration:G$r&&G$v&&G$H&&G$A?G$q=G$gq.vertexDeclaration:G$r&&G$v&&G$A&&G$R?G$q=G$Iq.vertexDeclaration:G$r&&G$v&&G$A?G$q=G$Eq.vertexDeclaration:G$r&&G$v&&G$H&&G$R?G$q=G$Dq.vertexDeclaration:G$r&&G$v&&G$H&&(G$q=G$Nq.vertexDeclaration),G$q},G$D(0,G$q,"mesh",function(){return this._mesh}),G$e._attrReg=new RegExp("(\\w+)|([:,;])","g"),G$e}()),G$Sq=function(){function G$P(){}return G$j(G$P,"laya.d3.loaders.LoadModelV02"),G$P.parse=function(G$q,G$r,G$v,G$H,G$A,G$y){G$P._mesh=G$v,G$P._materials=G$H,G$P._subMeshes=G$A,G$P._materialMap=G$y,G$P._version=G$r,G$P._readData=G$q,G$P.READ_DATA(),G$P.READ_BLOCK(),G$P.READ_STRINGS();for(var G$R=0,G$W=G$P._BLOCK.count;G$R<G$W;G$R++){G$P._readData.pos=G$P._BLOCK.blockStarts[G$R];var G$O=G$P._readData.getUint16(),G$N=G$P._strings[G$O],G$x=G$P["READ_"+G$N];if(null==G$x)throw new Error("model file err,no this function:"+G$O+" "+G$N);G$x.call()}G$P._strings.length=0,G$P._readData=null,G$P._version=null,G$P._mesh=null,G$P._materials=null,G$P._subMeshes=null,G$P._materialMap=null},G$P._readString=function(){return G$P._strings[G$P._readData.getUint16()]},G$P.READ_DATA=function(){G$P._DATA.offset=G$P._readData.getUint32(),G$P._DATA.size=G$P._readData.getUint32()},G$P.READ_BLOCK=function(){for(var G$q=G$P._BLOCK.count=G$P._readData.getUint16(),G$r=G$P._BLOCK.blockStarts=[],G$v=G$P._BLOCK.blockLengths=[],G$H=0;G$H<G$q;G$H++)G$r.push(G$P._readData.getUint32()),G$v.push(G$P._readData.getUint32())},G$P.READ_STRINGS=function(){var G$q=G$P._readData.getUint32(),G$r=G$P._readData.getUint16(),G$v=G$P._readData.pos;G$P._readData.pos=G$q+G$P._DATA.offset;for(var G$H=0;G$H<G$r;G$H++)G$P._strings[G$H]=G$P._readData.readUTFString();G$P._readData.pos=G$v},G$P.READ_MATERIAL=function(){G$P._readString(),G$P._readString();var G$q=G$P._readString();return""!==G$q&&G$P._materials.push(G$m.getRes(G$P._materialMap[G$q])),!0},G$P.READ_MESH=function(){G$P._readString();var G$q,G$r=G$P._readData.__getBuffer(),G$v=0,G$H=G$P._readData.getInt16(),G$A=G$P._DATA.offset;for(G$v=0;G$v<G$H;G$v++){var G$y=G$A+G$P._readData.getUint32(),G$R=G$P._readData.getUint32(),G$W=new Float32Array(G$r.slice(G$y,G$y+G$R)),G$O=G$P._readString().match(G$P._attrReg),G$N=G$P._getVertexDeclaration(G$O),G$x=G$dr.create(G$N,4*G$W.length/G$N.vertexStride,35044,!0);G$x.setData(G$W),G$P._mesh._vertexBuffers.push(G$x)}var G$K=G$A+G$P._readData.getUint32(),G$T=G$P._readData.getUint32(),G$j=new Uint16Array(G$r.slice(G$K,G$K+G$T)),G$D=G$br.create("ushort",G$T/2,35044,!0);G$D.setData(G$j),G$P._mesh._indexBuffer=G$D;var G$g=G$P._mesh._boneNames=[],G$X=G$P._readData.getUint16();for(G$g.length=G$X,G$v=0;G$v<G$X;G$v++)G$g[G$v]=G$P._strings[G$P._readData.getUint16()];var G$m=G$P._readData.getUint32(),G$B=G$P._readData.getUint32(),G$e=(new Float32Array(G$r.slice(G$A+G$m,G$A+G$m+G$B)),G$P._readData.getUint32()),G$p=G$P._readData.getUint32(),G$M=new Float32Array(G$r.slice(G$A+G$e,G$A+G$e+G$p));for(G$P._mesh._inverseBindPoses=[],G$v=0,G$q=G$M.length;G$v<G$q;G$v+=16){var G$z=new G$qr(G$M[G$v+0],G$M[G$v+1],G$M[G$v+2],G$M[G$v+3],G$M[G$v+4],G$M[G$v+5],G$M[G$v+6],G$M[G$v+7],G$M[G$v+8],G$M[G$v+9],G$M[G$v+10],G$M[G$v+11],G$M[G$v+12],G$M[G$v+13],G$M[G$v+14],G$M[G$v+15]);G$P._mesh._inverseBindPoses.push(G$z)}return G$P._mesh._skinnedDatas=new Float32Array(16*G$M.length),!0},G$P.READ_SUBMESH=function(){var G$q=G$P._readData.__getBuffer(),G$r=new G$Nr(G$P._mesh),G$v=G$P._readData.getInt16(),G$H=G$P._readData.getUint32(),G$A=G$P._readData.getUint32();G$r._vertexBuffer=G$P._mesh._vertexBuffers[G$v],G$r._vertexStart=G$H,G$r._vertexCount=G$A;var G$y=G$P._readData.getUint32(),G$R=G$P._readData.getUint32(),G$W=G$P._mesh._indexBuffer;G$r._indexBuffer=G$W,G$r._indexStart=G$y,G$r._indexCount=G$R,G$r._indices=new Uint16Array(G$W.getData().buffer,2*G$y,G$R);var G$O=G$P._DATA.offset,G$N=G$r._subIndexBufferStart,G$x=G$r._subIndexBufferCount,G$K=G$r._boneIndicesList,G$T=G$P._readData.getUint16();G$N.length=G$T,G$x.length=G$T,G$K.length=G$T;for(var G$j=0;G$j<G$T;G$j++){G$N[G$j]=G$P._readData.getUint32(),G$x[G$j]=G$P._readData.getUint32();var G$D=G$P._readData.getUint32(),G$g=G$P._readData.getUint32();G$r._boneIndicesList[G$j]=new Uint8Array(G$q.slice(G$O+G$D,G$O+G$D+G$g))}return G$P._subMeshes.push(G$r),!0},G$P._getVertexDeclaration=function(G$q){for(var G$r,G$v=!1,G$H=!1,G$A=!1,G$y=!1,G$R=!1,G$W=!1,G$O=!1,G$N=!1,G$x=!1,G$K=0;G$K<G$q.length;G$K++)switch(G$q[G$K]){case"POSITION":G$v=!0;break;case"NORMAL":G$H=!0;break;case"COLOR":G$A=!0;break;case"UV":G$y=!0;break;case"UV1":G$R=!0;break;case"BLENDWEIGHT":G$O=!0;break;case"BLENDINDICES":G$N=!0;break;case"TANGENT":G$W=!0;break;case"BINORMAL":G$x=!0}return G$v&&G$H&&G$A&&G$y&&G$R&&G$O&&G$N&&G$W?G$r=G$eq.vertexDeclaration:G$v&&G$H&&G$A&&G$y&&G$R&&G$O&&G$N?G$r=G$mq.vertexDeclaration:G$v&&G$H&&G$y&&G$R&&G$O&&G$N&&G$W?G$r=G$Yq.vertexDeclaration:G$v&&G$H&&G$y&&G$R&&G$O&&G$N?G$r=G$sq.vertexDeclaration:G$v&&G$H&&G$A&&G$y&&G$O&&G$N&&G$W?G$r=G$Vq.vertexDeclaration:G$v&&G$H&&G$A&&G$y&&G$O&&G$N?G$r=G$zq.vertexDeclaration:G$v&&G$H&&G$y&&G$O&&G$N&&G$W?G$r=G$dq.vertexDeclaration:G$v&&G$H&&G$y&&G$O&&G$N?G$r=G$cq.vertexDeclaration:G$v&&G$H&&G$A&&G$O&&G$N&&G$W?G$r=G$Tq.vertexDeclaration:G$v&&G$H&&G$A&&G$O&&G$N?G$r=G$xq.vertexDeclaration:G$v&&G$H&&G$A&&G$y&&G$R&&G$W?G$r=G$Mq.vertexDeclaration:G$v&&G$H&&G$A&&G$y&&G$R?G$r=G$Xq.vertexDeclaration:G$v&&G$H&&G$y&&G$R&&G$W?G$r=G$Cq.vertexDeclaration:G$v&&G$H&&G$y&&G$R?G$r=G$Qq.vertexDeclaration:G$v&&G$H&&G$A&&G$y&&G$W?G$r=G$Jq.vertexDeclaration:G$v&&G$H&&G$y&&G$W&&G$x?G$r=G$tq.vertexDeclaration:G$v&&G$H&&G$A&&G$y?G$r=G$gq.vertexDeclaration:G$v&&G$H&&G$y&&G$W?G$r=G$Iq.vertexDeclaration:G$v&&G$H&&G$y?G$r=G$Eq.vertexDeclaration:G$v&&G$H&&G$A&&G$W?G$r=G$Dq.vertexDeclaration:G$v&&G$H&&G$A&&(G$r=G$Nq.vertexDeclaration),G$r},G$P._attrReg=new RegExp("(\\w+)|([:,;])","g"),G$P._strings=[],G$P._readData=null,G$P._version=null,G$P._mesh=null,G$P._materials=null,G$P._subMeshes=null,G$P._materialMap=null,G$K(G$P,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),G$P}(),G$lq=function(){function G$z(){}return G$j(G$z,"laya.d3.loaders.LoadModelV03"),G$z.parse=function(G$q,G$r,G$v,G$H,G$A){G$z._mesh=G$v,G$z._subMeshes=G$H,G$z._materialMap=G$A,G$z._version=G$r,G$z._readData=G$q,G$z.READ_DATA(),G$z.READ_BLOCK(),G$z.READ_STRINGS();for(var G$y=0,G$R=G$z._BLOCK.count;G$y<G$R;G$y++){G$z._readData.pos=G$z._BLOCK.blockStarts[G$y];var G$W=G$z._readData.getUint16(),G$O=G$z._strings[G$W],G$N=G$z["READ_"+G$O];if(null==G$N)throw new Error("model file err,no this function:"+G$W+" "+G$O);G$N.call()}G$z._strings.length=0,G$z._readData=null,G$z._version=null,G$z._mesh=null,G$z._subMeshes=null,G$z._materialMap=null},G$z._readString=function(){return G$z._strings[G$z._readData.getUint16()]},G$z.READ_DATA=function(){G$z._DATA.offset=G$z._readData.getUint32(),G$z._DATA.size=G$z._readData.getUint32()},G$z.READ_BLOCK=function(){for(var G$q=G$z._BLOCK.count=G$z._readData.getUint16(),G$r=G$z._BLOCK.blockStarts=[],G$v=G$z._BLOCK.blockLengths=[],G$H=0;G$H<G$q;G$H++)G$r.push(G$z._readData.getUint32()),G$v.push(G$z._readData.getUint32())},G$z.READ_STRINGS=function(){var G$q=G$z._readData.getUint32(),G$r=G$z._readData.getUint16(),G$v=G$z._readData.pos;G$z._readData.pos=G$q+G$z._DATA.offset;for(var G$H=0;G$H<G$r;G$H++)G$z._strings[G$H]=G$z._readData.readUTFString();G$z._readData.pos=G$v},G$z.READ_MESH=function(){var G$q,G$r=G$z._readString(),G$v=G$z._readData.__getBuffer(),G$H=0,G$A=G$z._readData.getInt16(),G$y=G$z._DATA.offset;for(G$H=0;G$H<G$A;G$H++){var G$R,G$W=G$y+G$z._readData.getUint32(),G$O=G$z._readData.getUint32(),G$N=new Float32Array(G$v.slice(G$W,G$W+G$O)),G$x=G$z._readString();switch(G$z._version){case"LAYAMODEL:03":G$R=G$z._vertexDeclarationMap_Discard[G$x];break;case"LAYAMODEL:0301":G$R=G$z._vertexDeclarationMap[G$x];break;default:throw new Error("LoadModelV03: unknown version.")}if(!G$R)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+G$z._version+"  bufferAttribute="+G$x+"  name="+G$r+"  url="+(G$z._mesh?G$z._mesh.url:"null"));var G$K=G$dr.create(G$R,4*G$N.length/G$R.vertexStride,35044,!0,G$z._mesh._url+"_"+G$H);G$K.setData(G$N),G$z._mesh._vertexBuffers.push(G$K)}var G$T=G$y+G$z._readData.getUint32(),G$j=G$z._readData.getUint32(),G$D=new Uint16Array(G$v.slice(G$T,G$T+G$j)),G$g=G$br.create("ushort",G$j/2,35044,!0,G$z._mesh._url);G$g.setData(G$D),G$z._mesh._indexBuffer=G$g;var G$X=G$z._mesh._boneNames=[],G$m=G$z._readData.getUint16();for(G$X.length=G$m,G$H=0;G$H<G$m;G$H++)G$X[G$H]=G$z._strings[G$z._readData.getUint16()];G$z._readData.pos+=8;var G$B=G$z._readData.getUint32(),G$e=G$z._readData.getUint32(),G$p=new Float32Array(G$v.slice(G$y+G$B,G$y+G$B+G$e));for(G$z._mesh._inverseBindPoses=[],G$H=0,G$q=G$p.length;G$H<G$q;G$H+=16){var G$M=new G$qr(G$p[G$H+0],G$p[G$H+1],G$p[G$H+2],G$p[G$H+3],G$p[G$H+4],G$p[G$H+5],G$p[G$H+6],G$p[G$H+7],G$p[G$H+8],G$p[G$H+9],G$p[G$H+10],G$p[G$H+11],G$p[G$H+12],G$p[G$H+13],G$p[G$H+14],G$p[G$H+15]);G$z._mesh._inverseBindPoses.push(G$M)}return G$z._mesh._skinnedDatas=new Float32Array(16*G$p.length),!0},G$z.READ_SUBMESH=function(){var G$q=G$z._readData.__getBuffer(),G$r=new G$Nr(G$z._mesh),G$v=G$z._readData.getInt16(),G$H=G$z._readData.getUint32(),G$A=G$z._readData.getUint32();G$r._vertexBuffer=G$z._mesh._vertexBuffers[G$v],G$r._vertexStart=G$H,G$r._vertexCount=G$A;var G$y=G$z._readData.getUint32(),G$R=G$z._readData.getUint32(),G$W=G$z._mesh._indexBuffer;G$r._indexBuffer=G$W,G$r._indexStart=G$y,G$r._indexCount=G$R,G$r._indices=new Uint16Array(G$W.getData().buffer,2*G$y,G$R);var G$O=G$z._DATA.offset,G$N=G$r._subIndexBufferStart,G$x=G$r._subIndexBufferCount,G$K=G$r._boneIndicesList,G$T=G$z._readData.getUint16();G$N.length=G$T,G$x.length=G$T,G$K.length=G$T;for(var G$j=0;G$j<G$T;G$j++){G$N[G$j]=G$z._readData.getUint32(),G$x[G$j]=G$z._readData.getUint32();var G$D=G$z._readData.getUint32(),G$g=G$z._readData.getUint32();G$K[G$j]=new Uint8Array(G$q.slice(G$O+G$D,G$O+G$D+G$g))}return G$z._subMeshes.push(G$r),!0},G$z._strings=[],G$z._readData=null,G$z._version=null,G$z._mesh=null,G$z._subMeshes=null,G$z._materialMap=null,G$K(G$z,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$eq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$mq.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":G$Fq.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$Yq.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$sq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$Vq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":G$zq.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$dq.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":G$cq.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":G$Tq.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":G$xq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":G$Mq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":G$Xq.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":G$Cq.vertexDeclaration,"POSITION,NORMAL,UV,UV1":G$Qq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":G$Jq.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":G$tq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":G$gq.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":G$Iq.vertexDeclaration,"POSITION,NORMAL,UV":G$Eq.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":G$Dq.vertexDeclaration,"POSITION,NORMAL,COLOR":G$Nq.vertexDeclaration,"POSITION,NORMAL,TANGENT":G$Gq.vertexDeclaration,"POSITION,NORMAL":G$Oq.vertexDeclaration,"POSITION,UV":G$_q.vertexDeclaration,POSITION:G$Wq.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$Bq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$mq.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":G$Fq.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":G$Zq.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":G$sq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$Pq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":G$zq.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":G$bq.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":G$cq.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":G$Kq.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":G$xq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":G$pq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":G$Xq.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":G$oq.vertexDeclaration,"POSITION,NORMAL,UV,UV1":G$Qq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":G$aq.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":G$tq.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":G$gq.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":G$uq.vertexDeclaration,"POSITION,NORMAL,UV":G$Eq.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":G$jq.vertexDeclaration,"POSITION,NORMAL,COLOR":G$Nq.vertexDeclaration,"POSITION,NORMAL,TANGENT":G$$q.vertexDeclaration,"POSITION,NORMAL":G$Oq.vertexDeclaration,"POSITION,UV":G$_q.vertexDeclaration,POSITION:G$Wq.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),G$z}(),G$Lq=function(){function G$W(){}return G$j(G$W,"laya.d3.loaders.MeshReader"),G$W.read=function(G$q,G$r,G$v,G$H,G$A){var G$y=new G$z(G$q);G$y.pos=0;var G$R=G$y.readUTFString();switch(G$R){case"LAYAMODEL:01":case"LAYASKINANI:01":G$W._readVersion01(G$y,G$R,G$r,G$v,G$H,G$A);break;case"LAYAMODEL:02":G$Sq.parse(G$y,G$R,G$r,G$v,G$H,G$A);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":G$lq.parse(G$y,G$R,G$r,G$H,G$A);break;default:throw new Error("MeshReader: unknown mesh version.")}G$r._setSubMeshes(G$H)},G$W._readVersion01=function(G$q,G$r,G$v,G$H,G$A,G$y){new G$fq(G$q,G$r,G$v,G$H,G$A,G$y)},G$W}(),G$iq=function(){function G$q(G$q,G$r){this.min=null,this.max=null,this.min=G$q,this.max=G$r}G$j(G$q,"laya.d3.math.BoundBox");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.getCorners=function(G$q){G$q.length=8;var G$r=this.min.elements,G$v=this.max.elements,G$H=G$r[0],G$A=G$r[1],G$y=G$r[2],G$R=G$v[0],G$W=G$v[1],G$O=G$v[2];G$q[0]=new G$Rr(G$H,G$W,G$O),G$q[1]=new G$Rr(G$R,G$W,G$O),G$q[2]=new G$Rr(G$R,G$A,G$O),G$q[3]=new G$Rr(G$H,G$A,G$O),G$q[4]=new G$Rr(G$H,G$W,G$y),G$q[5]=new G$Rr(G$R,G$W,G$y),G$q[6]=new G$Rr(G$R,G$A,G$y),G$q[7]=new G$Rr(G$H,G$A,G$y)},G$r.toDefault=function(){this.min.toDefault(),this.max.toDefault()},G$r.cloneTo=function(G$q){var G$r=G$q;this.min.cloneTo(G$r.min),this.max.cloneTo(G$r.max)},G$r.clone=function(){var G$q=new this.constructor(new G$Rr,new G$Rr);return this.cloneTo(G$q),G$q},G$q.createfromPoints=function(G$q,G$r){if(null==G$q)throw new Error("points");var G$v=G$r.min,G$H=G$r.max,G$A=G$v.elements;G$A[0]=Number.MAX_VALUE,G$A[1]=Number.MAX_VALUE,G$A[2]=Number.MAX_VALUE;var G$y=G$H.elements;G$y[0]=-Number.MAX_VALUE,G$y[1]=-Number.MAX_VALUE,G$y[2]=-Number.MAX_VALUE;for(var G$R=0,G$W=G$q.length;G$R<G$W;++G$R)G$Rr.min(G$v,G$q[G$R],G$v),G$Rr.max(G$H,G$q[G$R],G$H)},G$q.merge=function(G$q,G$r,G$v){G$Rr.min(G$q.min,G$r.min,G$v.min),G$Rr.max(G$q.max,G$r.max,G$v.max)},G$q}(),G$wq=function(){function G$N(G$q){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=G$q,this._near=new G$rr(new G$Rr),this._far=new G$rr(new G$Rr),this._left=new G$rr(new G$Rr),this._right=new G$rr(new G$Rr),this._top=new G$rr(new G$Rr),this._bottom=new G$rr(new G$Rr),G$N._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}G$j(G$N,"laya.d3.math.BoundFrustum");var G$q=G$N.prototype;return G$q.equalsBoundFrustum=function(G$q){return this._matrix.equalsOtherMatrix(G$q.matrix)},G$q.equalsObj=function(G$q){if(G$q instanceof laya.d3.math.BoundFrustum){var G$r=G$q;return this.equalsBoundFrustum(G$r)}return!1},G$q.getPlane=function(G$q){switch(G$q){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},G$q.getCorners=function(G$q){G$N._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(G$q[0]),G$N._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(G$q[1]),G$N._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(G$q[2]),G$N._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(G$q[3]),G$N._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(G$q[4]),G$N._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(G$q[5]),G$N._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(G$q[6]),G$N._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(G$q[7])},G$q.containsPoint=function(G$q){for(var G$r=G$rr.PlaneIntersectionType_Front,G$v=G$rr.PlaneIntersectionType_Front,G$H=0;G$H<6;G$H++){switch(G$H){case 0:G$v=Collision.intersectsPlaneAndPoint(this._near,G$q);break;case 1:G$v=Collision.intersectsPlaneAndPoint(this._far,G$q);break;case 2:G$v=Collision.intersectsPlaneAndPoint(this._left,G$q);break;case 3:G$v=Collision.intersectsPlaneAndPoint(this._right,G$q);break;case 4:G$v=Collision.intersectsPlaneAndPoint(this._top,G$q);break;case 5:G$v=Collision.intersectsPlaneAndPoint(this._bottom,G$q)}switch(G$v){case G$rr.PlaneIntersectionType_Back:return 0;case G$rr.PlaneIntersectionType_Intersecting:G$r=G$rr.PlaneIntersectionType_Intersecting}}switch(G$r){case G$rr.PlaneIntersectionType_Intersecting:return 2;default:return 1}},G$q.containsBoundBox=function(G$q){for(var G$r,G$v=G$N._tempV30,G$H=G$N._tempV31,G$A=1,G$y=0;G$y<6;G$y++){if(G$r=this.getPlane(G$y),this._getBoxToPlanePVertexNVertex(G$q,G$r.normal,G$v,G$H),Collision.intersectsPlaneAndPoint(G$r,G$v)===G$rr.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(G$r,G$H)===G$rr.PlaneIntersectionType_Back&&(G$A=2)}return G$A},G$q.containsBoundSphere=function(G$q){for(var G$r=G$rr.PlaneIntersectionType_Front,G$v=G$rr.PlaneIntersectionType_Front,G$H=0;G$H<6;G$H++){switch(G$H){case 0:G$v=Collision.intersectsPlaneAndSphere(this._near,G$q);break;case 1:G$v=Collision.intersectsPlaneAndSphere(this._far,G$q);break;case 2:G$v=Collision.intersectsPlaneAndSphere(this._left,G$q);break;case 3:G$v=Collision.intersectsPlaneAndSphere(this._right,G$q);break;case 4:G$v=Collision.intersectsPlaneAndSphere(this._top,G$q);break;case 5:G$v=Collision.intersectsPlaneAndSphere(this._bottom,G$q)}switch(G$v){case G$rr.PlaneIntersectionType_Back:return 0;case G$rr.PlaneIntersectionType_Intersecting:G$r=G$rr.PlaneIntersectionType_Intersecting}}switch(G$r){case G$rr.PlaneIntersectionType_Intersecting:return 2;default:return 1}},G$q._getBoxToPlanePVertexNVertex=function(G$q,G$r,G$v,G$H){var G$A=G$q.min,G$y=G$A.elements,G$R=G$q.max,G$W=G$R.elements,G$O=G$r.elements,G$N=G$O[0],G$x=G$O[1],G$K=G$O[2];G$A.cloneTo(G$v);var G$T=G$v.elements;0<=G$N&&(G$T[0]=G$W[0]),0<=G$x&&(G$T[1]=G$W[1]),0<=G$K&&(G$T[2]=G$W[2]),G$R.cloneTo(G$H);var G$j=G$H.elements;0<=G$N&&(G$j[0]=G$y[0]),0<=G$x&&(G$j[1]=G$y[1]),0<=G$K&&(G$j[2]=G$y[2])},G$D(0,G$q,"top",function(){return this._top}),G$D(0,G$q,"matrix",function(){return this._matrix},function(G$q){this._matrix=G$q,G$N._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),G$D(0,G$q,"near",function(){return this._near}),G$D(0,G$q,"far",function(){return this._far}),G$D(0,G$q,"left",function(){return this._left}),G$D(0,G$q,"right",function(){return this._right}),G$D(0,G$q,"bottom",function(){return this._bottom}),G$N._getPlanesFromMatrix=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){var G$W=G$q.elements,G$O=G$W[0],G$N=G$W[1],G$x=G$W[2],G$K=G$W[3],G$T=G$W[4],G$j=G$W[5],G$D=G$W[6],G$g=G$W[7],G$X=G$W[8],G$m=G$W[9],G$B=G$W[10],G$e=G$W[11],G$p=G$W[12],G$M=G$W[13],G$z=G$W[14],G$P=G$W[15],G$V=G$r.normal.elements;G$V[0]=G$K+G$x,G$V[1]=G$g+G$D,G$V[2]=G$e+G$B,G$r.distance=G$P+G$z,G$r.normalize();var G$a=G$v.normal.elements;G$a[0]=G$K-G$x,G$a[1]=G$g-G$D,G$a[2]=G$e-G$B,G$v.distance=G$P-G$z,G$v.normalize();var G$J=G$H.normal.elements;G$J[0]=G$K+G$O,G$J[1]=G$g+G$T,G$J[2]=G$e+G$X,G$H.distance=G$P+G$p,G$H.normalize();var G$$=G$A.normal.elements;G$$[0]=G$K-G$O,G$$[1]=G$g-G$T,G$$[2]=G$e-G$X,G$A.distance=G$P-G$p,G$A.normalize();var G$G=G$y.normal.elements;G$G[0]=G$K-G$N,G$G[1]=G$g-G$j,G$G[2]=G$e-G$m,G$y.distance=G$P-G$M,G$y.normalize();var G$E=G$R.normal.elements;G$E[0]=G$K+G$N,G$E[1]=G$g+G$j,G$E[2]=G$e+G$m,G$R.distance=G$P+G$M,G$R.normalize()},G$N._get3PlaneInterPoint=function(G$q,G$r,G$v){var G$H=G$q.normal,G$A=G$r.normal,G$y=G$v.normal;G$Rr.cross(G$A,G$y,G$N._tempV30),G$Rr.cross(G$y,G$H,G$N._tempV31),G$Rr.cross(G$H,G$A,G$N._tempV32);var G$R=G$Rr.dot(G$H,G$N._tempV30),G$W=G$Rr.dot(G$A,G$N._tempV31),G$O=G$Rr.dot(G$y,G$N._tempV32);return G$Rr.scale(G$N._tempV30,-G$q.distance/G$R,G$N._tempV33),G$Rr.scale(G$N._tempV31,-G$r.distance/G$W,G$N._tempV34),G$Rr.scale(G$N._tempV32,-G$v.distance/G$O,G$N._tempV35),G$Rr.add(G$N._tempV33,G$N._tempV34,G$N._tempV36),G$Rr.add(G$N._tempV35,G$N._tempV36,G$N._tempV37),G$N._tempV37},G$K(G$N,["_tempV30",function(){return this._tempV30=new G$Rr},"_tempV31",function(){return this._tempV31=new G$Rr},"_tempV32",function(){return this._tempV32=new G$Rr},"_tempV33",function(){return this._tempV33=new G$Rr},"_tempV34",function(){return this._tempV34=new G$Rr},"_tempV35",function(){return this._tempV35=new G$Rr},"_tempV36",function(){return this._tempV36=new G$Rr},"_tempV37",function(){return this._tempV37=new G$Rr}]),G$N}(),G$hq=function(){function G$x(G$q,G$r){this.center=null,this.radius=NaN,this.center=G$q,this.radius=G$r}G$j(G$x,"laya.d3.math.BoundSphere");var G$q=G$x.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.toDefault=function(){this.center.toDefault(),this.radius=0},G$q.intersectsRayDistance=function(G$q){return Collision.intersectsRayAndSphereRD(G$q,this)},G$q.intersectsRayPoint=function(G$q,G$r){return Collision.intersectsRayAndSphereRP(G$q,this,G$r)},G$q.cloneTo=function(G$q){var G$r=G$q;this.center.cloneTo(G$r.center),G$r.radius=this.radius},G$q.clone=function(){var G$q=new this.constructor(new G$Rr,new G$Rr);return this.cloneTo(G$q),G$q},G$x.createFromSubPoints=function(G$q,G$r,G$v,G$H){if(null==G$q)throw new Error("points");if(G$r<0||G$r>=G$q.length)throw new Error("start"+G$r+"Must be in the range [0, "+(G$q.length-1)+"]");if(G$v<0||G$r+G$v>G$q.length)throw new Error("count"+G$v+"Must be in the range <= "+G$q.length+"}");var G$A=G$r+G$v,G$y=G$x._tempVector3;G$y.elements[0]=0,G$y.elements[1]=0,G$y.elements[2]=0;for(var G$R=G$r;G$R<G$A;++G$R)G$Rr.add(G$q[G$R],G$y,G$y);var G$W=G$H.center;G$Rr.scale(G$y,1/G$v,G$W);var G$O=0;for(G$R=G$r;G$R<G$A;++G$R){var G$N=G$Rr.distanceSquared(G$W,G$q[G$R]);G$O<G$N&&(G$O=G$N)}G$H.radius=Math.sqrt(G$O)},G$x.createfromPoints=function(G$q,G$r){if(null==G$q)throw new Error("points");G$x.createFromSubPoints(G$q,0,G$q.length,G$r)},G$K(G$x,["_tempVector3",function(){return this._tempVector3=new G$Rr}]),G$x}(),G$nq=(function(){function G$q(){}G$j(G$q,"laya.d3.math.ContainmentType"),G$q.Disjoint=0,G$q.Contains=1,G$q.Intersects=2}(),function(){function G$v(){}return G$j(G$v,"laya.d3.math.MathUtils3D"),G$v.isZero=function(G$q){return Math.abs(G$q)<G$v.zeroTolerance},G$v.nearEqual=function(G$q,G$r){return!!G$v.isZero(G$q-G$r)},G$v.fastInvSqrt=function(G$q){return G$v.isZero(G$q)?G$q:1/Math.sqrt(G$q)},G$K(G$v,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),G$v}()),G$kq=function(){function G$O(){var G$q=this.elements=new Float32Array(9);G$q[0]=1,G$q[1]=0,G$q[2]=0,G$q[3]=0,G$q[4]=1,G$q[5]=0,G$q[6]=0,G$q[7]=0,G$q[8]=1}G$j(G$O,"laya.d3.math.Matrix3x3");var G$q=G$O.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.determinant=function(){var G$q=this.elements,G$r=G$q[0],G$v=G$q[1],G$H=G$q[2],G$A=G$q[3],G$y=G$q[4],G$R=G$q[5],G$W=G$q[6],G$O=G$q[7],G$N=G$q[8];return G$r*(G$N*G$y-G$R*G$O)+G$v*(-G$N*G$A+G$R*G$W)+G$H*(G$O*G$A-G$y*G$W)},G$q.translate=function(G$q,G$r){var G$v=G$r.elements,G$H=this.elements,G$A=G$q.elements,G$y=G$H[0],G$R=G$H[1],G$W=G$H[2],G$O=G$H[3],G$N=G$H[4],G$x=G$H[5],G$K=G$H[6],G$T=G$H[7],G$j=G$H[8],G$D=G$A[0],G$g=G$A[1];G$v[0]=G$y,G$v[1]=G$R,G$v[2]=G$W,G$v[3]=G$O,G$v[4]=G$N,G$v[5]=G$x,G$v[6]=G$D*G$y+G$g*G$O+G$K,G$v[7]=G$D*G$R+G$g*G$N+G$T,G$v[8]=G$D*G$W+G$g*G$x+G$j},G$q.rotate=function(G$q,G$r){var G$v=G$r.elements,G$H=this.elements,G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$H[3],G$O=G$H[4],G$N=G$H[5],G$x=G$H[6],G$K=G$H[7],G$T=G$H[8],G$j=Math.sin(G$q),G$D=Math.cos(G$q);G$v[0]=G$D*G$A+G$j*G$W,G$v[1]=G$D*G$y+G$j*G$O,G$v[2]=G$D*G$R+G$j*G$N,G$v[3]=G$D*G$W-G$j*G$A,G$v[4]=G$D*G$O-G$j*G$y,G$v[5]=G$D*G$N-G$j*G$R,G$v[6]=G$x,G$v[7]=G$K,G$v[8]=G$T},G$q.scale=function(G$q,G$r){var G$v=G$r.elements,G$H=this.elements,G$A=G$q.elements,G$y=G$A[0],G$R=G$A[1];G$v[0]=G$y*G$H[0],G$v[1]=G$y*G$H[1],G$v[2]=G$y*G$H[2],G$v[3]=G$R*G$H[3],G$v[4]=G$R*G$H[4],G$v[5]=G$R*G$H[5],G$v[6]=G$H[6],G$v[7]=G$H[7],G$v[8]=G$H[8]},G$q.invert=function(G$q){var G$r=G$q.elements,G$v=this.elements,G$H=G$v[0],G$A=G$v[1],G$y=G$v[2],G$R=G$v[3],G$W=G$v[4],G$O=G$v[5],G$N=G$v[6],G$x=G$v[7],G$K=G$v[8],G$T=G$K*G$W-G$O*G$x,G$j=-G$K*G$R+G$O*G$N,G$D=G$x*G$R-G$W*G$N,G$g=G$H*G$T+G$A*G$j+G$y*G$D;G$g||(G$q=null),G$g=1/G$g,G$r[0]=G$T*G$g,G$r[1]=(-G$K*G$A+G$y*G$x)*G$g,G$r[2]=(G$O*G$A-G$y*G$W)*G$g,G$r[3]=G$j*G$g,G$r[4]=(G$K*G$H-G$y*G$N)*G$g,G$r[5]=(-G$O*G$H+G$y*G$R)*G$g,G$r[6]=G$D*G$g,G$r[7]=(-G$x*G$H+G$A*G$N)*G$g,G$r[8]=(G$W*G$H-G$A*G$R)*G$g},G$q.transpose=function(G$q){var G$r=G$q.elements,G$v=this.elements;if(G$q===this){var G$H=G$v[1],G$A=G$v[2],G$y=G$v[5];G$r[1]=G$v[3],G$r[2]=G$v[6],G$r[3]=G$H,G$r[5]=G$v[7],G$r[6]=G$A,G$r[7]=G$y}else G$r[0]=G$v[0],G$r[1]=G$v[3],G$r[2]=G$v[6],G$r[3]=G$v[1],G$r[4]=G$v[4],G$r[5]=G$v[7],G$r[6]=G$v[2],G$r[7]=G$v[5],G$r[8]=G$v[8]},G$q.identity=function(){var G$q=this.elements;G$q[0]=1,G$q[1]=0,G$q[2]=0,G$q[3]=0,G$q[4]=1,G$q[5]=0,G$q[6]=0,G$q[7]=0,G$q[8]=1},G$q.cloneTo=function(G$q){var G$r,G$v,G$H;if((G$v=this.elements)!==(G$H=G$q.elements))for(G$r=0;G$r<9;++G$r)G$H[G$r]=G$v[G$r]},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$O.createFromTranslation=function(G$q,G$r){G$r.elements;var G$v=G$q.elements;G$r[0]=1,G$r[1]=0,G$r[2]=0,G$r[3]=0,G$r[4]=1,G$r[5]=0,G$r[6]=G$v[0],G$r[7]=G$v[1],G$r[8]=1},G$O.createFromRotation=function(G$q,G$r){var G$v=G$r.elements,G$H=Math.sin(G$q),G$A=Math.cos(G$q);G$v[0]=G$A,G$v[1]=G$H,G$v[2]=0,G$v[3]=-G$H,G$v[4]=G$A,G$v[5]=0,G$v[6]=0,G$v[7]=0,G$v[8]=1},G$O.createFromScaling=function(G$q,G$r){var G$v=G$r.elements,G$H=G$q.elements;G$v[0]=G$H[0],G$v[1]=0,G$v[2]=0,G$v[3]=0,G$v[4]=G$H[1],G$v[5]=0,G$v[6]=0,G$v[7]=0,G$v[8]=1},G$O.createFromMatrix4x4=function(G$q,G$r){G$r[0]=G$q[0],G$r[1]=G$q[1],G$r[2]=G$q[2],G$r[3]=G$q[4],G$r[4]=G$q[5],G$r[5]=G$q[6],G$r[6]=G$q[8],G$r[7]=G$q[9],G$r[8]=G$q[10]},G$O.multiply=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements,G$R=G$A[0],G$W=G$A[1],G$O=G$A[2],G$N=G$A[3],G$x=G$A[4],G$K=G$A[5],G$T=G$A[6],G$j=G$A[7],G$D=G$A[8],G$g=G$y[0],G$X=G$y[1],G$m=G$y[2],G$B=G$y[3],G$e=G$y[4],G$p=G$y[5],G$M=G$y[6],G$z=G$y[7],G$P=G$y[8];G$H[0]=G$g*G$R+G$X*G$N+G$m*G$T,G$H[1]=G$g*G$W+G$X*G$x+G$m*G$j,G$H[2]=G$g*G$O+G$X*G$K+G$m*G$D,G$H[3]=G$B*G$R+G$e*G$N+G$p*G$T,G$H[4]=G$B*G$W+G$e*G$x+G$p*G$j,G$H[5]=G$B*G$O+G$e*G$K+G$p*G$D,G$H[6]=G$M*G$R+G$z*G$N+G$P*G$T,G$H[7]=G$M*G$W+G$z*G$x+G$P*G$j,G$H[8]=G$M*G$O+G$z*G$K+G$P*G$D},G$O.lookAt=function(G$q,G$r,G$v,G$H){G$Rr.subtract(G$q,G$r,G$O._tempV30),G$Rr.normalize(G$O._tempV30,G$O._tempV30),G$Rr.cross(G$v,G$O._tempV30,G$O._tempV31),G$Rr.normalize(G$O._tempV31,G$O._tempV31),G$Rr.cross(G$O._tempV30,G$O._tempV31,G$O._tempV32);var G$A=G$O._tempV30.elements,G$y=G$O._tempV31.elements,G$R=G$O._tempV32.elements,G$W=G$H.elements;G$W[0]=G$y[0],G$W[3]=G$y[1],G$W[6]=G$y[2],G$W[1]=G$R[0],G$W[4]=G$R[1],G$W[7]=G$R[2],G$W[2]=G$A[0],G$W[5]=G$A[1],G$W[8]=G$A[2]},G$O.DEFAULT=new G$O,G$K(G$O,["_tempV30",function(){return this._tempV30=new G$Rr},"_tempV31",function(){return this._tempV31=new G$Rr},"_tempV32",function(){return this._tempV32=new G$Rr}]),G$O}(),G$qr=function(){function G$a(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K,G$T,G$j,G$D,G$g){void 0===G$q&&(G$q=1),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=1),void 0===G$R&&(G$R=0),void 0===G$W&&(G$W=0),void 0===G$O&&(G$O=0),void 0===G$N&&(G$N=0),void 0===G$x&&(G$x=1),void 0===G$K&&(G$K=0),void 0===G$T&&(G$T=0),void 0===G$j&&(G$j=0),void 0===G$D&&(G$D=0),void 0===G$g&&(G$g=1);var G$X=this.elements=new Float32Array(16);G$X[0]=G$q,G$X[1]=G$r,G$X[2]=G$v,G$X[3]=G$H,G$X[4]=G$A,G$X[5]=G$y,G$X[6]=G$R,G$X[7]=G$W,G$X[8]=G$O,G$X[9]=G$N,G$X[10]=G$x,G$X[11]=G$K,G$X[12]=G$T,G$X[13]=G$j,G$X[14]=G$D,G$X[15]=G$g}G$j(G$a,"laya.d3.math.Matrix4x4");var G$q=G$a.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.getElementByRowColumn=function(G$q,G$r){if(G$q<0||3<G$q)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(G$r<0||3<G$r)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*G$q+G$r]},G$q.setElementByRowColumn=function(G$q,G$r,G$v){if(G$q<0||3<G$q)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(G$r<0||3<G$r)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*G$q+G$r]=G$v},G$q.equalsOtherMatrix=function(G$q){var G$r=this.elements,G$v=G$q.elements;return G$nq.nearEqual(G$r[0],G$v[0])&&G$nq.nearEqual(G$r[1],G$v[1])&&G$nq.nearEqual(G$r[2],G$v[2])&&G$nq.nearEqual(G$r[3],G$v[3])&&G$nq.nearEqual(G$r[4],G$v[4])&&G$nq.nearEqual(G$r[5],G$v[5])&&G$nq.nearEqual(G$r[6],G$v[6])&&G$nq.nearEqual(G$r[7],G$v[7])&&G$nq.nearEqual(G$r[8],G$v[8])&&G$nq.nearEqual(G$r[9],G$v[9])&&G$nq.nearEqual(G$r[10],G$v[10])&&G$nq.nearEqual(G$r[11],G$v[11])&&G$nq.nearEqual(G$r[12],G$v[12])&&G$nq.nearEqual(G$r[13],G$v[13])&&G$nq.nearEqual(G$r[14],G$v[14])&&G$nq.nearEqual(G$r[15],G$v[15])},G$q.decomposeTransRotScale=function(G$q,G$r,G$v){var G$H=G$a._tempMatrix4x4;return this.decomposeTransRotMatScale(G$q,G$H,G$v)?(G$vr.createFromMatrix4x4(G$H,G$r),!0):(G$r.identity(),!1)},G$q.decomposeTransRotMatScale=function(G$q,G$r,G$v){var G$H=this.elements,G$A=G$q.elements,G$y=G$r.elements,G$R=G$v.elements;G$A[0]=G$H[12],G$A[1]=G$H[13],G$A[2]=G$H[14];var G$W=G$H[0],G$O=G$H[1],G$N=G$H[2],G$x=G$H[4],G$K=G$H[5],G$T=G$H[6],G$j=G$H[8],G$D=G$H[9],G$g=G$H[10],G$X=G$R[0]=Math.sqrt(G$W*G$W+G$O*G$O+G$N*G$N),G$m=G$R[1]=Math.sqrt(G$x*G$x+G$K*G$K+G$T*G$T),G$B=G$R[2]=Math.sqrt(G$j*G$j+G$D*G$D+G$g*G$g);if(G$nq.isZero(G$X)||G$nq.isZero(G$m)||G$nq.isZero(G$B))return G$y[1]=G$y[2]=G$y[3]=G$y[4]=G$y[6]=G$y[7]=G$y[8]=G$y[9]=G$y[11]=G$y[12]=G$y[13]=G$y[14]=0,G$y[0]=G$y[5]=G$y[10]=G$y[15]=1,!1;var G$e=G$a._tempVector0,G$p=G$e.elements;G$p[0]=G$j/G$B,G$p[1]=G$D/G$B,G$p[2]=G$g/G$B;var G$M=G$a._tempVector1,G$z=G$M.elements;G$z[0]=G$W/G$X,G$z[1]=G$O/G$X,G$z[2]=G$N/G$X;var G$P=G$a._tempVector2;G$Rr.cross(G$e,G$M,G$P);var G$V=G$a._tempVector1;return G$Rr.cross(G$P,G$e,G$V),G$y[3]=G$y[7]=G$y[11]=G$y[12]=G$y[13]=G$y[14]=0,G$y[15]=1,G$y[0]=G$V.x,G$y[1]=G$V.y,G$y[2]=G$V.z,G$y[4]=G$P.x,G$y[5]=G$P.y,G$y[6]=G$P.z,G$y[8]=G$e.x,G$y[9]=G$e.y,G$y[10]=G$e.z,G$y[0]*G$W+G$y[1]*G$O+G$y[2]*G$N<0&&(G$R[0]=-G$X),G$y[4]*G$x+G$y[5]*G$K+G$y[6]*G$T<0&&(G$R[1]=-G$m),G$y[8]*G$j+G$y[9]*G$D+G$y[10]*G$g<0&&(G$R[2]=-G$B),!0},G$q.decomposeYawPitchRoll=function(G$q){var G$r=G$q.elements,G$v=Math.asin(-this.elements[9]);G$r[1]=G$v,Math.cos(G$v)>G$nq.zeroTolerance?(G$r[2]=Math.atan2(this.elements[1],this.elements[5]),G$r[0]=Math.atan2(this.elements[8],this.elements[10])):(G$r[2]=Math.atan2(-this.elements[4],this.elements[0]),G$r[0]=0)},G$q.normalize=function(){var G$q=this.elements,G$r=G$q[0],G$v=G$q[1],G$H=G$q[2],G$A=Math.sqrt(G$r*G$r+G$v*G$v+G$H*G$H);if(!G$A)return G$q[0]=0,G$q[1]=0,void(G$q[2]=0);1!=G$A&&(G$A=1/G$A,G$q[0]=G$r*G$A,G$q[1]=G$v*G$A,G$q[2]=G$H*G$A)},G$q.transpose=function(){var G$q,G$r;return G$r=(G$q=this.elements)[1],G$q[1]=G$q[4],G$q[4]=G$r,G$r=G$q[2],G$q[2]=G$q[8],G$q[8]=G$r,G$r=G$q[3],G$q[3]=G$q[12],G$q[12]=G$r,G$r=G$q[6],G$q[6]=G$q[9],G$q[9]=G$r,G$r=G$q[7],G$q[7]=G$q[13],G$q[13]=G$r,G$r=G$q[11],G$q[11]=G$q[14],G$q[14]=G$r,this},G$q.invert=function(G$q){var G$r=this.elements,G$v=G$q.elements,G$H=G$r[0],G$A=G$r[1],G$y=G$r[2],G$R=G$r[3],G$W=G$r[4],G$O=G$r[5],G$N=G$r[6],G$x=G$r[7],G$K=G$r[8],G$T=G$r[9],G$j=G$r[10],G$D=G$r[11],G$g=G$r[12],G$X=G$r[13],G$m=G$r[14],G$B=G$r[15],G$e=G$H*G$O-G$A*G$W,G$p=G$H*G$N-G$y*G$W,G$M=G$H*G$x-G$R*G$W,G$z=G$A*G$N-G$y*G$O,G$P=G$A*G$x-G$R*G$O,G$V=G$y*G$x-G$R*G$N,G$a=G$K*G$X-G$T*G$g,G$J=G$K*G$m-G$j*G$g,G$$=G$K*G$B-G$D*G$g,G$G=G$T*G$m-G$j*G$X,G$E=G$T*G$B-G$D*G$X,G$Q=G$j*G$B-G$D*G$m,G$s=G$e*G$Q-G$p*G$E+G$M*G$G+G$z*G$$-G$P*G$J+G$V*G$a;0!==Math.abs(G$s)&&(G$s=1/G$s,G$v[0]=(G$O*G$Q-G$N*G$E+G$x*G$G)*G$s,G$v[1]=(G$y*G$E-G$A*G$Q-G$R*G$G)*G$s,G$v[2]=(G$X*G$V-G$m*G$P+G$B*G$z)*G$s,G$v[3]=(G$j*G$P-G$T*G$V-G$D*G$z)*G$s,G$v[4]=(G$N*G$$-G$W*G$Q-G$x*G$J)*G$s,G$v[5]=(G$H*G$Q-G$y*G$$+G$R*G$J)*G$s,G$v[6]=(G$m*G$M-G$g*G$V-G$B*G$p)*G$s,G$v[7]=(G$K*G$V-G$j*G$M+G$D*G$p)*G$s,G$v[8]=(G$W*G$E-G$O*G$$+G$x*G$a)*G$s,G$v[9]=(G$A*G$$-G$H*G$E-G$R*G$a)*G$s,G$v[10]=(G$g*G$P-G$X*G$M+G$B*G$e)*G$s,G$v[11]=(G$T*G$M-G$K*G$P-G$D*G$e)*G$s,G$v[12]=(G$O*G$J-G$W*G$G-G$N*G$a)*G$s,G$v[13]=(G$H*G$G-G$A*G$J+G$y*G$a)*G$s,G$v[14]=(G$X*G$p-G$g*G$z-G$m*G$e)*G$s,G$v[15]=(G$K*G$z-G$T*G$p+G$j*G$e)*G$s)},G$q.identity=function(){var G$q=this.elements;G$q[1]=G$q[2]=G$q[3]=G$q[4]=G$q[6]=G$q[7]=G$q[8]=G$q[9]=G$q[11]=G$q[12]=G$q[13]=G$q[14]=0,G$q[0]=G$q[5]=G$q[10]=G$q[15]=1},G$q.cloneTo=function(G$q){var G$r,G$v,G$H;if((G$v=this.elements)!==(G$H=G$q.elements))for(G$r=0;G$r<16;++G$r)G$H[G$r]=G$v[G$r]},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$q.getTranslationVector=function(G$q){var G$r=this.elements,G$v=G$q.elements;G$v[0]=G$r[12],G$v[1]=G$r[13],G$v[2]=G$r[14]},G$q.setTranslationVector=function(G$q){var G$r=this.elements,G$v=G$q.elements;G$r[12]=G$v[0],G$r[13]=G$v[1],G$r[14]=G$v[2]},G$q.getForward=function(G$q){var G$r=this.elements,G$v=G$q.elements;G$v[0]=-G$r[8],G$v[1]=-G$r[9],G$v[2]=-G$r[10]},G$q.setForward=function(G$q){var G$r=this.elements,G$v=G$q.elements;G$r[8]=-G$v[0],G$r[9]=-G$v[1],G$r[10]=-G$v[2]},G$a.createRotationX=function(G$q,G$r){var G$v=G$r.elements,G$H=Math.sin(G$q),G$A=Math.cos(G$q);G$v[1]=G$v[2]=G$v[3]=G$v[4]=G$v[7]=G$v[8]=G$v[11]=G$v[12]=G$v[13]=G$v[14]=0,G$v[0]=G$v[15]=1,G$v[5]=G$v[10]=G$A,G$v[6]=G$H,G$v[9]=-G$H},G$a.createRotationY=function(G$q,G$r){var G$v=G$r.elements,G$H=Math.sin(G$q),G$A=Math.cos(G$q);G$v[1]=G$v[3]=G$v[4]=G$v[6]=G$v[7]=G$v[9]=G$v[11]=G$v[12]=G$v[13]=G$v[14]=0,G$v[5]=G$v[15]=1,G$v[0]=G$v[10]=G$A,G$v[2]=-G$H,G$v[8]=G$H},G$a.createRotationZ=function(G$q,G$r){var G$v=G$r.elements,G$H=Math.sin(G$q),G$A=Math.cos(G$q);G$v[2]=G$v[3]=G$v[6]=G$v[7]=G$v[8]=G$v[9]=G$v[11]=G$v[12]=G$v[13]=G$v[14]=0,G$v[10]=G$v[15]=1,G$v[0]=G$v[5]=G$A,G$v[1]=G$H,G$v[4]=-G$H},G$a.createRotationYawPitchRoll=function(G$q,G$r,G$v,G$H){G$vr.createFromYawPitchRoll(G$q,G$r,G$v,G$a._tempQuaternion),G$a.createRotationQuaternion(G$a._tempQuaternion,G$H)},G$a.createRotationAxis=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=Math.cos(G$r),G$O=Math.sin(G$r),G$N=G$A*G$A,G$x=G$y*G$y,G$K=G$R*G$R,G$T=G$A*G$y,G$j=G$A*G$R,G$D=G$y*G$R,G$g=G$v.elements;G$g[3]=G$g[7]=G$g[11]=G$g[12]=G$g[13]=G$g[14]=0,G$g[15]=1,G$g[0]=G$N+G$W*(1-G$N),G$g[1]=G$T-G$W*G$T+G$O*G$R,G$g[2]=G$j-G$W*G$j-G$O*G$y,G$g[4]=G$T-G$W*G$T-G$O*G$R,G$g[5]=G$x+G$W*(1-G$x),G$g[6]=G$D-G$W*G$D+G$O*G$A,G$g[8]=G$j-G$W*G$j+G$O*G$y,G$g[9]=G$D-G$W*G$D-G$O*G$A,G$g[10]=G$K+G$W*(1-G$K)},G$a.createRotationQuaternion=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$v[0],G$y=G$v[1],G$R=G$v[2],G$W=G$v[3],G$O=G$A*G$A,G$N=G$y*G$y,G$x=G$R*G$R,G$K=G$A*G$y,G$T=G$R*G$W,G$j=G$R*G$A,G$D=G$y*G$W,G$g=G$y*G$R,G$X=G$A*G$W;G$H[3]=G$H[7]=G$H[11]=G$H[12]=G$H[13]=G$H[14]=0,G$H[15]=1,G$H[0]=1-2*(G$N+G$x),G$H[1]=2*(G$K+G$T),G$H[2]=2*(G$j-G$D),G$H[4]=2*(G$K-G$T),G$H[5]=1-2*(G$x+G$O),G$H[6]=2*(G$g+G$X),G$H[8]=2*(G$j+G$D),G$H[9]=2*(G$g-G$X),G$H[10]=1-2*(G$N+G$O)},G$a.createTranslate=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;G$H[4]=G$H[8]=G$H[1]=G$H[9]=G$H[2]=G$H[6]=G$H[3]=G$H[7]=G$H[11]=0,G$H[0]=G$H[5]=G$H[10]=G$H[15]=1,G$H[12]=G$v[0],G$H[13]=G$v[1],G$H[14]=G$v[2]},G$a.createScaling=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;G$H[0]=G$v[0],G$H[5]=G$v[1],G$H[10]=G$v[2],G$H[1]=G$H[4]=G$H[8]=G$H[12]=G$H[9]=G$H[13]=G$H[2]=G$H[6]=G$H[14]=G$H[3]=G$H[7]=G$H[11]=0,G$H[15]=1},G$a.multiply=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x;for(G$A=G$v.elements,G$y=G$q.elements,G$A===(G$R=G$r.elements)&&(G$R=G$R.slice()),G$H=0;G$H<4;G$H++)G$W=G$y[G$H],G$O=G$y[G$H+4],G$N=G$y[G$H+8],G$x=G$y[G$H+12],G$A[G$H]=G$W*G$R[0]+G$O*G$R[1]+G$N*G$R[2]+G$x*G$R[3],G$A[G$H+4]=G$W*G$R[4]+G$O*G$R[5]+G$N*G$R[6]+G$x*G$R[7],G$A[G$H+8]=G$W*G$R[8]+G$O*G$R[9]+G$N*G$R[10]+G$x*G$R[11],G$A[G$H+12]=G$W*G$R[12]+G$O*G$R[13]+G$N*G$R[14]+G$x*G$R[15]},G$a.createFromQuaternion=function(G$q,G$r){var G$v=G$r.elements,G$H=G$q.elements,G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$H[3],G$O=G$A+G$A,G$N=G$y+G$y,G$x=G$R+G$R,G$K=G$A*G$O,G$T=G$y*G$O,G$j=G$y*G$N,G$D=G$R*G$O,G$g=G$R*G$N,G$X=G$R*G$x,G$m=G$W*G$O,G$B=G$W*G$N,G$e=G$W*G$x;G$v[0]=1-G$j-G$X,G$v[1]=G$T+G$e,G$v[2]=G$D-G$B,G$v[3]=0,G$v[4]=G$T-G$e,G$v[5]=1-G$K-G$X,G$v[6]=G$g+G$m,G$v[7]=0,G$v[8]=G$D+G$B,G$v[9]=G$g-G$m,G$v[10]=1-G$K-G$j,G$v[11]=0,G$v[12]=0,G$v[13]=0,G$v[14]=0,G$v[15]=1},G$a.createAffineTransformation=function(G$q,G$r,G$v,G$H){var G$A=G$q.elements,G$y=G$r.elements,G$R=G$v.elements,G$W=G$H.elements,G$O=G$y[0],G$N=G$y[1],G$x=G$y[2],G$K=G$y[3],G$T=G$O+G$O,G$j=G$N+G$N,G$D=G$x+G$x,G$g=G$O*G$T,G$X=G$O*G$j,G$m=G$O*G$D,G$B=G$N*G$j,G$e=G$N*G$D,G$p=G$x*G$D,G$M=G$K*G$T,G$z=G$K*G$j,G$P=G$K*G$D,G$V=G$R[0],G$a=G$R[1],G$J=G$R[2];G$W[0]=(1-(G$B+G$p))*G$V,G$W[1]=(G$X+G$P)*G$V,G$W[2]=(G$m-G$z)*G$V,G$W[3]=0,G$W[4]=(G$X-G$P)*G$a,G$W[5]=(1-(G$g+G$p))*G$a,G$W[6]=(G$e+G$M)*G$a,G$W[7]=0,G$W[8]=(G$m+G$z)*G$J,G$W[9]=(G$e-G$M)*G$J,G$W[10]=(1-(G$g+G$B))*G$J,G$W[11]=0,G$W[12]=G$A[0],G$W[13]=G$A[1],G$W[14]=G$A[2],G$W[15]=1},G$a.createLookAt=function(G$q,G$r,G$v,G$H){var G$A=G$H.elements,G$y=G$a._tempVector0,G$R=G$a._tempVector1,G$W=G$a._tempVector2;G$Rr.subtract(G$q,G$r,G$W),G$Rr.normalize(G$W,G$W),G$Rr.cross(G$v,G$W,G$y),G$Rr.normalize(G$y,G$y),G$Rr.cross(G$W,G$y,G$R),G$H.identity(),G$A[0]=G$y.x,G$A[4]=G$y.y,G$A[8]=G$y.z,G$A[1]=G$R.x,G$A[5]=G$R.y,G$A[9]=G$R.z,G$A[2]=G$W.x,G$A[6]=G$W.y,G$A[10]=G$W.z,G$A[12]=-G$Rr.dot(G$y,G$q),G$A[13]=-G$Rr.dot(G$R,G$q),G$A[14]=-G$Rr.dot(G$W,G$q)},G$a.createPerspective=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$A.elements,G$R=1/Math.tan(G$q/2),G$W=1/(G$v-G$H);G$y[0]=G$R/G$r,G$y[5]=G$R,G$y[10]=(G$H+G$v)*G$W,G$y[11]=-1,G$y[14]=2*G$H*G$v*G$W,G$y[1]=G$y[2]=G$y[3]=G$y[4]=G$y[6]=G$y[7]=G$y[8]=G$y[9]=G$y[12]=G$y[13]=G$y[15]=0},G$a.createOrthoOffCenterRH=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){var G$W=G$R.elements,G$O=1/(G$q-G$r),G$N=1/(G$v-G$H),G$x=1/(G$A-G$y);G$W[1]=G$W[2]=G$W[3]=G$W[4]=G$W[6]=G$W[7]=G$W[8]=G$W[9]=G$W[11]=0,G$W[15]=1,G$W[0]=-2*G$O,G$W[5]=-2*G$N,G$W[10]=2*G$x,G$W[12]=(G$q+G$r)*G$O,G$W[13]=(G$H+G$v)*G$N,G$W[14]=(G$y+G$A)*G$x},G$a.translation=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;G$H[0]=G$H[5]=G$H[10]=G$H[15]=1,G$H[12]=G$v[0],G$H[13]=G$v[1],G$H[14]=G$v[2]},G$K(G$a,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new G$a},"_tempVector0",function(){return this._tempVector0=new G$Rr},"_tempVector1",function(){return this._tempVector1=new G$Rr},"_tempVector2",function(){return this._tempVector2=new G$Rr},"_tempQuaternion",function(){return this._tempQuaternion=new G$vr},"DEFAULT",function(){return this.DEFAULT=new G$a},"ZERO",function(){return this.ZERO=new G$a(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),G$a}(),G$rr=(function(){function G$e(G$q,G$r){this.extents=null,this.transformation=null,this.extents=G$q,this.transformation=G$r}G$j(G$e,"laya.d3.math.OrientedBoundBox");var G$q=G$e.prototype;G$q.getCorners=function(G$q){var G$r=G$e._tempV30.elements,G$v=G$e._tempV31.elements,G$H=G$e._tempV32.elements,G$A=this.extents.elements;G$r[0]=G$A[0],G$r[1]=G$r[2]=0,G$v[1]=G$A[1],G$v[0]=G$v[2]=0,G$H[2]=G$A[2],G$H[0]=G$H[1]=0,G$Rr.TransformNormal(G$e._tempV30,this.transformation,G$e._tempV30),G$Rr.TransformNormal(G$e._tempV31,this.transformation,G$e._tempV31),G$Rr.TransformNormal(G$e._tempV32,this.transformation,G$e._tempV32);var G$y=G$e._tempV33;this.transformation.getTranslationVector(G$y),G$q.length=8,G$Rr.add(G$y,G$e._tempV30,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV32,G$q[0]),G$Rr.add(G$y,G$e._tempV30,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV32,G$q[1]),G$Rr.subtract(G$y,G$e._tempV30,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV32,G$q[2]),G$Rr.subtract(G$y,G$e._tempV30,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV32,G$q[3]),G$Rr.add(G$y,G$e._tempV30,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV32,G$q[4]),G$Rr.add(G$y,G$e._tempV30,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV32,G$q[5]),G$Rr.subtract(G$y,G$e._tempV30,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV32,G$q[6]),G$Rr.subtract(G$y,G$e._tempV30,G$e._tempV34),G$Rr.subtract(G$e._tempV34,G$e._tempV31,G$e._tempV34),G$Rr.add(G$e._tempV34,G$e._tempV32,G$q[7])},G$q.transform=function(G$q){G$qr.multiply(this.transformation,G$q,this.transformation)},G$q.scale=function(G$q){G$Rr.multiply(this.extents,G$q,this.extents)},G$q.translate=function(G$q){this.transformation.getTranslationVector(G$e._tempV30),G$Rr.add(G$e._tempV30,G$q,G$e._tempV31),this.transformation.setTranslationVector(G$e._tempV31)},G$q.Size=function(G$q){G$Rr.scale(this.extents,2,G$q)},G$q.getSize=function(G$q){var G$r=this.extents.elements;G$e._tempV30.x=G$r[0],G$e._tempV31.y=G$r[1],G$e._tempV32.z=G$r[2],G$Rr.TransformNormal(G$e._tempV30,this.transformation,G$e._tempV30),G$Rr.TransformNormal(G$e._tempV31,this.transformation,G$e._tempV31),G$Rr.TransformNormal(G$e._tempV31,this.transformation,G$e._tempV32);var G$v=G$q.elements;G$v[0]=G$Rr.scalarLength(G$e._tempV30),G$v[1]=G$Rr.scalarLength(G$e._tempV31),G$v[2]=G$Rr.scalarLength(G$e._tempV32)},G$q.getSizeSquared=function(G$q){var G$r=this.extents.elements;G$e._tempV30.x=G$r[0],G$e._tempV31.y=G$r[1],G$e._tempV32.z=G$r[2],G$Rr.TransformNormal(G$e._tempV30,this.transformation,G$e._tempV30),G$Rr.TransformNormal(G$e._tempV31,this.transformation,G$e._tempV31),G$Rr.TransformNormal(G$e._tempV31,this.transformation,G$e._tempV32);var G$v=G$q.elements;G$v[0]=G$Rr.scalarLengthSquared(G$e._tempV30),G$v[1]=G$Rr.scalarLengthSquared(G$e._tempV31),G$v[2]=G$Rr.scalarLengthSquared(G$e._tempV32)},G$q.getCenter=function(G$q){this.transformation.getTranslationVector(G$q)},G$q.containsPoint=function(G$q){var G$r=this.extents.elements,G$v=G$r[0],G$H=G$r[1],G$A=G$r[2];this.transformation.invert(G$e._tempM0),G$Rr.transformCoordinate(G$q,G$e._tempM0,G$e._tempV30);var G$y=G$e._tempV30.elements,G$R=Math.abs(G$y[0]),G$W=Math.abs(G$y[1]),G$O=Math.abs(G$y[2]);return G$nq.nearEqual(G$R,G$v)&&G$nq.nearEqual(G$W,G$H)&&G$nq.nearEqual(G$O,G$A)?2:G$R<G$v&&G$W<G$H&&G$O<G$A?1:0},G$q.containsPoints=function(G$q){var G$r=this.extents.elements,G$v=G$r[0],G$H=G$r[1],G$A=G$r[2];this.transformation.invert(G$e._tempM0);for(var G$y=!0,G$R=!1,G$W=0;G$W<G$q.length;G$W++){G$Rr.transformCoordinate(G$q[G$W],G$e._tempM0,G$e._tempV30);var G$O=G$e._tempV30.elements,G$N=Math.abs(G$O[0]),G$x=Math.abs(G$O[1]),G$K=Math.abs(G$O[2]);G$nq.nearEqual(G$N,G$v)&&G$nq.nearEqual(G$x,G$H)&&G$nq.nearEqual(G$K,G$A)&&(G$R=!0),G$N<G$v&&G$x<G$H&&G$K<G$A?G$R=!0:G$y=!1}return G$y?1:G$R?2:0},G$q.containsSphere=function(G$q,G$r){void 0===G$r&&(G$r=!1);var G$v=this.extents.elements,G$H=G$v[0],G$A=G$v[1],G$y=G$v[2],G$R=G$q.radius;this.transformation.invert(G$e._tempM0),G$Rr.transformCoordinate(G$q.center,G$e._tempM0,G$e._tempV30);var G$W=NaN;if(G$W=G$r?G$R:(G$Rr.scale(G$Rr.UnitX,G$R,G$e._tempV31),G$Rr.TransformNormal(G$e._tempV31,G$e._tempM0,G$e._tempV31),G$Rr.scalarLength(G$e._tempV31)),G$Rr.scale(this.extents,-1,G$e._tempV32),G$Rr.Clamp(G$e._tempV30,G$e._tempV32,this.extents,G$e._tempV33),G$W*G$W<G$Rr.distanceSquared(G$e._tempV30,G$e._tempV33))return 0;var G$O=G$e._tempV30.elements,G$N=G$O[0],G$x=G$O[1],G$K=G$O[2],G$T=G$e._tempV32.elements,G$j=G$T[0],G$D=G$T[1],G$g=G$T[2];return G$j+G$W<=G$N&&G$N<=G$H-G$W&&G$W<G$H-G$j&&G$D+G$W<=G$x&&G$x<=G$A-G$W&&G$W<G$A-G$D&&G$g+G$W<=G$K&&G$K<=G$y-G$W&&G$W<G$y-G$g?1:2},G$q.containsOrientedBoundBox=function(G$q){var G$r=0,G$v=0;G$q.getCorners(G$e._corners);var G$H=this.containsPoints(G$e._corners);if(0!=G$H)return G$H;var G$A=this.extents.elements;G$q.extents.cloneTo(G$e._tempV35);var G$y=G$e._tempV35.elements;G$e._getRows(this.transformation,G$e._rows1),G$e._getRows(G$q.transformation,G$e._rows2);var G$R=NaN;for(G$r=0;G$r<4;G$r++)for(G$v=0;G$v<4;G$v++)3==G$r||3==G$v?(G$e._tempM0.setElementByRowColumn(G$r,G$v,0),G$e._tempM1.setElementByRowColumn(G$r,G$v,0)):(G$R=G$Rr.dot(G$e._rows1[G$r],G$e._rows2[G$v]),G$e._tempM0.setElementByRowColumn(G$r,G$v,G$R),G$e._tempM1.setElementByRowColumn(G$r,G$v,Math.abs(G$R)));G$q.getCenter(G$e._tempV34),this.getCenter(G$e._tempV36),G$Rr.subtract(G$e._tempV34,G$e._tempV36,G$e._tempV30);var G$W=G$e._tempV31.elements;G$W[0]=G$Rr.dot(G$e._tempV30,G$e._rows1[0]),G$W[1]=G$Rr.dot(G$e._tempV30,G$e._rows1[1]),G$W[2]=G$Rr.dot(G$e._tempV30,G$e._rows1[2]);var G$O=G$e._tempV32.elements,G$N=G$e._tempV33.elements;for(G$r=0;G$r<3;G$r++)if(G$O[0]=G$e._tempM1.getElementByRowColumn(G$r,0),G$O[1]=G$e._tempM1.getElementByRowColumn(G$r,1),G$O[2]=G$e._tempM1.getElementByRowColumn(G$r,2),G$A[G$r]+G$Rr.dot(G$e._tempV35,G$e._tempV32)<Math.abs(G$W[G$r]))return 0;for(G$v=0;G$v<3;G$v++)if(G$O[0]=G$e._tempM1.getElementByRowColumn(0,G$v),G$O[1]=G$e._tempM1.getElementByRowColumn(1,G$v),G$O[2]=G$e._tempM1.getElementByRowColumn(2,G$v),G$N[0]=G$e._tempM0.getElementByRowColumn(0,G$v),G$N[1]=G$e._tempM0.getElementByRowColumn(1,G$v),G$N[2]=G$e._tempM0.getElementByRowColumn(2,G$v),G$Rr.dot(this.extents,G$e._tempV32)+G$y[G$v]<Math.abs(G$Rr.dot(G$e._tempV31,G$e._tempV33)))return 0;for(G$r=0;G$r<3;G$r++)for(G$v=0;G$v<3;G$v++){var G$x=(G$r+1)%3,G$K=(G$r+2)%3,G$T=(G$v+1)%3,G$j=(G$v+2)%3;if(G$A[G$x]*G$e._tempM1.getElementByRowColumn(G$K,G$v)+G$A[G$K]*G$e._tempM1.getElementByRowColumn(G$x,G$v)+(G$y[G$T]*G$e._tempM1.getElementByRowColumn(G$r,G$j)+G$y[G$j]*G$e._tempM1.getElementByRowColumn(G$r,G$T))<Math.abs(G$W[G$K]*G$e._tempM0.getElementByRowColumn(G$x,G$v)-G$W[G$x]*G$e._tempM0.getElementByRowColumn(G$K,G$v)))return 0}return 2},G$q.containsLine=function(G$q,G$r){G$e._corners[0]=G$q,G$e._corners[1]=G$r;var G$v=this.containsPoints(G$e._corners);if(0!=G$v)return G$v;var G$H=this.extents.elements,G$A=G$H[0],G$y=G$H[1],G$R=G$H[2];this.transformation.invert(G$e._tempM0),G$Rr.transformCoordinate(G$q,G$e._tempM0,G$e._tempV30),G$Rr.transformCoordinate(G$r,G$e._tempM0,G$e._tempV31),G$Rr.add(G$e._tempV30,G$e._tempV31,G$e._tempV32),G$Rr.scale(G$e._tempV32,.5,G$e._tempV32),G$Rr.subtract(G$e._tempV30,G$e._tempV32,G$e._tempV33);var G$W=G$e._tempV33.elements,G$O=G$W[0],G$N=G$W[1],G$x=G$W[2],G$K=G$e._tempV34.elements,G$T=G$K[0]=Math.abs(G$W[0]),G$j=G$K[1]=Math.abs(G$W[1]),G$D=G$K[2]=Math.abs(G$W[2]),G$g=G$e._tempV32.elements,G$X=G$g[0],G$m=G$g[1],G$B=G$g[2];return Math.abs(G$X)>G$A+G$T?0:Math.abs(G$m)>G$y+G$j?0:Math.abs(G$B)>G$R+G$D?0:Math.abs(G$m*G$x-G$B*G$N)>G$y*G$D+G$R*G$j?0:Math.abs(G$X*G$x-G$B*G$O)>G$A*G$D+G$R*G$T?0:Math.abs(G$X*G$N-G$m*G$O)>G$A*G$j+G$y*G$T?0:2},G$q.containsBoundBox=function(G$q){var G$r=0,G$v=0,G$H=G$q.min,G$A=G$q.max;G$q.getCorners(G$e._corners);var G$y=this.containsPoints(G$e._corners);if(0!=G$y)return G$y;G$Rr.subtract(G$A,G$H,G$e._tempV30),G$Rr.scale(G$e._tempV30,.5,G$e._tempV30),G$Rr.add(G$H,G$e._tempV30,G$e._tempV30),G$Rr.subtract(G$A,G$e._tempV30,G$e._tempV31);var G$R=this.extents.elements,G$W=G$e._tempV31.elements;G$e._getRows(this.transformation,G$e._rows1),this.transformation.invert(G$e._tempM0);for(G$r=0;G$r<3;G$r++)for(G$v=0;G$v<3;G$v++)G$e._tempM1.setElementByRowColumn(G$r,G$v,Math.abs(G$e._tempM0.getElementByRowColumn(G$r,G$v)));this.getCenter(G$e._tempV35),G$Rr.subtract(G$e._tempV30,G$e._tempV35,G$e._tempV32);var G$O=G$e._tempV31.elements;G$O[0]=G$Rr.dot(G$e._tempV32,G$e._rows1[0]),G$O[1]=G$Rr.dot(G$e._tempV32,G$e._rows1[1]),G$O[2]=G$Rr.dot(G$e._tempV32,G$e._rows1[2]);var G$N=G$e._tempV33.elements,G$x=G$e._tempV34.elements;for(G$r=0;G$r<3;G$r++)if(G$N[0]=G$e._tempM1.getElementByRowColumn(G$r,0),G$N[1]=G$e._tempM1.getElementByRowColumn(G$r,1),G$N[2]=G$e._tempM1.getElementByRowColumn(G$r,2),G$R[G$r]+G$Rr.dot(G$e._tempV31,G$e._tempV33)<Math.abs(G$O[G$r]))return 0;for(G$v=0;G$v<3;G$v++)if(G$N[0]=G$e._tempM1.getElementByRowColumn(0,G$v),G$N[1]=G$e._tempM1.getElementByRowColumn(1,G$v),G$N[2]=G$e._tempM1.getElementByRowColumn(2,G$v),G$x[0]=G$e._tempM0.getElementByRowColumn(0,G$v),G$x[1]=G$e._tempM0.getElementByRowColumn(1,G$v),G$x[2]=G$e._tempM0.getElementByRowColumn(2,G$v),G$Rr.dot(this.extents,G$e._tempV33)+G$W[G$v]<Math.abs(G$Rr.dot(G$e._tempV31,G$e._tempV34)))return 0;for(G$r=0;G$r<3;G$r++)for(G$v=0;G$v<3;G$v++){var G$K=(G$r+1)%3,G$T=(G$r+2)%3,G$j=(G$v+1)%3,G$D=(G$v+2)%3;if(G$R[G$K]*G$e._tempM1.getElementByRowColumn(G$T,G$v)+G$R[G$T]*G$e._tempM1.getElementByRowColumn(G$K,G$v)+(G$W[G$j]*G$e._tempM1.getElementByRowColumn(G$r,G$D)+G$W[G$D]*G$e._tempM1.getElementByRowColumn(G$r,G$j))<Math.abs(G$O[G$T]*G$e._tempM0.getElementByRowColumn(G$K,G$v)-G$O[G$K]*G$e._tempM0.getElementByRowColumn(G$T,G$v)))return 0}return 2},G$q.intersectsRay=function(G$q,G$r){G$Rr.scale(this.extents,-1,G$e._tempV30),this.transformation.invert(G$e._tempM0),G$Rr.TransformNormal(G$q.direction,G$e._tempM0,G$e._ray.direction),G$Rr.transformCoordinate(G$q.origin,G$e._tempM0,G$e._ray.origin),G$e._boxBound1.min=G$e._tempV30,G$e._boxBound1.max=this.extents;var G$v=Collision.intersectsRayAndBoxRP(G$e._ray,G$e._boxBound1,G$r);return-1!==G$v&&G$Rr.transformCoordinate(G$r,this.transformation,G$r),G$v},G$q._getLocalCorners=function(G$q){G$q.length=8;var G$r=this.extents.elements;G$e._tempV30.x=G$r[0],G$e._tempV31.y=G$r[1],G$e._tempV32.z=G$r[2],G$Rr.add(G$e._tempV30,G$e._tempV31,G$e._tempV33),G$Rr.add(G$e._tempV33,G$e._tempV32,G$q[0]),G$Rr.add(G$e._tempV30,G$e._tempV31,G$e._tempV33),G$Rr.subtract(G$e._tempV33,G$e._tempV32,G$q[1]),G$Rr.subtract(G$e._tempV31,G$e._tempV30,G$e._tempV33),G$Rr.subtract(G$e._tempV33,G$e._tempV30,G$q[2]),G$Rr.subtract(G$e._tempV31,G$e._tempV30,G$e._tempV33),G$Rr.add(G$e._tempV33,G$e._tempV32,G$q[3]),G$Rr.subtract(G$e._tempV30,G$e._tempV31,G$e._tempV33),G$Rr.add(G$e._tempV33,G$e._tempV32,G$q[4]),G$Rr.subtract(G$e._tempV30,G$e._tempV31,G$e._tempV33),G$Rr.subtract(G$e._tempV33,G$e._tempV32,G$q[5]),G$Rr.scale(G$q[0],-1,G$q[6]),G$Rr.subtract(G$e._tempV32,G$e._tempV30,G$e._tempV33),G$Rr.subtract(G$e._tempV33,G$e._tempV31,G$q[7])},G$q.equals=function(G$q){return this.extents==G$q.extents&&this.transformation==G$q.transformation},G$q.cloneTo=function(G$q){var G$r=G$q;this.extents.cloneTo(G$r.extents),this.transformation.cloneTo(G$r.transformation)},G$e.createByBoundBox=function(G$q,G$r){var G$v=G$q.min,G$H=G$q.max;G$Rr.subtract(G$H,G$v,G$e._tempV30),G$Rr.scale(G$e._tempV30,.5,G$e._tempV30),G$Rr.add(G$v,G$e._tempV30,G$e._tempV31),G$Rr.subtract(G$H,G$e._tempV31,G$e._tempV32),G$qr.translation(G$e._tempV31,G$e._tempM0);var G$A=G$e._tempV32.clone(),G$y=G$e._tempM0.clone();G$r.extents=G$A,G$r.transformation=G$y},G$e.createByMinAndMaxVertex=function(G$q,G$r){return G$Rr.subtract(G$r,G$q,G$e._tempV30),G$Rr.scale(G$e._tempV30,.5,G$e._tempV30),G$Rr.add(G$q,G$e._tempV30,G$e._tempV31),G$Rr.subtract(G$r,G$e._tempV31,G$e._tempV32),G$qr.translation(G$e._tempV31,G$e._tempM0),new G$e(G$e._tempV32,G$e._tempM0)},G$e._getRows=function(G$q,G$r){G$r.length=3;var G$v=G$q.elements,G$H=G$r[0].elements;G$H[0]=G$v[0],G$H[1]=G$v[1],G$H[2]=G$v[2];var G$A=G$r[1].elements;G$A[0]=G$v[4],G$A[1]=G$v[5],G$A[2]=G$v[6];var G$y=G$r[2].elements;G$y[0]=G$v[8],G$y[1]=G$v[9],G$y[2]=G$v[10]},G$e.getObbtoObbMatrix4x4=function(G$q,G$r,G$v,G$H){var G$A=G$q.transformation,G$y=G$r.transformation;if(G$v){G$e._getRows(G$A,G$e._rows1),G$e._getRows(G$y,G$e._rows2);for(var G$R=0;G$R<3;G$R++)for(var G$W=0;G$W<3;G$W++)G$H.setElementByRowColumn(G$R,G$W,G$Rr.dot(G$e._rows2[G$R],G$e._rows1[G$W]));G$r.getCenter(G$e._tempV30),G$q.getCenter(G$e._tempV31),G$Rr.subtract(G$e._tempV30,G$e._tempV31,G$e._tempV32);var G$O=G$H.elements;G$O[12]=G$Rr.dot(G$e._tempV32,G$e._rows1[0]),G$O[13]=G$Rr.dot(G$e._tempV32,G$e._rows1[1]),G$O[14]=G$Rr.dot(G$e._tempV32,G$e._rows1[2]),G$O[15]=1}else G$A.invert(G$e._tempM0),G$qr.multiply(G$y,G$e._tempM0,G$H)},G$e.merge=function(G$q,G$r,G$v){var G$H=G$q.extents,G$A=G$q.transformation;G$e.getObbtoObbMatrix4x4(G$q,G$r,G$v,G$e._tempM0),G$r._getLocalCorners(G$e._corners),G$Rr.transformCoordinate(G$e._corners[0],G$e._tempM0,G$e._corners[0]),G$Rr.transformCoordinate(G$e._corners[1],G$e._tempM0,G$e._corners[1]),G$Rr.transformCoordinate(G$e._corners[2],G$e._tempM0,G$e._corners[2]),G$Rr.transformCoordinate(G$e._corners[3],G$e._tempM0,G$e._corners[3]),G$Rr.transformCoordinate(G$e._corners[4],G$e._tempM0,G$e._corners[4]),G$Rr.transformCoordinate(G$e._corners[5],G$e._tempM0,G$e._corners[5]),G$Rr.transformCoordinate(G$e._corners[6],G$e._tempM0,G$e._corners[6]),G$Rr.transformCoordinate(G$e._corners[7],G$e._tempM0,G$e._corners[7]),G$Rr.scale(G$H,-1,G$e._boxBound1.min),G$H.cloneTo(G$e._boxBound1.max),G$iq.createfromPoints(G$e._corners,G$e._boxBound2),G$iq.merge(G$e._boxBound2,G$e._boxBound1,G$e._boxBound3);var G$y=G$e._boxBound3.min,G$R=G$e._boxBound3.max;G$Rr.subtract(G$R,G$y,G$e._tempV30),G$Rr.scale(G$e._tempV30,.5,G$e._tempV30),G$Rr.add(G$y,G$e._tempV30,G$e._tempV32),G$Rr.subtract(G$R,G$e._tempV32,G$H),G$Rr.transformCoordinate(G$e._tempV32,G$A,G$e._tempV33)},G$K(G$e,["_tempV30",function(){return this._tempV30=new G$Rr},"_tempV31",function(){return this._tempV31=new G$Rr},"_tempV32",function(){return this._tempV32=new G$Rr},"_tempV33",function(){return this._tempV33=new G$Rr},"_tempV34",function(){return this._tempV34=new G$Rr},"_tempV35",function(){return this._tempV35=new G$Rr},"_tempV36",function(){return this._tempV36=new G$Rr},"_tempM0",function(){return this._tempM0=new G$qr},"_tempM1",function(){return this._tempM1=new G$qr},"_corners",function(){return this._corners=[new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr]},"_rows1",function(){return this._rows1=[new G$Rr,new G$Rr,new G$Rr]},"_rows2",function(){return this._rows2=[new G$Rr,new G$Rr,new G$Rr]},"_ray",function(){return this._ray=new G$Ar(new G$Rr,new G$Rr)},"_boxBound1",function(){return this._boxBound1=new G$iq(new G$Rr,new G$Rr)},"_boxBound2",function(){return this._boxBound2=new G$iq(new G$Rr,new G$Rr)},"_boxBound3",function(){return this._boxBound3=new G$iq(new G$Rr,new G$Rr)}])}(),function(){function G$M(G$q,G$r){this.normal=null,this.distance=NaN,void 0===G$r&&(G$r=0),this.normal=G$q,this.distance=G$r}return G$j(G$M,"laya.d3.math.Plane"),G$M.prototype.normalize=function(){var G$q=this.normal.elements,G$r=G$q[0],G$v=G$q[1],G$H=G$q[2],G$A=1/Math.sqrt(G$r*G$r+G$v*G$v+G$H*G$H);G$q[0]=G$r*G$A,G$q[1]=G$v*G$A,G$q[2]=G$H*G$A,this.distance*=G$A},G$M.createPlaneBy3P=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$r.elements,G$y=G$v.elements,G$R=G$A[0]-G$H[0],G$W=G$A[1]-G$H[1],G$O=G$A[2]-G$H[2],G$N=G$y[0]-G$H[0],G$x=G$y[1]-G$H[1],G$K=G$y[2]-G$H[2],G$T=G$W*G$K-G$O*G$x,G$j=G$O*G$N-G$R*G$K,G$D=G$R*G$x-G$W*G$N,G$g=1/Math.sqrt(G$T*G$T+G$j*G$j+G$D*G$D),G$X=G$T*G$g,G$m=G$j*G$g,G$B=G$D*G$g,G$e=G$M._TEMPVec3.elements;G$e[0]=G$X,G$e[1]=G$m,G$e[2]=G$B;var G$p=-(G$X*G$H[0]+G$m*G$H[1]+G$B*G$H[2]);return new G$M(G$M._TEMPVec3,G$p)},G$M.PlaneIntersectionType_Back=0,G$M.PlaneIntersectionType_Front=1,G$M.PlaneIntersectionType_Intersecting=2,G$K(G$M,["_TEMPVec3",function(){return this._TEMPVec3=new G$Rr}]),G$M}()),G$vr=function(){function G$A(G$q,G$r,G$v,G$H){this.elements=new Float32Array(4),void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=1),this.elements[0]=G$q,this.elements[1]=G$r,this.elements[2]=G$v,this.elements[3]=G$H}G$j(G$A,"laya.d3.math.Quaternion");var G$q=G$A.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.scaling=function(G$q,G$r){var G$v=G$r.elements,G$H=this.elements;G$v[0]=G$H[0]*G$q,G$v[1]=G$H[1]*G$q,G$v[2]=G$H[2]*G$q,G$v[3]=G$H[3]*G$q},G$q.normalize=function(G$q){var G$r=G$q.elements,G$v=this.elements,G$H=G$v[0],G$A=G$v[1],G$y=G$v[2],G$R=G$v[3],G$W=G$H*G$H+G$A*G$A+G$y*G$y+G$R*G$R;0<G$W&&(G$W=1/Math.sqrt(G$W),G$r[0]=G$H*G$W,G$r[1]=G$A*G$W,G$r[2]=G$y*G$W,G$r[3]=G$R*G$W)},G$q.length=function(){var G$q=this.elements,G$r=G$q[0],G$v=G$q[1],G$H=G$q[2],G$A=G$q[3];return Math.sqrt(G$r*G$r+G$v*G$v+G$H*G$H+G$A*G$A)},G$q.rotateX=function(G$q,G$r){var G$v=G$r.elements,G$H=this.elements;G$q*=.5;var G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$H[3],G$O=Math.sin(G$q),G$N=Math.cos(G$q);G$v[0]=G$A*G$N+G$W*G$O,G$v[1]=G$y*G$N+G$R*G$O,G$v[2]=G$R*G$N-G$y*G$O,G$v[3]=G$W*G$N-G$A*G$O},G$q.rotateY=function(G$q,G$r){var G$v=G$r.elements,G$H=this.elements;G$q*=.5;var G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$H[3],G$O=Math.sin(G$q),G$N=Math.cos(G$q);G$v[0]=G$A*G$N-G$R*G$O,G$v[1]=G$y*G$N+G$W*G$O,G$v[2]=G$R*G$N+G$A*G$O,G$v[3]=G$W*G$N-G$y*G$O},G$q.rotateZ=function(G$q,G$r){var G$v=G$r.elements,G$H=this.elements;G$q*=.5;var G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$H[3],G$O=Math.sin(G$q),G$N=Math.cos(G$q);G$v[0]=G$A*G$N+G$y*G$O,G$v[1]=G$y*G$N-G$A*G$O,G$v[2]=G$R*G$N+G$W*G$O,G$v[3]=G$W*G$N-G$R*G$O},G$q.getYawPitchRoll=function(G$q){G$Rr.transformQuat(G$Rr.ForwardRH,this,G$A.TEMPVector31),G$Rr.transformQuat(G$Rr.Up,this,G$A.TEMPVector32);var G$r=G$A.TEMPVector32.elements;G$A.angleTo(G$Rr.ZERO,G$A.TEMPVector31,G$A.TEMPVector33);var G$v=G$A.TEMPVector33.elements;G$v[0]==Math.PI/2?(G$v[1]=G$A.arcTanAngle(G$r[2],G$r[0]),G$v[2]=0):G$v[0]==-Math.PI/2?(G$v[1]=G$A.arcTanAngle(-G$r[2],-G$r[0]),G$v[2]=0):(G$qr.createRotationY(-G$v[1],G$A.TEMPMatrix0),G$qr.createRotationX(-G$v[0],G$A.TEMPMatrix1),G$Rr.transformCoordinate(G$A.TEMPVector32,G$A.TEMPMatrix0,G$A.TEMPVector32),G$Rr.transformCoordinate(G$A.TEMPVector32,G$A.TEMPMatrix1,G$A.TEMPVector32),G$v[2]=G$A.arcTanAngle(G$r[1],-G$r[0])),G$v[1]<=-Math.PI&&(G$v[1]=Math.PI),G$v[2]<=-Math.PI&&(G$v[2]=Math.PI),G$v[1]>=Math.PI&&G$v[2]>=Math.PI&&(G$v[1]=0,G$v[2]=0,G$v[0]=Math.PI-G$v[0]);var G$H=G$q.elements;G$H[0]=G$v[1],G$H[1]=G$v[0],G$H[2]=G$v[2]},G$q.invert=function(G$q){var G$r=G$q.elements,G$v=this.elements,G$H=G$v[0],G$A=G$v[1],G$y=G$v[2],G$R=G$v[3],G$W=G$H*G$H+G$A*G$A+G$y*G$y+G$R*G$R,G$O=G$W?1/G$W:0;G$r[0]=-G$H*G$O,G$r[1]=-G$A*G$O,G$r[2]=-G$y*G$O,G$r[3]=G$R*G$O},G$q.identity=function(){var G$q=this.elements;G$q[0]=0,G$q[1]=0,G$q[2]=0,G$q[3]=1},G$q.fromArray=function(G$q,G$r){void 0===G$r&&(G$r=0),this.elements[0]=G$q[G$r+0],this.elements[1]=G$q[G$r+1],this.elements[2]=G$q[G$r+2],this.elements[3]=G$q[G$r+3]},G$q.cloneTo=function(G$q){var G$r,G$v,G$H;if((G$v=this.elements)!==(G$H=G$q.elements))for(G$r=0;G$r<4;++G$r)G$H[G$r]=G$v[G$r]},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$q.equals=function(G$q){var G$r=this.elements,G$v=G$q.elements;return G$nq.nearEqual(G$r[0],G$v[0])&&G$nq.nearEqual(G$r[1],G$v[1])&&G$nq.nearEqual(G$r[2],G$v[2])&&G$nq.nearEqual(G$r[3],G$v[3])},G$q.lengthSquared=function(){var G$q=this.elements[0],G$r=this.elements[1],G$v=this.elements[2],G$H=this.elements[3];return G$q*G$q+G$r*G$r+G$v*G$v+G$H*G$H},G$D(0,G$q,"x",function(){return this.elements[0]}),G$D(0,G$q,"y",function(){return this.elements[1]}),G$D(0,G$q,"z",function(){return this.elements[2]}),G$D(0,G$q,"w",function(){return this.elements[3]}),G$A.createFromYawPitchRoll=function(G$q,G$r,G$v,G$H){var G$A=.5*G$v,G$y=.5*G$r,G$R=.5*G$q,G$W=Math.sin(G$A),G$O=Math.cos(G$A),G$N=Math.sin(G$y),G$x=Math.cos(G$y),G$K=Math.sin(G$R),G$T=Math.cos(G$R),G$j=G$H.elements;G$j[0]=G$T*G$N*G$O+G$K*G$x*G$W,G$j[1]=G$K*G$x*G$O-G$T*G$N*G$W,G$j[2]=G$T*G$x*G$W-G$K*G$N*G$O,G$j[3]=G$T*G$x*G$O+G$K*G$N*G$W},G$A.multiply=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$r.elements,G$y=G$v.elements,G$R=G$H[0],G$W=G$H[1],G$O=G$H[2],G$N=G$H[3],G$x=G$A[0],G$K=G$A[1],G$T=G$A[2],G$j=G$A[3],G$D=G$W*G$T-G$O*G$K,G$g=G$O*G$x-G$R*G$T,G$X=G$R*G$K-G$W*G$x,G$m=G$R*G$x+G$W*G$K+G$O*G$T;G$y[0]=G$R*G$j+G$x*G$N+G$D,G$y[1]=G$W*G$j+G$K*G$N+G$g,G$y[2]=G$O*G$j+G$T*G$N+G$X,G$y[3]=G$N*G$j-G$m},G$A.arcTanAngle=function(G$q,G$r){return 0==G$q?1==G$r?Math.PI/2:-Math.PI/2:0<G$q?Math.atan(G$r/G$q):G$q<0?0<G$r?Math.atan(G$r/G$q)+Math.PI:Math.atan(G$r/G$q)-Math.PI:0},G$A.angleTo=function(G$q,G$r,G$v){G$Rr.subtract(G$r,G$q,G$A.TEMPVector30),G$Rr.normalize(G$A.TEMPVector30,G$A.TEMPVector30),G$v.elements[0]=Math.asin(G$A.TEMPVector30.y),G$v.elements[1]=G$A.arcTanAngle(-G$A.TEMPVector30.z,-G$A.TEMPVector30.x)},G$A.createFromAxisAngle=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements;G$r*=.5;var G$y=Math.sin(G$r);G$H[0]=G$y*G$A[0],G$H[1]=G$y*G$A[1],G$H[2]=G$y*G$A[2],G$H[3]=Math.cos(G$r)},G$A.createFromMatrix3x3=function(G$q,G$r){var G$v,G$H=G$r.elements,G$A=G$q.elements,G$y=G$A[0]+G$A[4]+G$A[8];if(0<G$y)G$v=Math.sqrt(G$y+1),G$H[3]=.5*G$v,G$v=.5/G$v,G$H[0]=(G$A[5]-G$A[7])*G$v,G$H[1]=(G$A[6]-G$A[2])*G$v,G$H[2]=(G$A[1]-G$A[3])*G$v;else{var G$R=0;G$A[4]>G$A[0]&&(G$R=1),G$A[8]>G$A[3*G$R+G$R]&&(G$R=2);var G$W=(G$R+1)%3,G$O=(G$R+2)%3;G$v=Math.sqrt(G$A[3*G$R+G$R]-G$A[3*G$W+G$W]-G$A[3*G$O+G$O]+1),G$H[G$R]=.5*G$v,G$v=.5/G$v,G$H[3]=(G$A[3*G$W+G$O]-G$A[3*G$O+G$W])*G$v,G$H[G$W]=(G$A[3*G$W+G$R]+G$A[3*G$R+G$W])*G$v,G$H[G$O]=(G$A[3*G$O+G$R]+G$A[3*G$R+G$O])*G$v}},G$A.createFromMatrix4x4=function(G$q,G$r){var G$v,G$H,G$A=G$q.elements,G$y=G$r.elements,G$R=G$A[0]+G$A[5]+G$A[10];0<G$R?(G$v=Math.sqrt(G$R+1),G$y[3]=.5*G$v,G$v=.5/G$v,G$y[0]=(G$A[6]-G$A[9])*G$v,G$y[1]=(G$A[8]-G$A[2])*G$v,G$y[2]=(G$A[1]-G$A[4])*G$v):G$A[0]>=G$A[5]&&G$A[0]>=G$A[10]?(G$H=.5/(G$v=Math.sqrt(1+G$A[0]-G$A[5]-G$A[10])),G$y[0]=.5*G$v,G$y[1]=(G$A[1]+G$A[4])*G$H,G$y[2]=(G$A[2]+G$A[8])*G$H,G$y[3]=(G$A[6]-G$A[9])*G$H):G$A[5]>G$A[10]?(G$H=.5/(G$v=Math.sqrt(1+G$A[5]-G$A[0]-G$A[10])),G$y[0]=(G$A[4]+G$A[1])*G$H,G$y[1]=.5*G$v,G$y[2]=(G$A[9]+G$A[6])*G$H,G$y[3]=(G$A[8]-G$A[2])*G$H):(G$H=.5/(G$v=Math.sqrt(1+G$A[10]-G$A[0]-G$A[5])),G$y[0]=(G$A[8]+G$A[2])*G$H,G$y[1]=(G$A[9]+G$A[6])*G$H,G$y[2]=.5*G$v,G$y[3]=(G$A[1]-G$A[4])*G$H)},G$A.slerp=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R,G$W,G$O,G$N=G$q.elements,G$x=G$r.elements,G$K=G$H.elements,G$T=G$N[0],G$j=G$N[1],G$D=G$N[2],G$g=G$N[3],G$X=G$x[0],G$m=G$x[1],G$B=G$x[2],G$e=G$x[3];return(G$y=G$T*G$X+G$j*G$m+G$D*G$B+G$g*G$e)<0&&(G$y=-G$y,G$X=-G$X,G$m=-G$m,G$B=-G$B,G$e=-G$e),G$O=1e-6<1-G$y?(G$A=Math.acos(G$y),G$R=Math.sin(G$A),G$W=Math.sin((1-G$v)*G$A)/G$R,Math.sin(G$v*G$A)/G$R):(G$W=1-G$v,G$v),G$K[0]=G$W*G$T+G$O*G$X,G$K[1]=G$W*G$j+G$O*G$m,G$K[2]=G$W*G$D+G$O*G$B,G$K[3]=G$W*G$g+G$O*G$e,G$K},G$A.lerp=function(G$q,G$r,G$v,G$H){var G$A=G$H.elements,G$y=G$q.elements,G$R=G$r.elements,G$W=G$y[0],G$O=G$y[1],G$N=G$y[2],G$x=G$y[3];G$A[0]=G$W+G$v*(G$R[0]-G$W),G$A[1]=G$O+G$v*(G$R[1]-G$O),G$A[2]=G$N+G$v*(G$R[2]-G$N),G$A[3]=G$x+G$v*(G$R[3]-G$x)},G$A.add=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=G$A[0]+G$y[0],G$H[1]=G$A[1]+G$y[1],G$H[2]=G$A[2]+G$y[2],G$H[3]=G$A[3]+G$y[3]},G$A.dot=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;return G$v[0]*G$H[0]+G$v[1]*G$H[1]+G$v[2]*G$H[2]+G$v[3]*G$H[3]},G$A.rotationLookAt=function(G$q,G$r,G$v){G$A.lookAt(G$Rr.ZERO,G$q,G$r,G$v)},G$A.lookAt=function(G$q,G$r,G$v,G$H){G$kq.lookAt(G$q,G$r,G$v,G$A._tempMatrix3x3),G$A.rotationMatrix(G$A._tempMatrix3x3,G$H)},G$A.invert=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$q.lengthSquared();G$nq.isZero(G$A)||(G$A=1/G$A,G$H[0]=-G$v[0]*G$A,G$H[1]=-G$v[1]*G$A,G$H[2]=-G$v[2]*G$A,G$H[3]=G$v[3]*G$A)},G$A.rotationMatrix=function(G$q,G$r){var G$v=G$q.elements,G$H=G$v[0],G$A=G$v[1],G$y=G$v[2],G$R=G$v[3],G$W=G$v[4],G$O=G$v[5],G$N=G$v[6],G$x=G$v[7],G$K=G$v[8],G$T=G$r.elements,G$j=NaN,G$D=NaN,G$g=G$H+G$W+G$K;0<G$g?(G$j=Math.sqrt(G$g+1),G$T[3]=.5*G$j,G$j=.5/G$j,G$T[0]=(G$O-G$x)*G$j,G$T[1]=(G$N-G$y)*G$j,G$T[2]=(G$A-G$R)*G$j):G$W<=G$H&&G$K<=G$H?(G$D=.5/(G$j=Math.sqrt(1+G$H-G$W-G$K)),G$T[0]=.5*G$j,G$T[1]=(G$A+G$R)*G$D,G$T[2]=(G$y+G$N)*G$D,G$T[3]=(G$O-G$x)*G$D):G$K<G$W?(G$D=.5/(G$j=Math.sqrt(1+G$W-G$H-G$K)),G$T[0]=(G$R+G$A)*G$D,G$T[1]=.5*G$j,G$T[2]=(G$x+G$O)*G$D,G$T[3]=(G$N-G$y)*G$D):(G$D=.5/(G$j=Math.sqrt(1+G$K-G$H-G$W)),G$T[0]=(G$N+G$y)*G$D,G$T[1]=(G$x+G$O)*G$D,G$T[2]=.5*G$j,G$T[3]=(G$A-G$R)*G$D)},G$A.DEFAULT=new G$A,G$K(G$A,["TEMPVector30",function(){return this.TEMPVector30=new G$Rr},"TEMPVector31",function(){return this.TEMPVector31=new G$Rr},"TEMPVector32",function(){return this.TEMPVector32=new G$Rr},"TEMPVector33",function(){return this.TEMPVector33=new G$Rr},"TEMPMatrix0",function(){return this.TEMPMatrix0=new G$qr},"TEMPMatrix1",function(){return this.TEMPMatrix1=new G$qr},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new G$kq},"NAN",function(){return this.NAN=new G$A(NaN,NaN,NaN,NaN)}]),G$A}(),G$Hr=function(){function G$q(G$q){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=G$q,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}G$j(G$q,"laya.d3.math.Rand");var G$r=G$q.prototype;return G$r.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},G$r.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},G$r.getSignedFloat=function(){return 2*this.getFloat()-1},G$D(0,G$r,"seed",function(){return this.seeds[0]},function(G$q){this.seeds[0]=G$q,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),G$q.getFloatFromInt=function(G$q){return 1/8388607*(8388607&G$q)},G$q.getByteFromInt=function(G$q){return(8388607&G$q)>>>15},G$q}(),G$Ar=(function(){function G$A(G$q){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(G$q instanceof Array)||4!==G$q.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|G$q[0],this._state0L=0|G$q[1],this._state1U=0|G$q[2],this._state1L=0|G$q[3]}G$j(G$A,"laya.d3.math.RandX");var G$q=G$A.prototype;G$q.randomint=function(){var G$q=this._state0U,G$r=this._state0L,G$v=this._state1U,G$H=this._state1L,G$A=(G$H>>>0)+(G$r>>>0),G$y=G$v+G$q+(G$A/2>>>31)>>>0,G$R=G$A>>>0,G$W=0,G$O=0;G$W=(G$q^=G$W=G$q<<23|(-512&G$r)>>>9)^(this._state0U=G$v),G$O=(G$r^=G$O=G$r<<23)^(this._state0L=G$H);G$W^=G$q>>>18,G$O^=G$r>>>18|(262143&G$q)<<14;return G$W^=G$v>>>5,G$O^=G$H>>>5|(31&G$v)<<27,this._state1U=G$W,this._state1L=G$O,[G$y,G$R]},G$q.random=function(){var G$q=this.randomint(),G$r=G$q[0],G$v=1023<<20|G$r>>>12,G$H=0|(G$q[1]>>>12|(4095&G$r)<<20);return G$A._CONVERTION_BUFFER.setUint32(0,G$v,!1),G$A._CONVERTION_BUFFER.setUint32(4,G$H,!1),G$Hr._CONVERTION_BUFFER.getFloat64(0,!1)-1},G$K(G$A,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new G$Hr([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function G$q(G$q,G$r){this.origin=null,this.direction=null,this.origin=G$q,this.direction=G$r}return G$j(G$q,"laya.d3.math.Ray"),G$q}()),G$yr=function(){function G$q(G$q,G$r){this.elements=new Float32Array(2),void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0);var G$v=this.elements;G$v[0]=G$q,G$v[1]=G$r}G$j(G$q,"laya.d3.math.Vector2");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.fromArray=function(G$q,G$r){void 0===G$r&&(G$r=0),this.elements[0]=G$q[G$r+0],this.elements[1]=G$q[G$r+1]},G$r.cloneTo=function(G$q){var G$r=G$q.elements,G$v=this.elements;G$r[0]=G$v[0],G$r[1]=G$v[1]},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"x",function(){return this.elements[0]},function(G$q){this.elements[0]=G$q}),G$D(0,G$r,"y",function(){return this.elements[1]},function(G$q){this.elements[1]=G$q}),G$q.scale=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements;G$H[0]=G$A[0]*G$r,G$H[1]=G$A[1]*G$r},G$K(G$q,["ZERO",function(){return this.ZERO=new G$q(0,0)},"ONE",function(){return this.ONE=new G$q(1,1)}]),G$q}(),G$Rr=function(){function G$x(G$q,G$r,G$v){this.elements=new Float32Array(3),void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0);var G$H=this.elements;G$H[0]=G$q,G$H[1]=G$r,G$H[2]=G$v}G$j(G$x,"laya.d3.math.Vector3");var G$q=G$x.prototype;return G$M.imps(G$q,{"laya.d3.core.IClone":!0}),G$q.fromArray=function(G$q,G$r){void 0===G$r&&(G$r=0),this.elements[0]=G$q[G$r+0],this.elements[1]=G$q[G$r+1],this.elements[2]=G$q[G$r+2]},G$q.cloneTo=function(G$q){var G$r=G$q.elements,G$v=this.elements;G$r[0]=G$v[0],G$r[1]=G$v[1],G$r[2]=G$v[2]},G$q.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$q.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},G$q.reset=function(G$q,G$r,G$v){this.elements[0]=G$q,this.elements[1]=G$r,this.elements[2]=G$v},G$D(0,G$q,"x",function(){return this.elements[0]},function(G$q){this.elements[0]=G$q}),G$D(0,G$q,"y",function(){return this.elements[1]},function(G$q){this.elements[1]=G$q}),G$D(0,G$q,"z",function(){return this.elements[2]},function(G$q){this.elements[2]=G$q}),G$x.distanceSquared=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$v[0]-G$H[0],G$y=G$v[1]-G$H[1],G$R=G$v[2]-G$H[2];return G$A*G$A+G$y*G$y+G$R*G$R},G$x.distance=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$v[0]-G$H[0],G$y=G$v[1]-G$H[1],G$R=G$v[2]-G$H[2];return Math.sqrt(G$A*G$A+G$y*G$y+G$R*G$R)},G$x.min=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=Math.min(G$A[0],G$y[0]),G$H[1]=Math.min(G$A[1],G$y[1]),G$H[2]=Math.min(G$A[2],G$y[2])},G$x.max=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=Math.max(G$A[0],G$y[0]),G$H[1]=Math.max(G$A[1],G$y[1]),G$H[2]=Math.max(G$A[2],G$y[2])},G$x.transformQuat=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements,G$R=G$A[0],G$W=G$A[1],G$O=G$A[2],G$N=G$y[0],G$x=G$y[1],G$K=G$y[2],G$T=G$y[3],G$j=G$T*G$R+G$x*G$O-G$K*G$W,G$D=G$T*G$W+G$K*G$R-G$N*G$O,G$g=G$T*G$O+G$N*G$W-G$x*G$R,G$X=-G$N*G$R-G$x*G$W-G$K*G$O;G$H[0]=G$j*G$T+G$X*-G$N+G$D*-G$K-G$g*-G$x,G$H[1]=G$D*G$T+G$X*-G$x+G$g*-G$N-G$j*-G$K,G$H[2]=G$g*G$T+G$X*-G$K+G$j*-G$x-G$D*-G$N},G$x.scalarLength=function(G$q){var G$r=G$q.elements,G$v=G$r[0],G$H=G$r[1],G$A=G$r[2];return Math.sqrt(G$v*G$v+G$H*G$H+G$A*G$A)},G$x.scalarLengthSquared=function(G$q){var G$r=G$q.elements,G$v=G$r[0],G$H=G$r[1],G$A=G$r[2];return G$v*G$v+G$H*G$H+G$A*G$A},G$x.normalize=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$v[0],G$y=G$v[1],G$R=G$v[2],G$W=G$A*G$A+G$y*G$y+G$R*G$R;0<G$W&&(G$W=1/Math.sqrt(G$W),G$H[0]=G$v[0]*G$W,G$H[1]=G$v[1]*G$W,G$H[2]=G$v[2]*G$W)},G$x.multiply=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=G$A[0]*G$y[0],G$H[1]=G$A[1]*G$y[1],G$H[2]=G$A[2]*G$y[2]},G$x.scale=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements;G$H[0]=G$A[0]*G$r,G$H[1]=G$A[1]*G$r,G$H[2]=G$A[2]*G$r},G$x.lerp=function(G$q,G$r,G$v,G$H){var G$A=G$H.elements,G$y=G$q.elements,G$R=G$r.elements,G$W=G$y[0],G$O=G$y[1],G$N=G$y[2];G$A[0]=G$W+G$v*(G$R[0]-G$W),G$A[1]=G$O+G$v*(G$R[1]-G$O),G$A[2]=G$N+G$v*(G$R[2]-G$N)},G$x.transformV3ToV3=function(G$q,G$r,G$v){var G$H=G$x._tempVector4;G$x.transformV3ToV4(G$q,G$r,G$H);var G$A=G$H.elements,G$y=G$v.elements;G$y[0]=G$A[0],G$y[1]=G$A[1],G$y[2]=G$A[2]},G$x.transformV3ToV4=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$r.elements,G$O=G$v.elements;G$O[0]=G$A*G$W[0]+G$y*G$W[4]+G$R*G$W[8]+G$W[12],G$O[1]=G$A*G$W[1]+G$y*G$W[5]+G$R*G$W[9]+G$W[13],G$O[2]=G$A*G$W[2]+G$y*G$W[6]+G$R*G$W[10]+G$W[14],G$O[3]=G$A*G$W[3]+G$y*G$W[7]+G$R*G$W[11]+G$W[15]},G$x.TransformNormal=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$r.elements,G$O=G$v.elements;G$O[0]=G$A*G$W[0]+G$y*G$W[4]+G$R*G$W[8],G$O[1]=G$A*G$W[1]+G$y*G$W[5]+G$R*G$W[9],G$O[2]=G$A*G$W[2]+G$y*G$W[6]+G$R*G$W[10]},G$x.transformCoordinate=function(G$q,G$r,G$v){var G$H=G$x._tempVector4.elements,G$A=G$q.elements,G$y=G$A[0],G$R=G$A[1],G$W=G$A[2],G$O=G$r.elements;G$H[0]=G$y*G$O[0]+G$R*G$O[4]+G$W*G$O[8]+G$O[12],G$H[1]=G$y*G$O[1]+G$R*G$O[5]+G$W*G$O[9]+G$O[13],G$H[2]=G$y*G$O[2]+G$R*G$O[6]+G$W*G$O[10]+G$O[14],G$H[3]=1/(G$y*G$O[3]+G$R*G$O[7]+G$W*G$O[11]+G$O[15]);var G$N=G$v.elements;G$N[0]=G$H[0]*G$H[3],G$N[1]=G$H[1]*G$H[3],G$N[2]=G$H[2]*G$H[3]},G$x.Clamp=function(G$q,G$r,G$v,G$H){var G$A=G$q.elements,G$y=G$A[0],G$R=G$A[1],G$W=G$A[2],G$O=G$r.elements,G$N=G$O[0],G$x=G$O[1],G$K=G$O[2],G$T=G$v.elements,G$j=G$T[0],G$D=G$T[1],G$g=G$T[2],G$X=G$H.elements;G$y=(G$y=G$j<G$y?G$j:G$y)<G$N?G$N:G$y,G$R=(G$R=G$D<G$R?G$D:G$R)<G$x?G$x:G$R,G$W=(G$W=G$g<G$W?G$g:G$W)<G$K?G$K:G$W,G$X[0]=G$y,G$X[1]=G$R,G$X[2]=G$W},G$x.add=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=G$A[0]+G$y[0],G$H[1]=G$A[1]+G$y[1],G$H[2]=G$A[2]+G$y[2]},G$x.subtract=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=G$A[0]-G$y[0],G$H[1]=G$A[1]-G$y[1],G$H[2]=G$A[2]-G$y[2]},G$x.cross=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$r.elements,G$y=G$v.elements,G$R=G$H[0],G$W=G$H[1],G$O=G$H[2],G$N=G$A[0],G$x=G$A[1],G$K=G$A[2];G$y[0]=G$W*G$K-G$O*G$x,G$y[1]=G$O*G$N-G$R*G$K,G$y[2]=G$R*G$x-G$W*G$N},G$x.dot=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;return G$v[0]*G$H[0]+G$v[1]*G$H[1]+G$v[2]*G$H[2]},G$x.equals=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;return G$nq.nearEqual(Math.abs(G$v[0]),Math.abs(G$H[0]))&&G$nq.nearEqual(Math.abs(G$v[1]),Math.abs(G$H[1]))&&G$nq.nearEqual(Math.abs(G$v[2]),Math.abs(G$H[2]))},G$x.ZERO=new G$x(0,0,0),G$x.ONE=new G$x(1,1,1),G$x.NegativeUnitX=new G$x(-1,0,0),G$x.UnitX=new G$x(1,0,0),G$x.UnitY=new G$x(0,1,0),G$x.UnitZ=new G$x(0,0,1),G$x.ForwardRH=new G$x(0,0,-1),G$x.ForwardLH=new G$x(0,0,1),G$x.Up=new G$x(0,1,0),G$x.NAN=new G$x(NaN,NaN,NaN),G$K(G$x,["_tempVector4",function(){return this._tempVector4=new G$Wr}]),G$x}(),G$Wr=function(){function G$q(G$q,G$r,G$v,G$H){this.elements=new Float32Array(4),void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=0);var G$A=this.elements;G$A[0]=G$q,G$A[1]=G$r,G$A[2]=G$v,G$A[3]=G$H}G$j(G$q,"laya.d3.math.Vector4");var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r.fromArray=function(G$q,G$r){void 0===G$r&&(G$r=0),this.elements[0]=G$q[G$r+0],this.elements[1]=G$q[G$r+1],this.elements[2]=G$q[G$r+2],this.elements[3]=G$q[G$r+3]},G$r.cloneTo=function(G$q){var G$r=G$q.elements,G$v=this.elements;G$r[0]=G$v[0],G$r[1]=G$v[1],G$r[2]=G$v[2],G$r[3]=G$v[3]},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$r.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},G$r.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},G$D(0,G$r,"x",function(){return this.elements[0]},function(G$q){this.elements[0]=G$q}),G$D(0,G$r,"y",function(){return this.elements[1]},function(G$q){this.elements[1]=G$q}),G$D(0,G$r,"z",function(){return this.elements[2]},function(G$q){this.elements[2]=G$q}),G$D(0,G$r,"w",function(){return this.elements[3]},function(G$q){this.elements[3]=G$q}),G$q.lerp=function(G$q,G$r,G$v,G$H){var G$A=G$H.elements,G$y=G$q.elements,G$R=G$r.elements,G$W=G$y[0],G$O=G$y[1],G$N=G$y[2],G$x=G$y[3];G$A[0]=G$W+G$v*(G$R[0]-G$W),G$A[1]=G$O+G$v*(G$R[1]-G$O),G$A[2]=G$N+G$v*(G$R[2]-G$N),G$A[3]=G$x+G$v*(G$R[3]-G$x)},G$q.transformByM4x4=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$H[0],G$y=G$H[1],G$R=G$H[2],G$W=G$H[3],G$O=G$r.elements,G$N=G$v.elements;G$N[0]=G$A*G$O[0]+G$y*G$O[4]+G$R*G$O[8]+G$W*G$O[12],G$N[1]=G$A*G$O[1]+G$y*G$O[5]+G$R*G$O[9]+G$W*G$O[13],G$N[2]=G$A*G$O[2]+G$y*G$O[6]+G$R*G$O[10]+G$W*G$O[14],G$N[3]=G$A*G$O[3]+G$y*G$O[7]+G$R*G$O[11]+G$W*G$O[15]},G$q.equals=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;return G$nq.nearEqual(Math.abs(G$v[0]),Math.abs(G$H[0]))&&G$nq.nearEqual(Math.abs(G$v[1]),Math.abs(G$H[1]))&&G$nq.nearEqual(Math.abs(G$v[2]),Math.abs(G$H[2]))&&G$nq.nearEqual(Math.abs(G$v[3]),Math.abs(G$H[3]))},G$q.normalize=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$q.length();0<G$A&&(G$H[0]=G$v[0]*G$A,G$H[1]=G$v[1]*G$A,G$H[2]=G$v[2]*G$A,G$H[3]=G$v[3]*G$A)},G$q.add=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=G$A[0]+G$y[0],G$H[1]=G$A[1]+G$y[1],G$H[2]=G$A[2]+G$y[2],G$H[3]=G$A[3]+G$y[3]},G$q.subtract=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=G$A[0]-G$y[0],G$H[1]=G$A[1]-G$y[1],G$H[2]=G$A[2]-G$y[2],G$H[3]=G$A[3]-G$y[3]},G$q.multiply=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=G$A[0]*G$y[0],G$H[1]=G$A[1]*G$y[1],G$H[2]=G$A[2]*G$y[2],G$H[3]=G$A[3]*G$y[3]},G$q.scale=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements;G$H[0]=G$A[0]*G$r,G$H[1]=G$A[1]*G$r,G$H[2]=G$A[2]*G$r,G$H[3]=G$A[3]*G$r},G$q.Clamp=function(G$q,G$r,G$v,G$H){var G$A=G$q.elements,G$y=G$A[0],G$R=G$A[1],G$W=G$A[2],G$O=G$A[3],G$N=G$r.elements,G$x=G$N[0],G$K=G$N[1],G$T=G$N[2],G$j=G$N[3],G$D=G$v.elements,G$g=G$D[0],G$X=G$D[1],G$m=G$D[2],G$B=G$D[3],G$e=G$H.elements;G$y=(G$y=G$g<G$y?G$g:G$y)<G$x?G$x:G$y,G$R=(G$R=G$X<G$R?G$X:G$R)<G$K?G$K:G$R,G$W=(G$W=G$m<G$W?G$m:G$W)<G$T?G$T:G$W,G$O=(G$O=G$B<G$O?G$B:G$O)<G$j?G$j:G$O,G$e[0]=G$y,G$e[1]=G$R,G$e[2]=G$W,G$e[3]=G$O},G$q.distanceSquared=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$v[0]-G$H[0],G$y=G$v[1]-G$H[1],G$R=G$v[2]-G$H[2],G$W=G$v[3]-G$H[3];return G$A*G$A+G$y*G$y+G$R*G$R+G$W*G$W},G$q.distance=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements,G$A=G$v[0]-G$H[0],G$y=G$v[1]-G$H[1],G$R=G$v[2]-G$H[2],G$W=G$v[3]-G$H[3];return Math.sqrt(G$A*G$A+G$y*G$y+G$R*G$R+G$W*G$W)},G$q.dot=function(G$q,G$r){var G$v=G$q.elements,G$H=G$r.elements;return G$v[0]*G$H[0]+G$v[1]*G$H[1]+G$v[2]*G$H[2]+G$v[3]*G$H[3]},G$q.min=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=Math.min(G$A[0],G$y[0]),G$H[1]=Math.min(G$A[1],G$y[1]),G$H[2]=Math.min(G$A[2],G$y[2]),G$H[3]=Math.min(G$A[3],G$y[3])},G$q.max=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r.elements;G$H[0]=Math.max(G$A[0],G$y[0]),G$H[1]=Math.max(G$A[1],G$y[1]),G$H[2]=Math.max(G$A[2],G$y[2]),G$H[3]=Math.max(G$A[3],G$y[3])},G$K(G$q,["ZERO",function(){return this.ZERO=new G$q},"ONE",function(){return this.ONE=new G$q(1,1,1,1)},"UnitX",function(){return this.UnitX=new G$q(1,0,0,0)},"UnitY",function(){return this.UnitY=new G$q(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new G$q(0,0,1,0)},"UnitW",function(){return this.UnitW=new G$q(0,0,0,1)}]),G$q}(),G$Or=function(){function G$y(G$q,G$r,G$v,G$H){this.minDepth=0,this.maxDepth=1,this.x=G$q,this.y=G$r,this.width=G$v,this.height=G$H}G$j(G$y,"laya.d3.math.Viewport");var G$q=G$y.prototype;return G$q.project=function(G$q,G$r,G$v){G$Rr.transformV3ToV3(G$q,G$r,G$v);var G$H=G$q.elements,G$A=G$r.elements,G$y=G$v.elements,G$R=G$H[0]*G$A[3]+G$H[1]*G$A[7]+G$H[2]*G$A[11]+G$A[15];1!==G$R&&(G$y[0]=G$y[0]/G$R,G$y[1]=G$y[1]/G$R,G$y[2]=G$y[2]/G$R),G$y[0]=.5*(G$y[0]+1)*this.width+this.x,G$y[1]=.5*(1-G$y[1])*this.height+this.y,G$y[2]=G$y[2]*(this.maxDepth-this.minDepth)+this.minDepth},G$q.unprojectFromMat=function(G$q,G$r,G$v){var G$H=G$q.elements,G$A=G$r.elements,G$y=G$v.elements;G$y[0]=(G$H[0]-this.x)/this.width*2-1,G$y[1]=-((G$H[1]-this.y)/this.height*2-1);var G$R=(this.maxDepth-this.minDepth)/2;G$y[2]=(G$H[2]-this.minDepth-G$R)/G$R;var G$W=G$y[0]*G$A[3]+G$y[1]*G$A[7]+G$y[2]*G$A[11]+G$A[15];G$Rr.transformV3ToV3(G$v,G$r,G$v),1!==G$W&&(G$y[0]=G$y[0]/G$W,G$y[1]=G$y[1]/G$W,G$y[2]=G$y[2]/G$W)},G$q.unprojectFromWVP=function(G$q,G$r,G$v,G$H,G$A){G$qr.multiply(G$r,G$v,G$y._tempMatrix4x4),G$H&&G$qr.multiply(G$y._tempMatrix4x4,G$H,G$y._tempMatrix4x4),G$y._tempMatrix4x4.invert(G$y._tempMatrix4x4),this.unprojectFromMat(G$q,G$y._tempMatrix4x4,G$A)},G$K(G$y,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new G$qr}]),G$y}(),G$Nr=function(){function G$G(G$q){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=G$q,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}G$j(G$G,"laya.d3.resource.models.SubMesh");var G$q=G$G.prototype;return G$M.imps(G$q,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),G$q._getVertexBuffer=function(G$q){return void 0===G$q&&(G$q=0),0===G$q?this._vertexBuffer:null},G$q._getIndexBuffer=function(){return this._indexBuffer},G$q._getStaticBatchBakedVertexs=function(G$q,G$r){var G$v,G$H,G$A=this._vertexBuffer,G$y=G$A.vertexDeclaration,G$R=G$y.getVertexElementByUsage(0).offset/4,G$W=G$y.getVertexElementByUsage(3).offset/4,G$O=G$r.meshRender.lightmapScaleOffset,G$N=0,G$x=0,G$K=0,G$T=0,G$j=0,G$D=0;if(G$O)if(G$H=G$y.getVertexElementByUsage(15))G$K=G$y.vertexStride/4,G$v=0<this._vertexCount?G$A.getData().slice(this._vertexStart*G$K,(this._vertexStart+this._vertexCount)*G$K):G$A.getData().slice(),G$T=G$H.offset/4;else{G$K=(G$D=G$y.vertexStride/4)+2,G$v=this._vertexCount?new Float32Array(this._vertexCount*(G$A.vertexDeclaration.vertexStride/4+2)):new Float32Array(G$A.vertexCount*(G$A.vertexDeclaration.vertexStride/4+2)),G$T=(G$j=G$y.getVertexElementByUsage(2).offset/4)+2;var G$g=G$A.getData();for(G$N=0,G$x=G$g.length/G$D;G$N<G$x;G$N++){var G$X=0;G$X=0<this._vertexCount?(this._vertexStart+G$N)*G$D:G$N*G$D;var G$m=G$N*G$K,G$B=0;for(G$B=0;G$B<G$T;G$B++)G$v[G$m+G$B]=G$g[G$X+G$B];for(G$B=G$T;G$B<G$D;G$B++)G$v[G$m+G$B+2]=G$g[G$X+G$B]}}else G$K=G$y.vertexStride/4,G$v=this._vertexCount?G$A.getData().slice(this._vertexStart*G$K,(this._vertexStart+this._vertexCount)*G$K):G$A.getData().slice();if(G$q){var G$e=G$q.worldMatrix,G$p=G$G._tempMatrix4x40;G$e.invert(G$p);var G$M=G$G._tempMatrix4x41,G$z=G$r.transform.worldMatrix;G$qr.multiply(G$p,G$z,G$M)}else G$M=G$r.transform.worldMatrix;var G$P=G$G._tempQuaternion0;for(G$M.decomposeTransRotScale(G$G._tempVector30,G$P,G$G._tempVector31),G$N=0,G$x=G$v.length/G$K;G$N<G$x;G$N++){var G$V=G$N*G$K+G$R,G$a=G$N*G$K+G$W;if(G$Xr.transformVector3ArrayToVector3ArrayCoordinate(G$v,G$V,G$M,G$v,G$V),G$Xr.transformVector3ArrayByQuat(G$v,G$a,G$P,G$v,G$a),G$O){var G$J=G$N*G$K+G$T;if(G$H)G$Xr.transformLightingMapTexcoordByUV1Array(G$v,G$J,G$O,G$v,G$J);else{var G$$=G$N*G$D+G$j;G$Xr.transformLightingMapTexcoordByUV0Array(G$g,G$$,G$O,G$v,G$J)}}}return G$v},G$q._getVertexBuffers=function(){return null},G$q._beforeRender=function(G$q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$q._render=function(G$q){var G$r,G$v=0,G$H=G$q.renderElement;if(1<this._indexCount){var G$A=this._boneIndicesList.length;if(1<G$A){for(var G$y=0;G$y<G$A;G$y++)(G$r=G$H._skinAnimationDatas||this._skinAnimationDatas)&&(G$H._shaderValue.setValue(0,G$r[G$y]),G$q._shader.uploadRenderElementUniforms(G$H._shaderValue.data)),G$E.mainContext.drawElements(4,this._subIndexBufferCount[G$y],5123,2*this._subIndexBufferStart[G$y]);G$V.drawCall+=G$A}else(G$r=G$H._skinAnimationDatas||this._skinAnimationDatas)&&(G$H._shaderValue.setValue(0,G$r[0]),G$q._shader.uploadRenderElementUniforms(G$H._shaderValue.data)),G$E.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),G$V.drawCall++;G$v=this._indexCount}else G$v=this._indexBuffer.indexCount,(G$r=G$H._skinAnimationDatas||this._skinAnimationDatas)&&(G$H._shaderValue.setValue(0,G$r[0]),G$q._shader.uploadRenderElementUniforms(G$H._shaderValue.data)),G$E.mainContext.drawElements(4,G$v,5123,0),G$V.drawCall++;G$V.trianglesFaces+=G$v/3},G$q.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},G$q.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},G$D(0,G$q,"_vertexBufferCount",function(){return 1}),G$D(0,G$q,"triangleCount",function(){return this._indexBuffer.indexCount/3}),G$K(G$G,["_tempVector30",function(){return this._tempVector30=new G$Rr},"_tempVector31",function(){return this._tempVector31=new G$Rr},"_tempQuaternion0",function(){return this._tempQuaternion0=new G$vr},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new G$qr},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new G$qr}]),G$G}(),G$xr=function(){function G$q(G$q){this.defineCounter=0,this.defines=null,G$q?(this.defineCounter=G$q.defineCounter,this.defines=G$q.defines.slice()):(this.defineCounter=0,this.defines=[])}return G$j(G$q,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),G$q.prototype.registerDefine=function(G$q){var G$r=Math.pow(2,this.defineCounter++);return this.defines[G$r]=G$q,G$r},G$q}(),G$Kr=function(){function G$q(){}return G$j(G$q,"laya.d3.shader.ShaderInit3D"),G$q.__init__=function(){var G$q,G$r;G$Vr._globalRegDefine("HIGHPRECISION",G$Vr.SHADERDEFINE_HIGHPRECISION),G$Vr._globalRegDefine("FOG",G$Vr.SHADERDEFINE_FOG),G$Vr._globalRegDefine("DIRECTIONLIGHT",G$Vr.SHADERDEFINE_DIRECTIONLIGHT),G$Vr._globalRegDefine("POINTLIGHT",G$Vr.SHADERDEFINE_POINTLIGHT),G$Vr._globalRegDefine("SPOTLIGHT",G$Vr.SHADERDEFINE_SPOTLIGHT),G$Vr._globalRegDefine("UV",G$Vr.SHADERDEFINE_UV0),G$Vr._globalRegDefine("COLOR",G$Vr.SHADERDEFINE_COLOR),G$Vr._globalRegDefine("UV1",G$Vr.SHADERDEFINE_UV1),G$Vr._globalRegDefine("CASTSHADOW",G$jr.SHADERDEFINE_CAST_SHADOW),G$Vr._globalRegDefine("SHADOWMAP_PSSM1",G$jr.SHADERDEFINE_SHADOW_PSSM1),G$Vr._globalRegDefine("SHADOWMAP_PSSM2",G$jr.SHADERDEFINE_SHADOW_PSSM2),G$Vr._globalRegDefine("SHADOWMAP_PSSM3",G$jr.SHADERDEFINE_SHADOW_PSSM3),G$Vr._globalRegDefine("SHADOWMAP_PCF_NO",G$jr.SHADERDEFINE_SHADOW_PCF_NO),G$Vr._globalRegDefine("SHADOWMAP_PCF1",G$jr.SHADERDEFINE_SHADOW_PCF1),G$Vr._globalRegDefine("SHADOWMAP_PCF2",G$jr.SHADERDEFINE_SHADOW_PCF2),G$Vr._globalRegDefine("SHADOWMAP_PCF3",G$jr.SHADERDEFINE_SHADOW_PCF3),G$Vr._globalRegDefine("DEPTHFOG",G$Vr.SAHDERDEFINE_DEPTHFOG),G$Cr.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),G$Cr.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),G$q={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},G$r={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var G$v=G$Cr.nameKey.add("SIMPLE");shaderCompile=G$Vr.add(G$v,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',G$q,G$r),G$cr.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),G$cr.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),G$cr.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),G$cr.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),G$cr.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),G$cr.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),G$cr.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),G$cr.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),G$cr.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},G$q}(),G$Tr=function(){function G$q(){this._data=null,this._data=[]}G$j(G$q,"laya.d3.shader.ValusArray");var G$r=G$q.prototype;return G$r.setValue=function(G$q,G$r){this._data[G$q]=G$r},G$D(0,G$r,"data",function(){return this._data}),G$q}(),G$jr=function(){function G$q(){}return G$q.SHADERDEFINE_RECEIVE_SHADOW=1,G$q.SHADERDEFINE_CAST_SHADOW=512,G$q.SHADERDEFINE_SHADOW_PSSM1=1024,G$q.SHADERDEFINE_SHADOW_PSSM2=2048,G$q.SHADERDEFINE_SHADOW_PSSM3=4096,G$q.SHADERDEFINE_SHADOW_PCF_NO=8192,G$q.SHADERDEFINE_SHADOW_PCF1=16384,G$q.SHADERDEFINE_SHADOW_PCF2=32768,G$q.SHADERDEFINE_SHADOW_PCF3=65536,G$q.MAX_PSSM_COUNT=3,G$q}(),G$Dr=function(){function G$l(){}return G$j(G$l,"laya.d3.utils.Picker"),G$l.calculateCursorRay=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$q.elements[0],G$W=G$q.elements[1],G$O=G$l._tempVector30,G$N=G$O.elements;G$N[0]=G$R,G$N[1]=G$W,G$N[2]=G$r.minDepth;var G$x=G$l._tempVector31,G$K=G$x.elements;G$K[0]=G$R,G$K[1]=G$W,G$K[2]=G$r.maxDepth;var G$T=G$y.origin,G$j=G$l._tempVector32;G$r.unprojectFromWVP(G$O,G$v,G$H,G$A,G$T),G$r.unprojectFromWVP(G$x,G$v,G$H,G$A,G$j);var G$D=G$y.direction.elements;G$D[0]=G$j.x-G$T.x,G$D[1]=G$j.y-G$T.y,G$D[2]=G$j.z-G$T.z,G$Rr.normalize(G$y.direction,G$y.direction)},G$l.rayIntersectsPositionsAndIndices=function(G$q,G$r,G$v,G$H,G$A){for(var G$y=G$v.vertexStride/4,G$R=G$v.getVertexElementByUsage(0).offset/4,G$W=Number.MAX_VALUE,G$O=-1,G$N=-1,G$x=-1,G$K=0;G$K<G$H.length;G$K+=3){var G$T=G$l._tempVector35,G$j=G$T.elements,G$D=G$H[G$K]*G$y,G$g=G$D+G$R;G$j[0]=G$r[G$g],G$j[1]=G$r[1+G$g],G$j[2]=G$r[2+G$g];var G$X=G$l._tempVector36,G$m=G$X.elements,G$B=G$H[G$K+1]*G$y,G$e=G$B+G$R;G$m[0]=G$r[G$e],G$m[1]=G$r[1+G$e],G$m[2]=G$r[2+G$e];var G$p=G$l._tempVector37,G$M=G$p.elements,G$z=G$H[G$K+2]*G$y,G$P=G$z+G$R;G$M[0]=G$r[G$P],G$M[1]=G$r[1+G$P],G$M[2]=G$r[2+G$P];var G$V=laya.d3.utils.Picker.rayIntersectsTriangle(G$q,G$T,G$X,G$p);!isNaN(G$V)&&G$V<G$W&&(G$W=G$V,G$O=G$D,G$N=G$B,G$x=G$z)}if(G$W===Number.MAX_VALUE)return G$A.position.toDefault(),G$A.distance=Number.MAX_VALUE,G$A.trianglePositions[0].toDefault(),G$A.trianglePositions[1].toDefault(),G$A.trianglePositions[2].toDefault(),G$A.triangleNormals[0].toDefault(),G$A.triangleNormals[1].toDefault(),G$A.triangleNormals[2].toDefault(),!1;G$A.distance=G$W,G$Rr.scale(G$q.direction,G$W,G$A.position),G$Rr.add(G$q.origin,G$A.position,G$A.position);var G$a=G$A.trianglePositions,G$J=G$a[0],G$$=G$a[1],G$G=G$a[2],G$E=G$J.elements,G$Q=G$$.elements,G$s=G$G.elements,G$Z=G$O+G$R;G$E[0]=G$r[G$Z],G$E[1]=G$r[G$Z+1],G$E[2]=G$r[G$Z+2];var G$Y=G$N+G$R;G$Q[0]=G$r[G$Y],G$Q[1]=G$r[G$Y+1],G$Q[2]=G$r[G$Y+2];var G$o=G$x+G$R;G$s[0]=G$r[G$o],G$s[1]=G$r[G$o+1],G$s[2]=G$r[G$o+2];var G$C=G$v.getVertexElementByUsage(3);if(G$C){var G$c=G$C.offset/4,G$b=G$A.triangleNormals,G$d=G$b[0],G$u=G$b[1],G$I=G$b[2],G$t=G$d.elements,G$F=G$u.elements,G$U=G$I.elements,G$_=G$O+G$c;G$t[0]=G$r[G$_],G$t[1]=G$r[G$_+1],G$t[2]=G$r[G$_+2];var G$f=G$N+G$c;G$F[0]=G$r[G$f],G$F[1]=G$r[G$f+1],G$F[2]=G$r[G$f+2];var G$S=G$x+G$c;G$U[0]=G$r[G$S],G$U[1]=G$r[G$S+1],G$U[2]=G$r[G$S+2]}return!0},G$l.rayIntersectsTriangle=function(G$q,G$r,G$v,G$H){var G$A=G$l._tempVector30,G$y=G$l._tempVector31;G$Rr.subtract(G$v,G$r,G$A),G$Rr.subtract(G$H,G$r,G$y);var G$R,G$W=G$l._tempVector32;if(G$Rr.cross(G$q.direction,G$y,G$W),(G$R=G$Rr.dot(G$A,G$W))>-Number.MIN_VALUE&&G$R<Number.MIN_VALUE)return Number.NaN;var G$O,G$N=1/G$R,G$x=G$l._tempVector33;if(G$Rr.subtract(G$q.origin,G$r,G$x),G$O=G$Rr.dot(G$x,G$W),(G$O*=G$N)<0||1<G$O)return Number.NaN;var G$K,G$T,G$j=G$l._tempVector34;return G$Rr.cross(G$x,G$A,G$j),G$K=G$Rr.dot(G$q.direction,G$j),(G$K*=G$N)<0||1<G$O+G$K?Number.NaN:(G$T=G$Rr.dot(G$y,G$j),(G$T*=G$N)<0?Number.NaN:G$T)},G$K(G$l,["_tempVector30",function(){return this._tempVector30=new G$Rr},"_tempVector31",function(){return this._tempVector31=new G$Rr},"_tempVector32",function(){return this._tempVector32=new G$Rr},"_tempVector33",function(){return this._tempVector33=new G$Rr},"_tempVector34",function(){return this._tempVector34=new G$Rr},"_tempVector35",function(){return this._tempVector35=new G$Rr},"_tempVector36",function(){return this._tempVector36=new G$Rr},"_tempVector37",function(){return this._tempVector37=new G$Rr}]),G$l}(),G$gr=(function(){function G$q(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new G$Rr,new G$Rr,new G$Rr],this.trianglePositions.length=3,this.triangleNormals=[new G$Rr,new G$Rr,new G$Rr],this.triangleNormals.length=3,this.position=new G$Rr}G$j(G$q,"laya.d3.utils.RaycastHit"),G$q.prototype.cloneTo=function(G$q){G$q.distance=this.distance,this.trianglePositions[0].cloneTo(G$q.trianglePositions[0]),this.trianglePositions[1].cloneTo(G$q.trianglePositions[1]),this.trianglePositions[2].cloneTo(G$q.trianglePositions[2]),this.triangleNormals[0].cloneTo(G$q.triangleNormals[0]),this.triangleNormals[1].cloneTo(G$q.triangleNormals[1]),this.triangleNormals[2].cloneTo(G$q.triangleNormals[2]),this.position.cloneTo(G$q.position),G$q.sprite3D=this.sprite3D}}(),function(){function G$q(G$q,G$r){this._width=0,this._height=0,this._width=G$q,this._height=G$r}G$j(G$q,"laya.d3.utils.Size");var G$r=G$q.prototype;return G$D(0,G$r,"width",function(){return-1===this._width?G$L.clientWidth:this._width}),G$D(0,G$r,"height",function(){return-1===this._height?G$L.clientHeight:this._height}),G$D(1,G$q,"fullScreen",function(){return new G$q(-1,-1)}),G$q}()),G$Xr=function(){function G$Z(){}return G$j(G$Z,"laya.d3.utils.Utils3D"),G$Z._rotationTransformScaleSkinAnimation=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K){var G$T,G$j,G$D,G$g,G$X,G$m=G$Z._tempArray16_0,G$B=G$Z._tempArray16_1,G$e=G$Z._tempArray16_2,G$p=G$H+G$H,G$M=G$A+G$A,G$z=G$y+G$y,G$P=G$H*G$p,G$V=G$A*G$p,G$a=G$A*G$M,G$J=G$y*G$p,G$$=G$y*G$M,G$G=G$y*G$z,G$E=G$R*G$p,G$Q=G$R*G$M,G$s=G$R*G$z;for(G$m[15]=1,G$m[0]=1-G$a-G$G,G$m[1]=G$V+G$s,G$m[2]=G$J-G$Q,G$m[4]=G$V-G$s,G$m[5]=1-G$P-G$G,G$m[6]=G$$+G$E,G$m[8]=G$J+G$Q,G$m[9]=G$$-G$E,G$m[10]=1-G$P-G$a,G$B[15]=1,G$B[0]=G$W,G$B[5]=G$O,G$B[10]=G$N,G$T=0;G$T<4;G$T++)G$j=G$m[G$T],G$D=G$m[G$T+4],G$g=G$m[G$T+8],G$X=G$m[G$T+12],G$e[G$T]=G$j,G$e[G$T+4]=G$D,G$e[G$T+8]=G$g,G$e[G$T+12]=G$j*G$q+G$D*G$r+G$g*G$v+G$X;for(G$T=0;G$T<4;G$T++)G$j=G$e[G$T],G$D=G$e[G$T+4],G$g=G$e[G$T+8],G$X=G$e[G$T+12],G$x[G$T+G$K]=G$j*G$B[0]+G$D*G$B[1]+G$g*G$B[2]+G$X*G$B[3],G$x[G$T+G$K+4]=G$j*G$B[4]+G$D*G$B[5]+G$g*G$B[6]+G$X*G$B[7],G$x[G$T+G$K+8]=G$j*G$B[8]+G$D*G$B[9]+G$g*G$B[10]+G$X*G$B[11],G$x[G$T+G$K+12]=G$j*G$B[12]+G$D*G$B[13]+G$g*G$B[14]+G$X*G$B[15]},G$Z._createNodeByJson=function(G$q,G$r,G$v,G$H){if(!G$v)switch(G$r.type){case"Sprite3D":G$v=new G$or;break;case"MeshSprite3D":G$v=new G$lr;break;case"SkinnedMeshSprite3D":G$v=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":G$v=new ShuriKenParticle3D;break;case"TrailSprite3D":G$v=new TrailSprite3D;break;case"Terrain":G$v=new Terrain;break;case"Camera":G$v=new G$Sr;break;case"DirectionLight":G$v=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var G$A=G$r.props;if(G$A)for(var G$y in G$A)G$v[G$y]=G$A[G$y];var G$R=G$r.customProps;G$R&&(G$v instanceof laya.d3.core.Sprite3D?(G$v._parseBaseCustomProps(G$R),G$v._parseCustomProps(G$q,G$H,G$R,G$r),G$v._parseCustomComponent(G$q,G$H,G$r.components)):G$v._parseCustomProps(G$q,G$H,G$R,G$r));var G$W=G$r.child;if(G$W)for(var G$O=0,G$N=G$W.length;G$O<G$N;G$O++){var G$x=G$Z._createNodeByJson(G$q,G$W[G$O],null,G$H);G$v.addChild(G$x)}return G$v},G$Z._computeBoneAndAnimationDatasByBindPoseMatrxix=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R,G$W,G$O=0,G$N=0,G$x=G$q.length;for(G$R=0;G$R<G$x;G$O+=G$q[G$R].keyframeWidth,G$N+=16,G$R++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(G$r[G$O+0],G$r[G$O+1],G$r[G$O+2],G$r[G$O+3],G$r[G$O+4],G$r[G$O+5],G$r[G$O+6],G$r[G$O+7],G$r[G$O+8],G$r[G$O+9],G$H,G$N),0!=G$R&&(G$W=16*G$q[G$R].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(G$H,G$W,G$H,G$N,G$H,G$N));var G$K=G$v.length;for(G$R=0;G$R<G$K;G$R++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$H,16*G$y[G$R],G$v[G$R],G$A,16*G$R)},G$Z._computeAnimationDatasByArrayAndMatrixFast=function(G$q,G$r,G$v,G$H){for(var G$A=0,G$y=G$q.length;G$A<G$y;G$A++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$r,16*G$H[G$A],G$q[G$A],G$v,16*G$A)},G$Z._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R,G$W=0,G$O=0,G$N=G$q.length;for(G$y=0;G$y<G$N;G$W+=G$q[G$y].keyframeWidth,G$O+=16,G$y++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(G$r[G$W+7],G$r[G$W+8],G$r[G$W+9],G$r[G$W+3],G$r[G$W+4],G$r[G$W+5],G$r[G$W+6],G$r[G$W+0],G$r[G$W+1],G$r[G$W+2],G$H,G$O),0!=G$y&&(G$R=16*G$q[G$y].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(G$H,G$R,G$H,G$O,G$H,G$O));var G$x=G$v.length;for(G$y=0;G$y<G$x;G$y++){var G$K=16*G$y;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$H,G$K,G$v[G$y],G$A,G$K)}},G$Z._computeAnimationDatasByArrayAndMatrixFastOld=function(G$q,G$r,G$v){for(var G$H=G$q.length,G$A=0;G$A<G$H;G$A++){var G$y=16*G$A;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(G$r,G$y,G$q[G$A],G$v,G$y)}},G$Z._computeRootAnimationData=function(G$q,G$r,G$v){for(var G$H=0,G$A=0,G$y=0,G$R=G$q.length;G$H<G$R;G$A+=G$q[G$H].keyframeWidth,G$y+=16,G$H++)laya.d3.utils.Utils3D.createAffineTransformationArray(G$r[G$A+0],G$r[G$A+1],G$r[G$A+2],G$r[G$A+3],G$r[G$A+4],G$r[G$A+5],G$r[G$A+6],G$r[G$A+7],G$r[G$A+8],G$r[G$A+9],G$v,G$y)},G$Z.transformVector3ArrayByQuat=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$v.elements,G$R=G$q[G$r],G$W=G$q[G$r+1],G$O=G$q[G$r+2],G$N=G$y[0],G$x=G$y[1],G$K=G$y[2],G$T=G$y[3],G$j=G$T*G$R+G$x*G$O-G$K*G$W,G$D=G$T*G$W+G$K*G$R-G$N*G$O,G$g=G$T*G$O+G$N*G$W-G$x*G$R,G$X=-G$N*G$R-G$x*G$W-G$K*G$O;G$H[G$A]=G$j*G$T+G$X*-G$N+G$D*-G$K-G$g*-G$x,G$H[G$A+1]=G$D*G$T+G$X*-G$x+G$g*-G$N-G$j*-G$K,G$H[G$A+2]=G$g*G$T+G$X*-G$K+G$j*-G$x-G$D*-G$N},G$Z.mulMatrixByArray=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R,G$W,G$O,G$N,G$x;if(G$A===G$v){for(G$v=G$Z._tempArray16_3,G$R=0;G$R<16;++G$R)G$v[G$R]=G$A[G$y+G$R];G$H=0}for(G$R=0;G$R<4;G$R++)G$W=G$q[G$r+G$R],G$O=G$q[G$r+G$R+4],G$N=G$q[G$r+G$R+8],G$x=G$q[G$r+G$R+12],G$A[G$y+G$R]=G$W*G$v[G$H+0]+G$O*G$v[G$H+1]+G$N*G$v[G$H+2]+G$x*G$v[G$H+3],G$A[G$y+G$R+4]=G$W*G$v[G$H+4]+G$O*G$v[G$H+5]+G$N*G$v[G$H+6]+G$x*G$v[G$H+7],G$A[G$y+G$R+8]=G$W*G$v[G$H+8]+G$O*G$v[G$H+9]+G$N*G$v[G$H+10]+G$x*G$v[G$H+11],G$A[G$y+G$R+12]=G$W*G$v[G$H+12]+G$O*G$v[G$H+13]+G$N*G$v[G$H+14]+G$x*G$v[G$H+15]},G$Z.mulMatrixByArrayFast=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R,G$W,G$O,G$N,G$x;for(G$R=0;G$R<4;G$R++)G$W=G$q[G$r+G$R],G$O=G$q[G$r+G$R+4],G$N=G$q[G$r+G$R+8],G$x=G$q[G$r+G$R+12],G$A[G$y+G$R]=G$W*G$v[G$H+0]+G$O*G$v[G$H+1]+G$N*G$v[G$H+2]+G$x*G$v[G$H+3],G$A[G$y+G$R+4]=G$W*G$v[G$H+4]+G$O*G$v[G$H+5]+G$N*G$v[G$H+6]+G$x*G$v[G$H+7],G$A[G$y+G$R+8]=G$W*G$v[G$H+8]+G$O*G$v[G$H+9]+G$N*G$v[G$H+10]+G$x*G$v[G$H+11],G$A[G$y+G$R+12]=G$W*G$v[G$H+12]+G$O*G$v[G$H+13]+G$N*G$v[G$H+14]+G$x*G$v[G$H+15]},G$Z.mulMatrixByArrayAndMatrixFast=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R,G$W,G$O,G$N,G$x=G$v.elements,G$K=G$x[0],G$T=G$x[1],G$j=G$x[2],G$D=G$x[3],G$g=G$x[4],G$X=G$x[5],G$m=G$x[6],G$B=G$x[7],G$e=G$x[8],G$p=G$x[9],G$M=G$x[10],G$z=G$x[11],G$P=G$x[12],G$V=G$x[13],G$a=G$x[14],G$J=G$x[15],G$$=G$r,G$G=G$r+4,G$E=G$r+8,G$Q=G$r+12,G$s=G$A,G$Z=G$A+4,G$Y=G$A+8,G$o=G$A+12;for(G$y=0;G$y<4;G$y++)G$R=G$q[G$$+G$y],G$W=G$q[G$G+G$y],G$O=G$q[G$E+G$y],G$N=G$q[G$Q+G$y],G$H[G$s+G$y]=G$R*G$K+G$W*G$T+G$O*G$j+G$N*G$D,G$H[G$Z+G$y]=G$R*G$g+G$W*G$X+G$O*G$m+G$N*G$B,G$H[G$Y+G$y]=G$R*G$e+G$W*G$p+G$O*G$M+G$N*G$z,G$H[G$o+G$y]=G$R*G$P+G$W*G$V+G$O*G$a+G$N*G$J},G$Z.createAffineTransformationArray=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K){var G$T=G$H+G$H,G$j=G$A+G$A,G$D=G$y+G$y,G$g=G$H*G$T,G$X=G$H*G$j,G$m=G$H*G$D,G$B=G$A*G$j,G$e=G$A*G$D,G$p=G$y*G$D,G$M=G$R*G$T,G$z=G$R*G$j,G$P=G$R*G$D;G$x[G$K+0]=(1-(G$B+G$p))*G$W,G$x[G$K+1]=(G$X+G$P)*G$W,G$x[G$K+2]=(G$m-G$z)*G$W,G$x[G$K+3]=0,G$x[G$K+4]=(G$X-G$P)*G$O,G$x[G$K+5]=(1-(G$g+G$p))*G$O,G$x[G$K+6]=(G$e+G$M)*G$O,G$x[G$K+7]=0,G$x[G$K+8]=(G$m+G$z)*G$N,G$x[G$K+9]=(G$e-G$M)*G$N,G$x[G$K+10]=(1-(G$g+G$B))*G$N,G$x[G$K+11]=0,G$x[G$K+12]=G$q,G$x[G$K+13]=G$r,G$x[G$K+14]=G$v,G$x[G$K+15]=1},G$Z.transformVector3ArrayToVector3ArrayCoordinate=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$Z._tempArray4_0,G$R=G$q[G$r+0],G$W=G$q[G$r+1],G$O=G$q[G$r+2],G$N=G$v.elements;G$y[0]=G$R*G$N[0]+G$W*G$N[4]+G$O*G$N[8]+G$N[12],G$y[1]=G$R*G$N[1]+G$W*G$N[5]+G$O*G$N[9]+G$N[13],G$y[2]=G$R*G$N[2]+G$W*G$N[6]+G$O*G$N[10]+G$N[14],G$y[3]=1/(G$R*G$N[3]+G$W*G$N[7]+G$O*G$N[11]+G$N[15]),G$H[G$A+0]=G$y[0]*G$y[3],G$H[G$A+1]=G$y[1]*G$y[3],G$H[G$A+2]=G$y[2]*G$y[3]},G$Z.transformLightingMapTexcoordByUV0Array=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$v.elements;G$H[G$A+0]=G$q[G$r+0]*G$y[0]+G$y[2],G$H[G$A+1]=(G$q[G$r+1]-1)*G$y[1]+G$y[3]},G$Z.transformLightingMapTexcoordByUV1Array=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$v.elements;G$H[G$A+0]=G$q[G$r+0]*G$y[0]+G$y[2],G$H[G$A+1]=1+G$q[G$r+1]*G$y[1]+G$y[3]},G$Z.getURLVerion=function(G$q){var G$r=G$q.indexOf("?");return 0<=G$r?G$q.substr(G$r):null},G$Z._quaternionCreateFromYawPitchRollArray=function(G$q,G$r,G$v,G$H){var G$A=.5*G$v,G$y=.5*G$r,G$R=.5*G$q,G$W=Math.sin(G$A),G$O=Math.cos(G$A),G$N=Math.sin(G$y),G$x=Math.cos(G$y),G$K=Math.sin(G$R),G$T=Math.cos(G$R);G$H[0]=G$T*G$N*G$O+G$K*G$x*G$W,G$H[1]=G$K*G$x*G$O-G$T*G$N*G$W,G$H[2]=G$T*G$x*G$W-G$K*G$N*G$O,G$H[3]=G$T*G$x*G$O+G$K*G$N*G$W},G$Z._createAffineTransformationArray=function(G$q,G$r,G$v,G$H){var G$A=G$r[0],G$y=G$r[1],G$R=G$r[2],G$W=G$r[3],G$O=G$A+G$A,G$N=G$y+G$y,G$x=G$R+G$R,G$K=G$A*G$O,G$T=G$A*G$N,G$j=G$A*G$x,G$D=G$y*G$N,G$g=G$y*G$x,G$X=G$R*G$x,G$m=G$W*G$O,G$B=G$W*G$N,G$e=G$W*G$x,G$p=G$v[0],G$M=G$v[1],G$z=G$v[2];G$H[0]=(1-(G$D+G$X))*G$p,G$H[1]=(G$T+G$e)*G$p,G$H[2]=(G$j-G$B)*G$p,G$H[3]=0,G$H[4]=(G$T-G$e)*G$M,G$H[5]=(1-(G$K+G$X))*G$M,G$H[6]=(G$g+G$m)*G$M,G$H[7]=0,G$H[8]=(G$j+G$B)*G$z,G$H[9]=(G$g-G$m)*G$z,G$H[10]=(1-(G$K+G$D))*G$z,G$H[11]=0,G$H[12]=G$q[0],G$H[13]=G$q[1],G$H[14]=G$q[2],G$H[15]=1},G$Z._mulMatrixArray=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R,G$W,G$O,G$N=G$r.elements,G$x=G$N[0],G$K=G$N[1],G$T=G$N[2],G$j=G$N[3],G$D=G$N[4],G$g=G$N[5],G$X=G$N[6],G$m=G$N[7],G$B=G$N[8],G$e=G$N[9],G$p=G$N[10],G$M=G$N[11],G$z=G$N[12],G$P=G$N[13],G$V=G$N[14],G$a=G$N[15],G$J=G$H,G$$=G$H+4,G$G=G$H+8,G$E=G$H+12;for(G$A=0;G$A<4;G$A++)G$y=G$q[G$A],G$R=G$q[G$A+4],G$W=G$q[G$A+8],G$O=G$q[G$A+12],G$v[G$J+G$A]=G$y*G$x+G$R*G$K+G$W*G$T+G$O*G$j,G$v[G$$+G$A]=G$y*G$D+G$R*G$g+G$W*G$X+G$O*G$m,G$v[G$G+G$A]=G$y*G$B+G$R*G$e+G$W*G$p+G$O*G$M,G$v[G$E+G$A]=G$y*G$z+G$R*G$P+G$W*G$V+G$O*G$a},G$Z.getYawPitchRoll=function(G$q,G$r){G$Z.transformQuat(G$Rr.ForwardRH,G$q,G$vr.TEMPVector31),G$Z.transformQuat(G$Rr.Up,G$q,G$vr.TEMPVector32);var G$v=G$vr.TEMPVector32.elements;G$Z.angleTo(G$Rr.ZERO,G$vr.TEMPVector31,G$vr.TEMPVector33);var G$H=G$vr.TEMPVector33.elements;G$H[0]==Math.PI/2?(G$H[1]=G$Z.arcTanAngle(G$v[2],G$v[0]),G$H[2]=0):G$H[0]==-Math.PI/2?(G$H[1]=G$Z.arcTanAngle(-G$v[2],-G$v[0]),G$H[2]=0):(G$qr.createRotationY(-G$H[1],G$vr.TEMPMatrix0),G$qr.createRotationX(-G$H[0],G$vr.TEMPMatrix1),G$Rr.transformCoordinate(G$vr.TEMPVector32,G$vr.TEMPMatrix0,G$vr.TEMPVector32),G$Rr.transformCoordinate(G$vr.TEMPVector32,G$vr.TEMPMatrix1,G$vr.TEMPVector32),G$H[2]=G$Z.arcTanAngle(G$v[1],-G$v[0])),G$H[1]<=-Math.PI&&(G$H[1]=Math.PI),G$H[2]<=-Math.PI&&(G$H[2]=Math.PI),G$H[1]>=Math.PI&&G$H[2]>=Math.PI&&(G$H[1]=0,G$H[2]=0,G$H[0]=Math.PI-G$H[0]),G$r[0]=G$H[1],G$r[1]=G$H[0],G$r[2]=G$H[2]},G$Z.arcTanAngle=function(G$q,G$r){return 0==G$q?1==G$r?Math.PI/2:-Math.PI/2:0<G$q?Math.atan(G$r/G$q):G$q<0?0<G$r?Math.atan(G$r/G$q)+Math.PI:Math.atan(G$r/G$q)-Math.PI:0},G$Z.angleTo=function(G$q,G$r,G$v){G$Rr.subtract(G$r,G$q,G$vr.TEMPVector30),G$Rr.normalize(G$vr.TEMPVector30,G$vr.TEMPVector30),G$v.elements[0]=Math.asin(G$vr.TEMPVector30.y),G$v.elements[1]=G$Z.arcTanAngle(-G$vr.TEMPVector30.z,-G$vr.TEMPVector30.x)},G$Z.transformQuat=function(G$q,G$r,G$v){var G$H=G$v.elements,G$A=G$q.elements,G$y=G$r,G$R=G$A[0],G$W=G$A[1],G$O=G$A[2],G$N=G$y[0],G$x=G$y[1],G$K=G$y[2],G$T=G$y[3],G$j=G$T*G$R+G$x*G$O-G$K*G$W,G$D=G$T*G$W+G$K*G$R-G$N*G$O,G$g=G$T*G$O+G$N*G$W-G$x*G$R,G$X=-G$N*G$R-G$x*G$W-G$K*G$O;G$H[0]=G$j*G$T+G$X*-G$N+G$D*-G$K-G$g*-G$x,G$H[1]=G$D*G$T+G$X*-G$x+G$g*-G$N-G$j*-G$K,G$H[2]=G$g*G$T+G$X*-G$K+G$j*-G$x-G$D*-G$N},G$Z.quaterionNormalize=function(G$q,G$r){var G$v=G$q[0],G$H=G$q[1],G$A=G$q[2],G$y=G$q[3],G$R=G$v*G$v+G$H*G$H+G$A*G$A+G$y*G$y;0<G$R&&(G$R=1/Math.sqrt(G$R),G$r[0]=G$v*G$R,G$r[1]=G$H*G$R,G$r[2]=G$A*G$R,G$r[3]=G$y*G$R)},G$Z.matrix4x4MultiplyFFF=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W;if(G$v===G$r)for(G$r=new Float32Array(16),G$H=0;G$H<16;++G$H)G$r[G$H]=G$v[G$H];for(G$H=0;G$H<4;G$H++)G$A=G$q[G$H],G$y=G$q[G$H+4],G$R=G$q[G$H+8],G$W=G$q[G$H+12],G$v[G$H]=G$A*G$r[0]+G$y*G$r[1]+G$R*G$r[2]+G$W*G$r[3],G$v[G$H+4]=G$A*G$r[4]+G$y*G$r[5]+G$R*G$r[6]+G$W*G$r[7],G$v[G$H+8]=G$A*G$r[8]+G$y*G$r[9]+G$R*G$r[10]+G$W*G$r[11],G$v[G$H+12]=G$A*G$r[12]+G$y*G$r[13]+G$R*G$r[14]+G$W*G$r[15]},G$Z.matrix4x4MultiplyMFM=function(G$q,G$r,G$v){G$Z.matrix4x4MultiplyFFF(G$q.elements,G$r,G$v.elements)},G$K(G$Z,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new G$Rr},"_tempVector3_1",function(){return this._tempVector3_1=new G$Rr},"_tempVector3_2",function(){return this._tempVector3_2=new G$Rr},"_tempVector3_3",function(){return this._tempVector3_3=new G$Rr},"_tempVector3_4",function(){return this._tempVector3_4=new G$Rr},"_tempVector3_5",function(){return this._tempVector3_5=new G$Rr},"_tempVector3_6",function(){return this._tempVector3_6=new G$Rr},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),G$Z}(),G$mr=function(){function G$Q(){}return G$j(G$Q,"Laya3D"),G$Q._cancelLoadByUrl=function(G$q){G$M.loader.cancelLoadByUrl(G$q),G$Q._innerFirstLevelLoaderManager.cancelLoadByUrl(G$q),G$Q._innerSecondLevelLoaderManager.cancelLoadByUrl(G$q),G$Q._innerThirdLevelLoaderManager.cancelLoadByUrl(G$q),G$Q._innerFourthLevelLoaderManager.cancelLoadByUrl(G$q)},G$Q._changeWebGLSize=function(G$q,G$r){G$E.onStageResize(G$q,G$r),G$L.clientWidth=G$q,G$L.clientHeight=G$r},G$Q.__init__=function(){var G$q=G$r.createMap;G$q.lh=[G$or,"SPRITE3DHIERARCHY"],G$q.ls=[G$Yr,"SPRITE3DHIERARCHY"],G$q.lm=[G$tr,"MESH"],G$q.lmat=[G$cr,"MATERIAL"],G$q.jpg=[G$Ur,"nativeimage"],G$q.jpeg=[G$Ur,"nativeimage"],G$q.png=[G$Ur,"nativeimage"],G$q.pkm=[G$Ur,"arraybuffer"],G$q.raw=[G$ur,"arraybuffer"],G$q.mipmaps=[G$ur,"arraybuffer"],G$m.parserMap.SPRITE3DHIERARCHY=G$Q._loadHierarchy,G$m.parserMap.MESH=G$Q._loadMesh,G$m.parserMap.MATERIAL=G$Q._loadMaterial,G$m.parserMap.TEXTURECUBE=G$Q._loadTextureCube,G$m.parserMap.TERRAIN=G$Q._loadTerrain,G$Q._innerFirstLevelLoaderManager.on("error",null,G$Q._eventLoadManagerError),G$Q._innerSecondLevelLoaderManager.on("error",null,G$Q._eventLoadManagerError),G$Q._innerThirdLevelLoaderManager.on("error",null,G$Q._eventLoadManagerError),G$Q._innerFourthLevelLoaderManager.on("error",null,G$Q._eventLoadManagerError)},G$Q.READ_BLOCK=function(){return G$Q._readData.pos+=4,!0},G$Q.READ_DATA=function(){return G$Q._DATA.offset=G$Q._readData.getUint32(),G$Q._DATA.size=G$Q._readData.getUint32(),!0},G$Q.READ_STRINGS=function(){var G$q=[],G$r={offset:0,size:0};G$r.offset=G$Q._readData.getUint16(),G$r.size=G$Q._readData.getUint16();G$Q._readData.pos;G$Q._readData.pos=G$r.offset+G$Q._DATA.offset;for(var G$v=0;G$v<G$r.size;G$v++){var G$H=G$Q._readData.readUTFString();-1===G$H.lastIndexOf(".lmat")&&-1===G$H.lastIndexOf(".lpbr")||G$q.push(G$H)}return G$q},G$Q.formatRelativePath=function(G$q,G$r){var G$v;if("."===G$r.charAt(0)){for(var G$H=(G$q+G$r).split("/"),G$A=0,G$y=G$H.length;G$A<G$y;G$A++)if(".."==G$H[G$A]){var G$R=G$A-1;0<G$R&&".."!==G$H[G$R]&&(G$H.splice(G$R,2),G$A-=2)}G$v=G$H.join("/")}else G$v=G$q+G$r;return null!=G$G.customFormat&&(G$v=G$G.customFormat(G$v,null)),G$v},G$Q._eventLoadManagerError=function(G$q){G$M.loader.event("error",G$q)},G$Q._addHierarchyInnerUrls=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=G$Q.formatRelativePath(G$H,G$A);G$v&&(G$R+=G$v),G$q.push({url:G$R,clas:G$y}),G$r[G$A]=G$R},G$Q._getSprite3DHierarchyInnerUrls=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){var G$W,G$O=0,G$N=0;switch(G$q.type){case"Scene":var G$x=G$q.customProps.lightmaps;for(G$O=0,G$N=G$x.length;G$O<G$N;G$O++){var G$K=G$x[G$O].replace(".exr",".png");G$Q._addHierarchyInnerUrls(G$H,G$A,G$y,G$R,G$K,G$Ur)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var G$T;if(G$q.instanceParams)(G$T=G$q.instanceParams.loadPath)&&G$Q._addHierarchyInnerUrls(G$r,G$A,G$y,G$R,G$T,G$tr);else{(G$T=(G$W=G$q.customProps).meshPath)&&G$Q._addHierarchyInnerUrls(G$r,G$A,G$y,G$R,G$T,G$tr);var G$j=G$W.materials;if(G$j)for(G$O=0,G$N=G$j.length;G$O<G$N;G$O++){for(var G$D=G$j[G$O],G$g=G$D.type.split("."),G$X=G$s.window,G$m=0,G$B=G$g.length;G$m<G$B;++G$m){G$X=G$X[this.clasPaths[G$m]]}if("function"!=typeof G$X)throw"_getSprite3DHierarchyInnerUrls 错误: "+G$D.type+" 不是类";G$Q._addHierarchyInnerUrls(G$v,G$A,G$y,G$R,G$D.path,G$X)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var G$e=(G$W=G$q.customProps).meshPath;G$e&&G$Q._addHierarchyInnerUrls(G$r,G$A,G$y,G$R,G$e,G$tr);var G$p=G$W.material;if(G$p){G$g=G$p.type.split("."),G$X=G$s.window;for(G$m=0,G$B=G$g.length;G$m<G$B;++G$m){G$X=G$X[this.clasPaths[G$m]]}G$Q._addHierarchyInnerUrls(G$v,G$A,G$y,G$R,G$p.path,G$X)}else{var G$M=G$W.materialPath;if(G$M)G$Q._addHierarchyInnerUrls(G$v,G$A,G$y,G$R,G$M,ShurikenParticleMaterial);else{var G$z=G$W.texturePath;G$z&&G$Q._addHierarchyInnerUrls(G$H,G$A,G$y,G$R,G$z,G$Ur)}}break;case"Terrain":G$Q._addHierarchyInnerUrls(G$H,G$A,G$y,G$R,G$q.customProps.dataPath,TerrainRes)}var G$P=G$q.components;for(var G$V in G$P){var G$a=G$P[G$V];switch(G$V){case"Animator":var G$J=G$a.avatarPath;if(G$J)G$Q._addHierarchyInnerUrls(G$H,G$A,G$y,G$R,G$J,Avatar);else{var G$$=G$a.avatar;G$$&&G$Q._addHierarchyInnerUrls(G$H,G$A,G$y,G$R,G$$.path,Avatar)}var G$G=G$a.clipPaths;for(G$O=0,G$N=G$G.length;G$O<G$N;G$O++)G$Q._addHierarchyInnerUrls(G$H,G$A,G$y,G$R,G$G[G$O],AnimationClip)}}var G$E=G$q.child;for(G$O=0,G$N=G$E.length;G$O<G$N;G$O++)G$Q._getSprite3DHierarchyInnerUrls(G$E[G$O],G$r,G$v,G$H,G$A,G$y,G$R)},G$Q._loadHierarchy=function(G$q){G$q.on("loaded",null,G$Q._onHierarchylhLoaded,[G$q,G$q._class._getGroup()]),G$q.load(G$q.url,"json",!1,null,!0)},G$Q._onHierarchylhLoaded=function(G$q,G$r,G$v){if(G$q._class.destroyed)G$q.endLoad();else{var G$H=G$q.url,G$A=G$Xr.getURLVerion(G$H),G$y=G$G.getPath(G$H),G$R=[],G$W=[],G$O=[],G$N={};G$Q._getSprite3DHierarchyInnerUrls(G$v,G$R,G$W,G$O,G$N,G$A,G$y);var G$x=G$R.length+G$W.length+G$O.length,G$K=G$x+1,G$T=1/G$K;if(G$Q._onProcessChange(G$q,0,G$T,1),0<G$O.length){var G$j=G$x/G$K,G$D=G$$.create(null,G$Q._onProcessChange,[G$q,G$T,G$j],!1);G$Q._innerFourthLevelLoaderManager.create(G$O,G$$.create(null,G$Q._onHierarchyInnerForthLevResouLoaded,[G$q,G$r,G$D,G$v,G$N,G$R,G$W,G$T+G$j*G$O.length,G$j]),G$D,null,null,1,!0,G$r)}else G$Q._onHierarchyInnerForthLevResouLoaded(G$q,G$r,null,G$v,G$N,G$R,G$W,G$T,G$j)}},G$Q._onHierarchyInnerForthLevResouLoaded=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){if(G$q._class.destroyed)G$q.endLoad();else if(G$v&&G$v.recover(),0<G$R.length){var G$N=G$$.create(null,G$Q._onProcessChange,[G$q,G$W,G$O],!1);G$Q._innerSecondLevelLoaderManager.create(G$R,G$$.create(null,G$Q._onHierarchyInnerSecondLevResouLoaded,[G$q,G$r,G$N,G$H,G$A,G$y,G$W+G$O*G$R.length,G$O]),G$v,null,null,1,!0,G$r)}else G$Q._onHierarchyInnerSecondLevResouLoaded(G$q,G$r,null,G$H,G$A,G$y,G$W,G$O)},G$Q._onHierarchyInnerSecondLevResouLoaded=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){if(G$q._class.destroyed)G$q.endLoad();else if(G$v&&G$v.recover(),0<G$y.length){var G$O=G$$.create(null,G$Q._onProcessChange,[G$q,G$R,G$W],!1);G$Q._innerFirstLevelLoaderManager.create(G$y,G$$.create(null,G$Q._onHierarchyInnerFirstLevResouLoaded,[G$q,G$O,G$H,G$A]),G$v,null,null,1,!0,G$r)}else G$Q._onHierarchyInnerFirstLevResouLoaded(G$q,null,G$H,G$A)},G$Q._onHierarchyInnerFirstLevResouLoaded=function(G$q,G$r,G$v,G$H){G$r&&G$r.recover(),G$q.endLoad([G$v,G$H])},G$Q._loadTerrain=function(G$q){G$q.on("loaded",null,G$Q._onTerrainLtLoaded,[G$q,G$q._class._getGroup()]),G$q.load(G$q.url,"json",!1,null,!0)},G$Q._onTerrainLtLoaded=function(G$q,G$r,G$v){if(G$q._class.destroyed)G$q.endLoad();else{var G$H,G$A,G$y=G$q.url,G$R=G$Xr.getURLVerion(G$y),G$W=G$G.getPath(G$y),G$O=[],G$N={},G$x=0,G$K=0,G$T=G$v.heightData;G$H=G$T.url,G$A=G$Q.formatRelativePath(G$W,G$H),G$R&&(G$A+=G$R),G$H=G$N[G$H]=G$A;var G$j=G$v.detailTexture;for(G$x=0,G$K=G$j.length;G$x<G$K;G$x++)G$O.push({url:G$j[G$x].diffuse});var G$D=G$v.normalMap;for(G$x=0,G$K=G$D.length;G$x<G$K;G$x++)G$O.push({url:G$D[G$x]});var G$g=G$v.alphaMap;for(G$x=0,G$K=G$g.length;G$x<G$K;G$x++)G$O.push({url:G$g[G$x],params:[!1,!1,6408,!0]});for(G$x=0,G$K=G$O.length;G$x<G$K;G$x++){var G$X=G$O[G$x].url;G$A=G$Q.formatRelativePath(G$W,G$X),G$R&&(G$A+=G$R),G$O[G$x].url=G$A,G$N[G$X]=G$A}var G$m=G$O.length,G$B=G$m+2,G$e=1/G$B;G$Q._onProcessChange(G$q,0,G$e,1);var G$p={heightMapLoaded:!1,texturesLoaded:!1},G$M=G$$.create(null,G$Q._onProcessChange,[G$q,G$e,G$e],!1);G$Q._innerFourthLevelLoaderManager.create(G$H,G$$.create(null,G$Q._onTerrainHeightMapLoaded,[G$q,G$M,G$v,G$N,G$p]),G$M,null,[G$T.numX,G$T.numZ,G$T.bitType,G$T.value],1,!0,G$r);var G$z=G$$.create(null,G$Q._onProcessChange,[G$q,2*G$e,G$m/G$B],!1);G$Q._innerFourthLevelLoaderManager.create(G$O,G$$.create(null,G$Q._onTerrainTexturesLoaded,[G$q,G$z,G$v,G$N,G$p]),G$z,null,null,1,!0,G$r)}},G$Q._onTerrainHeightMapLoaded=function(G$q,G$r,G$v,G$H,G$A){G$A.heightMapLoaded=!0,G$A.texturesLoaded&&(G$q.endLoad([G$v,G$H]),G$r.recover())},G$Q._onTerrainTexturesLoaded=function(G$q,G$r,G$v,G$H,G$A){G$A.texturesLoaded=!0,G$A.heightMapLoaded&&(G$q.endLoad([G$v,G$H]),G$r.recover())},G$Q._loadMesh=function(G$q){G$q.on("loaded",null,G$Q._onMeshLmLoaded,[G$q,G$q._class._getGroup()]),G$q.load(G$q.url,"arraybuffer",!1,null,!0)},G$Q._onMeshLmLoaded=function(G$q,G$r,G$v){if(G$q._class.destroyed)G$q.endLoad();else{var G$H,G$A,G$y,G$R=G$q.url,G$W=G$Xr.getURLVerion(G$R),G$O=G$G.getPath(G$R),G$N={},G$x=0,G$K=0;switch((G$Q._readData=new G$z(G$v)).pos=0,G$Q._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var G$T=G$Q._readData.getUint32();G$Q._readData.pos=G$Q._readData.pos+4,G$K=G$Q._readData.getUint16(),G$Q._readData.pos=G$Q._readData.pos+8*G$K;var G$j=G$Q._readData.getUint32();for(G$K=G$Q._readData.getUint16(),G$Q._readData.pos=G$T+G$j,G$H=[],G$x=0;G$x<G$K;G$x++){var G$D=G$Q._readData.readUTFString();-1!==G$D.lastIndexOf(".lmat")&&G$H.push(G$D)}break;default:for(G$Q.READ_BLOCK(),G$x=0;G$x<2;G$x++){var G$g=G$Q._readData.getUint16(),G$X=G$Q._strings[G$g],G$m=G$Q["READ_"+G$X];if(null==G$m)throw new Error("model file err,no this function:"+G$g+" "+G$X);1===G$x?G$H=G$m.call():G$m.call()}}for(G$x=0,G$y=G$H.length;G$x<G$y;G$x++){var G$B=G$H[G$x];G$A=G$Q.formatRelativePath(G$O,G$B),G$W&&(G$A+=G$W),G$H[G$x]=G$A,G$N[G$B]=G$A}if(0<G$H.length){G$Q._onProcessChange(G$q,0,.5,1);var G$e=G$$.create(null,G$Q._onProcessChange,[G$q,.5,.5],!1);G$Q._innerSecondLevelLoaderManager.create(G$H,G$$.create(null,G$Q._onMeshMateialLoaded,[G$q,G$e,G$v,G$N]),G$e,null,null,1,!0,G$r)}else G$q.endLoad([G$v,G$N])}},G$Q._onMeshMateialLoaded=function(G$q,G$r,G$v,G$H){G$q.endLoad([G$v,G$H]),G$r.recover()},G$Q._getMaterialTexturePath=function(G$q,G$r,G$v){var G$H=G$q.length-4;return G$q.indexOf(".dds")!=G$H&&G$q.indexOf(".tga")!=G$H&&G$q.indexOf(".exr")!=G$H&&G$q.indexOf(".DDS")!=G$H&&G$q.indexOf(".TGA")!=G$H&&G$q.indexOf(".EXR")!=G$H||(G$q=G$q.substr(0,G$H)+".png"),G$q=G$Q.formatRelativePath(G$v,G$q),G$r&&(G$q+=G$r),G$q},G$Q._loadMaterial=function(G$q){G$q.on("loaded",null,G$Q._onMaterilLmatLoaded,[G$q,G$q._class._getGroup()]),G$q.load(G$q.url,"json",!1,null,!0)},G$Q._onMaterilLmatLoaded=function(G$q,G$r,G$v){if(G$q._class.destroyed)G$q.endLoad();else{var G$H,G$A=G$q.url,G$y=G$Xr.getURLVerion(G$A),G$R=G$G.getPath(G$A),G$W=[],G$O={},G$N=G$v.customProps,G$x=G$v.version;if(G$x)switch(G$x){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var G$K=G$v.props.textures,G$T=0,G$j=G$K.length;G$T<G$j;G$T++){var G$D=G$K[G$T],G$g=G$D.path;if(G$g){var G$X=G$g.length-4;G$g.indexOf(".exr")!=G$X&&G$g.indexOf(".EXR")!=G$X||(G$g=G$g.substr(0,G$X)+".png"),G$H=G$Q.formatRelativePath(G$R,G$g),G$y&&(G$H+=G$y),G$W.push({url:G$H,params:G$D.params}),G$O[G$g]=G$H}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var G$m=G$N.diffuseTexture.texture2D;if(G$m&&(G$H=G$Q._getMaterialTexturePath(G$m,G$y,G$R),G$W.push(G$H),G$O[G$m]=G$H),G$N.normalTexture){var G$B=G$N.normalTexture.texture2D;G$B&&(G$H=G$Q._getMaterialTexturePath(G$B,G$y,G$R),G$W.push(G$H),G$O[G$B]=G$H)}if(G$N.specularTexture){var G$e=G$N.specularTexture.texture2D;G$e&&(G$H=G$Q._getMaterialTexturePath(G$e,G$y,G$R),G$W.push(G$H),G$O[G$e]=G$H)}if(G$N.emissiveTexture){var G$p=G$N.emissiveTexture.texture2D;G$p&&(G$H=G$Q._getMaterialTexturePath(G$p,G$y,G$R),G$W.push(G$H),G$O[G$p]=G$H)}if(G$N.ambientTexture){var G$M=G$N.ambientTexture.texture2D;G$M&&(G$H=G$Q._getMaterialTexturePath(G$M,G$y,G$R),G$W.push(G$H),G$O[G$M]=G$H)}if(G$N.reflectTexture){var G$z=G$N.reflectTexture.texture2D;G$z&&(G$H=G$Q._getMaterialTexturePath(G$z,G$y,G$R),G$W.push(G$H),G$O[G$z]=G$H)}}var G$P=G$W.length,G$V=G$P+1,G$a=1/G$V;if(G$Q._onProcessChange(G$q,0,G$a,1),0<G$P){var G$J=G$$.create(null,G$Q._onProcessChange,[G$q,G$a,G$P/G$V],!1);G$Q._innerFourthLevelLoaderManager.create(G$W,G$$.create(null,G$Q._onMateialTexturesLoaded,[G$q,G$J,G$v,G$O]),G$J,G$Ur,null,1,!0,G$r)}else G$Q._onMateialTexturesLoaded(G$q,null,G$v,null)}},G$Q._onMateialTexturesLoaded=function(G$q,G$r,G$v,G$H){G$q.endLoad([G$v,G$H]),G$r&&G$r.recover()},G$Q._loadTextureCube=function(G$q){G$q.on("loaded",null,G$Q._onTextureCubeLtcLoaded,[G$q]),G$q.load(G$q.url,"json",!1,null,!0)},G$Q._onTextureCubeLtcLoaded=function(G$q,G$r){if(G$q._class.destroyed)G$q.endLoad();else{var G$v=G$G.getPath(G$q.url),G$H=[G$Q.formatRelativePath(G$v,G$r.px),G$Q.formatRelativePath(G$v,G$r.nx),G$Q.formatRelativePath(G$v,G$r.py),G$Q.formatRelativePath(G$v,G$r.ny),G$Q.formatRelativePath(G$v,G$r.pz),G$Q.formatRelativePath(G$v,G$r.nz)];G$Q._onProcessChange(G$q,0,1/7,1);var G$A=G$$.create(null,G$Q._onProcessChange,[G$q,1/7,6/7],!1);G$Q._innerFourthLevelLoaderManager.load(G$H,G$$.create(null,G$Q._onTextureCubeImagesLoaded,[G$q,G$H,G$A]),G$A,"nativeimage")}},G$Q._onTextureCubeImagesLoaded=function(G$q,G$r,G$v){var G$H=[];G$H.length=6;for(var G$A=0;G$A<6;G$A++){var G$y=G$r[G$A];G$H[G$A]=G$m.getRes(G$y),G$m.clearRes(G$y)}G$q.endLoad(G$H),G$v.recover()},G$Q._onProcessChange=function(G$q,G$r,G$v,G$H){(G$H=G$r+G$H*G$v)<1&&G$q.event("progress",G$H)},G$Q.init=function(G$q,G$r,G$v,G$H,G$A,G$y){if(void 0===G$v&&(G$v=!1),void 0===G$H&&(G$H=!1),void 0===G$A&&(G$A=!0),void 0===G$y&&(G$y=!0),G$B.update3DLoop=function(){},G$B.cancelLoadByUrl=function(G$q){G$Q._cancelLoadByUrl(G$q)},G$O.isAntialias=G$v,G$O.isAlpha=G$H,G$O.premultipliedAlpha=G$A,G$O.isStencil=G$y,!G$E.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");G$B.changeWebGLSize=G$Q._changeWebGLSize,G$g.is3DMode=!0,G$M.init(G$q,G$r),G$Z.__init__(),G$Kr.__init__(),G$lr.__init__(),G$I.__init__(),G$Q.__init__(),G$R.maxTextureCount=2,(G$Q.debugMode||G$i.debugMode)&&(G$Q._debugPhasorSprite=new G$f)},G$Q.HIERARCHY="SPRITE3DHIERARCHY",G$Q.MESH="MESH",G$Q.MATERIAL="MATERIAL",G$Q.PBRMATERIAL="PBRMTL",G$Q.TEXTURECUBE="TEXTURECUBE",G$Q.TERRAIN="TERRAIN",G$Q._readData=null,G$Q._debugPhasorSprite=null,G$Q.debugMode=!1,G$K(G$Q,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new G$r},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new G$r},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new G$r},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new G$r}]),G$Q}(),G$Br=function(G$q){function G$A(G$q){G$A.__super.call(this),this._owner=G$q,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}G$j(G$A,"laya.d3.animation.AnimationTransform3D",G$y);var G$r=G$A.prototype;return G$r._getlocalMatrix=function(){return this._localUpdate&&(G$Xr._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},G$r._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._onWorldTransform()}},G$r._setWorldMatrixAndUpdate=function(G$q){if(this._worldMatrix=G$q,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var G$r=this._getlocalMatrix(),G$v=0;G$v<16;++G$v)this._worldMatrix[G$v]=G$r[G$v];else G$Xr.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},G$r._setWorldMatrixNoUpdate=function(G$q){this._worldMatrix=G$q},G$r._setWorldMatrixIgnoreUpdate=function(G$q){this._worldMatrix=G$q,this._worldUpdate=!1},G$r.getLocalPosition=function(){return this._localPosition},G$r.setLocalPosition=function(G$q){if(this._parent)this._localPosition=G$q,this._localUpdate=!0,this._onWorldTransform();else{var G$r=this._entity.owner._transform,G$v=this._entity.localPosition,G$H=G$v.elements;G$H[0]=G$q[0],G$H[1]=G$q[1],G$H[2]=G$q[2],G$r.localPosition=G$v}},G$r.getLocalRotation=function(){if(this._localQuaternionUpdate){var G$q=this._localRotationEuler;G$Xr._quaternionCreateFromYawPitchRollArray(G$q[1]/G$A._angleToRandin,G$q[0]/G$A._angleToRandin,G$q[2]/G$A._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},G$r.setLocalRotation=function(G$q){if(this._parent)this._localRotation=G$q,G$Xr.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var G$r=this._entity.owner._transform,G$v=this._entity.localRotation,G$H=G$v.elements;G$H[0]=G$q[0],G$H[1]=G$q[1],G$H[2]=G$q[2],G$H[3]=G$q[3],G$r.localRotation=G$v}},G$r.getLocalScale=function(){return this._localScale},G$r.setLocalScale=function(G$q){if(this._parent)this._localScale=G$q,this._localUpdate=!0,this._onWorldTransform();else{var G$r=this._entity.owner._transform,G$v=this._entity.localScale,G$H=G$v.elements;G$H[0]=G$q[0],G$H[1]=G$q[1],G$H[2]=G$q[2],G$r.localScale=G$v}},G$r.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){G$Xr.getYawPitchRoll(this._localRotation,G$A._tempVector3);var G$q=G$A._tempVector3,G$r=this._localRotationEuler;G$r[0]=G$q[1]*G$A._angleToRandin,G$r[1]=G$q[0]*G$A._angleToRandin,G$r[2]=G$q[2]*G$A._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},G$r.setLocalRotationEuler=function(G$q){if(this._parent)G$Xr._quaternionCreateFromYawPitchRollArray(G$q[1]/G$A._angleToRandin,G$q[0]/G$A._angleToRandin,G$q[2]/G$A._angleToRandin,this._localRotation),this._localRotationEuler=G$q,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var G$r=this._entity.owner._transform,G$v=this._entity.localRotationEuler,G$H=G$v.elements;G$H[0]=G$q[0],G$H[1]=G$q[1],G$H[2]=G$q[2],G$r.localRotationEuler=G$v}},G$r.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)G$Xr.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var G$q=this._getlocalMatrix(),G$r=0;G$r<16;++G$r)this._worldMatrix[G$r]=G$q[G$r];this._worldUpdate=!1}return this._worldMatrix},G$r.setParent=function(G$q){if(this._parent!==G$q){if(this._parent){var G$r=this._parent._childs,G$v=G$r.indexOf(this);G$r.splice(G$v,1)}G$q&&(G$q._childs.push(this),G$q&&this._onWorldTransform()),this._parent=G$q}},G$K(G$A,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),G$A}(),G$er=function(G$q){function G$r(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,G$r.__super.call(this),this._destroyed=!1,this._id=G$r._uniqueIDCounter,G$r._uniqueIDCounter++}G$j(G$r,"laya.d3.component.Component3D",G$y);var G$v=G$r.prototype;return G$M.imps(G$v,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),G$v._initialize=function(G$q){this._owner=G$q,this._enable=!0,this.started=!1,this._load(G$q)},G$v._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},G$v._load=function(G$q){},G$v._start=function(G$q){},G$v._update=function(G$q){},G$v._lateUpdate=function(G$q){},G$v._preRenderUpdate=function(G$q){},G$v._postRenderUpdate=function(G$q){},G$v._unload=function(G$q){this.offAll()},G$v._cloneTo=function(G$q){},G$D(0,G$v,"id",function(){return this._id}),G$D(0,G$v,"destroyed",function(){return this._destroyed}),G$D(0,G$v,"owner",function(){return this._owner}),G$D(0,G$v,"enable",function(){return this._enable},function(G$q){this._enable!==G$q&&(this._enable=G$q,this.event("enablechanged",this._enable))}),G$D(0,G$v,"isSingleton",function(){return G$r._isSingleton}),G$r._isSingleton=!0,G$r._uniqueIDCounter=1,G$r}(),G$pr=function(G$q){function G$r(){this._destroyed=!1,G$r.__super.call(this),this._destroyed=!1}G$j(G$r,"laya.d3.core.GeometryFilter",G$y);var G$v=G$r.prototype;return G$M.imps(G$v,{"laya.resource.IDestroy":!0}),G$v._destroy=function(){this.offAll(),this._destroyed=!0},G$D(0,G$v,"_isAsyncLoaded",function(){return!0}),G$D(0,G$v,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),G$D(0,G$v,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),G$D(0,G$v,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),G$D(0,G$v,"destroyed",function(){return this._destroyed}),G$r}(),G$Mr=function(G$q){function G$H(G$q){G$H.__super.call(this),this._id=++G$H._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new G$iq(new G$Rr,new G$Rr),this._boundingBoxCenter=new G$Rr,this._boundingSphere=new G$hq(new G$Rr,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=G$q,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}G$j(G$H,"laya.d3.core.render.BaseRender",G$y);var G$r=G$H.prototype;return G$M.imps(G$r,{"laya.resource.IDestroy":!0}),G$r._changeMaterialReference=function(G$q,G$r){G$q&&G$q._removeReference(),G$r._addReference()},G$r._getInstanceMaterial=function(G$q,G$r){var G$v=new G$q.constructor;return G$q.cloneTo(G$v),G$v.name=G$v.name+"(Instance)",this._materialsInstance[G$r]=!0,this._changeMaterialReference(this._materials[G$r],G$v),this._materials[G$r]=G$v},G$r._setShaderValuelightMap=function(G$q){this._setShaderValueTexture(3,G$q)},G$r._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},G$r._renderRenderableBoundBox=function(){var G$q=G$mr._debugPhasorSprite,G$r=this.boundingBox,G$v=G$H._tempBoundBoxCorners;G$r.getCorners(G$v),G$q.line(G$v[0],G$H._greenColor,G$v[1],G$H._greenColor),G$q.line(G$v[2],G$H._greenColor,G$v[3],G$H._greenColor),G$q.line(G$v[4],G$H._greenColor,G$v[5],G$H._greenColor),G$q.line(G$v[6],G$H._greenColor,G$v[7],G$H._greenColor),G$q.line(G$v[0],G$H._greenColor,G$v[3],G$H._greenColor),G$q.line(G$v[1],G$H._greenColor,G$v[2],G$H._greenColor),G$q.line(G$v[2],G$H._greenColor,G$v[6],G$H._greenColor),G$q.line(G$v[3],G$H._greenColor,G$v[7],G$H._greenColor),G$q.line(G$v[0],G$H._greenColor,G$v[4],G$H._greenColor),G$q.line(G$v[1],G$H._greenColor,G$v[5],G$H._greenColor),G$q.line(G$v[4],G$H._greenColor,G$v[7],G$H._greenColor),G$q.line(G$v[5],G$H._greenColor,G$v[6],G$H._greenColor)},G$r._calculateBoundingSphere=function(){throw"BaseRender: must override it."},G$r._calculateBoundingBox=function(){throw"BaseRender: must override it."},G$r._setShaderValueTexture=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r)},G$r._setShaderValueMatrix4x4=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r?G$r.elements:null)},G$r._setShaderValueColor=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r?G$r.elements:null)},G$r._setShaderValueBuffer=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r)},G$r._setShaderValueInt=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r)},G$r._setShaderValueBool=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r)},G$r._setShaderValueNumber=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r)},G$r._setShaderValueVector2=function(G$q,G$r){this._owner._shaderValues.setValue(G$q,G$r?G$r.elements:null)},G$r._addShaderDefine=function(G$q){this._owner._shaderDefineValue|=G$q},G$r._removeShaderDefine=function(G$q){this._owner._shaderDefineValue&=~G$q},G$r._renderUpdate=function(G$q){return!0},G$r._applyLightMapParams=function(){if(0<=this._lightmapIndex){var G$q=this._owner.scene;if(G$q){var G$r=G$q.getlightmaps()[this._lightmapIndex];G$r?(this._addShaderDefine(G$fr.SAHDERDEFINE_LIGHTMAP),G$r.loaded?this._setShaderValuelightMap(G$r):G$r.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(G$fr.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(G$fr.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(G$fr.SAHDERDEFINE_LIGHTMAP)},G$r._updateOctreeNode=function(){var G$q=this._treeNode;G$q&&this._octreeNodeNeedChange&&(G$q.updateObject(this),this._octreeNodeNeedChange=!1)},G$r._destroy=function(){this.offAll();var G$q=0,G$r=0;for(G$q=0,G$r=this._renderElements.length;G$q<G$r;G$q++)this._renderElements[G$q]._destroy();for(G$q=0,G$r=this._materials.length;G$q<G$r;G$q++)this._materials[G$q]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},G$D(0,G$r,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),G$D(0,G$r,"id",function(){return this._id}),G$D(0,G$r,"material",function(){var G$q=this._materials[0];if(G$q&&!this._materialsInstance[0]){var G$r=this._getInstanceMaterial(G$q,0);this.event("materialchanged",[this,0,G$r])}return this._materials[0]},function(G$q){this.sharedMaterial=G$q}),G$D(0,G$r,"sharedMaterial",function(){return this._materials[0]},function(G$q){var G$r=this._materials[0];G$r!==G$q&&(this._materials[0]=G$q,this._materialsInstance[0]=!1,this._changeMaterialReference(G$r,G$q),this.event("materialchanged",[this,0,G$q]))}),G$D(0,G$r,"lightmapIndex",function(){return this._lightmapIndex},function(G$q){this._lightmapIndex=G$q,this._applyLightMapParams()}),G$D(0,G$r,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(G$q){this._lightmapScaleOffset=G$q,this._setShaderValueColor(2,G$q),this._addShaderDefine(G$fr.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),G$D(0,G$r,"enable",function(){return this._enable},function(G$q){this._enable=G$q,this.event("enablechanged",[this,G$q])}),G$D(0,G$r,"materials",function(){for(var G$q=0,G$r=this._materials.length;G$q<G$r;G$q++)if(!this._materialsInstance[G$q]){var G$v=this._getInstanceMaterial(this._materials[G$q],G$q);this.event("materialchanged",[this,G$q,G$v])}return this._materials.slice()},function(G$q){this.sharedMaterials=G$q}),G$D(0,G$r,"sharedMaterials",function(){return this._materials.slice()},function(G$q){if(!G$q)throw new Error("MeshRender: shadredMaterials value can't be null.");var G$r=G$q.length;this._materialsInstance.length=G$r;for(var G$v=0;G$v<G$r;G$v++){var G$H=this._materials[G$v];G$H!==G$q[G$v]&&(this._materialsInstance[G$v]=!1,this._changeMaterialReference(G$H,G$q[G$v]),this.event("materialchanged",[this,G$v,G$q[G$v]]))}this._materials=G$q}),G$D(0,G$r,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),G$D(0,G$r,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var G$q=this.boundingBox;G$Rr.add(G$q.min,G$q.max,this._boundingBoxCenter),G$Rr.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),G$D(0,G$r,"receiveShadow",function(){return this._receiveShadow},function(G$q){this._receiveShadow!==G$q&&((this._receiveShadow=G$q)?this._addShaderDefine(G$jr.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(G$jr.SHADERDEFINE_RECEIVE_SHADOW))}),G$D(0,G$r,"destroyed",function(){return this._destroyed}),G$H._uniqueIDCounter=0,G$K(G$H,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr,new G$Rr]},"_greenColor",function(){return this._greenColor=new G$Wr(0,1,0,1)}]),G$H}(),G$zr=function(G$q){function G$W(G$q){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,G$W.__super.call(this),this._localPosition=new G$Rr,this._localRotation=new G$vr(0,0,0,1),this._localScale=new G$Rr(1,1,1),this._localRotationEuler=new G$Rr,this._localMatrix=new G$qr,this._position=new G$Rr,this._rotation=new G$vr(0,0,0,1),this._scale=new G$Rr(1,1,1),this._worldMatrix=new G$qr,this._forward=new G$Rr,this._up=new G$Rr,this._right=new G$Rr,this._owner=G$q,this._childs=[]}G$j(G$W,"laya.d3.core.Transform3D",G$y);var G$r=G$W.prototype;return G$r._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)G$qr.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var G$q=G$W._tempVector30;G$Rr.multiply(this.pivot,this._localScale,G$q);var G$r=G$W._tempVector31;G$Rr.subtract(G$q,this.pivot,G$r);var G$v=G$W._tempVector32,G$H=this.localRotation;G$Rr.transformQuat(G$q,G$H,G$v),G$Rr.subtract(G$v,G$q,G$v);var G$A=G$W._tempVector33;G$Rr.subtract(this._localPosition,G$r,G$A),G$Rr.subtract(G$A,G$v,G$A),G$qr.createAffineTransformation(G$A,G$H,this._localScale,this._localMatrix)}},G$r._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._onWorldPositionRotationTransform()}},G$r._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._onWorldPositionScaleTransform()}},G$r._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._onWorldPositionTransform()}},G$r._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._onWorldPositionRotationTransform()}},G$r._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._onWorldPositionScaleTransform()}},G$r._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._onWorldTransform()}},G$r.translate=function(G$q,G$r){void 0===G$r&&(G$r=!0),G$r?(G$qr.createFromQuaternion(this.localRotation,G$W._tempMatrix0),G$Rr.transformCoordinate(G$q,G$W._tempMatrix0,G$W._tempVector30),G$Rr.add(this.localPosition,G$W._tempVector30,this._localPosition),this.localPosition=this._localPosition):(G$Rr.add(this.position,G$q,this._position),this.position=this._position)},G$r.rotate=function(G$q,G$r,G$v){var G$H;void 0===G$r&&(G$r=!0),void 0===G$v&&(G$v=!0),G$H=G$v?G$q:(G$Rr.scale(G$q,Math.PI/180,G$W._tempVector30),G$W._tempVector30),G$vr.createFromYawPitchRoll(G$H.y,G$H.x,G$H.z,G$W._tempQuaternion0),G$r?(G$vr.multiply(this._localRotation,G$W._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(G$vr.multiply(G$W._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},G$r.lookAt=function(G$q,G$r,G$v){void 0===G$v&&(G$v=!1);var G$H,G$A=G$q.elements;if(G$v){if(G$H=this._localPosition.elements,Math.abs(G$H[0]-G$A[0])<G$nq.zeroTolerance&&Math.abs(G$H[1]-G$A[1])<G$nq.zeroTolerance&&Math.abs(G$H[2]-G$A[2])<G$nq.zeroTolerance)return;G$vr.lookAt(this._localPosition,G$q,G$r,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var G$y=this.position;if(G$H=G$y.elements,Math.abs(G$H[0]-G$A[0])<G$nq.zeroTolerance&&Math.abs(G$H[1]-G$A[1])<G$nq.zeroTolerance&&Math.abs(G$H[2]-G$A[2])<G$nq.zeroTolerance)return;G$vr.lookAt(G$y,G$q,G$r,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},G$D(0,G$r,"_isFrontFaceInvert",function(){var G$q=this.scale,G$r=G$q.x<0;return G$q.y<0&&(G$r=!G$r),G$q.z<0&&(G$r=!G$r),G$r}),G$D(0,G$r,"owner",function(){return this._owner}),G$D(0,G$r,"localRotation",function(){if(this._localQuaternionUpdate){var G$q=this._localRotationEuler.elements;G$vr.createFromYawPitchRoll(G$q[1]/G$W._angleToRandin,G$q[0]/G$W._angleToRandin,G$q[2]/G$W._angleToRandin,this._localRotation)}return this._localRotation},function(G$q){this._localRotation=G$q,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),G$D(0,G$r,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?G$qr.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(G$q){null===this._parent?G$q.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),G$qr.multiply(this._localMatrix,G$q,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=G$q,this._worldUpdate=!1}),G$D(0,G$r,"worldNeedUpdate",function(){return this._worldUpdate}),G$D(0,G$r,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(G$q){this._localMatrix=G$q,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),G$D(0,G$r,"dummy",function(){return this._dummy},function(G$q){this._dummy!==G$q&&(this._dummy&&(this._dummy._entity=null),G$q&&(G$q._entity=this),this._dummy=G$q)}),G$D(0,G$r,"localPosition",function(){return this._localPosition},function(G$q){this._localPosition=G$q,this._localUpdate=!0,this._onWorldPositionTransform()}),G$D(0,G$r,"position",function(){if(this._positionUpdate){if(null!=this._parent){var G$q=this._parent.position;G$Rr.multiply(this._localPosition,this._parent.scale,G$W._tempVector30),G$Rr.transformQuat(G$W._tempVector30,this._parent.rotation,G$W._tempVector30),G$Rr.add(G$q,G$W._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(G$q){if(null!=this._parent){G$Rr.subtract(G$q,this._parent.position,this._localPosition);var G$r=this._parent.scale.elements,G$v=G$r[0],G$H=G$r[1],G$A=G$r[2];if(1!==G$v||1!==G$H||1!==G$A){var G$y=G$W._tempVector30,G$R=G$y.elements;G$R[0]=1/G$v,G$R[1]=1/G$H,G$R[2]=1/G$A,G$Rr.multiply(this._localPosition,G$y,this._localPosition)}this._parent.rotation.invert(G$W._tempQuaternion0),G$Rr.transformQuat(this._localPosition,G$W._tempQuaternion0,this._localPosition)}else G$q.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=G$q,this._positionUpdate=!1}),G$D(0,G$r,"localScale",function(){return this._localScale},function(G$q){this._localScale=G$q,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),G$D(0,G$r,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(G$W._tempVector30);var G$q=G$W._tempVector30.elements,G$r=this._localRotationEuler.elements;G$r[0]=G$q[1]*G$W._angleToRandin,G$r[1]=G$q[0]*G$W._angleToRandin,G$r[2]=G$q[2]*G$W._angleToRandin}return this._localRotationEuler},function(G$q){this._localRotationEuler=G$q,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),G$D(0,G$r,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?G$vr.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(G$q){null!=this._parent?(this._parent.rotation.invert(G$W._tempQuaternion0),G$vr.multiply(G$q,G$W._tempQuaternion0,this._localRotation)):G$q.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=G$q,this._rotationUpdate=!1}),G$D(0,G$r,"scale",function(){return this._scaleUpdate&&(null!==this._parent?G$Rr.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(G$q){if(null!==this._parent){var G$r=this._parent.scale.elements,G$v=G$W._tempVector30.elements;G$v[0]=1/G$r[0],G$v[1]=1/G$r[1],G$v[2]=1/G$r[2],G$Rr.multiply(G$q,G$W._tempVector30,this._localScale)}else G$q.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=G$q,this._scaleUpdate=!1}),G$D(0,G$r,"rotationEuler",null,function(G$q){G$vr.createFromYawPitchRoll(G$q.y,G$q.x,G$q.z,this._rotation),this.rotation=this._rotation}),G$D(0,G$r,"forward",function(){var G$q=this.worldMatrix.elements;return this._forward.elements[0]=-G$q[8],this._forward.elements[1]=-G$q[9],this._forward.elements[2]=-G$q[10],this._forward}),G$D(0,G$r,"up",function(){var G$q=this.worldMatrix.elements;return this._up.elements[0]=G$q[4],this._up.elements[1]=G$q[5],this._up.elements[2]=G$q[6],this._up}),G$D(0,G$r,"right",function(){var G$q=this.worldMatrix.elements;return this._right.elements[0]=G$q[0],this._right.elements[1]=G$q[1],this._right.elements[2]=G$q[2],this._right}),G$D(0,G$r,"parent",function(){return this._parent},function(G$q){if(this._parent!==G$q){if(this._parent){var G$r=this._parent._childs,G$v=G$r.indexOf(this);G$r.splice(G$v,1)}G$q&&(G$q._childs.push(this),G$q&&this._onWorldTransform()),this._parent=G$q}}),G$K(G$W,["_tempVector30",function(){return this._tempVector30=new G$Rr},"_tempVector31",function(){return this._tempVector31=new G$Rr},"_tempVector32",function(){return this._tempVector32=new G$Rr},"_tempVector33",function(){return this._tempVector33=new G$Rr},"_tempQuaternion0",function(){return this._tempQuaternion0=new G$vr},"_tempMatrix0",function(){return this._tempMatrix0=new G$qr},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),G$W}(),G$Pr=(function(G$q){function G$r(){this._rotation=0,this._matNeedUpdte=!1,G$r.__super.call(this),this._matrix=new G$qr,this._offset=new G$yr,this._tiling=new G$yr(1,1)}G$j(G$r,"laya.d3.core.TransformUV",G$y);var G$v=G$r.prototype;G$M.imps(G$v,{"laya.d3.core.IClone":!0}),G$v._updateMatrix=function(){G$r._tempOffsetV3.elements[0]=this._offset.x,G$r._tempOffsetV3.elements[1]=this._offset.y,G$vr.createFromYawPitchRoll(0,0,this._rotation,G$r._tempRotationQua),G$r._tempTitlingV3.elements[0]=this._tiling.x,G$r._tempTitlingV3.elements[1]=this._tiling.y,G$qr.createAffineTransformation(G$r._tempOffsetV3,G$r._tempRotationQua,G$r._tempTitlingV3,this._matrix)},G$v.cloneTo=function(G$q){G$q._matrix=this._matrix.clone(),G$q._offset=this._offset.clone(),G$q._rotation=this._rotation,G$q._tiling=this._tiling.clone()},G$v.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$v,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),G$D(0,G$v,"tiling",function(){return this._tiling},function(G$q){this._tiling=G$q,this._matNeedUpdte=!0}),G$D(0,G$v,"offset",function(){return this._offset},function(G$q){this._offset=G$q,this._matNeedUpdte=!0}),G$D(0,G$v,"rotation",function(){return this._rotation},function(G$q){this._rotation=G$q,this._matNeedUpdte=!0}),G$K(G$r,["_tempOffsetV3",function(){return this._tempOffsetV3=new G$Rr(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new G$vr},"_tempTitlingV3",function(){return this._tempTitlingV3=new G$Rr(1,1,1)}])}(),function(G$v){function G$q(){this.x=NaN,this.y=NaN,this.z=NaN,G$q.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}G$j(G$q,"laya.d3.core.particleShuriKen.module.shape.BoxShape",G$v);var G$r=G$q.prototype;G$r._getShapeBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=.5*-this.x,G$r[1]=.5*-this.y,G$r[2]=.5*-this.z;var G$v=G$q.max.elements;G$v[0]=.5*this.x,G$v[1]=.5*this.y,G$v[2]=.5*this.z},G$r._getSpeedBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=0,G$r[1]=0,G$r[2]=0;var G$v=G$q.max.elements;G$v[0]=0,G$v[1]=1,G$v[2]=0},G$r.generatePositionAndDirection=function(G$q,G$r,G$v,G$H){var G$A=G$q.elements,G$y=G$r.elements;G$v?(G$v.seed=G$H[16],G$U._randomPointInsideHalfUnitBox(G$q,G$v),G$H[16]=G$v.seed):G$U._randomPointInsideHalfUnitBox(G$q),G$A[0]=this.x*G$A[0],G$A[1]=this.y*G$A[1],G$A[2]=this.z*G$A[2],this.randomDirection?G$v?(G$v.seed=G$H[17],G$U._randomPointUnitSphere(G$r,G$v),G$H[17]=G$v.seed):G$U._randomPointUnitSphere(G$r):(G$y[0]=0,G$y[1]=0,G$y[2]=1)},G$r.cloneTo=function(G$q){G$v.prototype.cloneTo.call(this,G$q);var G$r=G$q;G$r.x=this.x,G$r.y=this.y,G$r.z=this.z,G$r.randomDirection=this.randomDirection}}(G$d),function(G$v){function G$R(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,G$R.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}G$j(G$R,"laya.d3.core.particleShuriKen.module.shape.CircleShape",G$v);var G$q=G$R.prototype;G$q._getShapeBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=G$r[2]=-this.radius,G$r[1]=0;var G$v=G$q.max.elements;G$v[0]=G$v[2]=this.radius,G$v[1]=0},G$q._getSpeedBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=G$r[1]=-1,G$r[2]=0;var G$v=G$q.max.elements;G$v[0]=G$v[1]=1,G$v[2]=0},G$q.generatePositionAndDirection=function(G$q,G$r,G$v,G$H){var G$A=G$q.elements,G$y=G$R._tempPositionPoint.elements;G$v?(G$v.seed=G$H[16],this.emitFromEdge?G$U._randomPointUnitArcCircle(this.arc,G$R._tempPositionPoint,G$v):G$U._randomPointInsideUnitArcCircle(this.arc,G$R._tempPositionPoint,G$v),G$H[16]=G$v.seed):this.emitFromEdge?G$U._randomPointUnitArcCircle(this.arc,G$R._tempPositionPoint):G$U._randomPointInsideUnitArcCircle(this.arc,G$R._tempPositionPoint),G$A[0]=-G$y[0],G$A[1]=G$y[1],G$A[2]=0,G$Rr.scale(G$q,this.radius,G$q),this.randomDirection?G$v?(G$v.seed=G$H[17],G$U._randomPointUnitSphere(G$r,G$v),G$H[17]=G$v.seed):G$U._randomPointUnitSphere(G$r):G$q.cloneTo(G$r)},G$q.cloneTo=function(G$q){G$v.prototype.cloneTo.call(this,G$q);var G$r=G$q;G$r.radius=this.radius,G$r.arc=this.arc,G$r.emitFromEdge=this.emitFromEdge,G$r.randomDirection=this.randomDirection},G$K(G$R,["_tempPositionPoint",function(){return this._tempPositionPoint=new G$yr}])}(G$d),function(G$v){function G$T(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,G$T.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}G$j(G$T,"laya.d3.core.particleShuriKen.module.shape.ConeShape",G$v);var G$q=G$T.prototype;G$q._getShapeBoundBox=function(G$q){var G$r=this.radius+this.length*Math.sin(this.angle),G$v=this.length*Math.cos(this.angle),G$H=G$q.min.elements;G$H[0]=G$H[1]=-G$r,G$H[2]=0;var G$A=G$q.max.elements;G$A[0]=G$A[1]=G$r,G$A[2]=G$v},G$q._getSpeedBoundBox=function(G$q){var G$r=Math.sin(this.angle),G$v=G$q.min.elements;G$v[0]=G$v[1]=-G$r,G$v[2]=0;var G$H=G$q.max.elements;G$H[0]=G$v[1]=G$r,G$H[2]=1},G$q.generatePositionAndDirection=function(G$q,G$r,G$v,G$H){var G$A,G$y=G$q.elements,G$R=G$r.elements,G$W=G$T._tempPositionPoint.elements,G$O=NaN,G$N=NaN,G$x=Math.cos(this.angle),G$K=Math.sin(this.angle);switch(this.emitType){case 0:G$v?(G$v.seed=G$H[16],G$U._randomPointInsideUnitCircle(G$T._tempPositionPoint,G$v),G$H[16]=G$v.seed):G$U._randomPointInsideUnitCircle(G$T._tempPositionPoint),G$O=G$W[0],G$N=G$W[1],G$y[0]=G$O*this.radius,G$y[1]=G$N*this.radius,G$y[2]=0,this.randomDirection?(G$v?(G$v.seed=G$H[17],G$U._randomPointInsideUnitCircle(G$T._tempDirectionPoint,G$v),G$H[17]=G$v.seed):G$U._randomPointInsideUnitCircle(G$T._tempDirectionPoint),G$A=G$T._tempDirectionPoint.elements,G$R[0]=G$A[0]*G$K,G$R[1]=G$A[1]*G$K):(G$R[0]=G$O*G$K,G$R[1]=G$N*G$K),G$R[2]=G$x;break;case 1:G$v?(G$v.seed=G$H[16],G$U._randomPointUnitCircle(G$T._tempPositionPoint,G$v),G$H[16]=G$v.seed):G$U._randomPointUnitCircle(G$T._tempPositionPoint),G$O=G$W[0],G$N=G$W[1],G$y[0]=G$O*this.radius,G$y[1]=G$N*this.radius,G$y[2]=0,this.randomDirection?(G$v?(G$v.seed=G$H[17],G$U._randomPointInsideUnitCircle(G$T._tempDirectionPoint,G$v),G$H[17]=G$v.seed):G$U._randomPointInsideUnitCircle(G$T._tempDirectionPoint),G$A=G$T._tempDirectionPoint.elements,G$R[0]=G$A[0]*G$K,G$R[1]=G$A[1]*G$K):(G$R[0]=G$O*G$K,G$R[1]=G$N*G$K),G$R[2]=G$x;break;case 2:G$v?(G$v.seed=G$H[16],G$U._randomPointInsideUnitCircle(G$T._tempPositionPoint,G$v)):G$U._randomPointInsideUnitCircle(G$T._tempPositionPoint),G$O=G$W[0],G$N=G$W[1],G$y[0]=G$O*this.radius,G$y[1]=G$N*this.radius,G$R[G$y[2]=0]=G$O*G$K,G$R[1]=G$N*G$K,G$R[2]=G$x,G$Rr.normalize(G$r,G$r),G$v?(G$Rr.scale(G$r,this.length*G$v.getFloat(),G$r),G$H[16]=G$v.seed):G$Rr.scale(G$r,this.length*Math.random(),G$r),G$Rr.add(G$q,G$r,G$q),this.randomDirection&&(G$v?(G$v.seed=G$H[17],G$U._randomPointUnitSphere(G$r,G$v),G$H[17]=G$v.seed):G$U._randomPointUnitSphere(G$r));break;case 3:G$v?(G$v.seed=G$H[16],G$U._randomPointUnitCircle(G$T._tempPositionPoint,G$v)):G$U._randomPointUnitCircle(G$T._tempPositionPoint),G$O=G$W[0],G$N=G$W[1],G$y[0]=G$O*this.radius,G$y[1]=G$N*this.radius,G$R[G$y[2]=0]=G$O*G$K,G$R[1]=G$N*G$K,G$R[2]=G$x,G$Rr.normalize(G$r,G$r),G$v?(G$Rr.scale(G$r,this.length*G$v.getFloat(),G$r),G$H[16]=G$v.seed):G$Rr.scale(G$r,this.length*Math.random(),G$r),G$Rr.add(G$q,G$r,G$q),this.randomDirection&&(G$v?(G$v.seed=G$H[17],G$U._randomPointUnitSphere(G$r,G$v),G$H[17]=G$v.seed):G$U._randomPointUnitSphere(G$r));break;default:throw new Error("ConeShape:emitType is invalid.")}},G$q.cloneTo=function(G$q){G$v.prototype.cloneTo.call(this,G$q);var G$r=G$q;G$r.angle=this.angle,G$r.radius=this.radius,G$r.length=this.length,G$r.emitType=this.emitType,G$r.randomDirection=this.randomDirection},G$K(G$T,["_tempPositionPoint",function(){return this._tempPositionPoint=new G$yr},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new G$yr}])}(G$d),function(G$v){function G$q(){this.radius=NaN,this.emitFromShell=!1,G$q.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}G$j(G$q,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",G$v);var G$r=G$q.prototype;G$r._getShapeBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=G$r[1]=G$r[2]=-this.radius;var G$v=G$q.max.elements;G$v[0]=G$v[1]=this.radius,G$v[2]=0},G$r._getSpeedBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=G$r[1]=-1,G$r[2]=0;var G$v=G$q.max.elements;G$v[0]=G$v[1]=G$v[2]=1},G$r.generatePositionAndDirection=function(G$q,G$r,G$v,G$H){var G$A=G$q.elements;G$v?(G$v.seed=G$H[16],this.emitFromShell?G$U._randomPointUnitSphere(G$q,G$v):G$U._randomPointInsideUnitSphere(G$q,G$v),G$H[16]=G$v.seed):this.emitFromShell?G$U._randomPointUnitSphere(G$q):G$U._randomPointInsideUnitSphere(G$q),G$Rr.scale(G$q,this.radius,G$q);var G$y=G$A[2];G$y<0&&(G$A[2]=-1*G$y),this.randomDirection?G$v?(G$v.seed=G$H[17],G$U._randomPointUnitSphere(G$r,G$v),G$H[17]=G$v.seed):G$U._randomPointUnitSphere(G$r):G$q.cloneTo(G$r)},G$r.cloneTo=function(G$q){G$v.prototype.cloneTo.call(this,G$q);var G$r=G$q;G$r.radius=this.radius,G$r.emitFromShell=this.emitFromShell,G$r.randomDirection=this.randomDirection}}(G$d),function(G$v){function G$q(){this.radius=NaN,this.emitFromShell=!1,G$q.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}G$j(G$q,"laya.d3.core.particleShuriKen.module.shape.SphereShape",G$v);var G$r=G$q.prototype;G$r._getShapeBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=G$r[1]=G$r[2]=-this.radius;var G$v=G$q.max.elements;G$v[0]=G$v[1]=G$v[2]=this.radius},G$r._getSpeedBoundBox=function(G$q){var G$r=G$q.min.elements;G$r[0]=G$r[1]=G$r[2]=-1;var G$v=G$q.max.elements;G$v[0]=G$v[1]=G$v[2]=1},G$r.generatePositionAndDirection=function(G$q,G$r,G$v,G$H){G$v?(G$v.seed=G$H[16],this.emitFromShell?G$U._randomPointUnitSphere(G$q,G$v):G$U._randomPointInsideUnitSphere(G$q,G$v),G$H[16]=G$v.seed):this.emitFromShell?G$U._randomPointUnitSphere(G$q):G$U._randomPointInsideUnitSphere(G$q),G$Rr.scale(G$q,this.radius,G$q),this.randomDirection?G$v?(G$v.seed=G$H[17],G$U._randomPointUnitSphere(G$r,G$v),G$H[17]=G$v.seed):G$U._randomPointUnitSphere(G$r):G$q.cloneTo(G$r)},G$r.cloneTo=function(G$q){G$v.prototype.cloneTo.call(this,G$q);var G$r=G$q;G$r.radius=this.radius,G$r.emitFromShell=this.emitFromShell,G$r.randomDirection=this.randomDirection}}(G$d),function(G$q){function G$r(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,G$r.__super.call(this)}return G$j(G$r,"laya.d3.core.render.SubMeshRenderElement",G$S),G$r}()),G$Vr=function(G$q){function G$X(G$q,G$r,G$v,G$H,G$A,G$y){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=G$q,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[G$jr.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[G$fr.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[G$fr.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[G$Gr.SHADERDEFINE_ALPHATEST]="ALPHATEST";G$X.__super.call(this,G$q,G$r,G$v,null,{}),this._attributeMap=G$H;var G$R;for(G$R in G$A){var G$W=G$A[G$R];switch(G$W[1]){case 0:this._renderElementUniformMap[G$R]=G$W[0];break;case 1:this._materialUniformMap[G$R]=G$W[0];break;case 2:this._spriteUniformMap[G$R]=G$W[0];break;case 3:this._cameraUniformMap[G$R]=G$W[0];break;case 4:this._sceneUniformMap[G$R]=G$W[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}G$j(G$X,"laya.d3.shader.ShaderCompile3D",G$e);var G$r=G$X.prototype;return G$r._definesToNameDic=function(G$q,G$r){for(var G$v={},G$H=1,G$A=0;G$A<32&&!(G$q<(G$H=1<<G$A));G$A++)if(G$q&G$H){var G$y=G$r[G$H];G$y&&(G$v[G$y]="")}return G$v},G$r.withCompile=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R;if(G$y=this.sharders[G$q])if(G$R=G$y[G$r]){if(G$A=G$R[G$v])return G$A}else G$R=G$y[G$r]=[];else G$R=(G$y=this.sharders[G$q]=[])[G$r]=[];var G$W,G$O=this._definesToNameDic(G$q,G$X._globalInt2name),G$N=this._definesToNameDic(G$r,this._spriteInt2name),G$x=this._definesToNameDic(G$v,this._materialInt2name),G$K={},G$T="";if(G$O)for(G$W in G$O)G$T+="#define "+G$W+"\n",G$K[G$W]=!0;if(G$N)for(G$W in G$N)G$T+="#define "+G$W+"\n",G$K[G$W]=!0;if(G$x)for(G$W in G$x)G$T+="#define "+G$W+"\n",G$K[G$W]=!0;var G$j=G$Cr.nameKey.getName(this._name)+" compile ("+G$q+","+G$r+","+G$v+")",G$D=this._VS.toscript(G$K,[]),G$g=this._PS.toscript(G$K,[]);G$s.now();if(G$A=G$Cr.create(G$T+G$D.join("\n"),G$T+G$g.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,G$H,G$j),G$R[G$v]=G$A,laya.d3.shader.ShaderCompile3D.debugMode)G$s.now();return G$A},G$r.precompileShaderWithShaderDefine=function(G$q,G$r,G$v){this.withCompile(G$q,G$r,G$v,!0)},G$r.addMaterialDefines=function(G$q){var G$r=G$q.defines;for(var G$v in G$r){var G$H=G$r[G$v],G$A=parseInt(G$v);this._materialInt2name[G$A]=G$H,this._materialName2Int[G$H]=G$A}},G$r.addSpriteDefines=function(G$q){var G$r=G$q.defines;for(var G$v in G$r){var G$H=G$r[G$v],G$A=parseInt(G$v);this._spriteInt2name[G$A]=G$H,this._spriteName2Int[G$H]=G$A}},G$r.getMaterialDefineByName=function(G$q){return this._materialName2Int[G$q]},G$r.registerMaterialDefine=function(G$q){var G$r=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[G$r]=G$q,this._materialName2Int[G$q]=G$r},G$r.registerSpriteDefine=function(G$q){var G$r=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[G$r]=G$q,this._spriteName2Int[G$q]=G$r},G$X._globalRegDefine=function(G$q,G$r){G$X._globalInt2name[G$r]=G$q},G$X.add=function(G$q,G$r,G$v,G$H,G$A){return laya.d3.shader.ShaderCompile3D._preCompileShader[G$q]=new G$X(G$q,G$r,G$v,G$H,G$A,G$e.includes)},G$X.get=function(G$q){return laya.d3.shader.ShaderCompile3D._preCompileShader[G$Cr.nameKey.getID(G$q)]},G$X._preCompileShader={},G$X._globalInt2name=[],G$X.debugMode=!1,G$X.SHADERDEFINE_HIGHPRECISION=1,G$X.SHADERDEFINE_FOG=4,G$X.SHADERDEFINE_DIRECTIONLIGHT=8,G$X.SHADERDEFINE_POINTLIGHT=16,G$X.SHADERDEFINE_SPOTLIGHT=32,G$X.SHADERDEFINE_UV0=64,G$X.SHADERDEFINE_COLOR=128,G$X.SHADERDEFINE_UV1=256,G$X.SAHDERDEFINE_DEPTHFOG=131072,G$X}(),G$ar=function(G$q){function G$D(){G$D.__super.call(this)}G$j(G$D,"laya.d3.graphics.MeshSprite3DStaticBatchManager",G$Hq);var G$r=G$D.prototype;return G$r._getStaticBatch=function(G$q,G$r,G$v,G$H){var G$A,G$y;return G$y=G$q?G$q.id.toString()+G$v.id.toString()+G$r.id.toString()+G$H.toString():G$v.id.toString()+G$r.id.toString()+G$H.toString(),this._staticBatches[G$y]?G$A=this._staticBatches[G$y]:this._staticBatches[G$y]=G$A=new G$Jr(G$y,this,G$q,G$r,G$v),G$A},G$r._initStaticBatchs=function(G$q){var G$r,G$v;this._initBatchRenderElements.sort(G$D._sortPrepareStaticBatch);for(var G$H,G$A=!1,G$y=0,G$R=0,G$W=this._initBatchRenderElements.length;G$R<G$W;G$R++){var G$O,G$N=this._initBatchRenderElements[G$R],G$x=G$N.renderObj._getVertexBuffer(0);G$N._sprite3D;if(G$v===G$x.vertexDeclaration&&G$r===G$N._material)if(G$A)G$H._addCombineBatchRenderObjTest(G$N)?(G$O=G$N._staticBatch)!==G$H&&(G$O&&G$O._deleteCombineBatchRenderObj(G$N),G$H._addCombineBatchRenderObj(G$N)):(G$A=!1,G$y++);else{var G$K=this._initBatchRenderElements[G$R-1],G$T=G$K.renderObj,G$j=G$N.renderObj;G$A=!(65535<G$T._getVertexBuffer().vertexCount+G$j._getVertexBuffer().vertexCount)&&(G$H=this._getStaticBatch(G$q,G$v,G$r,G$y),(G$O=G$K._staticBatch)!==G$H&&(G$O&&G$O._deleteCombineBatchRenderObj(G$K),G$H._addCombineBatchRenderObj(G$K)),(G$O=G$N._staticBatch)!==G$H&&(G$O&&G$O._deleteCombineBatchRenderObj(G$N),G$H._addCombineBatchRenderObj(G$N)),!0)}else G$A=!1,G$y=0;G$r=G$N._material,G$v=G$x.vertexDeclaration}},G$D._sortPrepareStaticBatch=function(G$q,G$r){var G$v=G$q._render,G$H=G$r._render,G$A=G$v.lightmapIndex-G$H.lightmapIndex;if(0!=G$A)return G$A;var G$y=G$v.receiveShadow-G$H.receiveShadow;if(0!=G$y)return G$y;var G$R=G$q._mainSortID-G$r._mainSortID;return 0==G$R?G$q.renderObj.triangleCount-G$r.renderObj.triangleCount:G$R},G$D}(),G$Jr=function(G$q){function G$y(G$q,G$r,G$v,G$H,G$A){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,G$y.__super.call(this,G$q,G$r,G$v),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=G$H,this._material=G$A}G$j(G$y,"laya.d3.graphics.SubMeshStaticBatch",G$Aq);var G$r=G$y.prototype;return G$r._compareBatchRenderElement=function(G$q,G$r){return G$q._batchIndexStart>G$r._batchIndexStart},G$r._addCombineBatchRenderObjTest=function(G$q){var G$r=G$q.renderObj._vertexCount;return!(65535<(0<G$r?this._currentCombineVertexCount+G$r:this._currentCombineVertexCount+G$q.renderObj._getVertexBuffer().vertexCount))},G$r._addCombineBatchRenderObj=function(G$q){var G$r=G$q.renderObj,G$v=G$r._vertexCount;this._initBatchRenderElements.push(G$q),G$q._staticBatch=this,0<G$v?(this._currentCombineIndexCount+=G$r._indexCount,this._currentCombineVertexCount+=G$v):(this._currentCombineIndexCount=this._currentCombineIndexCount+G$r._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+G$r._getVertexBuffer().vertexCount),this._needFinishCombine=!0},G$r._deleteCombineBatchRenderObj=function(G$q){var G$r=G$q.renderObj,G$v=this._initBatchRenderElements.indexOf(G$q);if(-1!==G$v){this._initBatchRenderElements.splice(G$v,1),G$q._staticBatch=null;var G$H=G$r._vertexCount;0<G$H?(this._currentCombineIndexCount=this._currentCombineIndexCount-G$r._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-G$H):(this._currentCombineIndexCount=this._currentCombineIndexCount-G$r._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-G$r._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},G$r._finishInit=function(){if(this._needFinishCombine){var G$q=0,G$r=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var G$v=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),G$H=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=G$dr.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=G$br.create("ushort",this._currentCombineIndexCount,35044);for(var G$A=0,G$y=this._initBatchRenderElements.length;G$A<G$y;G$A++){var G$R=this._initBatchRenderElements[G$A],G$W=G$R.renderObj,G$O=G$W._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,G$R._sprite3D),G$N=G$W.getIndices(),G$x=G$R._sprite3D.transform._isFrontFaceInvert,G$K=G$q/(this._vertexDeclaration.vertexStride/4)-G$W._vertexStart,G$T=G$r,G$j=G$T+G$N.length;G$R._batchIndexStart=G$T,G$R._batchIndexEnd=G$j,G$H.set(G$N,G$r);var G$D=0;if(G$x)for(G$D=G$T;G$D<G$j;G$D+=3){G$H[G$D]=G$K+G$H[G$D];var G$g=G$H[G$D+1],G$X=G$H[G$D+2];G$H[G$D+1]=G$K+G$X,G$H[G$D+2]=G$K+G$g}else for(G$D=G$T;G$D<G$j;G$D+=3)G$H[G$D]=G$K+G$H[G$D],G$H[G$D+1]=G$K+G$H[G$D+1],G$H[G$D+2]=G$K+G$H[G$D+2];G$r+=G$N.length,G$v.set(G$O,G$q),G$q+=G$O.length}this._vertexBuffer.setData(G$v),this._indexBuffer.setData(G$H),this._needFinishCombine=!1}},G$r._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new G$Pr)},G$r._getRenderElement=function(G$q,G$r,G$v){for(var G$H,G$A,G$y=this._batchRenderElements.length,G$R=!0,G$W=0;G$W<G$y;G$W++){var G$O,G$N,G$x=(G$A=this._batchRenderElements[G$W])._sprite3D._render;if(0!==G$W&&(G$R=(G$O=(G$H=this._batchRenderElements[G$W-1])._sprite3D._render).lightmapIndex!==G$x.lightmapIndex||G$O.receiveShadow!==G$x.receiveShadow||G$H._batchIndexEnd!==G$A._batchIndexStart),G$R){(G$N=this._getCombineRenderElementFromPool()).renderObj=this,G$N._material=this._material,G$N._batchIndexStart=G$A._batchIndexStart,G$N._batchIndexEnd=G$A._batchIndexEnd;var G$K=G$x.lightmapIndex,G$T=G$K+1,G$j=this._batchOwnerIndices[G$T];G$j||(G$j=this._batchOwnerIndices[G$T]=[]);var G$D,G$g=G$j[G$A._render.receiveShadow?1:0];void 0===G$g?(G$j[G$x.receiveShadow?1:0]=this._batchOwners.length,(G$D=new G$lr(null,"StaticBatchMeshSprite3D"))._scene=G$r,G$D._transform=this._rootOwner?this._rootOwner._transform:null,G$D._render.lightmapIndex=G$K,G$D._render.receiveShadow=G$A._render.receiveShadow,this._batchOwners.push(G$D)):G$D=this._batchOwners[G$g],G$D._render._renderUpdate(G$v),G$N._sprite3D=G$D,G$q.push(G$N)}else G$N._batchIndexEnd=G$A._batchIndexEnd}},G$r._beforeRender=function(G$q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$r._render=function(G$q){var G$r=G$q.renderElement,G$v=G$r._batchIndexStart,G$H=G$r._batchIndexEnd-G$v;G$E.mainContext.drawElements(4,G$H,5123,2*G$v),G$V.drawCall++,G$V.trianglesFaces+=G$H/3},G$r.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},G$r._getVertexBuffer=function(G$q){return void 0===G$q&&(G$q=0),this._vertexBuffer},G$y}(),G$$r=function(G$q){function G$r(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,G$r.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}G$j(G$r,"laya.d3.core.ComponentNode",G$N);var G$v=G$r.prototype;return G$v.addComponent=function(G$q){var G$r,G$v=this._componentsMap.indexOf(G$q);if(-1===G$v)G$r=[],this._componentsMap.push(G$q),this._typeComponentsIndices.push(G$r);else if(G$r=this._typeComponentsIndices[G$v],this._components[G$r[0]].isSingleton)throw new Error("无法单实例创建"+G$q+"组件，"+G$q+"组件已存在！");var G$H=G$A.getInstance(G$q);return G$r.push(this._components.length),this._components.push(G$H),G$H instanceof laya.d3.component.Script&&this._scripts.push(G$H),G$H._initialize(this),G$H},G$v._removeComponent=function(G$q,G$r){var G$v=this._typeComponentsIndices[G$q],G$H=G$v[G$r],G$A=this._components[G$H];this._components.splice(G$H,1),G$A instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(G$A),1),G$v.splice(G$r,1),0===G$v.length&&(this._typeComponentsIndices.splice(G$q,1),this._componentsMap.splice(G$q,1));for(var G$y=0,G$R=this._componentsMap.length;G$y<G$R;G$y++)for(var G$W=(G$v=this._typeComponentsIndices[G$y]).length-1;0<=G$W;G$W--){var G$O=G$v[G$W];if(!(G$H<G$O))break;G$v[G$W]=--G$O}G$A._destroy()},G$v.getComponentByType=function(G$q,G$r){void 0===G$r&&(G$r=0);var G$v=this._componentsMap.indexOf(G$q);return-1===G$v?null:this._components[this._typeComponentsIndices[G$v][G$r]]},G$v.getComponentsByType=function(G$q,G$r){var G$v=this._componentsMap.indexOf(G$q);if(-1!==G$v){var G$H=this._typeComponentsIndices[G$v],G$A=G$H.length;G$r.length=G$A;for(var G$y=0;G$y<G$A;G$y++)G$r[G$y]=this._components[G$H[G$y]]}else G$r.length=0},G$v.getComponentByIndex=function(G$q){return this._components[G$q]},G$v.removeComponentByType=function(G$q,G$r){void 0===G$r&&(G$r=0);var G$v=this._componentsMap.indexOf(G$q);-1!==G$v&&this._removeComponent(G$v,G$r)},G$v.removeComponentsByType=function(G$q){var G$r=this._componentsMap.indexOf(G$q);if(-1!==G$r)for(var G$v=this._typeComponentsIndices[G$r],G$H=0,G$A=G$v.length;G$H<G$A;G$v.length<G$A?G$A--:G$H++)this._removeComponent(G$r,G$H)},G$v.removeAllComponent=function(){for(var G$q=0,G$r=this._componentsMap.length;G$q<G$r;this._componentsMap.length<G$r?G$r--:G$q++)this.removeComponentsByType(this._componentsMap[G$q])},G$v._updateComponents=function(G$q){for(var G$r=0,G$v=this._components.length;G$r<G$v;G$r++){var G$H=this._components[G$r];!G$H.started&&(G$H._start(G$q),G$H.started=!0),G$H.enable&&G$H._update(G$q)}},G$v._lateUpdateComponents=function(G$q){for(var G$r=0;G$r<this._components.length;G$r++){var G$v=this._components[G$r];!G$v.started&&(G$v._start(G$q),G$v.started=!0),G$v.enable&&G$v._lateUpdate(G$q)}},G$v._preRenderUpdateComponents=function(G$q){for(var G$r=0;G$r<this._components.length;G$r++){var G$v=this._components[G$r];!G$v.started&&(G$v._start(G$q),G$v.started=!0),G$v.enable&&G$v._preRenderUpdate(G$q)}},G$v._postRenderUpdateComponents=function(G$q){for(var G$r=0;G$r<this._components.length;G$r++){var G$v=this._components[G$r];!G$v.started&&(G$v._start(G$q),G$v.started=!0),G$v.enable&&G$v._postRenderUpdate(G$q)}},G$r}(),G$Gr=function(G$H){function G$q(){G$q.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new G$Tr,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new G$Wr(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}G$j(G$q,"laya.d3.core.material.BaseMaterial",G$H);var G$r=G$q.prototype;return G$M.imps(G$r,{"laya.d3.core.IClone":!0}),G$r._addShaderDefine=function(G$q){this._shaderDefineValue|=G$q},G$r._removeShaderDefine=function(G$q){this._shaderDefineValue&=~G$q},G$r._addDisablePublicShaderDefine=function(G$q){this._disablePublicShaderDefine|=G$q},G$r._removeDisablePublicShaderDefine=function(G$q){this._disablePublicShaderDefine&=~G$q},G$r._setBuffer=function(G$q,G$r){this._shaderValues.setValue(G$q,G$r),this._values[G$q]=G$r},G$r._getBuffer=function(G$q){return this._values[G$q]},G$r._setMatrix4x4=function(G$q,G$r){this._shaderValues.setValue(G$q,G$r?G$r.elements:null),this._values[G$q]=G$r},G$r._getMatrix4x4=function(G$q){return this._values[G$q]},G$r._setInt=function(G$q,G$r){this._shaderValues.setValue(G$q,G$r),this._values[G$q]=G$r},G$r._getInt=function(G$q){return this._values[G$q]},G$r._setNumber=function(G$q,G$r){this._shaderValues.setValue(G$q,G$r),this._values[G$q]=G$r},G$r._getNumber=function(G$q){return this._values[G$q]},G$r._setBool=function(G$q,G$r){this._shaderValues.setValue(G$q,G$r),this._values[G$q]=G$r},G$r._getBool=function(G$q){return this._values[G$q]},G$r._setVector2=function(G$q,G$r){this._shaderValues.setValue(G$q,G$r?G$r.elements:null),this._values[G$q]=G$r},G$r._getVector2=function(G$q){return this._values[G$q]},G$r._setColor=function(G$q,G$r){this._shaderValues.setValue(G$q,G$r?G$r.elements:null),this._values[G$q]=G$r},G$r._getColor=function(G$q){return this._values[G$q]},G$r._setTexture=function(G$q,G$r){var G$v=this._values[G$q];this._values[G$q]=G$r,this._shaderValues.setValue(G$q,G$r),0<this.referenceCount&&(G$v&&G$v._removeReference(),G$r&&G$r._addReference())},G$r._getTexture=function(G$q){return this._values[G$q]},G$r._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},G$r._getShader=function(G$q,G$r,G$v){var G$H=(G$q|G$r)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(G$H,G$v,this._shaderDefineValue),this._shader},G$r._setRenderStateBlendDepth=function(){var G$q=G$E.mainContext;switch(G$Q.setDepthMask(G$q,this.depthWrite),0===this.depthTest?G$Q.setDepthTest(G$q,!1):(G$Q.setDepthTest(G$q,!0),G$Q.setDepthFunc(G$q,this.depthTest)),this.blend){case 0:G$Q.setBlend(G$q,!1);break;case 1:G$Q.setBlend(G$q,!0),G$Q.setBlendFunc(G$q,this.srcBlend,this.dstBlend);break;case 2:G$Q.setBlend(G$q,!0)}},G$r._setRenderStateFrontFace=function(G$q,G$r){var G$v=G$E.mainContext,G$H=0;switch(this.cull){case 0:G$Q.setCullFace(G$v,!1);break;case 1:G$Q.setCullFace(G$v,!0),G$H=G$q?G$r&&G$r._isFrontFaceInvert?2305:2304:G$r&&G$r._isFrontFaceInvert?2304:2305,G$Q.setFrontFace(G$v,G$H);break;case 2:G$Q.setCullFace(G$v,!0),G$H=G$q?G$r&&G$r._isFrontFaceInvert?2304:2305:G$r&&G$r._isFrontFaceInvert?2305:2304,G$Q.setFrontFace(G$v,G$H)}},G$r.onAsynLoaded=function(G$q,G$r,G$v){var G$H=G$r[0],G$A=G$r[1];switch(G$H.version){case"LAYAMATERIAL:01":var G$y=0,G$R=0,G$W=G$H.props;for(var G$O in G$W)switch(G$O){case"vectors":var G$N=G$W[G$O];for(G$y=0,G$R=G$N.length;G$y<G$R;G$y++){var G$x=G$N[G$y],G$K=G$x.value;switch(G$K.length){case 2:this[G$x.name]=new G$yr(G$K[0],G$K[1]);break;case 3:this[G$x.name]=new G$Rr(G$K[0],G$K[1],G$K[2]);break;case 4:this[G$x.name]=new G$Wr(G$K[0],G$K[1],G$K[2],G$K[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var G$T=G$W[G$O];for(G$y=0,G$R=G$T.length;G$y<G$R;G$y++){var G$j=G$T[G$y],G$D=G$j.path;G$D&&(this[G$j.name]=G$m.getRes(G$A[G$D]))}break;case"defines":var G$g=G$W[G$O];for(G$y=0,G$R=G$g.length;G$y<G$R;G$y++){var G$X=this._shaderCompile.getMaterialDefineByName(G$g[G$y]);this._addShaderDefine(G$X)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[G$O]=G$W[G$O];break;case"renderQueue":switch(G$W[G$O]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[G$O]=G$W[G$O]}break;case"LAYAMATERIAL:02":for(G$O in G$W=G$H.props)switch(G$O){case"vectors":for(G$y=0,G$R=(G$N=G$W[G$O]).length;G$y<G$R;G$y++)switch((G$K=(G$x=G$N[G$y]).value).length){case 2:this[G$x.name]=new G$yr(G$K[0],G$K[1]);break;case 3:this[G$x.name]=new G$Rr(G$K[0],G$K[1],G$K[2]);break;case 4:this[G$x.name]=new G$Wr(G$K[0],G$K[1],G$K[2],G$K[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(G$y=0,G$R=(G$T=G$W[G$O]).length;G$y<G$R;G$y++)(G$D=(G$j=G$T[G$y]).path)&&(this[G$j.name]=G$m.getRes(G$A[G$D]));break;case"defines":for(G$y=0,G$R=(G$g=G$W[G$O]).length;G$y<G$R;G$y++)G$X=this._shaderCompile.getMaterialDefineByName(G$g[G$y]),this._addShaderDefine(G$X);break;default:this[G$O]=G$W[G$O]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},G$r._addReference=function(){G$H.prototype._addReference.call(this);for(var G$q=0,G$r=this._values.length;G$q<G$r;G$q++){var G$v=this._values[G$q];G$v&&G$v instanceof laya.d3.resource.BaseTexture&&G$v._addReference()}},G$r._removeReference=function(){G$H.prototype._removeReference.call(this);for(var G$q=0,G$r=this._values.length;G$q<G$r;G$q++){var G$v=this._values[G$q];G$v&&G$v instanceof laya.d3.resource.BaseTexture&&G$v._removeReference()}},G$r.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},G$r.setShaderName=function(G$q){var G$r=G$Cr.nameKey.getID(G$q);if(-1===G$r)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=G$Vr._preCompileShader[G$r]},G$r.cloneTo=function(G$q){var G$r=G$q;G$r.name=this.name,G$r.cull=this.cull,G$r.blend=this.blend,G$r.srcBlend=this.srcBlend,G$r.dstBlend=this.dstBlend,G$r.srcBlendRGB=this.srcBlendRGB,G$r.dstBlendRGB=this.dstBlendRGB,G$r.srcBlendAlpha=this.srcBlendAlpha,G$r.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(G$r.blendConstColor),G$r.blendEquation=this.blendEquation,G$r.blendEquationRGB=this.blendEquationRGB,G$r.blendEquationAlpha=this.blendEquationAlpha,G$r.depthTest=this.depthTest,G$r.depthWrite=this.depthWrite,G$r.renderQueue=this.renderQueue,G$r._shader=this._shader,G$r._disablePublicShaderDefine=this._disablePublicShaderDefine,G$r._shaderDefineValue=this._shaderDefineValue;var G$v,G$H=0,G$A=G$r._shaderValues;G$r._shaderValues.data.length=this._shaderValues.data.length;var G$y=this._values.length,G$R=G$r._values;for(G$H=0,G$v=G$R.length=G$y;G$H<G$v;G$H++){var G$W=this._values[G$H];if(G$W)if("number"==typeof G$W)G$R[G$H]=G$W,G$A.data[G$H]=G$W;else if("number"==typeof G$W&&Math.floor(G$W)==G$W)G$R[G$H]=G$W,G$A.data[G$H]=G$W;else if("boolean"==typeof G$W)G$R[G$H]=G$W,G$A.data[G$H]=G$W;else if(G$W instanceof laya.d3.math.Vector2){var G$O=G$R[G$H]||(G$R[G$H]=new G$yr);G$W.cloneTo(G$O),G$A.data[G$H]=G$O.elements}else if(G$W instanceof laya.d3.math.Vector3){var G$N=G$R[G$H]||(G$R[G$H]=new G$Rr);G$W.cloneTo(G$N),G$A.data[G$H]=G$N.elements}else if(G$W instanceof laya.d3.math.Vector4){var G$x=G$R[G$H]||(G$R[G$H]=new G$Wr);G$W.cloneTo(G$x),G$A.data[G$H]=G$x.elements}else if(G$W instanceof laya.d3.math.Matrix4x4){var G$K=G$R[G$H]||(G$R[G$H]=new G$qr);G$W.cloneTo(G$K),G$A.data[G$H]=G$K.elements}else G$W instanceof laya.d3.resource.BaseTexture&&(G$R[G$H]=G$W,G$A.data[G$H]=G$W)}},G$r.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$D(0,G$r,"alphaTestValue",function(){return this._getNumber(0)},function(G$q){this._setNumber(0,G$q)}),G$D(0,G$r,"alphaTest",function(){return this._alphaTest},function(G$q){(this._alphaTest=G$q)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),G$q.__init__=function(){G$q.SHADERDEFINE_ALPHATEST=G$q.shaderDefines.registerDefine("ALPHATEST")},G$q.RENDERQUEUE_OPAQUE=2e3,G$q.RENDERQUEUE_ALPHATEST=2450,G$q.RENDERQUEUE_TRANSPARENT=3e3,G$q.CULL_NONE=0,G$q.CULL_FRONT=1,G$q.CULL_BACK=2,G$q.BLEND_DISABLE=0,G$q.BLEND_ENABLE_ALL=1,G$q.BLEND_ENABLE_SEPERATE=2,G$q.BLENDPARAM_ZERO=0,G$q.BLENDPARAM_ONE=1,G$q.BLENDPARAM_SRC_COLOR=768,G$q.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,G$q.BLENDPARAM_DST_COLOR=774,G$q.BLENDPARAM_ONE_MINUS_DST_COLOR=775,G$q.BLENDPARAM_SRC_ALPHA=770,G$q.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,G$q.BLENDPARAM_DST_ALPHA=772,G$q.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,G$q.BLENDPARAM_SRC_ALPHA_SATURATE=776,G$q.BLENDEQUATION_ADD=0,G$q.BLENDEQUATION_SUBTRACT=1,G$q.BLENDEQUATION_REVERSE_SUBTRACT=2,G$q.DEPTHTEST_OFF=0,G$q.DEPTHTEST_NEVER=512,G$q.DEPTHTEST_LESS=513,G$q.DEPTHTEST_EQUAL=514,G$q.DEPTHTEST_LEQUAL=515,G$q.DEPTHTEST_GREATER=516,G$q.DEPTHTEST_NOTEQUAL=517,G$q.DEPTHTEST_GEQUAL=518,G$q.DEPTHTEST_ALWAYS=519,G$q.SHADERDEFINE_ALPHATEST=1,G$q.ALPHATESTVALUE=0,G$K(G$q,["shaderDefines",function(){return this.shaderDefines=new G$xr}]),G$q}(G$X),G$Er=function(G$q){function G$r(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,G$r.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}G$j(G$r,"laya.d3.resource.BaseTexture",G$X);var G$v=G$r.prototype;return G$D(0,G$v,"width",function(){return this._width}),G$D(0,G$v,"repeat",function(){return this._repeat},function(G$q){if(this._repeat!==G$q&&(this._repeat=G$q,this._source)){var G$r=G$E.mainContext;G$Q.bindTexture(G$r,this._type,this._source),G$p.isPOT(this._width,this._height)&&this._repeat?(G$r.texParameteri(this._type,10242,10497),G$r.texParameteri(this._type,10243,10497)):(G$r.texParameteri(this._type,10242,33071),G$r.texParameteri(this._type,10243,33071))}}),G$D(0,G$v,"height",function(){return this._height}),G$D(0,G$v,"magFifter",function(){return this._magFifter},function(G$q){(this._magFifter=G$q)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(G$q)}),G$D(0,G$v,"wrapModeV",function(){return this._wrapModeV}),G$D(0,G$v,"size",function(){return this._size}),G$D(0,G$v,"wrapModeU",function(){return this._wrapModeU}),G$D(0,G$v,"mipmap",function(){return this._mipmap},function(G$q){this._mipmap=G$q,this._mipmap!=G$q&&this._conchTexture&&this._conchTexture.setMipMap(G$q)}),G$D(0,G$v,"minFifter",function(){return this._minFifter},function(G$q){this._minFifter=G$q,this._minFifter!=G$q&&this._conchTexture&&this._conchTexture.setMinFifter(G$q)}),G$D(0,G$v,"format",function(){return this._format}),G$D(0,G$v,"source",function(){return this.activeResource(),this._source}),G$D(0,G$v,"defaulteTexture",function(){return G$Fr.grayTexture}),G$r.WARPMODE_REPEAT=0,G$r.WARPMODE_CLAMP=1,G$r}(),G$Qr=function(G$q){function G$r(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,G$r.__super.call(this),this._boundingBoxCorners=G$H(8,null)}G$j(G$r,"laya.d3.resource.models.BaseMesh",G$X);var G$v=G$r.prototype;return G$v._getPositions=function(){throw new Error("未Override,请重载该属性！")},G$v._generateBoundingObject=function(){this._boundingSphere=new G$hq(new G$Rr,0),G$hq.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new G$iq(new G$Rr,new G$Rr),G$iq.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},G$v.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},G$v.getRenderElement=function(G$q){throw new Error("未Override,请重载该属性！")},G$D(0,G$v,"subMeshCount",function(){return this._subMeshCount}),G$D(0,G$v,"boundingBox",function(){return this._boundingBox}),G$D(0,G$v,"boundingBoxCorners",function(){return this._boundingBoxCorners}),G$D(0,G$v,"boundingSphere",function(){return this._boundingSphere}),G$r}(),G$sr=(function(G$q){function G$r(){G$r.__super.call(this)}G$j(G$r,"laya.d3.component.Script",G$er);var G$v=G$r.prototype;G$v.onTriggerEnter=function(G$q){},G$v.onTriggerExit=function(G$q){},G$v.onTriggerStay=function(G$q){},G$D(0,G$v,"isSingleton",function(){return G$r._isSingleton}),G$r._isSingleton=!1}(),function(G$q){function G$r(G$q){this._owner=null,this._sharedMesh=null,G$r.__super.call(this),this._owner=G$q}G$j(G$r,"laya.d3.core.MeshFilter",G$q);var G$v=G$r.prototype;return G$v._sharedMeshLoaded=function(){this.event("loaded")},G$v._destroy=function(){G$q.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},G$D(0,G$v,"sharedMesh",function(){return this._sharedMesh},function(G$q){var G$r=this._sharedMesh;G$r&&G$r._removeReference(),(this._sharedMesh=G$q)._addReference(),this.event("meshchanged",[this,G$r,G$q]),G$q.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),G$D(0,G$v,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),G$D(0,G$v,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),G$D(0,G$v,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),G$D(0,G$v,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),G$r}(G$pr)),G$Zr=function(G$q){function G$r(G$q){G$r.__super.call(this,G$q),G$q.meshFilter.on("meshchanged",this,this._onMeshChanged)}G$j(G$r,"laya.d3.core.MeshRender",G$Mr);var G$v=G$r.prototype;return G$v._onMeshChanged=function(G$q,G$r,G$v){G$v.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:G$v.once("loaded",this,this._onMeshLoaed)},G$v._onMeshLoaed=function(G$q,G$r){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},G$v._calculateBoundingSphereByInitSphere=function(G$q){var G$r=NaN,G$v=this._owner.transform,G$H=G$v.scale.elements,G$A=Math.abs(G$H[0]),G$y=Math.abs(G$H[1]),G$R=Math.abs(G$H[2]);G$r=G$y<=G$A&&G$R<=G$A?G$A:G$R<=G$y?G$y:G$R,G$Rr.transformCoordinate(G$q.center,G$v.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=G$q.radius*G$r},G$v._calculateBoundBoxByInitCorners=function(G$q){for(var G$r=this._owner.transform.worldMatrix,G$v=0;G$v<8;G$v++)G$Rr.transformCoordinate(G$q[G$v],G$r,G$Mr._tempBoundBoxCorners[G$v]);G$iq.createfromPoints(G$Mr._tempBoundBoxCorners,this._boundingBox)},G$v._calculateBoundingSphere=function(){var G$q=this._owner.meshFilter.sharedMesh;null==G$q||null==G$q.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(G$q.boundingSphere)},G$v._calculateBoundingBox=function(){var G$q=this._owner.meshFilter.sharedMesh;null==G$q||null==G$q.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(G$q.boundingBoxCorners)},G$v._renderUpdate=function(G$q){var G$r=this._owner.transform;if(G$r){this._setShaderValueMatrix4x4(0,G$r.worldMatrix);var G$v=this._owner.getProjectionViewWorldMatrix(G$q);this._setShaderValueMatrix4x4(1,G$v)}else this._setShaderValueMatrix4x4(0,G$qr.DEFAULT),this._setShaderValueMatrix4x4(1,G$q);return G$mr.debugMode&&this._renderRenderableBoundBox(),!0},G$r}(),G$Yr=function(G$r){function G$H(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,G$H.__super.call(this),this._renderState=new G$L,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new G$Tr,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new G$rq,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new G$Rr(.7,.7,.7),this.ambientColor=new G$Rr(.212,.227,.259),G$E.shaderHighPrecision&&this.addShaderDefine(G$Vr.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}G$j(G$H,"laya.d3.core.scene.Scene",G$r);var G$q=G$H.prototype;return G$M.imps(G$q,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),G$q._setUrl=function(G$q){this._url=G$q},G$q._getGroup=function(){return this._group},G$q._setGroup=function(G$q){this._group=G$q},G$q._display=function(){G$M.stage._scenes.push(this),G$M.stage._scenes.sort(G$H._sortScenes);for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++){var G$v=this._childs[G$q];G$v.active&&G$v._activeHierarchy()}},G$q._unDisplay=function(){var G$q=G$M.stage._scenes;G$q.splice(G$q.indexOf(this),1);for(var G$r=0,G$v=this._childs.length;G$r<G$v;G$r++){var G$H=this._childs[G$r];G$H.active&&G$H._inActiveHierarchy()}},G$q._addChild3D=function(G$q){G$q.transform._onWorldTransform(),G$q._setBelongScene(this),this.displayedInStage&&G$q.active&&G$q._activeHierarchy()},G$q._removeChild3D=function(G$q){G$q.transform.parent=null,this.displayedInStage&&G$q.active&&G$q._inActiveHierarchy(),G$q._setUnBelongScene()},G$q.initOctree=function(G$q,G$r,G$v,G$H,G$A){void 0===G$A&&(G$A=6),this.treeSize=new G$Rr(G$q,G$r,G$v),this.treeLevel=G$A,this.treeRoot=new G$i(this,0),this.treeRoot.init(G$H,this.treeSize)},G$q._prepareUpdateToRenderState=function(G$q,G$r){G$r.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,G$r.scene=this},G$q._prepareSceneToRender=function(G$q){var G$r=this._lights.length;if(0<G$r)for(var G$v=0,G$H=0;G$H<G$r&&!(this._lights[G$H]._prepareToScene(G$q)&&++G$v>=this._enableLightCount);G$H++);},G$q._updateChilds=function(G$q){for(var G$r=0,G$v=this._childs.length;G$r<G$v;++G$r)this._childs[G$r]._update(G$q)},G$q._preRenderScene=function(G$q,G$r,G$v){var G$H,G$A=G$r._viewMatrix,G$y=G$r._projectionMatrix,G$R=G$r._projectionViewMatrix,G$W=0,G$O=G$r.camera;for(G$O.useOcclusionCulling?this.treeRoot?G$vq.renderObjectCullingOctree(G$v,this,G$O,G$A,G$y,G$R):G$vq.renderObjectCulling(G$v,this,G$O,G$A,G$y,G$R):G$vq.renderObjectCullingNoBoundFrustum(this,G$O,G$A,G$y,G$R),G$W=0,G$H=this._quenes.length;G$W<G$H;G$W++)this._quenes[G$W]&&this._quenes[G$W]._preRender(G$r)},G$q._clear=function(G$q,G$r){var G$v=G$r._viewport,G$H=G$r.camera,G$A=G$v.x,G$y=G$H.renderTargetSize.height-G$v.y-G$v.height,G$R=G$v.width,G$W=G$v.height;G$q.viewport(G$A,G$y,G$R,G$W);var G$O=256,G$N=G$H.renderTarget;switch(G$H.clearFlag){case 0:var G$x=G$H.clearColor;if(G$x){G$q.enable(3089),G$q.scissor(G$A,G$y,G$R,G$W);var G$K=G$x.elements;G$q.clearColor(G$K[0],G$K[1],G$K[2],G$K[3]),G$O|=16384}if(G$N)switch(G$x||(G$O=16384),G$N.depthStencilFormat){case 33189:G$O|=256;break;case 36168:G$O|=1024;break;case 34041:G$O|=256,G$O|=1024}G$q.clear(G$O),G$x&&G$q.disable(3089);break;case 1:case 2:if(G$N)switch(G$O=16384,G$N.depthStencilFormat){case 33189:G$O|=256;break;case 36168:G$O|=1024;break;case 34041:G$O|=256,G$O|=1024}G$q.clear(G$O);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},G$q._renderScene=function(G$q,G$r){var G$v,G$H,G$A=G$r.camera,G$y=0;for(G$y=0;G$y<2;G$y++)(G$H=this._quenes[G$y])&&(G$A.renderTarget?G$H._render(G$r,!0):G$H._render(G$r,!1));if(1===G$A.clearFlag){var G$R=G$A.sky;G$R&&(G$Q.setCullFace(G$q,!1),G$Q.setDepthFunc(G$q,515),G$Q.setDepthMask(G$q,!1),G$R._render(G$r),G$Q.setDepthFunc(G$q,513),G$Q.setDepthMask(G$q,!0))}for(G$y=2,G$v=this._quenes.length;G$y<G$v;G$y++)(G$H=this._quenes[G$y])&&(G$H._sortAlpha(G$r.camera.transform.position),G$A.renderTarget?G$H._render(G$r,!0):G$H._render(G$r,!1))},G$q._set3DRenderConfig=function(G$q){G$q.disable(3042),G$Q._blend=!1,G$q.blendFunc(770,771),G$Q._sFactor=770,G$Q._dFactor=771,G$q.disable(2929),G$Q._depthTest=!1,G$q.enable(2884),G$Q._cullFace=!0,G$q.depthMask(1),G$Q._depthMask=!0,G$q.frontFace(2304),G$Q._frontFace=2304},G$q._set2DRenderConfig=function(G$q){G$Q.setBlend(G$q,!0),G$Q.setBlendFunc(G$q,1,771),G$Q.setDepthTest(G$q,!1),G$Q.setCullFace(G$q,!1),G$Q.setDepthMask(G$q,!0),G$Q.setFrontFace(G$q,2305),G$q.viewport(0,0,G$x.width,G$x.height)},G$q._parseCustomProps=function(G$q,G$r,G$v,G$H){var G$A=G$H.customProps.lightmaps,G$y=G$A.length,G$R=this._lightmaps;G$R.length=G$y;for(var G$W=0;G$W<G$y;G$W++)G$R[G$W]=G$m.getRes(G$r[G$A[G$W].replace(".exr",".png")]);this.setlightmaps(G$R);var G$O=G$H.customProps.ambientColor;G$O&&(this.ambientColor=new G$Rr(G$O[0],G$O[1],G$O[2]));var G$N=G$H.customProps.fogColor;G$N&&(this.fogColor=new G$Rr(G$N[0],G$N[1],G$N[2]))},G$q._addLight=function(G$q){this._lights.indexOf(G$q)<0&&this._lights.push(G$q)},G$q._removeLight=function(G$q){var G$r=this._lights.indexOf(G$q);0<=G$r&&this._lights.splice(G$r,1)},G$q._updateScene=function(){var G$q=this._renderState;this._prepareUpdateToRenderState(G$E.mainContext,G$q),this._updateComponents(G$q),this._updateChilds(G$q),this._lateUpdateComponents(G$q),this._time+=G$q.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},G$q._updateSceneConch=function(){var G$q=this._renderState;this._prepareUpdateToRenderState(G$E.mainContext,G$q),this._updateComponents(G$q),this._lateUpdateComponents(G$q),this._prepareSceneToRender(G$q);for(var G$r=0,G$v=this._cameraPool.length;G$r<G$v;G$r++){var G$H=this._cameraPool[G$r];(G$q.camera=G$H)._prepareCameraToRender()}},G$q._preRenderShadow=function(G$q,G$r,G$v,G$H,G$A){this.treeRoot?G$vq.renderShadowObjectCullingOctree(this,G$r,G$v,G$H,G$A):G$vq.renderShadowObjectCulling(this,G$r,G$v,G$H,G$A);for(var G$y=0,G$R=G$v.length;G$y<G$R;G$y++)G$v[G$y]&&G$v[G$y]._preRender(G$q)},G$q._renderShadowMap=function(G$q,G$r,G$v){var G$H=this.parallelSplitShadowMaps[0];G$H._calcAllLightCameraInfo(G$v);var G$A,G$y,G$R,G$W=G$H.PSSMNum;if(this._preRenderShadow(G$r,G$H._lightCulling,G$H._shadowQuenes,G$H._lightVPMatrix[0],G$W),this.addShaderDefine(G$jr.SHADERDEFINE_CAST_SHADOW),1<G$W)for(var G$O=0;G$O<G$W;G$O++)G$A=G$H.getRenderTarget(G$O+1),G$H.beginRenderTarget(G$O+1),G$q.clearColor(1,1,1,1),G$q.clear(16640),G$q.viewport(0,0,G$A.width,G$A.height),G$r.camera=G$R=G$H.getLightCamera(G$O),G$R._prepareCameraToRender(),G$R._prepareCameraViewProject(G$R.viewMatrix,G$R.projectionMatrix),G$r._projectionViewMatrix=G$H._lightVPMatrix[G$O+1],(G$y=G$H._shadowQuenes[G$O])._preRender(G$r),G$y._renderShadow(G$r,!1),G$H.endRenderTarget(G$O+1);else G$A=G$H.getRenderTarget(1),G$H.beginRenderTarget(1),G$q.clearColor(1,1,1,1),G$q.clear(16640),G$q.viewport(0,0,G$A.width,G$A.height),G$r.camera=G$R=G$H.getLightCamera(0),G$R._prepareCameraToRender(),G$R._prepareCameraViewProject(G$R.viewMatrix,G$R.projectionMatrix),G$r._projectionViewMatrix=G$H._lightVPMatrix[0],(G$y=G$H._shadowQuenes[0])._preRender(G$r),G$y._renderShadow(G$r,!0),G$H.endRenderTarget(1);this.removeShaderDefine(G$jr.SHADERDEFINE_CAST_SHADOW)},G$q.addTreeNode=function(G$q){this.treeRoot.addTreeNode(G$q)},G$q.removeTreeNode=function(G$q){this.treeSize&&G$q._treeNode&&G$q._treeNode.removeObject(G$q)},G$q.setlightmaps=function(G$q){this._lightmaps=G$q;for(var G$r=0,G$v=this._renderableSprite3Ds.length;G$r<G$v;G$r++)this._renderableSprite3Ds[G$r]._render._applyLightMapParams()},G$q.getlightmaps=function(){return this._lightmaps},G$q.addChildAt=function(G$q,G$r){if(!(G$q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(G$q&&G$q.__className));if(!G$q||this.destroyed||G$q===this)return G$q;if(G$q.zOrder&&this._set$P("hasZorder",!0),0<=G$r&&G$r<=this._childs.length){if(G$q._parent===this){var G$v=this.getChildIndex(G$q);this._childs.splice(G$v,1),this._childs.splice(G$r,0,G$q),this.conchModel&&(this.conchModel.removeChild(G$q.conchModel),this.conchModel.addChildAt(G$q.conchModel,G$r)),this._childChanged()}else G$q.parent&&G$q.parent.removeChild(G$q),this._childs===G$N.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(G$r,0,G$q),this.conchModel&&this.conchModel.addChildAt(G$q.conchModel,G$r),(G$q.parent=this)._addChild3D(G$q);return G$q}throw new Error("appendChildAt:The index is out of bounds")},G$q.addChild=function(G$q){if(!(G$q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!G$q||this.destroyed||G$q===this)return G$q;if(G$q.zOrder&&this._set$P("hasZorder",!0),G$q._parent===this){var G$r=this.getChildIndex(G$q);G$r!==this._childs.length-1&&(this._childs.splice(G$r,1),this._childs.push(G$q),this.conchModel&&(this.conchModel.removeChild(G$q.conchModel),this.conchModel.addChildAt(G$q.conchModel,this._childs.length-1)),this._childChanged())}else G$q.parent&&G$q.parent.removeChild(G$q),this._childs===G$N.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(G$q),this.conchModel&&this.conchModel.addChildAt(G$q.conchModel,this._childs.length-1),(G$q.parent=this)._childChanged(),this._addChild3D(G$q);return G$q},G$q.removeChildAt=function(G$q){var G$r=this.getChildAt(G$q);return G$r&&(this._removeChild3D(G$r),this._childs.splice(G$q,1),this.conchModel&&this.conchModel.removeChild(G$r.conchModel),G$r.parent=null),G$r},G$q.removeChildren=function(G$q,G$r){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=2147483647),this._childs&&0<this._childs.length){var G$v=this._childs;if(0===G$q&&G$y<=G$r){var G$H=G$v;this._childs=G$N.ARRAY_EMPTY}else G$H=G$v.splice(G$q,G$r-G$q);for(var G$A=0,G$y=G$H.length;G$A<G$y;G$A++)this._removeChild3D(G$H[G$A]),G$H[G$A].parent=null,this.conchModel&&this.conchModel.removeChild(G$H[G$A].conchModel)}return this},G$q.addFrustumCullingObject=function(G$q){this.treeRoot?this.addTreeNode(G$q):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(G$q):this._cullingRenders[this._cullingRendersLength]=G$q,G$q._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},G$q.removeFrustumCullingObject=function(G$q){if(this.treeRoot)this.removeTreeNode(G$q);else{this._cullingRendersLength--;var G$r=G$q._indexInSceneFrustumCullingObjects;if(G$r!==this._cullingRendersLength){var G$v=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[G$r]=G$v)._indexInSceneFrustumCullingObjects=G$r,G$q._indexInSceneFrustumCullingObjects=-1}}},G$q.getRenderQueue=function(G$q){return G$q<3e3?this._quenes[1]||(this._quenes[1]=new G$l(this)):this._quenes[2]||(this._quenes[2]=new G$l(this))},G$q.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new G$l(this)},G$q.addShaderDefine=function(G$q){this._shaderDefineValue|=G$q},G$q.removeShaderDefine=function(G$q){this._shaderDefineValue&=~G$q},G$q.addScript=function(G$q){return this._addComponent(G$q)},G$q.getScriptByType=function(G$q,G$r){return void 0===G$r&&(G$r=0),this._getComponentByType(G$q,G$r)},G$q.getScriptsByType=function(G$q,G$r){this._getComponentsByType(G$q,G$r)},G$q.getScriptByIndex=function(G$q){return this._getComponentByIndex(G$q)},G$q.removeScriptByType=function(G$q,G$r){void 0===G$r&&(G$r=0),this._removeComponentByType(G$q,G$r)},G$q.removeScriptsByType=function(G$q){this._removeComponentByType(G$q)},G$q.removeAllScript=function(){this._removeAllComponent()},G$q.render=function(G$q,G$r,G$v){(G$g._context.ctx._renderKey=0)<this._childs.length&&G$q.addRenderObject(this)},G$q.renderSubmit=function(){var G$q=G$E.mainContext,G$r=this._renderState;this._set3DRenderConfig(G$q),this._prepareSceneToRender(this._renderState);var G$v,G$H=0,G$A=0;if(G$mr.debugMode||G$i.debugMode)for(G$H=0,G$A=this._cameraPool.length;G$H<G$A;G$H++)G$v=this._cameraPool[G$H],G$mr._debugPhasorSprite.begin(1,G$v),G$v.activeInHierarchy&&G$v._renderCamera(G$q,G$r,this),G$mr._debugPhasorSprite.end();else for(G$H=0,G$A=this._cameraPool.length;G$H<G$A;G$H++)(G$v=this._cameraPool[G$H]).activeInHierarchy&&G$v._renderCamera(G$q,G$r,this);return this._set2DRenderConfig(G$q),1},G$q.onAsynLoaded=function(G$q,G$r,G$v){var G$H=G$r[0];if("Scene"!==G$H.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var G$A=G$r[1];G$Xr._createNodeByJson(this,G$H,this,G$A),this.event("hierarchyloaded",[this]),this.__loaded=!0},G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),this.destroyed||(G$r.prototype.destroy.call(this,G$q),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,G$m.clearRes(this.url),this.loaded||G$mr._cancelLoadByUrl(this.url))},G$q.getRenderType=function(){return 0},G$q.releaseRender=function(){},G$q._addComponent=function(G$q){var G$r,G$v=this._componentsMap.indexOf(G$q);if(-1===G$v)G$r=[],this._componentsMap.push(G$q),this._typeComponentsIndices.push(G$r);else if(G$r=this._typeComponentsIndices[G$v],this._components[G$r[0]].isSingleton)throw new Error("无法单实例创建"+G$q+"组件，"+G$q+"组件已存在！");var G$H=G$A.getInstance(G$q);G$r.push(this._components.length),this._components.push(G$H);return G$H._initialize(this),G$H},G$q._removeComponent=function(G$q,G$r){var G$v=this._typeComponentsIndices[G$q],G$H=G$v[G$r],G$A=this._components[G$H];this._components.splice(G$H,1),G$v.splice(G$r,1),0===G$v.length&&(this._typeComponentsIndices.splice(G$q,1),this._componentsMap.splice(G$q,1));for(var G$y=0,G$R=this._componentsMap.length;G$y<G$R;G$y++)for(var G$W=(G$v=this._typeComponentsIndices[G$y]).length-1;0<=G$W;G$W--){var G$O=G$v[G$W];if(!(G$H<G$O))break;G$v[G$W]=--G$O}G$A._destroy()},G$q._getComponentByType=function(G$q,G$r){void 0===G$r&&(G$r=0);var G$v=this._componentsMap.indexOf(G$q);return-1===G$v?null:this._components[this._typeComponentsIndices[G$v][G$r]]},G$q._getComponentsByType=function(G$q,G$r){var G$v=this._componentsMap.indexOf(G$q);if(-1!==G$v){var G$H=this._typeComponentsIndices[G$v],G$A=G$H.length;G$r.length=G$A;for(var G$y=0;G$y<G$A;G$y++)G$r[G$y]=this._components[G$H[G$y]]}else G$r.length=0},G$q._getComponentByIndex=function(G$q){return this._components[G$q]},G$q._removeComponentByType=function(G$q,G$r){void 0===G$r&&(G$r=0);var G$v=this._componentsMap.indexOf(G$q);-1!==G$v&&this._removeComponent(G$v,G$r)},G$q._removeComponentsByType=function(G$q){var G$r=this._componentsMap.indexOf(G$q);if(-1!==G$r)for(var G$v=this._typeComponentsIndices[G$r],G$H=0,G$A=G$v.length;G$H<G$A;G$v.length<G$A?G$A--:G$H++)this._removeComponent(G$r,G$H)},G$q._removeAllComponent=function(){for(var G$q=0,G$r=this._componentsMap.length;G$q<G$r;this._componentsMap.length<G$r?G$r--:G$q++)this._removeComponentsByType(this._componentsMap[G$q])},G$q._updateComponents=function(G$q){for(var G$r=0,G$v=this._components.length;G$r<G$v;G$r++){var G$H=this._components[G$r];!G$H.started&&(G$H._start(G$q),G$H.started=!0),G$H.enable&&G$H._update(G$q)}},G$q._lateUpdateComponents=function(G$q){for(var G$r=0;G$r<this._components.length;G$r++){var G$v=this._components[G$r];!G$v.started&&(G$v._start(G$q),G$v.started=!0),G$v.enable&&G$v._lateUpdate(G$q)}},G$q._preRenderUpdateComponents=function(G$q){for(var G$r=0;G$r<this._components.length;G$r++){var G$v=this._components[G$r];!G$v.started&&(G$v._start(G$q),G$v.started=!0),G$v.enable&&G$v._preRenderUpdate(G$q)}},G$q._postRenderUpdateComponents=function(G$q){for(var G$r=0;G$r<this._components.length;G$r++){var G$v=this._components[G$r];!G$v.started&&(G$v._start(G$q),G$v.started=!0),G$v.enable&&G$v._postRenderUpdate(G$q)}},G$D(0,G$q,"_loaded",null,function(G$q){this.__loaded=G$q}),G$D(0,G$q,"fogColor",function(){return this._fogColor},function(G$q){this._fogColor=G$q,this._shaderValues.setValue(0,G$q.elements)}),G$D(0,G$q,"enableFog",function(){return this._enableFog},function(G$q){this._enableFog!==G$q&&((this._enableFog=G$q)?(this.addShaderDefine(G$Vr.SHADERDEFINE_FOG),this.removeShaderDefine(G$Vr.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(G$Vr.SHADERDEFINE_FOG))}),G$D(0,G$q,"url",function(){return this._url}),G$D(0,G$q,"loaded",function(){return this.__loaded}),G$D(0,G$q,"enableDepthFog",function(){return this._enableDepthFog},function(G$q){this._enableDepthFog!=G$q&&((this._enableDepthFog=G$q)?(this.addShaderDefine(G$Vr.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(G$Vr.SHADERDEFINE_FOG)):this.removeShaderDefine(G$Vr.SAHDERDEFINE_DEPTHFOG))}),G$D(0,G$q,"fogStart",function(){return this._fogStart},function(G$q){this._fogStart=G$q,this._shaderValues.setValue(1,G$q)}),G$D(0,G$q,"fogRange",function(){return this._fogRange},function(G$q){this._fogRange=G$q,this._shaderValues.setValue(2,G$q)}),G$D(0,G$q,"ambientColor",function(){return this._ambientColor},function(G$q){this._ambientColor=G$q,this._shaderValues.setValue(21,G$q.elements)}),G$D(0,G$q,"scene",function(){return this}),G$D(0,G$q,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),G$H._sortScenes=function(G$q,G$r){if(G$q.parent!==G$M.stage||G$r.parent!==G$M.stage)return G$q.parent!==G$M.stage&&G$r.parent!==G$M.stage?G$H._sortScenes(G$q.parent,G$r.parent):G$q.parent===G$M.stage?-1:1;var G$v=G$M.stage._childs;return G$v.indexOf(G$q)-G$v.indexOf(G$r)},G$H.load=function(G$q){return G$M.loader.create(G$q,null,null,G$H)},G$H.FOGCOLOR=0,G$H.FOGSTART=1,G$H.FOGRANGE=2,G$H.LIGHTDIRECTION=3,G$H.LIGHTDIRCOLOR=4,G$H.POINTLIGHTPOS=5,G$H.POINTLIGHTRANGE=6,G$H.POINTLIGHTATTENUATION=7,G$H.POINTLIGHTCOLOR=8,G$H.SPOTLIGHTPOS=9,G$H.SPOTLIGHTDIRECTION=10,G$H.SPOTLIGHTSPOT=11,G$H.SPOTLIGHTRANGE=12,G$H.SPOTLIGHTATTENUATION=13,G$H.SPOTLIGHTCOLOR=14,G$H.SHADOWDISTANCE=15,G$H.SHADOWLIGHTVIEWPROJECT=16,G$H.SHADOWMAPPCFOFFSET=17,G$H.SHADOWMAPTEXTURE1=18,G$H.SHADOWMAPTEXTURE2=19,G$H.SHADOWMAPTEXTURE3=20,G$H.AMBIENTCOLOR=21,G$H.TIME=22,G$H}(G$P),G$or=function(G$q){function G$r(G$q){G$r.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new G$qr,this._shaderValues=new G$Tr,this._colliders=[],this._id=++G$r._uniqueIDCounter,this._transform=new G$zr(this),this.name=G$q||"Sprite3D-"+G$r._nameNumberCounter++,this.layer=G$Z.currentCreationLayer,this.active=!0}G$j(G$r,"laya.d3.core.Sprite3D",G$$r);var G$v=G$r.prototype;return G$M.imps(G$v,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),G$v._setUrl=function(G$q){this._url=G$q},G$v._getGroup=function(){return this._group},G$v._setGroup=function(G$q){this._group=G$q},G$v._addChild3D=function(G$q){G$q.transform.parent=this.transform,this._hierarchyAnimator&&(!G$q._hierarchyAnimator&&G$q._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(G$q,!0,[G$q.name])),this._scene&&(G$q._setBelongScene(this._scene),this._activeInHierarchy&&G$q._active&&G$q._activeHierarchy())},G$v._removeChild3D=function(G$q){G$q.transform.parent=null,this._scene&&(this._activeInHierarchy&&G$q._active&&G$q._inActiveHierarchy(),G$q._setUnBelongScene()),this._hierarchyAnimator&&(G$q._hierarchyAnimator==this._hierarchyAnimator&&G$q._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(G$q,!1,[G$q.name]))},G$v._parseBaseCustomProps=function(G$q){var G$r=this.transform.localPosition;G$q.translate?(G$r.fromArray(G$q.translate),G$r.x*=100,G$r.y*=100,G$r.z*=100):G$r.elements.fill(0),this.transform.localPosition=G$r;var G$v=this.transform.localRotation;G$q.rotation?G$v.fromArray(G$q.rotation):G$v.fromArray([0,0,0,-1]),this.transform.localRotation=G$v;var G$H=this.transform.localScale;G$q.scale?G$H.fromArray(G$q.scale):G$H.elements.fill(1),this.transform.localScale=G$H;var G$A=G$q.layer;null!=G$A&&(this.layer=G$Z.getLayerByNumber(G$A))},G$v._parseCustomComponent=function(G$q,G$r,G$v){for(var G$H in G$v){var G$A=G$v[G$H];switch(G$H){case"Animator":var G$y=this.addComponent(Animator);if(G$A.avatarPath)G$y.avatar=G$m.getRes(G$r[G$A.avatarPath]);else{var G$R=G$A.avatar;if(G$R){G$y.avatar=G$m.getRes(G$r[G$R.path]);var G$W=G$R.linkSprites;G$W&&G$q.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[G$y,G$W])}}for(var G$O=G$A.clipPaths,G$N=G$O.length,G$x=0;G$x<G$N;G$x++)G$y.addClip(G$m.getRes(G$r[G$O[G$x]]));G$y.clip=G$m.getRes(G$r[G$O[0]]);var G$K=G$A.playOnWake;void 0!==G$K&&(G$y.playOnWake=G$K);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var G$T=this.addComponent(SphereCollider);G$T.isTrigger=G$A.isTrigger;var G$j=G$T.center;G$j.fromArray(G$A.center),G$T.center=G$j,G$T.radius=G$A.radius;break;case"BoxCollider":var G$D=this.addComponent(BoxCollider);G$D.isTrigger=G$A.isTrigger,G$D.center.fromArray(G$A.center);var G$g=G$D.size;G$g.fromArray(G$A.size),G$D.size=G$g;break;case"MeshCollider":this.addComponent(MeshCollider)}}},G$v._onRootNodeHierarchyLoaded=function(G$q,G$r){for(var G$v in G$r){for(var G$H=this,G$A=G$r[G$v],G$y=0,G$R=G$A.length;G$y<G$R;G$y++){var G$W=G$A[G$y];if(""===G$W)break;if(!(G$H=G$H.getChildByName(G$W)))break}G$H&&G$q.linkSprite3DToAvatarNode(G$v,G$H)}},G$v._setHierarchyAnimator=function(G$q,G$r){this._changeHierarchyAnimator(G$q);for(var G$v=0,G$H=this._childs.length;G$v<G$H;G$v++){var G$A=this._childs[G$v];G$A._hierarchyAnimator==G$r&&G$A._setHierarchyAnimator(G$q,G$r)}},G$v._clearHierarchyAnimator=function(G$q,G$r){this._changeHierarchyAnimator(G$r);for(var G$v=0,G$H=this._childs.length;G$v<G$H;G$v++){var G$A=this._childs[G$v];G$A._hierarchyAnimator==G$q&&G$A._clearHierarchyAnimator(G$q,G$r)}},G$v._getAnimatorToLinkSprite3D=function(G$q,G$r,G$v){var G$H=this.getComponentByType(Animator);if(G$H&&(G$H.avatar?G$H.avatar._version||G$q._setAnimatorToLinkAvatar(G$H,G$r):G$q._setAnimatorToLinkSprite3DNoAvatar(G$H,G$r,G$v)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){G$v.unshift(this._parent.name);var G$A=this._parent;G$A._hierarchyAnimator&&G$A._getAnimatorToLinkSprite3D(G$q,G$r,G$v)}},G$v._setAnimatorToLinkSprite3DNoAvatar=function(G$q,G$r,G$v){var G$H=0,G$A=0;for(G$H=0,G$A=G$q.getClipCount();G$H<G$A;G$H++)G$q._handleSpriteOwnersBySprite(G$H,G$r,G$v,this);for(G$H=0,G$A=this._childs.length;G$H<G$A;G$H++){var G$y=this._childs[G$H],G$R=G$v.length;G$v.push(G$y.name),G$y._setAnimatorToLinkSprite3DNoAvatar(G$q,G$r,G$v),G$v.splice(G$R,1)}},G$v._changeHierarchyAnimator=function(G$q){this._hierarchyAnimator=G$q},G$v._isLinkSpriteToAnimationNode=function(G$q,G$r,G$v){var G$H=G$q._avatarNodes.indexOf(G$r),G$A=G$q._cacheSpriteToNodesMap;if(G$v)this._transform.dummy=G$r.transform,G$q._cacheNodesToSpriteMap[G$H]=G$A.length,G$A.push(G$H);else{this._transform.dummy=null;var G$y=G$q._cacheNodesToSpriteMap[G$H];G$q._cacheNodesToSpriteMap[G$H]=null,G$A.splice(G$y,1)}},G$v._setBelongScene=function(G$q){this._scene=G$q;for(var G$r=0,G$v=this._childs.length;G$r<G$v;G$r++)this._childs[G$r]._setBelongScene(G$q)},G$v._setUnBelongScene=function(){this._scene=null;for(var G$q=0,G$r=this._childs.length;G$q<G$r;G$q++)this._childs[G$q]._setUnBelongScene()},G$v._activeHierarchy=function(){var G$q=0,G$r=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),G$q=0,G$r=this._colliders.length;G$q<G$r;G$q++)this._layer._addCollider(this._colliders[G$q]);for(this.event("activeinhierarchychanged",!0),G$q=0,G$r=this._childs.length;G$q<G$r;G$q++){var G$v=this._childs[G$q];G$v._active&&G$v._activeHierarchy()}},G$v._inActiveHierarchy=function(){var G$q=0,G$r=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),G$q=0,G$r=this._colliders.length;G$q<G$r;G$q++){var G$v=this._colliders[G$q];G$v._clearCollsionMap(),this._layer._removeCollider(G$v)}for(this.event("activeinhierarchychanged",!1),G$q=0,G$r=this._childs.length;G$q<G$r;G$q++){var G$H=this._childs[G$q];G$H._active&&G$H._inActiveHierarchy()}},G$v.addComponent=function(G$q){var G$r,G$v=this._componentsMap.indexOf(G$q);if(-1===G$v)G$r=[],this._componentsMap.push(G$q),this._typeComponentsIndices.push(G$r);else if(G$r=this._typeComponentsIndices[G$v],this._components[G$r[0]].isSingleton)throw new Error("无法单实例创建"+G$q+"组件，"+G$q+"组件已存在！");var G$H=G$A.getInstance(G$q);return G$r.push(this._components.length),this._components.push(G$H),G$H instanceof laya.d3.component.Script&&this._scripts.push(G$H),G$H._initialize(this),G$H},G$v._removeComponent=function(G$q,G$r){var G$v,G$H=0,G$A=this._typeComponentsIndices[G$q],G$y=G$A[G$r],G$R=this._components[G$y];for(G$R instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(G$R),1),G$A.splice(G$r,1),0===G$A.length&&(this._typeComponentsIndices.splice(G$q,1),this._componentsMap.splice(G$q,1)),G$H=0,G$v=this._componentsMap.length;G$H<G$v;G$H++)for(var G$W=(G$A=this._typeComponentsIndices[G$H]).length-1;0<=G$W;G$W--){var G$O=G$A[G$W];if(!(G$y<G$O))break;G$A[G$W]=--G$O}G$R._destroy()},G$v._clearSelfRenderObjects=function(){},G$v._addSelfRenderObjects=function(){},G$v._parseCustomProps=function(G$q,G$r,G$v,G$H){},G$v._updateChilds=function(G$q){var G$r=this._childs.length;if(0!==G$r)for(var G$v=0;G$v<G$r;++G$v)this._childs[G$v]._update(G$q)},G$v._getSortID=function(G$q,G$r){return 1e3*G$r.id+G$q._getVertexBuffer().vertexDeclaration.id},G$v._update=function(G$q){(G$q.owner=this)._activeInHierarchy&&(this._updateComponents(G$q),this._lateUpdateComponents(G$q),G$V.spriteCount++,this._childs.length&&this._updateChilds(G$q))},G$v.getProjectionViewWorldMatrix=function(G$q){return G$qr.multiply(G$q,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},G$v.loadHierarchy=function(G$q){this.addChild(laya.d3.core.Sprite3D.load(G$q))},G$v.addChildAt=function(G$q,G$r){if(!(G$q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!G$q||this.destroyed||G$q===this)return G$q;if(G$q.zOrder&&this._set$P("hasZorder",!0),0<=G$r&&G$r<=this._childs.length){if(G$q._parent===this){var G$v=this.getChildIndex(G$q);this._childs.splice(G$v,1),this._childs.splice(G$r,0,G$q),this.conchModel&&(this.conchModel.removeChild(G$q.conchModel),this.conchModel.addChildAt(G$q.conchModel,G$r)),this._childChanged()}else G$q.parent&&G$q.parent.removeChild(G$q),this._childs===G$N.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(G$r,0,G$q),this.conchModel&&this.conchModel.addChildAt(G$q.conchModel,G$r),(G$q.parent=this)._addChild3D(G$q);return G$q}throw new Error("appendChildAt:The index is out of bounds")},G$v.addChild=function(G$q){if(!(G$q instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!G$q||this.destroyed||G$q===this)return G$q;if(G$q.zOrder&&this._set$P("hasZorder",!0),G$q._parent===this){var G$r=this.getChildIndex(G$q);G$r!==this._childs.length-1&&(this._childs.splice(G$r,1),this._childs.push(G$q),this.conchModel&&(this.conchModel.removeChild(G$q.conchModel),this.conchModel.addChildAt(G$q.conchModel,this._childs.length-1)),this._childChanged())}else G$q.parent&&G$q.parent.removeChild(G$q),this._childs===G$N.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(G$q),this.conchModel&&this.conchModel.addChildAt(G$q.conchModel,this._childs.length-1),(G$q.parent=this)._childChanged(),this._addChild3D(G$q);return G$q},G$v.removeChildAt=function(G$q){var G$r=this.getChildAt(G$q);return G$r&&(this._removeChild3D(G$r),this._childs.splice(G$q,1),this.conchModel&&this.conchModel.removeChild(G$r.conchModel),G$r.parent=null),G$r},G$v.removeChildren=function(G$q,G$r){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=2147483647),this._childs&&0<this._childs.length){var G$v=this._childs;if(0===G$q&&G$y<=G$r){var G$H=G$v;this._childs=G$N.ARRAY_EMPTY}else G$H=G$v.splice(G$q,G$r-G$q);for(var G$A=0,G$y=G$H.length;G$A<G$y;G$A++)this._removeChild3D(G$H[G$A]),G$H[G$A].parent=null,this.conchModel&&this.conchModel.removeChild(G$H[G$A].conchModel)}return this},G$v.onAsynLoaded=function(G$q,G$r,G$v){var G$H=G$r[0];if("Sprite3D"!==G$H.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var G$A=G$r[1];G$Xr._createNodeByJson(this,G$H,this,G$A),this.event("hierarchyloaded",[this]),this.__loaded=!0},G$v.cloneTo=function(G$q){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var G$r=G$q;G$r.name=this.name,G$r._destroyed=this._destroyed,G$r.timer=this.timer,G$r._$P=this._$P,G$r.active=this._active;var G$v=G$r.transform.localPosition;this.transform.localPosition.cloneTo(G$v),G$r.transform.localPosition=G$v;var G$H=G$r.transform.localRotation;this.transform.localRotation.cloneTo(G$H),G$r.transform.localRotation=G$H;var G$A=G$r.transform.localScale;this.transform.localScale.cloneTo(G$A),G$r.transform.localScale=G$A,G$r.isStatic=this.isStatic;var G$y=0,G$R=0;for(G$y=0,G$R=this._componentsMap.length;G$y<G$R;G$y++){var G$W=G$r.addComponent(this._componentsMap[G$y]);this._components[G$y]._cloneTo(G$W)}for(G$y=0,G$R=this._childs.length;G$y<G$R;G$y++)G$r.addChild(this._childs[G$y].clone());var G$O=G$r.getComponentByType(Animator);if(G$O){var G$N=G$O._linkSpritesData;if(G$N)for(var G$x in G$N){for(var G$K=G$N[G$x],G$T=G$r,G$j=0,G$D=G$K.length;G$j<G$D&&(G$T=G$T.getChildByName(G$K[G$j]));G$j++);if(G$T){var G$g=G$O._avatarNodeMap[G$x];G$T._isLinkSpriteToAnimationNode(G$O,G$g,!0)}}}},G$v.clone=function(){var G$q=new this.constructor;return this.cloneTo(G$q),G$q},G$v.destroy=function(G$q){if(void 0===G$q&&(G$q=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,G$q);var G$r,G$v=0;for(G$v=0,G$r=this._components.length;G$v<G$r;G$v++)this._components[G$v]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,G$m.clearRes(this.url),this.loaded||G$mr._cancelLoadByUrl(this.url)}},G$v._handleSpriteToAvatar=function(G$q,G$r){G$q._avatarNodes;var G$v=G$q._avatarNodeMap[this.name];G$v&&G$v.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(G$q,G$v,G$r)},G$v._setAnimatorToLinkAvatar=function(G$q,G$r){this._handleSpriteToAvatar(G$q,G$r);for(var G$v=0,G$H=this._childs.length;G$v<G$H;G$v++){this._childs[G$v]._setAnimatorToLinkAvatar(G$q,G$r)}},G$D(0,G$v,"activeInHierarchy",function(){return this._activeInHierarchy}),G$D(0,G$v,"_loaded",null,function(G$q){this.__loaded=G$q}),G$D(0,G$v,"active",function(){return this._active},function(G$q){this._active!==G$q&&(this._active=G$q,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(G$q?this._activeHierarchy():this._inActiveHierarchy()))}),G$D(0,G$v,"componentsCount",function(){return this._components.length}),G$D(0,G$v,"loaded",function(){return this.__loaded}),G$D(0,G$v,"id",function(){return this._id}),G$D(0,G$v,"url",function(){return this._url}),G$D(0,G$v,"layer",function(){return this._layer},function(G$q){if(this._layer!==G$q){if(!G$q)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var G$r=0,G$v=this._colliders.length;if(this._layer)for(G$r=0;G$r<G$v;G$r++)this._layer._removeCollider(this._colliders[G$r]);for(G$r=0;G$r<G$v;G$r++)G$q._addCollider(this._colliders[G$r])}this._layer=G$q,this.event("layerchanged",G$q)}}),G$D(0,G$v,"scene",function(){return this._scene}),G$D(0,G$v,"transform",function(){return this._transform}),G$r.instantiate=function(G$q,G$r,G$v,G$H,G$A){void 0===G$v&&(G$v=!0);var G$y=G$q.clone();G$r&&G$r.addChild(G$y);var G$R=G$y.transform;if(G$v){var G$W=G$R.worldMatrix;G$q.transform.worldMatrix.cloneTo(G$W),G$R.worldMatrix=G$W}else G$H&&(G$R.position=G$H),G$A&&(G$R.rotation=G$A);return G$y},G$r.load=function(G$q){return G$M.loader.create(G$q,null,null,G$r)},G$r.WORLDMATRIX=0,G$r.MVPMATRIX=1,G$r._uniqueIDCounter=0,G$r._nameNumberCounter=0,G$r}(),G$Cr=function(G$q){function G$x(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],G$x.__super.call(this),!G$q||!G$r)throw"Shader Error";this._id=++G$x._count,this._vs=G$q,this._ps=G$r,this._attributeMap=G$v,this._sceneUniformMap=G$H,this._cameraUniformMap=G$A,this._spriteUniformMap=G$y,this._materialUniformMap=G$R,this._renderElementUniformMap=G$W,this._precompile=G$O,this._define=G$N,this._precompile&&G$x.extCompileObj&&G$x.extCompileFunc?G$x.extCompileFunc.call(G$x.extCompileObj,G$q,G$r,G$N):this.recreateResource()}G$j(G$x,"laya.d3.shader.Shader3D",G$v);var G$r=G$x.prototype;return G$r.recreateResource=function(){G$s.now();this._compile(),this.completeCreate(),this.memorySize=0},G$r.disposeResource=function(){G$E.mainContext.deleteShader(this._vshader),G$E.mainContext.deleteShader(this._pshader),G$E.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},G$r._compile=function(){if(!G$E.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var G$q=[this._vs,this._ps],G$r=G$E.mainContext;if(this._program=G$r.createProgram(),this._vshader=G$x._createShader(G$r,G$q[0],35633),this._pshader=G$x._createShader(G$r,G$q[1],35632),G$r.attachShader(this._program,this._vshader),G$r.attachShader(this._program,this._pshader),G$r.linkProgram(this._program),!G$g.isConchApp&&G$Vr.debugMode&&!G$r.getProgramParameter(this._program,35714))throw G$r.getProgramInfoLog(this._program);var G$v,G$H=0,G$A=0,G$y=0;for(G$y=G$g.isConchApp?G$r.getProgramParameterEx(this._vs,this._ps,"",35721):G$r.getProgramParameter(this._program,35721),G$H=0;G$H<G$y;G$H++){var G$R=null;G$v={vartype:"attribute",ivartype:0,attrib:G$R=G$g.isConchApp?G$r.getActiveAttribEx(this._vs,this._ps,"",G$H):G$r.getActiveAttrib(this._program,G$H),location:G$r.getAttribLocation(this._program,G$R.name),name:G$R.name,type:G$R.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(G$v)}var G$W=0;for(G$W=G$g.isConchApp?G$r.getProgramParameterEx(this._vs,this._ps,"",35718):G$r.getProgramParameter(this._program,35718),G$H=0;G$H<G$W;G$H++){var G$O=null;G$O=G$g.isConchApp?G$r.getActiveUniformEx(this._vs,this._ps,"",G$H):G$r.getActiveUniform(this._program,G$H),0<(G$v={vartype:"uniform",ivartype:1,attrib:G$R,location:G$r.getUniformLocation(this._program,G$O.name),name:G$O.name,type:G$O.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(G$v.name=G$v.name.substr(0,G$v.name.length-3),G$v.isArray=!0,G$v.location=G$r.getUniformLocation(this._program,G$v.name)),this._uniformParams.push(G$v)}for(G$H=0,G$A=this._attributeParams.length;G$H<G$A;G$H++)(G$v=this._attributeParams[G$H]).indexOfParams=G$H,G$v.index=1,G$v.value=[G$v.location,null],G$v.codename=G$v.name,G$v.name=null!=this._attributeMap[G$v.codename]?this._attributeMap[G$v.codename]:G$v.codename,this._attributeParamsMap.push(G$v.name),this._attributeParamsMap.push(G$v),G$v._this=this,G$v.uploadedValue=[],G$v.fun=this._attribute;for(G$H=0,G$A=this._uniformParams.length;G$H<G$A;G$H++)switch((G$v=this._uniformParams[G$H]).indexOfParams=G$H,G$v.index=1,G$v.value=[G$v.location,null],G$v.codename=G$v.name,null!=this._sceneUniformMap[G$v.codename]?(G$v.name=this._sceneUniformMap[G$v.codename],this._sceneUniformParamsMap.push(G$v.name),this._sceneUniformParamsMap.push(G$v)):null!=this._cameraUniformMap[G$v.codename]?(G$v.name=this._cameraUniformMap[G$v.codename],this._cameraUniformParamsMap.push(G$v.name),this._cameraUniformParamsMap.push(G$v)):null!=this._spriteUniformMap[G$v.codename]?(G$v.name=this._spriteUniformMap[G$v.codename],this._spriteUniformParamsMap.push(G$v.name),this._spriteUniformParamsMap.push(G$v)):null!=this._materialUniformMap[G$v.codename]?(G$v.name=this._materialUniformMap[G$v.codename],this._materialUniformParamsMap.push(G$v.name),this._materialUniformParamsMap.push(G$v)):null!=this._renderElementUniformMap[G$v.codename]?(G$v.name=this._renderElementUniformMap[G$v.codename],this._renderElementUniformParamsMap.push(G$v.name),this._renderElementUniformParamsMap.push(G$v)):console.log("Shader:can't find uinform name:"+G$v.codename+" in shader file."),G$v._this=this,G$v.uploadedValue=[],G$v.type){case 5124:G$v.fun=G$v.isArray?this._uniform1iv:this._uniform1i;break;case 5126:G$v.fun=G$v.isArray?this._uniform1fv:this._uniform1f;break;case 35664:G$v.fun=G$v.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:G$v.fun=G$v.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:G$v.fun=G$v.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:G$v.fun=this._uniform_sampler2D;break;case 35680:G$v.fun=this._uniform_samplerCube;break;case 35676:G$v.fun=this._uniformMatrix4fv;break;case 35670:G$v.fun=this._uniform1i;break;case 35674:G$v.fun=this._uinformMatrix2fv;break;case 35675:G$v.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},G$r._attribute=function(G$q,G$r){var G$v=G$E.mainContext,G$H=G$W._enableAtributes,G$A=G$q.location;return G$H[G$A]||G$v.enableVertexAttribArray(G$A),G$v.vertexAttribPointer(G$A,G$r[0],G$r[1],G$r[2],G$r[3],G$r[4]),G$H[G$A]=G$W._bindVertexBuffer,1},G$r._uniform1f=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r?(G$E.mainContext.uniform1f(G$q.location,G$v[0]=G$r),1):0},G$r._uniform1fv=function(G$q,G$r){if(G$r.length<4){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$E.mainContext.uniform1fv(G$q.location,G$r),G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3],1):0}return G$E.mainContext.uniform1fv(G$q.location,G$r),1},G$r._uniform_vec2=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]?(G$E.mainContext.uniform2f(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1]),1):0},G$r._uniform_vec2v=function(G$q,G$r){if(G$r.length<2){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$E.mainContext.uniform2fv(G$q.location,G$r),G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3],1):0}return G$E.mainContext.uniform2fv(G$q.location,G$r),1},G$r._uniform_vec3=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]?(G$E.mainContext.uniform3f(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2]),1):0},G$r._uniform_vec3v=function(G$q,G$r){return G$E.mainContext.uniform3fv(G$q.location,G$r),1},G$r._uniform_vec4=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$E.mainContext.uniform4f(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3]),1):0},G$r._uniform_vec4v=function(G$q,G$r){return G$E.mainContext.uniform4fv(G$q.location,G$r),1},G$r._uniformMatrix2fv=function(G$q,G$r){return G$E.mainContext.uniformMatrix2fv(G$q.location,!1,G$r),1},G$r._uniformMatrix3fv=function(G$q,G$r){return G$E.mainContext.uniformMatrix3fv(G$q.location,!1,G$r),1},G$r._uniformMatrix4fv=function(G$q,G$r){return G$E.mainContext.uniformMatrix4fv(G$q.location,!1,G$r),1},G$r._uinformMatrix2fv=function(G$q,G$r){return G$E.mainContext.uniformMatrix2fv(G$q.location,!1,G$r),1},G$r._uinformMatrix3fv=function(G$q,G$r){return G$E.mainContext.uniformMatrix3fv(G$q.location,!1,G$r),1},G$r._uniform1i=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r?(G$E.mainContext.uniform1i(G$q.location,G$v[0]=G$r),1):0},G$r._uniform1iv=function(G$q,G$r){return G$E.mainContext.uniform1iv(G$q.location,G$r),1},G$r._uniform_ivec2=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]?(G$E.mainContext.uniform2i(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1]),1):0},G$r._uniform_ivec2v=function(G$q,G$r){return G$E.mainContext.uniform2iv(G$q.location,G$r),1},G$r._uniform_vec3i=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]?(G$E.mainContext.uniform3i(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2]),1):0},G$r._uniform_vec3vi=function(G$q,G$r){return G$E.mainContext.uniform3iv(G$q.location,G$r),1},G$r._uniform_vec4i=function(G$q,G$r){var G$v=G$q.uploadedValue;return G$v[0]!==G$r[0]||G$v[1]!==G$r[1]||G$v[2]!==G$r[2]||G$v[3]!==G$r[3]?(G$E.mainContext.uniform4i(G$q.location,G$v[0]=G$r[0],G$v[1]=G$r[1],G$v[2]=G$r[2],G$v[3]=G$r[3]),1):0},G$r._uniform_vec4vi=function(G$q,G$r){return G$E.mainContext.uniform4iv(G$q.location,G$r),1},G$r._uniform_sampler2D=function(G$q,G$r){var G$v=G$r.source||G$r.defaulteTexture.source,G$H=G$E.mainContext,G$A=G$q.uploadedValue;if(null!=G$A[0])return G$H.activeTexture(G$x._TEXTURES[G$A[0]]),G$v&&G$Q.bindTexture(G$H,3553,G$v),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return G$A[0]=this._curActTexIndex,G$H.uniform1i(G$q.location,this._curActTexIndex),G$H.activeTexture(G$x._TEXTURES[this._curActTexIndex]),G$v&&G$Q.bindTexture(G$H,3553,G$v),this._curActTexIndex++,1},G$r._uniform_samplerCube=function(G$q,G$r){var G$v=G$r.source||G$r.defaulteTexture.source,G$H=G$E.mainContext,G$A=G$q.uploadedValue;if(null!=G$A[0])return G$H.activeTexture(G$x._TEXTURES[G$A[0]]),G$v?G$Q.bindTexture(G$H,34067,G$v):G$Q.bindTexture(G$H,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return G$A[0]=this._curActTexIndex,G$H.uniform1i(G$q.location,this._curActTexIndex),G$H.activeTexture(G$x._TEXTURES[this._curActTexIndex]),G$v?G$Q.bindTexture(G$H,34067,G$v):G$Q.bindTexture(G$H,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},G$r._noSetValue=function(G$q){console.log("no....:"+G$q.name)},G$r.bind=function(){return G$v.activeShader=this,(G$v.bindShader=this).activeResource(),G$Q.UseProgram(this._program)},G$r.uploadAttributes=function(G$q,G$r){for(var G$v,G$H,G$A=0,G$y=0,G$R=this._attributeParamsMap.length;G$y<G$R;G$y+=2)G$H=this._attributeParamsMap[G$y+1],null!=(G$v=G$q[this._attributeParamsMap[G$y]])&&(G$r&&G$r[G$H.name]&&G$r[G$H.name].bind(),G$A+=G$H.fun.call(this,G$H,G$v));G$V.shaderCall+=G$A},G$r.uploadAttributesX=function(G$q,G$r){for(var G$v,G$H,G$A=0,G$y=0,G$R=this._attributeParamsMap.length;G$y<G$R;G$y+=2)G$H=this._attributeParamsMap[G$y+1],null!=(G$v=G$q[this._attributeParamsMap[G$y]])&&(G$r._bind(),G$A+=G$H.fun.call(this,G$H,G$v));G$V.shaderCall+=G$A},G$r.uploadSceneUniforms=function(G$q){for(var G$r,G$v,G$H=0,G$A=0,G$y=this._sceneUniformParamsMap.length;G$A<G$y;G$A+=2)G$v=this._sceneUniformParamsMap[G$A+1],null!=(G$r=G$q[this._sceneUniformParamsMap[G$A]])&&(G$H+=G$v.fun.call(this,G$v,G$r));G$V.shaderCall+=G$H},G$r.uploadCameraUniforms=function(G$q){for(var G$r,G$v,G$H=0,G$A=0,G$y=this._cameraUniformParamsMap.length;G$A<G$y;G$A+=2)G$v=this._cameraUniformParamsMap[G$A+1],null!=(G$r=G$q[this._cameraUniformParamsMap[G$A]])&&(G$H+=G$v.fun.call(this,G$v,G$r));G$V.shaderCall+=G$H},G$r.uploadSpriteUniforms=function(G$q){for(var G$r,G$v,G$H=0,G$A=0,G$y=this._spriteUniformParamsMap.length;G$A<G$y;G$A+=2)G$v=this._spriteUniformParamsMap[G$A+1],null!=(G$r=G$q[this._spriteUniformParamsMap[G$A]])&&(G$H+=G$v.fun.call(this,G$v,G$r));G$V.shaderCall+=G$H},G$r.uploadMaterialUniforms=function(G$q){for(var G$r,G$v,G$H=0,G$A=0,G$y=this._materialUniformParamsMap.length;G$A<G$y;G$A+=2)G$v=this._materialUniformParamsMap[G$A+1],null!=(G$r=G$q[this._materialUniformParamsMap[G$A]])&&(G$H+=G$v.fun.call(this,G$v,G$r));G$V.shaderCall+=G$H},G$r.uploadRenderElementUniforms=function(G$q){for(var G$r,G$v,G$H=0,G$A=0,G$y=this._renderElementUniformParamsMap.length;G$A<G$y;G$A+=2)G$v=this._renderElementUniformParamsMap[G$A+1],null!=(G$r=G$q[this._renderElementUniformParamsMap[G$A]])&&(G$H+=G$v.fun.call(this,G$v,G$r));G$V.shaderCall+=G$H},G$x.create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){return new G$x(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N)},G$x.addInclude=function(G$q,G$r){G$e.addInclude(G$q,G$r)},G$x._createShader=function(G$q,G$r,G$v){var G$H=G$q.createShader(G$v);if(G$q.shaderSource(G$H,G$r),G$q.compileShader(G$H),G$Vr.debugMode&&!G$q.getShaderParameter(G$H,35713))throw G$q.getShaderInfoLog(G$H);return G$H},G$x.PERIOD_RENDERELEMENT=0,G$x.PERIOD_MATERIAL=1,G$x.PERIOD_SPRITE=2,G$x.PERIOD_CAMERA=3,G$x.PERIOD_SCENE=4,G$x._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],G$x._count=0,G$x._preCompile=!1,G$x.extCompileFunc=null,G$x.extCompileObj=null,G$K(G$x,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new G$a}]),G$x}(),G$cr=function(G$W){function G$O(){this._transformUV=null,G$O.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new G$Rr(.6,.6,.6)),this._setColor(10,new G$Rr(1,1,1)),this._setColor(11,new G$Wr(1,1,1,8)),this._setColor(12,new G$Rr(1,1,1)),this._setColor(7,new G$Wr(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new G$Wr(1,1,0,0)),this.renderMode=1}G$j(G$O,"laya.d3.core.material.StandardMaterial",G$W);var G$q=G$O.prototype;return G$q.disableLight=function(){this._addDisablePublicShaderDefine(G$Vr.SHADERDEFINE_POINTLIGHT|G$Vr.SHADERDEFINE_SPOTLIGHT|G$Vr.SHADERDEFINE_DIRECTIONLIGHT)},G$q.disableFog=function(){this._addDisablePublicShaderDefine(G$Vr.SHADERDEFINE_FOG)},G$q.onAsynLoaded=function(G$q,G$r,G$v){var G$H=G$r[0];if(G$H.version)G$W.prototype.onAsynLoaded.call(this,G$q,G$r,G$v);else{var G$A=G$r[1],G$y=G$H.props;for(var G$R in G$y)this[G$R]=G$y[G$R];G$O._parseStandardMaterial(G$A,this,G$H),this._endLoaded()}},G$q.cloneTo=function(G$q){G$W.prototype.cloneTo.call(this,G$q);var G$r=G$q;this._transformUV&&(G$r._transformUV=this._transformUV.clone())},G$D(0,G$q,"ambientColor",function(){return this._getColor(9)},function(G$q){this._setColor(9,G$q)}),G$D(0,G$q,"ambientTexture",function(){return this._getTexture(5)},function(G$q){G$q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,G$q)}),G$D(0,G$q,"renderMode",null,function(G$q){switch(G$q){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(G$O.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(G$q)}),G$D(0,G$q,"reflectColor",function(){return this._getColor(12)},function(G$q){this._setColor(12,G$q)}),G$D(0,G$q,"tilingOffset",function(){return this._getColor(15)},function(G$q){if(G$q){var G$r=G$q.elements;1!=G$r[0]||1!=G$r[1]||0!=G$r[2]||0!=G$r[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,G$q)}),G$D(0,G$q,"albedo",function(){return this._getColor(7)},function(G$q){this._setColor(7,G$q)}),G$D(0,G$q,"diffuseColor",function(){return this._getColor(10)},function(G$q){this._setColor(10,G$q)}),G$D(0,G$q,"albedoColor",function(){return this._getColor(7)},function(G$q){this._setColor(7,G$q)}),G$D(0,G$q,"specularColor",function(){return this._getColor(11)},function(G$q){this._setColor(11,G$q)}),G$D(0,G$q,"diffuseTexture",function(){return this._getTexture(1)},function(G$q){G$q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,G$q)}),G$D(0,G$q,"normalTexture",function(){return this._getTexture(2)},function(G$q){G$q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,G$q)}),G$D(0,G$q,"specularTexture",function(){return this._getTexture(3)},function(G$q){G$q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,G$q)}),G$D(0,G$q,"emissiveTexture",function(){return this._getTexture(4)},function(G$q){G$q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,G$q)}),G$D(0,G$q,"reflectTexture",function(){return this._getTexture(6)},function(G$q){G$q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,G$q)}),G$D(0,G$q,"transformUV",function(){return this._transformUV},function(G$q){this._transformUV=G$q,this._setMatrix4x4(13,G$q.matrix),G$q?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,G$q.matrix.elements,0)}),G$O.__init__=function(){G$O.SHADERDEFINE_DIFFUSEMAP=G$O.shaderDefines.registerDefine("DIFFUSEMAP"),G$O.SHADERDEFINE_NORMALMAP=G$O.shaderDefines.registerDefine("NORMALMAP"),G$O.SHADERDEFINE_SPECULARMAP=G$O.shaderDefines.registerDefine("SPECULARMAP"),G$O.SHADERDEFINE_EMISSIVEMAP=G$O.shaderDefines.registerDefine("EMISSIVEMAP"),G$O.SHADERDEFINE_AMBIENTMAP=G$O.shaderDefines.registerDefine("AMBIENTMAP"),G$O.SHADERDEFINE_REFLECTMAP=G$O.shaderDefines.registerDefine("REFLECTMAP"),G$O.SHADERDEFINE_UVTRANSFORM=G$O.shaderDefines.registerDefine("UVTRANSFORM"),G$O.SHADERDEFINE_TILINGOFFSET=G$O.shaderDefines.registerDefine("TILINGOFFSET"),G$O.SHADERDEFINE_ADDTIVEFOG=G$O.shaderDefines.registerDefine("ADDTIVEFOG")},G$O.load=function(G$q){return G$M.loader.create(G$q,null,null,G$O)},G$O._parseStandardMaterial=function(G$q,G$r,G$v){var G$H=G$v.customProps,G$A=G$H.ambientColor;G$r.ambientColor=new G$Rr(G$A[0],G$A[1],G$A[2]);var G$y=G$H.diffuseColor;G$r.diffuseColor=new G$Rr(G$y[0],G$y[1],G$y[2]);var G$R=G$H.specularColor;G$r.specularColor=new G$Wr(G$R[0],G$R[1],G$R[2],G$R[3]);var G$W=G$H.reflectColor;G$r.reflectColor=new G$Rr(G$W[0],G$W[1],G$W[2]);var G$O=G$H.albedoColor;G$O&&(G$r.albedo=new G$Wr(G$O[0],G$O[1],G$O[2],G$O[3]));var G$N=G$H.diffuseTexture.texture2D;G$N&&(G$r.diffuseTexture=G$m.getRes(G$q[G$N]));var G$x=G$H.normalTexture.texture2D;G$x&&(G$r.normalTexture=G$m.getRes(G$q[G$x]));var G$K=G$H.specularTexture.texture2D;G$K&&(G$r.specularTexture=G$m.getRes(G$q[G$K]));var G$T=G$H.emissiveTexture.texture2D;G$T&&(G$r.emissiveTexture=G$m.getRes(G$q[G$T]));var G$j=G$H.ambientTexture.texture2D;G$j&&(G$r.ambientTexture=G$m.getRes(G$q[G$j]));var G$D=G$H.reflectTexture.texture2D;G$D&&(G$r.reflectTexture=G$m.getRes(G$q[G$D]))},G$O.RENDERMODE_OPAQUE=1,G$O.RENDERMODE_OPAQUEDOUBLEFACE=2,G$O.RENDERMODE_CUTOUT=3,G$O.RENDERMODE_CUTOUTDOUBLEFACE=4,G$O.RENDERMODE_TRANSPARENT=13,G$O.RENDERMODE_TRANSPARENTDOUBLEFACE=14,G$O.RENDERMODE_ADDTIVE=15,G$O.RENDERMODE_ADDTIVEDOUBLEFACE=16,G$O.RENDERMODE_DEPTHREAD_TRANSPARENT=5,G$O.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,G$O.RENDERMODE_DEPTHREAD_ADDTIVE=7,G$O.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,G$O.RENDERMODE_NONDEPTH_TRANSPARENT=9,G$O.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,G$O.RENDERMODE_NONDEPTH_ADDTIVE=11,G$O.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,G$O.SHADERDEFINE_DIFFUSEMAP=0,G$O.SHADERDEFINE_NORMALMAP=0,G$O.SHADERDEFINE_SPECULARMAP=0,G$O.SHADERDEFINE_EMISSIVEMAP=0,G$O.SHADERDEFINE_AMBIENTMAP=0,G$O.SHADERDEFINE_REFLECTMAP=0,G$O.SHADERDEFINE_UVTRANSFORM=0,G$O.SHADERDEFINE_TILINGOFFSET=0,G$O.SHADERDEFINE_ADDTIVEFOG=0,G$O.DIFFUSETEXTURE=1,G$O.NORMALTEXTURE=2,G$O.SPECULARTEXTURE=3,G$O.EMISSIVETEXTURE=4,G$O.AMBIENTTEXTURE=5,G$O.REFLECTTEXTURE=6,G$O.ALBEDO=7,G$O.UVANIAGE=8,G$O.MATERIALAMBIENT=9,G$O.MATERIALDIFFUSE=10,G$O.MATERIALSPECULAR=11,G$O.MATERIALREFLECT=12,G$O.UVMATRIX=13,G$O.UVAGE=14,G$O.TILINGOFFSET=15,G$K(G$O,["defaultMaterial",function(){var G$q=new G$O;return G$q.lock=!0,this.defaultMaterial=G$q},"shaderDefines",function(){return this.shaderDefines=new G$xr(G$Gr.shaderDefines)}]),G$O}(G$Gr),G$br=function(G$q){function G$R(G$q,G$r,G$v,G$H,G$A){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===G$v&&(G$v=35044),void 0===G$H&&(G$H=!1),G$R.__super.call(this),this._indexType=G$q,this._indexCount=G$r,this._bufferUsage=G$v,this._bufferType=34963,this._canRead=G$H;var G$y;if("ushort"==G$q)this._indexTypeByteCount=2;else{if("ubyte"!=G$q)throw new Error("unidentification index type.");this._indexTypeByteCount=1}G$y=this._indexTypeByteCount*G$r,this._byteLength=G$y,this._bind(),G$W._gl.bufferData(this._bufferType,G$y,this._bufferUsage),this.uri=G$A,G$H?("ushort"==G$q?this._buffer=new Uint16Array(G$r):"ubyte"==G$q&&(this._buffer=new Uint8Array(G$r)),this.memorySize=2*G$y):this.memorySize=G$y}G$j(G$R,"laya.d3.graphics.IndexBuffer3D",G$q);var G$r=G$R.prototype;return G$r.setData=function(G$q,G$r,G$v,G$H){void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=4294967295);var G$A=0;if("ushort"==this._indexType?(G$A=2,0===G$v&&4294967295===G$H||(G$q=new Uint16Array(G$q.buffer,G$v*G$A,G$H))):"ubyte"==this._indexType&&(G$A=1,0===G$v&&4294967295===G$H||(G$q=new Uint8Array(G$q.buffer,G$v*G$A,G$H))),this._bind(),G$W._gl.bufferSubData(this._bufferType,G$r*G$A,G$q),this._canRead)if(0!==G$r||0!==G$v||4294967295!==G$H){var G$y=this._buffer.length-G$r;G$y<G$H&&(G$H=G$y);for(var G$R=0;G$R<G$H;G$R++)this._buffer[G$r+G$R]=G$q[G$R]}else this._buffer=G$q},G$r.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},G$r.disposeResource=function(){G$q.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},G$D(0,G$r,"indexType",function(){return this._indexType}),G$D(0,G$r,"indexTypeByteCount",function(){return this._indexTypeByteCount}),G$D(0,G$r,"indexCount",function(){return this._indexCount}),G$D(0,G$r,"canRead",function(){return this._canRead}),G$R.INDEXTYPE_UBYTE="ubyte",G$R.INDEXTYPE_USHORT="ushort",G$R.create=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$v&&(G$v=35044),void 0===G$H&&(G$H=!1),new G$R(G$q,G$r,G$v,G$H,G$A)},G$R}(G$W),G$dr=function(G$y){function G$R(G$q,G$r,G$v,G$H,G$A){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===G$H&&(G$H=!1),G$R.__super.call(this),this._vertexDeclaration=G$q,this._vertexCount=G$r,this._bufferUsage=G$v,this._bufferType=34962,this._canRead=G$H,this.uri=G$A,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*G$r,this._bind(),G$W._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),G$H&&(this._buffer=new Float32Array(this._byteLength/4))}G$j(G$R,"laya.d3.graphics.VertexBuffer3D",G$y);var G$q=G$R.prototype;return G$q.bindWithIndexBuffer=function(G$q){G$q&&G$q._bind(),this._bind()},G$q.setData=function(G$q,G$r,G$v,G$H){if(void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=4294967295),0===G$v&&4294967295===G$H||(G$q=new Float32Array(G$q.buffer,4*G$v,G$H)),this._bind(),G$W._gl.bufferSubData(this._bufferType,4*G$r,G$q),this._canRead)if(0!==G$r||0!==G$v||4294967295!==G$H){var G$A=this._buffer.length-G$r;G$A<G$H&&(G$H=G$A);for(var G$y=0;G$y<G$H;G$y++)this._buffer[G$r+G$y]=G$q[G$y]}else this._buffer=G$q},G$q.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},G$q.disposeResource=function(){for(var G$q=G$E.mainContext,G$r=this._vertexDeclaration.getVertexElements(),G$v=G$W._enableAtributes,G$H=0,G$A=G$r.length;G$H<G$A;G$H++)G$v[G$H]===this._glBuffer&&(G$q.disableVertexAttribArray(G$H),G$v[G$H]=null);G$y.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},G$D(0,G$q,"vertexDeclaration",function(){return this._vertexDeclaration}),G$D(0,G$q,"vertexCount",function(){return this._vertexCount}),G$D(0,G$q,"canRead",function(){return this._canRead}),G$R.create=function(G$q,G$r,G$v,G$H,G$A){return void 0===G$v&&(G$v=35044),void 0===G$H&&(G$H=!1),new G$R(G$q,G$r,G$v,G$H,G$A)},G$R}(G$W),G$ur=function(G$q){function G$e(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,G$e.__super.call(this),this._type=3553}G$j(G$e,"laya.d3.resource.DataTexture2D",G$Er);var G$r=G$e.prototype;return G$r.genDebugMipmaps=function(){var G$q=[];return G$q.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),G$q.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),G$q.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),G$q.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),G$q.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),G$q.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),G$q.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),G$q.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),G$q.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),G$q.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),G$q},G$r._onTextureLoaded=function(G$q){},G$r._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var G$q=G$E.mainContext,G$r=this._source=G$q.createTexture(),G$v=this._width,G$H=this._height,G$A=G$Q.curBindTexTarget,G$y=G$Q.curBindTexValue,G$R=!1;if(G$Q.bindTexture(G$q,this._type,G$r),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var G$W=0;G$q.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var G$O=0;G$O<this._mipmaps.length;G$O++){if(this._mipmaps[G$O].byteLength!=G$N*G$x*4)throw"mipmap size error  level:"+G$O;G$q.texSubImage2D(this._type,0,G$e.simLodRect[G$W++],G$e.simLodRect[G$W++],G$e.simLodRect[G$W++],G$e.simLodRect[G$W++],6408,5121,new Uint8Array(this._mipmaps[G$O]))}this.minFifter=9729,this.magFifter=9729}else{var G$N=this._width,G$x=this._height;for(G$W=0,G$q.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),G$O=0;G$O<this._mipmaps.length;G$O++){if(this._mipmaps[G$O].byteLength!=G$N*G$x*4)throw"mipmap size error  level:"+G$O;G$q.texImage2D(this._type,G$O,6408,G$N,G$x,0,6408,5121,new Uint8Array(this._mipmaps[G$O])),(G$N/=2)<1&&(G$N=1),(G$x/=2)<1&&(G$x=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&G$q.pixelStorei(G$q.UNPACK_ALIGNMENT,1),G$q.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var G$K=0,G$T=!1,G$j=!1;this._buffer.byteLength==4*G$v*G$H?(G$K=6408,G$T=!0):this._buffer.byteLength==3*G$v*G$H?(G$K=6407,G$j=!0):G$K=this._format,G$T||G$j?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),G$j&&G$q.pixelStorei(G$q.UNPACK_ALIGNMENT,1),G$q.texImage2D(this._type,0,G$K,G$v,G$H,0,G$K,5121,this._buffer)):G$q&&G$K==G$q.ALPHA?(G$q.texImage2D(3553,0,G$K,G$v,G$H,0,G$K,G$q.UNSIGNED_BYTE,this._buffer),G$R=!0):0!=G$K&&(G$q.compressedTexImage2D(3553,0,G$K,G$v,G$H,0,this._buffer),G$R=!0)}var G$D=this._minFifter,G$g=this._magFifter,G$X=0==this._wrapModeU?10497:33071,G$m=0==this._wrapModeV?10497:33071,G$B=G$p.isPOT(G$v,G$H);G$B?(this._mipmap||this._mipmaps?-1!==G$D||(G$D=9987):-1!==G$D||(G$D=9729),-1!==G$g||(G$g=9729),G$q.texParameteri(this._type,10241,G$D),G$q.texParameteri(this._type,10240,G$g),G$q.texParameteri(this._type,10242,G$X),G$q.texParameteri(this._type,10243,G$m),this._mipmap&&G$q.generateMipmap(this._type)):(-1!==G$D||(G$D=9729),-1!==G$g||(G$g=9729),G$q.texParameteri(this._type,10241,G$D),G$q.texParameteri(this._type,10240,G$g),G$q.texParameteri(this._type,10242,33071),G$q.texParameteri(this._type,10243,33071)),G$A&&G$y&&G$Q.bindTexture(G$q,G$A,G$y),this.memorySize=G$R?this._buffer.length:G$B?G$v*G$H*4*(1+1/3):G$v*G$H*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},G$r.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},G$r.onAsynLoaded=function(G$q,G$r,G$v){var G$H;G$v&&(G$H=G$v[0].call(this,G$r)),G$H&&(this._width=G$H.width,this._height=G$H.height,this._buffer=G$H.data),this._src=G$q,this._size=new G$gr(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},G$r.getPixels=function(){return new Uint8Array(this._buffer)},G$r.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(G$E.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},G$D(0,G$r,"src",function(){return this._src}),G$e.create=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){if(void 0===G$H&&(G$H=9729),void 0===G$A&&(G$A=9729),void 0===G$y&&(G$y=!0),!G$q||G$q.byteLength<G$r*G$v*4)throw"DataTexture2D create error";var G$W=new G$e;return G$W.uri=G$R,G$W._buffer=G$q,G$W._width=G$r,G$W._height=G$v,G$W._mipmap=G$y,G$W._magFifter=G$H,G$W._minFifter=G$A,G$W._size=new G$gr(G$W._width,G$W._height),G$W._conchTexture?alert("怎么给runtime传递datatexture数据"):G$W.activeResource(),G$W},G$e.load=function(G$q,G$r,G$v,G$H,G$A){if(void 0===G$r&&(G$r=0),void 0===G$v&&(G$v=0),void 0===G$H&&(G$H=9729),void 0===G$A&&(G$A=9729),"mipmaps"===G$J.getFileExtension(G$q)){var G$y=G$M.loader.create(G$q,null,null,G$e,[function(G$q){this._mipmaps=[];var G$r=new Uint32Array(G$q);this._width=G$r[0];var G$v=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,G$v=1024),this._width!=G$v)throw"现在只支持512x256的环境贴图。当前的是"+G$r[0];this._height=G$r[1];for(var G$H=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,G$A=this._height,G$y=8;;){var G$R=G$H*G$A*4;if(G$y+G$R>G$q.byteLength)throw"load mipmaps data size error ";var G$W=new Uint8Array(G$q,G$y,G$R);if(this._mipmaps.push(G$W),G$y+=G$R,1==G$H&&1==G$A)break;(G$H/=2)<1&&(G$H=1),(G$A/=2)<1&&(G$A=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){G$y.simLodInfo=new Float32Array(40);for(var G$R=0;G$R<G$y.simLodInfo.length;)G$y.simLodInfo[G$R]=(G$e.simLodRect[G$R]+.5)/1024,G$R++,G$y.simLodInfo[G$R]=(G$e.simLodRect[G$R]+.5)/256,G$R++,G$y.simLodInfo[G$R]=Math.max(G$e.simLodRect[G$R]-1,.1)/1024,G$R++,G$y.simLodInfo[G$R]=Math.max(G$e.simLodRect[G$R]-1.5,.1)/256,G$R++}return G$y}if("number"==typeof G$r)return G$M.loader.create(G$q,null,null,G$e,[function(G$q){return this._width=G$r,this._height=G$v,this._buffer=G$q,null}]);if("function"==typeof G$r)return G$M.loader.create(G$q,null,null,G$e,[G$r]);throw new Error("unknown params.")},G$e.lodasatlas=!1,G$K(G$e,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),G$e}(),G$Ir=function(G$q){function G$r(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,G$r.__super.call(this)}G$j(G$r,"laya.d3.resource.models.PrimitiveMesh",G$Qr);var G$v=G$r.prototype;return G$M.imps(G$v,{"laya.d3.core.render.IRenderable":!0}),G$v._getVertexBuffer=function(G$q){return void 0===G$q&&(G$q=0),0===G$q?this._vertexBuffer:null},G$v._getVertexBuffers=function(){return null},G$v._getIndexBuffer=function(){return this._indexBuffer},G$v._getPositions=function(){var G$q,G$r=[],G$v=this._vertexBuffer.vertexDeclaration.getVertexElements(),G$H=0;for(G$H=0;G$H<G$v.length;G$H++){var G$A=G$v[G$H];if("vector3"===G$A.elementFormat&&0===G$A.elementUsage){G$q=G$A;break}}var G$y=this._vertexBuffer.getData();for(G$H=0;G$H<G$y.length;G$H+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var G$R=G$H+G$q.offset/4,G$W=new G$Rr(G$y[G$R+0],G$y[G$R+1],G$y[G$R+2]);G$r.push(G$W)}return G$r},G$v.getRenderElement=function(G$q){return this},G$v.getRenderElementsCount=function(){return 1},G$v.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},G$v._beforeRender=function(G$q){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},G$v._render=function(G$q){G$E.mainContext.drawElements(4,this._numberIndices,5123,0),G$V.drawCall++,G$V.trianglesFaces+=this._numberIndices/3},G$D(0,G$v,"_vertexBufferCount",function(){return 1}),G$D(0,G$v,"triangleCount",function(){return this._indexBuffer.indexCount/3}),G$r}(),G$tr=function(G$q){function G$r(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,G$r.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}G$j(G$r,"laya.d3.resource.models.Mesh",G$Qr);var G$v=G$r.prototype;return G$v._getPositions=function(){var G$q,G$r,G$v,G$H,G$A,G$y=[],G$R=0,G$W=0,G$O=0;if(0!==this._vertexBuffers.length){var G$N=this._vertexBuffers.length;for(G$R=0;G$R<G$N;G$R++){for(G$v=(G$q=this._vertexBuffers[G$R]).vertexDeclaration.getVertexElements(),G$W=0;G$W<G$v.length;G$W++)if("vector3"===(G$H=G$v[G$W]).elementFormat&&0===G$H.elementUsage){G$r=G$H;break}for(G$A=G$q.getData(),G$W=0;G$W<G$A.length;G$W+=G$q.vertexDeclaration.vertexStride/4)G$O=G$W+G$r.offset/4,G$y.push(new G$Rr(G$A[G$O+0],G$A[G$O+1],G$A[G$O+2]))}}else{var G$x=this._subMeshes.length;for(G$R=0;G$R<G$x;G$R++){for(G$v=(G$q=this._subMeshes[G$R]._getVertexBuffer()).vertexDeclaration.getVertexElements(),G$W=0;G$W<G$v.length;G$W++)if("vector3"===(G$H=G$v[G$W]).elementFormat&&0===G$H.elementUsage){G$r=G$H;break}for(G$A=G$q.getData(),G$W=0;G$W<G$A.length;G$W+=G$q.vertexDeclaration.vertexStride/4)G$O=G$W+G$r.offset/4,G$y.push(new G$Rr(G$A[G$O+0],G$A[G$O+1],G$A[G$O+2]))}}return G$y},G$v._setSubMeshes=function(G$q){this._subMeshes=G$q,this._subMeshCount=G$q.length;for(var G$r=0;G$r<this._subMeshCount;G$r++)G$q[G$r]._indexInMesh=G$r;this._positions=this._getPositions(),this._generateBoundingObject()},G$v.onAsynLoaded=function(G$q,G$r,G$v){var G$H=G$r[0],G$A=G$r[1];G$Lq.read(G$H,this,this._materials,this._subMeshes,G$A),this.completeCreate(),this._endLoaded()},G$v.getSubMesh=function(G$q){return this._subMeshes[G$q]},G$v.getSubMeshCount=function(){return this._subMeshes.length},G$v.getRenderElementsCount=function(){return this._subMeshes.length},G$v.getRenderElement=function(G$q){return this._subMeshes[G$q]},G$v.disposeResource=function(){for(var G$q=0;G$q<this._subMeshes.length;G$q++)this._subMeshes[G$q].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},G$D(0,G$v,"materials",function(){return this._materials.slice()}),G$D(0,G$v,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),G$r.load=function(G$q){return G$M.loader.create(G$q,null,null,G$r)},G$r}(),G$Fr=(function(G$q){function G$N(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===G$v&&(G$v=6408),void 0===G$H&&(G$H=5121),void 0===G$A&&(G$A=33189),void 0===G$y&&(G$y=!1),void 0===G$R&&(G$R=!1),void 0===G$W&&(G$W=-1),void 0===G$O&&(G$O=-1),G$N.__super.call(this),this._type=3553,this._width=G$q,this._height=G$r,this._size=new G$gr(G$q,G$r),this._surfaceFormat=G$v,this._surfaceType=G$H,this._depthStencilFormat=G$A,G$g.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=G$y,this._repeat=G$R,this._minFifter=G$W,this._magFifter=G$O,this.activeResource(),this._alreadyResolved=!0}G$j(G$N,"laya.d3.resource.RenderTexture",G$Er);var G$r=G$N.prototype;G$r.recreateResource=function(){var G$q=G$E.mainContext;this._frameBuffer=G$q.createFramebuffer(),this._source=G$q.createTexture();var G$r=G$Q.curBindTexTarget,G$v=G$Q.curBindTexValue;G$Q.bindTexture(G$q,this._type,this._source),G$q.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var G$H=this._minFifter,G$A=this._magFifter,G$y=this._repeat?10497:33071;if(G$p.isPOT(this._width,this._height)?(this._mipmap?-1!==G$H||(G$H=9987):-1!==G$H||(G$H=9729),-1!==G$A||(G$A=9729),G$q.texParameteri(this._type,10241,G$H),G$q.texParameteri(this._type,10240,G$A),G$q.texParameteri(this._type,10242,G$y),G$q.texParameteri(this._type,10243,G$y),this._mipmap&&G$q.generateMipmap(this._type)):(-1!==G$H||(G$H=9729),-1!==G$A||(G$A=9729),G$q.texParameteri(this._type,10241,G$H),G$q.texParameteri(this._type,10240,G$A),G$q.texParameteri(this._type,10242,33071),G$q.texParameteri(this._type,10243,33071)),G$r&&G$v&&G$Q.bindTexture(G$q,G$r,G$v),G$q.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=G$q.createRenderbuffer(),G$q.bindRenderbuffer(36161,this._depthStencilBuffer),G$q.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),G$q.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:G$q.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:G$q.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:G$q.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}G$q.framebufferTexture2D(36160,36064,3553,this._source,0),G$q.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},G$r.start=function(){G$E.mainContext.bindFramebuffer(36160,this.frameBuffer),(G$N._currentRenderTarget=this)._alreadyResolved=!1},G$r.end=function(){G$E.mainContext.bindFramebuffer(36160,null),G$N._currentRenderTarget=null,this._alreadyResolved=!0},G$r.getData=function(G$q,G$r,G$v,G$H){var G$A=G$E.mainContext;if(G$A.bindFramebuffer(36160,this._frameBuffer),!(36053===G$A.checkFramebufferStatus(36160)))return G$A.bindFramebuffer(36160,null),null;var G$y=new Uint8Array(this._width*this._height*4);return G$A.readPixels(G$q,G$r,G$v,G$H,this._surfaceFormat,this._surfaceType,G$y),G$A.bindFramebuffer(36160,null),G$y},G$r.disposeResource=function(){if(this._frameBuffer){var G$q=G$E.mainContext;G$q.deleteTexture(this._source),G$q.deleteFramebuffer(this._frameBuffer),G$q.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},G$D(0,G$r,"surfaceFormat",function(){return this._surfaceFormat}),G$D(0,G$r,"surfaceType",function(){return this._surfaceType}),G$D(0,G$r,"depthStencilFormat",function(){return this._depthStencilFormat}),G$D(0,G$r,"source",function(){return this._alreadyResolved?G$M.superGet(G$Er,this,"source"):null}),G$D(0,G$r,"depthStencilBuffer",function(){return this._depthStencilBuffer}),G$D(0,G$r,"frameBuffer",function(){return this._frameBuffer}),G$N._currentRenderTarget=null}(),function(G$q){function G$r(G$q){this._color=null,this._pixels=null,G$r.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new G$gr(this.width,this.height),this._color=G$q,this._pixels=new Uint8Array([255*G$q.x,255*G$q.y,255*G$q.z,255*G$q.w]),this.uri="SolidColorTexture2D_"+this.id}G$j(G$r,"laya.d3.resource.SolidColorTexture2D",G$Er);var G$v=G$r.prototype;return G$v._createWebGlTexture=function(){var G$q=G$E.mainContext,G$r=this._source=G$q.createTexture(),G$v=this._width,G$H=this._height,G$A=G$Q.curBindTexTarget,G$y=G$Q.curBindTexValue;G$Q.bindTexture(G$q,this._type,G$r),G$q.texImage2D(this._type,0,6408,G$v,G$H,0,6408,5121,this._pixels);var G$R=this._minFifter,G$W=this._magFifter,G$O=this._repeat?10497:33071,G$N=G$p.isPOT(G$v,G$H);G$N?(this._mipmap?-1!==G$R||(G$R=9987):-1!==G$R||(G$R=9729),-1!==G$W||(G$W=9729),G$q.texParameteri(this._type,10241,G$R),G$q.texParameteri(this._type,10240,G$W),G$q.texParameteri(this._type,10242,G$O),G$q.texParameteri(this._type,10243,G$O),this._mipmap&&G$q.generateMipmap(this._type)):(-1!==G$R||(G$R=9729),-1!==G$W||(G$W=9729),G$q.texParameteri(this._type,10241,G$R),G$q.texParameteri(this._type,10240,G$W),G$q.texParameteri(this._type,10242,33071),G$q.texParameteri(this._type,10243,33071)),G$A&&G$y&&G$Q.bindTexture(G$q,G$A,G$y),this.memorySize=G$N?G$v*G$H*4*(1+1/3):G$v*G$H*4},G$v.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},G$v.disposeResource=function(){this._source&&(G$E.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},G$K(G$r,["magentaTexture",function(){var G$q=new G$r(new G$Wr(1,0,1,1));return G$q.lock=!0,this.magentaTexture=G$q},"grayTexture",function(){var G$q=new G$r(new G$Wr(.5,.5,.5,1));return G$q.lock=!0,this.grayTexture=G$q}]),G$r}()),G$Ur=function(G$q){function G$A(G$q,G$r,G$v,G$H){this._canRead=!1,this._image=null,this._pixels=null,void 0===G$q&&(G$q=!1),void 0===G$r&&(G$r=!0),void 0===G$v&&(G$v=6408),void 0===G$H&&(G$H=!0),G$A.__super.call(this),this._type=3553,this._repeat=G$r,this._canRead=G$q,this._format=G$v,this._mipmap=G$H}G$j(G$A,"laya.d3.resource.Texture2D",G$Er);var G$r=G$A.prototype;return G$r._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var G$q=G$E.mainContext,G$r=this._source=G$q.createTexture(),G$v=this._width,G$H=this._height,G$A=G$Q.curBindTexTarget,G$y=G$Q.curBindTexValue;switch(G$Q.bindTexture(G$q,this._type,G$r),this._format){case 6407:case 6408:this._canRead?G$q.texImage2D(this._type,0,this._format,G$v,G$H,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?G$q.texImage2D(this._type,0,this._image._format,G$v,G$H,0,this._image._format,5121,this._image.atlasSource):G$q.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case G$E.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:G$q.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var G$R=this._minFifter,G$W=this._magFifter,G$O=this._repeat?10497:33071,G$N=0==this._wrapModeU?10497:33071,G$x=0==this._wrapModeV?10497:33071,G$K=G$p.isPOT(G$v,G$H);G$K?(this._mipmap?-1!==G$R||(G$R=9987):-1!==G$R||(G$R=9729),-1!==G$W||(G$W=9729),G$q.texParameteri(this._type,10241,G$R),G$q.texParameteri(this._type,10240,G$W),G$q.texParameteri(this._type,10242,G$O),G$q.texParameteri(this._type,10243,G$O),G$q.texParameteri(this._type,10242,G$N),G$q.texParameteri(this._type,10243,G$x),this._mipmap&&G$q.generateMipmap(this._type)):(-1!==G$R||(G$R=9729),-1!==G$W||(G$W=9729),G$q.texParameteri(this._type,10241,G$R),G$q.texParameteri(this._type,10240,G$W),G$q.texParameteri(this._type,10242,33071),G$q.texParameteri(this._type,10243,33071)),G$A&&G$y&&G$Q.bindTexture(G$q,G$A,G$y),this._image.onload=null,this._image=null,this.memorySize=G$K?G$v*G$H*4*(1+1/3):G$v*G$H*4},G$r.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},G$r.onAsynLoaded=function(G$q,G$r,G$v){if(G$v){var G$H=G$v[0];void 0!==G$H&&(this._canRead=G$H);var G$A=G$v[1];void 0!==G$A&&(this._repeat=G$A);var G$y=G$v[2];void 0!==G$y&&(this._format=G$y);var G$R=G$v[3];void 0!==G$R&&(this._mipmap=G$R);var G$W=G$v.wrapModeU;void 0!==G$W&&(this._wrapModeU=G$W);var G$O=G$v.wrapModeV;void 0!==G$O&&(this._wrapModeV=G$O)}switch(this._format){case 6407:case 6408:var G$N=(this._image=G$r).width,G$x=G$r.height;this._width=G$N,this._height=G$x,this._size=new G$gr(G$N,G$x),this._canRead&&(G$g.isConchApp?G$r instanceof G$T.HTMLElement&&(this._pixels=new Uint8Array(G$r.getImageData(0,0,G$N,G$x))):(G$s.canvas.size(G$N,G$x),G$s.canvas.clear(),G$s.context.drawImage(G$r,0,0,G$N,G$x),this._pixels=new Uint8Array(G$s.context.getImageData(0,0,G$N,G$x).data.buffer)));break;case G$E.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var G$K=new G$z(G$r);G$K.readUTFBytes(4),G$K.readUTFBytes(2),G$K.getInt16();G$K.endian="bigEndian",this._width=G$K.getInt16(),this._height=G$K.getInt16(),this._size=new G$gr(this._width,this._height);G$K.getInt16(),G$K.getInt16();this._image=new Uint8Array(G$r,G$K.pos)}this.recreateResource(),this._endLoaded()},G$r.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},G$r.disposeResource=function(){this._source&&(G$E.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},G$D(0,G$r,"_src",function(){return this.url}),G$D(0,G$r,"src",function(){return this.url}),G$A.load=function(G$q){return G$M.loader.create(G$q,null,null,G$A)},G$A}(),G$_r=function(G$r){function G$v(G$q,G$r){G$v.__super.call(this),void 0===G$q&&(G$q=.3),void 0===G$r&&(G$r=1e3),this._tempVector3=new G$Rr,this._position=new G$Rr,this._up=new G$Rr,this._forward=new G$Rr,this._right=new G$Rr,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=G$gr.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=G$q,this._farPlane=G$r,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),G$M.stage.on("resize",this,this._onScreenSizeChanged)}G$j(G$v,"laya.d3.core.BaseCamera",G$r);var G$q=G$v.prototype;return G$q._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var G$q=this.scene._cameraPool,G$r=G$q.length-1,G$v=0;G$v<G$r;G$v++)if(G$q[G$v].renderingOrder>G$q[G$r].renderingOrder){var G$H=G$q[G$v];G$q[G$v]=G$q[G$r],G$q[G$r]=G$H}},G$q._calculateProjectionMatrix=function(){},G$q._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},G$q._prepareCameraToRender=function(){G$Z._currentCameraCullingMask=this.cullingMask;var G$q=this._shaderValues;G$q.setValue(0,this.transform.position.elements),G$q.setValue(5,this.forward.elements),G$q.setValue(6,this.up.elements)},G$q._prepareCameraViewProject=function(G$q,G$r){var G$v=this._shaderValues;G$v.setValue(1,G$q.elements),G$v.setValue(2,G$r.elements)},G$q._renderCamera=function(G$q,G$r,G$v){},G$q.addLayer=function(G$q){29!==G$q.number&&30!=G$q.number&&(this.cullingMask=this.cullingMask|G$q.mask)},G$q.removeLayer=function(G$q){29!==G$q.number&&30!=G$q.number&&(this.cullingMask=this.cullingMask&~G$q.mask)},G$q.addAllLayers=function(){this.cullingMask=2147483647},G$q.removeAllLayers=function(){this.cullingMask=0|G$Z.getLayerByNumber(29).mask|G$Z.getLayerByNumber(30).mask},G$q.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},G$q.moveForward=function(G$q){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=G$q,this.transform.translate(this._tempVector3)},G$q.moveRight=function(G$q){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=G$q,this.transform.translate(this._tempVector3)},G$q.moveVertical=function(G$q){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=G$q,this.transform.translate(this._tempVector3,!1)},G$q._addSelfRenderObjects=function(){var G$q=this.scene._cameraPool,G$r=G$q.length;if(0<G$r){for(var G$v=G$r-1;0<=G$v;G$v--)if(this.renderingOrder<=G$q[G$v].renderingOrder){G$q.splice(G$v+1,0,this);break}}else G$q.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},G$q._clearSelfRenderObjects=function(){var G$q=this.scene._cameraPool;G$q.splice(G$q.indexOf(this),1)},G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,G$M.stage.off("resize",this,this._onScreenSizeChanged),G$r.prototype.destroy.call(this,G$q)},G$D(0,G$q,"sky",function(){return this._sky},function(G$q){(this._sky=G$q)._ownerCamera=this}),G$D(0,G$q,"forward",function(){var G$q=this.transform.worldMatrix.elements,G$r=this._forward.elements;return G$r[0]=-G$q[8],G$r[1]=-G$q[9],G$r[2]=-G$q[10],this._forward}),G$D(0,G$q,"position",function(){var G$q=this.transform.worldMatrix.elements,G$r=this._position.elements;return G$r[0]=G$q[12],G$r[1]=G$q[13],G$r[2]=G$q[14],this._position}),G$D(0,G$q,"renderTarget",function(){return this._renderTarget},function(G$q){null!=(this._renderTarget=G$q)&&(this._renderTargetSize=G$q.size)}),G$D(0,G$q,"up",function(){var G$q=this.transform.worldMatrix.elements,G$r=this._up.elements;return G$r[0]=G$q[4],G$r[1]=G$q[5],G$r[2]=G$q[6],this._up}),G$D(0,G$q,"right",function(){var G$q=this.transform.worldMatrix.elements,G$r=this._right.elements;return G$r[0]=G$q[0],G$r[1]=G$q[1],G$r[2]=G$q[2],this._right}),G$D(0,G$q,"renderTargetSize",function(){return this._renderTargetSize},function(G$q){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=G$q,this._calculateProjectionMatrix()}),G$D(0,G$q,"fieldOfView",function(){return this._fieldOfView},function(G$q){this._fieldOfView=G$q,this._calculateProjectionMatrix()}),G$D(0,G$q,"nearPlane",function(){return this._nearPlane},function(G$q){this._nearPlane=G$q,this._calculateProjectionMatrix()}),G$D(0,G$q,"farPlane",function(){return this._farPlane},function(G$q){this._farPlane=G$q,this._calculateProjectionMatrix()}),G$D(0,G$q,"orthographic",function(){return this._orthographic},function(G$q){this._orthographic=G$q,this._calculateProjectionMatrix()}),G$D(0,G$q,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(G$q){this._orthographicVerticalSize=G$q,this._calculateProjectionMatrix()}),G$D(0,G$q,"renderingOrder",function(){return this._renderingOrder},function(G$q){this._renderingOrder=G$q,this._sortCamerasByRenderingOrder()}),G$v.CAMERAPOS=0,G$v.VIEWMATRIX=1,G$v.PROJECTMATRIX=2,G$v.VPMATRIX=3,G$v.VPMATRIX_NO_TRANSLATE=4,G$v.CAMERADIRECTION=5,G$v.CAMERAUP=6,G$v.ENVIRONMENTDIFFUSE=7,G$v.ENVIRONMENTSPECULAR=8,G$v.SIMLODINFO=9,G$v.DIFFUSEIRRADMATR=10,G$v.DIFFUSEIRRADMATG=11,G$v.DIFFUSEIRRADMATB=12,G$v.HDREXPOSURE=13,G$v.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",G$v.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",G$v.CLEARFLAG_SOLIDCOLOR=0,G$v.CLEARFLAG_SKY=1,G$v.CLEARFLAG_DEPTHONLY=2,G$v.CLEARFLAG_NONE=3,G$K(G$v,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new G$qr(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new G$qr},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new G$qr}]),G$v}(G$or),G$fr=function(G$v){function G$r(G$q){this._render=null,this._geometryFilter=null,G$r.__super.call(this,G$q)}G$j(G$r,"laya.d3.core.RenderableSprite3D",G$v);var G$q=G$r.prototype;return G$q._addToInitStaticBatchManager=function(){},G$q._setBelongScene=function(G$q){G$v.prototype._setBelongScene.call(this,G$q),G$q._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},G$q._setUnBelongScene=function(){var G$q=this._scene._renderableSprite3Ds,G$r=G$q.indexOf(this);G$q.splice(G$r,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),G$v.prototype._setUnBelongScene.call(this)},G$q._update=function(G$q){(G$q.owner=this)._activeInHierarchy&&(this._updateComponents(G$q),this._render._updateOctreeNode(),this._lateUpdateComponents(G$q),G$V.spriteCount++,this._childs.length&&this._updateChilds(G$q))},G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$v.prototype.destroy.call(this,G$q),this._render._destroy(),this._render=null},G$r.__init__=function(){G$r.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=G$r.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),G$r.SAHDERDEFINE_LIGHTMAP=G$r.shaderDefines.registerDefine("LIGHTMAP")},G$r.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,G$r.SAHDERDEFINE_LIGHTMAP=4,G$r.LIGHTMAPSCALEOFFSET=2,G$r.LIGHTMAP=3,G$K(G$r,["shaderDefines",function(){return this.shaderDefines=new G$xr}]),G$r}(G$or),G$Sr=(function(G$q){function G$H(G$q,G$r,G$v){this._long=NaN,this._width=NaN,this._height=NaN,void 0===G$q&&(G$q=1),void 0===G$r&&(G$r=1),void 0===G$v&&(G$v=1),G$H.__super.call(this),this._long=G$q,this._width=G$r,this._height=G$v,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}G$j(G$H,"laya.d3.resource.models.BoxMesh",G$Ir);var G$r=G$H.prototype;G$r.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var G$q=G$Eq.vertexDeclaration,G$r=(G$q.vertexStride,this._long/2),G$v=this._height/2,G$H=this._width/2,G$A=new Float32Array([-G$r,G$v,-G$H,0,1,0,0,0,G$r,G$v,-G$H,0,1,0,1,0,G$r,G$v,G$H,0,1,0,1,1,-G$r,G$v,G$H,0,1,0,0,1,-G$r,-G$v,-G$H,0,-1,0,0,1,G$r,-G$v,-G$H,0,-1,0,1,1,G$r,-G$v,G$H,0,-1,0,1,0,-G$r,-G$v,G$H,0,-1,0,0,0,-G$r,G$v,-G$H,-1,0,0,0,0,-G$r,G$v,G$H,-1,0,0,1,0,-G$r,-G$v,G$H,-1,0,0,1,1,-G$r,-G$v,-G$H,-1,0,0,0,1,G$r,G$v,-G$H,1,0,0,1,0,G$r,G$v,G$H,1,0,0,0,0,G$r,-G$v,G$H,1,0,0,0,1,G$r,-G$v,-G$H,1,0,0,1,1,-G$r,G$v,G$H,0,0,1,0,0,G$r,G$v,G$H,0,0,1,1,0,G$r,-G$v,G$H,0,0,1,1,1,-G$r,-G$v,G$H,0,0,1,0,1,-G$r,G$v,-G$H,0,0,-1,1,0,G$r,G$v,-G$H,0,0,-1,0,0,G$r,-G$v,-G$H,0,0,-1,0,1,-G$r,-G$v,-G$H,0,0,-1,1,1]),G$y=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new G$dr(G$q,this._numberVertices,35044,!0),this._indexBuffer=new G$br("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(G$A),this._indexBuffer.setData(G$y),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},G$D(0,G$r,"long",function(){return this._long},function(G$q){this._long!==G$q&&(this._long=G$q,this.releaseResource(),this.activeResource())}),G$D(0,G$r,"width",function(){return this._width},function(G$q){this._width!==G$q&&(this._width=G$q,this.releaseResource(),this.activeResource())}),G$D(0,G$r,"height",function(){return this._height},function(G$q){this._height!==G$q&&(this._height=G$q,this.releaseResource(),this.activeResource())})}(),function(G$q){function G$A(G$q,G$r,G$v,G$H){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===G$q&&(G$q=10),void 0===G$r&&(G$r=10),void 0===G$v&&(G$v=10),void 0===G$H&&(G$H=10),G$A.__super.call(this),this._long=G$q,this._width=G$r,this._stacks=G$v,this._slices=G$H,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}G$j(G$A,"laya.d3.resource.models.PlaneMesh",G$Ir);var G$r=G$A.prototype;G$r.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var G$q=new Uint16Array(this._numberIndices),G$r=G$Eq.vertexDeclaration,G$v=G$r.vertexStride/4,G$H=new Float32Array(this._numberVertices*G$v),G$A=this._long/2,G$y=this._width/2,G$R=this._long/this._stacks,G$W=this._width/this._slices,G$O=0,G$N=0;G$N<=this._slices;G$N++)for(var G$x=0;G$x<=this._stacks;G$x++)G$H[G$O++]=G$x*G$R-G$A,G$H[G$O++]=0,G$H[G$O++]=G$N*G$W-G$y,G$H[G$O++]=0,G$H[G$O++]=1,G$H[G$O++]=0,G$H[G$O++]=1*G$x/this._stacks,G$H[G$O++]=1*G$N/this._slices;var G$K=0;for(G$N=0;G$N<this._slices;G$N++)for(G$x=0;G$x<this._stacks;G$x++)G$q[G$K++]=(G$N+1)*(this._stacks+1)+G$x,G$q[G$K++]=G$N*(this._stacks+1)+G$x,G$q[G$K++]=(G$N+1)*(this._stacks+1)+G$x+1,G$q[G$K++]=G$N*(this._stacks+1)+G$x,G$q[G$K++]=G$N*(this._stacks+1)+G$x+1,G$q[G$K++]=(G$N+1)*(this._stacks+1)+G$x+1;this._vertexBuffer=new G$dr(G$r,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new G$br("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(G$H),this._indexBuffer.setData(G$q),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},G$D(0,G$r,"long",function(){return this._long},function(G$q){this._long!==G$q&&(this._long=G$q,this.releaseResource(),this.activeResource())}),G$D(0,G$r,"width",function(){return this._width},function(G$q){this._width!==G$q&&(this._width=G$q,this.releaseResource(),this.activeResource())}),G$D(0,G$r,"stacks",function(){return this._stacks},function(G$q){this._stacks!==G$q&&(this._stacks=G$q,this.releaseResource(),this.activeResource())}),G$D(0,G$r,"slices",function(){return this._slices},function(G$q){this._slices!==G$q&&(this._slices=G$q,this.releaseResource(),this.activeResource())})}(),function(G$q){function G$R(G$q,G$r,G$v){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=.3),void 0===G$v&&(G$v=1e3),this._viewMatrix=new G$qr,this._projectionMatrix=new G$qr,this._projectionViewMatrix=new G$qr,this._viewport=new G$Or(0,0,0,0),this._normalizedViewport=new G$Or(0,0,1,1),this._aspectRatio=G$q,this._boundFrustumUpdate=!0,this._boundFrustum=new G$wq(G$qr.DEFAULT),G$R.__super.call(this,G$r,G$v),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}G$j(G$R,"laya.d3.core.Camera",G$_r);var G$r=G$R.prototype;return G$r._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},G$r._parseCustomProps=function(G$q,G$r,G$v,G$H){var G$A=G$v.clearColor;this.clearColor=new G$Wr(G$A[0],G$A[1],G$A[2],G$A[3]);var G$y=G$v.viewport;this.normalizedViewport=new G$Or(G$y[0],G$y[1],G$y[2],G$y[3])},G$r._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var G$q=this.orthographicVerticalSize*this.aspectRatio*.5,G$r=.5*this.orthographicVerticalSize;G$qr.createOrthoOffCenterRH(-G$q,G$q,-G$r,G$r,this.nearPlane,this.farPlane,this._projectionMatrix)}else G$qr.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},G$r._update=function(G$q){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,G$q)},G$r._renderCamera=function(G$q,G$r,G$v){var G$H,G$A;G$v.parallelSplitShadowMaps[0]&&G$v._renderShadowMap(G$q,G$r,this),(G$r.camera=this)._prepareCameraToRender(),G$v._preRenderUpdateComponents(G$r),G$H=G$r._viewMatrix=this.viewMatrix;var G$y=this._renderTarget;G$y?(G$y.start(),G$qr.multiply(G$_r._invertYScaleMatrix,this._projectionMatrix,G$_r._invertYProjectionMatrix),G$qr.multiply(G$_r._invertYScaleMatrix,this.projectionViewMatrix,G$_r._invertYProjectionViewMatrix),G$A=G$r._projectionMatrix=G$_r._invertYProjectionMatrix,G$r._projectionViewMatrix=G$_r._invertYProjectionViewMatrix):(G$A=G$r._projectionMatrix=this._projectionMatrix,G$r._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(G$H,G$A),G$r._viewport=this.viewport,G$v._preRenderScene(G$q,G$r,this.boundFrustum),G$v._clear(G$q,G$r),G$v._renderScene(G$q,G$r),G$v._postRenderUpdateComponents(G$r),G$y&&G$y.end()},G$r.viewportPointToRay=function(G$q,G$r){G$Dr.calculateCursorRay(G$q,this.viewport,this._projectionMatrix,this.viewMatrix,null,G$r)},G$r.normalizedViewportPointToRay=function(G$q,G$r){var G$v=G$R._tempVector20,G$H=this.viewport,G$A=G$q.elements,G$y=G$v.elements;G$y[0]=G$A[0]*G$H.width,G$y[1]=G$A[1]*G$H.height,G$Dr.calculateCursorRay(G$v,this.viewport,this._projectionMatrix,this.viewMatrix,null,G$r)},G$r.worldToViewportPoint=function(G$q,G$r){G$qr.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(G$q,this._projectionViewMatrix,G$r);var G$v=G$r.elements;G$v[0]=G$v[0]/G$M.stage.clientScaleX,G$v[1]=G$v[1]/G$M.stage.clientScaleY},G$r.worldToNormalizedViewportPoint=function(G$q,G$r){G$qr.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(G$q,this._projectionViewMatrix,G$r);var G$v=G$r.elements;G$v[0]=G$v[0]/G$M.stage.clientScaleX,G$v[1]=G$v[1]/G$M.stage.clientScaleY},G$r.convertScreenCoordToOrthographicCoord=function(G$q,G$r){if(this._orthographic){var G$v=G$L.clientWidth,G$H=G$L.clientHeight,G$A=this.orthographicVerticalSize*this.aspectRatio/G$v,G$y=this.orthographicVerticalSize/G$H,G$R=G$q.elements,G$W=G$r.elements;return G$W[0]=(-G$v/2+G$R[0])*G$A,G$W[1]=(G$H/2-G$R[1])*G$y,G$W[2]=(this.nearPlane-this.farPlane)*(G$R[2]+1)/2-this.nearPlane,G$Rr.transformCoordinate(G$r,this.transform.worldMatrix,G$r),!0}return!1},G$D(0,G$r,"projectionViewMatrix",function(){return G$qr.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),G$D(0,G$r,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var G$q=this.viewport;return G$q.width/G$q.height},function(G$q){if(G$q<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=G$q,this._calculateProjectionMatrix()}),G$D(0,G$r,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),G$D(0,G$r,"needViewport",function(){var G$q=this.normalizedViewport;return 0===G$q.x&&0===G$q.y&&1===G$q.width&&1===G$q.height}),G$D(0,G$r,"viewport",function(){if(this._viewportExpressedInClipSpace){var G$q=this._normalizedViewport,G$r=this.renderTargetSize,G$v=G$r.width,G$H=G$r.height;this._viewport.x=G$q.x*G$v,this._viewport.y=G$q.y*G$H,this._viewport.width=G$q.width*G$v,this._viewport.height=G$q.height*G$H}return this._viewport},function(G$q){if(null!=this.renderTarget&&(G$q.x<0||G$q.y<0||0==G$q.width||0==G$q.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=G$q,this._calculateProjectionMatrix()}),G$D(0,G$r,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var G$q=this._viewport,G$r=this.renderTargetSize,G$v=G$r.width,G$H=G$r.height;this._normalizedViewport.x=G$q.x/G$v,this._normalizedViewport.y=G$q.y/G$H,this._normalizedViewport.width=G$q.width/G$v,this._normalizedViewport.height=G$q.height/G$H}return this._normalizedViewport},function(G$q){G$q.x<0&&(G$q.x=0,console.warn("Camera: viewport.x must large than 0.0.")),G$q.y<0&&(G$q.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<G$q.x+G$q.width&&(G$q.width=1-G$q.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<G$q.y+G$q.height&&(G$q.height=1-G$q.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=G$q,this._calculateProjectionMatrix()}),G$D(0,G$r,"projectionMatrix",function(){return this._projectionMatrix},function(G$q){this._projectionMatrix=G$q,this._useUserProjectionMatrix=!0}),G$D(0,G$r,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),G$K(G$R,["_tempVector20",function(){return this._tempVector20=new G$yr}]),G$R}()),G$lr=function(G$v){function G$H(G$q,G$r){G$H.__super.call(this,G$r),this._geometryFilter=new G$sr(this),this._render=new G$Zr(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),G$q&&(this._geometryFilter.sharedMesh=G$q)instanceof laya.d3.resource.models.Mesh&&(G$q.loaded?this._render.sharedMaterials=G$q.materials:G$q.once("loaded",this,this._applyMeshMaterials))}G$j(G$H,"laya.d3.core.MeshSprite3D",G$v);var G$q=G$H.prototype;return G$q._changeRenderObjectByMesh=function(G$q){var G$r=this._render._renderElements,G$v=G$r[G$q];G$v||(G$v=G$r[G$q]=new G$Pr),G$v._render=this._render;var G$H=this._render.sharedMaterials[G$q];G$H||(G$H=G$cr.defaultMaterial);var G$A=this._geometryFilter.sharedMesh.getRenderElement(G$q);return G$v._mainSortID=this._getSortID(G$A,G$H),G$v._sprite3D=this,G$v.renderObj=G$A,G$v._material=G$H,G$v},G$q._changeRenderObjectByMaterial=function(G$q,G$r){var G$v=this._render._renderElements[G$q];G$r||(G$r=G$cr.defaultMaterial);var G$H=this._geometryFilter.sharedMesh.getRenderElement(G$q);return G$v._mainSortID=this._getSortID(G$H,G$r),G$v._sprite3D=this,G$v.renderObj=G$H,G$v._material=G$r,G$v},G$q._changeRenderObjectsByMesh=function(){var G$q=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=G$q;for(var G$r=0;G$r<G$q;G$r++)this._changeRenderObjectByMesh(G$r)},G$q._onMeshChanged=function(G$q){var G$r=G$q.sharedMesh;G$r.loaded?this._changeRenderObjectsByMesh():G$r.once("loaded",this,this._onMeshLoaded)},G$q._onMeshLoaded=function(G$q){G$q===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},G$q._onMaterialChanged=function(G$q,G$r,G$v){G$r<this._render._renderElements.length&&this._changeRenderObjectByMaterial(G$r,G$v)},G$q._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},G$q._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},G$q._parseCustomProps=function(G$q,G$r,G$v,G$H){var G$A=this.meshRender,G$y=G$v.lightmapIndex;null!=G$y&&(G$A.lightmapIndex=G$y);var G$R,G$W,G$O=G$v.lightmapScaleOffset;if(G$O&&(G$A.lightmapScaleOffset=new G$Wr(G$O[0],G$O[1],G$O[2],G$O[3])),G$H.instanceParams)(G$R=G$H.instanceParams.loadPath)&&(G$W=G$m.getRes(G$r[G$R]),(this.meshFilter.sharedMesh=G$W).loaded?G$A.sharedMaterials=G$W.materials:G$W.once("loaded",this,this._applyMeshMaterials));else{(G$R=G$v.meshPath)&&(G$W=G$m.getRes(G$r[G$R]),this.meshFilter.sharedMesh=G$W);var G$N=G$v.materials;if(G$N){var G$x=G$A.sharedMaterials,G$K=G$N.length;G$x.length=G$K;for(var G$T=0;G$T<G$K;G$T++)G$x[G$T]=G$m.getRes(G$r[G$N[G$T].path]);G$A.sharedMaterials=G$x}}},G$q._applyMeshMaterials=function(G$q){for(var G$r=this._render.sharedMaterials,G$v=G$q.materials,G$H=0,G$A=G$v.length;G$H<G$A;G$H++)G$r[G$H]||(G$r[G$H]=G$v[G$H]);this._render.sharedMaterials=G$r},G$q._addToInitStaticBatchManager=function(){G$H._staticBatchManager._addInitBatchSprite(this)},G$q.cloneTo=function(G$q){var G$r=G$q;G$r._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var G$v=this._render,G$H=G$r._render;G$H.enable=G$v.enable,G$H.sharedMaterials=G$v.sharedMaterials,G$H.castShadow=G$v.castShadow;var G$A=G$v.lightmapScaleOffset;G$A&&(G$H.lightmapScaleOffset=G$A.clone()),G$H.lightmapIndex=G$v.lightmapIndex,G$H.receiveShadow=G$v.receiveShadow,G$H.sortingFudge=G$v.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,G$q)},G$q.destroy=function(G$q){if(void 0===G$q&&(G$q=!0),!this.destroyed){var G$r=this.meshFilter.sharedMesh;null!=G$r&&(G$r.loaded||G$r.off("loaded",this,this._applyMeshMaterials)),G$v.prototype.destroy.call(this,G$q),this._geometryFilter._destroy()}},G$D(0,G$q,"meshFilter",function(){return this._geometryFilter}),G$D(0,G$q,"meshRender",function(){return this._render}),G$H.__init__=function(){G$Hq._staticBatchManagers.push(G$H._staticBatchManager)},G$H.load=function(G$q){return G$M.loader.create(G$q,null,null,G$H)},G$K(G$H,["_staticBatchManager",function(){return this._staticBatchManager=new G$ar}]),G$H}(G$fr)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$q,G$r){"use strict";for(var G$v in Object.defineProperty(G$r,"__esModule",{value:!0}),Laya){var G$H=Laya[G$v];G$H&&G$H.__isclass&&(G$r[G$v]=G$H)}}),function(G$q,G$r,G$Aq){G$Aq.un,G$Aq.uns;var G$v=G$Aq.static,G$H=G$Aq.class,G$y=G$Aq.getset,G$g=G$Aq.__newvec,G$W=laya.maths.Bezier,G$K=laya.utils.Browser,G$Eq=laya.utils.Byte,G$A=(laya.events.Event,laya.events.EventDispatcher),G$R=laya.display.Graphics,G$O=(laya.resource.HTMLCanvas,laya.utils.Handler),G$N=laya.net.Loader,G$T=laya.maths.MathUtil,G$Qq=laya.maths.Matrix,G$X=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),G$x=(laya.renders.RenderContext,laya.resource.Resource),G$j=laya.utils.RunDriver,G$yq=laya.display.Sprite,G$D=laya.utils.Stat,G$sq=laya.resource.Texture,G$m=(laya.net.URL,laya.utils.Utils),G$Q=function(){function G$q(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return G$H(G$q,"laya.ani.AnimationContent"),G$q}(),G$s=function(){function G$q(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return G$H(G$q,"laya.ani.AnimationNodeContent"),G$q}(),G$e=function(){function G$q(){}return G$H(G$q,"laya.ani.AnimationParser01"),G$q.parse=function(G$q,G$r){var G$v=G$r.__getBuffer(),G$H=0,G$A=0,G$y=0,G$R=0,G$W=0,G$O=0,G$N=0,G$x=G$r.readUTFString();G$q._aniClassName=G$x;var G$K,G$T=G$r.readUTFString().split("\n"),G$j=G$r.getUint8(),G$D=G$r.getUint32(),G$g=G$r.getUint32();0<G$D&&(G$K=G$v.slice(G$D,G$g));var G$X=new G$Eq(G$K);for(0<G$g&&(G$q._publicExtData=G$v.slice(G$g,G$v.byteLength)),G$q._useParent=!!G$r.getUint8(),G$q._anis.length=G$j,G$H=0;G$H<G$j;G$H++){var G$m=G$q._anis[G$H]=new G$Q;G$m.nodes=new Array;var G$B=G$m.name=G$T[G$r.getUint16()];G$q._aniMap[G$B]=G$H,G$m.bone3DMap={},G$m.playTime=G$r.getFloat32(),G$m.playTime<=0&&console.error("播放时间不能为0  url="+G$q.url+" name="+G$m.name);var G$e=G$m.nodes.length=G$r.getUint8();for(G$A=G$m.totalKeyframeDatasLength=0;G$A<G$e;G$A++){var G$p=G$m.nodes[G$A]=new G$s;G$p.childs=[];var G$M=G$r.getInt16();0<=G$M&&(G$p.name=G$T[G$M],G$m.bone3DMap[G$p.name]=G$A),G$p.keyFrame=new Array,G$p.parentIndex=G$r.getInt16(),-1==G$p.parentIndex?G$p.parent=null:G$p.parent=G$m.nodes[G$p.parentIndex],G$p.lerpType=G$r.getUint8();var G$z=G$r.getUint32();G$X.pos=G$z;var G$P=G$p.keyframeWidth=G$X.getUint16();if(G$m.totalKeyframeDatasLength+=G$P,0===G$p.lerpType||1===G$p.lerpType)for(G$p.interpolationMethod=[],G$p.interpolationMethod.length=G$P,G$y=0;G$y<G$P;G$y++)G$p.interpolationMethod[G$y]=G$o.interpolation[G$X.getUint8()];null!=G$p.parent&&G$p.parent.childs.push(G$p);var G$V=G$r.getUint16();0<G$V&&(G$p.extenData=G$v.slice(G$r.pos,G$r.pos+G$V),G$r.pos+=G$V);var G$a,G$J=G$r.getUint16(),G$$=0;for(G$y=0,G$R=G$p.keyFrame.length=G$J;G$y<G$R;G$y++){if((G$a=G$p.keyFrame[G$y]=new G$Z).duration=G$r.getFloat32(),G$a.startTime=G$$,2===G$p.lerpType){G$a.interpolationData=[];var G$G,G$E=G$r.getUint8();switch(G$G=G$r.getFloat32()){case 254:for(G$a.interpolationData.length=G$P,G$N=0;G$N<G$P;G$N++)G$a.interpolationData[G$N]=0;break;case 255:for(G$a.interpolationData.length=G$P,G$N=0;G$N<G$P;G$N++)G$a.interpolationData[G$N]=5;break;default:for(G$a.interpolationData.push(G$G),G$O=1;G$O<G$E;G$O++)G$a.interpolationData.push(G$r.getFloat32())}}for(G$a.data=new Float32Array(G$P),G$W=0;G$W<G$P;G$W++)G$a.data[G$W]=G$r.getFloat32(),-1e-8<G$a.data[G$W]&&G$a.data[G$W]<1e-8&&(G$a.data[G$W]=0);G$$+=G$a.duration}G$a.startTime=G$m.playTime,G$p.playTime=G$m.playTime,G$q._calculateKeyFrame(G$p,G$J,G$P)}}},G$q}(),G$p=function(){function G$M(){}return G$H(G$M,"laya.ani.AnimationParser02"),G$M.READ_DATA=function(){G$M._DATA.offset=G$M._reader.getUint32(),G$M._DATA.size=G$M._reader.getUint32()},G$M.READ_BLOCK=function(){for(var G$q=G$M._BLOCK.count=G$M._reader.getUint16(),G$r=G$M._BLOCK.blockStarts=[],G$v=G$M._BLOCK.blockLengths=[],G$H=0;G$H<G$q;G$H++)G$r.push(G$M._reader.getUint32()),G$v.push(G$M._reader.getUint32())},G$M.READ_STRINGS=function(){var G$q=G$M._reader.getUint32(),G$r=G$M._reader.getUint16(),G$v=G$M._reader.pos;G$M._reader.pos=G$q+G$M._DATA.offset;for(var G$H=0;G$H<G$r;G$H++)G$M._strings[G$H]=G$M._reader.readUTFString();G$M._reader.pos=G$v},G$M.parse=function(G$q,G$r){G$M._templet=G$q;(G$M._reader=G$r).__getBuffer();G$M.READ_DATA(),G$M.READ_BLOCK(),G$M.READ_STRINGS();for(var G$v=0,G$H=G$M._BLOCK.count;G$v<G$H;G$v++){var G$A=G$r.getUint16(),G$y=G$M._strings[G$A],G$R=G$M["READ_"+G$y];if(null==G$R)throw new Error("model file err,no this function:"+G$A+" "+G$y);G$R.call()}},G$M.READ_ANIMATIONS=function(){var G$q=G$M._reader,G$r=G$q.__getBuffer(),G$v=0,G$H=0,G$A=0,G$y=0,G$R=G$q.getUint16(),G$W=[];for(G$W.length=G$R,G$v=0;G$v<G$R;G$v++)G$W[G$v]=G$o.interpolation[G$q.getByte()];var G$O=G$q.getUint8();for(G$M._templet._anis.length=G$O,G$v=0;G$v<G$O;G$v++){var G$N=G$M._templet._anis[G$v]={};G$N.nodes=new Array;var G$x=G$N.name=G$M._strings[G$q.getUint16()];G$M._templet._aniMap[G$x]=G$v,G$N.bone3DMap={},G$N.playTime=G$q.getFloat32();var G$K=G$N.nodes.length=G$q.getInt16();for(G$H=G$N.totalKeyframeDatasLength=0;G$H<G$K;G$H++){var G$T=G$N.nodes[G$H]={};G$T.keyframeWidth=G$R,G$T.childs=[];var G$j=G$q.getUint16();0<=G$j&&(G$T.name=G$M._strings[G$j],G$N.bone3DMap[G$T.name]=G$H),G$T.keyFrame=new Array,G$T.parentIndex=G$q.getInt16(),-1==G$T.parentIndex?G$T.parent=null:G$T.parent=G$N.nodes[G$T.parentIndex],G$N.totalKeyframeDatasLength+=G$R,G$T.interpolationMethod=G$W,null!=G$T.parent&&G$T.parent.childs.push(G$T);var G$D=G$q.getUint16(),G$g=null,G$X=null;for(G$A=0,G$y=G$T.keyFrame.length=G$D;G$A<G$y;G$A++){(G$g=G$T.keyFrame[G$A]={}).startTime=G$q.getFloat32(),G$X&&(G$X.duration=G$g.startTime-G$X.startTime);var G$m=G$M._DATA.offset,G$B=G$q.getUint32(),G$e=4*G$R,G$p=G$r.slice(G$m+G$B,G$m+G$B+G$e);G$g.data=new Float32Array(G$p),G$X=G$g}G$g.duration=0,G$T.playTime=G$N.playTime,G$M._templet._calculateKeyFrame(G$T,G$D,G$R)}}},G$M._templet=null,G$M._reader=null,G$M._strings=[],G$v(G$M,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),G$M}(),G$Zq=(function(){function G$q(){}G$H(G$q,"laya.ani.AnimationState"),G$q.stopped=0,G$q.paused=1,G$q.playing=2}(),function(){function G$A(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new G$fq,this.resultMatrix=new G$Qq,this._children=[]}G$H(G$A,"laya.ani.bone.Bone");var G$q=G$A.prototype;return G$q.setTempMatrix=function(G$q){this._tempMatrix=G$q;var G$r,G$v=0;for(G$v=0,G$r=this._children.length;G$v<G$r;G$v++)this._children[G$v].setTempMatrix(this._tempMatrix)},G$q.update=function(G$q){var G$r;if(this.rotation=this.transform.skX,G$q)G$r=this.resultTransform.getMatrix(),G$Qq.mul(G$r,G$q,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)G$r=this.resultTransform.getMatrix(),G$Qq.mul(G$r,this.parentBone.resultMatrix,this.resultMatrix);else{var G$v=this.parentBone,G$H=NaN,G$A=NaN,G$y=NaN,G$R=this.parentBone.resultMatrix;G$r=this.resultTransform.getMatrix();var G$W=G$R.a*G$r.tx+G$R.c*G$r.ty+G$R.tx,G$O=G$R.b*G$r.tx+G$R.d*G$r.ty+G$R.ty,G$N=new G$Qq;this.inheritRotation?(G$H=Math.atan2(G$v.resultMatrix.b,G$v.resultMatrix.a),G$A=Math.cos(G$H),G$y=Math.sin(G$H),G$N.setTo(G$A,G$y,-G$y,G$A,0,0),G$Qq.mul(this._tempMatrix,G$N,G$Qq.TEMP),G$Qq.TEMP.copyTo(G$N),G$r=this.resultTransform.getMatrix(),G$Qq.mul(G$r,G$N,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,G$r=this.resultTransform.getMatrix(),G$Qq.TEMP.identity(),G$Qq.TEMP.d=this.d,G$Qq.mul(G$r,G$Qq.TEMP,this.resultMatrix)),this.resultMatrix.tx=G$W,this.resultMatrix.ty=G$O}else(G$r=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var G$x,G$K=0;for(G$K=0,G$x=this._children.length;G$K<G$x;G$K++)this._children[G$K].update()},G$q.updateChild=function(){var G$q,G$r=0;for(G$r=0,G$q=this._children.length;G$r<G$q;G$r++)this._children[G$r].update()},G$q.setRotation=function(G$q){this._sprite&&(this._sprite.rotation=180*G$q/Math.PI)},G$q.updateDraw=function(G$q,G$r){G$A.ShowBones&&!G$A.ShowBones[this.name]||(this._sprite||(this._sprite=new G$yq,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),G$Aq.stage.addChild(this._sprite)),this._sprite.x=G$q+this.resultMatrix.tx,this._sprite.y=G$r+this.resultMatrix.ty);var G$v,G$H=0;for(G$H=0,G$v=this._children.length;G$H<G$v;G$H++)this._children[G$H].updateDraw(G$q,G$r)},G$q.addChild=function(G$q){this._children.push(G$q),G$q.parentBone=this},G$q.findBone=function(G$q){if(this.name==G$q)return this;var G$r,G$v,G$H=0;for(G$H=0,G$r=this._children.length;G$H<G$r;G$H++)if(G$v=this._children[G$H].findBone(G$q))return G$v;return null},G$q.localToWorld=function(G$q){var G$r=G$q[0],G$v=G$q[1];G$q[0]=G$r*this.resultMatrix.a+G$v*this.resultMatrix.c+this.resultMatrix.tx,G$q[1]=G$r*this.resultMatrix.b+G$v*this.resultMatrix.d+this.resultMatrix.ty},G$A.ShowBones={},G$A}()),G$Yq=function(){function G$g(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}G$H(G$g,"laya.ani.bone.BoneSlot");var G$q=G$g.prototype;return G$q.showSlotData=function(G$q,G$r){void 0===G$r&&(G$r=!0),this.currSlotData=G$q,G$r&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},G$q.showDisplayByName=function(G$q){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(G$q))},G$q.replaceDisplayByName=function(G$q,G$r){if(this.currSlotData){var G$v;G$v=this.currSlotData.getDisplayByName(G$q);var G$H;G$H=this.currSlotData.getDisplayByName(G$r),this.replaceDisplayByIndex(G$v,G$H)}},G$q.replaceDisplayByIndex=function(G$q,G$r){this.currSlotData&&(this._replaceDic[G$q]=G$r,this.displayIndex==G$q&&this.showDisplayByIndex(G$q))},G$q.showDisplayByIndex=function(G$q){if(null!=this._replaceDic[G$q]&&(G$q=this._replaceDic[G$q]),this.currSlotData&&-1<G$q&&G$q<this.currSlotData.displayArr.length){if(this.displayIndex=G$q,this.currDisplayData=this.currSlotData.displayArr[G$q],this.currDisplayData){var G$r=this.currDisplayData.name;this.currTexture=this.templet.getTexture(G$r),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!G$X.isConchApp||G$X.isConchApp&&"0.9.15"<G$yq.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},G$q.replaceSkin=function(G$q){this._diyTexture=G$q,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},G$q.setParentMatrix=function(G$q){this._parentMatrix=G$q},G$q.draw=function(G$q,G$r,G$v,G$H){if(void 0===G$v&&(G$v=!1),void 0===G$H&&(G$H=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var G$A,G$y=this.currTexture;switch(this._diyTexture&&(G$y=this._diyTexture),this.currDisplayData.type){case 0:if(G$q){var G$R=this.getDisplayMatrix();if(this._parentMatrix){var G$W=!1;if(G$R){var G$O;if(G$Qq.mul(G$R,this._parentMatrix,G$Qq.TEMP),G$O=G$v?(null==this._resultMatrix&&(this._resultMatrix=new G$Qq),this._resultMatrix):new G$Qq,!G$X.isWebGL&&this.currDisplayData.uvs||G$X.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var G$N=G$g._tempMatrix;G$N.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(G$N.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(G$W=!0,G$N.rotate(-Math.PI/2)),G$Qq.mul(G$N,G$Qq.TEMP,G$O)}else G$Qq.TEMP.copyTo(G$O);G$W?G$q.drawTexture(G$y,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,G$O):G$q.drawTexture(G$y,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,G$O)}}}break;case 1:if(null==(G$A=G$v?(null==this._skinSprite&&(this._skinSprite=G$g.createSkinMesh()),this._skinSprite):G$g.createSkinMesh()))return;var G$x;if(null==this.currDisplayData.bones){var G$K,G$T=this.currDisplayData.weights;this.deformData&&(G$T=this.deformData),G$K=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=G$P.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=G$P.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=G$T;this.currDisplayData.triangles.length;G$x=this.currDisplayData.triangles,G$A.init2(G$y,null,G$x,this._mVerticleArr,G$K);var G$j,G$D=this.getDisplayMatrix();if(this._parentMatrix)if(G$D)G$Qq.mul(G$D,this._parentMatrix,G$Qq.TEMP),G$j=G$v?(null==this._resultMatrix&&(this._resultMatrix=new G$Qq),this._resultMatrix):new G$Qq,G$Qq.TEMP.copyTo(G$j),G$A.transform=G$j}else this.skinMesh(G$r,G$A,G$H);G$q.drawSkin(G$A);break;case 2:if(null==(G$A=G$v?(null==this._skinSprite&&(this._skinSprite=G$g.createSkinMesh()),this._skinSprite):G$g.createSkinMesh()))return;this.skinMesh(G$r,G$A,G$H),G$q.drawSkin(G$A)}}},G$q.skinMesh=function(G$q,G$r,G$v){var G$H,G$A=this.currTexture,G$y=this.currDisplayData.bones;G$H=this._diyTexture?(G$A=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=G$P.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=G$P.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var G$R,G$W,G$O=this.currDisplayData.weights,G$N=this.currDisplayData.triangles,G$x=0,G$K=0,G$T=0,G$j=NaN,G$D=NaN,G$g=0,G$X=0,G$m=[],G$B=0,G$e=0;if(this.deformData&&0<this.deformData.length){var G$p=0;for(G$B=0,G$e=G$y.length;G$B<G$e;){for(G$T=G$y[G$B++]+G$B,G$K=G$x=0;G$B<G$T;G$B++)G$W=G$q[G$y[G$B]],G$j=G$O[G$g]+this.deformData[G$p++],G$D=G$O[G$g+1]+this.deformData[G$p++],G$X=G$O[G$g+2],G$x+=(G$j*G$W.a+G$D*G$W.c+G$W.tx)*G$X,G$K+=(G$j*G$W.b+G$D*G$W.d+G$W.ty)*G$X,G$g+=3;G$m.push(G$x,G$K)}}else for(G$B=0,G$e=G$y.length;G$B<G$e;){for(G$T=G$y[G$B++]+G$B,G$K=G$x=0;G$B<G$T;G$B++)G$W=G$q[G$y[G$B]],G$j=G$O[G$g],G$D=G$O[G$g+1],G$X=G$O[G$g+2],G$x+=(G$j*G$W.a+G$D*G$W.c+G$W.tx)*G$X,G$K+=(G$j*G$W.b+G$D*G$W.d+G$W.ty)*G$X,G$g+=3;G$m.push(G$x,G$K)}this._mVerticleArr=G$m,G$R=G$N,G$r.init2(G$A,null,G$R,this._mVerticleArr,G$H)},G$q.drawBonePoint=function(G$q){G$q&&this._parentMatrix&&G$q.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},G$q.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},G$q.getMatrix=function(){return this._resultMatrix},G$q.copy=function(){var G$q=new G$g;return G$q.type="copy",G$q.name=this.name,G$q.attachmentName=this.attachmentName,G$q.srcDisplayIndex=this.srcDisplayIndex,G$q.parent=this.parent,G$q.displayIndex=this.displayIndex,G$q.templet=this.templet,G$q.currSlotData=this.currSlotData,G$q.currTexture=this.currTexture,G$q.currDisplayData=this.currDisplayData,G$q},G$g.createSkinMesh=function(){return G$X.isWebGL||G$X.isConchApp?G$j.skinAniSprite():(G$X.isWebGL,null)},G$v(G$g,["_tempMatrix",function(){return this._tempMatrix=new G$Qq}]),G$g}(),G$oq=function(){function G$q(){this.skinName=null,this.deformSlotDataList=[]}return G$H(G$q,"laya.ani.bone.DeformAniData"),G$q}(),G$Cq=function(){function G$q(){this.deformSlotDisplayList=[]}return G$H(G$q,"laya.ani.bone.DeformSlotData"),G$q}(),G$cq=function(){function G$q(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}G$H(G$q,"laya.ani.bone.DeformSlotDisplayData");var G$r=G$q.prototype;return G$r.binarySearch1=function(G$q,G$r){var G$v=0,G$H=G$q.length-2;if(0==G$H)return 1;for(var G$A=G$H>>>1;;){if(G$q[Math.floor(G$A+1)]<=G$r?G$v=G$A+1:G$H=G$A,G$v==G$H)return G$v+1;G$A=G$v+G$H>>>1}return 0},G$r.apply=function(G$q,G$r,G$v){if(void 0===G$v&&(G$v=1),G$q+=.05,!(this.timeList.length<=0)){var G$H=0;if(!(G$q<this.timeList[0])){var G$A=this.vectices[0].length,G$y=[],G$R=this.binarySearch1(this.timeList,G$q);if(this.frameIndex=G$R,G$q>=this.timeList[this.timeList.length-1]){var G$W=this.vectices[this.vectices.length-1];if(G$v<1)for(G$H=0;G$H<G$A;G$H++)G$y[G$H]+=(G$W[G$H]-G$y[G$H])*G$v;else for(G$H=0;G$H<G$A;G$H++)G$y[G$H]=G$W[G$H];this.deformData=G$y}else{this.tweenKeyList[this.frameIndex];var G$O=this.vectices[this.frameIndex-1],G$N=this.vectices[this.frameIndex],G$x=this.timeList[this.frameIndex-1],G$K=this.timeList[this.frameIndex];G$v=this.tweenKeyList[G$R-1]?(G$q-G$x)/(G$K-G$x):0;var G$T=NaN;for(G$H=0;G$H<G$A;G$H++)G$T=G$O[G$H],G$y[G$H]=G$T+(G$N[G$H]-G$T)*G$v;this.deformData=G$y}}}},G$q}(),G$bq=function(){function G$q(){this.time=NaN,this.drawOrder=[]}return G$H(G$q,"laya.ani.bone.DrawOrderData"),G$q}(),G$dq=function(){function G$q(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return G$H(G$q,"laya.ani.bone.EventData"),G$q}(),G$B=function(){function G$Hq(G$q,G$r){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=G$q,this._targetBone=G$r[G$q.targetBoneIndex],this.isSpine=G$q.isSpine,null==this._bones&&(this._bones=[]);for(var G$v=this._bones.length=0,G$H=G$q.boneIndexs.length;G$v<G$H;G$v++)this._bones.push(G$r[G$q.boneIndexs[G$v]]);this.name=G$q.name,this.mix=G$q.mix,this.bendDirection=G$q.bendDirection}G$H(G$Hq,"laya.ani.bone.IkConstraint");var G$q=G$Hq.prototype;return G$q.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},G$q._applyIk1=function(G$q,G$r,G$v,G$H){var G$A=G$q.parentBone,G$y=1/(G$A.resultMatrix.a*G$A.resultMatrix.d-G$A.resultMatrix.b*G$A.resultMatrix.c),G$R=G$r-G$A.resultMatrix.tx,G$W=G$v-G$A.resultMatrix.ty,G$O=(G$R*G$A.resultMatrix.d-G$W*G$A.resultMatrix.c)*G$y-G$q.transform.x,G$N=(G$W*G$A.resultMatrix.a-G$R*G$A.resultMatrix.b)*G$y-G$q.transform.y,G$x=Math.atan2(G$N,G$O)*G$Hq.radDeg-0-G$q.transform.skX;G$q.transform.scX<0&&(G$x+=180),180<G$x?G$x-=360:G$x<-180&&(G$x+=360),G$q.transform.skX=G$q.transform.skY=G$q.transform.skX+G$x*G$H,G$q.update()},G$q.updatePos=function(G$q,G$r){this._sp&&this._sp.pos(G$q,G$r)},G$q._applyIk2=function(G$q,G$r,G$v,G$H,G$A,G$y){if(0!=G$y){var G$R=G$q.resultTransform.x,G$W=G$q.resultTransform.y,G$O=G$q.transform.scX,G$N=G$q.transform.scY,G$x=G$r.transform.scX,G$K=0,G$T=0,G$j=0;G$j=G$O<0?(G$O=-G$O,G$K=180,-1):(G$K=0,1),G$N<0&&(G$N=-G$N,G$j=-G$j),G$T=G$x<0?(G$x=-G$x,180):0;var G$D=G$r.resultTransform.x,G$g=NaN,G$X=NaN,G$m=NaN,G$B=G$q.resultMatrix.a,G$e=G$q.resultMatrix.c,G$p=G$q.resultMatrix.b,G$M=G$q.resultMatrix.d,G$z=Math.abs(G$O-G$N)<=1e-4;G$m=G$z?(G$X=G$B*G$D+G$e*(G$g=G$r.resultTransform.y)+G$q.resultMatrix.tx,G$p*G$D+G$M*G$g+G$q.resultMatrix.ty):(G$g=0,G$X=G$B*G$D+G$q.resultMatrix.tx,G$p*G$D+G$q.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new G$yq,G$Aq.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(G$v,G$H,15,"#ffff00"),this._sp.graphics.drawCircle(G$X,G$m,15,"#ff00ff")),G$q.setRotation(Math.atan2(G$m-G$q.resultMatrix.ty,G$X-G$q.resultMatrix.tx));var G$P=G$q.parentBone;G$B=G$P.resultMatrix.a,G$e=G$P.resultMatrix.c,G$p=G$P.resultMatrix.b;var G$V=1/(G$B*(G$M=G$P.resultMatrix.d)-G$e*G$p),G$a=G$v-G$P.resultMatrix.tx,G$J=G$H-G$P.resultMatrix.ty,G$$=(G$a*G$M-G$J*G$e)*G$V-G$R,G$G=(G$J*G$B-G$a*G$p)*G$V-G$W,G$E=((G$a=G$X-G$P.resultMatrix.tx)*G$M-(G$J=G$m-G$P.resultMatrix.ty)*G$e)*G$V-G$R,G$Q=(G$J*G$B-G$a*G$p)*G$V-G$W,G$s=Math.sqrt(G$E*G$E+G$Q*G$Q),G$Z=G$r.length*G$x,G$Y=NaN,G$o=NaN;if(G$z){var G$C=(G$$*G$$+G$G*G$G-G$s*G$s-(G$Z*=G$O)*G$Z)/(2*G$s*G$Z);G$C<-1?G$C=-1:1<G$C&&(G$C=1),G$o=Math.acos(G$C)*G$A,G$B=G$s+G$Z*G$C,G$e=G$Z*Math.sin(G$o),G$Y=Math.atan2(G$G*G$B-G$$*G$e,G$$*G$B+G$G*G$e)}else{var G$c=(G$B=G$O*G$Z)*G$B,G$b=(G$e=G$N*G$Z)*G$e,G$d=G$$*G$$+G$G*G$G,G$u=Math.atan2(G$G,G$$),G$I=-2*G$b*G$s,G$t=G$b-G$c;if(0<(G$M=G$I*G$I-4*G$t*(G$p=G$b*G$s*G$s+G$c*G$d-G$c*G$b))){var G$F=Math.sqrt(G$M);G$I<0&&(G$F=-G$F);var G$U=(G$F=-(G$I+G$F)/2)/G$t,G$_=G$p/G$F,G$f=Math.abs(G$U)<Math.abs(G$_)?G$U:G$_;G$f*G$f<=G$d&&(G$J=Math.sqrt(G$d-G$f*G$f)*G$A,G$Y=G$u-Math.atan2(G$J,G$f),G$o=Math.atan2(G$J/G$N,(G$f-G$s)/G$O))}var G$S=0,G$l=Number.MAX_VALUE,G$L=0,G$i=0,G$w=0,G$h=0,G$n=0,G$k=0;G$h<(G$M=(G$a=G$s+G$B)*G$a)&&(G$w=0,G$h=G$M,G$n=G$a),(G$M=(G$a=G$s-G$B)*G$a)<G$l&&(G$S=Math.PI,G$l=G$M,G$L=G$a);var G$qq=Math.acos(-G$B*G$s/(G$c-G$b));(G$M=(G$a=G$B*Math.cos(G$qq)+G$s)*G$a+(G$J=G$e*Math.sin(G$qq))*G$J)<G$l&&(G$S=G$qq,G$l=G$M,G$L=G$a,G$i=G$J),G$h<G$M&&(G$w=G$qq,G$h=G$M,G$n=G$a,G$k=G$J),G$o=G$d<=(G$l+G$h)/2?(G$Y=G$u-Math.atan2(G$i*G$A,G$L),G$S*G$A):(G$Y=G$u-Math.atan2(G$k*G$A,G$n),G$w*G$A)}var G$rq=Math.atan2(G$g,G$D)*G$j,G$vq=G$q.resultTransform.skX;180<(G$Y=(G$Y-G$rq)*G$Hq.radDeg+G$K-G$vq)?G$Y-=360:G$Y<-180&&(G$Y+=360),G$q.resultTransform.x=G$R,G$q.resultTransform.y=G$W,G$q.resultTransform.skX=G$q.resultTransform.skY=G$vq+G$Y*G$y,G$vq=G$r.resultTransform.skX,180<(G$o=((G$o+G$rq)*G$Hq.radDeg-0)*G$j+G$T-(G$vq%=360))?G$o-=360:G$o<-180&&(G$o+=360),G$r.resultTransform.x=G$D,G$r.resultTransform.y=G$g,G$r.resultTransform.skX=G$r.resultTransform.skY=G$r.resultTransform.skY+G$o*G$y,G$q.update()}},G$q._applyIk3=function(G$q,G$r,G$v,G$H,G$A,G$y){if(0!=G$y){var G$R,G$W,G$O=G$r.resultMatrix.a*G$r.length,G$N=G$r.resultMatrix.b*G$r.length,G$x=G$O*G$O+G$N*G$N,G$K=Math.sqrt(G$x),G$T=G$q.resultMatrix.tx,G$j=G$q.resultMatrix.ty,G$D=G$r.resultMatrix.tx,G$g=G$r.resultMatrix.ty,G$X=G$D-G$T,G$m=G$g-G$j,G$B=G$X*G$X+G$m*G$m,G$e=Math.sqrt(G$B),G$p=(G$X=G$v-G$q.resultMatrix.tx)*G$X+(G$m=G$H-G$q.resultMatrix.ty)*G$m,G$M=Math.sqrt(G$p);if(G$K+G$e<=G$M||G$M+G$K<=G$e||G$M+G$e<=G$K){var G$z=NaN;G$D=G$T+(G$z=G$K+G$e<=G$M?1:-1)*(G$v-G$T)*G$e/G$M,G$g=G$j+G$z*(G$H-G$j)*G$e/G$M}else{var G$P=(G$B-G$x+G$p)/(2*G$p),G$V=Math.sqrt(G$B-G$P*G$P*G$p)/G$M,G$a=G$T+G$X*G$P,G$J=G$j+G$m*G$P,G$$=-G$m*G$V,G$G=G$X*G$V;G$g=0<G$A?(G$D=G$a-G$$,G$J-G$G):(G$D=G$a+G$$,G$J+G$G)}G$R=G$D,G$W=G$g,this.isDebug&&(this._sp||(this._sp=new G$yq,G$Aq.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(G$T,G$j,15,"#ff00ff"),this._sp.graphics.drawCircle(G$v,G$H,15,"#ffff00"),this._sp.graphics.drawCircle(G$R,G$W,15,"#ff00ff"));var G$E,G$Q;G$E=Math.atan2(G$W-G$q.resultMatrix.ty,G$R-G$q.resultMatrix.tx),G$q.setRotation(G$E),(G$Q=G$Hq._tempMatrix).identity(),G$Q.rotate(G$E),G$Q.scale(G$q.resultMatrix.getScaleX(),G$q.resultMatrix.getScaleY()),G$Q.translate(G$q.resultMatrix.tx,G$q.resultMatrix.ty),G$Q.copyTo(G$q.resultMatrix),G$q.updateChild();var G$s,G$Z;G$s=Math.atan2(G$H-G$W,G$v-G$R),G$r.setRotation(G$s),(G$Z=G$Hq._tempMatrix).identity(),G$Z.rotate(G$s),G$Z.scale(G$r.resultMatrix.getScaleX(),G$r.resultMatrix.getScaleY()),G$Z.translate(G$R,G$W),G$Q.copyTo(G$r.resultMatrix),G$r.updateChild()}},G$v(G$Hq,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new G$Qq}]),G$Hq}(),G$uq=function(){function G$q(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return G$H(G$q,"laya.ani.bone.IkConstraintData"),G$q}(),G$M=function(){function G$Z(G$q,G$r){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=G$q,this.position=G$q.position,this.spacing=G$q.spacing,this.rotateMix=G$q.rotateMix,this.translateMix=G$q.translateMix,this.bones=[];for(var G$v=this.data.bones,G$H=0,G$A=G$v.length;G$H<G$A;G$H++)this.bones.push(G$r[G$v[G$H]])}G$H(G$Z,"laya.ani.bone.PathConstraint");var G$q=G$Z.prototype;return G$q.apply=function(G$q,G$r){if(this.target){var G$v=this.translateMix,G$H=this.translateMix,G$A=0<G$H,G$y=this.data.spacingMode,G$R="length"==G$y,G$W=this.data.rotateMode,G$O="tangent"==G$W,G$N="chainScale"==G$W,G$x=[],G$K=this.bones.length,G$T=G$O?G$K:G$K+1,G$j=[];(this._spaces=G$j)[0]=this.position;var G$D=this.spacing;if(G$N||G$R)for(var G$g=0,G$X=G$T-1;G$g<G$X;){var G$m=this.bones[G$g],G$B=G$m.length,G$e=G$B*G$m.resultMatrix.a,G$p=G$B*G$m.resultMatrix.b;G$B=Math.sqrt(G$e*G$e+G$p*G$p),G$N&&(G$x[G$g]=G$B),G$j[++G$g]=G$R?Math.max(0,G$B+G$D):G$D}else for(G$g=1;G$g<G$T;G$g++)G$j[G$g]=G$D;var G$M=this.computeWorldPositions(this.target,G$q,G$r,G$T,G$O,"percent"==this.data.positionMode,"percent"==G$y);if(this._debugKey){for(G$g=0;G$g<G$M.length;G$g++)G$r.drawCircle(G$M[G$g++],G$M[G$g++],5,"#00ff00");var G$z=[];for(G$g=0;G$g<G$M.length;G$g++)G$z.push(G$M[G$g++],G$M[G$g++]);G$r.drawLines(0,0,G$z,"#ff0000")}var G$P=G$M[0],G$V=G$M[1],G$a=this.data.offsetRotation,G$J="chain"==G$W&&0==G$a,G$$=NaN;for(G$g=0,G$$=3;G$g<G$K;G$g++,G$$+=3){(G$m=this.bones[G$g]).resultMatrix.tx+=(G$P-G$m.resultMatrix.tx)*G$v,G$m.resultMatrix.ty+=(G$V-G$m.resultMatrix.ty)*G$v;var G$G=(G$e=G$M[G$$])-G$P,G$E=(G$p=G$M[G$$+1])-G$V;if(G$N&&0!=(G$B=G$x[G$g])){var G$Q=(Math.sqrt(G$G*G$G+G$E*G$E)/G$B-1)*G$H+1;G$m.resultMatrix.a*=G$Q,G$m.resultMatrix.c*=G$Q}if(G$P=G$e,G$V=G$p,G$A){var G$s=G$m.resultMatrix.a,G$Z=G$m.resultMatrix.c,G$Y=G$m.resultMatrix.b,G$o=G$m.resultMatrix.d,G$C=NaN,G$c=NaN,G$b=NaN;G$C=G$O?G$M[G$$-1]:0==G$j[G$g+1]?G$M[G$$+2]:Math.atan2(G$E,G$G),G$C-=Math.atan2(G$Y,G$s)-G$a/180*Math.PI,G$J&&(G$c=Math.cos(G$C),G$b=Math.sin(G$C),G$P+=((G$B=G$m.length)*(G$c*G$s-G$b*G$Y)-G$G)*G$H,G$V+=(G$B*(G$b*G$s+G$c*G$Y)-G$E)*G$H),G$C>Math.PI?G$C-=2*Math.PI:G$C<-Math.PI&&(G$C+=2*Math.PI),G$C*=G$H,G$c=Math.cos(G$C),G$b=Math.sin(G$C),G$m.resultMatrix.a=G$c*G$s-G$b*G$Y,G$m.resultMatrix.c=G$c*G$Z-G$b*G$o,G$m.resultMatrix.b=G$b*G$s+G$c*G$Y,G$m.resultMatrix.d=G$b*G$Z+G$c*G$o}}}},G$q.computeWorldVertices2=function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R,G$W,G$O=G$q.currDisplayData.bones,G$N=G$q.currDisplayData.weights,G$x=G$q.currDisplayData.triangles,G$K=0,G$T=0,G$j=0,G$D=0,G$g=0,G$X=0,G$m=0,G$B=0,G$e=0,G$p=0,G$M=0;if(null!=G$O){for(G$K=0;G$K<G$v;G$K+=2)G$T+=(G$D=G$O[G$T])+1,G$j+=G$D;var G$z=G$r;for(G$g=G$y,G$X=3*G$j;G$g<G$H;G$g+=2){for(G$B=G$m=0,G$D=G$O[G$T++],G$D+=G$T;G$T<G$D;G$T++,G$X+=3){G$R=G$z[G$O[G$T]].resultMatrix,G$e=G$N[G$X],G$p=G$N[G$X+1];var G$P=G$N[G$X+2];G$m+=(G$e*G$R.a+G$p*G$R.c+G$R.tx)*G$P,G$B+=(G$e*G$R.b+G$p*G$R.d+G$R.ty)*G$P}G$A[G$g]=G$m,G$A[G$g+1]=G$B}}else{var G$V,G$a;if(G$x||(G$x=G$N),G$q.deformData&&(G$x=G$q.deformData),G$V=G$q.parent,G$r)for(G$M=G$r.length,G$K=0;G$K<G$M;G$K++)if(G$r[G$K].name==G$V){G$W=G$r[G$K];break}G$W&&(G$a=G$W.resultMatrix),G$a||(G$a=G$Z._tempMt);var G$J=G$a.tx,G$$=G$a.ty,G$G=G$a.a,G$E=G$a.b,G$Q=G$a.c,G$s=G$a.d;for(G$W&&(G$s*=G$W.d),G$T=G$v,G$g=G$y;G$g<G$H;G$T+=2,G$g+=2)G$e=G$x[G$T],G$p=G$x[G$T+1],G$A[G$g]=G$e*G$G+G$p*G$E+G$J,G$A[G$g+1]=-(G$e*G$Q+G$p*G$s+G$$)}},G$q.computeWorldPositions=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){G$q.currDisplayData.bones,G$q.currDisplayData.weights,G$q.currDisplayData.triangles;var G$W=[],G$O=0,G$N=G$q.currDisplayData.verLen,G$x=this.position,G$K=this._spaces,G$T=[],G$j=[],G$D=G$N/6,G$g=-1,G$X=NaN,G$m=0,G$B=0,G$e=NaN,G$p=NaN,G$M=NaN,G$z=NaN;if(G$D--,G$N-=4,this.computeWorldVertices2(G$q,G$r,2,G$N,G$W,0),this._debugKey)for(G$O=0;G$O<G$W.length;)G$v.drawCircle(G$W[G$O++],G$W[G$O++],10,"#ff0000");G$T=G$W,this._curves.length=G$D;var G$P=this._curves,G$V=G$T[G$X=0],G$a=G$T[1],G$J=0,G$$=0,G$G=0,G$E=0,G$Q=0,G$s=0,G$Z=NaN,G$Y=NaN,G$o=NaN,G$C=NaN,G$c=NaN,G$b=NaN,G$d=NaN,G$u=NaN,G$I=0;for(G$O=0,G$I=2;G$O<G$D;G$O++,G$I+=6)G$J=G$T[G$I],G$$=G$T[G$I+1],G$G=G$T[G$I+2],G$E=G$T[G$I+3],G$c=2*(G$Z=.1875*(G$V-2*G$J+G$G))+(G$o=.09375*(3*(G$J-G$G)-G$V+(G$Q=G$T[G$I+4]))),G$b=2*(G$Y=.1875*(G$a-2*G$$+G$E))+(G$C=.09375*(3*(G$$-G$E)-G$a+(G$s=G$T[G$I+5]))),G$d=.75*(G$J-G$V)+G$Z+.16666667*G$o,G$u=.75*(G$$-G$a)+G$Y+.16666667*G$C,G$X+=Math.sqrt(G$d*G$d+G$u*G$u),G$d+=G$c,G$u+=G$b,G$c+=G$o,G$b+=G$C,G$X+=Math.sqrt(G$d*G$d+G$u*G$u),G$d+=G$c,G$u+=G$b,G$X+=Math.sqrt(G$d*G$d+G$u*G$u),G$d+=G$c+G$o,G$u+=G$b+G$C,G$X+=Math.sqrt(G$d*G$d+G$u*G$u),G$P[G$O]=G$X,G$V=G$Q,G$a=G$s;if(G$y&&(G$x*=G$X),G$R)for(G$O=0;G$O<G$H;G$O++)G$K[G$O]*=G$X;var G$t=this._segments,G$F=0,G$U=0;for(G$U=G$B=G$m=G$O=0;G$O<G$H;G$O++,G$m+=3)if((G$e=G$x+=G$p=G$K[G$O])<0)this.addBeforePosition(G$e,G$T,0,G$j,G$m);else if(G$X<G$e)this.addAfterPosition(G$e-G$X,G$T,G$N-4,G$j,G$m);else{for(;;G$B++)if(!((G$z=G$P[G$B])<G$e)){0==G$B?G$e/=G$z:G$e=(G$e-(G$M=G$P[G$B-1]))/(G$z-G$M);break}if(G$B!=G$g){var G$_=6*(G$g=G$B);for(G$V=G$T[G$_],G$a=G$T[G$_+1],G$J=G$T[G$_+2],G$$=G$T[G$_+3],G$G=G$T[G$_+4],G$E=G$T[G$_+5],G$c=2*(G$Z=.03*(G$V-2*G$J+G$G))+(G$o=.006*(3*(G$J-G$G)-G$V+(G$Q=G$T[G$_+6]))),G$b=2*(G$Y=.03*(G$a-2*G$$+G$E))+(G$C=.006*(3*(G$$-G$E)-G$a+(G$s=G$T[G$_+7]))),G$d=.3*(G$J-G$V)+G$Z+.16666667*G$o,G$u=.3*(G$$-G$a)+G$Y+.16666667*G$C,G$F=Math.sqrt(G$d*G$d+G$u*G$u),G$t[0]=G$F,G$_=1;G$_<8;G$_++)G$d+=G$c,G$u+=G$b,G$c+=G$o,G$b+=G$C,G$F+=Math.sqrt(G$d*G$d+G$u*G$u),G$t[G$_]=G$F;G$d+=G$c,G$u+=G$b,G$F+=Math.sqrt(G$d*G$d+G$u*G$u),G$t[8]=G$F,G$d+=G$c+G$o,G$u+=G$b+G$C,G$F+=Math.sqrt(G$d*G$d+G$u*G$u),G$t[9]=G$F,G$U=0}for(G$e*=G$F;;G$U++)if(!((G$z=G$t[G$U])<G$e)){0==G$U?G$e/=G$z:G$e=G$U+(G$e-(G$M=G$t[G$U-1]))/(G$z-G$M);break}this.addCurvePosition(.1*G$e,G$V,G$a,G$J,G$$,G$G,G$E,G$Q,G$s,G$j,G$m,G$A||0<G$O&&0==G$p)}return G$j},G$q.addBeforePosition=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$r[G$v],G$R=G$r[G$v+1],G$W=G$r[G$v+2]-G$y,G$O=G$r[G$v+3]-G$R,G$N=Math.atan2(G$O,G$W);G$H[G$A]=G$y+G$q*Math.cos(G$N),G$H[G$A+1]=G$R+G$q*Math.sin(G$N),G$H[G$A+2]=G$N},G$q.addAfterPosition=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$r[G$v+2],G$R=G$r[G$v+3],G$W=G$y-G$r[G$v],G$O=G$R-G$r[G$v+1],G$N=Math.atan2(G$O,G$W);G$H[G$A]=G$y+G$q*Math.cos(G$N),G$H[G$A+1]=G$R+G$q*Math.sin(G$N),G$H[G$A+2]=G$N},G$q.addCurvePosition=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K){0==G$q&&(G$q=1e-4);var G$T=G$q*G$q,G$j=G$T*G$q,G$D=1-G$q,G$g=G$D*G$D,G$X=G$g*G$D,G$m=G$D*G$q,G$B=3*G$m,G$e=G$D*G$B,G$p=G$B*G$q,G$M=G$r*G$X+G$H*G$e+G$y*G$p+G$W*G$j,G$z=G$v*G$X+G$A*G$e+G$R*G$p+G$O*G$j;G$N[G$x]=G$M,G$N[G$x+1]=G$z,G$N[G$x+2]=G$K?Math.atan2(G$z-(G$v*G$g+G$A*G$m*2+G$R*G$T),G$M-(G$r*G$g+G$H*G$m*2+G$y*G$T)):0},G$Z.NONE=-1,G$Z.BEFORE=-2,G$Z.AFTER=-3,G$v(G$Z,["_tempMt",function(){return this._tempMt=new G$Qq}]),G$Z}(),G$Iq=function(){function G$q(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return G$H(G$q,"laya.ani.bone.PathConstraintData"),G$q}(),G$tq=function(){function G$q(){this.name=null,this.slotArr=[]}return G$H(G$q,"laya.ani.bone.SkinData"),G$q}(),G$Fq=function(){function G$q(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}G$H(G$q,"laya.ani.bone.SkinSlotDisplayData");var G$r=G$q.prototype;return G$r.createTexture=function(G$q){return this.texture||(this.texture=new G$sq(G$q.bitmap,this.uvs),G$q.bitmap.alphaTexture&&(this.texture.alphaTexture=new G$sq(G$q.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=G$q.height,this.texture.height=G$q.width,this.texture.offsetX=-G$q.offsetX,this.texture.offsetY=-G$q.offsetY,this.texture.sourceWidth=G$q.sourceHeight,this.texture.sourceHeight=G$q.sourceWidth):(this.texture.width=G$q.width,this.texture.height=G$q.height,this.texture.offsetX=-G$q.offsetX,this.texture.offsetY=-G$q.offsetY,this.texture.sourceWidth=G$q.sourceWidth,this.texture.sourceHeight=G$q.sourceHeight),G$X.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},G$r.destory=function(){this.texture&&this.texture.destroy()},G$q}(),G$Uq=function(){function G$q(){this.name=null,this.displayArr=[]}return G$H(G$q,"laya.ani.bone.SlotData"),G$q.prototype.getDisplayByName=function(G$q){for(var G$r=0,G$v=this.displayArr.length;G$r<G$v;G$r++)if(this.displayArr[G$r].attachmentName==G$q)return G$r;return-1},G$q}(),G$z=function(){function G$q(G$q,G$r){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=G$g(2,0),this._data=G$q,null==this._bones&&(this._bones=[]),this.target=G$r[G$q.targetIndex];var G$v,G$H=0;for(G$H=0,G$v=G$q.boneIndexs.length;G$H<G$v;G$H++)this._bones.push(G$r[G$q.boneIndexs[G$H]]);this.rotateMix=G$q.rotateMix,this.translateMix=G$q.translateMix,this.scaleMix=G$q.scaleMix,this.shearMix=G$q.shearMix}return G$H(G$q,"laya.ani.bone.TfConstraint"),G$q.prototype.apply=function(){for(var G$q,G$r=this.target.resultMatrix.a,G$v=this.target.resultMatrix.b,G$H=this.target.resultMatrix.c,G$A=this.target.resultMatrix.d,G$y=0,G$R=this._bones.length;G$y<G$R;G$y++){if(G$q=this._bones[G$y],0<this.rotateMix){var G$W=G$q.resultMatrix.a,G$O=G$q.resultMatrix.b,G$N=G$q.resultMatrix.c,G$x=G$q.resultMatrix.d,G$K=Math.atan2(G$H,G$r)-Math.atan2(G$N,G$W)+this._data.offsetRotation*Math.PI/180;G$K>Math.PI?G$K-=2*Math.PI:G$K<-Math.PI&&(G$K+=2*Math.PI),G$K*=this.rotateMix;var G$T=Math.cos(G$K),G$j=Math.sin(G$K);G$q.resultMatrix.a=G$T*G$W-G$j*G$N,G$q.resultMatrix.b=G$T*G$O-G$j*G$x,G$q.resultMatrix.c=G$j*G$W+G$T*G$N,G$q.resultMatrix.d=G$j*G$O+G$T*G$x}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),G$q.resultMatrix.tx+=(this._temp[0]-G$q.resultMatrix.tx)*this.translateMix,G$q.resultMatrix.ty+=(this._temp[1]-G$q.resultMatrix.ty)*this.translateMix,G$q.updateChild()),0<this.scaleMix){var G$D=Math.sqrt(G$q.resultMatrix.a*G$q.resultMatrix.a+G$q.resultMatrix.c*G$q.resultMatrix.c),G$g=Math.sqrt(G$r*G$r+G$H*G$H),G$X=1e-5<G$D?(G$D+(G$g-G$D+this._data.offsetScaleX)*this.scaleMix)/G$D:0;G$q.resultMatrix.a*=G$X,G$q.resultMatrix.c*=G$X,G$D=Math.sqrt(G$q.resultMatrix.b*G$q.resultMatrix.b+G$q.resultMatrix.d*G$q.resultMatrix.d),G$g=Math.sqrt(G$v*G$v+G$A*G$A),G$X=1e-5<G$D?(G$D+(G$g-G$D+this._data.offsetScaleY)*this.scaleMix)/G$D:0,G$q.resultMatrix.b*=G$X,G$q.resultMatrix.d*=G$X}if(0<this.shearMix){G$O=G$q.resultMatrix.b,G$x=G$q.resultMatrix.d;var G$m=Math.atan2(G$x,G$O);(G$K=Math.atan2(G$A,G$v)-Math.atan2(G$H,G$r)-(G$m-Math.atan2(G$q.resultMatrix.c,G$q.resultMatrix.a)))>Math.PI?G$K-=2*Math.PI:G$K<-Math.PI&&(G$K+=2*Math.PI),G$K=G$m+(G$K+this._data.offsetShearY*Math.PI/180)*this.shearMix,G$X=Math.sqrt(G$O*G$O+G$x*G$x),G$q.resultMatrix.b=Math.cos(G$K)*G$X,G$q.resultMatrix.d=Math.sin(G$K)*G$X}}},G$q}(),G$_q=function(){function G$q(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return G$H(G$q,"laya.ani.bone.TfConstraintData"),G$q}(),G$fq=function(){function G$q(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}G$H(G$q,"laya.ani.bone.Transform");var G$r=G$q.prototype;return G$r.initData=function(G$q){null!=G$q.x&&(this.x=G$q.x),null!=G$q.y&&(this.y=G$q.y),null!=G$q.skX&&(this.skX=G$q.skX),null!=G$q.skY&&(this.skY=G$q.skY),null!=G$q.scX&&(this.scX=G$q.scX),null!=G$q.scY&&(this.scY=G$q.scY)},G$r.getMatrix=function(){var G$q;return(G$q=this.mMatrix?this.mMatrix:this.mMatrix=new G$Qq).identity(),G$q.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(G$q,this.skewX*Math.PI/180,this.skewY*Math.PI/180),G$q.rotate(this.skX*Math.PI/180),G$q.translate(this.x,this.y),G$q},G$r.skew=function(G$q,G$r,G$v){var G$H=Math.sin(G$v),G$A=Math.cos(G$v),G$y=Math.sin(G$r),G$R=Math.cos(G$r);return G$q.setTo(G$q.a*G$R-G$q.b*G$H,G$q.a*G$y+G$q.b*G$A,G$q.c*G$R-G$q.d*G$H,G$q.c*G$y+G$q.d*G$A,G$q.tx*G$R-G$q.ty*G$H,G$q.tx*G$y+G$q.ty*G$A),G$q},G$q}(),G$P=function(){function G$q(){}return G$H(G$q,"laya.ani.bone.UVTools"),G$q.getRelativeUV=function(G$q,G$r,G$v){var G$H=G$q[0],G$A=G$q[2]-G$q[0],G$y=G$q[1],G$R=G$q[5]-G$q[1];G$v||(G$v=[]),G$v.length=G$r.length;var G$W,G$O=0;G$W=G$v.length;var G$N=1/G$A,G$x=1/G$R;for(G$O=0;G$O<G$W;G$O+=2)G$v[G$O]=(G$r[G$O]-G$H)*G$N,G$v[G$O+1]=(G$r[G$O+1]-G$y)*G$x;return G$v},G$q.getAbsoluteUV=function(G$q,G$r,G$v){if(0==G$q[0]&&0==G$q[1]&&1==G$q[4]&&1==G$q[5])return G$v?(G$m.copyArray(G$v,G$r),G$v):G$r;var G$H=G$q[0],G$A=G$q[2]-G$q[0],G$y=G$q[1],G$R=G$q[5]-G$q[1];G$v||(G$v=[]),G$v.length=G$r.length;var G$W,G$O=0;for(G$W=G$v.length,G$O=0;G$O<G$W;G$O+=2)G$v[G$O]=G$r[G$O]*G$A+G$H,G$v[G$O+1]=G$r[G$O+1]*G$R+G$y;return G$v},G$q}(),G$Z=function(){function G$q(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return G$H(G$q,"laya.ani.KeyFramesContent"),G$q}(),G$V=function(){function G$x(){}return G$H(G$x,"laya.ani.math.BezierLerp"),G$x.getBezierRate=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$x._getBezierParamKey(G$r,G$v,G$H,G$A),G$R=100*G$y+G$q;if(G$x._bezierResultCache[G$R])return G$x._bezierResultCache[G$R];var G$W,G$O=G$x._getBezierPoints(G$r,G$v,G$H,G$A,G$y),G$N=0;for(G$W=G$O.length,G$N=0;G$N<G$W;G$N+=2)if(G$q<=G$O[G$N])return G$x._bezierResultCache[G$R]=G$O[G$N+1],G$O[G$N+1];return G$x._bezierResultCache[G$R]=1},G$x._getBezierParamKey=function(G$q,G$r,G$v,G$H){return 100*(100*(100*(100*G$q+G$r)+G$v)+G$H)},G$x._getBezierPoints=function(G$q,G$r,G$v,G$H,G$A){return G$x._bezierPointsCache[G$A]?G$x._bezierPointsCache[G$A]:(G$y=[0,0,G$q,G$r,G$v,G$H,1,1],G$R=(new G$W).getBezierPoints(G$y,100,3),G$x._bezierPointsCache[G$A]=G$R);var G$y,G$R},G$x._bezierResultCache={},G$x._bezierPointsCache={},G$x}(),G$a=function(G$q){function G$r(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,G$r.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}G$H(G$r,"laya.ani.AnimationPlayer",G$A);var G$v=G$r.prototype;return G$Aq.imps(G$v,{"laya.resource.IDestroy":!0}),G$v._onTempletLoadedComputeFullKeyframeIndices=function(G$q,G$r,G$v){this._templet===G$v&&this._cachePlayRate===G$q&&this._cacheFrameRate===G$r&&this._computeFullKeyframeIndices()},G$v._computeFullKeyframeIndices=function(){for(var G$q=this._fullFrames=[],G$r=this._templet,G$v=this._cacheFrameRateInterval*this._cachePlayRate,G$H=0,G$A=G$r.getAnimationCount();G$H<G$A;G$H++){for(var G$y=[],G$R=0,G$W=G$r.getAnimation(G$H).nodes.length;G$R<G$W;G$R++){for(var G$O=G$r.getAnimation(G$H).nodes[G$R],G$N=Math.floor(G$O.playTime/G$v+.01),G$x=new Uint16Array(G$N+1),G$K=-1,G$T=0,G$j=G$O.keyFrame.length;G$T<G$j;G$T++){var G$D=G$O.keyFrame[G$T],G$g=G$D.startTime,G$X=G$g+G$D.duration+G$v;do{for(var G$m=Math.floor(G$g/G$v+.5),G$B=G$K+1;G$B<G$m;G$B++)G$x[G$B]=G$T;G$x[G$K=G$m]=G$T,G$g+=G$v}while(G$g<=G$X)}G$y.push(G$x)}G$q.push(G$y)}},G$v._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},G$v._calculatePlayDuration=function(){if(0!==this.state){var G$q=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=G$q),this._playEnd>G$q&&(this._playEnd=G$q),this._playDuration=this._playEnd-this._playStart}},G$v._setPlayParams=function(G$q,G$r){this._currentTime=G$q,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/G$r+.01),0),this._currentFrameTime=this._currentKeyframeIndex*G$r},G$v._setPlayParamsWhenStop=function(G$q,G$r){this._currentTime=G$q,this._currentKeyframeIndex=Math.max(Math.floor(G$q/G$r+.01),0),this._currentFrameTime=this._currentKeyframeIndex*G$r,this._currentAnimationClipIndex=-1},G$v._update=function(G$q){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var G$r=this._cacheFrameRateInterval*this._cachePlayRate,G$v=0;this._startUpdateLoopCount!==G$D.loopCount&&(G$v=G$q*this.playbackRate,this._elapsedPlaybackTime+=G$v);var G$H=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=G$H)return this._setPlayParamsWhenStop(G$H,G$r),void this.event("stopped");if(G$v+=this._currentTime,0<G$H)if(G$H<=G$v)do{if(G$v-=G$H,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(G$H,G$r),this._stopWhenCircleFinish=!1,void this.event("stopped");G$v<G$H&&(this._setPlayParams(G$v,G$r),this.event("complete"))}while(G$H<=G$v);else this._setPlayParams(G$v,G$r);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(G$H,G$r),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},G$v._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},G$v.play=function(G$q,G$r,G$v,G$H,G$A){if(void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=1),void 0===G$v&&(G$v=2147483647),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(G$v<0||G$H<0||G$A<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==G$A&&G$A<G$H)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=G$r,this._overallDuration=G$v,this._playStart=G$H,this._playEnd=G$A,this._paused=!1,this._currentAnimationClipIndex=G$q,this._currentKeyframeIndex=0,this._startUpdateLoopCount=G$D.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},G$v.playByFrame=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$q&&(G$q=0),void 0===G$r&&(G$r=1),void 0===G$v&&(G$v=2147483647),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=30);var G$R=1e3/G$y;this.play(G$q,G$r,G$v,G$H*G$R,G$A*G$R)},G$v.stop=function(G$q){void 0===G$q&&(G$q=!0),G$q?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},G$y(0,G$v,"playEnd",function(){return this._playEnd}),G$y(0,G$v,"templet",function(){return this._templet},function(G$q){0===!this.state&&this.stop(!0),this._templet!==G$q&&((this._templet=G$q).loaded?this._computeFullKeyframeIndices():G$q.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),G$y(0,G$v,"playStart",function(){return this._playStart}),G$y(0,G$v,"playDuration",function(){return this._playDuration}),G$y(0,G$v,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),G$y(0,G$v,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),G$y(0,G$v,"overallDuration",function(){return this._overallDuration}),G$y(0,G$v,"currentFrameTime",function(){return this._currentFrameTime}),G$y(0,G$v,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),G$y(0,G$v,"currentPlayTime",function(){return this._currentTime+this._playStart}),G$y(0,G$v,"cachePlayRate",function(){return this._cachePlayRate},function(G$q){this._cachePlayRate!==G$q&&(this._cachePlayRate=G$q,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[G$q,this._cacheFrameRate])))}),G$y(0,G$v,"cacheFrameRate",function(){return this._cacheFrameRate},function(G$q){this._cacheFrameRate!==G$q&&(this._cacheFrameRate=G$q,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,G$q])))}),G$y(0,G$v,"currentTime",null,function(G$q){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(G$q<this._playStart||G$q>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=G$D.loopCount;var G$r=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=G$q,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/G$r),0),this._currentFrameTime=this._currentKeyframeIndex*G$r}}),G$y(0,G$v,"paused",function(){return this._paused},function(G$q){(this._paused=G$q)&&this.event("paused")}),G$y(0,G$v,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),G$y(0,G$v,"destroyed",function(){return this._destroyed}),G$r}(),G$Y=function(G$q){function G$r(){G$r.__super.call(this),G$X.isConchNode&&(this.drawSkin=function(G$q){G$q.transform||(G$q.transform=G$Qq.EMPTY),this._addCmd([G$q]),this.setSkinMesh&&this.setSkinMesh(G$q._ps,G$q.mVBData,G$q.mEleNum,0,G$q.mTexture,G$q.transform)})}return G$H(G$r,"laya.ani.GraphicsAni",G$R),G$r.prototype.drawSkin=function(G$q){var G$r=[G$q];this._saveToCmd(G$X._context._drawSkin,G$r)},G$r.create=function(){return G$r._caches.pop()||new G$r},G$r.recycle=function(G$q){G$q.clear(),G$r._caches.push(G$q)},G$r._caches=[],G$r}(),G$o=function(G$q){function G$B(){this._aniMap={},this.unfixedLastAniIndex=-1,G$B.__super.call(this),this._anis=new Array}G$H(G$B,"laya.ani.AnimationTemplet",G$x);var G$r=G$B.prototype;return G$r.parse=function(G$q){var G$r=new G$Eq(G$q);this._aniVersion=G$r.readUTFString(),G$e.parse(this,G$r)},G$r._calculateKeyFrame=function(G$q,G$r,G$v){var G$H=G$q.keyFrame;G$H[G$r]=G$H[0];for(var G$A=0;G$A<G$r;G$A++){var G$y=G$H[G$A];G$y.nextData=0===G$y.duration?G$y.data:G$H[G$A+1].data}G$H.length--},G$r.onAsynLoaded=function(G$q,G$r,G$v){var G$H=new G$Eq(G$r);switch(this._aniVersion=G$H.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":G$p.parse(this,G$H);break;default:G$e.parse(this,G$H)}this._endLoaded()},G$r.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},G$r.getAnimationCount=function(){return this._anis.length},G$r.getAnimation=function(G$q){return this._anis[G$q]},G$r.getAniDuration=function(G$q){return this._anis[G$q].playTime},G$r.getNodes=function(G$q){return this._anis[G$q].nodes},G$r.getNodeIndexWithName=function(G$q,G$r){return this._anis[G$q].bone3DMap[G$r]},G$r.getNodeCount=function(G$q){return this._anis[G$q].nodes.length},G$r.getTotalkeyframesLength=function(G$q){return this._anis[G$q].totalKeyframeDatasLength},G$r.getPublicExtData=function(){return this._publicExtData},G$r.getAnimationDataWithCache=function(G$q,G$r,G$v,G$H){var G$A=G$r[G$v];if(G$A){var G$y=G$A[G$q];return G$y?G$y[G$H]:null}return null},G$r.setAnimationDataWithCache=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$r[G$v]||(G$r[G$v]={});(G$y[G$q]||(G$y[G$q]=[]))[G$H]=G$A},G$r.getOriginalData=function(G$q,G$r,G$v,G$H,G$A){for(var G$y=this._anis[G$q].nodes,G$R=0,G$W=0,G$O=G$y.length,G$N=0;G$W<G$O;G$W++){var G$x,G$K=G$y[G$W];G$x=G$K.keyFrame[G$v[G$W][G$H]],G$K.dataOffset=G$N;var G$T=G$A-G$x.startTime,G$j=G$K.lerpType;if(G$j)switch(G$j){case 0:case 1:for(G$R=0;G$R<G$K.keyframeWidth;)G$R+=G$K.interpolationMethod[G$R](G$K,G$R,G$r,G$N+G$R,G$x.data,G$T,null,G$x.duration,G$x.nextData);break;case 2:var G$D=G$x.interpolationData,G$g=G$D.length,G$X=0;for(G$R=0;G$R<G$g;){var G$m=G$D[G$R];switch(G$m){case 6:case 7:G$R+=G$B.interpolation[G$m](G$K,G$X,G$r,G$N+G$X,G$x.data,G$T,null,G$x.duration,G$x.nextData,G$D,G$R+1);break;default:G$R+=G$B.interpolation[G$m](G$K,G$X,G$r,G$N+G$X,G$x.data,G$T,null,G$x.duration,G$x.nextData)}G$X++}}else for(G$R=0;G$R<G$K.keyframeWidth;)G$R+=G$K.interpolationMethod[G$R](G$K,G$R,G$r,G$N+G$R,G$x.data,G$T,null,G$x.duration,G$x.nextData);G$N+=G$K.keyframeWidth}},G$r.getNodesCurrentFrameIndex=function(G$q,G$r){var G$v=this._anis[G$q].nodes;G$q!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(G$v.length),this.unfixedCurrentTimes=new Float32Array(G$v.length),this.unfixedLastAniIndex=G$q);for(var G$H=0,G$A=G$v.length;G$H<G$A;G$H++){var G$y=G$v[G$H];for(G$r<this.unfixedCurrentTimes[G$H]&&(this.unfixedCurrentFrameIndexes[G$H]=0),this.unfixedCurrentTimes[G$H]=G$r;this.unfixedCurrentFrameIndexes[G$H]<G$y.keyFrame.length&&!(G$y.keyFrame[this.unfixedCurrentFrameIndexes[G$H]].startTime>this.unfixedCurrentTimes[G$H]);)this.unfixedCurrentFrameIndexes[G$H]++;this.unfixedCurrentFrameIndexes[G$H]--}return this.unfixedCurrentFrameIndexes},G$r.getOriginalDataUnfixedRate=function(G$q,G$r,G$v){var G$H=this._anis[G$q].nodes;G$q!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(G$H.length),this.unfixedCurrentTimes=new Float32Array(G$H.length),this.unfixedKeyframes=G$g(G$H.length),this.unfixedLastAniIndex=G$q);for(var G$A=0,G$y=0,G$R=G$H.length,G$W=0;G$y<G$R;G$y++){var G$O=G$H[G$y];for(G$v<this.unfixedCurrentTimes[G$y]&&(this.unfixedCurrentFrameIndexes[G$y]=0),this.unfixedCurrentTimes[G$y]=G$v;this.unfixedCurrentFrameIndexes[G$y]<G$O.keyFrame.length&&!(G$O.keyFrame[this.unfixedCurrentFrameIndexes[G$y]].startTime>this.unfixedCurrentTimes[G$y]);)this.unfixedKeyframes[G$y]=G$O.keyFrame[this.unfixedCurrentFrameIndexes[G$y]],this.unfixedCurrentFrameIndexes[G$y]++;var G$N=this.unfixedKeyframes[G$y];G$O.dataOffset=G$W;var G$x=G$v-G$N.startTime;if(G$O.lerpType)switch(G$O.lerpType){case 0:case 1:for(G$A=0;G$A<G$O.keyframeWidth;)G$A+=G$O.interpolationMethod[G$A](G$O,G$A,G$r,G$W+G$A,G$N.data,G$x,null,G$N.duration,G$N.nextData);break;case 2:var G$K=G$N.interpolationData,G$T=G$K.length,G$j=0;for(G$A=0;G$A<G$T;){var G$D=G$K[G$A];switch(G$D){case 6:case 7:G$A+=G$B.interpolation[G$D](G$O,G$j,G$r,G$W+G$j,G$N.data,G$x,null,G$N.duration,G$N.nextData,G$K,G$A+1);break;default:G$A+=G$B.interpolation[G$D](G$O,G$j,G$r,G$W+G$j,G$N.data,G$x,null,G$N.duration,G$N.nextData)}G$j++}}else for(G$A=0;G$A<G$O.keyframeWidth;)G$A+=G$O.interpolationMethod[G$A](G$O,G$A,G$r,G$W+G$A,G$N.data,G$x,null,G$N.duration,G$N.nextData);G$W+=G$O.keyframeWidth}},G$B._LinearInterpolation_0=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){var G$x=0===G$W?0:G$y/G$W;return G$v[G$H]=(1-G$x)*G$A[G$r]+G$x*G$O[G$r],1},G$B._QuaternionInterpolation_1=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){var G$x=0===G$W?0:G$y/G$W;return G$T.slerpQuaternionArray(G$A,G$r,G$O,G$r,G$x,G$v,G$H),4},G$B._AngleInterpolation_2=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){return 0},G$B._RadiansInterpolation_3=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){return 0},G$B._Matrix4x4Interpolation_4=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){for(var G$x=0;G$x<16;G$x++,G$r++)G$v[G$H+G$x]=G$A[G$r]+G$y*G$R[G$r];return 16},G$B._NoInterpolation_5=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){return G$v[G$H]=G$A[G$r],1},G$B._BezierInterpolation_6=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x){return void 0===G$x&&(G$x=0),G$v[G$H]=G$A[G$r]+(G$O[G$r]-G$A[G$r])*G$V.getBezierRate(G$y/G$W,G$N[G$x],G$N[G$x+1],G$N[G$x+2],G$N[G$x+3]),5},G$B._BezierInterpolation_7=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x){return void 0===G$x&&(G$x=0),G$v[G$H]=G$N[G$x+4]+G$N[G$x+5]*G$V.getBezierRate((.001*G$y+G$N[G$x+6])/G$N[G$x+7],G$N[G$x],G$N[G$x+1],G$N[G$x+2],G$N[G$x+3]),9},G$B.load=function(G$q){return G$Aq.loader.create(G$q,null,null,G$B)},G$B.interpolation=[G$B._LinearInterpolation_0,G$B._QuaternionInterpolation_1,G$B._AngleInterpolation_2,G$B._RadiansInterpolation_3,G$B._Matrix4x4Interpolation_4,G$B._NoInterpolation_5,G$B._BezierInterpolation_6,G$B._BezierInterpolation_7],G$B}(),G$J=function(G$r){function G$v(G$q,G$r){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,G$v.__super.call(this),void 0===G$r&&(G$r=0),G$q&&this.init(G$q,G$r)}G$H(G$v,"laya.ani.bone.Skeleton",G$r);var G$q=G$v.prototype;return G$q.init=function(G$q,G$r){void 0===G$r&&(G$r=0);var G$v,G$H,G$A,G$y=0,G$R=0;if(1==G$r)for(this._graphicsCache=[],G$y=0,G$R=G$q.getAnimationCount();G$y<G$R;G$y++)this._graphicsCache.push([]);if(this._yReverseMatrix=G$q.yReverseMatrix,this._aniMode=G$r,this._templet=G$q,this._player=new G$a,this._player.cacheFrameRate=G$q.rate,this._player.templet=G$q,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=G$q.mBoneArr,this._rootBone=G$q.mRootBone,this._aniSectionDic=G$q.aniSectionDic,0<G$q.ikArr.length)for(this._ikArr=[],G$y=0,G$R=G$q.ikArr.length;G$y<G$R;G$y++)this._ikArr.push(new G$B(G$q.ikArr[G$y],this._boneList));if(0<G$q.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),G$y=0,G$R=G$q.pathArr.length;G$y<G$R;G$y++)G$v=G$q.pathArr[G$y],G$H=new G$M(G$v,this._boneList),(G$A=this._boneSlotDic[G$v.name])&&((G$H=new G$M(G$v,this._boneList)).target=G$A),this._pathDic[G$v.name]=G$H;if(0<G$q.tfArr.length)for(this._tfArr=[],G$y=0,G$R=G$q.tfArr.length;G$y<G$R;G$y++)this._tfArr.push(new G$z(G$q.tfArr[G$y],this._boneList));if(0<G$q.skinDataArray.length){var G$W=this._templet.skinDataArray[this._skinIndex];this._skinName=G$W.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},G$q.load=function(G$q,G$r,G$v){},G$q._onLoaded=function(){},G$q._parseComplete=function(){var G$q=G$$.TEMPLET_DICTIONARY[this._aniPath];G$q&&(this.init(G$q,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},G$q._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},G$q._onPlay=function(){this.event("played")},G$q._onStop=function(){var G$q,G$r=this._templet.eventAniArr[this._aniClipIndex];if(G$r&&this._eventIndex<G$r.length)for(;this._eventIndex<G$r.length;this._eventIndex++)(G$q=G$r[this._eventIndex]).time>=this._player.playStart&&G$q.time<=this._player.playEnd&&this.event("label",G$q);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},G$q._onPause=function(){this.event("paused")},G$q._parseSrcBoneMatrix=function(){var G$q=0,G$r=0;for(G$r=this._templet.srcBoneMatrixArr.length,G$q=0;G$q<G$r;G$q++)this._boneMatrixArray.push(new G$Qq);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var G$v,G$H,G$A=this._templet.boneSlotArray;for(G$q=0,G$r=G$A.length;G$q<G$r;G$q++)G$v=G$A[G$q],null==(G$H=this._bindBoneBoneSlotDic[G$v.parent])&&(this._bindBoneBoneSlotDic[G$v.parent]=G$H=[]),this._boneSlotDic[G$v.name]=G$v=G$v.copy(),G$H.push(G$v),this._boneSlotArray.push(G$v)}},G$q._emitMissedEvents=function(G$q,G$r,G$v){void 0===G$v&&(G$v=0);var G$H=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(G$H){var G$A,G$y,G$R=0;for(G$A=G$H.length,G$R=G$v;G$R<G$A;G$R++)(G$y=G$H[G$R]).time>=this._player.playStart&&G$y.time<=this._player.playEnd&&this.event("label",G$y)}},G$q._update=function(G$q){if(void 0===G$q&&(G$q=!0),!(this._pause||G$q&&this._indexControl)){var G$r=this.timer.currTimer,G$v=this._player.currentKeyframeIndex,G$H=G$r-this._lastTime;if(G$q?this._player._update(G$H):G$v=-1,this._lastTime=G$r,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<G$H&&this._clipIndex==G$v&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var G$A;this._lastUpdateAniClipIndex=this._aniClipIndex,G$v>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var G$y,G$R=this._templet.eventAniArr[this._aniClipIndex];if(G$R&&this._eventIndex<G$R.length&&((G$A=G$R[this._eventIndex]).time>=this._player.playStart&&G$A.time<=this._player.playEnd?this._player.currentPlayTime>=G$A.time&&(this.event("label",G$A),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(G$y=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=G$y&&(this.graphics=G$y));var G$W=0,G$O=0;for(G$O=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,G$O-1)&&0<G$O;)G$O--;if(G$O<this._clipIndex)for(G$W=G$O;G$W<this._clipIndex;G$W++)this._createGraphics(G$W)}else if(1==this._aniMode){if(G$y=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=G$y&&(this.graphics=G$y));for(G$O=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,G$O-1)&&0<G$O;)G$O--;if(G$O<this._clipIndex)for(G$W=G$O;G$W<this._clipIndex;G$W++)this._createGraphics(G$W)}this._createGraphics()}}},G$q._createGraphics=function(G$q){void 0===G$q&&(G$q=-1),-1==G$q&&(G$q=this._clipIndex);var G$r,G$v,G$H=G$q*this._player.cacheFrameRateInterval,G$A=this._templet.drawOrderAniArr[this._aniClipIndex];if(G$A&&0<G$A.length)for(this._drawOrderIndex=0,G$r=G$A[this._drawOrderIndex];G$H>=G$r.time&&(this._drawOrder=G$r.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=G$A.length));)G$r=G$A[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=G$Y.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=G$Y.create(),G$v=this.graphics;var G$y=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],G$q,G$H);var G$R,G$W,G$O,G$N,G$x=this._aniSectionDic[this._aniClipIndex],G$K=0,G$T=0,G$j=0,G$D=0,G$g=0,G$X=this._templet.srcBoneMatrixArr.length;for(G$g=G$x[G$T=0];G$T<G$X;G$T++)G$N=this._boneList[G$T],G$O=this._templet.srcBoneMatrixArr[G$T],G$N.resultTransform.scX=G$O.scX*this._curOriginalData[G$K++],G$N.resultTransform.skX=G$O.skX+this._curOriginalData[G$K++],G$N.resultTransform.skY=G$O.skY+this._curOriginalData[G$K++],G$N.resultTransform.scY=G$O.scY*this._curOriginalData[G$K++],G$N.resultTransform.x=G$O.x+this._curOriginalData[G$K++],G$N.resultTransform.y=G$O.y+this._curOriginalData[G$K++],8===this._templet.tMatrixDataLen&&(G$N.resultTransform.skewX=G$O.skewX+this._curOriginalData[G$K++],G$N.resultTransform.skewY=G$O.skewY+this._curOriginalData[G$K++]);var G$m,G$B={},G$e={};for(G$g+=G$x[1];G$T<G$g;G$T++)G$B[(G$m=G$y[G$T]).name]=this._curOriginalData[G$K++],G$e[G$m.name]=this._curOriginalData[G$K++],this._curOriginalData[G$K++],this._curOriginalData[G$K++],this._curOriginalData[G$K++],this._curOriginalData[G$K++];var G$p,G$M,G$z={},G$P={};for(G$g+=G$x[2];G$T<G$g;G$T++)G$z[(G$m=G$y[G$T]).name]=this._curOriginalData[G$K++],G$P[G$m.name]=this._curOriginalData[G$K++],this._curOriginalData[G$K++],this._curOriginalData[G$K++],this._curOriginalData[G$K++],this._curOriginalData[G$K++];if(this._pathDic)for(G$g+=G$x[3];G$T<G$g;G$T++){if(G$m=G$y[G$T],G$p=this._pathDic[G$m.name])switch(new G$Eq(G$m.extenData).getByte()){case 1:G$p.position=this._curOriginalData[G$K++];break;case 2:G$p.spacing=this._curOriginalData[G$K++];break;case 3:G$p.rotateMix=this._curOriginalData[G$K++],G$p.translateMix=this._curOriginalData[G$K++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(G$Qq.TEMP.identity()),this._ikArr)for(G$T=0,G$g=this._ikArr.length;G$T<G$g;G$T++)G$M=this._ikArr[G$T],G$z.hasOwnProperty(G$M.name)&&(G$M.bendDirection=G$z[G$M.name]),G$P.hasOwnProperty(G$M.name)&&(G$M.mix=G$P[G$M.name]),G$M.apply();if(this._pathDic)for(var G$V in this._pathDic)(G$p=this._pathDic[G$V]).apply(this._boneList,G$v);if(this._tfArr)for(G$T=0,G$D=this._tfArr.length;G$T<G$D;G$T++)this._tfArr[G$T].apply();for(G$T=0,G$D=this._boneList.length;G$T<G$D;G$T++)if(G$N=this._boneList[G$T],G$W=this._bindBoneBoneSlotDic[G$N.name],G$N.resultMatrix.copyTo(this._boneMatrixArray[G$T]),G$W)for(G$j=0,G$g=G$W.length;G$j<G$g;G$j++)(G$R=G$W[G$j])&&G$R.setParentMatrix(G$N.resultMatrix);var G$a,G$J,G$$,G$G,G$E={},G$Q=this._templet.deformAniArr;if(G$Q&&0<G$Q.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,G$T=0,G$g=this._boneSlotArray.length;G$T<G$g;G$T++)(G$R=this._boneSlotArray[G$T]).deformData=null;var G$s,G$Z=G$Q[this._aniClipIndex];for(G$s in G$a=G$Z.default,this._setDeform(G$a,G$E,this._boneSlotArray,G$H),G$Z)"default"!=G$s&&G$s!=this._skinName&&(G$a=G$Z[G$s],this._setDeform(G$a,G$E,this._boneSlotArray,G$H));G$a=G$Z[this._skinName],this._setDeform(G$a,G$E,this._boneSlotArray,G$H)}if(this._drawOrder)for(G$T=0,G$g=this._drawOrder.length;G$T<G$g;G$T++)G$J=G$B[(G$R=this._boneSlotArray[this._drawOrder[G$T]]).name],G$$=G$e[G$R.name],isNaN(G$$)||(G$v.save(),G$v.alpha(G$$)),isNaN(G$J)||-2==G$J||(this._templet.attachmentNames?G$R.showDisplayByName(this._templet.attachmentNames[G$J]):G$R.showDisplayByIndex(G$J)),G$E[this._drawOrder[G$T]]?(G$G=G$E[this._drawOrder[G$T]],G$R.currDisplayData&&G$G[G$R.currDisplayData.attachmentName]?G$R.deformData=G$G[G$R.currDisplayData.attachmentName]:G$R.deformData=null):G$R.deformData=null,isNaN(G$$)?G$R.draw(G$v,this._boneMatrixArray,2==this._aniMode):G$R.draw(G$v,this._boneMatrixArray,2==this._aniMode,G$$),isNaN(G$$)||G$v.restore();else for(G$T=0,G$g=this._boneSlotArray.length;G$T<G$g;G$T++)G$J=G$B[(G$R=this._boneSlotArray[G$T]).name],G$$=G$e[G$R.name],isNaN(G$$)||(G$v.save(),G$v.alpha(G$$)),isNaN(G$J)||-2==G$J||(this._templet.attachmentNames?G$R.showDisplayByName(this._templet.attachmentNames[G$J]):G$R.showDisplayByIndex(G$J)),G$E[G$T]?(G$G=G$E[G$T],G$R.currDisplayData&&G$G[G$R.currDisplayData.attachmentName]?G$R.deformData=G$G[G$R.currDisplayData.attachmentName]:G$R.deformData=null):G$R.deformData=null,isNaN(G$$)?G$R.draw(G$v,this._boneMatrixArray,2==this._aniMode):G$R.draw(G$v,this._boneMatrixArray,2==this._aniMode,G$$),isNaN(G$$)||G$v.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,G$q,G$v):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,G$q,G$v)},G$q._setDeform=function(G$q,G$r,G$v,G$H){if(G$q){var G$A,G$y,G$R,G$W=0,G$O=0,G$N=0;if(G$q)for(G$W=0,G$O=G$q.deformSlotDataList.length;G$W<G$O;G$W++)for(G$A=G$q.deformSlotDataList[G$W],G$N=0;G$N<G$A.deformSlotDisplayList.length;G$N++)G$R=G$v[(G$y=G$A.deformSlotDisplayList[G$N]).slotIndex],G$y.apply(G$H,G$R),G$r[G$y.slotIndex]||(G$r[G$y.slotIndex]={}),G$r[G$y.slotIndex][G$y.attachment]=G$y.deformData}},G$q.getAnimNum=function(){return this._templet.getAnimationCount()},G$q.getAniNameByIndex=function(G$q){return this._templet.getAniNameByIndex(G$q)},G$q.getSlotByName=function(G$q){return this._boneSlotDic[G$q]},G$q.showSkinByName=function(G$q,G$r){void 0===G$r&&(G$r=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(G$q),G$r)},G$q.showSkinByIndex=function(G$q,G$r){void 0===G$r&&(G$r=!0);for(var G$v=0;G$v<this._boneSlotArray.length;G$v++)this._boneSlotArray[G$v].showSlotData(null,G$r);if(this._templet.showSkinByIndex(this._boneSlotDic,G$q,G$r)){var G$H=this._templet.skinDataArray[G$q];this._skinIndex=G$q,this._skinName=G$H.name}this._clearCache()},G$q.showSlotSkinByIndex=function(G$q,G$r){if(0!=this._aniMode){var G$v=this.getSlotByName(G$q);G$v&&G$v.showDisplayByIndex(G$r),this._clearCache()}},G$q.showSlotSkinByName=function(G$q,G$r){if(0!=this._aniMode){var G$v=this.getSlotByName(G$q);G$v&&G$v.showDisplayByName(G$r),this._clearCache()}},G$q.replaceSlotSkinName=function(G$q,G$r,G$v){if(0!=this._aniMode){var G$H=this.getSlotByName(G$q);G$H&&G$H.replaceDisplayByName(G$r,G$v),this._clearCache()}},G$q.replaceSlotSkinByIndex=function(G$q,G$r,G$v){if(0!=this._aniMode){var G$H=this.getSlotByName(G$q);G$H&&G$H.replaceDisplayByIndex(G$r,G$v),this._clearCache()}},G$q.setSlotSkin=function(G$q,G$r){if(0!=this._aniMode){var G$v=this.getSlotByName(G$q);G$v&&G$v.replaceSkin(G$r),this._clearCache()}},G$q._clearCache=function(){if(1==this._aniMode)for(var G$q=0,G$r=this._graphicsCache.length;G$q<G$r;G$q++){for(var G$v=0,G$H=this._graphicsCache[G$q].length;G$v<G$H;G$v++){var G$A=this._graphicsCache[G$q][G$v];G$A!=this.graphics&&G$Y.recycle(G$A)}this._graphicsCache[G$q].length=0}},G$q.play=function(G$q,G$r,G$v,G$H,G$A,G$y){void 0===G$v&&(G$v=!0),void 0===G$H&&(G$H=0),void 0===G$A&&(G$A=0),void 0===G$y&&(G$y=!0),this._indexControl=!1;var G$R=-1,G$W=NaN;if(G$W=G$r?2147483647:0,"string"==typeof G$q)for(var G$O=0,G$N=this._templet.getAnimationCount();G$O<G$N;G$O++){var G$x=this._templet.getAnimation(G$O);if(G$x&&G$q==G$x.name){G$R=G$O;break}}else G$R=G$q;-1<G$R&&G$R<this.getAnimNum()&&(this._aniClipIndex=G$R,(G$v||this._pause||this._currAniIndex!=G$R)&&(this._currAniIndex=G$R,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(G$R)),this._drawOrder=null,this._eventIndex=0,this._player.play(G$R,this._player.playbackRate,G$W,G$H,G$A),G$y&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=G$K.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},G$q.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},G$q.playbackRate=function(G$q){this._player&&(this._player.playbackRate=G$q)},G$q.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},G$q.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=G$K.now(),this.timer.frameLoop(1,this,this._update,null,!0))},G$q._getGrahicsDataWithCache=function(G$q,G$r){return this._graphicsCache[G$q][G$r]},G$q._setGrahicsDataWithCache=function(G$q,G$r,G$v){this._graphicsCache[G$q][G$r]=G$v},G$q.destroy=function(G$q){void 0===G$q&&(G$q=!0),G$r.prototype.destroy.call(this,G$q),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},G$y(0,G$q,"url",function(){return this._aniPath},function(G$q){this.load(G$q)}),G$y(0,G$q,"index",function(){return this._index},function(G$q){this.player&&(this._index=G$q,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),G$y(0,G$q,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),G$y(0,G$q,"templet",function(){return this._templet}),G$y(0,G$q,"player",function(){return this._player}),G$v.useSimpleMeshInCanvas=!1,G$v}(G$yq),G$$=function(G$r){function G$A(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,G$A.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}G$H(G$A,"laya.ani.bone.Templet",G$r);var G$q=G$A.prototype;return G$q.getLoadList=function(){return this._loadList},G$q.loadAni=function(G$q){this._skBufferUrl=G$q,G$Aq.loader.load(G$q,G$O.create(this,this.onComplete),null,"arraybuffer")},G$q.onComplete=function(G$q){if(this._isDestroyed)this.destroy();else{var G$r=G$N.getRes(this._skBufferUrl);G$r?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,G$r)):this.event("error","load failed:"+this._skBufferUrl)}},G$q.parseData=function(G$q,G$r,G$v){void 0===G$v&&(G$v=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=G$q,this._mainTexture&&G$X.isWebGL&&G$q.bitmap&&(G$q.bitmap.enableMerageInAtlas=!1),this._rate=G$v,this.parse(G$r)},G$q.buildArmature=function(G$q){return void 0===G$q&&(G$q=0),new G$J(this,G$q)},G$q.parse=function(G$q){G$r.prototype.parse.call(this,G$q),this._endLoaded(),this._aniVersion!=G$A.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+G$A.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},G$q._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var G$q=0;this._loadList=[];var G$r,G$v=new G$Eq(this.getPublicExtData()),G$H=0,G$A=0,G$y=0,G$R=G$v.getInt32(),G$W=G$v.readUTFString(),G$O=G$W.split("\n");for(G$q=0;G$q<G$R;G$q++)G$r=this._path+G$O[2*G$q],G$W=G$O[2*G$q+1],G$v.getFloat32(),G$v.getFloat32(),G$H=G$v.getFloat32(),G$A=G$v.getFloat32(),G$y=G$v.getFloat32(),isNaN(G$y)?0:G$y,G$y=G$v.getFloat32(),isNaN(G$y)?0:G$y,G$y=G$v.getFloat32(),isNaN(G$y)?G$H:G$y,G$y=G$v.getFloat32(),isNaN(G$y)?G$A:G$y,-1==this._loadList.indexOf(G$r)&&this._loadList.push(G$r);this.event("inited",this)}},G$q._textureComplete=function(){for(var G$q,G$r,G$v=0,G$H=this._loadList.length;G$v<G$H;G$v++)G$r=this._loadList[G$v],G$q=this._textureDic[G$r]=G$N.getRes(G$r),G$X.isWebGL&&G$q&&G$q.bitmap&&(G$q.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},G$q._parsePublicExtData=function(){var G$q=0,G$r=0,G$v=0,G$H=0,G$A=0;for(G$q=0,G$A=this.getAnimationCount();G$q<G$A;G$q++)this._graphicsCache.push([]);var G$y;G$y="Dragon"!=this._aniClassName;var G$R,G$W,G$O=new G$Eq(this.getPublicExtData()),G$N=0,G$x=0,G$K=0,G$T=0,G$j=0,G$D=0,G$g=0,G$X=0,G$m=0,G$B=G$O.getInt32(),G$e=G$O.readUTFString(),G$p=G$e.split("\n");for(G$q=0;G$q<G$B;G$q++){if(G$R=this._mainTexture,G$W=this._path+G$p[2*G$q],G$e=G$p[2*G$q+1],null==this._mainTexture&&(G$R=this._textureDic[G$W]),!G$R)return this.event("error",this),void(this.isParseFail=!0);G$N=G$O.getFloat32(),G$x=G$O.getFloat32(),G$K=G$O.getFloat32(),G$T=G$O.getFloat32(),G$m=G$O.getFloat32(),G$j=isNaN(G$m)?0:G$m,G$m=G$O.getFloat32(),G$D=isNaN(G$m)?0:G$m,G$m=G$O.getFloat32(),G$g=isNaN(G$m)?G$K:G$m,G$m=G$O.getFloat32(),G$X=isNaN(G$m)?G$T:G$m,this.subTextureDic[G$e]=G$sq.create(G$R,G$N,G$x,G$K,G$T,-G$j,-G$D,G$g,G$X),G$R.alphaTexture&&(this.subTextureDic[G$e].alphaTexture=G$sq.create(G$R.alphaTexture,G$N,G$x,G$K,G$T,-G$j,-G$D,G$g,G$X))}this._mainTexture=G$R;var G$M,G$z,G$P,G$V,G$a,G$J=G$O.getUint16();for(G$q=0;G$q<G$J;G$q++)(G$M=[]).push(G$O.getUint16()),G$M.push(G$O.getUint16()),G$M.push(G$O.getUint16()),G$M.push(G$O.getUint16()),this.aniSectionDic[G$q]=G$M;var G$$,G$G=G$O.getInt16(),G$E={};for(G$q=0;G$q<G$G;G$q++)G$z=new G$Zq,0==G$q?G$$=G$z:G$z.root=G$$,G$z.d=G$y?-1:1,G$V=G$O.readUTFString(),G$a=G$O.readUTFString(),G$z.length=G$O.getFloat32(),1==G$O.getByte()&&(G$z.inheritRotation=!1),1==G$O.getByte()&&(G$z.inheritScale=!1),G$z.name=G$V,G$a&&((G$P=G$E[G$a])?G$P.addChild(G$z):this.mRootBone=G$z),G$E[G$V]=G$z,this.mBoneArr.push(G$z);this.tMatrixDataLen=G$O.getUint16();var G$Q,G$s,G$Z=G$O.getUint16(),G$Y=Math.floor(G$Z/this.tMatrixDataLen),G$o=this.srcBoneMatrixArr;for(G$q=0;G$q<G$Y;G$q++)(G$Q=new G$fq).scX=G$O.getFloat32(),G$Q.skX=G$O.getFloat32(),G$Q.skY=G$O.getFloat32(),G$Q.scY=G$O.getFloat32(),G$Q.x=G$O.getFloat32(),G$Q.y=G$O.getFloat32(),8===this.tMatrixDataLen&&(G$Q.skewX=G$O.getFloat32(),G$Q.skewY=G$O.getFloat32()),G$o.push(G$Q),(G$z=this.mBoneArr[G$q]).transform=G$Q;var G$C,G$c=G$O.getUint16(),G$b=0;for(G$q=0;G$q<G$c;G$q++){for(G$s=new G$uq,G$b=G$O.getUint16(),G$r=0;G$r<G$b;G$r++)G$s.boneNames.push(G$O.readUTFString()),G$s.boneIndexs.push(G$O.getInt16());G$s.name=G$O.readUTFString(),G$s.targetBoneName=G$O.readUTFString(),G$s.targetBoneIndex=G$O.getInt16(),G$s.bendDirection=G$O.getFloat32(),G$s.mix=G$O.getFloat32(),G$s.isSpine=G$y,this.ikArr.push(G$s)}var G$d,G$u=G$O.getUint16(),G$I=0;for(G$q=0;G$q<G$u;G$q++){for(G$C=new G$_q,G$I=G$O.getUint16(),G$r=0;G$r<G$I;G$r++)G$C.boneIndexs.push(G$O.getInt16());G$C.name=G$O.getUTFString(),G$C.targetIndex=G$O.getInt16(),G$C.rotateMix=G$O.getFloat32(),G$C.translateMix=G$O.getFloat32(),G$C.scaleMix=G$O.getFloat32(),G$C.shearMix=G$O.getFloat32(),G$C.offsetRotation=G$O.getFloat32(),G$C.offsetX=G$O.getFloat32(),G$C.offsetY=G$O.getFloat32(),G$C.offsetScaleX=G$O.getFloat32(),G$C.offsetScaleY=G$O.getFloat32(),G$C.offsetShearY=G$O.getFloat32(),this.tfArr.push(G$C)}var G$t=G$O.getUint16(),G$F=0;for(G$q=0;G$q<G$t;G$q++){for((G$d=new G$Iq).name=G$O.readUTFString(),G$F=G$O.getUint16(),G$r=0;G$r<G$F;G$r++)G$d.bones.push(G$O.getInt16());G$d.target=G$O.readUTFString(),G$d.positionMode=G$O.readUTFString(),G$d.spacingMode=G$O.readUTFString(),G$d.rotateMode=G$O.readUTFString(),G$d.offsetRotation=G$O.getFloat32(),G$d.position=G$O.getFloat32(),G$d.spacing=G$O.getFloat32(),G$d.rotateMix=G$O.getFloat32(),G$d.translateMix=G$O.getFloat32(),this.pathArr.push(G$d)}var G$U,G$_,G$f,G$S,G$l,G$L=0,G$i=0,G$w=0,G$h=NaN,G$n=0,G$k=G$O.getInt16();for(G$q=0;G$q<G$k;G$q++){var G$qq=G$O.getUint8(),G$rq={};this.deformAniArr.push(G$rq);for(var G$vq=0;G$vq<G$qq;G$vq++)for((G$U=new G$oq).skinName=G$O.getUTFString(),G$rq[G$U.skinName]=G$U,G$L=G$O.getInt16(),G$r=0;G$r<G$L;G$r++)for(G$_=new G$Cq,G$U.deformSlotDataList.push(G$_),G$i=G$O.getInt16(),G$v=0;G$v<G$i;G$v++)for(G$f=new G$cq,G$_.deformSlotDisplayList.push(G$f),G$f.slotIndex=G$O.getInt16(),G$f.attachment=G$O.getUTFString(),G$w=G$O.getInt16(),G$H=0;G$H<G$w;G$H++)for(1==G$O.getByte()?G$f.tweenKeyList.push(!0):G$f.tweenKeyList.push(!1),G$h=G$O.getFloat32(),G$f.timeList.push(G$h),G$S=[],G$f.vectices.push(G$S),G$n=G$O.getInt16(),G$A=0;G$A<G$n;G$A++)G$S.push(G$O.getFloat32())}var G$Hq,G$Aq,G$yq=G$O.getInt16(),G$Rq=0,G$Wq=0;for(G$q=0;G$q<G$yq;G$q++){for(G$Rq=G$O.getInt16(),G$l=[],G$r=0;G$r<G$Rq;G$r++){for((G$Hq=new G$bq).time=G$O.getFloat32(),G$Wq=G$O.getInt16(),G$v=0;G$v<G$Wq;G$v++)G$Hq.drawOrder.push(G$O.getInt16());G$l.push(G$Hq)}this.drawOrderAniArr.push(G$l)}var G$Oq,G$Nq=G$O.getInt16(),G$xq=0;for(G$q=0;G$q<G$Nq;G$q++){for(G$xq=G$O.getInt16(),G$Aq=[],G$r=0;G$r<G$xq;G$r++)(G$Oq=new G$dq).name=G$O.getUTFString(),G$Oq.intValue=G$O.getInt32(),G$Oq.floatValue=G$O.getFloat32(),G$Oq.stringValue=G$O.getUTFString(),G$Oq.time=G$O.getFloat32(),G$Aq.push(G$Oq);this.eventAniArr.push(G$Aq)}var G$Kq=G$O.getInt16();if(0<G$Kq)for(this.attachmentNames=[],G$q=0;G$q<G$Kq;G$q++)this.attachmentNames.push(G$O.getUTFString());var G$Tq,G$jq,G$Dq=G$O.getInt16();for(G$q=0;G$q<G$Dq;G$q++)(G$Tq=new G$Yq).name=G$O.readUTFString(),G$Tq.parent=G$O.readUTFString(),G$Tq.attachmentName=G$O.readUTFString(),G$Tq.srcDisplayIndex=G$Tq.displayIndex=G$O.getInt16(),(G$Tq.templet=this).boneSlotDic[G$Tq.name]=G$Tq,null==(G$jq=this.bindBoneBoneSlotDic[G$Tq.parent])&&(this.bindBoneBoneSlotDic[G$Tq.parent]=G$jq=[]),G$jq.push(G$Tq),this.boneSlotArray.push(G$Tq);var G$gq,G$Xq,G$mq,G$Bq=G$O.readUTFString().split("\n"),G$eq=0,G$pq=G$O.getUint8(),G$Mq=0,G$zq=0,G$Pq=0,G$Vq=0,G$aq=0,G$Jq=0,G$$q=0;for(G$q=0;G$q<G$pq;G$q++){for((G$gq=new G$tq).name=G$Bq[G$eq++],G$Mq=G$O.getUint8(),G$r=0;G$r<G$Mq;G$r++){for((G$Xq=new G$Uq).name=G$Bq[G$eq++],G$Tq=this.boneSlotDic[G$Xq.name],G$zq=G$O.getUint8(),G$v=0;G$v<G$zq;G$v++){if(G$mq=new G$Fq,this.skinSlotDisplayDataArr.push(G$mq),G$mq.name=G$Bq[G$eq++],G$mq.attachmentName=G$Bq[G$eq++],G$mq.transform=new G$fq,G$mq.transform.scX=G$O.getFloat32(),G$mq.transform.skX=G$O.getFloat32(),G$mq.transform.skY=G$O.getFloat32(),G$mq.transform.scY=G$O.getFloat32(),G$mq.transform.x=G$O.getFloat32(),G$mq.transform.y=G$O.getFloat32(),G$Xq.displayArr.push(G$mq),G$mq.width=G$O.getFloat32(),G$mq.height=G$O.getFloat32(),G$mq.type=G$O.getUint8(),G$mq.verLen=G$O.getUint16(),0<(G$G=G$O.getUint16()))for(G$mq.bones=[],G$H=0;G$H<G$G;G$H++){var G$Gq=G$O.getUint16();G$mq.bones.push(G$Gq)}if(0<(G$Pq=G$O.getUint16()))for(G$mq.uvs=[],G$H=0;G$H<G$Pq;G$H++)G$mq.uvs.push(G$O.getFloat32());if(0<(G$Vq=G$O.getUint16()))for(G$mq.weights=[],G$H=0;G$H<G$Vq;G$H++)G$mq.weights.push(G$O.getFloat32());if(0<(G$aq=G$O.getUint16()))for(G$mq.triangles=[],G$H=0;G$H<G$aq;G$H++)G$mq.triangles.push(G$O.getUint16());if(0<(G$Jq=G$O.getUint16()))for(G$mq.vertices=[],G$H=0;G$H<G$Jq;G$H++)G$mq.vertices.push(G$O.getFloat32());if(0<(G$$q=G$O.getUint16()))for(G$mq.lengths=[],G$H=0;G$H<G$$q;G$H++)G$mq.lengths.push(G$O.getFloat32())}G$gq.slotArr.push(G$Xq)}this.skinDic[G$gq.name]=G$gq,this.skinDataArray.push(G$gq)}1==G$O.getUint8()?(this.yReverseMatrix=new G$Qq(1,0,0,-1,0,0),G$$&&G$$.setTempMatrix(this.yReverseMatrix)):G$$&&G$$.setTempMatrix(new G$Qq),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},G$q.getTexture=function(G$q){var G$r=this.subTextureDic[G$q];return G$r||(G$r=this.subTextureDic[G$q.substr(0,G$q.length-1)]),null==G$r?this._mainTexture:G$r},G$q.showSkinByIndex=function(G$q,G$r,G$v){if(void 0===G$v&&(G$v=!0),G$r<0&&G$r>=this.skinDataArray.length)return!1;var G$H,G$A,G$y=0,G$R=0,G$W=this.skinDataArray[G$r];if(G$W){for(G$y=0,G$R=G$W.slotArr.length;G$y<G$R;G$y++)(G$A=G$W.slotArr[G$y])&&(G$H=G$q[G$A.name])&&(G$H.showSlotData(G$A,G$v),G$v&&"undefined"!=G$H.attachmentName&&"null"!=G$H.attachmentName?G$H.showDisplayByName(G$H.attachmentName):G$H.showDisplayByIndex(G$H.displayIndex));return!0}return!1},G$q.getSkinIndexByName=function(G$q){for(var G$r=0,G$v=this.skinDataArray.length;G$r<G$v;G$r++)if(this.skinDataArray[G$r].name==G$q)return G$r;return-1},G$q.getGrahicsDataWithCache=function(G$q,G$r){return this._graphicsCache[G$q][G$r]},G$q.setGrahicsDataWithCache=function(G$q,G$r,G$v){this._graphicsCache[G$q][G$r]=G$v},G$q.destroy=function(){var G$q;for(var G$r in this._isDestroyed=!0,this.subTextureDic)(G$q=this.subTextureDic[G$r])&&G$q.destroy();for(G$r in this._textureDic)(G$q=this._textureDic[G$r])&&G$q.destroy();for(var G$v=0,G$H=this.skinSlotDisplayDataArr.length;G$v<G$H;G$v++)this.skinSlotDisplayDataArr[G$v].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete G$A.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},G$q.getAniNameByIndex=function(G$q){var G$r=this.getAnimation(G$q);return G$r?G$r.name:null},G$y(0,G$q,"rate",function(){return this._rate},function(G$q){this._rate=G$q}),G$A.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",G$A.TEMPLET_DICTIONARY=null,G$A}(G$o)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(G$q,G$r){"use strict";for(var G$v in Object.defineProperty(G$r,"__esModule",{value:!0}),Laya){var G$H=Laya[G$v];G$H&&G$H.__isclass&&(G$r[G$v]=G$H)}}),function(G$q,G$r){"object"==typeof exports&&"object"==typeof module?window?window.Matter=G$r():module.exports=G$r():"function"==typeof define&&define.amd?define("Matter",[],G$r):"object"==typeof exports?exports.Matter=G$r():G$q.Matter=G$r()}(this,function(){return function(G$v){var G$H={};function G$A(G$q){if(G$H[G$q])return G$H[G$q].exports;var G$r=G$H[G$q]={i:G$q,l:!1,exports:{}};return G$v[G$q].call(G$r.exports,G$r,G$r.exports,G$A),G$r.l=!0,G$r.exports}return G$A.m=G$v,G$A.c=G$H,G$A.d=function(G$q,G$r,G$v){G$A.o(G$q,G$r)||Object.defineProperty(G$q,G$r,{enumerable:!0,get:G$v})},G$A.r=function(G$q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(G$q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G$q,"__esModule",{value:!0})},G$A.t=function(G$r,G$q){if(1&G$q&&(G$r=G$A(G$r)),8&G$q)return G$r;if(4&G$q&&"object"==typeof G$r&&G$r&&G$r.__esModule)return G$r;var G$v=Object.create(null);if(G$A.r(G$v),Object.defineProperty(G$v,"default",{enumerable:!0,value:G$r}),2&G$q&&"string"!=typeof G$r)for(var G$H in G$r)G$A.d(G$v,G$H,function(G$q){return G$r[G$q]}.bind(null,G$H));return G$v},G$A.n=function(G$q){var G$r=G$q&&G$q.__esModule?function(){return G$q.default}:function(){return G$q};return G$A.d(G$r,"a",G$r),G$r},G$A.o=function(G$q,G$r){return Object.prototype.hasOwnProperty.call(G$q,G$r)},G$A.p="",G$A(G$A.s=21)}([function(G$q,G$r){var G$O={};G$q.exports=G$O,function(){G$O._nextId=0,G$O._seed=0,G$O._nowStartTime=+new Date,G$O._warnedOnce={},G$O._decomp=null,G$O.extend=function(G$q,G$r){var G$v,G$H;G$H="boolean"==typeof G$r?(G$v=2,G$r):(G$v=1,!0);for(var G$A=G$v;G$A<arguments.length;G$A++){var G$y=arguments[G$A];if(G$y)for(var G$R in G$y)G$H&&G$y[G$R]&&G$y[G$R].constructor===Object?G$q[G$R]&&G$q[G$R].constructor!==Object?G$q[G$R]=G$y[G$R]:(G$q[G$R]=G$q[G$R]||{},G$O.extend(G$q[G$R],G$H,G$y[G$R])):G$q[G$R]=G$y[G$R]}return G$q},G$O.clone=function(G$q,G$r){return G$O.extend({},G$r,G$q)},G$O.keys=function(G$q){if(Object.keys)return Object.keys(G$q);var G$r=[];for(var G$v in G$q)G$r.push(G$v);return G$r},G$O.values=function(G$q){var G$r=[];if(Object.keys){for(var G$v=Object.keys(G$q),G$H=0;G$H<G$v.length;G$H++)G$r.push(G$q[G$v[G$H]]);return G$r}for(var G$A in G$q)G$r.push(G$q[G$A]);return G$r},G$O.get=function(G$q,G$r,G$v,G$H){G$r=G$r.split(".").slice(G$v,G$H);for(var G$A=0;G$A<G$r.length;G$A+=1)G$q=G$q[G$r[G$A]];return G$q},G$O.set=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$r.split(".").slice(G$H,G$A);return G$O.get(G$q,G$r,0,-1)[G$y[G$y.length-1]]=G$v},G$O.shuffle=function(G$q){for(var G$r=G$q.length-1;0<G$r;G$r--){var G$v=Math.floor(G$O.random()*(G$r+1)),G$H=G$q[G$r];G$q[G$r]=G$q[G$v],G$q[G$v]=G$H}return G$q},G$O.choose=function(G$q){return G$q[Math.floor(G$O.random()*G$q.length)]},G$O.isElement=function(G$q){return"undefined"!=typeof HTMLElement?G$q instanceof HTMLElement:!!(G$q&&G$q.nodeType&&G$q.nodeName)},G$O.isArray=function(G$q){return"[object Array]"===Object.prototype.toString.call(G$q)},G$O.isFunction=function(G$q){return"function"==typeof G$q},G$O.isPlainObject=function(G$q){return"object"==typeof G$q&&G$q.constructor===Object},G$O.isString=function(G$q){return"[object String]"===toString.call(G$q)},G$O.clamp=function(G$q,G$r,G$v){return G$q<G$r?G$r:G$v<G$q?G$v:G$q},G$O.sign=function(G$q){return G$q<0?-1:1},G$O.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-G$O._nowStartTime},G$O.random=function(G$q,G$r){return G$r=void 0!==G$r?G$r:1,(G$q=void 0!==G$q?G$q:0)+G$v()*(G$r-G$q)};var G$v=function(){return G$O._seed=(9301*G$O._seed+49297)%233280,G$O._seed/233280};G$O.colorToNumber=function(G$q){return 3==(G$q=G$q.replace("#","")).length&&(G$q=G$q.charAt(0)+G$q.charAt(0)+G$q.charAt(1)+G$q.charAt(1)+G$q.charAt(2)+G$q.charAt(2)),parseInt(G$q,16)},G$O.logLevel=1,G$O.log=function(){console&&0<G$O.logLevel&&G$O.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},G$O.info=function(){console&&0<G$O.logLevel&&G$O.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},G$O.warn=function(){console&&0<G$O.logLevel&&G$O.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},G$O.warnOnce=function(){var G$q=Array.prototype.slice.call(arguments).join(" ");G$O._warnedOnce[G$q]||(G$O.warn(G$q),G$O._warnedOnce[G$q]=!0)},G$O.deprecated=function(G$q,G$r,G$v){G$q[G$r]=G$O.chain(function(){G$O.warnOnce("🔅 deprecated 🔅",G$v)},G$q[G$r])},G$O.nextId=function(){return G$O._nextId++},G$O.indexOf=function(G$q,G$r){if(G$q.indexOf)return G$q.indexOf(G$r);for(var G$v=0;G$v<G$q.length;G$v++)if(G$q[G$v]===G$r)return G$v;return-1},G$O.map=function(G$q,G$r){if(G$q.map)return G$q.map(G$r);for(var G$v=[],G$H=0;G$H<G$q.length;G$H+=1)G$v.push(G$r(G$q[G$H]));return G$v},G$O.topologicalSort=function(G$q){var G$r=[],G$v=[],G$H=[];for(var G$A in G$q)G$v[G$A]||G$H[G$A]||G$O._topologicalSort(G$A,G$v,G$H,G$q,G$r);return G$r},G$O._topologicalSort=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$H[G$q]||[];G$v[G$q]=!0;for(var G$R=0;G$R<G$y.length;G$R+=1){var G$W=G$y[G$R];G$v[G$W]||(G$r[G$W]||G$O._topologicalSort(G$W,G$r,G$v,G$H,G$A))}G$v[G$q]=!1,G$r[G$q]=!0,G$A.push(G$q)},G$O.chain=function(){for(var G$y=[],G$q=0;G$q<arguments.length;G$q+=1){var G$r=arguments[G$q];G$r._chained?G$y.push.apply(G$y,G$r._chained):G$y.push(G$r)}function G$v(){for(var G$q,G$r=new Array(arguments.length),G$v=0,G$H=arguments.length;G$v<G$H;G$v++)G$r[G$v]=arguments[G$v];for(G$v=0;G$v<G$y.length;G$v+=1){var G$A=G$y[G$v].apply(G$q,G$r);void 0!==G$A&&(G$q=G$A)}return G$q}return G$v._chained=G$y,G$v},G$O.chainPathBefore=function(G$q,G$r,G$v){return G$O.set(G$q,G$r,G$O.chain(G$v,G$O.get(G$q,G$r)))},G$O.chainPathAfter=function(G$q,G$r,G$v){return G$O.set(G$q,G$r,G$O.chain(G$O.get(G$q,G$r),G$v))},G$O.setDecomp=function(G$q){G$O._decomp=G$q},G$O.getDecomp=function(){var G$r=G$O._decomp;try{G$r||"undefined"==typeof window||(G$r=window.decomp),G$r||"undefined"==typeof global||(G$r=global.decomp)}catch(G$q){G$r=null}return G$r}}()},function(G$q,G$r){var G$v={};(G$q.exports=G$v).create=function(G$q){var G$r={min:{x:0,y:0},max:{x:0,y:0}};return G$q&&G$v.update(G$r,G$q),G$r},G$v.update=function(G$q,G$r,G$v){G$q.min.x=1/0,G$q.max.x=-1/0,G$q.min.y=1/0,G$q.max.y=-1/0;for(var G$H=0;G$H<G$r.length;G$H++){var G$A=G$r[G$H];G$A.x>G$q.max.x&&(G$q.max.x=G$A.x),G$A.x<G$q.min.x&&(G$q.min.x=G$A.x),G$A.y>G$q.max.y&&(G$q.max.y=G$A.y),G$A.y<G$q.min.y&&(G$q.min.y=G$A.y)}G$v&&(0<G$v.x?G$q.max.x+=G$v.x:G$q.min.x+=G$v.x,0<G$v.y?G$q.max.y+=G$v.y:G$q.min.y+=G$v.y)},G$v.contains=function(G$q,G$r){return G$r.x>=G$q.min.x&&G$r.x<=G$q.max.x&&G$r.y>=G$q.min.y&&G$r.y<=G$q.max.y},G$v.overlaps=function(G$q,G$r){return G$q.min.x<=G$r.max.x&&G$q.max.x>=G$r.min.x&&G$q.max.y>=G$r.min.y&&G$q.min.y<=G$r.max.y},G$v.translate=function(G$q,G$r){G$q.min.x+=G$r.x,G$q.max.x+=G$r.x,G$q.min.y+=G$r.y,G$q.max.y+=G$r.y},G$v.shift=function(G$q,G$r){var G$v=G$q.max.x-G$q.min.x,G$H=G$q.max.y-G$q.min.y;G$q.min.x=G$r.x,G$q.max.x=G$r.x+G$v,G$q.min.y=G$r.y,G$q.max.y=G$r.y+G$H}},function(G$q,G$r){var G$v={};(G$q.exports=G$v).create=function(G$q,G$r){return{x:G$q||0,y:G$r||0}},G$v.clone=function(G$q){return{x:G$q.x,y:G$q.y}},G$v.magnitude=function(G$q){return Math.sqrt(G$q.x*G$q.x+G$q.y*G$q.y)},G$v.magnitudeSquared=function(G$q){return G$q.x*G$q.x+G$q.y*G$q.y},G$v.rotate=function(G$q,G$r,G$v){var G$H=Math.cos(G$r),G$A=Math.sin(G$r);G$v||(G$v={});var G$y=G$q.x*G$H-G$q.y*G$A;return G$v.y=G$q.x*G$A+G$q.y*G$H,G$v.x=G$y,G$v},G$v.rotateAbout=function(G$q,G$r,G$v,G$H){var G$A=Math.cos(G$r),G$y=Math.sin(G$r);G$H||(G$H={});var G$R=G$v.x+((G$q.x-G$v.x)*G$A-(G$q.y-G$v.y)*G$y);return G$H.y=G$v.y+((G$q.x-G$v.x)*G$y+(G$q.y-G$v.y)*G$A),G$H.x=G$R,G$H},G$v.normalise=function(G$q){var G$r=G$v.magnitude(G$q);return 0===G$r?{x:0,y:0}:{x:G$q.x/G$r,y:G$q.y/G$r}},G$v.dot=function(G$q,G$r){return G$q.x*G$r.x+G$q.y*G$r.y},G$v.cross=function(G$q,G$r){return G$q.x*G$r.y-G$q.y*G$r.x},G$v.cross3=function(G$q,G$r,G$v){return(G$r.x-G$q.x)*(G$v.y-G$q.y)-(G$r.y-G$q.y)*(G$v.x-G$q.x)},G$v.add=function(G$q,G$r,G$v){return G$v||(G$v={}),G$v.x=G$q.x+G$r.x,G$v.y=G$q.y+G$r.y,G$v},G$v.sub=function(G$q,G$r,G$v){return G$v||(G$v={}),G$v.x=G$q.x-G$r.x,G$v.y=G$q.y-G$r.y,G$v},G$v.mult=function(G$q,G$r){return{x:G$q.x*G$r,y:G$q.y*G$r}},G$v.div=function(G$q,G$r){return{x:G$q.x/G$r,y:G$q.y/G$r}},G$v.perp=function(G$q,G$r){return{x:(G$r=!0===G$r?-1:1)*-G$q.y,y:G$r*G$q.x}},G$v.neg=function(G$q){return{x:-G$q.x,y:-G$q.y}},G$v.angle=function(G$q,G$r){return Math.atan2(G$r.y-G$q.y,G$r.x-G$q.x)},G$v._temp=[G$v.create(),G$v.create(),G$v.create(),G$v.create(),G$v.create(),G$v.create()]},function(G$q,G$r,G$v){var G$W={};G$q.exports=G$W;var G$p=G$v(2),G$M=G$v(0);G$W.create=function(G$q,G$r){for(var G$v=[],G$H=0;G$H<G$q.length;G$H++){var G$A=G$q[G$H],G$y={x:G$A.x,y:G$A.y,index:G$H,body:G$r,isInternal:!1};G$v.push(G$y)}return G$v},G$W.fromPath=function(G$q,G$r){var G$H=[];return G$q.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(G$q,G$r,G$v){G$H.push({x:parseFloat(G$r),y:parseFloat(G$v)})}),G$W.create(G$H,G$r)},G$W.centre=function(G$q){for(var G$r,G$v,G$H,G$A=G$W.area(G$q,!0),G$y={x:0,y:0},G$R=0;G$R<G$q.length;G$R++)G$H=(G$R+1)%G$q.length,G$r=G$p.cross(G$q[G$R],G$q[G$H]),G$v=G$p.mult(G$p.add(G$q[G$R],G$q[G$H]),G$r),G$y=G$p.add(G$y,G$v);return G$p.div(G$y,6*G$A)},G$W.mean=function(G$q){for(var G$r={x:0,y:0},G$v=0;G$v<G$q.length;G$v++)G$r.x+=G$q[G$v].x,G$r.y+=G$q[G$v].y;return G$p.div(G$r,G$q.length)},G$W.area=function(G$q,G$r){for(var G$v=0,G$H=G$q.length-1,G$A=0;G$A<G$q.length;G$A++)G$v+=(G$q[G$H].x-G$q[G$A].x)*(G$q[G$H].y+G$q[G$A].y),G$H=G$A;return G$r?G$v/2:Math.abs(G$v)/2},G$W.inertia=function(G$q,G$r){for(var G$v,G$H,G$A=0,G$y=0,G$R=G$q,G$W=0;G$W<G$R.length;G$W++)G$H=(G$W+1)%G$R.length,G$A+=(G$v=Math.abs(G$p.cross(G$R[G$H],G$R[G$W])))*(G$p.dot(G$R[G$H],G$R[G$H])+G$p.dot(G$R[G$H],G$R[G$W])+G$p.dot(G$R[G$W],G$R[G$W])),G$y+=G$v;return G$r/6*(G$A/G$y)},G$W.translate=function(G$q,G$r,G$v){G$v=void 0!==G$v?G$v:1;var G$H,G$A=G$q.length,G$y=G$r.x*G$v,G$R=G$r.y*G$v;for(G$H=0;G$H<G$A;G$H++)G$q[G$H].x+=G$y,G$q[G$H].y+=G$R;return G$q},G$W.rotate=function(G$q,G$r,G$v){if(0!==G$r){var G$H,G$A,G$y,G$R,G$W=Math.cos(G$r),G$O=Math.sin(G$r),G$N=G$v.x,G$x=G$v.y,G$K=G$q.length;for(G$R=0;G$R<G$K;G$R++)G$A=(G$H=G$q[G$R]).x-G$N,G$y=G$H.y-G$x,G$H.x=G$N+(G$A*G$W-G$y*G$O),G$H.y=G$x+(G$A*G$O+G$y*G$W);return G$q}},G$W.contains=function(G$q,G$r){for(var G$v,G$H=G$r.x,G$A=G$r.y,G$y=G$q.length,G$R=G$q[G$y-1],G$W=0;G$W<G$y;G$W++){if(G$v=G$q[G$W],0<(G$H-G$R.x)*(G$v.y-G$R.y)+(G$A-G$R.y)*(G$R.x-G$v.x))return!1;G$R=G$v}return!0},G$W.scale=function(G$q,G$r,G$v,G$H){if(1===G$r&&1===G$v)return G$q;var G$A,G$y;G$H=G$H||G$W.centre(G$q);for(var G$R=0;G$R<G$q.length;G$R++)G$A=G$q[G$R],G$y=G$p.sub(G$A,G$H),G$q[G$R].x=G$H.x+G$y.x*G$r,G$q[G$R].y=G$H.y+G$y.y*G$v;return G$q},G$W.chamfer=function(G$q,G$r,G$v,G$H,G$A){G$r="number"==typeof G$r?[G$r]:G$r||[8],G$v=void 0!==G$v?G$v:-1,G$H=G$H||2,G$A=G$A||14;for(var G$y=[],G$R=0;G$R<G$q.length;G$R++){var G$W=G$q[0<=G$R-1?G$R-1:G$q.length-1],G$O=G$q[G$R],G$N=G$q[(G$R+1)%G$q.length],G$x=G$r[G$R<G$r.length?G$R:G$r.length-1];if(0!==G$x){var G$K=G$p.normalise({x:G$O.y-G$W.y,y:G$W.x-G$O.x}),G$T=G$p.normalise({x:G$N.y-G$O.y,y:G$O.x-G$N.x}),G$j=Math.sqrt(2*Math.pow(G$x,2)),G$D=G$p.mult(G$M.clone(G$K),G$x),G$g=G$p.normalise(G$p.mult(G$p.add(G$K,G$T),.5)),G$X=G$p.sub(G$O,G$p.mult(G$g,G$j)),G$m=G$v;-1===G$v&&(G$m=1.75*Math.pow(G$x,.32)),(G$m=G$M.clamp(G$m,G$H,G$A))%2==1&&(G$m+=1);for(var G$B=Math.acos(G$p.dot(G$K,G$T))/G$m,G$e=0;G$e<G$m;G$e++)G$y.push(G$p.add(G$p.rotate(G$D,G$B*G$e),G$X))}else G$y.push(G$O)}return G$y},G$W.clockwiseSort=function(G$q){var G$v=G$W.mean(G$q);return G$q.sort(function(G$q,G$r){return G$p.angle(G$v,G$q)-G$p.angle(G$v,G$r)}),G$q},G$W.isConvex=function(G$q){var G$r,G$v,G$H,G$A,G$y=0,G$R=G$q.length;if(G$R<3)return null;for(G$r=0;G$r<G$R;G$r++)if(G$H=(G$r+2)%G$R,G$A=(G$q[G$v=(G$r+1)%G$R].x-G$q[G$r].x)*(G$q[G$H].y-G$q[G$v].y),(G$A-=(G$q[G$v].y-G$q[G$r].y)*(G$q[G$H].x-G$q[G$v].x))<0?G$y|=1:0<G$A&&(G$y|=2),3===G$y)return!1;return 0!==G$y||null},G$W.hull=function(G$q){var G$r,G$v,G$H=[],G$A=[];for((G$q=G$q.slice(0)).sort(function(G$q,G$r){var G$v=G$q.x-G$r.x;return 0!=G$v?G$v:G$q.y-G$r.y}),G$v=0;G$v<G$q.length;G$v+=1){for(G$r=G$q[G$v];2<=G$A.length&&G$p.cross3(G$A[G$A.length-2],G$A[G$A.length-1],G$r)<=0;)G$A.pop();G$A.push(G$r)}for(G$v=G$q.length-1;0<=G$v;G$v-=1){for(G$r=G$q[G$v];2<=G$H.length&&G$p.cross3(G$H[G$H.length-2],G$H[G$H.length-1],G$r)<=0;)G$H.pop();G$H.push(G$r)}return G$H.pop(),G$A.pop(),G$H.concat(G$A)}},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$x=G$v(0);G$H.on=function(G$q,G$r,G$v){for(var G$H,G$A=G$r.split(" "),G$y=0;G$y<G$A.length;G$y++)G$H=G$A[G$y],G$q.events=G$q.events||{},G$q.events[G$H]=G$q.events[G$H]||[],G$q.events[G$H].push(G$v);return G$v},G$H.off=function(G$q,G$r,G$v){if(G$r){"function"==typeof G$r&&(G$v=G$r,G$r=G$x.keys(G$q.events).join(" "));for(var G$H=G$r.split(" "),G$A=0;G$A<G$H.length;G$A++){var G$y=G$q.events[G$H[G$A]],G$R=[];if(G$v&&G$y)for(var G$W=0;G$W<G$y.length;G$W++)G$y[G$W]!==G$v&&G$R.push(G$y[G$W]);G$q.events[G$H[G$A]]=G$R}}else G$q.events={}},G$H.trigger=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W=G$q.events;if(G$W&&0<G$x.keys(G$W).length){G$v||(G$v={}),G$H=G$r.split(" ");for(var G$O=0;G$O<G$H.length;G$O++)if(G$y=G$W[G$A=G$H[G$O]]){(G$R=G$x.clone(G$v,!1)).name=G$A,G$R.source=G$q;for(var G$N=0;G$N<G$y.length;G$N++)G$y[G$N].apply(G$q,[G$R])}}}},function(G$q,G$r,G$v){var G$K={};G$q.exports=G$K;var G$R=G$v(4),G$y=G$v(0),G$W=G$v(1),G$T=G$v(6);G$K.create=function(G$q){return G$y.extend({id:G$y.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},G$q)},G$K.setModified=function(G$q,G$r,G$v,G$H){if((G$q.isModified=G$r)&&G$q.cache&&(G$q.cache.allBodies=null,G$q.cache.allConstraints=null,G$q.cache.allComposites=null),G$v&&G$q.parent&&G$K.setModified(G$q.parent,G$r,G$v,G$H),G$H)for(var G$A=0;G$A<G$q.composites.length;G$A++){var G$y=G$q.composites[G$A];G$K.setModified(G$y,G$r,G$v,G$H)}},G$K.add=function(G$q,G$r){var G$v=[].concat(G$r);G$R.trigger(G$q,"beforeAdd",{object:G$r});for(var G$H=0;G$H<G$v.length;G$H++){var G$A=G$v[G$H];switch(G$A.type){case"body":if(G$A.parent!==G$A){G$y.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}G$K.addBody(G$q,G$A);break;case"constraint":G$K.addConstraint(G$q,G$A);break;case"composite":G$K.addComposite(G$q,G$A);break;case"mouseConstraint":G$K.addConstraint(G$q,G$A.constraint)}}return G$R.trigger(G$q,"afterAdd",{object:G$r}),G$q},G$K.remove=function(G$q,G$r,G$v){var G$H=[].concat(G$r);G$R.trigger(G$q,"beforeRemove",{object:G$r});for(var G$A=0;G$A<G$H.length;G$A++){var G$y=G$H[G$A];switch(G$y.type){case"body":G$K.removeBody(G$q,G$y,G$v);break;case"constraint":G$K.removeConstraint(G$q,G$y,G$v);break;case"composite":G$K.removeComposite(G$q,G$y,G$v);break;case"mouseConstraint":G$K.removeConstraint(G$q,G$y.constraint)}}return G$R.trigger(G$q,"afterRemove",{object:G$r}),G$q},G$K.addComposite=function(G$q,G$r){return G$q.composites.push(G$r),G$r.parent=G$q,G$K.setModified(G$q,!0,!0,!1),G$q},G$K.removeComposite=function(G$q,G$r,G$v){var G$H=G$y.indexOf(G$q.composites,G$r);if(-1!==G$H&&G$K.removeCompositeAt(G$q,G$H),G$v)for(var G$A=0;G$A<G$q.composites.length;G$A++)G$K.removeComposite(G$q.composites[G$A],G$r,!0);return G$q},G$K.removeCompositeAt=function(G$q,G$r){return G$q.composites.splice(G$r,1),G$K.setModified(G$q,!0,!0,!1),G$q},G$K.addBody=function(G$q,G$r){return G$q.bodies.push(G$r),G$K.setModified(G$q,!0,!0,!1),G$q},G$K.removeBody=function(G$q,G$r,G$v){var G$H=G$y.indexOf(G$q.bodies,G$r);if(-1!==G$H&&G$K.removeBodyAt(G$q,G$H),G$v)for(var G$A=0;G$A<G$q.composites.length;G$A++)G$K.removeBody(G$q.composites[G$A],G$r,!0);return G$q},G$K.removeBodyAt=function(G$q,G$r){return G$q.bodies.splice(G$r,1),G$K.setModified(G$q,!0,!0,!1),G$q},G$K.addConstraint=function(G$q,G$r){return G$q.constraints.push(G$r),G$K.setModified(G$q,!0,!0,!1),G$q},G$K.removeConstraint=function(G$q,G$r,G$v){var G$H=G$y.indexOf(G$q.constraints,G$r);if(-1!==G$H&&G$K.removeConstraintAt(G$q,G$H),G$v)for(var G$A=0;G$A<G$q.composites.length;G$A++)G$K.removeConstraint(G$q.composites[G$A],G$r,!0);return G$q},G$K.removeConstraintAt=function(G$q,G$r){return G$q.constraints.splice(G$r,1),G$K.setModified(G$q,!0,!0,!1),G$q},G$K.clear=function(G$q,G$r,G$v){if(G$v)for(var G$H=0;G$H<G$q.composites.length;G$H++)G$K.clear(G$q.composites[G$H],G$r,!0);return G$r?G$q.bodies=G$q.bodies.filter(function(G$q){return G$q.isStatic}):G$q.bodies.length=0,G$q.constraints.length=0,G$q.composites.length=0,G$K.setModified(G$q,!0,!0,!1),G$q},G$K.allBodies=function(G$q){if(G$q.cache&&G$q.cache.allBodies)return G$q.cache.allBodies;for(var G$r=[].concat(G$q.bodies),G$v=0;G$v<G$q.composites.length;G$v++)G$r=G$r.concat(G$K.allBodies(G$q.composites[G$v]));return G$q.cache&&(G$q.cache.allBodies=G$r),G$r},G$K.allConstraints=function(G$q){if(G$q.cache&&G$q.cache.allConstraints)return G$q.cache.allConstraints;for(var G$r=[].concat(G$q.constraints),G$v=0;G$v<G$q.composites.length;G$v++)G$r=G$r.concat(G$K.allConstraints(G$q.composites[G$v]));return G$q.cache&&(G$q.cache.allConstraints=G$r),G$r},G$K.allComposites=function(G$q){if(G$q.cache&&G$q.cache.allComposites)return G$q.cache.allComposites;for(var G$r=[].concat(G$q.composites),G$v=0;G$v<G$q.composites.length;G$v++)G$r=G$r.concat(G$K.allComposites(G$q.composites[G$v]));return G$q.cache&&(G$q.cache.allComposites=G$r),G$r},G$K.get=function(G$q,G$r,G$v){var G$H,G$A;switch(G$v){case"body":G$H=G$K.allBodies(G$q);break;case"constraint":G$H=G$K.allConstraints(G$q);break;case"composite":G$H=G$K.allComposites(G$q).concat(G$q)}return G$H?0===(G$A=G$H.filter(function(G$q){return G$q.id.toString()===G$r.toString()})).length?null:G$A[0]:null},G$K.move=function(G$q,G$r,G$v){return G$K.remove(G$q,G$r),G$K.add(G$v,G$r),G$q},G$K.rebase=function(G$q){for(var G$r=G$K.allBodies(G$q).concat(G$K.allConstraints(G$q)).concat(G$K.allComposites(G$q)),G$v=0;G$v<G$r.length;G$v++)G$r[G$v].id=G$y.nextId();return G$q},G$K.translate=function(G$q,G$r,G$v){for(var G$H=G$v?G$K.allBodies(G$q):G$q.bodies,G$A=0;G$A<G$H.length;G$A++)G$T.translate(G$H[G$A],G$r);return G$q},G$K.rotate=function(G$q,G$r,G$v,G$H){for(var G$A=Math.cos(G$r),G$y=Math.sin(G$r),G$R=G$H?G$K.allBodies(G$q):G$q.bodies,G$W=0;G$W<G$R.length;G$W++){var G$O=G$R[G$W],G$N=G$O.position.x-G$v.x,G$x=G$O.position.y-G$v.y;G$T.setPosition(G$O,{x:G$v.x+(G$N*G$A-G$x*G$y),y:G$v.y+(G$N*G$y+G$x*G$A)}),G$T.rotate(G$O,G$r)}return G$q},G$K.scale=function(G$q,G$r,G$v,G$H,G$A){for(var G$y=G$A?G$K.allBodies(G$q):G$q.bodies,G$R=0;G$R<G$y.length;G$R++){var G$W=G$y[G$R],G$O=G$W.position.x-G$H.x,G$N=G$W.position.y-G$H.y;G$T.setPosition(G$W,{x:G$H.x+G$O*G$r,y:G$H.y+G$N*G$v}),G$T.scale(G$W,G$r,G$v)}return G$q},G$K.bounds=function(G$q){for(var G$r=G$K.allBodies(G$q),G$v=[],G$H=0;G$H<G$r.length;G$H+=1){var G$A=G$r[G$H];G$v.push(G$A.bounds.min,G$A.bounds.max)}return G$W.create(G$v)}},function(G$q,G$r,G$v){var G$N={};G$q.exports=G$N;var G$x=G$v(3),G$K=G$v(2),G$A=G$v(7),G$y=(G$v(16),G$v(0)),G$T=G$v(1),G$j=G$v(11);!function(){G$N._inertiaScale=4,G$N._nextCollidingGroupId=1,G$N._nextNonCollidingGroupId=-1,G$N._nextCategory=1,G$N.create=function(G$q){var G$r={id:G$y.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:G$x.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},G$v=G$y.extend(G$r,G$q);return G$H(G$v,G$q),G$v},G$N.nextGroup=function(G$q){return G$q?G$N._nextNonCollidingGroupId--:G$N._nextCollidingGroupId++},G$N.nextCategory=function(){return G$N._nextCategory=G$N._nextCategory<<1,G$N._nextCategory};var G$H=function(G$q,G$r){G$r=G$r||{},G$N.set(G$q,{bounds:G$q.bounds||G$T.create(G$q.vertices),positionPrev:G$q.positionPrev||G$K.clone(G$q.position),anglePrev:G$q.anglePrev||G$q.angle,vertices:G$q.vertices,parts:G$q.parts||[G$q],isStatic:G$q.isStatic,isSleeping:G$q.isSleeping,parent:G$q.parent||G$q}),G$x.rotate(G$q.vertices,G$q.angle,G$q.position),G$j.rotate(G$q.axes,G$q.angle),G$T.update(G$q.bounds,G$q.vertices,G$q.velocity),G$N.set(G$q,{axes:G$r.axes||G$q.axes,area:G$r.area||G$q.area,mass:G$r.mass||G$q.mass,inertia:G$r.inertia||G$q.inertia});var G$v=G$q.isStatic?"#14151f":G$y.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),G$H=G$q.isStatic?"#555":"#ccc",G$A=G$q.isStatic&&null===G$q.render.fillStyle?1:0;G$q.render.fillStyle=G$q.render.fillStyle||G$v,G$q.render.strokeStyle=G$q.render.strokeStyle||G$H,G$q.render.lineWidth=G$q.render.lineWidth||G$A,G$q.render.sprite.xOffset+=-(G$q.bounds.min.x-G$q.position.x)/(G$q.bounds.max.x-G$q.bounds.min.x),G$q.render.sprite.yOffset+=-(G$q.bounds.min.y-G$q.position.y)/(G$q.bounds.max.y-G$q.bounds.min.y)};G$N.set=function(G$q,G$r,G$v){var G$H;for(G$H in"string"==typeof G$r&&(G$H=G$r,(G$r={})[G$H]=G$v),G$r)if(Object.prototype.hasOwnProperty.call(G$r,G$H))switch(G$v=G$r[G$H],G$H){case"isStatic":G$N.setStatic(G$q,G$v);break;case"isSleeping":G$A.set(G$q,G$v);break;case"mass":G$N.setMass(G$q,G$v);break;case"density":G$N.setDensity(G$q,G$v);break;case"inertia":G$N.setInertia(G$q,G$v);break;case"vertices":G$N.setVertices(G$q,G$v);break;case"position":G$N.setPosition(G$q,G$v);break;case"angle":G$N.setAngle(G$q,G$v);break;case"velocity":G$N.setVelocity(G$q,G$v);break;case"angularVelocity":G$N.setAngularVelocity(G$q,G$v);break;case"parts":G$N.setParts(G$q,G$v);break;case"centre":G$N.setCentre(G$q,G$v);break;default:G$q[G$H]=G$v}},G$N.setStatic=function(G$q,G$r){for(var G$v=0;G$v<G$q.parts.length;G$v++){var G$H=G$q.parts[G$v];(G$H.isStatic=G$r)?(G$H._original={restitution:G$H.restitution,friction:G$H.friction,mass:G$H.mass,inertia:G$H.inertia,density:G$H.density,inverseMass:G$H.inverseMass,inverseInertia:G$H.inverseInertia},G$H.restitution=0,G$H.friction=1,G$H.mass=G$H.inertia=G$H.density=1/0,G$H.inverseMass=G$H.inverseInertia=0,G$H.positionPrev.x=G$H.position.x,G$H.positionPrev.y=G$H.position.y,G$H.anglePrev=G$H.angle,G$H.angularVelocity=0,G$H.speed=0,G$H.angularSpeed=0,G$H.motion=0):G$H._original&&(G$H.restitution=G$H._original.restitution,G$H.friction=G$H._original.friction,G$H.mass=G$H._original.mass,G$H.inertia=G$H._original.inertia,G$H.density=G$H._original.density,G$H.inverseMass=G$H._original.inverseMass,G$H.inverseInertia=G$H._original.inverseInertia,G$H._original=null)}},G$N.setMass=function(G$q,G$r){var G$v=G$q.inertia/(G$q.mass/6);G$q.inertia=G$r/6*G$v,G$q.inverseInertia=1/G$q.inertia,G$q.mass=G$r,G$q.inverseMass=1/G$q.mass,G$q.density=G$q.mass/G$q.area},G$N.setDensity=function(G$q,G$r){G$N.setMass(G$q,G$r*G$q.area),G$q.density=G$r},G$N.setInertia=function(G$q,G$r){G$q.inertia=G$r,G$q.inverseInertia=1/G$q.inertia},G$N.setVertices=function(G$q,G$r){G$r[0].body===G$q?G$q.vertices=G$r:G$q.vertices=G$x.create(G$r,G$q),G$q.axes=G$j.fromVertices(G$q.vertices),G$q.area=G$x.area(G$q.vertices),G$N.setMass(G$q,G$q.density*G$q.area);var G$v=G$x.centre(G$q.vertices);G$x.translate(G$q.vertices,G$v,-1),G$N.setInertia(G$q,G$N._inertiaScale*G$x.inertia(G$q.vertices,G$q.mass)),G$x.translate(G$q.vertices,G$q.position),G$T.update(G$q.bounds,G$q.vertices,G$q.velocity)},G$N.setParts=function(G$q,G$r,G$v){var G$H;for(G$r=G$r.slice(0),G$q.parts.length=0,G$q.parts.push(G$q),G$q.parent=G$q,G$H=0;G$H<G$r.length;G$H++){var G$A=G$r[G$H];G$A!==G$q&&(G$A.parent=G$q).parts.push(G$A)}if(1!==G$q.parts.length){if(G$v=void 0===G$v||G$v){var G$y=[];for(G$H=0;G$H<G$r.length;G$H++)G$y=G$y.concat(G$r[G$H].vertices);G$x.clockwiseSort(G$y);var G$R=G$x.hull(G$y),G$W=G$x.centre(G$R);G$N.setVertices(G$q,G$R),G$x.translate(G$q.vertices,G$W)}var G$O=G$N._totalProperties(G$q);G$q.area=G$O.area,(G$q.parent=G$q).position.x=G$O.centre.x,G$q.position.y=G$O.centre.y,G$q.positionPrev.x=G$O.centre.x,G$q.positionPrev.y=G$O.centre.y,G$N.setMass(G$q,G$O.mass),G$N.setInertia(G$q,G$O.inertia),G$N.setPosition(G$q,G$O.centre)}},G$N.setCentre=function(G$q,G$r,G$v){G$v?(G$q.positionPrev.x+=G$r.x,G$q.positionPrev.y+=G$r.y,G$q.position.x+=G$r.x,G$q.position.y+=G$r.y):(G$q.positionPrev.x=G$r.x-(G$q.position.x-G$q.positionPrev.x),G$q.positionPrev.y=G$r.y-(G$q.position.y-G$q.positionPrev.y),G$q.position.x=G$r.x,G$q.position.y=G$r.y)},G$N.setPosition=function(G$q,G$r){var G$v=G$K.sub(G$r,G$q.position);G$q.positionPrev.x+=G$v.x,G$q.positionPrev.y+=G$v.y;for(var G$H=0;G$H<G$q.parts.length;G$H++){var G$A=G$q.parts[G$H];G$A.position.x+=G$v.x,G$A.position.y+=G$v.y,G$x.translate(G$A.vertices,G$v),G$T.update(G$A.bounds,G$A.vertices,G$q.velocity)}},G$N.setAngle=function(G$q,G$r){var G$v=G$r-G$q.angle;G$q.anglePrev+=G$v;for(var G$H=0;G$H<G$q.parts.length;G$H++){var G$A=G$q.parts[G$H];G$A.angle+=G$v,G$x.rotate(G$A.vertices,G$v,G$q.position),G$j.rotate(G$A.axes,G$v),G$T.update(G$A.bounds,G$A.vertices,G$q.velocity),0<G$H&&G$K.rotateAbout(G$A.position,G$v,G$q.position,G$A.position)}},G$N.setVelocity=function(G$q,G$r){G$q.positionPrev.x=G$q.position.x-G$r.x,G$q.positionPrev.y=G$q.position.y-G$r.y,G$q.velocity.x=G$r.x,G$q.velocity.y=G$r.y,G$q.speed=G$K.magnitude(G$q.velocity)},G$N.setAngularVelocity=function(G$q,G$r){G$q.anglePrev=G$q.angle-G$r,G$q.angularVelocity=G$r,G$q.angularSpeed=Math.abs(G$q.angularVelocity)},G$N.translate=function(G$q,G$r){G$N.setPosition(G$q,G$K.add(G$q.position,G$r))},G$N.rotate=function(G$q,G$r,G$v){if(G$v){var G$H=Math.cos(G$r),G$A=Math.sin(G$r),G$y=G$q.position.x-G$v.x,G$R=G$q.position.y-G$v.y;G$N.setPosition(G$q,{x:G$v.x+(G$y*G$H-G$R*G$A),y:G$v.y+(G$y*G$A+G$R*G$H)}),G$N.setAngle(G$q,G$q.angle+G$r)}else G$N.setAngle(G$q,G$q.angle+G$r)},G$N.scale=function(G$q,G$r,G$v,G$H){var G$A=0,G$y=0;G$H=G$H||G$q.position;for(var G$R=0;G$R<G$q.parts.length;G$R++){var G$W=G$q.parts[G$R];G$x.scale(G$W.vertices,G$r,G$v,G$H),G$W.axes=G$j.fromVertices(G$W.vertices),G$W.area=G$x.area(G$W.vertices),G$N.setMass(G$W,G$q.density*G$W.area),G$x.translate(G$W.vertices,{x:-G$W.position.x,y:-G$W.position.y}),G$N.setInertia(G$W,G$N._inertiaScale*G$x.inertia(G$W.vertices,G$W.mass)),G$x.translate(G$W.vertices,{x:G$W.position.x,y:G$W.position.y}),0<G$R&&(G$A+=G$W.area,G$y+=G$W.inertia),G$W.position.x=G$H.x+(G$W.position.x-G$H.x)*G$r,G$W.position.y=G$H.y+(G$W.position.y-G$H.y)*G$v,G$T.update(G$W.bounds,G$W.vertices,G$q.velocity)}1<G$q.parts.length&&(G$q.area=G$A,G$q.isStatic||(G$N.setMass(G$q,G$q.density*G$A),G$N.setInertia(G$q,G$y))),G$q.circleRadius&&(G$r===G$v?G$q.circleRadius*=G$r:G$q.circleRadius=null)},G$N.update=function(G$q,G$r,G$v,G$H){var G$A=Math.pow(G$r*G$v*G$q.timeScale,2),G$y=1-G$q.frictionAir*G$v*G$q.timeScale,G$R=G$q.position.x-G$q.positionPrev.x,G$W=G$q.position.y-G$q.positionPrev.y;G$q.velocity.x=G$R*G$y*G$H+G$q.force.x/G$q.mass*G$A,G$q.velocity.y=G$W*G$y*G$H+G$q.force.y/G$q.mass*G$A,G$q.positionPrev.x=G$q.position.x,G$q.positionPrev.y=G$q.position.y,G$q.position.x+=G$q.velocity.x,G$q.position.y+=G$q.velocity.y,G$q.angularVelocity=(G$q.angle-G$q.anglePrev)*G$y*G$H+G$q.torque/G$q.inertia*G$A,G$q.anglePrev=G$q.angle,G$q.angle+=G$q.angularVelocity,G$q.speed=G$K.magnitude(G$q.velocity),G$q.angularSpeed=Math.abs(G$q.angularVelocity);for(var G$O=0;G$O<G$q.parts.length;G$O++){var G$N=G$q.parts[G$O];G$x.translate(G$N.vertices,G$q.velocity),0<G$O&&(G$N.position.x+=G$q.velocity.x,G$N.position.y+=G$q.velocity.y),0!==G$q.angularVelocity&&(G$x.rotate(G$N.vertices,G$q.angularVelocity,G$q.position),G$j.rotate(G$N.axes,G$q.angularVelocity),0<G$O&&G$K.rotateAbout(G$N.position,G$q.angularVelocity,G$q.position,G$N.position)),G$T.update(G$N.bounds,G$N.vertices,G$q.velocity)}},G$N.applyForce=function(G$q,G$r,G$v){G$q.force.x+=G$v.x,G$q.force.y+=G$v.y;var G$H=G$r.x-G$q.position.x,G$A=G$r.y-G$q.position.y;G$q.torque+=G$H*G$v.y-G$A*G$v.x},G$N._totalProperties=function(G$q){for(var G$r={mass:0,area:0,inertia:0,centre:{x:0,y:0}},G$v=1===G$q.parts.length?0:1;G$v<G$q.parts.length;G$v++){var G$H=G$q.parts[G$v],G$A=G$H.mass!==1/0?G$H.mass:1;G$r.mass+=G$A,G$r.area+=G$H.area,G$r.inertia+=G$H.inertia,G$r.centre=G$K.add(G$r.centre,G$K.mult(G$H.position,G$A))}return G$r.centre=G$K.div(G$r.centre,G$r.mass),G$r}}()},function(G$q,G$r,G$v){var G$x={};G$q.exports=G$x;var G$H=G$v(4);G$x._motionWakeThreshold=.18,G$x._motionSleepThreshold=.08,G$x._minBias=.9,G$x.update=function(G$q,G$r){for(var G$v=G$r*G$r*G$r,G$H=0;G$H<G$q.length;G$H++){var G$A=G$q[G$H],G$y=G$A.speed*G$A.speed+G$A.angularSpeed*G$A.angularSpeed;if(0===G$A.force.x&&0===G$A.force.y){var G$R=Math.min(G$A.motion,G$y),G$W=Math.max(G$A.motion,G$y);G$A.motion=G$x._minBias*G$R+(1-G$x._minBias)*G$W,0<G$A.sleepThreshold&&G$A.motion<G$x._motionSleepThreshold*G$v?(G$A.sleepCounter+=1,G$A.sleepCounter>=G$A.sleepThreshold&&G$x.set(G$A,!0)):0<G$A.sleepCounter&&(G$A.sleepCounter-=1)}else G$x.set(G$A,!1)}},G$x.afterCollisions=function(G$q,G$r){for(var G$v=G$r*G$r*G$r,G$H=0;G$H<G$q.length;G$H++){var G$A=G$q[G$H];if(G$A.isActive){var G$y=G$A.collision,G$R=G$y.bodyA.parent,G$W=G$y.bodyB.parent;if(!(G$R.isSleeping&&G$W.isSleeping||G$R.isStatic||G$W.isStatic)&&(G$R.isSleeping||G$W.isSleeping)){var G$O=G$R.isSleeping&&!G$R.isStatic?G$R:G$W,G$N=G$O===G$R?G$W:G$R;!G$O.isStatic&&G$N.motion>G$x._motionWakeThreshold*G$v&&G$x.set(G$O,!1)}}}},G$x.set=function(G$q,G$r){var G$v=G$q.isSleeping;G$r?(G$q.isSleeping=!0,G$q.sleepCounter=G$q.sleepThreshold,G$q.positionImpulse.x=0,G$q.positionImpulse.y=0,G$q.positionPrev.x=G$q.position.x,G$q.positionPrev.y=G$q.position.y,G$q.anglePrev=G$q.angle,G$q.speed=0,G$q.angularSpeed=0,G$q.motion=0,G$v||G$H.trigger(G$q,"sleepStart")):(G$q.isSleeping=!1,G$q.sleepCounter=0,G$v&&G$H.trigger(G$q,"sleepEnd"))}},function(G$q,G$r,G$v){var G$D={};G$q.exports=G$D;var G$X,G$g,G$m,G$B=G$v(3),G$e=G$v(9);G$X=[],G$g={overlap:0,axis:null},G$m={overlap:0,axis:null},G$D.create=function(G$q,G$r){return{pair:null,collided:!1,bodyA:G$q,bodyB:G$r,parentA:G$q.parent,parentB:G$r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},G$D.collides=function(G$q,G$r,G$v){if(G$D._overlapAxes(G$g,G$q.vertices,G$r.vertices,G$q.axes),G$g.overlap<=0)return null;if(G$D._overlapAxes(G$m,G$r.vertices,G$q.vertices,G$r.axes),G$m.overlap<=0)return null;var G$H,G$A,G$y=G$v&&G$v.table[G$e.id(G$q,G$r)];G$y?G$H=G$y.collision:((G$H=G$D.create(G$q,G$r)).collided=!0,G$H.bodyA=G$q.id<G$r.id?G$q:G$r,G$H.bodyB=G$q.id<G$r.id?G$r:G$q,G$H.parentA=G$H.bodyA.parent,G$H.parentB=G$H.bodyB.parent),G$q=G$H.bodyA,G$r=G$H.bodyB,G$A=G$g.overlap<G$m.overlap?G$g:G$m;var G$R=G$H.normal,G$W=G$H.supports,G$O=G$A.axis,G$N=G$O.x,G$x=G$O.y;G$N*(G$r.position.x-G$q.position.x)+G$x*(G$r.position.y-G$q.position.y)<0?(G$R.x=G$N,G$R.y=G$x):(G$R.x=-G$N,G$R.y=-G$x),G$H.tangent.x=-G$R.y,G$H.tangent.y=G$R.x,G$H.depth=G$A.overlap,G$H.penetration.x=G$R.x*G$H.depth,G$H.penetration.y=G$R.y*G$H.depth;var G$K=G$D._findSupports(G$q,G$r,G$R,1),G$T=0;if(G$B.contains(G$q.vertices,G$K[0])&&(G$W[G$T++]=G$K[0]),G$B.contains(G$q.vertices,G$K[1])&&(G$W[G$T++]=G$K[1]),G$T<2){var G$j=G$D._findSupports(G$r,G$q,G$R,-1);G$B.contains(G$r.vertices,G$j[0])&&(G$W[G$T++]=G$j[0]),G$T<2&&G$B.contains(G$r.vertices,G$j[1])&&(G$W[G$T++]=G$j[1])}return 0===G$T&&(G$W[G$T++]=G$K[0]),G$W.length=G$T,G$H},G$D._overlapAxes=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R,G$W,G$O,G$N,G$x=G$r.length,G$K=G$v.length,G$T=G$r[0].x,G$j=G$r[0].y,G$D=G$v[0].x,G$g=G$v[0].y,G$X=G$H.length,G$m=Number.MAX_VALUE,G$B=0;for(G$O=0;G$O<G$X;G$O++){var G$e=G$H[G$O],G$p=G$e.x,G$M=G$e.y,G$z=G$T*G$p+G$j*G$M,G$P=G$D*G$p+G$g*G$M,G$V=G$z,G$a=G$P;for(G$N=1;G$N<G$x;G$N+=1)G$V<(G$W=G$r[G$N].x*G$p+G$r[G$N].y*G$M)?G$V=G$W:G$W<G$z&&(G$z=G$W);for(G$N=1;G$N<G$K;G$N+=1)G$a<(G$W=G$v[G$N].x*G$p+G$v[G$N].y*G$M)?G$a=G$W:G$W<G$P&&(G$P=G$W);if((G$A=(G$y=G$V-G$P)<(G$R=G$a-G$z)?G$y:G$R)<G$m&&(G$B=G$O,(G$m=G$A)<=0))break}G$q.axis=G$H[G$B],G$q.overlap=G$m},G$D._projectToAxis=function(G$q,G$r,G$v){for(var G$H=G$r[0].x*G$v.x+G$r[0].y*G$v.y,G$A=G$H,G$y=1;G$y<G$r.length;G$y+=1){var G$R=G$r[G$y].x*G$v.x+G$r[G$y].y*G$v.y;G$A<G$R?G$A=G$R:G$R<G$H&&(G$H=G$R)}G$q.min=G$H,G$q.max=G$A},G$D._findSupports=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R,G$W,G$O,G$N=G$r.vertices,G$x=G$N.length,G$K=G$q.position.x,G$T=G$q.position.y,G$j=G$v.x*G$H,G$D=G$v.y*G$H,G$g=Number.MAX_VALUE;for(G$O=0;G$O<G$x;G$O+=1)(G$W=G$j*(G$K-(G$y=G$N[G$O]).x)+G$D*(G$T-G$y.y))<G$g&&(G$g=G$W,G$A=G$y);return G$g=G$j*(G$K-(G$R=G$N[(G$x+G$A.index-1)%G$x]).x)+G$D*(G$T-G$R.y),G$j*(G$K-(G$y=G$N[(G$A.index+1)%G$x]).x)+G$D*(G$T-G$y.y)<G$g?(G$X[0]=G$A,G$X[1]=G$y):(G$X[0]=G$A,G$X[1]=G$R),G$X}},function(G$q,G$r,G$v){var G$y={};G$q.exports=G$y;var G$j=G$v(17);G$y.create=function(G$q,G$r){var G$v=G$q.bodyA,G$H=G$q.bodyB,G$A={id:G$y.id(G$v,G$H),bodyA:G$v,bodyB:G$H,collision:G$q,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:G$v.isSensor||G$H.isSensor,timeCreated:G$r,timeUpdated:G$r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return G$y.update(G$A,G$q,G$r),G$A},G$y.update=function(G$q,G$r,G$v){var G$H=G$q.contacts,G$A=G$r.supports,G$y=G$q.activeContacts,G$R=G$r.parentA,G$W=G$r.parentB,G$O=G$R.vertices.length;G$q.isActive=!0,G$q.timeUpdated=G$v,G$q.collision=G$r,G$q.separation=G$r.depth,G$q.inverseMass=G$R.inverseMass+G$W.inverseMass,G$q.friction=G$R.friction<G$W.friction?G$R.friction:G$W.friction,G$q.frictionStatic=G$R.frictionStatic>G$W.frictionStatic?G$R.frictionStatic:G$W.frictionStatic,G$q.restitution=G$R.restitution>G$W.restitution?G$R.restitution:G$W.restitution,G$q.slop=G$R.slop>G$W.slop?G$R.slop:G$W.slop,G$r.pair=G$q;for(var G$N=G$y.length=0;G$N<G$A.length;G$N++){var G$x=G$A[G$N],G$K=G$x.body===G$R?G$x.index:G$O+G$x.index,G$T=G$H[G$K];G$T?G$y.push(G$T):G$y.push(G$H[G$K]=G$j.create(G$x))}},G$y.setActive=function(G$q,G$r,G$v){G$r?(G$q.isActive=!0,G$q.timeUpdated=G$v):(G$q.isActive=!1,G$q.activeContacts.length=0)},G$y.id=function(G$q,G$r){return G$q.id<G$r.id?"A"+G$q.id+"B"+G$r.id:"A"+G$r.id+"B"+G$q.id}},function(G$q,G$r,G$v){var G$M={};G$q.exports=G$M;var G$R=G$v(3),G$z=G$v(2),G$W=G$v(7),G$O=G$v(1),G$N=G$v(11),G$x=G$v(0);G$M._warming=.4,G$M._torqueDampen=1,G$M._minLength=1e-6,G$M.create=function(G$q){var G$r=G$q;G$r.bodyA&&!G$r.pointA&&(G$r.pointA={x:0,y:0}),G$r.bodyB&&!G$r.pointB&&(G$r.pointB={x:0,y:0});var G$v=G$r.bodyA?G$z.add(G$r.bodyA.position,G$r.pointA):G$r.pointA,G$H=G$r.bodyB?G$z.add(G$r.bodyB.position,G$r.pointB):G$r.pointB,G$A=G$z.magnitude(G$z.sub(G$v,G$H));G$r.length=void 0!==G$r.length?G$r.length:G$A,G$r.id=G$r.id||G$x.nextId(),G$r.label=G$r.label||"Constraint",G$r.type="constraint",G$r.stiffness=G$r.stiffness||(0<G$r.length?1:.7),G$r.damping=G$r.damping||0,G$r.angularStiffness=G$r.angularStiffness||0,G$r.angleA=G$r.bodyA?G$r.bodyA.angle:G$r.angleA,G$r.angleB=G$r.bodyB?G$r.bodyB.angle:G$r.angleB,G$r.plugin={};var G$y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===G$r.length&&.1<G$r.stiffness?(G$y.type="pin",G$y.anchors=!1):G$r.stiffness<.9&&(G$y.type="spring"),G$r.render=G$x.extend(G$y,G$r.render),G$r},G$M.preSolveAll=function(G$q){for(var G$r=0;G$r<G$q.length;G$r+=1){var G$v=G$q[G$r],G$H=G$v.constraintImpulse;G$v.isStatic||0===G$H.x&&0===G$H.y&&0===G$H.angle||(G$v.position.x+=G$H.x,G$v.position.y+=G$H.y,G$v.angle+=G$H.angle)}},G$M.solveAll=function(G$q,G$r){for(var G$v=0;G$v<G$q.length;G$v+=1){var G$H=G$q[G$v],G$A=!G$H.bodyA||G$H.bodyA&&G$H.bodyA.isStatic,G$y=!G$H.bodyB||G$H.bodyB&&G$H.bodyB.isStatic;(G$A||G$y)&&G$M.solve(G$q[G$v],G$r)}for(G$v=0;G$v<G$q.length;G$v+=1)G$A=!(G$H=G$q[G$v]).bodyA||G$H.bodyA&&G$H.bodyA.isStatic,G$y=!G$H.bodyB||G$H.bodyB&&G$H.bodyB.isStatic,G$A||G$y||G$M.solve(G$q[G$v],G$r)},G$M.solve=function(G$q,G$r){var G$v=G$q.bodyA,G$H=G$q.bodyB,G$A=G$q.pointA,G$y=G$q.pointB;if(G$v||G$H){G$v&&!G$v.isStatic&&(G$z.rotate(G$A,G$v.angle-G$q.angleA,G$A),G$q.angleA=G$v.angle),G$H&&!G$H.isStatic&&(G$z.rotate(G$y,G$H.angle-G$q.angleB,G$y),G$q.angleB=G$H.angle);var G$R=G$A,G$W=G$y;if(G$v&&(G$R=G$z.add(G$v.position,G$A)),G$H&&(G$W=G$z.add(G$H.position,G$y)),G$R&&G$W){var G$O=G$z.sub(G$R,G$W),G$N=G$z.magnitude(G$O);G$N<G$M._minLength&&(G$N=G$M._minLength);var G$x,G$K,G$T,G$j,G$D,G$g=(G$N-G$q.length)/G$N,G$X=G$q.stiffness<1?G$q.stiffness*G$r:G$q.stiffness,G$m=G$z.mult(G$O,G$g*G$X),G$B=(G$v?G$v.inverseMass:0)+(G$H?G$H.inverseMass:0),G$e=G$B+((G$v?G$v.inverseInertia:0)+(G$H?G$H.inverseInertia:0));if(G$q.damping){var G$p=G$z.create();G$T=G$z.div(G$O,G$N),G$D=G$z.sub(G$H&&G$z.sub(G$H.position,G$H.positionPrev)||G$p,G$v&&G$z.sub(G$v.position,G$v.positionPrev)||G$p),G$j=G$z.dot(G$T,G$D)}G$v&&!G$v.isStatic&&(G$K=G$v.inverseMass/G$B,G$v.constraintImpulse.x-=G$m.x*G$K,G$v.constraintImpulse.y-=G$m.y*G$K,G$v.position.x-=G$m.x*G$K,G$v.position.y-=G$m.y*G$K,G$q.damping&&(G$v.positionPrev.x-=G$q.damping*G$T.x*G$j*G$K,G$v.positionPrev.y-=G$q.damping*G$T.y*G$j*G$K),G$x=G$z.cross(G$A,G$m)/G$e*G$M._torqueDampen*G$v.inverseInertia*(1-G$q.angularStiffness),G$v.constraintImpulse.angle-=G$x,G$v.angle-=G$x),G$H&&!G$H.isStatic&&(G$K=G$H.inverseMass/G$B,G$H.constraintImpulse.x+=G$m.x*G$K,G$H.constraintImpulse.y+=G$m.y*G$K,G$H.position.x+=G$m.x*G$K,G$H.position.y+=G$m.y*G$K,G$q.damping&&(G$H.positionPrev.x+=G$q.damping*G$T.x*G$j*G$K,G$H.positionPrev.y+=G$q.damping*G$T.y*G$j*G$K),G$x=G$z.cross(G$y,G$m)/G$e*G$M._torqueDampen*G$H.inverseInertia*(1-G$q.angularStiffness),G$H.constraintImpulse.angle+=G$x,G$H.angle+=G$x)}}},G$M.postSolveAll=function(G$q){for(var G$r=0;G$r<G$q.length;G$r++){var G$v=G$q[G$r],G$H=G$v.constraintImpulse;if(!(G$v.isStatic||0===G$H.x&&0===G$H.y&&0===G$H.angle)){G$W.set(G$v,!1);for(var G$A=0;G$A<G$v.parts.length;G$A++){var G$y=G$v.parts[G$A];G$R.translate(G$y.vertices,G$H),0<G$A&&(G$y.position.x+=G$H.x,G$y.position.y+=G$H.y),0!==G$H.angle&&(G$R.rotate(G$y.vertices,G$H.angle,G$v.position),G$N.rotate(G$y.axes,G$H.angle),0<G$A&&G$z.rotateAbout(G$y.position,G$H.angle,G$v.position,G$y.position)),G$O.update(G$y.bounds,G$y.vertices,G$v.velocity)}G$H.angle*=G$M._warming,G$H.x*=G$M._warming,G$H.y*=G$M._warming}}},G$M.pointAWorld=function(G$q){return{x:(G$q.bodyA?G$q.bodyA.position.x:0)+G$q.pointA.x,y:(G$q.bodyA?G$q.bodyA.position.y:0)+G$q.pointA.y}},G$M.pointBWorld=function(G$q){return{x:(G$q.bodyB?G$q.bodyB.position.x:0)+G$q.pointB.x,y:(G$q.bodyB?G$q.bodyB.position.y:0)+G$q.pointB.y}}},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$R=G$v(2),G$W=G$v(0);G$H.fromVertices=function(G$q){for(var G$r={},G$v=0;G$v<G$q.length;G$v++){var G$H=(G$v+1)%G$q.length,G$A=G$R.normalise({x:G$q[G$H].y-G$q[G$v].y,y:G$q[G$v].x-G$q[G$H].x}),G$y=0===G$A.y?1/0:G$A.x/G$A.y;G$r[G$y=G$y.toFixed(3).toString()]=G$A}return G$W.values(G$r)},G$H.rotate=function(G$q,G$r){if(0!==G$r)for(var G$v=Math.cos(G$r),G$H=Math.sin(G$r),G$A=0;G$A<G$q.length;G$A++){var G$y,G$R=G$q[G$A];G$y=G$R.x*G$v-G$R.y*G$H,G$R.y=G$R.x*G$H+G$R.y*G$v,G$R.x=G$y}}},function(G$q,G$r,G$v){var G$D={};G$q.exports=G$D;var G$G=G$v(3),G$E=G$v(0),G$Q=G$v(6),G$s=G$v(1),G$Z=G$v(2);G$D.rectangle=function(G$q,G$r,G$v,G$H,G$A){G$A=G$A||{};var G$y={label:"Rectangle Body",position:{x:G$q,y:G$r},vertices:G$G.fromPath("L 0 0 L "+G$v+" 0 L "+G$v+" "+G$H+" L 0 "+G$H)};if(G$A.chamfer){var G$R=G$A.chamfer;G$y.vertices=G$G.chamfer(G$y.vertices,G$R.radius,G$R.quality,G$R.qualityMin,G$R.qualityMax),delete G$A.chamfer}return G$Q.create(G$E.extend({},G$y,G$A))},G$D.trapezoid=function(G$q,G$r,G$v,G$H,G$A,G$y){G$y=G$y||{};var G$R,G$W=G$v*(G$A*=.5),G$O=G$W+(1-2*G$A)*G$v,G$N=G$O+G$W;G$R=G$A<.5?"L 0 0 L "+G$W+" "+-G$H+" L "+G$O+" "+-G$H+" L "+G$N+" 0":"L 0 0 L "+G$O+" "+-G$H+" L "+G$N+" 0";var G$x={label:"Trapezoid Body",position:{x:G$q,y:G$r},vertices:G$G.fromPath(G$R)};if(G$y.chamfer){var G$K=G$y.chamfer;G$x.vertices=G$G.chamfer(G$x.vertices,G$K.radius,G$K.quality,G$K.qualityMin,G$K.qualityMax),delete G$y.chamfer}return G$Q.create(G$E.extend({},G$x,G$y))},G$D.circle=function(G$q,G$r,G$v,G$H,G$A){G$H=G$H||{};var G$y={label:"Circle Body",circleRadius:G$v};G$A=G$A||25;var G$R=Math.ceil(Math.max(10,Math.min(G$A,G$v)));return G$R%2==1&&(G$R+=1),G$D.polygon(G$q,G$r,G$R,G$v,G$E.extend({},G$y,G$H))},G$D.polygon=function(G$q,G$r,G$v,G$H,G$A){if(G$A=G$A||{},G$v<3)return G$D.circle(G$q,G$r,G$H,G$A);for(var G$y=2*Math.PI/G$v,G$R="",G$W=.5*G$y,G$O=0;G$O<G$v;G$O+=1){var G$N=G$W+G$O*G$y,G$x=Math.cos(G$N)*G$H,G$K=Math.sin(G$N)*G$H;G$R+="L "+G$x.toFixed(3)+" "+G$K.toFixed(3)+" "}var G$T={label:"Polygon Body",position:{x:G$q,y:G$r},vertices:G$G.fromPath(G$R)};if(G$A.chamfer){var G$j=G$A.chamfer;G$T.vertices=G$G.chamfer(G$T.vertices,G$j.radius,G$j.quality,G$j.qualityMin,G$j.qualityMax),delete G$A.chamfer}return G$Q.create(G$E.extend({},G$T,G$A))},G$D.fromVertices=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W){var G$O,G$N,G$x,G$K,G$T,G$j,G$D,G$g,G$X,G$m,G$B=G$E.getDecomp();for(G$O=Boolean(G$B&&G$B.quickDecomp),G$H=G$H||{},G$x=[],G$A=void 0!==G$A&&G$A,G$y=void 0!==G$y?G$y:.01,G$R=void 0!==G$R?G$R:10,G$W=void 0!==G$W?G$W:.01,G$E.isArray(G$v[0])||(G$v=[G$v]),G$X=0;G$X<G$v.length;G$X+=1)if(G$T=G$v[G$X],!(G$K=G$G.isConvex(G$T))&&!G$O&&G$E.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),G$K||!G$O)G$T=G$K?G$G.clockwiseSort(G$T):G$G.hull(G$T),G$x.push({position:{x:G$q,y:G$r},vertices:G$T});else{var G$e=G$T.map(function(G$q){return[G$q.x,G$q.y]});G$B.makeCCW(G$e),!1!==G$y&&G$B.removeCollinearPoints(G$e,G$y),!1!==G$W&&G$B.removeDuplicatePoints&&G$B.removeDuplicatePoints(G$e,G$W);var G$p=G$B.quickDecomp(G$e);for(G$j=0;G$j<G$p.length;G$j++){var G$M=G$p[G$j].map(function(G$q){return{x:G$q[0],y:G$q[1]}});0<G$R&&G$G.area(G$M)<G$R||G$x.push({position:G$G.centre(G$M),vertices:G$M})}}for(G$j=0;G$j<G$x.length;G$j++)G$x[G$j]=G$Q.create(G$E.extend(G$x[G$j],G$H));if(G$A)for(G$j=0;G$j<G$x.length;G$j++){var G$z=G$x[G$j];for(G$D=G$j+1;G$D<G$x.length;G$D++){var G$P=G$x[G$D];if(G$s.overlaps(G$z.bounds,G$P.bounds)){var G$V=G$z.vertices,G$a=G$P.vertices;for(G$g=0;G$g<G$z.vertices.length;G$g++)for(G$m=0;G$m<G$P.vertices.length;G$m++){var G$J=G$Z.magnitudeSquared(G$Z.sub(G$V[(G$g+1)%G$V.length],G$a[G$m])),G$$=G$Z.magnitudeSquared(G$Z.sub(G$V[G$g],G$a[(G$m+1)%G$a.length]));G$J<5&&G$$<5&&(G$V[G$g].isInternal=!0,G$a[G$m].isInternal=!0)}}}}return 1<G$x.length?(G$N=G$Q.create(G$E.extend({parts:G$x.slice(0)},G$H)),G$Q.setPosition(G$N,{x:G$q,y:G$r}),G$N):G$x[0]}},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$A=G$v(0);G$H.create=function(G$q){var G$v={};return G$q||G$A.log("Mouse.create: element was undefined, defaulting to document.body","warn"),G$v.element=G$q||document.body,G$v.absolute={x:0,y:0},G$v.position={x:0,y:0},G$v.mousedownPosition={x:0,y:0},G$v.mouseupPosition={x:0,y:0},G$v.mouseoutPosition={x:0,y:0},G$v.offset={x:0,y:0},G$v.scale={x:1,y:1},G$v.wheelDelta=0,G$v.button=-1,G$v.pixelRatio=parseInt(G$v.element.getAttribute("data-pixel-ratio"),10)||1,G$v.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mouseout:null,mousewheel:null},G$v.mousemove=function(G$q){var G$r=G$H._getRelativeMousePosition(G$q,G$v.element,G$v.pixelRatio);G$q.changedTouches&&(G$v.button=0,G$q.preventDefault()),G$v.absolute.x=G$r.x,G$v.absolute.y=G$r.y,G$v.position.x=G$v.absolute.x*G$v.scale.x+G$v.offset.x,G$v.position.y=G$v.absolute.y*G$v.scale.y+G$v.offset.y,G$v.sourceEvents.mousemove=G$q},G$v.mousedown=function(G$q){var G$r=G$H._getRelativeMousePosition(G$q,G$v.element,G$v.pixelRatio);G$q.changedTouches?(G$v.button=0,G$q.preventDefault()):G$v.button=G$q.button,G$v.absolute.x=G$r.x,G$v.absolute.y=G$r.y,G$v.position.x=G$v.absolute.x*G$v.scale.x+G$v.offset.x,G$v.position.y=G$v.absolute.y*G$v.scale.y+G$v.offset.y,G$v.mousedownPosition.x=G$v.position.x,G$v.mousedownPosition.y=G$v.position.y,G$v.sourceEvents.mousedown=G$q},G$v.mouseup=function(G$q){var G$r=G$H._getRelativeMousePosition(G$q,G$v.element,G$v.pixelRatio);G$q.changedTouches&&G$q.preventDefault(),G$v.button=-1,G$v.absolute.x=G$r.x,G$v.absolute.y=G$r.y,G$v.position.x=G$v.absolute.x*G$v.scale.x+G$v.offset.x,G$v.position.y=G$v.absolute.y*G$v.scale.y+G$v.offset.y,G$v.mouseupPosition.x=G$v.position.x,G$v.mouseupPosition.y=G$v.position.y,G$v.sourceEvents.mouseup=G$q},G$v.mouseout=function(G$q){var G$r=G$H._getRelativeMousePosition(G$q,G$v.element,G$v.pixelRatio);G$q.changedTouches&&G$q.preventDefault(),G$v.button=-1,G$v.absolute.x=G$r.x,G$v.absolute.y=G$r.y,G$v.position.x=G$v.absolute.x*G$v.scale.x+G$v.offset.x,G$v.position.y=G$v.absolute.y*G$v.scale.y+G$v.offset.y,G$v.mouseoutPosition.x=G$v.position.x,G$v.mouseoutPosition.y=G$v.position.y,G$v.sourceEvents.mouseout=G$q},G$v.mousewheel=function(G$q){G$v.wheelDelta=Math.max(-1,Math.min(1,G$q.wheelDelta||-G$q.detail)),G$q.preventDefault()},G$H.setElement(G$v,G$v.element),G$v},G$H.setElement=function(G$q,G$r){(G$q.element=G$r).addEventListener("mousemove",G$q.mousemove),G$r.addEventListener("mousedown",G$q.mousedown),G$r.addEventListener("mouseup",G$q.mouseup),G$r.addEventListener("mouseout",G$q.mouseout),G$r.addEventListener("mousewheel",G$q.mousewheel),G$r.addEventListener("DOMMouseScroll",G$q.mousewheel),G$r.addEventListener("touchmove",G$q.mousemove),G$r.addEventListener("touchstart",G$q.mousedown),G$r.addEventListener("touchend",G$q.mouseup),G$r.addEventListener("touchcancel",G$q.mouseup)},G$H.clearSourceEvents=function(G$q){G$q.sourceEvents.mousemove=null,G$q.sourceEvents.mousedown=null,G$q.sourceEvents.mouseup=null,G$q.sourceEvents.mouseout=null,G$q.sourceEvents.mousewheel=null,G$q.wheelDelta=0},G$H.setOffset=function(G$q,G$r){G$q.offset.x=G$r.x,G$q.offset.y=G$r.y,G$q.position.x=G$q.absolute.x*G$q.scale.x+G$q.offset.x,G$q.position.y=G$q.absolute.y*G$q.scale.y+G$q.offset.y},G$H.setScale=function(G$q,G$r){G$q.scale.x=G$r.x,G$q.scale.y=G$r.y,G$q.position.x=G$q.absolute.x*G$q.scale.x+G$q.offset.x,G$q.position.y=G$q.absolute.y*G$q.scale.y+G$q.offset.y},G$H._getRelativeMousePosition=function(G$q,G$r,G$v){var G$H,G$A,G$y=G$r.getBoundingClientRect(),G$R=document.documentElement||document.body.parentNode||document.body,G$W=void 0!==window.pageXOffset?window.pageXOffset:G$R.scrollLeft,G$O=void 0!==window.pageYOffset?window.pageYOffset:G$R.scrollTop,G$N=G$q.changedTouches;G$W=G$W||0,G$O=G$O||0,G$A=G$N?(G$H=G$N[0].pageX-G$y.left-G$W,G$N[0].pageY-G$y.top-G$O):(G$H=G$q.pageX-G$y.left-G$W,G$q.pageY-G$y.top-G$O);var G$x=G$r.clientWidth||G$r.width,G$K=G$r.clientHeight||G$r.height;return{x:G$H/(G$x/(G$r.width||G$x)*G$v),y:G$A/(G$K/(G$r.height||G$K)*G$v)}}},function(G$q,G$r,G$v){var G$J={};G$q.exports=G$J;var G$H=G$v(0),G$$=G$v(8);G$J.create=function(G$q){return G$H.extend({bodies:[],pairs:null},G$q)},G$J.setBodies=function(G$q,G$r){G$q.bodies=G$r.slice(0)},G$J.clear=function(G$q){G$q.bodies=[]},G$J.collisions=function(G$q){var G$r,G$v,G$H=[],G$A=G$q.pairs,G$y=G$q.bodies,G$R=G$y.length,G$W=G$J.canCollide,G$O=G$$.collides;for(G$y.sort(G$J._compareBoundsX),G$r=0;G$r<G$R;G$r++){var G$N=G$y[G$r],G$x=G$N.bounds,G$K=G$N.bounds.max.x,G$T=G$N.bounds.max.y,G$j=G$N.bounds.min.y,G$D=G$N.isStatic||G$N.isSleeping,G$g=G$N.parts.length,G$X=1===G$g;for(G$v=G$r+1;G$v<G$R;G$v++){var G$m=G$y[G$v];if((G$a=G$m.bounds).min.x>G$K)break;if(!(G$T<G$a.min.y||G$j>G$a.max.y)&&(!G$D||!G$m.isStatic&&!G$m.isSleeping)&&G$W(G$N.collisionFilter,G$m.collisionFilter)){var G$B=G$m.parts.length;if(G$X&&1===G$B)(G$P=G$O(G$N,G$m,G$A))&&G$H.push(G$P);else for(var G$e=1<G$B?1:0,G$p=1<G$g?1:0;G$p<G$g;G$p++)for(var G$M=G$N.parts[G$p],G$z=(G$x=G$M.bounds,G$e);G$z<G$B;G$z++){var G$P,G$V=G$m.parts[G$z],G$a=G$V.bounds;G$x.min.x>G$a.max.x||G$x.max.x<G$a.min.x||G$x.max.y<G$a.min.y||G$x.min.y>G$a.max.y||(G$P=G$O(G$M,G$V,G$A))&&G$H.push(G$P)}}}}return G$H},G$J.canCollide=function(G$q,G$r){return G$q.group===G$r.group&&0!==G$q.group?0<G$q.group:0!=(G$q.mask&G$r.category)&&0!=(G$r.mask&G$q.category)},G$J._compareBoundsX=function(G$q,G$r){return G$q.bounds.min.x-G$r.bounds.min.x}},function(G$q,G$r,G$v){var G$W={};G$q.exports=G$W;var G$O=G$v(0);G$W._registry={},G$W.register=function(G$q){if(G$W.isPlugin(G$q)||G$O.warn("Plugin.register:",G$W.toString(G$q),"does not implement all required fields."),G$q.name in G$W._registry){var G$r=G$W._registry[G$q.name],G$v=G$W.versionParse(G$q.version).number,G$H=G$W.versionParse(G$r.version).number;G$H<G$v?(G$O.warn("Plugin.register:",G$W.toString(G$r),"was upgraded to",G$W.toString(G$q)),G$W._registry[G$q.name]=G$q):G$v<G$H?G$O.warn("Plugin.register:",G$W.toString(G$r),"can not be downgraded to",G$W.toString(G$q)):G$q!==G$r&&G$O.warn("Plugin.register:",G$W.toString(G$q),"is already registered to different plugin object")}else G$W._registry[G$q.name]=G$q;return G$q},G$W.resolve=function(G$q){return G$W._registry[G$W.dependencyParse(G$q).name]},G$W.toString=function(G$q){return"string"==typeof G$q?G$q:(G$q.name||"anonymous")+"@"+(G$q.version||G$q.range||"0.0.0")},G$W.isPlugin=function(G$q){return G$q&&G$q.name&&G$q.version&&G$q.install},G$W.isUsed=function(G$q,G$r){return-1<G$q.used.indexOf(G$r)},G$W.isFor=function(G$q,G$r){var G$v=G$q.for&&G$W.dependencyParse(G$q.for);return!G$q.for||G$r.name===G$v.name&&G$W.versionSatisfies(G$r.version,G$v.range)},G$W.use=function(G$q,G$r){if(G$q.uses=(G$q.uses||[]).concat(G$r||[]),0!==G$q.uses.length){for(var G$v=G$W.dependencies(G$q),G$H=G$O.topologicalSort(G$v),G$A=[],G$y=0;G$y<G$H.length;G$y+=1)if(G$H[G$y]!==G$q.name){var G$R=G$W.resolve(G$H[G$y]);G$R?G$W.isUsed(G$q,G$R.name)||(G$W.isFor(G$R,G$q)||(G$O.warn("Plugin.use:",G$W.toString(G$R),"is for",G$R.for,"but installed on",G$W.toString(G$q)+"."),G$R._warned=!0),G$R.install?G$R.install(G$q):(G$O.warn("Plugin.use:",G$W.toString(G$R),"does not specify an install function."),G$R._warned=!0),G$R._warned?(G$A.push("🔶 "+G$W.toString(G$R)),delete G$R._warned):G$A.push("✅ "+G$W.toString(G$R)),G$q.used.push(G$R.name)):G$A.push("❌ "+G$H[G$y])}0<G$A.length&&G$O.info(G$A.join("  "))}else G$O.warn("Plugin.use:",G$W.toString(G$q),"does not specify any dependencies to install.")},G$W.dependencies=function(G$H,G$q){var G$A=G$W.dependencyParse(G$H),G$r=G$A.name;if(!(G$r in(G$q=G$q||{}))){G$H=G$W.resolve(G$H)||G$H,G$q[G$r]=G$O.map(G$H.uses||[],function(G$q){G$W.isPlugin(G$q)&&G$W.register(G$q);var G$r=G$W.dependencyParse(G$q),G$v=G$W.resolve(G$q);return G$v&&!G$W.versionSatisfies(G$v.version,G$r.range)?(G$O.warn("Plugin.dependencies:",G$W.toString(G$v),"does not satisfy",G$W.toString(G$r),"used by",G$W.toString(G$A)+"."),G$v._warned=!0,G$H._warned=!0):G$v||(G$O.warn("Plugin.dependencies:",G$W.toString(G$q),"used by",G$W.toString(G$A),"could not be resolved."),G$H._warned=!0),G$r.name});for(var G$v=0;G$v<G$q[G$r].length;G$v+=1)G$W.dependencies(G$q[G$r][G$v],G$q);return G$q}},G$W.dependencyParse=function(G$q){return G$O.isString(G$q)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(G$q)||G$O.warn("Plugin.dependencyParse:",G$q,"is not a valid dependency string."),{name:G$q.split("@")[0],range:G$q.split("@")[1]||"*"}):{name:G$q.name,range:G$q.range||G$q.version}},G$W.versionParse=function(G$q){var G$r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;G$r.test(G$q)||G$O.warn("Plugin.versionParse:",G$q,"is not a valid version or range.");var G$v=G$r.exec(G$q),G$H=Number(G$v[4]),G$A=Number(G$v[5]),G$y=Number(G$v[6]);return{isRange:Boolean(G$v[1]||G$v[2]),version:G$v[3],range:G$q,operator:G$v[1]||G$v[2]||"",major:G$H,minor:G$A,patch:G$y,parts:[G$H,G$A,G$y],prerelease:G$v[7],number:1e8*G$H+1e4*G$A+G$y}},G$W.versionSatisfies=function(G$q,G$r){G$r=G$r||"*";var G$v=G$W.versionParse(G$r),G$H=G$W.versionParse(G$q);if(G$v.isRange){if("*"===G$v.operator||"*"===G$q)return!0;if(">"===G$v.operator)return G$H.number>G$v.number;if(">="===G$v.operator)return G$H.number>=G$v.number;if("~"===G$v.operator)return G$H.major===G$v.major&&G$H.minor===G$v.minor&&G$H.patch>=G$v.patch;if("^"===G$v.operator)return 0<G$v.major?G$H.major===G$v.major&&G$H.number>=G$v.number:0<G$v.minor?G$H.minor===G$v.minor&&G$H.patch>=G$v.patch:G$H.patch===G$v.patch}return G$q===G$r||"*"===G$q}},function(G$q,G$r,G$v){var G$P={};G$q.exports=G$P;var G$V=G$v(0),G$a=G$v(5),G$J=G$v(1),G$$=G$v(4),G$G=G$v(2),G$E=G$v(13);!function(){G$P._goodFps=30,G$P._goodDelta=1e3/60,G$P.create=function(G$q){var G$r={controller:G$P,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!G$q.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},G$v=G$V.extend(G$r,G$q);return G$v.canvas&&(G$v.canvas.width=G$v.options.width||G$v.canvas.width,G$v.canvas.height=G$v.options.height||G$v.canvas.height),G$v.mouse=G$q.mouse,G$v.engine=G$q.engine,G$v.canvas=G$v.canvas||G$H(G$v.options.width,G$v.options.height),G$v.context=G$v.canvas.getContext("2d"),G$v.textures={},G$v.bounds=G$v.bounds||{min:{x:0,y:0},max:{x:G$v.canvas.width,y:G$v.canvas.height}},G$v.options.showBroadphase=!1,1!==G$v.options.pixelRatio&&G$P.setPixelRatio(G$v,G$v.options.pixelRatio),G$V.isElement(G$v.element)?G$v.element.appendChild(G$v.canvas):G$v.canvas.parentNode||G$V.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),G$v},G$P.run=function(G$q){Laya.timer.clear(this,G$P.loop),Laya.timer.frameLoop(1,this,G$P.loop,[G$q])},G$P.loop=function(G$q){var G$r=G$V.now();G$v(G$q,G$r),G$P.world(G$q,G$r),(G$q.options.showStats||G$q.options.showDebug)&&G$P.stats(G$q,G$q.context,G$r),(G$q.options.showPerformance||G$q.options.showDebug)&&G$P.performance(G$q,G$q.context,G$r)},G$P.stop=function(G$q){Laya.timer.clear(this,G$P.loop)},G$P.setPixelRatio=function(G$q,G$r){var G$v=G$q.options,G$H=G$q.canvas;"auto"===G$r&&(G$r=G$A(G$H)),G$v.pixelRatio=G$r,G$H.setAttribute("data-pixel-ratio",G$r),G$H.width=G$v.width*G$r,G$H.height=G$v.height*G$r,G$H.style.width=G$v.width+"px",G$H.style.height=G$v.height+"px"},G$P.lookAt=function(G$q,G$r,G$v,G$H){G$H=void 0===G$H||G$H,G$r=G$V.isArray(G$r)?G$r:[G$r],G$v=G$v||{x:0,y:0};for(var G$A={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},G$y=0;G$y<G$r.length;G$y+=1){var G$R=G$r[G$y],G$W=G$R.bounds?G$R.bounds.min:G$R.min||G$R.position||G$R,G$O=G$R.bounds?G$R.bounds.max:G$R.max||G$R.position||G$R;G$W&&G$O&&(G$W.x<G$A.min.x&&(G$A.min.x=G$W.x),G$O.x>G$A.max.x&&(G$A.max.x=G$O.x),G$W.y<G$A.min.y&&(G$A.min.y=G$W.y),G$O.y>G$A.max.y&&(G$A.max.y=G$O.y))}var G$N=G$A.max.x-G$A.min.x+2*G$v.x,G$x=G$A.max.y-G$A.min.y+2*G$v.y,G$K=G$q.canvas.height,G$T=G$q.canvas.width/G$K,G$j=G$N/G$x,G$D=1,G$g=1;G$T<G$j?G$g=G$j/G$T:G$D=G$T/G$j,G$q.options.hasBounds=!0,G$q.bounds.min.x=G$A.min.x,G$q.bounds.max.x=G$A.min.x+G$N*G$D,G$q.bounds.min.y=G$A.min.y,G$q.bounds.max.y=G$A.min.y+G$x*G$g,G$H&&(G$q.bounds.min.x+=.5*G$N-G$N*G$D*.5,G$q.bounds.max.x+=.5*G$N-G$N*G$D*.5,G$q.bounds.min.y+=.5*G$x-G$x*G$g*.5,G$q.bounds.max.y+=.5*G$x-G$x*G$g*.5),G$q.bounds.min.x-=G$v.x,G$q.bounds.max.x-=G$v.x,G$q.bounds.min.y-=G$v.y,G$q.bounds.max.y-=G$v.y,G$q.mouse&&(G$E.setScale(G$q.mouse,{x:(G$q.bounds.max.x-G$q.bounds.min.x)/G$q.canvas.width,y:(G$q.bounds.max.y-G$q.bounds.min.y)/G$q.canvas.height}),G$E.setOffset(G$q.mouse,G$q.bounds.min))},G$P.startViewTransform=function(G$q){var G$r=G$q.bounds.max.x-G$q.bounds.min.x,G$v=G$q.bounds.max.y-G$q.bounds.min.y,G$H=G$r/G$q.options.width,G$A=G$v/G$q.options.height;G$q.context.setTransform(G$q.options.pixelRatio/G$H,0,0,G$q.options.pixelRatio/G$A,0,0),G$q.context.translate(-G$q.bounds.min.x,-G$q.bounds.min.y)},G$P.endViewTransform=function(G$q){G$q.context.setTransform(G$q.options.pixelRatio,0,0,G$q.options.pixelRatio,0,0)},G$P.world=function(G$q,G$r){var G$v,G$H=G$V.now(),G$A=G$q.engine,G$y=G$A.world,G$R=G$q.canvas,G$W=G$q.context,G$O=G$q.options,G$N=G$q.timing,G$x=G$a.allBodies(G$y),G$K=G$a.allConstraints(G$y),G$T=G$O.wireframes?G$O.wireframeBackground:G$O.background,G$j=[],G$D=[],G$g={timestamp:G$A.timing.timestamp};if(G$$.trigger(G$q,"beforeRender",G$g),G$q.currentBackground!==G$T&&G$z(G$q,G$T),G$W.globalCompositeOperation="source-in",G$W.fillStyle="transparent",G$W.fillRect(0,0,G$R.width,G$R.height),G$W.globalCompositeOperation="source-over",G$O.hasBounds){for(G$v=0;G$v<G$x.length;G$v++){var G$X=G$x[G$v];G$J.overlaps(G$X.bounds,G$q.bounds)&&G$j.push(G$X)}for(G$v=0;G$v<G$K.length;G$v++){var G$m=G$K[G$v],G$B=G$m.bodyA,G$e=G$m.bodyB,G$p=G$m.pointA,G$M=G$m.pointB;G$B&&(G$p=G$G.add(G$B.position,G$m.pointA)),G$e&&(G$M=G$G.add(G$e.position,G$m.pointB)),G$p&&G$M&&((G$J.contains(G$q.bounds,G$p)||G$J.contains(G$q.bounds,G$M))&&G$D.push(G$m))}G$P.startViewTransform(G$q),G$q.mouse&&(G$E.setScale(G$q.mouse,{x:(G$q.bounds.max.x-G$q.bounds.min.x)/G$q.options.width,y:(G$q.bounds.max.y-G$q.bounds.min.y)/G$q.options.height}),G$E.setOffset(G$q.mouse,G$q.bounds.min))}else G$D=G$K,G$j=G$x,1!==G$q.options.pixelRatio&&G$q.context.setTransform(G$q.options.pixelRatio,0,0,G$q.options.pixelRatio,0,0);!G$O.wireframes||G$A.enableSleeping&&G$O.showSleeping?G$P.bodies(G$q,G$j,G$W):(G$O.showConvexHulls&&G$P.bodyConvexHulls(G$q,G$j,G$W),G$P.bodyWireframes(G$q,G$j,G$W)),G$O.showBounds&&G$P.bodyBounds(G$q,G$j,G$W),(G$O.showAxes||G$O.showAngleIndicator)&&G$P.bodyAxes(G$q,G$j,G$W),G$O.showPositions&&G$P.bodyPositions(G$q,G$j,G$W),G$O.showVelocity&&G$P.bodyVelocity(G$q,G$j,G$W),G$O.showIds&&G$P.bodyIds(G$q,G$j,G$W),G$O.showSeparations&&G$P.separations(G$q,G$A.pairs.list,G$W),G$O.showCollisions&&G$P.collisions(G$q,G$A.pairs.list,G$W),G$O.showVertexNumbers&&G$P.vertexNumbers(G$q,G$j,G$W),G$O.showMousePosition&&G$P.mousePosition(G$q,G$q.mouse,G$W),G$P.constraints(G$D,G$W),G$O.hasBounds&&G$P.endViewTransform(G$q),G$$.trigger(G$q,"afterRender",G$g),G$N.lastElapsed=G$V.now()-G$H},G$P.stats=function(G$q,G$r,G$v){for(var G$H=G$q.engine,G$A=G$H.world,G$y=G$a.allBodies(G$A),G$R=0,G$W=0,G$O=0;G$O<G$y.length;G$O+=1)G$R+=G$y[G$O].parts.length;var G$N={Part:G$R,Body:G$y.length,Cons:G$a.allConstraints(G$A).length,Comp:G$a.allComposites(G$A).length,Pair:G$H.pairs.list.length};for(var G$x in G$r.fillStyle="#0e0f19",G$r.fillRect(G$W,0,302.5,44),G$r.font="12px Arial",G$r.textBaseline="top",G$r.textAlign="right",G$N){var G$K=G$N[G$x];G$r.fillStyle="#aaa",G$r.fillText(G$x,G$W+55,8),G$r.fillStyle="#eee",G$r.fillText(G$K,G$W+55,26),G$W+=55}},G$P.performance=function(G$q,G$r){var G$v=G$q.engine,G$H=G$q.timing,G$A=G$H.deltaHistory,G$y=G$H.elapsedHistory,G$R=G$H.timestampElapsedHistory,G$W=G$H.engineDeltaHistory,G$O=G$H.engineElapsedHistory,G$N=G$v.timing.lastDelta,G$x=G$X(G$A),G$K=G$X(G$y),G$T=G$X(G$W),G$j=G$X(G$O),G$D=G$X(G$R)/G$x||0,G$g=1e3/G$x||0;G$r.fillStyle="#0e0f19",G$r.fillRect(0,50,370,34),G$P.status(G$r,10,69,60,4,G$A.length,Math.round(G$g)+" fps",G$g/G$P._goodFps,function(G$q){return G$A[G$q]/G$x-1}),G$P.status(G$r,82,69,60,4,G$W.length,G$N.toFixed(2)+" dt",G$P._goodDelta/G$N,function(G$q){return G$W[G$q]/G$T-1}),G$P.status(G$r,154,69,60,4,G$O.length,G$j.toFixed(2)+" ut",1-G$j/G$P._goodFps,function(G$q){return G$O[G$q]/G$j-1}),G$P.status(G$r,226,69,60,4,G$y.length,G$K.toFixed(2)+" rt",1-G$K/G$P._goodFps,function(G$q){return G$y[G$q]/G$K-1}),G$P.status(G$r,298,69,60,4,G$R.length,G$D.toFixed(2)+" x",G$D*G$D*G$D,function(G$q){return(G$R[G$q]/G$A[G$q]/G$D||0)-1})},G$P.status=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O){G$q.strokeStyle="#888",G$q.fillStyle="#444",G$q.lineWidth=1,G$q.fillRect(G$r,G$v+7,G$H,1),G$q.beginPath(),G$q.moveTo(G$r,G$v+7-G$A*G$V.clamp(.4*G$O(0),-2,2));for(var G$N=0;G$N<G$H;G$N+=1)G$q.lineTo(G$r+G$N,G$v+7-(G$N<G$y?G$A*G$V.clamp(.4*G$O(G$N),-2,2):0));G$q.stroke(),G$q.fillStyle="hsl("+G$V.clamp(25+95*G$W,0,120)+",100%,60%)",G$q.fillRect(G$r,G$v-7,4,4),G$q.font="12px Arial",G$q.textBaseline="middle",G$q.textAlign="right",G$q.fillStyle="#eee",G$q.fillText(G$R,G$r+G$H,G$v-5)},G$P.constraints=function(G$q,G$r){for(var G$v=G$r,G$H=0;G$H<G$q.length;G$H++){var G$A=G$q[G$H];if(G$A.render.visible&&G$A.pointA&&G$A.pointB){var G$y,G$R,G$W=G$A.bodyA,G$O=G$A.bodyB;if(G$y=G$W?G$G.add(G$W.position,G$A.pointA):G$A.pointA,"pin"===G$A.render.type)G$v.beginPath(),G$v.arc(G$y.x,G$y.y,3,0,2*Math.PI),G$v.closePath();else{if(G$R=G$O?G$G.add(G$O.position,G$A.pointB):G$A.pointB,G$v.beginPath(),G$v.moveTo(G$y.x,G$y.y),"spring"===G$A.render.type)for(var G$N,G$x=G$G.sub(G$R,G$y),G$K=G$G.perp(G$G.normalise(G$x)),G$T=Math.ceil(G$V.clamp(G$A.length/5,12,20)),G$j=1;G$j<G$T;G$j+=1)G$N=G$j%2==0?1:-1,G$v.lineTo(G$y.x+G$x.x*(G$j/G$T)+G$K.x*G$N*4,G$y.y+G$x.y*(G$j/G$T)+G$K.y*G$N*4);G$v.lineTo(G$R.x,G$R.y)}G$A.render.lineWidth&&(G$v.lineWidth=G$A.render.lineWidth,G$v.strokeStyle=G$A.render.strokeStyle,G$v.stroke()),G$A.render.anchors&&(G$v.fillStyle=G$A.render.strokeStyle,G$v.beginPath(),G$v.arc(G$y.x,G$y.y,3,0,2*Math.PI),G$v.arc(G$R.x,G$R.y,3,0,2*Math.PI),G$v.closePath(),G$v.fill())}}},G$P.bodies=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W=G$v,G$O=(G$q.engine,G$q.options),G$N=G$O.showInternalEdges||!G$O.wireframes;for(G$y=0;G$y<G$r.length;G$y++)if((G$H=G$r[G$y]).render.visible)for(G$R=1<G$H.parts.length?1:0;G$R<G$H.parts.length;G$R++)if((G$A=G$H.parts[G$R]).render.visible){if(G$O.showSleeping&&G$H.isSleeping?G$W.globalAlpha=.5*G$A.render.opacity:1!==G$A.render.opacity&&(G$W.globalAlpha=G$A.render.opacity),G$A.render.sprite&&G$A.render.sprite.texture&&!G$O.wireframes){var G$x=G$A.render.sprite,G$K=G$j(G$q,G$x.texture);G$W.translate(G$A.position.x,G$A.position.y),G$W.rotate(G$A.angle),G$W.drawImage(G$K,G$K.width*-G$x.xOffset*G$x.xScale,G$K.height*-G$x.yOffset*G$x.yScale,G$K.width*G$x.xScale,G$K.height*G$x.yScale),G$W.rotate(-G$A.angle),G$W.translate(-G$A.position.x,-G$A.position.y)}else{if(G$A.circleRadius)G$W.beginPath(),G$W.arc(G$A.position.x,G$A.position.y,G$A.circleRadius,0,2*Math.PI);else{G$W.beginPath(),G$W.moveTo(G$A.vertices[0].x,G$A.vertices[0].y);for(var G$T=1;G$T<G$A.vertices.length;G$T++)!G$A.vertices[G$T-1].isInternal||G$N?G$W.lineTo(G$A.vertices[G$T].x,G$A.vertices[G$T].y):G$W.moveTo(G$A.vertices[G$T].x,G$A.vertices[G$T].y),G$A.vertices[G$T].isInternal&&!G$N&&G$W.moveTo(G$A.vertices[(G$T+1)%G$A.vertices.length].x,G$A.vertices[(G$T+1)%G$A.vertices.length].y);G$W.lineTo(G$A.vertices[0].x,G$A.vertices[0].y),G$W.closePath()}G$O.wireframes?(G$W.lineWidth=1,G$W.strokeStyle="#bbb",G$W.stroke()):(G$W.fillStyle=G$A.render.fillStyle,G$A.render.lineWidth&&(G$W.lineWidth=G$A.render.lineWidth,G$W.strokeStyle=G$A.render.strokeStyle,G$W.stroke()),G$W.fill())}G$W.globalAlpha=1}},G$P.bodyWireframes=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W,G$O=G$v,G$N=G$q.options.showInternalEdges;for(G$O.beginPath(),G$y=0;G$y<G$r.length;G$y++)if((G$H=G$r[G$y]).render.visible)for(G$W=1<G$H.parts.length?1:0;G$W<G$H.parts.length;G$W++){for(G$A=G$H.parts[G$W],G$O.moveTo(G$A.vertices[0].x,G$A.vertices[0].y),G$R=1;G$R<G$A.vertices.length;G$R++)!G$A.vertices[G$R-1].isInternal||G$N?G$O.lineTo(G$A.vertices[G$R].x,G$A.vertices[G$R].y):G$O.moveTo(G$A.vertices[G$R].x,G$A.vertices[G$R].y),G$A.vertices[G$R].isInternal&&!G$N&&G$O.moveTo(G$A.vertices[(G$R+1)%G$A.vertices.length].x,G$A.vertices[(G$R+1)%G$A.vertices.length].y);G$O.lineTo(G$A.vertices[0].x,G$A.vertices[0].y)}G$O.lineWidth=1,G$O.strokeStyle="#bbb",G$O.stroke()},G$P.bodyConvexHulls=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R=G$v;for(G$R.beginPath(),G$A=0;G$A<G$r.length;G$A++)if((G$H=G$r[G$A]).render.visible&&1!==G$H.parts.length){for(G$R.moveTo(G$H.vertices[0].x,G$H.vertices[0].y),G$y=1;G$y<G$H.vertices.length;G$y++)G$R.lineTo(G$H.vertices[G$y].x,G$H.vertices[G$y].y);G$R.lineTo(G$H.vertices[0].x,G$H.vertices[0].y)}G$R.lineWidth=1,G$R.strokeStyle="rgba(255,255,255,0.2)",G$R.stroke()},G$P.vertexNumbers=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R=G$v;for(G$H=0;G$H<G$r.length;G$H++){var G$W=G$r[G$H].parts;for(G$y=1<G$W.length?1:0;G$y<G$W.length;G$y++){var G$O=G$W[G$y];for(G$A=0;G$A<G$O.vertices.length;G$A++)G$R.fillStyle="rgba(255,255,255,0.2)",G$R.fillText(G$H+"_"+G$A,G$O.position.x+.8*(G$O.vertices[G$A].x-G$O.position.x),G$O.position.y+.8*(G$O.vertices[G$A].y-G$O.position.y))}}},G$P.mousePosition=function(G$q,G$r,G$v){var G$H=G$v;G$H.fillStyle="rgba(255,255,255,0.8)",G$H.fillText(G$r.position.x+"  "+G$r.position.y,G$r.position.x+5,G$r.position.y-5)},G$P.bodyBounds=function(G$q,G$r,G$v){var G$H=G$v,G$A=(G$q.engine,G$q.options);G$H.beginPath();for(var G$y=0;G$y<G$r.length;G$y++){if(G$r[G$y].render.visible)for(var G$R=G$r[G$y].parts,G$W=1<G$R.length?1:0;G$W<G$R.length;G$W++){var G$O=G$R[G$W];G$H.rect(G$O.bounds.min.x,G$O.bounds.min.y,G$O.bounds.max.x-G$O.bounds.min.x,G$O.bounds.max.y-G$O.bounds.min.y)}}G$A.wireframes?G$H.strokeStyle="rgba(255,255,255,0.08)":G$H.strokeStyle="rgba(0,0,0,0.1)",G$H.lineWidth=1,G$H.stroke()},G$P.bodyAxes=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W=G$v,G$O=(G$q.engine,G$q.options);for(G$W.beginPath(),G$A=0;G$A<G$r.length;G$A++){var G$N=G$r[G$A],G$x=G$N.parts;if(G$N.render.visible)if(G$O.showAxes)for(G$y=1<G$x.length?1:0;G$y<G$x.length;G$y++)for(G$H=G$x[G$y],G$R=0;G$R<G$H.axes.length;G$R++){var G$K=G$H.axes[G$R];G$W.moveTo(G$H.position.x,G$H.position.y),G$W.lineTo(G$H.position.x+20*G$K.x,G$H.position.y+20*G$K.y)}else for(G$y=1<G$x.length?1:0;G$y<G$x.length;G$y++)for(G$H=G$x[G$y],G$R=0;G$R<G$H.axes.length;G$R++)G$W.moveTo(G$H.position.x,G$H.position.y),G$W.lineTo((G$H.vertices[0].x+G$H.vertices[G$H.vertices.length-1].x)/2,(G$H.vertices[0].y+G$H.vertices[G$H.vertices.length-1].y)/2)}G$O.wireframes?(G$W.strokeStyle="indianred",G$W.lineWidth=1):(G$W.strokeStyle="rgba(255, 255, 255, 0.4)",G$W.globalCompositeOperation="overlay",G$W.lineWidth=2),G$W.stroke(),G$W.globalCompositeOperation="source-over"},G$P.bodyPositions=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W=G$v,G$O=(G$q.engine,G$q.options);for(G$W.beginPath(),G$y=0;G$y<G$r.length;G$y++)if((G$H=G$r[G$y]).render.visible)for(G$R=0;G$R<G$H.parts.length;G$R++)G$A=G$H.parts[G$R],G$W.arc(G$A.position.x,G$A.position.y,3,0,2*Math.PI,!1),G$W.closePath();for(G$O.wireframes?G$W.fillStyle="indianred":G$W.fillStyle="rgba(0,0,0,0.5)",G$W.fill(),G$W.beginPath(),G$y=0;G$y<G$r.length;G$y++)(G$H=G$r[G$y]).render.visible&&(G$W.arc(G$H.positionPrev.x,G$H.positionPrev.y,2,0,2*Math.PI,!1),G$W.closePath());G$W.fillStyle="rgba(255,165,0,0.8)",G$W.fill()},G$P.bodyVelocity=function(G$q,G$r,G$v){var G$H=G$v;G$H.beginPath();for(var G$A=0;G$A<G$r.length;G$A++){var G$y=G$r[G$A];G$y.render.visible&&(G$H.moveTo(G$y.position.x,G$y.position.y),G$H.lineTo(G$y.position.x+2*(G$y.position.x-G$y.positionPrev.x),G$y.position.y+2*(G$y.position.y-G$y.positionPrev.y)))}G$H.lineWidth=3,G$H.strokeStyle="cornflowerblue",G$H.stroke()},G$P.bodyIds=function(G$q,G$r,G$v){var G$H,G$A,G$y=G$v;for(G$H=0;G$H<G$r.length;G$H++)if(G$r[G$H].render.visible){var G$R=G$r[G$H].parts;for(G$A=1<G$R.length?1:0;G$A<G$R.length;G$A++){var G$W=G$R[G$A];G$y.font="12px Arial",G$y.fillStyle="rgba(255,255,255,0.5)",G$y.fillText(G$W.id,G$W.position.x+10,G$W.position.y-10)}}},G$P.collisions=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W=G$v,G$O=G$q.options;for(G$W.beginPath(),G$y=0;G$y<G$r.length;G$y++)if((G$H=G$r[G$y]).isActive)for(G$A=G$H.collision,G$R=0;G$R<G$H.activeContacts.length;G$R++){var G$N=G$H.activeContacts[G$R].vertex;G$W.rect(G$N.x-1.5,G$N.y-1.5,3.5,3.5)}for(G$O.wireframes?G$W.fillStyle="rgba(255,255,255,0.7)":G$W.fillStyle="orange",G$W.fill(),G$W.beginPath(),G$y=0;G$y<G$r.length;G$y++)if((G$H=G$r[G$y]).isActive&&(G$A=G$H.collision,0<G$H.activeContacts.length)){var G$x=G$H.activeContacts[0].vertex.x,G$K=G$H.activeContacts[0].vertex.y;2===G$H.activeContacts.length&&(G$x=(G$H.activeContacts[0].vertex.x+G$H.activeContacts[1].vertex.x)/2,G$K=(G$H.activeContacts[0].vertex.y+G$H.activeContacts[1].vertex.y)/2),G$A.bodyB===G$A.supports[0].body||!0===G$A.bodyA.isStatic?G$W.moveTo(G$x-8*G$A.normal.x,G$K-8*G$A.normal.y):G$W.moveTo(G$x+8*G$A.normal.x,G$K+8*G$A.normal.y),G$W.lineTo(G$x,G$K)}G$O.wireframes?G$W.strokeStyle="rgba(255,165,0,0.7)":G$W.strokeStyle="orange",G$W.lineWidth=1,G$W.stroke()},G$P.separations=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W,G$O=G$v,G$N=G$q.options;for(G$O.beginPath(),G$W=0;G$W<G$r.length;G$W++)if((G$H=G$r[G$W]).isActive){G$y=(G$A=G$H.collision).bodyA;var G$x=1;(G$R=G$A.bodyB).isStatic||G$y.isStatic||(G$x=.5),G$R.isStatic&&(G$x=0),G$O.moveTo(G$R.position.x,G$R.position.y),G$O.lineTo(G$R.position.x-G$A.penetration.x*G$x,G$R.position.y-G$A.penetration.y*G$x),G$x=1,G$R.isStatic||G$y.isStatic||(G$x=.5),G$y.isStatic&&(G$x=0),G$O.moveTo(G$y.position.x,G$y.position.y),G$O.lineTo(G$y.position.x+G$A.penetration.x*G$x,G$y.position.y+G$A.penetration.y*G$x)}G$N.wireframes?G$O.strokeStyle="rgba(255,165,0,0.5)":G$O.strokeStyle="orange",G$O.stroke()},G$P.inspector=function(G$q,G$r){G$q.engine;var G$v,G$H=G$q.selected,G$A=G$q.render,G$y=G$A.options;if(G$y.hasBounds){var G$R=G$A.bounds.max.x-G$A.bounds.min.x,G$W=G$A.bounds.max.y-G$A.bounds.min.y,G$O=G$R/G$A.options.width,G$N=G$W/G$A.options.height;G$r.scale(1/G$O,1/G$N),G$r.translate(-G$A.bounds.min.x,-G$A.bounds.min.y)}for(var G$x=0;G$x<G$H.length;G$x++){var G$K=G$H[G$x].data;switch(G$r.translate(.5,.5),G$r.lineWidth=1,G$r.strokeStyle="rgba(255,165,0,0.9)",G$r.setLineDash([1,2]),G$K.type){case"body":G$v=G$K.bounds,G$r.beginPath(),G$r.rect(Math.floor(G$v.min.x-3),Math.floor(G$v.min.y-3),Math.floor(G$v.max.x-G$v.min.x+6),Math.floor(G$v.max.y-G$v.min.y+6)),G$r.closePath(),G$r.stroke();break;case"constraint":var G$T=G$K.pointA;G$K.bodyA&&(G$T=G$K.pointB),G$r.beginPath(),G$r.arc(G$T.x,G$T.y,10,0,2*Math.PI),G$r.closePath(),G$r.stroke()}G$r.setLineDash([]),G$r.translate(-.5,-.5)}null!==G$q.selectStart&&(G$r.translate(.5,.5),G$r.lineWidth=1,G$r.strokeStyle="rgba(255,165,0,0.6)",G$r.fillStyle="rgba(255,165,0,0.1)",G$v=G$q.selectBounds,G$r.beginPath(),G$r.rect(Math.floor(G$v.min.x),Math.floor(G$v.min.y),Math.floor(G$v.max.x-G$v.min.x),Math.floor(G$v.max.y-G$v.min.y)),G$r.closePath(),G$r.stroke(),G$r.fill(),G$r.translate(-.5,-.5)),G$y.hasBounds&&G$r.setTransform(1,0,0,1,0,0)};var G$v=function(G$q,G$r){var G$v=G$q.engine,G$H=G$q.timing,G$A=G$H.historySize,G$y=G$v.timing.timestamp;G$H.delta=G$r-G$H.lastTime||G$P._goodDelta,G$H.lastTime=G$r,G$H.timestampElapsed=G$y-G$H.lastTimestamp||0,G$H.lastTimestamp=G$y,G$H.deltaHistory.unshift(G$H.delta),G$H.deltaHistory.length=Math.min(G$H.deltaHistory.length,G$A),G$H.engineDeltaHistory.unshift(G$v.timing.lastDelta),G$H.engineDeltaHistory.length=Math.min(G$H.engineDeltaHistory.length,G$A),G$H.timestampElapsedHistory.unshift(G$H.timestampElapsed),G$H.timestampElapsedHistory.length=Math.min(G$H.timestampElapsedHistory.length,G$A),G$H.engineElapsedHistory.unshift(G$v.timing.lastElapsed),G$H.engineElapsedHistory.length=Math.min(G$H.engineElapsedHistory.length,G$A),G$H.elapsedHistory.unshift(G$H.lastElapsed),G$H.elapsedHistory.length=Math.min(G$H.elapsedHistory.length,G$A)},G$X=function(G$q){for(var G$r=0,G$v=0;G$v<G$q.length;G$v+=1)G$r+=G$q[G$v];return G$r/G$q.length||0},G$H=function(G$q,G$r){var G$v=document.createElement("canvas");return G$v.width=G$q,G$v.height=G$r,G$v.oncontextmenu=function(){return!1},G$v.onselectstart=function(){return!1},G$v},G$A=function(G$q){var G$r=G$q.getContext("2d");return(window.devicePixelRatio||1)/(G$r.webkitBackingStorePixelRatio||G$r.mozBackingStorePixelRatio||G$r.msBackingStorePixelRatio||G$r.oBackingStorePixelRatio||G$r.backingStorePixelRatio||1)},G$j=function(G$q,G$r){var G$v=G$q.textures[G$r];return G$v||((G$v=G$q.textures[G$r]=new Image).src=G$r,G$v)},G$z=function(G$q,G$r){var G$v=G$r;/(jpg|gif|png)$/.test(G$r)&&(G$v="url("+G$r+")"),G$q.canvas.style.background=G$v,G$q.canvas.style.backgroundSize="contain",G$q.currentBackground=G$r}}()},function(G$q,G$r){var G$v={};(G$q.exports=G$v).create=function(G$q){return{vertex:G$q,normalImpulse:0,tangentImpulse:0}}},function(G$q,G$r,G$v){var G$D={};G$q.exports=G$D;var G$g=G$v(7),G$X=G$v(19),G$m=G$v(14),G$B=G$v(20),G$e=G$v(4),G$p=G$v(5),G$M=G$v(10),G$z=G$v(0),G$W=G$v(6);G$D.create=function(G$q){G$q=G$q||{};var G$r=G$z.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},G$q);return G$r.world=G$q.world||G$p.create({label:"World"}),G$r.pairs=G$q.pairs||G$B.create(),G$r.detector=G$q.detector||G$m.create(),G$r.grid={buckets:[]},G$r.world.gravity=G$r.gravity,G$r.broadphase=G$r.grid,G$r.metrics={},G$r},G$D.update=function(G$q,G$r,G$v){var G$H=G$z.now();G$r=G$r||1e3/60,G$v=G$v||1;var G$A,G$y=G$q.world,G$R=G$q.detector,G$W=G$q.pairs,G$O=G$q.timing,G$N=G$O.timestamp;G$O.timestamp+=G$r*G$O.timeScale,G$O.lastDelta=G$r*G$O.timeScale;var G$x={timestamp:G$O.timestamp};G$e.trigger(G$q,"beforeUpdate",G$x);var G$K=G$p.allBodies(G$y),G$T=G$p.allConstraints(G$y);for(G$y.isModified&&G$m.setBodies(G$R,G$K),G$y.isModified&&G$p.setModified(G$y,!1,!1,!0),G$q.enableSleeping&&G$g.update(G$K,G$O.timeScale),G$D._bodiesApplyGravity(G$K,G$q.gravity),G$D._bodiesUpdate(G$K,G$r,G$O.timeScale,G$v,G$y.bounds),G$M.preSolveAll(G$K),G$A=0;G$A<G$q.constraintIterations;G$A++)G$M.solveAll(G$T,G$O.timeScale);G$M.postSolveAll(G$K),G$R.pairs=G$q.pairs;var G$j=G$m.collisions(G$R);for(G$B.update(G$W,G$j,G$N),G$q.enableSleeping&&G$g.afterCollisions(G$W.list,G$O.timeScale),0<G$W.collisionStart.length&&G$e.trigger(G$q,"collisionStart",{pairs:G$W.collisionStart}),G$X.preSolvePosition(G$W.list),G$A=0;G$A<G$q.positionIterations;G$A++)G$X.solvePosition(G$W.list,G$O.timeScale);for(G$X.postSolvePosition(G$K),G$M.preSolveAll(G$K),G$A=0;G$A<G$q.constraintIterations;G$A++)G$M.solveAll(G$T,G$O.timeScale);for(G$M.postSolveAll(G$K),G$X.preSolveVelocity(G$W.list),G$A=0;G$A<G$q.velocityIterations;G$A++)G$X.solveVelocity(G$W.list,G$O.timeScale);return 0<G$W.collisionActive.length&&G$e.trigger(G$q,"collisionActive",{pairs:G$W.collisionActive}),0<G$W.collisionEnd.length&&G$e.trigger(G$q,"collisionEnd",{pairs:G$W.collisionEnd}),G$D._bodiesClearForces(G$K),G$e.trigger(G$q,"afterUpdate",G$x),G$q.timing.lastElapsed=G$z.now()-G$H,G$q},G$D.merge=function(G$q,G$r){if(G$z.extend(G$q,G$r),G$r.world){G$q.world=G$r.world,G$D.clear(G$q);for(var G$v=G$p.allBodies(G$q.world),G$H=0;G$H<G$v.length;G$H++){var G$A=G$v[G$H];G$g.set(G$A,!1),G$A.id=G$z.nextId()}}},G$D.clear=function(G$q){G$B.clear(G$q.pairs),G$m.clear(G$q.detector)},G$D._bodiesClearForces=function(G$q){for(var G$r=0;G$r<G$q.length;G$r++){var G$v=G$q[G$r];G$v.force.x=0,G$v.force.y=0,G$v.torque=0}},G$D._bodiesApplyGravity=function(G$q,G$r){var G$v=void 0!==G$r.scale?G$r.scale:.001;if((0!==G$r.x||0!==G$r.y)&&0!==G$v)for(var G$H=0;G$H<G$q.length;G$H++){var G$A=G$q[G$H];G$A.isStatic||G$A.isSleeping||(G$A.force.y+=G$A.mass*G$r.y*G$v,G$A.force.x+=G$A.mass*G$r.x*G$v)}},G$D._bodiesUpdate=function(G$q,G$r,G$v,G$H,G$A){for(var G$y=0;G$y<G$q.length;G$y++){var G$R=G$q[G$y];G$R.isStatic||G$R.isSleeping||G$W.update(G$R,G$r,G$v,G$H)}}},function(G$q,G$r,G$v){var G$w={};G$q.exports=G$w;var G$j=G$v(3),G$D=G$v(1);G$w._restingThresh=4,G$w._restingThreshTangent=6,G$w._positionDampen=.9,G$w._positionWarming=.8,G$w._frictionNormalMultiplier=5,G$w.preSolvePosition=function(G$q){var G$r,G$v,G$H,G$A=G$q.length;for(G$r=0;G$r<G$A;G$r++)(G$v=G$q[G$r]).isActive&&(G$H=G$v.activeContacts.length,G$v.collision.parentA.totalContacts+=G$H,G$v.collision.parentB.totalContacts+=G$H)},G$w.solvePosition=function(G$q,G$r){var G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x=G$w._positionDampen,G$K=G$q.length;for(G$v=0;G$v<G$K;G$v++)(G$H=G$q[G$v]).isActive&&!G$H.isSensor&&(G$y=(G$A=G$H.collision).parentA,G$R=G$A.parentB,G$W=G$A.normal,G$H.separation=G$W.x*(G$R.positionImpulse.x+G$A.penetration.x-G$y.positionImpulse.x)+G$W.y*(G$R.positionImpulse.y+G$A.penetration.y-G$y.positionImpulse.y));for(G$v=0;G$v<G$K;G$v++)(G$H=G$q[G$v]).isActive&&!G$H.isSensor&&(G$y=(G$A=G$H.collision).parentA,G$R=G$A.parentB,G$W=G$A.normal,G$N=(G$H.separation-G$H.slop)*G$r,(G$y.isStatic||G$R.isStatic)&&(G$N*=2),G$y.isStatic||G$y.isSleeping||(G$O=G$x/G$y.totalContacts,G$y.positionImpulse.x+=G$W.x*G$N*G$O,G$y.positionImpulse.y+=G$W.y*G$N*G$O),G$R.isStatic||G$R.isSleeping||(G$O=G$x/G$R.totalContacts,G$R.positionImpulse.x-=G$W.x*G$N*G$O,G$R.positionImpulse.y-=G$W.y*G$N*G$O))},G$w.postSolvePosition=function(G$q){for(var G$r=G$w._positionWarming,G$v=G$q.length,G$H=G$j.translate,G$A=G$D.update,G$y=0;G$y<G$v;G$y++){var G$R=G$q[G$y],G$W=G$R.positionImpulse,G$O=G$W.x,G$N=G$W.y,G$x=G$R.velocity;if((G$R.totalContacts=0)!==G$O||0!==G$N){for(var G$K=0;G$K<G$R.parts.length;G$K++){var G$T=G$R.parts[G$K];G$H(G$T.vertices,G$W),G$A(G$T.bounds,G$T.vertices,G$x),G$T.position.x+=G$O,G$T.position.y+=G$N}G$R.positionPrev.x+=G$O,G$R.positionPrev.y+=G$N,G$O*G$x.x+G$N*G$x.y<0?(G$W.x=0,G$W.y=0):(G$W.x*=G$r,G$W.y*=G$r)}}},G$w.preSolveVelocity=function(G$q){var G$r,G$v,G$H=G$q.length;for(G$r=0;G$r<G$H;G$r++){var G$A=G$q[G$r];if(G$A.isActive&&!G$A.isSensor){var G$y=G$A.activeContacts,G$R=G$y.length,G$W=G$A.collision,G$O=G$W.parentA,G$N=G$W.parentB,G$x=G$W.normal,G$K=G$W.tangent;for(G$v=0;G$v<G$R;G$v++){var G$T=G$y[G$v],G$j=G$T.vertex,G$D=G$T.normalImpulse,G$g=G$T.tangentImpulse;if(0!==G$D||0!==G$g){var G$X=G$x.x*G$D+G$K.x*G$g,G$m=G$x.y*G$D+G$K.y*G$g;G$O.isStatic||G$O.isSleeping||(G$O.positionPrev.x+=G$X*G$O.inverseMass,G$O.positionPrev.y+=G$m*G$O.inverseMass,G$O.anglePrev+=G$O.inverseInertia*((G$j.x-G$O.position.x)*G$m-(G$j.y-G$O.position.y)*G$X)),G$N.isStatic||G$N.isSleeping||(G$N.positionPrev.x-=G$X*G$N.inverseMass,G$N.positionPrev.y-=G$m*G$N.inverseMass,G$N.anglePrev-=G$N.inverseInertia*((G$j.x-G$N.position.x)*G$m-(G$j.y-G$N.position.y)*G$X))}}}}},G$w.solveVelocity=function(G$q,G$r){var G$v,G$H,G$A,G$y,G$R=G$r*G$r,G$W=G$w._restingThresh*G$R,G$O=G$w._frictionNormalMultiplier,G$N=G$w._restingThreshTangent*G$R,G$x=Number.MAX_VALUE,G$K=G$q.length;for(G$A=0;G$A<G$K;G$A++){var G$T=G$q[G$A];if(G$T.isActive&&!G$T.isSensor){var G$j=G$T.collision,G$D=G$j.parentA,G$g=G$j.parentB,G$X=G$D.velocity,G$m=G$g.velocity,G$B=G$j.normal.x,G$e=G$j.normal.y,G$p=G$j.tangent.x,G$M=G$j.tangent.y,G$z=G$T.activeContacts,G$P=G$z.length,G$V=1/G$P,G$a=G$D.inverseMass+G$g.inverseMass,G$J=G$T.friction*G$T.frictionStatic*G$O*G$R;for(G$X.x=G$D.position.x-G$D.positionPrev.x,G$X.y=G$D.position.y-G$D.positionPrev.y,G$m.x=G$g.position.x-G$g.positionPrev.x,G$m.y=G$g.position.y-G$g.positionPrev.y,G$D.angularVelocity=G$D.angle-G$D.anglePrev,G$g.angularVelocity=G$g.angle-G$g.anglePrev,G$y=0;G$y<G$P;G$y++){var G$$=G$z[G$y],G$G=G$$.vertex,G$E=G$G.x-G$D.position.x,G$Q=G$G.y-G$D.position.y,G$s=G$G.x-G$g.position.x,G$Z=G$G.y-G$g.position.y,G$Y=G$X.x-G$Q*G$D.angularVelocity,G$o=G$X.y+G$E*G$D.angularVelocity,G$C=G$Y-(G$m.x-G$Z*G$g.angularVelocity),G$c=G$o-(G$m.y+G$s*G$g.angularVelocity),G$b=G$B*G$C+G$e*G$c,G$d=G$p*G$C+G$M*G$c,G$u=G$T.separation+G$b,G$I=Math.min(G$u,1),G$t=(G$I=G$u<0?0:G$I)*G$J;G$t<G$d||G$t<-G$d?(G$H=0<G$d?G$d:-G$d,(G$v=G$T.friction*(0<G$d?1:-1)*G$R)<-G$H?G$v=-G$H:G$H<G$v&&(G$v=G$H)):(G$v=G$d,G$H=G$x);var G$F=G$E*G$e-G$Q*G$B,G$U=G$s*G$e-G$Z*G$B,G$_=G$V/(G$a+G$D.inverseInertia*G$F*G$F+G$g.inverseInertia*G$U*G$U),G$f=(1+G$T.restitution)*G$b*G$_;if(G$v*=G$_,G$W<G$b*G$b&&G$b<0)G$$.normalImpulse=0;else{var G$S=G$$.normalImpulse;G$$.normalImpulse+=G$f,G$$.normalImpulse=Math.min(G$$.normalImpulse,0),G$f=G$$.normalImpulse-G$S}if(G$N<G$d*G$d)G$$.tangentImpulse=0;else{var G$l=G$$.tangentImpulse;G$$.tangentImpulse+=G$v,G$$.tangentImpulse<-G$H&&(G$$.tangentImpulse=-G$H),G$$.tangentImpulse>G$H&&(G$$.tangentImpulse=G$H),G$v=G$$.tangentImpulse-G$l}var G$L=G$B*G$f+G$p*G$v,G$i=G$e*G$f+G$M*G$v;G$D.isStatic||G$D.isSleeping||(G$D.positionPrev.x+=G$L*G$D.inverseMass,G$D.positionPrev.y+=G$i*G$D.inverseMass,G$D.anglePrev+=(G$E*G$i-G$Q*G$L)*G$D.inverseInertia),G$g.isStatic||G$g.isSleeping||(G$g.positionPrev.x-=G$L*G$g.inverseMass,G$g.positionPrev.y-=G$i*G$g.inverseMass,G$g.anglePrev-=(G$s*G$i-G$Z*G$L)*G$g.inverseInertia)}}}}},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$g=G$v(9),G$A=G$v(0);G$H.create=function(G$q){return G$A.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},G$q)},G$H.update=function(G$q,G$r,G$v){var G$H,G$A,G$y,G$R,G$W=G$q.list,G$O=G$W.length,G$N=G$q.table,G$x=G$r.length,G$K=G$q.collisionStart,G$T=G$q.collisionEnd,G$j=G$q.collisionActive;for(G$K.length=0,G$T.length=0,G$R=G$j.length=0;G$R<G$O;G$R++)G$W[G$R].confirmedActive=!1;for(G$R=0;G$R<G$x;G$R++)(G$y=(G$H=G$r[G$R]).pair)?(G$y.isActive?G$j.push(G$y):G$K.push(G$y),G$g.update(G$y,G$H,G$v),G$y.confirmedActive=!0):(G$N[(G$y=G$g.create(G$H,G$v)).id]=G$y,G$K.push(G$y),G$W.push(G$y));var G$D=[];for(G$O=G$W.length,G$R=0;G$R<G$O;G$R++)(G$y=G$W[G$R]).confirmedActive||(G$g.setActive(G$y,!1,G$v),G$T.push(G$y),G$y.collision.bodyA.isSleeping||G$y.collision.bodyB.isSleeping||G$D.push(G$R));for(G$R=0;G$R<G$D.length;G$R++)G$y=G$W[G$A=G$D[G$R]-G$R],G$W.splice(G$A,1),delete G$N[G$y.id]},G$H.clear=function(G$q){return G$q.table={},G$q.list.length=0,G$q.collisionStart.length=0,G$q.collisionActive.length=0,G$q.collisionEnd.length=0,G$q}},function(G$q,G$r,G$v){var G$H=G$q.exports=G$v(22);G$H.Axes=G$v(11),G$H.Bodies=G$v(12),G$H.Body=G$v(6),G$H.Bounds=G$v(1),G$H.Collision=G$v(8),G$H.Common=G$v(0),G$H.Composite=G$v(5),G$H.Composites=G$v(23),G$H.Constraint=G$v(10),G$H.Contact=G$v(17),G$H.Detector=G$v(14),G$H.Engine=G$v(18),G$H.Events=G$v(4),G$H.Grid=G$v(24),G$H.Mouse=G$v(13),G$H.MouseConstraint=G$v(25),G$H.Pair=G$v(9),G$H.Pairs=G$v(20),G$H.Plugin=G$v(15),G$H.Query=G$v(26),G$H.Render=G$v(16),G$H.Resolver=G$v(19),G$H.Runner=G$v(27),G$H.SAT=G$v(28),G$H.Sleeping=G$v(7),G$H.Svg=G$v(29),G$H.Vector=G$v(2),G$H.Vertices=G$v(3),G$H.World=G$v(30),G$H.Engine.run=G$H.Runner.run,G$H.Common.deprecated(G$H.Engine,"run","Engine.run ➤ use Matter.Runner.run(engine) instead")},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$A=G$v(15),G$y=G$v(0);G$H.name="matter-js",G$H.version="0.18.0",G$H.uses=[],G$H.used=[],G$H.use=function(){G$A.use(G$H,Array.prototype.slice.call(arguments))},G$H.before=function(G$q,G$r){return G$q=G$q.replace(/^Matter./,""),G$y.chainPathBefore(G$H,G$q,G$r)},G$H.after=function(G$q,G$r){return G$q=G$q.replace(/^Matter./,""),G$y.chainPathAfter(G$H,G$q,G$r)}},function(G$q,G$r,G$v){var G$j={};G$q.exports=G$j;var G$B=G$v(5),G$g=G$v(10),G$X=G$v(0),G$e=G$v(6),G$D=G$v(12),G$H=G$X.deprecated;G$j.stack=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R){for(var G$W,G$O=G$B.create({label:"Stack"}),G$N=G$q,G$x=G$r,G$K=0,G$T=0;G$T<G$H;G$T++){for(var G$j=0,G$D=0;G$D<G$v;G$D++){var G$g=G$R(G$N,G$x,G$D,G$T,G$W,G$K);if(G$g){var G$X=G$g.bounds.max.y-G$g.bounds.min.y,G$m=G$g.bounds.max.x-G$g.bounds.min.x;G$j<G$X&&(G$j=G$X),G$e.translate(G$g,{x:.5*G$m,y:.5*G$X}),G$N=G$g.bounds.max.x+G$A,G$B.addBody(G$O,G$g),G$W=G$g,G$K+=1}else G$N+=G$A}G$x+=G$j+G$y,G$N=G$q}return G$O},G$j.chain=function(G$q,G$r,G$v,G$H,G$A,G$y){for(var G$R=G$q.bodies,G$W=1;G$W<G$R.length;G$W++){var G$O=G$R[G$W-1],G$N=G$R[G$W],G$x=G$O.bounds.max.y-G$O.bounds.min.y,G$K=G$O.bounds.max.x-G$O.bounds.min.x,G$T=G$N.bounds.max.y-G$N.bounds.min.y,G$j={bodyA:G$O,pointA:{x:G$K*G$r,y:G$x*G$v},bodyB:G$N,pointB:{x:(G$N.bounds.max.x-G$N.bounds.min.x)*G$H,y:G$T*G$A}},G$D=G$X.extend(G$j,G$y);G$B.addConstraint(G$q,G$g.create(G$D))}return G$q.label+=" Chain",G$q},G$j.mesh=function(G$q,G$r,G$v,G$H,G$A){var G$y,G$R,G$W,G$O,G$N,G$x=G$q.bodies;for(G$y=0;G$y<G$v;G$y++){for(G$R=1;G$R<G$r;G$R++)G$W=G$x[G$R-1+G$y*G$r],G$O=G$x[G$R+G$y*G$r],G$B.addConstraint(G$q,G$g.create(G$X.extend({bodyA:G$W,bodyB:G$O},G$A)));if(0<G$y)for(G$R=0;G$R<G$r;G$R++)G$W=G$x[G$R+(G$y-1)*G$r],G$O=G$x[G$R+G$y*G$r],G$B.addConstraint(G$q,G$g.create(G$X.extend({bodyA:G$W,bodyB:G$O},G$A))),G$H&&0<G$R&&(G$N=G$x[G$R-1+(G$y-1)*G$r],G$B.addConstraint(G$q,G$g.create(G$X.extend({bodyA:G$N,bodyB:G$O},G$A)))),G$H&&G$R<G$r-1&&(G$N=G$x[G$R+1+(G$y-1)*G$r],G$B.addConstraint(G$q,G$g.create(G$X.extend({bodyA:G$N,bodyB:G$O},G$A))))}return G$q.label+=" Mesh",G$q},G$j.pyramid=function(G$O,G$q,G$N,G$x,G$K,G$r,G$T){return G$j.stack(G$O,G$q,G$N,G$x,G$K,G$r,function(G$q,G$r,G$v,G$H,G$A,G$y){var G$R=Math.min(G$x,Math.ceil(G$N/2)),G$W=G$A?G$A.bounds.max.x-G$A.bounds.min.x:0;if(!(G$R<G$H||G$v<(G$H=G$R-G$H)||G$N-1-G$H<G$v))return 1===G$y&&G$e.translate(G$A,{x:(G$v+(G$N%2==1?1:-1))*G$W,y:0}),G$T(G$O+(G$A?G$v*G$W:0)+G$v*G$K,G$r,G$v,G$H,G$A,G$y)})},G$j.newtonsCradle=function(G$q,G$r,G$v,G$H,G$A){for(var G$y=G$B.create({label:"Newtons Cradle"}),G$R=0;G$R<G$v;G$R++){var G$W=G$D.circle(G$q+G$R*(1.9*G$H),G$r+G$A,G$H,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),G$O=G$g.create({pointA:{x:G$q+G$R*(1.9*G$H),y:G$r},bodyB:G$W});G$B.addBody(G$y,G$W),G$B.addConstraint(G$y,G$O)}return G$y},G$H(G$j,"newtonsCradle","Composites.newtonsCradle ➤ moved to newtonsCradle example"),G$j.car=function(G$q,G$r,G$v,G$H,G$A){var G$y=G$e.nextGroup(!0),G$R=.5*-G$v+20,G$W=.5*G$v-20,G$O=G$B.create({label:"Car"}),G$N=G$D.rectangle(G$q,G$r,G$v,G$H,{collisionFilter:{group:G$y},chamfer:{radius:.5*G$H},density:2e-4}),G$x=G$D.circle(G$q+G$R,G$r+0,G$A,{collisionFilter:{group:G$y},friction:.8}),G$K=G$D.circle(G$q+G$W,G$r+0,G$A,{collisionFilter:{group:G$y},friction:.8}),G$T=G$g.create({bodyB:G$N,pointB:{x:G$R,y:0},bodyA:G$x,stiffness:1,length:0}),G$j=G$g.create({bodyB:G$N,pointB:{x:G$W,y:0},bodyA:G$K,stiffness:1,length:0});return G$B.addBody(G$O,G$N),G$B.addBody(G$O,G$x),G$B.addBody(G$O,G$K),G$B.addConstraint(G$O,G$T),G$B.addConstraint(G$O,G$j),G$O},G$H(G$j,"car","Composites.car ➤ moved to car example"),G$j.softBody=function(G$q,G$r,G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N){G$O=G$X.extend({inertia:1/0},G$O),G$N=G$X.extend({stiffness:.2,render:{type:"line",anchors:!1}},G$N);var G$x=G$j.stack(G$q,G$r,G$v,G$H,G$A,G$y,function(G$q,G$r){return G$D.circle(G$q,G$r,G$W,G$O)});return G$j.mesh(G$x,G$v,G$H,G$R,G$N),G$x.label="Soft Body",G$x},G$H(G$j,"softBody","Composites.softBody ➤ moved to softBody and cloth examples")},function(G$q,G$r,G$v){var G$m={};G$q.exports=G$m;var G$x=G$v(9),G$O=G$v(0),G$H=G$O.deprecated;G$m.create=function(G$q){return G$O.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},G$q)},G$m.update=function(G$q,G$r,G$v,G$H){var G$A,G$y,G$R,G$W,G$O,G$N=G$v.world,G$x=G$q.buckets,G$K=!1;for(G$A=0;G$A<G$r.length;G$A++){var G$T=G$r[G$A];if((!G$T.isSleeping||G$H)&&(!G$N.bounds||!(G$T.bounds.max.x<G$N.bounds.min.x||G$T.bounds.min.x>G$N.bounds.max.x||G$T.bounds.max.y<G$N.bounds.min.y||G$T.bounds.min.y>G$N.bounds.max.y))){var G$j=G$m._getRegion(G$q,G$T);if(!G$T.region||G$j.id!==G$T.region.id||G$H){G$T.region&&!G$H||(G$T.region=G$j);var G$D=G$m._regionUnion(G$j,G$T.region);for(G$y=G$D.startCol;G$y<=G$D.endCol;G$y++)for(G$R=G$D.startRow;G$R<=G$D.endRow;G$R++){G$W=G$x[G$O=G$m._getBucketId(G$y,G$R)];var G$g=G$y>=G$j.startCol&&G$y<=G$j.endCol&&G$R>=G$j.startRow&&G$R<=G$j.endRow,G$X=G$y>=G$T.region.startCol&&G$y<=G$T.region.endCol&&G$R>=G$T.region.startRow&&G$R<=G$T.region.endRow;!G$g&&G$X&&G$X&&G$W&&G$m._bucketRemoveBody(G$q,G$W,G$T),(G$T.region===G$j||G$g&&!G$X||G$H)&&(G$W||(G$W=G$m._createBucket(G$x,G$O)),G$m._bucketAddBody(G$q,G$W,G$T))}G$T.region=G$j,G$K=!0}}}G$K&&(G$q.pairsList=G$m._createActivePairsList(G$q))},G$H(G$m,"update","Grid.update ➤ replaced by Matter.Detector"),G$m.clear=function(G$q){G$q.buckets={},G$q.pairs={},G$q.pairsList=[]},G$H(G$m,"clear","Grid.clear ➤ replaced by Matter.Detector"),G$m._regionUnion=function(G$q,G$r){var G$v=Math.min(G$q.startCol,G$r.startCol),G$H=Math.max(G$q.endCol,G$r.endCol),G$A=Math.min(G$q.startRow,G$r.startRow),G$y=Math.max(G$q.endRow,G$r.endRow);return G$m._createRegion(G$v,G$H,G$A,G$y)},G$m._getRegion=function(G$q,G$r){var G$v=G$r.bounds,G$H=Math.floor(G$v.min.x/G$q.bucketWidth),G$A=Math.floor(G$v.max.x/G$q.bucketWidth),G$y=Math.floor(G$v.min.y/G$q.bucketHeight),G$R=Math.floor(G$v.max.y/G$q.bucketHeight);return G$m._createRegion(G$H,G$A,G$y,G$R)},G$m._createRegion=function(G$q,G$r,G$v,G$H){return{id:G$q+","+G$r+","+G$v+","+G$H,startCol:G$q,endCol:G$r,startRow:G$v,endRow:G$H}},G$m._getBucketId=function(G$q,G$r){return"C"+G$q+"R"+G$r},G$m._createBucket=function(G$q,G$r){return G$q[G$r]=[]},G$m._bucketAddBody=function(G$q,G$r,G$v){var G$H,G$A=G$q.pairs,G$y=G$x.id,G$R=G$r.length;for(G$H=0;G$H<G$R;G$H++){var G$W=G$r[G$H];if(!(G$v.id===G$W.id||G$v.isStatic&&G$W.isStatic)){var G$O=G$y(G$v,G$W),G$N=G$A[G$O];G$N?G$N[2]+=1:G$A[G$O]=[G$v,G$W,1]}}G$r.push(G$v)},G$m._bucketRemoveBody=function(G$q,G$r,G$v){var G$H,G$A=G$q.pairs,G$y=G$x.id;G$r.splice(G$O.indexOf(G$r,G$v),1);var G$R=G$r.length;for(G$H=0;G$H<G$R;G$H++){var G$W=G$A[G$y(G$v,G$r[G$H])];G$W&&(G$W[2]-=1)}},G$m._createActivePairsList=function(G$q){var G$r,G$v,G$H=G$q.pairs,G$A=G$O.keys(G$H),G$y=G$A.length,G$R=[];for(G$v=0;G$v<G$y;G$v++)0<(G$r=G$H[G$A[G$v]])[2]?G$R.push(G$r):delete G$H[G$A[G$v]];return G$R}},function(G$q,G$r,G$v){var G$y={};G$q.exports=G$y;var G$O=G$v(3),G$N=G$v(7),G$R=G$v(13),G$x=G$v(4),G$K=G$v(14),G$W=G$v(10),G$T=G$v(5),G$j=G$v(0),G$D=G$v(1);G$y.create=function(G$r,G$q){var G$v=(G$r?G$r.mouse:null)||(G$q?G$q.mouse:null);G$v||(G$r&&G$r.render&&G$r.render.canvas?G$v=G$R.create(G$r.render.canvas):G$q&&G$q.element?G$v=G$R.create(G$q.element):(G$v=G$R.create(),G$j.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var G$H={type:"mouseConstraint",mouse:G$v,element:null,body:null,constraint:G$W.create({label:"Mouse Constraint",pointA:G$v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},G$A=G$j.extend(G$H,G$q);return G$x.on(G$r,"beforeUpdate",function(){var G$q=G$T.allBodies(G$r.world);G$y.update(G$A,G$q),G$y._triggerEvents(G$A)}),G$A},G$y.update=function(G$q,G$r){var G$v=G$q.mouse,G$H=G$q.constraint,G$A=G$q.body;if(0===G$v.button){if(G$H.bodyB)G$N.set(G$H.bodyB,!1),G$H.pointA=G$v.position;else for(var G$y=0;G$y<G$r.length;G$y++)if(G$A=G$r[G$y],G$D.contains(G$A.bounds,G$v.position)&&G$K.canCollide(G$A.collisionFilter,G$q.collisionFilter))for(var G$R=1<G$A.parts.length?1:0;G$R<G$A.parts.length;G$R++){var G$W=G$A.parts[G$R];if(G$O.contains(G$W.vertices,G$v.position)){G$H.pointA=G$v.position,G$H.bodyB=G$q.body=G$A,G$H.pointB={x:G$v.position.x-G$A.position.x,y:G$v.position.y-G$A.position.y},G$H.angleB=G$A.angle,G$N.set(G$A,!1),G$x.trigger(G$q,"startdrag",{mouse:G$v,body:G$A});break}}}else G$H.bodyB=G$q.body=null,G$H.pointB=null,G$A&&G$x.trigger(G$q,"enddrag",{mouse:G$v,body:G$A})},G$y._triggerEvents=function(G$q){var G$r=G$q.mouse,G$v=G$r.sourceEvents;G$v.mousemove&&G$x.trigger(G$q,"mousemove",{mouse:G$r}),G$v.mousedown&&G$x.trigger(G$q,"mousedown",{mouse:G$r}),G$v.mouseup&&G$x.trigger(G$q,"mouseup",{mouse:G$r}),G$v.mouseout&&G$x.trigger(G$q,"mouseout",{mouse:G$r}),G$R.clearSourceEvents(G$r)}},function(G$q,G$r,G$v){var G$T={};G$q.exports=G$T;var G$j=G$v(2),G$D=G$v(8),G$g=G$v(1),G$X=G$v(12),G$W=G$v(3);G$T.collides=function(G$q,G$r){for(var G$v=[],G$H=G$r.length,G$A=G$q.bounds,G$y=G$D.collides,G$R=G$g.overlaps,G$W=0;G$W<G$H;G$W++){var G$O=G$r[G$W],G$N=G$O.parts.length,G$x=1===G$N?0:1;if(G$R(G$O.bounds,G$A))for(var G$K=G$x;G$K<G$N;G$K++){var G$T=G$O.parts[G$K];if(G$R(G$T.bounds,G$A)){var G$j=G$y(G$T,G$q);if(G$j){G$v.push(G$j);break}}}}return G$v},G$T.ray=function(G$q,G$r,G$v,G$H){G$H=G$H||1e-100;for(var G$A=G$j.angle(G$r,G$v),G$y=G$j.magnitude(G$j.sub(G$r,G$v)),G$R=.5*(G$v.x+G$r.x),G$W=.5*(G$v.y+G$r.y),G$O=G$X.rectangle(G$R,G$W,G$y,G$H,{angle:G$A}),G$N=G$T.collides(G$O,G$q),G$x=0;G$x<G$N.length;G$x+=1){var G$K=G$N[G$x];G$K.body=G$K.bodyB=G$K.bodyA}return G$N},G$T.region=function(G$q,G$r,G$v){for(var G$H=[],G$A=0;G$A<G$q.length;G$A++){var G$y=G$q[G$A],G$R=G$g.overlaps(G$y.bounds,G$r);(G$R&&!G$v||!G$R&&G$v)&&G$H.push(G$y)}return G$H},G$T.point=function(G$q,G$r){for(var G$v=[],G$H=0;G$H<G$q.length;G$H++){var G$A=G$q[G$H];if(G$g.contains(G$A.bounds,G$r))for(var G$y=1===G$A.parts.length?0:1;G$y<G$A.parts.length;G$y++){var G$R=G$A.parts[G$y];if(G$g.contains(G$R.bounds,G$r)&&G$W.contains(G$R.vertices,G$r)){G$v.push(G$A);break}}}return G$v}},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$W=G$v(4),G$O=G$v(18),G$A=G$v(0);G$H.create=function(G$q){var G$r=G$A.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},G$q);return G$r.delta=G$r.delta||1e3/G$r.fps,G$r.deltaMin=G$r.deltaMin||1e3/G$r.fps,G$r.deltaMax=G$r.deltaMax||1e3/(.5*G$r.fps),G$r.fps=1e3/G$r.delta,G$r},G$H.run=function(G$q,G$r){return void 0!==G$q.positionIterations&&(G$r=G$q,G$q=G$H.create()),Laya.timer.clear(this,G$H.render),Laya.timer.frameLoop(1,this,G$H.render,[G$q,G$r]),G$q},G$H.render=function(G$q,G$r){G$q.enabled&&G$H.tick(G$q,G$r,G$A.now())},G$H.tick=function(G$q,G$r,G$v){var G$H,G$A=G$r.timing,G$y=1,G$R={timestamp:G$A.timestamp};G$W.trigger(G$q,"beforeTick",G$R),G$q.isFixed?G$H=G$q.delta:(G$H=G$v-G$q.timePrev||G$q.delta,G$q.timePrev=G$v,G$q.deltaHistory.push(G$H),G$q.deltaHistory=G$q.deltaHistory.slice(-G$q.deltaSampleSize),G$y=(G$H=(G$H=(G$H=Math.min.apply(null,G$q.deltaHistory))<G$q.deltaMin?G$q.deltaMin:G$H)>G$q.deltaMax?G$q.deltaMax:G$H)/G$q.delta,G$q.delta=G$H),0!==G$q.timeScalePrev&&(G$y*=G$A.timeScale/G$q.timeScalePrev),0===G$A.timeScale&&(G$y=0),G$q.timeScalePrev=G$A.timeScale,G$q.correction=G$y,G$q.frameCounter+=1,1e3<=G$v-G$q.counterTimestamp&&(G$q.fps=G$q.frameCounter*((G$v-G$q.counterTimestamp)/1e3),G$q.counterTimestamp=G$v,G$q.frameCounter=0),G$W.trigger(G$q,"tick",G$R),G$W.trigger(G$q,"beforeUpdate",G$R),G$O.update(G$r,G$H,G$y),G$W.trigger(G$q,"afterUpdate",G$R),G$W.trigger(G$q,"afterTick",G$R)},G$H.stop=function(G$q){Laya.timer.clear(this,G$H.render)},G$H.start=function(G$q,G$r){G$H.run(G$q,G$r)}},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$A=G$v(8),G$y=G$v(0).deprecated;G$H.collides=function(G$q,G$r){return G$A.collides(G$q,G$r)},G$y(G$H,"collides","SAT.collides ➤ replaced by Collision.collides")},function(G$q,G$r,G$v){var G$e={};G$q.exports=G$e;G$v(1);var G$p=G$v(0);G$e.pathToVertices=function(G$q,G$r){"undefined"==typeof window||"SVGPathSeg"in window||G$p.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var G$v,G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x,G$K,G$T,G$j=[],G$D=0,G$g=0,G$X=0;function G$m(G$q,G$r,G$v){var G$H=G$v%2==1&&1<G$v;if(!G$x||G$q!=G$x.x||G$r!=G$x.y){G$T=G$x&&G$H?(G$K=G$x.x,G$x.y):G$K=0;var G$A={x:G$K+G$q,y:G$T+G$r};!G$H&&G$x||(G$x=G$A),G$j.push(G$A),G$g=G$K+G$q,G$X=G$T+G$r}}function G$B(G$q){var G$r=G$q.pathSegTypeAsLetter.toUpperCase();if("Z"!==G$r){switch(G$r){case"M":case"L":case"T":case"C":case"S":case"Q":G$g=G$q.x,G$X=G$q.y;break;case"H":G$g=G$q.x;break;case"V":G$X=G$q.y}G$m(G$g,G$X,G$q.pathSegType)}}for(G$r=G$r||15,G$e._svgPathToAbsolute(G$q),G$A=G$q.getTotalLength(),G$W=[],G$v=0;G$v<G$q.pathSegList.numberOfItems;G$v+=1)G$W.push(G$q.pathSegList.getItem(G$v));for(G$O=G$W.concat();G$D<G$A;){if((G$R=G$W[G$q.getPathSegAtLength(G$D)])!=G$N){for(;G$O.length&&G$O[0]!=G$R;)G$B(G$O.shift());G$N=G$R}switch(G$R.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":G$y=G$q.getPointAtLength(G$D),G$m(G$y.x,G$y.y,0)}G$D+=G$r}for(G$v=0,G$H=G$O.length;G$v<G$H;++G$v)G$B(G$O[G$v]);return G$j},G$e._svgPathToAbsolute=function(G$q){for(var G$r,G$v,G$H,G$A,G$y,G$R,G$W=G$q.pathSegList,G$O=0,G$N=0,G$x=G$W.numberOfItems,G$K=0;G$K<G$x;++G$K){var G$T=G$W.getItem(G$K),G$j=G$T.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(G$j))"x"in G$T&&(G$O=G$T.x),"y"in G$T&&(G$N=G$T.y);else switch("x1"in G$T&&(G$H=G$O+G$T.x1),"x2"in G$T&&(G$y=G$O+G$T.x2),"y1"in G$T&&(G$A=G$N+G$T.y1),"y2"in G$T&&(G$R=G$N+G$T.y2),"x"in G$T&&(G$O+=G$T.x),"y"in G$T&&(G$N+=G$T.y),G$j){case"m":G$W.replaceItem(G$q.createSVGPathSegMovetoAbs(G$O,G$N),G$K);break;case"l":G$W.replaceItem(G$q.createSVGPathSegLinetoAbs(G$O,G$N),G$K);break;case"h":G$W.replaceItem(G$q.createSVGPathSegLinetoHorizontalAbs(G$O),G$K);break;case"v":G$W.replaceItem(G$q.createSVGPathSegLinetoVerticalAbs(G$N),G$K);break;case"c":G$W.replaceItem(G$q.createSVGPathSegCurvetoCubicAbs(G$O,G$N,G$H,G$A,G$y,G$R),G$K);break;case"s":G$W.replaceItem(G$q.createSVGPathSegCurvetoCubicSmoothAbs(G$O,G$N,G$y,G$R),G$K);break;case"q":G$W.replaceItem(G$q.createSVGPathSegCurvetoQuadraticAbs(G$O,G$N,G$H,G$A),G$K);break;case"t":G$W.replaceItem(G$q.createSVGPathSegCurvetoQuadraticSmoothAbs(G$O,G$N),G$K);break;case"a":G$W.replaceItem(G$q.createSVGPathSegArcAbs(G$O,G$N,G$T.r1,G$T.r2,G$T.angle,G$T.largeArcFlag,G$T.sweepFlag),G$K);break;case"z":case"Z":G$O=G$r,G$N=G$v}"M"!=G$j&&"m"!=G$j||(G$r=G$O,G$v=G$N)}}},function(G$q,G$r,G$v){var G$H={};G$q.exports=G$H;var G$A=G$v(5);G$v(0);G$H.create=G$A.create,G$H.add=G$A.add,G$H.remove=G$A.remove,G$H.clear=G$A.clear,G$H.addComposite=G$A.addComposite,G$H.addBody=G$A.addBody,G$H.addConstraint=G$A.addConstraint}])}),function(G$q){if("object"==typeof exports&&"undefined"!=typeof module)window?window.decomp=G$q():module.exports=G$q();else if("function"==typeof define&&define.amd)define([],G$q);else{var G$r;"undefined"!=typeof window?G$r=window:"undefined"!=typeof global?G$r=global:"undefined"!=typeof self&&(G$r=self),G$r.decomp=G$q()}}(function(){return function G$A(G$y,G$R,G$W){function G$O(G$v,G$q){if(!G$R[G$v]){if(!G$y[G$v]){var G$r="function"==typeof require&&require;if(!G$q&&G$r)return G$r(G$v,!0);if(G$N)return G$N(G$v,!0);throw new Error("Cannot find module '"+G$v+"'")}var G$H=G$R[G$v]={exports:{}};G$y[G$v][0].call(G$H.exports,function(G$q){var G$r=G$y[G$v][1][G$q];return G$O(G$r||G$q)},G$H,G$H.exports,G$A,G$y,G$R,G$W)}return G$R[G$v].exports}for(var G$N="function"==typeof require&&require,G$q=0;G$q<G$W.length;G$q++)G$O(G$W[G$q]);return G$O}({1:[function(G$q,G$r,G$v){function G$O(G$q,G$r,G$v){G$v=G$v||0;var G$H,G$A,G$y,G$R,G$W,G$O,G$N,G$x=[0,0];return G$H=G$q[1][1]-G$q[0][1],G$A=G$q[0][0]-G$q[1][0],G$y=G$H*G$q[0][0]+G$A*G$q[0][1],G$R=G$r[1][1]-G$r[0][1],G$W=G$r[0][0]-G$r[1][0],G$O=G$R*G$r[0][0]+G$W*G$r[0][1],G$X(G$N=G$H*G$W-G$R*G$A,0,G$v)||(G$x[0]=(G$W*G$y-G$A*G$O)/G$N,G$x[1]=(G$H*G$O-G$R*G$y)/G$N),G$x}function G$A(G$q,G$r,G$v,G$H){var G$A=G$r[0]-G$q[0],G$y=G$r[1]-G$q[1],G$R=G$H[0]-G$v[0],G$W=G$H[1]-G$v[1];if(G$R*G$y-G$W*G$A==0)return!1;var G$O=(G$A*(G$v[1]-G$q[1])+G$y*(G$q[0]-G$v[0]))/(G$R*G$y-G$W*G$A),G$N=(G$R*(G$q[1]-G$v[1])+G$W*(G$v[0]-G$q[0]))/(G$W*G$A-G$R*G$y);return 0<=G$O&&G$O<=1&&0<=G$N&&G$N<=1}function G$N(G$q,G$r,G$v){return(G$r[0]-G$q[0])*(G$v[1]-G$q[1])-(G$v[0]-G$q[0])*(G$r[1]-G$q[1])}function G$V(G$q,G$r,G$v){return 0<G$N(G$q,G$r,G$v)}function G$a(G$q,G$r,G$v){return 0<=G$N(G$q,G$r,G$v)}function G$J(G$q,G$r,G$v){return G$N(G$q,G$r,G$v)<0}function G$$(G$q,G$r,G$v){return G$N(G$q,G$r,G$v)<=0}G$r.exports={decomp:function(G$q){var G$r=function G$q(G$r){var G$v=[],G$H=[],G$A=[],G$y=[];var G$R=Number.MAX_VALUE;for(var G$W=0;G$W<G$r.length;++G$W)if(G$s(G$r,G$W))for(var G$O=0;G$O<G$r.length;++G$O)if(G$D(G$r,G$W,G$O)){G$H=G$q(G$g(G$r,G$W,G$O,G$y)),G$A=G$q(G$g(G$r,G$O,G$W,G$y));for(var G$N=0;G$N<G$A.length;G$N++)G$H.push(G$A[G$N]);G$H.length<G$R&&(G$R=(G$v=G$H).length,G$v.push([G$E(G$r,G$W),G$E(G$r,G$O)]))}return G$v}(G$q);return 0<G$r.length?function G$q(G$r,G$v){if(0===G$v.length)return[G$r];{if(G$v instanceof Array&&G$v.length&&G$v[0]instanceof Array&&2===G$v[0].length&&G$v[0][0]instanceof Array){for(var G$H=[G$r],G$A=0;G$A<G$v.length;G$A++)for(var G$y=G$v[G$A],G$R=0;G$R<G$H.length;G$R++){var G$W=G$H[G$R],G$O=G$q(G$W,G$y);if(G$O){G$H.splice(G$R,1),G$H.push(G$O[0],G$O[1]);break}}return G$H}var G$y=G$v,G$A=G$r.indexOf(G$y[0]),G$R=G$r.indexOf(G$y[1]);return-1!==G$A&&-1!==G$R&&[G$g(G$r,G$A,G$R),G$g(G$r,G$R,G$A)]}}(G$q,G$r):[G$q]},quickDecomp:function G$q(G$r,G$v,G$H,G$A,G$y,G$R,G$W){G$R=G$R||100;G$W=G$W||0;G$y=G$y||25;G$v=void 0!==G$v?G$v:[];G$H=G$H||[];G$A=G$A||[];var G$O=[0,0],G$N=[0,0],G$x=[0,0];var G$K=0,G$T=0,G$j=0,G$D=0;var G$g=0,G$X=0,G$m=0;var G$B=[],G$e=[];var G$p=G$r,G$M=G$r;if(G$M.length<3)return G$v;G$W++;if(G$R<G$W)return console.warn("quickDecomp: max level ("+G$R+") reached."),G$v;for(var G$z=0;G$z<G$r.length;++G$z)if(G$s(G$p,G$z)){G$H.push(G$p[G$z]),G$K=G$T=Number.MAX_VALUE;for(var G$P=0;G$P<G$r.length;++G$P)G$V(G$E(G$p,G$z-1),G$E(G$p,G$z),G$E(G$p,G$P))&&G$$(G$E(G$p,G$z-1),G$E(G$p,G$z),G$E(G$p,G$P-1))&&(G$x=G$Y(G$E(G$p,G$z-1),G$E(G$p,G$z),G$E(G$p,G$P),G$E(G$p,G$P-1)),G$J(G$E(G$p,G$z+1),G$E(G$p,G$z),G$x)&&(G$j=G$G(G$p[G$z],G$x))<G$T&&(G$T=G$j,G$N=G$x,G$X=G$P)),G$V(G$E(G$p,G$z+1),G$E(G$p,G$z),G$E(G$p,G$P+1))&&G$$(G$E(G$p,G$z+1),G$E(G$p,G$z),G$E(G$p,G$P))&&(G$x=G$Y(G$E(G$p,G$z+1),G$E(G$p,G$z),G$E(G$p,G$P),G$E(G$p,G$P+1)),G$V(G$E(G$p,G$z-1),G$E(G$p,G$z),G$x)&&(G$j=G$G(G$p[G$z],G$x))<G$K&&(G$K=G$j,G$O=G$x,G$g=G$P));if(G$X===(G$g+1)%G$r.length)G$x[0]=(G$N[0]+G$O[0])/2,G$x[1]=(G$N[1]+G$O[1])/2,G$A.push(G$x),G$z<G$g?(G$Q(G$B,G$p,G$z,G$g+1),G$B.push(G$x),G$e.push(G$x),0!==G$X&&G$Q(G$e,G$p,G$X,G$p.length),G$Q(G$e,G$p,0,G$z+1)):(0!==G$z&&G$Q(G$B,G$p,G$z,G$p.length),G$Q(G$B,G$p,0,G$g+1),G$B.push(G$x),G$e.push(G$x),G$Q(G$e,G$p,G$X,G$z+1));else{if(G$g<G$X&&(G$g+=G$r.length),G$D=Number.MAX_VALUE,G$g<G$X)return G$v;for(var G$P=G$X;G$P<=G$g;++G$P)G$a(G$E(G$p,G$z-1),G$E(G$p,G$z),G$E(G$p,G$P))&&G$$(G$E(G$p,G$z+1),G$E(G$p,G$z),G$E(G$p,G$P))&&(G$j=G$G(G$E(G$p,G$z),G$E(G$p,G$P)))<G$D&&G$Z(G$p,G$z,G$P)&&(G$D=G$j,G$m=G$P%G$r.length);G$z<G$m?(G$Q(G$B,G$p,G$z,G$m+1),0!==G$m&&G$Q(G$e,G$p,G$m,G$M.length),G$Q(G$e,G$p,0,G$z+1)):(0!==G$z&&G$Q(G$B,G$p,G$z,G$M.length),G$Q(G$B,G$p,0,G$m+1),G$Q(G$e,G$p,G$m,G$z+1))}return G$B.length<G$e.length?(G$q(G$B,G$v,G$H,G$A,G$y,G$R,G$W),G$q(G$e,G$v,G$H,G$A,G$y,G$R,G$W)):(G$q(G$e,G$v,G$H,G$A,G$y,G$R,G$W),G$q(G$B,G$v,G$H,G$A,G$y,G$R,G$W)),G$v}G$v.push(G$r);return G$v},isSimple:function(G$q){var G$r,G$v=G$q;for(G$r=0;G$r<G$v.length-1;G$r++)for(var G$H=0;G$H<G$r-1;G$H++)if(G$A(G$v[G$r],G$v[G$r+1],G$v[G$H],G$v[G$H+1]))return!1;for(G$r=1;G$r<G$v.length-2;G$r++)if(G$A(G$v[0],G$v[G$v.length-1],G$v[G$r],G$v[G$r+1]))return!1;return!0},removeCollinearPoints:function(G$q,G$r){for(var G$v=0,G$H=G$q.length-1;3<G$q.length&&0<=G$H;--G$H)G$y(G$E(G$q,G$H-1),G$E(G$q,G$H),G$E(G$q,G$H+1),G$r)&&(G$q.splice(G$H%G$q.length,1),G$v++);return G$v},removeDuplicatePoints:function(G$q,G$r){for(var G$v=G$q.length-1;1<=G$v;--G$v)for(var G$H=G$q[G$v],G$A=G$v-1;0<=G$A;--G$A)G$y=G$H,G$R=G$q[G$A],G$W=G$r,G$X(G$y[0],G$R[0],G$W)&&G$X(G$y[1],G$R[1],G$W)&&G$q.splice(G$v,1);var G$y,G$R,G$W},makeCCW:function(G$q){for(var G$r=0,G$v=G$q,G$H=1;G$H<G$q.length;++G$H)(G$v[G$H][1]<G$v[G$r][1]||G$v[G$H][1]===G$v[G$r][1]&&G$v[G$H][0]>G$v[G$r][0])&&(G$r=G$H);return!G$V(G$E(G$q,G$r-1),G$E(G$q,G$r),G$E(G$q,G$r+1))&&(function(G$q){for(var G$r=[],G$v=G$q.length,G$H=0;G$H!==G$v;G$H++)G$r.push(G$q.pop());for(var G$H=0;G$H!==G$v;G$H++)G$q[G$H]=G$r[G$H]}(G$q),!0)}};var G$x=[],G$K=[];function G$y(G$q,G$r,G$v,G$H){if(G$H){var G$A=G$x,G$y=G$K;G$A[0]=G$r[0]-G$q[0],G$A[1]=G$r[1]-G$q[1],G$y[0]=G$v[0]-G$r[0],G$y[1]=G$v[1]-G$r[1];var G$R=G$A[0]*G$y[0]+G$A[1]*G$y[1],G$W=Math.sqrt(G$A[0]*G$A[0]+G$A[1]*G$A[1]),G$O=Math.sqrt(G$y[0]*G$y[0]+G$y[1]*G$y[1]);return Math.acos(G$R/(G$W*G$O))<G$H}return 0===G$N(G$q,G$r,G$v)}function G$G(G$q,G$r){var G$v=G$r[0]-G$q[0],G$H=G$r[1]-G$q[1];return G$v*G$v+G$H*G$H}function G$E(G$q,G$r){var G$v=G$q.length;return G$q[G$r<0?G$r%G$v+G$v:G$r%G$v]}function G$Q(G$q,G$r,G$v,G$H){for(var G$A=G$v;G$A<G$H;G$A++)G$q.push(G$r[G$A])}function G$s(G$q,G$r){return G$J(G$E(G$q,G$r-1),G$E(G$q,G$r),G$E(G$q,G$r+1))}var G$T=[],G$j=[];function G$D(G$q,G$r,G$v){var G$H,G$A,G$y=G$T,G$R=G$j;if(G$a(G$E(G$q,G$r+1),G$E(G$q,G$r),G$E(G$q,G$v))&&G$$(G$E(G$q,G$r-1),G$E(G$q,G$r),G$E(G$q,G$v)))return!1;G$A=G$G(G$E(G$q,G$r),G$E(G$q,G$v));for(var G$W=0;G$W!==G$q.length;++G$W)if((G$W+1)%G$q.length!==G$r&&G$W!==G$r&&G$a(G$E(G$q,G$r),G$E(G$q,G$v),G$E(G$q,G$W+1))&&G$$(G$E(G$q,G$r),G$E(G$q,G$v),G$E(G$q,G$W))&&(G$y[0]=G$E(G$q,G$r),G$y[1]=G$E(G$q,G$v),G$R[0]=G$E(G$q,G$W),G$R[1]=G$E(G$q,G$W+1),G$H=G$O(G$y,G$R),G$G(G$E(G$q,G$r),G$H)<G$A))return!1;return!0}function G$Z(G$q,G$r,G$v){for(var G$H=0;G$H!==G$q.length;++G$H)if(G$H!==G$r&&G$H!==G$v&&(G$H+1)%G$q.length!==G$r&&(G$H+1)%G$q.length!==G$v&&G$A(G$E(G$q,G$r),G$E(G$q,G$v),G$E(G$q,G$H),G$E(G$q,G$H+1)))return!1;return!0}function G$g(G$q,G$r,G$v,G$H){var G$A=G$H||[];if(function(G$q){G$q.length=0}(G$A),G$r<G$v)for(var G$y=G$r;G$y<=G$v;G$y++)G$A.push(G$q[G$y]);else{for(G$y=0;G$y<=G$v;G$y++)G$A.push(G$q[G$y]);for(G$y=G$r;G$y<G$q.length;G$y++)G$A.push(G$q[G$y])}return G$A}function G$Y(G$q,G$r,G$v,G$H,G$A){G$A=G$A||0;var G$y=G$r[1]-G$q[1],G$R=G$q[0]-G$r[0],G$W=G$y*G$q[0]+G$R*G$q[1],G$O=G$H[1]-G$v[1],G$N=G$v[0]-G$H[0],G$x=G$O*G$v[0]+G$N*G$v[1],G$K=G$y*G$N-G$O*G$R;return G$X(G$K,0,G$A)?[0,0]:[(G$N*G$W-G$R*G$x)/G$K,(G$y*G$x-G$O*G$W)/G$K]}function G$X(G$q,G$r,G$v){return G$v=G$v||0,Math.abs(G$q-G$r)<=G$v}},{}]},{},[1])(1)}),function(){var G$B={},G$H=Matter.Common,G$e=Matter.Composite,G$p=Matter.Bounds,G$r=Matter.Events,G$M=(Matter.Grid,Matter.Vector);G$B.create=function(G$q){var G$r={controller:G$B,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#fafafa",wireframeBackground:"#222222",hasBounds:!!G$q.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},G$v=G$H.extend(G$r,G$q);return G$v.mouse=G$q.mouse,G$v.engine=G$q.engine,G$v.container=G$v.container||Laya.stage,G$v.bounds=G$v.bounds||{min:{x:0,y:0},max:{x:G$v.width,y:G$v.height}},G$v},G$B.run=function(G$q){Laya.timer.frameLoop(1,this,G$B.world,[G$q]),G$r.on(G$q.engine.world,"afterRemove",G$B.onRemoveSprite)},G$B.stop=function(G$q){Laya.timer.clear(this,G$B.world),G$r.off(G$q.engine.world,"afterRemove",G$B.onRemoveSprite)},G$B.onRemoveSprite=function(G$q){var G$r=G$q.object.layaSprite;G$r&&G$r.parent&&G$r.parent.removeChild(G$r)},G$B.world=function(G$q){var G$r,G$v=G$q.engine.world,G$H=(G$q.renderer,G$q.container),G$A=G$q.options,G$y=G$e.allBodies(G$v),G$R=G$e.allConstraints(G$v),G$W=[];G$A.wireframes?G$B.setBackground(G$q,G$A.wireframeBackground):G$B.setBackground(G$q,G$A.background);var G$O=G$q.bounds.max.x-G$q.bounds.min.x,G$N=G$q.bounds.max.y-G$q.bounds.min.y,G$x=G$O/G$q.options.width,G$K=G$N/G$q.options.height;if(G$A.hasBounds){for(G$r=0;G$r<G$y.length;G$r++){var G$T=G$y[G$r];G$T.render.sprite.visible=G$p.overlaps(G$T.bounds,G$q.bounds)}for(G$r=0;G$r<G$R.length;G$r++){var G$j=G$R[G$r],G$D=G$j.bodyA,G$g=G$j.bodyB,G$X=G$j.pointA,G$m=G$j.pointB;G$D&&(G$X=G$M.add(G$D.position,G$j.pointA)),G$g&&(G$m=G$M.add(G$g.position,G$j.pointB)),G$X&&G$m&&((G$p.contains(G$q.bounds,G$X)||G$p.contains(G$q.bounds,G$m))&&G$W.push(G$j))}G$H.scale(1/G$x,1/G$K),G$H.pos(-G$q.bounds.min.x*(1/G$x),-G$q.bounds.min.y*(1/G$K))}else G$W=G$R;for(G$r=0;G$r<G$y.length;G$r++)G$B.body(G$q,G$y[G$r]);for(G$r=0;G$r<G$W.length;G$r++)G$B.constraint(G$q,G$W[G$r])},G$B.setBackground=function(G$q,G$r){if(G$q.currentBackground!==G$r){var G$v=G$r.indexOf&&-1!==G$r.indexOf("#");G$q.container.graphics.clear(),G$v?G$q.container.bgColor=G$r:(G$q.container.loadImage(G$r),G$q.container.bgColor="#FFFFFF"),G$q.currentBackground=G$r}},G$B.body=function(G$q,G$r){G$q.engine;var G$v=G$r.render;if(G$v.visible){if(G$v.sprite&&G$v.sprite.texture){G$r.id;var G$H=G$r.layaSprite,G$A=G$q.container;G$H||(G$H=G$r.layaSprite=G$O(G$q,G$r),G$r.effPendant&&!G$r.effPendant.parent&&G$H.addChild(G$r.effPendant)),G$A.contains(G$H)||G$A.addChild(G$H),G$H.x=G$r.position.x,G$H.y=G$r.position.y,G$H.rotation=180*G$r.angle/Math.PI,G$H.scaleX=G$v.sprite.xScale||1,G$H.scaleY=G$v.sprite.yScale||1,G$H.width=G$v.sprite.width,G$H.height=G$v.sprite.height,G$v.sprite.sizeGrid&&(G$H.sizeGrid=G$v.sprite.sizeGrid)}else{G$r.id,G$H=G$r.layaSprite,G$A=G$q.container;G$H||((G$H=G$r.layaSprite=G$N(G$q,G$r)).initialAngle=G$r.angle,G$r.effPendant&&!G$r.effPendant.parent&&G$H.addChild(G$r.effPendant)),G$A.contains(G$H)||G$A.addChild(G$H),G$H.x=G$r.position.x,G$H.y=G$r.position.y,G$H.rotation=180*(G$r.angle-G$H.initialAngle)/Math.PI}var G$y=G$r.text;if(G$y){var G$R=G$H.lbl;G$R||((G$R=G$H.lbl=new Laya.Label).fontSize=30,G$R.anchorX=.5,G$R.anchorY=.5,G$R.color=G$r.textClr?G$r.textClr:"#ffffff",G$R.strokeColor="#000000",G$R.stroke=2,G$R.centerX=0,G$R.centerY=0,G$H.addChild(G$R),void 0!==G$r.shapeType&&(0===G$r.shapeType&&(G$R.centerX=-10),2===G$r.shapeType&&(G$R.rotation=-G$H.rotation)),G$R.text=G$y+"",G$r.lbl=G$R)}if(G$r.pendant&&!G$H.pendantSpr){var G$W=new Laya.Image;G$W.skin=G$r.pendant,G$H.addChild(G$W),G$H.pendantSpr=G$W}}};var G$O=function(G$q,G$r){var G$v=G$r.render.sprite.texture,G$H=new Laya.Image;return G$H.skin=G$v,G$H.pivotX=G$r.render.sprite.xOffset,G$H.pivotY=G$r.render.sprite.yOffset,G$H},G$N=function(G$q,G$r){var G$v,G$H,G$A,G$y,G$R=G$r.render,G$W=G$q.options,G$O=new Laya.Sprite,G$N=G$O.graphics;G$N.clear();for(var G$x=1<G$r.parts.length?1:0;G$x<G$r.parts.length;G$x++){G$y=G$r.parts[G$x];var G$K=[];G$A=G$W.wireframes?(G$v=null,G$H="#bbbbbb",1):(G$v=G$R.fillStyle,G$H=G$R.strokeStyle,G$R.lineWidth),G$K.push(G$y.vertices[0].x-G$r.position.x,G$y.vertices[0].y-G$r.position.y);for(var G$T=1;G$T<G$y.vertices.length;G$T++)G$K.push(G$y.vertices[G$T].x-G$r.position.x,G$y.vertices[G$T].y-G$r.position.y);G$K.push(G$y.vertices[0].x-G$r.position.x,G$y.vertices[0].y-G$r.position.y),G$N.drawPoly(0,0,G$K,G$v,G$H,G$A),(G$W.showAngleIndicator||G$W.showAxes)&&(G$A=1,G$H=G$W.wireframes?"#CD5C5C":G$R.strokeStyle,G$N.drawLine(G$y.position.x-G$r.position.x,G$y.position.y-G$r.position.y,(G$y.vertices[0].x+G$y.vertices[G$y.vertices.length-1].x)/2-G$r.position.x,(G$y.vertices[0].y+G$y.vertices[G$y.vertices.length-1].y)/2-G$r.position.y))}return G$O};G$B.constraint=function(G$q,G$r){G$q.engine;var G$v=G$r.bodyA,G$H=G$r.bodyB,G$A=G$r.pointA,G$y=G$r.pointB,G$R=G$q.container,G$W=G$r.render,G$O=(G$r.id,G$r.layaSprite);G$O||(G$O=G$r.layaSprite=new Laya.Sprite);var G$N,G$x,G$K,G$T,G$j=G$O.graphics;G$W.visible&&G$r.pointA&&G$r.pointB?(G$R.contains(G$O)||G$R.addChild(G$O),G$j.clear(),G$x=G$v?(G$N=G$v.position.x+G$A.x,G$v.position.y+G$A.y):(G$N=G$A.x,G$A.y),G$T=G$H?(G$K=G$H.position.x+G$y.x,G$H.position.y+G$y.y):(G$K=G$y.x,G$y.y),G$j.drawLine(G$N,G$x,G$K,G$T,G$W.strokeStyle,G$W.lineWidth)):G$j.clear()},window.LayaRender=G$B}();