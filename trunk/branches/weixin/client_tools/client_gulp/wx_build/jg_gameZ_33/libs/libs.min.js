var Laya=window.Laya=function(e$I,e$d){var e$b={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(e$d,e$t){return 1==arguments.length?e$b.__presubstr.call(this,e$d):e$b.__presubstr.call(this,e$d,0<e$t?e$t:this.length+e$t)},__init:function(e$d){e$d.forEach(function(e$d){e$d.__init$&&e$d.__init$()})},__isClass:function(e$d){return e$d&&(e$d.__isclass||e$d==Object||e$d==String||e$d==Array)},__newvec:function(e$d,e$t){var e$l=[];e$l.length=e$d;for(var e$k=0;e$k<e$d;e$k++)e$l[e$k]=e$t;return e$l},__extend:function(e$d,e$t){for(var e$l in e$t)if(e$t.hasOwnProperty(e$l)){var e$k=Object.getOwnPropertyDescriptor(e$t,e$l),e$W=e$k.get,e$i=e$k.set;e$W||e$i?e$W&&e$i?Object.defineProperty(e$d,e$l,e$k):(e$W&&Object.defineProperty(e$d,e$l,e$W),e$i&&Object.defineProperty(e$d,e$l,e$i)):e$d[e$l]=e$t[e$l]}function e$A(){e$b.un(this,"constructor",e$d)}e$A.prototype=e$t.prototype,e$d.prototype=new e$A,e$b.un(e$d.prototype,"__imps",e$b.__copy({},e$t.prototype.__imps))},__copy:function(e$d,e$t){if(!e$t)return null;for(var e$l in e$d=e$d||{},e$t)e$d[e$l]=e$t[e$l];return e$d},__package:function(e$d,e$t){if(!e$b.__packages[e$d]){e$b.__packages[e$d]=!0;var e$l=e$I,e$k=e$d.split(".");if(1<e$k.length)for(var e$W=0,e$i=e$k.length-1;e$W<e$i;e$W++){var e$A=e$l[e$k[e$W]];e$l=e$A||(e$l[e$k[e$W]]={})}e$l[e$k[e$k.length-1]]||(e$l[e$k[e$k.length-1]]=e$t||{})}},__hasOwnProperty:function(e$d,e$t){return e$t=e$t||this,Object.hasOwnProperty.call(e$t,e$d)||function e$d(e$t,e$l){if(Object.hasOwnProperty.call(e$l.prototype,e$t))return!0;var e$k=e$l.prototype.__super;return null==e$k?null:e$d(e$t,e$k)}(e$d,e$t.__class)},__typeof:function(e$d,e$t){if(!e$d||!e$t)return!1;if(e$t===String)return"string"==typeof e$d;if(e$t===Number)return"number"==typeof e$d;if(e$t.__interface__)e$t=e$t.__interface__;else if("string"!=typeof e$t)return e$d instanceof e$t;return e$d.__imps&&e$d.__imps[e$t]||e$d.__class==e$t},__as:function(e$d,e$t){return this.__typeof(e$d,e$t)?e$d:null},__int:function(e$d){return e$d?parseInt(e$d):0},interface:function(e$d,e$t){e$b.__package(e$d,{});var e$l=e$b.__internals,e$k=e$l[e$d]=e$l[e$d]||{self:e$d};if(e$t){var e$W=e$t.split(",");e$k.extend=[];for(var e$i=0;e$i<e$W.length;e$i++){var e$A=e$W[e$i];e$l[e$A]=e$l[e$A]||{self:e$A},e$k.extend.push(e$l[e$A])}}var e$B=e$I,e$o=e$d.split(".");for(e$i=0;e$i<e$o.length-1;e$i++)e$B=e$B[e$o[e$i]];e$B[e$o[e$o.length-1]]={__interface__:e$d}},class:function(e$d,e$t,e$l,e$k){if(e$l&&e$b.__extend(e$d,e$l),e$t)if(e$b.__package(e$t,e$d),e$b.__classmap[e$t]=e$d,0<e$t.indexOf(".")){if(0==e$t.indexOf("laya.")){var e$W=e$t.split(".");e$k=e$k||e$W[e$W.length-1],e$b[e$k]&&console.log("Warning!,this class["+e$k+"] already exist:",e$b[e$k]),e$b[e$k]=e$d}}else"Main"==e$t?e$I.Main=e$d:"MainWX"==e$t?e$I.MainWX=e$d:(e$b[e$t]&&console.log("Error!,this class["+e$t+"] already exist:",e$b[e$t]),e$b[e$t]=e$d);var e$i=e$b.un,e$A=e$d.prototype;e$i(e$A,"hasOwnProperty",e$b.__hasOwnProperty),e$i(e$A,"__class",e$d),e$i(e$A,"__super",e$l),e$i(e$A,"__className",e$t),e$i(e$d,"__super",e$l),e$i(e$d,"__className",e$t),e$i(e$d,"__isclass",!0),e$i(e$d,"super",function(e$d){this.__super.call(e$d)})},imps:function(e$d,e$t){if(!e$t)return null;var e$W=e$d.__imps||e$b.un(e$d,"__imps",{});function e$i(e$d){var e$t,e$l;if((e$t=e$b.__internals[e$d])&&(e$W[e$d]=!0,e$l=e$t.extend))for(var e$k=0;e$k<e$l.length;e$k++)e$i(e$l[e$k].self)}for(var e$l in e$t)e$i(e$l)},superSet:function(e$d,e$t,e$l,e$k){var e$W=e$d.prototype["_$set_"+e$l];e$W&&e$W.call(e$t,e$k)},superGet:function(e$d,e$t,e$l){var e$k=e$d.prototype["_$get_"+e$l];return e$k?e$k.call(e$t):null},getset:function(e$d,e$t,e$l,e$k,e$W){e$d?(e$k&&(e$t["_$GET_"+e$l]=e$k),e$W&&(e$t["_$SET_"+e$l]=e$W)):(e$k&&e$b.un(e$t,"_$get_"+e$l,e$k),e$W&&e$b.un(e$t,"_$set_"+e$l,e$W)),e$k&&e$W?Object.defineProperty(e$t,e$l,{get:e$k,set:e$W,enumerable:!1,configurable:!0}):(e$k&&Object.defineProperty(e$t,e$l,{get:e$k,enumerable:!1,configurable:!0}),e$W&&Object.defineProperty(e$t,e$l,{set:e$W,enumerable:!1,configurable:!0}))},static:function(e$l,e$k){for(var e$W=0,e$d=e$k.length;e$W<e$d;e$W+=2)if("length"==e$k[e$W])e$l.length=e$k[e$W+1].call(e$l);else{function e$t(){var e$t=e$k[e$W],e$d=e$k[e$W+1];Object.defineProperty(e$l,e$t,{get:function(){return delete this[e$t],this[e$t]=e$d.call(this)},set:function(e$d){delete this[e$t],this[e$t]=e$d},enumerable:!0,configurable:!0})}e$t()}},un:function(e$d,e$t,e$l){return e$l||(e$l=e$d[e$t]),e$b.__propun.value=e$l,Object.defineProperty(e$d,e$t,e$b.__propun),e$l},uns:function(e$t,e$d){e$d.forEach(function(e$d){e$b.un(e$t,e$d)})}};return e$I.console=e$I.console||{log:function(){}},e$I.trace=e$I.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),e$b}(window,document);!function(e$d,e$t,e$l){e$l.un,e$l.uns,e$l.static,e$l.class,e$l.getset,e$l.__newvec}(window,document,Laya),function(e$A,e$t,e$q){e$q.un,e$q.uns;var e$o=e$q.static,e$b=e$q.class,e$Y=e$q.getset;e$q.__newvec;e$q.interface("laya.runtime.IMarket"),e$q.interface("laya.filters.IFilter"),e$q.interface("laya.display.ILayout"),e$q.interface("laya.resource.IDispose"),e$q.interface("laya.runtime.IPlatform"),e$q.interface("laya.resource.IDestroy"),e$q.interface("laya.runtime.IConchNode"),e$q.interface("laya.filters.IFilterAction"),e$q.interface("laya.runtime.ICPlatformClass"),e$q.interface("laya.resource.ICreateResource"),e$q.interface("laya.runtime.IConchRenderObject"),e$q.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var e$r=function(){function e$i(){}return e$b(e$i,"laya.utils.RunDriver"),e$i.FILTER_ACTIONS=[],e$i.pixelRatio=-1,e$i._charSizeTestDiv=null,e$i.now=function(){return Date.now()},e$i.getWindow=function(){return e$A},e$i.getPixelRatio=function(){if(e$i.pixelRatio<0){var e$d=e$V.context,e$t=e$d.backingStorePixelRatio||e$d.webkitBackingStorePixelRatio||e$d.mozBackingStorePixelRatio||e$d.msBackingStorePixelRatio||e$d.oBackingStorePixelRatio||e$d.backingStorePixelRatio||1;(e$i.pixelRatio=(e$V.window.devicePixelRatio||1)/e$t)<1&&(e$i.pixelRatio=1)}return e$i.pixelRatio},e$i.getIncludeStr=function(e$d){return null},e$i.createShaderCondition=function(e$d){var e$t="(function() {return "+e$d+";})";return e$q._runScript(e$t)},e$i.fontMap=[],e$i.measureText=function(e$d,e$t){var e$l=e$i.hanzi.test(e$d);if(e$l&&e$i.fontMap[e$t])return e$i.fontMap[e$t];var e$k=e$V.context;e$k.font=e$t;var e$W=e$k.measureText(e$d);return e$W||(e$W={width:16,height:16}),e$l&&(e$i.fontMap[e$t]=e$W),e$W},e$i.getWebGLContext=function(e$d){},e$i.beginFlush=function(){},e$i.endFinish=function(){},e$i.addToAtlas=null,e$i.flashFlushImage=function(e$d){},e$i.drawToCanvas=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$gd.create("2D"),e$B=new e$x(e$l,e$k,e$A);return e$n.renders[e$t]._fun(e$d,e$B,e$W,e$i),e$A},e$i.createParticleTemplate2D=null,e$i.createGLTextur=null,e$i.createWebGLContext2D=null,e$i.changeWebGLSize=function(e$d,e$t){},e$i.createRenderSprite=function(e$d,e$t){return new e$n(e$d,e$t)},e$i.createFilterAction=function(e$d){return new e$g},e$i.createGraphics=function(){return new e$J},e$i.clear=function(e$d){e$K._context.ctx.clear()},e$i.cancelLoadByUrl=function(e$d){},e$i.clearAtlas=function(e$d){},e$i.isAtlas=function(e$d){return!1},e$i.addTextureToAtlas=function(e$d){},e$i.getTexturePixels=function(e$d,e$t,e$l,e$k,e$W){return null},e$i.skinAniSprite=function(){return null},e$i.update3DLoop=function(){},e$o(e$i,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),e$i}(),e$k=(e$Y(1,e$q,"alertGlobalError",null,function(e$d){var e$i=0;e$V.window.onerror=e$d?function(e$d,e$t,e$l,e$k,e$W){e$i++<5&&e$W&&alert(e$W.stack||e$W)}:null}),e$q.init=function(e$d,e$t,e$l){for(var e$k=[],e$W=2,e$i=arguments.length;e$W<e$i;e$W++)e$k.push(arguments[e$W]);if(!e$q._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=e$q._arrayBufferSlice),e$q._isinit=!0,e$V.__init__(),e$Q.__init__(),e$J.__init__(),e$q.timer=new e$m,e$q.scaleTimer=new e$m,e$q.loader=new e$od,e$_.__init__(),e$W=0;for(var e$A=e$k.length;e$W<e$A;e$W++)e$k[e$W].enable&&e$k[e$W].enable();return e$c.__init__(),e$B.__init__(),e$y.__init__(),e$U.beginCheck(),e$q._currentStage=e$q.stage=new e$zd,e$q.stage.conchModel&&e$q.stage.conchModel.setRootNode(),e$q._getUrlPath(),e$q.render=new e$K(0,0),e$q.stage.size(e$d,e$t),e$n.__init__(),e$f.__init__(),e$w.instance.__init__(e$q.stage,e$K.canvas),e$Rd.__init__(),e$T.autoStopMusic=!0,e$p.__init__(),e$K.canvas}},e$q._getUrlPath=function(){var e$d=e$V.window.location,e$t=e$d.pathname;e$t=e$t&&":"==e$t.charAt(2)?e$t.substring(1):e$t,e$C.rootPath=e$C.basePath=e$C.getPath("file:"==e$d.protocol?e$t:e$d.protocol+"//"+e$d.host+e$d.pathname)},e$q._arrayBufferSlice=function(e$d,e$t){var e$l=new Uint8Array(this,e$d,e$t-e$d),e$k=new Uint8Array(e$l.length);return e$k.set(e$l),e$k.buffer},e$q._runScript=function(e$d){return e$V.window[e$q._evcode](e$d)},e$q.stage=null,e$q.timer=null,e$q.scaleTimer=null,e$q.loader=null,e$q.version="1.8.6",e$q.render=null,e$q._currentStage=null,e$q._isinit=!1,e$q.isDebug=!1,e$q.MiniAdpter={init:function(){e$A.navigator&&e$A.navigator.userAgent&&-1<e$A.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},e$o(e$q,["conchMarket",function(){return this.conchMarket=e$A.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=e$A.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function e$d(){}return e$b(e$d,"Config"),e$d.WebGLTextCacheCount=500,e$d.atlasEnable=!1,e$d.showCanvasMark=!1,e$d.animationInterval=50,e$d.isAntialias=!1,e$d.isAlpha=!1,e$d.premultipliedAlpha=!0,e$d.isStencil=!0,e$d.preserveDrawingBuffer=!1,e$d}()),e$I=function(){function e$I(){this._events=null}e$b(e$I,"laya.events.EventDispatcher");var e$d=e$I.prototype;return e$d.hasListener=function(e$d){return!!(this._events&&this._events[e$d])},e$d.getListener=function(e$d){return this._events?this._events[e$d]:null},e$d.event=function(e$d,e$t){if(!this._events||!this._events[e$d])return!1;var e$l=this._events[e$d];if(e$l.lock)e$l.queue||(e$l.queue=[]),e$l.queue.push(e$t);else{var e$k;for(e$l.lock=!0,e$l.cursor=e$l.head;e$l.cursor;)(e$k=e$l.cursor).recover?(e$l.head=e$l.tail=e$l.cursor=null,console.error("node is recover："+e$k.id)):(e$l.cursor=e$k.next,e$k.once&&e$I.delNode(e$l,e$k),e$k.method&&(null!=e$t?e$k.args?e$k.method.apply(e$k.caller,e$k.args.concat(e$t)):e$t instanceof Array?e$k.method.apply(e$k.caller,e$t):e$k.caller?e$k.method.call(e$k.caller,e$t):e$q.recordError("事件派发错误","node.caller:"+e$k.caller+"node.method:"+e$k.method+"data:"+e$t+"node.prev"+e$k.prev):e$k.method.apply(e$k.caller,e$k.args)),e$k.once&&e$I.recoverHandler(e$k));e$l.lock=!1,!e$l.head&&this._events&&this._events[e$d]==e$l&&delete this._events[e$d],e$l.queue&&e$l.queue.length&&this.event(e$d,e$l.queue.shift())}return!0},e$d.on=function(e$d,e$t,e$l,e$k){return this._createListener(e$d,e$t,e$l,e$k,!1)},e$d.once=function(e$d,e$t,e$l,e$k){return this._createListener(e$d,e$t,e$l,e$k,!0)},e$d._createListener=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$i&&(e$i=!0),e$i&&this.off(e$d,e$t,e$l,e$W);var e$A=e$I.createHandler(e$t||this,e$l,e$k,e$W);this._events||(this._events={});var e$B=this._events,e$o=e$B[e$d];return e$o?e$o.tail?(e$A.prev=e$o.tail,e$o.tail.next=e$A,e$o.tail=e$A):e$o.head=e$o.tail=e$A:e$B[e$d]={head:e$A,tail:e$A,cursor:null,lock:!1},this},e$d.off=function(e$d,e$t,e$l,e$k){if(void 0===e$k&&(e$k=!1),!this._events||!this._events[e$d])return this;for(var e$W=this._events[e$d],e$i=e$W.head;e$i;){if((!e$t||e$i.caller===e$t)&&e$i.method===e$l&&(!e$k||e$i.once)){e$I.delNode(e$W,e$i),e$W.cursor==e$i&&(e$W.cursor=e$i.next),e$I.recoverHandler(e$i);break}e$i=e$i.next}return this},e$d.offAll=function(e$d){var e$t=this._events;if(!e$t)return this;if(e$d)this._recoverHandlers(e$t[e$d]),delete e$t[e$d];else{for(var e$l in e$t)this._recoverHandlers(e$t[e$l]);this._events=null}return this},e$d._recoverHandlers=function(e$d){if(e$d){for(var e$t=e$d.head;e$t;){e$I.delNode(e$d,e$t);var e$l=e$t.next;e$I.recoverHandler(e$t),e$t=e$l}e$d.cursor=null}},e$d.isMouseEvent=function(e$d){return e$I.MOUSE_EVENTS[e$d]},e$I.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},e$I.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},e$I.delNode=function(e$d,e$t){e$t.prev?e$t.prev.next=e$t.next:e$d.head=e$t.next,e$t.next?e$t.next.prev=e$t.prev:e$d.tail=e$t.prev},e$I.createHandler=function(e$d,e$t,e$l,e$k){var e$W=500<e$I._freeHandler.length?e$I._freeHandler.shift():null;if(e$W)if(e$W.recover)e$W.recover=!1,e$W.caller=e$d,e$W.method=e$t,e$W.args=e$l,e$W.once=e$k;else{var e$i="";try{arguments.propertyIsEnumerable.caller}catch(e$d){e$i=e$d.stack}var e$A=e$W.caller?(e$W.caller.__proto__&&e$W.caller.__proto__.constructor&&e$W.caller.__proto__.constructor.name)+"|"+e$W.caller.__className+"|"+e$W.caller.name:"",e$B=e$W.method?e$W.method.name:"";e$q.recordError("EventDispatcher重复创建","caller="+e$A+"  method="+e$B+"  stack="+e$i),e$W={id:++e$I._nodeCount,caller:e$d,method:e$t,args:e$l,once:e$k,recover:!1}}else e$W={id:++e$I._nodeCount,caller:e$d,method:e$t,args:e$l,once:e$k,recover:!1};return e$W.prev=e$W.next=null,e$W},e$I.recoverHandler=function(e$d){if(e$d.recover){if(e$I._errorCount<5){e$I._errorCount++;var e$t="";try{arguments.propertyIsEnumerable.caller}catch(e$d){e$t=e$d.stack}var e$l=e$d.caller?(e$d.caller.__proto__&&e$d.caller.__proto__.constructor&&e$d.caller.__proto__.constructor.name)+"|"+e$d.caller.__className+"|"+e$d.caller.name:"",e$k=e$d.method?e$d.method.name:"";e$q.recordError("EventDispatcher重复回收","id="+e$d.id+"  caller="+e$l+"  method="+e$k+"  stack="+e$t)}e$d.caller=e$d.method=e$d.args=e$d.prev=null}else e$d.recover=!0,e$d.caller=e$d.method=e$d.args=e$d.prev=e$d.next=null,e$I._freeHandler&&e$I._freeHandler.length<3e3&&e$I._freeHandler.push(e$d)},e$I._freeHandler=[],e$I._nodeCount=0,e$I._errorCount=0,e$I}(),e$e=function(){function e$W(e$d,e$t,e$l,e$k){this.once=!1,void(this._id=0)===e$k&&(e$k=!1),this.setTo(e$d,e$t,e$l,e$k)}e$b(e$W,"laya.utils.Handler");var e$d=e$W.prototype;return e$d.setTo=function(e$d,e$t,e$l,e$k){return this._id=e$W._gid++,this.caller=e$d,this.method=e$t,this.args=e$l,this.once=e$k,this},e$d.run=function(){if(null==this.method)return null;var e$d=this._id,e$t=this.method.apply(this.caller,this.args);return this._id===e$d&&this.once&&this.recover(),e$t},e$d.runWith=function(e$d){if(null==this.method)return null;var e$t=this._id;if(null==e$d)var e$l=this.method.apply(this.caller,this.args);else e$l=this.args||e$d.unshift?this.args?this.method.apply(this.caller,this.args.concat(e$d)):this.method.apply(this.caller,e$d):this.method.call(this.caller,e$d);return this._id===e$t&&this.once&&this.recover(),e$l},e$d.clear=function(){return this.caller=null,this.method=null,this.args=null,this},e$d.recover=function(){0<this._id&&(this._id=0,this.clear())},e$W.create=function(e$d,e$t,e$l,e$k){return void 0===e$k&&(e$k=!0),new e$W(e$d,e$t,e$l,e$k)},e$W._gid=1,e$W}(),e$M=function(){function e$d(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}e$b(e$d,"laya.display.BitmapFont");var e$t=e$d.prototype;return e$t.loadFont=function(e$d,e$t){this._path=e$d,this._complete=e$t,e$q.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],e$e.create(this,this.onLoaded))},e$t.onLoaded=function(){this.parseFont(e$Bd.getRes(this._path),e$Bd.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},e$t.parseFont=function(e$d,e$t){if(null!=e$d&&null!=e$t){this._texture=e$t;var e$l=e$d.getElementsByTagName("info");if(!e$l[0].getAttributeNode)return this.parseFont2(e$d,e$t);this.fontSize=parseInt(e$l[0].getAttributeNode("size").nodeValue);var e$k,e$W=e$l[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(e$W[0]),parseInt(e$W[1]),parseInt(e$W[2]),parseInt(e$W[3])],e$k=e$d.getElementsByTagName("char");var e$i=0;for(e$i=0;e$i<e$k.length;e$i++){var e$A=e$k[e$i],e$B=parseInt(e$A.getAttributeNode("id").nodeValue),e$o=parseInt(e$A.getAttributeNode("xoffset").nodeValue)/1,e$I=parseInt(e$A.getAttributeNode("yoffset").nodeValue)/1,e$b=parseInt(e$A.getAttributeNode("xadvance").nodeValue)/1,e$f=new e$$;e$f.x=parseInt(e$A.getAttributeNode("x").nodeValue),e$f.y=parseInt(e$A.getAttributeNode("y").nodeValue),e$f.width=parseInt(e$A.getAttributeNode("width").nodeValue),e$f.height=parseInt(e$A.getAttributeNode("height").nodeValue);var e$J=e$bd.create(e$t,e$f.x,e$f.y,e$f.width,e$f.height,e$o,e$I);this._maxWidth=Math.max(this._maxWidth,e$b+this.letterSpacing),this._fontCharDic[e$B]=e$J,this._fontWidthMap[e$B]=e$b}}},e$t.parseFont2=function(e$d,e$t){if(null!=e$d&&null!=e$t){this._texture=e$t;var e$l=e$d.getElementsByTagName("info");this.fontSize=parseInt(e$l[0].attributes.size.nodeValue);var e$k=e$l[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(e$k[0]),parseInt(e$k[1]),parseInt(e$k[2]),parseInt(e$k[3])];var e$W=e$d.getElementsByTagName("char"),e$i=0;for(e$i=0;e$i<e$W.length;e$i++){var e$A=e$W[e$i].attributes,e$B=parseInt(e$A.id.nodeValue),e$o=parseInt(e$A.xoffset.nodeValue)/1,e$I=parseInt(e$A.yoffset.nodeValue)/1,e$b=parseInt(e$A.xadvance.nodeValue)/1,e$f=new e$$;e$f.x=parseInt(e$A.x.nodeValue),e$f.y=parseInt(e$A.y.nodeValue),e$f.width=parseInt(e$A.width.nodeValue),e$f.height=parseInt(e$A.height.nodeValue);var e$J=e$bd.create(e$t,e$f.x,e$f.y,e$f.width,e$f.height,e$o,e$I);this._maxWidth=Math.max(this._maxWidth,e$b+this.letterSpacing),this._fontCharDic[e$B]=e$J,this._fontWidthMap[e$B]=e$b}}},e$t.getCharTexture=function(e$d){return this._fontCharDic[e$d.charCodeAt(0)]},e$t.destroy=function(){if(this._texture){for(var e$d in this._fontCharDic){var e$t=this._fontCharDic[e$d];e$t&&e$t.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},e$t.setSpaceWidth=function(e$d){this._spaceWidth=e$d},e$t.getCharWidth=function(e$d){var e$t=e$d.charCodeAt(0);return this._fontWidthMap[e$t]?this._fontWidthMap[e$t]+this.letterSpacing:" "==e$d?this._spaceWidth+this.letterSpacing:0},e$t.getTextWidth=function(e$d){for(var e$t=0,e$l=0,e$k=e$d.length;e$l<e$k;e$l++)e$t+=this.getCharWidth(e$d.charAt(e$l));return e$t},e$t.getMaxWidth=function(){return this._maxWidth},e$t.getMaxHeight=function(){return this.fontSize},e$t.drawText=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A,e$B=this.getTextWidth(e$d),e$o=0;"center"===e$W&&(e$o=(e$i-e$B)/2),"right"===e$W&&(e$o=e$i-e$B);for(var e$I=0,e$b=0,e$f=e$d.length;e$b<e$f;e$b++)(e$A=this.getCharTexture(e$d.charAt(e$b)))&&(e$t.graphics.drawTexture(e$A,e$l+e$I+e$o,e$k),e$I+=this.getCharWidth(e$d.charAt(e$b)))},e$d}(),e$B=function(){function e$l(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=e$l._TF_EMPTY}e$b(e$l,"laya.display.css.Style");var e$d=e$l.prototype;return e$d.getTransform=function(){return this._tf},e$d.setTransform=function(e$d){this._tf="none"!==e$d&&e$d?e$d:e$l._TF_EMPTY},e$d.setTranslateX=function(e$d){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.translateX=e$d},e$d.setTranslateY=function(e$d){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.translateY=e$d},e$d.setScaleX=function(e$d){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.scaleX=e$d},e$d.setScale=function(e$d,e$t){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.scaleX=e$d,this._tf.scaleY=e$t},e$d.setScaleY=function(e$d){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.scaleY=e$d},e$d.setRotate=function(e$d){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.rotate=e$d},e$d.setSkewX=function(e$d){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.skewX=e$d},e$d.setSkewY=function(e$d){this._tf===e$l._TF_EMPTY&&(this._tf=new e$W),this._tf.skewY=e$d},e$d.destroy=function(){this.scrollRect=null},e$d.render=function(e$d,e$t,e$l,e$k){},e$d.getCSSStyle=function(){return e$td.EMPTY},e$d._enableLayout=function(){return!1},e$Y(0,e$d,"scaleX",function(){return this._tf.scaleX},function(e$d){this.setScaleX(e$d)}),e$Y(0,e$d,"transform",function(){return this.getTransform()},function(e$d){this.setTransform(e$d)}),e$Y(0,e$d,"translateX",function(){return this._tf.translateX},function(e$d){this.setTranslateX(e$d)}),e$Y(0,e$d,"translateY",function(){return this._tf.translateY},function(e$d){this.setTranslateY(e$d)}),e$Y(0,e$d,"scaleY",function(){return this._tf.scaleY},function(e$d){this.setScaleY(e$d)}),e$Y(0,e$d,"block",function(){return 0!=(1&this._type)}),e$Y(0,e$d,"skewY",function(){return this._tf.skewY},function(e$d){this.setSkewY(e$d)}),e$Y(0,e$d,"rotate",function(){return this._tf.rotate},function(e$d){this.setRotate(e$d)}),e$Y(0,e$d,"skewX",function(){return this._tf.skewX},function(e$d){this.setSkewX(e$d)}),e$Y(0,e$d,"paddingLeft",function(){return 0}),e$Y(0,e$d,"paddingTop",function(){return 0}),e$Y(0,e$d,"absolute",function(){return!0}),e$l.__init__=function(){e$l._TF_EMPTY=new e$W,e$l.EMPTY=new e$l},e$l.EMPTY=null,e$l._TF_EMPTY=null,e$l}(),e$c=function(){function e$t(e$d){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=e$N.create(e$t.defaultColor),this.family=e$t.defaultFamily,this.stroke=e$t._STROKE,this.size=e$t.defaultSize,e$d&&e$d!==e$t.EMPTY&&e$d.copyTo(this)}e$b(e$t,"laya.display.css.Font");var e$d=e$t.prototype;return e$d.set=function(e$d){this._text=null;for(var e$t=e$d.split(" "),e$l=0,e$k=e$t.length;e$l<e$k;e$l++){var e$W=e$t[e$l];switch(e$W){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<e$W.indexOf("px")&&(this.size=parseInt(e$W),this.family=e$t[e$l+1],e$l++)}},e$d.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},e$d.copyTo=function(e$d){e$d._type=this._type,e$d._text=this._text,e$d._weight=this._weight,e$d._color=this._color,e$d.family=this.family,e$d.stroke=this.stroke!=e$t._STROKE?this.stroke.slice():e$t._STROKE,e$d.indent=this.indent,e$d.size=this.size},e$Y(0,e$d,"password",function(){return 0!=(1024&this._type)},function(e$d){e$d?this._type|=1024:this._type&=-1025}),e$Y(0,e$d,"color",function(){return this._color.strColor},function(e$d){this._color=e$N.create(e$d)}),e$Y(0,e$d,"italic",function(){return 0!=(512&this._type)},function(e$d){e$d?this._type|=512:this._type&=-513}),e$Y(0,e$d,"bold",function(){return 0!=(2048&this._type)},function(e$d){e$d?this._type|=2048:this._type&=-2049}),e$Y(0,e$d,"weight",function(){return""+this._weight},function(e$d){var e$t=0;switch(e$d){case"normal":break;case"bold":this.bold=!0,e$t=700;break;case"bolder":e$t=800;break;case"lighter":e$t=100;break;default:e$t=parseInt(e$d)}this._weight=e$t,this._text=null}),e$Y(0,e$d,"decoration",function(){return this._decoration?this._decoration.value:null},function(e$d){var e$t=e$d.split(" ");switch(this._decoration||(this._decoration={}),e$t[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=e$t[0]}e$t[1]&&(this._decoration.color=e$N.create(e$t)),this._decoration.value=e$d}),e$t.__init__=function(){e$t.EMPTY=new e$t(null)},e$t.EMPTY=null,e$t.defaultColor="#000000",e$t.defaultSize=12,e$t.defaultFamily="Arial",e$t.defaultFont="12px Arial",e$t._STROKE=[0,"#000000"],e$t._ITALIC=512,e$t._PASSWORD=1024,e$t._BOLD=2048,e$t}(),e$W=function(){function e$d(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return e$b(e$d,"laya.display.css.TransformInfo"),e$d}(),e$J=function(){function e$f(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,e$K.isConchNode){this._nativeObj=new e$A._conchGraphics,this.id=this._nativeObj.conchID}}e$b(e$f,"laya.display.Graphics");var e$d=e$f.prototype;return e$d.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},e$d.clear=function(e$d){void 0===e$d&&(e$d=!1);var e$t=0,e$l=0;if(e$d){var e$k=this._one;if(this._cmds){for(e$l=this._cmds.length,e$t=0;e$t<e$l;e$t++)!(e$k=this._cmds[e$t])||e$k.callee!==e$K._context._drawTexture&&e$k.callee!==e$K._context._drawTextureWithTransform||(e$k[0]=null,e$f._cache.push(e$k));this._cmds.length=0}else e$k&&(!e$k||e$k.callee!==e$K._context._drawTexture&&e$k.callee!==e$K._context._drawTextureWithTransform||(e$k[0]=null,e$f._cache.push(e$k)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(e$t=0,e$l=this._vectorgraphArray.length;e$t<e$l;e$t++)e$a.getInstance().deleteShape(this._vectorgraphArray[e$t]);this._vectorgraphArray.length=0}},e$d._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},e$d._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new e$l,this._graphicBounds._graphics=this)},e$d._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},e$d._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},e$d.getBounds=function(e$d){return void 0===e$d&&(e$d=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(e$d)},e$d.getBoundPoints=function(e$d){return void 0===e$d&&(e$d=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(e$d)},e$d._addCmd=function(e$d){this._cmds=this._cmds||[],e$d.callee=e$d.shift(),this._cmds.push(e$d)},e$d.setFilters=function(e$d){this._saveToCmd(e$K._context._setFilters,e$d)},e$d.drawTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){if(void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),void 0===e$A&&(e$A=1),!e$d||e$A<.01)return null;e$k||(e$k=e$d.sourceWidth),e$W||(e$W=e$d.sourceHeight),e$A=e$A<0?0:1<e$A?1:e$A;var e$B,e$o=!e$K.isWebGL&&(e$V.onFirefox||e$V.onEdge||e$V.onIE||e$V.onSafari)?.5:0,e$I=e$k/e$d.sourceWidth,e$b=e$W/e$d.sourceHeight;return e$k=e$d.width*e$I,e$W=e$d.height*e$b,e$d.loaded&&(e$k<=0||e$W<=0)?null:(e$t+=e$d.offsetX*e$I,e$l+=e$d.offsetY*e$b,this._sp&&(this._sp._renderType|=512),e$t-=e$o,e$l-=e$o,e$k+=2*e$o,e$W+=2*e$o,e$f._cache.length?((e$B=e$f._cache.pop())[0]=e$d,e$B[1]=e$t,e$B[2]=e$l,e$B[3]=e$k,e$B[4]=e$W,e$B[5]=e$i,e$B[6]=e$A):e$B=[e$d,e$t,e$l,e$k,e$W,e$i,e$A],e$B.callee=e$i||1!=e$A?e$K._context._drawTextureWithTransform:e$K._context._drawTexture,null!=this._one||e$i||1!=e$A?this._saveToCmd(e$B.callee,e$B):(this._one=e$B,this._render=this._renderOneImg),e$d.loaded||e$d.once("loaded",this,this._textureLoaded,[e$d,e$B]),this._repaint(),e$B)},e$d.cleanByTexture=function(e$d,e$t,e$l,e$k,e$W){if(void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),!e$d)return this.clear();if(this._one&&this._render===this._renderOneImg){e$k||(e$k=e$d.sourceWidth),e$W||(e$W=e$d.sourceHeight);var e$i=e$k/e$d.sourceWidth,e$A=e$W/e$d.sourceHeight;e$k=e$d.width*e$i,e$W=e$d.height*e$A,e$t+=e$d.offsetX*e$i,e$l+=e$d.offsetY*e$A,this._one[0]=e$d,this._one[1]=e$t,this._one[2]=e$l,this._one[3]=e$k,this._one[4]=e$W,this._repaint()}else this.clear(),e$d&&this.drawTexture(e$d,e$t,e$l,e$k,e$W)},e$d.drawTextures=function(e$d,e$t){e$d&&this._saveToCmd(e$K._context._drawTextures,[e$d,e$t])},e$d.fillTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){if(void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),void 0===e$i&&(e$i="repeat"),e$d){var e$B=[e$d,e$t,e$l,e$k,e$W,e$i,e$A||e$L.EMPTY,{}];e$d.loaded||e$d.once("loaded",this,this._textureLoaded,[e$d,e$B]),this._saveToCmd(e$K._context._fillTexture,e$B)}},e$d._textureLoaded=function(e$d,e$t){e$t[3]=e$t[3]||e$d.width,e$t[4]=e$t[4]||e$d.height,this._repaint()},e$d.fillCircle=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$l.bitmap.enableMerageInAtlas=!1;var e$B=new Float32Array(2*(e$A+1)),e$o=new Float32Array(2*(e$A+1)),e$I=new Uint16Array(3*e$A),e$b=2*Math.PI/e$A,e$f=0;e$B[0]=e$k,e$B[1]=e$W,e$o[0]=e$k/e$l.width,e$o[1]=e$W/e$l.height;for(var e$J=2,e$c=0;e$c<e$A;e$c++){var e$Y=e$i*Math.cos(e$f)+e$k,e$w=e$i*Math.sin(e$f)+e$W;e$B[e$J]=e$Y,e$B[e$J+1]=e$w,e$o[e$J]=e$Y/e$l.width,e$o[e$J+1]=e$w/e$l.height,e$f+=e$b,e$J+=2}for(e$c=e$J=0;e$c<e$A;e$c++)e$I[e$J++]=0,e$I[e$J++]=e$c+1,e$I[e$J++]=e$A+1<=e$c+2?1:e$c+2;this.drawTriangles(e$l,e$d,e$t,e$B,e$o,e$I)},e$d.drawTriangles=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){void 0===e$B&&(e$B=1),this._saveToCmd(e$K._context.drawTriangles,[e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I])},e$d._saveToCmd=function(e$d,e$t){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=e$t,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(e$t)),e$t.callee=e$d,this._repaint(),e$t},e$d.clipRect=function(e$d,e$t,e$l,e$k){this._saveToCmd(e$K._context._clipRect,[e$d,e$t,e$l,e$k])},e$d.fillText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){void 0===e$A&&(e$A=0),this._saveToCmd(e$K._context._fillText,[e$d,e$t,e$l,e$k||e$c.defaultFont,e$W,e$i])},e$d.fillBorderText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){this._saveToCmd(e$K._context._fillBorderText,[e$d,e$t,e$l,e$k||e$c.defaultFont,e$W,e$i,e$A,e$B])},e$d.strokeText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._saveToCmd(e$K._context._strokeText,[e$d,e$t,e$l,e$k||e$c.defaultFont,e$W,e$i,e$A])},e$d.alpha=function(e$d){e$d=e$d<0?0:1<e$d?1:e$d,this._saveToCmd(e$K._context._alpha,[e$d])},e$d.setAlpha=function(e$d){e$d=e$d<0?0:1<e$d?1:e$d,this._saveToCmd(e$K._context._setAlpha,[e$d])},e$d.transform=function(e$d,e$t,e$l){void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),this._saveToCmd(e$K._context._transform,[e$d,e$t,e$l])},e$d.rotate=function(e$d,e$t,e$l){void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),this._saveToCmd(e$K._context._rotate,[e$d,e$t,e$l])},e$d.scale=function(e$d,e$t,e$l,e$k){void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0),this._saveToCmd(e$K._context._scale,[e$d,e$t,e$l,e$k])},e$d.translate=function(e$d,e$t){this._saveToCmd(e$K._context._translate,[e$d,e$t])},e$d.save=function(){this._saveToCmd(e$K._context._save,[])},e$d.restore=function(){this._saveToCmd(e$K._context._restore,[])},e$d.replaceText=function(e$d){this._repaint();var e$t=this._cmds;if(e$t){for(var e$l=e$t.length-1;-1<e$l;e$l--)if(this._isTextCmd(e$t[e$l].callee))return e$t[e$l][0].toUpperCase?e$t[e$l][0]=e$d:e$t[e$l][0].setText(e$d),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=e$d:this._one[0].setText(e$d),!0;return!1},e$d._isTextCmd=function(e$d){return e$d===e$K._context._fillText||e$d===e$K._context._fillBorderText||e$d===e$K._context._strokeText},e$d.replaceTextColor=function(e$d){this._repaint();var e$t=this._cmds;if(e$t)for(var e$l=e$t.length-1;-1<e$l;e$l--)this._isTextCmd(e$t[e$l].callee)&&(e$t[e$l][4]=e$d,e$t[e$l][0].toUpperCase||(e$t[e$l][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=e$d,this._one[0].toUpperCase||(this._one[0].changed=!0))},e$d.loadImage=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=this;void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0);var e$B=e$Bd.getRes(e$d);function e$o(e$d){e$d&&(e$A.drawTexture(e$d,e$t,e$l,e$k,e$W),null!=e$i&&e$i.call(e$A._sp,e$d))}e$B?e$o(e$B):e$q.loader.load(e$d,e$e.create(null,e$o),null,"image")},e$d._renderEmpty=function(e$d,e$t,e$l,e$k){},e$d._renderAll=function(e$d,e$t,e$l,e$k){for(var e$W,e$i=this._cmds,e$A=0,e$B=e$i.length;e$A<e$B;e$A++)(e$W=e$i[e$A]).callee.call(e$t,e$l,e$k,e$W)},e$d._renderOne=function(e$d,e$t,e$l,e$k){this._one.callee.call(e$t,e$l,e$k,this._one)},e$d._renderOneImg=function(e$d,e$t,e$l,e$k){this._one.callee.call(e$t,e$l,e$k,this._one),2305!==e$d._renderType&&(e$d._renderType|=1)},e$d.drawLine=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$i&&(e$i=1);var e$A=0;e$K.isWebGL&&(e$A=e$a.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$A));var e$B=e$i%2==0?0:.5,e$o=[e$d+e$B,e$t+e$B,e$l+e$B,e$k+e$B,e$W,e$i,e$A];this._saveToCmd(e$K._context._drawLine,e$o)},e$d.drawLines=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=1);var e$i=0;if(e$l&&!(e$l.length<4)){e$K.isWebGL&&(e$i=e$a.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$i));var e$A=e$W%2==0?0:.5,e$B=[e$d+e$A,e$t+e$A,e$l,e$k,e$W,e$i];this._saveToCmd(e$K._context._drawLines,e$B)}},e$d.drawCurves=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=1);var e$i=[e$d,e$t,e$l,e$k,e$W];this._saveToCmd(e$K._context._drawCurves,e$i)},e$d.drawRect=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){void 0===e$A&&(e$A=1);var e$B=e$i?e$A/2:0,e$o=e$i?e$A:0,e$I=[e$d+e$B,e$t+e$B,e$l-e$o,e$k-e$o,e$W,e$i,e$A];this._saveToCmd(e$K._context._drawRect,e$I)},e$d.drawCircle=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$i&&(e$i=1);var e$A=e$W?e$i/2:0,e$B=0;e$K.isWebGL&&(e$B=e$a.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$B));var e$o=[e$d,e$t,e$l-e$A,e$k,e$W,e$i,e$B];this._saveToCmd(e$K._context._drawCircle,e$o)},e$d.drawPie=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){void 0===e$B&&(e$B=1);var e$o=e$A?e$B/2:0,e$I=e$A?e$B:0,e$b=0;e$K.isWebGL&&(e$b=e$a.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$b));var e$f=[e$d+e$o,e$t+e$o,e$l-e$I,e$k,e$W,e$i,e$A,e$B,e$b];e$f[3]=e$F.toRadian(e$k),e$f[4]=e$F.toRadian(e$W),this._saveToCmd(e$K._context._drawPie,e$f)},e$d.drawPoly=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$i&&(e$i=1);var e$A=0,e$B=!1;e$K.isWebGL&&(e$A=e$a.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(e$A),e$B=!(6<e$l.length));var e$o=e$W?e$i%2==0?0:.5:0,e$I=[e$d+e$o,e$t+e$o,e$l,e$k,e$W,e$i,e$A,e$B];this._saveToCmd(e$K._context._drawPoly,e$I)},e$d.drawPath=function(e$d,e$t,e$l,e$k,e$W){var e$i=[e$d,e$t,e$l,e$k,e$W];this._saveToCmd(e$K._context._drawPath,e$i)},e$Y(0,e$d,"cmds",function(){return this._cmds},function(e$d){this._sp&&(this._sp._renderType|=512),this._cmds=e$d,this._render=this._renderAll,this._repaint()}),e$f.__init__=function(){if(e$K.isConchNode){for(var e$d=laya.display.Graphics.prototype,e$t=e$V.window.ConchGraphics.prototype,e$l=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],e$k=0,e$W=e$l.length;e$k<=e$W;e$k++){var e$i=e$l[e$k];e$d[e$i]=e$t[e$i]}e$d._saveToCmd=null,e$t.drawImageS&&(e$d.drawTextures=function(e$d,e$t){if(e$d&&e$d.loaded&&e$d.bitmap&&e$d.source){var e$l=e$d.uv,e$k=e$d.bitmap.width,e$W=e$d.bitmap.height;this.drawImageS(e$d.bitmap.source,e$l[0]*e$k,e$l[1]*e$W,(e$l[2]-e$l[0])*e$k,(e$l[5]-e$l[3])*e$W,e$d.offsetX,e$d.offsetY,e$d.width,e$d.height,e$t)}}),e$d.drawTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){if(void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),void 0===e$A&&(e$A=1),e$d)if(e$d.loaded){if(e$d.loaded&&e$d.bitmap&&e$d.source&&(e$k||(e$k=e$d.sourceWidth),e$W||(e$W=e$d.sourceHeight),e$A=e$A<0?0:1<e$A?1:e$A,e$k=e$k-e$d.sourceWidth+e$d.width,e$W=e$W-e$d.sourceHeight+e$d.height,!(e$k<=0||e$W<=0))){e$t+=e$d.offsetX,e$l+=e$d.offsetY;var e$B=e$d.uv,e$o=e$d.bitmap.width,e$I=e$d.bitmap.height;e$B[4]<e$B[0]&&e$B[5]<e$B[1]?this.drawImageM(e$d.bitmap.source,e$B[4]*e$o,e$B[5]*e$I,(e$B[0]-e$B[4])*e$o,(e$B[1]-e$B[5])*e$I,e$t,e$l,e$k,e$W,e$i,e$A):this.drawImageM(e$d.bitmap.source,e$B[0]*e$o,e$B[1]*e$I,(e$B[2]-e$B[0])*e$o,(e$B[5]-e$B[3])*e$I,e$t,e$l,e$k,e$W,e$i,e$A),this._repaint()}}else e$d.once("loaded",this,function(){this.drawTexture(e$d,e$t,e$l,e$k,e$W,e$i)})},e$d.fillTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){if(void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),void 0===e$i&&(e$i="repeat"),e$d&&e$d.loaded){var e$B,e$o=e$K._context.ctx,e$I=e$d.bitmap.width,e$b=e$d.bitmap.height,e$f=e$d.uv;e$B=e$d.uv!=e$bd.DEF_UV?e$o.createPattern(e$d.bitmap.source,e$i,e$f[0]*e$I,e$f[1]*e$b,(e$f[2]-e$f[0])*e$I,(e$f[5]-e$f[3])*e$b):e$o.createPattern(e$d.bitmap.source,e$i);var e$J=0,e$c=0;e$A&&(e$t+=e$A.x%e$d.width,e$l+=e$A.y%e$d.height,e$J-=e$A.x%e$d.width,e$c-=e$A.y%e$d.height),this._fillImage(e$B,e$t,e$l,e$J,e$c,e$k,e$W)}}}},e$f._cache=[],e$f}(),e$l=function(){function e$g(){this._cacheBoundsType=!1}e$b(e$g,"laya.display.GraphicsBounds");var e$d=e$g.prototype;return e$d.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},e$d.reset=function(){this._temp&&(this._temp.length=0)},e$d.getBounds=function(e$d){return void 0===e$d&&(e$d=!1),(!this._bounds||!this._temp||this._temp.length<1||e$d!=this._cacheBoundsType)&&(this._bounds=e$$._getWrapRec(this.getBoundPoints(e$d),this._bounds)),this._cacheBoundsType=e$d,this._bounds},e$d.getBoundPoints=function(e$d){return void 0===e$d&&(e$d=!1),(!this._temp||this._temp.length<1||e$d!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(e$d)),this._cacheBoundsType=e$d,this._rstBoundPoints=e$F.copyArray(this._rstBoundPoints,this._temp)},e$d._getCmdPoints=function(e$d){void 0===e$d&&(e$d=!1);var e$t,e$l,e$k=e$K._context,e$W=this._graphics.cmds;if((e$t=this._temp||(this._temp=[])).length=0,e$W||null==this._graphics._one||(e$g._tempCmds.length=0,e$g._tempCmds.push(this._graphics._one),e$W=e$g._tempCmds),!e$W)return e$t;(e$l=e$g._tempMatrixArrays).length=0;var e$i=e$g._initMatrix;e$i.identity();for(var e$A,e$B,e$o=e$g._tempMatrix,e$I=NaN,e$b=NaN,e$f=NaN,e$J=NaN,e$c=NaN,e$Y=NaN,e$w=0,e$D=e$W.length;e$w<e$D;e$w++)if((e$A=e$W[e$w]).callee)switch(e$A.callee){case e$k._save:case 7:e$l.push(e$i),e$i=e$i.clone();break;case e$k._restore:case 8:e$i=e$l.pop();break;case e$k._scale:case 5:e$o.identity(),e$o.translate(-e$A[2],-e$A[3]),e$o.scale(e$A[0],e$A[1]),e$o.translate(e$A[2],e$A[3]),this._switchMatrix(e$i,e$o);break;case e$k._rotate:case 3:e$o.identity(),e$o.translate(-e$A[1],-e$A[2]),e$o.rotate(e$A[0]),e$o.translate(e$A[1],e$A[2]),this._switchMatrix(e$i,e$o);break;case e$k._translate:case 6:e$o.identity(),e$o.translate(e$A[0],e$A[1]),this._switchMatrix(e$i,e$o);break;case e$k._transform:case 4:e$o.identity(),e$o.translate(-e$A[1],-e$A[2]),e$o.concat(e$A[0]),e$o.translate(e$A[1],e$A[2]),this._switchMatrix(e$i,e$o);break;case 16:case 24:e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[0],e$A[1],e$A[2],e$A[3]),e$i);break;case 17:e$i.copyTo(e$o),e$o.concat(e$A[4]),e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[0],e$A[1],e$A[2],e$A[3]),e$o);break;case e$k._drawTexture:e$B=e$A[0],e$d?e$A[3]&&e$A[4]?e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1],e$A[2],e$A[3],e$A[4]),e$i):(e$B=e$A[0],e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1],e$A[2],e$B.width,e$B.height),e$i)):(e$I=(e$A[3]||e$B.sourceWidth)/e$B.width,e$b=(e$A[4]||e$B.sourceHeight)/e$B.height,e$f=e$I*e$B.sourceWidth,e$J=e$b*e$B.sourceHeight,e$c=0<e$B.offsetX?e$B.offsetX:0,e$Y=0<e$B.offsetY?e$B.offsetY:0,e$c*=e$I,e$Y*=e$b,e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1]-e$c,e$A[2]-e$Y,e$f,e$J),e$i));break;case e$k._fillTexture:e$A[3]&&e$A[4]?e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1],e$A[2],e$A[3],e$A[4]),e$i):(e$B=e$A[0],e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1],e$A[2],e$B.width,e$B.height),e$i));break;case e$k._drawTextureWithTransform:var e$z;e$z=e$A[5]?(e$i.copyTo(e$o),e$o.concat(e$A[5]),e$o):e$i,e$d?e$A[3]&&e$A[4]?e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1],e$A[2],e$A[3],e$A[4]),e$z):(e$B=e$A[0],e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1],e$A[2],e$B.width,e$B.height),e$z)):(e$B=e$A[0],e$I=(e$A[3]||e$B.sourceWidth)/e$B.width,e$b=(e$A[4]||e$B.sourceHeight)/e$B.height,e$f=e$I*e$B.sourceWidth,e$J=e$b*e$B.sourceHeight,e$c=0<e$B.offsetX?e$B.offsetX:0,e$Y=0<e$B.offsetY?e$B.offsetY:0,e$c*=e$I,e$Y*=e$b,e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[1]-e$c,e$A[2]-e$Y,e$f,e$J),e$z));break;case e$k._drawRect:case 13:e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[0],e$A[1],e$A[2],e$A[3]),e$i);break;case e$k._drawCircle:case e$k._fillCircle:case 14:e$g._addPointArrToRst(e$t,e$$._getBoundPointS(e$A[0]-e$A[2],e$A[1]-e$A[2],e$A[2]+e$A[2],e$A[2]+e$A[2]),e$i);break;case e$k._drawLine:case 20:e$g._tempPoints.length=0;var e$e;e$e=.5*e$A[5],e$A[0]==e$A[2]?e$g._tempPoints.push(e$A[0]+e$e,e$A[1],e$A[2]+e$e,e$A[3],e$A[0]-e$e,e$A[1],e$A[2]-e$e,e$A[3]):e$A[1]==e$A[3]?e$g._tempPoints.push(e$A[0],e$A[1]+e$e,e$A[2],e$A[3]+e$e,e$A[0],e$A[1]-e$e,e$A[2],e$A[3]-e$e):e$g._tempPoints.push(e$A[0],e$A[1],e$A[2],e$A[3]),e$g._addPointArrToRst(e$t,e$g._tempPoints,e$i);break;case e$k._drawCurves:case 22:e$g._addPointArrToRst(e$t,e$H.I.getBezierPoints(e$A[2]),e$i,e$A[0],e$A[1]);break;case e$k._drawPoly:case e$k._drawLines:case 18:e$g._addPointArrToRst(e$t,e$A[2],e$i,e$A[0],e$A[1]);break;case e$k._drawPath:case 19:e$g._addPointArrToRst(e$t,this._getPathPoints(e$A[2]),e$i,e$A[0],e$A[1]);break;case e$k._drawPie:case 15:e$g._addPointArrToRst(e$t,this._getPiePoints(e$A[0],e$A[1],e$A[2],e$A[3],e$A[4]),e$i)}return 200<e$t.length?e$t=e$F.copyArray(e$t,e$$._getWrapRec(e$t)._getBoundPoints()):8<e$t.length&&(e$t=e$R.scanPList(e$t)),e$t},e$d._switchMatrix=function(e$d,e$t){e$t.concat(e$d),e$t.copyTo(e$d)},e$d._getPiePoints=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$g._tempPoints;e$g._tempPoints.length=0,e$i.push(e$d,e$t);var e$A=(e$W-e$k)%(2*Math.PI)/10,e$B=NaN,e$o=e$k;for(e$B=0;e$B<=10;e$B++)e$i.push(e$d+e$l*Math.cos(e$o),e$t+e$l*Math.sin(e$o)),e$o+=e$A;return e$i},e$d._getPathPoints=function(e$d){var e$t,e$l,e$k=0,e$W=e$g._tempPoints;for(e$W.length=0,e$t=e$d.length,e$k=0;e$k<e$t;e$k++)1<(e$l=e$d[e$k]).length&&(e$W.push(e$l[1],e$l[2]),3<e$l.length&&e$W.push(e$l[3],e$l[4]));return e$W},e$g._addPointArrToRst=function(e$d,e$t,e$l,e$k,e$W){void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0);var e$i,e$A=0;for(e$i=e$t.length,e$A=0;e$A<e$i;e$A+=2)e$g._addPointToRst(e$d,e$t[e$A]+e$k,e$t[e$A+1]+e$W,e$l)},e$g._addPointToRst=function(e$d,e$t,e$l,e$k){var e$W=e$L.TEMP;e$W.setTo(e$t||0,e$l||0),e$k.transformPoint(e$W),e$d.push(e$W.x,e$W.y)},e$g._tempPoints=[],e$g._tempMatrixArrays=[],e$g._tempCmds=[],e$o(e$g,["_tempMatrix",function(){return this._tempMatrix=new e$S},"_initMatrix",function(){return this._initMatrix=new e$S}]),e$g}(),e$i=function(){function e$d(){}e$b(e$d,"laya.events.Event");var e$t=e$d.prototype;return e$t.setTo=function(e$d,e$t,e$l){return this.type=e$d,this.currentTarget=e$t,this.target=e$l,this},e$t.stopPropagation=function(){this._stoped=!0},e$Y(0,e$t,"stageY",function(){return e$q.stage.mouseY}),e$Y(0,e$t,"charCode",function(){return this.nativeEvent.charCode}),e$Y(0,e$t,"touches",function(){var e$d=this.nativeEvent.touches;if(e$d)for(var e$t=e$q.stage,e$l=0,e$k=e$d.length;e$l<e$k;e$l++){var e$W=e$d[e$l],e$i=e$L.TEMP;e$i.setTo(e$W.clientX,e$W.clientY),e$t._canvasTransform.invertTransformPoint(e$i),e$t.transform.invertTransformPoint(e$i),e$W.stageX=e$i.x,e$W.stageY=e$i.y}return e$d}),e$Y(0,e$t,"keyLocation",function(){return this.nativeEvent.keyLocation}),e$Y(0,e$t,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),e$Y(0,e$t,"altKey",function(){return this.nativeEvent.altKey}),e$Y(0,e$t,"shiftKey",function(){return this.nativeEvent.shiftKey}),e$Y(0,e$t,"stageX",function(){return e$q.stage.mouseX}),e$d.EMPTY=new e$d,e$d.MOUSE_DOWN="mousedown",e$d.MOUSE_UP="mouseup",e$d.CLICK="click",e$d.RIGHT_MOUSE_DOWN="rightmousedown",e$d.RIGHT_MOUSE_UP="rightmouseup",e$d.RIGHT_CLICK="rightclick",e$d.MOUSE_MOVE="mousemove",e$d.MOUSE_OVER="mouseover",e$d.MOUSE_OUT="mouseout",e$d.MOUSE_WHEEL="mousewheel",e$d.ROLL_OVER="mouseover",e$d.ROLL_OUT="mouseout",e$d.DOUBLE_CLICK="doubleclick",e$d.CHANGE="change",e$d.CHANGED="changed",e$d.RESIZE="resize",e$d.ADDED="added",e$d.REMOVED="removed",e$d.DISPLAY="display",e$d.UNDISPLAY="undisplay",e$d.ERROR="error",e$d.COMPLETE="complete",e$d.LOADED="loaded",e$d.INITED="inited",e$d.PROGRESS="progress",e$d.INPUT="input",e$d.RENDER="render",e$d.OPEN="open",e$d.MESSAGE="message",e$d.CLOSE="close",e$d.KEY_DOWN="keydown",e$d.KEY_PRESS="keypress",e$d.KEY_UP="keyup",e$d.FRAME="enterframe",e$d.DRAG_START="dragstart",e$d.DRAG_MOVE="dragmove",e$d.DRAG_END="dragend",e$d.ENTER="enter",e$d.SELECT="select",e$d.BLUR="blur",e$d.FOCUS="focus",e$d.VISIBILITY_CHANGE="visibilitychange",e$d.FOCUS_CHANGE="focuschange",e$d.PLAYED="played",e$d.PAUSED="paused",e$d.STOPPED="stopped",e$d.START="start",e$d.END="end",e$d.ENABLE_CHANGED="enablechanged",e$d.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",e$d.COMPONENT_ADDED="componentadded",e$d.COMPONENT_REMOVED="componentremoved",e$d.LAYER_CHANGED="layerchanged",e$d.HIERARCHY_LOADED="hierarchyloaded",e$d.RECOVERED="recovered",e$d.RELEASED="released",e$d.LINK="link",e$d.LABEL="label",e$d.FULL_SCREEN_CHANGE="fullscreenchange",e$d.DEVICE_LOST="devicelost",e$d.MESH_CHANGED="meshchanged",e$d.MATERIAL_CHANGED="materialchanged",e$d.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",e$d.ANIMATION_CHANGED="animationchanged",e$d.TRIGGER_ENTER="triggerenter",e$d.TRIGGER_STAY="triggerstay",e$d.TRIGGER_EXIT="triggerexit",e$d.TRAIL_FILTER_CHANGE="trailfilterchange",e$d.DOMINO_FILTER_CHANGE="dominofilterchange",e$d}(),e$f=(function(){function e$d(){}e$b(e$d,"laya.events.Keyboard"),e$d.NUMBER_0=48,e$d.NUMBER_1=49,e$d.NUMBER_2=50,e$d.NUMBER_3=51,e$d.NUMBER_4=52,e$d.NUMBER_5=53,e$d.NUMBER_6=54,e$d.NUMBER_7=55,e$d.NUMBER_8=56,e$d.NUMBER_9=57,e$d.A=65,e$d.B=66,e$d.C=67,e$d.D=68,e$d.E=69,e$d.F=70,e$d.G=71,e$d.H=72,e$d.I=73,e$d.J=74,e$d.K=75,e$d.L=76,e$d.M=77,e$d.N=78,e$d.O=79,e$d.P=80,e$d.Q=81,e$d.R=82,e$d.S=83,e$d.T=84,e$d.U=85,e$d.V=86,e$d.W=87,e$d.X=88,e$d.Y=89,e$d.Z=90,e$d.F1=112,e$d.F2=113,e$d.F3=114,e$d.F4=115,e$d.F5=116,e$d.F6=117,e$d.F7=118,e$d.F8=119,e$d.F9=120,e$d.F10=121,e$d.F11=122,e$d.F12=123,e$d.F13=124,e$d.F14=125,e$d.F15=126,e$d.NUMPAD=21,e$d.NUMPAD_0=96,e$d.NUMPAD_1=97,e$d.NUMPAD_2=98,e$d.NUMPAD_3=99,e$d.NUMPAD_4=100,e$d.NUMPAD_5=101,e$d.NUMPAD_6=102,e$d.NUMPAD_7=103,e$d.NUMPAD_8=104,e$d.NUMPAD_9=105,e$d.NUMPAD_ADD=107,e$d.NUMPAD_DECIMAL=110,e$d.NUMPAD_DIVIDE=111,e$d.NUMPAD_ENTER=108,e$d.NUMPAD_MULTIPLY=106,e$d.NUMPAD_SUBTRACT=109,e$d.SEMICOLON=186,e$d.EQUAL=187,e$d.COMMA=188,e$d.MINUS=189,e$d.PERIOD=190,e$d.SLASH=191,e$d.BACKQUOTE=192,e$d.LEFTBRACKET=219,e$d.BACKSLASH=220,e$d.RIGHTBRACKET=221,e$d.QUOTE=222,e$d.ALTERNATE=18,e$d.BACKSPACE=8,e$d.CAPS_LOCK=20,e$d.COMMAND=15,e$d.CONTROL=17,e$d.DELETE=46,e$d.ENTER=13,e$d.ESCAPE=27,e$d.PAGE_UP=33,e$d.PAGE_DOWN=34,e$d.END=35,e$d.HOME=36,e$d.LEFT=37,e$d.UP=38,e$d.RIGHT=39,e$d.DOWN=40,e$d.SHIFT=16,e$d.SPACE=32,e$d.TAB=9,e$d.INSERT=45}(),function(){function e$W(){}return e$b(e$W,"laya.events.KeyBoardManager"),e$W.__init__=function(){e$W._addEvent("keydown"),e$W._addEvent("keypress"),e$W._addEvent("keyup")},e$W._addEvent=function(e$t){e$V.document.addEventListener(e$t,function(e$d){laya.events.KeyBoardManager._dispatch(e$d,e$t)},!0)},e$W._dispatch=function(e$d,e$t){if(e$W.enabled){e$W._event._stoped=!1,e$W._event.nativeEvent=e$d,e$W._event.keyCode=e$d.keyCode||e$d.which||e$d.charCode,"keydown"===e$t?e$W._pressKeys[e$W._event.keyCode]=!0:"keyup"===e$t&&(e$W._pressKeys[e$W._event.keyCode]=null);for(var e$l=e$q.stage.focus&&null!=e$q.stage.focus.event&&e$q.stage.focus.displayedInStage?e$q.stage.focus:e$q.stage,e$k=e$l;e$k;)e$k.event(e$t,e$W._event.setTo(e$t,e$k,e$l)),e$k=e$k.parent}},e$W.hasKeyDown=function(e$d){return e$W._pressKeys[e$d]},e$W._pressKeys={},e$W.enabled=!0,e$o(e$W,["_event",function(){return this._event=new e$i}]),e$W}()),e$w=(function(){function e$d(){}e$b(e$d,"laya.events.KeyLocation"),e$d.STANDARD=0,e$d.LEFT=1,e$d.RIGHT=2,e$d.NUM_PAD=3}(),function(){function e$I(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=e$V.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new e$i,this._matrix=new e$S,this._point=new e$L,this._rect=new e$$,this._prePoint=new e$L,this._curTouchID=NaN}e$b(e$I,"laya.events.MouseManager");var e$d=e$I.prototype;return e$d.__init__=function(e$d,e$t){var e$l=this;this._stage=e$d;var e$k=this,e$W=this._eventList;e$t.oncontextmenu=function(e$d){if(e$I.enabled)return!1},e$t.addEventListener("mousedown",function(e$d){e$I.enabled&&(e$V.onIE||e$d.preventDefault(),e$W.push(e$d),e$k.mouseDownTime=e$V.now())}),e$t.addEventListener("mouseup",function(e$d){e$I.enabled&&(e$d.preventDefault(),e$W.push(e$d),e$k.mouseDownTime=-e$V.now())},!0),e$t.addEventListener("mousemove",function(e$d){if(e$I.enabled){e$d.preventDefault();var e$t=e$V.now();if(e$t-e$k._lastMoveTimer<10)return;e$k._lastMoveTimer=e$t,e$W.push(e$d)}},!0),e$t.addEventListener("mouseout",function(e$d){e$I.enabled&&e$W.push(e$d)}),e$t.addEventListener("mouseover",function(e$d){e$I.enabled&&e$W.push(e$d)}),e$t.addEventListener("touchstart",function(e$d){e$I.enabled&&(e$W.push(e$d),e$I._isFirstTouch||e$Rd.isInputting||e$d.preventDefault(),e$k.mouseDownTime=e$V.now())}),e$t.addEventListener("touchend",function(e$d){e$I.enabled?(e$I._isFirstTouch||e$Rd.isInputting||e$d.preventDefault(),e$I._isFirstTouch=!1,e$W.push(e$d),e$k.mouseDownTime=-e$V.now()):e$l._curTouchID=NaN},!0),e$t.addEventListener("touchmove",function(e$d){e$I.enabled&&(e$d.preventDefault(),e$W.push(e$d))},!0),e$t.addEventListener("touchcancel",function(e$d){e$I.enabled?(e$d.preventDefault(),e$W.push(e$d)):e$l._curTouchID=NaN},!0),e$t.addEventListener("mousewheel",function(e$d){e$I.enabled&&e$W.push(e$d)}),e$t.addEventListener("DOMMouseScroll",function(e$d){e$I.enabled&&e$W.push(e$d)})},e$d.initEvent=function(e$d,e$t){var e$l;this._event._stoped=!1,this._event.nativeEvent=e$t||e$d,this._target=null,this._point.setTo(e$d.pageX||e$d.clientX,e$d.pageY||e$d.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=e$d.identifier||0,this._tTouchID=this._event.touchId,(e$l=e$D.I._event)._stoped=!1,e$l.nativeEvent=this._event.nativeEvent,e$l.touchId=this._event.touchId},e$d.checkMouseWheel=function(e$d){this._event.delta=e$d.wheelDelta?.025*e$d.wheelDelta:-e$d.detail;for(var e$t=e$D.I.getLastOvers(),e$l=0,e$k=e$t.length;e$l<e$k;e$l++){var e$W=e$t[e$l];e$W.event("mousewheel",this._event.setTo("mousewheel",e$W,this._target))}},e$d.onMouseMove=function(e$d){e$D.I.onMouseMove(e$d,this._tTouchID)},e$d.onMouseDown=function(e$d){if(e$Rd.isInputting&&e$q.stage.focus&&e$q.stage.focus.focus&&!e$q.stage.focus.contains(this._target)){var e$t=e$q.stage.focus._tf||e$q.stage.focus,e$l=e$d._tf||e$d;e$l instanceof laya.display.Input&&e$l.multiline==e$t.multiline?e$t._focusOut():e$t.focus=!1}e$D.I.onMouseDown(e$d,this._tTouchID,this._isLeftMouse)},e$d.onMouseUp=function(e$d){e$D.I.onMouseUp(e$d,this._tTouchID,this._isLeftMouse)},e$d.check=function(e$d,e$t,e$l,e$k){this._point.setTo(e$t,e$l),e$d.fromParentPoint(this._point),e$t=this._point.x,e$l=this._point.y;var e$W=e$d.scrollRect;if(e$W&&(this._rect.setTo(e$W.x,e$W.y,e$W.width,e$W.height),!this._rect.contains(e$t,e$l)))return!1;if(!this.disableMouseEvent){if(e$d.hitTestPrior&&!e$d.mouseThrough&&!this.hitTest(e$d,e$t,e$l))return!1;for(var e$i=e$d._childs.length-1;-1<e$i;e$i--){var e$A=e$d._childs[e$i];if(!e$A.destroyed&&e$A.mouseEnabled&&e$A.visible&&this.check(e$A,e$t,e$l,e$k))return!0}}var e$B=!(!e$d.hitTestPrior||e$d.mouseThrough||this.disableMouseEvent)||this.hitTest(e$d,e$t,e$l);return e$B?(this._target=e$d,e$k.call(this,e$d)):e$k===this.onMouseUp&&e$d===this._stage&&(this._target=this._stage,e$k.call(this,this._target)),e$B},e$d.hitTest=function(e$d,e$t,e$l){var e$k=!1;if(e$d.scrollRect&&(e$t-=e$d.scrollRect.x,e$l-=e$d.scrollRect.y),e$d.hitArea instanceof laya.utils.HitArea)return e$d.hitArea.isHit(e$t,e$l);if(0<e$d.width&&0<e$d.height||e$d.mouseThrough||e$d.hitArea)if(e$d.mouseThrough)e$k=e$d.getGraphicBounds().contains(e$t,e$l);else{var e$W=this._rect;e$d.hitArea?e$W=e$d.hitArea:e$W.setTo(0,0,e$d.width,e$d.height),e$k=e$W.contains(e$t,e$l)}return e$k},e$d.runEvent=function(){var e$d=this._eventList.length;if(e$d){this.mouseEventTime=e$V.now();var e$t,e$l=0,e$k=0,e$W=0;try{for(;e$l<e$d;){var e$i=this._eventList[e$l];switch("mousemove"!==e$i.type&&(this._prePoint.x=this._prePoint.y=-1e6),e$i.type){case"mousedown":this._touchIDs[0]=this._id++,e$I._isTouchRespond?e$I._isTouchRespond=!1:(this._isLeftMouse=0===e$i.button,this.initEvent(e$i),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===e$i.button,this.initEvent(e$i),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-e$i.clientX)+Math.abs(this._prePoint.y-e$i.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=e$i.clientX,this._prePoint.y=e$i.clientY,this.initEvent(e$i),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":e$I._isTouchRespond=!0,this._isLeftMouse=!0;var e$A=e$i.changedTouches;for(e$k=0,e$W=e$A.length;e$k<e$W;e$k++)e$t=e$A[e$k],(e$I.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=e$t.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[e$t.identifier]=this._id++,this.initEvent(e$t,e$i),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":e$I._isTouchRespond=!0,this._isLeftMouse=!0;var e$B=e$i.changedTouches;for(e$k=0,e$W=e$B.length;e$k<e$W;e$k++)if(e$t=e$B[e$k],e$I.multiTouchEnabled||e$t.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(e$t,e$i);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var e$o=e$i.changedTouches;for(e$k=0,e$W=e$o.length;e$k<e$W;e$k++)e$t=e$o[e$k],(e$I.multiTouchEnabled||e$t.identifier==this._curTouchID)&&(this.initEvent(e$t,e$i),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(e$i);break;case"mouseout":e$D.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}e$l++}}catch(e$d){throw this._eventList.length=0,e$d}this._eventList.length=0}},e$I.enabled=!0,e$I.multiTouchEnabled=!0,e$I._isTouchRespond=!1,e$I._isFirstTouch=!0,e$o(e$I,["instance",function(){return this.instance=new e$I}]),e$I}()),e$D=function(){function e$Y(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new e$i}e$b(e$Y,"laya.events.TouchManager");var e$d=e$Y.prototype;return e$d._clearTempArrs=function(){e$Y._oldArr.length=0,e$Y._newArr.length=0,e$Y._tEleArr.length=0},e$d.getTouchFromArr=function(e$d,e$t){var e$l,e$k,e$W=0;for(e$l=e$t.length,e$W=0;e$W<e$l;e$W++)if((e$k=e$t[e$W]).id==e$d)return e$k;return null},e$d.removeTouchFromArr=function(e$d,e$t){var e$l=0;for(e$l=e$t.length-1;0<=e$l;e$l--)e$t[e$l].id==e$d&&e$t.splice(e$l,1)},e$d.createTouchO=function(e$d,e$t){var e$l;return(e$l=e$P.getItem("TouchData")||{}).id=e$t,e$l.tar=e$d,e$l},e$d.onMouseDown=function(e$d,e$t,e$l){var e$k,e$W,e$i,e$A;(void 0===e$l&&(e$l=!1),this.enable)&&(e$k=this.getTouchFromArr(e$t,this.preOvers),e$i=this.getEles(e$d,null,e$Y._tEleArr),e$k?e$k.tar=e$d:(e$W=this.createTouchO(e$d,e$t),this.preOvers.push(e$W)),e$V.onMobile&&this.sendEvents(e$i,"mouseover",e$t),e$A=e$l?this.preDowns:this.preRightDowns,(e$k=this.getTouchFromArr(e$t,e$A))?e$k.tar=e$d:(e$W=this.createTouchO(e$d,e$t),e$A.push(e$W)),this.sendEvents(e$i,e$l?"mousedown":"rightmousedown",e$t),this._clearTempArrs())},e$d.sendEvents=function(e$d,e$t,e$l){void 0===e$l&&(e$l=0);var e$k,e$W,e$i,e$A=0;for(e$k=e$d.length,this._event._stoped=!1,e$W=e$d[0],e$A=0;e$A<e$k;e$A++){if((e$i=e$d[e$A]).destroyed)return;if(e$i.event(e$t,this._event.setTo(e$t,e$i,e$W)),this._event._stoped)break}},e$d.getEles=function(e$d,e$t,e$l){for(e$l?e$l.length=0:e$l=[];e$d&&e$d!=e$t;)e$l.push(e$d),e$d=e$d.parent;return e$l},e$d.checkMouseOutAndOverOfMove=function(e$d,e$t,e$l){if(void 0===e$l&&(e$l=0),e$t!=e$d){var e$k,e$W,e$i=0,e$A=0;if(e$t.contains(e$d))e$W=this.getEles(e$d,e$t,e$Y._tEleArr),this.sendEvents(e$W,"mouseover",e$l);else if(e$d.contains(e$t))e$W=this.getEles(e$t,e$d,e$Y._tEleArr),this.sendEvents(e$W,"mouseout",e$l);else{var e$B,e$o;(e$W=e$Y._tEleArr).length=0,e$B=this.getEles(e$t,null,e$Y._oldArr),e$o=this.getEles(e$d,null,e$Y._newArr),e$A=e$B.length;var e$I=0;for(e$i=0;e$i<e$A;e$i++){if(e$k=e$B[e$i],0<=(e$I=e$o.indexOf(e$k))){e$o.splice(e$I,e$o.length-e$I);break}e$W.push(e$k)}0<e$W.length&&this.sendEvents(e$W,"mouseout",e$l),0<e$o.length&&this.sendEvents(e$o,"mouseover",e$l)}}},e$d.onMouseMove=function(e$d,e$t){var e$l,e$k;this.enable&&((e$l=this.getTouchFromArr(e$t,this.preOvers))?(this.checkMouseOutAndOverOfMove(e$d,e$l.tar),e$l.tar=e$d,e$k=this.getEles(e$d,null,e$Y._tEleArr)):(e$k=this.getEles(e$d,null,e$Y._tEleArr),this.sendEvents(e$k,"mouseover",e$t),this.preOvers.push(this.createTouchO(e$d,e$t))),this.sendEvents(e$k,"mousemove",e$t),this._clearTempArrs())},e$d.getLastOvers=function(){return(e$Y._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,e$Y._tEleArr):(e$Y._tEleArr.push(e$q.stage),e$Y._tEleArr)},e$d.stageMouseOut=function(){var e$d;e$d=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(e$d,"mouseout",0)},e$d.onMouseUp=function(e$d,e$t,e$l){if(void 0===e$l&&(e$l=!1),this.enable){var e$k,e$W,e$i,e$A,e$B,e$o,e$I=0,e$b=0,e$f=e$V.onMobile;if(e$W=this.getEles(e$d,null,e$Y._tEleArr),this.sendEvents(e$W,e$l?"mouseup":"rightmouseup",e$t),e$o=e$l?this.preDowns:this.preRightDowns,e$k=this.getTouchFromArr(e$t,e$o)){var e$J,e$c=e$V.now();if(e$J=e$c-this._lastClickTime<300,this._lastClickTime=e$c,e$d==e$k.tar)e$B=e$W;else for(e$i=this.getEles(e$k.tar,null,e$Y._oldArr),(e$B=e$Y._newArr).length=0,e$b=e$i.length,e$I=0;e$I<e$b;e$I++)e$A=e$i[e$I],0<=e$W.indexOf(e$A)&&e$B.push(e$A);0<e$B.length&&this.sendEvents(e$B,e$l?"click":"rightclick",e$t),e$l&&e$J&&this.sendEvents(e$B,"doubleclick",e$t),this.removeTouchFromArr(e$t,e$o),e$k.tar=null,e$P.recover("TouchData",e$k)}else;(e$k=this.getTouchFromArr(e$t,this.preOvers))&&e$f&&((e$B=this.getEles(e$k.tar,null,e$B))&&0<e$B.length&&this.sendEvents(e$B,"mouseout",e$t),this.removeTouchFromArr(e$t,this.preOvers),e$k.tar=null,e$P.recover("TouchData",e$k)),this._clearTempArrs()}},e$Y._oldArr=[],e$Y._newArr=[],e$Y._tEleArr=[],e$o(e$Y,["I",function(){return this.I=new e$Y}]),e$Y}(),e$z=function(){function e$d(){this._action=null}e$b(e$d,"laya.filters.Filter");var e$t=e$d.prototype;return e$q.imps(e$t,{"laya.filters.IFilter":!0}),e$t.callNative=function(e$d){},e$Y(0,e$t,"type",function(){return-1}),e$Y(0,e$t,"action",function(){return this._action}),e$d.BLUR=16,e$d.COLOR=32,e$d.GLOW=8,e$d._filterStart=null,e$d._filterEnd=null,e$d._EndTarget=null,e$d._recycleScope=null,e$d._filter=null,e$d._useSrc=null,e$d._endSrc=null,e$d._useOut=null,e$d._endOut=null,e$d}(),e$g=function(){function e$d(){this.data=null}e$b(e$d,"laya.filters.ColorFilterAction");var e$t=e$d.prototype;return e$q.imps(e$t,{"laya.filters.IFilterAction":!0}),e$t.apply=function(e$d){var e$t=e$d.ctx.ctx,e$l=e$d.ctx.ctx.canvas;if(0==e$l.width||0==e$l.height)return e$l;for(var e$k,e$W=e$t.getImageData(0,0,e$l.width,e$l.height),e$i=e$W.data,e$A=0,e$B=e$i.length;e$A<e$B;e$A+=4)e$k=this.getColor(e$i[e$A],e$i[e$A+1],e$i[e$A+2],e$i[e$A+3]),0!=e$i[e$A+3]&&(e$i[e$A]=e$k[0],e$i[e$A+1]=e$k[1],e$i[e$A+2]=e$k[2],e$i[e$A+3]=e$k[3]);return e$t.putImageData(e$W,0,0),e$d},e$t.getColor=function(e$d,e$t,e$l,e$k){var e$W=[];if(this.data._mat&&this.data._alpha){var e$i=this.data._mat,e$A=this.data._alpha;e$W[0]=e$i[0]*e$d+e$i[1]*e$t+e$i[2]*e$l+e$i[3]*e$k+e$A[0],e$W[1]=e$i[4]*e$d+e$i[5]*e$t+e$i[6]*e$l+e$i[7]*e$k+e$A[1],e$W[2]=e$i[8]*e$d+e$i[9]*e$t+e$i[10]*e$l+e$i[11]*e$k+e$A[2],e$W[3]=e$i[12]*e$d+e$i[13]*e$t+e$i[14]*e$l+e$i[15]*e$k+e$A[3]}return e$W},e$d}(),e$H=(function(){function e$d(){}e$b(e$d,"laya.maths.Arith"),e$d.formatR=function(e$d){return e$d>Math.PI&&(e$d-=2*Math.PI),e$d<-Math.PI&&(e$d+=2*Math.PI),e$d},e$d.isPOT=function(e$d,e$t){return 0<e$d&&0==(e$d&e$d-1)&&0<e$t&&0==(e$t&e$t-1)},e$d.setMatToArray=function(e$d,e$t){e$d.a,e$d.b,e$d.c,e$d.d,e$d.tx,e$d.ty,e$t[0]=e$d.a,e$t[1]=e$d.b,e$t[4]=e$d.c,e$t[5]=e$d.d,e$t[12]=e$d.tx,e$t[13]=e$d.ty}}(),function(){function e$d(){this._controlPoints=[new e$L,new e$L,new e$L],this._calFun=this.getPoint2}e$b(e$d,"laya.maths.Bezier");var e$t=e$d.prototype;return e$t._switchPoint=function(e$d,e$t){var e$l=this._controlPoints.shift();e$l.setTo(e$d,e$t),this._controlPoints.push(e$l)},e$t.getPoint2=function(e$d,e$t){var e$l=this._controlPoints[0],e$k=this._controlPoints[1],e$W=this._controlPoints[2],e$i=Math.pow(1-e$d,2)*e$l.x+2*e$d*(1-e$d)*e$k.x+Math.pow(e$d,2)*e$W.x,e$A=Math.pow(1-e$d,2)*e$l.y+2*e$d*(1-e$d)*e$k.y+Math.pow(e$d,2)*e$W.y;e$t.push(e$i,e$A)},e$t.getPoint3=function(e$d,e$t){var e$l=this._controlPoints[0],e$k=this._controlPoints[1],e$W=this._controlPoints[2],e$i=this._controlPoints[3],e$A=Math.pow(1-e$d,3)*e$l.x+3*e$k.x*e$d*(1-e$d)*(1-e$d)+3*e$W.x*e$d*e$d*(1-e$d)+e$i.x*Math.pow(e$d,3),e$B=Math.pow(1-e$d,3)*e$l.y+3*e$k.y*e$d*(1-e$d)*(1-e$d)+3*e$W.y*e$d*e$d*(1-e$d)+e$i.y*Math.pow(e$d,3);e$t.push(e$A,e$B)},e$t.insertPoints=function(e$d,e$t){var e$l,e$k=NaN;for(e$l=1/(e$d=0<e$d?e$d:5),e$k=0;e$k<=1;e$k+=e$l)this._calFun(e$k,e$t)},e$t.getBezierPoints=function(e$d,e$t,e$l){void 0===e$t&&(e$t=5),void 0===e$l&&(e$l=2);var e$k,e$W,e$i=0;if((e$k=e$d.length)<2*(e$l+1))return[];switch(e$W=[],e$l){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=e$l;)this._controlPoints.push(new e$L);for(e$i=0;e$i<2*e$l;e$i+=2)this._switchPoint(e$d[e$i],e$d[e$i+1]);for(e$i=2*e$l;e$i<e$k;e$i+=2)this._switchPoint(e$d[e$i],e$d[e$i+1]),e$i/2%e$l==0&&this.insertPoints(e$t,e$W);return e$W},e$o(e$d,["I",function(){return this.I=new e$d}]),e$d}()),e$R=function(){function e$I(){}return e$b(e$I,"laya.maths.GrahamScan"),e$I.multiply=function(e$d,e$t,e$l){return(e$d.x-e$l.x)*(e$t.y-e$l.y)-(e$t.x-e$l.x)*(e$d.y-e$l.y)},e$I.dis=function(e$d,e$t){return(e$d.x-e$t.x)*(e$d.x-e$t.x)+(e$d.y-e$t.y)*(e$d.y-e$t.y)},e$I._getPoints=function(e$d,e$t,e$l){for(void 0===e$t&&(e$t=!1),e$I._mPointList||(e$I._mPointList=[]);e$I._mPointList.length<e$d;)e$I._mPointList.push(new e$L);return e$l||(e$l=[]),e$l.length=0,e$t?e$I.getFrom(e$l,e$I._mPointList,e$d):e$I.getFromR(e$l,e$I._mPointList,e$d),e$l},e$I.getFrom=function(e$d,e$t,e$l){var e$k=0;for(e$k=0;e$k<e$l;e$k++)e$d.push(e$t[e$k]);return e$d},e$I.getFromR=function(e$d,e$t,e$l){var e$k=0;for(e$k=0;e$k<e$l;e$k++)e$d.push(e$t.pop());return e$d},e$I.pListToPointList=function(e$d,e$t){void 0===e$t&&(e$t=!1);var e$l=0,e$k=e$d.length/2,e$W=e$I._getPoints(e$k,e$t,e$I._tempPointList);for(e$l=0;e$l<e$k;e$l++)e$W[e$l].setTo(e$d[e$l+e$l],e$d[e$l+e$l+1]);return e$W},e$I.pointListToPlist=function(e$d){var e$t,e$l=0,e$k=e$d.length,e$W=e$I._temPList;for(e$l=e$W.length=0;e$l<e$k;e$l++)e$t=e$d[e$l],e$W.push(e$t.x,e$t.y);return e$W},e$I.scanPList=function(e$d){return e$F.copyArray(e$d,e$I.pointListToPlist(e$I.scan(e$I.pListToPointList(e$d,!0))))},e$I.scan=function(e$d){var e$t,e$l,e$k,e$W=0,e$i=0,e$A=0,e$B=e$d.length,e$o={};for((e$l=e$I._temArr).length=0,e$W=(e$B=e$d.length)-1;0<=e$W;e$W--)e$k=(e$t=e$d[e$W]).x+"_"+e$t.y,e$o.hasOwnProperty(e$k)||(e$o[e$k]=!0,e$l.push(e$t));for(e$B=e$l.length,e$F.copyArray(e$d,e$l),e$W=1;e$W<e$B;e$W++)(e$d[e$W].y<e$d[e$A].y||e$d[e$W].y==e$d[e$A].y&&e$d[e$W].x<e$d[e$A].x)&&(e$A=e$W);for(e$t=e$d[0],e$d[0]=e$d[e$A],e$d[e$A]=e$t,e$W=1;e$W<e$B-1;e$W++){for(e$i=(e$A=e$W)+1;e$i<e$B;e$i++)(0<e$I.multiply(e$d[e$i],e$d[e$A],e$d[0])||0==e$I.multiply(e$d[e$i],e$d[e$A],e$d[0])&&e$I.dis(e$d[0],e$d[e$i])<e$I.dis(e$d[0],e$d[e$A]))&&(e$A=e$i);e$t=e$d[e$W],e$d[e$W]=e$d[e$A],e$d[e$A]=e$t}if((e$l=e$I._temArr).length=0,e$d.length<3)return e$F.copyArray(e$l,e$d);for(e$l.push(e$d[0],e$d[1],e$d[2]),e$W=3;e$W<e$B;e$W++){for(;2<=e$l.length&&0<=e$I.multiply(e$d[e$W],e$l[e$l.length-1],e$l[e$l.length-2]);)e$l.pop();e$d[e$W]&&e$l.push(e$d[e$W])}return e$l},e$I._mPointList=null,e$I._tempPointList=[],e$I._temPList=[],e$I._temArr=[],e$I}(),e$G=function(){function e$W(){}return e$b(e$W,"laya.maths.MathUtil"),e$W.subtractVector3=function(e$d,e$t,e$l){e$l[0]=e$d[0]-e$t[0],e$l[1]=e$d[1]-e$t[1],e$l[2]=e$d[2]-e$t[2]},e$W.lerp=function(e$d,e$t,e$l){return e$d*(1-e$l)+e$t*e$l},e$W.scaleVector3=function(e$d,e$t,e$l){e$l[0]=e$d[0]*e$t,e$l[1]=e$d[1]*e$t,e$l[2]=e$d[2]*e$t},e$W.lerpVector3=function(e$d,e$t,e$l,e$k){var e$W=e$d[0],e$i=e$d[1],e$A=e$d[2];e$k[0]=e$W+e$l*(e$t[0]-e$W),e$k[1]=e$i+e$l*(e$t[1]-e$i),e$k[2]=e$A+e$l*(e$t[2]-e$A)},e$W.lerpVector4=function(e$d,e$t,e$l,e$k){var e$W=e$d[0],e$i=e$d[1],e$A=e$d[2],e$B=e$d[3];e$k[0]=e$W+e$l*(e$t[0]-e$W),e$k[1]=e$i+e$l*(e$t[1]-e$i),e$k[2]=e$A+e$l*(e$t[2]-e$A),e$k[3]=e$B+e$l*(e$t[3]-e$B)},e$W.slerpQuaternionArray=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){var e$B,e$o,e$I,e$b,e$f,e$J=e$d[e$t+0],e$c=e$d[e$t+1],e$Y=e$d[e$t+2],e$w=e$d[e$t+3],e$D=e$l[e$k+0],e$z=e$l[e$k+1],e$e=e$l[e$k+2],e$g=e$l[e$k+3];return(e$o=e$J*e$D+e$c*e$z+e$Y*e$e+e$w*e$g)<0&&(e$o=-e$o,e$D=-e$D,e$z=-e$z,e$e=-e$e,e$g=-e$g),e$f=1e-6<1-e$o?(e$B=Math.acos(e$o),e$I=Math.sin(e$B),e$b=Math.sin((1-e$W)*e$B)/e$I,Math.sin(e$W*e$B)/e$I):(e$b=1-e$W,e$W),e$i[e$A+0]=e$b*e$J+e$f*e$D,e$i[e$A+1]=e$b*e$c+e$f*e$z,e$i[e$A+2]=e$b*e$Y+e$f*e$e,e$i[e$A+3]=e$b*e$w+e$f*e$g,e$i},e$W.getRotation=function(e$d,e$t,e$l,e$k){return Math.atan2(e$k-e$t,e$l-e$d)/Math.PI*180},e$W.sortBigFirst=function(e$d,e$t){return e$d==e$t?0:e$d<e$t?1:-1},e$W.sortSmallFirst=function(e$d,e$t){return e$d==e$t?0:e$d<e$t?-1:1},e$W.sortNumBigFirst=function(e$d,e$t){return parseFloat(e$t)-parseFloat(e$d)},e$W.sortNumSmallFirst=function(e$d,e$t){return parseFloat(e$d)-parseFloat(e$t)},e$W.sortByKey=function(e$l,e$d,e$t){var e$k;return void 0===e$d&&(e$d=!1),void 0===e$t&&(e$t=!0),e$k=e$d?e$t?e$W.sortNumBigFirst:e$W.sortBigFirst:e$t?e$W.sortNumSmallFirst:e$W.sortSmallFirst,function(e$d,e$t){return e$k(e$d[e$l],e$t[e$l])}},e$W}(),e$S=function(){function e$l(e$d,e$t,e$l,e$k,e$W,e$i){this.inPool=!1,this.bTransform=!1,void 0===e$d&&(e$d=1),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=1),void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=0),this.a=e$d,this.b=e$t,this.c=e$l,this.d=e$k,this.tx=e$W,this.ty=e$i,this._checkTransform()}e$b(e$l,"laya.maths.Matrix");var e$d=e$l.prototype;return e$d.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},e$d._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},e$d.setTranslate=function(e$d,e$t){return this.tx=e$d,this.ty=e$t,this},e$d.translate=function(e$d,e$t){return this.tx+=e$d,this.ty+=e$t,this},e$d.scale=function(e$d,e$t){this.a*=e$d,this.d*=e$t,this.c*=e$d,this.b*=e$t,this.tx*=e$d,this.ty*=e$t,this.bTransform=!0},e$d.rotate=function(e$d){var e$t=Math.cos(e$d),e$l=Math.sin(e$d),e$k=this.a,e$W=this.c,e$i=this.tx;this.a=e$k*e$t-this.b*e$l,this.b=e$k*e$l+this.b*e$t,this.c=e$W*e$t-this.d*e$l,this.d=e$W*e$l+this.d*e$t,this.tx=e$i*e$t-this.ty*e$l,this.ty=e$i*e$l+this.ty*e$t,this.bTransform=!0},e$d.skew=function(e$d,e$t){var e$l=Math.tan(e$d),e$k=Math.tan(e$t),e$W=this.a,e$i=this.b;return this.a+=e$k*this.c,this.b+=e$k*this.d,this.c+=e$l*e$W,this.d+=e$l*e$i,this},e$d.invertTransformPoint=function(e$d){var e$t=this.a,e$l=this.b,e$k=this.c,e$W=this.d,e$i=this.tx,e$A=e$t*e$W-e$l*e$k,e$B=e$W/e$A,e$o=-e$l/e$A,e$I=-e$k/e$A,e$b=e$t/e$A,e$f=(e$k*this.ty-e$W*e$i)/e$A,e$J=-(e$t*this.ty-e$l*e$i)/e$A;return e$d.setTo(e$B*e$d.x+e$I*e$d.y+e$f,e$o*e$d.x+e$b*e$d.y+e$J)},e$d.transformPoint=function(e$d){return e$d.setTo(this.a*e$d.x+this.c*e$d.y+this.tx,this.b*e$d.x+this.d*e$d.y+this.ty)},e$d.transformPointN=function(e$d){return e$d.setTo(this.a*e$d.x+this.c*e$d.y,this.b*e$d.x+this.d*e$d.y)},e$d.transformPointArray=function(e$d,e$t){for(var e$l=e$d.length,e$k=0;e$k<e$l;e$k+=2){var e$W=e$d[e$k],e$i=e$d[e$k+1];e$t[e$k]=this.a*e$W+this.c*e$i+this.tx,e$t[e$k+1]=this.b*e$W+this.d*e$i+this.ty}return e$t},e$d.transformPointArrayScale=function(e$d,e$t){for(var e$l=e$d.length,e$k=0;e$k<e$l;e$k+=2){var e$W=e$d[e$k],e$i=e$d[e$k+1];e$t[e$k]=this.a*e$W+this.c*e$i,e$t[e$k+1]=this.b*e$W+this.d*e$i}return e$t},e$d.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},e$d.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},e$d.invert=function(){var e$d=this.a,e$t=this.b,e$l=this.c,e$k=this.d,e$W=this.tx,e$i=e$d*e$k-e$t*e$l;return this.a=e$k/e$i,this.b=-e$t/e$i,this.c=-e$l/e$i,this.d=e$d/e$i,this.tx=(e$l*this.ty-e$k*e$W)/e$i,this.ty=-(e$d*this.ty-e$t*e$W)/e$i,this},e$d.setTo=function(e$d,e$t,e$l,e$k,e$W,e$i){return this.a=e$d,this.b=e$t,this.c=e$l,this.d=e$k,this.tx=e$W,this.ty=e$i,this},e$d.concat=function(e$d){var e$t=this.a,e$l=this.c,e$k=this.tx;return this.a=e$t*e$d.a+this.b*e$d.c,this.b=e$t*e$d.b+this.b*e$d.d,this.c=e$l*e$d.a+this.d*e$d.c,this.d=e$l*e$d.b+this.d*e$d.d,this.tx=e$k*e$d.a+this.ty*e$d.c+e$d.tx,this.ty=e$k*e$d.b+this.ty*e$d.d+e$d.ty,this},e$d.scaleEx=function(e$d,e$t){var e$l=this.a,e$k=this.b,e$W=this.c,e$i=this.d;0!==e$k||0!==e$W?(this.a=e$d*e$l,this.b=e$d*e$k,this.c=e$t*e$W):(this.a=e$d*e$l,this.b=0*e$i,this.c=0*e$l),this.d=e$t*e$i,this.bTransform=!0},e$d.rotateEx=function(e$d){var e$t=Math.cos(e$d),e$l=Math.sin(e$d),e$k=this.a,e$W=this.b,e$i=this.c,e$A=this.d;0!==e$W||0!==e$i?(this.a=e$t*e$k+e$l*e$i,this.b=e$t*e$W+e$l*e$A,this.c=-e$l*e$k+e$t*e$i,this.d=-e$l*e$W+e$t*e$A):(this.a=e$t*e$k,this.b=e$l*e$A,this.c=-e$l*e$k,this.d=e$t*e$A),this.bTransform=!0},e$d.clone=function(){var e$d=e$l.create();return e$d.a=this.a,e$d.b=this.b,e$d.c=this.c,e$d.d=this.d,e$d.tx=this.tx,e$d.ty=this.ty,e$d.bTransform=this.bTransform,e$d},e$d.copyTo=function(e$d){return e$d.a=this.a,e$d.b=this.b,e$d.c=this.c,e$d.d=this.d,e$d.tx=this.tx,e$d.ty=this.ty,e$d.bTransform=this.bTransform,e$d},e$d.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},e$d.destroy=function(){if(!this.inPool){var e$d=e$l._cache;this.inPool=!0,e$d._length||(e$d._length=0),(e$d[e$d._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},e$l.mul=function(e$d,e$t,e$l){var e$k=e$d.a,e$W=e$d.b,e$i=e$d.c,e$A=e$d.d,e$B=e$d.tx,e$o=e$d.ty,e$I=e$t.a,e$b=e$t.b,e$f=e$t.c,e$J=e$t.d,e$c=e$t.tx,e$Y=e$t.ty;return 0!==e$b||0!==e$f?(e$l.a=e$k*e$I+e$W*e$f,e$l.b=e$k*e$b+e$W*e$J,e$l.c=e$i*e$I+e$A*e$f,e$l.d=e$i*e$b+e$A*e$J,e$l.tx=e$I*e$B+e$f*e$o+e$c,e$l.ty=e$b*e$B+e$J*e$o+e$Y):(e$l.a=e$k*e$I,e$l.b=e$W*e$J,e$l.c=e$i*e$I,e$l.d=e$A*e$J,e$l.tx=e$I*e$B+e$c,e$l.ty=e$J*e$o+e$Y),e$l},e$l.mul16=function(e$d,e$t,e$l){var e$k=e$d.a,e$W=e$d.b,e$i=e$d.c,e$A=e$d.d,e$B=e$d.tx,e$o=e$d.ty,e$I=e$t.a,e$b=e$t.b,e$f=e$t.c,e$J=e$t.d,e$c=e$t.tx,e$Y=e$t.ty;return 0!==e$b||0!==e$f?(e$l[0]=e$k*e$I+e$W*e$f,e$l[1]=e$k*e$b+e$W*e$J,e$l[4]=e$i*e$I+e$A*e$f,e$l[5]=e$i*e$b+e$A*e$J,e$l[12]=e$I*e$B+e$f*e$o+e$c,e$l[13]=e$b*e$B+e$J*e$o+e$Y):(e$l[0]=e$k*e$I,e$l[1]=e$W*e$J,e$l[4]=e$i*e$I,e$l[5]=e$A*e$J,e$l[12]=e$I*e$B+e$c,e$l[13]=e$J*e$o+e$Y),e$l},e$l.mulPre=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){var e$o=e$d.a,e$I=e$d.b,e$b=e$d.c,e$f=e$d.d,e$J=e$d.tx,e$c=e$d.ty;return 0!==e$l||0!==e$k?(e$B.a=e$o*e$t+e$I*e$k,e$B.b=e$o*e$l+e$I*e$W,e$B.c=e$b*e$t+e$f*e$k,e$B.d=e$b*e$l+e$f*e$W,e$B.tx=e$t*e$J+e$k*e$c+e$i,e$B.ty=e$l*e$J+e$W*e$c+e$A):(e$B.a=e$o*e$t,e$B.b=e$I*e$W,e$B.c=e$b*e$t,e$B.d=e$f*e$W,e$B.tx=e$t*e$J+e$i,e$B.ty=e$W*e$c+e$A),e$B},e$l.mulPos=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){var e$o=e$d.a,e$I=e$d.b,e$b=e$d.c,e$f=e$d.d,e$J=e$d.tx,e$c=e$d.ty;return 0!==e$I||0!==e$b?(e$B.a=e$t*e$o+e$l*e$b,e$B.b=e$t*e$I+e$l*e$f,e$B.c=e$k*e$o+e$W*e$b,e$B.d=e$k*e$I+e$W*e$f,e$B.tx=e$o*e$i+e$b*e$A+e$J,e$B.ty=e$I*e$i+e$f*e$A+e$c):(e$B.a=e$t*e$o,e$B.b=e$l*e$f,e$B.c=e$k*e$o,e$B.d=e$W*e$f,e$B.tx=e$o*e$i+e$J,e$B.ty=e$f*e$A+e$c),e$B},e$l.preMul=function(e$d,e$t,e$l){var e$k=e$d.a,e$W=e$d.b,e$i=e$d.c,e$A=e$d.d,e$B=e$t.a,e$o=e$t.b,e$I=e$t.c,e$b=e$t.d,e$f=e$t.tx,e$J=e$t.ty;return e$l.a=e$B*e$k,e$l.b=e$l.c=0,e$l.d=e$b*e$A,e$l.tx=e$f*e$k+e$d.tx,e$l.ty=e$J*e$A+e$d.ty,0===e$o&&0===e$I&&0===e$W&&0===e$i||(e$l.a+=e$o*e$i,e$l.d+=e$I*e$W,e$l.b+=e$B*e$W+e$o*e$A,e$l.c+=e$I*e$k+e$b*e$i,e$l.tx+=e$J*e$i,e$l.ty+=e$f*e$W),e$l},e$l.preMulXY=function(e$d,e$t,e$l,e$k){var e$W=e$d.a,e$i=e$d.b,e$A=e$d.c,e$B=e$d.d;return e$k.a=e$W,e$k.b=e$i,e$k.c=e$A,e$k.d=e$B,e$k.tx=e$t*e$W+e$d.tx+e$l*e$A,e$k.ty=e$l*e$B+e$d.ty+e$t*e$i,e$k},e$l.create=function(){var e$d=e$l._cache,e$t=e$d._length?e$d[--e$d._length]:new e$l;return e$t.inPool=!1,e$t},e$l.EMPTY=new e$l,e$l.TEMP=new e$l,e$l._cache=[],e$l}(),e$L=function(){function e$d(e$d,e$t){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),this.x=e$d,this.y=e$t}e$b(e$d,"laya.maths.Point");var e$t=e$d.prototype;return e$t.setTo=function(e$d,e$t){return this.x=e$d,this.y=e$t,this},e$t.distance=function(e$d,e$t){return Math.sqrt((this.x-e$d)*(this.x-e$d)+(this.y-e$t)*(this.y-e$t))},e$t.toString=function(){return this.x+","+this.y},e$t.normalize=function(){var e$d=Math.sqrt(this.x*this.x+this.y*this.y);if(0<e$d){var e$t=1/e$d;this.x*=e$t,this.y*=e$t}},e$d.TEMP=new e$d,e$d.EMPTY=new e$d,e$d}(),e$$=function(){function e$I(e$d,e$t,e$l,e$k){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0),this.x=e$d,this.y=e$t,this.width=e$l,this.height=e$k}e$b(e$I,"laya.maths.Rectangle");var e$d=e$I.prototype;return e$d.setTo=function(e$d,e$t,e$l,e$k){return this.x=e$d,this.y=e$t,this.width=e$l,this.height=e$k,this},e$d.copyFrom=function(e$d){return this.x=e$d.x,this.y=e$d.y,this.width=e$d.width,this.height=e$d.height,this},e$d.contains=function(e$d,e$t){return!(this.width<=0||this.height<=0)&&(e$d>=this.x&&e$d<this.right&&e$t>=this.y&&e$t<this.bottom)},e$d.intersects=function(e$d){return!(e$d.x>this.x+this.width||e$d.x+e$d.width<this.x||e$d.y>this.y+this.height||e$d.y+e$d.height<this.y)},e$d.intersection=function(e$d,e$t){return this.intersects(e$d)?(e$t||(e$t=new e$I),e$t.x=Math.max(this.x,e$d.x),e$t.y=Math.max(this.y,e$d.y),e$t.width=Math.min(this.right,e$d.right)-e$t.x,e$t.height=Math.min(this.bottom,e$d.bottom)-e$t.y,e$t):null},e$d.union=function(e$d,e$t){return e$t||(e$t=new e$I),this.clone(e$t),e$d.width<=0||e$d.height<=0?e$t:(e$t.addPoint(e$d.x,e$d.y),e$t.addPoint(e$d.right,e$d.bottom),this)},e$d.clone=function(e$d){return e$d||(e$d=new e$I),e$d.x=this.x,e$d.y=this.y,e$d.width=this.width,e$d.height=this.height,e$d},e$d.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},e$d.equals=function(e$d){return!(!e$d||e$d.x!==this.x||e$d.y!==this.y||e$d.width!==this.width||e$d.height!==this.height)},e$d.addPoint=function(e$d,e$t){return this.x>e$d&&(this.width+=this.x-e$d,this.x=e$d),this.y>e$t&&(this.height+=this.y-e$t,this.y=e$t),this.width<e$d-this.x&&(this.width=e$d-this.x),this.height<e$t-this.y&&(this.height=e$t-this.y),this},e$d._getBoundPoints=function(){var e$d=e$I._temB;return(e$d.length=0)==this.width||0==this.height||e$d.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),e$d},e$d.isEmpty=function(){return this.width<=0||this.height<=0},e$Y(0,e$d,"right",function(){return this.x+this.width}),e$Y(0,e$d,"bottom",function(){return this.y+this.height}),e$I._getBoundPointS=function(e$d,e$t,e$l,e$k){var e$W=e$I._temA;return(e$W.length=0)==e$l||0==e$k||e$W.push(e$d,e$t,e$d+e$l,e$t,e$d,e$t+e$k,e$d+e$l,e$t+e$k),e$W},e$I._getWrapRec=function(e$d,e$t){if(!e$d||e$d.length<1)return e$t?e$t.setTo(0,0,0,0):e$I.TEMP.setTo(0,0,0,0);e$t=e$t||new e$I;var e$l,e$k,e$W,e$i,e$A,e$B=e$d.length,e$o=e$L.TEMP;for(e$W=e$A=-(e$k=e$i=99999),e$l=0;e$l<e$B;e$l+=2)e$o.x=e$d[e$l],e$o.y=e$d[e$l+1],e$k=e$k<e$o.x?e$k:e$o.x,e$i=e$i<e$o.y?e$i:e$o.y,e$W=e$W>e$o.x?e$W:e$o.x,e$A=e$A>e$o.y?e$A:e$o.y;return e$t.setTo(e$k,e$i,e$W-e$k,e$A-e$i)},e$I.EMPTY=new e$I,e$I.TEMP=new e$I,e$I._temB=[],e$I._temA=[],e$I}(),e$T=function(){function e$o(){}return e$b(e$o,"laya.media.SoundManager"),e$Y(1,e$o,"useAudioMusic",function(){return e$o._useAudioMusic},function(e$d){e$o._useAudioMusic=e$d,e$o._musicClass=e$d?e$ld:null}),e$Y(1,e$o,"autoStopMusic",function(){return e$o._autoStopMusic},function(e$d){e$q.stage.off("blur",null,e$o._stageOnBlur),e$q.stage.off("focus",null,e$o._stageOnFocus),e$q.stage.off("visibilitychange",null,e$o._visibilityChange),(e$o._autoStopMusic=e$d)&&(e$q.stage.on("blur",null,e$o._stageOnBlur),e$q.stage.on("focus",null,e$o._stageOnFocus),e$q.stage.on("visibilitychange",null,e$o._visibilityChange))}),e$Y(1,e$o,"muted",function(){return e$o._muted},function(e$d){e$d!=e$o._muted&&(e$d&&e$o.stopAllSound(),e$o.musicMuted=e$d,e$o._muted=e$d)}),e$Y(1,e$o,"musicMuted",function(){return e$o._musicMuted},function(e$d){e$d!=e$o._musicMuted&&(e$d?(e$o._tMusic&&e$o._musicChannel&&!e$o._musicChannel.isStopped?e$o._musicChannel.pause():e$o._musicChannel=null,e$o._musicMuted=e$d):(e$o._musicMuted=e$d,e$o._tMusic&&e$o._musicChannel&&e$o._musicChannel.resume()))}),e$Y(1,e$o,"soundMuted",function(){return e$o._soundMuted},function(e$d){e$o._soundMuted=e$d}),e$o.addChannel=function(e$d){0<=e$o._channels.indexOf(e$d)||(e$o._channels.push(e$d),e$o.autoReleaseSound&&0!=e$o._notUsedCount&&e$o._notUsedUrls[e$d.url]&&(delete e$o._notUsedUrls[e$d.url],0==--e$o._notUsedCount&&e$q.timer.clear(e$o,e$o.disposeSoundIfNotUsed)))},e$o.removeChannel=function(e$d){var e$t=e$o._channels,e$l=e$t.indexOf(e$d);if(-1!=e$l&&(e$t.splice(e$l,1),e$o.autoReleaseSound)){var e$k=e$d.url,e$W=e$o.defaultIntervals[e$k]||2e4;if(0<e$W){var e$i=!0;for(e$l=e$t.length-1;0<=e$l;e$l--)if(e$t[e$l].url==e$k){e$i=!1;break}e$i&&(e$o._notUsedUrls[e$k]=Date.now()+e$W,0==e$o._notUsedCount++&&e$q.timer.loop(1e4,e$o,e$o.disposeSoundIfNotUsed))}}},e$o.disposeSoundIfNotUsed=function(){var e$d=e$o._notUsedUrls;if(0!=e$o._notUsedCount){var e$t=Date.now();for(var e$l in e$d)e$t>=e$d[e$l]&&(delete e$d[e$l],--e$o._notUsedCount,e$o.destroySound(e$l));if(0!=e$o._notUsedCount)return}e$q.timer.clear(e$o,e$o.disposeSoundIfNotUsed)},e$o._visibilityChange=function(){e$q.stage.isVisibility?e$o._stageOnFocus():e$o._stageOnBlur()},e$o._stageOnBlur=function(){e$o._isActive=!1,e$o._musicChannel&&(e$o._musicChannel.isStopped||(e$o._blurPaused=!0,e$o._musicChannel.pause())),e$o.stopAllSound(),e$q.stage.once("mousedown",null,e$o._stageOnFocus)},e$o._recoverWebAudio=function(){e$id.ctx&&"running"!=e$id.ctx.state&&e$id.ctx.resume&&e$id.ctx.resume()},e$o._stageOnFocus=function(){if(e$o._isActive=!0,e$o._recoverWebAudio(),e$q.stage.off("mousedown",null,e$o._stageOnFocus),e$o._blurPaused){var e$d=e$o._musicChannel;e$d&&e$o._music&&e$d.isStopped&&(e$o._blurPaused=!1,e$o._music._disposed?e$o.playMusic(e$d.url,e$d.loops,e$d.startHandler,e$d.completeHandler,e$d.startTime):e$d.audioBuffer?e$d.resume():e$o._music.play(e$d.startTime,e$d.loops,e$d.startHandler,e$d))}},e$o.playSound=function(e$d,e$t,e$l,e$k,e$W,e$i){if(void 0===e$t&&(e$t=1),void 0===e$i&&(e$i=0),!e$d)return null;if(e$o._muted)return null;if(e$o._recoverWebAudio(),e$d==e$o._tMusic){if(e$o._musicMuted)return null}else{if(!e$o._isActive)return null;if(e$o._soundMuted)return null}var e$A,e$B=e$o._pool[e$d];return e$W||(e$W=e$o._soundClass),e$B||((e$B=new e$W).load(e$d),e$o._pool[e$d]=e$B),(e$A=e$B.play(e$i,e$t,e$l))?(e$d==e$o._tMusic&&(e$o._music=e$B,e$o._isActive||(e$o._blurPaused=!0,e$A.pause())),e$A.url=e$d,e$A.volume=e$d==e$o._tMusic?e$o.musicVolume:e$o.soundVolume,e$A.completeHandler=e$k,e$A):null},e$o.destroySound=function(e$d){var e$t=e$o._pool[e$d];e$t&&(delete e$o._pool[e$d],e$t.dispose())},e$o.playMusic=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$t&&(e$t=0),void 0===e$W&&(e$W=0),e$o._tMusic=e$d,e$o._musicChannel&&e$o._musicChannel.stop(),e$o._musicChannel=e$o.playSound(e$d,e$t,e$l,e$k,null,e$W)},e$o.stopSound=function(e$d){for(var e$t,e$l=e$o._channels.length-1;0<=e$l;e$l--)(e$t=e$o._channels[e$l]).url==e$d&&e$t.stop()},e$o.stopAll=function(){e$o._tMusic=null;var e$d=0;for(e$d=e$o._channels.length-1;0<=e$d;e$d--)e$o._channels[e$d].stop()},e$o.stopAllSound=function(){var e$d,e$t=0;for(e$t=e$o._channels.length-1;0<=e$t;e$t--)(e$d=e$o._channels[e$t]).url!=e$o._tMusic&&e$d.stop()},e$o.stopMusic=function(){e$o._musicChannel&&e$o._musicChannel.stop(),e$o._tMusic=null},e$o.setSoundVolume=function(e$d,e$t){if(e$t)e$o._setVolume(e$t,e$d);else{e$o.soundVolume=e$d;var e$l,e$k=0;for(e$k=e$o._channels.length-1;0<=e$k;e$k--)(e$l=e$o._channels[e$k]).url!=e$o._tMusic&&(e$l.volume=e$d)}},e$o.setMusicVolume=function(e$d){e$o.musicVolume=e$d,e$o._setVolume(e$o._tMusic,e$d)},e$o._setVolume=function(e$d,e$t){for(var e$l,e$k=e$o._channels.length-1;0<=e$k;e$k--)(e$l=e$o._channels[e$k]).url==e$d&&(e$l.volume=e$t)},e$o.musicVolume=1,e$o.soundVolume=1,e$o.playbackRate=1,e$o._useAudioMusic=!0,e$o._muted=!1,e$o._soundMuted=!1,e$o._musicMuted=!1,e$o._tMusic=null,e$o._musicChannel=null,e$o._music=null,e$o._channels=[],e$o._autoStopMusic=!1,e$o._blurPaused=!1,e$o._isActive=!0,e$o._soundClass=null,e$o._musicClass=null,e$o.autoReleaseSound=!0,e$o._pool={},e$o.defaultIntervals={},e$o._notUsedUrls={},e$o._notUsedCount=0,e$o}(),e$p=function(){var e$d;function e$l(){}return e$b(e$l,"laya.net.LocalStorage"),e$l.__init__=function(){e$l._baseClass||(e$l._baseClass=e$d).init(),e$l.items=e$l._baseClass.items,e$l.support=e$l._baseClass.support},e$l.setItem=function(e$d,e$t){e$l._baseClass.setItem(e$d,e$t)},e$l.getItem=function(e$d){return e$l._baseClass.getItem(e$d)},e$l.setJSON=function(e$d,e$t){e$l._baseClass.setJSON(e$d,e$t)},e$l.getJSON=function(e$d){return e$l._baseClass.getJSON(e$d)},e$l.removeItem=function(e$d){e$l._baseClass.removeItem(e$d)},e$l.clear=function(){e$l._baseClass.clear()},e$l._baseClass=null,e$l.items=null,e$l.support=!1,e$l.__init$=function(){e$d=function(){function e$l(){}return e$b(e$l,""),e$l.init=function(){try{e$l.support=!0,e$l.items=e$A.localStorage,e$l.setItem("laya","1"),e$l.removeItem("laya")}catch(e$d){e$l.support=!1}e$l.support||console.log("LocalStorage is not supprot or browser is private mode.")},e$l.setItem=function(e$d,e$t){try{e$l.support&&e$l.items.setItem(e$d,e$t)}catch(e$d){console.warn("set localStorage failed",e$d)}},e$l.getItem=function(e$d){return e$l.support?e$l.items.getItem(e$d):null},e$l.setJSON=function(e$d,e$t){try{e$l.support&&e$l.items.setItem(e$d,JSON.stringify(e$t))}catch(e$d){console.warn("set localStorage failed",e$d)}},e$l.getJSON=function(e$d){return JSON.parse(e$l.support?e$l.items.getItem(e$d):null)},e$l.removeItem=function(e$d){e$l.support&&e$l.items.removeItem(e$d)},e$l.clear=function(){e$l.support&&e$l.items.clear()},e$l.items=null,e$l.support=!1,e$l}()},e$l}(),e$j=(function(){function e$k(){}e$b(e$k,"laya.net.ResourceVersion"),e$k.enable=function(e$d,e$t,e$l){void 0===e$l&&(e$l=2),laya.net.ResourceVersion.type=e$l,e$q.loader.load(e$d,e$e.create(null,e$k.onManifestLoaded,[e$t]),null,"json"),e$C.customFormat=e$k.addVersionPrefix},e$k.onManifestLoaded=function(e$d,e$t){e$k.manifest=e$t,e$d.run(),e$t||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},e$k.addVersionPrefix=function(e$d){return e$k.manifest&&e$k.manifest[e$d]?2==e$k.type?e$k.manifest[e$d]:e$k.manifest[e$d]+"/"+e$d:e$d},e$k.FOLDER_VERSION=1,e$k.FILENAME_VERSION=2,e$k.manifest=null,e$k.type=1}(),function(){function e$d(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}e$b(e$d,"laya.net.TTFLoader");var e$t=e$d.prototype;return e$t.load=function(e$d){var e$t=(this._url=e$d).split(".ttf")[0].split("/");this.fontName=e$t[e$t.length-1],e$V.window.conch?this._loadConch():e$V.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},e$t._loadConch=function(){this._http=new e$Ad,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},e$t._onHttpLoaded=function(e$d){e$V.window.conch.setFontFaceFromBuffer(this.fontName,e$d),this._clearHttp(),this._complete()},e$t._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},e$t._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},e$t._complete=function(){e$q.timer.clear(this,this._complete),e$q.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},e$t._checkComplete=function(){e$r.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},e$t._loadWithFontFace=function(){var e$d=new e$V.window.FontFace(this.fontName,"url('"+this._url+"')");e$V.window.document.fonts.add(e$d);var e$t=this;e$d.loaded.then(function(){e$t._complete()}),e$d.load()},e$t._createDiv=function(){this._div=e$V.createElement("div"),this._div.innerHTML="laya";var e$d=this._div.style;e$d.fontFamily=this.fontName,e$d.position="absolute",e$d.left="-100px",e$d.top="-100px",e$V.document.body.appendChild(this._div)},e$t._loadWithCSS=function(){var e$d=this,e$t=e$V.createElement("style");e$t.type="text/css",e$V.document.body.appendChild(e$t),e$t.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=e$r.measureText("LayaTTFFont",this._fontTxt).width;var e$l=this;e$t.onload=function(){e$q.timer.once(1e4,e$l,e$d._complete)},e$q.timer.loop(20,this,this._checkComplete),this._createDiv()},e$d._testString="LayaTTFFont",e$d}()),e$C=function(){function e$k(e$d){this._url=null,this._path=null,this._url=e$k.formatURL(e$d),this._path=e$k.getPath(e$d)}e$b(e$k,"laya.net.URL");var e$d=e$k.prototype;return e$Y(0,e$d,"path",function(){return this._path}),e$Y(0,e$d,"url",function(){return this._url}),e$k.formatURL=function(e$d,e$t){if(!e$d)return"null path";if(0<e$d.indexOf(":"))return e$d;null!=e$k.customFormat&&(e$d=e$k.customFormat(e$d,e$t));var e$l=e$d.charAt(0);if("."===e$l)return e$k.formatRelativePath((e$t||e$k.basePath)+e$d);if("~"===e$l)return e$k.rootPath+e$d.substring(1);if("d"===e$l){if(0===e$d.indexOf("data:image"))return e$d}else if("/"===e$l)return e$d;return(e$t||e$k.basePath)+e$d},e$k.formatRelativePath=function(e$d){for(var e$t=e$d.split("/"),e$l=0,e$k=e$t.length;e$l<e$k;e$l++)".."==e$t[e$l]&&(e$t.splice(e$l-1,2),e$l-=2);return e$t.join("/")},e$k.isAbsolute=function(e$d){return 0<e$d.indexOf(":")||"/"==e$d.charAt(0)},e$k.getPath=function(e$d){var e$t=e$d.lastIndexOf("/");return 0<e$t?e$d.substr(0,e$t+1):""},e$k.getFileName=function(e$d){var e$t=e$d.lastIndexOf("/");return 0<e$t?e$d.substr(e$t+1):e$d},e$k.version={},e$k.basePath="",e$k.rootPath="",e$k.customFormat=function(e$d){var e$t=e$k.version[e$d];return!e$K.isConchApp&&e$t&&(e$d+="?v="+e$t),e$d},e$k}(),e$K=function(){function e$W(e$d,e$t){this._timeId=0;var e$l=e$W._mainCanvas.source.style;e$l.position="absolute",e$l.top=e$l.left="0px",e$l.background="#000000",e$W._mainCanvas.source.id="layaCanvas";var e$k=laya.renders.Render.isWebGL;e$W._mainCanvas.source.width=e$d,e$W._mainCanvas.source.height=e$t,e$k&&e$W.WebGL.init(e$W._mainCanvas,e$d,e$t),e$V.container.appendChild(e$W._mainCanvas.source),(e$W._context=new e$x(e$d,e$t,e$k?null:e$W._mainCanvas)).ctx.setIsMainContext(),e$V.window.requestAnimationFrame(function e$d(e$t){e$V.window.requestAnimationFrame(e$d);e$q.stage._loop()}),e$q.stage.on("visibilitychange",this,this._onVisibilitychange)}e$b(e$W,"laya.renders.Render");var e$d=e$W.prototype;return e$d._onVisibilitychange=function(){e$q.stage.isVisibility?0!=this._timeId&&e$V.window.clearInterval(this._timeId):this._timeId=e$V.window.setInterval(this._enterFrame,1e3)},e$d._enterFrame=function(e$d){e$q.stage._loop()},e$Y(1,e$W,"context",function(){return e$W._context}),e$Y(1,e$W,"canvas",function(){return e$W._mainCanvas.source}),e$W._context=null,e$W._mainCanvas=null,e$W.WebGL=null,e$W.isConchNode=!1,e$W.isConchApp=!1,e$W.isConchWebGL=!1,e$W.isWebGL=!1,e$W.is3DMode=!1,e$W.optimizeTextureMemory=function(e$d,e$t){return!0},e$W.__init$=function(){e$A.ConchRenderType=e$A.ConchRenderType||1,e$A.ConchRenderType|=e$A.conch?4:0,e$W.isConchNode=5==(5&e$A.ConchRenderType),e$W.isConchApp=4==(4&e$A.ConchRenderType),e$W.isConchWebGL=6==e$A.ConchRenderType},e$W}(),e$x=function(){function e$A(e$d,e$t,e$l){this.x=0,this.y=0,this._drawTexture=function(e$d,e$t,e$l){e$l[0].loaded&&this.ctx.drawTexture(e$l[0],e$l[1],e$l[2],e$l[3],e$l[4],e$d,e$t)},this._fillTexture=function(e$d,e$t,e$l){e$l[0].loaded&&this.ctx.fillTexture(e$l[0],e$l[1]+e$d,e$l[2]+e$t,e$l[3],e$l[4],e$l[5],e$l[6],e$l[7])},this._drawTextureWithTransform=function(e$d,e$t,e$l){e$l[0].loaded&&this.ctx.drawTextureWithTransform(e$l[0],e$l[1],e$l[2],e$l[3],e$l[4],e$l[5],e$d,e$t,e$l[6])},this._fillQuadrangle=function(e$d,e$t,e$l){this.ctx.fillQuadrangle(e$l[0],e$l[1],e$l[2],e$l[3],e$l[4])},this._drawRect=function(e$d,e$t,e$l){var e$k=this.ctx;null!=e$l[4]&&(e$k.fillStyle=e$l[4],e$k.fillRect(e$d+e$l[0],e$t+e$l[1],e$l[2],e$l[3],null)),null!=e$l[5]&&(e$k.strokeStyle=e$l[5],e$k.lineWidth=e$l[6],e$k.strokeRect(e$d+e$l[0],e$t+e$l[1],e$l[2],e$l[3],e$l[6]))},this._drawPie=function(e$d,e$t,e$l){var e$k=this.ctx;e$K.isWebGL&&e$k.setPathId(e$l[8]),e$k.beginPath(),e$K.isWebGL?(e$k.movePath(e$l[0]+e$d,e$l[1]+e$t),e$k.moveTo(0,0)):e$k.moveTo(e$d+e$l[0],e$t+e$l[1]),e$k.arc(e$d+e$l[0],e$t+e$l[1],e$l[2],e$l[3],e$l[4]),e$k.closePath(),this._fillAndStroke(e$l[5],e$l[6],e$l[7],!0)},this._clipRect=function(e$d,e$t,e$l){this.ctx.clipRect(e$d+e$l[0],e$t+e$l[1],e$l[2],e$l[3])},this._fillRect=function(e$d,e$t,e$l){this.ctx.fillRect(e$d+e$l[0],e$t+e$l[1],e$l[2],e$l[3],e$l[4])},this._drawCircle=function(e$d,e$t,e$l){var e$k=this.ctx;e$K.isWebGL&&e$k.setPathId(e$l[6]),e$X.drawCall++,e$k.beginPath(),e$K.isWebGL&&e$k.movePath(e$l[0]+e$d,e$l[1]+e$t),e$k.arc(e$l[0]+e$d,e$l[1]+e$t,e$l[2],0,e$A.PI2),e$k.closePath(),this._fillAndStroke(e$l[3],e$l[4],e$l[5],!0)},this._fillCircle=function(e$d,e$t,e$l){e$X.drawCall++;var e$k=this.ctx;e$k.beginPath(),e$k.fillStyle=e$l[3],e$k.arc(e$l[0]+e$d,e$l[1]+e$t,e$l[2],0,e$A.PI2),e$k.fill()},this._setShader=function(e$d,e$t,e$l){this.ctx.setShader(e$l[0])},this._drawLine=function(e$d,e$t,e$l){var e$k=this.ctx;e$K.isWebGL&&e$k.setPathId(e$l[6]),e$k.beginPath(),e$k.strokeStyle=e$l[4],e$k.lineWidth=e$l[5],e$K.isWebGL?(e$k.movePath(e$d,e$t),e$k.moveTo(e$l[0],e$l[1]),e$k.lineTo(e$l[2],e$l[3])):(e$k.moveTo(e$d+e$l[0],e$t+e$l[1]),e$k.lineTo(e$d+e$l[2],e$t+e$l[3])),e$k.stroke()},this._drawLines=function(e$d,e$t,e$l){var e$k=this.ctx;e$K.isWebGL&&e$k.setPathId(e$l[5]),e$k.beginPath(),e$d+=e$l[0],e$t+=e$l[1],e$K.isWebGL&&e$k.movePath(e$d,e$t),e$k.strokeStyle=e$l[3],e$k.lineWidth=e$l[4];var e$W=e$l[2],e$i=2,e$A=e$W.length;if(e$K.isWebGL)for(e$k.moveTo(e$W[0],e$W[1]);e$i<e$A;)e$k.lineTo(e$W[e$i++],e$W[e$i++]);else for(e$k.moveTo(e$d+e$W[0],e$t+e$W[1]);e$i<e$A;)e$k.lineTo(e$d+e$W[e$i++],e$t+e$W[e$i++]);e$k.stroke()},this._drawLinesWebGL=function(e$d,e$t,e$l){this.ctx.drawLines(e$d+this.x+e$l[0],e$t+this.y+e$l[1],e$l[2],e$l[3],e$l[4])},this._drawCurves=function(e$d,e$t,e$l){this.ctx.drawCurves(e$d,e$t,e$l)},this._draw=function(e$d,e$t,e$l){e$l[0].call(null,this,e$d,e$t)},this._transformByMatrix=function(e$d,e$t,e$l){this.ctx.transformByMatrix(e$l[0])},this._setTransform=function(e$d,e$t,e$l){this.ctx.setTransform(e$l[0],e$l[1],e$l[2],e$l[3],e$l[4],e$l[5])},this._setTransformByMatrix=function(e$d,e$t,e$l){this.ctx.setTransformByMatrix(e$l[0])},this._save=function(e$d,e$t,e$l){this.ctx.save()},this._restore=function(e$d,e$t,e$l){this.ctx.restore()},this._translate=function(e$d,e$t,e$l){this.ctx.translate(e$l[0],e$l[1])},this._transform=function(e$d,e$t,e$l){this.ctx.translate(e$l[1]+e$d,e$l[2]+e$t);var e$k=e$l[0];this.ctx.transform(e$k.a,e$k.b,e$k.c,e$k.d,e$k.tx,e$k.ty),this.ctx.translate(-e$d-e$l[1],-e$t-e$l[2])},this._rotate=function(e$d,e$t,e$l){this.ctx.translate(e$l[1]+e$d,e$l[2]+e$t),this.ctx.rotate(e$l[0]),this.ctx.translate(-e$d-e$l[1],-e$t-e$l[2])},this._scale=function(e$d,e$t,e$l){this.ctx.translate(e$l[2]+e$d,e$l[3]+e$t),this.ctx.scale(e$l[0],e$l[1]),this.ctx.translate(-e$d-e$l[2],-e$t-e$l[3])},this._alpha=function(e$d,e$t,e$l){this.ctx.globalAlpha*=e$l[0]},this._setAlpha=function(e$d,e$t,e$l){this.ctx.globalAlpha=e$l[0]},this._fillText=function(e$d,e$t,e$l){this.ctx.fillText(e$l[0],e$l[1]+e$d,e$l[2]+e$t,e$l[3],e$l[4],e$l[5])},this._strokeText=function(e$d,e$t,e$l){this.ctx.strokeText(e$l[0],e$l[1]+e$d,e$l[2]+e$t,e$l[3],e$l[4],e$l[5],e$l[6])},this._fillBorderText=function(e$d,e$t,e$l){this.ctx.fillBorderText(e$l[0],e$l[1]+e$d,e$l[2]+e$t,e$l[3],e$l[4],e$l[5],e$l[6],e$l[7])},this._blendMode=function(e$d,e$t,e$l){this.ctx.globalCompositeOperation=e$l[0]},this._beginClip=function(e$d,e$t,e$l){this.ctx.beginClip&&this.ctx.beginClip(e$d+e$l[0],e$t+e$l[1],e$l[2],e$l[3])},this._setIBVB=function(e$d,e$t,e$l){this.ctx.setIBVB(e$l[0]+e$d,e$l[1]+e$t,e$l[2],e$l[3],e$l[4],e$l[5],e$l[6],e$l[7])},this._fillTrangles=function(e$d,e$t,e$l){this.ctx.fillTrangles(e$l[0],e$l[1]+e$d,e$l[2]+e$t,e$l[3],e$l[4])},this._drawPath=function(e$d,e$t,e$l){var e$k=this.ctx;e$K.isWebGL&&e$k.setPathId(-1),e$k.beginPath(),e$d+=e$l[0],e$t+=e$l[1],e$K.isWebGL&&e$k.movePath(e$d,e$t);for(var e$W=e$l[2],e$i=0,e$A=e$W.length;e$i<e$A;e$i++){var e$B=e$W[e$i];switch(e$B[0]){case"moveTo":e$K.isWebGL?e$k.moveTo(e$B[1],e$B[2]):e$k.moveTo(e$d+e$B[1],e$t+e$B[2]);break;case"lineTo":e$K.isWebGL?e$k.lineTo(e$B[1],e$B[2]):e$k.lineTo(e$d+e$B[1],e$t+e$B[2]);break;case"arcTo":e$K.isWebGL?e$k.arcTo(e$B[1],e$B[2],e$B[3],e$B[4],e$B[5]):e$k.arcTo(e$d+e$B[1],e$t+e$B[2],e$d+e$B[3],e$t+e$B[4],e$B[5]);break;case"closePath":e$k.closePath()}}var e$o=e$l[3];null!=e$o&&(e$k.fillStyle=e$o.fillStyle,e$k.fill());var e$I=e$l[4];null!=e$I&&(e$k.strokeStyle=e$I.strokeStyle,e$k.lineWidth=e$I.lineWidth||1,e$k.lineJoin=e$I.lineJoin,e$k.lineCap=e$I.lineCap,e$k.miterLimit=e$I.miterLimit,e$k.stroke())},this.drawPoly=function(e$d,e$t,e$l){this.ctx.drawPoly(e$d+this.x+e$l[0],e$t+this.y+e$l[1],e$l[2],e$l[3],e$l[4],e$l[5],e$l[6])},this._drawPoly=function(e$d,e$t,e$l){var e$k=this.ctx,e$W=e$l[2],e$i=2,e$A=e$W.length;if(e$K.isWebGL)for(e$k.setPathId(e$l[6]),e$k.beginPath(),e$d+=e$l[0],e$t+=e$l[1],e$k.movePath(e$d,e$t),e$k.moveTo(e$W[0],e$W[1]);e$i<e$A;)e$k.lineTo(e$W[e$i++],e$W[e$i++]);else for(e$k.beginPath(),e$d+=e$l[0],e$t+=e$l[1],e$k.moveTo(e$d+e$W[0],e$t+e$W[1]);e$i<e$A;)e$k.lineTo(e$d+e$W[e$i++],e$t+e$W[e$i++]);e$k.closePath(),this._fillAndStroke(e$l[3],e$l[4],e$l[5],e$l[7])},this._drawSkin=function(e$d,e$t,e$l){var e$k=e$l[0];if(e$k){var e$W=this.ctx;e$k.render(e$W,e$d,e$t)}},this._drawParticle=function(e$d,e$t,e$l){this.ctx.drawParticle(e$d+this.x,e$t+this.y,e$l[0])},this._setFilters=function(e$d,e$t,e$l){this.ctx.setFilters(e$l)},e$l?this.ctx=e$l.getContext("2d"):(e$l=e$gd.create("3D"),this.ctx=e$r.createWebGLContext2D(e$l),e$l._setContext(this.ctx)),e$l.size(e$d,e$t),this.canvas=e$l}e$b(e$A,"laya.renders.RenderContext");var e$d=e$A.prototype;return e$d.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},e$d.drawTexture=function(e$d,e$t,e$l,e$k,e$W){e$d.loaded&&this.ctx.drawTexture(e$d,e$t,e$l,e$k,e$W,this.x,this.y)},e$d._drawTextures=function(e$d,e$t,e$l){e$l[0].loaded&&this.ctx.drawTextures(e$l[0],e$l[1],e$d+this.x,e$t+this.y)},e$d.drawTextureWithTransform=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$d.loaded&&this.ctx.drawTextureWithTransform(e$d,e$t,e$l,e$k,e$W,e$i,this.x,this.y,e$A)},e$d.fillQuadrangle=function(e$d,e$t,e$l,e$k,e$W){this.ctx.fillQuadrangle(e$d,e$t,e$l,e$k,e$W)},e$d.drawCanvas=function(e$d,e$t,e$l,e$k,e$W){this.ctx.drawCanvas(e$d,e$t+this.x,e$l+this.y,e$k,e$W)},e$d.drawRect=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$i&&(e$i=1);var e$A=this.ctx;e$A.strokeStyle=e$W,e$A.lineWidth=e$i,e$A.strokeRect(e$d+this.x,e$t+this.y,e$l,e$k,e$i)},e$d._fillAndStroke=function(e$d,e$t,e$l,e$k){void 0===e$k&&(e$k=!1);var e$W=this.ctx;null!=e$d&&(e$W.fillStyle=e$d,e$K.isWebGL?e$W.fill(e$k):e$W.fill()),null!=e$t&&0<e$l&&(e$W.strokeStyle=e$t,e$W.lineWidth=e$l,e$W.stroke())},e$d.clipRect=function(e$d,e$t,e$l,e$k){this.ctx.clipRect(e$d+this.x,e$t+this.y,e$l,e$k)},e$d.fillRect=function(e$d,e$t,e$l,e$k,e$W){this.ctx.fillRect(e$d+this.x,e$t+this.y,e$l,e$k,e$W)},e$d.drawCircle=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=1),e$X.drawCall++;var e$i=this.ctx;e$i.beginPath(),e$i.strokeStyle=e$k,e$i.lineWidth=e$W,e$i.arc(e$d+this.x,e$t+this.y,e$l,0,e$A.PI2),e$i.stroke()},e$d.drawTriangles=function(e$d,e$t,e$l){if(e$K.isWebGL)this.ctx.drawTriangles(e$l[0],e$d+e$l[1],e$t+e$l[2],e$l[3],e$l[4],e$l[5],e$l[6],e$l[7],e$l[8],e$l[9]);else{var e$k=e$l[5],e$W=0,e$i=e$k.length,e$A=this.ctx;for(e$W=0;e$W<e$i;e$W+=3){var e$B=2*e$k[e$W],e$o=2*e$k[e$W+1],e$I=2*e$k[e$W+2];e$A.drawTriangle(e$l[0],e$l[3],e$l[4],e$B,e$o,e$I,e$l[6],!0)}}},e$d.fillCircle=function(e$d,e$t,e$l,e$k){e$X.drawCall++;var e$W=this.ctx;e$W.beginPath(),e$W.fillStyle=e$k,e$W.arc(e$d+this.x,e$t+this.y,e$l,0,e$A.PI2),e$W.fill()},e$d.setShader=function(e$d){this.ctx.setShader(e$d)},e$d.drawLine=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$i&&(e$i=1);var e$A=this.ctx;e$A.beginPath(),e$A.strokeStyle=e$W,e$A.lineWidth=e$i,e$A.moveTo(this.x+e$d,this.y+e$t),e$A.lineTo(this.x+e$l,this.y+e$k),e$A.stroke()},e$d.clear=function(){this.ctx.clear()},e$d.transformByMatrix=function(e$d){this.ctx.transformByMatrix(e$d)},e$d.setTransform=function(e$d,e$t,e$l,e$k,e$W,e$i){this.ctx.setTransform(e$d,e$t,e$l,e$k,e$W,e$i)},e$d.setTransformByMatrix=function(e$d){this.ctx.setTransformByMatrix(e$d)},e$d.save=function(){this.ctx.save()},e$d.restore=function(){this.ctx.restore()},e$d.translate=function(e$d,e$t){this.ctx.translate(e$d,e$t)},e$d.transform=function(e$d,e$t,e$l,e$k,e$W,e$i){this.ctx.transform(e$d,e$t,e$l,e$k,e$W,e$i)},e$d.rotate=function(e$d){this.ctx.rotate(e$d)},e$d.scale=function(e$d,e$t){this.ctx.scale(e$d,e$t)},e$d.alpha=function(e$d){this.ctx.globalAlpha*=e$d},e$d.setAlpha=function(e$d){this.ctx.globalAlpha=e$d},e$d.fillWords=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$i&&(e$i=0),this.ctx.fillWords(e$d,e$t,e$l,e$k,e$W,e$i)},e$d.fillBorderWords=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this.ctx.fillBorderWords(e$d,e$t,e$l,e$k,e$W,e$i,e$A)},e$d.fillText=function(e$d,e$t,e$l,e$k,e$W,e$i){this.ctx.fillText(e$d,e$t+this.x,e$l+this.y,e$k,e$W,e$i)},e$d.strokeText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this.ctx.strokeText(e$d,e$t+this.x,e$l+this.y,e$k,e$W,e$i,e$A)},e$d.blendMode=function(e$d){this.ctx.globalCompositeOperation=e$d},e$d.flush=function(){this.ctx.flush&&this.ctx.flush()},e$d.addRenderObject=function(e$d){this.ctx.addRenderObject(e$d)},e$d.beginClip=function(e$d,e$t,e$l,e$k){this.ctx.beginClip&&this.ctx.beginClip(e$d,e$t,e$l,e$k)},e$d.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},e$d.fillTrangles=function(e$d,e$t,e$l){this.ctx.fillTrangles(e$l[0],e$l[1],e$l[2],e$l[3],4<e$l.length?e$l[4]:null)},e$A.PI2=2*Math.PI,e$A}(),e$n=function(){function e$A(e$d,e$t){switch(this._next=e$t||e$A.NORENDER,e$d){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=e$z._filter);case 69905:return void(this._fun=e$A._initRenderFun)}this.onCreate(e$d)}e$b(e$A,"laya.renders.RenderSprite");var e$d=e$A.prototype;return e$d.onCreate=function(e$d){},e$d._style=function(e$d,e$t,e$l,e$k){e$d._style.render(e$d,e$t,e$l,e$k);var e$W=this._next;e$W._fun.call(e$W,e$d,e$t,e$l,e$k)},e$d._no=function(e$d,e$t,e$l,e$k){},e$d._custom=function(e$d,e$t,e$l,e$k){e$d.customRender(e$t,e$l,e$k);var e$W=e$d._style._tf;this._next._fun.call(this._next,e$d,e$t,e$l-e$W.translateX,e$k-e$W.translateY)},e$d._clip=function(e$d,e$t,e$l,e$k){var e$W=this._next;if(e$W!=e$A.NORENDER){var e$i=e$d._style.scrollRect;e$t.ctx.save(),e$t.ctx.clipRect(e$l,e$k,e$i.width,e$i.height),e$W._fun.call(e$W,e$d,e$t,e$l-e$i.x,e$k-e$i.y),e$t.ctx.restore()}},e$d._blend=function(e$d,e$t,e$l,e$k){var e$W=e$d._style;e$W.blendMode&&(e$t.ctx.globalCompositeOperation=e$W.blendMode);var e$i=this._next;e$i._fun.call(e$i,e$d,e$t,e$l,e$k),e$t.ctx.globalCompositeOperation="source-over"},e$d._mask=function(e$d,e$t,e$l,e$k){var e$W=this._next;e$W._fun.call(e$W,e$d,e$t,e$l,e$k);var e$i=e$d.mask;e$i&&(e$t.ctx.globalCompositeOperation="destination-in",(0<e$i.numChildren||!e$i.graphics._isOnlyOne())&&(e$i.cacheAsBitmap=!0),e$i.render(e$t,e$l-e$d.pivotX,e$k-e$d.pivotY)),e$t.ctx.globalCompositeOperation="source-over"},e$d._graphics=function(e$d,e$t,e$l,e$k){var e$W=e$d._style._tf;e$d._graphics&&e$d._graphics._render(e$d,e$t,e$l-e$W.translateX,e$k-e$W.translateY);var e$i=this._next;e$i._fun.call(e$i,e$d,e$t,e$l,e$k)},e$d._image=function(e$d,e$t,e$l,e$k){var e$W=e$d._style;e$t.ctx.drawTexture2(e$l,e$k,e$W._tf.translateX,e$W._tf.translateY,e$d.transform,e$W.alpha,e$W.blendMode,e$d._graphics._one)},e$d._image2=function(e$d,e$t,e$l,e$k){var e$W=e$d._style._tf;e$t.ctx.drawTexture2(e$l,e$k,e$W.translateX,e$W.translateY,e$d.transform,1,null,e$d._graphics._one)},e$d._alpha=function(e$d,e$t,e$l,e$k){var e$W;if(.01<(e$W=e$d._style.alpha)||e$d._needRepaint()){var e$i=e$t.ctx.globalAlpha;e$t.ctx.globalAlpha*=e$W;var e$A=this._next;e$A._fun.call(e$A,e$d,e$t,e$l,e$k),e$t.ctx.globalAlpha=e$i}},e$d._transform=function(e$d,e$t,e$l,e$k){var e$W=e$d.transform,e$i=this._next;e$W&&e$i!=e$A.NORENDER?(e$t.save(),e$t.transform(e$W.a,e$W.b,e$W.c,e$W.d,e$W.tx+e$l,e$W.ty+e$k),e$i._fun.call(e$i,e$d,e$t,0,0),e$t.restore()):e$i._fun.call(e$i,e$d,e$t,e$l,e$k)},e$d._childs=function(e$d,e$t,e$l,e$k){var e$W=e$d._style,e$i=e$W._tf;if(e$l=e$l-e$i.translateX+e$W.paddingLeft,e$k=e$k-e$i.translateY+e$W.paddingTop,e$W._calculation){var e$A=e$d._getWords();if(e$A){var e$B=e$W;e$B&&(e$B.stroke?e$t.fillBorderWords(e$A,e$l,e$k,e$B.font,e$B.color,e$B.strokeColor,e$B.stroke):e$t.fillWords(e$A,e$l,e$k,e$B.font,e$B.color,"none"!=e$B.textDecoration&&e$B.underLine?1:0))}}var e$o,e$I=e$d._childs,e$b=e$I.length;if(e$d.viewport||e$d.optimizeScrollRect&&e$d._style.scrollRect){var e$f=e$d.viewport||e$d._style.scrollRect,e$J=e$f.x,e$c=e$f.y,e$Y=e$f.right,e$w=e$f.bottom,e$D=NaN,e$z=NaN;for(e$e=0;e$e<e$b;++e$e)(e$o=e$I[e$e]).visible&&(e$D=e$o._x)<e$Y&&e$D+e$o.width>e$J&&(e$z=e$o._y)<e$w&&e$z+e$o.height>e$c&&e$o.render(e$t,e$l,e$k)}else for(var e$e=0;e$e<e$b;++e$e)(e$o=e$I[e$e])._style.visible&&e$o.render(e$t,e$l,e$k)},e$d._canvas=function(e$d,e$t,e$l,e$k){var e$W=e$d._$P.cacheCanvas;if(e$W){"bitmap"===e$W.type?e$X.canvasBitmap++:e$X.canvasNormal++;var e$i=e$W.ctx;if(e$d._needRepaint()||!e$i)this._canvas_repaint(e$d,e$t,e$l,e$k);else{var e$A=e$W._cacheRec;e$t.drawCanvas(e$i.canvas,e$l+e$A.x,e$k+e$A.y,e$A.width,e$A.height)}}else this._next._fun.call(this._next,e$d,e$t,e$l,e$k)},e$d._canvas_repaint=function(e$d,e$t,e$l,e$k){var e$W=e$d._$P.cacheCanvas,e$i=this._next;if(e$W){var e$A,e$B,e$o,e$I,e$b=e$W.ctx,e$f=e$d._needRepaint()||!e$b,e$J=e$W.type;if("bitmap"===e$J?e$X.canvasBitmap++:e$X.canvasNormal++,e$f){var e$c,e$Y;e$W._cacheRec||(e$W._cacheRec=new e$$),e$K.isWebGL&&"bitmap"!==e$J?e$W._cacheRec.setTo(-e$d.pivotX,-e$d.pivotY,1,1):((e$I=e$d.getSelfBounds()).x=e$I.x-e$d.pivotX,e$I.y=e$I.y-e$d.pivotY,e$I.x=e$I.x-16,e$I.y=e$I.y-16,e$I.width=e$I.width+32,e$I.height=e$I.height+32,e$I.x=Math.floor(e$I.x+e$l)-e$l,e$I.y=Math.floor(e$I.y+e$k)-e$k,e$I.width=Math.floor(e$I.width),e$I.height=Math.floor(e$I.height),e$W._cacheRec.copyFrom(e$I)),e$I=e$W._cacheRec;var e$w,e$D=e$K.isWebGL?1:e$V.pixelRatio*e$q.stage.clientScaleX,e$z=e$K.isWebGL?1:e$V.pixelRatio*e$q.stage.clientScaleY;if(!e$K.isWebGL){var e$e,e$g=1,e$H=1;for(e$e=e$d;e$e&&e$e!=e$q.stage;)e$g*=e$e.scaleX,e$H*=e$e.scaleY,e$e=e$e.parent;e$K.isWebGL?(e$g<1&&(e$D*=e$g),e$H<1&&(e$z*=e$H)):(1<e$g&&(e$D*=e$g),1<e$H&&(e$z*=e$H))}if(e$d.scrollRect){var e$R=e$d.scrollRect;e$I.x-=e$R.x,e$I.y-=e$R.y}if(e$c=e$I.width*e$D,e$Y=e$I.height*e$z,e$B=e$I.x,e$o=e$I.y,e$K.isWebGL&&"bitmap"===e$J&&(2048<e$c||2048<e$Y))return console.warn("cache bitmap size larger than 2048,cache ignored"),e$W.ctx&&(e$P.recover("RenderContext",e$W.ctx),e$W.ctx.canvas.size(0,0),e$W.ctx=null),void e$i._fun.call(e$i,e$d,e$t,e$l,e$k);if(e$b||(e$b=e$W.ctx=e$P.getItem("RenderContext")||new e$x(e$c,e$Y,e$gd.create("AUTO"))),e$b.ctx.sprite=e$d,(e$A=e$b.canvas).clear(),(e$A.width!=e$c||e$A.height!=e$Y)&&e$A.size(e$c,e$Y),"bitmap"===e$J?e$A.context.asBitmap=!0:"normal"===e$J&&(e$A.context.asBitmap=!1),1!=e$D||1!=e$z){var e$G=e$b.ctx;e$G.save(),e$G.scale(e$D,e$z),!e$K.isConchWebGL&&e$K.isConchApp&&(e$w=e$d._$P.cf)&&e$G.setFilterMatrix&&e$G.setFilterMatrix(e$w._mat,e$w._alpha),e$i._fun.call(e$i,e$d,e$b,-e$B,-e$o),e$G.restore(),e$K.isConchApp&&!e$K.isConchWebGL||e$d._applyFilters()}else e$G=e$b.ctx,!e$K.isConchWebGL&&e$K.isConchApp&&(e$w=e$d._$P.cf)&&e$G.setFilterMatrix&&e$G.setFilterMatrix(e$w._mat,e$w._alpha),e$i._fun.call(e$i,e$d,e$b,-e$B,-e$o),e$K.isConchApp&&!e$K.isConchWebGL||e$d._applyFilters();e$d._$P.staticCache&&(e$W.reCache=!1),e$X.canvasReCache++}else e$B=(e$I=e$W._cacheRec).x,e$o=e$I.y,e$A=e$b.canvas;e$t.drawCanvas(e$A,e$l+e$B,e$k+e$o,e$I.width,e$I.height)}else e$i._fun.call(e$i,e$d,e$b,e$l,e$k)},e$A.__init__=function(){var e$d,e$t,e$l=0;for(e$t=e$r.createRenderSprite(69905,null),e$d=e$A.renders.length=4096,e$l=0;e$l<e$d;e$l++)e$A.renders[e$l]=e$t;e$A.renders[0]=e$r.createRenderSprite(0,null),function(e$d,e$t){for(var e$l=0,e$k=0;e$k<e$d.length;e$k++)e$l|=e$d[e$k],e$A.renders[e$l]=e$t}([1,512,4,2],new e$A(1,null)),e$A.renders[513]=e$r.createRenderSprite(513,null),e$A.renders[517]=new e$A(517,null)},e$A._initRenderFun=function(e$d,e$t,e$l,e$k){var e$W=e$d._renderType;(e$A.renders[e$W]=e$A._getTypeRender(e$W))._fun(e$d,e$t,e$l,e$k)},e$A._getTypeRender=function(e$d){for(var e$t=null,e$l=2048;1<e$l;)e$l&e$d&&(e$t=e$r.createRenderSprite(e$l,e$t)),e$l>>=1;return e$t},e$A.IMAGE=1,e$A.ALPHA=2,e$A.TRANSFORM=4,e$A.BLEND=8,e$A.CANVAS=16,e$A.FILTERS=32,e$A.MASK=64,e$A.CLIP=128,e$A.STYLE=256,e$A.GRAPHICS=512,e$A.CUSTOM=1024,e$A.CHILDS=2048,e$A.INIT=69905,e$A.renders=[],e$A.NORENDER=new e$A(0,null),e$A}(),e$Q=function(){function e$B(){this._repaint=!1}e$b(e$B,"laya.resource.Context");var e$d=e$B.prototype;return e$d.replaceReset=function(){var e$d,e$t,e$l=0;for(e$d=e$B.replaceKeys.length,e$l=0;e$l<e$d;e$l++)e$t=e$B.replaceKeys[e$l],this[e$B.newKeys[e$l]]=this[e$t]},e$d.replaceResotre=function(){this.__restore(),this.__reset()},e$d.setIsMainContext=function(){},e$d.drawTextures=function(e$d,e$t,e$l,e$k){e$X.drawCall+=e$t.length/2;for(var e$W=e$d.width,e$i=e$d.height,e$A=0,e$B=e$t.length;e$A<e$B;e$A+=2)this.drawTexture(e$d,e$t[e$A],e$t[e$A+1],e$W,e$i,e$l,e$k)},e$d.drawCanvas=function(e$d,e$t,e$l,e$k,e$W){e$X.drawCall++,this.drawImage(e$d.source,e$t,e$l,e$k,e$W)},e$d.fillRect=function(e$d,e$t,e$l,e$k,e$W){e$X.drawCall++,e$W&&(this.fillStyle=e$W),this.__fillRect(e$d,e$t,e$l,e$k)},e$d.fillText=function(e$d,e$t,e$l,e$k,e$W,e$i){e$X.drawCall++,3<arguments.length&&null!=e$k&&(this.font=e$k,this.fillStyle=e$W,this.textAlign=e$i,this.textBaseline="top"),this.__fillText(e$d,e$t,e$l)},e$d.fillBorderText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){e$X.drawCall++,this.font=e$k,this.fillStyle=e$W,this.textBaseline="top",this.strokeStyle=e$i,this.lineWidth=e$A,this.textAlign=e$B,this.__strokeText(e$d,e$t,e$l),this.__fillText(e$d,e$t,e$l)},e$d.strokeText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$X.drawCall++,3<arguments.length&&null!=e$k&&(this.font=e$k,this.strokeStyle=e$W,this.lineWidth=e$i,this.textAlign=e$A,this.textBaseline="top"),this.__strokeText(e$d,e$t,e$l)},e$d.transformByMatrix=function(e$d){this.transform(e$d.a,e$d.b,e$d.c,e$d.d,e$d.tx,e$d.ty)},e$d.setTransformByMatrix=function(e$d){this.setTransform(e$d.a,e$d.b,e$d.c,e$d.d,e$d.tx,e$d.ty)},e$d.clipRect=function(e$d,e$t,e$l,e$k){e$X.drawCall++,this.beginPath(),this.rect(e$d,e$t,e$l,e$k),this.clip()},e$d.drawTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$X.drawCall++;var e$B=e$d.uv,e$o=e$d.bitmap.width,e$I=e$d.bitmap.height;this.drawImage(e$d.source,e$B[0]*e$o,e$B[1]*e$I,(e$B[2]-e$B[0])*e$o,(e$B[5]-e$B[3])*e$I,e$t+e$i,e$l+e$A,e$k,e$W)},e$d.drawTextureWithTransform=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){e$X.drawCall++;var e$I=e$d.uv,e$b=e$d.bitmap.width,e$f=e$d.bitmap.height;this.save(),1!=e$o&&(this.globalAlpha*=e$o),e$i?(this.transform(e$i.a,e$i.b,e$i.c,e$i.d,e$i.tx+e$A,e$i.ty+e$B),this.drawImage(e$d.source,e$I[0]*e$b,e$I[1]*e$f,(e$I[2]-e$I[0])*e$b,(e$I[5]-e$I[3])*e$f,e$t,e$l,e$k,e$W)):this.drawImage(e$d.source,e$I[0]*e$b,e$I[1]*e$f,(e$I[2]-e$I[0])*e$b,(e$I[5]-e$I[3])*e$f,e$t+e$A,e$l+e$B,e$k,e$W),this.restore()},e$d.drawTexture2=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){var e$o=e$B[0];if(e$o.loaded&&e$o.bitmap&&e$o.source){e$X.drawCall++;var e$I=1!==e$i;if(e$I){var e$b=this.globalAlpha;this.globalAlpha*=e$i}var e$f=e$o.uv,e$J=e$o.bitmap.width,e$c=e$o.bitmap.height;e$W?(this.save(),this.transform(e$W.a,e$W.b,e$W.c,e$W.d,e$W.tx+e$d,e$W.ty+e$t),this.drawImage(e$o.source,e$f[0]*e$J,e$f[1]*e$c,(e$f[2]-e$f[0])*e$J,(e$f[5]-e$f[3])*e$c,e$B[1]-e$l,e$B[2]-e$k,e$B[3],e$B[4]),this.restore()):this.drawImage(e$o.source,e$f[0]*e$J,e$f[1]*e$c,(e$f[2]-e$f[0])*e$J,(e$f[5]-e$f[3])*e$c,e$B[1]-e$l+e$d,e$B[2]-e$k+e$t,e$B[3],e$B[4]),e$I&&(this.globalAlpha=e$b)}},e$d.fillTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){if(!e$B.pat){if(e$d.uv!=e$bd.DEF_UV){var e$o=new e$gd("2D");e$o.getContext("2d"),e$o.size(e$d.width,e$d.height),e$o.context.drawTexture(e$d,0,0,e$d.width,e$d.height,0,0),e$d=new e$bd(e$o)}e$B.pat=this.createPattern(e$d.bitmap.source,e$i)}var e$I=e$t,e$b=e$l,e$f=0,e$J=0;e$A&&(e$I+=e$A.x%e$d.width,e$b+=e$A.y%e$d.height,e$f-=e$A.x%e$d.width,e$J-=e$A.y%e$d.height),this.translate(e$I,e$b),this.fillRect(e$f,e$J,e$k,e$W,e$B.pat),this.translate(-e$I,-e$b)},e$d.drawTriangle=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){var e$o=e$d.bitmap,e$I=e$o.source,e$b=e$d.width,e$f=e$d.height,e$J=e$o.width,e$c=e$o.height,e$Y=e$l[e$k]*e$J,e$w=e$l[e$W]*e$J,e$D=e$l[e$i]*e$J,e$z=e$l[e$k+1]*e$c,e$e=e$l[e$W+1]*e$c,e$g=e$l[e$i+1]*e$c,e$H=e$t[e$k],e$R=e$t[e$W],e$G=e$t[e$i],e$q=e$t[e$k+1],e$L=e$t[e$W+1],e$$=e$t[e$i+1];if(e$B){var e$p=(e$H+e$R+e$G)/3,e$M=(e$q+e$L+e$$)/3,e$T=e$H-e$p,e$r=e$q-e$M,e$S=Math.sqrt(e$T*e$T+e$r*e$r);e$H=e$p+e$T/e$S*(e$S+1),e$q=e$M+e$r/e$S*(e$S+1),e$r=e$L-e$M,e$R=e$p+(e$T=e$R-e$p)/(e$S=Math.sqrt(e$T*e$T+e$r*e$r))*(e$S+1),e$L=e$M+e$r/e$S*(e$S+1),e$r=e$$-e$M,e$G=e$p+(e$T=e$G-e$p)/(e$S=Math.sqrt(e$T*e$T+e$r*e$r))*(e$S+1),e$$=e$M+e$r/e$S*(e$S+1)}this.save(),e$A&&this.transform(e$A.a,e$A.b,e$A.c,e$A.d,e$A.tx,e$A.ty),this.beginPath(),this.moveTo(e$H,e$q),this.lineTo(e$R,e$L),this.lineTo(e$G,e$$),this.closePath(),this.clip();var e$j=1/(e$Y*e$e+e$z*e$D+e$w*e$g-e$e*e$D-e$z*e$w-e$Y*e$g),e$C=e$H*e$e+e$z*e$G+e$R*e$g-e$e*e$G-e$z*e$R-e$H*e$g,e$K=e$Y*e$R+e$H*e$D+e$w*e$G-e$R*e$D-e$H*e$w-e$Y*e$G,e$x=e$Y*e$e*e$G+e$z*e$R*e$D+e$H*e$w*e$g-e$H*e$e*e$D-e$z*e$w*e$G-e$Y*e$R*e$g,e$n=e$q*e$e+e$z*e$$+e$L*e$g-e$e*e$$-e$z*e$L-e$q*e$g,e$Q=e$Y*e$L+e$q*e$D+e$w*e$$-e$L*e$D-e$q*e$w-e$Y*e$$,e$y=e$Y*e$e*e$$+e$z*e$L*e$D+e$q*e$w*e$g-e$q*e$e*e$D-e$z*e$w*e$$-e$Y*e$L*e$g;this.transform(e$C*e$j,e$n*e$j,e$K*e$j,e$Q*e$j,e$x*e$j,e$y*e$j),this.drawImage(e$I,e$d.uv[0]*e$J,e$d.uv[1]*e$c,e$b,e$f,e$d.uv[0]*e$J,e$d.uv[1]*e$c,e$b,e$f),this.restore()},e$d.flush=function(){return 0},e$d.fillWords=function(e$d,e$t,e$l,e$k,e$W,e$i){e$k&&(this.font=e$k),e$W&&(this.fillStyle=e$W);this.textBaseline="top",this.textAlign="left";for(var e$A=0,e$B=e$d.length;e$A<e$B;e$A++){var e$o=e$d[e$A];if(this.__fillText(e$o.char,e$o.x+e$t,e$o.y+e$l),1===e$i){var e$I=e$o.height,e$b=.5*e$o.style.letterSpacing;e$b||(e$b=0),this.beginPath(),this.strokeStyle=e$W,this.lineWidth=1,this.moveTo(e$t+e$o.x-e$b+.5,e$l+e$o.y+e$I+.5),this.lineTo(e$t+e$o.x+e$o.width+e$b+.5,e$l+e$o.y+e$I+.5),this.stroke()}}},e$d.fillBorderWords=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$k&&(this.font=e$k),e$W&&(this.fillStyle=e$W),this.textBaseline="top",this.lineWidth=e$A,this.textAlign="left",this.strokeStyle=e$i;for(var e$B=0,e$o=e$d.length;e$B<e$o;e$B++){var e$I=e$d[e$B];this.__strokeText(e$I.char,e$I.x+e$t,e$I.y+e$l),this.__fillText(e$I.char,e$I.x+e$t,e$I.y+e$l)}},e$d.destroy=function(){this.canvas.width=this.canvas.height=0},e$d.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},e$d.drawCurves=function(e$d,e$t,e$l){this.beginPath(),this.strokeStyle=e$l[3],this.lineWidth=e$l[4];var e$k=e$l[2];e$d+=e$l[0],e$t+=e$l[1],this.moveTo(e$d+e$k[0],e$t+e$k[1]);for(var e$W=2,e$i=e$k.length;e$W<e$i;)this.quadraticCurveTo(e$d+e$k[e$W++],e$t+e$k[e$W++],e$d+e$k[e$W++],e$t+e$k[e$W++]);this.stroke()},e$B.__init__=function(e$t){var e$l=laya.resource.Context.prototype;if(!(e$t=e$t||CanvasRenderingContext2D.prototype).inited){e$t.inited=!0,e$t.__fillText=e$t.fillText,e$t.__fillRect=e$t.fillRect,e$t.__strokeText=e$t.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(e$d){e$t[e$d]=e$l[e$d]})}},e$B.replaceCanvasGetSet=function(e$d,e$t){var e$l=Object.getOwnPropertyDescriptor(e$d,e$t);if(!e$l||!e$l.configurable)return!1;var e$k,e$W={};for(e$k in e$l)"set"!=e$k&&(e$W[e$k]=e$l[e$k]);var e$i=e$l.set;return e$W.set=function(e$d){e$i.call(this,e$d);var e$t=this.getContext("2d");e$t&&"__reset"in e$t&&e$t.__reset()},Object.defineProperty(e$d,e$t,e$W),!0},e$B.replaceGetSet=function(e$d,e$t){var e$l=Object.getOwnPropertyDescriptor(e$d,e$t);if(!e$l||!e$l.configurable)return!1;var e$k,e$W={};for(e$k in e$l)"set"!=e$k&&(e$W[e$k]=e$l[e$k]);var e$i=e$l.set,e$A="___"+e$t+"__";return e$B.newKeys.push(e$A),e$W.set=function(e$d){e$d!=this[e$A]&&(this[e$A]=e$d,e$i.call(this,e$d))},Object.defineProperty(e$d,e$t,e$W),!0},e$B._default=new e$B,e$B.newKeys=[],e$o(e$B,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),e$B}(),e$y=function(){function e$i(e$d){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++e$i._uniqueIDCounter,this._name=e$d||"Content Manager",e$i._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,e$i._resourceManagers.push(this),this._resources=[],this._records={}}e$b(e$i,"laya.resource.ResourceManager");var e$d=e$i.prototype;return e$q.imps(e$d,{"laya.resource.IDispose":!0}),e$d.getResourceByIndex=function(e$d){return this._resources[e$d]},e$d.getResourcesLength=function(){return this._resources.length},e$d.addResource=function(e$d){return e$d.resourceManager&&e$d.resourceManager.removeResource(e$d),-1===this._resources.indexOf(e$d)&&((e$d._resourceManager=this)._resources.push(e$d),this.addRecord(e$d.uri,e$d.__className,e$d.memorySize),this.addSize(e$d.memorySize),!0)},e$d.removeResource=function(e$d){var e$t=this._resources.indexOf(e$d);return-1!==e$t&&(this._resources.splice(e$t,1),e$d._resourceManager=null,this._memorySize-=e$d.memorySize,this.addRecord(e$d.uri,e$d.__className,-e$d.memorySize),!0)},e$d.unload=function(){for(var e$d=this._resources.slice(0,this._resources.length),e$t=0;e$t<e$d.length;e$t++){e$d[e$t].destroy()}e$d.length=0},e$d.dispose=function(){if(this===e$i._systemResourceManager)throw new Error("systemResourceManager不能被释放！");e$i._resourceManagers.splice(e$i._resourceManagers.indexOf(this),1),e$i._isResourceManagersSorted=!1;for(var e$d=this._resources.slice(0,this._resources.length),e$t=0;e$t<e$d.length;e$t++){var e$l=e$d[e$t];e$l.resourceManager.removeResource(e$l),e$l.destroy()}e$d.length=0},e$d.addSize=function(e$d){e$d&&(this.autoRelease&&0<e$d&&this._memorySize+e$d>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=e$d)},e$d.addRecord=function(e$d,e$t,e$l){DEBUG&&e$l&&!e$d&&console.error(e$d,e$t,e$l)},e$d.garbageCollection=function(e$d){var e$t=this._resources;(e$t=e$t.slice()).sort(function(e$d,e$t){if(!e$d||!e$t)throw new Error("a或b不能为空！");return e$d.released&&e$t.released?0:e$d.released?1:e$t.released?-1:e$d._lastUseFrameCount-e$t._lastUseFrameCount});for(var e$l=e$X.loopCount,e$k=0,e$W=e$t.length;e$k<e$W;e$k++){var e$i=e$t[e$k];if(!(1<e$l-e$i._lastUseFrameCount))return void(this._memorySize>=e$d&&(this._isOverflow=!0));if(e$i.releaseResource(),this._memorySize<e$d)return void(this._isOverflow=!1)}},e$Y(0,e$d,"id",function(){return this._id}),e$Y(0,e$d,"name",function(){return this._name},function(e$d){!e$d&&""===e$d||this._name===e$d||(this._name=e$d,e$i._isResourceManagersSorted=!1)}),e$Y(0,e$d,"memorySize",function(){return this._memorySize}),e$Y(0,e$d,"records",function(){return this._records}),e$Y(1,e$i,"systemResourceManager",function(){return e$i._systemResourceManager}),e$i.__init__=function(){e$i.currentResourceManager=e$i.systemResourceManager},e$i.getLoadedResourceManagerByIndex=function(e$d){return e$i._resourceManagers[e$d]},e$i.getLoadedResourceManagersCount=function(){return e$i._resourceManagers.length},e$i.recreateContentManagers=function(e$d){void 0===e$d&&(e$d=!1);for(var e$t=e$i.currentResourceManager,e$l=0;e$l<e$i._resourceManagers.length;e$l++){e$i.currentResourceManager=e$i._resourceManagers[e$l];for(var e$k=0;e$k<e$i.currentResourceManager._resources.length;e$k++)e$i.currentResourceManager._resources[e$k].releaseResource(e$d),e$i.currentResourceManager._resources[e$k].activeResource(e$d)}e$i.currentResourceManager=e$t},e$i.releaseContentManagers=function(e$d){void 0===e$d&&(e$d=!1);for(var e$t=e$i.currentResourceManager,e$l=0;e$l<e$i._resourceManagers.length;e$l++){e$i.currentResourceManager=e$i._resourceManagers[e$l];for(var e$k=0;e$k<e$i.currentResourceManager._resources.length;e$k++){var e$W=e$i.currentResourceManager._resources[e$k];!e$W.released&&e$W.releaseResource(e$d)}}e$i.currentResourceManager=e$t},e$i._uniqueIDCounter=0,e$i._isResourceManagersSorted=!1,e$i._resourceManagers=[],e$o(e$i,["_systemResourceManager",function(){return this._systemResourceManager=new e$i("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=e$i._systemResourceManager}]),e$i}(),e$V=(function(){function e$d(){}e$b(e$d,"laya.system.System"),e$d.changeDefinition=function(e$d,e$t){e$q[e$d]=e$t;var e$l=e$d+"=classObj";e$q._runScript(e$l)},e$d.__init__=function(){e$K.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function e$l(){}return e$b(e$l,"laya.utils.Browser"),e$Y(1,e$l,"pixelRatio",function(){return e$l.__init__(),-1<e$l.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:e$r.getPixelRatio()}),e$Y(1,e$l,"height",function(){return e$l.__init__(),(e$q.stage&&e$q.stage.canvasRotation?e$l.clientWidth:e$l.clientHeight)*e$l.pixelRatio}),e$Y(1,e$l,"clientWidth",function(){return e$l.__init__(),e$l.window.innerWidth||e$l.document.body.clientWidth}),e$Y(1,e$l,"window",function(){return e$l.__init__(),e$l._window}),e$Y(1,e$l,"clientHeight",function(){return e$l.__init__(),e$l.window.innerHeight||e$l.document.body.clientHeight||e$l.document.documentElement.clientHeight}),e$Y(1,e$l,"width",function(){return e$l.__init__(),(e$q.stage&&e$q.stage.canvasRotation?e$l.clientHeight:e$l.clientWidth)*e$l.pixelRatio}),e$Y(1,e$l,"container",function(){return e$l.__init__(),e$l._container||((e$l._container=e$l.createElement("div")).id="layaContainer",e$l.document.body.appendChild(e$l._container)),e$l._container},function(e$d){e$l._container=e$d}),e$Y(1,e$l,"document",function(){return e$l.__init__(),e$l._document}),e$l.__init__=function(){if(!e$l._window){e$l._window=e$r.getWindow(),e$l._document=e$l.window.document,e$l._window.addEventListener("message",function(e$d){laya.utils.Browser._onMessage(e$d)},!1),e$l.document.__createElement=e$l.document.createElement,e$A.requestAnimationFrame=e$A.requestAnimationFrame||e$A.webkitRequestAnimationFrame||e$A.mozRequestAnimationFrame||e$A.oRequestAnimationFrame||e$A.msRequestAnimationFrame||function(e$d){return e$A.setTimeout(e$d,1e3/60)};var e$d=e$A.document.body.style;e$d["-webkit-user-select"]="none",e$d["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",e$l.userAgent=e$l.window.navigator.userAgent,e$l.onIOS=!!(e$l.u=e$l.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),e$l.onMobile=-1<e$l.u.indexOf("Mobile"),e$l.onIPhone=-1<e$l.u.indexOf("iPhone"),e$l.onMac=-1<e$l.u.indexOf("Mac OS X"),e$l.onIPad=-1<e$l.u.indexOf("iPad"),e$l.onAndroid=-1<e$l.u.indexOf("Android")||-1<e$l.u.indexOf("Adr"),e$l.onWP=-1<e$l.u.indexOf("Windows Phone"),e$l.onQQBrowser=-1<e$l.u.indexOf("QQBrowser"),e$l.onMQQBrowser=-1<e$l.u.indexOf("MQQBrowser")||-1<e$l.u.indexOf("Mobile")&&-1<e$l.u.indexOf("QQ"),e$l.onIE=!!e$l.window.ActiveXObject||"ActiveXObject"in e$l.window,e$l.onWeiXin=-1<e$l.u.indexOf("MicroMessenger"),e$l.onPC=!e$l.onMobile,e$l.onSafari=-1<e$l.u.indexOf("Safari"),e$l.onFirefox=-1<e$l.u.indexOf("Firefox"),e$l.onEdge=-1<e$l.u.indexOf("Edge"),e$l.onMiniGame=-1<e$l.u.indexOf("MiniGame"),e$l.onLimixiu=-1<e$l.u.indexOf("limixiu"),e$l.httpProtocol="http:"==e$l.window.location.protocol,e$l.onMiniGame&&null==e$l.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),e$l.webAudioEnabled=!!(e$l.window.AudioContext||e$l.window.webkitAudioContext||e$l.window.mozAudioContext),e$l.soundType=e$l.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",e$Wd=e$l.webAudioEnabled?e$id:e$ld,e$l.webAudioEnabled&&e$id.initWebAudio(),e$ld._initMusicAudio(),e$l.enableTouch="ontouchstart"in e$A||e$A.DocumentTouch&&e$t instanceof DocumentTouch,e$A.focus(),e$T._soundClass=e$Wd,e$T._musicClass=e$ld,e$K._mainCanvas=e$K._mainCanvas||e$gd.create("2D"),e$l.canvas||(e$l.canvas=e$gd.create("2D"),e$l.context=e$l.canvas.getContext("2d"))}},e$l._onMessage=function(e$d){if(e$d.data&&"size"==e$d.data.name){if(e$l.window.innerWidth=e$d.data.width,e$l.window.innerHeight=e$d.data.height,e$l.window.__innerHeight=e$d.data.clientHeight,!e$l.document.createEvent)return void console.warn("no document.createEvent");var e$t=e$l.document.createEvent("HTMLEvents");return e$t.initEvent("resize",!1,!1),void e$l.window.dispatchEvent(e$t)}},e$l.createElement=function(e$d){return e$l.__init__(),e$l.document.__createElement(e$d)},e$l.getElementById=function(e$d){return e$l.__init__(),e$l.document.getElementById(e$d)},e$l.removeElement=function(e$d){e$d&&e$d.parentNode&&e$d.parentNode.removeChild(e$d)},e$l.now=function(){return e$r.now()},e$l._window=null,e$l._document=null,e$l._container=null,e$l.userAgent=null,e$l.u=null,e$l.onIOS=!1,e$l.onMac=!1,e$l.onMobile=!1,e$l.onIPhone=!1,e$l.onIPad=!1,e$l.onAndroid=!1,e$l.onWP=!1,e$l.onQQBrowser=!1,e$l.onMQQBrowser=!1,e$l.onSafari=!1,e$l.onFirefox=!1,e$l.onEdge=!1,e$l.onIE=!1,e$l.onWeiXin=!1,e$l.onMiniGame=!1,e$l.onLimixiu=!1,e$l.onPC=!1,e$l.httpProtocol=!1,e$l.webAudioEnabled=!1,e$l.soundType=null,e$l.enableTouch=!1,e$l.canvas=null,e$l.context=null,e$l.__init$=function(){},e$l}()),e$Z=function(){function e$t(e$d){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,e$d?(this._u8d_=new Uint8Array(e$d),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}e$b(e$t,"laya.utils.Byte");var e$d=e$t.prototype;return e$d.___resizeBuffer=function(e$t){try{var e$d=new Uint8Array(e$t);null!=this._u8d_&&(this._u8d_.length<=e$t?e$d.set(this._u8d_):e$d.set(this._u8d_.subarray(0,e$t))),this._u8d_=e$d,this._d_=new DataView(e$d.buffer)}catch(e$d){throw"___resizeBuffer err:"+e$t}},e$d.getString=function(){return this.rUTF(this.getUint16())},e$d.getFloat32Array=function(e$d,e$t){var e$l=e$d+e$t;e$l=e$l>this._length?this._length:e$l;var e$k=new Float32Array(this._d_.buffer.slice(e$d,e$l));return this._pos_=e$l,e$k},e$d.getUint8Array=function(e$d,e$t){var e$l=e$d+e$t;e$l=e$l>this._length?this._length:e$l;var e$k=new Uint8Array(this._d_.buffer.slice(e$d,e$l));return this._pos_=e$l,e$k},e$d.getInt16Array=function(e$d,e$t){var e$l=e$d+e$t;e$l=e$l>this._length?this._length:e$l;var e$k=new Int16Array(this._d_.buffer.slice(e$d,e$l));return this._pos_=e$l,e$k},e$d.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var e$d=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,e$d},e$d.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var e$d=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,e$d},e$d.writeFloat32=function(e$d){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,e$d,this._xd_),this._pos_+=4},e$d.writeFloat64=function(e$d){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,e$d,this._xd_),this._pos_+=8},e$d.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var e$d=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,e$d},e$d.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var e$d=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,e$d},e$d.writeInt32=function(e$d){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,e$d,this._xd_),this._pos_+=4},e$d.writeUint32=function(e$d){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,e$d,this._xd_),this._pos_+=4},e$d.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var e$d=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,e$d},e$d.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var e$d=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,e$d},e$d.writeUint16=function(e$d){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,e$d,this._xd_),this._pos_+=2},e$d.writeInt16=function(e$d){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,e$d,this._xd_),this._pos_+=2},e$d.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},e$d.writeUint8=function(e$d){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,e$d),this._pos_++},e$d._getUInt8=function(e$d){return this._d_.getUint8(e$d)},e$d._getUint16=function(e$d){return this._d_.getUint16(e$d,this._xd_)},e$d._getMatrix=function(){return new e$S(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},e$d.rUTF=function(e$d){for(var e$t=[],e$l=this._pos_+e$d,e$k=0,e$W=0,e$i=0,e$A=String.fromCharCode,e$B=this._u8d_;this._pos_<e$l;)(e$k=e$B[this._pos_++])<128?0!=e$k&&e$t.push(e$A(e$k)):e$k<224?e$t.push(e$A((63&e$k)<<6|127&e$B[this._pos_++])):e$k<240?(e$W=e$B[this._pos_++],e$t.push(e$A((31&e$k)<<12|(127&e$W)<<6|127&e$B[this._pos_++]))):(e$W=e$B[this._pos_++],e$i=e$B[this._pos_++],e$t.push(e$A((15&e$k)<<18|(127&e$W)<<12|e$i<<6&127|127&e$B[this._pos_++]))),0;return e$t.join("")},e$d.getCustomString=function(e$d){for(var e$t=[],e$l=0,e$k=0,e$W=0,e$i=String.fromCharCode,e$A=this._u8d_;0<e$d;)if((e$k=e$A[this._pos_])<128)e$t.push(e$i(e$k)),this._pos_++,e$d--;else for(e$l=e$k-128,this._pos_++,e$d-=e$l;0<e$l;)e$k=e$A[this._pos_++],e$W=e$A[this._pos_++],e$t.push(e$i(e$W<<8|e$k)),e$l--;return e$t.join("")},e$d.clear=function(){this._pos_=0,this.length=0},e$d.__getBuffer=function(){return this._d_.buffer},e$d.writeUTFBytes=function(e$d){for(var e$t=0,e$l=(e$d+="").length;e$t<e$l;e$t++){var e$k=e$d.charCodeAt(e$t);e$k<=127?this.writeByte(e$k):e$k<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|e$k>>6,128|63&e$k],this._pos_),this._pos_+=2):e$k<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|e$k>>12,128|e$k>>6&63,128|63&e$k],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|e$k>>18,128|e$k>>12&63,128|e$k>>6&63,128|63&e$k],this._pos_),this._pos_+=4)}},e$d.writeUTFString=function(e$d){var e$t=this.pos;this.writeUint16(1),this.writeUTFBytes(e$d);var e$l=this.pos-e$t-2;if(65536<=e$l)throw"writeUTFString byte len more than 65536";this._d_.setUint16(e$t,e$l,this._xd_)},e$d.readUTFString=function(){return this.readUTFBytes(this.getUint16())},e$d.getUTFString=function(){return this.readUTFString()},e$d.readUTFBytes=function(e$d){if(void 0===e$d&&(e$d=-1),0==e$d)return"";var e$t=this.bytesAvailable;if(e$t<e$d)throw"readUTFBytes error - Out of bounds";return e$d=0<e$d?e$d:e$t,this.rUTF(e$d)},e$d.getUTFBytes=function(e$d){return void 0===e$d&&(e$d=-1),this.readUTFBytes(e$d)},e$d.writeByte=function(e$d){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,e$d),this._pos_+=1},e$d.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},e$d.getByte=function(){return this.readByte()},e$d.ensureWrite=function(e$d){this._length<e$d&&(this._length=e$d),this._allocated_<e$d&&(this.length=e$d)},e$d.writeArrayBuffer=function(e$d,e$t,e$l){if(void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),e$t<0||e$l<0)throw"writeArrayBuffer error - Out of bounds";0==e$l&&(e$l=e$d.byteLength-e$t),this.ensureWrite(this._pos_+e$l);var e$k=new Uint8Array(e$d);this._u8d_.set(e$k.subarray(e$t,e$t+e$l),this._pos_),this._pos_+=e$l},e$Y(0,e$d,"buffer",function(){var e$d=this._d_.buffer;return e$d.byteLength==this.length?e$d:e$d.slice(0,this.length)}),e$Y(0,e$d,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(e$d){this._xd_="littleEndian"==e$d}),e$Y(0,e$d,"length",function(){return this._length},function(e$d){this._allocated_<e$d?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(e$d,2*this._allocated_))):this._allocated_>e$d&&this.___resizeBuffer(this._allocated_=e$d),this._length=e$d}),e$Y(0,e$d,"pos",function(){return this._pos_},function(e$d){this._pos_=e$d}),e$Y(0,e$d,"bytesAvailable",function(){return this._length-this._pos_}),e$t.getSystemEndian=function(){if(!e$t._sysEndian){var e$d=new ArrayBuffer(2);new DataView(e$d).setInt16(0,256,!0),e$t._sysEndian=256===new Int16Array(e$d)[0]?"littleEndian":"bigEndian"}return e$t._sysEndian},e$t.BIG_ENDIAN="bigEndian",e$t.LITTLE_ENDIAN="littleEndian",e$t._sysEndian=null,e$t}(),e$U=function(){function e$W(){}return e$b(e$W,"laya.utils.CacheManager"),e$W.regCacheByFunction=function(e$d,e$t){var e$l;e$W.unRegCacheByFunction(e$d,e$t),e$l={tryDispose:e$d,getCacheList:e$t},e$W._cacheList.push(e$l)},e$W.unRegCacheByFunction=function(e$d,e$t){var e$l,e$k=0;for(e$l=e$W._cacheList.length,e$k=0;e$k<e$l;e$k++)if(e$W._cacheList[e$k].tryDispose==e$d&&e$W._cacheList[e$k].getCacheList==e$t)return void e$W._cacheList.splice(e$k,1)},e$W.forceDispose=function(){var e$d=0,e$t=e$W._cacheList.length;for(e$d=0;e$d<e$t;e$d++)e$W._cacheList[e$d].tryDispose(!0)},e$W.beginCheck=function(e$d){void 0===e$d&&(e$d=15e3),e$q.timer.loop(e$d,null,e$W._checkLoop)},e$W.stopCheck=function(){e$q.timer.clear(null,e$W._checkLoop)},e$W._checkLoop=function(){var e$d=e$W._cacheList;if(!(e$d.length<1)){var e$t,e$l=e$V.now(),e$k=0;for(e$t=e$k=e$d.length;0<e$k&&(e$d[e$W._index=++e$W._index%e$t].tryDispose(!1),!(e$V.now()-e$l>e$W.loopTimeLimit));)e$k--}},e$W.loopTimeLimit=2,e$W._cacheList=[],e$W._index=0,e$W}(),e$E=function(){function e$c(){}return e$b(e$c,"laya.utils.ClassUtils"),e$c.regClass=function(e$d,e$t){e$c._classMap[e$d]=e$t},e$c.getRegClass=function(e$d){return e$c._classMap[e$d]},e$c.getInstance=function(e$d){var e$t=e$c.getClass(e$d);return e$t?new e$t:(console.warn("[error] Undefined class:",e$d),null)},e$c.createByJson=function(e$d,e$t,e$l,e$k,e$W){"string"==typeof e$d&&(e$d=JSON.parse(e$d));var e$i=e$d.props;if(!e$t&&!(e$t=e$W?e$W.runWith(e$d):e$c.getInstance(e$i.runtime||e$d.type)))return null;var e$A=e$d.child;if(e$A)for(var e$B=0,e$o=e$A.length;e$B<e$o;e$B++){var e$I=e$A[e$B];if("render"!==e$I.props.name&&"render"!==e$I.props.renderType||!e$t._$set_itemRender)if("Graphic"==e$I.type)e$c.addGraphicsToSprite(e$I,e$t);else if(e$c.isDrawType(e$I.type))e$c.addGraphicToSprite(e$I,e$t,!0);else{var e$b=e$c.createByJson(e$I,null,e$l,e$k,e$W);"Script"==e$I.type?e$b.hasOwnProperty("owner")?e$b.owner=e$t:e$b.hasOwnProperty("target")&&(e$b.target=e$t):"mask"==e$I.props.renderType?e$t.mask=e$b:e$t.addChild(e$b)}else e$t.itemRender=e$I}if(e$i)for(var e$f in e$i){var e$J=e$i[e$f];"var"===e$f&&e$l?e$l[e$J]=e$t:e$J instanceof Array&&"function"==typeof e$t[e$f]?e$t[e$f].apply(e$t,e$J):e$t[e$f]=e$J}return e$k&&e$d.customProps&&e$k.runWith([e$t,e$d]),e$t.created&&e$t.created(),e$t},e$c.addGraphicsToSprite=function(e$d,e$t){var e$l;if((e$l=e$d.child)&&!(e$l.length<1)){var e$k;e$k=e$c._getGraphicsFromSprite(e$d,e$t);var e$W=0,e$i=0;e$d.props&&(e$W=e$c._getObjVar(e$d.props,"x",0),e$i=e$c._getObjVar(e$d.props,"y",0)),0!=e$W&&0!=e$i&&e$k.translate(e$W,e$i);var e$A,e$B=0;for(e$A=e$l.length,e$B=0;e$B<e$A;e$B++)e$c._addGraphicToGraphics(e$l[e$B],e$k);0!=e$W&&0!=e$i&&e$k.translate(-e$W,-e$i)}},e$c.addGraphicToSprite=function(e$d,e$t,e$l){var e$k;void 0===e$l&&(e$l=!1),e$k=e$l?e$c._getGraphicsFromSprite(e$d,e$t):e$t.graphics,e$c._addGraphicToGraphics(e$d,e$k)},e$c._getGraphicsFromSprite=function(e$d,e$t){var e$l,e$k;if(!e$d||!e$d.props)return e$t.graphics;switch(e$k=e$d.props.renderType){case"hit":case"unHit":var e$W;e$t.hitArea||(e$t.hitArea=new e$s),(e$W=e$t.hitArea)[e$k]||(e$W[e$k]=new e$J),e$l=e$W[e$k]}return e$l||(e$l=e$t.graphics),e$l},e$c._getTransformData=function(e$d){var e$t;(e$d.hasOwnProperty("pivotX")||e$d.hasOwnProperty("pivotY"))&&(e$t=e$t||new e$S).translate(-e$c._getObjVar(e$d,"pivotX",0),-e$c._getObjVar(e$d,"pivotY",0));var e$l=e$c._getObjVar(e$d,"scaleX",1),e$k=e$c._getObjVar(e$d,"scaleY",1),e$W=e$c._getObjVar(e$d,"rotation",0);e$c._getObjVar(e$d,"skewX",0),e$c._getObjVar(e$d,"skewY",0);return 1==e$l&&1==e$k&&0==e$W||((e$t=e$t||new e$S).scale(e$l,e$k),e$t.rotate(.0174532922222222*e$W)),e$t},e$c._addGraphicToGraphics=function(e$d,e$t){var e$l,e$k;if((e$l=e$d.props)&&(e$k=e$c.DrawTypeDic[e$d.type])){var e$W,e$i;e$W=e$t;var e$A=e$c._getParams(e$l,e$k[1],e$k[2],e$k[3]);((e$i=e$c._tM)||1!=e$c._alpha)&&(e$W.save(),e$i&&e$W.transform(e$i),1!=e$c._alpha&&e$W.alpha(e$c._alpha)),e$W[e$k[0]].apply(e$W,e$A),(e$i||1!=e$c._alpha)&&e$W.restore()}},e$c._adptLineData=function(e$d){return e$d[2]=parseFloat(e$d[0])+parseFloat(e$d[2]),e$d[3]=parseFloat(e$d[1])+parseFloat(e$d[3]),e$d},e$c._adptTextureData=function(e$d){return e$d[0]=e$Bd.getRes(e$d[0]),e$d},e$c._adptLinesData=function(e$d){return e$d[2]=e$c._getPointListByStr(e$d[2]),e$d},e$c.isDrawType=function(e$d){return"Image"!=e$d&&e$c.DrawTypeDic.hasOwnProperty(e$d)},e$c._getParams=function(e$d,e$t,e$l,e$k){var e$W;void 0===e$l&&(e$l=0),(e$W=e$c._temParam).length=e$t.length;var e$i,e$A,e$B=0;for(e$i=e$t.length,e$B=0;e$B<e$i;e$B++)e$W[e$B]=e$c._getObjVar(e$d,e$t[e$B][0],e$t[e$B][1]);return e$c._alpha=e$c._getObjVar(e$d,"alpha",1),e$A=e$c._getTransformData(e$d),e$c._tM=e$A?(e$l||(e$l=0),e$A.translate(e$W[e$l],e$W[e$l+1]),e$W[e$l]=e$W[e$l+1]=0,e$A):null,e$k&&e$c[e$k]&&(e$W=e$c[e$k](e$W)),e$W},e$c._getPointListByStr=function(e$d){var e$t,e$l,e$k=0;for(e$l=(e$t=e$d.split(",")).length,e$k=0;e$k<e$l;e$k++)e$t[e$k]=parseFloat(e$t[e$k]);return e$t},e$c._getObjVar=function(e$d,e$t,e$l){return e$d.hasOwnProperty(e$t)?e$d[e$t]:e$l},e$c._temParam=[],e$c._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},e$c.getClass=function(e$d){var e$t=e$c._classMap[e$d]||e$d;return"string"==typeof e$t?e$q.__classmap[e$t]:e$t},e$c._tM=null,e$c._alpha=NaN,e$o(e$c,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),e$c}(),e$N=function(){function e$i(e$d){if(this._color=[],"string"==typeof e$d){null===(this.strColor=e$d)&&(e$d="#000000"),"#"==e$d.charAt(0)&&(e$d=e$d.substr(1));var e$t=e$d.length;if(3==e$t||4==e$t){for(var e$l="",e$k=0;e$k<e$t;e$k++)e$l+=e$d[e$k]+e$d[e$k];e$d=e$l}var e$W=this.numColor=parseInt(e$d,16);if(8==e$d.length)return void(this._color=[parseInt(e$d.substr(0,2),16)/255,((16711680&e$W)>>16)/255,((65280&e$W)>>8)/255,(255&e$W)/255])}else e$W=this.numColor=e$d,this.strColor=e$F.toHexColor(e$W);this._color=[((16711680&e$W)>>16)/255,((65280&e$W)>>8)/255,(255&e$W)/255,1],this._color.__id=++e$i._COLODID}return e$b(e$i,"laya.utils.Color"),e$i._initDefault=function(){for(var e$d in e$i._DEFAULT={},e$i._COLOR_MAP)e$i._SAVE[e$d]=e$i._DEFAULT[e$d]=new e$i(e$i._COLOR_MAP[e$d]);return e$i._DEFAULT},e$i._initSaveMap=function(){for(var e$d in e$i._SAVE_SIZE=0,e$i._SAVE={},e$i._DEFAULT)e$i._SAVE[e$d]=e$i._DEFAULT[e$d]},e$i.create=function(e$d){var e$t=e$i._SAVE[e$d+""];return null!=e$t?e$t:(e$i._SAVE_SIZE<1e3||e$i._initSaveMap(),e$i._SAVE[e$d+""]=new e$i(e$d))},e$i._SAVE={},e$i._SAVE_SIZE=0,e$i._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},e$i._DEFAULT=e$i._initDefault(),e$i._COLODID=1,e$i}(),e$u=(function(){function e$d(){this._values=[],this._keys=[]}e$b(e$d,"laya.utils.Dictionary");var e$t=e$d.prototype;e$t.set=function(e$d,e$t){var e$l=this.indexOf(e$d);0<=e$l?this._values[e$l]=e$t:(this._keys.push(e$d),this._values.push(e$t))},e$t.indexOf=function(e$d){var e$t=this._keys.indexOf(e$d);return 0<=e$t?e$t:(e$d="string"==typeof e$d?Number(e$d):"number"==typeof e$d?e$d.toString():e$d,this._keys.indexOf(e$d))},e$t.get=function(e$d){var e$t=this.indexOf(e$d);return e$t<0?null:this._values[e$t]},e$t.remove=function(e$d){var e$t=this.indexOf(e$d);return 0<=e$t&&(this._keys.splice(e$t,1),this._values.splice(e$t,1),!0)},e$t.clear=function(){this._values.length=0,this._keys.length=0},e$Y(0,e$t,"values",function(){return this._values}),e$Y(0,e$t,"keys",function(){return this._keys})}(),function(){function e$d(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}e$b(e$d,"laya.utils.Dragging");var e$t=e$d.prototype;return e$t.start=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){void 0===e$B&&(e$B=.92),this.clearTimer(),this.target=e$d,this.area=e$t,this.hasInertia=e$l,this.elasticDistance=e$t?e$k:0,this.elasticBackTime=e$W,this.data=e$i,this._disableMouseEvent=e$A,this.ratio=e$B,1!=e$d.globalScaleX||1!=e$d.globalScaleY?this._parent=e$d.parent:this._parent=e$q.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,e$q.stage.on("mouseup",this,this.onStageMouseUp),e$q.stage.on("mouseout",this,this.onStageMouseUp),e$q.timer.frameLoop(1,this,this.loop)},e$t.clearTimer=function(){e$q.timer.clear(this,this.loop),e$q.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},e$t.stop=function(){this._dragging&&(e$w.instance.disableMouseEvent=!1,e$q.stage.off("mouseup",this,this.onStageMouseUp),e$q.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},e$t.loop=function(){var e$d=this._parent.getMousePoint(),e$t=e$d.x,e$l=e$d.y,e$k=e$t-this._lastX,e$W=e$l-this._lastY;if(this._clickOnly){if(!(1<Math.abs(e$k*e$q.stage._canvasTransform.getScaleX())||1<Math.abs(e$W*e$q.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),e$w.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(e$k,e$W);0==e$k&&0==e$W||(this._lastX=e$t,this._lastY=e$l,this.target.x+=e$k*this._elasticRateX,this.target.y+=e$W*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},e$t.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var e$d=this.area.x-this.target.x;else e$d=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-e$d/this.elasticDistance),this.target.y<this.area.y)var e$t=this.area.y-this.target.y;else e$t=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-e$t/this.elasticDistance)}},e$t.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},e$t.onStageMouseUp=function(e$d){if(e$w.instance.disableMouseEvent=!1,e$q.stage.off("mouseup",this,this.onStageMouseUp),e$q.stage.off("mouseout",this,this.onStageMouseUp),e$q.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var e$t=this._offsets.length,e$l=Math.min(e$t,6),e$k=this._offsets.length-e$l,e$W=e$t-1;e$k<e$W;e$W--)this._offsetY+=this._offsets[e$W--],this._offsetX+=this._offsets[e$W];this._offsetX=this._offsetX/e$l*2,this._offsetY=this._offsetY/e$l*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),e$q.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},e$t.checkElastic=function(){var e$d=NaN,e$t=NaN;if(this.target.x<this.area.x?e$d=this.area.x:this.target.x>this.area.x+this.area.width&&(e$d=this.area.x+this.area.width),this.target.y<this.area.y?e$t=this.area.y:this.target.y>this.area.y+this.area.height&&(e$t=this.area.y+this.area.height),isNaN(e$d)&&isNaN(e$t))this.clear();else{var e$l={};isNaN(e$d)||(e$l.x=e$d),isNaN(e$t)||(e$l.y=e$t),this._tween=e$O.to(this.target,e$l,this.elasticBackTime,e$h.sineOut,e$e.create(this,this.clear),0,!1,!1)}},e$t.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(e$q.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},e$t.clear=function(){if(this.target){this.clearTimer();var e$d=this.target;this.target=null,this._parent=null,e$d.event("dragend",this.data)}},e$d}()),e$h=function(){function e$B(){}return e$b(e$B,"laya.utils.Ease"),e$B.linearNone=function(e$d,e$t,e$l,e$k){return e$l*e$d/e$k+e$t},e$B.linearIn=function(e$d,e$t,e$l,e$k){return e$l*e$d/e$k+e$t},e$B.linearInOut=function(e$d,e$t,e$l,e$k){return e$l*e$d/e$k+e$t},e$B.linearOut=function(e$d,e$t,e$l,e$k){return e$l*e$d/e$k+e$t},e$B.bounceIn=function(e$d,e$t,e$l,e$k){return e$l-e$B.bounceOut(e$k-e$d,0,e$l,e$k)+e$t},e$B.bounceInOut=function(e$d,e$t,e$l,e$k){return e$d<.5*e$k?.5*e$B.bounceIn(2*e$d,0,e$l,e$k)+e$t:.5*e$B.bounceOut(2*e$d-e$k,0,e$l,e$k)+.5*e$l+e$t},e$B.bounceOut=function(e$d,e$t,e$l,e$k){return(e$d/=e$k)<1/2.75?e$l*(7.5625*e$d*e$d)+e$t:e$d<2/2.75?e$l*(7.5625*(e$d-=1.5/2.75)*e$d+.75)+e$t:e$d<2.5/2.75?e$l*(7.5625*(e$d-=2.25/2.75)*e$d+.9375)+e$t:e$l*(7.5625*(e$d-=2.625/2.75)*e$d+.984375)+e$t},e$B.backIn=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$W&&(e$W=1.70158),e$l*(e$d/=e$k)*e$d*((e$W+1)*e$d-e$W)+e$t},e$B.backInOut=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$W&&(e$W=1.70158),(e$d/=.5*e$k)<1?.5*e$l*(e$d*e$d*((1+(e$W*=1.525))*e$d-e$W))+e$t:e$l/2*((e$d-=2)*e$d*((1+(e$W*=1.525))*e$d+e$W)+2)+e$t},e$B.backOut=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$W&&(e$W=1.70158),e$l*((e$d=e$d/e$k-1)*e$d*((e$W+1)*e$d+e$W)+1)+e$t},e$B.elasticIn=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A;return void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=0),0==e$d?e$t:1==(e$d/=e$k)?e$t+e$l:(e$i||(e$i=.3*e$k),e$A=!e$W||0<e$l&&e$W<e$l||e$l<0&&e$W<-e$l?(e$W=e$l,e$i/4):e$i/e$B.PI2*Math.asin(e$l/e$W),-e$W*Math.pow(2,10*(e$d-=1))*Math.sin((e$d*e$k-e$A)*e$B.PI2/e$i)+e$t)},e$B.elasticInOut=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A;return void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=0),0==e$d?e$t:2==(e$d/=.5*e$k)?e$t+e$l:(e$i||(e$i=e$k*(.3*1.5)),e$A=!e$W||0<e$l&&e$W<e$l||e$l<0&&e$W<-e$l?(e$W=e$l,e$i/4):e$i/e$B.PI2*Math.asin(e$l/e$W),e$d<1?e$W*Math.pow(2,10*(e$d-=1))*Math.sin((e$d*e$k-e$A)*e$B.PI2/e$i)*-.5+e$t:e$W*Math.pow(2,-10*(e$d-=1))*Math.sin((e$d*e$k-e$A)*e$B.PI2/e$i)*.5+e$l+e$t)},e$B.elasticOut=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A;return void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=0),0==e$d?e$t:1==(e$d/=e$k)?e$t+e$l:(e$i||(e$i=.3*e$k),e$A=!e$W||0<e$l&&e$W<e$l||e$l<0&&e$W<-e$l?(e$W=e$l,e$i/4):e$i/e$B.PI2*Math.asin(e$l/e$W),e$W*Math.pow(2,-10*e$d)*Math.sin((e$d*e$k-e$A)*e$B.PI2/e$i)+e$l+e$t)},e$B.strongIn=function(e$d,e$t,e$l,e$k){return e$l*(e$d/=e$k)*e$d*e$d*e$d*e$d+e$t},e$B.strongInOut=function(e$d,e$t,e$l,e$k){return(e$d/=.5*e$k)<1?.5*e$l*e$d*e$d*e$d*e$d*e$d+e$t:.5*e$l*((e$d-=2)*e$d*e$d*e$d*e$d+2)+e$t},e$B.strongOut=function(e$d,e$t,e$l,e$k){return e$l*((e$d=e$d/e$k-1)*e$d*e$d*e$d*e$d+1)+e$t},e$B.sineInOut=function(e$d,e$t,e$l,e$k){return.5*-e$l*(Math.cos(Math.PI*e$d/e$k)-1)+e$t},e$B.sineIn=function(e$d,e$t,e$l,e$k){return-e$l*Math.cos(e$d/e$k*e$B.HALF_PI)+e$l+e$t},e$B.sineOut=function(e$d,e$t,e$l,e$k){return e$l*Math.sin(e$d/e$k*e$B.HALF_PI)+e$t},e$B.quintIn=function(e$d,e$t,e$l,e$k){return e$l*(e$d/=e$k)*e$d*e$d*e$d*e$d+e$t},e$B.quintInOut=function(e$d,e$t,e$l,e$k){return(e$d/=.5*e$k)<1?.5*e$l*e$d*e$d*e$d*e$d*e$d+e$t:.5*e$l*((e$d-=2)*e$d*e$d*e$d*e$d+2)+e$t},e$B.quintOut=function(e$d,e$t,e$l,e$k){return e$l*((e$d=e$d/e$k-1)*e$d*e$d*e$d*e$d+1)+e$t},e$B.quartIn=function(e$d,e$t,e$l,e$k){return e$l*(e$d/=e$k)*e$d*e$d*e$d+e$t},e$B.quartInOut=function(e$d,e$t,e$l,e$k){return(e$d/=.5*e$k)<1?.5*e$l*e$d*e$d*e$d*e$d+e$t:.5*-e$l*((e$d-=2)*e$d*e$d*e$d-2)+e$t},e$B.quartOut=function(e$d,e$t,e$l,e$k){return-e$l*((e$d=e$d/e$k-1)*e$d*e$d*e$d-1)+e$t},e$B.cubicIn=function(e$d,e$t,e$l,e$k){return e$l*(e$d/=e$k)*e$d*e$d+e$t},e$B.cubicInOut=function(e$d,e$t,e$l,e$k){return(e$d/=.5*e$k)<1?.5*e$l*e$d*e$d*e$d+e$t:.5*e$l*((e$d-=2)*e$d*e$d+2)+e$t},e$B.cubicOut=function(e$d,e$t,e$l,e$k){return e$l*((e$d=e$d/e$k-1)*e$d*e$d+1)+e$t},e$B.quadIn=function(e$d,e$t,e$l,e$k){return e$l*(e$d/=e$k)*e$d+e$t},e$B.quadInOut=function(e$d,e$t,e$l,e$k){return(e$d/=.5*e$k)<1?.5*e$l*e$d*e$d+e$t:.5*-e$l*(--e$d*(e$d-2)-1)+e$t},e$B.quadOut=function(e$d,e$t,e$l,e$k){return-e$l*(e$d/=e$k)*(e$d-2)+e$t},e$B.expoIn=function(e$d,e$t,e$l,e$k){return 0==e$d?e$t:e$l*Math.pow(2,10*(e$d/e$k-1))+e$t-.001*e$l},e$B.expoInOut=function(e$d,e$t,e$l,e$k){return 0==e$d?e$t:e$d==e$k?e$t+e$l:(e$d/=.5*e$k)<1?.5*e$l*Math.pow(2,10*(e$d-1))+e$t:.5*e$l*(2-Math.pow(2,-10*--e$d))+e$t},e$B.expoOut=function(e$d,e$t,e$l,e$k){return e$d==e$k?e$t+e$l:e$l*(1-Math.pow(2,-10*e$d/e$k))+e$t},e$B.circIn=function(e$d,e$t,e$l,e$k){return-e$l*(Math.sqrt(1-(e$d/=e$k)*e$d)-1)+e$t},e$B.circInOut=function(e$d,e$t,e$l,e$k){return(e$d/=.5*e$k)<1?.5*-e$l*(Math.sqrt(1-e$d*e$d)-1)+e$t:.5*e$l*(Math.sqrt(1-(e$d-=2)*e$d)+1)+e$t},e$B.circOut=function(e$d,e$t,e$l,e$k){return e$l*Math.sqrt(1-(e$d=e$d/e$k-1)*e$d)+e$t},e$B.HALF_PI=.5*Math.PI,e$B.PI2=2*Math.PI,e$B}(),e$s=function(){function e$f(){this._hit=null,this._unHit=null}e$b(e$f,"laya.utils.HitArea");var e$d=e$f.prototype;return e$d.isHit=function(e$d,e$t){return!!e$f.isHitGraphic(e$d,e$t,this.hit)&&!e$f.isHitGraphic(e$d,e$t,this.unHit)},e$d.contains=function(e$d,e$t){return this.isHit(e$d,e$t)},e$Y(0,e$d,"hit",function(){return this._hit||(this._hit=new e$J),this._hit},function(e$d){this._hit=e$d}),e$Y(0,e$d,"unHit",function(){return this._unHit||(this._unHit=new e$J),this._unHit},function(e$d){this._unHit=e$d}),e$f.isHitGraphic=function(e$d,e$t,e$l){if(!e$l)return!1;var e$k;if(!(e$k=e$l.cmds)&&e$l._one&&((e$k=e$f._cmds).length=1,e$k[0]=e$l._one),!e$k)return!1;var e$W,e$i,e$A=0;for(e$W=e$k.length,e$A=0;e$A<e$W;e$A++)if(e$i=e$k[e$A]){var e$B=e$K._context;switch(e$i.callee){case e$B._translate:case 6:e$d-=e$i[0],e$t-=e$i[1]}if(e$f.isHitCmd(e$d,e$t,e$i))return!0}return!1},e$f.isHitCmd=function(e$d,e$t,e$l){if(!e$l)return!1;var e$k=e$K._context,e$W=!1;switch(e$l.callee){case e$k._drawRect:case 13:e$f._rec.setTo(e$l[0],e$l[1],e$l[2],e$l[3]),e$W=e$f._rec.contains(e$d,e$t);break;case e$k._drawCircle:case e$k._fillCircle:case 14:e$W=(e$d-=e$l[0])*e$d+(e$t-=e$l[1])*e$t<e$l[2]*e$l[2];break;case e$k._drawPoly:case 18:e$d-=e$l[0],e$t-=e$l[1],e$W=e$f.ptInPolygon(e$d,e$t,e$l[2])}return e$W},e$f.ptInPolygon=function(e$d,e$t,e$l){var e$k;(e$k=e$f._ptPoint).setTo(e$d,e$t);var e$W,e$i=0,e$A=NaN,e$B=NaN,e$o=NaN,e$I=NaN;e$W=e$l.length;for(var e$b=0;e$b<e$W;e$b+=2){if(e$A=e$l[e$b],e$B=e$l[e$b+1],e$o=e$l[(e$b+2)%e$W],e$B!=(e$I=e$l[(e$b+3)%e$W]))if(!(e$k.y<Math.min(e$B,e$I)))if(!(e$k.y>=Math.max(e$B,e$I)))(e$k.y-e$B)*(e$o-e$A)/(e$I-e$B)+e$A>e$k.x&&e$i++}return e$i%2==1},e$f._cmds=[],e$o(e$f,["_rec",function(){return this._rec=new e$$},"_ptPoint",function(){return this._ptPoint=new e$L}]),e$f}(),e$P=(function(){function e$W(e$d,e$t,e$l,e$k){this.char=e$d,this.charNum=e$d.charCodeAt(0),this._x=this._y=0,this.width=e$t,this.height=e$l,this.style=e$k,this.isWord=!e$W._isWordRegExp.test(e$d)}e$b(e$W,"laya.utils.HTMLChar");var e$d=e$W.prototype;e$q.imps(e$d,{"laya.display.ILayout":!0}),e$d.setSprite=function(e$d){this._sprite=e$d},e$d.getSprite=function(){return this._sprite},e$d._isChar=function(){return!0},e$d._getCSSStyle=function(){return this.style},e$Y(0,e$d,"width",function(){return this._w},function(e$d){this._w=e$d}),e$Y(0,e$d,"x",function(){return this._x},function(e$d){this._sprite&&(this._sprite.x=e$d),this._x=e$d}),e$Y(0,e$d,"y",function(){return this._y},function(e$d){this._sprite&&(this._sprite.y=e$d),this._y=e$d}),e$Y(0,e$d,"height",function(){return this._h},function(e$d){this._h=e$d}),e$W._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function e$t(){}e$b(e$t,"laya.utils.Log"),e$t.enable=function(){e$t._logdiv||(e$t._logdiv=e$V.window.document.createElement("div"),e$V.window.document.body.appendChild(e$t._logdiv),e$t._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},e$t.toggle=function(){var e$d=e$t._logdiv.style;"1px"==e$d.width?e$d.width=e$d.height="50%":e$d.width=e$d.height="1px"},e$t.print=function(e$d){e$t._logdiv&&(e$t.maxCount<=e$t._count&&e$t.clear(),e$t._count++,e$t._logdiv.innerText+=e$d+"\n",e$t._logdiv.scrollTop=e$t._logdiv.scrollHeight)},e$t.clear=function(){e$t._logdiv.innerText="",e$t._count=0},e$t._logdiv=null,e$t._count=0,e$t.maxCount=20}(),function(){function e$t(){}e$b(e$t,"laya.utils.Mouse"),e$Y(1,e$t,"cursor",function(){return e$t._style.cursor},function(e$d){e$t._style.cursor=e$d}),e$t.hide=function(){"none"!=e$t.cursor&&(e$t._preCursor=e$t.cursor,e$t.cursor="none")},e$t.show=function(){"none"==e$t.cursor&&(e$t.cursor=e$t._preCursor?e$t._preCursor:"auto")},e$t._preCursor=null,e$o(e$t,["_style",function(){return this._style=e$V.document.body.style}])}(),function(){function e$i(){}return e$b(e$i,"laya.utils.Pool"),e$i.getPoolBySign=function(e$d){return e$i._poolDic[e$d]||(e$i._poolDic[e$d]=[])},e$i.clearBySign=function(e$d){e$i._poolDic[e$d]&&(e$i._poolDic[e$d].length=0)},e$i.recover=function(e$d,e$t){e$t.__InPool||(e$t.__InPool=!0,e$i.getPoolBySign(e$d).push(e$t))},e$i.getItemByClass=function(e$d,e$t){var e$l=e$i.getPoolBySign(e$d),e$k=e$l.length?e$l.pop():new e$t;return e$k.__InPool=!1,e$k},e$i.getItemByCreateFun=function(e$d,e$t,e$l){var e$k=e$i.getPoolBySign(e$d),e$W=e$k.length?e$k.pop():e$t.call(e$l);return e$W.__InPool=!1,e$W},e$i.getItem=function(e$d){var e$t=e$i.getPoolBySign(e$d),e$l=e$t.length?e$t.pop():null;return e$l&&(e$l.__InPool=!1),e$l},e$i._poolDic={},e$i.InPoolSign="__InPool",e$i}()),e$X=function(){function e$o(){}return e$b(e$o,"laya.utils.Stat"),e$Y(1,e$o,"onclick",null,function(e$d){e$o._sp&&e$o._sp.on("click",e$o._sp,e$d),e$o._canvas&&(e$o._canvas.source.onclick=e$d,e$o._canvas.source.style.pointerEvents="")}),e$o.show=function(e$d,e$t,e$l){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),!e$K.isConchApp||e$K.isConchWebGL){if(e$K.isConchWebGL||e$V.onMiniGame||e$V.onLimixiu||(e$o._useCanvas=!0),e$o._show=!0,e$o._fpsData.length=60,e$o._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},e$o._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},e$o._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},e$o._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},e$K.isWebGL)if(e$o._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},e$K.is3DMode){if(e$o._view[0].title="FPS(3D)",e$o._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},e$o._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},e$o._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==e$l){var e$k=8;e$o._view[e$k++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},e$o._view[e$k++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},e$o._view[e$k++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},e$o._view[e$k++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},e$o._view[e$k++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},e$o._view[e$k++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},e$o._view[e$k++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},e$o._view[e$k++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},e$o._view[e$k++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==e$l){e$k=8;e$o._view[e$k++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},e$o._view[e$k++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},e$o._view[e$k++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},e$o._view[e$k++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},e$o._view[e$k++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},e$o._view[e$k++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},e$o._view[e$k++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else e$o._view[0].title="FPS(WebGL)",e$o._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else e$o._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};e$o._useCanvas?e$o.createUIPre(e$d,e$t):e$o.createUI(e$d,e$t),e$o.enable()}else e$V.window.conch.showFPS&&e$V.window.conch.showFPS(e$d,e$t)},e$o.createUIPre=function(e$d,e$t){var e$l=e$V.pixelRatio;e$o._width=170*e$l,e$o._vx=75*e$l,e$o._height=e$l*(12*e$o._view.length+3*e$l)+4,e$o._fontSize=12*e$l;for(var e$k=0;e$k<e$o._view.length;e$k++)e$o._view[e$k].x=4,e$o._view[e$k].y=e$k*e$o._fontSize+2*e$l;e$o._canvas||((e$o._canvas=new e$gd("2D")).size(e$o._width,e$o._height),(e$o._ctx=e$o._canvas.getContext("2d")).textBaseline="top",e$o._ctx.font=e$o._fontSize+"px Sans-serif",e$o._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+e$d+"px;top:"+e$t+"px;width:"+e$o._width/e$l+"px;height:"+e$o._height/e$l+"px;"),e$o._first=!0,e$o.loop(),e$o._first=!1,e$V.container.appendChild(e$o._canvas.source)},e$o.createUI=function(e$d,e$t){var e$l=e$o._sp,e$k=e$V.pixelRatio;e$l||(e$l=new e$fd,(e$o._leftText=new e$Dd).pos(5,5),e$o._leftText.color="#ffffff",e$l.addChild(e$o._leftText),(e$o._txt=new e$Dd).pos(80*e$k,5),e$o._txt.color="#ffffff",e$l.addChild(e$o._txt),e$o._sp=e$l),e$l.pos(e$d,e$t);for(var e$W="",e$i=0;e$i<e$o._view.length;e$i++){e$W+=e$o._view[e$i].title+"\n"}e$o._leftText.text=e$W;var e$A=170*e$k,e$B=e$k*(12*e$o._view.length+3*e$k)+4;e$o._txt.fontSize=e$o._fontSize*e$k,e$o._leftText.fontSize=e$o._fontSize*e$k,e$l.size(e$A,e$B),e$l.graphics.clear(),e$l.graphics.setAlpha(.5),e$l.graphics.drawRect(0,0,e$A,e$B,"#999999"),e$l.graphics.setAlpha(1),e$o.loop()},e$o.enable=function(){e$q.timer.frameLoop(1,e$o,e$o.loop)},e$o.hide=function(){e$o._show=!1,e$q.timer.clear(e$o,e$o.loop),e$o._canvas&&e$V.removeElement(e$o._canvas.source)},e$o.clear=function(){e$o.trianglesFaces=e$o.drawCall=e$o.shaderCall=e$o.spriteCount=e$o.spriteRenderUseCacheCount=e$o.treeNodeCollision=e$o.treeSpriteCollision=e$o.canvasNormal=e$o.canvasBitmap=e$o.canvasReCache=0},e$o.loop=function(){e$o._count++;var e$d=e$V.now();if(!(e$d-e$o._timer<1e3)){var e$t=e$o._count;if(e$o.FPS=Math.round(1e3*e$t/(e$d-e$o._timer)),e$o._show){e$o.trianglesFaces=Math.round(e$o.trianglesFaces/e$t),e$o.spriteCount=e$o._useCanvas?(e$o.drawCall=Math.round(e$o.drawCall/e$t)-2,e$o.shaderCall=Math.round(e$o.shaderCall/e$t),Math.round(e$o.spriteCount/e$t)-1):(e$o.drawCall=Math.round(e$o.drawCall/e$t)-2,e$o.shaderCall=Math.round(e$o.shaderCall/e$t)-4,Math.round(e$o.spriteCount/e$t)-4),e$o.spriteRenderUseCacheCount=Math.round(e$o.spriteRenderUseCacheCount/e$t),e$o.canvasNormal=Math.round(e$o.canvasNormal/e$t),e$o.canvasBitmap=Math.round(e$o.canvasBitmap/e$t),e$o.canvasReCache=Math.ceil(e$o.canvasReCache/e$t),e$o.treeNodeCollision=Math.round(e$o.treeNodeCollision/e$t),e$o.treeSpriteCollision=Math.round(e$o.treeSpriteCollision/e$t);var e$l=0<e$o.FPS?Math.floor(1e3/e$o.FPS).toString():" ";e$o._fpsStr=e$o.FPS+(e$o.renderSlow?" slow":"")+" "+e$l,e$o._spriteStr=e$o.spriteCount+(e$o.spriteRenderUseCacheCount?"/"+e$o.spriteRenderUseCacheCount:""),e$o._canvasStr=e$o.canvasReCache+"/"+e$o.canvasNormal+"/"+e$o.canvasBitmap,e$o.currentMemorySize=e$y.systemResourceManager.memorySize,e$o._useCanvas?e$o.renderInfoPre():e$o.renderInfo(),e$o.clear()}e$o._count=0,e$o._timer=e$d}},e$o.renderInfoPre=function(){if(e$o._canvas){var e$d=e$o._ctx;e$d.clearRect(e$o._first?0:e$o._vx,0,e$o._width,e$o._height);for(var e$t=e$K.WebGL.mainContext,e$l=0;e$l<e$o._view.length;e$l++){var e$k=e$o._view[e$l];e$o._first&&(e$d.fillStyle="white",e$d.fillText(e$k.title,e$k.x,e$k.y,null,null,null)),e$d.fillStyle=e$k.color;var e$W=-1;if((e$k=e$o._view[e$l]).varying){if(e$t)switch(e$k.varying){case 1:e$W=e$t.getParameter(e$t[e$k.value]);break;case 2:e$W=e$t.getExtension(e$k.value)}}else e$W=e$o[e$k.value];"M"==e$k.units&&(e$W=Math.floor(e$W/1048576*100)/100+" M"),"K"==e$k.units&&(e$W=Math.floor(e$W/1024*100)/100+" K"),"string"==e$k.units&&(e$W=e$W.match(/\d+\.?\d/i)),e$d.fillText(e$W+"",e$k.x+e$o._vx,e$k.y,null,null,null)}}},e$o.renderInfo=function(){for(var e$d="",e$t=e$K.WebGL.mainContext,e$l=0;e$l<e$o._view.length;e$l++){var e$k=e$o._view[e$l],e$W=-1;if(e$k.varying){if(e$t)switch(e$k.varying){case 1:e$W=e$t.getParameter(e$t[e$k.value]);break;case 2:e$W=e$t.getExtension(e$k.value)}}else e$W=e$o[e$k.value];"M"==e$k.units&&(e$W=Math.floor(e$W/1048576*100)/100+" M"),"K"==e$k.units&&(e$W=Math.floor(e$W/1024*100)/100+" K"),"string"==e$k.units&&(e$W=e$W.match(/\d+\.?\d/i)),e$d+=e$W+"\n"}e$o._txt.text=e$d},e$o.FPS=0,e$o.loopCount=0,e$o.shaderCall=0,e$o.drawCall=0,e$o.trianglesFaces=0,e$o.spriteCount=0,e$o.spriteRenderUseCacheCount=0,e$o.treeNodeCollision=0,e$o.treeSpriteCollision=0,e$o.canvasNormal=0,e$o.canvasBitmap=0,e$o.canvasReCache=0,e$o.renderSlow=!1,e$o.currentMemorySize=0,e$o._fpsStr=null,e$o._canvasStr=null,e$o._spriteStr=null,e$o._fpsData=[],e$o._timer=0,e$o._count=0,e$o._view=[],e$o._fontSize=12,e$o._txt=null,e$o._leftText=null,e$o._sp=null,e$o._show=!1,e$o._useCanvas=!1,e$o._canvas=null,e$o._ctx=null,e$o._first=!1,e$o._vx=NaN,e$o._width=0,e$o._height=100,e$o}(),e$m=(function(){function e$d(){this._strsToID={},this._idToStrs=[],this._length=0}e$b(e$d,"laya.utils.StringKey");var e$t=e$d.prototype;e$t.add=function(e$d){var e$t=this._strsToID[e$d];return null!=e$t?e$t:(this._idToStrs[this._length]=e$d,this._strsToID[e$d]=this._length++)},e$t.getID=function(e$d){var e$t=this._strsToID[e$d];return null==e$t?-1:e$t},e$t.getName=function(e$d){var e$t=this._idToStrs[e$d];return null==e$t?void 0:e$t}}(),function(){var e$I;function e$d(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}e$b(e$d,"laya.utils.Timer");var e$t=e$d.prototype;return e$t._init=function(){e$q.timer&&e$q.timer.frameLoop(1,this,this._update)},e$t._now=function(){return Date.now()},e$t._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var e$d=this.currFrame=this.currFrame+this.scale,e$t=this._now();this._delta=(e$t-this._lastTimer)*this.scale;var e$l=this.currTimer=this.currTimer+this._delta;e$q.isDebug&&6e4<Math.abs(e$t-this._lastTimer)&&console.error("系统时间错误！"+(e$t-this._lastTimer)),this._lastTimer=e$t;var e$k=this._handlers;for(e$A=this._count=0,e$B=e$k.length;e$A<e$B;e$A++)if(null!==(e$o=e$k[e$A]).method){var e$W=e$o.userFrame?e$d:e$l;if(e$W>=e$o.exeTime)if(e$o.repeat)if(e$o.jumpFrame)for(;e$W>=e$o.exeTime;)e$o.exeTime+=e$o.delay,e$o.run(!1);else e$o.exeTime+=e$o.delay,e$o.run(!1),e$W>e$o.exeTime&&(e$o.exeTime+=Math.ceil((e$W-e$o.exeTime)/e$o.delay)*e$o.delay);else e$o.run(!0)}else this._count++;(30<this._count||e$d%200==0)&&this._clearHandlers();for(var e$i=this._laters,e$A=0,e$B=e$i.length-1;e$A<=e$B;e$A++){var e$o=e$i[e$A];this._isIgnoreRecover(e$o)||(null!==e$o.method&&(delete this._map[e$o.key],e$o.run(!1)),this._recoverHandler(e$o)),e$A===e$B&&(e$B=e$i.length-1)}e$i.length=0}},e$t._clearHandlers=function(){for(var e$d=this._handlers,e$t=0,e$l=e$d.length;e$t<e$l;e$t++){var e$k=e$d[e$t];null!==e$k.method?this._temp.push(e$k):this._isIgnoreRecover(e$k)?this._temp.push(e$k):this._recoverHandler(e$k)}this._handlers=this._temp,this._temp=e$d,this._temp.length=0},e$t._recoverHandler=function(e$d){this._map[e$d.key]==e$d&&delete this._map[e$d.key],e$d.recover()},e$t._create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){if(!e$l)return e$W.apply(e$k,e$i),null;if(e$A){var e$o=this._getHandler(e$k,e$W);if(e$o)return e$o.repeat=e$t,e$o.userFrame=e$d,e$o.delay=e$l,e$o.ignoreRecover=e$B,e$o.caller=e$k,e$o.method=e$W,e$o.args=e$i,e$o.exeTime=e$l+(e$d?this.currFrame:this.currTimer+this._now()-this._lastTimer),e$o}return(e$o=e$I.create()).repeat=e$t,e$o.userFrame=e$d,e$o.delay=e$l,e$o.ignoreRecover=e$B,e$o.caller=e$k,e$o.method=e$W,e$o.args=e$i,e$o.exeTime=e$l+(e$d?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(e$o),this._handlers.push(e$o),e$o},e$t._indexHandler=function(e$d){var e$t=e$d.caller,e$l=e$d.method,e$k=e$t?e$t.$_GID||(e$t.$_GID=e$F.getGID()):0,e$W=e$l.$_TID||(e$l.$_TID=this._mid++);e$d.key=e$k+"_"+e$W,this._map[e$d.key]=e$d},e$t.once=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=!0),this._create(!1,!1,e$d,e$t,e$l,e$k,e$W,!1)},e$t.loop=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){void 0===e$W&&(e$W=!0),void 0===e$i&&(e$i=!1),void 0===e$A&&(e$A=!1);var e$B=this._create(!1,!0,e$d,e$t,e$l,e$k,e$W,e$A);e$B&&(e$B.jumpFrame=e$i)},e$t.frameOnce=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=!0),this._create(!0,!1,e$d,e$t,e$l,e$k,e$W,!1)},e$t.frameLoop=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$W&&(e$W=!0),void 0===e$i&&(e$i=!1),this._create(!0,!0,e$d,e$t,e$l,e$k,e$W,e$i)},e$t.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+e$I._freeCount},e$t.clear=function(e$d,e$t){var e$l=this._getHandler(e$d,e$t);return!(!e$l||this._isIgnoreRecover(e$l))&&(delete this._map[e$l.key],e$l.key=null,e$l.clear(),!0)},e$t.clearAll=function(e$d){if(e$d)for(var e$t=0,e$l=this._handlers.length;e$t<e$l;e$t++){var e$k=this._handlers[e$t];e$k.caller===e$d&&(this._isIgnoreRecover(e$k)||(delete this._map[e$k.key],e$k.key=null,e$k.clear()))}},e$t._getHandler=function(e$d,e$t){var e$l=e$d?e$d.$_GID||(e$d.$_GID=e$F.getGID()):0,e$k=e$t.$_TID||(e$t.$_TID=this._mid++);return this._map[e$l+"_"+e$k]},e$t._isIgnoreRecover=function(e$d){if(e$d.ignoreRecover||e$d.caller&&"IgnoreRecover"==e$d.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var e$t="";try{arguments.propertyIsEnumerable.caller}catch(e$d){e$t=e$d.stack}e$q.recordError("报错：核心定时器销毁忽略  "+e$t)}return!0}return!1},e$t.hasHandler=function(e$d,e$t){return this._map[e$d.$_GID+"_"+e$t.$_TID]},e$t.callLater=function(e$d,e$t,e$l){if(null==this._getHandler(e$d,e$t)){var e$k=e$I.create();e$k.caller=e$d,e$k.method=e$t,e$k.args=e$l,this._indexHandler(e$k),this._laters.push(e$k)}},e$t.runCallLater=function(e$d,e$t){var e$l=this._getHandler(e$d,e$t);e$l&&null!=e$l.method&&(this._isIgnoreRecover(e$l)||(delete this._map[e$l.key],e$l.run(!0)))},e$t.runTimer=function(e$d,e$t){this.runCallLater(e$d,e$t)},e$Y(0,e$t,"delta",function(){return this._delta}),e$d.__init$=function(){e$I=function(){function e$t(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}e$b(e$t,"");var e$d=e$t.prototype;return e$d.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},e$d.recover=function(){this.clear(),this.args=e$t._freeHandler,e$t._freeHandler=this,e$t._freeCount++},e$d.run=function(e$d){var e$t=this.caller;if(e$t&&e$t.destroyed)return this.clear();var e$l=this.method,e$k=this.args;e$d&&this.clear(),null!=e$l&&(e$k?e$l.apply(e$t,e$k):e$l.call(e$t))},e$t._freeHandler=null,e$t._freeCount=0,e$t.create=function(){var e$d=e$t._freeHandler;return e$d?(e$t._freeHandler=e$d.args,--e$t._freeCount,e$d.args=null,e$d):new e$t},e$t}()},e$d}()),e$O=function(){function e$f(){this.gid=0}e$b(e$f,"laya.utils.Tween");var e$d=e$f.prototype;return e$d.to=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){return void 0===e$i&&(e$i=0),void 0===e$A&&(e$A=!1),this._create(e$d,e$t,e$l,e$k,e$W,e$i,e$A,!0,!1,!0)},e$d.from=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){return void 0===e$i&&(e$i=0),void 0===e$A&&(e$A=!1),this._create(e$d,e$t,e$l,e$k,e$W,e$i,e$A,!1,!1,!0)},e$d._create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){if(!e$d)throw new Error("Tween:target is null");this._target=e$d,this._duration=e$l,this._ease=e$k||e$t.ease||e$f.easeNone,this._complete=e$W||e$t.complete,this._delay=e$i,this._props=[],this._usedTimer=0,this._startTimer=e$V.now(),this._usedPool=e$o,this._delayParam=null,this.update=e$t.update;var e$b=e$d.$_GID||(e$d.$_GID=e$F.getGID());return e$f.tweenMap[e$b]?(e$A&&e$f.clearTween(e$d),e$f.tweenMap[e$b].push(this)):e$f.tweenMap[e$b]=[this],e$I?e$i<=0?this.firstStart(e$d,e$t,e$B):(this._delayParam=[e$d,e$t,e$B],e$q.scaleTimer.once(e$i,this,this.firstStart,this._delayParam)):this._initProps(e$d,e$t,e$B),this},e$d.firstStart=function(e$d,e$t,e$l){this._delayParam=null,e$d.destroyed?this.clear():(this._initProps(e$d,e$t,e$l),this._beginLoop())},e$d._initProps=function(e$d,e$t,e$l){for(var e$k in e$t)if("number"==typeof e$d[e$k]){var e$W=e$l?e$d[e$k]:e$t[e$k],e$i=e$l?e$t[e$k]:e$d[e$k];this._props.push([e$k,e$W,e$i-e$W]),e$l||(e$d[e$k]=e$W)}},e$d._beginLoop=function(){e$q.scaleTimer.frameLoop(1,this,this._doEase)},e$d._doEase=function(){this._updateEase(e$V.now())},e$d._updateEase=function(e$d){var e$t=this._target;if(e$t){if(e$t.destroyed)return e$f.clearTween(e$t);var e$l=this._usedTimer=e$d-this._startTimer-this._delay;if(!(e$l<0)){if(e$l>=this._duration)return this.complete();for(var e$k=0<e$l?this._ease(e$l,0,1,this._duration):0,e$W=this._props,e$i=0,e$A=e$W.length;e$i<e$A;e$i++){var e$B=e$W[e$i];e$t[e$B[0]]=e$B[1]+e$k*e$B[2]}this.update&&this.update.run()}}},e$d.complete=function(){if(this._target){e$q.scaleTimer.runTimer(this,this.firstStart);for(var e$d=this._target,e$t=this._props,e$l=this._complete,e$k=0,e$W=e$t.length;e$k<e$W;e$k++){var e$i=e$t[e$k];e$d[e$i[0]]=e$i[1]+e$i[2]}this.update&&this.update.run(),this.clear(),e$l&&e$l.run()}},e$d.pause=function(){e$q.scaleTimer.clear(this,this._beginLoop),e$q.scaleTimer.clear(this,this._doEase),e$q.scaleTimer.clear(this,this.firstStart);var e$d;(e$d=e$V.now()-this._startTimer-this._delay)<0&&(this._usedTimer=e$d)},e$d.setStartTime=function(e$d){this._startTimer=e$d},e$d.clear=function(){this._target&&(this._remove(),this._clear())},e$d._clear=function(){this.pause(),e$q.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,e$P.recover("tween",this))},e$d.recover=function(){this._usedPool=!0,this._clear()},e$d._remove=function(){var e$d=e$f.tweenMap[this._target.$_GID];if(e$d)for(var e$t=0,e$l=e$d.length;e$t<e$l;e$t++)if(e$d[e$t]===this){e$d.splice(e$t,1);break}},e$d.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=e$V.now(),this._delayParam)e$q.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var e$d=this._props,e$t=0,e$l=e$d.length;e$t<e$l;e$t++){var e$k=e$d[e$t];this._target[e$k[0]]=e$k[1]}e$q.scaleTimer.once(this._delay,this,this._beginLoop)}},e$d.resume=function(){this._usedTimer>=this._duration||(this._startTimer=e$V.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?e$q.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},e$Y(0,e$d,"progress",null,function(e$d){var e$t=e$d*this._duration;this._startTimer=e$V.now()-this._delay-e$t}),e$f.to=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){return void 0===e$i&&(e$i=0),void 0===e$A&&(e$A=!1),void 0===e$B&&(e$B=!0),e$P.getItemByClass("tween",e$f)._create(e$d,e$t,e$l,e$k,e$W,e$i,e$A,!0,e$B,!0)},e$f.from=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){return void 0===e$i&&(e$i=0),void 0===e$A&&(e$A=!1),void 0===e$B&&(e$B=!0),e$P.getItemByClass("tween",e$f)._create(e$d,e$t,e$l,e$k,e$W,e$i,e$A,!1,e$B,!0)},e$f.clearAll=function(e$d){if(e$d&&e$d.$_GID){var e$t=e$f.tweenMap[e$d.$_GID];if(e$t){for(var e$l=0,e$k=e$t.length;e$l<e$k;e$l++)e$t[e$l]._clear();e$t.length=0}}},e$f.clear=function(e$d){e$d.clear()},e$f.clearTween=function(e$d){e$f.clearAll(e$d)},e$f.easeNone=function(e$d,e$t,e$l,e$k){return e$l*e$d/e$k+e$t},e$f.tweenMap={},e$f}(),e$F=function(){function e$B(){}return e$b(e$B,"laya.utils.Utils"),e$B.toRadian=function(e$d){return e$d*e$B._pi2},e$B.toAngle=function(e$d){return e$d*e$B._pi},e$B.toHexColor=function(e$d){if(e$d<0||isNaN(e$d))return null;for(var e$t=e$d.toString(16);e$t.length<6;)e$t="0"+e$t;return"#"+e$t},e$B.getGID=function(){return e$B._gid++},e$B.concatArray=function(e$d,e$t){if(!e$t)return e$d;if(!e$d)return e$t;var e$l=0,e$k=e$t.length;for(e$l=0;e$l<e$k;e$l++)e$d.push(e$t[e$l]);return e$d},e$B.clearArray=function(e$d){return e$d&&(e$d.length=0),e$d},e$B.copyArray=function(e$d,e$t){if(e$d||(e$d=[]),!e$t)return e$d;e$d.length=e$t.length;var e$l=0,e$k=e$t.length;for(e$l=0;e$l<e$k;e$l++)e$d[e$l]=e$t[e$l];return e$d},e$B.getGlobalRecByPoints=function(e$d,e$t,e$l,e$k,e$W){var e$i,e$A;return e$i=new e$L(e$t,e$l),e$i=e$d.localToGlobal(e$i),e$A=new e$L(e$k,e$W),e$A=e$d.localToGlobal(e$A),e$$._getWrapRec([e$i.x,e$i.y,e$A.x,e$A.y])},e$B.getGlobalPosAndScale=function(e$d){return e$B.getGlobalRecByPoints(e$d,0,0,1,1)},e$B.bind=function(e$d,e$t){return e$d.bind(e$t)},e$B.measureText=function(e$d,e$t){return e$r.measureText(e$d,e$t)},e$B.contextMeasureText=function(e$d){var e$t=e$V.context.measureText(e$d);return e$t||(e$t={width:16,height:16}),e$t},e$B.updateOrder=function(e$d){if(!e$d||e$d.length<2)return!1;for(var e$t,e$l=1,e$k=0,e$W=e$d.length,e$i=NaN;e$l<e$W;){for(e$t=e$d[e$k=e$l],e$i=e$d[e$k]._zOrder;-1<--e$k&&e$d[e$k]._zOrder>e$i;)e$d[e$k+1]=e$d[e$k];e$d[e$k+1]=e$t,e$l++}var e$A=e$t.parent.conchModel;if(e$A)if(null!=e$A.updateZOrder)e$A.updateZOrder();else{for(e$l=0;e$l<e$W;e$l++)e$A.removeChild(e$d[e$l].conchModel);for(e$l=0;e$l<e$W;e$l++)e$A.addChildAt(e$d[e$l].conchModel,e$l)}return!0},e$B.transPointList=function(e$d,e$t,e$l){var e$k=0,e$W=e$d.length;for(e$k=0;e$k<e$W;e$k+=2)e$d[e$k]+=e$t,e$d[e$k+1]+=e$l},e$B.parseInt=function(e$d,e$t){void 0===e$t&&(e$t=0);var e$l=e$V.window.parseInt(e$d,e$t);return isNaN(e$l)?0:e$l},e$B.getFileExtension=function(e$d){e$B._extReg.lastIndex=e$d.lastIndexOf(".");var e$t=e$B._extReg.exec(e$d);return e$t&&1<e$t.length?e$t[1].toLowerCase():null},e$B.getTransformRelativeToWindow=function(e$d,e$t,e$l){var e$k=e$q.stage,e$W=laya.utils.Utils.getGlobalPosAndScale(e$d),e$i=e$k._canvasTransform.clone(),e$A=e$i.tx,e$B=e$i.ty;e$i.rotate(-Math.PI/180*e$q.stage.canvasDegree),e$i.scale(e$q.stage.clientScaleX,e$q.stage.clientScaleY);var e$o=e$q.stage.canvasDegree%180!=0,e$I=NaN,e$b=NaN;e$o?(e$I=e$l+e$W.y,e$b=e$t+e$W.x,e$I*=e$i.d,e$b*=e$i.a,90==e$q.stage.canvasDegree?(e$I=e$A-e$I,e$b+=e$B):(e$I+=e$A,e$b=e$B-e$b)):(e$I=e$t+e$W.x,e$b=e$l+e$W.y,e$I*=e$i.a,e$b*=e$i.d,e$I+=e$A,e$b+=e$B);var e$f=NaN,e$J=NaN;return e$J=e$o?(e$f=e$i.d*e$W.height,e$i.a*e$W.width):(e$f=e$i.a*e$W.width,e$i.d*e$W.height),{x:e$I,y:e$b,scaleX:e$f,scaleY:e$J}},e$B.fitDOMElementInArea=function(e$d,e$t,e$l,e$k,e$W,e$i){e$d._fitLayaAirInitialized||(e$d._fitLayaAirInitialized=!0,e$d.style.transformOrigin=e$d.style.webKittransformOrigin="left top",e$d.style.position="absolute");var e$A=e$B.getTransformRelativeToWindow(e$t,e$l,e$k);e$d.style.transform=e$d.style.webkitTransform="scale("+e$A.scaleX+","+e$A.scaleY+") rotate("+e$q.stage.canvasDegree+"deg)",e$d.style.width=e$W+"px",e$d.style.height=e$i+"px",e$d.style.left=e$A.x+"px",e$d.style.top=e$A.y+"px"},e$B.isOkTextureList=function(e$d){if(!e$d)return!1;var e$t,e$l=0,e$k=e$d.length;for(e$l=0;e$l<e$k;e$l++)if(!(e$t=e$d[e$l])||!e$t.source)return!1;return!0},e$B.isOKCmdList=function(e$d){if(!e$d)return!1;var e$t,e$l,e$k=0,e$W=e$d.length,e$i=e$K._context;for(e$k=0;e$k<e$W;e$k++)switch((e$t=e$d[e$k]).callee){case e$i._drawTexture:case e$i._fillTexture:case e$i._drawTextureWithTransform:if(!(e$l=e$t[0])||!e$l.source)return!1}return!0},e$B._gid=1,e$B._pi=180/Math.PI,e$B._pi2=Math.PI/180,e$B._extReg=/\.(\w+)\??/g,e$B.parseXMLFromString=function(e$d){var e$t;if(e$d=e$d.replace(/>\s+</g,"><"),-1<(e$t=(new DOMParser).parseFromString(e$d,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(e$t.firstChild.firstChild.textContent);return e$t},e$B}(),e$a=function(){function e$d(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],e$K.isWebGL&&e$U.regCacheByFunction(e$F.bind(this.startDispose,this),e$F.bind(this.getCacheList,this))}e$b(e$d,"laya.utils.VectorGraphManager");var e$t=e$d.prototype;return e$t.getId=function(){return this._id++},e$t.addShape=function(e$d,e$t){this.shapeDic[e$d]=e$t,this.useDic[e$d]||(this.useDic[e$d]=!0)},e$t.addLine=function(e$d,e$t){this.shapeLineDic[e$d]=e$t,this.shapeLineDic[e$d]||(this.shapeLineDic[e$d]=!0)},e$t.getShape=function(e$d){this._checkKey&&null!=this.useDic[e$d]&&(this.useDic[e$d]=!0)},e$t.deleteShape=function(e$d){this.shapeDic[e$d]&&(this.shapeDic[e$d]=null,delete this.shapeDic[e$d]),this.shapeLineDic[e$d]&&(this.shapeLineDic[e$d]=null,delete this.shapeLineDic[e$d]),null!=this.useDic[e$d]&&delete this.useDic[e$d]},e$t.getCacheList=function(){var e$d,e$t=[];for(e$d in this.shapeDic)e$t.push(this.shapeDic[e$d]);for(e$d in this.shapeLineDic)e$t.push(this.shapeLineDic[e$d]);return e$t},e$t.startDispose=function(e$d){var e$t;for(e$t in this.useDic)this.useDic[e$t]=!1;this._checkKey=!0},e$t.endDispose=function(){if(this._checkKey){var e$d;for(e$d in this.useDic)this.useDic[e$d]||this.deleteShape(e$d);this._checkKey=!1}},e$d.getInstance=function(){return e$d.instance=e$d.instance||new e$d},e$d.instance=null,e$d}(),e$_=function(){function e$k(){this._obj=null,this._obj=e$k.supportWeakMap?new e$V.window.WeakMap:{},e$k.supportWeakMap||e$k._maps.push(this)}e$b(e$k,"laya.utils.WeakObject");var e$d=e$k.prototype;return e$d.set=function(e$d,e$t){if(null!=e$d)if(e$k.supportWeakMap){var e$l=e$d;"string"!=typeof e$d&&"number"!=typeof e$d||(e$l=e$k._keys[e$d])||(e$l=e$k._keys[e$d]={k:e$d}),this._obj.set(e$l,e$t)}else"string"==typeof e$d||"number"==typeof e$d?this._obj[e$d]=e$t:(e$d.$_GID||(e$d.$_GID=e$F.getGID()),this._obj[e$d.$_GID]=e$t)},e$d.get=function(e$d){if(null==e$d)return null;if(e$k.supportWeakMap){var e$t="string"==typeof e$d||"number"==typeof e$d?e$k._keys[e$d]:e$d;return e$t?this._obj.get(e$t):null}return"string"==typeof e$d||"number"==typeof e$d?this._obj[e$d]:this._obj[e$d.$_GID]},e$d.del=function(e$d){if(null!=e$d)if(e$k.supportWeakMap){var e$t="string"==typeof e$d||"number"==typeof e$d?e$k._keys[e$d]:e$d;if(!e$t)return;this._obj.delete(e$t)}else"string"==typeof e$d||"number"==typeof e$d?delete this._obj[e$d]:delete this._obj[this._obj.$_GID]},e$d.has=function(e$d){if(null==e$d)return!1;if(e$k.supportWeakMap){var e$t="string"==typeof e$d||"number"==typeof e$d?e$k._keys[e$d]:e$d;return this._obj.has(e$t)}return"string"==typeof e$d||"number"==typeof e$d?null!=this._obj[e$d]:null!=this._obj[this._obj.$_GID]},e$k.__init__=function(){(e$k.supportWeakMap=null!=e$V.window.WeakMap)||e$q.timer.loop(e$k.delInterval,null,e$k.clearCache)},e$k.clearCache=function(){for(var e$d=0,e$t=e$k._maps.length;e$d<e$t;e$d++){e$k._maps[e$d]._obj={}}},e$k.supportWeakMap=!1,e$k.delInterval=3e5,e$k._keys={},e$k._maps=[],e$o(e$k,["I",function(){return this.I=new e$k}]),e$k}(),e$v=function(){function e$d(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}e$b(e$d,"laya.utils.WordText");var e$t=e$d.prototype;return e$t.setText=function(e$d){this.changed=!0,this._text=e$d},e$t.toString=function(){return this._text},e$t.charCodeAt=function(e$d){return this._text?this._text.charCodeAt(e$d):NaN},e$t.charAt=function(e$d){return this._text?this._text.charAt(e$d):null},e$Y(0,e$t,"length",function(){return this._text?this._text.length:0}),e$d}(),e$dd=function(e$d){function e$A(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,e$A.__super.call(this),this._childs=e$A.ARRAY_EMPTY,this._$P=e$A.PROP_EMPTY,this.timer=e$q.scaleTimer,this.conchModel=e$K.isConchNode?this.createConchModel():null}e$b(e$A,"laya.display.Node",e$I);var e$t=e$A.prototype;return e$t._setBit=function(e$d,e$t){1==e$d&&(this._getBit(e$d)!=e$t&&this._updateDisplayedInstage());e$t?this._bits|=e$d:this._bits&=~e$d},e$t._getBit=function(e$d){return 0!=(this._bits&e$d)},e$t._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},e$t._setUpNoticeType=function(e$d){var e$t=this;for(e$t._setBit(e$d,!0),e$t=e$t.parent;e$t;){if(e$t._getBit(e$d))return;e$t._setBit(e$d,!0),e$t=e$t.parent}},e$t.on=function(e$d,e$t,e$l,e$k){return"display"!==e$d&&"undisplay"!==e$d||this._getBit(1)||this._setUpNoticeType(1),this._createListener(e$d,e$t,e$l,e$k,!1)},e$t.once=function(e$d,e$t,e$l,e$k){return"display"!==e$d&&"undisplay"!==e$d||this._getBit(1)||this._setUpNoticeType(1),this._createListener(e$d,e$t,e$l,e$k,!0)},e$t.createConchModel=function(){return null},e$t.destroy=function(e$d){void 0===e$d&&(e$d=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(e$d?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},e$t.destroyChildren=function(){if(this._childs)for(var e$d=this._childs.length-1;-1<e$d;e$d--)this._childs[e$d].destroy(!0)},e$t.addChild=function(e$d){if(!e$d||this.destroyed||e$d===this)return e$d;if(e$d.zOrder&&this._set$P("hasZorder",!0),e$d._parent===this){var e$t=this.getChildIndex(e$d);e$t!==this._childs.length-1&&(this._childs.splice(e$t,1),this._childs.push(e$d),this.conchModel&&(this.conchModel.removeChild(e$d.conchModel),this.conchModel.addChildAt(e$d.conchModel,this._childs.length-1)),this._childChanged())}else e$d.parent&&e$d.parent.removeChild(e$d),this._childs===e$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e$d),this.conchModel&&this.conchModel.addChildAt(e$d.conchModel,this._childs.length-1),(e$d.parent=this)._childChanged();return e$d},e$t.addChildren=function(e$d){for(var e$t=arguments,e$l=0,e$k=e$t.length;e$l<e$k;)this.addChild(e$t[e$l++])},e$t.addChildAt=function(e$d,e$t){if(!e$d||this.destroyed||e$d===this)return e$d;if(e$d.zOrder&&this._set$P("hasZorder",!0),0<=e$t&&e$t<=this._childs.length){if(e$d._parent===this){var e$l=this.getChildIndex(e$d);this._childs.splice(e$l,1),this._childs.splice(e$t,0,e$d),this.conchModel&&(this.conchModel.removeChild(e$d.conchModel),this.conchModel.addChildAt(e$d.conchModel,e$t)),this._childChanged()}else e$d.parent&&e$d.parent.removeChild(e$d),this._childs===e$A.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e$t,0,e$d),this.conchModel&&this.conchModel.addChildAt(e$d.conchModel,e$t),e$d.parent=this;return e$d}throw new Error("appendChildAt:The index is out of bounds")},e$t.getChildIndex=function(e$d){return this._childs.indexOf(e$d)},e$t.getChildByName=function(e$d){var e$t=this._childs;if(e$t)for(var e$l=0,e$k=e$t.length;e$l<e$k;e$l++){var e$W=e$t[e$l];if(e$W.name===e$d)return e$W}return null},e$t._get$P=function(e$d){return this._$P[e$d]},e$t._set$P=function(e$d,e$t){return this.destroyed||(this._$P===e$A.PROP_EMPTY&&(this._$P={}),this._$P[e$d]=e$t),e$t},e$t.getChildAt=function(e$d){return this._childs[e$d]},e$t.setChildIndex=function(e$d,e$t){var e$l=this._childs;if(e$t<0||e$t>=e$l.length)throw new Error("setChildIndex:The index is out of bounds.");var e$k=this.getChildIndex(e$d);if(e$k<0)throw new Error("setChildIndex:node is must child of this object.");return e$l.splice(e$k,1),e$l.splice(e$t,0,e$d),this.conchModel&&(this.conchModel.removeChild(e$d.conchModel),this.conchModel.addChildAt(e$d.conchModel,e$t)),this._childChanged(),e$d},e$t._childChanged=function(e$d){},e$t.removeChild=function(e$d){if(!this._childs)return e$d;var e$t=this._childs.indexOf(e$d);return this.removeChildAt(e$t)},e$t.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},e$t.removeChildByName=function(e$d){var e$t=this.getChildByName(e$d);return e$t&&this.removeChild(e$t),e$t},e$t.removeChildAt=function(e$d){var e$t=this.getChildAt(e$d);if(e$t){for(var e$l=this._childs.length-1,e$k=e$d;e$k<e$l;++e$k)this._childs[e$k]=this._childs[e$k+1];this._childs.length=e$l,this.conchModel&&this.conchModel.removeChild(e$t.conchModel),e$t.parent=null}return e$t},e$t.removeChildren=function(e$d,e$t){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=2147483647),this._childs&&0<this._childs.length){var e$l=this._childs;if(0===e$d&&e$i<=e$t){var e$k=e$l;this._childs=e$A.ARRAY_EMPTY}else e$k=e$l.splice(e$d,e$t-e$d);for(var e$W=0,e$i=e$k.length;e$W<e$i;e$W++)e$k[e$W].parent=null,this.conchModel&&this.conchModel.removeChild(e$k[e$W].conchModel)}return this},e$t.replaceChild=function(e$d,e$t){var e$l=this._childs.indexOf(e$t);return-1<e$l?(this._childs.splice(e$l,1,e$d),this.conchModel&&(this.conchModel.removeChild(e$t.conchModel),this.conchModel.addChildAt(e$d.conchModel,e$l)),e$t.parent=null,e$d.parent=this,e$d):null},e$t._updateDisplayedInstage=function(){var e$d;e$d=this;var e$t=e$q.stage;for(this._displayedInStage=!1;e$d;){if(e$d._getBit(1)){this._displayedInStage=e$d._displayedInStage;break}if(e$d==e$t||e$d._displayedInStage){this._displayedInStage=!0;break}e$d=e$d.parent}},e$t._setDisplay=function(e$d){this._displayedInStage!==e$d&&((this._displayedInStage=e$d)?this.event("display"):this.event("undisplay"))},e$t._displayChild=function(e$d,e$t){var e$l=e$d._childs;if(e$l)for(var e$k=0;e$k<e$l.length;e$k++){var e$W=e$l[e$k];e$W&&e$W._getBit(1)&&(0<e$W._childs.length?this._displayChild(e$W,e$t):e$W._setDisplay(e$t))}e$d._setDisplay(e$t)},e$t.contains=function(e$d){if(e$d===this)return!0;for(;e$d;){if(e$d.parent===this)return!0;e$d=e$d.parent}return!1},e$t.timerLoop=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$W&&(e$W=!0),void 0===e$i&&(e$i=!1),this.timer.loop(e$d,e$t,e$l,e$k,e$W,e$i)},e$t.timerOnce=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=!0),this.timer._create(!1,!1,e$d,e$t,e$l,e$k,e$W)},e$t.frameLoop=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=!0),this.timer._create(!0,!0,e$d,e$t,e$l,e$k,e$W)},e$t.frameOnce=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=!0),this.timer._create(!0,!1,e$d,e$t,e$l,e$k,e$W)},e$t.clearTimer=function(e$d,e$t){this.timer.clear(e$d,e$t)},e$Y(0,e$t,"numChildren",function(){return this._childs.length}),e$Y(0,e$t,"destroyed",function(){return this._destroyed}),e$Y(0,e$t,"parent",function(){return this._parent},function(e$d){this._parent!==e$d&&(e$d?(this._parent=e$d,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),e$d.displayedInStage&&this._displayChild(this,!0)),e$d._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=e$d))}),e$Y(0,e$t,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),e$A.ARRAY_EMPTY=[],e$A.PROP_EMPTY={},e$A.NOTICE_DISPLAY=1,e$A.MOUSEENABLE=2,e$A}(),e$td=function(e$d){function e$J(e$d){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,e$J.__super.call(this),this._padding=e$J._PADDING,this._spacing=e$J._SPACING,this._aligns=e$J._ALIGNS,this._font=e$c.EMPTY,this._ower=e$d}e$b(e$J,"laya.display.css.CSSStyle",e$d);var e$t=e$J.prototype;return e$t.destroy=function(){this._ower=null,this._font=null,this._rect=null},e$t.inherit=function(e$d){this._font=e$d._font,this._spacing=e$d._spacing===e$J._SPACING?e$J._SPACING:e$d._spacing.slice(),this.lineHeight=e$d.lineHeight},e$t._widthAuto=function(){return 0!=(262144&this._type)},e$t.widthed=function(e$d){return 0!=(8&this._type)},e$t._calculation=function(e$d,e$t){if(e$t.indexOf("%")<0)return!1;var e$k=this._ower,e$W=e$k.parent,e$i=this._rect;function e$A(e$d,e$t,e$l){return e$d*e$l[0]+e$t*e$l[1]+e$l[2]}function e$l(e$d){var e$t=e$W.width,e$l=e$k.width;e$i.width&&(e$k.width=e$A(e$t,e$l,e$i.width)),e$i.height&&(e$k.height=e$A(e$t,e$l,e$i.height)),e$i.left&&(e$k.x=e$A(e$t,e$l,e$i.left)),e$i.top&&(e$k.y=e$A(e$t,e$l,e$i.top))}null===e$i&&(e$W._getCSSStyle()._type|=524288,e$W.on("resize",this,e$l),this._rect=e$i={input:{}});var e$B=e$t.split(" ");return e$B[0]=parseFloat(e$B[0])/100,1==e$B.length?e$B[1]=e$B[2]=0:(e$B[1]=parseFloat(e$B[1])/100,e$B[2]=parseFloat(e$B[2])),e$i[e$d]=e$B,e$i.input[e$d]=e$t,e$l(),!0},e$t.heighted=function(e$d){return 0!=(8192&this._type)},e$t.size=function(e$d,e$t){var e$l=this._ower,e$k=!1;-1!==e$d&&e$d!=this._ower.width&&(this._type|=8,this._ower.width=e$d,e$k=!0),-1!==e$t&&e$t!=this._ower.height&&(this._type|=8192,this._ower.height=e$t,e$k=!0),e$k&&(e$l._layoutLater(),524288&this._type&&e$l.event("resize",this))},e$t._getAlign=function(){return this._aligns[0]},e$t._getValign=function(){return this._aligns[1]},e$t._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},e$t._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new e$c(this._font))},e$t.render=function(e$d,e$t,e$l,e$k){var e$W=e$d.width,e$i=e$d.height;e$l-=e$d.pivotX,e$k-=e$d.pivotY,this._bgground&&null!=this._bgground.color&&e$t.ctx.fillRect(e$l,e$k,e$W,e$i,this._bgground.color),this._border&&this._border.color&&e$t.drawRect(e$l,e$k,e$W,e$i,this._border.color.strColor,this._border.size)},e$t.getCSSStyle=function(){return this},e$t.cssText=function(e$d){this.attrs(e$J.parseOneCSS(e$d,";"))},e$t.attrs=function(e$d){if(e$d)for(var e$t=0,e$l=e$d.length;e$t<e$l;e$t++){var e$k=e$d[e$t];this[e$k[0]]=e$k[1]}},e$t.setTransform=function(e$d){"none"===e$d?this._tf=e$B._TF_EMPTY:this.attrs(e$J.parseOneCSS(e$d,","))},e$t.translate=function(e$d,e$t){this._tf===e$B._TF_EMPTY&&(this._tf=new e$W),this._tf.translateX=e$d,this._tf.translateY=e$t},e$t.scale=function(e$d,e$t){this._tf===e$B._TF_EMPTY&&(this._tf=new e$W),this._tf.scaleX=e$d,this._tf.scaleY=e$t},e$t._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},e$Y(0,e$t,"block",e$d.prototype._$get_block,function(e$d){e$d?this._type|=1:this._type&=-2}),e$Y(0,e$t,"valign",function(){return e$J._valigndef[this._aligns[1]]},function(e$d){this._aligns===e$J._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=e$J._valigndef[e$d]}),e$Y(0,e$t,"height",null,function(e$d){if(this._type|=8192,"string"==typeof e$d){if(this._calculation("height",e$d))return;e$d=parseInt(e$d)}this.size(-1,e$d)}),e$Y(0,e$t,"width",null,function(e$d){if(this._type|=8,"string"==typeof e$d){var e$t=e$d.indexOf("auto");if(0<=e$t&&(this._type|=262144,e$d=e$d.substr(0,e$t)),this._calculation("width",e$d))return;e$d=parseInt(e$d)}this.size(e$d,-1)}),e$Y(0,e$t,"fontWeight",function(){return this._font.weight},function(e$d){this._createFont().weight=e$d}),e$Y(0,e$t,"left",null,function(e$d){var e$t=this._ower;if("string"==typeof e$d){if("center"===e$d?e$d="50% -50% 0":"right"===e$d&&(e$d="100% -100% 0"),this._calculation("left",e$d))return;e$d=parseInt(e$d)}e$t.x=e$d}),e$Y(0,e$t,"_translate",null,function(e$d){this.translate(e$d[0],e$d[1])}),e$Y(0,e$t,"absolute",function(){return 0!=(4&this._type)}),e$Y(0,e$t,"top",null,function(e$d){var e$t=this._ower;if("string"==typeof e$d){if("middle"===e$d?e$d="50% -50% 0":"bottom"===e$d&&(e$d="100% -100% 0"),this._calculation("top",e$d))return;e$d=parseInt(e$d)}e$t.y=e$d}),e$Y(0,e$t,"align",function(){return e$J._aligndef[this._aligns[0]]},function(e$d){this._aligns===e$J._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=e$J._aligndef[e$d]}),e$Y(0,e$t,"bold",function(){return this._font.bold},function(e$d){this._createFont().bold=e$d}),e$Y(0,e$t,"padding",function(){return this._padding},function(e$d){this._padding=e$d}),e$Y(0,e$t,"leading",function(){return this._spacing[1]},function(e$d){"string"==typeof e$d&&(e$d=parseInt(e$d+"")),this._spacing===e$J._SPACING&&(this._spacing=[0,0]),this._spacing[1]=e$d}),e$Y(0,e$t,"lineElement",function(){return 0!=(65536&this._type)},function(e$d){e$d?this._type|=65536:this._type&=-65537}),e$Y(0,e$t,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(e$d){this.lineElement=!1,"right"===e$d?this._type|=32768:this._type&=-32769}),e$Y(0,e$t,"textDecoration",function(){return this._font.decoration},function(e$d){this._createFont().decoration=e$d}),e$Y(0,e$t,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(e$d){"nowrap"===e$d&&(this._type|=131072),"none"===e$d&&(this._type&=-131073)}),e$Y(0,e$t,"background",null,function(e$d){e$d?(this._bgground||(this._bgground={}),this._bgground.color=e$d,this._ower.conchModel&&this._ower.conchModel.bgColor(e$d),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),e$Y(0,e$t,"wordWrap",function(){return 0==(131072&this._type)},function(e$d){e$d?this._type&=-131073:this._type|=131072}),e$Y(0,e$t,"color",function(){return this._font.color},function(e$d){this._createFont().color=e$d}),e$Y(0,e$t,"password",function(){return this._font.password},function(e$d){this._createFont().password=e$d}),e$Y(0,e$t,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(e$d){"none"===e$d?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=e$d),this._ower.conchModel&&this._ower.conchModel.bgColor(e$d),this._ower._renderType|=256}),e$Y(0,e$t,"font",function(){return this._font.toString()},function(e$d){this._createFont().set(e$d)}),e$Y(0,e$t,"weight",null,function(e$d){this._createFont().weight=e$d}),e$Y(0,e$t,"letterSpacing",function(){return this._spacing[0]},function(e$d){"string"==typeof e$d&&(e$d=parseInt(e$d+"")),this._spacing===e$J._SPACING&&(this._spacing=[0,0]),this._spacing[0]=e$d}),e$Y(0,e$t,"fontSize",function(){return this._font.size},function(e$d){this._createFont().size=e$d}),e$Y(0,e$t,"italic",function(){return this._font.italic},function(e$d){this._createFont().italic=e$d}),e$Y(0,e$t,"fontFamily",function(){return this._font.family},function(e$d){this._createFont().family=e$d}),e$Y(0,e$t,"stroke",function(){return this._font.stroke[0]},function(e$d){this._createFont().stroke===e$c._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=e$d}),e$Y(0,e$t,"strokeColor",function(){return this._font.stroke[1]},function(e$d){this._createFont().stroke===e$c._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=e$d}),e$Y(0,e$t,"border",function(){return this._border?this._border.value:""},function(e$d){if("none"!=e$d){this._border||(this._border={});var e$t=(this._border.value=e$d).split(" ");if(this._border.color=e$N.create(e$t[e$t.length-1]),1==e$t.length)return this._border.size=1,void(this._border.type="solid");var e$l=0;0<e$t[0].indexOf("px")?(this._border.size=parseInt(e$t[0]),e$l++):this._border.size=1,this._border.type=e$t[e$l],this._ower._renderType|=256}else this._border=null}),e$Y(0,e$t,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(e$d){e$d?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==e$d?null:e$N.create(e$d),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),e$Y(0,e$t,"position",function(){return 4&this._type?"absolute":""},function(e$d){"absolute"==e$d?this._type|=4:this._type&=-5}),e$Y(0,e$t,"display",null,function(e$d){switch(e$d){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),e$Y(0,e$t,"paddingLeft",function(){return this.padding[3]}),e$Y(0,e$t,"paddingTop",function(){return this.padding[0]}),e$Y(0,e$t,"_scale",null,function(e$d){this._ower.scale(e$d[0],e$d[1])}),e$Y(0,e$t,"_rotate",null,function(e$d){this._ower.rotation=e$d}),e$J.parseOneCSS=function(e$d,e$t){for(var e$l,e$k=[],e$W=e$d.split(e$t),e$i=0,e$A=e$W.length;e$i<e$A;e$i++){var e$B=e$W[e$i],e$o=e$B.indexOf(":"),e$I=e$B.substr(0,e$o).replace(/^\s+|\s+$/g,"");if(0!=e$I.length){var e$b=e$B.substr(e$o+1).replace(/^\s+|\s+$/g,""),e$f=[e$I,e$b];switch(e$I){case"italic":case"bold":e$f[1]="true"==e$b;break;case"line-height":e$f[0]="lineHeight",e$f[1]=parseInt(e$b);break;case"font-size":e$f[0]="fontSize",e$f[1]=parseInt(e$b);break;case"padding":1<(e$l=e$b.split(" ")).length||(e$l[1]=e$l[2]=e$l[3]=e$l[0]),e$f[1]=[parseInt(e$l[0]),parseInt(e$l[1]),parseInt(e$l[2]),parseInt(e$l[3])];break;case"rotate":e$f[0]="_rotate",e$f[1]=parseFloat(e$b);break;case"scale":e$l=e$b.split(" "),e$f[0]="_scale",e$f[1]=[parseFloat(e$l[0]),parseFloat(e$l[1])];break;case"translate":e$l=e$b.split(" "),e$f[0]="_translate",e$f[1]=[parseInt(e$l[0]),parseInt(e$l[1])];break;default:(e$f[0]=e$J._CSSTOVALUE[e$I])||(e$f[0]=e$I)}e$k.push(e$f)}}return e$k},e$J.parseCSS=function(e$d,e$t){for(var e$l;null!=(e$l=e$J._parseCSSRegExp.exec(e$d));)e$J.styleSheets[e$l[1]]=e$J.parseOneCSS(e$l[2],";")},e$J.EMPTY=new e$J(null),e$J._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},e$J._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),e$J._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},e$J._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},e$J.styleSheets={},e$J.ALIGN_CENTER=1,e$J.ALIGN_RIGHT=2,e$J.VALIGN_MIDDLE=1,e$J.VALIGN_BOTTOM=2,e$J._CSS_BLOCK=1,e$J._DISPLAY_NONE=2,e$J._ABSOLUTE=4,e$J._WIDTH_SET=8,e$J._PADDING=[0,0,0,0],e$J._RECT=[-1,-1,-1,-1],e$J._SPACING=[0,0],e$J._ALIGNS=[0,0,0],e$J.ADDLAYOUTED=512,e$J._NEWFONT=4096,e$J._HEIGHT_SET=8192,e$J._BACKGROUND_SET=16384,e$J._FLOAT_RIGHT=32768,e$J._LINE_ELEMENT=65536,e$J._NOWARP=131072,e$J._WIDTHAUTO=262144,e$J._LISTERRESZIE=524288,e$J}(e$B),e$ld=function(e$d){function e$A(){this.url=null,this.audio=null,this.loaded=!1,e$A.__super.call(this)}e$b(e$A,"laya.media.h5audio.AudioSound",e$I);var e$t=e$A.prototype;return e$t.dispose=function(){var e$d=e$A._audioCache[this.url];e$d&&(e$d.src="",delete e$A._audioCache[this.url])},e$t.load=function(e$d){var e$t;if(e$d=e$C.formatURL(e$d),(this.url=e$d)==e$T._tMusic?(e$A._initMusicAudio(),(e$t=e$A._musicAudio).src!=e$d&&(e$A._audioCache[e$t.src]=null,e$t=null)):e$t=e$A._audioCache[e$d],e$t&&2<=e$t.readyState)this.event("complete");else{e$t||(e$t=e$d==e$T._tMusic?(e$A._initMusicAudio(),e$A._musicAudio):e$V.createElement("audio"),(e$A._audioCache[e$d]=e$t).src=e$d),e$t.addEventListener("canplaythrough",e$k),e$t.addEventListener("error",e$W);var e$l=this;(this.audio=e$t).load?e$t.load():e$W()}function e$k(){e$i(),e$l.loaded=!0,e$l.event("complete")}function e$W(){e$t.load=null,e$i(),e$l.event("error")}function e$i(){e$t.removeEventListener("canplaythrough",e$k),e$t.removeEventListener("error",e$W)}},e$t.play=function(e$d,e$t,e$l){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),!this.url)return null;var e$k,e$W;if(!(e$k=this.url==e$T._tMusic?e$A._musicAudio:e$A._audioCache[this.url]))return null;e$W=e$P.getItem("audio:"+this.url),e$K.isConchApp?e$W||((e$W=e$V.createElement("audio")).src=this.url):this.url==e$T._tMusic?(e$A._initMusicAudio(),(e$W=e$A._musicAudio).src=this.url):e$W=e$W||e$k.cloneNode(!0);var e$i=new e$Jd(e$W);return e$i.url=this.url,e$i.loops=e$t,e$i.startTime=e$d,e$i.startHandler=e$l,e$i.play(!1),e$T.addChannel(e$i),e$i},e$Y(0,e$t,"duration",function(){var e$d;return(e$d=e$A._audioCache[this.url])?e$d.duration:0}),e$A._initMusicAudio=function(){e$A._musicAudio||(e$A._musicAudio||(e$A._musicAudio=e$V.createElement("audio")),e$K.isConchApp||e$V.document.addEventListener("mousedown",e$A._makeMusicOK))},e$A._makeMusicOK=function(){e$V.document.removeEventListener("mousedown",e$A._makeMusicOK),e$A._musicAudio.src?e$A._musicAudio.play():(e$A._musicAudio.src="",e$A._musicAudio.load())},e$A._audioCache={},e$A._musicAudio=null,e$A}(),e$kd=function(e$d){function e$t(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,e$t.__super.call(this)}e$b(e$t,"laya.media.SoundChannel",e$I);var e$l=e$t.prototype;return e$l.play=function(){},e$l.stop=function(){},e$l.pause=function(){},e$l.resume=function(){},e$l.__runComplete=function(e$d){e$d&&e$d.run()},e$Y(0,e$l,"volume",function(){return 1},function(e$d){}),e$Y(0,e$l,"position",function(){return 0}),e$Y(0,e$l,"duration",function(){return 0}),e$t}(),e$Wd=function(e$d){function e$t(){e$t.__super.call(this)}e$b(e$t,"laya.media.Sound",e$I);var e$l=e$t.prototype;return e$l.load=function(e$d){},e$l.play=function(e$d,e$t,e$l){return void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),null},e$l.dispose=function(){},e$Y(0,e$l,"duration",function(){return 0}),e$t}(),e$id=function(e$d){function e$W(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,e$W.__super.call(this)}e$b(e$W,"laya.media.webaudio.WebAudioSound",e$I);var e$t=e$W.prototype;return e$t.load=function(e$d){this.url=e$d,this.audioBuffer=e$W._dataCache[e$d],this.audioBuffer?this._loaded(this.audioBuffer):(e$W.e.on("loaded:"+e$d,this,this._loaded),e$W.e.on("err:"+e$d,this,this._err),e$W.__loadingSound[e$d]||(e$W.__loadingSound[e$d]=!0,e$q.loader.load(e$d,e$e.create(this,this.onloaded),null,e$Bd.BUFFER,4,!1,null,!0)))},e$t.onloaded=function(e$d){e$d||this._err(),this._disposed?this._removeLoadEvents():(this.data=e$d,e$W.buffs.push({buffer:this.data,url:this.url}),e$W.decode())},e$t._err=function(){if(this._removeLoadEvents(),e$W.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var e$d,e$t,e$l,e$k=0;for(e$d=(e$t=this.__toPlays).length,e$k=0;e$k<e$d;e$k++)(e$l=e$t[e$k])[3]&&!e$l[3].isStopped&&e$l[3].event("error");this.__toPlays.length=0}},e$t._loaded=function(e$d){this._removeLoadEvents(),this._disposed||(this.audioBuffer=e$d,this.loaded=!0,this.event("complete"))},e$t._removeLoadEvents=function(){e$W.e.off("loaded:"+this.url,this,this._loaded),e$W.e.off("err:"+this.url,this,this._err)},e$t.__playAfterLoaded=function(){if(this.__toPlays){var e$d,e$t,e$l,e$k=0;for(e$d=(e$t=this.__toPlays).length,e$k=0;e$k<e$d;e$k++)(e$l=e$t[e$k])[3]&&!e$l[3].isStopped&&this.play(e$l[0],e$l[1],e$l[2],e$l[3]);this.__toPlays.length=0}},e$t.play=function(e$d,e$t,e$l,e$k){return void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),e$k=e$k||new e$cd,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([e$d,e$t,e$l,e$k]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),e$k.url=this.url,e$k.loops=e$t,e$k.audioBuffer=this.audioBuffer,e$k.startTime=e$d,e$k.startHandler=e$l,e$k.play(!1),e$T.addChannel(e$k),e$k},e$t.dispose=function(){this._disposed=!0,delete e$W._dataCache[this.url],delete e$W.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},e$Y(0,e$t,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e$W.decode=function(){if(!(e$W.buffs.length<=0||e$W.isDecoding))if(e$W.isDecoding=!0,(e$W.tInfo=e$W.buffs.shift())&&e$W.tInfo.buffer&&e$W.tInfo.buffer.byteLength)try{e$W.ctx.decodeAudioData(e$W.tInfo.buffer,e$W._done,e$W._fail)}catch(e$d){console.error("decodeAudioData error  byteLength:"+e$W.tInfo.buffer.byteLength+"  url:"+e$W.tInfo.url)}else e$W._fail()},e$W._done=function(e$d){e$W.e.event("loaded:"+e$W.tInfo.url,e$d),e$W._dataCache[e$W.tInfo.url]=e$d,e$W.isDecoding=!1,e$W.decode()},e$W._fail=function(){e$W.e.event("err:"+e$W.tInfo.url,null),e$W.isDecoding=!1,e$W.decode()},e$W._playEmptySound=function(){if(null!=e$W.ctx){if(e$W._emptySource&&(e$W._emptySource.stop(),e$W._emptySource.disconnect(0),!e$cd._tryCleanFailed))try{e$W._emptySource.buffer=null}catch(e$d){e$cd._tryCleanFailed=!0}var e$d=e$W.ctx.createBufferSource();e$d.buffer=e$W._miniBuffer,e$d.connect(e$W.ctx.destination),e$d.start(0,0,0),e$W._emptySource=e$d}},e$W._unlock=function(){e$W._unlocked||(e$W._playEmptySound(),"running"==e$W.ctx.state?(e$V.document.removeEventListener("mousedown",e$W._unlock,!0),e$V.document.removeEventListener("touchend",e$W._unlock,!0),e$V.document.removeEventListener("touchstart",e$W._unlock,!0),e$W._unlocked=!0):"suspended"==e$W.ctx.state&&e$T._recoverWebAudio())},e$W.initWebAudio=function(){"running"!=e$W.ctx.state&&(e$W._unlock(),e$V.document.addEventListener("mousedown",e$W._unlock,!0),e$V.document.addEventListener("touchend",e$W._unlock,!0),e$V.document.addEventListener("touchstart",e$W._unlock,!0))},e$W._emptySource=null,e$W._dataCache={},e$W.buffs=[],e$W.isDecoding=!1,e$W._unlocked=!1,e$W.tInfo=null,e$W.__loadingSound={},e$o(e$W,["window",function(){return this.window=e$V.window},"webAudioEnabled",function(){return this.webAudioEnabled=e$W.window.AudioContext||e$W.window.webkitAudioContext||e$W.window.mozAudioContext},"ctx",function(){return this.ctx=e$W.webAudioEnabled?new(e$W.window.AudioContext||e$W.window.webkitAudioContext||e$W.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=e$W.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new e$I}]),e$W}(),e$Ad=function(e$d){function e$t(){this._responseType=null,this._data=null,e$t.__super.call(this),this._http=new e$V.window.XMLHttpRequest}e$b(e$t,"laya.net.HttpRequest",e$I);var e$l=e$t.prototype;return e$l.send=function(e$d,e$t,e$l,e$k,e$W){void 0===e$l&&(e$l="get"),void 0===e$k&&(e$k="text"),this._responseType=e$k,this._data=null;var e$i=this,e$A=this._http;if(e$A.open(e$l,e$d,!0),e$W)for(var e$B=0;e$B<e$W.length;e$B++)e$A.setRequestHeader(e$W[e$B++],e$W[e$B]);else e$K.isConchApp||(e$t&&"string"!=typeof e$t?e$A.setRequestHeader("Content-Type","application/json"):e$A.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));e$A.responseType="arraybuffer"!==e$k?"text":"arraybuffer",e$A.onerror=function(e$d){e$i._onError(e$d)},e$A.onabort=function(e$d){e$i._onAbort(e$d)},e$A.onprogress=function(e$d){e$i._onProgress(e$d)},e$A.onload=function(e$d){e$i._onLoad(e$d)},e$A.send(e$t)},e$l._onProgress=function(e$d){e$d&&e$d.lengthComputable&&this.event("progress",e$d.loaded/e$d.total)},e$l._onAbort=function(e$d){this.error("Request was aborted by user")},e$l._onError=function(e$d){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},e$l._onLoad=function(e$d){var e$t=this._http,e$l=void 0!==e$t.status?e$t.status:200;200===e$l||204===e$l||0===e$l?this.complete():this.error("["+e$t.status+"]"+e$t.statusText+":"+e$t.responseURL)},e$l.error=function(e$d){this.clear(),this.event("error",e$d)},e$l.complete=function(){this.clear();var e$t=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=e$F.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(e$d){e$t=!1,this.error(e$d.message)}e$t&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},e$l.clear=function(){var e$d=this._http;e$d.onerror=e$d.onabort=e$d.onprogress=e$d.onload=null},e$Y(0,e$l,"url",function(){return this._http.responseURL}),e$Y(0,e$l,"http",function(){return this._http}),e$Y(0,e$l,"data",function(){return this._data}),e$t}(),e$Bd=function(e$d){function e$p(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,e$p.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}e$b(e$p,"laya.net.Loader",e$I);var e$t=e$p.prototype;return e$t.load=function(e$d,e$t,e$l,e$k,e$W){if(e$d&&""!=e$d||console.error("Loader 加载的url不合法 "+e$d),void 0===e$l&&(e$l=!0),void 0===e$W&&(e$W=!1),0===(this._url=e$d).indexOf("data:image")?this._type=e$t="image":this._type=e$t||(e$t=this.getTypeFromUrl(e$d)),this._cache=e$l,this._data=null,!e$W&&e$p.loadedMap[e$d])return this._data=e$p.loadedMap[e$d],this.event("progress",1),void this.event("complete",this._data);if(e$k&&e$p.setGroup(e$d,e$k),null!=e$p.parserMap[e$t])return this._customParse=!0,void(e$p.parserMap[e$t]instanceof laya.utils.Handler?e$p.parserMap[e$t].runWith(this):e$p.parserMap[e$t].call(null,this));if("image"===e$t||"htmlimage"===e$t||"nativeimage"===e$t)return this._loadImage(e$d);if("ttf"===e$t)return this._loadTTF(e$d);switch(e$t){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:e$t}e$p.preLoadedMap[e$d]?this.onLoaded(e$p.preLoadedMap[e$d]):e$A.resMgrLoad(e$d,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},e$t.getTypeFromUrl=function(e$d){var e$t=e$F.getFileExtension(e$d);return e$t?e$p.typeMap[e$t]:(console.warn("Not recognize the resources suffix",e$d),"text")},e$t._loadTTF=function(e$d){e$d=e$C.formatURL(e$d);var e$t=new e$j;e$t.complete=e$e.create(this,this.onLoaded),e$t.load(e$d)},e$t._loadImage=function(e$d){e$A.imgMgrLoad(e$d,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},e$t._loadImageComplete=function(e$d,e$t,e$l){if(null!=e$l)if(e$l instanceof ArrayBuffer){var e$k=new DataView(e$l),e$W=new laya.webgl.resource.WebGLImage(new Uint8Array(e$l,8),e$d,0,!1,e$k.getUint32(0),e$k.getUint32(4));this.onLoaded(e$W)}else if(e$l instanceof e$bd)e$p.imgMgrSet[e$d]=e$t,e$A.imgMgrLock(e$d,e$p.imgMgrSet[e$d]),this._url=e$d,this.complete(e$l);else{var e$i=-1!=e$d.indexOf(".png",e$d.length-4)?6408:6407;e$W=new laya.webgl.resource.WebGLImage(e$l,e$d,e$i,!1,e$l.width,e$l.height);this.onLoaded(e$W)}else this.event("error","Load image failed")},e$t.imageCancel=function(e$d,e$t,e$l){e$A.imgMgrCancel&&e$A.imgMgrCancel(e$d,this._onImageCallback)},e$t._loadSound=function(e$d){var e$t=new e$T._soundClass,e$l=this;function e$k(){e$t.offAll()}e$t.on("complete",this,function(){e$k(),e$l.onLoaded(e$t)}),e$t.on("error",this,function(){e$k(),e$t.dispose(),e$l.event("error","Load sound failed")}),e$t.load(e$d)},e$t.onProgress=function(e$d){"atlas"===this._type?this.event("progress",.3*e$d):this.event("progress",e$d)},e$t.onError=function(e$d){this.event("error",e$d)},e$t._loadedComplete=function(e$d,e$t,e$l){if(null!=e$l)switch(this._type){case"atlas":case"plf":case"json":var e$k=new e$Z(e$l);this.onLoaded(JSON.parse(e$k.readUTFBytes()));break;case"font":e$k=new e$Z(e$l);this.onLoaded(e$F.parseXMLFromString(e$k.readUTFBytes()));break;default:this.onLoaded(e$l)}else this.event("error",e$d)},e$t.onLoaded=function(e$d){var e$t=this._type;if("plf"==e$t)this.parsePLFData(e$d),this.complete(e$d);else if("image"===e$t){var e$l=new e$bd(e$d);e$l.url=this._url,this.complete(e$l)}else if("sound"===e$t||"htmlimage"===e$t||"nativeimage"===e$t)this.complete(e$d);else if("atlas"===e$t){if(!e$d.src&&!e$d._setContext){if(!this._data){if((this._data=e$d).meta&&e$d.meta.image)for(var e$k=e$d.meta.image.split(","),e$W=0<=this._url.indexOf("/")?"/":"\\",e$i=this._url.lastIndexOf(e$W),e$A=0<=e$i?this._url.substr(0,e$i+1):"",e$B=0,e$o=e$k.length;e$B<e$o;e$B++)e$k[e$B]=e$A+e$k[e$B];else e$k=[this._url.replace(".json",".png")];e$k.reverse(),e$d.toLoads=e$k,e$d.pics=[]}return this.event("progress",.3+1/e$k.length*.6),this._loadImage(e$k.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(e$d),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var e$I=this._data.frames,e$b=this._url.split("?")[0],e$f=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:e$b.substring(0,e$b.lastIndexOf("."))+"/",e$J=this._data.pics,e$c=e$C.formatURL(this._url),e$Y=e$p.atlasMap[e$c]||(e$p.atlasMap[e$c]=[]);e$Y.dir=e$f;var e$w=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var e$D in e$w=parseFloat(this._data.meta.scale),e$I){var e$z,e$e=e$I[e$D],e$g=e$J[e$e.frame.idx?e$e.frame.idx:0],e$H=e$C.formatURL(e$f+e$D);e$g.scaleRate=e$w,e$z=e$bd.create(e$g,e$e.frame.x,e$e.frame.y,e$e.frame.w,e$e.frame.h,e$e.spriteSourceSize.x,e$e.spriteSourceSize.y,e$e.sourceSize.w,e$e.sourceSize.h),e$p.cacheRes(e$H,e$z),e$p.keepCache(this._url,e$f+e$D),e$z.url=e$H,e$Y.push(e$H)}else for(e$D in e$I)e$g=e$J[(e$e=e$I[e$D]).frame.idx?e$e.frame.idx:0],e$H=e$C.formatURL(e$f+e$D),e$p.cacheRes(e$H,e$bd.create(e$g,e$e.frame.x,e$e.frame.y,e$e.frame.w,e$e.frame.h,e$e.spriteSourceSize.x,e$e.spriteSourceSize.y,e$e.sourceSize.w,e$e.sourceSize.h)),e$p.loadedMap[e$H].url=e$H,e$p.keepCache(this._url,e$f+e$D),e$Y.push(e$H);delete this._data.pics,this.complete(this._data)}else if("font"==e$t){if(!e$d.src)return this._data=e$d,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var e$R=new e$M;e$R.parseFont(this._data,e$d);var e$G=this._url.split(".fnt")[0].split("/"),e$q=e$G[e$G.length-1];e$Dd.registerBitmapFont(e$q,e$R),this._data=e$R,this.complete(this._data)}else if("pkm"==e$t){var e$L=e$Gd.create(e$d,this._url),e$$=new e$bd(e$L);e$$.url=this._url,this.complete(e$$)}else this.complete(e$d)},e$t.parsePLFData=function(e$d){var e$t,e$l,e$k;for(e$t in e$d)switch(e$k=e$d[e$t],e$t){case"json":case"text":for(e$l in e$k)e$p.preLoadedMap[e$C.formatURL(e$l)]=e$k[e$l];break;default:for(e$l in e$k)e$p.preLoadedMap[e$C.formatURL(e$l)]=e$k[e$l]}},e$t.complete=function(e$d){this._data=e$d,this._customParse?this.event("loaded",e$d instanceof Array?[e$d]:e$d):(e$p._loaders.push(this),e$p._isWorking||e$p.checkNext())},e$t.endLoad=function(e$d){e$d&&(this._data=e$d),this._cache&&e$p.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},e$Y(0,e$t,"url",function(){return this._url}),e$Y(0,e$t,"data",function(){return this._data}),e$Y(0,e$t,"cache",function(){return this._cache}),e$Y(0,e$t,"type",function(){return this._type}),e$p.checkNext=function(){e$p._isWorking=!0;for(var e$d=e$V.now();e$p._startIndex<e$p._loaders.length;)if(e$V.now(),e$p._loaders[e$p._startIndex].endLoad(),e$p._startIndex++,e$V.now()-e$d>e$p.maxTimeOut)return console.warn("loader callback cost a long time:"+(e$V.now()-e$d)+" url="+e$p._loaders[e$p._startIndex-1].url),void e$q.timer.frameOnce(1,null,e$p.checkNext);e$p._loaders.length=0,e$p._startIndex=0,e$p._isWorking=!1},e$p.clearRes=function(e$d,e$t){if(null!=e$d){void 0===e$t&&(e$t=!1),e$d=e$C.formatURL(e$d);var e$l=e$p.getAtlas(e$d);if(e$l){for(var e$k=0,e$W=e$l.length;e$k<e$W;e$k++){var e$i=e$l[e$k],e$A=e$p.getRes(e$i);delete e$p.loadedMap[e$i],e$p.clearCache(e$d.substring(e$C.basePath.length),e$i.substring(e$C.basePath.length)),e$A&&e$A.destroy(e$t)}e$l.length=0,delete e$p.atlasMap[e$d],delete e$p.loadedMap[e$d]}else{var e$B=e$p.loadedMap[e$d];e$B&&(delete e$p.loadedMap[e$d],e$B instanceof laya.resource.Texture&&e$B.bitmap&&e$B.destroy(e$t))}}},e$p.clearTextureRes=function(e$d){e$d=e$C.formatURL(e$d);var e$t=laya.net.Loader.getAtlas(e$d),e$l=e$t&&0<e$t.length?laya.net.Loader.getRes(e$t[0]):laya.net.Loader.getRes(e$d);e$l&&e$l.bitmap&&(e$K.isConchApp&&!e$K.isConchWebGL?e$l.bitmap.source.releaseTexture&&e$l.bitmap.source.releaseTexture():null==e$l.bitmap._atlaser&&e$l.bitmap.releaseResource(!0))},e$p.getRes=function(e$d){return e$p.loadedMap[e$C.formatURL(e$d)]},e$p.getAtlas=function(e$d){return e$p.atlasMap[e$C.formatURL(e$d)]},e$p.cacheRes=function(e$d,e$t){e$d=e$C.formatURL(e$d),null!=e$p.loadedMap[e$d]?console.warn("Resources already exist,is repeated loading:",e$d):e$p.loadedMap[e$d]=e$t},e$p.setGroup=function(e$d,e$t){e$p.groupMap[e$t]||(e$p.groupMap[e$t]=[]),e$p.groupMap[e$t].push(e$d)},e$p.clearResByGroup=function(e$d){if(e$p.groupMap[e$d]){var e$t=e$p.groupMap[e$d],e$l=0,e$k=e$t.length;for(e$l=0;e$l<e$k;e$l++)e$p.clearRes(e$t[e$l]);e$t.length=0}},e$p.keepCache=function(e$d,e$t){if(e$d&&e$t){var e$l=e$p.cacheSet[e$t];e$l?-1==e$l.indexOf(e$d)&&e$l.push(e$d):e$p.cacheSet[e$t]=[e$d]}},e$p.clearCache=function(e$d,e$t){if(e$d&&e$t){var e$l=e$p.cacheSet[e$t];if(e$l){var e$k=e$l.indexOf(e$d);if(-1!==e$k){var e$W=e$l.length-1;0==e$W?(delete e$p.cacheSet[e$t],0<e$p.imgMgrSet[e$t]?e$A.imgMgrFree(e$t,e$p.imgMgrSet[e$t]):e$p.clearRes(e$t,!0)):(e$l[e$k]=e$l[e$W],e$l.length=e$W)}}}},e$p.saveObject=function(e$d,e$t,e$l){if(e$t&&e$d){var e$k=e$p.objectSet[e$d];e$k?(console.warn("Loader.saveObject: "+e$d),e$k[0]=e$t,e$k[1]=e$l):e$p.objectSet[e$d]=[e$t,e$l,[]]}},e$p.findObject=function(e$d){if(e$d){var e$t=e$p.objectSet[e$d];if(e$t)return e$t[0]}return null},e$p.keepObject=function(e$d,e$t){if(e$d&&e$t){var e$l=e$p.objectSet[e$t];e$l&&-1===e$l[2].indexOf(e$d)&&e$l[2].push(e$d)}},e$p.clearObject=function(e$d,e$t){if(e$d&&e$t){var e$l=e$p.objectSet[e$t];if(e$l){var e$k=e$l[2],e$W=e$k.indexOf(e$d);if(-1!==e$W){var e$i=e$k.length-1;0==e$i?(delete e$p.objectSet[e$t],e$l[1]&&e$l[1].call(null,e$l[0])):(e$k[e$W]=e$k[e$i],e$k.length=e$i)}}}},e$p.TEXT="text",e$p.JSON="json",e$p.XML="xml",e$p.BUFFER="arraybuffer",e$p.IMAGE="image",e$p.SOUND="sound",e$p.ATLAS="atlas",e$p.FONT="font",e$p.TTF="ttf",e$p.PLF="plf",e$p.PKM="pkm",e$p.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},e$p.parserMap={},e$p.groupMap={},e$p.maxTimeOut=100,e$p.loadedMap={},e$p.preLoadedMap={},e$p.atlasMap={},e$p._loaders=[],e$p._isWorking=!1,e$p._startIndex=0,e$p.imgCache={},e$p.cacheSet={},e$p.objectSet={},e$p.imgMgrSet={},e$p}(),e$od=function(e$d){var e$J;function e$c(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},e$c.__super.call(this);for(var e$d=0;e$d<this._maxPriority;e$d++)this._resInfos[e$d]=[]}e$b(e$c,"laya.net.LoaderManager",e$I);var e$t=e$c.prototype;return e$t.create=function(e$d,e$l,e$t,e$k,e$W,e$i,e$A,e$B){if(null==e$i&&(e$i=2),null==e$A&&(e$A=!0),e$d instanceof Array){var e$o=e$d,e$I=e$o.length,e$b=0;if(e$t)var e$f=e$e.create(e$t.caller,e$t.method,e$t.args,!1);for(var e$J=0;e$J<e$I;e$J++){var e$c=e$o[e$J];"string"==typeof e$c&&(e$c=e$o[e$J]={url:e$c}),e$c.progress=0}for(e$J=0;e$J<e$I;e$J++){e$c=e$o[e$J];var e$Y=e$t?e$e.create(null,e$z,[e$c],!1):null,e$w=e$t||e$l?e$e.create(null,e$D,[e$c]):null;this._create(e$c.url,e$w,e$Y,e$c.clas||e$k,e$c.params||e$W,null!=e$c.priority&&0<=e$c.priority?e$c.priority:e$i,e$A,e$c.group||e$B)}function e$D(e$d,e$t){e$b++,e$d.progress=1,e$b===e$I&&e$l&&e$l.run()}function e$z(e$d,e$t){e$d.progress=e$t;for(var e$l=0,e$k=0;e$k<e$I;e$k++){e$l+=e$o[e$k].progress}var e$W=e$l/e$I;e$f.runWith(e$W)}return!0}return this._create(e$d,e$l,e$t,e$k,e$W,e$i,e$A,e$B)},e$t._create=function(e$t,e$l,e$d,e$k,e$W,e$i,e$A,e$B){e$t&&""!=e$t||console.error("加载的url不合法 "+e$t),null==e$i&&(e$i=2),null==e$A&&(e$A=!0);var e$o=e$C.formatURL(e$t),e$I=this.getRes(e$o);if(e$I)!e$I.hasOwnProperty("loaded")||e$I.loaded?(e$d&&e$d.runWith(1),e$l&&e$l.run()):e$l&&e$q.loader._createListener(e$t,e$l.caller,e$l.method,e$l.args,!0,!1);else{var e$b=e$F.getFileExtension(e$t),e$f=e$c.createMap[e$b];if(!e$f)throw new Error("LoaderManager:unknown file("+e$t+") extension with: "+e$b+".");e$k||(e$k=e$f[0]);var e$J=e$f[1];if("atlas"==e$b)this.load(e$t,e$l,e$d,e$J,e$i,e$A);else{e$k===e$bd&&(e$J="htmlimage"),(e$I=e$k?new e$k:null).hasOwnProperty("_loaded")&&(e$I._loaded=!1),e$I._setUrl(e$t),e$B&&e$I._setGroup(e$B),this._createLoad(e$I,e$t,e$e.create(null,function(e$d){e$I&&!e$I.destroyed&&e$d&&e$I.onAsynLoaded.call(e$I,e$t,e$d,e$W),e$l&&e$l.run();e$q.loader.event(e$t)}),e$d,e$J,e$i,!1,e$B,!0),e$A&&this.cacheRes(e$o,e$I)}}return e$I},e$t.load=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){e$d&&""!=e$d||console.error("加载的url不合法 "+e$d);var e$o=this;if(null==e$W&&(e$W=2),null==e$i&&(e$i=!0),void 0===e$B&&(e$B=!1),e$d instanceof Array)return this._loadAssets(e$d,e$t,e$l,e$k,e$W,e$i,e$A);var e$I=e$Bd.getRes(e$d);if(null!=e$I)e$q.timer.frameOnce(1,null,function(){e$l&&e$l.runWith(1),e$t&&e$t.runWith(e$I),e$o._loaderCount||e$o.event("complete")});else{var e$b=e$c._resMap[e$d];e$b?(e$t&&e$b._createListener("complete",e$t.caller,e$t.method,e$t.args,!1,!1),e$l&&e$b._createListener("progress",e$l.caller,e$l.method,e$l.args,!1,!1)):((e$b=this._infoPool.length?this._infoPool.pop():new e$J).url=e$d,e$b.clas=null,e$b.type=e$k,e$b.cache=e$i,e$b.group=e$A,e$b.ignoreCache=e$B,e$b.priority=e$W,e$t&&e$b.on("complete",e$t.caller,e$t.method,e$t.args),e$l&&e$b.on("progress",e$l.caller,e$l.method,e$l.args),e$c._resMap[e$d]=e$b,e$W=e$W<this._maxPriority?0<=e$W?e$W:0:this._maxPriority-1,this._resInfos[e$W].push(e$b),this._next())}return this},e$t.cancel=function(e$d,e$t,e$l){if(e$I=e$c._resMap[e$d]){e$t&&e$I.off("complete",e$t.caller,e$t.method,!1),e$l&&e$I.off("progress",e$l.caller,e$l.method,!1);var e$k=e$I.getListener("complete"),e$W=e$I.getListener("progress");if(!(e$k&&e$k.head||e$W&&e$W.head)){if(e$I.loader){var e$i=e$I.loader;e$i.imageCancel(e$d),e$i.offAll(),e$i._data=null,e$i._customParse=!1,e$i._url=null,e$i._class=null,e$i._type=null,this._loaders.push(e$i),this._loaderCount--,delete this._loaderMap[e$I.url]}for(var e$A=0;e$A<this._maxPriority;e$A++)for(var e$B=this._resInfos[e$A],e$o=e$B.length-1;-1<e$o;e$o--){var e$I;(e$I=e$B[e$o])&&e$I.url===e$d&&(e$B[e$o]=null,e$I.destroy(),e$I.offAll(),this._infoPool.push(e$I))}delete e$c._resMap[e$d],this._next()}}},e$t._createLoad=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){var e$I=this;if(null==e$i&&(e$i=2),null==e$A&&(e$A=!0),void 0===e$o&&(e$o=!1),e$t instanceof Array)return this._loadAssets(e$t,e$l,e$k,e$W,e$i,e$A,e$B);var e$b=e$Bd.getRes(e$t);if(null!=e$b)e$q.timer.frameOnce(1,null,function(){e$k&&e$k.runWith(1),e$l&&e$l.runWith(e$b),e$I._loaderCount||e$I.event("complete")});else{var e$f=e$c._resMap[e$t];e$f?(e$l&&e$f._createListener("complete",e$l.caller,e$l.method,e$l.args,!1,!1),e$k&&e$f._createListener("progress",e$k.caller,e$k.method,e$k.args,!1,!1)):((e$f=this._infoPool.length?this._infoPool.pop():new e$J).url=e$t,e$f.clas=e$d,e$f.type=e$W,e$f.cache=e$A,e$f.group=e$B,e$f.ignoreCache=e$o,e$f.priority=e$i,e$l&&e$f.on("complete",e$l.caller,e$l.method,e$l.args),e$k&&e$f.on("progress",e$k.caller,e$k.method,e$k.args),e$c._resMap[e$t]=e$f,e$i=e$i<this._maxPriority?0<=e$i?e$i:0:this._maxPriority-1,this._resInfos[e$i].push(e$f),this._next())}return this},e$t._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var e$d=0;e$d<this._maxPriority;e$d++)for(var e$t=this._resInfos[e$d];0<e$t.length;){var e$l=e$t.shift();if(e$l)return this._doLoad(e$l)}this._loaderCount||this.event("complete")}},e$t._doLoad=function(e$t){var e$l=this._loaders.length?this._loaders.pop():new e$Bd;this._loaderCount++,(this._loaderMap[e$t.url]=e$l).on("complete",null,e$W),e$l.on("progress",null,function(e$d){e$t.event("progress",e$d)}),e$l.on("error",null,function(e$d){e$W(null)}),e$t.loader=e$l;var e$k=this;function e$W(e$d){e$l.offAll(),e$l._data=null,e$l._customParse=!1,e$l._url=null,e$l._class=null,e$l._type=null,e$k._loaders.push(e$l),e$k._loaderCount--,delete e$k._loaderMap[e$t.url],e$k._endLoad(e$t,e$d instanceof Array?[e$d]:e$d),e$k._next()}e$l._class=e$t.clas,1<=e$t.priority?(e$l.priority=e$t.priority,e$l.realTime=!1):(e$l.priority=0,e$l.realTime=!0),e$l.load(e$t.url,e$t.type,e$t.cache,e$t.group,e$t.ignoreCache)},e$t._endLoad=function(e$d,e$t){var e$l=e$d.url;if(null==e$t){var e$k=this._failRes[e$l]||0;if(e$k<this.retryNum)return console.warn("[warn]Retry to load:",e$l),this._failRes[e$l]=e$k+1,void e$q.timer.once(this.retryDelay,this,this._addReTry,[e$d],!1);console.warn("[error]Failed to load:",e$l),this.event("error",e$l)}this._failRes[e$l]&&(this._failRes[e$l]=0),delete e$c._resMap[e$l],e$d.event("complete",e$t),e$d.destroy(),e$d.offAll(),this._infoPool.push(e$d)},e$t._addReTry=function(e$d){this._resInfos[this._maxPriority-1].push(e$d),this._next()},e$t.clearRes=function(e$d,e$t){void 0===e$t&&(e$t=!1),e$Bd.clearRes(e$d,e$t)},e$t.getRes=function(e$d){return e$Bd.getRes(e$d)},e$t.cacheRes=function(e$d,e$t){e$Bd.cacheRes(e$d,e$t)},e$t.clearTextureRes=function(e$d){e$Bd.clearTextureRes(e$d)},e$t.setGroup=function(e$d,e$t){e$Bd.setGroup(e$d,e$t)},e$t.clearResByGroup=function(e$d){e$Bd.clearResByGroup(e$d)},e$t.clearUnLoaded=function(){for(var e$d=0;e$d<this._maxPriority;e$d++){for(var e$t=this._resInfos[e$d],e$l=e$t.length-1;-1<e$l;e$l--){var e$k=e$t[e$l];e$k&&(e$k.destroy(),e$k.offAll(),this._infoPool.push(e$k))}e$t.length=0}this._loaderCount=0,e$c._resMap={}},e$t.cancelLoadByUrls=function(e$d){if(e$d)for(var e$t=0,e$l=e$d.length;e$t<e$l;e$t++)this.cancelLoadByUrl(e$d[e$t])},e$t.cancelLoadByUrl=function(e$d){for(var e$t=0;e$t<this._maxPriority;e$t++)for(var e$l=this._resInfos[e$t],e$k=e$l.length-1;-1<e$k;e$k--){var e$W=e$l[e$k];e$W&&e$W.url===e$d&&(e$l[e$k]=null,e$W.destroy(),e$W.offAll(),this._infoPool.push(e$W))}e$c._resMap[e$d]&&delete e$c._resMap[e$d]},e$t._loadAssets=function(e$d,e$l,e$A,e$t,e$k,e$W,e$i){null==e$k&&(e$k=2),null==e$W&&(e$W=!0);for(var e$B=e$d.length,e$o=0,e$I=0,e$b=[],e$f=!0,e$J=0;e$J<e$B;e$J++){var e$c=e$d[e$J];if(!e$c)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+e$d);"string"==typeof e$c&&(e$c={url:e$c,type:e$t,size:1,priority:e$k}),e$c.size||(e$c.size=1),e$c.progress=0,e$I+=e$c.size,e$b.push(e$c);var e$Y=e$A?e$e.create(null,e$z,[e$c],!1):null,e$w=e$l||e$A?e$e.create(null,e$D,[e$c]):null;this.load(e$c.url,e$w,e$Y,e$c.type,null!=e$c.priority&&0<=e$c.priority?e$c.priority:2,e$W,e$c.group||e$i)}function e$D(e$d,e$t){e$o++,e$d.progress=1,e$t||(e$f=!1),e$o===e$B&&e$l&&e$l.runWith(e$f)}function e$z(e$d,e$t){if(null!=e$A){e$d.progress=e$t;for(var e$l=0,e$k=0;e$k<e$b.length;e$k++){var e$W=e$b[e$k];e$l+=e$W.size*e$W.progress}var e$i=e$l/e$I;e$A.runWith(e$i)}}return this},e$c.cacheRes=function(e$d,e$t){e$Bd.cacheRes(e$d,e$t)},e$c._resMap={},e$o(e$c,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),e$c.__init$=function(){e$J=function(e$d){function e$t(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,e$t.__super.call(this)}return e$b(e$t,"",e$I),e$t.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},e$t}()},e$c}(),e$Id=(function(e$d){function e$W(e$d){e$W.__super.call(this),e$d||(e$d=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var e$t=0,e$l=0,e$k=0;e$k<20;e$k++)e$k%5!=4?this._mat[e$t++]=e$d[e$k]:this._alpha[e$l++]=e$d[e$k];this._action=e$r.createFilterAction(32),this._action.data=this}e$b(e$W,"laya.filters.ColorFilter",e$z);var e$t=e$W.prototype;e$q.imps(e$t,{"laya.filters.IFilter":!0}),e$t.callNative=function(e$d){e$d._$P.cf=this;e$d.conchModel&&e$d.conchModel.setFilterMatrix&&e$d.conchModel.setFilterMatrix(this._mat,this._alpha)},e$Y(0,e$t,"type",function(){return 32}),e$Y(0,e$t,"action",function(){return this._action})}(),function(e$d){function e$k(e$d,e$t,e$l){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===e$t&&(e$t=0),e$k.__super.call(this),this._byteClass=e$l||e$Z,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,e$d&&0<e$t&&e$t<65535&&this.connect(e$d,e$t)}e$b(e$k,"laya.net.Socket",e$I);var e$t=e$k.prototype;e$t.connect=function(e$d,e$t){var e$l="ws://"+e$d+":"+e$t;e$l="https:"==e$V.window.location.protocol?"wss://"+e$d+":"+e$t:"ws://"+e$d+":"+e$t,this.connectByUrl(e$l)},e$t.connectByUrl=function(e$d){var e$t=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new e$V.window.WebSocket(e$d,this.protocols):this._socket=new e$V.window.WebSocket(e$d),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(e$d){e$t._onOpen(e$d)},this._socket.onmessage=function(e$d){e$t._onMessage(e$d)},this._socket.onclose=function(e$d){e$t._onClose(e$d)},this._socket.onerror=function(e$d){e$t._onError(e$d)}},e$t.cleanSocket=function(){try{this._socket.close()}catch(e$d){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},e$t.close=function(){if(null!=this._socket)try{this._socket.close()}catch(e$d){}},e$t._onOpen=function(e$d){this._connected=!0,this.event("open",e$d)},e$t._onMessage=function(e$d){if(e$d&&e$d.data){var e$t=e$d.data;if(this.disableInput&&e$t)this.event("message",e$t);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var e$l=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,e$t&&("string"==typeof e$t?this._input.writeUTFBytes(e$t):this._input.writeArrayBuffer(e$t),this._addInputPosition=this._input.pos,this._input.pos=e$l),this.event("message",e$t)}}},e$t._onClose=function(e$d){this._connected=!1,this.event("close",e$d)},e$t._onError=function(e$d){this.event("error",e$d)},e$t.send=function(e$d){this._socket.send(e$d)},e$t.flush=function(){if(this._output&&0<this._output.length){var e$t;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(e$d){e$t=e$d}this._output.endian=this.endian,this._output.clear(),e$t&&this.event("error",e$t)}},e$Y(0,e$t,"input",function(){return this._input}),e$Y(0,e$t,"output",function(){return this._output}),e$Y(0,e$t,"connected",function(){return this._connected}),e$Y(0,e$t,"endian",function(){return this._endian},function(e$d){this._endian=e$d,null!=this._input&&(this._input.endian=e$d),null!=this._output&&(this._output.endian=e$d)}),e$k.LITTLE_ENDIAN="littleEndian",e$k.BIG_ENDIAN="bigEndian"}(),function(e$d){function e$B(){e$B.__super.call(this),this._$1__id=++e$B._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(e$B._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,e$y.currentResourceManager&&e$y.currentResourceManager.addResource(this)}e$b(e$B,"laya.resource.Resource",e$I);var e$t=e$B.prototype;return e$q.imps(e$t,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),e$t._setUrl=function(e$d){var e$t;this._url!==e$d&&(this._url&&((e$t=e$B._urlResourcesMap[this._url]).splice(e$t.indexOf(this),1),0===e$t.length&&delete e$B._urlResourcesMap[this._url]),e$d&&((e$t=e$B._urlResourcesMap[e$d])||(e$B._urlResourcesMap[e$d]=e$t=[]),e$t.push(this)),this._url=e$d)},e$t._getGroup=function(){return this._group},e$t._setGroup=function(e$d){var e$t;this._group!==e$d&&(this._group&&((e$t=e$B._groupResourcesMap[this._group]).splice(e$t.indexOf(this),1),0===e$t.length&&delete e$B._groupResourcesMap[this._group]),e$d&&((e$t=e$B._groupResourcesMap[e$d])||(e$B._groupResourcesMap[e$d]=e$t=[]),e$t.push(this)),this._group=e$d)},e$t._addReference=function(){this._referenceCount++},e$t._removeReference=function(){this._referenceCount--},e$t._clearReference=function(){this._referenceCount=0},e$t._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},e$t.recreateResource=function(){this.completeCreate()},e$t.disposeResource=function(){},e$t.activeResource=function(e$d){void 0===e$d&&(e$d=!1),this._lastUseFrameCount=e$X.loopCount,!this._destroyed&&this.__loaded&&(this._released||e$d)&&this.recreateResource()},e$t.releaseResource=function(e$d){return void 0===e$d&&(e$d=!0),!(!e$d&&this.lock)&&(!(this._released&&!e$d)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},e$t.onAsynLoaded=function(e$d,e$t,e$l){throw new Error("Resource: must override this function!")},e$t.destroy=function(){var e$d;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete e$B._idResourcesMap[this.id],this._url&&((e$d=e$B._urlResourcesMap[this._url])&&(e$d.splice(e$d.indexOf(this),1),0===e$d.length&&delete e$B._urlResourcesMap[this.url]),e$Bd.clearRes(this._url),this.__loaded||e$r.cancelLoadByUrl(this._url)),this._group&&((e$d=e$B._groupResourcesMap[this._group]).splice(e$d.indexOf(this),1),0===e$d.length&&delete e$B._groupResourcesMap[this.url]))},e$t.completeCreate=function(){this._released=!1,this.event("recovered",this)},e$t.dispose=function(){this.destroy()},e$Y(0,e$t,"memorySize",function(){return this._memorySize},function(e$d){var e$t=e$d-this._memorySize;this._memorySize=e$d,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,e$t),this.resourceManager&&this.resourceManager.addSize(e$t)}),e$Y(0,e$t,"_loaded",null,function(e$d){this.__loaded=e$d}),e$Y(0,e$t,"loaded",function(){return this.__loaded}),e$Y(0,e$t,"id",function(){return this._$1__id}),e$Y(0,e$t,"destroyed",function(){return this._destroyed}),e$Y(0,e$t,"group",function(){return this._getGroup()},function(e$d){this._setGroup(e$d)}),e$Y(0,e$t,"resourceManager",function(){return this._resourceManager}),e$Y(0,e$t,"url",function(){return this._url}),e$Y(0,e$t,"released",function(){return this._released}),e$Y(0,e$t,"referenceCount",function(){return this._referenceCount}),e$B.getResourceByID=function(e$d){return e$B._idResourcesMap[e$d]},e$B.getResourceByURL=function(e$d,e$t){return void 0===e$t&&(e$t=0),null==e$B._urlResourcesMap[e$d]?null:e$B._urlResourcesMap[e$d][e$t]},e$B.getResourceCountByURL=function(e$d){return e$B._urlResourcesMap[e$d].length},e$B.destroyUnusedResources=function(e$d){var e$t;if(e$d){var e$l=e$B._groupResourcesMap[e$d];if(e$l)for(var e$k=e$l.slice(),e$W=0,e$i=e$k.length;e$W<e$i;e$W++)(e$t=e$k[e$W]).lock||0!==e$t._referenceCount||e$t.destroy()}else for(var e$A in e$B._idResourcesMap)(e$t=e$B._idResourcesMap[e$A]).lock||0!==e$t._referenceCount||e$t.destroy()},e$B._uniqueIDCounter=0,e$B._idResourcesMap={},e$B._urlResourcesMap={},e$B._groupResourcesMap={},e$B}()),e$bd=function(e$d){function e$p(e$d,e$t){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,e$p.__super.call(this),e$d&&null!=e$d._addReference&&e$d._addReference(),this.setTo(e$d,e$t)}e$b(e$p,"laya.resource.Texture",e$I);var e$t=e$p.prototype;return e$t._setUrl=function(e$d){this.url=e$d},e$t.setTo=function(e$d,e$t){if(e$d instanceof e$A.HTMLElement){var e$l=e$gd.create("2D",e$d);this.bitmap=e$l}else this.bitmap=e$d;if(this.uv=e$t||e$p.DEF_UV,e$d){this._w=e$d.width,this._h=e$d.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var e$k=this;if(this._loaded)e$r.addToAtlas&&e$r.addToAtlas(e$k);else{var e$W=e$d;e$W instanceof laya.resource.HTMLImage&&e$W.image&&e$W.image.addEventListener("load",function(e$d){e$r.addToAtlas&&e$r.addToAtlas(e$k)},!1)}}},e$t.active=function(){this.bitmap&&this.bitmap.activeResource()},e$t.destroy=function(e$d){if(void 0===e$d&&(e$d=!1),this.alphaTexture&&(this.alphaTexture.destroy(e$d),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var e$t=this.bitmap;e$d?(e$K.isConchApp&&e$t.source&&e$t.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e$t.dispose(),e$t._clearReference()):(e$t._removeReference(),0==e$t.referenceCount&&(e$K.isConchApp&&e$t.source&&e$t.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,e$t.dispose())),this.url&&this===e$q.loader.getRes(this.url)&&e$q.loader.clearRes(this.url,e$d),this._loaded=!1}},e$t.load=function(e$d){var e$t=this;this._loaded=!1,e$d=e$C.customFormat(e$d);var e$l=this.bitmap||(this.bitmap=e$Gd.create(e$d));e$l.uri=e$d,e$l&&e$l._addReference();var e$k=this;e$l.onload=function(){e$l.onload=null,e$k._loaded=!0,e$t.sourceWidth=e$t._w=e$l.width,e$t.sourceHeight=e$t._h=e$l.height,e$k.event("loaded",this),e$r.addToAtlas&&e$r.addToAtlas(e$k)}},e$t.addTextureToAtlas=function(e$d){e$r.addTextureToAtlas(this)},e$t.getPixels=function(e$d,e$t,e$l,e$k){if(e$K.isConchApp){var e$W=this.bitmap;if(e$W.source&&e$W.source.getImageData){var e$i=e$W.source.getImageData(e$d,e$t,e$l,e$k),e$A=new Uint8Array(e$i);return Array.from(e$A)}return null}return e$K.isWebGL?e$r.getTexturePixels(this,e$d,e$t,e$l,e$k):(e$V.canvas.size(e$l,e$k),e$V.canvas.clear(),e$V.context.drawTexture(this,-e$d,-e$t,this.width,this.height,0,0),e$V.context.getImageData(0,0,e$l,e$k).data)},e$t.onAsynLoaded=function(e$d,e$t){if(e$t){if("function"!=typeof e$t._addReference)throw new Error("bitmap._addReference is not a function. "+e$t.className+" "+typeof e$t._addReference+" "+e$t.constructor);e$t._addReference()}this.setTo(e$t,this.uv),this._loaded&&this.event("loaded",this)},e$Y(0,e$t,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),e$Y(0,e$t,"loaded",function(){return this._loaded}),e$Y(0,e$t,"released",function(){return!this.bitmap||this.bitmap.released}),e$Y(0,e$t,"width",function(){return this._w?this._w:this.uv&&this.uv!==e$p.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(e$d){this._w=e$d,this.sourceWidth||(this.sourceWidth=e$d)}),e$Y(0,e$t,"repeat",function(){return!e$K.isWebGL||!this.bitmap||this.bitmap.repeat},function(e$d){e$d&&e$K.isWebGL&&this.bitmap&&(this.bitmap.repeat=e$d)&&(this.bitmap.enableMerageInAtlas=!1)}),e$Y(0,e$t,"height",function(){return this._h?this._h:this.uv&&this.uv!==e$p.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(e$d){this._h=e$d,this.sourceHeight||(this.sourceHeight=e$d)}),e$Y(0,e$t,"isLinearSampling",function(){return!e$K.isWebGL||9728!=this.bitmap.minFifter},function(e$d){!e$d&&e$K.isWebGL&&(e$d||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),e$p.moveUV=function(e$d,e$t,e$l){for(var e$k=0;e$k<8;e$k+=2)e$l[e$k]+=e$d,e$l[e$k+1]+=e$t;return e$l},e$p.create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){void 0===e$i&&(e$i=0),void 0===e$A&&(e$A=0),void 0===e$B&&(e$B=0),void 0===e$o&&(e$o=0);var e$I=e$d instanceof laya.resource.Texture,e$b=e$I?e$d.uv:e$p.DEF_UV,e$f=e$I?e$d.bitmap:e$d,e$J=e$r.isAtlas(e$f);if(e$J){var e$c=e$f._atlaser,e$Y=e$d._atlasID;if(-1==e$Y)throw new Error("create texture error");e$f=e$c._inAtlasTextureBitmapValue[e$Y],e$b=e$c._inAtlasTextureOriUVValue[e$Y]}var e$w=new e$p(e$f,null);e$f.width&&e$t+e$k>e$f.width&&(e$k=e$f.width-e$t),e$f.height&&e$l+e$W>e$f.height&&(e$W=e$f.height-e$l),e$w.width=e$k,e$w.height=e$W,e$w.offsetX=e$i,e$w.offsetY=e$A,e$w.sourceWidth=e$B||e$k,e$w.sourceHeight=e$o||e$W;var e$D=1/e$f.width,e$z=1/e$f.height;e$t*=e$D,e$l*=e$z,e$k*=e$D,e$W*=e$z;var e$e=e$w.uv[0],e$g=e$w.uv[1],e$H=e$w.uv[4],e$R=e$w.uv[5],e$G=e$H-e$e,e$q=e$R-e$g,e$L=e$p.moveUV(e$b[0],e$b[1],[e$t,e$l,e$t+e$k,e$l,e$t+e$k,e$l+e$W,e$t,e$l+e$W]);e$w.uv=[e$e+e$L[0]*e$G,e$g+e$L[1]*e$q,e$H-(1-e$L[2])*e$G,e$g+e$L[3]*e$q,e$H-(1-e$L[4])*e$G,e$R-(1-e$L[5])*e$q,e$e+e$L[6]*e$G,e$R-(1-e$L[7])*e$q],e$J&&e$w.addTextureToAtlas();var e$$=e$f.scaleRate;return e$$&&1!=e$$?(e$w.sourceWidth/=e$$,e$w.sourceHeight/=e$$,e$w.width/=e$$,e$w.height/=e$$,e$w.scaleRate=e$$,e$w.offsetX/=e$$,e$w.offsetY/=e$$):e$w.scaleRate=1,e$w},e$p.createFromTexture=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$d.scaleRate;1!=e$i&&(e$t*=e$i,e$l*=e$i,e$k*=e$i,e$W*=e$i);var e$A=e$$.TEMP.setTo(e$t-e$d.offsetX,e$l-e$d.offsetY,e$k,e$W),e$B=e$A.intersection(e$p._rect1.setTo(0,0,e$d.width,e$d.height),e$p._rect2);if(!e$B)return null;var e$o=e$p.create(e$d,e$B.x,e$B.y,e$B.width,e$B.height,e$B.x-e$A.x,e$B.y-e$A.y,e$k,e$W);if(e$o.bitmap&&e$o.bitmap._removeReference)return e$o.bitmap._removeReference(),e$o;var e$I="bitmap:"+(e$o.bitmap?e$o.bitmap.constructor?e$o.bitmap.constructor.name:e$o.bitmap.__className:"")+", url:"+(e$d.url+" | "+(e$o.bitmap?e$o.bitmap.url:e$d.url))+", x="+e$t+",y="+e$l+",width="+e$k+",height="+e$W+", result="+(e$B?e$B.x+","+e$B.y+","+e$B.width+","+e$B.height:"null")+", rect="+e$A.x+","+e$A.y+","+e$A.width+","+e$A.height;throw new Error("报错：bitmap._removeReference is not a function  "+e$I)},e$p.DEF_UV=[0,0,1,0,1,1,0,1],e$p.INV_UV=[0,1,1,1,1,0,0,0],e$p._rect1=new e$$,e$p._rect2=new e$$,e$p}(),e$d=function(e$d){var e$B;function e$i(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,e$i.__super.call(this)}e$b(e$i,"laya.utils.TimeLine",e$I);var e$t=e$i.prototype;return e$t.to=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$W&&(e$W=0),this._create(e$d,e$t,e$l,e$k,e$W,!0)},e$t.from=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$W&&(e$W=0),this._create(e$d,e$t,e$l,e$k,e$W,!1)},e$t._create=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$P.getItemByClass("tweenData",e$B);return e$A.isTo=e$i,e$A.type=0,e$A.target=e$d,e$A.duration=e$l,e$A.data=e$t,e$A.startTime=this._startTime+e$W,e$A.endTime=e$A.startTime+e$A.duration,e$A.ease=e$k,this._startTime=Math.max(e$A.endTime,this._startTime),this._tweenDataList.push(e$A),this._startTimeSort=!0,this._endTimeSort=!0,this},e$t.addLabel=function(e$d,e$t){var e$l=e$P.getItemByClass("tweenData",e$B);return e$l.type=1,e$l.data=e$d,e$l.endTime=e$l.startTime=this._startTime+e$t,this._labelDic||(this._labelDic={}),this._labelDic[e$d]=e$l,this._tweenDataList.push(e$l),this},e$t.removeLabel=function(e$d){if(this._labelDic&&this._labelDic[e$d]){var e$t=this._labelDic[e$d];if(e$t){var e$l=this._tweenDataList.indexOf(e$t);-1<e$l&&this._tweenDataList.splice(e$l,1)}delete this._labelDic[e$d]}},e$t.gotoTime=function(e$d){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var e$t,e$l,e$k,e$W;for(var e$i in this._firstTweenDic)if(e$l=this._firstTweenDic[e$i])for(var e$A in e$l)e$l.diyTarget.hasOwnProperty(e$A)&&(e$l.diyTarget[e$A]=e$l[e$A]);for(e$i in this._tweenDic)(e$t=this._tweenDic[e$i]).clear(),delete this._tweenDic[e$i];if(this._index=0,this._gidIndex=0,this._currTime=e$d,this._lastTime=e$V.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=e$k=this._tweenDataList.concat(),e$k.sort(function(e$d,e$t){return e$d.endTime>e$t.endTime?1:e$d.endTime<e$t.endTime?-1:0})}else e$k=this._endTweenDataList;for(var e$B=0,e$o=e$k.length;e$B<e$o;e$B++)if(0==(e$W=e$k[e$B]).type){if(!(e$d>=e$W.endTime))break;this._index=Math.max(this._index,e$B+1);var e$I=e$W.data;if(e$W.isTo)for(var e$b in e$I)e$W.target[e$b]=e$I[e$b]}for(e$B=0,e$o=this._tweenDataList.length;e$B<e$o;e$B++)0==(e$W=this._tweenDataList[e$B]).type&&e$d>=e$W.startTime&&e$d<e$W.endTime&&(this._index=Math.max(this._index,e$B+1),this._gidIndex++,(e$t=e$P.getItemByClass("tween",e$O))._create(e$W.target,e$W.data,e$W.duration,e$W.ease,e$e.create(this,this._animComplete,[this._gidIndex]),0,!1,e$W.isTo,!0,!1),e$t.setStartTime(this._currTime-(e$d-e$W.startTime)),e$t._updateEase(this._currTime),e$t.gid=this._gidIndex,this._tweenDic[this._gidIndex]=e$t)}},e$t.gotoLabel=function(e$d){if(null!=this._labelDic){var e$t=this._labelDic[e$d];e$t&&this.gotoTime(e$t.startTime)}},e$t.pause=function(){e$q.timer.clear(this,this._update)},e$t.resume=function(){this.play(this._currTime,this._loopKey)},e$t.play=function(e$d,e$t){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(e$d,e$t){return e$d.startTime>e$t.startTime?1:e$d.startTime<e$t.startTime?-1:0});for(var e$l=0,e$k=this._tweenDataList.length;e$l<e$k;e$l++){var e$W=this._tweenDataList[e$l];if(null!=e$W&&0==e$W.type){var e$i=e$W.target,e$A=e$i.$_GID||(e$i.$_GID=e$F.getGID()),e$B=null;for(var e$o in null==this._firstTweenDic[e$A]?((e$B={}).diyTarget=e$i,this._firstTweenDic[e$A]=e$B):e$B=this._firstTweenDic[e$A],e$W.data)null==e$B[e$o]&&(e$B[e$o]=e$i[e$o])}}}"string"==typeof e$d?this.gotoLabel(e$d):this.gotoTime(e$d),this._loopKey=e$t,this._lastTime=e$V.now(),e$q.timer.frameLoop(1,this,this._update)}},e$t._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var e$d in this._tweenDic)(e$t=this._tweenDic[e$d]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var e$t,e$l=e$V.now(),e$k=e$l-this._lastTime,e$W=this._currTime+=e$k*this.scale;for(e$d in this._lastTime=e$l,this._tweenDic)(e$t=this._tweenDic[e$d])._updateEase(e$W);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var e$i=this._tweenDataList[this._index];e$W>=e$i.startTime&&(this._index++,0==e$i.type?(this._gidIndex++,(e$t=e$P.getItemByClass("tween",e$O))._create(e$i.target,e$i.data,e$i.duration,e$i.ease,e$e.create(this,this._animComplete,[this._gidIndex]),0,!1,e$i.isTo,!0,!1),e$t.setStartTime(e$W),e$t.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=e$t)._updateEase(e$W)):this.event("label",e$i.data))}},e$t._animComplete=function(e$d){this._tweenDic[e$d]&&delete this._tweenDic[e$d]},e$t._complete=function(){this.event("complete")},e$t.reset=function(){var e$d;if(this._labelDic)for(e$d in this._labelDic)delete this._labelDic[e$d];for(e$d in this._tweenDic)this._tweenDic[e$d].clear(),delete this._tweenDic[e$d];for(e$d in this._firstTweenDic)delete this._firstTweenDic[e$d];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var e$t,e$l=0;for(e$t=this._tweenDataList.length,e$l=0;e$l<e$t;e$l++)this._tweenDataList[e$l]&&this._tweenDataList[e$l].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,e$q.timer.clear(this,this._update)},e$t.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},e$Y(0,e$t,"index",function(){return this._frameIndex},function(e$d){this._frameIndex=e$d,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),e$Y(0,e$t,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),e$i.to=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$W&&(e$W=0),(new e$i).to(e$d,e$t,e$l,e$k,e$W)},e$i.from=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$W&&(e$W=0),(new e$i).from(e$d,e$t,e$l,e$k,e$W)},e$i.__init$=function(){e$B=function(){function e$d(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return e$b(e$d,""),e$d.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,e$P.recover("tweenData",this)},e$d}()},e$i}(),e$fd=function(e$W){function e$l(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,e$l.__super.call(this),this._style=e$B.EMPTY}e$b(e$l,"laya.display.Sprite",e$W);var e$d=e$l.prototype;return e$q.imps(e$d,{"laya.display.ILayout":!0}),e$d.createConchModel=function(){return new ConchNode},e$d.destroy=function(e$d){if(void 0===e$d&&(e$d=!0),this._releaseMem(),!this._destroyed){this.filters=null;var e$t=this.mask;e$t&&(this.mask=null,e$t.destroy(e$d))}e$W.prototype.destroy.call(this,e$d),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},e$d.updateZOrder=function(){e$F.updateOrder(this._childs)&&this.repaint()},e$d.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},e$d.setBounds=function(e$d){this._set$P("uBounds",e$d)},e$d.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new e$$),e$$._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},e$d.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new e$$),e$$._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},e$d._boundPointsToParent=function(e$d){void 0===e$d&&(e$d=!1);var e$t=0,e$l=0;this._style&&(e$t=this._style._tf.translateX,e$l=this._style._tf.translateY,e$d=e$d||0!==this._style._tf.rotate,this._style.scrollRect&&(e$t+=this._style.scrollRect.x,e$l+=this._style.scrollRect.y));var e$k=this._getBoundPointsM(e$d);if(!e$k||e$k.length<1)return e$k;if(8!=e$k.length&&(e$k=e$d?e$R.scanPList(e$k):e$$._getWrapRec(e$k,e$$.TEMP)._getBoundPoints()),!this.transform)return e$F.transPointList(e$k,this._x-e$t,this._y-e$l),e$k;var e$W=e$L.TEMP,e$i=0,e$A=e$k.length;for(e$i=0;e$i<e$A;e$i+=2)e$W.x=e$k[e$i],e$W.y=e$k[e$i+1],this.toParentPoint(e$W),e$k[e$i]=e$W.x,e$k[e$i+1]=e$W.y;return e$k},e$d.getGraphicBounds=function(e$d){return void 0===e$d&&(e$d=!1),this._graphics?this._graphics.getBounds(e$d):e$$.TEMP.setTo(0,0,0,0)},e$d._getBoundPointsM=function(e$d){if(void 0===e$d&&(e$d=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var e$t=e$F.clearArray(this._$P.temBM),e$l=e$$.TEMP;return e$l.copyFrom(this.scrollRect),e$F.concatArray(e$t,e$l._getBoundPoints()),e$t}for(var e$k,e$W,e$i,e$A=this._graphics?this._graphics.getBoundPoints():e$F.clearArray(this._$P.temBM),e$B=0,e$o=(e$i=this._childs).length;e$B<e$o;e$B++)(e$k=e$i[e$B])instanceof laya.display.Sprite&&1==e$k.visible&&(e$W=e$k._boundPointsToParent(e$d))&&(e$A=e$A?e$F.concatArray(e$A,e$W):e$W);return e$A},e$d.getStyle=function(){return this._style===e$B.EMPTY&&(this._style=new e$B),this._style},e$d.setStyle=function(e$d){this._style=e$d},e$d._adjustTransform=function(){this._tfChanged=!1;var e$d,e$t=this._style._tf,e$l=e$t.scaleX,e$k=e$t.scaleY;if(e$t.rotate||1!==e$l||1!==e$k||e$t.skewX||e$t.skewY){(e$d=this._transform||(this._transform=e$S.create())).bTransform=!0;var e$W=.0174532922222222*(e$t.rotate-e$t.skewX),e$i=.0174532922222222*(e$t.rotate+e$t.skewY),e$A=Math.cos(e$i),e$B=Math.sin(e$i),e$o=Math.sin(e$W),e$I=Math.cos(e$W);return e$d.a=e$l*e$A,e$d.b=e$l*e$B,e$d.c=-e$k*e$o,e$d.d=e$k*e$I,e$d.tx=e$d.ty=0,e$d}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,e$d},e$d.pos=function(e$d,e$t,e$l){if(void 0===e$l&&(e$l=!1),this._x!==e$d||this._y!==e$t){if(this.destroyed)return this;if(e$l){this._x=e$d,this._y=e$t,this.conchModel&&this.conchModel.pos(this._x,this._y);var e$k=this._parent;e$k&&0===e$k._repaint&&(e$k._repaint=1,e$k.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=e$d,this.y=e$t}return this},e$d.pivot=function(e$d,e$t){return this.pivotX=e$d,this.pivotY=e$t,this},e$d.size=function(e$d,e$t){return this.width=e$d,this.height=e$t,this},e$d.scale=function(e$d,e$t,e$l){void 0===e$l&&(e$l=!1);var e$k=this.getStyle(),e$W=e$k._tf;if(e$W.scaleX!=e$d||e$W.scaleY!=e$t){if(this.destroyed)return this;if(e$l){e$k.setScale(e$d,e$t),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e$d,e$t),this._renderType|=4;var e$i=this._parent;e$i&&0===e$i._repaint&&(e$i._repaint=1,e$i.parentRepaint())}else this.scaleX=e$d,this.scaleY=e$t}return this},e$d.skew=function(e$d,e$t){return this.skewX=e$d,this.skewY=e$t,this},e$d.render=function(e$d,e$t,e$l){e$X.spriteCount++,e$n.renders[this._renderType]._fun(this,e$d,e$t+this._x,e$l+this._y),this._repaint=0},e$d.drawToCanvas=function(e$d,e$t,e$l,e$k){if(e$K.isConchNode){var e$W=e$gd.create("2D");return new e$x(e$d,e$t,e$W).ctx.setCanvasType(1),this.conchModel.drawToCanvas(e$W.source,e$l,e$k),e$W}return e$r.drawToCanvas(this,this._renderType,e$d,e$t,e$l,e$k)},e$d.customRender=function(e$d,e$t,e$l){this._renderType|=1024},e$d._applyFilters=function(){var e$d;if(!e$K.isWebGL&&((e$d=this._$P.filters)&&!(e$d.length<1)))for(var e$t=0,e$l=e$d.length;e$t<e$l;e$t++)e$d[e$t].action.apply(this._$P.cacheCanvas)},e$d._isHaveGlowFilter=function(){var e$d,e$t=0;if(this.filters)for(e$t=0;e$t<this.filters.length;e$t++)if(8==this.filters[e$t].type)return!0;for(e$t=0,e$d=this._childs.length;e$t<e$d;e$t++)if(this._childs[e$t]._isHaveGlowFilter())return!0;return!1},e$d.localToGlobal=function(e$d,e$t){void 0===e$t&&(e$t=!1),!0===e$t&&(e$d=new e$L(e$d.x,e$d.y));for(var e$l=this;e$l&&e$l!=e$q.stage;)e$d=e$l.toParentPoint(e$d),e$l=e$l.parent;return e$d},e$d.globalToLocal=function(e$d,e$t){void 0===e$t&&(e$t=!1),e$t&&(e$d=new e$L(e$d.x,e$d.y));for(var e$l=this,e$k=[];e$l&&e$l!=e$q.stage;)e$k.push(e$l),e$l=e$l.parent;for(var e$W=e$k.length-1;0<=e$W;)e$d=(e$l=e$k[e$W]).fromParentPoint(e$d),e$W--;return e$d},e$d.toParentPoint=function(e$d){if(!e$d)return e$d;e$d.x-=this.pivotX,e$d.y-=this.pivotY,this.transform&&this._transform.transformPoint(e$d),e$d.x+=this._x,e$d.y+=this._y;var e$t=this._style.scrollRect;return e$t&&(e$d.x-=e$t.x,e$d.y-=e$t.y),e$d},e$d.fromParentPoint=function(e$d){if(!e$d)return e$d;e$d.x-=this._x,e$d.y-=this._y;var e$t=this._style.scrollRect;return e$t&&(e$d.x+=e$t.x,e$d.y+=e$t.y),this.transform&&this._transform.invertTransformPoint(e$d),e$d.x+=this.pivotX,e$d.y+=this.pivotY,e$d},e$d.on=function(e$d,e$t,e$l,e$k){return 1!==this._mouseEnableState&&this.isMouseEvent(e$d)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e$d,e$t,e$l,e$k,!1)):e$W.prototype.on.call(this,e$d,e$t,e$l,e$k)},e$d.once=function(e$d,e$t,e$l,e$k){return 1!==this._mouseEnableState&&this.isMouseEvent(e$d)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(e$d,e$t,e$l,e$k,!0)):e$W.prototype.once.call(this,e$d,e$t,e$l,e$k)},e$d._$2__onDisplay=function(){if(1!==this._mouseEnableState){var e$d=this;for(e$d=e$d.parent;e$d&&1!==e$d._mouseEnableState&&!e$d._getBit(2);)e$d.mouseEnabled=!0,e$d._setBit(2,!0),e$d=e$d.parent}},e$d.loadImage=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=this;return void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),this.graphics.loadImage(e$d,e$t,e$l,e$k,e$W,function(e$d){e$A.destroyed||(e$A.size(e$t+(e$k||e$d.width),e$l+(e$W||e$d.height)),e$A.repaint(),e$i&&e$i.runWith(e$d))}),this},e$d.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},e$d._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},e$d._childChanged=function(e$d){this._childs.length?this._renderType|=2048:this._renderType&=-2049,e$d&&this._get$P("hasZorder")&&e$q.timer.callLater(this,this.updateZOrder),this.repaint()},e$d.parentRepaint=function(){var e$d=this._parent;e$d&&0===e$d._repaint&&(e$d._repaint=1,e$d.parentRepaint())},e$d.startDrag=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){void 0===e$t&&(e$t=!1),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=300),void 0===e$i&&(e$i=!1),void 0===e$A&&(e$A=.92),this._$P.dragging||this._set$P("dragging",new e$u),this._$P.dragging.start(this,e$d,e$t,e$l,e$k,e$W,e$i,e$A)},e$d.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},e$d._releaseMem=function(){if(this._$P){var e$d=this._$P.cacheCanvas;e$d&&e$d.ctx&&(e$P.recover("RenderContext",e$d.ctx),e$d.ctx.canvas.size(0,0),e$d.ctx=null);var e$t=this._$P._filterCache;e$t&&(e$t.destroy(),e$t.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},e$d._setDisplay=function(e$d){e$d||this._releaseMem(),e$W.prototype._setDisplay.call(this,e$d)},e$d.hitTestPoint=function(e$d,e$t){var e$l=this.globalToLocal(e$L.TEMP.setTo(e$d,e$t));return e$d=e$l.x,e$t=e$l.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?e$$.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(e$d,e$t)},e$d.getMousePoint=function(){return this.globalToLocal(e$L.TEMP.setTo(e$q.stage.mouseX,e$q.stage.mouseY))},e$d._getWords=function(){return null},e$d._addChildsToLayout=function(e$d){var e$t=this._getWords();if(null==e$t&&0==this._childs.length)return!1;if(e$t)for(var e$l=0,e$k=e$t.length;e$l<e$k;e$l++)e$d.push(e$t[e$l]);e$l=0;for(var e$W=this._childs.length;e$l<e$W;++e$l){var e$i=this._childs[e$l];e$i._style._enableLayout()&&e$i._addToLayout(e$d)}return!0},e$d._addToLayout=function(e$d){this._style.absolute||(this._style.block?e$d.push(this):this._addChildsToLayout(e$d)&&(this.x=this.y=0))},e$d._isChar=function(){return!1},e$d._getCSSStyle=function(){return this._style.getCSSStyle()},e$d._setAttributes=function(e$d,e$t){switch(e$d){case"x":this.x=parseFloat(e$t);break;case"y":this.y=parseFloat(e$t);break;case"width":this.width=parseFloat(e$t);break;case"height":this.height=parseFloat(e$t);break;default:this[e$d]=e$t}},e$d._layoutLater=function(){this.parent&&this.parent._layoutLater()},e$Y(0,e$d,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(e$d){this._optimizeScrollRect!=e$d&&(this._optimizeScrollRect=e$d,this.conchModel&&this.conchModel.optimizeScrollRect(e$d))}),e$Y(0,e$d,"customRenderEnable",null,function(e$d){if(e$d&&(this._renderType|=1024,e$K.isConchNode)){e$l.CustomList.push(this);var e$t=new e$gd("2d");e$t._setContext(new CanvasRenderingContext2D),this.customContext=new e$x(0,0,e$t),e$t.context.setCanvasType&&e$t.context.setCanvasType(2),this.conchModel.custom(e$t.context)}}),e$Y(0,e$d,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(e$d){this.cacheAs=e$d?this._$P.hasFilter?"none":"normal":"none"}),e$Y(0,e$d,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(e$d){var e$t=this._$P.cacheCanvas;if(e$d!==(e$t?e$t.type:"none")){if("none"!==e$d)this._getBit(1)||this._setUpNoticeType(1),e$t||(e$t=this._set$P("cacheCanvas",e$P.getItemByClass("cacheCanvas",Object))),e$t.type=e$d,e$t.reCache=!0,this._renderType|=16,"bitmap"==e$d&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(e$t){var e$l=e$t;e$l&&e$l.ctx&&(e$P.recover("RenderContext",e$l.ctx),e$l.ctx.canvas.size(0,0),e$l.ctx=null),e$P.recover("cacheCanvas",e$t)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),e$Y(0,e$d,"zOrder",function(){return this._zOrder},function(e$d){this._zOrder!=e$d&&(this._zOrder=e$d,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(e$d),this._parent&&(e$d&&this._parent._set$P("hasZorder",!0),e$q.timer.callLater(this._parent,this.updateZOrder)))}),e$Y(0,e$d,"rotation",function(){return this._style._tf.rotate},function(e$d){var e$t=this.getStyle();if(e$t._tf.rotate!==e$d){e$t.setRotate(e$d),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(e$d),this._renderType|=4;var e$l=this._parent;e$l&&0===e$l._repaint&&(e$l._repaint=1,e$l.parentRepaint())}}),e$Y(0,e$d,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(e$d){this._width!==e$d&&(this._width=e$d,this.conchModel&&this.conchModel.size(e$d,this._height),this.repaint())}),e$Y(0,e$d,"x",function(){return this._x},function(e$d){if(this._x!==e$d){if(this.destroyed)return;this._x=e$d,this.conchModel&&this.conchModel.pos(e$d,this._y);var e$t=this._parent;e$t&&0===e$t._repaint&&(e$t._repaint=1,e$t.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),e$Y(0,e$d,"globalScaleY",function(){for(var e$d=1,e$t=this;e$t&&e$t!==e$q.stage;)e$d*=e$t.scaleY,e$t=e$t.parent;return e$d}),e$Y(0,e$d,"hitArea",function(){return this._$P.hitArea},function(e$d){this._set$P("hitArea",e$d)}),e$Y(0,e$d,"staticCache",function(){return this._$P.staticCache},function(e$d){this._set$P("staticCache",e$d),e$d||this.reCache()}),e$Y(0,e$d,"texture",function(){return this._texture},function(e$d){this._texture!=e$d&&(this._texture=e$d,this.graphics.cleanByTexture(e$d,0,0))}),e$Y(0,e$d,"y",function(){return this._y},function(e$d){if(this._y!==e$d){if(this.destroyed)return;this._y=e$d,this.conchModel&&this.conchModel.pos(this._x,e$d);var e$t=this._parent;e$t&&0===e$t._repaint&&(e$t._repaint=1,e$t.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),e$Y(0,e$d,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(e$d){this._height!==e$d&&(this._height=e$d,this.conchModel&&this.conchModel.size(this._width,e$d),this.repaint())}),e$Y(0,e$d,"blendMode",function(){return this._style.blendMode},function(e$d){this.getStyle().blendMode=e$d,this.conchModel&&this.conchModel.blendMode(e$d),e$d&&"source-over"!=e$d?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),e$Y(0,e$d,"scaleX",function(){return this._style._tf.scaleX},function(e$d){var e$t=this.getStyle();if(e$t._tf.scaleX!==e$d){e$t.setScaleX(e$d),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e$d,e$t._tf.scaleY),this._renderType|=4;var e$l=this._parent;e$l&&0===e$l._repaint&&(e$l._repaint=1,e$l.parentRepaint())}}),e$Y(0,e$d,"scaleY",function(){return this._style._tf.scaleY},function(e$d){var e$t=this.getStyle();if(e$t._tf.scaleY!==e$d){e$t.setScaleY(e$d),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(e$t._tf.scaleX,e$d),this._renderType|=4;var e$l=this._parent;e$l&&0===e$l._repaint&&(e$l._repaint=1,e$l.parentRepaint())}}),e$Y(0,e$d,"stage",function(){return e$q.stage}),e$Y(0,e$d,"skewX",function(){return this._style._tf.skewX},function(e$d){var e$t=this.getStyle();if(e$t._tf.skewX!==e$d){e$t.setSkewX(e$d),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e$d,e$t._tf.skewY),this._renderType|=4;var e$l=this._parent;e$l&&0===e$l._repaint&&(e$l._repaint=1,e$l.parentRepaint())}}),e$Y(0,e$d,"scrollRect",function(){return this._style.scrollRect},function(e$d){this.getStyle().scrollRect=e$d,this.repaint(),e$d?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(e$d.x,e$d.y,e$d.width,e$d.height)):(this._renderType&=-129,this.conchModel&&(e$l.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),e$Y(0,e$d,"skewY",function(){return this._style._tf.skewY},function(e$d){var e$t=this.getStyle();if(e$t._tf.skewY!==e$d){e$t.setSkewY(e$d),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(e$t._tf.skewX,e$d),this._renderType|=4;var e$l=this._parent;e$l&&0===e$l._repaint&&(e$l._repaint=1,e$l.parentRepaint())}}),e$Y(0,e$d,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(e$d){this._tfChanged=!1,(this._transform=e$d)&&(this._x=e$d.tx,this._y=e$d.ty,e$d.tx=e$d.ty=0,this.conchModel&&this.conchModel.transform(e$d.a,e$d.b,e$d.c,e$d.d,this._x,this._y)),e$d?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),e$Y(0,e$d,"pivotX",function(){return this._style._tf.translateX},function(e$d){this.getStyle().setTranslateX(e$d),this.conchModel&&this.conchModel.pivot(e$d,this._style._tf.translateY),this.repaint()}),e$Y(0,e$d,"pivotY",function(){return this._style._tf.translateY},function(e$d){this.getStyle().setTranslateY(e$d),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,e$d),this.repaint()}),e$Y(0,e$d,"alpha",function(){return this._style.alpha},function(e$d){this._style&&this._style.alpha!==e$d&&(e$d=e$d<0?0:1<e$d?1:e$d,this.getStyle().alpha=e$d,this.conchModel&&this.conchModel.alpha(e$d),1!==e$d?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),e$Y(0,e$d,"visible",function(){return this._style.visible},function(e$d){this._style&&this._style.visible!==e$d&&(this.getStyle().visible=e$d,this.conchModel&&this.conchModel.visible(e$d),this.parentRepaint())}),e$Y(0,e$d,"graphics",function(){return this._graphics||(this.graphics=e$r.createGraphics())},function(e$d){this._graphics&&(this._graphics._sp=null),(this._graphics=e$d)?(this._renderType&=-2,this._renderType|=512,(e$d._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(e$l.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),e$Y(0,e$d,"filters",function(){return this._$P.filters},function(e$d){e$d&&0===e$d.length&&(e$d=null),this._$P.filters!=e$d&&(this._set$P("filters",e$d?e$d.slice():null),e$K.isConchApp&&(this.conchModel&&(e$l.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),e$K.isWebGL&&(e$d&&e$d.length?this._renderType|=32:this._renderType&=-33),e$d&&0<e$d.length?(this._getBit(1)||this._setUpNoticeType(1),e$K.isWebGL&&1==e$d.length&&e$d[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(e$K.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),e$Y(0,e$d,"parent",e$W.prototype._$get_parent,function(e$d){e$q.superSet(e$dd,this,"parent",e$d),e$d&&this._getBit(2)&&this._$2__onDisplay()}),e$Y(0,e$d,"mask",function(){return this._$P._mask},function(e$d){e$d&&this.mask&&this.mask._$P.maskParent||(e$d?(this.cacheAs="bitmap",this._set$P("_mask",e$d),e$d._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",e$d),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(e$d?e$d.conchModel:null),this._renderType|=64,this.parentRepaint())}),e$Y(0,e$d,"mouseEnabled",function(){return 1<this._mouseEnableState},function(e$d){this._mouseEnableState=e$d?2:1}),e$Y(0,e$d,"globalScaleX",function(){for(var e$d=1,e$t=this;e$t&&e$t!==e$q.stage;)e$d*=e$t.scaleX,e$t=e$t.parent;return e$d}),e$Y(0,e$d,"mouseX",function(){return this.getMousePoint().x}),e$Y(0,e$d,"mouseY",function(){return this.getMousePoint().y}),e$l.fromImage=function(e$d){return(new e$l).loadImage(e$d)},e$l._cachePool=[],e$l.CustomList=[],e$o(e$l,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=e$A.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),e$l}(e$dd),e$Jd=function(e$d){function e$t(e$d){this._audio=null,this._onEnd=null,this._resumePlay=null,e$t.__super.call(this),this._onEnd=e$F.bind(this.__onEnd,this),this._resumePlay=e$F.bind(this.__resumePlay,this),e$d.addEventListener("ended",this._onEnd),this._audio=e$d}e$b(e$t,"laya.media.h5audio.AudioSoundChannel",e$kd);var e$l=e$t.prototype;return e$l.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(e$q.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},e$l.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,e$V.container.appendChild(this._audio),this._audio.play()}catch(e$d){this.event("error")}},e$l.play=function(e$d){this.isStopped=!1;try{this._audio.playbackRate=e$T.playbackRate,this._audio.currentTime=this.startTime}catch(e$d){return void this._audio.addEventListener("canplay",this._resumePlay)}e$T.addChannel(this),e$V.container.appendChild(this._audio),!e$d&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},e$l.stop=function(){this.isStopped=!0,e$T.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&e$K.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),e$V.onIE||this._audio!=e$ld._musicAudio&&e$P.recover("audio:"+this.url,this._audio),e$V.removeElement(this._audio),this._audio=null)},e$l.pause=function(){this.isStopped=!0,e$T.removeChannel(this),"pause"in this._audio&&this._audio.pause()},e$l.resume=function(){this._audio&&(this.isStopped=!1,e$T.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},e$Y(0,e$l,"position",function(){return this._audio?this._audio.currentTime:0}),e$Y(0,e$l,"duration",function(){return this._audio?this._audio.duration:0}),e$Y(0,e$l,"volume",function(){return this._audio?this._audio.volume:1},function(e$d){this._audio&&(this._audio.volume=e$d)}),e$t}(),e$cd=function(e$d){function e$t(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=e$id.ctx,e$t.__super.call(this),this._onPlayEnd=e$F.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}e$b(e$t,"laya.media.webaudio.WebAudioSoundChannel",e$kd);var e$l=e$t.prototype;return e$l.play=function(e$d){if(e$T.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var e$t=this.context,e$l=this.gain,e$k=e$t.createBufferSource();(this.bufferSource=e$k).buffer=this.audioBuffer,e$k.connect(e$l),e$l&&e$l.disconnect(),e$l.connect(e$t.destination),e$k.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=e$V.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(e$k.loop=!0),e$k.playbackRate.setTargetAtTime?e$k.playbackRate.setTargetAtTime(e$T.playbackRate,this.context.currentTime,.1):e$k.playbackRate.value=e$T.playbackRate,e$k.start(0,this.startTime),!e$d&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},e$l.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(e$q.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},e$l._clearBufferSource=function(){if(this.bufferSource){var e$d=this.bufferSource;e$d.stop?e$d.stop(0):e$d.noteOff(0),e$d.disconnect(0),e$d.onended=null,e$t._tryCleanFailed||this._tryClearBuffer(e$d),this.bufferSource=null}},e$l._tryClearBuffer=function(e$d){try{e$d.buffer=null}catch(e$d){e$t._tryCleanFailed=!0}},e$l.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,e$T.removeChannel(this),this.startHandler=null,this.completeHandler=null},e$l.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,e$T.removeChannel(this)},e$l.resume=function(){this.startTime=this._pauseTime,this.play(!1)},e$Y(0,e$l,"position",function(){return this.bufferSource?(e$V.now()-this._startTime)/1e3+this.startTime:0}),e$Y(0,e$l,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),e$Y(0,e$l,"volume",function(){return this._volume},function(e$d){this.isStopped||(this._volume=e$d,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(e$d,this.context.currentTime,.1):this.gain.gain.value=e$d)}),e$t._tryCleanFailed=!1,e$t}(),e$Yd=function(e$d){function e$t(){e$t.__super.call(this),this._w=0,this._h=0}e$b(e$t,"laya.resource.Bitmap",e$Id);var e$l=e$t.prototype;return e$Y(0,e$l,"width",function(){return this._w}),e$Y(0,e$l,"height",function(){return this._h}),e$Y(0,e$l,"source",function(){return this._source}),e$t}(),e$wd=function(e$t){function e$d(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,e$d.__super.call(this),this._interval=e$k.animationInterval,this._setUpNoticeType(1)}e$b(e$d,"laya.display.AnimationPlayerBase",e$t);var e$l=e$d.prototype;return e$l.play=function(e$d,e$t,e$l,e$k){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=!0),void 0===e$l&&(e$l=""),void 0===e$k&&(e$k=!0),this._isPlaying=!0,this.index="string"==typeof e$d?this._getFrameByLabel(e$d):e$d,this.loop=e$t,this._actionName=e$l,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},e$l._getFrameByLabel=function(e$d){var e$t=0;for(e$t=0;e$t<this._count;e$t++)if(this._labels[e$t]&&0<=this._labels[e$t].indexOf(e$d))return e$t;return 0},e$l._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},e$l._setControlNode=function(e$d){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=e$d)&&e$d!=this&&(e$d.on("display",this,this._checkResumePlaying),e$d.on("undisplay",this,this._checkResumePlaying))},e$l._setDisplay=function(e$d){e$t.prototype._setDisplay.call(this,e$d),this._checkResumePlaying()},e$l._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},e$l.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},e$l.addLabel=function(e$d,e$t){this._labels||(this._labels={}),this._labels[e$t]||(this._labels[e$t]=[]),this._labels[e$t].push(e$d)},e$l.removeLabel=function(e$d){if(e$d){if(this._labels)for(var e$t in this._labels)this._removeLabelFromLabelList(this._labels[e$t],e$d)}else this._labels=null},e$l._removeLabelFromLabelList=function(e$d,e$t){if(e$d)for(var e$l=e$d.length-1;0<=e$l;e$l--)e$d[e$l]==e$t&&e$d.splice(e$l,1)},e$l.gotoAndStop=function(e$d){this.index="string"==typeof e$d?this._getFrameByLabel(e$d):e$d,this.stop()},e$l._displayToIndex=function(e$d){},e$l.clear=function(){this.stop(),this._labels=null},e$Y(0,e$l,"interval",function(){return this._interval},function(e$d){this._interval!=e$d&&(this._frameRateChanged=!0,this._interval=e$d,this._isPlaying&&0<e$d&&this.timerLoop(e$d,this,this._frameLoop,null,!0,!0))}),e$Y(0,e$l,"isPlaying",function(){return this._isPlaying}),e$Y(0,e$l,"index",function(){return this._index},function(e$d){if(this._index=e$d,this._displayToIndex(e$d),this._labels&&this._labels[e$d])for(var e$t=this._labels[e$d],e$l=0,e$k=e$t.length;e$l<e$k;e$l++)this.event("label",e$t[e$l])}),e$Y(0,e$l,"count",function(){return this._count}),e$d.WRAP_POSITIVE=0,e$d.WRAP_REVERSE=1,e$d.WRAP_PINGPONG=2,e$d}(e$fd),e$Dd=function(e$t){function e$c(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,e$c.__super.call(this),this.overflow=e$c.VISIBLE,this._style=new e$td(this),this._style.wordWrap=!1}e$b(e$c,"laya.display.Text",e$t);var e$d=e$c.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._lines=null,this._words&&(this._words.length=0,this._words=null)},e$d._getBoundPointsM=function(e$d){void 0===e$d&&(e$d=!1);var e$t=e$$.TEMP;return e$t.setTo(0,0,this.width,this.height),e$t._getBoundPoints()},e$d.getGraphicBounds=function(e$d){void 0===e$d&&(e$d=!1);var e$t=e$$.TEMP;return e$t.setTo(0,0,this.width,this.height),e$t},e$d._getCSSStyle=function(){return this._style},e$d.lang=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b){if(e$d=e$c.langPacks&&e$c.langPacks[e$d]?e$c.langPacks[e$d]:e$d,arguments.length<2)this._text=e$d;else{for(var e$f=0,e$J=arguments.length;e$f<e$J;e$f++)e$d=e$d.replace("{"+e$f+"}",arguments[e$f+1]);this._text=e$d}},e$d._isPassWordMode=function(){var e$d=this._style.password;return"prompt"in this&&this.prompt==this._text&&(e$d=!1),e$d},e$d._getPassWordTxt=function(e$d){var e$t;e$t="";for(var e$l=e$d.length;0<e$l;e$l--)e$t+="●";return e$t},e$d.renderText=function(e$d,e$t){var e$l=this.graphics;e$l.clear(!0);var e$k=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(e$V.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);e$V.context.font=e$k;var e$W=this.padding,e$i=e$W[3],e$A="left",e$B=this._lines,e$o=this.leading+this._charSize.height,e$I=this._currBitmapFont;e$I&&(e$o=this.leading+e$I.getMaxHeight());var e$b=e$W[0];if(!e$I&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(e$A="right",e$i=this._width-e$W[1]):"center"==this.align&&(e$A="center",e$i=.5*this._width+e$W[3]-e$W[1])),0<this._height){var e$f=this._textHeight>this._height?"top":this.valign;"middle"===e$f?e$b=.5*(this._height-e$t*e$o)+e$W[0]-e$W[2]:"bottom"===e$f&&(e$b=this._height-e$t*e$o-e$W[2])}var e$J=this._style;if(e$I&&e$I.autoScaleSize)var e$c=e$I.fontSize/this.fontSize;if(this._clipPoint)if(e$l.save(),e$I&&e$I.autoScaleSize){var e$Y=0,e$w=0;e$Y=this._width?this._width-e$W[3]-e$W[1]:this._textWidth,e$w=this._height?this._height-e$W[0]-e$W[2]:this._textHeight,e$Y*=e$c,e$w*=e$c,e$l.clipRect(e$W[3],e$W[0],e$Y,e$w)}else e$l.clipRect(e$W[3],e$W[0],this._width?this._width-e$W[3]-e$W[1]:this._textWidth,this._height?this._height-e$W[0]-e$W[2]:this._textHeight);var e$D=e$J.password;"prompt"in this&&this.prompt==this._text&&(e$D=!1);for(var e$z=0,e$e=0,e$g=Math.min(this._lines.length,e$t+e$d)||1,e$H=e$d;e$H<e$g;e$H++){var e$R,e$G=e$B[e$H];if(e$D){var e$q=e$G.length;e$G="";for(var e$L=e$q;0<e$L;e$L--)e$G+="●"}if(e$z=e$i-(this._clipPoint?this._clipPoint.x:0),e$e=e$b+e$o*e$H-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(e$A,e$z,e$e,e$H),e$I){var e$$=this.width;e$I.autoScaleSize&&(e$$=this.width*e$c),e$I.drawText(e$G,this,e$z,e$e,this.align,e$$)}else e$K.isWebGL?(this._words||(this._words=[]),(e$R=this._words.length>e$H-e$d?this._words[e$H-e$d]:new e$v).setText(e$G)):e$R=e$G,e$J.stroke?e$l.fillBorderText(e$R,e$z,e$e,e$k,this.color,e$J.strokeColor,e$J.stroke,e$A):e$l.fillText(e$R,e$z,e$e,e$k,this.color,e$A)}if(e$I&&e$I.autoScaleSize){var e$p=1/e$c;this.scale(e$p,e$p)}this._clipPoint&&e$l.restore(),this._startX=e$i,this._startY=e$b},e$d.drawUnderline=function(e$d,e$t,e$l,e$k){var e$W=this._lineWidths[e$k];switch(e$d){case"center":e$t-=e$W/2;break;case"right":e$t-=e$W}e$l+=this._charSize.height,this._graphics.drawLine(e$t,e$l,e$t+e$W,e$l,this.underlineColor||this.color,1)},e$d.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);e$V.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new e$L(0,0)):this._clipPoint=null;var e$d=this._lines.length;if(this.overflow!=e$c.VISIBLE){var e$t=this.overflow==e$c.HIDDEN?Math.floor:Math.ceil;e$d=Math.min(e$d,e$t((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var e$l=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(e$l,e$d),this.repaint()},e$d.evalTextSize=function(){var e$d,e$t=NaN;e$d=Math.max.apply(this,this._lineWidths),e$t=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],e$d==this._textWidth&&e$t==this._textHeight||(this._textWidth=e$d,this._textHeight=e$t,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},e$d.checkEnabledViewportOrNot=function(){return this.overflow==e$c.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},e$d.changeText=function(e$d){this._text!==e$d&&(this.lang(e$d+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},e$d.parseLines=function(e$d){var e$t=this.wordWrap||this.overflow==e$c.HIDDEN;if(e$t)var e$l=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var e$k=e$F.contextMeasureText(e$c._testWord);e$K.isConchApp&&0===e$k.width&&0===e$k.height&&(e$k=e$F.contextMeasureText("W")),this._charSize.width=e$k.width,this._charSize.height=e$k.height||this.fontSize}for(var e$W=e$d.replace(/\r\n/g,"\n").split("\n"),e$i=0,e$A=e$W.length;e$i<e$A;e$i++){var e$B=e$W[e$i];e$t?this.parseLine(e$B,e$l):(this._lineWidths.push(this.getTextWidth(e$B)),this._lines.push(e$B))}},e$d.parseLine=function(e$d,e$t){e$V.context;var e$l,e$k=this._lines,e$W=0,e$i=NaN,e$A=NaN,e$B=0;if((e$i=this.getTextWidth(e$d))<=e$t)return e$k.push(e$d),void this._lineWidths.push(e$i);e$i=this._charSize.width,0==(e$W=Math.floor(e$t/e$i))&&(e$W=1),e$A=e$i=this.getTextWidth(e$d.substring(0,e$W));for(var e$o=e$W,e$I=e$d.length;e$o<e$I;e$o++)if(e$t<(e$A+=e$i=this.getTextWidth(e$d.charAt(e$o))))if(this.wordWrap){var e$b=e$d.substring(e$B,e$o);if(e$b.charCodeAt(e$b.length-1)<255?(e$l=/(?:\w|-)+$/.exec(e$b))&&(e$o=e$l.index+e$B,0==e$l.index?e$o+=e$b.length:e$b=e$d.substring(e$B,e$o)):e$c.RightToLeft&&(e$l=/([\u0600-\u06FF])+$/.exec(e$b))&&(e$o=e$l.index+e$B,0==e$l.index?e$o+=e$b.length:e$b=e$d.substring(e$B,e$o)),e$k.push(e$b),this._lineWidths.push(e$A-e$i),!((e$B=e$o)+e$W<e$I)){e$k.push(e$d.substring(e$B,e$I)),this._lineWidths.push(this.getTextWidth(e$k[e$k.length-1])),e$B=-1;break}e$o+=e$W,e$A=e$i=this.getTextWidth(e$d.substring(e$B,e$o)),e$o--}else if(this.overflow==e$c.HIDDEN)return e$k.push(e$d.substring(0,e$o)),void this._lineWidths.push(this.getTextWidth(e$k[e$k.length-1]));this.wordWrap&&-1!=e$B&&(e$k.push(e$d.substring(e$B,e$I)),this._lineWidths.push(this.getTextWidth(e$k[e$k.length-1])))},e$d.getTextWidth=function(e$d){return this._currBitmapFont?this._currBitmapFont.getTextWidth(e$d):e$F.contextMeasureText(e$d).width},e$d.getWordWrapWidth=function(){var e$d=this.padding,e$t=NaN;return(e$t=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(e$t=this.wordWrap?100:e$V.width),e$t<=0&&(e$t=100),e$t-e$d[3]-e$d[1]},e$d.getCharPoint=function(e$d,e$t){this._isChanged&&e$q.timer.runCallLater(this,this.typeset);for(var e$l=0,e$k=this._lines,e$W=0,e$i=0,e$A=e$k.length;e$i<e$A;e$i++){if(e$d<(e$l+=e$k[e$i].length)){var e$B=e$i;break}e$W=e$l}var e$o=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;e$V.context.font=e$o;var e$I=this.getTextWidth(this._text.substring(e$W,e$d));return(e$t||new e$L).setTo(this._startX+e$I-(this._clipPoint?this._clipPoint.x:0),this._startY+e$B*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},e$Y(0,e$d,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(e$d){e$d!=this._width&&(e$q.superSet(e$fd,this,"width",e$d),this.isChanged=!0)}),e$Y(0,e$d,"textWidth",function(){return this._isChanged&&e$q.timer.runCallLater(this,this.typeset),this._textWidth}),e$Y(0,e$d,"height",function(){return this._height?this._height:this.textHeight},function(e$d){e$d!=this._height&&(e$q.superSet(e$fd,this,"height",e$d),this.isChanged=!0)}),e$Y(0,e$d,"textHeight",function(){return this._isChanged&&e$q.timer.runCallLater(this,this.typeset),this._textHeight}),e$Y(0,e$d,"padding",function(){return this._getCSSStyle().padding},function(e$d){this._getCSSStyle().padding=e$d,this.isChanged=!0}),e$Y(0,e$d,"bold",function(){return this._getCSSStyle().bold},function(e$d){this._getCSSStyle().bold=e$d,this.isChanged=!0}),e$Y(0,e$d,"text",function(){return this._text||""},function(e$d){this._text!==e$d&&(this.lang(e$d+""),this.isChanged=!0,this.event("change"))}),e$Y(0,e$d,"color",function(){return this._getCSSStyle().color},function(e$d){this._getCSSStyle().color!=e$d&&(this._getCSSStyle().color=e$d,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),e$Y(0,e$d,"font",function(){return this._getCSSStyle().fontFamily},function(e$d){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),e$c._bitmapFonts&&e$c._bitmapFonts[e$d]&&(this._currBitmapFont=e$c._bitmapFonts[e$d]),this._getCSSStyle().fontFamily=e$d,this.isChanged=!0}),e$Y(0,e$d,"fontSize",function(){return this._getCSSStyle().fontSize},function(e$d){this._getCSSStyle().fontSize=e$d,this.isChanged=!0}),e$Y(0,e$d,"italic",function(){return this._getCSSStyle().italic},function(e$d){this._getCSSStyle().italic=e$d,this.isChanged=!0}),e$Y(0,e$d,"align",function(){return this._getCSSStyle().align},function(e$d){this._getCSSStyle().align=e$d,this.isChanged=!0}),e$Y(0,e$d,"valign",function(){return this._getCSSStyle().valign},function(e$d){this._getCSSStyle().valign=e$d,this.isChanged=!0}),e$Y(0,e$d,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(e$d){this._getCSSStyle().wordWrap=e$d,this.isChanged=!0}),e$Y(0,e$d,"leading",function(){return this._getCSSStyle().leading},function(e$d){this._getCSSStyle().leading=e$d,this.isChanged=!0}),e$Y(0,e$d,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(e$d){this._getCSSStyle().backgroundColor=e$d,this.isChanged=!0}),e$Y(0,e$d,"borderColor",function(){return this._getCSSStyle().borderColor},function(e$d){this._getCSSStyle().borderColor=e$d,this.isChanged=!0}),e$Y(0,e$d,"stroke",function(){return this._getCSSStyle().stroke},function(e$d){this._getCSSStyle().stroke=e$d,this.isChanged=!0}),e$Y(0,e$d,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(e$d){this._getCSSStyle().strokeColor=e$d,this.isChanged=!0}),e$Y(0,e$d,"isChanged",null,function(e$d){this._isChanged!==e$d&&(this._isChanged=e$d)&&e$q.timer.callLater(this,this.typeset)}),e$Y(0,e$d,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(e$d){if(!(this.overflow!=e$c.SCROLL||this.textWidth<this._width)&&this._clipPoint){e$d=e$d<this.padding[3]?this.padding[3]:e$d;var e$t=this._textWidth-this._width;e$d=e$t<e$d?e$t:e$d;var e$l=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=e$d,this.renderText(this._lastVisibleLineIndex,e$l)}}),e$Y(0,e$d,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(e$d){if(!(this.overflow!=e$c.SCROLL||this.textHeight<this._height)&&this._clipPoint){e$d=e$d<this.padding[0]?this.padding[0]:e$d;var e$t=this._textHeight-this._height,e$l=(e$d=e$t<e$d?e$t:e$d)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=e$l;var e$k=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=e$d,this.renderText(e$l,e$k)}}),e$Y(0,e$d,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),e$Y(0,e$d,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),e$Y(0,e$d,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),e$Y(0,e$d,"underlineColor",function(){return this._underlineColor},function(e$d){this._underlineColor=e$d,this._isChanged=!0,this.typeset()}),e$c.registerBitmapFont=function(e$d,e$t){e$c._bitmapFonts||(e$c._bitmapFonts={}),e$c._bitmapFonts[e$d]=e$t},e$c.unregisterBitmapFont=function(e$d,e$t){if(void 0===e$t&&(e$t=!0),e$c._bitmapFonts&&e$c._bitmapFonts[e$d]){var e$l=e$c._bitmapFonts[e$d];e$t&&e$l.destroy(),delete e$c._bitmapFonts[e$d]}},e$c.setTextRightToLeft=function(){var e$d;(e$d=e$V.canvas.source.style).display="none",e$d.position="absolute",e$d.direction="rtl",e$K._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,e$V.document.body.appendChild(e$V.canvas.source)},e$c.supportFont=function(e$d){e$V.context.font="10px sans-serif";var e$t=e$F.contextMeasureText("abcji").width;e$V.context.font="10px "+e$d;var e$l=e$F.contextMeasureText("abcji").width;return console.log(e$t,e$l),e$t!==e$l},e$c._testWord="游",e$c.langPacks=null,e$c.VISIBLE="visible",e$c.SCROLL="scroll",e$c.HIDDEN="hidden",e$c.CharacterCache=!0,e$c.RightToLeft=!1,e$c._bitmapFonts=null,e$o(e$c,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),e$c}(e$fd),e$zd=function(e$f){function e$A(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",e$A.__super.call(this),this.offset=new e$L,this._canvasTransform=new e$S,this._previousOrientation=e$V.window.orientation;var e$t=this;this.transform=e$S.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var e$d=e$V.window,e$l=this;e$d.addEventListener("focus",function(){e$t._isFocused=!0,e$l.event("focus"),e$l.event("focuschange")}),e$d.addEventListener("blur",function(){e$t._isFocused=!1,e$l.event("blur"),e$l.event("focuschange"),e$l._isInputting()&&(e$Rd.inputElement.target.focus=!1)});var e$k="visibilityState",e$W="visibilitychange",e$i=e$d.document;void 0!==e$i.hidden?(e$W="visibilitychange",e$k="visibilityState"):void 0!==e$i.mozHidden?(e$W="mozvisibilitychange",e$k="mozVisibilityState"):void 0!==e$i.msHidden?(e$W="msvisibilitychange",e$k="msVisibilityState"):void 0!==e$i.webkitHidden&&(e$W="webkitvisibilitychange",e$k="webkitVisibilityState"),e$d.document.addEventListener(e$W,function(){"hidden"==e$V.document[e$k]?e$l._setStageVisible(!1):e$l._setStageVisible(!0)}),e$d.document.addEventListener("qbrowserVisibilityChange",function(e$d){e$l._setStageVisible(!e$d.hidden)}),e$d.addEventListener("resize",function(){var e$d=e$V.window.orientation;null!=e$d&&e$d!=e$t._previousOrientation&&e$l._isInputting()&&(e$Rd.inputElement.target.focus=!1),e$t._previousOrientation=e$d,e$l._isInputting()||e$l._resetCanvas()}),e$d.addEventListener("orientationchange",function(e$d){e$l._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),e$V.onMobile&&this.on("mousedown",this,this._onmouseMove)}e$b(e$A,"laya.display.Stage",e$f);var e$d=e$A.prototype;return e$d._setStageVisible=function(e$d){this._isVisibility!=e$d&&(this._isVisibility=e$d,this._isVisibility||this._isInputting()&&(e$Rd.inputElement.target.focus=!1),this.event("visibilitychange"))},e$d._isInputting=function(){return e$V.onMobile&&e$Rd.isInputting},e$d._changeCanvasSize=function(){this.setScreenSize(e$V.clientWidth*e$V.pixelRatio,e$V.clientHeight*e$V.pixelRatio)},e$d._resetCanvas=function(){if(this.screenAdaptationEnabled){var e$d=e$K._mainCanvas;e$d.source.style;e$d.size(1,1),e$q.timer.once(100,this,this._changeCanvasSize)}},e$d.setScreenSize=function(e$d,e$t){var e$l=!1;if("none"!==this._screenMode&&(e$l=(e$d/e$t<1?"vertical":"horizontal")!==this._screenMode)){var e$k=e$t;e$t=e$d,e$d=e$k}this.canvasRotation=e$l;var e$W=e$K._mainCanvas,e$i=e$W.source.style,e$A=this._canvasTransform.identity(),e$B=this._scaleMode,e$o=e$d/this.designWidth,e$I=e$t/this.designHeight,e$b=this.designWidth,e$f=this.designHeight,e$J=e$d,e$c=e$t,e$Y=e$V.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,e$B){case"noscale":e$o=e$I=1,e$J=this.designWidth,e$c=this.designHeight;break;case"showall":e$o=e$I=Math.min(e$o,e$I),e$b=e$J=Math.round(this.designWidth*e$o),e$f=e$c=Math.round(this.designHeight*e$I);break;case"noborder":e$o=e$I=Math.max(e$o,e$I),e$J=Math.round(this.designWidth*e$o),e$c=Math.round(this.designHeight*e$I);break;case"full":e$o=e$I=1,this._width=e$b=e$d,this._height=e$f=e$t;break;case"fixedwidth":e$I=e$o,this._height=e$f=Math.round(e$t/e$o);break;case"fixedheight":e$o=e$I,this._width=e$b=Math.round(e$d/e$I);break;case"fixedauto":e$d/e$t<this.designWidth/this.designHeight?(e$I=e$o,this._height=e$f=Math.round(e$t/e$o)):(e$o=e$I,this._width=e$b=Math.round(e$d/e$I))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,e$b=e$b+1&2147483646,e$f=e$f+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),e$o*=this.scaleX,e$I*=this.scaleY,1===e$o&&1===e$I?this.transform.identity():(this.transform.a=this._formatData(e$o/(e$J/e$b)),this.transform.d=this._formatData(e$I/(e$c/e$f)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),e$W.size(e$b,e$f),e$r.changeWebGLSize(e$b,e$f),e$A.scale(e$J/e$b/e$Y,e$c/e$f/e$Y),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(e$d-e$J)/e$Y:this.offset.x=.5*(e$d-e$J)/e$Y,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(e$t-e$c)/e$Y:this.offset.y=.5*(e$t-e$c)/e$Y,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),e$A.translate(this.offset.x,this.offset.y),this.canvasDegree=0,e$l&&("horizontal"===this._screenMode?(e$A.rotate(Math.PI/2),e$A.translate(e$t/e$Y,0),this.canvasDegree=90):(e$A.rotate(-Math.PI/2),e$A.translate(0,e$d/e$Y),this.canvasDegree=-90)),e$A.a=this._formatData(e$A.a),e$A.d=this._formatData(e$A.d),e$A.tx=this._formatData(e$A.tx),e$A.ty=this._formatData(e$A.ty),e$i.transformOrigin=e$i.webkitTransformOrigin=e$i.msTransformOrigin=e$i.mozTransformOrigin=e$i.oTransformOrigin="0px 0px 0px",e$i.transform=e$i.webkitTransform=e$i.msTransform=e$i.mozTransform=e$i.oTransform="matrix("+e$A.toString()+")",e$A.translate(parseInt(e$i.left)||0,parseInt(e$i.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},e$d._formatData=function(e$d){return Math.abs(e$d)<1e-6?0:Math.abs(1-e$d)<.001?0<e$d?1:-1:e$d},e$d.getMousePoint=function(){return e$L.TEMP.setTo(this.mouseX,this.mouseY)},e$d.repaint=function(){this._repaint=1},e$d.parentRepaint=function(){},e$d._loop=function(){return this.render(e$K.context,0,0),!0},e$d._onmouseMove=function(e$d){this._mouseMoveTime=e$V.now()},e$d.getTimeFromFrameStart=function(){return e$V.now()-this._frameStartTime},e$d.render=function(e$d,e$t,e$l){if("sleep"===this._frameRate&&!e$K.isConchApp){var e$k=e$V.now();if(!(1e3<=e$k-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(e$X.loopCount++,e$w.instance.runEvent(),e$q.timer._update()));this._frameStartTime=e$k}if(this._renderCount++,e$K.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=e$V.now();var e$W="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),e$i=this._renderCount%2==0;if(e$X.renderSlow=!e$W,e$W||e$i||e$K.isConchApp){var e$A;e$X.loopCount++,e$w.instance.runEvent(),e$q.timer._update(),e$r.update3DLoop();var e$B=0,e$o=0;if(e$K.isConchNode)for(e$B=0,e$o=this._scenes.length;e$B<e$o;e$B++)(e$A=this._scenes[e$B])&&e$A._updateSceneConch();else for(e$B=0,e$o=this._scenes.length;e$B<e$o;e$B++)(e$A=this._scenes[e$B])&&e$A._updateScene();if(e$K.isConchNode){var e$I=e$fd.CustomList;for(e$B=0,e$o=e$I.length;e$B<e$o;e$B++){var e$b=e$I[e$B];e$b.customRender(e$b.customContext,0,0)}return}}e$K.isConchNode||this.renderingEnabled&&(e$W||!e$i||e$K.isConchWebGL)&&(e$K.isWebGL?e$K.WebGL.mainContext&&!e$K.WebGL.mainContext.isContextLost()&&(e$d.clear(),e$f.prototype.render.call(this,e$d,e$t,e$l),e$X._show&&e$X._sp&&e$X._sp.render(e$d,e$t,e$l),e$r.clear(this._bgColor),e$r.beginFlush(),e$d.flush(),e$r.endFinish(),e$a.instance&&e$a.getInstance().endDispose()):(e$r.clear(this._bgColor),e$f.prototype.render.call(this,e$d,e$t,e$l),e$X._show&&e$X._sp&&e$X._sp.render(e$d,e$t,e$l)))}else this._renderCount%5==0&&(e$X.loopCount++,e$w.instance.runEvent(),e$q.timer._update())},e$d._requestFullscreen=function(){var e$d=e$V.document.documentElement;e$d.requestFullscreen?e$d.requestFullscreen():e$d.mozRequestFullScreen?e$d.mozRequestFullScreen():e$d.webkitRequestFullscreen?e$d.webkitRequestFullscreen():e$d.msRequestFullscreen&&e$d.msRequestFullscreen()},e$d._fullScreenChanged=function(){e$q.stage.event("fullscreenchange")},e$d.exitFullscreen=function(){var e$d=e$V.document;e$d.exitFullscreen?e$d.exitFullscreen():e$d.mozCancelFullScreen?e$d.mozCancelFullScreen():e$d.webkitExitFullscreen&&e$d.webkitExitFullscreen()},e$Y(0,e$d,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),e$Y(0,e$d,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),e$Y(0,e$d,"frameRate",function(){return this._frameRate},function(e$d){if(this._frameRate=e$d,e$K.isConchApp)switch(this._frameRate){case"slow":e$V.window.conch&&e$V.window.conchConfig.setSlowFrame&&e$V.window.conchConfig.setSlowFrame(!0);break;case"fast":e$V.window.conch&&e$V.window.conchConfig.setSlowFrame&&e$V.window.conchConfig.setSlowFrame(!1);break;case"mouse":e$V.window.conch&&e$V.window.conchConfig.setMouseFrame&&e$V.window.conchConfig.setMouseFrame(2e3);break;case"sleep":e$V.window.conch&&e$V.window.conchConfig.setLimitFPS&&e$V.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),e$Y(0,e$d,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),e$Y(0,e$d,"width",e$f.prototype._$get_width,function(e$d){this.designWidth=e$d,e$q.superSet(e$fd,this,"width",e$d),e$q.timer.callLater(this,this._changeCanvasSize)}),e$Y(0,e$d,"alignH",function(){return this._alignH},function(e$d){this._alignH=e$d,e$q.timer.callLater(this,this._changeCanvasSize)}),e$Y(0,e$d,"isFocused",function(){return this._isFocused}),e$Y(0,e$d,"height",e$f.prototype._$get_height,function(e$d){this.designHeight=e$d,e$q.superSet(e$fd,this,"height",e$d),e$q.timer.callLater(this,this._changeCanvasSize)}),e$Y(0,e$d,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||e$S.create()},e$f.prototype._$set_transform),e$Y(0,e$d,"isVisibility",function(){return this._isVisibility}),e$Y(0,e$d,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),e$Y(0,e$d,"scaleMode",function(){return this._scaleMode},function(e$d){this._scaleMode=e$d,e$q.timer.callLater(this,this._changeCanvasSize)}),e$Y(0,e$d,"alignV",function(){return this._alignV},function(e$d){this._alignV=e$d,e$q.timer.callLater(this,this._changeCanvasSize)}),e$Y(0,e$d,"bgColor",function(){return this._bgColor},function(e$d){this._bgColor=e$d,this.conchModel&&this.conchModel.bgColor(e$d),e$K.isWebGL&&(e$d?e$A._wgColor=e$N.create(e$d)._color:e$V.onMiniGame||(e$A._wgColor=null)),e$V.onLimixiu?e$A._wgColor=e$N.create(e$d)._color:e$K.canvas.style.background=e$d||"none"}),e$Y(0,e$d,"mouseX",function(){return Math.round(e$w.instance.mouseX/this.clientScaleX)}),e$Y(0,e$d,"mouseY",function(){return Math.round(e$w.instance.mouseY/this.clientScaleY)}),e$Y(0,e$d,"screenMode",function(){return this._screenMode},function(e$d){this._screenMode=e$d}),e$Y(0,e$d,"visible",e$f.prototype._$get_visible,function(e$d){this.visible!==e$d&&(e$q.superSet(e$fd,this,"visible",e$d),e$K._mainCanvas.source.style.visibility=e$d?"visible":"hidden")}),e$Y(0,e$d,"fullScreenEnabled",null,function(e$d){var e$t=e$V.document,e$l=e$K.canvas;e$d?(e$l.addEventListener("mousedown",this._requestFullscreen),e$l.addEventListener("touchstart",this._requestFullscreen),e$t.addEventListener("fullscreenchange",this._fullScreenChanged),e$t.addEventListener("mozfullscreenchange",this._fullScreenChanged),e$t.addEventListener("webkitfullscreenchange",this._fullScreenChanged),e$t.addEventListener("msfullscreenchange",this._fullScreenChanged)):(e$l.removeEventListener("mousedown",this._requestFullscreen),e$l.removeEventListener("touchstart",this._requestFullscreen),e$t.removeEventListener("fullscreenchange",this._fullScreenChanged),e$t.removeEventListener("mozfullscreenchange",this._fullScreenChanged),e$t.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),e$t.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),e$A.SCALE_NOSCALE="noscale",e$A.SCALE_EXACTFIT="exactfit",e$A.SCALE_SHOWALL="showall",e$A.SCALE_NOBORDER="noborder",e$A.SCALE_FULL="full",e$A.SCALE_FIXED_WIDTH="fixedwidth",e$A.SCALE_FIXED_HEIGHT="fixedheight",e$A.SCALE_FIXED_AUTO="fixedauto",e$A.ALIGN_LEFT="left",e$A.ALIGN_RIGHT="right",e$A.ALIGN_CENTER="center",e$A.ALIGN_TOP="top",e$A.ALIGN_MIDDLE="middle",e$A.ALIGN_BOTTOM="bottom",e$A.SCREEN_NONE="none",e$A.SCREEN_HORIZONTAL="horizontal",e$A.SCREEN_VERTICAL="vertical",e$A.FRAME_FAST="fast",e$A.FRAME_SLOW="slow",e$A.FRAME_MOUSE="mouse",e$A.FRAME_SLEEP="sleep",e$A.FRAME_MOUSE_THREDHOLD=2e3,e$o(e$A,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),e$A}(e$fd),e$ed=(function(e$d){function e$t(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,e$t.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}e$b(e$t,"laya.media.SoundNode",e$fd);var e$l=e$t.prototype;e$l._onParentChange=function(){this.target=this.parent},e$l.play=function(e$d,e$t){void 0===e$d&&(e$d=1),isNaN(e$d)&&(e$d=1),this.url&&(this.stop(),this._channel=e$T.playSound(this.url,e$d,null,e$t))},e$l.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},e$l._setPlayAction=function(e$d,e$t,e$l,e$k){void 0===e$k&&(e$k=!0),this[e$l]&&e$d&&(e$k?e$d.on(e$t,this,this[e$l]):e$d.off(e$t,this,this[e$l]))},e$l._setPlayActions=function(e$d,e$t,e$l,e$k){if(void 0===e$k&&(e$k=!0),e$d&&e$t){var e$W,e$i=e$t.split(","),e$A=0;for(e$W=e$i.length,e$A=0;e$A<e$W;e$A++)this._setPlayAction(e$d,e$i[e$A],e$l,e$k)}},e$Y(0,e$l,"playEvent",null,function(e$d){(this._playEvents=e$d)&&this._tar&&this._setPlayActions(this._tar,e$d,"play")}),e$Y(0,e$l,"target",null,function(e$d){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=e$d,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),e$Y(0,e$l,"stopEvent",null,function(e$d){(this._stopEvents=e$d)&&this._tar&&this._setPlayActions(this._tar,e$d,"stop")})}(),function(e$d){function e$t(){this._src=null,this._onload=null,this._onerror=null,e$t.__super.call(this)}e$b(e$t,"laya.resource.FileBitmap",e$Yd);var e$l=e$t.prototype;return e$Y(0,e$l,"src",function(){return this._src},function(e$d){this._src=e$d}),e$Y(0,e$l,"onload",null,function(e$d){}),e$Y(0,e$l,"onerror",null,function(e$d){}),e$t}()),e$gd=function(e$d){function e$l(e$d,e$t){this._is2D=!1,e$l.__super.call(this);var e$k=this;if(this._source=this,"2D"===e$d||"AUTO"===e$d&&!e$K.isWebGL){this._is2D=!0,this._source=e$t||e$V.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var e$W=this;e$W.getContext=function(e$d,e$t){if(e$k._ctx)return e$k._ctx;var e$l=e$k._ctx=e$k._source.getContext(e$d,e$t);return e$l&&(e$l._canvas=e$W,e$K.isFlash||e$V.onLimixiu||(e$l.size=function(e$d,e$t){})),e$l}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}e$b(e$l,"laya.resource.HTMLCanvas",e$Yd);var e$t=e$l.prototype;return e$t.clear=function(){this._ctx&&this._ctx.clear()},e$t.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},e$t.release=function(){},e$t._setContext=function(e$d){this._ctx=e$d},e$t.getContext=function(e$d,e$t){return this._ctx?this._ctx:this._ctx=e$l._createContext(this)},e$t.getMemSize=function(){return 0},e$t.size=function(e$d,e$t){(this._w!=e$d||this._h!=e$t||this._source&&(this._source.width!=e$d||this._source.height!=e$t))&&(this._w=e$d,this._h=e$t,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(e$d,e$t),this._source&&(this._source.height=e$t,this._source.width=e$d))},e$t.getCanvas=function(){return this._source},e$t.toBase64=function(e$d,e$t,e$l){if(this._source)if(e$K.isConchApp&&this._source.toBase64)this._source.toBase64(e$d,e$t,e$l);else{var e$k=this._source.toDataURL(e$d,e$t);e$l.call(this,e$k)}},e$Y(0,e$t,"context",function(){return this._ctx}),e$Y(0,e$t,"asBitmap",null,function(e$d){}),e$l.create=function(e$d,e$t){return new e$l(e$d,e$t)},e$l.TYPE2D="2D",e$l.TYPE3D="3D",e$l.TYPEAUTO="AUTO",e$l._createContext=null,e$l}(),e$Hd=(function(e$d){function e$o(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){throw e$o.__super.call(this),new Error("不允许new！")}e$b(e$o,"laya.resource.HTMLSubImage",e$Yd),e$o.create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){return void 0===e$B&&(e$B=!1),new e$o(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B)}}(),function(e$d){function e$f(){this._frames=null,this._url=null,e$f.__super.call(this),this._setControlNode(this)}e$b(e$f,"laya.display.Animation",e$d);var e$t=e$f.prototype;e$t.destroy=function(e$d){void 0===e$d&&(e$d=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,e$d),this._frames=null,this._labels=null},e$t.play=function(e$d,e$t,e$l,e$k){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=!0),void 0===e$l&&(e$l=""),void 0===e$k&&(e$k=!0),e$l&&this._setFramesFromCache(e$l,e$k),this._isPlaying=!0,this.index="string"==typeof e$d?this._getFrameByLabel(e$d):e$d,this.loop=e$t,this._actionName=e$l,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},e$t._setFramesFromCache=function(e$d,e$t){var e$l;return void 0===e$t&&(e$t=!1),this._url&&(e$d=this._url+"#"+e$d),e$d&&e$f.framesMap[e$d]?((e$l=e$f.framesMap[e$d])instanceof Array?(this._frames=e$f.framesMap[e$d],this._count=this._frames.length):(e$l.nodeRoot&&(e$f.framesMap[e$d]=this._parseGraphicAnimationByData(e$l),e$l=e$f.framesMap[e$d]),this._frames=e$l.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=e$l.interval),this._labels=this._copyLabels(e$l.labels)),!0):(e$t&&console.log("ani not found:",e$d),!1)},e$t._copyLabels=function(e$d){if(!e$d)return null;var e$t,e$l;for(e$l in e$t={},e$d)e$t[e$l]=e$F.copyArray([],e$d[e$l]);return e$t},e$t._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&e$d.prototype._frameLoop.call(this)},e$t._displayToIndex=function(e$d){this._frames&&(this.graphics=this._frames[e$d])},e$t.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},e$t.loadImages=function(e$d,e$t){return void 0===e$t&&(e$t=""),this._url="",this._setFramesFromCache(e$t)||(this.frames=e$f.framesMap[e$t]?e$f.framesMap[e$t]:e$f.createFrames(e$d,e$t)),this},e$t.loadAtlas=function(e$t,e$l,e$k){void 0===e$k&&(e$k=""),this._url="";var e$W=this;function e$d(e$d){e$t===e$d&&(e$W.frames=e$f.framesMap[e$k]?e$f.framesMap[e$k]:e$f.createFrames(e$t,e$k),e$l&&e$l.run())}return e$W._setFramesFromCache(e$k)||(e$Bd.getAtlas(e$t)?e$d(e$t):e$q.loader.load(e$t,e$e.create(null,e$d,[e$t]),null,"atlas")),this},e$t.loadAnimation=function(e$d,e$t,e$l){this._url=e$d;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,e$t&&e$t.run()):!e$l||e$Bd.getAtlas(e$l)?this._loadAnimationData(e$d,e$t,e$l):e$q.loader.load(e$l,e$e.create(this,this._loadAnimationData,[e$d,e$t,e$l]),null,"atlas"),this},e$t._loadAnimationData=function(e$B,e$o,e$d){var e$I=this;if(!e$d||e$Bd.getAtlas(e$d)){var e$b=this;e$Bd.getRes(e$B)?e$t(e$B):e$q.loader.load(e$B,e$e.create(null,e$t,[e$B]),null,"json"),e$Bd.clearRes(e$B)}else console.warn("atlas load fail:"+e$d);function e$t(e$d){if(e$Bd.getRes(e$d)&&e$B===e$d){var e$t;if(e$f.framesMap[e$B+"#"])e$b._setFramesFromCache(e$I._actionName,!0),e$I.index=0,e$I._checkResumePlaying();else{var e$l=e$b._parseGraphicAnimation(e$Bd.getRes(e$B));if(!e$l)return;var e$k,e$W=e$l.animationList,e$i=0,e$A=e$W.length;for(e$i=0;e$i<e$A;e$i++)e$t=e$W[e$i],e$f.framesMap[e$B+"#"+e$t.name]=e$t,e$k||(e$k=e$t);e$k&&(e$f.framesMap[e$B+"#"]=e$k,e$b._setFramesFromCache(e$I._actionName,!0),e$I.index=0),e$I._checkResumePlaying()}e$o&&e$o.run()}}},e$t._parseGraphicAnimation=function(e$d){return e$qd.parseAnimationData(e$d)},e$t._parseGraphicAnimationByData=function(e$d){return e$qd.parseAnimationByData(e$d)},e$Y(0,e$t,"frames",function(){return this._frames},function(e$d){(this._frames=e$d)&&(this._count=e$d.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),e$Y(0,e$t,"autoPlay",null,function(e$d){e$d?this.play():this.stop()}),e$Y(0,e$t,"source",null,function(e$d){-1<e$d.indexOf(".ani")?this.loadAnimation(e$d):-1<e$d.indexOf(".json")||-1<e$d.indexOf("als")||-1<e$d.indexOf("atlas")?this.loadAtlas(e$d):this.loadImages(e$d.split(","))}),e$Y(0,e$t,"autoAnimation",null,function(e$d){this.play(0,!0,e$d,!1)}),e$f.createFrames=function(e$d,e$t){var e$l,e$k,e$W=0,e$i=0;if("string"==typeof e$d){var e$A=e$Bd.getAtlas(e$d);if(e$A&&e$A.length)for(e$l=[],e$W=0,e$i=e$A.length;e$W<e$i;e$W++)(e$k=new e$r.createGraphics).drawTexture(e$Bd.getRes(e$A[e$W]),0,0),e$l.push(e$k)}else if(e$d instanceof Array)for(e$l=[],e$W=0,e$i=e$d.length;e$W<e$i;e$W++)(e$k=new e$r.createGraphics).loadImage(e$d[e$W],0,0),e$l.push(e$k);return e$t&&(e$f.framesMap[e$t]=e$l),e$l},e$f.clearCache=function(e$d){var e$t,e$l=e$f.framesMap,e$k=e$d+"#";for(e$t in e$l)e$t!==e$d&&0!=e$t.indexOf(e$k)||delete e$f.framesMap[e$t]},e$f.framesMap={}}(e$wd),function(e$d){function e$i(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,e$i.__super.call(this),null==e$i._sortIndexFun&&(e$i._sortIndexFun=e$G.sortByKey("index",!1,!0))}e$b(e$i,"laya.display.FrameAnimation",e$d);var e$t=e$i.prototype;return e$t._setUp=function(e$d,e$t){this._labels=null,this._animationNewFrames=null,this._targetDic=e$d,this._animationData=e$t,this.interval=1e3/e$t.frameRate,e$t.parsed?(this._count=e$t.count,this._labels=e$t.labels,this._animationNewFrames=e$t.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),e$t.parsed=!0,e$t.labels=this._labels,e$t.count=this._count,e$t.animationNewFrames=this._animationNewFrames},e$t.clear=function(){e$d.prototype.clear.call(this),this._targetDic=null,this._animationData=null},e$t._displayToIndex=function(e$d){if(this._animationData){e$d<0&&(e$d=0),e$d>this._count&&(e$d=this._count);var e$t=this._animationData.nodes,e$l=0,e$k=e$t.length;for(e$l=0;e$l<e$k;e$l++)this._displayNodeToFrame(e$t[e$l],e$d)}},e$t._displayNodeToFrame=function(e$d,e$t,e$l){e$l||(e$l=this._targetDic);var e$k=e$l[e$d.target];if(e$k){var e$W,e$i,e$A,e$B=e$d.frames,e$o=e$d.keys,e$I=0,e$b=e$o.length;for(e$I=0;e$I<e$b;e$I++)e$A=(e$i=e$B[e$W=e$o[e$I]]).length>e$t?e$i[e$t]:e$i[e$i.length-1],e$k[e$W]=e$A}},e$t._calculateDatas=function(){if(this._animationData){var e$d,e$t=this._animationData.nodes,e$l=0,e$k=e$t.length;for(e$l=this._count=0;e$l<e$k;e$l++)e$d=e$t[e$l],this._calculateNodeKeyFrames(e$d);this._count+=1}},e$t._calculateNodeKeyFrames=function(e$d){var e$t,e$l,e$k=e$d.keyframes,e$W=e$d.target;for(e$t in e$d.frames||(e$d.frames={}),e$d.keys?e$d.keys.length=0:e$d.keys=[],e$d.initValues||(e$d.initValues={}),e$k)e$l=e$k[e$t],e$d.frames[e$t]||(e$d.frames[e$t]=[]),this._targetDic&&this._targetDic[e$W]&&(e$d.initValues[e$t]=this._targetDic[e$W][e$t]),e$l.sort(e$i._sortIndexFun),e$d.keys.push(e$t),this._calculateNodePropFrames(e$l,e$d.frames[e$t],e$t,e$W)},e$t.resetToInitState=function(){if(this._targetDic&&this._animationData){var e$d,e$t,e$l=this._animationData.nodes,e$k=0,e$W=e$l.length;for(e$k=0;e$k<e$W;e$k++)if(e$t=(e$d=e$l[e$k]).initValues){var e$i,e$A=this._targetDic[e$d.target];if(e$A)for(e$i in e$t)e$A[e$i]=e$t[e$i]}}},e$t._calculateNodePropFrames=function(e$d,e$t,e$l,e$k){var e$W=0,e$i=e$d.length-1;if(0<e$i){for(e$t.length=e$d[e$i].index+1,e$W=0;e$W<e$i;e$W++)this._dealKeyFrame(e$d[e$W]),this._calculateFrameValues(e$d[e$W],e$d[e$W+1],e$t);this._dealKeyFrame(e$d[e$W])}0==e$i&&(e$t[e$d[0].index]=e$d[0].value,this._animationNewFrames&&(this._animationNewFrames[e$d[0].index]=!0))},e$t._dealKeyFrame=function(e$d){e$d.label&&""!=e$d.label&&this.addLabel(e$d.label,e$d.index)},e$t._calculateFrameValues=function(e$d,e$t,e$l){var e$k,e$W=0,e$i=e$d.index,e$A=e$t.index,e$B=e$d.value,e$o=e$t.value-e$d.value,e$I=e$A-e$i;if(e$A>this._count&&(this._count=e$A),e$d.tween)for(null==(e$k=e$h[e$d.tweenMethod])&&(e$k=e$h.linearNone),e$W=e$i;e$W<e$A;e$W++)e$l[e$W]=e$k(e$W-e$i,e$B,e$o,e$I),this._animationNewFrames&&(this._animationNewFrames[e$W]=!0);else for(e$W=e$i;e$W<e$A;e$W++)e$l[e$W]=e$B;this._animationNewFrames&&(this._animationNewFrames[e$d.index]=!0,this._animationNewFrames[e$t.index]=!0),e$l[e$t.index]=e$t.value},e$i._sortIndexFun=null,e$i}(e$wd)),e$Rd=function(e$t){function e$W(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",e$W.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=e$Dd.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}e$b(e$W,"laya.display.Input",e$t);var e$d=e$W.prototype;return e$d.setSelection=function(e$d,e$t){this.focus=!0,laya.display.Input.inputElement.selectionStart=e$d,laya.display.Input.inputElement.selectionEnd=e$t},e$d._onUnDisplay=function(e$d){this.focus=!1},e$d._onMouseDown=function(e$d){this.focus=!0},e$d._syncInputTransform=function(){var e$d=this.nativeInput,e$t=e$F.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),e$l=this._width-this.padding[1]-this.padding[3],e$k=this._height-this.padding[0]-this.padding[2];e$K.isConchApp?(e$d.setScale(e$t.scaleX,e$t.scaleY),e$d.setSize(e$l,e$k),e$d.setPos(e$t.x,e$t.y)):(e$W.iframeInput&&e$W._showIOSInput(),e$W.inputContainer.style.transform=e$W.inputContainer.style.webkitTransform="scale("+e$t.scaleX+","+e$t.scaleY+") rotate("+e$q.stage.canvasDegree+"deg)",e$d.style.width=e$l+"px",e$d.style.height=e$k+"px",e$W.inputContainer.style.left=e$t.x+"px",e$W.inputContainer.style.top=e$t.y+"px")},e$d.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},e$d._setInputMethod=function(){e$W.input.parentElement&&e$W.inputContainer.removeChild(e$W.input),e$W.area.parentElement&&e$W.inputContainer.removeChild(e$W.area),e$W.inputElement=this.nativeInput,e$W.inputContainer.appendChild(e$W.inputElement),e$Dd.RightToLeft&&(e$W.inputElement.style.direction="rtl")},e$d._focusIn=function(){laya.display.Input.isInputting=!0;var e$d=this.nativeInput;this._focus=!0;var e$t=e$d.style;e$t.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),e$d.readOnly=!this._editable,e$K.isConchApp&&(e$d.setType(this._type),e$d.setForbidEdit(!this._editable)),e$d.maxLength=this._maxChars;this.padding;if(e$d.type=this._type,e$d.value=this._content,e$d.placeholder=this._prompt,e$q.stage.off("keydown",this,this._onKeyDown),e$q.stage.on("keydown",this,this._onKeyDown),(e$q.stage.focus=this).event("focus"),e$V.onPC&&e$d.focus(),!e$V.onMiniGame){this._text;this._text=null}this.typeset(),e$d.setColor(this._originColor),e$d.setFontSize(this.fontSize),e$d.setFontFace(e$V.onIPhone&&e$Dd._fontFamilyMap[this.font]||this.font),e$K.isConchApp&&e$d.setMultiAble&&e$d.setMultiAble(this._multiline),e$t.lineHeight=this.leading+this.fontSize+"px",e$t.fontStyle=this.italic?"italic":"normal",e$t.fontWeight=this.bold?"bold":"normal",e$t.textAlign=this.align,e$t.padding="0 0",this._syncInputTransform(),!e$K.isConchApp&&e$V.onPC&&e$q.timer.frameLoop(1,this,this._syncInputTransform)},e$d._setPromptColor=function(){(e$W.promptStyleDOM=e$V.getElementById("promptStyle"))||((e$W.promptStyleDOM=e$V.createElement("style")).setAttribute("id","promptStyle"),e$V.document.head.appendChild(e$W.promptStyleDOM)),e$W.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},e$d._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(e$q.superSet(e$Dd,this,"text",this._content),e$q.superSet(e$Dd,this,"color",this._originColor)):(e$q.superSet(e$Dd,this,"text",this._prompt),e$q.superSet(e$Dd,this,"color",this._promptColor)),e$q.stage.off("keydown",this,this._onKeyDown),e$q.stage.focus=null,this.event("blur"),e$K.isConchApp&&this.nativeInput.blur(),e$V.onPC&&e$q.timer.clear(this,this._syncInputTransform)},e$d._onKeyDown=function(e$d){13===e$d.keyCode&&(e$V.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},e$d.changeText=function(e$d){this._content=e$d,this._focus?(this.nativeInput.value=e$d||"",this.event("change")):e$t.prototype.changeText.call(this,e$d)},e$Y(0,e$d,"color",e$t.prototype._$get_color,function(e$d){this._focus&&this.nativeInput.setColor(e$d),e$q.superSet(e$Dd,this,"color",this._content?e$d:this._promptColor),this._originColor=e$d}),e$Y(0,e$d,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(e$d){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),e$Y(0,e$d,"multiline",function(){return this._multiline},function(e$d){this._multiline=e$d,this.valign=e$d?"top":"middle"}),e$Y(0,e$d,"maxChars",function(){return this._maxChars},function(e$d){e$d<=0&&(e$d=1e5),this._maxChars=e$d}),e$Y(0,e$d,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(e$d){e$q.superSet(e$Dd,this,"color",this._originColor),e$d+="",this._focus?(this.nativeInput.value=e$d||"",this.event("change")):(this._multiline||(e$d=e$d.replace(/\r?\n/g,"")),(this._content=e$d)?e$q.superSet(e$Dd,this,"text",e$d):(e$q.superSet(e$Dd,this,"text",this._prompt),e$q.superSet(e$Dd,this,"color",this.promptColor)))}),e$Y(0,e$d,"nativeInput",function(){return e$W.iframeInput?e$W.iframeInput:this._multiline?e$W.area:e$W.input}),e$Y(0,e$d,"prompt",function(){return this._prompt},function(e$d){!this._text&&e$d&&e$q.superSet(e$Dd,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?e$q.superSet(e$Dd,this,"text",this._text==this._prompt?e$d:this._text):e$q.superSet(e$Dd,this,"text",e$d),this._prompt=e$Dd.langPacks&&e$Dd.langPacks[e$d]?e$Dd.langPacks[e$d]:e$d}),e$Y(0,e$d,"focus",function(){return this._focus},function(e$d){var e$t=this.nativeInput;this._focus!==e$d&&(e$d?(e$t.target?e$t.target._focusOut():this._setInputMethod(),(e$t.target=this)._focusIn()):(e$t.target=null,this._focusOut(),e$V.document.body.scrollTop=0,e$t.blur(),e$K.isConchApp?e$t.setPos(-1e4,-1e4):e$W.inputContainer.contains(e$t)&&e$W.inputContainer.removeChild(e$t)))}),e$Y(0,e$d,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(e$d){e$d?(-1<(e$d="[^"+e$d+"]").indexOf("^^")&&(e$d=e$d.replace("^^","")),this._restrictPattern=new RegExp(e$d,"g")):this._restrictPattern=null}),e$Y(0,e$d,"editable",function(){return this._editable},function(e$d){this._editable=e$d,e$K.isConchApp&&e$W.input.setForbidEdit(!e$d)}),e$Y(0,e$d,"promptColor",function(){return this._promptColor},function(e$d){this._promptColor=e$d,this._content||e$q.superSet(e$Dd,this,"color",e$d)}),e$Y(0,e$d,"type",function(){return this._type},function(e$d){this._getCSSStyle().password="password"==e$d,this._type=e$d,e$K.isConchApp&&this.nativeInput.setType(e$d)}),e$Y(0,e$d,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(e$d){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),e$Y(0,e$d,"asPassword",function(){return this._getCSSStyle().password},function(e$d){this._getCSSStyle().password=e$d,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),e$W.__init__=function(){e$W._createInputElement(),e$V.onMobile&&e$K.canvas.addEventListener(e$W.IOS_IFRAME?e$V.onMiniGame?"touchend":"click":"touchend",e$W._popupInputMethod)},e$W._popupInputMethod=function(e$d){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},e$W._createInputElement=function(){e$W._initInput(e$W.area=e$V.createElement("textarea")),e$W._initInput(e$W.input=e$V.createElement("input")),e$W._createIOSInputElement(),(e$W.inputContainer=e$V.createElement("div")).style.position="absolute",e$W.inputContainer.style.zIndex=1e5,e$V.container.appendChild(e$W.inputContainer),e$W.inputContainer.setPos=function(e$d,e$t){e$W.inputContainer.style.left=e$d+"px",e$W.inputContainer.style.top=e$t+"px"}},e$W._createIOSInputElement=function(){if(e$W.IS_IOS){if(e$V.getElementById("inputIframe"))return;var e$t=e$V.createElement("iframe");e$t.id="inputIframe",e$t.onload=function(){e$t.style="position: none; width: 0%; height: 0%;";var e$d=e$t.contentDocument.getElementsByTagName("input");e$d=e$d?e$d[0]:null,(e$W.iframeInput=e$d)&&e$W._initInput(e$d)},e$V.container.appendChild(e$t),e$t.src="./input.html"}},e$W._reLoadIOSInputElement=function(){var e$d=e$V.getElementById("inputIframe");e$d&&(e$W.iframeInput.target&&(e$W.iframeInput.target.focus=!1),e$W.iframeInput.onblur=null,e$W.iframeInput.onload=null,e$d.src="./input.html")},e$W._showIOSInput=function(){e$V.getElementById("inputIframe")&&(e$W.iframeInput.value=e$W.iframeInput.target.text,e$W.iframeInput.onblur=function(){e$W._reLoadIOSInputElement()})},e$W._initInput=function(e$t){var e$d=e$t.style;e$d.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",e$d.resize="none",e$d.backgroundColor="transparent",e$d.border="none",e$d.outline="none",e$d.zIndex=1,e$t.addEventListener("input",e$W._processInputting),e$t.addEventListener("mousemove",e$W._stopEvent),e$t.addEventListener("mousedown",e$W._stopEvent),e$t.addEventListener("touchmove",e$W._stopEvent),e$t.setFontFace=function(e$d){e$t.style.fontFamily=e$d},e$K.isConchApp||(e$t.setColor=function(e$d){e$t.style.color=e$d},e$t.setFontSize=function(e$d){e$t.style.fontSize=e$d+"px"})},e$W._processInputting=function(e$d){var e$t=laya.display.Input.inputElement.target;if(e$t){var e$l=laya.display.Input.inputElement.value;e$t._restrictPattern&&(e$l=e$l.replace(/\u2006|\x27/g,""),e$t._restrictPattern.test(e$l)&&(e$l=e$l.replace(e$t._restrictPattern,""),laya.display.Input.inputElement.value=e$l)),e$t._text=e$l,e$t.event("input")}},e$W._stopEvent=function(e$d){"touchmove"==e$d.type&&e$d.preventDefault(),e$d.stopPropagation&&e$d.stopPropagation()},e$W.TYPE_TEXT="text",e$W.TYPE_PASSWORD="password",e$W.TYPE_EMAIL="email",e$W.TYPE_URL="url",e$W.TYPE_NUMBER="number",e$W.TYPE_RANGE="range",e$W.TYPE_DATE="date",e$W.TYPE_MONTH="month",e$W.TYPE_WEEK="week",e$W.TYPE_TIME="time",e$W.TYPE_DATE_TIME="datetime",e$W.TYPE_DATE_TIME_LOCAL="datetime-local",e$W.TYPE_SEARCH="search",e$W.input=null,e$W.area=null,e$W.inputElement=null,e$W.inputContainer=null,e$W.confirmButton=null,e$W.promptStyleDOM=null,e$W.inputHeight=45,e$W.isInputting=!1,e$W.stageMatrix=null,e$o(e$W,["IOS_IFRAME",function(){return this.IOS_IFRAME=e$V.onIOS&&e$V.window.top!=e$V.window.self}]),e$o(e$W,["IS_IOS",function(){return this.IS_IOS=!1}]),e$W}(e$Dd),e$Gd=function(e$d){function e$l(e$d,e$t){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,e$l.__super.call(this),e$d&&this._init_(e$d,e$t)}e$b(e$l,"laya.resource.HTMLImage",e$ed);var e$t=e$l.prototype;return e$t._init_=function(e$d,e$t){this._src=e$d,this._source=new e$V.window.Image,e$t&&(e$t.onload&&(this.onload=e$t.onload),e$t.onerror&&(this.onerror=e$t.onerror),e$t.onCreate&&e$t.onCreate(this)),0!=e$d.indexOf("data:image")&&(this._source.crossOrigin=""),e$d&&(this._source.src=e$d)},e$t.recreateResource=function(){var e$d=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var e$t=this;this._source=new e$V.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(e$t._needReleaseAgain)return e$t._needReleaseAgain=!1,e$t._source.onload=null,void(e$t._source=null);e$t._source.onload=null,e$t.memorySize=e$d._w*e$d._h*4,e$t._recreateLock=!1,e$t.completeCreate()},this._source.src=this._src}},e$t.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},e$t.onresize=function(){this._w=this._source.width,this._h=this._source.height},e$Y(0,e$t,"onload",null,function(e$d){var e$t=this;this._onload=e$d,this._source&&(this._source.onload=null!=this._onload?function(){e$t.onresize(),e$t._onload()}:null)}),e$Y(0,e$t,"onerror",null,function(e$d){var e$t=this;this._onerror=e$d,this._source&&(this._source.onerror=null!=this._onerror?function(){e$t._onerror()}:null)}),e$Y(0,e$t,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(e$d){this._enableMerageInAtlas=e$d,e$K.isConchApp&&this._source&&(this._source.enableMerageInAtlas=e$d)}),e$l.create=function(e$d,e$t){return new e$l(e$d,e$t)},e$l}(),e$qd=(function(e$i){function e$d(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,e$d.__super.call(this)}e$b(e$d,"laya.display.EffectAnimation",e$i);var e$t=e$d.prototype;e$t._onOtherBegin=function(e$d){e$d!=this&&this.stop()},e$t.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},e$t._onPlayAction=function(){this.play(0,!1)},e$t.play=function(e$d,e$t,e$l,e$k){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=!0),void 0===e$l&&(e$l=""),void 0===e$k&&(e$k=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,e$d,e$t,e$l,e$k))},e$t._recordInitData=function(){if(this._aniKeys){var e$d,e$t,e$l=0;for(e$d=this._aniKeys.length,e$l=0;e$l<e$d;e$l++)e$t=this._aniKeys[e$l],this._initData[e$t]=this._target[e$t]}},e$t._displayToIndex=function(e$d){if(this._animationData){e$d<0&&(e$d=0),e$d>this._count&&(e$d=this._count);var e$t=this._animationData.nodes,e$l=0,e$k=e$t.length;for(e$k=1<e$k?1:e$k,e$l=0;e$l<e$k;e$l++)this._displayNodeToFrame(e$t[e$l],e$d)}},e$t._displayNodeToFrame=function(e$d,e$t,e$l){if(this._target){var e$k;e$k=this._target;var e$W,e$i,e$A,e$B,e$o=e$d.frames,e$I=e$d.keys,e$b=0,e$f=e$I.length;e$B=e$d.secondFrames;var e$J,e$c,e$Y,e$w,e$D=0;for(e$b=0;e$b<e$f;e$b++)e$i=e$o[e$W=e$I[e$b]],e$A=-1==(e$D=e$B[e$W])?this._initData[e$W]:e$t<e$D?(e$Y=(e$c=e$d.keyframes[e$W])[0]).tween?(null==(e$J=e$h[e$Y.tweenMethod])&&(e$J=e$h.linearNone),e$w=e$c[1],e$J(e$t,this._initData[e$W],e$w.value-this._initData[e$W],e$w.index)):this._initData[e$W]:e$i.length>e$t?e$i[e$t]:e$i[e$i.length-1],e$k[e$W]=e$A}},e$t._calculateNodeKeyFrames=function(e$d){e$i.prototype._calculateNodeKeyFrames.call(this,e$d);var e$t,e$l,e$k,e$W=e$d.keyframes;e$d.target;for(e$t in e$k={},e$d.secondFrames=e$k,e$W)(e$l=e$W[e$t]).length<=1?e$k[e$t]=-1:e$k[e$t]=e$l[1].index},e$Y(0,e$t,"target",function(){return this._target},function(e$d){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=e$d,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),e$Y(0,e$t,"playEvent",null,function(e$d){(this._playEvents=e$d)&&this.addEvent()}),e$Y(0,e$t,"effectData",null,function(e$d){var e$t;e$d&&((e$t=e$d.animations)&&e$t[0]&&(this._setUp({},e$t[0]),e$t[0].nodes&&e$t[0].nodes[0]&&(this._aniKeys=e$t[0].nodes[0].keys)))}),e$Y(0,e$t,"effectClass",null,function(e$d){var e$t,e$l;(this._effectClass=e$E.getClass(e$d),this._effectClass)&&((e$t=this._effectClass.uiView)&&(e$l=e$t.animations)&&e$l[0]&&(this._setUp({},e$l[0]),e$l[0].nodes&&e$l[0].nodes[0]&&(this._aniKeys=e$l[0].nodes[0].keys)))}),e$d.EffectAnimationBegin="effectanimationbegin"}(e$Hd),function(e$t){var e$M;function e$T(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,e$T.__super.call(this)}e$b(e$T,"laya.utils.GraphicAnimation",e$t);var e$d=e$T.prototype;return e$d._parseNodeList=function(e$d){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[e$d.compId]=e$d.props,e$d.compId&&this._nodeList.push(e$d.compId);var e$t=e$d.child;if(e$t){var e$l=0,e$k=e$t.length;for(e$l=0;e$l<e$k;e$l++)this._parseNodeList(e$t[e$l])}},e$d._calGraphicData=function(e$d){var e$t;if(this._setUp(null,e$d),this._createGraphicData(),this._nodeIDAniDic)for(e$t in this._nodeIDAniDic)this._nodeIDAniDic[e$t]=null},e$d._createGraphicData=function(){var e$d,e$t=[],e$l=0,e$k=this.count,e$W=this._animationNewFrames;for(e$W||(e$W=[]),e$l=0;e$l<e$k;e$l++)!e$W[e$l]&&e$d||(e$d=this._createFrameGraphic(e$l)),e$t.push(e$d);this._gList=e$t},e$d._createFrameGraphic=function(e$d){var e$t=e$r.createGraphics();return e$T._rootMatrix||(e$T._rootMatrix=new e$S),this._updateNodeGraphic(this._rootNode,e$d,e$T._rootMatrix,e$t),e$t},e$d._updateNodeGraphic=function(e$d,e$t,e$l,e$k,e$W){var e$i;void 0===e$W&&(e$W=1);var e$A,e$B,e$o,e$I=(e$i=this._nodeGDic[e$d.compId]=this._getNodeGraphicData(e$d.compId,e$t,this._nodeGDic[e$d.compId])).alpha*e$W;if(!(e$I<.01)&&(e$i.resultTransform||(e$i.resultTransform=e$S.create()),e$A=e$i.resultTransform,e$S.mul(e$i.transform,e$l,e$A),e$i.skin&&(e$B=this._getTextureByUrl(e$i.skin))&&(e$A._checkTransform()?(e$k.drawTexture(e$B,0,0,e$i.width,e$i.height,e$A,e$I),e$i.resultTransform=null):e$k.drawTexture(e$B,e$A.tx,e$A.ty,e$i.width,e$i.height,null,e$I)),e$o=e$d.child)){var e$b,e$f=0;for(e$b=e$o.length,e$f=0;e$f<e$b;e$f++)this._updateNodeGraphic(e$o[e$f],e$t,e$A,e$k,e$I)}},e$d._updateNoChilds=function(e$d,e$t){if(e$d.skin){var e$l=this._getTextureByUrl(e$d.skin);if(e$l){var e$k=e$d.transform;e$k._checkTransform();!e$k.bTransform?e$t.drawTexture(e$l,e$k.tx,e$k.ty,e$d.width,e$d.height,null,e$d.alpha):e$t.drawTexture(e$l,0,0,e$d.width,e$d.height,e$k.clone(),e$d.alpha)}}},e$d._updateNodeGraphic2=function(e$d,e$t,e$l){var e$k;if(e$k=this._nodeGDic[e$d.compId]=this._getNodeGraphicData(e$d.compId,e$t,this._nodeGDic[e$d.compId]),e$d.child){var e$W=e$k.transform;e$W._checkTransform();var e$i,e$A;e$A=(e$i=!e$W.bTransform)&&(0!=e$W.tx||0!=e$W.ty);var e$B,e$o,e$I;if((e$B=e$W.bTransform||1!=e$k.alpha)&&e$l.save(),1!=e$k.alpha&&e$l.alpha(e$k.alpha),e$i?e$A&&e$l.translate(e$W.tx,e$W.ty):e$l.transform(e$W.clone()),e$o=e$d.child,e$k.skin&&(e$I=this._getTextureByUrl(e$k.skin))&&e$l.drawTexture(e$I,0,0,e$k.width,e$k.height),e$o){var e$b,e$f=0;for(e$b=e$o.length,e$f=0;e$f<e$b;e$f++)this._updateNodeGraphic2(e$o[e$f],e$t,e$l)}e$B?e$l.restore():e$i?e$A&&e$l.translate(-e$W.tx,-e$W.ty):e$l.transform(e$W.clone().invert())}else this._updateNoChilds(e$k,e$l)},e$d._calculateNodeKeyFrames=function(e$d){e$t.prototype._calculateNodeKeyFrames.call(this,e$d),this._nodeIDAniDic[e$d.target]=e$d},e$d.getNodeDataByID=function(e$d){return this._nodeIDAniDic[e$d]},e$d._getParams=function(e$d,e$t,e$l,e$k){var e$W=e$T._temParam;e$W.length=e$t.length;var e$i=0,e$A=e$t.length;for(e$i=0;e$i<e$A;e$i++)e$W[e$i]=this._getObjVar(e$d,e$t[e$i][0],e$l,e$t[e$i][1],e$k);return e$W},e$d._getObjVar=function(e$d,e$t,e$l,e$k,e$W){if(e$d.hasOwnProperty(e$t)){var e$i=e$d[e$t];if(e$l>=e$i.length&&(e$l=e$i.length-1),null!=e$d[e$t][e$l])return e$d[e$t][e$l]}return e$W.hasOwnProperty(e$t)?e$W[e$t]:e$k},e$d._getNodeGraphicData=function(e$d,e$t,e$l){e$l||(e$l=e$M.create()),e$l.transform?e$l.transform.identity():e$l.transform=e$S.create();var e$k=this.getNodeDataByID(e$d);if(!e$k)return e$l;var e$W,e$i,e$A=e$k.frames,e$B=this._getParams(e$A,e$T._drawTextureCmd,e$t,this._nodeDefaultProps[e$d]),e$o=e$B[0],e$I=NaN,e$b=NaN,e$f=e$B[5],e$J=e$B[6],e$c=e$B[13],e$Y=e$B[14],e$w=e$B[7],e$D=e$B[8],e$z=e$B[9],e$e=e$B[11],e$g=e$B[12];e$I=e$B[3],e$b=e$B[4],0!=e$I&&0!=e$b||(e$o=null),-1==e$I&&(e$I=0),-1==e$b&&(e$b=0),e$l.skin=e$o,e$l.width=e$I,e$l.height=e$b,e$o&&((e$W=this._getTextureByUrl(e$o))?(e$I||(e$I=e$W.sourceWidth),e$b||(e$b=e$W.sourceHeight)):console.warn("lost skin:",e$o,",you may load pics first")),e$l.alpha=e$B[10],e$i=e$l.transform,0!=e$c&&(e$f=e$c*e$I),0!=e$Y&&(e$J=e$Y*e$b),0==e$f&&0==e$J||e$i.translate(-e$f,-e$J);var e$H=null;if(e$z||1!==e$w||1!==e$D||e$e||e$g){(e$H=e$T._tempMt).identity(),e$H.bTransform=!0;var e$R=.0174532922222222*(e$z-e$e),e$G=.0174532922222222*(e$z+e$g),e$q=Math.cos(e$G),e$L=Math.sin(e$G),e$$=Math.sin(e$R),e$p=Math.cos(e$R);e$H.a=e$w*e$q,e$H.b=e$w*e$L,e$H.c=-e$D*e$$,e$H.d=e$D*e$p,e$H.tx=e$H.ty=0}return e$H&&(e$i=e$S.mul(e$i,e$H,e$i)),e$i.translate(e$B[1],e$B[2]),e$l},e$d._getTextureByUrl=function(e$d){return e$Bd.getRes(e$d)},e$d.setAniData=function(e$d,e$t){if(e$d.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e$d,this._parseNodeList(e$d);var e$l,e$k={},e$W=[],e$i=e$d.animations,e$A=0,e$B=e$i.length;for(e$A=0;e$A<e$B;e$A++)if(e$l=e$i[e$A],this._labels=null,(!e$t||e$t==e$l.name)&&e$l){try{this._calGraphicData(e$l)}catch(e$d){console.warn("parse animation fail:"+e$l.name+",empty animation created"),this._gList=[]}var e$o={};e$o.interval=1e3/e$l.frameRate,e$o.frames=this._gList,e$o.labels=this._labels,e$o.name=e$l.name,e$W.push(e$o),e$k[e$l.name]=e$o}this.animationList=e$W,this.animationDic=e$k}e$T._temParam.length=0},e$d.parseByData=function(e$d){var e$t,e$l;e$t=e$d.nodeRoot,e$l=e$d.aniO,delete e$d.nodeRoot,delete e$d.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=e$t,this._parseNodeList(e$t),this._labels=null;try{this._calGraphicData(e$l)}catch(e$d){console.warn("parse animation fail:"+e$l.name+",empty animation created"),this._gList=[]}var e$k=e$d;return e$k.interval=1e3/e$l.frameRate,e$k.frames=this._gList,e$k.labels=this._labels,e$k.name=e$l.name,e$k},e$d.setUpAniData=function(e$d){if(e$d.animations){var e$t,e$l={},e$k=[],e$W=e$d.animations,e$i=0,e$A=e$W.length;for(e$i=0;e$i<e$A;e$i++)if(e$t=e$W[e$i]){var e$B={};e$B.name=e$t.name,e$B.aniO=e$t,e$B.nodeRoot=e$d,e$k.push(e$B),e$l[e$t.name]=e$B}this.animationList=e$k,this.animationDic=e$l}},e$d._clear=function(){var e$d,e$t;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(e$d in this._nodeGDic)(e$t=this._nodeGDic[e$d])&&e$t.recover();this._nodeGDic=null},e$T.parseAnimationByData=function(e$d){var e$t;return e$T._I||(e$T._I=new e$T),e$t=e$T._I.parseByData(e$d),e$T._I._clear(),e$t},e$T.parseAnimationData=function(e$d){var e$t;return e$T._I||(e$T._I=new e$T),e$T._I.setUpAniData(e$d),(e$t={}).animationList=e$T._I.animationList,e$t.animationDic=e$T._I.animationDic,e$T._I._clear(),e$t},e$T._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],e$T._temParam=[],e$T._I=null,e$T._rootMatrix=null,e$o(e$T,["_tempMt",function(){return this._tempMt=new e$S}]),e$T.__init$=function(){e$M=function(){function e$d(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return e$b(e$d,""),e$d.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),e$P.recover("GraphicNode",this)},e$d.create=function(){return e$P.getItemByClass("GraphicNode",e$d)},e$d}()},e$T}(e$Hd));e$q.__init([e$I,e$od,e$K,e$V,e$m,e$p,e$d,e$qd])}(window,document,Laya),function(e$d,e$t,e$l){e$l.un,e$l.uns,e$l.static;var e$k=e$l.class;e$l.getset,e$l.__newvec;new(function(){function e$d(){}return e$k(e$d,"LayaMain"),e$d}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$d,e$t){"use strict";for(var e$l in Object.defineProperty(e$t,"__esModule",{value:!0}),Laya){var e$k=Laya[e$l];e$k&&e$k.__isclass&&(e$t[e$l]=e$k)}}),function(e$d,e$t,e$G){e$G.un,e$G.uns;var e$A=e$G.static,e$J=e$G.class,e$k=e$G.getset,e$i=e$G.__newvec,e$b=laya.maths.Arith,e$f=laya.maths.Bezier,e$l=laya.resource.Bitmap,e$c=laya.utils.Browser,e$o=laya.utils.Byte,e$Y=laya.utils.Color,e$q=(laya.filters.ColorFilter,e$G.Config),e$W=laya.resource.Context,e$L=(laya.events.Event,laya.filters.Filter),e$B=laya.display.Graphics,e$I=laya.resource.HTMLCanvas,e$w=(laya.utils.HTMLChar,laya.resource.HTMLImage),e$D=laya.resource.HTMLSubImage,e$$=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),e$p=laya.maths.Point,e$M=laya.maths.Rectangle,e$z=laya.renders.Render,e$e=(laya.renders.RenderContext,laya.renders.RenderSprite),e$g=laya.resource.Resource,e$H=laya.resource.ResourceManager,e$R=laya.utils.RunDriver,e$T=laya.display.Sprite,e$r=laya.display.Stage,e$S=laya.utils.Stat,e$j=laya.utils.StringKey,e$C=(laya.display.css.Style,laya.system.System),e$K=laya.display.Text,e$x=laya.resource.Texture,e$n=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),e$Q=laya.utils.VectorGraphManager;laya.utils.WordText;e$G.interface("laya.webgl.shapes.IShape"),e$G.interface("laya.webgl.submit.ISubmit"),e$G.interface("laya.webgl.text.ICharSegment"),e$G.interface("laya.webgl.canvas.save.ISaveData"),e$G.interface("laya.webgl.resource.IMergeAtlasBitmap"),e$G.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var e$y=function(){function e$d(){}e$J(e$d,"laya.filters.webgl.FilterActionGL");var e$t=e$d.prototype;return e$G.imps(e$t,{"laya.filters.IFilterActionGL":!0}),e$t.setValue=function(e$d){},e$t.setValueMix=function(e$d){},e$t.apply3d=function(e$d,e$t,e$l,e$k,e$W){return null},e$t.apply=function(e$d){return null},e$k(0,e$t,"typeMix",function(){return 0}),e$d}(),e$V=function(){function e$d(){}return e$J(e$d,"laya.webgl.shader.ShaderValue"),e$d}(),e$Z=function(){var e$k,e$W;function e$d(e$d,e$t,e$l){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new e$W,void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),this._cells=null,this._rowInfo=null,this._init(e$d,e$t),this._atlasID=e$l}e$J(e$d,"laya.webgl.atlas.AtlasGrid");var e$t=e$d.prototype;return e$t.getAltasID=function(){return this._atlasID},e$t.setAltasID=function(e$d){0<=e$d&&(this._atlasID=e$d)},e$t.addTex=function(e$d,e$t,e$l){var e$k=this._get(e$t,e$l);return 0==e$k.ret||(this._fill(e$k.x,e$k.y,e$t,e$l,e$d),this._texCount++),e$k},e$t._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},e$t._init=function(e$d,e$t){if(this._width=e$d,this._height=e$t,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=e$i(this._height);for(var e$l=0;e$l<this._height;e$l++)this._rowInfo[e$l]=new e$k;return this._clear(),!0},e$t._get=function(e$d,e$t){var e$l=new e$E;if(e$d>=this._failSize.width&&e$t>=this._failSize.height)return e$l;for(var e$k=-1,e$W=-1,e$i=this._width,e$A=this._height,e$B=this._cells,e$o=0;e$o<e$A;e$o++)if(!(this._rowInfo[e$o].spaceCount<e$d))for(var e$I=0;e$I<e$i;){var e$b=3*(e$o*e$i+e$I);if(0!=e$B[e$b]||e$B[1+e$b]<e$d||e$B[2+e$b]<e$t)e$I+=e$B[1+e$b];else{e$k=e$I,e$W=e$o;for(var e$f=0;e$f<e$d;e$f++)if(e$B[3*e$f+e$b+2]<e$t){e$k=-1;break}if(!(e$k<0))return e$l.ret=!0,e$l.x=e$k,e$l.y=e$W,e$l;e$I+=e$B[1+e$b]}}return e$l},e$t._fill=function(e$d,e$t,e$l,e$k,e$W){var e$i=this._width,e$A=this._height;this._check(e$d+e$l<=e$i&&e$t+e$k<=e$A);for(var e$B=e$t;e$B<e$k+e$t;++e$B){this._check(this._rowInfo[e$B].spaceCount>=e$l),this._rowInfo[e$B].spaceCount-=e$l;for(var e$o=0;e$o<e$l;e$o++){var e$I=3*(e$d+e$B*e$i+e$o);this._check(0==this._cells[e$I]),this._cells[e$I]=e$W,this._cells[1+e$I]=e$l,this._cells[2+e$I]=e$k}}if(0<e$d)for(e$B=0;e$B<e$k;++e$B){var e$b=0;for(e$o=e$d-1;0<=e$o&&0==this._cells[3*((e$t+e$B)*e$i+e$o)];--e$o,++e$b);for(e$o=e$b;0<e$o;--e$o)this._cells[3*((e$t+e$B)*e$i+e$d-e$o)+1]=e$o,this._check(0<e$o)}if(0<e$t)for(e$o=e$d;e$o<e$d+e$l;++e$o){for(e$b=0,e$B=e$t-1;0<=e$B&&0==this._cells[3*(e$o+e$B*e$i)];--e$B,e$b++);for(e$B=e$b;0<e$B;--e$B)this._cells[3*(e$o+(e$t-e$B)*e$i)+2]=e$B,this._check(0<e$B)}},e$t._check=function(e$d){0==e$d&&console.log("xtexMerger 错误啦")},e$t._clear=function(){for(var e$d=this._texCount=0;e$d<this._height;e$d++)this._rowInfo[e$d].spaceCount=this._width;for(var e$t=0;e$t<this._height;e$t++)for(var e$l=0;e$l<this._width;e$l++){var e$k=3*(e$t*this._width+e$l);this._cells[e$k]=0,this._cells[1+e$k]=this._width-e$l,this._cells[2+e$k]=this._width-e$t}this._failSize.width=this._width+1,this._failSize.height=this._height+1},e$d.__init$=function(){e$k=function(){function e$d(){this.spaceCount=0}return e$J(e$d,""),e$d}(),e$W=function(){function e$d(){this.width=0,this.height=0}return e$J(e$d,""),e$d}()},e$d}(),e$U=function(){function e$z(e$d,e$t,e$l,e$k){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=e$d,this._height=e$t,this._gridSize=e$l,this._maxAtlaserCount=e$k,this._gridNumX=e$d/e$l,this._gridNumY=e$t/e$l,this._curAtlasIndex=0,this._atlaserArray=[]}e$J(e$z,"laya.webgl.atlas.AtlasResourceManager");var e$d=e$z.prototype;return e$d.setAtlasParam=function(e$d,e$t,e$l,e$k){if(1==this._setAtlasParam)return e$z._sid_=0,this._width=e$d,this._height=e$t,this._gridSize=e$l,this._maxAtlaserCount=e$k,this._gridNumX=e$d/e$l,this._gridNumY=e$t/e$l,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},e$d.pushData=function(e$d){var e$t,e$l=e$d.bitmap,e$k=-1,e$W=null,e$i=0,e$A=0;for(e$i=0,e$t=this._atlaserArray.length;e$i<e$t&&(e$A=(this._curAtlasIndex+e$i)%e$t,-1==(e$k=(e$W=this._atlaserArray[e$A]).findBitmapIsExist(e$l)));e$i++);if(-1!=e$k){var e$B=e$W.InAtlasWebGLImagesOffsetValue[e$k];return e$Y=e$B[0],e$w=e$B[1],e$W.addToAtlas(e$d,e$Y,e$w),!0}this._setAtlasParam=!1;for(var e$o=Math.ceil((e$d.bitmap.width+2)/this._gridSize),e$I=Math.ceil((e$d.bitmap.height+2)/this._gridSize),e$b=!1,e$f=0;e$f<2;e$f++){var e$J=this._maxAtlaserCount;for(e$i=0;e$i<e$J;e$i++){e$A=(this._curAtlasIndex+e$i)%e$J,this._atlaserArray.length-1>=e$A||this._atlaserArray.push(new e$Md(this._gridNumX,this._gridNumY,this._width,this._height,e$z._sid_++));var e$c=this._atlaserArray[e$A],e$Y=0,e$w=0,e$D=e$c.addTex(1,e$o,e$I);if(e$D.ret){e$Y=e$D.x*this._gridSize+1,e$w=e$D.y*this._gridSize+1,e$l.lock=!0,e$c.addToAtlasTexture(e$l,e$Y,e$w),e$c.addToAtlas(e$d,e$Y,e$w),e$b=!0,this._curAtlasIndex=e$A;break}}if(e$b)break;this._atlaserArray.push(new e$Md(this._gridNumX,this._gridNumY,this._width,this._height,e$z._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return e$b||console.log(">>>AtlasManager pushData error"),e$b},e$d.addToAtlas=function(e$d){laya.webgl.atlas.AtlasResourceManager.instance.pushData(e$d)},e$d.garbageCollection=function(){if(!0===this._needGC){for(var e$d=this._atlaserArray.length-this._maxAtlaserCount,e$t=0;e$t<e$d;e$t++)this._atlaserArray[e$t].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+e$d),this._atlaserArray.splice(0,e$d),this._needGC=!1}return!0},e$d.freeAll=function(){for(var e$d=0,e$t=this._atlaserArray.length;e$d<e$t;e$d++)this._atlaserArray[e$d].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},e$d.getAtlaserCount=function(){return this._atlaserArray.length},e$d.getAtlaserByIndex=function(e$d){return this._atlaserArray[e$d]},e$k(1,e$z,"instance",function(){return e$z._Instance||(e$z._Instance=new e$z(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),e$z._Instance}),e$k(1,e$z,"enabled",function(){return e$q.atlasEnable}),e$k(1,e$z,"atlasLimitWidth",function(){return e$z._atlasLimitWidth},function(e$d){e$z._atlasLimitWidth=e$d}),e$k(1,e$z,"atlasLimitHeight",function(){return e$z._atlasLimitHeight},function(e$d){e$z._atlasLimitHeight=e$d}),e$z._enable=function(){e$q.atlasEnable=!0},e$z._disable=function(){e$q.atlasEnable=!1},e$z.__init__=function(){e$z.atlasTextureWidth=2048,e$z.atlasTextureHeight=2048,e$z.maxTextureCount=6,e$z.atlasLimitWidth=512,e$z.atlasLimitHeight=512},e$z._atlasLimitWidth=0,e$z._atlasLimitHeight=0,e$z.gridSize=16,e$z.atlasTextureWidth=0,e$z.atlasTextureHeight=0,e$z.maxTextureCount=0,e$z._atlasRestore=0,e$z.BOARDER_TYPE_NO=0,e$z.BOARDER_TYPE_RIGHT=1,e$z.BOARDER_TYPE_LEFT=2,e$z.BOARDER_TYPE_BOTTOM=4,e$z.BOARDER_TYPE_TOP=8,e$z.BOARDER_TYPE_ALL=15,e$z._sid_=0,e$z._Instance=null,e$z}(),e$E=function(){function e$d(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return e$J(e$d,"laya.webgl.atlas.MergeFillInfo"),e$d}(),e$N=function(){function e$t(){}return e$J(e$t,"laya.webgl.canvas.BlendMode"),e$t._init_=function(e$d){e$t.fns=[e$t.BlendNormal,e$t.BlendAdd,e$t.BlendMultiply,e$t.BlendScreen,e$t.BlendOverlay,e$t.BlendLight,e$t.BlendMask,e$t.BlendDestinationOut],e$t.targetFns=[e$t.BlendNormalTarget,e$t.BlendAddTarget,e$t.BlendMultiplyTarget,e$t.BlendScreenTarget,e$t.BlendOverlayTarget,e$t.BlendLightTarget,e$t.BlendMask,e$t.BlendDestinationOut]},e$t.BlendNormal=function(e$d){e$d.blendFunc(1,771)},e$t.BlendAdd=function(e$d){e$d.blendFunc(1,772)},e$t.BlendMultiply=function(e$d){e$d.blendFunc(774,771)},e$t.BlendScreen=function(e$d){e$d.blendFunc(1,1)},e$t.BlendOverlay=function(e$d){e$d.blendFunc(1,769)},e$t.BlendLight=function(e$d){e$d.blendFunc(1,1)},e$t.BlendNormalTarget=function(e$d){e$d.blendFunc(1,771)},e$t.BlendAddTarget=function(e$d){e$d.blendFunc(1,772)},e$t.BlendMultiplyTarget=function(e$d){e$d.blendFunc(774,771)},e$t.BlendScreenTarget=function(e$d){e$d.blendFunc(1,1)},e$t.BlendOverlayTarget=function(e$d){e$d.blendFunc(1,769)},e$t.BlendLightTarget=function(e$d){e$d.blendFunc(1,1)},e$t.BlendMask=function(e$d){e$d.blendFunc(0,770)},e$t.BlendDestinationOut=function(e$d){e$d.blendFunc(0,0)},e$t.activeBlendFunction=null,e$t.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],e$t.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},e$t.NORMAL="normal",e$t.ADD="add",e$t.MULTIPLY="multiply",e$t.SCREEN="screen",e$t.LIGHT="light",e$t.OVERLAY="overlay",e$t.DESTINATIONOUT="destination-out",e$t.fns=[],e$t.targetFns=[],e$t}(),e$u=function(){function e$l(e$d){this._color=e$Y.create("black"),this.setValue(e$d)}e$J(e$l,"laya.webgl.canvas.DrawStyle");var e$d=e$l.prototype;return e$d.setValue=function(e$d){if(e$d){if("string"==typeof e$d)return void(this._color=e$Y.create(e$d));if(e$d instanceof laya.utils.Color)return void(this._color=e$d)}},e$d.reset=function(){this._color=e$Y.create("black")},e$d.equal=function(e$d){return"string"==typeof e$d?this._color.strColor===e$d:e$d instanceof laya.utils.Color&&this._color.numColor===e$d.numColor},e$d.toColorStr=function(){return this._color.strColor},e$l.create=function(e$d){var e$t;if(e$d&&("string"==typeof e$d?e$t=e$Y.create(e$d):e$d instanceof laya.utils.Color&&(e$t=e$d),e$t))return e$t._drawStyle||(e$t._drawStyle=new e$l(e$d));return laya.webgl.canvas.DrawStyle.DEFAULT},e$A(e$l,["DEFAULT",function(){return this.DEFAULT=new e$l("#000000")}]),e$l}(),e$h=function(){function e$d(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];e$Hd.mainContext;this.ib=e$_d.create(35048),this.vb=e$vd.create(5)}e$J(e$d,"laya.webgl.canvas.Path");var e$t=e$d.prototype;return e$t.addPoint=function(e$d,e$t){this.tempArray.push(e$d,e$t)},e$t.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},e$t.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},e$t.polygon=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A;return this.geomatrys.push(this._curGeomatry=e$A=new e$jd(e$d,e$t,e$l,e$k,e$W,e$i)),e$k||(e$A.fill=!1),null==e$i&&(e$A.borderWidth=0),e$A},e$t.setGeomtry=function(e$d){this.geomatrys.push(this._curGeomatry=e$d)},e$t.drawLine=function(e$d,e$t,e$l,e$k,e$W){var e$i;return this.closePath?this.geomatrys.push(this._curGeomatry=e$i=new e$Sd(e$d,e$t,e$l,e$k,e$W)):this.geomatrys.push(this._curGeomatry=e$i=new e$rd(e$d,e$t,e$l,e$k,e$W)),e$i.fill=!1,e$i},e$t.update=function(){var e$d=this.ib._byteLength,e$t=this.geomatrys.length;this.offset=e$d;for(var e$l=this.geoStart;e$l<e$t;e$l++)this.geomatrys[e$l].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=e$t,this.count=(this.ib._byteLength-e$d)/e$wd.BYTES_PIDX},e$t.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},e$t.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},e$d}(),e$s=function(){function e$B(){}e$J(e$B,"laya.webgl.canvas.save.SaveBase");var e$d=e$B.prototype;return e$G.imps(e$d,{"laya.webgl.canvas.save.ISaveData":!0}),e$d.isSaveMark=function(){return!1},e$d.restore=function(e$d){this._dataObj[this._valueName]=this._value,(e$B._cache[e$B._cache._length++]=this)._newSubmit&&(e$d._curSubmit=e$id.RENDERBASE,e$d._renderKey=0)},e$B._createArray=function(){var e$d=[];return e$d._length=0,e$d},e$B._init=function(){var e$d=e$B._namemap={};return e$d[1]="ALPHA",e$d[2]="fillStyle",e$d[8]="font",e$d[256]="lineWidth",e$d[512]="strokeStyle",e$d[8192]="_mergeID",e$d[1024]=e$d[2048]=e$d[4096]=[],e$d[16384]="textBaseline",e$d[32768]="textAlign",e$d[65536]="_nBlendType",e$d[1048576]="shader",e$d[2097152]="filters",e$d},e$B.save=function(e$d,e$t,e$l,e$k){if((e$d._saveMark._saveuse&e$t)!==e$t){e$d._saveMark._saveuse|=e$t;var e$W=e$B._cache,e$i=0<e$W._length?e$W[--e$W._length]:new e$B;e$i._value=e$l[e$i._valueName=e$B._namemap[e$t]],e$i._dataObj=e$l,e$i._newSubmit=e$k;var e$A=e$d._save;e$A[e$A._length++]=e$i}},e$B._cache=laya.webgl.canvas.save.SaveBase._createArray(),e$B._namemap=e$B._init(),e$B}(),e$P=function(){function e$i(){this._clipRect=new e$M}e$J(e$i,"laya.webgl.canvas.save.SaveClipRect");var e$d=e$i.prototype;return e$G.imps(e$d,{"laya.webgl.canvas.save.ISaveData":!0}),e$d.isSaveMark=function(){return!1},e$d.restore=function(e$d){e$d._clipRect=this._clipSaveRect,(e$i._cache[e$i._cache._length++]=this)._submitScissor.submitLength=e$d._submits._length-this._submitScissor.submitIndex,e$d._curSubmit=e$id.RENDERBASE,e$d._renderKey=0},e$i.save=function(e$d,e$t){if(131072!=(131072&e$d._saveMark._saveuse)){e$d._saveMark._saveuse|=131072;var e$l=e$i._cache,e$k=0<e$l._length?e$l[--e$l._length]:new e$i;e$k._clipSaveRect=e$d._clipRect,e$d._clipRect=e$k._clipRect.copyFrom(e$d._clipRect),e$k._submitScissor=e$t;var e$W=e$d._save;e$W[e$W._length++]=e$k}},e$A(e$i,["_cache",function(){return this._cache=e$s._createArray()}]),e$i}(),e$X=function(){function e$c(){this._contextX=0,this._contextY=0,this._clipRect=new e$M,this._rect=new e$M,this._matrix=new e$$}e$J(e$c,"laya.webgl.canvas.save.SaveClipRectStencil");var e$d=e$c.prototype;return e$G.imps(e$d,{"laya.webgl.canvas.save.ISaveData":!0}),e$d.isSaveMark=function(){return!1},e$d.restore=function(e$d){e$bd.restore(e$d,this._rect,this._saveMatrix,this._contextX,this._contextY),e$d._clipRect=this._clipSaveRect,e$d._curMat=this._saveMatrix,e$d._x=this._contextX,e$d._y=this._contextY,e$c._cache[e$c._cache._length++]=this,e$d._curSubmit=e$id.RENDERBASE},e$c.save=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){if(262144!=(262144&e$d._saveMark._saveuse)){e$d._saveMark._saveuse|=262144;var e$b=e$c._cache,e$f=0<e$b._length?e$b[--e$b._length]:new e$c;e$f._clipSaveRect=e$d._clipRect,e$f._clipRect.setTo(e$A,e$B,e$o,e$I),e$d._clipRect=e$f._clipRect,e$f._rect.x=e$l,e$f._rect.y=e$k,e$f._rect.width=e$W,e$f._rect.height=e$i,e$f._contextX=e$d._x,e$f._contextY=e$d._y,e$f._saveMatrix=e$d._curMat,e$d._curMat.copyTo(e$f._matrix),e$d._curMat=e$f._matrix,e$f._submitStencil=e$t;var e$J=e$d._save;e$J[e$J._length++]=e$f}},e$A(e$c,["_cache",function(){return this._cache=e$s._createArray()}]),e$c}(),e$m=function(){function e$k(){this._saveuse=0}e$J(e$k,"laya.webgl.canvas.save.SaveMark");var e$d=e$k.prototype;return e$G.imps(e$d,{"laya.webgl.canvas.save.ISaveData":!0}),e$d.isSaveMark=function(){return!0},e$d.restore=function(e$d){e$d._saveMark=this._preSaveMark,e$k._no[e$k._no._length++]=this},e$k.Create=function(e$d){var e$t=e$k._no,e$l=0<e$t._length?e$t[--e$t._length]:new e$k;return e$l._saveuse=0,e$l._preSaveMark=e$d._saveMark,e$d._saveMark=e$l},e$A(e$k,["_no",function(){return this._no=e$s._createArray()}]),e$k}(),e$O=function(){function e$i(){this._matrix=new e$$}e$J(e$i,"laya.webgl.canvas.save.SaveTransform");var e$d=e$i.prototype;return e$G.imps(e$d,{"laya.webgl.canvas.save.ISaveData":!0}),e$d.isSaveMark=function(){return!1},e$d.restore=function(e$d){e$d._curMat=this._savematrix,e$i._no[e$i._no._length++]=this},e$i.save=function(e$d){var e$t=e$d._saveMark;if(2048!=(2048&e$t._saveuse)){e$t._saveuse|=2048;var e$l=e$i._no,e$k=0<e$l._length?e$l[--e$l._length]:new e$i;e$k._savematrix=e$d._curMat,e$d._curMat=e$d._curMat.copyTo(e$k._matrix);var e$W=e$d._save;e$W[e$W._length++]=e$k}},e$A(e$i,["_no",function(){return this._no=e$s._createArray()}]),e$i}(),e$F=function(){function e$W(){}e$J(e$W,"laya.webgl.canvas.save.SaveTranslate");var e$d=e$W.prototype;return e$G.imps(e$d,{"laya.webgl.canvas.save.ISaveData":!0}),e$d.isSaveMark=function(){return!1},e$d.restore=function(e$d){e$d._curMat;e$d._x=this._x,e$d._y=this._y,e$W._no[e$W._no._length++]=this},e$W.save=function(e$d){var e$t=e$W._no,e$l=0<e$t._length?e$t[--e$t._length]:new e$W;e$l._x=e$d._x,e$l._y=e$d._y;var e$k=e$d._save;e$k[e$k._length++]=e$l},e$A(e$W,["_no",function(){return this._no=e$s._createArray()}]),e$W}(),e$a=function(){function e$d(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new e$M}e$J(e$d,"laya.webgl.resource.RenderTargetMAX");var e$t=e$d.prototype;return e$t.setSP=function(e$d){this._sp=e$d},e$t.size=function(e$d,e$t){var e$l=this;this._width!==e$d||this._height!==e$t?(this.repaint=!0,this._width=e$d,this._height=e$t,this.target?this.target.size(e$d,e$t):this.target=e$Qd.create(e$d,e$t),this.target.hasListener("recovered")||this.target.on("recovered",this,function(e$d){e$G.timer.callLater(e$l._sp,e$l._sp.repaint)})):this.target.size(e$d,e$t)},e$t._flushToTarget=function(e$d,e$t){if(!e$t._destroy){var e$l=e$ed.worldScissorTest,e$k=e$ed.worldClipRect;e$ed.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,e$ed.worldScissorTest=!1,e$Hd.mainContext.disable(3089);var e$W=e$ed.worldAlpha,e$i=e$ed.worldMatrix4,e$A=e$ed.worldMatrix,e$B=e$ed.worldFilters,e$o=e$ed.worldShaderDefines;if(e$ed.worldMatrix=e$$.EMPTY,e$ed.restoreTempArray(),e$ed.worldMatrix4=e$ed.TEMPMAT4_ARRAY,e$ed.worldAlpha=1,e$ed.worldFilters=null,e$ed.worldShaderDefines=null,e$nd.activeShader=null,e$t.start(),e$q.showCanvasMark?e$t.clear(0,1,0,.3):e$t.clear(0,0,0,0),e$d.flush(),e$t.end(),e$nd.activeShader=null,e$ed.worldAlpha=e$W,e$ed.worldMatrix4=e$i,e$ed.worldMatrix=e$A,e$ed.worldFilters=e$B,e$ed.worldShaderDefines=e$o,e$ed.worldScissorTest=e$l){var e$I=e$ed.height-e$k.y-e$k.height;e$Hd.mainContext.scissor(e$k.x,e$I,e$k.width,e$k.height),e$Hd.mainContext.enable(3089)}e$ed.worldClipRect=e$k}},e$t.flush=function(e$d){this.repaint&&(this._flushToTarget(e$d,this.target),this.repaint=!1)},e$t.drawTo=function(e$d,e$t,e$l,e$k,e$W){e$d.drawTexture(this.target.getTexture(),e$t,e$l,e$k,e$W,0,0)},e$t.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},e$d}(),e$_=function(){function e$d(){this.ALPHA=1,this.shaderType=0,this.defines=new e$Td}return e$J(e$d,"laya.webgl.shader.d2.Shader2D"),e$d.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},e$d.__init__=function(){var e$d,e$t;e$md.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),e$md.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),e$md.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),e$md.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),e$md.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),e$md.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),e$md.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),e$md.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),e$d="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e$t='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',e$md.preCompile2D(0,1,e$d,e$t,null),e$d="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",e$t='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',e$md.preCompile2D(0,2,e$d,e$t,null),e$d="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",e$t="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",e$md.preCompile2D(0,4,e$d,e$t,null),e$d="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",e$t='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',e$md.preCompile2D(0,256,e$d,e$t,null),e$d="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",e$t="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",e$md.preCompile2D(0,512,e$d,e$t,null)},e$d}(),e$v=function(){function e$t(e$d,e$t,e$l){this._value=0,this._name2int=e$d,this._int2name=e$t,this._int2nameMap=e$l}e$J(e$t,"laya.webgl.shader.ShaderDefines");var e$d=e$t.prototype;return e$d.add=function(e$d){return"string"==typeof e$d&&(e$d=this._name2int[e$d]),this._value|=e$d,this._value},e$d.addInt=function(e$d){return this._value|=e$d,this._value},e$d.remove=function(e$d){return"string"==typeof e$d&&(e$d=this._name2int[e$d]),this._value&=~e$d,this._value},e$d.isDefine=function(e$d){return(this._value&e$d)===e$d},e$d.getValue=function(){return this._value},e$d.setValue=function(e$d){this._value=e$d},e$d.toNameDic=function(){var e$d=this._int2nameMap[this._value];return e$d||e$t._toText(this._value,this._int2name,this._int2nameMap)},e$t._reg=function(e$d,e$t,e$l,e$k){e$k[e$l[e$d]=e$t]=e$d},e$t._toText=function(e$d,e$t,e$l){var e$k=e$l[e$d];if(e$k)return e$k;for(var e$W={},e$i=1,e$A=0;e$A<32&&!(e$d<(e$i=1<<e$A));e$A++)if(e$d&e$i){var e$B=e$t[e$i];e$B&&(e$W[e$B]="")}return e$l[e$d]=e$W},e$t._toInt=function(e$d,e$t){for(var e$l=e$d.split("."),e$k=0,e$W=0,e$i=e$l.length;e$W<e$i;e$W++){var e$A=e$t[e$l[e$W]];if(!e$A)throw new Error("Defines to int err:"+e$d+"/"+e$l[e$W]);e$k|=e$A}return e$k},e$t}(),e$dd=function(){function e$A(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new e$$}e$J(e$A,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var e$d=e$A.prototype;return e$d.init=function(e$d,e$t,e$l){if(e$t)this._vs=e$t;else{this._vs=[];var e$k=e$d.width,e$W=e$d.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(e$k,0,1,0,1,1,1,1),this._vs.push(e$k,e$W,1,1,1,1,1,1),this._vs.push(0,e$W,0,1,1,1,1,1)}e$l?this._ps=e$l:(e$A._defaultPS||(e$A._defaultPS=[]).push(0,1,3,3,1,2),this._ps=e$A._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=e$d},e$d.init2=function(e$d,e$t,e$l,e$k,e$W){this.transform&&(this.transform=null),e$l?this._ps=e$l:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=e$k,this._uvs=e$W,this.mEleNum=this._ps.length,this.mTexture=e$d,(e$z.isConchNode||e$z.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},e$d._initMyData=function(){var e$d=0,e$t=0,e$l=4*this._verticles.length;this._vs=e$A._tempVS;var e$k=!1;if(e$z.isConchNode||e$z.isConchApp?(this._vs.length=e$l,e$k=!0):this._vs.length<e$l&&(this._vs.length=e$l,e$k=!0),e$A._tVSLen=e$l,e$k)for(;e$d<e$l;)this._vs[e$d]=this._verticles[e$t],this._vs[e$d+1]=this._verticles[e$t+1],this._vs[e$d+2]=this._uvs[e$t],this._vs[e$d+3]=this._uvs[e$t+1],this._vs[e$d+4]=1,this._vs[e$d+5]=1,this._vs[e$d+6]=1,this._vs[e$d+7]=1,e$d+=8,e$t+=2;else for(;e$d<e$l;)this._vs[e$d]=this._verticles[e$t],this._vs[e$d+1]=this._verticles[e$t+1],this._vs[e$d+2]=this._uvs[e$t],this._vs[e$d+3]=this._uvs[e$t+1],e$d+=8,e$t+=2},e$d.getData2=function(e$d,e$t,e$l){var e$k;this.mVBBuffer=e$d,this.mIBBuffer=e$t,this._initMyData(),e$d.appendEx2(this._vs,Float32Array,e$A._tVSLen,4),this._indexStart=e$t._byteLength,(e$k=e$A._tempIB).length<this._ps.length&&(e$k.length=this._ps.length);for(var e$W=0,e$i=this._ps.length;e$W<e$i;e$W++)e$k[e$W]=this._ps[e$W]+e$l;e$t.appendEx2(e$k,Uint16Array,this._ps.length,2)},e$d.getData=function(e$d,e$t,e$l){if(this.mVBBuffer=e$d,this.mIBBuffer=e$t,e$d.append(this.mVBData),this._indexStart=e$t._byteLength,this.mIBData.start!=e$l){for(var e$k=0,e$W=this._ps.length;e$k<e$W;e$k++)this.mIBData[e$k]=this._ps[e$k]+e$l;this.mIBData.start=e$l}e$t.append(this.mIBData)},e$d.render=function(e$d,e$t,e$l){if(e$z.isWebGL&&this.mTexture){e$d._renderKey=0,e$d._shader2D.glTexture=null,e$td.getInstance().addSkinMesh(this);var e$k=e$id.createShape(e$d,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,e$Ld.create(512,0));this.transform||(this.transform=e$$.EMPTY),this.transform.translate(e$t,e$l),e$$.mul(this.transform,e$d._curMat,this._tempMatrix),this.transform.translate(-e$t,-e$l);var e$W=e$k.shaderValue,e$i=e$W.u_mmat2||e$ed.getMatrArray();e$ed.mat2MatArray(this._tempMatrix,e$i),e$W.textureHost=this.mTexture,e$W.offsetX=0,e$W.offsetY=0,e$W.u_mmat2=e$i,e$W.ALPHA=e$d._shader2D.ALPHA,e$d._submits[e$d._submits._length++]=e$k}else e$z.isConchApp&&this.mTexture&&(this.transform||(this.transform=e$$.EMPTY),e$d.setSkinMesh&&e$d.setSkinMesh(e$t,e$l,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},e$A._tempVS=[],e$A._tempIB=[],e$A._defaultPS=null,e$A._tVSLen=0,e$A}(),e$td=function(){function e$d(){this.ib=null,this.vb=null;e$Hd.mainContext;this.ib=e$_d.create(35048),this.vb=e$vd.create(8)}e$J(e$d,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var e$t=e$d.prototype;return e$t.addSkinMesh=function(e$d){e$d.getData2(this.vb,this.ib,this.vb._byteLength/32)},e$t.reset=function(){this.vb.clear(),this.ib.clear()},e$d.getInstance=function(){return e$d.instance=e$d.instance||new e$d},e$d.instance=null,e$d}(),e$ld=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===e$o&&(e$o=0),this.x=e$d,this.y=e$t,this.width=e$l,this.height=e$k,this.edges=e$W,this.color=e$i,this.borderWidth=e$A,this.borderColor=e$B}e$J(e$d,"laya.webgl.shapes.BasePoly");var e$t=e$d.prototype;return e$G.imps(e$t,{"laya.webgl.shapes.IShape":!0}),e$t.getData=function(e$d,e$t,e$l){},e$t.rebuild=function(e$d){},e$t.setMatrix=function(e$d){},e$t.needUpdate=function(e$d){return!0},e$t.sector=function(e$d,e$t,e$l){var e$k=this.x,e$W=this.y,e$i=this.edges,e$A=(this.r1-this.r0)/e$i,e$B=this.width,e$o=this.height,e$I=this.color,e$b=(e$I>>16&255)/255,e$f=(e$I>>8&255)/255,e$J=(255&e$I)/255;e$d.push(e$k,e$W,e$b,e$f,e$J);for(var e$c=0;e$c<e$i+1;e$c++)e$d.push(e$k+Math.sin(e$A*e$c+this.r0)*e$B,e$W+Math.cos(e$A*e$c+this.r0)*e$o),e$d.push(e$b,e$f,e$J);for(e$c=0;e$c<e$i;e$c++)e$t.push(e$l,e$l+e$c+1,e$l+e$c+2)},e$t.createLine2=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A,e$B,e$o,e$I,e$b,e$f,e$J,e$c,e$Y,e$w,e$D,e$z,e$e,e$g,e$H,e$R,e$G,e$q,e$L,e$$,e$p=e$d.concat(),e$M=e$W,e$T=this.borderColor,e$r=(e$T>>16&255)/255,e$S=(e$T>>8&255)/255,e$j=(255&e$T)/255,e$C=e$p.length/2,e$K=e$k,e$x=e$l/2;e$o=e$p[0],e$I=e$p[1],e$w=e$o-(e$b=e$p[2]),e$Y=(e$Y=-(e$I-(e$f=e$p[3])))/(e$$=Math.sqrt(e$Y*e$Y+e$w*e$w))*e$x,e$w=e$w/e$$*e$x,e$M.push(e$o-e$Y+this.x,e$I-e$w+this.y,e$r,e$S,e$j,e$o+e$Y+this.x,e$I+e$w+this.y,e$r,e$S,e$j);for(var e$n=1;e$n<e$C-1;e$n++)e$o=e$p[2*(e$n-1)],e$I=e$p[2*(e$n-1)+1],e$b=e$p[2*e$n],e$f=e$p[2*e$n+1],e$J=e$p[2*(e$n+1)],e$c=e$p[2*(e$n+1)+1],e$w=e$o-e$b,e$z=e$b-e$J,e$H=(-(e$Y=(e$Y=-(e$I-e$f))/(e$$=Math.sqrt(e$Y*e$Y+e$w*e$w))*e$x)+e$o)*(-(e$w=e$w/e$$*e$x)+e$f)-(-e$Y+e$b)*(-e$w+e$I),e$q=(-(e$D=(e$D=-(e$f-e$c))/(e$$=Math.sqrt(e$D*e$D+e$z*e$z))*e$x)+e$J)*(-(e$z=e$z/e$$*e$x)+e$f)-(-e$D+e$b)*(-e$z+e$c),e$L=(e$e=-e$w+e$I-(-e$w+e$f))*(e$G=-e$D+e$b-(-e$D+e$J))-(e$R=-e$z+e$c-(-e$z+e$f))*(e$g=-e$Y+e$b-(-e$Y+e$o)),Math.abs(e$L)<.1?(e$L+=10.1,e$M.push(e$b-e$Y+this.x,e$f-e$w+this.y,e$r,e$S,e$j,e$b+e$Y+this.x,e$f+e$w+this.y,e$r,e$S,e$j)):(((e$A=(e$g*e$q-e$G*e$H)/e$L)-e$b)*(e$A-e$b)+((e$B=(e$R*e$H-e$e*e$q)/e$L)-e$f)+(e$B-e$f),e$M.push(e$A+this.x,e$B+this.y,e$r,e$S,e$j,e$b-(e$A-e$b)+this.x,e$f-(e$B-e$f)+this.y,e$r,e$S,e$j));e$o=e$p[e$p.length-4],e$I=e$p[e$p.length-3],e$w=e$o-(e$b=e$p[e$p.length-2]),e$Y=(e$Y=-(e$I-(e$f=e$p[e$p.length-1])))/(e$$=Math.sqrt(e$Y*e$Y+e$w*e$w))*e$x,e$w=e$w/e$$*e$x,e$M.push(e$b-e$Y+this.x,e$f-e$w+this.y,e$r,e$S,e$j,e$b+e$Y+this.x,e$f+e$w+this.y,e$r,e$S,e$j);var e$Q=e$i;for(e$n=1;e$n<e$Q;e$n++)e$t.push(e$K+2*(e$n-1),e$K+2*(e$n-1)+1,e$K+2*e$n+1,e$K+2*e$n+1,e$K+2*e$n,e$K+2*(e$n-1));return e$M},e$t.createLine=function(e$d,e$t,e$l,e$k){var e$W=e$d.concat(),e$i=e$d,e$A=this.borderColor,e$B=(e$A>>16&255)/255,e$o=(e$A>>8&255)/255,e$I=(255&e$A)/255;e$W.splice(0,5);var e$b,e$f,e$J,e$c,e$Y,e$w,e$D,e$z,e$e,e$g,e$H,e$R,e$G,e$q,e$L,e$$,e$p,e$M,e$T,e$r,e$S=e$W.length/5,e$j=e$k,e$C=e$l/2;e$J=e$W[0],e$c=e$W[1],e$g=e$J-(e$Y=e$W[5]),e$e=(e$e=-(e$c-(e$w=e$W[6])))/(e$r=Math.sqrt(e$e*e$e+e$g*e$g))*e$C,e$g=e$g/e$r*e$C,e$i.push(e$J-e$e,e$c-e$g,e$B,e$o,e$I,e$J+e$e,e$c+e$g,e$B,e$o,e$I);for(var e$K=1;e$K<e$S-1;e$K++)e$J=e$W[5*(e$K-1)],e$c=e$W[5*(e$K-1)+1],e$Y=e$W[5*e$K],e$w=e$W[5*e$K+1],e$D=e$W[5*(e$K+1)],e$z=e$W[5*(e$K+1)+1],e$g=e$J-e$Y,e$R=e$Y-e$D,e$L=(-(e$e=(e$e=-(e$c-e$w))/(e$r=Math.sqrt(e$e*e$e+e$g*e$g))*e$C)+e$J)*(-(e$g=e$g/e$r*e$C)+e$w)-(-e$e+e$Y)*(-e$g+e$c),e$M=(-(e$H=(e$H=-(e$w-e$z))/(e$r=Math.sqrt(e$H*e$H+e$R*e$R))*e$C)+e$D)*(-(e$R=e$R/e$r*e$C)+e$w)-(-e$H+e$Y)*(-e$R+e$z),e$T=(e$G=-e$g+e$c-(-e$g+e$w))*(e$p=-e$H+e$Y-(-e$H+e$D))-(e$$=-e$R+e$z-(-e$R+e$w))*(e$q=-e$e+e$Y-(-e$e+e$J)),Math.abs(e$T)<.1?(e$T+=10.1,e$i.push(e$Y-e$e,e$w-e$g,e$B,e$o,e$I,e$Y+e$e,e$w+e$g,e$B,e$o,e$I)):(((e$b=(e$q*e$M-e$p*e$L)/e$T)-e$Y)*(e$b-e$Y)+((e$f=(e$$*e$L-e$G*e$M)/e$T)-e$w)+(e$f-e$w),e$i.push(e$b,e$f,e$B,e$o,e$I,e$Y-(e$b-e$Y),e$w-(e$f-e$w),e$B,e$o,e$I));e$J=e$W[e$W.length-10],e$c=e$W[e$W.length-9],e$g=e$J-(e$Y=e$W[e$W.length-5]),e$e=(e$e=-(e$c-(e$w=e$W[e$W.length-4])))/(e$r=Math.sqrt(e$e*e$e+e$g*e$g))*e$C,e$g=e$g/e$r*e$C,e$i.push(e$Y-e$e,e$w-e$g,e$B,e$o,e$I,e$Y+e$e,e$w+e$g,e$B,e$o,e$I);var e$x=this.edges+1;for(e$K=1;e$K<e$x;e$K++)e$t.push(e$j+2*(e$K-1),e$j+2*(e$K-1)+1,e$j+2*e$K+1,e$j+2*e$K+1,e$j+2*e$K,e$j+2*(e$K-1));return e$i},e$t.createLoopLine=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$d.concat(),e$B=e$W||e$d,e$o=this.borderColor,e$I=(e$o>>16&255)/255,e$b=(e$o>>8&255)/255,e$f=(255&e$o)/255;e$A.splice(0,5);var e$J=[e$A[0],e$A[1]],e$c=[e$A[e$A.length-5],e$A[e$A.length-4]],e$Y=e$c[0]+.5*(e$J[0]-e$c[0]),e$w=e$c[1]+.5*(e$J[1]-e$c[1]);e$A.unshift(e$Y,e$w,0,0,0),e$A.push(e$Y,e$w,0,0,0);var e$D,e$z,e$e,e$g,e$H,e$R,e$G,e$q,e$L,e$$,e$p,e$M,e$T,e$r,e$S,e$j,e$C,e$K,e$x,e$n,e$Q=e$A.length/5,e$y=e$k,e$V=e$l/2;e$e=e$A[0],e$g=e$A[1],e$$=e$e-(e$H=e$A[5]),e$L=(e$L=-(e$g-(e$R=e$A[6])))/(e$n=Math.sqrt(e$L*e$L+e$$*e$$))*e$V,e$$=e$$/e$n*e$V,e$B.push(e$e-e$L,e$g-e$$,e$I,e$b,e$f,e$e+e$L,e$g+e$$,e$I,e$b,e$f);for(var e$Z=1;e$Z<e$Q-1;e$Z++)e$e=e$A[5*(e$Z-1)],e$g=e$A[5*(e$Z-1)+1],e$H=e$A[5*e$Z],e$R=e$A[5*e$Z+1],e$G=e$A[5*(e$Z+1)],e$q=e$A[5*(e$Z+1)+1],e$$=e$e-e$H,e$M=e$H-e$G,e$S=(-(e$L=(e$L=-(e$g-e$R))/(e$n=Math.sqrt(e$L*e$L+e$$*e$$))*e$V)+e$e)*(-(e$$=e$$/e$n*e$V)+e$R)-(-e$L+e$H)*(-e$$+e$g),e$K=(-(e$p=(e$p=-(e$R-e$q))/(e$n=Math.sqrt(e$p*e$p+e$M*e$M))*e$V)+e$G)*(-(e$M=e$M/e$n*e$V)+e$R)-(-e$p+e$H)*(-e$M+e$q),e$x=(e$T=-e$$+e$g-(-e$$+e$R))*(e$C=-e$p+e$H-(-e$p+e$G))-(e$j=-e$M+e$q-(-e$M+e$R))*(e$r=-e$L+e$H-(-e$L+e$e)),Math.abs(e$x)<.1?(e$x+=10.1,e$B.push(e$H-e$L,e$R-e$$,e$I,e$b,e$f,e$H+e$L,e$R+e$$,e$I,e$b,e$f)):(((e$D=(e$r*e$K-e$C*e$S)/e$x)-e$H)*(e$D-e$H)+((e$z=(e$j*e$S-e$T*e$K)/e$x)-e$R)+(e$z-e$R),e$B.push(e$D,e$z,e$I,e$b,e$f,e$H-(e$D-e$H),e$R-(e$z-e$R),e$I,e$b,e$f));e$i&&(e$t=e$i);var e$U=this.edges+1;for(e$Z=1;e$Z<e$U;e$Z++)e$t.push(e$y+2*(e$Z-1),e$y+2*(e$Z-1)+1,e$y+2*e$Z+1,e$y+2*e$Z+1,e$y+2*e$Z,e$y+2*(e$Z-1));return e$t.push(e$y+2*(e$Z-1),e$y+2*(e$Z-1)+1,e$y+1,e$y+1,e$y,e$y+2*(e$Z-1)),e$B},e$d}(),e$kd=function(){function e$w(){}return e$J(e$w,"laya.webgl.shapes.Earcut"),e$w.earcut=function(e$d,e$t,e$l){e$l=e$l||2;var e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b=e$t&&e$t.length,e$f=e$b?e$t[0]*e$l:e$d.length,e$J=e$w.linkedList(e$d,0,e$f,e$l,!0),e$c=[];if(!e$J)return e$c;if(e$b&&(e$J=e$w.eliminateHoles(e$d,e$t,e$J,e$l)),e$d.length>80*e$l){e$k=e$i=e$d[0],e$W=e$A=e$d[1];for(var e$Y=e$l;e$Y<e$f;e$Y+=e$l)(e$B=e$d[e$Y])<e$k&&(e$k=e$B),(e$o=e$d[e$Y+1])<e$W&&(e$W=e$o),e$i<e$B&&(e$i=e$B),e$A<e$o&&(e$A=e$o);e$I=0!==(e$I=Math.max(e$i-e$k,e$A-e$W))?1/e$I:0}return e$w.earcutLinked(e$J,e$c,e$l,e$k,e$W,e$I),e$c},e$w.linkedList=function(e$d,e$t,e$l,e$k,e$W){var e$i,e$A;if(e$W===0<e$w.signedArea(e$d,e$t,e$l,e$k))for(e$i=e$t;e$i<e$l;e$i+=e$k)e$A=e$w.insertNode(e$i,e$d[e$i],e$d[e$i+1],e$A);else for(e$i=e$l-e$k;e$t<=e$i;e$i-=e$k)e$A=e$w.insertNode(e$i,e$d[e$i],e$d[e$i+1],e$A);return e$A&&e$w.equals(e$A,e$A.next)&&(e$w.removeNode(e$A),e$A=e$A.next),e$A},e$w.filterPoints=function(e$d,e$t){if(!e$d)return e$d;e$t||(e$t=e$d);var e$l,e$k=e$d;do{if(e$l=!1,e$k.steiner||!e$w.equals(e$k,e$k.next)&&0!==e$w.area(e$k.prev,e$k,e$k.next))e$k=e$k.next;else{if(e$w.removeNode(e$k),(e$k=e$t=e$k.prev)===e$k.next)break;e$l=!0}}while(e$l||e$k!==e$t);return e$t},e$w.earcutLinked=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){if(e$d){!e$A&&e$i&&e$w.indexCurve(e$d,e$k,e$W,e$i);for(var e$B,e$o,e$I=e$d;e$d.prev!==e$d.next;)if(e$B=e$d.prev,e$o=e$d.next,e$i?e$w.isEarHashed(e$d,e$k,e$W,e$i):e$w.isEar(e$d))e$t.push(e$B.i/e$l),e$t.push(e$d.i/e$l),e$t.push(e$o.i/e$l),e$w.removeNode(e$d),e$d=e$o.next,e$I=e$o.next;else if((e$d=e$o)===e$I){e$A?1===e$A?(e$d=e$w.cureLocalIntersections(e$d,e$t,e$l),e$w.earcutLinked(e$d,e$t,e$l,e$k,e$W,e$i,2)):2===e$A&&e$w.splitEarcut(e$d,e$t,e$l,e$k,e$W,e$i):e$w.earcutLinked(e$w.filterPoints(e$d,null),e$t,e$l,e$k,e$W,e$i,1);break}}},e$w.isEar=function(e$d){var e$t=e$d.prev,e$l=e$d,e$k=e$d.next;if(0<=e$w.area(e$t,e$l,e$k))return!1;for(var e$W=e$d.next.next;e$W!==e$d.prev;){if(e$w.pointInTriangle(e$t.x,e$t.y,e$l.x,e$l.y,e$k.x,e$k.y,e$W.x,e$W.y)&&0<=e$w.area(e$W.prev,e$W,e$W.next))return!1;e$W=e$W.next}return!0},e$w.isEarHashed=function(e$d,e$t,e$l,e$k){var e$W=e$d.prev,e$i=e$d,e$A=e$d.next;if(0<=e$w.area(e$W,e$i,e$A))return!1;for(var e$B=e$W.x<e$i.x?e$W.x<e$A.x?e$W.x:e$A.x:e$i.x<e$A.x?e$i.x:e$A.x,e$o=e$W.y<e$i.y?e$W.y<e$A.y?e$W.y:e$A.y:e$i.y<e$A.y?e$i.y:e$A.y,e$I=e$W.x>e$i.x?e$W.x>e$A.x?e$W.x:e$A.x:e$i.x>e$A.x?e$i.x:e$A.x,e$b=e$W.y>e$i.y?e$W.y>e$A.y?e$W.y:e$A.y:e$i.y>e$A.y?e$i.y:e$A.y,e$f=e$w.zOrder(e$B,e$o,e$t,e$l,e$k),e$J=e$w.zOrder(e$I,e$b,e$t,e$l,e$k),e$c=e$d.nextZ;e$c&&e$c.z<=e$J;){if(e$c!==e$d.prev&&e$c!==e$d.next&&e$w.pointInTriangle(e$W.x,e$W.y,e$i.x,e$i.y,e$A.x,e$A.y,e$c.x,e$c.y)&&0<=e$w.area(e$c.prev,e$c,e$c.next))return!1;e$c=e$c.nextZ}for(e$c=e$d.prevZ;e$c&&e$c.z>=e$f;){if(e$c!==e$d.prev&&e$c!==e$d.next&&e$w.pointInTriangle(e$W.x,e$W.y,e$i.x,e$i.y,e$A.x,e$A.y,e$c.x,e$c.y)&&0<=e$w.area(e$c.prev,e$c,e$c.next))return!1;e$c=e$c.prevZ}return!0},e$w.cureLocalIntersections=function(e$d,e$t,e$l){var e$k=e$d;do{var e$W=e$k.prev,e$i=e$k.next.next;!e$w.equals(e$W,e$i)&&e$w.intersects(e$W,e$k,e$k.next,e$i)&&e$w.locallyInside(e$W,e$i)&&e$w.locallyInside(e$i,e$W)&&(e$t.push(e$W.i/e$l),e$t.push(e$k.i/e$l),e$t.push(e$i.i/e$l),e$w.removeNode(e$k),e$w.removeNode(e$k.next),e$k=e$d=e$i),e$k=e$k.next}while(e$k!==e$d);return e$k},e$w.splitEarcut=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$d;do{for(var e$B=e$A.next.next;e$B!==e$A.prev;){if(e$A.i!==e$B.i&&e$w.isValidDiagonal(e$A,e$B)){var e$o=e$w.splitPolygon(e$A,e$B);return e$A=e$w.filterPoints(e$A,e$A.next),e$o=e$w.filterPoints(e$o,e$o.next),e$w.earcutLinked(e$A,e$t,e$l,e$k,e$W,e$i),void e$w.earcutLinked(e$o,e$t,e$l,e$k,e$W,e$i)}e$B=e$B.next}e$A=e$A.next}while(e$A!==e$d)},e$w.eliminateHoles=function(e$d,e$t,e$l,e$k){var e$W,e$i,e$A,e$B,e$o,e$I=[];for(e$W=0,e$i=e$t.length;e$W<e$i;e$W++)e$A=e$t[e$W]*e$k,e$B=e$W<e$i-1?e$t[e$W+1]*e$k:e$d.length,(e$o=e$w.linkedList(e$d,e$A,e$B,e$k,!1))===e$o.next&&(e$o.steiner=!0),e$I.push(e$w.getLeftmost(e$o));for(e$I.sort(e$w.compareX),e$W=0;e$W<e$I.length;e$W++)e$w.eliminateHole(e$I[e$W],e$l),e$l=e$w.filterPoints(e$l,e$l.next);return e$l},e$w.compareX=function(e$d,e$t){return e$d.x-e$t.x},e$w.eliminateHole=function(e$d,e$t){if(e$t=e$w.findHoleBridge(e$d,e$t)){var e$l=e$w.splitPolygon(e$t,e$d);e$w.filterPoints(e$l,e$l.next)}},e$w.findHoleBridge=function(e$d,e$t){var e$l,e$k=e$t,e$W=e$d.x,e$i=e$d.y,e$A=-1/0;do{if(e$i<=e$k.y&&e$i>=e$k.next.y&&e$k.next.y!==e$k.y){var e$B=e$k.x+(e$i-e$k.y)*(e$k.next.x-e$k.x)/(e$k.next.y-e$k.y);if(e$B<=e$W&&e$A<e$B){if((e$A=e$B)===e$W){if(e$i===e$k.y)return e$k;if(e$i===e$k.next.y)return e$k.next}e$l=e$k.x<e$k.next.x?e$k:e$k.next}}e$k=e$k.next}while(e$k!==e$t);if(!e$l)return null;if(e$W===e$A)return e$l.prev;var e$o,e$I=e$l,e$b=e$l.x,e$f=e$l.y,e$J=1/0;for(e$k=e$l.next;e$k!==e$I;)e$W>=e$k.x&&e$k.x>=e$b&&e$W!==e$k.x&&e$w.pointInTriangle(e$i<e$f?e$W:e$A,e$i,e$b,e$f,e$i<e$f?e$A:e$W,e$i,e$k.x,e$k.y)&&((e$o=Math.abs(e$i-e$k.y)/(e$W-e$k.x))<e$J||e$o===e$J&&e$k.x>e$l.x)&&e$w.locallyInside(e$k,e$d)&&(e$l=e$k,e$J=e$o),e$k=e$k.next;return e$l},e$w.indexCurve=function(e$d,e$t,e$l,e$k){for(var e$W=e$d;null===e$W.z&&(e$W.z=e$w.zOrder(e$W.x,e$W.y,e$t,e$l,e$k)),e$W.prevZ=e$W.prev,e$W.nextZ=e$W.next,(e$W=e$W.next)!==e$d;);e$W.prevZ.nextZ=null,e$W.prevZ=null,e$w.sortLinked(e$W)},e$w.sortLinked=function(e$d){var e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I=1;do{for(e$l=e$d,e$i=e$d=null,e$A=0;e$l;){for(e$A++,e$k=e$l,e$t=e$B=0;e$t<e$I&&(e$B++,e$k=e$k.nextZ);e$t++);for(e$o=e$I;0<e$B||0<e$o&&e$k;)0!==e$B&&(0===e$o||!e$k||e$l.z<=e$k.z)?(e$l=(e$W=e$l).nextZ,e$B--):(e$k=(e$W=e$k).nextZ,e$o--),e$i?e$i.nextZ=e$W:e$d=e$W,e$W.prevZ=e$i,e$i=e$W;e$l=e$k}e$i.nextZ=null,e$I*=2}while(1<e$A);return e$d},e$w.zOrder=function(e$d,e$t,e$l,e$k,e$W){return(e$d=1431655765&((e$d=858993459&((e$d=252645135&((e$d=16711935&((e$d=32767*(e$d-e$l)*e$W)|e$d<<8))|e$d<<4))|e$d<<2))|e$d<<1))|(e$t=1431655765&((e$t=858993459&((e$t=252645135&((e$t=16711935&((e$t=32767*(e$t-e$k)*e$W)|e$t<<8))|e$t<<4))|e$t<<2))|e$t<<1))<<1},e$w.getLeftmost=function(e$d){for(var e$t=e$d,e$l=e$d;e$t.x<e$l.x&&(e$l=e$t),(e$t=e$t.next)!==e$d;);return e$l},e$w.pointInTriangle=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){return 0<=(e$W-e$A)*(e$t-e$B)-(e$d-e$A)*(e$i-e$B)&&0<=(e$d-e$A)*(e$k-e$B)-(e$l-e$A)*(e$t-e$B)&&0<=(e$l-e$A)*(e$i-e$B)-(e$W-e$A)*(e$k-e$B)},e$w.isValidDiagonal=function(e$d,e$t){return e$d.next.i!==e$t.i&&e$d.prev.i!==e$t.i&&!e$w.intersectsPolygon(e$d,e$t)&&e$w.locallyInside(e$d,e$t)&&e$w.locallyInside(e$t,e$d)&&e$w.middleInside(e$d,e$t)},e$w.area=function(e$d,e$t,e$l){return(e$t.y-e$d.y)*(e$l.x-e$t.x)-(e$t.x-e$d.x)*(e$l.y-e$t.y)},e$w.equals=function(e$d,e$t){return e$d.x===e$t.x&&e$d.y===e$t.y},e$w.intersects=function(e$d,e$t,e$l,e$k){return!!(e$w.equals(e$d,e$t)&&e$w.equals(e$l,e$k)||e$w.equals(e$d,e$k)&&e$w.equals(e$l,e$t))||0<e$w.area(e$d,e$t,e$l)!=0<e$w.area(e$d,e$t,e$k)&&0<e$w.area(e$l,e$k,e$d)!=0<e$w.area(e$l,e$k,e$t)},e$w.intersectsPolygon=function(e$d,e$t){var e$l=e$d;do{if(e$l.i!==e$d.i&&e$l.next.i!==e$d.i&&e$l.i!==e$t.i&&e$l.next.i!==e$t.i&&e$w.intersects(e$l,e$l.next,e$d,e$t))return!0;e$l=e$l.next}while(e$l!==e$d);return!1},e$w.locallyInside=function(e$d,e$t){return e$w.area(e$d.prev,e$d,e$d.next)<0?0<=e$w.area(e$d,e$t,e$d.next)&&0<=e$w.area(e$d,e$d.prev,e$t):e$w.area(e$d,e$t,e$d.prev)<0||e$w.area(e$d,e$d.next,e$t)<0},e$w.middleInside=function(e$d,e$t){for(var e$l=e$d,e$k=!1,e$W=(e$d.x+e$t.x)/2,e$i=(e$d.y+e$t.y)/2;e$l.y>e$i!=e$l.next.y>e$i&&e$l.next.y!==e$l.y&&e$W<(e$l.next.x-e$l.x)*(e$i-e$l.y)/(e$l.next.y-e$l.y)+e$l.x&&(e$k=!e$k),(e$l=e$l.next)!==e$d;);return e$k},e$w.splitPolygon=function(e$d,e$t){var e$l=new e$Wd(e$d.i,e$d.x,e$d.y),e$k=new e$Wd(e$t.i,e$t.x,e$t.y),e$W=e$d.next,e$i=e$t.prev;return(e$d.next=e$t).prev=e$d,(e$l.next=e$W).prev=e$l,(e$k.next=e$l).prev=e$k,(e$i.next=e$k).prev=e$i,e$k},e$w.insertNode=function(e$d,e$t,e$l,e$k){var e$W=new e$Wd(e$d,e$t,e$l);return e$k?(e$W.next=e$k.next,(e$W.prev=e$k).next.prev=e$W,e$k.next=e$W):(e$W.prev=e$W).next=e$W,e$W},e$w.removeNode=function(e$d){e$d.next.prev=e$d.prev,e$d.prev.next=e$d.next,e$d.prevZ&&(e$d.prevZ.nextZ=e$d.nextZ),e$d.nextZ&&(e$d.nextZ.prevZ=e$d.prevZ)},e$w.signedArea=function(e$d,e$t,e$l,e$k){for(var e$W=0,e$i=e$t,e$A=e$l-e$k;e$i<e$l;e$i+=e$k)e$W+=(e$d[e$A]-e$d[e$i])*(e$d[e$i+1]+e$d[e$A+1]),e$A=e$i;return e$W},e$w}(),e$Wd=function(){function e$d(e$d,e$t,e$l){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=e$d,this.x=e$t,this.y=e$l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return e$J(e$d,"laya.webgl.shapes.EarcutNode"),e$d}(),e$id=(function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this.lineWidth=e$d,this.lineColor=e$t,this.lineAlpha=e$l,this.fillColor=e$k,this.fillAlpha=e$W,this.shape=e$A,this.fill=e$i}e$J(e$d,"laya.webgl.shapes.GeometryData");var e$t=e$d.prototype;e$t.clone=function(){return new e$d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},e$t.getIndexData=function(){return null},e$t.getVertexData=function(){return null},e$t.destroy=function(){this.shape=null}}(),function(){function e$d(e$d){if(e$d instanceof Float32Array)this.points=e$d;else if(e$d instanceof Array){e$d.length;this.points=new Float32Array(e$d)}}e$J(e$d,"laya.webgl.shapes.Vertex");var e$t=e$d.prototype;e$G.imps(e$t,{"laya.webgl.shapes.IShape":!0}),e$t.getData=function(e$d,e$t,e$l){},e$t.needUpdate=function(e$d){return!1},e$t.rebuild=function(e$d){},e$t.setMatrix=function(e$d){}}(),function(){function e$o(e$d){void 0===e$d&&(e$d=1e4),this._renderType=e$d}e$J(e$o,"laya.webgl.submit.Submit");var e$d=e$o.prototype;return e$G.imps(e$d,{"laya.webgl.submit.ISubmit":!0}),e$d.releaseRender=function(){var e$d=e$o._cache;(e$d[e$d._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},e$d.getRenderType=function(){return this._renderType},e$d.renderSubmit=function(){if(0===this._numEle)return 1;var e$d=this.shaderValue.textureHost;if(e$d){var e$t=e$d.source;if(!e$d.bitmap||!e$t)return 1;this.shaderValue.texture=e$t,e$d.alphaTexture&&e$d.alphaTexture.source&&(this.shaderValue.texture1=e$d.alphaTexture.source)}this._vb.bind_upload(this._ib);var e$l=e$Hd.mainContext;return this.shaderValue.upload(),e$N.activeBlendFunction!==this._blendFn&&(e$l.enable(3042),this._blendFn(e$l),e$N.activeBlendFunction=this._blendFn),e$S.drawCall++,e$S.trianglesFaces+=this._numEle/3,e$l.drawElements(4,this._numEle,5123,this._startIdx),1},e$o.__init__=function(){var e$d=e$o.RENDERBASE=new e$o(-1);e$d.shaderValue=new e$Ld(0,0),e$d.shaderValue.ALPHA=-1234},e$o.createSubmit=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$o._cache._length?e$o._cache[--e$o._cache._length]:new e$o;null==e$l&&((e$l=e$i._selfVb||(e$i._selfVb=e$vd.create(-1))).clear(),e$k=0),e$i._ib=e$t,e$i._vb=e$l,e$i._startIdx=e$k*e$wd.BYTES_PIDX,e$i._numEle=0;var e$A=e$d._nBlendType;e$i._blendFn=e$d._targets?e$N.targetFns[e$A]:e$N.fns[e$A],e$i.shaderValue=e$W,e$i.shaderValue.setValue(e$d._shader2D);var e$B=e$d._shader2D.filters;return e$B&&e$i.shaderValue.setFilters(e$B),e$i},e$o.createShape=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$o._cache._length?e$o._cache[--e$o._cache._length]:new e$o;e$A._ib=e$t,e$A._vb=e$l,e$A._numEle=e$k,e$A._startIdx=e$W,e$A.shaderValue=e$i,e$A.shaderValue.setValue(e$d._shader2D);var e$B=e$d._nBlendType;return e$A._blendFn=e$d._targets?e$N.targetFns[e$B]:e$N.fns[e$B],e$A},e$o.TYPE_2D=1e4,e$o.TYPE_CANVAS=10003,e$o.TYPE_CMDSETRT=10004,e$o.TYPE_CUSTOM=10005,e$o.TYPE_BLURRT=10006,e$o.TYPE_CMDDESTORYPRERT=10007,e$o.TYPE_DISABLESTENCIL=10008,e$o.TYPE_OTHERIBVB=10009,e$o.TYPE_PRIMITIVE=10010,e$o.TYPE_RT=10011,e$o.TYPE_BLUR_RT=10012,e$o.TYPE_TARGET=10013,e$o.TYPE_CHANGE_VALUE=10014,e$o.TYPE_SHAPE=10015,e$o.TYPE_TEXTURE=10016,e$o.TYPE_FILLTEXTURE=10017,e$o.RENDERBASE=null,e$o._cache=((e$o._cache=[])._length=0,e$o._cache),e$o}()),e$Ad=function(){function e$k(){this.fun=null,this.args=null}e$J(e$k,"laya.webgl.submit.SubmitCMD");var e$d=e$k.prototype;return e$G.imps(e$d,{"laya.webgl.submit.ISubmit":!0}),e$d.renderSubmit=function(){return this.fun.apply(null,this.args),1},e$d.getRenderType=function(){return 0},e$d.releaseRender=function(){var e$d=e$k._cache;e$d[e$d._length++]=this},e$k.create=function(e$d,e$t){var e$l=e$k._cache._length?e$k._cache[--e$k._cache._length]:new e$k;return e$l.fun=e$t,e$l.args=e$d,e$l},e$k._cache=((e$k._cache=[])._length=0,e$k._cache),e$k}(),e$Bd=function(){function e$t(){this.variables={}}e$J(e$t,"laya.webgl.submit.SubmitCMDScope");var e$d=e$t.prototype;return e$d.getValue=function(e$d){return this.variables[e$d]},e$d.addValue=function(e$d,e$t){return this.variables[e$d]=e$t},e$d.setValue=function(e$d,e$t){return this.variables.hasOwnProperty(e$d)?this.variables[e$d]=e$t:null},e$d.clear=function(){for(var e$d in this.variables)delete this.variables[e$d]},e$d.recycle=function(){this.clear(),e$t.POOL.push(this)},e$t.create=function(){var e$d=e$t.POOL.pop();return e$d||(e$d=new e$t),e$d},e$t.POOL=[],e$t}(),e$od=function(){function e$f(){this.offset=0,this.startIndex=0,this._mat=e$$.create()}e$J(e$f,"laya.webgl.submit.SubmitOtherIBVB");var e$d=e$f.prototype;return e$G.imps(e$d,{"laya.webgl.submit.ISubmit":!0}),e$d.releaseRender=function(){var e$d=e$f._cache;(e$d[e$d._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},e$d.getRenderType=function(){return 10009},e$d.renderSubmit=function(){var e$d=this._shaderValue.textureHost;if(e$d){var e$t=e$d.source;if(!e$d.bitmap||!e$t)return 1;this._shaderValue.texture=e$t}this._vb.bind_upload(this._ib);var e$l=e$ed.worldMatrix4,e$k=e$$.TEMP;e$$.mulPre(this._mat,e$l[0],e$l[1],e$l[4],e$l[5],e$l[12],e$l[13],e$k);var e$W=e$ed.worldMatrix4=e$f.tempMatrix4;e$W[0]=e$k.a,e$W[1]=e$k.b,e$W[4]=e$k.c,e$W[5]=e$k.d,e$W[12]=e$k.tx,e$W[13]=e$k.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var e$i=e$Hd.mainContext;return e$N.activeBlendFunction!==this._blendFn&&(e$i.enable(3042),this._blendFn(e$i),e$N.activeBlendFunction=this._blendFn),e$S.drawCall++,e$S.trianglesFaces+=this._numEle/3,e$i.drawElements(4,this._numEle,5123,this.startIndex),e$ed.worldMatrix4=e$l,e$nd.activeShader=null,1},e$f.create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){void 0===e$o&&(e$o=0);var e$I=e$f._cache._length?e$f._cache[--e$f._cache._length]:new e$f;e$I._ib=e$l,e$I._vb=e$t,e$I._numEle=e$k,e$I._shader=e$W,e$I._shaderValue=e$i;var e$b=e$d._nBlendType;switch(e$I._blendFn=e$d._targets?e$N.targetFns[e$b]:e$N.fns[e$b],e$o){case 0:e$I.offset=0,e$I.startIndex=e$B/(e$wd.BYTES_PE*e$t.vertexStride)*1.5,e$I.startIndex*=e$wd.BYTES_PIDX;break;case 1:e$I.startIndex=e$A,e$I.offset=e$B}return e$I},e$f._cache=((e$f._cache=[])._length=0,e$f._cache),e$f.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$f}(),e$Id=function(){function e$l(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new e$M,this.screenRect=new e$M}e$J(e$l,"laya.webgl.submit.SubmitScissor");var e$d=e$l.prototype;return e$G.imps(e$d,{"laya.webgl.submit.ISubmit":!0}),e$d._scissor=function(e$d,e$t,e$l,e$k){var e$W=e$ed.worldMatrix4,e$i=e$W[0],e$A=e$W[5],e$B=e$W[12],e$o=e$W[13];if(e$k*=e$A,(e$l*=e$i)<1||e$k<1)return!1;var e$I=(e$d=e$d*e$i+e$B)+e$l,e$b=(e$t=e$t*e$A+e$o)+e$k;e$d<0&&(e$l=e$I-(e$d=0)),e$t<0&&(e$k=e$b-(e$t=0));var e$f=e$ed.worldClipRect;if(e$d=Math.max(e$d,e$f.x),e$t=Math.max(e$t,e$f.y),e$l=Math.min(e$I,e$f.right)-e$d,e$k=Math.min(e$b,e$f.bottom)-e$t,e$l<1||e$k<1)return!1;var e$J=e$ed.worldScissorTest;return this.screenRect.copyFrom(e$f),e$f.x=e$d,e$f.y=e$t,e$f.width=e$l,e$f.height=e$k,e$ed.worldScissorTest=!0,e$t=e$ed.height-e$t-e$k,e$Hd.mainContext.scissor(e$d,e$t,e$l,e$k),e$Hd.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),e$J?(e$t=e$ed.height-this.screenRect.y-this.screenRect.height,e$Hd.mainContext.scissor(this.screenRect.x,e$t,this.screenRect.width,this.screenRect.height),e$Hd.mainContext.enable(3089)):(e$Hd.mainContext.disable(3089),e$ed.worldScissorTest=!1),e$f.copyFrom(this.screenRect),!0},e$d._scissorWithTagart=function(e$d,e$t,e$l,e$k){if(e$l<1||e$k<1)return!1;var e$W=e$d+e$l,e$i=e$t+e$k;e$d<0&&(e$l=e$W-(e$d=0)),e$t<0&&(e$k=e$i-(e$t=0));var e$A=e$ed.worldClipRect;if(e$d=Math.max(e$d,e$A.x),e$t=Math.max(e$t,e$A.y),e$l=Math.min(e$W,e$A.right)-e$d,e$k=Math.min(e$i,e$A.bottom)-e$t,e$l<1||e$k<1)return!1;var e$B=e$ed.worldScissorTest;return this.screenRect.copyFrom(e$A),e$ed.worldScissorTest=!0,e$A.x=e$d,e$A.y=e$t,e$A.width=e$l,e$A.height=e$k,e$t=e$ed.height-e$t-e$k,e$Hd.mainContext.scissor(e$d,e$t,e$l,e$k),e$Hd.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),e$B?(e$t=e$ed.height-this.screenRect.y-this.screenRect.height,e$Hd.mainContext.scissor(this.screenRect.x,e$t,this.screenRect.width,this.screenRect.height),e$Hd.mainContext.enable(3089)):(e$Hd.mainContext.disable(3089),e$ed.worldScissorTest=!1),e$A.copyFrom(this.screenRect),!0},e$d.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},e$d.getRenderType=function(){return 0},e$d.releaseRender=function(){var e$d=e$l._cache;(e$d[e$d._length++]=this).context=null},e$l.create=function(e$d){var e$t=e$l._cache._length?e$l._cache[--e$l._cache._length]:new e$l;return e$t.context=e$d,e$t},e$l._cache=((e$l._cache=[])._length=0,e$l._cache),e$l}(),e$bd=function(){function e$o(){this.step=0,this.blendMode=null,this.level=0}e$J(e$o,"laya.webgl.submit.SubmitStencil");var e$d=e$o.prototype;return e$G.imps(e$d,{"laya.webgl.submit.ISubmit":!0}),e$d.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},e$d.getRenderType=function(){return 0},e$d.releaseRender=function(){var e$d=e$o._cache;e$d[e$d._length++]=this},e$d.do1=function(){var e$d=e$Hd.mainContext;e$d.enable(2960),e$d.clear(1024),e$d.colorMask(!1,!1,!1,!1),e$d.stencilFunc(514,this.level,255),e$d.stencilOp(7680,7680,7682)},e$d.do2=function(){var e$d=e$Hd.mainContext;e$d.stencilFunc(514,this.level+1,255),e$d.colorMask(!0,!0,!0,!0),e$d.stencilOp(7680,7680,7680)},e$d.do3=function(){var e$d=e$Hd.mainContext;e$d.colorMask(!0,!0,!0,!0),e$d.stencilOp(7680,7680,7680),e$d.clear(1024),e$d.disable(2960)},e$d.do4=function(){var e$d=e$Hd.mainContext;0==this.level&&(e$d.enable(2960),e$d.clear(1024)),e$d.colorMask(!1,!1,!1,!1),e$d.stencilFunc(519,0,255),e$d.stencilOp(7680,7680,7682)},e$d.do5=function(){var e$d=e$Hd.mainContext;e$d.stencilFunc(514,this.level,255),e$d.colorMask(!0,!0,!0,!0),e$d.stencilOp(7680,7680,7680)},e$d.do6=function(){var e$d=e$Hd.mainContext;e$N.targetFns[e$N.TOINT[this.blendMode]](e$d)},e$d.do7=function(){var e$d=e$Hd.mainContext;e$d.colorMask(!1,!1,!1,!1),e$d.stencilOp(7680,7680,7683)},e$d.do8=function(){var e$d=e$Hd.mainContext;e$d.colorMask(!0,!0,!0,!0),e$d.stencilFunc(514,this.level,255),e$d.stencilOp(7680,7680,7680)},e$o.restore=function(e$d,e$t,e$l,e$k,e$W){var e$i;if((e$d._renderKey=0)<e$o._mask&&e$o._mask--,0==e$o._mask)e$i=laya.webgl.submit.SubmitStencil.create(3),e$d.addRenderObject(e$i),e$d._curSubmit=e$id.RENDERBASE;else{e$i=laya.webgl.submit.SubmitStencil.create(7),e$d.addRenderObject(e$i);var e$A=e$d._vb;e$A._byteLength;if(e$Dd.fillRectImgVb(e$A,null,e$t.x,e$t.y,e$t.width,e$t.height,e$x.DEF_UV,e$l,e$k,e$W,0,0)){e$d._shader2D.glTexture=null;var e$B=e$d._curSubmit=e$id.createSubmit(e$d,e$d._ib,e$A,(e$A._byteLength-64)/32*3,e$Ld.create(2,0));e$B.shaderValue.ALPHA=1,e$d._submits[e$d._submits._length++]=e$B,e$d._curSubmit._numEle+=6,e$d._curSubmit=e$id.RENDERBASE}else alert("clipRect calc stencil rect error");e$i=laya.webgl.submit.SubmitStencil.create(8),e$d.addRenderObject(e$i)}},e$o.restore2=function(e$d,e$t){var e$l;(e$d._renderKey=0)<e$o._mask&&e$o._mask--,0==e$o._mask?(e$l=laya.webgl.submit.SubmitStencil.create(3),e$d.addRenderObject(e$l),e$d._curSubmit=e$id.RENDERBASE):(e$l=laya.webgl.submit.SubmitStencil.create(7),e$d.addRenderObject(e$l),e$d._submits[e$d._submits._length++]=e$t,e$l=laya.webgl.submit.SubmitStencil.create(8),e$d.addRenderObject(e$l))},e$o.create=function(e$d){var e$t=e$o._cache._length?e$o._cache[--e$o._cache._length]:new e$o;return 5==(e$t.step=e$d)&&++e$o._mask,e$t.level=e$o._mask,e$t},e$o._cache=((e$o._cache=[])._length=0,e$o._cache),e$o._mask=0,e$o}(),e$fd=function(){function e$B(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}e$J(e$B,"laya.webgl.submit.SubmitTarget");var e$d=e$B.prototype;return e$G.imps(e$d,{"laya.webgl.submit.ISubmit":!0}),e$d.renderSubmit=function(){this._vb.bind_upload(this._ib);var e$d=this.scope.getValue(this.proName);return e$d&&(this.shaderValue.texture=e$d.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[e$d.width,e$d.height]),this.shaderValue.upload(),this.blend(),e$S.drawCall++,e$S.trianglesFaces+=this._numEle/3,e$Hd.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},e$d.blend=function(){if(e$N.activeBlendFunction!==e$N.fns[this.blendType]){var e$d=e$Hd.mainContext;e$d.enable(3042),e$N.fns[this.blendType](e$d),e$N.activeBlendFunction=e$N.fns[this.blendType]}},e$d.getRenderType=function(){return 0},e$d.releaseRender=function(){var e$d=e$B._cache;(e$d[e$d._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},e$B.create=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$B._cache._length?e$B._cache[--e$B._cache._length]:new e$B;return e$A._ib=e$t,e$A._vb=e$l,e$A.proName=e$i,e$A._startIdx=e$k*e$wd.BYTES_PIDX,e$A._numEle=0,e$A.blendType=e$d._nBlendType,e$A.shaderValue=e$W,e$A.shaderValue.setValue(e$d._shader2D),e$A},e$B._cache=((e$B._cache=[])._length=0,e$B._cache),e$B}(),e$Jd=function(){function e$d(){this._sourceStr=null}e$J(e$d,"laya.webgl.text.CharSegment");var e$t=e$d.prototype;return e$G.imps(e$t,{"laya.webgl.text.ICharSegment":!0}),e$t.textToSpit=function(e$d){this._sourceStr=e$d},e$t.getChar=function(e$d){return this._sourceStr.charAt(e$d)},e$t.getCharCode=function(e$d){return this._sourceStr.charCodeAt(e$d)},e$t.length=function(){return this._sourceStr.length},e$d}(),e$cd=function(){var e$d;function e$S(){}return e$J(e$S,"laya.webgl.text.DrawText"),e$S.__init__=function(){e$S._charsTemp=new Array,e$S._drawValue=new e$d,e$S._charSeg=new e$Jd},e$S.customCharSeg=function(e$d){e$S._charSeg=e$d},e$S.getChar=function(e$d,e$t,e$l){var e$k=e$sd.createOneChar(e$d,e$l);return-1!=e$t&&(e$S._charsCache[e$t]=e$k),e$k},e$S._drawSlow=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f,e$J,e$c,e$Y){var e$w,e$D,e$z=e$S._drawValue.value(e$i,e$B,e$o,e$I,e$J,e$c,e$Y),e$e=0,e$g=0,e$H=e$S._charsTemp,e$R=0,e$G=NaN;if(e$k)for(e$H.length=e$k.length,e$e=0,e$g=e$k.length;e$e<e$g;e$e++)(e$D=e$k[e$e])&&(e$G=e$D.charNum+e$z.txtID,e$H[e$e]=e$w=e$S._charsCache[e$G]||e$S.getChar(e$D.char,e$G,e$z),e$w.active());else{var e$q=e$l instanceof laya.utils.WordText?e$l.toString():e$l;if(e$K.CharacterCache){e$S._charSeg.textToSpit(e$q);var e$L=e$S._charSeg.length();for(e$e=0,e$g=e$H.length=e$L;e$e<e$g;e$e++)e$G=e$S._charSeg.getCharCode(e$e)+e$z.txtID,e$H[e$e]=e$w=e$S._charsCache[e$G]||e$S.getChar(e$S._charSeg.getChar(e$e),e$G,e$z),e$w.active(),e$R+=e$w.cw}else e$H.length=0,(e$w=e$S.getChar(e$q,-1,e$z)).active(),e$R+=e$w.cw,e$H[0]=e$w}var e$$=0;null!==e$A&&"left"!==e$A&&(e$$=-("center"==e$A?e$R/2:e$R));var e$p,e$M,e$T=NaN,e$r=0;if(e$k)for(e$e=0,e$g=e$H.length;e$e<e$g;e$e++)e$w=e$H[e$e],e$D=e$k[e$e],e$w&&e$D&&!e$w.isSpace&&(e$T=e$w.borderSize,e$p=e$w.texture,e$t._drawText(e$p,e$b+e$$+e$D.x*e$J-e$T,e$f+e$D.y*e$c-e$T,e$p.width,e$p.height,e$W,0,0,0,0));else{for(e$e=0,e$g=e$H.length;e$e<e$g;e$e++)(e$w=e$H[e$e])&&!e$w.isSpace&&(e$T=e$w.borderSize,e$p=e$w.texture,e$t._drawText(e$p,e$b+e$$-e$T,e$f-e$T,e$p.width,e$p.height,e$W,0,0,0,0),e$d&&((e$M=e$d[e$r++])||(e$M=e$d[e$r-1]=[]),e$M[0]=e$p,e$M[1]=e$$-e$T,e$M[2]=-e$T)),e$$+=e$w.cw;e$d&&(e$d.length=e$r)}},e$S._drawFast=function(e$d,e$t,e$l,e$k,e$W){for(var e$i,e$A,e$B=0,e$o=e$d.length;e$B<e$o;e$B++)(e$i=(e$A=e$d[e$B])[0]).active(),e$t._drawText(e$i,e$k+e$A[1],e$W+e$A[2],e$i.width,e$i.height,e$l,0,0,0,0)},e$S.drawText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f){if(void 0===e$f&&(e$f=0),!(e$t&&0===e$t.length||e$l&&0===e$l.length)){var e$J=e$k.a,e$c=e$k.d;(0!==e$k.b||0!==e$k.c)&&(e$J=e$c=1);var e$Y=1!==e$J||1!==e$c;if(e$Y&&e$G.stage.transform){var e$w=e$G.stage.transform;e$Y=e$w.a===e$J&&e$w.d===e$c}else e$Y=!1;if(e$Y){var e$D=(e$k=e$k.copyTo(e$qd._tmpMatrix)).tx,e$z=e$k.ty;e$k.scale(1/e$J,1/e$c),e$k._checkTransform(),e$I*=e$J,e$b*=e$c,e$I+=e$D-e$k.tx,e$b+=e$z-e$k.ty}else e$J=e$c=1;if(e$l)e$S._drawSlow(null,e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$J,e$c,e$f);else{if(null===e$t.toUpperCase){var e$e=e$J+1e5*e$c,e$g=e$t;return void(e$g.changed||e$g.id!==e$e?(e$g.id=e$e,e$g.changed=!1,e$S._drawSlow(e$g.save,e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$J,e$c,e$f)):e$S._drawFast(e$g.save,e$d,e$k,e$I,e$b))}var e$H=e$t+e$W.toString()+e$A+e$B+e$o+e$J+e$c+e$i,e$R=e$S._textsCache[e$H];e$K.CharacterCache?e$R?e$S._drawFast(e$R,e$d,e$k,e$I,e$b):(e$S._textsCache.__length||(e$S._textsCache.__length=0),e$S._textsCache.__length>e$q.WebGLTextCacheCount&&((e$S._textsCache={}).__length=0,e$S._curPoolIndex=0),e$S._textCachesPool[e$S._curPoolIndex]?(e$R=e$S._textsCache[e$H]=e$S._textCachesPool[e$S._curPoolIndex]).length=0:e$S._textCachesPool[e$S._curPoolIndex]=e$R=e$S._textsCache[e$H]=[],e$S._textsCache.__length++,e$S._curPoolIndex++,e$S._drawSlow(e$R,e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$J,e$c,e$f)):e$S._drawSlow(e$R,e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$J,e$c,e$f)}}},e$S._charsTemp=null,e$S._textCachesPool=[],e$S._curPoolIndex=0,e$S._charsCache={},e$S._textsCache={},e$S._drawValue=null,e$S.d=[],e$S._charSeg=null,e$S.__init$=function(){e$d=function(){function e$o(){}return e$J(e$o,""),e$o.prototype.value=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this.font=e$d,this.fillColor=e$t,this.borderColor=e$l,this.lineWidth=e$k,this.scaleX=e$W,this.scaleY=e$i,this.underLine=e$A;var e$B=e$d.toString()+e$W+e$i+e$k+(e$t?e$t.toLowerCase():" ")+(e$l?e$l.toLowerCase():" ")+e$A;return this.txtID=e$o._keymap[e$B],this.txtID||(this.txtID=1e-7*++e$o._keymapCount,e$o._keymap[e$B]=this.txtID),this},e$o.clear=function(){e$o._keymap={},e$o._keymapCount=1},e$o._keymap={},e$o._keymapCount=1,e$o}()},e$S}(),e$Yd=function(){function e$W(e$d){this._index=0,this._size=14,this._italic=-2,e$W._cache2=e$W._cache2||[],this.setFont(e$d||"14px Arial")}e$J(e$W,"laya.webgl.text.FontInContext");var e$d=e$W.prototype;return e$d.setFont=function(e$d){var e$t=e$W._cache2[e$d];if(e$t)this._words=e$t[0],this._size=e$t[1];else{this._words=e$d.split(" ");for(var e$l=0,e$k=this._words.length;e$l<e$k;e$l++)if(0<this._words[e$l].indexOf("px")){this._index=e$l;break}this._size=parseInt(this._words[this._index]),e$W._cache2[e$d]=[this._words,this._size]}this._text=null,this._italic=-2},e$d.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},e$d.hasType=function(e$d){for(var e$t=0,e$l=this._words.length;e$t<e$l;e$t++)if(this._words[e$t]===e$d)return e$t;return-1},e$d.removeType=function(e$d){for(var e$t=0,e$l=this._words.length;e$t<e$l;e$t++)if(this._words[e$t]===e$d){this._words.splice(e$t,1),this._index>e$t&&this._index--;break}this._text=null,this._italic=-2},e$d.copyTo=function(e$d){return e$d._text=this._text,e$d._size=this._size,e$d._index=this._index,e$d._words=this._words.slice(),e$d._italic=-2,e$d},e$d.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},e$k(0,e$d,"size",function(){return this._size},function(e$d){this._size=e$d,this._words[this._index]=e$d+"px",this._text=null}),e$W.create=function(e$d){var e$t=e$W._cache[e$d];return e$t||(e$t=e$W._cache[e$d]=new e$W(e$d))},e$W.EMPTY=new e$W,e$W._cache={},e$W._cache2=null,e$W}(),e$wd=function(){function e$d(){}return e$J(e$d,"laya.webgl.utils.CONST3D2D"),e$d.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$d.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],e$d.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],e$d._TMPARRAY=[],e$d._OFFSETX=0,e$d._OFFSETY=0,e$A(e$d,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),e$d}(),e$Dd=function(){function e$Y(){}return e$J(e$Y,"laya.webgl.utils.GlUtils"),e$Y.make2DProjection=function(e$d,e$t,e$l){return[2/e$d,0,0,0,0,-2/e$t,0,0,0,0,2/e$l,0,-1,1,0,1]},e$Y.fillIBQuadrangle=function(e$d,e$t){if(65535/4<e$t)throw Error("IBQuadrangle count:"+e$t+" must<:"+Math.floor(65535/4));e$t=Math.floor(e$t),e$d._resizeBuffer(6*(e$t+1)*2,!1),e$d.byteLength=e$d.bufferLength;for(var e$l=e$d.getUint16Array(),e$k=0,e$W=0;e$W<e$t;e$W++)e$l[e$k++]=4*e$W,e$l[e$k++]=4*e$W+2,e$l[e$k++]=4*e$W+1,e$l[e$k++]=4*e$W,e$l[e$k++]=4*e$W+3,e$l[e$k++]=4*e$W+2;return e$d.setNeedUpload(),!0},e$Y.expandIBQuadrangle=function(e$d,e$t){e$d.bufferLength>=6*e$t*2||e$Y.fillIBQuadrangle(e$d,e$t)},e$Y.mathCeilPowerOfTwo=function(e$d){return e$d--,e$d|=e$d>>1,e$d|=e$d>>2,e$d|=e$d>>4,e$d|=e$d>>8,e$d|=e$d>>16,++e$d},e$Y.fillQuadrangleImgVb=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){var e$o=16+(e$d._byteLength>>2);e$d.byteLength=e$o<<2;var e$I=e$d.getFloat32Array();e$I[(e$o-=16)+2]=e$W[0],e$I[e$o+3]=e$W[1],e$I[e$o+6]=e$W[2],e$I[e$o+7]=e$W[3],e$I[e$o+10]=e$W[4],e$I[e$o+11]=e$W[5],e$I[e$o+14]=e$W[6],e$I[e$o+15]=e$W[7];var e$b=e$i.a,e$f=e$i.b,e$J=e$i.c,e$c=e$i.d;if(1!==e$b||0!==e$f||0!==e$J||1!==e$c){e$i.bTransform=!0;var e$Y=e$i.tx+e$A,e$w=e$i.ty+e$B;e$I[e$o]=(e$k[0]+e$t)*e$b+(e$k[1]+e$l)*e$J+e$Y,e$I[e$o+1]=(e$k[0]+e$t)*e$f+(e$k[1]+e$l)*e$c+e$w,e$I[e$o+4]=(e$k[2]+e$t)*e$b+(e$k[3]+e$l)*e$J+e$Y,e$I[e$o+5]=(e$k[2]+e$t)*e$f+(e$k[3]+e$l)*e$c+e$w,e$I[e$o+8]=(e$k[4]+e$t)*e$b+(e$k[5]+e$l)*e$J+e$Y,e$I[e$o+9]=(e$k[4]+e$t)*e$f+(e$k[5]+e$l)*e$c+e$w,e$I[e$o+12]=(e$k[6]+e$t)*e$b+(e$k[7]+e$l)*e$J+e$Y,e$I[e$o+13]=(e$k[6]+e$t)*e$f+(e$k[7]+e$l)*e$c+e$w}else e$i.bTransform=!1,e$t+=e$i.tx+e$A,e$l+=e$i.ty+e$B,e$I[e$o]=e$t+e$k[0],e$I[e$o+1]=e$l+e$k[1],e$I[e$o+4]=e$t+e$k[2],e$I[e$o+5]=e$l+e$k[3],e$I[e$o+8]=e$t+e$k[4],e$I[e$o+9]=e$l+e$k[5],e$I[e$o+12]=e$t+e$k[6],e$I[e$o+13]=e$l+e$k[7];return e$d._upload=!0},e$Y.fillTranglesVB=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){var e$B=(e$d._byteLength>>2)+e$k.length;e$d.byteLength=e$B<<2;var e$o=e$d.getFloat32Array();e$B-=e$k.length;for(var e$I=e$k.length,e$b=e$W.a,e$f=e$W.b,e$J=e$W.c,e$c=e$W.d,e$Y=0;e$Y<e$I;e$Y+=4)if(e$o[e$B+e$Y+2]=e$k[e$Y+2],e$o[e$B+e$Y+3]=e$k[e$Y+3],1!==e$b||0!==e$f||0!==e$J||1!==e$c){e$W.bTransform=!0;var e$w=e$W.tx+e$i,e$D=e$W.ty+e$A;e$o[e$B+e$Y]=(e$k[e$Y]+e$t)*e$b+(e$k[e$Y+1]+e$l)*e$J+e$w,e$o[e$B+e$Y+1]=(e$k[e$Y]+e$t)*e$f+(e$k[e$Y+1]+e$l)*e$c+e$D}else e$W.bTransform=!1,e$t+=e$W.tx+e$i,e$l+=e$W.ty+e$A,e$o[e$B+e$Y]=e$t+e$k[e$Y],e$o[e$B+e$Y+1]=e$l+e$k[e$Y+1];return e$d._upload=!0},e$Y.copyPreImgVb=function(e$d,e$t,e$l){var e$k=e$d._byteLength>>2;e$d.byteLength=e$k+16<<2;for(var e$W=e$d.getFloat32Array(),e$i=0,e$A=e$k-16;e$i<4;e$i++)e$W[e$k]=e$W[e$A]+e$t,++e$A,e$W[++e$k]=e$W[e$A]+e$l,++e$A,e$W[++e$k]=e$W[e$A],++e$A,e$W[++e$k]=e$W[e$A],++e$k,++e$A;e$d._upload=!0},e$Y.fillRectImgVb=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f,e$J){void 0===e$J&&(e$J=!1);var e$c,e$Y,e$w,e$D,e$z,e$e,e$g,e$H,e$R,e$G,e$q,e$L,e$$,e$p,e$M,e$T,e$r=1,e$S=e$B.a,e$j=e$B.b,e$C=e$B.c,e$K=e$B.d,e$x=e$t&&e$t.width<99999999;if(1!==e$S||0!==e$j||0!==e$C||1!==e$K?(e$B.bTransform=!0,0===e$j&&0===e$C&&(e$r=23,e$R=e$W+e$l,e$G=e$i+e$k,e$c=e$S*e$l+(e$q=e$B.tx+e$o),e$w=e$S*e$R+e$q,e$Y=e$K*e$k+(e$L=e$B.ty+e$I),e$D=e$K*e$G+e$L)):(e$r=23,e$B.bTransform=!1,e$w=(e$c=e$l+e$B.tx+e$o)+e$W,e$D=(e$Y=e$k+e$B.ty+e$I)+e$i),e$x&&(e$z=e$t.x,e$e=e$t.y,e$g=e$t.width+e$z,e$H=e$t.height+e$e),1!==e$r){if(Math.min(e$c,e$w)>=e$g)return!1;if(Math.min(e$Y,e$D)>=e$H)return!1;if(Math.max(e$w,e$c)<=e$z)return!1;if(Math.max(e$D,e$Y)<=e$e)return!1}var e$n=e$d._byteLength>>2;e$d.byteLength=16+e$n<<2;var e$Q=e$d.getFloat32Array();switch(e$Q[2+e$n]=e$A[0],e$Q[3+e$n]=e$A[1],e$Q[6+e$n]=e$A[2],e$Q[7+e$n]=e$A[3],e$Q[10+e$n]=e$A[4],e$Q[11+e$n]=e$A[5],e$Q[14+e$n]=e$A[6],e$Q[15+e$n]=e$A[7],e$r){case 1:e$q=e$B.tx+e$o,e$L=e$B.ty+e$I;var e$y=e$S*e$l,e$V=e$C*e$k,e$Z=e$K*e$k,e$U=e$j*e$l,e$E=e$S*(e$R=e$W+e$l),e$N=e$C*(e$G=e$i+e$k),e$u=e$K*e$G,e$h=e$j*e$R;e$J?(e$$=e$y+e$V+e$q,e$M=Math.round(e$$)-e$$,e$p=e$Z+e$U+e$L,e$T=Math.round(e$p)-e$p,e$Q[e$n]=e$$+e$M,e$Q[1+e$n]=e$p+e$T,e$Q[4+e$n]=e$E+e$V+e$q+e$M,e$Q[5+e$n]=e$Z+e$h+e$L+e$T,e$Q[8+e$n]=e$E+e$N+e$q+e$M,e$Q[9+e$n]=e$u+e$h+e$L+e$T,e$Q[12+e$n]=e$y+e$N+e$q+e$M,e$Q[13+e$n]=e$u+e$U+e$L+e$T):(e$Q[e$n]=e$y+e$V+e$q,e$Q[1+e$n]=e$Z+e$U+e$L,e$Q[4+e$n]=e$E+e$V+e$q,e$Q[5+e$n]=e$Z+e$h+e$L,e$Q[8+e$n]=e$E+e$N+e$q,e$Q[9+e$n]=e$u+e$h+e$L,e$Q[12+e$n]=e$y+e$N+e$q,e$Q[13+e$n]=e$u+e$U+e$L);break;case 23:e$J?(e$$=e$c+e$b,e$M=Math.round(e$$)-e$$,e$p=e$Y,e$T=Math.round(e$p)-e$p,e$Q[e$n]=e$$+e$M,e$Q[1+e$n]=e$p+e$T,e$Q[4+e$n]=e$w+e$b+e$M,e$Q[5+e$n]=e$Y+e$T,e$Q[8+e$n]=e$w+e$M,e$Q[9+e$n]=e$D+e$T,e$Q[12+e$n]=e$c+e$M,e$Q[13+e$n]=e$D+e$T):(e$Q[e$n]=e$c+e$b,e$Q[1+e$n]=e$Y,e$Q[4+e$n]=e$w+e$b,e$Q[5+e$n]=e$Y,e$Q[8+e$n]=e$w,e$Q[9+e$n]=e$D,e$Q[12+e$n]=e$c,e$Q[13+e$n]=e$D)}return e$d._upload=!0},e$Y.fillLineVb=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){var e$o=.5*e$A,e$I=e$Y._fillLineArray,e$b=-(e$k-e$i),e$f=e$l-e$W,e$J=Math.sqrt(e$b*e$b+e$f*e$f);e$b/=e$J,e$f/=e$J,e$b*=e$o,e$f*=e$o,e$I[0]=e$l-e$b,e$I[1]=e$k-e$f,e$I[4]=e$l+e$b,e$I[5]=e$k+e$f,e$I[8]=e$W+e$b,e$I[9]=e$i+e$f,e$I[12]=e$W-e$b,e$I[13]=e$i-e$f,e$B&&e$B.transformPointArray(e$I,e$I);var e$c=16+(e$d._byteLength>>2);return e$d.byteLength=e$c<<2,e$d.insertData(e$I,e$c-16),!0},e$Y._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e$Y}(),e$zd=(function(){function e$o(){}e$J(e$o,"laya.webgl.utils.MatirxArray"),e$o.ArrayMul=function(e$d,e$t,e$l){if(e$d)if(e$t)for(var e$k=NaN,e$W=NaN,e$i=NaN,e$A=NaN,e$B=0;e$B<4;e$B++)e$k=e$d[e$B],e$W=e$d[e$B+4],e$i=e$d[e$B+8],e$A=e$d[e$B+12],e$l[e$B]=e$k*e$t[0]+e$W*e$t[1]+e$i*e$t[2]+e$A*e$t[3],e$l[e$B+4]=e$k*e$t[4]+e$W*e$t[5]+e$i*e$t[6]+e$A*e$t[7],e$l[e$B+8]=e$k*e$t[8]+e$W*e$t[9]+e$i*e$t[10]+e$A*e$t[11],e$l[e$B+12]=e$k*e$t[12]+e$W*e$t[13]+e$i*e$t[14]+e$A*e$t[15];else e$o.copyArray(e$d,e$l);else e$o.copyArray(e$t,e$l)},e$o.copyArray=function(e$d,e$t){if(e$d&&e$t)for(var e$l=0;e$l<e$d.length;e$l++)e$t[e$l]=e$d[e$l]}}(),function(){function e$t(e$d,e$t,e$l){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=e$d,this._vb=new e$vd(e$d,35048),e$t&&this._vb._resizeBuffer(e$t,!1),this._ib=new e$_d,e$l&&this._ib._resizeBuffer(e$l,!1)}e$J(e$t,"laya.webgl.utils.Mesh2D");var e$d=e$t.prototype;return e$d.cloneWithNewVB=function(){var e$d=new e$t(this._stride,0,0);return e$d._ib=this._ib,e$d._quadNum=this._quadNum,e$d._attribInfo=this._attribInfo,e$d},e$d.cloneWithNewVBIB=function(){var e$d=new e$t(this._stride,0,0);return e$d._attribInfo=this._attribInfo,e$d},e$d.getVBW=function(){return this._vb.setNeedUpload(),this._vb},e$d.getVBR=function(){return this._vb},e$d.getIBR=function(){return this._ib},e$d.getIBW=function(){return this._ib.setNeedUpload(),this._ib},e$d.createQuadIB=function(e$d){this._quadNum=e$d,this._ib._resizeBuffer(6*e$d*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var e$t=this._ib.getUint16Array(),e$l=0,e$k=0,e$W=0;e$W<e$d;e$W++)e$t[e$l++]=e$k,e$t[e$l++]=e$k+2,e$t[e$l++]=e$k+1,e$t[e$l++]=e$k,e$t[e$l++]=e$k+3,e$t[e$l++]=e$k+2,e$k+=4;this._ib.setNeedUpload()},e$d.setAttributes=function(e$d){if(this._attribInfo=e$d,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},e$d.getEleNum=function(){return this._ib.getBuffer().byteLength/2},e$d.releaseMesh=function(){},e$d.destroy=function(){},e$d.clearVB=function(){this._vb.clear()},e$t._gvaoid=0,e$t}()),e$ed=function(){function e$W(){}return e$J(e$W,"laya.webgl.utils.RenderState2D"),e$W.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},e$W.mat2MatArray=function(e$d,e$t){var e$l=e$d,e$k=e$t;return e$k[0]=e$l.a,e$k[1]=e$l.b,e$k[2]=e$W.EMPTYMAT4_ARRAY[2],e$k[3]=e$W.EMPTYMAT4_ARRAY[3],e$k[4]=e$l.c,e$k[5]=e$l.d,e$k[6]=e$W.EMPTYMAT4_ARRAY[6],e$k[7]=e$W.EMPTYMAT4_ARRAY[7],e$k[8]=e$W.EMPTYMAT4_ARRAY[8],e$k[9]=e$W.EMPTYMAT4_ARRAY[9],e$k[10]=e$W.EMPTYMAT4_ARRAY[10],e$k[11]=e$W.EMPTYMAT4_ARRAY[11],e$k[12]=e$l.tx,e$k[13]=e$l.ty,e$k[14]=e$W.EMPTYMAT4_ARRAY[14],e$k[15]=e$W.EMPTYMAT4_ARRAY[15],e$t},e$W.restoreTempArray=function(){e$W.TEMPMAT4_ARRAY[0]=1,e$W.TEMPMAT4_ARRAY[1]=0,e$W.TEMPMAT4_ARRAY[4]=0,e$W.TEMPMAT4_ARRAY[5]=1,e$W.TEMPMAT4_ARRAY[12]=0,e$W.TEMPMAT4_ARRAY[13]=0},e$W.clear=function(){e$W.worldScissorTest=!1,e$W.worldShaderDefines=null,e$W.worldFilters=null,e$W.worldAlpha=1,e$W.worldClipRect.x=e$W.worldClipRect.y=0,e$W.worldClipRect.width=e$W.width,e$W.worldClipRect.height=e$W.height,e$W.curRenderTarget=null},e$W._MAXSIZE=99999999,e$W.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$W.worldMatrix4=e$W.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$W.worldAlpha=1,e$W.worldScissorTest=!1,e$W.worldFilters=null,e$W.worldShaderDefines=null,e$W.curRenderTarget=null,e$W.width=0,e$W.height=0,e$A(e$W,["worldMatrix",function(){return this.worldMatrix=new e$$},"worldClipRect",function(){return this.worldClipRect=new e$M(0,0,99999999,99999999)}]),e$W}(),e$gd=function(){var e$e,e$l;function e$g(e$d,e$t,e$l,e$k,e$W){var e$i=this;function e$A(e$d){var e$t=[],e$l=new e$e(e$t);return e$i._compileToTree(e$l,e$d.split("\n"),0,e$t,e$W),e$l}var e$B=e$c.now();this._VS=e$A(e$t),this._PS=e$A(e$l),this._nameMap=e$k,2<e$c.now()-e$B&&console.log("ShaderCompile use time:"+(e$c.now()-e$B)+"  size:"+e$t.length+"/"+e$l.length)}e$J(e$g,"laya.webgl.utils.ShaderCompile");var e$d=e$g.prototype;return e$d._compileToTree=function(e$d,e$t,e$l,e$k,e$W){var e$i,e$A,e$B,e$o,e$I,e$b,e$f,e$J=0,e$c=0,e$Y=0,e$w=0;for(e$c=e$l;e$c<e$t.length;e$c++)if(!((e$B=e$t[e$c]).length<1)&&0!==(e$J=e$B.indexOf("//"))){if(0<=e$J&&(e$B=e$B.substr(0,e$J)),e$i=e$f||new e$e(e$k),e$f=null,e$i.text=e$B,e$i.noCompile=!0,0<=(e$J=e$B.indexOf("#"))){for(e$o="#",e$w=e$J+1,e$Y=e$B.length;e$w<e$Y;e$w++){var e$D=e$B.charAt(e$w);if(" "===e$D||"\t"===e$D||"\r"===e$D||"\n"===e$D||"?"===e$D)break;e$o+=e$D}switch(e$i.name=e$o){case"#ifdef":case"#ifndef":if(e$i.src=e$B,e$i.noCompile=null!=e$B.match(/[!&|()=<>]/),e$i.noCompile?console.log("function():Boolean{return "+e$B.substr(e$J+e$i.name.length)+"}"):(e$b=e$B.replace(/^\s*/,"").split(/\s+/),e$i.setCondition(e$b[1],"#ifdef"===e$o?1:2),e$i.text="//"+e$i.text),e$i.setParent(e$d),e$d=e$i,e$W)for(e$b=e$B.substr(e$w).split(e$g._splitToWordExps3),e$w=0;e$w<e$b.length;e$w++)(e$B=e$b[e$w]).length&&(e$W[e$B]=!0);continue;case"#if":if(e$i.src=e$B,e$i.noCompile=!0,e$i.setParent(e$d),e$d=e$i,e$W)for(e$b=e$B.substr(e$w).split(e$g._splitToWordExps3),e$w=0;e$w<e$b.length;e$w++)(e$B=e$b[e$w]).length&&"defined"!=e$B&&(e$W[e$B]=!0);continue;case"#else":e$i.src=e$B,e$A=(e$d=e$d.parent).childs[e$d.childs.length-1],e$i.noCompile=e$A.noCompile,e$i.noCompile||(e$i.condition=e$A.condition,e$i.conditionType=1==e$A.conditionType?2:1,e$i.text="//"+e$i.text+" "+e$A.text+" "+e$i.conditionType),e$i.setParent(e$d),e$d=e$i;continue;case"#endif":e$A=(e$d=e$d.parent).childs[e$d.childs.length-1],e$i.noCompile=e$A.noCompile,e$i.noCompile||(e$i.text="//"+e$i.text),e$i.setParent(e$d);continue;case"#include":e$b=e$g.splitToWords(e$B,null);var e$z=e$g.includes[e$b[1]];if(!e$z)throw"ShaderCompile error no this include file:"+e$b[1];if((e$J=e$b[0].indexOf("?"))<0){e$i.setParent(e$d),e$B=e$z.getWith("with"==e$b[2]?e$b[3]:null),this._compileToTree(e$i,e$B.split("\n"),0,e$k,e$W),e$i.text="";continue}e$i.setCondition(e$b[0].substr(e$J+1),1),e$i.text=e$z.getWith("with"==e$b[2]?e$b[3]:null);break;case"#import":e$I=(e$b=e$g.splitToWords(e$B,null))[1],e$k.push({node:e$i,file:e$g.includes[e$I],ofs:e$i.text.length});continue}}else{if((e$A=e$d.childs[e$d.childs.length-1])&&!e$A.name){0<e$k.length&&e$g.splitToWords(e$B,e$A),e$f=e$i,e$A.text+="\n"+e$B;continue}0<e$k.length&&e$g.splitToWords(e$B,e$i)}e$i.setParent(e$d)}},e$d.createShader=function(e$d,e$t,e$l){var e$k={},e$W="";if(e$d)for(var e$i in e$d)e$W+="#define "+e$i+"\n",e$k[e$i]=!0;var e$A=this._VS.toscript(e$k,[]),e$B=this._PS.toscript(e$k,[]);return(e$l||e$md.create)(e$W+e$A.join("\n"),e$W+e$B.join("\n"),e$t,this._nameMap)},e$g._parseOne=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A={type:e$g.shaderParamsMap[e$l[e$k+1]],name:e$l[e$k+2],size:isNaN(parseInt(e$l[e$k+3]))?1:parseInt(e$l[e$k+3])};return e$i&&("attribute"==e$W?e$d.push(e$A):e$t.push(e$A)),":"==e$l[e$k+3]&&(e$A.type=e$l[e$k+4],e$k+=2),e$k+=2},e$g.addInclude=function(e$d,e$t){if(!e$t||0===e$t.length)throw new Error("add shader include file err:"+e$d);if(e$g.includes[e$d])throw new Error("add shader include file err, has add:"+e$d);e$g.includes[e$d]=new e$l(e$t)},e$g.preGetParams=function(e$d,e$t){var e$l=[e$d,e$t],e$k={},e$W=[],e$i=[],e$A={},e$B=[];e$k.attributes=e$W,e$k.uniforms=e$i,e$k.defines=e$A;for(var e$o=0,e$I=0,e$b=0;e$b<2;e$b++){e$l[e$b]=e$l[e$b].replace(e$g._removeAnnotation,"");var e$f,e$J=e$l[e$b].match(e$g._reg);for(e$o=0,e$I=e$J.length;e$o<e$I;e$o++){var e$c=e$J[e$o];if("attribute"==e$c||"uniform"==e$c)e$o=e$g._parseOne(e$W,e$i,e$J,e$o,e$c,!0);else{if("#define"==e$c){e$B[e$c=e$J[++e$o]]=1;continue}if("#ifdef"==e$c){e$A[e$f=e$J[++e$o]]=e$A[e$f]||[];for(e$o++;e$o<e$I;e$o++)if("attribute"==(e$c=e$J[e$o])||"uniform"==e$c)e$o=e$g._parseOne(e$W,e$i,e$J,e$o,e$c,e$B[e$f]);else if("#else"==e$c)for(e$o++;e$o<e$I;e$o++)if("attribute"==(e$c=e$J[e$o])||"uniform"==e$c)e$o=e$g._parseOne(e$W,e$i,e$J,e$o,e$c,!e$B[e$f]);else if("#endif"==e$c)break}}}}return e$k},e$g.splitToWords=function(e$d,e$t){for(var e$l,e$k,e$W=[],e$i=-1,e$A=0,e$B=e$d.length;e$A<e$B;e$A++)if(e$l=e$d.charAt(e$A),0<=" \t=+-*/&%!<>()'\",;".indexOf(e$l)){if(0<=e$i&&1<e$A-e$i&&(e$k=e$d.substr(e$i,e$A-e$i),e$W.push(e$k)),'"'==e$l||"'"==e$l){var e$o=e$d.indexOf(e$l,e$A+1);if(e$o<0)throw"Sharder err:"+e$d;e$W.push(e$d.substr(e$A+1,e$o-e$A-1)),e$A=e$o,e$i=-1;continue}"("==e$l&&e$t&&0<e$W.length&&(e$k=e$W[e$W.length-1]+";","vec4;main;".indexOf(e$k)<0&&(e$t.useFuns+=e$k)),e$i=-1}else e$i<0&&(e$i=e$A);return e$i<e$B&&1<e$B-e$i&&(e$k=e$d.substr(e$i,e$B-e$i),e$W.push(e$k)),e$W},e$g.IFDEF_NO=0,e$g.IFDEF_YES=1,e$g.IFDEF_ELSE=2,e$g.IFDEF_PARENT=3,e$g._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),e$g._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),e$g._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),e$g.includes={},e$A(e$g,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),e$g.__init$=function(){e$e=function(){function e$l(e$d){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=e$d}e$J(e$l,"");var e$d=e$l.prototype;return e$d.setParent=function(e$d){e$d.childs.push(this),this.z=e$d.z+1,this.parent=e$d},e$d.setCondition=function(e$d,e$t){e$d&&(this.conditionType=e$t,e$d=e$d.replace(/(\s*$)/g,""),this.condition=function(){return this[e$d]},this.condition.__condition=e$d)},e$d.toscript=function(e$d,e$t){return this._toscript(e$d,e$t,++e$l.__id)},e$d._toscript=function(e$k,e$W,e$i){if(this.childs.length<1&&!this.text)return e$W;e$W.length;if(this.condition){var e$d=!!this.condition.call(e$k);if(2===this.conditionType&&(e$d=!e$d),!e$d)return e$W}if(this.text&&e$W.push(this.text),0<this.childs.length&&this.childs.forEach(function(e$d,e$t,e$l){e$d._toscript(e$k,e$W,e$i)}),0<this.includefiles.length&&0<this.useFuns.length)for(var e$t,e$l=0,e$A=this.includefiles.length;e$l<e$A;e$l++)this.includefiles[e$l].curUseID!=e$i&&0<(e$t=this.includefiles[e$l].file.getFunsScript(this.useFuns)).length&&(this.includefiles[e$l].curUseID=e$i,e$W[0]=e$t+e$W[0]);return e$W},e$l.__id=1,e$l}(),e$l=function(){function e$d(e$d){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=e$d;for(var e$t=0,e$l=0,e$k=0;!((e$t=e$d.indexOf("#begin",e$t))<0);){for(e$k=e$t+5;!((e$k=e$d.indexOf("#end",e$k))<0)&&"i"===e$d.charAt(e$k+4);)e$k+=5;if(e$k<0)throw"add include err,no #end:"+e$d;e$l=e$d.indexOf("\n",e$t);var e$W=e$g.splitToWords(e$d.substr(e$t,e$l-e$t),null);"code"==e$W[1]?this.codes[e$W[2]]=e$d.substr(e$l+1,e$k-e$l-1):"function"==e$W[1]&&(e$l=e$d.indexOf("function",e$t),e$l+="function".length,this.funs[e$W[3]]=e$d.substr(e$l+1,e$k-e$l-1),this.funnames+=e$W[3]+";"),e$t=e$k+1}}e$J(e$d,"");var e$t=e$d.prototype;return e$t.getWith=function(e$d){var e$t=e$d?this.codes[e$d]:this.script;if(!e$t)throw"get with error:"+e$d;return e$t},e$t.getFunsScript=function(e$d){var e$t="";for(var e$l in this.funs)0<=e$d.indexOf(e$l+";")&&(e$t+=this.funs[e$l]);return e$t},e$d}()},e$g}(),e$Hd=function(){function e$A(){}return e$J(e$A,"laya.webgl.WebGL"),e$A._uint8ArraySlice=function(){for(var e$d=this.length,e$t=new Uint8Array(this.length),e$l=0;e$l<e$d;e$l++)e$t[e$l]=this[e$l];return e$t},e$A._float32ArraySlice=function(){for(var e$d=this.length,e$t=new Float32Array(this.length),e$l=0;e$l<e$d;e$l++)e$t[e$l]=this[e$l];return e$t},e$A._uint16ArraySlice=function(e$d){var e$t,e$l=arguments,e$k=0,e$W=0;if(0===e$l.length)for(e$k=this.length,e$t=new Uint16Array(e$k),e$W=0;e$W<e$k;e$W++)e$t[e$W]=this[e$W];else if(2===e$l.length){var e$i=e$l[0],e$A=e$l[1];if(e$i<e$A)for(e$k=e$A-e$i,e$t=new Uint16Array(e$k),e$W=e$i;e$W<e$A;e$W++)e$t[e$W-e$i]=this[e$W];else e$t=new Uint16Array(0)}return e$t},e$A.expandContext=function(){var e$d=e$W.prototype,e$t=CanvasRenderingContext2D.prototype;e$t.fillTrangles=e$d.fillTrangles,e$Od.__int__(null),e$t.setIBVB=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){void 0===e$o&&(e$o=0),void 0===e$I&&(e$I=0),null===e$l&&(this._ib=this._ib||e$_d.QuadrangleIB,e$l=this._ib,e$Dd.expandIBQuadrangle(e$l,e$k._byteLength/64+8)),this._setIBVB(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I)},e$t.fillTrangles=function(e$d,e$t,e$l,e$k,e$W){this._curMat=this._curMat||e$$.create(),this._vb=this._vb||e$vd.create(),this._ib||(this._ib=e$_d.create(),e$Dd.fillIBQuadrangle(this._ib,e$A/4));var e$i=this._vb,e$A=e$k.length>>4;e$Dd.fillTranglesVB(e$i,e$t,e$l,e$k,e$W||this._curMat,0,0),e$Dd.expandIBQuadrangle(this._ib,e$i._byteLength/64+8);var e$B=new e$Ld(1,0);e$B.textureHost=e$d;var e$o=new e$ad("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");e$i._vertType=3,this._setIBVB(e$t,e$l,this._ib,e$i,6*e$A,e$W,e$o,e$B,0,0)}},e$A.enable=function(){if(e$c.__init__(),e$z.isConchApp&&!e$z.isConchWebGL)return e$R.skinAniSprite=function(){return new e$dd},e$A.expandContext(),!1;if(e$R.getWebGLContext=function(e$d){for(var e$t,e$l=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e$k=0;e$k<e$l.length;e$k++){try{e$t=e$d.getContext(e$l[e$k],{stencil:e$q.isStencil,alpha:e$q.isAlpha,antialias:e$q.isAntialias,premultipliedAlpha:e$q.premultipliedAlpha,preserveDrawingBuffer:e$q.preserveDrawingBuffer})}catch(e$d){}if(e$t)return e$t}return null},null==(e$A.mainContext=e$A.mainContext||e$R.getWebGLContext(e$z._mainCanvas)))return!1;if(e$z.isWebGL)return!0;e$w.create=function(e$d,e$t){return new e$dt(e$d,e$t)},e$D.create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){return new e$Xd(e$d,e$t,e$l,e$k,e$W,e$i,e$A)},e$z.WebGL=e$A,e$z.isWebGL=!0,e$cd.__init__(),e$R.createRenderSprite=function(e$d,e$t){return new e$$d(e$d,e$t)},e$R.createWebGLContext2D=function(e$d){return new e$qd(e$d)},e$R.changeWebGLSize=function(e$d,e$t){laya.webgl.WebGL.onStageResize(e$d,e$t)},e$R.createGraphics=function(){return new e$Gd};var e$d=e$R.createFilterAction;return e$R.createFilterAction=e$d||function(e$d){return new e$pd},e$R.clear=function(e$d){e$ed.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var e$t=e$z.context.ctx,e$l=0==e$t._submits._length||e$q.preserveDrawingBuffer?e$Y.create(e$d)._color:e$r._wgColor;e$l&&e$t.clearBG(e$l[0],e$l[1],e$l[2],e$l[3]),e$ed.clear()},e$R.addToAtlas=function(e$d,e$t){void 0===e$t&&(e$t=!1);var e$l=e$d.bitmap;e$z.optimizeTextureMemory(e$d.url,e$d)?e$G.__typeof(e$l,"laya.webgl.resource.IMergeAtlasBitmap")&&e$l.allowMerageInAtlas&&e$l.on("recovered",e$d,e$d.addTextureToAtlas):e$l.enableMerageInAtlas=!1},e$R.isAtlas=function(e$d){return e$d instanceof laya.webgl.atlas.AtlasWebGLCanvas},e$U._enable(),e$R.beginFlush=function(){for(var e$d=e$U.instance,e$t=e$d.getAtlaserCount(),e$l=0;e$l<e$t;e$l++){var e$k=e$d.getAtlaserByIndex(e$l).texture;e$k._flashCacheImageNeedFlush&&e$R.flashFlushImage(e$k)}},e$R.drawToCanvas=function(e$d,e$t,e$l,e$k,e$W,e$i){(e$l<=0||e$k<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),e$l|=0,e$k|=0,e$W|=0,e$i|=0;var e$A=e$Qd.create(e$l,e$k,6408,5121,0,!1);e$A.start(),e$A.clear(0,0,0,0),e$z.context.clear(),e$e.renders[e$t]._fun(e$d,e$z.context,e$W,e$ed.height-e$k+e$i),e$z.context.flush(),e$A.end();var e$B=e$A.getData(0,0,e$l,e$k);if(e$A.recycle(),e$B.byteLength==e$l*e$k*4){var e$o=new e$hd;e$o._canvas=e$c.createElement("canvas"),e$o.size(e$l,e$k);var e$I=e$o._canvas.getContext("2d");e$c.canvas.size(e$l,e$k);var e$b=e$c.context,e$f=e$b.createImageData(e$l,e$k);return e$f.data.set(new Uint8ClampedArray(e$B.buffer)),e$o._imgData=e$f,e$b.putImageData(e$f,0,0),e$I.save(),e$I.translate(0,e$k),e$I.scale(1,-1),e$I.drawImage(e$c.canvas.source,0,0),e$I.restore(),e$o}console.log("drawToCanvas error: w:"+e$l+",h:"+e$k+",datalen:"+e$B.byteLength)},e$R.createFilterAction=function(e$d){var e$t;switch(e$d){case 32:e$t=new e$pd}return e$t},e$R.addTextureToAtlas=function(e$d){e$d._uvID++,e$U._atlasRestore++,e$d.bitmap.enableMerageInAtlas&&e$U.instance.addToAtlas(e$d)},e$R.getTexturePixels=function(e$d,e$t,e$l,e$k,e$W){e$z.context.ctx.clear();var e$i=new e$T;e$i.graphics.drawTexture(e$d,-e$t,-e$l);var e$A=e$Qd.create(e$k,e$W);e$A.start(),e$A.clear(0,0,0,0),e$i.render(e$z.context,0,0),e$z.context.ctx.flush(),e$A.end();for(var e$B=e$A.getData(0,0,e$k,e$W),e$o=[],e$I=0,e$b=e$W-1;0<=e$b;e$b--)for(var e$f=0;e$f<e$k;e$f++)e$I=4*(e$b*e$k+e$f),e$o.push(e$B[e$I]),e$o.push(e$B[e$I+1]),e$o.push(e$B[e$I+2]),e$o.push(e$B[e$I+3]);return e$o},e$R.skinAniSprite=function(){return new e$dd},e$I.create=function(e$d,e$t){var e$l=new e$hd;return e$l._imgData=e$t,e$l.flipY=!1,e$l},e$L._filterStart=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$d.getValue("bounds"),e$A=e$Qd.create(e$i.width,e$i.height);if(e$A.start(),e$A.clear(0,0,0,0),e$d.addValue("src",e$A),e$d.addValue("ScissorTest",e$ed.worldScissorTest),e$ed.worldScissorTest){var e$B=new e$M;e$B.copyFrom(e$l.ctx._clipRect),e$d.addValue("clipRect",e$B),e$ed.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},e$L._filterEnd=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$d.getValue("bounds");e$d.getValue("src").end();var e$A=e$Qd.create(e$i.width,e$i.height);e$A.start(),e$A.clear(0,0,0,0),e$d.addValue("out",e$A),e$t._set$P("_filterCache",e$A),e$t._set$P("_isHaveGlowFilter",e$d.getValue("_isHaveGlowFilter"))},e$L._EndTarget=function(e$d,e$t){if(e$d.getValue("src").recycle(),e$d.getValue("out").end(),e$d.getValue("ScissorTest")){e$ed.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),e$t.ctx.save();var e$l=e$d.getValue("clipRect");e$t.ctx.clipRect(e$l.x,e$l.y,e$l.width,e$l.height)}},e$L._useSrc=function(e$d){var e$t=e$d.getValue("out");e$t.end(),(e$t=e$d.getValue("src")).start(),e$t.clear(0,0,0,0)},e$L._endSrc=function(e$d){e$d.getValue("src").end()},e$L._useOut=function(e$d){var e$t=e$d.getValue("src");e$t.end(),(e$t=e$d.getValue("out")).start(),e$t.clear(0,0,0,0)},e$L._endOut=function(e$d){e$d.getValue("out").end()},e$L._recycleScope=function(e$d){e$d.recycle()},e$L._filter=function(e$d,e$t,e$l,e$k){var e$W=this._next;if(e$W){var e$i,e$A,e$B=e$d.filters,e$o=e$B.length;if(1==e$o&&32==e$B[0].type)return e$t.ctx.save(),e$t.ctx.setFilters([e$B[0]]),e$W._fun.call(e$W,e$d,e$t,e$l,e$k),void e$t.ctx.restore();var e$I=e$Bd.create(),e$b=e$p.TEMP,e$f=e$t.ctx._getTransformMatrix(),e$J=e$$.create();e$f.copyTo(e$J);var e$c=0,e$Y=0,e$w=!1,e$D=e$d._$P._filterCache?e$d._$P._filterCache:null;if(!e$D||e$d._repaint){e$w=e$d._isHaveGlowFilter(),e$I.addValue("_isHaveGlowFilter",e$w),e$w&&(e$c=50,e$Y=25),(e$A=new e$M).copyFrom(e$d.getSelfBounds()),e$A.x+=e$d.x,e$A.y+=e$d.y,e$A.x-=e$d.pivotX+4,e$A.y-=e$d.pivotY+4;var e$z=e$A.x,e$e=e$A.y;if(e$A.width+=e$c+8,e$A.height+=e$c+8,e$b.x=e$A.x*e$J.a+e$A.y*e$J.c,e$b.y=e$A.y*e$J.d+e$A.x*e$J.b,e$A.x=e$b.x,e$A.y=e$b.y,e$b.x=e$A.width*e$J.a+e$A.height*e$J.c,e$b.y=e$A.height*e$J.d+e$A.width*e$J.b,e$A.width=e$b.x,e$A.height=e$b.y,e$A.width<=0||e$A.height<=0)return;e$D&&e$D.recycle(),e$I.addValue("bounds",e$A);var e$g=e$Ad.create([e$I,e$d,e$t,0,0],e$L._filterStart);e$t.addRenderObject(e$g),e$t.ctx._renderKey=0,e$t.ctx._shader2D.glTexture=null;var e$H=e$d.x-e$z+e$Y,e$R=e$d.y-e$e+e$Y;e$W._fun.call(e$W,e$d,e$t,e$H,e$R),e$g=e$Ad.create([e$I,e$d,e$t,0,0],e$L._filterEnd),e$t.addRenderObject(e$g);for(var e$G=0;e$G<e$o;e$G++){0!=e$G&&(e$g=e$Ad.create([e$I],e$L._useSrc),e$t.addRenderObject(e$g),e$i=e$Ld.create(1,0),e$$.TEMP.identity(),e$t.ctx.drawTarget(e$I,0,0,e$A.width,e$A.height,e$$.TEMP,"out",e$i,null,e$N.TOINT.overlay),e$g=e$Ad.create([e$I],e$L._useOut),e$t.addRenderObject(e$g)),e$B[e$G].action.apply3d(e$I,e$d,e$t,0,0)}e$g=e$Ad.create([e$I,e$t],e$L._EndTarget),e$t.addRenderObject(e$g)}else{if((e$w=!!e$d._$P._isHaveGlowFilter&&e$d._$P._isHaveGlowFilter)&&(e$c=50,e$Y=25),(e$A=e$d.getBounds()).width<=0||e$A.height<=0)return;e$A.width+=e$c,e$A.height+=e$c,e$b.x=e$A.x*e$J.a+e$A.y*e$J.c,e$b.y=e$A.y*e$J.d+e$A.x*e$J.b,e$A.x=e$b.x,e$A.y=e$b.y,e$b.x=e$A.width*e$J.a+e$A.height*e$J.c,e$b.y=e$A.height*e$J.d+e$A.width*e$J.b,e$A.width=e$b.x,e$A.height=e$b.y,e$I.addValue("out",e$D)}e$l=e$l-e$Y-e$d.x,e$k=e$k-e$Y-e$d.y,e$b.setTo(e$l,e$k),e$J.transformPoint(e$b),e$l=e$b.x+e$A.x,e$k=e$b.y+e$A.y,e$i=e$Ld.create(1,0),e$$.TEMP.identity(),e$t.ctx.drawTarget(e$I,e$l,e$k,e$A.width,e$A.height,e$$.TEMP,"out",e$i,null,e$N.TOINT.overlay),e$g=e$Ad.create([e$I],e$L._recycleScope),e$t.addRenderObject(e$g),e$J.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=e$A._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=e$A._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=e$A._uint8ArraySlice),!0},e$A.onStageResize=function(e$d,e$t){null!=e$A.mainContext&&(e$A.mainContext.viewport(0,0,e$d,e$t),e$ed.width=e$d,e$ed.height=e$t)},e$A.onInvalidGLRes=function(){e$U.instance.freeAll(),e$H.releaseContentManagers(!0),e$A.doNodeRepaint(e$G.stage),e$A.mainContext.viewport(0,0,e$ed.width,e$ed.height),e$G.stage.event("devicelost")},e$A.doNodeRepaint=function(e$d){0==e$d.numChildren&&e$d.repaint();for(var e$t=0;e$t<e$d.numChildren;e$t++)e$A.doNodeRepaint(e$d.getChildAt(e$t))},e$A.init=function(e$d,e$t,e$l){e$A.mainCanvas=e$d,e$I._createContext=function(e$d){return new e$qd(e$d)},e$hd._createContext=function(e$d){return new e$qd(e$d)};var e$k=laya.webgl.WebGL.mainContext;if(null!=e$k.getShaderPrecisionFormat){var e$W=e$k.getShaderPrecisionFormat(35633,36338),e$i=e$k.getShaderPrecisionFormat(35632,36338);e$A.shaderHighPrecision=!(!e$W.precision||!e$i.precision)}else e$A.shaderHighPrecision=!1;if(e$A.compressAstc=e$k.getExtension("WEBGL_compressed_texture_astc"),e$A.compressAtc=e$k.getExtension("WEBGL_compressed_texture_atc"),e$A.compressEtc=e$k.getExtension("WEBGL_compressed_texture_etc"),e$A.compressEtc1=e$k.getExtension("WEBGL_compressed_texture_etc1"),e$A.compressPvrtc=e$k.getExtension("WEBGL_compressed_texture_pvrtc"),e$A.compressS3tc=e$k.getExtension("WEBGL_compressed_texture_s3tc"),e$A.compressS3tc_srgb=e$k.getExtension("WEBGL_compressed_texture_s3tc_srgb"),e$A.compressAstc=e$A.compressAstc?e$A.compressAstc:{},e$A.compressAtc=e$A.compressAtc?e$A.compressAtc:{},e$A.compressEtc=e$A.compressEtc?e$A.compressEtc:{},e$A.compressEtc1=e$A.compressEtc1?e$A.compressEtc1:{},e$A.compressPvrtc=e$A.compressPvrtc?e$A.compressPvrtc:{},e$A.compressS3tc=e$A.compressS3tc?e$A.compressS3tc:{},e$A.compressS3tc_srgb=e$A.compressS3tc_srgb?e$A.compressS3tc_srgb:{},e$k.deleteTexture1=e$k.deleteTexture,e$k.deleteTexture=function(e$d){e$d==e$Rd.curBindTexValue&&(e$Rd.curBindTexValue=null),e$k.deleteTexture1(e$d)},e$A.onStageResize(e$t,e$l),null==e$A.mainContext)throw new Error("webGL getContext err!");e$C.__init__(),e$U.__init__(),e$Td.__init__(),e$id.__init__(),e$qd.__init__(),e$Ld.__init__(),e$_.__init__(),e$Od.__int__(e$k),e$N._init_(e$k),e$z.isConchApp&&conch.setOnInvalidGLRes(e$A.onInvalidGLRes)},e$A.mainCanvas=null,e$A.antialias=!0,e$A.shaderHighPrecision=!1,e$A._bg_null=[0,0,0,0],e$A}(),e$Rd=function(){function e$k(){}return e$J(e$k,"laya.webgl.WebGLContext"),e$k.UseProgram=function(e$d){return e$k._useProgram!==e$d&&(e$Hd.mainContext.useProgram(e$d),e$k._useProgram=e$d,!0)},e$k.setDepthTest=function(e$d,e$t){e$t!==e$k._depthTest&&((e$k._depthTest=e$t)?e$d.enable(2929):e$d.disable(2929))},e$k.setDepthMask=function(e$d,e$t){e$t!==e$k._depthMask&&(e$k._depthMask=e$t,e$d.depthMask(e$t))},e$k.setDepthFunc=function(e$d,e$t){e$t!==e$k._depthFunc&&(e$k._depthFunc=e$t,e$d.depthFunc(e$t))},e$k.setBlend=function(e$d,e$t){e$t!==e$k._blend&&((e$k._blend=e$t)?e$d.enable(3042):e$d.disable(3042))},e$k.setBlendFunc=function(e$d,e$t,e$l){(e$t!==e$k._sFactor||e$l!==e$k._dFactor)&&(e$k._sFactor=e$t,e$k._dFactor=e$l,e$d.blendFunc(e$t,e$l))},e$k.setCullFace=function(e$d,e$t){e$t!==e$k._cullFace&&((e$k._cullFace=e$t)?e$d.enable(2884):e$d.disable(2884))},e$k.setFrontFace=function(e$d,e$t){e$t!==e$k._frontFace&&(e$k._frontFace=e$t,e$d.frontFace(e$t))},e$k.bindTexture=function(e$d,e$t,e$l){e$d.bindTexture(e$t,e$l),e$k.curBindTexTarget=e$t,e$k.curBindTexValue=e$l},e$k.DEPTH_BUFFER_BIT=256,e$k.STENCIL_BUFFER_BIT=1024,e$k.COLOR_BUFFER_BIT=16384,e$k.POINTS=0,e$k.LINES=1,e$k.LINE_LOOP=2,e$k.LINE_STRIP=3,e$k.TRIANGLES=4,e$k.TRIANGLE_STRIP=5,e$k.TRIANGLE_FAN=6,e$k.ZERO=0,e$k.ONE=1,e$k.SRC_COLOR=768,e$k.ONE_MINUS_SRC_COLOR=769,e$k.SRC_ALPHA=770,e$k.ONE_MINUS_SRC_ALPHA=771,e$k.DST_ALPHA=772,e$k.ONE_MINUS_DST_ALPHA=773,e$k.DST_COLOR=774,e$k.ONE_MINUS_DST_COLOR=775,e$k.SRC_ALPHA_SATURATE=776,e$k.FUNC_ADD=32774,e$k.BLEND_EQUATION=32777,e$k.BLEND_EQUATION_RGB=32777,e$k.BLEND_EQUATION_ALPHA=34877,e$k.FUNC_SUBTRACT=32778,e$k.FUNC_REVERSE_SUBTRACT=32779,e$k.BLEND_DST_RGB=32968,e$k.BLEND_SRC_RGB=32969,e$k.BLEND_DST_ALPHA=32970,e$k.BLEND_SRC_ALPHA=32971,e$k.CONSTANT_COLOR=32769,e$k.ONE_MINUS_CONSTANT_COLOR=32770,e$k.CONSTANT_ALPHA=32771,e$k.ONE_MINUS_CONSTANT_ALPHA=32772,e$k.BLEND_COLOR=32773,e$k.ARRAY_BUFFER=34962,e$k.ELEMENT_ARRAY_BUFFER=34963,e$k.ARRAY_BUFFER_BINDING=34964,e$k.ELEMENT_ARRAY_BUFFER_BINDING=34965,e$k.STREAM_DRAW=35040,e$k.STATIC_DRAW=35044,e$k.DYNAMIC_DRAW=35048,e$k.BUFFER_SIZE=34660,e$k.BUFFER_USAGE=34661,e$k.CURRENT_VERTEX_ATTRIB=34342,e$k.FRONT=1028,e$k.BACK=1029,e$k.CULL_FACE=2884,e$k.FRONT_AND_BACK=1032,e$k.BLEND=3042,e$k.DITHER=3024,e$k.STENCIL_TEST=2960,e$k.DEPTH_TEST=2929,e$k.SCISSOR_TEST=3089,e$k.POLYGON_OFFSET_FILL=32823,e$k.SAMPLE_ALPHA_TO_COVERAGE=32926,e$k.SAMPLE_COVERAGE=32928,e$k.NO_ERROR=0,e$k.INVALID_ENUM=1280,e$k.INVALID_VALUE=1281,e$k.INVALID_OPERATION=1282,e$k.OUT_OF_MEMORY=1285,e$k.CW=2304,e$k.CCW=2305,e$k.LINE_WIDTH=2849,e$k.ALIASED_POINT_SIZE_RANGE=33901,e$k.ALIASED_LINE_WIDTH_RANGE=33902,e$k.CULL_FACE_MODE=2885,e$k.FRONT_FACE=2886,e$k.DEPTH_RANGE=2928,e$k.DEPTH_WRITEMASK=2930,e$k.DEPTH_CLEAR_VALUE=2931,e$k.DEPTH_FUNC=2932,e$k.STENCIL_CLEAR_VALUE=2961,e$k.STENCIL_FUNC=2962,e$k.STENCIL_FAIL=2964,e$k.STENCIL_PASS_DEPTH_FAIL=2965,e$k.STENCIL_PASS_DEPTH_PASS=2966,e$k.STENCIL_REF=2967,e$k.STENCIL_VALUE_MASK=2963,e$k.STENCIL_WRITEMASK=2968,e$k.STENCIL_BACK_FUNC=34816,e$k.STENCIL_BACK_FAIL=34817,e$k.STENCIL_BACK_PASS_DEPTH_FAIL=34818,e$k.STENCIL_BACK_PASS_DEPTH_PASS=34819,e$k.STENCIL_BACK_REF=36003,e$k.STENCIL_BACK_VALUE_MASK=36004,e$k.STENCIL_BACK_WRITEMASK=36005,e$k.VIEWPORT=2978,e$k.SCISSOR_BOX=3088,e$k.COLOR_CLEAR_VALUE=3106,e$k.COLOR_WRITEMASK=3107,e$k.UNPACK_ALIGNMENT=3317,e$k.PACK_ALIGNMENT=3333,e$k.MAX_TEXTURE_SIZE=3379,e$k.MAX_VIEWPORT_DIMS=3386,e$k.SUBPIXEL_BITS=3408,e$k.RED_BITS=3410,e$k.GREEN_BITS=3411,e$k.BLUE_BITS=3412,e$k.ALPHA_BITS=3413,e$k.DEPTH_BITS=3414,e$k.STENCIL_BITS=3415,e$k.POLYGON_OFFSET_UNITS=10752,e$k.POLYGON_OFFSET_FACTOR=32824,e$k.TEXTURE_BINDING_2D=32873,e$k.SAMPLE_BUFFERS=32936,e$k.SAMPLES=32937,e$k.SAMPLE_COVERAGE_VALUE=32938,e$k.SAMPLE_COVERAGE_INVERT=32939,e$k.NUM_COMPRESSED_TEXTURE_FORMATS=34466,e$k.COMPRESSED_TEXTURE_FORMATS=34467,e$k.DONT_CARE=4352,e$k.FASTEST=4353,e$k.NICEST=4354,e$k.GENERATE_MIPMAP_HINT=33170,e$k.BYTE=5120,e$k.UNSIGNED_BYTE=5121,e$k.SHORT=5122,e$k.UNSIGNED_SHORT=5123,e$k.INT=5124,e$k.UNSIGNED_INT=5125,e$k.FLOAT=5126,e$k.DEPTH_COMPONENT=6402,e$k.ALPHA=6406,e$k.RGB=6407,e$k.RGBA=6408,e$k.LUMINANCE=6409,e$k.LUMINANCE_ALPHA=6410,e$k.UNSIGNED_SHORT_4_4_4_4=32819,e$k.UNSIGNED_SHORT_5_5_5_1=32820,e$k.UNSIGNED_SHORT_5_6_5=33635,e$k.FRAGMENT_SHADER=35632,e$k.VERTEX_SHADER=35633,e$k.MAX_VERTEX_ATTRIBS=34921,e$k.MAX_VERTEX_UNIFORM_VECTORS=36347,e$k.MAX_VARYING_VECTORS=36348,e$k.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,e$k.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,e$k.MAX_TEXTURE_IMAGE_UNITS=34930,e$k.MAX_FRAGMENT_UNIFORM_VECTORS=36349,e$k.SHADER_TYPE=35663,e$k.DELETE_STATUS=35712,e$k.LINK_STATUS=35714,e$k.VALIDATE_STATUS=35715,e$k.ATTACHED_SHADERS=35717,e$k.ACTIVE_UNIFORMS=35718,e$k.ACTIVE_ATTRIBUTES=35721,e$k.SHADING_LANGUAGE_VERSION=35724,e$k.CURRENT_PROGRAM=35725,e$k.NEVER=512,e$k.LESS=513,e$k.EQUAL=514,e$k.LEQUAL=515,e$k.GREATER=516,e$k.NOTEQUAL=517,e$k.GEQUAL=518,e$k.ALWAYS=519,e$k.KEEP=7680,e$k.REPLACE=7681,e$k.INCR=7682,e$k.DECR=7683,e$k.INVERT=5386,e$k.INCR_WRAP=34055,e$k.DECR_WRAP=34056,e$k.VENDOR=7936,e$k.RENDERER=7937,e$k.VERSION=7938,e$k.NEAREST=9728,e$k.LINEAR=9729,e$k.NEAREST_MIPMAP_NEAREST=9984,e$k.LINEAR_MIPMAP_NEAREST=9985,e$k.NEAREST_MIPMAP_LINEAR=9986,e$k.LINEAR_MIPMAP_LINEAR=9987,e$k.TEXTURE_MAG_FILTER=10240,e$k.TEXTURE_MIN_FILTER=10241,e$k.TEXTURE_WRAP_S=10242,e$k.TEXTURE_WRAP_T=10243,e$k.TEXTURE_2D=3553,e$k.TEXTURE=5890,e$k.TEXTURE_CUBE_MAP=34067,e$k.TEXTURE_BINDING_CUBE_MAP=34068,e$k.TEXTURE_CUBE_MAP_POSITIVE_X=34069,e$k.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,e$k.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,e$k.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,e$k.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,e$k.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,e$k.MAX_CUBE_MAP_TEXTURE_SIZE=34076,e$k.TEXTURE0=33984,e$k.TEXTURE1=33985,e$k.TEXTURE2=33986,e$k.TEXTURE3=33987,e$k.TEXTURE4=33988,e$k.TEXTURE5=33989,e$k.TEXTURE6=33990,e$k.TEXTURE7=33991,e$k.TEXTURE8=33992,e$k.TEXTURE9=33993,e$k.TEXTURE10=33994,e$k.TEXTURE11=33995,e$k.TEXTURE12=33996,e$k.TEXTURE13=33997,e$k.TEXTURE14=33998,e$k.TEXTURE15=33999,e$k.TEXTURE16=34e3,e$k.TEXTURE17=34001,e$k.TEXTURE18=34002,e$k.TEXTURE19=34003,e$k.TEXTURE20=34004,e$k.TEXTURE21=34005,e$k.TEXTURE22=34006,e$k.TEXTURE23=34007,e$k.TEXTURE24=34008,e$k.TEXTURE25=34009,e$k.TEXTURE26=34010,e$k.TEXTURE27=34011,e$k.TEXTURE28=34012,e$k.TEXTURE29=34013,e$k.TEXTURE30=34014,e$k.TEXTURE31=34015,e$k.ACTIVE_TEXTURE=34016,e$k.REPEAT=10497,e$k.CLAMP_TO_EDGE=33071,e$k.MIRRORED_REPEAT=33648,e$k.FLOAT_VEC2=35664,e$k.FLOAT_VEC3=35665,e$k.FLOAT_VEC4=35666,e$k.INT_VEC2=35667,e$k.INT_VEC3=35668,e$k.INT_VEC4=35669,e$k.BOOL=35670,e$k.BOOL_VEC2=35671,e$k.BOOL_VEC3=35672,e$k.BOOL_VEC4=35673,e$k.FLOAT_MAT2=35674,e$k.FLOAT_MAT3=35675,e$k.FLOAT_MAT4=35676,e$k.SAMPLER_2D=35678,e$k.SAMPLER_CUBE=35680,e$k.VERTEX_ATTRIB_ARRAY_ENABLED=34338,e$k.VERTEX_ATTRIB_ARRAY_SIZE=34339,e$k.VERTEX_ATTRIB_ARRAY_STRIDE=34340,e$k.VERTEX_ATTRIB_ARRAY_TYPE=34341,e$k.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,e$k.VERTEX_ATTRIB_ARRAY_POINTER=34373,e$k.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,e$k.COMPILE_STATUS=35713,e$k.LOW_FLOAT=36336,e$k.MEDIUM_FLOAT=36337,e$k.HIGH_FLOAT=36338,e$k.LOW_INT=36339,e$k.MEDIUM_INT=36340,e$k.HIGH_INT=36341,e$k.FRAMEBUFFER=36160,e$k.RENDERBUFFER=36161,e$k.RGBA4=32854,e$k.RGB5_A1=32855,e$k.RGB565=36194,e$k.DEPTH_COMPONENT16=33189,e$k.STENCIL_INDEX=6401,e$k.STENCIL_INDEX8=36168,e$k.DEPTH_STENCIL=34041,e$k.RENDERBUFFER_WIDTH=36162,e$k.RENDERBUFFER_HEIGHT=36163,e$k.RENDERBUFFER_INTERNAL_FORMAT=36164,e$k.RENDERBUFFER_RED_SIZE=36176,e$k.RENDERBUFFER_GREEN_SIZE=36177,e$k.RENDERBUFFER_BLUE_SIZE=36178,e$k.RENDERBUFFER_ALPHA_SIZE=36179,e$k.RENDERBUFFER_DEPTH_SIZE=36180,e$k.RENDERBUFFER_STENCIL_SIZE=36181,e$k.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,e$k.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,e$k.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,e$k.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,e$k.COLOR_ATTACHMENT0=36064,e$k.DEPTH_ATTACHMENT=36096,e$k.STENCIL_ATTACHMENT=36128,e$k.DEPTH_STENCIL_ATTACHMENT=33306,e$k.NONE=0,e$k.FRAMEBUFFER_COMPLETE=36053,e$k.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,e$k.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,e$k.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,e$k.FRAMEBUFFER_UNSUPPORTED=36061,e$k.FRAMEBUFFER_BINDING=36006,e$k.RENDERBUFFER_BINDING=36007,e$k.MAX_RENDERBUFFER_SIZE=34024,e$k.INVALID_FRAMEBUFFER_OPERATION=1286,e$k.UNPACK_FLIP_Y_WEBGL=37440,e$k.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,e$k.CONTEXT_LOST_WEBGL=37442,e$k.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,e$k.BROWSER_DEFAULT_WEBGL=37444,e$k._useProgram=null,e$k._depthTest=!0,e$k._depthMask=!0,e$k._blend=!1,e$k._cullFace=!1,e$k.curBindTexTarget=null,e$k.curBindTexValue=null,e$A(e$k,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),e$k}(),e$Gd=function(e$d){function e$t(){e$t.__super.call(this)}e$J(e$t,"laya.webgl.display.GraphicsGL",e$B);var e$l=e$t.prototype;return e$l.setShader=function(e$d){this._saveToCmd(e$z.context._setShader,[e$d])},e$l.setIBVB=function(e$d,e$t,e$l,e$k,e$W,e$i){this._saveToCmd(e$z.context._setIBVB,[e$d,e$t,e$l,e$k,e$W,e$i])},e$l.drawParticle=function(e$d,e$t,e$l){var e$k=e$R.createParticleTemplate2D(e$l);e$k.x=e$d,e$k.y=e$t,this._saveToCmd(e$z.context._drawParticle,[e$k])},e$t}(),e$qd=function(e$d){var e$l;function e$Z(e$d){this._x=0,this._y=0,this._id=++e$Z._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,e$Z.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=e$Z.MAXCLIPRECT,this.mOutPoint,this._canvas=e$d,this._canvas._addReference(),e$Z._contextcount++,e$z.isFlash?(this._ib=e$_d.create(35044),e$Dd.fillIBQuadrangle(this._ib,16)):this._ib=e$_d.QuadrangleIB,this.clear()}e$J(e$Z,"laya.webgl.canvas.WebGLContext2D",e$W);var e$t=e$Z.prototype;return e$t.setIsMainContext=function(){this._isMain=!0},e$t.clearBG=function(e$d,e$t,e$l,e$k){var e$W=e$Hd.mainContext;e$W.clearColor(e$d,e$t,e$l,e$k),e$W.clear(16384)},e$t._getSubmits=function(){return this._submits},e$t._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var e$d=0,e$t=this._submits._length;e$d<e$t;e$d++)this._submits[e$d].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},e$t.destroy=function(){--e$Z._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=e$_d.QuadrangleIB&&this._ib.releaseResource()},e$t.clear=function(){this._submits||(this._other=e$l.DEFAULT,this._curMat=e$$.create(),this._vb=e$vd.create(-1),this._submits=[],this._save=[e$m.Create(this)],this._save.length=10,this._shader2D=new e$_,this._triangleMesh=e$xd.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=e$l.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=e$Z.MAXCLIPRECT,this._curSubmit=e$id.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=e$u.DEFAULT;for(var e$d=0,e$t=this._submits._length;e$d<e$t;e$d++)this._submits[e$d].releaseRender(),this._submits[e$d]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},e$t.size=function(e$d,e$t){if(this._width!=e$d||this._height!=e$t)if(0==e$d||0==e$t){0!=this._vb._byteLength&&(this._width=e$d,this._height=e$t,this._vb.clear(),this._vb.upload());for(var e$l=0,e$k=this._submits._length;e$l<e$k;e$l++)this._submits[e$l].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=e$d,this._height=e$t,this._targets&&this._targets.size(e$d,e$t),this._canvas.memorySize-=this._canvas.memorySize;0===e$d&&0===e$t&&this._releaseMem()},e$t._getTransformMatrix=function(){return this._curMat},e$t.translate=function(e$d,e$t){0===e$d&&0===e$t||(e$F.save(this),this._curMat.bTransform&&(e$O.save(this),this._curMat.transformPointN(e$p.TEMP.setTo(e$d,e$t)),e$d=e$p.TEMP.x,e$t=e$p.TEMP.y),this._x+=e$d,this._y+=e$t)},e$t.save=function(){this._save[this._save._length++]=e$m.Create(this)},e$t.restore=function(){var e$d=this._save._length;if(!(e$d<1))for(var e$t=e$d-1;0<=e$t;e$t--){var e$l=this._save[e$t];if(e$l.restore(this),e$l.isSaveMark())return void(this._save._length=e$t)}},e$t._fillText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){void 0===e$I&&(e$I=0);var e$b=this._shader2D,e$f=this._curSubmit.shaderValue,e$J=e$W?e$Yd.create(e$W):this._other.font;if(e$U.enabled)e$b.ALPHA!==e$f.ALPHA&&(e$b.glTexture=null),e$cd.drawText(this,e$d,e$t,this._curMat,e$J,e$o||this._other.textAlign,e$i,e$A,e$B,e$l,e$k,e$I);else{this._shader2D.defines.getValue();var e$c=e$i?e$Y.create(e$i)._color:e$b.colorAdd;e$b.ALPHA===e$f.ALPHA&&e$c===e$b.colorAdd&&e$f.colorAdd===e$b.colorAdd||(e$b.glTexture=null,e$b.colorAdd=e$c),e$cd.drawText(this,e$d,e$t,this._curMat,e$J,e$o||this._other.textAlign,e$i,e$A,e$B,e$l,e$k,e$I)}},e$t.fillWords=function(e$d,e$t,e$l,e$k,e$W,e$i){this._fillText(null,e$d,e$t,e$l,e$k,e$W,null,-1,null,e$i)},e$t.fillBorderWords=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._fillBorderText(null,e$d,e$t,e$l,e$k,e$W,e$i,e$A,null)},e$t.fillText=function(e$d,e$t,e$l,e$k,e$W,e$i){this._fillText(e$d,null,e$t,e$l,e$k,e$W,null,-1,e$i)},e$t.strokeText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._fillText(e$d,null,e$t,e$l,e$k,null,e$W,e$i||1,e$A)},e$t.fillBorderText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){this._fillBorderText(e$d,null,e$t,e$l,e$k,e$W,e$i,e$A,e$B)},e$t._fillBorderText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){if(!e$U.enabled)return this._fillText(e$d,e$t,e$l,e$k,e$W,null,e$A,e$B||1,e$o),void this._fillText(e$d,e$t,e$l,e$k,e$W,e$i,null,-1,e$o);var e$I=this._shader2D,e$b=this._curSubmit.shaderValue;e$I.ALPHA!==e$b.ALPHA&&(e$I.glTexture=null);var e$f=e$W?(e$Z._fontTemp.setFont(e$W),e$Z._fontTemp):this._other.font;e$cd.drawText(this,e$d,e$t,this._curMat,e$f,e$o||this._other.textAlign,e$i,e$A,e$B||1,e$l,e$k,0)},e$t.fillRect=function(e$d,e$t,e$l,e$k,e$W){var e$i=this._vb;if(e$Dd.fillRectImgVb(e$i,this._clipRect,e$d,e$t,e$l,e$k,e$x.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var e$A=this._shader2D.fillStyle;e$W&&(this._shader2D.fillStyle=e$u.create(e$W));var e$B=this._shader2D,e$o=this._curSubmit.shaderValue;if(e$B.fillStyle!==e$o.fillStyle||e$B.ALPHA!==e$o.ALPHA){e$B.glTexture=null;var e$I=this._curSubmit=e$id.createSubmit(this,this._ib,e$i,(e$i._byteLength-64)/32*3,e$Ld.create(2,0));e$I.shaderValue.color=e$B.fillStyle._color._color,e$I.shaderValue.ALPHA=e$B.ALPHA,this._submits[this._submits._length++]=e$I}this._curSubmit._numEle+=6,this._shader2D.fillStyle=e$A}},e$t.fillTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){if(e$d.loaded&&e$d.bitmap&&e$d.source){var e$o=this._vb,e$I=e$d.bitmap.width,e$b=e$d.bitmap.height,e$f=e$d.uv,e$J=e$A.x%e$d.width,e$c=e$A.y%e$d.height;if(e$I!=e$B.w||e$b!=e$B.h){if(!e$B.w&&!e$B.h)switch(e$B.oy=e$B.ox=0,e$i){case"repeat":e$B.width=e$k,e$B.height=e$W;break;case"repeat-x":e$B.width=e$k,e$c<0?e$d.height+e$c>e$W?e$B.height=e$W:e$B.height=e$d.height+e$c:(e$B.oy=e$c,e$d.height+e$c>e$W?e$B.height=e$W-e$c:e$B.height=e$d.height);break;case"repeat-y":e$J<0?e$d.width+e$J>e$k?e$B.width=e$k:e$B.width=e$d.width+e$J:(e$B.ox=e$J,e$d.width+e$J>e$k?e$B.width=e$k-e$J:e$B.width=e$d.width),e$B.height=e$W;break;case"no-repeat":e$J<0?e$d.width+e$J>e$k?e$B.width=e$k:e$B.width=e$d.width+e$J:(e$B.ox=e$J,e$d.width+e$J>e$k?e$B.width=e$k-e$J:e$B.width=e$d.width),e$c<0?e$d.height+e$c>e$W?e$B.height=e$W:e$B.height=e$d.height+e$c:(e$B.oy=e$c,e$d.height+e$c>e$W?e$B.height=e$W-e$c:e$B.height=e$d.height);break;default:e$B.width=e$k,e$B.height=e$W}e$B.w=e$I,e$B.h=e$b,e$B.uv=[0,0,e$B.width/e$I,0,e$B.width/e$I,e$B.height/e$b,0,e$B.height/e$b]}if(e$t+=e$B.ox,e$l+=e$B.oy,e$J-=e$B.ox,e$c-=e$B.oy,e$Dd.fillRectImgVb(e$o,this._clipRect,e$t,e$l,e$B.width,e$B.height,e$B.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var e$Y=e$Kd.create(this,this._ib,e$o,(e$o._byteLength-64)/32*3,e$Ld.create(256,0)),e$w=(this._submits[this._submits._length++]=e$Y).shaderValue;e$w.textureHost=e$d;var e$D=e$f[0]*e$I,e$z=e$f[1]*e$b,e$e=(e$f[2]-e$f[0])*e$I,e$g=(e$f[5]-e$f[3])*e$b,e$H=-e$J/e$I,e$R=-e$c/e$b;e$w.u_TexRange[0]=e$D/e$I,e$w.u_TexRange[1]=e$e/e$I,e$w.u_TexRange[2]=e$z/e$b,e$w.u_TexRange[3]=e$g/e$b,e$w.u_offset[0]=e$H,e$w.u_offset[1]=e$R,e$U.enabled&&!this._isMain&&e$Y.addTexture(e$d,(e$o._byteLength>>2)-16),(this._curSubmit=e$Y)._renderType=10017,e$Y._numEle+=6}}else this.sprite&&e$G.timer.callLater(this,this._repaintSprite)},e$t.setShader=function(e$d){e$s.save(this,1048576,this._shader2D,!0),this._shader2D.shader=e$d},e$t.setFilters=function(e$d){e$s.save(this,2097152,this._shader2D,!0),this._shader2D.filters=e$d,this._curSubmit=e$id.RENDERBASE,this._renderKey=0,this._drawCount++},e$t.drawTexture=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._drawTextureM(e$d,e$t,e$l,e$k,e$W,e$i,e$A,null,1)},e$t.addTextureVb=function(e$d,e$t,e$l){var e$k=this._curSubmit._vb||this._vb,e$W=e$k._byteLength>>2;e$k.byteLength=e$W+16<<2;for(var e$i=e$k.getFloat32Array(),e$A=0;e$A<16;e$A+=4)e$i[e$W++]=e$d[e$A]+e$t,e$i[e$W++]=e$d[e$A+1]+e$l,e$i[e$W++]=e$d[e$A+2],e$i[e$W++]=e$d[e$A+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),e$k._upload=!0},e$t.willDrawTexture=function(e$d,e$t){if(!(e$d.loaded&&e$d.bitmap&&e$d.source))return this.sprite&&e$G.timer.callLater(this,this._repaintSprite),0;var e$l=e$d.bitmap,e$k=e$l.id+this._shader2D.ALPHA*e$t+10016;if(e$k==this._renderKey)return e$k;var e$W=this._shader2D,e$i=e$W.ALPHA,e$A=this._curSubmit.shaderValue;e$W.ALPHA*=e$t,this._renderKey=e$k,this._drawCount++,e$W.glTexture=e$l;var e$B=this._vb,e$o=null,e$I=e$B._byteLength/32*3,e$b=e$A.textureHost&&e$A.textureHost==e$d&&e$A.textureHost.alphaTexture==e$d.alphaTexture;return e$o=e$Kd.create(this,this._ib,e$B,e$I,e$Ld.create(1,0)),(this._submits[this._submits._length++]=e$o).shaderValue.textureHost=e$d,e$o._renderType=10016,e$o._preIsSameTextureShader=10016===this._curSubmit._renderType&&e$W.ALPHA===e$A.ALPHA&&e$b,this._curSubmit=e$o,e$W.ALPHA=e$i,e$k},e$t.drawTextures=function(e$d,e$t,e$l,e$k){if(e$d.loaded&&e$d.bitmap&&e$d.source){var e$W=this._clipRect;if(this._clipRect=e$Z.MAXCLIPRECT,this._drawTextureM(e$d,e$t[0],e$t[1],e$d.width,e$d.height,e$l,e$k,null,1)){if(this._clipRect=e$W,e$S.drawCall++,!(e$t.length<4)){for(var e$i=this._curSubmit._vb||this._vb,e$A=this._curMat.a,e$B=this._curMat.d,e$o=2,e$I=e$t.length;e$o<e$I;e$o+=2)e$Dd.copyPreImgVb(e$i,(e$t[e$o]-e$t[e$o-2])*e$A,(e$t[e$o+1]-e$t[e$o-1])*e$B),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&e$G.timer.callLater(this,this._repaintSprite)},e$t._drawTextureM=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){if(!e$d.loaded||!e$d.source)return this.sprite&&e$G.timer.callLater(this,this._repaintSprite),!1;var e$I=this._curSubmit._vb||this._vb,e$b=e$d.bitmap;e$t+=e$i,e$l+=e$A,this._drawCount++;var e$f=e$b.id+this._shader2D.ALPHA*e$o+10016;if(e$f!=this._renderKey){this._renderKey=e$f;var e$J=this._curSubmit.shaderValue,e$c=this._shader2D,e$Y=e$c.ALPHA;e$c.ALPHA*=e$o,e$c.glTexture=e$b;var e$w=this._vb,e$D=null,e$z=e$w._byteLength/32*3,e$e=e$J.textureHost&&e$J.textureHost==e$d&&e$J.textureHost.alphaTexture==e$d.alphaTexture;e$D=e$Kd.create(this,this._ib,e$w,e$z,e$Ld.create(1,0)),(this._submits[this._submits._length++]=e$D).shaderValue.textureHost=e$d,e$D._renderType=10016,e$D._preIsSameTextureShader=10016===this._curSubmit._renderType&&e$c.ALPHA===e$J.ALPHA&&e$e,this._curSubmit=e$D,e$I=this._curSubmit._vb||this._vb,e$c.ALPHA=e$Y}return!!e$Dd.fillRectImgVb(e$I,this._clipRect,e$t,e$l,e$k||e$d.width,e$W||e$d.height,e$d.uv,e$B||this._curMat,this._x,this._y,0,0)&&(e$U.enabled&&!this._isMain&&this._curSubmit.addTexture(e$d,(e$I._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},e$t._repaintSprite=function(){this.sprite&&this.sprite.repaint()},e$t._drawText=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){var e$b=e$d.bitmap;this._drawCount++;var e$f=e$b.id+this._shader2D.ALPHA+10016;if(e$f!=this._renderKey){this._renderKey=e$f;var e$J=this._curSubmit.shaderValue,e$c=this._shader2D;e$c.glTexture=e$b;var e$Y=this._vb,e$w=null,e$D=e$Y._byteLength/32*3,e$z=e$J.textureHost&&e$J.textureHost==e$d&&e$J.textureHost.alphaTexture==e$d.alphaTexture;(e$w=e$U.enabled?e$Kd.create(this,this._ib,e$Y,e$D,e$Ld.create(1,0)):e$Kd.create(this,this._ib,e$Y,e$D,e$Fd.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&e$c.ALPHA===e$J.ALPHA&&e$z,(this._submits[this._submits._length++]=e$w).shaderValue.textureHost=e$d,e$w._renderType=10016,this._curSubmit=e$w}e$d.active();var e$e=this._curSubmit._vb||this._vb;e$Dd.fillRectImgVb(e$e,this._clipRect,e$t+e$A,e$l+e$B,e$k||e$d.width,e$W||e$d.height,e$d.uv,e$i||this._curMat,this._x,this._y,e$o,e$I,!0)&&(e$U.enabled&&!this._isMain&&this._curSubmit.addTexture(e$d,(e$e._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},e$t.drawTextureWithTransform=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){if(e$i){var e$I=this._curMat,e$b=this._x,e$f=this._y;(0!==e$A||0!==e$B)&&(this._x=e$A*e$I.a+e$B*e$I.c,this._y=e$B*e$I.d+e$A*e$I.b),e$i&&e$I.bTransform?(e$$.mul(e$i,e$I,e$Z._tmpMatrix),(e$i=e$Z._tmpMatrix)._checkTransform()):(this._x+=e$I.tx,this._y+=e$I.ty),this._drawTextureM(e$d,e$t,e$l,e$k,e$W,0,0,e$i,e$o),this._x=e$b,this._y=e$f}else this._drawTextureM(e$d,e$t,e$l,e$k,e$W,e$A,e$B,null,e$o)},e$t.fillQuadrangle=function(e$d,e$t,e$l,e$k,e$W){var e$i=this._curSubmit,e$A=this._vb,e$B=this._shader2D,e$o=e$i.shaderValue;if(this._renderKey=0,e$d.bitmap){var e$I=e$d.bitmap;e$B.glTexture==e$I&&e$B.ALPHA===e$o.ALPHA||(e$B.glTexture=e$I,(e$i=this._curSubmit=e$id.createSubmit(this,this._ib,e$A,e$A._byteLength/32*3,e$Ld.create(1,0))).shaderValue.glTexture=e$I,this._submits[this._submits._length++]=e$i),e$Dd.fillQuadrangleImgVb(e$A,e$t,e$l,e$k,e$d.uv,e$W||this._curMat,this._x,this._y)}else e$i.shaderValue.fillStyle&&e$i.shaderValue.fillStyle.equal(e$d)&&e$B.ALPHA===e$o.ALPHA||(e$B.glTexture=null,(e$i=this._curSubmit=e$id.createSubmit(this,this._ib,e$A,e$A._byteLength/32*3,e$Ld.create(2,0))).shaderValue.defines.add(2),e$i.shaderValue.fillStyle=e$u.create(e$d),this._submits[this._submits._length++]=e$i),e$Dd.fillQuadrangleImgVb(e$A,e$t,e$l,e$k,e$x.DEF_UV,e$W||this._curMat,this._x,this._y);e$i._numEle+=6},e$t.drawTexture2=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){if(0!=e$i){var e$o=this._curMat;if(this._x=e$d*e$o.a+e$t*e$o.c,this._y=e$t*e$o.d+e$d*e$o.b,e$W&&(e$W=e$o.bTransform||e$W.bTransform?(e$$.mul(e$W,e$o,e$Z._tmpMatrix),e$Z._tmpMatrix):(this._x+=e$W.tx+e$o.tx,this._y+=e$W.ty+e$o.ty,e$$.EMPTY)),1!==e$i||e$A){var e$I=this._shader2D.ALPHA,e$b=this._nBlendType;this._shader2D.ALPHA=e$i,e$A&&(this._nBlendType=e$N.TOINT(e$A)),this._drawTextureM(e$B[0],e$B[1]-e$l,e$B[2]-e$k,e$B[3],e$B[4],0,0,e$W,1),this._shader2D.ALPHA=e$I,this._nBlendType=e$b}else this._drawTextureM(e$B[0],e$B[1]-e$l,e$B[2]-e$k,e$B[3],e$B[4],0,0,e$W,1);this._x=this._y=0}},e$t.drawCanvas=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$d.context;if(this._renderKey=0,e$i._targets)this._submits[this._submits._length++]=e$Cd.create(e$i,0,null),this._curSubmit=e$id.RENDERBASE,e$i._targets.drawTo(this,e$t,e$l,e$k,e$W);else{var e$A=this._submits[this._submits._length++]=e$Cd.create(e$i,this._shader2D.ALPHA,this._shader2D.filters),e$B=e$k/e$d.width,e$o=e$W/e$d.height,e$I=e$A._matrix;this._curMat.copyTo(e$I),1!=e$B&&1!=e$o&&e$I.scale(e$B,e$o);var e$b=e$I.tx,e$f=e$I.ty;e$I.tx=e$I.ty=0,e$I.transformPoint(e$p.TEMP.setTo(e$t,e$l)),e$I.translate(e$p.TEMP.x+e$b,e$p.TEMP.y+e$f),this._curSubmit=e$id.RENDERBASE}e$q.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=e$i._targets?"yellow":"green",this.strokeRect(e$t-1,e$l-1,e$k+2,e$W+2,1),this.strokeRect(e$t,e$l,e$k,e$W,1),this.restore())},e$t.drawTarget=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){void 0===e$I&&(e$I=-1);var e$b=this._vb;if(e$Dd.fillRectImgVb(e$b,this._clipRect,e$t,e$l,e$k,e$W,e$o||e$x.DEF_UV,e$i||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var e$f=this._curSubmit=e$fd.create(this,this._ib,e$b,(e$b._byteLength-64)/32*3,e$B,e$A);e$f.blendType=-1==e$I?this._nBlendType:e$I,e$f.scope=e$d,this._submits[this._submits._length++]=e$f,this._curSubmit._numEle+=6}},e$t.mixRGBandAlpha=function(e$d){return this._mixRGBandAlpha(e$d,this._shader2D.ALPHA)},e$t._mixRGBandAlpha=function(e$d,e$t){var e$l=(4278190080&e$d)>>>24;return 0!=e$l?e$l*=e$t:e$l=255*e$t,16777215&e$d|e$l<<24},e$t.drawTriangles=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){if(!e$d.loaded||!e$d.source)return this.sprite&&e$G.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;e$d.bitmap;var e$b=this._mixRGBandAlpha(4294967295,e$B),e$f=(e$k.length,e$i.length);this._renderKey=-1;var e$J=this._curSubmit=e$Kd.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,e$Ld.create(1,0));return e$J.shaderValue.textureHost=e$d,e$J._renderType=10016,this._submits[this._submits._length++]=e$J,e$A?(e$Z._tmpMatrix.a=e$A.a,e$Z._tmpMatrix.b=e$A.b,e$Z._tmpMatrix.c=e$A.c,e$Z._tmpMatrix.d=e$A.d,e$Z._tmpMatrix.tx=e$A.tx+e$t,e$Z._tmpMatrix.ty=e$A.ty+e$l,e$$.mul(e$Z._tmpMatrix,this._curMat,e$Z._tmpMatrix)):(e$Z._tmpMatrix.a=this._curMat.a,e$Z._tmpMatrix.b=this._curMat.b,e$Z._tmpMatrix.c=this._curMat.c,e$Z._tmpMatrix.d=this._curMat.d,e$Z._tmpMatrix.tx=this._curMat.tx+e$t,e$Z._tmpMatrix.ty=this._curMat.ty+e$l),this._triangleMesh.addData(e$k,e$W,e$i,e$Z._tmpMatrix,e$b,this),this._curSubmit._numEle+=e$f,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},e$t.transform=function(e$d,e$t,e$l,e$k,e$W,e$i){e$O.save(this),e$$.mul(e$$.TEMP.setTo(e$d,e$t,e$l,e$k,e$W,e$i),this._curMat,this._curMat),this._curMat._checkTransform()},e$t.setTransformByMatrix=function(e$d){e$d.copyTo(this._curMat)},e$t.transformByMatrix=function(e$d){e$O.save(this),e$$.mul(e$d,this._curMat,this._curMat),this._curMat._checkTransform()},e$t.rotate=function(e$d){e$O.save(this),this._curMat.rotateEx(e$d)},e$t.scale=function(e$d,e$t){e$O.save(this),this._curMat.scaleEx(e$d,e$t)},e$t.clipRect=function(e$d,e$t,e$l,e$k){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var e$W=e$bd.create(4);this.addRenderObject(e$W);var e$i=this._vb,e$A=e$i._byteLength>>2;if(e$Dd.fillRectImgVb(e$i,null,e$d,e$t,e$l,e$k,e$x.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var e$B=this._curSubmit=e$id.createSubmit(this,this._ib,e$i,(e$i._byteLength-64)/32*3,e$Ld.create(2,0));e$B.shaderValue.ALPHA=1,this._submits[this._submits._length++]=e$B,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var e$o=e$bd.create(5);this.addRenderObject(e$o);var e$I=e$i.getFloat32Array(),e$b=Math.min(Math.min(Math.min(e$I[0+e$A],e$I[4+e$A]),e$I[8+e$A]),e$I[12+e$A]),e$f=Math.max(Math.max(Math.max(e$I[0+e$A],e$I[4+e$A]),e$I[8+e$A]),e$I[12+e$A]),e$J=Math.min(Math.min(Math.min(e$I[1+e$A],e$I[5+e$A]),e$I[9+e$A]),e$I[13+e$A]),e$c=Math.max(Math.max(Math.max(e$I[1+e$A],e$I[5+e$A]),e$I[9+e$A]),e$I[13+e$A]);e$X.save(this,e$o,e$d,e$t,e$l,e$k,e$b,e$J,e$f-e$b,e$c-e$J),this._curSubmit=e$id.RENDERBASE}else{e$l*=this._curMat.a,e$k*=this._curMat.d;var e$Y=e$p.TEMP;this._curMat.transformPoint(e$Y.setTo(e$d,e$t)),e$l<0&&(e$Y.x=e$Y.x+e$l,e$l=-e$l),e$k<0&&(e$Y.y=e$Y.y+e$k,e$k=-e$k),this._renderKey=0;var e$w=this._curSubmit=e$Id.create(this);(this._submits[this._submits._length++]=e$w).submitIndex=this._submits._length,e$w.submitLength=9999999,e$P.save(this,e$w);var e$D=this._clipRect,e$z=e$D.x,e$e=e$D.y,e$g=e$Y.x+e$l,e$H=e$Y.y+e$k;e$z<e$Y.x&&(e$D.x=e$Y.x),e$e<e$Y.y&&(e$D.y=e$Y.y),e$D.width=Math.min(e$g,e$z+e$D.width)-e$D.x,e$D.height=Math.min(e$H,e$e+e$D.height)-e$D.y,this._shader2D.glTexture=null,e$w.clipRect.copyFrom(e$D),this._curSubmit=e$id.RENDERBASE}},e$t.setIBVB=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b){if(void 0===e$o&&(e$o=0),void 0===e$I&&(e$I=0),void 0===e$b&&(e$b=0),null===e$l){if(e$z.isFlash){var e$f=e$k;e$f._selfIB||(e$f._selfIB=e$_d.create(35044)),e$f._selfIB.clear(),e$l=e$f._selfIB}else e$l=this._ib;e$Dd.expandIBQuadrangle(e$l,e$k._byteLength/(4*e$k.vertexStride*4))}if(!e$B||!e$A)throw Error("setIBVB must input:shader shaderValues");var e$J=e$od.create(this,e$k,e$l,e$W,e$A,e$B,e$o,e$I,e$b);e$i||(e$i=e$$.EMPTY),e$i.translate(e$d,e$t),e$$.mul(e$i,this._curMat,e$J._mat),e$i.translate(-e$d,-e$t),this._submits[this._submits._length++]=e$J,this._curSubmit=e$id.RENDERBASE,this._renderKey=0},e$t.addRenderObject=function(e$d){this._submits[this._submits._length++]=e$d},e$t.fillTrangles=function(e$d,e$t,e$l,e$k,e$W){var e$i=this._curSubmit,e$A=this._vb,e$B=this._shader2D,e$o=e$i.shaderValue,e$I=e$k.length>>4,e$b=e$d.bitmap;this._renderKey=0,e$B.glTexture==e$b&&e$B.ALPHA===e$o.ALPHA||((e$i=this._curSubmit=e$id.createSubmit(this,this._ib,e$A,e$A._byteLength/32*3,e$Ld.create(1,0))).shaderValue.textureHost=e$d,this._submits[this._submits._length++]=e$i),e$Dd.fillTranglesVB(e$A,e$t,e$l,e$k,e$W||this._curMat,this._x,this._y),e$i._numEle+=6*e$I},e$t.submitElement=function(e$d,e$t){var e$l=this._submits;for(e$t<0&&(e$t=e$l._length);e$d<e$t;)e$d+=e$l[e$d].renderSubmit()},e$t.finish=function(){e$Hd.mainContext.finish()},e$t.flush=function(){var e$d=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(e$d>this._ib.bufferLength/12&&e$Dd.expandIBQuadrangle(this._ib,e$d),!this._isMain&&e$U.enabled&&e$U._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=e$U._atlasRestore;for(var e$t=this._submits,e$l=0,e$k=e$t._length;e$l<e$k;e$l++){var e$W=e$t[e$l];10016===e$W.getRenderType()&&e$W.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),e$td.instance&&e$td.getInstance().reset();var e$i;for(e$l=0,e$i=this.meshlist.length;e$l<e$i;e$l++){var e$A=this.meshlist[e$l];e$A.canReuse?e$A.releaseMesh():e$A.destroy()}return this.meshlist.length=0,this._curSubmit=e$id.RENDERBASE,this._renderKey=0,this._triangleMesh=e$xd.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},e$t.setPathId=function(e$d){if(this.mId=e$d,-1!=this.mId){this.mHaveKey=!1;var e$t=e$Q.getInstance();e$t.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,e$t.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},e$t.movePath=function(e$d,e$t){var e$l=e$d,e$k=e$t;e$d=this._curMat.a*e$l+this._curMat.c*e$k+this._curMat.tx,e$t=this._curMat.b*e$l+this._curMat.d*e$k+this._curMat.ty,this.mX+=e$d,this.mY+=e$t},e$t.beginPath=function(){var e$d=this._getPath();e$d.tempArray.length=0,e$d.closePath=!1,this.mX=0,this.mY=0},e$t.closePath=function(){this._path.closePath=!0},e$t.fill=function(e$d){void 0===e$d&&(e$d=!1);var e$t=this._getPath();this.drawPoly(0,0,e$t.tempArray,this.fillStyle._color.numColor,0,0,e$d)},e$t.stroke=function(){var e$d=this._getPath();if(0<this.lineWidth){if(-1==this.mId)e$d.drawLine(0,0,e$d.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var e$t=e$Q.getInstance().shapeLineDic[this.mId];e$t.rebuild(e$d.tempArray),e$d.setGeomtry(e$t)}else e$Q.getInstance().addLine(this.mId,e$d.drawLine(0,0,e$d.tempArray,this.lineWidth,this.strokeStyle._color.numColor));e$d.update();var e$l=[this.mX,this.mY],e$k=e$id.createShape(this,e$d.ib,e$d.vb,e$d.count,e$d.offset,e$Ld.create(4,0));e$k.shaderValue.ALPHA=this._shader2D.ALPHA,e$k.shaderValue.u_pos=e$l,e$k.shaderValue.u_mmat2=e$ed.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=e$k,this._renderKey=-1}},e$t.line=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=this._curSubmit,e$B=this._vb;if(e$Dd.fillLineVb(e$B,this._clipRect,e$d,e$t,e$l,e$k,e$W,e$i)){this._renderKey=0;var e$o=this._shader2D,e$I=e$A.shaderValue;e$o.strokeStyle===e$I.strokeStyle&&e$o.ALPHA===e$I.ALPHA||(e$o.glTexture=null,(e$A=this._curSubmit=e$id.createSubmit(this,this._ib,e$B,(e$B._byteLength-64)/32*3,e$Ld.create(2,0))).shaderValue.strokeStyle=e$o.strokeStyle,e$A.shaderValue.mainID=2,e$A.shaderValue.ALPHA=e$o.ALPHA,this._submits[this._submits._length++]=e$A),e$A._numEle+=6}},e$t.moveTo=function(e$d,e$t,e$l){void 0===e$l&&(e$l=!0);var e$k=this._getPath();if(e$l){var e$W=e$d,e$i=e$t;e$d=this._curMat.a*e$W+this._curMat.c*e$i,e$t=this._curMat.b*e$W+this._curMat.d*e$i}e$k.addPoint(e$d,e$t)},e$t.lineTo=function(e$d,e$t,e$l){void 0===e$l&&(e$l=!0);var e$k=this._getPath();if(e$l){var e$W=e$d,e$i=e$t;e$d=this._curMat.a*e$W+this._curMat.c*e$i,e$t=this._curMat.b*e$W+this._curMat.d*e$i}e$k.addPoint(e$d,e$t)},e$t.drawCurves=function(e$d,e$t,e$l){this.setPathId(-1),this.beginPath(),this.strokeStyle=e$l[3],this.lineWidth=e$l[4];var e$k=e$l[2];e$d+=e$l[0],e$t+=e$l[1],this.movePath(e$d,e$t),this.moveTo(e$k[0],e$k[1]);for(var e$W=2,e$i=e$k.length;e$W<e$i;)this.quadraticCurveTo(e$k[e$W++],e$k[e$W++],e$k[e$W++],e$k[e$W++]);this.stroke()},e$t.arcTo=function(e$d,e$t,e$l,e$k,e$W){if(-1==this.mId||!this.mHaveKey){var e$i=0,e$A=0,e$B=0,e$o=this._getPath();this._curMat.copyTo(e$Z._tmpMatrix),e$Z._tmpMatrix.tx=e$Z._tmpMatrix.ty=0,e$Z._tempPoint.setTo(e$o.getEndPointX(),e$o.getEndPointY()),e$Z._tmpMatrix.invertTransformPoint(e$Z._tempPoint);var e$I=e$Z._tempPoint.x-e$d,e$b=e$Z._tempPoint.y-e$t,e$f=Math.sqrt(e$I*e$I+e$b*e$b);if(!(e$f<=1e-6)){var e$J=e$I/e$f,e$c=e$b/e$f,e$Y=e$l-e$d,e$w=e$k-e$t,e$D=e$Y*e$Y+e$w*e$w,e$z=Math.sqrt(e$D);if(!(e$z<=1e-6)){var e$e=e$Y/e$z,e$g=e$w/e$z,e$H=e$J+e$e,e$R=e$c+e$g,e$G=Math.sqrt(e$H*e$H+e$R*e$R);if(!(e$G<=1e-6)){var e$q=e$H/e$G,e$L=e$R/e$G,e$$=Math.acos(e$q*e$J+e$L*e$c),e$p=Math.PI/2-e$$,e$M=(e$f=e$W/Math.tan(e$p))*e$J+e$d,e$T=e$f*e$c+e$t,e$r=Math.sqrt(e$f*e$f+e$W*e$W),e$S=e$d+e$q*e$r,e$j=e$t+e$L*e$r,e$C=0,e$K=0;if(0<=e$J*e$g-e$c*e$e){var e$x=2*e$p/e$Z.SEGNUM;e$C=Math.sin(e$x),e$K=Math.cos(e$x)}else e$x=2*-e$p/e$Z.SEGNUM,e$C=Math.sin(e$x),e$K=Math.cos(e$x);e$A=this._curMat.a*e$M+this._curMat.c*e$T,e$B=this._curMat.b*e$M+this._curMat.d*e$T,e$A==this._path.getEndPointX()&&e$B==this._path.getEndPointY()||e$o.addPoint(e$A,e$B);var e$n=e$M-e$S,e$Q=e$T-e$j;for(e$i=0;e$i<e$Z.SEGNUM;e$i++){var e$y=e$n*e$K+e$Q*e$C,e$V=-e$n*e$C+e$Q*e$K;e$A=e$y+e$S,e$B=e$V+e$j,e$d=this._curMat.a*e$A+this._curMat.c*e$B,e$B=e$t=this._curMat.b*e$A+this._curMat.d*e$B,(e$A=e$d)==this._path.getEndPointX()&&e$B==this._path.getEndPointY()||e$o.addPoint(e$A,e$B),e$n=e$y,e$Q=e$V}}}}}},e$t.arc=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){if(void 0===e$i&&(e$i=!1),void 0===e$A&&(e$A=!0),-1!=this.mId){var e$B=e$Q.getInstance().shapeDic[this.mId];if(e$B&&this.mHaveKey&&!e$B.needUpdate(this._curMat))return;e$t=e$d=0}var e$o,e$I=0,e$b=0,e$f=0,e$J=0,e$c=0,e$Y=0,e$w=0;if(e$b=e$W-e$k,e$i)if(Math.abs(e$b)>=2*Math.PI)e$b=2*-Math.PI;else for(;0<e$b;)e$b-=2*Math.PI;else if(Math.abs(e$b)>=2*Math.PI)e$b=2*Math.PI;else for(;e$b<0;)e$b+=2*Math.PI;e$o=e$b/(e$w=e$l<101?Math.max(10,e$b*e$l/5):e$l<201?Math.max(10,e$b*e$l/20):Math.max(10,e$b*e$l/40))/2,e$f=Math.abs(4/3*(1-Math.cos(e$o))/Math.sin(e$o)),e$i&&(e$f=-e$f);var e$D=this._getPath(),e$z=NaN,e$e=NaN;for(e$Y=0;e$Y<=e$w;e$Y++)e$I=e$k+e$b*(e$Y/e$w),e$J=e$d+Math.cos(e$I)*e$l,e$c=e$t+Math.sin(e$I)*e$l,e$A&&(e$z=e$J,e$e=e$c,e$J=this._curMat.a*e$z+this._curMat.c*e$e,e$c=this._curMat.b*e$z+this._curMat.d*e$e),e$J==this._path.getEndPointX()&&e$c==this._path.getEndPointY()||e$D.addPoint(e$J,e$c);e$J=e$d+Math.cos(e$W)*e$l,e$c=e$t+Math.sin(e$W)*e$l,e$A&&(e$z=e$J,e$e=e$c,e$J=this._curMat.a*e$z+this._curMat.c*e$e,e$c=this._curMat.b*e$z+this._curMat.d*e$e),e$J==this._path.getEndPointX()&&e$c==this._path.getEndPointY()||e$D.addPoint(e$J,e$c)},e$t.quadraticCurveTo=function(e$d,e$t,e$l,e$k){var e$W=e$f.I,e$i=e$l,e$A=e$k;e$l=this._curMat.a*e$i+this._curMat.c*e$A,e$k=this._curMat.b*e$i+this._curMat.d*e$A,e$i=e$d,e$A=e$t,e$d=this._curMat.a*e$i+this._curMat.c*e$A,e$t=this._curMat.b*e$i+this._curMat.d*e$A;for(var e$B=e$W.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),e$d,e$t,e$l,e$k],30,2),e$o=0,e$I=e$B.length/2;e$o<e$I;e$o++)this.lineTo(e$B[2*e$o],e$B[2*e$o+1],!1);this.lineTo(e$l,e$k,!1)},e$t.rect=function(e$d,e$t,e$l,e$k){this._other=this._other.make(),this._other.path||(this._other.path=new e$h),this._other.path.rect(e$d,e$t,e$l,e$k)},e$t.strokeRect=function(e$d,e$t,e$l,e$k,e$W){var e$i=.5*e$W;this.line(e$d-e$i,e$t,e$d+e$l+e$i,e$t,e$W,this._curMat),this.line(e$d+e$l,e$t,e$d+e$l,e$t+e$k,e$W,this._curMat),this.line(e$d,e$t,e$d,e$t+e$k,e$W,this._curMat),this.line(e$d-e$i,e$t+e$k,e$d+e$l+e$i,e$t+e$k,e$W,this._curMat)},e$t.clip=function(){},e$t.drawPoly=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){void 0===e$A&&(e$A=!1),this._renderKey=0,this._shader2D.glTexture=null;var e$B=this._getPath();if(-1==this.mId)e$B.polygon(e$d,e$t,e$l,e$k,e$W||1,e$i);else if(this.mHaveKey){var e$o=e$Q.getInstance().shapeDic[this.mId];e$o.setMatrix(this._curMat),e$o.rebuild(e$B.tempArray),e$B.setGeomtry(e$o)}else{var e$I=e$B.polygon(e$d,e$t,e$l,e$k,e$W||1,e$i);e$Q.getInstance().addShape(this.mId,e$I),e$I.setMatrix(this._curMat)}e$B.update();var e$b,e$f=[this.mX,this.mY];if((e$b=e$id.createShape(this,e$B.ib,e$B.vb,e$B.count,e$B.offset,e$Ld.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,e$b.shaderValue.u_pos=e$f,e$b.shaderValue.u_mmat2=e$ed.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=e$b,0<e$W){if(this.mHaveLineKey){var e$J=e$Q.getInstance().shapeLineDic[this.mId];e$J.rebuild(e$B.tempArray),e$B.setGeomtry(e$J)}else e$Q.getInstance().addShape(this.mId,e$B.drawLine(e$d,e$t,e$l,e$W,e$i));e$B.update(),(e$b=e$id.createShape(this,e$B.ib,e$B.vb,e$B.count,e$B.offset,e$Ld.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,e$b.shaderValue.u_mmat2=e$ed.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=e$b}},e$t.drawParticle=function(e$d,e$t,e$l){e$l.x=e$d,e$l.y=e$t,this._submits[this._submits._length++]=e$l},e$t._getPath=function(){return this._path||(this._path=new e$h)},e$k(0,e$t,"globalCompositeOperation",function(){return e$N.NAMES[this._nBlendType]},function(e$d){var e$t=e$N.TOINT[e$d];null==e$t||this._nBlendType===e$t||(e$s.save(this,65536,this,!0),this._curSubmit=e$id.RENDERBASE,this._renderKey=0,this._nBlendType=e$t)}),e$k(0,e$t,"strokeStyle",function(){return this._shader2D.strokeStyle},function(e$d){this._shader2D.strokeStyle.equal(e$d)||(e$s.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=e$u.create(e$d))}),e$k(0,e$t,"globalAlpha",function(){return this._shader2D.ALPHA},function(e$d){(e$d=Math.floor(1e3*e$d)/1e3)!=this._shader2D.ALPHA&&(e$s.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=e$d)}),e$k(0,e$t,"asBitmap",null,function(e$d){if(e$d){if(this._targets||(this._targets=new e$a),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),e$k(0,e$t,"fillStyle",function(){return this._shader2D.fillStyle},function(e$d){this._shader2D.fillStyle.equal(e$d)||(e$s.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=e$u.create(e$d))}),e$k(0,e$t,"textAlign",function(){return this._other.textAlign},function(e$d){this._other.textAlign===e$d||(this._other=this._other.make(),e$s.save(this,32768,this._other,!1),this._other.textAlign=e$d)}),e$k(0,e$t,"lineWidth",function(){return this._other.lineWidth},function(e$d){this._other.lineWidth===e$d||(this._other=this._other.make(),e$s.save(this,256,this._other,!1),this._other.lineWidth=e$d)}),e$k(0,e$t,"textBaseline",function(){return this._other.textBaseline},function(e$d){this._other.textBaseline===e$d||(this._other=this._other.make(),e$s.save(this,16384,this._other,!1),this._other.textBaseline=e$d)}),e$k(0,e$t,"font",null,function(e$d){e$d!=this._other.font.toString()&&(this._other=this._other.make(),e$s.save(this,8,this._other,!1),this._other.font===e$Yd.EMPTY?this._other.font=new e$Yd(e$d):this._other.font.setFont(e$d))}),e$Z.__init__=function(){e$l.DEFAULT=new e$l},e$Z._tempPoint=new e$p,e$Z._SUBMITVBSIZE=32e3,e$Z._MAXSIZE=99999999,e$Z._RECTVBSIZE=16,e$Z.MAXCLIPRECT=new e$M(0,0,99999999,99999999),e$Z._COUNT=0,e$Z._tmpMatrix=new e$$,e$Z.SEGNUM=32,e$Z._contextcount=0,e$A(e$Z,["_fontTemp",function(){return this._fontTemp=new e$Yd},"_drawStyleTemp",function(){return this._drawStyleTemp=new e$u(null)}]),e$Z.__init$=function(){e$l=function(){function e$d(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=e$Yd.EMPTY}e$J(e$d,"");var e$t=e$d.prototype;return e$t.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=e$Yd.EMPTY},e$t.make=function(){return this===e$d.DEFAULT?new e$d:this},e$d.DEFAULT=null,e$d}()},e$Z}(),e$Ld=function(e$d){function e$k(e$d,e$t){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,e$k.__super.call(this),this.defines=new e$Td,this.position=e$k._POSITION,this.mainID=e$d,this.subID=e$t,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=e$d|e$t,this._inClassCache=e$k._cache[this._cacheID],0<e$d&&!this._inClassCache&&(this._inClassCache=e$k._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}e$J(e$k,"laya.webgl.shader.d2.value.Value2D",e$V);var e$t=e$k.prototype;return e$t.setValue=function(e$d){},e$t.refresh=function(){var e$d=this.size;return e$d[0]=e$ed.width,e$d[1]=e$ed.height,this.alpha=this.ALPHA*e$ed.worldAlpha,this.mmat=e$ed.worldMatrix4,this},e$t._ShaderWithCompile=function(){return e$md.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,e$ad.create)},e$t._withWorldShaderDefines=function(){var e$d=e$ed.worldShaderDefines,e$t=e$md.sharders[this.mainID|this.defines._value|e$d.getValue()];if(!e$t){var e$l,e$k={};for(e$l in this.defines.toNameDic())e$k[e$l]="";for(e$l in e$d.toNameDic())e$k[e$l]="";e$t=e$md.withCompile2D(0,this.mainID,e$k,this.mainID|this.defines._value|e$d.getValue(),e$ad.create)}var e$W=e$ed.worldFilters;if(!e$W)return e$t;for(var e$i,e$A=e$W.length,e$B=0;e$B<e$A;e$B++)(e$i=e$W[e$B])&&e$i.action.setValue(this);return e$t},e$t.upload=function(){var e$d=e$ed;this.alpha=this.ALPHA*e$d.worldAlpha,e$ed.worldMatrix4!==e$ed.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),e$Hd.shaderHighPrecision&&this.defines.add(1024);var e$t,e$l=e$d.worldShaderDefines?this._withWorldShaderDefines():e$md.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=e$d.width,this.size[1]=e$d.height,this.mmat=e$d.worldMatrix4,e$nd.activeShader!==e$l?e$l._shaderValueWidth!==e$d.width||e$l._shaderValueHeight!==e$d.height?(e$l._shaderValueWidth=e$d.width,e$l._shaderValueHeight=e$d.height):e$t=e$l._params2dQuick2||e$l._make2dQuick2():e$l._shaderValueWidth!==e$d.width||e$l._shaderValueHeight!==e$d.height?(e$l._shaderValueWidth=e$d.width,e$l._shaderValueHeight=e$d.height):e$t=e$l._params2dQuick1||e$l._make2dQuick1(),e$l.upload(this,e$t)},e$t.setFilters=function(e$d){if(this.filters=e$d)for(var e$t,e$l=e$d.length,e$k=0;e$k<e$l;e$k++)(e$t=e$d[e$k])&&(this.defines.add(e$t.type),e$t.action.setValue(this))},e$t.clear=function(){this.defines.setValue(this.subID)},e$t.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},e$k._initone=function(e$d,e$t){e$k._typeClass[e$d]=e$t,e$k._cache[e$d]=[],e$k._cache[e$d]._length=0},e$k.__init__=function(){e$k._POSITION=[2,5126,!1,4*e$wd.BYTES_PE,0],e$k._TEXCOORD=[2,5126,!1,4*e$wd.BYTES_PE,2*e$wd.BYTES_PE],e$k._initone(2,e$Zd),e$k._initone(4,e$Nd),e$k._initone(256,e$Ud),e$k._initone(512,e$Vd),e$k._initone(1,e$Ed),e$k._initone(65,e$Fd),e$k._initone(9,e$Ed)},e$k.create=function(e$d,e$t){var e$l=e$k._cache[e$d|e$t];return e$l._length?e$l[--e$l._length]:new e$k._typeClass[e$d|e$t](e$t)},e$k._POSITION=null,e$k._TEXCOORD=null,e$k._cache=[],e$k._typeClass=[],e$k.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e$k}(),e$$d=function(e$d){function e$D(e$d,e$t){e$D.__super.call(this,e$d,e$t)}e$J(e$D,"laya.webgl.utils.RenderSprite3D",e$e);var e$t=e$D.prototype;return e$t.onCreate=function(e$d){switch(e$d){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},e$t._mask=function(e$d,e$t,e$l,e$k){var e$W,e$i,e$A=this._next,e$B=e$d.mask;if(e$B){e$t.ctx.save();var e$o=e$t.ctx.globalCompositeOperation,e$I=new e$M;if(e$I.copyFrom(e$B.getBounds()),e$I.width=Math.round(e$I.width),e$I.height=Math.round(e$I.height),e$I.x=Math.round(e$I.x),e$I.y=Math.round(e$I.y),0<e$I.width&&0<e$I.height){var e$b=e$d._style._tf,e$f=e$Bd.create();e$f.addValue("bounds",e$I),e$W=e$Ad.create([e$f,e$t],laya.webgl.utils.RenderSprite3D.tmpTarget),e$t.addRenderObject(e$W),e$B.render(e$t,-e$I.x,-e$I.y),e$W=e$Ad.create([e$f],laya.webgl.utils.RenderSprite3D.endTmpTarget),e$t.addRenderObject(e$W),e$t.ctx.save(),e$t.clipRect(e$l-e$b.translateX+e$I.x,e$k-e$b.translateY+e$I.y,e$I.width,e$I.height),e$A._fun.call(e$A,e$d,e$t,e$l,e$k),e$t.ctx.restore(),e$i=e$bd.create(6),e$o=e$t.ctx.globalCompositeOperation,e$i.blendMode="mask",e$t.addRenderObject(e$i),e$$.TEMP.identity();var e$J=e$Ld.create(1,0),e$c=e$x.INV_UV,e$Y=e$I.width,e$w=e$I.height;(e$I.width<32||e$I.height<32)&&((e$c=e$D.tempUV)[0]=0,e$c[1]=0,e$c[2]=32<=e$I.width?1:e$I.width/32,e$c[3]=0,e$c[4]=32<=e$I.width?1:e$I.width/32,e$c[5]=32<=e$I.height?1:e$I.height/32,e$c[6]=0,e$c[7]=32<=e$I.height?1:e$I.height/32,e$I.width=32<=e$I.width?e$I.width:32,e$I.height=32<=e$I.height?e$I.height:32,e$c[1]*=-1,e$c[3]*=-1,e$c[5]*=-1,e$c[7]*=-1,e$c[1]+=1,e$c[3]+=1,e$c[5]+=1,e$c[7]+=1),e$t.ctx.drawTarget(e$f,e$l+e$I.x-e$b.translateX,e$k+e$I.y-e$b.translateY,e$Y,e$w,e$$.TEMP,"tmpTarget",e$J,e$c,6),e$W=e$Ad.create([e$f],laya.webgl.utils.RenderSprite3D.recycleTarget),e$t.addRenderObject(e$W),(e$i=e$bd.create(6)).blendMode=e$o,e$t.addRenderObject(e$i)}e$t.ctx.restore()}else e$A._fun.call(e$A,e$d,e$t,e$l,e$k)},e$t._blend=function(e$d,e$t,e$l,e$k){var e$W=e$d._style,e$i=this._next;e$W.blendMode?(e$t.ctx.save(),e$t.ctx.globalCompositeOperation=e$W.blendMode,e$i._fun.call(e$i,e$d,e$t,e$l,e$k),e$t.ctx.restore()):e$i._fun.call(e$i,e$d,e$t,e$l,e$k)},e$t._transform=function(e$d,e$t,e$l,e$k){var e$W=e$d.transform,e$i=this._next;if(e$W&&e$i!=e$e.NORENDER){var e$A=e$t.ctx;e$d._style;e$W.tx=e$l,e$W.ty=e$k;var e$B=e$A._getTransformMatrix(),e$o=e$B.clone();e$$.mul(e$W,e$B,e$B),e$B._checkTransform(),e$W.tx=e$W.ty=0,e$i._fun.call(e$i,e$d,e$t,0,0),e$o.copyTo(e$B),e$o.destroy()}else e$i._fun.call(e$i,e$d,e$t,e$l,e$k)},e$D.tmpTarget=function(e$d,e$t){var e$l=e$d.getValue("bounds"),e$k=e$Qd.create(e$l.width,e$l.height);e$k.start(),e$k.clear(0,0,0,0),e$d.addValue("tmpTarget",e$k)},e$D.endTmpTarget=function(e$d){e$d.getValue("tmpTarget").end()},e$D.recycleTarget=function(e$d){e$d.getValue("tmpTarget").recycle(),e$d.recycle()},e$A(e$D,["tempUV",function(){return this.tempUV=new Array(8)}]),e$D}(),e$pd=function(e$d){function e$t(){this.data=null,e$t.__super.call(this)}e$J(e$t,"laya.filters.webgl.ColorFilterActionGL",e$y);var e$l=e$t.prototype;return e$G.imps(e$l,{"laya.filters.IFilterActionGL":!0}),e$l.setValue=function(e$d){e$d.colorMat=this.data._mat,e$d.colorAlpha=this.data._alpha},e$l.apply3d=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$d.getValue("bounds"),e$A=e$Ld.create(1,0);e$A.setFilters([this.data]);var e$B=e$$.TEMP;e$B.identity(),e$l.ctx.drawTarget(e$d,0,0,e$i.width,e$i.height,e$B,"src",e$A)},e$t}(),e$Md=function(e$d){function e$i(e$d,e$t,e$l,e$k,e$W){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,e$i.__super.call(this,e$d,e$t,e$W),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new e$ud,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=e$l,this._atlasCanvas.height=e$k,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}e$J(e$i,"laya.webgl.atlas.Atlaser",e$Z);var e$t=e$i.prototype;return e$t.computeUVinAtlasTexture=function(e$d,e$t,e$l,e$k){var e$W=e$U.atlasTextureWidth,e$i=e$U.atlasTextureHeight,e$A=e$l/e$W,e$B=e$k/e$i,e$o=(e$l+e$d.bitmap.width)/e$W,e$I=(e$k+e$d.bitmap.height)/e$i,e$b=e$d.bitmap.width/e$W,e$f=e$d.bitmap.height/e$i;e$d.uv=[e$A+e$t[0]*e$b,e$B+e$t[1]*e$f,e$o-(1-e$t[2])*e$b,e$B+e$t[3]*e$f,e$o-(1-e$t[4])*e$b,e$I-(1-e$t[5])*e$f,e$A+e$t[6]*e$b,e$I-(1-e$t[7])*e$f]},e$t.findBitmapIsExist=function(e$d){if(e$d instanceof laya.webgl.resource.WebGLImage){var e$t=e$d,e$l=e$t.url,e$k=this._InAtlasWebGLImagesKey[e$l||e$t.id];if(e$k)return e$k.offsetInfoID}return-1},e$t.addToAtlasTexture=function(e$d,e$t,e$l){if(e$d instanceof laya.webgl.resource.WebGLImage){var e$k=e$d,e$W=e$k.url;this._InAtlasWebGLImagesKey[e$W||e$k.id]={bitmap:e$d,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([e$t,e$l])}this._atlasCanvas.texSubImage2D(e$t,e$l,e$d.atlasSource),e$d.clearAtlasSource()},e$t.addToAtlas=function(e$d,e$t,e$l){e$d._atlasID=this._inAtlasTextureKey.length;var e$k=e$d.uv.slice(),e$W=e$d.bitmap;this._inAtlasTextureKey.push(e$d),this._inAtlasTextureOriUVValue.push(e$k),this._inAtlasTextureBitmapValue.push(e$W),this.computeUVinAtlasTexture(e$d,e$k,e$t,e$l),e$d.bitmap=this._atlasCanvas},e$t.clear=function(){for(var e$d=0,e$t=this._inAtlasTextureKey.length;e$d<e$t;e$d++)this._inAtlasTextureKey[e$d].bitmap=this._inAtlasTextureBitmapValue[e$d],this._inAtlasTextureKey[e$d].uv=this._inAtlasTextureOriUVValue[e$d],this._inAtlasTextureKey[e$d]._atlasID=-1,this._inAtlasTextureKey[e$d].bitmap.lock=!1,this._inAtlasTextureKey[e$d].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},e$t.dispose=function(){this.clear(),this._atlasCanvas.destroy()},e$k(0,e$t,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),e$k(0,e$t,"texture",function(){return this._atlasCanvas}),e$k(0,e$t,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),e$i}(),e$Td=function(e$d){function e$l(){e$l.__super.call(this,e$l.__name2int,e$l.__int2name,e$l.__int2nameMap)}return e$J(e$l,"laya.webgl.shader.d2.ShaderDefines2D",e$v),e$l.__init__=function(){e$l.reg("TEXTURE2D",1),e$l.reg("COLOR2D",2),e$l.reg("PRIMITIVE",4),e$l.reg("GLOW_FILTER",8),e$l.reg("BLUR_FILTER",16),e$l.reg("COLOR_FILTER",32),e$l.reg("COLOR_ADD",64),e$l.reg("WORLDMAT",128),e$l.reg("FILLTEXTURE",256),e$l.reg("FSHIGHPRECISION",1024),e$l.reg("TXTALPHA",2048),e$l.reg("TXTCOMPRESS",4096)},e$l.reg=function(e$d,e$t){e$v._reg(e$d,e$t,e$l.__name2int,e$l.__int2name)},e$l.toText=function(e$d,e$t,e$l){return e$v._toText(e$d,e$t,e$l)},e$l.toInt=function(e$d){return e$v._toInt(e$d,e$l.__name2int)},e$l.TEXTURE2D=1,e$l.COLOR2D=2,e$l.PRIMITIVE=4,e$l.FILTERGLOW=8,e$l.FILTERBLUR=16,e$l.FILTERCOLOR=32,e$l.COLORADD=64,e$l.WORLDMAT=128,e$l.FILLTEXTURE=256,e$l.SKINMESH=512,e$l.SHADERDEFINE_FSHIGHPRECISION=1024,e$l.TXTALPHA=2048,e$l.TXTCOMPRESS=4096,e$l.__name2int={},e$l.__int2name=[],e$l.__int2nameMap=[],e$l}(),e$rd=(function(e$d){function e$B(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$B.__super.call(this,e$d,e$t,e$l,e$k,40,e$W,e$i,e$A)}e$J(e$B,"laya.webgl.shapes.Ellipse",e$ld)}(),function(e$d){function e$i(e$d,e$t,e$l,e$k,e$W){this._points=[],this.rebuild(e$l),e$i.__super.call(this,e$d,e$t,0,0,0,e$W,e$k,e$W,0)}e$J(e$i,"laya.webgl.shapes.Line",e$ld);var e$t=e$i.prototype;return e$t.rebuild=function(e$d){var e$t=e$d.length;e$t!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(e$t/2-1)),this.mFloat32Array=new Float32Array(5*e$t)),this._points.length=0;for(var e$l=NaN,e$k=NaN,e$W=-1,e$i=-1,e$A=e$d.length/2,e$B=0;e$B<e$A;e$B++)e$l=e$d[2*e$B],e$k=e$d[2*e$B+1],(.01<Math.abs(e$W-e$l)||.01<Math.abs(e$i-e$k))&&this._points.push(e$l,e$k),e$W=e$l,e$i=e$k},e$t.getData=function(e$d,e$t,e$l){var e$k=[],e$W=[];0<this.borderWidth&&this.createLine2(this._points,e$k,this.borderWidth,e$l,e$W,this._points.length/2),this.mUint16Array.set(e$k,0),this.mFloat32Array.set(e$W,0),e$d.append(this.mUint16Array),e$t.append(this.mFloat32Array)},e$i}()),e$Sd=function(e$d){function e$f(e$d,e$t,e$l,e$k,e$W){this._points=[];for(var e$i=NaN,e$A=NaN,e$B=-1,e$o=-1,e$I=e$l.length/2-1,e$b=0;e$b<e$I;e$b++)e$i=e$l[2*e$b],e$A=e$l[2*e$b+1],(.01<Math.abs(e$B-e$i)||.01<Math.abs(e$o-e$A))&&this._points.push(e$i,e$A),e$B=e$i,e$o=e$A;e$i=e$l[2*e$I],e$A=e$l[2*e$I+1],e$B=this._points[0],e$o=this._points[1],(.01<Math.abs(e$B-e$i)||.01<Math.abs(e$o-e$A))&&this._points.push(e$i,e$A),e$f.__super.call(this,e$d,e$t,0,0,this._points.length/2,0,e$k,e$W)}e$J(e$f,"laya.webgl.shapes.LoopLine",e$ld);var e$t=e$f.prototype;return e$t.getData=function(e$d,e$t,e$l){if(0<this.borderWidth){for(var e$k=this.color,e$W=(e$k>>16&255)/255,e$i=(e$k>>8&255)/255,e$A=(255&e$k)/255,e$B=[],e$o=0,e$I=0,e$b=[],e$f=Math.floor(this._points.length/2),e$J=0;e$J<e$f;e$J++)e$o=this._points[2*e$J],e$I=this._points[2*e$J+1],e$B.push(this.x+e$o,this.y+e$I,e$W,e$i,e$A);this.createLoopLine(e$B,e$b,this.borderWidth,e$l+e$B.length/5),e$d.append(new Uint16Array(e$b)),e$t.append(new Float32Array(e$B))}},e$t.createLoopLine=function(e$d,e$t,e$l,e$k,e$W,e$i){e$d.length;var e$A=e$d.concat(),e$B=e$W||e$d,e$o=this.borderColor,e$I=(e$o>>16&255)/255,e$b=(e$o>>8&255)/255,e$f=(255&e$o)/255,e$J=[e$A[0],e$A[1]],e$c=[e$A[e$A.length-5],e$A[e$A.length-4]],e$Y=e$c[0]+.5*(e$J[0]-e$c[0]),e$w=e$c[1]+.5*(e$J[1]-e$c[1]);e$A.unshift(e$Y,e$w,0,0,0),e$A.push(e$Y,e$w,0,0,0);var e$D,e$z,e$e,e$g,e$H,e$R,e$G,e$q,e$L,e$$,e$p,e$M,e$T,e$r,e$S,e$j,e$C,e$K,e$x,e$n,e$Q=e$A.length/5,e$y=e$k,e$V=e$l/2;e$e=e$A[0],e$g=e$A[1],e$$=e$e-(e$H=e$A[5]),e$L=(e$L=-(e$g-(e$R=e$A[6])))/(e$n=Math.sqrt(e$L*e$L+e$$*e$$))*e$V,e$$=e$$/e$n*e$V,e$B.push(e$e-e$L,e$g-e$$,e$I,e$b,e$f,e$e+e$L,e$g+e$$,e$I,e$b,e$f);for(var e$Z=1;e$Z<e$Q-1;e$Z++)e$e=e$A[5*(e$Z-1)],e$g=e$A[5*(e$Z-1)+1],e$H=e$A[5*e$Z],e$R=e$A[5*e$Z+1],e$G=e$A[5*(e$Z+1)],e$q=e$A[5*(e$Z+1)+1],e$$=e$e-e$H,e$M=e$H-e$G,e$S=(-(e$L=(e$L=-(e$g-e$R))/(e$n=Math.sqrt(e$L*e$L+e$$*e$$))*e$V)+e$e)*(-(e$$=e$$/e$n*e$V)+e$R)-(-e$L+e$H)*(-e$$+e$g),e$K=(-(e$p=(e$p=-(e$R-e$q))/(e$n=Math.sqrt(e$p*e$p+e$M*e$M))*e$V)+e$G)*(-(e$M=e$M/e$n*e$V)+e$R)-(-e$p+e$H)*(-e$M+e$q),e$x=(e$T=-e$$+e$g-(-e$$+e$R))*(e$C=-e$p+e$H-(-e$p+e$G))-(e$j=-e$M+e$q-(-e$M+e$R))*(e$r=-e$L+e$H-(-e$L+e$e)),Math.abs(e$x)<.1?(e$x+=10.1,e$B.push(e$H-e$L,e$R-e$$,e$I,e$b,e$f,e$H+e$L,e$R+e$$,e$I,e$b,e$f)):(((e$D=(e$r*e$K-e$C*e$S)/e$x)-e$H)*(e$D-e$H)+((e$z=(e$j*e$S-e$T*e$K)/e$x)-e$R)+(e$z-e$R),e$B.push(e$D,e$z,e$I,e$b,e$f,e$H-(e$D-e$H),e$R-(e$z-e$R),e$I,e$b,e$f));e$i&&(e$t=e$i);var e$U=this.edges+1;for(e$Z=1;e$Z<e$U;e$Z++)e$t.push(e$y+2*(e$Z-1),e$y+2*(e$Z-1)+1,e$y+2*e$Z+1,e$y+2*e$Z+1,e$y+2*e$Z,e$y+2*(e$Z-1));return e$t.push(e$y+2*(e$Z-1),e$y+2*(e$Z-1)+1,e$y+1,e$y+1,e$y,e$y+2*(e$Z-1)),e$B},e$f}(),e$jd=function(e$d){function e$A(e$d,e$t,e$l,e$k,e$W,e$i){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=e$$.create(),this._points=e$l.slice(0,e$l.length),e$A.__super.call(this,e$d,e$t,0,0,this._points.length/2,e$k,e$W,e$i)}e$J(e$A,"laya.webgl.shapes.Polygon",e$ld);var e$t=e$A.prototype;return e$t.rebuild=function(e$d){this._repaint||(this._points.length=0,this._points=this._points.concat(e$d))},e$t.setMatrix=function(e$d){e$d.copyTo(this._mat)},e$t.needUpdate=function(e$d){return this._repaint=this._mat.a==e$d.a&&this._mat.b==e$d.b&&this._mat.c==e$d.c&&this._mat.d==e$d.d&&this._mat.tx==e$d.tx&&this._mat.ty==e$d.ty,!this._repaint},e$t.getData=function(e$d,e$t,e$l){var e$k,e$W=0,e$i=this._points,e$A=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=e$l){for(this._start=e$l,e$k=[],e$A=this.earcutTriangles.length,e$W=0;e$W<e$A;e$W++)e$k.push(this.earcutTriangles[e$W]+e$l);this.mUint16Array=new Uint16Array(e$k)}}else{this._start=e$l,e$k=[];var e$B=[],e$o=[],e$I=this.color,e$b=(e$I>>16&255)/255,e$f=(e$I>>8&255)/255,e$J=(255&e$I)/255;for(e$A=Math.floor(e$i.length/2),e$W=0;e$W<e$A;e$W++)e$B.push(this.x+e$i[2*e$W],this.y+e$i[2*e$W+1],e$b,e$f,e$J),e$o.push(this.x+e$i[2*e$W],this.y+e$i[2*e$W+1]);for(this.earcutTriangles=e$kd.earcut(e$o,null,2),e$A=this.earcutTriangles.length,e$W=0;e$W<e$A;e$W++)e$k.push(this.earcutTriangles[e$W]+e$l);this.mUint16Array=new Uint16Array(e$k),this.mFloat32Array=new Float32Array(e$B)}e$d.append(this.mUint16Array),e$t.append(this.mFloat32Array)},e$A}(),e$Cd=function(e$d){function e$i(){this._matrix=new e$$,this._matrix4=e$wd.defaultMatrix4.concat(),e$i.__super.call(this,1e4),this.shaderValue=new e$Ld(0,0)}e$J(e$i,"laya.webgl.submit.SubmitCanvas",e$id);var e$t=e$i.prototype;return e$t.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var e$d=e$ed.worldAlpha,e$t=e$ed.worldMatrix4,e$l=e$ed.worldMatrix,e$k=e$ed.worldFilters,e$W=e$ed.worldShaderDefines,e$i=this.shaderValue,e$A=this._matrix,e$B=this._matrix4,e$o=e$$.TEMP;return e$$.mul(e$A,e$l,e$o),e$B[0]=e$o.a,e$B[1]=e$o.b,e$B[4]=e$o.c,e$B[5]=e$o.d,e$B[12]=e$o.tx,e$B[13]=e$o.ty,e$ed.worldMatrix=e$o.clone(),e$ed.worldMatrix4=e$B,e$ed.worldAlpha=e$ed.worldAlpha*e$i.alpha,e$i.filters&&e$i.filters.length&&(e$ed.worldFilters=e$i.filters,e$ed.worldShaderDefines=e$i.defines),this._ctx_src.flush(),e$ed.worldAlpha=e$d,e$ed.worldMatrix4=e$t,e$ed.worldMatrix.destroy(),e$ed.worldMatrix=e$l,e$ed.worldFilters=e$k,e$ed.worldShaderDefines=e$W,1},e$t.releaseRender=function(){var e$d=e$i._cache;this._ctx_src=null,e$d[e$d._length++]=this},e$t.getRenderType=function(){return 10003},e$i.create=function(e$d,e$t,e$l){var e$k=e$i._cache._length?e$i._cache[--e$i._cache._length]:new e$i;e$k._ctx_src=e$d;var e$W=e$k.shaderValue;return e$W.alpha=e$t,e$W.defines.setValue(0),e$l&&e$l.length&&e$W.setFilters(e$l),e$k},e$i._cache=((e$i._cache=[])._length=0,e$i._cache),e$i}(),e$Kd=function(e$d){function e$I(e$d){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===e$d&&(e$d=1e4),e$I.__super.call(this,e$d)}e$J(e$I,"laya.webgl.submit.SubmitTexture",e$id);var e$t=e$I.prototype;return e$t.releaseRender=function(){var e$d=e$I._cache;(e$d[e$d._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},e$t.addTexture=function(e$d,e$t){this._texsID[this._texs.length]=e$d._uvID,this._texs.push(e$d),this._vbPos.push(e$t)},e$t.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var e$d=this.shaderValue.textureHost.bitmap;if(null!==e$d)for(var e$t=this._vb.getFloat32Array(),e$l=0,e$k=this._texs.length;e$l<e$k;e$l++){var e$W=this._texs[e$l];e$W.active();var e$i=e$W.uv;if(this._texsID[e$l]!==e$W._uvID){this._texsID[e$l]=e$W._uvID;var e$A=this._vbPos[e$l];e$t[e$A+2]=e$i[0],e$t[e$A+3]=e$i[1],e$t[e$A+6]=e$i[2],e$t[e$A+7]=e$i[3],e$t[e$A+10]=e$i[4],e$t[e$A+11]=e$i[5],e$t[e$A+14]=e$i[6],e$t[e$A+15]=e$i[7],this._vb.setNeedUpload()}e$W.bitmap!==e$d&&(this._isSameTexture=!1)}}},e$t.renderSubmit=function(){if(0===this._numEle)return e$I._shaderSet=!1,1;var e$d=this.shaderValue.textureHost;if(e$d){var e$t=e$d.source;if(!e$d.bitmap||!e$t)return e$I._shaderSet=!1,1;this.shaderValue.texture=e$t,e$d.alphaTexture&&e$d.alphaTexture.source&&(this.shaderValue.texture1=e$d.alphaTexture.source)}this._vb.bind_upload(this._ib);var e$l=e$Hd.mainContext;if(e$N.activeBlendFunction!==this._blendFn&&(e$l.enable(3042),this._blendFn(e$l),e$N.activeBlendFunction=this._blendFn),e$S.drawCall++,e$S.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&e$nd.activeShader&&e$I._shaderSet?(e$nd.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&e$nd.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),e$I._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var e$k=e$d.bitmap,e$W=0,e$i=e$nd.activeShader,e$A=0,e$B=this._texs.length;e$A<e$B;e$A++){var e$o=this._texs[e$A];e$o.bitmap===e$k&&e$A+1!==e$B||(e$i.uploadTexture2D(e$o.source),e$l.drawElements(4,6*(e$A-e$W+1),5123,this._startIdx+6*e$W*e$wd.BYTES_PIDX),e$k=e$o.bitmap,e$W=e$A)}else e$l.drawElements(4,this._numEle,5123,this._startIdx);return 1},e$I.create=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$I._cache._length?e$I._cache[--e$I._cache._length]:new e$I;null==e$l&&((e$l=e$i._selfVb||(e$i._selfVb=e$vd.create(-1))).clear(),e$k=0),e$i._ib=e$t,e$i._vb=e$l,e$i._startIdx=e$k*e$wd.BYTES_PIDX,e$i._numEle=0;var e$A=e$d._nBlendType;e$i._blendFn=e$d._targets?e$N.targetFns[e$A]:e$N.fns[e$A],e$i.shaderValue=e$W,e$i.shaderValue.setValue(e$d._shader2D);var e$B=e$d._shader2D.filters;return e$B&&e$i.shaderValue.setFilters(e$B),e$i},e$I._cache=((e$I._cache=[])._length=0,e$I._cache),e$I._shaderSet=!0,e$I}(),e$xd=function(e$d){function e$z(){e$z.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}e$J(e$z,"laya.webgl.utils.MeshTexture",e$zd);var e$t=e$z.prototype;return e$t.addData=function(e$d,e$t,e$l,e$k,e$W,e$i){for(var e$A=e$d.length/2,e$B=this._vb.needSize(e$A*e$z.const_stride)>>2,e$o=this._vb.getFloat32Array(),e$I=0,e$b=0;e$b<e$A;e$b++){var e$f=e$d[e$I],e$J=e$d[e$I+1],e$c=e$f*e$k.a+e$J*e$k.c+e$k.tx,e$Y=e$f*e$k.b+e$J*e$k.d+e$k.ty;e$o[e$B++]=e$c,e$o[e$B++]=e$Y,e$o[e$B++]=e$t[e$I],e$o[e$B++]=e$t[e$I+1],e$I+=2}this._vb.setNeedUpload();var e$w=this.vertNum;if(0<e$w){(e$A=e$l.length)>e$z.tmpIdx.length&&(e$z.tmpIdx=new Uint16Array(e$A));for(var e$D=0;e$D<e$A;e$D++)e$z.tmpIdx[e$D]=e$l[e$D]+e$w;this._ib.appendU16Array(e$z.tmpIdx,e$l.length)}else this._ib.append(e$l);this._ib.setNeedUpload(),this.vertNum+=e$A,this.indexNum+=e$l.length},e$t.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},e$t.destroy=function(){this._ib.destroy(),this._vb.destroy()},e$z.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new e$z},e$z.const_stride=16,e$z._POOL=[],e$A(e$z,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),e$z}(),e$nd=function(e$d){function e$t(){e$t.__super.call(this),this.lock=!0}return e$J(e$t,"laya.webgl.shader.BaseShader",e$g),e$t.activeShader=null,e$t.bindShader=null,e$t}(),e$Qd=function(e$t){function e$b(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===e$l&&(e$l=6408),void 0===e$k&&(e$k=5121),void 0===e$W&&(e$W=34041),void 0===e$i&&(e$i=!1),void 0===e$A&&(e$A=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=-1),this._type=1,this._w=e$d,this._h=e$t,this._surfaceFormat=e$l,this._surfaceType=e$k,this._depthStencilFormat=e$W,e$z.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=e$i,this._repeat=e$A,this._minFifter=e$B,this._magFifter=e$o,this._createWebGLRenderTarget(),this.bitmap.lock=!0,e$b.__super.call(this,this.bitmap,e$x.INV_UV)}e$J(e$b,"laya.webgl.resource.RenderTarget2D",e$t);var e$d=e$b.prototype;return e$G.imps(e$d,{"laya.resource.IDispose":!0}),e$d.getType=function(){return this._type},e$d.getTexture=function(){return this},e$d.size=function(e$d,e$t){this._w==e$d&&this._h==e$t||(this._w=e$d,this._h=e$t,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},e$d.release=function(){this.destroy()},e$d.recycle=function(){e$b.POOL.push(this)},e$d.start=function(){var e$d=e$Hd.mainContext;return this._preRenderTarget=e$ed.curRenderTarget,e$ed.curRenderTarget=this,e$d.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(e$d.viewport(0,0,this._w,this._h),this._svWidth=e$ed.width,this._svHeight=e$ed.height,e$ed.width=this._w,e$ed.height=this._h,e$nd.activeShader=null),this},e$d.clear=function(e$d,e$t,e$l,e$k){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=1);var e$W=e$Hd.mainContext;e$W.clearColor(e$d,e$t,e$l,e$k);var e$i=16384;switch(this._depthStencilFormat){case 33189:e$i|=256;break;case 36168:e$i|=1024;break;case 34041:e$i|=256,e$i|=1024}e$W.clear(e$i)},e$d.end=function(){var e$d=e$Hd.mainContext;e$d.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,e$ed.curRenderTarget=this._preRenderTarget,1==this._type?(e$d.viewport(0,0,this._svWidth,this._svHeight),e$ed.width=this._svWidth,e$ed.height=this._svHeight,e$nd.activeShader=null):e$d.viewport(0,0,e$G.stage.width,e$G.stage.height)},e$d.getData=function(e$d,e$t,e$l,e$k){var e$W=e$Hd.mainContext;if(e$W.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===e$W.checkFramebufferStatus(36160)))return e$W.bindFramebuffer(36160,null),null;var e$i=new Uint8Array(this._w*this._h*4);return e$W.readPixels(e$d,e$t,e$l,e$k,this._surfaceFormat,this._surfaceType,e$i),e$W.bindFramebuffer(36160,null),e$i},e$d.destroy=function(e$d){void 0===e$d&&(e$d=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,e$t.prototype.destroy.call(this))},e$d.dispose=function(){},e$d._createWebGLRenderTarget=function(){this.bitmap=new e$Pd(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(e$d){this.event("recovered")})},e$k(0,e$d,"surfaceFormat",function(){return this._surfaceFormat}),e$k(0,e$d,"magFifter",function(){return this._magFifter}),e$k(0,e$d,"surfaceType",function(){return this._surfaceType}),e$k(0,e$d,"mipMap",function(){return this._mipMap}),e$k(0,e$d,"depthStencilFormat",function(){return this._depthStencilFormat}),e$k(0,e$d,"minFifter",function(){return this._minFifter}),e$k(0,e$d,"source",function(){return this._alreadyResolved?e$G.superGet(e$x,this,"source"):null}),e$b.create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){void 0===e$l&&(e$l=6408),void 0===e$k&&(e$k=5121),void 0===e$W&&(e$W=34041),void 0===e$i&&(e$i=!1),void 0===e$A&&(e$A=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=-1);var e$I=e$b.POOL.pop();return e$I||(e$I=new e$b(e$d,e$t)),e$I.bitmap&&e$I._w==e$d&&e$I._h==e$t&&e$I._surfaceFormat==e$l&&e$I._surfaceType==e$k&&e$I._depthStencilFormat==e$W&&e$I._mipMap==e$i&&e$I._repeat==e$A&&e$I._minFifter==e$B&&e$I._magFifter==e$o||(e$I._w=e$d,e$I._h=e$t,e$I._surfaceFormat=e$l,e$I._surfaceType=e$k,e$I._depthStencilFormat=e$W,e$z.isConchWebGL&&34041===e$I._depthStencilFormat&&(e$I._depthStencilFormat=33189),e$I._mipMap=e$i,e$I._repeat=e$A,e$I._minFifter=e$B,e$I._magFifter=e$o,e$I.release(),e$I._createWebGLRenderTarget()),e$I},e$b.TYPE2D=1,e$b.TYPE3D=2,e$b.POOL=[],e$b}(e$x),e$yd=function(e$d){function e$t(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,e$t.__super.call(this),e$t._gl=e$Hd.mainContext}e$J(e$t,"laya.webgl.utils.Buffer",e$g);var e$l=e$t.prototype;return e$l._bind=function(){this.activeResource(),e$t._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(e$t._bindVertexBuffer=this._glBuffer),e$t._gl.bindBuffer(this._bufferType,e$t._bindActive[this._bufferType]=this._glBuffer),e$nd.activeShader=null)},e$l.recreateResource=function(){this._glBuffer||(this._glBuffer=e$t._gl.createBuffer()),this.completeCreate()},e$l.disposeResource=function(){this._glBuffer&&(e$Hd.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},e$k(0,e$l,"bufferUsage",function(){return this._bufferUsage}),e$t._gl=null,e$t._bindActive={},e$t._bindVertexBuffer=null,e$t._enableAtributes=[],e$t}(),e$Vd=function(e$d){function e$l(e$d){this.texcoord=null,this.offsetX=300,this.offsetY=0,e$l.__super.call(this,512,0);var e$t=8*e$wd.BYTES_PE;this.position=[2,5126,!1,e$t,0],this.texcoord=[2,5126,!1,e$t,2*e$wd.BYTES_PE],this.color=[4,5126,!1,e$t,4*e$wd.BYTES_PE]}return e$J(e$l,"laya.webgl.shader.d2.skinAnishader.SkinSV",e$Ld),e$l}(),e$Zd=function(e$d){function e$t(e$d){e$t.__super.call(this,2,0),this.color=[]}return e$J(e$t,"laya.webgl.shader.d2.value.Color2dSV",e$Ld),e$t.prototype.setValue=function(e$d){e$d.fillStyle&&(this.color=e$d.fillStyle._color._color),e$d.strokeStyle&&(this.color=e$d.strokeStyle._color._color)},e$t}(),e$Ud=function(e$d){function e$t(e$d){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=e$Ld._TEXCOORD,e$t.__super.call(this,256,0)}e$J(e$t,"laya.webgl.shader.d2.value.FillTextureSV",e$Ld);var e$l=e$t.prototype;return e$l.setValue=function(e$d){this.ALPHA=e$d.ALPHA,e$d.filters&&this.setFilters(e$d.filters)},e$l.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},e$t}(),e$Ed=function(e$d){function e$t(e$d){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=e$Ld._TEXCOORD,void 0===e$d&&(e$d=0),e$t.__super.call(this,1,e$d)}e$J(e$t,"laya.webgl.shader.d2.value.TextureSV",e$Ld);var e$l=e$t.prototype;return e$l.setValue=function(e$d){this.ALPHA=e$d.ALPHA,e$d.filters&&this.setFilters(e$d.filters)},e$l.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},e$t}(),e$Nd=function(e$d){function e$t(e$d){this.a_color=null,this.u_pos=[0,0],e$t.__super.call(this,4,0),this.position=[2,5126,!1,5*e$wd.BYTES_PE,0],this.a_color=[3,5126,!1,5*e$wd.BYTES_PE,2*e$wd.BYTES_PE]}return e$J(e$t,"laya.webgl.shader.d2.value.PrimitiveSV",e$Ld),e$t}(),e$ud=function(e$d){function e$t(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,e$t.__super.call(this)}e$J(e$t,"laya.webgl.atlas.AtlasWebGLCanvas",e$d);var e$l=e$t.prototype;return e$l.recreateResource=function(){var e$d=e$Hd.mainContext,e$t=this._source=e$d.createTexture(),e$l=e$Rd.curBindTexTarget,e$k=e$Rd.curBindTexValue;e$Rd.bindTexture(e$d,3553,e$t),e$d.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),e$d.texParameteri(3553,10241,9729),e$d.texParameteri(3553,10240,9729),e$d.texParameteri(3553,10242,33071),e$d.texParameteri(3553,10243,33071),e$l&&e$k&&e$Rd.bindTexture(e$d,e$l,e$k),this.memorySize=this._w*this._h*4,this.completeCreate()},e$l.disposeResource=function(){this._source&&(e$Hd.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$l.texSubImage2D=function(e$d,e$t,e$l){if(e$z.isFlash){this._flashCacheImage||(this._flashCacheImage=e$w.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var e$k=e$l.bitmapdata;this._flashCacheImage._image.copyPixels(e$k,0,0,e$k.width,e$k.height,e$d,e$t),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var e$W=e$Hd.mainContext,e$i=e$Rd.curBindTexTarget,e$A=e$Rd.curBindTexValue;e$Rd.bindTexture(e$W,3553,this._source),e$W.pixelStorei(37441,!0),0<=e$d-1&&e$W.texSubImage2D(3553,0,e$d-1,e$t,6408,5121,e$l),e$d+1<=this._w&&e$W.texSubImage2D(3553,0,e$d+1,e$t,6408,5121,e$l),0<=e$t-1&&e$W.texSubImage2D(3553,0,e$d,e$t-1,6408,5121,e$l),e$t+1<=this._h&&e$W.texSubImage2D(3553,0,e$d,e$t+1,6408,5121,e$l),e$W.texSubImage2D(3553,0,e$d,e$t,6408,5121,e$l),e$W.pixelStorei(37441,!1),e$i&&e$A&&e$Rd.bindTexture(e$W,e$i,e$A)}},e$l.texSubImage2DPixel=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$Hd.mainContext,e$A=e$Rd.curBindTexTarget,e$B=e$Rd.curBindTexValue;e$Rd.bindTexture(e$i,3553,this._source);var e$o=new Uint8Array(e$W.data);e$i.pixelStorei(37441,!0),e$i.texSubImage2D(3553,0,e$d,e$t,e$l,e$k,6408,5121,e$o),e$i.pixelStorei(37441,!1),e$A&&e$B&&e$Rd.bindTexture(e$i,e$A,e$B)},e$k(0,e$l,"width",e$d.prototype._$get_width,function(e$d){this._w=e$d}),e$k(0,e$l,"height",e$d.prototype._$get_height,function(e$d){this._h=e$d}),e$t}(e$l),e$hd=function(e$d){function e$W(){this.flipY=!0,this.alwaysChange=!1,e$W.__super.call(this)}e$J(e$W,"laya.webgl.resource.WebGLCanvas",e$l);var e$t=e$W.prototype;return e$t.getCanvas=function(){return this._canvas},e$t.clear=function(){this._ctx&&this._ctx.clear()},e$t.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},e$t._setContext=function(e$d){this._ctx=e$d},e$t.getContext=function(e$d,e$t){return this._ctx?this._ctx:this._ctx=e$W._createContext(this)},e$t.size=function(e$d,e$t){this._w==e$d&&this._h==e$t||(this._w=e$d,this._h=e$t,this._ctx&&this._ctx.size(e$d,e$t),this._canvas&&(this._canvas.height=e$t,this._canvas.width=e$d))},e$t.activeResource=function(e$d){void 0===e$d&&(e$d=!1),this._source||this.recreateResource()},e$t.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},e$t.disposeResource=function(){this._source&&!this.iscpuSource&&(e$Hd.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$t.createWebGlTexture=function(){var e$d=e$Hd.mainContext;this._canvas;var e$t=this._source=e$d.createTexture();this.iscpuSource=!1;var e$l=e$Rd.curBindTexTarget,e$k=e$Rd.curBindTexValue;e$Rd.bindTexture(e$d,3553,e$t),e$d.pixelStorei(37440,this.flipY?1:0),e$W.premulAlpha&&e$d.pixelStorei(37441,!0),e$d.texImage2D(3553,0,6408,6408,5121,this._imgData),e$W.premulAlpha&&e$d.pixelStorei(37441,!1),e$d.texParameteri(3553,10240,9729),e$d.texParameteri(3553,10241,9729),e$d.texParameteri(3553,10242,33071),e$d.texParameteri(3553,10243,33071),e$d.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,e$l&&e$k&&e$Rd.bindTexture(e$d,e$l,e$k)},e$t.reloadCanvasData=function(){var e$d=e$Hd.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var e$t=e$Rd.curBindTexTarget,e$l=e$Rd.curBindTexValue;e$Rd.bindTexture(e$d,3553,this._source),e$W.premulAlpha&&e$d.pixelStorei(37441,!0),e$d.texImage2D(3553,0,6408,6408,5121,this._imgData),e$W.premulAlpha&&e$d.pixelStorei(37441,!1),e$d.pixelStorei(37440,0),e$t&&e$l&&e$Rd.bindTexture(e$d,e$t,e$l)},e$t.texSubImage2D=function(e$d,e$t,e$l){var e$k=e$Hd.mainContext,e$W=e$Rd.curBindTexTarget,e$i=e$Rd.curBindTexValue;e$Rd.bindTexture(e$k,3553,this._source),e$k.pixelStorei(37441,!0),e$k.texSubImage2D(3553,0,e$t,e$l,6408,5121,e$d._source),e$k.pixelStorei(37441,!1),e$W&&e$i&&e$Rd.bindTexture(e$k,e$W,e$i)},e$t.toBase64=function(e$d,e$t,e$l){var e$k=null;this._canvas&&(e$k=this._canvas.toDataURL(e$d,e$t)),e$l.call(this,e$k)},e$k(0,e$t,"context",function(){return this._ctx}),e$k(0,e$t,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),e$k(0,e$t,"asBitmap",null,function(e$d){this._ctx&&(this._ctx.asBitmap=e$d)}),e$W._createContext=null,e$W.premulAlpha=!1,e$W}(),e$sd=function(e$d){function e$i(e$d,e$t){this.CborderSize=12,e$i.__super.call(this),this.char=e$d,this.isSpace=" "===e$d,this.xs=e$t.scaleX,this.ys=e$t.scaleY,this.font=e$t.font.toString(),this.fontSize=e$t.font.size,this.fillColor=e$t.fillColor,this.borderColor=e$t.borderColor,this.lineWidth=e$t.lineWidth,this.underLine=e$t.underLine;var e$l,e$k=e$z.isConchApp;e$k?((e$l=ConchTextCanvas)._source=ConchTextCanvas,e$l._source.canvas=ConchTextCanvas):e$l=e$c.canvas.source,this.canvas=e$l,this._enableMerageInAtlas=!0,this._ctx=e$k?e$l:this.canvas.getContext("2d",void 0);var e$W=e$n.measureText(this.char,this.font);this.cw=e$W.width*this.xs,this.ch=(e$W.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new e$x(this)}e$J(e$i,"laya.webgl.resource.WebGLCharImage",e$l);var e$t=e$i.prototype;return e$G.imps(e$t,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e$t.active=function(){this.texture.active()},e$t.recreateResource=function(){var e$d=e$z.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),e$d){var e$t=this.fontSize;1==this.xs&&1==this.ys||(e$t=parseInt(e$t*(this.xs>this.ys?this.xs:this.ys)+""));var e$l="normal 100 "+this.font;e$l=e$l.replace(e$i._fontSizeReg,e$t),this.borderColor&&(e$l+=" 1 "+this.borderColor),this._ctx.font=e$l,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,e$K.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var e$k=this._ctx.measureText(this.char);e$k||(e$k={width:16});var e$W=e$k.width+1;this._ctx.lineTo(e$W,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},e$t.onresize=function(e$d,e$t){this._w=e$d,this._h=e$t,this._allowMerageInAtlas=!0},e$t.clearAtlasSource=function(){},e$k(0,e$t,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),e$k(0,e$t,"atlasSource",function(){return this.canvas}),e$k(0,e$t,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(e$d){this._enableMerageInAtlas=e$d}),e$i.createOneChar=function(e$d,e$t){return new e$i(e$d,e$t)},e$i._fontSizeReg=new RegExp("\\d+(?=px)","g"),e$i}(),e$Pd=function(e$d){function e$I(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){void 0===e$l&&(e$l=6408),void 0===e$k&&(e$k=5121),void 0===e$W&&(e$W=34041),void 0===e$i&&(e$i=!1),void 0===e$A&&(e$A=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=1),e$I.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=e$d,this._h=e$t,this._surfaceFormat=e$l,this._surfaceType=e$k,this._depthStencilFormat=e$W,this._mipMap=e$i,this._repeat=e$A,this._minFifter=e$B,this._magFifter=e$o}e$J(e$I,"laya.webgl.resource.WebGLRenderTarget",e$l);var e$t=e$I.prototype;return e$t.recreateResource=function(){var e$d=e$Hd.mainContext;this._frameBuffer||(this._frameBuffer=e$d.createFramebuffer()),this._source||(this._source=e$d.createTexture());var e$t=e$Rd.curBindTexTarget,e$l=e$Rd.curBindTexValue;e$Rd.bindTexture(e$d,3553,this._source),e$d.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var e$k=this._minFifter,e$W=this._magFifter,e$i=this._repeat?10497:33071,e$A=e$b.isPOT(this._w,this._h);if(e$A?(this._mipMap?-1!==e$k||(e$k=9987):-1!==e$k||(e$k=9729),-1!==e$W||(e$W=9729),e$d.texParameteri(3553,10241,e$k),e$d.texParameteri(3553,10240,e$W),e$d.texParameteri(3553,10242,e$i),e$d.texParameteri(3553,10243,e$i),this._mipMap&&e$d.generateMipmap(3553)):(-1!==e$k||(e$k=9729),-1!==e$W||(e$W=9729),e$d.texParameteri(3553,10241,e$k),e$d.texParameteri(3553,10240,e$W),e$d.texParameteri(3553,10242,33071),e$d.texParameteri(3553,10243,33071)),e$d.bindFramebuffer(36160,this._frameBuffer),e$d.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=e$d.createRenderbuffer()),e$d.bindRenderbuffer(36161,this._depthStencilBuffer),e$d.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:e$d.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:e$d.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:e$d.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}e$d.bindFramebuffer(36160,null),e$t&&e$l&&e$Rd.bindTexture(e$d,e$t,e$l),e$d.bindRenderbuffer(36161,null),e$A&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},e$t.disposeResource=function(){this._frameBuffer&&(e$Hd.mainContext.deleteTexture(this._source),e$Hd.mainContext.deleteFramebuffer(this._frameBuffer),e$Hd.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0,this.uri=null)},e$k(0,e$t,"depthStencilBuffer",function(){return this._depthStencilBuffer}),e$k(0,e$t,"frameBuffer",function(){return this._frameBuffer}),e$I}(),e$Xd=function(e$d){function e$B(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this.offsetX=0,this.offsetY=0,e$B.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=e$i,this.canvas=e$d,this._ctx=e$d.getContext("2d",void 0),this._w=e$k,this._h=e$W,this.offsetX=e$t,this.offsetY=e$l,this.src=e$A,this._enableMerageInAtlas=!0,e$U.enabled&&this._w<e$U.atlasLimitWidth&&this._h<e$U.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}e$J(e$B,"laya.webgl.resource.WebGLSubImage",e$l);var e$t=e$B.prototype;return e$G.imps(e$t,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e$t.size=function(e$d,e$t){this._w=e$d,this._h=e$t,this._ctx&&this._ctx.size(e$d,e$t),this.canvas&&(this.canvas.height=e$t,this.canvas.width=e$d)},e$t.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},e$t.createWebGlTexture=function(){var e$d=e$Hd.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var e$t=this._source=e$d.createTexture(),e$l=e$Rd.curBindTexTarget,e$k=e$Rd.curBindTexValue;e$Rd.bindTexture(e$d,3553,e$t),e$d.pixelStorei(37441,!0),e$d.texImage2D(3553,0,6408,6408,5121,this.canvas),e$d.pixelStorei(37441,!1);var e$W=this.minFifter,e$i=this.magFifter,e$A=this.repeat?10497:33071,e$B=e$b.isPOT(this.width,this.height);e$B?(this.mipmap?-1!==e$W||(e$W=9987):-1!==e$W||(e$W=9729),-1!==e$i||(e$i=9729),e$d.texParameteri(3553,10240,e$i),e$d.texParameteri(3553,10241,e$W),e$d.texParameteri(3553,10242,e$A),e$d.texParameteri(3553,10243,e$A),this.mipmap&&e$d.generateMipmap(3553)):(-1!==e$W||(e$W=9729),-1!==e$i||(e$i=9729),e$d.texParameteri(3553,10241,e$W),e$d.texParameteri(3553,10240,e$i),e$d.texParameteri(3553,10242,33071),e$d.texParameteri(3553,10243,33071)),e$l&&e$k&&e$Rd.bindTexture(e$d,e$l,e$k),this.canvas=null,e$B&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},e$t.disposeResource=function(){e$U.enabled&&this._allowMerageInAtlas||!this._source||(e$Hd.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$t.clearAtlasSource=function(){},e$k(0,e$t,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),e$k(0,e$t,"atlasSource",function(){return this.canvas}),e$k(0,e$t,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(e$d){this._allowMerageInAtlas=e$d}),e$B}(),e$md=function(e$d){function e$I(e$d,e$t,e$l,e$k){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,e$I.__super.call(this),!e$d||!e$t)throw"Shader Error";this._id=++e$I._count,this._vs=e$d,this._ps=e$t,this._nameMap=e$k||{},null!=e$l&&(e$I.sharders[e$l]=this)}e$J(e$I,"laya.webgl.shader.Shader",e$nd);var e$t=e$I.prototype;return e$t.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},e$t.disposeResource=function(){e$Hd.mainContext.deleteShader(this._vshader),e$Hd.mainContext.deleteShader(this._pshader),e$Hd.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},e$t._compile=function(){if(!e$Hd.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var e$d=[this._vs,this._ps],e$t=e$Hd.mainContext;if(this._program=e$t.createProgram(),this._vshader=e$I._createShader(e$t,e$d[0],35633),this._pshader=e$I._createShader(e$t,e$d[1],35632),e$t.attachShader(this._program,this._vshader),e$t.attachShader(this._program,this._pshader),e$t.linkProgram(this._program),!e$z.isConchApp&&!e$t.getProgramParameter(this._program,35714))throw e$t.getProgramInfoLog(this._program);var e$l,e$k,e$W=0,e$i=0;for(e$i=e$z.isConchApp?e$t.getProgramParameterEx(this._vs,this._ps,"",35721):e$t.getProgramParameter(this._program,35721),e$W=0;e$W<e$i;e$W++){var e$A=null;e$l={vartype:"attribute",glfun:null,ivartype:0,attrib:e$A=e$z.isConchApp?e$t.getActiveAttribEx(this._vs,this._ps,"",e$W):e$t.getActiveAttrib(this._program,e$W),location:e$t.getAttribLocation(this._program,e$A.name),name:e$A.name,type:e$A.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(e$l)}var e$B=0;for(e$B=e$z.isConchApp?e$t.getProgramParameterEx(this._vs,this._ps,"",35718):e$t.getProgramParameter(this._program,35718),e$W=0;e$W<e$B;e$W++){var e$o=null;e$o=e$z.isConchApp?e$t.getActiveUniformEx(this._vs,this._ps,"",e$W):e$t.getActiveUniform(this._program,e$W),0<(e$l={vartype:"uniform",glfun:null,ivartype:1,attrib:e$A,location:e$t.getUniformLocation(this._program,e$o.name),name:e$o.name,type:e$o.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(e$l.name=e$l.name.substr(0,e$l.name.length-3),e$l.isArray=!0,e$l.location=e$t.getUniformLocation(this._program,e$l.name)),this._params.push(e$l)}for(e$W=0,e$k=this._params.length;e$W<e$k;e$W++)if((e$l=this._params[e$W]).indexOfParams=e$W,e$l.index=1,e$l.value=[e$l.location,null],e$l.codename=e$l.name,e$l.name=this._nameMap[e$l.codename]?this._nameMap[e$l.codename]:e$l.codename,(this._paramsMap[e$l.name]=e$l)._this=this,e$l.uploadedValue=[],"attribute"!==e$l.vartype)switch(e$l.type){case 5124:e$l.fun=e$l.isArray?this._uniform1iv:this._uniform1i;break;case 5126:e$l.fun=e$l.isArray?this._uniform1fv:this._uniform1f;break;case 35664:e$l.fun=e$l.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:e$l.fun=e$l.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:e$l.fun=e$l.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:e$l.fun=this._uniform_sampler2D;break;case 35680:e$l.fun=this._uniform_samplerCube;break;case 35676:e$l.glfun=e$t.uniformMatrix4fv,e$l.fun=this._uniformMatrix4fv;break;case 35670:e$l.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else e$l.fun=this._attribute}},e$t.getUniform=function(e$d){return this._paramsMap[e$d]},e$t._attribute=function(e$d,e$t){var e$l=e$Hd.mainContext,e$k=e$yd._enableAtributes,e$W=e$d.location;return e$k[e$W]||e$l.enableVertexAttribArray(e$W),e$l.vertexAttribPointer(e$W,e$t[0],e$t[1],e$t[2],e$t[3],e$t[4]+this._offset),e$k[e$W]=e$yd._bindVertexBuffer,1},e$t._uniform1f=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t?(e$Hd.mainContext.uniform1f(e$d.location,e$l[0]=e$t),1):0},e$t._uniform1fv=function(e$d,e$t){if(e$t.length<4){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$Hd.mainContext.uniform1fv(e$d.location,e$t),e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3],1):0}return e$Hd.mainContext.uniform1fv(e$d.location,e$t),1},e$t._uniform_vec2=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]?(e$Hd.mainContext.uniform2f(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1]),1):0},e$t._uniform_vec2v=function(e$d,e$t){if(e$t.length<2){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$Hd.mainContext.uniform2fv(e$d.location,e$t),e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3],1):0}return e$Hd.mainContext.uniform2fv(e$d.location,e$t),1},e$t._uniform_vec3=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]?(e$Hd.mainContext.uniform3f(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2]),1):0},e$t._uniform_vec3v=function(e$d,e$t){return e$Hd.mainContext.uniform3fv(e$d.location,e$t),1},e$t._uniform_vec4=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$Hd.mainContext.uniform4f(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3]),1):0},e$t._uniform_vec4v=function(e$d,e$t){return e$Hd.mainContext.uniform4fv(e$d.location,e$t),1},e$t._uniformMatrix2fv=function(e$d,e$t){return e$Hd.mainContext.uniformMatrix2fv(e$d.location,!1,e$t),1},e$t._uniformMatrix3fv=function(e$d,e$t){return e$Hd.mainContext.uniformMatrix3fv(e$d.location,!1,e$t),1},e$t._uniformMatrix4fv=function(e$d,e$t){return e$Hd.mainContext.uniformMatrix4fv(e$d.location,!1,e$t),1},e$t._uniform1i=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t?(e$Hd.mainContext.uniform1i(e$d.location,e$l[0]=e$t),1):0},e$t._uniform1iv=function(e$d,e$t){return e$Hd.mainContext.uniform1iv(e$d.location,e$t),1},e$t._uniform_ivec2=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]?(e$Hd.mainContext.uniform2i(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1]),1):0},e$t._uniform_ivec2v=function(e$d,e$t){return e$Hd.mainContext.uniform2iv(e$d.location,e$t),1},e$t._uniform_vec3i=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]?(e$Hd.mainContext.uniform3i(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2]),1):0},e$t._uniform_vec3vi=function(e$d,e$t){return e$Hd.mainContext.uniform3iv(e$d.location,e$t),1},e$t._uniform_vec4i=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$Hd.mainContext.uniform4i(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3]),1):0},e$t._uniform_vec4vi=function(e$d,e$t){return e$Hd.mainContext.uniform4iv(e$d.location,e$t),1},e$t._uniform_sampler2D=function(e$d,e$t){var e$l=e$Hd.mainContext,e$k=e$d.uploadedValue;return null==e$k[0]?(e$k[0]=this._curActTexIndex,e$l.uniform1i(e$d.location,this._curActTexIndex),e$l.activeTexture(e$I._TEXTURES[this._curActTexIndex]),e$Rd.bindTexture(e$l,3553,e$t),this._curActTexIndex++,1):(e$l.activeTexture(e$I._TEXTURES[e$k[0]]),e$Rd.bindTexture(e$l,3553,e$t),0)},e$t._uniform_samplerCube=function(e$d,e$t){var e$l=e$Hd.mainContext,e$k=e$d.uploadedValue;return null==e$k[0]?(e$k[0]=this._curActTexIndex,e$l.uniform1i(e$d.location,this._curActTexIndex),e$l.activeTexture(e$I._TEXTURES[this._curActTexIndex]),e$Rd.bindTexture(e$l,34067,e$t),this._curActTexIndex++,1):(e$l.activeTexture(e$I._TEXTURES[e$k[0]]),e$Rd.bindTexture(e$l,34067,e$t),0)},e$t._noSetValue=function(e$d){console.log("no....:"+e$d.name)},e$t.uploadOne=function(e$d,e$t){this.activeResource(),e$Rd.UseProgram(this._program);var e$l=this._paramsMap[e$d];e$l.fun.call(this,e$l,e$t)},e$t.uploadTexture2D=function(e$d){e$S.shaderCall++;var e$t=e$Hd.mainContext;e$t.activeTexture(33984),e$Rd.bindTexture(e$t,3553,e$d)},e$t.uploadTexture2D1=function(e$d){e$S.shaderCall++;var e$t=e$Hd.mainContext;e$t.activeTexture(33985),e$Rd.bindTexture(e$t,3553,e$d)},e$t.upload=function(e$d,e$t){e$nd.activeShader=e$nd.bindShader=this,this._lastUseFrameCount===e$S.loopCount||this.activeResource(),e$Rd.UseProgram(this._program),this._reCompile?(e$t=this._params,this._reCompile=!1):e$t=e$t||this._params;e$Hd.mainContext;for(var e$l,e$k,e$W=e$t.length,e$i=0,e$A=0;e$A<e$W;e$A++)null!==(e$k=e$d[(e$l=e$t[e$A]).name])&&(e$i+=e$l.fun.call(this,e$l,e$k));e$S.shaderCall+=e$i},e$t.uploadArray=function(e$d,e$t,e$l){e$nd.activeShader=this,(e$nd.bindShader=this).activeResource(),e$Rd.UseProgram(this._program);this._params;for(var e$k,e$W,e$i=0,e$A=e$t-2;0<=e$A;e$A-=2)(e$W=this._paramsMap[e$d[e$A]])&&null!=(e$k=e$d[e$A+1])&&(e$l&&e$l[e$W.name]&&e$l[e$W.name].bind(),e$i+=e$W.fun.call(this,e$W,e$k));e$S.shaderCall+=e$i},e$t.getParams=function(){return this._params},e$I.getShader=function(e$d){return e$I.sharders[e$d]},e$I.create=function(e$d,e$t,e$l,e$k){return new e$I(e$d,e$t,e$l,e$k)},e$I.withCompile=function(e$d,e$t,e$l,e$k){if(e$l&&e$I.sharders[e$l])return e$I.sharders[e$l];var e$W=e$I._preCompileShader[2e-4*e$d];if(!e$W)throw new Error("withCompile shader err!"+e$d);return e$W.createShader(e$t,e$l,e$k)},e$I.withCompile2D=function(e$d,e$t,e$l,e$k,e$W){if(e$k&&e$I.sharders[e$k])return e$I.sharders[e$k];var e$i=e$I._preCompileShader[2e-4*e$d+e$t];if(!e$i)throw new Error("withCompile shader err!"+e$d+" "+e$t);return e$i.createShader(e$l,e$k,e$W)},e$I.addInclude=function(e$d,e$t){e$gd.addInclude(e$d,e$t)},e$I.preCompile=function(e$d,e$t,e$l,e$k){var e$W=2e-4*e$d;e$I._preCompileShader[e$W]=new e$gd(e$W,e$t,e$l,e$k)},e$I.preCompile2D=function(e$d,e$t,e$l,e$k,e$W){var e$i=2e-4*e$d+e$t;e$I._preCompileShader[e$i]=new e$gd(e$i,e$l,e$k,e$W)},e$I._createShader=function(e$d,e$t,e$l){var e$k=e$d.createShader(e$l);return e$d.shaderSource(e$k,e$t),e$d.compileShader(e$k),e$k},e$I._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],e$I._count=0,e$I._preCompileShader={},e$I.SHADERNAME2ID=2e-4,e$I.sharders=((e$I.sharders=[]).length=32,e$I.sharders),e$A(e$I,["nameKey",function(){return this.nameKey=new e$j}]),e$I}(),e$Od=function(e$d){function e$t(){this._maxsize=0,this._upload=!0,this._uploadSize=0,e$t.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}e$J(e$t,"laya.webgl.utils.Buffer2D",e$d);var e$l=e$t.prototype;return e$l.needSize=function(e$d){var e$t=this._byteLength;if(e$d){var e$l=this._byteLength+e$d;e$l<=this._buffer.byteLength||this._resizeBuffer(e$l<<1,!0),this._byteLength=e$l}return e$t},e$l._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),e$S.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,e$yd._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e$yd._gl.bufferSubData(this._bufferType,0,this._buffer)},e$l._bufferSubData=function(e$d,e$t,e$l){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),this._maxsize=Math.max(this._maxsize,this._byteLength),e$S.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,e$yd._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),e$t||e$l){var e$k=this._buffer.slice(e$t,e$l);e$yd._gl.bufferSubData(this._bufferType,e$d,e$k)}else e$yd._gl.bufferSubData(this._bufferType,e$d,this._buffer)},e$l._checkArrayUse=function(){},e$l._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},e$l._bind_subUpload=function(e$d,e$t,e$l){return void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(e$d,e$t,e$l),!0)},e$l._resizeBuffer=function(e$d,e$t){if(e$d<this._buffer.byteLength)return this;if(this.memorySize=e$d,e$t&&this._buffer&&0<this._buffer.byteLength){var e$l=new ArrayBuffer(e$d);new Uint8Array(e$l).set(new Uint8Array(this._buffer),0),this._buffer=e$l}else this._buffer=new ArrayBuffer(e$d);return this._checkArrayUse(),this._upload=!0,this},e$l.append=function(e$d){this._upload=!0;var e$t,e$l;e$t=e$d.byteLength,e$d instanceof Uint8Array?(this._resizeBuffer(this._byteLength+e$t,!0),e$l=new Uint8Array(this._buffer,this._byteLength)):e$d instanceof Uint16Array?(this._resizeBuffer(this._byteLength+e$t,!0),e$l=new Uint16Array(this._buffer,this._byteLength)):e$d instanceof Float32Array&&(this._resizeBuffer(this._byteLength+e$t,!0),e$l=new Float32Array(this._buffer,this._byteLength)),e$l.set(e$d,0),this._byteLength+=e$t,this._checkArrayUse()},e$l.appendU16Array=function(e$d,e$t){this._resizeBuffer(this._byteLength+2*e$t,!0);for(var e$l=new Uint16Array(this._buffer,this._byteLength,e$t),e$k=0;e$k<e$t;e$k++)e$l[e$k]=e$d[e$k];this._byteLength+=2*e$t,this._checkArrayUse()},e$l.appendEx=function(e$d,e$t){this._upload=!0;var e$l;e$l=e$d.byteLength,this._resizeBuffer(this._byteLength+e$l,!0),new e$t(this._buffer,this._byteLength).set(e$d,0),this._byteLength+=e$l,this._checkArrayUse()},e$l.appendEx2=function(e$d,e$t,e$l,e$k){void 0===e$k&&(e$k=1),this._upload=!0;var e$W,e$i;e$W=e$l*e$k,this._resizeBuffer(this._byteLength+e$W,!0),e$i=new e$t(this._buffer,this._byteLength);var e$A=0;for(e$A=0;e$A<e$l;e$A++)e$i[e$A]=e$d[e$A];this._byteLength+=e$W,this._checkArrayUse()},e$l.getBuffer=function(){return this._buffer},e$l.setNeedUpload=function(){this._upload=!0},e$l.getNeedUpload=function(){return this._upload},e$l.upload=function(){var e$d=this._bind_upload();return e$yd._gl.bindBuffer(this._bufferType,null),e$yd._bindActive[this._bufferType]=null,e$nd.activeShader=null,e$d},e$l.subUpload=function(e$d,e$t,e$l){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0);var e$k=this._bind_subUpload();return e$yd._gl.bindBuffer(this._bufferType,null),e$yd._bindActive[this._bufferType]=null,e$nd.activeShader=null,e$k},e$l.disposeResource=function(){e$d.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},e$l.clear=function(){this._byteLength=0,this._upload=!0},e$k(0,e$l,"bufferLength",function(){return this._buffer.byteLength}),e$k(0,e$l,"byteLength",null,function(e$d){this._byteLength!==e$d&&(e$d<=this._buffer.byteLength||this._resizeBuffer(2*e$d+256,!0),this._byteLength=e$d)}),e$t.__int__=function(e$d){e$_d.QuadrangleIB=e$_d.create(35044),e$Dd.fillIBQuadrangle(e$_d.QuadrangleIB,16)},e$t.FLOAT32=4,e$t.SHORT=2,e$t}(e$yd),e$Fd=(function(e$t){function e$l(e$d){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,e$l.__super.call(this,9)}e$J(e$l,"laya.webgl.shader.d2.value.GlowSV",e$t);var e$d=e$l.prototype;e$d.setValue=function(e$d){e$t.prototype.setValue.call(this,e$d)},e$d.clear=function(){e$t.prototype.clear.call(this)}}(e$Ed),function(e$d){function e$t(e$d){e$t.__super.call(this,64),this.defines.add(64)}e$J(e$t,"laya.webgl.shader.d2.value.TextSV",e$d);var e$l=e$t.prototype;return e$l.release=function(){(e$t.pool[e$t._length++]=this).clear()},e$l.clear=function(){e$d.prototype.clear.call(this)},e$t.create=function(){return e$t._length?e$t.pool[--e$t._length]:new e$t(null)},e$t.pool=[],e$t._length=0,e$t}(e$Ed)),e$ad=function(e$d){function e$W(e$d,e$t,e$l,e$k){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,e$W.__super.call(this,e$d,e$t,e$l,e$k)}e$J(e$W,"laya.webgl.shader.d2.Shader2X",e$d);var e$t=e$W.prototype;return e$t.upload2dQuick1=function(e$d){this.upload(e$d,this._params2dQuick1||this._make2dQuick1())},e$t._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var e$d,e$t=this._params,e$l=0,e$k=e$t.length;e$l<e$k;e$l++)e$d=e$t[e$l],(e$z.isFlash||"size"!==e$d.name&&"position"!==e$d.name&&"texcoord"!==e$d.name)&&this._params2dQuick1.push(e$d)}return this._params2dQuick1},e$t.disposeResource=function(){e$d.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},e$t.upload2dQuick2=function(e$d){this.upload(e$d,this._params2dQuick2||this._make2dQuick2())},e$t._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var e$d,e$t=this._params,e$l=0,e$k=e$t.length;e$l<e$k;e$l++)e$d=e$t[e$l],(e$z.isFlash||"size"!==e$d.name)&&this._params2dQuick2.push(e$d)}return this._params2dQuick2},e$W.create=function(e$d,e$t,e$l,e$k){return new e$W(e$d,e$t,e$l,e$k)},e$W}(e$md),e$_d=function(e$d){function e$t(e$d){this._uint8Array=null,this._uint16Array=null,void 0===e$d&&(e$d=35044),e$t.__super.call(this),this._bufferUsage=e$d,this._bufferType=34963,e$z.isFlash||(this._buffer=new ArrayBuffer(8))}e$J(e$t,"laya.webgl.utils.IndexBuffer2D",e$Od);var e$l=e$t.prototype;return e$l._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},e$l.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},e$l.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},e$l.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},e$t.QuadrangleIB=null,e$t.create=function(e$d){return void 0===e$d&&(e$d=35044),new e$t(e$d)},e$t}(),e$vd=function(e$d){function e$l(e$d,e$t){this._floatArray32=null,this._vertexStride=0,e$l.__super.call(this),this._vertexStride=e$d,this._bufferUsage=e$t,this._bufferType=34962,e$z.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}e$J(e$l,"laya.webgl.utils.VertexBuffer2D",e$d);var e$t=e$l.prototype;return e$t.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},e$t.bind=function(e$d){e$d&&e$d._bind(),this._bind()},e$t.insertData=function(e$d,e$t){this.getFloat32Array().set(e$d,e$t),this._upload=!0},e$t.bind_upload=function(e$d){e$d._bind_upload()||e$d._bind(),this._bind_upload()||this._bind()},e$t._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},e$t.disposeResource=function(){e$d.prototype.disposeResource.call(this)},e$t.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},e$k(0,e$t,"vertexStride",function(){return this._vertexStride}),e$l.create=function(e$d,e$t){return void 0===e$t&&(e$t=35048),new e$l(e$d,e$t)},e$l}(e$Od),e$dt=function(e$d){function e$B(e$d,e$t,e$l,e$k,e$W,e$i){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===e$l&&(e$l=6408),void 0===e$k&&(e$k=!0),e$B.__super.call(this,e$d,e$t),e$d){if(this._format=e$l,this._mipmap=e$k,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof e$d)this._url=e$d,this._src=e$d,this._image=new e$c.window.Image,e$t&&(e$t.onload&&(this.onload=e$t.onload),e$t.onerror&&(this.onerror=e$t.onerror),e$t.onCreate&&e$t.onCreate(this)),this._image.crossOrigin=e$d&&0==e$d.indexOf("data:")?null:"",e$d&&(this._image.src=e$d);else if(e$d instanceof ArrayBuffer){this._src=e$t,this._url=this._src;var e$A=new e$o(e$d);e$A.readUTFBytes(4),e$A.readUTFBytes(2),e$A.getInt16();e$A.endian="bigEndian",this._w=e$A.getInt16(),this._h=e$A.getInt16();e$A.getInt16(),e$A.getInt16();this._image=new Uint8Array(e$d,e$A.pos),this._format=e$Hd.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,e$U.enabled&&this._w<e$U.atlasLimitWidth&&this._h<e$U.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(e$d instanceof Uint8Array))return this._src=e$t,this._url=this._src,this._image=e$d.source||e$d,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=e$t,this._url=this._src,this._w=e$W,this._h=e$i,this._image=e$d,this._format=0===e$l?e$d.byteLength/(e$W*e$i)==4?6408:6407:e$l}this._$5__enableMerageInAtlas=!0}}e$J(e$B,"laya.webgl.resource.WebGLImage",e$w);var e$t=e$B.prototype;return e$G.imps(e$t,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),e$t._init_=function(e$d,e$t){},e$t._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var e$d=e$Hd.mainContext,e$t=this._source=e$d.createTexture(),e$l=e$Rd.curBindTexTarget,e$k=e$Rd.curBindTexValue;e$Rd.bindTexture(e$d,3553,e$t);var e$W=this.minFifter,e$i=this.magFifter,e$A=this.repeat?10497:33071,e$B=e$b.isPOT(this._w,this._h),e$o=!1;switch(e$B?(this.mipmap?-1!==e$W||(e$W=9987):-1!==e$W||(e$W=9729),-1!==e$i||(e$i=9729),e$d.texParameteri(3553,10241,e$W),e$d.texParameteri(3553,10240,e$i),e$d.texParameteri(3553,10242,e$A),e$d.texParameteri(3553,10243,e$A),this.mipmap&&e$d.generateMipmap(3553)):(-1!==e$W||(e$W=9729),-1!==e$i||(e$i=9729),e$d.texParameteri(3553,10241,e$W),e$d.texParameteri(3553,10240,e$i),e$d.texParameteri(3553,10242,33071),e$d.texParameteri(3553,10243,33071)),e$d.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&e$d.pixelStorei(e$d.UNPACK_ALIGNMENT,1),e$d.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&e$d.pixelStorei(e$d.UNPACK_ALIGNMENT,1),e$d.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:e$o=!0,e$d.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case e$Hd.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:e$o=!0,e$d.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}e$d.pixelStorei(37441,!1),e$l&&e$k&&e$Rd.bindTexture(e$d,e$l,e$k),this.uri||(this.uri=this._url),e$o?this.memorySize=this._image.length:e$B&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},e$t.recreateResource=function(){var e$d=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var e$t=this;this._image=new e$c.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(e$t._needReleaseAgain)return e$t._needReleaseAgain=!1,e$t._image.onload=null,void(e$t._image=null);e$t._allowMerageInAtlas&&e$t._enableMerageInAtlas?(e$d.memorySize=0,e$d._recreateLock=!1):e$t._createWebGlTexture(),e$t.completeCreate()},this._image.src=this._src}},e$t.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&e$Hd.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},e$t.onresize=function(){this._w=this._image.width,this._h=this._image.height,e$U.enabled&&this._w<e$U.atlasLimitWidth&&this._h<e$U.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},e$t.clearAtlasSource=function(){this._image=null},e$k(0,e$t,"format",function(){return this._format}),e$k(0,e$t,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(e$d){this._$5__enableMerageInAtlas=e$d}),e$k(0,e$t,"mipmap",function(){return this._mipmap}),e$k(0,e$t,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),e$k(0,e$t,"atlasSource",function(){return this._image}),e$k(0,e$t,"onload",null,function(e$d){var e$t=this;this._onload=e$d,this._image&&(this._image.onload=null!=this._onload?function(){e$t.onresize(),e$t._onload()}:null)}),e$k(0,e$t,"onerror",null,function(e$d){var e$t=this;this._onerror=e$d,this._image&&(this._image.onerror=null!=this._onerror?function(){e$t._onerror()}:null)}),e$B}();e$G.__init([e$cd,e$Z,e$qd,e$gd])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$d,e$t){"use strict";for(var e$l in Object.defineProperty(e$t,"__esModule",{value:!0}),Laya){var e$k=Laya[e$l];e$k&&e$k.__isclass&&(e$t[e$l]=e$k)}}),function(e$i,e$d,e$k){e$k.un,e$k.uns;var e$W=e$k.static,e$A=e$k.class,e$B=e$k.getset,e$o=(e$k.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),e$Y=laya.utils.ClassUtils,e$f=(laya.events.Event,laya.utils.HTMLChar),e$I=laya.net.Loader,e$b=(laya.display.Node,laya.maths.Rectangle),e$J=laya.renders.Render,e$c=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),e$w=laya.utils.Stat,e$n=laya.display.Text,e$D=laya.resource.Texture,e$z=laya.net.URL,e$e=laya.utils.Utils,e$g=function(){function e$c(){}return e$A(e$c,"laya.html.utils.HTMLParse"),e$c.parse=function(e$d,e$t,e$l){e$t=(e$t="<root>"+(e$t=e$t.replace(/<br>/g,"<br/>"))+"</root>").replace(e$c.spacePattern,e$c.char255);var e$k=e$e.parseXMLFromString(e$t);e$c._parseXML(e$d,e$k.childNodes[0].childNodes,e$l)},e$c._parseXML=function(e$d,e$t,e$l,e$k){var e$W=0,e$i=0;if(e$t.join||e$t.item)for(e$W=0,e$i=e$t.length;e$W<e$i;++e$W)e$c._parseXML(e$d,e$t[e$W],e$l,e$k);else{var e$A,e$B,e$o;if(3==e$t.nodeType)return void(e$d instanceof laya.html.dom.HTMLDivElement?(null==e$t.nodeName&&(e$t.nodeName="#text"),e$B=e$t.nodeName.toLowerCase(),0<(e$o=e$t.textContent.replace(/^\s+|\s+$/g,"")).length&&(e$A=e$Y.getInstance(e$B))&&(e$d.addChild(e$A),e$A.innerTEXT=e$o.replace(e$c.char255AndOneSpacePattern," "))):0<(e$o=e$t.textContent.replace(/^\s+|\s+$/g,"")).length&&(e$d.innerTEXT=e$o.replace(e$c.char255AndOneSpacePattern," ")));if("#comment"==(e$B=e$t.nodeName.toLowerCase()))return;if(e$A=e$Y.getInstance(e$B)){(e$A=e$d.addChild(e$A)).URI=e$l,e$A.href=e$k;var e$I=e$t.attributes;if(e$I&&0<e$I.length)for(e$W=0,e$i=e$I.length;e$W<e$i;++e$W){var e$b=e$I[e$W],e$f=e$b.nodeName,e$J=e$b.value;e$A._setAttributes(e$f,e$J)}e$c._parseXML(e$A,e$t.childNodes,e$l,e$A.href)}else e$c._parseXML(e$d,e$t.childNodes,e$l,e$k)}},e$c.char255=String.fromCharCode(255),e$c.spacePattern=/&nbsp;|&#160;/g,e$c.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),e$c}(),e$H=function(){function e$x(){}return e$A(e$x,"laya.html.utils.Layout"),e$x.later=function(e$d){null==e$x._will&&(e$x._will=[],e$k.stage.frameLoop(1,null,function(){if(!(e$x._will.length<1)){for(var e$d=0;e$d<e$x._will.length;e$d++)laya.html.utils.Layout.layout(e$x._will[e$d]);e$x._will.length=0}})),e$x._will.push(e$d)},e$x.layout=function(e$d){if(!e$d||!e$d._style)return null;if(0==(512&e$d._style._type))return null;e$d.getStyle()._type&=-513;var e$t=e$x._multiLineLayout(e$d);return e$J.isConchApp&&e$d.layaoutCallNative&&e$d.layaoutCallNative(),e$t},e$x._multiLineLayout=function(e$d){if(e$n.RightToLeft)return e$x._multiLineLayout2(e$d);var e$t=new Array;e$d._addChildsToLayout(e$t);var e$l,e$k,e$W,e$i,e$A,e$B=0,e$o=e$t.length,e$I=e$d._getCSSStyle(),e$b=e$I.letterSpacing,e$f=e$I.leading,e$J=e$I.lineHeight,e$c=e$I._widthAuto()||!e$I.wordWrap,e$Y=e$c?999999:e$d.width,e$w=(e$d.height,0),e$D=e$I.italic?e$I.fontSize/3:0,e$z=e$I._getAlign(),e$e=e$I._getValign(),e$g=0!==e$e||0!==e$z||0!=e$J,e$H=0,e$R=0,e$G=0,e$q=0,e$L=new Array,e$$=e$L[0]=new e$Q,e$p=!1,e$M=!1;e$$.h=0,e$I.italic&&(e$Y-=e$I.fontSize/3);var e$T=0,e$r=!0;function e$S(){e$$.y=e$R,e$R+=e$$.h+e$f,0==e$$.h&&(e$R+=e$J),e$$.mWidth=e$T,e$T=0,e$$=new e$Q,e$L.push(e$$),e$$.h=0,e$p=!(e$r=!(e$H=0))}for(e$B=0;e$B<e$o;e$B++)if(null!=(e$l=e$t[e$B]))if(e$r=!1,e$l instanceof laya.html.dom.HTMLBrElement)e$S(),e$$.y=e$R;else{if(e$l._isChar()){if((e$i=e$l).isWord)e$p=e$M||"\n"===e$i.char,e$$.wordStartIndex=e$$.elements.length;else{if(e$G=e$i.width+e$i.style.letterSpacin,0<e$L.length&&e$Y<e$H+e$G&&0<e$$.wordStartIndex){var e$j;e$j=e$$.elements.length-e$$.wordStartIndex+1,e$$.elements.length=e$$.wordStartIndex,e$B-=e$j,e$S();continue}e$p=!1,e$T+=e$i.width}e$G=e$i.width+e$b,e$q=e$i.height,e$M=!1,(e$p=e$p||e$Y<e$H+e$G)&&e$S(),e$$.minTextHeight=Math.min(e$$.minTextHeight,e$l.height)}else e$k=e$l._getCSSStyle(),e$A=e$l,e$W=e$k.padding,0===e$k._getCssFloat()||(e$g=!0),e$p=e$M||e$k.lineElement,e$G=e$A.width*e$A._style._tf.scaleX+e$W[1]+e$W[3]+e$b,e$q=e$A.height*e$A._style._tf.scaleY+e$W[0]+e$W[2],e$M=e$k.lineElement,(e$p=e$p||e$Y<e$H+e$G&&e$k.wordWrap)&&e$S();e$$.elements.push(e$l),e$$.h=Math.max(e$$.h,e$q),e$l.x=e$H,e$l.y=e$R,e$H+=e$G,e$$.w=e$H-e$b,e$$.y=e$R,e$w=Math.max(e$H+e$D,e$w)}else e$r||(e$H+=e$x.DIV_ELEMENT_PADDING),e$$.wordStartIndex=e$$.elements.length;if(e$R=e$$.y+e$$.h,e$g){var e$C=0,e$K=e$Y;for(e$c&&0<e$d.width&&(e$K=e$d.width),e$B=0,e$o=e$L.length;e$B<e$o;e$B++)e$L[e$B].updatePos(0,e$K,e$B,e$C,e$z,e$e,e$J),e$C+=Math.max(e$J,e$L[e$B].h+e$f);e$R=e$C}return e$c&&(e$d.width=e$w),e$R>e$d.height&&(e$d.height=e$R),[e$w,e$R]},e$x._multiLineLayout2=function(e$d){var e$t=new Array;e$d._addChildsToLayout(e$t);var e$l,e$k,e$W,e$i,e$A,e$B=0,e$o=e$t.length,e$I=e$d._getCSSStyle(),e$b=e$I.letterSpacing,e$f=e$I.leading,e$J=e$I.lineHeight,e$c=e$I._widthAuto()||!e$I.wordWrap,e$Y=e$c?999999:e$d.width,e$w=(e$d.height,0),e$D=e$I.italic?e$I.fontSize/3:0,e$z=2-e$I._getAlign(),e$e=e$I._getValign(),e$g=0!==e$e||0!=e$z||0!=e$J,e$H=0,e$R=0,e$G=0,e$q=0,e$L=new Array,e$$=e$L[0]=new e$Q,e$p=!1,e$M=!1;e$$.h=0,e$I.italic&&(e$Y-=e$I.fontSize/3);var e$T=0,e$r=!0;function e$S(){e$$.y=e$R,e$R+=e$$.h+e$f,0==e$$.h&&(e$R+=e$J),e$$.mWidth=e$T,e$T=0,e$$=new e$Q,e$L.push(e$$),e$$.h=0,e$p=!(e$r=!(e$H=0))}for(e$B=0;e$B<e$o;e$B++)if(null!=(e$l=e$t[e$B]))if(e$r=!1,e$l instanceof laya.html.dom.HTMLBrElement)e$S(),e$$.y=e$R;else{if(e$l._isChar()){if((e$i=e$l).isWord)e$p=e$M||"\n"===e$i.char,e$$.wordStartIndex=e$$.elements.length;else{if(0<e$L.length&&e$Y<e$H+e$G&&0<e$$.wordStartIndex){var e$j;e$j=e$$.elements.length-e$$.wordStartIndex+1,e$$.elements.length=e$$.wordStartIndex,e$B-=e$j,e$S();continue}e$p=!1,e$T+=e$i.width}e$G=e$i.width+e$b,e$q=e$i.height,e$M=!1,(e$p=e$p||e$Y<e$H+e$G)&&e$S(),e$$.minTextHeight=Math.min(e$$.minTextHeight,e$l.height)}else e$k=e$l._getCSSStyle(),e$A=e$l,e$W=e$k.padding,0===e$k._getCssFloat()||(e$g=!0),e$p=e$M||e$k.lineElement,e$G=e$A.width*e$A._style._tf.scaleX+e$W[1]+e$W[3]+e$b,e$q=e$A.height*e$A._style._tf.scaleY+e$W[0]+e$W[2],e$M=e$k.lineElement,(e$p=e$p||e$Y<e$H+e$G&&e$k.wordWrap)&&e$S();e$$.elements.push(e$l),e$$.h=Math.max(e$$.h,e$q),e$l.x=e$H,e$l.y=e$R,e$H+=e$G,e$$.w=e$H-e$b,e$$.y=e$R,e$w=Math.max(e$H+e$D,e$w)}else e$r||(e$H+=e$x.DIV_ELEMENT_PADDING),e$$.wordStartIndex=e$$.elements.length;if(e$R=e$$.y+e$$.h,e$g){var e$C=0,e$K=e$Y;for(e$B=0,e$o=e$L.length;e$B<e$o;e$B++)e$L[e$B].updatePos(0,e$K,e$B,e$C,e$z,e$e,e$J),e$C+=Math.max(e$J,e$L[e$B].h+e$f);e$R=e$C}for(e$c&&(e$d.width=e$w),e$R>e$d.height&&(e$d.height=e$R),e$B=0,e$o=e$L.length;e$B<e$o;e$B++)e$L[e$B].revertOrder(e$Y);return[e$w,e$R]},e$x._will=null,e$x.DIV_ELEMENT_PADDING=0,e$x}(),e$Q=function(){function e$d(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}e$A(e$d,"laya.html.utils.LayoutLine");var e$t=e$d.prototype;return e$t.updatePos=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){var e$B,e$o=0;0<this.elements.length&&(e$o=(e$B=this.elements[this.elements.length-1]).x+e$B.width-this.elements[0].x);var e$I=0,e$b=NaN;1===e$W&&(e$I=(e$t-e$o)/2),2===e$W&&(e$I=e$t-e$o),0===e$A||0!=e$i||(e$i=1);for(var e$f=0,e$J=this.elements.length;e$f<e$J;e$f++){var e$c=(e$B=this.elements[e$f])._getCSSStyle();switch(0!==e$I&&(e$B.x+=e$I),e$c._getValign()){case 0:e$B.y=e$k;break;case 1:var e$Y=0;99999!=this.minTextHeight&&(e$Y=this.minTextHeight);var e$w=(e$Y+e$A)/2;e$w=Math.max(e$w,this.h),e$b=(laya.html.dom.HTMLImageElement,e$k+e$w-e$B.height),e$B.y=e$b;break;case 2:e$B.y=e$k+(e$A-e$B.height)}}},e$t.revertOrder=function(e$d){var e$t;if(0<this.elements.length){var e$l,e$k=0;for(e$l=this.elements.length,e$k=0;e$k<e$l;e$k++)(e$t=this.elements[e$k]).x=e$d-e$t.x-e$t.width}},e$d}(),e$R=function(e$l){function e$t(){this.URI=null,this._href=null,e$t.__super.call(this),this._text=e$t._EMPTYTEXT,this.setStyle(new e$o(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}e$A(e$t,"laya.html.dom.HTMLElement",e$l);var e$d=e$t.prototype;return e$d.layaoutCallNative=function(){var e$d=0;if(this._childs&&0<(e$d=this._childs.length))for(var e$t=0;e$t<e$d;e$t++)this._childs[e$t].layaoutCallNative&&this._childs[e$t].layaoutCallNative();var e$l=this._getWords();e$l?laya.html.dom.HTMLElement.fillWords(this,e$l,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},e$d.appendChild=function(e$d){return this.addChild(e$d)},e$d._getWords2=function(){var e$d=this._text.text;if(!e$d||0===e$d.length)return null;var e$t,e$l,e$k=0,e$W=0;if(this._text.drawWords)e$l=this._text.drawWords;else{for(e$W=(e$t=e$d.split(" ")).length-1,e$l=[],e$k=0;e$k<e$W;e$k++)e$l.push(e$t[e$k]," ");0<=e$W&&e$l.push(e$t[e$W]),this._text.drawWords=e$l}var e$i,e$A=this._text.words;if(e$A&&e$A.length===e$l.length)return e$A;null===e$A&&(this._text.words=e$A=[]),e$A.length=e$l.length;var e$B=this.style,e$o=e$B.font;for(e$k=0,e$W=e$l.length;e$k<e$W;e$k++){e$i=e$e.measureText(e$l[e$k],e$o);var e$I=e$A[e$k]=new e$f(e$l[e$k],e$i.width,e$i.height||e$B.fontSize,e$B);if(1<e$I.char.length&&(e$I.charNum=e$I.char),this.href){var e$b=new e$c;this.addChild(e$b),e$I.setSprite(e$b)}}return e$A},e$d._getWords=function(){if(!e$n.CharacterCache)return this._getWords2();var e$d=this._text.text;if(!e$d||0===e$d.length)return null;var e$t,e$l=this._text.words;if(e$l&&e$l.length===e$d.length)return e$l;null===e$l&&(this._text.words=e$l=[]),e$l.length=e$d.length;for(var e$k=this.style,e$W=e$k.font,e$i=0,e$A=e$d.length;e$i<e$A;e$i++)if(e$t=e$e.measureText(e$d.charAt(e$i),e$W)){var e$B=e$l[e$i]=new e$f(e$d.charAt(e$i),e$t.width,e$t.height||e$k.fontSize,e$k);if(this.href){var e$o=new e$c;this.addChild(e$o),e$B.setSprite(e$o)}}else console.warn("_getWords size is null"+e$d.charAt(e$i),e$W);return e$l},e$d.showLinkSprite=function(){var e$d=this._text.words;if(e$d)for(var e$t,e$l,e$k=[],e$W=0;e$W<e$d.length;e$W++)e$l=e$d[e$W],(e$t=new e$c).graphics.drawRect(0,0,e$l.width,e$l.height,"#ff0000"),e$t.width=e$l.width,e$t.height=e$l.height,this.addChild(e$t),e$k.push(e$t)},e$d._layoutLater=function(){var e$d=this.style;512&e$d._type||(e$d.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&e$d.block?(e$H.later(this),e$d._type|=512):this.parent&&this.parent._layoutLater())},e$d._setAttributes=function(e$d,e$t){switch(e$d){case"style":return void this.style.cssText(e$t);case"class":return void(this.className=e$t)}e$l.prototype._setAttributes.call(this,e$d,e$t)},e$d.updateHref=function(){if(null!=this._href){var e$d=this._getWords();if(e$d)for(var e$t,e$l,e$k=0;e$k<e$d.length;e$k++)(e$l=(e$t=e$d[e$k]).getSprite())&&(e$l.size(e$t.width,e$t.height),e$l.on("click",this,this.onLinkHandler))}},e$d.onLinkHandler=function(e$d){switch(e$d.type){case"click":for(var e$t=this;e$t;)e$t.event("link",[this.href]),e$t=e$t.parent}},e$d.formatURL=function(e$d){return this.URI?e$z.formatURL(e$d,this.URI?this.URI.path:null):e$d},e$B(0,e$d,"href",function(){return this._href},function(e$d){null!=(this._href=e$d)&&(this._getCSSStyle().underLine=1,this.updateHref())}),e$B(0,e$d,"color",null,function(e$d){this.style.color=e$d}),e$B(0,e$d,"onClick",null,function(e$d){e$k._runScript("fn=function(event){"+e$d+";}"),this.on("click",this,void 0)}),e$B(0,e$d,"id",null,function(e$d){e$G.document.setElementById(e$d,this)}),e$B(0,e$d,"innerTEXT",function(){return this._text.text},function(e$d){this.text=e$d}),e$B(0,e$d,"style",function(){return this._style}),e$B(0,e$d,"text",function(){return this._text.text},function(e$d){this._text==e$t._EMPTYTEXT?this._text={text:e$d,words:null}:(this._text.text=e$d,this._text.words&&(this._text.words.length=0)),e$J.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),e$B(0,e$d,"parent",e$l.prototype._$get_parent,function(e$d){if(e$d instanceof laya.html.dom.HTMLElement){var e$t=e$d;this.URI||(this.URI=e$t.URI),this.style.inherit(e$t.style)}e$k.superSet(e$c,this,"parent",e$d)}),e$B(0,e$d,"className",null,function(e$d){this.style.attrs(e$G.document.styleSheets["."+e$d])}),e$t.fillWords=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$d.graphics.clear();for(var e$B=0,e$o=e$t.length;e$B<e$o;e$B++){var e$I=e$t[e$B];e$d.graphics.fillText(e$I.char,e$I.x+e$l,e$I.y+e$k,e$W,e$i,"left",e$A)}},e$t._EMPTYTEXT={text:null,words:null},e$t}(e$c),e$t=(function(e$d){function e$t(){e$t.__super.call(this),this.style.lineElement=!0,this.style.block=!0}e$A(e$t,"laya.html.dom.HTMLBrElement",e$R)}(),function(e$d){function e$t(){this.contextHeight=NaN,this.contextWidth=NaN,e$t.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}e$A(e$t,"laya.html.dom.HTMLDivElement",e$d);var e$l=e$t.prototype;return e$l.appendHTML=function(e$d){e$g.parse(this,e$d,this.URI),this.layout()},e$l._addChildsToLayout=function(e$t){var e$d=this._getWords();if(null==e$d&&0==this._childs.length)return!1;e$d&&e$d.forEach(function(e$d){e$t.push(e$d)});for(var e$l=!0,e$k=0,e$W=this._childs.length;e$k<e$W;e$k++){var e$i=this._childs[e$k];e$l?e$l=!1:e$t.push(null),e$i._addToLayout(e$t)}return!0},e$l._addToLayout=function(e$d){this.layout()},e$l.layout=function(){if(this.style){this.style._type|=512;var e$d=e$H.layout(this);if(e$d){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new e$b);var e$t=this._$P.mHtmlBounds;e$t.x=e$t.y=0,e$t.width=this.contextWidth=e$d[0],e$t.height=this.contextHeight=e$d[1],this.setBounds(e$t)}}},e$B(0,e$l,"height",function(){return this._height?this._height:this.contextHeight},e$d.prototype._$set_height),e$B(0,e$l,"innerHTML",null,function(e$d){this.destroyChildren(),this.appendHTML(e$d)}),e$B(0,e$l,"width",function(){return this._width?this._width:this.contextWidth},function(e$d){var e$t=!1;e$t=0===e$d?e$d!=this._width:e$d!=this.width,e$k.superSet(e$R,this,"width",e$d),e$t&&this.layout()}),e$t}(e$R)),e$G=function(e$d){function e$t(){this.all=new Array,this.styleSheets=e$o.styleSheets,e$t.__super.call(this)}e$A(e$t,"laya.html.dom.HTMLDocument",e$R);var e$l=e$t.prototype;return e$l.getElementById=function(e$d){return this.all[e$d]},e$l.setElementById=function(e$d,e$t){this.all[e$d]=e$t},e$W(e$t,["document",function(){return this.document=new e$t}]),e$t}();(function(e$d){function e$t(){this._tex=null,this._url=null,this._renderArgs=[],e$t.__super.call(this),this.style.block=!0}e$A(e$t,"laya.html.dom.HTMLImageElement",e$R);var e$l=e$t.prototype;e$l._addToLayout=function(e$d){!this._style.absolute&&e$d.push(this)},e$l.render=function(e$d,e$t,e$l){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(e$w.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,e$d.ctx.drawTexture2(e$t,e$l,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},e$l.layaoutCallNative=function(){var e$d=0;if(this._childs&&0<(e$d=this._childs.length))for(var e$t=0;e$t<e$d;e$t++)this._childs[e$t].layaoutCallNative&&this._childs[e$t].layaoutCallNative()},e$B(0,e$l,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(e$d){this._width!==e$d&&(this._width=e$d,this._style.width=e$d,this.repaint())}),e$B(0,e$l,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(e$d){this._height!==e$d&&(this._height=e$d,this._style.height=e$d,this.repaint())}),e$l.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),e$I.clearCache(this,this._url),this._tex=null),e$R.prototype.destroy.call(this)},e$l.onloaded=function(){var e$d=this._style;e$d&&!e$d.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),e$d&&!e$d.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),e$J.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},e$l._loadImageComplete=function(e$d,e$t,e$l){if(!this._destroyed)if(null!=e$l)if(e$l instanceof ArrayBuffer){var e$k=new DataView(e$l);new laya.webgl.resource.WebGLImage(new Uint8Array(e$l,8),e$d,0,!1,e$k.getUint32(0),e$k.getUint32(4));this.onloaded()}else if(e$l instanceof e$D)e$I.imgMgrSet[e$d]=e$t,e$i.imgMgrLock(e$d,e$I.imgMgrSet[e$d]),this._url=e$d,this._tex=e$l,e$I.keepCache(this,e$d),e$I.cacheRes(e$d,this._tex),this.onloaded();else{var e$W=-1!=e$d.indexOf(".png",e$d.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(e$l,e$d,e$W,!1,e$l.width,e$l.height);this.onloaded()}else this.event("error","Load image failed")},e$B(0,e$l,"src",null,function(e$d){(e$d=this.formatURL(e$d),this._url!=e$d)&&(null!=this._tex&&(e$I.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=e$d,(this._tex=e$I.getRes(e$d))?(e$I.keepCache(this,e$d),this.onloaded()):e$i.imgMgrLoad(e$d,this._loadImageComplete.bind(this),2,!1))})})(),function(e$d){function e$t(){this.type=null,e$t.__super.call(this),this.visible=!1}e$A(e$t,"laya.html.dom.HTMLLinkElement",e$d);var e$l=e$t.prototype;e$l._onload=function(e$d){switch(this.type){case"text/css":e$o.parseCSS(e$d,this.URI)}},e$B(0,e$l,"href",e$d.prototype._$get_href,function(e$d){var e$t=this;e$d=this.formatURL(e$d),this.URI=new e$z(e$d);var e$l=new e$I;e$l.once("complete",null,function(e$d){e$t._onload(e$d)}),e$l.load(e$d,"text")}),e$t._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(e$R),function(e$d){function e$t(){e$t.__super.call(this),this.visible=!1}e$A(e$t,"laya.html.dom.HTMLStyleElement",e$d),e$B(0,e$t.prototype,"text",e$d.prototype._$get_text,function(e$d){e$o.parseCSS(e$d,null)})}(e$R),function(e$d){function e$t(){e$t.__super.call(this),this._getCSSStyle().valign="middle"}e$A(e$t,"laya.html.dom.HTMLIframeElement",e$d),e$B(0,e$t.prototype,"href",e$d.prototype._$get_href,function(e$l){var e$k=this;e$l=this.formatURL(e$l);var e$d=new e$I;e$d.once("complete",null,function(e$d){var e$t=e$k.URI;e$k.URI=new e$z(e$l),e$k.innerHTML=e$d,!e$t||(e$k.URI=e$t)}),e$d.load(e$l,"text")})}(e$t)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$d,e$t){"use strict";for(var e$l in Object.defineProperty(e$t,"__esModule",{value:!0}),Laya){var e$k=Laya[e$l];e$k&&e$k.__isclass&&(e$t[e$l]=e$k)}}),function(e$W,e$d,e$w){e$w.un,e$w.uns;var e$k=e$w.static,e$i=e$w.class,e$A=e$w.getset,e$l=(e$w.__newvec,laya.display.Animation),e$D=(laya.utils.Browser,laya.utils.ClassUtils),e$B=laya.filters.ColorFilter,e$o=laya.utils.Ease,e$I=laya.events.Event,e$b=(laya.events.EventDispatcher,laya.display.css.Font),e$f=laya.display.FrameAnimation,e$t=laya.display.Graphics,e$J=laya.utils.Handler,e$c=laya.display.Input,e$e=laya.net.Loader,e$Y=(laya.display.Node,laya.maths.Point),e$z=laya.maths.Rectangle,e$g=laya.renders.Render,e$H=laya.display.Sprite,e$R=laya.display.Text,e$G=laya.resource.Texture,e$q=laya.utils.Tween,e$L=laya.utils.Utils,e$$=laya.utils.WeakObject;e$w.interface("laya.ui.IItem"),e$w.interface("laya.ui.ISelect"),e$w.interface("laya.ui.IRender"),e$w.interface("laya.ui.IComponent"),e$w.interface("laya.ui.IBox","IComponent");var e$p=function(){function e$d(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return e$i(e$d,"laya.ui.LayoutStyle"),e$k(e$d,["EMPTY",function(){return this.EMPTY=new e$d}]),e$d}(),e$M=function(){function e$d(){}return e$i(e$d,"laya.ui.Styles"),e$d.labelColor="#000000",e$d.buttonStateNum=3,e$d.scrollBarMinNum=15,e$d.scrollBarDelayTime=500,e$k(e$d,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),e$d}(),e$T=function(){function e$W(){}return e$i(e$W,"laya.ui.UIUtils"),e$W.fillArray=function(e$d,e$t,e$l){var e$k=e$d.concat();if(e$t)for(var e$W=e$t.split(","),e$i=0,e$A=Math.min(e$k.length,e$W.length);e$i<e$A;e$i++){var e$B=e$W[e$i];e$k[e$i]="true"==e$B||"false"!=e$B&&e$B,null!=e$l&&(e$k[e$i]=e$l(e$B))}return e$k},e$W.toColor=function(e$d){return e$L.toHexColor(e$d)},e$W.gray=function(e$d,e$t){void 0===e$t&&(e$t=!0),e$t?e$W.addFilter(e$d,e$W.grayFilter):e$W.clearFilter(e$d,e$B)},e$W.addFilter=function(e$d,e$t){var e$l=e$d.filters||[];e$l.push(e$t),e$d.filters=e$l},e$W.clearFilter=function(e$d,e$t){var e$l=e$d.filters;if(null!=e$l&&0<e$l.length){for(var e$k=e$l.length-1;-1<e$k;e$k--){var e$W=e$l[e$k];e$w.__typeof(e$W,e$t)&&e$l.splice(e$k,1)}e$d.filters=e$l}},e$W._getReplaceStr=function(e$d){return e$W.escapeSequence[e$d]},e$W.adptString=function(e$d){return e$d.replace(/\\(\w)/g,e$W._getReplaceStr)},e$W.getBindFun=function(e$d){var e$t=e$W._funMap.get(e$d);if(null==e$t){var e$l='"'+e$d+'"',e$k="(function(data){if(data==null)return;with(data){try{\nreturn "+(e$l=e$l.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";e$t=e$w._runScript(e$k),e$W._funMap.set(e$d,e$t)}return e$t},e$k(e$W,["grayFilter",function(){return this.grayFilter=new e$B([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new e$$}]),e$W}(),e$r=function(){function e$d(){}return e$i(e$d,"UIConfig"),e$d.touchScrollEnable=!0,e$d.mouseWheelEnable=!0,e$d.showButtons=!0,e$d.popupBgColor="#000000",e$d.popupBgAlpha=.5,e$d.closeDialogOnSide=!0,e$d}(),e$S=function(e$l){function e$z(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,e$z.__super.call(this),this._weakKeys=[]}e$i(e$z,"laya.ui.AutoBitmap",e$l);var e$d=e$z.prototype;return e$d.destroy=function(){if(e$e.clearObject(this,this._weakKey),this._weakKeys){for(var e$d=0,e$t=this._weakKeys.length;e$d<e$t;++e$d)e$e.clearObject(this,this._weakKeys[e$d]);this._weakKeys=null}e$l.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},e$d._setChanged=function(){this._isChanged||(this._isChanged=!0,e$w.timer.callLater(this,this.changeSource))},e$d.changeSource=function(){this._isChanged=!1;var e$d=this._source;if(e$d&&e$d.bitmap){var e$t=this.width,e$l=this.height,e$k=this._sizeGrid,e$W=e$d.sourceWidth,e$i=e$d.sourceHeight;if(!e$k||e$W===e$t&&e$i===e$l)this.cleanByTexture(e$d,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,e$t,e$l);else{e$e.clearObject(this,this._weakKey),e$d.$_GID||(e$d.$_GID=e$L.getGID());var e$A=e$d.$_GID+"."+e$t+"."+e$l+"."+e$k.join("."),e$B=e$e.findObject(e$A);if(e$L.isOKCmdList(e$B))return this._weakKey=e$A,e$e.keepObject(this,this._weakKey),void(this.cmds=e$B);this.clear();var e$o,e$I,e$b=e$k[0],e$f=e$k[1],e$J=e$k[2],e$c=e$k[3],e$Y=e$k[4],e$w=!1;if(e$t==e$W&&(e$c=e$f=0),e$l==e$i&&(e$b=e$J=0),e$t<e$c+e$f){var e$D=e$t;e$w=!0,e$t=e$c+e$f,this.save(),this.clipRect(0,0,e$D,e$l)}e$c&&e$b&&(e$o=e$z.getTexture(e$d,0,0,e$c,e$b),e$I=this._weakKeys[0],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[0]=e$o.weakKey),this.drawTexture(e$o,0,0,e$c,e$b)):(e$e.clearObject(this,e$I),this._weakKeys[0]="")),e$f&&e$b&&(e$o=e$z.getTexture(e$d,e$W-e$f,0,e$f,e$b),e$I=this._weakKeys[1],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[1]=e$o.weakKey),this.drawTexture(e$o,e$t-e$f,0,e$f,e$b)):(e$e.clearObject(this,e$I),this._weakKeys[1]="")),e$c&&e$J&&(e$o=e$z.getTexture(e$d,0,e$i-e$J,e$c,e$J),e$I=this._weakKeys[2],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[2]=e$o.weakKey),this.drawTexture(e$o,0,e$l-e$J,e$c,e$J)):(e$e.clearObject(this,e$I),this._weakKeys[2]="")),e$f&&e$J&&(e$o=e$z.getTexture(e$d,e$W-e$f,e$i-e$J,e$f,e$J),e$I=this._weakKeys[3],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[3]=e$o.weakKey),this.drawTexture(e$o,e$t-e$f,e$l-e$J,e$f,e$J)):(e$e.clearObject(this,e$I),this._weakKeys[3]="")),e$b&&(e$o=e$z.getTexture(e$d,e$c,0,e$W-e$c-e$f,e$b),e$I=this._weakKeys[4],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[4]=e$o.weakKey),this.drawBitmap(e$Y,e$o,e$c,0,e$t-e$c-e$f,e$b)):(e$e.clearObject(this,e$I),this._weakKeys[4]="")),e$J&&(e$o=e$z.getTexture(e$d,e$c,e$i-e$J,e$W-e$c-e$f,e$J),e$I=this._weakKeys[5],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[5]=e$o.weakKey),this.drawBitmap(e$Y,e$o,e$c,e$l-e$J,e$t-e$c-e$f,e$J)):(e$e.clearObject(this,e$I),this._weakKeys[5]="")),e$c&&(e$o=e$z.getTexture(e$d,0,e$b,e$c,e$i-e$b-e$J),e$I=this._weakKeys[6],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[6]=e$o.weakKey),this.drawBitmap(e$Y,e$o,0,e$b,e$c,e$l-e$b-e$J)):(e$e.clearObject(this,e$I),this._weakKeys[6]="")),e$f&&(e$o=e$z.getTexture(e$d,e$W-e$f,e$b,e$f,e$i-e$b-e$J),e$I=this._weakKeys[7],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[7]=e$o.weakKey),this.drawBitmap(e$Y,e$o,e$t-e$f,e$b,e$f,e$l-e$b-e$J)):(e$e.clearObject(this,e$I),this._weakKeys[7]="")),e$o=e$z.getTexture(e$d,e$c,e$b,e$W-e$c-e$f,e$i-e$b-e$J),e$I=this._weakKeys[8],e$o?(e$I!=e$o.weakKey&&(e$e.clearObject(this,e$I),e$e.keepObject(this,e$o.weakKey),this._weakKeys[8]=e$o.weakKey),this.drawBitmap(e$Y,e$o,e$c,e$b,e$t-e$c-e$f,e$l-e$b-e$J)):(e$e.clearObject(this,e$I),this._weakKeys[8]=""),e$w&&this.restore(),this.autoCacheCmd&&!e$g.isConchApp&&(e$e.saveObject(e$A,this.cmds,null),this._weakKey=e$A,e$e.keepObject(this,this._weakKey))}this._repaint()}},e$d.drawBitmap=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=0),e$W<.1||e$i<.1||(!e$d||e$t.width==e$W&&e$t.height==e$i?this.drawTexture(e$t,e$l,e$k,e$W,e$i):this.fillTexture(e$t,e$l,e$k,e$W,e$i))},e$d.clear=function(e$d){void 0===e$d&&(e$d=!0),e$l.prototype.clear.call(this,!1)},e$A(0,e$d,"sizeGrid",function(){return this._sizeGrid},function(e$d){this._sizeGrid=e$d,this._setChanged()}),e$A(0,e$d,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(e$d){this._width!=e$d&&(this._width=e$d,this._setChanged())}),e$A(0,e$d,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(e$d){this._height!=e$d&&(this._height=e$d,this._setChanged())}),e$A(0,e$d,"source",function(){return this._source},function(e$d){e$d?(this._source=e$d,this._setChanged()):(this._source=null,this.clear())}),e$z.getTexture=function(e$d,e$t,e$l,e$k,e$W){e$k<=0&&(e$k=1),e$W<=0&&(e$W=1),e$d.$_GID||(e$d.$_GID=e$L.getGID());var e$i=e$d.$_GID+"."+e$t+"."+e$l+"."+e$k+"."+e$W,e$A=e$e.findObject(e$i);if((!e$A||!e$A.source)&&(e$A=e$G.createFromTexture(e$d,e$t,e$l,e$k,e$W))){if(e$d.alphaTexture){var e$B=e$d.width/e$d.alphaTexture.width;e$A.alphaTexture=e$G.createFromTexture(e$d.alphaTexture,e$t/e$B,e$l/e$B,e$k/e$B,e$W/e$B)}e$e.saveObject(e$i,e$A),e$A.weakKey=e$i}return e$A},e$z}(e$t),e$j=(function(e$d){function e$t(){e$t.__super.call(this)}e$i(e$t,"laya.ui.UIEvent",e$I),e$t.SHOW_TIP="showtip",e$t.HIDE_TIP="hidetip"}(),function(e$t){function e$d(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,e$d.__super.call(this),this._layout=e$p.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}e$i(e$d,"laya.ui.Component",e$t);var e$l=e$d.prototype;return e$w.imps(e$l,{"laya.ui.IComponent":!0}),e$l.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},e$l.preinitialize=function(){},e$l.createChildren=function(){},e$l.initialize=function(){},e$l.callLater=function(e$d,e$t){e$w.timer.callLater(this,e$d,e$t)},e$l.runCallLater=function(e$d){e$w.timer.runCallLater(this,e$d)},e$l.commitMeasure=function(){},e$l.changeSize=function(){this.event("resize")},e$l.getLayout=function(){return this._layout===e$p.EMPTY&&(this._layout=new e$p),this._layout},e$l._setLayoutEnabled=function(e$d){this._layout&&this._layout.enable!=e$d&&(this._layout.enable=e$d,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},e$l.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},e$l.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},e$l.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},e$l.resetLayoutX=function(){var e$d=this._layout;if(isNaN(e$d.anchorX)||(this.pivotX=e$d.anchorX*this.width),this.layoutEnabled){var e$t=this.parent;e$t&&(isNaN(e$d.centerX)?isNaN(e$d.left)?isNaN(e$d.right)||(this.x=Math.round(e$t.width-this.displayWidth-e$d.right+this.pivotX*this.scaleX)):(this.x=Math.round(e$d.left+this.pivotX*this.scaleX),isNaN(e$d.right)||(this.width=(e$t._width-e$d.left-e$d.right)/(this.scaleX||.01))):this.x=Math.round(.5*(e$t.width-this.displayWidth)+e$d.centerX+this.pivotX*this.scaleX))}},e$l.resetLayoutY=function(){var e$d=this._layout;if(isNaN(e$d.anchorY)||(this.pivotY=e$d.anchorY*this.height),this.layoutEnabled){var e$t=this.parent;e$t&&(isNaN(e$d.centerY)?isNaN(e$d.top)?isNaN(e$d.bottom)||(this.y=Math.round(e$t.height-this.displayHeight-e$d.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(e$d.top+this.pivotY*this.scaleY),isNaN(e$d.bottom)||(this.height=(e$t._height-e$d.top-e$d.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(e$t.height-this.displayHeight)+e$d.centerY+this.pivotY*this.scaleY))}},e$l.onMouseOver=function(e$d){e$w.stage.event("showtip",this._toolTip)},e$l.onMouseOut=function(e$d){e$w.stage.event("hidetip",this._toolTip)},e$A(0,e$l,"displayWidth",function(){return this.width*this.scaleX}),e$A(0,e$l,"width",function(){return this._width?this._width:this.measureWidth},function(e$d){this._width!=e$d&&(this._width=e$d,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),e$A(0,e$l,"measureWidth",function(){var e$d=0;this.commitMeasure();for(var e$t=this.numChildren-1;-1<e$t;e$t--){var e$l=this.getChildAt(e$t);e$l.visible&&(e$d=Math.max(e$l.x+e$l.width*e$l.scaleX,e$d))}return e$d}),e$A(0,e$l,"displayHeight",function(){return this.height*this.scaleY}),e$A(0,e$l,"height",function(){return this._height?this._height:this.measureHeight},function(e$d){this._height!=e$d&&(this._height=e$d,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),e$A(0,e$l,"dataSource",function(){return this._dataSource},function(e$d){for(var e$t in this._dataSource=e$d,this._dataSource)this.hasOwnProperty(e$t)&&"function"!=typeof this[e$t]&&(this[e$t]=this._dataSource[e$t])}),e$A(0,e$l,"scaleY",e$t.prototype._$get_scaleY,function(e$d){e$w.superGet(e$H,this,"scaleY")!=e$d&&(e$w.superSet(e$H,this,"scaleY",e$d),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),e$A(0,e$l,"measureHeight",function(){var e$d=0;this.commitMeasure();for(var e$t=this.numChildren-1;-1<e$t;e$t--){var e$l=this.getChildAt(e$t);e$l.visible&&(e$d=Math.max(e$l.y+e$l.height*e$l.scaleY,e$d))}return e$d}),e$A(0,e$l,"scaleX",e$t.prototype._$get_scaleX,function(e$d){e$w.superGet(e$H,this,"scaleX")!=e$d&&(e$w.superSet(e$H,this,"scaleX",e$d),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),e$A(0,e$l,"top",function(){return this._layout.top},function(e$d){e$d!=this._layout.top&&(this.getLayout().top=e$d,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$A(0,e$l,"bottom",function(){return this._layout.bottom},function(e$d){e$d!=this._layout.bottom&&(this.getLayout().bottom=e$d,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$A(0,e$l,"left",function(){return this._layout.left},function(e$d){e$d!=this._layout.left&&(this.getLayout().left=e$d,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$A(0,e$l,"right",function(){return this._layout.right},function(e$d){e$d!=this._layout.right&&(this.getLayout().right=e$d,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$A(0,e$l,"centerX",function(){return this._layout.centerX},function(e$d){e$d!=this._layout.centerX&&(this.getLayout().centerX=e$d,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$A(0,e$l,"centerY",function(){return this._layout.centerY},function(e$d){e$d!=this._layout.centerY&&(this.getLayout().centerY=e$d,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$A(0,e$l,"anchorX",function(){return this._layout.anchorX},function(e$d){e$d!=this._layout.anchorX&&(this.getLayout().anchorX=e$d,this._setLayoutEnabled(!0)),this.resetLayoutX()}),e$A(0,e$l,"anchorY",function(){return this._layout.anchorY},function(e$d){e$d!=this._layout.anchorY&&(this.getLayout().anchorY=e$d,this._setLayoutEnabled(!0)),this.resetLayoutY()}),e$A(0,e$l,"tag",function(){return this._tag},function(e$d){this._tag=e$d}),e$A(0,e$l,"toolTip",function(){return this._toolTip},function(e$d){this._toolTip!=e$d&&(null!=(this._toolTip=e$d)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),e$A(0,e$l,"comXml",function(){return this._comXml},function(e$d){this._comXml=e$d}),e$A(0,e$l,"gray",function(){return this._gray},function(e$d){e$d!==this._gray&&(this._gray=e$d,e$T.gray(this,e$d))}),e$A(0,e$l,"disabled",function(){return this._disabled},function(e$d){e$d!==this._disabled&&(this.gray=this._disabled=e$d,this.mouseEnabled=!e$d)}),e$d}(e$H)),e$C=function(e$d){function e$t(){this.lockLayer=null,this.popupEffect=function(e$d){e$d.scale(1,1),e$q.from(e$d,{x:e$w.stage.width/2,y:e$w.stage.height/2,scaleX:0,scaleY:0},300,e$o.backOut,e$J.create(this,this.doOpen,[e$d]))},this.closeEffect=function(e$d,e$t){e$q.to(e$d,{x:e$w.stage.width/2,y:e$w.stage.height/2,scaleX:0,scaleY:0},300,e$o.strongOut,e$J.create(this,this.doClose,[e$d,e$t]))},e$t.__super.call(this),this.maskLayer=new e$H,this.popupEffectHandler=e$J.create(this,this.popupEffect,null,!1),this.closeEffectHandler=e$J.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,e$w.stage.addChild(this),e$w.stage.on("resize",this,this._onResize),e$r.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}e$i(e$t,"laya.ui.DialogManager",e$H);var e$l=e$t.prototype;return e$l._closeOnSide=function(){var e$d=this.getChildAt(this.numChildren-1);e$d instanceof laya.ui.Dialog&&e$d.close("side")},e$l.setLockView=function(e$d){this.lockLayer||(this.lockLayer=new e$K,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(e$w.stage.width,e$w.stage.height)),this.lockLayer.removeChildren(),e$d&&(e$d.centerX=e$d.centerY=0,this.lockLayer.addChild(e$d))},e$l._onResize=function(e$d){var e$t=this.maskLayer.width=e$w.stage.width,e$l=this.maskLayer.height=e$w.stage.height;this.lockLayer&&this.lockLayer.size(e$t,e$l),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,e$t,e$l,e$r.popupBgColor),this.maskLayer.alpha=e$r.popupBgAlpha;for(var e$k=this.numChildren-1;-1<e$k;e$k--){var e$W=this.getChildAt(e$k);e$W.popupCenter&&this._centerDialog(e$W)}},e$l._centerDialog=function(e$d){e$d.x=Math.round((e$w.stage.width-e$d.width>>1)+e$d.pivotX),e$d.y=Math.round((e$w.stage.height-e$d.height>>1)+e$d.pivotY)},e$l.open=function(e$d,e$t,e$l){void 0===e$t&&(e$t=!1),void 0===e$l&&(e$l=!1),e$t&&this._closeAll(),e$d.popupCenter&&this._centerDialog(e$d),this.addChild(e$d),(e$d.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),e$l&&null!=e$d.popupEffect?e$d.popupEffect.runWith(e$d):this.doOpen(e$d),this.event("open")},e$l.doOpen=function(e$d){e$d.onOpened()},e$l.lock=function(e$d){this.lockLayer&&(e$d?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},e$l.close=function(e$d,e$t,e$l){void 0===e$l&&(e$l=!1),e$l&&null!=e$d.closeEffect?e$d.closeEffect.runWith([e$d,e$t]):this.doClose(e$d,e$t),this.event("close")},e$l.doClose=function(e$d,e$t){e$d.removeSelf(),e$d.isModal&&this._checkMask(),e$d.closeHandler&&e$d.closeHandler.runWith(e$t),e$d.onClosed(e$t)},e$l.closeAll=function(){this._closeAll(),this.event("close")},e$l._closeAll=function(){for(var e$d=this.numChildren-1;-1<e$d;e$d--){var e$t=this.getChildAt(e$d);e$t&&null!=e$t.close&&this.doClose(e$t)}},e$l.getDialogsByGroup=function(e$d){for(var e$t=[],e$l=this.numChildren-1;-1<e$l;e$l--){var e$k=this.getChildAt(e$l);e$k&&e$k.group===e$d&&e$t.push(e$k)}return e$t},e$l.closeByGroup=function(e$d){for(var e$t=[],e$l=this.numChildren-1;-1<e$l;e$l--){var e$k=this.getChildAt(e$l);e$k&&e$k.group===e$d&&(e$k.close(),e$t.push(e$k))}return e$t},e$l._checkMask=function(){this.maskLayer.removeSelf();for(var e$d=this.numChildren-1;-1<e$d;e$d--){var e$t=this.getChildAt(e$d);if(e$t&&e$t.isModal)return void this.addChildAt(this.maskLayer,e$d)}},e$t}(),e$K=function(e$d){function e$t(){e$t.__super.call(this)}e$i(e$t,"laya.ui.Box",e$d);var e$l=e$t.prototype;return e$w.imps(e$l,{"laya.ui.IBox":!0}),e$A(0,e$l,"dataSource",e$d.prototype._$get_dataSource,function(e$d){for(var e$t in this._dataSource=e$d){var e$l=this.getChildByName(e$t);e$l?e$l.dataSource=e$d[e$t]:this.hasOwnProperty(e$t)&&"function"!=typeof this[e$t]&&(this[e$t]=e$d[e$t])}}),e$t}(e$j),e$x=function(e$t){function e$l(e$d,e$t){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,e$l.__super.call(this),this._labelColors=e$M.buttonLabelColors,this._stateNum=e$M.buttonStateNum,void 0===e$t&&(e$t=""),this.skin=e$d,this.label=e$t}e$i(e$l,"laya.ui.Button",e$t);var e$d=e$l.prototype;return e$w.imps(e$d,{"laya.ui.ISelect":!0}),e$d.destroy=function(e$d){this.clearEvent(),e$e.clearCache(this,this._skin),e$e.clearObject(this,this._weakKey),void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(e$d),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},e$d.clearEvent=function(){this._skin&&e$W.atalsNotify&&e$W.atalsNotify.off(this._skin,this,this._setBtnSource)},e$d.createChildren=function(){this.graphics=this._bitmap=new e$S},e$d.createText=function(){this._text||(this._text=new e$R,this._text.overflow=e$R.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},e$d.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},e$d.onMouse=function(e$d){if(!1!==this.toggle||!this._selected)return"click"===e$d.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=e$l.stateMap[e$d.type]))},e$d.changeClips=function(){var e$d=e$e.getRes(this._skin);if(e$d)if(this._skin&&""!=this._skin){e$e.clearObject(this,this._weakKey);var e$t=e$d.sourceWidth,e$l=e$d.sourceHeight/this._stateNum;e$d.$_GID||(e$d.$_GID=e$L.getGID());var e$k=e$d.$_GID+"-"+this._stateNum,e$W=e$e.findObject(e$k);if(e$L.isOkTextureList(e$W)||(e$W=null),e$W)this._weakKey=e$k,e$e.keepObject(this,this._weakKey),this._sources=e$W;else{if(this._sources=[],1===this._stateNum)this._sources.push(e$d);else for(var e$i=0;e$i<this._stateNum;e$i++){var e$A=e$G.createFromTexture(e$d,0,e$l*e$i,e$t,e$l);if(e$d.alphaTexture){var e$B=e$d.width/e$d.alphaTexture.width;e$A.alphaTexture=e$G.createFromTexture(e$d.alphaTexture,0/e$B,e$l*e$i/e$B,e$t/e$B,e$l/e$B)}this._sources.push(e$A)}e$e.saveObject(e$k,this._sources),this._weakKey=e$k,e$e.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||e$t,this._bitmap.height=this._height||e$l,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=e$t)}else console.warn("lose skin ",this._skin,this.name,this.__className)},e$d.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var e$d=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[e$d]),this.label&&(this._text.color=this._labelColors[e$d],this._strokeColors&&(this._text.strokeColor=this._strokeColors[e$d]))},e$d._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},e$A(0,e$d,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(e$d){this.createText(),this._text.strokeColor=e$d}),e$A(0,e$d,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),e$A(0,e$d,"skin",function(){return this._skin},function(e$d){if(this._skin!=e$d)if(this.clearEvent(),e$e.clearCache(this,this._skin),this._skin=e$d,e$e.keepCache(this,this._skin),e$e.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var e$t=e$W.resAtalsObj&&e$W.resAtalsObj[this._skin];e$t?(e$W.atalsNotify&&e$W.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=e$t.sourceW),0==this.height&&(this.height=e$t.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),e$d._setBtnSource=function(e$d,e$t){e$d===this._skin&&e$t&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},e$A(0,e$d,"state",function(){return this._state},function(e$d){this._state!=e$d&&(this._state=e$d,this._setStateChanged())}),e$A(0,e$d,"text",function(){return this.createText(),this._text}),e$A(0,e$d,"stateNum",function(){return this._stateNum},function(e$d){"string"==typeof e$d&&(e$d=parseInt(e$d)),this._stateNum!=e$d&&(this._stateNum=e$d<1?1:3<e$d?3:e$d,this.callLater(this.changeClips))}),e$A(0,e$d,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(e$d){this._strokeColors=e$T.fillArray(e$M.buttonLabelColors,e$d,String),this._setStateChanged()}),e$A(0,e$d,"labelColors",function(){return this._labelColors.join(",")},function(e$d){this._labelColors=e$T.fillArray(e$M.buttonLabelColors,e$d,String),this._setStateChanged()}),e$A(0,e$d,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),e$A(0,e$d,"label",function(){return this._text?this._text.text:null},function(e$d){(this._text||e$d)&&(this.createText(),this._text.text!=e$d&&(e$d&&!this._text.parent&&this.addChild(this._text),this._text.text=(e$d+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),e$A(0,e$d,"selected",function(){return this._selected},function(e$d){this._selected!=e$d&&(this._selected=e$d,this.state=this._selected?2:0,this.event("change"))}),e$A(0,e$d,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(e$d){this.createText(),this._text.padding=e$T.fillArray(e$M.labelPadding,e$d,Number)}),e$A(0,e$d,"labelSize",function(){return this.createText(),this._text.fontSize},function(e$d){this.createText(),this._text.fontSize=e$d}),e$A(0,e$d,"labelStroke",function(){return this.createText(),this._text.stroke},function(e$d){this.createText(),this._text.stroke=e$d}),e$A(0,e$d,"labelBold",function(){return this.createText(),this._text.bold},function(e$d){this.createText(),this._text.bold=e$d}),e$A(0,e$d,"labelFont",function(){return this.createText(),this._text.font},function(e$d){this.createText(),this._text.font=e$d}),e$A(0,e$d,"labelAlign",function(){return this.createText(),this._text.align},function(e$d){this.createText(),this._text.align=e$d}),e$A(0,e$d,"clickHandler",function(){return this._clickHandler},function(e$d){this._clickHandler=e$d}),e$A(0,e$d,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e$d){this._bitmap.sizeGrid=e$T.fillArray(e$M.defaultSizeGrid,e$d,Number)}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$j,this,"width",e$d),this._autoSize&&(this._bitmap.width=e$d,this._text&&(this._text.width=e$d))}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$j,this,"height",e$d),this._autoSize&&(this._bitmap.height=e$d,this._text&&(this._text.height=e$d))}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)||"string"==typeof e$d?this.label=e$d+"":e$w.superSet(e$j,this,"dataSource",e$d)}),e$A(0,e$d,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(e$d){this._bitmap._offset=e$d?e$T.fillArray([1,1],e$d,Number):[]}),e$k(e$l,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),e$l}(e$j),e$n=function(e$t){function e$k(e$d,e$t,e$l){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,e$k.__super.call(this),void 0===e$t&&(e$t=1),void 0===e$l&&(e$l=1),this._clipX=e$t,this._clipY=e$l,this.skin=e$d}e$i(e$k,"laya.ui.Clip",e$t);var e$d=e$k.prototype;return e$d.destroy=function(e$d){this.clearEvent(),this.clearLoad(),e$e.clearCache(this,this._skin),e$e.clearObject(this,this._weakKey),void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},e$d.dispose=function(){this.destroy(!0),e$w.loader.clearRes(this._skin)},e$d.createChildren=function(){this.graphics=this._bitmap=new e$S},e$d._onDisplay=function(e$d){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},e$d.changeClip=function(){if(this._clipChanged=!1,this._skin){var e$d=e$e.getRes(this._skin);if(e$d)this.loadComplete(this._skin,e$d);else{if(e$W.resAtalsObj&&e$W.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=e$J.create(this,this.loadComplete,[this._skin]),this._progress=null,e$w.loader.load(this._skin,this._complete,this._progress)}}},e$d.loadComplete=function(e$d,e$t){if(e$d===this._skin&&e$t){e$e.clearObject(this,this._weakKey);var e$l=this._clipWidth||Math.ceil(e$t.sourceWidth/this._clipX),e$k=this._clipHeight||Math.ceil(e$t.sourceHeight/this._clipY),e$W=this._skin+e$l+e$k,e$i=e$e.findObject(e$W);if(e$L.isOkTextureList(e$i)||(e$i=null),e$i)this._weakKey=e$W,e$e.keepObject(this,this._weakKey),this._sources=e$i;else{this._sources=[];for(var e$A=0;e$A<this._clipY;e$A++)for(var e$B=0;e$B<this._clipX;e$B++){var e$o=e$G.createFromTexture(e$t,e$l*e$B,e$k*e$A,e$l,e$k);if(e$t.alphaTexture){var e$I=e$t.width/e$t.alphaTexture.width;e$o.alphaTexture=e$G.createFromTexture(e$t.alphaTexture,e$l*e$B/e$I,e$k*e$A/e$I,e$l/e$I,e$k/e$I)}this._sources.push(e$o)}e$e.saveObject(e$W,this._sources),this._weakKey=e$W,e$e.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},e$d.play=function(e$d,e$t){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=-1),this._isPlaying=!0,this.index=e$d,this._toIndex=e$t,this._index++,e$w.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},e$d._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},e$d.stop=function(){this._isPlaying=!1,e$w.timer.clear(this,this._loop),this.event("complete")},e$d._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},e$A(0,e$d,"interval",function(){return this._interval},function(e$d){this._interval!=e$d&&(this._interval=e$d,this._isPlaying&&this.play())}),e$d.clearEvent=function(){this._skin&&e$W.atalsNotify&&e$W.atalsNotify.off(this._skin,this,this._setBtnSource)},e$d.clearLoad=function(){this._skin&&((this._complete||this._progress)&&e$w.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},e$A(0,e$d,"skin",function(){return this._skin},function(e$d){if(this._skin!=e$d)if(this.clearLoad(),this.clearEvent(),e$e.clearCache(this,this._skin),this._skin=e$d){e$e.keepCache(this,this._skin);var e$t=e$e.getRes(e$d),e$l=e$W.resAtalsObj&&e$W.resAtalsObj[this._skin];!e$t&&e$l?e$W.atalsNotify&&e$W.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),e$d._setBtnSource=function(e$d,e$t){e$d===this._skin&&e$t&&(this.loadComplete(e$d,e$t),this.clearEvent())},e$A(0,e$d,"sources",function(){return this._sources},function(e$d){this._sources=e$d,this.index=this._index,this.event("loaded")}),e$A(0,e$d,"clipX",function(){return this._clipX},function(e$d){this._clipX=e$d||1,this._setClipChanged()}),e$A(0,e$d,"clipY",function(){return this._clipY},function(e$d){this._clipY=e$d||1,this._setClipChanged()}),e$A(0,e$d,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),e$A(0,e$d,"clipWidth",function(){return this._clipWidth},function(e$d){this._clipWidth=e$d,this._setClipChanged()}),e$A(0,e$d,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e$d){this._bitmap.sizeGrid=e$T.fillArray(e$M.defaultSizeGrid,e$d,Number)}),e$A(0,e$d,"group",function(){return this._group},function(e$d){e$d&&this._skin&&e$e.setGroup(this._skin,e$d),this._group=e$d}),e$A(0,e$d,"clipHeight",function(){return this._clipHeight},function(e$d){this._clipHeight=e$d,this._setClipChanged()}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$j,this,"width",e$d),this._bitmap.width=e$d}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$j,this,"height",e$d),this._bitmap.height=e$d}),e$A(0,e$d,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),e$A(0,e$d,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),e$A(0,e$d,"index",function(){return this._index},function(e$d){this._index=e$d,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[e$d]),this.event("change")}),e$A(0,e$d,"autoPlay",function(){return this._autoPlay},function(e$d){this._autoPlay!=e$d&&((this._autoPlay=e$d)?this.play():this.stop())}),e$A(0,e$d,"isPlaying",function(){return this._isPlaying},function(e$d){this._isPlaying=e$d}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)&&Math.floor(e$d)==e$d||"string"==typeof e$d?this.index=parseInt(e$d):e$w.superSet(e$j,this,"dataSource",e$d)}),e$A(0,e$d,"bitmap",function(){return this._bitmap}),e$k}(e$j),e$Q=function(e$t){function e$d(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,e$d.__super.call(this)}e$i(e$d,"laya.ui.ColorPicker",e$t);var e$l=e$d.prototype;return e$l.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._colorPanel&&this._colorPanel.destroy(e$d),this._colorButton&&this._colorButton.destroy(e$d),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},e$l.createChildren=function(){this.addChild(this._colorButton=new e$x),this._colorPanel=new e$K,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new e$H),this._colorPanel.addChild(this._colorBlock=new e$H),this._colorPanel.addChild(this._colorInput=new e$c)},e$l.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},e$l.onPanelMouseDown=function(e$d){e$d.stopPropagation()},e$l.changePanel=function(){this._panelChanged=!1;var e$d=this._colorPanel.graphics;e$d.clear(),e$d.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(e$d=this._colorTiles.graphics).clear();for(var e$t=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],e$l=0;e$l<12;e$l++)for(var e$k=0;e$k<20;e$k++){var e$W=0;e$W=0===e$k?e$t[e$l]:1===e$k?0:51*(((3*e$l+e$k/6)%3<<0)+3*(e$l/6<<0))<<16|e$k%6*51<<8|(e$l<<0)%6*51;var e$i=e$T.toColor(e$W);this._colors.push(e$i);var e$A=e$k*this._gridSize,e$B=e$l*this._gridSize;e$d.drawRect(e$A,e$B,this._gridSize,this._gridSize,e$i,"#000000")}},e$l.onColorButtonClick=function(e$d){this._colorPanel.parent?this.close():this.open()},e$l.open=function(){var e$d=this.localToGlobal(new e$Y),e$t=e$d.x+this._colorPanel.width<=e$w.stage.width?e$d.x:e$w.stage.width-this._colorPanel.width,e$l=e$d.y+this._colorButton.height;e$l=e$l+this._colorPanel.height<=e$w.stage.height?e$l:e$d.y-this._colorPanel.height,this._colorPanel.pos(e$t,e$l),this._colorPanel.zOrder=1001,e$w._currentStage.addChild(this._colorPanel),e$w.stage.on("mousedown",this,this.removeColorBox)},e$l.close=function(){e$w.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},e$l.removeColorBox=function(e$d){this.close()},e$l.onColorFieldKeyDown=function(e$d){13==e$d.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),e$d.stopPropagation())},e$l.onColorInputChange=function(e$d){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},e$l.onColorTilesClick=function(e$d){this.selectedColor=this.getColorByMouse(),this.close()},e$l.onColorTilesMouseMove=function(e$d){this._colorInput.focus=!1;var e$t=this.getColorByMouse();this._colorInput.text=e$t,this.drawBlock(e$t)},e$l.getColorByMouse=function(){var e$d=this._colorTiles.getMousePoint(),e$t=Math.floor(e$d.x/this._gridSize),e$l=Math.floor(e$d.y/this._gridSize);return this._colors[20*e$l+e$t]},e$l.drawBlock=function(e$d){var e$t=this._colorBlock.graphics;e$t.clear();var e$l=e$d||"#ffffff";e$t.drawRect(0,0,50,20,e$l,this._borderColor),e$d||e$t.drawLine(0,0,50,20,"#ff0000")},e$l.changeColor=function(){var e$d=this.graphics;e$d.clear();var e$t=this._selectedColor||"#000000";e$d.drawRect(0,0,this._colorButton.width,this._colorButton.height,e$t)},e$l._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},e$A(0,e$l,"inputBgColor",function(){return this._inputBgColor},function(e$d){this._inputBgColor=e$d,this._setPanelChanged()}),e$A(0,e$l,"selectedColor",function(){return this._selectedColor},function(e$d){this._selectedColor!=e$d&&(this._selectedColor=this._colorInput.text=e$d,this.drawBlock(e$d),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",e$I.EMPTY.setTo("change",this,this)))}),e$A(0,e$l,"skin",function(){return this._colorButton.skin},function(e$d){this._colorButton.skin=e$d,this.changeColor()}),e$A(0,e$l,"bgColor",function(){return this._bgColor},function(e$d){this._bgColor=e$d,this._setPanelChanged()}),e$A(0,e$l,"borderColor",function(){return this._borderColor},function(e$d){this._borderColor=e$d,this._setPanelChanged()}),e$A(0,e$l,"inputColor",function(){return this._inputColor},function(e$d){this._inputColor=e$d,this._setPanelChanged()}),e$d}(e$j),e$y=function(e$t){function e$l(e$d,e$t){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,e$l.__super.call(this),this._itemColors=e$M.comboBoxItemColors,this.skin=e$d,this.labels=e$t}e$i(e$l,"laya.ui.ComboBox",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._button&&this._button.destroy(e$d),this._list&&this._list.destroy(e$d),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},e$d.createChildren=function(){this.addChild(this._button=new e$x),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},e$d._createList=function(){this._list=new e$X,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},e$d._setListEvent=function(e$d){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=e$J.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},e$d.onListDown=function(e$d){e$d.stopPropagation()},e$d.onScrollBarDown=function(e$d){e$d.stopPropagation()},e$d.onButtonMouseDown=function(e$d){this.callLater(this.switchTo,[!this._isOpen])},e$d.changeList=function(){this._listChanged=!1;var e$d=this.width-2,e$t=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:e$d,height:this._itemHeight,fontSize:this._itemSize,color:e$t}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},e$d.onlistItemMouse=function(e$d,e$t){var e$l=e$d.type;if("mouseover"===e$l||"mouseout"===e$l){if(this._isCustomList)return;var e$k=this._list.getCell(e$t);if(!e$k)return;var e$W=e$k.getChildByName("label");e$W&&("mouseover"===e$l?(e$W.bgColor=this._itemColors[0],e$W.color=this._itemColors[1]):(e$W.bgColor=null,e$W.color=this._itemColors[2]))}else"click"===e$l&&(this.selectedIndex=e$t,this.isOpen=!1)},e$d.switchTo=function(e$d){this.isOpen=e$d},e$d.changeOpen=function(){this.isOpen=!this._isOpen},e$d.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var e$d=this._list.graphics;e$d.clear(),e$d.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var e$t=this._list.array||[],e$l=e$t.length=0,e$k=this._labels.length;e$l<e$k;e$l++)e$t.push({label:this._labels[e$l]});this._list.height=this._listHeight,this._list.array=e$t},e$d.changeSelected=function(){this._button.label=this.selectedLabel},e$d._onStageMouseWheel=function(e$d){this._list&&!this._list.contains(e$d.target)&&this.removeList(null)},e$d.removeList=function(e$d){e$w.stage.off("mousedown",this,this.removeList),e$w.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},e$A(0,e$d,"selectedIndex",function(){return this._selectedIndex},function(e$d){this._selectedIndex!=e$d&&(this._selectedIndex=e$d,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[e$I.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),e$A(0,e$d,"measureHeight",function(){return this._button.height}),e$A(0,e$d,"skin",function(){return this._button.skin},function(e$d){this._button.skin!=e$d&&(this._button.skin=e$d,this._listChanged=!0)}),e$A(0,e$d,"measureWidth",function(){return this._button.width}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$j,this,"width",e$d),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),e$A(0,e$d,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(e$d){this.selectedIndex=this._labels.indexOf(e$d)}),e$A(0,e$d,"labels",function(){return this._labels.join(",")},function(e$d){0<this._labels.length&&(this.selectedIndex=-1),e$d?this._labels=e$d.split(","):this._labels.length=0,this._itemChanged=!0}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$j,this,"height",e$d),this._button.height=this._height}),e$A(0,e$d,"selectHandler",function(){return this._selectHandler},function(e$d){this._selectHandler=e$d}),e$A(0,e$d,"visibleNum",function(){return this._visibleNum},function(e$d){this._visibleNum=e$d,this._listChanged=!0}),e$A(0,e$d,"labelBold",function(){return this._button.text.bold},function(e$d){this._button.text.bold=e$d}),e$A(0,e$d,"itemColors",function(){return String(this._itemColors)},function(e$d){this._itemColors=e$T.fillArray(this._itemColors,e$d,String),this._listChanged=!0}),e$A(0,e$d,"itemSize",function(){return this._itemSize},function(e$d){this._itemSize=e$d,this._listChanged=!0}),e$A(0,e$d,"scrollBar",function(){return this.list.scrollBar}),e$A(0,e$d,"isOpen",function(){return this._isOpen},function(e$d){if(this._isOpen!=e$d)if(this._isOpen=e$d,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var e$t=this.localToGlobal(e$Y.TEMP.setTo(0,0)),e$l=e$t.y+this._button.height;e$l=e$l+this._listHeight<=e$w.stage.height?e$l:e$t.y-this._listHeight,this._list.pos(e$t.x,e$l),this._list.zOrder=1001,e$w._currentStage.addChild(this._list),e$w.stage.once("mousedown",this,this.removeList),e$w.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),e$A(0,e$d,"scrollBarSkin",function(){return this._scrollBarSkin},function(e$d){this._scrollBarSkin=e$d}),e$A(0,e$d,"sizeGrid",function(){return this._button.sizeGrid},function(e$d){this._button.sizeGrid=e$d}),e$A(0,e$d,"button",function(){return this._button}),e$A(0,e$d,"list",function(){return this._list||this._createList(),this._list},function(e$d){e$d&&(e$d.removeSelf(),this._isCustomList=!0,this._list=e$d,this._setListEvent(e$d),this._itemHeight=e$d.getCell(0).height+e$d.spaceY)}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)&&Math.floor(e$d)==e$d||"string"==typeof e$d?this.selectedIndex=parseInt(e$d):e$d instanceof Array?this.labels=e$d.join(","):e$w.superSet(e$j,this,"dataSource",e$d)}),e$A(0,e$d,"labelColors",function(){return this._button.labelColors},function(e$d){this._button.labelColors!=e$d&&(this._button.labelColors=e$d)}),e$A(0,e$d,"labelPadding",function(){return this._button.text.padding.join(",")},function(e$d){this._button.text.padding=e$T.fillArray(e$M.labelPadding,e$d,Number)}),e$A(0,e$d,"labelSize",function(){return this._button.text.fontSize},function(e$d){this._button.text.fontSize=e$d}),e$A(0,e$d,"labelFont",function(){return this._button.text.font},function(e$d){this._button.text.font=e$d}),e$A(0,e$d,"stateNum",function(){return this._button.stateNum},function(e$d){this._button.stateNum=e$d}),e$l}(e$j),e$V=function(e$t){function e$l(e$d){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,e$l.__super.call(this),this._showButtons=e$r.showButtons,this._touchScrollEnable=e$r.touchScrollEnable,this._mouseWheelEnable=e$r.mouseWheelEnable,this.skin=e$d,this.max=1}e$i(e$l,"laya.ui.ScrollBar",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),this.stopScroll(),this.target=null,e$t.prototype.destroy.call(this,e$d),this.upButton&&this.upButton.destroy(e$d),this.downButton&&this.downButton.destroy(e$d),this.slider&&this.slider.destroy(e$d),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},e$d.createChildren=function(){this.addChild(this.slider=new e$Z),this.addChild(this.upButton=new e$x),this.addChild(this.downButton=new e$x)},e$d.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},e$d.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},e$d.onButtonMouseDown=function(e$d){var e$t=e$d.currentTarget===this.upButton;this.slide(e$t),e$w.timer.once(e$M.scrollBarDelayTime,this,this.startLoop,[e$t]),e$w.stage.once("mouseup",this,this.onStageMouseUp)},e$d.startLoop=function(e$d){e$w.timer.frameLoop(1,this,this.slide,[e$d])},e$d.slide=function(e$d){e$d?this.value-=this._scrollSize:this.value+=this._scrollSize},e$d.onStageMouseUp=function(e$d){e$w.timer.clear(this,this.startLoop),e$w.timer.clear(this,this.slide)},e$d.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},e$d.changeSize=function(){e$t.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},e$d.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},e$d.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},e$d.setScroll=function(e$d,e$t,e$l){this.runCallLater(this.changeSize),this.slider.setSlider(e$d,e$t,e$l),this.slider.bar.visible=0<e$t,!this._hide&&this.autoHide&&(this.visible=!1)},e$d.onTargetMouseWheel=function(e$d){this.value-=e$d.delta*this._scrollSize,this.target=this._target},e$d.onTargetMouseDown=function(e$d){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new e$Y),this._lastPoint.setTo(e$w.stage.mouseX,e$w.stage.mouseY),e$w.timer.clear(this,this.tweenMove),e$q.clearTween(this),e$w.stage.once("mouseup",this,this.onStageMouseUp2),e$w.stage.once("mouseout",this,this.onStageMouseUp2),e$w.timer.frameLoop(1,this,this.loop)},e$d.loop=function(){var e$d=e$w.stage.mouseY,e$t=e$w.stage.mouseX;if(this._lastOffset=this.isVertical?e$d-this._lastPoint.y:e$t-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?e$w.stage._canvasTransform.getScaleY():e$w.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=e$t,this._lastPoint.y=e$d,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},e$d.onStageMouseUp2=function(e$d){if(e$w.stage.off("mouseup",this,this.onStageMouseUp2),e$w.stage.off("mouseout",this,this.onStageMouseUp2),e$w.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?e$q.to(this,{value:this.min},this.elasticBackTime,e$o.sineOut,e$J.create(this,this.elasticOver)):this._value>this.max&&e$q.to(this,{value:this.max},this.elasticBackTime,e$o.sineOut,e$J.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?e$w.stage.mouseY-this._lastPoint.y:e$w.stage.mouseX-this._lastPoint.x);for(var e$t=0,e$l=Math.min(this._offsets.length,3),e$k=0;e$k<e$l;e$k++)e$t+=this._offsets[this._offsets.length-1-e$k];if(this._lastOffset=e$t/e$l,(e$t=Math.abs(this._lastOffset))<2)return void this.event("end");60<e$t&&(this._lastOffset=0<this._lastOffset?60:-60);var e$W=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));e$w.timer.frameLoop(1,this,this.tweenMove,[e$W])}},e$d.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&e$q.to(this,{alpha:0},500),this.event("end")},e$d.tweenMove=function(e$d){this._lastOffset*=this.rollRatio;var e$t=NaN;if(0<e$d&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,e$t=.5*-(this.min-e$d-this.value),this._lastOffset>e$t&&(this._lastOffset=e$t)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,e$t=.5*-(this.max+e$d-this.value),this._lastOffset<e$t&&(this._lastOffset=e$t))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(e$w.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?e$q.to(this,{value:this.min},this.elasticBackTime,e$o.sineOut,e$J.create(this,this.elasticOver)):this._value>this.max?e$q.to(this,{value:this.max},this.elasticBackTime,e$o.sineOut,e$J.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&e$q.to(this,{alpha:0},500)}},e$d.stopScroll=function(){this.onStageMouseUp2(null),e$w.timer.clear(this,this.tweenMove),e$q.clearTween(this)},e$A(0,e$d,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),e$A(0,e$d,"skin",function(){return this._skin},function(e$d){this._skin!=e$d&&(this._skin=e$d,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),e$A(0,e$d,"max",function(){return this.slider.max},function(e$d){this.slider.max=e$d}),e$A(0,e$d,"showButtons",function(){return this._showButtons},function(e$d){this._showButtons=e$d,this.callLater(this.changeScrollBar)}),e$A(0,e$d,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),e$A(0,e$d,"min",function(){return this.slider.min},function(e$d){this.slider.min=e$d}),e$A(0,e$d,"value",function(){return this._value},function(e$d){e$d!==this._value&&(this._value=e$d,this._isElastic||(this.slider._value!=e$d&&(this.slider._value=e$d,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),e$A(0,e$d,"isVertical",function(){return this.slider.isVertical},function(e$d){this.slider.isVertical=e$d}),e$A(0,e$d,"sizeGrid",function(){return this.slider.sizeGrid},function(e$d){this.slider.sizeGrid=e$d}),e$A(0,e$d,"scrollSize",function(){return this._scrollSize},function(e$d){this._scrollSize=e$d}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)||"string"==typeof e$d?this.value=Number(e$d):e$w.superSet(e$j,this,"dataSource",e$d)}),e$A(0,e$d,"thumbPercent",function(){return this._thumbPercent},function(e$d){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),e$d=1<=e$d?.99:e$d,this._thumbPercent=e$d,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*e$d,e$M.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*e$d,e$M.scrollBarMinNum))}),e$A(0,e$d,"target",function(){return this._target},function(e$d){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=e$d)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),e$A(0,e$d,"hide",function(){return this._hide},function(e$d){this._hide=e$d,this.visible=!e$d}),e$A(0,e$d,"touchScrollEnable",function(){return this._touchScrollEnable},function(e$d){this._touchScrollEnable=e$d,this.target=this._target}),e$A(0,e$d,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(e$d){this._mouseWheelEnable=e$d,this.target=this._target}),e$A(0,e$d,"tick",function(){return this.slider.tick},function(e$d){this.slider.tick=e$d}),e$l}(e$j),e$Z=function(e$t){function e$l(e$d){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,e$l.__super.call(this),this.skin=e$d}e$i(e$l,"laya.ui.Slider",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._bg&&this._bg.destroy(e$d),this._bar&&this._bar.destroy(e$d),this._progress&&this._progress.destroy(e$d),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},e$d.createChildren=function(){this.addChild(this._bg=new e$U),this.addChild(this._bar=new e$x)},e$d.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},e$d.onBarMouseDown=function(e$d){this._globalSacle||(this._globalSacle=new e$Y),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=e$w.stage.mouseX,this._ty=e$w.stage.mouseY,e$w.stage.on("mousemove",this,this.mouseMove),e$w.stage.once("mouseup",this,this.mouseUp),e$w.stage.once("mouseout",this,this.mouseUp),this.showValueText()},e$d.showValueText=function(){if(this.showLabel){var e$d=laya.ui.Slider.label;this.addChild(e$d),e$d.textField.changeText(this._value+""),this.isVertical?(e$d.x=this._bar.x+20,e$d.y=.5*(this._bar.height-e$d.height)+this._bar.y):(e$d.y=this._bar.y-20,e$d.x=.5*(this._bar.width-e$d.width)+this._bar.x)}},e$d.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},e$d.mouseUp=function(e$d){e$w.stage.off("mousemove",this,this.mouseMove),e$w.stage.off("mouseup",this,this.mouseUp),e$w.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},e$d.mouseMove=function(e$d){var e$t=this._value;this.isVertical?(this._bar.y+=(e$w.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(e$w.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=e$w.stage.mouseX,this._ty=e$w.stage.mouseY;var e$l=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*e$l)/e$l,this._value!=e$t&&this.sendChangeEvent(),this.showValueText()},e$d.sendChangeEvent=function(e$d){void 0===e$d&&(e$d="change"),this.event(e$d),this.changeHandler&&this.changeHandler.runWith(this._value)},e$d.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},e$d.changeSize=function(){e$t.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},e$d.setSlider=function(e$d,e$t,e$l){this._value=-1,this._min=e$d,this._max=e$d<e$t?e$t:e$d,this.value=e$l<e$d?e$d:e$t<e$l?e$t:e$l},e$d.changeValue=function(){var e$d=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*e$d)/e$d,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var e$t=this._max-this._min;0===e$t&&(e$t=1),this.isVertical?(this._bar.y=(this._value-this._min)/e$t*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/e$t*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},e$d.onBgMouseDown=function(e$d){var e$t=this._bg.getMousePoint();this.isVertical?this.value=e$t.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=e$t.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},e$A(0,e$d,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),e$A(0,e$d,"skin",function(){return this._skin},function(e$d){if(this._skin!=e$d){this._skin=e$d,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var e$t=this._skin.replace(".png","$progress.png");e$e.getRes(e$t)&&(this._progress||(this.addChild(this._progress=new e$U),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=e$t),this.setBarPoint(),this.callLater(this.changeValue)}}),e$A(0,e$d,"allowClickBack",function(){return this._allowClickBack},function(e$d){this._allowClickBack!=e$d&&((this._allowClickBack=e$d)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),e$A(0,e$d,"max",function(){return this._max},function(e$d){this._max!=e$d&&(this._max=e$d,this.callLater(this.changeValue))}),e$A(0,e$d,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),e$A(0,e$d,"tick",function(){return this._tick},function(e$d){this._tick!=e$d&&(this._tick=e$d,this.callLater(this.changeValue))}),e$A(0,e$d,"sizeGrid",function(){return this._bg.sizeGrid},function(e$d){this._bg.sizeGrid=e$d,this._bar.sizeGrid=e$d,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),e$A(0,e$d,"min",function(){return this._min},function(e$d){this._min!=e$d&&(this._min=e$d,this.callLater(this.changeValue))}),e$A(0,e$d,"value",function(){return this._value},function(e$d){if(this._value!=e$d){var e$t=this._value;this._value=e$d,this.changeValue(),this._value!=e$t&&this.sendChangeEvent()}}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)||"string"==typeof e$d?this.value=Number(e$d):e$w.superSet(e$j,this,"dataSource",e$d)}),e$A(0,e$d,"bar",function(){return this._bar}),e$k(e$l,["label",function(){return this.label=new e$E}]),e$l}(e$j),e$U=function(e$t){function e$l(e$d){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,e$l.__super.call(this),this.skin=e$d}e$i(e$l,"laya.ui.Image",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,e$e.clearCache(this,this._skin)},e$d.dispose=function(){this.destroy(!0),e$e.clearCache(this,this._skin),this.clearEvent()},e$d.createChildren=function(){this.graphics=this._bitmap=new e$S},e$d.setSource=function(e$d,e$t){this.destroyed||e$d===this._skin&&e$t&&(this.source=e$t,this.onCompResize(),this.clearEvent())},e$d.clearEvent=function(){this._skin&&e$W.atalsNotify&&e$W.atalsNotify.off(this._skin,this,this.setSource)},e$d.clearLoad=function(){this._skin&&((this._complete||this._progress)&&e$w.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},e$A(0,e$d,"source",function(){return this._bitmap.source},function(e$d){this._bitmap&&(this._bitmap.source=e$d,this.event("loaded"),this.repaint())}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"string"==typeof(this._dataSource=e$d)?this.skin=e$d:e$w.superSet(e$j,this,"dataSource",e$d)}),e$A(0,e$d,"measureHeight",function(){return this._bitmap.height}),e$A(0,e$d,"skin",function(){return this._skin},function(e$d){if(this._skin!=e$d)if(e$e.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=e$d){e$e.keepCache(this,this._skin);var e$t=e$e.getRes(e$d),e$l=e$W.resAtalsObj&&e$W.resAtalsObj[this._skin];e$t?(this.source=e$t,this.onCompResize()):e$l?(e$W.atalsNotify&&e$W.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=e$l.sourceW),0==this.height&&(this.height=e$l.sourceH)):(this._complete=e$J.create(this,this.setSource,[this._skin]),this._progress=null,e$w.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),e$A(0,e$d,"group",function(){return this._group},function(e$d){e$d&&this._skin&&e$e.setGroup(this._skin,e$d),this._group=e$d}),e$A(0,e$d,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(e$d){this._bitmap.sizeGrid=e$T.fillArray(e$M.defaultSizeGrid,e$d,Number)}),e$A(0,e$d,"measureWidth",function(){return this._bitmap.width}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$j,this,"width",e$d),this._bitmap.width=0==e$d?1e-7:e$d}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$j,this,"height",e$d),this._bitmap.height=0==e$d?1e-7:e$d}),e$l}(e$j),e$E=function(e$t){function e$l(e$d){this._tf=null,e$l.__super.call(this),void 0===e$d&&(e$d=""),e$b.defaultColor=e$M.labelColor,this.text=e$d}e$i(e$l,"laya.ui.Label",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._tf=null},e$d.createChildren=function(){this.addChild(this._tf=new e$R)},e$d.changeText=function(e$d){this._tf.changeText(e$d)},e$A(0,e$d,"padding",function(){return this._tf.padding.join(",")},function(e$d){this._tf.padding=e$T.fillArray(e$M.labelPadding,e$d,Number)}),e$A(0,e$d,"bold",function(){return this._tf.bold},function(e$d){this._tf.bold=e$d}),e$A(0,e$d,"align",function(){return this._tf.align},function(e$d){this._tf.align=e$d}),e$A(0,e$d,"text",function(){return this._tf.text},function(e$d){this._tf.text!=e$d&&(e$d&&(e$d=e$T.adptString(e$d+"")),this._tf.text=e$d,this.event("change"),this._width&&this._height||this.onCompResize())}),e$A(0,e$d,"italic",function(){return this._tf.italic},function(e$d){this._tf.italic=e$d}),e$A(0,e$d,"wordWrap",function(){return this._tf.wordWrap},function(e$d){this._tf.wordWrap=e$d}),e$A(0,e$d,"font",function(){return this._tf.font},function(e$d){this._tf.font=e$d}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)||"string"==typeof e$d?this.text=e$d+"":e$w.superSet(e$j,this,"dataSource",e$d)}),e$A(0,e$d,"color",function(){return this._tf.color},function(e$d){this._tf.color=e$d}),e$A(0,e$d,"valign",function(){return this._tf.valign},function(e$d){this._tf.valign=e$d}),e$A(0,e$d,"leading",function(){return this._tf.leading},function(e$d){this._tf.leading=e$d}),e$A(0,e$d,"fontSize",function(){return this._tf.fontSize},function(e$d){this._tf.fontSize=e$d}),e$A(0,e$d,"bgColor",function(){return this._tf.bgColor},function(e$d){this._tf.bgColor=e$d}),e$A(0,e$d,"borderColor",function(){return this._tf.borderColor},function(e$d){this._tf.borderColor=e$d}),e$A(0,e$d,"stroke",function(){return this._tf.stroke},function(e$d){this._tf.stroke=e$d}),e$A(0,e$d,"strokeColor",function(){return this._tf.strokeColor},function(e$d){this._tf.strokeColor=e$d}),e$A(0,e$d,"textField",function(){return this._tf}),e$A(0,e$d,"measureWidth",function(){return this._tf.width}),e$A(0,e$d,"measureHeight",function(){return this._tf.height}),e$A(0,e$d,"width",function(){return this._width||this._tf.text?e$w.superGet(e$j,this,"width"):0},function(e$d){e$w.superSet(e$j,this,"width",e$d),this._tf.width=e$d}),e$A(0,e$d,"height",function(){return this._height||this._tf.text?e$w.superGet(e$j,this,"height"):0},function(e$d){e$w.superSet(e$j,this,"height",e$d),this._tf.height=e$d}),e$A(0,e$d,"overflow",function(){return this._tf.overflow},function(e$d){this._tf.overflow=e$d}),e$A(0,e$d,"underline",function(){return this._tf.underline},function(e$d){this._tf.underline=e$d}),e$A(0,e$d,"underlineColor",function(){return this._tf.underlineColor},function(e$d){this._tf.underlineColor=e$d}),e$l}(e$j),e$N=function(e$t){function e$l(e$d){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,e$l.__super.call(this),this.skin=e$d}e$i(e$l,"laya.ui.ProgressBar",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._bg&&this._bg.destroy(e$d),this._bar&&this._bar.destroy(e$d),this._bg=this._bar=null,this.changeHandler=null},e$d.createChildren=function(){this.addChild(this._bg=new e$U),this.addChild(this._bar=new e$U)},e$d.changeValue=function(){if(this.sizeGrid){var e$d=this.sizeGrid.split(","),e$t=Number(e$d[3]),e$l=Number(e$d[1]),e$k=(this.width-e$t-e$l)*this._value;this._bar.width=e$t+e$l+e$k,this._bar.visible=this._bar.width>e$t+e$l}else this._bar.width=this.width*this._value},e$A(0,e$d,"measureHeight",function(){return this._bg.height}),e$A(0,e$d,"skin",function(){return this._skin},function(e$d){this._skin!=e$d&&(this._skin=e$d,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),e$A(0,e$d,"measureWidth",function(){return this._bg.width}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$j,this,"height",e$d),this._bg.height=this._height,this._bar.height=this._height}),e$A(0,e$d,"bar",function(){return this._bar}),e$A(0,e$d,"value",function(){return this._value},function(e$d){this._value!=e$d&&(e$d=1<e$d?1:e$d<0?0:e$d,this._value=e$d,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(e$d))}),e$A(0,e$d,"bg",function(){return this._bg}),e$A(0,e$d,"sizeGrid",function(){return this._bg.sizeGrid},function(e$d){this._bg.sizeGrid=this._bar.sizeGrid=e$d}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$j,this,"width",e$d),this._bg.width=this._width,this.callLater(this.changeValue)}),e$A(0,e$d,"dataSource",e$t.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)||"string"==typeof e$d?this.value=Number(e$d):e$w.superSet(e$j,this,"dataSource",e$d)}),e$l}(e$j),e$u=(function(e$d){function e$l(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,e$l.__super.call(this),this._tipBox=new e$j,this._tipBox.addChild(this._tipText=new e$R),this._tipText.x=this._tipText.y=5,this._tipText.color=e$l.tipTextColor,this._defaultTipHandler=this._showDefaultTip,e$w.stage.on("showtip",this,this._onStageShowTip),e$w.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}e$i(e$l,"laya.ui.TipManager",e$j);var e$t=e$l.prototype;e$t._onStageHideTip=function(e$d){e$w.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},e$t._onStageShowTip=function(e$d){e$w.timer.once(e$l.tipDelay,this,this._showTip,[e$d],!0)},e$t._showTip=function(e$d){if("string"==typeof e$d){var e$t=String(e$d);Boolean(e$t)&&this._defaultTipHandler(e$t)}else e$d instanceof laya.utils.Handler?e$d.run():"function"==typeof e$d&&e$d.apply();e$w.stage.on("mousemove",this,this._onStageMouseMove),e$w.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},e$t._onStageMouseDown=function(e$d){this.closeAll()},e$t._onStageMouseMove=function(e$d){this._showToStage(this,e$l.offsetX,e$l.offsetY)},e$t._showToStage=function(e$d,e$t,e$l){void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0);var e$k=e$d.getBounds();e$d.x=e$w.stage.mouseX+e$t,e$d.y=e$w.stage.mouseY+e$l,e$d.x+e$k.width>e$w.stage.width&&(e$d.x-=e$k.width+e$t),e$d.y+e$k.height>e$w.stage.height&&(e$d.y-=e$k.height+e$l)},e$t.closeAll=function(){e$w.timer.clear(this,this._showTip),e$w.stage.off("mousemove",this,this._onStageMouseMove),e$w.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},e$t.showDislayTip=function(e$d){this.addChild(e$d),this._showToStage(this),e$w._currentStage.addChild(this)},e$t._showDefaultTip=function(e$d){this._tipText.text=e$d;var e$t=this._tipBox.graphics;e$t.clear(),e$t.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,e$l.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),e$w._currentStage.addChild(this)},e$A(0,e$t,"defaultTipHandler",function(){return this._defaultTipHandler},function(e$d){this._defaultTipHandler=e$d}),e$l.offsetX=10,e$l.offsetY=15,e$l.tipTextColor="#ffffff",e$l.tipBackColor="#111111",e$l.tipDelay=200}(),function(e$d){var e$c;function e$Y(){this._idMap=null,this._aniList=null,this._watchMap={},e$Y.__super.call(this)}e$i(e$Y,"laya.ui.View",e$K);var e$t=e$Y.prototype;return e$t.createView=function(e$d){if(e$d.animations&&!this._idMap&&(this._idMap={}),e$Y.createComp(e$d,this,this),e$d.animations){var e$t,e$l,e$k=[],e$W=e$d.animations,e$i=0,e$A=e$W.length;for(e$i=0;e$i<e$A;e$i++){switch(e$t=new e$f,e$l=e$W[e$i],e$t._setUp(this._idMap,e$l),(this[e$l.name]=e$t)._setControlNode(this),e$l.action){case 1:e$t.play(0,!1);break;case 2:e$t.play(0,!0)}e$k.push(e$t)}this._aniList=e$k}0<this._width&&null==e$d.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},e$t.onEvent=function(e$d,e$t){},e$t.loadUI=function(e$d){var e$t=e$Y.uiMap[e$d];e$t&&this.createView(e$t)},e$t.destroy=function(e$d){void 0===e$d&&(e$d=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,e$d)},e$t.changeData=function(e$d){var e$t=this._watchMap[e$d];if(e$t){console.log("change",e$d);for(var e$l=0,e$k=e$t.length;e$l<e$k;e$l++){e$t[e$l].exe(this)}}},e$Y._regs=function(){for(var e$d in e$Y.uiClassMap)e$D.regClass(e$d,e$Y.uiClassMap[e$d])},e$Y.createComp=function(e$d,e$t,e$l,e$k){if(!(e$t=e$t||e$Y.getCompInstance(e$d)))return console.warn("can not create:"+e$d.type),null;var e$W=e$d.child;if(e$W)for(var e$i=e$t instanceof laya.ui.List,e$A=0,e$B=e$W.length;e$A<e$B;e$A++){var e$o=e$W[e$A];if(!e$t.hasOwnProperty("itemRender")||"render"!=e$o.props.name&&"render"!==e$o.props.renderType)if("Graphic"==e$o.type)e$D.addGraphicsToSprite(e$o,e$t);else if(e$D.isDrawType(e$o.type))e$D.addGraphicToSprite(e$o,e$t,!0);else{if(e$i){var e$I=[],e$b=e$Y.createComp(e$o,null,e$l,e$I);e$I.length&&(e$b._$bindData=e$I)}else e$b=e$Y.createComp(e$o,null,e$l,e$k);"Script"==e$o.type?"owner"in e$b?e$b.owner=e$t:"target"in e$b&&(e$b.target=e$t):"mask"==e$o.props.renderType||"mask"==e$o.props.name?e$t.mask=e$b:e$b instanceof laya.display.Sprite&&e$t.addChild(e$b)}else e$t.itemRender=e$o}var e$f=e$d.props;for(var e$J in e$f){var e$c=e$f[e$J];e$Y.eventDic[e$J]?e$c&&e$l&&e$t.on(e$J,e$l,e$l.onEvent,[e$c]):e$Y.setCompValue(e$t,e$J,e$c,e$l,e$k)}return e$w.__typeof(e$t,"laya.ui.IItem")&&e$t.initItems(),e$d.compId&&e$l&&e$l._idMap&&(e$l._idMap[e$d.compId]=e$t),e$t},e$Y.setCompValue=function(e$d,e$t,e$l,e$k,e$W){if("string"==typeof e$l&&-1<e$l.indexOf("${")){if(e$Y._sheet||(e$Y._sheet=e$D.getClass("laya.data.Table")),!e$Y._sheet)return void console.warn("Can not find class Sheet");if(e$W)e$W.push(e$d,e$t,e$l);else if(e$k){-1==e$l.indexOf("].")&&(e$l=e$l.replace(".","[0]."));var e$i,e$A,e$B=new e$c(e$d,e$t,e$l);e$B.exe(e$k);for(var e$o=e$l.replace(/\[.*?\]\./g,".");null!=(e$i=e$Y._parseWatchData.exec(e$o));){for(var e$I=e$i[1];null!=(e$A=e$Y._parseKeyWord.exec(e$I));){var e$b=e$A[0],e$f=e$k._watchMap[e$b]||(e$k._watchMap[e$b]=[]);e$f.push(e$B),e$Y._sheet.I.notifer.on(e$b,e$k,e$k.changeData,[e$b])}(e$f=e$k._watchMap[e$I]||(e$k._watchMap[e$I]=[])).push(e$B),e$Y._sheet.I.notifer.on(e$I,e$k,e$k.changeData,[e$I])}}}else if("var"===e$t&&e$k)e$k[e$l]=e$d;else if("onClick"==e$t){var e$J=e$w._runScript("(function(){"+e$l+"})");e$d.on("click",e$k,e$J)}else e$d[e$t]="true"===e$l||"false"!==e$l&&e$l},e$Y.getCompInstance=function(e$d){var e$t,e$l=e$d.props?e$d.props.runtime:null;return e$t=e$l?e$Y.viewClassMap[e$l]||e$Y.uiClassMap[e$l]||e$w.__classmap[e$l]:e$Y.uiClassMap[e$d.type],e$d.props&&e$d.props.hasOwnProperty("renderType")&&"instance"==e$d.props.renderType?e$t.instance:e$t?new e$t:null},e$Y.regComponent=function(e$d,e$t){e$Y.uiClassMap[e$d]=e$t,e$D.regClass(e$d,e$t)},e$Y.regViewRuntime=function(e$d,e$t){e$Y.viewClassMap[e$d]=e$t},e$Y.uiMap={},e$Y.viewClassMap={},e$Y._sheet=null,e$k(e$Y,["uiClassMap",function(){return this.uiClassMap={ViewStack:e$dd,LinkButton:e$x,TextArea:e$Id,ColorPicker:e$Q,Box:e$K,Button:e$x,CheckBox:e$h,Clip:e$n,ComboBox:e$y,Component:e$j,HScrollBar:e$m,HSlider:e$F,Image:e$U,Label:e$E,List:e$X,Panel:e$O,ProgressBar:e$N,Radio:e$_,RadioGroup:e$Bd,ScrollBar:e$V,Slider:e$Z,Tab:e$od,TextInput:e$ld,View:e$Y,VScrollBar:e$td,VSlider:e$kd,Tree:e$v,HBox:e$id,VBox:e$Ad,Sprite:e$H,Animation:e$l,Text:e$R,FontClip:e$P}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),e$Y.__init$=function(){e$Y._regs(),e$c=function(){function e$d(e$d,e$t,e$l){this.comp=null,this.prop=null,this.value=null,this.comp=e$d,this.prop=e$t,this.value=e$l}return e$i(e$d,""),e$d.prototype.exe=function(e$d){var e$t=e$T.getBindFun(this.value);this.comp[this.prop]=e$t.call(this,e$d)},e$d}()},e$Y}()),e$h=function(e$d){function e$l(e$d,e$t){void 0===e$t&&(e$t=""),e$l.__super.call(this,e$d,e$t)}e$i(e$l,"laya.ui.CheckBox",e$d);var e$t=e$l.prototype;return e$t.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},e$t.initialize=function(){e$d.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},e$A(0,e$t,"dataSource",e$d.prototype._$get_dataSource,function(e$d){"boolean"==typeof(this._dataSource=e$d)?this.selected=e$d:"string"==typeof e$d?this.selected="true"===e$d:e$w.superSet(e$x,this,"dataSource",e$d)}),e$l}(e$x),e$s=function(e$d){function e$t(){this._space=0,this._align="none",this._itemChanged=!1,e$t.__super.call(this)}e$i(e$t,"laya.ui.LayoutBox",e$K);var e$l=e$t.prototype;return e$l.addChild=function(e$d){return e$d.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,e$d)},e$l.onResize=function(e$d){this._setItemChanged()},e$l.addChildAt=function(e$d,e$t){return e$d.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,e$d,e$t)},e$l.removeChild=function(e$d){return e$d.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,e$d)},e$l.removeChildAt=function(e$d){return this.getChildAt(e$d).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,e$d)},e$l.refresh=function(){this._setItemChanged()},e$l.changeItems=function(){this._itemChanged=!1},e$l.sortItem=function(e$d){e$d&&e$d.sort(function(e$d,e$t){return e$d.y-e$t.y})},e$l._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},e$A(0,e$l,"space",function(){return this._space},function(e$d){this._space=e$d,this._setItemChanged()}),e$A(0,e$l,"align",function(){return this._align},function(e$d){this._align=e$d,this._setItemChanged()}),e$t}(),e$P=function(e$t){function e$l(e$d,e$t){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,e$l.__super.call(this),e$d&&(this.skin=e$d),e$t&&(this.sheet=e$t)}e$i(e$l,"laya.ui.FontClip",e$t);var e$d=e$l.prototype;return e$d.createChildren=function(){this._bitmap=new e$S,this.on("loaded",this,this._onClipLoaded)},e$d._onClipLoaded=function(){this.callLater(this.changeValue)},e$d.changeValue=function(){var e$d;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),e$d=this._sources[0]))){var e$t="horizontal"===this._direction;e$t?(this._wordsW=this._valueArr.length*(e$d.sourceWidth+this.spaceX),this._wordsH=e$d.sourceHeight):(this._wordsW=e$d.sourceWidth,this._wordsH=(e$d.sourceHeight+this.spaceY)*this._valueArr.length);var e$l=0;if(this._width)switch(this._align){case"center":e$l=.5*(this._width-this._wordsW);break;case"right":e$l=this._width-this._wordsW;break;default:e$l=0}for(var e$k=0,e$W=this._valueArr.length;e$k<e$W;e$k++){var e$i=this._indexMap[this._valueArr.charAt(e$k)];this.sources[e$i]&&(e$d=this.sources[e$i],e$t?this.graphics.drawTexture(e$d,e$l+e$k*(e$d.sourceWidth+this.spaceX),0,e$d.sourceWidth,e$d.sourceHeight):this.graphics.drawTexture(e$d,0+e$l,e$k*(e$d.sourceHeight+this.spaceY),e$d.sourceWidth,e$d.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),e$t.prototype.destroy.call(this,e$d)},e$A(0,e$d,"sheet",function(){return this._sheet},function(e$d){e$d+="";var e$t=(this._sheet=e$d).split(" ");this._clipX=String(e$t[0]).length,this.clipY=e$t.length,this._indexMap={};for(var e$l=0;e$l<this._clipY;e$l++)for(var e$k=e$t[e$l].split(""),e$W=0,e$i=e$k.length;e$W<e$i;e$W++)this._indexMap[e$k[e$W]]=e$l*this._clipX+e$W}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$n,this,"height",e$d),this.callLater(this.changeValue)}),e$A(0,e$d,"direction",function(){return this._direction},function(e$d){this._direction=e$d,this.callLater(this.changeValue)}),e$A(0,e$d,"value",function(){return this._valueArr?this._valueArr:""},function(e$d){e$d+="",this._valueArr=e$d,this.callLater(this.changeValue)}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$n,this,"width",e$d),this.callLater(this.changeValue)}),e$A(0,e$d,"spaceX",function(){return this._spaceX},function(e$d){this._spaceX=e$d,"horizontal"===this._direction&&this.callLater(this.changeValue)}),e$A(0,e$d,"spaceY",function(){return this._spaceY},function(e$d){this._spaceY=e$d,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),e$A(0,e$d,"align",function(){return this._align},function(e$d){this._align=e$d,this.callLater(this.changeValue)}),e$A(0,e$d,"measureWidth",function(){return this._wordsW}),e$A(0,e$d,"measureHeight",function(){return this._wordsH}),e$l}(e$n),e$X=function(e$d){function e$t(){this.selectHandler=null,this.renderHandler=null,this.renderTwHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this._twSwitch=!0,this._twDone=!0,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new e$Y,e$t.__super.call(this)}e$i(e$t,"laya.ui.List",e$d);var e$l=e$t.prototype;return e$w.imps(e$l,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),e$l.destroy=function(e$d){void 0===e$d&&(e$d=!0),this._content&&this._content.destroy(e$d),this._scrollBar&&this._scrollBar.destroy(e$d),laya.ui.Component.prototype.destroy.call(this,e$d),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this._twSwitch=null,this._twDone=null,this.selectHandler=this.renderHandler=this.mouseHandler=this.renderTwHandler=null},e$l.createChildren=function(){this.addChild(this._content=new e$K)},e$l.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=e$w.superGet(e$K,this,"cacheAs")),e$w.superSet(e$K,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},e$l.onScrollEnd=function(){e$w.superSet(e$K,this,"cacheAs",this._$P.cacheAs)},e$l._removePreScrollBar=function(){var e$d=this.removeChildByName("scrollBar");e$d&&e$d.destroy(!0)},e$l.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var e$d=this._getOneCell(),e$t=e$d.width+this._spaceX||1,e$l=e$d.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/e$t):Math.ceil(this._width/e$t)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/e$l):Math.round(this._height/e$l));var e$k=this._width?this._width:e$t*this.repeatX-this._spaceX,e$W=this._height?this._height:e$l*this.repeatY-this._spaceY;this._cellSize=this._isVertical?e$l:e$t,this._cellOffset=this._isVertical?e$l*Math.max(this._repeatY2,this._repeatY)-e$W-this._spaceY:e$t*Math.max(this._repeatX2,this._repeatX)-e$k-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=e$W:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=e$k),this.setContentSize(e$k,e$W);var e$i=this._isVertical?this.repeatX:this.repeatY,e$A=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,e$i,e$A),this._createdLine=e$A,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},e$l._getOneCell=function(){if(0===this._cells.length){var e$d=this.createItem();if(this._offset.setTo(e$d.x,e$d.y),this.cacheContent)return e$d;this._cells.push(e$d)}return this._cells[0]},e$l._createItems=function(e$d,e$t,e$l){var e$k=this._content,e$W=this._getOneCell(),e$i=e$W.width+this._spaceX,e$A=e$W.height+this._spaceY;if(this.cacheContent){var e$B=new e$K;e$B.cacheAsBitmap=!0,e$B.pos((this._isVertical?0:e$d)*e$i,(this._isVertical?e$d:0)*e$A),this._content.addChild(e$B),this._content.optimizeScrollRect=!0,e$k=e$B}else{for(var e$o=[],e$I=this._cells.length-1;-1<e$I;e$I--){var e$b=this._cells[e$I];e$b.removeSelf(),e$o.push(e$b)}this._cells.length=0}for(var e$f=e$d;e$f<e$l;e$f++)for(var e$J=0;e$J<e$t;e$J++)(e$W=e$o&&e$o.length?e$o.pop():this.createItem()).x=(this._isVertical?e$J:e$f)*e$i-e$k.x,e$W.y=(this._isVertical?e$f:e$J)*e$A-e$k.y,e$W.name="item"+(e$f*e$t+e$J),e$k.addChild(e$W),this.addCell(e$W)},e$l.createItem=function(){var e$d=[];if("function"==typeof this._itemRender)var e$t=new this._itemRender;else e$t=e$u.createComp(this._itemRender,null,null,e$d);if(0==e$d.length&&e$t._watchMap){var e$l=e$t._watchMap;for(var e$k in e$l)for(var e$W=e$l[e$k],e$i=0;e$i<e$W.length;e$i++){var e$A=e$W[e$i];e$d.push(e$A.comp,e$A.prop,e$A.value)}}return e$d.length&&(e$t._$bindData=e$d),e$t},e$l.addCell=function(e$d){e$d.on("click",this,this.onCellMouse),e$d.on("rightclick",this,this.onCellMouse),e$d.on("mouseover",this,this.onCellMouse),e$d.on("mouseout",this,this.onCellMouse),e$d.on("mousedown",this,this.onCellMouse),e$d.on("mouseup",this,this.onCellMouse),this._cells.push(e$d)},e$l.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var e$d=0,e$t=e$d=0;e$t<1e4;e$t++){var e$l=this.getChildByName("item"+e$t);if(!e$l)break;this.addCell(e$l),e$d++}this.repeatY=e$d}},e$l.setContentSize=function(e$d,e$t){this._content.width=e$d,this._content.height=e$t,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new e$z),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,e$d,e$t),this._content.scrollRect=this._content.scrollRect),this.event("resize")},e$l.onCellMouse=function(e$d){"mousedown"===e$d.type&&(this._isMoved=!1);var e$t=e$d.currentTarget,e$l=this._startIndex+this._cells.indexOf(e$t);e$l<0||("click"===e$d.type||"rightclick"===e$d.type?this.selectEnable&&!this._isMoved?this.selectedIndex=e$l:this.changeCellState(e$t,!0,0):"mouseover"!==e$d.type&&"mouseout"!==e$d.type||this._selectedIndex===e$l||this.changeCellState(e$t,"mouseover"===e$d.type,0),this.mouseHandler&&this.mouseHandler.runWith([e$d,e$l]))},e$l.changeCellState=function(e$d,e$t,e$l){var e$k=e$d.getChildByName("selectBox");e$k&&(this.selectEnable=!0,e$k.visible=e$t,e$k.index=e$l)},e$l.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},e$l.onScrollBarChange=function(e$d){this.runCallLater(this.changeCells);var e$t=this._scrollBar.value,e$l=this._isVertical?this.repeatX:this.repeatY,e$k=this._isVertical?this.repeatY:this.repeatX,e$W=Math.floor(e$t/this._cellSize);if(this.cacheContent)e$A=e$k+1,this._createdLine-e$W<e$A&&(this._createItems(this._createdLine,e$l,this._createdLine+e$A),this.renderItems(this._createdLine*e$l,0),this._createdLine+=e$A);else{var e$i=e$W*e$l,e$A=0;if(e$i>this._startIndex){e$A=e$i-this._startIndex;var e$B=!0,e$o=this._startIndex+e$l*(e$k+1);this._isMoved=!0}else e$i<this._startIndex&&(e$A=this._startIndex-e$i,e$B=!1,e$o=this._startIndex-1,this._isMoved=!0);for(var e$I=0;e$I<e$A;e$I++){if(e$B){var e$b=this._cells.shift();this._cells[this._cells.length]=e$b;var e$f=e$o+e$I}else e$b=this._cells.pop(),this._cells.unshift(e$b),e$f=e$o-e$I;var e$J=Math.floor(e$f/e$l)*this._cellSize;this._isVertical?e$b.y=e$J:e$b.x=e$J,this.renderItem(e$b,e$f)}this._startIndex=e$i,this.changeSelectStatus()}var e$c=this._content.scrollRect;this._isVertical?(e$c.y=e$t-this._offset.y,e$c.x=-this._offset.x):(e$c.y=-this._offset.y,e$c.x=e$t-this._offset.x),this._content.scrollRect=e$c},e$l.posCell=function(e$d,e$t){if(this._scrollBar){var e$l=this._isVertical?this.repeatX:this.repeatY,e$k=(this._isVertical?this.repeatY:this.repeatX,Math.floor(e$t/e$l)*this._cellSize);this._isVertical?e$d.y=e$k:e$d.x=e$k}},e$l.changeSelectStatus=function(){for(var e$d=0,e$t=this._cells.length;e$d<e$t;e$d++)this.changeCellState(this._cells[e$d],this._selectedIndex===this._startIndex+e$d,1)},e$l.renderItems=function(e$d,e$t){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0);for(var e$l=e$d,e$k=e$t||this._cells.length;e$l<e$k;e$l++)this.renderItem(this._cells[e$l],this._startIndex+e$l);this.changeSelectStatus(),this._twDone=!0},e$l.renderItem=function(e$d,e$t){this._array&&0<=e$t&&e$t<this._array.length?(e$d.visible=!0,e$d._$bindData?(e$d._dataSource=this._array[e$t],this._bindData(e$d,this._array[e$t])):e$d.dataSource=this._array[e$t],this.cacheContent||this.posCell(e$d,e$t),this.hasListener("render")&&this.event("render",[e$d,e$t]),this.renderHandler&&this.renderHandler.runWith([e$d,e$t]),this.renderTwHandler&&this.renderTwHandler.runWith([e$d,e$t])):(e$d.visible=!1,e$d.dataSource=null)},e$l._bindData=function(e$d,e$t){for(var e$l=e$d._$bindData,e$k=0,e$W=e$l.length;e$k<e$W;e$k++){var e$i=e$l[e$k++],e$A=e$l[e$k++],e$B=e$l[e$k],e$o=e$T.getBindFun(e$B);e$i[e$A]=e$o.call(this,e$t)}},e$l.refresh=function(){this.array=this._array},e$l.getItem=function(e$d){return-1<e$d&&e$d<this._array.length?this._array[e$d]:null},e$l.changeItem=function(e$d,e$t){-1<e$d&&e$d<this._array.length&&(this._array[e$d]=e$t,e$d>=this._startIndex&&e$d<this._startIndex+this._cells.length&&this.renderItem(this.getCell(e$d),e$d))},e$l.setItem=function(e$d,e$t){this.changeItem(e$d,e$t)},e$l.addItem=function(e$d){this._array.push(e$d),this.array=this._array},e$l.addItemAt=function(e$d,e$t){this._array.splice(e$t,0,e$d),this.array=this._array},e$l.deleteItem=function(e$d){this._array.splice(e$d,1),this.array=this._array},e$l.getCell=function(e$d){return this.runCallLater(this.changeCells),-1<e$d&&this._cells?this._cells[(e$d-this._startIndex)%this._cells.length]:null},e$l.scrollTo=function(e$d){if(this._scrollBar){var e$t=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(e$d/e$t)*this._cellSize}else this.startIndex=e$d},e$l.tweenTo=function(e$d,e$t,e$l){if(void 0===e$t&&(e$t=200),this._scrollBar){var e$k=this._isVertical?this.repeatX:this.repeatY;e$q.to(this._scrollBar,{value:Math.floor(e$d/e$k)*this._cellSize},e$t,null,e$l,0,!0)}else this.startIndex=e$d,e$l&&e$l.run()},e$l._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},e$l.commitMeasure=function(){this.runCallLater(this.changeCells)},e$A(0,e$l,"cacheAs",e$d.prototype._$get_cacheAs,function(e$d){e$w.superSet(e$K,this,"cacheAs",e$d),this._scrollBar&&(this._$P.cacheAs=null,"none"!==e$d?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),e$A(0,e$l,"content",function(){return this._content}),e$A(0,e$l,"height",e$d.prototype._$get_height,function(e$d){e$d!=this._height&&(e$w.superSet(e$K,this,"height",e$d),this._setCellChanged())}),e$A(0,e$l,"itemRender",function(){return this._itemRender},function(e$d){if(this._itemRender!=e$d){this._itemRender=e$d;for(var e$t=this._cells.length-1;-1<e$t;e$t--)this._cells[e$t].destroy();this._cells.length=0,this._setCellChanged()}}),e$A(0,e$l,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(e$d){this._removePreScrollBar();var e$t=new e$td;e$t.name="scrollBar",e$t.right=0,e$d&&" "!=e$d&&(e$t.skin=e$d),this.scrollBar=e$t,this.addChild(e$t),this._setCellChanged()}),e$A(0,e$l,"page",function(){return this._page},function(e$d){this._page=e$d,this._array&&(this._page=0<e$d?e$d:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),e$A(0,e$l,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(e$d){this._removePreScrollBar();var e$t=new e$m;e$t.name="scrollBar",e$t.bottom=0,e$d&&" "!=e$d&&(e$t.skin=e$d),this.scrollBar=e$t,this.addChild(e$t),this._setCellChanged()}),e$A(0,e$l,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(e$d){this._repeatX=e$d,this._setCellChanged()}),e$A(0,e$l,"scrollBar",function(){return this._scrollBar},function(e$d){this._scrollBar!=e$d&&(this._scrollBar=e$d)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),e$A(0,e$l,"width",e$d.prototype._$get_width,function(e$d){e$d!=this._width&&(e$w.superSet(e$K,this,"width",e$d),this._setCellChanged())}),e$A(0,e$l,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(e$d){this._repeatY=e$d,this._setCellChanged()}),e$A(0,e$l,"spaceX",function(){return this._spaceX},function(e$d){this._spaceX=e$d,this._setCellChanged()}),e$A(0,e$l,"spaceY",function(){return this._spaceY},function(e$d){this._spaceY=e$d,this._setCellChanged()}),e$A(0,e$l,"selectedIndex",function(){return this._selectedIndex},function(e$d){this._selectedIndex!=e$d&&(this._selectedIndex=e$d,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(e$d),this.startIndex=this._startIndex)}),e$A(0,e$l,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(e$d){this.selectedIndex=this._array.indexOf(e$d)}),e$A(0,e$l,"length",function(){return this._array?this._array.length:0}),e$A(0,e$l,"selection",function(){return this.getCell(this._selectedIndex)},function(e$d){this.selectedIndex=this._startIndex+this._cells.indexOf(e$d)}),e$A(0,e$l,"startIndex",function(){return this._startIndex},function(e$d){this._startIndex=0<e$d?e$d:0,this.callLater(this.renderItems)}),e$A(0,e$l,"twSwitch",function(){return this._twSwitch},function(e$d){this._twSwitch=e$d}),e$A(0,e$l,"twDone",function(){return this._twDone},function(e$d){this._twDone=e$d}),e$A(0,e$l,"array",function(){return this._array},function(e$d){this.runCallLater(this.changeCells),this._array=e$d||[];var e$t=this._array.length;if(this.totalPage=Math.ceil(e$t/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<e$t?this._selectedIndex:e$t-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var e$l=this._isVertical?this.repeatX:this.repeatY,e$k=this._isVertical?this.repeatY:this.repeatX,e$W=Math.ceil(e$t/e$l);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=e$k/e$W,this._scrollBar.setScroll(0,(e$W-e$k)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),e$A(0,e$l,"dataSource",e$d.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)&&Math.floor(e$d)==e$d||"string"==typeof e$d?this.selectedIndex=parseInt(e$d):e$d instanceof Array?this.array=e$d:e$w.superSet(e$K,this,"dataSource",e$d)}),e$A(0,e$l,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),e$t}(e$K),e$m=function(e$d){function e$t(){e$t.__super.call(this)}return e$i(e$t,"laya.ui.HScrollBar",e$d),e$t.prototype.initialize=function(){e$d.prototype.initialize.call(this),this.slider.isVertical=!1},e$t}(e$V),e$O=function(e$d){function e$t(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,e$t.__super.call(this),this.width=this.height=100}e$i(e$t,"laya.ui.Panel",e$d);var e$l=e$t.prototype;return e$l.destroy=function(e$d){void 0===e$d&&(e$d=!0),laya.ui.Component.prototype.destroy.call(this,e$d),this._content&&this._content.destroy(e$d),this._vScrollBar&&this._vScrollBar.destroy(e$d),this._hScrollBar&&this._hScrollBar.destroy(e$d),this._vScrollBar=null,this._hScrollBar=null,this._content=null},e$l.destroyChildren=function(){this._content.destroyChildren()},e$l.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new e$K)},e$l.addChild=function(e$d){return e$d.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(e$d)},e$l.onResize=function(){this._setScrollChanged()},e$l.addChildAt=function(e$d,e$t){return e$d.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(e$d,e$t)},e$l.removeChild=function(e$d){return e$d.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(e$d)},e$l.removeChildAt=function(e$d){return this.getChildAt(e$d).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(e$d)},e$l.removeChildren=function(e$d,e$t){return void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=2147483647),this._content.removeChildren(e$d,e$t),this._setScrollChanged(),this},e$l.getChildAt=function(e$d){return this._content.getChildAt(e$d)},e$l.getChildByName=function(e$d){return this._content.getChildByName(e$d)},e$l.getChildIndex=function(e$d){return this._content.getChildIndex(e$d)},e$l.changeScroll=function(){this._scrollChanged=!1;var e$d=this.contentWidth||1,e$t=this.contentHeight||1,e$l=this._vScrollBar,e$k=this._hScrollBar,e$W=e$l&&e$t>this._height,e$i=e$k&&e$d>this._width,e$A=e$W?this._width-e$l.width:this._width,e$B=e$i?this._height-e$k.height:this._height;e$l&&(e$l.x=this._width-e$l.width,e$l.y=0,e$l.height=this._height-(e$i?e$k.height:0),e$l.scrollSize=Math.max(.033*this._height,1),e$l.thumbPercent=e$B/e$t,e$l.setScroll(0,e$t-e$B,e$l.value)),e$k&&(e$k.x=0,e$k.y=this._height-e$k.height,e$k.width=this._width-(e$W?e$l.width:0),e$k.scrollSize=Math.max(.033*this._width,1),e$k.thumbPercent=e$A/e$d,e$k.setScroll(0,e$d-e$A,e$k.value))},e$l.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},e$l.setContentSize=function(e$d,e$t){var e$l=this._content;e$l.width=e$d,e$l.height=e$t,e$l.scrollRect||(e$l.scrollRect=new e$z),e$l.scrollRect.setTo(0,0,e$d,e$t),e$l.scrollRect=e$l.scrollRect},e$l.onScrollBarChange=function(e$d){var e$t=this._content.scrollRect;if(e$t){var e$l=Math.round(e$d.value);e$d.isVertical?e$t.y=e$l:e$t.x=e$l,this._content.scrollRect=e$t}},e$l.scrollTo=function(e$d,e$t){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),this.vScrollBar&&(this.vScrollBar.value=e$t),this.hScrollBar&&(this.hScrollBar.value=e$d)},e$l.refresh=function(){this.changeScroll()},e$l.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=e$w.superGet(e$K,this,"cacheAs")),e$w.superSet(e$K,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},e$l.onScrollEnd=function(){e$w.superSet(e$K,this,"cacheAs",this._$P.cacheAs)},e$l._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},e$A(0,e$l,"numChildren",function(){return this._content.numChildren}),e$A(0,e$l,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(e$d){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new e$m),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=e$d}),e$A(0,e$l,"contentWidth",function(){for(var e$d=0,e$t=this._content.numChildren-1;-1<e$t;e$t--){var e$l=this._content.getChildAt(e$t);e$d=Math.max(e$l.x+e$l.width*e$l.scaleX,e$d)}return e$d}),e$A(0,e$l,"contentHeight",function(){for(var e$d=0,e$t=this._content.numChildren-1;-1<e$t;e$t--){var e$l=this._content.getChildAt(e$t);e$d=Math.max(e$l.y+e$l.height*e$l.scaleY,e$d)}return e$d}),e$A(0,e$l,"width",e$d.prototype._$get_width,function(e$d){e$w.superSet(e$K,this,"width",e$d),this._setScrollChanged()}),e$A(0,e$l,"hScrollBar",function(){return this._hScrollBar}),e$A(0,e$l,"content",function(){return this._content}),e$A(0,e$l,"height",e$d.prototype._$get_height,function(e$d){e$w.superSet(e$K,this,"height",e$d),this._setScrollChanged()}),e$A(0,e$l,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(e$d){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new e$td),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=e$d}),e$A(0,e$l,"vScrollBar",function(){return this._vScrollBar}),e$A(0,e$l,"cacheAs",e$d.prototype._$get_cacheAs,function(e$d){e$w.superSet(e$K,this,"cacheAs",e$d),this._$P.cacheAs=null,"none"!==e$d?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),e$t}(e$K),e$F=function(e$d){function e$t(e$d){e$t.__super.call(this,e$d),this.isVertical=!1}return e$i(e$t,"laya.ui.HSlider",e$Z),e$t}(),e$a=function(e$d){function e$l(e$d,e$t){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,e$l.__super.call(this),this.skin=e$t,this.labels=e$d}e$i(e$l,"laya.ui.UIGroup",e$d);var e$t=e$l.prototype;return e$w.imps(e$t,{"laya.ui.IItem":!0}),e$t.preinitialize=function(){this.mouseEnabled=!0},e$t.destroy=function(e$d){void 0===e$d&&(e$d=!0),laya.ui.Component.prototype.destroy.call(this,e$d),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},e$t.addItem=function(e$d,e$t){void 0===e$t&&(e$t=!0);var e$l=e$d,e$k=this._items.length;if(e$l.name="item"+e$k,this.addChild(e$l),this.initItems(),e$t&&0<e$k){var e$W=this._items[e$k-1];"horizontal"==this._direction?e$l.x=e$W.x+e$W.width+this._space:e$l.y=e$W.y+e$W.height+this._space}else e$t&&(e$l.x=0,e$l.y=0);return e$k},e$t.delItem=function(e$d,e$t){void 0===e$t&&(e$t=!0);var e$l=this._items.indexOf(e$d);if(-1!=e$l){var e$k=e$d;this.removeChild(e$k);for(var e$W=e$l+1,e$i=this._items.length;e$W<e$i;e$W++){var e$A=this._items[e$W];e$A.name="item"+(e$W-1),e$t&&("horizontal"==this._direction?e$A.x-=e$k.width+this._space:e$A.y-=e$k.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var e$B;e$B=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=e$B}}},e$t.initItems=function(){this._items||(this._items=[]);for(var e$d=this._items.length=0;e$d<1e4;e$d++){var e$t=this.getChildByName("item"+e$d);if(null==e$t)break;this._items.push(e$t),e$t.selected=e$d===this._selectedIndex,e$t.clickHandler=e$J.create(this,this.itemClick,[e$d],!1)}},e$t.itemClick=function(e$d){this.selectedIndex=e$d},e$t.setSelect=function(e$d,e$t){this._items&&-1<e$d&&e$d<this._items.length&&(this._items[e$d].selected=e$t)},e$t.createItem=function(e$d,e$t){return null},e$t.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var e$d=0,e$t=0,e$l=this._items.length;e$t<e$l;e$t++){var e$k=this._items[e$t];this._skin&&(e$k.skin=this._skin),this._labelColors&&(e$k.labelColors=this._labelColors),this._labelSize&&(e$k.labelSize=this._labelSize),this._labelStroke&&(e$k.labelStroke=this._labelStroke),this._labelStrokeColor&&(e$k.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(e$k.strokeColors=this._strokeColors),this._labelBold&&(e$k.labelBold=this._labelBold),this._labelPadding&&(e$k.labelPadding=this._labelPadding),this._labelAlign&&(e$k.labelAlign=this._labelAlign),this._stateNum&&(e$k.stateNum=this._stateNum),this._labelFont&&(e$k.labelFont=this._labelFont),"horizontal"===this._direction?(e$k.y=0,e$k.x=e$d,e$d+=e$k.width+this._space):(e$k.x=0,e$k.y=e$d,e$d+=e$k.height+this._space)}this.changeSize()},e$t.commitMeasure=function(){this.runCallLater(this.changeLabels)},e$t._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},e$A(0,e$t,"labelStrokeColor",function(){return this._labelStrokeColor},function(e$d){this._labelStrokeColor!=e$d&&(this._labelStrokeColor=e$d,this._setLabelChanged())}),e$A(0,e$t,"skin",function(){return this._skin},function(e$d){this._skin!=e$d&&(this._skin=e$d,this._setLabelChanged())}),e$A(0,e$t,"selectedIndex",function(){return this._selectedIndex},function(e$d){this._selectedIndex!=e$d&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=e$d,this.setSelect(e$d,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),e$A(0,e$t,"labels",function(){return this._labels},function(e$d){if(this._labels!=e$d){if(this._labels=e$d,this.removeChildren(),this._setLabelChanged(),this._labels)for(var e$t=this._labels.split(","),e$l=0,e$k=e$t.length;e$l<e$k;e$l++){var e$W=this.createItem(this._skin,e$t[e$l]);e$W.name="item"+e$l,this.addChild(e$W)}this.initItems()}}),e$A(0,e$t,"strokeColors",function(){return this._strokeColors},function(e$d){this._strokeColors!=e$d&&(this._strokeColors=e$d,this._setLabelChanged())}),e$A(0,e$t,"labelColors",function(){return this._labelColors},function(e$d){this._labelColors!=e$d&&(this._labelColors=e$d,this._setLabelChanged())}),e$A(0,e$t,"labelStroke",function(){return this._labelStroke},function(e$d){this._labelStroke!=e$d&&(this._labelStroke=e$d,this._setLabelChanged())}),e$A(0,e$t,"labelSize",function(){return this._labelSize},function(e$d){this._labelSize!=e$d&&(this._labelSize=e$d,this._setLabelChanged())}),e$A(0,e$t,"stateNum",function(){return this._stateNum},function(e$d){this._stateNum!=e$d&&(this._stateNum=e$d,this._setLabelChanged())}),e$A(0,e$t,"labelBold",function(){return this._labelBold},function(e$d){this._labelBold!=e$d&&(this._labelBold=e$d,this._setLabelChanged())}),e$A(0,e$t,"labelFont",function(){return this._labelFont},function(e$d){this._labelFont!=e$d&&(this._labelFont=e$d,this._setLabelChanged())}),e$A(0,e$t,"labelPadding",function(){return this._labelPadding},function(e$d){this._labelPadding!=e$d&&(this._labelPadding=e$d,this._setLabelChanged())}),e$A(0,e$t,"direction",function(){return this._direction},function(e$d){this._direction=e$d,this._setLabelChanged()}),e$A(0,e$t,"space",function(){return this._space},function(e$d){this._space=e$d,this._setLabelChanged()}),e$A(0,e$t,"items",function(){return this._items}),e$A(0,e$t,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(e$d){this.selectedIndex=this._items.indexOf(e$d)}),e$A(0,e$t,"dataSource",e$d.prototype._$get_dataSource,function(e$d){"number"==typeof(this._dataSource=e$d)&&Math.floor(e$d)==e$d||"string"==typeof e$d?this.selectedIndex=parseInt(e$d):e$d instanceof Array?this.labels=e$d.join(","):e$w.superSet(e$K,this,"dataSource",e$d)}),e$l}(e$K),e$_=function(e$t){function e$l(e$d,e$t){this._value=null,void 0===e$t&&(e$t=""),e$l.__super.call(this,e$d,e$t)}e$i(e$l,"laya.ui.Radio",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._value=null},e$d.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},e$d.initialize=function(){e$t.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},e$d.onClick=function(e$d){this.selected=!0},e$A(0,e$d,"value",function(){return null!=this._value?this._value:this.label},function(e$d){this._value=e$d}),e$l}(e$x),e$v=function(e$d){function e$t(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,e$t.__super.call(this),this.width=this.height=200}e$i(e$t,"laya.ui.Tree",e$d);var e$l=e$t.prototype;return e$w.imps(e$l,{"laya.ui.IRender":!0}),e$l.destroy=function(e$d){void 0===e$d&&(e$d=!0),laya.ui.Component.prototype.destroy.call(this,e$d),this._list&&this._list.destroy(e$d),this._list=null,this._source=null,this._renderHandler=null},e$l.createChildren=function(){this.addChild(this._list=new e$X),this._list.renderHandler=e$J.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},e$l.onListChange=function(e$d){this.event("change")},e$l.getArray=function(){var e$d,e$t=[];for(var e$l in this._source)e$d=this._source[e$l],this.getParentOpenStatus(e$d)&&(e$d.x=this._spaceLeft*this.getDepth(e$d),e$t.push(e$d));return e$t},e$l.getDepth=function(e$d,e$t){return void 0===e$t&&(e$t=0),null==e$d.nodeParent?e$t:this.getDepth(e$d.nodeParent,e$t+1)},e$l.getParentOpenStatus=function(e$d){var e$t=e$d.nodeParent;return null==e$t||!!e$t.isOpen&&(null==e$t.nodeParent||this.getParentOpenStatus(e$t))},e$l.renderItem=function(e$d,e$t){var e$l=e$d.dataSource;if(e$l){e$d.left=e$l.x;var e$k=e$d.getChildByName("arrow");e$k&&(e$l.hasChild?(e$k.visible=!0,e$k.index=e$l.isOpen?1:0,e$k.tag=e$t,e$k.off("click",this,this.onArrowClick),e$k.on("click",this,this.onArrowClick)):e$k.visible=!1);var e$W=e$d.getChildByName("folder");e$W&&(2==e$W.clipY?e$W.index=e$l.isDirectory?0:1:e$W.index=e$l.isDirectory?e$l.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([e$d,e$t])}},e$l.onArrowClick=function(e$d){var e$t=e$d.currentTarget.tag;this._list.array[e$t].isOpen=!this._list.array[e$t].isOpen,this.event("open"),this._list.array=this.getArray()},e$l.setItemState=function(e$d,e$t){this._list.array[e$d]&&(this._list.array[e$d].isOpen=e$t,this._list.array=this.getArray())},e$l.fresh=function(){this._list.array=this.getArray(),this.repaint()},e$l.parseXml=function(e$d,e$t,e$l,e$k){var e$W,e$i=e$d.childNodes,e$A=e$i.length;if(!e$k){e$W={};var e$B,e$o=e$d.attributes;for(var e$I in e$o){var e$b=(e$B=e$o[e$I]).nodeName,e$f=e$B.nodeValue;e$W[e$b]="true"==e$f||"false"!=e$f&&e$f}e$W.nodeParent=e$l,0<e$A&&(e$W.isDirectory=!0),e$W.hasChild=0<e$A,e$t.push(e$W)}for(var e$J=0;e$J<e$A;e$J++){var e$c=e$i[e$J];this.parseXml(e$c,e$t,e$W,!1)}},e$l.parseOpenStatus=function(e$d,e$t){for(var e$l=0,e$k=e$t.length;e$l<e$k;e$l++){var e$W=e$t[e$l];if(e$W.isDirectory)for(var e$i=0,e$A=e$d.length;e$i<e$A;e$i++){var e$B=e$d[e$i];if(e$B.isDirectory&&this.isSameParent(e$B,e$W)&&e$W.label==e$B.label){e$W.isOpen=e$B.isOpen;break}}}},e$l.isSameParent=function(e$d,e$t){return null==e$d.nodeParent&&null==e$t.nodeParent||null!=e$d.nodeParent&&null!=e$t.nodeParent&&(e$d.nodeParent.label==e$t.nodeParent.label&&this.isSameParent(e$d.nodeParent,e$t.nodeParent))},e$l.filter=function(e$d){if(Boolean(e$d)){var e$t=[];this.getFilterSource(this._source,e$t,e$d),this._list.array=e$t}else this._list.array=this.getArray()},e$l.getFilterSource=function(e$d,e$t,e$l){var e$k;for(var e$W in e$l=e$l.toLocaleLowerCase(),e$d)!(e$k=e$d[e$W]).isDirectory&&-1<String(e$k.label).toLowerCase().indexOf(e$l)&&(e$k.x=0,e$t.push(e$k)),e$k.child&&0<e$k.child.length&&this.getFilterSource(e$k.child,e$t,e$l)},e$A(0,e$l,"spaceBottom",function(){return this._list.spaceY},function(e$d){this._list.spaceY=e$d}),e$A(0,e$l,"keepStatus",function(){return this._keepStatus},function(e$d){this._keepStatus=e$d}),e$A(0,e$l,"itemRender",function(){return this._list.itemRender},function(e$d){this._list.itemRender=e$d}),e$A(0,e$l,"array",function(){return this._list.array},function(e$d){this._keepStatus&&this._list.array&&e$d&&this.parseOpenStatus(this._list.array,e$d),this._source=e$d,this._list.array=this.getArray()}),e$A(0,e$l,"mouseHandler",function(){return this._list.mouseHandler},function(e$d){this._list.mouseHandler=e$d}),e$A(0,e$l,"dataSource",e$d.prototype._$get_dataSource,function(e$d){this._dataSource=e$d,e$w.superSet(e$K,this,"dataSource",e$d)}),e$A(0,e$l,"source",function(){return this._source}),e$A(0,e$l,"scrollBar",function(){return this._list.scrollBar}),e$A(0,e$l,"list",function(){return this._list}),e$A(0,e$l,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(e$d){this._list.vScrollBarSkin=e$d}),e$A(0,e$l,"renderHandler",function(){return this._renderHandler},function(e$d){this._renderHandler=e$d}),e$A(0,e$l,"selectedIndex",function(){return this._list.selectedIndex},function(e$d){this._list.selectedIndex=e$d}),e$A(0,e$l,"spaceLeft",function(){return this._spaceLeft},function(e$d){this._spaceLeft=e$d}),e$A(0,e$l,"selectedItem",function(){return this._list.selectedItem},function(e$d){this._list.selectedItem=e$d}),e$A(0,e$l,"width",e$d.prototype._$get_width,function(e$d){e$w.superSet(e$K,this,"width",e$d),this._list.width=e$d}),e$A(0,e$l,"height",e$d.prototype._$get_height,function(e$d){e$w.superSet(e$K,this,"height",e$d),this._list.height=e$d}),e$A(0,e$l,"xml",null,function(e$d){var e$t=[];this.parseXml(e$d.childNodes[0],e$t,null,!0),this.array=e$t}),e$A(0,e$l,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),e$t}(e$K),e$dd=function(e$d){function e$t(){this._items=null,this._selectedIndex=0,e$t.__super.call(this),this._setIndexHandler=e$J.create(this,this.setIndex,null,!1)}e$i(e$t,"laya.ui.ViewStack",e$d);var e$l=e$t.prototype;return e$w.imps(e$l,{"laya.ui.IItem":!0}),e$l.setItems=function(e$d){this.removeChildren();for(var e$t=0,e$l=0,e$k=e$d.length;e$l<e$k;e$l++){var e$W=e$d[e$l];e$W&&(e$W.name="item"+e$t,this.addChild(e$W),e$t++)}this.initItems()},e$l.addItem=function(e$d){e$d.name="item"+this._items.length,this.addChild(e$d),this.initItems()},e$l.initItems=function(){this._items=[];for(var e$d=0;e$d<1e4;e$d++){var e$t=this.getChildByName("item"+e$d);if(null==e$t)break;this._items.push(e$t),e$t.visible=e$d==this._selectedIndex}},e$l.setSelect=function(e$d,e$t){this._items&&-1<e$d&&e$d<this._items.length&&(this._items[e$d].visible=e$t)},e$l.setIndex=function(e$d){this.selectedIndex=e$d},e$A(0,e$l,"dataSource",e$d.prototype._$get_dataSource,function(e$d){if("number"==typeof(this._dataSource=e$d)&&Math.floor(e$d)==e$d||"string"==typeof e$d)this.selectedIndex=parseInt(e$d);else for(var e$t in this._dataSource)this.hasOwnProperty(e$t)&&(this[e$t]=this._dataSource[e$t])}),e$A(0,e$l,"selectedIndex",function(){return this._selectedIndex},function(e$d){this._selectedIndex!=e$d&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=e$d,this.setSelect(this._selectedIndex,!0))}),e$A(0,e$l,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(e$d){this.selectedIndex=this._items.indexOf(e$d)}),e$A(0,e$l,"items",function(){return this._items}),e$A(0,e$l,"setIndexHandler",function(){return this._setIndexHandler},function(e$d){this._setIndexHandler=e$d}),e$t}(e$K),e$td=function(e$d){function e$t(){e$t.__super.call(this)}return e$i(e$t,"laya.ui.VScrollBar",e$V),e$t}(),e$ld=function(e$t){function e$l(e$d){this._bg=null,this._skin=null,e$l.__super.call(this),void 0===e$d&&(e$d=""),this.text=e$d,this.skin=this.skin}e$i(e$l,"laya.ui.TextInput",e$t);var e$d=e$l.prototype;return e$d.preinitialize=function(){this.mouseEnabled=!0},e$d.destroy=function(e$d){e$e.clearCache(this,this._skin),void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._bg&&this._bg.destroy(),this._bg=null},e$d.createChildren=function(){this.addChild(this._tf=new e$c),this._tf.padding=e$M.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},e$d._onFocus=function(){this.event("focus",this)},e$d._onBlur=function(){this.event("blur",this)},e$d._onInput=function(){this.event("input",this)},e$d._onEnter=function(){this.event("enter",this)},e$d.initialize=function(){this.width=128,this.height=22},e$d.select=function(){this._tf.select()},e$d.setSelection=function(e$d,e$t){this._tf.setSelection(e$d,e$t)},e$A(0,e$d,"text",e$t.prototype._$get_text,function(e$d){this._tf.text!=e$d&&(e$d+="",this._tf.text=e$d,this.event("change"))}),e$A(0,e$d,"bg",function(){return this._bg},function(e$d){this.graphics=this._bg=e$d}),e$A(0,e$d,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(e$d){this._tf.inputElementYAdjuster=e$d}),e$A(0,e$d,"multiline",function(){return this._tf.multiline},function(e$d){this._tf.multiline=e$d}),e$A(0,e$d,"skin",function(){return this._skin},function(e$d){this._skin!=e$d&&(e$e.clearCache(this,this._skin),this._skin=e$d,this._bg||(this.graphics=this._bg=new e$S),e$e.keepCache(this,this._skin),this._bg.source=e$e.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),e$A(0,e$d,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(e$d){this._bg||(this.graphics=this._bg=new e$S),this._bg.sizeGrid=e$T.fillArray(e$M.defaultSizeGrid,e$d,Number)}),e$A(0,e$d,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(e$d){this._tf.inputElementXAdjuster=e$d}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$E,this,"width",e$d),this._bg&&(this._bg.width=e$d)}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$E,this,"height",e$d),this._bg&&(this._bg.height=e$d)}),e$A(0,e$d,"editable",function(){return this._tf.editable},function(e$d){this._tf.editable=e$d}),e$A(0,e$d,"restrict",function(){return this._tf.restrict},function(e$d){this._tf.restrict=e$d}),e$A(0,e$d,"prompt",function(){return this._tf.prompt},function(e$d){this._tf.prompt=e$d}),e$A(0,e$d,"promptColor",function(){return this._tf.promptColor},function(e$d){this._tf.promptColor=e$d}),e$A(0,e$d,"maxChars",function(){return this._tf.maxChars},function(e$d){this._tf.maxChars=e$d}),e$A(0,e$d,"focus",function(){return this._tf.focus},function(e$d){this._tf.focus=e$d}),e$A(0,e$d,"type",function(){return this._tf.type},function(e$d){this._tf.type=e$d}),e$A(0,e$d,"asPassword",function(){return this._tf.asPassword},function(e$d){this._tf.asPassword=e$d}),e$l}(e$E),e$kd=function(e$d){function e$t(){e$t.__super.call(this)}return e$i(e$t,"laya.ui.VSlider",e$Z),e$t}(),e$Wd=function(e$d){function e$k(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,e$k.__super.call(this)}e$i(e$k,"laya.ui.Dialog",e$d);var e$t=e$k.prototype;return e$t.initialize=function(){this.popupEffect=e$k.manager.popupEffectHandler,this.closeEffect=e$k.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},e$t._dealDragArea=function(){var e$d=this.getChildByName("drag");e$d&&(this.dragArea=e$d.x+","+e$d.y+","+e$d.width+","+e$d.height,e$d.removeSelf())},e$t._onClick=function(e$d){var e$t=e$d.target;if(e$t)switch(e$t.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(e$t.name)}},e$t.show=function(e$d,e$t){void 0===e$d&&(e$d=!1),void 0===e$t&&(e$t=!0),this._open(!1,e$d,e$t)},e$t.popup=function(e$d,e$t){void 0===e$d&&(e$d=!1),void 0===e$t&&(e$t=!0),this._open(!0,e$d,e$t)},e$t._open=function(e$d,e$t,e$l){e$k.manager.lock(!1),this.isModal=e$d,e$k.manager.open(this,e$t,e$l)},e$t.onOpened=function(){},e$t.close=function(e$d,e$t){void 0===e$t&&(e$t=!0),e$k.manager.close(this,e$d,e$t)},e$t.onClosed=function(e$d){},e$t._onMouseDown=function(e$d){var e$t=this.getMousePoint();this._dragArea.contains(e$t.x,e$t.y)?this.startDrag():this.stopDrag()},e$A(0,e$t,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(e$d){if(e$d){var e$t=e$T.fillArray([0,0,0,0],e$d,Number);this._dragArea=new e$z(e$t[0],e$t[1],e$t[2],e$t[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),e$A(0,e$t,"isPopup",function(){return null!=this.parent}),e$A(0,e$t,"zOrder",e$d.prototype._$get_zOrder,function(e$d){e$w.superSet(e$u,this,"zOrder",e$d),e$k.manager._checkMask()}),e$A(1,e$k,"manager",function(){return e$k._manager=e$k._manager||new e$C},function(e$d){e$k._manager=e$d}),e$k.setLockView=function(e$d){e$k.manager.setLockView(e$d)},e$k.lock=function(e$d){e$k.manager.lock(e$d)},e$k.closeAll=function(){e$k.manager.closeAll()},e$k.getDialogsByGroup=function(e$d){return e$k.manager.getDialogsByGroup(e$d)},e$k.closeByGroup=function(e$d){return e$k.manager.closeByGroup(e$d)},e$k.CLOSE="close",e$k.CANCEL="cancel",e$k.SURE="sure",e$k.NO="no",e$k.OK="ok",e$k.YES="yes",e$k._manager=null,e$k}(e$u),e$id=function(e$d){function e$t(){e$t.__super.call(this)}e$i(e$t,"laya.ui.HBox",e$d);var e$l=e$t.prototype;return e$l.sortItem=function(e$d){e$d&&e$d.sort(function(e$d,e$t){return e$d.x-e$t.x})},e$l.changeItems=function(){this._itemChanged=!1;for(var e$d=[],e$t=0,e$l=0,e$k=this.numChildren;e$l<e$k;e$l++){var e$W=this.getChildAt(e$l);e$W&&e$W.layoutEnabled&&(e$d.push(e$W),e$t=this._height?this._height:Math.max(e$t,e$W.height*e$W.scaleY))}this.sortItem(e$d);var e$i=0;for(e$l=0,e$k=e$d.length;e$l<e$k;e$l++)(e$W=e$d[e$l]).x=e$i,e$i+=e$W.width*e$W.scaleX+this._space,"top"==this._align?e$W.y=0:"middle"==this._align?e$W.y=.5*(e$t-e$W.height*e$W.scaleY):"bottom"==this._align&&(e$W.y=e$t-e$W.height*e$W.scaleY);this.changeSize()},e$A(0,e$l,"height",e$d.prototype._$get_height,function(e$d){this._height!=e$d&&(e$w.superSet(e$s,this,"height",e$d),this.callLater(this.changeItems))}),e$t.NONE="none",e$t.TOP="top",e$t.MIDDLE="middle",e$t.BOTTOM="bottom",e$t}(e$s),e$Ad=function(e$d){function e$t(){e$t.__super.call(this)}e$i(e$t,"laya.ui.VBox",e$d);var e$l=e$t.prototype;return e$l.changeItems=function(){this._itemChanged=!1;for(var e$d=[],e$t=0,e$l=0,e$k=this.numChildren;e$l<e$k;e$l++){var e$W=this.getChildAt(e$l);e$W&&e$W.layoutEnabled&&(e$d.push(e$W),e$t=this._width?this._width:Math.max(e$t,e$W.width*e$W.scaleX))}this.sortItem(e$d);var e$i=0;for(e$l=0,e$k=e$d.length;e$l<e$k;e$l++)(e$W=e$d[e$l]).y=e$i,e$i+=e$W.height*e$W.scaleY+this._space,"left"==this._align?e$W.x=0:"center"==this._align?e$W.x=.5*(e$t-e$W.width*e$W.scaleX):"right"==this._align&&(e$W.x=e$t-e$W.width*e$W.scaleX);this.changeSize()},e$A(0,e$l,"width",e$d.prototype._$get_width,function(e$d){this._width!=e$d&&(e$w.superSet(e$s,this,"width",e$d),this.callLater(this.changeItems))}),e$t.NONE="none",e$t.LEFT="left",e$t.CENTER="center",e$t.RIGHT="right",e$t}(e$s),e$Bd=function(e$d){function e$t(){e$t.__super.call(this)}return e$i(e$t,"laya.ui.RadioGroup",e$a),e$t.prototype.createItem=function(e$d,e$t){return new e$_(e$d,e$t)},e$t}(),e$od=function(e$d){function e$t(){e$t.__super.call(this)}return e$i(e$t,"laya.ui.Tab",e$a),e$t.prototype.createItem=function(e$d,e$t){return new e$x(e$d,e$t)},e$t}(),e$Id=function(e$t){function e$l(e$d){this._vScrollBar=null,this._hScrollBar=null,void 0===e$d&&(e$d=""),e$l.__super.call(this,e$d)}e$i(e$l,"laya.ui.TextArea",e$t);var e$d=e$l.prototype;return e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},e$d.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},e$d.onVBarChanged=function(e$d){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},e$d.onHBarChanged=function(e$d){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},e$d.changeScroll=function(){var e$d=this._vScrollBar&&0<this._tf.maxScrollY,e$t=this._hScrollBar&&0<this._tf.maxScrollX,e$l=e$d?this._width-this._vScrollBar.width:this._width,e$k=e$t?this._height-this._hScrollBar.height:this._height,e$W=this._tf.padding||e$M.labelPadding;this._tf.width=e$l,this._tf.height=e$k,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-e$W[2],this._vScrollBar.y=e$W[1],this._vScrollBar.height=this._height-(e$t?this._hScrollBar.height:0)-e$W[1]-e$W[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=e$k/Math.max(this._tf.textHeight,e$k),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=e$d),this._hScrollBar&&(this._hScrollBar.x=e$W[0],this._hScrollBar.y=this._height-this._hScrollBar.height-e$W[3],this._hScrollBar.width=this._width-(e$d?this._vScrollBar.width:0)-e$W[0]-e$W[2],this._hScrollBar.scrollSize=Math.max(.033*e$l,1),this._hScrollBar.thumbPercent=e$l/Math.max(this._tf.textWidth,e$l),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=e$t)},e$d.scrollTo=function(e$d){this.commitMeasure(),this._tf.scrollY=e$d},e$A(0,e$d,"scrollY",function(){return this._tf.scrollY}),e$A(0,e$d,"width",e$t.prototype._$get_width,function(e$d){e$w.superSet(e$ld,this,"width",e$d),this.callLater(this.changeScroll)}),e$A(0,e$d,"hScrollBar",function(){return this._hScrollBar}),e$A(0,e$d,"height",e$t.prototype._$get_height,function(e$d){e$w.superSet(e$ld,this,"height",e$d),this.callLater(this.changeScroll)}),e$A(0,e$d,"maxScrollX",function(){return this._tf.maxScrollX}),e$A(0,e$d,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(e$d){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new e$td),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=e$d}),e$A(0,e$d,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(e$d){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new e$m),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=e$d}),e$A(0,e$d,"vScrollBar",function(){return this._vScrollBar}),e$A(0,e$d,"maxScrollY",function(){return this._tf.maxScrollY}),e$A(0,e$d,"scrollX",function(){return this._tf.scrollX}),e$l}(e$ld);!function(e$d){function e$t(){this._uiView=null,this.isCloseOther=!1,e$t.__super.call(this)}e$i(e$t,"laya.ui.AsynDialog",e$Wd);var e$l=e$t.prototype;e$l.createView=function(e$d){this._uiView=e$d},e$l._open=function(e$d,e$t,e$l){this.isModal=e$d,this.isCloseOther=e$t,e$Wd.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},e$l.onCreated=function(){this.createUI(),this.onOpen()},e$l.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},e$l.onOpen=function(){e$Wd.manager.open(this,this.isCloseOther),e$Wd.manager.lock(!1)},e$l.close=function(e$d,e$t){void 0===e$t&&(e$t=!0),e$Wd.manager.close(this),this.onClose()},e$l.onClose=function(){},e$l.destroy=function(e$d){void 0===e$d&&(e$d=!0),laya.ui.View.prototype.destroy.call(this,e$d),this._uiView=null,this.onDestroy()},e$l.onDestroy=function(){}}();e$w.__init([e$u])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$d,e$t){"use strict";for(var e$l in Object.defineProperty(e$t,"__esModule",{value:!0}),Laya){var e$k=Laya[e$l];e$k&&e$k.__isclass&&(e$t[e$l]=e$k)}}),function(e$J,e$d,e$R){e$R.un,e$R.uns;var e$f=e$R.static,e$c=e$R.class,e$Y=e$R.getset,e$k=e$R.__newvec,e$H=laya.maths.Arith,e$A=laya.webgl.atlas.AtlasResourceManager,e$l=laya.webgl.shader.BaseShader,e$j=laya.utils.Browser,e$B=laya.webgl.utils.Buffer,e$G=laya.utils.Byte,e$W=laya.utils.ClassUtils,e$o=e$R.Config,e$i=(laya.events.Event,laya.events.EventDispatcher),e$M=laya.utils.Handler,e$z=laya.net.Loader,e$t=laya.net.LoaderManager,e$I=(laya.maths.MathUtil,laya.display.Node),e$w=laya.renders.Render,e$b=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),e$D=laya.resource.Resource,e$e=laya.utils.RunDriver,e$g=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),e$q=laya.display.Sprite,e$L=laya.utils.Stat,e$$=laya.utils.StringKey,e$T=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),e$p=laya.utils.Utils,e$r=laya.webgl.WebGL,e$S=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;e$R.interface("laya.d3.core.IClone"),e$R.interface("laya.d3.graphics.IVertex"),e$R.interface("laya.d3.core.render.IUpdate"),e$R.interface("laya.d3.core.scene.ITreeNode"),e$R.interface("laya.d3.core.render.IRenderable");(function(){function e$x(){}e$c(e$x,"laya.d3.animation.AnimationClipParser01"),e$x.READ_DATA=function(){e$x._DATA.offset=e$x._reader.getUint32(),e$x._DATA.size=e$x._reader.getUint32()},e$x.READ_BLOCK=function(){for(var e$d=e$x._BLOCK.count=e$x._reader.getUint16(),e$t=e$x._BLOCK.blockStarts=[],e$l=e$x._BLOCK.blockLengths=[],e$k=0;e$k<e$d;e$k++)e$t.push(e$x._reader.getUint32()),e$l.push(e$x._reader.getUint32())},e$x.READ_STRINGS=function(){var e$d=e$x._reader.getUint32(),e$t=e$x._reader.getUint16(),e$l=e$x._reader.pos;e$x._reader.pos=e$d+e$x._DATA.offset;for(var e$k=0;e$k<e$t;e$k++)e$x._strings[e$k]=e$x._reader.readUTFString();e$x._reader.pos=e$l},e$x.parse=function(e$d,e$t){e$x._animationClip=e$d;(e$x._reader=e$t).__getBuffer();e$x.READ_DATA(),e$x.READ_BLOCK(),e$x.READ_STRINGS();for(var e$l=0,e$k=e$x._BLOCK.count;e$l<e$k;e$l++){var e$W=e$t.getUint16(),e$i=e$x._strings[e$W],e$A=e$x["READ_"+e$i];if(null==e$A)throw new Error("model file err,no this function:"+e$W+" "+e$i);e$A.call()}},e$x.READ_ANIMATIONS=function(){var e$d,e$t=0,e$l=0,e$k=e$x._reader,e$W=e$k.__getBuffer(),e$i=[],e$A=e$k.getUint8();for(e$i.length=e$A,e$t=0;e$t<e$A;e$t++)e$i[e$t]=e$k.getUint16();var e$B=[],e$o=e$k.getUint16();for(e$B.length=e$o,e$t=0;e$t<e$o;e$t++)e$B[e$t]=e$k.getFloat32();var e$I=e$x._animationClip;e$I.name=e$x._strings[e$k.getUint16()];var e$b=e$I._duration=e$k.getFloat32();e$I.islooping=!!e$k.getByte(),e$I._frameRate=e$k.getInt16();var e$f=e$k.getInt16(),e$J=e$I._nodes=new Array;e$J.length=e$f,(e$I._publicClipDatas=[]).length=e$f;var e$c=e$I._nodesMap={},e$Y=0,e$w=0;for(e$t=0;e$t<e$f;e$t++){e$d=e$J[e$t]=new e$N;var e$D=e$k.getUint16(),e$z=e$d.path=[];for(e$z.length=e$D,e$l=0;e$l<e$D;e$l++)e$z[e$l]=e$x._strings[e$k.getUint16()];var e$e=e$z.join("/"),e$g=e$c[e$e];e$g||(e$c[e$e]=e$g=[]),e$g.push(e$d);var e$H=e$k.getInt16();-1!==e$H&&(e$d.componentType=e$x._strings[e$H]);var e$R=e$U._propertyIndexDic[e$x._strings[e$k.getUint16()]];if(null==e$R)throw new Error("AnimationClipParser01:unknown property name.");var e$G=e$R<4,e$q=!e$G||e$G&&""===e$z[0];(e$d._cacheProperty=e$q)?e$Y++:e$w++,e$d.propertyNameID=e$R;var e$L=e$i[e$k.getUint8()];e$d.keyFrameWidth=e$L/4;var e$$=e$d.keyFrames=[],e$p=e$$.length=e$k.getUint16(),e$M=null,e$T=NaN;for(e$l=0;e$l<e$p;e$l++){var e$r=e$$[e$l]=new e$E;e$T=e$r.startTime=e$B[e$k.getUint16()];var e$S=e$k.pos;e$r.inTangent=new Float32Array(e$W.slice(e$S,e$S+e$L)),e$k.pos+=e$L,e$S=e$k.pos,e$r.outTangent=new Float32Array(e$W.slice(e$S,e$S+e$L)),e$k.pos+=e$L,e$S=e$k.pos,e$r.data=new Float32Array(e$W.slice(e$S,e$S+e$L)),e$k.pos+=e$L,e$M&&(e$M.next=e$r,e$M.duration=e$T-e$M.startTime),e$M=e$r}e$r.next=null,e$r.duration=e$b-e$T}var e$j=e$I._nodeToCachePropertyMap=new Int32Array(e$f),e$C=e$I._cachePropertyMap=new Int32Array(e$Y),e$K=e$I._unCachePropertyMap=new Int32Array(e$w);for(e$Y=e$w=0,e$t=0;e$t<e$f;e$t++)(e$d=e$J[e$t])._cacheProperty?(e$j[e$t]=e$Y,e$C[e$Y++]=e$t):e$K[e$w++]=e$t},e$x._animationClip=null,e$x._reader=null,e$x._strings=[],e$f(e$x,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function e$V(){}e$c(e$V,"laya.d3.animation.AnimationClipParser02"),e$V.READ_DATA=function(){e$V._DATA.offset=e$V._reader.getUint32(),e$V._DATA.size=e$V._reader.getUint32()},e$V.READ_BLOCK=function(){for(var e$d=e$V._BLOCK.count=e$V._reader.getUint16(),e$t=e$V._BLOCK.blockStarts=[],e$l=e$V._BLOCK.blockLengths=[],e$k=0;e$k<e$d;e$k++)e$t.push(e$V._reader.getUint32()),e$l.push(e$V._reader.getUint32())},e$V.READ_STRINGS=function(){var e$d=e$V._reader.getUint32(),e$t=e$V._reader.getUint16(),e$l=e$V._reader.pos;e$V._reader.pos=e$d+e$V._DATA.offset;for(var e$k=0;e$k<e$t;e$k++)e$V._strings[e$k]=e$V._reader.readUTFString();e$V._reader.pos=e$l},e$V.parse=function(e$d,e$t){e$V._animationClip=e$d;(e$V._reader=e$t).__getBuffer();e$V.READ_DATA(),e$V.READ_BLOCK(),e$V.READ_STRINGS();for(var e$l=0,e$k=e$V._BLOCK.count;e$l<e$k;e$l++){var e$W=e$t.getUint16(),e$i=e$V._strings[e$W],e$A=e$V["READ_"+e$i];if(null==e$A)throw new Error("model file err,no this function:"+e$W+" "+e$i);e$A.call()}},e$V.READ_ANIMATIONS=function(){var e$d,e$t=0,e$l=0,e$k=e$V._reader,e$W=e$k.__getBuffer(),e$i=[],e$A=e$k.getUint8();for(e$i.length=e$A,e$t=0;e$t<e$A;e$t++)e$i[e$t]=e$k.getUint16();var e$B=[],e$o=e$k.getUint16();for(e$B.length=e$o,e$t=0;e$t<e$o;e$t++)e$B[e$t]=e$k.getFloat32();var e$I=e$V._animationClip;e$I.name=e$V._strings[e$k.getUint16()];var e$b=e$I._duration=e$k.getFloat32();e$I.islooping=!!e$k.getByte(),e$I._frameRate=e$k.getInt16();var e$f=e$k.getInt16(),e$J=e$I._nodes=new Array;e$J.length=e$f,(e$I._publicClipDatas=[]).length=e$f;var e$c=e$I._nodesMap={},e$Y=0,e$w=0;for(e$t=0;e$t<e$f;e$t++){e$d=e$J[e$t]=new e$N;var e$D=e$k.getUint16(),e$z=e$d.path=[];for(e$z.length=e$D,e$l=0;e$l<e$D;e$l++)e$z[e$l]=e$V._strings[e$k.getUint16()];var e$e=e$z.join("/"),e$g=e$c[e$e];e$g||(e$c[e$e]=e$g=[]),e$g.push(e$d);var e$H=e$k.getInt16();-1!==e$H&&(e$d.componentType=e$V._strings[e$H]);var e$R=e$U._propertyIndexDic[e$V._strings[e$k.getUint16()]];if(null==e$R)throw new Error("AnimationClipParser02:unknown property name.");var e$G=e$R<4,e$q=!e$G||e$G&&""===e$z[0];(e$d._cacheProperty=e$q)?e$Y++:e$w++,e$d.propertyNameID=e$R;var e$L=e$i[e$k.getUint8()];e$d.keyFrameWidth=e$L/4;var e$$=e$d.keyFrames=[],e$p=e$$.length=e$k.getUint16(),e$M=null,e$T=NaN;for(e$l=0;e$l<e$p;e$l++){var e$r=e$$[e$l]=new e$E;e$T=e$r.startTime=e$B[e$k.getUint16()];var e$S=e$k.pos;e$r.inTangent=new Float32Array(e$W.slice(e$S,e$S+e$L)),e$k.pos+=e$L,e$S=e$k.pos,e$r.outTangent=new Float32Array(e$W.slice(e$S,e$S+e$L)),e$k.pos+=e$L,e$S=e$k.pos,e$r.data=new Float32Array(e$W.slice(e$S,e$S+e$L)),e$k.pos+=e$L,e$M&&(e$M.next=e$r,e$M.duration=e$T-e$M.startTime),e$M=e$r}e$r.next=null,e$r.duration=e$b-e$T}var e$j=e$k.getUint16();for(e$t=0;e$t<e$j;e$t++){var e$C,e$K=new e$Z;e$K.time=e$k.getFloat32(),e$K.eventName=e$V._strings[e$k.getUint16()];var e$x=e$k.getUint16();for(0<e$x&&(e$K.params=e$C=[]),e$l=0;e$l<e$x;e$l++){switch(e$k.getByte()){case 0:e$C.push(!!e$k.getByte());break;case 1:e$C.push(e$k.getInt32());break;case 2:e$C.push(e$k.getFloat32());break;case 3:e$C.push(e$V._strings[e$k.getUint16()]);break;default:throw new Error("unknown type.")}}e$I.addEvent(e$K)}var e$n=e$I._nodeToCachePropertyMap=new Int32Array(e$f),e$Q=e$I._cachePropertyMap=new Int32Array(e$Y),e$y=e$I._unCachePropertyMap=new Int32Array(e$w);for(e$Y=e$w=0,e$t=0;e$t<e$f;e$t++)(e$d=e$J[e$t])._cacheProperty?(e$n[e$t]=e$Y,e$Q[e$Y++]=e$t):e$y[e$w++]=e$t},e$V._animationClip=null,e$V._reader=null,e$V._strings=[],e$f(e$V,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var e$Z=function(){function e$d(){this.time=NaN,this.eventName=null,this.params=null}return e$c(e$d,"laya.d3.animation.AnimationEvent"),e$d}(),e$U=function(){function e$k(){this._childs=[],this.transform=new e$et(this)}e$c(e$k,"laya.d3.animation.AnimationNode");var e$d=e$k.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.addChild=function(e$d){e$d._parent=this,e$d.transform.setParent(this.transform),this._childs.push(e$d)},e$d.removeChild=function(e$d){var e$t=this._childs.indexOf(e$d);-1!==e$t&&this._childs.splice(e$t,1)},e$d.getChildByName=function(e$d){for(var e$t=0,e$l=this._childs.length;e$t<e$l;e$t++){var e$k=this._childs[e$t];if(e$k.name===e$d)return e$k}return null},e$d.getChildByIndex=function(e$d){return this._childs[e$d]},e$d.getChildCount=function(){return this._childs.length},e$d.cloneTo=function(e$d){var e$t=e$d;e$t.name=this.name;for(var e$l=0,e$k=this._childs.length;e$l<e$k;e$l++){var e$W=this._childs[e$l],e$i=e$W.clone();e$t.addChild(e$i);var e$A=e$W.transform,e$B=e$i.transform;e$B.setLocalPosition(e$A.getLocalPosition()),e$B.setLocalRotation(e$A.getLocalRotation()),e$B.setLocalScale(e$A.getLocalScale()),e$B._localRotationEuler=e$A._localRotationEuler,e$B._setWorldMatrixIgnoreUpdate(e$A.getWorldMatrix())}},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$k.__init__=function(){e$k.registerAnimationNodeProperty("localPosition",e$k._getLocalPosition,e$k._setLocalPosition),e$k.registerAnimationNodeProperty("localRotation",e$k._getLocalRotation,e$k._setLocalRotation),e$k.registerAnimationNodeProperty("localScale",e$k._getLocalScale,e$k._setLocalScale),e$k.registerAnimationNodeProperty("localRotationEuler",e$k._getLocalRotationEuler,e$k._setLocalRotationEuler),e$k.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",e$k._getParticleRenderSharedMaterialTintColor,e$k._setParticleRenderSharedMaterialTintColor),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",e$k._getMeshRenderSharedMaterialTilingOffset,e$k._setMeshRenderSharedMaterialTilingOffset),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",e$k._getMeshRenderSharedMaterialAlbedo,e$k._setMeshRenderSharedMaterialAlbedo),e$k.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",e$k._getSkinnedMeshRenderSharedMaterialTilingOffset,e$k._setSkinnedMeshRenderSharedMaterialTilingOffset),e$k.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",e$k._getSkinnedMeshRenderSharedMaterialAlbedo,e$k._setSkinnedMeshRenderSharedMaterialAlbedo),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",e$k._getMeshRenderSharedMaterialAlbedo,e$k._setMeshRenderSharedMaterialAlbedo),e$k.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",e$k._getSkinnedMeshRenderSharedMaterialAlbedo,e$k._setSkinnedMeshRenderSharedMaterialAlbedo),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",e$k._getMeshRenderSharedMaterialIntensity,e$k._setMeshRenderSharedMaterialIntensity),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",e$k._getMeshRenderSharedMaterialAlpha,e$k._setMeshRenderSharedMaterialAlpha),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",e$k._getMeshRenderSharedMaterialAlphaColor,e$k._setMeshRenderSharedMaterialAlphaColor),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",e$k._getMeshRenderSharedMaterialBaseColor,e$k._setMeshRenderSharedMaterialBaseColor),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",e$k._getMeshRenderSharedMaterialDissolve,e$k._setMeshRenderSharedMaterialDissolve),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",e$k._getMeshRenderSharedMaterialDissolveSpeed,e$k._setMeshRenderSharedMaterialDissolveSpeed),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",e$k._getMeshRenderSharedMaterialMMultiplier,e$k._setMeshRenderSharedMaterialMMultiplier),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",e$k._getMeshRenderSharedMaterialBaseScrollSpeedX,e$k._setMeshRenderSharedMaterialBaseScrollSpeedX),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",e$k._getMeshRenderSharedMaterialBaseScrollSpeedY,e$k._setMeshRenderSharedMaterialBaseScrollSpeedY),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",e$k._getMeshRenderSharedMaterialSecondScrollSpeedX,e$k._setMeshRenderSharedMaterialSecondScrollSpeedX),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",e$k._getMeshRenderSharedMaterialSecondScrollSpeedY,e$k._setMeshRenderSharedMaterialSecondScrollSpeedY),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",e$k._getMeshRenderSharedMaterialDetailTilingOffset,e$k._setMeshRenderSharedMaterialDetailTilingOffset),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",e$k._getMeshRenderSharedMaterialDissolveTilingOffset,e$k._setMeshRenderSharedMaterialDissolveTilingOffset),e$k.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",e$k._getMeshRenderSharedMaterialMaskTilingOffset,e$k._setMeshRenderSharedMaterialMaskTilingOffset)},e$k.registerAnimationNodeProperty=function(e$d,e$t,e$l){if(e$k._propertyIndexDic[e$d])throw new Error("AnimationNode: this propertyName has registered.");e$k._propertyIndexDic[e$d]=e$k._propertyIDCounter,e$k._propertyGetFuncs[e$k._propertyIDCounter]=e$t,e$k._propertySetFuncs[e$k._propertyIDCounter]=e$l,e$k._propertyIDCounter++},e$k._getLocalPosition=function(e$d,e$t){return e$d?e$d.transform.getLocalPosition():e$t._transform.localPosition.elements},e$k._setLocalPosition=function(e$d,e$t,e$l){if(e$d)e$d.transform.setLocalPosition(e$l);else{var e$k=e$t._transform,e$W=e$k.localPosition;e$W.elements=e$l,e$k.localPosition=e$W}},e$k._getLocalRotation=function(e$d,e$t){return e$d?e$d.transform.getLocalRotation():e$t._transform.localRotation.elements},e$k._setLocalRotation=function(e$d,e$t,e$l){if(e$d)e$d.transform.setLocalRotation(e$l);else{var e$k=e$t._transform,e$W=e$k.localRotation;e$W.elements=e$l,e$k.localRotation=e$W}},e$k._getLocalScale=function(e$d,e$t){return e$d?e$d.transform.getLocalScale():e$t._transform.localScale.elements},e$k._setLocalScale=function(e$d,e$t,e$l){if(e$d)e$d.transform.setLocalScale(e$l);else{var e$k=e$t._transform,e$W=e$k.localScale;e$W.elements=e$l,e$k.localScale=e$W}},e$k._getLocalRotationEuler=function(e$d,e$t){return e$d?e$d.transform.getLocalRotationEuler():e$t._transform.localRotationEuler.elements},e$k._setLocalRotationEuler=function(e$d,e$t,e$l){if(e$d)e$d.transform.setLocalRotationEuler(e$l);else{var e$k=e$t._transform,e$W=e$k.localRotationEuler;e$W.elements=e$l,e$k.localRotationEuler=e$W}},e$k._getMeshRenderSharedMaterialTilingOffset=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return e$t.meshRender.sharedMaterial.tilingOffset.elements},e$k._setMeshRenderSharedMaterialTilingOffset=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.meshRender.material).tilingOffset).elements=e$l,e$k.tilingOffset=e$W)}else(e$W=(e$k=e$t.meshRender.material).tilingOffset).elements=e$l,e$k.tilingOffset=e$W},e$k._getMeshRenderSharedMaterialAlbedo=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.albedoColor.elements:null}return e$t.meshRender.sharedMaterial.albedoColor.elements},e$k._setMeshRenderSharedMaterialAlbedo=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.meshRender.material).albedoColor).elements=e$l,e$k.albedoColor=e$W)}else(e$W=(e$k=e$t.meshRender.material).albedoColor).elements=e$l,e$k.albedoColor=e$W},e$k._getSkinnedMeshRenderSharedMaterialTilingOffset=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return e$t.skinnedMeshRender.sharedMaterial.tilingOffset.elements},e$k._setSkinnedMeshRenderSharedMaterialTilingOffset=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.skinnedMeshRender.material).tilingOffset).elements=e$l,e$k.tilingOffset=e$W)}else(e$W=(e$k=e$t.skinnedMeshRender.material).tilingOffset).elements=e$l,e$k.tilingOffset=e$W},e$k._getSkinnedMeshRenderSharedMaterialAlbedo=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return e$t.skinnedMeshRender.sharedMaterial.albedoColor.elements},e$k._setSkinnedMeshRenderSharedMaterialAlbedo=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.skinnedMeshRender.material).albedoColor).elements=e$l,e$k.albedoColor=e$W)}else(e$W=(e$k=e$t.skinnedMeshRender.material).albedoColor).elements=e$l,e$k.albedoColor=e$W},e$k._getParticleRenderSharedMaterialTintColor=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.particleRender.sharedMaterial.tintColor.elements:null}return e$t.particleRender.sharedMaterial.tintColor.elements},e$k._setParticleRenderSharedMaterialTintColor=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.particleRender.material).tintColor).elements=e$l,e$k.tintColor=e$W)}else(e$W=(e$k=e$t.particleRender.material).tintColor).elements=e$l,e$k.tintColor=e$W},e$k._getMeshRenderSharedMaterialAlphaColor=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.alphaColor.elements:null}return e$t.meshRender.sharedMaterial.alphaColor.elements},e$k._setMeshRenderSharedMaterialAlphaColor=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.meshRender.material).alphaColor).elements=e$l,e$k.alphaColor=e$W)}else(e$W=(e$k=e$t.meshRender.material).alphaColor).elements=e$l,e$k.alphaColor=e$W},e$k._getMeshRenderSharedMaterialBaseColor=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.baseColor.elements:null}return e$t.meshRender.sharedMaterial.baseColor.elements},e$k._setMeshRenderSharedMaterialBaseColor=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.meshRender.material).baseColor).elements=e$l,e$k.baseColor=e$W)}else(e$W=(e$k=e$t.meshRender.material).baseColor).elements=e$l,e$k.baseColor=e$W},e$k._getMeshRenderSharedMaterialDissolve=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.dissolve:0}return e$t.meshRender.sharedMaterial.dissolve},e$k._setMeshRenderSharedMaterialDissolve=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.dissolve=e$l[0])}else e$t.meshRender.material.dissolve=e$l[0]},e$k._getMeshRenderSharedMaterialDissolveSpeed=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.dissolveSpeed:0}return e$t.meshRender.sharedMaterial.dissolveSpeed},e$k._setMeshRenderSharedMaterialDissolveSpeed=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.dissolveSpeed=e$l[0])}else e$t.meshRender.material.dissolveSpeed=e$l[0]},e$k._getMeshRenderSharedMaterialMMultiplier=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.mMultiplier:0}return e$t.meshRender.sharedMaterial.mMultiplier},e$k._setMeshRenderSharedMaterialMMultiplier=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.mMultiplier=e$l[0])}else e$t.meshRender.material.mMultiplier=e$l[0]},e$k._getMeshRenderSharedMaterialBaseScrollSpeedX=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return e$t.meshRender.sharedMaterial.baseScrollSpeedX},e$k._setMeshRenderSharedMaterialBaseScrollSpeedX=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.baseScrollSpeedX=e$l[0])}else e$t.meshRender.material.baseScrollSpeedX=e$l[0]},e$k._getMeshRenderSharedMaterialBaseScrollSpeedY=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return e$t.meshRender.sharedMaterial.baseScrollSpeedY},e$k._setMeshRenderSharedMaterialBaseScrollSpeedY=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.baseScrollSpeedY=e$l[0])}else e$t.meshRender.material.baseScrollSpeedY=e$l[0]},e$k._getMeshRenderSharedMaterialSecondScrollSpeedX=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return e$t.meshRender.sharedMaterial.secondScrollSpeedX},e$k._setMeshRenderSharedMaterialSecondScrollSpeedX=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.secondScrollSpeedX=e$l[0])}else e$t.meshRender.material.secondScrollSpeedX=e$l[0]},e$k._getMeshRenderSharedMaterialSecondScrollSpeedY=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return e$t.meshRender.sharedMaterial.secondScrollSpeedY},e$k._setMeshRenderSharedMaterialSecondScrollSpeedY=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.secondScrollSpeedY=e$l[0])}else e$t.meshRender.material.secondScrollSpeedY=e$l[0]},e$k._getMeshRenderSharedMaterialAlpha=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.alpha:0}return e$t.meshRender.sharedMaterial.alpha},e$k._setMeshRenderSharedMaterialAlpha=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.alpha=e$l[0])}else e$t.meshRender.material.alpha=e$l[0]},e$k._getMeshRenderSharedMaterialIntensity=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.intensity:0}return e$t.meshRender.sharedMaterial.intensity},e$k._setMeshRenderSharedMaterialIntensity=function(e$d,e$t,e$l){if(e$d){var e$k=e$d.transform._entity;e$k&&(e$k.owner.meshRender.material.intensity=e$l[0])}else e$t.meshRender.material.intensity=e$l[0]},e$k._getMeshRenderSharedMaterialDetailTilingOffset=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return e$t.meshRender.sharedMaterial.detailTilingOffset.elements},e$k._setMeshRenderSharedMaterialDetailTilingOffset=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.meshRender.material).detailTilingOffset).elements=e$l,e$k.detailTilingOffset=e$W)}else(e$W=(e$k=e$t.meshRender.material).detailTilingOffset).elements=e$l,e$k.detailTilingOffset=e$W},e$k._getMeshRenderSharedMaterialDissolveTilingOffset=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return e$t.meshRender.sharedMaterial.dissolveTilingOffset.elements},e$k._setMeshRenderSharedMaterialDissolveTilingOffset=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.meshRender.material).dissolveTilingOffset).elements=e$l,e$k.dissolveTilingOffset=e$W)}else(e$W=(e$k=e$t.meshRender.material).dissolveTilingOffset).elements=e$l,e$k.dissolveTilingOffset=e$W},e$k._getMeshRenderSharedMaterialMaskTilingOffset=function(e$d,e$t){if(e$d){var e$l=e$d.transform._entity;return e$l?e$l.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return e$t.meshRender.sharedMaterial.maskTilingOffset.elements},e$k._setMeshRenderSharedMaterialMaskTilingOffset=function(e$d,e$t,e$l){var e$k,e$W;if(e$d){var e$i=e$d.transform._entity;e$i&&((e$W=(e$k=e$i.owner.meshRender.material).maskTilingOffset).elements=e$l,e$k.maskTilingOffset=e$W)}else(e$W=(e$k=e$t.meshRender.material).maskTilingOffset).elements=e$l,e$k.maskTilingOffset=e$W},e$k._propertyIDCounter=0,e$k._propertyIndexDic={},e$k._propertySetFuncs=[],e$k._propertyGetFuncs=[],e$k}(),e$E=function(){function e$d(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return e$c(e$d,"laya.d3.animation.Keyframe"),e$d}(),e$N=function(){function e$d(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return e$c(e$d,"laya.d3.animation.KeyframeNode"),e$d}(),e$C=(function(){function e$d(){this._tempVector30=new e$At,this._tempVector31=new e$At,this._tempVector32=new e$At,this._a=new e$At,this._b=new e$At,this._c=new e$At,this._d=new e$At}e$c(e$d,"laya.d3.core.glitter.SplineCurvePositionVelocity");var e$t=e$d.prototype;e$t.Init=function(e$d,e$t,e$l,e$k){e$d.cloneTo(this._d),e$t.cloneTo(this._c),e$At.scale(e$d,2,this._a),e$At.scale(e$l,2,this._tempVector30),e$At.subtract(this._a,this._tempVector30,this._a),e$At.add(this._a,e$t,this._a),e$At.add(this._a,e$k,this._a),e$At.scale(e$l,3,this._b),e$At.scale(e$d,3,this._tempVector30),e$At.subtract(this._b,this._tempVector30,this._b),e$At.subtract(this._b,e$k,this._b),e$At.scale(e$t,2,this._tempVector30),e$At.subtract(this._b,this._tempVector30,this._b)},e$t.Slerp=function(e$d,e$t){e$At.scale(this._a,e$d*e$d*e$d,this._tempVector30),e$At.scale(this._b,e$d*e$d,this._tempVector31),e$At.scale(this._c,e$d,this._tempVector32),e$At.add(this._tempVector30,this._tempVector31,e$t),e$At.add(e$t,this._tempVector32,e$t),e$At.add(e$t,this._d,e$t)}}(),function(){function e$Q(e$d,e$t,e$l,e$k){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=e$d,this._h=e$t,this._minHeight=e$l,this._maxHeight=e$k}e$c(e$Q,"laya.d3.core.HeightMap");var e$d=e$Q.prototype;e$d._inBounds=function(e$d,e$t){return 0<=e$d&&e$d<this._h&&0<=e$t&&e$t<this._w},e$d.getHeight=function(e$d,e$t){return this._inBounds(e$d,e$t)?this._datas[e$d][e$t]:NaN},e$Y(0,e$d,"width",function(){return this._w}),e$Y(0,e$d,"height",function(){return this._h}),e$Y(0,e$d,"maxHeight",function(){return this._maxHeight}),e$Y(0,e$d,"minHeight",function(){return this._minHeight}),e$Q.creatFromMesh=function(e$d,e$t,e$l,e$k){for(var e$W=[],e$i=[],e$A=e$d.getSubMeshCount(),e$B=0;e$B<e$A;e$B++){for(var e$o=e$d.getSubMesh(e$B),e$I=e$o._getVertexBuffer(),e$b=e$I.getData(),e$f=[],e$J=0;e$J<e$b.length;e$J+=e$I.vertexDeclaration.vertexStride/4){var e$c=new e$At(e$b[e$J+0],e$b[e$J+1],e$b[e$J+2]);e$f.push(e$c)}e$W.push(e$f);var e$Y=e$o._getIndexBuffer();e$i.push(e$Y.getData())}var e$w=e$d.boundingBox,e$D=e$w.min.x,e$z=e$w.min.z,e$e=e$w.max.x,e$g=e$w.max.z,e$H=e$w.min.y,e$R=e$w.max.y,e$G=e$e-e$D,e$q=e$g-e$z,e$L=e$k.elements[0]=e$G/(e$t-1),e$$=e$k.elements[1]=e$q/(e$l-1),e$p=new e$Q(e$t,e$l,e$H,e$R),e$M=e$Q._tempRay,e$T=e$M.direction.elements;e$T[0]=0,e$T[1]=-1,e$T[2]=0;var e$r=e$R+.1;e$M.origin.elements[1]=e$r;for(var e$S=0;e$S<e$l;e$S++){var e$j=e$z+e$S*e$$;e$p._datas[e$S]=[];for(var e$C=0;e$C<e$t;e$C++){var e$K=e$D+e$C*e$L,e$x=e$M.origin.elements;e$x[0]=e$K,e$x[2]=e$j;var e$n=e$Q._getPosition(e$M,e$W,e$i);e$p._datas[e$S][e$C]=e$n===Number.MAX_VALUE?NaN:e$r-e$n}}return e$p},e$Q.createFromImage=function(e$d,e$t,e$l){for(var e$k=e$d.width,e$W=e$d.height,e$i=new e$Q(e$k,e$W,e$t,e$l),e$A=(e$l-e$t)/254,e$B=e$d.getPixels(),e$o=0,e$I=0;e$I<e$W;e$I++)for(var e$b=e$i._datas[e$I]=[],e$f=0;e$f<e$k;e$f++){var e$J=e$B[e$o++],e$c=e$B[e$o++],e$Y=e$B[e$o++],e$w=e$B[e$o++];e$b[e$f]=255==e$J&&255==e$c&&255==e$Y&&255==e$w?NaN:(e$J+e$c+e$Y)/3*e$A+e$t}return e$i},e$Q._getPosition=function(e$d,e$t,e$l){for(var e$k=Number.MAX_VALUE,e$W=0;e$W<e$t.length;e$W++)for(var e$i=e$t[e$W],e$A=e$l[e$W],e$B=0;e$B<e$A.length;e$B+=3){var e$o=e$i[e$A[e$B+0]],e$I=e$i[e$A[e$B+1]],e$b=e$i[e$A[e$B+2]],e$f=e$Yt.rayIntersectsTriangle(e$d,e$o,e$I,e$b);!isNaN(e$f)&&e$f<e$k&&(e$k=e$f)}return e$k},e$f(e$Q,["_tempRay",function(){return this._tempRay=new e$Wt(new e$At,new e$At)}])}(),function(){function e$W(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}e$c(e$W,"laya.d3.core.Layer");var e$d=e$W.prototype;return e$d._binarySearchIndex=function(){for(var e$d=0,e$t=e$W._collsionTestList.length-1,e$l=0;e$d<=e$t;){e$l=Math.floor((e$d+e$t)/2);var e$k=e$W._collsionTestList[e$l];if(e$k==this._number)return e$l;e$k>this._number?e$t=e$l-1:e$d=e$l+1}return e$d},e$d._addCollider=function(e$d){0===this._colliders.length&&e$W._collsionTestList.splice(this._binarySearchIndex(),0,this._number),e$d._isRigidbody?(this._colliders.unshift(e$d),this._nonRigidbodyOffset++):this._colliders.push(e$d)},e$d._removeCollider=function(e$d){var e$t=this._colliders.indexOf(e$d);e$t<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(e$t,1),0===this._colliders.length&&e$W._collsionTestList.splice(e$W._collsionTestList.indexOf(this._number),1)},e$Y(0,e$d,"number",function(){return this._number}),e$Y(0,e$d,"visible",function(){return this._visible},function(e$d){this._visible=e$d,e$W._visibleLayers=e$d?e$W._visibleLayers|this.mask:e$W._visibleLayers&~this.mask}),e$Y(0,e$d,"mask",function(){return this._mask}),e$Y(1,e$W,"visibleLayers",function(){return e$W._visibleLayers},function(e$d){e$W._visibleLayers=e$d;for(var e$t=0,e$l=e$W._layerList.length;e$t<e$l;e$t++){var e$k=e$W._layerList[e$t];e$k._visible=0!=(e$k._mask&e$W._visibleLayers)}}),e$W.__init__=function(){e$W._layerList.length=31;for(var e$d=0;e$d<31;e$d++){var e$t=new e$W;e$W._layerList[e$d]=e$t,0===e$d?(e$t.name="Default Layer",e$t.visible=!0):(e$t.name="Layer-"+e$d,e$t.visible=!1),e$t._number=e$d,e$t._mask=Math.pow(2,e$d)}e$W.currentCreationLayer=e$W._layerList[0]},e$W.getLayerByNumber=function(e$d){if(e$d<0||30<e$d)throw new Error("无法返回指定Layer，该number超出范围！");return e$W._layerList[e$d]},e$W.getLayerByName=function(e$d){for(var e$t=0;e$t<31;e$t++)if(e$W._layerList[e$t].name===e$d)return e$W._layerList[e$t];throw new Error("无法返回指定Layer,该name不存在")},e$W.isVisible=function(e$d){return 0!=(e$d&e$W._currentCameraCullingMask&e$W._visibleLayers)},e$W._layerList=[],e$W._visibleLayers=2147483647,e$W._collsionTestList=[],e$W._currentCameraCullingMask=2147483647,e$W.maxCount=31,e$W.currentCreationLayer=null,e$W}()),e$K=(function(){function e$d(e$d,e$t,e$l){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=e$d,this._minCount=e$t,this._maxCount=e$l}e$c(e$d,"laya.d3.core.particleShuriKen.module.Burst");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.cloneTo=function(e$d){var e$t=e$d;e$t._time=this._time,e$t._minCount=this._minCount,e$t._maxCount=this._maxCount},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"time",function(){return this._time}),e$Y(0,e$t,"minCount",function(){return this._minCount}),e$Y(0,e$t,"maxCount",function(){return this._maxCount})}(),function(){function e$d(e$d){this._color=null,this.enbale=!1,this._color=e$d}e$c(e$d,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var e$t=e$d.prototype;e$t.cloneTo=function(e$d){var e$t=e$d;this._color.cloneTo(e$t._color),e$t.enbale=this.enbale},e$t.clone=function(){var e$d;switch(this._color.type){case 0:e$d=e$n.createByConstant(this._color.constant.clone());break;case 1:e$d=e$n.createByGradient(this._color.gradient.clone());break;case 2:e$d=e$n.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:e$d=e$n.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var e$t=new this.constructor(e$d);return e$t.enbale=this.enbale,e$t},e$Y(0,e$t,"color",function(){return this._color})}(),function(){function e$d(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}e$c(e$d,"laya.d3.core.particleShuriKen.module.Emission");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),e$t._destroy=function(){this._bursts=null,this._destroyed=!0},e$t.getBurstsCount=function(){return this._bursts.length},e$t.getBurstByIndex=function(e$d){return this._bursts[e$d]},e$t.addBurst=function(e$d){var e$t=this._bursts.length;if(0<e$t)for(var e$l=0;e$l<e$t;e$l++)this._bursts[e$l].time>e$d.time&&this._bursts.splice(e$l,0,e$d);this._bursts.push(e$d)},e$t.removeBurst=function(e$d){var e$t=this._bursts.indexOf(e$d);-1!==e$t&&this._bursts.splice(e$t,1)},e$t.removeBurstByIndex=function(e$d){this._bursts.splice(e$d,1)},e$t.clearBurst=function(){this._bursts.length=0},e$t.cloneTo=function(e$d){var e$t=e$d,e$l=e$t._bursts;e$l.length=this._bursts.length;for(var e$k=0,e$W=this._bursts.length;e$k<e$W;e$k++){var e$i=e$l[e$k];e$i?this._bursts[e$k].cloneTo(e$i):e$l[e$k]=this._bursts[e$k].clone()}e$t._emissionRate=this._emissionRate,e$t.enbale=this.enbale},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"destroyed",function(){return this._destroyed}),e$Y(0,e$t,"emissionRate",function(){return this._emissionRate},function(e$d){if(e$d<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=e$d})}(),function(){function e$k(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}e$c(e$k,"laya.d3.core.particleShuriKen.module.FrameOverTime");var e$d=e$k.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.cloneTo=function(e$d){var e$t=e$d;e$t._type=this._type,e$t._constant=this._constant,this._overTime.cloneTo(e$t._overTime),e$t._constantMin=this._constantMin,e$t._constantMax=this._constantMax,this._overTimeMin.cloneTo(e$t._overTimeMin),this._overTimeMax.cloneTo(e$t._overTimeMax)},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$d,"frameOverTimeData",function(){return this._overTime}),e$Y(0,e$d,"constant",function(){return this._constant}),e$Y(0,e$d,"type",function(){return this._type}),e$Y(0,e$d,"frameOverTimeDataMin",function(){return this._overTimeMin}),e$Y(0,e$d,"constantMin",function(){return this._constantMin}),e$Y(0,e$d,"frameOverTimeDataMax",function(){return this._overTimeMax}),e$Y(0,e$d,"constantMax",function(){return this._constantMax}),e$k.createByConstant=function(e$d){var e$t=new e$k;return e$t._type=0,e$t._constant=e$d,e$t},e$k.createByOverTime=function(e$d){var e$t=new e$k;return e$t._type=1,e$t._overTime=e$d,e$t},e$k.createByRandomTwoConstant=function(e$d,e$t){var e$l=new e$k;return e$l._type=2,e$l._constantMin=e$d,e$l._constantMax=e$t,e$l},e$k.createByRandomTwoOverTime=function(e$d,e$t){var e$l=new e$k;return e$l._type=3,e$l._overTimeMin=e$d,e$l._overTimeMax=e$t,e$l},e$k}()),e$x=function(){function e$I(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}e$c(e$I,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var e$d=e$I.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.cloneTo=function(e$d){var e$t=e$d;e$t._type=this._type,e$t._separateAxes=this._separateAxes,e$t._constant=this._constant,this._constantSeparate.cloneTo(e$t._constantSeparate),this._gradient.cloneTo(e$t._gradient),this._gradientX.cloneTo(e$t._gradientX),this._gradientY.cloneTo(e$t._gradientY),this._gradientZ.cloneTo(e$t._gradientZ),e$t._constantMin=this._constantMin,e$t._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(e$t._constantMinSeparate),this._constantMaxSeparate.cloneTo(e$t._constantMaxSeparate),this._gradientMin.cloneTo(e$t._gradientMin),this._gradientMax.cloneTo(e$t._gradientMax),this._gradientXMin.cloneTo(e$t._gradientXMin),this._gradientXMax.cloneTo(e$t._gradientXMax),this._gradientYMin.cloneTo(e$t._gradientYMin),this._gradientYMax.cloneTo(e$t._gradientYMax),this._gradientZMin.cloneTo(e$t._gradientZMin),this._gradientZMax.cloneTo(e$t._gradientZMax)},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$d,"gradientZ",function(){return this._gradientZ}),e$Y(0,e$d,"constant",function(){return this._constant}),e$Y(0,e$d,"gradient",function(){return this._gradient}),e$Y(0,e$d,"separateAxes",function(){return this._separateAxes}),e$Y(0,e$d,"type",function(){return this._type}),e$Y(0,e$d,"constantSeparate",function(){return this._constantSeparate}),e$Y(0,e$d,"gradientX",function(){return this._gradientX}),e$Y(0,e$d,"gradientY",function(){return this._gradientY}),e$Y(0,e$d,"gradientW",function(){return this._gradientW}),e$Y(0,e$d,"gradientMin",function(){return this._gradientMin}),e$Y(0,e$d,"constantMin",function(){return this._constantMin}),e$Y(0,e$d,"gradientMax",function(){return this._gradientMax}),e$Y(0,e$d,"constantMax",function(){return this._constantMax}),e$Y(0,e$d,"gradientWMin",function(){return this._gradientWMin}),e$Y(0,e$d,"constantMinSeparate",function(){return this._constantMinSeparate}),e$Y(0,e$d,"constantMaxSeparate",function(){return this._constantMaxSeparate}),e$Y(0,e$d,"gradientXMin",function(){return this._gradientXMin}),e$Y(0,e$d,"gradientXMax",function(){return this._gradientXMax}),e$Y(0,e$d,"gradientWMax",function(){return this._gradientWMax}),e$Y(0,e$d,"gradientYMin",function(){return this._gradientYMin}),e$Y(0,e$d,"gradientYMax",function(){return this._gradientYMax}),e$Y(0,e$d,"gradientZMin",function(){return this._gradientZMin}),e$Y(0,e$d,"gradientZMax",function(){return this._gradientZMax}),e$I.createByConstant=function(e$d){var e$t=new e$I;return e$t._type=0,e$t._separateAxes=!1,e$t._constant=e$d,e$t},e$I.createByConstantSeparate=function(e$d){var e$t=new e$I;return e$t._type=0,e$t._separateAxes=!0,e$t._constantSeparate=e$d,e$t},e$I.createByGradient=function(e$d){var e$t=new e$I;return e$t._type=1,e$t._separateAxes=!1,e$t._gradient=e$d,e$t},e$I.createByGradientSeparate=function(e$d,e$t,e$l,e$k){var e$W=new e$I;return e$W._type=1,e$W._separateAxes=!0,e$W._gradientX=e$d,e$W._gradientY=e$t,e$W._gradientZ=e$l,e$W._gradientW=e$k,e$W},e$I.createByRandomTwoConstant=function(e$d,e$t){var e$l=new e$I;return e$l._type=2,e$l._separateAxes=!1,e$l._constantMin=e$d,e$l._constantMax=e$t,e$l},e$I.createByRandomTwoConstantSeparate=function(e$d,e$t){var e$l=new e$I;return e$l._type=2,e$l._separateAxes=!0,e$l._constantMinSeparate=e$d,e$l._constantMaxSeparate=e$t,e$l},e$I.createByRandomTwoGradient=function(e$d,e$t){var e$l=new e$I;return e$l._type=3,e$l._separateAxes=!1,e$l._gradientMin=e$d,e$l._gradientMax=e$t,e$l},e$I.createByRandomTwoGradientSeparate=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){var e$o=new e$I;return e$o._type=3,e$o._separateAxes=!0,e$o._gradientXMin=e$d,e$o._gradientXMax=e$t,e$o._gradientYMin=e$l,e$o._gradientYMax=e$k,e$o._gradientZMin=e$W,e$o._gradientZMax=e$i,e$o._gradientWMin=e$A,e$o._gradientWMax=e$B,e$o},e$I}(),e$n=function(){function e$k(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}e$c(e$k,"laya.d3.core.particleShuriKen.module.GradientColor");var e$d=e$k.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.cloneTo=function(e$d){var e$t=e$d;e$t._type=this._type,this._constant.cloneTo(e$t._constant),this._constantMin.cloneTo(e$t._constantMin),this._constantMax.cloneTo(e$t._constantMax),this._gradient.cloneTo(e$t._gradient),this._gradientMin.cloneTo(e$t._gradientMin),this._gradientMax.cloneTo(e$t._gradientMax)},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$d,"gradient",function(){return this._gradient}),e$Y(0,e$d,"constant",function(){return this._constant}),e$Y(0,e$d,"type",function(){return this._type}),e$Y(0,e$d,"gradientMin",function(){return this._gradientMin}),e$Y(0,e$d,"constantMin",function(){return this._constantMin}),e$Y(0,e$d,"gradientMax",function(){return this._gradientMax}),e$Y(0,e$d,"constantMax",function(){return this._constantMax}),e$k.createByConstant=function(e$d){var e$t=new e$k;return e$t._type=0,e$t._constant=e$d,e$t},e$k.createByGradient=function(e$d){var e$t=new e$k;return e$t._type=1,e$t._gradient=e$d,e$t},e$k.createByRandomTwoConstant=function(e$d,e$t){var e$l=new e$k;return e$l._type=2,e$l._constantMin=e$d,e$l._constantMax=e$t,e$l},e$k.createByRandomTwoGradient=function(e$d,e$t){var e$l=new e$k;return e$l._type=3,e$l._gradientMin=e$d,e$l._gradientMax=e$t,e$l},e$k}(),e$Q=(function(){function e$d(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}e$c(e$d,"laya.d3.core.particleShuriKen.module.GradientDataColor");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.addAlpha=function(e$d,e$t){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==e$d&&(e$d=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=e$d,this._alphaElements[this._alphaCurrentLength++]=e$t):DEBUG},e$t.addRGB=function(e$d,e$t){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==e$d&&(e$d=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=e$d,this._rgbElements[this._rgbCurrentLength++]=e$t.x,this._rgbElements[this._rgbCurrentLength++]=e$t.y,this._rgbElements[this._rgbCurrentLength++]=e$t.z):DEBUG},e$t.cloneTo=function(e$d){var e$t=e$d,e$l=0,e$k=0;e$t._alphaCurrentLength=this._alphaCurrentLength;var e$W=e$t._alphaElements;for(e$W.length=this._alphaElements.length,e$l=0,e$k=this._alphaElements.length;e$l<e$k;e$l++)e$W[e$l]=this._alphaElements[e$l];e$t._rgbCurrentLength=this._rgbCurrentLength;var e$i=e$t._rgbElements;for(e$i.length=this._rgbElements.length,e$l=0,e$k=this._rgbElements.length;e$l<e$k;e$l++)e$i[e$l]=this._rgbElements[e$l]},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),e$Y(0,e$t,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function e$d(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}e$c(e$d,"laya.d3.core.particleShuriKen.module.GradientDataInt");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.add=function(e$d,e$t){this._currentLength<8?(6===this._currentLength&&1!==e$d&&(e$d=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e$d,this._elements[this._currentLength++]=e$t):console.log("Warning:data count must lessEqual than 4")},e$t.cloneTo=function(e$d){var e$t=e$d;e$t._currentLength=this._currentLength;var e$l=e$t._elements;e$l.length=this._elements.length;for(var e$k=0,e$W=this._elements.length;e$k<e$W;e$k++)e$l[e$k]=this._elements[e$k]},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"gradientCount",function(){return this._currentLength/2})}(),function(){function e$d(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}e$c(e$d,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.add=function(e$d,e$t){this._currentLength<8?(6===this._currentLength&&1!==e$d&&(e$d=1,DEBUG),this._elements[this._currentLength++]=e$d,this._elements[this._currentLength++]=e$t):DEBUG},e$t.getKeyByIndex=function(e$d){return this._elements[2*e$d]},e$t.getValueByIndex=function(e$d){return this._elements[2*e$d+1]},e$t.getAverageValue=function(){for(var e$d=0,e$t=this._currentLength-2;e$d<e$t;e$d+=2){this._elements[e$d+1];this._elements[e$d+3],this._elements[e$d+2]-this._elements[e$d]}return 0},e$t.cloneTo=function(e$d){var e$t=e$d;e$t._currentLength=this._currentLength;var e$l=e$t._elements;e$l.length=this._elements.length;for(var e$k=0,e$W=this._elements.length;e$k<e$W;e$k++)e$l[e$k]=this._elements[e$k]},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"gradientCount",function(){return this._currentLength/2})}(),function(){function e$d(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}e$c(e$d,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.add=function(e$d,e$t){this._currentLength<8?(6===this._currentLength&&1!==e$d&&(e$d=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=e$d,this._elements[this._currentLength++]=e$t.x,this._elements[this._currentLength++]=e$t.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},e$t.cloneTo=function(e$d){var e$t=e$d;e$t._currentLength=this._currentLength;var e$l=e$t._elements;e$l.length=this._elements.length;for(var e$k=0,e$W=this._elements.length;e$k<e$W;e$k++)e$l[e$k]=this._elements[e$k]},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"gradientCount",function(){return this._currentLength/3})}(),function(){function e$B(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}e$c(e$B,"laya.d3.core.particleShuriKen.module.GradientSize");var e$d=e$B.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.getMaxSizeInGradient=function(){var e$d=0,e$t=0,e$l=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(e$d=0,e$t=this._gradientX.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientX.getValueByIndex(e$d));for(e$d=0,e$t=this._gradientY.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientY.getValueByIndex(e$d))}else for(e$d=0,e$t=this._gradient.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradient.getValueByIndex(e$d));break;case 1:e$l=this._separateAxes?(e$l=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),e$l=Math.max(e$l,this._constantMinSeparate.y),Math.max(e$l,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(e$d=0,e$t=this._gradientXMin.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientXMin.getValueByIndex(e$d));for(e$d=0,e$t=this._gradientXMax.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientXMax.getValueByIndex(e$d));for(e$d=0,e$t=this._gradientYMin.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientYMin.getValueByIndex(e$d));for(e$d=0,e$t=this._gradientZMax.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientZMax.getValueByIndex(e$d))}else{for(e$d=0,e$t=this._gradientMin.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientMin.getValueByIndex(e$d));for(e$d=0,e$t=this._gradientMax.gradientCount;e$d<e$t;e$d++)e$l=Math.max(e$l,this._gradientMax.getValueByIndex(e$d))}}return e$l},e$d.cloneTo=function(e$d){var e$t=e$d;e$t._type=this._type,e$t._separateAxes=this._separateAxes,this._gradient.cloneTo(e$t._gradient),this._gradientX.cloneTo(e$t._gradientX),this._gradientY.cloneTo(e$t._gradientY),this._gradientZ.cloneTo(e$t._gradientZ),e$t._constantMin=this._constantMin,e$t._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(e$t._constantMinSeparate),this._constantMaxSeparate.cloneTo(e$t._constantMaxSeparate),this._gradientMin.cloneTo(e$t._gradientMin),this._gradientMax.cloneTo(e$t._gradientMax),this._gradientXMin.cloneTo(e$t._gradientXMin),this._gradientXMax.cloneTo(e$t._gradientXMax),this._gradientYMin.cloneTo(e$t._gradientYMin),this._gradientYMax.cloneTo(e$t._gradientYMax),this._gradientZMin.cloneTo(e$t._gradientZMin),this._gradientZMax.cloneTo(e$t._gradientZMax)},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$d,"gradientZ",function(){return this._gradientZ}),e$Y(0,e$d,"gradient",function(){return this._gradient}),e$Y(0,e$d,"separateAxes",function(){return this._separateAxes}),e$Y(0,e$d,"type",function(){return this._type}),e$Y(0,e$d,"gradientMin",function(){return this._gradientMin}),e$Y(0,e$d,"constantMin",function(){return this._constantMin}),e$Y(0,e$d,"gradientX",function(){return this._gradientX}),e$Y(0,e$d,"gradientY",function(){return this._gradientY}),e$Y(0,e$d,"gradientMax",function(){return this._gradientMax}),e$Y(0,e$d,"constantMax",function(){return this._constantMax}),e$Y(0,e$d,"constantMinSeparate",function(){return this._constantMinSeparate}),e$Y(0,e$d,"constantMaxSeparate",function(){return this._constantMaxSeparate}),e$Y(0,e$d,"gradientXMin",function(){return this._gradientXMin}),e$Y(0,e$d,"gradientXMax",function(){return this._gradientXMax}),e$Y(0,e$d,"gradientYMin",function(){return this._gradientYMin}),e$Y(0,e$d,"gradientYMax",function(){return this._gradientYMax}),e$Y(0,e$d,"gradientZMin",function(){return this._gradientZMin}),e$Y(0,e$d,"gradientZMax",function(){return this._gradientZMax}),e$B.createByGradient=function(e$d){var e$t=new e$B;return e$t._type=0,e$t._separateAxes=!1,e$t._gradient=e$d,e$t},e$B.createByGradientSeparate=function(e$d,e$t,e$l){var e$k=new e$B;return e$k._type=0,e$k._separateAxes=!0,e$k._gradientX=e$d,e$k._gradientY=e$t,e$k._gradientZ=e$l,e$k},e$B.createByRandomTwoConstant=function(e$d,e$t){var e$l=new e$B;return e$l._type=1,e$l._separateAxes=!1,e$l._constantMin=e$d,e$l._constantMax=e$t,e$l},e$B.createByRandomTwoConstantSeparate=function(e$d,e$t){var e$l=new e$B;return e$l._type=1,e$l._separateAxes=!0,e$l._constantMinSeparate=e$d,e$l._constantMaxSeparate=e$t,e$l},e$B.createByRandomTwoGradient=function(e$d,e$t){var e$l=new e$B;return e$l._type=2,e$l._separateAxes=!1,e$l._gradientMin=e$d,e$l._gradientMax=e$t,e$l},e$B.createByRandomTwoGradientSeparate=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=new e$B;return e$A._type=2,e$A._separateAxes=!0,e$A._gradientXMin=e$d,e$A._gradientXMax=e$t,e$A._gradientYMin=e$l,e$A._gradientYMax=e$k,e$A._gradientZMin=e$W,e$A._gradientZMax=e$i,e$A},e$B}()),e$y=function(){function e$B(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}e$c(e$B,"laya.d3.core.particleShuriKen.module.GradientVelocity");var e$d=e$B.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.cloneTo=function(e$d){var e$t=e$d;e$t._type=this._type,this._constant.cloneTo(e$t._constant),this._gradientX.cloneTo(e$t._gradientX),this._gradientY.cloneTo(e$t._gradientY),this._gradientZ.cloneTo(e$t._gradientZ),this._constantMin.cloneTo(e$t._constantMin),this._constantMax.cloneTo(e$t._constantMax),this._gradientXMin.cloneTo(e$t._gradientXMin),this._gradientXMax.cloneTo(e$t._gradientXMax),this._gradientYMin.cloneTo(e$t._gradientYMin),this._gradientYMax.cloneTo(e$t._gradientYMax),this._gradientZMin.cloneTo(e$t._gradientZMin),this._gradientZMax.cloneTo(e$t._gradientZMax)},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$d,"gradientZ",function(){return this._gradientZ}),e$Y(0,e$d,"constant",function(){return this._constant}),e$Y(0,e$d,"type",function(){return this._type}),e$Y(0,e$d,"gradientXMax",function(){return this._gradientXMax}),e$Y(0,e$d,"constantMin",function(){return this._constantMin}),e$Y(0,e$d,"gradientX",function(){return this._gradientX}),e$Y(0,e$d,"gradientY",function(){return this._gradientY}),e$Y(0,e$d,"gradientXMin",function(){return this._gradientXMin}),e$Y(0,e$d,"constantMax",function(){return this._constantMax}),e$Y(0,e$d,"gradientYMin",function(){return this._gradientYMin}),e$Y(0,e$d,"gradientYMax",function(){return this._gradientYMax}),e$Y(0,e$d,"gradientZMin",function(){return this._gradientZMin}),e$Y(0,e$d,"gradientZMax",function(){return this._gradientZMax}),e$B.createByConstant=function(e$d){var e$t=new e$B;return e$t._type=0,e$t._constant=e$d,e$t},e$B.createByGradient=function(e$d,e$t,e$l){var e$k=new e$B;return e$k._type=1,e$k._gradientX=e$d,e$k._gradientY=e$t,e$k._gradientZ=e$l,e$k},e$B.createByRandomTwoConstant=function(e$d,e$t){var e$l=new e$B;return e$l._type=2,e$l._constantMin=e$d,e$l._constantMax=e$t,e$l},e$B.createByRandomTwoGradient=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=new e$B;return e$A._type=3,e$A._gradientXMin=e$d,e$A._gradientXMax=e$t,e$A._gradientYMin=e$l,e$A._gradientYMax=e$k,e$A._gradientZMin=e$W,e$A._gradientZMax=e$i,e$A},e$B}(),e$V=(function(){function e$d(e$d){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=e$d}e$c(e$d,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.cloneTo=function(e$d){var e$t=e$d;this._angularVelocity.cloneTo(e$t._angularVelocity),e$t.enbale=this.enbale},e$t.clone=function(){var e$d;switch(this._angularVelocity.type){case 0:e$d=this._angularVelocity.separateAxes?e$x.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):e$x.createByConstant(this._angularVelocity.constant);break;case 1:e$d=this._angularVelocity.separateAxes?e$x.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):e$x.createByGradient(this._angularVelocity.gradient.clone());break;case 2:e$d=this._angularVelocity.separateAxes?e$x.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):e$x.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:e$d=this._angularVelocity.separateAxes?e$x.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):e$x.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var e$t=new this.constructor(e$d);return e$t.enbale=this.enbale,e$t},e$Y(0,e$t,"angularVelocity",function(){return this._angularVelocity})}(),function(){function e$d(){this.enable=!1,this.randomDirection=!1}e$c(e$d,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t._getShapeBoundBox=function(e$d){throw new Error("BaseShape: must override it.")},e$t._getSpeedBoundBox=function(e$d){throw new Error("BaseShape: must override it.")},e$t.generatePositionAndDirection=function(e$d,e$t,e$l,e$k){throw new Error("BaseShape: must override it.")},e$t._calculateProceduralBounds=function(e$d,e$t,e$l){this._getShapeBoundBox(e$d);var e$k=e$d.min,e$W=e$d.max;e$At.multiply(e$k,e$t,e$k),e$At.multiply(e$W,e$t,e$W);var e$i=new e$Od(new e$At,new e$At);this.randomDirection?(e$i.min=new e$At(-1,-1,-1),e$i.max=new e$At(1,1,1)):this._getSpeedBoundBox(e$i);var e$A=new e$Od(new e$At,new e$At),e$B=e$A.min,e$o=e$A.max;e$At.scale(e$i.min,e$l.y,e$B),e$At.scale(e$i.max,e$l.y,e$o),e$At.add(e$d.min,e$B,e$B),e$At.add(e$d.max,e$o,e$o),e$At.min(e$d.min,e$B,e$d.min),e$At.max(e$d.max,e$B,e$d.max);var e$I=new e$Od(new e$At,new e$At),e$b=e$I.min,e$f=e$I.max;e$At.scale(e$i.min,e$l.x,e$b),e$At.scale(e$i.max,e$l.x,e$f),e$At.min(e$I.min,e$f,e$B),e$At.max(e$I.min,e$f,e$o),e$At.min(e$d.min,e$B,e$d.min),e$At.max(e$d.max,e$B,e$d.max)},e$t.cloneTo=function(e$d){e$d.enable=this.enable},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$d}()),e$u=function(){function e$i(){}return e$c(e$i,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),e$i._randomPointUnitArcCircle=function(e$d,e$t,e$l){var e$k=e$t.elements,e$W=NaN;e$W=e$l?e$l.getFloat()*e$d:Math.random()*e$d,e$k[0]=Math.cos(e$W),e$k[1]=Math.sin(e$W)},e$i._randomPointInsideUnitArcCircle=function(e$d,e$t,e$l){var e$k=e$t.elements;e$i._randomPointUnitArcCircle(e$d,e$t,e$l);var e$W=NaN;e$W=e$l?Math.pow(e$l.getFloat(),.5):Math.pow(Math.random(),.5),e$k[0]=e$k[0]*e$W,e$k[1]=e$k[1]*e$W},e$i._randomPointUnitCircle=function(e$d,e$t){var e$l=e$d.elements,e$k=NaN;e$k=e$t?e$t.getFloat()*Math.PI*2:Math.random()*Math.PI*2,e$l[0]=Math.cos(e$k),e$l[1]=Math.sin(e$k)},e$i._randomPointInsideUnitCircle=function(e$d,e$t){var e$l=e$d.elements;e$i._randomPointUnitCircle(e$d);var e$k=NaN;e$k=e$t?Math.pow(e$t.getFloat(),.5):Math.pow(Math.random(),.5),e$l[0]=e$l[0]*e$k,e$l[1]=e$l[1]*e$k},e$i._randomPointUnitSphere=function(e$d,e$t){var e$l=e$d.elements,e$k=NaN,e$W=NaN;e$W=e$t?(e$k=e$l[2]=2*e$t.getFloat()-1,e$t.getFloat()*Math.PI*2):(e$k=e$l[2]=2*Math.random()-1,Math.random()*Math.PI*2);var e$i=Math.sqrt(1-e$k*e$k);e$l[0]=e$i*Math.cos(e$W),e$l[1]=e$i*Math.sin(e$W)},e$i._randomPointInsideUnitSphere=function(e$d,e$t){var e$l=e$d.elements;e$i._randomPointUnitSphere(e$d);var e$k=NaN;e$k=e$t?Math.pow(e$t.getFloat(),1/3):Math.pow(Math.random(),1/3),e$l[0]=e$l[0]*e$k,e$l[1]=e$l[1]*e$k,e$l[2]=e$l[2]*e$k},e$i._randomPointInsideHalfUnitBox=function(e$d,e$t){var e$l=e$d.elements;e$t?(e$l[0]=e$t.getFloat()-.5,e$l[1]=e$t.getFloat()-.5,e$l[2]=e$t.getFloat()-.5):(e$l[0]=Math.random()-.5,e$l[1]=Math.random()-.5,e$l[2]=Math.random()-.5)},e$i}(),e$h=(function(){function e$d(e$d){this._size=null,this.enbale=!1,this._size=e$d}e$c(e$d,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.cloneTo=function(e$d){var e$t=e$d;this._size.cloneTo(e$t._size),e$t.enbale=this.enbale},e$t.clone=function(){var e$d;switch(this._size.type){case 0:e$d=this._size.separateAxes?e$Q.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):e$Q.createByGradient(this._size.gradient.clone());break;case 1:e$d=this._size.separateAxes?e$Q.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):e$Q.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:e$d=this._size.separateAxes?e$Q.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):e$Q.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var e$t=new this.constructor(e$d);return e$t.enbale=this.enbale,e$t},e$Y(0,e$t,"size",function(){return this._size})}(),function(){function e$k(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}e$c(e$k,"laya.d3.core.particleShuriKen.module.StartFrame");var e$d=e$k.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.cloneTo=function(e$d){var e$t=e$d;e$t._type=this._type,e$t._constant=this._constant,e$t._constantMin=this._constantMin,e$t._constantMax=this._constantMax},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$d,"constant",function(){return this._constant}),e$Y(0,e$d,"type",function(){return this._type}),e$Y(0,e$d,"constantMin",function(){return this._constantMin}),e$Y(0,e$d,"constantMax",function(){return this._constantMax}),e$k.createByConstant=function(e$d){var e$t=new e$k;return e$t._type=0,e$t._constant=e$d,e$t},e$k.createByRandomTwoConstant=function(e$d,e$t){var e$l=new e$k;return e$l._type=1,e$l._constantMin=e$d,e$l._constantMax=e$t,e$l},e$k}()),e$s=(function(){function e$d(e$d,e$t){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new e$it(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=e$d,this._startFrame=e$t}e$c(e$d,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.cloneTo=function(e$d){var e$t=e$d;this.tiles.cloneTo(e$t.tiles),e$t.type=this.type,e$t.randomRow=this.randomRow,this._frame.cloneTo(e$t._frame),this._startFrame.cloneTo(e$t._startFrame),e$t.cycles=this.cycles,e$t.enableUVChannels=this.enableUVChannels,e$t.enable=this.enable},e$t.clone=function(){var e$d,e$t;switch(this._frame.type){case 0:e$d=e$K.createByConstant(this._frame.constant);break;case 1:e$d=e$K.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:e$d=e$K.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:e$d=e$K.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:e$t=e$h.createByConstant(this._startFrame.constant);break;case 1:e$t=e$h.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var e$l=new this.constructor(e$d,e$t);return this.tiles.cloneTo(e$l.tiles),e$l.type=this.type,e$l.randomRow=this.randomRow,e$l.cycles=this.cycles,e$l.enableUVChannels=this.enableUVChannels,e$l.enable=this.enable,e$l},e$Y(0,e$t,"frame",function(){return this._frame}),e$Y(0,e$t,"startFrame",function(){return this._startFrame})}(),function(){function e$d(e$d){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=e$d}e$c(e$d,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.cloneTo=function(e$d){var e$t=e$d;this._velocity.cloneTo(e$t._velocity),e$t.enbale=this.enbale,e$t.space=this.space},e$t.clone=function(){var e$d;switch(this._velocity.type){case 0:e$d=e$y.createByConstant(this._velocity.constant.clone());break;case 1:e$d=e$y.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:e$d=e$y.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:e$d=e$y.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var e$t=new this.constructor(e$d);return e$t.enbale=this.enbale,e$t.space=this.space,e$t},e$Y(0,e$t,"velocity",function(){return this._velocity})}(),function(){function e$d(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new e$Jt,this._vb=e$Vt.create(e$d._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=e$yt.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=e$nt.nameKey.getID("LINE"),this._shaderCompile=e$Lt._preCompileShader[this._sharderNameID]}e$c(e$d,"laya.d3.core.PhasorSpriter3D");var e$t=e$d.prototype;return e$t.line=function(e$d,e$t,e$l,e$k){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$d.x,e$d.y,e$d.z,e$t.x,e$t.y,e$t.z,e$t.w),this.addVertex(e$l.x,e$l.y,e$l.z,e$k.x,e$k.y,e$k.z,e$k.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},e$t.circle=function(e$d,e$t,e$l,e$k,e$W,e$i){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*e$t,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/e$t,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*e$d,Math.cos(this._tempNumver0)*e$d,0,e$l,e$k,e$W,e$i),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},e$t.plane=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=e$k/2,this._tempNumver1=e$W/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$d-this._tempNumver0,e$t+this._tempNumver1,e$l,e$i,e$A,e$B,e$o),this.addVertex(e$d+this._tempNumver0,e$t+this._tempNumver1,e$l,e$i,e$A,e$B,e$o),this.addVertex(e$d-this._tempNumver0,e$t-this._tempNumver1,e$l,e$i,e$A,e$B,e$o),this.addVertex(e$d+this._tempNumver0,e$t-this._tempNumver1,e$l,e$i,e$A,e$B,e$o),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},e$t.box=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=e$k/2,this._tempNumver1=e$W/2,this._tempNumver2=e$i/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$d-this._tempNumver0,e$t+this._tempNumver1,e$l+this._tempNumver2,e$A,e$B,e$o,e$I),this.addVertex(e$d+this._tempNumver0,e$t+this._tempNumver1,e$l+this._tempNumver2,e$A,e$B,e$o,e$I),this.addVertex(e$d-this._tempNumver0,e$t-this._tempNumver1,e$l+this._tempNumver2,e$A,e$B,e$o,e$I),this.addVertex(e$d+this._tempNumver0,e$t-this._tempNumver1,e$l+this._tempNumver2,e$A,e$B,e$o,e$I),this.addVertex(e$d+this._tempNumver0,e$t+this._tempNumver1,e$l-this._tempNumver2,e$A,e$B,e$o,e$I),this.addVertex(e$d-this._tempNumver0,e$t+this._tempNumver1,e$l-this._tempNumver2,e$A,e$B,e$o,e$I),this.addVertex(e$d+this._tempNumver0,e$t-this._tempNumver1,e$l-this._tempNumver2,e$A,e$B,e$o,e$I),this.addVertex(e$d-this._tempNumver0,e$t-this._tempNumver1,e$l-this._tempNumver2,e$A,e$B,e$o,e$I),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},e$t.cone=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*e$l+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*e$l>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/e$l,this.addVertexIndex(0,e$t,0,e$k,e$W,e$i,e$A,this._tempUint0),this.addVertexIndex(0,0,0,e$k,e$W,e$i,e$A,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<e$l;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(e$d*this._tempNumver2,0,e$d*this._tempNumver3,e$k,e$W,e$i,e$A,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==e$l-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(e$d*this._tempNumver2,0,e$d*this._tempNumver3,e$k,e$W,e$i,e$A,this._tempUint0+(this._tempInt0+e$l)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==e$l-1?this.addIndexes(this._tempUint1+e$l+2):this.addIndexes(this._tempUint1+this._tempInt0+e$l+1),this.addIndexes(this._tempUint1+this._tempInt0+e$l),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},e$t.boundingBoxLine=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(e$d,e$W,e$i,e$A,e$B,e$o,e$I),this.addVertex(e$k,e$W,e$i,e$A,e$B,e$o,e$I),this.addVertex(e$d,e$t,e$i,e$A,e$B,e$o,e$I),this.addVertex(e$k,e$t,e$i,e$A,e$B,e$o,e$I),this.addVertex(e$k,e$W,e$l,e$A,e$B,e$o,e$I),this.addVertex(e$d,e$W,e$l,e$A,e$B,e$o,e$I),this.addVertex(e$k,e$t,e$l,e$A,e$B,e$o,e$I),this.addVertex(e$d,e$t,e$l,e$A,e$B,e$o,e$I),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},e$t.addVertex=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=e$d,this._vbData[this._posInVBData+1]=e$t,this._vbData[this._posInVBData+2]=e$l,this._vbData[this._posInVBData+3]=e$k,this._vbData[this._posInVBData+4]=e$W,this._vbData[this._posInVBData+5]=e$i,this._vbData[this._posInVBData+6]=e$A,this._posInVBData+=this._floatSizePerVer,this},e$t.addVertexIndex=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){return this._hasBegun||this.addVertexIndexException(),this._vbData[e$B]=e$d,this._vbData[e$B+1]=e$t,this._vbData[e$B+2]=e$l,this._vbData[e$B+3]=e$k,this._vbData[e$B+4]=e$W,this._vbData[e$B+5]=e$i,this._vbData[e$B+6]=e$A,(e$B+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=e$B),this},e$t.addIndexes=function(e$d){var e$t=arguments;this._hasBegun||this.addVertexIndexException();for(var e$l=0;e$l<e$t.length;e$l++)this._ibData[this._posInIBData]=e$t[e$l],this._posInIBData++;return this},e$t.begin=function(e$d,e$t){return this._hasBegun&&this.beginException0(),1!==e$d&&4!==e$d&&this.beginException1(),this._primitiveType=e$d,this._camera=e$t,this._hasBegun=!0,this},e$t.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},e$t.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(e$d._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),e$L.drawCall++,e$r.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},e$t.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},e$t.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},e$t.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},e$t.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},e$t.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},e$t.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(28,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector4",1)])}]),e$d}()),e$P=function(){function e$d(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++e$d._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new e$Jt}e$c(e$d,"laya.d3.core.render.RenderElement");var e$t=e$d.prototype;return e$t.getDynamicBatchBakedVertexs=function(e$d){for(var e$t=this._renderObj._getVertexBuffer(e$d),e$l=e$t.getData().slice(),e$k=e$t.vertexDeclaration,e$W=e$k.getVertexElementByUsage(0).offset/4,e$i=e$k.getVertexElementByUsage(3).offset/4,e$A=this._sprite3D.transform,e$B=e$A.worldMatrix,e$o=e$A.rotation,e$I=e$k.vertexStride/4,e$b=0,e$f=e$l.length;e$b<e$f;e$b+=e$I){var e$J=e$b+e$W,e$c=e$b+e$i;e$Dt.transformVector3ArrayToVector3ArrayCoordinate(e$l,e$J,e$B,e$l,e$J),e$Dt.transformVector3ArrayByQuat(e$l,e$c,e$o,e$l,e$c)}return e$l},e$t.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},e$t._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},e$Y(0,e$t,"id",function(){return this._id}),e$Y(0,e$t,"renderObj",function(){return this._renderObj},function(e$d){this._renderObj!==e$d&&(this._renderObj=e$d)}),e$d._uniqueIDCounter=0,e$d}(),e$X=function(){function e$t(e$d){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++e$t._uniqueIDCounter,this._needSort=!1,this._scene=e$d,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}e$c(e$t,"laya.d3.core.render.RenderQueue");var e$d=e$t.prototype;return e$d._sortOpaqueFunc=function(e$d,e$t){if(e$d._render&&e$t._render){var e$l=e$d._material.renderQueue-e$t._material.renderQueue;return 0==e$l?e$d._render._distanceForSort-e$t._render._distanceForSort:e$l}return 0},e$d._sortAlphaFunc=function(e$d,e$t){if(e$d._render&&e$t._render){var e$l=e$d._material.renderQueue-e$t._material.renderQueue;return 0==e$l?e$t._render._distanceForSort-e$d._render._distanceForSort:e$l}return 0},e$d._begainRenderElement=function(e$d,e$t,e$l){return!!e$t._beforeRender(e$d)},e$d._sortAlpha=function(e$d){e$t._cameraPosition=e$d,this._finalElements.sort(this._sortAlphaFunc)},e$d._sortOpaque=function(e$d){e$t._cameraPosition=e$d,this._finalElements.sort(this._sortOpaqueFunc)},e$d._preRender=function(e$d){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},e$d._render=function(e$d,e$t){for(var e$l,e$k,e$W,e$i,e$A,e$B,e$o=e$L.loopCount,e$I=this._scene,e$b=e$d.camera,e$f=(e$b.id,!1),e$J=0,e$c=this._finalElements.length;e$J<e$c;e$J++){var e$Y,e$w,e$D,e$z=this._finalElements[e$J];if(null!=e$z._onPreRenderFunction&&e$z._onPreRenderFunction.call(e$z._sprite3D,e$d),0===e$z._type){if(e$d.owner=e$D=e$z._sprite3D,e$d.renderElement=e$z,e$D._preRenderUpdateComponents(e$d),e$Y=e$z.renderObj,e$w=e$z._material,this._begainRenderElement(e$d,e$Y,e$w)){if(e$l=e$Y._getVertexBuffers(),!(e$W=(e$k=e$Y._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[e$k.id]){this._errorRecord[e$k.id]=1;var e$e="vertexBuffer:"+("("+e$k._destroyed+","+e$k._released+","+e$k._referenceCount+","+e$k._buffer+")")+", material:"+(e$w?e$w.__className+"("+e$w._destroyed+","+e$w._released+")":"null")+", owner:"+(e$D?e$D.__className+"("+e$D._destroyed+","+e$D._activeInHierarchy+","+e$D._displayedInStage+")":"null")+", renderObj:"+(e$Y?e$Y.__className+"("+e$Y._destroyed+","+e$Y._released+","+e$Y._referenceCount+")":"")+", parent:, url:"+(e$D?e$D.url:"")+", disposeStack:"+e$k.disposeStack;e$R.recordError("报错：unknown vertexDeclaration  "+e$e)}continue}if(e$f=(e$i=e$d._shader=e$w._getShader(e$I._shaderDefineValue,e$W.shaderDefineValue,e$D._shaderDefineValue)).bind()||e$o!==e$i._uploadLoopCount,e$l){if(e$i._uploadVertexBuffer!==e$l||e$f){for(var e$g=0;e$g<e$l.length;e$g++){var e$H=e$l[e$g];e$i.uploadAttributesX(e$H.vertexDeclaration.shaderValues.data,e$H)}e$i._uploadVertexBuffer=e$l}}else(e$i._uploadVertexBuffer!==e$k||e$f)&&(e$i.uploadAttributes(e$W.shaderValues.data,null),e$i._uploadVertexBuffer=e$k);(e$i._uploadScene!==e$I||e$f)&&(e$i.uploadSceneUniforms(e$I._shaderValues.data),e$i._uploadScene=e$I),(e$b!==e$i._uploadCamera||e$i._uploadSprite3D!==e$D||e$f)&&(e$i.uploadSpriteUniforms(e$D._shaderValues.data),e$i._uploadSprite3D=e$D),(e$b!==e$i._uploadCamera||e$f)&&(e$i.uploadCameraUniforms(e$b._shaderValues.data),e$i._uploadCamera=e$b),(e$i._uploadMaterial!==e$w||e$f)&&(e$w._upload(),e$i._uploadMaterial=e$w),e$A!==e$w?(e$w._setRenderStateBlendDepth(),e$w._setRenderStateFrontFace(e$t,e$D.transform),e$A=e$w,e$B=e$D):e$B!==e$D&&(e$w._setRenderStateFrontFace(e$t,e$D.transform),e$B=e$D),e$Y._render(e$d),e$i._uploadLoopCount=e$o}e$D._postRenderUpdateComponents(e$d)}else if(2===e$z._type){e$z.renderObj;e$d.owner=e$D=e$z._sprite3D,e$d.renderElement=e$z,e$d._batchIndexStart=e$z._tempBatchIndexStart,e$d._batchIndexEnd=e$z._tempBatchIndexEnd,e$Y=e$z.renderObj,e$w=e$z._material,this._begainRenderElement(e$d,e$Y,e$w)&&(e$W=(e$k=e$Y._getVertexBuffer(0)).vertexDeclaration,e$f=(e$i=e$d._shader=e$w._getShader(e$I._shaderDefineValue,e$W.shaderDefineValue,e$D._shaderDefineValue)).bind()||e$o!==e$i._uploadLoopCount,(e$i._uploadVertexBuffer!==e$k||e$f)&&(e$i.uploadAttributes(e$W.shaderValues.data,null),e$i._uploadVertexBuffer=e$k),(e$i._uploadScene!==e$I||e$f)&&(e$i.uploadSceneUniforms(e$I._shaderValues.data),e$i._uploadScene=e$I),(e$b!==e$i._uploadCamera||e$i._uploadSprite3D!==e$D||e$f)&&(e$i.uploadSpriteUniforms(e$D._shaderValues.data),e$i._uploadSprite3D=e$D),(e$b!==e$i._uploadCamera||e$f)&&(e$i.uploadCameraUniforms(e$b._shaderValues.data),e$i._uploadCamera=e$b),(e$i._uploadMaterial!==e$w||e$f)&&(e$w._upload(),e$i._uploadMaterial=e$w),e$A!==e$w?(e$w._setRenderStateBlendDepth(),e$w._setRenderStateFrontFace(e$t,e$D.transform),e$A=e$w,e$B=e$D):e$B!==e$D&&(e$w._setRenderStateFrontFace(e$t,e$D.transform),e$B=e$D),e$Y._render(e$d),e$i._uploadLoopCount=e$o)}}},e$d._renderShadow=function(e$d,e$t){for(var e$l,e$k,e$W,e$i,e$A,e$B=e$L.loopCount,e$o=this._scene,e$I=e$d.camera,e$b=!1,e$f=0,e$J=this._finalElements.length;e$f<e$J;e$f++){var e$c,e$Y,e$w,e$D=this._finalElements[e$f];0===e$D._type&&(e$d.owner=e$w=e$D._sprite3D,e$t||e$w._projectionViewWorldUpdateCamera===e$I&&e$w._projectionViewWorldUpdateLoopCount===e$L.loopCount||(e$w._render._renderUpdate(e$d._projectionViewMatrix),e$w._projectionViewWorldUpdateLoopCount=e$L.loopCount,e$w._projectionViewWorldUpdateCamera=e$I),e$d.renderElement=e$D,e$w._preRenderUpdateComponents(e$d),e$c=e$D.renderObj,e$Y=e$D._material,this._begainRenderElement(e$d,e$c,null)&&(e$k=(e$l=e$c._getVertexBuffer(0)).vertexDeclaration,e$b=(e$W=e$d._shader=e$Y._getShader(e$o._shaderDefineValue,e$k.shaderDefineValue,e$w._shaderDefineValue)).bind()||e$B!==e$W._uploadLoopCount,(e$W._uploadVertexBuffer!==e$l||e$b)&&(e$W.uploadAttributes(e$k.shaderValues.data,null),e$W._uploadVertexBuffer=e$l),(e$I!==e$W._uploadCamera||e$W._uploadSprite3D!==e$w||e$b)&&(e$W.uploadSpriteUniforms(e$w._shaderValues.data),e$W._uploadSprite3D=e$w),(e$I!==e$W._uploadCamera||e$b)&&(e$W.uploadCameraUniforms(e$I._shaderValues.data),e$W._uploadCamera=e$I),(e$W._uploadMaterial!==e$Y||e$b)&&(e$Y._upload(),e$W._uploadMaterial=e$Y),e$W._uploadRenderElement,e$i!==e$Y?(e$Y._setRenderStateFrontFace(!1,e$w.transform),e$i=e$Y,e$A=e$w):e$A!==e$w&&(e$Y._setRenderStateFrontFace(!1,e$w.transform),e$A=e$w),e$c._render(e$d),e$W._uploadLoopCount=e$B),e$w._postRenderUpdateComponents(e$d))}},e$d._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},e$d._addRenderElement=function(e$d){this._renderElements.push(e$d),this._needSort=!0},e$d._addDynamicBatchElement=function(e$d){this._dynamicBatchCombineRenderElements.push(e$d)},e$Y(0,e$d,"id",function(){return this._id}),e$t._uniqueIDCounter=0,e$t._cameraPosition=null,e$t}(),e$m=function(){function e$d(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return e$c(e$d,"laya.d3.core.render.RenderState"),e$d.clientWidth=0,e$d.clientHeight=0,e$d}(),e$O=function(){function e$A(e$d,e$t){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new e$ad(new e$At,0),this._corners=[new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At],this._boundingBoxCenter=new e$At,this._children=e$k(8),this._objects=[],this._tempBoundBoxCorners=[new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At],this._scene=e$d,this._currentDepth=e$t}e$c(e$A,"laya.d3.core.scene.OctreeNode");var e$d=e$A.prototype;return e$R.imps(e$d,{"laya.d3.core.scene.ITreeNode":!0}),e$d.init=function(e$d,e$t){var e$l=new e$At,e$k=new e$At;e$At.scale(e$t,-.5,e$l),e$At.scale(e$t,.5,e$k),e$At.add(e$l,e$d,e$l),e$At.add(e$k,e$d,e$k),this.exactBox=new e$Od(e$l,e$k),this.relaxBox=new e$Od(e$l,e$k)},e$d.addTreeNode=function(e$d){1===Collision.boxContainsBox(this._relaxBox,e$d.boundingBox)?this.addNodeDown(e$d,0):this.addObject(e$d)},e$d.addChild=function(e$d){var e$t=this._children[e$d];if(null==e$t){e$t=new e$A(this._scene,this._currentDepth+1),(this._children[e$d]=e$t)._parent=this,e$At.subtract(this._exactBox.max,this._exactBox.min,e$A.tempSize),e$At.multiply(e$A.tempSize,e$A._octreeSplit[e$d],e$A.tempCenter),e$At.add(this._exactBox.min,e$A.tempCenter,e$A.tempCenter),e$At.scale(e$A.tempSize,.25,e$A.tempSize);var e$l=new e$At,e$k=new e$At;e$At.subtract(e$A.tempCenter,e$A.tempSize,e$l),e$At.add(e$A.tempCenter,e$A.tempSize,e$k),e$t.exactBox=new e$Od(e$l,e$k),e$At.scale(e$A.tempSize,e$A.relax,e$A.tempSize);var e$W=new e$At,e$i=new e$At;e$At.subtract(e$A.tempCenter,e$A.tempSize,e$W),e$At.add(e$A.tempCenter,e$A.tempSize,e$i),e$t.relaxBox=new e$Od(e$W,e$i)}return e$t},e$d.addObject=function(e$d){(e$d._treeNode=this)._objects.push(e$d)},e$d.removeObject=function(e$d){if(e$d._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var e$t=this._objects.indexOf(e$d);return-1!==e$t&&(this._objects.splice(e$t,1),!0)},e$d.clearObject=function(){this._objects.length=0},e$d.addNodeUp=function(e$d,e$t){this._parent&&1!==Collision.boxContainsBox(this._exactBox,e$d.boundingBox)?this._parent.addNodeUp(e$d,e$t-1):this.addNodeDown(e$d,e$t)},e$d.addNodeDown=function(e$d,e$t){if(e$t<this._scene.treeLevel){var e$l=this.inChildIndex(e$d.boundingBoxCenter),e$k=this.addChild(e$l);1===Collision.boxContainsBox(e$k._relaxBox,e$d.boundingBox)?e$k.addNodeDown(e$d,++e$t):this.addObject(e$d)}else this.addObject(e$d)},e$d.inChildIndex=function(e$d){return 4*(e$d.z<this._boundingBoxCenter.z?0:1)+2*(e$d.y<this._boundingBoxCenter.y?0:1)+(e$d.x<this._boundingBoxCenter.x?0:1)},e$d.updateObject=function(e$d){1===Collision.boxContainsBox(this._relaxBox,e$d.boundingBox)?(this.removeObject(e$d),e$d._treeNode=null,this.addNodeDown(e$d,this._currentDepth)):this._parent&&(this.removeObject(e$d),e$d._treeNode=null,this._parent.addNodeUp(e$d,this._currentDepth-1))},e$d.cullingObjects=function(e$d,e$t,e$l,e$k,e$W){var e$i,e$A=0,e$B=0,e$o=0,e$I=this._scene._dynamicBatchManager;for(e$A=0,e$i=this._objects.length;e$A<e$i;e$A++){var e$b=this._objects[e$A];if(e$C.isVisible(e$b._owner.layer.mask)&&e$b.enable){if(e$t&&(e$L.treeSpriteCollision+=1,0===e$d.containsBoundSphere(e$b.boundingSphere)))continue;e$b._renderUpdate(e$W),e$b._distanceForSort=e$At.distance(e$b.boundingSphere.center,e$k)+e$b.sortingFudge;var e$f=e$b._renderElements;for(e$B=0,e$o=e$f.length;e$B<e$o;e$B++){var e$J=e$f[e$B],e$c=e$J._staticBatch;if(e$c&&e$c._material===e$J._material)e$c._addBatchRenderElement(e$J);else{var e$Y=e$J.renderObj;e$Y.triangleCount<10&&1===e$Y._vertexBufferCount&&e$Y._getIndexBuffer()&&e$J._material.renderQueue<2&&e$J._canDynamicBatch&&!e$b._owner.isStatic?e$I._addPrepareRenderElement(e$J):this._scene.getRenderQueue(e$J._material.renderQueue)._addRenderElement(e$J)}}}}for(e$A=0;e$A<8;e$A++){var e$w=this._children[e$A];if(null!=e$w){var e$D=e$t;if(e$t){var e$z=e$d.containsBoundBox(e$w._relaxBox);if(e$L.treeNodeCollision+=1,0===e$z)continue;e$D=2===e$z}e$w.cullingObjects(e$d,e$D,e$l,e$k,e$W)}}},e$d.cullingShadowObjects=function(e$d,e$t,e$l,e$k,e$W){var e$i,e$A=0,e$B=0,e$o=0;this._scene._dynamicBatchManager;for(e$A=0,e$i=this._objects.length;e$A<e$i;e$A++){var e$I=this._objects[e$A];if(e$I.castShadow&&e$C.isVisible(e$I._owner.layer.mask)&&e$I.enable){if(e$l&&0===e$d[0].containsBoundSphere(e$I.boundingSphere))continue;for(var e$b=1,e$f=e$d.length;e$b<e$f;e$b++){var e$J=e$t[e$b-1];if(0!==e$d[e$b].containsBoundSphere(e$I.boundingSphere)){var e$c=e$I._renderElements;for(e$B=0,e$o=e$c.length;e$B<e$o;e$B++)e$J._addRenderElement(e$c[e$B])}}}}for(e$A=0;e$A<8;e$A++){var e$Y=this._children[e$A];if(null!=e$Y){var e$w=e$l;if(e$l){var e$D=e$d[0].containsBoundBox(e$Y._relaxBox);if(0===e$D)continue;e$w=2===e$D}e$Y.cullingShadowObjects(e$d,e$t,e$w,e$k,e$W)}}},e$d.cullingShadowObjectsOnePSSM=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A,e$B=e$t[0],e$o=0,e$I=0,e$b=0;for(e$o=0,e$A=this._objects.length;e$o<e$A;e$o++){var e$f=this._objects[e$o];if(e$f.castShadow&&e$C.isVisible(e$f._owner.layer.mask)&&e$f.enable){if(e$k&&0===e$d.containsBoundSphere(e$f.boundingSphere))continue;e$f._renderUpdate(e$l);var e$J=e$f._renderElements;for(e$I=0,e$b=e$J.length;e$I<e$b;e$I++)e$B._addRenderElement(e$J[e$I])}}for(e$o=0;e$o<8;e$o++){var e$c=this._children[e$o];if(null!=e$c){var e$Y=e$k;if(e$k){var e$w=e$d.containsBoundBox(e$c._relaxBox);if(0===e$w)continue;e$Y=2===e$w}e$c.cullingShadowObjectsOnePSSM(e$d,e$t,e$l,e$Y,e$W,e$i)}}},e$d.renderBoudingBox=function(e$d){this._renderBoudingBox(e$d);for(var e$t=0;e$t<8;++e$t){var e$l=this._children[e$t];e$l&&e$l.renderBoudingBox(e$d)}},e$d.buildAllChild=function(e$d){if(e$d<this._scene.treeLevel)for(var e$t=0;e$t<8;e$t++){this.addChild(e$t).buildAllChild(e$d+1)}},e$d._renderBoudingBox=function(e$d){},e$Y(0,e$d,"exactBox",function(){return this._exactBox},function(e$d){this._exactBox=e$d,e$At.add(e$d.min,e$d.max,this._boundingBoxCenter),e$At.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),e$Y(0,e$d,"relaxBox",function(){return this._relaxBox},function(e$d){(this._relaxBox=e$d).getCorners(this._corners),e$ad.createfromPoints(this._corners,this._boundingSphere)}),e$A.debugMode=!1,e$A.relax=1.15,e$A.CHILDNUM=8,e$f(e$A,["tempVector0",function(){return this.tempVector0=new e$At},"tempSize",function(){return this.tempSize=new e$At},"tempCenter",function(){return this.tempCenter=new e$At},"_octreeSplit",function(){return this._octreeSplit=[new e$At(.25,.25,.25),new e$At(.75,.25,.25),new e$At(.25,.75,.25),new e$At(.75,.75,.25),new e$At(.25,.25,.75),new e$At(.75,.25,.75),new e$At(.25,.75,.75),new e$At(.75,.75,.75)]}]),e$A}(),e$F=(function(){function e$d(){}e$c(e$d,"laya.d3.core.scene.SceneManager")}(),function(){function e$d(e$d,e$t,e$l,e$k){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===e$d&&(e$d=1),void 0===e$t&&(e$t=1),void 0===e$l&&(e$l=1),void 0===e$k&&(e$k=1),this._r=e$d,this._g=e$t,this._b=e$l,this._a=e$k}return e$c(e$d,"laya.d3.core.trail.module.Color",null,"Color$1"),e$d.prototype.cloneTo=function(e$d){e$d._r=this._r,e$d._g=this._g,e$d._b=this._b,e$d._a=this._a},e$f(e$d,["RED",function(){return this.RED=new e$d(1,0,0,1)},"GREEN",function(){return this.GREEN=new e$d(0,1,0,1)},"BLUE",function(){return this.BLUE=new e$d(0,0,1,1)},"CYAN",function(){return this.CYAN=new e$d(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new e$d(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new e$d(1,0,1,1)},"GRAY",function(){return this.GRAY=new e$d(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new e$d(1,1,1,1)},"BLACK",function(){return this.BLACK=new e$d(0,0,0,1)}]),e$d}()),e$a=(function(){function e$d(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}e$c(e$d,"laya.d3.core.trail.module.Gradient");var e$t=e$d.prototype;e$t.setKeys=function(e$d,e$t){var e$l,e$k;this._colorKeys=e$d;for(var e$W=this.index=0;e$W<e$d.length;e$W++){var e$i=(e$l=e$d[e$W]).color;this._colorKeyData[this.index++]=e$i._r,this._colorKeyData[this.index++]=e$i._g,this._colorKeyData[this.index++]=e$i._b,this._colorKeyData[this.index++]=e$l.time}this._alphaKeys=e$t;for(var e$A=this.index=0;e$A<e$t.length;e$A++)e$k=e$t[e$A],this._alphaKeyData[this.index++]=e$k.alpha,this._alphaKeyData[this.index++]=e$k.time},e$t.cloneTo=function(e$d){var e$t=0,e$l=0,e$k=this.colorKeys,e$W=[];for(e$t=0,e$l=e$k.length;e$t<e$l;e$t++){var e$i=new e$_;e$k[e$t].cloneTo(e$i),e$W.push(e$i)}var e$A=this.alphaKeys,e$B=[];for(e$t=0,e$l=e$A.length;e$t<e$l;e$t++){var e$o=new e$a;e$A[e$t].cloneTo(e$o),e$B.push(e$o)}e$d.setKeys(e$W,e$B)},e$Y(0,e$t,"mode",function(){return this._mode},function(e$d){this._mode=e$d}),e$Y(0,e$t,"colorKeys",function(){return this._colorKeys},function(e$d){this._colorKeys=e$d;for(var e$t=this.index=0;e$t<e$d.length;e$t++){var e$l=e$d[e$t],e$k=e$l.color;this._colorKeyData[this.index++]=e$k._r,this._colorKeyData[this.index++]=e$k._g,this._colorKeyData[this.index++]=e$k._b,this._colorKeyData[this.index++]=e$l.time}}),e$Y(0,e$t,"alphaKeys",function(){return this._alphaKeys},function(e$d){this._alphaKeys=e$d;for(var e$t=this.index=0;e$t<e$d.length;e$t++){var e$l=e$d[e$t];this._alphaKeyData[this.index++]=e$l.alpha,this._alphaKeyData[this.index++]=e$l.time}})}(),function(){function e$d(e$d,e$t){this._alpha=NaN,this._time=NaN,void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),this._alpha=e$d,this._time=e$t}e$c(e$d,"laya.d3.core.trail.module.GradientAlphaKey");var e$t=e$d.prototype;return e$t.cloneTo=function(e$d){e$d.alpha=this.alpha,e$d.time=this.time},e$Y(0,e$t,"alpha",function(){return this._alpha},function(e$d){this._alpha=e$d}),e$Y(0,e$t,"time",function(){return this._time},function(e$d){this._time=e$d}),e$d}()),e$_=function(){function e$d(e$d,e$t){this._color=null,this._time=NaN,void 0===e$t&&(e$t=0),this._color=e$d||new e$F,this._time=e$t}e$c(e$d,"laya.d3.core.trail.module.GradientColorKey");var e$t=e$d.prototype;return e$t.cloneTo=function(e$d){this.color.cloneTo(e$d.color),e$d.time=this.time},e$Y(0,e$t,"color",function(){return this._color},function(e$d){this._color=e$d}),e$Y(0,e$t,"time",function(){return this._time},function(e$d){this._time=e$d}),e$d}(),e$v=(function(){function e$d(){}e$c(e$d,"laya.d3.core.trail.module.GradientMode"),e$d.Blend=0,e$d.Fixed=1}(),function(){function e$d(){}e$c(e$d,"laya.d3.core.trail.module.TextureMode"),e$d.Stretch=0,e$d.Tile=1}(),function(){function e$d(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}e$c(e$d,"laya.d3.core.trail.module.TrailKeyFrame"),e$d.prototype.cloneTo=function(e$d){e$d.time=this.time,e$d.inTangent=this.inTangent,e$d.outTangent=this.outTangent,e$d.value=this.value}}(),function(){function e$t(e$d){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new e$At,this._curPosition=new e$At,this._delVector3=new e$At,this._lastFixedVertexPosition=new e$At,this._pointAtoBVector3=new e$At,this._pointA=new e$At,this._pointB=new e$At,this._owner=e$d,this._id=e$t.renderElementCount++,0==this._id?e$d._owner.transform.position.cloneTo(this._lastPosition):e$d._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new e$Vt(e$v.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new e$Vt(e$v.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}e$c(e$t,"laya.d3.core.trail.TrailRenderElement");var e$d=e$t.prototype;e$R.imps(e$d,{"laya.d3.core.render.IRenderable":!0}),e$d._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},e$d._addTrailByFirstPosition=function(e$d,e$t){e$At.subtract(e$t,e$d,this._delVector3),e$At.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),e$At.normalize(this._pointAtoBVector3,this._pointAtoBVector3),e$At.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(e$d),e$d.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},e$d._addTrailByNextPosition=function(e$d){e$At.subtract(e$d,this._lastFixedVertexPosition,this._delVector3),e$At.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),e$At.normalize(this._pointAtoBVector3,this._pointAtoBVector3),e$At.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=e$At.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=e$_d.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(e$d),e$d.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(e$d),this._virtualVerticesCount=2)},e$d._updateVerticesByPosition=function(e$d){this._pointe=e$d.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},e$d._updateVertexBuffer2=function(){var e$d,e$t=0,e$l=0,e$k=0;for(e$k=0,e$d=(this._verticesCount+this._virtualVerticesCount)/2;e$k<e$d;e$k++)e$l=0==this._owner.textureMode?(this._VerticesToTailLength[e$k]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[e$k],this._vertices2[e$t++]=1-e$l,this._vertices2[e$t++]=1-e$l;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},e$d._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},e$d._updateDisappear=function(){var e$d,e$t=0;for(e$t=this._curDisappearIndex,e$d=(this._verticesCount+this._virtualVerticesCount)/2;e$t<e$d;e$t++)this._owner._curtime-this._everyGroupVertexBirthTime[e$t]>=this._owner.time+e$_d.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},e$d._beforeRender=function(e$d){return this._camera=e$d.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),e$At.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},e$d._render=function(e$d){this._isDead||(e$r.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),e$L.drawCall++,e$L.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},e$d._getVertexBuffer=function(e$d){return void 0===e$d&&(e$d=0),0===e$d?this._vertexBuffer1:1===e$d?this._vertexBuffer2:null},e$d._getVertexBuffers=function(){return this._vertexBuffers},e$d._getIndexBuffer=function(){return null},e$d.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},e$d._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},e$Y(0,e$d,"_vertexBufferCount",function(){return this._vertexBuffers.length}),e$Y(0,e$d,"triangleCount",function(){return 0}),e$t.renderElementCount=0}(),function(){function e$d(){}e$c(e$d,"laya.d3.core.trail.VertexTrail");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration1}),e$Y(1,e$d,"vertexDeclaration1",function(){return e$d._vertexDeclaration1}),e$Y(1,e$d,"vertexDeclaration2",function(){return e$d._vertexDeclaration2}),e$f(e$d,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new e$id(32,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",41),new e$Ad(24,"single",33),new e$Ad(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new e$id(4,[new e$Ad(0,"single",38)])}]),e$d}()),e$dd=function(){function e$H(e$d){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=e$d}e$c(e$H,"laya.d3.graphics.DynamicBatch");var e$d=e$H.prototype;return e$R.imps(e$d,{"laya.d3.core.render.IRenderable":!0}),e$d._getVertexBuffer=function(e$d){return void 0===e$d&&(e$d=0),0===e$d?this._vertexBuffer:null},e$d._getIndexBuffer=function(){return this._indexBuffer},e$d._getCombineRenderElementFromPool=function(e$d,e$t,e$l){var e$k=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return e$k||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=e$k=new e$P,e$k._sprite3D=new e$Xt),e$k._sprite3D._render._renderUpdate(e$l),e$k},e$d._getRenderElement=function(e$d,e$t,e$l){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*e$H.maxVertexCount),this._indexDatas=new Uint16Array(e$H.maxIndexCount),this._vertexBuffer=e$Vt.create(this._vertexDeclaration,e$H.maxVertexCount,35048),this._indexBuffer=e$yt.create("ushort",e$H.maxIndexCount,35048));for(var e$k=this._merageElements.length=0,e$W=0,e$i=0,e$A=this._combineRenderElements.length;e$i<e$A;e$i++){var e$B=this._combineRenderElements[e$i],e$o=e$B.getDynamicBatchBakedVertexs(0),e$I=e$B.getBakedIndices(),e$b=e$B._sprite3D.transform._isFrontFaceInvert,e$f=e$k/(this._vertexDeclaration.vertexStride/4),e$J=e$W,e$c=e$J+e$I.length;e$B._tempBatchIndexStart=e$J,e$B._tempBatchIndexEnd=e$c,this._indexDatas.set(e$I,e$W);var e$Y=0;if(e$b)for(e$Y=e$J;e$Y<e$c;e$Y+=3){this._indexDatas[e$Y]=e$f+this._indexDatas[e$Y];var e$w=this._indexDatas[e$Y+1],e$D=this._indexDatas[e$Y+2];this._indexDatas[e$Y+1]=e$f+e$D,this._indexDatas[e$Y+2]=e$f+e$w}else for(e$Y=e$J;e$Y<e$c;e$Y+=3)this._indexDatas[e$Y]=e$f+this._indexDatas[e$Y],this._indexDatas[e$Y+1]=e$f+this._indexDatas[e$Y+1],this._indexDatas[e$Y+2]=e$f+this._indexDatas[e$Y+2];e$W+=e$I.length,this._vertexDatas.set(e$o,e$k),e$k+=e$o.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),e$i=this._combineRenderElementPoolIndex=0,e$A=this._materials.length;e$i<e$A;e$i++){var e$z=this._getCombineRenderElementFromPool(e$d,e$t,e$l);e$z._type=2,e$z._staticBatch=null;var e$e=(e$z.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[e$i]]._tempBatchIndexStart,e$g=e$i+1===this._materialToRenderElementsOffsets.length?e$W:this._combineRenderElements[this._materialToRenderElementsOffsets[e$i+1]]._tempBatchIndexStart;e$z._tempBatchIndexStart=e$e,e$z._tempBatchIndexEnd=e$g,e$z._material=this._materials[e$i],this._merageElements.push(e$z)}},e$d._addCombineRenderObjTest=function(e$d){var e$t=e$d.renderObj,e$l=this._currentCombineIndexCount+e$t._getIndexBuffer().indexCount,e$k=this._currentCombineVertexCount+e$t._getVertexBuffer().vertexCount;return!(e$H.maxVertexCount<e$k||e$H.maxIndexCount<e$l)},e$d._addCombineRenderObj=function(e$d){var e$t=e$d.renderObj;this._combineRenderElements.push(e$d),this._currentCombineIndexCount=this._currentCombineIndexCount+e$t._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+e$t._getVertexBuffer().vertexCount},e$d._addCombineMaterial=function(e$d){this._materials.push(e$d)},e$d._addMaterialToRenderElementOffset=function(e$d){this._materialToRenderElementsOffsets.push(e$d)},e$d._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},e$d._addToRenderQueue=function(e$d,e$t,e$l,e$k){this._getRenderElement(e$t,e$l,e$k);for(var e$W=0,e$i=this._materials.length;e$W<e$i;e$W++)e$d.getRenderQueue(this._materials[e$W].renderQueue)._addDynamicBatchElement(this._merageElements[e$W])},e$d._beforeRender=function(e$d){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$d._render=function(e$d){var e$t=e$d._batchIndexEnd-e$d._batchIndexStart;e$r.mainContext.drawElements(4,e$t,5123,2*e$d._batchIndexStart),e$L.drawCall++,e$L.trianglesFaces+=e$t/3},e$d._getVertexBuffers=function(){return null},e$Y(0,e$d,"_vertexBufferCount",function(){return 1}),e$Y(0,e$d,"triangleCount",function(){return this._indexBuffer.indexCount/3}),e$Y(0,e$d,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),e$H.maxVertexCount=2e4,e$H.maxIndexCount=4e4,e$H.maxCombineTriangleCount=10,e$H}(),e$td=function(){function e$H(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}e$c(e$H,"laya.d3.graphics.DynamicBatchManager");var e$d=e$H.prototype;return e$d.getDynamicBatch=function(e$d,e$t){var e$l,e$k=e$d.id.toString()+e$t;return this._dynamicBatches[e$k]?e$l=this._dynamicBatches[e$k]:this._dynamicBatches[e$k]=e$l=new e$dd(e$d),e$l},e$d._garbageCollection=function(){for(var e$d in this._dynamicBatches)0===this._dynamicBatches[e$d].combineRenderElementsCount&&delete this._dynamicBatches[e$d]},e$d._addPrepareRenderElement=function(e$d){this._prepareDynamicBatchCombineElements.push(e$d)},e$d._finishCombineDynamicBatch=function(e$d){var e$t,e$l,e$k;this._prepareDynamicBatchCombineElements.sort(e$H._sortPrepareDynamicBatch);for(var e$W,e$i,e$A,e$B,e$o,e$I=-1,e$b=!0,e$f=0,e$J=-1,e$c=0,e$Y=this._prepareDynamicBatchCombineElements.length;e$c<e$Y;e$c++){var e$w=(e$i=this._prepareDynamicBatchCombineElements[e$c]).renderObj._getVertexBuffer(0).vertexDeclaration,e$D=e$l!==e$w;e$D&&(e$f=0,e$l=e$w);var e$z=e$f!==e$I;if(e$z&&(e$I=e$f),(e$D||e$z)&&(e$A=this.getDynamicBatch(e$w,e$f),e$t=null),e$b)if(e$A._addCombineRenderObjTest(e$i)){if(e$t!==(e$W=e$i._material))e$B&&(e$d.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$o=e$B=null,e$J=-1),e$B=e$W,e$J=e$A.combineRenderElementsCount,e$o=e$i,e$t=e$W;else if(e$B){var e$e=e$o.renderObj,e$g=e$i.renderObj;e$e._getVertexBuffer().vertexCount+e$g._getVertexBuffer().vertexCount>e$dd.maxVertexCount||e$e._getIndexBuffer().indexCount+e$g._getIndexBuffer().indexCount>e$dd.maxIndexCount?(e$d.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$B=e$W,e$J=e$A.combineRenderElementsCount,e$o=e$i):(e$A._addCombineMaterial(e$B),e$A._addMaterialToRenderElementOffset(e$J),e$A._addCombineRenderObj(e$o),e$o=e$B=null,e$J=-1,e$A._addCombineRenderObj(e$i))}else e$A._addCombineRenderObj(e$i);e$b=!0}else e$B&&(e$d.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$o=e$B=null,e$J=-1),e$f++,e$b=!1;else e$k=this._prepareDynamicBatchCombineElements[e$c-1],e$A._addMaterialToRenderElementOffset(e$A.combineRenderElementsCount),e$t=e$k._material,e$A._addCombineMaterial(e$t),e$A._addCombineRenderObj(e$k),e$b=!0,e$t!==(e$W=e$i._material)?(e$B=e$W,e$J=e$A.combineRenderElementsCount,e$o=e$i):e$A._addCombineRenderObj(e$i),e$t=e$W}e$B&&(e$d.getRenderQueue(e$o._material.renderQueue)._addRenderElement(e$o),e$o=e$B=null,e$J=-1),this._prepareDynamicBatchCombineElements.length=0},e$d._clearRenderElements=function(){for(var e$d in this._dynamicBatches)this._dynamicBatches[e$d]._clearRenderElements()},e$d._addToRenderQueue=function(e$d,e$t,e$l,e$k){for(var e$W in this._dynamicBatches){var e$i=this._dynamicBatches[e$W];0<e$i.combineRenderElementsCount&&e$i._addToRenderQueue(e$d,e$t,e$l,e$k)}},e$d.dispose=function(){this._dynamicBatches=null},e$H._sortPrepareDynamicBatch=function(e$d,e$t){return e$d._mainSortID-e$t._mainSortID},e$H}(),e$ld=function(){function e$d(){}return e$c(e$d,"laya.d3.graphics.FrustumCulling"),e$d.renderShadowObjectCulling=function(e$d,e$t,e$l,e$k,e$W){var e$i=0,e$A=0,e$B=0,e$o=0;for(e$i=0,e$B=e$l.length;e$i<e$B;e$i++){var e$I=e$l[e$i];e$I&&e$I._clearRenderElements()}var e$b,e$f,e$J,e$c=e$d._cullingRenders;if(1<e$W){for(e$i=0,e$B=e$d._cullingRendersLength;e$i<e$B;e$i++)if((e$b=e$c[e$i]).castShadow&&e$C.isVisible(e$b._owner.layer.mask)&&e$b.enable)for(var e$Y=1,e$w=e$t.length;e$Y<e$w;e$Y++)if(e$f=e$l[e$Y-1],0!==e$t[e$Y].containsBoundSphere(e$b.boundingSphere))for(e$A=0,e$o=(e$J=e$b._renderElements).length;e$A<e$o;e$A++)e$f._addRenderElement(e$J[e$A])}else for(e$i=0,e$B=e$d._cullingRendersLength;e$i<e$B;e$i++)if((e$b=e$c[e$i]).castShadow&&e$C.isVisible(e$b._owner.layer.mask)&&e$b.enable&&0!==e$t[0].containsBoundSphere(e$b.boundingSphere))for(e$b._renderUpdate(e$k),e$f=e$l[0],e$A=0,e$o=(e$J=e$b._renderElements).length;e$A<e$o;e$A++)e$f._addRenderElement(e$J[e$A])},e$d.renderShadowObjectCullingOctree=function(e$d,e$t,e$l,e$k,e$W){for(var e$i=0,e$A=e$l.length;e$i<e$A;e$i++){var e$B=e$l[e$i];e$B&&e$B._clearRenderElements()}1<e$W?e$d.treeRoot.cullingShadowObjects(e$t,e$l,!0,0,e$d):e$d.treeRoot.cullingShadowObjectsOnePSSM(e$t[0],e$l,e$k,!0,0,e$d)},e$d.renderObjectCulling=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=0,e$B=0,e$o=0,e$I=0,e$b=e$t._quenes,e$f=e$t._dynamicBatchManager,e$J=e$t._cullingRenders;for(e$A=0,e$B=e$b.length;e$A<e$B;e$A++){var e$c=e$b[e$A];e$c&&e$c._clearRenderElements()}var e$Y=e$kd._staticBatchManagers;for(e$A=0,e$B=e$Y.length;e$A<e$B;e$A++)e$Y[e$A]._clearRenderElements();e$f._clearRenderElements();var e$w=e$l.transform.position;for(e$A=0,e$B=e$t._cullingRendersLength;e$A<e$B;e$A++){var e$D=e$J[e$A];if(e$C.isVisible(e$D._owner.layer.mask)&&e$D.enable&&0!==e$d.containsBoundSphere(e$D.boundingSphere)&&e$D._renderUpdate(e$i)){e$D._distanceForSort=e$At.distance(e$D.boundingSphere.center,e$w)+e$D.sortingFudge;var e$z=e$D._renderElements;for(e$o=0,e$I=e$z.length;e$o<e$I;e$o++){var e$e=e$z[e$o],e$g=e$e._staticBatch;if(e$g&&e$g._material===e$e._material)e$g._addBatchRenderElement(e$e);else{var e$H=e$e.renderObj;e$H.triangleCount<10&&1===e$H._vertexBufferCount&&e$H._getIndexBuffer()&&e$e._material.renderQueue<2&&e$e._canDynamicBatch&&!e$D._owner.isStatic?e$f._addPrepareRenderElement(e$e):e$t.getRenderQueue(e$e._material.renderQueue)._addRenderElement(e$e)}}}}for(e$A=0,e$B=e$Y.length;e$A<e$B;e$A++)e$Y[e$A]._addToRenderQueue(e$t,e$k,e$W,e$i);e$f._finishCombineDynamicBatch(e$t),e$f._addToRenderQueue(e$t,e$k,e$W,e$i)},e$d.renderObjectCullingOctree=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=0,e$B=0,e$o=e$t._quenes,e$I=e$t._dynamicBatchManager;for(e$A=0,e$B=e$o.length;e$A<e$B;e$A++){var e$b=e$o[e$A];e$b&&e$b._clearRenderElements()}var e$f=e$kd._staticBatchManagers;for(e$A=0,e$B=e$f.length;e$A<e$B;e$A++)e$f[e$A]._clearRenderElements();for(e$I._clearRenderElements(),e$t._cullingRenders.length=0,e$t.treeRoot.cullingObjects(e$d,!0,0,e$l.transform.position,e$i),e$A=0,e$B=e$f.length;e$A<e$B;e$A++)e$f[e$A]._addToRenderQueue(e$t,e$k,e$W,e$i);e$I._finishCombineDynamicBatch(e$t),e$I._addToRenderQueue(e$t,e$k,e$W,e$i)},e$d.renderObjectCullingNoBoundFrustum=function(e$d,e$t,e$l,e$k,e$W){var e$i=0,e$A=0,e$B=0,e$o=0,e$I=e$d._quenes,e$b=e$d._dynamicBatchManager,e$f=e$d._cullingRenders;for(e$i=0,e$A=e$I.length;e$i<e$A;e$i++){var e$J=e$I[e$i];e$J&&e$J._clearRenderElements()}var e$c=e$kd._staticBatchManagers;for(e$i=0,e$A=e$c.length;e$i<e$A;e$i++)e$c[e$i]._clearRenderElements();e$b._clearRenderElements();var e$Y=e$t.transform.position;for(e$i=0,e$A=e$d._cullingRendersLength;e$i<e$A;e$i++){var e$w=e$f[e$i];if(e$C.isVisible(e$w._owner.layer.mask)&&e$w.enable){e$w._renderUpdate(e$W),e$w._distanceForSort=e$At.distance(e$w.boundingSphere.center,e$Y)+e$w.sortingFudge;var e$D=e$w._renderElements;for(e$B=0,e$o=e$D.length;e$B<e$o;e$B++){var e$z=e$D[e$B],e$e=e$z._staticBatch;if(e$e&&e$e._material===e$z._material)e$e._addBatchRenderElement(e$z);else{var e$g=e$z.renderObj;e$g.triangleCount<10&&1===e$g._vertexBufferCount&&e$g._getIndexBuffer()&&e$z._material.renderQueue<2&&e$z._canDynamicBatch&&!e$w._owner.isStatic?e$b._addPrepareRenderElement(e$z):e$d.getRenderQueue(e$z._material.renderQueue)._addRenderElement(e$z)}}}}for(e$i=0,e$A=e$c.length;e$i<e$A;e$i++)e$c[e$i]._addToRenderQueue(e$d,e$l,e$k,e$W);e$b._finishCombineDynamicBatch(e$d),e$b._addToRenderQueue(e$d,e$l,e$k,e$W)},e$d}(),e$kd=function(){function e$i(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}e$c(e$i,"laya.d3.graphics.StaticBatchManager");var e$d=e$i.prototype;return e$d._finishInit=function(){for(var e$d in this._staticBatches)this._staticBatches[e$d]._finishInit();this._initBatchRenderElements.length=0},e$d._initStaticBatchs=function(e$d){throw new Error("StaticBatchManager:must override this function.")},e$d._addInitBatchSprite=function(e$d){for(var e$t=e$d._render._renderElements,e$l=0,e$k=e$t.length;e$l<e$k;e$l++)this._initBatchRenderElements.push(e$t[e$l])},e$d._clearRenderElements=function(){for(var e$d in this._staticBatches)this._staticBatches[e$d]._clearRenderElements()},e$d._garbageCollection=function(e$d){var e$t=e$d._staticBatch,e$l=e$t._initBatchRenderElements,e$k=e$l.indexOf(e$d);e$l.splice(e$k,1),0===e$l.length&&(e$t.dispose(),delete this._staticBatches[e$t._key])},e$d._addToRenderQueue=function(e$d,e$t,e$l,e$k){for(var e$W in this._staticBatches){var e$i=this._staticBatches[e$W];0<e$i._batchRenderElements.length&&e$i._updateToRenderQueue(e$d,e$k)}},e$d.dispose=function(){this._staticBatches=null},e$i._addToStaticBatchQueue=function(e$d){e$d instanceof laya.d3.core.RenderableSprite3D&&e$d._addToInitStaticBatchManager();for(var e$t=0,e$l=e$d.numChildren;e$t<e$l;e$t++)e$i._addToStaticBatchQueue(e$d._childs[e$t])},e$i.combine=function(e$d,e$t){var e$l,e$k=0,e$W=0;if(e$t)for(e$k=0,e$W=e$t.length;e$k<e$W;e$k++){e$t[e$k]._addToInitStaticBatchManager()}else e$d&&e$i._addToStaticBatchQueue(e$d);for(e$k=0,e$W=e$i._staticBatchManagers.length;e$k<e$W;e$k++)(e$l=e$i._staticBatchManagers[e$k])._initStaticBatchs(e$d),e$l._finishInit()},e$i._staticBatchManagers=[],e$i}(),e$Wd=function(){function e$d(e$d,e$t,e$l){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=e$d,this._manager=e$t,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=e$l}e$c(e$d,"laya.d3.graphics.StaticBatch");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),e$t._binarySearch=function(e$d){for(var e$t=0,e$l=this._batchRenderElements.length-1,e$k=0;e$t<=e$l;)e$k=Math.floor((e$t+e$l)/2),this._compareBatchRenderElement(this._batchRenderElements[e$k],e$d)?e$l=e$k-1:e$t=e$k+1;return e$t},e$t._compareBatchRenderElement=function(e$d,e$t){throw new Error("StaticBatch:must override this function.")},e$t._getVertexDecLightMap=function(e$d){return e$d===e$yd.vertexDeclaration?e$Cd.vertexDeclaration:e$d===e$Qd.vertexDeclaration?e$jd.vertexDeclaration:e$d===e$$d.vertexDeclaration?e$Hd.vertexDeclaration:e$d===e$Ed.vertexDeclaration?null:e$d===e$wd.vertexDeclaration?e$Dd.vertexDeclaration:e$d===e$Zd.vertexDeclaration?e$xd.vertexDeclaration:e$d===e$rd.vertexDeclaration?e$Sd.vertexDeclaration:e$d===e$Vd.vertexDeclaration?e$Kd.vertexDeclaration:e$d===e$Qd.vertexDeclaration?e$jd.vertexDeclaration:e$d===e$pd.vertexDeclaration?e$Rd.vertexDeclaration:e$d===e$Ed.vertexDeclaration?null:e$d===e$wd.vertexDeclaration?e$Dd.vertexDeclaration:e$d===e$Ud.vertexDeclaration?e$nd.vertexDeclaration:e$d===e$rd.vertexDeclaration?e$Sd.vertexDeclaration:e$d},e$t._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},e$t._addBatchRenderElement=function(e$d){this._batchRenderElements.splice(this._binarySearch(e$d),0,e$d)},e$t._updateToRenderQueue=function(e$d,e$t){this._combineRenderElementPoolIndex=0,this._getRenderElement(e$d.getRenderQueue(this._material.renderQueue)._renderElements,e$d,e$t)},e$t._getRenderElement=function(e$d,e$t,e$l){throw new Error("StaticBatch:must override this function.")},e$t._finishInit=function(){throw new Error("StaticBatch:must override this function.")},e$t._clearRenderElements=function(){this._batchRenderElements.length=0},e$t.dispose=function(){},e$t._getVertexBuffer=function(e$d){return void 0===e$d&&(e$d=0),null},e$t._getIndexBuffer=function(){return null},e$t._beforeRender=function(e$d){return!0},e$t._render=function(e$d){},e$t._getVertexBuffers=function(){return null},e$Y(0,e$t,"_vertexBufferCount",function(){return 1}),e$Y(0,e$t,"triangleCount",function(){return 0}),e$d.combine=function(e$d){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),e$kd.combine(e$d)},e$d.maxBatchVertexCount=65535,e$d}(),e$id=function(){function e$A(e$d,e$t){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++e$A._uniqueIDCounter,this._id>e$A.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",e$A.maxVertexDeclaration);this._shaderValues=new e$Jt,this._vertexElementsDic={},this._vertexStride=e$d,this._vertexElements=e$t;for(var e$l=0;e$l<e$t.length;e$l++){var e$k=e$t[e$l],e$W=e$k.elementUsage;this._vertexElementsDic[e$W]=e$k;var e$i=[e$A._getTypeSize(e$k.elementFormat)/4,5126,!1,this._vertexStride,e$k.offset];switch(this._shaderValues.setValue(e$W,e$i),e$W){case 1:this._addShaderDefine(e$Lt.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(e$Lt.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(e$Lt.SHADERDEFINE_UV1)}}}e$c(e$A,"laya.d3.graphics.VertexDeclaration");var e$d=e$A.prototype;return e$d._addShaderDefine=function(e$d){this._shaderDefineValue|=e$d},e$d._removeShaderDefine=function(e$d){this._shaderDefineValue&=~e$d},e$d.getVertexElements=function(){return this._vertexElements.slice()},e$d.getVertexElementByUsage=function(e$d){return this._vertexElementsDic[e$d]},e$d.unBinding=function(){},e$Y(0,e$d,"shaderDefineValue",function(){return this._shaderDefineValue}),e$Y(0,e$d,"id",function(){return this._id}),e$Y(0,e$d,"vertexStride",function(){return this._vertexStride}),e$Y(0,e$d,"shaderValues",function(){return this._shaderValues}),e$A._getTypeSize=function(e$d){switch(e$d){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},e$A.getVertexStride=function(e$d){for(var e$t=0,e$l=0;e$l<e$d.Length;e$l++){var e$k=e$d[e$l],e$W=e$k.offset+e$A._getTypeSize(e$k.elementFormat);e$t<e$W&&(e$t=e$W)}return e$t},e$A._maxVertexDeclarationBit=1e3,e$A._uniqueIDCounter=1,e$f(e$A,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),e$A}(),e$Ad=function(){function e$d(e$d,e$t,e$l){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=e$d,this.elementFormat=e$t,this.elementUsage=e$l}return e$c(e$d,"laya.d3.graphics.VertexElement"),e$d}(),e$Bd=(function(){function e$d(){}e$c(e$d,"laya.d3.graphics.VertexElementFormat"),e$d.Single="single",e$d.Vector2="vector2",e$d.Vector3="vector3",e$d.Vector4="vector4",e$d.Color="color",e$d.Byte4="byte4",e$d.Short2="short2",e$d.Short4="short4",e$d.NormalizedShort2="normalizedshort2",e$d.NormalizedShort4="normalizedshort4",e$d.HalfVector2="halfvector2",e$d.HalfVector4="halfvector4"}(),function(){function e$d(){}e$c(e$d,"laya.d3.graphics.VertexElementUsage"),e$d.POSITION0=0,e$d.COLOR0=1,e$d.TEXTURECOORDINATE0=2,e$d.NORMAL0=3,e$d.BINORMAL0=4,e$d.TANGENT0=5,e$d.BLENDINDICES0=6,e$d.BLENDWEIGHT0=7,e$d.DEPTH0=8,e$d.FOG0=9,e$d.POINTSIZE0=10,e$d.SAMPLE0=11,e$d.TESSELLATEFACTOR0=12,e$d.COLOR1=13,e$d.NEXTTEXTURECOORDINATE0=14,e$d.TEXTURECOORDINATE1=15,e$d.NEXTTEXTURECOORDINATE1=16,e$d.CORNERTEXTURECOORDINATE0=17,e$d.VELOCITY0=18,e$d.STARTCOLOR0=19,e$d.STARTSIZE=20,e$d.AGEADDSCALE0=21,e$d.STARTROTATION=22,e$d.ENDCOLOR0=23,e$d.STARTLIFETIME=24,e$d.TIME0=33,e$d.SHAPEPOSITIONSTARTLIFETIME=30,e$d.DIRECTIONTIME=32,e$d.SIZEROTATION0=27,e$d.RADIUS0=28,e$d.RADIAN0=29,e$d.STARTSPEED=31,e$d.RANDOM0=34,e$d.RANDOM1=35,e$d.SIMULATIONWORLDPOSTION=36,e$d.SIMULATIONWORLDROTATION=37,e$d.TEXTURECOORDINATE0X=38,e$d.TEXTURECOORDINATE0X1=39,e$d.TEXTURECOORDINATE0Y=40,e$d.OFFSETVECTOR=41}(),function(){function e$d(e$d,e$t,e$l){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=e$d,this._textureCoordinate0=e$t,this._time=e$l}e$c(e$d,"laya.d3.graphics.VertexGlitter");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate0}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"time",function(){return this._time}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(24,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector2",2),new e$Ad(20,"single",33)])}])}(),function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=e$d,this._position=e$t,this._velocity=e$l,this._startColor=e$k,this._endColor=e$W,this._sizeRotation=e$i,this._radius=e$A,this._radian=e$B,this._ageAddScale=e$o,this._time=e$I}e$c(e$d,"laya.d3.graphics.VertexParticle");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"endColor",function(){return this._endColor}),e$Y(0,e$t,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),e$Y(0,e$t,"sizeRotation",function(){return this._sizeRotation}),e$Y(0,e$t,"velocity",function(){return this._velocity}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"startColor",function(){return this._startColor}),e$Y(0,e$t,"radius",function(){return this._radius}),e$Y(0,e$t,"radian",function(){return this._radian}),e$Y(0,e$t,"ageAddScale",function(){return this._ageAddScale}),e$Y(0,e$t,"time",function(){return this._time}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(116,[new e$Ad(0,"vector4",17),new e$Ad(16,"vector3",0),new e$Ad(28,"vector3",18),new e$Ad(40,"vector4",19),new e$Ad(56,"vector4",23),new e$Ad(72,"vector3",27),new e$Ad(84,"vector2",28),new e$Ad(92,"vector4",29),new e$Ad(108,"single",24),new e$Ad(112,"single",33)])}])}(),function(){function e$d(e$d){this._position=null,this._position=e$d}e$c(e$d,"laya.d3.graphics.VertexPosition");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(12,[new e$Ad(0,"vector3",0)])}]),e$d}()),e$od=function(){function e$d(e$d,e$t){this._position=null,this._normal=null,this._position=e$d,this._normal=e$t}e$c(e$d,"laya.d3.graphics.VertexPositionNormal");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(24,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3)])}]),e$d}(),e$Id=function(){function e$d(e$d,e$t,e$l){this._position=null,this._normal=null,this._color=null,this._position=e$d,this._normal=e$t,this._color=e$l}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColor");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(40,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1)])}]),e$d}(),e$bd=function(){function e$d(e$d,e$t,e$l,e$k,e$W){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._blendIndex=e$k,this._blendWeight=e$W}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorSkin");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(72,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector4",7),new e$Ad(56,"vector4",6)])}]),e$d}(),e$fd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._tangent=e$k,this._blendIndex=e$W,this._blendWeight=e$i}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(88,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector4",7),new e$Ad(56,"vector4",6),new e$Ad(72,"vector4",5)])}]),e$d}(),e$Jd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._tangent=e$k,this._blendIndex=e$W,this._blendWeight=e$i}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(84,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector4",7),new e$Ad(56,"vector4",6),new e$Ad(72,"vector3",5)])}]),e$d}(),e$cd=function(){function e$d(e$d,e$t,e$l,e$k){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._tangent=e$k}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(56,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector4",5)])}]),e$d}(),e$Yd=function(){function e$d(e$d,e$t,e$l,e$k){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._tangent=e$k}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(52,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector3",5)])}]),e$d}(),e$wd=function(){function e$d(e$d,e$t,e$l,e$k){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate=e$k}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTexture");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(48,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2)])}]),e$d}(),e$Dd=function(){function e$d(e$d,e$t,e$l,e$k,e$W){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate0=e$k,this._textureCoordinate1=e$W}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(56,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector2",15)])}]),e$d}(),e$zd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate0=e$k,this._textureCoordinate1=e$W,this._blendIndex=e$i,this._blendWeight=e$A}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(88,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector2",15),new e$Ad(56,"vector4",7),new e$Ad(72,"vector4",6)])}]),e$d}(),e$ed=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate0=e$k,this._textureCoordinate1=e$W,this._tangent=e$i,this._blendIndex=e$A,this._blendWeight=e$B}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(104,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector2",15),new e$Ad(56,"vector4",7),new e$Ad(72,"vector4",6),new e$Ad(88,"vector4",5)])}]),e$d}(),e$gd=function(){function e$d(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$t.VertexPositionNormalColorTexture0SkinTangent=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate0=e$k,this._textureCoordinate1=e$W,this._tangent=e$i,this._blendIndex=e$A,this._blendWeight=e$B},e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(100,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector2",15),new e$Ad(56,"vector4",7),new e$Ad(72,"vector4",6),new e$Ad(88,"vector3",5)])}]),e$d}(),e$Hd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate0=e$k,this._textureCoordinate1=e$W,this._tangent=e$i}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(72,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector2",15),new e$Ad(56,"vector4",5)])}]),e$d}(),e$Rd=function(){function e$d(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$t.VertexPositionNormalColorTexture0Tangent=function(e$d,e$t,e$l,e$k,e$W,e$i){this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate0=e$k,this._textureCoordinate1=e$W,this._tangent=e$i},e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(68,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector2",15),new e$Ad(56,"vector3",5)])}]),e$d}(),e$Gd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate=e$k,this._blendIndex=e$W,this._blendWeight=e$i}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(80,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector4",7),new e$Ad(64,"vector4",6)])}]),e$d}(),e$qd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate=e$k,this._tangent=e$W,this._blendIndex=e$i,this._blendWeight=e$A}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(96,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector4",7),new e$Ad(64,"vector4",6),new e$Ad(80,"vector4",5)])}]),e$d}(),e$Ld=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate=e$k,this._tangent=e$W,this._blendIndex=e$i,this._blendWeight=e$A}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(92,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector4",7),new e$Ad(64,"vector4",6),new e$Ad(80,"vector3",5)])}]),e$d}(),e$$d=function(){function e$d(e$d,e$t,e$l,e$k,e$W){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate=e$k,this._tangent=e$W}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(64,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector4",5)])}]),e$d}(),e$pd=function(){function e$d(e$d,e$t,e$l,e$k,e$W){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._color=e$l,this._textureCoordinate=e$k,this._tangent=e$W}e$c(e$d,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"color",function(){return this._color}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(60,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",1),new e$Ad(40,"vector2",2),new e$Ad(48,"vector3",5)])}]),e$d}(),e$Md=function(){function e$d(e$d,e$t,e$l){this._position=null,this._normal=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._tangent=e$l}e$c(e$d,"laya.d3.graphics.VertexPositionNormalSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(40,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector4",5)])}]),e$d}(),e$Td=function(){function e$d(e$d,e$t,e$l){this._position=null,this._normal=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._tangent=e$l}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(36,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector3",5)])}]),e$d}(),e$rd=function(){function e$d(e$d,e$t,e$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTexture");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(32,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2)])}]),e$d}(),e$Sd=function(){function e$d(e$d,e$t,e$l,e$k){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=e$d,this._normal=e$t,this._textureCoordinate0=e$l,this._textureCoordinate1=e$k}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(40,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector2",15)])}]),e$d}(),e$jd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=e$d,this._normal=e$t,this._textureCoordinate0=e$l,this._textureCoordinate1=e$k,this._blendIndex=e$W,this._blendWeight=e$i}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(72,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector2",15),new e$Ad(40,"vector4",7),new e$Ad(56,"vector4",6)])}]),e$d}(),e$Cd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._textureCoordinate0=e$l,this._textureCoordinate1=e$k,this._tangent=e$W,this._blendIndex=e$i,this._blendWeight=e$A}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(88,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector2",15),new e$Ad(40,"vector4",7),new e$Ad(56,"vector4",6),new e$Ad(72,"vector4",5)])}]),e$d}(),e$Kd=function(){function e$d(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$t.VertexPositionNormalTexture0SkinTangent=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){this._position=e$d,this._normal=e$t,this._textureCoordinate0=e$l,this._textureCoordinate1=e$k,this._tangent=e$W,this._blendIndex=e$i,this._blendWeight=e$A},e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(84,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector2",15),new e$Ad(40,"vector4",7),new e$Ad(56,"vector4",6),new e$Ad(72,"vector3",5)])}]),e$d}(),e$xd=function(){function e$d(e$d,e$t,e$l,e$k,e$W){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._textureCoordinate0=e$l,this._textureCoordinate1=e$k,this._tangent=e$W}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(56,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector2",15),new e$Ad(40,"vector4",5)])}]),e$d}(),e$nd=function(){function e$d(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$t.VertexPositionNormalTexture0Tangent=function(e$d,e$t,e$l,e$k,e$W){this._position=e$d,this._normal=e$t,this._textureCoordinate0=e$l,this._textureCoordinate1=e$k,this._tangent=e$W},e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(52,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector2",15),new e$Ad(40,"vector3",5)])}]),e$d}(),e$Qd=function(){function e$d(e$d,e$t,e$l,e$k,e$W){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l,this._blendIndex=e$k,this._blendWeight=e$W}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTextureSkin");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(64,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector4",7),new e$Ad(48,"vector4",6)])}]),e$d}(),e$yd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l,this._tangent=e$k,this._blendIndex=e$W,this._blendWeight=e$i}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(80,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector4",7),new e$Ad(48,"vector4",6),new e$Ad(64,"vector4",5)])}]),e$d}(),e$Vd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l,this._tangent=e$k,this._blendIndex=e$W,this._blendWeight=e$i}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(76,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector4",7),new e$Ad(48,"vector4",6),new e$Ad(64,"vector3",5)])}]),e$d}(),e$Zd=function(){function e$d(e$d,e$t,e$l,e$k){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l,this._tangent=e$k}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(48,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector4",5)])}]),e$d}(),e$Ud=function(){function e$d(e$d,e$t,e$l,e$k){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l,this._tangent=e$k}e$c(e$d,"laya.d3.graphics.VertexPositionNormalTextureTangent");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(44,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector3",5)])}]),e$d}(),e$Ed=function(){function e$d(e$d,e$t,e$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l}e$c(e$d,"laya.d3.graphics.VertexPositionNTBTexture");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(56,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector3",5),new e$Ad(36,"vector3",4),new e$Ad(48,"vector2",2)])}]),e$d}(),e$Nd=function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=e$d,this._normal=e$t,this._textureCoordinate0=e$k,this._textureCoordinate1=e$W,this._tangent=e$i,e$l=e$l,this._blendIndex=e$A,this._blendWeight=e$B}e$c(e$d,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"tangent",function(){return this._tangent}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(0,e$t,"textureCoordinate1",function(){return this._textureCoordinate1}),e$Y(0,e$t,"blendIndex",function(){return this._blendIndex}),e$Y(0,e$t,"blendWeight",function(){return this._blendWeight}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(96,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector3",5),new e$Ad(36,"vector3",4),new e$Ad(48,"vector2",2),new e$Ad(56,"vector2",15),new e$Ad(64,"vector4",7),new e$Ad(80,"vector4",6)])}]),e$d}(),e$ud=function(){function e$d(e$d,e$t,e$l){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=e$d,this._normal=e$t,this._textureCoordinate=e$l}e$c(e$d,"laya.d3.graphics.VertexPositionNTBTextureSkin");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"textureCoordinate",function(){return this._textureCoordinate}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(88,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector3",5),new e$Ad(36,"vector3",4),new e$Ad(48,"vector2",2),new e$Ad(56,"vector4",7),new e$Ad(72,"vector4",6)])}]),e$d}(),e$hd=(function(){function e$d(e$d,e$t,e$l,e$k){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=e$d,this._normal=e$t,this._textureCoord0=e$l,this._textureCoord1=e$k}e$c(e$d,"laya.d3.graphics.VertexPositionTerrain");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"normal",function(){return this._normal}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoord0",function(){return this._textureCoord0}),e$Y(0,e$t,"textureCoord1",function(){return this._textureCoord1}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(40,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector3",3),new e$Ad(24,"vector2",2),new e$Ad(32,"vector2",15)])}])}(),function(){function e$d(e$d,e$t){this._position=null,this._textureCoordinate0=null,this._position=e$d,this._textureCoordinate0=e$t}e$c(e$d,"laya.d3.graphics.VertexPositionTexture0");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"position",function(){return this._position}),e$Y(0,e$t,"textureCoordinate0",function(){return this._textureCoordinate0}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(20,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector2",2)])}]),e$d}()),e$sd=(function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f,e$J,e$c){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=e$d,this._positionStartLifeTime=e$t,this._velocity=e$l,this._startColor=e$k,this._startSize=e$W,this._startRotation0=e$i,this._startRotation1=e$A,this._startRotation2=e$B,this._startLifeTime=e$o,this._time=e$I,this._startSpeed=e$b,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=e$c}e$c(e$d,"laya.d3.graphics.VertexShurikenParticleBillboard");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),e$Y(0,e$t,"random1",function(){return this._randoms1}),e$Y(0,e$t,"startRotation2",function(){return this._startRotation2}),e$Y(0,e$t,"positionStartLifeTime",function(){return this._positionStartLifeTime}),e$Y(0,e$t,"velocity",function(){return this._velocity}),e$Y(0,e$t,"random0",function(){return this._randoms0}),e$Y(0,e$t,"startSize",function(){return this._startSize}),e$Y(0,e$t,"startColor",function(){return this._startColor}),e$Y(0,e$t,"startRotation0",function(){return this._startRotation0}),e$Y(0,e$t,"startRotation1",function(){return this._startRotation1}),e$Y(0,e$t,"startLifeTime",function(){return this._startLifeTime}),e$Y(0,e$t,"time",function(){return this._time}),e$Y(0,e$t,"startSpeed",function(){return this._startSpeed}),e$Y(0,e$t,"simulationWorldPostion",function(){return this._simulationWorldPostion}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(152,[new e$Ad(0,"vector4",17),new e$Ad(16,"vector4",30),new e$Ad(32,"vector4",32),new e$Ad(48,"vector4",19),new e$Ad(64,"vector3",20),new e$Ad(76,"vector3",22),new e$Ad(88,"single",31),new e$Ad(92,"vector4",34),new e$Ad(108,"vector4",35),new e$Ad(124,"vector3",36),new e$Ad(136,"vector4",37)])}])}(),function(){function e$d(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f,e$J,e$c){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=e$d,this._positionStartLifeTime=e$t,this._velocity=e$l,this._startColor=e$k,this._startSize=e$W,this._startRotation0=e$i,this._startRotation1=e$A,this._startRotation2=e$B,this._startLifeTime=e$o,this._time=e$I,this._startSpeed=e$b,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=e$c}e$c(e$d,"laya.d3.graphics.VertexShurikenParticleMesh");var e$t=e$d.prototype;e$R.imps(e$t,{"laya.d3.graphics.IVertex":!0}),e$Y(0,e$t,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),e$Y(0,e$t,"velocity",function(){return this._velocity}),e$Y(0,e$t,"position",function(){return this._positionStartLifeTime}),e$Y(0,e$t,"random0",function(){return this._randoms0}),e$Y(0,e$t,"startSize",function(){return this._startSize}),e$Y(0,e$t,"startColor",function(){return this._startColor}),e$Y(0,e$t,"startRotation0",function(){return this._startRotation0}),e$Y(0,e$t,"startRotation1",function(){return this._startRotation1}),e$Y(0,e$t,"random1",function(){return this._randoms1}),e$Y(0,e$t,"startRotation2",function(){return this._startRotation2}),e$Y(0,e$t,"startLifeTime",function(){return this._startLifeTime}),e$Y(0,e$t,"time",function(){return this._time}),e$Y(0,e$t,"startSpeed",function(){return this._startSpeed}),e$Y(0,e$t,"simulationWorldPostion",function(){return this._simulationWorldPostion}),e$Y(0,e$t,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$Y(1,e$d,"vertexDeclaration",function(){return e$d._vertexDeclaration}),e$f(e$d,["_vertexDeclaration",function(){return this._vertexDeclaration=new e$id(172,[new e$Ad(0,"vector3",0),new e$Ad(12,"vector4",1),new e$Ad(28,"vector2",2),new e$Ad(36,"vector4",30),new e$Ad(52,"vector4",32),new e$Ad(68,"vector4",19),new e$Ad(84,"vector3",20),new e$Ad(96,"vector3",22),new e$Ad(108,"single",31),new e$Ad(112,"vector4",34),new e$Ad(128,"vector4",35),new e$Ad(144,"vector3",36),new e$Ad(156,"vector4",37)])}])}(),function(){function e$g(e$d,e$t,e$l,e$k,e$W,e$i){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=e$l,this._materials=e$k,this._subMeshes=e$W,this._materialMap=e$i,this._version=e$t,this._onLoaded(e$d)}e$c(e$g,"laya.d3.loaders.LoadModelV01");var e$d=e$g.prototype;return e$d._onLoaded=function(e$d){this._readData=e$d,this.READ_BLOCK();for(var e$t=0;e$t<this._BLOCK.count;e$t++){var e$l=this._readData.getUint16(),e$k=this._strings[e$l],e$W=this["READ_"+e$k];if(null==e$W)throw new Error("model file err,no this function:"+e$l+" "+e$k);if(!e$W.call(this))break}return this._mesh},e$d.onError=function(){},e$d._readString=function(){return this._strings[this._readData.getUint16()]},e$d.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},e$d.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},e$d.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var e$d=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var e$t=0;e$t<this._STRINGS.size;e$t++)this._strings[e$t]=this._readData.readUTFString();return this._readData.pos=e$d,!0},e$d.READ_MATERIAL=function(){var e$d=this._readData.getUint16(),e$t=(this._readString(),this._readString());return this._materials[e$d]="null"!==e$t?e$z.getRes(this._materialMap[e$t]):new e$Tt,!0},e$d.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var e$d,e$t=this._readData.__getBuffer(),e$l=0,e$k=this._readData.getUint32(),e$W=this._readData.getUint32(),e$i=(new Float32Array(e$t.slice(e$k+this._DATA.offset,e$k+this._DATA.offset+e$W)),this._readData.getUint32()),e$A=this._readData.getUint32(),e$B=new Float32Array(e$t.slice(e$i+this._DATA.offset,e$i+this._DATA.offset+e$A));for(this.mesh._inverseBindPoses=[],e$l=0,e$d=e$B.length;e$l<e$d;e$l+=16){var e$o=new e$dt(e$B[e$l+0],e$B[e$l+1],e$B[e$l+2],e$B[e$l+3],e$B[e$l+4],e$B[e$l+5],e$B[e$l+6],e$B[e$l+7],e$B[e$l+8],e$B[e$l+9],e$B[e$l+10],e$B[e$l+11],e$B[e$l+12],e$B[e$l+13],e$B[e$l+14],e$B[e$l+15]);this.mesh._inverseBindPoses.push(e$o)}break;default:throw new Error("LoadModel:unknown version.")}return!0},e$d.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var e$d=this._readString();this._shaderAttributes=e$d.match(e$g._attrReg);var e$t=this._readData.getUint32(),e$l=this._readData.getUint32(),e$k=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),e$W=this._readData.getUint32(),e$i=this._readData.getUint32(),e$A=this._readData.getUint32(),e$B=this._readData.__getBuffer(),e$o=new e$It(this._mesh),e$I=this._getVertexDeclaration(),e$b=e$Vt.create(e$I,e$W/e$I.vertexStride,35044,!0),e$f=e$k+this._DATA.offset,e$J=e$B.slice(e$f,e$f+e$W);e$b.setData(new Float32Array(e$J));for(var e$c=(e$o._vertexBuffer=e$b).vertexDeclaration.getVertexElements(),e$Y=0;e$Y<e$c.length;e$Y++)e$o._bufferUsage[e$c[e$Y].elementUsage]=e$b;var e$w=e$yt.create("ushort",e$l/2,35044,!0),e$D=e$t+this._DATA.offset,e$z=e$B.slice(e$D,e$D+e$l);e$w.setData(new Uint16Array(e$z)),e$o._indexBuffer=e$w;var e$e=e$B.slice(e$i+this._DATA.offset,e$i+this._DATA.offset+e$A);return e$o._boneIndicesList[0]=new Uint8Array(e$e),this._subMeshes.push(e$o),!0},e$d.READ_DATAAREA=function(){return!1},e$d._getVertexDeclaration=function(){for(var e$d,e$t=!1,e$l=!1,e$k=!1,e$W=!1,e$i=!1,e$A=!1,e$B=!1,e$o=!1,e$I=!1,e$b=0;e$b<this._shaderAttributes.length;e$b+=8)switch(this._shaderAttributes[e$b]){case"POSITION":e$t=!0;break;case"NORMAL":e$l=!0;break;case"COLOR":e$k=!0;break;case"UV":e$W=!0;break;case"UV1":e$i=!0;break;case"BLENDWEIGHT":e$B=!0;break;case"BLENDINDICES":e$o=!0;break;case"TANGENT":e$A=!0;break;case"BINORMAL":e$I=!0}return e$t&&e$l&&e$k&&e$W&&e$i&&e$B&&e$o&&e$A?e$d=e$gd.vertexDeclaration:e$t&&e$l&&e$k&&e$W&&e$i&&e$B&&e$o?e$d=e$zd.vertexDeclaration:e$t&&e$l&&e$W&&e$i&&e$B&&e$o&&e$A?e$d=e$Kd.vertexDeclaration:e$t&&e$l&&e$W&&e$i&&e$B&&e$o?e$d=e$jd.vertexDeclaration:e$t&&e$l&&e$k&&e$W&&e$B&&e$o&&e$A?e$d=e$Ld.vertexDeclaration:e$t&&e$l&&e$k&&e$W&&e$B&&e$o?e$d=e$Gd.vertexDeclaration:e$t&&e$l&&e$A&&e$I&&e$W&&e$B&&e$o?e$d=e$ud.vertexDeclaration:e$t&&e$l&&e$W&&e$B&&e$o&&e$A?e$d=e$Vd.vertexDeclaration:e$t&&e$l&&e$W&&e$B&&e$o?e$d=e$Qd.vertexDeclaration:e$t&&e$l&&e$k&&e$B&&e$o&&e$A?e$d=e$Jd.vertexDeclaration:e$t&&e$l&&e$k&&e$B&&e$o?e$d=e$bd.vertexDeclaration:e$t&&e$l&&e$k&&e$W&&e$i&&e$A?e$d=e$Rd.vertexDeclaration:e$t&&e$l&&e$k&&e$W&&e$i?e$d=e$Dd.vertexDeclaration:e$t&&e$l&&e$W&&e$i&&e$A?e$d=e$nd.vertexDeclaration:e$t&&e$l&&e$W&&e$i?e$d=e$Sd.vertexDeclaration:e$t&&e$l&&e$k&&e$W&&e$A?e$d=e$pd.vertexDeclaration:e$t&&e$l&&e$W&&e$A&&e$I?e$d=e$Ed.vertexDeclaration:e$t&&e$l&&e$k&&e$W?e$d=e$wd.vertexDeclaration:e$t&&e$l&&e$W&&e$A?e$d=e$Ud.vertexDeclaration:e$t&&e$l&&e$W?e$d=e$rd.vertexDeclaration:e$t&&e$l&&e$k&&e$A?e$d=e$Yd.vertexDeclaration:e$t&&e$l&&e$k&&(e$d=e$Id.vertexDeclaration),e$d},e$Y(0,e$d,"mesh",function(){return this._mesh}),e$g._attrReg=new RegExp("(\\w+)|([:,;])","g"),e$g}()),e$Pd=function(){function e$q(){}return e$c(e$q,"laya.d3.loaders.LoadModelV02"),e$q.parse=function(e$d,e$t,e$l,e$k,e$W,e$i){e$q._mesh=e$l,e$q._materials=e$k,e$q._subMeshes=e$W,e$q._materialMap=e$i,e$q._version=e$t,e$q._readData=e$d,e$q.READ_DATA(),e$q.READ_BLOCK(),e$q.READ_STRINGS();for(var e$A=0,e$B=e$q._BLOCK.count;e$A<e$B;e$A++){e$q._readData.pos=e$q._BLOCK.blockStarts[e$A];var e$o=e$q._readData.getUint16(),e$I=e$q._strings[e$o],e$b=e$q["READ_"+e$I];if(null==e$b)throw new Error("model file err,no this function:"+e$o+" "+e$I);e$b.call()}e$q._strings.length=0,e$q._readData=null,e$q._version=null,e$q._mesh=null,e$q._materials=null,e$q._subMeshes=null,e$q._materialMap=null},e$q._readString=function(){return e$q._strings[e$q._readData.getUint16()]},e$q.READ_DATA=function(){e$q._DATA.offset=e$q._readData.getUint32(),e$q._DATA.size=e$q._readData.getUint32()},e$q.READ_BLOCK=function(){for(var e$d=e$q._BLOCK.count=e$q._readData.getUint16(),e$t=e$q._BLOCK.blockStarts=[],e$l=e$q._BLOCK.blockLengths=[],e$k=0;e$k<e$d;e$k++)e$t.push(e$q._readData.getUint32()),e$l.push(e$q._readData.getUint32())},e$q.READ_STRINGS=function(){var e$d=e$q._readData.getUint32(),e$t=e$q._readData.getUint16(),e$l=e$q._readData.pos;e$q._readData.pos=e$d+e$q._DATA.offset;for(var e$k=0;e$k<e$t;e$k++)e$q._strings[e$k]=e$q._readData.readUTFString();e$q._readData.pos=e$l},e$q.READ_MATERIAL=function(){e$q._readString(),e$q._readString();var e$d=e$q._readString();return""!==e$d&&e$q._materials.push(e$z.getRes(e$q._materialMap[e$d])),!0},e$q.READ_MESH=function(){e$q._readString();var e$d,e$t=e$q._readData.__getBuffer(),e$l=0,e$k=e$q._readData.getInt16(),e$W=e$q._DATA.offset;for(e$l=0;e$l<e$k;e$l++){var e$i=e$W+e$q._readData.getUint32(),e$A=e$q._readData.getUint32(),e$B=new Float32Array(e$t.slice(e$i,e$i+e$A)),e$o=e$q._readString().match(e$q._attrReg),e$I=e$q._getVertexDeclaration(e$o),e$b=e$Vt.create(e$I,4*e$B.length/e$I.vertexStride,35044,!0);e$b.setData(e$B),e$q._mesh._vertexBuffers.push(e$b)}var e$f=e$W+e$q._readData.getUint32(),e$J=e$q._readData.getUint32(),e$c=new Uint16Array(e$t.slice(e$f,e$f+e$J)),e$Y=e$yt.create("ushort",e$J/2,35044,!0);e$Y.setData(e$c),e$q._mesh._indexBuffer=e$Y;var e$w=e$q._mesh._boneNames=[],e$D=e$q._readData.getUint16();for(e$w.length=e$D,e$l=0;e$l<e$D;e$l++)e$w[e$l]=e$q._strings[e$q._readData.getUint16()];var e$z=e$q._readData.getUint32(),e$e=e$q._readData.getUint32(),e$g=(new Float32Array(e$t.slice(e$W+e$z,e$W+e$z+e$e)),e$q._readData.getUint32()),e$H=e$q._readData.getUint32(),e$R=new Float32Array(e$t.slice(e$W+e$g,e$W+e$g+e$H));for(e$q._mesh._inverseBindPoses=[],e$l=0,e$d=e$R.length;e$l<e$d;e$l+=16){var e$G=new e$dt(e$R[e$l+0],e$R[e$l+1],e$R[e$l+2],e$R[e$l+3],e$R[e$l+4],e$R[e$l+5],e$R[e$l+6],e$R[e$l+7],e$R[e$l+8],e$R[e$l+9],e$R[e$l+10],e$R[e$l+11],e$R[e$l+12],e$R[e$l+13],e$R[e$l+14],e$R[e$l+15]);e$q._mesh._inverseBindPoses.push(e$G)}return e$q._mesh._skinnedDatas=new Float32Array(16*e$R.length),!0},e$q.READ_SUBMESH=function(){var e$d=e$q._readData.__getBuffer(),e$t=new e$It(e$q._mesh),e$l=e$q._readData.getInt16(),e$k=e$q._readData.getUint32(),e$W=e$q._readData.getUint32();e$t._vertexBuffer=e$q._mesh._vertexBuffers[e$l],e$t._vertexStart=e$k,e$t._vertexCount=e$W;var e$i=e$q._readData.getUint32(),e$A=e$q._readData.getUint32(),e$B=e$q._mesh._indexBuffer;e$t._indexBuffer=e$B,e$t._indexStart=e$i,e$t._indexCount=e$A,e$t._indices=new Uint16Array(e$B.getData().buffer,2*e$i,e$A);var e$o=e$q._DATA.offset,e$I=e$t._subIndexBufferStart,e$b=e$t._subIndexBufferCount,e$f=e$t._boneIndicesList,e$J=e$q._readData.getUint16();e$I.length=e$J,e$b.length=e$J,e$f.length=e$J;for(var e$c=0;e$c<e$J;e$c++){e$I[e$c]=e$q._readData.getUint32(),e$b[e$c]=e$q._readData.getUint32();var e$Y=e$q._readData.getUint32(),e$w=e$q._readData.getUint32();e$t._boneIndicesList[e$c]=new Uint8Array(e$d.slice(e$o+e$Y,e$o+e$Y+e$w))}return e$q._subMeshes.push(e$t),!0},e$q._getVertexDeclaration=function(e$d){for(var e$t,e$l=!1,e$k=!1,e$W=!1,e$i=!1,e$A=!1,e$B=!1,e$o=!1,e$I=!1,e$b=!1,e$f=0;e$f<e$d.length;e$f++)switch(e$d[e$f]){case"POSITION":e$l=!0;break;case"NORMAL":e$k=!0;break;case"COLOR":e$W=!0;break;case"UV":e$i=!0;break;case"UV1":e$A=!0;break;case"BLENDWEIGHT":e$o=!0;break;case"BLENDINDICES":e$I=!0;break;case"TANGENT":e$B=!0;break;case"BINORMAL":e$b=!0}return e$l&&e$k&&e$W&&e$i&&e$A&&e$o&&e$I&&e$B?e$t=e$gd.vertexDeclaration:e$l&&e$k&&e$W&&e$i&&e$A&&e$o&&e$I?e$t=e$zd.vertexDeclaration:e$l&&e$k&&e$i&&e$A&&e$o&&e$I&&e$B?e$t=e$Kd.vertexDeclaration:e$l&&e$k&&e$i&&e$A&&e$o&&e$I?e$t=e$jd.vertexDeclaration:e$l&&e$k&&e$W&&e$i&&e$o&&e$I&&e$B?e$t=e$Ld.vertexDeclaration:e$l&&e$k&&e$W&&e$i&&e$o&&e$I?e$t=e$Gd.vertexDeclaration:e$l&&e$k&&e$i&&e$o&&e$I&&e$B?e$t=e$Vd.vertexDeclaration:e$l&&e$k&&e$i&&e$o&&e$I?e$t=e$Qd.vertexDeclaration:e$l&&e$k&&e$W&&e$o&&e$I&&e$B?e$t=e$Jd.vertexDeclaration:e$l&&e$k&&e$W&&e$o&&e$I?e$t=e$bd.vertexDeclaration:e$l&&e$k&&e$W&&e$i&&e$A&&e$B?e$t=e$Rd.vertexDeclaration:e$l&&e$k&&e$W&&e$i&&e$A?e$t=e$Dd.vertexDeclaration:e$l&&e$k&&e$i&&e$A&&e$B?e$t=e$nd.vertexDeclaration:e$l&&e$k&&e$i&&e$A?e$t=e$Sd.vertexDeclaration:e$l&&e$k&&e$W&&e$i&&e$B?e$t=e$pd.vertexDeclaration:e$l&&e$k&&e$i&&e$B&&e$b?e$t=e$Ed.vertexDeclaration:e$l&&e$k&&e$W&&e$i?e$t=e$wd.vertexDeclaration:e$l&&e$k&&e$i&&e$B?e$t=e$Ud.vertexDeclaration:e$l&&e$k&&e$i?e$t=e$rd.vertexDeclaration:e$l&&e$k&&e$W&&e$B?e$t=e$Yd.vertexDeclaration:e$l&&e$k&&e$W&&(e$t=e$Id.vertexDeclaration),e$t},e$q._attrReg=new RegExp("(\\w+)|([:,;])","g"),e$q._strings=[],e$q._readData=null,e$q._version=null,e$q._mesh=null,e$q._materials=null,e$q._subMeshes=null,e$q._materialMap=null,e$f(e$q,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e$q}(),e$Xd=function(){function e$G(){}return e$c(e$G,"laya.d3.loaders.LoadModelV03"),e$G.parse=function(e$d,e$t,e$l,e$k,e$W){e$G._mesh=e$l,e$G._subMeshes=e$k,e$G._materialMap=e$W,e$G._version=e$t,e$G._readData=e$d,e$G.READ_DATA(),e$G.READ_BLOCK(),e$G.READ_STRINGS();for(var e$i=0,e$A=e$G._BLOCK.count;e$i<e$A;e$i++){e$G._readData.pos=e$G._BLOCK.blockStarts[e$i];var e$B=e$G._readData.getUint16(),e$o=e$G._strings[e$B],e$I=e$G["READ_"+e$o];if(null==e$I)throw new Error("model file err,no this function:"+e$B+" "+e$o);e$I.call()}e$G._strings.length=0,e$G._readData=null,e$G._version=null,e$G._mesh=null,e$G._subMeshes=null,e$G._materialMap=null},e$G._readString=function(){return e$G._strings[e$G._readData.getUint16()]},e$G.READ_DATA=function(){e$G._DATA.offset=e$G._readData.getUint32(),e$G._DATA.size=e$G._readData.getUint32()},e$G.READ_BLOCK=function(){for(var e$d=e$G._BLOCK.count=e$G._readData.getUint16(),e$t=e$G._BLOCK.blockStarts=[],e$l=e$G._BLOCK.blockLengths=[],e$k=0;e$k<e$d;e$k++)e$t.push(e$G._readData.getUint32()),e$l.push(e$G._readData.getUint32())},e$G.READ_STRINGS=function(){var e$d=e$G._readData.getUint32(),e$t=e$G._readData.getUint16(),e$l=e$G._readData.pos;e$G._readData.pos=e$d+e$G._DATA.offset;for(var e$k=0;e$k<e$t;e$k++)e$G._strings[e$k]=e$G._readData.readUTFString();e$G._readData.pos=e$l},e$G.READ_MESH=function(){var e$d,e$t=e$G._readString(),e$l=e$G._readData.__getBuffer(),e$k=0,e$W=e$G._readData.getInt16(),e$i=e$G._DATA.offset;for(e$k=0;e$k<e$W;e$k++){var e$A,e$B=e$i+e$G._readData.getUint32(),e$o=e$G._readData.getUint32(),e$I=new Float32Array(e$l.slice(e$B,e$B+e$o)),e$b=e$G._readString();switch(e$G._version){case"LAYAMODEL:03":e$A=e$G._vertexDeclarationMap_Discard[e$b];break;case"LAYAMODEL:0301":e$A=e$G._vertexDeclarationMap[e$b];break;default:throw new Error("LoadModelV03: unknown version.")}if(!e$A)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+e$G._version+"  bufferAttribute="+e$b+"  name="+e$t+"  url="+(e$G._mesh?e$G._mesh.url:"null"));var e$f=e$Vt.create(e$A,4*e$I.length/e$A.vertexStride,35044,!0,e$G._mesh._url+"_"+e$k);e$f.setData(e$I),e$G._mesh._vertexBuffers.push(e$f)}var e$J=e$i+e$G._readData.getUint32(),e$c=e$G._readData.getUint32(),e$Y=new Uint16Array(e$l.slice(e$J,e$J+e$c)),e$w=e$yt.create("ushort",e$c/2,35044,!0,e$G._mesh._url);e$w.setData(e$Y),e$G._mesh._indexBuffer=e$w;var e$D=e$G._mesh._boneNames=[],e$z=e$G._readData.getUint16();for(e$D.length=e$z,e$k=0;e$k<e$z;e$k++)e$D[e$k]=e$G._strings[e$G._readData.getUint16()];e$G._readData.pos+=8;var e$e=e$G._readData.getUint32(),e$g=e$G._readData.getUint32(),e$H=new Float32Array(e$l.slice(e$i+e$e,e$i+e$e+e$g));for(e$G._mesh._inverseBindPoses=[],e$k=0,e$d=e$H.length;e$k<e$d;e$k+=16){var e$R=new e$dt(e$H[e$k+0],e$H[e$k+1],e$H[e$k+2],e$H[e$k+3],e$H[e$k+4],e$H[e$k+5],e$H[e$k+6],e$H[e$k+7],e$H[e$k+8],e$H[e$k+9],e$H[e$k+10],e$H[e$k+11],e$H[e$k+12],e$H[e$k+13],e$H[e$k+14],e$H[e$k+15]);e$G._mesh._inverseBindPoses.push(e$R)}return e$G._mesh._skinnedDatas=new Float32Array(16*e$H.length),!0},e$G.READ_SUBMESH=function(){var e$d=e$G._readData.__getBuffer(),e$t=new e$It(e$G._mesh),e$l=e$G._readData.getInt16(),e$k=e$G._readData.getUint32(),e$W=e$G._readData.getUint32();e$t._vertexBuffer=e$G._mesh._vertexBuffers[e$l],e$t._vertexStart=e$k,e$t._vertexCount=e$W;var e$i=e$G._readData.getUint32(),e$A=e$G._readData.getUint32(),e$B=e$G._mesh._indexBuffer;e$t._indexBuffer=e$B,e$t._indexStart=e$i,e$t._indexCount=e$A,e$t._indices=new Uint16Array(e$B.getData().buffer,2*e$i,e$A);var e$o=e$G._DATA.offset,e$I=e$t._subIndexBufferStart,e$b=e$t._subIndexBufferCount,e$f=e$t._boneIndicesList,e$J=e$G._readData.getUint16();e$I.length=e$J,e$b.length=e$J,e$f.length=e$J;for(var e$c=0;e$c<e$J;e$c++){e$I[e$c]=e$G._readData.getUint32(),e$b[e$c]=e$G._readData.getUint32();var e$Y=e$G._readData.getUint32(),e$w=e$G._readData.getUint32();e$f[e$c]=new Uint8Array(e$d.slice(e$o+e$Y,e$o+e$Y+e$w))}return e$G._subMeshes.push(e$t),!0},e$G._strings=[],e$G._readData=null,e$G._version=null,e$G._mesh=null,e$G._subMeshes=null,e$G._materialMap=null,e$f(e$G,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$gd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$zd.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":e$Nd.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$Kd.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$jd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$Ld.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":e$Gd.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$Vd.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":e$Qd.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":e$Jd.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":e$bd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":e$Rd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":e$Dd.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":e$nd.vertexDeclaration,"POSITION,NORMAL,UV,UV1":e$Sd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":e$pd.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":e$Ed.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":e$wd.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":e$Ud.vertexDeclaration,"POSITION,NORMAL,UV":e$rd.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":e$Yd.vertexDeclaration,"POSITION,NORMAL,COLOR":e$Id.vertexDeclaration,"POSITION,NORMAL,TANGENT":e$Td.vertexDeclaration,"POSITION,NORMAL":e$od.vertexDeclaration,"POSITION,UV":e$hd.vertexDeclaration,POSITION:e$Bd.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$ed.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$zd.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":e$Nd.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":e$Cd.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":e$jd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$qd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":e$Gd.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":e$yd.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":e$Qd.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":e$fd.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":e$bd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":e$Hd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":e$Dd.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":e$xd.vertexDeclaration,"POSITION,NORMAL,UV,UV1":e$Sd.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":e$$d.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":e$Ed.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":e$wd.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":e$Zd.vertexDeclaration,"POSITION,NORMAL,UV":e$rd.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":e$cd.vertexDeclaration,"POSITION,NORMAL,COLOR":e$Id.vertexDeclaration,"POSITION,NORMAL,TANGENT":e$Md.vertexDeclaration,"POSITION,NORMAL":e$od.vertexDeclaration,"POSITION,UV":e$hd.vertexDeclaration,POSITION:e$Bd.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e$G}(),e$md=function(){function e$B(){}return e$c(e$B,"laya.d3.loaders.MeshReader"),e$B.read=function(e$d,e$t,e$l,e$k,e$W){var e$i=new e$G(e$d);e$i.pos=0;var e$A=e$i.readUTFString();switch(e$A){case"LAYAMODEL:01":case"LAYASKINANI:01":e$B._readVersion01(e$i,e$A,e$t,e$l,e$k,e$W);break;case"LAYAMODEL:02":e$Pd.parse(e$i,e$A,e$t,e$l,e$k,e$W);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":e$Xd.parse(e$i,e$A,e$t,e$k,e$W);break;default:throw new Error("MeshReader: unknown mesh version.")}e$t._setSubMeshes(e$k)},e$B._readVersion01=function(e$d,e$t,e$l,e$k,e$W,e$i){new e$sd(e$d,e$t,e$l,e$k,e$W,e$i)},e$B}(),e$Od=function(){function e$d(e$d,e$t){this.min=null,this.max=null,this.min=e$d,this.max=e$t}e$c(e$d,"laya.d3.math.BoundBox");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.getCorners=function(e$d){e$d.length=8;var e$t=this.min.elements,e$l=this.max.elements,e$k=e$t[0],e$W=e$t[1],e$i=e$t[2],e$A=e$l[0],e$B=e$l[1],e$o=e$l[2];e$d[0]=new e$At(e$k,e$B,e$o),e$d[1]=new e$At(e$A,e$B,e$o),e$d[2]=new e$At(e$A,e$W,e$o),e$d[3]=new e$At(e$k,e$W,e$o),e$d[4]=new e$At(e$k,e$B,e$i),e$d[5]=new e$At(e$A,e$B,e$i),e$d[6]=new e$At(e$A,e$W,e$i),e$d[7]=new e$At(e$k,e$W,e$i)},e$t.toDefault=function(){this.min.toDefault(),this.max.toDefault()},e$t.cloneTo=function(e$d){var e$t=e$d;this.min.cloneTo(e$t.min),this.max.cloneTo(e$t.max)},e$t.clone=function(){var e$d=new this.constructor(new e$At,new e$At);return this.cloneTo(e$d),e$d},e$d.createfromPoints=function(e$d,e$t){if(null==e$d)throw new Error("points");var e$l=e$t.min,e$k=e$t.max,e$W=e$l.elements;e$W[0]=Number.MAX_VALUE,e$W[1]=Number.MAX_VALUE,e$W[2]=Number.MAX_VALUE;var e$i=e$k.elements;e$i[0]=-Number.MAX_VALUE,e$i[1]=-Number.MAX_VALUE,e$i[2]=-Number.MAX_VALUE;for(var e$A=0,e$B=e$d.length;e$A<e$B;++e$A)e$At.min(e$l,e$d[e$A],e$l),e$At.max(e$k,e$d[e$A],e$k)},e$d.merge=function(e$d,e$t,e$l){e$At.min(e$d.min,e$t.min,e$l.min),e$At.max(e$d.max,e$t.max,e$l.max)},e$d}(),e$Fd=function(){function e$I(e$d){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=e$d,this._near=new e$tt(new e$At),this._far=new e$tt(new e$At),this._left=new e$tt(new e$At),this._right=new e$tt(new e$At),this._top=new e$tt(new e$At),this._bottom=new e$tt(new e$At),e$I._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}e$c(e$I,"laya.d3.math.BoundFrustum");var e$d=e$I.prototype;return e$d.equalsBoundFrustum=function(e$d){return this._matrix.equalsOtherMatrix(e$d.matrix)},e$d.equalsObj=function(e$d){if(e$d instanceof laya.d3.math.BoundFrustum){var e$t=e$d;return this.equalsBoundFrustum(e$t)}return!1},e$d.getPlane=function(e$d){switch(e$d){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},e$d.getCorners=function(e$d){e$I._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(e$d[0]),e$I._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(e$d[1]),e$I._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(e$d[2]),e$I._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(e$d[3]),e$I._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(e$d[4]),e$I._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(e$d[5]),e$I._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(e$d[6]),e$I._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(e$d[7])},e$d.containsPoint=function(e$d){for(var e$t=e$tt.PlaneIntersectionType_Front,e$l=e$tt.PlaneIntersectionType_Front,e$k=0;e$k<6;e$k++){switch(e$k){case 0:e$l=Collision.intersectsPlaneAndPoint(this._near,e$d);break;case 1:e$l=Collision.intersectsPlaneAndPoint(this._far,e$d);break;case 2:e$l=Collision.intersectsPlaneAndPoint(this._left,e$d);break;case 3:e$l=Collision.intersectsPlaneAndPoint(this._right,e$d);break;case 4:e$l=Collision.intersectsPlaneAndPoint(this._top,e$d);break;case 5:e$l=Collision.intersectsPlaneAndPoint(this._bottom,e$d)}switch(e$l){case e$tt.PlaneIntersectionType_Back:return 0;case e$tt.PlaneIntersectionType_Intersecting:e$t=e$tt.PlaneIntersectionType_Intersecting}}switch(e$t){case e$tt.PlaneIntersectionType_Intersecting:return 2;default:return 1}},e$d.containsBoundBox=function(e$d){for(var e$t,e$l=e$I._tempV30,e$k=e$I._tempV31,e$W=1,e$i=0;e$i<6;e$i++){if(e$t=this.getPlane(e$i),this._getBoxToPlanePVertexNVertex(e$d,e$t.normal,e$l,e$k),Collision.intersectsPlaneAndPoint(e$t,e$l)===e$tt.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(e$t,e$k)===e$tt.PlaneIntersectionType_Back&&(e$W=2)}return e$W},e$d.containsBoundSphere=function(e$d){for(var e$t=e$tt.PlaneIntersectionType_Front,e$l=e$tt.PlaneIntersectionType_Front,e$k=0;e$k<6;e$k++){switch(e$k){case 0:e$l=Collision.intersectsPlaneAndSphere(this._near,e$d);break;case 1:e$l=Collision.intersectsPlaneAndSphere(this._far,e$d);break;case 2:e$l=Collision.intersectsPlaneAndSphere(this._left,e$d);break;case 3:e$l=Collision.intersectsPlaneAndSphere(this._right,e$d);break;case 4:e$l=Collision.intersectsPlaneAndSphere(this._top,e$d);break;case 5:e$l=Collision.intersectsPlaneAndSphere(this._bottom,e$d)}switch(e$l){case e$tt.PlaneIntersectionType_Back:return 0;case e$tt.PlaneIntersectionType_Intersecting:e$t=e$tt.PlaneIntersectionType_Intersecting}}switch(e$t){case e$tt.PlaneIntersectionType_Intersecting:return 2;default:return 1}},e$d._getBoxToPlanePVertexNVertex=function(e$d,e$t,e$l,e$k){var e$W=e$d.min,e$i=e$W.elements,e$A=e$d.max,e$B=e$A.elements,e$o=e$t.elements,e$I=e$o[0],e$b=e$o[1],e$f=e$o[2];e$W.cloneTo(e$l);var e$J=e$l.elements;0<=e$I&&(e$J[0]=e$B[0]),0<=e$b&&(e$J[1]=e$B[1]),0<=e$f&&(e$J[2]=e$B[2]),e$A.cloneTo(e$k);var e$c=e$k.elements;0<=e$I&&(e$c[0]=e$i[0]),0<=e$b&&(e$c[1]=e$i[1]),0<=e$f&&(e$c[2]=e$i[2])},e$Y(0,e$d,"top",function(){return this._top}),e$Y(0,e$d,"matrix",function(){return this._matrix},function(e$d){this._matrix=e$d,e$I._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),e$Y(0,e$d,"near",function(){return this._near}),e$Y(0,e$d,"far",function(){return this._far}),e$Y(0,e$d,"left",function(){return this._left}),e$Y(0,e$d,"right",function(){return this._right}),e$Y(0,e$d,"bottom",function(){return this._bottom}),e$I._getPlanesFromMatrix=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){var e$B=e$d.elements,e$o=e$B[0],e$I=e$B[1],e$b=e$B[2],e$f=e$B[3],e$J=e$B[4],e$c=e$B[5],e$Y=e$B[6],e$w=e$B[7],e$D=e$B[8],e$z=e$B[9],e$e=e$B[10],e$g=e$B[11],e$H=e$B[12],e$R=e$B[13],e$G=e$B[14],e$q=e$B[15],e$L=e$t.normal.elements;e$L[0]=e$f+e$b,e$L[1]=e$w+e$Y,e$L[2]=e$g+e$e,e$t.distance=e$q+e$G,e$t.normalize();var e$$=e$l.normal.elements;e$$[0]=e$f-e$b,e$$[1]=e$w-e$Y,e$$[2]=e$g-e$e,e$l.distance=e$q-e$G,e$l.normalize();var e$p=e$k.normal.elements;e$p[0]=e$f+e$o,e$p[1]=e$w+e$J,e$p[2]=e$g+e$D,e$k.distance=e$q+e$H,e$k.normalize();var e$M=e$W.normal.elements;e$M[0]=e$f-e$o,e$M[1]=e$w-e$J,e$M[2]=e$g-e$D,e$W.distance=e$q-e$H,e$W.normalize();var e$T=e$i.normal.elements;e$T[0]=e$f-e$I,e$T[1]=e$w-e$c,e$T[2]=e$g-e$z,e$i.distance=e$q-e$R,e$i.normalize();var e$r=e$A.normal.elements;e$r[0]=e$f+e$I,e$r[1]=e$w+e$c,e$r[2]=e$g+e$z,e$A.distance=e$q+e$R,e$A.normalize()},e$I._get3PlaneInterPoint=function(e$d,e$t,e$l){var e$k=e$d.normal,e$W=e$t.normal,e$i=e$l.normal;e$At.cross(e$W,e$i,e$I._tempV30),e$At.cross(e$i,e$k,e$I._tempV31),e$At.cross(e$k,e$W,e$I._tempV32);var e$A=e$At.dot(e$k,e$I._tempV30),e$B=e$At.dot(e$W,e$I._tempV31),e$o=e$At.dot(e$i,e$I._tempV32);return e$At.scale(e$I._tempV30,-e$d.distance/e$A,e$I._tempV33),e$At.scale(e$I._tempV31,-e$t.distance/e$B,e$I._tempV34),e$At.scale(e$I._tempV32,-e$l.distance/e$o,e$I._tempV35),e$At.add(e$I._tempV33,e$I._tempV34,e$I._tempV36),e$At.add(e$I._tempV35,e$I._tempV36,e$I._tempV37),e$I._tempV37},e$f(e$I,["_tempV30",function(){return this._tempV30=new e$At},"_tempV31",function(){return this._tempV31=new e$At},"_tempV32",function(){return this._tempV32=new e$At},"_tempV33",function(){return this._tempV33=new e$At},"_tempV34",function(){return this._tempV34=new e$At},"_tempV35",function(){return this._tempV35=new e$At},"_tempV36",function(){return this._tempV36=new e$At},"_tempV37",function(){return this._tempV37=new e$At}]),e$I}(),e$ad=function(){function e$b(e$d,e$t){this.center=null,this.radius=NaN,this.center=e$d,this.radius=e$t}e$c(e$b,"laya.d3.math.BoundSphere");var e$d=e$b.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.toDefault=function(){this.center.toDefault(),this.radius=0},e$d.intersectsRayDistance=function(e$d){return Collision.intersectsRayAndSphereRD(e$d,this)},e$d.intersectsRayPoint=function(e$d,e$t){return Collision.intersectsRayAndSphereRP(e$d,this,e$t)},e$d.cloneTo=function(e$d){var e$t=e$d;this.center.cloneTo(e$t.center),e$t.radius=this.radius},e$d.clone=function(){var e$d=new this.constructor(new e$At,new e$At);return this.cloneTo(e$d),e$d},e$b.createFromSubPoints=function(e$d,e$t,e$l,e$k){if(null==e$d)throw new Error("points");if(e$t<0||e$t>=e$d.length)throw new Error("start"+e$t+"Must be in the range [0, "+(e$d.length-1)+"]");if(e$l<0||e$t+e$l>e$d.length)throw new Error("count"+e$l+"Must be in the range <= "+e$d.length+"}");var e$W=e$t+e$l,e$i=e$b._tempVector3;e$i.elements[0]=0,e$i.elements[1]=0,e$i.elements[2]=0;for(var e$A=e$t;e$A<e$W;++e$A)e$At.add(e$d[e$A],e$i,e$i);var e$B=e$k.center;e$At.scale(e$i,1/e$l,e$B);var e$o=0;for(e$A=e$t;e$A<e$W;++e$A){var e$I=e$At.distanceSquared(e$B,e$d[e$A]);e$o<e$I&&(e$o=e$I)}e$k.radius=Math.sqrt(e$o)},e$b.createfromPoints=function(e$d,e$t){if(null==e$d)throw new Error("points");e$b.createFromSubPoints(e$d,0,e$d.length,e$t)},e$f(e$b,["_tempVector3",function(){return this._tempVector3=new e$At}]),e$b}(),e$_d=(function(){function e$d(){}e$c(e$d,"laya.d3.math.ContainmentType"),e$d.Disjoint=0,e$d.Contains=1,e$d.Intersects=2}(),function(){function e$l(){}return e$c(e$l,"laya.d3.math.MathUtils3D"),e$l.isZero=function(e$d){return Math.abs(e$d)<e$l.zeroTolerance},e$l.nearEqual=function(e$d,e$t){return!!e$l.isZero(e$d-e$t)},e$l.fastInvSqrt=function(e$d){return e$l.isZero(e$d)?e$d:1/Math.sqrt(e$d)},e$f(e$l,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),e$l}()),e$vd=function(){function e$o(){var e$d=this.elements=new Float32Array(9);e$d[0]=1,e$d[1]=0,e$d[2]=0,e$d[3]=0,e$d[4]=1,e$d[5]=0,e$d[6]=0,e$d[7]=0,e$d[8]=1}e$c(e$o,"laya.d3.math.Matrix3x3");var e$d=e$o.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.determinant=function(){var e$d=this.elements,e$t=e$d[0],e$l=e$d[1],e$k=e$d[2],e$W=e$d[3],e$i=e$d[4],e$A=e$d[5],e$B=e$d[6],e$o=e$d[7],e$I=e$d[8];return e$t*(e$I*e$i-e$A*e$o)+e$l*(-e$I*e$W+e$A*e$B)+e$k*(e$o*e$W-e$i*e$B)},e$d.translate=function(e$d,e$t){var e$l=e$t.elements,e$k=this.elements,e$W=e$d.elements,e$i=e$k[0],e$A=e$k[1],e$B=e$k[2],e$o=e$k[3],e$I=e$k[4],e$b=e$k[5],e$f=e$k[6],e$J=e$k[7],e$c=e$k[8],e$Y=e$W[0],e$w=e$W[1];e$l[0]=e$i,e$l[1]=e$A,e$l[2]=e$B,e$l[3]=e$o,e$l[4]=e$I,e$l[5]=e$b,e$l[6]=e$Y*e$i+e$w*e$o+e$f,e$l[7]=e$Y*e$A+e$w*e$I+e$J,e$l[8]=e$Y*e$B+e$w*e$b+e$c},e$d.rotate=function(e$d,e$t){var e$l=e$t.elements,e$k=this.elements,e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$k[3],e$o=e$k[4],e$I=e$k[5],e$b=e$k[6],e$f=e$k[7],e$J=e$k[8],e$c=Math.sin(e$d),e$Y=Math.cos(e$d);e$l[0]=e$Y*e$W+e$c*e$B,e$l[1]=e$Y*e$i+e$c*e$o,e$l[2]=e$Y*e$A+e$c*e$I,e$l[3]=e$Y*e$B-e$c*e$W,e$l[4]=e$Y*e$o-e$c*e$i,e$l[5]=e$Y*e$I-e$c*e$A,e$l[6]=e$b,e$l[7]=e$f,e$l[8]=e$J},e$d.scale=function(e$d,e$t){var e$l=e$t.elements,e$k=this.elements,e$W=e$d.elements,e$i=e$W[0],e$A=e$W[1];e$l[0]=e$i*e$k[0],e$l[1]=e$i*e$k[1],e$l[2]=e$i*e$k[2],e$l[3]=e$A*e$k[3],e$l[4]=e$A*e$k[4],e$l[5]=e$A*e$k[5],e$l[6]=e$k[6],e$l[7]=e$k[7],e$l[8]=e$k[8]},e$d.invert=function(e$d){var e$t=e$d.elements,e$l=this.elements,e$k=e$l[0],e$W=e$l[1],e$i=e$l[2],e$A=e$l[3],e$B=e$l[4],e$o=e$l[5],e$I=e$l[6],e$b=e$l[7],e$f=e$l[8],e$J=e$f*e$B-e$o*e$b,e$c=-e$f*e$A+e$o*e$I,e$Y=e$b*e$A-e$B*e$I,e$w=e$k*e$J+e$W*e$c+e$i*e$Y;e$w||(e$d=null),e$w=1/e$w,e$t[0]=e$J*e$w,e$t[1]=(-e$f*e$W+e$i*e$b)*e$w,e$t[2]=(e$o*e$W-e$i*e$B)*e$w,e$t[3]=e$c*e$w,e$t[4]=(e$f*e$k-e$i*e$I)*e$w,e$t[5]=(-e$o*e$k+e$i*e$A)*e$w,e$t[6]=e$Y*e$w,e$t[7]=(-e$b*e$k+e$W*e$I)*e$w,e$t[8]=(e$B*e$k-e$W*e$A)*e$w},e$d.transpose=function(e$d){var e$t=e$d.elements,e$l=this.elements;if(e$d===this){var e$k=e$l[1],e$W=e$l[2],e$i=e$l[5];e$t[1]=e$l[3],e$t[2]=e$l[6],e$t[3]=e$k,e$t[5]=e$l[7],e$t[6]=e$W,e$t[7]=e$i}else e$t[0]=e$l[0],e$t[1]=e$l[3],e$t[2]=e$l[6],e$t[3]=e$l[1],e$t[4]=e$l[4],e$t[5]=e$l[7],e$t[6]=e$l[2],e$t[7]=e$l[5],e$t[8]=e$l[8]},e$d.identity=function(){var e$d=this.elements;e$d[0]=1,e$d[1]=0,e$d[2]=0,e$d[3]=0,e$d[4]=1,e$d[5]=0,e$d[6]=0,e$d[7]=0,e$d[8]=1},e$d.cloneTo=function(e$d){var e$t,e$l,e$k;if((e$l=this.elements)!==(e$k=e$d.elements))for(e$t=0;e$t<9;++e$t)e$k[e$t]=e$l[e$t]},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$o.createFromTranslation=function(e$d,e$t){e$t.elements;var e$l=e$d.elements;e$t[0]=1,e$t[1]=0,e$t[2]=0,e$t[3]=0,e$t[4]=1,e$t[5]=0,e$t[6]=e$l[0],e$t[7]=e$l[1],e$t[8]=1},e$o.createFromRotation=function(e$d,e$t){var e$l=e$t.elements,e$k=Math.sin(e$d),e$W=Math.cos(e$d);e$l[0]=e$W,e$l[1]=e$k,e$l[2]=0,e$l[3]=-e$k,e$l[4]=e$W,e$l[5]=0,e$l[6]=0,e$l[7]=0,e$l[8]=1},e$o.createFromScaling=function(e$d,e$t){var e$l=e$t.elements,e$k=e$d.elements;e$l[0]=e$k[0],e$l[1]=0,e$l[2]=0,e$l[3]=0,e$l[4]=e$k[1],e$l[5]=0,e$l[6]=0,e$l[7]=0,e$l[8]=1},e$o.createFromMatrix4x4=function(e$d,e$t){e$t[0]=e$d[0],e$t[1]=e$d[1],e$t[2]=e$d[2],e$t[3]=e$d[4],e$t[4]=e$d[5],e$t[5]=e$d[6],e$t[6]=e$d[8],e$t[7]=e$d[9],e$t[8]=e$d[10]},e$o.multiply=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements,e$A=e$W[0],e$B=e$W[1],e$o=e$W[2],e$I=e$W[3],e$b=e$W[4],e$f=e$W[5],e$J=e$W[6],e$c=e$W[7],e$Y=e$W[8],e$w=e$i[0],e$D=e$i[1],e$z=e$i[2],e$e=e$i[3],e$g=e$i[4],e$H=e$i[5],e$R=e$i[6],e$G=e$i[7],e$q=e$i[8];e$k[0]=e$w*e$A+e$D*e$I+e$z*e$J,e$k[1]=e$w*e$B+e$D*e$b+e$z*e$c,e$k[2]=e$w*e$o+e$D*e$f+e$z*e$Y,e$k[3]=e$e*e$A+e$g*e$I+e$H*e$J,e$k[4]=e$e*e$B+e$g*e$b+e$H*e$c,e$k[5]=e$e*e$o+e$g*e$f+e$H*e$Y,e$k[6]=e$R*e$A+e$G*e$I+e$q*e$J,e$k[7]=e$R*e$B+e$G*e$b+e$q*e$c,e$k[8]=e$R*e$o+e$G*e$f+e$q*e$Y},e$o.lookAt=function(e$d,e$t,e$l,e$k){e$At.subtract(e$d,e$t,e$o._tempV30),e$At.normalize(e$o._tempV30,e$o._tempV30),e$At.cross(e$l,e$o._tempV30,e$o._tempV31),e$At.normalize(e$o._tempV31,e$o._tempV31),e$At.cross(e$o._tempV30,e$o._tempV31,e$o._tempV32);var e$W=e$o._tempV30.elements,e$i=e$o._tempV31.elements,e$A=e$o._tempV32.elements,e$B=e$k.elements;e$B[0]=e$i[0],e$B[3]=e$i[1],e$B[6]=e$i[2],e$B[1]=e$A[0],e$B[4]=e$A[1],e$B[7]=e$A[2],e$B[2]=e$W[0],e$B[5]=e$W[1],e$B[8]=e$W[2]},e$o.DEFAULT=new e$o,e$f(e$o,["_tempV30",function(){return this._tempV30=new e$At},"_tempV31",function(){return this._tempV31=new e$At},"_tempV32",function(){return this._tempV32=new e$At}]),e$o}(),e$dt=function(){function e$$(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f,e$J,e$c,e$Y,e$w){void 0===e$d&&(e$d=1),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=1),void 0===e$A&&(e$A=0),void 0===e$B&&(e$B=0),void 0===e$o&&(e$o=0),void 0===e$I&&(e$I=0),void 0===e$b&&(e$b=1),void 0===e$f&&(e$f=0),void 0===e$J&&(e$J=0),void 0===e$c&&(e$c=0),void 0===e$Y&&(e$Y=0),void 0===e$w&&(e$w=1);var e$D=this.elements=new Float32Array(16);e$D[0]=e$d,e$D[1]=e$t,e$D[2]=e$l,e$D[3]=e$k,e$D[4]=e$W,e$D[5]=e$i,e$D[6]=e$A,e$D[7]=e$B,e$D[8]=e$o,e$D[9]=e$I,e$D[10]=e$b,e$D[11]=e$f,e$D[12]=e$J,e$D[13]=e$c,e$D[14]=e$Y,e$D[15]=e$w}e$c(e$$,"laya.d3.math.Matrix4x4");var e$d=e$$.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.getElementByRowColumn=function(e$d,e$t){if(e$d<0||3<e$d)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(e$t<0||3<e$t)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*e$d+e$t]},e$d.setElementByRowColumn=function(e$d,e$t,e$l){if(e$d<0||3<e$d)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(e$t<0||3<e$t)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*e$d+e$t]=e$l},e$d.equalsOtherMatrix=function(e$d){var e$t=this.elements,e$l=e$d.elements;return e$_d.nearEqual(e$t[0],e$l[0])&&e$_d.nearEqual(e$t[1],e$l[1])&&e$_d.nearEqual(e$t[2],e$l[2])&&e$_d.nearEqual(e$t[3],e$l[3])&&e$_d.nearEqual(e$t[4],e$l[4])&&e$_d.nearEqual(e$t[5],e$l[5])&&e$_d.nearEqual(e$t[6],e$l[6])&&e$_d.nearEqual(e$t[7],e$l[7])&&e$_d.nearEqual(e$t[8],e$l[8])&&e$_d.nearEqual(e$t[9],e$l[9])&&e$_d.nearEqual(e$t[10],e$l[10])&&e$_d.nearEqual(e$t[11],e$l[11])&&e$_d.nearEqual(e$t[12],e$l[12])&&e$_d.nearEqual(e$t[13],e$l[13])&&e$_d.nearEqual(e$t[14],e$l[14])&&e$_d.nearEqual(e$t[15],e$l[15])},e$d.decomposeTransRotScale=function(e$d,e$t,e$l){var e$k=e$$._tempMatrix4x4;return this.decomposeTransRotMatScale(e$d,e$k,e$l)?(e$lt.createFromMatrix4x4(e$k,e$t),!0):(e$t.identity(),!1)},e$d.decomposeTransRotMatScale=function(e$d,e$t,e$l){var e$k=this.elements,e$W=e$d.elements,e$i=e$t.elements,e$A=e$l.elements;e$W[0]=e$k[12],e$W[1]=e$k[13],e$W[2]=e$k[14];var e$B=e$k[0],e$o=e$k[1],e$I=e$k[2],e$b=e$k[4],e$f=e$k[5],e$J=e$k[6],e$c=e$k[8],e$Y=e$k[9],e$w=e$k[10],e$D=e$A[0]=Math.sqrt(e$B*e$B+e$o*e$o+e$I*e$I),e$z=e$A[1]=Math.sqrt(e$b*e$b+e$f*e$f+e$J*e$J),e$e=e$A[2]=Math.sqrt(e$c*e$c+e$Y*e$Y+e$w*e$w);if(e$_d.isZero(e$D)||e$_d.isZero(e$z)||e$_d.isZero(e$e))return e$i[1]=e$i[2]=e$i[3]=e$i[4]=e$i[6]=e$i[7]=e$i[8]=e$i[9]=e$i[11]=e$i[12]=e$i[13]=e$i[14]=0,e$i[0]=e$i[5]=e$i[10]=e$i[15]=1,!1;var e$g=e$$._tempVector0,e$H=e$g.elements;e$H[0]=e$c/e$e,e$H[1]=e$Y/e$e,e$H[2]=e$w/e$e;var e$R=e$$._tempVector1,e$G=e$R.elements;e$G[0]=e$B/e$D,e$G[1]=e$o/e$D,e$G[2]=e$I/e$D;var e$q=e$$._tempVector2;e$At.cross(e$g,e$R,e$q);var e$L=e$$._tempVector1;return e$At.cross(e$q,e$g,e$L),e$i[3]=e$i[7]=e$i[11]=e$i[12]=e$i[13]=e$i[14]=0,e$i[15]=1,e$i[0]=e$L.x,e$i[1]=e$L.y,e$i[2]=e$L.z,e$i[4]=e$q.x,e$i[5]=e$q.y,e$i[6]=e$q.z,e$i[8]=e$g.x,e$i[9]=e$g.y,e$i[10]=e$g.z,e$i[0]*e$B+e$i[1]*e$o+e$i[2]*e$I<0&&(e$A[0]=-e$D),e$i[4]*e$b+e$i[5]*e$f+e$i[6]*e$J<0&&(e$A[1]=-e$z),e$i[8]*e$c+e$i[9]*e$Y+e$i[10]*e$w<0&&(e$A[2]=-e$e),!0},e$d.decomposeYawPitchRoll=function(e$d){var e$t=e$d.elements,e$l=Math.asin(-this.elements[9]);e$t[1]=e$l,Math.cos(e$l)>e$_d.zeroTolerance?(e$t[2]=Math.atan2(this.elements[1],this.elements[5]),e$t[0]=Math.atan2(this.elements[8],this.elements[10])):(e$t[2]=Math.atan2(-this.elements[4],this.elements[0]),e$t[0]=0)},e$d.normalize=function(){var e$d=this.elements,e$t=e$d[0],e$l=e$d[1],e$k=e$d[2],e$W=Math.sqrt(e$t*e$t+e$l*e$l+e$k*e$k);if(!e$W)return e$d[0]=0,e$d[1]=0,void(e$d[2]=0);1!=e$W&&(e$W=1/e$W,e$d[0]=e$t*e$W,e$d[1]=e$l*e$W,e$d[2]=e$k*e$W)},e$d.transpose=function(){var e$d,e$t;return e$t=(e$d=this.elements)[1],e$d[1]=e$d[4],e$d[4]=e$t,e$t=e$d[2],e$d[2]=e$d[8],e$d[8]=e$t,e$t=e$d[3],e$d[3]=e$d[12],e$d[12]=e$t,e$t=e$d[6],e$d[6]=e$d[9],e$d[9]=e$t,e$t=e$d[7],e$d[7]=e$d[13],e$d[13]=e$t,e$t=e$d[11],e$d[11]=e$d[14],e$d[14]=e$t,this},e$d.invert=function(e$d){var e$t=this.elements,e$l=e$d.elements,e$k=e$t[0],e$W=e$t[1],e$i=e$t[2],e$A=e$t[3],e$B=e$t[4],e$o=e$t[5],e$I=e$t[6],e$b=e$t[7],e$f=e$t[8],e$J=e$t[9],e$c=e$t[10],e$Y=e$t[11],e$w=e$t[12],e$D=e$t[13],e$z=e$t[14],e$e=e$t[15],e$g=e$k*e$o-e$W*e$B,e$H=e$k*e$I-e$i*e$B,e$R=e$k*e$b-e$A*e$B,e$G=e$W*e$I-e$i*e$o,e$q=e$W*e$b-e$A*e$o,e$L=e$i*e$b-e$A*e$I,e$$=e$f*e$D-e$J*e$w,e$p=e$f*e$z-e$c*e$w,e$M=e$f*e$e-e$Y*e$w,e$T=e$J*e$z-e$c*e$D,e$r=e$J*e$e-e$Y*e$D,e$S=e$c*e$e-e$Y*e$z,e$j=e$g*e$S-e$H*e$r+e$R*e$T+e$G*e$M-e$q*e$p+e$L*e$$;0!==Math.abs(e$j)&&(e$j=1/e$j,e$l[0]=(e$o*e$S-e$I*e$r+e$b*e$T)*e$j,e$l[1]=(e$i*e$r-e$W*e$S-e$A*e$T)*e$j,e$l[2]=(e$D*e$L-e$z*e$q+e$e*e$G)*e$j,e$l[3]=(e$c*e$q-e$J*e$L-e$Y*e$G)*e$j,e$l[4]=(e$I*e$M-e$B*e$S-e$b*e$p)*e$j,e$l[5]=(e$k*e$S-e$i*e$M+e$A*e$p)*e$j,e$l[6]=(e$z*e$R-e$w*e$L-e$e*e$H)*e$j,e$l[7]=(e$f*e$L-e$c*e$R+e$Y*e$H)*e$j,e$l[8]=(e$B*e$r-e$o*e$M+e$b*e$$)*e$j,e$l[9]=(e$W*e$M-e$k*e$r-e$A*e$$)*e$j,e$l[10]=(e$w*e$q-e$D*e$R+e$e*e$g)*e$j,e$l[11]=(e$J*e$R-e$f*e$q-e$Y*e$g)*e$j,e$l[12]=(e$o*e$p-e$B*e$T-e$I*e$$)*e$j,e$l[13]=(e$k*e$T-e$W*e$p+e$i*e$$)*e$j,e$l[14]=(e$D*e$H-e$w*e$G-e$z*e$g)*e$j,e$l[15]=(e$f*e$G-e$J*e$H+e$c*e$g)*e$j)},e$d.identity=function(){var e$d=this.elements;e$d[1]=e$d[2]=e$d[3]=e$d[4]=e$d[6]=e$d[7]=e$d[8]=e$d[9]=e$d[11]=e$d[12]=e$d[13]=e$d[14]=0,e$d[0]=e$d[5]=e$d[10]=e$d[15]=1},e$d.cloneTo=function(e$d){var e$t,e$l,e$k;if((e$l=this.elements)!==(e$k=e$d.elements))for(e$t=0;e$t<16;++e$t)e$k[e$t]=e$l[e$t]},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$d.getTranslationVector=function(e$d){var e$t=this.elements,e$l=e$d.elements;e$l[0]=e$t[12],e$l[1]=e$t[13],e$l[2]=e$t[14]},e$d.setTranslationVector=function(e$d){var e$t=this.elements,e$l=e$d.elements;e$t[12]=e$l[0],e$t[13]=e$l[1],e$t[14]=e$l[2]},e$d.getForward=function(e$d){var e$t=this.elements,e$l=e$d.elements;e$l[0]=-e$t[8],e$l[1]=-e$t[9],e$l[2]=-e$t[10]},e$d.setForward=function(e$d){var e$t=this.elements,e$l=e$d.elements;e$t[8]=-e$l[0],e$t[9]=-e$l[1],e$t[10]=-e$l[2]},e$$.createRotationX=function(e$d,e$t){var e$l=e$t.elements,e$k=Math.sin(e$d),e$W=Math.cos(e$d);e$l[1]=e$l[2]=e$l[3]=e$l[4]=e$l[7]=e$l[8]=e$l[11]=e$l[12]=e$l[13]=e$l[14]=0,e$l[0]=e$l[15]=1,e$l[5]=e$l[10]=e$W,e$l[6]=e$k,e$l[9]=-e$k},e$$.createRotationY=function(e$d,e$t){var e$l=e$t.elements,e$k=Math.sin(e$d),e$W=Math.cos(e$d);e$l[1]=e$l[3]=e$l[4]=e$l[6]=e$l[7]=e$l[9]=e$l[11]=e$l[12]=e$l[13]=e$l[14]=0,e$l[5]=e$l[15]=1,e$l[0]=e$l[10]=e$W,e$l[2]=-e$k,e$l[8]=e$k},e$$.createRotationZ=function(e$d,e$t){var e$l=e$t.elements,e$k=Math.sin(e$d),e$W=Math.cos(e$d);e$l[2]=e$l[3]=e$l[6]=e$l[7]=e$l[8]=e$l[9]=e$l[11]=e$l[12]=e$l[13]=e$l[14]=0,e$l[10]=e$l[15]=1,e$l[0]=e$l[5]=e$W,e$l[1]=e$k,e$l[4]=-e$k},e$$.createRotationYawPitchRoll=function(e$d,e$t,e$l,e$k){e$lt.createFromYawPitchRoll(e$d,e$t,e$l,e$$._tempQuaternion),e$$.createRotationQuaternion(e$$._tempQuaternion,e$k)},e$$.createRotationAxis=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=Math.cos(e$t),e$o=Math.sin(e$t),e$I=e$W*e$W,e$b=e$i*e$i,e$f=e$A*e$A,e$J=e$W*e$i,e$c=e$W*e$A,e$Y=e$i*e$A,e$w=e$l.elements;e$w[3]=e$w[7]=e$w[11]=e$w[12]=e$w[13]=e$w[14]=0,e$w[15]=1,e$w[0]=e$I+e$B*(1-e$I),e$w[1]=e$J-e$B*e$J+e$o*e$A,e$w[2]=e$c-e$B*e$c-e$o*e$i,e$w[4]=e$J-e$B*e$J-e$o*e$A,e$w[5]=e$b+e$B*(1-e$b),e$w[6]=e$Y-e$B*e$Y+e$o*e$W,e$w[8]=e$c-e$B*e$c+e$o*e$i,e$w[9]=e$Y-e$B*e$Y-e$o*e$W,e$w[10]=e$f+e$B*(1-e$f)},e$$.createRotationQuaternion=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$l[0],e$i=e$l[1],e$A=e$l[2],e$B=e$l[3],e$o=e$W*e$W,e$I=e$i*e$i,e$b=e$A*e$A,e$f=e$W*e$i,e$J=e$A*e$B,e$c=e$A*e$W,e$Y=e$i*e$B,e$w=e$i*e$A,e$D=e$W*e$B;e$k[3]=e$k[7]=e$k[11]=e$k[12]=e$k[13]=e$k[14]=0,e$k[15]=1,e$k[0]=1-2*(e$I+e$b),e$k[1]=2*(e$f+e$J),e$k[2]=2*(e$c-e$Y),e$k[4]=2*(e$f-e$J),e$k[5]=1-2*(e$b+e$o),e$k[6]=2*(e$w+e$D),e$k[8]=2*(e$c+e$Y),e$k[9]=2*(e$w-e$D),e$k[10]=1-2*(e$I+e$o)},e$$.createTranslate=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;e$k[4]=e$k[8]=e$k[1]=e$k[9]=e$k[2]=e$k[6]=e$k[3]=e$k[7]=e$k[11]=0,e$k[0]=e$k[5]=e$k[10]=e$k[15]=1,e$k[12]=e$l[0],e$k[13]=e$l[1],e$k[14]=e$l[2]},e$$.createScaling=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;e$k[0]=e$l[0],e$k[5]=e$l[1],e$k[10]=e$l[2],e$k[1]=e$k[4]=e$k[8]=e$k[12]=e$k[9]=e$k[13]=e$k[2]=e$k[6]=e$k[14]=e$k[3]=e$k[7]=e$k[11]=0,e$k[15]=1},e$$.multiply=function(e$d,e$t,e$l){var e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b;for(e$W=e$l.elements,e$i=e$d.elements,e$W===(e$A=e$t.elements)&&(e$A=e$A.slice()),e$k=0;e$k<4;e$k++)e$B=e$i[e$k],e$o=e$i[e$k+4],e$I=e$i[e$k+8],e$b=e$i[e$k+12],e$W[e$k]=e$B*e$A[0]+e$o*e$A[1]+e$I*e$A[2]+e$b*e$A[3],e$W[e$k+4]=e$B*e$A[4]+e$o*e$A[5]+e$I*e$A[6]+e$b*e$A[7],e$W[e$k+8]=e$B*e$A[8]+e$o*e$A[9]+e$I*e$A[10]+e$b*e$A[11],e$W[e$k+12]=e$B*e$A[12]+e$o*e$A[13]+e$I*e$A[14]+e$b*e$A[15]},e$$.createFromQuaternion=function(e$d,e$t){var e$l=e$t.elements,e$k=e$d.elements,e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$k[3],e$o=e$W+e$W,e$I=e$i+e$i,e$b=e$A+e$A,e$f=e$W*e$o,e$J=e$i*e$o,e$c=e$i*e$I,e$Y=e$A*e$o,e$w=e$A*e$I,e$D=e$A*e$b,e$z=e$B*e$o,e$e=e$B*e$I,e$g=e$B*e$b;e$l[0]=1-e$c-e$D,e$l[1]=e$J+e$g,e$l[2]=e$Y-e$e,e$l[3]=0,e$l[4]=e$J-e$g,e$l[5]=1-e$f-e$D,e$l[6]=e$w+e$z,e$l[7]=0,e$l[8]=e$Y+e$e,e$l[9]=e$w-e$z,e$l[10]=1-e$f-e$c,e$l[11]=0,e$l[12]=0,e$l[13]=0,e$l[14]=0,e$l[15]=1},e$$.createAffineTransformation=function(e$d,e$t,e$l,e$k){var e$W=e$d.elements,e$i=e$t.elements,e$A=e$l.elements,e$B=e$k.elements,e$o=e$i[0],e$I=e$i[1],e$b=e$i[2],e$f=e$i[3],e$J=e$o+e$o,e$c=e$I+e$I,e$Y=e$b+e$b,e$w=e$o*e$J,e$D=e$o*e$c,e$z=e$o*e$Y,e$e=e$I*e$c,e$g=e$I*e$Y,e$H=e$b*e$Y,e$R=e$f*e$J,e$G=e$f*e$c,e$q=e$f*e$Y,e$L=e$A[0],e$$=e$A[1],e$p=e$A[2];e$B[0]=(1-(e$e+e$H))*e$L,e$B[1]=(e$D+e$q)*e$L,e$B[2]=(e$z-e$G)*e$L,e$B[3]=0,e$B[4]=(e$D-e$q)*e$$,e$B[5]=(1-(e$w+e$H))*e$$,e$B[6]=(e$g+e$R)*e$$,e$B[7]=0,e$B[8]=(e$z+e$G)*e$p,e$B[9]=(e$g-e$R)*e$p,e$B[10]=(1-(e$w+e$e))*e$p,e$B[11]=0,e$B[12]=e$W[0],e$B[13]=e$W[1],e$B[14]=e$W[2],e$B[15]=1},e$$.createLookAt=function(e$d,e$t,e$l,e$k){var e$W=e$k.elements,e$i=e$$._tempVector0,e$A=e$$._tempVector1,e$B=e$$._tempVector2;e$At.subtract(e$d,e$t,e$B),e$At.normalize(e$B,e$B),e$At.cross(e$l,e$B,e$i),e$At.normalize(e$i,e$i),e$At.cross(e$B,e$i,e$A),e$k.identity(),e$W[0]=e$i.x,e$W[4]=e$i.y,e$W[8]=e$i.z,e$W[1]=e$A.x,e$W[5]=e$A.y,e$W[9]=e$A.z,e$W[2]=e$B.x,e$W[6]=e$B.y,e$W[10]=e$B.z,e$W[12]=-e$At.dot(e$i,e$d),e$W[13]=-e$At.dot(e$A,e$d),e$W[14]=-e$At.dot(e$B,e$d)},e$$.createPerspective=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$W.elements,e$A=1/Math.tan(e$d/2),e$B=1/(e$l-e$k);e$i[0]=e$A/e$t,e$i[5]=e$A,e$i[10]=(e$k+e$l)*e$B,e$i[11]=-1,e$i[14]=2*e$k*e$l*e$B,e$i[1]=e$i[2]=e$i[3]=e$i[4]=e$i[6]=e$i[7]=e$i[8]=e$i[9]=e$i[12]=e$i[13]=e$i[15]=0},e$$.createOrthoOffCenterRH=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){var e$B=e$A.elements,e$o=1/(e$d-e$t),e$I=1/(e$l-e$k),e$b=1/(e$W-e$i);e$B[1]=e$B[2]=e$B[3]=e$B[4]=e$B[6]=e$B[7]=e$B[8]=e$B[9]=e$B[11]=0,e$B[15]=1,e$B[0]=-2*e$o,e$B[5]=-2*e$I,e$B[10]=2*e$b,e$B[12]=(e$d+e$t)*e$o,e$B[13]=(e$k+e$l)*e$I,e$B[14]=(e$i+e$W)*e$b},e$$.translation=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;e$k[0]=e$k[5]=e$k[10]=e$k[15]=1,e$k[12]=e$l[0],e$k[13]=e$l[1],e$k[14]=e$l[2]},e$f(e$$,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new e$$},"_tempVector0",function(){return this._tempVector0=new e$At},"_tempVector1",function(){return this._tempVector1=new e$At},"_tempVector2",function(){return this._tempVector2=new e$At},"_tempQuaternion",function(){return this._tempQuaternion=new e$lt},"DEFAULT",function(){return this.DEFAULT=new e$$},"ZERO",function(){return this.ZERO=new e$$(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),e$$}(),e$tt=(function(){function e$g(e$d,e$t){this.extents=null,this.transformation=null,this.extents=e$d,this.transformation=e$t}e$c(e$g,"laya.d3.math.OrientedBoundBox");var e$d=e$g.prototype;e$d.getCorners=function(e$d){var e$t=e$g._tempV30.elements,e$l=e$g._tempV31.elements,e$k=e$g._tempV32.elements,e$W=this.extents.elements;e$t[0]=e$W[0],e$t[1]=e$t[2]=0,e$l[1]=e$W[1],e$l[0]=e$l[2]=0,e$k[2]=e$W[2],e$k[0]=e$k[1]=0,e$At.TransformNormal(e$g._tempV30,this.transformation,e$g._tempV30),e$At.TransformNormal(e$g._tempV31,this.transformation,e$g._tempV31),e$At.TransformNormal(e$g._tempV32,this.transformation,e$g._tempV32);var e$i=e$g._tempV33;this.transformation.getTranslationVector(e$i),e$d.length=8,e$At.add(e$i,e$g._tempV30,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV32,e$d[0]),e$At.add(e$i,e$g._tempV30,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV32,e$d[1]),e$At.subtract(e$i,e$g._tempV30,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV32,e$d[2]),e$At.subtract(e$i,e$g._tempV30,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV32,e$d[3]),e$At.add(e$i,e$g._tempV30,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV32,e$d[4]),e$At.add(e$i,e$g._tempV30,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV32,e$d[5]),e$At.subtract(e$i,e$g._tempV30,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV32,e$d[6]),e$At.subtract(e$i,e$g._tempV30,e$g._tempV34),e$At.subtract(e$g._tempV34,e$g._tempV31,e$g._tempV34),e$At.add(e$g._tempV34,e$g._tempV32,e$d[7])},e$d.transform=function(e$d){e$dt.multiply(this.transformation,e$d,this.transformation)},e$d.scale=function(e$d){e$At.multiply(this.extents,e$d,this.extents)},e$d.translate=function(e$d){this.transformation.getTranslationVector(e$g._tempV30),e$At.add(e$g._tempV30,e$d,e$g._tempV31),this.transformation.setTranslationVector(e$g._tempV31)},e$d.Size=function(e$d){e$At.scale(this.extents,2,e$d)},e$d.getSize=function(e$d){var e$t=this.extents.elements;e$g._tempV30.x=e$t[0],e$g._tempV31.y=e$t[1],e$g._tempV32.z=e$t[2],e$At.TransformNormal(e$g._tempV30,this.transformation,e$g._tempV30),e$At.TransformNormal(e$g._tempV31,this.transformation,e$g._tempV31),e$At.TransformNormal(e$g._tempV31,this.transformation,e$g._tempV32);var e$l=e$d.elements;e$l[0]=e$At.scalarLength(e$g._tempV30),e$l[1]=e$At.scalarLength(e$g._tempV31),e$l[2]=e$At.scalarLength(e$g._tempV32)},e$d.getSizeSquared=function(e$d){var e$t=this.extents.elements;e$g._tempV30.x=e$t[0],e$g._tempV31.y=e$t[1],e$g._tempV32.z=e$t[2],e$At.TransformNormal(e$g._tempV30,this.transformation,e$g._tempV30),e$At.TransformNormal(e$g._tempV31,this.transformation,e$g._tempV31),e$At.TransformNormal(e$g._tempV31,this.transformation,e$g._tempV32);var e$l=e$d.elements;e$l[0]=e$At.scalarLengthSquared(e$g._tempV30),e$l[1]=e$At.scalarLengthSquared(e$g._tempV31),e$l[2]=e$At.scalarLengthSquared(e$g._tempV32)},e$d.getCenter=function(e$d){this.transformation.getTranslationVector(e$d)},e$d.containsPoint=function(e$d){var e$t=this.extents.elements,e$l=e$t[0],e$k=e$t[1],e$W=e$t[2];this.transformation.invert(e$g._tempM0),e$At.transformCoordinate(e$d,e$g._tempM0,e$g._tempV30);var e$i=e$g._tempV30.elements,e$A=Math.abs(e$i[0]),e$B=Math.abs(e$i[1]),e$o=Math.abs(e$i[2]);return e$_d.nearEqual(e$A,e$l)&&e$_d.nearEqual(e$B,e$k)&&e$_d.nearEqual(e$o,e$W)?2:e$A<e$l&&e$B<e$k&&e$o<e$W?1:0},e$d.containsPoints=function(e$d){var e$t=this.extents.elements,e$l=e$t[0],e$k=e$t[1],e$W=e$t[2];this.transformation.invert(e$g._tempM0);for(var e$i=!0,e$A=!1,e$B=0;e$B<e$d.length;e$B++){e$At.transformCoordinate(e$d[e$B],e$g._tempM0,e$g._tempV30);var e$o=e$g._tempV30.elements,e$I=Math.abs(e$o[0]),e$b=Math.abs(e$o[1]),e$f=Math.abs(e$o[2]);e$_d.nearEqual(e$I,e$l)&&e$_d.nearEqual(e$b,e$k)&&e$_d.nearEqual(e$f,e$W)&&(e$A=!0),e$I<e$l&&e$b<e$k&&e$f<e$W?e$A=!0:e$i=!1}return e$i?1:e$A?2:0},e$d.containsSphere=function(e$d,e$t){void 0===e$t&&(e$t=!1);var e$l=this.extents.elements,e$k=e$l[0],e$W=e$l[1],e$i=e$l[2],e$A=e$d.radius;this.transformation.invert(e$g._tempM0),e$At.transformCoordinate(e$d.center,e$g._tempM0,e$g._tempV30);var e$B=NaN;if(e$B=e$t?e$A:(e$At.scale(e$At.UnitX,e$A,e$g._tempV31),e$At.TransformNormal(e$g._tempV31,e$g._tempM0,e$g._tempV31),e$At.scalarLength(e$g._tempV31)),e$At.scale(this.extents,-1,e$g._tempV32),e$At.Clamp(e$g._tempV30,e$g._tempV32,this.extents,e$g._tempV33),e$B*e$B<e$At.distanceSquared(e$g._tempV30,e$g._tempV33))return 0;var e$o=e$g._tempV30.elements,e$I=e$o[0],e$b=e$o[1],e$f=e$o[2],e$J=e$g._tempV32.elements,e$c=e$J[0],e$Y=e$J[1],e$w=e$J[2];return e$c+e$B<=e$I&&e$I<=e$k-e$B&&e$B<e$k-e$c&&e$Y+e$B<=e$b&&e$b<=e$W-e$B&&e$B<e$W-e$Y&&e$w+e$B<=e$f&&e$f<=e$i-e$B&&e$B<e$i-e$w?1:2},e$d.containsOrientedBoundBox=function(e$d){var e$t=0,e$l=0;e$d.getCorners(e$g._corners);var e$k=this.containsPoints(e$g._corners);if(0!=e$k)return e$k;var e$W=this.extents.elements;e$d.extents.cloneTo(e$g._tempV35);var e$i=e$g._tempV35.elements;e$g._getRows(this.transformation,e$g._rows1),e$g._getRows(e$d.transformation,e$g._rows2);var e$A=NaN;for(e$t=0;e$t<4;e$t++)for(e$l=0;e$l<4;e$l++)3==e$t||3==e$l?(e$g._tempM0.setElementByRowColumn(e$t,e$l,0),e$g._tempM1.setElementByRowColumn(e$t,e$l,0)):(e$A=e$At.dot(e$g._rows1[e$t],e$g._rows2[e$l]),e$g._tempM0.setElementByRowColumn(e$t,e$l,e$A),e$g._tempM1.setElementByRowColumn(e$t,e$l,Math.abs(e$A)));e$d.getCenter(e$g._tempV34),this.getCenter(e$g._tempV36),e$At.subtract(e$g._tempV34,e$g._tempV36,e$g._tempV30);var e$B=e$g._tempV31.elements;e$B[0]=e$At.dot(e$g._tempV30,e$g._rows1[0]),e$B[1]=e$At.dot(e$g._tempV30,e$g._rows1[1]),e$B[2]=e$At.dot(e$g._tempV30,e$g._rows1[2]);var e$o=e$g._tempV32.elements,e$I=e$g._tempV33.elements;for(e$t=0;e$t<3;e$t++)if(e$o[0]=e$g._tempM1.getElementByRowColumn(e$t,0),e$o[1]=e$g._tempM1.getElementByRowColumn(e$t,1),e$o[2]=e$g._tempM1.getElementByRowColumn(e$t,2),e$W[e$t]+e$At.dot(e$g._tempV35,e$g._tempV32)<Math.abs(e$B[e$t]))return 0;for(e$l=0;e$l<3;e$l++)if(e$o[0]=e$g._tempM1.getElementByRowColumn(0,e$l),e$o[1]=e$g._tempM1.getElementByRowColumn(1,e$l),e$o[2]=e$g._tempM1.getElementByRowColumn(2,e$l),e$I[0]=e$g._tempM0.getElementByRowColumn(0,e$l),e$I[1]=e$g._tempM0.getElementByRowColumn(1,e$l),e$I[2]=e$g._tempM0.getElementByRowColumn(2,e$l),e$At.dot(this.extents,e$g._tempV32)+e$i[e$l]<Math.abs(e$At.dot(e$g._tempV31,e$g._tempV33)))return 0;for(e$t=0;e$t<3;e$t++)for(e$l=0;e$l<3;e$l++){var e$b=(e$t+1)%3,e$f=(e$t+2)%3,e$J=(e$l+1)%3,e$c=(e$l+2)%3;if(e$W[e$b]*e$g._tempM1.getElementByRowColumn(e$f,e$l)+e$W[e$f]*e$g._tempM1.getElementByRowColumn(e$b,e$l)+(e$i[e$J]*e$g._tempM1.getElementByRowColumn(e$t,e$c)+e$i[e$c]*e$g._tempM1.getElementByRowColumn(e$t,e$J))<Math.abs(e$B[e$f]*e$g._tempM0.getElementByRowColumn(e$b,e$l)-e$B[e$b]*e$g._tempM0.getElementByRowColumn(e$f,e$l)))return 0}return 2},e$d.containsLine=function(e$d,e$t){e$g._corners[0]=e$d,e$g._corners[1]=e$t;var e$l=this.containsPoints(e$g._corners);if(0!=e$l)return e$l;var e$k=this.extents.elements,e$W=e$k[0],e$i=e$k[1],e$A=e$k[2];this.transformation.invert(e$g._tempM0),e$At.transformCoordinate(e$d,e$g._tempM0,e$g._tempV30),e$At.transformCoordinate(e$t,e$g._tempM0,e$g._tempV31),e$At.add(e$g._tempV30,e$g._tempV31,e$g._tempV32),e$At.scale(e$g._tempV32,.5,e$g._tempV32),e$At.subtract(e$g._tempV30,e$g._tempV32,e$g._tempV33);var e$B=e$g._tempV33.elements,e$o=e$B[0],e$I=e$B[1],e$b=e$B[2],e$f=e$g._tempV34.elements,e$J=e$f[0]=Math.abs(e$B[0]),e$c=e$f[1]=Math.abs(e$B[1]),e$Y=e$f[2]=Math.abs(e$B[2]),e$w=e$g._tempV32.elements,e$D=e$w[0],e$z=e$w[1],e$e=e$w[2];return Math.abs(e$D)>e$W+e$J?0:Math.abs(e$z)>e$i+e$c?0:Math.abs(e$e)>e$A+e$Y?0:Math.abs(e$z*e$b-e$e*e$I)>e$i*e$Y+e$A*e$c?0:Math.abs(e$D*e$b-e$e*e$o)>e$W*e$Y+e$A*e$J?0:Math.abs(e$D*e$I-e$z*e$o)>e$W*e$c+e$i*e$J?0:2},e$d.containsBoundBox=function(e$d){var e$t=0,e$l=0,e$k=e$d.min,e$W=e$d.max;e$d.getCorners(e$g._corners);var e$i=this.containsPoints(e$g._corners);if(0!=e$i)return e$i;e$At.subtract(e$W,e$k,e$g._tempV30),e$At.scale(e$g._tempV30,.5,e$g._tempV30),e$At.add(e$k,e$g._tempV30,e$g._tempV30),e$At.subtract(e$W,e$g._tempV30,e$g._tempV31);var e$A=this.extents.elements,e$B=e$g._tempV31.elements;e$g._getRows(this.transformation,e$g._rows1),this.transformation.invert(e$g._tempM0);for(e$t=0;e$t<3;e$t++)for(e$l=0;e$l<3;e$l++)e$g._tempM1.setElementByRowColumn(e$t,e$l,Math.abs(e$g._tempM0.getElementByRowColumn(e$t,e$l)));this.getCenter(e$g._tempV35),e$At.subtract(e$g._tempV30,e$g._tempV35,e$g._tempV32);var e$o=e$g._tempV31.elements;e$o[0]=e$At.dot(e$g._tempV32,e$g._rows1[0]),e$o[1]=e$At.dot(e$g._tempV32,e$g._rows1[1]),e$o[2]=e$At.dot(e$g._tempV32,e$g._rows1[2]);var e$I=e$g._tempV33.elements,e$b=e$g._tempV34.elements;for(e$t=0;e$t<3;e$t++)if(e$I[0]=e$g._tempM1.getElementByRowColumn(e$t,0),e$I[1]=e$g._tempM1.getElementByRowColumn(e$t,1),e$I[2]=e$g._tempM1.getElementByRowColumn(e$t,2),e$A[e$t]+e$At.dot(e$g._tempV31,e$g._tempV33)<Math.abs(e$o[e$t]))return 0;for(e$l=0;e$l<3;e$l++)if(e$I[0]=e$g._tempM1.getElementByRowColumn(0,e$l),e$I[1]=e$g._tempM1.getElementByRowColumn(1,e$l),e$I[2]=e$g._tempM1.getElementByRowColumn(2,e$l),e$b[0]=e$g._tempM0.getElementByRowColumn(0,e$l),e$b[1]=e$g._tempM0.getElementByRowColumn(1,e$l),e$b[2]=e$g._tempM0.getElementByRowColumn(2,e$l),e$At.dot(this.extents,e$g._tempV33)+e$B[e$l]<Math.abs(e$At.dot(e$g._tempV31,e$g._tempV34)))return 0;for(e$t=0;e$t<3;e$t++)for(e$l=0;e$l<3;e$l++){var e$f=(e$t+1)%3,e$J=(e$t+2)%3,e$c=(e$l+1)%3,e$Y=(e$l+2)%3;if(e$A[e$f]*e$g._tempM1.getElementByRowColumn(e$J,e$l)+e$A[e$J]*e$g._tempM1.getElementByRowColumn(e$f,e$l)+(e$B[e$c]*e$g._tempM1.getElementByRowColumn(e$t,e$Y)+e$B[e$Y]*e$g._tempM1.getElementByRowColumn(e$t,e$c))<Math.abs(e$o[e$J]*e$g._tempM0.getElementByRowColumn(e$f,e$l)-e$o[e$f]*e$g._tempM0.getElementByRowColumn(e$J,e$l)))return 0}return 2},e$d.intersectsRay=function(e$d,e$t){e$At.scale(this.extents,-1,e$g._tempV30),this.transformation.invert(e$g._tempM0),e$At.TransformNormal(e$d.direction,e$g._tempM0,e$g._ray.direction),e$At.transformCoordinate(e$d.origin,e$g._tempM0,e$g._ray.origin),e$g._boxBound1.min=e$g._tempV30,e$g._boxBound1.max=this.extents;var e$l=Collision.intersectsRayAndBoxRP(e$g._ray,e$g._boxBound1,e$t);return-1!==e$l&&e$At.transformCoordinate(e$t,this.transformation,e$t),e$l},e$d._getLocalCorners=function(e$d){e$d.length=8;var e$t=this.extents.elements;e$g._tempV30.x=e$t[0],e$g._tempV31.y=e$t[1],e$g._tempV32.z=e$t[2],e$At.add(e$g._tempV30,e$g._tempV31,e$g._tempV33),e$At.add(e$g._tempV33,e$g._tempV32,e$d[0]),e$At.add(e$g._tempV30,e$g._tempV31,e$g._tempV33),e$At.subtract(e$g._tempV33,e$g._tempV32,e$d[1]),e$At.subtract(e$g._tempV31,e$g._tempV30,e$g._tempV33),e$At.subtract(e$g._tempV33,e$g._tempV30,e$d[2]),e$At.subtract(e$g._tempV31,e$g._tempV30,e$g._tempV33),e$At.add(e$g._tempV33,e$g._tempV32,e$d[3]),e$At.subtract(e$g._tempV30,e$g._tempV31,e$g._tempV33),e$At.add(e$g._tempV33,e$g._tempV32,e$d[4]),e$At.subtract(e$g._tempV30,e$g._tempV31,e$g._tempV33),e$At.subtract(e$g._tempV33,e$g._tempV32,e$d[5]),e$At.scale(e$d[0],-1,e$d[6]),e$At.subtract(e$g._tempV32,e$g._tempV30,e$g._tempV33),e$At.subtract(e$g._tempV33,e$g._tempV31,e$d[7])},e$d.equals=function(e$d){return this.extents==e$d.extents&&this.transformation==e$d.transformation},e$d.cloneTo=function(e$d){var e$t=e$d;this.extents.cloneTo(e$t.extents),this.transformation.cloneTo(e$t.transformation)},e$g.createByBoundBox=function(e$d,e$t){var e$l=e$d.min,e$k=e$d.max;e$At.subtract(e$k,e$l,e$g._tempV30),e$At.scale(e$g._tempV30,.5,e$g._tempV30),e$At.add(e$l,e$g._tempV30,e$g._tempV31),e$At.subtract(e$k,e$g._tempV31,e$g._tempV32),e$dt.translation(e$g._tempV31,e$g._tempM0);var e$W=e$g._tempV32.clone(),e$i=e$g._tempM0.clone();e$t.extents=e$W,e$t.transformation=e$i},e$g.createByMinAndMaxVertex=function(e$d,e$t){return e$At.subtract(e$t,e$d,e$g._tempV30),e$At.scale(e$g._tempV30,.5,e$g._tempV30),e$At.add(e$d,e$g._tempV30,e$g._tempV31),e$At.subtract(e$t,e$g._tempV31,e$g._tempV32),e$dt.translation(e$g._tempV31,e$g._tempM0),new e$g(e$g._tempV32,e$g._tempM0)},e$g._getRows=function(e$d,e$t){e$t.length=3;var e$l=e$d.elements,e$k=e$t[0].elements;e$k[0]=e$l[0],e$k[1]=e$l[1],e$k[2]=e$l[2];var e$W=e$t[1].elements;e$W[0]=e$l[4],e$W[1]=e$l[5],e$W[2]=e$l[6];var e$i=e$t[2].elements;e$i[0]=e$l[8],e$i[1]=e$l[9],e$i[2]=e$l[10]},e$g.getObbtoObbMatrix4x4=function(e$d,e$t,e$l,e$k){var e$W=e$d.transformation,e$i=e$t.transformation;if(e$l){e$g._getRows(e$W,e$g._rows1),e$g._getRows(e$i,e$g._rows2);for(var e$A=0;e$A<3;e$A++)for(var e$B=0;e$B<3;e$B++)e$k.setElementByRowColumn(e$A,e$B,e$At.dot(e$g._rows2[e$A],e$g._rows1[e$B]));e$t.getCenter(e$g._tempV30),e$d.getCenter(e$g._tempV31),e$At.subtract(e$g._tempV30,e$g._tempV31,e$g._tempV32);var e$o=e$k.elements;e$o[12]=e$At.dot(e$g._tempV32,e$g._rows1[0]),e$o[13]=e$At.dot(e$g._tempV32,e$g._rows1[1]),e$o[14]=e$At.dot(e$g._tempV32,e$g._rows1[2]),e$o[15]=1}else e$W.invert(e$g._tempM0),e$dt.multiply(e$i,e$g._tempM0,e$k)},e$g.merge=function(e$d,e$t,e$l){var e$k=e$d.extents,e$W=e$d.transformation;e$g.getObbtoObbMatrix4x4(e$d,e$t,e$l,e$g._tempM0),e$t._getLocalCorners(e$g._corners),e$At.transformCoordinate(e$g._corners[0],e$g._tempM0,e$g._corners[0]),e$At.transformCoordinate(e$g._corners[1],e$g._tempM0,e$g._corners[1]),e$At.transformCoordinate(e$g._corners[2],e$g._tempM0,e$g._corners[2]),e$At.transformCoordinate(e$g._corners[3],e$g._tempM0,e$g._corners[3]),e$At.transformCoordinate(e$g._corners[4],e$g._tempM0,e$g._corners[4]),e$At.transformCoordinate(e$g._corners[5],e$g._tempM0,e$g._corners[5]),e$At.transformCoordinate(e$g._corners[6],e$g._tempM0,e$g._corners[6]),e$At.transformCoordinate(e$g._corners[7],e$g._tempM0,e$g._corners[7]),e$At.scale(e$k,-1,e$g._boxBound1.min),e$k.cloneTo(e$g._boxBound1.max),e$Od.createfromPoints(e$g._corners,e$g._boxBound2),e$Od.merge(e$g._boxBound2,e$g._boxBound1,e$g._boxBound3);var e$i=e$g._boxBound3.min,e$A=e$g._boxBound3.max;e$At.subtract(e$A,e$i,e$g._tempV30),e$At.scale(e$g._tempV30,.5,e$g._tempV30),e$At.add(e$i,e$g._tempV30,e$g._tempV32),e$At.subtract(e$A,e$g._tempV32,e$k),e$At.transformCoordinate(e$g._tempV32,e$W,e$g._tempV33)},e$f(e$g,["_tempV30",function(){return this._tempV30=new e$At},"_tempV31",function(){return this._tempV31=new e$At},"_tempV32",function(){return this._tempV32=new e$At},"_tempV33",function(){return this._tempV33=new e$At},"_tempV34",function(){return this._tempV34=new e$At},"_tempV35",function(){return this._tempV35=new e$At},"_tempV36",function(){return this._tempV36=new e$At},"_tempM0",function(){return this._tempM0=new e$dt},"_tempM1",function(){return this._tempM1=new e$dt},"_corners",function(){return this._corners=[new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At]},"_rows1",function(){return this._rows1=[new e$At,new e$At,new e$At]},"_rows2",function(){return this._rows2=[new e$At,new e$At,new e$At]},"_ray",function(){return this._ray=new e$Wt(new e$At,new e$At)},"_boxBound1",function(){return this._boxBound1=new e$Od(new e$At,new e$At)},"_boxBound2",function(){return this._boxBound2=new e$Od(new e$At,new e$At)},"_boxBound3",function(){return this._boxBound3=new e$Od(new e$At,new e$At)}])}(),function(){function e$R(e$d,e$t){this.normal=null,this.distance=NaN,void 0===e$t&&(e$t=0),this.normal=e$d,this.distance=e$t}return e$c(e$R,"laya.d3.math.Plane"),e$R.prototype.normalize=function(){var e$d=this.normal.elements,e$t=e$d[0],e$l=e$d[1],e$k=e$d[2],e$W=1/Math.sqrt(e$t*e$t+e$l*e$l+e$k*e$k);e$d[0]=e$t*e$W,e$d[1]=e$l*e$W,e$d[2]=e$k*e$W,this.distance*=e$W},e$R.createPlaneBy3P=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$t.elements,e$i=e$l.elements,e$A=e$W[0]-e$k[0],e$B=e$W[1]-e$k[1],e$o=e$W[2]-e$k[2],e$I=e$i[0]-e$k[0],e$b=e$i[1]-e$k[1],e$f=e$i[2]-e$k[2],e$J=e$B*e$f-e$o*e$b,e$c=e$o*e$I-e$A*e$f,e$Y=e$A*e$b-e$B*e$I,e$w=1/Math.sqrt(e$J*e$J+e$c*e$c+e$Y*e$Y),e$D=e$J*e$w,e$z=e$c*e$w,e$e=e$Y*e$w,e$g=e$R._TEMPVec3.elements;e$g[0]=e$D,e$g[1]=e$z,e$g[2]=e$e;var e$H=-(e$D*e$k[0]+e$z*e$k[1]+e$e*e$k[2]);return new e$R(e$R._TEMPVec3,e$H)},e$R.PlaneIntersectionType_Back=0,e$R.PlaneIntersectionType_Front=1,e$R.PlaneIntersectionType_Intersecting=2,e$f(e$R,["_TEMPVec3",function(){return this._TEMPVec3=new e$At}]),e$R}()),e$lt=function(){function e$W(e$d,e$t,e$l,e$k){this.elements=new Float32Array(4),void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=1),this.elements[0]=e$d,this.elements[1]=e$t,this.elements[2]=e$l,this.elements[3]=e$k}e$c(e$W,"laya.d3.math.Quaternion");var e$d=e$W.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.scaling=function(e$d,e$t){var e$l=e$t.elements,e$k=this.elements;e$l[0]=e$k[0]*e$d,e$l[1]=e$k[1]*e$d,e$l[2]=e$k[2]*e$d,e$l[3]=e$k[3]*e$d},e$d.normalize=function(e$d){var e$t=e$d.elements,e$l=this.elements,e$k=e$l[0],e$W=e$l[1],e$i=e$l[2],e$A=e$l[3],e$B=e$k*e$k+e$W*e$W+e$i*e$i+e$A*e$A;0<e$B&&(e$B=1/Math.sqrt(e$B),e$t[0]=e$k*e$B,e$t[1]=e$W*e$B,e$t[2]=e$i*e$B,e$t[3]=e$A*e$B)},e$d.length=function(){var e$d=this.elements,e$t=e$d[0],e$l=e$d[1],e$k=e$d[2],e$W=e$d[3];return Math.sqrt(e$t*e$t+e$l*e$l+e$k*e$k+e$W*e$W)},e$d.rotateX=function(e$d,e$t){var e$l=e$t.elements,e$k=this.elements;e$d*=.5;var e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$k[3],e$o=Math.sin(e$d),e$I=Math.cos(e$d);e$l[0]=e$W*e$I+e$B*e$o,e$l[1]=e$i*e$I+e$A*e$o,e$l[2]=e$A*e$I-e$i*e$o,e$l[3]=e$B*e$I-e$W*e$o},e$d.rotateY=function(e$d,e$t){var e$l=e$t.elements,e$k=this.elements;e$d*=.5;var e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$k[3],e$o=Math.sin(e$d),e$I=Math.cos(e$d);e$l[0]=e$W*e$I-e$A*e$o,e$l[1]=e$i*e$I+e$B*e$o,e$l[2]=e$A*e$I+e$W*e$o,e$l[3]=e$B*e$I-e$i*e$o},e$d.rotateZ=function(e$d,e$t){var e$l=e$t.elements,e$k=this.elements;e$d*=.5;var e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$k[3],e$o=Math.sin(e$d),e$I=Math.cos(e$d);e$l[0]=e$W*e$I+e$i*e$o,e$l[1]=e$i*e$I-e$W*e$o,e$l[2]=e$A*e$I+e$B*e$o,e$l[3]=e$B*e$I-e$A*e$o},e$d.getYawPitchRoll=function(e$d){e$At.transformQuat(e$At.ForwardRH,this,e$W.TEMPVector31),e$At.transformQuat(e$At.Up,this,e$W.TEMPVector32);var e$t=e$W.TEMPVector32.elements;e$W.angleTo(e$At.ZERO,e$W.TEMPVector31,e$W.TEMPVector33);var e$l=e$W.TEMPVector33.elements;e$l[0]==Math.PI/2?(e$l[1]=e$W.arcTanAngle(e$t[2],e$t[0]),e$l[2]=0):e$l[0]==-Math.PI/2?(e$l[1]=e$W.arcTanAngle(-e$t[2],-e$t[0]),e$l[2]=0):(e$dt.createRotationY(-e$l[1],e$W.TEMPMatrix0),e$dt.createRotationX(-e$l[0],e$W.TEMPMatrix1),e$At.transformCoordinate(e$W.TEMPVector32,e$W.TEMPMatrix0,e$W.TEMPVector32),e$At.transformCoordinate(e$W.TEMPVector32,e$W.TEMPMatrix1,e$W.TEMPVector32),e$l[2]=e$W.arcTanAngle(e$t[1],-e$t[0])),e$l[1]<=-Math.PI&&(e$l[1]=Math.PI),e$l[2]<=-Math.PI&&(e$l[2]=Math.PI),e$l[1]>=Math.PI&&e$l[2]>=Math.PI&&(e$l[1]=0,e$l[2]=0,e$l[0]=Math.PI-e$l[0]);var e$k=e$d.elements;e$k[0]=e$l[1],e$k[1]=e$l[0],e$k[2]=e$l[2]},e$d.invert=function(e$d){var e$t=e$d.elements,e$l=this.elements,e$k=e$l[0],e$W=e$l[1],e$i=e$l[2],e$A=e$l[3],e$B=e$k*e$k+e$W*e$W+e$i*e$i+e$A*e$A,e$o=e$B?1/e$B:0;e$t[0]=-e$k*e$o,e$t[1]=-e$W*e$o,e$t[2]=-e$i*e$o,e$t[3]=e$A*e$o},e$d.identity=function(){var e$d=this.elements;e$d[0]=0,e$d[1]=0,e$d[2]=0,e$d[3]=1},e$d.fromArray=function(e$d,e$t){void 0===e$t&&(e$t=0),this.elements[0]=e$d[e$t+0],this.elements[1]=e$d[e$t+1],this.elements[2]=e$d[e$t+2],this.elements[3]=e$d[e$t+3]},e$d.cloneTo=function(e$d){var e$t,e$l,e$k;if((e$l=this.elements)!==(e$k=e$d.elements))for(e$t=0;e$t<4;++e$t)e$k[e$t]=e$l[e$t]},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$d.equals=function(e$d){var e$t=this.elements,e$l=e$d.elements;return e$_d.nearEqual(e$t[0],e$l[0])&&e$_d.nearEqual(e$t[1],e$l[1])&&e$_d.nearEqual(e$t[2],e$l[2])&&e$_d.nearEqual(e$t[3],e$l[3])},e$d.lengthSquared=function(){var e$d=this.elements[0],e$t=this.elements[1],e$l=this.elements[2],e$k=this.elements[3];return e$d*e$d+e$t*e$t+e$l*e$l+e$k*e$k},e$Y(0,e$d,"x",function(){return this.elements[0]}),e$Y(0,e$d,"y",function(){return this.elements[1]}),e$Y(0,e$d,"z",function(){return this.elements[2]}),e$Y(0,e$d,"w",function(){return this.elements[3]}),e$W.createFromYawPitchRoll=function(e$d,e$t,e$l,e$k){var e$W=.5*e$l,e$i=.5*e$t,e$A=.5*e$d,e$B=Math.sin(e$W),e$o=Math.cos(e$W),e$I=Math.sin(e$i),e$b=Math.cos(e$i),e$f=Math.sin(e$A),e$J=Math.cos(e$A),e$c=e$k.elements;e$c[0]=e$J*e$I*e$o+e$f*e$b*e$B,e$c[1]=e$f*e$b*e$o-e$J*e$I*e$B,e$c[2]=e$J*e$b*e$B-e$f*e$I*e$o,e$c[3]=e$J*e$b*e$o+e$f*e$I*e$B},e$W.multiply=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$t.elements,e$i=e$l.elements,e$A=e$k[0],e$B=e$k[1],e$o=e$k[2],e$I=e$k[3],e$b=e$W[0],e$f=e$W[1],e$J=e$W[2],e$c=e$W[3],e$Y=e$B*e$J-e$o*e$f,e$w=e$o*e$b-e$A*e$J,e$D=e$A*e$f-e$B*e$b,e$z=e$A*e$b+e$B*e$f+e$o*e$J;e$i[0]=e$A*e$c+e$b*e$I+e$Y,e$i[1]=e$B*e$c+e$f*e$I+e$w,e$i[2]=e$o*e$c+e$J*e$I+e$D,e$i[3]=e$I*e$c-e$z},e$W.arcTanAngle=function(e$d,e$t){return 0==e$d?1==e$t?Math.PI/2:-Math.PI/2:0<e$d?Math.atan(e$t/e$d):e$d<0?0<e$t?Math.atan(e$t/e$d)+Math.PI:Math.atan(e$t/e$d)-Math.PI:0},e$W.angleTo=function(e$d,e$t,e$l){e$At.subtract(e$t,e$d,e$W.TEMPVector30),e$At.normalize(e$W.TEMPVector30,e$W.TEMPVector30),e$l.elements[0]=Math.asin(e$W.TEMPVector30.y),e$l.elements[1]=e$W.arcTanAngle(-e$W.TEMPVector30.z,-e$W.TEMPVector30.x)},e$W.createFromAxisAngle=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements;e$t*=.5;var e$i=Math.sin(e$t);e$k[0]=e$i*e$W[0],e$k[1]=e$i*e$W[1],e$k[2]=e$i*e$W[2],e$k[3]=Math.cos(e$t)},e$W.createFromMatrix3x3=function(e$d,e$t){var e$l,e$k=e$t.elements,e$W=e$d.elements,e$i=e$W[0]+e$W[4]+e$W[8];if(0<e$i)e$l=Math.sqrt(e$i+1),e$k[3]=.5*e$l,e$l=.5/e$l,e$k[0]=(e$W[5]-e$W[7])*e$l,e$k[1]=(e$W[6]-e$W[2])*e$l,e$k[2]=(e$W[1]-e$W[3])*e$l;else{var e$A=0;e$W[4]>e$W[0]&&(e$A=1),e$W[8]>e$W[3*e$A+e$A]&&(e$A=2);var e$B=(e$A+1)%3,e$o=(e$A+2)%3;e$l=Math.sqrt(e$W[3*e$A+e$A]-e$W[3*e$B+e$B]-e$W[3*e$o+e$o]+1),e$k[e$A]=.5*e$l,e$l=.5/e$l,e$k[3]=(e$W[3*e$B+e$o]-e$W[3*e$o+e$B])*e$l,e$k[e$B]=(e$W[3*e$B+e$A]+e$W[3*e$A+e$B])*e$l,e$k[e$o]=(e$W[3*e$o+e$A]+e$W[3*e$A+e$o])*e$l}},e$W.createFromMatrix4x4=function(e$d,e$t){var e$l,e$k,e$W=e$d.elements,e$i=e$t.elements,e$A=e$W[0]+e$W[5]+e$W[10];0<e$A?(e$l=Math.sqrt(e$A+1),e$i[3]=.5*e$l,e$l=.5/e$l,e$i[0]=(e$W[6]-e$W[9])*e$l,e$i[1]=(e$W[8]-e$W[2])*e$l,e$i[2]=(e$W[1]-e$W[4])*e$l):e$W[0]>=e$W[5]&&e$W[0]>=e$W[10]?(e$k=.5/(e$l=Math.sqrt(1+e$W[0]-e$W[5]-e$W[10])),e$i[0]=.5*e$l,e$i[1]=(e$W[1]+e$W[4])*e$k,e$i[2]=(e$W[2]+e$W[8])*e$k,e$i[3]=(e$W[6]-e$W[9])*e$k):e$W[5]>e$W[10]?(e$k=.5/(e$l=Math.sqrt(1+e$W[5]-e$W[0]-e$W[10])),e$i[0]=(e$W[4]+e$W[1])*e$k,e$i[1]=.5*e$l,e$i[2]=(e$W[9]+e$W[6])*e$k,e$i[3]=(e$W[8]-e$W[2])*e$k):(e$k=.5/(e$l=Math.sqrt(1+e$W[10]-e$W[0]-e$W[5])),e$i[0]=(e$W[8]+e$W[2])*e$k,e$i[1]=(e$W[9]+e$W[6])*e$k,e$i[2]=.5*e$l,e$i[3]=(e$W[1]-e$W[4])*e$k)},e$W.slerp=function(e$d,e$t,e$l,e$k){var e$W,e$i,e$A,e$B,e$o,e$I=e$d.elements,e$b=e$t.elements,e$f=e$k.elements,e$J=e$I[0],e$c=e$I[1],e$Y=e$I[2],e$w=e$I[3],e$D=e$b[0],e$z=e$b[1],e$e=e$b[2],e$g=e$b[3];return(e$i=e$J*e$D+e$c*e$z+e$Y*e$e+e$w*e$g)<0&&(e$i=-e$i,e$D=-e$D,e$z=-e$z,e$e=-e$e,e$g=-e$g),e$o=1e-6<1-e$i?(e$W=Math.acos(e$i),e$A=Math.sin(e$W),e$B=Math.sin((1-e$l)*e$W)/e$A,Math.sin(e$l*e$W)/e$A):(e$B=1-e$l,e$l),e$f[0]=e$B*e$J+e$o*e$D,e$f[1]=e$B*e$c+e$o*e$z,e$f[2]=e$B*e$Y+e$o*e$e,e$f[3]=e$B*e$w+e$o*e$g,e$f},e$W.lerp=function(e$d,e$t,e$l,e$k){var e$W=e$k.elements,e$i=e$d.elements,e$A=e$t.elements,e$B=e$i[0],e$o=e$i[1],e$I=e$i[2],e$b=e$i[3];e$W[0]=e$B+e$l*(e$A[0]-e$B),e$W[1]=e$o+e$l*(e$A[1]-e$o),e$W[2]=e$I+e$l*(e$A[2]-e$I),e$W[3]=e$b+e$l*(e$A[3]-e$b)},e$W.add=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=e$W[0]+e$i[0],e$k[1]=e$W[1]+e$i[1],e$k[2]=e$W[2]+e$i[2],e$k[3]=e$W[3]+e$i[3]},e$W.dot=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;return e$l[0]*e$k[0]+e$l[1]*e$k[1]+e$l[2]*e$k[2]+e$l[3]*e$k[3]},e$W.rotationLookAt=function(e$d,e$t,e$l){e$W.lookAt(e$At.ZERO,e$d,e$t,e$l)},e$W.lookAt=function(e$d,e$t,e$l,e$k){e$vd.lookAt(e$d,e$t,e$l,e$W._tempMatrix3x3),e$W.rotationMatrix(e$W._tempMatrix3x3,e$k)},e$W.invert=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$d.lengthSquared();e$_d.isZero(e$W)||(e$W=1/e$W,e$k[0]=-e$l[0]*e$W,e$k[1]=-e$l[1]*e$W,e$k[2]=-e$l[2]*e$W,e$k[3]=e$l[3]*e$W)},e$W.rotationMatrix=function(e$d,e$t){var e$l=e$d.elements,e$k=e$l[0],e$W=e$l[1],e$i=e$l[2],e$A=e$l[3],e$B=e$l[4],e$o=e$l[5],e$I=e$l[6],e$b=e$l[7],e$f=e$l[8],e$J=e$t.elements,e$c=NaN,e$Y=NaN,e$w=e$k+e$B+e$f;0<e$w?(e$c=Math.sqrt(e$w+1),e$J[3]=.5*e$c,e$c=.5/e$c,e$J[0]=(e$o-e$b)*e$c,e$J[1]=(e$I-e$i)*e$c,e$J[2]=(e$W-e$A)*e$c):e$B<=e$k&&e$f<=e$k?(e$Y=.5/(e$c=Math.sqrt(1+e$k-e$B-e$f)),e$J[0]=.5*e$c,e$J[1]=(e$W+e$A)*e$Y,e$J[2]=(e$i+e$I)*e$Y,e$J[3]=(e$o-e$b)*e$Y):e$f<e$B?(e$Y=.5/(e$c=Math.sqrt(1+e$B-e$k-e$f)),e$J[0]=(e$A+e$W)*e$Y,e$J[1]=.5*e$c,e$J[2]=(e$b+e$o)*e$Y,e$J[3]=(e$I-e$i)*e$Y):(e$Y=.5/(e$c=Math.sqrt(1+e$f-e$k-e$B)),e$J[0]=(e$I+e$i)*e$Y,e$J[1]=(e$b+e$o)*e$Y,e$J[2]=.5*e$c,e$J[3]=(e$W-e$A)*e$Y)},e$W.DEFAULT=new e$W,e$f(e$W,["TEMPVector30",function(){return this.TEMPVector30=new e$At},"TEMPVector31",function(){return this.TEMPVector31=new e$At},"TEMPVector32",function(){return this.TEMPVector32=new e$At},"TEMPVector33",function(){return this.TEMPVector33=new e$At},"TEMPMatrix0",function(){return this.TEMPMatrix0=new e$dt},"TEMPMatrix1",function(){return this.TEMPMatrix1=new e$dt},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new e$vd},"NAN",function(){return this.NAN=new e$W(NaN,NaN,NaN,NaN)}]),e$W}(),e$kt=function(){function e$d(e$d){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=e$d,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}e$c(e$d,"laya.d3.math.Rand");var e$t=e$d.prototype;return e$t.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},e$t.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},e$t.getSignedFloat=function(){return 2*this.getFloat()-1},e$Y(0,e$t,"seed",function(){return this.seeds[0]},function(e$d){this.seeds[0]=e$d,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),e$d.getFloatFromInt=function(e$d){return 1/8388607*(8388607&e$d)},e$d.getByteFromInt=function(e$d){return(8388607&e$d)>>>15},e$d}(),e$Wt=(function(){function e$W(e$d){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(e$d instanceof Array)||4!==e$d.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|e$d[0],this._state0L=0|e$d[1],this._state1U=0|e$d[2],this._state1L=0|e$d[3]}e$c(e$W,"laya.d3.math.RandX");var e$d=e$W.prototype;e$d.randomint=function(){var e$d=this._state0U,e$t=this._state0L,e$l=this._state1U,e$k=this._state1L,e$W=(e$k>>>0)+(e$t>>>0),e$i=e$l+e$d+(e$W/2>>>31)>>>0,e$A=e$W>>>0,e$B=0,e$o=0;e$B=(e$d^=e$B=e$d<<23|(-512&e$t)>>>9)^(this._state0U=e$l),e$o=(e$t^=e$o=e$t<<23)^(this._state0L=e$k);e$B^=e$d>>>18,e$o^=e$t>>>18|(262143&e$d)<<14;return e$B^=e$l>>>5,e$o^=e$k>>>5|(31&e$l)<<27,this._state1U=e$B,this._state1L=e$o,[e$i,e$A]},e$d.random=function(){var e$d=this.randomint(),e$t=e$d[0],e$l=1023<<20|e$t>>>12,e$k=0|(e$d[1]>>>12|(4095&e$t)<<20);return e$W._CONVERTION_BUFFER.setUint32(0,e$l,!1),e$W._CONVERTION_BUFFER.setUint32(4,e$k,!1),e$kt._CONVERTION_BUFFER.getFloat64(0,!1)-1},e$f(e$W,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new e$kt([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function e$d(e$d,e$t){this.origin=null,this.direction=null,this.origin=e$d,this.direction=e$t}return e$c(e$d,"laya.d3.math.Ray"),e$d}()),e$it=function(){function e$d(e$d,e$t){this.elements=new Float32Array(2),void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0);var e$l=this.elements;e$l[0]=e$d,e$l[1]=e$t}e$c(e$d,"laya.d3.math.Vector2");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.fromArray=function(e$d,e$t){void 0===e$t&&(e$t=0),this.elements[0]=e$d[e$t+0],this.elements[1]=e$d[e$t+1]},e$t.cloneTo=function(e$d){var e$t=e$d.elements,e$l=this.elements;e$t[0]=e$l[0],e$t[1]=e$l[1]},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"x",function(){return this.elements[0]},function(e$d){this.elements[0]=e$d}),e$Y(0,e$t,"y",function(){return this.elements[1]},function(e$d){this.elements[1]=e$d}),e$d.scale=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements;e$k[0]=e$W[0]*e$t,e$k[1]=e$W[1]*e$t},e$f(e$d,["ZERO",function(){return this.ZERO=new e$d(0,0)},"ONE",function(){return this.ONE=new e$d(1,1)}]),e$d}(),e$At=function(){function e$b(e$d,e$t,e$l){this.elements=new Float32Array(3),void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0);var e$k=this.elements;e$k[0]=e$d,e$k[1]=e$t,e$k[2]=e$l}e$c(e$b,"laya.d3.math.Vector3");var e$d=e$b.prototype;return e$R.imps(e$d,{"laya.d3.core.IClone":!0}),e$d.fromArray=function(e$d,e$t){void 0===e$t&&(e$t=0),this.elements[0]=e$d[e$t+0],this.elements[1]=e$d[e$t+1],this.elements[2]=e$d[e$t+2]},e$d.cloneTo=function(e$d){var e$t=e$d.elements,e$l=this.elements;e$t[0]=e$l[0],e$t[1]=e$l[1],e$t[2]=e$l[2]},e$d.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$d.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},e$d.reset=function(e$d,e$t,e$l){this.elements[0]=e$d,this.elements[1]=e$t,this.elements[2]=e$l},e$Y(0,e$d,"x",function(){return this.elements[0]},function(e$d){this.elements[0]=e$d}),e$Y(0,e$d,"y",function(){return this.elements[1]},function(e$d){this.elements[1]=e$d}),e$Y(0,e$d,"z",function(){return this.elements[2]},function(e$d){this.elements[2]=e$d}),e$b.distanceSquared=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$l[0]-e$k[0],e$i=e$l[1]-e$k[1],e$A=e$l[2]-e$k[2];return e$W*e$W+e$i*e$i+e$A*e$A},e$b.distance=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$l[0]-e$k[0],e$i=e$l[1]-e$k[1],e$A=e$l[2]-e$k[2];return Math.sqrt(e$W*e$W+e$i*e$i+e$A*e$A)},e$b.min=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=Math.min(e$W[0],e$i[0]),e$k[1]=Math.min(e$W[1],e$i[1]),e$k[2]=Math.min(e$W[2],e$i[2])},e$b.max=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=Math.max(e$W[0],e$i[0]),e$k[1]=Math.max(e$W[1],e$i[1]),e$k[2]=Math.max(e$W[2],e$i[2])},e$b.transformQuat=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements,e$A=e$W[0],e$B=e$W[1],e$o=e$W[2],e$I=e$i[0],e$b=e$i[1],e$f=e$i[2],e$J=e$i[3],e$c=e$J*e$A+e$b*e$o-e$f*e$B,e$Y=e$J*e$B+e$f*e$A-e$I*e$o,e$w=e$J*e$o+e$I*e$B-e$b*e$A,e$D=-e$I*e$A-e$b*e$B-e$f*e$o;e$k[0]=e$c*e$J+e$D*-e$I+e$Y*-e$f-e$w*-e$b,e$k[1]=e$Y*e$J+e$D*-e$b+e$w*-e$I-e$c*-e$f,e$k[2]=e$w*e$J+e$D*-e$f+e$c*-e$b-e$Y*-e$I},e$b.scalarLength=function(e$d){var e$t=e$d.elements,e$l=e$t[0],e$k=e$t[1],e$W=e$t[2];return Math.sqrt(e$l*e$l+e$k*e$k+e$W*e$W)},e$b.scalarLengthSquared=function(e$d){var e$t=e$d.elements,e$l=e$t[0],e$k=e$t[1],e$W=e$t[2];return e$l*e$l+e$k*e$k+e$W*e$W},e$b.normalize=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$l[0],e$i=e$l[1],e$A=e$l[2],e$B=e$W*e$W+e$i*e$i+e$A*e$A;0<e$B&&(e$B=1/Math.sqrt(e$B),e$k[0]=e$l[0]*e$B,e$k[1]=e$l[1]*e$B,e$k[2]=e$l[2]*e$B)},e$b.multiply=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=e$W[0]*e$i[0],e$k[1]=e$W[1]*e$i[1],e$k[2]=e$W[2]*e$i[2]},e$b.scale=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements;e$k[0]=e$W[0]*e$t,e$k[1]=e$W[1]*e$t,e$k[2]=e$W[2]*e$t},e$b.lerp=function(e$d,e$t,e$l,e$k){var e$W=e$k.elements,e$i=e$d.elements,e$A=e$t.elements,e$B=e$i[0],e$o=e$i[1],e$I=e$i[2];e$W[0]=e$B+e$l*(e$A[0]-e$B),e$W[1]=e$o+e$l*(e$A[1]-e$o),e$W[2]=e$I+e$l*(e$A[2]-e$I)},e$b.transformV3ToV3=function(e$d,e$t,e$l){var e$k=e$b._tempVector4;e$b.transformV3ToV4(e$d,e$t,e$k);var e$W=e$k.elements,e$i=e$l.elements;e$i[0]=e$W[0],e$i[1]=e$W[1],e$i[2]=e$W[2]},e$b.transformV3ToV4=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$t.elements,e$o=e$l.elements;e$o[0]=e$W*e$B[0]+e$i*e$B[4]+e$A*e$B[8]+e$B[12],e$o[1]=e$W*e$B[1]+e$i*e$B[5]+e$A*e$B[9]+e$B[13],e$o[2]=e$W*e$B[2]+e$i*e$B[6]+e$A*e$B[10]+e$B[14],e$o[3]=e$W*e$B[3]+e$i*e$B[7]+e$A*e$B[11]+e$B[15]},e$b.TransformNormal=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$t.elements,e$o=e$l.elements;e$o[0]=e$W*e$B[0]+e$i*e$B[4]+e$A*e$B[8],e$o[1]=e$W*e$B[1]+e$i*e$B[5]+e$A*e$B[9],e$o[2]=e$W*e$B[2]+e$i*e$B[6]+e$A*e$B[10]},e$b.transformCoordinate=function(e$d,e$t,e$l){var e$k=e$b._tempVector4.elements,e$W=e$d.elements,e$i=e$W[0],e$A=e$W[1],e$B=e$W[2],e$o=e$t.elements;e$k[0]=e$i*e$o[0]+e$A*e$o[4]+e$B*e$o[8]+e$o[12],e$k[1]=e$i*e$o[1]+e$A*e$o[5]+e$B*e$o[9]+e$o[13],e$k[2]=e$i*e$o[2]+e$A*e$o[6]+e$B*e$o[10]+e$o[14],e$k[3]=1/(e$i*e$o[3]+e$A*e$o[7]+e$B*e$o[11]+e$o[15]);var e$I=e$l.elements;e$I[0]=e$k[0]*e$k[3],e$I[1]=e$k[1]*e$k[3],e$I[2]=e$k[2]*e$k[3]},e$b.Clamp=function(e$d,e$t,e$l,e$k){var e$W=e$d.elements,e$i=e$W[0],e$A=e$W[1],e$B=e$W[2],e$o=e$t.elements,e$I=e$o[0],e$b=e$o[1],e$f=e$o[2],e$J=e$l.elements,e$c=e$J[0],e$Y=e$J[1],e$w=e$J[2],e$D=e$k.elements;e$i=(e$i=e$c<e$i?e$c:e$i)<e$I?e$I:e$i,e$A=(e$A=e$Y<e$A?e$Y:e$A)<e$b?e$b:e$A,e$B=(e$B=e$w<e$B?e$w:e$B)<e$f?e$f:e$B,e$D[0]=e$i,e$D[1]=e$A,e$D[2]=e$B},e$b.add=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=e$W[0]+e$i[0],e$k[1]=e$W[1]+e$i[1],e$k[2]=e$W[2]+e$i[2]},e$b.subtract=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=e$W[0]-e$i[0],e$k[1]=e$W[1]-e$i[1],e$k[2]=e$W[2]-e$i[2]},e$b.cross=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$t.elements,e$i=e$l.elements,e$A=e$k[0],e$B=e$k[1],e$o=e$k[2],e$I=e$W[0],e$b=e$W[1],e$f=e$W[2];e$i[0]=e$B*e$f-e$o*e$b,e$i[1]=e$o*e$I-e$A*e$f,e$i[2]=e$A*e$b-e$B*e$I},e$b.dot=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;return e$l[0]*e$k[0]+e$l[1]*e$k[1]+e$l[2]*e$k[2]},e$b.equals=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;return e$_d.nearEqual(Math.abs(e$l[0]),Math.abs(e$k[0]))&&e$_d.nearEqual(Math.abs(e$l[1]),Math.abs(e$k[1]))&&e$_d.nearEqual(Math.abs(e$l[2]),Math.abs(e$k[2]))},e$b.ZERO=new e$b(0,0,0),e$b.ONE=new e$b(1,1,1),e$b.NegativeUnitX=new e$b(-1,0,0),e$b.UnitX=new e$b(1,0,0),e$b.UnitY=new e$b(0,1,0),e$b.UnitZ=new e$b(0,0,1),e$b.ForwardRH=new e$b(0,0,-1),e$b.ForwardLH=new e$b(0,0,1),e$b.Up=new e$b(0,1,0),e$b.NAN=new e$b(NaN,NaN,NaN),e$f(e$b,["_tempVector4",function(){return this._tempVector4=new e$Bt}]),e$b}(),e$Bt=function(){function e$d(e$d,e$t,e$l,e$k){this.elements=new Float32Array(4),void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=0);var e$W=this.elements;e$W[0]=e$d,e$W[1]=e$t,e$W[2]=e$l,e$W[3]=e$k}e$c(e$d,"laya.d3.math.Vector4");var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t.fromArray=function(e$d,e$t){void 0===e$t&&(e$t=0),this.elements[0]=e$d[e$t+0],this.elements[1]=e$d[e$t+1],this.elements[2]=e$d[e$t+2],this.elements[3]=e$d[e$t+3]},e$t.cloneTo=function(e$d){var e$t=e$d.elements,e$l=this.elements;e$t[0]=e$l[0],e$t[1]=e$l[1],e$t[2]=e$l[2],e$t[3]=e$l[3]},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e$t.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e$Y(0,e$t,"x",function(){return this.elements[0]},function(e$d){this.elements[0]=e$d}),e$Y(0,e$t,"y",function(){return this.elements[1]},function(e$d){this.elements[1]=e$d}),e$Y(0,e$t,"z",function(){return this.elements[2]},function(e$d){this.elements[2]=e$d}),e$Y(0,e$t,"w",function(){return this.elements[3]},function(e$d){this.elements[3]=e$d}),e$d.lerp=function(e$d,e$t,e$l,e$k){var e$W=e$k.elements,e$i=e$d.elements,e$A=e$t.elements,e$B=e$i[0],e$o=e$i[1],e$I=e$i[2],e$b=e$i[3];e$W[0]=e$B+e$l*(e$A[0]-e$B),e$W[1]=e$o+e$l*(e$A[1]-e$o),e$W[2]=e$I+e$l*(e$A[2]-e$I),e$W[3]=e$b+e$l*(e$A[3]-e$b)},e$d.transformByM4x4=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$k[0],e$i=e$k[1],e$A=e$k[2],e$B=e$k[3],e$o=e$t.elements,e$I=e$l.elements;e$I[0]=e$W*e$o[0]+e$i*e$o[4]+e$A*e$o[8]+e$B*e$o[12],e$I[1]=e$W*e$o[1]+e$i*e$o[5]+e$A*e$o[9]+e$B*e$o[13],e$I[2]=e$W*e$o[2]+e$i*e$o[6]+e$A*e$o[10]+e$B*e$o[14],e$I[3]=e$W*e$o[3]+e$i*e$o[7]+e$A*e$o[11]+e$B*e$o[15]},e$d.equals=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;return e$_d.nearEqual(Math.abs(e$l[0]),Math.abs(e$k[0]))&&e$_d.nearEqual(Math.abs(e$l[1]),Math.abs(e$k[1]))&&e$_d.nearEqual(Math.abs(e$l[2]),Math.abs(e$k[2]))&&e$_d.nearEqual(Math.abs(e$l[3]),Math.abs(e$k[3]))},e$d.normalize=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$d.length();0<e$W&&(e$k[0]=e$l[0]*e$W,e$k[1]=e$l[1]*e$W,e$k[2]=e$l[2]*e$W,e$k[3]=e$l[3]*e$W)},e$d.add=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=e$W[0]+e$i[0],e$k[1]=e$W[1]+e$i[1],e$k[2]=e$W[2]+e$i[2],e$k[3]=e$W[3]+e$i[3]},e$d.subtract=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=e$W[0]-e$i[0],e$k[1]=e$W[1]-e$i[1],e$k[2]=e$W[2]-e$i[2],e$k[3]=e$W[3]-e$i[3]},e$d.multiply=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=e$W[0]*e$i[0],e$k[1]=e$W[1]*e$i[1],e$k[2]=e$W[2]*e$i[2],e$k[3]=e$W[3]*e$i[3]},e$d.scale=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements;e$k[0]=e$W[0]*e$t,e$k[1]=e$W[1]*e$t,e$k[2]=e$W[2]*e$t,e$k[3]=e$W[3]*e$t},e$d.Clamp=function(e$d,e$t,e$l,e$k){var e$W=e$d.elements,e$i=e$W[0],e$A=e$W[1],e$B=e$W[2],e$o=e$W[3],e$I=e$t.elements,e$b=e$I[0],e$f=e$I[1],e$J=e$I[2],e$c=e$I[3],e$Y=e$l.elements,e$w=e$Y[0],e$D=e$Y[1],e$z=e$Y[2],e$e=e$Y[3],e$g=e$k.elements;e$i=(e$i=e$w<e$i?e$w:e$i)<e$b?e$b:e$i,e$A=(e$A=e$D<e$A?e$D:e$A)<e$f?e$f:e$A,e$B=(e$B=e$z<e$B?e$z:e$B)<e$J?e$J:e$B,e$o=(e$o=e$e<e$o?e$e:e$o)<e$c?e$c:e$o,e$g[0]=e$i,e$g[1]=e$A,e$g[2]=e$B,e$g[3]=e$o},e$d.distanceSquared=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$l[0]-e$k[0],e$i=e$l[1]-e$k[1],e$A=e$l[2]-e$k[2],e$B=e$l[3]-e$k[3];return e$W*e$W+e$i*e$i+e$A*e$A+e$B*e$B},e$d.distance=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements,e$W=e$l[0]-e$k[0],e$i=e$l[1]-e$k[1],e$A=e$l[2]-e$k[2],e$B=e$l[3]-e$k[3];return Math.sqrt(e$W*e$W+e$i*e$i+e$A*e$A+e$B*e$B)},e$d.dot=function(e$d,e$t){var e$l=e$d.elements,e$k=e$t.elements;return e$l[0]*e$k[0]+e$l[1]*e$k[1]+e$l[2]*e$k[2]+e$l[3]*e$k[3]},e$d.min=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=Math.min(e$W[0],e$i[0]),e$k[1]=Math.min(e$W[1],e$i[1]),e$k[2]=Math.min(e$W[2],e$i[2]),e$k[3]=Math.min(e$W[3],e$i[3])},e$d.max=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t.elements;e$k[0]=Math.max(e$W[0],e$i[0]),e$k[1]=Math.max(e$W[1],e$i[1]),e$k[2]=Math.max(e$W[2],e$i[2]),e$k[3]=Math.max(e$W[3],e$i[3])},e$f(e$d,["ZERO",function(){return this.ZERO=new e$d},"ONE",function(){return this.ONE=new e$d(1,1,1,1)},"UnitX",function(){return this.UnitX=new e$d(1,0,0,0)},"UnitY",function(){return this.UnitY=new e$d(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new e$d(0,0,1,0)},"UnitW",function(){return this.UnitW=new e$d(0,0,0,1)}]),e$d}(),e$ot=function(){function e$i(e$d,e$t,e$l,e$k){this.minDepth=0,this.maxDepth=1,this.x=e$d,this.y=e$t,this.width=e$l,this.height=e$k}e$c(e$i,"laya.d3.math.Viewport");var e$d=e$i.prototype;return e$d.project=function(e$d,e$t,e$l){e$At.transformV3ToV3(e$d,e$t,e$l);var e$k=e$d.elements,e$W=e$t.elements,e$i=e$l.elements,e$A=e$k[0]*e$W[3]+e$k[1]*e$W[7]+e$k[2]*e$W[11]+e$W[15];1!==e$A&&(e$i[0]=e$i[0]/e$A,e$i[1]=e$i[1]/e$A,e$i[2]=e$i[2]/e$A),e$i[0]=.5*(e$i[0]+1)*this.width+this.x,e$i[1]=.5*(1-e$i[1])*this.height+this.y,e$i[2]=e$i[2]*(this.maxDepth-this.minDepth)+this.minDepth},e$d.unprojectFromMat=function(e$d,e$t,e$l){var e$k=e$d.elements,e$W=e$t.elements,e$i=e$l.elements;e$i[0]=(e$k[0]-this.x)/this.width*2-1,e$i[1]=-((e$k[1]-this.y)/this.height*2-1);var e$A=(this.maxDepth-this.minDepth)/2;e$i[2]=(e$k[2]-this.minDepth-e$A)/e$A;var e$B=e$i[0]*e$W[3]+e$i[1]*e$W[7]+e$i[2]*e$W[11]+e$W[15];e$At.transformV3ToV3(e$l,e$t,e$l),1!==e$B&&(e$i[0]=e$i[0]/e$B,e$i[1]=e$i[1]/e$B,e$i[2]=e$i[2]/e$B)},e$d.unprojectFromWVP=function(e$d,e$t,e$l,e$k,e$W){e$dt.multiply(e$t,e$l,e$i._tempMatrix4x4),e$k&&e$dt.multiply(e$i._tempMatrix4x4,e$k,e$i._tempMatrix4x4),e$i._tempMatrix4x4.invert(e$i._tempMatrix4x4),this.unprojectFromMat(e$d,e$i._tempMatrix4x4,e$W)},e$f(e$i,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new e$dt}]),e$i}(),e$It=function(){function e$T(e$d){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=e$d,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}e$c(e$T,"laya.d3.resource.models.SubMesh");var e$d=e$T.prototype;return e$R.imps(e$d,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),e$d._getVertexBuffer=function(e$d){return void 0===e$d&&(e$d=0),0===e$d?this._vertexBuffer:null},e$d._getIndexBuffer=function(){return this._indexBuffer},e$d._getStaticBatchBakedVertexs=function(e$d,e$t){var e$l,e$k,e$W=this._vertexBuffer,e$i=e$W.vertexDeclaration,e$A=e$i.getVertexElementByUsage(0).offset/4,e$B=e$i.getVertexElementByUsage(3).offset/4,e$o=e$t.meshRender.lightmapScaleOffset,e$I=0,e$b=0,e$f=0,e$J=0,e$c=0,e$Y=0;if(e$o)if(e$k=e$i.getVertexElementByUsage(15))e$f=e$i.vertexStride/4,e$l=0<this._vertexCount?e$W.getData().slice(this._vertexStart*e$f,(this._vertexStart+this._vertexCount)*e$f):e$W.getData().slice(),e$J=e$k.offset/4;else{e$f=(e$Y=e$i.vertexStride/4)+2,e$l=this._vertexCount?new Float32Array(this._vertexCount*(e$W.vertexDeclaration.vertexStride/4+2)):new Float32Array(e$W.vertexCount*(e$W.vertexDeclaration.vertexStride/4+2)),e$J=(e$c=e$i.getVertexElementByUsage(2).offset/4)+2;var e$w=e$W.getData();for(e$I=0,e$b=e$w.length/e$Y;e$I<e$b;e$I++){var e$D=0;e$D=0<this._vertexCount?(this._vertexStart+e$I)*e$Y:e$I*e$Y;var e$z=e$I*e$f,e$e=0;for(e$e=0;e$e<e$J;e$e++)e$l[e$z+e$e]=e$w[e$D+e$e];for(e$e=e$J;e$e<e$Y;e$e++)e$l[e$z+e$e+2]=e$w[e$D+e$e]}}else e$f=e$i.vertexStride/4,e$l=this._vertexCount?e$W.getData().slice(this._vertexStart*e$f,(this._vertexStart+this._vertexCount)*e$f):e$W.getData().slice();if(e$d){var e$g=e$d.worldMatrix,e$H=e$T._tempMatrix4x40;e$g.invert(e$H);var e$R=e$T._tempMatrix4x41,e$G=e$t.transform.worldMatrix;e$dt.multiply(e$H,e$G,e$R)}else e$R=e$t.transform.worldMatrix;var e$q=e$T._tempQuaternion0;for(e$R.decomposeTransRotScale(e$T._tempVector30,e$q,e$T._tempVector31),e$I=0,e$b=e$l.length/e$f;e$I<e$b;e$I++){var e$L=e$I*e$f+e$A,e$$=e$I*e$f+e$B;if(e$Dt.transformVector3ArrayToVector3ArrayCoordinate(e$l,e$L,e$R,e$l,e$L),e$Dt.transformVector3ArrayByQuat(e$l,e$$,e$q,e$l,e$$),e$o){var e$p=e$I*e$f+e$J;if(e$k)e$Dt.transformLightingMapTexcoordByUV1Array(e$l,e$p,e$o,e$l,e$p);else{var e$M=e$I*e$Y+e$c;e$Dt.transformLightingMapTexcoordByUV0Array(e$w,e$M,e$o,e$l,e$p)}}}return e$l},e$d._getVertexBuffers=function(){return null},e$d._beforeRender=function(e$d){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$d._render=function(e$d){var e$t,e$l=0,e$k=e$d.renderElement;if(1<this._indexCount){var e$W=this._boneIndicesList.length;if(1<e$W){for(var e$i=0;e$i<e$W;e$i++)(e$t=e$k._skinAnimationDatas||this._skinAnimationDatas)&&(e$k._shaderValue.setValue(0,e$t[e$i]),e$d._shader.uploadRenderElementUniforms(e$k._shaderValue.data)),e$r.mainContext.drawElements(4,this._subIndexBufferCount[e$i],5123,2*this._subIndexBufferStart[e$i]);e$L.drawCall+=e$W}else(e$t=e$k._skinAnimationDatas||this._skinAnimationDatas)&&(e$k._shaderValue.setValue(0,e$t[0]),e$d._shader.uploadRenderElementUniforms(e$k._shaderValue.data)),e$r.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),e$L.drawCall++;e$l=this._indexCount}else e$l=this._indexBuffer.indexCount,(e$t=e$k._skinAnimationDatas||this._skinAnimationDatas)&&(e$k._shaderValue.setValue(0,e$t[0]),e$d._shader.uploadRenderElementUniforms(e$k._shaderValue.data)),e$r.mainContext.drawElements(4,e$l,5123,0),e$L.drawCall++;e$L.trianglesFaces+=e$l/3},e$d.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},e$d.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},e$Y(0,e$d,"_vertexBufferCount",function(){return 1}),e$Y(0,e$d,"triangleCount",function(){return this._indexBuffer.indexCount/3}),e$f(e$T,["_tempVector30",function(){return this._tempVector30=new e$At},"_tempVector31",function(){return this._tempVector31=new e$At},"_tempQuaternion0",function(){return this._tempQuaternion0=new e$lt},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new e$dt},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new e$dt}]),e$T}(),e$bt=function(){function e$d(e$d){this.defineCounter=0,this.defines=null,e$d?(this.defineCounter=e$d.defineCounter,this.defines=e$d.defines.slice()):(this.defineCounter=0,this.defines=[])}return e$c(e$d,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),e$d.prototype.registerDefine=function(e$d){var e$t=Math.pow(2,this.defineCounter++);return this.defines[e$t]=e$d,e$t},e$d}(),e$ft=function(){function e$d(){}return e$c(e$d,"laya.d3.shader.ShaderInit3D"),e$d.__init__=function(){var e$d,e$t;e$Lt._globalRegDefine("HIGHPRECISION",e$Lt.SHADERDEFINE_HIGHPRECISION),e$Lt._globalRegDefine("FOG",e$Lt.SHADERDEFINE_FOG),e$Lt._globalRegDefine("DIRECTIONLIGHT",e$Lt.SHADERDEFINE_DIRECTIONLIGHT),e$Lt._globalRegDefine("POINTLIGHT",e$Lt.SHADERDEFINE_POINTLIGHT),e$Lt._globalRegDefine("SPOTLIGHT",e$Lt.SHADERDEFINE_SPOTLIGHT),e$Lt._globalRegDefine("UV",e$Lt.SHADERDEFINE_UV0),e$Lt._globalRegDefine("COLOR",e$Lt.SHADERDEFINE_COLOR),e$Lt._globalRegDefine("UV1",e$Lt.SHADERDEFINE_UV1),e$Lt._globalRegDefine("CASTSHADOW",e$ct.SHADERDEFINE_CAST_SHADOW),e$Lt._globalRegDefine("SHADOWMAP_PSSM1",e$ct.SHADERDEFINE_SHADOW_PSSM1),e$Lt._globalRegDefine("SHADOWMAP_PSSM2",e$ct.SHADERDEFINE_SHADOW_PSSM2),e$Lt._globalRegDefine("SHADOWMAP_PSSM3",e$ct.SHADERDEFINE_SHADOW_PSSM3),e$Lt._globalRegDefine("SHADOWMAP_PCF_NO",e$ct.SHADERDEFINE_SHADOW_PCF_NO),e$Lt._globalRegDefine("SHADOWMAP_PCF1",e$ct.SHADERDEFINE_SHADOW_PCF1),e$Lt._globalRegDefine("SHADOWMAP_PCF2",e$ct.SHADERDEFINE_SHADOW_PCF2),e$Lt._globalRegDefine("SHADOWMAP_PCF3",e$ct.SHADERDEFINE_SHADOW_PCF3),e$Lt._globalRegDefine("DEPTHFOG",e$Lt.SAHDERDEFINE_DEPTHFOG),e$nt.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),e$nt.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),e$d={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},e$t={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var e$l=e$nt.nameKey.add("SIMPLE");shaderCompile=e$Lt.add(e$l,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',e$d,e$t),e$Qt.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),e$Qt.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),e$Qt.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),e$Qt.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),e$Qt.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),e$Qt.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),e$Qt.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),e$Qt.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),e$Qt.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},e$d}(),e$Jt=function(){function e$d(){this._data=null,this._data=[]}e$c(e$d,"laya.d3.shader.ValusArray");var e$t=e$d.prototype;return e$t.setValue=function(e$d,e$t){this._data[e$d]=e$t},e$Y(0,e$t,"data",function(){return this._data}),e$d}(),e$ct=function(){function e$d(){}return e$d.SHADERDEFINE_RECEIVE_SHADOW=1,e$d.SHADERDEFINE_CAST_SHADOW=512,e$d.SHADERDEFINE_SHADOW_PSSM1=1024,e$d.SHADERDEFINE_SHADOW_PSSM2=2048,e$d.SHADERDEFINE_SHADOW_PSSM3=4096,e$d.SHADERDEFINE_SHADOW_PCF_NO=8192,e$d.SHADERDEFINE_SHADOW_PCF1=16384,e$d.SHADERDEFINE_SHADOW_PCF2=32768,e$d.SHADERDEFINE_SHADOW_PCF3=65536,e$d.MAX_PSSM_COUNT=3,e$d}(),e$Yt=function(){function e$X(){}return e$c(e$X,"laya.d3.utils.Picker"),e$X.calculateCursorRay=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$d.elements[0],e$B=e$d.elements[1],e$o=e$X._tempVector30,e$I=e$o.elements;e$I[0]=e$A,e$I[1]=e$B,e$I[2]=e$t.minDepth;var e$b=e$X._tempVector31,e$f=e$b.elements;e$f[0]=e$A,e$f[1]=e$B,e$f[2]=e$t.maxDepth;var e$J=e$i.origin,e$c=e$X._tempVector32;e$t.unprojectFromWVP(e$o,e$l,e$k,e$W,e$J),e$t.unprojectFromWVP(e$b,e$l,e$k,e$W,e$c);var e$Y=e$i.direction.elements;e$Y[0]=e$c.x-e$J.x,e$Y[1]=e$c.y-e$J.y,e$Y[2]=e$c.z-e$J.z,e$At.normalize(e$i.direction,e$i.direction)},e$X.rayIntersectsPositionsAndIndices=function(e$d,e$t,e$l,e$k,e$W){for(var e$i=e$l.vertexStride/4,e$A=e$l.getVertexElementByUsage(0).offset/4,e$B=Number.MAX_VALUE,e$o=-1,e$I=-1,e$b=-1,e$f=0;e$f<e$k.length;e$f+=3){var e$J=e$X._tempVector35,e$c=e$J.elements,e$Y=e$k[e$f]*e$i,e$w=e$Y+e$A;e$c[0]=e$t[e$w],e$c[1]=e$t[1+e$w],e$c[2]=e$t[2+e$w];var e$D=e$X._tempVector36,e$z=e$D.elements,e$e=e$k[e$f+1]*e$i,e$g=e$e+e$A;e$z[0]=e$t[e$g],e$z[1]=e$t[1+e$g],e$z[2]=e$t[2+e$g];var e$H=e$X._tempVector37,e$R=e$H.elements,e$G=e$k[e$f+2]*e$i,e$q=e$G+e$A;e$R[0]=e$t[e$q],e$R[1]=e$t[1+e$q],e$R[2]=e$t[2+e$q];var e$L=laya.d3.utils.Picker.rayIntersectsTriangle(e$d,e$J,e$D,e$H);!isNaN(e$L)&&e$L<e$B&&(e$B=e$L,e$o=e$Y,e$I=e$e,e$b=e$G)}if(e$B===Number.MAX_VALUE)return e$W.position.toDefault(),e$W.distance=Number.MAX_VALUE,e$W.trianglePositions[0].toDefault(),e$W.trianglePositions[1].toDefault(),e$W.trianglePositions[2].toDefault(),e$W.triangleNormals[0].toDefault(),e$W.triangleNormals[1].toDefault(),e$W.triangleNormals[2].toDefault(),!1;e$W.distance=e$B,e$At.scale(e$d.direction,e$B,e$W.position),e$At.add(e$d.origin,e$W.position,e$W.position);var e$$=e$W.trianglePositions,e$p=e$$[0],e$M=e$$[1],e$T=e$$[2],e$r=e$p.elements,e$S=e$M.elements,e$j=e$T.elements,e$C=e$o+e$A;e$r[0]=e$t[e$C],e$r[1]=e$t[e$C+1],e$r[2]=e$t[e$C+2];var e$K=e$I+e$A;e$S[0]=e$t[e$K],e$S[1]=e$t[e$K+1],e$S[2]=e$t[e$K+2];var e$x=e$b+e$A;e$j[0]=e$t[e$x],e$j[1]=e$t[e$x+1],e$j[2]=e$t[e$x+2];var e$n=e$l.getVertexElementByUsage(3);if(e$n){var e$Q=e$n.offset/4,e$y=e$W.triangleNormals,e$V=e$y[0],e$Z=e$y[1],e$U=e$y[2],e$E=e$V.elements,e$N=e$Z.elements,e$u=e$U.elements,e$h=e$o+e$Q;e$E[0]=e$t[e$h],e$E[1]=e$t[e$h+1],e$E[2]=e$t[e$h+2];var e$s=e$I+e$Q;e$N[0]=e$t[e$s],e$N[1]=e$t[e$s+1],e$N[2]=e$t[e$s+2];var e$P=e$b+e$Q;e$u[0]=e$t[e$P],e$u[1]=e$t[e$P+1],e$u[2]=e$t[e$P+2]}return!0},e$X.rayIntersectsTriangle=function(e$d,e$t,e$l,e$k){var e$W=e$X._tempVector30,e$i=e$X._tempVector31;e$At.subtract(e$l,e$t,e$W),e$At.subtract(e$k,e$t,e$i);var e$A,e$B=e$X._tempVector32;if(e$At.cross(e$d.direction,e$i,e$B),(e$A=e$At.dot(e$W,e$B))>-Number.MIN_VALUE&&e$A<Number.MIN_VALUE)return Number.NaN;var e$o,e$I=1/e$A,e$b=e$X._tempVector33;if(e$At.subtract(e$d.origin,e$t,e$b),e$o=e$At.dot(e$b,e$B),(e$o*=e$I)<0||1<e$o)return Number.NaN;var e$f,e$J,e$c=e$X._tempVector34;return e$At.cross(e$b,e$W,e$c),e$f=e$At.dot(e$d.direction,e$c),(e$f*=e$I)<0||1<e$o+e$f?Number.NaN:(e$J=e$At.dot(e$i,e$c),(e$J*=e$I)<0?Number.NaN:e$J)},e$f(e$X,["_tempVector30",function(){return this._tempVector30=new e$At},"_tempVector31",function(){return this._tempVector31=new e$At},"_tempVector32",function(){return this._tempVector32=new e$At},"_tempVector33",function(){return this._tempVector33=new e$At},"_tempVector34",function(){return this._tempVector34=new e$At},"_tempVector35",function(){return this._tempVector35=new e$At},"_tempVector36",function(){return this._tempVector36=new e$At},"_tempVector37",function(){return this._tempVector37=new e$At}]),e$X}(),e$wt=(function(){function e$d(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new e$At,new e$At,new e$At],this.trianglePositions.length=3,this.triangleNormals=[new e$At,new e$At,new e$At],this.triangleNormals.length=3,this.position=new e$At}e$c(e$d,"laya.d3.utils.RaycastHit"),e$d.prototype.cloneTo=function(e$d){e$d.distance=this.distance,this.trianglePositions[0].cloneTo(e$d.trianglePositions[0]),this.trianglePositions[1].cloneTo(e$d.trianglePositions[1]),this.trianglePositions[2].cloneTo(e$d.trianglePositions[2]),this.triangleNormals[0].cloneTo(e$d.triangleNormals[0]),this.triangleNormals[1].cloneTo(e$d.triangleNormals[1]),this.triangleNormals[2].cloneTo(e$d.triangleNormals[2]),this.position.cloneTo(e$d.position),e$d.sprite3D=this.sprite3D}}(),function(){function e$d(e$d,e$t){this._width=0,this._height=0,this._width=e$d,this._height=e$t}e$c(e$d,"laya.d3.utils.Size");var e$t=e$d.prototype;return e$Y(0,e$t,"width",function(){return-1===this._width?e$m.clientWidth:this._width}),e$Y(0,e$t,"height",function(){return-1===this._height?e$m.clientHeight:this._height}),e$Y(1,e$d,"fullScreen",function(){return new e$d(-1,-1)}),e$d}()),e$Dt=function(){function e$C(){}return e$c(e$C,"laya.d3.utils.Utils3D"),e$C._rotationTransformScaleSkinAnimation=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f){var e$J,e$c,e$Y,e$w,e$D,e$z=e$C._tempArray16_0,e$e=e$C._tempArray16_1,e$g=e$C._tempArray16_2,e$H=e$k+e$k,e$R=e$W+e$W,e$G=e$i+e$i,e$q=e$k*e$H,e$L=e$W*e$H,e$$=e$W*e$R,e$p=e$i*e$H,e$M=e$i*e$R,e$T=e$i*e$G,e$r=e$A*e$H,e$S=e$A*e$R,e$j=e$A*e$G;for(e$z[15]=1,e$z[0]=1-e$$-e$T,e$z[1]=e$L+e$j,e$z[2]=e$p-e$S,e$z[4]=e$L-e$j,e$z[5]=1-e$q-e$T,e$z[6]=e$M+e$r,e$z[8]=e$p+e$S,e$z[9]=e$M-e$r,e$z[10]=1-e$q-e$$,e$e[15]=1,e$e[0]=e$B,e$e[5]=e$o,e$e[10]=e$I,e$J=0;e$J<4;e$J++)e$c=e$z[e$J],e$Y=e$z[e$J+4],e$w=e$z[e$J+8],e$D=e$z[e$J+12],e$g[e$J]=e$c,e$g[e$J+4]=e$Y,e$g[e$J+8]=e$w,e$g[e$J+12]=e$c*e$d+e$Y*e$t+e$w*e$l+e$D;for(e$J=0;e$J<4;e$J++)e$c=e$g[e$J],e$Y=e$g[e$J+4],e$w=e$g[e$J+8],e$D=e$g[e$J+12],e$b[e$J+e$f]=e$c*e$e[0]+e$Y*e$e[1]+e$w*e$e[2]+e$D*e$e[3],e$b[e$J+e$f+4]=e$c*e$e[4]+e$Y*e$e[5]+e$w*e$e[6]+e$D*e$e[7],e$b[e$J+e$f+8]=e$c*e$e[8]+e$Y*e$e[9]+e$w*e$e[10]+e$D*e$e[11],e$b[e$J+e$f+12]=e$c*e$e[12]+e$Y*e$e[13]+e$w*e$e[14]+e$D*e$e[15]},e$C._createNodeByJson=function(e$d,e$t,e$l,e$k){if(!e$l)switch(e$t.type){case"Sprite3D":e$l=new e$xt;break;case"MeshSprite3D":e$l=new e$Xt;break;case"SkinnedMeshSprite3D":e$l=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":e$l=new ShuriKenParticle3D;break;case"TrailSprite3D":e$l=new TrailSprite3D;break;case"Terrain":e$l=new Terrain;break;case"Camera":e$l=new e$Pt;break;case"DirectionLight":e$l=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var e$W=e$t.props;if(e$W)for(var e$i in e$W)e$l[e$i]=e$W[e$i];var e$A=e$t.customProps;e$A&&(e$l instanceof laya.d3.core.Sprite3D?(e$l._parseBaseCustomProps(e$A),e$l._parseCustomProps(e$d,e$k,e$A,e$t),e$l._parseCustomComponent(e$d,e$k,e$t.components)):e$l._parseCustomProps(e$d,e$k,e$A,e$t));var e$B=e$t.child;if(e$B)for(var e$o=0,e$I=e$B.length;e$o<e$I;e$o++){var e$b=e$C._createNodeByJson(e$d,e$B[e$o],null,e$k);e$l.addChild(e$b)}return e$l},e$C._computeBoneAndAnimationDatasByBindPoseMatrxix=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A,e$B,e$o=0,e$I=0,e$b=e$d.length;for(e$A=0;e$A<e$b;e$o+=e$d[e$A].keyframeWidth,e$I+=16,e$A++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(e$t[e$o+0],e$t[e$o+1],e$t[e$o+2],e$t[e$o+3],e$t[e$o+4],e$t[e$o+5],e$t[e$o+6],e$t[e$o+7],e$t[e$o+8],e$t[e$o+9],e$k,e$I),0!=e$A&&(e$B=16*e$d[e$A].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(e$k,e$B,e$k,e$I,e$k,e$I));var e$f=e$l.length;for(e$A=0;e$A<e$f;e$A++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$k,16*e$i[e$A],e$l[e$A],e$W,16*e$A)},e$C._computeAnimationDatasByArrayAndMatrixFast=function(e$d,e$t,e$l,e$k){for(var e$W=0,e$i=e$d.length;e$W<e$i;e$W++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$t,16*e$k[e$W],e$d[e$W],e$l,16*e$W)},e$C._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(e$d,e$t,e$l,e$k,e$W){var e$i,e$A,e$B=0,e$o=0,e$I=e$d.length;for(e$i=0;e$i<e$I;e$B+=e$d[e$i].keyframeWidth,e$o+=16,e$i++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(e$t[e$B+7],e$t[e$B+8],e$t[e$B+9],e$t[e$B+3],e$t[e$B+4],e$t[e$B+5],e$t[e$B+6],e$t[e$B+0],e$t[e$B+1],e$t[e$B+2],e$k,e$o),0!=e$i&&(e$A=16*e$d[e$i].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(e$k,e$A,e$k,e$o,e$k,e$o));var e$b=e$l.length;for(e$i=0;e$i<e$b;e$i++){var e$f=16*e$i;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$k,e$f,e$l[e$i],e$W,e$f)}},e$C._computeAnimationDatasByArrayAndMatrixFastOld=function(e$d,e$t,e$l){for(var e$k=e$d.length,e$W=0;e$W<e$k;e$W++){var e$i=16*e$W;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(e$t,e$i,e$d[e$W],e$l,e$i)}},e$C._computeRootAnimationData=function(e$d,e$t,e$l){for(var e$k=0,e$W=0,e$i=0,e$A=e$d.length;e$k<e$A;e$W+=e$d[e$k].keyframeWidth,e$i+=16,e$k++)laya.d3.utils.Utils3D.createAffineTransformationArray(e$t[e$W+0],e$t[e$W+1],e$t[e$W+2],e$t[e$W+3],e$t[e$W+4],e$t[e$W+5],e$t[e$W+6],e$t[e$W+7],e$t[e$W+8],e$t[e$W+9],e$l,e$i)},e$C.transformVector3ArrayByQuat=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$l.elements,e$A=e$d[e$t],e$B=e$d[e$t+1],e$o=e$d[e$t+2],e$I=e$i[0],e$b=e$i[1],e$f=e$i[2],e$J=e$i[3],e$c=e$J*e$A+e$b*e$o-e$f*e$B,e$Y=e$J*e$B+e$f*e$A-e$I*e$o,e$w=e$J*e$o+e$I*e$B-e$b*e$A,e$D=-e$I*e$A-e$b*e$B-e$f*e$o;e$k[e$W]=e$c*e$J+e$D*-e$I+e$Y*-e$f-e$w*-e$b,e$k[e$W+1]=e$Y*e$J+e$D*-e$b+e$w*-e$I-e$c*-e$f,e$k[e$W+2]=e$w*e$J+e$D*-e$f+e$c*-e$b-e$Y*-e$I},e$C.mulMatrixByArray=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A,e$B,e$o,e$I,e$b;if(e$W===e$l){for(e$l=e$C._tempArray16_3,e$A=0;e$A<16;++e$A)e$l[e$A]=e$W[e$i+e$A];e$k=0}for(e$A=0;e$A<4;e$A++)e$B=e$d[e$t+e$A],e$o=e$d[e$t+e$A+4],e$I=e$d[e$t+e$A+8],e$b=e$d[e$t+e$A+12],e$W[e$i+e$A]=e$B*e$l[e$k+0]+e$o*e$l[e$k+1]+e$I*e$l[e$k+2]+e$b*e$l[e$k+3],e$W[e$i+e$A+4]=e$B*e$l[e$k+4]+e$o*e$l[e$k+5]+e$I*e$l[e$k+6]+e$b*e$l[e$k+7],e$W[e$i+e$A+8]=e$B*e$l[e$k+8]+e$o*e$l[e$k+9]+e$I*e$l[e$k+10]+e$b*e$l[e$k+11],e$W[e$i+e$A+12]=e$B*e$l[e$k+12]+e$o*e$l[e$k+13]+e$I*e$l[e$k+14]+e$b*e$l[e$k+15]},e$C.mulMatrixByArrayFast=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A,e$B,e$o,e$I,e$b;for(e$A=0;e$A<4;e$A++)e$B=e$d[e$t+e$A],e$o=e$d[e$t+e$A+4],e$I=e$d[e$t+e$A+8],e$b=e$d[e$t+e$A+12],e$W[e$i+e$A]=e$B*e$l[e$k+0]+e$o*e$l[e$k+1]+e$I*e$l[e$k+2]+e$b*e$l[e$k+3],e$W[e$i+e$A+4]=e$B*e$l[e$k+4]+e$o*e$l[e$k+5]+e$I*e$l[e$k+6]+e$b*e$l[e$k+7],e$W[e$i+e$A+8]=e$B*e$l[e$k+8]+e$o*e$l[e$k+9]+e$I*e$l[e$k+10]+e$b*e$l[e$k+11],e$W[e$i+e$A+12]=e$B*e$l[e$k+12]+e$o*e$l[e$k+13]+e$I*e$l[e$k+14]+e$b*e$l[e$k+15]},e$C.mulMatrixByArrayAndMatrixFast=function(e$d,e$t,e$l,e$k,e$W){var e$i,e$A,e$B,e$o,e$I,e$b=e$l.elements,e$f=e$b[0],e$J=e$b[1],e$c=e$b[2],e$Y=e$b[3],e$w=e$b[4],e$D=e$b[5],e$z=e$b[6],e$e=e$b[7],e$g=e$b[8],e$H=e$b[9],e$R=e$b[10],e$G=e$b[11],e$q=e$b[12],e$L=e$b[13],e$$=e$b[14],e$p=e$b[15],e$M=e$t,e$T=e$t+4,e$r=e$t+8,e$S=e$t+12,e$j=e$W,e$C=e$W+4,e$K=e$W+8,e$x=e$W+12;for(e$i=0;e$i<4;e$i++)e$A=e$d[e$M+e$i],e$B=e$d[e$T+e$i],e$o=e$d[e$r+e$i],e$I=e$d[e$S+e$i],e$k[e$j+e$i]=e$A*e$f+e$B*e$J+e$o*e$c+e$I*e$Y,e$k[e$C+e$i]=e$A*e$w+e$B*e$D+e$o*e$z+e$I*e$e,e$k[e$K+e$i]=e$A*e$g+e$B*e$H+e$o*e$R+e$I*e$G,e$k[e$x+e$i]=e$A*e$q+e$B*e$L+e$o*e$$+e$I*e$p},e$C.createAffineTransformationArray=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f){var e$J=e$k+e$k,e$c=e$W+e$W,e$Y=e$i+e$i,e$w=e$k*e$J,e$D=e$k*e$c,e$z=e$k*e$Y,e$e=e$W*e$c,e$g=e$W*e$Y,e$H=e$i*e$Y,e$R=e$A*e$J,e$G=e$A*e$c,e$q=e$A*e$Y;e$b[e$f+0]=(1-(e$e+e$H))*e$B,e$b[e$f+1]=(e$D+e$q)*e$B,e$b[e$f+2]=(e$z-e$G)*e$B,e$b[e$f+3]=0,e$b[e$f+4]=(e$D-e$q)*e$o,e$b[e$f+5]=(1-(e$w+e$H))*e$o,e$b[e$f+6]=(e$g+e$R)*e$o,e$b[e$f+7]=0,e$b[e$f+8]=(e$z+e$G)*e$I,e$b[e$f+9]=(e$g-e$R)*e$I,e$b[e$f+10]=(1-(e$w+e$e))*e$I,e$b[e$f+11]=0,e$b[e$f+12]=e$d,e$b[e$f+13]=e$t,e$b[e$f+14]=e$l,e$b[e$f+15]=1},e$C.transformVector3ArrayToVector3ArrayCoordinate=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$C._tempArray4_0,e$A=e$d[e$t+0],e$B=e$d[e$t+1],e$o=e$d[e$t+2],e$I=e$l.elements;e$i[0]=e$A*e$I[0]+e$B*e$I[4]+e$o*e$I[8]+e$I[12],e$i[1]=e$A*e$I[1]+e$B*e$I[5]+e$o*e$I[9]+e$I[13],e$i[2]=e$A*e$I[2]+e$B*e$I[6]+e$o*e$I[10]+e$I[14],e$i[3]=1/(e$A*e$I[3]+e$B*e$I[7]+e$o*e$I[11]+e$I[15]),e$k[e$W+0]=e$i[0]*e$i[3],e$k[e$W+1]=e$i[1]*e$i[3],e$k[e$W+2]=e$i[2]*e$i[3]},e$C.transformLightingMapTexcoordByUV0Array=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$l.elements;e$k[e$W+0]=e$d[e$t+0]*e$i[0]+e$i[2],e$k[e$W+1]=(e$d[e$t+1]-1)*e$i[1]+e$i[3]},e$C.transformLightingMapTexcoordByUV1Array=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$l.elements;e$k[e$W+0]=e$d[e$t+0]*e$i[0]+e$i[2],e$k[e$W+1]=1+e$d[e$t+1]*e$i[1]+e$i[3]},e$C.getURLVerion=function(e$d){var e$t=e$d.indexOf("?");return 0<=e$t?e$d.substr(e$t):null},e$C._quaternionCreateFromYawPitchRollArray=function(e$d,e$t,e$l,e$k){var e$W=.5*e$l,e$i=.5*e$t,e$A=.5*e$d,e$B=Math.sin(e$W),e$o=Math.cos(e$W),e$I=Math.sin(e$i),e$b=Math.cos(e$i),e$f=Math.sin(e$A),e$J=Math.cos(e$A);e$k[0]=e$J*e$I*e$o+e$f*e$b*e$B,e$k[1]=e$f*e$b*e$o-e$J*e$I*e$B,e$k[2]=e$J*e$b*e$B-e$f*e$I*e$o,e$k[3]=e$J*e$b*e$o+e$f*e$I*e$B},e$C._createAffineTransformationArray=function(e$d,e$t,e$l,e$k){var e$W=e$t[0],e$i=e$t[1],e$A=e$t[2],e$B=e$t[3],e$o=e$W+e$W,e$I=e$i+e$i,e$b=e$A+e$A,e$f=e$W*e$o,e$J=e$W*e$I,e$c=e$W*e$b,e$Y=e$i*e$I,e$w=e$i*e$b,e$D=e$A*e$b,e$z=e$B*e$o,e$e=e$B*e$I,e$g=e$B*e$b,e$H=e$l[0],e$R=e$l[1],e$G=e$l[2];e$k[0]=(1-(e$Y+e$D))*e$H,e$k[1]=(e$J+e$g)*e$H,e$k[2]=(e$c-e$e)*e$H,e$k[3]=0,e$k[4]=(e$J-e$g)*e$R,e$k[5]=(1-(e$f+e$D))*e$R,e$k[6]=(e$w+e$z)*e$R,e$k[7]=0,e$k[8]=(e$c+e$e)*e$G,e$k[9]=(e$w-e$z)*e$G,e$k[10]=(1-(e$f+e$Y))*e$G,e$k[11]=0,e$k[12]=e$d[0],e$k[13]=e$d[1],e$k[14]=e$d[2],e$k[15]=1},e$C._mulMatrixArray=function(e$d,e$t,e$l,e$k){var e$W,e$i,e$A,e$B,e$o,e$I=e$t.elements,e$b=e$I[0],e$f=e$I[1],e$J=e$I[2],e$c=e$I[3],e$Y=e$I[4],e$w=e$I[5],e$D=e$I[6],e$z=e$I[7],e$e=e$I[8],e$g=e$I[9],e$H=e$I[10],e$R=e$I[11],e$G=e$I[12],e$q=e$I[13],e$L=e$I[14],e$$=e$I[15],e$p=e$k,e$M=e$k+4,e$T=e$k+8,e$r=e$k+12;for(e$W=0;e$W<4;e$W++)e$i=e$d[e$W],e$A=e$d[e$W+4],e$B=e$d[e$W+8],e$o=e$d[e$W+12],e$l[e$p+e$W]=e$i*e$b+e$A*e$f+e$B*e$J+e$o*e$c,e$l[e$M+e$W]=e$i*e$Y+e$A*e$w+e$B*e$D+e$o*e$z,e$l[e$T+e$W]=e$i*e$e+e$A*e$g+e$B*e$H+e$o*e$R,e$l[e$r+e$W]=e$i*e$G+e$A*e$q+e$B*e$L+e$o*e$$},e$C.getYawPitchRoll=function(e$d,e$t){e$C.transformQuat(e$At.ForwardRH,e$d,e$lt.TEMPVector31),e$C.transformQuat(e$At.Up,e$d,e$lt.TEMPVector32);var e$l=e$lt.TEMPVector32.elements;e$C.angleTo(e$At.ZERO,e$lt.TEMPVector31,e$lt.TEMPVector33);var e$k=e$lt.TEMPVector33.elements;e$k[0]==Math.PI/2?(e$k[1]=e$C.arcTanAngle(e$l[2],e$l[0]),e$k[2]=0):e$k[0]==-Math.PI/2?(e$k[1]=e$C.arcTanAngle(-e$l[2],-e$l[0]),e$k[2]=0):(e$dt.createRotationY(-e$k[1],e$lt.TEMPMatrix0),e$dt.createRotationX(-e$k[0],e$lt.TEMPMatrix1),e$At.transformCoordinate(e$lt.TEMPVector32,e$lt.TEMPMatrix0,e$lt.TEMPVector32),e$At.transformCoordinate(e$lt.TEMPVector32,e$lt.TEMPMatrix1,e$lt.TEMPVector32),e$k[2]=e$C.arcTanAngle(e$l[1],-e$l[0])),e$k[1]<=-Math.PI&&(e$k[1]=Math.PI),e$k[2]<=-Math.PI&&(e$k[2]=Math.PI),e$k[1]>=Math.PI&&e$k[2]>=Math.PI&&(e$k[1]=0,e$k[2]=0,e$k[0]=Math.PI-e$k[0]),e$t[0]=e$k[1],e$t[1]=e$k[0],e$t[2]=e$k[2]},e$C.arcTanAngle=function(e$d,e$t){return 0==e$d?1==e$t?Math.PI/2:-Math.PI/2:0<e$d?Math.atan(e$t/e$d):e$d<0?0<e$t?Math.atan(e$t/e$d)+Math.PI:Math.atan(e$t/e$d)-Math.PI:0},e$C.angleTo=function(e$d,e$t,e$l){e$At.subtract(e$t,e$d,e$lt.TEMPVector30),e$At.normalize(e$lt.TEMPVector30,e$lt.TEMPVector30),e$l.elements[0]=Math.asin(e$lt.TEMPVector30.y),e$l.elements[1]=e$C.arcTanAngle(-e$lt.TEMPVector30.z,-e$lt.TEMPVector30.x)},e$C.transformQuat=function(e$d,e$t,e$l){var e$k=e$l.elements,e$W=e$d.elements,e$i=e$t,e$A=e$W[0],e$B=e$W[1],e$o=e$W[2],e$I=e$i[0],e$b=e$i[1],e$f=e$i[2],e$J=e$i[3],e$c=e$J*e$A+e$b*e$o-e$f*e$B,e$Y=e$J*e$B+e$f*e$A-e$I*e$o,e$w=e$J*e$o+e$I*e$B-e$b*e$A,e$D=-e$I*e$A-e$b*e$B-e$f*e$o;e$k[0]=e$c*e$J+e$D*-e$I+e$Y*-e$f-e$w*-e$b,e$k[1]=e$Y*e$J+e$D*-e$b+e$w*-e$I-e$c*-e$f,e$k[2]=e$w*e$J+e$D*-e$f+e$c*-e$b-e$Y*-e$I},e$C.quaterionNormalize=function(e$d,e$t){var e$l=e$d[0],e$k=e$d[1],e$W=e$d[2],e$i=e$d[3],e$A=e$l*e$l+e$k*e$k+e$W*e$W+e$i*e$i;0<e$A&&(e$A=1/Math.sqrt(e$A),e$t[0]=e$l*e$A,e$t[1]=e$k*e$A,e$t[2]=e$W*e$A,e$t[3]=e$i*e$A)},e$C.matrix4x4MultiplyFFF=function(e$d,e$t,e$l){var e$k,e$W,e$i,e$A,e$B;if(e$l===e$t)for(e$t=new Float32Array(16),e$k=0;e$k<16;++e$k)e$t[e$k]=e$l[e$k];for(e$k=0;e$k<4;e$k++)e$W=e$d[e$k],e$i=e$d[e$k+4],e$A=e$d[e$k+8],e$B=e$d[e$k+12],e$l[e$k]=e$W*e$t[0]+e$i*e$t[1]+e$A*e$t[2]+e$B*e$t[3],e$l[e$k+4]=e$W*e$t[4]+e$i*e$t[5]+e$A*e$t[6]+e$B*e$t[7],e$l[e$k+8]=e$W*e$t[8]+e$i*e$t[9]+e$A*e$t[10]+e$B*e$t[11],e$l[e$k+12]=e$W*e$t[12]+e$i*e$t[13]+e$A*e$t[14]+e$B*e$t[15]},e$C.matrix4x4MultiplyMFM=function(e$d,e$t,e$l){e$C.matrix4x4MultiplyFFF(e$d.elements,e$t,e$l.elements)},e$f(e$C,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new e$At},"_tempVector3_1",function(){return this._tempVector3_1=new e$At},"_tempVector3_2",function(){return this._tempVector3_2=new e$At},"_tempVector3_3",function(){return this._tempVector3_3=new e$At},"_tempVector3_4",function(){return this._tempVector3_4=new e$At},"_tempVector3_5",function(){return this._tempVector3_5=new e$At},"_tempVector3_6",function(){return this._tempVector3_6=new e$At},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),e$C}(),e$zt=function(){function e$S(){}return e$c(e$S,"Laya3D"),e$S._cancelLoadByUrl=function(e$d){e$R.loader.cancelLoadByUrl(e$d),e$S._innerFirstLevelLoaderManager.cancelLoadByUrl(e$d),e$S._innerSecondLevelLoaderManager.cancelLoadByUrl(e$d),e$S._innerThirdLevelLoaderManager.cancelLoadByUrl(e$d),e$S._innerFourthLevelLoaderManager.cancelLoadByUrl(e$d)},e$S._changeWebGLSize=function(e$d,e$t){e$r.onStageResize(e$d,e$t),e$m.clientWidth=e$d,e$m.clientHeight=e$t},e$S.__init__=function(){var e$d=e$t.createMap;e$d.lh=[e$xt,"SPRITE3DHIERARCHY"],e$d.ls=[e$Kt,"SPRITE3DHIERARCHY"],e$d.lm=[e$Et,"MESH"],e$d.lmat=[e$Qt,"MATERIAL"],e$d.jpg=[e$ut,"nativeimage"],e$d.jpeg=[e$ut,"nativeimage"],e$d.png=[e$ut,"nativeimage"],e$d.pkm=[e$ut,"arraybuffer"],e$d.raw=[e$Zt,"arraybuffer"],e$d.mipmaps=[e$Zt,"arraybuffer"],e$z.parserMap.SPRITE3DHIERARCHY=e$S._loadHierarchy,e$z.parserMap.MESH=e$S._loadMesh,e$z.parserMap.MATERIAL=e$S._loadMaterial,e$z.parserMap.TEXTURECUBE=e$S._loadTextureCube,e$z.parserMap.TERRAIN=e$S._loadTerrain,e$S._innerFirstLevelLoaderManager.on("error",null,e$S._eventLoadManagerError),e$S._innerSecondLevelLoaderManager.on("error",null,e$S._eventLoadManagerError),e$S._innerThirdLevelLoaderManager.on("error",null,e$S._eventLoadManagerError),e$S._innerFourthLevelLoaderManager.on("error",null,e$S._eventLoadManagerError)},e$S.READ_BLOCK=function(){return e$S._readData.pos+=4,!0},e$S.READ_DATA=function(){return e$S._DATA.offset=e$S._readData.getUint32(),e$S._DATA.size=e$S._readData.getUint32(),!0},e$S.READ_STRINGS=function(){var e$d=[],e$t={offset:0,size:0};e$t.offset=e$S._readData.getUint16(),e$t.size=e$S._readData.getUint16();e$S._readData.pos;e$S._readData.pos=e$t.offset+e$S._DATA.offset;for(var e$l=0;e$l<e$t.size;e$l++){var e$k=e$S._readData.readUTFString();-1===e$k.lastIndexOf(".lmat")&&-1===e$k.lastIndexOf(".lpbr")||e$d.push(e$k)}return e$d},e$S.formatRelativePath=function(e$d,e$t){var e$l;if("."===e$t.charAt(0)){for(var e$k=(e$d+e$t).split("/"),e$W=0,e$i=e$k.length;e$W<e$i;e$W++)if(".."==e$k[e$W]){var e$A=e$W-1;0<e$A&&".."!==e$k[e$A]&&(e$k.splice(e$A,2),e$W-=2)}e$l=e$k.join("/")}else e$l=e$d+e$t;return null!=e$T.customFormat&&(e$l=e$T.customFormat(e$l,null)),e$l},e$S._eventLoadManagerError=function(e$d){e$R.loader.event("error",e$d)},e$S._addHierarchyInnerUrls=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A=e$S.formatRelativePath(e$k,e$W);e$l&&(e$A+=e$l),e$d.push({url:e$A,clas:e$i}),e$t[e$W]=e$A},e$S._getSprite3DHierarchyInnerUrls=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){var e$B,e$o=0,e$I=0;switch(e$d.type){case"Scene":var e$b=e$d.customProps.lightmaps;for(e$o=0,e$I=e$b.length;e$o<e$I;e$o++){var e$f=e$b[e$o].replace(".exr",".png");e$S._addHierarchyInnerUrls(e$k,e$W,e$i,e$A,e$f,e$ut)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var e$J;if(e$d.instanceParams)(e$J=e$d.instanceParams.loadPath)&&e$S._addHierarchyInnerUrls(e$t,e$W,e$i,e$A,e$J,e$Et);else{(e$J=(e$B=e$d.customProps).meshPath)&&e$S._addHierarchyInnerUrls(e$t,e$W,e$i,e$A,e$J,e$Et);var e$c=e$B.materials;if(e$c)for(e$o=0,e$I=e$c.length;e$o<e$I;e$o++){for(var e$Y=e$c[e$o],e$w=e$Y.type.split("."),e$D=e$j.window,e$z=0,e$e=e$w.length;e$z<e$e;++e$z){e$D=e$D[this.clasPaths[e$z]]}if("function"!=typeof e$D)throw"_getSprite3DHierarchyInnerUrls 错误: "+e$Y.type+" 不是类";e$S._addHierarchyInnerUrls(e$l,e$W,e$i,e$A,e$Y.path,e$D)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var e$g=(e$B=e$d.customProps).meshPath;e$g&&e$S._addHierarchyInnerUrls(e$t,e$W,e$i,e$A,e$g,e$Et);var e$H=e$B.material;if(e$H){e$w=e$H.type.split("."),e$D=e$j.window;for(e$z=0,e$e=e$w.length;e$z<e$e;++e$z){e$D=e$D[this.clasPaths[e$z]]}e$S._addHierarchyInnerUrls(e$l,e$W,e$i,e$A,e$H.path,e$D)}else{var e$R=e$B.materialPath;if(e$R)e$S._addHierarchyInnerUrls(e$l,e$W,e$i,e$A,e$R,ShurikenParticleMaterial);else{var e$G=e$B.texturePath;e$G&&e$S._addHierarchyInnerUrls(e$k,e$W,e$i,e$A,e$G,e$ut)}}break;case"Terrain":e$S._addHierarchyInnerUrls(e$k,e$W,e$i,e$A,e$d.customProps.dataPath,TerrainRes)}var e$q=e$d.components;for(var e$L in e$q){var e$$=e$q[e$L];switch(e$L){case"Animator":var e$p=e$$.avatarPath;if(e$p)e$S._addHierarchyInnerUrls(e$k,e$W,e$i,e$A,e$p,Avatar);else{var e$M=e$$.avatar;e$M&&e$S._addHierarchyInnerUrls(e$k,e$W,e$i,e$A,e$M.path,Avatar)}var e$T=e$$.clipPaths;for(e$o=0,e$I=e$T.length;e$o<e$I;e$o++)e$S._addHierarchyInnerUrls(e$k,e$W,e$i,e$A,e$T[e$o],AnimationClip)}}var e$r=e$d.child;for(e$o=0,e$I=e$r.length;e$o<e$I;e$o++)e$S._getSprite3DHierarchyInnerUrls(e$r[e$o],e$t,e$l,e$k,e$W,e$i,e$A)},e$S._loadHierarchy=function(e$d){e$d.on("loaded",null,e$S._onHierarchylhLoaded,[e$d,e$d._class._getGroup()]),e$d.load(e$d.url,"json",!1,null,!0)},e$S._onHierarchylhLoaded=function(e$d,e$t,e$l){if(e$d._class.destroyed)e$d.endLoad();else{var e$k=e$d.url,e$W=e$Dt.getURLVerion(e$k),e$i=e$T.getPath(e$k),e$A=[],e$B=[],e$o=[],e$I={};e$S._getSprite3DHierarchyInnerUrls(e$l,e$A,e$B,e$o,e$I,e$W,e$i);var e$b=e$A.length+e$B.length+e$o.length,e$f=e$b+1,e$J=1/e$f;if(e$S._onProcessChange(e$d,0,e$J,1),0<e$o.length){var e$c=e$b/e$f,e$Y=e$M.create(null,e$S._onProcessChange,[e$d,e$J,e$c],!1);e$S._innerFourthLevelLoaderManager.create(e$o,e$M.create(null,e$S._onHierarchyInnerForthLevResouLoaded,[e$d,e$t,e$Y,e$l,e$I,e$A,e$B,e$J+e$c*e$o.length,e$c]),e$Y,null,null,1,!0,e$t)}else e$S._onHierarchyInnerForthLevResouLoaded(e$d,e$t,null,e$l,e$I,e$A,e$B,e$J,e$c)}},e$S._onHierarchyInnerForthLevResouLoaded=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){if(e$d._class.destroyed)e$d.endLoad();else if(e$l&&e$l.recover(),0<e$A.length){var e$I=e$M.create(null,e$S._onProcessChange,[e$d,e$B,e$o],!1);e$S._innerSecondLevelLoaderManager.create(e$A,e$M.create(null,e$S._onHierarchyInnerSecondLevResouLoaded,[e$d,e$t,e$I,e$k,e$W,e$i,e$B+e$o*e$A.length,e$o]),e$l,null,null,1,!0,e$t)}else e$S._onHierarchyInnerSecondLevResouLoaded(e$d,e$t,null,e$k,e$W,e$i,e$B,e$o)},e$S._onHierarchyInnerSecondLevResouLoaded=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B){if(e$d._class.destroyed)e$d.endLoad();else if(e$l&&e$l.recover(),0<e$i.length){var e$o=e$M.create(null,e$S._onProcessChange,[e$d,e$A,e$B],!1);e$S._innerFirstLevelLoaderManager.create(e$i,e$M.create(null,e$S._onHierarchyInnerFirstLevResouLoaded,[e$d,e$o,e$k,e$W]),e$l,null,null,1,!0,e$t)}else e$S._onHierarchyInnerFirstLevResouLoaded(e$d,null,e$k,e$W)},e$S._onHierarchyInnerFirstLevResouLoaded=function(e$d,e$t,e$l,e$k){e$t&&e$t.recover(),e$d.endLoad([e$l,e$k])},e$S._loadTerrain=function(e$d){e$d.on("loaded",null,e$S._onTerrainLtLoaded,[e$d,e$d._class._getGroup()]),e$d.load(e$d.url,"json",!1,null,!0)},e$S._onTerrainLtLoaded=function(e$d,e$t,e$l){if(e$d._class.destroyed)e$d.endLoad();else{var e$k,e$W,e$i=e$d.url,e$A=e$Dt.getURLVerion(e$i),e$B=e$T.getPath(e$i),e$o=[],e$I={},e$b=0,e$f=0,e$J=e$l.heightData;e$k=e$J.url,e$W=e$S.formatRelativePath(e$B,e$k),e$A&&(e$W+=e$A),e$k=e$I[e$k]=e$W;var e$c=e$l.detailTexture;for(e$b=0,e$f=e$c.length;e$b<e$f;e$b++)e$o.push({url:e$c[e$b].diffuse});var e$Y=e$l.normalMap;for(e$b=0,e$f=e$Y.length;e$b<e$f;e$b++)e$o.push({url:e$Y[e$b]});var e$w=e$l.alphaMap;for(e$b=0,e$f=e$w.length;e$b<e$f;e$b++)e$o.push({url:e$w[e$b],params:[!1,!1,6408,!0]});for(e$b=0,e$f=e$o.length;e$b<e$f;e$b++){var e$D=e$o[e$b].url;e$W=e$S.formatRelativePath(e$B,e$D),e$A&&(e$W+=e$A),e$o[e$b].url=e$W,e$I[e$D]=e$W}var e$z=e$o.length,e$e=e$z+2,e$g=1/e$e;e$S._onProcessChange(e$d,0,e$g,1);var e$H={heightMapLoaded:!1,texturesLoaded:!1},e$R=e$M.create(null,e$S._onProcessChange,[e$d,e$g,e$g],!1);e$S._innerFourthLevelLoaderManager.create(e$k,e$M.create(null,e$S._onTerrainHeightMapLoaded,[e$d,e$R,e$l,e$I,e$H]),e$R,null,[e$J.numX,e$J.numZ,e$J.bitType,e$J.value],1,!0,e$t);var e$G=e$M.create(null,e$S._onProcessChange,[e$d,2*e$g,e$z/e$e],!1);e$S._innerFourthLevelLoaderManager.create(e$o,e$M.create(null,e$S._onTerrainTexturesLoaded,[e$d,e$G,e$l,e$I,e$H]),e$G,null,null,1,!0,e$t)}},e$S._onTerrainHeightMapLoaded=function(e$d,e$t,e$l,e$k,e$W){e$W.heightMapLoaded=!0,e$W.texturesLoaded&&(e$d.endLoad([e$l,e$k]),e$t.recover())},e$S._onTerrainTexturesLoaded=function(e$d,e$t,e$l,e$k,e$W){e$W.texturesLoaded=!0,e$W.heightMapLoaded&&(e$d.endLoad([e$l,e$k]),e$t.recover())},e$S._loadMesh=function(e$d){e$d.on("loaded",null,e$S._onMeshLmLoaded,[e$d,e$d._class._getGroup()]),e$d.load(e$d.url,"arraybuffer",!1,null,!0)},e$S._onMeshLmLoaded=function(e$d,e$t,e$l){if(e$d._class.destroyed)e$d.endLoad();else{var e$k,e$W,e$i,e$A=e$d.url,e$B=e$Dt.getURLVerion(e$A),e$o=e$T.getPath(e$A),e$I={},e$b=0,e$f=0;switch((e$S._readData=new e$G(e$l)).pos=0,e$S._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var e$J=e$S._readData.getUint32();e$S._readData.pos=e$S._readData.pos+4,e$f=e$S._readData.getUint16(),e$S._readData.pos=e$S._readData.pos+8*e$f;var e$c=e$S._readData.getUint32();for(e$f=e$S._readData.getUint16(),e$S._readData.pos=e$J+e$c,e$k=[],e$b=0;e$b<e$f;e$b++){var e$Y=e$S._readData.readUTFString();-1!==e$Y.lastIndexOf(".lmat")&&e$k.push(e$Y)}break;default:for(e$S.READ_BLOCK(),e$b=0;e$b<2;e$b++){var e$w=e$S._readData.getUint16(),e$D=e$S._strings[e$w],e$z=e$S["READ_"+e$D];if(null==e$z)throw new Error("model file err,no this function:"+e$w+" "+e$D);1===e$b?e$k=e$z.call():e$z.call()}}for(e$b=0,e$i=e$k.length;e$b<e$i;e$b++){var e$e=e$k[e$b];e$W=e$S.formatRelativePath(e$o,e$e),e$B&&(e$W+=e$B),e$k[e$b]=e$W,e$I[e$e]=e$W}if(0<e$k.length){e$S._onProcessChange(e$d,0,.5,1);var e$g=e$M.create(null,e$S._onProcessChange,[e$d,.5,.5],!1);e$S._innerSecondLevelLoaderManager.create(e$k,e$M.create(null,e$S._onMeshMateialLoaded,[e$d,e$g,e$l,e$I]),e$g,null,null,1,!0,e$t)}else e$d.endLoad([e$l,e$I])}},e$S._onMeshMateialLoaded=function(e$d,e$t,e$l,e$k){e$d.endLoad([e$l,e$k]),e$t.recover()},e$S._getMaterialTexturePath=function(e$d,e$t,e$l){var e$k=e$d.length-4;return e$d.indexOf(".dds")!=e$k&&e$d.indexOf(".tga")!=e$k&&e$d.indexOf(".exr")!=e$k&&e$d.indexOf(".DDS")!=e$k&&e$d.indexOf(".TGA")!=e$k&&e$d.indexOf(".EXR")!=e$k||(e$d=e$d.substr(0,e$k)+".png"),e$d=e$S.formatRelativePath(e$l,e$d),e$t&&(e$d+=e$t),e$d},e$S._loadMaterial=function(e$d){e$d.on("loaded",null,e$S._onMaterilLmatLoaded,[e$d,e$d._class._getGroup()]),e$d.load(e$d.url,"json",!1,null,!0)},e$S._onMaterilLmatLoaded=function(e$d,e$t,e$l){if(e$d._class.destroyed)e$d.endLoad();else{var e$k,e$W=e$d.url,e$i=e$Dt.getURLVerion(e$W),e$A=e$T.getPath(e$W),e$B=[],e$o={},e$I=e$l.customProps,e$b=e$l.version;if(e$b)switch(e$b){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var e$f=e$l.props.textures,e$J=0,e$c=e$f.length;e$J<e$c;e$J++){var e$Y=e$f[e$J],e$w=e$Y.path;if(e$w){var e$D=e$w.length-4;e$w.indexOf(".exr")!=e$D&&e$w.indexOf(".EXR")!=e$D||(e$w=e$w.substr(0,e$D)+".png"),e$k=e$S.formatRelativePath(e$A,e$w),e$i&&(e$k+=e$i),e$B.push({url:e$k,params:e$Y.params}),e$o[e$w]=e$k}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var e$z=e$I.diffuseTexture.texture2D;if(e$z&&(e$k=e$S._getMaterialTexturePath(e$z,e$i,e$A),e$B.push(e$k),e$o[e$z]=e$k),e$I.normalTexture){var e$e=e$I.normalTexture.texture2D;e$e&&(e$k=e$S._getMaterialTexturePath(e$e,e$i,e$A),e$B.push(e$k),e$o[e$e]=e$k)}if(e$I.specularTexture){var e$g=e$I.specularTexture.texture2D;e$g&&(e$k=e$S._getMaterialTexturePath(e$g,e$i,e$A),e$B.push(e$k),e$o[e$g]=e$k)}if(e$I.emissiveTexture){var e$H=e$I.emissiveTexture.texture2D;e$H&&(e$k=e$S._getMaterialTexturePath(e$H,e$i,e$A),e$B.push(e$k),e$o[e$H]=e$k)}if(e$I.ambientTexture){var e$R=e$I.ambientTexture.texture2D;e$R&&(e$k=e$S._getMaterialTexturePath(e$R,e$i,e$A),e$B.push(e$k),e$o[e$R]=e$k)}if(e$I.reflectTexture){var e$G=e$I.reflectTexture.texture2D;e$G&&(e$k=e$S._getMaterialTexturePath(e$G,e$i,e$A),e$B.push(e$k),e$o[e$G]=e$k)}}var e$q=e$B.length,e$L=e$q+1,e$$=1/e$L;if(e$S._onProcessChange(e$d,0,e$$,1),0<e$q){var e$p=e$M.create(null,e$S._onProcessChange,[e$d,e$$,e$q/e$L],!1);e$S._innerFourthLevelLoaderManager.create(e$B,e$M.create(null,e$S._onMateialTexturesLoaded,[e$d,e$p,e$l,e$o]),e$p,e$ut,null,1,!0,e$t)}else e$S._onMateialTexturesLoaded(e$d,null,e$l,null)}},e$S._onMateialTexturesLoaded=function(e$d,e$t,e$l,e$k){e$d.endLoad([e$l,e$k]),e$t&&e$t.recover()},e$S._loadTextureCube=function(e$d){e$d.on("loaded",null,e$S._onTextureCubeLtcLoaded,[e$d]),e$d.load(e$d.url,"json",!1,null,!0)},e$S._onTextureCubeLtcLoaded=function(e$d,e$t){if(e$d._class.destroyed)e$d.endLoad();else{var e$l=e$T.getPath(e$d.url),e$k=[e$S.formatRelativePath(e$l,e$t.px),e$S.formatRelativePath(e$l,e$t.nx),e$S.formatRelativePath(e$l,e$t.py),e$S.formatRelativePath(e$l,e$t.ny),e$S.formatRelativePath(e$l,e$t.pz),e$S.formatRelativePath(e$l,e$t.nz)];e$S._onProcessChange(e$d,0,1/7,1);var e$W=e$M.create(null,e$S._onProcessChange,[e$d,1/7,6/7],!1);e$S._innerFourthLevelLoaderManager.load(e$k,e$M.create(null,e$S._onTextureCubeImagesLoaded,[e$d,e$k,e$W]),e$W,"nativeimage")}},e$S._onTextureCubeImagesLoaded=function(e$d,e$t,e$l){var e$k=[];e$k.length=6;for(var e$W=0;e$W<6;e$W++){var e$i=e$t[e$W];e$k[e$W]=e$z.getRes(e$i),e$z.clearRes(e$i)}e$d.endLoad(e$k),e$l.recover()},e$S._onProcessChange=function(e$d,e$t,e$l,e$k){(e$k=e$t+e$k*e$l)<1&&e$d.event("progress",e$k)},e$S.init=function(e$d,e$t,e$l,e$k,e$W,e$i){if(void 0===e$l&&(e$l=!1),void 0===e$k&&(e$k=!1),void 0===e$W&&(e$W=!0),void 0===e$i&&(e$i=!0),e$e.update3DLoop=function(){},e$e.cancelLoadByUrl=function(e$d){e$S._cancelLoadByUrl(e$d)},e$o.isAntialias=e$l,e$o.isAlpha=e$k,e$o.premultipliedAlpha=e$W,e$o.isStencil=e$i,!e$r.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");e$e.changeWebGLSize=e$S._changeWebGLSize,e$w.is3DMode=!0,e$R.init(e$d,e$t),e$C.__init__(),e$ft.__init__(),e$Xt.__init__(),e$U.__init__(),e$S.__init__(),e$A.maxTextureCount=2,(e$S.debugMode||e$O.debugMode)&&(e$S._debugPhasorSprite=new e$s)},e$S.HIERARCHY="SPRITE3DHIERARCHY",e$S.MESH="MESH",e$S.MATERIAL="MATERIAL",e$S.PBRMATERIAL="PBRMTL",e$S.TEXTURECUBE="TEXTURECUBE",e$S.TERRAIN="TERRAIN",e$S._readData=null,e$S._debugPhasorSprite=null,e$S.debugMode=!1,e$f(e$S,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new e$t},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new e$t},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new e$t},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new e$t}]),e$S}(),e$et=function(e$d){function e$W(e$d){e$W.__super.call(this),this._owner=e$d,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}e$c(e$W,"laya.d3.animation.AnimationTransform3D",e$i);var e$t=e$W.prototype;return e$t._getlocalMatrix=function(){return this._localUpdate&&(e$Dt._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},e$t._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._onWorldTransform()}},e$t._setWorldMatrixAndUpdate=function(e$d){if(this._worldMatrix=e$d,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var e$t=this._getlocalMatrix(),e$l=0;e$l<16;++e$l)this._worldMatrix[e$l]=e$t[e$l];else e$Dt.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},e$t._setWorldMatrixNoUpdate=function(e$d){this._worldMatrix=e$d},e$t._setWorldMatrixIgnoreUpdate=function(e$d){this._worldMatrix=e$d,this._worldUpdate=!1},e$t.getLocalPosition=function(){return this._localPosition},e$t.setLocalPosition=function(e$d){if(this._parent)this._localPosition=e$d,this._localUpdate=!0,this._onWorldTransform();else{var e$t=this._entity.owner._transform,e$l=this._entity.localPosition,e$k=e$l.elements;e$k[0]=e$d[0],e$k[1]=e$d[1],e$k[2]=e$d[2],e$t.localPosition=e$l}},e$t.getLocalRotation=function(){if(this._localQuaternionUpdate){var e$d=this._localRotationEuler;e$Dt._quaternionCreateFromYawPitchRollArray(e$d[1]/e$W._angleToRandin,e$d[0]/e$W._angleToRandin,e$d[2]/e$W._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},e$t.setLocalRotation=function(e$d){if(this._parent)this._localRotation=e$d,e$Dt.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var e$t=this._entity.owner._transform,e$l=this._entity.localRotation,e$k=e$l.elements;e$k[0]=e$d[0],e$k[1]=e$d[1],e$k[2]=e$d[2],e$k[3]=e$d[3],e$t.localRotation=e$l}},e$t.getLocalScale=function(){return this._localScale},e$t.setLocalScale=function(e$d){if(this._parent)this._localScale=e$d,this._localUpdate=!0,this._onWorldTransform();else{var e$t=this._entity.owner._transform,e$l=this._entity.localScale,e$k=e$l.elements;e$k[0]=e$d[0],e$k[1]=e$d[1],e$k[2]=e$d[2],e$t.localScale=e$l}},e$t.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){e$Dt.getYawPitchRoll(this._localRotation,e$W._tempVector3);var e$d=e$W._tempVector3,e$t=this._localRotationEuler;e$t[0]=e$d[1]*e$W._angleToRandin,e$t[1]=e$d[0]*e$W._angleToRandin,e$t[2]=e$d[2]*e$W._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},e$t.setLocalRotationEuler=function(e$d){if(this._parent)e$Dt._quaternionCreateFromYawPitchRollArray(e$d[1]/e$W._angleToRandin,e$d[0]/e$W._angleToRandin,e$d[2]/e$W._angleToRandin,this._localRotation),this._localRotationEuler=e$d,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var e$t=this._entity.owner._transform,e$l=this._entity.localRotationEuler,e$k=e$l.elements;e$k[0]=e$d[0],e$k[1]=e$d[1],e$k[2]=e$d[2],e$t.localRotationEuler=e$l}},e$t.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)e$Dt.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var e$d=this._getlocalMatrix(),e$t=0;e$t<16;++e$t)this._worldMatrix[e$t]=e$d[e$t];this._worldUpdate=!1}return this._worldMatrix},e$t.setParent=function(e$d){if(this._parent!==e$d){if(this._parent){var e$t=this._parent._childs,e$l=e$t.indexOf(this);e$t.splice(e$l,1)}e$d&&(e$d._childs.push(this),e$d&&this._onWorldTransform()),this._parent=e$d}},e$f(e$W,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),e$W}(),e$gt=function(e$d){function e$t(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,e$t.__super.call(this),this._destroyed=!1,this._id=e$t._uniqueIDCounter,e$t._uniqueIDCounter++}e$c(e$t,"laya.d3.component.Component3D",e$i);var e$l=e$t.prototype;return e$R.imps(e$l,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),e$l._initialize=function(e$d){this._owner=e$d,this._enable=!0,this.started=!1,this._load(e$d)},e$l._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},e$l._load=function(e$d){},e$l._start=function(e$d){},e$l._update=function(e$d){},e$l._lateUpdate=function(e$d){},e$l._preRenderUpdate=function(e$d){},e$l._postRenderUpdate=function(e$d){},e$l._unload=function(e$d){this.offAll()},e$l._cloneTo=function(e$d){},e$Y(0,e$l,"id",function(){return this._id}),e$Y(0,e$l,"destroyed",function(){return this._destroyed}),e$Y(0,e$l,"owner",function(){return this._owner}),e$Y(0,e$l,"enable",function(){return this._enable},function(e$d){this._enable!==e$d&&(this._enable=e$d,this.event("enablechanged",this._enable))}),e$Y(0,e$l,"isSingleton",function(){return e$t._isSingleton}),e$t._isSingleton=!0,e$t._uniqueIDCounter=1,e$t}(),e$Ht=function(e$d){function e$t(){this._destroyed=!1,e$t.__super.call(this),this._destroyed=!1}e$c(e$t,"laya.d3.core.GeometryFilter",e$i);var e$l=e$t.prototype;return e$R.imps(e$l,{"laya.resource.IDestroy":!0}),e$l._destroy=function(){this.offAll(),this._destroyed=!0},e$Y(0,e$l,"_isAsyncLoaded",function(){return!0}),e$Y(0,e$l,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),e$Y(0,e$l,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),e$Y(0,e$l,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),e$Y(0,e$l,"destroyed",function(){return this._destroyed}),e$t}(),e$Rt=function(e$d){function e$k(e$d){e$k.__super.call(this),this._id=++e$k._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new e$Od(new e$At,new e$At),this._boundingBoxCenter=new e$At,this._boundingSphere=new e$ad(new e$At,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=e$d,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}e$c(e$k,"laya.d3.core.render.BaseRender",e$i);var e$t=e$k.prototype;return e$R.imps(e$t,{"laya.resource.IDestroy":!0}),e$t._changeMaterialReference=function(e$d,e$t){e$d&&e$d._removeReference(),e$t._addReference()},e$t._getInstanceMaterial=function(e$d,e$t){var e$l=new e$d.constructor;return e$d.cloneTo(e$l),e$l.name=e$l.name+"(Instance)",this._materialsInstance[e$t]=!0,this._changeMaterialReference(this._materials[e$t],e$l),this._materials[e$t]=e$l},e$t._setShaderValuelightMap=function(e$d){this._setShaderValueTexture(3,e$d)},e$t._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},e$t._renderRenderableBoundBox=function(){var e$d=e$zt._debugPhasorSprite,e$t=this.boundingBox,e$l=e$k._tempBoundBoxCorners;e$t.getCorners(e$l),e$d.line(e$l[0],e$k._greenColor,e$l[1],e$k._greenColor),e$d.line(e$l[2],e$k._greenColor,e$l[3],e$k._greenColor),e$d.line(e$l[4],e$k._greenColor,e$l[5],e$k._greenColor),e$d.line(e$l[6],e$k._greenColor,e$l[7],e$k._greenColor),e$d.line(e$l[0],e$k._greenColor,e$l[3],e$k._greenColor),e$d.line(e$l[1],e$k._greenColor,e$l[2],e$k._greenColor),e$d.line(e$l[2],e$k._greenColor,e$l[6],e$k._greenColor),e$d.line(e$l[3],e$k._greenColor,e$l[7],e$k._greenColor),e$d.line(e$l[0],e$k._greenColor,e$l[4],e$k._greenColor),e$d.line(e$l[1],e$k._greenColor,e$l[5],e$k._greenColor),e$d.line(e$l[4],e$k._greenColor,e$l[7],e$k._greenColor),e$d.line(e$l[5],e$k._greenColor,e$l[6],e$k._greenColor)},e$t._calculateBoundingSphere=function(){throw"BaseRender: must override it."},e$t._calculateBoundingBox=function(){throw"BaseRender: must override it."},e$t._setShaderValueTexture=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t)},e$t._setShaderValueMatrix4x4=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t?e$t.elements:null)},e$t._setShaderValueColor=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t?e$t.elements:null)},e$t._setShaderValueBuffer=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t)},e$t._setShaderValueInt=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t)},e$t._setShaderValueBool=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t)},e$t._setShaderValueNumber=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t)},e$t._setShaderValueVector2=function(e$d,e$t){this._owner._shaderValues.setValue(e$d,e$t?e$t.elements:null)},e$t._addShaderDefine=function(e$d){this._owner._shaderDefineValue|=e$d},e$t._removeShaderDefine=function(e$d){this._owner._shaderDefineValue&=~e$d},e$t._renderUpdate=function(e$d){return!0},e$t._applyLightMapParams=function(){if(0<=this._lightmapIndex){var e$d=this._owner.scene;if(e$d){var e$t=e$d.getlightmaps()[this._lightmapIndex];e$t?(this._addShaderDefine(e$st.SAHDERDEFINE_LIGHTMAP),e$t.loaded?this._setShaderValuelightMap(e$t):e$t.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(e$st.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(e$st.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(e$st.SAHDERDEFINE_LIGHTMAP)},e$t._updateOctreeNode=function(){var e$d=this._treeNode;e$d&&this._octreeNodeNeedChange&&(e$d.updateObject(this),this._octreeNodeNeedChange=!1)},e$t._destroy=function(){this.offAll();var e$d=0,e$t=0;for(e$d=0,e$t=this._renderElements.length;e$d<e$t;e$d++)this._renderElements[e$d]._destroy();for(e$d=0,e$t=this._materials.length;e$d<e$t;e$d++)this._materials[e$d]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},e$Y(0,e$t,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),e$Y(0,e$t,"id",function(){return this._id}),e$Y(0,e$t,"material",function(){var e$d=this._materials[0];if(e$d&&!this._materialsInstance[0]){var e$t=this._getInstanceMaterial(e$d,0);this.event("materialchanged",[this,0,e$t])}return this._materials[0]},function(e$d){this.sharedMaterial=e$d}),e$Y(0,e$t,"sharedMaterial",function(){return this._materials[0]},function(e$d){var e$t=this._materials[0];e$t!==e$d&&(this._materials[0]=e$d,this._materialsInstance[0]=!1,this._changeMaterialReference(e$t,e$d),this.event("materialchanged",[this,0,e$d]))}),e$Y(0,e$t,"lightmapIndex",function(){return this._lightmapIndex},function(e$d){this._lightmapIndex=e$d,this._applyLightMapParams()}),e$Y(0,e$t,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(e$d){this._lightmapScaleOffset=e$d,this._setShaderValueColor(2,e$d),this._addShaderDefine(e$st.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),e$Y(0,e$t,"enable",function(){return this._enable},function(e$d){this._enable=e$d,this.event("enablechanged",[this,e$d])}),e$Y(0,e$t,"materials",function(){for(var e$d=0,e$t=this._materials.length;e$d<e$t;e$d++)if(!this._materialsInstance[e$d]){var e$l=this._getInstanceMaterial(this._materials[e$d],e$d);this.event("materialchanged",[this,e$d,e$l])}return this._materials.slice()},function(e$d){this.sharedMaterials=e$d}),e$Y(0,e$t,"sharedMaterials",function(){return this._materials.slice()},function(e$d){if(!e$d)throw new Error("MeshRender: shadredMaterials value can't be null.");var e$t=e$d.length;this._materialsInstance.length=e$t;for(var e$l=0;e$l<e$t;e$l++){var e$k=this._materials[e$l];e$k!==e$d[e$l]&&(this._materialsInstance[e$l]=!1,this._changeMaterialReference(e$k,e$d[e$l]),this.event("materialchanged",[this,e$l,e$d[e$l]]))}this._materials=e$d}),e$Y(0,e$t,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),e$Y(0,e$t,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var e$d=this.boundingBox;e$At.add(e$d.min,e$d.max,this._boundingBoxCenter),e$At.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),e$Y(0,e$t,"receiveShadow",function(){return this._receiveShadow},function(e$d){this._receiveShadow!==e$d&&((this._receiveShadow=e$d)?this._addShaderDefine(e$ct.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(e$ct.SHADERDEFINE_RECEIVE_SHADOW))}),e$Y(0,e$t,"destroyed",function(){return this._destroyed}),e$k._uniqueIDCounter=0,e$f(e$k,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At,new e$At]},"_greenColor",function(){return this._greenColor=new e$Bt(0,1,0,1)}]),e$k}(),e$Gt=function(e$d){function e$B(e$d){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,e$B.__super.call(this),this._localPosition=new e$At,this._localRotation=new e$lt(0,0,0,1),this._localScale=new e$At(1,1,1),this._localRotationEuler=new e$At,this._localMatrix=new e$dt,this._position=new e$At,this._rotation=new e$lt(0,0,0,1),this._scale=new e$At(1,1,1),this._worldMatrix=new e$dt,this._forward=new e$At,this._up=new e$At,this._right=new e$At,this._owner=e$d,this._childs=[]}e$c(e$B,"laya.d3.core.Transform3D",e$i);var e$t=e$B.prototype;return e$t._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)e$dt.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var e$d=e$B._tempVector30;e$At.multiply(this.pivot,this._localScale,e$d);var e$t=e$B._tempVector31;e$At.subtract(e$d,this.pivot,e$t);var e$l=e$B._tempVector32,e$k=this.localRotation;e$At.transformQuat(e$d,e$k,e$l),e$At.subtract(e$l,e$d,e$l);var e$W=e$B._tempVector33;e$At.subtract(this._localPosition,e$t,e$W),e$At.subtract(e$W,e$l,e$W),e$dt.createAffineTransformation(e$W,e$k,this._localScale,this._localMatrix)}},e$t._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._onWorldPositionRotationTransform()}},e$t._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._onWorldPositionScaleTransform()}},e$t._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._onWorldPositionTransform()}},e$t._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._onWorldPositionRotationTransform()}},e$t._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._onWorldPositionScaleTransform()}},e$t._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._onWorldTransform()}},e$t.translate=function(e$d,e$t){void 0===e$t&&(e$t=!0),e$t?(e$dt.createFromQuaternion(this.localRotation,e$B._tempMatrix0),e$At.transformCoordinate(e$d,e$B._tempMatrix0,e$B._tempVector30),e$At.add(this.localPosition,e$B._tempVector30,this._localPosition),this.localPosition=this._localPosition):(e$At.add(this.position,e$d,this._position),this.position=this._position)},e$t.rotate=function(e$d,e$t,e$l){var e$k;void 0===e$t&&(e$t=!0),void 0===e$l&&(e$l=!0),e$k=e$l?e$d:(e$At.scale(e$d,Math.PI/180,e$B._tempVector30),e$B._tempVector30),e$lt.createFromYawPitchRoll(e$k.y,e$k.x,e$k.z,e$B._tempQuaternion0),e$t?(e$lt.multiply(this._localRotation,e$B._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(e$lt.multiply(e$B._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},e$t.lookAt=function(e$d,e$t,e$l){void 0===e$l&&(e$l=!1);var e$k,e$W=e$d.elements;if(e$l){if(e$k=this._localPosition.elements,Math.abs(e$k[0]-e$W[0])<e$_d.zeroTolerance&&Math.abs(e$k[1]-e$W[1])<e$_d.zeroTolerance&&Math.abs(e$k[2]-e$W[2])<e$_d.zeroTolerance)return;e$lt.lookAt(this._localPosition,e$d,e$t,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var e$i=this.position;if(e$k=e$i.elements,Math.abs(e$k[0]-e$W[0])<e$_d.zeroTolerance&&Math.abs(e$k[1]-e$W[1])<e$_d.zeroTolerance&&Math.abs(e$k[2]-e$W[2])<e$_d.zeroTolerance)return;e$lt.lookAt(e$i,e$d,e$t,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},e$Y(0,e$t,"_isFrontFaceInvert",function(){var e$d=this.scale,e$t=e$d.x<0;return e$d.y<0&&(e$t=!e$t),e$d.z<0&&(e$t=!e$t),e$t}),e$Y(0,e$t,"owner",function(){return this._owner}),e$Y(0,e$t,"localRotation",function(){if(this._localQuaternionUpdate){var e$d=this._localRotationEuler.elements;e$lt.createFromYawPitchRoll(e$d[1]/e$B._angleToRandin,e$d[0]/e$B._angleToRandin,e$d[2]/e$B._angleToRandin,this._localRotation)}return this._localRotation},function(e$d){this._localRotation=e$d,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),e$Y(0,e$t,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?e$dt.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(e$d){null===this._parent?e$d.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),e$dt.multiply(this._localMatrix,e$d,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=e$d,this._worldUpdate=!1}),e$Y(0,e$t,"worldNeedUpdate",function(){return this._worldUpdate}),e$Y(0,e$t,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(e$d){this._localMatrix=e$d,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),e$Y(0,e$t,"dummy",function(){return this._dummy},function(e$d){this._dummy!==e$d&&(this._dummy&&(this._dummy._entity=null),e$d&&(e$d._entity=this),this._dummy=e$d)}),e$Y(0,e$t,"localPosition",function(){return this._localPosition},function(e$d){this._localPosition=e$d,this._localUpdate=!0,this._onWorldPositionTransform()}),e$Y(0,e$t,"position",function(){if(this._positionUpdate){if(null!=this._parent){var e$d=this._parent.position;e$At.multiply(this._localPosition,this._parent.scale,e$B._tempVector30),e$At.transformQuat(e$B._tempVector30,this._parent.rotation,e$B._tempVector30),e$At.add(e$d,e$B._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(e$d){if(null!=this._parent){e$At.subtract(e$d,this._parent.position,this._localPosition);var e$t=this._parent.scale.elements,e$l=e$t[0],e$k=e$t[1],e$W=e$t[2];if(1!==e$l||1!==e$k||1!==e$W){var e$i=e$B._tempVector30,e$A=e$i.elements;e$A[0]=1/e$l,e$A[1]=1/e$k,e$A[2]=1/e$W,e$At.multiply(this._localPosition,e$i,this._localPosition)}this._parent.rotation.invert(e$B._tempQuaternion0),e$At.transformQuat(this._localPosition,e$B._tempQuaternion0,this._localPosition)}else e$d.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=e$d,this._positionUpdate=!1}),e$Y(0,e$t,"localScale",function(){return this._localScale},function(e$d){this._localScale=e$d,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),e$Y(0,e$t,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(e$B._tempVector30);var e$d=e$B._tempVector30.elements,e$t=this._localRotationEuler.elements;e$t[0]=e$d[1]*e$B._angleToRandin,e$t[1]=e$d[0]*e$B._angleToRandin,e$t[2]=e$d[2]*e$B._angleToRandin}return this._localRotationEuler},function(e$d){this._localRotationEuler=e$d,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),e$Y(0,e$t,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?e$lt.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(e$d){null!=this._parent?(this._parent.rotation.invert(e$B._tempQuaternion0),e$lt.multiply(e$d,e$B._tempQuaternion0,this._localRotation)):e$d.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=e$d,this._rotationUpdate=!1}),e$Y(0,e$t,"scale",function(){return this._scaleUpdate&&(null!==this._parent?e$At.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(e$d){if(null!==this._parent){var e$t=this._parent.scale.elements,e$l=e$B._tempVector30.elements;e$l[0]=1/e$t[0],e$l[1]=1/e$t[1],e$l[2]=1/e$t[2],e$At.multiply(e$d,e$B._tempVector30,this._localScale)}else e$d.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=e$d,this._scaleUpdate=!1}),e$Y(0,e$t,"rotationEuler",null,function(e$d){e$lt.createFromYawPitchRoll(e$d.y,e$d.x,e$d.z,this._rotation),this.rotation=this._rotation}),e$Y(0,e$t,"forward",function(){var e$d=this.worldMatrix.elements;return this._forward.elements[0]=-e$d[8],this._forward.elements[1]=-e$d[9],this._forward.elements[2]=-e$d[10],this._forward}),e$Y(0,e$t,"up",function(){var e$d=this.worldMatrix.elements;return this._up.elements[0]=e$d[4],this._up.elements[1]=e$d[5],this._up.elements[2]=e$d[6],this._up}),e$Y(0,e$t,"right",function(){var e$d=this.worldMatrix.elements;return this._right.elements[0]=e$d[0],this._right.elements[1]=e$d[1],this._right.elements[2]=e$d[2],this._right}),e$Y(0,e$t,"parent",function(){return this._parent},function(e$d){if(this._parent!==e$d){if(this._parent){var e$t=this._parent._childs,e$l=e$t.indexOf(this);e$t.splice(e$l,1)}e$d&&(e$d._childs.push(this),e$d&&this._onWorldTransform()),this._parent=e$d}}),e$f(e$B,["_tempVector30",function(){return this._tempVector30=new e$At},"_tempVector31",function(){return this._tempVector31=new e$At},"_tempVector32",function(){return this._tempVector32=new e$At},"_tempVector33",function(){return this._tempVector33=new e$At},"_tempQuaternion0",function(){return this._tempQuaternion0=new e$lt},"_tempMatrix0",function(){return this._tempMatrix0=new e$dt},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),e$B}(),e$qt=(function(e$d){function e$t(){this._rotation=0,this._matNeedUpdte=!1,e$t.__super.call(this),this._matrix=new e$dt,this._offset=new e$it,this._tiling=new e$it(1,1)}e$c(e$t,"laya.d3.core.TransformUV",e$i);var e$l=e$t.prototype;e$R.imps(e$l,{"laya.d3.core.IClone":!0}),e$l._updateMatrix=function(){e$t._tempOffsetV3.elements[0]=this._offset.x,e$t._tempOffsetV3.elements[1]=this._offset.y,e$lt.createFromYawPitchRoll(0,0,this._rotation,e$t._tempRotationQua),e$t._tempTitlingV3.elements[0]=this._tiling.x,e$t._tempTitlingV3.elements[1]=this._tiling.y,e$dt.createAffineTransformation(e$t._tempOffsetV3,e$t._tempRotationQua,e$t._tempTitlingV3,this._matrix)},e$l.cloneTo=function(e$d){e$d._matrix=this._matrix.clone(),e$d._offset=this._offset.clone(),e$d._rotation=this._rotation,e$d._tiling=this._tiling.clone()},e$l.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$l,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),e$Y(0,e$l,"tiling",function(){return this._tiling},function(e$d){this._tiling=e$d,this._matNeedUpdte=!0}),e$Y(0,e$l,"offset",function(){return this._offset},function(e$d){this._offset=e$d,this._matNeedUpdte=!0}),e$Y(0,e$l,"rotation",function(){return this._rotation},function(e$d){this._rotation=e$d,this._matNeedUpdte=!0}),e$f(e$t,["_tempOffsetV3",function(){return this._tempOffsetV3=new e$At(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new e$lt},"_tempTitlingV3",function(){return this._tempTitlingV3=new e$At(1,1,1)}])}(),function(e$l){function e$d(){this.x=NaN,this.y=NaN,this.z=NaN,e$d.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}e$c(e$d,"laya.d3.core.particleShuriKen.module.shape.BoxShape",e$l);var e$t=e$d.prototype;e$t._getShapeBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=.5*-this.x,e$t[1]=.5*-this.y,e$t[2]=.5*-this.z;var e$l=e$d.max.elements;e$l[0]=.5*this.x,e$l[1]=.5*this.y,e$l[2]=.5*this.z},e$t._getSpeedBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=0,e$t[1]=0,e$t[2]=0;var e$l=e$d.max.elements;e$l[0]=0,e$l[1]=1,e$l[2]=0},e$t.generatePositionAndDirection=function(e$d,e$t,e$l,e$k){var e$W=e$d.elements,e$i=e$t.elements;e$l?(e$l.seed=e$k[16],e$u._randomPointInsideHalfUnitBox(e$d,e$l),e$k[16]=e$l.seed):e$u._randomPointInsideHalfUnitBox(e$d),e$W[0]=this.x*e$W[0],e$W[1]=this.y*e$W[1],e$W[2]=this.z*e$W[2],this.randomDirection?e$l?(e$l.seed=e$k[17],e$u._randomPointUnitSphere(e$t,e$l),e$k[17]=e$l.seed):e$u._randomPointUnitSphere(e$t):(e$i[0]=0,e$i[1]=0,e$i[2]=1)},e$t.cloneTo=function(e$d){e$l.prototype.cloneTo.call(this,e$d);var e$t=e$d;e$t.x=this.x,e$t.y=this.y,e$t.z=this.z,e$t.randomDirection=this.randomDirection}}(e$V),function(e$l){function e$A(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,e$A.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}e$c(e$A,"laya.d3.core.particleShuriKen.module.shape.CircleShape",e$l);var e$d=e$A.prototype;e$d._getShapeBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=e$t[2]=-this.radius,e$t[1]=0;var e$l=e$d.max.elements;e$l[0]=e$l[2]=this.radius,e$l[1]=0},e$d._getSpeedBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=e$t[1]=-1,e$t[2]=0;var e$l=e$d.max.elements;e$l[0]=e$l[1]=1,e$l[2]=0},e$d.generatePositionAndDirection=function(e$d,e$t,e$l,e$k){var e$W=e$d.elements,e$i=e$A._tempPositionPoint.elements;e$l?(e$l.seed=e$k[16],this.emitFromEdge?e$u._randomPointUnitArcCircle(this.arc,e$A._tempPositionPoint,e$l):e$u._randomPointInsideUnitArcCircle(this.arc,e$A._tempPositionPoint,e$l),e$k[16]=e$l.seed):this.emitFromEdge?e$u._randomPointUnitArcCircle(this.arc,e$A._tempPositionPoint):e$u._randomPointInsideUnitArcCircle(this.arc,e$A._tempPositionPoint),e$W[0]=-e$i[0],e$W[1]=e$i[1],e$W[2]=0,e$At.scale(e$d,this.radius,e$d),this.randomDirection?e$l?(e$l.seed=e$k[17],e$u._randomPointUnitSphere(e$t,e$l),e$k[17]=e$l.seed):e$u._randomPointUnitSphere(e$t):e$d.cloneTo(e$t)},e$d.cloneTo=function(e$d){e$l.prototype.cloneTo.call(this,e$d);var e$t=e$d;e$t.radius=this.radius,e$t.arc=this.arc,e$t.emitFromEdge=this.emitFromEdge,e$t.randomDirection=this.randomDirection},e$f(e$A,["_tempPositionPoint",function(){return this._tempPositionPoint=new e$it}])}(e$V),function(e$l){function e$J(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,e$J.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}e$c(e$J,"laya.d3.core.particleShuriKen.module.shape.ConeShape",e$l);var e$d=e$J.prototype;e$d._getShapeBoundBox=function(e$d){var e$t=this.radius+this.length*Math.sin(this.angle),e$l=this.length*Math.cos(this.angle),e$k=e$d.min.elements;e$k[0]=e$k[1]=-e$t,e$k[2]=0;var e$W=e$d.max.elements;e$W[0]=e$W[1]=e$t,e$W[2]=e$l},e$d._getSpeedBoundBox=function(e$d){var e$t=Math.sin(this.angle),e$l=e$d.min.elements;e$l[0]=e$l[1]=-e$t,e$l[2]=0;var e$k=e$d.max.elements;e$k[0]=e$l[1]=e$t,e$k[2]=1},e$d.generatePositionAndDirection=function(e$d,e$t,e$l,e$k){var e$W,e$i=e$d.elements,e$A=e$t.elements,e$B=e$J._tempPositionPoint.elements,e$o=NaN,e$I=NaN,e$b=Math.cos(this.angle),e$f=Math.sin(this.angle);switch(this.emitType){case 0:e$l?(e$l.seed=e$k[16],e$u._randomPointInsideUnitCircle(e$J._tempPositionPoint,e$l),e$k[16]=e$l.seed):e$u._randomPointInsideUnitCircle(e$J._tempPositionPoint),e$o=e$B[0],e$I=e$B[1],e$i[0]=e$o*this.radius,e$i[1]=e$I*this.radius,e$i[2]=0,this.randomDirection?(e$l?(e$l.seed=e$k[17],e$u._randomPointInsideUnitCircle(e$J._tempDirectionPoint,e$l),e$k[17]=e$l.seed):e$u._randomPointInsideUnitCircle(e$J._tempDirectionPoint),e$W=e$J._tempDirectionPoint.elements,e$A[0]=e$W[0]*e$f,e$A[1]=e$W[1]*e$f):(e$A[0]=e$o*e$f,e$A[1]=e$I*e$f),e$A[2]=e$b;break;case 1:e$l?(e$l.seed=e$k[16],e$u._randomPointUnitCircle(e$J._tempPositionPoint,e$l),e$k[16]=e$l.seed):e$u._randomPointUnitCircle(e$J._tempPositionPoint),e$o=e$B[0],e$I=e$B[1],e$i[0]=e$o*this.radius,e$i[1]=e$I*this.radius,e$i[2]=0,this.randomDirection?(e$l?(e$l.seed=e$k[17],e$u._randomPointInsideUnitCircle(e$J._tempDirectionPoint,e$l),e$k[17]=e$l.seed):e$u._randomPointInsideUnitCircle(e$J._tempDirectionPoint),e$W=e$J._tempDirectionPoint.elements,e$A[0]=e$W[0]*e$f,e$A[1]=e$W[1]*e$f):(e$A[0]=e$o*e$f,e$A[1]=e$I*e$f),e$A[2]=e$b;break;case 2:e$l?(e$l.seed=e$k[16],e$u._randomPointInsideUnitCircle(e$J._tempPositionPoint,e$l)):e$u._randomPointInsideUnitCircle(e$J._tempPositionPoint),e$o=e$B[0],e$I=e$B[1],e$i[0]=e$o*this.radius,e$i[1]=e$I*this.radius,e$A[e$i[2]=0]=e$o*e$f,e$A[1]=e$I*e$f,e$A[2]=e$b,e$At.normalize(e$t,e$t),e$l?(e$At.scale(e$t,this.length*e$l.getFloat(),e$t),e$k[16]=e$l.seed):e$At.scale(e$t,this.length*Math.random(),e$t),e$At.add(e$d,e$t,e$d),this.randomDirection&&(e$l?(e$l.seed=e$k[17],e$u._randomPointUnitSphere(e$t,e$l),e$k[17]=e$l.seed):e$u._randomPointUnitSphere(e$t));break;case 3:e$l?(e$l.seed=e$k[16],e$u._randomPointUnitCircle(e$J._tempPositionPoint,e$l)):e$u._randomPointUnitCircle(e$J._tempPositionPoint),e$o=e$B[0],e$I=e$B[1],e$i[0]=e$o*this.radius,e$i[1]=e$I*this.radius,e$A[e$i[2]=0]=e$o*e$f,e$A[1]=e$I*e$f,e$A[2]=e$b,e$At.normalize(e$t,e$t),e$l?(e$At.scale(e$t,this.length*e$l.getFloat(),e$t),e$k[16]=e$l.seed):e$At.scale(e$t,this.length*Math.random(),e$t),e$At.add(e$d,e$t,e$d),this.randomDirection&&(e$l?(e$l.seed=e$k[17],e$u._randomPointUnitSphere(e$t,e$l),e$k[17]=e$l.seed):e$u._randomPointUnitSphere(e$t));break;default:throw new Error("ConeShape:emitType is invalid.")}},e$d.cloneTo=function(e$d){e$l.prototype.cloneTo.call(this,e$d);var e$t=e$d;e$t.angle=this.angle,e$t.radius=this.radius,e$t.length=this.length,e$t.emitType=this.emitType,e$t.randomDirection=this.randomDirection},e$f(e$J,["_tempPositionPoint",function(){return this._tempPositionPoint=new e$it},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new e$it}])}(e$V),function(e$l){function e$d(){this.radius=NaN,this.emitFromShell=!1,e$d.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}e$c(e$d,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",e$l);var e$t=e$d.prototype;e$t._getShapeBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=e$t[1]=e$t[2]=-this.radius;var e$l=e$d.max.elements;e$l[0]=e$l[1]=this.radius,e$l[2]=0},e$t._getSpeedBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=e$t[1]=-1,e$t[2]=0;var e$l=e$d.max.elements;e$l[0]=e$l[1]=e$l[2]=1},e$t.generatePositionAndDirection=function(e$d,e$t,e$l,e$k){var e$W=e$d.elements;e$l?(e$l.seed=e$k[16],this.emitFromShell?e$u._randomPointUnitSphere(e$d,e$l):e$u._randomPointInsideUnitSphere(e$d,e$l),e$k[16]=e$l.seed):this.emitFromShell?e$u._randomPointUnitSphere(e$d):e$u._randomPointInsideUnitSphere(e$d),e$At.scale(e$d,this.radius,e$d);var e$i=e$W[2];e$i<0&&(e$W[2]=-1*e$i),this.randomDirection?e$l?(e$l.seed=e$k[17],e$u._randomPointUnitSphere(e$t,e$l),e$k[17]=e$l.seed):e$u._randomPointUnitSphere(e$t):e$d.cloneTo(e$t)},e$t.cloneTo=function(e$d){e$l.prototype.cloneTo.call(this,e$d);var e$t=e$d;e$t.radius=this.radius,e$t.emitFromShell=this.emitFromShell,e$t.randomDirection=this.randomDirection}}(e$V),function(e$l){function e$d(){this.radius=NaN,this.emitFromShell=!1,e$d.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}e$c(e$d,"laya.d3.core.particleShuriKen.module.shape.SphereShape",e$l);var e$t=e$d.prototype;e$t._getShapeBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=e$t[1]=e$t[2]=-this.radius;var e$l=e$d.max.elements;e$l[0]=e$l[1]=e$l[2]=this.radius},e$t._getSpeedBoundBox=function(e$d){var e$t=e$d.min.elements;e$t[0]=e$t[1]=e$t[2]=-1;var e$l=e$d.max.elements;e$l[0]=e$l[1]=e$l[2]=1},e$t.generatePositionAndDirection=function(e$d,e$t,e$l,e$k){e$l?(e$l.seed=e$k[16],this.emitFromShell?e$u._randomPointUnitSphere(e$d,e$l):e$u._randomPointInsideUnitSphere(e$d,e$l),e$k[16]=e$l.seed):this.emitFromShell?e$u._randomPointUnitSphere(e$d):e$u._randomPointInsideUnitSphere(e$d),e$At.scale(e$d,this.radius,e$d),this.randomDirection?e$l?(e$l.seed=e$k[17],e$u._randomPointUnitSphere(e$t,e$l),e$k[17]=e$l.seed):e$u._randomPointUnitSphere(e$t):e$d.cloneTo(e$t)},e$t.cloneTo=function(e$d){e$l.prototype.cloneTo.call(this,e$d);var e$t=e$d;e$t.radius=this.radius,e$t.emitFromShell=this.emitFromShell,e$t.randomDirection=this.randomDirection}}(e$V),function(e$d){function e$t(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,e$t.__super.call(this)}return e$c(e$t,"laya.d3.core.render.SubMeshRenderElement",e$P),e$t}()),e$Lt=function(e$d){function e$D(e$d,e$t,e$l,e$k,e$W,e$i){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=e$d,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[e$ct.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[e$st.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[e$st.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[e$Tt.SHADERDEFINE_ALPHATEST]="ALPHATEST";e$D.__super.call(this,e$d,e$t,e$l,null,{}),this._attributeMap=e$k;var e$A;for(e$A in e$W){var e$B=e$W[e$A];switch(e$B[1]){case 0:this._renderElementUniformMap[e$A]=e$B[0];break;case 1:this._materialUniformMap[e$A]=e$B[0];break;case 2:this._spriteUniformMap[e$A]=e$B[0];break;case 3:this._cameraUniformMap[e$A]=e$B[0];break;case 4:this._sceneUniformMap[e$A]=e$B[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}e$c(e$D,"laya.d3.shader.ShaderCompile3D",e$g);var e$t=e$D.prototype;return e$t._definesToNameDic=function(e$d,e$t){for(var e$l={},e$k=1,e$W=0;e$W<32&&!(e$d<(e$k=1<<e$W));e$W++)if(e$d&e$k){var e$i=e$t[e$k];e$i&&(e$l[e$i]="")}return e$l},e$t.withCompile=function(e$d,e$t,e$l,e$k){var e$W,e$i,e$A;if(e$i=this.sharders[e$d])if(e$A=e$i[e$t]){if(e$W=e$A[e$l])return e$W}else e$A=e$i[e$t]=[];else e$A=(e$i=this.sharders[e$d]=[])[e$t]=[];var e$B,e$o=this._definesToNameDic(e$d,e$D._globalInt2name),e$I=this._definesToNameDic(e$t,this._spriteInt2name),e$b=this._definesToNameDic(e$l,this._materialInt2name),e$f={},e$J="";if(e$o)for(e$B in e$o)e$J+="#define "+e$B+"\n",e$f[e$B]=!0;if(e$I)for(e$B in e$I)e$J+="#define "+e$B+"\n",e$f[e$B]=!0;if(e$b)for(e$B in e$b)e$J+="#define "+e$B+"\n",e$f[e$B]=!0;var e$c=e$nt.nameKey.getName(this._name)+" compile ("+e$d+","+e$t+","+e$l+")",e$Y=this._VS.toscript(e$f,[]),e$w=this._PS.toscript(e$f,[]);e$j.now();if(e$W=e$nt.create(e$J+e$Y.join("\n"),e$J+e$w.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,e$k,e$c),e$A[e$l]=e$W,laya.d3.shader.ShaderCompile3D.debugMode)e$j.now();return e$W},e$t.precompileShaderWithShaderDefine=function(e$d,e$t,e$l){this.withCompile(e$d,e$t,e$l,!0)},e$t.addMaterialDefines=function(e$d){var e$t=e$d.defines;for(var e$l in e$t){var e$k=e$t[e$l],e$W=parseInt(e$l);this._materialInt2name[e$W]=e$k,this._materialName2Int[e$k]=e$W}},e$t.addSpriteDefines=function(e$d){var e$t=e$d.defines;for(var e$l in e$t){var e$k=e$t[e$l],e$W=parseInt(e$l);this._spriteInt2name[e$W]=e$k,this._spriteName2Int[e$k]=e$W}},e$t.getMaterialDefineByName=function(e$d){return this._materialName2Int[e$d]},e$t.registerMaterialDefine=function(e$d){var e$t=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[e$t]=e$d,this._materialName2Int[e$d]=e$t},e$t.registerSpriteDefine=function(e$d){var e$t=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[e$t]=e$d,this._spriteName2Int[e$d]=e$t},e$D._globalRegDefine=function(e$d,e$t){e$D._globalInt2name[e$t]=e$d},e$D.add=function(e$d,e$t,e$l,e$k,e$W){return laya.d3.shader.ShaderCompile3D._preCompileShader[e$d]=new e$D(e$d,e$t,e$l,e$k,e$W,e$g.includes)},e$D.get=function(e$d){return laya.d3.shader.ShaderCompile3D._preCompileShader[e$nt.nameKey.getID(e$d)]},e$D._preCompileShader={},e$D._globalInt2name=[],e$D.debugMode=!1,e$D.SHADERDEFINE_HIGHPRECISION=1,e$D.SHADERDEFINE_FOG=4,e$D.SHADERDEFINE_DIRECTIONLIGHT=8,e$D.SHADERDEFINE_POINTLIGHT=16,e$D.SHADERDEFINE_SPOTLIGHT=32,e$D.SHADERDEFINE_UV0=64,e$D.SHADERDEFINE_COLOR=128,e$D.SHADERDEFINE_UV1=256,e$D.SAHDERDEFINE_DEPTHFOG=131072,e$D}(),e$$t=function(e$d){function e$Y(){e$Y.__super.call(this)}e$c(e$Y,"laya.d3.graphics.MeshSprite3DStaticBatchManager",e$kd);var e$t=e$Y.prototype;return e$t._getStaticBatch=function(e$d,e$t,e$l,e$k){var e$W,e$i;return e$i=e$d?e$d.id.toString()+e$l.id.toString()+e$t.id.toString()+e$k.toString():e$l.id.toString()+e$t.id.toString()+e$k.toString(),this._staticBatches[e$i]?e$W=this._staticBatches[e$i]:this._staticBatches[e$i]=e$W=new e$pt(e$i,this,e$d,e$t,e$l),e$W},e$t._initStaticBatchs=function(e$d){var e$t,e$l;this._initBatchRenderElements.sort(e$Y._sortPrepareStaticBatch);for(var e$k,e$W=!1,e$i=0,e$A=0,e$B=this._initBatchRenderElements.length;e$A<e$B;e$A++){var e$o,e$I=this._initBatchRenderElements[e$A],e$b=e$I.renderObj._getVertexBuffer(0);e$I._sprite3D;if(e$l===e$b.vertexDeclaration&&e$t===e$I._material)if(e$W)e$k._addCombineBatchRenderObjTest(e$I)?(e$o=e$I._staticBatch)!==e$k&&(e$o&&e$o._deleteCombineBatchRenderObj(e$I),e$k._addCombineBatchRenderObj(e$I)):(e$W=!1,e$i++);else{var e$f=this._initBatchRenderElements[e$A-1],e$J=e$f.renderObj,e$c=e$I.renderObj;e$W=!(65535<e$J._getVertexBuffer().vertexCount+e$c._getVertexBuffer().vertexCount)&&(e$k=this._getStaticBatch(e$d,e$l,e$t,e$i),(e$o=e$f._staticBatch)!==e$k&&(e$o&&e$o._deleteCombineBatchRenderObj(e$f),e$k._addCombineBatchRenderObj(e$f)),(e$o=e$I._staticBatch)!==e$k&&(e$o&&e$o._deleteCombineBatchRenderObj(e$I),e$k._addCombineBatchRenderObj(e$I)),!0)}else e$W=!1,e$i=0;e$t=e$I._material,e$l=e$b.vertexDeclaration}},e$Y._sortPrepareStaticBatch=function(e$d,e$t){var e$l=e$d._render,e$k=e$t._render,e$W=e$l.lightmapIndex-e$k.lightmapIndex;if(0!=e$W)return e$W;var e$i=e$l.receiveShadow-e$k.receiveShadow;if(0!=e$i)return e$i;var e$A=e$d._mainSortID-e$t._mainSortID;return 0==e$A?e$d.renderObj.triangleCount-e$t.renderObj.triangleCount:e$A},e$Y}(),e$pt=function(e$d){function e$i(e$d,e$t,e$l,e$k,e$W){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,e$i.__super.call(this,e$d,e$t,e$l),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=e$k,this._material=e$W}e$c(e$i,"laya.d3.graphics.SubMeshStaticBatch",e$Wd);var e$t=e$i.prototype;return e$t._compareBatchRenderElement=function(e$d,e$t){return e$d._batchIndexStart>e$t._batchIndexStart},e$t._addCombineBatchRenderObjTest=function(e$d){var e$t=e$d.renderObj._vertexCount;return!(65535<(0<e$t?this._currentCombineVertexCount+e$t:this._currentCombineVertexCount+e$d.renderObj._getVertexBuffer().vertexCount))},e$t._addCombineBatchRenderObj=function(e$d){var e$t=e$d.renderObj,e$l=e$t._vertexCount;this._initBatchRenderElements.push(e$d),e$d._staticBatch=this,0<e$l?(this._currentCombineIndexCount+=e$t._indexCount,this._currentCombineVertexCount+=e$l):(this._currentCombineIndexCount=this._currentCombineIndexCount+e$t._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+e$t._getVertexBuffer().vertexCount),this._needFinishCombine=!0},e$t._deleteCombineBatchRenderObj=function(e$d){var e$t=e$d.renderObj,e$l=this._initBatchRenderElements.indexOf(e$d);if(-1!==e$l){this._initBatchRenderElements.splice(e$l,1),e$d._staticBatch=null;var e$k=e$t._vertexCount;0<e$k?(this._currentCombineIndexCount=this._currentCombineIndexCount-e$t._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-e$k):(this._currentCombineIndexCount=this._currentCombineIndexCount-e$t._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-e$t._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},e$t._finishInit=function(){if(this._needFinishCombine){var e$d=0,e$t=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var e$l=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),e$k=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=e$Vt.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=e$yt.create("ushort",this._currentCombineIndexCount,35044);for(var e$W=0,e$i=this._initBatchRenderElements.length;e$W<e$i;e$W++){var e$A=this._initBatchRenderElements[e$W],e$B=e$A.renderObj,e$o=e$B._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,e$A._sprite3D),e$I=e$B.getIndices(),e$b=e$A._sprite3D.transform._isFrontFaceInvert,e$f=e$d/(this._vertexDeclaration.vertexStride/4)-e$B._vertexStart,e$J=e$t,e$c=e$J+e$I.length;e$A._batchIndexStart=e$J,e$A._batchIndexEnd=e$c,e$k.set(e$I,e$t);var e$Y=0;if(e$b)for(e$Y=e$J;e$Y<e$c;e$Y+=3){e$k[e$Y]=e$f+e$k[e$Y];var e$w=e$k[e$Y+1],e$D=e$k[e$Y+2];e$k[e$Y+1]=e$f+e$D,e$k[e$Y+2]=e$f+e$w}else for(e$Y=e$J;e$Y<e$c;e$Y+=3)e$k[e$Y]=e$f+e$k[e$Y],e$k[e$Y+1]=e$f+e$k[e$Y+1],e$k[e$Y+2]=e$f+e$k[e$Y+2];e$t+=e$I.length,e$l.set(e$o,e$d),e$d+=e$o.length}this._vertexBuffer.setData(e$l),this._indexBuffer.setData(e$k),this._needFinishCombine=!1}},e$t._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new e$qt)},e$t._getRenderElement=function(e$d,e$t,e$l){for(var e$k,e$W,e$i=this._batchRenderElements.length,e$A=!0,e$B=0;e$B<e$i;e$B++){var e$o,e$I,e$b=(e$W=this._batchRenderElements[e$B])._sprite3D._render;if(0!==e$B&&(e$A=(e$o=(e$k=this._batchRenderElements[e$B-1])._sprite3D._render).lightmapIndex!==e$b.lightmapIndex||e$o.receiveShadow!==e$b.receiveShadow||e$k._batchIndexEnd!==e$W._batchIndexStart),e$A){(e$I=this._getCombineRenderElementFromPool()).renderObj=this,e$I._material=this._material,e$I._batchIndexStart=e$W._batchIndexStart,e$I._batchIndexEnd=e$W._batchIndexEnd;var e$f=e$b.lightmapIndex,e$J=e$f+1,e$c=this._batchOwnerIndices[e$J];e$c||(e$c=this._batchOwnerIndices[e$J]=[]);var e$Y,e$w=e$c[e$W._render.receiveShadow?1:0];void 0===e$w?(e$c[e$b.receiveShadow?1:0]=this._batchOwners.length,(e$Y=new e$Xt(null,"StaticBatchMeshSprite3D"))._scene=e$t,e$Y._transform=this._rootOwner?this._rootOwner._transform:null,e$Y._render.lightmapIndex=e$f,e$Y._render.receiveShadow=e$W._render.receiveShadow,this._batchOwners.push(e$Y)):e$Y=this._batchOwners[e$w],e$Y._render._renderUpdate(e$l),e$I._sprite3D=e$Y,e$d.push(e$I)}else e$I._batchIndexEnd=e$W._batchIndexEnd}},e$t._beforeRender=function(e$d){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$t._render=function(e$d){var e$t=e$d.renderElement,e$l=e$t._batchIndexStart,e$k=e$t._batchIndexEnd-e$l;e$r.mainContext.drawElements(4,e$k,5123,2*e$l),e$L.drawCall++,e$L.trianglesFaces+=e$k/3},e$t.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},e$t._getVertexBuffer=function(e$d){return void 0===e$d&&(e$d=0),this._vertexBuffer},e$i}(),e$Mt=function(e$d){function e$t(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,e$t.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}e$c(e$t,"laya.d3.core.ComponentNode",e$I);var e$l=e$t.prototype;return e$l.addComponent=function(e$d){var e$t,e$l=this._componentsMap.indexOf(e$d);if(-1===e$l)e$t=[],this._componentsMap.push(e$d),this._typeComponentsIndices.push(e$t);else if(e$t=this._typeComponentsIndices[e$l],this._components[e$t[0]].isSingleton)throw new Error("无法单实例创建"+e$d+"组件，"+e$d+"组件已存在！");var e$k=e$W.getInstance(e$d);return e$t.push(this._components.length),this._components.push(e$k),e$k instanceof laya.d3.component.Script&&this._scripts.push(e$k),e$k._initialize(this),e$k},e$l._removeComponent=function(e$d,e$t){var e$l=this._typeComponentsIndices[e$d],e$k=e$l[e$t],e$W=this._components[e$k];this._components.splice(e$k,1),e$W instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(e$W),1),e$l.splice(e$t,1),0===e$l.length&&(this._typeComponentsIndices.splice(e$d,1),this._componentsMap.splice(e$d,1));for(var e$i=0,e$A=this._componentsMap.length;e$i<e$A;e$i++)for(var e$B=(e$l=this._typeComponentsIndices[e$i]).length-1;0<=e$B;e$B--){var e$o=e$l[e$B];if(!(e$k<e$o))break;e$l[e$B]=--e$o}e$W._destroy()},e$l.getComponentByType=function(e$d,e$t){void 0===e$t&&(e$t=0);var e$l=this._componentsMap.indexOf(e$d);return-1===e$l?null:this._components[this._typeComponentsIndices[e$l][e$t]]},e$l.getComponentsByType=function(e$d,e$t){var e$l=this._componentsMap.indexOf(e$d);if(-1!==e$l){var e$k=this._typeComponentsIndices[e$l],e$W=e$k.length;e$t.length=e$W;for(var e$i=0;e$i<e$W;e$i++)e$t[e$i]=this._components[e$k[e$i]]}else e$t.length=0},e$l.getComponentByIndex=function(e$d){return this._components[e$d]},e$l.removeComponentByType=function(e$d,e$t){void 0===e$t&&(e$t=0);var e$l=this._componentsMap.indexOf(e$d);-1!==e$l&&this._removeComponent(e$l,e$t)},e$l.removeComponentsByType=function(e$d){var e$t=this._componentsMap.indexOf(e$d);if(-1!==e$t)for(var e$l=this._typeComponentsIndices[e$t],e$k=0,e$W=e$l.length;e$k<e$W;e$l.length<e$W?e$W--:e$k++)this._removeComponent(e$t,e$k)},e$l.removeAllComponent=function(){for(var e$d=0,e$t=this._componentsMap.length;e$d<e$t;this._componentsMap.length<e$t?e$t--:e$d++)this.removeComponentsByType(this._componentsMap[e$d])},e$l._updateComponents=function(e$d){for(var e$t=0,e$l=this._components.length;e$t<e$l;e$t++){var e$k=this._components[e$t];!e$k.started&&(e$k._start(e$d),e$k.started=!0),e$k.enable&&e$k._update(e$d)}},e$l._lateUpdateComponents=function(e$d){for(var e$t=0;e$t<this._components.length;e$t++){var e$l=this._components[e$t];!e$l.started&&(e$l._start(e$d),e$l.started=!0),e$l.enable&&e$l._lateUpdate(e$d)}},e$l._preRenderUpdateComponents=function(e$d){for(var e$t=0;e$t<this._components.length;e$t++){var e$l=this._components[e$t];!e$l.started&&(e$l._start(e$d),e$l.started=!0),e$l.enable&&e$l._preRenderUpdate(e$d)}},e$l._postRenderUpdateComponents=function(e$d){for(var e$t=0;e$t<this._components.length;e$t++){var e$l=this._components[e$t];!e$l.started&&(e$l._start(e$d),e$l.started=!0),e$l.enable&&e$l._postRenderUpdate(e$d)}},e$t}(),e$Tt=function(e$k){function e$d(){e$d.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new e$Jt,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new e$Bt(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}e$c(e$d,"laya.d3.core.material.BaseMaterial",e$k);var e$t=e$d.prototype;return e$R.imps(e$t,{"laya.d3.core.IClone":!0}),e$t._addShaderDefine=function(e$d){this._shaderDefineValue|=e$d},e$t._removeShaderDefine=function(e$d){this._shaderDefineValue&=~e$d},e$t._addDisablePublicShaderDefine=function(e$d){this._disablePublicShaderDefine|=e$d},e$t._removeDisablePublicShaderDefine=function(e$d){this._disablePublicShaderDefine&=~e$d},e$t._setBuffer=function(e$d,e$t){this._shaderValues.setValue(e$d,e$t),this._values[e$d]=e$t},e$t._getBuffer=function(e$d){return this._values[e$d]},e$t._setMatrix4x4=function(e$d,e$t){this._shaderValues.setValue(e$d,e$t?e$t.elements:null),this._values[e$d]=e$t},e$t._getMatrix4x4=function(e$d){return this._values[e$d]},e$t._setInt=function(e$d,e$t){this._shaderValues.setValue(e$d,e$t),this._values[e$d]=e$t},e$t._getInt=function(e$d){return this._values[e$d]},e$t._setNumber=function(e$d,e$t){this._shaderValues.setValue(e$d,e$t),this._values[e$d]=e$t},e$t._getNumber=function(e$d){return this._values[e$d]},e$t._setBool=function(e$d,e$t){this._shaderValues.setValue(e$d,e$t),this._values[e$d]=e$t},e$t._getBool=function(e$d){return this._values[e$d]},e$t._setVector2=function(e$d,e$t){this._shaderValues.setValue(e$d,e$t?e$t.elements:null),this._values[e$d]=e$t},e$t._getVector2=function(e$d){return this._values[e$d]},e$t._setColor=function(e$d,e$t){this._shaderValues.setValue(e$d,e$t?e$t.elements:null),this._values[e$d]=e$t},e$t._getColor=function(e$d){return this._values[e$d]},e$t._setTexture=function(e$d,e$t){var e$l=this._values[e$d];this._values[e$d]=e$t,this._shaderValues.setValue(e$d,e$t),0<this.referenceCount&&(e$l&&e$l._removeReference(),e$t&&e$t._addReference())},e$t._getTexture=function(e$d){return this._values[e$d]},e$t._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},e$t._getShader=function(e$d,e$t,e$l){var e$k=(e$d|e$t)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(e$k,e$l,this._shaderDefineValue),this._shader},e$t._setRenderStateBlendDepth=function(){var e$d=e$r.mainContext;switch(e$S.setDepthMask(e$d,this.depthWrite),0===this.depthTest?e$S.setDepthTest(e$d,!1):(e$S.setDepthTest(e$d,!0),e$S.setDepthFunc(e$d,this.depthTest)),this.blend){case 0:e$S.setBlend(e$d,!1);break;case 1:e$S.setBlend(e$d,!0),e$S.setBlendFunc(e$d,this.srcBlend,this.dstBlend);break;case 2:e$S.setBlend(e$d,!0)}},e$t._setRenderStateFrontFace=function(e$d,e$t){var e$l=e$r.mainContext,e$k=0;switch(this.cull){case 0:e$S.setCullFace(e$l,!1);break;case 1:e$S.setCullFace(e$l,!0),e$k=e$d?e$t&&e$t._isFrontFaceInvert?2305:2304:e$t&&e$t._isFrontFaceInvert?2304:2305,e$S.setFrontFace(e$l,e$k);break;case 2:e$S.setCullFace(e$l,!0),e$k=e$d?e$t&&e$t._isFrontFaceInvert?2304:2305:e$t&&e$t._isFrontFaceInvert?2305:2304,e$S.setFrontFace(e$l,e$k)}},e$t.onAsynLoaded=function(e$d,e$t,e$l){var e$k=e$t[0],e$W=e$t[1];switch(e$k.version){case"LAYAMATERIAL:01":var e$i=0,e$A=0,e$B=e$k.props;for(var e$o in e$B)switch(e$o){case"vectors":var e$I=e$B[e$o];for(e$i=0,e$A=e$I.length;e$i<e$A;e$i++){var e$b=e$I[e$i],e$f=e$b.value;switch(e$f.length){case 2:this[e$b.name]=new e$it(e$f[0],e$f[1]);break;case 3:this[e$b.name]=new e$At(e$f[0],e$f[1],e$f[2]);break;case 4:this[e$b.name]=new e$Bt(e$f[0],e$f[1],e$f[2],e$f[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var e$J=e$B[e$o];for(e$i=0,e$A=e$J.length;e$i<e$A;e$i++){var e$c=e$J[e$i],e$Y=e$c.path;e$Y&&(this[e$c.name]=e$z.getRes(e$W[e$Y]))}break;case"defines":var e$w=e$B[e$o];for(e$i=0,e$A=e$w.length;e$i<e$A;e$i++){var e$D=this._shaderCompile.getMaterialDefineByName(e$w[e$i]);this._addShaderDefine(e$D)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[e$o]=e$B[e$o];break;case"renderQueue":switch(e$B[e$o]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[e$o]=e$B[e$o]}break;case"LAYAMATERIAL:02":for(e$o in e$B=e$k.props)switch(e$o){case"vectors":for(e$i=0,e$A=(e$I=e$B[e$o]).length;e$i<e$A;e$i++)switch((e$f=(e$b=e$I[e$i]).value).length){case 2:this[e$b.name]=new e$it(e$f[0],e$f[1]);break;case 3:this[e$b.name]=new e$At(e$f[0],e$f[1],e$f[2]);break;case 4:this[e$b.name]=new e$Bt(e$f[0],e$f[1],e$f[2],e$f[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(e$i=0,e$A=(e$J=e$B[e$o]).length;e$i<e$A;e$i++)(e$Y=(e$c=e$J[e$i]).path)&&(this[e$c.name]=e$z.getRes(e$W[e$Y]));break;case"defines":for(e$i=0,e$A=(e$w=e$B[e$o]).length;e$i<e$A;e$i++)e$D=this._shaderCompile.getMaterialDefineByName(e$w[e$i]),this._addShaderDefine(e$D);break;default:this[e$o]=e$B[e$o]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},e$t._addReference=function(){e$k.prototype._addReference.call(this);for(var e$d=0,e$t=this._values.length;e$d<e$t;e$d++){var e$l=this._values[e$d];e$l&&e$l instanceof laya.d3.resource.BaseTexture&&e$l._addReference()}},e$t._removeReference=function(){e$k.prototype._removeReference.call(this);for(var e$d=0,e$t=this._values.length;e$d<e$t;e$d++){var e$l=this._values[e$d];e$l&&e$l instanceof laya.d3.resource.BaseTexture&&e$l._removeReference()}},e$t.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},e$t.setShaderName=function(e$d){var e$t=e$nt.nameKey.getID(e$d);if(-1===e$t)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=e$Lt._preCompileShader[e$t]},e$t.cloneTo=function(e$d){var e$t=e$d;e$t.name=this.name,e$t.cull=this.cull,e$t.blend=this.blend,e$t.srcBlend=this.srcBlend,e$t.dstBlend=this.dstBlend,e$t.srcBlendRGB=this.srcBlendRGB,e$t.dstBlendRGB=this.dstBlendRGB,e$t.srcBlendAlpha=this.srcBlendAlpha,e$t.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(e$t.blendConstColor),e$t.blendEquation=this.blendEquation,e$t.blendEquationRGB=this.blendEquationRGB,e$t.blendEquationAlpha=this.blendEquationAlpha,e$t.depthTest=this.depthTest,e$t.depthWrite=this.depthWrite,e$t.renderQueue=this.renderQueue,e$t._shader=this._shader,e$t._disablePublicShaderDefine=this._disablePublicShaderDefine,e$t._shaderDefineValue=this._shaderDefineValue;var e$l,e$k=0,e$W=e$t._shaderValues;e$t._shaderValues.data.length=this._shaderValues.data.length;var e$i=this._values.length,e$A=e$t._values;for(e$k=0,e$l=e$A.length=e$i;e$k<e$l;e$k++){var e$B=this._values[e$k];if(e$B)if("number"==typeof e$B)e$A[e$k]=e$B,e$W.data[e$k]=e$B;else if("number"==typeof e$B&&Math.floor(e$B)==e$B)e$A[e$k]=e$B,e$W.data[e$k]=e$B;else if("boolean"==typeof e$B)e$A[e$k]=e$B,e$W.data[e$k]=e$B;else if(e$B instanceof laya.d3.math.Vector2){var e$o=e$A[e$k]||(e$A[e$k]=new e$it);e$B.cloneTo(e$o),e$W.data[e$k]=e$o.elements}else if(e$B instanceof laya.d3.math.Vector3){var e$I=e$A[e$k]||(e$A[e$k]=new e$At);e$B.cloneTo(e$I),e$W.data[e$k]=e$I.elements}else if(e$B instanceof laya.d3.math.Vector4){var e$b=e$A[e$k]||(e$A[e$k]=new e$Bt);e$B.cloneTo(e$b),e$W.data[e$k]=e$b.elements}else if(e$B instanceof laya.d3.math.Matrix4x4){var e$f=e$A[e$k]||(e$A[e$k]=new e$dt);e$B.cloneTo(e$f),e$W.data[e$k]=e$f.elements}else e$B instanceof laya.d3.resource.BaseTexture&&(e$A[e$k]=e$B,e$W.data[e$k]=e$B)}},e$t.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$Y(0,e$t,"alphaTestValue",function(){return this._getNumber(0)},function(e$d){this._setNumber(0,e$d)}),e$Y(0,e$t,"alphaTest",function(){return this._alphaTest},function(e$d){(this._alphaTest=e$d)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),e$d.__init__=function(){e$d.SHADERDEFINE_ALPHATEST=e$d.shaderDefines.registerDefine("ALPHATEST")},e$d.RENDERQUEUE_OPAQUE=2e3,e$d.RENDERQUEUE_ALPHATEST=2450,e$d.RENDERQUEUE_TRANSPARENT=3e3,e$d.CULL_NONE=0,e$d.CULL_FRONT=1,e$d.CULL_BACK=2,e$d.BLEND_DISABLE=0,e$d.BLEND_ENABLE_ALL=1,e$d.BLEND_ENABLE_SEPERATE=2,e$d.BLENDPARAM_ZERO=0,e$d.BLENDPARAM_ONE=1,e$d.BLENDPARAM_SRC_COLOR=768,e$d.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,e$d.BLENDPARAM_DST_COLOR=774,e$d.BLENDPARAM_ONE_MINUS_DST_COLOR=775,e$d.BLENDPARAM_SRC_ALPHA=770,e$d.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,e$d.BLENDPARAM_DST_ALPHA=772,e$d.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,e$d.BLENDPARAM_SRC_ALPHA_SATURATE=776,e$d.BLENDEQUATION_ADD=0,e$d.BLENDEQUATION_SUBTRACT=1,e$d.BLENDEQUATION_REVERSE_SUBTRACT=2,e$d.DEPTHTEST_OFF=0,e$d.DEPTHTEST_NEVER=512,e$d.DEPTHTEST_LESS=513,e$d.DEPTHTEST_EQUAL=514,e$d.DEPTHTEST_LEQUAL=515,e$d.DEPTHTEST_GREATER=516,e$d.DEPTHTEST_NOTEQUAL=517,e$d.DEPTHTEST_GEQUAL=518,e$d.DEPTHTEST_ALWAYS=519,e$d.SHADERDEFINE_ALPHATEST=1,e$d.ALPHATESTVALUE=0,e$f(e$d,["shaderDefines",function(){return this.shaderDefines=new e$bt}]),e$d}(e$D),e$rt=function(e$d){function e$t(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,e$t.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}e$c(e$t,"laya.d3.resource.BaseTexture",e$D);var e$l=e$t.prototype;return e$Y(0,e$l,"width",function(){return this._width}),e$Y(0,e$l,"repeat",function(){return this._repeat},function(e$d){if(this._repeat!==e$d&&(this._repeat=e$d,this._source)){var e$t=e$r.mainContext;e$S.bindTexture(e$t,this._type,this._source),e$H.isPOT(this._width,this._height)&&this._repeat?(e$t.texParameteri(this._type,10242,10497),e$t.texParameteri(this._type,10243,10497)):(e$t.texParameteri(this._type,10242,33071),e$t.texParameteri(this._type,10243,33071))}}),e$Y(0,e$l,"height",function(){return this._height}),e$Y(0,e$l,"magFifter",function(){return this._magFifter},function(e$d){(this._magFifter=e$d)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(e$d)}),e$Y(0,e$l,"wrapModeV",function(){return this._wrapModeV}),e$Y(0,e$l,"size",function(){return this._size}),e$Y(0,e$l,"wrapModeU",function(){return this._wrapModeU}),e$Y(0,e$l,"mipmap",function(){return this._mipmap},function(e$d){this._mipmap=e$d,this._mipmap!=e$d&&this._conchTexture&&this._conchTexture.setMipMap(e$d)}),e$Y(0,e$l,"minFifter",function(){return this._minFifter},function(e$d){this._minFifter=e$d,this._minFifter!=e$d&&this._conchTexture&&this._conchTexture.setMinFifter(e$d)}),e$Y(0,e$l,"format",function(){return this._format}),e$Y(0,e$l,"source",function(){return this.activeResource(),this._source}),e$Y(0,e$l,"defaulteTexture",function(){return e$Nt.grayTexture}),e$t.WARPMODE_REPEAT=0,e$t.WARPMODE_CLAMP=1,e$t}(),e$St=function(e$d){function e$t(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,e$t.__super.call(this),this._boundingBoxCorners=e$k(8,null)}e$c(e$t,"laya.d3.resource.models.BaseMesh",e$D);var e$l=e$t.prototype;return e$l._getPositions=function(){throw new Error("未Override,请重载该属性！")},e$l._generateBoundingObject=function(){this._boundingSphere=new e$ad(new e$At,0),e$ad.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new e$Od(new e$At,new e$At),e$Od.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},e$l.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},e$l.getRenderElement=function(e$d){throw new Error("未Override,请重载该属性！")},e$Y(0,e$l,"subMeshCount",function(){return this._subMeshCount}),e$Y(0,e$l,"boundingBox",function(){return this._boundingBox}),e$Y(0,e$l,"boundingBoxCorners",function(){return this._boundingBoxCorners}),e$Y(0,e$l,"boundingSphere",function(){return this._boundingSphere}),e$t}(),e$jt=(function(e$d){function e$t(){e$t.__super.call(this)}e$c(e$t,"laya.d3.component.Script",e$gt);var e$l=e$t.prototype;e$l.onTriggerEnter=function(e$d){},e$l.onTriggerExit=function(e$d){},e$l.onTriggerStay=function(e$d){},e$Y(0,e$l,"isSingleton",function(){return e$t._isSingleton}),e$t._isSingleton=!1}(),function(e$d){function e$t(e$d){this._owner=null,this._sharedMesh=null,e$t.__super.call(this),this._owner=e$d}e$c(e$t,"laya.d3.core.MeshFilter",e$d);var e$l=e$t.prototype;return e$l._sharedMeshLoaded=function(){this.event("loaded")},e$l._destroy=function(){e$d.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},e$Y(0,e$l,"sharedMesh",function(){return this._sharedMesh},function(e$d){var e$t=this._sharedMesh;e$t&&e$t._removeReference(),(this._sharedMesh=e$d)._addReference(),this.event("meshchanged",[this,e$t,e$d]),e$d.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),e$Y(0,e$l,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),e$Y(0,e$l,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),e$Y(0,e$l,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),e$Y(0,e$l,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),e$t}(e$Ht)),e$Ct=function(e$d){function e$t(e$d){e$t.__super.call(this,e$d),e$d.meshFilter.on("meshchanged",this,this._onMeshChanged)}e$c(e$t,"laya.d3.core.MeshRender",e$Rt);var e$l=e$t.prototype;return e$l._onMeshChanged=function(e$d,e$t,e$l){e$l.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:e$l.once("loaded",this,this._onMeshLoaed)},e$l._onMeshLoaed=function(e$d,e$t){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},e$l._calculateBoundingSphereByInitSphere=function(e$d){var e$t=NaN,e$l=this._owner.transform,e$k=e$l.scale.elements,e$W=Math.abs(e$k[0]),e$i=Math.abs(e$k[1]),e$A=Math.abs(e$k[2]);e$t=e$i<=e$W&&e$A<=e$W?e$W:e$A<=e$i?e$i:e$A,e$At.transformCoordinate(e$d.center,e$l.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=e$d.radius*e$t},e$l._calculateBoundBoxByInitCorners=function(e$d){for(var e$t=this._owner.transform.worldMatrix,e$l=0;e$l<8;e$l++)e$At.transformCoordinate(e$d[e$l],e$t,e$Rt._tempBoundBoxCorners[e$l]);e$Od.createfromPoints(e$Rt._tempBoundBoxCorners,this._boundingBox)},e$l._calculateBoundingSphere=function(){var e$d=this._owner.meshFilter.sharedMesh;null==e$d||null==e$d.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(e$d.boundingSphere)},e$l._calculateBoundingBox=function(){var e$d=this._owner.meshFilter.sharedMesh;null==e$d||null==e$d.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(e$d.boundingBoxCorners)},e$l._renderUpdate=function(e$d){var e$t=this._owner.transform;if(e$t){this._setShaderValueMatrix4x4(0,e$t.worldMatrix);var e$l=this._owner.getProjectionViewWorldMatrix(e$d);this._setShaderValueMatrix4x4(1,e$l)}else this._setShaderValueMatrix4x4(0,e$dt.DEFAULT),this._setShaderValueMatrix4x4(1,e$d);return e$zt.debugMode&&this._renderRenderableBoundBox(),!0},e$t}(),e$Kt=function(e$t){function e$k(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,e$k.__super.call(this),this._renderState=new e$m,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new e$Jt,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new e$td,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new e$At(.7,.7,.7),this.ambientColor=new e$At(.212,.227,.259),e$r.shaderHighPrecision&&this.addShaderDefine(e$Lt.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}e$c(e$k,"laya.d3.core.scene.Scene",e$t);var e$d=e$k.prototype;return e$R.imps(e$d,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),e$d._setUrl=function(e$d){this._url=e$d},e$d._getGroup=function(){return this._group},e$d._setGroup=function(e$d){this._group=e$d},e$d._display=function(){e$R.stage._scenes.push(this),e$R.stage._scenes.sort(e$k._sortScenes);for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++){var e$l=this._childs[e$d];e$l.active&&e$l._activeHierarchy()}},e$d._unDisplay=function(){var e$d=e$R.stage._scenes;e$d.splice(e$d.indexOf(this),1);for(var e$t=0,e$l=this._childs.length;e$t<e$l;e$t++){var e$k=this._childs[e$t];e$k.active&&e$k._inActiveHierarchy()}},e$d._addChild3D=function(e$d){e$d.transform._onWorldTransform(),e$d._setBelongScene(this),this.displayedInStage&&e$d.active&&e$d._activeHierarchy()},e$d._removeChild3D=function(e$d){e$d.transform.parent=null,this.displayedInStage&&e$d.active&&e$d._inActiveHierarchy(),e$d._setUnBelongScene()},e$d.initOctree=function(e$d,e$t,e$l,e$k,e$W){void 0===e$W&&(e$W=6),this.treeSize=new e$At(e$d,e$t,e$l),this.treeLevel=e$W,this.treeRoot=new e$O(this,0),this.treeRoot.init(e$k,this.treeSize)},e$d._prepareUpdateToRenderState=function(e$d,e$t){e$t.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,e$t.scene=this},e$d._prepareSceneToRender=function(e$d){var e$t=this._lights.length;if(0<e$t)for(var e$l=0,e$k=0;e$k<e$t&&!(this._lights[e$k]._prepareToScene(e$d)&&++e$l>=this._enableLightCount);e$k++);},e$d._updateChilds=function(e$d){for(var e$t=0,e$l=this._childs.length;e$t<e$l;++e$t)this._childs[e$t]._update(e$d)},e$d._preRenderScene=function(e$d,e$t,e$l){var e$k,e$W=e$t._viewMatrix,e$i=e$t._projectionMatrix,e$A=e$t._projectionViewMatrix,e$B=0,e$o=e$t.camera;for(e$o.useOcclusionCulling?this.treeRoot?e$ld.renderObjectCullingOctree(e$l,this,e$o,e$W,e$i,e$A):e$ld.renderObjectCulling(e$l,this,e$o,e$W,e$i,e$A):e$ld.renderObjectCullingNoBoundFrustum(this,e$o,e$W,e$i,e$A),e$B=0,e$k=this._quenes.length;e$B<e$k;e$B++)this._quenes[e$B]&&this._quenes[e$B]._preRender(e$t)},e$d._clear=function(e$d,e$t){var e$l=e$t._viewport,e$k=e$t.camera,e$W=e$l.x,e$i=e$k.renderTargetSize.height-e$l.y-e$l.height,e$A=e$l.width,e$B=e$l.height;e$d.viewport(e$W,e$i,e$A,e$B);var e$o=256,e$I=e$k.renderTarget;switch(e$k.clearFlag){case 0:var e$b=e$k.clearColor;if(e$b){e$d.enable(3089),e$d.scissor(e$W,e$i,e$A,e$B);var e$f=e$b.elements;e$d.clearColor(e$f[0],e$f[1],e$f[2],e$f[3]),e$o|=16384}if(e$I)switch(e$b||(e$o=16384),e$I.depthStencilFormat){case 33189:e$o|=256;break;case 36168:e$o|=1024;break;case 34041:e$o|=256,e$o|=1024}e$d.clear(e$o),e$b&&e$d.disable(3089);break;case 1:case 2:if(e$I)switch(e$o=16384,e$I.depthStencilFormat){case 33189:e$o|=256;break;case 36168:e$o|=1024;break;case 34041:e$o|=256,e$o|=1024}e$d.clear(e$o);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},e$d._renderScene=function(e$d,e$t){var e$l,e$k,e$W=e$t.camera,e$i=0;for(e$i=0;e$i<2;e$i++)(e$k=this._quenes[e$i])&&(e$W.renderTarget?e$k._render(e$t,!0):e$k._render(e$t,!1));if(1===e$W.clearFlag){var e$A=e$W.sky;e$A&&(e$S.setCullFace(e$d,!1),e$S.setDepthFunc(e$d,515),e$S.setDepthMask(e$d,!1),e$A._render(e$t),e$S.setDepthFunc(e$d,513),e$S.setDepthMask(e$d,!0))}for(e$i=2,e$l=this._quenes.length;e$i<e$l;e$i++)(e$k=this._quenes[e$i])&&(e$k._sortAlpha(e$t.camera.transform.position),e$W.renderTarget?e$k._render(e$t,!0):e$k._render(e$t,!1))},e$d._set3DRenderConfig=function(e$d){e$d.disable(3042),e$S._blend=!1,e$d.blendFunc(770,771),e$S._sFactor=770,e$S._dFactor=771,e$d.disable(2929),e$S._depthTest=!1,e$d.enable(2884),e$S._cullFace=!0,e$d.depthMask(1),e$S._depthMask=!0,e$d.frontFace(2304),e$S._frontFace=2304},e$d._set2DRenderConfig=function(e$d){e$S.setBlend(e$d,!0),e$S.setBlendFunc(e$d,1,771),e$S.setDepthTest(e$d,!1),e$S.setCullFace(e$d,!1),e$S.setDepthMask(e$d,!0),e$S.setFrontFace(e$d,2305),e$d.viewport(0,0,e$b.width,e$b.height)},e$d._parseCustomProps=function(e$d,e$t,e$l,e$k){var e$W=e$k.customProps.lightmaps,e$i=e$W.length,e$A=this._lightmaps;e$A.length=e$i;for(var e$B=0;e$B<e$i;e$B++)e$A[e$B]=e$z.getRes(e$t[e$W[e$B].replace(".exr",".png")]);this.setlightmaps(e$A);var e$o=e$k.customProps.ambientColor;e$o&&(this.ambientColor=new e$At(e$o[0],e$o[1],e$o[2]));var e$I=e$k.customProps.fogColor;e$I&&(this.fogColor=new e$At(e$I[0],e$I[1],e$I[2]))},e$d._addLight=function(e$d){this._lights.indexOf(e$d)<0&&this._lights.push(e$d)},e$d._removeLight=function(e$d){var e$t=this._lights.indexOf(e$d);0<=e$t&&this._lights.splice(e$t,1)},e$d._updateScene=function(){var e$d=this._renderState;this._prepareUpdateToRenderState(e$r.mainContext,e$d),this._updateComponents(e$d),this._updateChilds(e$d),this._lateUpdateComponents(e$d),this._time+=e$d.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},e$d._updateSceneConch=function(){var e$d=this._renderState;this._prepareUpdateToRenderState(e$r.mainContext,e$d),this._updateComponents(e$d),this._lateUpdateComponents(e$d),this._prepareSceneToRender(e$d);for(var e$t=0,e$l=this._cameraPool.length;e$t<e$l;e$t++){var e$k=this._cameraPool[e$t];(e$d.camera=e$k)._prepareCameraToRender()}},e$d._preRenderShadow=function(e$d,e$t,e$l,e$k,e$W){this.treeRoot?e$ld.renderShadowObjectCullingOctree(this,e$t,e$l,e$k,e$W):e$ld.renderShadowObjectCulling(this,e$t,e$l,e$k,e$W);for(var e$i=0,e$A=e$l.length;e$i<e$A;e$i++)e$l[e$i]&&e$l[e$i]._preRender(e$d)},e$d._renderShadowMap=function(e$d,e$t,e$l){var e$k=this.parallelSplitShadowMaps[0];e$k._calcAllLightCameraInfo(e$l);var e$W,e$i,e$A,e$B=e$k.PSSMNum;if(this._preRenderShadow(e$t,e$k._lightCulling,e$k._shadowQuenes,e$k._lightVPMatrix[0],e$B),this.addShaderDefine(e$ct.SHADERDEFINE_CAST_SHADOW),1<e$B)for(var e$o=0;e$o<e$B;e$o++)e$W=e$k.getRenderTarget(e$o+1),e$k.beginRenderTarget(e$o+1),e$d.clearColor(1,1,1,1),e$d.clear(16640),e$d.viewport(0,0,e$W.width,e$W.height),e$t.camera=e$A=e$k.getLightCamera(e$o),e$A._prepareCameraToRender(),e$A._prepareCameraViewProject(e$A.viewMatrix,e$A.projectionMatrix),e$t._projectionViewMatrix=e$k._lightVPMatrix[e$o+1],(e$i=e$k._shadowQuenes[e$o])._preRender(e$t),e$i._renderShadow(e$t,!1),e$k.endRenderTarget(e$o+1);else e$W=e$k.getRenderTarget(1),e$k.beginRenderTarget(1),e$d.clearColor(1,1,1,1),e$d.clear(16640),e$d.viewport(0,0,e$W.width,e$W.height),e$t.camera=e$A=e$k.getLightCamera(0),e$A._prepareCameraToRender(),e$A._prepareCameraViewProject(e$A.viewMatrix,e$A.projectionMatrix),e$t._projectionViewMatrix=e$k._lightVPMatrix[0],(e$i=e$k._shadowQuenes[0])._preRender(e$t),e$i._renderShadow(e$t,!0),e$k.endRenderTarget(1);this.removeShaderDefine(e$ct.SHADERDEFINE_CAST_SHADOW)},e$d.addTreeNode=function(e$d){this.treeRoot.addTreeNode(e$d)},e$d.removeTreeNode=function(e$d){this.treeSize&&e$d._treeNode&&e$d._treeNode.removeObject(e$d)},e$d.setlightmaps=function(e$d){this._lightmaps=e$d;for(var e$t=0,e$l=this._renderableSprite3Ds.length;e$t<e$l;e$t++)this._renderableSprite3Ds[e$t]._render._applyLightMapParams()},e$d.getlightmaps=function(){return this._lightmaps},e$d.addChildAt=function(e$d,e$t){if(!(e$d instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(e$d&&e$d.__className));if(!e$d||this.destroyed||e$d===this)return e$d;if(e$d.zOrder&&this._set$P("hasZorder",!0),0<=e$t&&e$t<=this._childs.length){if(e$d._parent===this){var e$l=this.getChildIndex(e$d);this._childs.splice(e$l,1),this._childs.splice(e$t,0,e$d),this.conchModel&&(this.conchModel.removeChild(e$d.conchModel),this.conchModel.addChildAt(e$d.conchModel,e$t)),this._childChanged()}else e$d.parent&&e$d.parent.removeChild(e$d),this._childs===e$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e$t,0,e$d),this.conchModel&&this.conchModel.addChildAt(e$d.conchModel,e$t),(e$d.parent=this)._addChild3D(e$d);return e$d}throw new Error("appendChildAt:The index is out of bounds")},e$d.addChild=function(e$d){if(!(e$d instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e$d||this.destroyed||e$d===this)return e$d;if(e$d.zOrder&&this._set$P("hasZorder",!0),e$d._parent===this){var e$t=this.getChildIndex(e$d);e$t!==this._childs.length-1&&(this._childs.splice(e$t,1),this._childs.push(e$d),this.conchModel&&(this.conchModel.removeChild(e$d.conchModel),this.conchModel.addChildAt(e$d.conchModel,this._childs.length-1)),this._childChanged())}else e$d.parent&&e$d.parent.removeChild(e$d),this._childs===e$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e$d),this.conchModel&&this.conchModel.addChildAt(e$d.conchModel,this._childs.length-1),(e$d.parent=this)._childChanged(),this._addChild3D(e$d);return e$d},e$d.removeChildAt=function(e$d){var e$t=this.getChildAt(e$d);return e$t&&(this._removeChild3D(e$t),this._childs.splice(e$d,1),this.conchModel&&this.conchModel.removeChild(e$t.conchModel),e$t.parent=null),e$t},e$d.removeChildren=function(e$d,e$t){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=2147483647),this._childs&&0<this._childs.length){var e$l=this._childs;if(0===e$d&&e$i<=e$t){var e$k=e$l;this._childs=e$I.ARRAY_EMPTY}else e$k=e$l.splice(e$d,e$t-e$d);for(var e$W=0,e$i=e$k.length;e$W<e$i;e$W++)this._removeChild3D(e$k[e$W]),e$k[e$W].parent=null,this.conchModel&&this.conchModel.removeChild(e$k[e$W].conchModel)}return this},e$d.addFrustumCullingObject=function(e$d){this.treeRoot?this.addTreeNode(e$d):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(e$d):this._cullingRenders[this._cullingRendersLength]=e$d,e$d._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},e$d.removeFrustumCullingObject=function(e$d){if(this.treeRoot)this.removeTreeNode(e$d);else{this._cullingRendersLength--;var e$t=e$d._indexInSceneFrustumCullingObjects;if(e$t!==this._cullingRendersLength){var e$l=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[e$t]=e$l)._indexInSceneFrustumCullingObjects=e$t,e$d._indexInSceneFrustumCullingObjects=-1}}},e$d.getRenderQueue=function(e$d){return e$d<3e3?this._quenes[1]||(this._quenes[1]=new e$X(this)):this._quenes[2]||(this._quenes[2]=new e$X(this))},e$d.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new e$X(this)},e$d.addShaderDefine=function(e$d){this._shaderDefineValue|=e$d},e$d.removeShaderDefine=function(e$d){this._shaderDefineValue&=~e$d},e$d.addScript=function(e$d){return this._addComponent(e$d)},e$d.getScriptByType=function(e$d,e$t){return void 0===e$t&&(e$t=0),this._getComponentByType(e$d,e$t)},e$d.getScriptsByType=function(e$d,e$t){this._getComponentsByType(e$d,e$t)},e$d.getScriptByIndex=function(e$d){return this._getComponentByIndex(e$d)},e$d.removeScriptByType=function(e$d,e$t){void 0===e$t&&(e$t=0),this._removeComponentByType(e$d,e$t)},e$d.removeScriptsByType=function(e$d){this._removeComponentByType(e$d)},e$d.removeAllScript=function(){this._removeAllComponent()},e$d.render=function(e$d,e$t,e$l){(e$w._context.ctx._renderKey=0)<this._childs.length&&e$d.addRenderObject(this)},e$d.renderSubmit=function(){var e$d=e$r.mainContext,e$t=this._renderState;this._set3DRenderConfig(e$d),this._prepareSceneToRender(this._renderState);var e$l,e$k=0,e$W=0;if(e$zt.debugMode||e$O.debugMode)for(e$k=0,e$W=this._cameraPool.length;e$k<e$W;e$k++)e$l=this._cameraPool[e$k],e$zt._debugPhasorSprite.begin(1,e$l),e$l.activeInHierarchy&&e$l._renderCamera(e$d,e$t,this),e$zt._debugPhasorSprite.end();else for(e$k=0,e$W=this._cameraPool.length;e$k<e$W;e$k++)(e$l=this._cameraPool[e$k]).activeInHierarchy&&e$l._renderCamera(e$d,e$t,this);return this._set2DRenderConfig(e$d),1},e$d.onAsynLoaded=function(e$d,e$t,e$l){var e$k=e$t[0];if("Scene"!==e$k.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var e$W=e$t[1];e$Dt._createNodeByJson(this,e$k,this,e$W),this.event("hierarchyloaded",[this]),this.__loaded=!0},e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),this.destroyed||(e$t.prototype.destroy.call(this,e$d),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,e$z.clearRes(this.url),this.loaded||e$zt._cancelLoadByUrl(this.url))},e$d.getRenderType=function(){return 0},e$d.releaseRender=function(){},e$d._addComponent=function(e$d){var e$t,e$l=this._componentsMap.indexOf(e$d);if(-1===e$l)e$t=[],this._componentsMap.push(e$d),this._typeComponentsIndices.push(e$t);else if(e$t=this._typeComponentsIndices[e$l],this._components[e$t[0]].isSingleton)throw new Error("无法单实例创建"+e$d+"组件，"+e$d+"组件已存在！");var e$k=e$W.getInstance(e$d);e$t.push(this._components.length),this._components.push(e$k);return e$k._initialize(this),e$k},e$d._removeComponent=function(e$d,e$t){var e$l=this._typeComponentsIndices[e$d],e$k=e$l[e$t],e$W=this._components[e$k];this._components.splice(e$k,1),e$l.splice(e$t,1),0===e$l.length&&(this._typeComponentsIndices.splice(e$d,1),this._componentsMap.splice(e$d,1));for(var e$i=0,e$A=this._componentsMap.length;e$i<e$A;e$i++)for(var e$B=(e$l=this._typeComponentsIndices[e$i]).length-1;0<=e$B;e$B--){var e$o=e$l[e$B];if(!(e$k<e$o))break;e$l[e$B]=--e$o}e$W._destroy()},e$d._getComponentByType=function(e$d,e$t){void 0===e$t&&(e$t=0);var e$l=this._componentsMap.indexOf(e$d);return-1===e$l?null:this._components[this._typeComponentsIndices[e$l][e$t]]},e$d._getComponentsByType=function(e$d,e$t){var e$l=this._componentsMap.indexOf(e$d);if(-1!==e$l){var e$k=this._typeComponentsIndices[e$l],e$W=e$k.length;e$t.length=e$W;for(var e$i=0;e$i<e$W;e$i++)e$t[e$i]=this._components[e$k[e$i]]}else e$t.length=0},e$d._getComponentByIndex=function(e$d){return this._components[e$d]},e$d._removeComponentByType=function(e$d,e$t){void 0===e$t&&(e$t=0);var e$l=this._componentsMap.indexOf(e$d);-1!==e$l&&this._removeComponent(e$l,e$t)},e$d._removeComponentsByType=function(e$d){var e$t=this._componentsMap.indexOf(e$d);if(-1!==e$t)for(var e$l=this._typeComponentsIndices[e$t],e$k=0,e$W=e$l.length;e$k<e$W;e$l.length<e$W?e$W--:e$k++)this._removeComponent(e$t,e$k)},e$d._removeAllComponent=function(){for(var e$d=0,e$t=this._componentsMap.length;e$d<e$t;this._componentsMap.length<e$t?e$t--:e$d++)this._removeComponentsByType(this._componentsMap[e$d])},e$d._updateComponents=function(e$d){for(var e$t=0,e$l=this._components.length;e$t<e$l;e$t++){var e$k=this._components[e$t];!e$k.started&&(e$k._start(e$d),e$k.started=!0),e$k.enable&&e$k._update(e$d)}},e$d._lateUpdateComponents=function(e$d){for(var e$t=0;e$t<this._components.length;e$t++){var e$l=this._components[e$t];!e$l.started&&(e$l._start(e$d),e$l.started=!0),e$l.enable&&e$l._lateUpdate(e$d)}},e$d._preRenderUpdateComponents=function(e$d){for(var e$t=0;e$t<this._components.length;e$t++){var e$l=this._components[e$t];!e$l.started&&(e$l._start(e$d),e$l.started=!0),e$l.enable&&e$l._preRenderUpdate(e$d)}},e$d._postRenderUpdateComponents=function(e$d){for(var e$t=0;e$t<this._components.length;e$t++){var e$l=this._components[e$t];!e$l.started&&(e$l._start(e$d),e$l.started=!0),e$l.enable&&e$l._postRenderUpdate(e$d)}},e$Y(0,e$d,"_loaded",null,function(e$d){this.__loaded=e$d}),e$Y(0,e$d,"fogColor",function(){return this._fogColor},function(e$d){this._fogColor=e$d,this._shaderValues.setValue(0,e$d.elements)}),e$Y(0,e$d,"enableFog",function(){return this._enableFog},function(e$d){this._enableFog!==e$d&&((this._enableFog=e$d)?(this.addShaderDefine(e$Lt.SHADERDEFINE_FOG),this.removeShaderDefine(e$Lt.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(e$Lt.SHADERDEFINE_FOG))}),e$Y(0,e$d,"url",function(){return this._url}),e$Y(0,e$d,"loaded",function(){return this.__loaded}),e$Y(0,e$d,"enableDepthFog",function(){return this._enableDepthFog},function(e$d){this._enableDepthFog!=e$d&&((this._enableDepthFog=e$d)?(this.addShaderDefine(e$Lt.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(e$Lt.SHADERDEFINE_FOG)):this.removeShaderDefine(e$Lt.SAHDERDEFINE_DEPTHFOG))}),e$Y(0,e$d,"fogStart",function(){return this._fogStart},function(e$d){this._fogStart=e$d,this._shaderValues.setValue(1,e$d)}),e$Y(0,e$d,"fogRange",function(){return this._fogRange},function(e$d){this._fogRange=e$d,this._shaderValues.setValue(2,e$d)}),e$Y(0,e$d,"ambientColor",function(){return this._ambientColor},function(e$d){this._ambientColor=e$d,this._shaderValues.setValue(21,e$d.elements)}),e$Y(0,e$d,"scene",function(){return this}),e$Y(0,e$d,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),e$k._sortScenes=function(e$d,e$t){if(e$d.parent!==e$R.stage||e$t.parent!==e$R.stage)return e$d.parent!==e$R.stage&&e$t.parent!==e$R.stage?e$k._sortScenes(e$d.parent,e$t.parent):e$d.parent===e$R.stage?-1:1;var e$l=e$R.stage._childs;return e$l.indexOf(e$d)-e$l.indexOf(e$t)},e$k.load=function(e$d){return e$R.loader.create(e$d,null,null,e$k)},e$k.FOGCOLOR=0,e$k.FOGSTART=1,e$k.FOGRANGE=2,e$k.LIGHTDIRECTION=3,e$k.LIGHTDIRCOLOR=4,e$k.POINTLIGHTPOS=5,e$k.POINTLIGHTRANGE=6,e$k.POINTLIGHTATTENUATION=7,e$k.POINTLIGHTCOLOR=8,e$k.SPOTLIGHTPOS=9,e$k.SPOTLIGHTDIRECTION=10,e$k.SPOTLIGHTSPOT=11,e$k.SPOTLIGHTRANGE=12,e$k.SPOTLIGHTATTENUATION=13,e$k.SPOTLIGHTCOLOR=14,e$k.SHADOWDISTANCE=15,e$k.SHADOWLIGHTVIEWPROJECT=16,e$k.SHADOWMAPPCFOFFSET=17,e$k.SHADOWMAPTEXTURE1=18,e$k.SHADOWMAPTEXTURE2=19,e$k.SHADOWMAPTEXTURE3=20,e$k.AMBIENTCOLOR=21,e$k.TIME=22,e$k}(e$q),e$xt=function(e$d){function e$t(e$d){e$t.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new e$dt,this._shaderValues=new e$Jt,this._colliders=[],this._id=++e$t._uniqueIDCounter,this._transform=new e$Gt(this),this.name=e$d||"Sprite3D-"+e$t._nameNumberCounter++,this.layer=e$C.currentCreationLayer,this.active=!0}e$c(e$t,"laya.d3.core.Sprite3D",e$Mt);var e$l=e$t.prototype;return e$R.imps(e$l,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),e$l._setUrl=function(e$d){this._url=e$d},e$l._getGroup=function(){return this._group},e$l._setGroup=function(e$d){this._group=e$d},e$l._addChild3D=function(e$d){e$d.transform.parent=this.transform,this._hierarchyAnimator&&(!e$d._hierarchyAnimator&&e$d._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(e$d,!0,[e$d.name])),this._scene&&(e$d._setBelongScene(this._scene),this._activeInHierarchy&&e$d._active&&e$d._activeHierarchy())},e$l._removeChild3D=function(e$d){e$d.transform.parent=null,this._scene&&(this._activeInHierarchy&&e$d._active&&e$d._inActiveHierarchy(),e$d._setUnBelongScene()),this._hierarchyAnimator&&(e$d._hierarchyAnimator==this._hierarchyAnimator&&e$d._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(e$d,!1,[e$d.name]))},e$l._parseBaseCustomProps=function(e$d){var e$t=this.transform.localPosition;e$d.translate?(e$t.fromArray(e$d.translate),e$t.x*=100,e$t.y*=100,e$t.z*=100):e$t.elements.fill(0),this.transform.localPosition=e$t;var e$l=this.transform.localRotation;e$d.rotation?e$l.fromArray(e$d.rotation):e$l.fromArray([0,0,0,-1]),this.transform.localRotation=e$l;var e$k=this.transform.localScale;e$d.scale?e$k.fromArray(e$d.scale):e$k.elements.fill(1),this.transform.localScale=e$k;var e$W=e$d.layer;null!=e$W&&(this.layer=e$C.getLayerByNumber(e$W))},e$l._parseCustomComponent=function(e$d,e$t,e$l){for(var e$k in e$l){var e$W=e$l[e$k];switch(e$k){case"Animator":var e$i=this.addComponent(Animator);if(e$W.avatarPath)e$i.avatar=e$z.getRes(e$t[e$W.avatarPath]);else{var e$A=e$W.avatar;if(e$A){e$i.avatar=e$z.getRes(e$t[e$A.path]);var e$B=e$A.linkSprites;e$B&&e$d.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[e$i,e$B])}}for(var e$o=e$W.clipPaths,e$I=e$o.length,e$b=0;e$b<e$I;e$b++)e$i.addClip(e$z.getRes(e$t[e$o[e$b]]));e$i.clip=e$z.getRes(e$t[e$o[0]]);var e$f=e$W.playOnWake;void 0!==e$f&&(e$i.playOnWake=e$f);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var e$J=this.addComponent(SphereCollider);e$J.isTrigger=e$W.isTrigger;var e$c=e$J.center;e$c.fromArray(e$W.center),e$J.center=e$c,e$J.radius=e$W.radius;break;case"BoxCollider":var e$Y=this.addComponent(BoxCollider);e$Y.isTrigger=e$W.isTrigger,e$Y.center.fromArray(e$W.center);var e$w=e$Y.size;e$w.fromArray(e$W.size),e$Y.size=e$w;break;case"MeshCollider":this.addComponent(MeshCollider)}}},e$l._onRootNodeHierarchyLoaded=function(e$d,e$t){for(var e$l in e$t){for(var e$k=this,e$W=e$t[e$l],e$i=0,e$A=e$W.length;e$i<e$A;e$i++){var e$B=e$W[e$i];if(""===e$B)break;if(!(e$k=e$k.getChildByName(e$B)))break}e$k&&e$d.linkSprite3DToAvatarNode(e$l,e$k)}},e$l._setHierarchyAnimator=function(e$d,e$t){this._changeHierarchyAnimator(e$d);for(var e$l=0,e$k=this._childs.length;e$l<e$k;e$l++){var e$W=this._childs[e$l];e$W._hierarchyAnimator==e$t&&e$W._setHierarchyAnimator(e$d,e$t)}},e$l._clearHierarchyAnimator=function(e$d,e$t){this._changeHierarchyAnimator(e$t);for(var e$l=0,e$k=this._childs.length;e$l<e$k;e$l++){var e$W=this._childs[e$l];e$W._hierarchyAnimator==e$d&&e$W._clearHierarchyAnimator(e$d,e$t)}},e$l._getAnimatorToLinkSprite3D=function(e$d,e$t,e$l){var e$k=this.getComponentByType(Animator);if(e$k&&(e$k.avatar?e$k.avatar._version||e$d._setAnimatorToLinkAvatar(e$k,e$t):e$d._setAnimatorToLinkSprite3DNoAvatar(e$k,e$t,e$l)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){e$l.unshift(this._parent.name);var e$W=this._parent;e$W._hierarchyAnimator&&e$W._getAnimatorToLinkSprite3D(e$d,e$t,e$l)}},e$l._setAnimatorToLinkSprite3DNoAvatar=function(e$d,e$t,e$l){var e$k=0,e$W=0;for(e$k=0,e$W=e$d.getClipCount();e$k<e$W;e$k++)e$d._handleSpriteOwnersBySprite(e$k,e$t,e$l,this);for(e$k=0,e$W=this._childs.length;e$k<e$W;e$k++){var e$i=this._childs[e$k],e$A=e$l.length;e$l.push(e$i.name),e$i._setAnimatorToLinkSprite3DNoAvatar(e$d,e$t,e$l),e$l.splice(e$A,1)}},e$l._changeHierarchyAnimator=function(e$d){this._hierarchyAnimator=e$d},e$l._isLinkSpriteToAnimationNode=function(e$d,e$t,e$l){var e$k=e$d._avatarNodes.indexOf(e$t),e$W=e$d._cacheSpriteToNodesMap;if(e$l)this._transform.dummy=e$t.transform,e$d._cacheNodesToSpriteMap[e$k]=e$W.length,e$W.push(e$k);else{this._transform.dummy=null;var e$i=e$d._cacheNodesToSpriteMap[e$k];e$d._cacheNodesToSpriteMap[e$k]=null,e$W.splice(e$i,1)}},e$l._setBelongScene=function(e$d){this._scene=e$d;for(var e$t=0,e$l=this._childs.length;e$t<e$l;e$t++)this._childs[e$t]._setBelongScene(e$d)},e$l._setUnBelongScene=function(){this._scene=null;for(var e$d=0,e$t=this._childs.length;e$d<e$t;e$d++)this._childs[e$d]._setUnBelongScene()},e$l._activeHierarchy=function(){var e$d=0,e$t=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),e$d=0,e$t=this._colliders.length;e$d<e$t;e$d++)this._layer._addCollider(this._colliders[e$d]);for(this.event("activeinhierarchychanged",!0),e$d=0,e$t=this._childs.length;e$d<e$t;e$d++){var e$l=this._childs[e$d];e$l._active&&e$l._activeHierarchy()}},e$l._inActiveHierarchy=function(){var e$d=0,e$t=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),e$d=0,e$t=this._colliders.length;e$d<e$t;e$d++){var e$l=this._colliders[e$d];e$l._clearCollsionMap(),this._layer._removeCollider(e$l)}for(this.event("activeinhierarchychanged",!1),e$d=0,e$t=this._childs.length;e$d<e$t;e$d++){var e$k=this._childs[e$d];e$k._active&&e$k._inActiveHierarchy()}},e$l.addComponent=function(e$d){var e$t,e$l=this._componentsMap.indexOf(e$d);if(-1===e$l)e$t=[],this._componentsMap.push(e$d),this._typeComponentsIndices.push(e$t);else if(e$t=this._typeComponentsIndices[e$l],this._components[e$t[0]].isSingleton)throw new Error("无法单实例创建"+e$d+"组件，"+e$d+"组件已存在！");var e$k=e$W.getInstance(e$d);return e$t.push(this._components.length),this._components.push(e$k),e$k instanceof laya.d3.component.Script&&this._scripts.push(e$k),e$k._initialize(this),e$k},e$l._removeComponent=function(e$d,e$t){var e$l,e$k=0,e$W=this._typeComponentsIndices[e$d],e$i=e$W[e$t],e$A=this._components[e$i];for(e$A instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(e$A),1),e$W.splice(e$t,1),0===e$W.length&&(this._typeComponentsIndices.splice(e$d,1),this._componentsMap.splice(e$d,1)),e$k=0,e$l=this._componentsMap.length;e$k<e$l;e$k++)for(var e$B=(e$W=this._typeComponentsIndices[e$k]).length-1;0<=e$B;e$B--){var e$o=e$W[e$B];if(!(e$i<e$o))break;e$W[e$B]=--e$o}e$A._destroy()},e$l._clearSelfRenderObjects=function(){},e$l._addSelfRenderObjects=function(){},e$l._parseCustomProps=function(e$d,e$t,e$l,e$k){},e$l._updateChilds=function(e$d){var e$t=this._childs.length;if(0!==e$t)for(var e$l=0;e$l<e$t;++e$l)this._childs[e$l]._update(e$d)},e$l._getSortID=function(e$d,e$t){return 1e3*e$t.id+e$d._getVertexBuffer().vertexDeclaration.id},e$l._update=function(e$d){(e$d.owner=this)._activeInHierarchy&&(this._updateComponents(e$d),this._lateUpdateComponents(e$d),e$L.spriteCount++,this._childs.length&&this._updateChilds(e$d))},e$l.getProjectionViewWorldMatrix=function(e$d){return e$dt.multiply(e$d,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},e$l.loadHierarchy=function(e$d){this.addChild(laya.d3.core.Sprite3D.load(e$d))},e$l.addChildAt=function(e$d,e$t){if(!(e$d instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e$d||this.destroyed||e$d===this)return e$d;if(e$d.zOrder&&this._set$P("hasZorder",!0),0<=e$t&&e$t<=this._childs.length){if(e$d._parent===this){var e$l=this.getChildIndex(e$d);this._childs.splice(e$l,1),this._childs.splice(e$t,0,e$d),this.conchModel&&(this.conchModel.removeChild(e$d.conchModel),this.conchModel.addChildAt(e$d.conchModel,e$t)),this._childChanged()}else e$d.parent&&e$d.parent.removeChild(e$d),this._childs===e$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(e$t,0,e$d),this.conchModel&&this.conchModel.addChildAt(e$d.conchModel,e$t),(e$d.parent=this)._addChild3D(e$d);return e$d}throw new Error("appendChildAt:The index is out of bounds")},e$l.addChild=function(e$d){if(!(e$d instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!e$d||this.destroyed||e$d===this)return e$d;if(e$d.zOrder&&this._set$P("hasZorder",!0),e$d._parent===this){var e$t=this.getChildIndex(e$d);e$t!==this._childs.length-1&&(this._childs.splice(e$t,1),this._childs.push(e$d),this.conchModel&&(this.conchModel.removeChild(e$d.conchModel),this.conchModel.addChildAt(e$d.conchModel,this._childs.length-1)),this._childChanged())}else e$d.parent&&e$d.parent.removeChild(e$d),this._childs===e$I.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(e$d),this.conchModel&&this.conchModel.addChildAt(e$d.conchModel,this._childs.length-1),(e$d.parent=this)._childChanged(),this._addChild3D(e$d);return e$d},e$l.removeChildAt=function(e$d){var e$t=this.getChildAt(e$d);return e$t&&(this._removeChild3D(e$t),this._childs.splice(e$d,1),this.conchModel&&this.conchModel.removeChild(e$t.conchModel),e$t.parent=null),e$t},e$l.removeChildren=function(e$d,e$t){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=2147483647),this._childs&&0<this._childs.length){var e$l=this._childs;if(0===e$d&&e$i<=e$t){var e$k=e$l;this._childs=e$I.ARRAY_EMPTY}else e$k=e$l.splice(e$d,e$t-e$d);for(var e$W=0,e$i=e$k.length;e$W<e$i;e$W++)this._removeChild3D(e$k[e$W]),e$k[e$W].parent=null,this.conchModel&&this.conchModel.removeChild(e$k[e$W].conchModel)}return this},e$l.onAsynLoaded=function(e$d,e$t,e$l){var e$k=e$t[0];if("Sprite3D"!==e$k.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var e$W=e$t[1];e$Dt._createNodeByJson(this,e$k,this,e$W),this.event("hierarchyloaded",[this]),this.__loaded=!0},e$l.cloneTo=function(e$d){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var e$t=e$d;e$t.name=this.name,e$t._destroyed=this._destroyed,e$t.timer=this.timer,e$t._$P=this._$P,e$t.active=this._active;var e$l=e$t.transform.localPosition;this.transform.localPosition.cloneTo(e$l),e$t.transform.localPosition=e$l;var e$k=e$t.transform.localRotation;this.transform.localRotation.cloneTo(e$k),e$t.transform.localRotation=e$k;var e$W=e$t.transform.localScale;this.transform.localScale.cloneTo(e$W),e$t.transform.localScale=e$W,e$t.isStatic=this.isStatic;var e$i=0,e$A=0;for(e$i=0,e$A=this._componentsMap.length;e$i<e$A;e$i++){var e$B=e$t.addComponent(this._componentsMap[e$i]);this._components[e$i]._cloneTo(e$B)}for(e$i=0,e$A=this._childs.length;e$i<e$A;e$i++)e$t.addChild(this._childs[e$i].clone());var e$o=e$t.getComponentByType(Animator);if(e$o){var e$I=e$o._linkSpritesData;if(e$I)for(var e$b in e$I){for(var e$f=e$I[e$b],e$J=e$t,e$c=0,e$Y=e$f.length;e$c<e$Y&&(e$J=e$J.getChildByName(e$f[e$c]));e$c++);if(e$J){var e$w=e$o._avatarNodeMap[e$b];e$J._isLinkSpriteToAnimationNode(e$o,e$w,!0)}}}},e$l.clone=function(){var e$d=new this.constructor;return this.cloneTo(e$d),e$d},e$l.destroy=function(e$d){if(void 0===e$d&&(e$d=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,e$d);var e$t,e$l=0;for(e$l=0,e$t=this._components.length;e$l<e$t;e$l++)this._components[e$l]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,e$z.clearRes(this.url),this.loaded||e$zt._cancelLoadByUrl(this.url)}},e$l._handleSpriteToAvatar=function(e$d,e$t){e$d._avatarNodes;var e$l=e$d._avatarNodeMap[this.name];e$l&&e$l.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(e$d,e$l,e$t)},e$l._setAnimatorToLinkAvatar=function(e$d,e$t){this._handleSpriteToAvatar(e$d,e$t);for(var e$l=0,e$k=this._childs.length;e$l<e$k;e$l++){this._childs[e$l]._setAnimatorToLinkAvatar(e$d,e$t)}},e$Y(0,e$l,"activeInHierarchy",function(){return this._activeInHierarchy}),e$Y(0,e$l,"_loaded",null,function(e$d){this.__loaded=e$d}),e$Y(0,e$l,"active",function(){return this._active},function(e$d){this._active!==e$d&&(this._active=e$d,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(e$d?this._activeHierarchy():this._inActiveHierarchy()))}),e$Y(0,e$l,"componentsCount",function(){return this._components.length}),e$Y(0,e$l,"loaded",function(){return this.__loaded}),e$Y(0,e$l,"id",function(){return this._id}),e$Y(0,e$l,"url",function(){return this._url}),e$Y(0,e$l,"layer",function(){return this._layer},function(e$d){if(this._layer!==e$d){if(!e$d)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var e$t=0,e$l=this._colliders.length;if(this._layer)for(e$t=0;e$t<e$l;e$t++)this._layer._removeCollider(this._colliders[e$t]);for(e$t=0;e$t<e$l;e$t++)e$d._addCollider(this._colliders[e$t])}this._layer=e$d,this.event("layerchanged",e$d)}}),e$Y(0,e$l,"scene",function(){return this._scene}),e$Y(0,e$l,"transform",function(){return this._transform}),e$t.instantiate=function(e$d,e$t,e$l,e$k,e$W){void 0===e$l&&(e$l=!0);var e$i=e$d.clone();e$t&&e$t.addChild(e$i);var e$A=e$i.transform;if(e$l){var e$B=e$A.worldMatrix;e$d.transform.worldMatrix.cloneTo(e$B),e$A.worldMatrix=e$B}else e$k&&(e$A.position=e$k),e$W&&(e$A.rotation=e$W);return e$i},e$t.load=function(e$d){return e$R.loader.create(e$d,null,null,e$t)},e$t.WORLDMATRIX=0,e$t.MVPMATRIX=1,e$t._uniqueIDCounter=0,e$t._nameNumberCounter=0,e$t}(),e$nt=function(e$d){function e$b(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],e$b.__super.call(this),!e$d||!e$t)throw"Shader Error";this._id=++e$b._count,this._vs=e$d,this._ps=e$t,this._attributeMap=e$l,this._sceneUniformMap=e$k,this._cameraUniformMap=e$W,this._spriteUniformMap=e$i,this._materialUniformMap=e$A,this._renderElementUniformMap=e$B,this._precompile=e$o,this._define=e$I,this._precompile&&e$b.extCompileObj&&e$b.extCompileFunc?e$b.extCompileFunc.call(e$b.extCompileObj,e$d,e$t,e$I):this.recreateResource()}e$c(e$b,"laya.d3.shader.Shader3D",e$l);var e$t=e$b.prototype;return e$t.recreateResource=function(){e$j.now();this._compile(),this.completeCreate(),this.memorySize=0},e$t.disposeResource=function(){e$r.mainContext.deleteShader(this._vshader),e$r.mainContext.deleteShader(this._pshader),e$r.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},e$t._compile=function(){if(!e$r.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var e$d=[this._vs,this._ps],e$t=e$r.mainContext;if(this._program=e$t.createProgram(),this._vshader=e$b._createShader(e$t,e$d[0],35633),this._pshader=e$b._createShader(e$t,e$d[1],35632),e$t.attachShader(this._program,this._vshader),e$t.attachShader(this._program,this._pshader),e$t.linkProgram(this._program),!e$w.isConchApp&&e$Lt.debugMode&&!e$t.getProgramParameter(this._program,35714))throw e$t.getProgramInfoLog(this._program);var e$l,e$k=0,e$W=0,e$i=0;for(e$i=e$w.isConchApp?e$t.getProgramParameterEx(this._vs,this._ps,"",35721):e$t.getProgramParameter(this._program,35721),e$k=0;e$k<e$i;e$k++){var e$A=null;e$l={vartype:"attribute",ivartype:0,attrib:e$A=e$w.isConchApp?e$t.getActiveAttribEx(this._vs,this._ps,"",e$k):e$t.getActiveAttrib(this._program,e$k),location:e$t.getAttribLocation(this._program,e$A.name),name:e$A.name,type:e$A.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(e$l)}var e$B=0;for(e$B=e$w.isConchApp?e$t.getProgramParameterEx(this._vs,this._ps,"",35718):e$t.getProgramParameter(this._program,35718),e$k=0;e$k<e$B;e$k++){var e$o=null;e$o=e$w.isConchApp?e$t.getActiveUniformEx(this._vs,this._ps,"",e$k):e$t.getActiveUniform(this._program,e$k),0<(e$l={vartype:"uniform",ivartype:1,attrib:e$A,location:e$t.getUniformLocation(this._program,e$o.name),name:e$o.name,type:e$o.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(e$l.name=e$l.name.substr(0,e$l.name.length-3),e$l.isArray=!0,e$l.location=e$t.getUniformLocation(this._program,e$l.name)),this._uniformParams.push(e$l)}for(e$k=0,e$W=this._attributeParams.length;e$k<e$W;e$k++)(e$l=this._attributeParams[e$k]).indexOfParams=e$k,e$l.index=1,e$l.value=[e$l.location,null],e$l.codename=e$l.name,e$l.name=null!=this._attributeMap[e$l.codename]?this._attributeMap[e$l.codename]:e$l.codename,this._attributeParamsMap.push(e$l.name),this._attributeParamsMap.push(e$l),e$l._this=this,e$l.uploadedValue=[],e$l.fun=this._attribute;for(e$k=0,e$W=this._uniformParams.length;e$k<e$W;e$k++)switch((e$l=this._uniformParams[e$k]).indexOfParams=e$k,e$l.index=1,e$l.value=[e$l.location,null],e$l.codename=e$l.name,null!=this._sceneUniformMap[e$l.codename]?(e$l.name=this._sceneUniformMap[e$l.codename],this._sceneUniformParamsMap.push(e$l.name),this._sceneUniformParamsMap.push(e$l)):null!=this._cameraUniformMap[e$l.codename]?(e$l.name=this._cameraUniformMap[e$l.codename],this._cameraUniformParamsMap.push(e$l.name),this._cameraUniformParamsMap.push(e$l)):null!=this._spriteUniformMap[e$l.codename]?(e$l.name=this._spriteUniformMap[e$l.codename],this._spriteUniformParamsMap.push(e$l.name),this._spriteUniformParamsMap.push(e$l)):null!=this._materialUniformMap[e$l.codename]?(e$l.name=this._materialUniformMap[e$l.codename],this._materialUniformParamsMap.push(e$l.name),this._materialUniformParamsMap.push(e$l)):null!=this._renderElementUniformMap[e$l.codename]?(e$l.name=this._renderElementUniformMap[e$l.codename],this._renderElementUniformParamsMap.push(e$l.name),this._renderElementUniformParamsMap.push(e$l)):console.log("Shader:can't find uinform name:"+e$l.codename+" in shader file."),e$l._this=this,e$l.uploadedValue=[],e$l.type){case 5124:e$l.fun=e$l.isArray?this._uniform1iv:this._uniform1i;break;case 5126:e$l.fun=e$l.isArray?this._uniform1fv:this._uniform1f;break;case 35664:e$l.fun=e$l.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:e$l.fun=e$l.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:e$l.fun=e$l.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:e$l.fun=this._uniform_sampler2D;break;case 35680:e$l.fun=this._uniform_samplerCube;break;case 35676:e$l.fun=this._uniformMatrix4fv;break;case 35670:e$l.fun=this._uniform1i;break;case 35674:e$l.fun=this._uinformMatrix2fv;break;case 35675:e$l.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},e$t._attribute=function(e$d,e$t){var e$l=e$r.mainContext,e$k=e$B._enableAtributes,e$W=e$d.location;return e$k[e$W]||e$l.enableVertexAttribArray(e$W),e$l.vertexAttribPointer(e$W,e$t[0],e$t[1],e$t[2],e$t[3],e$t[4]),e$k[e$W]=e$B._bindVertexBuffer,1},e$t._uniform1f=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t?(e$r.mainContext.uniform1f(e$d.location,e$l[0]=e$t),1):0},e$t._uniform1fv=function(e$d,e$t){if(e$t.length<4){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$r.mainContext.uniform1fv(e$d.location,e$t),e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3],1):0}return e$r.mainContext.uniform1fv(e$d.location,e$t),1},e$t._uniform_vec2=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]?(e$r.mainContext.uniform2f(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1]),1):0},e$t._uniform_vec2v=function(e$d,e$t){if(e$t.length<2){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$r.mainContext.uniform2fv(e$d.location,e$t),e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3],1):0}return e$r.mainContext.uniform2fv(e$d.location,e$t),1},e$t._uniform_vec3=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]?(e$r.mainContext.uniform3f(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2]),1):0},e$t._uniform_vec3v=function(e$d,e$t){return e$r.mainContext.uniform3fv(e$d.location,e$t),1},e$t._uniform_vec4=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$r.mainContext.uniform4f(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3]),1):0},e$t._uniform_vec4v=function(e$d,e$t){return e$r.mainContext.uniform4fv(e$d.location,e$t),1},e$t._uniformMatrix2fv=function(e$d,e$t){return e$r.mainContext.uniformMatrix2fv(e$d.location,!1,e$t),1},e$t._uniformMatrix3fv=function(e$d,e$t){return e$r.mainContext.uniformMatrix3fv(e$d.location,!1,e$t),1},e$t._uniformMatrix4fv=function(e$d,e$t){return e$r.mainContext.uniformMatrix4fv(e$d.location,!1,e$t),1},e$t._uinformMatrix2fv=function(e$d,e$t){return e$r.mainContext.uniformMatrix2fv(e$d.location,!1,e$t),1},e$t._uinformMatrix3fv=function(e$d,e$t){return e$r.mainContext.uniformMatrix3fv(e$d.location,!1,e$t),1},e$t._uniform1i=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t?(e$r.mainContext.uniform1i(e$d.location,e$l[0]=e$t),1):0},e$t._uniform1iv=function(e$d,e$t){return e$r.mainContext.uniform1iv(e$d.location,e$t),1},e$t._uniform_ivec2=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]?(e$r.mainContext.uniform2i(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1]),1):0},e$t._uniform_ivec2v=function(e$d,e$t){return e$r.mainContext.uniform2iv(e$d.location,e$t),1},e$t._uniform_vec3i=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]?(e$r.mainContext.uniform3i(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2]),1):0},e$t._uniform_vec3vi=function(e$d,e$t){return e$r.mainContext.uniform3iv(e$d.location,e$t),1},e$t._uniform_vec4i=function(e$d,e$t){var e$l=e$d.uploadedValue;return e$l[0]!==e$t[0]||e$l[1]!==e$t[1]||e$l[2]!==e$t[2]||e$l[3]!==e$t[3]?(e$r.mainContext.uniform4i(e$d.location,e$l[0]=e$t[0],e$l[1]=e$t[1],e$l[2]=e$t[2],e$l[3]=e$t[3]),1):0},e$t._uniform_vec4vi=function(e$d,e$t){return e$r.mainContext.uniform4iv(e$d.location,e$t),1},e$t._uniform_sampler2D=function(e$d,e$t){var e$l=e$t.source||e$t.defaulteTexture.source,e$k=e$r.mainContext,e$W=e$d.uploadedValue;if(null!=e$W[0])return e$k.activeTexture(e$b._TEXTURES[e$W[0]]),e$l&&e$S.bindTexture(e$k,3553,e$l),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return e$W[0]=this._curActTexIndex,e$k.uniform1i(e$d.location,this._curActTexIndex),e$k.activeTexture(e$b._TEXTURES[this._curActTexIndex]),e$l&&e$S.bindTexture(e$k,3553,e$l),this._curActTexIndex++,1},e$t._uniform_samplerCube=function(e$d,e$t){var e$l=e$t.source||e$t.defaulteTexture.source,e$k=e$r.mainContext,e$W=e$d.uploadedValue;if(null!=e$W[0])return e$k.activeTexture(e$b._TEXTURES[e$W[0]]),e$l?e$S.bindTexture(e$k,34067,e$l):e$S.bindTexture(e$k,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return e$W[0]=this._curActTexIndex,e$k.uniform1i(e$d.location,this._curActTexIndex),e$k.activeTexture(e$b._TEXTURES[this._curActTexIndex]),e$l?e$S.bindTexture(e$k,34067,e$l):e$S.bindTexture(e$k,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},e$t._noSetValue=function(e$d){console.log("no....:"+e$d.name)},e$t.bind=function(){return e$l.activeShader=this,(e$l.bindShader=this).activeResource(),e$S.UseProgram(this._program)},e$t.uploadAttributes=function(e$d,e$t){for(var e$l,e$k,e$W=0,e$i=0,e$A=this._attributeParamsMap.length;e$i<e$A;e$i+=2)e$k=this._attributeParamsMap[e$i+1],null!=(e$l=e$d[this._attributeParamsMap[e$i]])&&(e$t&&e$t[e$k.name]&&e$t[e$k.name].bind(),e$W+=e$k.fun.call(this,e$k,e$l));e$L.shaderCall+=e$W},e$t.uploadAttributesX=function(e$d,e$t){for(var e$l,e$k,e$W=0,e$i=0,e$A=this._attributeParamsMap.length;e$i<e$A;e$i+=2)e$k=this._attributeParamsMap[e$i+1],null!=(e$l=e$d[this._attributeParamsMap[e$i]])&&(e$t._bind(),e$W+=e$k.fun.call(this,e$k,e$l));e$L.shaderCall+=e$W},e$t.uploadSceneUniforms=function(e$d){for(var e$t,e$l,e$k=0,e$W=0,e$i=this._sceneUniformParamsMap.length;e$W<e$i;e$W+=2)e$l=this._sceneUniformParamsMap[e$W+1],null!=(e$t=e$d[this._sceneUniformParamsMap[e$W]])&&(e$k+=e$l.fun.call(this,e$l,e$t));e$L.shaderCall+=e$k},e$t.uploadCameraUniforms=function(e$d){for(var e$t,e$l,e$k=0,e$W=0,e$i=this._cameraUniformParamsMap.length;e$W<e$i;e$W+=2)e$l=this._cameraUniformParamsMap[e$W+1],null!=(e$t=e$d[this._cameraUniformParamsMap[e$W]])&&(e$k+=e$l.fun.call(this,e$l,e$t));e$L.shaderCall+=e$k},e$t.uploadSpriteUniforms=function(e$d){for(var e$t,e$l,e$k=0,e$W=0,e$i=this._spriteUniformParamsMap.length;e$W<e$i;e$W+=2)e$l=this._spriteUniformParamsMap[e$W+1],null!=(e$t=e$d[this._spriteUniformParamsMap[e$W]])&&(e$k+=e$l.fun.call(this,e$l,e$t));e$L.shaderCall+=e$k},e$t.uploadMaterialUniforms=function(e$d){for(var e$t,e$l,e$k=0,e$W=0,e$i=this._materialUniformParamsMap.length;e$W<e$i;e$W+=2)e$l=this._materialUniformParamsMap[e$W+1],null!=(e$t=e$d[this._materialUniformParamsMap[e$W]])&&(e$k+=e$l.fun.call(this,e$l,e$t));e$L.shaderCall+=e$k},e$t.uploadRenderElementUniforms=function(e$d){for(var e$t,e$l,e$k=0,e$W=0,e$i=this._renderElementUniformParamsMap.length;e$W<e$i;e$W+=2)e$l=this._renderElementUniformParamsMap[e$W+1],null!=(e$t=e$d[this._renderElementUniformParamsMap[e$W]])&&(e$k+=e$l.fun.call(this,e$l,e$t));e$L.shaderCall+=e$k},e$b.create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){return new e$b(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I)},e$b.addInclude=function(e$d,e$t){e$g.addInclude(e$d,e$t)},e$b._createShader=function(e$d,e$t,e$l){var e$k=e$d.createShader(e$l);if(e$d.shaderSource(e$k,e$t),e$d.compileShader(e$k),e$Lt.debugMode&&!e$d.getShaderParameter(e$k,35713))throw e$d.getShaderInfoLog(e$k);return e$k},e$b.PERIOD_RENDERELEMENT=0,e$b.PERIOD_MATERIAL=1,e$b.PERIOD_SPRITE=2,e$b.PERIOD_CAMERA=3,e$b.PERIOD_SCENE=4,e$b._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],e$b._count=0,e$b._preCompile=!1,e$b.extCompileFunc=null,e$b.extCompileObj=null,e$f(e$b,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new e$$}]),e$b}(),e$Qt=function(e$B){function e$o(){this._transformUV=null,e$o.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new e$At(.6,.6,.6)),this._setColor(10,new e$At(1,1,1)),this._setColor(11,new e$Bt(1,1,1,8)),this._setColor(12,new e$At(1,1,1)),this._setColor(7,new e$Bt(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new e$Bt(1,1,0,0)),this.renderMode=1}e$c(e$o,"laya.d3.core.material.StandardMaterial",e$B);var e$d=e$o.prototype;return e$d.disableLight=function(){this._addDisablePublicShaderDefine(e$Lt.SHADERDEFINE_POINTLIGHT|e$Lt.SHADERDEFINE_SPOTLIGHT|e$Lt.SHADERDEFINE_DIRECTIONLIGHT)},e$d.disableFog=function(){this._addDisablePublicShaderDefine(e$Lt.SHADERDEFINE_FOG)},e$d.onAsynLoaded=function(e$d,e$t,e$l){var e$k=e$t[0];if(e$k.version)e$B.prototype.onAsynLoaded.call(this,e$d,e$t,e$l);else{var e$W=e$t[1],e$i=e$k.props;for(var e$A in e$i)this[e$A]=e$i[e$A];e$o._parseStandardMaterial(e$W,this,e$k),this._endLoaded()}},e$d.cloneTo=function(e$d){e$B.prototype.cloneTo.call(this,e$d);var e$t=e$d;this._transformUV&&(e$t._transformUV=this._transformUV.clone())},e$Y(0,e$d,"ambientColor",function(){return this._getColor(9)},function(e$d){this._setColor(9,e$d)}),e$Y(0,e$d,"ambientTexture",function(){return this._getTexture(5)},function(e$d){e$d?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,e$d)}),e$Y(0,e$d,"renderMode",null,function(e$d){switch(e$d){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(e$o.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(e$d)}),e$Y(0,e$d,"reflectColor",function(){return this._getColor(12)},function(e$d){this._setColor(12,e$d)}),e$Y(0,e$d,"tilingOffset",function(){return this._getColor(15)},function(e$d){if(e$d){var e$t=e$d.elements;1!=e$t[0]||1!=e$t[1]||0!=e$t[2]||0!=e$t[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,e$d)}),e$Y(0,e$d,"albedo",function(){return this._getColor(7)},function(e$d){this._setColor(7,e$d)}),e$Y(0,e$d,"diffuseColor",function(){return this._getColor(10)},function(e$d){this._setColor(10,e$d)}),e$Y(0,e$d,"albedoColor",function(){return this._getColor(7)},function(e$d){this._setColor(7,e$d)}),e$Y(0,e$d,"specularColor",function(){return this._getColor(11)},function(e$d){this._setColor(11,e$d)}),e$Y(0,e$d,"diffuseTexture",function(){return this._getTexture(1)},function(e$d){e$d?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,e$d)}),e$Y(0,e$d,"normalTexture",function(){return this._getTexture(2)},function(e$d){e$d?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,e$d)}),e$Y(0,e$d,"specularTexture",function(){return this._getTexture(3)},function(e$d){e$d?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,e$d)}),e$Y(0,e$d,"emissiveTexture",function(){return this._getTexture(4)},function(e$d){e$d?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,e$d)}),e$Y(0,e$d,"reflectTexture",function(){return this._getTexture(6)},function(e$d){e$d?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,e$d)}),e$Y(0,e$d,"transformUV",function(){return this._transformUV},function(e$d){this._transformUV=e$d,this._setMatrix4x4(13,e$d.matrix),e$d?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,e$d.matrix.elements,0)}),e$o.__init__=function(){e$o.SHADERDEFINE_DIFFUSEMAP=e$o.shaderDefines.registerDefine("DIFFUSEMAP"),e$o.SHADERDEFINE_NORMALMAP=e$o.shaderDefines.registerDefine("NORMALMAP"),e$o.SHADERDEFINE_SPECULARMAP=e$o.shaderDefines.registerDefine("SPECULARMAP"),e$o.SHADERDEFINE_EMISSIVEMAP=e$o.shaderDefines.registerDefine("EMISSIVEMAP"),e$o.SHADERDEFINE_AMBIENTMAP=e$o.shaderDefines.registerDefine("AMBIENTMAP"),e$o.SHADERDEFINE_REFLECTMAP=e$o.shaderDefines.registerDefine("REFLECTMAP"),e$o.SHADERDEFINE_UVTRANSFORM=e$o.shaderDefines.registerDefine("UVTRANSFORM"),e$o.SHADERDEFINE_TILINGOFFSET=e$o.shaderDefines.registerDefine("TILINGOFFSET"),e$o.SHADERDEFINE_ADDTIVEFOG=e$o.shaderDefines.registerDefine("ADDTIVEFOG")},e$o.load=function(e$d){return e$R.loader.create(e$d,null,null,e$o)},e$o._parseStandardMaterial=function(e$d,e$t,e$l){var e$k=e$l.customProps,e$W=e$k.ambientColor;e$t.ambientColor=new e$At(e$W[0],e$W[1],e$W[2]);var e$i=e$k.diffuseColor;e$t.diffuseColor=new e$At(e$i[0],e$i[1],e$i[2]);var e$A=e$k.specularColor;e$t.specularColor=new e$Bt(e$A[0],e$A[1],e$A[2],e$A[3]);var e$B=e$k.reflectColor;e$t.reflectColor=new e$At(e$B[0],e$B[1],e$B[2]);var e$o=e$k.albedoColor;e$o&&(e$t.albedo=new e$Bt(e$o[0],e$o[1],e$o[2],e$o[3]));var e$I=e$k.diffuseTexture.texture2D;e$I&&(e$t.diffuseTexture=e$z.getRes(e$d[e$I]));var e$b=e$k.normalTexture.texture2D;e$b&&(e$t.normalTexture=e$z.getRes(e$d[e$b]));var e$f=e$k.specularTexture.texture2D;e$f&&(e$t.specularTexture=e$z.getRes(e$d[e$f]));var e$J=e$k.emissiveTexture.texture2D;e$J&&(e$t.emissiveTexture=e$z.getRes(e$d[e$J]));var e$c=e$k.ambientTexture.texture2D;e$c&&(e$t.ambientTexture=e$z.getRes(e$d[e$c]));var e$Y=e$k.reflectTexture.texture2D;e$Y&&(e$t.reflectTexture=e$z.getRes(e$d[e$Y]))},e$o.RENDERMODE_OPAQUE=1,e$o.RENDERMODE_OPAQUEDOUBLEFACE=2,e$o.RENDERMODE_CUTOUT=3,e$o.RENDERMODE_CUTOUTDOUBLEFACE=4,e$o.RENDERMODE_TRANSPARENT=13,e$o.RENDERMODE_TRANSPARENTDOUBLEFACE=14,e$o.RENDERMODE_ADDTIVE=15,e$o.RENDERMODE_ADDTIVEDOUBLEFACE=16,e$o.RENDERMODE_DEPTHREAD_TRANSPARENT=5,e$o.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,e$o.RENDERMODE_DEPTHREAD_ADDTIVE=7,e$o.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,e$o.RENDERMODE_NONDEPTH_TRANSPARENT=9,e$o.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,e$o.RENDERMODE_NONDEPTH_ADDTIVE=11,e$o.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,e$o.SHADERDEFINE_DIFFUSEMAP=0,e$o.SHADERDEFINE_NORMALMAP=0,e$o.SHADERDEFINE_SPECULARMAP=0,e$o.SHADERDEFINE_EMISSIVEMAP=0,e$o.SHADERDEFINE_AMBIENTMAP=0,e$o.SHADERDEFINE_REFLECTMAP=0,e$o.SHADERDEFINE_UVTRANSFORM=0,e$o.SHADERDEFINE_TILINGOFFSET=0,e$o.SHADERDEFINE_ADDTIVEFOG=0,e$o.DIFFUSETEXTURE=1,e$o.NORMALTEXTURE=2,e$o.SPECULARTEXTURE=3,e$o.EMISSIVETEXTURE=4,e$o.AMBIENTTEXTURE=5,e$o.REFLECTTEXTURE=6,e$o.ALBEDO=7,e$o.UVANIAGE=8,e$o.MATERIALAMBIENT=9,e$o.MATERIALDIFFUSE=10,e$o.MATERIALSPECULAR=11,e$o.MATERIALREFLECT=12,e$o.UVMATRIX=13,e$o.UVAGE=14,e$o.TILINGOFFSET=15,e$f(e$o,["defaultMaterial",function(){var e$d=new e$o;return e$d.lock=!0,this.defaultMaterial=e$d},"shaderDefines",function(){return this.shaderDefines=new e$bt(e$Tt.shaderDefines)}]),e$o}(e$Tt),e$yt=function(e$d){function e$A(e$d,e$t,e$l,e$k,e$W){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===e$l&&(e$l=35044),void 0===e$k&&(e$k=!1),e$A.__super.call(this),this._indexType=e$d,this._indexCount=e$t,this._bufferUsage=e$l,this._bufferType=34963,this._canRead=e$k;var e$i;if("ushort"==e$d)this._indexTypeByteCount=2;else{if("ubyte"!=e$d)throw new Error("unidentification index type.");this._indexTypeByteCount=1}e$i=this._indexTypeByteCount*e$t,this._byteLength=e$i,this._bind(),e$B._gl.bufferData(this._bufferType,e$i,this._bufferUsage),this.uri=e$W,e$k?("ushort"==e$d?this._buffer=new Uint16Array(e$t):"ubyte"==e$d&&(this._buffer=new Uint8Array(e$t)),this.memorySize=2*e$i):this.memorySize=e$i}e$c(e$A,"laya.d3.graphics.IndexBuffer3D",e$d);var e$t=e$A.prototype;return e$t.setData=function(e$d,e$t,e$l,e$k){void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=4294967295);var e$W=0;if("ushort"==this._indexType?(e$W=2,0===e$l&&4294967295===e$k||(e$d=new Uint16Array(e$d.buffer,e$l*e$W,e$k))):"ubyte"==this._indexType&&(e$W=1,0===e$l&&4294967295===e$k||(e$d=new Uint8Array(e$d.buffer,e$l*e$W,e$k))),this._bind(),e$B._gl.bufferSubData(this._bufferType,e$t*e$W,e$d),this._canRead)if(0!==e$t||0!==e$l||4294967295!==e$k){var e$i=this._buffer.length-e$t;e$i<e$k&&(e$k=e$i);for(var e$A=0;e$A<e$k;e$A++)this._buffer[e$t+e$A]=e$d[e$A]}else this._buffer=e$d},e$t.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},e$t.disposeResource=function(){e$d.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},e$Y(0,e$t,"indexType",function(){return this._indexType}),e$Y(0,e$t,"indexTypeByteCount",function(){return this._indexTypeByteCount}),e$Y(0,e$t,"indexCount",function(){return this._indexCount}),e$Y(0,e$t,"canRead",function(){return this._canRead}),e$A.INDEXTYPE_UBYTE="ubyte",e$A.INDEXTYPE_USHORT="ushort",e$A.create=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$l&&(e$l=35044),void 0===e$k&&(e$k=!1),new e$A(e$d,e$t,e$l,e$k,e$W)},e$A}(e$B),e$Vt=function(e$i){function e$A(e$d,e$t,e$l,e$k,e$W){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===e$k&&(e$k=!1),e$A.__super.call(this),this._vertexDeclaration=e$d,this._vertexCount=e$t,this._bufferUsage=e$l,this._bufferType=34962,this._canRead=e$k,this.uri=e$W,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*e$t,this._bind(),e$B._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),e$k&&(this._buffer=new Float32Array(this._byteLength/4))}e$c(e$A,"laya.d3.graphics.VertexBuffer3D",e$i);var e$d=e$A.prototype;return e$d.bindWithIndexBuffer=function(e$d){e$d&&e$d._bind(),this._bind()},e$d.setData=function(e$d,e$t,e$l,e$k){if(void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=4294967295),0===e$l&&4294967295===e$k||(e$d=new Float32Array(e$d.buffer,4*e$l,e$k)),this._bind(),e$B._gl.bufferSubData(this._bufferType,4*e$t,e$d),this._canRead)if(0!==e$t||0!==e$l||4294967295!==e$k){var e$W=this._buffer.length-e$t;e$W<e$k&&(e$k=e$W);for(var e$i=0;e$i<e$k;e$i++)this._buffer[e$t+e$i]=e$d[e$i]}else this._buffer=e$d},e$d.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},e$d.disposeResource=function(){for(var e$d=e$r.mainContext,e$t=this._vertexDeclaration.getVertexElements(),e$l=e$B._enableAtributes,e$k=0,e$W=e$t.length;e$k<e$W;e$k++)e$l[e$k]===this._glBuffer&&(e$d.disableVertexAttribArray(e$k),e$l[e$k]=null);e$i.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},e$Y(0,e$d,"vertexDeclaration",function(){return this._vertexDeclaration}),e$Y(0,e$d,"vertexCount",function(){return this._vertexCount}),e$Y(0,e$d,"canRead",function(){return this._canRead}),e$A.create=function(e$d,e$t,e$l,e$k,e$W){return void 0===e$l&&(e$l=35044),void 0===e$k&&(e$k=!1),new e$A(e$d,e$t,e$l,e$k,e$W)},e$A}(e$B),e$Zt=function(e$d){function e$g(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,e$g.__super.call(this),this._type=3553}e$c(e$g,"laya.d3.resource.DataTexture2D",e$rt);var e$t=e$g.prototype;return e$t.genDebugMipmaps=function(){var e$d=[];return e$d.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),e$d.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),e$d.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),e$d.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),e$d.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),e$d.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),e$d.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),e$d.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),e$d.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),e$d.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),e$d},e$t._onTextureLoaded=function(e$d){},e$t._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var e$d=e$r.mainContext,e$t=this._source=e$d.createTexture(),e$l=this._width,e$k=this._height,e$W=e$S.curBindTexTarget,e$i=e$S.curBindTexValue,e$A=!1;if(e$S.bindTexture(e$d,this._type,e$t),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var e$B=0;e$d.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var e$o=0;e$o<this._mipmaps.length;e$o++){if(this._mipmaps[e$o].byteLength!=e$I*e$b*4)throw"mipmap size error  level:"+e$o;e$d.texSubImage2D(this._type,0,e$g.simLodRect[e$B++],e$g.simLodRect[e$B++],e$g.simLodRect[e$B++],e$g.simLodRect[e$B++],6408,5121,new Uint8Array(this._mipmaps[e$o]))}this.minFifter=9729,this.magFifter=9729}else{var e$I=this._width,e$b=this._height;for(e$B=0,e$d.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),e$o=0;e$o<this._mipmaps.length;e$o++){if(this._mipmaps[e$o].byteLength!=e$I*e$b*4)throw"mipmap size error  level:"+e$o;e$d.texImage2D(this._type,e$o,6408,e$I,e$b,0,6408,5121,new Uint8Array(this._mipmaps[e$o])),(e$I/=2)<1&&(e$I=1),(e$b/=2)<1&&(e$b=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&e$d.pixelStorei(e$d.UNPACK_ALIGNMENT,1),e$d.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var e$f=0,e$J=!1,e$c=!1;this._buffer.byteLength==4*e$l*e$k?(e$f=6408,e$J=!0):this._buffer.byteLength==3*e$l*e$k?(e$f=6407,e$c=!0):e$f=this._format,e$J||e$c?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),e$c&&e$d.pixelStorei(e$d.UNPACK_ALIGNMENT,1),e$d.texImage2D(this._type,0,e$f,e$l,e$k,0,e$f,5121,this._buffer)):e$d&&e$f==e$d.ALPHA?(e$d.texImage2D(3553,0,e$f,e$l,e$k,0,e$f,e$d.UNSIGNED_BYTE,this._buffer),e$A=!0):0!=e$f&&(e$d.compressedTexImage2D(3553,0,e$f,e$l,e$k,0,this._buffer),e$A=!0)}var e$Y=this._minFifter,e$w=this._magFifter,e$D=0==this._wrapModeU?10497:33071,e$z=0==this._wrapModeV?10497:33071,e$e=e$H.isPOT(e$l,e$k);e$e?(this._mipmap||this._mipmaps?-1!==e$Y||(e$Y=9987):-1!==e$Y||(e$Y=9729),-1!==e$w||(e$w=9729),e$d.texParameteri(this._type,10241,e$Y),e$d.texParameteri(this._type,10240,e$w),e$d.texParameteri(this._type,10242,e$D),e$d.texParameteri(this._type,10243,e$z),this._mipmap&&e$d.generateMipmap(this._type)):(-1!==e$Y||(e$Y=9729),-1!==e$w||(e$w=9729),e$d.texParameteri(this._type,10241,e$Y),e$d.texParameteri(this._type,10240,e$w),e$d.texParameteri(this._type,10242,33071),e$d.texParameteri(this._type,10243,33071)),e$W&&e$i&&e$S.bindTexture(e$d,e$W,e$i),this.memorySize=e$A?this._buffer.length:e$e?e$l*e$k*4*(1+1/3):e$l*e$k*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},e$t.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},e$t.onAsynLoaded=function(e$d,e$t,e$l){var e$k;e$l&&(e$k=e$l[0].call(this,e$t)),e$k&&(this._width=e$k.width,this._height=e$k.height,this._buffer=e$k.data),this._src=e$d,this._size=new e$wt(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},e$t.getPixels=function(){return new Uint8Array(this._buffer)},e$t.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(e$r.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},e$Y(0,e$t,"src",function(){return this._src}),e$g.create=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){if(void 0===e$k&&(e$k=9729),void 0===e$W&&(e$W=9729),void 0===e$i&&(e$i=!0),!e$d||e$d.byteLength<e$t*e$l*4)throw"DataTexture2D create error";var e$B=new e$g;return e$B.uri=e$A,e$B._buffer=e$d,e$B._width=e$t,e$B._height=e$l,e$B._mipmap=e$i,e$B._magFifter=e$k,e$B._minFifter=e$W,e$B._size=new e$wt(e$B._width,e$B._height),e$B._conchTexture?alert("怎么给runtime传递datatexture数据"):e$B.activeResource(),e$B},e$g.load=function(e$d,e$t,e$l,e$k,e$W){if(void 0===e$t&&(e$t=0),void 0===e$l&&(e$l=0),void 0===e$k&&(e$k=9729),void 0===e$W&&(e$W=9729),"mipmaps"===e$p.getFileExtension(e$d)){var e$i=e$R.loader.create(e$d,null,null,e$g,[function(e$d){this._mipmaps=[];var e$t=new Uint32Array(e$d);this._width=e$t[0];var e$l=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,e$l=1024),this._width!=e$l)throw"现在只支持512x256的环境贴图。当前的是"+e$t[0];this._height=e$t[1];for(var e$k=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,e$W=this._height,e$i=8;;){var e$A=e$k*e$W*4;if(e$i+e$A>e$d.byteLength)throw"load mipmaps data size error ";var e$B=new Uint8Array(e$d,e$i,e$A);if(this._mipmaps.push(e$B),e$i+=e$A,1==e$k&&1==e$W)break;(e$k/=2)<1&&(e$k=1),(e$W/=2)<1&&(e$W=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){e$i.simLodInfo=new Float32Array(40);for(var e$A=0;e$A<e$i.simLodInfo.length;)e$i.simLodInfo[e$A]=(e$g.simLodRect[e$A]+.5)/1024,e$A++,e$i.simLodInfo[e$A]=(e$g.simLodRect[e$A]+.5)/256,e$A++,e$i.simLodInfo[e$A]=Math.max(e$g.simLodRect[e$A]-1,.1)/1024,e$A++,e$i.simLodInfo[e$A]=Math.max(e$g.simLodRect[e$A]-1.5,.1)/256,e$A++}return e$i}if("number"==typeof e$t)return e$R.loader.create(e$d,null,null,e$g,[function(e$d){return this._width=e$t,this._height=e$l,this._buffer=e$d,null}]);if("function"==typeof e$t)return e$R.loader.create(e$d,null,null,e$g,[e$t]);throw new Error("unknown params.")},e$g.lodasatlas=!1,e$f(e$g,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),e$g}(),e$Ut=function(e$d){function e$t(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,e$t.__super.call(this)}e$c(e$t,"laya.d3.resource.models.PrimitiveMesh",e$St);var e$l=e$t.prototype;return e$R.imps(e$l,{"laya.d3.core.render.IRenderable":!0}),e$l._getVertexBuffer=function(e$d){return void 0===e$d&&(e$d=0),0===e$d?this._vertexBuffer:null},e$l._getVertexBuffers=function(){return null},e$l._getIndexBuffer=function(){return this._indexBuffer},e$l._getPositions=function(){var e$d,e$t=[],e$l=this._vertexBuffer.vertexDeclaration.getVertexElements(),e$k=0;for(e$k=0;e$k<e$l.length;e$k++){var e$W=e$l[e$k];if("vector3"===e$W.elementFormat&&0===e$W.elementUsage){e$d=e$W;break}}var e$i=this._vertexBuffer.getData();for(e$k=0;e$k<e$i.length;e$k+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var e$A=e$k+e$d.offset/4,e$B=new e$At(e$i[e$A+0],e$i[e$A+1],e$i[e$A+2]);e$t.push(e$B)}return e$t},e$l.getRenderElement=function(e$d){return this},e$l.getRenderElementsCount=function(){return 1},e$l.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},e$l._beforeRender=function(e$d){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},e$l._render=function(e$d){e$r.mainContext.drawElements(4,this._numberIndices,5123,0),e$L.drawCall++,e$L.trianglesFaces+=this._numberIndices/3},e$Y(0,e$l,"_vertexBufferCount",function(){return 1}),e$Y(0,e$l,"triangleCount",function(){return this._indexBuffer.indexCount/3}),e$t}(),e$Et=function(e$d){function e$t(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,e$t.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}e$c(e$t,"laya.d3.resource.models.Mesh",e$St);var e$l=e$t.prototype;return e$l._getPositions=function(){var e$d,e$t,e$l,e$k,e$W,e$i=[],e$A=0,e$B=0,e$o=0;if(0!==this._vertexBuffers.length){var e$I=this._vertexBuffers.length;for(e$A=0;e$A<e$I;e$A++){for(e$l=(e$d=this._vertexBuffers[e$A]).vertexDeclaration.getVertexElements(),e$B=0;e$B<e$l.length;e$B++)if("vector3"===(e$k=e$l[e$B]).elementFormat&&0===e$k.elementUsage){e$t=e$k;break}for(e$W=e$d.getData(),e$B=0;e$B<e$W.length;e$B+=e$d.vertexDeclaration.vertexStride/4)e$o=e$B+e$t.offset/4,e$i.push(new e$At(e$W[e$o+0],e$W[e$o+1],e$W[e$o+2]))}}else{var e$b=this._subMeshes.length;for(e$A=0;e$A<e$b;e$A++){for(e$l=(e$d=this._subMeshes[e$A]._getVertexBuffer()).vertexDeclaration.getVertexElements(),e$B=0;e$B<e$l.length;e$B++)if("vector3"===(e$k=e$l[e$B]).elementFormat&&0===e$k.elementUsage){e$t=e$k;break}for(e$W=e$d.getData(),e$B=0;e$B<e$W.length;e$B+=e$d.vertexDeclaration.vertexStride/4)e$o=e$B+e$t.offset/4,e$i.push(new e$At(e$W[e$o+0],e$W[e$o+1],e$W[e$o+2]))}}return e$i},e$l._setSubMeshes=function(e$d){this._subMeshes=e$d,this._subMeshCount=e$d.length;for(var e$t=0;e$t<this._subMeshCount;e$t++)e$d[e$t]._indexInMesh=e$t;this._positions=this._getPositions(),this._generateBoundingObject()},e$l.onAsynLoaded=function(e$d,e$t,e$l){var e$k=e$t[0],e$W=e$t[1];e$md.read(e$k,this,this._materials,this._subMeshes,e$W),this.completeCreate(),this._endLoaded()},e$l.getSubMesh=function(e$d){return this._subMeshes[e$d]},e$l.getSubMeshCount=function(){return this._subMeshes.length},e$l.getRenderElementsCount=function(){return this._subMeshes.length},e$l.getRenderElement=function(e$d){return this._subMeshes[e$d]},e$l.disposeResource=function(){for(var e$d=0;e$d<this._subMeshes.length;e$d++)this._subMeshes[e$d].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},e$Y(0,e$l,"materials",function(){return this._materials.slice()}),e$Y(0,e$l,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),e$t.load=function(e$d){return e$R.loader.create(e$d,null,null,e$t)},e$t}(),e$Nt=(function(e$d){function e$I(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===e$l&&(e$l=6408),void 0===e$k&&(e$k=5121),void 0===e$W&&(e$W=33189),void 0===e$i&&(e$i=!1),void 0===e$A&&(e$A=!1),void 0===e$B&&(e$B=-1),void 0===e$o&&(e$o=-1),e$I.__super.call(this),this._type=3553,this._width=e$d,this._height=e$t,this._size=new e$wt(e$d,e$t),this._surfaceFormat=e$l,this._surfaceType=e$k,this._depthStencilFormat=e$W,e$w.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=e$i,this._repeat=e$A,this._minFifter=e$B,this._magFifter=e$o,this.activeResource(),this._alreadyResolved=!0}e$c(e$I,"laya.d3.resource.RenderTexture",e$rt);var e$t=e$I.prototype;e$t.recreateResource=function(){var e$d=e$r.mainContext;this._frameBuffer=e$d.createFramebuffer(),this._source=e$d.createTexture();var e$t=e$S.curBindTexTarget,e$l=e$S.curBindTexValue;e$S.bindTexture(e$d,this._type,this._source),e$d.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var e$k=this._minFifter,e$W=this._magFifter,e$i=this._repeat?10497:33071;if(e$H.isPOT(this._width,this._height)?(this._mipmap?-1!==e$k||(e$k=9987):-1!==e$k||(e$k=9729),-1!==e$W||(e$W=9729),e$d.texParameteri(this._type,10241,e$k),e$d.texParameteri(this._type,10240,e$W),e$d.texParameteri(this._type,10242,e$i),e$d.texParameteri(this._type,10243,e$i),this._mipmap&&e$d.generateMipmap(this._type)):(-1!==e$k||(e$k=9729),-1!==e$W||(e$W=9729),e$d.texParameteri(this._type,10241,e$k),e$d.texParameteri(this._type,10240,e$W),e$d.texParameteri(this._type,10242,33071),e$d.texParameteri(this._type,10243,33071)),e$t&&e$l&&e$S.bindTexture(e$d,e$t,e$l),e$d.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=e$d.createRenderbuffer(),e$d.bindRenderbuffer(36161,this._depthStencilBuffer),e$d.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),e$d.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:e$d.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:e$d.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:e$d.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}e$d.framebufferTexture2D(36160,36064,3553,this._source,0),e$d.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},e$t.start=function(){e$r.mainContext.bindFramebuffer(36160,this.frameBuffer),(e$I._currentRenderTarget=this)._alreadyResolved=!1},e$t.end=function(){e$r.mainContext.bindFramebuffer(36160,null),e$I._currentRenderTarget=null,this._alreadyResolved=!0},e$t.getData=function(e$d,e$t,e$l,e$k){var e$W=e$r.mainContext;if(e$W.bindFramebuffer(36160,this._frameBuffer),!(36053===e$W.checkFramebufferStatus(36160)))return e$W.bindFramebuffer(36160,null),null;var e$i=new Uint8Array(this._width*this._height*4);return e$W.readPixels(e$d,e$t,e$l,e$k,this._surfaceFormat,this._surfaceType,e$i),e$W.bindFramebuffer(36160,null),e$i},e$t.disposeResource=function(){if(this._frameBuffer){var e$d=e$r.mainContext;e$d.deleteTexture(this._source),e$d.deleteFramebuffer(this._frameBuffer),e$d.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},e$Y(0,e$t,"surfaceFormat",function(){return this._surfaceFormat}),e$Y(0,e$t,"surfaceType",function(){return this._surfaceType}),e$Y(0,e$t,"depthStencilFormat",function(){return this._depthStencilFormat}),e$Y(0,e$t,"source",function(){return this._alreadyResolved?e$R.superGet(e$rt,this,"source"):null}),e$Y(0,e$t,"depthStencilBuffer",function(){return this._depthStencilBuffer}),e$Y(0,e$t,"frameBuffer",function(){return this._frameBuffer}),e$I._currentRenderTarget=null}(),function(e$d){function e$t(e$d){this._color=null,this._pixels=null,e$t.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new e$wt(this.width,this.height),this._color=e$d,this._pixels=new Uint8Array([255*e$d.x,255*e$d.y,255*e$d.z,255*e$d.w]),this.uri="SolidColorTexture2D_"+this.id}e$c(e$t,"laya.d3.resource.SolidColorTexture2D",e$rt);var e$l=e$t.prototype;return e$l._createWebGlTexture=function(){var e$d=e$r.mainContext,e$t=this._source=e$d.createTexture(),e$l=this._width,e$k=this._height,e$W=e$S.curBindTexTarget,e$i=e$S.curBindTexValue;e$S.bindTexture(e$d,this._type,e$t),e$d.texImage2D(this._type,0,6408,e$l,e$k,0,6408,5121,this._pixels);var e$A=this._minFifter,e$B=this._magFifter,e$o=this._repeat?10497:33071,e$I=e$H.isPOT(e$l,e$k);e$I?(this._mipmap?-1!==e$A||(e$A=9987):-1!==e$A||(e$A=9729),-1!==e$B||(e$B=9729),e$d.texParameteri(this._type,10241,e$A),e$d.texParameteri(this._type,10240,e$B),e$d.texParameteri(this._type,10242,e$o),e$d.texParameteri(this._type,10243,e$o),this._mipmap&&e$d.generateMipmap(this._type)):(-1!==e$A||(e$A=9729),-1!==e$B||(e$B=9729),e$d.texParameteri(this._type,10241,e$A),e$d.texParameteri(this._type,10240,e$B),e$d.texParameteri(this._type,10242,33071),e$d.texParameteri(this._type,10243,33071)),e$W&&e$i&&e$S.bindTexture(e$d,e$W,e$i),this.memorySize=e$I?e$l*e$k*4*(1+1/3):e$l*e$k*4},e$l.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},e$l.disposeResource=function(){this._source&&(e$r.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},e$f(e$t,["magentaTexture",function(){var e$d=new e$t(new e$Bt(1,0,1,1));return e$d.lock=!0,this.magentaTexture=e$d},"grayTexture",function(){var e$d=new e$t(new e$Bt(.5,.5,.5,1));return e$d.lock=!0,this.grayTexture=e$d}]),e$t}()),e$ut=function(e$d){function e$W(e$d,e$t,e$l,e$k){this._canRead=!1,this._image=null,this._pixels=null,void 0===e$d&&(e$d=!1),void 0===e$t&&(e$t=!0),void 0===e$l&&(e$l=6408),void 0===e$k&&(e$k=!0),e$W.__super.call(this),this._type=3553,this._repeat=e$t,this._canRead=e$d,this._format=e$l,this._mipmap=e$k}e$c(e$W,"laya.d3.resource.Texture2D",e$rt);var e$t=e$W.prototype;return e$t._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var e$d=e$r.mainContext,e$t=this._source=e$d.createTexture(),e$l=this._width,e$k=this._height,e$W=e$S.curBindTexTarget,e$i=e$S.curBindTexValue;switch(e$S.bindTexture(e$d,this._type,e$t),this._format){case 6407:case 6408:this._canRead?e$d.texImage2D(this._type,0,this._format,e$l,e$k,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?e$d.texImage2D(this._type,0,this._image._format,e$l,e$k,0,this._image._format,5121,this._image.atlasSource):e$d.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case e$r.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:e$d.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var e$A=this._minFifter,e$B=this._magFifter,e$o=this._repeat?10497:33071,e$I=0==this._wrapModeU?10497:33071,e$b=0==this._wrapModeV?10497:33071,e$f=e$H.isPOT(e$l,e$k);e$f?(this._mipmap?-1!==e$A||(e$A=9987):-1!==e$A||(e$A=9729),-1!==e$B||(e$B=9729),e$d.texParameteri(this._type,10241,e$A),e$d.texParameteri(this._type,10240,e$B),e$d.texParameteri(this._type,10242,e$o),e$d.texParameteri(this._type,10243,e$o),e$d.texParameteri(this._type,10242,e$I),e$d.texParameteri(this._type,10243,e$b),this._mipmap&&e$d.generateMipmap(this._type)):(-1!==e$A||(e$A=9729),-1!==e$B||(e$B=9729),e$d.texParameteri(this._type,10241,e$A),e$d.texParameteri(this._type,10240,e$B),e$d.texParameteri(this._type,10242,33071),e$d.texParameteri(this._type,10243,33071)),e$W&&e$i&&e$S.bindTexture(e$d,e$W,e$i),this._image.onload=null,this._image=null,this.memorySize=e$f?e$l*e$k*4*(1+1/3):e$l*e$k*4},e$t.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},e$t.onAsynLoaded=function(e$d,e$t,e$l){if(e$l){var e$k=e$l[0];void 0!==e$k&&(this._canRead=e$k);var e$W=e$l[1];void 0!==e$W&&(this._repeat=e$W);var e$i=e$l[2];void 0!==e$i&&(this._format=e$i);var e$A=e$l[3];void 0!==e$A&&(this._mipmap=e$A);var e$B=e$l.wrapModeU;void 0!==e$B&&(this._wrapModeU=e$B);var e$o=e$l.wrapModeV;void 0!==e$o&&(this._wrapModeV=e$o)}switch(this._format){case 6407:case 6408:var e$I=(this._image=e$t).width,e$b=e$t.height;this._width=e$I,this._height=e$b,this._size=new e$wt(e$I,e$b),this._canRead&&(e$w.isConchApp?e$t instanceof e$J.HTMLElement&&(this._pixels=new Uint8Array(e$t.getImageData(0,0,e$I,e$b))):(e$j.canvas.size(e$I,e$b),e$j.canvas.clear(),e$j.context.drawImage(e$t,0,0,e$I,e$b),this._pixels=new Uint8Array(e$j.context.getImageData(0,0,e$I,e$b).data.buffer)));break;case e$r.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var e$f=new e$G(e$t);e$f.readUTFBytes(4),e$f.readUTFBytes(2),e$f.getInt16();e$f.endian="bigEndian",this._width=e$f.getInt16(),this._height=e$f.getInt16(),this._size=new e$wt(this._width,this._height);e$f.getInt16(),e$f.getInt16();this._image=new Uint8Array(e$t,e$f.pos)}this.recreateResource(),this._endLoaded()},e$t.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},e$t.disposeResource=function(){this._source&&(e$r.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},e$Y(0,e$t,"_src",function(){return this.url}),e$Y(0,e$t,"src",function(){return this.url}),e$W.load=function(e$d){return e$R.loader.create(e$d,null,null,e$W)},e$W}(),e$ht=function(e$t){function e$l(e$d,e$t){e$l.__super.call(this),void 0===e$d&&(e$d=.3),void 0===e$t&&(e$t=1e3),this._tempVector3=new e$At,this._position=new e$At,this._up=new e$At,this._forward=new e$At,this._right=new e$At,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=e$wt.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=e$d,this._farPlane=e$t,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),e$R.stage.on("resize",this,this._onScreenSizeChanged)}e$c(e$l,"laya.d3.core.BaseCamera",e$t);var e$d=e$l.prototype;return e$d._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var e$d=this.scene._cameraPool,e$t=e$d.length-1,e$l=0;e$l<e$t;e$l++)if(e$d[e$l].renderingOrder>e$d[e$t].renderingOrder){var e$k=e$d[e$l];e$d[e$l]=e$d[e$t],e$d[e$t]=e$k}},e$d._calculateProjectionMatrix=function(){},e$d._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},e$d._prepareCameraToRender=function(){e$C._currentCameraCullingMask=this.cullingMask;var e$d=this._shaderValues;e$d.setValue(0,this.transform.position.elements),e$d.setValue(5,this.forward.elements),e$d.setValue(6,this.up.elements)},e$d._prepareCameraViewProject=function(e$d,e$t){var e$l=this._shaderValues;e$l.setValue(1,e$d.elements),e$l.setValue(2,e$t.elements)},e$d._renderCamera=function(e$d,e$t,e$l){},e$d.addLayer=function(e$d){29!==e$d.number&&30!=e$d.number&&(this.cullingMask=this.cullingMask|e$d.mask)},e$d.removeLayer=function(e$d){29!==e$d.number&&30!=e$d.number&&(this.cullingMask=this.cullingMask&~e$d.mask)},e$d.addAllLayers=function(){this.cullingMask=2147483647},e$d.removeAllLayers=function(){this.cullingMask=0|e$C.getLayerByNumber(29).mask|e$C.getLayerByNumber(30).mask},e$d.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},e$d.moveForward=function(e$d){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=e$d,this.transform.translate(this._tempVector3)},e$d.moveRight=function(e$d){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=e$d,this.transform.translate(this._tempVector3)},e$d.moveVertical=function(e$d){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=e$d,this.transform.translate(this._tempVector3,!1)},e$d._addSelfRenderObjects=function(){var e$d=this.scene._cameraPool,e$t=e$d.length;if(0<e$t){for(var e$l=e$t-1;0<=e$l;e$l--)if(this.renderingOrder<=e$d[e$l].renderingOrder){e$d.splice(e$l+1,0,this);break}}else e$d.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},e$d._clearSelfRenderObjects=function(){var e$d=this.scene._cameraPool;e$d.splice(e$d.indexOf(this),1)},e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,e$R.stage.off("resize",this,this._onScreenSizeChanged),e$t.prototype.destroy.call(this,e$d)},e$Y(0,e$d,"sky",function(){return this._sky},function(e$d){(this._sky=e$d)._ownerCamera=this}),e$Y(0,e$d,"forward",function(){var e$d=this.transform.worldMatrix.elements,e$t=this._forward.elements;return e$t[0]=-e$d[8],e$t[1]=-e$d[9],e$t[2]=-e$d[10],this._forward}),e$Y(0,e$d,"position",function(){var e$d=this.transform.worldMatrix.elements,e$t=this._position.elements;return e$t[0]=e$d[12],e$t[1]=e$d[13],e$t[2]=e$d[14],this._position}),e$Y(0,e$d,"renderTarget",function(){return this._renderTarget},function(e$d){null!=(this._renderTarget=e$d)&&(this._renderTargetSize=e$d.size)}),e$Y(0,e$d,"up",function(){var e$d=this.transform.worldMatrix.elements,e$t=this._up.elements;return e$t[0]=e$d[4],e$t[1]=e$d[5],e$t[2]=e$d[6],this._up}),e$Y(0,e$d,"right",function(){var e$d=this.transform.worldMatrix.elements,e$t=this._right.elements;return e$t[0]=e$d[0],e$t[1]=e$d[1],e$t[2]=e$d[2],this._right}),e$Y(0,e$d,"renderTargetSize",function(){return this._renderTargetSize},function(e$d){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$d,"fieldOfView",function(){return this._fieldOfView},function(e$d){this._fieldOfView=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$d,"nearPlane",function(){return this._nearPlane},function(e$d){this._nearPlane=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$d,"farPlane",function(){return this._farPlane},function(e$d){this._farPlane=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$d,"orthographic",function(){return this._orthographic},function(e$d){this._orthographic=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$d,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(e$d){this._orthographicVerticalSize=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$d,"renderingOrder",function(){return this._renderingOrder},function(e$d){this._renderingOrder=e$d,this._sortCamerasByRenderingOrder()}),e$l.CAMERAPOS=0,e$l.VIEWMATRIX=1,e$l.PROJECTMATRIX=2,e$l.VPMATRIX=3,e$l.VPMATRIX_NO_TRANSLATE=4,e$l.CAMERADIRECTION=5,e$l.CAMERAUP=6,e$l.ENVIRONMENTDIFFUSE=7,e$l.ENVIRONMENTSPECULAR=8,e$l.SIMLODINFO=9,e$l.DIFFUSEIRRADMATR=10,e$l.DIFFUSEIRRADMATG=11,e$l.DIFFUSEIRRADMATB=12,e$l.HDREXPOSURE=13,e$l.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",e$l.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",e$l.CLEARFLAG_SOLIDCOLOR=0,e$l.CLEARFLAG_SKY=1,e$l.CLEARFLAG_DEPTHONLY=2,e$l.CLEARFLAG_NONE=3,e$f(e$l,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new e$dt(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new e$dt},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new e$dt}]),e$l}(e$xt),e$st=function(e$l){function e$t(e$d){this._render=null,this._geometryFilter=null,e$t.__super.call(this,e$d)}e$c(e$t,"laya.d3.core.RenderableSprite3D",e$l);var e$d=e$t.prototype;return e$d._addToInitStaticBatchManager=function(){},e$d._setBelongScene=function(e$d){e$l.prototype._setBelongScene.call(this,e$d),e$d._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},e$d._setUnBelongScene=function(){var e$d=this._scene._renderableSprite3Ds,e$t=e$d.indexOf(this);e$d.splice(e$t,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),e$l.prototype._setUnBelongScene.call(this)},e$d._update=function(e$d){(e$d.owner=this)._activeInHierarchy&&(this._updateComponents(e$d),this._render._updateOctreeNode(),this._lateUpdateComponents(e$d),e$L.spriteCount++,this._childs.length&&this._updateChilds(e$d))},e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$l.prototype.destroy.call(this,e$d),this._render._destroy(),this._render=null},e$t.__init__=function(){e$t.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=e$t.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),e$t.SAHDERDEFINE_LIGHTMAP=e$t.shaderDefines.registerDefine("LIGHTMAP")},e$t.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,e$t.SAHDERDEFINE_LIGHTMAP=4,e$t.LIGHTMAPSCALEOFFSET=2,e$t.LIGHTMAP=3,e$f(e$t,["shaderDefines",function(){return this.shaderDefines=new e$bt}]),e$t}(e$xt),e$Pt=(function(e$d){function e$k(e$d,e$t,e$l){this._long=NaN,this._width=NaN,this._height=NaN,void 0===e$d&&(e$d=1),void 0===e$t&&(e$t=1),void 0===e$l&&(e$l=1),e$k.__super.call(this),this._long=e$d,this._width=e$t,this._height=e$l,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}e$c(e$k,"laya.d3.resource.models.BoxMesh",e$Ut);var e$t=e$k.prototype;e$t.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var e$d=e$rd.vertexDeclaration,e$t=(e$d.vertexStride,this._long/2),e$l=this._height/2,e$k=this._width/2,e$W=new Float32Array([-e$t,e$l,-e$k,0,1,0,0,0,e$t,e$l,-e$k,0,1,0,1,0,e$t,e$l,e$k,0,1,0,1,1,-e$t,e$l,e$k,0,1,0,0,1,-e$t,-e$l,-e$k,0,-1,0,0,1,e$t,-e$l,-e$k,0,-1,0,1,1,e$t,-e$l,e$k,0,-1,0,1,0,-e$t,-e$l,e$k,0,-1,0,0,0,-e$t,e$l,-e$k,-1,0,0,0,0,-e$t,e$l,e$k,-1,0,0,1,0,-e$t,-e$l,e$k,-1,0,0,1,1,-e$t,-e$l,-e$k,-1,0,0,0,1,e$t,e$l,-e$k,1,0,0,1,0,e$t,e$l,e$k,1,0,0,0,0,e$t,-e$l,e$k,1,0,0,0,1,e$t,-e$l,-e$k,1,0,0,1,1,-e$t,e$l,e$k,0,0,1,0,0,e$t,e$l,e$k,0,0,1,1,0,e$t,-e$l,e$k,0,0,1,1,1,-e$t,-e$l,e$k,0,0,1,0,1,-e$t,e$l,-e$k,0,0,-1,1,0,e$t,e$l,-e$k,0,0,-1,0,0,e$t,-e$l,-e$k,0,0,-1,0,1,-e$t,-e$l,-e$k,0,0,-1,1,1]),e$i=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new e$Vt(e$d,this._numberVertices,35044,!0),this._indexBuffer=new e$yt("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(e$W),this._indexBuffer.setData(e$i),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},e$Y(0,e$t,"long",function(){return this._long},function(e$d){this._long!==e$d&&(this._long=e$d,this.releaseResource(),this.activeResource())}),e$Y(0,e$t,"width",function(){return this._width},function(e$d){this._width!==e$d&&(this._width=e$d,this.releaseResource(),this.activeResource())}),e$Y(0,e$t,"height",function(){return this._height},function(e$d){this._height!==e$d&&(this._height=e$d,this.releaseResource(),this.activeResource())})}(),function(e$d){function e$W(e$d,e$t,e$l,e$k){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===e$d&&(e$d=10),void 0===e$t&&(e$t=10),void 0===e$l&&(e$l=10),void 0===e$k&&(e$k=10),e$W.__super.call(this),this._long=e$d,this._width=e$t,this._stacks=e$l,this._slices=e$k,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}e$c(e$W,"laya.d3.resource.models.PlaneMesh",e$Ut);var e$t=e$W.prototype;e$t.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var e$d=new Uint16Array(this._numberIndices),e$t=e$rd.vertexDeclaration,e$l=e$t.vertexStride/4,e$k=new Float32Array(this._numberVertices*e$l),e$W=this._long/2,e$i=this._width/2,e$A=this._long/this._stacks,e$B=this._width/this._slices,e$o=0,e$I=0;e$I<=this._slices;e$I++)for(var e$b=0;e$b<=this._stacks;e$b++)e$k[e$o++]=e$b*e$A-e$W,e$k[e$o++]=0,e$k[e$o++]=e$I*e$B-e$i,e$k[e$o++]=0,e$k[e$o++]=1,e$k[e$o++]=0,e$k[e$o++]=1*e$b/this._stacks,e$k[e$o++]=1*e$I/this._slices;var e$f=0;for(e$I=0;e$I<this._slices;e$I++)for(e$b=0;e$b<this._stacks;e$b++)e$d[e$f++]=(e$I+1)*(this._stacks+1)+e$b,e$d[e$f++]=e$I*(this._stacks+1)+e$b,e$d[e$f++]=(e$I+1)*(this._stacks+1)+e$b+1,e$d[e$f++]=e$I*(this._stacks+1)+e$b,e$d[e$f++]=e$I*(this._stacks+1)+e$b+1,e$d[e$f++]=(e$I+1)*(this._stacks+1)+e$b+1;this._vertexBuffer=new e$Vt(e$t,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new e$yt("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(e$k),this._indexBuffer.setData(e$d),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},e$Y(0,e$t,"long",function(){return this._long},function(e$d){this._long!==e$d&&(this._long=e$d,this.releaseResource(),this.activeResource())}),e$Y(0,e$t,"width",function(){return this._width},function(e$d){this._width!==e$d&&(this._width=e$d,this.releaseResource(),this.activeResource())}),e$Y(0,e$t,"stacks",function(){return this._stacks},function(e$d){this._stacks!==e$d&&(this._stacks=e$d,this.releaseResource(),this.activeResource())}),e$Y(0,e$t,"slices",function(){return this._slices},function(e$d){this._slices!==e$d&&(this._slices=e$d,this.releaseResource(),this.activeResource())})}(),function(e$d){function e$A(e$d,e$t,e$l){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=.3),void 0===e$l&&(e$l=1e3),this._viewMatrix=new e$dt,this._projectionMatrix=new e$dt,this._projectionViewMatrix=new e$dt,this._viewport=new e$ot(0,0,0,0),this._normalizedViewport=new e$ot(0,0,1,1),this._aspectRatio=e$d,this._boundFrustumUpdate=!0,this._boundFrustum=new e$Fd(e$dt.DEFAULT),e$A.__super.call(this,e$t,e$l),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}e$c(e$A,"laya.d3.core.Camera",e$ht);var e$t=e$A.prototype;return e$t._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},e$t._parseCustomProps=function(e$d,e$t,e$l,e$k){var e$W=e$l.clearColor;this.clearColor=new e$Bt(e$W[0],e$W[1],e$W[2],e$W[3]);var e$i=e$l.viewport;this.normalizedViewport=new e$ot(e$i[0],e$i[1],e$i[2],e$i[3])},e$t._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var e$d=this.orthographicVerticalSize*this.aspectRatio*.5,e$t=.5*this.orthographicVerticalSize;e$dt.createOrthoOffCenterRH(-e$d,e$d,-e$t,e$t,this.nearPlane,this.farPlane,this._projectionMatrix)}else e$dt.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},e$t._update=function(e$d){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,e$d)},e$t._renderCamera=function(e$d,e$t,e$l){var e$k,e$W;e$l.parallelSplitShadowMaps[0]&&e$l._renderShadowMap(e$d,e$t,this),(e$t.camera=this)._prepareCameraToRender(),e$l._preRenderUpdateComponents(e$t),e$k=e$t._viewMatrix=this.viewMatrix;var e$i=this._renderTarget;e$i?(e$i.start(),e$dt.multiply(e$ht._invertYScaleMatrix,this._projectionMatrix,e$ht._invertYProjectionMatrix),e$dt.multiply(e$ht._invertYScaleMatrix,this.projectionViewMatrix,e$ht._invertYProjectionViewMatrix),e$W=e$t._projectionMatrix=e$ht._invertYProjectionMatrix,e$t._projectionViewMatrix=e$ht._invertYProjectionViewMatrix):(e$W=e$t._projectionMatrix=this._projectionMatrix,e$t._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(e$k,e$W),e$t._viewport=this.viewport,e$l._preRenderScene(e$d,e$t,this.boundFrustum),e$l._clear(e$d,e$t),e$l._renderScene(e$d,e$t),e$l._postRenderUpdateComponents(e$t),e$i&&e$i.end()},e$t.viewportPointToRay=function(e$d,e$t){e$Yt.calculateCursorRay(e$d,this.viewport,this._projectionMatrix,this.viewMatrix,null,e$t)},e$t.normalizedViewportPointToRay=function(e$d,e$t){var e$l=e$A._tempVector20,e$k=this.viewport,e$W=e$d.elements,e$i=e$l.elements;e$i[0]=e$W[0]*e$k.width,e$i[1]=e$W[1]*e$k.height,e$Yt.calculateCursorRay(e$l,this.viewport,this._projectionMatrix,this.viewMatrix,null,e$t)},e$t.worldToViewportPoint=function(e$d,e$t){e$dt.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(e$d,this._projectionViewMatrix,e$t);var e$l=e$t.elements;e$l[0]=e$l[0]/e$R.stage.clientScaleX,e$l[1]=e$l[1]/e$R.stage.clientScaleY},e$t.worldToNormalizedViewportPoint=function(e$d,e$t){e$dt.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(e$d,this._projectionViewMatrix,e$t);var e$l=e$t.elements;e$l[0]=e$l[0]/e$R.stage.clientScaleX,e$l[1]=e$l[1]/e$R.stage.clientScaleY},e$t.convertScreenCoordToOrthographicCoord=function(e$d,e$t){if(this._orthographic){var e$l=e$m.clientWidth,e$k=e$m.clientHeight,e$W=this.orthographicVerticalSize*this.aspectRatio/e$l,e$i=this.orthographicVerticalSize/e$k,e$A=e$d.elements,e$B=e$t.elements;return e$B[0]=(-e$l/2+e$A[0])*e$W,e$B[1]=(e$k/2-e$A[1])*e$i,e$B[2]=(this.nearPlane-this.farPlane)*(e$A[2]+1)/2-this.nearPlane,e$At.transformCoordinate(e$t,this.transform.worldMatrix,e$t),!0}return!1},e$Y(0,e$t,"projectionViewMatrix",function(){return e$dt.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),e$Y(0,e$t,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var e$d=this.viewport;return e$d.width/e$d.height},function(e$d){if(e$d<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$t,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),e$Y(0,e$t,"needViewport",function(){var e$d=this.normalizedViewport;return 0===e$d.x&&0===e$d.y&&1===e$d.width&&1===e$d.height}),e$Y(0,e$t,"viewport",function(){if(this._viewportExpressedInClipSpace){var e$d=this._normalizedViewport,e$t=this.renderTargetSize,e$l=e$t.width,e$k=e$t.height;this._viewport.x=e$d.x*e$l,this._viewport.y=e$d.y*e$k,this._viewport.width=e$d.width*e$l,this._viewport.height=e$d.height*e$k}return this._viewport},function(e$d){if(null!=this.renderTarget&&(e$d.x<0||e$d.y<0||0==e$d.width||0==e$d.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$t,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var e$d=this._viewport,e$t=this.renderTargetSize,e$l=e$t.width,e$k=e$t.height;this._normalizedViewport.x=e$d.x/e$l,this._normalizedViewport.y=e$d.y/e$k,this._normalizedViewport.width=e$d.width/e$l,this._normalizedViewport.height=e$d.height/e$k}return this._normalizedViewport},function(e$d){e$d.x<0&&(e$d.x=0,console.warn("Camera: viewport.x must large than 0.0.")),e$d.y<0&&(e$d.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<e$d.x+e$d.width&&(e$d.width=1-e$d.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<e$d.y+e$d.height&&(e$d.height=1-e$d.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=e$d,this._calculateProjectionMatrix()}),e$Y(0,e$t,"projectionMatrix",function(){return this._projectionMatrix},function(e$d){this._projectionMatrix=e$d,this._useUserProjectionMatrix=!0}),e$Y(0,e$t,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),e$f(e$A,["_tempVector20",function(){return this._tempVector20=new e$it}]),e$A}()),e$Xt=function(e$l){function e$k(e$d,e$t){e$k.__super.call(this,e$t),this._geometryFilter=new e$jt(this),this._render=new e$Ct(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),e$d&&(this._geometryFilter.sharedMesh=e$d)instanceof laya.d3.resource.models.Mesh&&(e$d.loaded?this._render.sharedMaterials=e$d.materials:e$d.once("loaded",this,this._applyMeshMaterials))}e$c(e$k,"laya.d3.core.MeshSprite3D",e$l);var e$d=e$k.prototype;return e$d._changeRenderObjectByMesh=function(e$d){var e$t=this._render._renderElements,e$l=e$t[e$d];e$l||(e$l=e$t[e$d]=new e$qt),e$l._render=this._render;var e$k=this._render.sharedMaterials[e$d];e$k||(e$k=e$Qt.defaultMaterial);var e$W=this._geometryFilter.sharedMesh.getRenderElement(e$d);return e$l._mainSortID=this._getSortID(e$W,e$k),e$l._sprite3D=this,e$l.renderObj=e$W,e$l._material=e$k,e$l},e$d._changeRenderObjectByMaterial=function(e$d,e$t){var e$l=this._render._renderElements[e$d];e$t||(e$t=e$Qt.defaultMaterial);var e$k=this._geometryFilter.sharedMesh.getRenderElement(e$d);return e$l._mainSortID=this._getSortID(e$k,e$t),e$l._sprite3D=this,e$l.renderObj=e$k,e$l._material=e$t,e$l},e$d._changeRenderObjectsByMesh=function(){var e$d=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=e$d;for(var e$t=0;e$t<e$d;e$t++)this._changeRenderObjectByMesh(e$t)},e$d._onMeshChanged=function(e$d){var e$t=e$d.sharedMesh;e$t.loaded?this._changeRenderObjectsByMesh():e$t.once("loaded",this,this._onMeshLoaded)},e$d._onMeshLoaded=function(e$d){e$d===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},e$d._onMaterialChanged=function(e$d,e$t,e$l){e$t<this._render._renderElements.length&&this._changeRenderObjectByMaterial(e$t,e$l)},e$d._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},e$d._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},e$d._parseCustomProps=function(e$d,e$t,e$l,e$k){var e$W=this.meshRender,e$i=e$l.lightmapIndex;null!=e$i&&(e$W.lightmapIndex=e$i);var e$A,e$B,e$o=e$l.lightmapScaleOffset;if(e$o&&(e$W.lightmapScaleOffset=new e$Bt(e$o[0],e$o[1],e$o[2],e$o[3])),e$k.instanceParams)(e$A=e$k.instanceParams.loadPath)&&(e$B=e$z.getRes(e$t[e$A]),(this.meshFilter.sharedMesh=e$B).loaded?e$W.sharedMaterials=e$B.materials:e$B.once("loaded",this,this._applyMeshMaterials));else{(e$A=e$l.meshPath)&&(e$B=e$z.getRes(e$t[e$A]),this.meshFilter.sharedMesh=e$B);var e$I=e$l.materials;if(e$I){var e$b=e$W.sharedMaterials,e$f=e$I.length;e$b.length=e$f;for(var e$J=0;e$J<e$f;e$J++)e$b[e$J]=e$z.getRes(e$t[e$I[e$J].path]);e$W.sharedMaterials=e$b}}},e$d._applyMeshMaterials=function(e$d){for(var e$t=this._render.sharedMaterials,e$l=e$d.materials,e$k=0,e$W=e$l.length;e$k<e$W;e$k++)e$t[e$k]||(e$t[e$k]=e$l[e$k]);this._render.sharedMaterials=e$t},e$d._addToInitStaticBatchManager=function(){e$k._staticBatchManager._addInitBatchSprite(this)},e$d.cloneTo=function(e$d){var e$t=e$d;e$t._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var e$l=this._render,e$k=e$t._render;e$k.enable=e$l.enable,e$k.sharedMaterials=e$l.sharedMaterials,e$k.castShadow=e$l.castShadow;var e$W=e$l.lightmapScaleOffset;e$W&&(e$k.lightmapScaleOffset=e$W.clone()),e$k.lightmapIndex=e$l.lightmapIndex,e$k.receiveShadow=e$l.receiveShadow,e$k.sortingFudge=e$l.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,e$d)},e$d.destroy=function(e$d){if(void 0===e$d&&(e$d=!0),!this.destroyed){var e$t=this.meshFilter.sharedMesh;null!=e$t&&(e$t.loaded||e$t.off("loaded",this,this._applyMeshMaterials)),e$l.prototype.destroy.call(this,e$d),this._geometryFilter._destroy()}},e$Y(0,e$d,"meshFilter",function(){return this._geometryFilter}),e$Y(0,e$d,"meshRender",function(){return this._render}),e$k.__init__=function(){e$kd._staticBatchManagers.push(e$k._staticBatchManager)},e$k.load=function(e$d){return e$R.loader.create(e$d,null,null,e$k)},e$f(e$k,["_staticBatchManager",function(){return this._staticBatchManager=new e$$t}]),e$k}(e$st)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$d,e$t){"use strict";for(var e$l in Object.defineProperty(e$t,"__esModule",{value:!0}),Laya){var e$k=Laya[e$l];e$k&&e$k.__isclass&&(e$t[e$l]=e$k)}}),function(e$d,e$t,e$Wd){e$Wd.un,e$Wd.uns;var e$l=e$Wd.static,e$k=e$Wd.class,e$i=e$Wd.getset,e$w=e$Wd.__newvec,e$B=laya.maths.Bezier,e$f=laya.utils.Browser,e$rd=laya.utils.Byte,e$W=(laya.events.Event,laya.events.EventDispatcher),e$A=laya.display.Graphics,e$o=(laya.resource.HTMLCanvas,laya.utils.Handler),e$I=laya.net.Loader,e$J=laya.maths.MathUtil,e$Sd=laya.maths.Matrix,e$D=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),e$b=(laya.renders.RenderContext,laya.resource.Resource),e$c=laya.utils.RunDriver,e$id=laya.display.Sprite,e$Y=laya.utils.Stat,e$jd=laya.resource.Texture,e$z=(laya.net.URL,laya.utils.Utils),e$S=function(){function e$d(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return e$k(e$d,"laya.ani.AnimationContent"),e$d}(),e$j=function(){function e$d(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return e$k(e$d,"laya.ani.AnimationNodeContent"),e$d}(),e$g=function(){function e$d(){}return e$k(e$d,"laya.ani.AnimationParser01"),e$d.parse=function(e$d,e$t){var e$l=e$t.__getBuffer(),e$k=0,e$W=0,e$i=0,e$A=0,e$B=0,e$o=0,e$I=0,e$b=e$t.readUTFString();e$d._aniClassName=e$b;var e$f,e$J=e$t.readUTFString().split("\n"),e$c=e$t.getUint8(),e$Y=e$t.getUint32(),e$w=e$t.getUint32();0<e$Y&&(e$f=e$l.slice(e$Y,e$w));var e$D=new e$rd(e$f);for(0<e$w&&(e$d._publicExtData=e$l.slice(e$w,e$l.byteLength)),e$d._useParent=!!e$t.getUint8(),e$d._anis.length=e$c,e$k=0;e$k<e$c;e$k++){var e$z=e$d._anis[e$k]=new e$S;e$z.nodes=new Array;var e$e=e$z.name=e$J[e$t.getUint16()];e$d._aniMap[e$e]=e$k,e$z.bone3DMap={},e$z.playTime=e$t.getFloat32(),e$z.playTime<=0&&console.error("播放时间不能为0  url="+e$d.url+" name="+e$z.name);var e$g=e$z.nodes.length=e$t.getUint8();for(e$W=e$z.totalKeyframeDatasLength=0;e$W<e$g;e$W++){var e$H=e$z.nodes[e$W]=new e$j;e$H.childs=[];var e$R=e$t.getInt16();0<=e$R&&(e$H.name=e$J[e$R],e$z.bone3DMap[e$H.name]=e$W),e$H.keyFrame=new Array,e$H.parentIndex=e$t.getInt16(),-1==e$H.parentIndex?e$H.parent=null:e$H.parent=e$z.nodes[e$H.parentIndex],e$H.lerpType=e$t.getUint8();var e$G=e$t.getUint32();e$D.pos=e$G;var e$q=e$H.keyframeWidth=e$D.getUint16();if(e$z.totalKeyframeDatasLength+=e$q,0===e$H.lerpType||1===e$H.lerpType)for(e$H.interpolationMethod=[],e$H.interpolationMethod.length=e$q,e$i=0;e$i<e$q;e$i++)e$H.interpolationMethod[e$i]=e$x.interpolation[e$D.getUint8()];null!=e$H.parent&&e$H.parent.childs.push(e$H);var e$L=e$t.getUint16();0<e$L&&(e$H.extenData=e$l.slice(e$t.pos,e$t.pos+e$L),e$t.pos+=e$L);var e$$,e$p=e$t.getUint16(),e$M=0;for(e$i=0,e$A=e$H.keyFrame.length=e$p;e$i<e$A;e$i++){if((e$$=e$H.keyFrame[e$i]=new e$C).duration=e$t.getFloat32(),e$$.startTime=e$M,2===e$H.lerpType){e$$.interpolationData=[];var e$T,e$r=e$t.getUint8();switch(e$T=e$t.getFloat32()){case 254:for(e$$.interpolationData.length=e$q,e$I=0;e$I<e$q;e$I++)e$$.interpolationData[e$I]=0;break;case 255:for(e$$.interpolationData.length=e$q,e$I=0;e$I<e$q;e$I++)e$$.interpolationData[e$I]=5;break;default:for(e$$.interpolationData.push(e$T),e$o=1;e$o<e$r;e$o++)e$$.interpolationData.push(e$t.getFloat32())}}for(e$$.data=new Float32Array(e$q),e$B=0;e$B<e$q;e$B++)e$$.data[e$B]=e$t.getFloat32(),-1e-8<e$$.data[e$B]&&e$$.data[e$B]<1e-8&&(e$$.data[e$B]=0);e$M+=e$$.duration}e$$.startTime=e$z.playTime,e$H.playTime=e$z.playTime,e$d._calculateKeyFrame(e$H,e$p,e$q)}}},e$d}(),e$H=function(){function e$R(){}return e$k(e$R,"laya.ani.AnimationParser02"),e$R.READ_DATA=function(){e$R._DATA.offset=e$R._reader.getUint32(),e$R._DATA.size=e$R._reader.getUint32()},e$R.READ_BLOCK=function(){for(var e$d=e$R._BLOCK.count=e$R._reader.getUint16(),e$t=e$R._BLOCK.blockStarts=[],e$l=e$R._BLOCK.blockLengths=[],e$k=0;e$k<e$d;e$k++)e$t.push(e$R._reader.getUint32()),e$l.push(e$R._reader.getUint32())},e$R.READ_STRINGS=function(){var e$d=e$R._reader.getUint32(),e$t=e$R._reader.getUint16(),e$l=e$R._reader.pos;e$R._reader.pos=e$d+e$R._DATA.offset;for(var e$k=0;e$k<e$t;e$k++)e$R._strings[e$k]=e$R._reader.readUTFString();e$R._reader.pos=e$l},e$R.parse=function(e$d,e$t){e$R._templet=e$d;(e$R._reader=e$t).__getBuffer();e$R.READ_DATA(),e$R.READ_BLOCK(),e$R.READ_STRINGS();for(var e$l=0,e$k=e$R._BLOCK.count;e$l<e$k;e$l++){var e$W=e$t.getUint16(),e$i=e$R._strings[e$W],e$A=e$R["READ_"+e$i];if(null==e$A)throw new Error("model file err,no this function:"+e$W+" "+e$i);e$A.call()}},e$R.READ_ANIMATIONS=function(){var e$d=e$R._reader,e$t=e$d.__getBuffer(),e$l=0,e$k=0,e$W=0,e$i=0,e$A=e$d.getUint16(),e$B=[];for(e$B.length=e$A,e$l=0;e$l<e$A;e$l++)e$B[e$l]=e$x.interpolation[e$d.getByte()];var e$o=e$d.getUint8();for(e$R._templet._anis.length=e$o,e$l=0;e$l<e$o;e$l++){var e$I=e$R._templet._anis[e$l]={};e$I.nodes=new Array;var e$b=e$I.name=e$R._strings[e$d.getUint16()];e$R._templet._aniMap[e$b]=e$l,e$I.bone3DMap={},e$I.playTime=e$d.getFloat32();var e$f=e$I.nodes.length=e$d.getInt16();for(e$k=e$I.totalKeyframeDatasLength=0;e$k<e$f;e$k++){var e$J=e$I.nodes[e$k]={};e$J.keyframeWidth=e$A,e$J.childs=[];var e$c=e$d.getUint16();0<=e$c&&(e$J.name=e$R._strings[e$c],e$I.bone3DMap[e$J.name]=e$k),e$J.keyFrame=new Array,e$J.parentIndex=e$d.getInt16(),-1==e$J.parentIndex?e$J.parent=null:e$J.parent=e$I.nodes[e$J.parentIndex],e$I.totalKeyframeDatasLength+=e$A,e$J.interpolationMethod=e$B,null!=e$J.parent&&e$J.parent.childs.push(e$J);var e$Y=e$d.getUint16(),e$w=null,e$D=null;for(e$W=0,e$i=e$J.keyFrame.length=e$Y;e$W<e$i;e$W++){(e$w=e$J.keyFrame[e$W]={}).startTime=e$d.getFloat32(),e$D&&(e$D.duration=e$w.startTime-e$D.startTime);var e$z=e$R._DATA.offset,e$e=e$d.getUint32(),e$g=4*e$A,e$H=e$t.slice(e$z+e$e,e$z+e$e+e$g);e$w.data=new Float32Array(e$H),e$D=e$w}e$w.duration=0,e$J.playTime=e$I.playTime,e$R._templet._calculateKeyFrame(e$J,e$Y,e$A)}}},e$R._templet=null,e$R._reader=null,e$R._strings=[],e$l(e$R,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),e$R}(),e$Cd=(function(){function e$d(){}e$k(e$d,"laya.ani.AnimationState"),e$d.stopped=0,e$d.paused=1,e$d.playing=2}(),function(){function e$W(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new e$sd,this.resultMatrix=new e$Sd,this._children=[]}e$k(e$W,"laya.ani.bone.Bone");var e$d=e$W.prototype;return e$d.setTempMatrix=function(e$d){this._tempMatrix=e$d;var e$t,e$l=0;for(e$l=0,e$t=this._children.length;e$l<e$t;e$l++)this._children[e$l].setTempMatrix(this._tempMatrix)},e$d.update=function(e$d){var e$t;if(this.rotation=this.transform.skX,e$d)e$t=this.resultTransform.getMatrix(),e$Sd.mul(e$t,e$d,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)e$t=this.resultTransform.getMatrix(),e$Sd.mul(e$t,this.parentBone.resultMatrix,this.resultMatrix);else{var e$l=this.parentBone,e$k=NaN,e$W=NaN,e$i=NaN,e$A=this.parentBone.resultMatrix;e$t=this.resultTransform.getMatrix();var e$B=e$A.a*e$t.tx+e$A.c*e$t.ty+e$A.tx,e$o=e$A.b*e$t.tx+e$A.d*e$t.ty+e$A.ty,e$I=new e$Sd;this.inheritRotation?(e$k=Math.atan2(e$l.resultMatrix.b,e$l.resultMatrix.a),e$W=Math.cos(e$k),e$i=Math.sin(e$k),e$I.setTo(e$W,e$i,-e$i,e$W,0,0),e$Sd.mul(this._tempMatrix,e$I,e$Sd.TEMP),e$Sd.TEMP.copyTo(e$I),e$t=this.resultTransform.getMatrix(),e$Sd.mul(e$t,e$I,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,e$t=this.resultTransform.getMatrix(),e$Sd.TEMP.identity(),e$Sd.TEMP.d=this.d,e$Sd.mul(e$t,e$Sd.TEMP,this.resultMatrix)),this.resultMatrix.tx=e$B,this.resultMatrix.ty=e$o}else(e$t=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var e$b,e$f=0;for(e$f=0,e$b=this._children.length;e$f<e$b;e$f++)this._children[e$f].update()},e$d.updateChild=function(){var e$d,e$t=0;for(e$t=0,e$d=this._children.length;e$t<e$d;e$t++)this._children[e$t].update()},e$d.setRotation=function(e$d){this._sprite&&(this._sprite.rotation=180*e$d/Math.PI)},e$d.updateDraw=function(e$d,e$t){e$W.ShowBones&&!e$W.ShowBones[this.name]||(this._sprite||(this._sprite=new e$id,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),e$Wd.stage.addChild(this._sprite)),this._sprite.x=e$d+this.resultMatrix.tx,this._sprite.y=e$t+this.resultMatrix.ty);var e$l,e$k=0;for(e$k=0,e$l=this._children.length;e$k<e$l;e$k++)this._children[e$k].updateDraw(e$d,e$t)},e$d.addChild=function(e$d){this._children.push(e$d),e$d.parentBone=this},e$d.findBone=function(e$d){if(this.name==e$d)return this;var e$t,e$l,e$k=0;for(e$k=0,e$t=this._children.length;e$k<e$t;e$k++)if(e$l=this._children[e$k].findBone(e$d))return e$l;return null},e$d.localToWorld=function(e$d){var e$t=e$d[0],e$l=e$d[1];e$d[0]=e$t*this.resultMatrix.a+e$l*this.resultMatrix.c+this.resultMatrix.tx,e$d[1]=e$t*this.resultMatrix.b+e$l*this.resultMatrix.d+this.resultMatrix.ty},e$W.ShowBones={},e$W}()),e$Kd=function(){function e$w(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}e$k(e$w,"laya.ani.bone.BoneSlot");var e$d=e$w.prototype;return e$d.showSlotData=function(e$d,e$t){void 0===e$t&&(e$t=!0),this.currSlotData=e$d,e$t&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},e$d.showDisplayByName=function(e$d){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(e$d))},e$d.replaceDisplayByName=function(e$d,e$t){if(this.currSlotData){var e$l;e$l=this.currSlotData.getDisplayByName(e$d);var e$k;e$k=this.currSlotData.getDisplayByName(e$t),this.replaceDisplayByIndex(e$l,e$k)}},e$d.replaceDisplayByIndex=function(e$d,e$t){this.currSlotData&&(this._replaceDic[e$d]=e$t,this.displayIndex==e$d&&this.showDisplayByIndex(e$d))},e$d.showDisplayByIndex=function(e$d){if(null!=this._replaceDic[e$d]&&(e$d=this._replaceDic[e$d]),this.currSlotData&&-1<e$d&&e$d<this.currSlotData.displayArr.length){if(this.displayIndex=e$d,this.currDisplayData=this.currSlotData.displayArr[e$d],this.currDisplayData){var e$t=this.currDisplayData.name;this.currTexture=this.templet.getTexture(e$t),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!e$D.isConchApp||e$D.isConchApp&&"0.9.15"<e$id.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},e$d.replaceSkin=function(e$d){this._diyTexture=e$d,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},e$d.setParentMatrix=function(e$d){this._parentMatrix=e$d},e$d.draw=function(e$d,e$t,e$l,e$k){if(void 0===e$l&&(e$l=!1),void 0===e$k&&(e$k=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var e$W,e$i=this.currTexture;switch(this._diyTexture&&(e$i=this._diyTexture),this.currDisplayData.type){case 0:if(e$d){var e$A=this.getDisplayMatrix();if(this._parentMatrix){var e$B=!1;if(e$A){var e$o;if(e$Sd.mul(e$A,this._parentMatrix,e$Sd.TEMP),e$o=e$l?(null==this._resultMatrix&&(this._resultMatrix=new e$Sd),this._resultMatrix):new e$Sd,!e$D.isWebGL&&this.currDisplayData.uvs||e$D.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var e$I=e$w._tempMatrix;e$I.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(e$I.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(e$B=!0,e$I.rotate(-Math.PI/2)),e$Sd.mul(e$I,e$Sd.TEMP,e$o)}else e$Sd.TEMP.copyTo(e$o);e$B?e$d.drawTexture(e$i,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,e$o):e$d.drawTexture(e$i,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,e$o)}}}break;case 1:if(null==(e$W=e$l?(null==this._skinSprite&&(this._skinSprite=e$w.createSkinMesh()),this._skinSprite):e$w.createSkinMesh()))return;var e$b;if(null==this.currDisplayData.bones){var e$f,e$J=this.currDisplayData.weights;this.deformData&&(e$J=this.deformData),e$f=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=e$q.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=e$q.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=e$J;this.currDisplayData.triangles.length;e$b=this.currDisplayData.triangles,e$W.init2(e$i,null,e$b,this._mVerticleArr,e$f);var e$c,e$Y=this.getDisplayMatrix();if(this._parentMatrix)if(e$Y)e$Sd.mul(e$Y,this._parentMatrix,e$Sd.TEMP),e$c=e$l?(null==this._resultMatrix&&(this._resultMatrix=new e$Sd),this._resultMatrix):new e$Sd,e$Sd.TEMP.copyTo(e$c),e$W.transform=e$c}else this.skinMesh(e$t,e$W,e$k);e$d.drawSkin(e$W);break;case 2:if(null==(e$W=e$l?(null==this._skinSprite&&(this._skinSprite=e$w.createSkinMesh()),this._skinSprite):e$w.createSkinMesh()))return;this.skinMesh(e$t,e$W,e$k),e$d.drawSkin(e$W)}}},e$d.skinMesh=function(e$d,e$t,e$l){var e$k,e$W=this.currTexture,e$i=this.currDisplayData.bones;e$k=this._diyTexture?(e$W=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=e$q.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=e$q.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var e$A,e$B,e$o=this.currDisplayData.weights,e$I=this.currDisplayData.triangles,e$b=0,e$f=0,e$J=0,e$c=NaN,e$Y=NaN,e$w=0,e$D=0,e$z=[],e$e=0,e$g=0;if(this.deformData&&0<this.deformData.length){var e$H=0;for(e$e=0,e$g=e$i.length;e$e<e$g;){for(e$J=e$i[e$e++]+e$e,e$f=e$b=0;e$e<e$J;e$e++)e$B=e$d[e$i[e$e]],e$c=e$o[e$w]+this.deformData[e$H++],e$Y=e$o[e$w+1]+this.deformData[e$H++],e$D=e$o[e$w+2],e$b+=(e$c*e$B.a+e$Y*e$B.c+e$B.tx)*e$D,e$f+=(e$c*e$B.b+e$Y*e$B.d+e$B.ty)*e$D,e$w+=3;e$z.push(e$b,e$f)}}else for(e$e=0,e$g=e$i.length;e$e<e$g;){for(e$J=e$i[e$e++]+e$e,e$f=e$b=0;e$e<e$J;e$e++)e$B=e$d[e$i[e$e]],e$c=e$o[e$w],e$Y=e$o[e$w+1],e$D=e$o[e$w+2],e$b+=(e$c*e$B.a+e$Y*e$B.c+e$B.tx)*e$D,e$f+=(e$c*e$B.b+e$Y*e$B.d+e$B.ty)*e$D,e$w+=3;e$z.push(e$b,e$f)}this._mVerticleArr=e$z,e$A=e$I,e$t.init2(e$W,null,e$A,this._mVerticleArr,e$k)},e$d.drawBonePoint=function(e$d){e$d&&this._parentMatrix&&e$d.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},e$d.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},e$d.getMatrix=function(){return this._resultMatrix},e$d.copy=function(){var e$d=new e$w;return e$d.type="copy",e$d.name=this.name,e$d.attachmentName=this.attachmentName,e$d.srcDisplayIndex=this.srcDisplayIndex,e$d.parent=this.parent,e$d.displayIndex=this.displayIndex,e$d.templet=this.templet,e$d.currSlotData=this.currSlotData,e$d.currTexture=this.currTexture,e$d.currDisplayData=this.currDisplayData,e$d},e$w.createSkinMesh=function(){return e$D.isWebGL||e$D.isConchApp?e$c.skinAniSprite():(e$D.isWebGL,null)},e$l(e$w,["_tempMatrix",function(){return this._tempMatrix=new e$Sd}]),e$w}(),e$xd=function(){function e$d(){this.skinName=null,this.deformSlotDataList=[]}return e$k(e$d,"laya.ani.bone.DeformAniData"),e$d}(),e$nd=function(){function e$d(){this.deformSlotDisplayList=[]}return e$k(e$d,"laya.ani.bone.DeformSlotData"),e$d}(),e$Qd=function(){function e$d(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}e$k(e$d,"laya.ani.bone.DeformSlotDisplayData");var e$t=e$d.prototype;return e$t.binarySearch1=function(e$d,e$t){var e$l=0,e$k=e$d.length-2;if(0==e$k)return 1;for(var e$W=e$k>>>1;;){if(e$d[Math.floor(e$W+1)]<=e$t?e$l=e$W+1:e$k=e$W,e$l==e$k)return e$l+1;e$W=e$l+e$k>>>1}return 0},e$t.apply=function(e$d,e$t,e$l){if(void 0===e$l&&(e$l=1),e$d+=.05,!(this.timeList.length<=0)){var e$k=0;if(!(e$d<this.timeList[0])){var e$W=this.vectices[0].length,e$i=[],e$A=this.binarySearch1(this.timeList,e$d);if(this.frameIndex=e$A,e$d>=this.timeList[this.timeList.length-1]){var e$B=this.vectices[this.vectices.length-1];if(e$l<1)for(e$k=0;e$k<e$W;e$k++)e$i[e$k]+=(e$B[e$k]-e$i[e$k])*e$l;else for(e$k=0;e$k<e$W;e$k++)e$i[e$k]=e$B[e$k];this.deformData=e$i}else{this.tweenKeyList[this.frameIndex];var e$o=this.vectices[this.frameIndex-1],e$I=this.vectices[this.frameIndex],e$b=this.timeList[this.frameIndex-1],e$f=this.timeList[this.frameIndex];e$l=this.tweenKeyList[e$A-1]?(e$d-e$b)/(e$f-e$b):0;var e$J=NaN;for(e$k=0;e$k<e$W;e$k++)e$J=e$o[e$k],e$i[e$k]=e$J+(e$I[e$k]-e$J)*e$l;this.deformData=e$i}}}},e$d}(),e$yd=function(){function e$d(){this.time=NaN,this.drawOrder=[]}return e$k(e$d,"laya.ani.bone.DrawOrderData"),e$d}(),e$Vd=function(){function e$d(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return e$k(e$d,"laya.ani.bone.EventData"),e$d}(),e$e=function(){function e$kd(e$d,e$t){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=e$d,this._targetBone=e$t[e$d.targetBoneIndex],this.isSpine=e$d.isSpine,null==this._bones&&(this._bones=[]);for(var e$l=this._bones.length=0,e$k=e$d.boneIndexs.length;e$l<e$k;e$l++)this._bones.push(e$t[e$d.boneIndexs[e$l]]);this.name=e$d.name,this.mix=e$d.mix,this.bendDirection=e$d.bendDirection}e$k(e$kd,"laya.ani.bone.IkConstraint");var e$d=e$kd.prototype;return e$d.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},e$d._applyIk1=function(e$d,e$t,e$l,e$k){var e$W=e$d.parentBone,e$i=1/(e$W.resultMatrix.a*e$W.resultMatrix.d-e$W.resultMatrix.b*e$W.resultMatrix.c),e$A=e$t-e$W.resultMatrix.tx,e$B=e$l-e$W.resultMatrix.ty,e$o=(e$A*e$W.resultMatrix.d-e$B*e$W.resultMatrix.c)*e$i-e$d.transform.x,e$I=(e$B*e$W.resultMatrix.a-e$A*e$W.resultMatrix.b)*e$i-e$d.transform.y,e$b=Math.atan2(e$I,e$o)*e$kd.radDeg-0-e$d.transform.skX;e$d.transform.scX<0&&(e$b+=180),180<e$b?e$b-=360:e$b<-180&&(e$b+=360),e$d.transform.skX=e$d.transform.skY=e$d.transform.skX+e$b*e$k,e$d.update()},e$d.updatePos=function(e$d,e$t){this._sp&&this._sp.pos(e$d,e$t)},e$d._applyIk2=function(e$d,e$t,e$l,e$k,e$W,e$i){if(0!=e$i){var e$A=e$d.resultTransform.x,e$B=e$d.resultTransform.y,e$o=e$d.transform.scX,e$I=e$d.transform.scY,e$b=e$t.transform.scX,e$f=0,e$J=0,e$c=0;e$c=e$o<0?(e$o=-e$o,e$f=180,-1):(e$f=0,1),e$I<0&&(e$I=-e$I,e$c=-e$c),e$J=e$b<0?(e$b=-e$b,180):0;var e$Y=e$t.resultTransform.x,e$w=NaN,e$D=NaN,e$z=NaN,e$e=e$d.resultMatrix.a,e$g=e$d.resultMatrix.c,e$H=e$d.resultMatrix.b,e$R=e$d.resultMatrix.d,e$G=Math.abs(e$o-e$I)<=1e-4;e$z=e$G?(e$D=e$e*e$Y+e$g*(e$w=e$t.resultTransform.y)+e$d.resultMatrix.tx,e$H*e$Y+e$R*e$w+e$d.resultMatrix.ty):(e$w=0,e$D=e$e*e$Y+e$d.resultMatrix.tx,e$H*e$Y+e$d.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new e$id,e$Wd.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(e$l,e$k,15,"#ffff00"),this._sp.graphics.drawCircle(e$D,e$z,15,"#ff00ff")),e$d.setRotation(Math.atan2(e$z-e$d.resultMatrix.ty,e$D-e$d.resultMatrix.tx));var e$q=e$d.parentBone;e$e=e$q.resultMatrix.a,e$g=e$q.resultMatrix.c,e$H=e$q.resultMatrix.b;var e$L=1/(e$e*(e$R=e$q.resultMatrix.d)-e$g*e$H),e$$=e$l-e$q.resultMatrix.tx,e$p=e$k-e$q.resultMatrix.ty,e$M=(e$$*e$R-e$p*e$g)*e$L-e$A,e$T=(e$p*e$e-e$$*e$H)*e$L-e$B,e$r=((e$$=e$D-e$q.resultMatrix.tx)*e$R-(e$p=e$z-e$q.resultMatrix.ty)*e$g)*e$L-e$A,e$S=(e$p*e$e-e$$*e$H)*e$L-e$B,e$j=Math.sqrt(e$r*e$r+e$S*e$S),e$C=e$t.length*e$b,e$K=NaN,e$x=NaN;if(e$G){var e$n=(e$M*e$M+e$T*e$T-e$j*e$j-(e$C*=e$o)*e$C)/(2*e$j*e$C);e$n<-1?e$n=-1:1<e$n&&(e$n=1),e$x=Math.acos(e$n)*e$W,e$e=e$j+e$C*e$n,e$g=e$C*Math.sin(e$x),e$K=Math.atan2(e$T*e$e-e$M*e$g,e$M*e$e+e$T*e$g)}else{var e$Q=(e$e=e$o*e$C)*e$e,e$y=(e$g=e$I*e$C)*e$g,e$V=e$M*e$M+e$T*e$T,e$Z=Math.atan2(e$T,e$M),e$U=-2*e$y*e$j,e$E=e$y-e$Q;if(0<(e$R=e$U*e$U-4*e$E*(e$H=e$y*e$j*e$j+e$Q*e$V-e$Q*e$y))){var e$N=Math.sqrt(e$R);e$U<0&&(e$N=-e$N);var e$u=(e$N=-(e$U+e$N)/2)/e$E,e$h=e$H/e$N,e$s=Math.abs(e$u)<Math.abs(e$h)?e$u:e$h;e$s*e$s<=e$V&&(e$p=Math.sqrt(e$V-e$s*e$s)*e$W,e$K=e$Z-Math.atan2(e$p,e$s),e$x=Math.atan2(e$p/e$I,(e$s-e$j)/e$o))}var e$P=0,e$X=Number.MAX_VALUE,e$m=0,e$O=0,e$F=0,e$a=0,e$_=0,e$v=0;e$a<(e$R=(e$$=e$j+e$e)*e$$)&&(e$F=0,e$a=e$R,e$_=e$$),(e$R=(e$$=e$j-e$e)*e$$)<e$X&&(e$P=Math.PI,e$X=e$R,e$m=e$$);var e$dd=Math.acos(-e$e*e$j/(e$Q-e$y));(e$R=(e$$=e$e*Math.cos(e$dd)+e$j)*e$$+(e$p=e$g*Math.sin(e$dd))*e$p)<e$X&&(e$P=e$dd,e$X=e$R,e$m=e$$,e$O=e$p),e$a<e$R&&(e$F=e$dd,e$a=e$R,e$_=e$$,e$v=e$p),e$x=e$V<=(e$X+e$a)/2?(e$K=e$Z-Math.atan2(e$O*e$W,e$m),e$P*e$W):(e$K=e$Z-Math.atan2(e$v*e$W,e$_),e$F*e$W)}var e$td=Math.atan2(e$w,e$Y)*e$c,e$ld=e$d.resultTransform.skX;180<(e$K=(e$K-e$td)*e$kd.radDeg+e$f-e$ld)?e$K-=360:e$K<-180&&(e$K+=360),e$d.resultTransform.x=e$A,e$d.resultTransform.y=e$B,e$d.resultTransform.skX=e$d.resultTransform.skY=e$ld+e$K*e$i,e$ld=e$t.resultTransform.skX,180<(e$x=((e$x+e$td)*e$kd.radDeg-0)*e$c+e$J-(e$ld%=360))?e$x-=360:e$x<-180&&(e$x+=360),e$t.resultTransform.x=e$Y,e$t.resultTransform.y=e$w,e$t.resultTransform.skX=e$t.resultTransform.skY=e$t.resultTransform.skY+e$x*e$i,e$d.update()}},e$d._applyIk3=function(e$d,e$t,e$l,e$k,e$W,e$i){if(0!=e$i){var e$A,e$B,e$o=e$t.resultMatrix.a*e$t.length,e$I=e$t.resultMatrix.b*e$t.length,e$b=e$o*e$o+e$I*e$I,e$f=Math.sqrt(e$b),e$J=e$d.resultMatrix.tx,e$c=e$d.resultMatrix.ty,e$Y=e$t.resultMatrix.tx,e$w=e$t.resultMatrix.ty,e$D=e$Y-e$J,e$z=e$w-e$c,e$e=e$D*e$D+e$z*e$z,e$g=Math.sqrt(e$e),e$H=(e$D=e$l-e$d.resultMatrix.tx)*e$D+(e$z=e$k-e$d.resultMatrix.ty)*e$z,e$R=Math.sqrt(e$H);if(e$f+e$g<=e$R||e$R+e$f<=e$g||e$R+e$g<=e$f){var e$G=NaN;e$Y=e$J+(e$G=e$f+e$g<=e$R?1:-1)*(e$l-e$J)*e$g/e$R,e$w=e$c+e$G*(e$k-e$c)*e$g/e$R}else{var e$q=(e$e-e$b+e$H)/(2*e$H),e$L=Math.sqrt(e$e-e$q*e$q*e$H)/e$R,e$$=e$J+e$D*e$q,e$p=e$c+e$z*e$q,e$M=-e$z*e$L,e$T=e$D*e$L;e$w=0<e$W?(e$Y=e$$-e$M,e$p-e$T):(e$Y=e$$+e$M,e$p+e$T)}e$A=e$Y,e$B=e$w,this.isDebug&&(this._sp||(this._sp=new e$id,e$Wd.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(e$J,e$c,15,"#ff00ff"),this._sp.graphics.drawCircle(e$l,e$k,15,"#ffff00"),this._sp.graphics.drawCircle(e$A,e$B,15,"#ff00ff"));var e$r,e$S;e$r=Math.atan2(e$B-e$d.resultMatrix.ty,e$A-e$d.resultMatrix.tx),e$d.setRotation(e$r),(e$S=e$kd._tempMatrix).identity(),e$S.rotate(e$r),e$S.scale(e$d.resultMatrix.getScaleX(),e$d.resultMatrix.getScaleY()),e$S.translate(e$d.resultMatrix.tx,e$d.resultMatrix.ty),e$S.copyTo(e$d.resultMatrix),e$d.updateChild();var e$j,e$C;e$j=Math.atan2(e$k-e$B,e$l-e$A),e$t.setRotation(e$j),(e$C=e$kd._tempMatrix).identity(),e$C.rotate(e$j),e$C.scale(e$t.resultMatrix.getScaleX(),e$t.resultMatrix.getScaleY()),e$C.translate(e$A,e$B),e$S.copyTo(e$t.resultMatrix),e$t.updateChild()}},e$l(e$kd,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new e$Sd}]),e$kd}(),e$Zd=function(){function e$d(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return e$k(e$d,"laya.ani.bone.IkConstraintData"),e$d}(),e$R=function(){function e$C(e$d,e$t){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=e$d,this.position=e$d.position,this.spacing=e$d.spacing,this.rotateMix=e$d.rotateMix,this.translateMix=e$d.translateMix,this.bones=[];for(var e$l=this.data.bones,e$k=0,e$W=e$l.length;e$k<e$W;e$k++)this.bones.push(e$t[e$l[e$k]])}e$k(e$C,"laya.ani.bone.PathConstraint");var e$d=e$C.prototype;return e$d.apply=function(e$d,e$t){if(this.target){var e$l=this.translateMix,e$k=this.translateMix,e$W=0<e$k,e$i=this.data.spacingMode,e$A="length"==e$i,e$B=this.data.rotateMode,e$o="tangent"==e$B,e$I="chainScale"==e$B,e$b=[],e$f=this.bones.length,e$J=e$o?e$f:e$f+1,e$c=[];(this._spaces=e$c)[0]=this.position;var e$Y=this.spacing;if(e$I||e$A)for(var e$w=0,e$D=e$J-1;e$w<e$D;){var e$z=this.bones[e$w],e$e=e$z.length,e$g=e$e*e$z.resultMatrix.a,e$H=e$e*e$z.resultMatrix.b;e$e=Math.sqrt(e$g*e$g+e$H*e$H),e$I&&(e$b[e$w]=e$e),e$c[++e$w]=e$A?Math.max(0,e$e+e$Y):e$Y}else for(e$w=1;e$w<e$J;e$w++)e$c[e$w]=e$Y;var e$R=this.computeWorldPositions(this.target,e$d,e$t,e$J,e$o,"percent"==this.data.positionMode,"percent"==e$i);if(this._debugKey){for(e$w=0;e$w<e$R.length;e$w++)e$t.drawCircle(e$R[e$w++],e$R[e$w++],5,"#00ff00");var e$G=[];for(e$w=0;e$w<e$R.length;e$w++)e$G.push(e$R[e$w++],e$R[e$w++]);e$t.drawLines(0,0,e$G,"#ff0000")}var e$q=e$R[0],e$L=e$R[1],e$$=this.data.offsetRotation,e$p="chain"==e$B&&0==e$$,e$M=NaN;for(e$w=0,e$M=3;e$w<e$f;e$w++,e$M+=3){(e$z=this.bones[e$w]).resultMatrix.tx+=(e$q-e$z.resultMatrix.tx)*e$l,e$z.resultMatrix.ty+=(e$L-e$z.resultMatrix.ty)*e$l;var e$T=(e$g=e$R[e$M])-e$q,e$r=(e$H=e$R[e$M+1])-e$L;if(e$I&&0!=(e$e=e$b[e$w])){var e$S=(Math.sqrt(e$T*e$T+e$r*e$r)/e$e-1)*e$k+1;e$z.resultMatrix.a*=e$S,e$z.resultMatrix.c*=e$S}if(e$q=e$g,e$L=e$H,e$W){var e$j=e$z.resultMatrix.a,e$C=e$z.resultMatrix.c,e$K=e$z.resultMatrix.b,e$x=e$z.resultMatrix.d,e$n=NaN,e$Q=NaN,e$y=NaN;e$n=e$o?e$R[e$M-1]:0==e$c[e$w+1]?e$R[e$M+2]:Math.atan2(e$r,e$T),e$n-=Math.atan2(e$K,e$j)-e$$/180*Math.PI,e$p&&(e$Q=Math.cos(e$n),e$y=Math.sin(e$n),e$q+=((e$e=e$z.length)*(e$Q*e$j-e$y*e$K)-e$T)*e$k,e$L+=(e$e*(e$y*e$j+e$Q*e$K)-e$r)*e$k),e$n>Math.PI?e$n-=2*Math.PI:e$n<-Math.PI&&(e$n+=2*Math.PI),e$n*=e$k,e$Q=Math.cos(e$n),e$y=Math.sin(e$n),e$z.resultMatrix.a=e$Q*e$j-e$y*e$K,e$z.resultMatrix.c=e$Q*e$C-e$y*e$x,e$z.resultMatrix.b=e$y*e$j+e$Q*e$K,e$z.resultMatrix.d=e$y*e$C+e$Q*e$x}}}},e$d.computeWorldVertices2=function(e$d,e$t,e$l,e$k,e$W,e$i){var e$A,e$B,e$o=e$d.currDisplayData.bones,e$I=e$d.currDisplayData.weights,e$b=e$d.currDisplayData.triangles,e$f=0,e$J=0,e$c=0,e$Y=0,e$w=0,e$D=0,e$z=0,e$e=0,e$g=0,e$H=0,e$R=0;if(null!=e$o){for(e$f=0;e$f<e$l;e$f+=2)e$J+=(e$Y=e$o[e$J])+1,e$c+=e$Y;var e$G=e$t;for(e$w=e$i,e$D=3*e$c;e$w<e$k;e$w+=2){for(e$e=e$z=0,e$Y=e$o[e$J++],e$Y+=e$J;e$J<e$Y;e$J++,e$D+=3){e$A=e$G[e$o[e$J]].resultMatrix,e$g=e$I[e$D],e$H=e$I[e$D+1];var e$q=e$I[e$D+2];e$z+=(e$g*e$A.a+e$H*e$A.c+e$A.tx)*e$q,e$e+=(e$g*e$A.b+e$H*e$A.d+e$A.ty)*e$q}e$W[e$w]=e$z,e$W[e$w+1]=e$e}}else{var e$L,e$$;if(e$b||(e$b=e$I),e$d.deformData&&(e$b=e$d.deformData),e$L=e$d.parent,e$t)for(e$R=e$t.length,e$f=0;e$f<e$R;e$f++)if(e$t[e$f].name==e$L){e$B=e$t[e$f];break}e$B&&(e$$=e$B.resultMatrix),e$$||(e$$=e$C._tempMt);var e$p=e$$.tx,e$M=e$$.ty,e$T=e$$.a,e$r=e$$.b,e$S=e$$.c,e$j=e$$.d;for(e$B&&(e$j*=e$B.d),e$J=e$l,e$w=e$i;e$w<e$k;e$J+=2,e$w+=2)e$g=e$b[e$J],e$H=e$b[e$J+1],e$W[e$w]=e$g*e$T+e$H*e$r+e$p,e$W[e$w+1]=-(e$g*e$S+e$H*e$j+e$M)}},e$d.computeWorldPositions=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A){e$d.currDisplayData.bones,e$d.currDisplayData.weights,e$d.currDisplayData.triangles;var e$B=[],e$o=0,e$I=e$d.currDisplayData.verLen,e$b=this.position,e$f=this._spaces,e$J=[],e$c=[],e$Y=e$I/6,e$w=-1,e$D=NaN,e$z=0,e$e=0,e$g=NaN,e$H=NaN,e$R=NaN,e$G=NaN;if(e$Y--,e$I-=4,this.computeWorldVertices2(e$d,e$t,2,e$I,e$B,0),this._debugKey)for(e$o=0;e$o<e$B.length;)e$l.drawCircle(e$B[e$o++],e$B[e$o++],10,"#ff0000");e$J=e$B,this._curves.length=e$Y;var e$q=this._curves,e$L=e$J[e$D=0],e$$=e$J[1],e$p=0,e$M=0,e$T=0,e$r=0,e$S=0,e$j=0,e$C=NaN,e$K=NaN,e$x=NaN,e$n=NaN,e$Q=NaN,e$y=NaN,e$V=NaN,e$Z=NaN,e$U=0;for(e$o=0,e$U=2;e$o<e$Y;e$o++,e$U+=6)e$p=e$J[e$U],e$M=e$J[e$U+1],e$T=e$J[e$U+2],e$r=e$J[e$U+3],e$Q=2*(e$C=.1875*(e$L-2*e$p+e$T))+(e$x=.09375*(3*(e$p-e$T)-e$L+(e$S=e$J[e$U+4]))),e$y=2*(e$K=.1875*(e$$-2*e$M+e$r))+(e$n=.09375*(3*(e$M-e$r)-e$$+(e$j=e$J[e$U+5]))),e$V=.75*(e$p-e$L)+e$C+.16666667*e$x,e$Z=.75*(e$M-e$$)+e$K+.16666667*e$n,e$D+=Math.sqrt(e$V*e$V+e$Z*e$Z),e$V+=e$Q,e$Z+=e$y,e$Q+=e$x,e$y+=e$n,e$D+=Math.sqrt(e$V*e$V+e$Z*e$Z),e$V+=e$Q,e$Z+=e$y,e$D+=Math.sqrt(e$V*e$V+e$Z*e$Z),e$V+=e$Q+e$x,e$Z+=e$y+e$n,e$D+=Math.sqrt(e$V*e$V+e$Z*e$Z),e$q[e$o]=e$D,e$L=e$S,e$$=e$j;if(e$i&&(e$b*=e$D),e$A)for(e$o=0;e$o<e$k;e$o++)e$f[e$o]*=e$D;var e$E=this._segments,e$N=0,e$u=0;for(e$u=e$e=e$z=e$o=0;e$o<e$k;e$o++,e$z+=3)if((e$g=e$b+=e$H=e$f[e$o])<0)this.addBeforePosition(e$g,e$J,0,e$c,e$z);else if(e$D<e$g)this.addAfterPosition(e$g-e$D,e$J,e$I-4,e$c,e$z);else{for(;;e$e++)if(!((e$G=e$q[e$e])<e$g)){0==e$e?e$g/=e$G:e$g=(e$g-(e$R=e$q[e$e-1]))/(e$G-e$R);break}if(e$e!=e$w){var e$h=6*(e$w=e$e);for(e$L=e$J[e$h],e$$=e$J[e$h+1],e$p=e$J[e$h+2],e$M=e$J[e$h+3],e$T=e$J[e$h+4],e$r=e$J[e$h+5],e$Q=2*(e$C=.03*(e$L-2*e$p+e$T))+(e$x=.006*(3*(e$p-e$T)-e$L+(e$S=e$J[e$h+6]))),e$y=2*(e$K=.03*(e$$-2*e$M+e$r))+(e$n=.006*(3*(e$M-e$r)-e$$+(e$j=e$J[e$h+7]))),e$V=.3*(e$p-e$L)+e$C+.16666667*e$x,e$Z=.3*(e$M-e$$)+e$K+.16666667*e$n,e$N=Math.sqrt(e$V*e$V+e$Z*e$Z),e$E[0]=e$N,e$h=1;e$h<8;e$h++)e$V+=e$Q,e$Z+=e$y,e$Q+=e$x,e$y+=e$n,e$N+=Math.sqrt(e$V*e$V+e$Z*e$Z),e$E[e$h]=e$N;e$V+=e$Q,e$Z+=e$y,e$N+=Math.sqrt(e$V*e$V+e$Z*e$Z),e$E[8]=e$N,e$V+=e$Q+e$x,e$Z+=e$y+e$n,e$N+=Math.sqrt(e$V*e$V+e$Z*e$Z),e$E[9]=e$N,e$u=0}for(e$g*=e$N;;e$u++)if(!((e$G=e$E[e$u])<e$g)){0==e$u?e$g/=e$G:e$g=e$u+(e$g-(e$R=e$E[e$u-1]))/(e$G-e$R);break}this.addCurvePosition(.1*e$g,e$L,e$$,e$p,e$M,e$T,e$r,e$S,e$j,e$c,e$z,e$W||0<e$o&&0==e$H)}return e$c},e$d.addBeforePosition=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$t[e$l],e$A=e$t[e$l+1],e$B=e$t[e$l+2]-e$i,e$o=e$t[e$l+3]-e$A,e$I=Math.atan2(e$o,e$B);e$k[e$W]=e$i+e$d*Math.cos(e$I),e$k[e$W+1]=e$A+e$d*Math.sin(e$I),e$k[e$W+2]=e$I},e$d.addAfterPosition=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$t[e$l+2],e$A=e$t[e$l+3],e$B=e$i-e$t[e$l],e$o=e$A-e$t[e$l+1],e$I=Math.atan2(e$o,e$B);e$k[e$W]=e$i+e$d*Math.cos(e$I),e$k[e$W+1]=e$A+e$d*Math.sin(e$I),e$k[e$W+2]=e$I},e$d.addCurvePosition=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b,e$f){0==e$d&&(e$d=1e-4);var e$J=e$d*e$d,e$c=e$J*e$d,e$Y=1-e$d,e$w=e$Y*e$Y,e$D=e$w*e$Y,e$z=e$Y*e$d,e$e=3*e$z,e$g=e$Y*e$e,e$H=e$e*e$d,e$R=e$t*e$D+e$k*e$g+e$i*e$H+e$B*e$c,e$G=e$l*e$D+e$W*e$g+e$A*e$H+e$o*e$c;e$I[e$b]=e$R,e$I[e$b+1]=e$G,e$I[e$b+2]=e$f?Math.atan2(e$G-(e$l*e$w+e$W*e$z*2+e$A*e$J),e$R-(e$t*e$w+e$k*e$z*2+e$i*e$J)):0},e$C.NONE=-1,e$C.BEFORE=-2,e$C.AFTER=-3,e$l(e$C,["_tempMt",function(){return this._tempMt=new e$Sd}]),e$C}(),e$Ud=function(){function e$d(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return e$k(e$d,"laya.ani.bone.PathConstraintData"),e$d}(),e$Ed=function(){function e$d(){this.name=null,this.slotArr=[]}return e$k(e$d,"laya.ani.bone.SkinData"),e$d}(),e$Nd=function(){function e$d(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}e$k(e$d,"laya.ani.bone.SkinSlotDisplayData");var e$t=e$d.prototype;return e$t.createTexture=function(e$d){return this.texture||(this.texture=new e$jd(e$d.bitmap,this.uvs),e$d.bitmap.alphaTexture&&(this.texture.alphaTexture=new e$jd(e$d.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=e$d.height,this.texture.height=e$d.width,this.texture.offsetX=-e$d.offsetX,this.texture.offsetY=-e$d.offsetY,this.texture.sourceWidth=e$d.sourceHeight,this.texture.sourceHeight=e$d.sourceWidth):(this.texture.width=e$d.width,this.texture.height=e$d.height,this.texture.offsetX=-e$d.offsetX,this.texture.offsetY=-e$d.offsetY,this.texture.sourceWidth=e$d.sourceWidth,this.texture.sourceHeight=e$d.sourceHeight),e$D.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},e$t.destory=function(){this.texture&&this.texture.destroy()},e$d}(),e$ud=function(){function e$d(){this.name=null,this.displayArr=[]}return e$k(e$d,"laya.ani.bone.SlotData"),e$d.prototype.getDisplayByName=function(e$d){for(var e$t=0,e$l=this.displayArr.length;e$t<e$l;e$t++)if(this.displayArr[e$t].attachmentName==e$d)return e$t;return-1},e$d}(),e$G=function(){function e$d(e$d,e$t){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=e$w(2,0),this._data=e$d,null==this._bones&&(this._bones=[]),this.target=e$t[e$d.targetIndex];var e$l,e$k=0;for(e$k=0,e$l=e$d.boneIndexs.length;e$k<e$l;e$k++)this._bones.push(e$t[e$d.boneIndexs[e$k]]);this.rotateMix=e$d.rotateMix,this.translateMix=e$d.translateMix,this.scaleMix=e$d.scaleMix,this.shearMix=e$d.shearMix}return e$k(e$d,"laya.ani.bone.TfConstraint"),e$d.prototype.apply=function(){for(var e$d,e$t=this.target.resultMatrix.a,e$l=this.target.resultMatrix.b,e$k=this.target.resultMatrix.c,e$W=this.target.resultMatrix.d,e$i=0,e$A=this._bones.length;e$i<e$A;e$i++){if(e$d=this._bones[e$i],0<this.rotateMix){var e$B=e$d.resultMatrix.a,e$o=e$d.resultMatrix.b,e$I=e$d.resultMatrix.c,e$b=e$d.resultMatrix.d,e$f=Math.atan2(e$k,e$t)-Math.atan2(e$I,e$B)+this._data.offsetRotation*Math.PI/180;e$f>Math.PI?e$f-=2*Math.PI:e$f<-Math.PI&&(e$f+=2*Math.PI),e$f*=this.rotateMix;var e$J=Math.cos(e$f),e$c=Math.sin(e$f);e$d.resultMatrix.a=e$J*e$B-e$c*e$I,e$d.resultMatrix.b=e$J*e$o-e$c*e$b,e$d.resultMatrix.c=e$c*e$B+e$J*e$I,e$d.resultMatrix.d=e$c*e$o+e$J*e$b}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),e$d.resultMatrix.tx+=(this._temp[0]-e$d.resultMatrix.tx)*this.translateMix,e$d.resultMatrix.ty+=(this._temp[1]-e$d.resultMatrix.ty)*this.translateMix,e$d.updateChild()),0<this.scaleMix){var e$Y=Math.sqrt(e$d.resultMatrix.a*e$d.resultMatrix.a+e$d.resultMatrix.c*e$d.resultMatrix.c),e$w=Math.sqrt(e$t*e$t+e$k*e$k),e$D=1e-5<e$Y?(e$Y+(e$w-e$Y+this._data.offsetScaleX)*this.scaleMix)/e$Y:0;e$d.resultMatrix.a*=e$D,e$d.resultMatrix.c*=e$D,e$Y=Math.sqrt(e$d.resultMatrix.b*e$d.resultMatrix.b+e$d.resultMatrix.d*e$d.resultMatrix.d),e$w=Math.sqrt(e$l*e$l+e$W*e$W),e$D=1e-5<e$Y?(e$Y+(e$w-e$Y+this._data.offsetScaleY)*this.scaleMix)/e$Y:0,e$d.resultMatrix.b*=e$D,e$d.resultMatrix.d*=e$D}if(0<this.shearMix){e$o=e$d.resultMatrix.b,e$b=e$d.resultMatrix.d;var e$z=Math.atan2(e$b,e$o);(e$f=Math.atan2(e$W,e$l)-Math.atan2(e$k,e$t)-(e$z-Math.atan2(e$d.resultMatrix.c,e$d.resultMatrix.a)))>Math.PI?e$f-=2*Math.PI:e$f<-Math.PI&&(e$f+=2*Math.PI),e$f=e$z+(e$f+this._data.offsetShearY*Math.PI/180)*this.shearMix,e$D=Math.sqrt(e$o*e$o+e$b*e$b),e$d.resultMatrix.b=Math.cos(e$f)*e$D,e$d.resultMatrix.d=Math.sin(e$f)*e$D}}},e$d}(),e$hd=function(){function e$d(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return e$k(e$d,"laya.ani.bone.TfConstraintData"),e$d}(),e$sd=function(){function e$d(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}e$k(e$d,"laya.ani.bone.Transform");var e$t=e$d.prototype;return e$t.initData=function(e$d){null!=e$d.x&&(this.x=e$d.x),null!=e$d.y&&(this.y=e$d.y),null!=e$d.skX&&(this.skX=e$d.skX),null!=e$d.skY&&(this.skY=e$d.skY),null!=e$d.scX&&(this.scX=e$d.scX),null!=e$d.scY&&(this.scY=e$d.scY)},e$t.getMatrix=function(){var e$d;return(e$d=this.mMatrix?this.mMatrix:this.mMatrix=new e$Sd).identity(),e$d.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(e$d,this.skewX*Math.PI/180,this.skewY*Math.PI/180),e$d.rotate(this.skX*Math.PI/180),e$d.translate(this.x,this.y),e$d},e$t.skew=function(e$d,e$t,e$l){var e$k=Math.sin(e$l),e$W=Math.cos(e$l),e$i=Math.sin(e$t),e$A=Math.cos(e$t);return e$d.setTo(e$d.a*e$A-e$d.b*e$k,e$d.a*e$i+e$d.b*e$W,e$d.c*e$A-e$d.d*e$k,e$d.c*e$i+e$d.d*e$W,e$d.tx*e$A-e$d.ty*e$k,e$d.tx*e$i+e$d.ty*e$W),e$d},e$d}(),e$q=function(){function e$d(){}return e$k(e$d,"laya.ani.bone.UVTools"),e$d.getRelativeUV=function(e$d,e$t,e$l){var e$k=e$d[0],e$W=e$d[2]-e$d[0],e$i=e$d[1],e$A=e$d[5]-e$d[1];e$l||(e$l=[]),e$l.length=e$t.length;var e$B,e$o=0;e$B=e$l.length;var e$I=1/e$W,e$b=1/e$A;for(e$o=0;e$o<e$B;e$o+=2)e$l[e$o]=(e$t[e$o]-e$k)*e$I,e$l[e$o+1]=(e$t[e$o+1]-e$i)*e$b;return e$l},e$d.getAbsoluteUV=function(e$d,e$t,e$l){if(0==e$d[0]&&0==e$d[1]&&1==e$d[4]&&1==e$d[5])return e$l?(e$z.copyArray(e$l,e$t),e$l):e$t;var e$k=e$d[0],e$W=e$d[2]-e$d[0],e$i=e$d[1],e$A=e$d[5]-e$d[1];e$l||(e$l=[]),e$l.length=e$t.length;var e$B,e$o=0;for(e$B=e$l.length,e$o=0;e$o<e$B;e$o+=2)e$l[e$o]=e$t[e$o]*e$W+e$k,e$l[e$o+1]=e$t[e$o+1]*e$A+e$i;return e$l},e$d}(),e$C=function(){function e$d(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return e$k(e$d,"laya.ani.KeyFramesContent"),e$d}(),e$L=function(){function e$b(){}return e$k(e$b,"laya.ani.math.BezierLerp"),e$b.getBezierRate=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$b._getBezierParamKey(e$t,e$l,e$k,e$W),e$A=100*e$i+e$d;if(e$b._bezierResultCache[e$A])return e$b._bezierResultCache[e$A];var e$B,e$o=e$b._getBezierPoints(e$t,e$l,e$k,e$W,e$i),e$I=0;for(e$B=e$o.length,e$I=0;e$I<e$B;e$I+=2)if(e$d<=e$o[e$I])return e$b._bezierResultCache[e$A]=e$o[e$I+1],e$o[e$I+1];return e$b._bezierResultCache[e$A]=1},e$b._getBezierParamKey=function(e$d,e$t,e$l,e$k){return 100*(100*(100*(100*e$d+e$t)+e$l)+e$k)},e$b._getBezierPoints=function(e$d,e$t,e$l,e$k,e$W){return e$b._bezierPointsCache[e$W]?e$b._bezierPointsCache[e$W]:(e$i=[0,0,e$d,e$t,e$l,e$k,1,1],e$A=(new e$B).getBezierPoints(e$i,100,3),e$b._bezierPointsCache[e$W]=e$A);var e$i,e$A},e$b._bezierResultCache={},e$b._bezierPointsCache={},e$b}(),e$$=function(e$d){function e$t(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,e$t.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}e$k(e$t,"laya.ani.AnimationPlayer",e$W);var e$l=e$t.prototype;return e$Wd.imps(e$l,{"laya.resource.IDestroy":!0}),e$l._onTempletLoadedComputeFullKeyframeIndices=function(e$d,e$t,e$l){this._templet===e$l&&this._cachePlayRate===e$d&&this._cacheFrameRate===e$t&&this._computeFullKeyframeIndices()},e$l._computeFullKeyframeIndices=function(){for(var e$d=this._fullFrames=[],e$t=this._templet,e$l=this._cacheFrameRateInterval*this._cachePlayRate,e$k=0,e$W=e$t.getAnimationCount();e$k<e$W;e$k++){for(var e$i=[],e$A=0,e$B=e$t.getAnimation(e$k).nodes.length;e$A<e$B;e$A++){for(var e$o=e$t.getAnimation(e$k).nodes[e$A],e$I=Math.floor(e$o.playTime/e$l+.01),e$b=new Uint16Array(e$I+1),e$f=-1,e$J=0,e$c=e$o.keyFrame.length;e$J<e$c;e$J++){var e$Y=e$o.keyFrame[e$J],e$w=e$Y.startTime,e$D=e$w+e$Y.duration+e$l;do{for(var e$z=Math.floor(e$w/e$l+.5),e$e=e$f+1;e$e<e$z;e$e++)e$b[e$e]=e$J;e$b[e$f=e$z]=e$J,e$w+=e$l}while(e$w<=e$D)}e$i.push(e$b)}e$d.push(e$i)}},e$l._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},e$l._calculatePlayDuration=function(){if(0!==this.state){var e$d=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=e$d),this._playEnd>e$d&&(this._playEnd=e$d),this._playDuration=this._playEnd-this._playStart}},e$l._setPlayParams=function(e$d,e$t){this._currentTime=e$d,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e$t+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e$t},e$l._setPlayParamsWhenStop=function(e$d,e$t){this._currentTime=e$d,this._currentKeyframeIndex=Math.max(Math.floor(e$d/e$t+.01),0),this._currentFrameTime=this._currentKeyframeIndex*e$t,this._currentAnimationClipIndex=-1},e$l._update=function(e$d){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var e$t=this._cacheFrameRateInterval*this._cachePlayRate,e$l=0;this._startUpdateLoopCount!==e$Y.loopCount&&(e$l=e$d*this.playbackRate,this._elapsedPlaybackTime+=e$l);var e$k=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=e$k)return this._setPlayParamsWhenStop(e$k,e$t),void this.event("stopped");if(e$l+=this._currentTime,0<e$k)if(e$k<=e$l)do{if(e$l-=e$k,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(e$k,e$t),this._stopWhenCircleFinish=!1,void this.event("stopped");e$l<e$k&&(this._setPlayParams(e$l,e$t),this.event("complete"))}while(e$k<=e$l);else this._setPlayParams(e$l,e$t);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(e$k,e$t),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},e$l._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},e$l.play=function(e$d,e$t,e$l,e$k,e$W){if(void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=1),void 0===e$l&&(e$l=2147483647),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(e$l<0||e$k<0||e$W<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==e$W&&e$W<e$k)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=e$t,this._overallDuration=e$l,this._playStart=e$k,this._playEnd=e$W,this._paused=!1,this._currentAnimationClipIndex=e$d,this._currentKeyframeIndex=0,this._startUpdateLoopCount=e$Y.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},e$l.playByFrame=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$d&&(e$d=0),void 0===e$t&&(e$t=1),void 0===e$l&&(e$l=2147483647),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=30);var e$A=1e3/e$i;this.play(e$d,e$t,e$l,e$k*e$A,e$W*e$A)},e$l.stop=function(e$d){void 0===e$d&&(e$d=!0),e$d?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},e$i(0,e$l,"playEnd",function(){return this._playEnd}),e$i(0,e$l,"templet",function(){return this._templet},function(e$d){0===!this.state&&this.stop(!0),this._templet!==e$d&&((this._templet=e$d).loaded?this._computeFullKeyframeIndices():e$d.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),e$i(0,e$l,"playStart",function(){return this._playStart}),e$i(0,e$l,"playDuration",function(){return this._playDuration}),e$i(0,e$l,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),e$i(0,e$l,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),e$i(0,e$l,"overallDuration",function(){return this._overallDuration}),e$i(0,e$l,"currentFrameTime",function(){return this._currentFrameTime}),e$i(0,e$l,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),e$i(0,e$l,"currentPlayTime",function(){return this._currentTime+this._playStart}),e$i(0,e$l,"cachePlayRate",function(){return this._cachePlayRate},function(e$d){this._cachePlayRate!==e$d&&(this._cachePlayRate=e$d,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[e$d,this._cacheFrameRate])))}),e$i(0,e$l,"cacheFrameRate",function(){return this._cacheFrameRate},function(e$d){this._cacheFrameRate!==e$d&&(this._cacheFrameRate=e$d,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,e$d])))}),e$i(0,e$l,"currentTime",null,function(e$d){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(e$d<this._playStart||e$d>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=e$Y.loopCount;var e$t=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=e$d,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/e$t),0),this._currentFrameTime=this._currentKeyframeIndex*e$t}}),e$i(0,e$l,"paused",function(){return this._paused},function(e$d){(this._paused=e$d)&&this.event("paused")}),e$i(0,e$l,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),e$i(0,e$l,"destroyed",function(){return this._destroyed}),e$t}(),e$K=function(e$d){function e$t(){e$t.__super.call(this),e$D.isConchNode&&(this.drawSkin=function(e$d){e$d.transform||(e$d.transform=e$Sd.EMPTY),this._addCmd([e$d]),this.setSkinMesh&&this.setSkinMesh(e$d._ps,e$d.mVBData,e$d.mEleNum,0,e$d.mTexture,e$d.transform)})}return e$k(e$t,"laya.ani.GraphicsAni",e$A),e$t.prototype.drawSkin=function(e$d){var e$t=[e$d];this._saveToCmd(e$D._context._drawSkin,e$t)},e$t.create=function(){return e$t._caches.pop()||new e$t},e$t.recycle=function(e$d){e$d.clear(),e$t._caches.push(e$d)},e$t._caches=[],e$t}(),e$x=function(e$d){function e$e(){this._aniMap={},this.unfixedLastAniIndex=-1,e$e.__super.call(this),this._anis=new Array}e$k(e$e,"laya.ani.AnimationTemplet",e$b);var e$t=e$e.prototype;return e$t.parse=function(e$d){var e$t=new e$rd(e$d);this._aniVersion=e$t.readUTFString(),e$g.parse(this,e$t)},e$t._calculateKeyFrame=function(e$d,e$t,e$l){var e$k=e$d.keyFrame;e$k[e$t]=e$k[0];for(var e$W=0;e$W<e$t;e$W++){var e$i=e$k[e$W];e$i.nextData=0===e$i.duration?e$i.data:e$k[e$W+1].data}e$k.length--},e$t.onAsynLoaded=function(e$d,e$t,e$l){var e$k=new e$rd(e$t);switch(this._aniVersion=e$k.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":e$H.parse(this,e$k);break;default:e$g.parse(this,e$k)}this._endLoaded()},e$t.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},e$t.getAnimationCount=function(){return this._anis.length},e$t.getAnimation=function(e$d){return this._anis[e$d]},e$t.getAniDuration=function(e$d){return this._anis[e$d].playTime},e$t.getNodes=function(e$d){return this._anis[e$d].nodes},e$t.getNodeIndexWithName=function(e$d,e$t){return this._anis[e$d].bone3DMap[e$t]},e$t.getNodeCount=function(e$d){return this._anis[e$d].nodes.length},e$t.getTotalkeyframesLength=function(e$d){return this._anis[e$d].totalKeyframeDatasLength},e$t.getPublicExtData=function(){return this._publicExtData},e$t.getAnimationDataWithCache=function(e$d,e$t,e$l,e$k){var e$W=e$t[e$l];if(e$W){var e$i=e$W[e$d];return e$i?e$i[e$k]:null}return null},e$t.setAnimationDataWithCache=function(e$d,e$t,e$l,e$k,e$W){var e$i=e$t[e$l]||(e$t[e$l]={});(e$i[e$d]||(e$i[e$d]=[]))[e$k]=e$W},e$t.getOriginalData=function(e$d,e$t,e$l,e$k,e$W){for(var e$i=this._anis[e$d].nodes,e$A=0,e$B=0,e$o=e$i.length,e$I=0;e$B<e$o;e$B++){var e$b,e$f=e$i[e$B];e$b=e$f.keyFrame[e$l[e$B][e$k]],e$f.dataOffset=e$I;var e$J=e$W-e$b.startTime,e$c=e$f.lerpType;if(e$c)switch(e$c){case 0:case 1:for(e$A=0;e$A<e$f.keyframeWidth;)e$A+=e$f.interpolationMethod[e$A](e$f,e$A,e$t,e$I+e$A,e$b.data,e$J,null,e$b.duration,e$b.nextData);break;case 2:var e$Y=e$b.interpolationData,e$w=e$Y.length,e$D=0;for(e$A=0;e$A<e$w;){var e$z=e$Y[e$A];switch(e$z){case 6:case 7:e$A+=e$e.interpolation[e$z](e$f,e$D,e$t,e$I+e$D,e$b.data,e$J,null,e$b.duration,e$b.nextData,e$Y,e$A+1);break;default:e$A+=e$e.interpolation[e$z](e$f,e$D,e$t,e$I+e$D,e$b.data,e$J,null,e$b.duration,e$b.nextData)}e$D++}}else for(e$A=0;e$A<e$f.keyframeWidth;)e$A+=e$f.interpolationMethod[e$A](e$f,e$A,e$t,e$I+e$A,e$b.data,e$J,null,e$b.duration,e$b.nextData);e$I+=e$f.keyframeWidth}},e$t.getNodesCurrentFrameIndex=function(e$d,e$t){var e$l=this._anis[e$d].nodes;e$d!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(e$l.length),this.unfixedCurrentTimes=new Float32Array(e$l.length),this.unfixedLastAniIndex=e$d);for(var e$k=0,e$W=e$l.length;e$k<e$W;e$k++){var e$i=e$l[e$k];for(e$t<this.unfixedCurrentTimes[e$k]&&(this.unfixedCurrentFrameIndexes[e$k]=0),this.unfixedCurrentTimes[e$k]=e$t;this.unfixedCurrentFrameIndexes[e$k]<e$i.keyFrame.length&&!(e$i.keyFrame[this.unfixedCurrentFrameIndexes[e$k]].startTime>this.unfixedCurrentTimes[e$k]);)this.unfixedCurrentFrameIndexes[e$k]++;this.unfixedCurrentFrameIndexes[e$k]--}return this.unfixedCurrentFrameIndexes},e$t.getOriginalDataUnfixedRate=function(e$d,e$t,e$l){var e$k=this._anis[e$d].nodes;e$d!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(e$k.length),this.unfixedCurrentTimes=new Float32Array(e$k.length),this.unfixedKeyframes=e$w(e$k.length),this.unfixedLastAniIndex=e$d);for(var e$W=0,e$i=0,e$A=e$k.length,e$B=0;e$i<e$A;e$i++){var e$o=e$k[e$i];for(e$l<this.unfixedCurrentTimes[e$i]&&(this.unfixedCurrentFrameIndexes[e$i]=0),this.unfixedCurrentTimes[e$i]=e$l;this.unfixedCurrentFrameIndexes[e$i]<e$o.keyFrame.length&&!(e$o.keyFrame[this.unfixedCurrentFrameIndexes[e$i]].startTime>this.unfixedCurrentTimes[e$i]);)this.unfixedKeyframes[e$i]=e$o.keyFrame[this.unfixedCurrentFrameIndexes[e$i]],this.unfixedCurrentFrameIndexes[e$i]++;var e$I=this.unfixedKeyframes[e$i];e$o.dataOffset=e$B;var e$b=e$l-e$I.startTime;if(e$o.lerpType)switch(e$o.lerpType){case 0:case 1:for(e$W=0;e$W<e$o.keyframeWidth;)e$W+=e$o.interpolationMethod[e$W](e$o,e$W,e$t,e$B+e$W,e$I.data,e$b,null,e$I.duration,e$I.nextData);break;case 2:var e$f=e$I.interpolationData,e$J=e$f.length,e$c=0;for(e$W=0;e$W<e$J;){var e$Y=e$f[e$W];switch(e$Y){case 6:case 7:e$W+=e$e.interpolation[e$Y](e$o,e$c,e$t,e$B+e$c,e$I.data,e$b,null,e$I.duration,e$I.nextData,e$f,e$W+1);break;default:e$W+=e$e.interpolation[e$Y](e$o,e$c,e$t,e$B+e$c,e$I.data,e$b,null,e$I.duration,e$I.nextData)}e$c++}}else for(e$W=0;e$W<e$o.keyframeWidth;)e$W+=e$o.interpolationMethod[e$W](e$o,e$W,e$t,e$B+e$W,e$I.data,e$b,null,e$I.duration,e$I.nextData);e$B+=e$o.keyframeWidth}},e$e._LinearInterpolation_0=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){var e$b=0===e$B?0:e$i/e$B;return e$l[e$k]=(1-e$b)*e$W[e$t]+e$b*e$o[e$t],1},e$e._QuaternionInterpolation_1=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){var e$b=0===e$B?0:e$i/e$B;return e$J.slerpQuaternionArray(e$W,e$t,e$o,e$t,e$b,e$l,e$k),4},e$e._AngleInterpolation_2=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){return 0},e$e._RadiansInterpolation_3=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){return 0},e$e._Matrix4x4Interpolation_4=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){for(var e$b=0;e$b<16;e$b++,e$t++)e$l[e$k+e$b]=e$W[e$t]+e$i*e$A[e$t];return 16},e$e._NoInterpolation_5=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I){return e$l[e$k]=e$W[e$t],1},e$e._BezierInterpolation_6=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b){return void 0===e$b&&(e$b=0),e$l[e$k]=e$W[e$t]+(e$o[e$t]-e$W[e$t])*e$L.getBezierRate(e$i/e$B,e$I[e$b],e$I[e$b+1],e$I[e$b+2],e$I[e$b+3]),5},e$e._BezierInterpolation_7=function(e$d,e$t,e$l,e$k,e$W,e$i,e$A,e$B,e$o,e$I,e$b){return void 0===e$b&&(e$b=0),e$l[e$k]=e$I[e$b+4]+e$I[e$b+5]*e$L.getBezierRate((.001*e$i+e$I[e$b+6])/e$I[e$b+7],e$I[e$b],e$I[e$b+1],e$I[e$b+2],e$I[e$b+3]),9},e$e.load=function(e$d){return e$Wd.loader.create(e$d,null,null,e$e)},e$e.interpolation=[e$e._LinearInterpolation_0,e$e._QuaternionInterpolation_1,e$e._AngleInterpolation_2,e$e._RadiansInterpolation_3,e$e._Matrix4x4Interpolation_4,e$e._NoInterpolation_5,e$e._BezierInterpolation_6,e$e._BezierInterpolation_7],e$e}(),e$p=function(e$t){function e$l(e$d,e$t){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,e$l.__super.call(this),void 0===e$t&&(e$t=0),e$d&&this.init(e$d,e$t)}e$k(e$l,"laya.ani.bone.Skeleton",e$t);var e$d=e$l.prototype;return e$d.init=function(e$d,e$t){void 0===e$t&&(e$t=0);var e$l,e$k,e$W,e$i=0,e$A=0;if(1==e$t)for(this._graphicsCache=[],e$i=0,e$A=e$d.getAnimationCount();e$i<e$A;e$i++)this._graphicsCache.push([]);if(this._yReverseMatrix=e$d.yReverseMatrix,this._aniMode=e$t,this._templet=e$d,this._player=new e$$,this._player.cacheFrameRate=e$d.rate,this._player.templet=e$d,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=e$d.mBoneArr,this._rootBone=e$d.mRootBone,this._aniSectionDic=e$d.aniSectionDic,0<e$d.ikArr.length)for(this._ikArr=[],e$i=0,e$A=e$d.ikArr.length;e$i<e$A;e$i++)this._ikArr.push(new e$e(e$d.ikArr[e$i],this._boneList));if(0<e$d.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),e$i=0,e$A=e$d.pathArr.length;e$i<e$A;e$i++)e$l=e$d.pathArr[e$i],e$k=new e$R(e$l,this._boneList),(e$W=this._boneSlotDic[e$l.name])&&((e$k=new e$R(e$l,this._boneList)).target=e$W),this._pathDic[e$l.name]=e$k;if(0<e$d.tfArr.length)for(this._tfArr=[],e$i=0,e$A=e$d.tfArr.length;e$i<e$A;e$i++)this._tfArr.push(new e$G(e$d.tfArr[e$i],this._boneList));if(0<e$d.skinDataArray.length){var e$B=this._templet.skinDataArray[this._skinIndex];this._skinName=e$B.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},e$d.load=function(e$d,e$t,e$l){},e$d._onLoaded=function(){},e$d._parseComplete=function(){var e$d=e$M.TEMPLET_DICTIONARY[this._aniPath];e$d&&(this.init(e$d,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},e$d._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},e$d._onPlay=function(){this.event("played")},e$d._onStop=function(){var e$d,e$t=this._templet.eventAniArr[this._aniClipIndex];if(e$t&&this._eventIndex<e$t.length)for(;this._eventIndex<e$t.length;this._eventIndex++)(e$d=e$t[this._eventIndex]).time>=this._player.playStart&&e$d.time<=this._player.playEnd&&this.event("label",e$d);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},e$d._onPause=function(){this.event("paused")},e$d._parseSrcBoneMatrix=function(){var e$d=0,e$t=0;for(e$t=this._templet.srcBoneMatrixArr.length,e$d=0;e$d<e$t;e$d++)this._boneMatrixArray.push(new e$Sd);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var e$l,e$k,e$W=this._templet.boneSlotArray;for(e$d=0,e$t=e$W.length;e$d<e$t;e$d++)e$l=e$W[e$d],null==(e$k=this._bindBoneBoneSlotDic[e$l.parent])&&(this._bindBoneBoneSlotDic[e$l.parent]=e$k=[]),this._boneSlotDic[e$l.name]=e$l=e$l.copy(),e$k.push(e$l),this._boneSlotArray.push(e$l)}},e$d._emitMissedEvents=function(e$d,e$t,e$l){void 0===e$l&&(e$l=0);var e$k=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(e$k){var e$W,e$i,e$A=0;for(e$W=e$k.length,e$A=e$l;e$A<e$W;e$A++)(e$i=e$k[e$A]).time>=this._player.playStart&&e$i.time<=this._player.playEnd&&this.event("label",e$i)}},e$d._update=function(e$d){if(void 0===e$d&&(e$d=!0),!(this._pause||e$d&&this._indexControl)){var e$t=this.timer.currTimer,e$l=this._player.currentKeyframeIndex,e$k=e$t-this._lastTime;if(e$d?this._player._update(e$k):e$l=-1,this._lastTime=e$t,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<e$k&&this._clipIndex==e$l&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var e$W;this._lastUpdateAniClipIndex=this._aniClipIndex,e$l>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var e$i,e$A=this._templet.eventAniArr[this._aniClipIndex];if(e$A&&this._eventIndex<e$A.length&&((e$W=e$A[this._eventIndex]).time>=this._player.playStart&&e$W.time<=this._player.playEnd?this._player.currentPlayTime>=e$W.time&&(this.event("label",e$W),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(e$i=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=e$i&&(this.graphics=e$i));var e$B=0,e$o=0;for(e$o=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,e$o-1)&&0<e$o;)e$o--;if(e$o<this._clipIndex)for(e$B=e$o;e$B<this._clipIndex;e$B++)this._createGraphics(e$B)}else if(1==this._aniMode){if(e$i=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=e$i&&(this.graphics=e$i));for(e$o=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,e$o-1)&&0<e$o;)e$o--;if(e$o<this._clipIndex)for(e$B=e$o;e$B<this._clipIndex;e$B++)this._createGraphics(e$B)}this._createGraphics()}}},e$d._createGraphics=function(e$d){void 0===e$d&&(e$d=-1),-1==e$d&&(e$d=this._clipIndex);var e$t,e$l,e$k=e$d*this._player.cacheFrameRateInterval,e$W=this._templet.drawOrderAniArr[this._aniClipIndex];if(e$W&&0<e$W.length)for(this._drawOrderIndex=0,e$t=e$W[this._drawOrderIndex];e$k>=e$t.time&&(this._drawOrder=e$t.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=e$W.length));)e$t=e$W[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=e$K.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=e$K.create(),e$l=this.graphics;var e$i=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],e$d,e$k);var e$A,e$B,e$o,e$I,e$b=this._aniSectionDic[this._aniClipIndex],e$f=0,e$J=0,e$c=0,e$Y=0,e$w=0,e$D=this._templet.srcBoneMatrixArr.length;for(e$w=e$b[e$J=0];e$J<e$D;e$J++)e$I=this._boneList[e$J],e$o=this._templet.srcBoneMatrixArr[e$J],e$I.resultTransform.scX=e$o.scX*this._curOriginalData[e$f++],e$I.resultTransform.skX=e$o.skX+this._curOriginalData[e$f++],e$I.resultTransform.skY=e$o.skY+this._curOriginalData[e$f++],e$I.resultTransform.scY=e$o.scY*this._curOriginalData[e$f++],e$I.resultTransform.x=e$o.x+this._curOriginalData[e$f++],e$I.resultTransform.y=e$o.y+this._curOriginalData[e$f++],8===this._templet.tMatrixDataLen&&(e$I.resultTransform.skewX=e$o.skewX+this._curOriginalData[e$f++],e$I.resultTransform.skewY=e$o.skewY+this._curOriginalData[e$f++]);var e$z,e$e={},e$g={};for(e$w+=e$b[1];e$J<e$w;e$J++)e$e[(e$z=e$i[e$J]).name]=this._curOriginalData[e$f++],e$g[e$z.name]=this._curOriginalData[e$f++],this._curOriginalData[e$f++],this._curOriginalData[e$f++],this._curOriginalData[e$f++],this._curOriginalData[e$f++];var e$H,e$R,e$G={},e$q={};for(e$w+=e$b[2];e$J<e$w;e$J++)e$G[(e$z=e$i[e$J]).name]=this._curOriginalData[e$f++],e$q[e$z.name]=this._curOriginalData[e$f++],this._curOriginalData[e$f++],this._curOriginalData[e$f++],this._curOriginalData[e$f++],this._curOriginalData[e$f++];if(this._pathDic)for(e$w+=e$b[3];e$J<e$w;e$J++){if(e$z=e$i[e$J],e$H=this._pathDic[e$z.name])switch(new e$rd(e$z.extenData).getByte()){case 1:e$H.position=this._curOriginalData[e$f++];break;case 2:e$H.spacing=this._curOriginalData[e$f++];break;case 3:e$H.rotateMix=this._curOriginalData[e$f++],e$H.translateMix=this._curOriginalData[e$f++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(e$Sd.TEMP.identity()),this._ikArr)for(e$J=0,e$w=this._ikArr.length;e$J<e$w;e$J++)e$R=this._ikArr[e$J],e$G.hasOwnProperty(e$R.name)&&(e$R.bendDirection=e$G[e$R.name]),e$q.hasOwnProperty(e$R.name)&&(e$R.mix=e$q[e$R.name]),e$R.apply();if(this._pathDic)for(var e$L in this._pathDic)(e$H=this._pathDic[e$L]).apply(this._boneList,e$l);if(this._tfArr)for(e$J=0,e$Y=this._tfArr.length;e$J<e$Y;e$J++)this._tfArr[e$J].apply();for(e$J=0,e$Y=this._boneList.length;e$J<e$Y;e$J++)if(e$I=this._boneList[e$J],e$B=this._bindBoneBoneSlotDic[e$I.name],e$I.resultMatrix.copyTo(this._boneMatrixArray[e$J]),e$B)for(e$c=0,e$w=e$B.length;e$c<e$w;e$c++)(e$A=e$B[e$c])&&e$A.setParentMatrix(e$I.resultMatrix);var e$$,e$p,e$M,e$T,e$r={},e$S=this._templet.deformAniArr;if(e$S&&0<e$S.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,e$J=0,e$w=this._boneSlotArray.length;e$J<e$w;e$J++)(e$A=this._boneSlotArray[e$J]).deformData=null;var e$j,e$C=e$S[this._aniClipIndex];for(e$j in e$$=e$C.default,this._setDeform(e$$,e$r,this._boneSlotArray,e$k),e$C)"default"!=e$j&&e$j!=this._skinName&&(e$$=e$C[e$j],this._setDeform(e$$,e$r,this._boneSlotArray,e$k));e$$=e$C[this._skinName],this._setDeform(e$$,e$r,this._boneSlotArray,e$k)}if(this._drawOrder)for(e$J=0,e$w=this._drawOrder.length;e$J<e$w;e$J++)e$p=e$e[(e$A=this._boneSlotArray[this._drawOrder[e$J]]).name],e$M=e$g[e$A.name],isNaN(e$M)||(e$l.save(),e$l.alpha(e$M)),isNaN(e$p)||-2==e$p||(this._templet.attachmentNames?e$A.showDisplayByName(this._templet.attachmentNames[e$p]):e$A.showDisplayByIndex(e$p)),e$r[this._drawOrder[e$J]]?(e$T=e$r[this._drawOrder[e$J]],e$A.currDisplayData&&e$T[e$A.currDisplayData.attachmentName]?e$A.deformData=e$T[e$A.currDisplayData.attachmentName]:e$A.deformData=null):e$A.deformData=null,isNaN(e$M)?e$A.draw(e$l,this._boneMatrixArray,2==this._aniMode):e$A.draw(e$l,this._boneMatrixArray,2==this._aniMode,e$M),isNaN(e$M)||e$l.restore();else for(e$J=0,e$w=this._boneSlotArray.length;e$J<e$w;e$J++)e$p=e$e[(e$A=this._boneSlotArray[e$J]).name],e$M=e$g[e$A.name],isNaN(e$M)||(e$l.save(),e$l.alpha(e$M)),isNaN(e$p)||-2==e$p||(this._templet.attachmentNames?e$A.showDisplayByName(this._templet.attachmentNames[e$p]):e$A.showDisplayByIndex(e$p)),e$r[e$J]?(e$T=e$r[e$J],e$A.currDisplayData&&e$T[e$A.currDisplayData.attachmentName]?e$A.deformData=e$T[e$A.currDisplayData.attachmentName]:e$A.deformData=null):e$A.deformData=null,isNaN(e$M)?e$A.draw(e$l,this._boneMatrixArray,2==this._aniMode):e$A.draw(e$l,this._boneMatrixArray,2==this._aniMode,e$M),isNaN(e$M)||e$l.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,e$d,e$l):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,e$d,e$l)},e$d._setDeform=function(e$d,e$t,e$l,e$k){if(e$d){var e$W,e$i,e$A,e$B=0,e$o=0,e$I=0;if(e$d)for(e$B=0,e$o=e$d.deformSlotDataList.length;e$B<e$o;e$B++)for(e$W=e$d.deformSlotDataList[e$B],e$I=0;e$I<e$W.deformSlotDisplayList.length;e$I++)e$A=e$l[(e$i=e$W.deformSlotDisplayList[e$I]).slotIndex],e$i.apply(e$k,e$A),e$t[e$i.slotIndex]||(e$t[e$i.slotIndex]={}),e$t[e$i.slotIndex][e$i.attachment]=e$i.deformData}},e$d.getAnimNum=function(){return this._templet.getAnimationCount()},e$d.getAniNameByIndex=function(e$d){return this._templet.getAniNameByIndex(e$d)},e$d.getSlotByName=function(e$d){return this._boneSlotDic[e$d]},e$d.showSkinByName=function(e$d,e$t){void 0===e$t&&(e$t=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(e$d),e$t)},e$d.showSkinByIndex=function(e$d,e$t){void 0===e$t&&(e$t=!0);for(var e$l=0;e$l<this._boneSlotArray.length;e$l++)this._boneSlotArray[e$l].showSlotData(null,e$t);if(this._templet.showSkinByIndex(this._boneSlotDic,e$d,e$t)){var e$k=this._templet.skinDataArray[e$d];this._skinIndex=e$d,this._skinName=e$k.name}this._clearCache()},e$d.showSlotSkinByIndex=function(e$d,e$t){if(0!=this._aniMode){var e$l=this.getSlotByName(e$d);e$l&&e$l.showDisplayByIndex(e$t),this._clearCache()}},e$d.showSlotSkinByName=function(e$d,e$t){if(0!=this._aniMode){var e$l=this.getSlotByName(e$d);e$l&&e$l.showDisplayByName(e$t),this._clearCache()}},e$d.replaceSlotSkinName=function(e$d,e$t,e$l){if(0!=this._aniMode){var e$k=this.getSlotByName(e$d);e$k&&e$k.replaceDisplayByName(e$t,e$l),this._clearCache()}},e$d.replaceSlotSkinByIndex=function(e$d,e$t,e$l){if(0!=this._aniMode){var e$k=this.getSlotByName(e$d);e$k&&e$k.replaceDisplayByIndex(e$t,e$l),this._clearCache()}},e$d.setSlotSkin=function(e$d,e$t){if(0!=this._aniMode){var e$l=this.getSlotByName(e$d);e$l&&e$l.replaceSkin(e$t),this._clearCache()}},e$d._clearCache=function(){if(1==this._aniMode)for(var e$d=0,e$t=this._graphicsCache.length;e$d<e$t;e$d++){for(var e$l=0,e$k=this._graphicsCache[e$d].length;e$l<e$k;e$l++){var e$W=this._graphicsCache[e$d][e$l];e$W!=this.graphics&&e$K.recycle(e$W)}this._graphicsCache[e$d].length=0}},e$d.play=function(e$d,e$t,e$l,e$k,e$W,e$i){void 0===e$l&&(e$l=!0),void 0===e$k&&(e$k=0),void 0===e$W&&(e$W=0),void 0===e$i&&(e$i=!0),this._indexControl=!1;var e$A=-1,e$B=NaN;if(e$B=e$t?2147483647:0,"string"==typeof e$d)for(var e$o=0,e$I=this._templet.getAnimationCount();e$o<e$I;e$o++){var e$b=this._templet.getAnimation(e$o);if(e$b&&e$d==e$b.name){e$A=e$o;break}}else e$A=e$d;-1<e$A&&e$A<this.getAnimNum()&&(this._aniClipIndex=e$A,(e$l||this._pause||this._currAniIndex!=e$A)&&(this._currAniIndex=e$A,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(e$A)),this._drawOrder=null,this._eventIndex=0,this._player.play(e$A,this._player.playbackRate,e$B,e$k,e$W),e$i&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=e$f.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},e$d.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},e$d.playbackRate=function(e$d){this._player&&(this._player.playbackRate=e$d)},e$d.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},e$d.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=e$f.now(),this.timer.frameLoop(1,this,this._update,null,!0))},e$d._getGrahicsDataWithCache=function(e$d,e$t){return this._graphicsCache[e$d][e$t]},e$d._setGrahicsDataWithCache=function(e$d,e$t,e$l){this._graphicsCache[e$d][e$t]=e$l},e$d.destroy=function(e$d){void 0===e$d&&(e$d=!0),e$t.prototype.destroy.call(this,e$d),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},e$i(0,e$d,"url",function(){return this._aniPath},function(e$d){this.load(e$d)}),e$i(0,e$d,"index",function(){return this._index},function(e$d){this.player&&(this._index=e$d,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),e$i(0,e$d,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),e$i(0,e$d,"templet",function(){return this._templet}),e$i(0,e$d,"player",function(){return this._player}),e$l.useSimpleMeshInCanvas=!1,e$l}(e$id),e$M=function(e$t){function e$W(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,e$W.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}e$k(e$W,"laya.ani.bone.Templet",e$t);var e$d=e$W.prototype;return e$d.getLoadList=function(){return this._loadList},e$d.loadAni=function(e$d){this._skBufferUrl=e$d,e$Wd.loader.load(e$d,e$o.create(this,this.onComplete),null,"arraybuffer")},e$d.onComplete=function(e$d){if(this._isDestroyed)this.destroy();else{var e$t=e$I.getRes(this._skBufferUrl);e$t?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,e$t)):this.event("error","load failed:"+this._skBufferUrl)}},e$d.parseData=function(e$d,e$t,e$l){void 0===e$l&&(e$l=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=e$d,this._mainTexture&&e$D.isWebGL&&e$d.bitmap&&(e$d.bitmap.enableMerageInAtlas=!1),this._rate=e$l,this.parse(e$t)},e$d.buildArmature=function(e$d){return void 0===e$d&&(e$d=0),new e$p(this,e$d)},e$d.parse=function(e$d){e$t.prototype.parse.call(this,e$d),this._endLoaded(),this._aniVersion!=e$W.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+e$W.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},e$d._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var e$d=0;this._loadList=[];var e$t,e$l=new e$rd(this.getPublicExtData()),e$k=0,e$W=0,e$i=0,e$A=e$l.getInt32(),e$B=e$l.readUTFString(),e$o=e$B.split("\n");for(e$d=0;e$d<e$A;e$d++)e$t=this._path+e$o[2*e$d],e$B=e$o[2*e$d+1],e$l.getFloat32(),e$l.getFloat32(),e$k=e$l.getFloat32(),e$W=e$l.getFloat32(),e$i=e$l.getFloat32(),isNaN(e$i)?0:e$i,e$i=e$l.getFloat32(),isNaN(e$i)?0:e$i,e$i=e$l.getFloat32(),isNaN(e$i)?e$k:e$i,e$i=e$l.getFloat32(),isNaN(e$i)?e$W:e$i,-1==this._loadList.indexOf(e$t)&&this._loadList.push(e$t);this.event("inited",this)}},e$d._textureComplete=function(){for(var e$d,e$t,e$l=0,e$k=this._loadList.length;e$l<e$k;e$l++)e$t=this._loadList[e$l],e$d=this._textureDic[e$t]=e$I.getRes(e$t),e$D.isWebGL&&e$d&&e$d.bitmap&&(e$d.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},e$d._parsePublicExtData=function(){var e$d=0,e$t=0,e$l=0,e$k=0,e$W=0;for(e$d=0,e$W=this.getAnimationCount();e$d<e$W;e$d++)this._graphicsCache.push([]);var e$i;e$i="Dragon"!=this._aniClassName;var e$A,e$B,e$o=new e$rd(this.getPublicExtData()),e$I=0,e$b=0,e$f=0,e$J=0,e$c=0,e$Y=0,e$w=0,e$D=0,e$z=0,e$e=e$o.getInt32(),e$g=e$o.readUTFString(),e$H=e$g.split("\n");for(e$d=0;e$d<e$e;e$d++){if(e$A=this._mainTexture,e$B=this._path+e$H[2*e$d],e$g=e$H[2*e$d+1],null==this._mainTexture&&(e$A=this._textureDic[e$B]),!e$A)return this.event("error",this),void(this.isParseFail=!0);e$I=e$o.getFloat32(),e$b=e$o.getFloat32(),e$f=e$o.getFloat32(),e$J=e$o.getFloat32(),e$z=e$o.getFloat32(),e$c=isNaN(e$z)?0:e$z,e$z=e$o.getFloat32(),e$Y=isNaN(e$z)?0:e$z,e$z=e$o.getFloat32(),e$w=isNaN(e$z)?e$f:e$z,e$z=e$o.getFloat32(),e$D=isNaN(e$z)?e$J:e$z,this.subTextureDic[e$g]=e$jd.create(e$A,e$I,e$b,e$f,e$J,-e$c,-e$Y,e$w,e$D),e$A.alphaTexture&&(this.subTextureDic[e$g].alphaTexture=e$jd.create(e$A.alphaTexture,e$I,e$b,e$f,e$J,-e$c,-e$Y,e$w,e$D))}this._mainTexture=e$A;var e$R,e$G,e$q,e$L,e$$,e$p=e$o.getUint16();for(e$d=0;e$d<e$p;e$d++)(e$R=[]).push(e$o.getUint16()),e$R.push(e$o.getUint16()),e$R.push(e$o.getUint16()),e$R.push(e$o.getUint16()),this.aniSectionDic[e$d]=e$R;var e$M,e$T=e$o.getInt16(),e$r={};for(e$d=0;e$d<e$T;e$d++)e$G=new e$Cd,0==e$d?e$M=e$G:e$G.root=e$M,e$G.d=e$i?-1:1,e$L=e$o.readUTFString(),e$$=e$o.readUTFString(),e$G.length=e$o.getFloat32(),1==e$o.getByte()&&(e$G.inheritRotation=!1),1==e$o.getByte()&&(e$G.inheritScale=!1),e$G.name=e$L,e$$&&((e$q=e$r[e$$])?e$q.addChild(e$G):this.mRootBone=e$G),e$r[e$L]=e$G,this.mBoneArr.push(e$G);this.tMatrixDataLen=e$o.getUint16();var e$S,e$j,e$C=e$o.getUint16(),e$K=Math.floor(e$C/this.tMatrixDataLen),e$x=this.srcBoneMatrixArr;for(e$d=0;e$d<e$K;e$d++)(e$S=new e$sd).scX=e$o.getFloat32(),e$S.skX=e$o.getFloat32(),e$S.skY=e$o.getFloat32(),e$S.scY=e$o.getFloat32(),e$S.x=e$o.getFloat32(),e$S.y=e$o.getFloat32(),8===this.tMatrixDataLen&&(e$S.skewX=e$o.getFloat32(),e$S.skewY=e$o.getFloat32()),e$x.push(e$S),(e$G=this.mBoneArr[e$d]).transform=e$S;var e$n,e$Q=e$o.getUint16(),e$y=0;for(e$d=0;e$d<e$Q;e$d++){for(e$j=new e$Zd,e$y=e$o.getUint16(),e$t=0;e$t<e$y;e$t++)e$j.boneNames.push(e$o.readUTFString()),e$j.boneIndexs.push(e$o.getInt16());e$j.name=e$o.readUTFString(),e$j.targetBoneName=e$o.readUTFString(),e$j.targetBoneIndex=e$o.getInt16(),e$j.bendDirection=e$o.getFloat32(),e$j.mix=e$o.getFloat32(),e$j.isSpine=e$i,this.ikArr.push(e$j)}var e$V,e$Z=e$o.getUint16(),e$U=0;for(e$d=0;e$d<e$Z;e$d++){for(e$n=new e$hd,e$U=e$o.getUint16(),e$t=0;e$t<e$U;e$t++)e$n.boneIndexs.push(e$o.getInt16());e$n.name=e$o.getUTFString(),e$n.targetIndex=e$o.getInt16(),e$n.rotateMix=e$o.getFloat32(),e$n.translateMix=e$o.getFloat32(),e$n.scaleMix=e$o.getFloat32(),e$n.shearMix=e$o.getFloat32(),e$n.offsetRotation=e$o.getFloat32(),e$n.offsetX=e$o.getFloat32(),e$n.offsetY=e$o.getFloat32(),e$n.offsetScaleX=e$o.getFloat32(),e$n.offsetScaleY=e$o.getFloat32(),e$n.offsetShearY=e$o.getFloat32(),this.tfArr.push(e$n)}var e$E=e$o.getUint16(),e$N=0;for(e$d=0;e$d<e$E;e$d++){for((e$V=new e$Ud).name=e$o.readUTFString(),e$N=e$o.getUint16(),e$t=0;e$t<e$N;e$t++)e$V.bones.push(e$o.getInt16());e$V.target=e$o.readUTFString(),e$V.positionMode=e$o.readUTFString(),e$V.spacingMode=e$o.readUTFString(),e$V.rotateMode=e$o.readUTFString(),e$V.offsetRotation=e$o.getFloat32(),e$V.position=e$o.getFloat32(),e$V.spacing=e$o.getFloat32(),e$V.rotateMix=e$o.getFloat32(),e$V.translateMix=e$o.getFloat32(),this.pathArr.push(e$V)}var e$u,e$h,e$s,e$P,e$X,e$m=0,e$O=0,e$F=0,e$a=NaN,e$_=0,e$v=e$o.getInt16();for(e$d=0;e$d<e$v;e$d++){var e$dd=e$o.getUint8(),e$td={};this.deformAniArr.push(e$td);for(var e$ld=0;e$ld<e$dd;e$ld++)for((e$u=new e$xd).skinName=e$o.getUTFString(),e$td[e$u.skinName]=e$u,e$m=e$o.getInt16(),e$t=0;e$t<e$m;e$t++)for(e$h=new e$nd,e$u.deformSlotDataList.push(e$h),e$O=e$o.getInt16(),e$l=0;e$l<e$O;e$l++)for(e$s=new e$Qd,e$h.deformSlotDisplayList.push(e$s),e$s.slotIndex=e$o.getInt16(),e$s.attachment=e$o.getUTFString(),e$F=e$o.getInt16(),e$k=0;e$k<e$F;e$k++)for(1==e$o.getByte()?e$s.tweenKeyList.push(!0):e$s.tweenKeyList.push(!1),e$a=e$o.getFloat32(),e$s.timeList.push(e$a),e$P=[],e$s.vectices.push(e$P),e$_=e$o.getInt16(),e$W=0;e$W<e$_;e$W++)e$P.push(e$o.getFloat32())}var e$kd,e$Wd,e$id=e$o.getInt16(),e$Ad=0,e$Bd=0;for(e$d=0;e$d<e$id;e$d++){for(e$Ad=e$o.getInt16(),e$X=[],e$t=0;e$t<e$Ad;e$t++){for((e$kd=new e$yd).time=e$o.getFloat32(),e$Bd=e$o.getInt16(),e$l=0;e$l<e$Bd;e$l++)e$kd.drawOrder.push(e$o.getInt16());e$X.push(e$kd)}this.drawOrderAniArr.push(e$X)}var e$od,e$Id=e$o.getInt16(),e$bd=0;for(e$d=0;e$d<e$Id;e$d++){for(e$bd=e$o.getInt16(),e$Wd=[],e$t=0;e$t<e$bd;e$t++)(e$od=new e$Vd).name=e$o.getUTFString(),e$od.intValue=e$o.getInt32(),e$od.floatValue=e$o.getFloat32(),e$od.stringValue=e$o.getUTFString(),e$od.time=e$o.getFloat32(),e$Wd.push(e$od);this.eventAniArr.push(e$Wd)}var e$fd=e$o.getInt16();if(0<e$fd)for(this.attachmentNames=[],e$d=0;e$d<e$fd;e$d++)this.attachmentNames.push(e$o.getUTFString());var e$Jd,e$cd,e$Yd=e$o.getInt16();for(e$d=0;e$d<e$Yd;e$d++)(e$Jd=new e$Kd).name=e$o.readUTFString(),e$Jd.parent=e$o.readUTFString(),e$Jd.attachmentName=e$o.readUTFString(),e$Jd.srcDisplayIndex=e$Jd.displayIndex=e$o.getInt16(),(e$Jd.templet=this).boneSlotDic[e$Jd.name]=e$Jd,null==(e$cd=this.bindBoneBoneSlotDic[e$Jd.parent])&&(this.bindBoneBoneSlotDic[e$Jd.parent]=e$cd=[]),e$cd.push(e$Jd),this.boneSlotArray.push(e$Jd);var e$wd,e$Dd,e$zd,e$ed=e$o.readUTFString().split("\n"),e$gd=0,e$Hd=e$o.getUint8(),e$Rd=0,e$Gd=0,e$qd=0,e$Ld=0,e$$d=0,e$pd=0,e$Md=0;for(e$d=0;e$d<e$Hd;e$d++){for((e$wd=new e$Ed).name=e$ed[e$gd++],e$Rd=e$o.getUint8(),e$t=0;e$t<e$Rd;e$t++){for((e$Dd=new e$ud).name=e$ed[e$gd++],e$Jd=this.boneSlotDic[e$Dd.name],e$Gd=e$o.getUint8(),e$l=0;e$l<e$Gd;e$l++){if(e$zd=new e$Nd,this.skinSlotDisplayDataArr.push(e$zd),e$zd.name=e$ed[e$gd++],e$zd.attachmentName=e$ed[e$gd++],e$zd.transform=new e$sd,e$zd.transform.scX=e$o.getFloat32(),e$zd.transform.skX=e$o.getFloat32(),e$zd.transform.skY=e$o.getFloat32(),e$zd.transform.scY=e$o.getFloat32(),e$zd.transform.x=e$o.getFloat32(),e$zd.transform.y=e$o.getFloat32(),e$Dd.displayArr.push(e$zd),e$zd.width=e$o.getFloat32(),e$zd.height=e$o.getFloat32(),e$zd.type=e$o.getUint8(),e$zd.verLen=e$o.getUint16(),0<(e$T=e$o.getUint16()))for(e$zd.bones=[],e$k=0;e$k<e$T;e$k++){var e$Td=e$o.getUint16();e$zd.bones.push(e$Td)}if(0<(e$qd=e$o.getUint16()))for(e$zd.uvs=[],e$k=0;e$k<e$qd;e$k++)e$zd.uvs.push(e$o.getFloat32());if(0<(e$Ld=e$o.getUint16()))for(e$zd.weights=[],e$k=0;e$k<e$Ld;e$k++)e$zd.weights.push(e$o.getFloat32());if(0<(e$$d=e$o.getUint16()))for(e$zd.triangles=[],e$k=0;e$k<e$$d;e$k++)e$zd.triangles.push(e$o.getUint16());if(0<(e$pd=e$o.getUint16()))for(e$zd.vertices=[],e$k=0;e$k<e$pd;e$k++)e$zd.vertices.push(e$o.getFloat32());if(0<(e$Md=e$o.getUint16()))for(e$zd.lengths=[],e$k=0;e$k<e$Md;e$k++)e$zd.lengths.push(e$o.getFloat32())}e$wd.slotArr.push(e$Dd)}this.skinDic[e$wd.name]=e$wd,this.skinDataArray.push(e$wd)}1==e$o.getUint8()?(this.yReverseMatrix=new e$Sd(1,0,0,-1,0,0),e$M&&e$M.setTempMatrix(this.yReverseMatrix)):e$M&&e$M.setTempMatrix(new e$Sd),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},e$d.getTexture=function(e$d){var e$t=this.subTextureDic[e$d];return e$t||(e$t=this.subTextureDic[e$d.substr(0,e$d.length-1)]),null==e$t?this._mainTexture:e$t},e$d.showSkinByIndex=function(e$d,e$t,e$l){if(void 0===e$l&&(e$l=!0),e$t<0&&e$t>=this.skinDataArray.length)return!1;var e$k,e$W,e$i=0,e$A=0,e$B=this.skinDataArray[e$t];if(e$B){for(e$i=0,e$A=e$B.slotArr.length;e$i<e$A;e$i++)(e$W=e$B.slotArr[e$i])&&(e$k=e$d[e$W.name])&&(e$k.showSlotData(e$W,e$l),e$l&&"undefined"!=e$k.attachmentName&&"null"!=e$k.attachmentName?e$k.showDisplayByName(e$k.attachmentName):e$k.showDisplayByIndex(e$k.displayIndex));return!0}return!1},e$d.getSkinIndexByName=function(e$d){for(var e$t=0,e$l=this.skinDataArray.length;e$t<e$l;e$t++)if(this.skinDataArray[e$t].name==e$d)return e$t;return-1},e$d.getGrahicsDataWithCache=function(e$d,e$t){return this._graphicsCache[e$d][e$t]},e$d.setGrahicsDataWithCache=function(e$d,e$t,e$l){this._graphicsCache[e$d][e$t]=e$l},e$d.destroy=function(){var e$d;for(var e$t in this._isDestroyed=!0,this.subTextureDic)(e$d=this.subTextureDic[e$t])&&e$d.destroy();for(e$t in this._textureDic)(e$d=this._textureDic[e$t])&&e$d.destroy();for(var e$l=0,e$k=this.skinSlotDisplayDataArr.length;e$l<e$k;e$l++)this.skinSlotDisplayDataArr[e$l].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete e$W.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},e$d.getAniNameByIndex=function(e$d){var e$t=this.getAnimation(e$d);return e$t?e$t.name:null},e$i(0,e$d,"rate",function(){return this._rate},function(e$d){this._rate=e$d}),e$W.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",e$W.TEMPLET_DICTIONARY=null,e$W}(e$x)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(e$d,e$t){"use strict";for(var e$l in Object.defineProperty(e$t,"__esModule",{value:!0}),Laya){var e$k=Laya[e$l];e$k&&e$k.__isclass&&(e$t[e$l]=e$k)}});