var b=wx.$e;var SDKyyw=require(b[70020]);var config={game_id:b[70021],game_pkg:b[70022],partner_id:b[70023],game_ver:b[70024],is_auth:!1,partner_app_id:b[70025],partner_app_key:b[70026],tmpId:{1:b[70027],2:b[70028],3:b[70029]}};window.config=config;var e1IU01G=e1I0G1U();var HOST=b[70030];var e1IU0G1=null;var e1I01GU=null;var e1I01UG=null;var partner_user_info=null;var partner_swtich_info=null;var h5BindTelephoneOn=0;function e1I0G1U(){var a={};return{order_data:{},init:function(e,t){e=e&&e.game_ver?e.game_ver:0;console.log(b[70031]);var n=this;var r;r=wx.getStorageSync(b[70032])?0:(r=n.uuid(16,32),wx.setStorageSync(b[70032],r),1),wx.getStorageSync(b[70033])||(o=n.uuid(16,32),wx.setStorageSync(b[70033],o));var o=wx.getLaunchOptionsSync();var a=o.scene||"";r&&o.query&&o.query.ad_code&&wx.setStorageSync(b[70034],o.query.ad_code),n.log(b[40302],{install:r,scene:a}),wx.showShareMenu();n=o.query&&o.query.invite?o.query.invite:"";o=o.query&&o.query.invite_type?o.query.invite_type:"";n&&(e1I01GU={invite:n,invite_type:o,is_new:r,scene:a}),e&&this.checkGameVersion(e,function(e){t&&t(e)})},login:function(e,t){console.log(b[70035]);var n=this;a[b[70036]]=typeof t==b[70037]?t:null,SDKyyw.initLoginCallback=e=>{if(console.log(b[70038]+JSON.stringify(e)),0==e.status)return console.log(b[70039]),void t(1,{errMsg:b[70040]});partner_swtich_info={showSwitchOn:e.data.showSwitchOn,switchApp:e.data.switchApp,switchContent:e.data.switchContent,h5BindTelephoneOn:e.data.h5BindTelephoneOn.on},h5BindTelephoneOn=e.data.h5BindTelephoneOn.on||0,partner_user_info=e.data,n.do_login(partner_user_info)},SDKyyw.init(config.partner_app_id,config.partner_app_key)},do_login:function(e){var n=this;var t=n.getPublicData();if(t[b[70041]]=e?e.nick_name:"",t[b[70042]]=e?e.head_img:"",e1I01GU&&typeof e1I01GU==b[40297])for(var r in e1I01GU)t[r]=e1I01GU[r];t[b[70043]]=e.uid,wx.request({url:b[66400]+HOST+b[70044],method:b[70045],dataType:b[46192],header:{"content-type":b[70046]},data:t,success:function(e){if(console.log(b[70047]+JSON.stringify(e)),200==e.statusCode){e=e.data;if(e.state){var t={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};try{wx.setStorageSync(b[70048],e.data.sdk_token),wx.setStorageSync(b[70049],e.data.user_id),wx.setStorageSync(b[70050],e.data.username),e.data.ext&&wx.setStorageSync(b[70051],e.data.ext)}catch(e){}a[b[70036]]&&a[b[70036]](0,t)}else a[b[70036]]&&a[b[70036]](1,{errMsg:e.msg});n.getShareInfo(b[70052],function(e){console.log(b[70053]),wx.onShareAppMessage(function(){return n.logStartShare(b[70052]),{title:e.title,imageUrl:e.img,query:e.query}})})}else a[b[70036]]&&a[b[70036]](1,{errMsg:b[70054]})}})},share:function(e){a[b[70055]]=typeof callback==b[70037]?callback:null;var t=e.type||b[70055];console.log(b[70056]+t);var n=this;this.getShareInfo(t,function(e){n.logStartShare(t),wx.shareAppMessage({title:e.title,imageUrl:e.img,query:e.query})})},logStartShare:function(e){var t=wx.getStorageSync(b[70048]);wx.request({url:b[66400]+HOST+b[70057],method:b[70045],dataType:b[46192],header:{"content-type":b[70046]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,server_id:e1IU0G1?e1IU0G1.server_id:"",role_id:e1IU0G1?e1IU0G1.role_id:"",type:e},success:function(e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(e,n){console.log(b[70058]);wx.getStorageSync(b[70048]);wx.request({url:b[66400]+HOST+b[70059],method:b[70045],dataType:b[46192],header:{"content-type":b[70046]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var t;console.log(b[70060]),console.log(e),200==e.statusCode&&(t=e.data).state?n&&n(t.data):n&&n({develop:0})}})},getShareInfo:function(e,t){console.log(b[70061]);var n=wx.getStorageSync(b[70048]);wx.request({url:b[66400]+HOST+b[70062],method:b[70045],dataType:b[46192],header:{"content-type":b[70046]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:n,type:e,server_id:e1IU0G1?e1IU0G1.server_id:"",role_id:e1IU0G1?e1IU0G1.role_id:"",no_log:1},success:function(e){console.log(b[70063]),console.log(e),200==e.statusCode?(e=e.data).state?t&&t(e.data):a[b[70055]]&&a[b[70055]](1,{errMsg:b[70064]+e.msg}):a[b[70055]]&&a[b[70055]](1,{errMsg:b[70065]})}})},switchEnv:function(e){e(partner_swtich_info)},switchGame:function(t){SDKyyw.cutGameCallback=e=>{t(e)},1==partner_swtich_info.showSwitchOn?SDKyyw.cutGame():t({status:0,msg:b[70066]})},updateShare:function(e,t,n,r,o,a){console.log(b[70067]);var i=wx.getStorageSync(b[70048]);wx.request({url:b[66400]+HOST+b[70068],method:b[70045],dataType:b[46192],header:{"content-type":b[70046]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:t,is_new:n,role_id:r,sever_id:o,scene:a},success:function(e){console.log(b[70069]),console.log(e)}})},pay:function(e,t){var n=this;wx.checkSession({success:function(){n.startPay(e,t)},fail:function(){console.log(b[70070]),n.login({},function(){n.startPay(e,t)})}})},startPay:function(e,t){console.log(b[70071]),console.log(e);var n=this;a[b[70072]]=typeof t==b[70037]?t:null;t=wx.getStorageSync(b[70048]);var r=wx.getStorageSync(b[70051]);var o;t||r?(o=wx.getSystemInfoSync(),e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:t,session_key:r,platform:o.platform},n.order_data=e,(t=n.getPublicData())[b[70074]]=JSON.stringify(e),wx.request({url:b[66400]+HOST+b[70075],method:b[70045],dataType:b[46192],header:{"content-type":b[70046]},data:t,success:function(t){if(console.log(b[70076]+JSON.stringify(t)),200==t.statusCode){t=t.data;if(t.state)if(""==t.data.ext){SDKyyw.onPayCallback=e=>{};let e={};e.serverId=t.data.pay_data.serverId,e.serverName=t.data.pay_data.serverName,e.roleId=t.data.pay_data.roleId,e.roleName=t.data.pay_data.roleName,e.roleLevel=t.data.pay_data.roleLevel,e.gameOrderid=t.data.pay_data.orderId,e.pext=t.data.pay_data.orderId,e.money=t.data.pay_data.amount,e.productName=t.data.pay_data.productName,e.productId=t.data.pay_data.productId,console.log(b[70077]+JSON.stringify(e)),SDKyyw.pay(e)}else n.extDo({ext1:t.data.ext,ext2:t.data.pay_data});else a[b[70072]]&&a[b[70072]](1,{errMsg:t.msg})}else a[b[70036]]&&a[b[70036]](1,{errMsg:b[70054]})}})):a[b[70072]]&&a[b[70072]](1,{errMsg:b[70073]})},extDo:function(e){wx.navigateToMiniProgram({appId:e.ext1,path:b[70078]+e.ext2.orderId+b[70079]+e.ext2.amount,extraData:{},envVersion:b[70080],success(e){}})},logCreateRole:function(e){var t=wx.getStorageSync(b[70049]);var n=wx.getStorageSync(b[70050]);var r={};r[b[70081]]=t,r[b[70082]]=n,r[b[51263]]=e.roleid,r[b[70083]]=e.rolelevel,r[b[70084]]=e.rolename,r[b[51940]]=e.serverid,e.roleid&&e.serverid&&(e1IU0G1={role_id:e.roleid,server_id:e.serverid}),this.log(b[40006],r);let o={};o.type=2,o.roleId=e.roleid,o.roleName=e.rolename,o.serverId=e.serverid,SDKyyw.pushData(o)},logEnterGame:function(e){var t=wx.getStorageSync(b[70049]);var n=wx.getStorageSync(b[70050]);var r={};r[b[70081]]=t,r[b[70082]]=n,r[b[51263]]=e.roleid,r[b[70083]]=e.rolelevel,r[b[70084]]=e.rolename,r[b[51940]]=e.serverid,e.roleid&&e.serverid&&(e1IU0G1={role_id:e.roleid,server_id:e.serverid}),this.log(b[46074],r),e1I01GU&&this.updateShare(e1I01GU.invite,e1I01GU.invite_type,e1I01GU.is_new,e.roleid,e.serverid,e1I01GU.scene);let o={};o.type=1,o.roleId=e.roleid,o.roleName=e.rolename,o.serverId=e.serverid,SDKyyw.pushData(o);let a={};a.type=5,a.roleId=e.roleid,a.roleName=e.rolename,a.serverId=e.serverid,SDKyyw.pushData(a)},logRoleUpLevel:function(e){var t=wx.getStorageSync(b[70049]);var n=wx.getStorageSync(b[70050]);var r={};r[b[70081]]=t,r[b[70082]]=n,r[b[51263]]=e.roleid,r[b[70083]]=e.rolelevel,r[b[70084]]=e.rolename,r[b[51940]]=e.serverid,e.roleid&&e.serverid&&(e1IU0G1={role_id:e.roleid,server_id:e.serverid}),this.log(b[70085],r);let o={};o.type=4,o.roleId=e.roleid,o.roleName=e.rolename,o.serverId=e.serverid,o.level=e.rolelevel,SDKyyw.pushData(o)},uuid:function(e,t){var n=b[70086].split("");var r,o=[];var a;if(e=e||n.length,t)for(r=0;r<t;r++)o[r]=n[0|Math.random()*e];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(a=0|16*Math.random(),o[r]=n[19==r?3&a|8:a]);return o.join("")},getPublicData:function(){var e=wx.getSystemInfoSync();var t=wx.getStorageSync(b[70032]);var n=wx.getStorageSync(b[70033]);var r=wx.getStorageSync(b[70034]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,is_from_min:1,ad_code:r,uuid:t,idfv:n,dname:e.model,mac:b[70087],net_type:0==e.wifiSignal?"4G":b[70088],os_ver:e.system,sdk_ver:e.version,game_ver:config.game_ver,device:e.platform==b[70089]?1:2}},log:function(e,t){var n=this.getPublicData();for(var r in t)n[r]=t[r];console.log(b[70090]+e),console.log(n),wx.request({url:b[66400]+HOST+b[70091]+e+b[70092]+encodeURIComponent(JSON.stringify(n))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()},getLaunchOptionsSync:function(e){var t=SDKyyw.getLaunchOptionsSync();e(t),console.log(b[70093]+JSON.stringify(t))},msgCheck:function(e,n){SDKyyw.msgSecCheck(e,function(e){console.log(b[70094]+JSON.stringify(e));let t={data:{}};0==e.errcode?(t.statusCode=200,t.data.state=1):(t.statusCode=200,t.data.state=0),n&&n(t)})},sendCode:function(e,t){console.log(b[70095],e.phone),SDKyyw.getCaptchaCallback=e=>{console.log(e),1==e.status?t&&t(0,e):t&&t(1,e)},SDKyyw.getCaptcha({telephone:e.phone})},bindPhone:function(e,t){console.log(b[70096],e.phone,e.code),SDKyyw.bindTelephoneCallback=e=>{console.log(b[70097],e),1==e.status?t&&t(0,e):t&&t(1,e)},SDKyyw.bindTelephone({telephone:e.phone,captcha:e.code})},weiduanHelper:function(e,t){console.log(b[70098],h5BindTelephoneOn),1==h5BindTelephoneOn?SDKyyw.openCustomerService(b[70099]):t&&t({status:0,msg:b[70066]})},subscribeMessage:function(e,t){console.log(b[70100]+e),a[b[70101]]=typeof t==b[70037]?t:null,wx.requestSubscribeMessage({tmplIds:e,success(e){console.log(b[70102]),console.log(e),a[b[70101]]&&a[b[70101]](e)},fail(e){console.log(b[70103]),console.log(e),a[b[70101]]&&a[b[70101]](e)}})}}}function run(e,t,n){e in e1IU01G&&e1IU01G[e](t,n)}exports.init=function(e,t){run(b[40392],e,t)},exports.login=function(e){run(b[70036],"",e)},exports.login=function(e){run(b[70036],"",e)},exports.pay=function(e,t){run(b[70072],e,t)},exports.openService=function(){run(b[64471])},exports.logCreateRole=function(e,t,n,r,o){run(b[70104],{serverid:e,servername:t,roleid:n,rolename:r,rolelevel:o})},exports.logEnterGame=function(e,t,n,r,o){run(b[70105],{serverid:e,servername:t,roleid:n,rolename:r,rolelevel:o})},exports.logRoleUpLevel=function(e,t,n,r,o){run(b[70106],{serverid:e,servername:t,roleid:n,rolename:r,rolelevel:o})},exports.share=function(e){run(b[70055],{type:e})},exports.downloadClient=function(){run(b[70107])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getLaunchOptionsSync=function(e){run(b[70108],e)},exports.msgCheck=function(e,t){run(b[52646],e,t)},exports.switchEnv=function(e){run(b[70109],e)},exports.switchGame=function(e){run(b[70110],e)},exports.weiduanHelper=function(e,t){run(b[64361],e,t)},exports.sendCode=function(e,t){run(b[70111],e,t)},exports.bindPhone=function(e,t){run(b[52070],e,t)},exports.subscribeMessage=function(e,t){run(b[70101],e,t)};