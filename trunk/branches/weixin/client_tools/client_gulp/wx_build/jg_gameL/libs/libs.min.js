var Laya=window.Laya=function(L$j,L$a){var L$k={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(L$a,L$b){return 1==arguments.length?L$k.__presubstr.call(this,L$a):L$k.__presubstr.call(this,L$a,0<L$b?L$b:this.length+L$b)},__init:function(L$a){L$a.forEach(function(L$a){L$a.__init$&&L$a.__init$()})},__isClass:function(L$a){return L$a&&(L$a.__isclass||L$a==Object||L$a==String||L$a==Array)},__newvec:function(L$a,L$b){var L$c=[];L$c.length=L$a;for(var L$d=0;L$d<L$a;L$d++)L$c[L$d]=L$b;return L$c},__extend:function(L$a,L$b){for(var L$c in L$b)if(L$b.hasOwnProperty(L$c)){var L$d=Object.getOwnPropertyDescriptor(L$b,L$c),L$e=L$d.get,L$f=L$d.set;L$e||L$f?L$e&&L$f?Object.defineProperty(L$a,L$c,L$d):(L$e&&Object.defineProperty(L$a,L$c,L$e),L$f&&Object.defineProperty(L$a,L$c,L$f)):L$a[L$c]=L$b[L$c]}function L$g(){L$k.un(this,"constructor",L$a)}L$g.prototype=L$b.prototype,L$a.prototype=new L$g,L$k.un(L$a.prototype,"__imps",L$k.__copy({},L$b.prototype.__imps))},__copy:function(L$a,L$b){if(!L$b)return null;for(var L$c in L$a=L$a||{},L$b)L$a[L$c]=L$b[L$c];return L$a},__package:function(L$a,L$b){if(!L$k.__packages[L$a]){L$k.__packages[L$a]=!0;var L$c=L$j,L$d=L$a.split(".");if(1<L$d.length)for(var L$e=0,L$f=L$d.length-1;L$e<L$f;L$e++){var L$g=L$c[L$d[L$e]];L$c=L$g||(L$c[L$d[L$e]]={})}L$c[L$d[L$d.length-1]]||(L$c[L$d[L$d.length-1]]=L$b||{})}},__hasOwnProperty:function(L$a,L$b){return L$b=L$b||this,Object.hasOwnProperty.call(L$b,L$a)||function L$a(L$b,L$c){if(Object.hasOwnProperty.call(L$c.prototype,L$b))return!0;var L$d=L$c.prototype.__super;return null==L$d?null:L$a(L$b,L$d)}(L$a,L$b.__class)},__typeof:function(L$a,L$b){if(!L$a||!L$b)return!1;if(L$b===String)return"string"==typeof L$a;if(L$b===Number)return"number"==typeof L$a;if(L$b.__interface__)L$b=L$b.__interface__;else if("string"!=typeof L$b)return L$a instanceof L$b;return L$a.__imps&&L$a.__imps[L$b]||L$a.__class==L$b},__as:function(L$a,L$b){return this.__typeof(L$a,L$b)?L$a:null},__int:function(L$a){return L$a?parseInt(L$a):0},interface:function(L$a,L$b){L$k.__package(L$a,{});var L$c=L$k.__internals,L$d=L$c[L$a]=L$c[L$a]||{self:L$a};if(L$b){var L$e=L$b.split(",");L$d.extend=[];for(var L$f=0;L$f<L$e.length;L$f++){var L$g=L$e[L$f];L$c[L$g]=L$c[L$g]||{self:L$g},L$d.extend.push(L$c[L$g])}}var L$h=L$j,L$i=L$a.split(".");for(L$f=0;L$f<L$i.length-1;L$f++)L$h=L$h[L$i[L$f]];L$h[L$i[L$i.length-1]]={__interface__:L$a}},class:function(L$a,L$b,L$c,L$d){if(L$c&&L$k.__extend(L$a,L$c),L$b)if(L$k.__package(L$b,L$a),L$k.__classmap[L$b]=L$a,0<L$b.indexOf(".")){if(0==L$b.indexOf("laya.")){var L$e=L$b.split(".");L$d=L$d||L$e[L$e.length-1],L$k[L$d]&&console.log("Warning!,this class["+L$d+"] already exist:",L$k[L$d]),L$k[L$d]=L$a}}else"Main"==L$b?L$j.Main=L$a:"MainWX"==L$b?L$j.MainWX=L$a:(L$k[L$b]&&console.log("Error!,this class["+L$b+"] already exist:",L$k[L$b]),L$k[L$b]=L$a);var L$f=L$k.un,L$g=L$a.prototype;L$f(L$g,"hasOwnProperty",L$k.__hasOwnProperty),L$f(L$g,"__class",L$a),L$f(L$g,"__super",L$c),L$f(L$g,"__className",L$b),L$f(L$a,"__super",L$c),L$f(L$a,"__className",L$b),L$f(L$a,"__isclass",!0),L$f(L$a,"super",function(L$a){this.__super.call(L$a)})},imps:function(L$a,L$b){if(!L$b)return null;var L$e=L$a.__imps||L$k.un(L$a,"__imps",{});function L$f(L$a){var L$b,L$c;if((L$b=L$k.__internals[L$a])&&(L$e[L$a]=!0,L$c=L$b.extend))for(var L$d=0;L$d<L$c.length;L$d++)L$f(L$c[L$d].self)}for(var L$c in L$b)L$f(L$c)},superSet:function(L$a,L$b,L$c,L$d){var L$e=L$a.prototype["_$set_"+L$c];L$e&&L$e.call(L$b,L$d)},superGet:function(L$a,L$b,L$c){var L$d=L$a.prototype["_$get_"+L$c];return L$d?L$d.call(L$b):null},getset:function(L$a,L$b,L$c,L$d,L$e){L$a?(L$d&&(L$b["_$GET_"+L$c]=L$d),L$e&&(L$b["_$SET_"+L$c]=L$e)):(L$d&&L$k.un(L$b,"_$get_"+L$c,L$d),L$e&&L$k.un(L$b,"_$set_"+L$c,L$e)),L$d&&L$e?Object.defineProperty(L$b,L$c,{get:L$d,set:L$e,enumerable:!1,configurable:!0}):(L$d&&Object.defineProperty(L$b,L$c,{get:L$d,enumerable:!1,configurable:!0}),L$e&&Object.defineProperty(L$b,L$c,{set:L$e,enumerable:!1,configurable:!0}))},static:function(L$c,L$d){for(var L$e=0,L$a=L$d.length;L$e<L$a;L$e+=2)if("length"==L$d[L$e])L$c.length=L$d[L$e+1].call(L$c);else{function L$b(){var L$b=L$d[L$e],L$a=L$d[L$e+1];Object.defineProperty(L$c,L$b,{get:function(){return delete this[L$b],this[L$b]=L$a.call(this)},set:function(L$a){delete this[L$b],this[L$b]=L$a},enumerable:!0,configurable:!0})}L$b()}},un:function(L$a,L$b,L$c){return L$c||(L$c=L$a[L$b]),L$k.__propun.value=L$c,Object.defineProperty(L$a,L$b,L$k.__propun),L$c},uns:function(L$b,L$a){L$a.forEach(function(L$a){L$k.un(L$b,L$a)})}};return L$j.console=L$j.console||{log:function(){}},L$j.trace=L$j.console.log,Error.prototype.throwError=function(){throw arguments},Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),L$k}(window,document);!function(L$a,L$b,L$c){L$c.un,L$c.uns,L$c.static,L$c.class,L$c.getset,L$c.__newvec}(window,document,Laya),function(L$g,L$b,L$z){L$z.un,L$z.uns;var L$i=L$z.static,L$k=L$z.class,L$o=L$z.getset;L$z.__newvec;L$z.interface("laya.runtime.IMarket"),L$z.interface("laya.filters.IFilter"),L$z.interface("laya.display.ILayout"),L$z.interface("laya.resource.IDispose"),L$z.interface("laya.runtime.IPlatform"),L$z.interface("laya.resource.IDestroy"),L$z.interface("laya.runtime.IConchNode"),L$z.interface("laya.filters.IFilterAction"),L$z.interface("laya.runtime.ICPlatformClass"),L$z.interface("laya.resource.ICreateResource"),L$z.interface("laya.runtime.IConchRenderObject"),L$z.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var L$F=function(){function L$f(){}return L$k(L$f,"laya.utils.RunDriver"),L$f.FILTER_ACTIONS=[],L$f.pixelRatio=-1,L$f._charSizeTestDiv=null,L$f.now=function(){return Date.now()},L$f.getWindow=function(){return L$g},L$f.getPixelRatio=function(){if(L$f.pixelRatio<0){var L$a=L$O.context,L$b=L$a.backingStorePixelRatio||L$a.webkitBackingStorePixelRatio||L$a.mozBackingStorePixelRatio||L$a.msBackingStorePixelRatio||L$a.oBackingStorePixelRatio||L$a.backingStorePixelRatio||1;(L$f.pixelRatio=(L$O.window.devicePixelRatio||1)/L$b)<1&&(L$f.pixelRatio=1)}return L$f.pixelRatio},L$f.getIncludeStr=function(L$a){return null},L$f.createShaderCondition=function(L$a){var L$b="(function() {return "+L$a+";})";return L$z._runScript(L$b)},L$f.fontMap=[],L$f.measureText=function(L$a,L$b){var L$c=L$f.hanzi.test(L$a);if(L$c&&L$f.fontMap[L$b])return L$f.fontMap[L$b];var L$d=L$O.context;L$d.font=L$b;var L$e=L$d.measureText(L$a);return L$e||(L$e={width:16,height:16}),L$c&&(L$f.fontMap[L$b]=L$e),L$e},L$f.getWebGLContext=function(L$a){},L$f.beginFlush=function(){},L$f.endFinish=function(){},L$f.addToAtlas=null,L$f.flashFlushImage=function(L$a){},L$f.drawToCanvas=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$ta.create("2D"),L$h=new L$K(L$c,L$d,L$g);return L$L.renders[L$b]._fun(L$a,L$h,L$e,L$f),L$g},L$f.createParticleTemplate2D=null,L$f.createGLTextur=null,L$f.createWebGLContext2D=null,L$f.changeWebGLSize=function(L$a,L$b){},L$f.createRenderSprite=function(L$a,L$b){return new L$L(L$a,L$b)},L$f.createFilterAction=function(L$a){return new L$t},L$f.createGraphics=function(){return new L$m},L$f.clear=function(L$a){L$J._context.ctx.clear()},L$f.cancelLoadByUrl=function(L$a){},L$f.clearAtlas=function(L$a){},L$f.isAtlas=function(L$a){return!1},L$f.addTextureToAtlas=function(L$a){},L$f.getTexturePixels=function(L$a,L$b,L$c,L$d,L$e){return null},L$f.skinAniSprite=function(){return null},L$f.update3DLoop=function(){},L$i(L$f,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),L$f}(),L$d=(L$o(1,L$z,"alertGlobalError",null,function(L$a){var L$f=0;L$O.window.onerror=L$a?function(L$a,L$b,L$c,L$d,L$e){L$f++<5&&L$e&&alert(L$e.stack||L$e)}:null}),L$z.init=function(L$a,L$b,L$c){for(var L$d=[],L$e=2,L$f=arguments.length;L$e<L$f;L$e++)L$d.push(arguments[L$e]);if(!L$z._isinit){ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=L$z._arrayBufferSlice),L$z._isinit=!0,L$O.__init__(),L$M.__init__(),L$m.__init__(),L$z.timer=new L$Y,L$z.scaleTimer=new L$Y,L$z.loader=new L$ia,L$w.__init__(),L$e=0;for(var L$g=L$d.length;L$e<L$g;L$e++)L$d[L$e].enable&&L$d[L$e].enable();return L$n.__init__(),L$h.__init__(),L$N.__init__(),L$Q.beginCheck(),L$z._currentStage=L$z.stage=new L$ra,L$z.stage.conchModel&&L$z.stage.conchModel.setRootNode(),L$z._getUrlPath(),L$z.render=new L$J(0,0),L$z.stage.size(L$a,L$b),L$L.__init__(),L$l.__init__(),L$p.instance.__init__(L$z.stage,L$J.canvas),L$va.__init__(),L$E.autoStopMusic=!0,L$C.__init__(),L$J.canvas}},L$z._getUrlPath=function(){var L$a=L$O.window.location,L$b=L$a.pathname;L$b=L$b&&":"==L$b.charAt(2)?L$b.substring(1):L$b,L$I.rootPath=L$I.basePath=L$I.getPath("file:"==L$a.protocol?L$b:L$a.protocol+"//"+L$a.host+L$a.pathname)},L$z._arrayBufferSlice=function(L$a,L$b){var L$c=new Uint8Array(this,L$a,L$b-L$a),L$d=new Uint8Array(L$c.length);return L$d.set(L$c),L$d.buffer},L$z._runScript=function(L$a){return L$O.window[L$z._evcode](L$a)},L$z.stage=null,L$z.timer=null,L$z.scaleTimer=null,L$z.loader=null,L$z.version="1.8.6",L$z.render=null,L$z._currentStage=null,L$z._isinit=!1,L$z.isDebug=!1,L$z.MiniAdpter={init:function(){L$g.navigator&&L$g.navigator.userAgent&&-1<L$g.navigator.userAgent.indexOf("MiniGame")&&console.error("请先引用小游戏适配库laya.wxmini.js,详细教程：https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0")}},L$i(L$z,["conchMarket",function(){return this.conchMarket=L$g.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=L$g.PlatformClass},"_evcode",function(){return this._evcode="e"+String.fromCharCode(118)+"al"}]),function(){function L$a(){}return L$k(L$a,"Config"),L$a.WebGLTextCacheCount=500,L$a.atlasEnable=!1,L$a.showCanvasMark=!1,L$a.animationInterval=50,L$a.isAntialias=!1,L$a.isAlpha=!1,L$a.premultipliedAlpha=!0,L$a.isStencil=!0,L$a.preserveDrawingBuffer=!1,L$a}()),L$j=function(){function L$j(){this._events=null}L$k(L$j,"laya.events.EventDispatcher");var L$a=L$j.prototype;return L$a.hasListener=function(L$a){return!!(this._events&&this._events[L$a])},L$a.getListener=function(L$a){return this._events?this._events[L$a]:null},L$a.event=function(L$a,L$b){if(!this._events||!this._events[L$a])return!1;var L$c=this._events[L$a];if(L$c.lock)L$c.queue||(L$c.queue=[]),L$c.queue.push(L$b);else{var L$d;for(L$c.lock=!0,L$c.cursor=L$c.head;L$c.cursor;)(L$d=L$c.cursor).recover?(L$c.head=L$c.tail=L$c.cursor=null,console.error("node is recover："+L$d.id)):(L$c.cursor=L$d.next,L$d.once&&L$j.delNode(L$c,L$d),L$d.method&&(null!=L$b?L$d.args?L$d.method.apply(L$d.caller,L$d.args.concat(L$b)):L$b instanceof Array?L$d.method.apply(L$d.caller,L$b):L$d.caller?L$d.method.call(L$d.caller,L$b):L$z.recordError("事件派发错误","node.caller:"+L$d.caller+"node.method:"+L$d.method+"data:"+L$b+"node.prev"+L$d.prev):L$d.method.apply(L$d.caller,L$d.args)),L$d.once&&L$j.recoverHandler(L$d));L$c.lock=!1,!L$c.head&&this._events&&this._events[L$a]==L$c&&delete this._events[L$a],L$c.queue&&L$c.queue.length&&this.event(L$a,L$c.queue.shift())}return!0},L$a.on=function(L$a,L$b,L$c,L$d){return this._createListener(L$a,L$b,L$c,L$d,!1)},L$a.once=function(L$a,L$b,L$c,L$d){return this._createListener(L$a,L$b,L$c,L$d,!0)},L$a._createListener=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$f&&(L$f=!0),L$f&&this.off(L$a,L$b,L$c,L$e);var L$g=L$j.createHandler(L$b||this,L$c,L$d,L$e);this._events||(this._events={});var L$h=this._events,L$i=L$h[L$a];return L$i?L$i.tail?(L$g.prev=L$i.tail,L$i.tail.next=L$g,L$i.tail=L$g):L$i.head=L$i.tail=L$g:L$h[L$a]={head:L$g,tail:L$g,cursor:null,lock:!1},this},L$a.off=function(L$a,L$b,L$c,L$d){if(void 0===L$d&&(L$d=!1),!this._events||!this._events[L$a])return this;for(var L$e=this._events[L$a],L$f=L$e.head;L$f;){if((!L$b||L$f.caller===L$b)&&L$f.method===L$c&&(!L$d||L$f.once)){L$j.delNode(L$e,L$f),L$e.cursor==L$f&&(L$e.cursor=L$f.next),L$j.recoverHandler(L$f);break}L$f=L$f.next}return this},L$a.offAll=function(L$a){var L$b=this._events;if(!L$b)return this;if(L$a)this._recoverHandlers(L$b[L$a]),delete L$b[L$a];else{for(var L$c in L$b)this._recoverHandlers(L$b[L$c]);this._events=null}return this},L$a._recoverHandlers=function(L$a){if(L$a){for(var L$b=L$a.head;L$b;){L$j.delNode(L$a,L$b);var L$c=L$b.next;L$j.recoverHandler(L$b),L$b=L$c}L$a.cursor=null}},L$a.isMouseEvent=function(L$a){return L$j.MOUSE_EVENTS[L$a]},L$j.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},L$j.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0})},L$j.delNode=function(L$a,L$b){L$b.prev?L$b.prev.next=L$b.next:L$a.head=L$b.next,L$b.next?L$b.next.prev=L$b.prev:L$a.tail=L$b.prev},L$j.createHandler=function(L$a,L$b,L$c,L$d){var L$e=500<L$j._freeHandler.length?L$j._freeHandler.shift():null;if(L$e)if(L$e.recover)L$e.recover=!1,L$e.caller=L$a,L$e.method=L$b,L$e.args=L$c,L$e.once=L$d;else{var L$f="";try{arguments.propertyIsEnumerable.caller}catch(L$a){L$f=L$a.stack}var L$g=L$e.caller?(L$e.caller.__proto__&&L$e.caller.__proto__.constructor&&L$e.caller.__proto__.constructor.name)+"|"+L$e.caller.__className+"|"+L$e.caller.name:"",L$h=L$e.method?L$e.method.name:"";L$z.recordError("EventDispatcher重复创建","caller="+L$g+"  method="+L$h+"  stack="+L$f),L$e={id:++L$j._nodeCount,caller:L$a,method:L$b,args:L$c,once:L$d,recover:!1}}else L$e={id:++L$j._nodeCount,caller:L$a,method:L$b,args:L$c,once:L$d,recover:!1};return L$e.prev=L$e.next=null,L$e},L$j.recoverHandler=function(L$a){if(L$a.recover){if(L$j._errorCount<5){L$j._errorCount++;var L$b="";try{arguments.propertyIsEnumerable.caller}catch(L$a){L$b=L$a.stack}var L$c=L$a.caller?(L$a.caller.__proto__&&L$a.caller.__proto__.constructor&&L$a.caller.__proto__.constructor.name)+"|"+L$a.caller.__className+"|"+L$a.caller.name:"",L$d=L$a.method?L$a.method.name:"";L$z.recordError("EventDispatcher重复回收","id="+L$a.id+"  caller="+L$c+"  method="+L$d+"  stack="+L$b)}L$a.caller=L$a.method=L$a.args=L$a.prev=null}else L$a.recover=!0,L$a.caller=L$a.method=L$a.args=L$a.prev=L$a.next=null,L$j._freeHandler&&L$j._freeHandler.length<3e3&&L$j._freeHandler.push(L$a)},L$j._freeHandler=[],L$j._nodeCount=0,L$j._errorCount=0,L$j}(),L$s=function(){function L$e(L$a,L$b,L$c,L$d){this.once=!1,void(this._id=0)===L$d&&(L$d=!1),this.setTo(L$a,L$b,L$c,L$d)}L$k(L$e,"laya.utils.Handler");var L$a=L$e.prototype;return L$a.setTo=function(L$a,L$b,L$c,L$d){return this._id=L$e._gid++,this.caller=L$a,this.method=L$b,this.args=L$c,this.once=L$d,this},L$a.run=function(){if(null==this.method)return null;var L$a=this._id,L$b=this.method.apply(this.caller,this.args);return this._id===L$a&&this.once&&this.recover(),L$b},L$a.runWith=function(L$a){if(null==this.method)return null;var L$b=this._id;if(null==L$a)var L$c=this.method.apply(this.caller,this.args);else L$c=this.args||L$a.unshift?this.args?this.method.apply(this.caller,this.args.concat(L$a)):this.method.apply(this.caller,L$a):this.method.call(this.caller,L$a);return this._id===L$b&&this.once&&this.recover(),L$c},L$a.clear=function(){return this.caller=null,this.method=null,this.args=null,this},L$a.recover=function(){0<this._id&&(this._id=0,this.clear())},L$e.create=function(L$a,L$b,L$c,L$d){return void 0===L$d&&(L$d=!0),new L$e(L$a,L$b,L$c,L$d)},L$e._gid=1,L$e}(),L$D=function(){function L$a(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}L$k(L$a,"laya.display.BitmapFont");var L$b=L$a.prototype;return L$b.loadFont=function(L$a,L$b){this._path=L$a,this._complete=L$b,L$z.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],L$s.create(this,this.onLoaded))},L$b.onLoaded=function(){this.parseFont(L$ha.getRes(this._path),L$ha.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.runWith(this._texture?this:null)},L$b.parseFont=function(L$a,L$b){if(null!=L$a&&null!=L$b){this._texture=L$b;var L$c=L$a.getElementsByTagName("info");if(!L$c[0].getAttributeNode)return this.parseFont2(L$a,L$b);this.fontSize=parseInt(L$c[0].getAttributeNode("size").nodeValue);var L$d,L$e=L$c[0].getAttributeNode("padding").nodeValue.split(",");this._padding=[parseInt(L$e[0]),parseInt(L$e[1]),parseInt(L$e[2]),parseInt(L$e[3])],L$d=L$a.getElementsByTagName("char");var L$f=0;for(L$f=0;L$f<L$d.length;L$f++){var L$g=L$d[L$f],L$h=parseInt(L$g.getAttributeNode("id").nodeValue),L$i=parseInt(L$g.getAttributeNode("xoffset").nodeValue)/1,L$j=parseInt(L$g.getAttributeNode("yoffset").nodeValue)/1,L$k=parseInt(L$g.getAttributeNode("xadvance").nodeValue)/1,L$l=new L$B;L$l.x=parseInt(L$g.getAttributeNode("x").nodeValue),L$l.y=parseInt(L$g.getAttributeNode("y").nodeValue),L$l.width=parseInt(L$g.getAttributeNode("width").nodeValue),L$l.height=parseInt(L$g.getAttributeNode("height").nodeValue);var L$m=L$ka.create(L$b,L$l.x,L$l.y,L$l.width,L$l.height,L$i,L$j);this._maxWidth=Math.max(this._maxWidth,L$k+this.letterSpacing),this._fontCharDic[L$h]=L$m,this._fontWidthMap[L$h]=L$k}}},L$b.parseFont2=function(L$a,L$b){if(null!=L$a&&null!=L$b){this._texture=L$b;var L$c=L$a.getElementsByTagName("info");this.fontSize=parseInt(L$c[0].attributes.size.nodeValue);var L$d=L$c[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(L$d[0]),parseInt(L$d[1]),parseInt(L$d[2]),parseInt(L$d[3])];var L$e=L$a.getElementsByTagName("char"),L$f=0;for(L$f=0;L$f<L$e.length;L$f++){var L$g=L$e[L$f].attributes,L$h=parseInt(L$g.id.nodeValue),L$i=parseInt(L$g.xoffset.nodeValue)/1,L$j=parseInt(L$g.yoffset.nodeValue)/1,L$k=parseInt(L$g.xadvance.nodeValue)/1,L$l=new L$B;L$l.x=parseInt(L$g.x.nodeValue),L$l.y=parseInt(L$g.y.nodeValue),L$l.width=parseInt(L$g.width.nodeValue),L$l.height=parseInt(L$g.height.nodeValue);var L$m=L$ka.create(L$b,L$l.x,L$l.y,L$l.width,L$l.height,L$i,L$j);this._maxWidth=Math.max(this._maxWidth,L$k+this.letterSpacing),this._fontCharDic[L$h]=L$m,this._fontWidthMap[L$h]=L$k}}},L$b.getCharTexture=function(L$a){return this._fontCharDic[L$a.charCodeAt(0)]},L$b.destroy=function(){if(this._texture){for(var L$a in this._fontCharDic){var L$b=this._fontCharDic[L$a];L$b&&L$b.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},L$b.setSpaceWidth=function(L$a){this._spaceWidth=L$a},L$b.getCharWidth=function(L$a){var L$b=L$a.charCodeAt(0);return this._fontWidthMap[L$b]?this._fontWidthMap[L$b]+this.letterSpacing:" "==L$a?this._spaceWidth+this.letterSpacing:0},L$b.getTextWidth=function(L$a){for(var L$b=0,L$c=0,L$d=L$a.length;L$c<L$d;L$c++)L$b+=this.getCharWidth(L$a.charAt(L$c));return L$b},L$b.getMaxWidth=function(){return this._maxWidth},L$b.getMaxHeight=function(){return this.fontSize},L$b.drawText=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g,L$h=this.getTextWidth(L$a),L$i=0;"center"===L$e&&(L$i=(L$f-L$h)/2),"right"===L$e&&(L$i=L$f-L$h);for(var L$j=0,L$k=0,L$l=L$a.length;L$k<L$l;L$k++)(L$g=this.getCharTexture(L$a.charAt(L$k)))&&(L$b.graphics.drawTexture(L$g,L$c+L$j+L$i,L$d),L$j+=this.getCharWidth(L$a.charAt(L$k)))},L$a}(),L$h=function(){function L$c(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=L$c._TF_EMPTY}L$k(L$c,"laya.display.css.Style");var L$a=L$c.prototype;return L$a.getTransform=function(){return this._tf},L$a.setTransform=function(L$a){this._tf="none"!==L$a&&L$a?L$a:L$c._TF_EMPTY},L$a.setTranslateX=function(L$a){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.translateX=L$a},L$a.setTranslateY=function(L$a){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.translateY=L$a},L$a.setScaleX=function(L$a){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.scaleX=L$a},L$a.setScale=function(L$a,L$b){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.scaleX=L$a,this._tf.scaleY=L$b},L$a.setScaleY=function(L$a){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.scaleY=L$a},L$a.setRotate=function(L$a){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.rotate=L$a},L$a.setSkewX=function(L$a){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.skewX=L$a},L$a.setSkewY=function(L$a){this._tf===L$c._TF_EMPTY&&(this._tf=new L$e),this._tf.skewY=L$a},L$a.destroy=function(){this.scrollRect=null},L$a.render=function(L$a,L$b,L$c,L$d){},L$a.getCSSStyle=function(){return L$ba.EMPTY},L$a._enableLayout=function(){return!1},L$o(0,L$a,"scaleX",function(){return this._tf.scaleX},function(L$a){this.setScaleX(L$a)}),L$o(0,L$a,"transform",function(){return this.getTransform()},function(L$a){this.setTransform(L$a)}),L$o(0,L$a,"translateX",function(){return this._tf.translateX},function(L$a){this.setTranslateX(L$a)}),L$o(0,L$a,"translateY",function(){return this._tf.translateY},function(L$a){this.setTranslateY(L$a)}),L$o(0,L$a,"scaleY",function(){return this._tf.scaleY},function(L$a){this.setScaleY(L$a)}),L$o(0,L$a,"block",function(){return 0!=(1&this._type)}),L$o(0,L$a,"skewY",function(){return this._tf.skewY},function(L$a){this.setSkewY(L$a)}),L$o(0,L$a,"rotate",function(){return this._tf.rotate},function(L$a){this.setRotate(L$a)}),L$o(0,L$a,"skewX",function(){return this._tf.skewX},function(L$a){this.setSkewX(L$a)}),L$o(0,L$a,"paddingLeft",function(){return 0}),L$o(0,L$a,"paddingTop",function(){return 0}),L$o(0,L$a,"absolute",function(){return!0}),L$c.__init__=function(){L$c._TF_EMPTY=new L$e,L$c.EMPTY=new L$c},L$c.EMPTY=null,L$c._TF_EMPTY=null,L$c}(),L$n=function(){function L$b(L$a){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=L$S.create(L$b.defaultColor),this.family=L$b.defaultFamily,this.stroke=L$b._STROKE,this.size=L$b.defaultSize,L$a&&L$a!==L$b.EMPTY&&L$a.copyTo(this)}L$k(L$b,"laya.display.css.Font");var L$a=L$b.prototype;return L$a.set=function(L$a){this._text=null;for(var L$b=L$a.split(" "),L$c=0,L$d=L$b.length;L$c<L$d;L$c++){var L$e=L$b[L$c];switch(L$e){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}0<L$e.indexOf("px")&&(this.size=parseInt(L$e),this.family=L$b[L$c+1],L$c++)}},L$a.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},L$a.copyTo=function(L$a){L$a._type=this._type,L$a._text=this._text,L$a._weight=this._weight,L$a._color=this._color,L$a.family=this.family,L$a.stroke=this.stroke!=L$b._STROKE?this.stroke.slice():L$b._STROKE,L$a.indent=this.indent,L$a.size=this.size},L$o(0,L$a,"password",function(){return 0!=(1024&this._type)},function(L$a){L$a?this._type|=1024:this._type&=-1025}),L$o(0,L$a,"color",function(){return this._color.strColor},function(L$a){this._color=L$S.create(L$a)}),L$o(0,L$a,"italic",function(){return 0!=(512&this._type)},function(L$a){L$a?this._type|=512:this._type&=-513}),L$o(0,L$a,"bold",function(){return 0!=(2048&this._type)},function(L$a){L$a?this._type|=2048:this._type&=-2049}),L$o(0,L$a,"weight",function(){return""+this._weight},function(L$a){var L$b=0;switch(L$a){case"normal":break;case"bold":this.bold=!0,L$b=700;break;case"bolder":L$b=800;break;case"lighter":L$b=100;break;default:L$b=parseInt(L$a)}this._weight=L$b,this._text=null}),L$o(0,L$a,"decoration",function(){return this._decoration?this._decoration.value:null},function(L$a){var L$b=L$a.split(" ");switch(this._decoration||(this._decoration={}),L$b[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=L$b[0]}L$b[1]&&(this._decoration.color=L$S.create(L$b)),this._decoration.value=L$a}),L$b.__init__=function(){L$b.EMPTY=new L$b(null)},L$b.EMPTY=null,L$b.defaultColor="#000000",L$b.defaultSize=12,L$b.defaultFamily="Arial",L$b.defaultFont="12px Arial",L$b._STROKE=[0,"#000000"],L$b._ITALIC=512,L$b._PASSWORD=1024,L$b._BOLD=2048,L$b}(),L$e=function(){function L$a(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return L$k(L$a,"laya.display.css.TransformInfo"),L$a}(),L$m=function(){function L$l(){if(this._one=null,this._cmds=null,this._render=this._renderEmpty,L$J.isConchNode){this._nativeObj=new L$g._conchGraphics,this.id=this._nativeObj.conchID}}L$k(L$l,"laya.display.Graphics");var L$a=L$l.prototype;return L$a.destroy=function(){this.clear(),this._graphicBounds&&this._graphicBounds.destroy(),this._graphicBounds=null,this._vectorgraphArray=null,this._sp&&(this._sp._renderType=0),this._sp=null},L$a.clear=function(L$a){void 0===L$a&&(L$a=!1);var L$b=0,L$c=0;if(L$a){var L$d=this._one;if(this._cmds){for(L$c=this._cmds.length,L$b=0;L$b<L$c;L$b++)!(L$d=this._cmds[L$b])||L$d.callee!==L$J._context._drawTexture&&L$d.callee!==L$J._context._drawTextureWithTransform||(L$d[0]=null,L$l._cache.push(L$d));this._cmds.length=0}else L$d&&(!L$d||L$d.callee!==L$J._context._drawTexture&&L$d.callee!==L$J._context._drawTextureWithTransform||(L$d[0]=null,L$l._cache.push(L$d)))}else this._cmds=null;if(this._one=null,this._render=this._renderEmpty,this._sp&&(this._sp._renderType&=-514),this._repaint(),this._vectorgraphArray){for(L$b=0,L$c=this._vectorgraphArray.length;L$b<L$c;L$b++)L$_.getInstance().deleteShape(this._vectorgraphArray[L$b]);this._vectorgraphArray.length=0}},L$a._clearBoundsCache=function(){this._graphicBounds&&this._graphicBounds.reset()},L$a._initGraphicBounds=function(){this._graphicBounds||(this._graphicBounds=new L$c,this._graphicBounds._graphics=this)},L$a._repaint=function(){this._clearBoundsCache(),this._sp&&this._sp.repaint()},L$a._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},L$a.getBounds=function(L$a){return void 0===L$a&&(L$a=!1),this._initGraphicBounds(),this._graphicBounds.getBounds(L$a)},L$a.getBoundPoints=function(L$a){return void 0===L$a&&(L$a=!1),this._initGraphicBounds(),this._graphicBounds.getBoundPoints(L$a)},L$a._addCmd=function(L$a){this._cmds=this._cmds||[],L$a.callee=L$a.shift(),this._cmds.push(L$a)},L$a.setFilters=function(L$a){this._saveToCmd(L$J._context._setFilters,L$a)},L$a.drawTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){if(void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),void 0===L$g&&(L$g=1),!L$a||L$g<.01)return null;L$d||(L$d=L$a.sourceWidth),L$e||(L$e=L$a.sourceHeight),L$g=L$g<0?0:1<L$g?1:L$g;var L$h,L$i=!L$J.isWebGL&&(L$O.onFirefox||L$O.onEdge||L$O.onIE||L$O.onSafari)?.5:0,L$j=L$d/L$a.sourceWidth,L$k=L$e/L$a.sourceHeight;return L$d=L$a.width*L$j,L$e=L$a.height*L$k,L$a.loaded&&(L$d<=0||L$e<=0)?null:(L$b+=L$a.offsetX*L$j,L$c+=L$a.offsetY*L$k,this._sp&&(this._sp._renderType|=512),L$b-=L$i,L$c-=L$i,L$d+=2*L$i,L$e+=2*L$i,L$l._cache.length?((L$h=L$l._cache.pop())[0]=L$a,L$h[1]=L$b,L$h[2]=L$c,L$h[3]=L$d,L$h[4]=L$e,L$h[5]=L$f,L$h[6]=L$g):L$h=[L$a,L$b,L$c,L$d,L$e,L$f,L$g],L$h.callee=L$f||1!=L$g?L$J._context._drawTextureWithTransform:L$J._context._drawTexture,null!=this._one||L$f||1!=L$g?this._saveToCmd(L$h.callee,L$h):(this._one=L$h,this._render=this._renderOneImg),L$a.loaded||L$a.once("loaded",this,this._textureLoaded,[L$a,L$h]),this._repaint(),L$h)},L$a.cleanByTexture=function(L$a,L$b,L$c,L$d,L$e){if(void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),!L$a)return this.clear();if(this._one&&this._render===this._renderOneImg){L$d||(L$d=L$a.sourceWidth),L$e||(L$e=L$a.sourceHeight);var L$f=L$d/L$a.sourceWidth,L$g=L$e/L$a.sourceHeight;L$d=L$a.width*L$f,L$e=L$a.height*L$g,L$b+=L$a.offsetX*L$f,L$c+=L$a.offsetY*L$g,this._one[0]=L$a,this._one[1]=L$b,this._one[2]=L$c,this._one[3]=L$d,this._one[4]=L$e,this._repaint()}else this.clear(),L$a&&this.drawTexture(L$a,L$b,L$c,L$d,L$e)},L$a.drawTextures=function(L$a,L$b){L$a&&this._saveToCmd(L$J._context._drawTextures,[L$a,L$b])},L$a.fillTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){if(void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),void 0===L$f&&(L$f="repeat"),L$a){var L$h=[L$a,L$b,L$c,L$d,L$e,L$f,L$g||L$A.EMPTY,{}];L$a.loaded||L$a.once("loaded",this,this._textureLoaded,[L$a,L$h]),this._saveToCmd(L$J._context._fillTexture,L$h)}},L$a._textureLoaded=function(L$a,L$b){L$b[3]=L$b[3]||L$a.width,L$b[4]=L$b[4]||L$a.height,this._repaint()},L$a.fillCircle=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$c.bitmap.enableMerageInAtlas=!1;var L$h=new Float32Array(2*(L$g+1)),L$i=new Float32Array(2*(L$g+1)),L$j=new Uint16Array(3*L$g),L$k=2*Math.PI/L$g,L$l=0;L$h[0]=L$d,L$h[1]=L$e,L$i[0]=L$d/L$c.width,L$i[1]=L$e/L$c.height;for(var L$m=2,L$n=0;L$n<L$g;L$n++){var L$o=L$f*Math.cos(L$l)+L$d,L$p=L$f*Math.sin(L$l)+L$e;L$h[L$m]=L$o,L$h[L$m+1]=L$p,L$i[L$m]=L$o/L$c.width,L$i[L$m+1]=L$p/L$c.height,L$l+=L$k,L$m+=2}for(L$n=L$m=0;L$n<L$g;L$n++)L$j[L$m++]=0,L$j[L$m++]=L$n+1,L$j[L$m++]=L$g+1<=L$n+2?1:L$n+2;this.drawTriangles(L$c,L$a,L$b,L$h,L$i,L$j)},L$a.drawTriangles=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){void 0===L$h&&(L$h=1),this._saveToCmd(L$J._context.drawTriangles,[L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j])},L$a._saveToCmd=function(L$a,L$b){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=L$b,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(L$b)),L$b.callee=L$a,this._repaint(),L$b},L$a.clipRect=function(L$a,L$b,L$c,L$d){this._saveToCmd(L$J._context._clipRect,[L$a,L$b,L$c,L$d])},L$a.fillText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){void 0===L$g&&(L$g=0),this._saveToCmd(L$J._context._fillText,[L$a,L$b,L$c,L$d||L$n.defaultFont,L$e,L$f])},L$a.fillBorderText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){this._saveToCmd(L$J._context._fillBorderText,[L$a,L$b,L$c,L$d||L$n.defaultFont,L$e,L$f,L$g,L$h])},L$a.strokeText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._saveToCmd(L$J._context._strokeText,[L$a,L$b,L$c,L$d||L$n.defaultFont,L$e,L$f,L$g])},L$a.alpha=function(L$a){L$a=L$a<0?0:1<L$a?1:L$a,this._saveToCmd(L$J._context._alpha,[L$a])},L$a.setAlpha=function(L$a){L$a=L$a<0?0:1<L$a?1:L$a,this._saveToCmd(L$J._context._setAlpha,[L$a])},L$a.transform=function(L$a,L$b,L$c){void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),this._saveToCmd(L$J._context._transform,[L$a,L$b,L$c])},L$a.rotate=function(L$a,L$b,L$c){void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),this._saveToCmd(L$J._context._rotate,[L$a,L$b,L$c])},L$a.scale=function(L$a,L$b,L$c,L$d){void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0),this._saveToCmd(L$J._context._scale,[L$a,L$b,L$c,L$d])},L$a.translate=function(L$a,L$b){this._saveToCmd(L$J._context._translate,[L$a,L$b])},L$a.save=function(){this._saveToCmd(L$J._context._save,[])},L$a.restore=function(){this._saveToCmd(L$J._context._restore,[])},L$a.replaceText=function(L$a){this._repaint();var L$b=this._cmds;if(L$b){for(var L$c=L$b.length-1;-1<L$c;L$c--)if(this._isTextCmd(L$b[L$c].callee))return L$b[L$c][0].toUpperCase?L$b[L$c][0]=L$a:L$b[L$c][0].setText(L$a),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=L$a:this._one[0].setText(L$a),!0;return!1},L$a._isTextCmd=function(L$a){return L$a===L$J._context._fillText||L$a===L$J._context._fillBorderText||L$a===L$J._context._strokeText},L$a.replaceTextColor=function(L$a){this._repaint();var L$b=this._cmds;if(L$b)for(var L$c=L$b.length-1;-1<L$c;L$c--)this._isTextCmd(L$b[L$c].callee)&&(L$b[L$c][4]=L$a,L$b[L$c][0].toUpperCase||(L$b[L$c][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=L$a,this._one[0].toUpperCase||(this._one[0].changed=!0))},L$a.loadImage=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=this;void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0);var L$h=L$ha.getRes(L$a);function L$i(L$a){L$a&&(L$g.drawTexture(L$a,L$b,L$c,L$d,L$e),null!=L$f&&L$f.call(L$g._sp,L$a))}L$h?L$i(L$h):L$z.loader.load(L$a,L$s.create(null,L$i),null,"image")},L$a._renderEmpty=function(L$a,L$b,L$c,L$d){},L$a._renderAll=function(L$a,L$b,L$c,L$d){for(var L$e,L$f=this._cmds,L$g=0,L$h=L$f.length;L$g<L$h;L$g++)(L$e=L$f[L$g]).callee.call(L$b,L$c,L$d,L$e)},L$a._renderOne=function(L$a,L$b,L$c,L$d){this._one.callee.call(L$b,L$c,L$d,this._one)},L$a._renderOneImg=function(L$a,L$b,L$c,L$d){this._one.callee.call(L$b,L$c,L$d,this._one),2305!==L$a._renderType&&(L$a._renderType|=1)},L$a.drawLine=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$f&&(L$f=1);var L$g=0;L$J.isWebGL&&(L$g=L$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(L$g));var L$h=L$f%2==0?0:.5,L$i=[L$a+L$h,L$b+L$h,L$c+L$h,L$d+L$h,L$e,L$f,L$g];this._saveToCmd(L$J._context._drawLine,L$i)},L$a.drawLines=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=1);var L$f=0;if(L$c&&!(L$c.length<4)){L$J.isWebGL&&(L$f=L$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(L$f));var L$g=L$e%2==0?0:.5,L$h=[L$a+L$g,L$b+L$g,L$c,L$d,L$e,L$f];this._saveToCmd(L$J._context._drawLines,L$h)}},L$a.drawCurves=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=1);var L$f=[L$a,L$b,L$c,L$d,L$e];this._saveToCmd(L$J._context._drawCurves,L$f)},L$a.drawRect=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){void 0===L$g&&(L$g=1);var L$h=L$f?L$g/2:0,L$i=L$f?L$g:0,L$j=[L$a+L$h,L$b+L$h,L$c-L$i,L$d-L$i,L$e,L$f,L$g];this._saveToCmd(L$J._context._drawRect,L$j)},L$a.drawCircle=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$f&&(L$f=1);var L$g=L$e?L$f/2:0,L$h=0;L$J.isWebGL&&(L$h=L$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(L$h));var L$i=[L$a,L$b,L$c-L$g,L$d,L$e,L$f,L$h];this._saveToCmd(L$J._context._drawCircle,L$i)},L$a.drawPie=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){void 0===L$h&&(L$h=1);var L$i=L$g?L$h/2:0,L$j=L$g?L$h:0,L$k=0;L$J.isWebGL&&(L$k=L$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(L$k));var L$l=[L$a+L$i,L$b+L$i,L$c-L$j,L$d,L$e,L$f,L$g,L$h,L$k];L$l[3]=L$$.toRadian(L$d),L$l[4]=L$$.toRadian(L$e),this._saveToCmd(L$J._context._drawPie,L$l)},L$a.drawPoly=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$f&&(L$f=1);var L$g=0,L$h=!1;L$J.isWebGL&&(L$g=L$_.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(L$g),L$h=!(6<L$c.length));var L$i=L$e?L$f%2==0?0:.5:0,L$j=[L$a+L$i,L$b+L$i,L$c,L$d,L$e,L$f,L$g,L$h];this._saveToCmd(L$J._context._drawPoly,L$j)},L$a.drawPath=function(L$a,L$b,L$c,L$d,L$e){var L$f=[L$a,L$b,L$c,L$d,L$e];this._saveToCmd(L$J._context._drawPath,L$f)},L$o(0,L$a,"cmds",function(){return this._cmds},function(L$a){this._sp&&(this._sp._renderType|=512),this._cmds=L$a,this._render=this._renderAll,this._repaint()}),L$l.__init__=function(){if(L$J.isConchNode){for(var L$a=laya.display.Graphics.prototype,L$b=L$O.window.ConchGraphics.prototype,L$c=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],L$d=0,L$e=L$c.length;L$d<=L$e;L$d++){var L$f=L$c[L$d];L$a[L$f]=L$b[L$f]}L$a._saveToCmd=null,L$b.drawImageS&&(L$a.drawTextures=function(L$a,L$b){if(L$a&&L$a.loaded&&L$a.bitmap&&L$a.source){var L$c=L$a.uv,L$d=L$a.bitmap.width,L$e=L$a.bitmap.height;this.drawImageS(L$a.bitmap.source,L$c[0]*L$d,L$c[1]*L$e,(L$c[2]-L$c[0])*L$d,(L$c[5]-L$c[3])*L$e,L$a.offsetX,L$a.offsetY,L$a.width,L$a.height,L$b)}}),L$a.drawTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){if(void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),void 0===L$g&&(L$g=1),L$a)if(L$a.loaded){if(L$a.loaded&&L$a.bitmap&&L$a.source&&(L$d||(L$d=L$a.sourceWidth),L$e||(L$e=L$a.sourceHeight),L$g=L$g<0?0:1<L$g?1:L$g,L$d=L$d-L$a.sourceWidth+L$a.width,L$e=L$e-L$a.sourceHeight+L$a.height,!(L$d<=0||L$e<=0))){L$b+=L$a.offsetX,L$c+=L$a.offsetY;var L$h=L$a.uv,L$i=L$a.bitmap.width,L$j=L$a.bitmap.height;L$h[4]<L$h[0]&&L$h[5]<L$h[1]?this.drawImageM(L$a.bitmap.source,L$h[4]*L$i,L$h[5]*L$j,(L$h[0]-L$h[4])*L$i,(L$h[1]-L$h[5])*L$j,L$b,L$c,L$d,L$e,L$f,L$g):this.drawImageM(L$a.bitmap.source,L$h[0]*L$i,L$h[1]*L$j,(L$h[2]-L$h[0])*L$i,(L$h[5]-L$h[3])*L$j,L$b,L$c,L$d,L$e,L$f,L$g),this._repaint()}}else L$a.once("loaded",this,function(){this.drawTexture(L$a,L$b,L$c,L$d,L$e,L$f)})},L$a.fillTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){if(void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),void 0===L$f&&(L$f="repeat"),L$a&&L$a.loaded){var L$h,L$i=L$J._context.ctx,L$j=L$a.bitmap.width,L$k=L$a.bitmap.height,L$l=L$a.uv;L$h=L$a.uv!=L$ka.DEF_UV?L$i.createPattern(L$a.bitmap.source,L$f,L$l[0]*L$j,L$l[1]*L$k,(L$l[2]-L$l[0])*L$j,(L$l[5]-L$l[3])*L$k):L$i.createPattern(L$a.bitmap.source,L$f);var L$m=0,L$n=0;L$g&&(L$b+=L$g.x%L$a.width,L$c+=L$g.y%L$a.height,L$m-=L$g.x%L$a.width,L$n-=L$g.y%L$a.height),this._fillImage(L$h,L$b,L$c,L$m,L$n,L$d,L$e)}}}},L$l._cache=[],L$l}(),L$c=function(){function L$t(){this._cacheBoundsType=!1}L$k(L$t,"laya.display.GraphicsBounds");var L$a=L$t.prototype;return L$a.destroy=function(){this._graphics=null,this._temp=null,this._rstBoundPoints=null,this._bounds=null},L$a.reset=function(){this._temp&&(this._temp.length=0)},L$a.getBounds=function(L$a){return void 0===L$a&&(L$a=!1),(!this._bounds||!this._temp||this._temp.length<1||L$a!=this._cacheBoundsType)&&(this._bounds=L$B._getWrapRec(this.getBoundPoints(L$a),this._bounds)),this._cacheBoundsType=L$a,this._bounds},L$a.getBoundPoints=function(L$a){return void 0===L$a&&(L$a=!1),(!this._temp||this._temp.length<1||L$a!=this._cacheBoundsType)&&(this._temp=this._getCmdPoints(L$a)),this._cacheBoundsType=L$a,this._rstBoundPoints=L$$.copyArray(this._rstBoundPoints,this._temp)},L$a._getCmdPoints=function(L$a){void 0===L$a&&(L$a=!1);var L$b,L$c,L$d=L$J._context,L$e=this._graphics.cmds;if((L$b=this._temp||(this._temp=[])).length=0,L$e||null==this._graphics._one||(L$t._tempCmds.length=0,L$t._tempCmds.push(this._graphics._one),L$e=L$t._tempCmds),!L$e)return L$b;(L$c=L$t._tempMatrixArrays).length=0;var L$f=L$t._initMatrix;L$f.identity();for(var L$g,L$h,L$i=L$t._tempMatrix,L$j=NaN,L$k=NaN,L$l=NaN,L$m=NaN,L$n=NaN,L$o=NaN,L$p=0,L$q=L$e.length;L$p<L$q;L$p++)if((L$g=L$e[L$p]).callee)switch(L$g.callee){case L$d._save:case 7:L$c.push(L$f),L$f=L$f.clone();break;case L$d._restore:case 8:L$f=L$c.pop();break;case L$d._scale:case 5:L$i.identity(),L$i.translate(-L$g[2],-L$g[3]),L$i.scale(L$g[0],L$g[1]),L$i.translate(L$g[2],L$g[3]),this._switchMatrix(L$f,L$i);break;case L$d._rotate:case 3:L$i.identity(),L$i.translate(-L$g[1],-L$g[2]),L$i.rotate(L$g[0]),L$i.translate(L$g[1],L$g[2]),this._switchMatrix(L$f,L$i);break;case L$d._translate:case 6:L$i.identity(),L$i.translate(L$g[0],L$g[1]),this._switchMatrix(L$f,L$i);break;case L$d._transform:case 4:L$i.identity(),L$i.translate(-L$g[1],-L$g[2]),L$i.concat(L$g[0]),L$i.translate(L$g[1],L$g[2]),this._switchMatrix(L$f,L$i);break;case 16:case 24:L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[0],L$g[1],L$g[2],L$g[3]),L$f);break;case 17:L$f.copyTo(L$i),L$i.concat(L$g[4]),L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[0],L$g[1],L$g[2],L$g[3]),L$i);break;case L$d._drawTexture:L$h=L$g[0],L$a?L$g[3]&&L$g[4]?L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1],L$g[2],L$g[3],L$g[4]),L$f):(L$h=L$g[0],L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1],L$g[2],L$h.width,L$h.height),L$f)):(L$j=(L$g[3]||L$h.sourceWidth)/L$h.width,L$k=(L$g[4]||L$h.sourceHeight)/L$h.height,L$l=L$j*L$h.sourceWidth,L$m=L$k*L$h.sourceHeight,L$n=0<L$h.offsetX?L$h.offsetX:0,L$o=0<L$h.offsetY?L$h.offsetY:0,L$n*=L$j,L$o*=L$k,L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1]-L$n,L$g[2]-L$o,L$l,L$m),L$f));break;case L$d._fillTexture:L$g[3]&&L$g[4]?L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1],L$g[2],L$g[3],L$g[4]),L$f):(L$h=L$g[0],L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1],L$g[2],L$h.width,L$h.height),L$f));break;case L$d._drawTextureWithTransform:var L$r;L$r=L$g[5]?(L$f.copyTo(L$i),L$i.concat(L$g[5]),L$i):L$f,L$a?L$g[3]&&L$g[4]?L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1],L$g[2],L$g[3],L$g[4]),L$r):(L$h=L$g[0],L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1],L$g[2],L$h.width,L$h.height),L$r)):(L$h=L$g[0],L$j=(L$g[3]||L$h.sourceWidth)/L$h.width,L$k=(L$g[4]||L$h.sourceHeight)/L$h.height,L$l=L$j*L$h.sourceWidth,L$m=L$k*L$h.sourceHeight,L$n=0<L$h.offsetX?L$h.offsetX:0,L$o=0<L$h.offsetY?L$h.offsetY:0,L$n*=L$j,L$o*=L$k,L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[1]-L$n,L$g[2]-L$o,L$l,L$m),L$r));break;case L$d._drawRect:case 13:L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[0],L$g[1],L$g[2],L$g[3]),L$f);break;case L$d._drawCircle:case L$d._fillCircle:case 14:L$t._addPointArrToRst(L$b,L$B._getBoundPointS(L$g[0]-L$g[2],L$g[1]-L$g[2],L$g[2]+L$g[2],L$g[2]+L$g[2]),L$f);break;case L$d._drawLine:case 20:L$t._tempPoints.length=0;var L$s;L$s=.5*L$g[5],L$g[0]==L$g[2]?L$t._tempPoints.push(L$g[0]+L$s,L$g[1],L$g[2]+L$s,L$g[3],L$g[0]-L$s,L$g[1],L$g[2]-L$s,L$g[3]):L$g[1]==L$g[3]?L$t._tempPoints.push(L$g[0],L$g[1]+L$s,L$g[2],L$g[3]+L$s,L$g[0],L$g[1]-L$s,L$g[2],L$g[3]-L$s):L$t._tempPoints.push(L$g[0],L$g[1],L$g[2],L$g[3]),L$t._addPointArrToRst(L$b,L$t._tempPoints,L$f);break;case L$d._drawCurves:case 22:L$t._addPointArrToRst(L$b,L$u.I.getBezierPoints(L$g[2]),L$f,L$g[0],L$g[1]);break;case L$d._drawPoly:case L$d._drawLines:case 18:L$t._addPointArrToRst(L$b,L$g[2],L$f,L$g[0],L$g[1]);break;case L$d._drawPath:case 19:L$t._addPointArrToRst(L$b,this._getPathPoints(L$g[2]),L$f,L$g[0],L$g[1]);break;case L$d._drawPie:case 15:L$t._addPointArrToRst(L$b,this._getPiePoints(L$g[0],L$g[1],L$g[2],L$g[3],L$g[4]),L$f)}return 200<L$b.length?L$b=L$$.copyArray(L$b,L$B._getWrapRec(L$b)._getBoundPoints()):8<L$b.length&&(L$b=L$v.scanPList(L$b)),L$b},L$a._switchMatrix=function(L$a,L$b){L$b.concat(L$a),L$b.copyTo(L$a)},L$a._getPiePoints=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$t._tempPoints;L$t._tempPoints.length=0,L$f.push(L$a,L$b);var L$g=(L$e-L$d)%(2*Math.PI)/10,L$h=NaN,L$i=L$d;for(L$h=0;L$h<=10;L$h++)L$f.push(L$a+L$c*Math.cos(L$i),L$b+L$c*Math.sin(L$i)),L$i+=L$g;return L$f},L$a._getPathPoints=function(L$a){var L$b,L$c,L$d=0,L$e=L$t._tempPoints;for(L$e.length=0,L$b=L$a.length,L$d=0;L$d<L$b;L$d++)1<(L$c=L$a[L$d]).length&&(L$e.push(L$c[1],L$c[2]),3<L$c.length&&L$e.push(L$c[3],L$c[4]));return L$e},L$t._addPointArrToRst=function(L$a,L$b,L$c,L$d,L$e){void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0);var L$f,L$g=0;for(L$f=L$b.length,L$g=0;L$g<L$f;L$g+=2)L$t._addPointToRst(L$a,L$b[L$g]+L$d,L$b[L$g+1]+L$e,L$c)},L$t._addPointToRst=function(L$a,L$b,L$c,L$d){var L$e=L$A.TEMP;L$e.setTo(L$b||0,L$c||0),L$d.transformPoint(L$e),L$a.push(L$e.x,L$e.y)},L$t._tempPoints=[],L$t._tempMatrixArrays=[],L$t._tempCmds=[],L$i(L$t,["_tempMatrix",function(){return this._tempMatrix=new L$G},"_initMatrix",function(){return this._initMatrix=new L$G}]),L$t}(),L$f=function(){function L$a(){}L$k(L$a,"laya.events.Event");var L$b=L$a.prototype;return L$b.setTo=function(L$a,L$b,L$c){return this.type=L$a,this.currentTarget=L$b,this.target=L$c,this},L$b.stopPropagation=function(){this._stoped=!0},L$o(0,L$b,"stageY",function(){return L$z.stage.mouseY}),L$o(0,L$b,"charCode",function(){return this.nativeEvent.charCode}),L$o(0,L$b,"touches",function(){var L$a=this.nativeEvent.touches;if(L$a)for(var L$b=L$z.stage,L$c=0,L$d=L$a.length;L$c<L$d;L$c++){var L$e=L$a[L$c],L$f=L$A.TEMP;L$f.setTo(L$e.clientX,L$e.clientY),L$b._canvasTransform.invertTransformPoint(L$f),L$b.transform.invertTransformPoint(L$f),L$e.stageX=L$f.x,L$e.stageY=L$f.y}return L$a}),L$o(0,L$b,"keyLocation",function(){return this.nativeEvent.keyLocation}),L$o(0,L$b,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),L$o(0,L$b,"altKey",function(){return this.nativeEvent.altKey}),L$o(0,L$b,"shiftKey",function(){return this.nativeEvent.shiftKey}),L$o(0,L$b,"stageX",function(){return L$z.stage.mouseX}),L$a.EMPTY=new L$a,L$a.MOUSE_DOWN="mousedown",L$a.MOUSE_UP="mouseup",L$a.CLICK="click",L$a.RIGHT_MOUSE_DOWN="rightmousedown",L$a.RIGHT_MOUSE_UP="rightmouseup",L$a.RIGHT_CLICK="rightclick",L$a.MOUSE_MOVE="mousemove",L$a.MOUSE_OVER="mouseover",L$a.MOUSE_OUT="mouseout",L$a.MOUSE_WHEEL="mousewheel",L$a.ROLL_OVER="mouseover",L$a.ROLL_OUT="mouseout",L$a.DOUBLE_CLICK="doubleclick",L$a.CHANGE="change",L$a.CHANGED="changed",L$a.RESIZE="resize",L$a.ADDED="added",L$a.REMOVED="removed",L$a.DISPLAY="display",L$a.UNDISPLAY="undisplay",L$a.ERROR="error",L$a.COMPLETE="complete",L$a.LOADED="loaded",L$a.INITED="inited",L$a.PROGRESS="progress",L$a.INPUT="input",L$a.RENDER="render",L$a.OPEN="open",L$a.MESSAGE="message",L$a.CLOSE="close",L$a.KEY_DOWN="keydown",L$a.KEY_PRESS="keypress",L$a.KEY_UP="keyup",L$a.FRAME="enterframe",L$a.DRAG_START="dragstart",L$a.DRAG_MOVE="dragmove",L$a.DRAG_END="dragend",L$a.ENTER="enter",L$a.SELECT="select",L$a.BLUR="blur",L$a.FOCUS="focus",L$a.VISIBILITY_CHANGE="visibilitychange",L$a.FOCUS_CHANGE="focuschange",L$a.PLAYED="played",L$a.PAUSED="paused",L$a.STOPPED="stopped",L$a.START="start",L$a.END="end",L$a.ENABLE_CHANGED="enablechanged",L$a.ACTIVE_IN_HIERARCHY_CHANGED="activeinhierarchychanged",L$a.COMPONENT_ADDED="componentadded",L$a.COMPONENT_REMOVED="componentremoved",L$a.LAYER_CHANGED="layerchanged",L$a.HIERARCHY_LOADED="hierarchyloaded",L$a.RECOVERED="recovered",L$a.RELEASED="released",L$a.LINK="link",L$a.LABEL="label",L$a.FULL_SCREEN_CHANGE="fullscreenchange",L$a.DEVICE_LOST="devicelost",L$a.MESH_CHANGED="meshchanged",L$a.MATERIAL_CHANGED="materialchanged",L$a.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",L$a.ANIMATION_CHANGED="animationchanged",L$a.TRIGGER_ENTER="triggerenter",L$a.TRIGGER_STAY="triggerstay",L$a.TRIGGER_EXIT="triggerexit",L$a.TRAIL_FILTER_CHANGE="trailfilterchange",L$a.DOMINO_FILTER_CHANGE="dominofilterchange",L$a}(),L$l=(function(){function L$a(){}L$k(L$a,"laya.events.Keyboard"),L$a.NUMBER_0=48,L$a.NUMBER_1=49,L$a.NUMBER_2=50,L$a.NUMBER_3=51,L$a.NUMBER_4=52,L$a.NUMBER_5=53,L$a.NUMBER_6=54,L$a.NUMBER_7=55,L$a.NUMBER_8=56,L$a.NUMBER_9=57,L$a.A=65,L$a.B=66,L$a.C=67,L$a.D=68,L$a.E=69,L$a.F=70,L$a.G=71,L$a.H=72,L$a.I=73,L$a.J=74,L$a.K=75,L$a.L=76,L$a.M=77,L$a.N=78,L$a.O=79,L$a.P=80,L$a.Q=81,L$a.R=82,L$a.S=83,L$a.T=84,L$a.U=85,L$a.V=86,L$a.W=87,L$a.X=88,L$a.Y=89,L$a.Z=90,L$a.F1=112,L$a.F2=113,L$a.F3=114,L$a.F4=115,L$a.F5=116,L$a.F6=117,L$a.F7=118,L$a.F8=119,L$a.F9=120,L$a.F10=121,L$a.F11=122,L$a.F12=123,L$a.F13=124,L$a.F14=125,L$a.F15=126,L$a.NUMPAD=21,L$a.NUMPAD_0=96,L$a.NUMPAD_1=97,L$a.NUMPAD_2=98,L$a.NUMPAD_3=99,L$a.NUMPAD_4=100,L$a.NUMPAD_5=101,L$a.NUMPAD_6=102,L$a.NUMPAD_7=103,L$a.NUMPAD_8=104,L$a.NUMPAD_9=105,L$a.NUMPAD_ADD=107,L$a.NUMPAD_DECIMAL=110,L$a.NUMPAD_DIVIDE=111,L$a.NUMPAD_ENTER=108,L$a.NUMPAD_MULTIPLY=106,L$a.NUMPAD_SUBTRACT=109,L$a.SEMICOLON=186,L$a.EQUAL=187,L$a.COMMA=188,L$a.MINUS=189,L$a.PERIOD=190,L$a.SLASH=191,L$a.BACKQUOTE=192,L$a.LEFTBRACKET=219,L$a.BACKSLASH=220,L$a.RIGHTBRACKET=221,L$a.QUOTE=222,L$a.ALTERNATE=18,L$a.BACKSPACE=8,L$a.CAPS_LOCK=20,L$a.COMMAND=15,L$a.CONTROL=17,L$a.DELETE=46,L$a.ENTER=13,L$a.ESCAPE=27,L$a.PAGE_UP=33,L$a.PAGE_DOWN=34,L$a.END=35,L$a.HOME=36,L$a.LEFT=37,L$a.UP=38,L$a.RIGHT=39,L$a.DOWN=40,L$a.SHIFT=16,L$a.SPACE=32,L$a.TAB=9,L$a.INSERT=45}(),function(){function L$e(){}return L$k(L$e,"laya.events.KeyBoardManager"),L$e.__init__=function(){L$e._addEvent("keydown"),L$e._addEvent("keypress"),L$e._addEvent("keyup")},L$e._addEvent=function(L$b){L$O.document.addEventListener(L$b,function(L$a){laya.events.KeyBoardManager._dispatch(L$a,L$b)},!0)},L$e._dispatch=function(L$a,L$b){if(L$e.enabled){L$e._event._stoped=!1,L$e._event.nativeEvent=L$a,L$e._event.keyCode=L$a.keyCode||L$a.which||L$a.charCode,"keydown"===L$b?L$e._pressKeys[L$e._event.keyCode]=!0:"keyup"===L$b&&(L$e._pressKeys[L$e._event.keyCode]=null);for(var L$c=L$z.stage.focus&&null!=L$z.stage.focus.event&&L$z.stage.focus.displayedInStage?L$z.stage.focus:L$z.stage,L$d=L$c;L$d;)L$d.event(L$b,L$e._event.setTo(L$b,L$d,L$c)),L$d=L$d.parent}},L$e.hasKeyDown=function(L$a){return L$e._pressKeys[L$a]},L$e._pressKeys={},L$e.enabled=!0,L$i(L$e,["_event",function(){return this._event=new L$f}]),L$e}()),L$p=(function(){function L$a(){}L$k(L$a,"laya.events.KeyLocation"),L$a.STANDARD=0,L$a.LEFT=1,L$a.RIGHT=2,L$a.NUM_PAD=3}(),function(){function L$j(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseEventTime=L$O.now(),this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastMoveTimer=0,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._tTouchID=0,this._event=new L$f,this._matrix=new L$G,this._point=new L$A,this._rect=new L$B,this._prePoint=new L$A,this._curTouchID=NaN}L$k(L$j,"laya.events.MouseManager");var L$a=L$j.prototype;return L$a.__init__=function(L$a,L$b){var L$c=this;this._stage=L$a;var L$d=this,L$e=this._eventList;L$b.oncontextmenu=function(L$a){if(L$j.enabled)return!1},L$b.addEventListener("mousedown",function(L$a){L$j.enabled&&(L$O.onIE||L$a.preventDefault(),L$e.push(L$a),L$d.mouseDownTime=L$O.now())}),L$b.addEventListener("mouseup",function(L$a){L$j.enabled&&(L$a.preventDefault(),L$e.push(L$a),L$d.mouseDownTime=-L$O.now())},!0),L$b.addEventListener("mousemove",function(L$a){if(L$j.enabled){L$a.preventDefault();var L$b=L$O.now();if(L$b-L$d._lastMoveTimer<10)return;L$d._lastMoveTimer=L$b,L$e.push(L$a)}},!0),L$b.addEventListener("mouseout",function(L$a){L$j.enabled&&L$e.push(L$a)}),L$b.addEventListener("mouseover",function(L$a){L$j.enabled&&L$e.push(L$a)}),L$b.addEventListener("touchstart",function(L$a){L$j.enabled&&(L$e.push(L$a),L$j._isFirstTouch||L$va.isInputting||L$a.preventDefault(),L$d.mouseDownTime=L$O.now())}),L$b.addEventListener("touchend",function(L$a){L$j.enabled?(L$j._isFirstTouch||L$va.isInputting||L$a.preventDefault(),L$j._isFirstTouch=!1,L$e.push(L$a),L$d.mouseDownTime=-L$O.now()):L$c._curTouchID=NaN},!0),L$b.addEventListener("touchmove",function(L$a){L$j.enabled&&(L$a.preventDefault(),L$e.push(L$a))},!0),L$b.addEventListener("touchcancel",function(L$a){L$j.enabled?(L$a.preventDefault(),L$e.push(L$a)):L$c._curTouchID=NaN},!0),L$b.addEventListener("mousewheel",function(L$a){L$j.enabled&&L$e.push(L$a)}),L$b.addEventListener("DOMMouseScroll",function(L$a){L$j.enabled&&L$e.push(L$a)})},L$a.initEvent=function(L$a,L$b){var L$c;this._event._stoped=!1,this._event.nativeEvent=L$b||L$a,this._target=null,this._point.setTo(L$a.pageX||L$a.clientX,L$a.pageY||L$a.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),this.mouseX=this._point.x,this.mouseY=this._point.y,this._event.touchId=L$a.identifier||0,this._tTouchID=this._event.touchId,(L$c=L$q.I._event)._stoped=!1,L$c.nativeEvent=this._event.nativeEvent,L$c.touchId=this._event.touchId},L$a.checkMouseWheel=function(L$a){this._event.delta=L$a.wheelDelta?.025*L$a.wheelDelta:-L$a.detail;for(var L$b=L$q.I.getLastOvers(),L$c=0,L$d=L$b.length;L$c<L$d;L$c++){var L$e=L$b[L$c];L$e.event("mousewheel",this._event.setTo("mousewheel",L$e,this._target))}},L$a.onMouseMove=function(L$a){L$q.I.onMouseMove(L$a,this._tTouchID)},L$a.onMouseDown=function(L$a){if(L$va.isInputting&&L$z.stage.focus&&L$z.stage.focus.focus&&!L$z.stage.focus.contains(this._target)){var L$b=L$z.stage.focus._tf||L$z.stage.focus,L$c=L$a._tf||L$a;L$c instanceof laya.display.Input&&L$c.multiline==L$b.multiline?L$b._focusOut():L$b.focus=!1}L$q.I.onMouseDown(L$a,this._tTouchID,this._isLeftMouse)},L$a.onMouseUp=function(L$a){L$q.I.onMouseUp(L$a,this._tTouchID,this._isLeftMouse)},L$a.check=function(L$a,L$b,L$c,L$d){this._point.setTo(L$b,L$c),L$a.fromParentPoint(this._point),L$b=this._point.x,L$c=this._point.y;var L$e=L$a.scrollRect;if(L$e&&(this._rect.setTo(L$e.x,L$e.y,L$e.width,L$e.height),!this._rect.contains(L$b,L$c)))return!1;if(!this.disableMouseEvent){if(L$a.hitTestPrior&&!L$a.mouseThrough&&!this.hitTest(L$a,L$b,L$c))return!1;for(var L$f=L$a._childs.length-1;-1<L$f;L$f--){var L$g=L$a._childs[L$f];if(!L$g.destroyed&&L$g.mouseEnabled&&L$g.visible&&this.check(L$g,L$b,L$c,L$d))return!0}}var L$h=!(!L$a.hitTestPrior||L$a.mouseThrough||this.disableMouseEvent)||this.hitTest(L$a,L$b,L$c);return L$h?(this._target=L$a,L$d.call(this,L$a)):L$d===this.onMouseUp&&L$a===this._stage&&(this._target=this._stage,L$d.call(this,this._target)),L$h},L$a.hitTest=function(L$a,L$b,L$c){var L$d=!1;if(L$a.scrollRect&&(L$b-=L$a.scrollRect.x,L$c-=L$a.scrollRect.y),L$a.hitArea instanceof laya.utils.HitArea)return L$a.hitArea.isHit(L$b,L$c);if(0<L$a.width&&0<L$a.height||L$a.mouseThrough||L$a.hitArea)if(L$a.mouseThrough)L$d=L$a.getGraphicBounds().contains(L$b,L$c);else{var L$e=this._rect;L$a.hitArea?L$e=L$a.hitArea:L$e.setTo(0,0,L$a.width,L$a.height),L$d=L$e.contains(L$b,L$c)}return L$d},L$a.runEvent=function(){var L$a=this._eventList.length;if(L$a){this.mouseEventTime=L$O.now();var L$b,L$c=0,L$d=0,L$e=0;try{for(;L$c<L$a;){var L$f=this._eventList[L$c];switch("mousemove"!==L$f.type&&(this._prePoint.x=this._prePoint.y=-1e6),L$f.type){case"mousedown":this._touchIDs[0]=this._id++,L$j._isTouchRespond?L$j._isTouchRespond=!1:(this._isLeftMouse=0===L$f.button,this.initEvent(L$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"mouseup":this._isLeftMouse=0===L$f.button,this.initEvent(L$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-L$f.clientX)+Math.abs(this._prePoint.y-L$f.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=L$f.clientX,this._prePoint.y=L$f.clientY,this.initEvent(L$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"touchstart":L$j._isTouchRespond=!0,this._isLeftMouse=!0;var L$g=L$f.changedTouches;for(L$d=0,L$e=L$g.length;L$d<L$e;L$d++)L$b=L$g[L$d],(L$j.multiTouchEnabled||isNaN(this._curTouchID))&&(this._curTouchID=L$b.identifier,this._id%200==0&&(this._touchIDs={}),this._touchIDs[L$b.identifier]=this._id++,this.initEvent(L$b,L$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseDown));break;case"touchend":case"touchcancel":L$j._isTouchRespond=!0,this._isLeftMouse=!0;var L$h=L$f.changedTouches;for(L$d=0,L$e=L$h.length;L$d<L$e;L$d++)if(L$b=L$h[L$d],L$j.multiTouchEnabled||L$b.identifier==this._curTouchID){this._curTouchID=NaN,this.initEvent(L$b,L$f);this.check(this._stage,this.mouseX,this.mouseY,this.onMouseUp)||this.onMouseUp(null)}break;case"touchmove":var L$i=L$f.changedTouches;for(L$d=0,L$e=L$i.length;L$d<L$e;L$d++)L$b=L$i[L$d],(L$j.multiTouchEnabled||L$b.identifier==this._curTouchID)&&(this.initEvent(L$b,L$f),this.check(this._stage,this.mouseX,this.mouseY,this.onMouseMove));break;case"wheel":case"mousewheel":case"DOMMouseScroll":this.checkMouseWheel(L$f);break;case"mouseout":L$q.I.stageMouseOut();break;case"mouseover":this._stage.event("mouseover",this._event.setTo("mouseover",this._stage,this._stage))}L$c++}}catch(L$a){throw this._eventList.length=0,L$a}this._eventList.length=0}},L$j.enabled=!0,L$j.multiTouchEnabled=!0,L$j._isTouchRespond=!1,L$j._isFirstTouch=!0,L$i(L$j,["instance",function(){return this.instance=new L$j}]),L$j}()),L$q=function(){function L$o(){this.preOvers=[],this.preDowns=[],this.preRightDowns=[],this.enable=!0,this._lastClickTime=0,this._event=new L$f}L$k(L$o,"laya.events.TouchManager");var L$a=L$o.prototype;return L$a._clearTempArrs=function(){L$o._oldArr.length=0,L$o._newArr.length=0,L$o._tEleArr.length=0},L$a.getTouchFromArr=function(L$a,L$b){var L$c,L$d,L$e=0;for(L$c=L$b.length,L$e=0;L$e<L$c;L$e++)if((L$d=L$b[L$e]).id==L$a)return L$d;return null},L$a.removeTouchFromArr=function(L$a,L$b){var L$c=0;for(L$c=L$b.length-1;0<=L$c;L$c--)L$b[L$c].id==L$a&&L$b.splice(L$c,1)},L$a.createTouchO=function(L$a,L$b){var L$c;return(L$c=L$W.getItem("TouchData")||{}).id=L$b,L$c.tar=L$a,L$c},L$a.onMouseDown=function(L$a,L$b,L$c){var L$d,L$e,L$f,L$g;(void 0===L$c&&(L$c=!1),this.enable)&&(L$d=this.getTouchFromArr(L$b,this.preOvers),L$f=this.getEles(L$a,null,L$o._tEleArr),L$d?L$d.tar=L$a:(L$e=this.createTouchO(L$a,L$b),this.preOvers.push(L$e)),L$O.onMobile&&this.sendEvents(L$f,"mouseover",L$b),L$g=L$c?this.preDowns:this.preRightDowns,(L$d=this.getTouchFromArr(L$b,L$g))?L$d.tar=L$a:(L$e=this.createTouchO(L$a,L$b),L$g.push(L$e)),this.sendEvents(L$f,L$c?"mousedown":"rightmousedown",L$b),this._clearTempArrs())},L$a.sendEvents=function(L$a,L$b,L$c){void 0===L$c&&(L$c=0);var L$d,L$e,L$f,L$g=0;for(L$d=L$a.length,this._event._stoped=!1,L$e=L$a[0],L$g=0;L$g<L$d;L$g++){if((L$f=L$a[L$g]).destroyed)return;if(L$f.event(L$b,this._event.setTo(L$b,L$f,L$e)),this._event._stoped)break}},L$a.getEles=function(L$a,L$b,L$c){for(L$c?L$c.length=0:L$c=[];L$a&&L$a!=L$b;)L$c.push(L$a),L$a=L$a.parent;return L$c},L$a.checkMouseOutAndOverOfMove=function(L$a,L$b,L$c){if(void 0===L$c&&(L$c=0),L$b!=L$a){var L$d,L$e,L$f=0,L$g=0;if(L$b.contains(L$a))L$e=this.getEles(L$a,L$b,L$o._tEleArr),this.sendEvents(L$e,"mouseover",L$c);else if(L$a.contains(L$b))L$e=this.getEles(L$b,L$a,L$o._tEleArr),this.sendEvents(L$e,"mouseout",L$c);else{var L$h,L$i;(L$e=L$o._tEleArr).length=0,L$h=this.getEles(L$b,null,L$o._oldArr),L$i=this.getEles(L$a,null,L$o._newArr),L$g=L$h.length;var L$j=0;for(L$f=0;L$f<L$g;L$f++){if(L$d=L$h[L$f],0<=(L$j=L$i.indexOf(L$d))){L$i.splice(L$j,L$i.length-L$j);break}L$e.push(L$d)}0<L$e.length&&this.sendEvents(L$e,"mouseout",L$c),0<L$i.length&&this.sendEvents(L$i,"mouseover",L$c)}}},L$a.onMouseMove=function(L$a,L$b){var L$c,L$d;this.enable&&((L$c=this.getTouchFromArr(L$b,this.preOvers))?(this.checkMouseOutAndOverOfMove(L$a,L$c.tar),L$c.tar=L$a,L$d=this.getEles(L$a,null,L$o._tEleArr)):(L$d=this.getEles(L$a,null,L$o._tEleArr),this.sendEvents(L$d,"mouseover",L$b),this.preOvers.push(this.createTouchO(L$a,L$b))),this.sendEvents(L$d,"mousemove",L$b),this._clearTempArrs())},L$a.getLastOvers=function(){return(L$o._tEleArr.length=0)<this.preOvers.length&&this.preOvers[0].tar?this.getEles(this.preOvers[0].tar,null,L$o._tEleArr):(L$o._tEleArr.push(L$z.stage),L$o._tEleArr)},L$a.stageMouseOut=function(){var L$a;L$a=this.getLastOvers(),this.preOvers.length=0,this.sendEvents(L$a,"mouseout",0)},L$a.onMouseUp=function(L$a,L$b,L$c){if(void 0===L$c&&(L$c=!1),this.enable){var L$d,L$e,L$f,L$g,L$h,L$i,L$j=0,L$k=0,L$l=L$O.onMobile;if(L$e=this.getEles(L$a,null,L$o._tEleArr),this.sendEvents(L$e,L$c?"mouseup":"rightmouseup",L$b),L$i=L$c?this.preDowns:this.preRightDowns,L$d=this.getTouchFromArr(L$b,L$i)){var L$m,L$n=L$O.now();if(L$m=L$n-this._lastClickTime<300,this._lastClickTime=L$n,L$a==L$d.tar)L$h=L$e;else for(L$f=this.getEles(L$d.tar,null,L$o._oldArr),(L$h=L$o._newArr).length=0,L$k=L$f.length,L$j=0;L$j<L$k;L$j++)L$g=L$f[L$j],0<=L$e.indexOf(L$g)&&L$h.push(L$g);0<L$h.length&&this.sendEvents(L$h,L$c?"click":"rightclick",L$b),L$c&&L$m&&this.sendEvents(L$h,"doubleclick",L$b),this.removeTouchFromArr(L$b,L$i),L$d.tar=null,L$W.recover("TouchData",L$d)}else;(L$d=this.getTouchFromArr(L$b,this.preOvers))&&L$l&&((L$h=this.getEles(L$d.tar,null,L$h))&&0<L$h.length&&this.sendEvents(L$h,"mouseout",L$b),this.removeTouchFromArr(L$b,this.preOvers),L$d.tar=null,L$W.recover("TouchData",L$d)),this._clearTempArrs()}},L$o._oldArr=[],L$o._newArr=[],L$o._tEleArr=[],L$i(L$o,["I",function(){return this.I=new L$o}]),L$o}(),L$r=function(){function L$a(){this._action=null}L$k(L$a,"laya.filters.Filter");var L$b=L$a.prototype;return L$z.imps(L$b,{"laya.filters.IFilter":!0}),L$b.callNative=function(L$a){},L$o(0,L$b,"type",function(){return-1}),L$o(0,L$b,"action",function(){return this._action}),L$a.BLUR=16,L$a.COLOR=32,L$a.GLOW=8,L$a._filterStart=null,L$a._filterEnd=null,L$a._EndTarget=null,L$a._recycleScope=null,L$a._filter=null,L$a._useSrc=null,L$a._endSrc=null,L$a._useOut=null,L$a._endOut=null,L$a}(),L$t=function(){function L$a(){this.data=null}L$k(L$a,"laya.filters.ColorFilterAction");var L$b=L$a.prototype;return L$z.imps(L$b,{"laya.filters.IFilterAction":!0}),L$b.apply=function(L$a){var L$b=L$a.ctx.ctx,L$c=L$a.ctx.ctx.canvas;if(0==L$c.width||0==L$c.height)return L$c;for(var L$d,L$e=L$b.getImageData(0,0,L$c.width,L$c.height),L$f=L$e.data,L$g=0,L$h=L$f.length;L$g<L$h;L$g+=4)L$d=this.getColor(L$f[L$g],L$f[L$g+1],L$f[L$g+2],L$f[L$g+3]),0!=L$f[L$g+3]&&(L$f[L$g]=L$d[0],L$f[L$g+1]=L$d[1],L$f[L$g+2]=L$d[2],L$f[L$g+3]=L$d[3]);return L$b.putImageData(L$e,0,0),L$a},L$b.getColor=function(L$a,L$b,L$c,L$d){var L$e=[];if(this.data._mat&&this.data._alpha){var L$f=this.data._mat,L$g=this.data._alpha;L$e[0]=L$f[0]*L$a+L$f[1]*L$b+L$f[2]*L$c+L$f[3]*L$d+L$g[0],L$e[1]=L$f[4]*L$a+L$f[5]*L$b+L$f[6]*L$c+L$f[7]*L$d+L$g[1],L$e[2]=L$f[8]*L$a+L$f[9]*L$b+L$f[10]*L$c+L$f[11]*L$d+L$g[2],L$e[3]=L$f[12]*L$a+L$f[13]*L$b+L$f[14]*L$c+L$f[15]*L$d+L$g[3]}return L$e},L$a}(),L$u=(function(){function L$a(){}L$k(L$a,"laya.maths.Arith"),L$a.formatR=function(L$a){return L$a>Math.PI&&(L$a-=2*Math.PI),L$a<-Math.PI&&(L$a+=2*Math.PI),L$a},L$a.isPOT=function(L$a,L$b){return 0<L$a&&0==(L$a&L$a-1)&&0<L$b&&0==(L$b&L$b-1)},L$a.setMatToArray=function(L$a,L$b){L$a.a,L$a.b,L$a.c,L$a.d,L$a.tx,L$a.ty,L$b[0]=L$a.a,L$b[1]=L$a.b,L$b[4]=L$a.c,L$b[5]=L$a.d,L$b[12]=L$a.tx,L$b[13]=L$a.ty}}(),function(){function L$a(){this._controlPoints=[new L$A,new L$A,new L$A],this._calFun=this.getPoint2}L$k(L$a,"laya.maths.Bezier");var L$b=L$a.prototype;return L$b._switchPoint=function(L$a,L$b){var L$c=this._controlPoints.shift();L$c.setTo(L$a,L$b),this._controlPoints.push(L$c)},L$b.getPoint2=function(L$a,L$b){var L$c=this._controlPoints[0],L$d=this._controlPoints[1],L$e=this._controlPoints[2],L$f=Math.pow(1-L$a,2)*L$c.x+2*L$a*(1-L$a)*L$d.x+Math.pow(L$a,2)*L$e.x,L$g=Math.pow(1-L$a,2)*L$c.y+2*L$a*(1-L$a)*L$d.y+Math.pow(L$a,2)*L$e.y;L$b.push(L$f,L$g)},L$b.getPoint3=function(L$a,L$b){var L$c=this._controlPoints[0],L$d=this._controlPoints[1],L$e=this._controlPoints[2],L$f=this._controlPoints[3],L$g=Math.pow(1-L$a,3)*L$c.x+3*L$d.x*L$a*(1-L$a)*(1-L$a)+3*L$e.x*L$a*L$a*(1-L$a)+L$f.x*Math.pow(L$a,3),L$h=Math.pow(1-L$a,3)*L$c.y+3*L$d.y*L$a*(1-L$a)*(1-L$a)+3*L$e.y*L$a*L$a*(1-L$a)+L$f.y*Math.pow(L$a,3);L$b.push(L$g,L$h)},L$b.insertPoints=function(L$a,L$b){var L$c,L$d=NaN;for(L$c=1/(L$a=0<L$a?L$a:5),L$d=0;L$d<=1;L$d+=L$c)this._calFun(L$d,L$b)},L$b.getBezierPoints=function(L$a,L$b,L$c){void 0===L$b&&(L$b=5),void 0===L$c&&(L$c=2);var L$d,L$e,L$f=0;if((L$d=L$a.length)<2*(L$c+1))return[];switch(L$e=[],L$c){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=L$c;)this._controlPoints.push(new L$A);for(L$f=0;L$f<2*L$c;L$f+=2)this._switchPoint(L$a[L$f],L$a[L$f+1]);for(L$f=2*L$c;L$f<L$d;L$f+=2)this._switchPoint(L$a[L$f],L$a[L$f+1]),L$f/2%L$c==0&&this.insertPoints(L$b,L$e);return L$e},L$i(L$a,["I",function(){return this.I=new L$a}]),L$a}()),L$v=function(){function L$j(){}return L$k(L$j,"laya.maths.GrahamScan"),L$j.multiply=function(L$a,L$b,L$c){return(L$a.x-L$c.x)*(L$b.y-L$c.y)-(L$b.x-L$c.x)*(L$a.y-L$c.y)},L$j.dis=function(L$a,L$b){return(L$a.x-L$b.x)*(L$a.x-L$b.x)+(L$a.y-L$b.y)*(L$a.y-L$b.y)},L$j._getPoints=function(L$a,L$b,L$c){for(void 0===L$b&&(L$b=!1),L$j._mPointList||(L$j._mPointList=[]);L$j._mPointList.length<L$a;)L$j._mPointList.push(new L$A);return L$c||(L$c=[]),L$c.length=0,L$b?L$j.getFrom(L$c,L$j._mPointList,L$a):L$j.getFromR(L$c,L$j._mPointList,L$a),L$c},L$j.getFrom=function(L$a,L$b,L$c){var L$d=0;for(L$d=0;L$d<L$c;L$d++)L$a.push(L$b[L$d]);return L$a},L$j.getFromR=function(L$a,L$b,L$c){var L$d=0;for(L$d=0;L$d<L$c;L$d++)L$a.push(L$b.pop());return L$a},L$j.pListToPointList=function(L$a,L$b){void 0===L$b&&(L$b=!1);var L$c=0,L$d=L$a.length/2,L$e=L$j._getPoints(L$d,L$b,L$j._tempPointList);for(L$c=0;L$c<L$d;L$c++)L$e[L$c].setTo(L$a[L$c+L$c],L$a[L$c+L$c+1]);return L$e},L$j.pointListToPlist=function(L$a){var L$b,L$c=0,L$d=L$a.length,L$e=L$j._temPList;for(L$c=L$e.length=0;L$c<L$d;L$c++)L$b=L$a[L$c],L$e.push(L$b.x,L$b.y);return L$e},L$j.scanPList=function(L$a){return L$$.copyArray(L$a,L$j.pointListToPlist(L$j.scan(L$j.pListToPointList(L$a,!0))))},L$j.scan=function(L$a){var L$b,L$c,L$d,L$e=0,L$f=0,L$g=0,L$h=L$a.length,L$i={};for((L$c=L$j._temArr).length=0,L$e=(L$h=L$a.length)-1;0<=L$e;L$e--)L$d=(L$b=L$a[L$e]).x+"_"+L$b.y,L$i.hasOwnProperty(L$d)||(L$i[L$d]=!0,L$c.push(L$b));for(L$h=L$c.length,L$$.copyArray(L$a,L$c),L$e=1;L$e<L$h;L$e++)(L$a[L$e].y<L$a[L$g].y||L$a[L$e].y==L$a[L$g].y&&L$a[L$e].x<L$a[L$g].x)&&(L$g=L$e);for(L$b=L$a[0],L$a[0]=L$a[L$g],L$a[L$g]=L$b,L$e=1;L$e<L$h-1;L$e++){for(L$f=(L$g=L$e)+1;L$f<L$h;L$f++)(0<L$j.multiply(L$a[L$f],L$a[L$g],L$a[0])||0==L$j.multiply(L$a[L$f],L$a[L$g],L$a[0])&&L$j.dis(L$a[0],L$a[L$f])<L$j.dis(L$a[0],L$a[L$g]))&&(L$g=L$f);L$b=L$a[L$e],L$a[L$e]=L$a[L$g],L$a[L$g]=L$b}if((L$c=L$j._temArr).length=0,L$a.length<3)return L$$.copyArray(L$c,L$a);for(L$c.push(L$a[0],L$a[1],L$a[2]),L$e=3;L$e<L$h;L$e++){for(;2<=L$c.length&&0<=L$j.multiply(L$a[L$e],L$c[L$c.length-1],L$c[L$c.length-2]);)L$c.pop();L$a[L$e]&&L$c.push(L$a[L$e])}return L$c},L$j._mPointList=null,L$j._tempPointList=[],L$j._temPList=[],L$j._temArr=[],L$j}(),L$y=function(){function L$e(){}return L$k(L$e,"laya.maths.MathUtil"),L$e.subtractVector3=function(L$a,L$b,L$c){L$c[0]=L$a[0]-L$b[0],L$c[1]=L$a[1]-L$b[1],L$c[2]=L$a[2]-L$b[2]},L$e.lerp=function(L$a,L$b,L$c){return L$a*(1-L$c)+L$b*L$c},L$e.scaleVector3=function(L$a,L$b,L$c){L$c[0]=L$a[0]*L$b,L$c[1]=L$a[1]*L$b,L$c[2]=L$a[2]*L$b},L$e.lerpVector3=function(L$a,L$b,L$c,L$d){var L$e=L$a[0],L$f=L$a[1],L$g=L$a[2];L$d[0]=L$e+L$c*(L$b[0]-L$e),L$d[1]=L$f+L$c*(L$b[1]-L$f),L$d[2]=L$g+L$c*(L$b[2]-L$g)},L$e.lerpVector4=function(L$a,L$b,L$c,L$d){var L$e=L$a[0],L$f=L$a[1],L$g=L$a[2],L$h=L$a[3];L$d[0]=L$e+L$c*(L$b[0]-L$e),L$d[1]=L$f+L$c*(L$b[1]-L$f),L$d[2]=L$g+L$c*(L$b[2]-L$g),L$d[3]=L$h+L$c*(L$b[3]-L$h)},L$e.slerpQuaternionArray=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){var L$h,L$i,L$j,L$k,L$l,L$m=L$a[L$b+0],L$n=L$a[L$b+1],L$o=L$a[L$b+2],L$p=L$a[L$b+3],L$q=L$c[L$d+0],L$r=L$c[L$d+1],L$s=L$c[L$d+2],L$t=L$c[L$d+3];return(L$i=L$m*L$q+L$n*L$r+L$o*L$s+L$p*L$t)<0&&(L$i=-L$i,L$q=-L$q,L$r=-L$r,L$s=-L$s,L$t=-L$t),L$l=1e-6<1-L$i?(L$h=Math.acos(L$i),L$j=Math.sin(L$h),L$k=Math.sin((1-L$e)*L$h)/L$j,Math.sin(L$e*L$h)/L$j):(L$k=1-L$e,L$e),L$f[L$g+0]=L$k*L$m+L$l*L$q,L$f[L$g+1]=L$k*L$n+L$l*L$r,L$f[L$g+2]=L$k*L$o+L$l*L$s,L$f[L$g+3]=L$k*L$p+L$l*L$t,L$f},L$e.getRotation=function(L$a,L$b,L$c,L$d){return Math.atan2(L$d-L$b,L$c-L$a)/Math.PI*180},L$e.sortBigFirst=function(L$a,L$b){return L$a==L$b?0:L$a<L$b?1:-1},L$e.sortSmallFirst=function(L$a,L$b){return L$a==L$b?0:L$a<L$b?-1:1},L$e.sortNumBigFirst=function(L$a,L$b){return parseFloat(L$b)-parseFloat(L$a)},L$e.sortNumSmallFirst=function(L$a,L$b){return parseFloat(L$a)-parseFloat(L$b)},L$e.sortByKey=function(L$c,L$a,L$b){var L$d;return void 0===L$a&&(L$a=!1),void 0===L$b&&(L$b=!0),L$d=L$a?L$b?L$e.sortNumBigFirst:L$e.sortBigFirst:L$b?L$e.sortNumSmallFirst:L$e.sortSmallFirst,function(L$a,L$b){return L$d(L$a[L$c],L$b[L$c])}},L$e}(),L$G=function(){function L$c(L$a,L$b,L$c,L$d,L$e,L$f){this.inPool=!1,this.bTransform=!1,void 0===L$a&&(L$a=1),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=1),void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=0),this.a=L$a,this.b=L$b,this.c=L$c,this.d=L$d,this.tx=L$e,this.ty=L$f,this._checkTransform()}L$k(L$c,"laya.maths.Matrix");var L$a=L$c.prototype;return L$a.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},L$a._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},L$a.setTranslate=function(L$a,L$b){return this.tx=L$a,this.ty=L$b,this},L$a.translate=function(L$a,L$b){return this.tx+=L$a,this.ty+=L$b,this},L$a.scale=function(L$a,L$b){this.a*=L$a,this.d*=L$b,this.c*=L$a,this.b*=L$b,this.tx*=L$a,this.ty*=L$b,this.bTransform=!0},L$a.rotate=function(L$a){var L$b=Math.cos(L$a),L$c=Math.sin(L$a),L$d=this.a,L$e=this.c,L$f=this.tx;this.a=L$d*L$b-this.b*L$c,this.b=L$d*L$c+this.b*L$b,this.c=L$e*L$b-this.d*L$c,this.d=L$e*L$c+this.d*L$b,this.tx=L$f*L$b-this.ty*L$c,this.ty=L$f*L$c+this.ty*L$b,this.bTransform=!0},L$a.skew=function(L$a,L$b){var L$c=Math.tan(L$a),L$d=Math.tan(L$b),L$e=this.a,L$f=this.b;return this.a+=L$d*this.c,this.b+=L$d*this.d,this.c+=L$c*L$e,this.d+=L$c*L$f,this},L$a.invertTransformPoint=function(L$a){var L$b=this.a,L$c=this.b,L$d=this.c,L$e=this.d,L$f=this.tx,L$g=L$b*L$e-L$c*L$d,L$h=L$e/L$g,L$i=-L$c/L$g,L$j=-L$d/L$g,L$k=L$b/L$g,L$l=(L$d*this.ty-L$e*L$f)/L$g,L$m=-(L$b*this.ty-L$c*L$f)/L$g;return L$a.setTo(L$h*L$a.x+L$j*L$a.y+L$l,L$i*L$a.x+L$k*L$a.y+L$m)},L$a.transformPoint=function(L$a){return L$a.setTo(this.a*L$a.x+this.c*L$a.y+this.tx,this.b*L$a.x+this.d*L$a.y+this.ty)},L$a.transformPointN=function(L$a){return L$a.setTo(this.a*L$a.x+this.c*L$a.y,this.b*L$a.x+this.d*L$a.y)},L$a.transformPointArray=function(L$a,L$b){for(var L$c=L$a.length,L$d=0;L$d<L$c;L$d+=2){var L$e=L$a[L$d],L$f=L$a[L$d+1];L$b[L$d]=this.a*L$e+this.c*L$f+this.tx,L$b[L$d+1]=this.b*L$e+this.d*L$f+this.ty}return L$b},L$a.transformPointArrayScale=function(L$a,L$b){for(var L$c=L$a.length,L$d=0;L$d<L$c;L$d+=2){var L$e=L$a[L$d],L$f=L$a[L$d+1];L$b[L$d]=this.a*L$e+this.c*L$f,L$b[L$d+1]=this.b*L$e+this.d*L$f}return L$b},L$a.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},L$a.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},L$a.invert=function(){var L$a=this.a,L$b=this.b,L$c=this.c,L$d=this.d,L$e=this.tx,L$f=L$a*L$d-L$b*L$c;return this.a=L$d/L$f,this.b=-L$b/L$f,this.c=-L$c/L$f,this.d=L$a/L$f,this.tx=(L$c*this.ty-L$d*L$e)/L$f,this.ty=-(L$a*this.ty-L$b*L$e)/L$f,this},L$a.setTo=function(L$a,L$b,L$c,L$d,L$e,L$f){return this.a=L$a,this.b=L$b,this.c=L$c,this.d=L$d,this.tx=L$e,this.ty=L$f,this},L$a.concat=function(L$a){var L$b=this.a,L$c=this.c,L$d=this.tx;return this.a=L$b*L$a.a+this.b*L$a.c,this.b=L$b*L$a.b+this.b*L$a.d,this.c=L$c*L$a.a+this.d*L$a.c,this.d=L$c*L$a.b+this.d*L$a.d,this.tx=L$d*L$a.a+this.ty*L$a.c+L$a.tx,this.ty=L$d*L$a.b+this.ty*L$a.d+L$a.ty,this},L$a.scaleEx=function(L$a,L$b){var L$c=this.a,L$d=this.b,L$e=this.c,L$f=this.d;0!==L$d||0!==L$e?(this.a=L$a*L$c,this.b=L$a*L$d,this.c=L$b*L$e):(this.a=L$a*L$c,this.b=0*L$f,this.c=0*L$c),this.d=L$b*L$f,this.bTransform=!0},L$a.rotateEx=function(L$a){var L$b=Math.cos(L$a),L$c=Math.sin(L$a),L$d=this.a,L$e=this.b,L$f=this.c,L$g=this.d;0!==L$e||0!==L$f?(this.a=L$b*L$d+L$c*L$f,this.b=L$b*L$e+L$c*L$g,this.c=-L$c*L$d+L$b*L$f,this.d=-L$c*L$e+L$b*L$g):(this.a=L$b*L$d,this.b=L$c*L$g,this.c=-L$c*L$d,this.d=L$b*L$g),this.bTransform=!0},L$a.clone=function(){var L$a=L$c.create();return L$a.a=this.a,L$a.b=this.b,L$a.c=this.c,L$a.d=this.d,L$a.tx=this.tx,L$a.ty=this.ty,L$a.bTransform=this.bTransform,L$a},L$a.copyTo=function(L$a){return L$a.a=this.a,L$a.b=this.b,L$a.c=this.c,L$a.d=this.d,L$a.tx=this.tx,L$a.ty=this.ty,L$a.bTransform=this.bTransform,L$a},L$a.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},L$a.destroy=function(){if(!this.inPool){var L$a=L$c._cache;this.inPool=!0,L$a._length||(L$a._length=0),(L$a[L$a._length++]=this).a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},L$c.mul=function(L$a,L$b,L$c){var L$d=L$a.a,L$e=L$a.b,L$f=L$a.c,L$g=L$a.d,L$h=L$a.tx,L$i=L$a.ty,L$j=L$b.a,L$k=L$b.b,L$l=L$b.c,L$m=L$b.d,L$n=L$b.tx,L$o=L$b.ty;return 0!==L$k||0!==L$l?(L$c.a=L$d*L$j+L$e*L$l,L$c.b=L$d*L$k+L$e*L$m,L$c.c=L$f*L$j+L$g*L$l,L$c.d=L$f*L$k+L$g*L$m,L$c.tx=L$j*L$h+L$l*L$i+L$n,L$c.ty=L$k*L$h+L$m*L$i+L$o):(L$c.a=L$d*L$j,L$c.b=L$e*L$m,L$c.c=L$f*L$j,L$c.d=L$g*L$m,L$c.tx=L$j*L$h+L$n,L$c.ty=L$m*L$i+L$o),L$c},L$c.mul16=function(L$a,L$b,L$c){var L$d=L$a.a,L$e=L$a.b,L$f=L$a.c,L$g=L$a.d,L$h=L$a.tx,L$i=L$a.ty,L$j=L$b.a,L$k=L$b.b,L$l=L$b.c,L$m=L$b.d,L$n=L$b.tx,L$o=L$b.ty;return 0!==L$k||0!==L$l?(L$c[0]=L$d*L$j+L$e*L$l,L$c[1]=L$d*L$k+L$e*L$m,L$c[4]=L$f*L$j+L$g*L$l,L$c[5]=L$f*L$k+L$g*L$m,L$c[12]=L$j*L$h+L$l*L$i+L$n,L$c[13]=L$k*L$h+L$m*L$i+L$o):(L$c[0]=L$d*L$j,L$c[1]=L$e*L$m,L$c[4]=L$f*L$j,L$c[5]=L$g*L$m,L$c[12]=L$j*L$h+L$n,L$c[13]=L$m*L$i+L$o),L$c},L$c.mulPre=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){var L$i=L$a.a,L$j=L$a.b,L$k=L$a.c,L$l=L$a.d,L$m=L$a.tx,L$n=L$a.ty;return 0!==L$c||0!==L$d?(L$h.a=L$i*L$b+L$j*L$d,L$h.b=L$i*L$c+L$j*L$e,L$h.c=L$k*L$b+L$l*L$d,L$h.d=L$k*L$c+L$l*L$e,L$h.tx=L$b*L$m+L$d*L$n+L$f,L$h.ty=L$c*L$m+L$e*L$n+L$g):(L$h.a=L$i*L$b,L$h.b=L$j*L$e,L$h.c=L$k*L$b,L$h.d=L$l*L$e,L$h.tx=L$b*L$m+L$f,L$h.ty=L$e*L$n+L$g),L$h},L$c.mulPos=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){var L$i=L$a.a,L$j=L$a.b,L$k=L$a.c,L$l=L$a.d,L$m=L$a.tx,L$n=L$a.ty;return 0!==L$j||0!==L$k?(L$h.a=L$b*L$i+L$c*L$k,L$h.b=L$b*L$j+L$c*L$l,L$h.c=L$d*L$i+L$e*L$k,L$h.d=L$d*L$j+L$e*L$l,L$h.tx=L$i*L$f+L$k*L$g+L$m,L$h.ty=L$j*L$f+L$l*L$g+L$n):(L$h.a=L$b*L$i,L$h.b=L$c*L$l,L$h.c=L$d*L$i,L$h.d=L$e*L$l,L$h.tx=L$i*L$f+L$m,L$h.ty=L$l*L$g+L$n),L$h},L$c.preMul=function(L$a,L$b,L$c){var L$d=L$a.a,L$e=L$a.b,L$f=L$a.c,L$g=L$a.d,L$h=L$b.a,L$i=L$b.b,L$j=L$b.c,L$k=L$b.d,L$l=L$b.tx,L$m=L$b.ty;return L$c.a=L$h*L$d,L$c.b=L$c.c=0,L$c.d=L$k*L$g,L$c.tx=L$l*L$d+L$a.tx,L$c.ty=L$m*L$g+L$a.ty,0===L$i&&0===L$j&&0===L$e&&0===L$f||(L$c.a+=L$i*L$f,L$c.d+=L$j*L$e,L$c.b+=L$h*L$e+L$i*L$g,L$c.c+=L$j*L$d+L$k*L$f,L$c.tx+=L$m*L$f,L$c.ty+=L$l*L$e),L$c},L$c.preMulXY=function(L$a,L$b,L$c,L$d){var L$e=L$a.a,L$f=L$a.b,L$g=L$a.c,L$h=L$a.d;return L$d.a=L$e,L$d.b=L$f,L$d.c=L$g,L$d.d=L$h,L$d.tx=L$b*L$e+L$a.tx+L$c*L$g,L$d.ty=L$c*L$h+L$a.ty+L$b*L$f,L$d},L$c.create=function(){var L$a=L$c._cache,L$b=L$a._length?L$a[--L$a._length]:new L$c;return L$b.inPool=!1,L$b},L$c.EMPTY=new L$c,L$c.TEMP=new L$c,L$c._cache=[],L$c}(),L$A=function(){function L$a(L$a,L$b){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),this.x=L$a,this.y=L$b}L$k(L$a,"laya.maths.Point");var L$b=L$a.prototype;return L$b.setTo=function(L$a,L$b){return this.x=L$a,this.y=L$b,this},L$b.distance=function(L$a,L$b){return Math.sqrt((this.x-L$a)*(this.x-L$a)+(this.y-L$b)*(this.y-L$b))},L$b.toString=function(){return this.x+","+this.y},L$b.normalize=function(){var L$a=Math.sqrt(this.x*this.x+this.y*this.y);if(0<L$a){var L$b=1/L$a;this.x*=L$b,this.y*=L$b}},L$a.TEMP=new L$a,L$a.EMPTY=new L$a,L$a}(),L$B=function(){function L$j(L$a,L$b,L$c,L$d){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0),this.x=L$a,this.y=L$b,this.width=L$c,this.height=L$d}L$k(L$j,"laya.maths.Rectangle");var L$a=L$j.prototype;return L$a.setTo=function(L$a,L$b,L$c,L$d){return this.x=L$a,this.y=L$b,this.width=L$c,this.height=L$d,this},L$a.copyFrom=function(L$a){return this.x=L$a.x,this.y=L$a.y,this.width=L$a.width,this.height=L$a.height,this},L$a.contains=function(L$a,L$b){return!(this.width<=0||this.height<=0)&&(L$a>=this.x&&L$a<this.right&&L$b>=this.y&&L$b<this.bottom)},L$a.intersects=function(L$a){return!(L$a.x>this.x+this.width||L$a.x+L$a.width<this.x||L$a.y>this.y+this.height||L$a.y+L$a.height<this.y)},L$a.intersection=function(L$a,L$b){return this.intersects(L$a)?(L$b||(L$b=new L$j),L$b.x=Math.max(this.x,L$a.x),L$b.y=Math.max(this.y,L$a.y),L$b.width=Math.min(this.right,L$a.right)-L$b.x,L$b.height=Math.min(this.bottom,L$a.bottom)-L$b.y,L$b):null},L$a.union=function(L$a,L$b){return L$b||(L$b=new L$j),this.clone(L$b),L$a.width<=0||L$a.height<=0?L$b:(L$b.addPoint(L$a.x,L$a.y),L$b.addPoint(L$a.right,L$a.bottom),this)},L$a.clone=function(L$a){return L$a||(L$a=new L$j),L$a.x=this.x,L$a.y=this.y,L$a.width=this.width,L$a.height=this.height,L$a},L$a.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},L$a.equals=function(L$a){return!(!L$a||L$a.x!==this.x||L$a.y!==this.y||L$a.width!==this.width||L$a.height!==this.height)},L$a.addPoint=function(L$a,L$b){return this.x>L$a&&(this.width+=this.x-L$a,this.x=L$a),this.y>L$b&&(this.height+=this.y-L$b,this.y=L$b),this.width<L$a-this.x&&(this.width=L$a-this.x),this.height<L$b-this.y&&(this.height=L$b-this.y),this},L$a._getBoundPoints=function(){var L$a=L$j._temB;return(L$a.length=0)==this.width||0==this.height||L$a.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),L$a},L$a.isEmpty=function(){return this.width<=0||this.height<=0},L$o(0,L$a,"right",function(){return this.x+this.width}),L$o(0,L$a,"bottom",function(){return this.y+this.height}),L$j._getBoundPointS=function(L$a,L$b,L$c,L$d){var L$e=L$j._temA;return(L$e.length=0)==L$c||0==L$d||L$e.push(L$a,L$b,L$a+L$c,L$b,L$a,L$b+L$d,L$a+L$c,L$b+L$d),L$e},L$j._getWrapRec=function(L$a,L$b){if(!L$a||L$a.length<1)return L$b?L$b.setTo(0,0,0,0):L$j.TEMP.setTo(0,0,0,0);L$b=L$b||new L$j;var L$c,L$d,L$e,L$f,L$g,L$h=L$a.length,L$i=L$A.TEMP;for(L$e=L$g=-(L$d=L$f=99999),L$c=0;L$c<L$h;L$c+=2)L$i.x=L$a[L$c],L$i.y=L$a[L$c+1],L$d=L$d<L$i.x?L$d:L$i.x,L$f=L$f<L$i.y?L$f:L$i.y,L$e=L$e>L$i.x?L$e:L$i.x,L$g=L$g>L$i.y?L$g:L$i.y;return L$b.setTo(L$d,L$f,L$e-L$d,L$g-L$f)},L$j.EMPTY=new L$j,L$j.TEMP=new L$j,L$j._temB=[],L$j._temA=[],L$j}(),L$E=function(){function L$i(){}return L$k(L$i,"laya.media.SoundManager"),L$o(1,L$i,"useAudioMusic",function(){return L$i._useAudioMusic},function(L$a){L$i._useAudioMusic=L$a,L$i._musicClass=L$a?L$ca:null}),L$o(1,L$i,"autoStopMusic",function(){return L$i._autoStopMusic},function(L$a){L$z.stage.off("blur",null,L$i._stageOnBlur),L$z.stage.off("focus",null,L$i._stageOnFocus),L$z.stage.off("visibilitychange",null,L$i._visibilityChange),(L$i._autoStopMusic=L$a)&&(L$z.stage.on("blur",null,L$i._stageOnBlur),L$z.stage.on("focus",null,L$i._stageOnFocus),L$z.stage.on("visibilitychange",null,L$i._visibilityChange))}),L$o(1,L$i,"muted",function(){return L$i._muted},function(L$a){L$a!=L$i._muted&&(L$a&&L$i.stopAllSound(),L$i.musicMuted=L$a,L$i._muted=L$a)}),L$o(1,L$i,"musicMuted",function(){return L$i._musicMuted},function(L$a){L$a!=L$i._musicMuted&&(L$a?(L$i._tMusic&&L$i._musicChannel&&!L$i._musicChannel.isStopped?L$i._musicChannel.pause():L$i._musicChannel=null,L$i._musicMuted=L$a):(L$i._musicMuted=L$a,L$i._tMusic&&L$i._musicChannel&&L$i._musicChannel.resume()))}),L$o(1,L$i,"soundMuted",function(){return L$i._soundMuted},function(L$a){L$i._soundMuted=L$a}),L$i.addChannel=function(L$a){0<=L$i._channels.indexOf(L$a)||(L$i._channels.push(L$a),L$i.autoReleaseSound&&0!=L$i._notUsedCount&&L$i._notUsedUrls[L$a.url]&&(delete L$i._notUsedUrls[L$a.url],0==--L$i._notUsedCount&&L$z.timer.clear(L$i,L$i.disposeSoundIfNotUsed)))},L$i.removeChannel=function(L$a){var L$b=L$i._channels,L$c=L$b.indexOf(L$a);if(-1!=L$c&&(L$b.splice(L$c,1),L$i.autoReleaseSound)){var L$d=L$a.url,L$e=L$i.defaultIntervals[L$d]||2e4;if(0<L$e){var L$f=!0;for(L$c=L$b.length-1;0<=L$c;L$c--)if(L$b[L$c].url==L$d){L$f=!1;break}L$f&&(L$i._notUsedUrls[L$d]=Date.now()+L$e,0==L$i._notUsedCount++&&L$z.timer.loop(1e4,L$i,L$i.disposeSoundIfNotUsed))}}},L$i.disposeSoundIfNotUsed=function(){var L$a=L$i._notUsedUrls;if(0!=L$i._notUsedCount){var L$b=Date.now();for(var L$c in L$a)L$b>=L$a[L$c]&&(delete L$a[L$c],--L$i._notUsedCount,L$i.destroySound(L$c));if(0!=L$i._notUsedCount)return}L$z.timer.clear(L$i,L$i.disposeSoundIfNotUsed)},L$i._visibilityChange=function(){L$z.stage.isVisibility?L$i._stageOnFocus():L$i._stageOnBlur()},L$i._stageOnBlur=function(){L$i._isActive=!1,L$i._musicChannel&&(L$i._musicChannel.isStopped||(L$i._blurPaused=!0,L$i._musicChannel.pause())),L$i.stopAllSound(),L$z.stage.once("mousedown",null,L$i._stageOnFocus)},L$i._recoverWebAudio=function(){L$fa.ctx&&"running"!=L$fa.ctx.state&&L$fa.ctx.resume&&L$fa.ctx.resume()},L$i._stageOnFocus=function(){if(L$i._isActive=!0,L$i._recoverWebAudio(),L$z.stage.off("mousedown",null,L$i._stageOnFocus),L$i._blurPaused){var L$a=L$i._musicChannel;L$a&&L$i._music&&L$a.isStopped&&(L$i._blurPaused=!1,L$i._music._disposed?L$i.playMusic(L$a.url,L$a.loops,L$a.startHandler,L$a.completeHandler,L$a.startTime):L$a.audioBuffer?L$a.resume():L$i._music.play(L$a.startTime,L$a.loops,L$a.startHandler,L$a))}},L$i.playSound=function(L$a,L$b,L$c,L$d,L$e,L$f){if(void 0===L$b&&(L$b=1),void 0===L$f&&(L$f=0),!L$a)return null;if(L$i._muted)return null;if(L$i._recoverWebAudio(),L$a==L$i._tMusic){if(L$i._musicMuted)return null}else{if(!L$i._isActive)return null;if(L$i._soundMuted)return null}var L$g,L$h=L$i._pool[L$a];return L$e||(L$e=L$i._soundClass),L$h||((L$h=new L$e).load(L$a),L$i._pool[L$a]=L$h),(L$g=L$h.play(L$f,L$b,L$c))?(L$a==L$i._tMusic&&(L$i._music=L$h,L$i._isActive||(L$i._blurPaused=!0,L$g.pause())),L$g.url=L$a,L$g.volume=L$a==L$i._tMusic?L$i.musicVolume:L$i.soundVolume,L$g.completeHandler=L$d,L$g):null},L$i.destroySound=function(L$a){var L$b=L$i._pool[L$a];L$b&&(delete L$i._pool[L$a],L$b.dispose())},L$i.playMusic=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$b&&(L$b=0),void 0===L$e&&(L$e=0),L$i._tMusic=L$a,L$i._musicChannel&&L$i._musicChannel.stop(),L$i._musicChannel=L$i.playSound(L$a,L$b,L$c,L$d,null,L$e)},L$i.stopSound=function(L$a){for(var L$b,L$c=L$i._channels.length-1;0<=L$c;L$c--)(L$b=L$i._channels[L$c]).url==L$a&&L$b.stop()},L$i.stopAll=function(){L$i._tMusic=null;var L$a=0;for(L$a=L$i._channels.length-1;0<=L$a;L$a--)L$i._channels[L$a].stop()},L$i.stopAllSound=function(){var L$a,L$b=0;for(L$b=L$i._channels.length-1;0<=L$b;L$b--)(L$a=L$i._channels[L$b]).url!=L$i._tMusic&&L$a.stop()},L$i.stopMusic=function(){L$i._musicChannel&&L$i._musicChannel.stop(),L$i._tMusic=null},L$i.setSoundVolume=function(L$a,L$b){if(L$b)L$i._setVolume(L$b,L$a);else{L$i.soundVolume=L$a;var L$c,L$d=0;for(L$d=L$i._channels.length-1;0<=L$d;L$d--)(L$c=L$i._channels[L$d]).url!=L$i._tMusic&&(L$c.volume=L$a)}},L$i.setMusicVolume=function(L$a){L$i.musicVolume=L$a,L$i._setVolume(L$i._tMusic,L$a)},L$i._setVolume=function(L$a,L$b){for(var L$c,L$d=L$i._channels.length-1;0<=L$d;L$d--)(L$c=L$i._channels[L$d]).url==L$a&&(L$c.volume=L$b)},L$i.musicVolume=1,L$i.soundVolume=1,L$i.playbackRate=1,L$i._useAudioMusic=!0,L$i._muted=!1,L$i._soundMuted=!1,L$i._musicMuted=!1,L$i._tMusic=null,L$i._musicChannel=null,L$i._music=null,L$i._channels=[],L$i._autoStopMusic=!1,L$i._blurPaused=!1,L$i._isActive=!0,L$i._soundClass=null,L$i._musicClass=null,L$i.autoReleaseSound=!0,L$i._pool={},L$i.defaultIntervals={},L$i._notUsedUrls={},L$i._notUsedCount=0,L$i}(),L$C=function(){var L$a;function L$c(){}return L$k(L$c,"laya.net.LocalStorage"),L$c.__init__=function(){L$c._baseClass||(L$c._baseClass=L$a).init(),L$c.items=L$c._baseClass.items,L$c.support=L$c._baseClass.support},L$c.setItem=function(L$a,L$b){L$c._baseClass.setItem(L$a,L$b)},L$c.getItem=function(L$a){return L$c._baseClass.getItem(L$a)},L$c.setJSON=function(L$a,L$b){L$c._baseClass.setJSON(L$a,L$b)},L$c.getJSON=function(L$a){return L$c._baseClass.getJSON(L$a)},L$c.removeItem=function(L$a){L$c._baseClass.removeItem(L$a)},L$c.clear=function(){L$c._baseClass.clear()},L$c._baseClass=null,L$c.items=null,L$c.support=!1,L$c.__init$=function(){L$a=function(){function L$c(){}return L$k(L$c,""),L$c.init=function(){try{L$c.support=!0,L$c.items=L$g.localStorage,L$c.setItem("laya","1"),L$c.removeItem("laya")}catch(L$a){L$c.support=!1}L$c.support||console.log("LocalStorage is not supprot or browser is private mode.")},L$c.setItem=function(L$a,L$b){try{L$c.support&&L$c.items.setItem(L$a,L$b)}catch(L$a){console.warn("set localStorage failed",L$a)}},L$c.getItem=function(L$a){return L$c.support?L$c.items.getItem(L$a):null},L$c.setJSON=function(L$a,L$b){try{L$c.support&&L$c.items.setItem(L$a,JSON.stringify(L$b))}catch(L$a){console.warn("set localStorage failed",L$a)}},L$c.getJSON=function(L$a){return JSON.parse(L$c.support?L$c.items.getItem(L$a):null)},L$c.removeItem=function(L$a){L$c.support&&L$c.items.removeItem(L$a)},L$c.clear=function(){L$c.support&&L$c.items.clear()},L$c.items=null,L$c.support=!1,L$c}()},L$c}(),L$H=(function(){function L$d(){}L$k(L$d,"laya.net.ResourceVersion"),L$d.enable=function(L$a,L$b,L$c){void 0===L$c&&(L$c=2),laya.net.ResourceVersion.type=L$c,L$z.loader.load(L$a,L$s.create(null,L$d.onManifestLoaded,[L$b]),null,"json"),L$I.customFormat=L$d.addVersionPrefix},L$d.onManifestLoaded=function(L$a,L$b){L$d.manifest=L$b,L$a.run(),L$b||console.warn("资源版本清单文件不存在，不使用资源版本管理。忽略ERR_FILE_NOT_FOUND错误。")},L$d.addVersionPrefix=function(L$a){return L$d.manifest&&L$d.manifest[L$a]?2==L$d.type?L$d.manifest[L$a]:L$d.manifest[L$a]+"/"+L$a:L$a},L$d.FOLDER_VERSION=1,L$d.FILENAME_VERSION=2,L$d.manifest=null,L$d.type=1}(),function(){function L$a(){this.fontName=null,this.complete=null,this.err=null,this._fontTxt=null,this._url=null,this._div=null,this._txtWidth=NaN,this._http=null}L$k(L$a,"laya.net.TTFLoader");var L$b=L$a.prototype;return L$b.load=function(L$a){var L$b=(this._url=L$a).split(".ttf")[0].split("/");this.fontName=L$b[L$b.length-1],L$O.window.conch?this._loadConch():L$O.window.FontFace?this._loadWithFontFace():this._loadWithCSS()},L$b._loadConch=function(){this._http=new L$ga,this._http.on("error",this,this._onErr),this._http.on("complete",this,this._onHttpLoaded),this._http.send(this._url,null,"get","arraybuffer")},L$b._onHttpLoaded=function(L$a){L$O.window.conch.setFontFaceFromBuffer(this.fontName,L$a),this._clearHttp(),this._complete()},L$b._clearHttp=function(){this._http&&(this._http.off("error",this,this._onErr),this._http.off("complete",this,this._onHttpLoaded),this._http=null)},L$b._onErr=function(){this._clearHttp(),this.err&&(this.err.runWith("fail:"+this._url),this.err=null)},L$b._complete=function(){L$z.timer.clear(this,this._complete),L$z.timer.clear(this,this._checkComplete),this._div&&this._div.parentNode&&(this._div.parentNode.removeChild(this._div),this._div=null),this.complete&&(this.complete.runWith(this),this.complete=null)},L$b._checkComplete=function(){L$F.measureText("LayaTTFFont",this._fontTxt).width!=this._txtWidth&&this._complete()},L$b._loadWithFontFace=function(){var L$a=new L$O.window.FontFace(this.fontName,"url('"+this._url+"')");L$O.window.document.fonts.add(L$a);var L$b=this;L$a.loaded.then(function(){L$b._complete()}),L$a.load()},L$b._createDiv=function(){this._div=L$O.createElement("div"),this._div.innerHTML="laya";var L$a=this._div.style;L$a.fontFamily=this.fontName,L$a.position="absolute",L$a.left="-100px",L$a.top="-100px",L$O.document.body.appendChild(this._div)},L$b._loadWithCSS=function(){var L$a=this,L$b=L$O.createElement("style");L$b.type="text/css",L$O.document.body.appendChild(L$b),L$b.textContent="@font-face { font-family:'"+this.fontName+"'; src:url('"+this._url+"');}",this._fontTxt="40px "+this.fontName,this._txtWidth=L$F.measureText("LayaTTFFont",this._fontTxt).width;var L$c=this;L$b.onload=function(){L$z.timer.once(1e4,L$c,L$a._complete)},L$z.timer.loop(20,this,this._checkComplete),this._createDiv()},L$a._testString="LayaTTFFont",L$a}()),L$I=function(){function L$d(L$a){this._url=null,this._path=null,this._url=L$d.formatURL(L$a),this._path=L$d.getPath(L$a)}L$k(L$d,"laya.net.URL");var L$a=L$d.prototype;return L$o(0,L$a,"path",function(){return this._path}),L$o(0,L$a,"url",function(){return this._url}),L$d.formatURL=function(L$a,L$b){if(!L$a)return"null path";if(0<L$a.indexOf(":"))return L$a;null!=L$d.customFormat&&(L$a=L$d.customFormat(L$a,L$b));var L$c=L$a.charAt(0);if("."===L$c)return L$d.formatRelativePath((L$b||L$d.basePath)+L$a);if("~"===L$c)return L$d.rootPath+L$a.substring(1);if("d"===L$c){if(0===L$a.indexOf("data:image"))return L$a}else if("/"===L$c)return L$a;return(L$b||L$d.basePath)+L$a},L$d.formatRelativePath=function(L$a){for(var L$b=L$a.split("/"),L$c=0,L$d=L$b.length;L$c<L$d;L$c++)".."==L$b[L$c]&&(L$b.splice(L$c-1,2),L$c-=2);return L$b.join("/")},L$d.isAbsolute=function(L$a){return 0<L$a.indexOf(":")||"/"==L$a.charAt(0)},L$d.getPath=function(L$a){var L$b=L$a.lastIndexOf("/");return 0<L$b?L$a.substr(0,L$b+1):""},L$d.getFileName=function(L$a){var L$b=L$a.lastIndexOf("/");return 0<L$b?L$a.substr(L$b+1):L$a},L$d.version={},L$d.basePath="",L$d.rootPath="",L$d.customFormat=function(L$a){var L$b=L$d.version[L$a];return!L$J.isConchApp&&L$b&&(L$a+="?v="+L$b),L$a},L$d}(),L$J=function(){function L$e(L$a,L$b){this._timeId=0;var L$c=L$e._mainCanvas.source.style;L$c.position="absolute",L$c.top=L$c.left="0px",L$c.background="#000000",L$e._mainCanvas.source.id="layaCanvas";var L$d=laya.renders.Render.isWebGL;L$e._mainCanvas.source.width=L$a,L$e._mainCanvas.source.height=L$b,L$d&&L$e.WebGL.init(L$e._mainCanvas,L$a,L$b),L$O.container.appendChild(L$e._mainCanvas.source),(L$e._context=new L$K(L$a,L$b,L$d?null:L$e._mainCanvas)).ctx.setIsMainContext(),L$O.window.requestAnimationFrame(function L$a(L$b){L$O.window.requestAnimationFrame(L$a);L$z.stage._loop()}),L$z.stage.on("visibilitychange",this,this._onVisibilitychange)}L$k(L$e,"laya.renders.Render");var L$a=L$e.prototype;return L$a._onVisibilitychange=function(){L$z.stage.isVisibility?0!=this._timeId&&L$O.window.clearInterval(this._timeId):this._timeId=L$O.window.setInterval(this._enterFrame,1e3)},L$a._enterFrame=function(L$a){L$z.stage._loop()},L$o(1,L$e,"context",function(){return L$e._context}),L$o(1,L$e,"canvas",function(){return L$e._mainCanvas.source}),L$e._context=null,L$e._mainCanvas=null,L$e.WebGL=null,L$e.isConchNode=!1,L$e.isConchApp=!1,L$e.isConchWebGL=!1,L$e.isWebGL=!1,L$e.is3DMode=!1,L$e.optimizeTextureMemory=function(L$a,L$b){return!0},L$e.__init$=function(){L$g.ConchRenderType=L$g.ConchRenderType||1,L$g.ConchRenderType|=L$g.conch?4:0,L$e.isConchNode=5==(5&L$g.ConchRenderType),L$e.isConchApp=4==(4&L$g.ConchRenderType),L$e.isConchWebGL=6==L$g.ConchRenderType},L$e}(),L$K=function(){function L$g(L$a,L$b,L$c){this.x=0,this.y=0,this._drawTexture=function(L$a,L$b,L$c){L$c[0].loaded&&this.ctx.drawTexture(L$c[0],L$c[1],L$c[2],L$c[3],L$c[4],L$a,L$b)},this._fillTexture=function(L$a,L$b,L$c){L$c[0].loaded&&this.ctx.fillTexture(L$c[0],L$c[1]+L$a,L$c[2]+L$b,L$c[3],L$c[4],L$c[5],L$c[6],L$c[7])},this._drawTextureWithTransform=function(L$a,L$b,L$c){L$c[0].loaded&&this.ctx.drawTextureWithTransform(L$c[0],L$c[1],L$c[2],L$c[3],L$c[4],L$c[5],L$a,L$b,L$c[6])},this._fillQuadrangle=function(L$a,L$b,L$c){this.ctx.fillQuadrangle(L$c[0],L$c[1],L$c[2],L$c[3],L$c[4])},this._drawRect=function(L$a,L$b,L$c){var L$d=this.ctx;null!=L$c[4]&&(L$d.fillStyle=L$c[4],L$d.fillRect(L$a+L$c[0],L$b+L$c[1],L$c[2],L$c[3],null)),null!=L$c[5]&&(L$d.strokeStyle=L$c[5],L$d.lineWidth=L$c[6],L$d.strokeRect(L$a+L$c[0],L$b+L$c[1],L$c[2],L$c[3],L$c[6]))},this._drawPie=function(L$a,L$b,L$c){var L$d=this.ctx;L$J.isWebGL&&L$d.setPathId(L$c[8]),L$d.beginPath(),L$J.isWebGL?(L$d.movePath(L$c[0]+L$a,L$c[1]+L$b),L$d.moveTo(0,0)):L$d.moveTo(L$a+L$c[0],L$b+L$c[1]),L$d.arc(L$a+L$c[0],L$b+L$c[1],L$c[2],L$c[3],L$c[4]),L$d.closePath(),this._fillAndStroke(L$c[5],L$c[6],L$c[7],!0)},this._clipRect=function(L$a,L$b,L$c){this.ctx.clipRect(L$a+L$c[0],L$b+L$c[1],L$c[2],L$c[3])},this._fillRect=function(L$a,L$b,L$c){this.ctx.fillRect(L$a+L$c[0],L$b+L$c[1],L$c[2],L$c[3],L$c[4])},this._drawCircle=function(L$a,L$b,L$c){var L$d=this.ctx;L$J.isWebGL&&L$d.setPathId(L$c[6]),L$X.drawCall++,L$d.beginPath(),L$J.isWebGL&&L$d.movePath(L$c[0]+L$a,L$c[1]+L$b),L$d.arc(L$c[0]+L$a,L$c[1]+L$b,L$c[2],0,L$g.PI2),L$d.closePath(),this._fillAndStroke(L$c[3],L$c[4],L$c[5],!0)},this._fillCircle=function(L$a,L$b,L$c){L$X.drawCall++;var L$d=this.ctx;L$d.beginPath(),L$d.fillStyle=L$c[3],L$d.arc(L$c[0]+L$a,L$c[1]+L$b,L$c[2],0,L$g.PI2),L$d.fill()},this._setShader=function(L$a,L$b,L$c){this.ctx.setShader(L$c[0])},this._drawLine=function(L$a,L$b,L$c){var L$d=this.ctx;L$J.isWebGL&&L$d.setPathId(L$c[6]),L$d.beginPath(),L$d.strokeStyle=L$c[4],L$d.lineWidth=L$c[5],L$J.isWebGL?(L$d.movePath(L$a,L$b),L$d.moveTo(L$c[0],L$c[1]),L$d.lineTo(L$c[2],L$c[3])):(L$d.moveTo(L$a+L$c[0],L$b+L$c[1]),L$d.lineTo(L$a+L$c[2],L$b+L$c[3])),L$d.stroke()},this._drawLines=function(L$a,L$b,L$c){var L$d=this.ctx;L$J.isWebGL&&L$d.setPathId(L$c[5]),L$d.beginPath(),L$a+=L$c[0],L$b+=L$c[1],L$J.isWebGL&&L$d.movePath(L$a,L$b),L$d.strokeStyle=L$c[3],L$d.lineWidth=L$c[4];var L$e=L$c[2],L$f=2,L$g=L$e.length;if(L$J.isWebGL)for(L$d.moveTo(L$e[0],L$e[1]);L$f<L$g;)L$d.lineTo(L$e[L$f++],L$e[L$f++]);else for(L$d.moveTo(L$a+L$e[0],L$b+L$e[1]);L$f<L$g;)L$d.lineTo(L$a+L$e[L$f++],L$b+L$e[L$f++]);L$d.stroke()},this._drawLinesWebGL=function(L$a,L$b,L$c){this.ctx.drawLines(L$a+this.x+L$c[0],L$b+this.y+L$c[1],L$c[2],L$c[3],L$c[4])},this._drawCurves=function(L$a,L$b,L$c){this.ctx.drawCurves(L$a,L$b,L$c)},this._draw=function(L$a,L$b,L$c){L$c[0].call(null,this,L$a,L$b)},this._transformByMatrix=function(L$a,L$b,L$c){this.ctx.transformByMatrix(L$c[0])},this._setTransform=function(L$a,L$b,L$c){this.ctx.setTransform(L$c[0],L$c[1],L$c[2],L$c[3],L$c[4],L$c[5])},this._setTransformByMatrix=function(L$a,L$b,L$c){this.ctx.setTransformByMatrix(L$c[0])},this._save=function(L$a,L$b,L$c){this.ctx.save()},this._restore=function(L$a,L$b,L$c){this.ctx.restore()},this._translate=function(L$a,L$b,L$c){this.ctx.translate(L$c[0],L$c[1])},this._transform=function(L$a,L$b,L$c){this.ctx.translate(L$c[1]+L$a,L$c[2]+L$b);var L$d=L$c[0];this.ctx.transform(L$d.a,L$d.b,L$d.c,L$d.d,L$d.tx,L$d.ty),this.ctx.translate(-L$a-L$c[1],-L$b-L$c[2])},this._rotate=function(L$a,L$b,L$c){this.ctx.translate(L$c[1]+L$a,L$c[2]+L$b),this.ctx.rotate(L$c[0]),this.ctx.translate(-L$a-L$c[1],-L$b-L$c[2])},this._scale=function(L$a,L$b,L$c){this.ctx.translate(L$c[2]+L$a,L$c[3]+L$b),this.ctx.scale(L$c[0],L$c[1]),this.ctx.translate(-L$a-L$c[2],-L$b-L$c[3])},this._alpha=function(L$a,L$b,L$c){this.ctx.globalAlpha*=L$c[0]},this._setAlpha=function(L$a,L$b,L$c){this.ctx.globalAlpha=L$c[0]},this._fillText=function(L$a,L$b,L$c){this.ctx.fillText(L$c[0],L$c[1]+L$a,L$c[2]+L$b,L$c[3],L$c[4],L$c[5])},this._strokeText=function(L$a,L$b,L$c){this.ctx.strokeText(L$c[0],L$c[1]+L$a,L$c[2]+L$b,L$c[3],L$c[4],L$c[5],L$c[6])},this._fillBorderText=function(L$a,L$b,L$c){this.ctx.fillBorderText(L$c[0],L$c[1]+L$a,L$c[2]+L$b,L$c[3],L$c[4],L$c[5],L$c[6],L$c[7])},this._blendMode=function(L$a,L$b,L$c){this.ctx.globalCompositeOperation=L$c[0]},this._beginClip=function(L$a,L$b,L$c){this.ctx.beginClip&&this.ctx.beginClip(L$a+L$c[0],L$b+L$c[1],L$c[2],L$c[3])},this._setIBVB=function(L$a,L$b,L$c){this.ctx.setIBVB(L$c[0]+L$a,L$c[1]+L$b,L$c[2],L$c[3],L$c[4],L$c[5],L$c[6],L$c[7])},this._fillTrangles=function(L$a,L$b,L$c){this.ctx.fillTrangles(L$c[0],L$c[1]+L$a,L$c[2]+L$b,L$c[3],L$c[4])},this._drawPath=function(L$a,L$b,L$c){var L$d=this.ctx;L$J.isWebGL&&L$d.setPathId(-1),L$d.beginPath(),L$a+=L$c[0],L$b+=L$c[1],L$J.isWebGL&&L$d.movePath(L$a,L$b);for(var L$e=L$c[2],L$f=0,L$g=L$e.length;L$f<L$g;L$f++){var L$h=L$e[L$f];switch(L$h[0]){case"moveTo":L$J.isWebGL?L$d.moveTo(L$h[1],L$h[2]):L$d.moveTo(L$a+L$h[1],L$b+L$h[2]);break;case"lineTo":L$J.isWebGL?L$d.lineTo(L$h[1],L$h[2]):L$d.lineTo(L$a+L$h[1],L$b+L$h[2]);break;case"arcTo":L$J.isWebGL?L$d.arcTo(L$h[1],L$h[2],L$h[3],L$h[4],L$h[5]):L$d.arcTo(L$a+L$h[1],L$b+L$h[2],L$a+L$h[3],L$b+L$h[4],L$h[5]);break;case"closePath":L$d.closePath()}}var L$i=L$c[3];null!=L$i&&(L$d.fillStyle=L$i.fillStyle,L$d.fill());var L$j=L$c[4];null!=L$j&&(L$d.strokeStyle=L$j.strokeStyle,L$d.lineWidth=L$j.lineWidth||1,L$d.lineJoin=L$j.lineJoin,L$d.lineCap=L$j.lineCap,L$d.miterLimit=L$j.miterLimit,L$d.stroke())},this.drawPoly=function(L$a,L$b,L$c){this.ctx.drawPoly(L$a+this.x+L$c[0],L$b+this.y+L$c[1],L$c[2],L$c[3],L$c[4],L$c[5],L$c[6])},this._drawPoly=function(L$a,L$b,L$c){var L$d=this.ctx,L$e=L$c[2],L$f=2,L$g=L$e.length;if(L$J.isWebGL)for(L$d.setPathId(L$c[6]),L$d.beginPath(),L$a+=L$c[0],L$b+=L$c[1],L$d.movePath(L$a,L$b),L$d.moveTo(L$e[0],L$e[1]);L$f<L$g;)L$d.lineTo(L$e[L$f++],L$e[L$f++]);else for(L$d.beginPath(),L$a+=L$c[0],L$b+=L$c[1],L$d.moveTo(L$a+L$e[0],L$b+L$e[1]);L$f<L$g;)L$d.lineTo(L$a+L$e[L$f++],L$b+L$e[L$f++]);L$d.closePath(),this._fillAndStroke(L$c[3],L$c[4],L$c[5],L$c[7])},this._drawSkin=function(L$a,L$b,L$c){var L$d=L$c[0];if(L$d){var L$e=this.ctx;L$d.render(L$e,L$a,L$b)}},this._drawParticle=function(L$a,L$b,L$c){this.ctx.drawParticle(L$a+this.x,L$b+this.y,L$c[0])},this._setFilters=function(L$a,L$b,L$c){this.ctx.setFilters(L$c)},L$c?this.ctx=L$c.getContext("2d"):(L$c=L$ta.create("3D"),this.ctx=L$F.createWebGLContext2D(L$c),L$c._setContext(this.ctx)),L$c.size(L$a,L$b),this.canvas=L$c}L$k(L$g,"laya.renders.RenderContext");var L$a=L$g.prototype;return L$a.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null,this.ctx=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},L$a.drawTexture=function(L$a,L$b,L$c,L$d,L$e){L$a.loaded&&this.ctx.drawTexture(L$a,L$b,L$c,L$d,L$e,this.x,this.y)},L$a._drawTextures=function(L$a,L$b,L$c){L$c[0].loaded&&this.ctx.drawTextures(L$c[0],L$c[1],L$a+this.x,L$b+this.y)},L$a.drawTextureWithTransform=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$a.loaded&&this.ctx.drawTextureWithTransform(L$a,L$b,L$c,L$d,L$e,L$f,this.x,this.y,L$g)},L$a.fillQuadrangle=function(L$a,L$b,L$c,L$d,L$e){this.ctx.fillQuadrangle(L$a,L$b,L$c,L$d,L$e)},L$a.drawCanvas=function(L$a,L$b,L$c,L$d,L$e){this.ctx.drawCanvas(L$a,L$b+this.x,L$c+this.y,L$d,L$e)},L$a.drawRect=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$f&&(L$f=1);var L$g=this.ctx;L$g.strokeStyle=L$e,L$g.lineWidth=L$f,L$g.strokeRect(L$a+this.x,L$b+this.y,L$c,L$d,L$f)},L$a._fillAndStroke=function(L$a,L$b,L$c,L$d){void 0===L$d&&(L$d=!1);var L$e=this.ctx;null!=L$a&&(L$e.fillStyle=L$a,L$J.isWebGL?L$e.fill(L$d):L$e.fill()),null!=L$b&&0<L$c&&(L$e.strokeStyle=L$b,L$e.lineWidth=L$c,L$e.stroke())},L$a.clipRect=function(L$a,L$b,L$c,L$d){this.ctx.clipRect(L$a+this.x,L$b+this.y,L$c,L$d)},L$a.fillRect=function(L$a,L$b,L$c,L$d,L$e){this.ctx.fillRect(L$a+this.x,L$b+this.y,L$c,L$d,L$e)},L$a.drawCircle=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=1),L$X.drawCall++;var L$f=this.ctx;L$f.beginPath(),L$f.strokeStyle=L$d,L$f.lineWidth=L$e,L$f.arc(L$a+this.x,L$b+this.y,L$c,0,L$g.PI2),L$f.stroke()},L$a.drawTriangles=function(L$a,L$b,L$c){if(L$J.isWebGL)this.ctx.drawTriangles(L$c[0],L$a+L$c[1],L$b+L$c[2],L$c[3],L$c[4],L$c[5],L$c[6],L$c[7],L$c[8],L$c[9]);else{var L$d=L$c[5],L$e=0,L$f=L$d.length,L$g=this.ctx;for(L$e=0;L$e<L$f;L$e+=3){var L$h=2*L$d[L$e],L$i=2*L$d[L$e+1],L$j=2*L$d[L$e+2];L$g.drawTriangle(L$c[0],L$c[3],L$c[4],L$h,L$i,L$j,L$c[6],!0)}}},L$a.fillCircle=function(L$a,L$b,L$c,L$d){L$X.drawCall++;var L$e=this.ctx;L$e.beginPath(),L$e.fillStyle=L$d,L$e.arc(L$a+this.x,L$b+this.y,L$c,0,L$g.PI2),L$e.fill()},L$a.setShader=function(L$a){this.ctx.setShader(L$a)},L$a.drawLine=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$f&&(L$f=1);var L$g=this.ctx;L$g.beginPath(),L$g.strokeStyle=L$e,L$g.lineWidth=L$f,L$g.moveTo(this.x+L$a,this.y+L$b),L$g.lineTo(this.x+L$c,this.y+L$d),L$g.stroke()},L$a.clear=function(){this.ctx.clear()},L$a.transformByMatrix=function(L$a){this.ctx.transformByMatrix(L$a)},L$a.setTransform=function(L$a,L$b,L$c,L$d,L$e,L$f){this.ctx.setTransform(L$a,L$b,L$c,L$d,L$e,L$f)},L$a.setTransformByMatrix=function(L$a){this.ctx.setTransformByMatrix(L$a)},L$a.save=function(){this.ctx.save()},L$a.restore=function(){this.ctx.restore()},L$a.translate=function(L$a,L$b){this.ctx.translate(L$a,L$b)},L$a.transform=function(L$a,L$b,L$c,L$d,L$e,L$f){this.ctx.transform(L$a,L$b,L$c,L$d,L$e,L$f)},L$a.rotate=function(L$a){this.ctx.rotate(L$a)},L$a.scale=function(L$a,L$b){this.ctx.scale(L$a,L$b)},L$a.alpha=function(L$a){this.ctx.globalAlpha*=L$a},L$a.setAlpha=function(L$a){this.ctx.globalAlpha=L$a},L$a.fillWords=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$f&&(L$f=0),this.ctx.fillWords(L$a,L$b,L$c,L$d,L$e,L$f)},L$a.fillBorderWords=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this.ctx.fillBorderWords(L$a,L$b,L$c,L$d,L$e,L$f,L$g)},L$a.fillText=function(L$a,L$b,L$c,L$d,L$e,L$f){this.ctx.fillText(L$a,L$b+this.x,L$c+this.y,L$d,L$e,L$f)},L$a.strokeText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this.ctx.strokeText(L$a,L$b+this.x,L$c+this.y,L$d,L$e,L$f,L$g)},L$a.blendMode=function(L$a){this.ctx.globalCompositeOperation=L$a},L$a.flush=function(){this.ctx.flush&&this.ctx.flush()},L$a.addRenderObject=function(L$a){this.ctx.addRenderObject(L$a)},L$a.beginClip=function(L$a,L$b,L$c,L$d){this.ctx.beginClip&&this.ctx.beginClip(L$a,L$b,L$c,L$d)},L$a.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},L$a.fillTrangles=function(L$a,L$b,L$c){this.ctx.fillTrangles(L$c[0],L$c[1],L$c[2],L$c[3],4<L$c.length?L$c[4]:null)},L$g.PI2=2*Math.PI,L$g}(),L$L=function(){function L$g(L$a,L$b){switch(this._next=L$b||L$g.NORENDER,L$a){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=L$r._filter);case 69905:return void(this._fun=L$g._initRenderFun)}this.onCreate(L$a)}L$k(L$g,"laya.renders.RenderSprite");var L$a=L$g.prototype;return L$a.onCreate=function(L$a){},L$a._style=function(L$a,L$b,L$c,L$d){L$a._style.render(L$a,L$b,L$c,L$d);var L$e=this._next;L$e._fun.call(L$e,L$a,L$b,L$c,L$d)},L$a._no=function(L$a,L$b,L$c,L$d){},L$a._custom=function(L$a,L$b,L$c,L$d){L$a.customRender(L$b,L$c,L$d);var L$e=L$a._style._tf;this._next._fun.call(this._next,L$a,L$b,L$c-L$e.translateX,L$d-L$e.translateY)},L$a._clip=function(L$a,L$b,L$c,L$d){var L$e=this._next;if(L$e!=L$g.NORENDER){var L$f=L$a._style.scrollRect;L$b.ctx.save(),L$b.ctx.clipRect(L$c,L$d,L$f.width,L$f.height),L$e._fun.call(L$e,L$a,L$b,L$c-L$f.x,L$d-L$f.y),L$b.ctx.restore()}},L$a._blend=function(L$a,L$b,L$c,L$d){var L$e=L$a._style;L$e.blendMode&&(L$b.ctx.globalCompositeOperation=L$e.blendMode);var L$f=this._next;L$f._fun.call(L$f,L$a,L$b,L$c,L$d),L$b.ctx.globalCompositeOperation="source-over"},L$a._mask=function(L$a,L$b,L$c,L$d){var L$e=this._next;L$e._fun.call(L$e,L$a,L$b,L$c,L$d);var L$f=L$a.mask;L$f&&(L$b.ctx.globalCompositeOperation="destination-in",(0<L$f.numChildren||!L$f.graphics._isOnlyOne())&&(L$f.cacheAsBitmap=!0),L$f.render(L$b,L$c-L$a.pivotX,L$d-L$a.pivotY)),L$b.ctx.globalCompositeOperation="source-over"},L$a._graphics=function(L$a,L$b,L$c,L$d){var L$e=L$a._style._tf;L$a._graphics&&L$a._graphics._render(L$a,L$b,L$c-L$e.translateX,L$d-L$e.translateY);var L$f=this._next;L$f._fun.call(L$f,L$a,L$b,L$c,L$d)},L$a._image=function(L$a,L$b,L$c,L$d){var L$e=L$a._style;L$b.ctx.drawTexture2(L$c,L$d,L$e._tf.translateX,L$e._tf.translateY,L$a.transform,L$e.alpha,L$e.blendMode,L$a._graphics._one)},L$a._image2=function(L$a,L$b,L$c,L$d){var L$e=L$a._style._tf;L$b.ctx.drawTexture2(L$c,L$d,L$e.translateX,L$e.translateY,L$a.transform,1,null,L$a._graphics._one)},L$a._alpha=function(L$a,L$b,L$c,L$d){var L$e;if(.01<(L$e=L$a._style.alpha)||L$a._needRepaint()){var L$f=L$b.ctx.globalAlpha;L$b.ctx.globalAlpha*=L$e;var L$g=this._next;L$g._fun.call(L$g,L$a,L$b,L$c,L$d),L$b.ctx.globalAlpha=L$f}},L$a._transform=function(L$a,L$b,L$c,L$d){var L$e=L$a.transform,L$f=this._next;L$e&&L$f!=L$g.NORENDER?(L$b.save(),L$b.transform(L$e.a,L$e.b,L$e.c,L$e.d,L$e.tx+L$c,L$e.ty+L$d),L$f._fun.call(L$f,L$a,L$b,0,0),L$b.restore()):L$f._fun.call(L$f,L$a,L$b,L$c,L$d)},L$a._childs=function(L$a,L$b,L$c,L$d){var L$e=L$a._style,L$f=L$e._tf;if(L$c=L$c-L$f.translateX+L$e.paddingLeft,L$d=L$d-L$f.translateY+L$e.paddingTop,L$e._calculation){var L$g=L$a._getWords();if(L$g){var L$h=L$e;L$h&&(L$h.stroke?L$b.fillBorderWords(L$g,L$c,L$d,L$h.font,L$h.color,L$h.strokeColor,L$h.stroke):L$b.fillWords(L$g,L$c,L$d,L$h.font,L$h.color,"none"!=L$h.textDecoration&&L$h.underLine?1:0))}}var L$i,L$j=L$a._childs,L$k=L$j.length;if(L$a.viewport||L$a.optimizeScrollRect&&L$a._style.scrollRect){var L$l=L$a.viewport||L$a._style.scrollRect,L$m=L$l.x,L$n=L$l.y,L$o=L$l.right,L$p=L$l.bottom,L$q=NaN,L$r=NaN;for(L$s=0;L$s<L$k;++L$s)(L$i=L$j[L$s]).visible&&(L$q=L$i._x)<L$o&&L$q+L$i.width>L$m&&(L$r=L$i._y)<L$p&&L$r+L$i.height>L$n&&L$i.render(L$b,L$c,L$d)}else for(var L$s=0;L$s<L$k;++L$s)(L$i=L$j[L$s])._style.visible&&L$i.render(L$b,L$c,L$d)},L$a._canvas=function(L$a,L$b,L$c,L$d){var L$e=L$a._$P.cacheCanvas;if(L$e){"bitmap"===L$e.type?L$X.canvasBitmap++:L$X.canvasNormal++;var L$f=L$e.ctx;if(L$a._needRepaint()||!L$f)this._canvas_repaint(L$a,L$b,L$c,L$d);else{var L$g=L$e._cacheRec;L$b.drawCanvas(L$f.canvas,L$c+L$g.x,L$d+L$g.y,L$g.width,L$g.height)}}else this._next._fun.call(this._next,L$a,L$b,L$c,L$d)},L$a._canvas_repaint=function(L$a,L$b,L$c,L$d){var L$e=L$a._$P.cacheCanvas,L$f=this._next;if(L$e){var L$g,L$h,L$i,L$j,L$k=L$e.ctx,L$l=L$a._needRepaint()||!L$k,L$m=L$e.type;if("bitmap"===L$m?L$X.canvasBitmap++:L$X.canvasNormal++,L$l){var L$n,L$o;L$e._cacheRec||(L$e._cacheRec=new L$B),L$J.isWebGL&&"bitmap"!==L$m?L$e._cacheRec.setTo(-L$a.pivotX,-L$a.pivotY,1,1):((L$j=L$a.getSelfBounds()).x=L$j.x-L$a.pivotX,L$j.y=L$j.y-L$a.pivotY,L$j.x=L$j.x-16,L$j.y=L$j.y-16,L$j.width=L$j.width+32,L$j.height=L$j.height+32,L$j.x=Math.floor(L$j.x+L$c)-L$c,L$j.y=Math.floor(L$j.y+L$d)-L$d,L$j.width=Math.floor(L$j.width),L$j.height=Math.floor(L$j.height),L$e._cacheRec.copyFrom(L$j)),L$j=L$e._cacheRec;var L$p,L$q=L$J.isWebGL?1:L$O.pixelRatio*L$z.stage.clientScaleX,L$r=L$J.isWebGL?1:L$O.pixelRatio*L$z.stage.clientScaleY;if(!L$J.isWebGL){var L$s,L$t=1,L$u=1;for(L$s=L$a;L$s&&L$s!=L$z.stage;)L$t*=L$s.scaleX,L$u*=L$s.scaleY,L$s=L$s.parent;L$J.isWebGL?(L$t<1&&(L$q*=L$t),L$u<1&&(L$r*=L$u)):(1<L$t&&(L$q*=L$t),1<L$u&&(L$r*=L$u))}if(L$a.scrollRect){var L$v=L$a.scrollRect;L$j.x-=L$v.x,L$j.y-=L$v.y}if(L$n=L$j.width*L$q,L$o=L$j.height*L$r,L$h=L$j.x,L$i=L$j.y,L$J.isWebGL&&"bitmap"===L$m&&(2048<L$n||2048<L$o))return console.warn("cache bitmap size larger than 2048,cache ignored"),L$e.ctx&&(L$W.recover("RenderContext",L$e.ctx),L$e.ctx.canvas.size(0,0),L$e.ctx=null),void L$f._fun.call(L$f,L$a,L$b,L$c,L$d);if(L$k||(L$k=L$e.ctx=L$W.getItem("RenderContext")||new L$K(L$n,L$o,L$ta.create("AUTO"))),L$k.ctx.sprite=L$a,(L$g=L$k.canvas).clear(),(L$g.width!=L$n||L$g.height!=L$o)&&L$g.size(L$n,L$o),"bitmap"===L$m?L$g.context.asBitmap=!0:"normal"===L$m&&(L$g.context.asBitmap=!1),1!=L$q||1!=L$r){var L$y=L$k.ctx;L$y.save(),L$y.scale(L$q,L$r),!L$J.isConchWebGL&&L$J.isConchApp&&(L$p=L$a._$P.cf)&&L$y.setFilterMatrix&&L$y.setFilterMatrix(L$p._mat,L$p._alpha),L$f._fun.call(L$f,L$a,L$k,-L$h,-L$i),L$y.restore(),L$J.isConchApp&&!L$J.isConchWebGL||L$a._applyFilters()}else L$y=L$k.ctx,!L$J.isConchWebGL&&L$J.isConchApp&&(L$p=L$a._$P.cf)&&L$y.setFilterMatrix&&L$y.setFilterMatrix(L$p._mat,L$p._alpha),L$f._fun.call(L$f,L$a,L$k,-L$h,-L$i),L$J.isConchApp&&!L$J.isConchWebGL||L$a._applyFilters();L$a._$P.staticCache&&(L$e.reCache=!1),L$X.canvasReCache++}else L$h=(L$j=L$e._cacheRec).x,L$i=L$j.y,L$g=L$k.canvas;L$b.drawCanvas(L$g,L$c+L$h,L$d+L$i,L$j.width,L$j.height)}else L$f._fun.call(L$f,L$a,L$k,L$c,L$d)},L$g.__init__=function(){var L$a,L$b,L$c=0;for(L$b=L$F.createRenderSprite(69905,null),L$a=L$g.renders.length=4096,L$c=0;L$c<L$a;L$c++)L$g.renders[L$c]=L$b;L$g.renders[0]=L$F.createRenderSprite(0,null),function(L$a,L$b){for(var L$c=0,L$d=0;L$d<L$a.length;L$d++)L$c|=L$a[L$d],L$g.renders[L$c]=L$b}([1,512,4,2],new L$g(1,null)),L$g.renders[513]=L$F.createRenderSprite(513,null),L$g.renders[517]=new L$g(517,null)},L$g._initRenderFun=function(L$a,L$b,L$c,L$d){var L$e=L$a._renderType;(L$g.renders[L$e]=L$g._getTypeRender(L$e))._fun(L$a,L$b,L$c,L$d)},L$g._getTypeRender=function(L$a){for(var L$b=null,L$c=2048;1<L$c;)L$c&L$a&&(L$b=L$F.createRenderSprite(L$c,L$b)),L$c>>=1;return L$b},L$g.IMAGE=1,L$g.ALPHA=2,L$g.TRANSFORM=4,L$g.BLEND=8,L$g.CANVAS=16,L$g.FILTERS=32,L$g.MASK=64,L$g.CLIP=128,L$g.STYLE=256,L$g.GRAPHICS=512,L$g.CUSTOM=1024,L$g.CHILDS=2048,L$g.INIT=69905,L$g.renders=[],L$g.NORENDER=new L$g(0,null),L$g}(),L$M=function(){function L$h(){this._repaint=!1}L$k(L$h,"laya.resource.Context");var L$a=L$h.prototype;return L$a.replaceReset=function(){var L$a,L$b,L$c=0;for(L$a=L$h.replaceKeys.length,L$c=0;L$c<L$a;L$c++)L$b=L$h.replaceKeys[L$c],this[L$h.newKeys[L$c]]=this[L$b]},L$a.replaceResotre=function(){this.__restore(),this.__reset()},L$a.setIsMainContext=function(){},L$a.drawTextures=function(L$a,L$b,L$c,L$d){L$X.drawCall+=L$b.length/2;for(var L$e=L$a.width,L$f=L$a.height,L$g=0,L$h=L$b.length;L$g<L$h;L$g+=2)this.drawTexture(L$a,L$b[L$g],L$b[L$g+1],L$e,L$f,L$c,L$d)},L$a.drawCanvas=function(L$a,L$b,L$c,L$d,L$e){L$X.drawCall++,this.drawImage(L$a.source,L$b,L$c,L$d,L$e)},L$a.fillRect=function(L$a,L$b,L$c,L$d,L$e){L$X.drawCall++,L$e&&(this.fillStyle=L$e),this.__fillRect(L$a,L$b,L$c,L$d)},L$a.fillText=function(L$a,L$b,L$c,L$d,L$e,L$f){L$X.drawCall++,3<arguments.length&&null!=L$d&&(this.font=L$d,this.fillStyle=L$e,this.textAlign=L$f,this.textBaseline="top"),this.__fillText(L$a,L$b,L$c)},L$a.fillBorderText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){L$X.drawCall++,this.font=L$d,this.fillStyle=L$e,this.textBaseline="top",this.strokeStyle=L$f,this.lineWidth=L$g,this.textAlign=L$h,this.__strokeText(L$a,L$b,L$c),this.__fillText(L$a,L$b,L$c)},L$a.strokeText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$X.drawCall++,3<arguments.length&&null!=L$d&&(this.font=L$d,this.strokeStyle=L$e,this.lineWidth=L$f,this.textAlign=L$g,this.textBaseline="top"),this.__strokeText(L$a,L$b,L$c)},L$a.transformByMatrix=function(L$a){this.transform(L$a.a,L$a.b,L$a.c,L$a.d,L$a.tx,L$a.ty)},L$a.setTransformByMatrix=function(L$a){this.setTransform(L$a.a,L$a.b,L$a.c,L$a.d,L$a.tx,L$a.ty)},L$a.clipRect=function(L$a,L$b,L$c,L$d){L$X.drawCall++,this.beginPath(),this.rect(L$a,L$b,L$c,L$d),this.clip()},L$a.drawTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$X.drawCall++;var L$h=L$a.uv,L$i=L$a.bitmap.width,L$j=L$a.bitmap.height;this.drawImage(L$a.source,L$h[0]*L$i,L$h[1]*L$j,(L$h[2]-L$h[0])*L$i,(L$h[5]-L$h[3])*L$j,L$b+L$f,L$c+L$g,L$d,L$e)},L$a.drawTextureWithTransform=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){L$X.drawCall++;var L$j=L$a.uv,L$k=L$a.bitmap.width,L$l=L$a.bitmap.height;this.save(),1!=L$i&&(this.globalAlpha*=L$i),L$f?(this.transform(L$f.a,L$f.b,L$f.c,L$f.d,L$f.tx+L$g,L$f.ty+L$h),this.drawImage(L$a.source,L$j[0]*L$k,L$j[1]*L$l,(L$j[2]-L$j[0])*L$k,(L$j[5]-L$j[3])*L$l,L$b,L$c,L$d,L$e)):this.drawImage(L$a.source,L$j[0]*L$k,L$j[1]*L$l,(L$j[2]-L$j[0])*L$k,(L$j[5]-L$j[3])*L$l,L$b+L$g,L$c+L$h,L$d,L$e),this.restore()},L$a.drawTexture2=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){var L$i=L$h[0];if(L$i.loaded&&L$i.bitmap&&L$i.source){L$X.drawCall++;var L$j=1!==L$f;if(L$j){var L$k=this.globalAlpha;this.globalAlpha*=L$f}var L$l=L$i.uv,L$m=L$i.bitmap.width,L$n=L$i.bitmap.height;L$e?(this.save(),this.transform(L$e.a,L$e.b,L$e.c,L$e.d,L$e.tx+L$a,L$e.ty+L$b),this.drawImage(L$i.source,L$l[0]*L$m,L$l[1]*L$n,(L$l[2]-L$l[0])*L$m,(L$l[5]-L$l[3])*L$n,L$h[1]-L$c,L$h[2]-L$d,L$h[3],L$h[4]),this.restore()):this.drawImage(L$i.source,L$l[0]*L$m,L$l[1]*L$n,(L$l[2]-L$l[0])*L$m,(L$l[5]-L$l[3])*L$n,L$h[1]-L$c+L$a,L$h[2]-L$d+L$b,L$h[3],L$h[4]),L$j&&(this.globalAlpha=L$k)}},L$a.fillTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){if(!L$h.pat){if(L$a.uv!=L$ka.DEF_UV){var L$i=new L$ta("2D");L$i.getContext("2d"),L$i.size(L$a.width,L$a.height),L$i.context.drawTexture(L$a,0,0,L$a.width,L$a.height,0,0),L$a=new L$ka(L$i)}L$h.pat=this.createPattern(L$a.bitmap.source,L$f)}var L$j=L$b,L$k=L$c,L$l=0,L$m=0;L$g&&(L$j+=L$g.x%L$a.width,L$k+=L$g.y%L$a.height,L$l-=L$g.x%L$a.width,L$m-=L$g.y%L$a.height),this.translate(L$j,L$k),this.fillRect(L$l,L$m,L$d,L$e,L$h.pat),this.translate(-L$j,-L$k)},L$a.drawTriangle=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){var L$i=L$a.bitmap,L$j=L$i.source,L$k=L$a.width,L$l=L$a.height,L$m=L$i.width,L$n=L$i.height,L$o=L$c[L$d]*L$m,L$p=L$c[L$e]*L$m,L$q=L$c[L$f]*L$m,L$r=L$c[L$d+1]*L$n,L$s=L$c[L$e+1]*L$n,L$t=L$c[L$f+1]*L$n,L$u=L$b[L$d],L$v=L$b[L$e],L$y=L$b[L$f],L$z=L$b[L$d+1],L$A=L$b[L$e+1],L$B=L$b[L$f+1];if(L$h){var L$C=(L$u+L$v+L$y)/3,L$D=(L$z+L$A+L$B)/3,L$E=L$u-L$C,L$F=L$z-L$D,L$G=Math.sqrt(L$E*L$E+L$F*L$F);L$u=L$C+L$E/L$G*(L$G+1),L$z=L$D+L$F/L$G*(L$G+1),L$F=L$A-L$D,L$v=L$C+(L$E=L$v-L$C)/(L$G=Math.sqrt(L$E*L$E+L$F*L$F))*(L$G+1),L$A=L$D+L$F/L$G*(L$G+1),L$F=L$B-L$D,L$y=L$C+(L$E=L$y-L$C)/(L$G=Math.sqrt(L$E*L$E+L$F*L$F))*(L$G+1),L$B=L$D+L$F/L$G*(L$G+1)}this.save(),L$g&&this.transform(L$g.a,L$g.b,L$g.c,L$g.d,L$g.tx,L$g.ty),this.beginPath(),this.moveTo(L$u,L$z),this.lineTo(L$v,L$A),this.lineTo(L$y,L$B),this.closePath(),this.clip();var L$H=1/(L$o*L$s+L$r*L$q+L$p*L$t-L$s*L$q-L$r*L$p-L$o*L$t),L$I=L$u*L$s+L$r*L$y+L$v*L$t-L$s*L$y-L$r*L$v-L$u*L$t,L$J=L$o*L$v+L$u*L$q+L$p*L$y-L$v*L$q-L$u*L$p-L$o*L$y,L$K=L$o*L$s*L$y+L$r*L$v*L$q+L$u*L$p*L$t-L$u*L$s*L$q-L$r*L$p*L$y-L$o*L$v*L$t,L$L=L$z*L$s+L$r*L$B+L$A*L$t-L$s*L$B-L$r*L$A-L$z*L$t,L$M=L$o*L$A+L$z*L$q+L$p*L$B-L$A*L$q-L$z*L$p-L$o*L$B,L$N=L$o*L$s*L$B+L$r*L$A*L$q+L$z*L$p*L$t-L$z*L$s*L$q-L$r*L$p*L$B-L$o*L$A*L$t;this.transform(L$I*L$H,L$L*L$H,L$J*L$H,L$M*L$H,L$K*L$H,L$N*L$H),this.drawImage(L$j,L$a.uv[0]*L$m,L$a.uv[1]*L$n,L$k,L$l,L$a.uv[0]*L$m,L$a.uv[1]*L$n,L$k,L$l),this.restore()},L$a.flush=function(){return 0},L$a.fillWords=function(L$a,L$b,L$c,L$d,L$e,L$f){L$d&&(this.font=L$d),L$e&&(this.fillStyle=L$e);this.textBaseline="top",this.textAlign="left";for(var L$g=0,L$h=L$a.length;L$g<L$h;L$g++){var L$i=L$a[L$g];if(this.__fillText(L$i.char,L$i.x+L$b,L$i.y+L$c),1===L$f){var L$j=L$i.height,L$k=.5*L$i.style.letterSpacing;L$k||(L$k=0),this.beginPath(),this.strokeStyle=L$e,this.lineWidth=1,this.moveTo(L$b+L$i.x-L$k+.5,L$c+L$i.y+L$j+.5),this.lineTo(L$b+L$i.x+L$i.width+L$k+.5,L$c+L$i.y+L$j+.5),this.stroke()}}},L$a.fillBorderWords=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$d&&(this.font=L$d),L$e&&(this.fillStyle=L$e),this.textBaseline="top",this.lineWidth=L$g,this.textAlign="left",this.strokeStyle=L$f;for(var L$h=0,L$i=L$a.length;L$h<L$i;L$h++){var L$j=L$a[L$h];this.__strokeText(L$j.char,L$j.x+L$b,L$j.y+L$c),this.__fillText(L$j.char,L$j.x+L$b,L$j.y+L$c)}},L$a.destroy=function(){this.canvas.width=this.canvas.height=0},L$a.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},L$a.drawCurves=function(L$a,L$b,L$c){this.beginPath(),this.strokeStyle=L$c[3],this.lineWidth=L$c[4];var L$d=L$c[2];L$a+=L$c[0],L$b+=L$c[1],this.moveTo(L$a+L$d[0],L$b+L$d[1]);for(var L$e=2,L$f=L$d.length;L$e<L$f;)this.quadraticCurveTo(L$a+L$d[L$e++],L$b+L$d[L$e++],L$a+L$d[L$e++],L$b+L$d[L$e++]);this.stroke()},L$h.__init__=function(L$b){var L$c=laya.resource.Context.prototype;if(!(L$b=L$b||CanvasRenderingContext2D.prototype).inited){L$b.inited=!0,L$b.__fillText=L$b.fillText,L$b.__fillRect=L$b.fillRect,L$b.__strokeText=L$b.strokeText;["drawTextures","drawTriangle","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(L$a){L$b[L$a]=L$c[L$a]})}},L$h.replaceCanvasGetSet=function(L$a,L$b){var L$c=Object.getOwnPropertyDescriptor(L$a,L$b);if(!L$c||!L$c.configurable)return!1;var L$d,L$e={};for(L$d in L$c)"set"!=L$d&&(L$e[L$d]=L$c[L$d]);var L$f=L$c.set;return L$e.set=function(L$a){L$f.call(this,L$a);var L$b=this.getContext("2d");L$b&&"__reset"in L$b&&L$b.__reset()},Object.defineProperty(L$a,L$b,L$e),!0},L$h.replaceGetSet=function(L$a,L$b){var L$c=Object.getOwnPropertyDescriptor(L$a,L$b);if(!L$c||!L$c.configurable)return!1;var L$d,L$e={};for(L$d in L$c)"set"!=L$d&&(L$e[L$d]=L$c[L$d]);var L$f=L$c.set,L$g="___"+L$b+"__";return L$h.newKeys.push(L$g),L$e.set=function(L$a){L$a!=this[L$g]&&(this[L$g]=L$a,L$f.call(this,L$a))},Object.defineProperty(L$a,L$b,L$e),!0},L$h._default=new L$h,L$h.newKeys=[],L$i(L$h,["replaceKeys",function(){return this.replaceKeys=["font","fillStyle","textBaseline"]}]),L$h}(),L$N=function(){function L$f(L$a){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++L$f._uniqueIDCounter,this._name=L$a||"Content Manager",L$f._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,L$f._resourceManagers.push(this),this._resources=[],this._records={}}L$k(L$f,"laya.resource.ResourceManager");var L$a=L$f.prototype;return L$z.imps(L$a,{"laya.resource.IDispose":!0}),L$a.getResourceByIndex=function(L$a){return this._resources[L$a]},L$a.getResourcesLength=function(){return this._resources.length},L$a.addResource=function(L$a){return L$a.resourceManager&&L$a.resourceManager.removeResource(L$a),-1===this._resources.indexOf(L$a)&&((L$a._resourceManager=this)._resources.push(L$a),this.addRecord(L$a.uri,L$a.__className,L$a.memorySize),this.addSize(L$a.memorySize),!0)},L$a.removeResource=function(L$a){var L$b=this._resources.indexOf(L$a);return-1!==L$b&&(this._resources.splice(L$b,1),L$a._resourceManager=null,this._memorySize-=L$a.memorySize,this.addRecord(L$a.uri,L$a.__className,-L$a.memorySize),!0)},L$a.unload=function(){for(var L$a=this._resources.slice(0,this._resources.length),L$b=0;L$b<L$a.length;L$b++){L$a[L$b].destroy()}L$a.length=0},L$a.dispose=function(){if(this===L$f._systemResourceManager)throw new Error("systemResourceManager不能被释放！");L$f._resourceManagers.splice(L$f._resourceManagers.indexOf(this),1),L$f._isResourceManagersSorted=!1;for(var L$a=this._resources.slice(0,this._resources.length),L$b=0;L$b<L$a.length;L$b++){var L$c=L$a[L$b];L$c.resourceManager.removeResource(L$c),L$c.destroy()}L$a.length=0},L$a.addSize=function(L$a){L$a&&(this.autoRelease&&0<L$a&&this._memorySize+L$a>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=L$a)},L$a.addRecord=function(L$a,L$b,L$c){DEBUG&&L$c&&!L$a&&console.error(L$a,L$b,L$c),L$a&&(this._records.hasOwnProperty(L$b+"|"+L$a)||(this._records[L$b+"|"+L$a]=0),this._records[L$b+"|"+L$a]+=L$c,DEBUG&&this._records[L$b+"|"+L$a]<0&&console.error(L$a,L$b,this._records[L$b+"|"+L$a]))},L$a.garbageCollection=function(L$a){var L$b=this._resources;(L$b=L$b.slice()).sort(function(L$a,L$b){if(!L$a||!L$b)throw new Error("a或b不能为空！");return L$a.released&&L$b.released?0:L$a.released?1:L$b.released?-1:L$a._lastUseFrameCount-L$b._lastUseFrameCount});for(var L$c=L$X.loopCount,L$d=0,L$e=L$b.length;L$d<L$e;L$d++){var L$f=L$b[L$d];if(!(1<L$c-L$f._lastUseFrameCount))return void(this._memorySize>=L$a&&(this._isOverflow=!0));if(L$f.releaseResource(),this._memorySize<L$a)return void(this._isOverflow=!1)}},L$o(0,L$a,"id",function(){return this._id}),L$o(0,L$a,"name",function(){return this._name},function(L$a){!L$a&&""===L$a||this._name===L$a||(this._name=L$a,L$f._isResourceManagersSorted=!1)}),L$o(0,L$a,"memorySize",function(){return this._memorySize}),L$o(0,L$a,"records",function(){return this._records}),L$o(1,L$f,"systemResourceManager",function(){return L$f._systemResourceManager}),L$f.__init__=function(){L$f.currentResourceManager=L$f.systemResourceManager},L$f.getLoadedResourceManagerByIndex=function(L$a){return L$f._resourceManagers[L$a]},L$f.getLoadedResourceManagersCount=function(){return L$f._resourceManagers.length},L$f.recreateContentManagers=function(L$a){void 0===L$a&&(L$a=!1);for(var L$b=L$f.currentResourceManager,L$c=0;L$c<L$f._resourceManagers.length;L$c++){L$f.currentResourceManager=L$f._resourceManagers[L$c];for(var L$d=0;L$d<L$f.currentResourceManager._resources.length;L$d++)L$f.currentResourceManager._resources[L$d].releaseResource(L$a),L$f.currentResourceManager._resources[L$d].activeResource(L$a)}L$f.currentResourceManager=L$b},L$f.releaseContentManagers=function(L$a){void 0===L$a&&(L$a=!1);for(var L$b=L$f.currentResourceManager,L$c=0;L$c<L$f._resourceManagers.length;L$c++){L$f.currentResourceManager=L$f._resourceManagers[L$c];for(var L$d=0;L$d<L$f.currentResourceManager._resources.length;L$d++){var L$e=L$f.currentResourceManager._resources[L$d];!L$e.released&&L$e.releaseResource(L$a)}}L$f.currentResourceManager=L$b},L$f._uniqueIDCounter=0,L$f._isResourceManagersSorted=!1,L$f._resourceManagers=[],L$i(L$f,["_systemResourceManager",function(){return this._systemResourceManager=new L$f("System Resource Manager")},"currentResourceManager",function(){return this.currentResourceManager=L$f._systemResourceManager}]),L$f}(),L$O=(function(){function L$a(){}L$k(L$a,"laya.system.System"),L$a.changeDefinition=function(L$a,L$b){L$z[L$a]=L$b;var L$c=L$a+"=classObj";L$z._runScript(L$c)},L$a.__init__=function(){L$J.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())}}(),function(){function L$c(){}return L$k(L$c,"laya.utils.Browser"),L$o(1,L$c,"pixelRatio",function(){return L$c.__init__(),-1<L$c.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")?2:L$F.getPixelRatio()}),L$o(1,L$c,"height",function(){return L$c.__init__(),(L$z.stage&&L$z.stage.canvasRotation?L$c.clientWidth:L$c.clientHeight)*L$c.pixelRatio}),L$o(1,L$c,"clientWidth",function(){return L$c.__init__(),L$c.window.innerWidth||L$c.document.body.clientWidth}),L$o(1,L$c,"window",function(){return L$c.__init__(),L$c._window}),L$o(1,L$c,"clientHeight",function(){return L$c.__init__(),L$c.window.innerHeight||L$c.document.body.clientHeight||L$c.document.documentElement.clientHeight}),L$o(1,L$c,"width",function(){return L$c.__init__(),(L$z.stage&&L$z.stage.canvasRotation?L$c.clientHeight:L$c.clientWidth)*L$c.pixelRatio}),L$o(1,L$c,"container",function(){return L$c.__init__(),L$c._container||((L$c._container=L$c.createElement("div")).id="layaContainer",L$c.document.body.appendChild(L$c._container)),L$c._container},function(L$a){L$c._container=L$a}),L$o(1,L$c,"document",function(){return L$c.__init__(),L$c._document}),L$c.__init__=function(){if(!L$c._window){L$c._window=L$F.getWindow(),L$c._document=L$c.window.document,L$c._window.addEventListener("message",function(L$a){laya.utils.Browser._onMessage(L$a)},!1),L$c.document.__createElement=L$c.document.createElement,L$g.requestAnimationFrame=L$g.requestAnimationFrame||L$g.webkitRequestAnimationFrame||L$g.mozRequestAnimationFrame||L$g.oRequestAnimationFrame||L$g.msRequestAnimationFrame||function(L$a){return L$g.setTimeout(L$a,1e3/60)};var L$a=L$g.document.body.style;L$a["-webkit-user-select"]="none",L$a["-webkit-tap-highlight-color"]="rgba(200,200,200,0)",L$c.userAgent=L$c.window.navigator.userAgent,L$c.onIOS=!!(L$c.u=L$c.userAgent).match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),L$c.onMobile=-1<L$c.u.indexOf("Mobile"),L$c.onIPhone=-1<L$c.u.indexOf("iPhone"),L$c.onMac=-1<L$c.u.indexOf("Mac OS X"),L$c.onIPad=-1<L$c.u.indexOf("iPad"),L$c.onAndroid=-1<L$c.u.indexOf("Android")||-1<L$c.u.indexOf("Adr"),L$c.onWP=-1<L$c.u.indexOf("Windows Phone"),L$c.onQQBrowser=-1<L$c.u.indexOf("QQBrowser"),L$c.onMQQBrowser=-1<L$c.u.indexOf("MQQBrowser")||-1<L$c.u.indexOf("Mobile")&&-1<L$c.u.indexOf("QQ"),L$c.onIE=!!L$c.window.ActiveXObject||"ActiveXObject"in L$c.window,L$c.onWeiXin=-1<L$c.u.indexOf("MicroMessenger"),L$c.onPC=!L$c.onMobile,L$c.onSafari=-1<L$c.u.indexOf("Safari"),L$c.onFirefox=-1<L$c.u.indexOf("Firefox"),L$c.onEdge=-1<L$c.u.indexOf("Edge"),L$c.onMiniGame=-1<L$c.u.indexOf("MiniGame"),L$c.onLimixiu=-1<L$c.u.indexOf("limixiu"),L$c.httpProtocol="http:"==L$c.window.location.protocol,L$c.onMiniGame&&null==L$c.window.focus&&console.error("请先初始化小游戏适配库，详细教程https://ldc.layabox.com/doc/?nav=zh-ts-5-0-0"),L$c.webAudioEnabled=!!(L$c.window.AudioContext||L$c.window.webkitAudioContext||L$c.window.mozAudioContext),L$c.soundType=L$c.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",L$ea=L$c.webAudioEnabled?L$fa:L$ca,L$c.webAudioEnabled&&L$fa.initWebAudio(),L$ca._initMusicAudio(),L$c.enableTouch="ontouchstart"in L$g||L$g.DocumentTouch&&L$b instanceof DocumentTouch,L$g.focus(),L$E._soundClass=L$ea,L$E._musicClass=L$ca,L$J._mainCanvas=L$J._mainCanvas||L$ta.create("2D"),L$c.canvas||(L$c.canvas=L$ta.create("2D"),L$c.context=L$c.canvas.getContext("2d"))}},L$c._onMessage=function(L$a){if(L$a.data&&"size"==L$a.data.name){if(L$c.window.innerWidth=L$a.data.width,L$c.window.innerHeight=L$a.data.height,L$c.window.__innerHeight=L$a.data.clientHeight,!L$c.document.createEvent)return void console.warn("no document.createEvent");var L$b=L$c.document.createEvent("HTMLEvents");return L$b.initEvent("resize",!1,!1),void L$c.window.dispatchEvent(L$b)}},L$c.createElement=function(L$a){return L$c.__init__(),L$c.document.__createElement(L$a)},L$c.getElementById=function(L$a){return L$c.__init__(),L$c.document.getElementById(L$a)},L$c.removeElement=function(L$a){L$a&&L$a.parentNode&&L$a.parentNode.removeChild(L$a)},L$c.now=function(){return L$F.now()},L$c._window=null,L$c._document=null,L$c._container=null,L$c.userAgent=null,L$c.u=null,L$c.onIOS=!1,L$c.onMac=!1,L$c.onMobile=!1,L$c.onIPhone=!1,L$c.onIPad=!1,L$c.onAndroid=!1,L$c.onWP=!1,L$c.onQQBrowser=!1,L$c.onMQQBrowser=!1,L$c.onSafari=!1,L$c.onFirefox=!1,L$c.onEdge=!1,L$c.onIE=!1,L$c.onWeiXin=!1,L$c.onMiniGame=!1,L$c.onLimixiu=!1,L$c.onPC=!1,L$c.httpProtocol=!1,L$c.webAudioEnabled=!1,L$c.soundType=null,L$c.enableTouch=!1,L$c.canvas=null,L$c.context=null,L$c.__init$=function(){},L$c}()),L$P=function(){function L$b(L$a){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,L$a?(this._u8d_=new Uint8Array(L$a),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}L$k(L$b,"laya.utils.Byte");var L$a=L$b.prototype;return L$a.___resizeBuffer=function(L$b){try{var L$a=new Uint8Array(L$b);null!=this._u8d_&&(this._u8d_.length<=L$b?L$a.set(this._u8d_):L$a.set(this._u8d_.subarray(0,L$b))),this._u8d_=L$a,this._d_=new DataView(L$a.buffer)}catch(L$a){throw"___resizeBuffer err:"+L$b}},L$a.getString=function(){return this.rUTF(this.getUint16())},L$a.getFloat32Array=function(L$a,L$b){var L$c=L$a+L$b;L$c=L$c>this._length?this._length:L$c;var L$d=new Float32Array(this._d_.buffer.slice(L$a,L$c));return this._pos_=L$c,L$d},L$a.getUint8Array=function(L$a,L$b){var L$c=L$a+L$b;L$c=L$c>this._length?this._length:L$c;var L$d=new Uint8Array(this._d_.buffer.slice(L$a,L$c));return this._pos_=L$c,L$d},L$a.getInt16Array=function(L$a,L$b){var L$c=L$a+L$b;L$c=L$c>this._length?this._length:L$c;var L$d=new Int16Array(this._d_.buffer.slice(L$a,L$c));return this._pos_=L$c,L$d},L$a.getFloat32=function(){if(this._pos_+4>this._length)throw"getFloat32 error - Out of bounds";var L$a=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,L$a},L$a.getFloat64=function(){if(this._pos_+8>this._length)throw"getFloat64 error - Out of bounds";var L$a=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,L$a},L$a.writeFloat32=function(L$a){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,L$a,this._xd_),this._pos_+=4},L$a.writeFloat64=function(L$a){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,L$a,this._xd_),this._pos_+=8},L$a.getInt32=function(){if(this._pos_+4>this._length)throw"getInt32 error - Out of bounds";var L$a=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,L$a},L$a.getUint32=function(){if(this._pos_+4>this._length)throw"getUint32 error - Out of bounds";var L$a=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,L$a},L$a.writeInt32=function(L$a){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,L$a,this._xd_),this._pos_+=4},L$a.writeUint32=function(L$a){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,L$a,this._xd_),this._pos_+=4},L$a.getInt16=function(){if(this._pos_+2>this._length)throw"getInt16 error - Out of bounds";var L$a=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,L$a},L$a.getUint16=function(){if(this._pos_+2>this._length)throw"getUint16 error - Out of bounds";var L$a=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,L$a},L$a.writeUint16=function(L$a){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,L$a,this._xd_),this._pos_+=2},L$a.writeInt16=function(L$a){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,L$a,this._xd_),this._pos_+=2},L$a.getUint8=function(){if(this._pos_+1>this._length)throw"getUint8 error - Out of bounds";return this._d_.getUint8(this._pos_++)},L$a.writeUint8=function(L$a){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,L$a),this._pos_++},L$a._getUInt8=function(L$a){return this._d_.getUint8(L$a)},L$a._getUint16=function(L$a){return this._d_.getUint16(L$a,this._xd_)},L$a._getMatrix=function(){return new L$G(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},L$a.rUTF=function(L$a){for(var L$b=[],L$c=this._pos_+L$a,L$d=0,L$e=0,L$f=0,L$g=String.fromCharCode,L$h=this._u8d_;this._pos_<L$c;)(L$d=L$h[this._pos_++])<128?0!=L$d&&L$b.push(L$g(L$d)):L$d<224?L$b.push(L$g((63&L$d)<<6|127&L$h[this._pos_++])):L$d<240?(L$e=L$h[this._pos_++],L$b.push(L$g((31&L$d)<<12|(127&L$e)<<6|127&L$h[this._pos_++]))):(L$e=L$h[this._pos_++],L$f=L$h[this._pos_++],L$b.push(L$g((15&L$d)<<18|(127&L$e)<<12|L$f<<6&127|127&L$h[this._pos_++]))),0;return L$b.join("")},L$a.getCustomString=function(L$a){for(var L$b=[],L$c=0,L$d=0,L$e=0,L$f=String.fromCharCode,L$g=this._u8d_;0<L$a;)if((L$d=L$g[this._pos_])<128)L$b.push(L$f(L$d)),this._pos_++,L$a--;else for(L$c=L$d-128,this._pos_++,L$a-=L$c;0<L$c;)L$d=L$g[this._pos_++],L$e=L$g[this._pos_++],L$b.push(L$f(L$e<<8|L$d)),L$c--;return L$b.join("")},L$a.clear=function(){this._pos_=0,this.length=0},L$a.__getBuffer=function(){return this._d_.buffer},L$a.writeUTFBytes=function(L$a){for(var L$b=0,L$c=(L$a+="").length;L$b<L$c;L$b++){var L$d=L$a.charCodeAt(L$b);L$d<=127?this.writeByte(L$d):L$d<=2047?(this.ensureWrite(this._pos_+2),this._u8d_.set([192|L$d>>6,128|63&L$d],this._pos_),this._pos_+=2):L$d<=65535?(this.ensureWrite(this._pos_+3),this._u8d_.set([224|L$d>>12,128|L$d>>6&63,128|63&L$d],this._pos_),this._pos_+=3):(this.ensureWrite(this._pos_+4),this._u8d_.set([240|L$d>>18,128|L$d>>12&63,128|L$d>>6&63,128|63&L$d],this._pos_),this._pos_+=4)}},L$a.writeUTFString=function(L$a){var L$b=this.pos;this.writeUint16(1),this.writeUTFBytes(L$a);var L$c=this.pos-L$b-2;if(65536<=L$c)throw"writeUTFString byte len more than 65536";this._d_.setUint16(L$b,L$c,this._xd_)},L$a.readUTFString=function(){return this.readUTFBytes(this.getUint16())},L$a.getUTFString=function(){return this.readUTFString()},L$a.readUTFBytes=function(L$a){if(void 0===L$a&&(L$a=-1),0==L$a)return"";var L$b=this.bytesAvailable;if(L$b<L$a)throw"readUTFBytes error - Out of bounds";return L$a=0<L$a?L$a:L$b,this.rUTF(L$a)},L$a.getUTFBytes=function(L$a){return void 0===L$a&&(L$a=-1),this.readUTFBytes(L$a)},L$a.writeByte=function(L$a){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,L$a),this._pos_+=1},L$a.readByte=function(){if(this._pos_+1>this._length)throw"readByte error - Out of bounds";return this._d_.getInt8(this._pos_++)},L$a.getByte=function(){return this.readByte()},L$a.ensureWrite=function(L$a){this._length<L$a&&(this._length=L$a),this._allocated_<L$a&&(this.length=L$a)},L$a.writeArrayBuffer=function(L$a,L$b,L$c){if(void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),L$b<0||L$c<0)throw"writeArrayBuffer error - Out of bounds";0==L$c&&(L$c=L$a.byteLength-L$b),this.ensureWrite(this._pos_+L$c);var L$d=new Uint8Array(L$a);this._u8d_.set(L$d.subarray(L$b,L$b+L$c),this._pos_),this._pos_+=L$c},L$o(0,L$a,"buffer",function(){var L$a=this._d_.buffer;return L$a.byteLength==this.length?L$a:L$a.slice(0,this.length)}),L$o(0,L$a,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(L$a){this._xd_="littleEndian"==L$a}),L$o(0,L$a,"length",function(){return this._length},function(L$a){this._allocated_<L$a?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(L$a,2*this._allocated_))):this._allocated_>L$a&&this.___resizeBuffer(this._allocated_=L$a),this._length=L$a}),L$o(0,L$a,"pos",function(){return this._pos_},function(L$a){this._pos_=L$a}),L$o(0,L$a,"bytesAvailable",function(){return this._length-this._pos_}),L$b.getSystemEndian=function(){if(!L$b._sysEndian){var L$a=new ArrayBuffer(2);new DataView(L$a).setInt16(0,256,!0),L$b._sysEndian=256===new Int16Array(L$a)[0]?"littleEndian":"bigEndian"}return L$b._sysEndian},L$b.BIG_ENDIAN="bigEndian",L$b.LITTLE_ENDIAN="littleEndian",L$b._sysEndian=null,L$b}(),L$Q=function(){function L$e(){}return L$k(L$e,"laya.utils.CacheManager"),L$e.regCacheByFunction=function(L$a,L$b){var L$c;L$e.unRegCacheByFunction(L$a,L$b),L$c={tryDispose:L$a,getCacheList:L$b},L$e._cacheList.push(L$c)},L$e.unRegCacheByFunction=function(L$a,L$b){var L$c,L$d=0;for(L$c=L$e._cacheList.length,L$d=0;L$d<L$c;L$d++)if(L$e._cacheList[L$d].tryDispose==L$a&&L$e._cacheList[L$d].getCacheList==L$b)return void L$e._cacheList.splice(L$d,1)},L$e.forceDispose=function(){var L$a=0,L$b=L$e._cacheList.length;for(L$a=0;L$a<L$b;L$a++)L$e._cacheList[L$a].tryDispose(!0)},L$e.beginCheck=function(L$a){void 0===L$a&&(L$a=15e3),L$z.timer.loop(L$a,null,L$e._checkLoop)},L$e.stopCheck=function(){L$z.timer.clear(null,L$e._checkLoop)},L$e._checkLoop=function(){var L$a=L$e._cacheList;if(!(L$a.length<1)){var L$b,L$c=L$O.now(),L$d=0;for(L$b=L$d=L$a.length;0<L$d&&(L$a[L$e._index=++L$e._index%L$b].tryDispose(!1),!(L$O.now()-L$c>L$e.loopTimeLimit));)L$d--}},L$e.loopTimeLimit=2,L$e._cacheList=[],L$e._index=0,L$e}(),L$R=function(){function L$n(){}return L$k(L$n,"laya.utils.ClassUtils"),L$n.regClass=function(L$a,L$b){L$n._classMap[L$a]=L$b},L$n.getRegClass=function(L$a){return L$n._classMap[L$a]},L$n.getInstance=function(L$a){var L$b=L$n.getClass(L$a);return L$b?new L$b:(console.warn("[error] Undefined class:",L$a),null)},L$n.createByJson=function(L$a,L$b,L$c,L$d,L$e){"string"==typeof L$a&&(L$a=JSON.parse(L$a));var L$f=L$a.props;if(!L$b&&!(L$b=L$e?L$e.runWith(L$a):L$n.getInstance(L$f.runtime||L$a.type)))return null;var L$g=L$a.child;if(L$g)for(var L$h=0,L$i=L$g.length;L$h<L$i;L$h++){var L$j=L$g[L$h];if("render"!==L$j.props.name&&"render"!==L$j.props.renderType||!L$b._$set_itemRender)if("Graphic"==L$j.type)L$n.addGraphicsToSprite(L$j,L$b);else if(L$n.isDrawType(L$j.type))L$n.addGraphicToSprite(L$j,L$b,!0);else{var L$k=L$n.createByJson(L$j,null,L$c,L$d,L$e);"Script"==L$j.type?L$k.hasOwnProperty("owner")?L$k.owner=L$b:L$k.hasOwnProperty("target")&&(L$k.target=L$b):"mask"==L$j.props.renderType?L$b.mask=L$k:L$b.addChild(L$k)}else L$b.itemRender=L$j}if(L$f)for(var L$l in L$f){var L$m=L$f[L$l];"var"===L$l&&L$c?L$c[L$m]=L$b:L$m instanceof Array&&"function"==typeof L$b[L$l]?L$b[L$l].apply(L$b,L$m):L$b[L$l]=L$m}return L$d&&L$a.customProps&&L$d.runWith([L$b,L$a]),L$b.created&&L$b.created(),L$b},L$n.addGraphicsToSprite=function(L$a,L$b){var L$c;if((L$c=L$a.child)&&!(L$c.length<1)){var L$d;L$d=L$n._getGraphicsFromSprite(L$a,L$b);var L$e=0,L$f=0;L$a.props&&(L$e=L$n._getObjVar(L$a.props,"x",0),L$f=L$n._getObjVar(L$a.props,"y",0)),0!=L$e&&0!=L$f&&L$d.translate(L$e,L$f);var L$g,L$h=0;for(L$g=L$c.length,L$h=0;L$h<L$g;L$h++)L$n._addGraphicToGraphics(L$c[L$h],L$d);0!=L$e&&0!=L$f&&L$d.translate(-L$e,-L$f)}},L$n.addGraphicToSprite=function(L$a,L$b,L$c){var L$d;void 0===L$c&&(L$c=!1),L$d=L$c?L$n._getGraphicsFromSprite(L$a,L$b):L$b.graphics,L$n._addGraphicToGraphics(L$a,L$d)},L$n._getGraphicsFromSprite=function(L$a,L$b){var L$c,L$d;if(!L$a||!L$a.props)return L$b.graphics;switch(L$d=L$a.props.renderType){case"hit":case"unHit":var L$e;L$b.hitArea||(L$b.hitArea=new L$V),(L$e=L$b.hitArea)[L$d]||(L$e[L$d]=new L$m),L$c=L$e[L$d]}return L$c||(L$c=L$b.graphics),L$c},L$n._getTransformData=function(L$a){var L$b;(L$a.hasOwnProperty("pivotX")||L$a.hasOwnProperty("pivotY"))&&(L$b=L$b||new L$G).translate(-L$n._getObjVar(L$a,"pivotX",0),-L$n._getObjVar(L$a,"pivotY",0));var L$c=L$n._getObjVar(L$a,"scaleX",1),L$d=L$n._getObjVar(L$a,"scaleY",1),L$e=L$n._getObjVar(L$a,"rotation",0);L$n._getObjVar(L$a,"skewX",0),L$n._getObjVar(L$a,"skewY",0);return 1==L$c&&1==L$d&&0==L$e||((L$b=L$b||new L$G).scale(L$c,L$d),L$b.rotate(.0174532922222222*L$e)),L$b},L$n._addGraphicToGraphics=function(L$a,L$b){var L$c,L$d;if((L$c=L$a.props)&&(L$d=L$n.DrawTypeDic[L$a.type])){var L$e,L$f;L$e=L$b;var L$g=L$n._getParams(L$c,L$d[1],L$d[2],L$d[3]);((L$f=L$n._tM)||1!=L$n._alpha)&&(L$e.save(),L$f&&L$e.transform(L$f),1!=L$n._alpha&&L$e.alpha(L$n._alpha)),L$e[L$d[0]].apply(L$e,L$g),(L$f||1!=L$n._alpha)&&L$e.restore()}},L$n._adptLineData=function(L$a){return L$a[2]=parseFloat(L$a[0])+parseFloat(L$a[2]),L$a[3]=parseFloat(L$a[1])+parseFloat(L$a[3]),L$a},L$n._adptTextureData=function(L$a){return L$a[0]=L$ha.getRes(L$a[0]),L$a},L$n._adptLinesData=function(L$a){return L$a[2]=L$n._getPointListByStr(L$a[2]),L$a},L$n.isDrawType=function(L$a){return"Image"!=L$a&&L$n.DrawTypeDic.hasOwnProperty(L$a)},L$n._getParams=function(L$a,L$b,L$c,L$d){var L$e;void 0===L$c&&(L$c=0),(L$e=L$n._temParam).length=L$b.length;var L$f,L$g,L$h=0;for(L$f=L$b.length,L$h=0;L$h<L$f;L$h++)L$e[L$h]=L$n._getObjVar(L$a,L$b[L$h][0],L$b[L$h][1]);return L$n._alpha=L$n._getObjVar(L$a,"alpha",1),L$g=L$n._getTransformData(L$a),L$n._tM=L$g?(L$c||(L$c=0),L$g.translate(L$e[L$c],L$e[L$c+1]),L$e[L$c]=L$e[L$c+1]=0,L$g):null,L$d&&L$n[L$d]&&(L$e=L$n[L$d](L$e)),L$e},L$n._getPointListByStr=function(L$a){var L$b,L$c,L$d=0;for(L$c=(L$b=L$a.split(",")).length,L$d=0;L$d<L$c;L$d++)L$b[L$d]=parseFloat(L$b[L$d]);return L$b},L$n._getObjVar=function(L$a,L$b,L$c){return L$a.hasOwnProperty(L$b)?L$a[L$b]:L$c},L$n._temParam=[],L$n._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},L$n.getClass=function(L$a){var L$b=L$n._classMap[L$a]||L$a;return"string"==typeof L$b?L$z.__classmap[L$b]:L$b},L$n._tM=null,L$n._alpha=NaN,L$i(L$n,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),L$n}(),L$S=function(){function L$f(L$a){if(this._color=[],"string"==typeof L$a){null===(this.strColor=L$a)&&(L$a="#000000"),"#"==L$a.charAt(0)&&(L$a=L$a.substr(1));var L$b=L$a.length;if(3==L$b||4==L$b){for(var L$c="",L$d=0;L$d<L$b;L$d++)L$c+=L$a[L$d]+L$a[L$d];L$a=L$c}var L$e=this.numColor=parseInt(L$a,16);if(8==L$a.length)return void(this._color=[parseInt(L$a.substr(0,2),16)/255,((16711680&L$e)>>16)/255,((65280&L$e)>>8)/255,(255&L$e)/255])}else L$e=this.numColor=L$a,this.strColor=L$$.toHexColor(L$e);this._color=[((16711680&L$e)>>16)/255,((65280&L$e)>>8)/255,(255&L$e)/255,1],this._color.__id=++L$f._COLODID}return L$k(L$f,"laya.utils.Color"),L$f._initDefault=function(){for(var L$a in L$f._DEFAULT={},L$f._COLOR_MAP)L$f._SAVE[L$a]=L$f._DEFAULT[L$a]=new L$f(L$f._COLOR_MAP[L$a]);return L$f._DEFAULT},L$f._initSaveMap=function(){for(var L$a in L$f._SAVE_SIZE=0,L$f._SAVE={},L$f._DEFAULT)L$f._SAVE[L$a]=L$f._DEFAULT[L$a]},L$f.create=function(L$a){var L$b=L$f._SAVE[L$a+""];return null!=L$b?L$b:(L$f._SAVE_SIZE<1e3||L$f._initSaveMap(),L$f._SAVE[L$a+""]=new L$f(L$a))},L$f._SAVE={},L$f._SAVE_SIZE=0,L$f._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},L$f._DEFAULT=L$f._initDefault(),L$f._COLODID=1,L$f}(),L$T=(function(){function L$a(){this._values=[],this._keys=[]}L$k(L$a,"laya.utils.Dictionary");var L$b=L$a.prototype;L$b.set=function(L$a,L$b){var L$c=this.indexOf(L$a);0<=L$c?this._values[L$c]=L$b:(this._keys.push(L$a),this._values.push(L$b))},L$b.indexOf=function(L$a){var L$b=this._keys.indexOf(L$a);return 0<=L$b?L$b:(L$a="string"==typeof L$a?Number(L$a):"number"==typeof L$a?L$a.toString():L$a,this._keys.indexOf(L$a))},L$b.get=function(L$a){var L$b=this.indexOf(L$a);return L$b<0?null:this._values[L$b]},L$b.remove=function(L$a){var L$b=this.indexOf(L$a);return 0<=L$b&&(this._keys.splice(L$b,1),this._values.splice(L$b,1),!0)},L$b.clear=function(){this._values.length=0,this._keys.length=0},L$o(0,L$b,"values",function(){return this._values}),L$o(0,L$b,"keys",function(){return this._keys})}(),function(){function L$a(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}L$k(L$a,"laya.utils.Dragging");var L$b=L$a.prototype;return L$b.start=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){void 0===L$h&&(L$h=.92),this.clearTimer(),this.target=L$a,this.area=L$b,this.hasInertia=L$c,this.elasticDistance=L$b?L$d:0,this.elasticBackTime=L$e,this.data=L$f,this._disableMouseEvent=L$g,this.ratio=L$h,1!=L$a.globalScaleX||1!=L$a.globalScaleY?this._parent=L$a.parent:this._parent=L$z.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,L$z.stage.on("mouseup",this,this.onStageMouseUp),L$z.stage.on("mouseout",this,this.onStageMouseUp),L$z.timer.frameLoop(1,this,this.loop)},L$b.clearTimer=function(){L$z.timer.clear(this,this.loop),L$z.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},L$b.stop=function(){this._dragging&&(L$p.instance.disableMouseEvent=!1,L$z.stage.off("mouseup",this,this.onStageMouseUp),L$z.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},L$b.loop=function(){var L$a=this._parent.getMousePoint(),L$b=L$a.x,L$c=L$a.y,L$d=L$b-this._lastX,L$e=L$c-this._lastY;if(this._clickOnly){if(!(1<Math.abs(L$d*L$z.stage._canvasTransform.getScaleX())||1<Math.abs(L$e*L$z.stage._canvasTransform.getScaleY())))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),L$p.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(L$d,L$e);0==L$d&&0==L$e||(this._lastX=L$b,this._lastY=L$c,this.target.x+=L$d*this._elasticRateX,this.target.y+=L$e*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},L$b.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var L$a=this.area.x-this.target.x;else L$a=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-L$a/this.elasticDistance),this.target.y<this.area.y)var L$b=this.area.y-this.target.y;else L$b=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-L$b/this.elasticDistance)}},L$b.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},L$b.onStageMouseUp=function(L$a){if(L$p.instance.disableMouseEvent=!1,L$z.stage.off("mouseup",this,this.onStageMouseUp),L$z.stage.off("mouseout",this,this.onStageMouseUp),L$z.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var L$b=this._offsets.length,L$c=Math.min(L$b,6),L$d=this._offsets.length-L$c,L$e=L$b-1;L$d<L$e;L$e--)this._offsetY+=this._offsets[L$e--],this._offsetX+=this._offsets[L$e];this._offsetX=this._offsetX/L$c*2,this._offsetY=this._offsetY/L$c*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=0<this._offsetX?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=0<this._offsetY?this.maxOffset:-this.maxOffset),L$z.timer.frameLoop(1,this,this.tweenMove)}else 0<this.elasticDistance?this.checkElastic():this.clear()},L$b.checkElastic=function(){var L$a=NaN,L$b=NaN;if(this.target.x<this.area.x?L$a=this.area.x:this.target.x>this.area.x+this.area.width&&(L$a=this.area.x+this.area.width),this.target.y<this.area.y?L$b=this.area.y:this.target.y>this.area.y+this.area.height&&(L$b=this.area.y+this.area.height),isNaN(L$a)&&isNaN(L$b))this.clear();else{var L$c={};isNaN(L$a)||(L$c.x=L$a),isNaN(L$b)||(L$c.y=L$b),this._tween=L$Z.to(this.target,L$c,this.elasticBackTime,L$U.sineOut,L$s.create(this,this.clear),0,!1,!1)}},L$b.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(L$z.timer.clear(this,this.tweenMove),0<this.elasticDistance?this.checkElastic():this.clear())},L$b.clear=function(){if(this.target){this.clearTimer();var L$a=this.target;this.target=null,this._parent=null,L$a.event("dragend",this.data)}},L$a}()),L$U=function(){function L$h(){}return L$k(L$h,"laya.utils.Ease"),L$h.linearNone=function(L$a,L$b,L$c,L$d){return L$c*L$a/L$d+L$b},L$h.linearIn=function(L$a,L$b,L$c,L$d){return L$c*L$a/L$d+L$b},L$h.linearInOut=function(L$a,L$b,L$c,L$d){return L$c*L$a/L$d+L$b},L$h.linearOut=function(L$a,L$b,L$c,L$d){return L$c*L$a/L$d+L$b},L$h.bounceIn=function(L$a,L$b,L$c,L$d){return L$c-L$h.bounceOut(L$d-L$a,0,L$c,L$d)+L$b},L$h.bounceInOut=function(L$a,L$b,L$c,L$d){return L$a<.5*L$d?.5*L$h.bounceIn(2*L$a,0,L$c,L$d)+L$b:.5*L$h.bounceOut(2*L$a-L$d,0,L$c,L$d)+.5*L$c+L$b},L$h.bounceOut=function(L$a,L$b,L$c,L$d){return(L$a/=L$d)<1/2.75?L$c*(7.5625*L$a*L$a)+L$b:L$a<2/2.75?L$c*(7.5625*(L$a-=1.5/2.75)*L$a+.75)+L$b:L$a<2.5/2.75?L$c*(7.5625*(L$a-=2.25/2.75)*L$a+.9375)+L$b:L$c*(7.5625*(L$a-=2.625/2.75)*L$a+.984375)+L$b},L$h.backIn=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$e&&(L$e=1.70158),L$c*(L$a/=L$d)*L$a*((L$e+1)*L$a-L$e)+L$b},L$h.backInOut=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$e&&(L$e=1.70158),(L$a/=.5*L$d)<1?.5*L$c*(L$a*L$a*((1+(L$e*=1.525))*L$a-L$e))+L$b:L$c/2*((L$a-=2)*L$a*((1+(L$e*=1.525))*L$a+L$e)+2)+L$b},L$h.backOut=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$e&&(L$e=1.70158),L$c*((L$a=L$a/L$d-1)*L$a*((L$e+1)*L$a+L$e)+1)+L$b},L$h.elasticIn=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g;return void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=0),0==L$a?L$b:1==(L$a/=L$d)?L$b+L$c:(L$f||(L$f=.3*L$d),L$g=!L$e||0<L$c&&L$e<L$c||L$c<0&&L$e<-L$c?(L$e=L$c,L$f/4):L$f/L$h.PI2*Math.asin(L$c/L$e),-L$e*Math.pow(2,10*(L$a-=1))*Math.sin((L$a*L$d-L$g)*L$h.PI2/L$f)+L$b)},L$h.elasticInOut=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g;return void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=0),0==L$a?L$b:2==(L$a/=.5*L$d)?L$b+L$c:(L$f||(L$f=L$d*(.3*1.5)),L$g=!L$e||0<L$c&&L$e<L$c||L$c<0&&L$e<-L$c?(L$e=L$c,L$f/4):L$f/L$h.PI2*Math.asin(L$c/L$e),L$a<1?L$e*Math.pow(2,10*(L$a-=1))*Math.sin((L$a*L$d-L$g)*L$h.PI2/L$f)*-.5+L$b:L$e*Math.pow(2,-10*(L$a-=1))*Math.sin((L$a*L$d-L$g)*L$h.PI2/L$f)*.5+L$c+L$b)},L$h.elasticOut=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g;return void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=0),0==L$a?L$b:1==(L$a/=L$d)?L$b+L$c:(L$f||(L$f=.3*L$d),L$g=!L$e||0<L$c&&L$e<L$c||L$c<0&&L$e<-L$c?(L$e=L$c,L$f/4):L$f/L$h.PI2*Math.asin(L$c/L$e),L$e*Math.pow(2,-10*L$a)*Math.sin((L$a*L$d-L$g)*L$h.PI2/L$f)+L$c+L$b)},L$h.strongIn=function(L$a,L$b,L$c,L$d){return L$c*(L$a/=L$d)*L$a*L$a*L$a*L$a+L$b},L$h.strongInOut=function(L$a,L$b,L$c,L$d){return(L$a/=.5*L$d)<1?.5*L$c*L$a*L$a*L$a*L$a*L$a+L$b:.5*L$c*((L$a-=2)*L$a*L$a*L$a*L$a+2)+L$b},L$h.strongOut=function(L$a,L$b,L$c,L$d){return L$c*((L$a=L$a/L$d-1)*L$a*L$a*L$a*L$a+1)+L$b},L$h.sineInOut=function(L$a,L$b,L$c,L$d){return.5*-L$c*(Math.cos(Math.PI*L$a/L$d)-1)+L$b},L$h.sineIn=function(L$a,L$b,L$c,L$d){return-L$c*Math.cos(L$a/L$d*L$h.HALF_PI)+L$c+L$b},L$h.sineOut=function(L$a,L$b,L$c,L$d){return L$c*Math.sin(L$a/L$d*L$h.HALF_PI)+L$b},L$h.quintIn=function(L$a,L$b,L$c,L$d){return L$c*(L$a/=L$d)*L$a*L$a*L$a*L$a+L$b},L$h.quintInOut=function(L$a,L$b,L$c,L$d){return(L$a/=.5*L$d)<1?.5*L$c*L$a*L$a*L$a*L$a*L$a+L$b:.5*L$c*((L$a-=2)*L$a*L$a*L$a*L$a+2)+L$b},L$h.quintOut=function(L$a,L$b,L$c,L$d){return L$c*((L$a=L$a/L$d-1)*L$a*L$a*L$a*L$a+1)+L$b},L$h.quartIn=function(L$a,L$b,L$c,L$d){return L$c*(L$a/=L$d)*L$a*L$a*L$a+L$b},L$h.quartInOut=function(L$a,L$b,L$c,L$d){return(L$a/=.5*L$d)<1?.5*L$c*L$a*L$a*L$a*L$a+L$b:.5*-L$c*((L$a-=2)*L$a*L$a*L$a-2)+L$b},L$h.quartOut=function(L$a,L$b,L$c,L$d){return-L$c*((L$a=L$a/L$d-1)*L$a*L$a*L$a-1)+L$b},L$h.cubicIn=function(L$a,L$b,L$c,L$d){return L$c*(L$a/=L$d)*L$a*L$a+L$b},L$h.cubicInOut=function(L$a,L$b,L$c,L$d){return(L$a/=.5*L$d)<1?.5*L$c*L$a*L$a*L$a+L$b:.5*L$c*((L$a-=2)*L$a*L$a+2)+L$b},L$h.cubicOut=function(L$a,L$b,L$c,L$d){return L$c*((L$a=L$a/L$d-1)*L$a*L$a+1)+L$b},L$h.quadIn=function(L$a,L$b,L$c,L$d){return L$c*(L$a/=L$d)*L$a+L$b},L$h.quadInOut=function(L$a,L$b,L$c,L$d){return(L$a/=.5*L$d)<1?.5*L$c*L$a*L$a+L$b:.5*-L$c*(--L$a*(L$a-2)-1)+L$b},L$h.quadOut=function(L$a,L$b,L$c,L$d){return-L$c*(L$a/=L$d)*(L$a-2)+L$b},L$h.expoIn=function(L$a,L$b,L$c,L$d){return 0==L$a?L$b:L$c*Math.pow(2,10*(L$a/L$d-1))+L$b-.001*L$c},L$h.expoInOut=function(L$a,L$b,L$c,L$d){return 0==L$a?L$b:L$a==L$d?L$b+L$c:(L$a/=.5*L$d)<1?.5*L$c*Math.pow(2,10*(L$a-1))+L$b:.5*L$c*(2-Math.pow(2,-10*--L$a))+L$b},L$h.expoOut=function(L$a,L$b,L$c,L$d){return L$a==L$d?L$b+L$c:L$c*(1-Math.pow(2,-10*L$a/L$d))+L$b},L$h.circIn=function(L$a,L$b,L$c,L$d){return-L$c*(Math.sqrt(1-(L$a/=L$d)*L$a)-1)+L$b},L$h.circInOut=function(L$a,L$b,L$c,L$d){return(L$a/=.5*L$d)<1?.5*-L$c*(Math.sqrt(1-L$a*L$a)-1)+L$b:.5*L$c*(Math.sqrt(1-(L$a-=2)*L$a)+1)+L$b},L$h.circOut=function(L$a,L$b,L$c,L$d){return L$c*Math.sqrt(1-(L$a=L$a/L$d-1)*L$a)+L$b},L$h.HALF_PI=.5*Math.PI,L$h.PI2=2*Math.PI,L$h}(),L$V=function(){function L$l(){this._hit=null,this._unHit=null}L$k(L$l,"laya.utils.HitArea");var L$a=L$l.prototype;return L$a.isHit=function(L$a,L$b){return!!L$l.isHitGraphic(L$a,L$b,this.hit)&&!L$l.isHitGraphic(L$a,L$b,this.unHit)},L$a.contains=function(L$a,L$b){return this.isHit(L$a,L$b)},L$o(0,L$a,"hit",function(){return this._hit||(this._hit=new L$m),this._hit},function(L$a){this._hit=L$a}),L$o(0,L$a,"unHit",function(){return this._unHit||(this._unHit=new L$m),this._unHit},function(L$a){this._unHit=L$a}),L$l.isHitGraphic=function(L$a,L$b,L$c){if(!L$c)return!1;var L$d;if(!(L$d=L$c.cmds)&&L$c._one&&((L$d=L$l._cmds).length=1,L$d[0]=L$c._one),!L$d)return!1;var L$e,L$f,L$g=0;for(L$e=L$d.length,L$g=0;L$g<L$e;L$g++)if(L$f=L$d[L$g]){var L$h=L$J._context;switch(L$f.callee){case L$h._translate:case 6:L$a-=L$f[0],L$b-=L$f[1]}if(L$l.isHitCmd(L$a,L$b,L$f))return!0}return!1},L$l.isHitCmd=function(L$a,L$b,L$c){if(!L$c)return!1;var L$d=L$J._context,L$e=!1;switch(L$c.callee){case L$d._drawRect:case 13:L$l._rec.setTo(L$c[0],L$c[1],L$c[2],L$c[3]),L$e=L$l._rec.contains(L$a,L$b);break;case L$d._drawCircle:case L$d._fillCircle:case 14:L$e=(L$a-=L$c[0])*L$a+(L$b-=L$c[1])*L$b<L$c[2]*L$c[2];break;case L$d._drawPoly:case 18:L$a-=L$c[0],L$b-=L$c[1],L$e=L$l.ptInPolygon(L$a,L$b,L$c[2])}return L$e},L$l.ptInPolygon=function(L$a,L$b,L$c){var L$d;(L$d=L$l._ptPoint).setTo(L$a,L$b);var L$e,L$f=0,L$g=NaN,L$h=NaN,L$i=NaN,L$j=NaN;L$e=L$c.length;for(var L$k=0;L$k<L$e;L$k+=2){if(L$g=L$c[L$k],L$h=L$c[L$k+1],L$i=L$c[(L$k+2)%L$e],L$h!=(L$j=L$c[(L$k+3)%L$e]))if(!(L$d.y<Math.min(L$h,L$j)))if(!(L$d.y>=Math.max(L$h,L$j)))(L$d.y-L$h)*(L$i-L$g)/(L$j-L$h)+L$g>L$d.x&&L$f++}return L$f%2==1},L$l._cmds=[],L$i(L$l,["_rec",function(){return this._rec=new L$B},"_ptPoint",function(){return this._ptPoint=new L$A}]),L$l}(),L$W=(function(){function L$e(L$a,L$b,L$c,L$d){this.char=L$a,this.charNum=L$a.charCodeAt(0),this._x=this._y=0,this.width=L$b,this.height=L$c,this.style=L$d,this.isWord=!L$e._isWordRegExp.test(L$a)}L$k(L$e,"laya.utils.HTMLChar");var L$a=L$e.prototype;L$z.imps(L$a,{"laya.display.ILayout":!0}),L$a.setSprite=function(L$a){this._sprite=L$a},L$a.getSprite=function(){return this._sprite},L$a._isChar=function(){return!0},L$a._getCSSStyle=function(){return this.style},L$o(0,L$a,"width",function(){return this._w},function(L$a){this._w=L$a}),L$o(0,L$a,"x",function(){return this._x},function(L$a){this._sprite&&(this._sprite.x=L$a),this._x=L$a}),L$o(0,L$a,"y",function(){return this._y},function(L$a){this._sprite&&(this._sprite.y=L$a),this._y=L$a}),L$o(0,L$a,"height",function(){return this._h},function(L$a){this._h=L$a}),L$e._isWordRegExp=new RegExp("[\\w.]","")}(),function(){function L$b(){}L$k(L$b,"laya.utils.Log"),L$b.enable=function(){L$b._logdiv||(L$b._logdiv=L$O.window.document.createElement("div"),L$O.window.document.body.appendChild(L$b._logdiv),L$b._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},L$b.toggle=function(){var L$a=L$b._logdiv.style;"1px"==L$a.width?L$a.width=L$a.height="50%":L$a.width=L$a.height="1px"},L$b.print=function(L$a){L$b._logdiv&&(L$b.maxCount<=L$b._count&&L$b.clear(),L$b._count++,L$b._logdiv.innerText+=L$a+"\n",L$b._logdiv.scrollTop=L$b._logdiv.scrollHeight)},L$b.clear=function(){L$b._logdiv.innerText="",L$b._count=0},L$b._logdiv=null,L$b._count=0,L$b.maxCount=20}(),function(){function L$b(){}L$k(L$b,"laya.utils.Mouse"),L$o(1,L$b,"cursor",function(){return L$b._style.cursor},function(L$a){L$b._style.cursor=L$a}),L$b.hide=function(){"none"!=L$b.cursor&&(L$b._preCursor=L$b.cursor,L$b.cursor="none")},L$b.show=function(){"none"==L$b.cursor&&(L$b.cursor=L$b._preCursor?L$b._preCursor:"auto")},L$b._preCursor=null,L$i(L$b,["_style",function(){return this._style=L$O.document.body.style}])}(),function(){function L$f(){}return L$k(L$f,"laya.utils.Pool"),L$f.getPoolBySign=function(L$a){return L$f._poolDic[L$a]||(L$f._poolDic[L$a]=[])},L$f.clearBySign=function(L$a){L$f._poolDic[L$a]&&(L$f._poolDic[L$a].length=0)},L$f.recover=function(L$a,L$b){L$b.__InPool||(L$b.__InPool=!0,L$f.getPoolBySign(L$a).push(L$b))},L$f.getItemByClass=function(L$a,L$b){var L$c=L$f.getPoolBySign(L$a),L$d=L$c.length?L$c.pop():new L$b;return L$d.__InPool=!1,L$d},L$f.getItemByCreateFun=function(L$a,L$b,L$c){var L$d=L$f.getPoolBySign(L$a),L$e=L$d.length?L$d.pop():L$b.call(L$c);return L$e.__InPool=!1,L$e},L$f.getItem=function(L$a){var L$b=L$f.getPoolBySign(L$a),L$c=L$b.length?L$b.pop():null;return L$c&&(L$c.__InPool=!1),L$c},L$f._poolDic={},L$f.InPoolSign="__InPool",L$f}()),L$X=function(){function L$i(){}return L$k(L$i,"laya.utils.Stat"),L$o(1,L$i,"onclick",null,function(L$a){L$i._sp&&L$i._sp.on("click",L$i._sp,L$a),L$i._canvas&&(L$i._canvas.source.onclick=L$a,L$i._canvas.source.style.pointerEvents="")}),L$i.show=function(L$a,L$b,L$c){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),!L$J.isConchApp||L$J.isConchWebGL){if(L$J.isConchWebGL||L$O.onMiniGame||L$O.onLimixiu||(L$i._useCanvas=!0),L$i._show=!0,L$i._fpsData.length=60,L$i._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},L$i._view[1]={title:"Sprite",value:"_spriteStr",color:"white",units:"int"},L$i._view[2]={title:"DrawCall",value:"drawCall",color:"green",units:"int"},L$i._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},L$J.isWebGL)if(L$i._view[4]={title:"Shader",value:"shaderCall",color:"red",units:"int"},L$J.is3DMode){if(L$i._view[0].title="FPS(3D)",L$i._view[5]={title:"TriFaces",value:"trianglesFaces",color:"blue",units:"int"},L$i._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},L$i._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"},1==L$c){var L$d=8;L$i._view[L$d++]={title:"VATTRIBS",value:"MAX_VERTEX_ATTRIBS",color:"white",units:"int",varying:1},L$i._view[L$d++]={title:"VUNIFORMS",value:"MAX_VERTEX_UNIFORM_VECTORS",color:"white",units:"int",varying:1},L$i._view[L$d++]={title:"VARYINGS",value:"MAX_VARYING_VECTORS",color:"white",units:"int",varying:1},L$i._view[L$d++]={title:"CTEXTURES",value:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},L$i._view[L$d++]={title:"VTEXTURES",value:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},L$i._view[L$d++]={title:"TEXTURES",value:"MAX_TEXTURE_IMAGE_UNITS",color:"white",units:"int",varying:1},L$i._view[L$d++]={title:"FUNIFORMS",value:"MAX_FRAGMENT_UNIFORM_VECTORS",color:"white",units:"int",varying:1},L$i._view[L$d++]={title:"SVERSION",value:"SHADING_LANGUAGE_VERSION",color:"white",units:"string",varying:1},L$i._view[L$d++]={title:"VERSION",value:"VERSION",color:"white",units:"string",varying:1}}else if(2==L$c){L$d=8;L$i._view[L$d++]={title:"astc",value:"WEBGL_compressed_texture_astc",color:"white",units:"object",varying:2},L$i._view[L$d++]={title:"atc",value:"WEBGL_compressed_texture_atc",color:"white",units:"object",varying:2},L$i._view[L$d++]={title:"etc",value:"WEBGL_compressed_texture_etc",color:"white",units:"object",varying:2},L$i._view[L$d++]={title:"etc1",value:"WEBGL_compressed_texture_etc1",color:"white",units:"object",varying:2},L$i._view[L$d++]={title:"pvrtc",value:"WEBGL_compressed_texture_pvrtc",color:"white",units:"object",varying:2},L$i._view[L$d++]={title:"s3tc",value:"WEBGL_compressed_texture_s3tc",color:"white",units:"object",varying:2},L$i._view[L$d++]={title:"srgb",value:"WEBGL_compressed_texture_s3tc_srgb",color:"white",units:"object",varying:2}}}else L$i._view[0].title="FPS(WebGL)",L$i._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};else L$i._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"};L$i._useCanvas?L$i.createUIPre(L$a,L$b):L$i.createUI(L$a,L$b),L$i.enable()}else L$O.window.conch.showFPS&&L$O.window.conch.showFPS(L$a,L$b)},L$i.createUIPre=function(L$a,L$b){var L$c=L$O.pixelRatio;L$i._width=170*L$c,L$i._vx=75*L$c,L$i._height=L$c*(12*L$i._view.length+3*L$c)+4,L$i._fontSize=12*L$c;for(var L$d=0;L$d<L$i._view.length;L$d++)L$i._view[L$d].x=4,L$i._view[L$d].y=L$d*L$i._fontSize+2*L$c;L$i._canvas||((L$i._canvas=new L$ta("2D")).size(L$i._width,L$i._height),(L$i._ctx=L$i._canvas.getContext("2d")).textBaseline="top",L$i._ctx.font=L$i._fontSize+"px Sans-serif",L$i._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;direction:ltr;left:"+L$a+"px;top:"+L$b+"px;width:"+L$i._width/L$c+"px;height:"+L$i._height/L$c+"px;"),L$i._first=!0,L$i.loop(),L$i._first=!1,L$O.container.appendChild(L$i._canvas.source)},L$i.createUI=function(L$a,L$b){var L$c=L$i._sp,L$d=L$O.pixelRatio;L$c||(L$c=new L$la,(L$i._leftText=new L$qa).pos(5,5),L$i._leftText.color="#ffffff",L$c.addChild(L$i._leftText),(L$i._txt=new L$qa).pos(80*L$d,5),L$i._txt.color="#ffffff",L$c.addChild(L$i._txt),L$i._sp=L$c),L$c.pos(L$a,L$b);for(var L$e="",L$f=0;L$f<L$i._view.length;L$f++){L$e+=L$i._view[L$f].title+"\n"}L$i._leftText.text=L$e;var L$g=170*L$d,L$h=L$d*(12*L$i._view.length+3*L$d)+4;L$i._txt.fontSize=L$i._fontSize*L$d,L$i._leftText.fontSize=L$i._fontSize*L$d,L$c.size(L$g,L$h),L$c.graphics.clear(),L$c.graphics.setAlpha(.5),L$c.graphics.drawRect(0,0,L$g,L$h,"#999999"),L$c.graphics.setAlpha(1),L$i.loop()},L$i.enable=function(){L$z.timer.frameLoop(1,L$i,L$i.loop)},L$i.hide=function(){L$i._show=!1,L$z.timer.clear(L$i,L$i.loop),L$i._canvas&&L$O.removeElement(L$i._canvas.source)},L$i.clear=function(){L$i.trianglesFaces=L$i.drawCall=L$i.shaderCall=L$i.spriteCount=L$i.spriteRenderUseCacheCount=L$i.treeNodeCollision=L$i.treeSpriteCollision=L$i.canvasNormal=L$i.canvasBitmap=L$i.canvasReCache=0},L$i.loop=function(){L$i._count++;var L$a=L$O.now();if(!(L$a-L$i._timer<1e3)){var L$b=L$i._count;if(L$i.FPS=Math.round(1e3*L$b/(L$a-L$i._timer)),L$i._show){L$i.trianglesFaces=Math.round(L$i.trianglesFaces/L$b),L$i.spriteCount=L$i._useCanvas?(L$i.drawCall=Math.round(L$i.drawCall/L$b)-2,L$i.shaderCall=Math.round(L$i.shaderCall/L$b),Math.round(L$i.spriteCount/L$b)-1):(L$i.drawCall=Math.round(L$i.drawCall/L$b)-2,L$i.shaderCall=Math.round(L$i.shaderCall/L$b)-4,Math.round(L$i.spriteCount/L$b)-4),L$i.spriteRenderUseCacheCount=Math.round(L$i.spriteRenderUseCacheCount/L$b),L$i.canvasNormal=Math.round(L$i.canvasNormal/L$b),L$i.canvasBitmap=Math.round(L$i.canvasBitmap/L$b),L$i.canvasReCache=Math.ceil(L$i.canvasReCache/L$b),L$i.treeNodeCollision=Math.round(L$i.treeNodeCollision/L$b),L$i.treeSpriteCollision=Math.round(L$i.treeSpriteCollision/L$b);var L$c=0<L$i.FPS?Math.floor(1e3/L$i.FPS).toString():" ";L$i._fpsStr=L$i.FPS+(L$i.renderSlow?" slow":"")+" "+L$c,L$i._spriteStr=L$i.spriteCount+(L$i.spriteRenderUseCacheCount?"/"+L$i.spriteRenderUseCacheCount:""),L$i._canvasStr=L$i.canvasReCache+"/"+L$i.canvasNormal+"/"+L$i.canvasBitmap,L$i.currentMemorySize=L$N.systemResourceManager.memorySize,L$i._useCanvas?L$i.renderInfoPre():L$i.renderInfo(),L$i.clear()}L$i._count=0,L$i._timer=L$a}},L$i.renderInfoPre=function(){if(L$i._canvas){var L$a=L$i._ctx;L$a.clearRect(L$i._first?0:L$i._vx,0,L$i._width,L$i._height);for(var L$b=L$J.WebGL.mainContext,L$c=0;L$c<L$i._view.length;L$c++){var L$d=L$i._view[L$c];L$i._first&&(L$a.fillStyle="white",L$a.fillText(L$d.title,L$d.x,L$d.y,null,null,null)),L$a.fillStyle=L$d.color;var L$e=-1;if((L$d=L$i._view[L$c]).varying){if(L$b)switch(L$d.varying){case 1:L$e=L$b.getParameter(L$b[L$d.value]);break;case 2:L$e=L$b.getExtension(L$d.value)}}else L$e=L$i[L$d.value];"M"==L$d.units&&(L$e=Math.floor(L$e/1048576*100)/100+" M"),"K"==L$d.units&&(L$e=Math.floor(L$e/1024*100)/100+" K"),"string"==L$d.units&&(L$e=L$e.match(/\d+\.?\d/i)),L$a.fillText(L$e+"",L$d.x+L$i._vx,L$d.y,null,null,null)}}},L$i.renderInfo=function(){for(var L$a="",L$b=L$J.WebGL.mainContext,L$c=0;L$c<L$i._view.length;L$c++){var L$d=L$i._view[L$c],L$e=-1;if(L$d.varying){if(L$b)switch(L$d.varying){case 1:L$e=L$b.getParameter(L$b[L$d.value]);break;case 2:L$e=L$b.getExtension(L$d.value)}}else L$e=L$i[L$d.value];"M"==L$d.units&&(L$e=Math.floor(L$e/1048576*100)/100+" M"),"K"==L$d.units&&(L$e=Math.floor(L$e/1024*100)/100+" K"),"string"==L$d.units&&(L$e=L$e.match(/\d+\.?\d/i)),L$a+=L$e+"\n"}L$i._txt.text=L$a},L$i.FPS=0,L$i.loopCount=0,L$i.shaderCall=0,L$i.drawCall=0,L$i.trianglesFaces=0,L$i.spriteCount=0,L$i.spriteRenderUseCacheCount=0,L$i.treeNodeCollision=0,L$i.treeSpriteCollision=0,L$i.canvasNormal=0,L$i.canvasBitmap=0,L$i.canvasReCache=0,L$i.renderSlow=!1,L$i.currentMemorySize=0,L$i._fpsStr=null,L$i._canvasStr=null,L$i._spriteStr=null,L$i._fpsData=[],L$i._timer=0,L$i._count=0,L$i._view=[],L$i._fontSize=12,L$i._txt=null,L$i._leftText=null,L$i._sp=null,L$i._show=!1,L$i._useCanvas=!1,L$i._canvas=null,L$i._ctx=null,L$i._first=!1,L$i._vx=NaN,L$i._width=0,L$i._height=100,L$i}(),L$Y=(function(){function L$a(){this._strsToID={},this._idToStrs=[],this._length=0}L$k(L$a,"laya.utils.StringKey");var L$b=L$a.prototype;L$b.add=function(L$a){var L$b=this._strsToID[L$a];return null!=L$b?L$b:(this._idToStrs[this._length]=L$a,this._strsToID[L$a]=this._length++)},L$b.getID=function(L$a){var L$b=this._strsToID[L$a];return null==L$b?-1:L$b},L$b.getName=function(L$a){var L$b=this._idToStrs[L$a];return null==L$b?void 0:L$b}}(),function(){var L$j;function L$a(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map={},this._laters=[],this._handlers=[],this._temp=[],this._count=0,this._errorRecord=!1,this.currTimer=this._now(),this._lastTimer=this._now(),this._init()}L$k(L$a,"laya.utils.Timer");var L$b=L$a.prototype;return L$b._init=function(){L$z.timer&&L$z.timer.frameLoop(1,this,this._update)},L$b._now=function(){return Date.now()},L$b._update=function(){if(this.scale<=0)this._lastTimer=this._now();else{var L$a=this.currFrame=this.currFrame+this.scale,L$b=this._now();this._delta=(L$b-this._lastTimer)*this.scale;var L$c=this.currTimer=this.currTimer+this._delta;L$z.isDebug&&6e4<Math.abs(L$b-this._lastTimer)&&console.error("系统时间错误！"+(L$b-this._lastTimer)),this._lastTimer=L$b;var L$d=this._handlers;for(L$g=this._count=0,L$h=L$d.length;L$g<L$h;L$g++)if(null!==(L$i=L$d[L$g]).method){var L$e=L$i.userFrame?L$a:L$c;if(L$e>=L$i.exeTime)if(L$i.repeat)if(L$i.jumpFrame)for(;L$e>=L$i.exeTime;)L$i.exeTime+=L$i.delay,L$i.run(!1);else L$i.exeTime+=L$i.delay,L$i.run(!1),L$e>L$i.exeTime&&(L$i.exeTime+=Math.ceil((L$e-L$i.exeTime)/L$i.delay)*L$i.delay);else L$i.run(!0)}else this._count++;(30<this._count||L$a%200==0)&&this._clearHandlers();for(var L$f=this._laters,L$g=0,L$h=L$f.length-1;L$g<=L$h;L$g++){var L$i=L$f[L$g];this._isIgnoreRecover(L$i)||(null!==L$i.method&&(delete this._map[L$i.key],L$i.run(!1)),this._recoverHandler(L$i)),L$g===L$h&&(L$h=L$f.length-1)}L$f.length=0}},L$b._clearHandlers=function(){for(var L$a=this._handlers,L$b=0,L$c=L$a.length;L$b<L$c;L$b++){var L$d=L$a[L$b];null!==L$d.method?this._temp.push(L$d):this._isIgnoreRecover(L$d)?this._temp.push(L$d):this._recoverHandler(L$d)}this._handlers=this._temp,this._temp=L$a,this._temp.length=0},L$b._recoverHandler=function(L$a){this._map[L$a.key]==L$a&&delete this._map[L$a.key],L$a.recover()},L$b._create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){if(!L$c)return L$e.apply(L$d,L$f),null;if(L$g){var L$i=this._getHandler(L$d,L$e);if(L$i)return L$i.repeat=L$b,L$i.userFrame=L$a,L$i.delay=L$c,L$i.ignoreRecover=L$h,L$i.caller=L$d,L$i.method=L$e,L$i.args=L$f,L$i.exeTime=L$c+(L$a?this.currFrame:this.currTimer+this._now()-this._lastTimer),L$i}return(L$i=L$j.create()).repeat=L$b,L$i.userFrame=L$a,L$i.delay=L$c,L$i.ignoreRecover=L$h,L$i.caller=L$d,L$i.method=L$e,L$i.args=L$f,L$i.exeTime=L$c+(L$a?this.currFrame:this.currTimer+this._now()-this._lastTimer)+1,this._indexHandler(L$i),this._handlers.push(L$i),L$i},L$b._indexHandler=function(L$a){var L$b=L$a.caller,L$c=L$a.method,L$d=L$b?L$b.$_GID||(L$b.$_GID=L$$.getGID()):0,L$e=L$c.$_TID||(L$c.$_TID=this._mid++);L$a.key=L$d+"_"+L$e,this._map[L$a.key]=L$a},L$b.once=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=!0),this._create(!1,!1,L$a,L$b,L$c,L$d,L$e,!1)},L$b.loop=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){void 0===L$e&&(L$e=!0),void 0===L$f&&(L$f=!1),void 0===L$g&&(L$g=!1);var L$h=this._create(!1,!0,L$a,L$b,L$c,L$d,L$e,L$g);L$h&&(L$h.jumpFrame=L$f)},L$b.frameOnce=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=!0),this._create(!0,!1,L$a,L$b,L$c,L$d,L$e,!1)},L$b.frameLoop=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$e&&(L$e=!0),void 0===L$f&&(L$f=!1),this._create(!0,!0,L$a,L$b,L$c,L$d,L$e,L$f)},L$b.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+L$j._freeCount},L$b.clear=function(L$a,L$b){var L$c=this._getHandler(L$a,L$b);return!(!L$c||this._isIgnoreRecover(L$c))&&(delete this._map[L$c.key],L$c.key=null,L$c.clear(),!0)},L$b.clearAll=function(L$a){if(L$a)for(var L$b=0,L$c=this._handlers.length;L$b<L$c;L$b++){var L$d=this._handlers[L$b];L$d.caller===L$a&&(this._isIgnoreRecover(L$d)||(delete this._map[L$d.key],L$d.key=null,L$d.clear()))}},L$b._getHandler=function(L$a,L$b){var L$c=L$a?L$a.$_GID||(L$a.$_GID=L$$.getGID()):0,L$d=L$b.$_TID||(L$b.$_TID=this._mid++);return this._map[L$c+"_"+L$d]},L$b._isIgnoreRecover=function(L$a){if(L$a.ignoreRecover||L$a.caller&&"IgnoreRecover"==L$a.caller.callername){if(this._errorRecord)console.warn("核心定时器销毁忽略");else{this._errorRecord=!0;var L$b="";try{arguments.propertyIsEnumerable.caller}catch(L$a){L$b=L$a.stack}L$z.recordError("报错：核心定时器销毁忽略  "+L$b)}return!0}return!1},L$b.hasHandler=function(L$a,L$b){return this._map[L$a.$_GID+"_"+L$b.$_TID]},L$b.callLater=function(L$a,L$b,L$c){if(null==this._getHandler(L$a,L$b)){var L$d=L$j.create();L$d.caller=L$a,L$d.method=L$b,L$d.args=L$c,this._indexHandler(L$d),this._laters.push(L$d)}},L$b.runCallLater=function(L$a,L$b){var L$c=this._getHandler(L$a,L$b);L$c&&null!=L$c.method&&(this._isIgnoreRecover(L$c)||(delete this._map[L$c.key],L$c.run(!0)))},L$b.runTimer=function(L$a,L$b){this.runCallLater(L$a,L$b)},L$o(0,L$b,"delta",function(){return this._delta}),L$a.__init$=function(){L$j=function(){function L$b(){this.key=null,this.repeat=!1,this.delay=0,this.userFrame=!1,this.ignoreRecover=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null,this.jumpFrame=!1}L$k(L$b,"");var L$a=L$b.prototype;return L$a.clear=function(){this.caller=null,this.method=null,this.args=null,this.ignoreRecover=!1},L$a.recover=function(){this.clear(),this.args=L$b._freeHandler,L$b._freeHandler=this,L$b._freeCount++},L$a.run=function(L$a){var L$b=this.caller;if(L$b&&L$b.destroyed)return this.clear();var L$c=this.method,L$d=this.args;L$a&&this.clear(),null!=L$c&&(L$d?L$c.apply(L$b,L$d):L$c.call(L$b))},L$b._freeHandler=null,L$b._freeCount=0,L$b.create=function(){var L$a=L$b._freeHandler;return L$a?(L$b._freeHandler=L$a.args,--L$b._freeCount,L$a.args=null,L$a):new L$b},L$b}()},L$a}()),L$Z=function(){function L$l(){this.gid=0}L$k(L$l,"laya.utils.Tween");var L$a=L$l.prototype;return L$a.to=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){return void 0===L$f&&(L$f=0),void 0===L$g&&(L$g=!1),this._create(L$a,L$b,L$c,L$d,L$e,L$f,L$g,!0,!1,!0)},L$a.from=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){return void 0===L$f&&(L$f=0),void 0===L$g&&(L$g=!1),this._create(L$a,L$b,L$c,L$d,L$e,L$f,L$g,!1,!1,!0)},L$a._create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){if(!L$a)throw new Error("Tween:target is null");this._target=L$a,this._duration=L$c,this._ease=L$d||L$b.ease||L$l.easeNone,this._complete=L$e||L$b.complete,this._delay=L$f,this._props=[],this._usedTimer=0,this._startTimer=L$O.now(),this._usedPool=L$i,this._delayParam=null,this.update=L$b.update;var L$k=L$a.$_GID||(L$a.$_GID=L$$.getGID());return L$l.tweenMap[L$k]?(L$g&&L$l.clearTween(L$a),L$l.tweenMap[L$k].push(this)):L$l.tweenMap[L$k]=[this],L$j?L$f<=0?this.firstStart(L$a,L$b,L$h):(this._delayParam=[L$a,L$b,L$h],L$z.scaleTimer.once(L$f,this,this.firstStart,this._delayParam)):this._initProps(L$a,L$b,L$h),this},L$a.firstStart=function(L$a,L$b,L$c){this._delayParam=null,L$a.destroyed?this.clear():(this._initProps(L$a,L$b,L$c),this._beginLoop())},L$a._initProps=function(L$a,L$b,L$c){for(var L$d in L$b)if("number"==typeof L$a[L$d]){var L$e=L$c?L$a[L$d]:L$b[L$d],L$f=L$c?L$b[L$d]:L$a[L$d];this._props.push([L$d,L$e,L$f-L$e]),L$c||(L$a[L$d]=L$e)}},L$a._beginLoop=function(){L$z.scaleTimer.frameLoop(1,this,this._doEase)},L$a._doEase=function(){this._updateEase(L$O.now())},L$a._updateEase=function(L$a){var L$b=this._target;if(L$b){if(L$b.destroyed)return L$l.clearTween(L$b);var L$c=this._usedTimer=L$a-this._startTimer-this._delay;if(!(L$c<0)){if(L$c>=this._duration)return this.complete();for(var L$d=0<L$c?this._ease(L$c,0,1,this._duration):0,L$e=this._props,L$f=0,L$g=L$e.length;L$f<L$g;L$f++){var L$h=L$e[L$f];L$b[L$h[0]]=L$h[1]+L$d*L$h[2]}this.update&&this.update.run()}}},L$a.complete=function(){if(this._target){L$z.scaleTimer.runTimer(this,this.firstStart);for(var L$a=this._target,L$b=this._props,L$c=this._complete,L$d=0,L$e=L$b.length;L$d<L$e;L$d++){var L$f=L$b[L$d];L$a[L$f[0]]=L$f[1]+L$f[2]}this.update&&this.update.run(),this.clear(),L$c&&L$c.run()}},L$a.pause=function(){L$z.scaleTimer.clear(this,this._beginLoop),L$z.scaleTimer.clear(this,this._doEase),L$z.scaleTimer.clear(this,this.firstStart);var L$a;(L$a=L$O.now()-this._startTimer-this._delay)<0&&(this._usedTimer=L$a)},L$a.setStartTime=function(L$a){this._startTimer=L$a},L$a.clear=function(){this._target&&(this._remove(),this._clear())},L$a._clear=function(){this.pause(),L$z.scaleTimer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._delayParam=null,this._usedPool&&(this.update=null,L$W.recover("tween",this))},L$a.recover=function(){this._usedPool=!0,this._clear()},L$a._remove=function(){var L$a=L$l.tweenMap[this._target.$_GID];if(L$a)for(var L$b=0,L$c=L$a.length;L$b<L$c;L$b++)if(L$a[L$b]===this){L$a.splice(L$b,1);break}},L$a.restart=function(){if(this.pause(),this._usedTimer=0,this._startTimer=L$O.now(),this._delayParam)L$z.scaleTimer.once(this._delay,this,this.firstStart,this._delayParam);else{for(var L$a=this._props,L$b=0,L$c=L$a.length;L$b<L$c;L$b++){var L$d=L$a[L$b];this._target[L$d[0]]=L$d[1]}L$z.scaleTimer.once(this._delay,this,this._beginLoop)}},L$a.resume=function(){this._usedTimer>=this._duration||(this._startTimer=L$O.now()-this._usedTimer-this._delay,this._delayParam?this._usedTimer<0?L$z.scaleTimer.once(-this._usedTimer,this,this.firstStart,this._delayParam):this.firstStart.apply(this,this._delayParam):this._beginLoop())},L$o(0,L$a,"progress",null,function(L$a){var L$b=L$a*this._duration;this._startTimer=L$O.now()-this._delay-L$b}),L$l.to=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){return void 0===L$f&&(L$f=0),void 0===L$g&&(L$g=!1),void 0===L$h&&(L$h=!0),L$W.getItemByClass("tween",L$l)._create(L$a,L$b,L$c,L$d,L$e,L$f,L$g,!0,L$h,!0)},L$l.from=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){return void 0===L$f&&(L$f=0),void 0===L$g&&(L$g=!1),void 0===L$h&&(L$h=!0),L$W.getItemByClass("tween",L$l)._create(L$a,L$b,L$c,L$d,L$e,L$f,L$g,!1,L$h,!0)},L$l.clearAll=function(L$a){if(L$a&&L$a.$_GID){var L$b=L$l.tweenMap[L$a.$_GID];if(L$b){for(var L$c=0,L$d=L$b.length;L$c<L$d;L$c++)L$b[L$c]._clear();L$b.length=0}}},L$l.clear=function(L$a){L$a.clear()},L$l.clearTween=function(L$a){L$l.clearAll(L$a)},L$l.easeNone=function(L$a,L$b,L$c,L$d){return L$c*L$a/L$d+L$b},L$l.tweenMap={},L$l}(),L$$=function(){function L$h(){}return L$k(L$h,"laya.utils.Utils"),L$h.toRadian=function(L$a){return L$a*L$h._pi2},L$h.toAngle=function(L$a){return L$a*L$h._pi},L$h.toHexColor=function(L$a){if(L$a<0||isNaN(L$a))return null;for(var L$b=L$a.toString(16);L$b.length<6;)L$b="0"+L$b;return"#"+L$b},L$h.getGID=function(){return L$h._gid++},L$h.concatArray=function(L$a,L$b){if(!L$b)return L$a;if(!L$a)return L$b;var L$c=0,L$d=L$b.length;for(L$c=0;L$c<L$d;L$c++)L$a.push(L$b[L$c]);return L$a},L$h.clearArray=function(L$a){return L$a&&(L$a.length=0),L$a},L$h.copyArray=function(L$a,L$b){if(L$a||(L$a=[]),!L$b)return L$a;L$a.length=L$b.length;var L$c=0,L$d=L$b.length;for(L$c=0;L$c<L$d;L$c++)L$a[L$c]=L$b[L$c];return L$a},L$h.getGlobalRecByPoints=function(L$a,L$b,L$c,L$d,L$e){var L$f,L$g;return L$f=new L$A(L$b,L$c),L$f=L$a.localToGlobal(L$f),L$g=new L$A(L$d,L$e),L$g=L$a.localToGlobal(L$g),L$B._getWrapRec([L$f.x,L$f.y,L$g.x,L$g.y])},L$h.getGlobalPosAndScale=function(L$a){return L$h.getGlobalRecByPoints(L$a,0,0,1,1)},L$h.bind=function(L$a,L$b){return L$a.bind(L$b)},L$h.measureText=function(L$a,L$b){return L$F.measureText(L$a,L$b)},L$h.contextMeasureText=function(L$a){var L$b=L$O.context.measureText(L$a);return L$b||(L$b={width:16,height:16}),L$b},L$h.updateOrder=function(L$a){if(!L$a||L$a.length<2)return!1;for(var L$b,L$c=1,L$d=0,L$e=L$a.length,L$f=NaN;L$c<L$e;){for(L$b=L$a[L$d=L$c],L$f=L$a[L$d]._zOrder;-1<--L$d&&L$a[L$d]._zOrder>L$f;)L$a[L$d+1]=L$a[L$d];L$a[L$d+1]=L$b,L$c++}var L$g=L$b.parent.conchModel;if(L$g)if(null!=L$g.updateZOrder)L$g.updateZOrder();else{for(L$c=0;L$c<L$e;L$c++)L$g.removeChild(L$a[L$c].conchModel);for(L$c=0;L$c<L$e;L$c++)L$g.addChildAt(L$a[L$c].conchModel,L$c)}return!0},L$h.transPointList=function(L$a,L$b,L$c){var L$d=0,L$e=L$a.length;for(L$d=0;L$d<L$e;L$d+=2)L$a[L$d]+=L$b,L$a[L$d+1]+=L$c},L$h.parseInt=function(L$a,L$b){void 0===L$b&&(L$b=0);var L$c=L$O.window.parseInt(L$a,L$b);return isNaN(L$c)?0:L$c},L$h.getFileExtension=function(L$a){L$h._extReg.lastIndex=L$a.lastIndexOf(".");var L$b=L$h._extReg.exec(L$a);return L$b&&1<L$b.length?L$b[1].toLowerCase():null},L$h.getTransformRelativeToWindow=function(L$a,L$b,L$c){var L$d=L$z.stage,L$e=laya.utils.Utils.getGlobalPosAndScale(L$a),L$f=L$d._canvasTransform.clone(),L$g=L$f.tx,L$h=L$f.ty;L$f.rotate(-Math.PI/180*L$z.stage.canvasDegree),L$f.scale(L$z.stage.clientScaleX,L$z.stage.clientScaleY);var L$i=L$z.stage.canvasDegree%180!=0,L$j=NaN,L$k=NaN;L$i?(L$j=L$c+L$e.y,L$k=L$b+L$e.x,L$j*=L$f.d,L$k*=L$f.a,90==L$z.stage.canvasDegree?(L$j=L$g-L$j,L$k+=L$h):(L$j+=L$g,L$k=L$h-L$k)):(L$j=L$b+L$e.x,L$k=L$c+L$e.y,L$j*=L$f.a,L$k*=L$f.d,L$j+=L$g,L$k+=L$h);var L$l=NaN,L$m=NaN;return L$m=L$i?(L$l=L$f.d*L$e.height,L$f.a*L$e.width):(L$l=L$f.a*L$e.width,L$f.d*L$e.height),{x:L$j,y:L$k,scaleX:L$l,scaleY:L$m}},L$h.fitDOMElementInArea=function(L$a,L$b,L$c,L$d,L$e,L$f){L$a._fitLayaAirInitialized||(L$a._fitLayaAirInitialized=!0,L$a.style.transformOrigin=L$a.style.webKittransformOrigin="left top",L$a.style.position="absolute");var L$g=L$h.getTransformRelativeToWindow(L$b,L$c,L$d);L$a.style.transform=L$a.style.webkitTransform="scale("+L$g.scaleX+","+L$g.scaleY+") rotate("+L$z.stage.canvasDegree+"deg)",L$a.style.width=L$e+"px",L$a.style.height=L$f+"px",L$a.style.left=L$g.x+"px",L$a.style.top=L$g.y+"px"},L$h.isOkTextureList=function(L$a){if(!L$a)return!1;var L$b,L$c=0,L$d=L$a.length;for(L$c=0;L$c<L$d;L$c++)if(!(L$b=L$a[L$c])||!L$b.source)return!1;return!0},L$h.isOKCmdList=function(L$a){if(!L$a)return!1;var L$b,L$c,L$d=0,L$e=L$a.length,L$f=L$J._context;for(L$d=0;L$d<L$e;L$d++)switch((L$b=L$a[L$d]).callee){case L$f._drawTexture:case L$f._fillTexture:case L$f._drawTextureWithTransform:if(!(L$c=L$b[0])||!L$c.source)return!1}return!0},L$h._gid=1,L$h._pi=180/Math.PI,L$h._pi2=Math.PI/180,L$h._extReg=/\.(\w+)\??/g,L$h.parseXMLFromString=function(L$a){var L$b;if(L$a=L$a.replace(/>\s+</g,"><"),-1<(L$b=(new DOMParser).parseFromString(L$a,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors"))throw new Error(L$b.firstChild.firstChild.textContent);return L$b},L$h}(),L$_=function(){function L$a(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],L$J.isWebGL&&L$Q.regCacheByFunction(L$$.bind(this.startDispose,this),L$$.bind(this.getCacheList,this))}L$k(L$a,"laya.utils.VectorGraphManager");var L$b=L$a.prototype;return L$b.getId=function(){return this._id++},L$b.addShape=function(L$a,L$b){this.shapeDic[L$a]=L$b,this.useDic[L$a]||(this.useDic[L$a]=!0)},L$b.addLine=function(L$a,L$b){this.shapeLineDic[L$a]=L$b,this.shapeLineDic[L$a]||(this.shapeLineDic[L$a]=!0)},L$b.getShape=function(L$a){this._checkKey&&null!=this.useDic[L$a]&&(this.useDic[L$a]=!0)},L$b.deleteShape=function(L$a){this.shapeDic[L$a]&&(this.shapeDic[L$a]=null,delete this.shapeDic[L$a]),this.shapeLineDic[L$a]&&(this.shapeLineDic[L$a]=null,delete this.shapeLineDic[L$a]),null!=this.useDic[L$a]&&delete this.useDic[L$a]},L$b.getCacheList=function(){var L$a,L$b=[];for(L$a in this.shapeDic)L$b.push(this.shapeDic[L$a]);for(L$a in this.shapeLineDic)L$b.push(this.shapeLineDic[L$a]);return L$b},L$b.startDispose=function(L$a){var L$b;for(L$b in this.useDic)this.useDic[L$b]=!1;this._checkKey=!0},L$b.endDispose=function(){if(this._checkKey){var L$a;for(L$a in this.useDic)this.useDic[L$a]||this.deleteShape(L$a);this._checkKey=!1}},L$a.getInstance=function(){return L$a.instance=L$a.instance||new L$a},L$a.instance=null,L$a}(),L$w=function(){function L$d(){this._obj=null,this._obj=L$d.supportWeakMap?new L$O.window.WeakMap:{},L$d.supportWeakMap||L$d._maps.push(this)}L$k(L$d,"laya.utils.WeakObject");var L$a=L$d.prototype;return L$a.set=function(L$a,L$b){if(null!=L$a)if(L$d.supportWeakMap){var L$c=L$a;"string"!=typeof L$a&&"number"!=typeof L$a||(L$c=L$d._keys[L$a])||(L$c=L$d._keys[L$a]={k:L$a}),this._obj.set(L$c,L$b)}else"string"==typeof L$a||"number"==typeof L$a?this._obj[L$a]=L$b:(L$a.$_GID||(L$a.$_GID=L$$.getGID()),this._obj[L$a.$_GID]=L$b)},L$a.get=function(L$a){if(null==L$a)return null;if(L$d.supportWeakMap){var L$b="string"==typeof L$a||"number"==typeof L$a?L$d._keys[L$a]:L$a;return L$b?this._obj.get(L$b):null}return"string"==typeof L$a||"number"==typeof L$a?this._obj[L$a]:this._obj[L$a.$_GID]},L$a.del=function(L$a){if(null!=L$a)if(L$d.supportWeakMap){var L$b="string"==typeof L$a||"number"==typeof L$a?L$d._keys[L$a]:L$a;if(!L$b)return;this._obj.delete(L$b)}else"string"==typeof L$a||"number"==typeof L$a?delete this._obj[L$a]:delete this._obj[this._obj.$_GID]},L$a.has=function(L$a){if(null==L$a)return!1;if(L$d.supportWeakMap){var L$b="string"==typeof L$a||"number"==typeof L$a?L$d._keys[L$a]:L$a;return this._obj.has(L$b)}return"string"==typeof L$a||"number"==typeof L$a?null!=this._obj[L$a]:null!=this._obj[this._obj.$_GID]},L$d.__init__=function(){(L$d.supportWeakMap=null!=L$O.window.WeakMap)||L$z.timer.loop(L$d.delInterval,null,L$d.clearCache)},L$d.clearCache=function(){for(var L$a=0,L$b=L$d._maps.length;L$a<L$b;L$a++){L$d._maps[L$a]._obj={}}},L$d.supportWeakMap=!1,L$d.delInterval=3e5,L$d._keys={},L$d._maps=[],L$i(L$d,["I",function(){return this.I=new L$d}]),L$d}(),L$x=function(){function L$a(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}L$k(L$a,"laya.utils.WordText");var L$b=L$a.prototype;return L$b.setText=function(L$a){this.changed=!0,this._text=L$a},L$b.toString=function(){return this._text},L$b.charCodeAt=function(L$a){return this._text?this._text.charCodeAt(L$a):NaN},L$b.charAt=function(L$a){return this._text?this._text.charAt(L$a):null},L$o(0,L$b,"length",function(){return this._text?this._text.length:0}),L$a}(),L$aa=function(L$a){function L$g(){this._bits=0,this._displayedInStage=!1,this._parent=null,this.conchModel=null,this.name="",this._destroyed=!1,L$g.__super.call(this),this._childs=L$g.ARRAY_EMPTY,this._$P=L$g.PROP_EMPTY,this.timer=L$z.scaleTimer,this.conchModel=L$J.isConchNode?this.createConchModel():null}L$k(L$g,"laya.display.Node",L$j);var L$b=L$g.prototype;return L$b._setBit=function(L$a,L$b){1==L$a&&(this._getBit(L$a)!=L$b&&this._updateDisplayedInstage());L$b?this._bits|=L$a:this._bits&=~L$a},L$b._getBit=function(L$a){return 0!=(this._bits&L$a)},L$b._setUpNoticeChain=function(){this._getBit(1)&&this._setUpNoticeType(1)},L$b._setUpNoticeType=function(L$a){var L$b=this;for(L$b._setBit(L$a,!0),L$b=L$b.parent;L$b;){if(L$b._getBit(L$a))return;L$b._setBit(L$a,!0),L$b=L$b.parent}},L$b.on=function(L$a,L$b,L$c,L$d){return"display"!==L$a&&"undisplay"!==L$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(L$a,L$b,L$c,L$d,!1)},L$b.once=function(L$a,L$b,L$c,L$d){return"display"!==L$a&&"undisplay"!==L$a||this._getBit(1)||this._setUpNoticeType(1),this._createListener(L$a,L$b,L$c,L$d,!0)},L$b.createConchModel=function(){return null},L$b.destroy=function(L$a){void 0===L$a&&(L$a=!0),this._destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(L$a?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll(),this.timer.clearAll(this)},L$b.destroyChildren=function(){if(this._childs)for(var L$a=this._childs.length-1;-1<L$a;L$a--)this._childs[L$a].destroy(!0)},L$b.addChild=function(L$a){if(!L$a||this.destroyed||L$a===this)return L$a;if(L$a.zOrder&&this._set$P("hasZorder",!0),L$a._parent===this){var L$b=this.getChildIndex(L$a);L$b!==this._childs.length-1&&(this._childs.splice(L$b,1),this._childs.push(L$a),this.conchModel&&(this.conchModel.removeChild(L$a.conchModel),this.conchModel.addChildAt(L$a.conchModel,this._childs.length-1)),this._childChanged())}else L$a.parent&&L$a.parent.removeChild(L$a),this._childs===L$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(L$a),this.conchModel&&this.conchModel.addChildAt(L$a.conchModel,this._childs.length-1),(L$a.parent=this)._childChanged();return L$a},L$b.addChildren=function(L$a){for(var L$b=arguments,L$c=0,L$d=L$b.length;L$c<L$d;)this.addChild(L$b[L$c++])},L$b.addChildAt=function(L$a,L$b){if(!L$a||this.destroyed||L$a===this)return L$a;if(L$a.zOrder&&this._set$P("hasZorder",!0),0<=L$b&&L$b<=this._childs.length){if(L$a._parent===this){var L$c=this.getChildIndex(L$a);this._childs.splice(L$c,1),this._childs.splice(L$b,0,L$a),this.conchModel&&(this.conchModel.removeChild(L$a.conchModel),this.conchModel.addChildAt(L$a.conchModel,L$b)),this._childChanged()}else L$a.parent&&L$a.parent.removeChild(L$a),this._childs===L$g.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(L$b,0,L$a),this.conchModel&&this.conchModel.addChildAt(L$a.conchModel,L$b),L$a.parent=this;return L$a}throw new Error("appendChildAt:The index is out of bounds")},L$b.getChildIndex=function(L$a){return this._childs.indexOf(L$a)},L$b.getChildByName=function(L$a){var L$b=this._childs;if(L$b)for(var L$c=0,L$d=L$b.length;L$c<L$d;L$c++){var L$e=L$b[L$c];if(L$e.name===L$a)return L$e}return null},L$b._get$P=function(L$a){return this._$P[L$a]},L$b._set$P=function(L$a,L$b){return this.destroyed||(this._$P===L$g.PROP_EMPTY&&(this._$P={}),this._$P[L$a]=L$b),L$b},L$b.getChildAt=function(L$a){return this._childs[L$a]},L$b.setChildIndex=function(L$a,L$b){var L$c=this._childs;if(L$b<0||L$b>=L$c.length)throw new Error("setChildIndex:The index is out of bounds.");var L$d=this.getChildIndex(L$a);if(L$d<0)throw new Error("setChildIndex:node is must child of this object.");return L$c.splice(L$d,1),L$c.splice(L$b,0,L$a),this.conchModel&&(this.conchModel.removeChild(L$a.conchModel),this.conchModel.addChildAt(L$a.conchModel,L$b)),this._childChanged(),L$a},L$b._childChanged=function(L$a){},L$b.removeChild=function(L$a){if(!this._childs)return L$a;var L$b=this._childs.indexOf(L$a);return this.removeChildAt(L$b)},L$b.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},L$b.removeChildByName=function(L$a){var L$b=this.getChildByName(L$a);return L$b&&this.removeChild(L$b),L$b},L$b.removeChildAt=function(L$a){var L$b=this.getChildAt(L$a);if(L$b){for(var L$c=this._childs.length-1,L$d=L$a;L$d<L$c;++L$d)this._childs[L$d]=this._childs[L$d+1];this._childs.length=L$c,this.conchModel&&this.conchModel.removeChild(L$b.conchModel),L$b.parent=null}return L$b},L$b.removeChildren=function(L$a,L$b){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=2147483647),this._childs&&0<this._childs.length){var L$c=this._childs;if(0===L$a&&L$f<=L$b){var L$d=L$c;this._childs=L$g.ARRAY_EMPTY}else L$d=L$c.splice(L$a,L$b-L$a);for(var L$e=0,L$f=L$d.length;L$e<L$f;L$e++)L$d[L$e].parent=null,this.conchModel&&this.conchModel.removeChild(L$d[L$e].conchModel)}return this},L$b.replaceChild=function(L$a,L$b){var L$c=this._childs.indexOf(L$b);return-1<L$c?(this._childs.splice(L$c,1,L$a),this.conchModel&&(this.conchModel.removeChild(L$b.conchModel),this.conchModel.addChildAt(L$a.conchModel,L$c)),L$b.parent=null,L$a.parent=this,L$a):null},L$b._updateDisplayedInstage=function(){var L$a;L$a=this;var L$b=L$z.stage;for(this._displayedInStage=!1;L$a;){if(L$a._getBit(1)){this._displayedInStage=L$a._displayedInStage;break}if(L$a==L$b||L$a._displayedInStage){this._displayedInStage=!0;break}L$a=L$a.parent}},L$b._setDisplay=function(L$a){this._displayedInStage!==L$a&&((this._displayedInStage=L$a)?this.event("display"):this.event("undisplay"))},L$b._displayChild=function(L$a,L$b){var L$c=L$a._childs;if(L$c)for(var L$d=0;L$d<L$c.length;L$d++){var L$e=L$c[L$d];L$e&&L$e._getBit(1)&&(0<L$e._childs.length?this._displayChild(L$e,L$b):L$e._setDisplay(L$b))}L$a._setDisplay(L$b)},L$b.contains=function(L$a){if(L$a===this)return!0;for(;L$a;){if(L$a.parent===this)return!0;L$a=L$a.parent}return!1},L$b.timerLoop=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$e&&(L$e=!0),void 0===L$f&&(L$f=!1),this.timer.loop(L$a,L$b,L$c,L$d,L$e,L$f)},L$b.timerOnce=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=!0),this.timer._create(!1,!1,L$a,L$b,L$c,L$d,L$e)},L$b.frameLoop=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=!0),this.timer._create(!0,!0,L$a,L$b,L$c,L$d,L$e)},L$b.frameOnce=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=!0),this.timer._create(!0,!1,L$a,L$b,L$c,L$d,L$e)},L$b.clearTimer=function(L$a,L$b){this.timer.clear(L$a,L$b)},L$o(0,L$b,"numChildren",function(){return this._childs.length}),L$o(0,L$b,"destroyed",function(){return this._destroyed}),L$o(0,L$b,"parent",function(){return this._parent},function(L$a){this._parent!==L$a&&(L$a?(this._parent=L$a,this.event("added"),this._getBit(1)&&(this._setUpNoticeChain(),L$a.displayedInStage&&this._displayChild(this,!0)),L$a._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._getBit(1)&&this._displayChild(this,!1),this._parent=L$a))}),L$o(0,L$b,"displayedInStage",function(){return this._getBit(1)||this._setUpNoticeType(1),this._displayedInStage}),L$g.ARRAY_EMPTY=[],L$g.PROP_EMPTY={},L$g.NOTICE_DISPLAY=1,L$g.MOUSEENABLE=2,L$g}(),L$ba=function(L$a){function L$m(L$a){this._bgground=null,this._border=null,this._rect=null,this.underLine=0,this.lineHeight=0,L$m.__super.call(this),this._padding=L$m._PADDING,this._spacing=L$m._SPACING,this._aligns=L$m._ALIGNS,this._font=L$n.EMPTY,this._ower=L$a}L$k(L$m,"laya.display.css.CSSStyle",L$a);var L$b=L$m.prototype;return L$b.destroy=function(){this._ower=null,this._font=null,this._rect=null},L$b.inherit=function(L$a){this._font=L$a._font,this._spacing=L$a._spacing===L$m._SPACING?L$m._SPACING:L$a._spacing.slice(),this.lineHeight=L$a.lineHeight},L$b._widthAuto=function(){return 0!=(262144&this._type)},L$b.widthed=function(L$a){return 0!=(8&this._type)},L$b._calculation=function(L$a,L$b){if(L$b.indexOf("%")<0)return!1;var L$d=this._ower,L$e=L$d.parent,L$f=this._rect;function L$g(L$a,L$b,L$c){return L$a*L$c[0]+L$b*L$c[1]+L$c[2]}function L$c(L$a){var L$b=L$e.width,L$c=L$d.width;L$f.width&&(L$d.width=L$g(L$b,L$c,L$f.width)),L$f.height&&(L$d.height=L$g(L$b,L$c,L$f.height)),L$f.left&&(L$d.x=L$g(L$b,L$c,L$f.left)),L$f.top&&(L$d.y=L$g(L$b,L$c,L$f.top))}null===L$f&&(L$e._getCSSStyle()._type|=524288,L$e.on("resize",this,L$c),this._rect=L$f={input:{}});var L$h=L$b.split(" ");return L$h[0]=parseFloat(L$h[0])/100,1==L$h.length?L$h[1]=L$h[2]=0:(L$h[1]=parseFloat(L$h[1])/100,L$h[2]=parseFloat(L$h[2])),L$f[L$a]=L$h,L$f.input[L$a]=L$b,L$c(),!0},L$b.heighted=function(L$a){return 0!=(8192&this._type)},L$b.size=function(L$a,L$b){var L$c=this._ower,L$d=!1;-1!==L$a&&L$a!=this._ower.width&&(this._type|=8,this._ower.width=L$a,L$d=!0),-1!==L$b&&L$b!=this._ower.height&&(this._type|=8192,this._ower.height=L$b,L$d=!0),L$d&&(L$c._layoutLater(),524288&this._type&&L$c.event("resize",this))},L$b._getAlign=function(){return this._aligns[0]},L$b._getValign=function(){return this._aligns[1]},L$b._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},L$b._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new L$n(this._font))},L$b.render=function(L$a,L$b,L$c,L$d){var L$e=L$a.width,L$f=L$a.height;L$c-=L$a.pivotX,L$d-=L$a.pivotY,this._bgground&&null!=this._bgground.color&&L$b.ctx.fillRect(L$c,L$d,L$e,L$f,this._bgground.color),this._border&&this._border.color&&L$b.drawRect(L$c,L$d,L$e,L$f,this._border.color.strColor,this._border.size)},L$b.getCSSStyle=function(){return this},L$b.cssText=function(L$a){this.attrs(L$m.parseOneCSS(L$a,";"))},L$b.attrs=function(L$a){if(L$a)for(var L$b=0,L$c=L$a.length;L$b<L$c;L$b++){var L$d=L$a[L$b];this[L$d[0]]=L$d[1]}},L$b.setTransform=function(L$a){"none"===L$a?this._tf=L$h._TF_EMPTY:this.attrs(L$m.parseOneCSS(L$a,","))},L$b.translate=function(L$a,L$b){this._tf===L$h._TF_EMPTY&&(this._tf=new L$e),this._tf.translateX=L$a,this._tf.translateY=L$b},L$b.scale=function(L$a,L$b){this._tf===L$h._TF_EMPTY&&(this._tf=new L$e),this._tf.scaleX=L$a,this._tf.scaleY=L$b},L$b._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},L$o(0,L$b,"block",L$a.prototype._$get_block,function(L$a){L$a?this._type|=1:this._type&=-2}),L$o(0,L$b,"valign",function(){return L$m._valigndef[this._aligns[1]]},function(L$a){this._aligns===L$m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=L$m._valigndef[L$a]}),L$o(0,L$b,"height",null,function(L$a){if(this._type|=8192,"string"==typeof L$a){if(this._calculation("height",L$a))return;L$a=parseInt(L$a)}this.size(-1,L$a)}),L$o(0,L$b,"width",null,function(L$a){if(this._type|=8,"string"==typeof L$a){var L$b=L$a.indexOf("auto");if(0<=L$b&&(this._type|=262144,L$a=L$a.substr(0,L$b)),this._calculation("width",L$a))return;L$a=parseInt(L$a)}this.size(L$a,-1)}),L$o(0,L$b,"fontWeight",function(){return this._font.weight},function(L$a){this._createFont().weight=L$a}),L$o(0,L$b,"left",null,function(L$a){var L$b=this._ower;if("string"==typeof L$a){if("center"===L$a?L$a="50% -50% 0":"right"===L$a&&(L$a="100% -100% 0"),this._calculation("left",L$a))return;L$a=parseInt(L$a)}L$b.x=L$a}),L$o(0,L$b,"_translate",null,function(L$a){this.translate(L$a[0],L$a[1])}),L$o(0,L$b,"absolute",function(){return 0!=(4&this._type)}),L$o(0,L$b,"top",null,function(L$a){var L$b=this._ower;if("string"==typeof L$a){if("middle"===L$a?L$a="50% -50% 0":"bottom"===L$a&&(L$a="100% -100% 0"),this._calculation("top",L$a))return;L$a=parseInt(L$a)}L$b.y=L$a}),L$o(0,L$b,"align",function(){return L$m._aligndef[this._aligns[0]]},function(L$a){this._aligns===L$m._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=L$m._aligndef[L$a]}),L$o(0,L$b,"bold",function(){return this._font.bold},function(L$a){this._createFont().bold=L$a}),L$o(0,L$b,"padding",function(){return this._padding},function(L$a){this._padding=L$a}),L$o(0,L$b,"leading",function(){return this._spacing[1]},function(L$a){"string"==typeof L$a&&(L$a=parseInt(L$a+"")),this._spacing===L$m._SPACING&&(this._spacing=[0,0]),this._spacing[1]=L$a}),L$o(0,L$b,"lineElement",function(){return 0!=(65536&this._type)},function(L$a){L$a?this._type|=65536:this._type&=-65537}),L$o(0,L$b,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(L$a){this.lineElement=!1,"right"===L$a?this._type|=32768:this._type&=-32769}),L$o(0,L$b,"textDecoration",function(){return this._font.decoration},function(L$a){this._createFont().decoration=L$a}),L$o(0,L$b,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(L$a){"nowrap"===L$a&&(this._type|=131072),"none"===L$a&&(this._type&=-131073)}),L$o(0,L$b,"background",null,function(L$a){L$a?(this._bgground||(this._bgground={}),this._bgground.color=L$a,this._ower.conchModel&&this._ower.conchModel.bgColor(L$a),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),L$o(0,L$b,"wordWrap",function(){return 0==(131072&this._type)},function(L$a){L$a?this._type&=-131073:this._type|=131072}),L$o(0,L$b,"color",function(){return this._font.color},function(L$a){this._createFont().color=L$a}),L$o(0,L$b,"password",function(){return this._font.password},function(L$a){this._createFont().password=L$a}),L$o(0,L$b,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(L$a){"none"===L$a?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=L$a),this._ower.conchModel&&this._ower.conchModel.bgColor(L$a),this._ower._renderType|=256}),L$o(0,L$b,"font",function(){return this._font.toString()},function(L$a){this._createFont().set(L$a)}),L$o(0,L$b,"weight",null,function(L$a){this._createFont().weight=L$a}),L$o(0,L$b,"letterSpacing",function(){return this._spacing[0]},function(L$a){"string"==typeof L$a&&(L$a=parseInt(L$a+"")),this._spacing===L$m._SPACING&&(this._spacing=[0,0]),this._spacing[0]=L$a}),L$o(0,L$b,"fontSize",function(){return this._font.size},function(L$a){this._createFont().size=L$a}),L$o(0,L$b,"italic",function(){return this._font.italic},function(L$a){this._createFont().italic=L$a}),L$o(0,L$b,"fontFamily",function(){return this._font.family},function(L$a){this._createFont().family=L$a}),L$o(0,L$b,"stroke",function(){return this._font.stroke[0]},function(L$a){this._createFont().stroke===L$n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=L$a}),L$o(0,L$b,"strokeColor",function(){return this._font.stroke[1]},function(L$a){this._createFont().stroke===L$n._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=L$a}),L$o(0,L$b,"border",function(){return this._border?this._border.value:""},function(L$a){if("none"!=L$a){this._border||(this._border={});var L$b=(this._border.value=L$a).split(" ");if(this._border.color=L$S.create(L$b[L$b.length-1]),1==L$b.length)return this._border.size=1,void(this._border.type="solid");var L$c=0;0<L$b[0].indexOf("px")?(this._border.size=parseInt(L$b[0]),L$c++):this._border.size=1,this._border.type=L$b[L$c],this._ower._renderType|=256}else this._border=null}),L$o(0,L$b,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(L$a){L$a?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==L$a?null:L$S.create(L$a),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),L$o(0,L$b,"position",function(){return 4&this._type?"absolute":""},function(L$a){"absolute"==L$a?this._type|=4:this._type&=-5}),L$o(0,L$b,"display",null,function(L$a){switch(L$a){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),L$o(0,L$b,"paddingLeft",function(){return this.padding[3]}),L$o(0,L$b,"paddingTop",function(){return this.padding[0]}),L$o(0,L$b,"_scale",null,function(L$a){this._ower.scale(L$a[0],L$a[1])}),L$o(0,L$b,"_rotate",null,function(L$a){this._ower.rotation=L$a}),L$m.parseOneCSS=function(L$a,L$b){for(var L$c,L$d=[],L$e=L$a.split(L$b),L$f=0,L$g=L$e.length;L$f<L$g;L$f++){var L$h=L$e[L$f],L$i=L$h.indexOf(":"),L$j=L$h.substr(0,L$i).replace(/^\s+|\s+$/g,"");if(0!=L$j.length){var L$k=L$h.substr(L$i+1).replace(/^\s+|\s+$/g,""),L$l=[L$j,L$k];switch(L$j){case"italic":case"bold":L$l[1]="true"==L$k;break;case"line-height":L$l[0]="lineHeight",L$l[1]=parseInt(L$k);break;case"font-size":L$l[0]="fontSize",L$l[1]=parseInt(L$k);break;case"padding":1<(L$c=L$k.split(" ")).length||(L$c[1]=L$c[2]=L$c[3]=L$c[0]),L$l[1]=[parseInt(L$c[0]),parseInt(L$c[1]),parseInt(L$c[2]),parseInt(L$c[3])];break;case"rotate":L$l[0]="_rotate",L$l[1]=parseFloat(L$k);break;case"scale":L$c=L$k.split(" "),L$l[0]="_scale",L$l[1]=[parseFloat(L$c[0]),parseFloat(L$c[1])];break;case"translate":L$c=L$k.split(" "),L$l[0]="_translate",L$l[1]=[parseInt(L$c[0]),parseInt(L$c[1])];break;default:(L$l[0]=L$m._CSSTOVALUE[L$j])||(L$l[0]=L$j)}L$d.push(L$l)}}return L$d},L$m.parseCSS=function(L$a,L$b){for(var L$c;null!=(L$c=L$m._parseCSSRegExp.exec(L$a));)L$m.styleSheets[L$c[1]]=L$m.parseOneCSS(L$c[2],";")},L$m.EMPTY=new L$m(null),L$m._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},L$m._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),L$m._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},L$m._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},L$m.styleSheets={},L$m.ALIGN_CENTER=1,L$m.ALIGN_RIGHT=2,L$m.VALIGN_MIDDLE=1,L$m.VALIGN_BOTTOM=2,L$m._CSS_BLOCK=1,L$m._DISPLAY_NONE=2,L$m._ABSOLUTE=4,L$m._WIDTH_SET=8,L$m._PADDING=[0,0,0,0],L$m._RECT=[-1,-1,-1,-1],L$m._SPACING=[0,0],L$m._ALIGNS=[0,0,0],L$m.ADDLAYOUTED=512,L$m._NEWFONT=4096,L$m._HEIGHT_SET=8192,L$m._BACKGROUND_SET=16384,L$m._FLOAT_RIGHT=32768,L$m._LINE_ELEMENT=65536,L$m._NOWARP=131072,L$m._WIDTHAUTO=262144,L$m._LISTERRESZIE=524288,L$m}(L$h),L$ca=function(L$a){function L$g(){this.url=null,this.audio=null,this.loaded=!1,L$g.__super.call(this)}L$k(L$g,"laya.media.h5audio.AudioSound",L$j);var L$b=L$g.prototype;return L$b.dispose=function(){var L$a=L$g._audioCache[this.url];L$a&&(L$a.src="",delete L$g._audioCache[this.url])},L$b.load=function(L$a){var L$b;if(L$a=L$I.formatURL(L$a),(this.url=L$a)==L$E._tMusic?(L$g._initMusicAudio(),(L$b=L$g._musicAudio).src!=L$a&&(L$g._audioCache[L$b.src]=null,L$b=null)):L$b=L$g._audioCache[L$a],L$b&&2<=L$b.readyState)this.event("complete");else{L$b||(L$b=L$a==L$E._tMusic?(L$g._initMusicAudio(),L$g._musicAudio):L$O.createElement("audio"),(L$g._audioCache[L$a]=L$b).src=L$a),L$b.addEventListener("canplaythrough",L$d),L$b.addEventListener("error",L$e);var L$c=this;(this.audio=L$b).load?L$b.load():L$e()}function L$d(){L$f(),L$c.loaded=!0,L$c.event("complete")}function L$e(){L$b.load=null,L$f(),L$c.event("error")}function L$f(){L$b.removeEventListener("canplaythrough",L$d),L$b.removeEventListener("error",L$e)}},L$b.play=function(L$a,L$b,L$c){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),!this.url)return null;var L$d,L$e;if(!(L$d=this.url==L$E._tMusic?L$g._musicAudio:L$g._audioCache[this.url]))return null;L$e=L$W.getItem("audio:"+this.url),L$J.isConchApp?L$e||((L$e=L$O.createElement("audio")).src=this.url):this.url==L$E._tMusic?(L$g._initMusicAudio(),(L$e=L$g._musicAudio).src=this.url):L$e=L$e||L$d.cloneNode(!0);var L$f=new L$ma(L$e);return L$f.url=this.url,L$f.loops=L$b,L$f.startTime=L$a,L$f.startHandler=L$c,L$f.play(!1),L$E.addChannel(L$f),L$f},L$o(0,L$b,"duration",function(){var L$a;return(L$a=L$g._audioCache[this.url])?L$a.duration:0}),L$g._initMusicAudio=function(){L$g._musicAudio||(L$g._musicAudio||(L$g._musicAudio=L$O.createElement("audio")),L$J.isConchApp||L$O.document.addEventListener("mousedown",L$g._makeMusicOK))},L$g._makeMusicOK=function(){L$O.document.removeEventListener("mousedown",L$g._makeMusicOK),L$g._musicAudio.src?L$g._musicAudio.play():(L$g._musicAudio.src="",L$g._musicAudio.load())},L$g._audioCache={},L$g._musicAudio=null,L$g}(),L$da=function(L$a){function L$b(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.startHandler=null,this.completeHandler=null,L$b.__super.call(this)}L$k(L$b,"laya.media.SoundChannel",L$j);var L$c=L$b.prototype;return L$c.play=function(){},L$c.stop=function(){},L$c.pause=function(){},L$c.resume=function(){},L$c.__runComplete=function(L$a){L$a&&L$a.run()},L$o(0,L$c,"volume",function(){return 1},function(L$a){}),L$o(0,L$c,"position",function(){return 0}),L$o(0,L$c,"duration",function(){return 0}),L$b}(),L$ea=function(L$a){function L$b(){L$b.__super.call(this)}L$k(L$b,"laya.media.Sound",L$j);var L$c=L$b.prototype;return L$c.load=function(L$a){},L$c.play=function(L$a,L$b,L$c){return void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),null},L$c.dispose=function(){},L$o(0,L$c,"duration",function(){return 0}),L$b}(),L$fa=function(L$a){function L$e(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,this._disposed=!1,L$e.__super.call(this)}L$k(L$e,"laya.media.webaudio.WebAudioSound",L$j);var L$b=L$e.prototype;return L$b.load=function(L$a){this.url=L$a,this.audioBuffer=L$e._dataCache[L$a],this.audioBuffer?this._loaded(this.audioBuffer):(L$e.e.on("loaded:"+L$a,this,this._loaded),L$e.e.on("err:"+L$a,this,this._err),L$e.__loadingSound[L$a]||(L$e.__loadingSound[L$a]=!0,L$z.loader.load(L$a,L$s.create(this,this.onloaded),null,L$ha.BUFFER,4,!1,null,!0)))},L$b.onloaded=function(L$a){L$a||this._err(),this._disposed?this._removeLoadEvents():(this.data=L$a,L$e.buffs.push({buffer:this.data,url:this.url}),L$e.decode())},L$b._err=function(){if(this._removeLoadEvents(),L$e.__loadingSound[this.url]=!1,this.event("error"),this.__toPlays){var L$a,L$b,L$c,L$d=0;for(L$a=(L$b=this.__toPlays).length,L$d=0;L$d<L$a;L$d++)(L$c=L$b[L$d])[3]&&!L$c[3].isStopped&&L$c[3].event("error");this.__toPlays.length=0}},L$b._loaded=function(L$a){this._removeLoadEvents(),this._disposed||(this.audioBuffer=L$a,this.loaded=!0,this.event("complete"))},L$b._removeLoadEvents=function(){L$e.e.off("loaded:"+this.url,this,this._loaded),L$e.e.off("err:"+this.url,this,this._err)},L$b.__playAfterLoaded=function(){if(this.__toPlays){var L$a,L$b,L$c,L$d=0;for(L$a=(L$b=this.__toPlays).length,L$d=0;L$d<L$a;L$d++)(L$c=L$b[L$d])[3]&&!L$c[3].isStopped&&this.play(L$c[0],L$c[1],L$c[2],L$c[3]);this.__toPlays.length=0}},L$b.play=function(L$a,L$b,L$c,L$d){return void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),L$d=L$d||new L$na,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([L$a,L$b,L$c,L$d]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),L$d.url=this.url,L$d.loops=L$b,L$d.audioBuffer=this.audioBuffer,L$d.startTime=L$a,L$d.startHandler=L$c,L$d.play(!1),L$E.addChannel(L$d),L$d},L$b.dispose=function(){this._disposed=!0,delete L$e._dataCache[this.url],delete L$e.__loadingSound[this.url],this.audioBuffer=null,this.data=null,this.__toPlays=[]},L$o(0,L$b,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),L$e.decode=function(){if(!(L$e.buffs.length<=0||L$e.isDecoding))if(L$e.isDecoding=!0,(L$e.tInfo=L$e.buffs.shift())&&L$e.tInfo.buffer&&L$e.tInfo.buffer.byteLength)try{L$e.ctx.decodeAudioData(L$e.tInfo.buffer,L$e._done,L$e._fail)}catch(L$a){console.error("decodeAudioData error  byteLength:"+L$e.tInfo.buffer.byteLength+"  url:"+L$e.tInfo.url)}else L$e._fail()},L$e._done=function(L$a){L$e.e.event("loaded:"+L$e.tInfo.url,L$a),L$e._dataCache[L$e.tInfo.url]=L$a,L$e.isDecoding=!1,L$e.decode()},L$e._fail=function(){L$e.e.event("err:"+L$e.tInfo.url,null),L$e.isDecoding=!1,L$e.decode()},L$e._playEmptySound=function(){if(null!=L$e.ctx){if(L$e._emptySource&&(L$e._emptySource.stop(),L$e._emptySource.disconnect(0),!L$na._tryCleanFailed))try{L$e._emptySource.buffer=null}catch(L$a){L$na._tryCleanFailed=!0}var L$a=L$e.ctx.createBufferSource();L$a.buffer=L$e._miniBuffer,L$a.connect(L$e.ctx.destination),L$a.start(0,0,0),L$e._emptySource=L$a}},L$e._unlock=function(){L$e._unlocked||(L$e._playEmptySound(),"running"==L$e.ctx.state?(L$O.document.removeEventListener("mousedown",L$e._unlock,!0),L$O.document.removeEventListener("touchend",L$e._unlock,!0),L$O.document.removeEventListener("touchstart",L$e._unlock,!0),L$e._unlocked=!0):"suspended"==L$e.ctx.state&&L$E._recoverWebAudio())},L$e.initWebAudio=function(){"running"!=L$e.ctx.state&&(L$e._unlock(),L$O.document.addEventListener("mousedown",L$e._unlock,!0),L$O.document.addEventListener("touchend",L$e._unlock,!0),L$O.document.addEventListener("touchstart",L$e._unlock,!0))},L$e._emptySource=null,L$e._dataCache={},L$e.buffs=[],L$e.isDecoding=!1,L$e._unlocked=!1,L$e.tInfo=null,L$e.__loadingSound={},L$i(L$e,["window",function(){return this.window=L$O.window},"webAudioEnabled",function(){return this.webAudioEnabled=L$e.window.AudioContext||L$e.window.webkitAudioContext||L$e.window.mozAudioContext},"ctx",function(){return this.ctx=L$e.webAudioEnabled?new(L$e.window.AudioContext||L$e.window.webkitAudioContext||L$e.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=L$e.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new L$j}]),L$e}(),L$ga=function(L$a){function L$b(){this._responseType=null,this._data=null,L$b.__super.call(this),this._http=new L$O.window.XMLHttpRequest}L$k(L$b,"laya.net.HttpRequest",L$j);var L$c=L$b.prototype;return L$c.send=function(L$a,L$b,L$c,L$d,L$e){void 0===L$c&&(L$c="get"),void 0===L$d&&(L$d="text"),this._responseType=L$d,this._data=null;var L$f=this,L$g=this._http;if(L$g.open(L$c,L$a,!0),L$e)for(var L$h=0;L$h<L$e.length;L$h++)L$g.setRequestHeader(L$e[L$h++],L$e[L$h]);else L$J.isConchApp||(L$b&&"string"!=typeof L$b?L$g.setRequestHeader("Content-Type","application/json"):L$g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));L$g.responseType="arraybuffer"!==L$d?"text":"arraybuffer",L$g.onerror=function(L$a){L$f._onError(L$a)},L$g.onabort=function(L$a){L$f._onAbort(L$a)},L$g.onprogress=function(L$a){L$f._onProgress(L$a)},L$g.onload=function(L$a){L$f._onLoad(L$a)},L$g.send(L$b)},L$c._onProgress=function(L$a){L$a&&L$a.lengthComputable&&this.event("progress",L$a.loaded/L$a.total)},L$c._onAbort=function(L$a){this.error("Request was aborted by user")},L$c._onError=function(L$a){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},L$c._onLoad=function(L$a){var L$b=this._http,L$c=void 0!==L$b.status?L$b.status:200;200===L$c||204===L$c||0===L$c?this.complete():this.error("["+L$b.status+"]"+L$b.statusText+":"+L$b.responseURL)},L$c.error=function(L$a){this.clear(),this.event("error",L$a)},L$c.complete=function(){this.clear();var L$b=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=L$$.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(L$a){L$b=!1,this.error(L$a.message)}L$b&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},L$c.clear=function(){var L$a=this._http;L$a.onerror=L$a.onabort=L$a.onprogress=L$a.onload=null},L$o(0,L$c,"url",function(){return this._http.responseURL}),L$o(0,L$c,"http",function(){return this._http}),L$o(0,L$c,"data",function(){return this._data}),L$b}(),L$ha=function(L$a){function L$C(){this._data=null,this._class=null,this._url=null,this._type=null,this._cache=!1,this._http=null,this._customParse=!1,L$C.__super.call(this),this._onImageCallback=this._loadImageComplete.bind(this),this._onLoadedCallback=this._loadedComplete.bind(this),this.priority=-1,this.realTime=!1}L$k(L$C,"laya.net.Loader",L$j);var L$b=L$C.prototype;return L$b.load=function(L$a,L$b,L$c,L$d,L$e){if(L$a&&""!=L$a||console.error("Loader 加载的url不合法 "+L$a),void 0===L$c&&(L$c=!0),void 0===L$e&&(L$e=!1),0===(this._url=L$a).indexOf("data:image")?this._type=L$b="image":this._type=L$b||(L$b=this.getTypeFromUrl(L$a)),this._cache=L$c,this._data=null,!L$e&&L$C.loadedMap[L$a])return this._data=L$C.loadedMap[L$a],this.event("progress",1),void this.event("complete",this._data);if(L$d&&L$C.setGroup(L$a,L$d),null!=L$C.parserMap[L$b])return this._customParse=!0,void(L$C.parserMap[L$b]instanceof laya.utils.Handler?L$C.parserMap[L$b].runWith(this):L$C.parserMap[L$b].call(null,this));if("image"===L$b||"htmlimage"===L$b||"nativeimage"===L$b)return this._loadImage(L$a);if("ttf"===L$b)return this._loadTTF(L$a);switch(L$b){case"atlas":case"plf":"json";break;case"font":"xml";break;case"pkm":"arraybuffer";break;default:L$b}L$C.preLoadedMap[L$a]?this.onLoaded(L$C.preLoadedMap[L$a]):L$g.resMgrLoad(L$a,this._onLoadedCallback,0<=this.priority?this.priority:2,this.realTime)},L$b.getTypeFromUrl=function(L$a){var L$b=L$$.getFileExtension(L$a);return L$b?L$C.typeMap[L$b]:(console.warn("Not recognize the resources suffix",L$a),"text")},L$b._loadTTF=function(L$a){L$a=L$I.formatURL(L$a);var L$b=new L$H;L$b.complete=L$s.create(this,this.onLoaded),L$b.load(L$a)},L$b._loadImage=function(L$a){L$g.imgMgrLoad(L$a,this._onImageCallback,0<=this.priority?this.priority:2,this.realTime)},L$b._loadImageComplete=function(L$a,L$b,L$c){if(null!=L$c)if(L$c instanceof ArrayBuffer){var L$d=new DataView(L$c),L$e=new laya.webgl.resource.WebGLImage(new Uint8Array(L$c,8),L$a,0,!1,L$d.getUint32(0),L$d.getUint32(4));this.onLoaded(L$e)}else if(L$c instanceof L$ka)L$C.imgMgrSet[L$a]=L$b,L$g.imgMgrLock(L$a,L$C.imgMgrSet[L$a]),this._url=L$a,this.complete(L$c);else{var L$f=-1!=L$a.indexOf(".png",L$a.length-4)?6408:6407;L$e=new laya.webgl.resource.WebGLImage(L$c,L$a,L$f,!1,L$c.width,L$c.height);this.onLoaded(L$e)}else this.event("error","Load image failed")},L$b.imageCancel=function(L$a,L$b,L$c){L$g.imgMgrCancel(L$a,this._onImageCallback)},L$b._loadSound=function(L$a){var L$b=new L$E._soundClass,L$c=this;function L$d(){L$b.offAll()}L$b.on("complete",this,function(){L$d(),L$c.onLoaded(L$b)}),L$b.on("error",this,function(){L$d(),L$b.dispose(),L$c.event("error","Load sound failed")}),L$b.load(L$a)},L$b.onProgress=function(L$a){"atlas"===this._type?this.event("progress",.3*L$a):this.event("progress",L$a)},L$b.onError=function(L$a){this.event("error",L$a)},L$b._loadedComplete=function(L$a,L$b,L$c){if(null!=L$c)switch(this._type){case"atlas":case"plf":case"json":var L$d=new L$P(L$c);this.onLoaded(JSON.parse(L$d.readUTFBytes()));break;case"font":L$d=new L$P(L$c);this.onLoaded(L$$.parseXMLFromString(L$d.readUTFBytes()));break;default:this.onLoaded(L$c)}else this.event("error",L$a)},L$b.onLoaded=function(L$a){var L$b=this._type;if("plf"==L$b)this.parsePLFData(L$a),this.complete(L$a);else if("image"===L$b){var L$c=new L$ka(L$a);L$c.url=this._url,this.complete(L$c)}else if("sound"===L$b||"htmlimage"===L$b||"nativeimage"===L$b)this.complete(L$a);else if("atlas"===L$b){if(!L$a.src&&!L$a._setContext){if(!this._data){if((this._data=L$a).meta&&L$a.meta.image)for(var L$d=L$a.meta.image.split(","),L$e=0<=this._url.indexOf("/")?"/":"\\",L$f=this._url.lastIndexOf(L$e),L$g=0<=L$f?this._url.substr(0,L$f+1):"",L$h=0,L$i=L$d.length;L$h<L$i;L$h++)L$d[L$h]=L$g+L$d[L$h];else L$d=[this._url.replace(".json",".png")];L$d.reverse(),L$a.toLoads=L$d,L$a.pics=[]}return this.event("progress",.3+1/L$d.length*.6),this._loadImage(L$d.pop())}if(!this._data.pics)throw new Error("this._data.pics == null, "+this._url);if(this._data.pics.push(L$a),0<this._data.toLoads.length)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(this._data.toLoads.pop());var L$j=this._data.frames,L$k=this._url.split("?")[0],L$l=this._data.meta&&this._data.meta.prefix?this._data.meta.prefix:L$k.substring(0,L$k.lastIndexOf("."))+"/",L$m=this._data.pics,L$n=L$I.formatURL(this._url),L$o=L$C.atlasMap[L$n]||(L$C.atlasMap[L$n]=[]);L$o.dir=L$l;var L$p=1;if(this._data.meta&&this._data.meta.scale&&1!=this._data.meta.scale)for(var L$q in L$p=parseFloat(this._data.meta.scale),L$j){var L$r,L$s=L$j[L$q],L$t=L$m[L$s.frame.idx?L$s.frame.idx:0],L$u=L$I.formatURL(L$l+L$q);L$t.scaleRate=L$p,L$r=L$ka.create(L$t,L$s.frame.x,L$s.frame.y,L$s.frame.w,L$s.frame.h,L$s.spriteSourceSize.x,L$s.spriteSourceSize.y,L$s.sourceSize.w,L$s.sourceSize.h),L$C.cacheRes(L$u,L$r),L$C.keepCache(this._url,L$l+L$q),L$r.url=L$u,L$o.push(L$u)}else for(L$q in L$j)L$t=L$m[(L$s=L$j[L$q]).frame.idx?L$s.frame.idx:0],L$u=L$I.formatURL(L$l+L$q),L$C.cacheRes(L$u,L$ka.create(L$t,L$s.frame.x,L$s.frame.y,L$s.frame.w,L$s.frame.h,L$s.spriteSourceSize.x,L$s.spriteSourceSize.y,L$s.sourceSize.w,L$s.sourceSize.h)),L$C.loadedMap[L$u].url=L$u,L$C.keepCache(this._url,L$l+L$q),L$o.push(L$u);delete this._data.pics,this.complete(this._data)}else if("font"==L$b){if(!L$a.src)return this._data=L$a,this.event("progress",.5),this._loadImage(this._url.replace(".fnt",".png"));var L$v=new L$D;L$v.parseFont(this._data,L$a);var L$y=this._url.split(".fnt")[0].split("/"),L$z=L$y[L$y.length-1];L$qa.registerBitmapFont(L$z,L$v),this._data=L$v,this.complete(this._data)}else if("pkm"==L$b){var L$A=L$ya.create(L$a,this._url),L$B=new L$ka(L$A);L$B.url=this._url,this.complete(L$B)}else this.complete(L$a)},L$b.parsePLFData=function(L$a){var L$b,L$c,L$d;for(L$b in L$a)switch(L$d=L$a[L$b],L$b){case"json":case"text":for(L$c in L$d)L$C.preLoadedMap[L$I.formatURL(L$c)]=L$d[L$c];break;default:for(L$c in L$d)L$C.preLoadedMap[L$I.formatURL(L$c)]=L$d[L$c]}},L$b.complete=function(L$a){this._data=L$a,this._customParse?this.event("loaded",L$a instanceof Array?[L$a]:L$a):(L$C._loaders.push(this),L$C._isWorking||L$C.checkNext())},L$b.endLoad=function(L$a){L$a&&(this._data=L$a),this._cache&&L$C.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},L$o(0,L$b,"url",function(){return this._url}),L$o(0,L$b,"data",function(){return this._data}),L$o(0,L$b,"cache",function(){return this._cache}),L$o(0,L$b,"type",function(){return this._type}),L$C.checkNext=function(){L$C._isWorking=!0;for(var L$a=L$O.now();L$C._startIndex<L$C._loaders.length;)if(L$O.now(),L$C._loaders[L$C._startIndex].endLoad(),L$C._startIndex++,L$O.now()-L$a>L$C.maxTimeOut)return console.warn("loader callback cost a long time:"+(L$O.now()-L$a)+" url="+L$C._loaders[L$C._startIndex-1].url),void L$z.timer.frameOnce(1,null,L$C.checkNext);L$C._loaders.length=0,L$C._startIndex=0,L$C._isWorking=!1},L$C.clearRes=function(L$a,L$b){if(null!=L$a){void 0===L$b&&(L$b=!1),L$a=L$I.formatURL(L$a);var L$c=L$C.getAtlas(L$a);if(L$c){for(var L$d=0,L$e=L$c.length;L$d<L$e;L$d++){var L$f=L$c[L$d],L$g=L$C.getRes(L$f);delete L$C.loadedMap[L$f],L$C.clearCache(L$a.substring(L$I.basePath.length),L$f.substring(L$I.basePath.length)),L$g&&L$g.destroy(L$b)}L$c.length=0,delete L$C.atlasMap[L$a],delete L$C.loadedMap[L$a]}else{var L$h=L$C.loadedMap[L$a];L$h&&(delete L$C.loadedMap[L$a],L$h instanceof laya.resource.Texture&&L$h.bitmap&&L$h.destroy(L$b))}}},L$C.clearTextureRes=function(L$a){L$a=L$I.formatURL(L$a);var L$b=laya.net.Loader.getAtlas(L$a),L$c=L$b&&0<L$b.length?laya.net.Loader.getRes(L$b[0]):laya.net.Loader.getRes(L$a);L$c&&L$c.bitmap&&(L$J.isConchApp&&!L$J.isConchWebGL?L$c.bitmap.source.releaseTexture&&L$c.bitmap.source.releaseTexture():null==L$c.bitmap._atlaser&&L$c.bitmap.releaseResource(!0))},L$C.getRes=function(L$a){return L$C.loadedMap[L$I.formatURL(L$a)]},L$C.getAtlas=function(L$a){return L$C.atlasMap[L$I.formatURL(L$a)]},L$C.cacheRes=function(L$a,L$b){L$a=L$I.formatURL(L$a),null!=L$C.loadedMap[L$a]?console.warn("Resources already exist,is repeated loading:",L$a):L$C.loadedMap[L$a]=L$b},L$C.setGroup=function(L$a,L$b){L$C.groupMap[L$b]||(L$C.groupMap[L$b]=[]),L$C.groupMap[L$b].push(L$a)},L$C.clearResByGroup=function(L$a){if(L$C.groupMap[L$a]){var L$b=L$C.groupMap[L$a],L$c=0,L$d=L$b.length;for(L$c=0;L$c<L$d;L$c++)L$C.clearRes(L$b[L$c]);L$b.length=0}},L$C.keepCache=function(L$a,L$b){if(L$a&&L$b){var L$c=L$C.cacheSet[L$b];L$c?-1==L$c.indexOf(L$a)&&L$c.push(L$a):L$C.cacheSet[L$b]=[L$a]}},L$C.clearCache=function(L$a,L$b){if(L$a&&L$b){var L$c=L$C.cacheSet[L$b];if(L$c){var L$d=L$c.indexOf(L$a);if(-1!==L$d){var L$e=L$c.length-1;0==L$e?(delete L$C.cacheSet[L$b],0<L$C.imgMgrSet[L$b]?L$g.imgMgrFree(L$b,L$C.imgMgrSet[L$b]):L$C.clearRes(L$b,!0)):(L$c[L$d]=L$c[L$e],L$c.length=L$e)}}}},L$C.saveObject=function(L$a,L$b,L$c){if(L$b&&L$a){var L$d=L$C.objectSet[L$a];L$d?(console.warn("Loader.saveObject: "+L$a),L$d[0]=L$b,L$d[1]=L$c):L$C.objectSet[L$a]=[L$b,L$c,[]]}},L$C.findObject=function(L$a){if(L$a){var L$b=L$C.objectSet[L$a];if(L$b)return L$b[0]}return null},L$C.keepObject=function(L$a,L$b){if(L$a&&L$b){var L$c=L$C.objectSet[L$b];L$c&&-1===L$c[2].indexOf(L$a)&&L$c[2].push(L$a)}},L$C.clearObject=function(L$a,L$b){if(L$a&&L$b){var L$c=L$C.objectSet[L$b];if(L$c){var L$d=L$c[2],L$e=L$d.indexOf(L$a);if(-1!==L$e){var L$f=L$d.length-1;0==L$f?(delete L$C.objectSet[L$b],L$c[1]&&L$c[1].call(null,L$c[0])):(L$d[L$e]=L$d[L$f],L$d.length=L$f)}}}},L$C.TEXT="text",L$C.JSON="json",L$C.XML="xml",L$C.BUFFER="arraybuffer",L$C.IMAGE="image",L$C.SOUND="sound",L$C.ATLAS="atlas",L$C.FONT="font",L$C.TTF="ttf",L$C.PLF="plf",L$C.PKM="pkm",L$C.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font",pkm:"pkm",ttf:"ttf",plf:"plf"},L$C.parserMap={},L$C.groupMap={},L$C.maxTimeOut=100,L$C.loadedMap={},L$C.preLoadedMap={},L$C.atlasMap={},L$C._loaders=[],L$C._isWorking=!1,L$C._startIndex=0,L$C.imgCache={},L$C.cacheSet={},L$C.objectSet={},L$C.imgMgrSet={},L$C}(),L$ia=function(L$a){var L$m;function L$n(){this.retryNum=0,this.retryDelay=10,this.maxLoader=8,this._loaders=[],this._loaderCount=0,this._loaderMap={},this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},L$n.__super.call(this);for(var L$a=0;L$a<this._maxPriority;L$a++)this._resInfos[L$a]=[]}L$k(L$n,"laya.net.LoaderManager",L$j);var L$b=L$n.prototype;return L$b.create=function(L$a,L$c,L$b,L$d,L$e,L$f,L$g,L$h){if(null==L$f&&(L$f=2),null==L$g&&(L$g=!0),L$a instanceof Array){var L$i=L$a,L$j=L$i.length,L$k=0;if(L$b)var L$l=L$s.create(L$b.caller,L$b.method,L$b.args,!1);for(var L$m=0;L$m<L$j;L$m++){var L$n=L$i[L$m];"string"==typeof L$n&&(L$n=L$i[L$m]={url:L$n}),L$n.progress=0}for(L$m=0;L$m<L$j;L$m++){L$n=L$i[L$m];var L$o=L$b?L$s.create(null,L$r,[L$n],!1):null,L$p=L$b||L$c?L$s.create(null,L$q,[L$n]):null;this._create(L$n.url,L$p,L$o,L$n.clas||L$d,L$n.params||L$e,null!=L$n.priority&&0<=L$n.priority?L$n.priority:L$f,L$g,L$n.group||L$h)}function L$q(L$a,L$b){L$k++,L$a.progress=1,L$k===L$j&&L$c&&L$c.run()}function L$r(L$a,L$b){L$a.progress=L$b;for(var L$c=0,L$d=0;L$d<L$j;L$d++){L$c+=L$i[L$d].progress}var L$e=L$c/L$j;L$l.runWith(L$e)}return!0}return this._create(L$a,L$c,L$b,L$d,L$e,L$f,L$g,L$h)},L$b._create=function(L$b,L$c,L$a,L$d,L$e,L$f,L$g,L$h){L$b&&""!=L$b||console.error("加载的url不合法 "+L$b),null==L$f&&(L$f=2),null==L$g&&(L$g=!0);var L$i=L$I.formatURL(L$b),L$j=this.getRes(L$i);if(L$j)!L$j.hasOwnProperty("loaded")||L$j.loaded?(L$a&&L$a.runWith(1),L$c&&L$c.run()):L$c&&L$z.loader._createListener(L$b,L$c.caller,L$c.method,L$c.args,!0,!1);else{var L$k=L$$.getFileExtension(L$b),L$l=L$n.createMap[L$k];if(!L$l)throw new Error("LoaderManager:unknown file("+L$b+") extension with: "+L$k+".");L$d||(L$d=L$l[0]);var L$m=L$l[1];if("atlas"==L$k)this.load(L$b,L$c,L$a,L$m,L$f,L$g);else{L$d===L$ka&&(L$m="htmlimage"),(L$j=L$d?new L$d:null).hasOwnProperty("_loaded")&&(L$j._loaded=!1),L$j._setUrl(L$b),L$h&&L$j._setGroup(L$h),this._createLoad(L$j,L$b,L$s.create(null,function(L$a){L$j&&!L$j.destroyed&&L$a&&L$j.onAsynLoaded.call(L$j,L$b,L$a,L$e),L$c&&L$c.run();L$z.loader.event(L$b)}),L$a,L$m,L$f,!1,L$h,!0),L$g&&this.cacheRes(L$i,L$j)}}return L$j},L$b.load=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){L$a&&""!=L$a||console.error("加载的url不合法 "+L$a);var L$i=this;if(null==L$e&&(L$e=2),null==L$f&&(L$f=!0),void 0===L$h&&(L$h=!1),L$a instanceof Array)return this._loadAssets(L$a,L$b,L$c,L$d,L$e,L$f,L$g);var L$j=L$ha.getRes(L$a);if(null!=L$j)L$z.timer.frameOnce(1,null,function(){L$c&&L$c.runWith(1),L$b&&L$b.runWith(L$j),L$i._loaderCount||L$i.event("complete")});else{var L$k=L$n._resMap[L$a];L$k?(L$b&&L$k._createListener("complete",L$b.caller,L$b.method,L$b.args,!1,!1),L$c&&L$k._createListener("progress",L$c.caller,L$c.method,L$c.args,!1,!1)):((L$k=this._infoPool.length?this._infoPool.pop():new L$m).url=L$a,L$k.clas=null,L$k.type=L$d,L$k.cache=L$f,L$k.group=L$g,L$k.ignoreCache=L$h,L$k.priority=L$e,L$b&&L$k.on("complete",L$b.caller,L$b.method,L$b.args),L$c&&L$k.on("progress",L$c.caller,L$c.method,L$c.args),L$n._resMap[L$a]=L$k,L$e=L$e<this._maxPriority?0<=L$e?L$e:0:this._maxPriority-1,this._resInfos[L$e].push(L$k),this._next())}return this},L$b.cancel=function(L$a,L$b,L$c){if(L$j=L$n._resMap[L$a]){L$b&&L$j.off("complete",L$b.caller,L$b.method,!1),L$c&&L$j.off("progress",L$c.caller,L$c.method,!1);var L$d=L$j.getListener("complete"),L$e=L$j.getListener("progress");if(!(L$d&&L$d.head||L$e&&L$e.head)){if(L$j.loader){var L$f=L$j.loader;L$f.imageCancel(L$a),L$f.offAll(),L$f._data=null,L$f._customParse=!1,L$f._url=null,L$f._class=null,L$f._type=null,this._loaders.push(L$f),this._loaderCount--,delete this._loaderMap[L$j.url]}for(var L$g=0;L$g<this._maxPriority;L$g++)for(var L$h=this._resInfos[L$g],L$i=L$h.length-1;-1<L$i;L$i--){var L$j;(L$j=L$h[L$i])&&L$j.url===L$a&&(L$h[L$i]=null,L$j.destroy(),L$j.offAll(),this._infoPool.push(L$j))}delete L$n._resMap[L$a],this._next()}}},L$b._createLoad=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){var L$j=this;if(null==L$f&&(L$f=2),null==L$g&&(L$g=!0),void 0===L$i&&(L$i=!1),L$b instanceof Array)return this._loadAssets(L$b,L$c,L$d,L$e,L$f,L$g,L$h);var L$k=L$ha.getRes(L$b);if(null!=L$k)L$z.timer.frameOnce(1,null,function(){L$d&&L$d.runWith(1),L$c&&L$c.runWith(L$k),L$j._loaderCount||L$j.event("complete")});else{var L$l=L$n._resMap[L$b];L$l?(L$c&&L$l._createListener("complete",L$c.caller,L$c.method,L$c.args,!1,!1),L$d&&L$l._createListener("progress",L$d.caller,L$d.method,L$d.args,!1,!1)):((L$l=this._infoPool.length?this._infoPool.pop():new L$m).url=L$b,L$l.clas=L$a,L$l.type=L$e,L$l.cache=L$g,L$l.group=L$h,L$l.ignoreCache=L$i,L$l.priority=L$f,L$c&&L$l.on("complete",L$c.caller,L$c.method,L$c.args),L$d&&L$l.on("progress",L$d.caller,L$d.method,L$d.args),L$n._resMap[L$b]=L$l,L$f=L$f<this._maxPriority?0<=L$f?L$f:0:this._maxPriority-1,this._resInfos[L$f].push(L$l),this._next())}return this},L$b._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var L$a=0;L$a<this._maxPriority;L$a++)for(var L$b=this._resInfos[L$a];0<L$b.length;){var L$c=L$b.shift();if(L$c)return this._doLoad(L$c)}this._loaderCount||this.event("complete")}},L$b._doLoad=function(L$b){var L$c=this._loaders.length?this._loaders.pop():new L$ha;this._loaderCount++,(this._loaderMap[L$b.url]=L$c).on("complete",null,L$e),L$c.on("progress",null,function(L$a){L$b.event("progress",L$a)}),L$c.on("error",null,function(L$a){L$e(null)}),L$b.loader=L$c;var L$d=this;function L$e(L$a){L$c.offAll(),L$c._data=null,L$c._customParse=!1,L$c._url=null,L$c._class=null,L$c._type=null,L$d._loaders.push(L$c),L$d._loaderCount--,delete L$d._loaderMap[L$b.url],L$d._endLoad(L$b,L$a instanceof Array?[L$a]:L$a),L$d._next()}L$c._class=L$b.clas,1<=L$b.priority?(L$c.priority=L$b.priority,L$c.realTime=!1):(L$c.priority=0,L$c.realTime=!0),L$c.load(L$b.url,L$b.type,L$b.cache,L$b.group,L$b.ignoreCache)},L$b._endLoad=function(L$a,L$b){var L$c=L$a.url;if(null==L$b){var L$d=this._failRes[L$c]||0;if(L$d<this.retryNum)return console.warn("[warn]Retry to load:",L$c),this._failRes[L$c]=L$d+1,void L$z.timer.once(this.retryDelay,this,this._addReTry,[L$a],!1);console.warn("[error]Failed to load:",L$c),this.event("error",L$c)}this._failRes[L$c]&&(this._failRes[L$c]=0),delete L$n._resMap[L$c],L$a.event("complete",L$b),L$a.destroy(),L$a.offAll(),this._infoPool.push(L$a)},L$b._addReTry=function(L$a){this._resInfos[this._maxPriority-1].push(L$a),this._next()},L$b.clearRes=function(L$a,L$b){void 0===L$b&&(L$b=!1),L$ha.clearRes(L$a,L$b)},L$b.getRes=function(L$a){return L$ha.getRes(L$a)},L$b.cacheRes=function(L$a,L$b){L$ha.cacheRes(L$a,L$b)},L$b.clearTextureRes=function(L$a){L$ha.clearTextureRes(L$a)},L$b.setGroup=function(L$a,L$b){L$ha.setGroup(L$a,L$b)},L$b.clearResByGroup=function(L$a){L$ha.clearResByGroup(L$a)},L$b.clearUnLoaded=function(){for(var L$a=0;L$a<this._maxPriority;L$a++){for(var L$b=this._resInfos[L$a],L$c=L$b.length-1;-1<L$c;L$c--){var L$d=L$b[L$c];L$d&&(L$d.destroy(),L$d.offAll(),this._infoPool.push(L$d))}L$b.length=0}this._loaderCount=0,L$n._resMap={}},L$b.cancelLoadByUrls=function(L$a){if(L$a)for(var L$b=0,L$c=L$a.length;L$b<L$c;L$b++)this.cancelLoadByUrl(L$a[L$b])},L$b.cancelLoadByUrl=function(L$a){for(var L$b=0;L$b<this._maxPriority;L$b++)for(var L$c=this._resInfos[L$b],L$d=L$c.length-1;-1<L$d;L$d--){var L$e=L$c[L$d];L$e&&L$e.url===L$a&&(L$c[L$d]=null,L$e.destroy(),L$e.offAll(),this._infoPool.push(L$e))}L$n._resMap[L$a]&&delete L$n._resMap[L$a]},L$b._loadAssets=function(L$a,L$c,L$g,L$b,L$d,L$e,L$f){null==L$d&&(L$d=2),null==L$e&&(L$e=!0);for(var L$h=L$a.length,L$i=0,L$j=0,L$k=[],L$l=!0,L$m=0;L$m<L$h;L$m++){var L$n=L$a[L$m];if(!L$n)throw new Error("LoaderManager._loadAssets 加载列表错误 arr="+L$a);"string"==typeof L$n&&(L$n={url:L$n,type:L$b,size:1,priority:L$d}),L$n.size||(L$n.size=1),L$n.progress=0,L$j+=L$n.size,L$k.push(L$n);var L$o=L$g?L$s.create(null,L$r,[L$n],!1):null,L$p=L$c||L$g?L$s.create(null,L$q,[L$n]):null;this.load(L$n.url,L$p,L$o,L$n.type,null!=L$n.priority&&0<=L$n.priority?L$n.priority:2,L$e,L$n.group||L$f)}function L$q(L$a,L$b){L$i++,L$a.progress=1,L$b||(L$l=!1),L$i===L$h&&L$c&&L$c.runWith(L$l)}function L$r(L$a,L$b){if(null!=L$g){L$a.progress=L$b;for(var L$c=0,L$d=0;L$d<L$k.length;L$d++){var L$e=L$k[L$d];L$c+=L$e.size*L$e.progress}var L$f=L$c/L$j;L$g.runWith(L$f)}}return this},L$n.cacheRes=function(L$a,L$b){L$ha.cacheRes(L$a,L$b)},L$n._resMap={},L$i(L$n,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),L$n.__init$=function(){L$m=function(L$a){function L$b(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=null,this.priority=-1,L$b.__super.call(this)}return L$k(L$b,"",L$j),L$b.prototype.destroy=function(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,this.clas=null,this.loader=void 0,this.priority=-1},L$b}()},L$n}(),L$ja=(function(L$a){function L$e(L$a){L$e.__super.call(this),L$a||(L$a=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var L$b=0,L$c=0,L$d=0;L$d<20;L$d++)L$d%5!=4?this._mat[L$b++]=L$a[L$d]:this._alpha[L$c++]=L$a[L$d];this._action=L$F.createFilterAction(32),this._action.data=this}L$k(L$e,"laya.filters.ColorFilter",L$r);var L$b=L$e.prototype;L$z.imps(L$b,{"laya.filters.IFilter":!0}),L$b.callNative=function(L$a){L$a._$P.cf=this;L$a.conchModel&&L$a.conchModel.setFilterMatrix&&L$a.conchModel.setFilterMatrix(this._mat,this._alpha)},L$o(0,L$b,"type",function(){return 32}),L$o(0,L$b,"action",function(){return this._action})}(),function(L$a){function L$d(L$a,L$b,L$c){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===L$b&&(L$b=0),L$d.__super.call(this),this._byteClass=L$c||L$P,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,L$a&&0<L$b&&L$b<65535&&this.connect(L$a,L$b)}L$k(L$d,"laya.net.Socket",L$j);var L$b=L$d.prototype;L$b.connect=function(L$a,L$b){var L$c="ws://"+L$a+":"+L$b;L$c="https:"==L$O.window.location.protocol?"wss://"+L$a+":"+L$b:"ws://"+L$a+":"+L$b,this.connectByUrl(L$c)},L$b.connectByUrl=function(L$a){var L$b=this;null!=this._socket&&this.close(),this._socket&&this.cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new L$O.window.WebSocket(L$a,this.protocols):this._socket=new L$O.window.WebSocket(L$a),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(L$a){L$b._onOpen(L$a)},this._socket.onmessage=function(L$a){L$b._onMessage(L$a)},this._socket.onclose=function(L$a){L$b._onClose(L$a)},this._socket.onerror=function(L$a){L$b._onError(L$a)}},L$b.cleanSocket=function(){try{this._socket.close()}catch(L$a){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},L$b.close=function(){if(null!=this._socket)try{this._socket.close()}catch(L$a){}},L$b._onOpen=function(L$a){this._connected=!0,this.event("open",L$a)},L$b._onMessage=function(L$a){if(L$a&&L$a.data){var L$b=L$a.data;if(this.disableInput&&L$b)this.event("message",L$b);else{0<this._input.length&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var L$c=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,L$b&&("string"==typeof L$b?this._input.writeUTFBytes(L$b):this._input.writeArrayBuffer(L$b),this._addInputPosition=this._input.pos,this._input.pos=L$c),this.event("message",L$b)}}},L$b._onClose=function(L$a){this._connected=!1,this.event("close",L$a)},L$b._onError=function(L$a){this.event("error",L$a)},L$b.send=function(L$a){this._socket.send(L$a)},L$b.flush=function(){if(this._output&&0<this._output.length){var L$b;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(L$a){L$b=L$a}this._output.endian=this.endian,this._output.clear(),L$b&&this.event("error",L$b)}},L$o(0,L$b,"input",function(){return this._input}),L$o(0,L$b,"output",function(){return this._output}),L$o(0,L$b,"connected",function(){return this._connected}),L$o(0,L$b,"endian",function(){return this._endian},function(L$a){this._endian=L$a,null!=this._input&&(this._input.endian=L$a),null!=this._output&&(this._output.endian=L$a)}),L$d.LITTLE_ENDIAN="littleEndian",L$d.BIG_ENDIAN="bigEndian"}(),function(L$a){function L$h(){L$h.__super.call(this),this._$1__id=++L$h._uniqueIDCounter,this.__loaded=!0,this._destroyed=!1,this._referenceCount=0,(L$h._idResourcesMap[this.id]=this)._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,L$N.currentResourceManager&&L$N.currentResourceManager.addResource(this)}L$k(L$h,"laya.resource.Resource",L$j);var L$b=L$h.prototype;return L$z.imps(L$b,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),L$b._setUrl=function(L$a){var L$b;this._url!==L$a&&(this._url&&((L$b=L$h._urlResourcesMap[this._url]).splice(L$b.indexOf(this),1),0===L$b.length&&delete L$h._urlResourcesMap[this._url]),L$a&&((L$b=L$h._urlResourcesMap[L$a])||(L$h._urlResourcesMap[L$a]=L$b=[]),L$b.push(this)),this._url=L$a)},L$b._getGroup=function(){return this._group},L$b._setGroup=function(L$a){var L$b;this._group!==L$a&&(this._group&&((L$b=L$h._groupResourcesMap[this._group]).splice(L$b.indexOf(this),1),0===L$b.length&&delete L$h._groupResourcesMap[this._group]),L$a&&((L$b=L$h._groupResourcesMap[L$a])||(L$h._groupResourcesMap[L$a]=L$b=[]),L$b.push(this)),this._group=L$a)},L$b._addReference=function(){this._referenceCount++},L$b._removeReference=function(){this._referenceCount--},L$b._clearReference=function(){this._referenceCount=0},L$b._endLoaded=function(){this.__loaded=!0,this.event("loaded",this)},L$b.recreateResource=function(){this.completeCreate()},L$b.disposeResource=function(){},L$b.activeResource=function(L$a){void 0===L$a&&(L$a=!1),this._lastUseFrameCount=L$X.loopCount,!this._destroyed&&this.__loaded&&(this._released||L$a)&&this.recreateResource()},L$b.releaseResource=function(L$a){return void 0===L$a&&(L$a=!0),!(!L$a&&this.lock)&&(!(this._released&&!L$a)&&(this.disposeResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},L$b.onAsynLoaded=function(L$a,L$b,L$c){throw new Error("Resource: must override this function!")},L$b.destroy=function(){var L$a;this._destroyed||(null!==this._resourceManager&&this._resourceManager.removeResource(this),this._destroyed=!0,this.lock=!1,this.releaseResource(),delete L$h._idResourcesMap[this.id],this._url&&((L$a=L$h._urlResourcesMap[this._url])&&(L$a.splice(L$a.indexOf(this),1),0===L$a.length&&delete L$h._urlResourcesMap[this.url]),L$ha.clearRes(this._url),this.__loaded||L$F.cancelLoadByUrl(this._url)),this._group&&((L$a=L$h._groupResourcesMap[this._group]).splice(L$a.indexOf(this),1),0===L$a.length&&delete L$h._groupResourcesMap[this.url]))},L$b.completeCreate=function(){this._released=!1,this.event("recovered",this)},L$b.dispose=function(){this.destroy()},L$o(0,L$b,"memorySize",function(){return this._memorySize},function(L$a){var L$b=L$a-this._memorySize;this._memorySize=L$a,this.resourceManager&&this.resourceManager.addRecord(this.uri,this.__className,L$b),this.resourceManager&&this.resourceManager.addSize(L$b)}),L$o(0,L$b,"_loaded",null,function(L$a){this.__loaded=L$a}),L$o(0,L$b,"loaded",function(){return this.__loaded}),L$o(0,L$b,"id",function(){return this._$1__id}),L$o(0,L$b,"destroyed",function(){return this._destroyed}),L$o(0,L$b,"group",function(){return this._getGroup()},function(L$a){this._setGroup(L$a)}),L$o(0,L$b,"resourceManager",function(){return this._resourceManager}),L$o(0,L$b,"url",function(){return this._url}),L$o(0,L$b,"released",function(){return this._released}),L$o(0,L$b,"referenceCount",function(){return this._referenceCount}),L$h.getResourceByID=function(L$a){return L$h._idResourcesMap[L$a]},L$h.getResourceByURL=function(L$a,L$b){return void 0===L$b&&(L$b=0),null==L$h._urlResourcesMap[L$a]?null:L$h._urlResourcesMap[L$a][L$b]},L$h.getResourceCountByURL=function(L$a){return L$h._urlResourcesMap[L$a].length},L$h.destroyUnusedResources=function(L$a){var L$b;if(L$a){var L$c=L$h._groupResourcesMap[L$a];if(L$c)for(var L$d=L$c.slice(),L$e=0,L$f=L$d.length;L$e<L$f;L$e++)(L$b=L$d[L$e]).lock||0!==L$b._referenceCount||L$b.destroy()}else for(var L$g in L$h._idResourcesMap)(L$b=L$h._idResourcesMap[L$g]).lock||0!==L$b._referenceCount||L$b.destroy()},L$h._uniqueIDCounter=0,L$h._idResourcesMap={},L$h._urlResourcesMap={},L$h._groupResourcesMap={},L$h}()),L$ka=function(L$a){function L$C(L$a,L$b){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,this._atlasID=-1,this.scaleRate=1,L$C.__super.call(this),L$a&&null!=L$a._addReference&&L$a._addReference(),this.setTo(L$a,L$b)}L$k(L$C,"laya.resource.Texture",L$j);var L$b=L$C.prototype;return L$b._setUrl=function(L$a){this.url=L$a},L$b.setTo=function(L$a,L$b){if(L$a instanceof L$g.HTMLElement){var L$c=L$ta.create("2D",L$a);this.bitmap=L$c}else this.bitmap=L$a;if(this.uv=L$b||L$C.DEF_UV,L$a){this._w=L$a.width,this._h=L$a.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=0<this._w;var L$d=this;if(this._loaded)L$F.addToAtlas&&L$F.addToAtlas(L$d);else{var L$e=L$a;L$e instanceof laya.resource.HTMLImage&&L$e.image&&L$e.image.addEventListener("load",function(L$a){L$F.addToAtlas&&L$F.addToAtlas(L$d)},!1)}}},L$b.active=function(){this.bitmap&&this.bitmap.activeResource()},L$b.destroy=function(L$a){if(void 0===L$a&&(L$a=!1),this.alphaTexture&&(this.alphaTexture.destroy(L$a),this.alphaTexture=null),this.bitmap&&0<this.bitmap.referenceCount){var L$b=this.bitmap;L$a?(L$J.isConchApp&&L$b.source&&L$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,L$b.dispose(),L$b._clearReference()):(L$b._removeReference(),0==L$b.referenceCount&&(L$J.isConchApp&&L$b.source&&L$b.source.conchDestroy&&this.bitmap.source.conchDestroy(),this.bitmap=null,L$b.dispose())),this.url&&this===L$z.loader.getRes(this.url)&&L$z.loader.clearRes(this.url,L$a),this._loaded=!1}},L$b.load=function(L$a){var L$b=this;this._loaded=!1,L$a=L$I.customFormat(L$a);var L$c=this.bitmap||(this.bitmap=L$ya.create(L$a));L$c.uri=L$a,L$c&&L$c._addReference();var L$d=this;L$c.onload=function(){L$c.onload=null,L$d._loaded=!0,L$b.sourceWidth=L$b._w=L$c.width,L$b.sourceHeight=L$b._h=L$c.height,L$d.event("loaded",this),L$F.addToAtlas&&L$F.addToAtlas(L$d)}},L$b.addTextureToAtlas=function(L$a){L$F.addTextureToAtlas(this)},L$b.getPixels=function(L$a,L$b,L$c,L$d){if(L$J.isConchApp){var L$e=this.bitmap;if(L$e.source&&L$e.source.getImageData){var L$f=L$e.source.getImageData(L$a,L$b,L$c,L$d),L$g=new Uint8Array(L$f);return Array.from(L$g)}return null}return L$J.isWebGL?L$F.getTexturePixels(this,L$a,L$b,L$c,L$d):(L$O.canvas.size(L$c,L$d),L$O.canvas.clear(),L$O.context.drawTexture(this,-L$a,-L$b,this.width,this.height,0,0),L$O.context.getImageData(0,0,L$c,L$d).data)},L$b.onAsynLoaded=function(L$a,L$b){if(L$b){if("function"!=typeof L$b._addReference)throw new Error("bitmap._addReference is not a function. "+L$b.className+" "+typeof L$b._addReference+" "+L$b.constructor);L$b._addReference()}this.setTo(L$b,this.uv),this._loaded&&this.event("loaded",this)},L$o(0,L$b,"source",function(){return this.bitmap?(this.bitmap.activeResource(),this.bitmap.source):null}),L$o(0,L$b,"loaded",function(){return this._loaded}),L$o(0,L$b,"released",function(){return!this.bitmap||this.bitmap.released}),L$o(0,L$b,"width",function(){return this._w?this._w:this.uv&&this.uv!==L$C.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(L$a){this._w=L$a,this.sourceWidth||(this.sourceWidth=L$a)}),L$o(0,L$b,"repeat",function(){return!L$J.isWebGL||!this.bitmap||this.bitmap.repeat},function(L$a){L$a&&L$J.isWebGL&&this.bitmap&&(this.bitmap.repeat=L$a)&&(this.bitmap.enableMerageInAtlas=!1)}),L$o(0,L$b,"height",function(){return this._h?this._h:this.uv&&this.uv!==L$C.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(L$a){this._h=L$a,this.sourceHeight||(this.sourceHeight=L$a)}),L$o(0,L$b,"isLinearSampling",function(){return!L$J.isWebGL||9728!=this.bitmap.minFifter},function(L$a){!L$a&&L$J.isWebGL&&(L$a||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),L$C.moveUV=function(L$a,L$b,L$c){for(var L$d=0;L$d<8;L$d+=2)L$c[L$d]+=L$a,L$c[L$d+1]+=L$b;return L$c},L$C.create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){void 0===L$f&&(L$f=0),void 0===L$g&&(L$g=0),void 0===L$h&&(L$h=0),void 0===L$i&&(L$i=0);var L$j=L$a instanceof laya.resource.Texture,L$k=L$j?L$a.uv:L$C.DEF_UV,L$l=L$j?L$a.bitmap:L$a,L$m=L$F.isAtlas(L$l);if(L$m){var L$n=L$l._atlaser,L$o=L$a._atlasID;if(-1==L$o)throw new Error("create texture error");L$l=L$n._inAtlasTextureBitmapValue[L$o],L$k=L$n._inAtlasTextureOriUVValue[L$o]}var L$p=new L$C(L$l,null);L$l.width&&L$b+L$d>L$l.width&&(L$d=L$l.width-L$b),L$l.height&&L$c+L$e>L$l.height&&(L$e=L$l.height-L$c),L$p.width=L$d,L$p.height=L$e,L$p.offsetX=L$f,L$p.offsetY=L$g,L$p.sourceWidth=L$h||L$d,L$p.sourceHeight=L$i||L$e;var L$q=1/L$l.width,L$r=1/L$l.height;L$b*=L$q,L$c*=L$r,L$d*=L$q,L$e*=L$r;var L$s=L$p.uv[0],L$t=L$p.uv[1],L$u=L$p.uv[4],L$v=L$p.uv[5],L$y=L$u-L$s,L$z=L$v-L$t,L$A=L$C.moveUV(L$k[0],L$k[1],[L$b,L$c,L$b+L$d,L$c,L$b+L$d,L$c+L$e,L$b,L$c+L$e]);L$p.uv=[L$s+L$A[0]*L$y,L$t+L$A[1]*L$z,L$u-(1-L$A[2])*L$y,L$t+L$A[3]*L$z,L$u-(1-L$A[4])*L$y,L$v-(1-L$A[5])*L$z,L$s+L$A[6]*L$y,L$v-(1-L$A[7])*L$z],L$m&&L$p.addTextureToAtlas();var L$B=L$l.scaleRate;return L$B&&1!=L$B?(L$p.sourceWidth/=L$B,L$p.sourceHeight/=L$B,L$p.width/=L$B,L$p.height/=L$B,L$p.scaleRate=L$B,L$p.offsetX/=L$B,L$p.offsetY/=L$B):L$p.scaleRate=1,L$p},L$C.createFromTexture=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$a.scaleRate;1!=L$f&&(L$b*=L$f,L$c*=L$f,L$d*=L$f,L$e*=L$f);var L$g=L$B.TEMP.setTo(L$b-L$a.offsetX,L$c-L$a.offsetY,L$d,L$e),L$h=L$g.intersection(L$C._rect1.setTo(0,0,L$a.width,L$a.height),L$C._rect2);if(!L$h)return null;var L$i=L$C.create(L$a,L$h.x,L$h.y,L$h.width,L$h.height,L$h.x-L$g.x,L$h.y-L$g.y,L$d,L$e);if(L$i.bitmap&&L$i.bitmap._removeReference)return L$i.bitmap._removeReference(),L$i;var L$j="bitmap:"+(L$i.bitmap?L$i.bitmap.constructor?L$i.bitmap.constructor.name:L$i.bitmap.__className:"")+", url:"+(L$a.url+" | "+(L$i.bitmap?L$i.bitmap.url:L$a.url))+", x="+L$b+",y="+L$c+",width="+L$d+",height="+L$e+", result="+(L$h?L$h.x+","+L$h.y+","+L$h.width+","+L$h.height:"null")+", rect="+L$g.x+","+L$g.y+","+L$g.width+","+L$g.height;throw new Error("报错：bitmap._removeReference is not a function  "+L$j)},L$C.DEF_UV=[0,0,1,0,1,1,0,1],L$C.INV_UV=[0,1,1,1,1,0,0,0],L$C._rect1=new L$B,L$C._rect2=new L$B,L$C}(),L$a=function(L$a){var L$h;function L$f(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,L$f.__super.call(this)}L$k(L$f,"laya.utils.TimeLine",L$j);var L$b=L$f.prototype;return L$b.to=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$e&&(L$e=0),this._create(L$a,L$b,L$c,L$d,L$e,!0)},L$b.from=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$e&&(L$e=0),this._create(L$a,L$b,L$c,L$d,L$e,!1)},L$b._create=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$W.getItemByClass("tweenData",L$h);return L$g.isTo=L$f,L$g.type=0,L$g.target=L$a,L$g.duration=L$c,L$g.data=L$b,L$g.startTime=this._startTime+L$e,L$g.endTime=L$g.startTime+L$g.duration,L$g.ease=L$d,this._startTime=Math.max(L$g.endTime,this._startTime),this._tweenDataList.push(L$g),this._startTimeSort=!0,this._endTimeSort=!0,this},L$b.addLabel=function(L$a,L$b){var L$c=L$W.getItemByClass("tweenData",L$h);return L$c.type=1,L$c.data=L$a,L$c.endTime=L$c.startTime=this._startTime+L$b,this._labelDic||(this._labelDic={}),this._labelDic[L$a]=L$c,this._tweenDataList.push(L$c),this},L$b.removeLabel=function(L$a){if(this._labelDic&&this._labelDic[L$a]){var L$b=this._labelDic[L$a];if(L$b){var L$c=this._tweenDataList.indexOf(L$b);-1<L$c&&this._tweenDataList.splice(L$c,1)}delete this._labelDic[L$a]}},L$b.gotoTime=function(L$a){if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var L$b,L$c,L$d,L$e;for(var L$f in this._firstTweenDic)if(L$c=this._firstTweenDic[L$f])for(var L$g in L$c)L$c.diyTarget.hasOwnProperty(L$g)&&(L$c.diyTarget[L$g]=L$c[L$g]);for(L$f in this._tweenDic)(L$b=this._tweenDic[L$f]).clear(),delete this._tweenDic[L$f];if(this._index=0,this._gidIndex=0,this._currTime=L$a,this._lastTime=L$O.now(),null==this._endTweenDataList||this._endTimeSort){this._endTimeSort=!1,this._endTweenDataList=L$d=this._tweenDataList.concat(),L$d.sort(function(L$a,L$b){return L$a.endTime>L$b.endTime?1:L$a.endTime<L$b.endTime?-1:0})}else L$d=this._endTweenDataList;for(var L$h=0,L$i=L$d.length;L$h<L$i;L$h++)if(0==(L$e=L$d[L$h]).type){if(!(L$a>=L$e.endTime))break;this._index=Math.max(this._index,L$h+1);var L$j=L$e.data;if(L$e.isTo)for(var L$k in L$j)L$e.target[L$k]=L$j[L$k]}for(L$h=0,L$i=this._tweenDataList.length;L$h<L$i;L$h++)0==(L$e=this._tweenDataList[L$h]).type&&L$a>=L$e.startTime&&L$a<L$e.endTime&&(this._index=Math.max(this._index,L$h+1),this._gidIndex++,(L$b=L$W.getItemByClass("tween",L$Z))._create(L$e.target,L$e.data,L$e.duration,L$e.ease,L$s.create(this,this._animComplete,[this._gidIndex]),0,!1,L$e.isTo,!0,!1),L$b.setStartTime(this._currTime-(L$a-L$e.startTime)),L$b._updateEase(this._currTime),L$b.gid=this._gidIndex,this._tweenDic[this._gidIndex]=L$b)}},L$b.gotoLabel=function(L$a){if(null!=this._labelDic){var L$b=this._labelDic[L$a];L$b&&this.gotoTime(L$b.startTime)}},L$b.pause=function(){L$z.timer.clear(this,this._update)},L$b.resume=function(){this.play(this._currTime,this._loopKey)},L$b.play=function(L$a,L$b){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=!1),this._tweenDataList){if(this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(function(L$a,L$b){return L$a.startTime>L$b.startTime?1:L$a.startTime<L$b.startTime?-1:0});for(var L$c=0,L$d=this._tweenDataList.length;L$c<L$d;L$c++){var L$e=this._tweenDataList[L$c];if(null!=L$e&&0==L$e.type){var L$f=L$e.target,L$g=L$f.$_GID||(L$f.$_GID=L$$.getGID()),L$h=null;for(var L$i in null==this._firstTweenDic[L$g]?((L$h={}).diyTarget=L$f,this._firstTweenDic[L$g]=L$h):L$h=this._firstTweenDic[L$g],L$e.data)null==L$h[L$i]&&(L$h[L$i]=L$f[L$i])}}}"string"==typeof L$a?this.gotoLabel(L$a):this.gotoTime(L$a),this._loopKey=L$b,this._lastTime=L$O.now(),L$z.timer.frameLoop(1,this,this._update)}},L$b._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var L$a in this._tweenDic)(L$b=this._tweenDic[L$a]).complete();return this._complete(),void this.pause()}if(this._complete(),!this._tweenDataList)return;this.gotoTime(0)}var L$b,L$c=L$O.now(),L$d=L$c-this._lastTime,L$e=this._currTime+=L$d*this.scale;for(L$a in this._lastTime=L$c,this._tweenDic)(L$b=this._tweenDic[L$a])._updateEase(L$e);if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var L$f=this._tweenDataList[this._index];L$e>=L$f.startTime&&(this._index++,0==L$f.type?(this._gidIndex++,(L$b=L$W.getItemByClass("tween",L$Z))._create(L$f.target,L$f.data,L$f.duration,L$f.ease,L$s.create(this,this._animComplete,[this._gidIndex]),0,!1,L$f.isTo,!0,!1),L$b.setStartTime(L$e),L$b.gid=this._gidIndex,(this._tweenDic[this._gidIndex]=L$b)._updateEase(L$e)):this.event("label",L$f.data))}},L$b._animComplete=function(L$a){this._tweenDic[L$a]&&delete this._tweenDic[L$a]},L$b._complete=function(){this.event("complete")},L$b.reset=function(){var L$a;if(this._labelDic)for(L$a in this._labelDic)delete this._labelDic[L$a];for(L$a in this._tweenDic)this._tweenDic[L$a].clear(),delete this._tweenDic[L$a];for(L$a in this._firstTweenDic)delete this._firstTweenDic[L$a];if(this._endTweenDataList=null,this._tweenDataList&&this._tweenDataList.length){var L$b,L$c=0;for(L$b=this._tweenDataList.length,L$c=0;L$c<L$b;L$c++)this._tweenDataList[L$c]&&this._tweenDataList[L$c].destroy()}this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,L$z.timer.clear(this,this._update)},L$b.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},L$o(0,L$b,"index",function(){return this._frameIndex},function(L$a){this._frameIndex=L$a,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),L$o(0,L$b,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),L$f.to=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$e&&(L$e=0),(new L$f).to(L$a,L$b,L$c,L$d,L$e)},L$f.from=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$e&&(L$e=0),(new L$f).from(L$a,L$b,L$c,L$d,L$e)},L$f.__init$=function(){L$h=function(){function L$a(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return L$k(L$a,""),L$a.prototype.destroy=function(){this.target=null,this.ease=null,this.data=null,this.isTo=!0,this.type=0,L$W.recover("tweenData",this)},L$a}()},L$f}(),L$la=function(L$e){function L$c(){this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this._optimizeScrollRect=!1,this._texture=null,this.mouseThrough=!1,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,L$c.__super.call(this),this._style=L$h.EMPTY}L$k(L$c,"laya.display.Sprite",L$e);var L$a=L$c.prototype;return L$z.imps(L$a,{"laya.display.ILayout":!0}),L$a.createConchModel=function(){return new ConchNode},L$a.destroy=function(L$a){if(void 0===L$a&&(L$a=!0),this._releaseMem(),!this._destroyed){this.filters=null;var L$b=this.mask;L$b&&(this.mask=null,L$b.destroy(L$a))}L$e.prototype.destroy.call(this,L$a),this._style&&this._style.destroy(),this._transform&&this._transform.destroy(),this._transform=null,this._style=null,this._graphics=null},L$a.updateZOrder=function(){L$$.updateOrder(this._childs)&&this.repaint()},L$a.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0),this._repaint=1},L$a.setBounds=function(L$a){this._set$P("uBounds",L$a)},L$a.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new L$B),L$B._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},L$a.getSelfBounds=function(){return this._$P.uBounds?this._$P.uBounds:(this._$P.mBounds||this._set$P("mBounds",new L$B),L$B._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds))},L$a._boundPointsToParent=function(L$a){void 0===L$a&&(L$a=!1);var L$b=0,L$c=0;this._style&&(L$b=this._style._tf.translateX,L$c=this._style._tf.translateY,L$a=L$a||0!==this._style._tf.rotate,this._style.scrollRect&&(L$b+=this._style.scrollRect.x,L$c+=this._style.scrollRect.y));var L$d=this._getBoundPointsM(L$a);if(!L$d||L$d.length<1)return L$d;if(8!=L$d.length&&(L$d=L$a?L$v.scanPList(L$d):L$B._getWrapRec(L$d,L$B.TEMP)._getBoundPoints()),!this.transform)return L$$.transPointList(L$d,this._x-L$b,this._y-L$c),L$d;var L$e=L$A.TEMP,L$f=0,L$g=L$d.length;for(L$f=0;L$f<L$g;L$f+=2)L$e.x=L$d[L$f],L$e.y=L$d[L$f+1],this.toParentPoint(L$e),L$d[L$f]=L$e.x,L$d[L$f+1]=L$e.y;return L$d},L$a.getGraphicBounds=function(L$a){return void 0===L$a&&(L$a=!1),this._graphics?this._graphics.getBounds(L$a):L$B.TEMP.setTo(0,0,0,0)},L$a._getBoundPointsM=function(L$a){if(void 0===L$a&&(L$a=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var L$b=L$$.clearArray(this._$P.temBM),L$c=L$B.TEMP;return L$c.copyFrom(this.scrollRect),L$$.concatArray(L$b,L$c._getBoundPoints()),L$b}for(var L$d,L$e,L$f,L$g=this._graphics?this._graphics.getBoundPoints():L$$.clearArray(this._$P.temBM),L$h=0,L$i=(L$f=this._childs).length;L$h<L$i;L$h++)(L$d=L$f[L$h])instanceof laya.display.Sprite&&1==L$d.visible&&(L$e=L$d._boundPointsToParent(L$a))&&(L$g=L$g?L$$.concatArray(L$g,L$e):L$e);return L$g},L$a.getStyle=function(){return this._style===L$h.EMPTY&&(this._style=new L$h),this._style},L$a.setStyle=function(L$a){this._style=L$a},L$a._adjustTransform=function(){this._tfChanged=!1;var L$a,L$b=this._style._tf,L$c=L$b.scaleX,L$d=L$b.scaleY;if(L$b.rotate||1!==L$c||1!==L$d||L$b.skewX||L$b.skewY){(L$a=this._transform||(this._transform=L$G.create())).bTransform=!0;var L$e=.0174532922222222*(L$b.rotate-L$b.skewX),L$f=.0174532922222222*(L$b.rotate+L$b.skewY),L$g=Math.cos(L$f),L$h=Math.sin(L$f),L$i=Math.sin(L$e),L$j=Math.cos(L$e);return L$a.a=L$c*L$g,L$a.b=L$c*L$h,L$a.c=-L$d*L$i,L$a.d=L$d*L$j,L$a.tx=L$a.ty=0,L$a}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,L$a},L$a.pos=function(L$a,L$b,L$c){if(void 0===L$c&&(L$c=!1),this._x!==L$a||this._y!==L$b){if(this.destroyed)return this;if(L$c){this._x=L$a,this._y=L$b,this.conchModel&&this.conchModel.pos(this._x,this._y);var L$d=this._parent;L$d&&0===L$d._repaint&&(L$d._repaint=1,L$d.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=L$a,this.y=L$b}return this},L$a.pivot=function(L$a,L$b){return this.pivotX=L$a,this.pivotY=L$b,this},L$a.size=function(L$a,L$b){return this.width=L$a,this.height=L$b,this},L$a.scale=function(L$a,L$b,L$c){void 0===L$c&&(L$c=!1);var L$d=this.getStyle(),L$e=L$d._tf;if(L$e.scaleX!=L$a||L$e.scaleY!=L$b){if(this.destroyed)return this;if(L$c){L$d.setScale(L$a,L$b),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(L$a,L$b),this._renderType|=4;var L$f=this._parent;L$f&&0===L$f._repaint&&(L$f._repaint=1,L$f.parentRepaint())}else this.scaleX=L$a,this.scaleY=L$b}return this},L$a.skew=function(L$a,L$b){return this.skewX=L$a,this.skewY=L$b,this},L$a.render=function(L$a,L$b,L$c){L$X.spriteCount++,L$L.renders[this._renderType]._fun(this,L$a,L$b+this._x,L$c+this._y),this._repaint=0},L$a.drawToCanvas=function(L$a,L$b,L$c,L$d){if(L$J.isConchNode){var L$e=L$ta.create("2D");return new L$K(L$a,L$b,L$e).ctx.setCanvasType(1),this.conchModel.drawToCanvas(L$e.source,L$c,L$d),L$e}return L$F.drawToCanvas(this,this._renderType,L$a,L$b,L$c,L$d)},L$a.customRender=function(L$a,L$b,L$c){this._renderType|=1024},L$a._applyFilters=function(){var L$a;if(!L$J.isWebGL&&((L$a=this._$P.filters)&&!(L$a.length<1)))for(var L$b=0,L$c=L$a.length;L$b<L$c;L$b++)L$a[L$b].action.apply(this._$P.cacheCanvas)},L$a._isHaveGlowFilter=function(){var L$a,L$b=0;if(this.filters)for(L$b=0;L$b<this.filters.length;L$b++)if(8==this.filters[L$b].type)return!0;for(L$b=0,L$a=this._childs.length;L$b<L$a;L$b++)if(this._childs[L$b]._isHaveGlowFilter())return!0;return!1},L$a.localToGlobal=function(L$a,L$b){void 0===L$b&&(L$b=!1),!0===L$b&&(L$a=new L$A(L$a.x,L$a.y));for(var L$c=this;L$c&&L$c!=L$z.stage;)L$a=L$c.toParentPoint(L$a),L$c=L$c.parent;return L$a},L$a.globalToLocal=function(L$a,L$b){void 0===L$b&&(L$b=!1),L$b&&(L$a=new L$A(L$a.x,L$a.y));for(var L$c=this,L$d=[];L$c&&L$c!=L$z.stage;)L$d.push(L$c),L$c=L$c.parent;for(var L$e=L$d.length-1;0<=L$e;)L$a=(L$c=L$d[L$e]).fromParentPoint(L$a),L$e--;return L$a},L$a.toParentPoint=function(L$a){if(!L$a)return L$a;L$a.x-=this.pivotX,L$a.y-=this.pivotY,this.transform&&this._transform.transformPoint(L$a),L$a.x+=this._x,L$a.y+=this._y;var L$b=this._style.scrollRect;return L$b&&(L$a.x-=L$b.x,L$a.y-=L$b.y),L$a},L$a.fromParentPoint=function(L$a){if(!L$a)return L$a;L$a.x-=this._x,L$a.y-=this._y;var L$b=this._style.scrollRect;return L$b&&(L$a.x+=L$b.x,L$a.y+=L$b.y),this.transform&&this._transform.invertTransformPoint(L$a),L$a.x+=this.pivotX,L$a.y+=this.pivotY,L$a},L$a.on=function(L$a,L$b,L$c,L$d){return 1!==this._mouseEnableState&&this.isMouseEvent(L$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(L$a,L$b,L$c,L$d,!1)):L$e.prototype.on.call(this,L$a,L$b,L$c,L$d)},L$a.once=function(L$a,L$b,L$c,L$d){return 1!==this._mouseEnableState&&this.isMouseEvent(L$a)?(this.mouseEnabled=!0,this._setBit(2,!0),this._parent&&this._$2__onDisplay(),this._createListener(L$a,L$b,L$c,L$d,!0)):L$e.prototype.once.call(this,L$a,L$b,L$c,L$d)},L$a._$2__onDisplay=function(){if(1!==this._mouseEnableState){var L$a=this;for(L$a=L$a.parent;L$a&&1!==L$a._mouseEnableState&&!L$a._getBit(2);)L$a.mouseEnabled=!0,L$a._setBit(2,!0),L$a=L$a.parent}},L$a.loadImage=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=this;return void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),this.graphics.loadImage(L$a,L$b,L$c,L$d,L$e,function(L$a){L$g.destroyed||(L$g.size(L$b+(L$d||L$a.width),L$c+(L$e||L$a.height)),L$g.repaint(),L$f&&L$f.runWith(L$a))}),this},L$a.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},L$a._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},L$a._childChanged=function(L$a){this._childs.length?this._renderType|=2048:this._renderType&=-2049,L$a&&this._get$P("hasZorder")&&L$z.timer.callLater(this,this.updateZOrder),this.repaint()},L$a.parentRepaint=function(){var L$a=this._parent;L$a&&0===L$a._repaint&&(L$a._repaint=1,L$a.parentRepaint())},L$a.startDrag=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){void 0===L$b&&(L$b=!1),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=300),void 0===L$f&&(L$f=!1),void 0===L$g&&(L$g=.92),this._$P.dragging||this._set$P("dragging",new L$T),this._$P.dragging.start(this,L$a,L$b,L$c,L$d,L$e,L$f,L$g)},L$a.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},L$a._releaseMem=function(){if(this._$P){var L$a=this._$P.cacheCanvas;L$a&&L$a.ctx&&(L$W.recover("RenderContext",L$a.ctx),L$a.ctx.canvas.size(0,0),L$a.ctx=null);var L$b=this._$P._filterCache;L$b&&(L$b.destroy(),L$b.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1),this._$P._isHaveGlowFilter=null}},L$a._setDisplay=function(L$a){L$a||this._releaseMem(),L$e.prototype._setDisplay.call(this,L$a)},L$a.hitTestPoint=function(L$a,L$b){var L$c=this.globalToLocal(L$A.TEMP.setTo(L$a,L$b));return L$a=L$c.x,L$b=L$c.y,(this._$P.hitArea?this._$P.hitArea:0<this._width&&0<this._height?L$B.TEMP.setTo(0,0,this._width,this._height):this.getSelfBounds()).contains(L$a,L$b)},L$a.getMousePoint=function(){return this.globalToLocal(L$A.TEMP.setTo(L$z.stage.mouseX,L$z.stage.mouseY))},L$a._getWords=function(){return null},L$a._addChildsToLayout=function(L$a){var L$b=this._getWords();if(null==L$b&&0==this._childs.length)return!1;if(L$b)for(var L$c=0,L$d=L$b.length;L$c<L$d;L$c++)L$a.push(L$b[L$c]);L$c=0;for(var L$e=this._childs.length;L$c<L$e;++L$c){var L$f=this._childs[L$c];L$f._style._enableLayout()&&L$f._addToLayout(L$a)}return!0},L$a._addToLayout=function(L$a){this._style.absolute||(this._style.block?L$a.push(this):this._addChildsToLayout(L$a)&&(this.x=this.y=0))},L$a._isChar=function(){return!1},L$a._getCSSStyle=function(){return this._style.getCSSStyle()},L$a._setAttributes=function(L$a,L$b){switch(L$a){case"x":this.x=parseFloat(L$b);break;case"y":this.y=parseFloat(L$b);break;case"width":this.width=parseFloat(L$b);break;case"height":this.height=parseFloat(L$b);break;default:this[L$a]=L$b}},L$a._layoutLater=function(){this.parent&&this.parent._layoutLater()},L$o(0,L$a,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(L$a){this._optimizeScrollRect!=L$a&&(this._optimizeScrollRect=L$a,this.conchModel&&this.conchModel.optimizeScrollRect(L$a))}),L$o(0,L$a,"customRenderEnable",null,function(L$a){if(L$a&&(this._renderType|=1024,L$J.isConchNode)){L$c.CustomList.push(this);var L$b=new L$ta("2d");L$b._setContext(new CanvasRenderingContext2D),this.customContext=new L$K(0,0,L$b),L$b.context.setCanvasType&&L$b.context.setCanvasType(2),this.conchModel.custom(L$b.context)}}),L$o(0,L$a,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(L$a){this.cacheAs=L$a?this._$P.hasFilter?"none":"normal":"none"}),L$o(0,L$a,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(L$a){var L$b=this._$P.cacheCanvas;if(L$a!==(L$b?L$b.type:"none")){if("none"!==L$a)this._getBit(1)||this._setUpNoticeType(1),L$b||(L$b=this._set$P("cacheCanvas",L$W.getItemByClass("cacheCanvas",Object))),L$b.type=L$a,L$b.reCache=!0,this._renderType|=16,"bitmap"==L$a&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1);else if(this._$P._mask);else if(this._$P.hasFilter)this._set$P("cacheForFilters",!0);else{if(L$b){var L$c=L$b;L$c&&L$c.ctx&&(L$W.recover("RenderContext",L$c.ctx),L$c.ctx.canvas.size(0,0),L$c.ctx=null),L$W.recover("cacheCanvas",L$b)}this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)}this.repaint()}}),L$o(0,L$a,"zOrder",function(){return this._zOrder},function(L$a){this._zOrder!=L$a&&(this._zOrder=L$a,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(L$a),this._parent&&(L$a&&this._parent._set$P("hasZorder",!0),L$z.timer.callLater(this._parent,this.updateZOrder)))}),L$o(0,L$a,"rotation",function(){return this._style._tf.rotate},function(L$a){var L$b=this.getStyle();if(L$b._tf.rotate!==L$a){L$b.setRotate(L$a),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(L$a),this._renderType|=4;var L$c=this._parent;L$c&&0===L$c._repaint&&(L$c._repaint=1,L$c.parentRepaint())}}),L$o(0,L$a,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(L$a){this._width!==L$a&&(this._width=L$a,this.conchModel&&this.conchModel.size(L$a,this._height),this.repaint())}),L$o(0,L$a,"x",function(){return this._x},function(L$a){if(this._x!==L$a){if(this.destroyed)return;this._x=L$a,this.conchModel&&this.conchModel.pos(L$a,this._y);var L$b=this._parent;L$b&&0===L$b._repaint&&(L$b._repaint=1,L$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),L$o(0,L$a,"globalScaleY",function(){for(var L$a=1,L$b=this;L$b&&L$b!==L$z.stage;)L$a*=L$b.scaleY,L$b=L$b.parent;return L$a}),L$o(0,L$a,"hitArea",function(){return this._$P.hitArea},function(L$a){this._set$P("hitArea",L$a)}),L$o(0,L$a,"staticCache",function(){return this._$P.staticCache},function(L$a){this._set$P("staticCache",L$a),L$a||this.reCache()}),L$o(0,L$a,"texture",function(){return this._texture},function(L$a){this._texture!=L$a&&(this._texture=L$a,this.graphics.cleanByTexture(L$a,0,0))}),L$o(0,L$a,"y",function(){return this._y},function(L$a){if(this._y!==L$a){if(this.destroyed)return;this._y=L$a,this.conchModel&&this.conchModel.pos(this._x,L$a);var L$b=this._parent;L$b&&0===L$b._repaint&&(L$b._repaint=1,L$b.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),L$o(0,L$a,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(L$a){this._height!==L$a&&(this._height=L$a,this.conchModel&&this.conchModel.size(this._width,L$a),this.repaint())}),L$o(0,L$a,"blendMode",function(){return this._style.blendMode},function(L$a){this.getStyle().blendMode=L$a,this.conchModel&&this.conchModel.blendMode(L$a),L$a&&"source-over"!=L$a?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),L$o(0,L$a,"scaleX",function(){return this._style._tf.scaleX},function(L$a){var L$b=this.getStyle();if(L$b._tf.scaleX!==L$a){L$b.setScaleX(L$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(L$a,L$b._tf.scaleY),this._renderType|=4;var L$c=this._parent;L$c&&0===L$c._repaint&&(L$c._repaint=1,L$c.parentRepaint())}}),L$o(0,L$a,"scaleY",function(){return this._style._tf.scaleY},function(L$a){var L$b=this.getStyle();if(L$b._tf.scaleY!==L$a){L$b.setScaleY(L$a),this._tfChanged=!0,this.conchModel&&this.conchModel.scale(L$b._tf.scaleX,L$a),this._renderType|=4;var L$c=this._parent;L$c&&0===L$c._repaint&&(L$c._repaint=1,L$c.parentRepaint())}}),L$o(0,L$a,"stage",function(){return L$z.stage}),L$o(0,L$a,"skewX",function(){return this._style._tf.skewX},function(L$a){var L$b=this.getStyle();if(L$b._tf.skewX!==L$a){L$b.setSkewX(L$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(L$a,L$b._tf.skewY),this._renderType|=4;var L$c=this._parent;L$c&&0===L$c._repaint&&(L$c._repaint=1,L$c.parentRepaint())}}),L$o(0,L$a,"scrollRect",function(){return this._style.scrollRect},function(L$a){this.getStyle().scrollRect=L$a,this.repaint(),L$a?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(L$a.x,L$a.y,L$a.width,L$a.height)):(this._renderType&=-129,this.conchModel&&(L$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),L$o(0,L$a,"skewY",function(){return this._style._tf.skewY},function(L$a){var L$b=this.getStyle();if(L$b._tf.skewY!==L$a){L$b.setSkewY(L$a),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(L$b._tf.skewX,L$a),this._renderType|=4;var L$c=this._parent;L$c&&0===L$c._repaint&&(L$c._repaint=1,L$c.parentRepaint())}}),L$o(0,L$a,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(L$a){this._tfChanged=!1,(this._transform=L$a)&&(this._x=L$a.tx,this._y=L$a.ty,L$a.tx=L$a.ty=0,this.conchModel&&this.conchModel.transform(L$a.a,L$a.b,L$a.c,L$a.d,this._x,this._y)),L$a?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),L$o(0,L$a,"pivotX",function(){return this._style._tf.translateX},function(L$a){this.getStyle().setTranslateX(L$a),this.conchModel&&this.conchModel.pivot(L$a,this._style._tf.translateY),this.repaint()}),L$o(0,L$a,"pivotY",function(){return this._style._tf.translateY},function(L$a){this.getStyle().setTranslateY(L$a),this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,L$a),this.repaint()}),L$o(0,L$a,"alpha",function(){return this._style.alpha},function(L$a){this._style&&this._style.alpha!==L$a&&(L$a=L$a<0?0:1<L$a?1:L$a,this.getStyle().alpha=L$a,this.conchModel&&this.conchModel.alpha(L$a),1!==L$a?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),L$o(0,L$a,"visible",function(){return this._style.visible},function(L$a){this._style&&this._style.visible!==L$a&&(this.getStyle().visible=L$a,this.conchModel&&this.conchModel.visible(L$a),this.parentRepaint())}),L$o(0,L$a,"graphics",function(){return this._graphics||(this.graphics=L$F.createGraphics())},function(L$a){this._graphics&&(this._graphics._sp=null),(this._graphics=L$a)?(this._renderType&=-2,this._renderType|=512,(L$a._sp=this).conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(L$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),L$o(0,L$a,"filters",function(){return this._$P.filters},function(L$a){L$a&&0===L$a.length&&(L$a=null),this._$P.filters!=L$a&&(this._set$P("filters",L$a?L$a.slice():null),L$J.isConchApp&&(this.conchModel&&(L$c.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),L$J.isWebGL&&(L$a&&L$a.length?this._renderType|=32:this._renderType&=-33),L$a&&0<L$a.length?(this._getBit(1)||this._setUpNoticeType(1),L$J.isWebGL&&1==L$a.length&&L$a[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(L$J.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0))):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),L$o(0,L$a,"parent",L$e.prototype._$get_parent,function(L$a){L$z.superSet(L$aa,this,"parent",L$a),L$a&&this._getBit(2)&&this._$2__onDisplay()}),L$o(0,L$a,"mask",function(){return this._$P._mask},function(L$a){L$a&&this.mask&&this.mask._$P.maskParent||(L$a?(this.cacheAs="bitmap",this._set$P("_mask",L$a),L$a._set$P("maskParent",this)):(this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",L$a),this.cacheAs="none"),this.conchModel&&this.conchModel.mask(L$a?L$a.conchModel:null),this._renderType|=64,this.parentRepaint())}),L$o(0,L$a,"mouseEnabled",function(){return 1<this._mouseEnableState},function(L$a){this._mouseEnableState=L$a?2:1}),L$o(0,L$a,"globalScaleX",function(){for(var L$a=1,L$b=this;L$b&&L$b!==L$z.stage;)L$a*=L$b.scaleX,L$b=L$b.parent;return L$a}),L$o(0,L$a,"mouseX",function(){return this.getMousePoint().x}),L$o(0,L$a,"mouseY",function(){return this.getMousePoint().y}),L$c.fromImage=function(L$a){return(new L$c).loadImage(L$a)},L$c._cachePool=[],L$c.CustomList=[],L$i(L$c,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=L$g.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),L$c}(L$aa),L$ma=function(L$a){function L$b(L$a){this._audio=null,this._onEnd=null,this._resumePlay=null,L$b.__super.call(this),this._onEnd=L$$.bind(this.__onEnd,this),this._resumePlay=L$$.bind(this.__resumePlay,this),L$a.addEventListener("ended",this._onEnd),this._audio=L$a}L$k(L$b,"laya.media.h5audio.AudioSoundChannel",L$da);var L$c=L$b.prototype;return L$c.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(L$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},L$c.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,L$O.container.appendChild(this._audio),this._audio.play()}catch(L$a){this.event("error")}},L$c.play=function(L$a){this.isStopped=!1;try{this._audio.playbackRate=L$E.playbackRate,this._audio.currentTime=this.startTime}catch(L$a){return void this._audio.addEventListener("canplay",this._resumePlay)}L$E.addChannel(this),L$O.container.appendChild(this._audio),!L$a&&this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play()},L$c.stop=function(){this.isStopped=!0,L$E.removeChannel(this),this.startHandler=null,this.completeHandler=null,this._audio&&("pause"in this._audio&&L$J.isConchApp&&this._audio.stop(),this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),L$O.onIE||this._audio!=L$ca._musicAudio&&L$W.recover("audio:"+this.url,this._audio),L$O.removeElement(this._audio),this._audio=null)},L$c.pause=function(){this.isStopped=!0,L$E.removeChannel(this),"pause"in this._audio&&this._audio.pause()},L$c.resume=function(){this._audio&&(this.isStopped=!1,L$E.addChannel(this),this.startHandler&&this.startHandler.runWith(this),"play"in this._audio&&this._audio.play())},L$o(0,L$c,"position",function(){return this._audio?this._audio.currentTime:0}),L$o(0,L$c,"duration",function(){return this._audio?this._audio.duration:0}),L$o(0,L$c,"volume",function(){return this._audio?this._audio.volume:1},function(L$a){this._audio&&(this._audio.volume=L$a)}),L$b}(),L$na=function(L$a){function L$b(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._pauseTime=0,this._onPlayEnd=null,this.context=L$fa.ctx,L$b.__super.call(this),this._onPlayEnd=L$$.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}L$k(L$b,"laya.media.webaudio.WebAudioSoundChannel",L$da);var L$c=L$b.prototype;return L$c.play=function(L$a){if(L$E.addChannel(this),this.isStopped=!1,this._clearBufferSource(),this.audioBuffer){var L$b=this.context,L$c=this.gain,L$d=L$b.createBufferSource();(this.bufferSource=L$d).buffer=this.audioBuffer,L$d.connect(L$c),L$c&&L$c.disconnect(),L$c.connect(L$b.destination),L$d.onended=this._onPlayEnd,this.startTime>=this.duration&&(this.startTime=0),this._startTime=L$O.now(),this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(this._volume,this.context.currentTime,.1):this.gain.gain.value=this._volume,0==this.loops&&(L$d.loop=!0),L$d.playbackRate.setTargetAtTime?L$d.playbackRate.setTargetAtTime(L$E.playbackRate,this.context.currentTime,.1):L$d.playbackRate.value=L$E.playbackRate,L$d.start(0,this.startTime),!L$a&&this.startHandler&&this.startHandler.runWith(this),this._currentTime=0}},L$c.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(L$z.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");0<this.loops&&this.loops--,this.startTime=0,this.play(!0)},L$c._clearBufferSource=function(){if(this.bufferSource){var L$a=this.bufferSource;L$a.stop?L$a.stop(0):L$a.noteOff(0),L$a.disconnect(0),L$a.onended=null,L$b._tryCleanFailed||this._tryClearBuffer(L$a),this.bufferSource=null}},L$c._tryClearBuffer=function(L$a){try{L$a.buffer=null}catch(L$a){L$b._tryCleanFailed=!0}},L$c.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,L$E.removeChannel(this),this.startHandler=null,this.completeHandler=null},L$c.pause=function(){this.isStopped||(this._pauseTime=this.position),this._clearBufferSource(),this.gain&&this.gain.disconnect(),this.isStopped=!0,L$E.removeChannel(this)},L$c.resume=function(){this.startTime=this._pauseTime,this.play(!1)},L$o(0,L$c,"position",function(){return this.bufferSource?(L$O.now()-this._startTime)/1e3+this.startTime:0}),L$o(0,L$c,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),L$o(0,L$c,"volume",function(){return this._volume},function(L$a){this.isStopped||(this._volume=L$a,this.gain.gain.setTargetAtTime?this.gain.gain.setTargetAtTime(L$a,this.context.currentTime,.1):this.gain.gain.value=L$a)}),L$b._tryCleanFailed=!1,L$b}(),L$oa=function(L$a){function L$b(){L$b.__super.call(this),this._w=0,this._h=0}L$k(L$b,"laya.resource.Bitmap",L$ja);var L$c=L$b.prototype;return L$o(0,L$c,"width",function(){return this._w}),L$o(0,L$c,"height",function(){return this._h}),L$o(0,L$c,"source",function(){return this._source}),L$b}(),L$pa=function(L$b){function L$a(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,L$a.__super.call(this),this._interval=L$d.animationInterval,this._setUpNoticeType(1)}L$k(L$a,"laya.display.AnimationPlayerBase",L$b);var L$c=L$a.prototype;return L$c.play=function(L$a,L$b,L$c,L$d){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=!0),void 0===L$c&&(L$c=""),void 0===L$d&&(L$d=!0),this._isPlaying=!0,this.index="string"==typeof L$a?this._getFrameByLabel(L$a):L$a,this.loop=L$b,this._actionName=L$c,this._isReverse=1==this.wrapMode,0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},L$c._getFrameByLabel=function(L$a){var L$b=0;for(L$b=0;L$b<this._count;L$b++)if(this._labels[L$b]&&0<=this._labels[L$b].indexOf(L$a))return L$b;return 0},L$c._frameLoop=function(){if(this._isReverse){if(this._index--,this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<this._count?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(this._index++,this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=0<=this._count-2?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},L$c._setControlNode=function(L$a){this._controlNode&&(this._controlNode.off("display",this,this._checkResumePlaying),this._controlNode.off("undisplay",this,this._checkResumePlaying)),(this._controlNode=L$a)&&L$a!=this&&(L$a.on("display",this,this._checkResumePlaying),L$a.on("undisplay",this,this._checkResumePlaying))},L$c._setDisplay=function(L$a){L$b.prototype._setDisplay.call(this,L$a),this._checkResumePlaying()},L$c._checkResumePlaying=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},L$c.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},L$c.addLabel=function(L$a,L$b){this._labels||(this._labels={}),this._labels[L$b]||(this._labels[L$b]=[]),this._labels[L$b].push(L$a)},L$c.removeLabel=function(L$a){if(L$a){if(this._labels)for(var L$b in this._labels)this._removeLabelFromLabelList(this._labels[L$b],L$a)}else this._labels=null},L$c._removeLabelFromLabelList=function(L$a,L$b){if(L$a)for(var L$c=L$a.length-1;0<=L$c;L$c--)L$a[L$c]==L$b&&L$a.splice(L$c,1)},L$c.gotoAndStop=function(L$a){this.index="string"==typeof L$a?this._getFrameByLabel(L$a):L$a,this.stop()},L$c._displayToIndex=function(L$a){},L$c.clear=function(){this.stop(),this._labels=null},L$o(0,L$c,"interval",function(){return this._interval},function(L$a){this._interval!=L$a&&(this._frameRateChanged=!0,this._interval=L$a,this._isPlaying&&0<L$a&&this.timerLoop(L$a,this,this._frameLoop,null,!0,!0))}),L$o(0,L$c,"isPlaying",function(){return this._isPlaying}),L$o(0,L$c,"index",function(){return this._index},function(L$a){if(this._index=L$a,this._displayToIndex(L$a),this._labels&&this._labels[L$a])for(var L$b=this._labels[L$a],L$c=0,L$d=L$b.length;L$c<L$d;L$c++)this.event("label",L$b[L$c])}),L$o(0,L$c,"count",function(){return this._count}),L$a.WRAP_POSITIVE=0,L$a.WRAP_REVERSE=1,L$a.WRAP_PINGPONG=2,L$a}(L$la),L$qa=function(L$b){function L$n(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,L$n.__super.call(this),this.overflow=L$n.VISIBLE,this._style=new L$ba(this),this._style.wordWrap=!1}L$k(L$n,"laya.display.Text",L$b);var L$a=L$n.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._lines=null,this._words&&(this._words.length=0,this._words=null)},L$a._getBoundPointsM=function(L$a){void 0===L$a&&(L$a=!1);var L$b=L$B.TEMP;return L$b.setTo(0,0,this.width,this.height),L$b._getBoundPoints()},L$a.getGraphicBounds=function(L$a){void 0===L$a&&(L$a=!1);var L$b=L$B.TEMP;return L$b.setTo(0,0,this.width,this.height),L$b},L$a._getCSSStyle=function(){return this._style},L$a.lang=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k){if(L$a=L$n.langPacks&&L$n.langPacks[L$a]?L$n.langPacks[L$a]:L$a,arguments.length<2)this._text=L$a;else{for(var L$l=0,L$m=arguments.length;L$l<L$m;L$l++)L$a=L$a.replace("{"+L$l+"}",arguments[L$l+1]);this._text=L$a}},L$a._isPassWordMode=function(){var L$a=this._style.password;return"prompt"in this&&this.prompt==this._text&&(L$a=!1),L$a},L$a._getPassWordTxt=function(L$a){var L$b;L$b="";for(var L$c=L$a.length;0<L$c;L$c--)L$b+="●";return L$b},L$a.renderText=function(L$a,L$b){var L$c=this.graphics;L$c.clear(!0);var L$d=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+(L$O.onIPhone&&laya.display.Text._fontFamilyMap[this.font]||this.font);L$O.context.font=L$d;var L$e=this.padding,L$f=L$e[3],L$g="left",L$h=this._lines,L$i=this.leading+this._charSize.height,L$j=this._currBitmapFont;L$j&&(L$i=this.leading+L$j.getMaxHeight());var L$k=L$e[0];if(!L$j&&0<this._width&&this._textWidth<=this._width&&("right"==this.align?(L$g="right",L$f=this._width-L$e[1]):"center"==this.align&&(L$g="center",L$f=.5*this._width+L$e[3]-L$e[1])),0<this._height){var L$l=this._textHeight>this._height?"top":this.valign;"middle"===L$l?L$k=.5*(this._height-L$b*L$i)+L$e[0]-L$e[2]:"bottom"===L$l&&(L$k=this._height-L$b*L$i-L$e[2])}var L$m=this._style;if(L$j&&L$j.autoScaleSize)var L$n=L$j.fontSize/this.fontSize;if(this._clipPoint)if(L$c.save(),L$j&&L$j.autoScaleSize){var L$o=0,L$p=0;L$o=this._width?this._width-L$e[3]-L$e[1]:this._textWidth,L$p=this._height?this._height-L$e[0]-L$e[2]:this._textHeight,L$o*=L$n,L$p*=L$n,L$c.clipRect(L$e[3],L$e[0],L$o,L$p)}else L$c.clipRect(L$e[3],L$e[0],this._width?this._width-L$e[3]-L$e[1]:this._textWidth,this._height?this._height-L$e[0]-L$e[2]:this._textHeight);var L$q=L$m.password;"prompt"in this&&this.prompt==this._text&&(L$q=!1);for(var L$r=0,L$s=0,L$t=Math.min(this._lines.length,L$b+L$a)||1,L$u=L$a;L$u<L$t;L$u++){var L$v,L$y=L$h[L$u];if(L$q){var L$z=L$y.length;L$y="";for(var L$A=L$z;0<L$A;L$A--)L$y+="●"}if(L$r=L$f-(this._clipPoint?this._clipPoint.x:0),L$s=L$k+L$i*L$u-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(L$g,L$r,L$s,L$u),L$j){var L$B=this.width;L$j.autoScaleSize&&(L$B=this.width*L$n),L$j.drawText(L$y,this,L$r,L$s,this.align,L$B)}else L$J.isWebGL?(this._words||(this._words=[]),(L$v=this._words.length>L$u-L$a?this._words[L$u-L$a]:new L$x).setText(L$y)):L$v=L$y,L$m.stroke?L$c.fillBorderText(L$v,L$r,L$s,L$d,this.color,L$m.strokeColor,L$m.stroke,L$g):L$c.fillText(L$v,L$r,L$s,L$d,this.color,L$g)}if(L$j&&L$j.autoScaleSize){var L$C=1/L$n;this.scale(L$C,L$C)}this._clipPoint&&L$c.restore(),this._startX=L$f,this._startY=L$k},L$a.drawUnderline=function(L$a,L$b,L$c,L$d){var L$e=this._lineWidths[L$d];switch(L$a){case"center":L$b-=L$e/2;break;case"right":L$b-=L$e}L$c+=this._charSize.height,this._graphics.drawLine(L$b,L$c,L$b+L$e,L$c,this.underlineColor||this.color,1)},L$a.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear(!0);L$O.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this._isPassWordMode()?this.parseLines(this._getPassWordTxt(this._text)):this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new L$A(0,0)):this._clipPoint=null;var L$a=this._lines.length;if(this.overflow!=L$n.VISIBLE){var L$b=this.overflow==L$n.HIDDEN?Math.floor:Math.ceil;L$a=Math.min(L$a,L$b((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var L$c=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(L$c,L$a),this.repaint()},L$a.evalTextSize=function(){var L$a,L$b=NaN;L$a=Math.max.apply(this,this._lineWidths),L$b=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],L$a==this._textWidth&&L$b==this._textHeight||(this._textWidth=L$a,this._textHeight=L$b,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},L$a.checkEnabledViewportOrNot=function(){return this.overflow==L$n.SCROLL&&(0<this._width&&this._textWidth>this._width||0<this._height&&this._textHeight>this._height)},L$a.changeText=function(L$a){this._text!==L$a&&(this.lang(L$a+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},L$a.parseLines=function(L$a){var L$b=this.wordWrap||this.overflow==L$n.HIDDEN;if(L$b)var L$c=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var L$d=L$$.contextMeasureText(L$n._testWord);L$J.isConchApp&&0===L$d.width&&0===L$d.height&&(L$d=L$$.contextMeasureText("W")),this._charSize.width=L$d.width,this._charSize.height=L$d.height||this.fontSize}for(var L$e=L$a.replace(/\r\n/g,"\n").split("\n"),L$f=0,L$g=L$e.length;L$f<L$g;L$f++){var L$h=L$e[L$f];L$b?this.parseLine(L$h,L$c):(this._lineWidths.push(this.getTextWidth(L$h)),this._lines.push(L$h))}},L$a.parseLine=function(L$a,L$b){L$O.context;var L$c,L$d=this._lines,L$e=0,L$f=NaN,L$g=NaN,L$h=0;if((L$f=this.getTextWidth(L$a))<=L$b)return L$d.push(L$a),void this._lineWidths.push(L$f);L$f=this._charSize.width,0==(L$e=Math.floor(L$b/L$f))&&(L$e=1),L$g=L$f=this.getTextWidth(L$a.substring(0,L$e));for(var L$i=L$e,L$j=L$a.length;L$i<L$j;L$i++)if(L$b<(L$g+=L$f=this.getTextWidth(L$a.charAt(L$i))))if(this.wordWrap){var L$k=L$a.substring(L$h,L$i);if(L$k.charCodeAt(L$k.length-1)<255?(L$c=/(?:\w|-)+$/.exec(L$k))&&(L$i=L$c.index+L$h,0==L$c.index?L$i+=L$k.length:L$k=L$a.substring(L$h,L$i)):L$n.RightToLeft&&(L$c=/([\u0600-\u06FF])+$/.exec(L$k))&&(L$i=L$c.index+L$h,0==L$c.index?L$i+=L$k.length:L$k=L$a.substring(L$h,L$i)),L$d.push(L$k),this._lineWidths.push(L$g-L$f),!((L$h=L$i)+L$e<L$j)){L$d.push(L$a.substring(L$h,L$j)),this._lineWidths.push(this.getTextWidth(L$d[L$d.length-1])),L$h=-1;break}L$i+=L$e,L$g=L$f=this.getTextWidth(L$a.substring(L$h,L$i)),L$i--}else if(this.overflow==L$n.HIDDEN)return L$d.push(L$a.substring(0,L$i)),void this._lineWidths.push(this.getTextWidth(L$d[L$d.length-1]));this.wordWrap&&-1!=L$h&&(L$d.push(L$a.substring(L$h,L$j)),this._lineWidths.push(this.getTextWidth(L$d[L$d.length-1])))},L$a.getTextWidth=function(L$a){return this._currBitmapFont?this._currBitmapFont.getTextWidth(L$a):L$$.contextMeasureText(L$a).width},L$a.getWordWrapWidth=function(){var L$a=this.padding,L$b=NaN;return(L$b=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(L$b=this.wordWrap?100:L$O.width),L$b<=0&&(L$b=100),L$b-L$a[3]-L$a[1]},L$a.getCharPoint=function(L$a,L$b){this._isChanged&&L$z.timer.runCallLater(this,this.typeset);for(var L$c=0,L$d=this._lines,L$e=0,L$f=0,L$g=L$d.length;L$f<L$g;L$f++){if(L$a<(L$c+=L$d[L$f].length)){var L$h=L$f;break}L$e=L$c}var L$i=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;L$O.context.font=L$i;var L$j=this.getTextWidth(this._text.substring(L$e,L$a));return(L$b||new L$A).setTo(this._startX+L$j-(this._clipPoint?this._clipPoint.x:0),this._startY+L$h*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},L$o(0,L$a,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(L$a){L$a!=this._width&&(L$z.superSet(L$la,this,"width",L$a),this.isChanged=!0)}),L$o(0,L$a,"textWidth",function(){return this._isChanged&&L$z.timer.runCallLater(this,this.typeset),this._textWidth}),L$o(0,L$a,"height",function(){return this._height?this._height:this.textHeight},function(L$a){L$a!=this._height&&(L$z.superSet(L$la,this,"height",L$a),this.isChanged=!0)}),L$o(0,L$a,"textHeight",function(){return this._isChanged&&L$z.timer.runCallLater(this,this.typeset),this._textHeight}),L$o(0,L$a,"padding",function(){return this._getCSSStyle().padding},function(L$a){this._getCSSStyle().padding=L$a,this.isChanged=!0}),L$o(0,L$a,"bold",function(){return this._getCSSStyle().bold},function(L$a){this._getCSSStyle().bold=L$a,this.isChanged=!0}),L$o(0,L$a,"text",function(){return this._text||""},function(L$a){this._text!==L$a&&(this.lang(L$a+""),this.isChanged=!0,this.event("change"))}),L$o(0,L$a,"color",function(){return this._getCSSStyle().color},function(L$a){this._getCSSStyle().color!=L$a&&(this._getCSSStyle().color=L$a,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),L$o(0,L$a,"font",function(){return this._getCSSStyle().fontFamily},function(L$a){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),L$n._bitmapFonts&&L$n._bitmapFonts[L$a]&&(this._currBitmapFont=L$n._bitmapFonts[L$a]),this._getCSSStyle().fontFamily=L$a,this.isChanged=!0}),L$o(0,L$a,"fontSize",function(){return this._getCSSStyle().fontSize},function(L$a){this._getCSSStyle().fontSize=L$a,this.isChanged=!0}),L$o(0,L$a,"italic",function(){return this._getCSSStyle().italic},function(L$a){this._getCSSStyle().italic=L$a,this.isChanged=!0}),L$o(0,L$a,"align",function(){return this._getCSSStyle().align},function(L$a){this._getCSSStyle().align=L$a,this.isChanged=!0}),L$o(0,L$a,"valign",function(){return this._getCSSStyle().valign},function(L$a){this._getCSSStyle().valign=L$a,this.isChanged=!0}),L$o(0,L$a,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(L$a){this._getCSSStyle().wordWrap=L$a,this.isChanged=!0}),L$o(0,L$a,"leading",function(){return this._getCSSStyle().leading},function(L$a){this._getCSSStyle().leading=L$a,this.isChanged=!0}),L$o(0,L$a,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(L$a){this._getCSSStyle().backgroundColor=L$a,this.isChanged=!0}),L$o(0,L$a,"borderColor",function(){return this._getCSSStyle().borderColor},function(L$a){this._getCSSStyle().borderColor=L$a,this.isChanged=!0}),L$o(0,L$a,"stroke",function(){return this._getCSSStyle().stroke},function(L$a){this._getCSSStyle().stroke=L$a,this.isChanged=!0}),L$o(0,L$a,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(L$a){this._getCSSStyle().strokeColor=L$a,this.isChanged=!0}),L$o(0,L$a,"isChanged",null,function(L$a){this._isChanged!==L$a&&(this._isChanged=L$a)&&L$z.timer.callLater(this,this.typeset)}),L$o(0,L$a,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(L$a){if(!(this.overflow!=L$n.SCROLL||this.textWidth<this._width)&&this._clipPoint){L$a=L$a<this.padding[3]?this.padding[3]:L$a;var L$b=this._textWidth-this._width;L$a=L$b<L$a?L$b:L$a;var L$c=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=L$a,this.renderText(this._lastVisibleLineIndex,L$c)}}),L$o(0,L$a,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(L$a){if(!(this.overflow!=L$n.SCROLL||this.textHeight<this._height)&&this._clipPoint){L$a=L$a<this.padding[0]?this.padding[0]:L$a;var L$b=this._textHeight-this._height,L$c=(L$a=L$b<L$a?L$b:L$a)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=L$c;var L$d=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=L$a,this.renderText(L$c,L$d)}}),L$o(0,L$a,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),L$o(0,L$a,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),L$o(0,L$a,"lines",function(){return this._isChanged&&this.typeset(),this._lines}),L$o(0,L$a,"underlineColor",function(){return this._underlineColor},function(L$a){this._underlineColor=L$a,this._isChanged=!0,this.typeset()}),L$n.registerBitmapFont=function(L$a,L$b){L$n._bitmapFonts||(L$n._bitmapFonts={}),L$n._bitmapFonts[L$a]=L$b},L$n.unregisterBitmapFont=function(L$a,L$b){if(void 0===L$b&&(L$b=!0),L$n._bitmapFonts&&L$n._bitmapFonts[L$a]){var L$c=L$n._bitmapFonts[L$a];L$b&&L$c.destroy(),delete L$n._bitmapFonts[L$a]}},L$n.setTextRightToLeft=function(){var L$a;(L$a=L$O.canvas.source.style).display="none",L$a.position="absolute",L$a.direction="rtl",L$J._mainCanvas.source.style.direction="rtl",laya.display.Text.RightToLeft=!0,L$O.document.body.appendChild(L$O.canvas.source)},L$n.supportFont=function(L$a){L$O.context.font="10px sans-serif";var L$b=L$$.contextMeasureText("abcji").width;L$O.context.font="10px "+L$a;var L$c=L$$.contextMeasureText("abcji").width;return console.log(L$b,L$c),L$b!==L$c},L$n._testWord="游",L$n.langPacks=null,L$n.VISIBLE="visible",L$n.SCROLL="scroll",L$n.HIDDEN="hidden",L$n.CharacterCache=!0,L$n.RightToLeft=!1,L$n._bitmapFonts=null,L$i(L$n,["_fontFamilyMap",function(){return this._fontFamilyMap={"报隶":"报隶-简","黑体":"黑体-简","楷体":"楷体-简","兰亭黑":"兰亭黑-简","隶变":"隶变-简","凌慧体":"凌慧体-简","翩翩体":"翩翩体-简","苹方":"苹方-简","手札体":"手札体-简","宋体":"宋体-简","娃娃体":"娃娃体-简","魏碑":"魏碑-简","行楷":"行楷-简","雅痞":"雅痞-简","圆体":"圆体-简"}}]),L$n}(L$la),L$ra=function(L$l){function L$g(){this.focus=null,this.designWidth=0,this.designHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this.screenAdaptationEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._frameStartTime=NaN,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,this._frameRate="fast",L$g.__super.call(this),this.offset=new L$A,this._canvasTransform=new L$G,this._previousOrientation=L$O.window.orientation;var L$b=this;this.transform=L$G.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var L$a=L$O.window,L$c=this;L$a.addEventListener("focus",function(){L$b._isFocused=!0,L$c.event("focus"),L$c.event("focuschange")}),L$a.addEventListener("blur",function(){L$b._isFocused=!1,L$c.event("blur"),L$c.event("focuschange"),L$c._isInputting()&&(L$va.inputElement.target.focus=!1)});var L$d="visibilityState",L$e="visibilitychange",L$f=L$a.document;void 0!==L$f.hidden?(L$e="visibilitychange",L$d="visibilityState"):void 0!==L$f.mozHidden?(L$e="mozvisibilitychange",L$d="mozVisibilityState"):void 0!==L$f.msHidden?(L$e="msvisibilitychange",L$d="msVisibilityState"):void 0!==L$f.webkitHidden&&(L$e="webkitvisibilitychange",L$d="webkitVisibilityState"),L$a.document.addEventListener(L$e,function(){"hidden"==L$O.document[L$d]?L$c._setStageVisible(!1):L$c._setStageVisible(!0)}),L$a.document.addEventListener("qbrowserVisibilityChange",function(L$a){L$c._setStageVisible(!L$a.hidden)}),L$a.addEventListener("resize",function(){var L$a=L$O.window.orientation;null!=L$a&&L$a!=L$b._previousOrientation&&L$c._isInputting()&&(L$va.inputElement.target.focus=!1),L$b._previousOrientation=L$a,L$c._isInputting()||L$c._resetCanvas()}),L$a.addEventListener("orientationchange",function(L$a){L$c._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),L$O.onMobile&&this.on("mousedown",this,this._onmouseMove)}L$k(L$g,"laya.display.Stage",L$l);var L$a=L$g.prototype;return L$a._setStageVisible=function(L$a){this._isVisibility!=L$a&&(this._isVisibility=L$a,this._isVisibility||this._isInputting()&&(L$va.inputElement.target.focus=!1),this.event("visibilitychange"))},L$a._isInputting=function(){return L$O.onMobile&&L$va.isInputting},L$a._changeCanvasSize=function(){this.setScreenSize(L$O.clientWidth*L$O.pixelRatio,L$O.clientHeight*L$O.pixelRatio)},L$a._resetCanvas=function(){if(this.screenAdaptationEnabled){var L$a=L$J._mainCanvas;L$a.source.style;L$a.size(1,1),L$z.timer.once(100,this,this._changeCanvasSize)}},L$a.setScreenSize=function(L$a,L$b){var L$c=!1;if("none"!==this._screenMode&&(L$c=(L$a/L$b<1?"vertical":"horizontal")!==this._screenMode)){var L$d=L$b;L$b=L$a,L$a=L$d}this.canvasRotation=L$c;var L$e=L$J._mainCanvas,L$f=L$e.source.style,L$g=this._canvasTransform.identity(),L$h=this._scaleMode,L$i=L$a/this.designWidth,L$j=L$b/this.designHeight,L$k=this.designWidth,L$l=this.designHeight,L$m=L$a,L$n=L$b,L$o=L$O.pixelRatio;switch(this._width=this.designWidth,this._height=this.designHeight,L$h){case"noscale":L$i=L$j=1,L$m=this.designWidth,L$n=this.designHeight;break;case"showall":L$i=L$j=Math.min(L$i,L$j),L$k=L$m=Math.round(this.designWidth*L$i),L$l=L$n=Math.round(this.designHeight*L$j);break;case"noborder":L$i=L$j=Math.max(L$i,L$j),L$m=Math.round(this.designWidth*L$i),L$n=Math.round(this.designHeight*L$j);break;case"full":L$i=L$j=1,this._width=L$k=L$a,this._height=L$l=L$b;break;case"fixedwidth":L$j=L$i,this._height=L$l=Math.round(L$b/L$i);break;case"fixedheight":L$i=L$j,this._width=L$k=Math.round(L$a/L$j);break;case"fixedauto":L$a/L$b<this.designWidth/this.designHeight?(L$j=L$i,this._height=L$l=Math.round(L$b/L$i)):(L$i=L$j,this._width=L$k=Math.round(L$a/L$j))}this._height=this._height+1&2147483646,this._width=this._width+1&2147483646,L$k=L$k+1&2147483646,L$l=L$l+1&2147483646,this.conchModel&&this.conchModel.size(this._width,this._height),L$i*=this.scaleX,L$j*=this.scaleY,1===L$i&&1===L$j?this.transform.identity():(this.transform.a=this._formatData(L$i/(L$m/L$k)),this.transform.d=this._formatData(L$j/(L$n/L$l)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),L$e.size(L$k,L$l),L$F.changeWebGLSize(L$k,L$l),L$g.scale(L$m/L$k/L$o,L$n/L$l/L$o),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=(L$a-L$m)/L$o:this.offset.x=.5*(L$a-L$m)/L$o,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=(L$b-L$n)/L$o:this.offset.y=.5*(L$b-L$n)/L$o,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),L$g.translate(this.offset.x,this.offset.y),this.canvasDegree=0,L$c&&("horizontal"===this._screenMode?(L$g.rotate(Math.PI/2),L$g.translate(L$b/L$o,0),this.canvasDegree=90):(L$g.rotate(-Math.PI/2),L$g.translate(0,L$a/L$o),this.canvasDegree=-90)),L$g.a=this._formatData(L$g.a),L$g.d=this._formatData(L$g.d),L$g.tx=this._formatData(L$g.tx),L$g.ty=this._formatData(L$g.ty),L$f.transformOrigin=L$f.webkitTransformOrigin=L$f.msTransformOrigin=L$f.mozTransformOrigin=L$f.oTransformOrigin="0px 0px 0px",L$f.transform=L$f.webkitTransform=L$f.msTransform=L$f.mozTransform=L$f.oTransform="matrix("+L$g.toString()+")",L$g.translate(parseInt(L$f.left)||0,parseInt(L$f.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},L$a._formatData=function(L$a){return Math.abs(L$a)<1e-6?0:Math.abs(1-L$a)<.001?0<L$a?1:-1:L$a},L$a.getMousePoint=function(){return L$A.TEMP.setTo(this.mouseX,this.mouseY)},L$a.repaint=function(){this._repaint=1},L$a.parentRepaint=function(){},L$a._loop=function(){return this.render(L$J.context,0,0),!0},L$a._onmouseMove=function(L$a){this._mouseMoveTime=L$O.now()},L$a.getTimeFromFrameStart=function(){return L$O.now()-this._frameStartTime},L$a.render=function(L$a,L$b,L$c){if("sleep"===this._frameRate&&!L$J.isConchApp){var L$d=L$O.now();if(!(1e3<=L$d-this._frameStartTime))return this._renderCount++,void(this._renderCount%2==0&&(L$X.loopCount++,L$p.instance.runEvent(),L$z.timer._update()));this._frameStartTime=L$d}if(this._renderCount++,L$J.isFlash&&this.repaint(),this._style.visible){this._frameStartTime=L$O.now();var L$e="slow"!==("mouse"===this._frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this._frameRate),L$f=this._renderCount%2==0;if(L$X.renderSlow=!L$e,L$e||L$f||L$J.isConchApp){var L$g;L$X.loopCount++,L$p.instance.runEvent(),L$z.timer._update(),L$F.update3DLoop();var L$h=0,L$i=0;if(L$J.isConchNode)for(L$h=0,L$i=this._scenes.length;L$h<L$i;L$h++)(L$g=this._scenes[L$h])&&L$g._updateSceneConch();else for(L$h=0,L$i=this._scenes.length;L$h<L$i;L$h++)(L$g=this._scenes[L$h])&&L$g._updateScene();if(L$J.isConchNode){var L$j=L$la.CustomList;for(L$h=0,L$i=L$j.length;L$h<L$i;L$h++){var L$k=L$j[L$h];L$k.customRender(L$k.customContext,0,0)}return}}L$J.isConchNode||this.renderingEnabled&&(L$e||!L$f||L$J.isConchWebGL)&&(L$J.isWebGL?L$J.WebGL.mainContext&&!L$J.WebGL.mainContext.isContextLost()&&(L$a.clear(),L$l.prototype.render.call(this,L$a,L$b,L$c),L$X._show&&L$X._sp&&L$X._sp.render(L$a,L$b,L$c),L$F.clear(this._bgColor),L$F.beginFlush(),L$a.flush(),L$F.endFinish(),L$_.instance&&L$_.getInstance().endDispose()):(L$F.clear(this._bgColor),L$l.prototype.render.call(this,L$a,L$b,L$c),L$X._show&&L$X._sp&&L$X._sp.render(L$a,L$b,L$c)))}else this._renderCount%5==0&&(L$X.loopCount++,L$p.instance.runEvent(),L$z.timer._update())},L$a._requestFullscreen=function(){var L$a=L$O.document.documentElement;L$a.requestFullscreen?L$a.requestFullscreen():L$a.mozRequestFullScreen?L$a.mozRequestFullScreen():L$a.webkitRequestFullscreen?L$a.webkitRequestFullscreen():L$a.msRequestFullscreen&&L$a.msRequestFullscreen()},L$a._fullScreenChanged=function(){L$z.stage.event("fullscreenchange")},L$a.exitFullscreen=function(){var L$a=L$O.document;L$a.exitFullscreen?L$a.exitFullscreen():L$a.mozCancelFullScreen?L$a.mozCancelFullScreen():L$a.webkitExitFullscreen&&L$a.webkitExitFullscreen()},L$o(0,L$a,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),L$o(0,L$a,"desginHeight",function(){return console.debug("desginHeight已经弃用，请使用designHeight代替"),this.designHeight}),L$o(0,L$a,"frameRate",function(){return this._frameRate},function(L$a){if(this._frameRate=L$a,L$J.isConchApp)switch(this._frameRate){case"slow":L$O.window.conch&&L$O.window.conchConfig.setSlowFrame&&L$O.window.conchConfig.setSlowFrame(!0);break;case"fast":L$O.window.conch&&L$O.window.conchConfig.setSlowFrame&&L$O.window.conchConfig.setSlowFrame(!1);break;case"mouse":L$O.window.conch&&L$O.window.conchConfig.setMouseFrame&&L$O.window.conchConfig.setMouseFrame(2e3);break;case"sleep":L$O.window.conch&&L$O.window.conchConfig.setLimitFPS&&L$O.window.conchConfig.setLimitFPS(1);break;default:throw new Error("Stage:frameRate invalid.")}}),L$o(0,L$a,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),L$o(0,L$a,"width",L$l.prototype._$get_width,function(L$a){this.designWidth=L$a,L$z.superSet(L$la,this,"width",L$a),L$z.timer.callLater(this,this._changeCanvasSize)}),L$o(0,L$a,"alignH",function(){return this._alignH},function(L$a){this._alignH=L$a,L$z.timer.callLater(this,this._changeCanvasSize)}),L$o(0,L$a,"isFocused",function(){return this._isFocused}),L$o(0,L$a,"height",L$l.prototype._$get_height,function(L$a){this.designHeight=L$a,L$z.superSet(L$la,this,"height",L$a),L$z.timer.callLater(this,this._changeCanvasSize)}),L$o(0,L$a,"transform",function(){return this._tfChanged&&this._adjustTransform(),this._transform=this._transform||L$G.create()},L$l.prototype._$set_transform),L$o(0,L$a,"isVisibility",function(){return this._isVisibility}),L$o(0,L$a,"desginWidth",function(){return console.debug("desginWidth已经弃用，请使用designWidth代替"),this.designWidth}),L$o(0,L$a,"scaleMode",function(){return this._scaleMode},function(L$a){this._scaleMode=L$a,L$z.timer.callLater(this,this._changeCanvasSize)}),L$o(0,L$a,"alignV",function(){return this._alignV},function(L$a){this._alignV=L$a,L$z.timer.callLater(this,this._changeCanvasSize)}),L$o(0,L$a,"bgColor",function(){return this._bgColor},function(L$a){this._bgColor=L$a,this.conchModel&&this.conchModel.bgColor(L$a),L$J.isWebGL&&(L$a?L$g._wgColor=L$S.create(L$a)._color:L$O.onMiniGame||(L$g._wgColor=null)),L$O.onLimixiu?L$g._wgColor=L$S.create(L$a)._color:L$J.canvas.style.background=L$a||"none"}),L$o(0,L$a,"mouseX",function(){return Math.round(L$p.instance.mouseX/this.clientScaleX)}),L$o(0,L$a,"mouseY",function(){return Math.round(L$p.instance.mouseY/this.clientScaleY)}),L$o(0,L$a,"screenMode",function(){return this._screenMode},function(L$a){this._screenMode=L$a}),L$o(0,L$a,"visible",L$l.prototype._$get_visible,function(L$a){this.visible!==L$a&&(L$z.superSet(L$la,this,"visible",L$a),L$J._mainCanvas.source.style.visibility=L$a?"visible":"hidden")}),L$o(0,L$a,"fullScreenEnabled",null,function(L$a){var L$b=L$O.document,L$c=L$J.canvas;L$a?(L$c.addEventListener("mousedown",this._requestFullscreen),L$c.addEventListener("touchstart",this._requestFullscreen),L$b.addEventListener("fullscreenchange",this._fullScreenChanged),L$b.addEventListener("mozfullscreenchange",this._fullScreenChanged),L$b.addEventListener("webkitfullscreenchange",this._fullScreenChanged),L$b.addEventListener("msfullscreenchange",this._fullScreenChanged)):(L$c.removeEventListener("mousedown",this._requestFullscreen),L$c.removeEventListener("touchstart",this._requestFullscreen),L$b.removeEventListener("fullscreenchange",this._fullScreenChanged),L$b.removeEventListener("mozfullscreenchange",this._fullScreenChanged),L$b.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),L$b.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),L$g.SCALE_NOSCALE="noscale",L$g.SCALE_EXACTFIT="exactfit",L$g.SCALE_SHOWALL="showall",L$g.SCALE_NOBORDER="noborder",L$g.SCALE_FULL="full",L$g.SCALE_FIXED_WIDTH="fixedwidth",L$g.SCALE_FIXED_HEIGHT="fixedheight",L$g.SCALE_FIXED_AUTO="fixedauto",L$g.ALIGN_LEFT="left",L$g.ALIGN_RIGHT="right",L$g.ALIGN_CENTER="center",L$g.ALIGN_TOP="top",L$g.ALIGN_MIDDLE="middle",L$g.ALIGN_BOTTOM="bottom",L$g.SCREEN_NONE="none",L$g.SCREEN_HORIZONTAL="horizontal",L$g.SCREEN_VERTICAL="vertical",L$g.FRAME_FAST="fast",L$g.FRAME_SLOW="slow",L$g.FRAME_MOUSE="mouse",L$g.FRAME_SLEEP="sleep",L$g.FRAME_MOUSE_THREDHOLD=2e3,L$i(L$g,["_wgColor",function(){return this._wgColor=[0,0,0,1]}]),L$g}(L$la),L$sa=(function(L$a){function L$b(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,L$b.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}L$k(L$b,"laya.media.SoundNode",L$la);var L$c=L$b.prototype;L$c._onParentChange=function(){this.target=this.parent},L$c.play=function(L$a,L$b){void 0===L$a&&(L$a=1),isNaN(L$a)&&(L$a=1),this.url&&(this.stop(),this._channel=L$E.playSound(this.url,L$a,null,L$b))},L$c.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},L$c._setPlayAction=function(L$a,L$b,L$c,L$d){void 0===L$d&&(L$d=!0),this[L$c]&&L$a&&(L$d?L$a.on(L$b,this,this[L$c]):L$a.off(L$b,this,this[L$c]))},L$c._setPlayActions=function(L$a,L$b,L$c,L$d){if(void 0===L$d&&(L$d=!0),L$a&&L$b){var L$e,L$f=L$b.split(","),L$g=0;for(L$e=L$f.length,L$g=0;L$g<L$e;L$g++)this._setPlayAction(L$a,L$f[L$g],L$c,L$d)}},L$o(0,L$c,"playEvent",null,function(L$a){(this._playEvents=L$a)&&this._tar&&this._setPlayActions(this._tar,L$a,"play")}),L$o(0,L$c,"target",null,function(L$a){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=L$a,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),L$o(0,L$c,"stopEvent",null,function(L$a){(this._stopEvents=L$a)&&this._tar&&this._setPlayActions(this._tar,L$a,"stop")})}(),function(L$a){function L$b(){this._src=null,this._onload=null,this._onerror=null,L$b.__super.call(this)}L$k(L$b,"laya.resource.FileBitmap",L$oa);var L$c=L$b.prototype;return L$o(0,L$c,"src",function(){return this._src},function(L$a){this._src=L$a}),L$o(0,L$c,"onload",null,function(L$a){}),L$o(0,L$c,"onerror",null,function(L$a){}),L$b}()),L$ta=function(L$a){function L$c(L$a,L$b){this._is2D=!1,L$c.__super.call(this);var L$d=this;if(this._source=this,"2D"===L$a||"AUTO"===L$a&&!L$J.isWebGL){this._is2D=!0,this._source=L$b||L$O.createElement("canvas"),this._w=this._source.width,this._h=this._source.height;var L$e=this;L$e.getContext=function(L$a,L$b){if(L$d._ctx)return L$d._ctx;var L$c=L$d._ctx=L$d._source.getContext(L$a,L$b);return L$c&&(L$c._canvas=L$e,L$J.isFlash||L$O.onLimixiu||(L$c.size=function(L$a,L$b){})),L$c}}this.uri="HTMLCanvas_"+this.id,this.lock=!0}L$k(L$c,"laya.resource.HTMLCanvas",L$oa);var L$b=L$c.prototype;return L$b.clear=function(){this._ctx&&this._ctx.clear()},L$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},L$b.release=function(){},L$b._setContext=function(L$a){this._ctx=L$a},L$b.getContext=function(L$a,L$b){return this._ctx?this._ctx:this._ctx=L$c._createContext(this)},L$b.getMemSize=function(){return 0},L$b.size=function(L$a,L$b){(this._w!=L$a||this._h!=L$b||this._source&&(this._source.width!=L$a||this._source.height!=L$b))&&(this._w=L$a,this._h=L$b,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(L$a,L$b),this._source&&(this._source.height=L$b,this._source.width=L$a))},L$b.getCanvas=function(){return this._source},L$b.toBase64=function(L$a,L$b,L$c){if(this._source)if(L$J.isConchApp&&this._source.toBase64)this._source.toBase64(L$a,L$b,L$c);else{var L$d=this._source.toDataURL(L$a,L$b);L$c.call(this,L$d)}},L$o(0,L$b,"context",function(){return this._ctx}),L$o(0,L$b,"asBitmap",null,function(L$a){}),L$c.create=function(L$a,L$b){return new L$c(L$a,L$b)},L$c.TYPE2D="2D",L$c.TYPE3D="3D",L$c.TYPEAUTO="AUTO",L$c._createContext=null,L$c}(),L$ua=(function(L$a){function L$i(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){throw L$i.__super.call(this),new Error("不允许new！")}L$k(L$i,"laya.resource.HTMLSubImage",L$oa),L$i.create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){return void 0===L$h&&(L$h=!1),new L$i(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h)}}(),function(L$a){function L$l(){this._frames=null,this._url=null,L$l.__super.call(this),this._setControlNode(this)}L$k(L$l,"laya.display.Animation",L$a);var L$b=L$l.prototype;L$b.destroy=function(L$a){void 0===L$a&&(L$a=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,L$a),this._frames=null,this._labels=null},L$b.play=function(L$a,L$b,L$c,L$d){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=!0),void 0===L$c&&(L$c=""),void 0===L$d&&(L$d=!0),L$c&&this._setFramesFromCache(L$c,L$d),this._isPlaying=!0,this.index="string"==typeof L$a?this._getFrameByLabel(L$a):L$a,this.loop=L$b,this._actionName=L$c,this._isReverse=1==this.wrapMode,this._frames&&0<this.interval&&this.timerLoop(this.interval,this,this._frameLoop,null,!0,!0)},L$b._setFramesFromCache=function(L$a,L$b){var L$c;return void 0===L$b&&(L$b=!1),this._url&&(L$a=this._url+"#"+L$a),L$a&&L$l.framesMap[L$a]?((L$c=L$l.framesMap[L$a])instanceof Array?(this._frames=L$l.framesMap[L$a],this._count=this._frames.length):(L$c.nodeRoot&&(L$l.framesMap[L$a]=this._parseGraphicAnimationByData(L$c),L$c=L$l.framesMap[L$a]),this._frames=L$c.frames,this._count=this._frames.length,this._frameRateChanged||(this._interval=L$c.interval),this._labels=this._copyLabels(L$c.labels)),!0):(L$b&&console.log("ani not found:",L$a),!1)},L$b._copyLabels=function(L$a){if(!L$a)return null;var L$b,L$c;for(L$c in L$b={},L$a)L$b[L$c]=L$$.copyArray([],L$a[L$c]);return L$b},L$b._frameLoop=function(){this._style.visible&&.01<this._style.alpha&&L$a.prototype._frameLoop.call(this)},L$b._displayToIndex=function(L$a){this._frames&&(this.graphics=this._frames[L$a])},L$b.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},L$b.loadImages=function(L$a,L$b){return void 0===L$b&&(L$b=""),this._url="",this._setFramesFromCache(L$b)||(this.frames=L$l.framesMap[L$b]?L$l.framesMap[L$b]:L$l.createFrames(L$a,L$b)),this},L$b.loadAtlas=function(L$b,L$c,L$d){void 0===L$d&&(L$d=""),this._url="";var L$e=this;function L$a(L$a){L$b===L$a&&(L$e.frames=L$l.framesMap[L$d]?L$l.framesMap[L$d]:L$l.createFrames(L$b,L$d),L$c&&L$c.run())}return L$e._setFramesFromCache(L$d)||(L$ha.getAtlas(L$b)?L$a(L$b):L$z.loader.load(L$b,L$s.create(null,L$a,[L$b]),null,"atlas")),this},L$b.loadAnimation=function(L$a,L$b,L$c){this._url=L$a;return this._actionName||(this._actionName=""),this._setFramesFromCache("")?(this._setFramesFromCache(this._actionName,!0),this.index=0,L$b&&L$b.run()):!L$c||L$ha.getAtlas(L$c)?this._loadAnimationData(L$a,L$b,L$c):L$z.loader.load(L$c,L$s.create(this,this._loadAnimationData,[L$a,L$b,L$c]),null,"atlas"),this},L$b._loadAnimationData=function(L$h,L$i,L$a){var L$j=this;if(!L$a||L$ha.getAtlas(L$a)){var L$k=this;L$ha.getRes(L$h)?L$b(L$h):L$z.loader.load(L$h,L$s.create(null,L$b,[L$h]),null,"json"),L$ha.clearRes(L$h)}else console.warn("atlas load fail:"+L$a);function L$b(L$a){if(L$ha.getRes(L$a)&&L$h===L$a){var L$b;if(L$l.framesMap[L$h+"#"])L$k._setFramesFromCache(L$j._actionName,!0),L$j.index=0,L$j._checkResumePlaying();else{var L$c=L$k._parseGraphicAnimation(L$ha.getRes(L$h));if(!L$c)return;var L$d,L$e=L$c.animationList,L$f=0,L$g=L$e.length;for(L$f=0;L$f<L$g;L$f++)L$b=L$e[L$f],L$l.framesMap[L$h+"#"+L$b.name]=L$b,L$d||(L$d=L$b);L$d&&(L$l.framesMap[L$h+"#"]=L$d,L$k._setFramesFromCache(L$j._actionName,!0),L$j.index=0),L$j._checkResumePlaying()}L$i&&L$i.run()}}},L$b._parseGraphicAnimation=function(L$a){return L$za.parseAnimationData(L$a)},L$b._parseGraphicAnimationByData=function(L$a){return L$za.parseAnimationByData(L$a)},L$o(0,L$b,"frames",function(){return this._frames},function(L$a){(this._frames=L$a)&&(this._count=L$a.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),L$o(0,L$b,"autoPlay",null,function(L$a){L$a?this.play():this.stop()}),L$o(0,L$b,"source",null,function(L$a){-1<L$a.indexOf(".ani")?this.loadAnimation(L$a):-1<L$a.indexOf(".json")||-1<L$a.indexOf("als")||-1<L$a.indexOf("atlas")?this.loadAtlas(L$a):this.loadImages(L$a.split(","))}),L$o(0,L$b,"autoAnimation",null,function(L$a){this.play(0,!0,L$a,!1)}),L$l.createFrames=function(L$a,L$b){var L$c,L$d,L$e=0,L$f=0;if("string"==typeof L$a){var L$g=L$ha.getAtlas(L$a);if(L$g&&L$g.length)for(L$c=[],L$e=0,L$f=L$g.length;L$e<L$f;L$e++)(L$d=new L$F.createGraphics).drawTexture(L$ha.getRes(L$g[L$e]),0,0),L$c.push(L$d)}else if(L$a instanceof Array)for(L$c=[],L$e=0,L$f=L$a.length;L$e<L$f;L$e++)(L$d=new L$F.createGraphics).loadImage(L$a[L$e],0,0),L$c.push(L$d);return L$b&&(L$l.framesMap[L$b]=L$c),L$c},L$l.clearCache=function(L$a){var L$b,L$c=L$l.framesMap,L$d=L$a+"#";for(L$b in L$c)L$b!==L$a&&0!=L$b.indexOf(L$d)||delete L$l.framesMap[L$b]},L$l.framesMap={}}(L$pa),function(L$a){function L$f(){this._targetDic=null,this._animationData=null,this._animationNewFrames=null,L$f.__super.call(this),null==L$f._sortIndexFun&&(L$f._sortIndexFun=L$y.sortByKey("index",!1,!0))}L$k(L$f,"laya.display.FrameAnimation",L$a);var L$b=L$f.prototype;return L$b._setUp=function(L$a,L$b){this._labels=null,this._animationNewFrames=null,this._targetDic=L$a,this._animationData=L$b,this.interval=1e3/L$b.frameRate,L$b.parsed?(this._count=L$b.count,this._labels=L$b.labels,this._animationNewFrames=L$b.animationNewFrames):(this._animationNewFrames=[],this._calculateDatas()),L$b.parsed=!0,L$b.labels=this._labels,L$b.count=this._count,L$b.animationNewFrames=this._animationNewFrames},L$b.clear=function(){L$a.prototype.clear.call(this),this._targetDic=null,this._animationData=null},L$b._displayToIndex=function(L$a){if(this._animationData){L$a<0&&(L$a=0),L$a>this._count&&(L$a=this._count);var L$b=this._animationData.nodes,L$c=0,L$d=L$b.length;for(L$c=0;L$c<L$d;L$c++)this._displayNodeToFrame(L$b[L$c],L$a)}},L$b._displayNodeToFrame=function(L$a,L$b,L$c){L$c||(L$c=this._targetDic);var L$d=L$c[L$a.target];if(L$d){var L$e,L$f,L$g,L$h=L$a.frames,L$i=L$a.keys,L$j=0,L$k=L$i.length;for(L$j=0;L$j<L$k;L$j++)L$g=(L$f=L$h[L$e=L$i[L$j]]).length>L$b?L$f[L$b]:L$f[L$f.length-1],L$d[L$e]=L$g}},L$b._calculateDatas=function(){if(this._animationData){var L$a,L$b=this._animationData.nodes,L$c=0,L$d=L$b.length;for(L$c=this._count=0;L$c<L$d;L$c++)L$a=L$b[L$c],this._calculateNodeKeyFrames(L$a);this._count+=1}},L$b._calculateNodeKeyFrames=function(L$a){var L$b,L$c,L$d=L$a.keyframes,L$e=L$a.target;for(L$b in L$a.frames||(L$a.frames={}),L$a.keys?L$a.keys.length=0:L$a.keys=[],L$a.initValues||(L$a.initValues={}),L$d)L$c=L$d[L$b],L$a.frames[L$b]||(L$a.frames[L$b]=[]),this._targetDic&&this._targetDic[L$e]&&(L$a.initValues[L$b]=this._targetDic[L$e][L$b]),L$c.sort(L$f._sortIndexFun),L$a.keys.push(L$b),this._calculateNodePropFrames(L$c,L$a.frames[L$b],L$b,L$e)},L$b.resetToInitState=function(){if(this._targetDic&&this._animationData){var L$a,L$b,L$c=this._animationData.nodes,L$d=0,L$e=L$c.length;for(L$d=0;L$d<L$e;L$d++)if(L$b=(L$a=L$c[L$d]).initValues){var L$f,L$g=this._targetDic[L$a.target];if(L$g)for(L$f in L$b)L$g[L$f]=L$b[L$f]}}},L$b._calculateNodePropFrames=function(L$a,L$b,L$c,L$d){var L$e=0,L$f=L$a.length-1;if(0<L$f){for(L$b.length=L$a[L$f].index+1,L$e=0;L$e<L$f;L$e++)this._dealKeyFrame(L$a[L$e]),this._calculateFrameValues(L$a[L$e],L$a[L$e+1],L$b);this._dealKeyFrame(L$a[L$e])}0==L$f&&(L$b[L$a[0].index]=L$a[0].value,this._animationNewFrames&&(this._animationNewFrames[L$a[0].index]=!0))},L$b._dealKeyFrame=function(L$a){L$a.label&&""!=L$a.label&&this.addLabel(L$a.label,L$a.index)},L$b._calculateFrameValues=function(L$a,L$b,L$c){var L$d,L$e=0,L$f=L$a.index,L$g=L$b.index,L$h=L$a.value,L$i=L$b.value-L$a.value,L$j=L$g-L$f;if(L$g>this._count&&(this._count=L$g),L$a.tween)for(null==(L$d=L$U[L$a.tweenMethod])&&(L$d=L$U.linearNone),L$e=L$f;L$e<L$g;L$e++)L$c[L$e]=L$d(L$e-L$f,L$h,L$i,L$j),this._animationNewFrames&&(this._animationNewFrames[L$e]=!0);else for(L$e=L$f;L$e<L$g;L$e++)L$c[L$e]=L$h;this._animationNewFrames&&(this._animationNewFrames[L$a.index]=!0,this._animationNewFrames[L$b.index]=!0),L$c[L$b.index]=L$b.value},L$f._sortIndexFun=null,L$f}(L$pa)),L$va=function(L$b){function L$e(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",L$e.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=L$qa.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}L$k(L$e,"laya.display.Input",L$b);var L$a=L$e.prototype;return L$a.setSelection=function(L$a,L$b){this.focus=!0,laya.display.Input.inputElement.selectionStart=L$a,laya.display.Input.inputElement.selectionEnd=L$b},L$a._onUnDisplay=function(L$a){this.focus=!1},L$a._onMouseDown=function(L$a){this.focus=!0},L$a._syncInputTransform=function(){var L$a=this.nativeInput,L$b=L$$.getTransformRelativeToWindow(this,this.padding[3],this.padding[0]),L$c=this._width-this.padding[1]-this.padding[3],L$d=this._height-this.padding[0]-this.padding[2];L$J.isConchApp?(L$a.setScale(L$b.scaleX,L$b.scaleY),L$a.setSize(L$c,L$d),L$a.setPos(L$b.x,L$b.y)):(L$e.inputContainer.style.transform=L$e.inputContainer.style.webkitTransform="scale("+L$b.scaleX+","+L$b.scaleY+") rotate("+L$z.stage.canvasDegree+"deg)",L$a.style.width=L$c+"px",L$a.style.height=L$d+"px",L$e.inputContainer.style.left=L$b.x+"px",L$e.inputContainer.style.top=L$b.y+"px")},L$a.select=function(){this.nativeInput&&this.nativeInput.select&&this.nativeInput.select()},L$a._setInputMethod=function(){L$e.input.parentElement&&L$e.inputContainer.removeChild(L$e.input),L$e.area.parentElement&&L$e.inputContainer.removeChild(L$e.area),L$e.inputElement=this._multiline?L$e.area:L$e.input,L$e.inputContainer.appendChild(L$e.inputElement),L$qa.RightToLeft&&(L$e.inputElement.style.direction="rtl")},L$a._focusIn=function(){laya.display.Input.isInputting=!0;var L$a=this.nativeInput;this._focus=!0;var L$b=L$a.style;L$b.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),L$a.readOnly=!this._editable,L$J.isConchApp&&(L$a.setType(this._type),L$a.setForbidEdit(!this._editable)),L$a.maxLength=this._maxChars;this.padding;if(L$a.type=this._type,L$a.value=this._content,L$a.placeholder=this._prompt,L$z.stage.off("keydown",this,this._onKeyDown),L$z.stage.on("keydown",this,this._onKeyDown),(L$z.stage.focus=this).event("focus"),L$O.onPC&&L$a.focus(),!L$O.onMiniGame){this._text;this._text=null}this.typeset(),L$a.setColor(this._originColor),L$a.setFontSize(this.fontSize),L$a.setFontFace(L$O.onIPhone&&L$qa._fontFamilyMap[this.font]||this.font),L$J.isConchApp&&L$a.setMultiAble&&L$a.setMultiAble(this._multiline),L$b.lineHeight=this.leading+this.fontSize+"px",L$b.fontStyle=this.italic?"italic":"normal",L$b.fontWeight=this.bold?"bold":"normal",L$b.textAlign=this.align,L$b.padding="0 0",this._syncInputTransform(),!L$J.isConchApp&&L$O.onPC&&L$z.timer.frameLoop(1,this,this._syncInputTransform)},L$a._setPromptColor=function(){(L$e.promptStyleDOM=L$O.getElementById("promptStyle"))||((L$e.promptStyleDOM=L$O.createElement("style")).setAttribute("id","promptStyle"),L$O.document.head.appendChild(L$e.promptStyleDOM)),L$e.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},L$a._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(L$z.superSet(L$qa,this,"text",this._content),L$z.superSet(L$qa,this,"color",this._originColor)):(L$z.superSet(L$qa,this,"text",this._prompt),L$z.superSet(L$qa,this,"color",this._promptColor)),L$z.stage.off("keydown",this,this._onKeyDown),L$z.stage.focus=null,this.event("blur"),L$J.isConchApp&&this.nativeInput.blur(),L$O.onPC&&L$z.timer.clear(this,this._syncInputTransform)},L$a._onKeyDown=function(L$a){13===L$a.keyCode&&(L$O.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},L$a.changeText=function(L$a){this._content=L$a,this._focus?(this.nativeInput.value=L$a||"",this.event("change")):L$b.prototype.changeText.call(this,L$a)},L$o(0,L$a,"color",L$b.prototype._$get_color,function(L$a){this._focus&&this.nativeInput.setColor(L$a),L$z.superSet(L$qa,this,"color",this._content?L$a:this._promptColor),this._originColor=L$a}),L$o(0,L$a,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(L$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),L$o(0,L$a,"multiline",function(){return this._multiline},function(L$a){this._multiline=L$a,this.valign=L$a?"top":"middle"}),L$o(0,L$a,"maxChars",function(){return this._maxChars},function(L$a){L$a<=0&&(L$a=1e5),this._maxChars=L$a}),L$o(0,L$a,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(L$a){L$z.superSet(L$qa,this,"color",this._originColor),L$a+="",this._focus?(this.nativeInput.value=L$a||"",this.event("change")):(this._multiline||(L$a=L$a.replace(/\r?\n/g,"")),(this._content=L$a)?L$z.superSet(L$qa,this,"text",L$a):(L$z.superSet(L$qa,this,"text",this._prompt),L$z.superSet(L$qa,this,"color",this.promptColor)))}),L$o(0,L$a,"nativeInput",function(){return this._multiline?L$e.area:L$e.input}),L$o(0,L$a,"prompt",function(){return this._prompt},function(L$a){!this._text&&L$a&&L$z.superSet(L$qa,this,"color",this._promptColor),this.promptColor=this._promptColor,this._text?L$z.superSet(L$qa,this,"text",this._text==this._prompt?L$a:this._text):L$z.superSet(L$qa,this,"text",L$a),this._prompt=L$qa.langPacks&&L$qa.langPacks[L$a]?L$qa.langPacks[L$a]:L$a}),L$o(0,L$a,"focus",function(){return this._focus},function(L$a){var L$b=this.nativeInput;this._focus!==L$a&&(L$a?(L$b.target?L$b.target._focusOut():this._setInputMethod(),(L$b.target=this)._focusIn()):(L$b.target=null,this._focusOut(),L$O.document.body.scrollTop=0,L$b.blur(),L$J.isConchApp?L$b.setPos(-1e4,-1e4):L$e.inputContainer.contains(L$b)&&L$e.inputContainer.removeChild(L$b)))}),L$o(0,L$a,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(L$a){L$a?(-1<(L$a="[^"+L$a+"]").indexOf("^^")&&(L$a=L$a.replace("^^","")),this._restrictPattern=new RegExp(L$a,"g")):this._restrictPattern=null}),L$o(0,L$a,"editable",function(){return this._editable},function(L$a){this._editable=L$a,L$J.isConchApp&&L$e.input.setForbidEdit(!L$a)}),L$o(0,L$a,"promptColor",function(){return this._promptColor},function(L$a){this._promptColor=L$a,this._content||L$z.superSet(L$qa,this,"color",L$a)}),L$o(0,L$a,"type",function(){return this._type},function(L$a){this._getCSSStyle().password="password"==L$a,this._type=L$a,L$J.isConchApp&&this.nativeInput.setType(L$a)}),L$o(0,L$a,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(L$a){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),L$o(0,L$a,"asPassword",function(){return this._getCSSStyle().password},function(L$a){this._getCSSStyle().password=L$a,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),L$e.__init__=function(){L$e._createInputElement(),L$O.onMobile&&L$J.canvas.addEventListener(L$e.IOS_IFRAME?L$O.onMiniGame?"touchend":"click":"touchend",L$e._popupInputMethod)},L$e._popupInputMethod=function(L$a){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},L$e._createInputElement=function(){L$e._initInput(L$e.area=L$O.createElement("textarea")),L$e._initInput(L$e.input=L$O.createElement("input")),(L$e.inputContainer=L$O.createElement("div")).style.position="absolute",L$e.inputContainer.style.zIndex=1e5,L$O.container.appendChild(L$e.inputContainer),L$e.inputContainer.setPos=function(L$a,L$b){L$e.inputContainer.style.left=L$a+"px",L$e.inputContainer.style.top=L$b+"px"}},L$e._initInput=function(L$b){var L$a=L$b.style;L$a.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",L$a.resize="none",L$a.backgroundColor="transparent",L$a.border="none",L$a.outline="none",L$a.zIndex=1,L$b.addEventListener("input",L$e._processInputting),L$b.addEventListener("mousemove",L$e._stopEvent),L$b.addEventListener("mousedown",L$e._stopEvent),L$b.addEventListener("touchmove",L$e._stopEvent),L$b.setFontFace=function(L$a){L$b.style.fontFamily=L$a},L$J.isConchApp||(L$b.setColor=function(L$a){L$b.style.color=L$a},L$b.setFontSize=function(L$a){L$b.style.fontSize=L$a+"px"})},L$e._processInputting=function(L$a){var L$b=laya.display.Input.inputElement.target;if(L$b){var L$c=laya.display.Input.inputElement.value;L$b._restrictPattern&&(L$c=L$c.replace(/\u2006|\x27/g,""),L$b._restrictPattern.test(L$c)&&(L$c=L$c.replace(L$b._restrictPattern,""),laya.display.Input.inputElement.value=L$c)),L$b._text=L$c,L$b.event("input")}},L$e._stopEvent=function(L$a){"touchmove"==L$a.type&&L$a.preventDefault(),L$a.stopPropagation&&L$a.stopPropagation()},L$e.TYPE_TEXT="text",L$e.TYPE_PASSWORD="password",L$e.TYPE_EMAIL="email",L$e.TYPE_URL="url",L$e.TYPE_NUMBER="number",L$e.TYPE_RANGE="range",L$e.TYPE_DATE="date",L$e.TYPE_MONTH="month",L$e.TYPE_WEEK="week",L$e.TYPE_TIME="time",L$e.TYPE_DATE_TIME="datetime",L$e.TYPE_DATE_TIME_LOCAL="datetime-local",L$e.TYPE_SEARCH="search",L$e.input=null,L$e.area=null,L$e.inputElement=null,L$e.inputContainer=null,L$e.confirmButton=null,L$e.promptStyleDOM=null,L$e.inputHeight=45,L$e.isInputting=!1,L$e.stageMatrix=null,L$i(L$e,["IOS_IFRAME",function(){return this.IOS_IFRAME=L$O.onIOS&&L$O.window.top!=L$O.window.self}]),L$e}(L$qa),L$ya=function(L$a){function L$c(L$a,L$b){this._recreateLock=!1,this._needReleaseAgain=!1,this._enableMerageInAtlas=!0,L$c.__super.call(this),L$a&&this._init_(L$a,L$b)}L$k(L$c,"laya.resource.HTMLImage",L$sa);var L$b=L$c.prototype;return L$b._init_=function(L$a,L$b){this._src=L$a,this._source=new L$O.window.Image,L$b&&(L$b.onload&&(this.onload=L$b.onload),L$b.onerror&&(this.onerror=L$b.onerror),L$b.onCreate&&L$b.onCreate(this)),0!=L$a.indexOf("data:image")&&(this._source.crossOrigin=""),L$a&&(this._source.src=L$a)},L$b.recreateResource=function(){var L$a=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0;var L$b=this;this._source=new L$O.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(L$b._needReleaseAgain)return L$b._needReleaseAgain=!1,L$b._source.onload=null,void(L$b._source=null);L$b._source.onload=null,L$b.memorySize=L$a._w*L$a._h*4,L$b._recreateLock=!1,L$b.completeCreate()},this._source.src=this._src}},L$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},L$b.onresize=function(){this._w=this._source.width,this._h=this._source.height},L$o(0,L$b,"onload",null,function(L$a){var L$b=this;this._onload=L$a,this._source&&(this._source.onload=null!=this._onload?function(){L$b.onresize(),L$b._onload()}:null)}),L$o(0,L$b,"onerror",null,function(L$a){var L$b=this;this._onerror=L$a,this._source&&(this._source.onerror=null!=this._onerror?function(){L$b._onerror()}:null)}),L$o(0,L$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(L$a){this._enableMerageInAtlas=L$a,L$J.isConchApp&&this._source&&(this._source.enableMerageInAtlas=L$a)}),L$c.create=function(L$a,L$b){return new L$c(L$a,L$b)},L$c}(),L$za=(function(L$f){function L$a(){this._target=null,this._playEvents=null,this._initData={},this._aniKeys=null,this._effectClass=null,L$a.__super.call(this)}L$k(L$a,"laya.display.EffectAnimation",L$f);var L$b=L$a.prototype;L$b._onOtherBegin=function(L$a){L$a!=this&&this.stop()},L$b.addEvent=function(){this._target&&this._playEvents&&(this._setControlNode(this._target),this._target.on(this._playEvents,this,this._onPlayAction))},L$b._onPlayAction=function(){this.play(0,!1)},L$b.play=function(L$a,L$b,L$c,L$d){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=!0),void 0===L$c&&(L$c=""),void 0===L$d&&(L$d=!0),this._target&&(this._target.event("effectanimationbegin",[this]),this._recordInitData(),laya.display.AnimationPlayerBase.prototype.play.call(this,L$a,L$b,L$c,L$d))},L$b._recordInitData=function(){if(this._aniKeys){var L$a,L$b,L$c=0;for(L$a=this._aniKeys.length,L$c=0;L$c<L$a;L$c++)L$b=this._aniKeys[L$c],this._initData[L$b]=this._target[L$b]}},L$b._displayToIndex=function(L$a){if(this._animationData){L$a<0&&(L$a=0),L$a>this._count&&(L$a=this._count);var L$b=this._animationData.nodes,L$c=0,L$d=L$b.length;for(L$d=1<L$d?1:L$d,L$c=0;L$c<L$d;L$c++)this._displayNodeToFrame(L$b[L$c],L$a)}},L$b._displayNodeToFrame=function(L$a,L$b,L$c){if(this._target){var L$d;L$d=this._target;var L$e,L$f,L$g,L$h,L$i=L$a.frames,L$j=L$a.keys,L$k=0,L$l=L$j.length;L$h=L$a.secondFrames;var L$m,L$n,L$o,L$p,L$q=0;for(L$k=0;L$k<L$l;L$k++)L$f=L$i[L$e=L$j[L$k]],L$g=-1==(L$q=L$h[L$e])?this._initData[L$e]:L$b<L$q?(L$o=(L$n=L$a.keyframes[L$e])[0]).tween?(null==(L$m=L$U[L$o.tweenMethod])&&(L$m=L$U.linearNone),L$p=L$n[1],L$m(L$b,this._initData[L$e],L$p.value-this._initData[L$e],L$p.index)):this._initData[L$e]:L$f.length>L$b?L$f[L$b]:L$f[L$f.length-1],L$d[L$e]=L$g}},L$b._calculateNodeKeyFrames=function(L$a){L$f.prototype._calculateNodeKeyFrames.call(this,L$a);var L$b,L$c,L$d,L$e=L$a.keyframes;L$a.target;for(L$b in L$d={},L$a.secondFrames=L$d,L$e)(L$c=L$e[L$b]).length<=1?L$d[L$b]=-1:L$d[L$b]=L$c[1].index},L$o(0,L$b,"target",function(){return this._target},function(L$a){this._target&&this._target.off("effectanimationbegin",this,this._onOtherBegin),this._target=L$a,this._target&&this._target.on("effectanimationbegin",this,this._onOtherBegin),this.addEvent()}),L$o(0,L$b,"playEvent",null,function(L$a){(this._playEvents=L$a)&&this.addEvent()}),L$o(0,L$b,"effectData",null,function(L$a){var L$b;L$a&&((L$b=L$a.animations)&&L$b[0]&&(this._setUp({},L$b[0]),L$b[0].nodes&&L$b[0].nodes[0]&&(this._aniKeys=L$b[0].nodes[0].keys)))}),L$o(0,L$b,"effectClass",null,function(L$a){var L$b,L$c;(this._effectClass=L$R.getClass(L$a),this._effectClass)&&((L$b=this._effectClass.uiView)&&(L$c=L$b.animations)&&L$c[0]&&(this._setUp({},L$c[0]),L$c[0].nodes&&L$c[0].nodes[0]&&(this._aniKeys=L$c[0].nodes[0].keys)))}),L$a.EffectAnimationBegin="effectanimationbegin"}(L$ua),function(L$b){var L$D;function L$E(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},this._rootNode=null,this._nodeGDic=null,L$E.__super.call(this)}L$k(L$E,"laya.utils.GraphicAnimation",L$b);var L$a=L$E.prototype;return L$a._parseNodeList=function(L$a){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[L$a.compId]=L$a.props,L$a.compId&&this._nodeList.push(L$a.compId);var L$b=L$a.child;if(L$b){var L$c=0,L$d=L$b.length;for(L$c=0;L$c<L$d;L$c++)this._parseNodeList(L$b[L$c])}},L$a._calGraphicData=function(L$a){var L$b;if(this._setUp(null,L$a),this._createGraphicData(),this._nodeIDAniDic)for(L$b in this._nodeIDAniDic)this._nodeIDAniDic[L$b]=null},L$a._createGraphicData=function(){var L$a,L$b=[],L$c=0,L$d=this.count,L$e=this._animationNewFrames;for(L$e||(L$e=[]),L$c=0;L$c<L$d;L$c++)!L$e[L$c]&&L$a||(L$a=this._createFrameGraphic(L$c)),L$b.push(L$a);this._gList=L$b},L$a._createFrameGraphic=function(L$a){var L$b=L$F.createGraphics();return L$E._rootMatrix||(L$E._rootMatrix=new L$G),this._updateNodeGraphic(this._rootNode,L$a,L$E._rootMatrix,L$b),L$b},L$a._updateNodeGraphic=function(L$a,L$b,L$c,L$d,L$e){var L$f;void 0===L$e&&(L$e=1);var L$g,L$h,L$i,L$j=(L$f=this._nodeGDic[L$a.compId]=this._getNodeGraphicData(L$a.compId,L$b,this._nodeGDic[L$a.compId])).alpha*L$e;if(!(L$j<.01)&&(L$f.resultTransform||(L$f.resultTransform=L$G.create()),L$g=L$f.resultTransform,L$G.mul(L$f.transform,L$c,L$g),L$f.skin&&(L$h=this._getTextureByUrl(L$f.skin))&&(L$g._checkTransform()?(L$d.drawTexture(L$h,0,0,L$f.width,L$f.height,L$g,L$j),L$f.resultTransform=null):L$d.drawTexture(L$h,L$g.tx,L$g.ty,L$f.width,L$f.height,null,L$j)),L$i=L$a.child)){var L$k,L$l=0;for(L$k=L$i.length,L$l=0;L$l<L$k;L$l++)this._updateNodeGraphic(L$i[L$l],L$b,L$g,L$d,L$j)}},L$a._updateNoChilds=function(L$a,L$b){if(L$a.skin){var L$c=this._getTextureByUrl(L$a.skin);if(L$c){var L$d=L$a.transform;L$d._checkTransform();!L$d.bTransform?L$b.drawTexture(L$c,L$d.tx,L$d.ty,L$a.width,L$a.height,null,L$a.alpha):L$b.drawTexture(L$c,0,0,L$a.width,L$a.height,L$d.clone(),L$a.alpha)}}},L$a._updateNodeGraphic2=function(L$a,L$b,L$c){var L$d;if(L$d=this._nodeGDic[L$a.compId]=this._getNodeGraphicData(L$a.compId,L$b,this._nodeGDic[L$a.compId]),L$a.child){var L$e=L$d.transform;L$e._checkTransform();var L$f,L$g;L$g=(L$f=!L$e.bTransform)&&(0!=L$e.tx||0!=L$e.ty);var L$h,L$i,L$j;if((L$h=L$e.bTransform||1!=L$d.alpha)&&L$c.save(),1!=L$d.alpha&&L$c.alpha(L$d.alpha),L$f?L$g&&L$c.translate(L$e.tx,L$e.ty):L$c.transform(L$e.clone()),L$i=L$a.child,L$d.skin&&(L$j=this._getTextureByUrl(L$d.skin))&&L$c.drawTexture(L$j,0,0,L$d.width,L$d.height),L$i){var L$k,L$l=0;for(L$k=L$i.length,L$l=0;L$l<L$k;L$l++)this._updateNodeGraphic2(L$i[L$l],L$b,L$c)}L$h?L$c.restore():L$f?L$g&&L$c.translate(-L$e.tx,-L$e.ty):L$c.transform(L$e.clone().invert())}else this._updateNoChilds(L$d,L$c)},L$a._calculateNodeKeyFrames=function(L$a){L$b.prototype._calculateNodeKeyFrames.call(this,L$a),this._nodeIDAniDic[L$a.target]=L$a},L$a.getNodeDataByID=function(L$a){return this._nodeIDAniDic[L$a]},L$a._getParams=function(L$a,L$b,L$c,L$d){var L$e=L$E._temParam;L$e.length=L$b.length;var L$f=0,L$g=L$b.length;for(L$f=0;L$f<L$g;L$f++)L$e[L$f]=this._getObjVar(L$a,L$b[L$f][0],L$c,L$b[L$f][1],L$d);return L$e},L$a._getObjVar=function(L$a,L$b,L$c,L$d,L$e){if(L$a.hasOwnProperty(L$b)){var L$f=L$a[L$b];if(L$c>=L$f.length&&(L$c=L$f.length-1),null!=L$a[L$b][L$c])return L$a[L$b][L$c]}return L$e.hasOwnProperty(L$b)?L$e[L$b]:L$d},L$a._getNodeGraphicData=function(L$a,L$b,L$c){L$c||(L$c=L$D.create()),L$c.transform?L$c.transform.identity():L$c.transform=L$G.create();var L$d=this.getNodeDataByID(L$a);if(!L$d)return L$c;var L$e,L$f,L$g=L$d.frames,L$h=this._getParams(L$g,L$E._drawTextureCmd,L$b,this._nodeDefaultProps[L$a]),L$i=L$h[0],L$j=NaN,L$k=NaN,L$l=L$h[5],L$m=L$h[6],L$n=L$h[13],L$o=L$h[14],L$p=L$h[7],L$q=L$h[8],L$r=L$h[9],L$s=L$h[11],L$t=L$h[12];L$j=L$h[3],L$k=L$h[4],0!=L$j&&0!=L$k||(L$i=null),-1==L$j&&(L$j=0),-1==L$k&&(L$k=0),L$c.skin=L$i,L$c.width=L$j,L$c.height=L$k,L$i&&((L$e=this._getTextureByUrl(L$i))?(L$j||(L$j=L$e.sourceWidth),L$k||(L$k=L$e.sourceHeight)):console.warn("lost skin:",L$i,",you may load pics first")),L$c.alpha=L$h[10],L$f=L$c.transform,0!=L$n&&(L$l=L$n*L$j),0!=L$o&&(L$m=L$o*L$k),0==L$l&&0==L$m||L$f.translate(-L$l,-L$m);var L$u=null;if(L$r||1!==L$p||1!==L$q||L$s||L$t){(L$u=L$E._tempMt).identity(),L$u.bTransform=!0;var L$v=.0174532922222222*(L$r-L$s),L$y=.0174532922222222*(L$r+L$t),L$z=Math.cos(L$y),L$A=Math.sin(L$y),L$B=Math.sin(L$v),L$C=Math.cos(L$v);L$u.a=L$p*L$z,L$u.b=L$p*L$A,L$u.c=-L$q*L$B,L$u.d=L$q*L$C,L$u.tx=L$u.ty=0}return L$u&&(L$f=L$G.mul(L$f,L$u,L$f)),L$f.translate(L$h[1],L$h[2]),L$c},L$a._getTextureByUrl=function(L$a){return L$ha.getRes(L$a)},L$a.setAniData=function(L$a,L$b){if(L$a.animations){this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=L$a,this._parseNodeList(L$a);var L$c,L$d={},L$e=[],L$f=L$a.animations,L$g=0,L$h=L$f.length;for(L$g=0;L$g<L$h;L$g++)if(L$c=L$f[L$g],this._labels=null,(!L$b||L$b==L$c.name)&&L$c){try{this._calGraphicData(L$c)}catch(L$a){console.warn("parse animation fail:"+L$c.name+",empty animation created"),this._gList=[]}var L$i={};L$i.interval=1e3/L$c.frameRate,L$i.frames=this._gList,L$i.labels=this._labels,L$i.name=L$c.name,L$e.push(L$i),L$d[L$c.name]=L$i}this.animationList=L$e,this.animationDic=L$d}L$E._temParam.length=0},L$a.parseByData=function(L$a){var L$b,L$c;L$b=L$a.nodeRoot,L$c=L$a.aniO,delete L$a.nodeRoot,delete L$a.aniO,this._nodeDefaultProps={},this._nodeGDic={},this._nodeList&&(this._nodeList.length=0),this._rootNode=L$b,this._parseNodeList(L$b),this._labels=null;try{this._calGraphicData(L$c)}catch(L$a){console.warn("parse animation fail:"+L$c.name+",empty animation created"),this._gList=[]}var L$d=L$a;return L$d.interval=1e3/L$c.frameRate,L$d.frames=this._gList,L$d.labels=this._labels,L$d.name=L$c.name,L$d},L$a.setUpAniData=function(L$a){if(L$a.animations){var L$b,L$c={},L$d=[],L$e=L$a.animations,L$f=0,L$g=L$e.length;for(L$f=0;L$f<L$g;L$f++)if(L$b=L$e[L$f]){var L$h={};L$h.name=L$b.name,L$h.aniO=L$b,L$h.nodeRoot=L$a,L$d.push(L$h),L$c[L$b.name]=L$h}this.animationList=L$d,this.animationDic=L$c}},L$a._clear=function(){var L$a,L$b;if(this.animationList=null,this.animationDic=null,this._gList=null,this._nodeGDic)for(L$a in this._nodeGDic)(L$b=this._nodeGDic[L$a])&&L$b.recover();this._nodeGDic=null},L$E.parseAnimationByData=function(L$a){var L$b;return L$E._I||(L$E._I=new L$E),L$b=L$E._I.parseByData(L$a),L$E._I._clear(),L$b},L$E.parseAnimationData=function(L$a){var L$b;return L$E._I||(L$E._I=new L$E),L$E._I.setUpAniData(L$a),(L$b={}).animationList=L$E._I.animationList,L$b.animationDic=L$E._I.animationDic,L$E._I._clear(),L$b},L$E._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",-1],["height",-1],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]],L$E._temParam=[],L$E._I=null,L$E._rootMatrix=null,L$i(L$E,["_tempMt",function(){return this._tempMt=new L$G}]),L$E.__init$=function(){L$D=function(){function L$a(){this.skin=null,this.transform=null,this.resultTransform=null,this.width=NaN,this.height=NaN,this.alpha=1}return L$k(L$a,""),L$a.prototype.recover=function(){this.skin=null,this.width=0,this.height=0,this.alpha=1,this.transform&&(this.transform.destroy(),this.transform=null),this.resultTransform&&(this.resultTransform.destroy(),this.resultTransform=null),L$W.recover("GraphicNode",this)},L$a.create=function(){return L$W.getItemByClass("GraphicNode",L$a)},L$a}()},L$E}(L$ua));L$z.__init([L$j,L$ia,L$J,L$O,L$Y,L$C,L$a,L$za])}(window,document,Laya),function(L$a,L$b,L$c){L$c.un,L$c.uns,L$c.static;var L$d=L$c.class;L$c.getset,L$c.__newvec;new(function(){function L$a(){}return L$d(L$a,"LayaMain"),L$a}())}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(L$a,L$b){"use strict";for(var L$c in Object.defineProperty(L$b,"__esModule",{value:!0}),Laya){var L$d=Laya[L$c];L$d&&L$d.__isclass&&(L$b[L$c]=L$d)}}),function(L$a,L$b,L$y){L$y.un,L$y.uns;var L$g=L$y.static,L$m=L$y.class,L$d=L$y.getset,L$f=L$y.__newvec,L$k=laya.maths.Arith,L$l=laya.maths.Bezier,L$c=laya.resource.Bitmap,L$n=laya.utils.Browser,L$i=laya.utils.Byte,L$o=laya.utils.Color,L$z=(laya.filters.ColorFilter,L$y.Config),L$e=laya.resource.Context,L$A=(laya.events.Event,laya.filters.Filter),L$h=laya.display.Graphics,L$j=laya.resource.HTMLCanvas,L$p=(laya.utils.HTMLChar,laya.resource.HTMLImage),L$q=laya.resource.HTMLSubImage,L$B=(laya.utils.Handler,laya.net.Loader,laya.maths.Matrix),L$C=laya.maths.Point,L$D=laya.maths.Rectangle,L$r=laya.renders.Render,L$s=(laya.renders.RenderContext,laya.renders.RenderSprite),L$t=laya.resource.Resource,L$u=laya.resource.ResourceManager,L$v=laya.utils.RunDriver,L$E=laya.display.Sprite,L$F=laya.display.Stage,L$G=laya.utils.Stat,L$H=laya.utils.StringKey,L$I=(laya.display.css.Style,laya.system.System),L$J=laya.display.Text,L$K=laya.resource.Texture,L$L=(laya.display.css.TransformInfo,laya.net.URL,laya.utils.Utils),L$M=laya.utils.VectorGraphManager;laya.utils.WordText;L$y.interface("laya.webgl.shapes.IShape"),L$y.interface("laya.webgl.submit.ISubmit"),L$y.interface("laya.webgl.text.ICharSegment"),L$y.interface("laya.webgl.canvas.save.ISaveData"),L$y.interface("laya.webgl.resource.IMergeAtlasBitmap"),L$y.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var L$N=function(){function L$a(){}L$m(L$a,"laya.filters.webgl.FilterActionGL");var L$b=L$a.prototype;return L$y.imps(L$b,{"laya.filters.IFilterActionGL":!0}),L$b.setValue=function(L$a){},L$b.setValueMix=function(L$a){},L$b.apply3d=function(L$a,L$b,L$c,L$d,L$e){return null},L$b.apply=function(L$a){return null},L$d(0,L$b,"typeMix",function(){return 0}),L$a}(),L$O=function(){function L$a(){}return L$m(L$a,"laya.webgl.shader.ShaderValue"),L$a}(),L$P=function(){var L$d,L$e;function L$a(L$a,L$b,L$c){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new L$e,void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),this._cells=null,this._rowInfo=null,this._init(L$a,L$b),this._atlasID=L$c}L$m(L$a,"laya.webgl.atlas.AtlasGrid");var L$b=L$a.prototype;return L$b.getAltasID=function(){return this._atlasID},L$b.setAltasID=function(L$a){0<=L$a&&(this._atlasID=L$a)},L$b.addTex=function(L$a,L$b,L$c){var L$d=this._get(L$b,L$c);return 0==L$d.ret||(this._fill(L$d.x,L$d.y,L$b,L$c,L$a),this._texCount++),L$d},L$b._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},L$b._init=function(L$a,L$b){if(this._width=L$a,this._height=L$b,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=L$f(this._height);for(var L$c=0;L$c<this._height;L$c++)this._rowInfo[L$c]=new L$d;return this._clear(),!0},L$b._get=function(L$a,L$b){var L$c=new L$R;if(L$a>=this._failSize.width&&L$b>=this._failSize.height)return L$c;for(var L$d=-1,L$e=-1,L$f=this._width,L$g=this._height,L$h=this._cells,L$i=0;L$i<L$g;L$i++)if(!(this._rowInfo[L$i].spaceCount<L$a))for(var L$j=0;L$j<L$f;){var L$k=3*(L$i*L$f+L$j);if(0!=L$h[L$k]||L$h[1+L$k]<L$a||L$h[2+L$k]<L$b)L$j+=L$h[1+L$k];else{L$d=L$j,L$e=L$i;for(var L$l=0;L$l<L$a;L$l++)if(L$h[3*L$l+L$k+2]<L$b){L$d=-1;break}if(!(L$d<0))return L$c.ret=!0,L$c.x=L$d,L$c.y=L$e,L$c;L$j+=L$h[1+L$k]}}return L$c},L$b._fill=function(L$a,L$b,L$c,L$d,L$e){var L$f=this._width,L$g=this._height;this._check(L$a+L$c<=L$f&&L$b+L$d<=L$g);for(var L$h=L$b;L$h<L$d+L$b;++L$h){this._check(this._rowInfo[L$h].spaceCount>=L$c),this._rowInfo[L$h].spaceCount-=L$c;for(var L$i=0;L$i<L$c;L$i++){var L$j=3*(L$a+L$h*L$f+L$i);this._check(0==this._cells[L$j]),this._cells[L$j]=L$e,this._cells[1+L$j]=L$c,this._cells[2+L$j]=L$d}}if(0<L$a)for(L$h=0;L$h<L$d;++L$h){var L$k=0;for(L$i=L$a-1;0<=L$i&&0==this._cells[3*((L$b+L$h)*L$f+L$i)];--L$i,++L$k);for(L$i=L$k;0<L$i;--L$i)this._cells[3*((L$b+L$h)*L$f+L$a-L$i)+1]=L$i,this._check(0<L$i)}if(0<L$b)for(L$i=L$a;L$i<L$a+L$c;++L$i){for(L$k=0,L$h=L$b-1;0<=L$h&&0==this._cells[3*(L$i+L$h*L$f)];--L$h,L$k++);for(L$h=L$k;0<L$h;--L$h)this._cells[3*(L$i+(L$b-L$h)*L$f)+2]=L$h,this._check(0<L$h)}},L$b._check=function(L$a){0==L$a&&console.log("xtexMerger 错误啦")},L$b._clear=function(){for(var L$a=this._texCount=0;L$a<this._height;L$a++)this._rowInfo[L$a].spaceCount=this._width;for(var L$b=0;L$b<this._height;L$b++)for(var L$c=0;L$c<this._width;L$c++){var L$d=3*(L$b*this._width+L$c);this._cells[L$d]=0,this._cells[1+L$d]=this._width-L$c,this._cells[2+L$d]=this._width-L$b}this._failSize.width=this._width+1,this._failSize.height=this._height+1},L$a.__init$=function(){L$d=function(){function L$a(){this.spaceCount=0}return L$m(L$a,""),L$a}(),L$e=function(){function L$a(){this.width=0,this.height=0}return L$m(L$a,""),L$a}()},L$a}(),L$Q=function(){function L$r(L$a,L$b,L$c,L$d){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=L$a,this._height=L$b,this._gridSize=L$c,this._maxAtlaserCount=L$d,this._gridNumX=L$a/L$c,this._gridNumY=L$b/L$c,this._curAtlasIndex=0,this._atlaserArray=[]}L$m(L$r,"laya.webgl.atlas.AtlasResourceManager");var L$a=L$r.prototype;return L$a.setAtlasParam=function(L$a,L$b,L$c,L$d){if(1==this._setAtlasParam)return L$r._sid_=0,this._width=L$a,this._height=L$b,this._gridSize=L$c,this._maxAtlaserCount=L$d,this._gridNumX=L$a/L$c,this._gridNumY=L$b/L$c,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},L$a.pushData=function(L$a){var L$b,L$c=L$a.bitmap,L$d=-1,L$e=null,L$f=0,L$g=0;for(L$f=0,L$b=this._atlaserArray.length;L$f<L$b&&(L$g=(this._curAtlasIndex+L$f)%L$b,-1==(L$d=(L$e=this._atlaserArray[L$g]).findBitmapIsExist(L$c)));L$f++);if(-1!=L$d){var L$h=L$e.InAtlasWebGLImagesOffsetValue[L$d];return L$o=L$h[0],L$p=L$h[1],L$e.addToAtlas(L$a,L$o,L$p),!0}this._setAtlasParam=!1;for(var L$i=Math.ceil((L$a.bitmap.width+2)/this._gridSize),L$j=Math.ceil((L$a.bitmap.height+2)/this._gridSize),L$k=!1,L$l=0;L$l<2;L$l++){var L$m=this._maxAtlaserCount;for(L$f=0;L$f<L$m;L$f++){L$g=(this._curAtlasIndex+L$f)%L$m,this._atlaserArray.length-1>=L$g||this._atlaserArray.push(new L$Da(this._gridNumX,this._gridNumY,this._width,this._height,L$r._sid_++));var L$n=this._atlaserArray[L$g],L$o=0,L$p=0,L$q=L$n.addTex(1,L$i,L$j);if(L$q.ret){L$o=L$q.x*this._gridSize+1,L$p=L$q.y*this._gridSize+1,L$c.lock=!0,L$n.addToAtlasTexture(L$c,L$o,L$p),L$n.addToAtlas(L$a,L$o,L$p),L$k=!0,this._curAtlasIndex=L$g;break}}if(L$k)break;this._atlaserArray.push(new L$Da(this._gridNumX,this._gridNumY,this._width,this._height,L$r._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return L$k||console.log(">>>AtlasManager pushData error"),L$k},L$a.addToAtlas=function(L$a){laya.webgl.atlas.AtlasResourceManager.instance.pushData(L$a)},L$a.garbageCollection=function(){if(!0===this._needGC){for(var L$a=this._atlaserArray.length-this._maxAtlaserCount,L$b=0;L$b<L$a;L$b++)this._atlaserArray[L$b].dispose(),console.log("AtlasResourceManager:Dispose the inner Atlas。");console.log(">>>>altas garbageCollection ="+L$a),this._atlaserArray.splice(0,L$a),this._needGC=!1}return!0},L$a.freeAll=function(){for(var L$a=0,L$b=this._atlaserArray.length;L$a<L$b;L$a++)this._atlaserArray[L$a].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},L$a.getAtlaserCount=function(){return this._atlaserArray.length},L$a.getAtlaserByIndex=function(L$a){return this._atlaserArray[L$a]},L$d(1,L$r,"instance",function(){return L$r._Instance||(L$r._Instance=new L$r(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),L$r._Instance}),L$d(1,L$r,"enabled",function(){return L$z.atlasEnable}),L$d(1,L$r,"atlasLimitWidth",function(){return L$r._atlasLimitWidth},function(L$a){L$r._atlasLimitWidth=L$a}),L$d(1,L$r,"atlasLimitHeight",function(){return L$r._atlasLimitHeight},function(L$a){L$r._atlasLimitHeight=L$a}),L$r._enable=function(){L$z.atlasEnable=!0},L$r._disable=function(){L$z.atlasEnable=!1},L$r.__init__=function(){L$r.atlasTextureWidth=2048,L$r.atlasTextureHeight=2048,L$r.maxTextureCount=6,L$r.atlasLimitWidth=512,L$r.atlasLimitHeight=512},L$r._atlasLimitWidth=0,L$r._atlasLimitHeight=0,L$r.gridSize=16,L$r.atlasTextureWidth=0,L$r.atlasTextureHeight=0,L$r.maxTextureCount=0,L$r._atlasRestore=0,L$r.BOARDER_TYPE_NO=0,L$r.BOARDER_TYPE_RIGHT=1,L$r.BOARDER_TYPE_LEFT=2,L$r.BOARDER_TYPE_BOTTOM=4,L$r.BOARDER_TYPE_TOP=8,L$r.BOARDER_TYPE_ALL=15,L$r._sid_=0,L$r._Instance=null,L$r}(),L$R=function(){function L$a(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return L$m(L$a,"laya.webgl.atlas.MergeFillInfo"),L$a}(),L$S=function(){function L$b(){}return L$m(L$b,"laya.webgl.canvas.BlendMode"),L$b._init_=function(L$a){L$b.fns=[L$b.BlendNormal,L$b.BlendAdd,L$b.BlendMultiply,L$b.BlendScreen,L$b.BlendOverlay,L$b.BlendLight,L$b.BlendMask,L$b.BlendDestinationOut],L$b.targetFns=[L$b.BlendNormalTarget,L$b.BlendAddTarget,L$b.BlendMultiplyTarget,L$b.BlendScreenTarget,L$b.BlendOverlayTarget,L$b.BlendLightTarget,L$b.BlendMask,L$b.BlendDestinationOut]},L$b.BlendNormal=function(L$a){L$a.blendFunc(1,771)},L$b.BlendAdd=function(L$a){L$a.blendFunc(1,772)},L$b.BlendMultiply=function(L$a){L$a.blendFunc(774,771)},L$b.BlendScreen=function(L$a){L$a.blendFunc(1,1)},L$b.BlendOverlay=function(L$a){L$a.blendFunc(1,769)},L$b.BlendLight=function(L$a){L$a.blendFunc(1,1)},L$b.BlendNormalTarget=function(L$a){L$a.blendFunc(1,771)},L$b.BlendAddTarget=function(L$a){L$a.blendFunc(1,772)},L$b.BlendMultiplyTarget=function(L$a){L$a.blendFunc(774,771)},L$b.BlendScreenTarget=function(L$a){L$a.blendFunc(1,1)},L$b.BlendOverlayTarget=function(L$a){L$a.blendFunc(1,769)},L$b.BlendLightTarget=function(L$a){L$a.blendFunc(1,1)},L$b.BlendMask=function(L$a){L$a.blendFunc(0,770)},L$b.BlendDestinationOut=function(L$a){L$a.blendFunc(0,0)},L$b.activeBlendFunction=null,L$b.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],L$b.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},L$b.NORMAL="normal",L$b.ADD="add",L$b.MULTIPLY="multiply",L$b.SCREEN="screen",L$b.LIGHT="light",L$b.OVERLAY="overlay",L$b.DESTINATIONOUT="destination-out",L$b.fns=[],L$b.targetFns=[],L$b}(),L$T=function(){function L$c(L$a){this._color=L$o.create("black"),this.setValue(L$a)}L$m(L$c,"laya.webgl.canvas.DrawStyle");var L$a=L$c.prototype;return L$a.setValue=function(L$a){if(L$a){if("string"==typeof L$a)return void(this._color=L$o.create(L$a));if(L$a instanceof laya.utils.Color)return void(this._color=L$a)}},L$a.reset=function(){this._color=L$o.create("black")},L$a.equal=function(L$a){return"string"==typeof L$a?this._color.strColor===L$a:L$a instanceof laya.utils.Color&&this._color.numColor===L$a.numColor},L$a.toColorStr=function(){return this._color.strColor},L$c.create=function(L$a){var L$b;if(L$a&&("string"==typeof L$a?L$b=L$o.create(L$a):L$a instanceof laya.utils.Color&&(L$b=L$a),L$b))return L$b._drawStyle||(L$b._drawStyle=new L$c(L$a));return laya.webgl.canvas.DrawStyle.DEFAULT},L$g(L$c,["DEFAULT",function(){return this.DEFAULT=new L$c("#000000")}]),L$c}(),L$U=function(){function L$a(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];L$ua.mainContext;this.ib=L$wa.create(35048),this.vb=L$xa.create(5)}L$m(L$a,"laya.webgl.canvas.Path");var L$b=L$a.prototype;return L$b.addPoint=function(L$a,L$b){this.tempArray.push(L$a,L$b)},L$b.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},L$b.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},L$b.polygon=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g;return this.geomatrys.push(this._curGeomatry=L$g=new L$Ha(L$a,L$b,L$c,L$d,L$e,L$f)),L$d||(L$g.fill=!1),null==L$f&&(L$g.borderWidth=0),L$g},L$b.setGeomtry=function(L$a){this.geomatrys.push(this._curGeomatry=L$a)},L$b.drawLine=function(L$a,L$b,L$c,L$d,L$e){var L$f;return this.closePath?this.geomatrys.push(this._curGeomatry=L$f=new L$Ga(L$a,L$b,L$c,L$d,L$e)):this.geomatrys.push(this._curGeomatry=L$f=new L$Fa(L$a,L$b,L$c,L$d,L$e)),L$f.fill=!1,L$f},L$b.update=function(){var L$a=this.ib._byteLength,L$b=this.geomatrys.length;this.offset=L$a;for(var L$c=this.geoStart;L$c<L$b;L$c++)this.geomatrys[L$c].getData(this.ib,this.vb,this.vb._byteLength/20);this.geoStart=L$b,this.count=(this.ib._byteLength-L$a)/L$pa.BYTES_PIDX},L$b.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},L$b.recover=function(){this._curGeomatry=null,this.vb.destory(),this.vb=null,this.ib.destory(),this.ib=null},L$a}(),L$V=function(){function L$h(){}L$m(L$h,"laya.webgl.canvas.save.SaveBase");var L$a=L$h.prototype;return L$y.imps(L$a,{"laya.webgl.canvas.save.ISaveData":!0}),L$a.isSaveMark=function(){return!1},L$a.restore=function(L$a){this._dataObj[this._valueName]=this._value,(L$h._cache[L$h._cache._length++]=this)._newSubmit&&(L$a._curSubmit=L$fa.RENDERBASE,L$a._renderKey=0)},L$h._createArray=function(){var L$a=[];return L$a._length=0,L$a},L$h._init=function(){var L$a=L$h._namemap={};return L$a[1]="ALPHA",L$a[2]="fillStyle",L$a[8]="font",L$a[256]="lineWidth",L$a[512]="strokeStyle",L$a[8192]="_mergeID",L$a[1024]=L$a[2048]=L$a[4096]=[],L$a[16384]="textBaseline",L$a[32768]="textAlign",L$a[65536]="_nBlendType",L$a[1048576]="shader",L$a[2097152]="filters",L$a},L$h.save=function(L$a,L$b,L$c,L$d){if((L$a._saveMark._saveuse&L$b)!==L$b){L$a._saveMark._saveuse|=L$b;var L$e=L$h._cache,L$f=0<L$e._length?L$e[--L$e._length]:new L$h;L$f._value=L$c[L$f._valueName=L$h._namemap[L$b]],L$f._dataObj=L$c,L$f._newSubmit=L$d;var L$g=L$a._save;L$g[L$g._length++]=L$f}},L$h._cache=laya.webgl.canvas.save.SaveBase._createArray(),L$h._namemap=L$h._init(),L$h}(),L$W=function(){function L$f(){this._clipRect=new L$D}L$m(L$f,"laya.webgl.canvas.save.SaveClipRect");var L$a=L$f.prototype;return L$y.imps(L$a,{"laya.webgl.canvas.save.ISaveData":!0}),L$a.isSaveMark=function(){return!1},L$a.restore=function(L$a){L$a._clipRect=this._clipSaveRect,(L$f._cache[L$f._cache._length++]=this)._submitScissor.submitLength=L$a._submits._length-this._submitScissor.submitIndex,L$a._curSubmit=L$fa.RENDERBASE,L$a._renderKey=0},L$f.save=function(L$a,L$b){if(131072!=(131072&L$a._saveMark._saveuse)){L$a._saveMark._saveuse|=131072;var L$c=L$f._cache,L$d=0<L$c._length?L$c[--L$c._length]:new L$f;L$d._clipSaveRect=L$a._clipRect,L$a._clipRect=L$d._clipRect.copyFrom(L$a._clipRect),L$d._submitScissor=L$b;var L$e=L$a._save;L$e[L$e._length++]=L$d}},L$g(L$f,["_cache",function(){return this._cache=L$V._createArray()}]),L$f}(),L$X=function(){function L$n(){this._contextX=0,this._contextY=0,this._clipRect=new L$D,this._rect=new L$D,this._matrix=new L$B}L$m(L$n,"laya.webgl.canvas.save.SaveClipRectStencil");var L$a=L$n.prototype;return L$y.imps(L$a,{"laya.webgl.canvas.save.ISaveData":!0}),L$a.isSaveMark=function(){return!1},L$a.restore=function(L$a){L$ka.restore(L$a,this._rect,this._saveMatrix,this._contextX,this._contextY),L$a._clipRect=this._clipSaveRect,L$a._curMat=this._saveMatrix,L$a._x=this._contextX,L$a._y=this._contextY,L$n._cache[L$n._cache._length++]=this,L$a._curSubmit=L$fa.RENDERBASE},L$n.save=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){if(262144!=(262144&L$a._saveMark._saveuse)){L$a._saveMark._saveuse|=262144;var L$k=L$n._cache,L$l=0<L$k._length?L$k[--L$k._length]:new L$n;L$l._clipSaveRect=L$a._clipRect,L$l._clipRect.setTo(L$g,L$h,L$i,L$j),L$a._clipRect=L$l._clipRect,L$l._rect.x=L$c,L$l._rect.y=L$d,L$l._rect.width=L$e,L$l._rect.height=L$f,L$l._contextX=L$a._x,L$l._contextY=L$a._y,L$l._saveMatrix=L$a._curMat,L$a._curMat.copyTo(L$l._matrix),L$a._curMat=L$l._matrix,L$l._submitStencil=L$b;var L$m=L$a._save;L$m[L$m._length++]=L$l}},L$g(L$n,["_cache",function(){return this._cache=L$V._createArray()}]),L$n}(),L$Y=function(){function L$d(){this._saveuse=0}L$m(L$d,"laya.webgl.canvas.save.SaveMark");var L$a=L$d.prototype;return L$y.imps(L$a,{"laya.webgl.canvas.save.ISaveData":!0}),L$a.isSaveMark=function(){return!0},L$a.restore=function(L$a){L$a._saveMark=this._preSaveMark,L$d._no[L$d._no._length++]=this},L$d.Create=function(L$a){var L$b=L$d._no,L$c=0<L$b._length?L$b[--L$b._length]:new L$d;return L$c._saveuse=0,L$c._preSaveMark=L$a._saveMark,L$a._saveMark=L$c},L$g(L$d,["_no",function(){return this._no=L$V._createArray()}]),L$d}(),L$Z=function(){function L$f(){this._matrix=new L$B}L$m(L$f,"laya.webgl.canvas.save.SaveTransform");var L$a=L$f.prototype;return L$y.imps(L$a,{"laya.webgl.canvas.save.ISaveData":!0}),L$a.isSaveMark=function(){return!1},L$a.restore=function(L$a){L$a._curMat=this._savematrix,L$f._no[L$f._no._length++]=this},L$f.save=function(L$a){var L$b=L$a._saveMark;if(2048!=(2048&L$b._saveuse)){L$b._saveuse|=2048;var L$c=L$f._no,L$d=0<L$c._length?L$c[--L$c._length]:new L$f;L$d._savematrix=L$a._curMat,L$a._curMat=L$a._curMat.copyTo(L$d._matrix);var L$e=L$a._save;L$e[L$e._length++]=L$d}},L$g(L$f,["_no",function(){return this._no=L$V._createArray()}]),L$f}(),L$$=function(){function L$e(){}L$m(L$e,"laya.webgl.canvas.save.SaveTranslate");var L$a=L$e.prototype;return L$y.imps(L$a,{"laya.webgl.canvas.save.ISaveData":!0}),L$a.isSaveMark=function(){return!1},L$a.restore=function(L$a){L$a._curMat;L$a._x=this._x,L$a._y=this._y,L$e._no[L$e._no._length++]=this},L$e.save=function(L$a){var L$b=L$e._no,L$c=0<L$b._length?L$b[--L$b._length]:new L$e;L$c._x=L$a._x,L$c._y=L$a._y;var L$d=L$a._save;L$d[L$d._length++]=L$c},L$g(L$e,["_no",function(){return this._no=L$V._createArray()}]),L$e}(),L$_=function(){function L$a(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._sp=null,this._clipRect=new L$D}L$m(L$a,"laya.webgl.resource.RenderTargetMAX");var L$b=L$a.prototype;return L$b.setSP=function(L$a){this._sp=L$a},L$b.size=function(L$a,L$b){var L$c=this;this._width!==L$a||this._height!==L$b?(this.repaint=!0,this._width=L$a,this._height=L$b,this.target?this.target.size(L$a,L$b):this.target=L$Ma.create(L$a,L$b),this.target.hasListener("recovered")||this.target.on("recovered",this,function(L$a){L$y.timer.callLater(L$c._sp,L$c._sp.repaint)})):this.target.size(L$a,L$b)},L$b._flushToTarget=function(L$a,L$b){if(!L$b._destroy){var L$c=L$sa.worldScissorTest,L$d=L$sa.worldClipRect;L$sa.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,L$sa.worldScissorTest=!1,L$ua.mainContext.disable(3089);var L$e=L$sa.worldAlpha,L$f=L$sa.worldMatrix4,L$g=L$sa.worldMatrix,L$h=L$sa.worldFilters,L$i=L$sa.worldShaderDefines;if(L$sa.worldMatrix=L$B.EMPTY,L$sa.restoreTempArray(),L$sa.worldMatrix4=L$sa.TEMPMAT4_ARRAY,L$sa.worldAlpha=1,L$sa.worldFilters=null,L$sa.worldShaderDefines=null,L$La.activeShader=null,L$b.start(),L$z.showCanvasMark?L$b.clear(0,1,0,.3):L$b.clear(0,0,0,0),L$a.flush(),L$b.end(),L$La.activeShader=null,L$sa.worldAlpha=L$e,L$sa.worldMatrix4=L$f,L$sa.worldMatrix=L$g,L$sa.worldFilters=L$h,L$sa.worldShaderDefines=L$i,L$sa.worldScissorTest=L$c){var L$j=L$sa.height-L$d.y-L$d.height;L$ua.mainContext.scissor(L$d.x,L$j,L$d.width,L$d.height),L$ua.mainContext.enable(3089)}L$sa.worldClipRect=L$d}},L$b.flush=function(L$a){this.repaint&&(this._flushToTarget(L$a,this.target),this.repaint=!1)},L$b.drawTo=function(L$a,L$b,L$c,L$d,L$e){L$a.drawTexture(this.target.getTexture(),L$b,L$c,L$d,L$e,0,0)},L$b.destroy=function(){this.target&&(this.target.destroy(),this.target=null,this._sp=null)},L$a}(),L$w=function(){function L$a(){this.ALPHA=1,this.shaderType=0,this.defines=new L$Ea}return L$m(L$a,"laya.webgl.shader.d2.Shader2D"),L$a.prototype.destroy=function(){this.defines=null,this.filters=null,this.glTexture=null,this.strokeStyle=null,this.fillStyle=null},L$a.__init__=function(){var L$a,L$b;L$Ya.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),L$Ya.addInclude("parts/ColorFilter_ps_logic.glsl","mat4 alphaMat =colorMat;\n\nalphaMat[0][3] *= gl_FragColor.a;\nalphaMat[1][3] *= gl_FragColor.a;\nalphaMat[2][3] *= gl_FragColor.a;\n\ngl_FragColor = gl_FragColor * alphaMat;\ngl_FragColor += colorAlpha/255.0*gl_FragColor.a;\n"),L$Ya.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),L$Ya.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4 vec4Color2 = texture2D(texture, v_texcoord + vec2FilterDir + vec2Off); \n\n      #ifdef TXTALPHA\n   vec4Color2.a = texture2D(texture1, v_texcoord + vec2FilterDir + vec2Off).a;\n   #endif\n\n    vec4Color += vec4Color2/floatIterationTotalTime;        \n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);\ngl_FragColor.rgb *= gl_FragColor.a;"),L$Ya.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),L$Ya.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform vec4 strength_sig2_2sig2_gauss1;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\n//float sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\n//float sig2 = sigma*sigma;\n//float _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\n//float gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return strength_sig2_2sig2_gauss1.w*exp(-(x*x+y*y)/strength_sig2_2sig2_gauss1.z);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4 vec4Color1 = texture2D(texture, ctexcoord); \n\n      #ifdef TXTALPHA\n   vec4Color1.a = texture2D(texture1, ctexcoord).a;\n   #endif\n\n    vec4Color += vec4Color1*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),L$Ya.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),L$Ya.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);\ngl_FragColor.xyz *= colorAdd.a;"),L$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",L$b='precision mediump float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n\n   #ifdef TXTCOMPRESS\n   color.rgb *= color.a;\n   #endif\n\n   #ifdef TXTALPHA\n   color.rgba *= texture2D(texture1, v_texcoord).a;\n   #endif\n\n   color.a*=alpha;\n   color.rgb*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',L$Ya.preCompile2D(0,1,L$a,L$b,null),L$a="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",L$b='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\ta.xyz *= alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',L$Ya.preCompile2D(0,2,L$a,L$b,null),L$a="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",L$b="precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n\tgl_FragColor.rgb*=alpha;\n}",L$Ya.preCompile2D(0,4,L$a,L$b,null),L$a="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",L$b='#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n\n   #ifdef TXTALPHA\n   color.a = texture2D(texture1, newTexCoord).a;\n   #endif\n\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',L$Ya.preCompile2D(0,256,L$a,L$b,null),L$a="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_color.rgb *= v_color.a;\n  v_texcoord = texcoord;  \n}",L$b="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\n\n#ifdef TXTALPHA\nuniform sampler2D texture1;\n#endif\n\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\n   #ifdef TXTALPHA\n   t_color.a = texture2D(texture1, v_texcoord).a;\n   #endif\n\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor *= alpha;\n}",L$Ya.preCompile2D(0,512,L$a,L$b,null)},L$a}(),L$x=function(){function L$b(L$a,L$b,L$c){this._value=0,this._name2int=L$a,this._int2name=L$b,this._int2nameMap=L$c}L$m(L$b,"laya.webgl.shader.ShaderDefines");var L$a=L$b.prototype;return L$a.add=function(L$a){return"string"==typeof L$a&&(L$a=this._name2int[L$a]),this._value|=L$a,this._value},L$a.addInt=function(L$a){return this._value|=L$a,this._value},L$a.remove=function(L$a){return"string"==typeof L$a&&(L$a=this._name2int[L$a]),this._value&=~L$a,this._value},L$a.isDefine=function(L$a){return(this._value&L$a)===L$a},L$a.getValue=function(){return this._value},L$a.setValue=function(L$a){this._value=L$a},L$a.toNameDic=function(){var L$a=this._int2nameMap[this._value];return L$a||L$b._toText(this._value,this._int2name,this._int2nameMap)},L$b._reg=function(L$a,L$b,L$c,L$d){L$d[L$c[L$a]=L$b]=L$a},L$b._toText=function(L$a,L$b,L$c){var L$d=L$c[L$a];if(L$d)return L$d;for(var L$e={},L$f=1,L$g=0;L$g<32&&!(L$a<(L$f=1<<L$g));L$g++)if(L$a&L$f){var L$h=L$b[L$f];L$h&&(L$e[L$h]="")}return L$c[L$a]=L$e},L$b._toInt=function(L$a,L$b){for(var L$c=L$a.split("."),L$d=0,L$e=0,L$f=L$c.length;L$e<L$f;L$e++){var L$g=L$b[L$c[L$e]];if(!L$g)throw new Error("Defines to int err:"+L$a+"/"+L$c[L$e]);L$d|=L$g}return L$d},L$b}(),L$aa=function(){function L$g(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMatrix=new L$B}L$m(L$g,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var L$a=L$g.prototype;return L$a.init=function(L$a,L$b,L$c){if(L$b)this._vs=L$b;else{this._vs=[];var L$d=L$a.width,L$e=L$a.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(L$d,0,1,0,1,1,1,1),this._vs.push(L$d,L$e,1,1,1,1,1,1),this._vs.push(0,L$e,0,1,1,1,1,1)}L$c?this._ps=L$c:(L$g._defaultPS||(L$g._defaultPS=[]).push(0,1,3,3,1,2),this._ps=L$g._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=L$a},L$a.init2=function(L$a,L$b,L$c,L$d,L$e){this.transform&&(this.transform=null),L$c?this._ps=L$c:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=L$d,this._uvs=L$e,this.mEleNum=this._ps.length,this.mTexture=L$a,(L$r.isConchNode||L$r.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},L$a._initMyData=function(){var L$a=0,L$b=0,L$c=4*this._verticles.length;this._vs=L$g._tempVS;var L$d=!1;if(L$r.isConchNode||L$r.isConchApp?(this._vs.length=L$c,L$d=!0):this._vs.length<L$c&&(this._vs.length=L$c,L$d=!0),L$g._tVSLen=L$c,L$d)for(;L$a<L$c;)this._vs[L$a]=this._verticles[L$b],this._vs[L$a+1]=this._verticles[L$b+1],this._vs[L$a+2]=this._uvs[L$b],this._vs[L$a+3]=this._uvs[L$b+1],this._vs[L$a+4]=1,this._vs[L$a+5]=1,this._vs[L$a+6]=1,this._vs[L$a+7]=1,L$a+=8,L$b+=2;else for(;L$a<L$c;)this._vs[L$a]=this._verticles[L$b],this._vs[L$a+1]=this._verticles[L$b+1],this._vs[L$a+2]=this._uvs[L$b],this._vs[L$a+3]=this._uvs[L$b+1],L$a+=8,L$b+=2},L$a.getData2=function(L$a,L$b,L$c){var L$d;this.mVBBuffer=L$a,this.mIBBuffer=L$b,this._initMyData(),L$a.appendEx2(this._vs,Float32Array,L$g._tVSLen,4),this._indexStart=L$b._byteLength,(L$d=L$g._tempIB).length<this._ps.length&&(L$d.length=this._ps.length);for(var L$e=0,L$f=this._ps.length;L$e<L$f;L$e++)L$d[L$e]=this._ps[L$e]+L$c;L$b.appendEx2(L$d,Uint16Array,this._ps.length,2)},L$a.getData=function(L$a,L$b,L$c){if(this.mVBBuffer=L$a,this.mIBBuffer=L$b,L$a.append(this.mVBData),this._indexStart=L$b._byteLength,this.mIBData.start!=L$c){for(var L$d=0,L$e=this._ps.length;L$d<L$e;L$d++)this.mIBData[L$d]=this._ps[L$d]+L$c;this.mIBData.start=L$c}L$b.append(this.mIBData)},L$a.render=function(L$a,L$b,L$c){if(L$r.isWebGL&&this.mTexture){L$a._renderKey=0,L$a._shader2D.glTexture=null,L$ba.getInstance().addSkinMesh(this);var L$d=L$fa.createShape(L$a,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,L$Aa.create(512,0));this.transform||(this.transform=L$B.EMPTY),this.transform.translate(L$b,L$c),L$B.mul(this.transform,L$a._curMat,this._tempMatrix),this.transform.translate(-L$b,-L$c);var L$e=L$d.shaderValue,L$f=L$e.u_mmat2||L$sa.getMatrArray();L$sa.mat2MatArray(this._tempMatrix,L$f),L$e.textureHost=this.mTexture,L$e.offsetX=0,L$e.offsetY=0,L$e.u_mmat2=L$f,L$e.ALPHA=L$a._shader2D.ALPHA,L$a._submits[L$a._submits._length++]=L$d}else L$r.isConchApp&&this.mTexture&&(this.transform||(this.transform=L$B.EMPTY),L$a.setSkinMesh&&L$a.setSkinMesh(L$b,L$c,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},L$g._tempVS=[],L$g._tempIB=[],L$g._defaultPS=null,L$g._tVSLen=0,L$g}(),L$ba=function(){function L$a(){this.ib=null,this.vb=null;L$ua.mainContext;this.ib=L$wa.create(35048),this.vb=L$xa.create(8)}L$m(L$a,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var L$b=L$a.prototype;return L$b.addSkinMesh=function(L$a){L$a.getData2(this.vb,this.ib,this.vb._byteLength/32)},L$b.reset=function(){this.vb.clear(),this.ib.clear()},L$a.getInstance=function(){return L$a.instance=L$a.instance||new L$a},L$a.instance=null,L$a}(),L$ca=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===L$i&&(L$i=0),this.x=L$a,this.y=L$b,this.width=L$c,this.height=L$d,this.edges=L$e,this.color=L$f,this.borderWidth=L$g,this.borderColor=L$h}L$m(L$a,"laya.webgl.shapes.BasePoly");var L$b=L$a.prototype;return L$y.imps(L$b,{"laya.webgl.shapes.IShape":!0}),L$b.getData=function(L$a,L$b,L$c){},L$b.rebuild=function(L$a){},L$b.setMatrix=function(L$a){},L$b.needUpdate=function(L$a){return!0},L$b.sector=function(L$a,L$b,L$c){var L$d=this.x,L$e=this.y,L$f=this.edges,L$g=(this.r1-this.r0)/L$f,L$h=this.width,L$i=this.height,L$j=this.color,L$k=(L$j>>16&255)/255,L$l=(L$j>>8&255)/255,L$m=(255&L$j)/255;L$a.push(L$d,L$e,L$k,L$l,L$m);for(var L$n=0;L$n<L$f+1;L$n++)L$a.push(L$d+Math.sin(L$g*L$n+this.r0)*L$h,L$e+Math.cos(L$g*L$n+this.r0)*L$i),L$a.push(L$k,L$l,L$m);for(L$n=0;L$n<L$f;L$n++)L$b.push(L$c,L$c+L$n+1,L$c+L$n+2)},L$b.createLine2=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g,L$h,L$i,L$j,L$k,L$l,L$m,L$n,L$o,L$p,L$q,L$r,L$s,L$t,L$u,L$v,L$y,L$z,L$A,L$B,L$C=L$a.concat(),L$D=L$e,L$E=this.borderColor,L$F=(L$E>>16&255)/255,L$G=(L$E>>8&255)/255,L$H=(255&L$E)/255,L$I=L$C.length/2,L$J=L$d,L$K=L$c/2;L$i=L$C[0],L$j=L$C[1],L$p=L$i-(L$k=L$C[2]),L$o=(L$o=-(L$j-(L$l=L$C[3])))/(L$B=Math.sqrt(L$o*L$o+L$p*L$p))*L$K,L$p=L$p/L$B*L$K,L$D.push(L$i-L$o+this.x,L$j-L$p+this.y,L$F,L$G,L$H,L$i+L$o+this.x,L$j+L$p+this.y,L$F,L$G,L$H);for(var L$L=1;L$L<L$I-1;L$L++)L$i=L$C[2*(L$L-1)],L$j=L$C[2*(L$L-1)+1],L$k=L$C[2*L$L],L$l=L$C[2*L$L+1],L$m=L$C[2*(L$L+1)],L$n=L$C[2*(L$L+1)+1],L$p=L$i-L$k,L$r=L$k-L$m,L$u=(-(L$o=(L$o=-(L$j-L$l))/(L$B=Math.sqrt(L$o*L$o+L$p*L$p))*L$K)+L$i)*(-(L$p=L$p/L$B*L$K)+L$l)-(-L$o+L$k)*(-L$p+L$j),L$z=(-(L$q=(L$q=-(L$l-L$n))/(L$B=Math.sqrt(L$q*L$q+L$r*L$r))*L$K)+L$m)*(-(L$r=L$r/L$B*L$K)+L$l)-(-L$q+L$k)*(-L$r+L$n),L$A=(L$s=-L$p+L$j-(-L$p+L$l))*(L$y=-L$q+L$k-(-L$q+L$m))-(L$v=-L$r+L$n-(-L$r+L$l))*(L$t=-L$o+L$k-(-L$o+L$i)),Math.abs(L$A)<.1?(L$A+=10.1,L$D.push(L$k-L$o+this.x,L$l-L$p+this.y,L$F,L$G,L$H,L$k+L$o+this.x,L$l+L$p+this.y,L$F,L$G,L$H)):(((L$g=(L$t*L$z-L$y*L$u)/L$A)-L$k)*(L$g-L$k)+((L$h=(L$v*L$u-L$s*L$z)/L$A)-L$l)+(L$h-L$l),L$D.push(L$g+this.x,L$h+this.y,L$F,L$G,L$H,L$k-(L$g-L$k)+this.x,L$l-(L$h-L$l)+this.y,L$F,L$G,L$H));L$i=L$C[L$C.length-4],L$j=L$C[L$C.length-3],L$p=L$i-(L$k=L$C[L$C.length-2]),L$o=(L$o=-(L$j-(L$l=L$C[L$C.length-1])))/(L$B=Math.sqrt(L$o*L$o+L$p*L$p))*L$K,L$p=L$p/L$B*L$K,L$D.push(L$k-L$o+this.x,L$l-L$p+this.y,L$F,L$G,L$H,L$k+L$o+this.x,L$l+L$p+this.y,L$F,L$G,L$H);var L$M=L$f;for(L$L=1;L$L<L$M;L$L++)L$b.push(L$J+2*(L$L-1),L$J+2*(L$L-1)+1,L$J+2*L$L+1,L$J+2*L$L+1,L$J+2*L$L,L$J+2*(L$L-1));return L$D},L$b.createLine=function(L$a,L$b,L$c,L$d){var L$e=L$a.concat(),L$f=L$a,L$g=this.borderColor,L$h=(L$g>>16&255)/255,L$i=(L$g>>8&255)/255,L$j=(255&L$g)/255;L$e.splice(0,5);var L$k,L$l,L$m,L$n,L$o,L$p,L$q,L$r,L$s,L$t,L$u,L$v,L$y,L$z,L$A,L$B,L$C,L$D,L$E,L$F,L$G=L$e.length/5,L$H=L$d,L$I=L$c/2;L$m=L$e[0],L$n=L$e[1],L$t=L$m-(L$o=L$e[5]),L$s=(L$s=-(L$n-(L$p=L$e[6])))/(L$F=Math.sqrt(L$s*L$s+L$t*L$t))*L$I,L$t=L$t/L$F*L$I,L$f.push(L$m-L$s,L$n-L$t,L$h,L$i,L$j,L$m+L$s,L$n+L$t,L$h,L$i,L$j);for(var L$J=1;L$J<L$G-1;L$J++)L$m=L$e[5*(L$J-1)],L$n=L$e[5*(L$J-1)+1],L$o=L$e[5*L$J],L$p=L$e[5*L$J+1],L$q=L$e[5*(L$J+1)],L$r=L$e[5*(L$J+1)+1],L$t=L$m-L$o,L$v=L$o-L$q,L$A=(-(L$s=(L$s=-(L$n-L$p))/(L$F=Math.sqrt(L$s*L$s+L$t*L$t))*L$I)+L$m)*(-(L$t=L$t/L$F*L$I)+L$p)-(-L$s+L$o)*(-L$t+L$n),L$D=(-(L$u=(L$u=-(L$p-L$r))/(L$F=Math.sqrt(L$u*L$u+L$v*L$v))*L$I)+L$q)*(-(L$v=L$v/L$F*L$I)+L$p)-(-L$u+L$o)*(-L$v+L$r),L$E=(L$y=-L$t+L$n-(-L$t+L$p))*(L$C=-L$u+L$o-(-L$u+L$q))-(L$B=-L$v+L$r-(-L$v+L$p))*(L$z=-L$s+L$o-(-L$s+L$m)),Math.abs(L$E)<.1?(L$E+=10.1,L$f.push(L$o-L$s,L$p-L$t,L$h,L$i,L$j,L$o+L$s,L$p+L$t,L$h,L$i,L$j)):(((L$k=(L$z*L$D-L$C*L$A)/L$E)-L$o)*(L$k-L$o)+((L$l=(L$B*L$A-L$y*L$D)/L$E)-L$p)+(L$l-L$p),L$f.push(L$k,L$l,L$h,L$i,L$j,L$o-(L$k-L$o),L$p-(L$l-L$p),L$h,L$i,L$j));L$m=L$e[L$e.length-10],L$n=L$e[L$e.length-9],L$t=L$m-(L$o=L$e[L$e.length-5]),L$s=(L$s=-(L$n-(L$p=L$e[L$e.length-4])))/(L$F=Math.sqrt(L$s*L$s+L$t*L$t))*L$I,L$t=L$t/L$F*L$I,L$f.push(L$o-L$s,L$p-L$t,L$h,L$i,L$j,L$o+L$s,L$p+L$t,L$h,L$i,L$j);var L$K=this.edges+1;for(L$J=1;L$J<L$K;L$J++)L$b.push(L$H+2*(L$J-1),L$H+2*(L$J-1)+1,L$H+2*L$J+1,L$H+2*L$J+1,L$H+2*L$J,L$H+2*(L$J-1));return L$f},L$b.createLoopLine=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$a.concat(),L$h=L$e||L$a,L$i=this.borderColor,L$j=(L$i>>16&255)/255,L$k=(L$i>>8&255)/255,L$l=(255&L$i)/255;L$g.splice(0,5);var L$m=[L$g[0],L$g[1]],L$n=[L$g[L$g.length-5],L$g[L$g.length-4]],L$o=L$n[0]+.5*(L$m[0]-L$n[0]),L$p=L$n[1]+.5*(L$m[1]-L$n[1]);L$g.unshift(L$o,L$p,0,0,0),L$g.push(L$o,L$p,0,0,0);var L$q,L$r,L$s,L$t,L$u,L$v,L$y,L$z,L$A,L$B,L$C,L$D,L$E,L$F,L$G,L$H,L$I,L$J,L$K,L$L,L$M=L$g.length/5,L$N=L$d,L$O=L$c/2;L$s=L$g[0],L$t=L$g[1],L$B=L$s-(L$u=L$g[5]),L$A=(L$A=-(L$t-(L$v=L$g[6])))/(L$L=Math.sqrt(L$A*L$A+L$B*L$B))*L$O,L$B=L$B/L$L*L$O,L$h.push(L$s-L$A,L$t-L$B,L$j,L$k,L$l,L$s+L$A,L$t+L$B,L$j,L$k,L$l);for(var L$P=1;L$P<L$M-1;L$P++)L$s=L$g[5*(L$P-1)],L$t=L$g[5*(L$P-1)+1],L$u=L$g[5*L$P],L$v=L$g[5*L$P+1],L$y=L$g[5*(L$P+1)],L$z=L$g[5*(L$P+1)+1],L$B=L$s-L$u,L$D=L$u-L$y,L$G=(-(L$A=(L$A=-(L$t-L$v))/(L$L=Math.sqrt(L$A*L$A+L$B*L$B))*L$O)+L$s)*(-(L$B=L$B/L$L*L$O)+L$v)-(-L$A+L$u)*(-L$B+L$t),L$J=(-(L$C=(L$C=-(L$v-L$z))/(L$L=Math.sqrt(L$C*L$C+L$D*L$D))*L$O)+L$y)*(-(L$D=L$D/L$L*L$O)+L$v)-(-L$C+L$u)*(-L$D+L$z),L$K=(L$E=-L$B+L$t-(-L$B+L$v))*(L$I=-L$C+L$u-(-L$C+L$y))-(L$H=-L$D+L$z-(-L$D+L$v))*(L$F=-L$A+L$u-(-L$A+L$s)),Math.abs(L$K)<.1?(L$K+=10.1,L$h.push(L$u-L$A,L$v-L$B,L$j,L$k,L$l,L$u+L$A,L$v+L$B,L$j,L$k,L$l)):(((L$q=(L$F*L$J-L$I*L$G)/L$K)-L$u)*(L$q-L$u)+((L$r=(L$H*L$G-L$E*L$J)/L$K)-L$v)+(L$r-L$v),L$h.push(L$q,L$r,L$j,L$k,L$l,L$u-(L$q-L$u),L$v-(L$r-L$v),L$j,L$k,L$l));L$f&&(L$b=L$f);var L$Q=this.edges+1;for(L$P=1;L$P<L$Q;L$P++)L$b.push(L$N+2*(L$P-1),L$N+2*(L$P-1)+1,L$N+2*L$P+1,L$N+2*L$P+1,L$N+2*L$P,L$N+2*(L$P-1));return L$b.push(L$N+2*(L$P-1),L$N+2*(L$P-1)+1,L$N+1,L$N+1,L$N,L$N+2*(L$P-1)),L$h},L$a}(),L$da=function(){function L$p(){}return L$m(L$p,"laya.webgl.shapes.Earcut"),L$p.earcut=function(L$a,L$b,L$c){L$c=L$c||2;var L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k=L$b&&L$b.length,L$l=L$k?L$b[0]*L$c:L$a.length,L$m=L$p.linkedList(L$a,0,L$l,L$c,!0),L$n=[];if(!L$m)return L$n;if(L$k&&(L$m=L$p.eliminateHoles(L$a,L$b,L$m,L$c)),L$a.length>80*L$c){L$d=L$f=L$a[0],L$e=L$g=L$a[1];for(var L$o=L$c;L$o<L$l;L$o+=L$c)(L$h=L$a[L$o])<L$d&&(L$d=L$h),(L$i=L$a[L$o+1])<L$e&&(L$e=L$i),L$f<L$h&&(L$f=L$h),L$g<L$i&&(L$g=L$i);L$j=0!==(L$j=Math.max(L$f-L$d,L$g-L$e))?1/L$j:0}return L$p.earcutLinked(L$m,L$n,L$c,L$d,L$e,L$j),L$n},L$p.linkedList=function(L$a,L$b,L$c,L$d,L$e){var L$f,L$g;if(L$e===0<L$p.signedArea(L$a,L$b,L$c,L$d))for(L$f=L$b;L$f<L$c;L$f+=L$d)L$g=L$p.insertNode(L$f,L$a[L$f],L$a[L$f+1],L$g);else for(L$f=L$c-L$d;L$b<=L$f;L$f-=L$d)L$g=L$p.insertNode(L$f,L$a[L$f],L$a[L$f+1],L$g);return L$g&&L$p.equals(L$g,L$g.next)&&(L$p.removeNode(L$g),L$g=L$g.next),L$g},L$p.filterPoints=function(L$a,L$b){if(!L$a)return L$a;L$b||(L$b=L$a);var L$c,L$d=L$a;do{if(L$c=!1,L$d.steiner||!L$p.equals(L$d,L$d.next)&&0!==L$p.area(L$d.prev,L$d,L$d.next))L$d=L$d.next;else{if(L$p.removeNode(L$d),(L$d=L$b=L$d.prev)===L$d.next)break;L$c=!0}}while(L$c||L$d!==L$b);return L$b},L$p.earcutLinked=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){if(L$a){!L$g&&L$f&&L$p.indexCurve(L$a,L$d,L$e,L$f);for(var L$h,L$i,L$j=L$a;L$a.prev!==L$a.next;)if(L$h=L$a.prev,L$i=L$a.next,L$f?L$p.isEarHashed(L$a,L$d,L$e,L$f):L$p.isEar(L$a))L$b.push(L$h.i/L$c),L$b.push(L$a.i/L$c),L$b.push(L$i.i/L$c),L$p.removeNode(L$a),L$a=L$i.next,L$j=L$i.next;else if((L$a=L$i)===L$j){L$g?1===L$g?(L$a=L$p.cureLocalIntersections(L$a,L$b,L$c),L$p.earcutLinked(L$a,L$b,L$c,L$d,L$e,L$f,2)):2===L$g&&L$p.splitEarcut(L$a,L$b,L$c,L$d,L$e,L$f):L$p.earcutLinked(L$p.filterPoints(L$a,null),L$b,L$c,L$d,L$e,L$f,1);break}}},L$p.isEar=function(L$a){var L$b=L$a.prev,L$c=L$a,L$d=L$a.next;if(0<=L$p.area(L$b,L$c,L$d))return!1;for(var L$e=L$a.next.next;L$e!==L$a.prev;){if(L$p.pointInTriangle(L$b.x,L$b.y,L$c.x,L$c.y,L$d.x,L$d.y,L$e.x,L$e.y)&&0<=L$p.area(L$e.prev,L$e,L$e.next))return!1;L$e=L$e.next}return!0},L$p.isEarHashed=function(L$a,L$b,L$c,L$d){var L$e=L$a.prev,L$f=L$a,L$g=L$a.next;if(0<=L$p.area(L$e,L$f,L$g))return!1;for(var L$h=L$e.x<L$f.x?L$e.x<L$g.x?L$e.x:L$g.x:L$f.x<L$g.x?L$f.x:L$g.x,L$i=L$e.y<L$f.y?L$e.y<L$g.y?L$e.y:L$g.y:L$f.y<L$g.y?L$f.y:L$g.y,L$j=L$e.x>L$f.x?L$e.x>L$g.x?L$e.x:L$g.x:L$f.x>L$g.x?L$f.x:L$g.x,L$k=L$e.y>L$f.y?L$e.y>L$g.y?L$e.y:L$g.y:L$f.y>L$g.y?L$f.y:L$g.y,L$l=L$p.zOrder(L$h,L$i,L$b,L$c,L$d),L$m=L$p.zOrder(L$j,L$k,L$b,L$c,L$d),L$n=L$a.nextZ;L$n&&L$n.z<=L$m;){if(L$n!==L$a.prev&&L$n!==L$a.next&&L$p.pointInTriangle(L$e.x,L$e.y,L$f.x,L$f.y,L$g.x,L$g.y,L$n.x,L$n.y)&&0<=L$p.area(L$n.prev,L$n,L$n.next))return!1;L$n=L$n.nextZ}for(L$n=L$a.prevZ;L$n&&L$n.z>=L$l;){if(L$n!==L$a.prev&&L$n!==L$a.next&&L$p.pointInTriangle(L$e.x,L$e.y,L$f.x,L$f.y,L$g.x,L$g.y,L$n.x,L$n.y)&&0<=L$p.area(L$n.prev,L$n,L$n.next))return!1;L$n=L$n.prevZ}return!0},L$p.cureLocalIntersections=function(L$a,L$b,L$c){var L$d=L$a;do{var L$e=L$d.prev,L$f=L$d.next.next;!L$p.equals(L$e,L$f)&&L$p.intersects(L$e,L$d,L$d.next,L$f)&&L$p.locallyInside(L$e,L$f)&&L$p.locallyInside(L$f,L$e)&&(L$b.push(L$e.i/L$c),L$b.push(L$d.i/L$c),L$b.push(L$f.i/L$c),L$p.removeNode(L$d),L$p.removeNode(L$d.next),L$d=L$a=L$f),L$d=L$d.next}while(L$d!==L$a);return L$d},L$p.splitEarcut=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$a;do{for(var L$h=L$g.next.next;L$h!==L$g.prev;){if(L$g.i!==L$h.i&&L$p.isValidDiagonal(L$g,L$h)){var L$i=L$p.splitPolygon(L$g,L$h);return L$g=L$p.filterPoints(L$g,L$g.next),L$i=L$p.filterPoints(L$i,L$i.next),L$p.earcutLinked(L$g,L$b,L$c,L$d,L$e,L$f),void L$p.earcutLinked(L$i,L$b,L$c,L$d,L$e,L$f)}L$h=L$h.next}L$g=L$g.next}while(L$g!==L$a)},L$p.eliminateHoles=function(L$a,L$b,L$c,L$d){var L$e,L$f,L$g,L$h,L$i,L$j=[];for(L$e=0,L$f=L$b.length;L$e<L$f;L$e++)L$g=L$b[L$e]*L$d,L$h=L$e<L$f-1?L$b[L$e+1]*L$d:L$a.length,(L$i=L$p.linkedList(L$a,L$g,L$h,L$d,!1))===L$i.next&&(L$i.steiner=!0),L$j.push(L$p.getLeftmost(L$i));for(L$j.sort(L$p.compareX),L$e=0;L$e<L$j.length;L$e++)L$p.eliminateHole(L$j[L$e],L$c),L$c=L$p.filterPoints(L$c,L$c.next);return L$c},L$p.compareX=function(L$a,L$b){return L$a.x-L$b.x},L$p.eliminateHole=function(L$a,L$b){if(L$b=L$p.findHoleBridge(L$a,L$b)){var L$c=L$p.splitPolygon(L$b,L$a);L$p.filterPoints(L$c,L$c.next)}},L$p.findHoleBridge=function(L$a,L$b){var L$c,L$d=L$b,L$e=L$a.x,L$f=L$a.y,L$g=-1/0;do{if(L$f<=L$d.y&&L$f>=L$d.next.y&&L$d.next.y!==L$d.y){var L$h=L$d.x+(L$f-L$d.y)*(L$d.next.x-L$d.x)/(L$d.next.y-L$d.y);if(L$h<=L$e&&L$g<L$h){if((L$g=L$h)===L$e){if(L$f===L$d.y)return L$d;if(L$f===L$d.next.y)return L$d.next}L$c=L$d.x<L$d.next.x?L$d:L$d.next}}L$d=L$d.next}while(L$d!==L$b);if(!L$c)return null;if(L$e===L$g)return L$c.prev;var L$i,L$j=L$c,L$k=L$c.x,L$l=L$c.y,L$m=1/0;for(L$d=L$c.next;L$d!==L$j;)L$e>=L$d.x&&L$d.x>=L$k&&L$e!==L$d.x&&L$p.pointInTriangle(L$f<L$l?L$e:L$g,L$f,L$k,L$l,L$f<L$l?L$g:L$e,L$f,L$d.x,L$d.y)&&((L$i=Math.abs(L$f-L$d.y)/(L$e-L$d.x))<L$m||L$i===L$m&&L$d.x>L$c.x)&&L$p.locallyInside(L$d,L$a)&&(L$c=L$d,L$m=L$i),L$d=L$d.next;return L$c},L$p.indexCurve=function(L$a,L$b,L$c,L$d){for(var L$e=L$a;null===L$e.z&&(L$e.z=L$p.zOrder(L$e.x,L$e.y,L$b,L$c,L$d)),L$e.prevZ=L$e.prev,L$e.nextZ=L$e.next,(L$e=L$e.next)!==L$a;);L$e.prevZ.nextZ=null,L$e.prevZ=null,L$p.sortLinked(L$e)},L$p.sortLinked=function(L$a){var L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j=1;do{for(L$c=L$a,L$f=L$a=null,L$g=0;L$c;){for(L$g++,L$d=L$c,L$b=L$h=0;L$b<L$j&&(L$h++,L$d=L$d.nextZ);L$b++);for(L$i=L$j;0<L$h||0<L$i&&L$d;)0!==L$h&&(0===L$i||!L$d||L$c.z<=L$d.z)?(L$c=(L$e=L$c).nextZ,L$h--):(L$d=(L$e=L$d).nextZ,L$i--),L$f?L$f.nextZ=L$e:L$a=L$e,L$e.prevZ=L$f,L$f=L$e;L$c=L$d}L$f.nextZ=null,L$j*=2}while(1<L$g);return L$a},L$p.zOrder=function(L$a,L$b,L$c,L$d,L$e){return(L$a=1431655765&((L$a=858993459&((L$a=252645135&((L$a=16711935&((L$a=32767*(L$a-L$c)*L$e)|L$a<<8))|L$a<<4))|L$a<<2))|L$a<<1))|(L$b=1431655765&((L$b=858993459&((L$b=252645135&((L$b=16711935&((L$b=32767*(L$b-L$d)*L$e)|L$b<<8))|L$b<<4))|L$b<<2))|L$b<<1))<<1},L$p.getLeftmost=function(L$a){for(var L$b=L$a,L$c=L$a;L$b.x<L$c.x&&(L$c=L$b),(L$b=L$b.next)!==L$a;);return L$c},L$p.pointInTriangle=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){return 0<=(L$e-L$g)*(L$b-L$h)-(L$a-L$g)*(L$f-L$h)&&0<=(L$a-L$g)*(L$d-L$h)-(L$c-L$g)*(L$b-L$h)&&0<=(L$c-L$g)*(L$f-L$h)-(L$e-L$g)*(L$d-L$h)},L$p.isValidDiagonal=function(L$a,L$b){return L$a.next.i!==L$b.i&&L$a.prev.i!==L$b.i&&!L$p.intersectsPolygon(L$a,L$b)&&L$p.locallyInside(L$a,L$b)&&L$p.locallyInside(L$b,L$a)&&L$p.middleInside(L$a,L$b)},L$p.area=function(L$a,L$b,L$c){return(L$b.y-L$a.y)*(L$c.x-L$b.x)-(L$b.x-L$a.x)*(L$c.y-L$b.y)},L$p.equals=function(L$a,L$b){return L$a.x===L$b.x&&L$a.y===L$b.y},L$p.intersects=function(L$a,L$b,L$c,L$d){return!!(L$p.equals(L$a,L$b)&&L$p.equals(L$c,L$d)||L$p.equals(L$a,L$d)&&L$p.equals(L$c,L$b))||0<L$p.area(L$a,L$b,L$c)!=0<L$p.area(L$a,L$b,L$d)&&0<L$p.area(L$c,L$d,L$a)!=0<L$p.area(L$c,L$d,L$b)},L$p.intersectsPolygon=function(L$a,L$b){var L$c=L$a;do{if(L$c.i!==L$a.i&&L$c.next.i!==L$a.i&&L$c.i!==L$b.i&&L$c.next.i!==L$b.i&&L$p.intersects(L$c,L$c.next,L$a,L$b))return!0;L$c=L$c.next}while(L$c!==L$a);return!1},L$p.locallyInside=function(L$a,L$b){return L$p.area(L$a.prev,L$a,L$a.next)<0?0<=L$p.area(L$a,L$b,L$a.next)&&0<=L$p.area(L$a,L$a.prev,L$b):L$p.area(L$a,L$b,L$a.prev)<0||L$p.area(L$a,L$a.next,L$b)<0},L$p.middleInside=function(L$a,L$b){for(var L$c=L$a,L$d=!1,L$e=(L$a.x+L$b.x)/2,L$f=(L$a.y+L$b.y)/2;L$c.y>L$f!=L$c.next.y>L$f&&L$c.next.y!==L$c.y&&L$e<(L$c.next.x-L$c.x)*(L$f-L$c.y)/(L$c.next.y-L$c.y)+L$c.x&&(L$d=!L$d),(L$c=L$c.next)!==L$a;);return L$d},L$p.splitPolygon=function(L$a,L$b){var L$c=new L$ea(L$a.i,L$a.x,L$a.y),L$d=new L$ea(L$b.i,L$b.x,L$b.y),L$e=L$a.next,L$f=L$b.prev;return(L$a.next=L$b).prev=L$a,(L$c.next=L$e).prev=L$c,(L$d.next=L$c).prev=L$d,(L$f.next=L$d).prev=L$f,L$d},L$p.insertNode=function(L$a,L$b,L$c,L$d){var L$e=new L$ea(L$a,L$b,L$c);return L$d?(L$e.next=L$d.next,(L$e.prev=L$d).next.prev=L$e,L$d.next=L$e):(L$e.prev=L$e).next=L$e,L$e},L$p.removeNode=function(L$a){L$a.next.prev=L$a.prev,L$a.prev.next=L$a.next,L$a.prevZ&&(L$a.prevZ.nextZ=L$a.nextZ),L$a.nextZ&&(L$a.nextZ.prevZ=L$a.prevZ)},L$p.signedArea=function(L$a,L$b,L$c,L$d){for(var L$e=0,L$f=L$b,L$g=L$c-L$d;L$f<L$c;L$f+=L$d)L$e+=(L$a[L$g]-L$a[L$f])*(L$a[L$f+1]+L$a[L$g+1]),L$g=L$f;return L$e},L$p}(),L$ea=function(){function L$a(L$a,L$b,L$c){this.i=null,this.x=null,this.y=null,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=null,this.i=L$a,this.x=L$b,this.y=L$c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return L$m(L$a,"laya.webgl.shapes.EarcutNode"),L$a}(),L$fa=(function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this.lineWidth=L$a,this.lineColor=L$b,this.lineAlpha=L$c,this.fillColor=L$d,this.fillAlpha=L$e,this.shape=L$g,this.fill=L$f}L$m(L$a,"laya.webgl.shapes.GeometryData");var L$b=L$a.prototype;L$b.clone=function(){return new L$a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},L$b.getIndexData=function(){return null},L$b.getVertexData=function(){return null},L$b.destroy=function(){this.shape=null}}(),function(){function L$a(L$a){if(L$a instanceof Float32Array)this.points=L$a;else if(L$a instanceof Array){L$a.length;this.points=new Float32Array(L$a)}}L$m(L$a,"laya.webgl.shapes.Vertex");var L$b=L$a.prototype;L$y.imps(L$b,{"laya.webgl.shapes.IShape":!0}),L$b.getData=function(L$a,L$b,L$c){},L$b.needUpdate=function(L$a){return!1},L$b.rebuild=function(L$a){},L$b.setMatrix=function(L$a){}}(),function(){function L$i(L$a){void 0===L$a&&(L$a=1e4),this._renderType=L$a}L$m(L$i,"laya.webgl.submit.Submit");var L$a=L$i.prototype;return L$y.imps(L$a,{"laya.webgl.submit.ISubmit":!0}),L$a.releaseRender=function(){var L$a=L$i._cache;(L$a[L$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},L$a.getRenderType=function(){return this._renderType},L$a.renderSubmit=function(){if(0===this._numEle)return 1;var L$a=this.shaderValue.textureHost;if(L$a){var L$b=L$a.source;if(!L$a.bitmap||!L$b)return 1;this.shaderValue.texture=L$b,L$a.alphaTexture&&L$a.alphaTexture.source&&(this.shaderValue.texture1=L$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var L$c=L$ua.mainContext;return this.shaderValue.upload(),L$S.activeBlendFunction!==this._blendFn&&(L$c.enable(3042),this._blendFn(L$c),L$S.activeBlendFunction=this._blendFn),L$G.drawCall++,L$G.trianglesFaces+=this._numEle/3,L$c.drawElements(4,this._numEle,5123,this._startIdx),1},L$i.__init__=function(){var L$a=L$i.RENDERBASE=new L$i(-1);L$a.shaderValue=new L$Aa(0,0),L$a.shaderValue.ALPHA=-1234},L$i.createSubmit=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$i._cache._length?L$i._cache[--L$i._cache._length]:new L$i;null==L$c&&((L$c=L$f._selfVb||(L$f._selfVb=L$xa.create(-1))).clear(),L$d=0),L$f._ib=L$b,L$f._vb=L$c,L$f._startIdx=L$d*L$pa.BYTES_PIDX,L$f._numEle=0;var L$g=L$a._nBlendType;L$f._blendFn=L$a._targets?L$S.targetFns[L$g]:L$S.fns[L$g],L$f.shaderValue=L$e,L$f.shaderValue.setValue(L$a._shader2D);var L$h=L$a._shader2D.filters;return L$h&&L$f.shaderValue.setFilters(L$h),L$f},L$i.createShape=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$i._cache._length?L$i._cache[--L$i._cache._length]:new L$i;L$g._ib=L$b,L$g._vb=L$c,L$g._numEle=L$d,L$g._startIdx=L$e,L$g.shaderValue=L$f,L$g.shaderValue.setValue(L$a._shader2D);var L$h=L$a._nBlendType;return L$g._blendFn=L$a._targets?L$S.targetFns[L$h]:L$S.fns[L$h],L$g},L$i.TYPE_2D=1e4,L$i.TYPE_CANVAS=10003,L$i.TYPE_CMDSETRT=10004,L$i.TYPE_CUSTOM=10005,L$i.TYPE_BLURRT=10006,L$i.TYPE_CMDDESTORYPRERT=10007,L$i.TYPE_DISABLESTENCIL=10008,L$i.TYPE_OTHERIBVB=10009,L$i.TYPE_PRIMITIVE=10010,L$i.TYPE_RT=10011,L$i.TYPE_BLUR_RT=10012,L$i.TYPE_TARGET=10013,L$i.TYPE_CHANGE_VALUE=10014,L$i.TYPE_SHAPE=10015,L$i.TYPE_TEXTURE=10016,L$i.TYPE_FILLTEXTURE=10017,L$i.RENDERBASE=null,L$i._cache=((L$i._cache=[])._length=0,L$i._cache),L$i}()),L$ga=function(){function L$d(){this.fun=null,this.args=null}L$m(L$d,"laya.webgl.submit.SubmitCMD");var L$a=L$d.prototype;return L$y.imps(L$a,{"laya.webgl.submit.ISubmit":!0}),L$a.renderSubmit=function(){return this.fun.apply(null,this.args),1},L$a.getRenderType=function(){return 0},L$a.releaseRender=function(){var L$a=L$d._cache;L$a[L$a._length++]=this},L$d.create=function(L$a,L$b){var L$c=L$d._cache._length?L$d._cache[--L$d._cache._length]:new L$d;return L$c.fun=L$b,L$c.args=L$a,L$c},L$d._cache=((L$d._cache=[])._length=0,L$d._cache),L$d}(),L$ha=function(){function L$b(){this.variables={}}L$m(L$b,"laya.webgl.submit.SubmitCMDScope");var L$a=L$b.prototype;return L$a.getValue=function(L$a){return this.variables[L$a]},L$a.addValue=function(L$a,L$b){return this.variables[L$a]=L$b},L$a.setValue=function(L$a,L$b){return this.variables.hasOwnProperty(L$a)?this.variables[L$a]=L$b:null},L$a.clear=function(){for(var L$a in this.variables)delete this.variables[L$a]},L$a.recycle=function(){this.clear(),L$b.POOL.push(this)},L$b.create=function(){var L$a=L$b.POOL.pop();return L$a||(L$a=new L$b),L$a},L$b.POOL=[],L$b}(),L$ia=function(){function L$l(){this.offset=0,this.startIndex=0,this._mat=L$B.create()}L$m(L$l,"laya.webgl.submit.SubmitOtherIBVB");var L$a=L$l.prototype;return L$y.imps(L$a,{"laya.webgl.submit.ISubmit":!0}),L$a.releaseRender=function(){var L$a=L$l._cache;(L$a[L$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},L$a.getRenderType=function(){return 10009},L$a.renderSubmit=function(){var L$a=this._shaderValue.textureHost;if(L$a){var L$b=L$a.source;if(!L$a.bitmap||!L$b)return 1;this._shaderValue.texture=L$b}this._vb.bind_upload(this._ib);var L$c=L$sa.worldMatrix4,L$d=L$B.TEMP;L$B.mulPre(this._mat,L$c[0],L$c[1],L$c[4],L$c[5],L$c[12],L$c[13],L$d);var L$e=L$sa.worldMatrix4=L$l.tempMatrix4;L$e[0]=L$d.a,L$e[1]=L$d.b,L$e[4]=L$d.c,L$e[5]=L$d.d,L$e[12]=L$d.tx,L$e[13]=L$d.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var L$f=L$ua.mainContext;return L$S.activeBlendFunction!==this._blendFn&&(L$f.enable(3042),this._blendFn(L$f),L$S.activeBlendFunction=this._blendFn),L$G.drawCall++,L$G.trianglesFaces+=this._numEle/3,L$f.drawElements(4,this._numEle,5123,this.startIndex),L$sa.worldMatrix4=L$c,L$La.activeShader=null,1},L$l.create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){void 0===L$i&&(L$i=0);var L$j=L$l._cache._length?L$l._cache[--L$l._cache._length]:new L$l;L$j._ib=L$c,L$j._vb=L$b,L$j._numEle=L$d,L$j._shader=L$e,L$j._shaderValue=L$f;var L$k=L$a._nBlendType;switch(L$j._blendFn=L$a._targets?L$S.targetFns[L$k]:L$S.fns[L$k],L$i){case 0:L$j.offset=0,L$j.startIndex=L$h/(L$pa.BYTES_PE*L$b.vertexStride)*1.5,L$j.startIndex*=L$pa.BYTES_PIDX;break;case 1:L$j.startIndex=L$g,L$j.offset=L$h}return L$j},L$l._cache=((L$l._cache=[])._length=0,L$l._cache),L$l.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L$l}(),L$ja=function(){function L$c(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new L$D,this.screenRect=new L$D}L$m(L$c,"laya.webgl.submit.SubmitScissor");var L$a=L$c.prototype;return L$y.imps(L$a,{"laya.webgl.submit.ISubmit":!0}),L$a._scissor=function(L$a,L$b,L$c,L$d){var L$e=L$sa.worldMatrix4,L$f=L$e[0],L$g=L$e[5],L$h=L$e[12],L$i=L$e[13];if(L$d*=L$g,(L$c*=L$f)<1||L$d<1)return!1;var L$j=(L$a=L$a*L$f+L$h)+L$c,L$k=(L$b=L$b*L$g+L$i)+L$d;L$a<0&&(L$c=L$j-(L$a=0)),L$b<0&&(L$d=L$k-(L$b=0));var L$l=L$sa.worldClipRect;if(L$a=Math.max(L$a,L$l.x),L$b=Math.max(L$b,L$l.y),L$c=Math.min(L$j,L$l.right)-L$a,L$d=Math.min(L$k,L$l.bottom)-L$b,L$c<1||L$d<1)return!1;var L$m=L$sa.worldScissorTest;return this.screenRect.copyFrom(L$l),L$l.x=L$a,L$l.y=L$b,L$l.width=L$c,L$l.height=L$d,L$sa.worldScissorTest=!0,L$b=L$sa.height-L$b-L$d,L$ua.mainContext.scissor(L$a,L$b,L$c,L$d),L$ua.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),L$m?(L$b=L$sa.height-this.screenRect.y-this.screenRect.height,L$ua.mainContext.scissor(this.screenRect.x,L$b,this.screenRect.width,this.screenRect.height),L$ua.mainContext.enable(3089)):(L$ua.mainContext.disable(3089),L$sa.worldScissorTest=!1),L$l.copyFrom(this.screenRect),!0},L$a._scissorWithTagart=function(L$a,L$b,L$c,L$d){if(L$c<1||L$d<1)return!1;var L$e=L$a+L$c,L$f=L$b+L$d;L$a<0&&(L$c=L$e-(L$a=0)),L$b<0&&(L$d=L$f-(L$b=0));var L$g=L$sa.worldClipRect;if(L$a=Math.max(L$a,L$g.x),L$b=Math.max(L$b,L$g.y),L$c=Math.min(L$e,L$g.right)-L$a,L$d=Math.min(L$f,L$g.bottom)-L$b,L$c<1||L$d<1)return!1;var L$h=L$sa.worldScissorTest;return this.screenRect.copyFrom(L$g),L$sa.worldScissorTest=!0,L$g.x=L$a,L$g.y=L$b,L$g.width=L$c,L$g.height=L$d,L$b=L$sa.height-L$b-L$d,L$ua.mainContext.scissor(L$a,L$b,L$c,L$d),L$ua.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),L$h?(L$b=L$sa.height-this.screenRect.y-this.screenRect.height,L$ua.mainContext.scissor(this.screenRect.x,L$b,this.screenRect.width,this.screenRect.height),L$ua.mainContext.enable(3089)):(L$ua.mainContext.disable(3089),L$sa.worldScissorTest=!1),L$g.copyFrom(this.screenRect),!0},L$a.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1||(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height)),this.submitLength+1},L$a.getRenderType=function(){return 0},L$a.releaseRender=function(){var L$a=L$c._cache;(L$a[L$a._length++]=this).context=null},L$c.create=function(L$a){var L$b=L$c._cache._length?L$c._cache[--L$c._cache._length]:new L$c;return L$b.context=L$a,L$b},L$c._cache=((L$c._cache=[])._length=0,L$c._cache),L$c}(),L$ka=function(){function L$i(){this.step=0,this.blendMode=null,this.level=0}L$m(L$i,"laya.webgl.submit.SubmitStencil");var L$a=L$i.prototype;return L$y.imps(L$a,{"laya.webgl.submit.ISubmit":!0}),L$a.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6();break;case 7:this.do7();break;case 8:this.do8()}return 1},L$a.getRenderType=function(){return 0},L$a.releaseRender=function(){var L$a=L$i._cache;L$a[L$a._length++]=this},L$a.do1=function(){var L$a=L$ua.mainContext;L$a.enable(2960),L$a.clear(1024),L$a.colorMask(!1,!1,!1,!1),L$a.stencilFunc(514,this.level,255),L$a.stencilOp(7680,7680,7682)},L$a.do2=function(){var L$a=L$ua.mainContext;L$a.stencilFunc(514,this.level+1,255),L$a.colorMask(!0,!0,!0,!0),L$a.stencilOp(7680,7680,7680)},L$a.do3=function(){var L$a=L$ua.mainContext;L$a.colorMask(!0,!0,!0,!0),L$a.stencilOp(7680,7680,7680),L$a.clear(1024),L$a.disable(2960)},L$a.do4=function(){var L$a=L$ua.mainContext;0==this.level&&(L$a.enable(2960),L$a.clear(1024)),L$a.colorMask(!1,!1,!1,!1),L$a.stencilFunc(519,0,255),L$a.stencilOp(7680,7680,7682)},L$a.do5=function(){var L$a=L$ua.mainContext;L$a.stencilFunc(514,this.level,255),L$a.colorMask(!0,!0,!0,!0),L$a.stencilOp(7680,7680,7680)},L$a.do6=function(){var L$a=L$ua.mainContext;L$S.targetFns[L$S.TOINT[this.blendMode]](L$a)},L$a.do7=function(){var L$a=L$ua.mainContext;L$a.colorMask(!1,!1,!1,!1),L$a.stencilOp(7680,7680,7683)},L$a.do8=function(){var L$a=L$ua.mainContext;L$a.colorMask(!0,!0,!0,!0),L$a.stencilFunc(514,this.level,255),L$a.stencilOp(7680,7680,7680)},L$i.restore=function(L$a,L$b,L$c,L$d,L$e){var L$f;if((L$a._renderKey=0)<L$i._mask&&L$i._mask--,0==L$i._mask)L$f=laya.webgl.submit.SubmitStencil.create(3),L$a.addRenderObject(L$f),L$a._curSubmit=L$fa.RENDERBASE;else{L$f=laya.webgl.submit.SubmitStencil.create(7),L$a.addRenderObject(L$f);var L$g=L$a._vb;L$g._byteLength;if(L$qa.fillRectImgVb(L$g,null,L$b.x,L$b.y,L$b.width,L$b.height,L$K.DEF_UV,L$c,L$d,L$e,0,0)){L$a._shader2D.glTexture=null;var L$h=L$a._curSubmit=L$fa.createSubmit(L$a,L$a._ib,L$g,(L$g._byteLength-64)/32*3,L$Aa.create(2,0));L$h.shaderValue.ALPHA=1,L$a._submits[L$a._submits._length++]=L$h,L$a._curSubmit._numEle+=6,L$a._curSubmit=L$fa.RENDERBASE}else alert("clipRect calc stencil rect error");L$f=laya.webgl.submit.SubmitStencil.create(8),L$a.addRenderObject(L$f)}},L$i.restore2=function(L$a,L$b){var L$c;(L$a._renderKey=0)<L$i._mask&&L$i._mask--,0==L$i._mask?(L$c=laya.webgl.submit.SubmitStencil.create(3),L$a.addRenderObject(L$c),L$a._curSubmit=L$fa.RENDERBASE):(L$c=laya.webgl.submit.SubmitStencil.create(7),L$a.addRenderObject(L$c),L$a._submits[L$a._submits._length++]=L$b,L$c=laya.webgl.submit.SubmitStencil.create(8),L$a.addRenderObject(L$c))},L$i.create=function(L$a){var L$b=L$i._cache._length?L$i._cache[--L$i._cache._length]:new L$i;return 5==(L$b.step=L$a)&&++L$i._mask,L$b.level=L$i._mask,L$b},L$i._cache=((L$i._cache=[])._length=0,L$i._cache),L$i._mask=0,L$i}(),L$la=function(){function L$h(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}L$m(L$h,"laya.webgl.submit.SubmitTarget");var L$a=L$h.prototype;return L$y.imps(L$a,{"laya.webgl.submit.ISubmit":!0}),L$a.renderSubmit=function(){this._vb.bind_upload(this._ib);var L$a=this.scope.getValue(this.proName);return L$a&&(this.shaderValue.texture=L$a.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[L$a.width,L$a.height]),this.shaderValue.upload(),this.blend(),L$G.drawCall++,L$G.trianglesFaces+=this._numEle/3,L$ua.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},L$a.blend=function(){if(L$S.activeBlendFunction!==L$S.fns[this.blendType]){var L$a=L$ua.mainContext;L$a.enable(3042),L$S.fns[this.blendType](L$a),L$S.activeBlendFunction=L$S.fns[this.blendType]}},L$a.getRenderType=function(){return 0},L$a.releaseRender=function(){var L$a=L$h._cache;(L$a[L$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._vb=null,this._ib=null},L$h.create=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$h._cache._length?L$h._cache[--L$h._cache._length]:new L$h;return L$g._ib=L$b,L$g._vb=L$c,L$g.proName=L$f,L$g._startIdx=L$d*L$pa.BYTES_PIDX,L$g._numEle=0,L$g.blendType=L$a._nBlendType,L$g.shaderValue=L$e,L$g.shaderValue.setValue(L$a._shader2D),L$g},L$h._cache=((L$h._cache=[])._length=0,L$h._cache),L$h}(),L$ma=function(){function L$a(){this._sourceStr=null}L$m(L$a,"laya.webgl.text.CharSegment");var L$b=L$a.prototype;return L$y.imps(L$b,{"laya.webgl.text.ICharSegment":!0}),L$b.textToSpit=function(L$a){this._sourceStr=L$a},L$b.getChar=function(L$a){return this._sourceStr.charAt(L$a)},L$b.getCharCode=function(L$a){return this._sourceStr.charCodeAt(L$a)},L$b.length=function(){return this._sourceStr.length},L$a}(),L$na=function(){var L$a;function L$G(){}return L$m(L$G,"laya.webgl.text.DrawText"),L$G.__init__=function(){L$G._charsTemp=new Array,L$G._drawValue=new L$a,L$G._charSeg=new L$ma},L$G.customCharSeg=function(L$a){L$G._charSeg=L$a},L$G.getChar=function(L$a,L$b,L$c){var L$d=L$Va.createOneChar(L$a,L$c);return-1!=L$b&&(L$G._charsCache[L$b]=L$d),L$d},L$G._drawSlow=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l,L$m,L$n,L$o){var L$p,L$q,L$r=L$G._drawValue.value(L$f,L$h,L$i,L$j,L$m,L$n,L$o),L$s=0,L$t=0,L$u=L$G._charsTemp,L$v=0,L$y=NaN;if(L$d)for(L$u.length=L$d.length,L$s=0,L$t=L$d.length;L$s<L$t;L$s++)(L$q=L$d[L$s])&&(L$y=L$q.charNum+L$r.txtID,L$u[L$s]=L$p=L$G._charsCache[L$y]||L$G.getChar(L$q.char,L$y,L$r),L$p.active());else{var L$z=L$c instanceof laya.utils.WordText?L$c.toString():L$c;if(L$J.CharacterCache){L$G._charSeg.textToSpit(L$z);var L$A=L$G._charSeg.length();for(L$s=0,L$t=L$u.length=L$A;L$s<L$t;L$s++)L$y=L$G._charSeg.getCharCode(L$s)+L$r.txtID,L$u[L$s]=L$p=L$G._charsCache[L$y]||L$G.getChar(L$G._charSeg.getChar(L$s),L$y,L$r),L$p.active(),L$v+=L$p.cw}else L$u.length=0,(L$p=L$G.getChar(L$z,-1,L$r)).active(),L$v+=L$p.cw,L$u[0]=L$p}var L$B=0;null!==L$g&&"left"!==L$g&&(L$B=-("center"==L$g?L$v/2:L$v));var L$C,L$D,L$E=NaN,L$F=0;if(L$d)for(L$s=0,L$t=L$u.length;L$s<L$t;L$s++)L$p=L$u[L$s],L$q=L$d[L$s],L$p&&L$q&&!L$p.isSpace&&(L$E=L$p.borderSize,L$C=L$p.texture,L$b._drawText(L$C,L$k+L$B+L$q.x*L$m-L$E,L$l+L$q.y*L$n-L$E,L$C.width,L$C.height,L$e,0,0,0,0));else{for(L$s=0,L$t=L$u.length;L$s<L$t;L$s++)(L$p=L$u[L$s])&&!L$p.isSpace&&(L$E=L$p.borderSize,L$C=L$p.texture,L$b._drawText(L$C,L$k+L$B-L$E,L$l-L$E,L$C.width,L$C.height,L$e,0,0,0,0),L$a&&((L$D=L$a[L$F++])||(L$D=L$a[L$F-1]=[]),L$D[0]=L$C,L$D[1]=L$B-L$E,L$D[2]=-L$E)),L$B+=L$p.cw;L$a&&(L$a.length=L$F)}},L$G._drawFast=function(L$a,L$b,L$c,L$d,L$e){for(var L$f,L$g,L$h=0,L$i=L$a.length;L$h<L$i;L$h++)(L$f=(L$g=L$a[L$h])[0]).active(),L$b._drawText(L$f,L$d+L$g[1],L$e+L$g[2],L$f.width,L$f.height,L$c,0,0,0,0)},L$G.drawText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l){if(void 0===L$l&&(L$l=0),!(L$b&&0===L$b.length||L$c&&0===L$c.length)){var L$m=L$d.a,L$n=L$d.d;(0!==L$d.b||0!==L$d.c)&&(L$m=L$n=1);var L$o=1!==L$m||1!==L$n;if(L$o&&L$y.stage.transform){var L$p=L$y.stage.transform;L$o=L$p.a===L$m&&L$p.d===L$n}else L$o=!1;if(L$o){var L$q=(L$d=L$d.copyTo(L$za._tmpMatrix)).tx,L$r=L$d.ty;L$d.scale(1/L$m,1/L$n),L$d._checkTransform(),L$j*=L$m,L$k*=L$n,L$j+=L$q-L$d.tx,L$k+=L$r-L$d.ty}else L$m=L$n=1;if(L$c)L$G._drawSlow(null,L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$m,L$n,L$l);else{if(null===L$b.toUpperCase){var L$s=L$m+1e5*L$n,L$t=L$b;return void(L$t.changed||L$t.id!==L$s?(L$t.id=L$s,L$t.changed=!1,L$G._drawSlow(L$t.save,L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$m,L$n,L$l)):L$G._drawFast(L$t.save,L$a,L$d,L$j,L$k))}var L$u=L$b+L$e.toString()+L$g+L$h+L$i+L$m+L$n+L$f,L$v=L$G._textsCache[L$u];L$J.CharacterCache?L$v?L$G._drawFast(L$v,L$a,L$d,L$j,L$k):(L$G._textsCache.__length||(L$G._textsCache.__length=0),L$G._textsCache.__length>L$z.WebGLTextCacheCount&&((L$G._textsCache={}).__length=0,L$G._curPoolIndex=0),L$G._textCachesPool[L$G._curPoolIndex]?(L$v=L$G._textsCache[L$u]=L$G._textCachesPool[L$G._curPoolIndex]).length=0:L$G._textCachesPool[L$G._curPoolIndex]=L$v=L$G._textsCache[L$u]=[],L$G._textsCache.__length++,L$G._curPoolIndex++,L$G._drawSlow(L$v,L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$m,L$n,L$l)):L$G._drawSlow(L$v,L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$m,L$n,L$l)}}},L$G._charsTemp=null,L$G._textCachesPool=[],L$G._curPoolIndex=0,L$G._charsCache={},L$G._textsCache={},L$G._drawValue=null,L$G.d=[],L$G._charSeg=null,L$G.__init$=function(){L$a=function(){function L$i(){}return L$m(L$i,""),L$i.prototype.value=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this.font=L$a,this.fillColor=L$b,this.borderColor=L$c,this.lineWidth=L$d,this.scaleX=L$e,this.scaleY=L$f,this.underLine=L$g;var L$h=L$a.toString()+L$e+L$f+L$d+(L$b?L$b.toLowerCase():" ")+(L$c?L$c.toLowerCase():" ")+L$g;return this.txtID=L$i._keymap[L$h],this.txtID||(this.txtID=1e-7*++L$i._keymapCount,L$i._keymap[L$h]=this.txtID),this},L$i.clear=function(){L$i._keymap={},L$i._keymapCount=1},L$i._keymap={},L$i._keymapCount=1,L$i}()},L$G}(),L$oa=function(){function L$e(L$a){this._index=0,this._size=14,this._italic=-2,L$e._cache2=L$e._cache2||[],this.setFont(L$a||"14px Arial")}L$m(L$e,"laya.webgl.text.FontInContext");var L$a=L$e.prototype;return L$a.setFont=function(L$a){var L$b=L$e._cache2[L$a];if(L$b)this._words=L$b[0],this._size=L$b[1];else{this._words=L$a.split(" ");for(var L$c=0,L$d=this._words.length;L$c<L$d;L$c++)if(0<this._words[L$c].indexOf("px")){this._index=L$c;break}this._size=parseInt(this._words[this._index]),L$e._cache2[L$a]=[this._words,this._size]}this._text=null,this._italic=-2},L$a.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},L$a.hasType=function(L$a){for(var L$b=0,L$c=this._words.length;L$b<L$c;L$b++)if(this._words[L$b]===L$a)return L$b;return-1},L$a.removeType=function(L$a){for(var L$b=0,L$c=this._words.length;L$b<L$c;L$b++)if(this._words[L$b]===L$a){this._words.splice(L$b,1),this._index>L$b&&this._index--;break}this._text=null,this._italic=-2},L$a.copyTo=function(L$a){return L$a._text=this._text,L$a._size=this._size,L$a._index=this._index,L$a._words=this._words.slice(),L$a._italic=-2,L$a},L$a.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},L$d(0,L$a,"size",function(){return this._size},function(L$a){this._size=L$a,this._words[this._index]=L$a+"px",this._text=null}),L$e.create=function(L$a){var L$b=L$e._cache[L$a];return L$b||(L$b=L$e._cache[L$a]=new L$e(L$a))},L$e.EMPTY=new L$e,L$e._cache={},L$e._cache2=null,L$e}(),L$pa=function(){function L$a(){}return L$m(L$a,"laya.webgl.utils.CONST3D2D"),L$a.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L$a.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],L$a.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],L$a._TMPARRAY=[],L$a._OFFSETX=0,L$a._OFFSETY=0,L$g(L$a,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),L$a}(),L$qa=function(){function L$o(){}return L$m(L$o,"laya.webgl.utils.GlUtils"),L$o.make2DProjection=function(L$a,L$b,L$c){return[2/L$a,0,0,0,0,-2/L$b,0,0,0,0,2/L$c,0,-1,1,0,1]},L$o.fillIBQuadrangle=function(L$a,L$b){if(65535/4<L$b)throw Error("IBQuadrangle count:"+L$b+" must<:"+Math.floor(65535/4));L$b=Math.floor(L$b),L$a._resizeBuffer(6*(L$b+1)*2,!1),L$a.byteLength=L$a.bufferLength;for(var L$c=L$a.getUint16Array(),L$d=0,L$e=0;L$e<L$b;L$e++)L$c[L$d++]=4*L$e,L$c[L$d++]=4*L$e+2,L$c[L$d++]=4*L$e+1,L$c[L$d++]=4*L$e,L$c[L$d++]=4*L$e+3,L$c[L$d++]=4*L$e+2;return L$a.setNeedUpload(),!0},L$o.expandIBQuadrangle=function(L$a,L$b){L$a.bufferLength>=6*L$b*2||L$o.fillIBQuadrangle(L$a,L$b)},L$o.mathCeilPowerOfTwo=function(L$a){return L$a--,L$a|=L$a>>1,L$a|=L$a>>2,L$a|=L$a>>4,L$a|=L$a>>8,L$a|=L$a>>16,++L$a},L$o.fillQuadrangleImgVb=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){var L$i=16+(L$a._byteLength>>2);L$a.byteLength=L$i<<2;var L$j=L$a.getFloat32Array();L$j[(L$i-=16)+2]=L$e[0],L$j[L$i+3]=L$e[1],L$j[L$i+6]=L$e[2],L$j[L$i+7]=L$e[3],L$j[L$i+10]=L$e[4],L$j[L$i+11]=L$e[5],L$j[L$i+14]=L$e[6],L$j[L$i+15]=L$e[7];var L$k=L$f.a,L$l=L$f.b,L$m=L$f.c,L$n=L$f.d;if(1!==L$k||0!==L$l||0!==L$m||1!==L$n){L$f.bTransform=!0;var L$o=L$f.tx+L$g,L$p=L$f.ty+L$h;L$j[L$i]=(L$d[0]+L$b)*L$k+(L$d[1]+L$c)*L$m+L$o,L$j[L$i+1]=(L$d[0]+L$b)*L$l+(L$d[1]+L$c)*L$n+L$p,L$j[L$i+4]=(L$d[2]+L$b)*L$k+(L$d[3]+L$c)*L$m+L$o,L$j[L$i+5]=(L$d[2]+L$b)*L$l+(L$d[3]+L$c)*L$n+L$p,L$j[L$i+8]=(L$d[4]+L$b)*L$k+(L$d[5]+L$c)*L$m+L$o,L$j[L$i+9]=(L$d[4]+L$b)*L$l+(L$d[5]+L$c)*L$n+L$p,L$j[L$i+12]=(L$d[6]+L$b)*L$k+(L$d[7]+L$c)*L$m+L$o,L$j[L$i+13]=(L$d[6]+L$b)*L$l+(L$d[7]+L$c)*L$n+L$p}else L$f.bTransform=!1,L$b+=L$f.tx+L$g,L$c+=L$f.ty+L$h,L$j[L$i]=L$b+L$d[0],L$j[L$i+1]=L$c+L$d[1],L$j[L$i+4]=L$b+L$d[2],L$j[L$i+5]=L$c+L$d[3],L$j[L$i+8]=L$b+L$d[4],L$j[L$i+9]=L$c+L$d[5],L$j[L$i+12]=L$b+L$d[6],L$j[L$i+13]=L$c+L$d[7];return L$a._upload=!0},L$o.fillTranglesVB=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){var L$h=(L$a._byteLength>>2)+L$d.length;L$a.byteLength=L$h<<2;var L$i=L$a.getFloat32Array();L$h-=L$d.length;for(var L$j=L$d.length,L$k=L$e.a,L$l=L$e.b,L$m=L$e.c,L$n=L$e.d,L$o=0;L$o<L$j;L$o+=4)if(L$i[L$h+L$o+2]=L$d[L$o+2],L$i[L$h+L$o+3]=L$d[L$o+3],1!==L$k||0!==L$l||0!==L$m||1!==L$n){L$e.bTransform=!0;var L$p=L$e.tx+L$f,L$q=L$e.ty+L$g;L$i[L$h+L$o]=(L$d[L$o]+L$b)*L$k+(L$d[L$o+1]+L$c)*L$m+L$p,L$i[L$h+L$o+1]=(L$d[L$o]+L$b)*L$l+(L$d[L$o+1]+L$c)*L$n+L$q}else L$e.bTransform=!1,L$b+=L$e.tx+L$f,L$c+=L$e.ty+L$g,L$i[L$h+L$o]=L$b+L$d[L$o],L$i[L$h+L$o+1]=L$c+L$d[L$o+1];return L$a._upload=!0},L$o.copyPreImgVb=function(L$a,L$b,L$c){var L$d=L$a._byteLength>>2;L$a.byteLength=L$d+16<<2;for(var L$e=L$a.getFloat32Array(),L$f=0,L$g=L$d-16;L$f<4;L$f++)L$e[L$d]=L$e[L$g]+L$b,++L$g,L$e[++L$d]=L$e[L$g]+L$c,++L$g,L$e[++L$d]=L$e[L$g],++L$g,L$e[++L$d]=L$e[L$g],++L$d,++L$g;L$a._upload=!0},L$o.fillRectImgVb=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l,L$m){void 0===L$m&&(L$m=!1);var L$n,L$o,L$p,L$q,L$r,L$s,L$t,L$u,L$v,L$y,L$z,L$A,L$B,L$C,L$D,L$E,L$F=1,L$G=L$h.a,L$H=L$h.b,L$I=L$h.c,L$J=L$h.d,L$K=L$b&&L$b.width<99999999;if(1!==L$G||0!==L$H||0!==L$I||1!==L$J?(L$h.bTransform=!0,0===L$H&&0===L$I&&(L$F=23,L$v=L$e+L$c,L$y=L$f+L$d,L$n=L$G*L$c+(L$z=L$h.tx+L$i),L$p=L$G*L$v+L$z,L$o=L$J*L$d+(L$A=L$h.ty+L$j),L$q=L$J*L$y+L$A)):(L$F=23,L$h.bTransform=!1,L$p=(L$n=L$c+L$h.tx+L$i)+L$e,L$q=(L$o=L$d+L$h.ty+L$j)+L$f),L$K&&(L$r=L$b.x,L$s=L$b.y,L$t=L$b.width+L$r,L$u=L$b.height+L$s),1!==L$F){if(Math.min(L$n,L$p)>=L$t)return!1;if(Math.min(L$o,L$q)>=L$u)return!1;if(Math.max(L$p,L$n)<=L$r)return!1;if(Math.max(L$q,L$o)<=L$s)return!1}var L$L=L$a._byteLength>>2;L$a.byteLength=16+L$L<<2;var L$M=L$a.getFloat32Array();switch(L$M[2+L$L]=L$g[0],L$M[3+L$L]=L$g[1],L$M[6+L$L]=L$g[2],L$M[7+L$L]=L$g[3],L$M[10+L$L]=L$g[4],L$M[11+L$L]=L$g[5],L$M[14+L$L]=L$g[6],L$M[15+L$L]=L$g[7],L$F){case 1:L$z=L$h.tx+L$i,L$A=L$h.ty+L$j;var L$N=L$G*L$c,L$O=L$I*L$d,L$P=L$J*L$d,L$Q=L$H*L$c,L$R=L$G*(L$v=L$e+L$c),L$S=L$I*(L$y=L$f+L$d),L$T=L$J*L$y,L$U=L$H*L$v;L$m?(L$B=L$N+L$O+L$z,L$D=Math.round(L$B)-L$B,L$C=L$P+L$Q+L$A,L$E=Math.round(L$C)-L$C,L$M[L$L]=L$B+L$D,L$M[1+L$L]=L$C+L$E,L$M[4+L$L]=L$R+L$O+L$z+L$D,L$M[5+L$L]=L$P+L$U+L$A+L$E,L$M[8+L$L]=L$R+L$S+L$z+L$D,L$M[9+L$L]=L$T+L$U+L$A+L$E,L$M[12+L$L]=L$N+L$S+L$z+L$D,L$M[13+L$L]=L$T+L$Q+L$A+L$E):(L$M[L$L]=L$N+L$O+L$z,L$M[1+L$L]=L$P+L$Q+L$A,L$M[4+L$L]=L$R+L$O+L$z,L$M[5+L$L]=L$P+L$U+L$A,L$M[8+L$L]=L$R+L$S+L$z,L$M[9+L$L]=L$T+L$U+L$A,L$M[12+L$L]=L$N+L$S+L$z,L$M[13+L$L]=L$T+L$Q+L$A);break;case 23:L$m?(L$B=L$n+L$k,L$D=Math.round(L$B)-L$B,L$C=L$o,L$E=Math.round(L$C)-L$C,L$M[L$L]=L$B+L$D,L$M[1+L$L]=L$C+L$E,L$M[4+L$L]=L$p+L$k+L$D,L$M[5+L$L]=L$o+L$E,L$M[8+L$L]=L$p+L$D,L$M[9+L$L]=L$q+L$E,L$M[12+L$L]=L$n+L$D,L$M[13+L$L]=L$q+L$E):(L$M[L$L]=L$n+L$k,L$M[1+L$L]=L$o,L$M[4+L$L]=L$p+L$k,L$M[5+L$L]=L$o,L$M[8+L$L]=L$p,L$M[9+L$L]=L$q,L$M[12+L$L]=L$n,L$M[13+L$L]=L$q)}return L$a._upload=!0},L$o.fillLineVb=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){var L$i=.5*L$g,L$j=L$o._fillLineArray,L$k=-(L$d-L$f),L$l=L$c-L$e,L$m=Math.sqrt(L$k*L$k+L$l*L$l);L$k/=L$m,L$l/=L$m,L$k*=L$i,L$l*=L$i,L$j[0]=L$c-L$k,L$j[1]=L$d-L$l,L$j[4]=L$c+L$k,L$j[5]=L$d+L$l,L$j[8]=L$e+L$k,L$j[9]=L$f+L$l,L$j[12]=L$e-L$k,L$j[13]=L$f-L$l,L$h&&L$h.transformPointArray(L$j,L$j);var L$n=16+(L$a._byteLength>>2);return L$a.byteLength=L$n<<2,L$a.insertData(L$j,L$n-16),!0},L$o._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],L$o}(),L$ra=(function(){function L$i(){}L$m(L$i,"laya.webgl.utils.MatirxArray"),L$i.ArrayMul=function(L$a,L$b,L$c){if(L$a)if(L$b)for(var L$d=NaN,L$e=NaN,L$f=NaN,L$g=NaN,L$h=0;L$h<4;L$h++)L$d=L$a[L$h],L$e=L$a[L$h+4],L$f=L$a[L$h+8],L$g=L$a[L$h+12],L$c[L$h]=L$d*L$b[0]+L$e*L$b[1]+L$f*L$b[2]+L$g*L$b[3],L$c[L$h+4]=L$d*L$b[4]+L$e*L$b[5]+L$f*L$b[6]+L$g*L$b[7],L$c[L$h+8]=L$d*L$b[8]+L$e*L$b[9]+L$f*L$b[10]+L$g*L$b[11],L$c[L$h+12]=L$d*L$b[12]+L$e*L$b[13]+L$f*L$b[14]+L$g*L$b[15];else L$i.copyArray(L$a,L$c);else L$i.copyArray(L$b,L$c)},L$i.copyArray=function(L$a,L$b){if(L$a&&L$b)for(var L$c=0;L$c<L$a.length;L$c++)L$b[L$c]=L$a[L$c]}}(),function(){function L$b(L$a,L$b,L$c){this._stride=0,this.vertNum=0,this.indexNum=0,this._applied=!1,this._vb=null,this._ib=null,this._vao=null,this._attribInfo=null,this._quadNum=0,this.canReuse=!1,this._stride=L$a,this._vb=new L$xa(L$a,35048),L$b&&this._vb._resizeBuffer(L$b,!1),this._ib=new L$wa,L$c&&this._ib._resizeBuffer(L$c,!1)}L$m(L$b,"laya.webgl.utils.Mesh2D");var L$a=L$b.prototype;return L$a.cloneWithNewVB=function(){var L$a=new L$b(this._stride,0,0);return L$a._ib=this._ib,L$a._quadNum=this._quadNum,L$a._attribInfo=this._attribInfo,L$a},L$a.cloneWithNewVBIB=function(){var L$a=new L$b(this._stride,0,0);return L$a._attribInfo=this._attribInfo,L$a},L$a.getVBW=function(){return this._vb.setNeedUpload(),this._vb},L$a.getVBR=function(){return this._vb},L$a.getIBR=function(){return this._ib},L$a.getIBW=function(){return this._ib.setNeedUpload(),this._ib},L$a.createQuadIB=function(L$a){this._quadNum=L$a,this._ib._resizeBuffer(6*L$a*2,!1),this._ib.byteLength=this._ib.bufferLength;for(var L$b=this._ib.getUint16Array(),L$c=0,L$d=0,L$e=0;L$e<L$a;L$e++)L$b[L$c++]=L$d,L$b[L$c++]=L$d+2,L$b[L$c++]=L$d+1,L$b[L$c++]=L$d,L$b[L$c++]=L$d+3,L$b[L$c++]=L$d+2,L$d+=4;this._ib.setNeedUpload()},L$a.setAttributes=function(L$a){if(this._attribInfo=L$a,this._attribInfo.length%3!=0)throw"Mesh2D setAttributes error!"},L$a.getEleNum=function(){return this._ib.getBuffer().byteLength/2},L$a.releaseMesh=function(){},L$a.destroy=function(){},L$a.clearVB=function(){this._vb.clear()},L$b._gvaoid=0,L$b}()),L$sa=function(){function L$e(){}return L$m(L$e,"laya.webgl.utils.RenderState2D"),L$e.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},L$e.mat2MatArray=function(L$a,L$b){var L$c=L$a,L$d=L$b;return L$d[0]=L$c.a,L$d[1]=L$c.b,L$d[2]=L$e.EMPTYMAT4_ARRAY[2],L$d[3]=L$e.EMPTYMAT4_ARRAY[3],L$d[4]=L$c.c,L$d[5]=L$c.d,L$d[6]=L$e.EMPTYMAT4_ARRAY[6],L$d[7]=L$e.EMPTYMAT4_ARRAY[7],L$d[8]=L$e.EMPTYMAT4_ARRAY[8],L$d[9]=L$e.EMPTYMAT4_ARRAY[9],L$d[10]=L$e.EMPTYMAT4_ARRAY[10],L$d[11]=L$e.EMPTYMAT4_ARRAY[11],L$d[12]=L$c.tx,L$d[13]=L$c.ty,L$d[14]=L$e.EMPTYMAT4_ARRAY[14],L$d[15]=L$e.EMPTYMAT4_ARRAY[15],L$b},L$e.restoreTempArray=function(){L$e.TEMPMAT4_ARRAY[0]=1,L$e.TEMPMAT4_ARRAY[1]=0,L$e.TEMPMAT4_ARRAY[4]=0,L$e.TEMPMAT4_ARRAY[5]=1,L$e.TEMPMAT4_ARRAY[12]=0,L$e.TEMPMAT4_ARRAY[13]=0},L$e.clear=function(){L$e.worldScissorTest=!1,L$e.worldShaderDefines=null,L$e.worldFilters=null,L$e.worldAlpha=1,L$e.worldClipRect.x=L$e.worldClipRect.y=0,L$e.worldClipRect.width=L$e.width,L$e.worldClipRect.height=L$e.height,L$e.curRenderTarget=null},L$e._MAXSIZE=99999999,L$e.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L$e.worldMatrix4=L$e.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L$e.worldAlpha=1,L$e.worldScissorTest=!1,L$e.worldFilters=null,L$e.worldShaderDefines=null,L$e.curRenderTarget=null,L$e.width=0,L$e.height=0,L$g(L$e,["worldMatrix",function(){return this.worldMatrix=new L$B},"worldClipRect",function(){return this.worldClipRect=new L$D(0,0,99999999,99999999)}]),L$e}(),L$ta=function(){var L$s,L$c;function L$t(L$a,L$b,L$c,L$d,L$e){var L$f=this;function L$g(L$a){var L$b=[],L$c=new L$s(L$b);return L$f._compileToTree(L$c,L$a.split("\n"),0,L$b,L$e),L$c}var L$h=L$n.now();this._VS=L$g(L$b),this._PS=L$g(L$c),this._nameMap=L$d,2<L$n.now()-L$h&&console.log("ShaderCompile use time:"+(L$n.now()-L$h)+"  size:"+L$b.length+"/"+L$c.length)}L$m(L$t,"laya.webgl.utils.ShaderCompile");var L$a=L$t.prototype;return L$a._compileToTree=function(L$a,L$b,L$c,L$d,L$e){var L$f,L$g,L$h,L$i,L$j,L$k,L$l,L$m=0,L$n=0,L$o=0,L$p=0;for(L$n=L$c;L$n<L$b.length;L$n++)if(!((L$h=L$b[L$n]).length<1)&&0!==(L$m=L$h.indexOf("//"))){if(0<=L$m&&(L$h=L$h.substr(0,L$m)),L$f=L$l||new L$s(L$d),L$l=null,L$f.text=L$h,L$f.noCompile=!0,0<=(L$m=L$h.indexOf("#"))){for(L$i="#",L$p=L$m+1,L$o=L$h.length;L$p<L$o;L$p++){var L$q=L$h.charAt(L$p);if(" "===L$q||"\t"===L$q||"\r"===L$q||"\n"===L$q||"?"===L$q)break;L$i+=L$q}switch(L$f.name=L$i){case"#ifdef":case"#ifndef":if(L$f.src=L$h,L$f.noCompile=null!=L$h.match(/[!&|()=<>]/),L$f.noCompile?console.log("function():Boolean{return "+L$h.substr(L$m+L$f.name.length)+"}"):(L$k=L$h.replace(/^\s*/,"").split(/\s+/),L$f.setCondition(L$k[1],"#ifdef"===L$i?1:2),L$f.text="//"+L$f.text),L$f.setParent(L$a),L$a=L$f,L$e)for(L$k=L$h.substr(L$p).split(L$t._splitToWordExps3),L$p=0;L$p<L$k.length;L$p++)(L$h=L$k[L$p]).length&&(L$e[L$h]=!0);continue;case"#if":if(L$f.src=L$h,L$f.noCompile=!0,L$f.setParent(L$a),L$a=L$f,L$e)for(L$k=L$h.substr(L$p).split(L$t._splitToWordExps3),L$p=0;L$p<L$k.length;L$p++)(L$h=L$k[L$p]).length&&"defined"!=L$h&&(L$e[L$h]=!0);continue;case"#else":L$f.src=L$h,L$g=(L$a=L$a.parent).childs[L$a.childs.length-1],L$f.noCompile=L$g.noCompile,L$f.noCompile||(L$f.condition=L$g.condition,L$f.conditionType=1==L$g.conditionType?2:1,L$f.text="//"+L$f.text+" "+L$g.text+" "+L$f.conditionType),L$f.setParent(L$a),L$a=L$f;continue;case"#endif":L$g=(L$a=L$a.parent).childs[L$a.childs.length-1],L$f.noCompile=L$g.noCompile,L$f.noCompile||(L$f.text="//"+L$f.text),L$f.setParent(L$a);continue;case"#include":L$k=L$t.splitToWords(L$h,null);var L$r=L$t.includes[L$k[1]];if(!L$r)throw"ShaderCompile error no this include file:"+L$k[1];if((L$m=L$k[0].indexOf("?"))<0){L$f.setParent(L$a),L$h=L$r.getWith("with"==L$k[2]?L$k[3]:null),this._compileToTree(L$f,L$h.split("\n"),0,L$d,L$e),L$f.text="";continue}L$f.setCondition(L$k[0].substr(L$m+1),1),L$f.text=L$r.getWith("with"==L$k[2]?L$k[3]:null);break;case"#import":L$j=(L$k=L$t.splitToWords(L$h,null))[1],L$d.push({node:L$f,file:L$t.includes[L$j],ofs:L$f.text.length});continue}}else{if((L$g=L$a.childs[L$a.childs.length-1])&&!L$g.name){0<L$d.length&&L$t.splitToWords(L$h,L$g),L$l=L$f,L$g.text+="\n"+L$h;continue}0<L$d.length&&L$t.splitToWords(L$h,L$f)}L$f.setParent(L$a)}},L$a.createShader=function(L$a,L$b,L$c){var L$d={},L$e="";if(L$a)for(var L$f in L$a)L$e+="#define "+L$f+"\n",L$d[L$f]=!0;var L$g=this._VS.toscript(L$d,[]),L$h=this._PS.toscript(L$d,[]);return(L$c||L$Ya.create)(L$e+L$g.join("\n"),L$e+L$h.join("\n"),L$b,this._nameMap)},L$t._parseOne=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g={type:L$t.shaderParamsMap[L$c[L$d+1]],name:L$c[L$d+2],size:isNaN(parseInt(L$c[L$d+3]))?1:parseInt(L$c[L$d+3])};return L$f&&("attribute"==L$e?L$a.push(L$g):L$b.push(L$g)),":"==L$c[L$d+3]&&(L$g.type=L$c[L$d+4],L$d+=2),L$d+=2},L$t.addInclude=function(L$a,L$b){if(!L$b||0===L$b.length)throw new Error("add shader include file err:"+L$a);if(L$t.includes[L$a])throw new Error("add shader include file err, has add:"+L$a);L$t.includes[L$a]=new L$c(L$b)},L$t.preGetParams=function(L$a,L$b){var L$c=[L$a,L$b],L$d={},L$e=[],L$f=[],L$g={},L$h=[];L$d.attributes=L$e,L$d.uniforms=L$f,L$d.defines=L$g;for(var L$i=0,L$j=0,L$k=0;L$k<2;L$k++){L$c[L$k]=L$c[L$k].replace(L$t._removeAnnotation,"");var L$l,L$m=L$c[L$k].match(L$t._reg);for(L$i=0,L$j=L$m.length;L$i<L$j;L$i++){var L$n=L$m[L$i];if("attribute"==L$n||"uniform"==L$n)L$i=L$t._parseOne(L$e,L$f,L$m,L$i,L$n,!0);else{if("#define"==L$n){L$h[L$n=L$m[++L$i]]=1;continue}if("#ifdef"==L$n){L$g[L$l=L$m[++L$i]]=L$g[L$l]||[];for(L$i++;L$i<L$j;L$i++)if("attribute"==(L$n=L$m[L$i])||"uniform"==L$n)L$i=L$t._parseOne(L$e,L$f,L$m,L$i,L$n,L$h[L$l]);else if("#else"==L$n)for(L$i++;L$i<L$j;L$i++)if("attribute"==(L$n=L$m[L$i])||"uniform"==L$n)L$i=L$t._parseOne(L$e,L$f,L$m,L$i,L$n,!L$h[L$l]);else if("#endif"==L$n)break}}}}return L$d},L$t.splitToWords=function(L$a,L$b){for(var L$c,L$d,L$e=[],L$f=-1,L$g=0,L$h=L$a.length;L$g<L$h;L$g++)if(L$c=L$a.charAt(L$g),0<=" \t=+-*/&%!<>()'\",;".indexOf(L$c)){if(0<=L$f&&1<L$g-L$f&&(L$d=L$a.substr(L$f,L$g-L$f),L$e.push(L$d)),'"'==L$c||"'"==L$c){var L$i=L$a.indexOf(L$c,L$g+1);if(L$i<0)throw"Sharder err:"+L$a;L$e.push(L$a.substr(L$g+1,L$i-L$g-1)),L$g=L$i,L$f=-1;continue}"("==L$c&&L$b&&0<L$e.length&&(L$d=L$e[L$e.length-1]+";","vec4;main;".indexOf(L$d)<0&&(L$b.useFuns+=L$d)),L$f=-1}else L$f<0&&(L$f=L$g);return L$f<L$h&&1<L$h-L$f&&(L$d=L$a.substr(L$f,L$h-L$f),L$e.push(L$d)),L$e},L$t.IFDEF_NO=0,L$t.IFDEF_YES=1,L$t.IFDEF_ELSE=2,L$t.IFDEF_PARENT=3,L$t._removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),L$t._reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),L$t._splitToWordExps=new RegExp("[(\".*\")]+|[('.*')]+|([ \\t=\\+\\-*/&%!<>!%(),;])","g"),L$t.includes={},L$g(L$t,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"_splitToWordExps3",function(){return this._splitToWordExps3=new RegExp("[ \\t=\\+\\-*/&%!<>!%(),;\\|]","g")}]),L$t.__init$=function(){L$s=function(){function L$c(L$a){this.childs=[],this.text="",this.parent=null,this.name=null,this.noCompile=!1,this.includefiles=null,this.condition=null,this.conditionType=0,this.useFuns="",this.z=0,this.src=null,this.includefiles=L$a}L$m(L$c,"");var L$a=L$c.prototype;return L$a.setParent=function(L$a){L$a.childs.push(this),this.z=L$a.z+1,this.parent=L$a},L$a.setCondition=function(L$a,L$b){L$a&&(this.conditionType=L$b,L$a=L$a.replace(/(\s*$)/g,""),this.condition=function(){return this[L$a]},this.condition.__condition=L$a)},L$a.toscript=function(L$a,L$b){return this._toscript(L$a,L$b,++L$c.__id)},L$a._toscript=function(L$d,L$e,L$f){if(this.childs.length<1&&!this.text)return L$e;L$e.length;if(this.condition){var L$a=!!this.condition.call(L$d);if(2===this.conditionType&&(L$a=!L$a),!L$a)return L$e}if(this.text&&L$e.push(this.text),0<this.childs.length&&this.childs.forEach(function(L$a,L$b,L$c){L$a._toscript(L$d,L$e,L$f)}),0<this.includefiles.length&&0<this.useFuns.length)for(var L$b,L$c=0,L$g=this.includefiles.length;L$c<L$g;L$c++)this.includefiles[L$c].curUseID!=L$f&&0<(L$b=this.includefiles[L$c].file.getFunsScript(this.useFuns)).length&&(this.includefiles[L$c].curUseID=L$f,L$e[0]=L$b+L$e[0]);return L$e},L$c.__id=1,L$c}(),L$c=function(){function L$a(L$a){this.script=null,this.codes={},this.funs={},this.curUseID=-1,this.funnames="",this.script=L$a;for(var L$b=0,L$c=0,L$d=0;!((L$b=L$a.indexOf("#begin",L$b))<0);){for(L$d=L$b+5;!((L$d=L$a.indexOf("#end",L$d))<0)&&"i"===L$a.charAt(L$d+4);)L$d+=5;if(L$d<0)throw"add include err,no #end:"+L$a;L$c=L$a.indexOf("\n",L$b);var L$e=L$t.splitToWords(L$a.substr(L$b,L$c-L$b),null);"code"==L$e[1]?this.codes[L$e[2]]=L$a.substr(L$c+1,L$d-L$c-1):"function"==L$e[1]&&(L$c=L$a.indexOf("function",L$b),L$c+="function".length,this.funs[L$e[3]]=L$a.substr(L$c+1,L$d-L$c-1),this.funnames+=L$e[3]+";"),L$b=L$d+1}}L$m(L$a,"");var L$b=L$a.prototype;return L$b.getWith=function(L$a){var L$b=L$a?this.codes[L$a]:this.script;if(!L$b)throw"get with error:"+L$a;return L$b},L$b.getFunsScript=function(L$a){var L$b="";for(var L$c in this.funs)0<=L$a.indexOf(L$c+";")&&(L$b+=this.funs[L$c]);return L$b},L$a}()},L$t}(),L$ua=function(){function L$g(){}return L$m(L$g,"laya.webgl.WebGL"),L$g._uint8ArraySlice=function(){for(var L$a=this.length,L$b=new Uint8Array(this.length),L$c=0;L$c<L$a;L$c++)L$b[L$c]=this[L$c];return L$b},L$g._float32ArraySlice=function(){for(var L$a=this.length,L$b=new Float32Array(this.length),L$c=0;L$c<L$a;L$c++)L$b[L$c]=this[L$c];return L$b},L$g._uint16ArraySlice=function(L$a){var L$b,L$c=arguments,L$d=0,L$e=0;if(0===L$c.length)for(L$d=this.length,L$b=new Uint16Array(L$d),L$e=0;L$e<L$d;L$e++)L$b[L$e]=this[L$e];else if(2===L$c.length){var L$f=L$c[0],L$g=L$c[1];if(L$f<L$g)for(L$d=L$g-L$f,L$b=new Uint16Array(L$d),L$e=L$f;L$e<L$g;L$e++)L$b[L$e-L$f]=this[L$e];else L$b=new Uint16Array(0)}return L$b},L$g.expandContext=function(){var L$a=L$e.prototype,L$b=CanvasRenderingContext2D.prototype;L$b.fillTrangles=L$a.fillTrangles,L$Za.__int__(null),L$b.setIBVB=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){void 0===L$i&&(L$i=0),void 0===L$j&&(L$j=0),null===L$c&&(this._ib=this._ib||L$wa.QuadrangleIB,L$c=this._ib,L$qa.expandIBQuadrangle(L$c,L$d._byteLength/64+8)),this._setIBVB(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j)},L$b.fillTrangles=function(L$a,L$b,L$c,L$d,L$e){this._curMat=this._curMat||L$B.create(),this._vb=this._vb||L$xa.create(),this._ib||(this._ib=L$wa.create(),L$qa.fillIBQuadrangle(this._ib,L$g/4));var L$f=this._vb,L$g=L$d.length>>4;L$qa.fillTranglesVB(L$f,L$b,L$c,L$d,L$e||this._curMat,0,0),L$qa.expandIBQuadrangle(this._ib,L$f._byteLength/64+8);var L$h=new L$Aa(1,0);L$h.textureHost=L$a;var L$i=new L$_a("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; #ifdef TXTALPHA uniform sampler2D texture1; #endif void main() {vec4 color= texture2D(texture, v_texcoord); #ifdef TXTALPHA color.a = texture2D(texture1, v_texcoord).a; #endif color.a*=1.0; gl_FragColor= color;}");L$f._vertType=3,this._setIBVB(L$b,L$c,this._ib,L$f,6*L$g,L$e,L$i,L$h,0,0)}},L$g.enable=function(){if(L$n.__init__(),L$r.isConchApp&&!L$r.isConchWebGL)return L$v.skinAniSprite=function(){return new L$aa},L$g.expandContext(),!1;if(L$v.getWebGLContext=function(L$a){for(var L$b,L$c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],L$d=0;L$d<L$c.length;L$d++){try{L$b=L$a.getContext(L$c[L$d],{stencil:L$z.isStencil,alpha:L$z.isAlpha,antialias:L$z.isAntialias,premultipliedAlpha:L$z.premultipliedAlpha,preserveDrawingBuffer:L$z.preserveDrawingBuffer})}catch(L$a){}if(L$b)return L$b}return null},null==(L$g.mainContext=L$g.mainContext||L$v.getWebGLContext(L$r._mainCanvas)))return!1;if(L$r.isWebGL)return!0;L$p.create=function(L$a,L$b){return new L$ab(L$a,L$b)},L$q.create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){return new L$Xa(L$a,L$b,L$c,L$d,L$e,L$f,L$g)},L$r.WebGL=L$g,L$r.isWebGL=!0,L$na.__init__(),L$v.createRenderSprite=function(L$a,L$b){return new L$Ba(L$a,L$b)},L$v.createWebGLContext2D=function(L$a){return new L$za(L$a)},L$v.changeWebGLSize=function(L$a,L$b){laya.webgl.WebGL.onStageResize(L$a,L$b)},L$v.createGraphics=function(){return new L$ya};var L$a=L$v.createFilterAction;return L$v.createFilterAction=L$a||function(L$a){return new L$Ca},L$v.clear=function(L$a){L$sa.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089);var L$b=L$r.context.ctx,L$c=0==L$b._submits._length||L$z.preserveDrawingBuffer?L$o.create(L$a)._color:L$F._wgColor;L$c&&L$b.clearBG(L$c[0],L$c[1],L$c[2],L$c[3]),L$sa.clear()},L$v.addToAtlas=function(L$a,L$b){void 0===L$b&&(L$b=!1);var L$c=L$a.bitmap;L$r.optimizeTextureMemory(L$a.url,L$a)?L$y.__typeof(L$c,"laya.webgl.resource.IMergeAtlasBitmap")&&L$c.allowMerageInAtlas&&L$c.on("recovered",L$a,L$a.addTextureToAtlas):L$c.enableMerageInAtlas=!1},L$v.isAtlas=function(L$a){return L$a instanceof laya.webgl.atlas.AtlasWebGLCanvas},L$Q._enable(),L$v.beginFlush=function(){for(var L$a=L$Q.instance,L$b=L$a.getAtlaserCount(),L$c=0;L$c<L$b;L$c++){var L$d=L$a.getAtlaserByIndex(L$c).texture;L$d._flashCacheImageNeedFlush&&L$v.flashFlushImage(L$d)}},L$v.drawToCanvas=function(L$a,L$b,L$c,L$d,L$e,L$f){(L$c<=0||L$d<=0)&&console.log("[error] canvasWidth and canvasHeight should greater than zero"),L$c|=0,L$d|=0,L$e|=0,L$f|=0;var L$g=L$Ma.create(L$c,L$d,6408,5121,0,!1);L$g.start(),L$g.clear(0,0,0,0),L$r.context.clear(),L$s.renders[L$b]._fun(L$a,L$r.context,L$e,L$sa.height-L$d+L$f),L$r.context.flush(),L$g.end();var L$h=L$g.getData(0,0,L$c,L$d);if(L$g.recycle(),L$h.byteLength==L$c*L$d*4){var L$i=new L$Ua;L$i._canvas=L$n.createElement("canvas"),L$i.size(L$c,L$d);var L$j=L$i._canvas.getContext("2d");L$n.canvas.size(L$c,L$d);var L$k=L$n.context,L$l=L$k.createImageData(L$c,L$d);return L$l.data.set(new Uint8ClampedArray(L$h.buffer)),L$i._imgData=L$l,L$k.putImageData(L$l,0,0),L$j.save(),L$j.translate(0,L$d),L$j.scale(1,-1),L$j.drawImage(L$n.canvas.source,0,0),L$j.restore(),L$i}console.log("drawToCanvas error: w:"+L$c+",h:"+L$d+",datalen:"+L$h.byteLength)},L$v.createFilterAction=function(L$a){var L$b;switch(L$a){case 32:L$b=new L$Ca}return L$b},L$v.addTextureToAtlas=function(L$a){L$a._uvID++,L$Q._atlasRestore++,L$a.bitmap.enableMerageInAtlas&&L$Q.instance.addToAtlas(L$a)},L$v.getTexturePixels=function(L$a,L$b,L$c,L$d,L$e){L$r.context.ctx.clear();var L$f=new L$E;L$f.graphics.drawTexture(L$a,-L$b,-L$c);var L$g=L$Ma.create(L$d,L$e);L$g.start(),L$g.clear(0,0,0,0),L$f.render(L$r.context,0,0),L$r.context.ctx.flush(),L$g.end();for(var L$h=L$g.getData(0,0,L$d,L$e),L$i=[],L$j=0,L$k=L$e-1;0<=L$k;L$k--)for(var L$l=0;L$l<L$d;L$l++)L$j=4*(L$k*L$d+L$l),L$i.push(L$h[L$j]),L$i.push(L$h[L$j+1]),L$i.push(L$h[L$j+2]),L$i.push(L$h[L$j+3]);return L$i},L$v.skinAniSprite=function(){return new L$aa},L$j.create=function(L$a,L$b){var L$c=new L$Ua;return L$c._imgData=L$b,L$c.flipY=!1,L$c},L$A._filterStart=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$a.getValue("bounds"),L$g=L$Ma.create(L$f.width,L$f.height);if(L$g.start(),L$g.clear(0,0,0,0),L$a.addValue("src",L$g),L$a.addValue("ScissorTest",L$sa.worldScissorTest),L$sa.worldScissorTest){var L$h=new L$D;L$h.copyFrom(L$c.ctx._clipRect),L$a.addValue("clipRect",L$h),L$sa.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},L$A._filterEnd=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$a.getValue("bounds");L$a.getValue("src").end();var L$g=L$Ma.create(L$f.width,L$f.height);L$g.start(),L$g.clear(0,0,0,0),L$a.addValue("out",L$g),L$b._set$P("_filterCache",L$g),L$b._set$P("_isHaveGlowFilter",L$a.getValue("_isHaveGlowFilter"))},L$A._EndTarget=function(L$a,L$b){if(L$a.getValue("src").recycle(),L$a.getValue("out").end(),L$a.getValue("ScissorTest")){L$sa.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),L$b.ctx.save();var L$c=L$a.getValue("clipRect");L$b.ctx.clipRect(L$c.x,L$c.y,L$c.width,L$c.height)}},L$A._useSrc=function(L$a){var L$b=L$a.getValue("out");L$b.end(),(L$b=L$a.getValue("src")).start(),L$b.clear(0,0,0,0)},L$A._endSrc=function(L$a){L$a.getValue("src").end()},L$A._useOut=function(L$a){var L$b=L$a.getValue("src");L$b.end(),(L$b=L$a.getValue("out")).start(),L$b.clear(0,0,0,0)},L$A._endOut=function(L$a){L$a.getValue("out").end()},L$A._recycleScope=function(L$a){L$a.recycle()},L$A._filter=function(L$a,L$b,L$c,L$d){var L$e=this._next;if(L$e){var L$f,L$g,L$h=L$a.filters,L$i=L$h.length;if(1==L$i&&32==L$h[0].type)return L$b.ctx.save(),L$b.ctx.setFilters([L$h[0]]),L$e._fun.call(L$e,L$a,L$b,L$c,L$d),void L$b.ctx.restore();var L$j=L$ha.create(),L$k=L$C.TEMP,L$l=L$b.ctx._getTransformMatrix(),L$m=L$B.create();L$l.copyTo(L$m);var L$n=0,L$o=0,L$p=!1,L$q=L$a._$P._filterCache?L$a._$P._filterCache:null;if(!L$q||L$a._repaint){L$p=L$a._isHaveGlowFilter(),L$j.addValue("_isHaveGlowFilter",L$p),L$p&&(L$n=50,L$o=25),(L$g=new L$D).copyFrom(L$a.getSelfBounds()),L$g.x+=L$a.x,L$g.y+=L$a.y,L$g.x-=L$a.pivotX+4,L$g.y-=L$a.pivotY+4;var L$r=L$g.x,L$s=L$g.y;if(L$g.width+=L$n+8,L$g.height+=L$n+8,L$k.x=L$g.x*L$m.a+L$g.y*L$m.c,L$k.y=L$g.y*L$m.d+L$g.x*L$m.b,L$g.x=L$k.x,L$g.y=L$k.y,L$k.x=L$g.width*L$m.a+L$g.height*L$m.c,L$k.y=L$g.height*L$m.d+L$g.width*L$m.b,L$g.width=L$k.x,L$g.height=L$k.y,L$g.width<=0||L$g.height<=0)return;L$q&&L$q.recycle(),L$j.addValue("bounds",L$g);var L$t=L$ga.create([L$j,L$a,L$b,0,0],L$A._filterStart);L$b.addRenderObject(L$t),L$b.ctx._renderKey=0,L$b.ctx._shader2D.glTexture=null;var L$u=L$a.x-L$r+L$o,L$v=L$a.y-L$s+L$o;L$e._fun.call(L$e,L$a,L$b,L$u,L$v),L$t=L$ga.create([L$j,L$a,L$b,0,0],L$A._filterEnd),L$b.addRenderObject(L$t);for(var L$y=0;L$y<L$i;L$y++){0!=L$y&&(L$t=L$ga.create([L$j],L$A._useSrc),L$b.addRenderObject(L$t),L$f=L$Aa.create(1,0),L$B.TEMP.identity(),L$b.ctx.drawTarget(L$j,0,0,L$g.width,L$g.height,L$B.TEMP,"out",L$f,null,L$S.TOINT.overlay),L$t=L$ga.create([L$j],L$A._useOut),L$b.addRenderObject(L$t)),L$h[L$y].action.apply3d(L$j,L$a,L$b,0,0)}L$t=L$ga.create([L$j,L$b],L$A._EndTarget),L$b.addRenderObject(L$t)}else{if((L$p=!!L$a._$P._isHaveGlowFilter&&L$a._$P._isHaveGlowFilter)&&(L$n=50,L$o=25),(L$g=L$a.getBounds()).width<=0||L$g.height<=0)return;L$g.width+=L$n,L$g.height+=L$n,L$k.x=L$g.x*L$m.a+L$g.y*L$m.c,L$k.y=L$g.y*L$m.d+L$g.x*L$m.b,L$g.x=L$k.x,L$g.y=L$k.y,L$k.x=L$g.width*L$m.a+L$g.height*L$m.c,L$k.y=L$g.height*L$m.d+L$g.width*L$m.b,L$g.width=L$k.x,L$g.height=L$k.y,L$j.addValue("out",L$q)}L$c=L$c-L$o-L$a.x,L$d=L$d-L$o-L$a.y,L$k.setTo(L$c,L$d),L$m.transformPoint(L$k),L$c=L$k.x+L$g.x,L$d=L$k.y+L$g.y,L$f=L$Aa.create(1,0),L$B.TEMP.identity(),L$b.ctx.drawTarget(L$j,L$c,L$d,L$g.width,L$g.height,L$B.TEMP,"out",L$f,null,L$S.TOINT.overlay),L$t=L$ga.create([L$j],L$A._recycleScope),L$b.addRenderObject(L$t),L$m.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=L$g._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=L$g._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=L$g._uint8ArraySlice),!0},L$g.onStageResize=function(L$a,L$b){null!=L$g.mainContext&&(L$g.mainContext.viewport(0,0,L$a,L$b),L$sa.width=L$a,L$sa.height=L$b)},L$g.onInvalidGLRes=function(){L$Q.instance.freeAll(),L$u.releaseContentManagers(!0),L$g.doNodeRepaint(L$y.stage),L$g.mainContext.viewport(0,0,L$sa.width,L$sa.height),L$y.stage.event("devicelost")},L$g.doNodeRepaint=function(L$a){0==L$a.numChildren&&L$a.repaint();for(var L$b=0;L$b<L$a.numChildren;L$b++)L$g.doNodeRepaint(L$a.getChildAt(L$b))},L$g.init=function(L$a,L$b,L$c){L$g.mainCanvas=L$a,L$j._createContext=function(L$a){return new L$za(L$a)},L$Ua._createContext=function(L$a){return new L$za(L$a)};var L$d=laya.webgl.WebGL.mainContext;if(null!=L$d.getShaderPrecisionFormat){var L$e=L$d.getShaderPrecisionFormat(35633,36338),L$f=L$d.getShaderPrecisionFormat(35632,36338);L$g.shaderHighPrecision=!(!L$e.precision||!L$f.precision)}else L$g.shaderHighPrecision=!1;if(L$g.compressAstc=L$d.getExtension("WEBGL_compressed_texture_astc"),L$g.compressAtc=L$d.getExtension("WEBGL_compressed_texture_atc"),L$g.compressEtc=L$d.getExtension("WEBGL_compressed_texture_etc"),L$g.compressEtc1=L$d.getExtension("WEBGL_compressed_texture_etc1"),L$g.compressPvrtc=L$d.getExtension("WEBGL_compressed_texture_pvrtc"),L$g.compressS3tc=L$d.getExtension("WEBGL_compressed_texture_s3tc"),L$g.compressS3tc_srgb=L$d.getExtension("WEBGL_compressed_texture_s3tc_srgb"),L$g.compressAstc=L$g.compressAstc?L$g.compressAstc:{},L$g.compressAtc=L$g.compressAtc?L$g.compressAtc:{},L$g.compressEtc=L$g.compressEtc?L$g.compressEtc:{},L$g.compressEtc1=L$g.compressEtc1?L$g.compressEtc1:{},L$g.compressPvrtc=L$g.compressPvrtc?L$g.compressPvrtc:{},L$g.compressS3tc=L$g.compressS3tc?L$g.compressS3tc:{},L$g.compressS3tc_srgb=L$g.compressS3tc_srgb?L$g.compressS3tc_srgb:{},L$d.deleteTexture1=L$d.deleteTexture,L$d.deleteTexture=function(L$a){L$a==L$va.curBindTexValue&&(L$va.curBindTexValue=null),L$d.deleteTexture1(L$a)},L$g.onStageResize(L$b,L$c),null==L$g.mainContext)throw new Error("webGL getContext err!");L$I.__init__(),L$Q.__init__(),L$Ea.__init__(),L$fa.__init__(),L$za.__init__(),L$Aa.__init__(),L$w.__init__(),L$Za.__int__(L$d),L$S._init_(L$d),L$r.isConchApp&&conch.setOnInvalidGLRes(L$g.onInvalidGLRes)},L$g.mainCanvas=null,L$g.antialias=!0,L$g.shaderHighPrecision=!1,L$g._bg_null=[0,0,0,0],L$g}(),L$va=function(){function L$d(){}return L$m(L$d,"laya.webgl.WebGLContext"),L$d.UseProgram=function(L$a){return L$d._useProgram!==L$a&&(L$ua.mainContext.useProgram(L$a),L$d._useProgram=L$a,!0)},L$d.setDepthTest=function(L$a,L$b){L$b!==L$d._depthTest&&((L$d._depthTest=L$b)?L$a.enable(2929):L$a.disable(2929))},L$d.setDepthMask=function(L$a,L$b){L$b!==L$d._depthMask&&(L$d._depthMask=L$b,L$a.depthMask(L$b))},L$d.setDepthFunc=function(L$a,L$b){L$b!==L$d._depthFunc&&(L$d._depthFunc=L$b,L$a.depthFunc(L$b))},L$d.setBlend=function(L$a,L$b){L$b!==L$d._blend&&((L$d._blend=L$b)?L$a.enable(3042):L$a.disable(3042))},L$d.setBlendFunc=function(L$a,L$b,L$c){(L$b!==L$d._sFactor||L$c!==L$d._dFactor)&&(L$d._sFactor=L$b,L$d._dFactor=L$c,L$a.blendFunc(L$b,L$c))},L$d.setCullFace=function(L$a,L$b){L$b!==L$d._cullFace&&((L$d._cullFace=L$b)?L$a.enable(2884):L$a.disable(2884))},L$d.setFrontFace=function(L$a,L$b){L$b!==L$d._frontFace&&(L$d._frontFace=L$b,L$a.frontFace(L$b))},L$d.bindTexture=function(L$a,L$b,L$c){L$a.bindTexture(L$b,L$c),L$d.curBindTexTarget=L$b,L$d.curBindTexValue=L$c},L$d.DEPTH_BUFFER_BIT=256,L$d.STENCIL_BUFFER_BIT=1024,L$d.COLOR_BUFFER_BIT=16384,L$d.POINTS=0,L$d.LINES=1,L$d.LINE_LOOP=2,L$d.LINE_STRIP=3,L$d.TRIANGLES=4,L$d.TRIANGLE_STRIP=5,L$d.TRIANGLE_FAN=6,L$d.ZERO=0,L$d.ONE=1,L$d.SRC_COLOR=768,L$d.ONE_MINUS_SRC_COLOR=769,L$d.SRC_ALPHA=770,L$d.ONE_MINUS_SRC_ALPHA=771,L$d.DST_ALPHA=772,L$d.ONE_MINUS_DST_ALPHA=773,L$d.DST_COLOR=774,L$d.ONE_MINUS_DST_COLOR=775,L$d.SRC_ALPHA_SATURATE=776,L$d.FUNC_ADD=32774,L$d.BLEND_EQUATION=32777,L$d.BLEND_EQUATION_RGB=32777,L$d.BLEND_EQUATION_ALPHA=34877,L$d.FUNC_SUBTRACT=32778,L$d.FUNC_REVERSE_SUBTRACT=32779,L$d.BLEND_DST_RGB=32968,L$d.BLEND_SRC_RGB=32969,L$d.BLEND_DST_ALPHA=32970,L$d.BLEND_SRC_ALPHA=32971,L$d.CONSTANT_COLOR=32769,L$d.ONE_MINUS_CONSTANT_COLOR=32770,L$d.CONSTANT_ALPHA=32771,L$d.ONE_MINUS_CONSTANT_ALPHA=32772,L$d.BLEND_COLOR=32773,L$d.ARRAY_BUFFER=34962,L$d.ELEMENT_ARRAY_BUFFER=34963,L$d.ARRAY_BUFFER_BINDING=34964,L$d.ELEMENT_ARRAY_BUFFER_BINDING=34965,L$d.STREAM_DRAW=35040,L$d.STATIC_DRAW=35044,L$d.DYNAMIC_DRAW=35048,L$d.BUFFER_SIZE=34660,L$d.BUFFER_USAGE=34661,L$d.CURRENT_VERTEX_ATTRIB=34342,L$d.FRONT=1028,L$d.BACK=1029,L$d.CULL_FACE=2884,L$d.FRONT_AND_BACK=1032,L$d.BLEND=3042,L$d.DITHER=3024,L$d.STENCIL_TEST=2960,L$d.DEPTH_TEST=2929,L$d.SCISSOR_TEST=3089,L$d.POLYGON_OFFSET_FILL=32823,L$d.SAMPLE_ALPHA_TO_COVERAGE=32926,L$d.SAMPLE_COVERAGE=32928,L$d.NO_ERROR=0,L$d.INVALID_ENUM=1280,L$d.INVALID_VALUE=1281,L$d.INVALID_OPERATION=1282,L$d.OUT_OF_MEMORY=1285,L$d.CW=2304,L$d.CCW=2305,L$d.LINE_WIDTH=2849,L$d.ALIASED_POINT_SIZE_RANGE=33901,L$d.ALIASED_LINE_WIDTH_RANGE=33902,L$d.CULL_FACE_MODE=2885,L$d.FRONT_FACE=2886,L$d.DEPTH_RANGE=2928,L$d.DEPTH_WRITEMASK=2930,L$d.DEPTH_CLEAR_VALUE=2931,L$d.DEPTH_FUNC=2932,L$d.STENCIL_CLEAR_VALUE=2961,L$d.STENCIL_FUNC=2962,L$d.STENCIL_FAIL=2964,L$d.STENCIL_PASS_DEPTH_FAIL=2965,L$d.STENCIL_PASS_DEPTH_PASS=2966,L$d.STENCIL_REF=2967,L$d.STENCIL_VALUE_MASK=2963,L$d.STENCIL_WRITEMASK=2968,L$d.STENCIL_BACK_FUNC=34816,L$d.STENCIL_BACK_FAIL=34817,L$d.STENCIL_BACK_PASS_DEPTH_FAIL=34818,L$d.STENCIL_BACK_PASS_DEPTH_PASS=34819,L$d.STENCIL_BACK_REF=36003,L$d.STENCIL_BACK_VALUE_MASK=36004,L$d.STENCIL_BACK_WRITEMASK=36005,L$d.VIEWPORT=2978,L$d.SCISSOR_BOX=3088,L$d.COLOR_CLEAR_VALUE=3106,L$d.COLOR_WRITEMASK=3107,L$d.UNPACK_ALIGNMENT=3317,L$d.PACK_ALIGNMENT=3333,L$d.MAX_TEXTURE_SIZE=3379,L$d.MAX_VIEWPORT_DIMS=3386,L$d.SUBPIXEL_BITS=3408,L$d.RED_BITS=3410,L$d.GREEN_BITS=3411,L$d.BLUE_BITS=3412,L$d.ALPHA_BITS=3413,L$d.DEPTH_BITS=3414,L$d.STENCIL_BITS=3415,L$d.POLYGON_OFFSET_UNITS=10752,L$d.POLYGON_OFFSET_FACTOR=32824,L$d.TEXTURE_BINDING_2D=32873,L$d.SAMPLE_BUFFERS=32936,L$d.SAMPLES=32937,L$d.SAMPLE_COVERAGE_VALUE=32938,L$d.SAMPLE_COVERAGE_INVERT=32939,L$d.NUM_COMPRESSED_TEXTURE_FORMATS=34466,L$d.COMPRESSED_TEXTURE_FORMATS=34467,L$d.DONT_CARE=4352,L$d.FASTEST=4353,L$d.NICEST=4354,L$d.GENERATE_MIPMAP_HINT=33170,L$d.BYTE=5120,L$d.UNSIGNED_BYTE=5121,L$d.SHORT=5122,L$d.UNSIGNED_SHORT=5123,L$d.INT=5124,L$d.UNSIGNED_INT=5125,L$d.FLOAT=5126,L$d.DEPTH_COMPONENT=6402,L$d.ALPHA=6406,L$d.RGB=6407,L$d.RGBA=6408,L$d.LUMINANCE=6409,L$d.LUMINANCE_ALPHA=6410,L$d.UNSIGNED_SHORT_4_4_4_4=32819,L$d.UNSIGNED_SHORT_5_5_5_1=32820,L$d.UNSIGNED_SHORT_5_6_5=33635,L$d.FRAGMENT_SHADER=35632,L$d.VERTEX_SHADER=35633,L$d.MAX_VERTEX_ATTRIBS=34921,L$d.MAX_VERTEX_UNIFORM_VECTORS=36347,L$d.MAX_VARYING_VECTORS=36348,L$d.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,L$d.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,L$d.MAX_TEXTURE_IMAGE_UNITS=34930,L$d.MAX_FRAGMENT_UNIFORM_VECTORS=36349,L$d.SHADER_TYPE=35663,L$d.DELETE_STATUS=35712,L$d.LINK_STATUS=35714,L$d.VALIDATE_STATUS=35715,L$d.ATTACHED_SHADERS=35717,L$d.ACTIVE_UNIFORMS=35718,L$d.ACTIVE_ATTRIBUTES=35721,L$d.SHADING_LANGUAGE_VERSION=35724,L$d.CURRENT_PROGRAM=35725,L$d.NEVER=512,L$d.LESS=513,L$d.EQUAL=514,L$d.LEQUAL=515,L$d.GREATER=516,L$d.NOTEQUAL=517,L$d.GEQUAL=518,L$d.ALWAYS=519,L$d.KEEP=7680,L$d.REPLACE=7681,L$d.INCR=7682,L$d.DECR=7683,L$d.INVERT=5386,L$d.INCR_WRAP=34055,L$d.DECR_WRAP=34056,L$d.VENDOR=7936,L$d.RENDERER=7937,L$d.VERSION=7938,L$d.NEAREST=9728,L$d.LINEAR=9729,L$d.NEAREST_MIPMAP_NEAREST=9984,L$d.LINEAR_MIPMAP_NEAREST=9985,L$d.NEAREST_MIPMAP_LINEAR=9986,L$d.LINEAR_MIPMAP_LINEAR=9987,L$d.TEXTURE_MAG_FILTER=10240,L$d.TEXTURE_MIN_FILTER=10241,L$d.TEXTURE_WRAP_S=10242,L$d.TEXTURE_WRAP_T=10243,L$d.TEXTURE_2D=3553,L$d.TEXTURE=5890,L$d.TEXTURE_CUBE_MAP=34067,L$d.TEXTURE_BINDING_CUBE_MAP=34068,L$d.TEXTURE_CUBE_MAP_POSITIVE_X=34069,L$d.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,L$d.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,L$d.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,L$d.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,L$d.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,L$d.MAX_CUBE_MAP_TEXTURE_SIZE=34076,L$d.TEXTURE0=33984,L$d.TEXTURE1=33985,L$d.TEXTURE2=33986,L$d.TEXTURE3=33987,L$d.TEXTURE4=33988,L$d.TEXTURE5=33989,L$d.TEXTURE6=33990,L$d.TEXTURE7=33991,L$d.TEXTURE8=33992,L$d.TEXTURE9=33993,L$d.TEXTURE10=33994,L$d.TEXTURE11=33995,L$d.TEXTURE12=33996,L$d.TEXTURE13=33997,L$d.TEXTURE14=33998,L$d.TEXTURE15=33999,L$d.TEXTURE16=34e3,L$d.TEXTURE17=34001,L$d.TEXTURE18=34002,L$d.TEXTURE19=34003,L$d.TEXTURE20=34004,L$d.TEXTURE21=34005,L$d.TEXTURE22=34006,L$d.TEXTURE23=34007,L$d.TEXTURE24=34008,L$d.TEXTURE25=34009,L$d.TEXTURE26=34010,L$d.TEXTURE27=34011,L$d.TEXTURE28=34012,L$d.TEXTURE29=34013,L$d.TEXTURE30=34014,L$d.TEXTURE31=34015,L$d.ACTIVE_TEXTURE=34016,L$d.REPEAT=10497,L$d.CLAMP_TO_EDGE=33071,L$d.MIRRORED_REPEAT=33648,L$d.FLOAT_VEC2=35664,L$d.FLOAT_VEC3=35665,L$d.FLOAT_VEC4=35666,L$d.INT_VEC2=35667,L$d.INT_VEC3=35668,L$d.INT_VEC4=35669,L$d.BOOL=35670,L$d.BOOL_VEC2=35671,L$d.BOOL_VEC3=35672,L$d.BOOL_VEC4=35673,L$d.FLOAT_MAT2=35674,L$d.FLOAT_MAT3=35675,L$d.FLOAT_MAT4=35676,L$d.SAMPLER_2D=35678,L$d.SAMPLER_CUBE=35680,L$d.VERTEX_ATTRIB_ARRAY_ENABLED=34338,L$d.VERTEX_ATTRIB_ARRAY_SIZE=34339,L$d.VERTEX_ATTRIB_ARRAY_STRIDE=34340,L$d.VERTEX_ATTRIB_ARRAY_TYPE=34341,L$d.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,L$d.VERTEX_ATTRIB_ARRAY_POINTER=34373,L$d.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,L$d.COMPILE_STATUS=35713,L$d.LOW_FLOAT=36336,L$d.MEDIUM_FLOAT=36337,L$d.HIGH_FLOAT=36338,L$d.LOW_INT=36339,L$d.MEDIUM_INT=36340,L$d.HIGH_INT=36341,L$d.FRAMEBUFFER=36160,L$d.RENDERBUFFER=36161,L$d.RGBA4=32854,L$d.RGB5_A1=32855,L$d.RGB565=36194,L$d.DEPTH_COMPONENT16=33189,L$d.STENCIL_INDEX=6401,L$d.STENCIL_INDEX8=36168,L$d.DEPTH_STENCIL=34041,L$d.RENDERBUFFER_WIDTH=36162,L$d.RENDERBUFFER_HEIGHT=36163,L$d.RENDERBUFFER_INTERNAL_FORMAT=36164,L$d.RENDERBUFFER_RED_SIZE=36176,L$d.RENDERBUFFER_GREEN_SIZE=36177,L$d.RENDERBUFFER_BLUE_SIZE=36178,L$d.RENDERBUFFER_ALPHA_SIZE=36179,L$d.RENDERBUFFER_DEPTH_SIZE=36180,L$d.RENDERBUFFER_STENCIL_SIZE=36181,L$d.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,L$d.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,L$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,L$d.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,L$d.COLOR_ATTACHMENT0=36064,L$d.DEPTH_ATTACHMENT=36096,L$d.STENCIL_ATTACHMENT=36128,L$d.DEPTH_STENCIL_ATTACHMENT=33306,L$d.NONE=0,L$d.FRAMEBUFFER_COMPLETE=36053,L$d.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,L$d.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,L$d.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,L$d.FRAMEBUFFER_UNSUPPORTED=36061,L$d.FRAMEBUFFER_BINDING=36006,L$d.RENDERBUFFER_BINDING=36007,L$d.MAX_RENDERBUFFER_SIZE=34024,L$d.INVALID_FRAMEBUFFER_OPERATION=1286,L$d.UNPACK_FLIP_Y_WEBGL=37440,L$d.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,L$d.CONTEXT_LOST_WEBGL=37442,L$d.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,L$d.BROWSER_DEFAULT_WEBGL=37444,L$d._useProgram=null,L$d._depthTest=!0,L$d._depthMask=!0,L$d._blend=!1,L$d._cullFace=!1,L$d.curBindTexTarget=null,L$d.curBindTexValue=null,L$g(L$d,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),L$d}(),L$ya=function(L$a){function L$b(){L$b.__super.call(this)}L$m(L$b,"laya.webgl.display.GraphicsGL",L$h);var L$c=L$b.prototype;return L$c.setShader=function(L$a){this._saveToCmd(L$r.context._setShader,[L$a])},L$c.setIBVB=function(L$a,L$b,L$c,L$d,L$e,L$f){this._saveToCmd(L$r.context._setIBVB,[L$a,L$b,L$c,L$d,L$e,L$f])},L$c.drawParticle=function(L$a,L$b,L$c){var L$d=L$v.createParticleTemplate2D(L$c);L$d.x=L$a,L$d.y=L$b,this._saveToCmd(L$r.context._drawParticle,[L$d])},L$b}(),L$za=function(L$a){var L$c;function L$P(L$a){this._x=0,this._y=0,this._id=++L$P._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=null,this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this._shader2D=null,this.meshlist=[],this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,L$P.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=L$P.MAXCLIPRECT,this.mOutPoint,this._canvas=L$a,this._canvas._addReference(),L$P._contextcount++,L$r.isFlash?(this._ib=L$wa.create(35044),L$qa.fillIBQuadrangle(this._ib,16)):this._ib=L$wa.QuadrangleIB,this.clear()}L$m(L$P,"laya.webgl.canvas.WebGLContext2D",L$e);var L$b=L$P.prototype;return L$b.setIsMainContext=function(){this._isMain=!0},L$b.clearBG=function(L$a,L$b,L$c,L$d){var L$e=L$ua.mainContext;L$e.clearColor(L$a,L$b,L$c,L$d),L$e.clear(16384)},L$b._getSubmits=function(){return this._submits},L$b._releaseMem=function(){if(this._submits){this._curMat.destroy(),this._curMat=null,this._shader2D.destroy(),this._shader2D=null;for(var L$a=0,L$b=this._submits._length;L$a<L$b;L$a++)this._submits[L$a].releaseRender();this._submits.length=0,this._submits._length=0,this._submits=null,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this._other&&(this._other.font=null),this._save=null,this._vb&&(this._vb.releaseResource(),this._vb.destroy(),this._vb.destory(),this._vb=null)}},L$b.destroy=function(){--L$P._contextcount,this.sprite=null,this._releaseMem(),this._targets&&this._targets.destroy(),this._targets=null,this._canvas&&this._canvas._removeReference(),this._canvas=null,this._ib&&this._ib!=L$wa.QuadrangleIB&&this._ib.releaseResource()},L$b.clear=function(){this._submits||(this._other=L$c.DEFAULT,this._curMat=L$B.create(),this._vb=L$xa.create(-1),this._submits=[],this._save=[L$Y.Create(this)],this._save.length=10,this._shader2D=new L$w,this._triangleMesh=L$Ka.getAMesh()),this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=L$c.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=L$P.MAXCLIPRECT,this._curSubmit=L$fa.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=L$T.DEFAULT;for(var L$a=0,L$b=this._submits._length;L$a<L$b;L$a++)this._submits[L$a].releaseRender(),this._submits[L$a]=null;this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},L$b.size=function(L$a,L$b){if(this._width!=L$a||this._height!=L$b)if(0==L$a||0==L$b){0!=this._vb._byteLength&&(this._width=L$a,this._height=L$b,this._vb.clear(),this._vb.upload());for(var L$c=0,L$d=this._submits._length;L$c<L$d;L$c++)this._submits[L$c].releaseRender();this._submits.length=0,this._submits._length=0,this._curSubmit=null,this._path&&this._path.recover(),this._path=null,this.sprite=null,this._targets&&this._targets.destroy(),this._targets=null}else this._width=L$a,this._height=L$b,this._targets&&this._targets.size(L$a,L$b),this._canvas.memorySize-=this._canvas.memorySize;0===L$a&&0===L$b&&this._releaseMem()},L$b._getTransformMatrix=function(){return this._curMat},L$b.translate=function(L$a,L$b){0===L$a&&0===L$b||(L$$.save(this),this._curMat.bTransform&&(L$Z.save(this),this._curMat.transformPointN(L$C.TEMP.setTo(L$a,L$b)),L$a=L$C.TEMP.x,L$b=L$C.TEMP.y),this._x+=L$a,this._y+=L$b)},L$b.save=function(){this._save[this._save._length++]=L$Y.Create(this)},L$b.restore=function(){var L$a=this._save._length;if(!(L$a<1))for(var L$b=L$a-1;0<=L$b;L$b--){var L$c=this._save[L$b];if(L$c.restore(this),L$c.isSaveMark())return void(this._save._length=L$b)}},L$b._fillText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){void 0===L$j&&(L$j=0);var L$k=this._shader2D,L$l=this._curSubmit.shaderValue,L$m=L$e?L$oa.create(L$e):this._other.font;if(L$Q.enabled)L$k.ALPHA!==L$l.ALPHA&&(L$k.glTexture=null),L$na.drawText(this,L$a,L$b,this._curMat,L$m,L$i||this._other.textAlign,L$f,L$g,L$h,L$c,L$d,L$j);else{this._shader2D.defines.getValue();var L$n=L$f?L$o.create(L$f)._color:L$k.colorAdd;L$k.ALPHA===L$l.ALPHA&&L$n===L$k.colorAdd&&L$l.colorAdd===L$k.colorAdd||(L$k.glTexture=null,L$k.colorAdd=L$n),L$na.drawText(this,L$a,L$b,this._curMat,L$m,L$i||this._other.textAlign,L$f,L$g,L$h,L$c,L$d,L$j)}},L$b.fillWords=function(L$a,L$b,L$c,L$d,L$e,L$f){this._fillText(null,L$a,L$b,L$c,L$d,L$e,null,-1,null,L$f)},L$b.fillBorderWords=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._fillBorderText(null,L$a,L$b,L$c,L$d,L$e,L$f,L$g,null)},L$b.fillText=function(L$a,L$b,L$c,L$d,L$e,L$f){this._fillText(L$a,null,L$b,L$c,L$d,L$e,null,-1,L$f)},L$b.strokeText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._fillText(L$a,null,L$b,L$c,L$d,null,L$e,L$f||1,L$g)},L$b.fillBorderText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){this._fillBorderText(L$a,null,L$b,L$c,L$d,L$e,L$f,L$g,L$h)},L$b._fillBorderText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){if(!L$Q.enabled)return this._fillText(L$a,L$b,L$c,L$d,L$e,null,L$g,L$h||1,L$i),void this._fillText(L$a,L$b,L$c,L$d,L$e,L$f,null,-1,L$i);var L$j=this._shader2D,L$k=this._curSubmit.shaderValue;L$j.ALPHA!==L$k.ALPHA&&(L$j.glTexture=null);var L$l=L$e?(L$P._fontTemp.setFont(L$e),L$P._fontTemp):this._other.font;L$na.drawText(this,L$a,L$b,this._curMat,L$l,L$i||this._other.textAlign,L$f,L$g,L$h||1,L$c,L$d,0)},L$b.fillRect=function(L$a,L$b,L$c,L$d,L$e){var L$f=this._vb;if(L$qa.fillRectImgVb(L$f,this._clipRect,L$a,L$b,L$c,L$d,L$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var L$g=this._shader2D.fillStyle;L$e&&(this._shader2D.fillStyle=L$T.create(L$e));var L$h=this._shader2D,L$i=this._curSubmit.shaderValue;if(L$h.fillStyle!==L$i.fillStyle||L$h.ALPHA!==L$i.ALPHA){L$h.glTexture=null;var L$j=this._curSubmit=L$fa.createSubmit(this,this._ib,L$f,(L$f._byteLength-64)/32*3,L$Aa.create(2,0));L$j.shaderValue.color=L$h.fillStyle._color._color,L$j.shaderValue.ALPHA=L$h.ALPHA,this._submits[this._submits._length++]=L$j}this._curSubmit._numEle+=6,this._shader2D.fillStyle=L$g}},L$b.fillTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){if(L$a.loaded&&L$a.bitmap&&L$a.source){var L$i=this._vb,L$j=L$a.bitmap.width,L$k=L$a.bitmap.height,L$l=L$a.uv,L$m=L$g.x%L$a.width,L$n=L$g.y%L$a.height;if(L$j!=L$h.w||L$k!=L$h.h){if(!L$h.w&&!L$h.h)switch(L$h.oy=L$h.ox=0,L$f){case"repeat":L$h.width=L$d,L$h.height=L$e;break;case"repeat-x":L$h.width=L$d,L$n<0?L$a.height+L$n>L$e?L$h.height=L$e:L$h.height=L$a.height+L$n:(L$h.oy=L$n,L$a.height+L$n>L$e?L$h.height=L$e-L$n:L$h.height=L$a.height);break;case"repeat-y":L$m<0?L$a.width+L$m>L$d?L$h.width=L$d:L$h.width=L$a.width+L$m:(L$h.ox=L$m,L$a.width+L$m>L$d?L$h.width=L$d-L$m:L$h.width=L$a.width),L$h.height=L$e;break;case"no-repeat":L$m<0?L$a.width+L$m>L$d?L$h.width=L$d:L$h.width=L$a.width+L$m:(L$h.ox=L$m,L$a.width+L$m>L$d?L$h.width=L$d-L$m:L$h.width=L$a.width),L$n<0?L$a.height+L$n>L$e?L$h.height=L$e:L$h.height=L$a.height+L$n:(L$h.oy=L$n,L$a.height+L$n>L$e?L$h.height=L$e-L$n:L$h.height=L$a.height);break;default:L$h.width=L$d,L$h.height=L$e}L$h.w=L$j,L$h.h=L$k,L$h.uv=[0,0,L$h.width/L$j,0,L$h.width/L$j,L$h.height/L$k,0,L$h.height/L$k]}if(L$b+=L$h.ox,L$c+=L$h.oy,L$m-=L$h.ox,L$n-=L$h.oy,L$qa.fillRectImgVb(L$i,this._clipRect,L$b,L$c,L$h.width,L$h.height,L$h.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var L$o=L$Ja.create(this,this._ib,L$i,(L$i._byteLength-64)/32*3,L$Aa.create(256,0)),L$p=(this._submits[this._submits._length++]=L$o).shaderValue;L$p.textureHost=L$a;var L$q=L$l[0]*L$j,L$r=L$l[1]*L$k,L$s=(L$l[2]-L$l[0])*L$j,L$t=(L$l[5]-L$l[3])*L$k,L$u=-L$m/L$j,L$v=-L$n/L$k;L$p.u_TexRange[0]=L$q/L$j,L$p.u_TexRange[1]=L$s/L$j,L$p.u_TexRange[2]=L$r/L$k,L$p.u_TexRange[3]=L$t/L$k,L$p.u_offset[0]=L$u,L$p.u_offset[1]=L$v,L$Q.enabled&&!this._isMain&&L$o.addTexture(L$a,(L$i._byteLength>>2)-16),(this._curSubmit=L$o)._renderType=10017,L$o._numEle+=6}}else this.sprite&&L$y.timer.callLater(this,this._repaintSprite)},L$b.setShader=function(L$a){L$V.save(this,1048576,this._shader2D,!0),this._shader2D.shader=L$a},L$b.setFilters=function(L$a){L$V.save(this,2097152,this._shader2D,!0),this._shader2D.filters=L$a,this._curSubmit=L$fa.RENDERBASE,this._renderKey=0,this._drawCount++},L$b.drawTexture=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._drawTextureM(L$a,L$b,L$c,L$d,L$e,L$f,L$g,null,1)},L$b.addTextureVb=function(L$a,L$b,L$c){var L$d=this._curSubmit._vb||this._vb,L$e=L$d._byteLength>>2;L$d.byteLength=L$e+16<<2;for(var L$f=L$d.getFloat32Array(),L$g=0;L$g<16;L$g+=4)L$f[L$e++]=L$a[L$g]+L$b,L$f[L$e++]=L$a[L$g+1]+L$c,L$f[L$e++]=L$a[L$g+2],L$f[L$e++]=L$a[L$g+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),L$d._upload=!0},L$b.willDrawTexture=function(L$a,L$b){if(!(L$a.loaded&&L$a.bitmap&&L$a.source))return this.sprite&&L$y.timer.callLater(this,this._repaintSprite),0;var L$c=L$a.bitmap,L$d=L$c.id+this._shader2D.ALPHA*L$b+10016;if(L$d==this._renderKey)return L$d;var L$e=this._shader2D,L$f=L$e.ALPHA,L$g=this._curSubmit.shaderValue;L$e.ALPHA*=L$b,this._renderKey=L$d,this._drawCount++,L$e.glTexture=L$c;var L$h=this._vb,L$i=null,L$j=L$h._byteLength/32*3,L$k=L$g.textureHost&&L$g.textureHost==L$a&&L$g.textureHost.alphaTexture==L$a.alphaTexture;return L$i=L$Ja.create(this,this._ib,L$h,L$j,L$Aa.create(1,0)),(this._submits[this._submits._length++]=L$i).shaderValue.textureHost=L$a,L$i._renderType=10016,L$i._preIsSameTextureShader=10016===this._curSubmit._renderType&&L$e.ALPHA===L$g.ALPHA&&L$k,this._curSubmit=L$i,L$e.ALPHA=L$f,L$d},L$b.drawTextures=function(L$a,L$b,L$c,L$d){if(L$a.loaded&&L$a.bitmap&&L$a.source){var L$e=this._clipRect;if(this._clipRect=L$P.MAXCLIPRECT,this._drawTextureM(L$a,L$b[0],L$b[1],L$a.width,L$a.height,L$c,L$d,null,1)){if(this._clipRect=L$e,L$G.drawCall++,!(L$b.length<4)){for(var L$f=this._curSubmit._vb||this._vb,L$g=this._curMat.a,L$h=this._curMat.d,L$i=2,L$j=L$b.length;L$i<L$j;L$i+=2)L$qa.copyPreImgVb(L$f,(L$b[L$i]-L$b[L$i-2])*L$g,(L$b[L$i+1]-L$b[L$i-1])*L$h),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&L$y.timer.callLater(this,this._repaintSprite)},L$b._drawTextureM=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){if(!L$a.loaded||!L$a.source)return this.sprite&&L$y.timer.callLater(this,this._repaintSprite),!1;var L$j=this._curSubmit._vb||this._vb,L$k=L$a.bitmap;L$b+=L$f,L$c+=L$g,this._drawCount++;var L$l=L$k.id+this._shader2D.ALPHA*L$i+10016;if(L$l!=this._renderKey){this._renderKey=L$l;var L$m=this._curSubmit.shaderValue,L$n=this._shader2D,L$o=L$n.ALPHA;L$n.ALPHA*=L$i,L$n.glTexture=L$k;var L$p=this._vb,L$q=null,L$r=L$p._byteLength/32*3,L$s=L$m.textureHost&&L$m.textureHost==L$a&&L$m.textureHost.alphaTexture==L$a.alphaTexture;L$q=L$Ja.create(this,this._ib,L$p,L$r,L$Aa.create(1,0)),(this._submits[this._submits._length++]=L$q).shaderValue.textureHost=L$a,L$q._renderType=10016,L$q._preIsSameTextureShader=10016===this._curSubmit._renderType&&L$n.ALPHA===L$m.ALPHA&&L$s,this._curSubmit=L$q,L$j=this._curSubmit._vb||this._vb,L$n.ALPHA=L$o}return!!L$qa.fillRectImgVb(L$j,this._clipRect,L$b,L$c,L$d||L$a.width,L$e||L$a.height,L$a.uv,L$h||this._curMat,this._x,this._y,0,0)&&(L$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(L$a,(L$j._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},L$b._repaintSprite=function(){this.sprite&&this.sprite.repaint()},L$b._drawText=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){var L$k=L$a.bitmap;this._drawCount++;var L$l=L$k.id+this._shader2D.ALPHA+10016;if(L$l!=this._renderKey){this._renderKey=L$l;var L$m=this._curSubmit.shaderValue,L$n=this._shader2D;L$n.glTexture=L$k;var L$o=this._vb,L$p=null,L$q=L$o._byteLength/32*3,L$r=L$m.textureHost&&L$m.textureHost==L$a&&L$m.textureHost.alphaTexture==L$a.alphaTexture;(L$p=L$Q.enabled?L$Ja.create(this,this._ib,L$o,L$q,L$Aa.create(1,0)):L$Ja.create(this,this._ib,L$o,L$q,L$$a.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&L$n.ALPHA===L$m.ALPHA&&L$r,(this._submits[this._submits._length++]=L$p).shaderValue.textureHost=L$a,L$p._renderType=10016,this._curSubmit=L$p}L$a.active();var L$s=this._curSubmit._vb||this._vb;L$qa.fillRectImgVb(L$s,this._clipRect,L$b+L$g,L$c+L$h,L$d||L$a.width,L$e||L$a.height,L$a.uv,L$f||this._curMat,this._x,this._y,L$i,L$j,!0)&&(L$Q.enabled&&!this._isMain&&this._curSubmit.addTexture(L$a,(L$s._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},L$b.drawTextureWithTransform=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){if(L$f){var L$j=this._curMat,L$k=this._x,L$l=this._y;(0!==L$g||0!==L$h)&&(this._x=L$g*L$j.a+L$h*L$j.c,this._y=L$h*L$j.d+L$g*L$j.b),L$f&&L$j.bTransform?(L$B.mul(L$f,L$j,L$P._tmpMatrix),(L$f=L$P._tmpMatrix)._checkTransform()):(this._x+=L$j.tx,this._y+=L$j.ty),this._drawTextureM(L$a,L$b,L$c,L$d,L$e,0,0,L$f,L$i),this._x=L$k,this._y=L$l}else this._drawTextureM(L$a,L$b,L$c,L$d,L$e,L$g,L$h,null,L$i)},L$b.fillQuadrangle=function(L$a,L$b,L$c,L$d,L$e){var L$f=this._curSubmit,L$g=this._vb,L$h=this._shader2D,L$i=L$f.shaderValue;if(this._renderKey=0,L$a.bitmap){var L$j=L$a.bitmap;L$h.glTexture==L$j&&L$h.ALPHA===L$i.ALPHA||(L$h.glTexture=L$j,(L$f=this._curSubmit=L$fa.createSubmit(this,this._ib,L$g,L$g._byteLength/32*3,L$Aa.create(1,0))).shaderValue.glTexture=L$j,this._submits[this._submits._length++]=L$f),L$qa.fillQuadrangleImgVb(L$g,L$b,L$c,L$d,L$a.uv,L$e||this._curMat,this._x,this._y)}else L$f.shaderValue.fillStyle&&L$f.shaderValue.fillStyle.equal(L$a)&&L$h.ALPHA===L$i.ALPHA||(L$h.glTexture=null,(L$f=this._curSubmit=L$fa.createSubmit(this,this._ib,L$g,L$g._byteLength/32*3,L$Aa.create(2,0))).shaderValue.defines.add(2),L$f.shaderValue.fillStyle=L$T.create(L$a),this._submits[this._submits._length++]=L$f),L$qa.fillQuadrangleImgVb(L$g,L$b,L$c,L$d,L$K.DEF_UV,L$e||this._curMat,this._x,this._y);L$f._numEle+=6},L$b.drawTexture2=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){if(0!=L$f){var L$i=this._curMat;if(this._x=L$a*L$i.a+L$b*L$i.c,this._y=L$b*L$i.d+L$a*L$i.b,L$e&&(L$e=L$i.bTransform||L$e.bTransform?(L$B.mul(L$e,L$i,L$P._tmpMatrix),L$P._tmpMatrix):(this._x+=L$e.tx+L$i.tx,this._y+=L$e.ty+L$i.ty,L$B.EMPTY)),1!==L$f||L$g){var L$j=this._shader2D.ALPHA,L$k=this._nBlendType;this._shader2D.ALPHA=L$f,L$g&&(this._nBlendType=L$S.TOINT(L$g)),this._drawTextureM(L$h[0],L$h[1]-L$c,L$h[2]-L$d,L$h[3],L$h[4],0,0,L$e,1),this._shader2D.ALPHA=L$j,this._nBlendType=L$k}else this._drawTextureM(L$h[0],L$h[1]-L$c,L$h[2]-L$d,L$h[3],L$h[4],0,0,L$e,1);this._x=this._y=0}},L$b.drawCanvas=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$a.context;if(this._renderKey=0,L$f._targets)this._submits[this._submits._length++]=L$Ia.create(L$f,0,null),this._curSubmit=L$fa.RENDERBASE,L$f._targets.drawTo(this,L$b,L$c,L$d,L$e);else{var L$g=this._submits[this._submits._length++]=L$Ia.create(L$f,this._shader2D.ALPHA,this._shader2D.filters),L$h=L$d/L$a.width,L$i=L$e/L$a.height,L$j=L$g._matrix;this._curMat.copyTo(L$j),1!=L$h&&1!=L$i&&L$j.scale(L$h,L$i);var L$k=L$j.tx,L$l=L$j.ty;L$j.tx=L$j.ty=0,L$j.transformPoint(L$C.TEMP.setTo(L$b,L$c)),L$j.translate(L$C.TEMP.x+L$k,L$C.TEMP.y+L$l),this._curSubmit=L$fa.RENDERBASE}L$z.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=L$f._targets?"yellow":"green",this.strokeRect(L$b-1,L$c-1,L$d+2,L$e+2,1),this.strokeRect(L$b,L$c,L$d,L$e,1),this.restore())},L$b.drawTarget=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){void 0===L$j&&(L$j=-1);var L$k=this._vb;if(L$qa.fillRectImgVb(L$k,this._clipRect,L$b,L$c,L$d,L$e,L$i||L$K.DEF_UV,L$f||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var L$l=this._curSubmit=L$la.create(this,this._ib,L$k,(L$k._byteLength-64)/32*3,L$h,L$g);L$l.blendType=-1==L$j?this._nBlendType:L$j,L$l.scope=L$a,this._submits[this._submits._length++]=L$l,this._curSubmit._numEle+=6}},L$b.mixRGBandAlpha=function(L$a){return this._mixRGBandAlpha(L$a,this._shader2D.ALPHA)},L$b._mixRGBandAlpha=function(L$a,L$b){var L$c=(4278190080&L$a)>>>24;return 0!=L$c?L$c*=L$b:L$c=255*L$b,16777215&L$a|L$c<<24},L$b.drawTriangles=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){if(!L$a.loaded||!L$a.source)return this.sprite&&L$y.timer.callLater(this,this._repaintSprite),!1;this._drawCount++;L$a.bitmap;var L$k=this._mixRGBandAlpha(4294967295,L$h),L$l=(L$d.length,L$f.length);this._renderKey=-1;var L$m=this._curSubmit=L$Ja.create(this,this._triangleMesh.getIBR(),this._triangleMesh.getVBR(),this._triangleMesh.indexNum,L$Aa.create(1,0));return L$m.shaderValue.textureHost=L$a,L$m._renderType=10016,this._submits[this._submits._length++]=L$m,L$g?(L$P._tmpMatrix.a=L$g.a,L$P._tmpMatrix.b=L$g.b,L$P._tmpMatrix.c=L$g.c,L$P._tmpMatrix.d=L$g.d,L$P._tmpMatrix.tx=L$g.tx+L$b,L$P._tmpMatrix.ty=L$g.ty+L$c,L$B.mul(L$P._tmpMatrix,this._curMat,L$P._tmpMatrix)):(L$P._tmpMatrix.a=this._curMat.a,L$P._tmpMatrix.b=this._curMat.b,L$P._tmpMatrix.c=this._curMat.c,L$P._tmpMatrix.d=this._curMat.d,L$P._tmpMatrix.tx=this._curMat.tx+L$b,L$P._tmpMatrix.ty=this._curMat.ty+L$c),this._triangleMesh.addData(L$d,L$e,L$f,L$P._tmpMatrix,L$k,this),this._curSubmit._numEle+=L$l,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0},L$b.transform=function(L$a,L$b,L$c,L$d,L$e,L$f){L$Z.save(this),L$B.mul(L$B.TEMP.setTo(L$a,L$b,L$c,L$d,L$e,L$f),this._curMat,this._curMat),this._curMat._checkTransform()},L$b.setTransformByMatrix=function(L$a){L$a.copyTo(this._curMat)},L$b.transformByMatrix=function(L$a){L$Z.save(this),L$B.mul(L$a,this._curMat,this._curMat),this._curMat._checkTransform()},L$b.rotate=function(L$a){L$Z.save(this),this._curMat.rotateEx(L$a)},L$b.scale=function(L$a,L$b){L$Z.save(this),this._curMat.scaleEx(L$a,L$b)},L$b.clipRect=function(L$a,L$b,L$c,L$d){if(0!=this._curMat.b||0!=this._curMat.c){this._renderKey=0;var L$e=L$ka.create(4);this.addRenderObject(L$e);var L$f=this._vb,L$g=L$f._byteLength>>2;if(L$qa.fillRectImgVb(L$f,null,L$a,L$b,L$c,L$d,L$K.DEF_UV,this._curMat,this._x,this._y,0,0)){this._shader2D.glTexture=null;var L$h=this._curSubmit=L$fa.createSubmit(this,this._ib,L$f,(L$f._byteLength-64)/32*3,L$Aa.create(2,0));L$h.shaderValue.ALPHA=1,this._submits[this._submits._length++]=L$h,this._curSubmit._numEle+=6}else alert("clipRect calc stencil rect error");var L$i=L$ka.create(5);this.addRenderObject(L$i);var L$j=L$f.getFloat32Array(),L$k=Math.min(Math.min(Math.min(L$j[0+L$g],L$j[4+L$g]),L$j[8+L$g]),L$j[12+L$g]),L$l=Math.max(Math.max(Math.max(L$j[0+L$g],L$j[4+L$g]),L$j[8+L$g]),L$j[12+L$g]),L$m=Math.min(Math.min(Math.min(L$j[1+L$g],L$j[5+L$g]),L$j[9+L$g]),L$j[13+L$g]),L$n=Math.max(Math.max(Math.max(L$j[1+L$g],L$j[5+L$g]),L$j[9+L$g]),L$j[13+L$g]);L$X.save(this,L$i,L$a,L$b,L$c,L$d,L$k,L$m,L$l-L$k,L$n-L$m),this._curSubmit=L$fa.RENDERBASE}else{L$c*=this._curMat.a,L$d*=this._curMat.d;var L$o=L$C.TEMP;this._curMat.transformPoint(L$o.setTo(L$a,L$b)),L$c<0&&(L$o.x=L$o.x+L$c,L$c=-L$c),L$d<0&&(L$o.y=L$o.y+L$d,L$d=-L$d),this._renderKey=0;var L$p=this._curSubmit=L$ja.create(this);(this._submits[this._submits._length++]=L$p).submitIndex=this._submits._length,L$p.submitLength=9999999,L$W.save(this,L$p);var L$q=this._clipRect,L$r=L$q.x,L$s=L$q.y,L$t=L$o.x+L$c,L$u=L$o.y+L$d;L$r<L$o.x&&(L$q.x=L$o.x),L$s<L$o.y&&(L$q.y=L$o.y),L$q.width=Math.min(L$t,L$r+L$q.width)-L$q.x,L$q.height=Math.min(L$u,L$s+L$q.height)-L$q.y,this._shader2D.glTexture=null,L$p.clipRect.copyFrom(L$q),this._curSubmit=L$fa.RENDERBASE}},L$b.setIBVB=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k){if(void 0===L$i&&(L$i=0),void 0===L$j&&(L$j=0),void 0===L$k&&(L$k=0),null===L$c){if(L$r.isFlash){var L$l=L$d;L$l._selfIB||(L$l._selfIB=L$wa.create(35044)),L$l._selfIB.clear(),L$c=L$l._selfIB}else L$c=this._ib;L$qa.expandIBQuadrangle(L$c,L$d._byteLength/(4*L$d.vertexStride*4))}if(!L$h||!L$g)throw Error("setIBVB must input:shader shaderValues");var L$m=L$ia.create(this,L$d,L$c,L$e,L$g,L$h,L$i,L$j,L$k);L$f||(L$f=L$B.EMPTY),L$f.translate(L$a,L$b),L$B.mul(L$f,this._curMat,L$m._mat),L$f.translate(-L$a,-L$b),this._submits[this._submits._length++]=L$m,this._curSubmit=L$fa.RENDERBASE,this._renderKey=0},L$b.addRenderObject=function(L$a){this._submits[this._submits._length++]=L$a},L$b.fillTrangles=function(L$a,L$b,L$c,L$d,L$e){var L$f=this._curSubmit,L$g=this._vb,L$h=this._shader2D,L$i=L$f.shaderValue,L$j=L$d.length>>4,L$k=L$a.bitmap;this._renderKey=0,L$h.glTexture==L$k&&L$h.ALPHA===L$i.ALPHA||((L$f=this._curSubmit=L$fa.createSubmit(this,this._ib,L$g,L$g._byteLength/32*3,L$Aa.create(1,0))).shaderValue.textureHost=L$a,this._submits[this._submits._length++]=L$f),L$qa.fillTranglesVB(L$g,L$b,L$c,L$d,L$e||this._curMat,this._x,this._y),L$f._numEle+=6*L$j},L$b.submitElement=function(L$a,L$b){var L$c=this._submits;for(L$b<0&&(L$b=L$c._length);L$a<L$b;)L$a+=L$c[L$a].renderSubmit()},L$b.finish=function(){L$ua.mainContext.finish()},L$b.flush=function(){var L$a=Math.max(this._vb._byteLength/64,this._maxNumEle/6)+8;if(L$a>this._ib.bufferLength/12&&L$qa.expandIBQuadrangle(this._ib,L$a),!this._isMain&&L$Q.enabled&&L$Q._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=L$Q._atlasRestore;for(var L$b=this._submits,L$c=0,L$d=L$b._length;L$c<L$d;L$c++){var L$e=L$b[L$c];10016===L$e.getRenderType()&&L$e.checkTexture()}}this.submitElement(0,this._submits._length),this._path&&this._path.reset(),L$ba.instance&&L$ba.getInstance().reset();var L$f;for(L$c=0,L$f=this.meshlist.length;L$c<L$f;L$c++){var L$g=this.meshlist[L$c];L$g.canReuse?L$g.releaseMesh():L$g.destroy()}return this.meshlist.length=0,this._curSubmit=L$fa.RENDERBASE,this._renderKey=0,this._triangleMesh=L$Ka.getAMesh(),this.meshlist.push(this._triangleMesh),this._submits._length},L$b.setPathId=function(L$a){if(this.mId=L$a,-1!=this.mId){this.mHaveKey=!1;var L$b=L$M.getInstance();L$b.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,L$b.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},L$b.movePath=function(L$a,L$b){var L$c=L$a,L$d=L$b;L$a=this._curMat.a*L$c+this._curMat.c*L$d+this._curMat.tx,L$b=this._curMat.b*L$c+this._curMat.d*L$d+this._curMat.ty,this.mX+=L$a,this.mY+=L$b},L$b.beginPath=function(){var L$a=this._getPath();L$a.tempArray.length=0,L$a.closePath=!1,this.mX=0,this.mY=0},L$b.closePath=function(){this._path.closePath=!0},L$b.fill=function(L$a){void 0===L$a&&(L$a=!1);var L$b=this._getPath();this.drawPoly(0,0,L$b.tempArray,this.fillStyle._color.numColor,0,0,L$a)},L$b.stroke=function(){var L$a=this._getPath();if(0<this.lineWidth){if(-1==this.mId)L$a.drawLine(0,0,L$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var L$b=L$M.getInstance().shapeLineDic[this.mId];L$b.rebuild(L$a.tempArray),L$a.setGeomtry(L$b)}else L$M.getInstance().addLine(this.mId,L$a.drawLine(0,0,L$a.tempArray,this.lineWidth,this.strokeStyle._color.numColor));L$a.update();var L$c=[this.mX,this.mY],L$d=L$fa.createShape(this,L$a.ib,L$a.vb,L$a.count,L$a.offset,L$Aa.create(4,0));L$d.shaderValue.ALPHA=this._shader2D.ALPHA,L$d.shaderValue.u_pos=L$c,L$d.shaderValue.u_mmat2=L$sa.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=L$d,this._renderKey=-1}},L$b.line=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=this._curSubmit,L$h=this._vb;if(L$qa.fillLineVb(L$h,this._clipRect,L$a,L$b,L$c,L$d,L$e,L$f)){this._renderKey=0;var L$i=this._shader2D,L$j=L$g.shaderValue;L$i.strokeStyle===L$j.strokeStyle&&L$i.ALPHA===L$j.ALPHA||(L$i.glTexture=null,(L$g=this._curSubmit=L$fa.createSubmit(this,this._ib,L$h,(L$h._byteLength-64)/32*3,L$Aa.create(2,0))).shaderValue.strokeStyle=L$i.strokeStyle,L$g.shaderValue.mainID=2,L$g.shaderValue.ALPHA=L$i.ALPHA,this._submits[this._submits._length++]=L$g),L$g._numEle+=6}},L$b.moveTo=function(L$a,L$b,L$c){void 0===L$c&&(L$c=!0);var L$d=this._getPath();if(L$c){var L$e=L$a,L$f=L$b;L$a=this._curMat.a*L$e+this._curMat.c*L$f,L$b=this._curMat.b*L$e+this._curMat.d*L$f}L$d.addPoint(L$a,L$b)},L$b.lineTo=function(L$a,L$b,L$c){void 0===L$c&&(L$c=!0);var L$d=this._getPath();if(L$c){var L$e=L$a,L$f=L$b;L$a=this._curMat.a*L$e+this._curMat.c*L$f,L$b=this._curMat.b*L$e+this._curMat.d*L$f}L$d.addPoint(L$a,L$b)},L$b.drawCurves=function(L$a,L$b,L$c){this.setPathId(-1),this.beginPath(),this.strokeStyle=L$c[3],this.lineWidth=L$c[4];var L$d=L$c[2];L$a+=L$c[0],L$b+=L$c[1],this.movePath(L$a,L$b),this.moveTo(L$d[0],L$d[1]);for(var L$e=2,L$f=L$d.length;L$e<L$f;)this.quadraticCurveTo(L$d[L$e++],L$d[L$e++],L$d[L$e++],L$d[L$e++]);this.stroke()},L$b.arcTo=function(L$a,L$b,L$c,L$d,L$e){if(-1==this.mId||!this.mHaveKey){var L$f=0,L$g=0,L$h=0,L$i=this._getPath();this._curMat.copyTo(L$P._tmpMatrix),L$P._tmpMatrix.tx=L$P._tmpMatrix.ty=0,L$P._tempPoint.setTo(L$i.getEndPointX(),L$i.getEndPointY()),L$P._tmpMatrix.invertTransformPoint(L$P._tempPoint);var L$j=L$P._tempPoint.x-L$a,L$k=L$P._tempPoint.y-L$b,L$l=Math.sqrt(L$j*L$j+L$k*L$k);if(!(L$l<=1e-6)){var L$m=L$j/L$l,L$n=L$k/L$l,L$o=L$c-L$a,L$p=L$d-L$b,L$q=L$o*L$o+L$p*L$p,L$r=Math.sqrt(L$q);if(!(L$r<=1e-6)){var L$s=L$o/L$r,L$t=L$p/L$r,L$u=L$m+L$s,L$v=L$n+L$t,L$y=Math.sqrt(L$u*L$u+L$v*L$v);if(!(L$y<=1e-6)){var L$z=L$u/L$y,L$A=L$v/L$y,L$B=Math.acos(L$z*L$m+L$A*L$n),L$C=Math.PI/2-L$B,L$D=(L$l=L$e/Math.tan(L$C))*L$m+L$a,L$E=L$l*L$n+L$b,L$F=Math.sqrt(L$l*L$l+L$e*L$e),L$G=L$a+L$z*L$F,L$H=L$b+L$A*L$F,L$I=0,L$J=0;if(0<=L$m*L$t-L$n*L$s){var L$K=2*L$C/L$P.SEGNUM;L$I=Math.sin(L$K),L$J=Math.cos(L$K)}else L$K=2*-L$C/L$P.SEGNUM,L$I=Math.sin(L$K),L$J=Math.cos(L$K);L$g=this._curMat.a*L$D+this._curMat.c*L$E,L$h=this._curMat.b*L$D+this._curMat.d*L$E,L$g==this._path.getEndPointX()&&L$h==this._path.getEndPointY()||L$i.addPoint(L$g,L$h);var L$L=L$D-L$G,L$M=L$E-L$H;for(L$f=0;L$f<L$P.SEGNUM;L$f++){var L$N=L$L*L$J+L$M*L$I,L$O=-L$L*L$I+L$M*L$J;L$g=L$N+L$G,L$h=L$O+L$H,L$a=this._curMat.a*L$g+this._curMat.c*L$h,L$h=L$b=this._curMat.b*L$g+this._curMat.d*L$h,(L$g=L$a)==this._path.getEndPointX()&&L$h==this._path.getEndPointY()||L$i.addPoint(L$g,L$h),L$L=L$N,L$M=L$O}}}}}},L$b.arc=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){if(void 0===L$f&&(L$f=!1),void 0===L$g&&(L$g=!0),-1!=this.mId){var L$h=L$M.getInstance().shapeDic[this.mId];if(L$h&&this.mHaveKey&&!L$h.needUpdate(this._curMat))return;L$b=L$a=0}var L$i,L$j=0,L$k=0,L$l=0,L$m=0,L$n=0,L$o=0,L$p=0;if(L$k=L$e-L$d,L$f)if(Math.abs(L$k)>=2*Math.PI)L$k=2*-Math.PI;else for(;0<L$k;)L$k-=2*Math.PI;else if(Math.abs(L$k)>=2*Math.PI)L$k=2*Math.PI;else for(;L$k<0;)L$k+=2*Math.PI;L$i=L$k/(L$p=L$c<101?Math.max(10,L$k*L$c/5):L$c<201?Math.max(10,L$k*L$c/20):Math.max(10,L$k*L$c/40))/2,L$l=Math.abs(4/3*(1-Math.cos(L$i))/Math.sin(L$i)),L$f&&(L$l=-L$l);var L$q=this._getPath(),L$r=NaN,L$s=NaN;for(L$o=0;L$o<=L$p;L$o++)L$j=L$d+L$k*(L$o/L$p),L$m=L$a+Math.cos(L$j)*L$c,L$n=L$b+Math.sin(L$j)*L$c,L$g&&(L$r=L$m,L$s=L$n,L$m=this._curMat.a*L$r+this._curMat.c*L$s,L$n=this._curMat.b*L$r+this._curMat.d*L$s),L$m==this._path.getEndPointX()&&L$n==this._path.getEndPointY()||L$q.addPoint(L$m,L$n);L$m=L$a+Math.cos(L$e)*L$c,L$n=L$b+Math.sin(L$e)*L$c,L$g&&(L$r=L$m,L$s=L$n,L$m=this._curMat.a*L$r+this._curMat.c*L$s,L$n=this._curMat.b*L$r+this._curMat.d*L$s),L$m==this._path.getEndPointX()&&L$n==this._path.getEndPointY()||L$q.addPoint(L$m,L$n)},L$b.quadraticCurveTo=function(L$a,L$b,L$c,L$d){var L$e=L$l.I,L$f=L$c,L$g=L$d;L$c=this._curMat.a*L$f+this._curMat.c*L$g,L$d=this._curMat.b*L$f+this._curMat.d*L$g,L$f=L$a,L$g=L$b,L$a=this._curMat.a*L$f+this._curMat.c*L$g,L$b=this._curMat.b*L$f+this._curMat.d*L$g;for(var L$h=L$e.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),L$a,L$b,L$c,L$d],30,2),L$i=0,L$j=L$h.length/2;L$i<L$j;L$i++)this.lineTo(L$h[2*L$i],L$h[2*L$i+1],!1);this.lineTo(L$c,L$d,!1)},L$b.rect=function(L$a,L$b,L$c,L$d){this._other=this._other.make(),this._other.path||(this._other.path=new L$U),this._other.path.rect(L$a,L$b,L$c,L$d)},L$b.strokeRect=function(L$a,L$b,L$c,L$d,L$e){var L$f=.5*L$e;this.line(L$a-L$f,L$b,L$a+L$c+L$f,L$b,L$e,this._curMat),this.line(L$a+L$c,L$b,L$a+L$c,L$b+L$d,L$e,this._curMat),this.line(L$a,L$b,L$a,L$b+L$d,L$e,this._curMat),this.line(L$a-L$f,L$b+L$d,L$a+L$c+L$f,L$b+L$d,L$e,this._curMat)},L$b.clip=function(){},L$b.drawPoly=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){void 0===L$g&&(L$g=!1),this._renderKey=0,this._shader2D.glTexture=null;var L$h=this._getPath();if(-1==this.mId)L$h.polygon(L$a,L$b,L$c,L$d,L$e||1,L$f);else if(this.mHaveKey){var L$i=L$M.getInstance().shapeDic[this.mId];L$i.setMatrix(this._curMat),L$i.rebuild(L$h.tempArray),L$h.setGeomtry(L$i)}else{var L$j=L$h.polygon(L$a,L$b,L$c,L$d,L$e||1,L$f);L$M.getInstance().addShape(this.mId,L$j),L$j.setMatrix(this._curMat)}L$h.update();var L$k,L$l=[this.mX,this.mY];if((L$k=L$fa.createShape(this,L$h.ib,L$h.vb,L$h.count,L$h.offset,L$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,L$k.shaderValue.u_pos=L$l,L$k.shaderValue.u_mmat2=L$sa.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=L$k,0<L$e){if(this.mHaveLineKey){var L$m=L$M.getInstance().shapeLineDic[this.mId];L$m.rebuild(L$h.tempArray),L$h.setGeomtry(L$m)}else L$M.getInstance().addShape(this.mId,L$h.drawLine(L$a,L$b,L$c,L$e,L$f));L$h.update(),(L$k=L$fa.createShape(this,L$h.ib,L$h.vb,L$h.count,L$h.offset,L$Aa.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,L$k.shaderValue.u_mmat2=L$sa.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=L$k}},L$b.drawParticle=function(L$a,L$b,L$c){L$c.x=L$a,L$c.y=L$b,this._submits[this._submits._length++]=L$c},L$b._getPath=function(){return this._path||(this._path=new L$U)},L$d(0,L$b,"globalCompositeOperation",function(){return L$S.NAMES[this._nBlendType]},function(L$a){var L$b=L$S.TOINT[L$a];null==L$b||this._nBlendType===L$b||(L$V.save(this,65536,this,!0),this._curSubmit=L$fa.RENDERBASE,this._renderKey=0,this._nBlendType=L$b)}),L$d(0,L$b,"strokeStyle",function(){return this._shader2D.strokeStyle},function(L$a){this._shader2D.strokeStyle.equal(L$a)||(L$V.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=L$T.create(L$a))}),L$d(0,L$b,"globalAlpha",function(){return this._shader2D.ALPHA},function(L$a){(L$a=Math.floor(1e3*L$a)/1e3)!=this._shader2D.ALPHA&&(L$V.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=L$a)}),L$d(0,L$b,"asBitmap",null,function(L$a){if(L$a){if(this._targets||(this._targets=new L$_),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.setSP(this.sprite),this._targets.size(this._width,this._height)}else this._targets=null}),L$d(0,L$b,"fillStyle",function(){return this._shader2D.fillStyle},function(L$a){this._shader2D.fillStyle.equal(L$a)||(L$V.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=L$T.create(L$a))}),L$d(0,L$b,"textAlign",function(){return this._other.textAlign},function(L$a){this._other.textAlign===L$a||(this._other=this._other.make(),L$V.save(this,32768,this._other,!1),this._other.textAlign=L$a)}),L$d(0,L$b,"lineWidth",function(){return this._other.lineWidth},function(L$a){this._other.lineWidth===L$a||(this._other=this._other.make(),L$V.save(this,256,this._other,!1),this._other.lineWidth=L$a)}),L$d(0,L$b,"textBaseline",function(){return this._other.textBaseline},function(L$a){this._other.textBaseline===L$a||(this._other=this._other.make(),L$V.save(this,16384,this._other,!1),this._other.textBaseline=L$a)}),L$d(0,L$b,"font",null,function(L$a){L$a!=this._other.font.toString()&&(this._other=this._other.make(),L$V.save(this,8,this._other,!1),this._other.font===L$oa.EMPTY?this._other.font=new L$oa(L$a):this._other.font.setFont(L$a))}),L$P.__init__=function(){L$c.DEFAULT=new L$c},L$P._tempPoint=new L$C,L$P._SUBMITVBSIZE=32e3,L$P._MAXSIZE=99999999,L$P._RECTVBSIZE=16,L$P.MAXCLIPRECT=new L$D(0,0,99999999,99999999),L$P._COUNT=0,L$P._tmpMatrix=new L$B,L$P.SEGNUM=32,L$P._contextcount=0,L$g(L$P,["_fontTemp",function(){return this._fontTemp=new L$oa},"_drawStyleTemp",function(){return this._drawStyleTemp=new L$T(null)}]),L$P.__init$=function(){L$c=function(){function L$a(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=L$oa.EMPTY}L$m(L$a,"");var L$b=L$a.prototype;return L$b.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=L$oa.EMPTY},L$b.make=function(){return this===L$a.DEFAULT?new L$a:this},L$a.DEFAULT=null,L$a}()},L$P}(),L$Aa=function(L$a){function L$d(L$a,L$b){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,L$d.__super.call(this),this.defines=new L$Ea,this.position=L$d._POSITION,this.mainID=L$a,this.subID=L$b,this.textureHost=null,this.texture=null,this.texture1=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=L$a|L$b,this._inClassCache=L$d._cache[this._cacheID],0<L$a&&!this._inClassCache&&(this._inClassCache=L$d._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}L$m(L$d,"laya.webgl.shader.d2.value.Value2D",L$O);var L$b=L$d.prototype;return L$b.setValue=function(L$a){},L$b.refresh=function(){var L$a=this.size;return L$a[0]=L$sa.width,L$a[1]=L$sa.height,this.alpha=this.ALPHA*L$sa.worldAlpha,this.mmat=L$sa.worldMatrix4,this},L$b._ShaderWithCompile=function(){return L$Ya.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,L$_a.create)},L$b._withWorldShaderDefines=function(){var L$a=L$sa.worldShaderDefines,L$b=L$Ya.sharders[this.mainID|this.defines._value|L$a.getValue()];if(!L$b){var L$c,L$d={};for(L$c in this.defines.toNameDic())L$d[L$c]="";for(L$c in L$a.toNameDic())L$d[L$c]="";L$b=L$Ya.withCompile2D(0,this.mainID,L$d,this.mainID|this.defines._value|L$a.getValue(),L$_a.create)}var L$e=L$sa.worldFilters;if(!L$e)return L$b;for(var L$f,L$g=L$e.length,L$h=0;L$h<L$g;L$h++)(L$f=L$e[L$h])&&L$f.action.setValue(this);return L$b},L$b.upload=function(){var L$a=L$sa;this.alpha=this.ALPHA*L$a.worldAlpha,L$sa.worldMatrix4!==L$sa.TEMPMAT4_ARRAY&&this.defines.add(128),this.textureHost&&this.textureHost.alphaTexture?this.defines.add(2048):this.defines.remove(2048),this.textureHost&&this.textureHost.bitmap&&(37815==this.textureHost.bitmap.format||37812==this.textureHost.bitmap.format||37821==this.textureHost.bitmap.format)?this.defines.add(4096):this.defines.remove(4096),L$ua.shaderHighPrecision&&this.defines.add(1024);var L$b,L$c=L$a.worldShaderDefines?this._withWorldShaderDefines():L$Ya.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=L$a.width,this.size[1]=L$a.height,this.mmat=L$a.worldMatrix4,L$La.activeShader!==L$c?L$c._shaderValueWidth!==L$a.width||L$c._shaderValueHeight!==L$a.height?(L$c._shaderValueWidth=L$a.width,L$c._shaderValueHeight=L$a.height):L$b=L$c._params2dQuick2||L$c._make2dQuick2():L$c._shaderValueWidth!==L$a.width||L$c._shaderValueHeight!==L$a.height?(L$c._shaderValueWidth=L$a.width,L$c._shaderValueHeight=L$a.height):L$b=L$c._params2dQuick1||L$c._make2dQuick1(),L$c.upload(this,L$b)},L$b.setFilters=function(L$a){if(this.filters=L$a)for(var L$b,L$c=L$a.length,L$d=0;L$d<L$c;L$d++)(L$b=L$a[L$d])&&(this.defines.add(L$b.type),L$b.action.setValue(this))},L$b.clear=function(){this.defines.setValue(this.subID)},L$b.release=function(){(this._inClassCache[this._inClassCache._length++]=this).fillStyle=null,this.strokeStyle=null,this.textureHost=null,this.mmat=null,this.clear()},L$d._initone=function(L$a,L$b){L$d._typeClass[L$a]=L$b,L$d._cache[L$a]=[],L$d._cache[L$a]._length=0},L$d.__init__=function(){L$d._POSITION=[2,5126,!1,4*L$pa.BYTES_PE,0],L$d._TEXCOORD=[2,5126,!1,4*L$pa.BYTES_PE,2*L$pa.BYTES_PE],L$d._initone(2,L$Pa),L$d._initone(4,L$Sa),L$d._initone(256,L$Qa),L$d._initone(512,L$Oa),L$d._initone(1,L$Ra),L$d._initone(65,L$$a),L$d._initone(9,L$Ra)},L$d.create=function(L$a,L$b){var L$c=L$d._cache[L$a|L$b];return L$c._length?L$c[--L$c._length]:new L$d._typeClass[L$a|L$b](L$b)},L$d._POSITION=null,L$d._TEXCOORD=null,L$d._cache=[],L$d._typeClass=[],L$d.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L$d}(),L$Ba=function(L$a){function L$q(L$a,L$b){L$q.__super.call(this,L$a,L$b)}L$m(L$q,"laya.webgl.utils.RenderSprite3D",L$s);var L$b=L$q.prototype;return L$b.onCreate=function(L$a){switch(L$a){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},L$b._mask=function(L$a,L$b,L$c,L$d){var L$e,L$f,L$g=this._next,L$h=L$a.mask;if(L$h){L$b.ctx.save();var L$i=L$b.ctx.globalCompositeOperation,L$j=new L$D;if(L$j.copyFrom(L$h.getBounds()),L$j.width=Math.round(L$j.width),L$j.height=Math.round(L$j.height),L$j.x=Math.round(L$j.x),L$j.y=Math.round(L$j.y),0<L$j.width&&0<L$j.height){var L$k=L$a._style._tf,L$l=L$ha.create();L$l.addValue("bounds",L$j),L$e=L$ga.create([L$l,L$b],laya.webgl.utils.RenderSprite3D.tmpTarget),L$b.addRenderObject(L$e),L$h.render(L$b,-L$j.x,-L$j.y),L$e=L$ga.create([L$l],laya.webgl.utils.RenderSprite3D.endTmpTarget),L$b.addRenderObject(L$e),L$b.ctx.save(),L$b.clipRect(L$c-L$k.translateX+L$j.x,L$d-L$k.translateY+L$j.y,L$j.width,L$j.height),L$g._fun.call(L$g,L$a,L$b,L$c,L$d),L$b.ctx.restore(),L$f=L$ka.create(6),L$i=L$b.ctx.globalCompositeOperation,L$f.blendMode="mask",L$b.addRenderObject(L$f),L$B.TEMP.identity();var L$m=L$Aa.create(1,0),L$n=L$K.INV_UV,L$o=L$j.width,L$p=L$j.height;(L$j.width<32||L$j.height<32)&&((L$n=L$q.tempUV)[0]=0,L$n[1]=0,L$n[2]=32<=L$j.width?1:L$j.width/32,L$n[3]=0,L$n[4]=32<=L$j.width?1:L$j.width/32,L$n[5]=32<=L$j.height?1:L$j.height/32,L$n[6]=0,L$n[7]=32<=L$j.height?1:L$j.height/32,L$j.width=32<=L$j.width?L$j.width:32,L$j.height=32<=L$j.height?L$j.height:32,L$n[1]*=-1,L$n[3]*=-1,L$n[5]*=-1,L$n[7]*=-1,L$n[1]+=1,L$n[3]+=1,L$n[5]+=1,L$n[7]+=1),L$b.ctx.drawTarget(L$l,L$c+L$j.x-L$k.translateX,L$d+L$j.y-L$k.translateY,L$o,L$p,L$B.TEMP,"tmpTarget",L$m,L$n,6),L$e=L$ga.create([L$l],laya.webgl.utils.RenderSprite3D.recycleTarget),L$b.addRenderObject(L$e),(L$f=L$ka.create(6)).blendMode=L$i,L$b.addRenderObject(L$f)}L$b.ctx.restore()}else L$g._fun.call(L$g,L$a,L$b,L$c,L$d)},L$b._blend=function(L$a,L$b,L$c,L$d){var L$e=L$a._style,L$f=this._next;L$e.blendMode?(L$b.ctx.save(),L$b.ctx.globalCompositeOperation=L$e.blendMode,L$f._fun.call(L$f,L$a,L$b,L$c,L$d),L$b.ctx.restore()):L$f._fun.call(L$f,L$a,L$b,L$c,L$d)},L$b._transform=function(L$a,L$b,L$c,L$d){var L$e=L$a.transform,L$f=this._next;if(L$e&&L$f!=L$s.NORENDER){var L$g=L$b.ctx;L$a._style;L$e.tx=L$c,L$e.ty=L$d;var L$h=L$g._getTransformMatrix(),L$i=L$h.clone();L$B.mul(L$e,L$h,L$h),L$h._checkTransform(),L$e.tx=L$e.ty=0,L$f._fun.call(L$f,L$a,L$b,0,0),L$i.copyTo(L$h),L$i.destroy()}else L$f._fun.call(L$f,L$a,L$b,L$c,L$d)},L$q.tmpTarget=function(L$a,L$b){var L$c=L$a.getValue("bounds"),L$d=L$Ma.create(L$c.width,L$c.height);L$d.start(),L$d.clear(0,0,0,0),L$a.addValue("tmpTarget",L$d)},L$q.endTmpTarget=function(L$a){L$a.getValue("tmpTarget").end()},L$q.recycleTarget=function(L$a){L$a.getValue("tmpTarget").recycle(),L$a.recycle()},L$g(L$q,["tempUV",function(){return this.tempUV=new Array(8)}]),L$q}(),L$Ca=function(L$a){function L$b(){this.data=null,L$b.__super.call(this)}L$m(L$b,"laya.filters.webgl.ColorFilterActionGL",L$N);var L$c=L$b.prototype;return L$y.imps(L$c,{"laya.filters.IFilterActionGL":!0}),L$c.setValue=function(L$a){L$a.colorMat=this.data._mat,L$a.colorAlpha=this.data._alpha},L$c.apply3d=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$a.getValue("bounds"),L$g=L$Aa.create(1,0);L$g.setFilters([this.data]);var L$h=L$B.TEMP;L$h.identity(),L$c.ctx.drawTarget(L$a,0,0,L$f.width,L$f.height,L$h,"src",L$g)},L$b}(),L$Da=function(L$a){function L$f(L$a,L$b,L$c,L$d,L$e){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,L$f.__super.call(this,L$a,L$b,L$e),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey={},this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new L$Ta,this._atlasCanvas.uri="Atlaser.AtlasWebGLCanvas._atlasCanvas",(this._atlasCanvas._atlaser=this)._atlasCanvas.width=L$c,this._atlasCanvas.height=L$d,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}L$m(L$f,"laya.webgl.atlas.Atlaser",L$P);var L$b=L$f.prototype;return L$b.computeUVinAtlasTexture=function(L$a,L$b,L$c,L$d){var L$e=L$Q.atlasTextureWidth,L$f=L$Q.atlasTextureHeight,L$g=L$c/L$e,L$h=L$d/L$f,L$i=(L$c+L$a.bitmap.width)/L$e,L$j=(L$d+L$a.bitmap.height)/L$f,L$k=L$a.bitmap.width/L$e,L$l=L$a.bitmap.height/L$f;L$a.uv=[L$g+L$b[0]*L$k,L$h+L$b[1]*L$l,L$i-(1-L$b[2])*L$k,L$h+L$b[3]*L$l,L$i-(1-L$b[4])*L$k,L$j-(1-L$b[5])*L$l,L$g+L$b[6]*L$k,L$j-(1-L$b[7])*L$l]},L$b.findBitmapIsExist=function(L$a){if(L$a instanceof laya.webgl.resource.WebGLImage){var L$b=L$a,L$c=L$b.url,L$d=this._InAtlasWebGLImagesKey[L$c||L$b.id];if(L$d)return L$d.offsetInfoID}return-1},L$b.addToAtlasTexture=function(L$a,L$b,L$c){if(L$a instanceof laya.webgl.resource.WebGLImage){var L$d=L$a,L$e=L$d.url;this._InAtlasWebGLImagesKey[L$e||L$d.id]={bitmap:L$a,offsetInfoID:this._InAtlasWebGLImagesOffsetValue.length},this._InAtlasWebGLImagesOffsetValue.push([L$b,L$c])}this._atlasCanvas.texSubImage2D(L$b,L$c,L$a.atlasSource),L$a.clearAtlasSource()},L$b.addToAtlas=function(L$a,L$b,L$c){L$a._atlasID=this._inAtlasTextureKey.length;var L$d=L$a.uv.slice(),L$e=L$a.bitmap;this._inAtlasTextureKey.push(L$a),this._inAtlasTextureOriUVValue.push(L$d),this._inAtlasTextureBitmapValue.push(L$e),this.computeUVinAtlasTexture(L$a,L$d,L$b,L$c),L$a.bitmap=this._atlasCanvas},L$b.clear=function(){for(var L$a=0,L$b=this._inAtlasTextureKey.length;L$a<L$b;L$a++)this._inAtlasTextureKey[L$a].bitmap=this._inAtlasTextureBitmapValue[L$a],this._inAtlasTextureKey[L$a].uv=this._inAtlasTextureOriUVValue[L$a],this._inAtlasTextureKey[L$a]._atlasID=-1,this._inAtlasTextureKey[L$a].bitmap.lock=!1,this._inAtlasTextureKey[L$a].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue.length=0},L$b.dispose=function(){this.clear(),this._atlasCanvas.destroy()},L$d(0,L$b,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),L$d(0,L$b,"texture",function(){return this._atlasCanvas}),L$d(0,L$b,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),L$f}(),L$Ea=function(L$a){function L$c(){L$c.__super.call(this,L$c.__name2int,L$c.__int2name,L$c.__int2nameMap)}return L$m(L$c,"laya.webgl.shader.d2.ShaderDefines2D",L$x),L$c.__init__=function(){L$c.reg("TEXTURE2D",1),L$c.reg("COLOR2D",2),L$c.reg("PRIMITIVE",4),L$c.reg("GLOW_FILTER",8),L$c.reg("BLUR_FILTER",16),L$c.reg("COLOR_FILTER",32),L$c.reg("COLOR_ADD",64),L$c.reg("WORLDMAT",128),L$c.reg("FILLTEXTURE",256),L$c.reg("FSHIGHPRECISION",1024),L$c.reg("TXTALPHA",2048),L$c.reg("TXTCOMPRESS",4096)},L$c.reg=function(L$a,L$b){L$x._reg(L$a,L$b,L$c.__name2int,L$c.__int2name)},L$c.toText=function(L$a,L$b,L$c){return L$x._toText(L$a,L$b,L$c)},L$c.toInt=function(L$a){return L$x._toInt(L$a,L$c.__name2int)},L$c.TEXTURE2D=1,L$c.COLOR2D=2,L$c.PRIMITIVE=4,L$c.FILTERGLOW=8,L$c.FILTERBLUR=16,L$c.FILTERCOLOR=32,L$c.COLORADD=64,L$c.WORLDMAT=128,L$c.FILLTEXTURE=256,L$c.SKINMESH=512,L$c.SHADERDEFINE_FSHIGHPRECISION=1024,L$c.TXTALPHA=2048,L$c.TXTCOMPRESS=4096,L$c.__name2int={},L$c.__int2name=[],L$c.__int2nameMap=[],L$c}(),L$Fa=(function(L$a){function L$h(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$h.__super.call(this,L$a,L$b,L$c,L$d,40,L$e,L$f,L$g)}L$m(L$h,"laya.webgl.shapes.Ellipse",L$ca)}(),function(L$a){function L$f(L$a,L$b,L$c,L$d,L$e){this._points=[],this.rebuild(L$c),L$f.__super.call(this,L$a,L$b,0,0,0,L$e,L$d,L$e,0)}L$m(L$f,"laya.webgl.shapes.Line",L$ca);var L$b=L$f.prototype;return L$b.rebuild=function(L$a){var L$b=L$a.length;L$b!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(L$b/2-1)),this.mFloat32Array=new Float32Array(5*L$b)),this._points.length=0;for(var L$c=NaN,L$d=NaN,L$e=-1,L$f=-1,L$g=L$a.length/2,L$h=0;L$h<L$g;L$h++)L$c=L$a[2*L$h],L$d=L$a[2*L$h+1],(.01<Math.abs(L$e-L$c)||.01<Math.abs(L$f-L$d))&&this._points.push(L$c,L$d),L$e=L$c,L$f=L$d},L$b.getData=function(L$a,L$b,L$c){var L$d=[],L$e=[];0<this.borderWidth&&this.createLine2(this._points,L$d,this.borderWidth,L$c,L$e,this._points.length/2),this.mUint16Array.set(L$d,0),this.mFloat32Array.set(L$e,0),L$a.append(this.mUint16Array),L$b.append(this.mFloat32Array)},L$f}()),L$Ga=function(L$a){function L$l(L$a,L$b,L$c,L$d,L$e){this._points=[];for(var L$f=NaN,L$g=NaN,L$h=-1,L$i=-1,L$j=L$c.length/2-1,L$k=0;L$k<L$j;L$k++)L$f=L$c[2*L$k],L$g=L$c[2*L$k+1],(.01<Math.abs(L$h-L$f)||.01<Math.abs(L$i-L$g))&&this._points.push(L$f,L$g),L$h=L$f,L$i=L$g;L$f=L$c[2*L$j],L$g=L$c[2*L$j+1],L$h=this._points[0],L$i=this._points[1],(.01<Math.abs(L$h-L$f)||.01<Math.abs(L$i-L$g))&&this._points.push(L$f,L$g),L$l.__super.call(this,L$a,L$b,0,0,this._points.length/2,0,L$d,L$e)}L$m(L$l,"laya.webgl.shapes.LoopLine",L$ca);var L$b=L$l.prototype;return L$b.getData=function(L$a,L$b,L$c){if(0<this.borderWidth){for(var L$d=this.color,L$e=(L$d>>16&255)/255,L$f=(L$d>>8&255)/255,L$g=(255&L$d)/255,L$h=[],L$i=0,L$j=0,L$k=[],L$l=Math.floor(this._points.length/2),L$m=0;L$m<L$l;L$m++)L$i=this._points[2*L$m],L$j=this._points[2*L$m+1],L$h.push(this.x+L$i,this.y+L$j,L$e,L$f,L$g);this.createLoopLine(L$h,L$k,this.borderWidth,L$c+L$h.length/5),L$a.append(new Uint16Array(L$k)),L$b.append(new Float32Array(L$h))}},L$b.createLoopLine=function(L$a,L$b,L$c,L$d,L$e,L$f){L$a.length;var L$g=L$a.concat(),L$h=L$e||L$a,L$i=this.borderColor,L$j=(L$i>>16&255)/255,L$k=(L$i>>8&255)/255,L$l=(255&L$i)/255,L$m=[L$g[0],L$g[1]],L$n=[L$g[L$g.length-5],L$g[L$g.length-4]],L$o=L$n[0]+.5*(L$m[0]-L$n[0]),L$p=L$n[1]+.5*(L$m[1]-L$n[1]);L$g.unshift(L$o,L$p,0,0,0),L$g.push(L$o,L$p,0,0,0);var L$q,L$r,L$s,L$t,L$u,L$v,L$y,L$z,L$A,L$B,L$C,L$D,L$E,L$F,L$G,L$H,L$I,L$J,L$K,L$L,L$M=L$g.length/5,L$N=L$d,L$O=L$c/2;L$s=L$g[0],L$t=L$g[1],L$B=L$s-(L$u=L$g[5]),L$A=(L$A=-(L$t-(L$v=L$g[6])))/(L$L=Math.sqrt(L$A*L$A+L$B*L$B))*L$O,L$B=L$B/L$L*L$O,L$h.push(L$s-L$A,L$t-L$B,L$j,L$k,L$l,L$s+L$A,L$t+L$B,L$j,L$k,L$l);for(var L$P=1;L$P<L$M-1;L$P++)L$s=L$g[5*(L$P-1)],L$t=L$g[5*(L$P-1)+1],L$u=L$g[5*L$P],L$v=L$g[5*L$P+1],L$y=L$g[5*(L$P+1)],L$z=L$g[5*(L$P+1)+1],L$B=L$s-L$u,L$D=L$u-L$y,L$G=(-(L$A=(L$A=-(L$t-L$v))/(L$L=Math.sqrt(L$A*L$A+L$B*L$B))*L$O)+L$s)*(-(L$B=L$B/L$L*L$O)+L$v)-(-L$A+L$u)*(-L$B+L$t),L$J=(-(L$C=(L$C=-(L$v-L$z))/(L$L=Math.sqrt(L$C*L$C+L$D*L$D))*L$O)+L$y)*(-(L$D=L$D/L$L*L$O)+L$v)-(-L$C+L$u)*(-L$D+L$z),L$K=(L$E=-L$B+L$t-(-L$B+L$v))*(L$I=-L$C+L$u-(-L$C+L$y))-(L$H=-L$D+L$z-(-L$D+L$v))*(L$F=-L$A+L$u-(-L$A+L$s)),Math.abs(L$K)<.1?(L$K+=10.1,L$h.push(L$u-L$A,L$v-L$B,L$j,L$k,L$l,L$u+L$A,L$v+L$B,L$j,L$k,L$l)):(((L$q=(L$F*L$J-L$I*L$G)/L$K)-L$u)*(L$q-L$u)+((L$r=(L$H*L$G-L$E*L$J)/L$K)-L$v)+(L$r-L$v),L$h.push(L$q,L$r,L$j,L$k,L$l,L$u-(L$q-L$u),L$v-(L$r-L$v),L$j,L$k,L$l));L$f&&(L$b=L$f);var L$Q=this.edges+1;for(L$P=1;L$P<L$Q;L$P++)L$b.push(L$N+2*(L$P-1),L$N+2*(L$P-1)+1,L$N+2*L$P+1,L$N+2*L$P+1,L$N+2*L$P,L$N+2*(L$P-1));return L$b.push(L$N+2*(L$P-1),L$N+2*(L$P-1)+1,L$N+1,L$N+1,L$N,L$N+2*(L$P-1)),L$h},L$l}(),L$Ha=function(L$a){function L$g(L$a,L$b,L$c,L$d,L$e,L$f){this._points=null,this._start=-1,this._repaint=!1,this.earcutTriangles=null,this._mat=L$B.create(),this._points=L$c.slice(0,L$c.length),L$g.__super.call(this,L$a,L$b,0,0,this._points.length/2,L$d,L$e,L$f)}L$m(L$g,"laya.webgl.shapes.Polygon",L$ca);var L$b=L$g.prototype;return L$b.rebuild=function(L$a){this._repaint||(this._points.length=0,this._points=this._points.concat(L$a))},L$b.setMatrix=function(L$a){L$a.copyTo(this._mat)},L$b.needUpdate=function(L$a){return this._repaint=this._mat.a==L$a.a&&this._mat.b==L$a.b&&this._mat.c==L$a.c&&this._mat.d==L$a.d&&this._mat.tx==L$a.tx&&this._mat.ty==L$a.ty,!this._repaint},L$b.getData=function(L$a,L$b,L$c){var L$d,L$e=0,L$f=this._points,L$g=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=L$c){for(this._start=L$c,L$d=[],L$g=this.earcutTriangles.length,L$e=0;L$e<L$g;L$e++)L$d.push(this.earcutTriangles[L$e]+L$c);this.mUint16Array=new Uint16Array(L$d)}}else{this._start=L$c,L$d=[];var L$h=[],L$i=[],L$j=this.color,L$k=(L$j>>16&255)/255,L$l=(L$j>>8&255)/255,L$m=(255&L$j)/255;for(L$g=Math.floor(L$f.length/2),L$e=0;L$e<L$g;L$e++)L$h.push(this.x+L$f[2*L$e],this.y+L$f[2*L$e+1],L$k,L$l,L$m),L$i.push(this.x+L$f[2*L$e],this.y+L$f[2*L$e+1]);for(this.earcutTriangles=L$da.earcut(L$i,null,2),L$g=this.earcutTriangles.length,L$e=0;L$e<L$g;L$e++)L$d.push(this.earcutTriangles[L$e]+L$c);this.mUint16Array=new Uint16Array(L$d),this.mFloat32Array=new Float32Array(L$h)}L$a.append(this.mUint16Array),L$b.append(this.mFloat32Array)},L$g}(),L$Ia=function(L$a){function L$f(){this._matrix=new L$B,this._matrix4=L$pa.defaultMatrix4.concat(),L$f.__super.call(this,1e4),this.shaderValue=new L$Aa(0,0)}L$m(L$f,"laya.webgl.submit.SubmitCanvas",L$fa);var L$b=L$f.prototype;return L$b.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var L$a=L$sa.worldAlpha,L$b=L$sa.worldMatrix4,L$c=L$sa.worldMatrix,L$d=L$sa.worldFilters,L$e=L$sa.worldShaderDefines,L$f=this.shaderValue,L$g=this._matrix,L$h=this._matrix4,L$i=L$B.TEMP;return L$B.mul(L$g,L$c,L$i),L$h[0]=L$i.a,L$h[1]=L$i.b,L$h[4]=L$i.c,L$h[5]=L$i.d,L$h[12]=L$i.tx,L$h[13]=L$i.ty,L$sa.worldMatrix=L$i.clone(),L$sa.worldMatrix4=L$h,L$sa.worldAlpha=L$sa.worldAlpha*L$f.alpha,L$f.filters&&L$f.filters.length&&(L$sa.worldFilters=L$f.filters,L$sa.worldShaderDefines=L$f.defines),this._ctx_src.flush(),L$sa.worldAlpha=L$a,L$sa.worldMatrix4=L$b,L$sa.worldMatrix.destroy(),L$sa.worldMatrix=L$c,L$sa.worldFilters=L$d,L$sa.worldShaderDefines=L$e,1},L$b.releaseRender=function(){var L$a=L$f._cache;this._ctx_src=null,L$a[L$a._length++]=this},L$b.getRenderType=function(){return 10003},L$f.create=function(L$a,L$b,L$c){var L$d=L$f._cache._length?L$f._cache[--L$f._cache._length]:new L$f;L$d._ctx_src=L$a;var L$e=L$d.shaderValue;return L$e.alpha=L$b,L$e.defines.setValue(0),L$c&&L$c.length&&L$e.setFilters(L$c),L$d},L$f._cache=((L$f._cache=[])._length=0,L$f._cache),L$f}(),L$Ja=function(L$a){function L$j(L$a){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===L$a&&(L$a=1e4),L$j.__super.call(this,L$a)}L$m(L$j,"laya.webgl.submit.SubmitTexture",L$fa);var L$b=L$j.prototype;return L$b.releaseRender=function(){var L$a=L$j._cache;(L$a[L$a._length++]=this).shaderValue.release(),this.shaderValue=null,this._preIsSameTextureShader=!1,this._blendFn=null,this._vb=null,this._ib=null,this._texs.length=0,this._vbPos.length=0,this._texsID.length=0,this._isSameTexture=!0},L$b.addTexture=function(L$a,L$b){this._texsID[this._texs.length]=L$a._uvID,this._texs.push(L$a),this._vbPos.push(L$b)},L$b.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var L$a=this.shaderValue.textureHost.bitmap;if(null!==L$a)for(var L$b=this._vb.getFloat32Array(),L$c=0,L$d=this._texs.length;L$c<L$d;L$c++){var L$e=this._texs[L$c];L$e.active();var L$f=L$e.uv;if(this._texsID[L$c]!==L$e._uvID){this._texsID[L$c]=L$e._uvID;var L$g=this._vbPos[L$c];L$b[L$g+2]=L$f[0],L$b[L$g+3]=L$f[1],L$b[L$g+6]=L$f[2],L$b[L$g+7]=L$f[3],L$b[L$g+10]=L$f[4],L$b[L$g+11]=L$f[5],L$b[L$g+14]=L$f[6],L$b[L$g+15]=L$f[7],this._vb.setNeedUpload()}L$e.bitmap!==L$a&&(this._isSameTexture=!1)}}},L$b.renderSubmit=function(){if(0===this._numEle)return L$j._shaderSet=!1,1;var L$a=this.shaderValue.textureHost;if(L$a){var L$b=L$a.source;if(!L$a.bitmap||!L$b)return L$j._shaderSet=!1,1;this.shaderValue.texture=L$b,L$a.alphaTexture&&L$a.alphaTexture.source&&(this.shaderValue.texture1=L$a.alphaTexture.source)}this._vb.bind_upload(this._ib);var L$c=L$ua.mainContext;if(L$S.activeBlendFunction!==this._blendFn&&(L$c.enable(3042),this._blendFn(L$c),L$S.activeBlendFunction=this._blendFn),L$G.drawCall++,L$G.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&L$La.activeShader&&L$j._shaderSet?(L$La.activeShader.uploadTexture2D(this.shaderValue.texture),this.shaderValue.texture1&&L$La.activeShader.uploadTexture2D1(this.shaderValue.texture1)):this.shaderValue.upload(),L$j._shaderSet=!0,1<this._texs.length&&!this._isSameTexture)for(var L$d=L$a.bitmap,L$e=0,L$f=L$La.activeShader,L$g=0,L$h=this._texs.length;L$g<L$h;L$g++){var L$i=this._texs[L$g];L$i.bitmap===L$d&&L$g+1!==L$h||(L$f.uploadTexture2D(L$i.source),L$c.drawElements(4,6*(L$g-L$e+1),5123,this._startIdx+6*L$e*L$pa.BYTES_PIDX),L$d=L$i.bitmap,L$e=L$g)}else L$c.drawElements(4,this._numEle,5123,this._startIdx);return 1},L$j.create=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$j._cache._length?L$j._cache[--L$j._cache._length]:new L$j;null==L$c&&((L$c=L$f._selfVb||(L$f._selfVb=L$xa.create(-1))).clear(),L$d=0),L$f._ib=L$b,L$f._vb=L$c,L$f._startIdx=L$d*L$pa.BYTES_PIDX,L$f._numEle=0;var L$g=L$a._nBlendType;L$f._blendFn=L$a._targets?L$S.targetFns[L$g]:L$S.fns[L$g],L$f.shaderValue=L$e,L$f.shaderValue.setValue(L$a._shader2D);var L$h=L$a._shader2D.filters;return L$h&&L$f.shaderValue.setFilters(L$h),L$f},L$j._cache=((L$j._cache=[])._length=0,L$j._cache),L$j._shaderSet=!0,L$j}(),L$Ka=function(L$a){function L$r(){L$r.__super.call(this,laya.webgl.utils.MeshTexture.const_stride,0,0),this.canReuse=!0,this.setAttributes(laya.webgl.utils.MeshTexture._fixattriInfo)}L$m(L$r,"laya.webgl.utils.MeshTexture",L$ra);var L$b=L$r.prototype;return L$b.addData=function(L$a,L$b,L$c,L$d,L$e,L$f){for(var L$g=L$a.length/2,L$h=this._vb.needSize(L$g*L$r.const_stride)>>2,L$i=this._vb.getFloat32Array(),L$j=0,L$k=0;L$k<L$g;L$k++){var L$l=L$a[L$j],L$m=L$a[L$j+1],L$n=L$l*L$d.a+L$m*L$d.c+L$d.tx,L$o=L$l*L$d.b+L$m*L$d.d+L$d.ty;L$i[L$h++]=L$n,L$i[L$h++]=L$o,L$i[L$h++]=L$b[L$j],L$i[L$h++]=L$b[L$j+1],L$j+=2}this._vb.setNeedUpload();var L$p=this.vertNum;if(0<L$p){(L$g=L$c.length)>L$r.tmpIdx.length&&(L$r.tmpIdx=new Uint16Array(L$g));for(var L$q=0;L$q<L$g;L$q++)L$r.tmpIdx[L$q]=L$c[L$q]+L$p;this._ib.appendU16Array(L$r.tmpIdx,L$c.length)}else this._ib.append(L$c);this._ib.setNeedUpload(),this.vertNum+=L$g,this.indexNum+=L$c.length},L$b.releaseMesh=function(){this._vb._byteLength=0,this._ib._byteLength=0,this.vertNum=0,this.indexNum=0,laya.webgl.utils.MeshTexture._POOL.push(this)},L$b.destroy=function(){this._ib.destroy(),this._vb.destroy()},L$r.getAMesh=function(){return laya.webgl.utils.MeshTexture._POOL.length?laya.webgl.utils.MeshTexture._POOL.pop():new L$r},L$r.const_stride=16,L$r._POOL=[],L$g(L$r,["_fixattriInfo",function(){return this._fixattriInfo=[5126,2,0,5126,2,8]},"tmpIdx",function(){return this.tmpIdx=new Uint16Array(4)}]),L$r}(),L$La=function(L$a){function L$b(){L$b.__super.call(this),this.lock=!0}return L$m(L$b,"laya.webgl.shader.BaseShader",L$t),L$b.activeShader=null,L$b.bindShader=null,L$b}(),L$Ma=function(L$b){function L$k(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===L$c&&(L$c=6408),void 0===L$d&&(L$d=5121),void 0===L$e&&(L$e=34041),void 0===L$f&&(L$f=!1),void 0===L$g&&(L$g=!1),void 0===L$h&&(L$h=-1),void 0===L$i&&(L$i=-1),this._type=1,this._w=L$a,this._h=L$b,this._surfaceFormat=L$c,this._surfaceType=L$d,this._depthStencilFormat=L$e,L$r.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipMap=L$f,this._repeat=L$g,this._minFifter=L$h,this._magFifter=L$i,this._createWebGLRenderTarget(),this.bitmap.lock=!0,L$k.__super.call(this,this.bitmap,L$K.INV_UV)}L$m(L$k,"laya.webgl.resource.RenderTarget2D",L$b);var L$a=L$k.prototype;return L$y.imps(L$a,{"laya.resource.IDispose":!0}),L$a.getType=function(){return this._type},L$a.getTexture=function(){return this},L$a.size=function(L$a,L$b){this._w==L$a&&this._h==L$b||(this._w=L$a,this._h=L$b,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget())},L$a.release=function(){this.destroy()},L$a.recycle=function(){L$k.POOL.push(this)},L$a.start=function(){var L$a=L$ua.mainContext;return this._preRenderTarget=L$sa.curRenderTarget,L$sa.curRenderTarget=this,L$a.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(L$a.viewport(0,0,this._w,this._h),this._svWidth=L$sa.width,this._svHeight=L$sa.height,L$sa.width=this._w,L$sa.height=this._h,L$La.activeShader=null),this},L$a.clear=function(L$a,L$b,L$c,L$d){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=1);var L$e=L$ua.mainContext;L$e.clearColor(L$a,L$b,L$c,L$d);var L$f=16384;switch(this._depthStencilFormat){case 33189:L$f|=256;break;case 36168:L$f|=1024;break;case 34041:L$f|=256,L$f|=1024}L$e.clear(L$f)},L$a.end=function(){var L$a=L$ua.mainContext;L$a.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,L$sa.curRenderTarget=this._preRenderTarget,1==this._type?(L$a.viewport(0,0,this._svWidth,this._svHeight),L$sa.width=this._svWidth,L$sa.height=this._svHeight,L$La.activeShader=null):L$a.viewport(0,0,L$y.stage.width,L$y.stage.height)},L$a.getData=function(L$a,L$b,L$c,L$d){var L$e=L$ua.mainContext;if(L$e.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===L$e.checkFramebufferStatus(36160)))return L$e.bindFramebuffer(36160,null),null;var L$f=new Uint8Array(this._w*this._h*4);return L$e.readPixels(L$a,L$b,L$c,L$d,this._surfaceFormat,this._surfaceType,L$f),L$e.bindFramebuffer(36160,null),L$f},L$a.destroy=function(L$a){void 0===L$a&&(L$a=!1),this._destroy||(this._loaded=!1,this.bitmap.offAll(),this.bitmap.disposeResource(),this.bitmap.dispose(),this.offAll(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,L$b.prototype.destroy.call(this))},L$a.dispose=function(){},L$a._createWebGLRenderTarget=function(){this.bitmap=new L$Wa(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(L$a){this.event("recovered")})},L$d(0,L$a,"surfaceFormat",function(){return this._surfaceFormat}),L$d(0,L$a,"magFifter",function(){return this._magFifter}),L$d(0,L$a,"surfaceType",function(){return this._surfaceType}),L$d(0,L$a,"mipMap",function(){return this._mipMap}),L$d(0,L$a,"depthStencilFormat",function(){return this._depthStencilFormat}),L$d(0,L$a,"minFifter",function(){return this._minFifter}),L$d(0,L$a,"source",function(){return this._alreadyResolved?L$y.superGet(L$K,this,"source"):null}),L$k.create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){void 0===L$c&&(L$c=6408),void 0===L$d&&(L$d=5121),void 0===L$e&&(L$e=34041),void 0===L$f&&(L$f=!1),void 0===L$g&&(L$g=!1),void 0===L$h&&(L$h=-1),void 0===L$i&&(L$i=-1);var L$j=L$k.POOL.pop();return L$j||(L$j=new L$k(L$a,L$b)),L$j.bitmap&&L$j._w==L$a&&L$j._h==L$b&&L$j._surfaceFormat==L$c&&L$j._surfaceType==L$d&&L$j._depthStencilFormat==L$e&&L$j._mipMap==L$f&&L$j._repeat==L$g&&L$j._minFifter==L$h&&L$j._magFifter==L$i||(L$j._w=L$a,L$j._h=L$b,L$j._surfaceFormat=L$c,L$j._surfaceType=L$d,L$j._depthStencilFormat=L$e,L$r.isConchWebGL&&34041===L$j._depthStencilFormat&&(L$j._depthStencilFormat=33189),L$j._mipMap=L$f,L$j._repeat=L$g,L$j._minFifter=L$h,L$j._magFifter=L$i,L$j.release(),L$j._createWebGLRenderTarget()),L$j},L$k.TYPE2D=1,L$k.TYPE3D=2,L$k.POOL=[],L$k}(L$K),L$Na=function(L$a){function L$b(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,L$b.__super.call(this),L$b._gl=L$ua.mainContext}L$m(L$b,"laya.webgl.utils.Buffer",L$t);var L$c=L$b.prototype;return L$c._bind=function(){this.activeResource(),L$b._bindActive[this._bufferType]!==this._glBuffer&&(34962===this._bufferType&&(L$b._bindVertexBuffer=this._glBuffer),L$b._gl.bindBuffer(this._bufferType,L$b._bindActive[this._bufferType]=this._glBuffer),L$La.activeShader=null)},L$c.recreateResource=function(){this._glBuffer||(this._glBuffer=L$b._gl.createBuffer()),this.completeCreate()},L$c.disposeResource=function(){this._glBuffer&&(L$ua.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},L$d(0,L$c,"bufferUsage",function(){return this._bufferUsage}),L$b._gl=null,L$b._bindActive={},L$b._bindVertexBuffer=null,L$b._enableAtributes=[],L$b}(),L$Oa=function(L$a){function L$c(L$a){this.texcoord=null,this.offsetX=300,this.offsetY=0,L$c.__super.call(this,512,0);var L$b=8*L$pa.BYTES_PE;this.position=[2,5126,!1,L$b,0],this.texcoord=[2,5126,!1,L$b,2*L$pa.BYTES_PE],this.color=[4,5126,!1,L$b,4*L$pa.BYTES_PE]}return L$m(L$c,"laya.webgl.shader.d2.skinAnishader.SkinSV",L$Aa),L$c}(),L$Pa=function(L$a){function L$b(L$a){L$b.__super.call(this,2,0),this.color=[]}return L$m(L$b,"laya.webgl.shader.d2.value.Color2dSV",L$Aa),L$b.prototype.setValue=function(L$a){L$a.fillStyle&&(this.color=L$a.fillStyle._color._color),L$a.strokeStyle&&(this.color=L$a.strokeStyle._color._color)},L$b}(),L$Qa=function(L$a){function L$b(L$a){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=L$Aa._TEXCOORD,L$b.__super.call(this,256,0)}L$m(L$b,"laya.webgl.shader.d2.value.FillTextureSV",L$Aa);var L$c=L$b.prototype;return L$c.setValue=function(L$a){this.ALPHA=L$a.ALPHA,L$a.filters&&this.setFilters(L$a.filters)},L$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},L$b}(),L$Ra=function(L$a){function L$b(L$a){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=L$Aa._TEXCOORD,void 0===L$a&&(L$a=0),L$b.__super.call(this,1,L$a)}L$m(L$b,"laya.webgl.shader.d2.value.TextureSV",L$Aa);var L$c=L$b.prototype;return L$c.setValue=function(L$a){this.ALPHA=L$a.ALPHA,L$a.filters&&this.setFilters(L$a.filters)},L$c.clear=function(){this.texture=null,this.texture1=null,this.shader=null,this.colorMat=null,this.colorAlpha=null,this.defines.setValue(0)},L$b}(),L$Sa=function(L$a){function L$b(L$a){this.a_color=null,this.u_pos=[0,0],L$b.__super.call(this,4,0),this.position=[2,5126,!1,5*L$pa.BYTES_PE,0],this.a_color=[3,5126,!1,5*L$pa.BYTES_PE,2*L$pa.BYTES_PE]}return L$m(L$b,"laya.webgl.shader.d2.value.PrimitiveSV",L$Aa),L$b}(),L$Ta=function(L$a){function L$b(){this._atlaser=null,this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,L$b.__super.call(this)}L$m(L$b,"laya.webgl.atlas.AtlasWebGLCanvas",L$a);var L$c=L$b.prototype;return L$c.recreateResource=function(){var L$a=L$ua.mainContext,L$b=this._source=L$a.createTexture(),L$c=L$va.curBindTexTarget,L$d=L$va.curBindTexValue;L$va.bindTexture(L$a,3553,L$b),L$a.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),L$a.texParameteri(3553,10241,9729),L$a.texParameteri(3553,10240,9729),L$a.texParameteri(3553,10242,33071),L$a.texParameteri(3553,10243,33071),L$c&&L$d&&L$va.bindTexture(L$a,L$c,L$d),this.memorySize=this._w*this._h*4,this.completeCreate()},L$c.disposeResource=function(){this._source&&(L$ua.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},L$c.texSubImage2D=function(L$a,L$b,L$c){if(L$r.isFlash){this._flashCacheImage||(this._flashCacheImage=L$p.create(""),this._flashCacheImage._image.createCanvas(this._w,this._h));var L$d=L$c.bitmapdata;this._flashCacheImage._image.copyPixels(L$d,0,0,L$d.width,L$d.height,L$a,L$b),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var L$e=L$ua.mainContext,L$f=L$va.curBindTexTarget,L$g=L$va.curBindTexValue;L$va.bindTexture(L$e,3553,this._source),L$e.pixelStorei(37441,!0),0<=L$a-1&&L$e.texSubImage2D(3553,0,L$a-1,L$b,6408,5121,L$c),L$a+1<=this._w&&L$e.texSubImage2D(3553,0,L$a+1,L$b,6408,5121,L$c),0<=L$b-1&&L$e.texSubImage2D(3553,0,L$a,L$b-1,6408,5121,L$c),L$b+1<=this._h&&L$e.texSubImage2D(3553,0,L$a,L$b+1,6408,5121,L$c),L$e.texSubImage2D(3553,0,L$a,L$b,6408,5121,L$c),L$e.pixelStorei(37441,!1),L$f&&L$g&&L$va.bindTexture(L$e,L$f,L$g)}},L$c.texSubImage2DPixel=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$ua.mainContext,L$g=L$va.curBindTexTarget,L$h=L$va.curBindTexValue;L$va.bindTexture(L$f,3553,this._source);var L$i=new Uint8Array(L$e.data);L$f.pixelStorei(37441,!0),L$f.texSubImage2D(3553,0,L$a,L$b,L$c,L$d,6408,5121,L$i),L$f.pixelStorei(37441,!1),L$g&&L$h&&L$va.bindTexture(L$f,L$g,L$h)},L$d(0,L$c,"width",L$a.prototype._$get_width,function(L$a){this._w=L$a}),L$d(0,L$c,"height",L$a.prototype._$get_height,function(L$a){this._h=L$a}),L$b}(L$c),L$Ua=function(L$a){function L$e(){this.flipY=!0,this.alwaysChange=!1,L$e.__super.call(this)}L$m(L$e,"laya.webgl.resource.WebGLCanvas",L$c);var L$b=L$e.prototype;return L$b.getCanvas=function(){return this._canvas},L$b.clear=function(){this._ctx&&this._ctx.clear()},L$b.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null,laya.resource.Resource.prototype.destroy.call(this)},L$b._setContext=function(L$a){this._ctx=L$a},L$b.getContext=function(L$a,L$b){return this._ctx?this._ctx:this._ctx=L$e._createContext(this)},L$b.size=function(L$a,L$b){this._w==L$a&&this._h==L$b||(this._w=L$a,this._h=L$b,this._ctx&&this._ctx.size(L$a,L$b),this._canvas&&(this._canvas.height=L$b,this._canvas.width=L$a))},L$b.activeResource=function(L$a){void 0===L$a&&(L$a=!1),this._source||this.recreateResource()},L$b.recreateResource=function(){this.createWebGlTexture(),this.completeCreate()},L$b.disposeResource=function(){this._source&&!this.iscpuSource&&(L$ua.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},L$b.createWebGlTexture=function(){var L$a=L$ua.mainContext;this._canvas;var L$b=this._source=L$a.createTexture();this.iscpuSource=!1;var L$c=L$va.curBindTexTarget,L$d=L$va.curBindTexValue;L$va.bindTexture(L$a,3553,L$b),L$a.pixelStorei(37440,this.flipY?1:0),L$e.premulAlpha&&L$a.pixelStorei(37441,!0),L$a.texImage2D(3553,0,6408,6408,5121,this._imgData),L$e.premulAlpha&&L$a.pixelStorei(37441,!1),L$a.texParameteri(3553,10240,9729),L$a.texParameteri(3553,10241,9729),L$a.texParameteri(3553,10242,33071),L$a.texParameteri(3553,10243,33071),L$a.pixelStorei(37440,0),this.memorySize=this._w*this._h*4,L$c&&L$d&&L$va.bindTexture(L$a,L$c,L$d)},L$b.reloadCanvasData=function(){var L$a=L$ua.mainContext;if(!this._source)throw"reloadCanvasData error, gl texture not created!";var L$b=L$va.curBindTexTarget,L$c=L$va.curBindTexValue;L$va.bindTexture(L$a,3553,this._source),L$e.premulAlpha&&L$a.pixelStorei(37441,!0),L$a.texImage2D(3553,0,6408,6408,5121,this._imgData),L$e.premulAlpha&&L$a.pixelStorei(37441,!1),L$a.pixelStorei(37440,0),L$b&&L$c&&L$va.bindTexture(L$a,L$b,L$c)},L$b.texSubImage2D=function(L$a,L$b,L$c){var L$d=L$ua.mainContext,L$e=L$va.curBindTexTarget,L$f=L$va.curBindTexValue;L$va.bindTexture(L$d,3553,this._source),L$d.pixelStorei(37441,!0),L$d.texSubImage2D(3553,0,L$b,L$c,6408,5121,L$a._source),L$d.pixelStorei(37441,!1),L$e&&L$f&&L$va.bindTexture(L$d,L$e,L$f)},L$b.toBase64=function(L$a,L$b,L$c){var L$d=null;this._canvas&&(L$d=this._canvas.toDataURL(L$a,L$b)),L$c.call(this,L$d)},L$d(0,L$b,"context",function(){return this._ctx}),L$d(0,L$b,"source",function(){return this.alwaysChange&&this.reloadCanvasData(),this._source}),L$d(0,L$b,"asBitmap",null,function(L$a){this._ctx&&(this._ctx.asBitmap=L$a)}),L$e._createContext=null,L$e.premulAlpha=!1,L$e}(),L$Va=function(L$a){function L$f(L$a,L$b){this.CborderSize=12,L$f.__super.call(this),this.char=L$a,this.isSpace=" "===L$a,this.xs=L$b.scaleX,this.ys=L$b.scaleY,this.font=L$b.font.toString(),this.fontSize=L$b.font.size,this.fillColor=L$b.fillColor,this.borderColor=L$b.borderColor,this.lineWidth=L$b.lineWidth,this.underLine=L$b.underLine;var L$c,L$d=L$r.isConchApp;L$d?((L$c=ConchTextCanvas)._source=ConchTextCanvas,L$c._source.canvas=ConchTextCanvas):L$c=L$n.canvas.source,this.canvas=L$c,this._enableMerageInAtlas=!0,this._ctx=L$d?L$c:this.canvas.getContext("2d",void 0);var L$e=L$L.measureText(this.char,this.font);this.cw=L$e.width*this.xs,this.ch=(L$e.height||this.fontSize)*this.ys,this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new L$K(this)}L$m(L$f,"laya.webgl.resource.WebGLCharImage",L$c);var L$b=L$f.prototype;return L$y.imps(L$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),L$b.active=function(){this.texture.active()},L$b.recreateResource=function(){var L$a=L$r.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),L$a){var L$b=this.fontSize;1==this.xs&&1==this.ys||(L$b=parseInt(L$b*(this.xs>this.ys?this.xs:this.ys)+""));var L$c="normal 100 "+this.font;L$c=L$c.replace(L$f._fontSizeReg,L$b),this.borderColor&&(L$c+=" 1 "+this.borderColor),this._ctx.font=L$c,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else{if(this._ctx.save(),this._ctx.lineJoin="round",this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,L$J.RightToLeft&&(this._ctx.textAlign="end"),this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this.underLine){this._ctx.lineWidth=1,this._ctx.strokeStyle=this.fillColor,this._ctx.beginPath(),this._ctx.moveTo(0,this.fontSize+1);var L$d=this._ctx.measureText(this.char);L$d||(L$d={width:16});var L$e=L$d.width+1;this._ctx.lineTo(L$e,this.fontSize+1),this._ctx.stroke()}this._ctx.restore()}this.borderSize=this.CborderSize,this.completeCreate()},L$b.onresize=function(L$a,L$b){this._w=L$a,this._h=L$b,this._allowMerageInAtlas=!0},L$b.clearAtlasSource=function(){},L$d(0,L$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),L$d(0,L$b,"atlasSource",function(){return this.canvas}),L$d(0,L$b,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(L$a){this._enableMerageInAtlas=L$a}),L$f.createOneChar=function(L$a,L$b){return new L$f(L$a,L$b)},L$f._fontSizeReg=new RegExp("\\d+(?=px)","g"),L$f}(),L$Wa=function(L$a){function L$j(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){void 0===L$c&&(L$c=6408),void 0===L$d&&(L$d=5121),void 0===L$e&&(L$e=34041),void 0===L$f&&(L$f=!1),void 0===L$g&&(L$g=!1),void 0===L$h&&(L$h=-1),void 0===L$i&&(L$i=1),L$j.__super.call(this),this.uri="WebGLRenderTarget_"+this.id,this._w=L$a,this._h=L$b,this._surfaceFormat=L$c,this._surfaceType=L$d,this._depthStencilFormat=L$e,this._mipMap=L$f,this._repeat=L$g,this._minFifter=L$h,this._magFifter=L$i}L$m(L$j,"laya.webgl.resource.WebGLRenderTarget",L$c);var L$b=L$j.prototype;return L$b.recreateResource=function(){var L$a=L$ua.mainContext;this._frameBuffer||(this._frameBuffer=L$a.createFramebuffer()),this._source||(this._source=L$a.createTexture());var L$b=L$va.curBindTexTarget,L$c=L$va.curBindTexValue;L$va.bindTexture(L$a,3553,this._source),L$a.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var L$d=this._minFifter,L$e=this._magFifter,L$f=this._repeat?10497:33071,L$g=L$k.isPOT(this._w,this._h);if(L$g?(this._mipMap?-1!==L$d||(L$d=9987):-1!==L$d||(L$d=9729),-1!==L$e||(L$e=9729),L$a.texParameteri(3553,10241,L$d),L$a.texParameteri(3553,10240,L$e),L$a.texParameteri(3553,10242,L$f),L$a.texParameteri(3553,10243,L$f),this._mipMap&&L$a.generateMipmap(3553)):(-1!==L$d||(L$d=9729),-1!==L$e||(L$e=9729),L$a.texParameteri(3553,10241,L$d),L$a.texParameteri(3553,10240,L$e),L$a.texParameteri(3553,10242,33071),L$a.texParameteri(3553,10243,33071)),L$a.bindFramebuffer(36160,this._frameBuffer),L$a.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=L$a.createRenderbuffer()),L$a.bindRenderbuffer(36161,this._depthStencilBuffer),L$a.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:L$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:L$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:L$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}L$a.bindFramebuffer(36160,null),L$b&&L$c&&L$va.bindTexture(L$a,L$b,L$c),L$a.bindRenderbuffer(36161,null),L$g&&this._mipMap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this.completeCreate()},L$b.disposeResource=function(){this._frameBuffer&&(L$ua.mainContext.deleteTexture(this._source),L$ua.mainContext.deleteFramebuffer(this._frameBuffer),L$ua.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},L$d(0,L$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),L$d(0,L$b,"frameBuffer",function(){return this._frameBuffer}),L$j}(),L$Xa=function(L$a){function L$h(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this.offsetX=0,this.offsetY=0,L$h.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=L$f,this.canvas=L$a,this._ctx=L$a.getContext("2d",void 0),this._w=L$d,this._h=L$e,this.offsetX=L$b,this.offsetY=L$c,this.src=L$g,this._enableMerageInAtlas=!0,L$Q.enabled&&this._w<L$Q.atlasLimitWidth&&this._h<L$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}L$m(L$h,"laya.webgl.resource.WebGLSubImage",L$c);var L$b=L$h.prototype;return L$y.imps(L$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),L$b.size=function(L$a,L$b){this._w=L$a,this._h=L$b,this._ctx&&this._ctx.size(L$a,L$b),this.canvas&&(this.canvas.height=L$b,this.canvas.width=L$a)},L$b.recreateResource=function(){this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),this._allowMerageInAtlas&&this._enableMerageInAtlas?this.memorySize=0:this.createWebGlTexture(),this.completeCreate()},L$b.createWebGlTexture=function(){var L$a=L$ua.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var L$b=this._source=L$a.createTexture(),L$c=L$va.curBindTexTarget,L$d=L$va.curBindTexValue;L$va.bindTexture(L$a,3553,L$b),L$a.pixelStorei(37441,!0),L$a.texImage2D(3553,0,6408,6408,5121,this.canvas),L$a.pixelStorei(37441,!1);var L$e=this.minFifter,L$f=this.magFifter,L$g=this.repeat?10497:33071,L$h=L$k.isPOT(this.width,this.height);L$h?(this.mipmap?-1!==L$e||(L$e=9987):-1!==L$e||(L$e=9729),-1!==L$f||(L$f=9729),L$a.texParameteri(3553,10240,L$f),L$a.texParameteri(3553,10241,L$e),L$a.texParameteri(3553,10242,L$g),L$a.texParameteri(3553,10243,L$g),this.mipmap&&L$a.generateMipmap(3553)):(-1!==L$e||(L$e=9729),-1!==L$f||(L$f=9729),L$a.texParameteri(3553,10241,L$e),L$a.texParameteri(3553,10240,L$f),L$a.texParameteri(3553,10242,33071),L$a.texParameteri(3553,10243,33071)),L$c&&L$d&&L$va.bindTexture(L$a,L$c,L$d),this.canvas=null,L$h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4},L$b.disposeResource=function(){L$Q.enabled&&this._allowMerageInAtlas||!this._source||(L$ua.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},L$b.clearAtlasSource=function(){},L$d(0,L$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),L$d(0,L$b,"atlasSource",function(){return this.canvas}),L$d(0,L$b,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(L$a){this._allowMerageInAtlas=L$a}),L$h}(),L$Ya=function(L$a){function L$j(L$a,L$b,L$c,L$d){if(this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,L$j.__super.call(this),!L$a||!L$b)throw"Shader Error";this._id=++L$j._count,this._vs=L$a,this._ps=L$b,this._nameMap=L$d||{},null!=L$c&&(L$j.sharders[L$c]=this)}L$m(L$j,"laya.webgl.shader.Shader",L$La);var L$b=L$j.prototype;return L$b.recreateResource=function(){this._compile(),this.completeCreate(),this.memorySize=0},L$b.disposeResource=function(){L$ua.mainContext.deleteShader(this._vshader),L$ua.mainContext.deleteShader(this._pshader),L$ua.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},L$b._compile=function(){if(!L$ua.mainContext.isContextLost()&&this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var L$a=[this._vs,this._ps],L$b=L$ua.mainContext;if(this._program=L$b.createProgram(),this._vshader=L$j._createShader(L$b,L$a[0],35633),this._pshader=L$j._createShader(L$b,L$a[1],35632),L$b.attachShader(this._program,this._vshader),L$b.attachShader(this._program,this._pshader),L$b.linkProgram(this._program),!L$r.isConchApp&&!L$b.getProgramParameter(this._program,35714))throw L$b.getProgramInfoLog(this._program);var L$c,L$d,L$e=0,L$f=0;for(L$f=L$r.isConchApp?L$b.getProgramParameterEx(this._vs,this._ps,"",35721):L$b.getProgramParameter(this._program,35721),L$e=0;L$e<L$f;L$e++){var L$g=null;L$c={vartype:"attribute",glfun:null,ivartype:0,attrib:L$g=L$r.isConchApp?L$b.getActiveAttribEx(this._vs,this._ps,"",L$e):L$b.getActiveAttrib(this._program,L$e),location:L$b.getAttribLocation(this._program,L$g.name),name:L$g.name,type:L$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(L$c)}var L$h=0;for(L$h=L$r.isConchApp?L$b.getProgramParameterEx(this._vs,this._ps,"",35718):L$b.getProgramParameter(this._program,35718),L$e=0;L$e<L$h;L$e++){var L$i=null;L$i=L$r.isConchApp?L$b.getActiveUniformEx(this._vs,this._ps,"",L$e):L$b.getActiveUniform(this._program,L$e),0<(L$c={vartype:"uniform",glfun:null,ivartype:1,attrib:L$g,location:L$b.getUniformLocation(this._program,L$i.name),name:L$i.name,type:L$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(L$c.name=L$c.name.substr(0,L$c.name.length-3),L$c.isArray=!0,L$c.location=L$b.getUniformLocation(this._program,L$c.name)),this._params.push(L$c)}for(L$e=0,L$d=this._params.length;L$e<L$d;L$e++)if((L$c=this._params[L$e]).indexOfParams=L$e,L$c.index=1,L$c.value=[L$c.location,null],L$c.codename=L$c.name,L$c.name=this._nameMap[L$c.codename]?this._nameMap[L$c.codename]:L$c.codename,(this._paramsMap[L$c.name]=L$c)._this=this,L$c.uploadedValue=[],"attribute"!==L$c.vartype)switch(L$c.type){case 5124:L$c.fun=L$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:L$c.fun=L$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:L$c.fun=L$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:L$c.fun=L$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:L$c.fun=L$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:L$c.fun=this._uniform_sampler2D;break;case 35680:L$c.fun=this._uniform_samplerCube;break;case 35676:L$c.glfun=L$b.uniformMatrix4fv,L$c.fun=this._uniformMatrix4fv;break;case 35670:L$c.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else L$c.fun=this._attribute}},L$b.getUniform=function(L$a){return this._paramsMap[L$a]},L$b._attribute=function(L$a,L$b){var L$c=L$ua.mainContext,L$d=L$Na._enableAtributes,L$e=L$a.location;return L$d[L$e]||L$c.enableVertexAttribArray(L$e),L$c.vertexAttribPointer(L$e,L$b[0],L$b[1],L$b[2],L$b[3],L$b[4]+this._offset),L$d[L$e]=L$Na._bindVertexBuffer,1},L$b._uniform1f=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b?(L$ua.mainContext.uniform1f(L$a.location,L$c[0]=L$b),1):0},L$b._uniform1fv=function(L$a,L$b){if(L$b.length<4){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$ua.mainContext.uniform1fv(L$a.location,L$b),L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3],1):0}return L$ua.mainContext.uniform1fv(L$a.location,L$b),1},L$b._uniform_vec2=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]?(L$ua.mainContext.uniform2f(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1]),1):0},L$b._uniform_vec2v=function(L$a,L$b){if(L$b.length<2){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$ua.mainContext.uniform2fv(L$a.location,L$b),L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3],1):0}return L$ua.mainContext.uniform2fv(L$a.location,L$b),1},L$b._uniform_vec3=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]?(L$ua.mainContext.uniform3f(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2]),1):0},L$b._uniform_vec3v=function(L$a,L$b){return L$ua.mainContext.uniform3fv(L$a.location,L$b),1},L$b._uniform_vec4=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$ua.mainContext.uniform4f(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3]),1):0},L$b._uniform_vec4v=function(L$a,L$b){return L$ua.mainContext.uniform4fv(L$a.location,L$b),1},L$b._uniformMatrix2fv=function(L$a,L$b){return L$ua.mainContext.uniformMatrix2fv(L$a.location,!1,L$b),1},L$b._uniformMatrix3fv=function(L$a,L$b){return L$ua.mainContext.uniformMatrix3fv(L$a.location,!1,L$b),1},L$b._uniformMatrix4fv=function(L$a,L$b){return L$ua.mainContext.uniformMatrix4fv(L$a.location,!1,L$b),1},L$b._uniform1i=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b?(L$ua.mainContext.uniform1i(L$a.location,L$c[0]=L$b),1):0},L$b._uniform1iv=function(L$a,L$b){return L$ua.mainContext.uniform1iv(L$a.location,L$b),1},L$b._uniform_ivec2=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]?(L$ua.mainContext.uniform2i(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1]),1):0},L$b._uniform_ivec2v=function(L$a,L$b){return L$ua.mainContext.uniform2iv(L$a.location,L$b),1},L$b._uniform_vec3i=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]?(L$ua.mainContext.uniform3i(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2]),1):0},L$b._uniform_vec3vi=function(L$a,L$b){return L$ua.mainContext.uniform3iv(L$a.location,L$b),1},L$b._uniform_vec4i=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$ua.mainContext.uniform4i(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3]),1):0},L$b._uniform_vec4vi=function(L$a,L$b){return L$ua.mainContext.uniform4iv(L$a.location,L$b),1},L$b._uniform_sampler2D=function(L$a,L$b){var L$c=L$ua.mainContext,L$d=L$a.uploadedValue;return null==L$d[0]?(L$d[0]=this._curActTexIndex,L$c.uniform1i(L$a.location,this._curActTexIndex),L$c.activeTexture(L$j._TEXTURES[this._curActTexIndex]),L$va.bindTexture(L$c,3553,L$b),this._curActTexIndex++,1):(L$c.activeTexture(L$j._TEXTURES[L$d[0]]),L$va.bindTexture(L$c,3553,L$b),0)},L$b._uniform_samplerCube=function(L$a,L$b){var L$c=L$ua.mainContext,L$d=L$a.uploadedValue;return null==L$d[0]?(L$d[0]=this._curActTexIndex,L$c.uniform1i(L$a.location,this._curActTexIndex),L$c.activeTexture(L$j._TEXTURES[this._curActTexIndex]),L$va.bindTexture(L$c,34067,L$b),this._curActTexIndex++,1):(L$c.activeTexture(L$j._TEXTURES[L$d[0]]),L$va.bindTexture(L$c,34067,L$b),0)},L$b._noSetValue=function(L$a){console.log("no....:"+L$a.name)},L$b.uploadOne=function(L$a,L$b){this.activeResource(),L$va.UseProgram(this._program);var L$c=this._paramsMap[L$a];L$c.fun.call(this,L$c,L$b)},L$b.uploadTexture2D=function(L$a){L$G.shaderCall++;var L$b=L$ua.mainContext;L$b.activeTexture(33984),L$va.bindTexture(L$b,3553,L$a)},L$b.uploadTexture2D1=function(L$a){L$G.shaderCall++;var L$b=L$ua.mainContext;L$b.activeTexture(33985),L$va.bindTexture(L$b,3553,L$a)},L$b.upload=function(L$a,L$b){L$La.activeShader=L$La.bindShader=this,this._lastUseFrameCount===L$G.loopCount||this.activeResource(),L$va.UseProgram(this._program),this._reCompile?(L$b=this._params,this._reCompile=!1):L$b=L$b||this._params;L$ua.mainContext;for(var L$c,L$d,L$e=L$b.length,L$f=0,L$g=0;L$g<L$e;L$g++)null!==(L$d=L$a[(L$c=L$b[L$g]).name])&&(L$f+=L$c.fun.call(this,L$c,L$d));L$G.shaderCall+=L$f},L$b.uploadArray=function(L$a,L$b,L$c){L$La.activeShader=this,(L$La.bindShader=this).activeResource(),L$va.UseProgram(this._program);this._params;for(var L$d,L$e,L$f=0,L$g=L$b-2;0<=L$g;L$g-=2)(L$e=this._paramsMap[L$a[L$g]])&&null!=(L$d=L$a[L$g+1])&&(L$c&&L$c[L$e.name]&&L$c[L$e.name].bind(),L$f+=L$e.fun.call(this,L$e,L$d));L$G.shaderCall+=L$f},L$b.getParams=function(){return this._params},L$j.getShader=function(L$a){return L$j.sharders[L$a]},L$j.create=function(L$a,L$b,L$c,L$d){return new L$j(L$a,L$b,L$c,L$d)},L$j.withCompile=function(L$a,L$b,L$c,L$d){if(L$c&&L$j.sharders[L$c])return L$j.sharders[L$c];var L$e=L$j._preCompileShader[2e-4*L$a];if(!L$e)throw new Error("withCompile shader err!"+L$a);return L$e.createShader(L$b,L$c,L$d)},L$j.withCompile2D=function(L$a,L$b,L$c,L$d,L$e){if(L$d&&L$j.sharders[L$d])return L$j.sharders[L$d];var L$f=L$j._preCompileShader[2e-4*L$a+L$b];if(!L$f)throw new Error("withCompile shader err!"+L$a+" "+L$b);return L$f.createShader(L$c,L$d,L$e)},L$j.addInclude=function(L$a,L$b){L$ta.addInclude(L$a,L$b)},L$j.preCompile=function(L$a,L$b,L$c,L$d){var L$e=2e-4*L$a;L$j._preCompileShader[L$e]=new L$ta(L$e,L$b,L$c,L$d)},L$j.preCompile2D=function(L$a,L$b,L$c,L$d,L$e){var L$f=2e-4*L$a+L$b;L$j._preCompileShader[L$f]=new L$ta(L$f,L$c,L$d,L$e)},L$j._createShader=function(L$a,L$b,L$c){var L$d=L$a.createShader(L$c);return L$a.shaderSource(L$d,L$b),L$a.compileShader(L$d),L$d},L$j._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],L$j._count=0,L$j._preCompileShader={},L$j.SHADERNAME2ID=2e-4,L$j.sharders=((L$j.sharders=[]).length=32,L$j.sharders),L$g(L$j,["nameKey",function(){return this.nameKey=new L$H}]),L$j}(),L$Za=function(L$a){function L$b(){this._maxsize=0,this._upload=!0,this._uploadSize=0,L$b.__super.call(this),this.lock=!0,this.uri="Buffer2D_"+this.id}L$m(L$b,"laya.webgl.utils.Buffer2D",L$a);var L$c=L$b.prototype;return L$c.needSize=function(L$a){var L$b=this._byteLength;if(L$a){var L$c=this._byteLength+L$a;L$c<=this._buffer.byteLength||this._resizeBuffer(L$c<<1,!0),this._byteLength=L$c}return L$b},L$c._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),L$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,L$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),L$Na._gl.bufferSubData(this._bufferType,0,this._buffer)},L$c._bufferSubData=function(L$a,L$b,L$c){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),this._maxsize=Math.max(this._maxsize,this._byteLength),L$G.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,L$Na._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),L$b||L$c){var L$d=this._buffer.slice(L$b,L$c);L$Na._gl.bufferSubData(this._bufferType,L$a,L$d)}else L$Na._gl.bufferSubData(this._bufferType,L$a,this._buffer)},L$c._checkArrayUse=function(){},L$c._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},L$c._bind_subUpload=function(L$a,L$b,L$c){return void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(L$a,L$b,L$c),!0)},L$c._resizeBuffer=function(L$a,L$b){if(L$a<this._buffer.byteLength)return this;if(this.memorySize=L$a,L$b&&this._buffer&&0<this._buffer.byteLength){var L$c=new ArrayBuffer(L$a);new Uint8Array(L$c).set(new Uint8Array(this._buffer),0),this._buffer=L$c}else this._buffer=new ArrayBuffer(L$a);return this._checkArrayUse(),this._upload=!0,this},L$c.append=function(L$a){this._upload=!0;var L$b,L$c;L$b=L$a.byteLength,L$a instanceof Uint8Array?(this._resizeBuffer(this._byteLength+L$b,!0),L$c=new Uint8Array(this._buffer,this._byteLength)):L$a instanceof Uint16Array?(this._resizeBuffer(this._byteLength+L$b,!0),L$c=new Uint16Array(this._buffer,this._byteLength)):L$a instanceof Float32Array&&(this._resizeBuffer(this._byteLength+L$b,!0),L$c=new Float32Array(this._buffer,this._byteLength)),L$c.set(L$a,0),this._byteLength+=L$b,this._checkArrayUse()},L$c.appendU16Array=function(L$a,L$b){this._resizeBuffer(this._byteLength+2*L$b,!0);for(var L$c=new Uint16Array(this._buffer,this._byteLength,L$b),L$d=0;L$d<L$b;L$d++)L$c[L$d]=L$a[L$d];this._byteLength+=2*L$b,this._checkArrayUse()},L$c.appendEx=function(L$a,L$b){this._upload=!0;var L$c;L$c=L$a.byteLength,this._resizeBuffer(this._byteLength+L$c,!0),new L$b(this._buffer,this._byteLength).set(L$a,0),this._byteLength+=L$c,this._checkArrayUse()},L$c.appendEx2=function(L$a,L$b,L$c,L$d){void 0===L$d&&(L$d=1),this._upload=!0;var L$e,L$f;L$e=L$c*L$d,this._resizeBuffer(this._byteLength+L$e,!0),L$f=new L$b(this._buffer,this._byteLength);var L$g=0;for(L$g=0;L$g<L$c;L$g++)L$f[L$g]=L$a[L$g];this._byteLength+=L$e,this._checkArrayUse()},L$c.getBuffer=function(){return this._buffer},L$c.setNeedUpload=function(){this._upload=!0},L$c.getNeedUpload=function(){return this._upload},L$c.upload=function(){var L$a=this._bind_upload();return L$Na._gl.bindBuffer(this._bufferType,null),L$Na._bindActive[this._bufferType]=null,L$La.activeShader=null,L$a},L$c.subUpload=function(L$a,L$b,L$c){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0);var L$d=this._bind_subUpload();return L$Na._gl.bindBuffer(this._bufferType,null),L$Na._bindActive[this._bufferType]=null,L$La.activeShader=null,L$d},L$c.disposeResource=function(){L$a.prototype.disposeResource.call(this),this._upload=!0,this._uploadSize=0},L$c.clear=function(){this._byteLength=0,this._upload=!0},L$d(0,L$c,"bufferLength",function(){return this._buffer.byteLength}),L$d(0,L$c,"byteLength",null,function(L$a){this._byteLength!==L$a&&(L$a<=this._buffer.byteLength||this._resizeBuffer(2*L$a+256,!0),this._byteLength=L$a)}),L$b.__int__=function(L$a){L$wa.QuadrangleIB=L$wa.create(35044),L$qa.fillIBQuadrangle(L$wa.QuadrangleIB,16)},L$b.FLOAT32=4,L$b.SHORT=2,L$b}(L$Na),L$$a=(function(L$b){function L$c(L$a){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,L$c.__super.call(this,9)}L$m(L$c,"laya.webgl.shader.d2.value.GlowSV",L$b);var L$a=L$c.prototype;L$a.setValue=function(L$a){L$b.prototype.setValue.call(this,L$a)},L$a.clear=function(){L$b.prototype.clear.call(this)}}(L$Ra),function(L$a){function L$b(L$a){L$b.__super.call(this,64),this.defines.add(64)}L$m(L$b,"laya.webgl.shader.d2.value.TextSV",L$a);var L$c=L$b.prototype;return L$c.release=function(){(L$b.pool[L$b._length++]=this).clear()},L$c.clear=function(){L$a.prototype.clear.call(this)},L$b.create=function(){return L$b._length?L$b.pool[--L$b._length]:new L$b(null)},L$b.pool=[],L$b._length=0,L$b}(L$Ra)),L$_a=function(L$a){function L$e(L$a,L$b,L$c,L$d){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,L$e.__super.call(this,L$a,L$b,L$c,L$d)}L$m(L$e,"laya.webgl.shader.d2.Shader2X",L$a);var L$b=L$e.prototype;return L$b.upload2dQuick1=function(L$a){this.upload(L$a,this._params2dQuick1||this._make2dQuick1())},L$b._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var L$a,L$b=this._params,L$c=0,L$d=L$b.length;L$c<L$d;L$c++)L$a=L$b[L$c],(L$r.isFlash||"size"!==L$a.name&&"position"!==L$a.name&&"texcoord"!==L$a.name)&&this._params2dQuick1.push(L$a)}return this._params2dQuick1},L$b.disposeResource=function(){L$a.prototype.disposeResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},L$b.upload2dQuick2=function(L$a){this.upload(L$a,this._params2dQuick2||this._make2dQuick2())},L$b._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var L$a,L$b=this._params,L$c=0,L$d=L$b.length;L$c<L$d;L$c++)L$a=L$b[L$c],(L$r.isFlash||"size"!==L$a.name)&&this._params2dQuick2.push(L$a)}return this._params2dQuick2},L$e.create=function(L$a,L$b,L$c,L$d){return new L$e(L$a,L$b,L$c,L$d)},L$e}(L$Ya),L$wa=function(L$a){function L$b(L$a){this._uint8Array=null,this._uint16Array=null,void 0===L$a&&(L$a=35044),L$b.__super.call(this),this._bufferUsage=L$a,this._bufferType=34963,L$r.isFlash||(this._buffer=new ArrayBuffer(8))}L$m(L$b,"laya.webgl.utils.IndexBuffer2D",L$Za);var L$c=L$b.prototype;return L$c._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},L$c.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},L$c.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},L$c.destory=function(){this._uint16Array=null,this._uint8Array=null,this._buffer=null},L$b.QuadrangleIB=null,L$b.create=function(L$a){return void 0===L$a&&(L$a=35044),new L$b(L$a)},L$b}(),L$xa=function(L$a){function L$c(L$a,L$b){this._floatArray32=null,this._vertexStride=0,L$c.__super.call(this),this._vertexStride=L$a,this._bufferUsage=L$b,this._bufferType=34962,L$r.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}L$m(L$c,"laya.webgl.utils.VertexBuffer2D",L$a);var L$b=L$c.prototype;return L$b.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},L$b.bind=function(L$a){L$a&&L$a._bind(),this._bind()},L$b.insertData=function(L$a,L$b){this.getFloat32Array().set(L$a,L$b),this._upload=!0},L$b.bind_upload=function(L$a){L$a._bind_upload()||L$a._bind(),this._bind_upload()||this._bind()},L$b._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},L$b.disposeResource=function(){L$a.prototype.disposeResource.call(this)},L$b.destory=function(){this._byteLength=0,this._upload=!0,this._buffer=null,this._floatArray32=null},L$d(0,L$b,"vertexStride",function(){return this._vertexStride}),L$c.create=function(L$a,L$b){return void 0===L$b&&(L$b=35048),new L$c(L$a,L$b)},L$c}(L$Za),L$ab=function(L$a){function L$h(L$a,L$b,L$c,L$d,L$e,L$f){if(this._format=0,this._mipmap=!1,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this._image=null,this.minFifter=0,void(this.magFifter=0)===L$c&&(L$c=6408),void 0===L$d&&(L$d=!0),L$h.__super.call(this,L$a,L$b),L$a){if(this._format=L$c,this._mipmap=L$d,this.repeat=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof L$a)this._url=L$a,this._src=L$a,this._image=new L$n.window.Image,L$b&&(L$b.onload&&(this.onload=L$b.onload),L$b.onerror&&(this.onerror=L$b.onerror),L$b.onCreate&&L$b.onCreate(this)),this._image.crossOrigin=L$a&&0==L$a.indexOf("data:")?null:"",L$a&&(this._image.src=L$a);else if(L$a instanceof ArrayBuffer){this._src=L$b,this._url=this._src;var L$g=new L$i(L$a);L$g.readUTFBytes(4),L$g.readUTFBytes(2),L$g.getInt16();L$g.endian="bigEndian",this._w=L$g.getInt16(),this._h=L$g.getInt16();L$g.getInt16(),L$g.getInt16();this._image=new Uint8Array(L$a,L$g.pos),this._format=L$ua.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL,L$Q.enabled&&this._w<L$Q.atlasLimitWidth&&this._h<L$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1}else{if(!(L$a instanceof Uint8Array))return this._src=L$b,this._url=this._src,this._image=L$a.source||L$a,this._$5__enableMerageInAtlas=!1,void this.onresize();this._src=L$b,this._url=this._src,this._w=L$e,this._h=L$f,this._image=L$a,this._format=0===L$c?L$a.byteLength/(L$e*L$f)==4?6408:6407:L$c}this._$5__enableMerageInAtlas=!0}}L$m(L$h,"laya.webgl.resource.WebGLImage",L$p);var L$b=L$h.prototype;return L$y.imps(L$b,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),L$b._init_=function(L$a,L$b){},L$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var L$a=L$ua.mainContext,L$b=this._source=L$a.createTexture(),L$c=L$va.curBindTexTarget,L$d=L$va.curBindTexValue;L$va.bindTexture(L$a,3553,L$b);var L$e=this.minFifter,L$f=this.magFifter,L$g=this.repeat?10497:33071,L$h=L$k.isPOT(this._w,this._h),L$i=!1;switch(L$h?(this.mipmap?-1!==L$e||(L$e=9987):-1!==L$e||(L$e=9729),-1!==L$f||(L$f=9729),L$a.texParameteri(3553,10241,L$e),L$a.texParameteri(3553,10240,L$f),L$a.texParameteri(3553,10242,L$g),L$a.texParameteri(3553,10243,L$g),this.mipmap&&L$a.generateMipmap(3553)):(-1!==L$e||(L$e=9729),-1!==L$f||(L$f=9729),L$a.texParameteri(3553,10241,L$e),L$a.texParameteri(3553,10240,L$f),L$a.texParameteri(3553,10242,33071),L$a.texParameteri(3553,10243,33071)),L$a.pixelStorei(37441,!0),this._format){case 6407:case 6408:this._image instanceof Uint8Array?(6407==this._format&&L$a.pixelStorei(L$a.UNPACK_ALIGNMENT,1),L$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image)):(6407==this._format&&L$a.pixelStorei(L$a.UNPACK_ALIGNMENT,1),L$a.texImage2D(3553,0,this._format,this._format,5121,this._image));break;case 6406:L$i=!0,L$a.texImage2D(3553,0,this._format,this._w,this._h,0,this._format,5121,this._image);break;case 35840:case 35841:case 35842:case 35843:case 33779:case 37815:case 37812:case 37821:case L$ua.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:L$i=!0,L$a.compressedTexImage2D(3553,0,this._format,this._w,this._h,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}L$a.pixelStorei(37441,!1),L$c&&L$d&&L$va.bindTexture(L$a,L$c,L$d),this.uri||(this.uri=this._url),L$i?this.memorySize=this._image.length:L$h&&this.mipmap?this.memorySize=this._w*this._h*4*(1+1/3):this.memorySize=this._w*this._h*4,this._image.onload=null,this._image=null,this._recreateLock=!1},L$b.recreateResource=function(){var L$a=this;if(this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this._allowMerageInAtlas&&this._$5__enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0;var L$b=this;this._image=new L$n.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(L$b._needReleaseAgain)return L$b._needReleaseAgain=!1,L$b._image.onload=null,void(L$b._image=null);L$b._allowMerageInAtlas&&L$b._enableMerageInAtlas?(L$a.memorySize=0,L$a._recreateLock=!1):L$b._createWebGlTexture(),L$b.completeCreate()},this._image.src=this._src}},L$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&L$ua.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0},L$b.onresize=function(){this._w=this._image.width,this._h=this._image.height,L$Q.enabled&&this._w<L$Q.atlasLimitWidth&&this._h<L$Q.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},L$b.clearAtlasSource=function(){this._image=null},L$d(0,L$b,"format",function(){return this._format}),L$d(0,L$b,"enableMerageInAtlas",function(){return this._$5__enableMerageInAtlas},function(L$a){this._$5__enableMerageInAtlas=L$a}),L$d(0,L$b,"mipmap",function(){return this._mipmap}),L$d(0,L$b,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),L$d(0,L$b,"atlasSource",function(){return this._image}),L$d(0,L$b,"onload",null,function(L$a){var L$b=this;this._onload=L$a,this._image&&(this._image.onload=null!=this._onload?function(){L$b.onresize(),L$b._onload()}:null)}),L$d(0,L$b,"onerror",null,function(L$a){var L$b=this;this._onerror=L$a,this._image&&(this._image.onerror=null!=this._onerror?function(){L$b._onerror()}:null)}),L$h}();L$y.__init([L$na,L$P,L$za,L$ta])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(L$a,L$b){"use strict";for(var L$c in Object.defineProperty(L$b,"__esModule",{value:!0}),Laya){var L$d=Laya[L$c];L$d&&L$d.__isclass&&(L$b[L$c]=L$d)}}),function(L$f,L$a,L$d){L$d.un,L$d.uns;var L$e=L$d.static,L$g=L$d.class,L$h=L$d.getset,L$i=(L$d.__newvec,laya.utils.Browser,laya.display.css.CSSStyle),L$o=laya.utils.ClassUtils,L$l=(laya.events.Event,laya.utils.HTMLChar),L$j=laya.net.Loader,L$k=(laya.display.Node,laya.maths.Rectangle),L$m=laya.renders.Render,L$n=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.display.Sprite),L$p=laya.utils.Stat,L$L=laya.display.Text,L$q=laya.resource.Texture,L$r=laya.net.URL,L$s=laya.utils.Utils,L$t=function(){function L$n(){}return L$g(L$n,"laya.html.utils.HTMLParse"),L$n.parse=function(L$a,L$b,L$c){L$b=(L$b="<root>"+(L$b=L$b.replace(/<br>/g,"<br/>"))+"</root>").replace(L$n.spacePattern,L$n.char255);var L$d=L$s.parseXMLFromString(L$b);L$n._parseXML(L$a,L$d.childNodes[0].childNodes,L$c)},L$n._parseXML=function(L$a,L$b,L$c,L$d){var L$e=0,L$f=0;if(L$b.join||L$b.item)for(L$e=0,L$f=L$b.length;L$e<L$f;++L$e)L$n._parseXML(L$a,L$b[L$e],L$c,L$d);else{var L$g,L$h,L$i;if(3==L$b.nodeType)return void(L$a instanceof laya.html.dom.HTMLDivElement?(null==L$b.nodeName&&(L$b.nodeName="#text"),L$h=L$b.nodeName.toLowerCase(),0<(L$i=L$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(L$g=L$o.getInstance(L$h))&&(L$a.addChild(L$g),L$g.innerTEXT=L$i.replace(L$n.char255AndOneSpacePattern," "))):0<(L$i=L$b.textContent.replace(/^\s+|\s+$/g,"")).length&&(L$a.innerTEXT=L$i.replace(L$n.char255AndOneSpacePattern," ")));if("#comment"==(L$h=L$b.nodeName.toLowerCase()))return;if(L$g=L$o.getInstance(L$h)){(L$g=L$a.addChild(L$g)).URI=L$c,L$g.href=L$d;var L$j=L$b.attributes;if(L$j&&0<L$j.length)for(L$e=0,L$f=L$j.length;L$e<L$f;++L$e){var L$k=L$j[L$e],L$l=L$k.nodeName,L$m=L$k.value;L$g._setAttributes(L$l,L$m)}L$n._parseXML(L$g,L$b.childNodes,L$c,L$g.href)}else L$n._parseXML(L$a,L$b.childNodes,L$c,L$d)}},L$n.char255=String.fromCharCode(255),L$n.spacePattern=/&nbsp;|&#160;/g,L$n.char255AndOneSpacePattern=new RegExp(String.fromCharCode(255)+"|(\\s+)","g"),L$n}(),L$u=function(){function L$K(){}return L$g(L$K,"laya.html.utils.Layout"),L$K.later=function(L$a){null==L$K._will&&(L$K._will=[],L$d.stage.frameLoop(1,null,function(){if(!(L$K._will.length<1)){for(var L$a=0;L$a<L$K._will.length;L$a++)laya.html.utils.Layout.layout(L$K._will[L$a]);L$K._will.length=0}})),L$K._will.push(L$a)},L$K.layout=function(L$a){if(!L$a||!L$a._style)return null;if(0==(512&L$a._style._type))return null;L$a.getStyle()._type&=-513;var L$b=L$K._multiLineLayout(L$a);return L$m.isConchApp&&L$a.layaoutCallNative&&L$a.layaoutCallNative(),L$b},L$K._multiLineLayout=function(L$a){if(L$L.RightToLeft)return L$K._multiLineLayout2(L$a);var L$b=new Array;L$a._addChildsToLayout(L$b);var L$c,L$d,L$e,L$f,L$g,L$h=0,L$i=L$b.length,L$j=L$a._getCSSStyle(),L$k=L$j.letterSpacing,L$l=L$j.leading,L$m=L$j.lineHeight,L$n=L$j._widthAuto()||!L$j.wordWrap,L$o=L$n?999999:L$a.width,L$p=(L$a.height,0),L$q=L$j.italic?L$j.fontSize/3:0,L$r=L$j._getAlign(),L$s=L$j._getValign(),L$t=0!==L$s||0!==L$r||0!=L$m,L$u=0,L$v=0,L$y=0,L$z=0,L$A=new Array,L$B=L$A[0]=new L$M,L$C=!1,L$D=!1;L$B.h=0,L$j.italic&&(L$o-=L$j.fontSize/3);var L$E=0,L$F=!0;function L$G(){L$B.y=L$v,L$v+=L$B.h+L$l,0==L$B.h&&(L$v+=L$m),L$B.mWidth=L$E,L$E=0,L$B=new L$M,L$A.push(L$B),L$B.h=0,L$C=!(L$F=!(L$u=0))}for(L$h=0;L$h<L$i;L$h++)if(null!=(L$c=L$b[L$h]))if(L$F=!1,L$c instanceof laya.html.dom.HTMLBrElement)L$G(),L$B.y=L$v;else{if(L$c._isChar()){if((L$f=L$c).isWord)L$C=L$D||"\n"===L$f.char,L$B.wordStartIndex=L$B.elements.length;else{if(L$y=L$f.width+L$f.style.letterSpacin,0<L$A.length&&L$o<L$u+L$y&&0<L$B.wordStartIndex){var L$H;L$H=L$B.elements.length-L$B.wordStartIndex+1,L$B.elements.length=L$B.wordStartIndex,L$h-=L$H,L$G();continue}L$C=!1,L$E+=L$f.width}L$y=L$f.width+L$k,L$z=L$f.height,L$D=!1,(L$C=L$C||L$o<L$u+L$y)&&L$G(),L$B.minTextHeight=Math.min(L$B.minTextHeight,L$c.height)}else L$d=L$c._getCSSStyle(),L$g=L$c,L$e=L$d.padding,0===L$d._getCssFloat()||(L$t=!0),L$C=L$D||L$d.lineElement,L$y=L$g.width*L$g._style._tf.scaleX+L$e[1]+L$e[3]+L$k,L$z=L$g.height*L$g._style._tf.scaleY+L$e[0]+L$e[2],L$D=L$d.lineElement,(L$C=L$C||L$o<L$u+L$y&&L$d.wordWrap)&&L$G();L$B.elements.push(L$c),L$B.h=Math.max(L$B.h,L$z),L$c.x=L$u,L$c.y=L$v,L$u+=L$y,L$B.w=L$u-L$k,L$B.y=L$v,L$p=Math.max(L$u+L$q,L$p)}else L$F||(L$u+=L$K.DIV_ELEMENT_PADDING),L$B.wordStartIndex=L$B.elements.length;if(L$v=L$B.y+L$B.h,L$t){var L$I=0,L$J=L$o;for(L$n&&0<L$a.width&&(L$J=L$a.width),L$h=0,L$i=L$A.length;L$h<L$i;L$h++)L$A[L$h].updatePos(0,L$J,L$h,L$I,L$r,L$s,L$m),L$I+=Math.max(L$m,L$A[L$h].h+L$l);L$v=L$I}return L$n&&(L$a.width=L$p),L$v>L$a.height&&(L$a.height=L$v),[L$p,L$v]},L$K._multiLineLayout2=function(L$a){var L$b=new Array;L$a._addChildsToLayout(L$b);var L$c,L$d,L$e,L$f,L$g,L$h=0,L$i=L$b.length,L$j=L$a._getCSSStyle(),L$k=L$j.letterSpacing,L$l=L$j.leading,L$m=L$j.lineHeight,L$n=L$j._widthAuto()||!L$j.wordWrap,L$o=L$n?999999:L$a.width,L$p=(L$a.height,0),L$q=L$j.italic?L$j.fontSize/3:0,L$r=2-L$j._getAlign(),L$s=L$j._getValign(),L$t=0!==L$s||0!=L$r||0!=L$m,L$u=0,L$v=0,L$y=0,L$z=0,L$A=new Array,L$B=L$A[0]=new L$M,L$C=!1,L$D=!1;L$B.h=0,L$j.italic&&(L$o-=L$j.fontSize/3);var L$E=0,L$F=!0;function L$G(){L$B.y=L$v,L$v+=L$B.h+L$l,0==L$B.h&&(L$v+=L$m),L$B.mWidth=L$E,L$E=0,L$B=new L$M,L$A.push(L$B),L$B.h=0,L$C=!(L$F=!(L$u=0))}for(L$h=0;L$h<L$i;L$h++)if(null!=(L$c=L$b[L$h]))if(L$F=!1,L$c instanceof laya.html.dom.HTMLBrElement)L$G(),L$B.y=L$v;else{if(L$c._isChar()){if((L$f=L$c).isWord)L$C=L$D||"\n"===L$f.char,L$B.wordStartIndex=L$B.elements.length;else{if(0<L$A.length&&L$o<L$u+L$y&&0<L$B.wordStartIndex){var L$H;L$H=L$B.elements.length-L$B.wordStartIndex+1,L$B.elements.length=L$B.wordStartIndex,L$h-=L$H,L$G();continue}L$C=!1,L$E+=L$f.width}L$y=L$f.width+L$k,L$z=L$f.height,L$D=!1,(L$C=L$C||L$o<L$u+L$y)&&L$G(),L$B.minTextHeight=Math.min(L$B.minTextHeight,L$c.height)}else L$d=L$c._getCSSStyle(),L$g=L$c,L$e=L$d.padding,0===L$d._getCssFloat()||(L$t=!0),L$C=L$D||L$d.lineElement,L$y=L$g.width*L$g._style._tf.scaleX+L$e[1]+L$e[3]+L$k,L$z=L$g.height*L$g._style._tf.scaleY+L$e[0]+L$e[2],L$D=L$d.lineElement,(L$C=L$C||L$o<L$u+L$y&&L$d.wordWrap)&&L$G();L$B.elements.push(L$c),L$B.h=Math.max(L$B.h,L$z),L$c.x=L$u,L$c.y=L$v,L$u+=L$y,L$B.w=L$u-L$k,L$B.y=L$v,L$p=Math.max(L$u+L$q,L$p)}else L$F||(L$u+=L$K.DIV_ELEMENT_PADDING),L$B.wordStartIndex=L$B.elements.length;if(L$v=L$B.y+L$B.h,L$t){var L$I=0,L$J=L$o;for(L$h=0,L$i=L$A.length;L$h<L$i;L$h++)L$A[L$h].updatePos(0,L$J,L$h,L$I,L$r,L$s,L$m),L$I+=Math.max(L$m,L$A[L$h].h+L$l);L$v=L$I}for(L$n&&(L$a.width=L$p),L$v>L$a.height&&(L$a.height=L$v),L$h=0,L$i=L$A.length;L$h<L$i;L$h++)L$A[L$h].revertOrder(L$o);return[L$p,L$v]},L$K._will=null,L$K.DIV_ELEMENT_PADDING=0,L$K}(),L$M=function(){function L$a(){this.x=0,this.y=0,this.w=0,this.h=0,this.wordStartIndex=0,this.minTextHeight=99999,this.mWidth=0,this.elements=new Array}L$g(L$a,"laya.html.utils.LayoutLine");var L$b=L$a.prototype;return L$b.updatePos=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){var L$h,L$i=0;0<this.elements.length&&(L$i=(L$h=this.elements[this.elements.length-1]).x+L$h.width-this.elements[0].x);var L$j=0,L$k=NaN;1===L$e&&(L$j=(L$b-L$i)/2),2===L$e&&(L$j=L$b-L$i),0===L$g||0!=L$f||(L$f=1);for(var L$l=0,L$m=this.elements.length;L$l<L$m;L$l++){var L$n=(L$h=this.elements[L$l])._getCSSStyle();switch(0!==L$j&&(L$h.x+=L$j),L$n._getValign()){case 0:L$h.y=L$d;break;case 1:var L$o=0;99999!=this.minTextHeight&&(L$o=this.minTextHeight);var L$p=(L$o+L$g)/2;L$p=Math.max(L$p,this.h),L$k=(laya.html.dom.HTMLImageElement,L$d+L$p-L$h.height),L$h.y=L$k;break;case 2:L$h.y=L$d+(L$g-L$h.height)}}},L$b.revertOrder=function(L$a){var L$b;if(0<this.elements.length){var L$c,L$d=0;for(L$c=this.elements.length,L$d=0;L$d<L$c;L$d++)(L$b=this.elements[L$d]).x=L$a-L$b.x-L$b.width}},L$a}(),L$v=function(L$c){function L$b(){this.URI=null,this._href=null,L$b.__super.call(this),this._text=L$b._EMPTYTEXT,this.setStyle(new L$i(this)),this._getCSSStyle().valign="middle",this.mouseEnabled=!0}L$g(L$b,"laya.html.dom.HTMLElement",L$c);var L$a=L$b.prototype;return L$a.layaoutCallNative=function(){var L$a=0;if(this._childs&&0<(L$a=this._childs.length))for(var L$b=0;L$b<L$a;L$b++)this._childs[L$b].layaoutCallNative&&this._childs[L$b].layaoutCallNative();var L$c=this._getWords();L$c?laya.html.dom.HTMLElement.fillWords(this,L$c,0,0,this.style.font,this.style.color,this.style.underLine):this.graphics.clear()},L$a.appendChild=function(L$a){return this.addChild(L$a)},L$a._getWords2=function(){var L$a=this._text.text;if(!L$a||0===L$a.length)return null;var L$b,L$c,L$d=0,L$e=0;if(this._text.drawWords)L$c=this._text.drawWords;else{for(L$e=(L$b=L$a.split(" ")).length-1,L$c=[],L$d=0;L$d<L$e;L$d++)L$c.push(L$b[L$d]," ");0<=L$e&&L$c.push(L$b[L$e]),this._text.drawWords=L$c}var L$f,L$g=this._text.words;if(L$g&&L$g.length===L$c.length)return L$g;null===L$g&&(this._text.words=L$g=[]),L$g.length=L$c.length;var L$h=this.style,L$i=L$h.font;for(L$d=0,L$e=L$c.length;L$d<L$e;L$d++){L$f=L$s.measureText(L$c[L$d],L$i);var L$j=L$g[L$d]=new L$l(L$c[L$d],L$f.width,L$f.height||L$h.fontSize,L$h);if(1<L$j.char.length&&(L$j.charNum=L$j.char),this.href){var L$k=new L$n;this.addChild(L$k),L$j.setSprite(L$k)}}return L$g},L$a._getWords=function(){if(!L$L.CharacterCache)return this._getWords2();var L$a=this._text.text;if(!L$a||0===L$a.length)return null;var L$b,L$c=this._text.words;if(L$c&&L$c.length===L$a.length)return L$c;null===L$c&&(this._text.words=L$c=[]),L$c.length=L$a.length;for(var L$d=this.style,L$e=L$d.font,L$f=0,L$g=L$a.length;L$f<L$g;L$f++)if(L$b=L$s.measureText(L$a.charAt(L$f),L$e)){var L$h=L$c[L$f]=new L$l(L$a.charAt(L$f),L$b.width,L$b.height||L$d.fontSize,L$d);if(this.href){var L$i=new L$n;this.addChild(L$i),L$h.setSprite(L$i)}}else console.warn("_getWords size is null"+L$a.charAt(L$f),L$e);return L$c},L$a.showLinkSprite=function(){var L$a=this._text.words;if(L$a)for(var L$b,L$c,L$d=[],L$e=0;L$e<L$a.length;L$e++)L$c=L$a[L$e],(L$b=new L$n).graphics.drawRect(0,0,L$c.width,L$c.height,"#ff0000"),L$b.width=L$c.width,L$b.height=L$c.height,this.addChild(L$b),L$d.push(L$b)},L$a._layoutLater=function(){var L$a=this.style;512&L$a._type||(L$a.widthed(this)&&(0<this._childs.length||null!=this._getWords())&&L$a.block?(L$u.later(this),L$a._type|=512):this.parent&&this.parent._layoutLater())},L$a._setAttributes=function(L$a,L$b){switch(L$a){case"style":return void this.style.cssText(L$b);case"class":return void(this.className=L$b)}L$c.prototype._setAttributes.call(this,L$a,L$b)},L$a.updateHref=function(){if(null!=this._href){var L$a=this._getWords();if(L$a)for(var L$b,L$c,L$d=0;L$d<L$a.length;L$d++)(L$c=(L$b=L$a[L$d]).getSprite())&&(L$c.size(L$b.width,L$b.height),L$c.on("click",this,this.onLinkHandler))}},L$a.onLinkHandler=function(L$a){switch(L$a.type){case"click":for(var L$b=this;L$b;)L$b.event("link",[this.href]),L$b=L$b.parent}},L$a.formatURL=function(L$a){return this.URI?L$r.formatURL(L$a,this.URI?this.URI.path:null):L$a},L$h(0,L$a,"href",function(){return this._href},function(L$a){null!=(this._href=L$a)&&(this._getCSSStyle().underLine=1,this.updateHref())}),L$h(0,L$a,"color",null,function(L$a){this.style.color=L$a}),L$h(0,L$a,"onClick",null,function(L$a){L$d._runScript("fn=function(event){"+L$a+";}"),this.on("click",this,void 0)}),L$h(0,L$a,"id",null,function(L$a){L$y.document.setElementById(L$a,this)}),L$h(0,L$a,"innerTEXT",function(){return this._text.text},function(L$a){this.text=L$a}),L$h(0,L$a,"style",function(){return this._style}),L$h(0,L$a,"text",function(){return this._text.text},function(L$a){this._text==L$b._EMPTYTEXT?this._text={text:L$a,words:null}:(this._text.text=L$a,this._text.words&&(this._text.words.length=0)),L$m.isConchApp&&this.layaoutCallNative(),this._renderType|=2048,this.repaint(),this.updateHref()}),L$h(0,L$a,"parent",L$c.prototype._$get_parent,function(L$a){if(L$a instanceof laya.html.dom.HTMLElement){var L$b=L$a;this.URI||(this.URI=L$b.URI),this.style.inherit(L$b.style)}L$d.superSet(L$n,this,"parent",L$a)}),L$h(0,L$a,"className",null,function(L$a){this.style.attrs(L$y.document.styleSheets["."+L$a])}),L$b.fillWords=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$a.graphics.clear();for(var L$h=0,L$i=L$b.length;L$h<L$i;L$h++){var L$j=L$b[L$h];L$a.graphics.fillText(L$j.char,L$j.x+L$c,L$j.y+L$d,L$e,L$f,"left",L$g)}},L$b._EMPTYTEXT={text:null,words:null},L$b}(L$n),L$b=(function(L$a){function L$b(){L$b.__super.call(this),this.style.lineElement=!0,this.style.block=!0}L$g(L$b,"laya.html.dom.HTMLBrElement",L$v)}(),function(L$a){function L$b(){this.contextHeight=NaN,this.contextWidth=NaN,L$b.__super.call(this),this.style.block=!0,this.style.lineElement=!0,this.style.width=200,this.style.height=200}L$g(L$b,"laya.html.dom.HTMLDivElement",L$a);var L$c=L$b.prototype;return L$c.appendHTML=function(L$a){L$t.parse(this,L$a,this.URI),this.layout()},L$c._addChildsToLayout=function(L$b){var L$a=this._getWords();if(null==L$a&&0==this._childs.length)return!1;L$a&&L$a.forEach(function(L$a){L$b.push(L$a)});for(var L$c=!0,L$d=0,L$e=this._childs.length;L$d<L$e;L$d++){var L$f=this._childs[L$d];L$c?L$c=!1:L$b.push(null),L$f._addToLayout(L$b)}return!0},L$c._addToLayout=function(L$a){this.layout()},L$c.layout=function(){if(this.style){this.style._type|=512;var L$a=L$u.layout(this);if(L$a){this._$P.mHtmlBounds||this._set$P("mHtmlBounds",new L$k);var L$b=this._$P.mHtmlBounds;L$b.x=L$b.y=0,L$b.width=this.contextWidth=L$a[0],L$b.height=this.contextHeight=L$a[1],this.setBounds(L$b)}}},L$h(0,L$c,"height",function(){return this._height?this._height:this.contextHeight},L$a.prototype._$set_height),L$h(0,L$c,"innerHTML",null,function(L$a){this.destroyChildren(),this.appendHTML(L$a)}),L$h(0,L$c,"width",function(){return this._width?this._width:this.contextWidth},function(L$a){var L$b=!1;L$b=0===L$a?L$a!=this._width:L$a!=this.width,L$d.superSet(L$v,this,"width",L$a),L$b&&this.layout()}),L$b}(L$v)),L$y=function(L$a){function L$b(){this.all=new Array,this.styleSheets=L$i.styleSheets,L$b.__super.call(this)}L$g(L$b,"laya.html.dom.HTMLDocument",L$v);var L$c=L$b.prototype;return L$c.getElementById=function(L$a){return this.all[L$a]},L$c.setElementById=function(L$a,L$b){this.all[L$a]=L$b},L$e(L$b,["document",function(){return this.document=new L$b}]),L$b}();(function(L$a){function L$b(){this._tex=null,this._url=null,this._renderArgs=[],L$b.__super.call(this),this.style.block=!0}L$g(L$b,"laya.html.dom.HTMLImageElement",L$v);var L$c=L$b.prototype;L$c._addToLayout=function(L$a){!this._style.absolute&&L$a.push(this)},L$c.render=function(L$a,L$b,L$c){!this._tex||!this._tex.loaded||!this._tex.loaded||this._width<1||this._height<1||(L$p.spriteCount++,this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,L$a.ctx.drawTexture2(L$b,L$c,this.style.translateX,this.style.translateY,this.transform,this.style.alpha,this.style.blendMode,this._renderArgs))},L$c.layaoutCallNative=function(){var L$a=0;if(this._childs&&0<(L$a=this._childs.length))for(var L$b=0;L$b<L$a;L$b++)this._childs[L$b].layaoutCallNative&&this._childs[L$b].layaoutCallNative()},L$h(0,L$c,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(L$a){this._width!==L$a&&(this._width=L$a,this._style.width=L$a,this.repaint())}),L$h(0,L$c,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(L$a){this._height!==L$a&&(this._height=L$a,this._style.height=L$a,this.repaint())}),L$c.destroy=function(){null!=this._tex&&(this._tex.off("loaded",this,this.onloaded),L$j.clearCache(this,this._url),this._tex=null),L$v.prototype.destroy.call(this)},L$c.onloaded=function(){var L$a=this._style;L$a&&!L$a.widthed(this)&&this._width!=this._tex.width&&(this.width=this._tex.width,this.parent&&this.parent._layoutLater()),L$a&&!L$a.heighted(this)&&this._height!=this._tex.height&&(this.height=this._tex.height,this.parent&&this.parent._layoutLater()),L$m.isConchApp&&(this._renderArgs[0]=this._tex,this._renderArgs[1]=this.x,this._renderArgs[2]=this.y,this._renderArgs[3]=this.width||this._tex.width,this._renderArgs[4]=this.height||this._tex.height,this.graphics.drawTexture(this._tex,0,0,this._renderArgs[3],this._renderArgs[4])),this.repaint(),this.parentRepaint()},L$c._loadImageComplete=function(L$a,L$b,L$c){if(!this._destroyed)if(null!=L$c)if(L$c instanceof ArrayBuffer){var L$d=new DataView(L$c);new laya.webgl.resource.WebGLImage(new Uint8Array(L$c,8),L$a,0,!1,L$d.getUint32(0),L$d.getUint32(4));this.onloaded()}else if(L$c instanceof L$q)L$j.imgMgrSet[L$a]=L$b,L$f.imgMgrLock(L$a,L$j.imgMgrSet[L$a]),this._url=L$a,this._tex=L$c,L$j.keepCache(this,L$a),L$j.cacheRes(L$a,this._tex),this.onloaded();else{var L$e=-1!=L$a.indexOf(".png",L$a.length-4)?6408:6407;new laya.webgl.resource.WebGLImage(L$c,L$a,L$e,!1,L$c.width,L$c.height);this.onloaded()}else this.event("error","Load image failed")},L$h(0,L$c,"src",null,function(L$a){(L$a=this.formatURL(L$a),this._url!=L$a)&&(null!=this._tex&&(L$j.clearCache(this,this._url),this._tex.off("loaded",this,this.onloaded)),this._url=L$a,(this._tex=L$j.getRes(L$a))?(L$j.keepCache(this,L$a),this.onloaded()):L$f.imgMgrLoad(L$a,this._loadImageComplete.bind(this),2,!1))})})(),function(L$a){function L$b(){this.type=null,L$b.__super.call(this),this.visible=!1}L$g(L$b,"laya.html.dom.HTMLLinkElement",L$a);var L$c=L$b.prototype;L$c._onload=function(L$a){switch(this.type){case"text/css":L$i.parseCSS(L$a,this.URI)}},L$h(0,L$c,"href",L$a.prototype._$get_href,function(L$a){var L$b=this;L$a=this.formatURL(L$a),this.URI=new L$r(L$a);var L$c=new L$j;L$c.once("complete",null,function(L$a){L$b._onload(L$a)}),L$c.load(L$a,"text")}),L$b._cuttingStyle=new RegExp("((@keyframes[\\s\\t]+|)(.+))[\\t\\n\\r\\s]*{","g")}(L$v),function(L$a){function L$b(){L$b.__super.call(this),this.visible=!1}L$g(L$b,"laya.html.dom.HTMLStyleElement",L$a),L$h(0,L$b.prototype,"text",L$a.prototype._$get_text,function(L$a){L$i.parseCSS(L$a,null)})}(L$v),function(L$a){function L$b(){L$b.__super.call(this),this._getCSSStyle().valign="middle"}L$g(L$b,"laya.html.dom.HTMLIframeElement",L$a),L$h(0,L$b.prototype,"href",L$a.prototype._$get_href,function(L$c){var L$d=this;L$c=this.formatURL(L$c);var L$a=new L$j;L$a.once("complete",null,function(L$a){var L$b=L$d.URI;L$d.URI=new L$r(L$c),L$d.innerHTML=L$a,!L$b||(L$d.URI=L$b)}),L$a.load(L$c,"text")})}(L$b)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(L$a,L$b){"use strict";for(var L$c in Object.defineProperty(L$b,"__esModule",{value:!0}),Laya){var L$d=Laya[L$c];L$d&&L$d.__isclass&&(L$b[L$c]=L$d)}}),function(L$e,L$a,L$p){L$p.un,L$p.uns;var L$d=L$p.static,L$f=L$p.class,L$g=L$p.getset,L$c=(L$p.__newvec,laya.display.Animation),L$q=(laya.utils.Browser,laya.utils.ClassUtils),L$h=laya.filters.ColorFilter,L$i=laya.utils.Ease,L$j=laya.events.Event,L$k=(laya.events.EventDispatcher,laya.display.css.Font),L$l=laya.display.FrameAnimation,L$b=laya.display.Graphics,L$m=laya.utils.Handler,L$n=laya.display.Input,L$s=laya.net.Loader,L$o=(laya.display.Node,laya.maths.Point),L$r=laya.maths.Rectangle,L$t=laya.renders.Render,L$u=laya.display.Sprite,L$v=laya.display.Text,L$y=laya.resource.Texture,L$z=laya.utils.Tween,L$A=laya.utils.Utils,L$B=laya.utils.WeakObject;L$p.interface("laya.ui.IItem"),L$p.interface("laya.ui.ISelect"),L$p.interface("laya.ui.IRender"),L$p.interface("laya.ui.IComponent"),L$p.interface("laya.ui.IBox","IComponent");var L$C=function(){function L$a(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return L$f(L$a,"laya.ui.LayoutStyle"),L$d(L$a,["EMPTY",function(){return this.EMPTY=new L$a}]),L$a}(),L$D=function(){function L$a(){}return L$f(L$a,"laya.ui.Styles"),L$a.labelColor="#000000",L$a.buttonStateNum=3,L$a.scrollBarMinNum=15,L$a.scrollBarDelayTime=500,L$d(L$a,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),L$a}(),L$E=function(){function L$e(){}return L$f(L$e,"laya.ui.UIUtils"),L$e.fillArray=function(L$a,L$b,L$c){var L$d=L$a.concat();if(L$b)for(var L$e=L$b.split(","),L$f=0,L$g=Math.min(L$d.length,L$e.length);L$f<L$g;L$f++){var L$h=L$e[L$f];L$d[L$f]="true"==L$h||"false"!=L$h&&L$h,null!=L$c&&(L$d[L$f]=L$c(L$h))}return L$d},L$e.toColor=function(L$a){return L$A.toHexColor(L$a)},L$e.gray=function(L$a,L$b){void 0===L$b&&(L$b=!0),L$b?L$e.addFilter(L$a,L$e.grayFilter):L$e.clearFilter(L$a,L$h)},L$e.addFilter=function(L$a,L$b){var L$c=L$a.filters||[];L$c.push(L$b),L$a.filters=L$c},L$e.clearFilter=function(L$a,L$b){var L$c=L$a.filters;if(null!=L$c&&0<L$c.length){for(var L$d=L$c.length-1;-1<L$d;L$d--){var L$e=L$c[L$d];L$p.__typeof(L$e,L$b)&&L$c.splice(L$d,1)}L$a.filters=L$c}},L$e._getReplaceStr=function(L$a){return L$e.escapeSequence[L$a]},L$e.adptString=function(L$a){return L$a.replace(/\\(\w)/g,L$e._getReplaceStr)},L$e.getBindFun=function(L$a){var L$b=L$e._funMap.get(L$a);if(null==L$b){var L$c='"'+L$a+'"',L$d="(function(data){if(data==null)return;with(data){try{\nreturn "+(L$c=L$c.replace(/^"\${|}"$/g,"").replace(/\${/g,'"+').replace(/}/g,'+"'))+"\n}catch(e){}}})";L$b=L$p._runScript(L$d),L$e._funMap.set(L$a,L$b)}return L$b},L$d(L$e,["grayFilter",function(){return this.grayFilter=new L$h([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])},"escapeSequence",function(){return this.escapeSequence={"\\n":"\n","\\t":"\t"}},"_funMap",function(){return this._funMap=new L$B}]),L$e}(),L$F=function(){function L$a(){}return L$f(L$a,"UIConfig"),L$a.touchScrollEnable=!0,L$a.mouseWheelEnable=!0,L$a.showButtons=!0,L$a.popupBgColor="#000000",L$a.popupBgAlpha=.5,L$a.closeDialogOnSide=!0,L$a}(),L$G=function(L$c){function L$r(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,L$r.__super.call(this),this._weakKeys=[]}L$f(L$r,"laya.ui.AutoBitmap",L$c);var L$a=L$r.prototype;return L$a.destroy=function(){if(L$s.clearObject(this,this._weakKey),this._weakKeys){for(var L$a=0,L$b=this._weakKeys.length;L$a<L$b;++L$a)L$s.clearObject(this,this._weakKeys[L$a]);this._weakKeys=null}L$c.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},L$a._setChanged=function(){this._isChanged||(this._isChanged=!0,L$p.timer.callLater(this,this.changeSource))},L$a.changeSource=function(){this._isChanged=!1;var L$a=this._source;if(L$a&&L$a.bitmap){var L$b=this.width,L$c=this.height,L$d=this._sizeGrid,L$e=L$a.sourceWidth,L$f=L$a.sourceHeight;if(!L$d||L$e===L$b&&L$f===L$c)this.cleanByTexture(L$a,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,L$b,L$c);else{L$s.clearObject(this,this._weakKey),L$a.$_GID||(L$a.$_GID=L$A.getGID());var L$g=L$a.$_GID+"."+L$b+"."+L$c+"."+L$d.join("."),L$h=L$s.findObject(L$g);if(L$A.isOKCmdList(L$h))return this._weakKey=L$g,L$s.keepObject(this,this._weakKey),void(this.cmds=L$h);this.clear();var L$i,L$j,L$k=L$d[0],L$l=L$d[1],L$m=L$d[2],L$n=L$d[3],L$o=L$d[4],L$p=!1;if(L$b==L$e&&(L$n=L$l=0),L$c==L$f&&(L$k=L$m=0),L$b<L$n+L$l){var L$q=L$b;L$p=!0,L$b=L$n+L$l,this.save(),this.clipRect(0,0,L$q,L$c)}L$n&&L$k&&(L$i=L$r.getTexture(L$a,0,0,L$n,L$k),L$j=this._weakKeys[0],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[0]=L$i.weakKey),this.drawTexture(L$i,0,0,L$n,L$k)):(L$s.clearObject(this,L$j),this._weakKeys[0]="")),L$l&&L$k&&(L$i=L$r.getTexture(L$a,L$e-L$l,0,L$l,L$k),L$j=this._weakKeys[1],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[1]=L$i.weakKey),this.drawTexture(L$i,L$b-L$l,0,L$l,L$k)):(L$s.clearObject(this,L$j),this._weakKeys[1]="")),L$n&&L$m&&(L$i=L$r.getTexture(L$a,0,L$f-L$m,L$n,L$m),L$j=this._weakKeys[2],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[2]=L$i.weakKey),this.drawTexture(L$i,0,L$c-L$m,L$n,L$m)):(L$s.clearObject(this,L$j),this._weakKeys[2]="")),L$l&&L$m&&(L$i=L$r.getTexture(L$a,L$e-L$l,L$f-L$m,L$l,L$m),L$j=this._weakKeys[3],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[3]=L$i.weakKey),this.drawTexture(L$i,L$b-L$l,L$c-L$m,L$l,L$m)):(L$s.clearObject(this,L$j),this._weakKeys[3]="")),L$k&&(L$i=L$r.getTexture(L$a,L$n,0,L$e-L$n-L$l,L$k),L$j=this._weakKeys[4],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[4]=L$i.weakKey),this.drawBitmap(L$o,L$i,L$n,0,L$b-L$n-L$l,L$k)):(L$s.clearObject(this,L$j),this._weakKeys[4]="")),L$m&&(L$i=L$r.getTexture(L$a,L$n,L$f-L$m,L$e-L$n-L$l,L$m),L$j=this._weakKeys[5],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[5]=L$i.weakKey),this.drawBitmap(L$o,L$i,L$n,L$c-L$m,L$b-L$n-L$l,L$m)):(L$s.clearObject(this,L$j),this._weakKeys[5]="")),L$n&&(L$i=L$r.getTexture(L$a,0,L$k,L$n,L$f-L$k-L$m),L$j=this._weakKeys[6],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[6]=L$i.weakKey),this.drawBitmap(L$o,L$i,0,L$k,L$n,L$c-L$k-L$m)):(L$s.clearObject(this,L$j),this._weakKeys[6]="")),L$l&&(L$i=L$r.getTexture(L$a,L$e-L$l,L$k,L$l,L$f-L$k-L$m),L$j=this._weakKeys[7],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[7]=L$i.weakKey),this.drawBitmap(L$o,L$i,L$b-L$l,L$k,L$l,L$c-L$k-L$m)):(L$s.clearObject(this,L$j),this._weakKeys[7]="")),L$i=L$r.getTexture(L$a,L$n,L$k,L$e-L$n-L$l,L$f-L$k-L$m),L$j=this._weakKeys[8],L$i?(L$j!=L$i.weakKey&&(L$s.clearObject(this,L$j),L$s.keepObject(this,L$i.weakKey),this._weakKeys[8]=L$i.weakKey),this.drawBitmap(L$o,L$i,L$n,L$k,L$b-L$n-L$l,L$c-L$k-L$m)):(L$s.clearObject(this,L$j),this._weakKeys[8]=""),L$p&&this.restore(),this.autoCacheCmd&&!L$t.isConchApp&&(L$s.saveObject(L$g,this.cmds,null),this._weakKey=L$g,L$s.keepObject(this,this._weakKey))}this._repaint()}},L$a.drawBitmap=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=0),L$e<.1||L$f<.1||(!L$a||L$b.width==L$e&&L$b.height==L$f?this.drawTexture(L$b,L$c,L$d,L$e,L$f):this.fillTexture(L$b,L$c,L$d,L$e,L$f))},L$a.clear=function(L$a){void 0===L$a&&(L$a=!0),L$c.prototype.clear.call(this,!1)},L$g(0,L$a,"sizeGrid",function(){return this._sizeGrid},function(L$a){this._sizeGrid=L$a,this._setChanged()}),L$g(0,L$a,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(L$a){this._width!=L$a&&(this._width=L$a,this._setChanged())}),L$g(0,L$a,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(L$a){this._height!=L$a&&(this._height=L$a,this._setChanged())}),L$g(0,L$a,"source",function(){return this._source},function(L$a){L$a?(this._source=L$a,this._setChanged()):(this._source=null,this.clear())}),L$r.getTexture=function(L$a,L$b,L$c,L$d,L$e){L$d<=0&&(L$d=1),L$e<=0&&(L$e=1),L$a.$_GID||(L$a.$_GID=L$A.getGID());var L$f=L$a.$_GID+"."+L$b+"."+L$c+"."+L$d+"."+L$e,L$g=L$s.findObject(L$f);if((!L$g||!L$g.source)&&(L$g=L$y.createFromTexture(L$a,L$b,L$c,L$d,L$e))){if(L$a.alphaTexture){var L$h=L$a.width/L$a.alphaTexture.width;L$g.alphaTexture=L$y.createFromTexture(L$a.alphaTexture,L$b/L$h,L$c/L$h,L$d/L$h,L$e/L$h)}L$s.saveObject(L$f,L$g),L$g.weakKey=L$f}return L$g},L$r}(L$b),L$H=(function(L$a){function L$b(){L$b.__super.call(this)}L$f(L$b,"laya.ui.UIEvent",L$j),L$b.SHOW_TIP="showtip",L$b.HIDE_TIP="hidetip"}(),function(L$b){function L$a(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,this.layoutEnabled=!0,L$a.__super.call(this),this._layout=L$C.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}L$f(L$a,"laya.ui.Component",L$b);var L$c=L$a.prototype;return L$p.imps(L$c,{"laya.ui.IComponent":!0}),L$c.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},L$c.preinitialize=function(){},L$c.createChildren=function(){},L$c.initialize=function(){},L$c.callLater=function(L$a,L$b){L$p.timer.callLater(this,L$a,L$b)},L$c.runCallLater=function(L$a){L$p.timer.runCallLater(this,L$a)},L$c.commitMeasure=function(){},L$c.changeSize=function(){this.event("resize")},L$c.getLayout=function(){return this._layout===L$C.EMPTY&&(this._layout=new L$C),this._layout},L$c._setLayoutEnabled=function(L$a){this._layout&&this._layout.enable!=L$a&&(this._layout.enable=L$a,this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved),this.parent&&this.onAdded())},L$c.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},L$c.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},L$c.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},L$c.resetLayoutX=function(){var L$a=this._layout;if(isNaN(L$a.anchorX)||(this.pivotX=L$a.anchorX*this.width),this.layoutEnabled){var L$b=this.parent;L$b&&(isNaN(L$a.centerX)?isNaN(L$a.left)?isNaN(L$a.right)||(this.x=Math.round(L$b.width-this.displayWidth-L$a.right+this.pivotX*this.scaleX)):(this.x=Math.round(L$a.left+this.pivotX*this.scaleX),isNaN(L$a.right)||(this.width=(L$b._width-L$a.left-L$a.right)/(this.scaleX||.01))):this.x=Math.round(.5*(L$b.width-this.displayWidth)+L$a.centerX+this.pivotX*this.scaleX))}},L$c.resetLayoutY=function(){var L$a=this._layout;if(isNaN(L$a.anchorY)||(this.pivotY=L$a.anchorY*this.height),this.layoutEnabled){var L$b=this.parent;L$b&&(isNaN(L$a.centerY)?isNaN(L$a.top)?isNaN(L$a.bottom)||(this.y=Math.round(L$b.height-this.displayHeight-L$a.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(L$a.top+this.pivotY*this.scaleY),isNaN(L$a.bottom)||(this.height=(L$b._height-L$a.top-L$a.bottom)/(this.scaleY||.01))):this.y=Math.round(.5*(L$b.height-this.displayHeight)+L$a.centerY+this.pivotY*this.scaleY))}},L$c.onMouseOver=function(L$a){L$p.stage.event("showtip",this._toolTip)},L$c.onMouseOut=function(L$a){L$p.stage.event("hidetip",this._toolTip)},L$g(0,L$c,"displayWidth",function(){return this.width*this.scaleX}),L$g(0,L$c,"width",function(){return this._width?this._width:this.measureWidth},function(L$a){this._width!=L$a&&(this._width=L$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),L$g(0,L$c,"measureWidth",function(){var L$a=0;this.commitMeasure();for(var L$b=this.numChildren-1;-1<L$b;L$b--){var L$c=this.getChildAt(L$b);L$c.visible&&(L$a=Math.max(L$c.x+L$c.width*L$c.scaleX,L$a))}return L$a}),L$g(0,L$c,"displayHeight",function(){return this.height*this.scaleY}),L$g(0,L$c,"height",function(){return this._height?this._height:this.measureHeight},function(L$a){this._height!=L$a&&(this._height=L$a,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),L$g(0,L$c,"dataSource",function(){return this._dataSource},function(L$a){for(var L$b in this._dataSource=L$a,this._dataSource)this.hasOwnProperty(L$b)&&"function"!=typeof this[L$b]&&(this[L$b]=this._dataSource[L$b])}),L$g(0,L$c,"scaleY",L$b.prototype._$get_scaleY,function(L$a){L$p.superGet(L$u,this,"scaleY")!=L$a&&(L$p.superSet(L$u,this,"scaleY",L$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),L$g(0,L$c,"measureHeight",function(){var L$a=0;this.commitMeasure();for(var L$b=this.numChildren-1;-1<L$b;L$b--){var L$c=this.getChildAt(L$b);L$c.visible&&(L$a=Math.max(L$c.y+L$c.height*L$c.scaleY,L$a))}return L$a}),L$g(0,L$c,"scaleX",L$b.prototype._$get_scaleX,function(L$a){L$p.superGet(L$u,this,"scaleX")!=L$a&&(L$p.superSet(L$u,this,"scaleX",L$a),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),L$g(0,L$c,"top",function(){return this._layout.top},function(L$a){L$a!=this._layout.top&&(this.getLayout().top=L$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),L$g(0,L$c,"bottom",function(){return this._layout.bottom},function(L$a){L$a!=this._layout.bottom&&(this.getLayout().bottom=L$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),L$g(0,L$c,"left",function(){return this._layout.left},function(L$a){L$a!=this._layout.left&&(this.getLayout().left=L$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),L$g(0,L$c,"right",function(){return this._layout.right},function(L$a){L$a!=this._layout.right&&(this.getLayout().right=L$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),L$g(0,L$c,"centerX",function(){return this._layout.centerX},function(L$a){L$a!=this._layout.centerX&&(this.getLayout().centerX=L$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),L$g(0,L$c,"centerY",function(){return this._layout.centerY},function(L$a){L$a!=this._layout.centerY&&(this.getLayout().centerY=L$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),L$g(0,L$c,"anchorX",function(){return this._layout.anchorX},function(L$a){L$a!=this._layout.anchorX&&(this.getLayout().anchorX=L$a,this._setLayoutEnabled(!0)),this.resetLayoutX()}),L$g(0,L$c,"anchorY",function(){return this._layout.anchorY},function(L$a){L$a!=this._layout.anchorY&&(this.getLayout().anchorY=L$a,this._setLayoutEnabled(!0)),this.resetLayoutY()}),L$g(0,L$c,"tag",function(){return this._tag},function(L$a){this._tag=L$a}),L$g(0,L$c,"toolTip",function(){return this._toolTip},function(L$a){this._toolTip!=L$a&&(null!=(this._toolTip=L$a)?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),L$g(0,L$c,"comXml",function(){return this._comXml},function(L$a){this._comXml=L$a}),L$g(0,L$c,"gray",function(){return this._gray},function(L$a){L$a!==this._gray&&(this._gray=L$a,L$E.gray(this,L$a))}),L$g(0,L$c,"disabled",function(){return this._disabled},function(L$a){L$a!==this._disabled&&(this.gray=this._disabled=L$a,this.mouseEnabled=!L$a)}),L$a}(L$u)),L$I=function(L$a){function L$b(){this.lockLayer=null,this.popupEffect=function(L$a){L$a.scale(1,1),L$z.from(L$a,{x:L$p.stage.width/2,y:L$p.stage.height/2,scaleX:0,scaleY:0},300,L$i.backOut,L$m.create(this,this.doOpen,[L$a]))},this.closeEffect=function(L$a,L$b){L$z.to(L$a,{x:L$p.stage.width/2,y:L$p.stage.height/2,scaleX:0,scaleY:0},300,L$i.strongOut,L$m.create(this,this.doClose,[L$a,L$b]))},L$b.__super.call(this),this.maskLayer=new L$u,this.popupEffectHandler=L$m.create(this,this.popupEffect,null,!1),this.closeEffectHandler=L$m.create(this,this.closeEffect,null,!1),this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,L$p.stage.addChild(this),L$p.stage.on("resize",this,this._onResize),L$F.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}L$f(L$b,"laya.ui.DialogManager",L$u);var L$c=L$b.prototype;return L$c._closeOnSide=function(){var L$a=this.getChildAt(this.numChildren-1);L$a instanceof laya.ui.Dialog&&L$a.close("side")},L$c.setLockView=function(L$a){this.lockLayer||(this.lockLayer=new L$J,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(L$p.stage.width,L$p.stage.height)),this.lockLayer.removeChildren(),L$a&&(L$a.centerX=L$a.centerY=0,this.lockLayer.addChild(L$a))},L$c._onResize=function(L$a){var L$b=this.maskLayer.width=L$p.stage.width,L$c=this.maskLayer.height=L$p.stage.height;this.lockLayer&&this.lockLayer.size(L$b,L$c),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,L$b,L$c,L$F.popupBgColor),this.maskLayer.alpha=L$F.popupBgAlpha;for(var L$d=this.numChildren-1;-1<L$d;L$d--){var L$e=this.getChildAt(L$d);L$e.popupCenter&&this._centerDialog(L$e)}},L$c._centerDialog=function(L$a){L$a.x=Math.round((L$p.stage.width-L$a.width>>1)+L$a.pivotX),L$a.y=Math.round((L$p.stage.height-L$a.height>>1)+L$a.pivotY)},L$c.open=function(L$a,L$b,L$c){void 0===L$b&&(L$b=!1),void 0===L$c&&(L$c=!1),L$b&&this._closeAll(),L$a.popupCenter&&this._centerDialog(L$a),this.addChild(L$a),(L$a.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),L$c&&null!=L$a.popupEffect?L$a.popupEffect.runWith(L$a):this.doOpen(L$a),this.event("open")},L$c.doOpen=function(L$a){L$a.onOpened()},L$c.lock=function(L$a){this.lockLayer&&(L$a?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},L$c.close=function(L$a,L$b,L$c){void 0===L$c&&(L$c=!1),L$c&&null!=L$a.closeEffect?L$a.closeEffect.runWith([L$a,L$b]):this.doClose(L$a,L$b),this.event("close")},L$c.doClose=function(L$a,L$b){L$a.removeSelf(),L$a.isModal&&this._checkMask(),L$a.closeHandler&&L$a.closeHandler.runWith(L$b),L$a.onClosed(L$b)},L$c.closeAll=function(){this._closeAll(),this.event("close")},L$c._closeAll=function(){for(var L$a=this.numChildren-1;-1<L$a;L$a--){var L$b=this.getChildAt(L$a);L$b&&null!=L$b.close&&this.doClose(L$b)}},L$c.getDialogsByGroup=function(L$a){for(var L$b=[],L$c=this.numChildren-1;-1<L$c;L$c--){var L$d=this.getChildAt(L$c);L$d&&L$d.group===L$a&&L$b.push(L$d)}return L$b},L$c.closeByGroup=function(L$a){for(var L$b=[],L$c=this.numChildren-1;-1<L$c;L$c--){var L$d=this.getChildAt(L$c);L$d&&L$d.group===L$a&&(L$d.close(),L$b.push(L$d))}return L$b},L$c._checkMask=function(){this.maskLayer.removeSelf();for(var L$a=this.numChildren-1;-1<L$a;L$a--){var L$b=this.getChildAt(L$a);if(L$b&&L$b.isModal)return void this.addChildAt(this.maskLayer,L$a)}},L$b}(),L$J=function(L$a){function L$b(){L$b.__super.call(this)}L$f(L$b,"laya.ui.Box",L$a);var L$c=L$b.prototype;return L$p.imps(L$c,{"laya.ui.IBox":!0}),L$g(0,L$c,"dataSource",L$a.prototype._$get_dataSource,function(L$a){for(var L$b in this._dataSource=L$a){var L$c=this.getChildByName(L$b);L$c?L$c.dataSource=L$a[L$b]:this.hasOwnProperty(L$b)&&"function"!=typeof this[L$b]&&(this[L$b]=L$a[L$b])}}),L$b}(L$H),L$K=function(L$b){function L$c(L$a,L$b){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,L$c.__super.call(this),this._labelColors=L$D.buttonLabelColors,this._stateNum=L$D.buttonStateNum,void 0===L$b&&(L$b=""),this.skin=L$a,this.label=L$b}L$f(L$c,"laya.ui.Button",L$b);var L$a=L$c.prototype;return L$p.imps(L$a,{"laya.ui.ISelect":!0}),L$a.destroy=function(L$a){this.clearEvent(),L$s.clearCache(this,this._skin),L$s.clearObject(this,this._weakKey),void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(L$a),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},L$a.clearEvent=function(){this._skin&&L$e.atalsNotify&&L$e.atalsNotify.off(this._skin,this,this._setBtnSource)},L$a.createChildren=function(){this.graphics=this._bitmap=new L$G},L$a.createText=function(){this._text||(this._text=new L$v,this._text.overflow=L$v.HIDDEN,this._text.align="center",this._text.valign="middle",this._text.width=this._width,this._text.height=this._height)},L$a.initialize=function(){1!==this._mouseEnableState&&(this.mouseEnabled=!0,this._setBit(2,!0)),this._createListener("mouseover",this,this.onMouse,null,!1,!1),this._createListener("mouseout",this,this.onMouse,null,!1,!1),this._createListener("mousedown",this,this.onMouse,null,!1,!1),this._createListener("mouseup",this,this.onMouse,null,!1,!1),this._createListener("click",this,this.onMouse,null,!1,!1)},L$a.onMouse=function(L$a){if(!1!==this.toggle||!this._selected)return"click"===L$a.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=L$c.stateMap[L$a.type]))},L$a.changeClips=function(){var L$a=L$s.getRes(this._skin);if(L$a)if(this._skin&&""!=this._skin){L$s.clearObject(this,this._weakKey);var L$b=L$a.sourceWidth,L$c=L$a.sourceHeight/this._stateNum;L$a.$_GID||(L$a.$_GID=L$A.getGID());var L$d=L$a.$_GID+"-"+this._stateNum,L$e=L$s.findObject(L$d);if(L$A.isOkTextureList(L$e)||(L$e=null),L$e)this._weakKey=L$d,L$s.keepObject(this,this._weakKey),this._sources=L$e;else{if(this._sources=[],1===this._stateNum)this._sources.push(L$a);else for(var L$f=0;L$f<this._stateNum;L$f++){var L$g=L$y.createFromTexture(L$a,0,L$c*L$f,L$b,L$c);if(L$a.alphaTexture){var L$h=L$a.width/L$a.alphaTexture.width;L$g.alphaTexture=L$y.createFromTexture(L$a.alphaTexture,0/L$h,L$c*L$f/L$h,L$b/L$h,L$c/L$h)}this._sources.push(L$g)}L$s.saveObject(L$d,this._sources),this._weakKey=L$d,L$s.keepObject(this,this._weakKey)}this._autoSize?(this._bitmap.width=this._width||L$b,this._bitmap.height=this._height||L$c,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=L$b)}else console.warn("lose skin ",this._skin,this.name,this.__className)},L$a.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var L$a=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[L$a]),this.label&&(this._text.color=this._labelColors[L$a],this._strokeColors&&(this._text.strokeColor=this._strokeColors[L$a]))},L$a._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},L$g(0,L$a,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(L$a){this.createText(),this._text.strokeColor=L$a}),L$g(0,L$a,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),L$g(0,L$a,"skin",function(){return this._skin},function(L$a){if(this._skin!=L$a)if(this.clearEvent(),L$s.clearCache(this,this._skin),this._skin=L$a,L$s.keepCache(this,this._skin),L$s.getRes(this._skin))this.callLater(this.changeClips),this._setStateChanged();else{var L$b=L$e.resAtalsObj&&L$e.resAtalsObj[this._skin];L$b?(L$e.atalsNotify&&L$e.atalsNotify.once(this._skin,this,this._setBtnSource),0==this.width&&(this.width=L$b.sourceW),0==this.height&&(this.height=L$b.sourceH/this._stateNum)):console.warn("lose button skin ",this._skin,this.name,this.__className)}}),L$a._setBtnSource=function(L$a,L$b){L$a===this._skin&&L$b&&(this.callLater(this.changeClips),this._setStateChanged(),this.clearEvent())},L$g(0,L$a,"state",function(){return this._state},function(L$a){this._state!=L$a&&(this._state=L$a,this._setStateChanged())}),L$g(0,L$a,"text",function(){return this.createText(),this._text}),L$g(0,L$a,"stateNum",function(){return this._stateNum},function(L$a){"string"==typeof L$a&&(L$a=parseInt(L$a)),this._stateNum!=L$a&&(this._stateNum=L$a<1?1:3<L$a?3:L$a,this.callLater(this.changeClips))}),L$g(0,L$a,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(L$a){this._strokeColors=L$E.fillArray(L$D.buttonLabelColors,L$a,String),this._setStateChanged()}),L$g(0,L$a,"labelColors",function(){return this._labelColors.join(",")},function(L$a){this._labelColors=L$E.fillArray(L$D.buttonLabelColors,L$a,String),this._setStateChanged()}),L$g(0,L$a,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),L$g(0,L$a,"label",function(){return this._text?this._text.text:null},function(L$a){(this._text||L$a)&&(this.createText(),this._text.text!=L$a&&(L$a&&!this._text.parent&&this.addChild(this._text),this._text.text=(L$a+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),L$g(0,L$a,"selected",function(){return this._selected},function(L$a){this._selected!=L$a&&(this._selected=L$a,this.state=this._selected?2:0,this.event("change"))}),L$g(0,L$a,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(L$a){this.createText(),this._text.padding=L$E.fillArray(L$D.labelPadding,L$a,Number)}),L$g(0,L$a,"labelSize",function(){return this.createText(),this._text.fontSize},function(L$a){this.createText(),this._text.fontSize=L$a}),L$g(0,L$a,"labelStroke",function(){return this.createText(),this._text.stroke},function(L$a){this.createText(),this._text.stroke=L$a}),L$g(0,L$a,"labelBold",function(){return this.createText(),this._text.bold},function(L$a){this.createText(),this._text.bold=L$a}),L$g(0,L$a,"labelFont",function(){return this.createText(),this._text.font},function(L$a){this.createText(),this._text.font=L$a}),L$g(0,L$a,"labelAlign",function(){return this.createText(),this._text.align},function(L$a){this.createText(),this._text.align=L$a}),L$g(0,L$a,"clickHandler",function(){return this._clickHandler},function(L$a){this._clickHandler=L$a}),L$g(0,L$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(L$a){this._bitmap.sizeGrid=L$E.fillArray(L$D.defaultSizeGrid,L$a,Number)}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$H,this,"width",L$a),this._autoSize&&(this._bitmap.width=L$a,this._text&&(this._text.width=L$a))}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$H,this,"height",L$a),this._autoSize&&(this._bitmap.height=L$a,this._text&&(this._text.height=L$a))}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)||"string"==typeof L$a?this.label=L$a+"":L$p.superSet(L$H,this,"dataSource",L$a)}),L$g(0,L$a,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(L$a){this._bitmap._offset=L$a?L$E.fillArray([1,1],L$a,Number):[]}),L$d(L$c,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),L$c}(L$H),L$L=function(L$b){function L$d(L$a,L$b,L$c){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,this._toIndex=-1,this._complete=null,this._progress=null,L$d.__super.call(this),void 0===L$b&&(L$b=1),void 0===L$c&&(L$c=1),this._clipX=L$b,this._clipY=L$c,this.skin=L$a}L$f(L$d,"laya.ui.Clip",L$b);var L$a=L$d.prototype;return L$a.destroy=function(L$a){this.clearEvent(),this.clearLoad(),L$s.clearCache(this,this._skin),L$s.clearObject(this,this._weakKey),void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},L$a.dispose=function(){this.destroy(!0),L$p.loader.clearRes(this._skin)},L$a.createChildren=function(){this.graphics=this._bitmap=new L$G},L$a._onDisplay=function(L$a){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this.play()},L$a.changeClip=function(){if(this._clipChanged=!1,this._skin){var L$a=L$s.getRes(this._skin);if(L$a)this.loadComplete(this._skin,L$a);else{if(L$e.resAtalsObj&&L$e.resAtalsObj[this._skin])return;this.clearLoad(),this._complete=L$m.create(this,this.loadComplete,[this._skin]),this._progress=null,L$p.loader.load(this._skin,this._complete,this._progress)}}},L$a.loadComplete=function(L$a,L$b){if(L$a===this._skin&&L$b){L$s.clearObject(this,this._weakKey);var L$c=this._clipWidth||Math.ceil(L$b.sourceWidth/this._clipX),L$d=this._clipHeight||Math.ceil(L$b.sourceHeight/this._clipY),L$e=this._skin+L$c+L$d,L$f=L$s.findObject(L$e);if(L$A.isOkTextureList(L$f)||(L$f=null),L$f)this._weakKey=L$e,L$s.keepObject(this,this._weakKey),this._sources=L$f;else{this._sources=[];for(var L$g=0;L$g<this._clipY;L$g++)for(var L$h=0;L$h<this._clipX;L$h++){var L$i=L$y.createFromTexture(L$b,L$c*L$h,L$d*L$g,L$c,L$d);if(L$b.alphaTexture){var L$j=L$b.width/L$b.alphaTexture.width;L$i.alphaTexture=L$y.createFromTexture(L$b.alphaTexture,L$c*L$h/L$j,L$d*L$g/L$j,L$c/L$j,L$d/L$j)}this._sources.push(L$i)}L$s.saveObject(L$e,this._sources),this._weakKey=L$e,L$s.keepObject(this,this._weakKey)}this.index=this._index,this.event("loaded"),this.onCompResize()}},L$a.play=function(L$a,L$b){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=-1),this._isPlaying=!0,this.index=L$a,this._toIndex=L$b,this._index++,L$p.timer.loop(this.interval,this,this._loop),this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},L$a._loop=function(){this._style.visible&&this._sources&&(this._index++,-1<this._toIndex&&this._index>=this._toIndex?this.stop():this._index>=this._sources.length&&(this._index=0),this.index=this._index)},L$a.stop=function(){this._isPlaying=!1,L$p.timer.clear(this,this._loop),this.event("complete")},L$a._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},L$g(0,L$a,"interval",function(){return this._interval},function(L$a){this._interval!=L$a&&(this._interval=L$a,this._isPlaying&&this.play())}),L$a.clearEvent=function(){this._skin&&L$e.atalsNotify&&L$e.atalsNotify.off(this._skin,this,this._setBtnSource)},L$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&L$p.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},L$g(0,L$a,"skin",function(){return this._skin},function(L$a){if(this._skin!=L$a)if(this.clearLoad(),this.clearEvent(),L$s.clearCache(this,this._skin),this._skin=L$a){L$s.keepCache(this,this._skin);var L$b=L$s.getRes(L$a),L$c=L$e.resAtalsObj&&L$e.resAtalsObj[this._skin];!L$b&&L$c?L$e.atalsNotify&&L$e.atalsNotify.once(this._skin,this,this._setBtnSource):this._setClipChanged()}else this._bitmap.source=null}),L$a._setBtnSource=function(L$a,L$b){L$a===this._skin&&L$b&&(this.loadComplete(L$a,L$b),this.clearEvent())},L$g(0,L$a,"sources",function(){return this._sources},function(L$a){this._sources=L$a,this.index=this._index,this.event("loaded")}),L$g(0,L$a,"clipX",function(){return this._clipX},function(L$a){this._clipX=L$a||1,this._setClipChanged()}),L$g(0,L$a,"clipY",function(){return this._clipY},function(L$a){this._clipY=L$a||1,this._setClipChanged()}),L$g(0,L$a,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),L$g(0,L$a,"clipWidth",function(){return this._clipWidth},function(L$a){this._clipWidth=L$a,this._setClipChanged()}),L$g(0,L$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(L$a){this._bitmap.sizeGrid=L$E.fillArray(L$D.defaultSizeGrid,L$a,Number)}),L$g(0,L$a,"group",function(){return this._group},function(L$a){L$a&&this._skin&&L$s.setGroup(this._skin,L$a),this._group=L$a}),L$g(0,L$a,"clipHeight",function(){return this._clipHeight},function(L$a){this._clipHeight=L$a,this._setClipChanged()}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$H,this,"width",L$a),this._bitmap.width=L$a}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$H,this,"height",L$a),this._bitmap.height=L$a}),L$g(0,L$a,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),L$g(0,L$a,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),L$g(0,L$a,"index",function(){return this._index},function(L$a){this._index=L$a,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[L$a]),this.event("change")}),L$g(0,L$a,"autoPlay",function(){return this._autoPlay},function(L$a){this._autoPlay!=L$a&&((this._autoPlay=L$a)?this.play():this.stop())}),L$g(0,L$a,"isPlaying",function(){return this._isPlaying},function(L$a){this._isPlaying=L$a}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)&&Math.floor(L$a)==L$a||"string"==typeof L$a?this.index=parseInt(L$a):L$p.superSet(L$H,this,"dataSource",L$a)}),L$g(0,L$a,"bitmap",function(){return this._bitmap}),L$d}(L$H),L$M=function(L$b){function L$a(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,L$a.__super.call(this)}L$f(L$a,"laya.ui.ColorPicker",L$b);var L$c=L$a.prototype;return L$c.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._colorPanel&&this._colorPanel.destroy(L$a),this._colorButton&&this._colorButton.destroy(L$a),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},L$c.createChildren=function(){this.addChild(this._colorButton=new L$K),this._colorPanel=new L$J,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new L$u),this._colorPanel.addChild(this._colorBlock=new L$u),this._colorPanel.addChild(this._colorInput=new L$n)},L$c.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},L$c.onPanelMouseDown=function(L$a){L$a.stopPropagation()},L$c.changePanel=function(){this._panelChanged=!1;var L$a=this._colorPanel.graphics;L$a.clear(),L$a.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(L$a=this._colorTiles.graphics).clear();for(var L$b=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],L$c=0;L$c<12;L$c++)for(var L$d=0;L$d<20;L$d++){var L$e=0;L$e=0===L$d?L$b[L$c]:1===L$d?0:51*(((3*L$c+L$d/6)%3<<0)+3*(L$c/6<<0))<<16|L$d%6*51<<8|(L$c<<0)%6*51;var L$f=L$E.toColor(L$e);this._colors.push(L$f);var L$g=L$d*this._gridSize,L$h=L$c*this._gridSize;L$a.drawRect(L$g,L$h,this._gridSize,this._gridSize,L$f,"#000000")}},L$c.onColorButtonClick=function(L$a){this._colorPanel.parent?this.close():this.open()},L$c.open=function(){var L$a=this.localToGlobal(new L$o),L$b=L$a.x+this._colorPanel.width<=L$p.stage.width?L$a.x:L$p.stage.width-this._colorPanel.width,L$c=L$a.y+this._colorButton.height;L$c=L$c+this._colorPanel.height<=L$p.stage.height?L$c:L$a.y-this._colorPanel.height,this._colorPanel.pos(L$b,L$c),this._colorPanel.zOrder=1001,L$p._currentStage.addChild(this._colorPanel),L$p.stage.on("mousedown",this,this.removeColorBox)},L$c.close=function(){L$p.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},L$c.removeColorBox=function(L$a){this.close()},L$c.onColorFieldKeyDown=function(L$a){13==L$a.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),L$a.stopPropagation())},L$c.onColorInputChange=function(L$a){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},L$c.onColorTilesClick=function(L$a){this.selectedColor=this.getColorByMouse(),this.close()},L$c.onColorTilesMouseMove=function(L$a){this._colorInput.focus=!1;var L$b=this.getColorByMouse();this._colorInput.text=L$b,this.drawBlock(L$b)},L$c.getColorByMouse=function(){var L$a=this._colorTiles.getMousePoint(),L$b=Math.floor(L$a.x/this._gridSize),L$c=Math.floor(L$a.y/this._gridSize);return this._colors[20*L$c+L$b]},L$c.drawBlock=function(L$a){var L$b=this._colorBlock.graphics;L$b.clear();var L$c=L$a||"#ffffff";L$b.drawRect(0,0,50,20,L$c,this._borderColor),L$a||L$b.drawLine(0,0,50,20,"#ff0000")},L$c.changeColor=function(){var L$a=this.graphics;L$a.clear();var L$b=this._selectedColor||"#000000";L$a.drawRect(0,0,this._colorButton.width,this._colorButton.height,L$b)},L$c._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},L$g(0,L$c,"inputBgColor",function(){return this._inputBgColor},function(L$a){this._inputBgColor=L$a,this._setPanelChanged()}),L$g(0,L$c,"selectedColor",function(){return this._selectedColor},function(L$a){this._selectedColor!=L$a&&(this._selectedColor=this._colorInput.text=L$a,this.drawBlock(L$a),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",L$j.EMPTY.setTo("change",this,this)))}),L$g(0,L$c,"skin",function(){return this._colorButton.skin},function(L$a){this._colorButton.skin=L$a,this.changeColor()}),L$g(0,L$c,"bgColor",function(){return this._bgColor},function(L$a){this._bgColor=L$a,this._setPanelChanged()}),L$g(0,L$c,"borderColor",function(){return this._borderColor},function(L$a){this._borderColor=L$a,this._setPanelChanged()}),L$g(0,L$c,"inputColor",function(){return this._inputColor},function(L$a){this._inputColor=L$a,this._setPanelChanged()}),L$a}(L$H),L$N=function(L$b){function L$c(L$a,L$b){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this._isCustomList=!1,this.itemRender=null,L$c.__super.call(this),this._itemColors=L$D.comboBoxItemColors,this.skin=L$a,this.labels=L$b}L$f(L$c,"laya.ui.ComboBox",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._button&&this._button.destroy(L$a),this._list&&this._list.destroy(L$a),this._button=null,this._list=null,this._itemColors=null,this._labels=null,this._selectHandler=null},L$a.createChildren=function(){this.addChild(this._button=new L$K),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},L$a._createList=function(){this._list=new L$X,this._scrollBarSkin&&(this._list.vScrollBarSkin=this._scrollBarSkin),this._setListEvent(this._list)},L$a._setListEvent=function(L$a){this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=L$m.create(this,this.onlistItemMouse,null,!1),this._list.scrollBar&&this._list.scrollBar.on("mousedown",this,this.onScrollBarDown)},L$a.onListDown=function(L$a){L$a.stopPropagation()},L$a.onScrollBarDown=function(L$a){L$a.stopPropagation()},L$a.onButtonMouseDown=function(L$a){this.callLater(this.switchTo,[!this._isOpen])},L$a.changeList=function(){this._listChanged=!1;var L$a=this.width-2,L$b=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:L$a,height:this._itemHeight,fontSize:this._itemSize,color:L$b}}]},this._list.repeatY=this._visibleNum,this._list.refresh()},L$a.onlistItemMouse=function(L$a,L$b){var L$c=L$a.type;if("mouseover"===L$c||"mouseout"===L$c){if(this._isCustomList)return;var L$d=this._list.getCell(L$b);if(!L$d)return;var L$e=L$d.getChildByName("label");L$e&&("mouseover"===L$c?(L$e.bgColor=this._itemColors[0],L$e.color=this._itemColors[1]):(L$e.bgColor=null,L$e.color=this._itemColors[2]))}else"click"===L$c&&(this.selectedIndex=L$b,this.isOpen=!1)},L$a.switchTo=function(L$a){this.isOpen=L$a},L$a.changeOpen=function(){this.isOpen=!this._isOpen},L$a.changeItem=function(){if(this._itemChanged=!1,this._listHeight=0<this._labels.length?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,!this._isCustomList){var L$a=this._list.graphics;L$a.clear(),L$a.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3])}for(var L$b=this._list.array||[],L$c=L$b.length=0,L$d=this._labels.length;L$c<L$d;L$c++)L$b.push({label:this._labels[L$c]});this._list.height=this._listHeight,this._list.array=L$b},L$a.changeSelected=function(){this._button.label=this.selectedLabel},L$a._onStageMouseWheel=function(L$a){this._list&&!this._list.contains(L$a.target)&&this.removeList(null)},L$a.removeList=function(L$a){L$p.stage.off("mousedown",this,this.removeList),L$p.stage.off("mousewheel",this,this._onStageMouseWheel),this.isOpen=!1},L$g(0,L$a,"selectedIndex",function(){return this._selectedIndex},function(L$a){this._selectedIndex!=L$a&&(this._selectedIndex=L$a,0<this._labels.length?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[L$j.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),L$g(0,L$a,"measureHeight",function(){return this._button.height}),L$g(0,L$a,"skin",function(){return this._button.skin},function(L$a){this._button.skin!=L$a&&(this._button.skin=L$a,this._listChanged=!0)}),L$g(0,L$a,"measureWidth",function(){return this._button.width}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$H,this,"width",L$a),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),L$g(0,L$a,"selectedLabel",function(){return-1<this._selectedIndex&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(L$a){this.selectedIndex=this._labels.indexOf(L$a)}),L$g(0,L$a,"labels",function(){return this._labels.join(",")},function(L$a){0<this._labels.length&&(this.selectedIndex=-1),L$a?this._labels=L$a.split(","):this._labels.length=0,this._itemChanged=!0}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$H,this,"height",L$a),this._button.height=this._height}),L$g(0,L$a,"selectHandler",function(){return this._selectHandler},function(L$a){this._selectHandler=L$a}),L$g(0,L$a,"visibleNum",function(){return this._visibleNum},function(L$a){this._visibleNum=L$a,this._listChanged=!0}),L$g(0,L$a,"labelBold",function(){return this._button.text.bold},function(L$a){this._button.text.bold=L$a}),L$g(0,L$a,"itemColors",function(){return String(this._itemColors)},function(L$a){this._itemColors=L$E.fillArray(this._itemColors,L$a,String),this._listChanged=!0}),L$g(0,L$a,"itemSize",function(){return this._itemSize},function(L$a){this._itemSize=L$a,this._listChanged=!0}),L$g(0,L$a,"scrollBar",function(){return this.list.scrollBar}),L$g(0,L$a,"isOpen",function(){return this._isOpen},function(L$a){if(this._isOpen!=L$a)if(this._isOpen=L$a,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&!this._isCustomList&&this.changeList(),this._itemChanged&&this.changeItem();var L$b=this.localToGlobal(L$o.TEMP.setTo(0,0)),L$c=L$b.y+this._button.height;L$c=L$c+this._listHeight<=L$p.stage.height?L$c:L$b.y-this._listHeight,this._list.pos(L$b.x,L$c),this._list.zOrder=1001,L$p._currentStage.addChild(this._list),L$p.stage.once("mousedown",this,this.removeList),L$p.stage.on("mousewheel",this,this._onStageMouseWheel),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),L$g(0,L$a,"scrollBarSkin",function(){return this._scrollBarSkin},function(L$a){this._scrollBarSkin=L$a}),L$g(0,L$a,"sizeGrid",function(){return this._button.sizeGrid},function(L$a){this._button.sizeGrid=L$a}),L$g(0,L$a,"button",function(){return this._button}),L$g(0,L$a,"list",function(){return this._list||this._createList(),this._list},function(L$a){L$a&&(L$a.removeSelf(),this._isCustomList=!0,this._list=L$a,this._setListEvent(L$a),this._itemHeight=L$a.getCell(0).height+L$a.spaceY)}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)&&Math.floor(L$a)==L$a||"string"==typeof L$a?this.selectedIndex=parseInt(L$a):L$a instanceof Array?this.labels=L$a.join(","):L$p.superSet(L$H,this,"dataSource",L$a)}),L$g(0,L$a,"labelColors",function(){return this._button.labelColors},function(L$a){this._button.labelColors!=L$a&&(this._button.labelColors=L$a)}),L$g(0,L$a,"labelPadding",function(){return this._button.text.padding.join(",")},function(L$a){this._button.text.padding=L$E.fillArray(L$D.labelPadding,L$a,Number)}),L$g(0,L$a,"labelSize",function(){return this._button.text.fontSize},function(L$a){this._button.text.fontSize=L$a}),L$g(0,L$a,"labelFont",function(){return this._button.text.font},function(L$a){this._button.text.font=L$a}),L$g(0,L$a,"stateNum",function(){return this._button.stateNum},function(L$a){this._button.stateNum=L$a}),L$c}(L$H),L$O=function(L$b){function L$c(L$a){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,L$c.__super.call(this),this._showButtons=L$F.showButtons,this._touchScrollEnable=L$F.touchScrollEnable,this._mouseWheelEnable=L$F.mouseWheelEnable,this.skin=L$a,this.max=1}L$f(L$c,"laya.ui.ScrollBar",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),this.stopScroll(),this.target=null,L$b.prototype.destroy.call(this,L$a),this.upButton&&this.upButton.destroy(L$a),this.downButton&&this.downButton.destroy(L$a),this.slider&&this.slider.destroy(L$a),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},L$a.createChildren=function(){this.addChild(this.slider=new L$P),this.addChild(this.upButton=new L$K),this.addChild(this.downButton=new L$K)},L$a.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},L$a.onSliderChange=function(){this._value!=this.slider.value&&(this.value=this.slider.value)},L$a.onButtonMouseDown=function(L$a){var L$b=L$a.currentTarget===this.upButton;this.slide(L$b),L$p.timer.once(L$D.scrollBarDelayTime,this,this.startLoop,[L$b]),L$p.stage.once("mouseup",this,this.onStageMouseUp)},L$a.startLoop=function(L$a){L$p.timer.frameLoop(1,this,this.slide,[L$a])},L$a.slide=function(L$a){L$a?this.value-=this._scrollSize:this.value+=this._scrollSize},L$a.onStageMouseUp=function(L$a){L$p.timer.clear(this,this.startLoop),L$p.timer.clear(this,this.slide)},L$a.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions(),this.repaint()},L$a.changeSize=function(){L$b.prototype.changeSize.call(this),this.repaint(),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},L$a.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},L$a.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},L$a.setScroll=function(L$a,L$b,L$c){this.runCallLater(this.changeSize),this.slider.setSlider(L$a,L$b,L$c),this.slider.bar.visible=0<L$b,!this._hide&&this.autoHide&&(this.visible=!1)},L$a.onTargetMouseWheel=function(L$a){this.value-=L$a.delta*this._scrollSize,this.target=this._target},L$a.onTargetMouseDown=function(L$a){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new L$o),this._lastPoint.setTo(L$p.stage.mouseX,L$p.stage.mouseY),L$p.timer.clear(this,this.tweenMove),L$z.clearTween(this),L$p.stage.once("mouseup",this,this.onStageMouseUp2),L$p.stage.once("mouseout",this,this.onStageMouseUp2),L$p.timer.frameLoop(1,this,this.loop)},L$a.loop=function(){var L$a=L$p.stage.mouseY,L$b=L$p.stage.mouseX;if(this._lastOffset=this.isVertical?L$a-this._lastPoint.y:L$b-this._lastPoint.x,this._clickOnly){if(!(1<Math.abs(this._lastOffset*(this.isVertical?L$p.stage._canvasTransform.getScaleY():L$p.stage._canvasTransform.getScaleX()))))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=L$b,this._lastPoint.y=L$a,0!==this._lastOffset&&(this._checkElastic||(0<this.elasticDistance?this._checkElastic||0==this._lastOffset||(0<this._lastOffset&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?(this._isElastic=!0,this._checkElastic=!0):this._isElastic=!1):this._checkElastic=!0),this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset)},L$a.onStageMouseUp2=function(L$a){if(L$p.stage.off("mouseup",this,this.onStageMouseUp2),L$p.stage.off("mouseout",this,this.onStageMouseUp2),L$p.timer.clear(this,this.loop),!(this._clickOnly&&this._value>=this.min&&this._value<=this.max))if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?L$z.to(this,{value:this.min},this.elasticBackTime,L$i.sineOut,L$m.create(this,this.elasticOver)):this._value>this.max&&L$z.to(this,{value:this.max},this.elasticBackTime,L$i.sineOut,L$m.create(this,this.elasticOver));else{if(!this._offsets)return;this._offsets.length<1&&(this._offsets[0]=this.isVertical?L$p.stage.mouseY-this._lastPoint.y:L$p.stage.mouseX-this._lastPoint.x);for(var L$b=0,L$c=Math.min(this._offsets.length,3),L$d=0;L$d<L$c;L$d++)L$b+=this._offsets[this._offsets.length-1-L$d];if(this._lastOffset=L$b/L$c,(L$b=Math.abs(this._lastOffset))<2)return void this.event("end");60<L$b&&(this._lastOffset=0<this._lastOffset?60:-60);var L$e=Math.round(Math.abs(this.elasticDistance*(this._lastOffset/240)));L$p.timer.frameLoop(1,this,this.tweenMove,[L$e])}},L$a.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&L$z.to(this,{alpha:0},500),this.event("end")},L$a.tweenMove=function(L$a){this._lastOffset*=this.rollRatio;var L$b=NaN;if(0<L$a&&(0<this._lastOffset&&this.value<=this.min?(this._isElastic=!0,L$b=.5*-(this.min-L$a-this.value),this._lastOffset>L$b&&(this._lastOffset=L$b)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,L$b=.5*-(this.max+L$a-this.value),this._lastOffset<L$b&&(this._lastOffset=L$b))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(L$p.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?L$z.to(this,{value:this.min},this.elasticBackTime,L$i.sineOut,L$m.create(this,this.elasticOver)):this._value>this.max?L$z.to(this,{value:this.max},this.elasticBackTime,L$i.sineOut,L$m.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&L$z.to(this,{alpha:0},500)}},L$a.stopScroll=function(){this.onStageMouseUp2(null),L$p.timer.clear(this,this.tweenMove),L$z.clearTween(this)},L$g(0,L$a,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),L$g(0,L$a,"skin",function(){return this._skin},function(L$a){this._skin!=L$a&&(this._skin=L$a,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),L$g(0,L$a,"max",function(){return this.slider.max},function(L$a){this.slider.max=L$a}),L$g(0,L$a,"showButtons",function(){return this._showButtons},function(L$a){this._showButtons=L$a,this.callLater(this.changeScrollBar)}),L$g(0,L$a,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),L$g(0,L$a,"min",function(){return this.slider.min},function(L$a){this.slider.min=L$a}),L$g(0,L$a,"value",function(){return this._value},function(L$a){L$a!==this._value&&(this._value=L$a,this._isElastic||(this.slider._value!=L$a&&(this.slider._value=L$a,this.slider.changeValue()),this._value=this.slider._value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this._value))}),L$g(0,L$a,"isVertical",function(){return this.slider.isVertical},function(L$a){this.slider.isVertical=L$a}),L$g(0,L$a,"sizeGrid",function(){return this.slider.sizeGrid},function(L$a){this.slider.sizeGrid=L$a}),L$g(0,L$a,"scrollSize",function(){return this._scrollSize},function(L$a){this._scrollSize=L$a}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)||"string"==typeof L$a?this.value=Number(L$a):L$p.superSet(L$H,this,"dataSource",L$a)}),L$g(0,L$a,"thumbPercent",function(){return this._thumbPercent},function(L$a){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),L$a=1<=L$a?.99:L$a,this._thumbPercent=L$a,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*L$a,L$D.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*L$a,L$D.scrollBarMinNum))}),L$g(0,L$a,"target",function(){return this._target},function(L$a){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),(this._target=L$a)&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),L$g(0,L$a,"hide",function(){return this._hide},function(L$a){this._hide=L$a,this.visible=!L$a}),L$g(0,L$a,"touchScrollEnable",function(){return this._touchScrollEnable},function(L$a){this._touchScrollEnable=L$a,this.target=this._target}),L$g(0,L$a,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(L$a){this._mouseWheelEnable=L$a,this.target=this._target}),L$g(0,L$a,"tick",function(){return this.slider.tick},function(L$a){this.slider.tick=L$a}),L$c}(L$H),L$P=function(L$b){function L$c(L$a){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._progress=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,L$c.__super.call(this),this.skin=L$a}L$f(L$c,"laya.ui.Slider",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._bg&&this._bg.destroy(L$a),this._bar&&this._bar.destroy(L$a),this._progress&&this._progress.destroy(L$a),this._bg=null,this._bar=null,this._progress=null,this.changeHandler=null},L$a.createChildren=function(){this.addChild(this._bg=new L$Q),this.addChild(this._bar=new L$K)},L$a.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid),this.allowClickBack=!0},L$a.onBarMouseDown=function(L$a){this._globalSacle||(this._globalSacle=new L$o),this._globalSacle.setTo(this.globalScaleX||.01,this.globalScaleY||.01),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=L$p.stage.mouseX,this._ty=L$p.stage.mouseY,L$p.stage.on("mousemove",this,this.mouseMove),L$p.stage.once("mouseup",this,this.mouseUp),L$p.stage.once("mouseout",this,this.mouseUp),this.showValueText()},L$a.showValueText=function(){if(this.showLabel){var L$a=laya.ui.Slider.label;this.addChild(L$a),L$a.textField.changeText(this._value+""),this.isVertical?(L$a.x=this._bar.x+20,L$a.y=.5*(this._bar.height-L$a.height)+this._bar.y):(L$a.y=this._bar.y-20,L$a.x=.5*(this._bar.width-L$a.width)+this._bar.x)}},L$a.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},L$a.mouseUp=function(L$a){L$p.stage.off("mousemove",this,this.mouseMove),L$p.stage.off("mouseup",this,this.mouseUp),L$p.stage.off("mouseout",this,this.mouseUp),this.sendChangeEvent("changed"),this.hideValueText()},L$a.mouseMove=function(L$a){var L$b=this._value;this.isVertical?(this._bar.y+=(L$p.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x+=(L$p.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min,this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width)),this._tx=L$p.stage.mouseX,this._ty=L$p.stage.mouseY;var L$c=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*L$c)/L$c,this._value!=L$b&&this.sendChangeEvent(),this.showValueText()},L$a.sendChangeEvent=function(L$a){void 0===L$a&&(L$a="change"),this.event(L$a),this.changeHandler&&this.changeHandler.runWith(this._value)},L$a.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},L$a.changeSize=function(){L$b.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},L$a.setSlider=function(L$a,L$b,L$c){this._value=-1,this._min=L$a,this._max=L$a<L$b?L$b:L$a,this.value=L$c<L$a?L$a:L$b<L$c?L$b:L$c},L$a.changeValue=function(){var L$a=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*L$a)/L$a,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var L$b=this._max-this._min;0===L$b&&(L$b=1),this.isVertical?(this._bar.y=(this._value-this._min)/L$b*(this.height-this._bar.height),this._progress&&(this._progress.height=this._bar.y+.5*this._bar.height)):(this._bar.x=(this._value-this._min)/L$b*(this.width-this._bar.width),this._progress&&(this._progress.width=this._bar.x+.5*this._bar.width))},L$a.onBgMouseDown=function(L$a){var L$b=this._bg.getMousePoint();this.isVertical?this.value=L$b.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=L$b.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},L$g(0,L$a,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),L$g(0,L$a,"skin",function(){return this._skin},function(L$a){if(this._skin!=L$a){this._skin=L$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png");var L$b=this._skin.replace(".png","$progress.png");L$s.getRes(L$b)&&(this._progress||(this.addChild(this._progress=new L$Q),this._progress.sizeGrid=this._bar.sizeGrid,this.setChildIndex(this._progress,1)),this._progress.skin=L$b),this.setBarPoint(),this.callLater(this.changeValue)}}),L$g(0,L$a,"allowClickBack",function(){return this._allowClickBack},function(L$a){this._allowClickBack!=L$a&&((this._allowClickBack=L$a)?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),L$g(0,L$a,"max",function(){return this._max},function(L$a){this._max!=L$a&&(this._max=L$a,this.callLater(this.changeValue))}),L$g(0,L$a,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),L$g(0,L$a,"tick",function(){return this._tick},function(L$a){this._tick!=L$a&&(this._tick=L$a,this.callLater(this.changeValue))}),L$g(0,L$a,"sizeGrid",function(){return this._bg.sizeGrid},function(L$a){this._bg.sizeGrid=L$a,this._bar.sizeGrid=L$a,this._progress&&(this._progress.sizeGrid=this._bar.sizeGrid)}),L$g(0,L$a,"min",function(){return this._min},function(L$a){this._min!=L$a&&(this._min=L$a,this.callLater(this.changeValue))}),L$g(0,L$a,"value",function(){return this._value},function(L$a){if(this._value!=L$a){var L$b=this._value;this._value=L$a,this.changeValue(),this._value!=L$b&&this.sendChangeEvent()}}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)||"string"==typeof L$a?this.value=Number(L$a):L$p.superSet(L$H,this,"dataSource",L$a)}),L$g(0,L$a,"bar",function(){return this._bar}),L$d(L$c,["label",function(){return this.label=new L$R}]),L$c}(L$H),L$Q=function(L$b){function L$c(L$a){this._bitmap=null,this._skin=null,this._group=null,this._complete=null,this._progress=null,L$c.__super.call(this),this.skin=L$a}L$f(L$c,"laya.ui.Image",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,!0),this.clearLoad(),this.clearEvent(),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,L$s.clearCache(this,this._skin)},L$a.dispose=function(){this.destroy(!0),L$s.clearCache(this,this._skin),this.clearEvent()},L$a.createChildren=function(){this.graphics=this._bitmap=new L$G},L$a.setSource=function(L$a,L$b){L$a===this._skin&&L$b&&(this.source=L$b,this.onCompResize(),this.clearEvent())},L$a.clearEvent=function(){this._skin&&L$e.atalsNotify&&L$e.atalsNotify.off(this._skin,this,this.setSource)},L$a.clearLoad=function(){this._skin&&((this._complete||this._progress)&&L$p.loader.cancel(this._skin,this._complete,this._progress),this._complete=this._progress=null)},L$g(0,L$a,"source",function(){return this._bitmap.source},function(L$a){this._bitmap&&(this._bitmap.source=L$a,this.event("loaded"),this.repaint())}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"string"==typeof(this._dataSource=L$a)?this.skin=L$a:L$p.superSet(L$H,this,"dataSource",L$a)}),L$g(0,L$a,"measureHeight",function(){return this._bitmap.height}),L$g(0,L$a,"skin",function(){return this._skin},function(L$a){if(this._skin!=L$a)if(L$s.clearCache(this,this._skin),this.clearEvent(),this.clearLoad(),this._skin=L$a){L$s.keepCache(this,this._skin);var L$b=L$s.getRes(L$a),L$c=L$e.resAtalsObj&&L$e.resAtalsObj[this._skin];L$b?(this.source=L$b,this.onCompResize()):L$c?(L$e.atalsNotify&&L$e.atalsNotify.once(this._skin,this,this.setSource),0==this.width&&(this.width=L$c.sourceW),0==this.height&&(this.height=L$c.sourceH)):(this._complete=L$m.create(this,this.setSource,[this._skin]),this._progress=null,L$p.loader.load(this._skin,this._complete,this._progress,"image",1,!0,this._group))}else this.source=null}),L$g(0,L$a,"group",function(){return this._group},function(L$a){L$a&&this._skin&&L$s.setGroup(this._skin,L$a),this._group=L$a}),L$g(0,L$a,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(L$a){this._bitmap.sizeGrid=L$E.fillArray(L$D.defaultSizeGrid,L$a,Number)}),L$g(0,L$a,"measureWidth",function(){return this._bitmap.width}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$H,this,"width",L$a),this._bitmap.width=0==L$a?1e-7:L$a}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$H,this,"height",L$a),this._bitmap.height=0==L$a?1e-7:L$a}),L$c}(L$H),L$R=function(L$b){function L$c(L$a){this._tf=null,L$c.__super.call(this),void 0===L$a&&(L$a=""),L$k.defaultColor=L$D.labelColor,this.text=L$a}L$f(L$c,"laya.ui.Label",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._tf=null},L$a.createChildren=function(){this.addChild(this._tf=new L$v)},L$a.changeText=function(L$a){this._tf.changeText(L$a)},L$g(0,L$a,"padding",function(){return this._tf.padding.join(",")},function(L$a){this._tf.padding=L$E.fillArray(L$D.labelPadding,L$a,Number)}),L$g(0,L$a,"bold",function(){return this._tf.bold},function(L$a){this._tf.bold=L$a}),L$g(0,L$a,"align",function(){return this._tf.align},function(L$a){this._tf.align=L$a}),L$g(0,L$a,"text",function(){return this._tf.text},function(L$a){this._tf.text!=L$a&&(L$a&&(L$a=L$E.adptString(L$a+"")),this._tf.text=L$a,this.event("change"),this._width&&this._height||this.onCompResize())}),L$g(0,L$a,"italic",function(){return this._tf.italic},function(L$a){this._tf.italic=L$a}),L$g(0,L$a,"wordWrap",function(){return this._tf.wordWrap},function(L$a){this._tf.wordWrap=L$a}),L$g(0,L$a,"font",function(){return this._tf.font},function(L$a){this._tf.font=L$a}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)||"string"==typeof L$a?this.text=L$a+"":L$p.superSet(L$H,this,"dataSource",L$a)}),L$g(0,L$a,"color",function(){return this._tf.color},function(L$a){this._tf.color=L$a}),L$g(0,L$a,"valign",function(){return this._tf.valign},function(L$a){this._tf.valign=L$a}),L$g(0,L$a,"leading",function(){return this._tf.leading},function(L$a){this._tf.leading=L$a}),L$g(0,L$a,"fontSize",function(){return this._tf.fontSize},function(L$a){this._tf.fontSize=L$a}),L$g(0,L$a,"bgColor",function(){return this._tf.bgColor},function(L$a){this._tf.bgColor=L$a}),L$g(0,L$a,"borderColor",function(){return this._tf.borderColor},function(L$a){this._tf.borderColor=L$a}),L$g(0,L$a,"stroke",function(){return this._tf.stroke},function(L$a){this._tf.stroke=L$a}),L$g(0,L$a,"strokeColor",function(){return this._tf.strokeColor},function(L$a){this._tf.strokeColor=L$a}),L$g(0,L$a,"textField",function(){return this._tf}),L$g(0,L$a,"measureWidth",function(){return this._tf.width}),L$g(0,L$a,"measureHeight",function(){return this._tf.height}),L$g(0,L$a,"width",function(){return this._width||this._tf.text?L$p.superGet(L$H,this,"width"):0},function(L$a){L$p.superSet(L$H,this,"width",L$a),this._tf.width=L$a}),L$g(0,L$a,"height",function(){return this._height||this._tf.text?L$p.superGet(L$H,this,"height"):0},function(L$a){L$p.superSet(L$H,this,"height",L$a),this._tf.height=L$a}),L$g(0,L$a,"overflow",function(){return this._tf.overflow},function(L$a){this._tf.overflow=L$a}),L$g(0,L$a,"underline",function(){return this._tf.underline},function(L$a){this._tf.underline=L$a}),L$g(0,L$a,"underlineColor",function(){return this._tf.underlineColor},function(L$a){this._tf.underlineColor=L$a}),L$c}(L$H),L$S=function(L$b){function L$c(L$a){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,L$c.__super.call(this),this.skin=L$a}L$f(L$c,"laya.ui.ProgressBar",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._bg&&this._bg.destroy(L$a),this._bar&&this._bar.destroy(L$a),this._bg=this._bar=null,this.changeHandler=null},L$a.createChildren=function(){this.addChild(this._bg=new L$Q),this.addChild(this._bar=new L$Q)},L$a.changeValue=function(){if(this.sizeGrid){var L$a=this.sizeGrid.split(","),L$b=Number(L$a[3]),L$c=Number(L$a[1]),L$d=(this.width-L$b-L$c)*this._value;this._bar.width=L$b+L$c+L$d,this._bar.visible=this._bar.width>L$b+L$c}else this._bar.width=this.width*this._value},L$g(0,L$a,"measureHeight",function(){return this._bg.height}),L$g(0,L$a,"skin",function(){return this._skin},function(L$a){this._skin!=L$a&&(this._skin=L$a,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),L$g(0,L$a,"measureWidth",function(){return this._bg.width}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$H,this,"height",L$a),this._bg.height=this._height,this._bar.height=this._height}),L$g(0,L$a,"bar",function(){return this._bar}),L$g(0,L$a,"value",function(){return this._value},function(L$a){this._value!=L$a&&(L$a=1<L$a?1:L$a<0?0:L$a,this._value=L$a,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(L$a))}),L$g(0,L$a,"bg",function(){return this._bg}),L$g(0,L$a,"sizeGrid",function(){return this._bg.sizeGrid},function(L$a){this._bg.sizeGrid=this._bar.sizeGrid=L$a}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$H,this,"width",L$a),this._bg.width=this._width,this.callLater(this.changeValue)}),L$g(0,L$a,"dataSource",L$b.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)||"string"==typeof L$a?this.value=Number(L$a):L$p.superSet(L$H,this,"dataSource",L$a)}),L$c}(L$H),L$T=(function(L$a){function L$c(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,L$c.__super.call(this),this._tipBox=new L$H,this._tipBox.addChild(this._tipText=new L$v),this._tipText.x=this._tipText.y=5,this._tipText.color=L$c.tipTextColor,this._defaultTipHandler=this._showDefaultTip,L$p.stage.on("showtip",this,this._onStageShowTip),L$p.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}L$f(L$c,"laya.ui.TipManager",L$H);var L$b=L$c.prototype;L$b._onStageHideTip=function(L$a){L$p.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},L$b._onStageShowTip=function(L$a){L$p.timer.once(L$c.tipDelay,this,this._showTip,[L$a],!0)},L$b._showTip=function(L$a){if("string"==typeof L$a){var L$b=String(L$a);Boolean(L$b)&&this._defaultTipHandler(L$b)}else L$a instanceof laya.utils.Handler?L$a.run():"function"==typeof L$a&&L$a.apply();L$p.stage.on("mousemove",this,this._onStageMouseMove),L$p.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},L$b._onStageMouseDown=function(L$a){this.closeAll()},L$b._onStageMouseMove=function(L$a){this._showToStage(this,L$c.offsetX,L$c.offsetY)},L$b._showToStage=function(L$a,L$b,L$c){void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0);var L$d=L$a.getBounds();L$a.x=L$p.stage.mouseX+L$b,L$a.y=L$p.stage.mouseY+L$c,L$a.x+L$d.width>L$p.stage.width&&(L$a.x-=L$d.width+L$b),L$a.y+L$d.height>L$p.stage.height&&(L$a.y-=L$d.height+L$c)},L$b.closeAll=function(){L$p.timer.clear(this,this._showTip),L$p.stage.off("mousemove",this,this._onStageMouseMove),L$p.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},L$b.showDislayTip=function(L$a){this.addChild(L$a),this._showToStage(this),L$p._currentStage.addChild(this)},L$b._showDefaultTip=function(L$a){this._tipText.text=L$a;var L$b=this._tipBox.graphics;L$b.clear(),L$b.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,L$c.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),L$p._currentStage.addChild(this)},L$g(0,L$b,"defaultTipHandler",function(){return this._defaultTipHandler},function(L$a){this._defaultTipHandler=L$a}),L$c.offsetX=10,L$c.offsetY=15,L$c.tipTextColor="#ffffff",L$c.tipBackColor="#111111",L$c.tipDelay=200}(),function(L$a){var L$n;function L$o(){this._idMap=null,this._aniList=null,this._watchMap={},L$o.__super.call(this)}L$f(L$o,"laya.ui.View",L$J);var L$b=L$o.prototype;return L$b.createView=function(L$a){if(L$a.animations&&!this._idMap&&(this._idMap={}),L$o.createComp(L$a,this,this),L$a.animations){var L$b,L$c,L$d=[],L$e=L$a.animations,L$f=0,L$g=L$e.length;for(L$f=0;L$f<L$g;L$f++){switch(L$b=new L$l,L$c=L$e[L$f],L$b._setUp(this._idMap,L$c),(this[L$c.name]=L$b)._setControlNode(this),L$c.action){case 1:L$b.play(0,!1);break;case 2:L$b.play(0,!0)}L$d.push(L$b)}this._aniList=L$d}0<this._width&&null==L$a.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},L$b.onEvent=function(L$a,L$b){},L$b.loadUI=function(L$a){var L$b=L$o.uiMap[L$a];L$b&&this.createView(L$b)},L$b.destroy=function(L$a){void 0===L$a&&(L$a=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,this._watchMap=null,laya.ui.Component.prototype.destroy.call(this,L$a)},L$b.changeData=function(L$a){var L$b=this._watchMap[L$a];if(L$b){console.log("change",L$a);for(var L$c=0,L$d=L$b.length;L$c<L$d;L$c++){L$b[L$c].exe(this)}}},L$o._regs=function(){for(var L$a in L$o.uiClassMap)L$q.regClass(L$a,L$o.uiClassMap[L$a])},L$o.createComp=function(L$a,L$b,L$c,L$d){if(!(L$b=L$b||L$o.getCompInstance(L$a)))return console.warn("can not create:"+L$a.type),null;var L$e=L$a.child;if(L$e)for(var L$f=L$b instanceof laya.ui.List,L$g=0,L$h=L$e.length;L$g<L$h;L$g++){var L$i=L$e[L$g];if(!L$b.hasOwnProperty("itemRender")||"render"!=L$i.props.name&&"render"!==L$i.props.renderType)if("Graphic"==L$i.type)L$q.addGraphicsToSprite(L$i,L$b);else if(L$q.isDrawType(L$i.type))L$q.addGraphicToSprite(L$i,L$b,!0);else{if(L$f){var L$j=[],L$k=L$o.createComp(L$i,null,L$c,L$j);L$j.length&&(L$k._$bindData=L$j)}else L$k=L$o.createComp(L$i,null,L$c,L$d);"Script"==L$i.type?"owner"in L$k?L$k.owner=L$b:"target"in L$k&&(L$k.target=L$b):"mask"==L$i.props.renderType||"mask"==L$i.props.name?L$b.mask=L$k:L$k instanceof laya.display.Sprite&&L$b.addChild(L$k)}else L$b.itemRender=L$i}var L$l=L$a.props;for(var L$m in L$l){var L$n=L$l[L$m];L$o.eventDic[L$m]?L$n&&L$c&&L$b.on(L$m,L$c,L$c.onEvent,[L$n]):L$o.setCompValue(L$b,L$m,L$n,L$c,L$d)}return L$p.__typeof(L$b,"laya.ui.IItem")&&L$b.initItems(),L$a.compId&&L$c&&L$c._idMap&&(L$c._idMap[L$a.compId]=L$b),L$b},L$o.setCompValue=function(L$a,L$b,L$c,L$d,L$e){if("string"==typeof L$c&&-1<L$c.indexOf("${")){if(L$o._sheet||(L$o._sheet=L$q.getClass("laya.data.Table")),!L$o._sheet)return void console.warn("Can not find class Sheet");if(L$e)L$e.push(L$a,L$b,L$c);else if(L$d){-1==L$c.indexOf("].")&&(L$c=L$c.replace(".","[0]."));var L$f,L$g,L$h=new L$n(L$a,L$b,L$c);L$h.exe(L$d);for(var L$i=L$c.replace(/\[.*?\]\./g,".");null!=(L$f=L$o._parseWatchData.exec(L$i));){for(var L$j=L$f[1];null!=(L$g=L$o._parseKeyWord.exec(L$j));){var L$k=L$g[0],L$l=L$d._watchMap[L$k]||(L$d._watchMap[L$k]=[]);L$l.push(L$h),L$o._sheet.I.notifer.on(L$k,L$d,L$d.changeData,[L$k])}(L$l=L$d._watchMap[L$j]||(L$d._watchMap[L$j]=[])).push(L$h),L$o._sheet.I.notifer.on(L$j,L$d,L$d.changeData,[L$j])}}}else if("var"===L$b&&L$d)L$d[L$c]=L$a;else if("onClick"==L$b){var L$m=L$p._runScript("(function(){"+L$c+"})");L$a.on("click",L$d,L$m)}else L$a[L$b]="true"===L$c||"false"!==L$c&&L$c},L$o.getCompInstance=function(L$a){var L$b,L$c=L$a.props?L$a.props.runtime:null;return L$b=L$c?L$o.viewClassMap[L$c]||L$o.uiClassMap[L$c]||L$p.__classmap[L$c]:L$o.uiClassMap[L$a.type],L$a.props&&L$a.props.hasOwnProperty("renderType")&&"instance"==L$a.props.renderType?L$b.instance:L$b?new L$b:null},L$o.regComponent=function(L$a,L$b){L$o.uiClassMap[L$a]=L$b,L$q.regClass(L$a,L$b)},L$o.regViewRuntime=function(L$a,L$b){L$o.viewClassMap[L$a]=L$b},L$o.uiMap={},L$o.viewClassMap={},L$o._sheet=null,L$d(L$o,["uiClassMap",function(){return this.uiClassMap={ViewStack:L$aa,LinkButton:L$K,TextArea:L$ja,ColorPicker:L$M,Box:L$J,Button:L$K,CheckBox:L$U,Clip:L$L,ComboBox:L$N,Component:L$H,HScrollBar:L$Y,HSlider:L$$,Image:L$Q,Label:L$R,List:L$X,Panel:L$Z,ProgressBar:L$S,Radio:L$w,RadioGroup:L$ha,ScrollBar:L$O,Slider:L$P,Tab:L$ia,TextInput:L$ca,View:L$o,VScrollBar:L$ba,VSlider:L$da,Tree:L$x,HBox:L$fa,VBox:L$ga,Sprite:L$u,Animation:L$c,Text:L$v,FontClip:L$W}},"eventDic",function(){return this.eventDic={mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0,rightmousedown:!0,rightmouseup:!0,rightclick:!0}},"_parseWatchData",function(){return this._parseWatchData=/\${(.*?)}/g},"_parseKeyWord",function(){return this._parseKeyWord=/[a-zA-Z_][a-zA-Z0-9_]*(?:(?:\.[a-zA-Z_][a-zA-Z0-9_]*)+)/g}]),L$o.__init$=function(){L$o._regs(),L$n=function(){function L$a(L$a,L$b,L$c){this.comp=null,this.prop=null,this.value=null,this.comp=L$a,this.prop=L$b,this.value=L$c}return L$f(L$a,""),L$a.prototype.exe=function(L$a){var L$b=L$E.getBindFun(this.value);this.comp[this.prop]=L$b.call(this,L$a)},L$a}()},L$o}()),L$U=function(L$a){function L$c(L$a,L$b){void 0===L$b&&(L$b=""),L$c.__super.call(this,L$a,L$b)}L$f(L$c,"laya.ui.CheckBox",L$a);var L$b=L$c.prototype;return L$b.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},L$b.initialize=function(){L$a.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},L$g(0,L$b,"dataSource",L$a.prototype._$get_dataSource,function(L$a){"boolean"==typeof(this._dataSource=L$a)?this.selected=L$a:"string"==typeof L$a?this.selected="true"===L$a:L$p.superSet(L$K,this,"dataSource",L$a)}),L$c}(L$K),L$V=function(L$a){function L$b(){this._space=0,this._align="none",this._itemChanged=!1,L$b.__super.call(this)}L$f(L$b,"laya.ui.LayoutBox",L$J);var L$c=L$b.prototype;return L$c.addChild=function(L$a){return L$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,L$a)},L$c.onResize=function(L$a){this._setItemChanged()},L$c.addChildAt=function(L$a,L$b){return L$a.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,L$a,L$b)},L$c.removeChild=function(L$a){return L$a.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,L$a)},L$c.removeChildAt=function(L$a){return this.getChildAt(L$a).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,L$a)},L$c.refresh=function(){this._setItemChanged()},L$c.changeItems=function(){this._itemChanged=!1},L$c.sortItem=function(L$a){L$a&&L$a.sort(function(L$a,L$b){return L$a.y-L$b.y})},L$c._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},L$g(0,L$c,"space",function(){return this._space},function(L$a){this._space=L$a,this._setItemChanged()}),L$g(0,L$c,"align",function(){return this._align},function(L$a){this._align=L$a,this._setItemChanged()}),L$b}(),L$W=function(L$b){function L$c(L$a,L$b){this._valueArr=null,this._indexMap=null,this._sheet=null,this._direction="horizontal",this._spaceX=0,this._spaceY=0,this._align="left",this._wordsW=0,this._wordsH=0,L$c.__super.call(this),L$a&&(this.skin=L$a),L$b&&(this.sheet=L$b)}L$f(L$c,"laya.ui.FontClip",L$b);var L$a=L$c.prototype;return L$a.createChildren=function(){this._bitmap=new L$G,this.on("loaded",this,this._onClipLoaded)},L$a._onClipLoaded=function(){this.callLater(this.changeValue)},L$a.changeValue=function(){var L$a;if(this._sources&&(this._valueArr&&(this.graphics.clear(!0),L$a=this._sources[0]))){var L$b="horizontal"===this._direction;L$b?(this._wordsW=this._valueArr.length*(L$a.sourceWidth+this.spaceX),this._wordsH=L$a.sourceHeight):(this._wordsW=L$a.sourceWidth,this._wordsH=(L$a.sourceHeight+this.spaceY)*this._valueArr.length);var L$c=0;if(this._width)switch(this._align){case"center":L$c=.5*(this._width-this._wordsW);break;case"right":L$c=this._width-this._wordsW;break;default:L$c=0}for(var L$d=0,L$e=this._valueArr.length;L$d<L$e;L$d++){var L$f=this._indexMap[this._valueArr.charAt(L$d)];this.sources[L$f]&&(L$a=this.sources[L$f],L$b?this.graphics.drawTexture(L$a,L$c+L$d*(L$a.sourceWidth+this.spaceX),0,L$a.sourceWidth,L$a.sourceHeight):this.graphics.drawTexture(L$a,0+L$c,L$d*(L$a.sourceHeight+this.spaceY),L$a.sourceWidth,L$a.sourceHeight))}this._width||(this.resetLayoutX(),this.callLater(this.changeSize)),this._height||(this.resetLayoutY(),this.callLater(this.changeSize))}},L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),this._valueArr=null,this._indexMap=null,this.graphics.clear(!0),this.removeSelf(),this.off("loaded",this,this._onClipLoaded),L$b.prototype.destroy.call(this,L$a)},L$g(0,L$a,"sheet",function(){return this._sheet},function(L$a){L$a+="";var L$b=(this._sheet=L$a).split(" ");this._clipX=String(L$b[0]).length,this.clipY=L$b.length,this._indexMap={};for(var L$c=0;L$c<this._clipY;L$c++)for(var L$d=L$b[L$c].split(""),L$e=0,L$f=L$d.length;L$e<L$f;L$e++)this._indexMap[L$d[L$e]]=L$c*this._clipX+L$e}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$L,this,"height",L$a),this.callLater(this.changeValue)}),L$g(0,L$a,"direction",function(){return this._direction},function(L$a){this._direction=L$a,this.callLater(this.changeValue)}),L$g(0,L$a,"value",function(){return this._valueArr?this._valueArr:""},function(L$a){L$a+="",this._valueArr=L$a,this.callLater(this.changeValue)}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$L,this,"width",L$a),this.callLater(this.changeValue)}),L$g(0,L$a,"spaceX",function(){return this._spaceX},function(L$a){this._spaceX=L$a,"horizontal"===this._direction&&this.callLater(this.changeValue)}),L$g(0,L$a,"spaceY",function(){return this._spaceY},function(L$a){this._spaceY=L$a,"horizontal"!==this._direction&&this.callLater(this.changeValue)}),L$g(0,L$a,"align",function(){return this._align},function(L$a){this._align=L$a,this.callLater(this.changeValue)}),L$g(0,L$a,"measureWidth",function(){return this._wordsW}),L$g(0,L$a,"measureHeight",function(){return this._wordsH}),L$c}(L$L),L$X=function(L$a){function L$b(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,this._cells=[],this._offset=new L$o,L$b.__super.call(this)}L$f(L$b,"laya.ui.List",L$a);var L$c=L$b.prototype;return L$p.imps(L$c,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),L$c.destroy=function(L$a){void 0===L$a&&(L$a=!0),this._content&&this._content.destroy(L$a),this._scrollBar&&this._scrollBar.destroy(L$a),laya.ui.Component.prototype.destroy.call(this,L$a),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},L$c.createChildren=function(){this.addChild(this._content=new L$J)},L$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=L$p.superGet(L$J,this,"cacheAs")),L$p.superSet(L$J,this,"cacheAs","none"),this._scrollBar.once("end",this,this.onScrollEnd)},L$c.onScrollEnd=function(){L$p.superSet(L$J,this,"cacheAs",this._$P.cacheAs)},L$c._removePreScrollBar=function(){var L$a=this.removeChildByName("scrollBar");L$a&&L$a.destroy(!0)},L$c.changeCells=function(){if(this._cellChanged=!1,this._itemRender){this.scrollBar=this.getChildByName("scrollBar");var L$a=this._getOneCell(),L$b=L$a.width+this._spaceX||1,L$c=L$a.height+this._spaceY||1;0<this._width&&(this._repeatX2=this._isVertical?Math.round(this._width/L$b):Math.ceil(this._width/L$b)),0<this._height&&(this._repeatY2=this._isVertical?Math.ceil(this._height/L$c):Math.round(this._height/L$c));var L$d=this._width?this._width:L$b*this.repeatX-this._spaceX,L$e=this._height?this._height:L$c*this.repeatY-this._spaceY;this._cellSize=this._isVertical?L$c:L$b,this._cellOffset=this._isVertical?L$c*Math.max(this._repeatY2,this._repeatY)-L$e-this._spaceY:L$b*Math.max(this._repeatX2,this._repeatX)-L$d-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=L$e:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=L$d),this.setContentSize(L$d,L$e);var L$f=this._isVertical?this.repeatX:this.repeatY,L$g=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,L$f,L$g),this._createdLine=L$g,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},L$c._getOneCell=function(){if(0===this._cells.length){var L$a=this.createItem();if(this._offset.setTo(L$a.x,L$a.y),this.cacheContent)return L$a;this._cells.push(L$a)}return this._cells[0]},L$c._createItems=function(L$a,L$b,L$c){var L$d=this._content,L$e=this._getOneCell(),L$f=L$e.width+this._spaceX,L$g=L$e.height+this._spaceY;if(this.cacheContent){var L$h=new L$J;L$h.cacheAsBitmap=!0,L$h.pos((this._isVertical?0:L$a)*L$f,(this._isVertical?L$a:0)*L$g),this._content.addChild(L$h),this._content.optimizeScrollRect=!0,L$d=L$h}else{for(var L$i=[],L$j=this._cells.length-1;-1<L$j;L$j--){var L$k=this._cells[L$j];L$k.removeSelf(),L$i.push(L$k)}this._cells.length=0}for(var L$l=L$a;L$l<L$c;L$l++)for(var L$m=0;L$m<L$b;L$m++)(L$e=L$i&&L$i.length?L$i.pop():this.createItem()).x=(this._isVertical?L$m:L$l)*L$f-L$d.x,L$e.y=(this._isVertical?L$l:L$m)*L$g-L$d.y,L$e.name="item"+(L$l*L$b+L$m),L$d.addChild(L$e),this.addCell(L$e)},L$c.createItem=function(){var L$a=[];if("function"==typeof this._itemRender)var L$b=new this._itemRender;else L$b=L$T.createComp(this._itemRender,null,null,L$a);if(0==L$a.length&&L$b._watchMap){var L$c=L$b._watchMap;for(var L$d in L$c)for(var L$e=L$c[L$d],L$f=0;L$f<L$e.length;L$f++){var L$g=L$e[L$f];L$a.push(L$g.comp,L$g.prop,L$g.value)}}return L$a.length&&(L$b._$bindData=L$a),L$b},L$c.addCell=function(L$a){L$a.on("click",this,this.onCellMouse),L$a.on("rightclick",this,this.onCellMouse),L$a.on("mouseover",this,this.onCellMouse),L$a.on("mouseout",this,this.onCellMouse),L$a.on("mousedown",this,this.onCellMouse),L$a.on("mouseup",this,this.onCellMouse),this._cells.push(L$a)},L$c.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;for(var L$a=0,L$b=L$a=0;L$b<1e4;L$b++){var L$c=this.getChildByName("item"+L$b);if(!L$c)break;this.addCell(L$c),L$a++}this.repeatY=L$a}},L$c.setContentSize=function(L$a,L$b){this._content.width=L$a,this._content.height=L$b,(this._scrollBar||0!=this._offset.x||0!=this._offset.y)&&(this._content.scrollRect||(this._content.scrollRect=new L$r),this._content.scrollRect.setTo(-this._offset.x,-this._offset.y,L$a,L$b),this._content.scrollRect=this._content.scrollRect),this.event("resize")},L$c.onCellMouse=function(L$a){"mousedown"===L$a.type&&(this._isMoved=!1);var L$b=L$a.currentTarget,L$c=this._startIndex+this._cells.indexOf(L$b);L$c<0||("click"===L$a.type||"rightclick"===L$a.type?this.selectEnable&&!this._isMoved?this.selectedIndex=L$c:this.changeCellState(L$b,!0,0):"mouseover"!==L$a.type&&"mouseout"!==L$a.type||this._selectedIndex===L$c||this.changeCellState(L$b,"mouseover"===L$a.type,0),this.mouseHandler&&this.mouseHandler.runWith([L$a,L$c]))},L$c.changeCellState=function(L$a,L$b,L$c){var L$d=L$a.getChildByName("selectBox");L$d&&(this.selectEnable=!0,L$d.visible=L$b,L$d.index=L$c)},L$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&this.callLater(this.onScrollBarChange)},L$c.onScrollBarChange=function(L$a){this.runCallLater(this.changeCells);var L$b=this._scrollBar.value,L$c=this._isVertical?this.repeatX:this.repeatY,L$d=this._isVertical?this.repeatY:this.repeatX,L$e=Math.floor(L$b/this._cellSize);if(this.cacheContent)L$g=L$d+1,this._createdLine-L$e<L$g&&(this._createItems(this._createdLine,L$c,this._createdLine+L$g),this.renderItems(this._createdLine*L$c,0),this._createdLine+=L$g);else{var L$f=L$e*L$c,L$g=0;if(L$f>this._startIndex){L$g=L$f-this._startIndex;var L$h=!0,L$i=this._startIndex+L$c*(L$d+1);this._isMoved=!0}else L$f<this._startIndex&&(L$g=this._startIndex-L$f,L$h=!1,L$i=this._startIndex-1,this._isMoved=!0);for(var L$j=0;L$j<L$g;L$j++){if(L$h){var L$k=this._cells.shift();this._cells[this._cells.length]=L$k;var L$l=L$i+L$j}else L$k=this._cells.pop(),this._cells.unshift(L$k),L$l=L$i-L$j;var L$m=Math.floor(L$l/L$c)*this._cellSize;this._isVertical?L$k.y=L$m:L$k.x=L$m,this.renderItem(L$k,L$l)}this._startIndex=L$f,this.changeSelectStatus()}var L$n=this._content.scrollRect;this._isVertical?(L$n.y=L$b-this._offset.y,L$n.x=-this._offset.x):(L$n.y=-this._offset.y,L$n.x=L$b-this._offset.x),this._content.scrollRect=L$n},L$c.posCell=function(L$a,L$b){if(this._scrollBar){var L$c=this._isVertical?this.repeatX:this.repeatY,L$d=(this._isVertical?this.repeatY:this.repeatX,Math.floor(L$b/L$c)*this._cellSize);this._isVertical?L$a.y=L$d:L$a.x=L$d}},L$c.changeSelectStatus=function(){for(var L$a=0,L$b=this._cells.length;L$a<L$b;L$a++)this.changeCellState(this._cells[L$a],this._selectedIndex===this._startIndex+L$a,1)},L$c.renderItems=function(L$a,L$b){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0);for(var L$c=L$a,L$d=L$b||this._cells.length;L$c<L$d;L$c++)this.renderItem(this._cells[L$c],this._startIndex+L$c);this.changeSelectStatus()},L$c.renderItem=function(L$a,L$b){this._array&&0<=L$b&&L$b<this._array.length?(L$a.visible=!0,L$a._$bindData?(L$a._dataSource=this._array[L$b],this._bindData(L$a,this._array[L$b])):L$a.dataSource=this._array[L$b],this.cacheContent||this.posCell(L$a,L$b),this.hasListener("render")&&this.event("render",[L$a,L$b]),this.renderHandler&&this.renderHandler.runWith([L$a,L$b])):(L$a.visible=!1,L$a.dataSource=null)},L$c._bindData=function(L$a,L$b){for(var L$c=L$a._$bindData,L$d=0,L$e=L$c.length;L$d<L$e;L$d++){var L$f=L$c[L$d++],L$g=L$c[L$d++],L$h=L$c[L$d],L$i=L$E.getBindFun(L$h);L$f[L$g]=L$i.call(this,L$b)}},L$c.refresh=function(){this.array=this._array},L$c.getItem=function(L$a){return-1<L$a&&L$a<this._array.length?this._array[L$a]:null},L$c.changeItem=function(L$a,L$b){-1<L$a&&L$a<this._array.length&&(this._array[L$a]=L$b,L$a>=this._startIndex&&L$a<this._startIndex+this._cells.length&&this.renderItem(this.getCell(L$a),L$a))},L$c.setItem=function(L$a,L$b){this.changeItem(L$a,L$b)},L$c.addItem=function(L$a){this._array.push(L$a),this.array=this._array},L$c.addItemAt=function(L$a,L$b){this._array.splice(L$b,0,L$a),this.array=this._array},L$c.deleteItem=function(L$a){this._array.splice(L$a,1),this.array=this._array},L$c.getCell=function(L$a){return this.runCallLater(this.changeCells),-1<L$a&&this._cells?this._cells[(L$a-this._startIndex)%this._cells.length]:null},L$c.scrollTo=function(L$a){if(this._scrollBar){var L$b=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(L$a/L$b)*this._cellSize}else this.startIndex=L$a},L$c.tweenTo=function(L$a,L$b,L$c){if(void 0===L$b&&(L$b=200),this._scrollBar){var L$d=this._isVertical?this.repeatX:this.repeatY;L$z.to(this._scrollBar,{value:Math.floor(L$a/L$d)*this._cellSize},L$b,null,L$c,0,!0)}else this.startIndex=L$a,L$c&&L$c.run()},L$c._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},L$c.commitMeasure=function(){this.runCallLater(this.changeCells)},L$g(0,L$c,"cacheAs",L$a.prototype._$get_cacheAs,function(L$a){L$p.superSet(L$J,this,"cacheAs",L$a),this._scrollBar&&(this._$P.cacheAs=null,"none"!==L$a?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),L$g(0,L$c,"content",function(){return this._content}),L$g(0,L$c,"height",L$a.prototype._$get_height,function(L$a){L$a!=this._height&&(L$p.superSet(L$J,this,"height",L$a),this._setCellChanged())}),L$g(0,L$c,"itemRender",function(){return this._itemRender},function(L$a){if(this._itemRender!=L$a){this._itemRender=L$a;for(var L$b=this._cells.length-1;-1<L$b;L$b--)this._cells[L$b].destroy();this._cells.length=0,this._setCellChanged()}}),L$g(0,L$c,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(L$a){this._removePreScrollBar();var L$b=new L$ba;L$b.name="scrollBar",L$b.right=0,L$a&&" "!=L$a&&(L$b.skin=L$a),this.scrollBar=L$b,this.addChild(L$b),this._setCellChanged()}),L$g(0,L$c,"page",function(){return this._page},function(L$a){this._page=L$a,this._array&&(this._page=0<L$a?L$a:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),L$g(0,L$c,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(L$a){this._removePreScrollBar();var L$b=new L$Y;L$b.name="scrollBar",L$b.bottom=0,L$a&&" "!=L$a&&(L$b.skin=L$a),this.scrollBar=L$b,this.addChild(L$b),this._setCellChanged()}),L$g(0,L$c,"repeatX",function(){return 0<this._repeatX?this._repeatX:0<this._repeatX2?this._repeatX2:1},function(L$a){this._repeatX=L$a,this._setCellChanged()}),L$g(0,L$c,"scrollBar",function(){return this._scrollBar},function(L$a){this._scrollBar!=L$a&&(this._scrollBar=L$a)&&(this._isVertical=this._scrollBar.isVertical,this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange))}),L$g(0,L$c,"width",L$a.prototype._$get_width,function(L$a){L$a!=this._width&&(L$p.superSet(L$J,this,"width",L$a),this._setCellChanged())}),L$g(0,L$c,"repeatY",function(){return 0<this._repeatY?this._repeatY:0<this._repeatY2?this._repeatY2:1},function(L$a){this._repeatY=L$a,this._setCellChanged()}),L$g(0,L$c,"spaceX",function(){return this._spaceX},function(L$a){this._spaceX=L$a,this._setCellChanged()}),L$g(0,L$c,"spaceY",function(){return this._spaceY},function(L$a){this._spaceY=L$a,this._setCellChanged()}),L$g(0,L$c,"selectedIndex",function(){return this._selectedIndex},function(L$a){this._selectedIndex!=L$a&&(this._selectedIndex=L$a,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(L$a),this.startIndex=this._startIndex)}),L$g(0,L$c,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(L$a){this.selectedIndex=this._array.indexOf(L$a)}),L$g(0,L$c,"length",function(){return this._array?this._array.length:0}),L$g(0,L$c,"selection",function(){return this.getCell(this._selectedIndex)},function(L$a){this.selectedIndex=this._startIndex+this._cells.indexOf(L$a)}),L$g(0,L$c,"startIndex",function(){return this._startIndex},function(L$a){this._startIndex=0<L$a?L$a:0,this.callLater(this.renderItems)}),L$g(0,L$c,"array",function(){return this._array},function(L$a){this.runCallLater(this.changeCells),this._array=L$a||[];var L$b=this._array.length;if(this.totalPage=Math.ceil(L$b/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<L$b?this._selectedIndex:L$b-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var L$c=this._isVertical?this.repeatX:this.repeatY,L$d=this._isVertical?this.repeatY:this.repeatX,L$e=Math.ceil(L$b/L$c);1<(0<this._cellOffset?this.totalPage+1:this.totalPage)?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=L$d/L$e,this._scrollBar.setScroll(0,(L$e-L$d)*this._cellSize+this._cellOffset,this._scrollBar.value)):this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content}}),L$g(0,L$c,"dataSource",L$a.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)&&Math.floor(L$a)==L$a||"string"==typeof L$a?this.selectedIndex=parseInt(L$a):L$a instanceof Array?this.array=L$a:L$p.superSet(L$J,this,"dataSource",L$a)}),L$g(0,L$c,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),L$b}(L$J),L$Y=function(L$a){function L$b(){L$b.__super.call(this)}return L$f(L$b,"laya.ui.HScrollBar",L$a),L$b.prototype.initialize=function(){L$a.prototype.initialize.call(this),this.slider.isVertical=!1},L$b}(L$O),L$Z=function(L$a){function L$b(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,L$b.__super.call(this),this.width=this.height=100}L$f(L$b,"laya.ui.Panel",L$a);var L$c=L$b.prototype;return L$c.destroy=function(L$a){void 0===L$a&&(L$a=!0),laya.ui.Component.prototype.destroy.call(this,L$a),this._content&&this._content.destroy(L$a),this._vScrollBar&&this._vScrollBar.destroy(L$a),this._hScrollBar&&this._hScrollBar.destroy(L$a),this._vScrollBar=null,this._hScrollBar=null,this._content=null},L$c.destroyChildren=function(){this._content.destroyChildren()},L$c.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new L$J)},L$c.addChild=function(L$a){return L$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(L$a)},L$c.onResize=function(){this._setScrollChanged()},L$c.addChildAt=function(L$a,L$b){return L$a.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(L$a,L$b)},L$c.removeChild=function(L$a){return L$a.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(L$a)},L$c.removeChildAt=function(L$a){return this.getChildAt(L$a).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(L$a)},L$c.removeChildren=function(L$a,L$b){return void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=2147483647),this._content.removeChildren(L$a,L$b),this._setScrollChanged(),this},L$c.getChildAt=function(L$a){return this._content.getChildAt(L$a)},L$c.getChildByName=function(L$a){return this._content.getChildByName(L$a)},L$c.getChildIndex=function(L$a){return this._content.getChildIndex(L$a)},L$c.changeScroll=function(){this._scrollChanged=!1;var L$a=this.contentWidth||1,L$b=this.contentHeight||1,L$c=this._vScrollBar,L$d=this._hScrollBar,L$e=L$c&&L$b>this._height,L$f=L$d&&L$a>this._width,L$g=L$e?this._width-L$c.width:this._width,L$h=L$f?this._height-L$d.height:this._height;L$c&&(L$c.x=this._width-L$c.width,L$c.y=0,L$c.height=this._height-(L$f?L$d.height:0),L$c.scrollSize=Math.max(.033*this._height,1),L$c.thumbPercent=L$h/L$b,L$c.setScroll(0,L$b-L$h,L$c.value)),L$d&&(L$d.x=0,L$d.y=this._height-L$d.height,L$d.width=this._width-(L$e?L$c.width:0),L$d.scrollSize=Math.max(.033*this._width,1),L$d.thumbPercent=L$g/L$a,L$d.setScroll(0,L$a-L$g,L$d.value))},L$c.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},L$c.setContentSize=function(L$a,L$b){var L$c=this._content;L$c.width=L$a,L$c.height=L$b,L$c.scrollRect||(L$c.scrollRect=new L$r),L$c.scrollRect.setTo(0,0,L$a,L$b),L$c.scrollRect=L$c.scrollRect},L$c.onScrollBarChange=function(L$a){var L$b=this._content.scrollRect;if(L$b){var L$c=Math.round(L$a.value);L$a.isVertical?L$b.y=L$c:L$b.x=L$c,this._content.scrollRect=L$b}},L$c.scrollTo=function(L$a,L$b){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),this.vScrollBar&&(this.vScrollBar.value=L$b),this.hScrollBar&&(this.hScrollBar.value=L$a)},L$c.refresh=function(){this.changeScroll()},L$c.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=L$p.superGet(L$J,this,"cacheAs")),L$p.superSet(L$J,this,"cacheAs","none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},L$c.onScrollEnd=function(){L$p.superSet(L$J,this,"cacheAs",this._$P.cacheAs)},L$c._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},L$g(0,L$c,"numChildren",function(){return this._content.numChildren}),L$g(0,L$c,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(L$a){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new L$Y),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=L$a}),L$g(0,L$c,"contentWidth",function(){for(var L$a=0,L$b=this._content.numChildren-1;-1<L$b;L$b--){var L$c=this._content.getChildAt(L$b);L$a=Math.max(L$c.x+L$c.width*L$c.scaleX,L$a)}return L$a}),L$g(0,L$c,"contentHeight",function(){for(var L$a=0,L$b=this._content.numChildren-1;-1<L$b;L$b--){var L$c=this._content.getChildAt(L$b);L$a=Math.max(L$c.y+L$c.height*L$c.scaleY,L$a)}return L$a}),L$g(0,L$c,"width",L$a.prototype._$get_width,function(L$a){L$p.superSet(L$J,this,"width",L$a),this._setScrollChanged()}),L$g(0,L$c,"hScrollBar",function(){return this._hScrollBar}),L$g(0,L$c,"content",function(){return this._content}),L$g(0,L$c,"height",L$a.prototype._$get_height,function(L$a){L$p.superSet(L$J,this,"height",L$a),this._setScrollChanged()}),L$g(0,L$c,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(L$a){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new L$ba),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=L$a}),L$g(0,L$c,"vScrollBar",function(){return this._vScrollBar}),L$g(0,L$c,"cacheAs",L$a.prototype._$get_cacheAs,function(L$a){L$p.superSet(L$J,this,"cacheAs",L$a),this._$P.cacheAs=null,"none"!==L$a?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),L$b}(L$J),L$$=function(L$a){function L$b(L$a){L$b.__super.call(this,L$a),this.isVertical=!1}return L$f(L$b,"laya.ui.HSlider",L$P),L$b}(),L$_=function(L$a){function L$c(L$a,L$b){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelFont=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,L$c.__super.call(this),this.skin=L$b,this.labels=L$a}L$f(L$c,"laya.ui.UIGroup",L$a);var L$b=L$c.prototype;return L$p.imps(L$b,{"laya.ui.IItem":!0}),L$b.preinitialize=function(){this.mouseEnabled=!0},L$b.destroy=function(L$a){void 0===L$a&&(L$a=!0),laya.ui.Component.prototype.destroy.call(this,L$a),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},L$b.addItem=function(L$a,L$b){void 0===L$b&&(L$b=!0);var L$c=L$a,L$d=this._items.length;if(L$c.name="item"+L$d,this.addChild(L$c),this.initItems(),L$b&&0<L$d){var L$e=this._items[L$d-1];"horizontal"==this._direction?L$c.x=L$e.x+L$e.width+this._space:L$c.y=L$e.y+L$e.height+this._space}else L$b&&(L$c.x=0,L$c.y=0);return L$d},L$b.delItem=function(L$a,L$b){void 0===L$b&&(L$b=!0);var L$c=this._items.indexOf(L$a);if(-1!=L$c){var L$d=L$a;this.removeChild(L$d);for(var L$e=L$c+1,L$f=this._items.length;L$e<L$f;L$e++){var L$g=this._items[L$e];L$g.name="item"+(L$e-1),L$b&&("horizontal"==this._direction?L$g.x-=L$d.width+this._space:L$g.y-=L$d.height+this._space)}if(this.initItems(),-1<this._selectedIndex){var L$h;L$h=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=L$h}}},L$b.initItems=function(){this._items||(this._items=[]);for(var L$a=this._items.length=0;L$a<1e4;L$a++){var L$b=this.getChildByName("item"+L$a);if(null==L$b)break;this._items.push(L$b),L$b.selected=L$a===this._selectedIndex,L$b.clickHandler=L$m.create(this,this.itemClick,[L$a],!1)}},L$b.itemClick=function(L$a){this.selectedIndex=L$a},L$b.setSelect=function(L$a,L$b){this._items&&-1<L$a&&L$a<this._items.length&&(this._items[L$a].selected=L$b)},L$b.createItem=function(L$a,L$b){return null},L$b.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var L$a=0,L$b=0,L$c=this._items.length;L$b<L$c;L$b++){var L$d=this._items[L$b];this._skin&&(L$d.skin=this._skin),this._labelColors&&(L$d.labelColors=this._labelColors),this._labelSize&&(L$d.labelSize=this._labelSize),this._labelStroke&&(L$d.labelStroke=this._labelStroke),this._labelStrokeColor&&(L$d.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(L$d.strokeColors=this._strokeColors),this._labelBold&&(L$d.labelBold=this._labelBold),this._labelPadding&&(L$d.labelPadding=this._labelPadding),this._labelAlign&&(L$d.labelAlign=this._labelAlign),this._stateNum&&(L$d.stateNum=this._stateNum),this._labelFont&&(L$d.labelFont=this._labelFont),"horizontal"===this._direction?(L$d.y=0,L$d.x=L$a,L$a+=L$d.width+this._space):(L$d.x=0,L$d.y=L$a,L$a+=L$d.height+this._space)}this.changeSize()},L$b.commitMeasure=function(){this.runCallLater(this.changeLabels)},L$b._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},L$g(0,L$b,"labelStrokeColor",function(){return this._labelStrokeColor},function(L$a){this._labelStrokeColor!=L$a&&(this._labelStrokeColor=L$a,this._setLabelChanged())}),L$g(0,L$b,"skin",function(){return this._skin},function(L$a){this._skin!=L$a&&(this._skin=L$a,this._setLabelChanged())}),L$g(0,L$b,"selectedIndex",function(){return this._selectedIndex},function(L$a){this._selectedIndex!=L$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=L$a,this.setSelect(L$a,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),L$g(0,L$b,"labels",function(){return this._labels},function(L$a){if(this._labels!=L$a){if(this._labels=L$a,this.removeChildren(),this._setLabelChanged(),this._labels)for(var L$b=this._labels.split(","),L$c=0,L$d=L$b.length;L$c<L$d;L$c++){var L$e=this.createItem(this._skin,L$b[L$c]);L$e.name="item"+L$c,this.addChild(L$e)}this.initItems()}}),L$g(0,L$b,"strokeColors",function(){return this._strokeColors},function(L$a){this._strokeColors!=L$a&&(this._strokeColors=L$a,this._setLabelChanged())}),L$g(0,L$b,"labelColors",function(){return this._labelColors},function(L$a){this._labelColors!=L$a&&(this._labelColors=L$a,this._setLabelChanged())}),L$g(0,L$b,"labelStroke",function(){return this._labelStroke},function(L$a){this._labelStroke!=L$a&&(this._labelStroke=L$a,this._setLabelChanged())}),L$g(0,L$b,"labelSize",function(){return this._labelSize},function(L$a){this._labelSize!=L$a&&(this._labelSize=L$a,this._setLabelChanged())}),L$g(0,L$b,"stateNum",function(){return this._stateNum},function(L$a){this._stateNum!=L$a&&(this._stateNum=L$a,this._setLabelChanged())}),L$g(0,L$b,"labelBold",function(){return this._labelBold},function(L$a){this._labelBold!=L$a&&(this._labelBold=L$a,this._setLabelChanged())}),L$g(0,L$b,"labelFont",function(){return this._labelFont},function(L$a){this._labelFont!=L$a&&(this._labelFont=L$a,this._setLabelChanged())}),L$g(0,L$b,"labelPadding",function(){return this._labelPadding},function(L$a){this._labelPadding!=L$a&&(this._labelPadding=L$a,this._setLabelChanged())}),L$g(0,L$b,"direction",function(){return this._direction},function(L$a){this._direction=L$a,this._setLabelChanged()}),L$g(0,L$b,"space",function(){return this._space},function(L$a){this._space=L$a,this._setLabelChanged()}),L$g(0,L$b,"items",function(){return this._items}),L$g(0,L$b,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(L$a){this.selectedIndex=this._items.indexOf(L$a)}),L$g(0,L$b,"dataSource",L$a.prototype._$get_dataSource,function(L$a){"number"==typeof(this._dataSource=L$a)&&Math.floor(L$a)==L$a||"string"==typeof L$a?this.selectedIndex=parseInt(L$a):L$a instanceof Array?this.labels=L$a.join(","):L$p.superSet(L$J,this,"dataSource",L$a)}),L$c}(L$J),L$w=function(L$b){function L$c(L$a,L$b){this._value=null,void 0===L$b&&(L$b=""),L$c.__super.call(this,L$a,L$b)}L$f(L$c,"laya.ui.Radio",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._value=null},L$a.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},L$a.initialize=function(){L$b.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},L$a.onClick=function(L$a){this.selected=!0},L$g(0,L$a,"value",function(){return null!=this._value?this._value:this.label},function(L$a){this._value=L$a}),L$c}(L$K),L$x=function(L$a){function L$b(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,L$b.__super.call(this),this.width=this.height=200}L$f(L$b,"laya.ui.Tree",L$a);var L$c=L$b.prototype;return L$p.imps(L$c,{"laya.ui.IRender":!0}),L$c.destroy=function(L$a){void 0===L$a&&(L$a=!0),laya.ui.Component.prototype.destroy.call(this,L$a),this._list&&this._list.destroy(L$a),this._list=null,this._source=null,this._renderHandler=null},L$c.createChildren=function(){this.addChild(this._list=new L$X),this._list.renderHandler=L$m.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},L$c.onListChange=function(L$a){this.event("change")},L$c.getArray=function(){var L$a,L$b=[];for(var L$c in this._source)L$a=this._source[L$c],this.getParentOpenStatus(L$a)&&(L$a.x=this._spaceLeft*this.getDepth(L$a),L$b.push(L$a));return L$b},L$c.getDepth=function(L$a,L$b){return void 0===L$b&&(L$b=0),null==L$a.nodeParent?L$b:this.getDepth(L$a.nodeParent,L$b+1)},L$c.getParentOpenStatus=function(L$a){var L$b=L$a.nodeParent;return null==L$b||!!L$b.isOpen&&(null==L$b.nodeParent||this.getParentOpenStatus(L$b))},L$c.renderItem=function(L$a,L$b){var L$c=L$a.dataSource;if(L$c){L$a.left=L$c.x;var L$d=L$a.getChildByName("arrow");L$d&&(L$c.hasChild?(L$d.visible=!0,L$d.index=L$c.isOpen?1:0,L$d.tag=L$b,L$d.off("click",this,this.onArrowClick),L$d.on("click",this,this.onArrowClick)):L$d.visible=!1);var L$e=L$a.getChildByName("folder");L$e&&(2==L$e.clipY?L$e.index=L$c.isDirectory?0:1:L$e.index=L$c.isDirectory?L$c.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([L$a,L$b])}},L$c.onArrowClick=function(L$a){var L$b=L$a.currentTarget.tag;this._list.array[L$b].isOpen=!this._list.array[L$b].isOpen,this.event("open"),this._list.array=this.getArray()},L$c.setItemState=function(L$a,L$b){this._list.array[L$a]&&(this._list.array[L$a].isOpen=L$b,this._list.array=this.getArray())},L$c.fresh=function(){this._list.array=this.getArray(),this.repaint()},L$c.parseXml=function(L$a,L$b,L$c,L$d){var L$e,L$f=L$a.childNodes,L$g=L$f.length;if(!L$d){L$e={};var L$h,L$i=L$a.attributes;for(var L$j in L$i){var L$k=(L$h=L$i[L$j]).nodeName,L$l=L$h.nodeValue;L$e[L$k]="true"==L$l||"false"!=L$l&&L$l}L$e.nodeParent=L$c,0<L$g&&(L$e.isDirectory=!0),L$e.hasChild=0<L$g,L$b.push(L$e)}for(var L$m=0;L$m<L$g;L$m++){var L$n=L$f[L$m];this.parseXml(L$n,L$b,L$e,!1)}},L$c.parseOpenStatus=function(L$a,L$b){for(var L$c=0,L$d=L$b.length;L$c<L$d;L$c++){var L$e=L$b[L$c];if(L$e.isDirectory)for(var L$f=0,L$g=L$a.length;L$f<L$g;L$f++){var L$h=L$a[L$f];if(L$h.isDirectory&&this.isSameParent(L$h,L$e)&&L$e.label==L$h.label){L$e.isOpen=L$h.isOpen;break}}}},L$c.isSameParent=function(L$a,L$b){return null==L$a.nodeParent&&null==L$b.nodeParent||null!=L$a.nodeParent&&null!=L$b.nodeParent&&(L$a.nodeParent.label==L$b.nodeParent.label&&this.isSameParent(L$a.nodeParent,L$b.nodeParent))},L$c.filter=function(L$a){if(Boolean(L$a)){var L$b=[];this.getFilterSource(this._source,L$b,L$a),this._list.array=L$b}else this._list.array=this.getArray()},L$c.getFilterSource=function(L$a,L$b,L$c){var L$d;for(var L$e in L$c=L$c.toLocaleLowerCase(),L$a)!(L$d=L$a[L$e]).isDirectory&&-1<String(L$d.label).toLowerCase().indexOf(L$c)&&(L$d.x=0,L$b.push(L$d)),L$d.child&&0<L$d.child.length&&this.getFilterSource(L$d.child,L$b,L$c)},L$g(0,L$c,"spaceBottom",function(){return this._list.spaceY},function(L$a){this._list.spaceY=L$a}),L$g(0,L$c,"keepStatus",function(){return this._keepStatus},function(L$a){this._keepStatus=L$a}),L$g(0,L$c,"itemRender",function(){return this._list.itemRender},function(L$a){this._list.itemRender=L$a}),L$g(0,L$c,"array",function(){return this._list.array},function(L$a){this._keepStatus&&this._list.array&&L$a&&this.parseOpenStatus(this._list.array,L$a),this._source=L$a,this._list.array=this.getArray()}),L$g(0,L$c,"mouseHandler",function(){return this._list.mouseHandler},function(L$a){this._list.mouseHandler=L$a}),L$g(0,L$c,"dataSource",L$a.prototype._$get_dataSource,function(L$a){this._dataSource=L$a,L$p.superSet(L$J,this,"dataSource",L$a)}),L$g(0,L$c,"source",function(){return this._source}),L$g(0,L$c,"scrollBar",function(){return this._list.scrollBar}),L$g(0,L$c,"list",function(){return this._list}),L$g(0,L$c,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(L$a){this._list.vScrollBarSkin=L$a}),L$g(0,L$c,"renderHandler",function(){return this._renderHandler},function(L$a){this._renderHandler=L$a}),L$g(0,L$c,"selectedIndex",function(){return this._list.selectedIndex},function(L$a){this._list.selectedIndex=L$a}),L$g(0,L$c,"spaceLeft",function(){return this._spaceLeft},function(L$a){this._spaceLeft=L$a}),L$g(0,L$c,"selectedItem",function(){return this._list.selectedItem},function(L$a){this._list.selectedItem=L$a}),L$g(0,L$c,"width",L$a.prototype._$get_width,function(L$a){L$p.superSet(L$J,this,"width",L$a),this._list.width=L$a}),L$g(0,L$c,"height",L$a.prototype._$get_height,function(L$a){L$p.superSet(L$J,this,"height",L$a),this._list.height=L$a}),L$g(0,L$c,"xml",null,function(L$a){var L$b=[];this.parseXml(L$a.childNodes[0],L$b,null,!0),this.array=L$b}),L$g(0,L$c,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),L$b}(L$J),L$aa=function(L$a){function L$b(){this._items=null,this._selectedIndex=0,L$b.__super.call(this),this._setIndexHandler=L$m.create(this,this.setIndex,null,!1)}L$f(L$b,"laya.ui.ViewStack",L$a);var L$c=L$b.prototype;return L$p.imps(L$c,{"laya.ui.IItem":!0}),L$c.setItems=function(L$a){this.removeChildren();for(var L$b=0,L$c=0,L$d=L$a.length;L$c<L$d;L$c++){var L$e=L$a[L$c];L$e&&(L$e.name="item"+L$b,this.addChild(L$e),L$b++)}this.initItems()},L$c.addItem=function(L$a){L$a.name="item"+this._items.length,this.addChild(L$a),this.initItems()},L$c.initItems=function(){this._items=[];for(var L$a=0;L$a<1e4;L$a++){var L$b=this.getChildByName("item"+L$a);if(null==L$b)break;this._items.push(L$b),L$b.visible=L$a==this._selectedIndex}},L$c.setSelect=function(L$a,L$b){this._items&&-1<L$a&&L$a<this._items.length&&(this._items[L$a].visible=L$b)},L$c.setIndex=function(L$a){this.selectedIndex=L$a},L$g(0,L$c,"dataSource",L$a.prototype._$get_dataSource,function(L$a){if("number"==typeof(this._dataSource=L$a)&&Math.floor(L$a)==L$a||"string"==typeof L$a)this.selectedIndex=parseInt(L$a);else for(var L$b in this._dataSource)this.hasOwnProperty(L$b)&&(this[L$b]=this._dataSource[L$b])}),L$g(0,L$c,"selectedIndex",function(){return this._selectedIndex},function(L$a){this._selectedIndex!=L$a&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=L$a,this.setSelect(this._selectedIndex,!0))}),L$g(0,L$c,"selection",function(){return-1<this._selectedIndex&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(L$a){this.selectedIndex=this._items.indexOf(L$a)}),L$g(0,L$c,"items",function(){return this._items}),L$g(0,L$c,"setIndexHandler",function(){return this._setIndexHandler},function(L$a){this._setIndexHandler=L$a}),L$b}(L$J),L$ba=function(L$a){function L$b(){L$b.__super.call(this)}return L$f(L$b,"laya.ui.VScrollBar",L$O),L$b}(),L$ca=function(L$b){function L$c(L$a){this._bg=null,this._skin=null,L$c.__super.call(this),void 0===L$a&&(L$a=""),this.text=L$a,this.skin=this.skin}L$f(L$c,"laya.ui.TextInput",L$b);var L$a=L$c.prototype;return L$a.preinitialize=function(){this.mouseEnabled=!0},L$a.destroy=function(L$a){L$s.clearCache(this,this._skin),void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._bg&&this._bg.destroy(),this._bg=null},L$a.createChildren=function(){this.addChild(this._tf=new L$n),this._tf.padding=L$D.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},L$a._onFocus=function(){this.event("focus",this)},L$a._onBlur=function(){this.event("blur",this)},L$a._onInput=function(){this.event("input",this)},L$a._onEnter=function(){this.event("enter",this)},L$a.initialize=function(){this.width=128,this.height=22},L$a.select=function(){this._tf.select()},L$a.setSelection=function(L$a,L$b){this._tf.setSelection(L$a,L$b)},L$g(0,L$a,"text",L$b.prototype._$get_text,function(L$a){this._tf.text!=L$a&&(L$a+="",this._tf.text=L$a,this.event("change"))}),L$g(0,L$a,"bg",function(){return this._bg},function(L$a){this.graphics=this._bg=L$a}),L$g(0,L$a,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(L$a){this._tf.inputElementYAdjuster=L$a}),L$g(0,L$a,"multiline",function(){return this._tf.multiline},function(L$a){this._tf.multiline=L$a}),L$g(0,L$a,"skin",function(){return this._skin},function(L$a){this._skin!=L$a&&(L$s.clearCache(this,this._skin),this._skin=L$a,this._bg||(this.graphics=this._bg=new L$G),L$s.keepCache(this,this._skin),this._bg.source=L$s.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),L$g(0,L$a,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(L$a){this._bg||(this.graphics=this._bg=new L$G),this._bg.sizeGrid=L$E.fillArray(L$D.defaultSizeGrid,L$a,Number)}),L$g(0,L$a,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(L$a){this._tf.inputElementXAdjuster=L$a}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$R,this,"width",L$a),this._bg&&(this._bg.width=L$a)}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$R,this,"height",L$a),this._bg&&(this._bg.height=L$a)}),L$g(0,L$a,"editable",function(){return this._tf.editable},function(L$a){this._tf.editable=L$a}),L$g(0,L$a,"restrict",function(){return this._tf.restrict},function(L$a){this._tf.restrict=L$a}),L$g(0,L$a,"prompt",function(){return this._tf.prompt},function(L$a){this._tf.prompt=L$a}),L$g(0,L$a,"promptColor",function(){return this._tf.promptColor},function(L$a){this._tf.promptColor=L$a}),L$g(0,L$a,"maxChars",function(){return this._tf.maxChars},function(L$a){this._tf.maxChars=L$a}),L$g(0,L$a,"focus",function(){return this._tf.focus},function(L$a){this._tf.focus=L$a}),L$g(0,L$a,"type",function(){return this._tf.type},function(L$a){this._tf.type=L$a}),L$g(0,L$a,"asPassword",function(){return this._tf.asPassword},function(L$a){this._tf.asPassword=L$a}),L$c}(L$R),L$da=function(L$a){function L$b(){L$b.__super.call(this)}return L$f(L$b,"laya.ui.VSlider",L$P),L$b}(),L$ea=function(L$a){function L$d(){this.popupCenter=!0,this.closeHandler=null,this.popupEffect=null,this.closeEffect=null,this.group=null,this.isModal=!1,this._dragArea=null,L$d.__super.call(this)}L$f(L$d,"laya.ui.Dialog",L$a);var L$b=L$d.prototype;return L$b.initialize=function(){this.popupEffect=L$d.manager.popupEffectHandler,this.closeEffect=L$d.manager.closeEffectHandler,this._dealDragArea(),this.on("click",this,this._onClick)},L$b._dealDragArea=function(){var L$a=this.getChildByName("drag");L$a&&(this.dragArea=L$a.x+","+L$a.y+","+L$a.width+","+L$a.height,L$a.removeSelf())},L$b._onClick=function(L$a){var L$b=L$a.target;if(L$b)switch(L$b.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(L$b.name)}},L$b.show=function(L$a,L$b){void 0===L$a&&(L$a=!1),void 0===L$b&&(L$b=!0),this._open(!1,L$a,L$b)},L$b.popup=function(L$a,L$b){void 0===L$a&&(L$a=!1),void 0===L$b&&(L$b=!0),this._open(!0,L$a,L$b)},L$b._open=function(L$a,L$b,L$c){L$d.manager.lock(!1),this.isModal=L$a,L$d.manager.open(this,L$b,L$c)},L$b.onOpened=function(){},L$b.close=function(L$a,L$b){void 0===L$b&&(L$b=!0),L$d.manager.close(this,L$a,L$b)},L$b.onClosed=function(L$a){},L$b._onMouseDown=function(L$a){var L$b=this.getMousePoint();this._dragArea.contains(L$b.x,L$b.y)?this.startDrag():this.stopDrag()},L$g(0,L$b,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(L$a){if(L$a){var L$b=L$E.fillArray([0,0,0,0],L$a,Number);this._dragArea=new L$r(L$b[0],L$b[1],L$b[2],L$b[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),L$g(0,L$b,"isPopup",function(){return null!=this.parent}),L$g(0,L$b,"zOrder",L$a.prototype._$get_zOrder,function(L$a){L$p.superSet(L$T,this,"zOrder",L$a),L$d.manager._checkMask()}),L$g(1,L$d,"manager",function(){return L$d._manager=L$d._manager||new L$I},function(L$a){L$d._manager=L$a}),L$d.setLockView=function(L$a){L$d.manager.setLockView(L$a)},L$d.lock=function(L$a){L$d.manager.lock(L$a)},L$d.closeAll=function(){L$d.manager.closeAll()},L$d.getDialogsByGroup=function(L$a){return L$d.manager.getDialogsByGroup(L$a)},L$d.closeByGroup=function(L$a){return L$d.manager.closeByGroup(L$a)},L$d.CLOSE="close",L$d.CANCEL="cancel",L$d.SURE="sure",L$d.NO="no",L$d.OK="ok",L$d.YES="yes",L$d._manager=null,L$d}(L$T),L$fa=function(L$a){function L$b(){L$b.__super.call(this)}L$f(L$b,"laya.ui.HBox",L$a);var L$c=L$b.prototype;return L$c.sortItem=function(L$a){L$a&&L$a.sort(function(L$a,L$b){return L$a.x-L$b.x})},L$c.changeItems=function(){this._itemChanged=!1;for(var L$a=[],L$b=0,L$c=0,L$d=this.numChildren;L$c<L$d;L$c++){var L$e=this.getChildAt(L$c);L$e&&L$e.layoutEnabled&&(L$a.push(L$e),L$b=this._height?this._height:Math.max(L$b,L$e.height*L$e.scaleY))}this.sortItem(L$a);var L$f=0;for(L$c=0,L$d=L$a.length;L$c<L$d;L$c++)(L$e=L$a[L$c]).x=L$f,L$f+=L$e.width*L$e.scaleX+this._space,"top"==this._align?L$e.y=0:"middle"==this._align?L$e.y=.5*(L$b-L$e.height*L$e.scaleY):"bottom"==this._align&&(L$e.y=L$b-L$e.height*L$e.scaleY);this.changeSize()},L$g(0,L$c,"height",L$a.prototype._$get_height,function(L$a){this._height!=L$a&&(L$p.superSet(L$V,this,"height",L$a),this.callLater(this.changeItems))}),L$b.NONE="none",L$b.TOP="top",L$b.MIDDLE="middle",L$b.BOTTOM="bottom",L$b}(L$V),L$ga=function(L$a){function L$b(){L$b.__super.call(this)}L$f(L$b,"laya.ui.VBox",L$a);var L$c=L$b.prototype;return L$c.changeItems=function(){this._itemChanged=!1;for(var L$a=[],L$b=0,L$c=0,L$d=this.numChildren;L$c<L$d;L$c++){var L$e=this.getChildAt(L$c);L$e&&L$e.layoutEnabled&&(L$a.push(L$e),L$b=this._width?this._width:Math.max(L$b,L$e.width*L$e.scaleX))}this.sortItem(L$a);var L$f=0;for(L$c=0,L$d=L$a.length;L$c<L$d;L$c++)(L$e=L$a[L$c]).y=L$f,L$f+=L$e.height*L$e.scaleY+this._space,"left"==this._align?L$e.x=0:"center"==this._align?L$e.x=.5*(L$b-L$e.width*L$e.scaleX):"right"==this._align&&(L$e.x=L$b-L$e.width*L$e.scaleX);this.changeSize()},L$g(0,L$c,"width",L$a.prototype._$get_width,function(L$a){this._width!=L$a&&(L$p.superSet(L$V,this,"width",L$a),this.callLater(this.changeItems))}),L$b.NONE="none",L$b.LEFT="left",L$b.CENTER="center",L$b.RIGHT="right",L$b}(L$V),L$ha=function(L$a){function L$b(){L$b.__super.call(this)}return L$f(L$b,"laya.ui.RadioGroup",L$_),L$b.prototype.createItem=function(L$a,L$b){return new L$w(L$a,L$b)},L$b}(),L$ia=function(L$a){function L$b(){L$b.__super.call(this)}return L$f(L$b,"laya.ui.Tab",L$_),L$b.prototype.createItem=function(L$a,L$b){return new L$K(L$a,L$b)},L$b}(),L$ja=function(L$b){function L$c(L$a){this._vScrollBar=null,this._hScrollBar=null,void 0===L$a&&(L$a=""),L$c.__super.call(this,L$a)}L$f(L$c,"laya.ui.TextArea",L$b);var L$a=L$c.prototype;return L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},L$a.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},L$a.onVBarChanged=function(L$a){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},L$a.onHBarChanged=function(L$a){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},L$a.changeScroll=function(){var L$a=this._vScrollBar&&0<this._tf.maxScrollY,L$b=this._hScrollBar&&0<this._tf.maxScrollX,L$c=L$a?this._width-this._vScrollBar.width:this._width,L$d=L$b?this._height-this._hScrollBar.height:this._height,L$e=this._tf.padding||L$D.labelPadding;this._tf.width=L$c,this._tf.height=L$d,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-L$e[2],this._vScrollBar.y=L$e[1],this._vScrollBar.height=this._height-(L$b?this._hScrollBar.height:0)-L$e[1]-L$e[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=L$d/Math.max(this._tf.textHeight,L$d),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=L$a),this._hScrollBar&&(this._hScrollBar.x=L$e[0],this._hScrollBar.y=this._height-this._hScrollBar.height-L$e[3],this._hScrollBar.width=this._width-(L$a?this._vScrollBar.width:0)-L$e[0]-L$e[2],this._hScrollBar.scrollSize=Math.max(.033*L$c,1),this._hScrollBar.thumbPercent=L$c/Math.max(this._tf.textWidth,L$c),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=L$b)},L$a.scrollTo=function(L$a){this.commitMeasure(),this._tf.scrollY=L$a},L$g(0,L$a,"scrollY",function(){return this._tf.scrollY}),L$g(0,L$a,"width",L$b.prototype._$get_width,function(L$a){L$p.superSet(L$ca,this,"width",L$a),this.callLater(this.changeScroll)}),L$g(0,L$a,"hScrollBar",function(){return this._hScrollBar}),L$g(0,L$a,"height",L$b.prototype._$get_height,function(L$a){L$p.superSet(L$ca,this,"height",L$a),this.callLater(this.changeScroll)}),L$g(0,L$a,"maxScrollX",function(){return this._tf.maxScrollX}),L$g(0,L$a,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(L$a){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new L$ba),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=L$a}),L$g(0,L$a,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(L$a){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new L$Y),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=L$a}),L$g(0,L$a,"vScrollBar",function(){return this._vScrollBar}),L$g(0,L$a,"maxScrollY",function(){return this._tf.maxScrollY}),L$g(0,L$a,"scrollX",function(){return this._tf.scrollX}),L$c}(L$ca);!function(L$a){function L$b(){this._uiView=null,this.isCloseOther=!1,L$b.__super.call(this)}L$f(L$b,"laya.ui.AsynDialog",L$ea);var L$c=L$b.prototype;L$c.createView=function(L$a){this._uiView=L$a},L$c._open=function(L$a,L$b,L$c){this.isModal=L$a,this.isCloseOther=L$b,L$ea.manager.lock(!0),this._uiView?this.onCreated():this.onOpen()},L$c.onCreated=function(){this.createUI(),this.onOpen()},L$c.createUI=function(){laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null,this._dealDragArea()},L$c.onOpen=function(){L$ea.manager.open(this,this.isCloseOther),L$ea.manager.lock(!1)},L$c.close=function(L$a,L$b){void 0===L$b&&(L$b=!0),L$ea.manager.close(this),this.onClose()},L$c.onClose=function(){},L$c.destroy=function(L$a){void 0===L$a&&(L$a=!0),laya.ui.View.prototype.destroy.call(this,L$a),this._uiView=null,this.onDestroy()},L$c.onDestroy=function(){}}();L$p.__init([L$T])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(L$a,L$b){"use strict";for(var L$c in Object.defineProperty(L$b,"__esModule",{value:!0}),Laya){var L$d=Laya[L$c];L$d&&L$d.__isclass&&(L$b[L$c]=L$d)}}),function(L$m,L$a,L$v){L$v.un,L$v.uns;var L$l=L$v.static,L$n=L$v.class,L$o=L$v.getset,L$d=L$v.__newvec,L$u=laya.maths.Arith,L$g=laya.webgl.atlas.AtlasResourceManager,L$c=laya.webgl.shader.BaseShader,L$H=laya.utils.Browser,L$h=laya.webgl.utils.Buffer,L$y=laya.utils.Byte,L$e=laya.utils.ClassUtils,L$i=L$v.Config,L$f=(laya.events.Event,laya.events.EventDispatcher),L$D=laya.utils.Handler,L$r=laya.net.Loader,L$b=laya.net.LoaderManager,L$j=(laya.maths.MathUtil,laya.display.Node),L$p=laya.renders.Render,L$k=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.utils.RenderState2D),L$q=laya.resource.Resource,L$s=laya.utils.RunDriver,L$t=(laya.webgl.shader.Shader,laya.webgl.utils.ShaderCompile),L$z=laya.display.Sprite,L$A=laya.utils.Stat,L$B=laya.utils.StringKey,L$E=(laya.display.css.Style,laya.resource.Texture,laya.net.URL),L$C=laya.utils.Utils,L$F=laya.webgl.WebGL,L$G=laya.webgl.WebGLContext;laya.webgl.canvas.WebGLContext2D;L$v.interface("laya.d3.core.IClone"),L$v.interface("laya.d3.graphics.IVertex"),L$v.interface("laya.d3.core.render.IUpdate"),L$v.interface("laya.d3.core.scene.ITreeNode"),L$v.interface("laya.d3.core.render.IRenderable");(function(){function L$K(){}L$n(L$K,"laya.d3.animation.AnimationClipParser01"),L$K.READ_DATA=function(){L$K._DATA.offset=L$K._reader.getUint32(),L$K._DATA.size=L$K._reader.getUint32()},L$K.READ_BLOCK=function(){for(var L$a=L$K._BLOCK.count=L$K._reader.getUint16(),L$b=L$K._BLOCK.blockStarts=[],L$c=L$K._BLOCK.blockLengths=[],L$d=0;L$d<L$a;L$d++)L$b.push(L$K._reader.getUint32()),L$c.push(L$K._reader.getUint32())},L$K.READ_STRINGS=function(){var L$a=L$K._reader.getUint32(),L$b=L$K._reader.getUint16(),L$c=L$K._reader.pos;L$K._reader.pos=L$a+L$K._DATA.offset;for(var L$d=0;L$d<L$b;L$d++)L$K._strings[L$d]=L$K._reader.readUTFString();L$K._reader.pos=L$c},L$K.parse=function(L$a,L$b){L$K._animationClip=L$a;(L$K._reader=L$b).__getBuffer();L$K.READ_DATA(),L$K.READ_BLOCK(),L$K.READ_STRINGS();for(var L$c=0,L$d=L$K._BLOCK.count;L$c<L$d;L$c++){var L$e=L$b.getUint16(),L$f=L$K._strings[L$e],L$g=L$K["READ_"+L$f];if(null==L$g)throw new Error("model file err,no this function:"+L$e+" "+L$f);L$g.call()}},L$K.READ_ANIMATIONS=function(){var L$a,L$b=0,L$c=0,L$d=L$K._reader,L$e=L$d.__getBuffer(),L$f=[],L$g=L$d.getUint8();for(L$f.length=L$g,L$b=0;L$b<L$g;L$b++)L$f[L$b]=L$d.getUint16();var L$h=[],L$i=L$d.getUint16();for(L$h.length=L$i,L$b=0;L$b<L$i;L$b++)L$h[L$b]=L$d.getFloat32();var L$j=L$K._animationClip;L$j.name=L$K._strings[L$d.getUint16()];var L$k=L$j._duration=L$d.getFloat32();L$j.islooping=!!L$d.getByte(),L$j._frameRate=L$d.getInt16();var L$l=L$d.getInt16(),L$m=L$j._nodes=new Array;L$m.length=L$l,(L$j._publicClipDatas=[]).length=L$l;var L$n=L$j._nodesMap={},L$o=0,L$p=0;for(L$b=0;L$b<L$l;L$b++){L$a=L$m[L$b]=new L$S;var L$q=L$d.getUint16(),L$r=L$a.path=[];for(L$r.length=L$q,L$c=0;L$c<L$q;L$c++)L$r[L$c]=L$K._strings[L$d.getUint16()];var L$s=L$r.join("/"),L$t=L$n[L$s];L$t||(L$n[L$s]=L$t=[]),L$t.push(L$a);var L$u=L$d.getInt16();-1!==L$u&&(L$a.componentType=L$K._strings[L$u]);var L$v=L$Q._propertyIndexDic[L$K._strings[L$d.getUint16()]];if(null==L$v)throw new Error("AnimationClipParser01:unknown property name.");var L$y=L$v<4,L$z=!L$y||L$y&&""===L$r[0];(L$a._cacheProperty=L$z)?L$o++:L$p++,L$a.propertyNameID=L$v;var L$A=L$f[L$d.getUint8()];L$a.keyFrameWidth=L$A/4;var L$B=L$a.keyFrames=[],L$C=L$B.length=L$d.getUint16(),L$D=null,L$E=NaN;for(L$c=0;L$c<L$C;L$c++){var L$F=L$B[L$c]=new L$R;L$E=L$F.startTime=L$h[L$d.getUint16()];var L$G=L$d.pos;L$F.inTangent=new Float32Array(L$e.slice(L$G,L$G+L$A)),L$d.pos+=L$A,L$G=L$d.pos,L$F.outTangent=new Float32Array(L$e.slice(L$G,L$G+L$A)),L$d.pos+=L$A,L$G=L$d.pos,L$F.data=new Float32Array(L$e.slice(L$G,L$G+L$A)),L$d.pos+=L$A,L$D&&(L$D.next=L$F,L$D.duration=L$E-L$D.startTime),L$D=L$F}L$F.next=null,L$F.duration=L$k-L$E}var L$H=L$j._nodeToCachePropertyMap=new Int32Array(L$l),L$I=L$j._cachePropertyMap=new Int32Array(L$o),L$J=L$j._unCachePropertyMap=new Int32Array(L$p);for(L$o=L$p=0,L$b=0;L$b<L$l;L$b++)(L$a=L$m[L$b])._cacheProperty?(L$H[L$b]=L$o,L$I[L$o++]=L$b):L$J[L$p++]=L$b},L$K._animationClip=null,L$K._reader=null,L$K._strings=[],L$l(L$K,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])})(),function(){function L$O(){}L$n(L$O,"laya.d3.animation.AnimationClipParser02"),L$O.READ_DATA=function(){L$O._DATA.offset=L$O._reader.getUint32(),L$O._DATA.size=L$O._reader.getUint32()},L$O.READ_BLOCK=function(){for(var L$a=L$O._BLOCK.count=L$O._reader.getUint16(),L$b=L$O._BLOCK.blockStarts=[],L$c=L$O._BLOCK.blockLengths=[],L$d=0;L$d<L$a;L$d++)L$b.push(L$O._reader.getUint32()),L$c.push(L$O._reader.getUint32())},L$O.READ_STRINGS=function(){var L$a=L$O._reader.getUint32(),L$b=L$O._reader.getUint16(),L$c=L$O._reader.pos;L$O._reader.pos=L$a+L$O._DATA.offset;for(var L$d=0;L$d<L$b;L$d++)L$O._strings[L$d]=L$O._reader.readUTFString();L$O._reader.pos=L$c},L$O.parse=function(L$a,L$b){L$O._animationClip=L$a;(L$O._reader=L$b).__getBuffer();L$O.READ_DATA(),L$O.READ_BLOCK(),L$O.READ_STRINGS();for(var L$c=0,L$d=L$O._BLOCK.count;L$c<L$d;L$c++){var L$e=L$b.getUint16(),L$f=L$O._strings[L$e],L$g=L$O["READ_"+L$f];if(null==L$g)throw new Error("model file err,no this function:"+L$e+" "+L$f);L$g.call()}},L$O.READ_ANIMATIONS=function(){var L$a,L$b=0,L$c=0,L$d=L$O._reader,L$e=L$d.__getBuffer(),L$f=[],L$g=L$d.getUint8();for(L$f.length=L$g,L$b=0;L$b<L$g;L$b++)L$f[L$b]=L$d.getUint16();var L$h=[],L$i=L$d.getUint16();for(L$h.length=L$i,L$b=0;L$b<L$i;L$b++)L$h[L$b]=L$d.getFloat32();var L$j=L$O._animationClip;L$j.name=L$O._strings[L$d.getUint16()];var L$k=L$j._duration=L$d.getFloat32();L$j.islooping=!!L$d.getByte(),L$j._frameRate=L$d.getInt16();var L$l=L$d.getInt16(),L$m=L$j._nodes=new Array;L$m.length=L$l,(L$j._publicClipDatas=[]).length=L$l;var L$n=L$j._nodesMap={},L$o=0,L$p=0;for(L$b=0;L$b<L$l;L$b++){L$a=L$m[L$b]=new L$S;var L$q=L$d.getUint16(),L$r=L$a.path=[];for(L$r.length=L$q,L$c=0;L$c<L$q;L$c++)L$r[L$c]=L$O._strings[L$d.getUint16()];var L$s=L$r.join("/"),L$t=L$n[L$s];L$t||(L$n[L$s]=L$t=[]),L$t.push(L$a);var L$u=L$d.getInt16();-1!==L$u&&(L$a.componentType=L$O._strings[L$u]);var L$v=L$Q._propertyIndexDic[L$O._strings[L$d.getUint16()]];if(null==L$v)throw new Error("AnimationClipParser02:unknown property name.");var L$y=L$v<4,L$z=!L$y||L$y&&""===L$r[0];(L$a._cacheProperty=L$z)?L$o++:L$p++,L$a.propertyNameID=L$v;var L$A=L$f[L$d.getUint8()];L$a.keyFrameWidth=L$A/4;var L$B=L$a.keyFrames=[],L$C=L$B.length=L$d.getUint16(),L$D=null,L$E=NaN;for(L$c=0;L$c<L$C;L$c++){var L$F=L$B[L$c]=new L$R;L$E=L$F.startTime=L$h[L$d.getUint16()];var L$G=L$d.pos;L$F.inTangent=new Float32Array(L$e.slice(L$G,L$G+L$A)),L$d.pos+=L$A,L$G=L$d.pos,L$F.outTangent=new Float32Array(L$e.slice(L$G,L$G+L$A)),L$d.pos+=L$A,L$G=L$d.pos,L$F.data=new Float32Array(L$e.slice(L$G,L$G+L$A)),L$d.pos+=L$A,L$D&&(L$D.next=L$F,L$D.duration=L$E-L$D.startTime),L$D=L$F}L$F.next=null,L$F.duration=L$k-L$E}var L$H=L$d.getUint16();for(L$b=0;L$b<L$H;L$b++){var L$I,L$J=new L$P;L$J.time=L$d.getFloat32(),L$J.eventName=L$O._strings[L$d.getUint16()];var L$K=L$d.getUint16();for(0<L$K&&(L$J.params=L$I=[]),L$c=0;L$c<L$K;L$c++){switch(L$d.getByte()){case 0:L$I.push(!!L$d.getByte());break;case 1:L$I.push(L$d.getInt32());break;case 2:L$I.push(L$d.getFloat32());break;case 3:L$I.push(L$O._strings[L$d.getUint16()]);break;default:throw new Error("unknown type.")}}L$j.addEvent(L$J)}var L$L=L$j._nodeToCachePropertyMap=new Int32Array(L$l),L$M=L$j._cachePropertyMap=new Int32Array(L$o),L$N=L$j._unCachePropertyMap=new Int32Array(L$p);for(L$o=L$p=0,L$b=0;L$b<L$l;L$b++)(L$a=L$m[L$b])._cacheProperty?(L$L[L$b]=L$o,L$M[L$o++]=L$b):L$N[L$p++]=L$b},L$O._animationClip=null,L$O._reader=null,L$O._strings=[],L$l(L$O,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}])}();var L$P=function(){function L$a(){this.time=NaN,this.eventName=null,this.params=null}return L$n(L$a,"laya.d3.animation.AnimationEvent"),L$a}(),L$Q=function(){function L$d(){this._childs=[],this.transform=new L$sb(this)}L$n(L$d,"laya.d3.animation.AnimationNode");var L$a=L$d.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.addChild=function(L$a){L$a._parent=this,L$a.transform.setParent(this.transform),this._childs.push(L$a)},L$a.removeChild=function(L$a){var L$b=this._childs.indexOf(L$a);-1!==L$b&&this._childs.splice(L$b,1)},L$a.getChildByName=function(L$a){for(var L$b=0,L$c=this._childs.length;L$b<L$c;L$b++){var L$d=this._childs[L$b];if(L$d.name===L$a)return L$d}return null},L$a.getChildByIndex=function(L$a){return this._childs[L$a]},L$a.getChildCount=function(){return this._childs.length},L$a.cloneTo=function(L$a){var L$b=L$a;L$b.name=this.name;for(var L$c=0,L$d=this._childs.length;L$c<L$d;L$c++){var L$e=this._childs[L$c],L$f=L$e.clone();L$b.addChild(L$f);var L$g=L$e.transform,L$h=L$f.transform;L$h.setLocalPosition(L$g.getLocalPosition()),L$h.setLocalRotation(L$g.getLocalRotation()),L$h.setLocalScale(L$g.getLocalScale()),L$h._localRotationEuler=L$g._localRotationEuler,L$h._setWorldMatrixIgnoreUpdate(L$g.getWorldMatrix())}},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$d.__init__=function(){L$d.registerAnimationNodeProperty("localPosition",L$d._getLocalPosition,L$d._setLocalPosition),L$d.registerAnimationNodeProperty("localRotation",L$d._getLocalRotation,L$d._setLocalRotation),L$d.registerAnimationNodeProperty("localScale",L$d._getLocalScale,L$d._setLocalScale),L$d.registerAnimationNodeProperty("localRotationEuler",L$d._getLocalRotationEuler,L$d._setLocalRotationEuler),L$d.registerAnimationNodeProperty("particleRender.sharedMaterial.tintColor",L$d._getParticleRenderSharedMaterialTintColor,L$d._setParticleRenderSharedMaterialTintColor),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.tilingOffset",L$d._getMeshRenderSharedMaterialTilingOffset,L$d._setMeshRenderSharedMaterialTilingOffset),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedoColor",L$d._getMeshRenderSharedMaterialAlbedo,L$d._setMeshRenderSharedMaterialAlbedo),L$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.tilingOffset",L$d._getSkinnedMeshRenderSharedMaterialTilingOffset,L$d._setSkinnedMeshRenderSharedMaterialTilingOffset),L$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedoColor",L$d._getSkinnedMeshRenderSharedMaterialAlbedo,L$d._setSkinnedMeshRenderSharedMaterialAlbedo),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.albedo",L$d._getMeshRenderSharedMaterialAlbedo,L$d._setMeshRenderSharedMaterialAlbedo),L$d.registerAnimationNodeProperty("skinnedMeshRender.sharedMaterial.albedo",L$d._getSkinnedMeshRenderSharedMaterialAlbedo,L$d._setSkinnedMeshRenderSharedMaterialAlbedo),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.intensity",L$d._getMeshRenderSharedMaterialIntensity,L$d._setMeshRenderSharedMaterialIntensity),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alpha",L$d._getMeshRenderSharedMaterialAlpha,L$d._setMeshRenderSharedMaterialAlpha),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.alphaColor",L$d._getMeshRenderSharedMaterialAlphaColor,L$d._setMeshRenderSharedMaterialAlphaColor),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseColor",L$d._getMeshRenderSharedMaterialBaseColor,L$d._setMeshRenderSharedMaterialBaseColor),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolve",L$d._getMeshRenderSharedMaterialDissolve,L$d._setMeshRenderSharedMaterialDissolve),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveSpeed",L$d._getMeshRenderSharedMaterialDissolveSpeed,L$d._setMeshRenderSharedMaterialDissolveSpeed),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.mMultiplier",L$d._getMeshRenderSharedMaterialMMultiplier,L$d._setMeshRenderSharedMaterialMMultiplier),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedX",L$d._getMeshRenderSharedMaterialBaseScrollSpeedX,L$d._setMeshRenderSharedMaterialBaseScrollSpeedX),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.baseScrollSpeedY",L$d._getMeshRenderSharedMaterialBaseScrollSpeedY,L$d._setMeshRenderSharedMaterialBaseScrollSpeedY),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedX",L$d._getMeshRenderSharedMaterialSecondScrollSpeedX,L$d._setMeshRenderSharedMaterialSecondScrollSpeedX),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.secondScrollSpeedY",L$d._getMeshRenderSharedMaterialSecondScrollSpeedY,L$d._setMeshRenderSharedMaterialSecondScrollSpeedY),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.detailTilingOffset",L$d._getMeshRenderSharedMaterialDetailTilingOffset,L$d._setMeshRenderSharedMaterialDetailTilingOffset),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.dissolveTilingOffset",L$d._getMeshRenderSharedMaterialDissolveTilingOffset,L$d._setMeshRenderSharedMaterialDissolveTilingOffset),L$d.registerAnimationNodeProperty("meshRender.sharedMaterial.maskTilingOffset",L$d._getMeshRenderSharedMaterialMaskTilingOffset,L$d._setMeshRenderSharedMaterialMaskTilingOffset)},L$d.registerAnimationNodeProperty=function(L$a,L$b,L$c){if(L$d._propertyIndexDic[L$a])throw new Error("AnimationNode: this propertyName has registered.");L$d._propertyIndexDic[L$a]=L$d._propertyIDCounter,L$d._propertyGetFuncs[L$d._propertyIDCounter]=L$b,L$d._propertySetFuncs[L$d._propertyIDCounter]=L$c,L$d._propertyIDCounter++},L$d._getLocalPosition=function(L$a,L$b){return L$a?L$a.transform.getLocalPosition():L$b._transform.localPosition.elements},L$d._setLocalPosition=function(L$a,L$b,L$c){if(L$a)L$a.transform.setLocalPosition(L$c);else{var L$d=L$b._transform,L$e=L$d.localPosition;L$e.elements=L$c,L$d.localPosition=L$e}},L$d._getLocalRotation=function(L$a,L$b){return L$a?L$a.transform.getLocalRotation():L$b._transform.localRotation.elements},L$d._setLocalRotation=function(L$a,L$b,L$c){if(L$a)L$a.transform.setLocalRotation(L$c);else{var L$d=L$b._transform,L$e=L$d.localRotation;L$e.elements=L$c,L$d.localRotation=L$e}},L$d._getLocalScale=function(L$a,L$b){return L$a?L$a.transform.getLocalScale():L$b._transform.localScale.elements},L$d._setLocalScale=function(L$a,L$b,L$c){if(L$a)L$a.transform.setLocalScale(L$c);else{var L$d=L$b._transform,L$e=L$d.localScale;L$e.elements=L$c,L$d.localScale=L$e}},L$d._getLocalRotationEuler=function(L$a,L$b){return L$a?L$a.transform.getLocalRotationEuler():L$b._transform.localRotationEuler.elements},L$d._setLocalRotationEuler=function(L$a,L$b,L$c){if(L$a)L$a.transform.setLocalRotationEuler(L$c);else{var L$d=L$b._transform,L$e=L$d.localRotationEuler;L$e.elements=L$c,L$d.localRotationEuler=L$e}},L$d._getMeshRenderSharedMaterialTilingOffset=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.tilingOffset.elements:null}return L$b.meshRender.sharedMaterial.tilingOffset.elements},L$d._setMeshRenderSharedMaterialTilingOffset=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.meshRender.material).tilingOffset).elements=L$c,L$d.tilingOffset=L$e)}else(L$e=(L$d=L$b.meshRender.material).tilingOffset).elements=L$c,L$d.tilingOffset=L$e},L$d._getMeshRenderSharedMaterialAlbedo=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.albedoColor.elements:null}return L$b.meshRender.sharedMaterial.albedoColor.elements},L$d._setMeshRenderSharedMaterialAlbedo=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.meshRender.material).albedoColor).elements=L$c,L$d.albedoColor=L$e)}else(L$e=(L$d=L$b.meshRender.material).albedoColor).elements=L$c,L$d.albedoColor=L$e},L$d._getSkinnedMeshRenderSharedMaterialTilingOffset=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.skinnedMeshRender.sharedMaterial.tilingOffset.elements:null}return L$b.skinnedMeshRender.sharedMaterial.tilingOffset.elements},L$d._setSkinnedMeshRenderSharedMaterialTilingOffset=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.skinnedMeshRender.material).tilingOffset).elements=L$c,L$d.tilingOffset=L$e)}else(L$e=(L$d=L$b.skinnedMeshRender.material).tilingOffset).elements=L$c,L$d.tilingOffset=L$e},L$d._getSkinnedMeshRenderSharedMaterialAlbedo=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.skinnedMeshRender.sharedMaterial.albedoColor.elements:null}return L$b.skinnedMeshRender.sharedMaterial.albedoColor.elements},L$d._setSkinnedMeshRenderSharedMaterialAlbedo=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.skinnedMeshRender.material).albedoColor).elements=L$c,L$d.albedoColor=L$e)}else(L$e=(L$d=L$b.skinnedMeshRender.material).albedoColor).elements=L$c,L$d.albedoColor=L$e},L$d._getParticleRenderSharedMaterialTintColor=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.particleRender.sharedMaterial.tintColor.elements:null}return L$b.particleRender.sharedMaterial.tintColor.elements},L$d._setParticleRenderSharedMaterialTintColor=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.particleRender.material).tintColor).elements=L$c,L$d.tintColor=L$e)}else(L$e=(L$d=L$b.particleRender.material).tintColor).elements=L$c,L$d.tintColor=L$e},L$d._getMeshRenderSharedMaterialAlphaColor=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.alphaColor.elements:null}return L$b.meshRender.sharedMaterial.alphaColor.elements},L$d._setMeshRenderSharedMaterialAlphaColor=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.meshRender.material).alphaColor).elements=L$c,L$d.alphaColor=L$e)}else(L$e=(L$d=L$b.meshRender.material).alphaColor).elements=L$c,L$d.alphaColor=L$e},L$d._getMeshRenderSharedMaterialBaseColor=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.baseColor.elements:null}return L$b.meshRender.sharedMaterial.baseColor.elements},L$d._setMeshRenderSharedMaterialBaseColor=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.meshRender.material).baseColor).elements=L$c,L$d.baseColor=L$e)}else(L$e=(L$d=L$b.meshRender.material).baseColor).elements=L$c,L$d.baseColor=L$e},L$d._getMeshRenderSharedMaterialDissolve=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.dissolve:0}return L$b.meshRender.sharedMaterial.dissolve},L$d._setMeshRenderSharedMaterialDissolve=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.dissolve=L$c[0])}else L$b.meshRender.material.dissolve=L$c[0]},L$d._getMeshRenderSharedMaterialDissolveSpeed=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.dissolveSpeed:0}return L$b.meshRender.sharedMaterial.dissolveSpeed},L$d._setMeshRenderSharedMaterialDissolveSpeed=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.dissolveSpeed=L$c[0])}else L$b.meshRender.material.dissolveSpeed=L$c[0]},L$d._getMeshRenderSharedMaterialMMultiplier=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.mMultiplier:0}return L$b.meshRender.sharedMaterial.mMultiplier},L$d._setMeshRenderSharedMaterialMMultiplier=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.mMultiplier=L$c[0])}else L$b.meshRender.material.mMultiplier=L$c[0]},L$d._getMeshRenderSharedMaterialBaseScrollSpeedX=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.baseScrollSpeedX:0}return L$b.meshRender.sharedMaterial.baseScrollSpeedX},L$d._setMeshRenderSharedMaterialBaseScrollSpeedX=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.baseScrollSpeedX=L$c[0])}else L$b.meshRender.material.baseScrollSpeedX=L$c[0]},L$d._getMeshRenderSharedMaterialBaseScrollSpeedY=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.baseScrollSpeedY:0}return L$b.meshRender.sharedMaterial.baseScrollSpeedY},L$d._setMeshRenderSharedMaterialBaseScrollSpeedY=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.baseScrollSpeedY=L$c[0])}else L$b.meshRender.material.baseScrollSpeedY=L$c[0]},L$d._getMeshRenderSharedMaterialSecondScrollSpeedX=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.secondScrollSpeedX:0}return L$b.meshRender.sharedMaterial.secondScrollSpeedX},L$d._setMeshRenderSharedMaterialSecondScrollSpeedX=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.secondScrollSpeedX=L$c[0])}else L$b.meshRender.material.secondScrollSpeedX=L$c[0]},L$d._getMeshRenderSharedMaterialSecondScrollSpeedY=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.secondScrollSpeedY:0}return L$b.meshRender.sharedMaterial.secondScrollSpeedY},L$d._setMeshRenderSharedMaterialSecondScrollSpeedY=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.secondScrollSpeedY=L$c[0])}else L$b.meshRender.material.secondScrollSpeedY=L$c[0]},L$d._getMeshRenderSharedMaterialAlpha=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.alpha:0}return L$b.meshRender.sharedMaterial.alpha},L$d._setMeshRenderSharedMaterialAlpha=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.alpha=L$c[0])}else L$b.meshRender.material.alpha=L$c[0]},L$d._getMeshRenderSharedMaterialIntensity=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.intensity:0}return L$b.meshRender.sharedMaterial.intensity},L$d._setMeshRenderSharedMaterialIntensity=function(L$a,L$b,L$c){if(L$a){var L$d=L$a.transform._entity;L$d&&(L$d.owner.meshRender.material.intensity=L$c[0])}else L$b.meshRender.material.intensity=L$c[0]},L$d._getMeshRenderSharedMaterialDetailTilingOffset=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.detailTilingOffset.elements:null}return L$b.meshRender.sharedMaterial.detailTilingOffset.elements},L$d._setMeshRenderSharedMaterialDetailTilingOffset=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.meshRender.material).detailTilingOffset).elements=L$c,L$d.detailTilingOffset=L$e)}else(L$e=(L$d=L$b.meshRender.material).detailTilingOffset).elements=L$c,L$d.detailTilingOffset=L$e},L$d._getMeshRenderSharedMaterialDissolveTilingOffset=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.dissolveTilingOffset.elements:null}return L$b.meshRender.sharedMaterial.dissolveTilingOffset.elements},L$d._setMeshRenderSharedMaterialDissolveTilingOffset=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.meshRender.material).dissolveTilingOffset).elements=L$c,L$d.dissolveTilingOffset=L$e)}else(L$e=(L$d=L$b.meshRender.material).dissolveTilingOffset).elements=L$c,L$d.dissolveTilingOffset=L$e},L$d._getMeshRenderSharedMaterialMaskTilingOffset=function(L$a,L$b){if(L$a){var L$c=L$a.transform._entity;return L$c?L$c.owner.meshRender.sharedMaterial.maskTilingOffset.elements:null}return L$b.meshRender.sharedMaterial.maskTilingOffset.elements},L$d._setMeshRenderSharedMaterialMaskTilingOffset=function(L$a,L$b,L$c){var L$d,L$e;if(L$a){var L$f=L$a.transform._entity;L$f&&((L$e=(L$d=L$f.owner.meshRender.material).maskTilingOffset).elements=L$c,L$d.maskTilingOffset=L$e)}else(L$e=(L$d=L$b.meshRender.material).maskTilingOffset).elements=L$c,L$d.maskTilingOffset=L$e},L$d._propertyIDCounter=0,L$d._propertyIndexDic={},L$d._propertySetFuncs=[],L$d._propertyGetFuncs=[],L$d}(),L$R=function(){function L$a(){this.startTime=NaN,this.inTangent=null,this.outTangent=null,this.data=null,this.duration=NaN,this.next=null}return L$n(L$a,"laya.d3.animation.Keyframe"),L$a}(),L$S=function(){function L$a(){this._cacheProperty=!1,this.path=null,this.componentType=null,this.propertyNameID=0,this.keyFrameWidth=0,this.defaultData=null,this.keyFrames=null}return L$n(L$a,"laya.d3.animation.KeyframeNode"),L$a}(),L$I=(function(){function L$a(){this._tempVector30=new L$gb,this._tempVector31=new L$gb,this._tempVector32=new L$gb,this._a=new L$gb,this._b=new L$gb,this._c=new L$gb,this._d=new L$gb}L$n(L$a,"laya.d3.core.glitter.SplineCurvePositionVelocity");var L$b=L$a.prototype;L$b.Init=function(L$a,L$b,L$c,L$d){L$a.cloneTo(this._d),L$b.cloneTo(this._c),L$gb.scale(L$a,2,this._a),L$gb.scale(L$c,2,this._tempVector30),L$gb.subtract(this._a,this._tempVector30,this._a),L$gb.add(this._a,L$b,this._a),L$gb.add(this._a,L$d,this._a),L$gb.scale(L$c,3,this._b),L$gb.scale(L$a,3,this._tempVector30),L$gb.subtract(this._b,this._tempVector30,this._b),L$gb.subtract(this._b,L$d,this._b),L$gb.scale(L$b,2,this._tempVector30),L$gb.subtract(this._b,this._tempVector30,this._b)},L$b.Slerp=function(L$a,L$b){L$gb.scale(this._a,L$a*L$a*L$a,this._tempVector30),L$gb.scale(this._b,L$a*L$a,this._tempVector31),L$gb.scale(this._c,L$a,this._tempVector32),L$gb.add(this._tempVector30,this._tempVector31,L$b),L$gb.add(L$b,this._tempVector32,L$b),L$gb.add(L$b,this._d,L$b)}}(),function(){function L$M(L$a,L$b,L$c,L$d){this._datas=null,this._w=0,this._h=0,this._minHeight=NaN,this._maxHeight=NaN,this._datas=[],this._w=L$a,this._h=L$b,this._minHeight=L$c,this._maxHeight=L$d}L$n(L$M,"laya.d3.core.HeightMap");var L$a=L$M.prototype;L$a._inBounds=function(L$a,L$b){return 0<=L$a&&L$a<this._h&&0<=L$b&&L$b<this._w},L$a.getHeight=function(L$a,L$b){return this._inBounds(L$a,L$b)?this._datas[L$a][L$b]:NaN},L$o(0,L$a,"width",function(){return this._w}),L$o(0,L$a,"height",function(){return this._h}),L$o(0,L$a,"maxHeight",function(){return this._maxHeight}),L$o(0,L$a,"minHeight",function(){return this._minHeight}),L$M.creatFromMesh=function(L$a,L$b,L$c,L$d){for(var L$e=[],L$f=[],L$g=L$a.getSubMeshCount(),L$h=0;L$h<L$g;L$h++){for(var L$i=L$a.getSubMesh(L$h),L$j=L$i._getVertexBuffer(),L$k=L$j.getData(),L$l=[],L$m=0;L$m<L$k.length;L$m+=L$j.vertexDeclaration.vertexStride/4){var L$n=new L$gb(L$k[L$m+0],L$k[L$m+1],L$k[L$m+2]);L$l.push(L$n)}L$e.push(L$l);var L$o=L$i._getIndexBuffer();L$f.push(L$o.getData())}var L$p=L$a.boundingBox,L$q=L$p.min.x,L$r=L$p.min.z,L$s=L$p.max.x,L$t=L$p.max.z,L$u=L$p.min.y,L$v=L$p.max.y,L$y=L$s-L$q,L$z=L$t-L$r,L$A=L$d.elements[0]=L$y/(L$b-1),L$B=L$d.elements[1]=L$z/(L$c-1),L$C=new L$M(L$b,L$c,L$u,L$v),L$D=L$M._tempRay,L$E=L$D.direction.elements;L$E[0]=0,L$E[1]=-1,L$E[2]=0;var L$F=L$v+.1;L$D.origin.elements[1]=L$F;for(var L$G=0;L$G<L$c;L$G++){var L$H=L$r+L$G*L$B;L$C._datas[L$G]=[];for(var L$I=0;L$I<L$b;L$I++){var L$J=L$q+L$I*L$A,L$K=L$D.origin.elements;L$K[0]=L$J,L$K[2]=L$H;var L$L=L$M._getPosition(L$D,L$e,L$f);L$C._datas[L$G][L$I]=L$L===Number.MAX_VALUE?NaN:L$F-L$L}}return L$C},L$M.createFromImage=function(L$a,L$b,L$c){for(var L$d=L$a.width,L$e=L$a.height,L$f=new L$M(L$d,L$e,L$b,L$c),L$g=(L$c-L$b)/254,L$h=L$a.getPixels(),L$i=0,L$j=0;L$j<L$e;L$j++)for(var L$k=L$f._datas[L$j]=[],L$l=0;L$l<L$d;L$l++){var L$m=L$h[L$i++],L$n=L$h[L$i++],L$o=L$h[L$i++],L$p=L$h[L$i++];L$k[L$l]=255==L$m&&255==L$n&&255==L$o&&255==L$p?NaN:(L$m+L$n+L$o)/3*L$g+L$b}return L$f},L$M._getPosition=function(L$a,L$b,L$c){for(var L$d=Number.MAX_VALUE,L$e=0;L$e<L$b.length;L$e++)for(var L$f=L$b[L$e],L$g=L$c[L$e],L$h=0;L$h<L$g.length;L$h+=3){var L$i=L$f[L$g[L$h+0]],L$j=L$f[L$g[L$h+1]],L$k=L$f[L$g[L$h+2]],L$l=L$ob.rayIntersectsTriangle(L$a,L$i,L$j,L$k);!isNaN(L$l)&&L$l<L$d&&(L$d=L$l)}return L$d},L$l(L$M,["_tempRay",function(){return this._tempRay=new L$eb(new L$gb,new L$gb)}])}(),function(){function L$e(){this._visible=!0,this._nonRigidbodyOffset=0,this._colliders=[]}L$n(L$e,"laya.d3.core.Layer");var L$a=L$e.prototype;return L$a._binarySearchIndex=function(){for(var L$a=0,L$b=L$e._collsionTestList.length-1,L$c=0;L$a<=L$b;){L$c=Math.floor((L$a+L$b)/2);var L$d=L$e._collsionTestList[L$c];if(L$d==this._number)return L$c;L$d>this._number?L$b=L$c-1:L$a=L$c+1}return L$a},L$a._addCollider=function(L$a){0===this._colliders.length&&L$e._collsionTestList.splice(this._binarySearchIndex(),0,this._number),L$a._isRigidbody?(this._colliders.unshift(L$a),this._nonRigidbodyOffset++):this._colliders.push(L$a)},L$a._removeCollider=function(L$a){var L$b=this._colliders.indexOf(L$a);L$b<this._nonRigidbodyOffset&&this._nonRigidbodyOffset--,this._colliders.splice(L$b,1),0===this._colliders.length&&L$e._collsionTestList.splice(L$e._collsionTestList.indexOf(this._number),1)},L$o(0,L$a,"number",function(){return this._number}),L$o(0,L$a,"visible",function(){return this._visible},function(L$a){this._visible=L$a,L$e._visibleLayers=L$a?L$e._visibleLayers|this.mask:L$e._visibleLayers&~this.mask}),L$o(0,L$a,"mask",function(){return this._mask}),L$o(1,L$e,"visibleLayers",function(){return L$e._visibleLayers},function(L$a){L$e._visibleLayers=L$a;for(var L$b=0,L$c=L$e._layerList.length;L$b<L$c;L$b++){var L$d=L$e._layerList[L$b];L$d._visible=0!=(L$d._mask&L$e._visibleLayers)}}),L$e.__init__=function(){L$e._layerList.length=31;for(var L$a=0;L$a<31;L$a++){var L$b=new L$e;L$e._layerList[L$a]=L$b,0===L$a?(L$b.name="Default Layer",L$b.visible=!0):(L$b.name="Layer-"+L$a,L$b.visible=!1),L$b._number=L$a,L$b._mask=Math.pow(2,L$a)}L$e.currentCreationLayer=L$e._layerList[0]},L$e.getLayerByNumber=function(L$a){if(L$a<0||30<L$a)throw new Error("无法返回指定Layer，该number超出范围！");return L$e._layerList[L$a]},L$e.getLayerByName=function(L$a){for(var L$b=0;L$b<31;L$b++)if(L$e._layerList[L$b].name===L$a)return L$e._layerList[L$b];throw new Error("无法返回指定Layer,该name不存在")},L$e.isVisible=function(L$a){return 0!=(L$a&L$e._currentCameraCullingMask&L$e._visibleLayers)},L$e._layerList=[],L$e._visibleLayers=2147483647,L$e._collsionTestList=[],L$e._currentCameraCullingMask=2147483647,L$e.maxCount=31,L$e.currentCreationLayer=null,L$e}()),L$J=(function(){function L$a(L$a,L$b,L$c){this._time=NaN,this._minCount=0,this._maxCount=0,this._time=L$a,this._minCount=L$b,this._maxCount=L$c}L$n(L$a,"laya.d3.core.particleShuriKen.module.Burst");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.cloneTo=function(L$a){var L$b=L$a;L$b._time=this._time,L$b._minCount=this._minCount,L$b._maxCount=this._maxCount},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"time",function(){return this._time}),L$o(0,L$b,"minCount",function(){return this._minCount}),L$o(0,L$b,"maxCount",function(){return this._maxCount})}(),function(){function L$a(L$a){this._color=null,this.enbale=!1,this._color=L$a}L$n(L$a,"laya.d3.core.particleShuriKen.module.ColorOverLifetime");var L$b=L$a.prototype;L$b.cloneTo=function(L$a){var L$b=L$a;this._color.cloneTo(L$b._color),L$b.enbale=this.enbale},L$b.clone=function(){var L$a;switch(this._color.type){case 0:L$a=L$L.createByConstant(this._color.constant.clone());break;case 1:L$a=L$L.createByGradient(this._color.gradient.clone());break;case 2:L$a=L$L.createByRandomTwoConstant(this._color.constantMin.clone(),this._color.constantMax.clone());break;case 3:L$a=L$L.createByRandomTwoGradient(this._color.gradientMin.clone(),this._color.gradientMax.clone())}var L$b=new this.constructor(L$a);return L$b.enbale=this.enbale,L$b},L$o(0,L$b,"color",function(){return this._color})}(),function(){function L$a(){this._destroyed=!1,this._emissionRate=0,this._bursts=null,this.enbale=!1,this._destroyed=!1,this.emissionRate=10,this._bursts=[]}L$n(L$a,"laya.d3.core.particleShuriKen.module.Emission");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0,"laya.resource.IDestroy":!0}),L$b._destroy=function(){this._bursts=null,this._destroyed=!0},L$b.getBurstsCount=function(){return this._bursts.length},L$b.getBurstByIndex=function(L$a){return this._bursts[L$a]},L$b.addBurst=function(L$a){var L$b=this._bursts.length;if(0<L$b)for(var L$c=0;L$c<L$b;L$c++)this._bursts[L$c].time>L$a.time&&this._bursts.splice(L$c,0,L$a);this._bursts.push(L$a)},L$b.removeBurst=function(L$a){var L$b=this._bursts.indexOf(L$a);-1!==L$b&&this._bursts.splice(L$b,1)},L$b.removeBurstByIndex=function(L$a){this._bursts.splice(L$a,1)},L$b.clearBurst=function(){this._bursts.length=0},L$b.cloneTo=function(L$a){var L$b=L$a,L$c=L$b._bursts;L$c.length=this._bursts.length;for(var L$d=0,L$e=this._bursts.length;L$d<L$e;L$d++){var L$f=L$c[L$d];L$f?this._bursts[L$d].cloneTo(L$f):L$c[L$d]=this._bursts[L$d].clone()}L$b._emissionRate=this._emissionRate,L$b.enbale=this.enbale},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"destroyed",function(){return this._destroyed}),L$o(0,L$b,"emissionRate",function(){return this._emissionRate},function(L$a){if(L$a<0)throw new Error("ParticleBaseShape:emissionRate value must large or equal than 0.");this._emissionRate=L$a})}(),function(){function L$d(){this._type=0,this._constant=0,this._overTime=null,this._constantMin=0,this._constantMax=0,this._overTimeMin=null,this._overTimeMax=null}L$n(L$d,"laya.d3.core.particleShuriKen.module.FrameOverTime");var L$a=L$d.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.cloneTo=function(L$a){var L$b=L$a;L$b._type=this._type,L$b._constant=this._constant,this._overTime.cloneTo(L$b._overTime),L$b._constantMin=this._constantMin,L$b._constantMax=this._constantMax,this._overTimeMin.cloneTo(L$b._overTimeMin),this._overTimeMax.cloneTo(L$b._overTimeMax)},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$a,"frameOverTimeData",function(){return this._overTime}),L$o(0,L$a,"constant",function(){return this._constant}),L$o(0,L$a,"type",function(){return this._type}),L$o(0,L$a,"frameOverTimeDataMin",function(){return this._overTimeMin}),L$o(0,L$a,"constantMin",function(){return this._constantMin}),L$o(0,L$a,"frameOverTimeDataMax",function(){return this._overTimeMax}),L$o(0,L$a,"constantMax",function(){return this._constantMax}),L$d.createByConstant=function(L$a){var L$b=new L$d;return L$b._type=0,L$b._constant=L$a,L$b},L$d.createByOverTime=function(L$a){var L$b=new L$d;return L$b._type=1,L$b._overTime=L$a,L$b},L$d.createByRandomTwoConstant=function(L$a,L$b){var L$c=new L$d;return L$c._type=2,L$c._constantMin=L$a,L$c._constantMax=L$b,L$c},L$d.createByRandomTwoOverTime=function(L$a,L$b){var L$c=new L$d;return L$c._type=3,L$c._overTimeMin=L$a,L$c._overTimeMax=L$b,L$c},L$d}()),L$K=function(){function L$j(){this._type=0,this._separateAxes=!1,this._constant=NaN,this._constantSeparate=null,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._gradientW=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null,this._gradientWMin=null,this._gradientWMax=null}L$n(L$j,"laya.d3.core.particleShuriKen.module.GradientAngularVelocity");var L$a=L$j.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.cloneTo=function(L$a){var L$b=L$a;L$b._type=this._type,L$b._separateAxes=this._separateAxes,L$b._constant=this._constant,this._constantSeparate.cloneTo(L$b._constantSeparate),this._gradient.cloneTo(L$b._gradient),this._gradientX.cloneTo(L$b._gradientX),this._gradientY.cloneTo(L$b._gradientY),this._gradientZ.cloneTo(L$b._gradientZ),L$b._constantMin=this._constantMin,L$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(L$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(L$b._constantMaxSeparate),this._gradientMin.cloneTo(L$b._gradientMin),this._gradientMax.cloneTo(L$b._gradientMax),this._gradientXMin.cloneTo(L$b._gradientXMin),this._gradientXMax.cloneTo(L$b._gradientXMax),this._gradientYMin.cloneTo(L$b._gradientYMin),this._gradientYMax.cloneTo(L$b._gradientYMax),this._gradientZMin.cloneTo(L$b._gradientZMin),this._gradientZMax.cloneTo(L$b._gradientZMax)},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$a,"gradientZ",function(){return this._gradientZ}),L$o(0,L$a,"constant",function(){return this._constant}),L$o(0,L$a,"gradient",function(){return this._gradient}),L$o(0,L$a,"separateAxes",function(){return this._separateAxes}),L$o(0,L$a,"type",function(){return this._type}),L$o(0,L$a,"constantSeparate",function(){return this._constantSeparate}),L$o(0,L$a,"gradientX",function(){return this._gradientX}),L$o(0,L$a,"gradientY",function(){return this._gradientY}),L$o(0,L$a,"gradientW",function(){return this._gradientW}),L$o(0,L$a,"gradientMin",function(){return this._gradientMin}),L$o(0,L$a,"constantMin",function(){return this._constantMin}),L$o(0,L$a,"gradientMax",function(){return this._gradientMax}),L$o(0,L$a,"constantMax",function(){return this._constantMax}),L$o(0,L$a,"gradientWMin",function(){return this._gradientWMin}),L$o(0,L$a,"constantMinSeparate",function(){return this._constantMinSeparate}),L$o(0,L$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),L$o(0,L$a,"gradientXMin",function(){return this._gradientXMin}),L$o(0,L$a,"gradientXMax",function(){return this._gradientXMax}),L$o(0,L$a,"gradientWMax",function(){return this._gradientWMax}),L$o(0,L$a,"gradientYMin",function(){return this._gradientYMin}),L$o(0,L$a,"gradientYMax",function(){return this._gradientYMax}),L$o(0,L$a,"gradientZMin",function(){return this._gradientZMin}),L$o(0,L$a,"gradientZMax",function(){return this._gradientZMax}),L$j.createByConstant=function(L$a){var L$b=new L$j;return L$b._type=0,L$b._separateAxes=!1,L$b._constant=L$a,L$b},L$j.createByConstantSeparate=function(L$a){var L$b=new L$j;return L$b._type=0,L$b._separateAxes=!0,L$b._constantSeparate=L$a,L$b},L$j.createByGradient=function(L$a){var L$b=new L$j;return L$b._type=1,L$b._separateAxes=!1,L$b._gradient=L$a,L$b},L$j.createByGradientSeparate=function(L$a,L$b,L$c,L$d){var L$e=new L$j;return L$e._type=1,L$e._separateAxes=!0,L$e._gradientX=L$a,L$e._gradientY=L$b,L$e._gradientZ=L$c,L$e._gradientW=L$d,L$e},L$j.createByRandomTwoConstant=function(L$a,L$b){var L$c=new L$j;return L$c._type=2,L$c._separateAxes=!1,L$c._constantMin=L$a,L$c._constantMax=L$b,L$c},L$j.createByRandomTwoConstantSeparate=function(L$a,L$b){var L$c=new L$j;return L$c._type=2,L$c._separateAxes=!0,L$c._constantMinSeparate=L$a,L$c._constantMaxSeparate=L$b,L$c},L$j.createByRandomTwoGradient=function(L$a,L$b){var L$c=new L$j;return L$c._type=3,L$c._separateAxes=!1,L$c._gradientMin=L$a,L$c._gradientMax=L$b,L$c},L$j.createByRandomTwoGradientSeparate=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){var L$i=new L$j;return L$i._type=3,L$i._separateAxes=!0,L$i._gradientXMin=L$a,L$i._gradientXMax=L$b,L$i._gradientYMin=L$c,L$i._gradientYMax=L$d,L$i._gradientZMin=L$e,L$i._gradientZMax=L$f,L$i._gradientWMin=L$g,L$i._gradientWMax=L$h,L$i},L$j}(),L$L=function(){function L$d(){this._type=0,this._constant=null,this._constantMin=null,this._constantMax=null,this._gradient=null,this._gradientMin=null,this._gradientMax=null}L$n(L$d,"laya.d3.core.particleShuriKen.module.GradientColor");var L$a=L$d.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.cloneTo=function(L$a){var L$b=L$a;L$b._type=this._type,this._constant.cloneTo(L$b._constant),this._constantMin.cloneTo(L$b._constantMin),this._constantMax.cloneTo(L$b._constantMax),this._gradient.cloneTo(L$b._gradient),this._gradientMin.cloneTo(L$b._gradientMin),this._gradientMax.cloneTo(L$b._gradientMax)},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$a,"gradient",function(){return this._gradient}),L$o(0,L$a,"constant",function(){return this._constant}),L$o(0,L$a,"type",function(){return this._type}),L$o(0,L$a,"gradientMin",function(){return this._gradientMin}),L$o(0,L$a,"constantMin",function(){return this._constantMin}),L$o(0,L$a,"gradientMax",function(){return this._gradientMax}),L$o(0,L$a,"constantMax",function(){return this._constantMax}),L$d.createByConstant=function(L$a){var L$b=new L$d;return L$b._type=0,L$b._constant=L$a,L$b},L$d.createByGradient=function(L$a){var L$b=new L$d;return L$b._type=1,L$b._gradient=L$a,L$b},L$d.createByRandomTwoConstant=function(L$a,L$b){var L$c=new L$d;return L$c._type=2,L$c._constantMin=L$a,L$c._constantMax=L$b,L$c},L$d.createByRandomTwoGradient=function(L$a,L$b){var L$c=new L$d;return L$c._type=3,L$c._gradientMin=L$a,L$c._gradientMax=L$b,L$c},L$d}(),L$M=(function(){function L$a(){this._alphaCurrentLength=0,this._rgbCurrentLength=0,this._alphaElements=null,this._rgbElements=null,this._alphaElements=new Float32Array(8),this._rgbElements=new Float32Array(16)}L$n(L$a,"laya.d3.core.particleShuriKen.module.GradientDataColor");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.addAlpha=function(L$a,L$b){this._alphaCurrentLength<8?(6===this._alphaCurrentLength&&1!==L$a&&(L$a=1,DEBUG),this._alphaElements[this._alphaCurrentLength++]=L$a,this._alphaElements[this._alphaCurrentLength++]=L$b):DEBUG},L$b.addRGB=function(L$a,L$b){this._rgbCurrentLength<16?(12===this._rgbCurrentLength&&1!==L$a&&(L$a=1,DEBUG),this._rgbElements[this._rgbCurrentLength++]=L$a,this._rgbElements[this._rgbCurrentLength++]=L$b.x,this._rgbElements[this._rgbCurrentLength++]=L$b.y,this._rgbElements[this._rgbCurrentLength++]=L$b.z):DEBUG},L$b.cloneTo=function(L$a){var L$b=L$a,L$c=0,L$d=0;L$b._alphaCurrentLength=this._alphaCurrentLength;var L$e=L$b._alphaElements;for(L$e.length=this._alphaElements.length,L$c=0,L$d=this._alphaElements.length;L$c<L$d;L$c++)L$e[L$c]=this._alphaElements[L$c];L$b._rgbCurrentLength=this._rgbCurrentLength;var L$f=L$b._rgbElements;for(L$f.length=this._rgbElements.length,L$c=0,L$d=this._rgbElements.length;L$c<L$d;L$c++)L$f[L$c]=this._rgbElements[L$c]},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"alphaGradientCount",function(){return this._alphaCurrentLength/2}),L$o(0,L$b,"rgbGradientCount",function(){return this._rgbCurrentLength/4})}(),function(){function L$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}L$n(L$a,"laya.d3.core.particleShuriKen.module.GradientDataInt");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.add=function(L$a,L$b){this._currentLength<8?(6===this._currentLength&&1!==L$a&&(L$a=1,console.log("Warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=L$a,this._elements[this._currentLength++]=L$b):console.log("Warning:data count must lessEqual than 4")},L$b.cloneTo=function(L$a){var L$b=L$a;L$b._currentLength=this._currentLength;var L$c=L$b._elements;L$c.length=this._elements.length;for(var L$d=0,L$e=this._elements.length;L$d<L$e;L$d++)L$c[L$d]=this._elements[L$d]},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function L$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(8)}L$n(L$a,"laya.d3.core.particleShuriKen.module.GradientDataNumber");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.add=function(L$a,L$b){this._currentLength<8?(6===this._currentLength&&1!==L$a&&(L$a=1,DEBUG),this._elements[this._currentLength++]=L$a,this._elements[this._currentLength++]=L$b):DEBUG},L$b.getKeyByIndex=function(L$a){return this._elements[2*L$a]},L$b.getValueByIndex=function(L$a){return this._elements[2*L$a+1]},L$b.getAverageValue=function(){for(var L$a=0,L$b=this._currentLength-2;L$a<L$b;L$a+=2){this._elements[L$a+1];this._elements[L$a+3],this._elements[L$a+2]-this._elements[L$a]}return 0},L$b.cloneTo=function(L$a){var L$b=L$a;L$b._currentLength=this._currentLength;var L$c=L$b._elements;L$c.length=this._elements.length;for(var L$d=0,L$e=this._elements.length;L$d<L$e;L$d++)L$c[L$d]=this._elements[L$d]},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"gradientCount",function(){return this._currentLength/2})}(),function(){function L$a(){this._currentLength=0,this._elements=null,this._elements=new Float32Array(12)}L$n(L$a,"laya.d3.core.particleShuriKen.module.GradientDataVector2");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.add=function(L$a,L$b){this._currentLength<8?(6===this._currentLength&&1!==L$a&&(L$a=1,DEBUG&&console.log("GradientDataVector2 warning:the forth key is  be force set to 1.")),this._elements[this._currentLength++]=L$a,this._elements[this._currentLength++]=L$b.x,this._elements[this._currentLength++]=L$b.y):DEBUG&&console.log("GradientDataVector2 warning:data count must lessEqual than 4")},L$b.cloneTo=function(L$a){var L$b=L$a;L$b._currentLength=this._currentLength;var L$c=L$b._elements;L$c.length=this._elements.length;for(var L$d=0,L$e=this._elements.length;L$d<L$e;L$d++)L$c[L$d]=this._elements[L$d]},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"gradientCount",function(){return this._currentLength/3})}(),function(){function L$h(){this._type=0,this._separateAxes=!1,this._gradient=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=NaN,this._constantMax=NaN,this._constantMinSeparate=null,this._constantMaxSeparate=null,this._gradientMin=null,this._gradientMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}L$n(L$h,"laya.d3.core.particleShuriKen.module.GradientSize");var L$a=L$h.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.getMaxSizeInGradient=function(){var L$a=0,L$b=0,L$c=-Number.MAX_VALUE;switch(this._type){case 0:if(this._separateAxes){for(L$a=0,L$b=this._gradientX.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientX.getValueByIndex(L$a));for(L$a=0,L$b=this._gradientY.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientY.getValueByIndex(L$a))}else for(L$a=0,L$b=this._gradient.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradient.getValueByIndex(L$a));break;case 1:L$c=this._separateAxes?(L$c=Math.max(this._constantMinSeparate.x,this._constantMaxSeparate.x),L$c=Math.max(L$c,this._constantMinSeparate.y),Math.max(L$c,this._constantMaxSeparate.y)):Math.max(this._constantMin,this._constantMax);break;case 2:if(this._separateAxes){for(L$a=0,L$b=this._gradientXMin.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientXMin.getValueByIndex(L$a));for(L$a=0,L$b=this._gradientXMax.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientXMax.getValueByIndex(L$a));for(L$a=0,L$b=this._gradientYMin.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientYMin.getValueByIndex(L$a));for(L$a=0,L$b=this._gradientZMax.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientZMax.getValueByIndex(L$a))}else{for(L$a=0,L$b=this._gradientMin.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientMin.getValueByIndex(L$a));for(L$a=0,L$b=this._gradientMax.gradientCount;L$a<L$b;L$a++)L$c=Math.max(L$c,this._gradientMax.getValueByIndex(L$a))}}return L$c},L$a.cloneTo=function(L$a){var L$b=L$a;L$b._type=this._type,L$b._separateAxes=this._separateAxes,this._gradient.cloneTo(L$b._gradient),this._gradientX.cloneTo(L$b._gradientX),this._gradientY.cloneTo(L$b._gradientY),this._gradientZ.cloneTo(L$b._gradientZ),L$b._constantMin=this._constantMin,L$b._constantMax=this._constantMax,this._constantMinSeparate.cloneTo(L$b._constantMinSeparate),this._constantMaxSeparate.cloneTo(L$b._constantMaxSeparate),this._gradientMin.cloneTo(L$b._gradientMin),this._gradientMax.cloneTo(L$b._gradientMax),this._gradientXMin.cloneTo(L$b._gradientXMin),this._gradientXMax.cloneTo(L$b._gradientXMax),this._gradientYMin.cloneTo(L$b._gradientYMin),this._gradientYMax.cloneTo(L$b._gradientYMax),this._gradientZMin.cloneTo(L$b._gradientZMin),this._gradientZMax.cloneTo(L$b._gradientZMax)},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$a,"gradientZ",function(){return this._gradientZ}),L$o(0,L$a,"gradient",function(){return this._gradient}),L$o(0,L$a,"separateAxes",function(){return this._separateAxes}),L$o(0,L$a,"type",function(){return this._type}),L$o(0,L$a,"gradientMin",function(){return this._gradientMin}),L$o(0,L$a,"constantMin",function(){return this._constantMin}),L$o(0,L$a,"gradientX",function(){return this._gradientX}),L$o(0,L$a,"gradientY",function(){return this._gradientY}),L$o(0,L$a,"gradientMax",function(){return this._gradientMax}),L$o(0,L$a,"constantMax",function(){return this._constantMax}),L$o(0,L$a,"constantMinSeparate",function(){return this._constantMinSeparate}),L$o(0,L$a,"constantMaxSeparate",function(){return this._constantMaxSeparate}),L$o(0,L$a,"gradientXMin",function(){return this._gradientXMin}),L$o(0,L$a,"gradientXMax",function(){return this._gradientXMax}),L$o(0,L$a,"gradientYMin",function(){return this._gradientYMin}),L$o(0,L$a,"gradientYMax",function(){return this._gradientYMax}),L$o(0,L$a,"gradientZMin",function(){return this._gradientZMin}),L$o(0,L$a,"gradientZMax",function(){return this._gradientZMax}),L$h.createByGradient=function(L$a){var L$b=new L$h;return L$b._type=0,L$b._separateAxes=!1,L$b._gradient=L$a,L$b},L$h.createByGradientSeparate=function(L$a,L$b,L$c){var L$d=new L$h;return L$d._type=0,L$d._separateAxes=!0,L$d._gradientX=L$a,L$d._gradientY=L$b,L$d._gradientZ=L$c,L$d},L$h.createByRandomTwoConstant=function(L$a,L$b){var L$c=new L$h;return L$c._type=1,L$c._separateAxes=!1,L$c._constantMin=L$a,L$c._constantMax=L$b,L$c},L$h.createByRandomTwoConstantSeparate=function(L$a,L$b){var L$c=new L$h;return L$c._type=1,L$c._separateAxes=!0,L$c._constantMinSeparate=L$a,L$c._constantMaxSeparate=L$b,L$c},L$h.createByRandomTwoGradient=function(L$a,L$b){var L$c=new L$h;return L$c._type=2,L$c._separateAxes=!1,L$c._gradientMin=L$a,L$c._gradientMax=L$b,L$c},L$h.createByRandomTwoGradientSeparate=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=new L$h;return L$g._type=2,L$g._separateAxes=!0,L$g._gradientXMin=L$a,L$g._gradientXMax=L$b,L$g._gradientYMin=L$c,L$g._gradientYMax=L$d,L$g._gradientZMin=L$e,L$g._gradientZMax=L$f,L$g},L$h}()),L$N=function(){function L$h(){this._type=0,this._constant=null,this._gradientX=null,this._gradientY=null,this._gradientZ=null,this._constantMin=null,this._constantMax=null,this._gradientXMin=null,this._gradientXMax=null,this._gradientYMin=null,this._gradientYMax=null,this._gradientZMin=null,this._gradientZMax=null}L$n(L$h,"laya.d3.core.particleShuriKen.module.GradientVelocity");var L$a=L$h.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.cloneTo=function(L$a){var L$b=L$a;L$b._type=this._type,this._constant.cloneTo(L$b._constant),this._gradientX.cloneTo(L$b._gradientX),this._gradientY.cloneTo(L$b._gradientY),this._gradientZ.cloneTo(L$b._gradientZ),this._constantMin.cloneTo(L$b._constantMin),this._constantMax.cloneTo(L$b._constantMax),this._gradientXMin.cloneTo(L$b._gradientXMin),this._gradientXMax.cloneTo(L$b._gradientXMax),this._gradientYMin.cloneTo(L$b._gradientYMin),this._gradientYMax.cloneTo(L$b._gradientYMax),this._gradientZMin.cloneTo(L$b._gradientZMin),this._gradientZMax.cloneTo(L$b._gradientZMax)},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$a,"gradientZ",function(){return this._gradientZ}),L$o(0,L$a,"constant",function(){return this._constant}),L$o(0,L$a,"type",function(){return this._type}),L$o(0,L$a,"gradientXMax",function(){return this._gradientXMax}),L$o(0,L$a,"constantMin",function(){return this._constantMin}),L$o(0,L$a,"gradientX",function(){return this._gradientX}),L$o(0,L$a,"gradientY",function(){return this._gradientY}),L$o(0,L$a,"gradientXMin",function(){return this._gradientXMin}),L$o(0,L$a,"constantMax",function(){return this._constantMax}),L$o(0,L$a,"gradientYMin",function(){return this._gradientYMin}),L$o(0,L$a,"gradientYMax",function(){return this._gradientYMax}),L$o(0,L$a,"gradientZMin",function(){return this._gradientZMin}),L$o(0,L$a,"gradientZMax",function(){return this._gradientZMax}),L$h.createByConstant=function(L$a){var L$b=new L$h;return L$b._type=0,L$b._constant=L$a,L$b},L$h.createByGradient=function(L$a,L$b,L$c){var L$d=new L$h;return L$d._type=1,L$d._gradientX=L$a,L$d._gradientY=L$b,L$d._gradientZ=L$c,L$d},L$h.createByRandomTwoConstant=function(L$a,L$b){var L$c=new L$h;return L$c._type=2,L$c._constantMin=L$a,L$c._constantMax=L$b,L$c},L$h.createByRandomTwoGradient=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=new L$h;return L$g._type=3,L$g._gradientXMin=L$a,L$g._gradientXMax=L$b,L$g._gradientYMin=L$c,L$g._gradientYMax=L$d,L$g._gradientZMin=L$e,L$g._gradientZMax=L$f,L$g},L$h}(),L$O=(function(){function L$a(L$a){this._angularVelocity=null,this.enbale=!1,this._angularVelocity=L$a}L$n(L$a,"laya.d3.core.particleShuriKen.module.RotationOverLifetime");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.cloneTo=function(L$a){var L$b=L$a;this._angularVelocity.cloneTo(L$b._angularVelocity),L$b.enbale=this.enbale},L$b.clone=function(){var L$a;switch(this._angularVelocity.type){case 0:L$a=this._angularVelocity.separateAxes?L$K.createByConstantSeparate(this._angularVelocity.constantSeparate.clone()):L$K.createByConstant(this._angularVelocity.constant);break;case 1:L$a=this._angularVelocity.separateAxes?L$K.createByGradientSeparate(this._angularVelocity.gradientX.clone(),this._angularVelocity.gradientY.clone(),this._angularVelocity.gradientZ.clone(),this._angularVelocity.gradientW.clone()):L$K.createByGradient(this._angularVelocity.gradient.clone());break;case 2:L$a=this._angularVelocity.separateAxes?L$K.createByRandomTwoConstantSeparate(this._angularVelocity.constantMinSeparate.clone(),this._angularVelocity.constantMaxSeparate.clone()):L$K.createByRandomTwoConstant(this._angularVelocity.constantMin,this._angularVelocity.constantMax);break;case 3:L$a=this._angularVelocity.separateAxes?L$K.createByRandomTwoGradientSeparate(this._angularVelocity.gradientXMin.clone(),this._angularVelocity.gradientYMin.clone(),this._angularVelocity.gradientZMin.clone(),this._angularVelocity.gradientWMin.clone(),this._angularVelocity.gradientXMax.clone(),this._angularVelocity.gradientYMax.clone(),this._angularVelocity.gradientZMax.clone(),this._angularVelocity.gradientWMax.clone()):L$K.createByRandomTwoGradient(this._angularVelocity.gradientMin.clone(),this._angularVelocity.gradientMax.clone())}var L$b=new this.constructor(L$a);return L$b.enbale=this.enbale,L$b},L$o(0,L$b,"angularVelocity",function(){return this._angularVelocity})}(),function(){function L$a(){this.enable=!1,this.randomDirection=!1}L$n(L$a,"laya.d3.core.particleShuriKen.module.shape.BaseShape");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b._getShapeBoundBox=function(L$a){throw new Error("BaseShape: must override it.")},L$b._getSpeedBoundBox=function(L$a){throw new Error("BaseShape: must override it.")},L$b.generatePositionAndDirection=function(L$a,L$b,L$c,L$d){throw new Error("BaseShape: must override it.")},L$b._calculateProceduralBounds=function(L$a,L$b,L$c){this._getShapeBoundBox(L$a);var L$d=L$a.min,L$e=L$a.max;L$gb.multiply(L$d,L$b,L$d),L$gb.multiply(L$e,L$b,L$e);var L$f=new L$Za(new L$gb,new L$gb);this.randomDirection?(L$f.min=new L$gb(-1,-1,-1),L$f.max=new L$gb(1,1,1)):this._getSpeedBoundBox(L$f);var L$g=new L$Za(new L$gb,new L$gb),L$h=L$g.min,L$i=L$g.max;L$gb.scale(L$f.min,L$c.y,L$h),L$gb.scale(L$f.max,L$c.y,L$i),L$gb.add(L$a.min,L$h,L$h),L$gb.add(L$a.max,L$i,L$i),L$gb.min(L$a.min,L$h,L$a.min),L$gb.max(L$a.max,L$h,L$a.max);var L$j=new L$Za(new L$gb,new L$gb),L$k=L$j.min,L$l=L$j.max;L$gb.scale(L$f.min,L$c.x,L$k),L$gb.scale(L$f.max,L$c.x,L$l),L$gb.min(L$j.min,L$l,L$h),L$gb.max(L$j.min,L$l,L$i),L$gb.min(L$a.min,L$h,L$a.min),L$gb.max(L$a.max,L$h,L$a.max)},L$b.cloneTo=function(L$a){L$a.enable=this.enable},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$a}()),L$T=function(){function L$f(){}return L$n(L$f,"laya.d3.core.particleShuriKen.module.shape.ShapeUtils"),L$f._randomPointUnitArcCircle=function(L$a,L$b,L$c){var L$d=L$b.elements,L$e=NaN;L$e=L$c?L$c.getFloat()*L$a:Math.random()*L$a,L$d[0]=Math.cos(L$e),L$d[1]=Math.sin(L$e)},L$f._randomPointInsideUnitArcCircle=function(L$a,L$b,L$c){var L$d=L$b.elements;L$f._randomPointUnitArcCircle(L$a,L$b,L$c);var L$e=NaN;L$e=L$c?Math.pow(L$c.getFloat(),.5):Math.pow(Math.random(),.5),L$d[0]=L$d[0]*L$e,L$d[1]=L$d[1]*L$e},L$f._randomPointUnitCircle=function(L$a,L$b){var L$c=L$a.elements,L$d=NaN;L$d=L$b?L$b.getFloat()*Math.PI*2:Math.random()*Math.PI*2,L$c[0]=Math.cos(L$d),L$c[1]=Math.sin(L$d)},L$f._randomPointInsideUnitCircle=function(L$a,L$b){var L$c=L$a.elements;L$f._randomPointUnitCircle(L$a);var L$d=NaN;L$d=L$b?Math.pow(L$b.getFloat(),.5):Math.pow(Math.random(),.5),L$c[0]=L$c[0]*L$d,L$c[1]=L$c[1]*L$d},L$f._randomPointUnitSphere=function(L$a,L$b){var L$c=L$a.elements,L$d=NaN,L$e=NaN;L$e=L$b?(L$d=L$c[2]=2*L$b.getFloat()-1,L$b.getFloat()*Math.PI*2):(L$d=L$c[2]=2*Math.random()-1,Math.random()*Math.PI*2);var L$f=Math.sqrt(1-L$d*L$d);L$c[0]=L$f*Math.cos(L$e),L$c[1]=L$f*Math.sin(L$e)},L$f._randomPointInsideUnitSphere=function(L$a,L$b){var L$c=L$a.elements;L$f._randomPointUnitSphere(L$a);var L$d=NaN;L$d=L$b?Math.pow(L$b.getFloat(),1/3):Math.pow(Math.random(),1/3),L$c[0]=L$c[0]*L$d,L$c[1]=L$c[1]*L$d,L$c[2]=L$c[2]*L$d},L$f._randomPointInsideHalfUnitBox=function(L$a,L$b){var L$c=L$a.elements;L$b?(L$c[0]=L$b.getFloat()-.5,L$c[1]=L$b.getFloat()-.5,L$c[2]=L$b.getFloat()-.5):(L$c[0]=Math.random()-.5,L$c[1]=Math.random()-.5,L$c[2]=Math.random()-.5)},L$f}(),L$U=(function(){function L$a(L$a){this._size=null,this.enbale=!1,this._size=L$a}L$n(L$a,"laya.d3.core.particleShuriKen.module.SizeOverLifetime");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.cloneTo=function(L$a){var L$b=L$a;this._size.cloneTo(L$b._size),L$b.enbale=this.enbale},L$b.clone=function(){var L$a;switch(this._size.type){case 0:L$a=this._size.separateAxes?L$M.createByGradientSeparate(this._size.gradientX.clone(),this._size.gradientY.clone(),this._size.gradientZ.clone()):L$M.createByGradient(this._size.gradient.clone());break;case 1:L$a=this._size.separateAxes?L$M.createByRandomTwoConstantSeparate(this._size.constantMinSeparate.clone(),this._size.constantMaxSeparate.clone()):L$M.createByRandomTwoConstant(this._size.constantMin,this._size.constantMax);break;case 2:L$a=this._size.separateAxes?L$M.createByRandomTwoGradientSeparate(this._size.gradientXMin.clone(),this._size.gradientYMin.clone(),this._size.gradientZMin.clone(),this._size.gradientXMax.clone(),this._size.gradientYMax.clone(),this._size.gradientZMax.clone()):L$M.createByRandomTwoGradient(this._size.gradientMin.clone(),this._size.gradientMax.clone())}var L$b=new this.constructor(L$a);return L$b.enbale=this.enbale,L$b},L$o(0,L$b,"size",function(){return this._size})}(),function(){function L$d(){this._type=0,this._constant=NaN,this._constantMin=NaN,this._constantMax=NaN}L$n(L$d,"laya.d3.core.particleShuriKen.module.StartFrame");var L$a=L$d.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.cloneTo=function(L$a){var L$b=L$a;L$b._type=this._type,L$b._constant=this._constant,L$b._constantMin=this._constantMin,L$b._constantMax=this._constantMax},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$a,"constant",function(){return this._constant}),L$o(0,L$a,"type",function(){return this._type}),L$o(0,L$a,"constantMin",function(){return this._constantMin}),L$o(0,L$a,"constantMax",function(){return this._constantMax}),L$d.createByConstant=function(L$a){var L$b=new L$d;return L$b._type=0,L$b._constant=L$a,L$b},L$d.createByRandomTwoConstant=function(L$a,L$b){var L$c=new L$d;return L$c._type=1,L$c._constantMin=L$a,L$c._constantMax=L$b,L$c},L$d}()),L$V=(function(){function L$a(L$a,L$b){this._frame=null,this._startFrame=null,this.tiles=null,this.type=0,this.randomRow=!1,this.rowIndex=0,this.cycles=0,this.enableUVChannels=0,this.enable=!1,this.tiles=new L$fb(1,1),this.type=0,this.randomRow=!0,this.rowIndex=0,this.cycles=1,this.enableUVChannels=1,this._frame=L$a,this._startFrame=L$b}L$n(L$a,"laya.d3.core.particleShuriKen.module.TextureSheetAnimation");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.cloneTo=function(L$a){var L$b=L$a;this.tiles.cloneTo(L$b.tiles),L$b.type=this.type,L$b.randomRow=this.randomRow,this._frame.cloneTo(L$b._frame),this._startFrame.cloneTo(L$b._startFrame),L$b.cycles=this.cycles,L$b.enableUVChannels=this.enableUVChannels,L$b.enable=this.enable},L$b.clone=function(){var L$a,L$b;switch(this._frame.type){case 0:L$a=L$J.createByConstant(this._frame.constant);break;case 1:L$a=L$J.createByOverTime(this._frame.frameOverTimeData.clone());break;case 2:L$a=L$J.createByRandomTwoConstant(this._frame.constantMin,this._frame.constantMax);break;case 3:L$a=L$J.createByRandomTwoOverTime(this._frame.frameOverTimeDataMin.clone(),this._frame.frameOverTimeDataMax.clone())}switch(this._startFrame.type){case 0:L$b=L$U.createByConstant(this._startFrame.constant);break;case 1:L$b=L$U.createByRandomTwoConstant(this._startFrame.constantMin,this._startFrame.constantMax)}var L$c=new this.constructor(L$a,L$b);return this.tiles.cloneTo(L$c.tiles),L$c.type=this.type,L$c.randomRow=this.randomRow,L$c.cycles=this.cycles,L$c.enableUVChannels=this.enableUVChannels,L$c.enable=this.enable,L$c},L$o(0,L$b,"frame",function(){return this._frame}),L$o(0,L$b,"startFrame",function(){return this._startFrame})}(),function(){function L$a(L$a){this._velocity=null,this.enbale=!1,this.space=0,this._velocity=L$a}L$n(L$a,"laya.d3.core.particleShuriKen.module.VelocityOverLifetime");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.cloneTo=function(L$a){var L$b=L$a;this._velocity.cloneTo(L$b._velocity),L$b.enbale=this.enbale,L$b.space=this.space},L$b.clone=function(){var L$a;switch(this._velocity.type){case 0:L$a=L$N.createByConstant(this._velocity.constant.clone());break;case 1:L$a=L$N.createByGradient(this._velocity.gradientX.clone(),this._velocity.gradientY.clone(),this._velocity.gradientZ.clone());break;case 2:L$a=L$N.createByRandomTwoConstant(this._velocity.constantMin.clone(),this._velocity.constantMax.clone());break;case 3:L$a=L$N.createByRandomTwoGradient(this._velocity.gradientXMin.clone(),this._velocity.gradientYMin.clone(),this._velocity.gradientZMin.clone(),this._velocity.gradientXMax.clone(),this._velocity.gradientYMax.clone(),this._velocity.gradientZMax.clone())}var L$b=new this.constructor(L$a);return L$b.enbale=this.enbale,L$b.space=this.space,L$b},L$o(0,L$b,"velocity",function(){return this._velocity})}(),function(){function L$a(){this._tempInt0=0,this._tempInt1=0,this._tempUint0=0,this._tempUint1=0,this._tempUint2=0,this._tempUint3=0,this._tempUint4=0,this._tempUint5=0,this._tempUint6=0,this._tempUint7=0,this._tempNumver0=NaN,this._tempNumver1=NaN,this._tempNumver2=NaN,this._tempNumver3=NaN,this._floatSizePerVer=7,this._defaultBufferSize=600*this._floatSizePerVer,this._vb=null,this._posInVBData=0,this._ib=null,this._posInIBData=0,this._primitiveType=NaN,this._hasBegun=!1,this._numVertsPerPrimitive=0,this._camera=null,this._sharderNameID=0,this._shader=null,this._shaderCompile=null,this._vbData=new Float32Array(this._defaultBufferSize),this._ibData=new Uint16Array(this._defaultBufferSize),this._spriteShaderValue=new L$mb,this._vb=L$Ob.create(L$a._vertexDeclaration,this._defaultBufferSize/this._floatSizePerVer,35048),this._ib=L$Nb.create("ushort",this._defaultBufferSize,35048),this._sharderNameID=L$Lb.nameKey.getID("LINE"),this._shaderCompile=L$Ab._preCompileShader[this._sharderNameID]}L$n(L$a,"laya.d3.core.PhasorSpriter3D");var L$b=L$a.prototype;return L$b.line=function(L$a,L$b,L$c,L$d){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+2*this._floatSizePerVer>this._vbData.length||this._posInIBData+2>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(L$a.x,L$a.y,L$a.z,L$b.x,L$b.y,L$b.z,L$b.w),this.addVertex(L$c.x,L$c.y,L$c.z,L$d.x,L$d.y,L$d.z,L$d.w),this.addIndexes(this._tempUint0,this._tempUint0+1),this},L$b.circle=function(L$a,L$b,L$c,L$d,L$e,L$f){for(this._hasBegun&&1===this._primitiveType||this.drawLinesException(),this._tempUint0=2*L$b,(this._posInVBData+this._tempUint0*this._floatSizePerVer>this._vbData.length||this._posInIBData+2*this._tempUint0>this._ibData.length)&&this.flush(),this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=0,this._tempInt0=0;this._tempNumver0<6.2832;this._tempNumver0=this._tempNumver0+3.1416/L$b,this._tempInt0++)this.addVertex(Math.sin(this._tempNumver0)*L$a,Math.cos(this._tempNumver0)*L$a,0,L$c,L$d,L$e,L$f),0===this._tempInt0?this.addIndexes(this._tempUint1):this._tempInt0===this._tempUint0-1?(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2,this._tempUint1)):(this._tempUint2=this._tempUint1+this._tempInt0,this.addIndexes(this._tempUint2,this._tempUint2));return this},L$b.plane=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+4*this._floatSizePerVer>this._vbData.length||this._posInIBData+6>this._ibData.length)&&this.flush(),this._tempNumver0=L$d/2,this._tempNumver1=L$e/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(L$a-this._tempNumver0,L$b+this._tempNumver1,L$c,L$f,L$g,L$h,L$i),this.addVertex(L$a+this._tempNumver0,L$b+this._tempNumver1,L$c,L$f,L$g,L$h,L$i),this.addVertex(L$a-this._tempNumver0,L$b-this._tempNumver1,L$c,L$f,L$g,L$h,L$i),this.addVertex(L$a+this._tempNumver0,L$b-this._tempNumver1,L$c,L$f,L$g,L$h,L$i),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint0+3),this},L$b.box=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){return this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+36>this._ibData.length)&&this.flush(),this._tempNumver0=L$d/2,this._tempNumver1=L$e/2,this._tempNumver2=L$f/2,this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(L$a-this._tempNumver0,L$b+this._tempNumver1,L$c+this._tempNumver2,L$g,L$h,L$i,L$j),this.addVertex(L$a+this._tempNumver0,L$b+this._tempNumver1,L$c+this._tempNumver2,L$g,L$h,L$i,L$j),this.addVertex(L$a-this._tempNumver0,L$b-this._tempNumver1,L$c+this._tempNumver2,L$g,L$h,L$i,L$j),this.addVertex(L$a+this._tempNumver0,L$b-this._tempNumver1,L$c+this._tempNumver2,L$g,L$h,L$i,L$j),this.addVertex(L$a+this._tempNumver0,L$b+this._tempNumver1,L$c-this._tempNumver2,L$g,L$h,L$i,L$j),this.addVertex(L$a-this._tempNumver0,L$b+this._tempNumver1,L$c-this._tempNumver2,L$g,L$h,L$i,L$j),this.addVertex(L$a+this._tempNumver0,L$b-this._tempNumver1,L$c-this._tempNumver2,L$g,L$h,L$i,L$j),this.addVertex(L$a-this._tempNumver0,L$b-this._tempNumver1,L$c-this._tempNumver2,L$g,L$h,L$i,L$j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint2,this._tempUint2,this._tempUint1,this._tempUint3,this._tempUint4,this._tempUint5,this._tempUint6,this._tempUint6,this._tempUint5,this._tempUint7,this._tempUint5,this._tempUint0,this._tempUint7,this._tempUint7,this._tempUint0,this._tempUint2,this._tempUint1,this._tempUint4,this._tempUint3,this._tempUint3,this._tempUint4,this._tempUint6,this._tempUint5,this._tempUint4,this._tempUint0,this._tempUint0,this._tempUint4,this._tempUint1,this._tempUint2,this._tempUint3,this._tempUint7,this._tempUint7,this._tempUint3,this._tempUint6),this},L$b.cone=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){for(this._hasBegun&&4===this._primitiveType||this.drawTrianglesException(),(this._posInVBData+(2*L$c+2)*this._floatSizePerVer>this._vbData.length||this._posInIBData+6*L$c>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData,this._tempUint1=this._posInVBData/this._floatSizePerVer,this._tempNumver0=2*Math.PI/L$c,this.addVertexIndex(0,L$b,0,L$d,L$e,L$f,L$g,this._tempUint0),this.addVertexIndex(0,0,0,L$d,L$e,L$f,L$g,this._tempUint0+this._floatSizePerVer),this._tempInt0=2,this._tempNumver1=0,this._tempInt1=0;this._tempInt1<L$c;this._tempInt1++)this._tempNumver2=Math.cos(this._tempNumver1),this._tempNumver3=Math.sin(this._tempNumver1),this.addVertexIndex(L$a*this._tempNumver2,0,L$a*this._tempNumver3,L$d,L$e,L$f,L$g,this._tempUint0+this._tempInt0*this._floatSizePerVer),this.addIndexes(this._tempUint1,this._tempUint1+this._tempInt0),this._tempInt1==L$c-1?this.addIndexes(this._tempUint1+2):this.addIndexes(this._tempUint1+this._tempInt0+1),this.addVertexIndex(L$a*this._tempNumver2,0,L$a*this._tempNumver3,L$d,L$e,L$f,L$g,this._tempUint0+(this._tempInt0+L$c)*this._floatSizePerVer),this.addIndexes(this._tempUint1+1),this._tempInt1==L$c-1?this.addIndexes(this._tempUint1+L$c+2):this.addIndexes(this._tempUint1+this._tempInt0+L$c+1),this.addIndexes(this._tempUint1+this._tempInt0+L$c),this._tempInt0++,this._tempNumver1+=this._tempNumver0;return this},L$b.boundingBoxLine=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){return this._hasBegun&&1===this._primitiveType||this.drawLinesException(),(this._posInVBData+8*this._floatSizePerVer>this._vbData.length||this._posInIBData+48>this._ibData.length)&&this.flush(),this._tempUint0=this._posInVBData/this._floatSizePerVer,this.addVertex(L$a,L$e,L$f,L$g,L$h,L$i,L$j),this.addVertex(L$d,L$e,L$f,L$g,L$h,L$i,L$j),this.addVertex(L$a,L$b,L$f,L$g,L$h,L$i,L$j),this.addVertex(L$d,L$b,L$f,L$g,L$h,L$i,L$j),this.addVertex(L$d,L$e,L$c,L$g,L$h,L$i,L$j),this.addVertex(L$a,L$e,L$c,L$g,L$h,L$i,L$j),this.addVertex(L$d,L$b,L$c,L$g,L$h,L$i,L$j),this.addVertex(L$a,L$b,L$c,L$g,L$h,L$i,L$j),this._tempUint1=this._tempUint0+1,this._tempUint2=this._tempUint0+2,this._tempUint3=this._tempUint0+3,this._tempUint4=this._tempUint0+4,this._tempUint5=this._tempUint0+5,this._tempUint6=this._tempUint0+6,this._tempUint7=this._tempUint0+7,this.addIndexes(this._tempUint0,this._tempUint1,this._tempUint1,this._tempUint3,this._tempUint3,this._tempUint2,this._tempUint2,this._tempUint0,this._tempUint4,this._tempUint5,this._tempUint5,this._tempUint7,this._tempUint7,this._tempUint6,this._tempUint6,this._tempUint4,this._tempUint5,this._tempUint0,this._tempUint0,this._tempUint2,this._tempUint2,this._tempUint7,this._tempUint7,this._tempUint5,this._tempUint1,this._tempUint4,this._tempUint4,this._tempUint6,this._tempUint6,this._tempUint3,this._tempUint3,this._tempUint1,this._tempUint5,this._tempUint4,this._tempUint4,this._tempUint1,this._tempUint1,this._tempUint0,this._tempUint0,this._tempUint5,this._tempUint2,this._tempUint3,this._tempUint3,this._tempUint6,this._tempUint6,this._tempUint7,this._tempUint7,this._tempUint2),this},L$b.addVertex=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){return this._hasBegun||this.addVertexIndexException(),this._vbData[this._posInVBData]=L$a,this._vbData[this._posInVBData+1]=L$b,this._vbData[this._posInVBData+2]=L$c,this._vbData[this._posInVBData+3]=L$d,this._vbData[this._posInVBData+4]=L$e,this._vbData[this._posInVBData+5]=L$f,this._vbData[this._posInVBData+6]=L$g,this._posInVBData+=this._floatSizePerVer,this},L$b.addVertexIndex=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){return this._hasBegun||this.addVertexIndexException(),this._vbData[L$h]=L$a,this._vbData[L$h+1]=L$b,this._vbData[L$h+2]=L$c,this._vbData[L$h+3]=L$d,this._vbData[L$h+4]=L$e,this._vbData[L$h+5]=L$f,this._vbData[L$h+6]=L$g,(L$h+=this._floatSizePerVer)>this._posInVBData&&(this._posInVBData=L$h),this},L$b.addIndexes=function(L$a){var L$b=arguments;this._hasBegun||this.addVertexIndexException();for(var L$c=0;L$c<L$b.length;L$c++)this._ibData[this._posInIBData]=L$b[L$c],this._posInIBData++;return this},L$b.begin=function(L$a,L$b){return this._hasBegun&&this.beginException0(),1!==L$a&&4!==L$a&&this.beginException1(),this._primitiveType=L$a,this._camera=L$b,this._hasBegun=!0,this},L$b.end=function(){return this._hasBegun||this.endException(),this.flush(),this._hasBegun=!1,this},L$b.flush=function(){0!==this._posInVBData&&(this._ib.setData(this._ibData),this._vb.setData(this._vbData),this._vb._bind(),this._ib._bind(),this._shader=this._shaderCompile.withCompile(0,0,0),this._shader.bind(),this._shader.uploadAttributes(L$a._vertexDeclaration.shaderValues.data,null),this._spriteShaderValue.setValue(1,this._camera.projectionViewMatrix.elements),this._shader.uploadSpriteUniforms(this._spriteShaderValue.data),L$A.drawCall++,L$F.mainContext.drawElements(this._primitiveType,this._posInIBData,5123,0),this._posInIBData=0,this._posInVBData=0)},L$b.addVertexIndexException=function(){throw new Error("请先调用begin()函数")},L$b.beginException0=function(){throw new Error("调用begin()前请确保已成功调用end()！")},L$b.beginException1=function(){throw new Error("只支持“LINES”和“TRIANGLES”两种基元！")},L$b.endException=function(){throw new Error("调用end()前请确保已成功调用begin()！")},L$b.drawLinesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“LINES”基元！")},L$b.drawTrianglesException=function(){throw new Error("您必须确保在此之前已调用begin()且使用“TRIANGLES”基元！")},L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(28,[new L$ga(0,"vector3",0),new L$ga(12,"vector4",1)])}]),L$a}()),L$W=function(){function L$a(){this._id=0,this._type=0,this._mainSortID=0,this._render=null,this._sprite3D=null,this._material=null,this._renderObj=null,this._staticBatch=null,this._tempBatchIndexStart=0,this._tempBatchIndexEnd=0,this._canDynamicBatch=!1,this._shaderValue=null,this._onPreRenderFunction=null,this._id=++L$a._uniqueIDCounter,this._canDynamicBatch=!0,this._shaderValue=new L$mb}L$n(L$a,"laya.d3.core.render.RenderElement");var L$b=L$a.prototype;return L$b.getDynamicBatchBakedVertexs=function(L$a){for(var L$b=this._renderObj._getVertexBuffer(L$a),L$c=L$b.getData().slice(),L$d=L$b.vertexDeclaration,L$e=L$d.getVertexElementByUsage(0).offset/4,L$f=L$d.getVertexElementByUsage(3).offset/4,L$g=this._sprite3D.transform,L$h=L$g.worldMatrix,L$i=L$g.rotation,L$j=L$d.vertexStride/4,L$k=0,L$l=L$c.length;L$k<L$l;L$k+=L$j){var L$m=L$k+L$e,L$n=L$k+L$f;L$qb.transformVector3ArrayToVector3ArrayCoordinate(L$c,L$m,L$h,L$c,L$m),L$qb.transformVector3ArrayByQuat(L$c,L$n,L$i,L$c,L$n)}return L$c},L$b.getBakedIndices=function(){return this._renderObj._getIndexBuffer().getData()},L$b._destroy=function(){this._staticBatch&&this._staticBatch._manager._garbageCollection(this)},L$o(0,L$b,"id",function(){return this._id}),L$o(0,L$b,"renderObj",function(){return this._renderObj},function(L$a){this._renderObj!==L$a&&(this._renderObj=L$a)}),L$a._uniqueIDCounter=0,L$a}(),L$X=function(){function L$b(L$a){this._id=0,this._needSort=!1,this._renderElements=null,this._renderableRenderObjects=null,this._dynamicBatchCombineRenderElements=null,this._finalElements=null,this._scene=null,this._id=++L$b._uniqueIDCounter,this._needSort=!1,this._scene=L$a,this._renderElements=[],this._renderableRenderObjects=[],this._dynamicBatchCombineRenderElements=[],this._errorRecord={}}L$n(L$b,"laya.d3.core.render.RenderQueue");var L$a=L$b.prototype;return L$a._sortOpaqueFunc=function(L$a,L$b){if(L$a._render&&L$b._render){var L$c=L$a._material.renderQueue-L$b._material.renderQueue;return 0==L$c?L$a._render._distanceForSort-L$b._render._distanceForSort:L$c}return 0},L$a._sortAlphaFunc=function(L$a,L$b){if(L$a._render&&L$b._render){var L$c=L$a._material.renderQueue-L$b._material.renderQueue;return 0==L$c?L$b._render._distanceForSort-L$a._render._distanceForSort:L$c}return 0},L$a._begainRenderElement=function(L$a,L$b,L$c){return!!L$b._beforeRender(L$a)},L$a._sortAlpha=function(L$a){L$b._cameraPosition=L$a,this._finalElements.sort(this._sortAlphaFunc)},L$a._sortOpaque=function(L$a){L$b._cameraPosition=L$a,this._finalElements.sort(this._sortOpaqueFunc)},L$a._preRender=function(L$a){this._finalElements=this._renderElements.concat(this._dynamicBatchCombineRenderElements)},L$a._render=function(L$a,L$b){for(var L$c,L$d,L$e,L$f,L$g,L$h,L$i=L$A.loopCount,L$j=this._scene,L$k=L$a.camera,L$l=(L$k.id,!1),L$m=0,L$n=this._finalElements.length;L$m<L$n;L$m++){var L$o,L$p,L$q,L$r=this._finalElements[L$m];if(null!=L$r._onPreRenderFunction&&L$r._onPreRenderFunction.call(L$r._sprite3D,L$a),0===L$r._type){if(L$a.owner=L$q=L$r._sprite3D,L$a.renderElement=L$r,L$q._preRenderUpdateComponents(L$a),L$o=L$r.renderObj,L$p=L$r._material,this._begainRenderElement(L$a,L$o,L$p)){if(L$c=L$o._getVertexBuffers(),!(L$e=(L$d=L$o._getVertexBuffer(0)).vertexDeclaration)){if(!this._errorRecord[L$d.id]){this._errorRecord[L$d.id]=1;var L$s="vertexBuffer:"+("("+L$d._destroyed+","+L$d._released+","+L$d._referenceCount+","+L$d._buffer+")")+", material:"+(L$p?L$p.__className+"("+L$p._destroyed+","+L$p._released+")":"null")+", owner:"+(L$q?L$q.__className+"("+L$q._destroyed+","+L$q._activeInHierarchy+","+L$q._displayedInStage+")":"null")+", renderObj:"+(L$o?L$o.__className+"("+L$o._destroyed+","+L$o._released+","+L$o._referenceCount+")":"")+", parent:, url:"+(L$q?L$q.url:"")+", disposeStack:"+L$d.disposeStack;L$v.recordError("报错：unknown vertexDeclaration  "+L$s)}continue}if(L$l=(L$f=L$a._shader=L$p._getShader(L$j._shaderDefineValue,L$e.shaderDefineValue,L$q._shaderDefineValue)).bind()||L$i!==L$f._uploadLoopCount,L$c){if(L$f._uploadVertexBuffer!==L$c||L$l){for(var L$t=0;L$t<L$c.length;L$t++){var L$u=L$c[L$t];L$f.uploadAttributesX(L$u.vertexDeclaration.shaderValues.data,L$u)}L$f._uploadVertexBuffer=L$c}}else(L$f._uploadVertexBuffer!==L$d||L$l)&&(L$f.uploadAttributes(L$e.shaderValues.data,null),L$f._uploadVertexBuffer=L$d);(L$f._uploadScene!==L$j||L$l)&&(L$f.uploadSceneUniforms(L$j._shaderValues.data),L$f._uploadScene=L$j),(L$k!==L$f._uploadCamera||L$f._uploadSprite3D!==L$q||L$l)&&(L$f.uploadSpriteUniforms(L$q._shaderValues.data),L$f._uploadSprite3D=L$q),(L$k!==L$f._uploadCamera||L$l)&&(L$f.uploadCameraUniforms(L$k._shaderValues.data),L$f._uploadCamera=L$k),(L$f._uploadMaterial!==L$p||L$l)&&(L$p._upload(),L$f._uploadMaterial=L$p),L$g!==L$p?(L$p._setRenderStateBlendDepth(),L$p._setRenderStateFrontFace(L$b,L$q.transform),L$g=L$p,L$h=L$q):L$h!==L$q&&(L$p._setRenderStateFrontFace(L$b,L$q.transform),L$h=L$q),L$o._render(L$a),L$f._uploadLoopCount=L$i}L$q._postRenderUpdateComponents(L$a)}else if(2===L$r._type){L$r.renderObj;L$a.owner=L$q=L$r._sprite3D,L$a.renderElement=L$r,L$a._batchIndexStart=L$r._tempBatchIndexStart,L$a._batchIndexEnd=L$r._tempBatchIndexEnd,L$o=L$r.renderObj,L$p=L$r._material,this._begainRenderElement(L$a,L$o,L$p)&&(L$e=(L$d=L$o._getVertexBuffer(0)).vertexDeclaration,L$l=(L$f=L$a._shader=L$p._getShader(L$j._shaderDefineValue,L$e.shaderDefineValue,L$q._shaderDefineValue)).bind()||L$i!==L$f._uploadLoopCount,(L$f._uploadVertexBuffer!==L$d||L$l)&&(L$f.uploadAttributes(L$e.shaderValues.data,null),L$f._uploadVertexBuffer=L$d),(L$f._uploadScene!==L$j||L$l)&&(L$f.uploadSceneUniforms(L$j._shaderValues.data),L$f._uploadScene=L$j),(L$k!==L$f._uploadCamera||L$f._uploadSprite3D!==L$q||L$l)&&(L$f.uploadSpriteUniforms(L$q._shaderValues.data),L$f._uploadSprite3D=L$q),(L$k!==L$f._uploadCamera||L$l)&&(L$f.uploadCameraUniforms(L$k._shaderValues.data),L$f._uploadCamera=L$k),(L$f._uploadMaterial!==L$p||L$l)&&(L$p._upload(),L$f._uploadMaterial=L$p),L$g!==L$p?(L$p._setRenderStateBlendDepth(),L$p._setRenderStateFrontFace(L$b,L$q.transform),L$g=L$p,L$h=L$q):L$h!==L$q&&(L$p._setRenderStateFrontFace(L$b,L$q.transform),L$h=L$q),L$o._render(L$a),L$f._uploadLoopCount=L$i)}}},L$a._renderShadow=function(L$a,L$b){for(var L$c,L$d,L$e,L$f,L$g,L$h=L$A.loopCount,L$i=this._scene,L$j=L$a.camera,L$k=!1,L$l=0,L$m=this._finalElements.length;L$l<L$m;L$l++){var L$n,L$o,L$p,L$q=this._finalElements[L$l];0===L$q._type&&(L$a.owner=L$p=L$q._sprite3D,L$b||L$p._projectionViewWorldUpdateCamera===L$j&&L$p._projectionViewWorldUpdateLoopCount===L$A.loopCount||(L$p._render._renderUpdate(L$a._projectionViewMatrix),L$p._projectionViewWorldUpdateLoopCount=L$A.loopCount,L$p._projectionViewWorldUpdateCamera=L$j),L$a.renderElement=L$q,L$p._preRenderUpdateComponents(L$a),L$n=L$q.renderObj,L$o=L$q._material,this._begainRenderElement(L$a,L$n,null)&&(L$d=(L$c=L$n._getVertexBuffer(0)).vertexDeclaration,L$k=(L$e=L$a._shader=L$o._getShader(L$i._shaderDefineValue,L$d.shaderDefineValue,L$p._shaderDefineValue)).bind()||L$h!==L$e._uploadLoopCount,(L$e._uploadVertexBuffer!==L$c||L$k)&&(L$e.uploadAttributes(L$d.shaderValues.data,null),L$e._uploadVertexBuffer=L$c),(L$j!==L$e._uploadCamera||L$e._uploadSprite3D!==L$p||L$k)&&(L$e.uploadSpriteUniforms(L$p._shaderValues.data),L$e._uploadSprite3D=L$p),(L$j!==L$e._uploadCamera||L$k)&&(L$e.uploadCameraUniforms(L$j._shaderValues.data),L$e._uploadCamera=L$j),(L$e._uploadMaterial!==L$o||L$k)&&(L$o._upload(),L$e._uploadMaterial=L$o),L$e._uploadRenderElement,L$f!==L$o?(L$o._setRenderStateFrontFace(!1,L$p.transform),L$f=L$o,L$g=L$p):L$g!==L$p&&(L$o._setRenderStateFrontFace(!1,L$p.transform),L$g=L$p),L$n._render(L$a),L$e._uploadLoopCount=L$h),L$p._postRenderUpdateComponents(L$a))}},L$a._clearRenderElements=function(){this._dynamicBatchCombineRenderElements.length=0,this._renderElements.length=0,this._needSort=!0},L$a._addRenderElement=function(L$a){this._renderElements.push(L$a),this._needSort=!0},L$a._addDynamicBatchElement=function(L$a){this._dynamicBatchCombineRenderElements.push(L$a)},L$o(0,L$a,"id",function(){return this._id}),L$b._uniqueIDCounter=0,L$b._cameraPosition=null,L$b}(),L$Y=function(){function L$a(){this._staticBatch=null,this._batchIndexStart=0,this._batchIndexEnd=0,this._viewMatrix=null,this._projectionMatrix=null,this._projectionViewMatrix=null,this._viewport=null,this._shader=null,this.elapsedTime=NaN,this.scene=null,this.owner=null,this.renderElement=null,this.camera=null}return L$n(L$a,"laya.d3.core.render.RenderState"),L$a.clientWidth=0,L$a.clientHeight=0,L$a}(),L$Z=function(){function L$g(L$a,L$b){this._exactBox=null,this._relaxBox=null,this._scene=null,this._parent=null,this._currentDepth=0,this._boundingSphere=new L$_a(new L$gb,0),this._corners=[new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb],this._boundingBoxCenter=new L$gb,this._children=L$d(8),this._objects=[],this._tempBoundBoxCorners=[new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb],this._scene=L$a,this._currentDepth=L$b}L$n(L$g,"laya.d3.core.scene.OctreeNode");var L$a=L$g.prototype;return L$v.imps(L$a,{"laya.d3.core.scene.ITreeNode":!0}),L$a.init=function(L$a,L$b){var L$c=new L$gb,L$d=new L$gb;L$gb.scale(L$b,-.5,L$c),L$gb.scale(L$b,.5,L$d),L$gb.add(L$c,L$a,L$c),L$gb.add(L$d,L$a,L$d),this.exactBox=new L$Za(L$c,L$d),this.relaxBox=new L$Za(L$c,L$d)},L$a.addTreeNode=function(L$a){1===Collision.boxContainsBox(this._relaxBox,L$a.boundingBox)?this.addNodeDown(L$a,0):this.addObject(L$a)},L$a.addChild=function(L$a){var L$b=this._children[L$a];if(null==L$b){L$b=new L$g(this._scene,this._currentDepth+1),(this._children[L$a]=L$b)._parent=this,L$gb.subtract(this._exactBox.max,this._exactBox.min,L$g.tempSize),L$gb.multiply(L$g.tempSize,L$g._octreeSplit[L$a],L$g.tempCenter),L$gb.add(this._exactBox.min,L$g.tempCenter,L$g.tempCenter),L$gb.scale(L$g.tempSize,.25,L$g.tempSize);var L$c=new L$gb,L$d=new L$gb;L$gb.subtract(L$g.tempCenter,L$g.tempSize,L$c),L$gb.add(L$g.tempCenter,L$g.tempSize,L$d),L$b.exactBox=new L$Za(L$c,L$d),L$gb.scale(L$g.tempSize,L$g.relax,L$g.tempSize);var L$e=new L$gb,L$f=new L$gb;L$gb.subtract(L$g.tempCenter,L$g.tempSize,L$e),L$gb.add(L$g.tempCenter,L$g.tempSize,L$f),L$b.relaxBox=new L$Za(L$e,L$f)}return L$b},L$a.addObject=function(L$a){(L$a._treeNode=this)._objects.push(L$a)},L$a.removeObject=function(L$a){if(L$a._treeNode!=this)return console.log("OctreeNode::removeObject error"),!1;var L$b=this._objects.indexOf(L$a);return-1!==L$b&&(this._objects.splice(L$b,1),!0)},L$a.clearObject=function(){this._objects.length=0},L$a.addNodeUp=function(L$a,L$b){this._parent&&1!==Collision.boxContainsBox(this._exactBox,L$a.boundingBox)?this._parent.addNodeUp(L$a,L$b-1):this.addNodeDown(L$a,L$b)},L$a.addNodeDown=function(L$a,L$b){if(L$b<this._scene.treeLevel){var L$c=this.inChildIndex(L$a.boundingBoxCenter),L$d=this.addChild(L$c);1===Collision.boxContainsBox(L$d._relaxBox,L$a.boundingBox)?L$d.addNodeDown(L$a,++L$b):this.addObject(L$a)}else this.addObject(L$a)},L$a.inChildIndex=function(L$a){return 4*(L$a.z<this._boundingBoxCenter.z?0:1)+2*(L$a.y<this._boundingBoxCenter.y?0:1)+(L$a.x<this._boundingBoxCenter.x?0:1)},L$a.updateObject=function(L$a){1===Collision.boxContainsBox(this._relaxBox,L$a.boundingBox)?(this.removeObject(L$a),L$a._treeNode=null,this.addNodeDown(L$a,this._currentDepth)):this._parent&&(this.removeObject(L$a),L$a._treeNode=null,this._parent.addNodeUp(L$a,this._currentDepth-1))},L$a.cullingObjects=function(L$a,L$b,L$c,L$d,L$e){var L$f,L$g=0,L$h=0,L$i=0,L$j=this._scene._dynamicBatchManager;for(L$g=0,L$f=this._objects.length;L$g<L$f;L$g++){var L$k=this._objects[L$g];if(L$I.isVisible(L$k._owner.layer.mask)&&L$k.enable){if(L$b&&(L$A.treeSpriteCollision+=1,0===L$a.containsBoundSphere(L$k.boundingSphere)))continue;L$k._renderUpdate(L$e),L$k._distanceForSort=L$gb.distance(L$k.boundingSphere.center,L$d)+L$k.sortingFudge;var L$l=L$k._renderElements;for(L$h=0,L$i=L$l.length;L$h<L$i;L$h++){var L$m=L$l[L$h],L$n=L$m._staticBatch;if(L$n&&L$n._material===L$m._material)L$n._addBatchRenderElement(L$m);else{var L$o=L$m.renderObj;L$o.triangleCount<10&&1===L$o._vertexBufferCount&&L$o._getIndexBuffer()&&L$m._material.renderQueue<2&&L$m._canDynamicBatch&&!L$k._owner.isStatic?L$j._addPrepareRenderElement(L$m):this._scene.getRenderQueue(L$m._material.renderQueue)._addRenderElement(L$m)}}}}for(L$g=0;L$g<8;L$g++){var L$p=this._children[L$g];if(null!=L$p){var L$q=L$b;if(L$b){var L$r=L$a.containsBoundBox(L$p._relaxBox);if(L$A.treeNodeCollision+=1,0===L$r)continue;L$q=2===L$r}L$p.cullingObjects(L$a,L$q,L$c,L$d,L$e)}}},L$a.cullingShadowObjects=function(L$a,L$b,L$c,L$d,L$e){var L$f,L$g=0,L$h=0,L$i=0;this._scene._dynamicBatchManager;for(L$g=0,L$f=this._objects.length;L$g<L$f;L$g++){var L$j=this._objects[L$g];if(L$j.castShadow&&L$I.isVisible(L$j._owner.layer.mask)&&L$j.enable){if(L$c&&0===L$a[0].containsBoundSphere(L$j.boundingSphere))continue;for(var L$k=1,L$l=L$a.length;L$k<L$l;L$k++){var L$m=L$b[L$k-1];if(0!==L$a[L$k].containsBoundSphere(L$j.boundingSphere)){var L$n=L$j._renderElements;for(L$h=0,L$i=L$n.length;L$h<L$i;L$h++)L$m._addRenderElement(L$n[L$h])}}}}for(L$g=0;L$g<8;L$g++){var L$o=this._children[L$g];if(null!=L$o){var L$p=L$c;if(L$c){var L$q=L$a[0].containsBoundBox(L$o._relaxBox);if(0===L$q)continue;L$p=2===L$q}L$o.cullingShadowObjects(L$a,L$b,L$p,L$d,L$e)}}},L$a.cullingShadowObjectsOnePSSM=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g,L$h=L$b[0],L$i=0,L$j=0,L$k=0;for(L$i=0,L$g=this._objects.length;L$i<L$g;L$i++){var L$l=this._objects[L$i];if(L$l.castShadow&&L$I.isVisible(L$l._owner.layer.mask)&&L$l.enable){if(L$d&&0===L$a.containsBoundSphere(L$l.boundingSphere))continue;L$l._renderUpdate(L$c);var L$m=L$l._renderElements;for(L$j=0,L$k=L$m.length;L$j<L$k;L$j++)L$h._addRenderElement(L$m[L$j])}}for(L$i=0;L$i<8;L$i++){var L$n=this._children[L$i];if(null!=L$n){var L$o=L$d;if(L$d){var L$p=L$a.containsBoundBox(L$n._relaxBox);if(0===L$p)continue;L$o=2===L$p}L$n.cullingShadowObjectsOnePSSM(L$a,L$b,L$c,L$o,L$e,L$f)}}},L$a.renderBoudingBox=function(L$a){this._renderBoudingBox(L$a);for(var L$b=0;L$b<8;++L$b){var L$c=this._children[L$b];L$c&&L$c.renderBoudingBox(L$a)}},L$a.buildAllChild=function(L$a){if(L$a<this._scene.treeLevel)for(var L$b=0;L$b<8;L$b++){this.addChild(L$b).buildAllChild(L$a+1)}},L$a._renderBoudingBox=function(L$a){},L$o(0,L$a,"exactBox",function(){return this._exactBox},function(L$a){this._exactBox=L$a,L$gb.add(L$a.min,L$a.max,this._boundingBoxCenter),L$gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter)}),L$o(0,L$a,"relaxBox",function(){return this._relaxBox},function(L$a){(this._relaxBox=L$a).getCorners(this._corners),L$_a.createfromPoints(this._corners,this._boundingSphere)}),L$g.debugMode=!1,L$g.relax=1.15,L$g.CHILDNUM=8,L$l(L$g,["tempVector0",function(){return this.tempVector0=new L$gb},"tempSize",function(){return this.tempSize=new L$gb},"tempCenter",function(){return this.tempCenter=new L$gb},"_octreeSplit",function(){return this._octreeSplit=[new L$gb(.25,.25,.25),new L$gb(.75,.25,.25),new L$gb(.25,.75,.25),new L$gb(.75,.75,.25),new L$gb(.25,.25,.75),new L$gb(.75,.25,.75),new L$gb(.25,.75,.75),new L$gb(.75,.75,.75)]}]),L$g}(),L$$=(function(){function L$a(){}L$n(L$a,"laya.d3.core.scene.SceneManager")}(),function(){function L$a(L$a,L$b,L$c,L$d){this._r=NaN,this._g=NaN,this._b=NaN,this._a=NaN,void 0===L$a&&(L$a=1),void 0===L$b&&(L$b=1),void 0===L$c&&(L$c=1),void 0===L$d&&(L$d=1),this._r=L$a,this._g=L$b,this._b=L$c,this._a=L$d}return L$n(L$a,"laya.d3.core.trail.module.Color",null,"Color$1"),L$a.prototype.cloneTo=function(L$a){L$a._r=this._r,L$a._g=this._g,L$a._b=this._b,L$a._a=this._a},L$l(L$a,["RED",function(){return this.RED=new L$a(1,0,0,1)},"GREEN",function(){return this.GREEN=new L$a(0,1,0,1)},"BLUE",function(){return this.BLUE=new L$a(0,0,1,1)},"CYAN",function(){return this.CYAN=new L$a(0,1,1,1)},"YELLOW",function(){return this.YELLOW=new L$a(1,.92,.016,1)},"MAGENTA",function(){return this.MAGENTA=new L$a(1,0,1,1)},"GRAY",function(){return this.GRAY=new L$a(.5,.5,.5,1)},"WHITE",function(){return this.WHITE=new L$a(1,1,1,1)},"BLACK",function(){return this.BLACK=new L$a(0,0,0,1)}]),L$a}()),L$_=(function(){function L$a(){this._mode=0,this._colorKeys=null,this._alphaKeys=null,this.index=0,this._colorKeyData=new Float32Array(40),this._alphaKeyData=new Float32Array(20),this._colorKeys=[],this._alphaKeys=[]}L$n(L$a,"laya.d3.core.trail.module.Gradient");var L$b=L$a.prototype;L$b.setKeys=function(L$a,L$b){var L$c,L$d;this._colorKeys=L$a;for(var L$e=this.index=0;L$e<L$a.length;L$e++){var L$f=(L$c=L$a[L$e]).color;this._colorKeyData[this.index++]=L$f._r,this._colorKeyData[this.index++]=L$f._g,this._colorKeyData[this.index++]=L$f._b,this._colorKeyData[this.index++]=L$c.time}this._alphaKeys=L$b;for(var L$g=this.index=0;L$g<L$b.length;L$g++)L$d=L$b[L$g],this._alphaKeyData[this.index++]=L$d.alpha,this._alphaKeyData[this.index++]=L$d.time},L$b.cloneTo=function(L$a){var L$b=0,L$c=0,L$d=this.colorKeys,L$e=[];for(L$b=0,L$c=L$d.length;L$b<L$c;L$b++){var L$f=new L$w;L$d[L$b].cloneTo(L$f),L$e.push(L$f)}var L$g=this.alphaKeys,L$h=[];for(L$b=0,L$c=L$g.length;L$b<L$c;L$b++){var L$i=new L$_;L$g[L$b].cloneTo(L$i),L$h.push(L$i)}L$a.setKeys(L$e,L$h)},L$o(0,L$b,"mode",function(){return this._mode},function(L$a){this._mode=L$a}),L$o(0,L$b,"colorKeys",function(){return this._colorKeys},function(L$a){this._colorKeys=L$a;for(var L$b=this.index=0;L$b<L$a.length;L$b++){var L$c=L$a[L$b],L$d=L$c.color;this._colorKeyData[this.index++]=L$d._r,this._colorKeyData[this.index++]=L$d._g,this._colorKeyData[this.index++]=L$d._b,this._colorKeyData[this.index++]=L$c.time}}),L$o(0,L$b,"alphaKeys",function(){return this._alphaKeys},function(L$a){this._alphaKeys=L$a;for(var L$b=this.index=0;L$b<L$a.length;L$b++){var L$c=L$a[L$b];this._alphaKeyData[this.index++]=L$c.alpha,this._alphaKeyData[this.index++]=L$c.time}})}(),function(){function L$a(L$a,L$b){this._alpha=NaN,this._time=NaN,void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),this._alpha=L$a,this._time=L$b}L$n(L$a,"laya.d3.core.trail.module.GradientAlphaKey");var L$b=L$a.prototype;return L$b.cloneTo=function(L$a){L$a.alpha=this.alpha,L$a.time=this.time},L$o(0,L$b,"alpha",function(){return this._alpha},function(L$a){this._alpha=L$a}),L$o(0,L$b,"time",function(){return this._time},function(L$a){this._time=L$a}),L$a}()),L$w=function(){function L$a(L$a,L$b){this._color=null,this._time=NaN,void 0===L$b&&(L$b=0),this._color=L$a||new L$$,this._time=L$b}L$n(L$a,"laya.d3.core.trail.module.GradientColorKey");var L$b=L$a.prototype;return L$b.cloneTo=function(L$a){this.color.cloneTo(L$a.color),L$a.time=this.time},L$o(0,L$b,"color",function(){return this._color},function(L$a){this._color=L$a}),L$o(0,L$b,"time",function(){return this._time},function(L$a){this._time=L$a}),L$a}(),L$x=(function(){function L$a(){}L$n(L$a,"laya.d3.core.trail.module.GradientMode"),L$a.Blend=0,L$a.Fixed=1}(),function(){function L$a(){}L$n(L$a,"laya.d3.core.trail.module.TextureMode"),L$a.Stretch=0,L$a.Tile=1}(),function(){function L$a(){this.time=NaN,this.inTangent=NaN,this.outTangent=NaN,this.value=NaN}L$n(L$a,"laya.d3.core.trail.module.TrailKeyFrame"),L$a.prototype.cloneTo=function(L$a){L$a.time=this.time,L$a.inTangent=this.inTangent,L$a.outTangent=this.outTangent,L$a.value=this.value}}(),function(){function L$b(L$a){this._id=0,this._owner=null,this._camera=null,this._vertexBuffers=null,this._verticesCount=0,this._virtualVerticesCount=0,this._maxVerticesCount=256,this._vertices1=null,this._vertexBuffer1=null,this._floatCountPerVertices1=8,this._verticesIndex1=0,this._everyAddVerticeCount1=0,this._delLength=0,this._vertices2=null,this._vertexBuffer2=null,this._floatCountPerVertices2=1,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._pointe=null,this._pointAtoBVector3e=null,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._curtime=NaN,this._curDisappearIndex=0,this._lastPosition=new L$gb,this._curPosition=new L$gb,this._delVector3=new L$gb,this._lastFixedVertexPosition=new L$gb,this._pointAtoBVector3=new L$gb,this._pointA=new L$gb,this._pointB=new L$gb,this._owner=L$a,this._id=L$b.renderElementCount++,0==this._id?L$a._owner.transform.position.cloneTo(this._lastPosition):L$a._curSubTrailFinishPosition.cloneTo(this._lastPosition),this._everyGroupVertexBirthTime=[],this._VerticesToTailLength=new Float32Array(this._maxVerticesCount),this._everyVertexToPreVertexDistance=new Float32Array(this._maxVerticesCount),this._vertices1=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices1),this._vertices2=new Float32Array(this._maxVerticesCount*this._floatCountPerVertices2),this._vertexBuffer1=new L$Ob(L$x.vertexDeclaration1,this._maxVerticesCount,35044,!0),this._vertexBuffer2=new L$Ob(L$x.vertexDeclaration2,this._maxVerticesCount,35044,!0),this._vertexBuffers=[],this._vertexBuffers.push(this._vertexBuffer1),this._vertexBuffers.push(this._vertexBuffer2)}L$n(L$b,"laya.d3.core.trail.TrailRenderElement");var L$a=L$b.prototype;L$v.imps(L$a,{"laya.d3.core.render.IRenderable":!0}),L$a._updateTrail=function(){this._everyAddVerticeCount1=0,this._isStart||this._addTrailByFirstPosition(this._lastPosition,this._curPosition),this._addTrailByNextPosition(this._curPosition),this._vertexBuffer1.setData(this._vertices1,this._verticesIndex1,this._verticesIndex1,this._everyAddVerticeCount1),this._verticesIndex1+=this._everyAddVerticeCount1,this._curPosition.cloneTo(this._lastPosition),2==this._virtualVerticesCount&&(this._verticesIndex1-=2*this._floatCountPerVertices1)},L$a._addTrailByFirstPosition=function(L$a,L$b){L$gb.subtract(L$b,L$a,this._delVector3),L$gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),L$gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),L$gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._updateVerticesByPosition(L$a),L$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._curtime=this._owner._hasLifeSubTrail?this._owner._curSubTrailFinishCurTime:this._owner._curtime,this._everyGroupVertexBirthTime.push(this._curtime),this._isStart=!0,this._owner._hasLifeSubTrail=!0},L$a._addTrailByNextPosition=function(L$a){L$gb.subtract(L$a,this._lastFixedVertexPosition,this._delVector3),L$gb.cross(this._delVector3,this._camera.forward,this._pointAtoBVector3),L$gb.normalize(this._pointAtoBVector3,this._pointAtoBVector3),L$gb.scale(this._pointAtoBVector3,this._owner.widthMultiplier/2,this._pointAtoBVector3),this._delLength=L$gb.scalarLength(this._delVector3),this._delLength-this._owner.minVertexDistance>=L$wa.zeroTolerance?(this._owner._trailTotalLength+=this._delLength,this._owner._trailSupplementLength=0,this._updateVerticesByPosition(L$a),L$a.cloneTo(this._lastFixedVertexPosition),this._verticesCount+=2,this._virtualVerticesCount=0,this._everyGroupVertexBirthTime.push(this._owner._curtime),this._verticesCount==this._maxVerticesCount&&this._onTrailRenderElementFinish()):(this._owner._trailSupplementLength=this._delLength,this._updateVerticesByPosition(L$a),this._virtualVerticesCount=2)},L$a._updateVerticesByPosition=function(L$a){this._pointe=L$a.elements,this._pointAtoBVector3e=this._pointAtoBVector3.elements,this._curtime=this._owner._curtime,this._owner._hasLifeSubTrail&&0==this._isStart&&(this._pointe=this._owner._curSubTrailFinishPosition.elements,this._pointAtoBVector3e=this._owner._curSubTrailFinishDirection.elements,this._curtime=this._owner._curSubTrailFinishCurTime),this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=-this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=1,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointe[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[0],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[1],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._pointAtoBVector3e[2],this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=this._curtime,this._vertices1[this._verticesIndex1+this._everyAddVerticeCount1++]=0,this._VerticesToTailLength[this._verticesCount/2]=this._owner._trailTotalLength+this._owner._trailSupplementLength,0==this._owner._trailSupplementLength?this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._delLength:this._everyVertexToPreVertexDistance[this._verticesCount/2]=this._isStart?this._owner._trailSupplementLength:0},L$a._updateVertexBuffer2=function(){var L$a,L$b=0,L$c=0,L$d=0;for(L$d=0,L$a=(this._verticesCount+this._virtualVerticesCount)/2;L$d<L$a;L$d++)L$c=0==this._owner.textureMode?(this._VerticesToTailLength[L$d]-this._owner._trailDeadLength)/(this._owner._trailTotalLength+this._owner._trailSupplementLength-this._owner._trailDeadLength):this._owner._trailTotalLength+this._owner._trailSupplementLength-this._VerticesToTailLength[L$d],this._vertices2[L$b++]=1-L$c,this._vertices2[L$b++]=1-L$c;this._vertexBuffer2.setData(this._vertices2,0,0,this._verticesCount+this._virtualVerticesCount)},L$a._onTrailRenderElementFinish=function(){this._lastFixedVertexPosition.cloneTo(this._owner._curSubTrailFinishPosition),this._pointAtoBVector3.cloneTo(this._owner._curSubTrailFinishDirection),this._owner._curSubTrailFinishCurTime=this._owner._curtime,this._isFinish=!0},L$a._updateDisappear=function(){var L$a,L$b=0;for(L$b=this._curDisappearIndex,L$a=(this._verticesCount+this._virtualVerticesCount)/2;L$b<L$a;L$b++)this._owner._curtime-this._everyGroupVertexBirthTime[L$b]>=this._owner.time+L$wa.zeroTolerance&&(this._curDisappearIndex++,this._owner._trailDeadLength+=this._everyVertexToPreVertexDistance[this._curDisappearIndex],this._curDisappearIndex>=(this._verticesCount+this._virtualVerticesCount)/2&&(this._isDead=!0))},L$a._beforeRender=function(L$a){return this._camera=L$a.camera,null!=this._camera&&(this._owner._owner.transform.position.cloneTo(this._curPosition),!this._isDead&&(this._verticesCount<this._maxVerticesCount?(this._owner._isStart||(this._owner._owner.transform.position.cloneTo(this._lastPosition),this._owner._isStart=!0),L$gb.equals(this._lastPosition,this._curPosition)||this._updateTrail()):this._isFinish&&(this._isFinish=!1,this._owner._curSubTrailFinished=!0),0<this._verticesCount)&&(this._updateVertexBuffer2(),this._updateDisappear(),!0))},L$a._render=function(L$a){this._isDead||(L$F.mainContext.drawArrays(5,2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),console.log(2*this._curDisappearIndex,this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex),L$A.drawCall++,L$A.trianglesFaces+=this._verticesCount+this._virtualVerticesCount-2*this._curDisappearIndex-2)},L$a._getVertexBuffer=function(L$a){return void 0===L$a&&(L$a=0),0===L$a?this._vertexBuffer1:1===L$a?this._vertexBuffer2:null},L$a._getVertexBuffers=function(){return this._vertexBuffers},L$a._getIndexBuffer=function(){return null},L$a.reActivate=function(){this._id=laya.d3.core.trail.TrailRenderElement.renderElementCount++,this._isStart=!1,this._isFinish=!1,this._isDead=!1,this._verticesCount=0,this._virtualVerticesCount=0,this._verticesIndex1=0,this._delLength=0,this._curDisappearIndex=0,this._everyGroupVertexBirthTime=[],this._owner._curSubTrailFinishPosition.cloneTo(this._lastPosition)},L$a._destroy=function(){this._vertexBuffer1.dispose(),this._vertexBuffer2.dispose(),this._vertices1=null,this._vertexBuffer1=null,this._vertices2=null,this._vertexBuffer2=null,this._vertexBuffers=null,this._everyGroupVertexBirthTime=null,this._VerticesToTailLength=null,this._everyVertexToPreVertexDistance=null,this._lastPosition=null,this._curPosition=null,this._delVector3=null,this._lastFixedVertexPosition=null,this._pointAtoBVector3=null,this._pointe=null,this._pointAtoBVector3e=null,this._pointA=null,this._pointB=null},L$o(0,L$a,"_vertexBufferCount",function(){return this._vertexBuffers.length}),L$o(0,L$a,"triangleCount",function(){return 0}),L$b.renderElementCount=0}(),function(){function L$a(){}L$n(L$a,"laya.d3.core.trail.VertexTrail");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration1}),L$o(1,L$a,"vertexDeclaration1",function(){return L$a._vertexDeclaration1}),L$o(1,L$a,"vertexDeclaration2",function(){return L$a._vertexDeclaration2}),L$l(L$a,["_vertexDeclaration1",function(){return this._vertexDeclaration1=new L$fa(32,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",41),new L$ga(24,"single",33),new L$ga(28,"single",40)])},"_vertexDeclaration2",function(){return this._vertexDeclaration2=new L$fa(4,[new L$ga(0,"single",38)])}]),L$a}()),L$aa=function(){function L$u(L$a){this._vertexDeclaration=null,this._vertexDatas=null,this._indexDatas=null,this._vertexBuffer=null,this._indexBuffer=null,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=null,this._materials=null,this._materialToRenderElementsOffsets=null,this._merageElements=null,this._combineRenderElementPool=null,this._combineRenderElementPoolIndex=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._combineRenderElements=[],this._materialToRenderElementsOffsets=[],this._materials=[],this._merageElements=[],this._combineRenderElementPool=[],this._combineRenderElementPoolIndex=0,this._vertexDeclaration=L$a}L$n(L$u,"laya.d3.graphics.DynamicBatch");var L$a=L$u.prototype;return L$v.imps(L$a,{"laya.d3.core.render.IRenderable":!0}),L$a._getVertexBuffer=function(L$a){return void 0===L$a&&(L$a=0),0===L$a?this._vertexBuffer:null},L$a._getIndexBuffer=function(){return this._indexBuffer},L$a._getCombineRenderElementFromPool=function(L$a,L$b,L$c){var L$d=this._combineRenderElementPool[this._combineRenderElementPoolIndex++];return L$d||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=L$d=new L$W,L$d._sprite3D=new L$Xb),L$d._sprite3D._render._renderUpdate(L$c),L$d},L$a._getRenderElement=function(L$a,L$b,L$c){this._vertexDatas||(this._vertexDatas=new Float32Array(this._vertexDeclaration.vertexStride/4*L$u.maxVertexCount),this._indexDatas=new Uint16Array(L$u.maxIndexCount),this._vertexBuffer=L$Ob.create(this._vertexDeclaration,L$u.maxVertexCount,35048),this._indexBuffer=L$Nb.create("ushort",L$u.maxIndexCount,35048));for(var L$d=this._merageElements.length=0,L$e=0,L$f=0,L$g=this._combineRenderElements.length;L$f<L$g;L$f++){var L$h=this._combineRenderElements[L$f],L$i=L$h.getDynamicBatchBakedVertexs(0),L$j=L$h.getBakedIndices(),L$k=L$h._sprite3D.transform._isFrontFaceInvert,L$l=L$d/(this._vertexDeclaration.vertexStride/4),L$m=L$e,L$n=L$m+L$j.length;L$h._tempBatchIndexStart=L$m,L$h._tempBatchIndexEnd=L$n,this._indexDatas.set(L$j,L$e);var L$o=0;if(L$k)for(L$o=L$m;L$o<L$n;L$o+=3){this._indexDatas[L$o]=L$l+this._indexDatas[L$o];var L$p=this._indexDatas[L$o+1],L$q=this._indexDatas[L$o+2];this._indexDatas[L$o+1]=L$l+L$q,this._indexDatas[L$o+2]=L$l+L$p}else for(L$o=L$m;L$o<L$n;L$o+=3)this._indexDatas[L$o]=L$l+this._indexDatas[L$o],this._indexDatas[L$o+1]=L$l+this._indexDatas[L$o+1],this._indexDatas[L$o+2]=L$l+this._indexDatas[L$o+2];L$e+=L$j.length,this._vertexDatas.set(L$i,L$d),L$d+=L$i.length}for(this._vertexBuffer.setData(this._vertexDatas),this._indexBuffer.setData(this._indexDatas),L$f=this._combineRenderElementPoolIndex=0,L$g=this._materials.length;L$f<L$g;L$f++){var L$r=this._getCombineRenderElementFromPool(L$a,L$b,L$c);L$r._type=2,L$r._staticBatch=null;var L$s=(L$r.renderObj=this)._combineRenderElements[this._materialToRenderElementsOffsets[L$f]]._tempBatchIndexStart,L$t=L$f+1===this._materialToRenderElementsOffsets.length?L$e:this._combineRenderElements[this._materialToRenderElementsOffsets[L$f+1]]._tempBatchIndexStart;L$r._tempBatchIndexStart=L$s,L$r._tempBatchIndexEnd=L$t,L$r._material=this._materials[L$f],this._merageElements.push(L$r)}},L$a._addCombineRenderObjTest=function(L$a){var L$b=L$a.renderObj,L$c=this._currentCombineIndexCount+L$b._getIndexBuffer().indexCount,L$d=this._currentCombineVertexCount+L$b._getVertexBuffer().vertexCount;return!(L$u.maxVertexCount<L$d||L$u.maxIndexCount<L$c)},L$a._addCombineRenderObj=function(L$a){var L$b=L$a.renderObj;this._combineRenderElements.push(L$a),this._currentCombineIndexCount=this._currentCombineIndexCount+L$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+L$b._getVertexBuffer().vertexCount},L$a._addCombineMaterial=function(L$a){this._materials.push(L$a)},L$a._addMaterialToRenderElementOffset=function(L$a){this._materialToRenderElementsOffsets.push(L$a)},L$a._clearRenderElements=function(){this._combineRenderElements.length=0,this._materials.length=0,this._materialToRenderElementsOffsets.length=0,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0},L$a._addToRenderQueue=function(L$a,L$b,L$c,L$d){this._getRenderElement(L$b,L$c,L$d);for(var L$e=0,L$f=this._materials.length;L$e<L$f;L$e++)L$a.getRenderQueue(this._materials[L$e].renderQueue)._addDynamicBatchElement(this._merageElements[L$e])},L$a._beforeRender=function(L$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},L$a._render=function(L$a){var L$b=L$a._batchIndexEnd-L$a._batchIndexStart;L$F.mainContext.drawElements(4,L$b,5123,2*L$a._batchIndexStart),L$A.drawCall++,L$A.trianglesFaces+=L$b/3},L$a._getVertexBuffers=function(){return null},L$o(0,L$a,"_vertexBufferCount",function(){return 1}),L$o(0,L$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),L$o(0,L$a,"combineRenderElementsCount",function(){return this._combineRenderElements.length}),L$u.maxVertexCount=2e4,L$u.maxIndexCount=4e4,L$u.maxCombineTriangleCount=10,L$u}(),L$ba=function(){function L$u(){this._dynamicBatches=null,this._prepareDynamicBatchCombineElements=null,this._dynamicBatches={},this._prepareDynamicBatchCombineElements=[]}L$n(L$u,"laya.d3.graphics.DynamicBatchManager");var L$a=L$u.prototype;return L$a.getDynamicBatch=function(L$a,L$b){var L$c,L$d=L$a.id.toString()+L$b;return this._dynamicBatches[L$d]?L$c=this._dynamicBatches[L$d]:this._dynamicBatches[L$d]=L$c=new L$aa(L$a),L$c},L$a._garbageCollection=function(){for(var L$a in this._dynamicBatches)0===this._dynamicBatches[L$a].combineRenderElementsCount&&delete this._dynamicBatches[L$a]},L$a._addPrepareRenderElement=function(L$a){this._prepareDynamicBatchCombineElements.push(L$a)},L$a._finishCombineDynamicBatch=function(L$a){var L$b,L$c,L$d;this._prepareDynamicBatchCombineElements.sort(L$u._sortPrepareDynamicBatch);for(var L$e,L$f,L$g,L$h,L$i,L$j=-1,L$k=!0,L$l=0,L$m=-1,L$n=0,L$o=this._prepareDynamicBatchCombineElements.length;L$n<L$o;L$n++){var L$p=(L$f=this._prepareDynamicBatchCombineElements[L$n]).renderObj._getVertexBuffer(0).vertexDeclaration,L$q=L$c!==L$p;L$q&&(L$l=0,L$c=L$p);var L$r=L$l!==L$j;if(L$r&&(L$j=L$l),(L$q||L$r)&&(L$g=this.getDynamicBatch(L$p,L$l),L$b=null),L$k)if(L$g._addCombineRenderObjTest(L$f)){if(L$b!==(L$e=L$f._material))L$h&&(L$a.getRenderQueue(L$i._material.renderQueue)._addRenderElement(L$i),L$i=L$h=null,L$m=-1),L$h=L$e,L$m=L$g.combineRenderElementsCount,L$i=L$f,L$b=L$e;else if(L$h){var L$s=L$i.renderObj,L$t=L$f.renderObj;L$s._getVertexBuffer().vertexCount+L$t._getVertexBuffer().vertexCount>L$aa.maxVertexCount||L$s._getIndexBuffer().indexCount+L$t._getIndexBuffer().indexCount>L$aa.maxIndexCount?(L$a.getRenderQueue(L$i._material.renderQueue)._addRenderElement(L$i),L$h=L$e,L$m=L$g.combineRenderElementsCount,L$i=L$f):(L$g._addCombineMaterial(L$h),L$g._addMaterialToRenderElementOffset(L$m),L$g._addCombineRenderObj(L$i),L$i=L$h=null,L$m=-1,L$g._addCombineRenderObj(L$f))}else L$g._addCombineRenderObj(L$f);L$k=!0}else L$h&&(L$a.getRenderQueue(L$i._material.renderQueue)._addRenderElement(L$i),L$i=L$h=null,L$m=-1),L$l++,L$k=!1;else L$d=this._prepareDynamicBatchCombineElements[L$n-1],L$g._addMaterialToRenderElementOffset(L$g.combineRenderElementsCount),L$b=L$d._material,L$g._addCombineMaterial(L$b),L$g._addCombineRenderObj(L$d),L$k=!0,L$b!==(L$e=L$f._material)?(L$h=L$e,L$m=L$g.combineRenderElementsCount,L$i=L$f):L$g._addCombineRenderObj(L$f),L$b=L$e}L$h&&(L$a.getRenderQueue(L$i._material.renderQueue)._addRenderElement(L$i),L$i=L$h=null,L$m=-1),this._prepareDynamicBatchCombineElements.length=0},L$a._clearRenderElements=function(){for(var L$a in this._dynamicBatches)this._dynamicBatches[L$a]._clearRenderElements()},L$a._addToRenderQueue=function(L$a,L$b,L$c,L$d){for(var L$e in this._dynamicBatches){var L$f=this._dynamicBatches[L$e];0<L$f.combineRenderElementsCount&&L$f._addToRenderQueue(L$a,L$b,L$c,L$d)}},L$a.dispose=function(){this._dynamicBatches=null},L$u._sortPrepareDynamicBatch=function(L$a,L$b){return L$a._mainSortID-L$b._mainSortID},L$u}(),L$ca=function(){function L$a(){}return L$n(L$a,"laya.d3.graphics.FrustumCulling"),L$a.renderShadowObjectCulling=function(L$a,L$b,L$c,L$d,L$e){var L$f=0,L$g=0,L$h=0,L$i=0;for(L$f=0,L$h=L$c.length;L$f<L$h;L$f++){var L$j=L$c[L$f];L$j&&L$j._clearRenderElements()}var L$k,L$l,L$m,L$n=L$a._cullingRenders;if(1<L$e){for(L$f=0,L$h=L$a._cullingRendersLength;L$f<L$h;L$f++)if((L$k=L$n[L$f]).castShadow&&L$I.isVisible(L$k._owner.layer.mask)&&L$k.enable)for(var L$o=1,L$p=L$b.length;L$o<L$p;L$o++)if(L$l=L$c[L$o-1],0!==L$b[L$o].containsBoundSphere(L$k.boundingSphere))for(L$g=0,L$i=(L$m=L$k._renderElements).length;L$g<L$i;L$g++)L$l._addRenderElement(L$m[L$g])}else for(L$f=0,L$h=L$a._cullingRendersLength;L$f<L$h;L$f++)if((L$k=L$n[L$f]).castShadow&&L$I.isVisible(L$k._owner.layer.mask)&&L$k.enable&&0!==L$b[0].containsBoundSphere(L$k.boundingSphere))for(L$k._renderUpdate(L$d),L$l=L$c[0],L$g=0,L$i=(L$m=L$k._renderElements).length;L$g<L$i;L$g++)L$l._addRenderElement(L$m[L$g])},L$a.renderShadowObjectCullingOctree=function(L$a,L$b,L$c,L$d,L$e){for(var L$f=0,L$g=L$c.length;L$f<L$g;L$f++){var L$h=L$c[L$f];L$h&&L$h._clearRenderElements()}1<L$e?L$a.treeRoot.cullingShadowObjects(L$b,L$c,!0,0,L$a):L$a.treeRoot.cullingShadowObjectsOnePSSM(L$b[0],L$c,L$d,!0,0,L$a)},L$a.renderObjectCulling=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=0,L$h=0,L$i=0,L$j=0,L$k=L$b._quenes,L$l=L$b._dynamicBatchManager,L$m=L$b._cullingRenders;for(L$g=0,L$h=L$k.length;L$g<L$h;L$g++){var L$n=L$k[L$g];L$n&&L$n._clearRenderElements()}var L$o=L$da._staticBatchManagers;for(L$g=0,L$h=L$o.length;L$g<L$h;L$g++)L$o[L$g]._clearRenderElements();L$l._clearRenderElements();var L$p=L$c.transform.position;for(L$g=0,L$h=L$b._cullingRendersLength;L$g<L$h;L$g++){var L$q=L$m[L$g];if(L$I.isVisible(L$q._owner.layer.mask)&&L$q.enable&&0!==L$a.containsBoundSphere(L$q.boundingSphere)&&L$q._renderUpdate(L$f)){L$q._distanceForSort=L$gb.distance(L$q.boundingSphere.center,L$p)+L$q.sortingFudge;var L$r=L$q._renderElements;for(L$i=0,L$j=L$r.length;L$i<L$j;L$i++){var L$s=L$r[L$i],L$t=L$s._staticBatch;if(L$t&&L$t._material===L$s._material)L$t._addBatchRenderElement(L$s);else{var L$u=L$s.renderObj;L$u.triangleCount<10&&1===L$u._vertexBufferCount&&L$u._getIndexBuffer()&&L$s._material.renderQueue<2&&L$s._canDynamicBatch&&!L$q._owner.isStatic?L$l._addPrepareRenderElement(L$s):L$b.getRenderQueue(L$s._material.renderQueue)._addRenderElement(L$s)}}}}for(L$g=0,L$h=L$o.length;L$g<L$h;L$g++)L$o[L$g]._addToRenderQueue(L$b,L$d,L$e,L$f);L$l._finishCombineDynamicBatch(L$b),L$l._addToRenderQueue(L$b,L$d,L$e,L$f)},L$a.renderObjectCullingOctree=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=0,L$h=0,L$i=L$b._quenes,L$j=L$b._dynamicBatchManager;for(L$g=0,L$h=L$i.length;L$g<L$h;L$g++){var L$k=L$i[L$g];L$k&&L$k._clearRenderElements()}var L$l=L$da._staticBatchManagers;for(L$g=0,L$h=L$l.length;L$g<L$h;L$g++)L$l[L$g]._clearRenderElements();for(L$j._clearRenderElements(),L$b._cullingRenders.length=0,L$b.treeRoot.cullingObjects(L$a,!0,0,L$c.transform.position,L$f),L$g=0,L$h=L$l.length;L$g<L$h;L$g++)L$l[L$g]._addToRenderQueue(L$b,L$d,L$e,L$f);L$j._finishCombineDynamicBatch(L$b),L$j._addToRenderQueue(L$b,L$d,L$e,L$f)},L$a.renderObjectCullingNoBoundFrustum=function(L$a,L$b,L$c,L$d,L$e){var L$f=0,L$g=0,L$h=0,L$i=0,L$j=L$a._quenes,L$k=L$a._dynamicBatchManager,L$l=L$a._cullingRenders;for(L$f=0,L$g=L$j.length;L$f<L$g;L$f++){var L$m=L$j[L$f];L$m&&L$m._clearRenderElements()}var L$n=L$da._staticBatchManagers;for(L$f=0,L$g=L$n.length;L$f<L$g;L$f++)L$n[L$f]._clearRenderElements();L$k._clearRenderElements();var L$o=L$b.transform.position;for(L$f=0,L$g=L$a._cullingRendersLength;L$f<L$g;L$f++){var L$p=L$l[L$f];if(L$I.isVisible(L$p._owner.layer.mask)&&L$p.enable){L$p._renderUpdate(L$e),L$p._distanceForSort=L$gb.distance(L$p.boundingSphere.center,L$o)+L$p.sortingFudge;var L$q=L$p._renderElements;for(L$h=0,L$i=L$q.length;L$h<L$i;L$h++){var L$r=L$q[L$h],L$s=L$r._staticBatch;if(L$s&&L$s._material===L$r._material)L$s._addBatchRenderElement(L$r);else{var L$t=L$r.renderObj;L$t.triangleCount<10&&1===L$t._vertexBufferCount&&L$t._getIndexBuffer()&&L$r._material.renderQueue<2&&L$r._canDynamicBatch&&!L$p._owner.isStatic?L$k._addPrepareRenderElement(L$r):L$a.getRenderQueue(L$r._material.renderQueue)._addRenderElement(L$r)}}}}for(L$f=0,L$g=L$n.length;L$f<L$g;L$f++)L$n[L$f]._addToRenderQueue(L$a,L$c,L$d,L$e);L$k._finishCombineDynamicBatch(L$a),L$k._addToRenderQueue(L$a,L$c,L$d,L$e)},L$a}(),L$da=function(){function L$f(){this._initBatchRenderElements=null,this._staticBatches=null,this._initBatchRenderElements=[],this._staticBatches={}}L$n(L$f,"laya.d3.graphics.StaticBatchManager");var L$a=L$f.prototype;return L$a._finishInit=function(){for(var L$a in this._staticBatches)this._staticBatches[L$a]._finishInit();this._initBatchRenderElements.length=0},L$a._initStaticBatchs=function(L$a){throw new Error("StaticBatchManager:must override this function.")},L$a._addInitBatchSprite=function(L$a){for(var L$b=L$a._render._renderElements,L$c=0,L$d=L$b.length;L$c<L$d;L$c++)this._initBatchRenderElements.push(L$b[L$c])},L$a._clearRenderElements=function(){for(var L$a in this._staticBatches)this._staticBatches[L$a]._clearRenderElements()},L$a._garbageCollection=function(L$a){var L$b=L$a._staticBatch,L$c=L$b._initBatchRenderElements,L$d=L$c.indexOf(L$a);L$c.splice(L$d,1),0===L$c.length&&(L$b.dispose(),delete this._staticBatches[L$b._key])},L$a._addToRenderQueue=function(L$a,L$b,L$c,L$d){for(var L$e in this._staticBatches){var L$f=this._staticBatches[L$e];0<L$f._batchRenderElements.length&&L$f._updateToRenderQueue(L$a,L$d)}},L$a.dispose=function(){this._staticBatches=null},L$f._addToStaticBatchQueue=function(L$a){L$a instanceof laya.d3.core.RenderableSprite3D&&L$a._addToInitStaticBatchManager();for(var L$b=0,L$c=L$a.numChildren;L$b<L$c;L$b++)L$f._addToStaticBatchQueue(L$a._childs[L$b])},L$f.combine=function(L$a,L$b){var L$c,L$d=0,L$e=0;if(L$b)for(L$d=0,L$e=L$b.length;L$d<L$e;L$d++){L$b[L$d]._addToInitStaticBatchManager()}else L$a&&L$f._addToStaticBatchQueue(L$a);for(L$d=0,L$e=L$f._staticBatchManagers.length;L$d<L$e;L$d++)(L$c=L$f._staticBatchManagers[L$d])._initStaticBatchs(L$a),L$c._finishInit()},L$f._staticBatchManagers=[],L$f}(),L$ea=function(){function L$a(L$a,L$b,L$c){this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=null,this._initBatchRenderElements=null,this._batchRenderElements=null,this._material=null,this._rootOwner=null,this._key=null,this._manager=null,this._key=L$a,this._manager=L$b,this._combineRenderElementPoolIndex=0,this._combineRenderElementPool=[],this._initBatchRenderElements=[],this._batchRenderElements=[],this._rootOwner=L$c}L$n(L$a,"laya.d3.graphics.StaticBatch");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),L$b._binarySearch=function(L$a){for(var L$b=0,L$c=this._batchRenderElements.length-1,L$d=0;L$b<=L$c;)L$d=Math.floor((L$b+L$c)/2),this._compareBatchRenderElement(this._batchRenderElements[L$d],L$a)?L$c=L$d-1:L$b=L$d+1;return L$b},L$b._compareBatchRenderElement=function(L$a,L$b){throw new Error("StaticBatch:must override this function.")},L$b._getVertexDecLightMap=function(L$a){return L$a===L$Na.vertexDeclaration?L$Ia.vertexDeclaration:L$a===L$Ma.vertexDeclaration?L$Ha.vertexDeclaration:L$a===L$Ba.vertexDeclaration?L$ua.vertexDeclaration:L$a===L$Ra.vertexDeclaration?null:L$a===L$pa.vertexDeclaration?L$qa.vertexDeclaration:L$a===L$Pa.vertexDeclaration?L$Ka.vertexDeclaration:L$a===L$Fa.vertexDeclaration?L$Ga.vertexDeclaration:L$a===L$Oa.vertexDeclaration?L$Ja.vertexDeclaration:L$a===L$Ma.vertexDeclaration?L$Ha.vertexDeclaration:L$a===L$Ca.vertexDeclaration?L$va.vertexDeclaration:L$a===L$Ra.vertexDeclaration?null:L$a===L$pa.vertexDeclaration?L$qa.vertexDeclaration:L$a===L$Qa.vertexDeclaration?L$La.vertexDeclaration:L$a===L$Fa.vertexDeclaration?L$Ga.vertexDeclaration:L$a},L$b._getCombineRenderElementFromPool=function(){throw new Error("StaticBatch:must override this function.")},L$b._addBatchRenderElement=function(L$a){this._batchRenderElements.splice(this._binarySearch(L$a),0,L$a)},L$b._updateToRenderQueue=function(L$a,L$b){this._combineRenderElementPoolIndex=0,this._getRenderElement(L$a.getRenderQueue(this._material.renderQueue)._renderElements,L$a,L$b)},L$b._getRenderElement=function(L$a,L$b,L$c){throw new Error("StaticBatch:must override this function.")},L$b._finishInit=function(){throw new Error("StaticBatch:must override this function.")},L$b._clearRenderElements=function(){this._batchRenderElements.length=0},L$b.dispose=function(){},L$b._getVertexBuffer=function(L$a){return void 0===L$a&&(L$a=0),null},L$b._getIndexBuffer=function(){return null},L$b._beforeRender=function(L$a){return!0},L$b._render=function(L$a){},L$b._getVertexBuffers=function(){return null},L$o(0,L$b,"_vertexBufferCount",function(){return 1}),L$o(0,L$b,"triangleCount",function(){return 0}),L$a.combine=function(L$a){console.log("StaticBatch: discard property,please use StaticBatchManager.combine() function instead."),L$da.combine(L$a)},L$a.maxBatchVertexCount=65535,L$a}(),L$fa=function(){function L$g(L$a,L$b){if(this._id=0,this._shaderValues=null,this._shaderDefineValue=0,this._vertexStride=0,this._vertexElements=null,this._vertexElementsDic=null,this._id=++L$g._uniqueIDCounter,this._id>L$g.maxVertexDeclaration)throw new Error("VertexDeclaration: VertexDeclaration count should not large than ",L$g.maxVertexDeclaration);this._shaderValues=new L$mb,this._vertexElementsDic={},this._vertexStride=L$a,this._vertexElements=L$b;for(var L$c=0;L$c<L$b.length;L$c++){var L$d=L$b[L$c],L$e=L$d.elementUsage;this._vertexElementsDic[L$e]=L$d;var L$f=[L$g._getTypeSize(L$d.elementFormat)/4,5126,!1,this._vertexStride,L$d.offset];switch(this._shaderValues.setValue(L$e,L$f),L$e){case 1:this._addShaderDefine(L$Ab.SHADERDEFINE_COLOR);break;case 2:this._addShaderDefine(L$Ab.SHADERDEFINE_UV0);break;case 15:this._addShaderDefine(L$Ab.SHADERDEFINE_UV1)}}}L$n(L$g,"laya.d3.graphics.VertexDeclaration");var L$a=L$g.prototype;return L$a._addShaderDefine=function(L$a){this._shaderDefineValue|=L$a},L$a._removeShaderDefine=function(L$a){this._shaderDefineValue&=~L$a},L$a.getVertexElements=function(){return this._vertexElements.slice()},L$a.getVertexElementByUsage=function(L$a){return this._vertexElementsDic[L$a]},L$a.unBinding=function(){},L$o(0,L$a,"shaderDefineValue",function(){return this._shaderDefineValue}),L$o(0,L$a,"id",function(){return this._id}),L$o(0,L$a,"vertexStride",function(){return this._vertexStride}),L$o(0,L$a,"shaderValues",function(){return this._shaderValues}),L$g._getTypeSize=function(L$a){switch(L$a){case"single":return 4;case"vector2":return 8;case"vector3":return 12;case"vector4":return 16;case"color":case"byte4":case"short2":return 4;case"short4":return 8;case"normalizedshort2":return 4;case"normalizedshort4":return 8;case"halfvector2":return 4;case"halfvector4":return 8}return 0},L$g.getVertexStride=function(L$a){for(var L$b=0,L$c=0;L$c<L$a.Length;L$c++){var L$d=L$a[L$c],L$e=L$d.offset+L$g._getTypeSize(L$d.elementFormat);L$b<L$e&&(L$b=L$e)}return L$b},L$g._maxVertexDeclarationBit=1e3,L$g._uniqueIDCounter=1,L$l(L$g,["maxVertexDeclaration",function(){return this.maxVertexDeclaration=2147483647-1e3*Math.floor(2147483.647)}]),L$g}(),L$ga=function(){function L$a(L$a,L$b,L$c){this.offset=0,this.elementFormat=null,this.elementUsage=0,this.offset=L$a,this.elementFormat=L$b,this.elementUsage=L$c}return L$n(L$a,"laya.d3.graphics.VertexElement"),L$a}(),L$ha=(function(){function L$a(){}L$n(L$a,"laya.d3.graphics.VertexElementFormat"),L$a.Single="single",L$a.Vector2="vector2",L$a.Vector3="vector3",L$a.Vector4="vector4",L$a.Color="color",L$a.Byte4="byte4",L$a.Short2="short2",L$a.Short4="short4",L$a.NormalizedShort2="normalizedshort2",L$a.NormalizedShort4="normalizedshort4",L$a.HalfVector2="halfvector2",L$a.HalfVector4="halfvector4"}(),function(){function L$a(){}L$n(L$a,"laya.d3.graphics.VertexElementUsage"),L$a.POSITION0=0,L$a.COLOR0=1,L$a.TEXTURECOORDINATE0=2,L$a.NORMAL0=3,L$a.BINORMAL0=4,L$a.TANGENT0=5,L$a.BLENDINDICES0=6,L$a.BLENDWEIGHT0=7,L$a.DEPTH0=8,L$a.FOG0=9,L$a.POINTSIZE0=10,L$a.SAMPLE0=11,L$a.TESSELLATEFACTOR0=12,L$a.COLOR1=13,L$a.NEXTTEXTURECOORDINATE0=14,L$a.TEXTURECOORDINATE1=15,L$a.NEXTTEXTURECOORDINATE1=16,L$a.CORNERTEXTURECOORDINATE0=17,L$a.VELOCITY0=18,L$a.STARTCOLOR0=19,L$a.STARTSIZE=20,L$a.AGEADDSCALE0=21,L$a.STARTROTATION=22,L$a.ENDCOLOR0=23,L$a.STARTLIFETIME=24,L$a.TIME0=33,L$a.SHAPEPOSITIONSTARTLIFETIME=30,L$a.DIRECTIONTIME=32,L$a.SIZEROTATION0=27,L$a.RADIUS0=28,L$a.RADIAN0=29,L$a.STARTSPEED=31,L$a.RANDOM0=34,L$a.RANDOM1=35,L$a.SIMULATIONWORLDPOSTION=36,L$a.SIMULATIONWORLDROTATION=37,L$a.TEXTURECOORDINATE0X=38,L$a.TEXTURECOORDINATE0X1=39,L$a.TEXTURECOORDINATE0Y=40,L$a.OFFSETVECTOR=41}(),function(){function L$a(L$a,L$b,L$c){this._position=null,this._textureCoordinate0=null,this._time=NaN,this._position=L$a,this._textureCoordinate0=L$b,this._time=L$c}L$n(L$a,"laya.d3.graphics.VertexGlitter");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate0}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"time",function(){return this._time}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(24,[new L$ga(0,"vector3",0),new L$ga(12,"vector2",2),new L$ga(20,"single",33)])}])}(),function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){this._cornerTextureCoordinate=null,this._position=null,this._velocity=null,this._startColor=null,this._endColor=null,this._sizeRotation=null,this._radius=null,this._radian=null,this._ageAddScale=NaN,this._time=NaN,this._cornerTextureCoordinate=L$a,this._position=L$b,this._velocity=L$c,this._startColor=L$d,this._endColor=L$e,this._sizeRotation=L$f,this._radius=L$g,this._radian=L$h,this._ageAddScale=L$i,this._time=L$j}L$n(L$a,"laya.d3.graphics.VertexParticle");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"endColor",function(){return this._endColor}),L$o(0,L$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),L$o(0,L$b,"sizeRotation",function(){return this._sizeRotation}),L$o(0,L$b,"velocity",function(){return this._velocity}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"startColor",function(){return this._startColor}),L$o(0,L$b,"radius",function(){return this._radius}),L$o(0,L$b,"radian",function(){return this._radian}),L$o(0,L$b,"ageAddScale",function(){return this._ageAddScale}),L$o(0,L$b,"time",function(){return this._time}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(116,[new L$ga(0,"vector4",17),new L$ga(16,"vector3",0),new L$ga(28,"vector3",18),new L$ga(40,"vector4",19),new L$ga(56,"vector4",23),new L$ga(72,"vector3",27),new L$ga(84,"vector2",28),new L$ga(92,"vector4",29),new L$ga(108,"single",24),new L$ga(112,"single",33)])}])}(),function(){function L$a(L$a){this._position=null,this._position=L$a}L$n(L$a,"laya.d3.graphics.VertexPosition");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(12,[new L$ga(0,"vector3",0)])}]),L$a}()),L$ia=function(){function L$a(L$a,L$b){this._position=null,this._normal=null,this._position=L$a,this._normal=L$b}L$n(L$a,"laya.d3.graphics.VertexPositionNormal");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(24,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3)])}]),L$a}(),L$ja=function(){function L$a(L$a,L$b,L$c){this._position=null,this._normal=null,this._color=null,this._position=L$a,this._normal=L$b,this._color=L$c}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColor");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(40,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1)])}]),L$a}(),L$ka=function(){function L$a(L$a,L$b,L$c,L$d,L$e){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._blendIndex=L$d,this._blendWeight=L$e}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorSkin");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(72,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector4",7),new L$ga(56,"vector4",6)])}]),L$a}(),L$la=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._tangent=L$d,this._blendIndex=L$e,this._blendWeight=L$f}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorSkinSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(88,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector4",7),new L$ga(56,"vector4",6),new L$ga(72,"vector4",5)])}]),L$a}(),L$ma=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f){this._position=null,this._normal=null,this._color=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._tangent=L$d,this._blendIndex=L$e,this._blendWeight=L$f}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorSkinTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(84,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector4",7),new L$ga(56,"vector4",6),new L$ga(72,"vector3",5)])}]),L$a}(),L$na=function(){function L$a(L$a,L$b,L$c,L$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._tangent=L$d}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(56,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector4",5)])}]),L$a}(),L$oa=function(){function L$a(L$a,L$b,L$c,L$d){this._position=null,this._normal=null,this._color=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._tangent=L$d}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(52,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector3",5)])}]),L$a}(),L$pa=function(){function L$a(L$a,L$b,L$c,L$d){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate=L$d}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTexture");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(48,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2)])}]),L$a}(),L$qa=function(){function L$a(L$a,L$b,L$c,L$d,L$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate0=L$d,this._textureCoordinate1=L$e}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(56,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector2",15)])}]),L$a}(),L$ra=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate0=L$d,this._textureCoordinate1=L$e,this._blendIndex=L$f,this._blendWeight=L$g}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Skin");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(88,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector2",15),new L$ga(56,"vector4",7),new L$ga(72,"vector4",6)])}]),L$a}(),L$sa=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate0=L$d,this._textureCoordinate1=L$e,this._tangent=L$f,this._blendIndex=L$g,this._blendWeight=L$h}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(104,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector2",15),new L$ga(56,"vector4",7),new L$ga(72,"vector4",6),new L$ga(88,"vector4",5)])}]),L$a}(),L$ta=function(){function L$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1SkinTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$b.VertexPositionNormalColorTexture0SkinTangent=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate0=L$d,this._textureCoordinate1=L$e,this._tangent=L$f,this._blendIndex=L$g,this._blendWeight=L$h},L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(100,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector2",15),new L$ga(56,"vector4",7),new L$ga(72,"vector4",6),new L$ga(88,"vector3",5)])}]),L$a}(),L$ua=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate0=L$d,this._textureCoordinate1=L$e,this._tangent=L$f}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1STangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(72,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector2",15),new L$ga(56,"vector4",5)])}]),L$a}(),L$va=function(){function L$a(){this._position=null,this._normal=null,this._color=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTexture0Texture1Tangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$b.VertexPositionNormalColorTexture0Tangent=function(L$a,L$b,L$c,L$d,L$e,L$f){this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate0=L$d,this._textureCoordinate1=L$e,this._tangent=L$f},L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(68,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector2",15),new L$ga(56,"vector3",5)])}]),L$a}(),L$ya=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate=L$d,this._blendIndex=L$e,this._blendWeight=L$f}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkin");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(80,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector4",7),new L$ga(64,"vector4",6)])}]),L$a}(),L$za=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate=L$d,this._tangent=L$e,this._blendIndex=L$f,this._blendWeight=L$g}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(96,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector4",7),new L$ga(64,"vector4",6),new L$ga(80,"vector4",5)])}]),L$a}(),L$Aa=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate=L$d,this._tangent=L$e,this._blendIndex=L$f,this._blendWeight=L$g}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTextureSkinTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(92,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector4",7),new L$ga(64,"vector4",6),new L$ga(80,"vector3",5)])}]),L$a}(),L$Ba=function(){function L$a(L$a,L$b,L$c,L$d,L$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate=L$d,this._tangent=L$e}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTextureSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(64,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector4",5)])}]),L$a}(),L$Ca=function(){function L$a(L$a,L$b,L$c,L$d,L$e){this._position=null,this._normal=null,this._color=null,this._textureCoordinate=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._color=L$c,this._textureCoordinate=L$d,this._tangent=L$e}L$n(L$a,"laya.d3.graphics.VertexPositionNormalColorTextureTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"color",function(){return this._color}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(60,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",1),new L$ga(40,"vector2",2),new L$ga(48,"vector3",5)])}]),L$a}(),L$Da=function(){function L$a(L$a,L$b,L$c){this._position=null,this._normal=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._tangent=L$c}L$n(L$a,"laya.d3.graphics.VertexPositionNormalSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(40,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector4",5)])}]),L$a}(),L$Ea=function(){function L$a(L$a,L$b,L$c){this._position=null,this._normal=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._tangent=L$c}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(36,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector3",5)])}]),L$a}(),L$Fa=function(){function L$a(L$a,L$b,L$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTexture");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(32,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2)])}]),L$a}(),L$Ga=function(){function L$a(L$a,L$b,L$c,L$d){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._position=L$a,this._normal=L$b,this._textureCoordinate0=L$c,this._textureCoordinate1=L$d}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(40,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector2",15)])}]),L$a}(),L$Ha=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._position=L$a,this._normal=L$b,this._textureCoordinate0=L$c,this._textureCoordinate1=L$d,this._blendIndex=L$e,this._blendWeight=L$f}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Skin");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(72,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector2",15),new L$ga(40,"vector4",7),new L$ga(56,"vector4",6)])}]),L$a}(),L$Ia=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._textureCoordinate0=L$c,this._textureCoordinate1=L$d,this._tangent=L$e,this._blendIndex=L$f,this._blendWeight=L$g}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(88,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector2",15),new L$ga(40,"vector4",7),new L$ga(56,"vector4",6),new L$ga(72,"vector4",5)])}]),L$a}(),L$Ja=function(){function L$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1SkinTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$b.VertexPositionNormalTexture0SkinTangent=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){this._position=L$a,this._normal=L$b,this._textureCoordinate0=L$c,this._textureCoordinate1=L$d,this._tangent=L$e,this._blendIndex=L$f,this._blendWeight=L$g},L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(84,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector2",15),new L$ga(40,"vector4",7),new L$ga(56,"vector4",6),new L$ga(72,"vector3",5)])}]),L$a}(),L$Ka=function(){function L$a(L$a,L$b,L$c,L$d,L$e){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._textureCoordinate0=L$c,this._textureCoordinate1=L$d,this._tangent=L$e}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1STangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(56,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector2",15),new L$ga(40,"vector4",5)])}]),L$a}(),L$La=function(){function L$a(){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._tangent=null}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTexture0Texture1Tangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$b.VertexPositionNormalTexture0Tangent=function(L$a,L$b,L$c,L$d,L$e){this._position=L$a,this._normal=L$b,this._textureCoordinate0=L$c,this._textureCoordinate1=L$d,this._tangent=L$e},L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(52,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector2",15),new L$ga(40,"vector3",5)])}]),L$a}(),L$Ma=function(){function L$a(L$a,L$b,L$c,L$d,L$e){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c,this._blendIndex=L$d,this._blendWeight=L$e}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTextureSkin");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(64,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector4",7),new L$ga(48,"vector4",6)])}]),L$a}(),L$Na=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c,this._tangent=L$d,this._blendIndex=L$e,this._blendWeight=L$f}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTextureSkinSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(80,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector4",7),new L$ga(48,"vector4",6),new L$ga(64,"vector4",5)])}]),L$a}(),L$Oa=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f){this._position=null,this._normal=null,this._textureCoordinate=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c,this._tangent=L$d,this._blendIndex=L$e,this._blendWeight=L$f}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTextureSkinTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(76,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector4",7),new L$ga(48,"vector4",6),new L$ga(64,"vector3",5)])}]),L$a}(),L$Pa=function(){function L$a(L$a,L$b,L$c,L$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c,this._tangent=L$d}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTextureSTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(48,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector4",5)])}]),L$a}(),L$Qa=function(){function L$a(L$a,L$b,L$c,L$d){this._position=null,this._normal=null,this._textureCoordinate=null,this._tangent=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c,this._tangent=L$d}L$n(L$a,"laya.d3.graphics.VertexPositionNormalTextureTangent");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(44,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector3",5)])}]),L$a}(),L$Ra=function(){function L$a(L$a,L$b,L$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c}L$n(L$a,"laya.d3.graphics.VertexPositionNTBTexture");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(56,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector3",5),new L$ga(36,"vector3",4),new L$ga(48,"vector2",2)])}]),L$a}(),L$Sa=function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){this._position=null,this._normal=null,this._textureCoordinate0=null,this._textureCoordinate1=null,this._blendIndex=null,this._blendWeight=null,this._tangent=null,this.binormal=null,this._position=L$a,this._normal=L$b,this._textureCoordinate0=L$d,this._textureCoordinate1=L$e,this._tangent=L$f,L$c=L$c,this._blendIndex=L$g,this._blendWeight=L$h}L$n(L$a,"laya.d3.graphics.VertexPositionNTBTexture0Texture1Skin");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"tangent",function(){return this._tangent}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(0,L$b,"textureCoordinate1",function(){return this._textureCoordinate1}),L$o(0,L$b,"blendIndex",function(){return this._blendIndex}),L$o(0,L$b,"blendWeight",function(){return this._blendWeight}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(96,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector3",5),new L$ga(36,"vector3",4),new L$ga(48,"vector2",2),new L$ga(56,"vector2",15),new L$ga(64,"vector4",7),new L$ga(80,"vector4",6)])}]),L$a}(),L$Ta=function(){function L$a(L$a,L$b,L$c){this._position=null,this._normal=null,this._textureCoordinate=null,this._position=L$a,this._normal=L$b,this._textureCoordinate=L$c}L$n(L$a,"laya.d3.graphics.VertexPositionNTBTextureSkin");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"textureCoordinate",function(){return this._textureCoordinate}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(88,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector3",5),new L$ga(36,"vector3",4),new L$ga(48,"vector2",2),new L$ga(56,"vector4",7),new L$ga(72,"vector4",6)])}]),L$a}(),L$Ua=(function(){function L$a(L$a,L$b,L$c,L$d){this._position=null,this._normal=null,this._textureCoord0=null,this._textureCoord1=null,this._position=L$a,this._normal=L$b,this._textureCoord0=L$c,this._textureCoord1=L$d}L$n(L$a,"laya.d3.graphics.VertexPositionTerrain");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"normal",function(){return this._normal}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoord0",function(){return this._textureCoord0}),L$o(0,L$b,"textureCoord1",function(){return this._textureCoord1}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(40,[new L$ga(0,"vector3",0),new L$ga(12,"vector3",3),new L$ga(24,"vector2",2),new L$ga(32,"vector2",15)])}])}(),function(){function L$a(L$a,L$b){this._position=null,this._textureCoordinate0=null,this._position=L$a,this._textureCoordinate0=L$b}L$n(L$a,"laya.d3.graphics.VertexPositionTexture0");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"position",function(){return this._position}),L$o(0,L$b,"textureCoordinate0",function(){return this._textureCoordinate0}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(20,[new L$ga(0,"vector3",0),new L$ga(12,"vector2",2)])}]),L$a}()),L$Va=(function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l,L$m,L$n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=L$a,this._positionStartLifeTime=L$b,this._velocity=L$c,this._startColor=L$d,this._startSize=L$e,this._startRotation0=L$f,this._startRotation1=L$g,this._startRotation2=L$h,this._startLifeTime=L$i,this._time=L$j,this._startSpeed=L$k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=L$n}L$n(L$a,"laya.d3.graphics.VertexShurikenParticleBillboard");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),L$o(0,L$b,"random1",function(){return this._randoms1}),L$o(0,L$b,"startRotation2",function(){return this._startRotation2}),L$o(0,L$b,"positionStartLifeTime",function(){return this._positionStartLifeTime}),L$o(0,L$b,"velocity",function(){return this._velocity}),L$o(0,L$b,"random0",function(){return this._randoms0}),L$o(0,L$b,"startSize",function(){return this._startSize}),L$o(0,L$b,"startColor",function(){return this._startColor}),L$o(0,L$b,"startRotation0",function(){return this._startRotation0}),L$o(0,L$b,"startRotation1",function(){return this._startRotation1}),L$o(0,L$b,"startLifeTime",function(){return this._startLifeTime}),L$o(0,L$b,"time",function(){return this._time}),L$o(0,L$b,"startSpeed",function(){return this._startSpeed}),L$o(0,L$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(152,[new L$ga(0,"vector4",17),new L$ga(16,"vector4",30),new L$ga(32,"vector4",32),new L$ga(48,"vector4",19),new L$ga(64,"vector3",20),new L$ga(76,"vector3",22),new L$ga(88,"single",31),new L$ga(92,"vector4",34),new L$ga(108,"vector4",35),new L$ga(124,"vector3",36),new L$ga(136,"vector4",37)])}])}(),function(){function L$a(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l,L$m,L$n){this._cornerTextureCoordinate=null,this._positionStartLifeTime=null,this._velocity=null,this._startColor=null,this._startSize=null,this._startRotation0=null,this._startRotation1=null,this._startRotation2=null,this._startLifeTime=NaN,this._time=NaN,this._startSpeed=NaN,this._randoms0=null,this._randoms1=null,this._simulationWorldPostion=null,this._cornerTextureCoordinate=L$a,this._positionStartLifeTime=L$b,this._velocity=L$c,this._startColor=L$d,this._startSize=L$e,this._startRotation0=L$f,this._startRotation1=L$g,this._startRotation2=L$h,this._startLifeTime=L$i,this._time=L$j,this._startSpeed=L$k,this._randoms0=this.random0,this._randoms1=this.random1,this._simulationWorldPostion=L$n}L$n(L$a,"laya.d3.graphics.VertexShurikenParticleMesh");var L$b=L$a.prototype;L$v.imps(L$b,{"laya.d3.graphics.IVertex":!0}),L$o(0,L$b,"cornerTextureCoordinate",function(){return this._cornerTextureCoordinate}),L$o(0,L$b,"velocity",function(){return this._velocity}),L$o(0,L$b,"position",function(){return this._positionStartLifeTime}),L$o(0,L$b,"random0",function(){return this._randoms0}),L$o(0,L$b,"startSize",function(){return this._startSize}),L$o(0,L$b,"startColor",function(){return this._startColor}),L$o(0,L$b,"startRotation0",function(){return this._startRotation0}),L$o(0,L$b,"startRotation1",function(){return this._startRotation1}),L$o(0,L$b,"random1",function(){return this._randoms1}),L$o(0,L$b,"startRotation2",function(){return this._startRotation2}),L$o(0,L$b,"startLifeTime",function(){return this._startLifeTime}),L$o(0,L$b,"time",function(){return this._time}),L$o(0,L$b,"startSpeed",function(){return this._startSpeed}),L$o(0,L$b,"simulationWorldPostion",function(){return this._simulationWorldPostion}),L$o(0,L$b,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$o(1,L$a,"vertexDeclaration",function(){return L$a._vertexDeclaration}),L$l(L$a,["_vertexDeclaration",function(){return this._vertexDeclaration=new L$fa(172,[new L$ga(0,"vector3",0),new L$ga(12,"vector4",1),new L$ga(28,"vector2",2),new L$ga(36,"vector4",30),new L$ga(52,"vector4",32),new L$ga(68,"vector4",19),new L$ga(84,"vector3",20),new L$ga(96,"vector3",22),new L$ga(108,"single",31),new L$ga(112,"vector4",34),new L$ga(128,"vector4",35),new L$ga(144,"vector3",36),new L$ga(156,"vector4",37)])}])}(),function(){function L$t(L$a,L$b,L$c,L$d,L$e,L$f){this._version=null,this._strings=["BLOCK","DATA","STRINGS"],this._materials=null,this._subMeshes=null,this._materialMap=null,this._readData=null,this._mesh=null,this._BLOCK={count:0},this._DATA={offset:0,size:0},this._STRINGS={offset:0,size:0},this._shaderAttributes=null,this._mesh=L$c,this._materials=L$d,this._subMeshes=L$e,this._materialMap=L$f,this._version=L$b,this._onLoaded(L$a)}L$n(L$t,"laya.d3.loaders.LoadModelV01");var L$a=L$t.prototype;return L$a._onLoaded=function(L$a){this._readData=L$a,this.READ_BLOCK();for(var L$b=0;L$b<this._BLOCK.count;L$b++){var L$c=this._readData.getUint16(),L$d=this._strings[L$c],L$e=this["READ_"+L$d];if(null==L$e)throw new Error("model file err,no this function:"+L$c+" "+L$d);if(!L$e.call(this))break}return this._mesh},L$a.onError=function(){},L$a._readString=function(){return this._strings[this._readData.getUint16()]},L$a.READ_BLOCK=function(){this._readData.getUint16();return this._BLOCK.count=this._readData.getUint16(),!0},L$a.READ_DATA=function(){return this._DATA.offset=this._readData.getUint32(),this._DATA.size=this._readData.getUint32(),!0},L$a.READ_STRINGS=function(){this._STRINGS.offset=this._readData.getUint16(),this._STRINGS.size=this._readData.getUint16();var L$a=this._readData.pos;this._readData.pos=this._STRINGS.offset+this._DATA.offset;for(var L$b=0;L$b<this._STRINGS.size;L$b++)this._strings[L$b]=this._readData.readUTFString();return this._readData.pos=L$a,!0},L$a.READ_MATERIAL=function(){var L$a=this._readData.getUint16(),L$b=(this._readString(),this._readString());return this._materials[L$a]="null"!==L$b?L$r.getRes(this._materialMap[L$b]):new L$Eb,!0},L$a.READ_MESH=function(){this._readString();switch(this._version){case"LAYAMODEL:01":console.log("Warning: The (.lm) file is converted by old fbxTools,please reConverted it use  lastest fbxTools version,later we will remove the  support of old version (.lm) support.");break;case"LAYASKINANI:01":case"LAYAMODEL:02":var L$a,L$b=this._readData.__getBuffer(),L$c=0,L$d=this._readData.getUint32(),L$e=this._readData.getUint32(),L$f=(new Float32Array(L$b.slice(L$d+this._DATA.offset,L$d+this._DATA.offset+L$e)),this._readData.getUint32()),L$g=this._readData.getUint32(),L$h=new Float32Array(L$b.slice(L$f+this._DATA.offset,L$f+this._DATA.offset+L$g));for(this.mesh._inverseBindPoses=[],L$c=0,L$a=L$h.length;L$c<L$a;L$c+=16){var L$i=new L$ab(L$h[L$c+0],L$h[L$c+1],L$h[L$c+2],L$h[L$c+3],L$h[L$c+4],L$h[L$c+5],L$h[L$c+6],L$h[L$c+7],L$h[L$c+8],L$h[L$c+9],L$h[L$c+10],L$h[L$c+11],L$h[L$c+12],L$h[L$c+13],L$h[L$c+14],L$h[L$c+15]);this.mesh._inverseBindPoses.push(L$i)}break;default:throw new Error("LoadModel:unknown version.")}return!0},L$a.READ_SUBMESH=function(){this._readString(),this._readData.getUint8();var L$a=this._readString();this._shaderAttributes=L$a.match(L$t._attrReg);var L$b=this._readData.getUint32(),L$c=this._readData.getUint32(),L$d=(this._readData.getUint32(),this._readData.getUint32(),this._readData.getUint32()),L$e=this._readData.getUint32(),L$f=this._readData.getUint32(),L$g=this._readData.getUint32(),L$h=this._readData.__getBuffer(),L$i=new L$jb(this._mesh),L$j=this._getVertexDeclaration(),L$k=L$Ob.create(L$j,L$e/L$j.vertexStride,35044,!0),L$l=L$d+this._DATA.offset,L$m=L$h.slice(L$l,L$l+L$e);L$k.setData(new Float32Array(L$m));for(var L$n=(L$i._vertexBuffer=L$k).vertexDeclaration.getVertexElements(),L$o=0;L$o<L$n.length;L$o++)L$i._bufferUsage[L$n[L$o].elementUsage]=L$k;var L$p=L$Nb.create("ushort",L$c/2,35044,!0),L$q=L$b+this._DATA.offset,L$r=L$h.slice(L$q,L$q+L$c);L$p.setData(new Uint16Array(L$r)),L$i._indexBuffer=L$p;var L$s=L$h.slice(L$f+this._DATA.offset,L$f+this._DATA.offset+L$g);return L$i._boneIndicesList[0]=new Uint8Array(L$s),this._subMeshes.push(L$i),!0},L$a.READ_DATAAREA=function(){return!1},L$a._getVertexDeclaration=function(){for(var L$a,L$b=!1,L$c=!1,L$d=!1,L$e=!1,L$f=!1,L$g=!1,L$h=!1,L$i=!1,L$j=!1,L$k=0;L$k<this._shaderAttributes.length;L$k+=8)switch(this._shaderAttributes[L$k]){case"POSITION":L$b=!0;break;case"NORMAL":L$c=!0;break;case"COLOR":L$d=!0;break;case"UV":L$e=!0;break;case"UV1":L$f=!0;break;case"BLENDWEIGHT":L$h=!0;break;case"BLENDINDICES":L$i=!0;break;case"TANGENT":L$g=!0;break;case"BINORMAL":L$j=!0}return L$b&&L$c&&L$d&&L$e&&L$f&&L$h&&L$i&&L$g?L$a=L$ta.vertexDeclaration:L$b&&L$c&&L$d&&L$e&&L$f&&L$h&&L$i?L$a=L$ra.vertexDeclaration:L$b&&L$c&&L$e&&L$f&&L$h&&L$i&&L$g?L$a=L$Ja.vertexDeclaration:L$b&&L$c&&L$e&&L$f&&L$h&&L$i?L$a=L$Ha.vertexDeclaration:L$b&&L$c&&L$d&&L$e&&L$h&&L$i&&L$g?L$a=L$Aa.vertexDeclaration:L$b&&L$c&&L$d&&L$e&&L$h&&L$i?L$a=L$ya.vertexDeclaration:L$b&&L$c&&L$g&&L$j&&L$e&&L$h&&L$i?L$a=L$Ta.vertexDeclaration:L$b&&L$c&&L$e&&L$h&&L$i&&L$g?L$a=L$Oa.vertexDeclaration:L$b&&L$c&&L$e&&L$h&&L$i?L$a=L$Ma.vertexDeclaration:L$b&&L$c&&L$d&&L$h&&L$i&&L$g?L$a=L$ma.vertexDeclaration:L$b&&L$c&&L$d&&L$h&&L$i?L$a=L$ka.vertexDeclaration:L$b&&L$c&&L$d&&L$e&&L$f&&L$g?L$a=L$va.vertexDeclaration:L$b&&L$c&&L$d&&L$e&&L$f?L$a=L$qa.vertexDeclaration:L$b&&L$c&&L$e&&L$f&&L$g?L$a=L$La.vertexDeclaration:L$b&&L$c&&L$e&&L$f?L$a=L$Ga.vertexDeclaration:L$b&&L$c&&L$d&&L$e&&L$g?L$a=L$Ca.vertexDeclaration:L$b&&L$c&&L$e&&L$g&&L$j?L$a=L$Ra.vertexDeclaration:L$b&&L$c&&L$d&&L$e?L$a=L$pa.vertexDeclaration:L$b&&L$c&&L$e&&L$g?L$a=L$Qa.vertexDeclaration:L$b&&L$c&&L$e?L$a=L$Fa.vertexDeclaration:L$b&&L$c&&L$d&&L$g?L$a=L$oa.vertexDeclaration:L$b&&L$c&&L$d&&(L$a=L$ja.vertexDeclaration),L$a},L$o(0,L$a,"mesh",function(){return this._mesh}),L$t._attrReg=new RegExp("(\\w+)|([:,;])","g"),L$t}()),L$Wa=function(){function L$z(){}return L$n(L$z,"laya.d3.loaders.LoadModelV02"),L$z.parse=function(L$a,L$b,L$c,L$d,L$e,L$f){L$z._mesh=L$c,L$z._materials=L$d,L$z._subMeshes=L$e,L$z._materialMap=L$f,L$z._version=L$b,L$z._readData=L$a,L$z.READ_DATA(),L$z.READ_BLOCK(),L$z.READ_STRINGS();for(var L$g=0,L$h=L$z._BLOCK.count;L$g<L$h;L$g++){L$z._readData.pos=L$z._BLOCK.blockStarts[L$g];var L$i=L$z._readData.getUint16(),L$j=L$z._strings[L$i],L$k=L$z["READ_"+L$j];if(null==L$k)throw new Error("model file err,no this function:"+L$i+" "+L$j);L$k.call()}L$z._strings.length=0,L$z._readData=null,L$z._version=null,L$z._mesh=null,L$z._materials=null,L$z._subMeshes=null,L$z._materialMap=null},L$z._readString=function(){return L$z._strings[L$z._readData.getUint16()]},L$z.READ_DATA=function(){L$z._DATA.offset=L$z._readData.getUint32(),L$z._DATA.size=L$z._readData.getUint32()},L$z.READ_BLOCK=function(){for(var L$a=L$z._BLOCK.count=L$z._readData.getUint16(),L$b=L$z._BLOCK.blockStarts=[],L$c=L$z._BLOCK.blockLengths=[],L$d=0;L$d<L$a;L$d++)L$b.push(L$z._readData.getUint32()),L$c.push(L$z._readData.getUint32())},L$z.READ_STRINGS=function(){var L$a=L$z._readData.getUint32(),L$b=L$z._readData.getUint16(),L$c=L$z._readData.pos;L$z._readData.pos=L$a+L$z._DATA.offset;for(var L$d=0;L$d<L$b;L$d++)L$z._strings[L$d]=L$z._readData.readUTFString();L$z._readData.pos=L$c},L$z.READ_MATERIAL=function(){L$z._readString(),L$z._readString();var L$a=L$z._readString();return""!==L$a&&L$z._materials.push(L$r.getRes(L$z._materialMap[L$a])),!0},L$z.READ_MESH=function(){L$z._readString();var L$a,L$b=L$z._readData.__getBuffer(),L$c=0,L$d=L$z._readData.getInt16(),L$e=L$z._DATA.offset;for(L$c=0;L$c<L$d;L$c++){var L$f=L$e+L$z._readData.getUint32(),L$g=L$z._readData.getUint32(),L$h=new Float32Array(L$b.slice(L$f,L$f+L$g)),L$i=L$z._readString().match(L$z._attrReg),L$j=L$z._getVertexDeclaration(L$i),L$k=L$Ob.create(L$j,4*L$h.length/L$j.vertexStride,35044,!0);L$k.setData(L$h),L$z._mesh._vertexBuffers.push(L$k)}var L$l=L$e+L$z._readData.getUint32(),L$m=L$z._readData.getUint32(),L$n=new Uint16Array(L$b.slice(L$l,L$l+L$m)),L$o=L$Nb.create("ushort",L$m/2,35044,!0);L$o.setData(L$n),L$z._mesh._indexBuffer=L$o;var L$p=L$z._mesh._boneNames=[],L$q=L$z._readData.getUint16();for(L$p.length=L$q,L$c=0;L$c<L$q;L$c++)L$p[L$c]=L$z._strings[L$z._readData.getUint16()];var L$r=L$z._readData.getUint32(),L$s=L$z._readData.getUint32(),L$t=(new Float32Array(L$b.slice(L$e+L$r,L$e+L$r+L$s)),L$z._readData.getUint32()),L$u=L$z._readData.getUint32(),L$v=new Float32Array(L$b.slice(L$e+L$t,L$e+L$t+L$u));for(L$z._mesh._inverseBindPoses=[],L$c=0,L$a=L$v.length;L$c<L$a;L$c+=16){var L$y=new L$ab(L$v[L$c+0],L$v[L$c+1],L$v[L$c+2],L$v[L$c+3],L$v[L$c+4],L$v[L$c+5],L$v[L$c+6],L$v[L$c+7],L$v[L$c+8],L$v[L$c+9],L$v[L$c+10],L$v[L$c+11],L$v[L$c+12],L$v[L$c+13],L$v[L$c+14],L$v[L$c+15]);L$z._mesh._inverseBindPoses.push(L$y)}return L$z._mesh._skinnedDatas=new Float32Array(16*L$v.length),!0},L$z.READ_SUBMESH=function(){var L$a=L$z._readData.__getBuffer(),L$b=new L$jb(L$z._mesh),L$c=L$z._readData.getInt16(),L$d=L$z._readData.getUint32(),L$e=L$z._readData.getUint32();L$b._vertexBuffer=L$z._mesh._vertexBuffers[L$c],L$b._vertexStart=L$d,L$b._vertexCount=L$e;var L$f=L$z._readData.getUint32(),L$g=L$z._readData.getUint32(),L$h=L$z._mesh._indexBuffer;L$b._indexBuffer=L$h,L$b._indexStart=L$f,L$b._indexCount=L$g,L$b._indices=new Uint16Array(L$h.getData().buffer,2*L$f,L$g);var L$i=L$z._DATA.offset,L$j=L$b._subIndexBufferStart,L$k=L$b._subIndexBufferCount,L$l=L$b._boneIndicesList,L$m=L$z._readData.getUint16();L$j.length=L$m,L$k.length=L$m,L$l.length=L$m;for(var L$n=0;L$n<L$m;L$n++){L$j[L$n]=L$z._readData.getUint32(),L$k[L$n]=L$z._readData.getUint32();var L$o=L$z._readData.getUint32(),L$p=L$z._readData.getUint32();L$b._boneIndicesList[L$n]=new Uint8Array(L$a.slice(L$i+L$o,L$i+L$o+L$p))}return L$z._subMeshes.push(L$b),!0},L$z._getVertexDeclaration=function(L$a){for(var L$b,L$c=!1,L$d=!1,L$e=!1,L$f=!1,L$g=!1,L$h=!1,L$i=!1,L$j=!1,L$k=!1,L$l=0;L$l<L$a.length;L$l++)switch(L$a[L$l]){case"POSITION":L$c=!0;break;case"NORMAL":L$d=!0;break;case"COLOR":L$e=!0;break;case"UV":L$f=!0;break;case"UV1":L$g=!0;break;case"BLENDWEIGHT":L$i=!0;break;case"BLENDINDICES":L$j=!0;break;case"TANGENT":L$h=!0;break;case"BINORMAL":L$k=!0}return L$c&&L$d&&L$e&&L$f&&L$g&&L$i&&L$j&&L$h?L$b=L$ta.vertexDeclaration:L$c&&L$d&&L$e&&L$f&&L$g&&L$i&&L$j?L$b=L$ra.vertexDeclaration:L$c&&L$d&&L$f&&L$g&&L$i&&L$j&&L$h?L$b=L$Ja.vertexDeclaration:L$c&&L$d&&L$f&&L$g&&L$i&&L$j?L$b=L$Ha.vertexDeclaration:L$c&&L$d&&L$e&&L$f&&L$i&&L$j&&L$h?L$b=L$Aa.vertexDeclaration:L$c&&L$d&&L$e&&L$f&&L$i&&L$j?L$b=L$ya.vertexDeclaration:L$c&&L$d&&L$f&&L$i&&L$j&&L$h?L$b=L$Oa.vertexDeclaration:L$c&&L$d&&L$f&&L$i&&L$j?L$b=L$Ma.vertexDeclaration:L$c&&L$d&&L$e&&L$i&&L$j&&L$h?L$b=L$ma.vertexDeclaration:L$c&&L$d&&L$e&&L$i&&L$j?L$b=L$ka.vertexDeclaration:L$c&&L$d&&L$e&&L$f&&L$g&&L$h?L$b=L$va.vertexDeclaration:L$c&&L$d&&L$e&&L$f&&L$g?L$b=L$qa.vertexDeclaration:L$c&&L$d&&L$f&&L$g&&L$h?L$b=L$La.vertexDeclaration:L$c&&L$d&&L$f&&L$g?L$b=L$Ga.vertexDeclaration:L$c&&L$d&&L$e&&L$f&&L$h?L$b=L$Ca.vertexDeclaration:L$c&&L$d&&L$f&&L$h&&L$k?L$b=L$Ra.vertexDeclaration:L$c&&L$d&&L$e&&L$f?L$b=L$pa.vertexDeclaration:L$c&&L$d&&L$f&&L$h?L$b=L$Qa.vertexDeclaration:L$c&&L$d&&L$f?L$b=L$Fa.vertexDeclaration:L$c&&L$d&&L$e&&L$h?L$b=L$oa.vertexDeclaration:L$c&&L$d&&L$e&&(L$b=L$ja.vertexDeclaration),L$b},L$z._attrReg=new RegExp("(\\w+)|([:,;])","g"),L$z._strings=[],L$z._readData=null,L$z._version=null,L$z._mesh=null,L$z._materials=null,L$z._subMeshes=null,L$z._materialMap=null,L$l(L$z,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),L$z}(),L$Xa=function(){function L$y(){}return L$n(L$y,"laya.d3.loaders.LoadModelV03"),L$y.parse=function(L$a,L$b,L$c,L$d,L$e){L$y._mesh=L$c,L$y._subMeshes=L$d,L$y._materialMap=L$e,L$y._version=L$b,L$y._readData=L$a,L$y.READ_DATA(),L$y.READ_BLOCK(),L$y.READ_STRINGS();for(var L$f=0,L$g=L$y._BLOCK.count;L$f<L$g;L$f++){L$y._readData.pos=L$y._BLOCK.blockStarts[L$f];var L$h=L$y._readData.getUint16(),L$i=L$y._strings[L$h],L$j=L$y["READ_"+L$i];if(null==L$j)throw new Error("model file err,no this function:"+L$h+" "+L$i);L$j.call()}L$y._strings.length=0,L$y._readData=null,L$y._version=null,L$y._mesh=null,L$y._subMeshes=null,L$y._materialMap=null},L$y._readString=function(){return L$y._strings[L$y._readData.getUint16()]},L$y.READ_DATA=function(){L$y._DATA.offset=L$y._readData.getUint32(),L$y._DATA.size=L$y._readData.getUint32()},L$y.READ_BLOCK=function(){for(var L$a=L$y._BLOCK.count=L$y._readData.getUint16(),L$b=L$y._BLOCK.blockStarts=[],L$c=L$y._BLOCK.blockLengths=[],L$d=0;L$d<L$a;L$d++)L$b.push(L$y._readData.getUint32()),L$c.push(L$y._readData.getUint32())},L$y.READ_STRINGS=function(){var L$a=L$y._readData.getUint32(),L$b=L$y._readData.getUint16(),L$c=L$y._readData.pos;L$y._readData.pos=L$a+L$y._DATA.offset;for(var L$d=0;L$d<L$b;L$d++)L$y._strings[L$d]=L$y._readData.readUTFString();L$y._readData.pos=L$c},L$y.READ_MESH=function(){var L$a,L$b=L$y._readString(),L$c=L$y._readData.__getBuffer(),L$d=0,L$e=L$y._readData.getInt16(),L$f=L$y._DATA.offset;for(L$d=0;L$d<L$e;L$d++){var L$g,L$h=L$f+L$y._readData.getUint32(),L$i=L$y._readData.getUint32(),L$j=new Float32Array(L$c.slice(L$h,L$h+L$i)),L$k=L$y._readString();switch(L$y._version){case"LAYAMODEL:03":L$g=L$y._vertexDeclarationMap_Discard[L$k];break;case"LAYAMODEL:0301":L$g=L$y._vertexDeclarationMap[L$k];break;default:throw new Error("LoadModelV03: unknown version.")}if(!L$g)throw new Error("LoadModelV03: unknown vertexDeclaration.  version="+L$y._version+"  bufferAttribute="+L$k+"  name="+L$b+"  url="+(L$y._mesh?L$y._mesh.url:"null"));var L$l=L$Ob.create(L$g,4*L$j.length/L$g.vertexStride,35044,!0,L$y._mesh._url+"_"+L$d);L$l.setData(L$j),L$y._mesh._vertexBuffers.push(L$l)}var L$m=L$f+L$y._readData.getUint32(),L$n=L$y._readData.getUint32(),L$o=new Uint16Array(L$c.slice(L$m,L$m+L$n)),L$p=L$Nb.create("ushort",L$n/2,35044,!0,L$y._mesh._url);L$p.setData(L$o),L$y._mesh._indexBuffer=L$p;var L$q=L$y._mesh._boneNames=[],L$r=L$y._readData.getUint16();for(L$q.length=L$r,L$d=0;L$d<L$r;L$d++)L$q[L$d]=L$y._strings[L$y._readData.getUint16()];L$y._readData.pos+=8;var L$s=L$y._readData.getUint32(),L$t=L$y._readData.getUint32(),L$u=new Float32Array(L$c.slice(L$f+L$s,L$f+L$s+L$t));for(L$y._mesh._inverseBindPoses=[],L$d=0,L$a=L$u.length;L$d<L$a;L$d+=16){var L$v=new L$ab(L$u[L$d+0],L$u[L$d+1],L$u[L$d+2],L$u[L$d+3],L$u[L$d+4],L$u[L$d+5],L$u[L$d+6],L$u[L$d+7],L$u[L$d+8],L$u[L$d+9],L$u[L$d+10],L$u[L$d+11],L$u[L$d+12],L$u[L$d+13],L$u[L$d+14],L$u[L$d+15]);L$y._mesh._inverseBindPoses.push(L$v)}return L$y._mesh._skinnedDatas=new Float32Array(16*L$u.length),!0},L$y.READ_SUBMESH=function(){var L$a=L$y._readData.__getBuffer(),L$b=new L$jb(L$y._mesh),L$c=L$y._readData.getInt16(),L$d=L$y._readData.getUint32(),L$e=L$y._readData.getUint32();L$b._vertexBuffer=L$y._mesh._vertexBuffers[L$c],L$b._vertexStart=L$d,L$b._vertexCount=L$e;var L$f=L$y._readData.getUint32(),L$g=L$y._readData.getUint32(),L$h=L$y._mesh._indexBuffer;L$b._indexBuffer=L$h,L$b._indexStart=L$f,L$b._indexCount=L$g,L$b._indices=new Uint16Array(L$h.getData().buffer,2*L$f,L$g);var L$i=L$y._DATA.offset,L$j=L$b._subIndexBufferStart,L$k=L$b._subIndexBufferCount,L$l=L$b._boneIndicesList,L$m=L$y._readData.getUint16();L$j.length=L$m,L$k.length=L$m,L$l.length=L$m;for(var L$n=0;L$n<L$m;L$n++){L$j[L$n]=L$y._readData.getUint32(),L$k[L$n]=L$y._readData.getUint32();var L$o=L$y._readData.getUint32(),L$p=L$y._readData.getUint32();L$l[L$n]=new Uint8Array(L$a.slice(L$i+L$o,L$i+L$o+L$p))}return L$y._subMeshes.push(L$b),!0},L$y._strings=[],L$y._readData=null,L$y._version=null,L$y._mesh=null,L$y._subMeshes=null,L$y._materialMap=null,L$l(L$y,["_vertexDeclarationMap_Discard",function(){return this._vertexDeclarationMap_Discard={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":L$ta.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":L$ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":L$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":L$Ja.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":L$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":L$Aa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":L$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":L$Oa.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":L$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":L$ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":L$ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":L$va.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":L$qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":L$La.vertexDeclaration,"POSITION,NORMAL,UV,UV1":L$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":L$Ca.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":L$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":L$pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":L$Qa.vertexDeclaration,"POSITION,NORMAL,UV":L$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":L$oa.vertexDeclaration,"POSITION,NORMAL,COLOR":L$ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":L$Ea.vertexDeclaration,"POSITION,NORMAL":L$ia.vertexDeclaration,"POSITION,UV":L$Ua.vertexDeclaration,POSITION:L$ha.vertexDeclaration}},"_vertexDeclarationMap",function(){return this._vertexDeclarationMap={"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":L$sa.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,BLENDWEIGHT,BLENDINDICES":L$ra.vertexDeclaration,"POSITION,NORMAL,TANGENT,BINORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,":L$Sa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES,TANGENT":L$Ia.vertexDeclaration,"POSITION,NORMAL,UV,UV1,BLENDWEIGHT,BLENDINDICES":L$Ha.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":L$za.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,BLENDWEIGHT,BLENDINDICES":L$ya.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES,TANGENT":L$Na.vertexDeclaration,"POSITION,NORMAL,UV,BLENDWEIGHT,BLENDINDICES":L$Ma.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES,TANGENT":L$la.vertexDeclaration,"POSITION,NORMAL,COLOR,BLENDWEIGHT,BLENDINDICES":L$ka.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1,TANGENT":L$ua.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,UV1":L$qa.vertexDeclaration,"POSITION,NORMAL,UV,UV1,TANGENT":L$Ka.vertexDeclaration,"POSITION,NORMAL,UV,UV1":L$Ga.vertexDeclaration,"POSITION,NORMAL,COLOR,UV,TANGENT":L$Ba.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT,BINORMAL":L$Ra.vertexDeclaration,"POSITION,NORMAL,COLOR,UV":L$pa.vertexDeclaration,"POSITION,NORMAL,UV,TANGENT":L$Pa.vertexDeclaration,"POSITION,NORMAL,UV":L$Fa.vertexDeclaration,"POSITION,NORMAL,COLOR,TANGENT":L$na.vertexDeclaration,"POSITION,NORMAL,COLOR":L$ja.vertexDeclaration,"POSITION,NORMAL,TANGENT":L$Da.vertexDeclaration,"POSITION,NORMAL":L$ia.vertexDeclaration,"POSITION,UV":L$Ua.vertexDeclaration,POSITION:L$ha.vertexDeclaration}},"_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),L$y}(),L$Ya=function(){function L$h(){}return L$n(L$h,"laya.d3.loaders.MeshReader"),L$h.read=function(L$a,L$b,L$c,L$d,L$e){var L$f=new L$y(L$a);L$f.pos=0;var L$g=L$f.readUTFString();switch(L$g){case"LAYAMODEL:01":case"LAYASKINANI:01":L$h._readVersion01(L$f,L$g,L$b,L$c,L$d,L$e);break;case"LAYAMODEL:02":L$Wa.parse(L$f,L$g,L$b,L$c,L$d,L$e);break;case"LAYAMODEL:03":case"LAYAMODEL:0301":L$Xa.parse(L$f,L$g,L$b,L$d,L$e);break;default:throw new Error("MeshReader: unknown mesh version.")}L$b._setSubMeshes(L$d)},L$h._readVersion01=function(L$a,L$b,L$c,L$d,L$e,L$f){new L$Va(L$a,L$b,L$c,L$d,L$e,L$f)},L$h}(),L$Za=function(){function L$a(L$a,L$b){this.min=null,this.max=null,this.min=L$a,this.max=L$b}L$n(L$a,"laya.d3.math.BoundBox");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.getCorners=function(L$a){L$a.length=8;var L$b=this.min.elements,L$c=this.max.elements,L$d=L$b[0],L$e=L$b[1],L$f=L$b[2],L$g=L$c[0],L$h=L$c[1],L$i=L$c[2];L$a[0]=new L$gb(L$d,L$h,L$i),L$a[1]=new L$gb(L$g,L$h,L$i),L$a[2]=new L$gb(L$g,L$e,L$i),L$a[3]=new L$gb(L$d,L$e,L$i),L$a[4]=new L$gb(L$d,L$h,L$f),L$a[5]=new L$gb(L$g,L$h,L$f),L$a[6]=new L$gb(L$g,L$e,L$f),L$a[7]=new L$gb(L$d,L$e,L$f)},L$b.toDefault=function(){this.min.toDefault(),this.max.toDefault()},L$b.cloneTo=function(L$a){var L$b=L$a;this.min.cloneTo(L$b.min),this.max.cloneTo(L$b.max)},L$b.clone=function(){var L$a=new this.constructor(new L$gb,new L$gb);return this.cloneTo(L$a),L$a},L$a.createfromPoints=function(L$a,L$b){if(null==L$a)throw new Error("points");var L$c=L$b.min,L$d=L$b.max,L$e=L$c.elements;L$e[0]=Number.MAX_VALUE,L$e[1]=Number.MAX_VALUE,L$e[2]=Number.MAX_VALUE;var L$f=L$d.elements;L$f[0]=-Number.MAX_VALUE,L$f[1]=-Number.MAX_VALUE,L$f[2]=-Number.MAX_VALUE;for(var L$g=0,L$h=L$a.length;L$g<L$h;++L$g)L$gb.min(L$c,L$a[L$g],L$c),L$gb.max(L$d,L$a[L$g],L$d)},L$a.merge=function(L$a,L$b,L$c){L$gb.min(L$a.min,L$b.min,L$c.min),L$gb.max(L$a.max,L$b.max,L$c.max)},L$a}(),L$$a=function(){function L$j(L$a){this._matrix=null,this._near=null,this._far=null,this._left=null,this._right=null,this._top=null,this._bottom=null,this._matrix=L$a,this._near=new L$bb(new L$gb),this._far=new L$bb(new L$gb),this._left=new L$bb(new L$gb),this._right=new L$bb(new L$gb),this._top=new L$bb(new L$gb),this._bottom=new L$bb(new L$gb),L$j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}L$n(L$j,"laya.d3.math.BoundFrustum");var L$a=L$j.prototype;return L$a.equalsBoundFrustum=function(L$a){return this._matrix.equalsOtherMatrix(L$a.matrix)},L$a.equalsObj=function(L$a){if(L$a instanceof laya.d3.math.BoundFrustum){var L$b=L$a;return this.equalsBoundFrustum(L$b)}return!1},L$a.getPlane=function(L$a){switch(L$a){case 0:return this._near;case 1:return this._far;case 2:return this._left;case 3:return this._right;case 4:return this._top;case 5:return this._bottom;default:return null}},L$a.getCorners=function(L$a){L$j._get3PlaneInterPoint(this._near,this._bottom,this._right).cloneTo(L$a[0]),L$j._get3PlaneInterPoint(this._near,this._top,this._right).cloneTo(L$a[1]),L$j._get3PlaneInterPoint(this._near,this._top,this._left).cloneTo(L$a[2]),L$j._get3PlaneInterPoint(this._near,this._bottom,this._left).cloneTo(L$a[3]),L$j._get3PlaneInterPoint(this._far,this._bottom,this._right).cloneTo(L$a[4]),L$j._get3PlaneInterPoint(this._far,this._top,this._right).cloneTo(L$a[5]),L$j._get3PlaneInterPoint(this._far,this._top,this._left).cloneTo(L$a[6]),L$j._get3PlaneInterPoint(this._far,this._bottom,this._left).cloneTo(L$a[7])},L$a.containsPoint=function(L$a){for(var L$b=L$bb.PlaneIntersectionType_Front,L$c=L$bb.PlaneIntersectionType_Front,L$d=0;L$d<6;L$d++){switch(L$d){case 0:L$c=Collision.intersectsPlaneAndPoint(this._near,L$a);break;case 1:L$c=Collision.intersectsPlaneAndPoint(this._far,L$a);break;case 2:L$c=Collision.intersectsPlaneAndPoint(this._left,L$a);break;case 3:L$c=Collision.intersectsPlaneAndPoint(this._right,L$a);break;case 4:L$c=Collision.intersectsPlaneAndPoint(this._top,L$a);break;case 5:L$c=Collision.intersectsPlaneAndPoint(this._bottom,L$a)}switch(L$c){case L$bb.PlaneIntersectionType_Back:return 0;case L$bb.PlaneIntersectionType_Intersecting:L$b=L$bb.PlaneIntersectionType_Intersecting}}switch(L$b){case L$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},L$a.containsBoundBox=function(L$a){for(var L$b,L$c=L$j._tempV30,L$d=L$j._tempV31,L$e=1,L$f=0;L$f<6;L$f++){if(L$b=this.getPlane(L$f),this._getBoxToPlanePVertexNVertex(L$a,L$b.normal,L$c,L$d),Collision.intersectsPlaneAndPoint(L$b,L$c)===L$bb.PlaneIntersectionType_Back)return 0;Collision.intersectsPlaneAndPoint(L$b,L$d)===L$bb.PlaneIntersectionType_Back&&(L$e=2)}return L$e},L$a.containsBoundSphere=function(L$a){for(var L$b=L$bb.PlaneIntersectionType_Front,L$c=L$bb.PlaneIntersectionType_Front,L$d=0;L$d<6;L$d++){switch(L$d){case 0:L$c=Collision.intersectsPlaneAndSphere(this._near,L$a);break;case 1:L$c=Collision.intersectsPlaneAndSphere(this._far,L$a);break;case 2:L$c=Collision.intersectsPlaneAndSphere(this._left,L$a);break;case 3:L$c=Collision.intersectsPlaneAndSphere(this._right,L$a);break;case 4:L$c=Collision.intersectsPlaneAndSphere(this._top,L$a);break;case 5:L$c=Collision.intersectsPlaneAndSphere(this._bottom,L$a)}switch(L$c){case L$bb.PlaneIntersectionType_Back:return 0;case L$bb.PlaneIntersectionType_Intersecting:L$b=L$bb.PlaneIntersectionType_Intersecting}}switch(L$b){case L$bb.PlaneIntersectionType_Intersecting:return 2;default:return 1}},L$a._getBoxToPlanePVertexNVertex=function(L$a,L$b,L$c,L$d){var L$e=L$a.min,L$f=L$e.elements,L$g=L$a.max,L$h=L$g.elements,L$i=L$b.elements,L$j=L$i[0],L$k=L$i[1],L$l=L$i[2];L$e.cloneTo(L$c);var L$m=L$c.elements;0<=L$j&&(L$m[0]=L$h[0]),0<=L$k&&(L$m[1]=L$h[1]),0<=L$l&&(L$m[2]=L$h[2]),L$g.cloneTo(L$d);var L$n=L$d.elements;0<=L$j&&(L$n[0]=L$f[0]),0<=L$k&&(L$n[1]=L$f[1]),0<=L$l&&(L$n[2]=L$f[2])},L$o(0,L$a,"top",function(){return this._top}),L$o(0,L$a,"matrix",function(){return this._matrix},function(L$a){this._matrix=L$a,L$j._getPlanesFromMatrix(this._matrix,this._near,this._far,this._left,this._right,this._top,this._bottom)}),L$o(0,L$a,"near",function(){return this._near}),L$o(0,L$a,"far",function(){return this._far}),L$o(0,L$a,"left",function(){return this._left}),L$o(0,L$a,"right",function(){return this._right}),L$o(0,L$a,"bottom",function(){return this._bottom}),L$j._getPlanesFromMatrix=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){var L$h=L$a.elements,L$i=L$h[0],L$j=L$h[1],L$k=L$h[2],L$l=L$h[3],L$m=L$h[4],L$n=L$h[5],L$o=L$h[6],L$p=L$h[7],L$q=L$h[8],L$r=L$h[9],L$s=L$h[10],L$t=L$h[11],L$u=L$h[12],L$v=L$h[13],L$y=L$h[14],L$z=L$h[15],L$A=L$b.normal.elements;L$A[0]=L$l+L$k,L$A[1]=L$p+L$o,L$A[2]=L$t+L$s,L$b.distance=L$z+L$y,L$b.normalize();var L$B=L$c.normal.elements;L$B[0]=L$l-L$k,L$B[1]=L$p-L$o,L$B[2]=L$t-L$s,L$c.distance=L$z-L$y,L$c.normalize();var L$C=L$d.normal.elements;L$C[0]=L$l+L$i,L$C[1]=L$p+L$m,L$C[2]=L$t+L$q,L$d.distance=L$z+L$u,L$d.normalize();var L$D=L$e.normal.elements;L$D[0]=L$l-L$i,L$D[1]=L$p-L$m,L$D[2]=L$t-L$q,L$e.distance=L$z-L$u,L$e.normalize();var L$E=L$f.normal.elements;L$E[0]=L$l-L$j,L$E[1]=L$p-L$n,L$E[2]=L$t-L$r,L$f.distance=L$z-L$v,L$f.normalize();var L$F=L$g.normal.elements;L$F[0]=L$l+L$j,L$F[1]=L$p+L$n,L$F[2]=L$t+L$r,L$g.distance=L$z+L$v,L$g.normalize()},L$j._get3PlaneInterPoint=function(L$a,L$b,L$c){var L$d=L$a.normal,L$e=L$b.normal,L$f=L$c.normal;L$gb.cross(L$e,L$f,L$j._tempV30),L$gb.cross(L$f,L$d,L$j._tempV31),L$gb.cross(L$d,L$e,L$j._tempV32);var L$g=L$gb.dot(L$d,L$j._tempV30),L$h=L$gb.dot(L$e,L$j._tempV31),L$i=L$gb.dot(L$f,L$j._tempV32);return L$gb.scale(L$j._tempV30,-L$a.distance/L$g,L$j._tempV33),L$gb.scale(L$j._tempV31,-L$b.distance/L$h,L$j._tempV34),L$gb.scale(L$j._tempV32,-L$c.distance/L$i,L$j._tempV35),L$gb.add(L$j._tempV33,L$j._tempV34,L$j._tempV36),L$gb.add(L$j._tempV35,L$j._tempV36,L$j._tempV37),L$j._tempV37},L$l(L$j,["_tempV30",function(){return this._tempV30=new L$gb},"_tempV31",function(){return this._tempV31=new L$gb},"_tempV32",function(){return this._tempV32=new L$gb},"_tempV33",function(){return this._tempV33=new L$gb},"_tempV34",function(){return this._tempV34=new L$gb},"_tempV35",function(){return this._tempV35=new L$gb},"_tempV36",function(){return this._tempV36=new L$gb},"_tempV37",function(){return this._tempV37=new L$gb}]),L$j}(),L$_a=function(){function L$k(L$a,L$b){this.center=null,this.radius=NaN,this.center=L$a,this.radius=L$b}L$n(L$k,"laya.d3.math.BoundSphere");var L$a=L$k.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.toDefault=function(){this.center.toDefault(),this.radius=0},L$a.intersectsRayDistance=function(L$a){return Collision.intersectsRayAndSphereRD(L$a,this)},L$a.intersectsRayPoint=function(L$a,L$b){return Collision.intersectsRayAndSphereRP(L$a,this,L$b)},L$a.cloneTo=function(L$a){var L$b=L$a;this.center.cloneTo(L$b.center),L$b.radius=this.radius},L$a.clone=function(){var L$a=new this.constructor(new L$gb,new L$gb);return this.cloneTo(L$a),L$a},L$k.createFromSubPoints=function(L$a,L$b,L$c,L$d){if(null==L$a)throw new Error("points");if(L$b<0||L$b>=L$a.length)throw new Error("start"+L$b+"Must be in the range [0, "+(L$a.length-1)+"]");if(L$c<0||L$b+L$c>L$a.length)throw new Error("count"+L$c+"Must be in the range <= "+L$a.length+"}");var L$e=L$b+L$c,L$f=L$k._tempVector3;L$f.elements[0]=0,L$f.elements[1]=0,L$f.elements[2]=0;for(var L$g=L$b;L$g<L$e;++L$g)L$gb.add(L$a[L$g],L$f,L$f);var L$h=L$d.center;L$gb.scale(L$f,1/L$c,L$h);var L$i=0;for(L$g=L$b;L$g<L$e;++L$g){var L$j=L$gb.distanceSquared(L$h,L$a[L$g]);L$i<L$j&&(L$i=L$j)}L$d.radius=Math.sqrt(L$i)},L$k.createfromPoints=function(L$a,L$b){if(null==L$a)throw new Error("points");L$k.createFromSubPoints(L$a,0,L$a.length,L$b)},L$l(L$k,["_tempVector3",function(){return this._tempVector3=new L$gb}]),L$k}(),L$wa=(function(){function L$a(){}L$n(L$a,"laya.d3.math.ContainmentType"),L$a.Disjoint=0,L$a.Contains=1,L$a.Intersects=2}(),function(){function L$c(){}return L$n(L$c,"laya.d3.math.MathUtils3D"),L$c.isZero=function(L$a){return Math.abs(L$a)<L$c.zeroTolerance},L$c.nearEqual=function(L$a,L$b){return!!L$c.isZero(L$a-L$b)},L$c.fastInvSqrt=function(L$a){return L$c.isZero(L$a)?L$a:1/Math.sqrt(L$a)},L$l(L$c,["zeroTolerance",function(){return this.zeroTolerance=1e-6},"MaxValue",function(){return this.MaxValue=340282347e30},"MinValue",function(){return this.MinValue=-340282347e30}]),L$c}()),L$xa=function(){function L$i(){var L$a=this.elements=new Float32Array(9);L$a[0]=1,L$a[1]=0,L$a[2]=0,L$a[3]=0,L$a[4]=1,L$a[5]=0,L$a[6]=0,L$a[7]=0,L$a[8]=1}L$n(L$i,"laya.d3.math.Matrix3x3");var L$a=L$i.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.determinant=function(){var L$a=this.elements,L$b=L$a[0],L$c=L$a[1],L$d=L$a[2],L$e=L$a[3],L$f=L$a[4],L$g=L$a[5],L$h=L$a[6],L$i=L$a[7],L$j=L$a[8];return L$b*(L$j*L$f-L$g*L$i)+L$c*(-L$j*L$e+L$g*L$h)+L$d*(L$i*L$e-L$f*L$h)},L$a.translate=function(L$a,L$b){var L$c=L$b.elements,L$d=this.elements,L$e=L$a.elements,L$f=L$d[0],L$g=L$d[1],L$h=L$d[2],L$i=L$d[3],L$j=L$d[4],L$k=L$d[5],L$l=L$d[6],L$m=L$d[7],L$n=L$d[8],L$o=L$e[0],L$p=L$e[1];L$c[0]=L$f,L$c[1]=L$g,L$c[2]=L$h,L$c[3]=L$i,L$c[4]=L$j,L$c[5]=L$k,L$c[6]=L$o*L$f+L$p*L$i+L$l,L$c[7]=L$o*L$g+L$p*L$j+L$m,L$c[8]=L$o*L$h+L$p*L$k+L$n},L$a.rotate=function(L$a,L$b){var L$c=L$b.elements,L$d=this.elements,L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$d[3],L$i=L$d[4],L$j=L$d[5],L$k=L$d[6],L$l=L$d[7],L$m=L$d[8],L$n=Math.sin(L$a),L$o=Math.cos(L$a);L$c[0]=L$o*L$e+L$n*L$h,L$c[1]=L$o*L$f+L$n*L$i,L$c[2]=L$o*L$g+L$n*L$j,L$c[3]=L$o*L$h-L$n*L$e,L$c[4]=L$o*L$i-L$n*L$f,L$c[5]=L$o*L$j-L$n*L$g,L$c[6]=L$k,L$c[7]=L$l,L$c[8]=L$m},L$a.scale=function(L$a,L$b){var L$c=L$b.elements,L$d=this.elements,L$e=L$a.elements,L$f=L$e[0],L$g=L$e[1];L$c[0]=L$f*L$d[0],L$c[1]=L$f*L$d[1],L$c[2]=L$f*L$d[2],L$c[3]=L$g*L$d[3],L$c[4]=L$g*L$d[4],L$c[5]=L$g*L$d[5],L$c[6]=L$d[6],L$c[7]=L$d[7],L$c[8]=L$d[8]},L$a.invert=function(L$a){var L$b=L$a.elements,L$c=this.elements,L$d=L$c[0],L$e=L$c[1],L$f=L$c[2],L$g=L$c[3],L$h=L$c[4],L$i=L$c[5],L$j=L$c[6],L$k=L$c[7],L$l=L$c[8],L$m=L$l*L$h-L$i*L$k,L$n=-L$l*L$g+L$i*L$j,L$o=L$k*L$g-L$h*L$j,L$p=L$d*L$m+L$e*L$n+L$f*L$o;L$p||(L$a=null),L$p=1/L$p,L$b[0]=L$m*L$p,L$b[1]=(-L$l*L$e+L$f*L$k)*L$p,L$b[2]=(L$i*L$e-L$f*L$h)*L$p,L$b[3]=L$n*L$p,L$b[4]=(L$l*L$d-L$f*L$j)*L$p,L$b[5]=(-L$i*L$d+L$f*L$g)*L$p,L$b[6]=L$o*L$p,L$b[7]=(-L$k*L$d+L$e*L$j)*L$p,L$b[8]=(L$h*L$d-L$e*L$g)*L$p},L$a.transpose=function(L$a){var L$b=L$a.elements,L$c=this.elements;if(L$a===this){var L$d=L$c[1],L$e=L$c[2],L$f=L$c[5];L$b[1]=L$c[3],L$b[2]=L$c[6],L$b[3]=L$d,L$b[5]=L$c[7],L$b[6]=L$e,L$b[7]=L$f}else L$b[0]=L$c[0],L$b[1]=L$c[3],L$b[2]=L$c[6],L$b[3]=L$c[1],L$b[4]=L$c[4],L$b[5]=L$c[7],L$b[6]=L$c[2],L$b[7]=L$c[5],L$b[8]=L$c[8]},L$a.identity=function(){var L$a=this.elements;L$a[0]=1,L$a[1]=0,L$a[2]=0,L$a[3]=0,L$a[4]=1,L$a[5]=0,L$a[6]=0,L$a[7]=0,L$a[8]=1},L$a.cloneTo=function(L$a){var L$b,L$c,L$d;if((L$c=this.elements)!==(L$d=L$a.elements))for(L$b=0;L$b<9;++L$b)L$d[L$b]=L$c[L$b]},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$i.createFromTranslation=function(L$a,L$b){L$b.elements;var L$c=L$a.elements;L$b[0]=1,L$b[1]=0,L$b[2]=0,L$b[3]=0,L$b[4]=1,L$b[5]=0,L$b[6]=L$c[0],L$b[7]=L$c[1],L$b[8]=1},L$i.createFromRotation=function(L$a,L$b){var L$c=L$b.elements,L$d=Math.sin(L$a),L$e=Math.cos(L$a);L$c[0]=L$e,L$c[1]=L$d,L$c[2]=0,L$c[3]=-L$d,L$c[4]=L$e,L$c[5]=0,L$c[6]=0,L$c[7]=0,L$c[8]=1},L$i.createFromScaling=function(L$a,L$b){var L$c=L$b.elements,L$d=L$a.elements;L$c[0]=L$d[0],L$c[1]=0,L$c[2]=0,L$c[3]=0,L$c[4]=L$d[1],L$c[5]=0,L$c[6]=0,L$c[7]=0,L$c[8]=1},L$i.createFromMatrix4x4=function(L$a,L$b){L$b[0]=L$a[0],L$b[1]=L$a[1],L$b[2]=L$a[2],L$b[3]=L$a[4],L$b[4]=L$a[5],L$b[5]=L$a[6],L$b[6]=L$a[8],L$b[7]=L$a[9],L$b[8]=L$a[10]},L$i.multiply=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements,L$g=L$e[0],L$h=L$e[1],L$i=L$e[2],L$j=L$e[3],L$k=L$e[4],L$l=L$e[5],L$m=L$e[6],L$n=L$e[7],L$o=L$e[8],L$p=L$f[0],L$q=L$f[1],L$r=L$f[2],L$s=L$f[3],L$t=L$f[4],L$u=L$f[5],L$v=L$f[6],L$y=L$f[7],L$z=L$f[8];L$d[0]=L$p*L$g+L$q*L$j+L$r*L$m,L$d[1]=L$p*L$h+L$q*L$k+L$r*L$n,L$d[2]=L$p*L$i+L$q*L$l+L$r*L$o,L$d[3]=L$s*L$g+L$t*L$j+L$u*L$m,L$d[4]=L$s*L$h+L$t*L$k+L$u*L$n,L$d[5]=L$s*L$i+L$t*L$l+L$u*L$o,L$d[6]=L$v*L$g+L$y*L$j+L$z*L$m,L$d[7]=L$v*L$h+L$y*L$k+L$z*L$n,L$d[8]=L$v*L$i+L$y*L$l+L$z*L$o},L$i.lookAt=function(L$a,L$b,L$c,L$d){L$gb.subtract(L$a,L$b,L$i._tempV30),L$gb.normalize(L$i._tempV30,L$i._tempV30),L$gb.cross(L$c,L$i._tempV30,L$i._tempV31),L$gb.normalize(L$i._tempV31,L$i._tempV31),L$gb.cross(L$i._tempV30,L$i._tempV31,L$i._tempV32);var L$e=L$i._tempV30.elements,L$f=L$i._tempV31.elements,L$g=L$i._tempV32.elements,L$h=L$d.elements;L$h[0]=L$f[0],L$h[3]=L$f[1],L$h[6]=L$f[2],L$h[1]=L$g[0],L$h[4]=L$g[1],L$h[7]=L$g[2],L$h[2]=L$e[0],L$h[5]=L$e[1],L$h[8]=L$e[2]},L$i.DEFAULT=new L$i,L$l(L$i,["_tempV30",function(){return this._tempV30=new L$gb},"_tempV31",function(){return this._tempV31=new L$gb},"_tempV32",function(){return this._tempV32=new L$gb}]),L$i}(),L$ab=function(){function L$B(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l,L$m,L$n,L$o,L$p){void 0===L$a&&(L$a=1),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=1),void 0===L$g&&(L$g=0),void 0===L$h&&(L$h=0),void 0===L$i&&(L$i=0),void 0===L$j&&(L$j=0),void 0===L$k&&(L$k=1),void 0===L$l&&(L$l=0),void 0===L$m&&(L$m=0),void 0===L$n&&(L$n=0),void 0===L$o&&(L$o=0),void 0===L$p&&(L$p=1);var L$q=this.elements=new Float32Array(16);L$q[0]=L$a,L$q[1]=L$b,L$q[2]=L$c,L$q[3]=L$d,L$q[4]=L$e,L$q[5]=L$f,L$q[6]=L$g,L$q[7]=L$h,L$q[8]=L$i,L$q[9]=L$j,L$q[10]=L$k,L$q[11]=L$l,L$q[12]=L$m,L$q[13]=L$n,L$q[14]=L$o,L$q[15]=L$p}L$n(L$B,"laya.d3.math.Matrix4x4");var L$a=L$B.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.getElementByRowColumn=function(L$a,L$b){if(L$a<0||3<L$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(L$b<0||3<L$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");return this.elements[4*L$a+L$b]},L$a.setElementByRowColumn=function(L$a,L$b,L$c){if(L$a<0||3<L$a)throw new Error("row","Rows and columns for matrices run from 0 to 3, inclusive.");if(L$b<0||3<L$b)throw new Error("column","Rows and columns for matrices run from 0 to 3, inclusive.");this.elements[4*L$a+L$b]=L$c},L$a.equalsOtherMatrix=function(L$a){var L$b=this.elements,L$c=L$a.elements;return L$wa.nearEqual(L$b[0],L$c[0])&&L$wa.nearEqual(L$b[1],L$c[1])&&L$wa.nearEqual(L$b[2],L$c[2])&&L$wa.nearEqual(L$b[3],L$c[3])&&L$wa.nearEqual(L$b[4],L$c[4])&&L$wa.nearEqual(L$b[5],L$c[5])&&L$wa.nearEqual(L$b[6],L$c[6])&&L$wa.nearEqual(L$b[7],L$c[7])&&L$wa.nearEqual(L$b[8],L$c[8])&&L$wa.nearEqual(L$b[9],L$c[9])&&L$wa.nearEqual(L$b[10],L$c[10])&&L$wa.nearEqual(L$b[11],L$c[11])&&L$wa.nearEqual(L$b[12],L$c[12])&&L$wa.nearEqual(L$b[13],L$c[13])&&L$wa.nearEqual(L$b[14],L$c[14])&&L$wa.nearEqual(L$b[15],L$c[15])},L$a.decomposeTransRotScale=function(L$a,L$b,L$c){var L$d=L$B._tempMatrix4x4;return this.decomposeTransRotMatScale(L$a,L$d,L$c)?(L$cb.createFromMatrix4x4(L$d,L$b),!0):(L$b.identity(),!1)},L$a.decomposeTransRotMatScale=function(L$a,L$b,L$c){var L$d=this.elements,L$e=L$a.elements,L$f=L$b.elements,L$g=L$c.elements;L$e[0]=L$d[12],L$e[1]=L$d[13],L$e[2]=L$d[14];var L$h=L$d[0],L$i=L$d[1],L$j=L$d[2],L$k=L$d[4],L$l=L$d[5],L$m=L$d[6],L$n=L$d[8],L$o=L$d[9],L$p=L$d[10],L$q=L$g[0]=Math.sqrt(L$h*L$h+L$i*L$i+L$j*L$j),L$r=L$g[1]=Math.sqrt(L$k*L$k+L$l*L$l+L$m*L$m),L$s=L$g[2]=Math.sqrt(L$n*L$n+L$o*L$o+L$p*L$p);if(L$wa.isZero(L$q)||L$wa.isZero(L$r)||L$wa.isZero(L$s))return L$f[1]=L$f[2]=L$f[3]=L$f[4]=L$f[6]=L$f[7]=L$f[8]=L$f[9]=L$f[11]=L$f[12]=L$f[13]=L$f[14]=0,L$f[0]=L$f[5]=L$f[10]=L$f[15]=1,!1;var L$t=L$B._tempVector0,L$u=L$t.elements;L$u[0]=L$n/L$s,L$u[1]=L$o/L$s,L$u[2]=L$p/L$s;var L$v=L$B._tempVector1,L$y=L$v.elements;L$y[0]=L$h/L$q,L$y[1]=L$i/L$q,L$y[2]=L$j/L$q;var L$z=L$B._tempVector2;L$gb.cross(L$t,L$v,L$z);var L$A=L$B._tempVector1;return L$gb.cross(L$z,L$t,L$A),L$f[3]=L$f[7]=L$f[11]=L$f[12]=L$f[13]=L$f[14]=0,L$f[15]=1,L$f[0]=L$A.x,L$f[1]=L$A.y,L$f[2]=L$A.z,L$f[4]=L$z.x,L$f[5]=L$z.y,L$f[6]=L$z.z,L$f[8]=L$t.x,L$f[9]=L$t.y,L$f[10]=L$t.z,L$f[0]*L$h+L$f[1]*L$i+L$f[2]*L$j<0&&(L$g[0]=-L$q),L$f[4]*L$k+L$f[5]*L$l+L$f[6]*L$m<0&&(L$g[1]=-L$r),L$f[8]*L$n+L$f[9]*L$o+L$f[10]*L$p<0&&(L$g[2]=-L$s),!0},L$a.decomposeYawPitchRoll=function(L$a){var L$b=L$a.elements,L$c=Math.asin(-this.elements[9]);L$b[1]=L$c,Math.cos(L$c)>L$wa.zeroTolerance?(L$b[2]=Math.atan2(this.elements[1],this.elements[5]),L$b[0]=Math.atan2(this.elements[8],this.elements[10])):(L$b[2]=Math.atan2(-this.elements[4],this.elements[0]),L$b[0]=0)},L$a.normalize=function(){var L$a=this.elements,L$b=L$a[0],L$c=L$a[1],L$d=L$a[2],L$e=Math.sqrt(L$b*L$b+L$c*L$c+L$d*L$d);if(!L$e)return L$a[0]=0,L$a[1]=0,void(L$a[2]=0);1!=L$e&&(L$e=1/L$e,L$a[0]=L$b*L$e,L$a[1]=L$c*L$e,L$a[2]=L$d*L$e)},L$a.transpose=function(){var L$a,L$b;return L$b=(L$a=this.elements)[1],L$a[1]=L$a[4],L$a[4]=L$b,L$b=L$a[2],L$a[2]=L$a[8],L$a[8]=L$b,L$b=L$a[3],L$a[3]=L$a[12],L$a[12]=L$b,L$b=L$a[6],L$a[6]=L$a[9],L$a[9]=L$b,L$b=L$a[7],L$a[7]=L$a[13],L$a[13]=L$b,L$b=L$a[11],L$a[11]=L$a[14],L$a[14]=L$b,this},L$a.invert=function(L$a){var L$b=this.elements,L$c=L$a.elements,L$d=L$b[0],L$e=L$b[1],L$f=L$b[2],L$g=L$b[3],L$h=L$b[4],L$i=L$b[5],L$j=L$b[6],L$k=L$b[7],L$l=L$b[8],L$m=L$b[9],L$n=L$b[10],L$o=L$b[11],L$p=L$b[12],L$q=L$b[13],L$r=L$b[14],L$s=L$b[15],L$t=L$d*L$i-L$e*L$h,L$u=L$d*L$j-L$f*L$h,L$v=L$d*L$k-L$g*L$h,L$y=L$e*L$j-L$f*L$i,L$z=L$e*L$k-L$g*L$i,L$A=L$f*L$k-L$g*L$j,L$B=L$l*L$q-L$m*L$p,L$C=L$l*L$r-L$n*L$p,L$D=L$l*L$s-L$o*L$p,L$E=L$m*L$r-L$n*L$q,L$F=L$m*L$s-L$o*L$q,L$G=L$n*L$s-L$o*L$r,L$H=L$t*L$G-L$u*L$F+L$v*L$E+L$y*L$D-L$z*L$C+L$A*L$B;0!==Math.abs(L$H)&&(L$H=1/L$H,L$c[0]=(L$i*L$G-L$j*L$F+L$k*L$E)*L$H,L$c[1]=(L$f*L$F-L$e*L$G-L$g*L$E)*L$H,L$c[2]=(L$q*L$A-L$r*L$z+L$s*L$y)*L$H,L$c[3]=(L$n*L$z-L$m*L$A-L$o*L$y)*L$H,L$c[4]=(L$j*L$D-L$h*L$G-L$k*L$C)*L$H,L$c[5]=(L$d*L$G-L$f*L$D+L$g*L$C)*L$H,L$c[6]=(L$r*L$v-L$p*L$A-L$s*L$u)*L$H,L$c[7]=(L$l*L$A-L$n*L$v+L$o*L$u)*L$H,L$c[8]=(L$h*L$F-L$i*L$D+L$k*L$B)*L$H,L$c[9]=(L$e*L$D-L$d*L$F-L$g*L$B)*L$H,L$c[10]=(L$p*L$z-L$q*L$v+L$s*L$t)*L$H,L$c[11]=(L$m*L$v-L$l*L$z-L$o*L$t)*L$H,L$c[12]=(L$i*L$C-L$h*L$E-L$j*L$B)*L$H,L$c[13]=(L$d*L$E-L$e*L$C+L$f*L$B)*L$H,L$c[14]=(L$q*L$u-L$p*L$y-L$r*L$t)*L$H,L$c[15]=(L$l*L$y-L$m*L$u+L$n*L$t)*L$H)},L$a.identity=function(){var L$a=this.elements;L$a[1]=L$a[2]=L$a[3]=L$a[4]=L$a[6]=L$a[7]=L$a[8]=L$a[9]=L$a[11]=L$a[12]=L$a[13]=L$a[14]=0,L$a[0]=L$a[5]=L$a[10]=L$a[15]=1},L$a.cloneTo=function(L$a){var L$b,L$c,L$d;if((L$c=this.elements)!==(L$d=L$a.elements))for(L$b=0;L$b<16;++L$b)L$d[L$b]=L$c[L$b]},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$a.getTranslationVector=function(L$a){var L$b=this.elements,L$c=L$a.elements;L$c[0]=L$b[12],L$c[1]=L$b[13],L$c[2]=L$b[14]},L$a.setTranslationVector=function(L$a){var L$b=this.elements,L$c=L$a.elements;L$b[12]=L$c[0],L$b[13]=L$c[1],L$b[14]=L$c[2]},L$a.getForward=function(L$a){var L$b=this.elements,L$c=L$a.elements;L$c[0]=-L$b[8],L$c[1]=-L$b[9],L$c[2]=-L$b[10]},L$a.setForward=function(L$a){var L$b=this.elements,L$c=L$a.elements;L$b[8]=-L$c[0],L$b[9]=-L$c[1],L$b[10]=-L$c[2]},L$B.createRotationX=function(L$a,L$b){var L$c=L$b.elements,L$d=Math.sin(L$a),L$e=Math.cos(L$a);L$c[1]=L$c[2]=L$c[3]=L$c[4]=L$c[7]=L$c[8]=L$c[11]=L$c[12]=L$c[13]=L$c[14]=0,L$c[0]=L$c[15]=1,L$c[5]=L$c[10]=L$e,L$c[6]=L$d,L$c[9]=-L$d},L$B.createRotationY=function(L$a,L$b){var L$c=L$b.elements,L$d=Math.sin(L$a),L$e=Math.cos(L$a);L$c[1]=L$c[3]=L$c[4]=L$c[6]=L$c[7]=L$c[9]=L$c[11]=L$c[12]=L$c[13]=L$c[14]=0,L$c[5]=L$c[15]=1,L$c[0]=L$c[10]=L$e,L$c[2]=-L$d,L$c[8]=L$d},L$B.createRotationZ=function(L$a,L$b){var L$c=L$b.elements,L$d=Math.sin(L$a),L$e=Math.cos(L$a);L$c[2]=L$c[3]=L$c[6]=L$c[7]=L$c[8]=L$c[9]=L$c[11]=L$c[12]=L$c[13]=L$c[14]=0,L$c[10]=L$c[15]=1,L$c[0]=L$c[5]=L$e,L$c[1]=L$d,L$c[4]=-L$d},L$B.createRotationYawPitchRoll=function(L$a,L$b,L$c,L$d){L$cb.createFromYawPitchRoll(L$a,L$b,L$c,L$B._tempQuaternion),L$B.createRotationQuaternion(L$B._tempQuaternion,L$d)},L$B.createRotationAxis=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=Math.cos(L$b),L$i=Math.sin(L$b),L$j=L$e*L$e,L$k=L$f*L$f,L$l=L$g*L$g,L$m=L$e*L$f,L$n=L$e*L$g,L$o=L$f*L$g,L$p=L$c.elements;L$p[3]=L$p[7]=L$p[11]=L$p[12]=L$p[13]=L$p[14]=0,L$p[15]=1,L$p[0]=L$j+L$h*(1-L$j),L$p[1]=L$m-L$h*L$m+L$i*L$g,L$p[2]=L$n-L$h*L$n-L$i*L$f,L$p[4]=L$m-L$h*L$m-L$i*L$g,L$p[5]=L$k+L$h*(1-L$k),L$p[6]=L$o-L$h*L$o+L$i*L$e,L$p[8]=L$n-L$h*L$n+L$i*L$f,L$p[9]=L$o-L$h*L$o-L$i*L$e,L$p[10]=L$l+L$h*(1-L$l)},L$B.createRotationQuaternion=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$c[0],L$f=L$c[1],L$g=L$c[2],L$h=L$c[3],L$i=L$e*L$e,L$j=L$f*L$f,L$k=L$g*L$g,L$l=L$e*L$f,L$m=L$g*L$h,L$n=L$g*L$e,L$o=L$f*L$h,L$p=L$f*L$g,L$q=L$e*L$h;L$d[3]=L$d[7]=L$d[11]=L$d[12]=L$d[13]=L$d[14]=0,L$d[15]=1,L$d[0]=1-2*(L$j+L$k),L$d[1]=2*(L$l+L$m),L$d[2]=2*(L$n-L$o),L$d[4]=2*(L$l-L$m),L$d[5]=1-2*(L$k+L$i),L$d[6]=2*(L$p+L$q),L$d[8]=2*(L$n+L$o),L$d[9]=2*(L$p-L$q),L$d[10]=1-2*(L$j+L$i)},L$B.createTranslate=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;L$d[4]=L$d[8]=L$d[1]=L$d[9]=L$d[2]=L$d[6]=L$d[3]=L$d[7]=L$d[11]=0,L$d[0]=L$d[5]=L$d[10]=L$d[15]=1,L$d[12]=L$c[0],L$d[13]=L$c[1],L$d[14]=L$c[2]},L$B.createScaling=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;L$d[0]=L$c[0],L$d[5]=L$c[1],L$d[10]=L$c[2],L$d[1]=L$d[4]=L$d[8]=L$d[12]=L$d[9]=L$d[13]=L$d[2]=L$d[6]=L$d[14]=L$d[3]=L$d[7]=L$d[11]=0,L$d[15]=1},L$B.multiply=function(L$a,L$b,L$c){var L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k;for(L$e=L$c.elements,L$f=L$a.elements,L$e===(L$g=L$b.elements)&&(L$g=L$g.slice()),L$d=0;L$d<4;L$d++)L$h=L$f[L$d],L$i=L$f[L$d+4],L$j=L$f[L$d+8],L$k=L$f[L$d+12],L$e[L$d]=L$h*L$g[0]+L$i*L$g[1]+L$j*L$g[2]+L$k*L$g[3],L$e[L$d+4]=L$h*L$g[4]+L$i*L$g[5]+L$j*L$g[6]+L$k*L$g[7],L$e[L$d+8]=L$h*L$g[8]+L$i*L$g[9]+L$j*L$g[10]+L$k*L$g[11],L$e[L$d+12]=L$h*L$g[12]+L$i*L$g[13]+L$j*L$g[14]+L$k*L$g[15]},L$B.createFromQuaternion=function(L$a,L$b){var L$c=L$b.elements,L$d=L$a.elements,L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$d[3],L$i=L$e+L$e,L$j=L$f+L$f,L$k=L$g+L$g,L$l=L$e*L$i,L$m=L$f*L$i,L$n=L$f*L$j,L$o=L$g*L$i,L$p=L$g*L$j,L$q=L$g*L$k,L$r=L$h*L$i,L$s=L$h*L$j,L$t=L$h*L$k;L$c[0]=1-L$n-L$q,L$c[1]=L$m+L$t,L$c[2]=L$o-L$s,L$c[3]=0,L$c[4]=L$m-L$t,L$c[5]=1-L$l-L$q,L$c[6]=L$p+L$r,L$c[7]=0,L$c[8]=L$o+L$s,L$c[9]=L$p-L$r,L$c[10]=1-L$l-L$n,L$c[11]=0,L$c[12]=0,L$c[13]=0,L$c[14]=0,L$c[15]=1},L$B.createAffineTransformation=function(L$a,L$b,L$c,L$d){var L$e=L$a.elements,L$f=L$b.elements,L$g=L$c.elements,L$h=L$d.elements,L$i=L$f[0],L$j=L$f[1],L$k=L$f[2],L$l=L$f[3],L$m=L$i+L$i,L$n=L$j+L$j,L$o=L$k+L$k,L$p=L$i*L$m,L$q=L$i*L$n,L$r=L$i*L$o,L$s=L$j*L$n,L$t=L$j*L$o,L$u=L$k*L$o,L$v=L$l*L$m,L$y=L$l*L$n,L$z=L$l*L$o,L$A=L$g[0],L$B=L$g[1],L$C=L$g[2];L$h[0]=(1-(L$s+L$u))*L$A,L$h[1]=(L$q+L$z)*L$A,L$h[2]=(L$r-L$y)*L$A,L$h[3]=0,L$h[4]=(L$q-L$z)*L$B,L$h[5]=(1-(L$p+L$u))*L$B,L$h[6]=(L$t+L$v)*L$B,L$h[7]=0,L$h[8]=(L$r+L$y)*L$C,L$h[9]=(L$t-L$v)*L$C,L$h[10]=(1-(L$p+L$s))*L$C,L$h[11]=0,L$h[12]=L$e[0],L$h[13]=L$e[1],L$h[14]=L$e[2],L$h[15]=1},L$B.createLookAt=function(L$a,L$b,L$c,L$d){var L$e=L$d.elements,L$f=L$B._tempVector0,L$g=L$B._tempVector1,L$h=L$B._tempVector2;L$gb.subtract(L$a,L$b,L$h),L$gb.normalize(L$h,L$h),L$gb.cross(L$c,L$h,L$f),L$gb.normalize(L$f,L$f),L$gb.cross(L$h,L$f,L$g),L$d.identity(),L$e[0]=L$f.x,L$e[4]=L$f.y,L$e[8]=L$f.z,L$e[1]=L$g.x,L$e[5]=L$g.y,L$e[9]=L$g.z,L$e[2]=L$h.x,L$e[6]=L$h.y,L$e[10]=L$h.z,L$e[12]=-L$gb.dot(L$f,L$a),L$e[13]=-L$gb.dot(L$g,L$a),L$e[14]=-L$gb.dot(L$h,L$a)},L$B.createPerspective=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$e.elements,L$g=1/Math.tan(L$a/2),L$h=1/(L$c-L$d);L$f[0]=L$g/L$b,L$f[5]=L$g,L$f[10]=(L$d+L$c)*L$h,L$f[11]=-1,L$f[14]=2*L$d*L$c*L$h,L$f[1]=L$f[2]=L$f[3]=L$f[4]=L$f[6]=L$f[7]=L$f[8]=L$f[9]=L$f[12]=L$f[13]=L$f[15]=0},L$B.createOrthoOffCenterRH=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){var L$h=L$g.elements,L$i=1/(L$a-L$b),L$j=1/(L$c-L$d),L$k=1/(L$e-L$f);L$h[1]=L$h[2]=L$h[3]=L$h[4]=L$h[6]=L$h[7]=L$h[8]=L$h[9]=L$h[11]=0,L$h[15]=1,L$h[0]=-2*L$i,L$h[5]=-2*L$j,L$h[10]=2*L$k,L$h[12]=(L$a+L$b)*L$i,L$h[13]=(L$d+L$c)*L$j,L$h[14]=(L$f+L$e)*L$k},L$B.translation=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;L$d[0]=L$d[5]=L$d[10]=L$d[15]=1,L$d[12]=L$c[0],L$d[13]=L$c[1],L$d[14]=L$c[2]},L$l(L$B,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new L$B},"_tempVector0",function(){return this._tempVector0=new L$gb},"_tempVector1",function(){return this._tempVector1=new L$gb},"_tempVector2",function(){return this._tempVector2=new L$gb},"_tempQuaternion",function(){return this._tempQuaternion=new L$cb},"DEFAULT",function(){return this.DEFAULT=new L$B},"ZERO",function(){return this.ZERO=new L$B(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}]),L$B}(),L$bb=(function(){function L$t(L$a,L$b){this.extents=null,this.transformation=null,this.extents=L$a,this.transformation=L$b}L$n(L$t,"laya.d3.math.OrientedBoundBox");var L$a=L$t.prototype;L$a.getCorners=function(L$a){var L$b=L$t._tempV30.elements,L$c=L$t._tempV31.elements,L$d=L$t._tempV32.elements,L$e=this.extents.elements;L$b[0]=L$e[0],L$b[1]=L$b[2]=0,L$c[1]=L$e[1],L$c[0]=L$c[2]=0,L$d[2]=L$e[2],L$d[0]=L$d[1]=0,L$gb.TransformNormal(L$t._tempV30,this.transformation,L$t._tempV30),L$gb.TransformNormal(L$t._tempV31,this.transformation,L$t._tempV31),L$gb.TransformNormal(L$t._tempV32,this.transformation,L$t._tempV32);var L$f=L$t._tempV33;this.transformation.getTranslationVector(L$f),L$a.length=8,L$gb.add(L$f,L$t._tempV30,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV32,L$a[0]),L$gb.add(L$f,L$t._tempV30,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV32,L$a[1]),L$gb.subtract(L$f,L$t._tempV30,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV32,L$a[2]),L$gb.subtract(L$f,L$t._tempV30,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV32,L$a[3]),L$gb.add(L$f,L$t._tempV30,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV32,L$a[4]),L$gb.add(L$f,L$t._tempV30,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV32,L$a[5]),L$gb.subtract(L$f,L$t._tempV30,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV32,L$a[6]),L$gb.subtract(L$f,L$t._tempV30,L$t._tempV34),L$gb.subtract(L$t._tempV34,L$t._tempV31,L$t._tempV34),L$gb.add(L$t._tempV34,L$t._tempV32,L$a[7])},L$a.transform=function(L$a){L$ab.multiply(this.transformation,L$a,this.transformation)},L$a.scale=function(L$a){L$gb.multiply(this.extents,L$a,this.extents)},L$a.translate=function(L$a){this.transformation.getTranslationVector(L$t._tempV30),L$gb.add(L$t._tempV30,L$a,L$t._tempV31),this.transformation.setTranslationVector(L$t._tempV31)},L$a.Size=function(L$a){L$gb.scale(this.extents,2,L$a)},L$a.getSize=function(L$a){var L$b=this.extents.elements;L$t._tempV30.x=L$b[0],L$t._tempV31.y=L$b[1],L$t._tempV32.z=L$b[2],L$gb.TransformNormal(L$t._tempV30,this.transformation,L$t._tempV30),L$gb.TransformNormal(L$t._tempV31,this.transformation,L$t._tempV31),L$gb.TransformNormal(L$t._tempV31,this.transformation,L$t._tempV32);var L$c=L$a.elements;L$c[0]=L$gb.scalarLength(L$t._tempV30),L$c[1]=L$gb.scalarLength(L$t._tempV31),L$c[2]=L$gb.scalarLength(L$t._tempV32)},L$a.getSizeSquared=function(L$a){var L$b=this.extents.elements;L$t._tempV30.x=L$b[0],L$t._tempV31.y=L$b[1],L$t._tempV32.z=L$b[2],L$gb.TransformNormal(L$t._tempV30,this.transformation,L$t._tempV30),L$gb.TransformNormal(L$t._tempV31,this.transformation,L$t._tempV31),L$gb.TransformNormal(L$t._tempV31,this.transformation,L$t._tempV32);var L$c=L$a.elements;L$c[0]=L$gb.scalarLengthSquared(L$t._tempV30),L$c[1]=L$gb.scalarLengthSquared(L$t._tempV31),L$c[2]=L$gb.scalarLengthSquared(L$t._tempV32)},L$a.getCenter=function(L$a){this.transformation.getTranslationVector(L$a)},L$a.containsPoint=function(L$a){var L$b=this.extents.elements,L$c=L$b[0],L$d=L$b[1],L$e=L$b[2];this.transformation.invert(L$t._tempM0),L$gb.transformCoordinate(L$a,L$t._tempM0,L$t._tempV30);var L$f=L$t._tempV30.elements,L$g=Math.abs(L$f[0]),L$h=Math.abs(L$f[1]),L$i=Math.abs(L$f[2]);return L$wa.nearEqual(L$g,L$c)&&L$wa.nearEqual(L$h,L$d)&&L$wa.nearEqual(L$i,L$e)?2:L$g<L$c&&L$h<L$d&&L$i<L$e?1:0},L$a.containsPoints=function(L$a){var L$b=this.extents.elements,L$c=L$b[0],L$d=L$b[1],L$e=L$b[2];this.transformation.invert(L$t._tempM0);for(var L$f=!0,L$g=!1,L$h=0;L$h<L$a.length;L$h++){L$gb.transformCoordinate(L$a[L$h],L$t._tempM0,L$t._tempV30);var L$i=L$t._tempV30.elements,L$j=Math.abs(L$i[0]),L$k=Math.abs(L$i[1]),L$l=Math.abs(L$i[2]);L$wa.nearEqual(L$j,L$c)&&L$wa.nearEqual(L$k,L$d)&&L$wa.nearEqual(L$l,L$e)&&(L$g=!0),L$j<L$c&&L$k<L$d&&L$l<L$e?L$g=!0:L$f=!1}return L$f?1:L$g?2:0},L$a.containsSphere=function(L$a,L$b){void 0===L$b&&(L$b=!1);var L$c=this.extents.elements,L$d=L$c[0],L$e=L$c[1],L$f=L$c[2],L$g=L$a.radius;this.transformation.invert(L$t._tempM0),L$gb.transformCoordinate(L$a.center,L$t._tempM0,L$t._tempV30);var L$h=NaN;if(L$h=L$b?L$g:(L$gb.scale(L$gb.UnitX,L$g,L$t._tempV31),L$gb.TransformNormal(L$t._tempV31,L$t._tempM0,L$t._tempV31),L$gb.scalarLength(L$t._tempV31)),L$gb.scale(this.extents,-1,L$t._tempV32),L$gb.Clamp(L$t._tempV30,L$t._tempV32,this.extents,L$t._tempV33),L$h*L$h<L$gb.distanceSquared(L$t._tempV30,L$t._tempV33))return 0;var L$i=L$t._tempV30.elements,L$j=L$i[0],L$k=L$i[1],L$l=L$i[2],L$m=L$t._tempV32.elements,L$n=L$m[0],L$o=L$m[1],L$p=L$m[2];return L$n+L$h<=L$j&&L$j<=L$d-L$h&&L$h<L$d-L$n&&L$o+L$h<=L$k&&L$k<=L$e-L$h&&L$h<L$e-L$o&&L$p+L$h<=L$l&&L$l<=L$f-L$h&&L$h<L$f-L$p?1:2},L$a.containsOrientedBoundBox=function(L$a){var L$b=0,L$c=0;L$a.getCorners(L$t._corners);var L$d=this.containsPoints(L$t._corners);if(0!=L$d)return L$d;var L$e=this.extents.elements;L$a.extents.cloneTo(L$t._tempV35);var L$f=L$t._tempV35.elements;L$t._getRows(this.transformation,L$t._rows1),L$t._getRows(L$a.transformation,L$t._rows2);var L$g=NaN;for(L$b=0;L$b<4;L$b++)for(L$c=0;L$c<4;L$c++)3==L$b||3==L$c?(L$t._tempM0.setElementByRowColumn(L$b,L$c,0),L$t._tempM1.setElementByRowColumn(L$b,L$c,0)):(L$g=L$gb.dot(L$t._rows1[L$b],L$t._rows2[L$c]),L$t._tempM0.setElementByRowColumn(L$b,L$c,L$g),L$t._tempM1.setElementByRowColumn(L$b,L$c,Math.abs(L$g)));L$a.getCenter(L$t._tempV34),this.getCenter(L$t._tempV36),L$gb.subtract(L$t._tempV34,L$t._tempV36,L$t._tempV30);var L$h=L$t._tempV31.elements;L$h[0]=L$gb.dot(L$t._tempV30,L$t._rows1[0]),L$h[1]=L$gb.dot(L$t._tempV30,L$t._rows1[1]),L$h[2]=L$gb.dot(L$t._tempV30,L$t._rows1[2]);var L$i=L$t._tempV32.elements,L$j=L$t._tempV33.elements;for(L$b=0;L$b<3;L$b++)if(L$i[0]=L$t._tempM1.getElementByRowColumn(L$b,0),L$i[1]=L$t._tempM1.getElementByRowColumn(L$b,1),L$i[2]=L$t._tempM1.getElementByRowColumn(L$b,2),L$e[L$b]+L$gb.dot(L$t._tempV35,L$t._tempV32)<Math.abs(L$h[L$b]))return 0;for(L$c=0;L$c<3;L$c++)if(L$i[0]=L$t._tempM1.getElementByRowColumn(0,L$c),L$i[1]=L$t._tempM1.getElementByRowColumn(1,L$c),L$i[2]=L$t._tempM1.getElementByRowColumn(2,L$c),L$j[0]=L$t._tempM0.getElementByRowColumn(0,L$c),L$j[1]=L$t._tempM0.getElementByRowColumn(1,L$c),L$j[2]=L$t._tempM0.getElementByRowColumn(2,L$c),L$gb.dot(this.extents,L$t._tempV32)+L$f[L$c]<Math.abs(L$gb.dot(L$t._tempV31,L$t._tempV33)))return 0;for(L$b=0;L$b<3;L$b++)for(L$c=0;L$c<3;L$c++){var L$k=(L$b+1)%3,L$l=(L$b+2)%3,L$m=(L$c+1)%3,L$n=(L$c+2)%3;if(L$e[L$k]*L$t._tempM1.getElementByRowColumn(L$l,L$c)+L$e[L$l]*L$t._tempM1.getElementByRowColumn(L$k,L$c)+(L$f[L$m]*L$t._tempM1.getElementByRowColumn(L$b,L$n)+L$f[L$n]*L$t._tempM1.getElementByRowColumn(L$b,L$m))<Math.abs(L$h[L$l]*L$t._tempM0.getElementByRowColumn(L$k,L$c)-L$h[L$k]*L$t._tempM0.getElementByRowColumn(L$l,L$c)))return 0}return 2},L$a.containsLine=function(L$a,L$b){L$t._corners[0]=L$a,L$t._corners[1]=L$b;var L$c=this.containsPoints(L$t._corners);if(0!=L$c)return L$c;var L$d=this.extents.elements,L$e=L$d[0],L$f=L$d[1],L$g=L$d[2];this.transformation.invert(L$t._tempM0),L$gb.transformCoordinate(L$a,L$t._tempM0,L$t._tempV30),L$gb.transformCoordinate(L$b,L$t._tempM0,L$t._tempV31),L$gb.add(L$t._tempV30,L$t._tempV31,L$t._tempV32),L$gb.scale(L$t._tempV32,.5,L$t._tempV32),L$gb.subtract(L$t._tempV30,L$t._tempV32,L$t._tempV33);var L$h=L$t._tempV33.elements,L$i=L$h[0],L$j=L$h[1],L$k=L$h[2],L$l=L$t._tempV34.elements,L$m=L$l[0]=Math.abs(L$h[0]),L$n=L$l[1]=Math.abs(L$h[1]),L$o=L$l[2]=Math.abs(L$h[2]),L$p=L$t._tempV32.elements,L$q=L$p[0],L$r=L$p[1],L$s=L$p[2];return Math.abs(L$q)>L$e+L$m?0:Math.abs(L$r)>L$f+L$n?0:Math.abs(L$s)>L$g+L$o?0:Math.abs(L$r*L$k-L$s*L$j)>L$f*L$o+L$g*L$n?0:Math.abs(L$q*L$k-L$s*L$i)>L$e*L$o+L$g*L$m?0:Math.abs(L$q*L$j-L$r*L$i)>L$e*L$n+L$f*L$m?0:2},L$a.containsBoundBox=function(L$a){var L$b=0,L$c=0,L$d=L$a.min,L$e=L$a.max;L$a.getCorners(L$t._corners);var L$f=this.containsPoints(L$t._corners);if(0!=L$f)return L$f;L$gb.subtract(L$e,L$d,L$t._tempV30),L$gb.scale(L$t._tempV30,.5,L$t._tempV30),L$gb.add(L$d,L$t._tempV30,L$t._tempV30),L$gb.subtract(L$e,L$t._tempV30,L$t._tempV31);var L$g=this.extents.elements,L$h=L$t._tempV31.elements;L$t._getRows(this.transformation,L$t._rows1),this.transformation.invert(L$t._tempM0);for(L$b=0;L$b<3;L$b++)for(L$c=0;L$c<3;L$c++)L$t._tempM1.setElementByRowColumn(L$b,L$c,Math.abs(L$t._tempM0.getElementByRowColumn(L$b,L$c)));this.getCenter(L$t._tempV35),L$gb.subtract(L$t._tempV30,L$t._tempV35,L$t._tempV32);var L$i=L$t._tempV31.elements;L$i[0]=L$gb.dot(L$t._tempV32,L$t._rows1[0]),L$i[1]=L$gb.dot(L$t._tempV32,L$t._rows1[1]),L$i[2]=L$gb.dot(L$t._tempV32,L$t._rows1[2]);var L$j=L$t._tempV33.elements,L$k=L$t._tempV34.elements;for(L$b=0;L$b<3;L$b++)if(L$j[0]=L$t._tempM1.getElementByRowColumn(L$b,0),L$j[1]=L$t._tempM1.getElementByRowColumn(L$b,1),L$j[2]=L$t._tempM1.getElementByRowColumn(L$b,2),L$g[L$b]+L$gb.dot(L$t._tempV31,L$t._tempV33)<Math.abs(L$i[L$b]))return 0;for(L$c=0;L$c<3;L$c++)if(L$j[0]=L$t._tempM1.getElementByRowColumn(0,L$c),L$j[1]=L$t._tempM1.getElementByRowColumn(1,L$c),L$j[2]=L$t._tempM1.getElementByRowColumn(2,L$c),L$k[0]=L$t._tempM0.getElementByRowColumn(0,L$c),L$k[1]=L$t._tempM0.getElementByRowColumn(1,L$c),L$k[2]=L$t._tempM0.getElementByRowColumn(2,L$c),L$gb.dot(this.extents,L$t._tempV33)+L$h[L$c]<Math.abs(L$gb.dot(L$t._tempV31,L$t._tempV34)))return 0;for(L$b=0;L$b<3;L$b++)for(L$c=0;L$c<3;L$c++){var L$l=(L$b+1)%3,L$m=(L$b+2)%3,L$n=(L$c+1)%3,L$o=(L$c+2)%3;if(L$g[L$l]*L$t._tempM1.getElementByRowColumn(L$m,L$c)+L$g[L$m]*L$t._tempM1.getElementByRowColumn(L$l,L$c)+(L$h[L$n]*L$t._tempM1.getElementByRowColumn(L$b,L$o)+L$h[L$o]*L$t._tempM1.getElementByRowColumn(L$b,L$n))<Math.abs(L$i[L$m]*L$t._tempM0.getElementByRowColumn(L$l,L$c)-L$i[L$l]*L$t._tempM0.getElementByRowColumn(L$m,L$c)))return 0}return 2},L$a.intersectsRay=function(L$a,L$b){L$gb.scale(this.extents,-1,L$t._tempV30),this.transformation.invert(L$t._tempM0),L$gb.TransformNormal(L$a.direction,L$t._tempM0,L$t._ray.direction),L$gb.transformCoordinate(L$a.origin,L$t._tempM0,L$t._ray.origin),L$t._boxBound1.min=L$t._tempV30,L$t._boxBound1.max=this.extents;var L$c=Collision.intersectsRayAndBoxRP(L$t._ray,L$t._boxBound1,L$b);return-1!==L$c&&L$gb.transformCoordinate(L$b,this.transformation,L$b),L$c},L$a._getLocalCorners=function(L$a){L$a.length=8;var L$b=this.extents.elements;L$t._tempV30.x=L$b[0],L$t._tempV31.y=L$b[1],L$t._tempV32.z=L$b[2],L$gb.add(L$t._tempV30,L$t._tempV31,L$t._tempV33),L$gb.add(L$t._tempV33,L$t._tempV32,L$a[0]),L$gb.add(L$t._tempV30,L$t._tempV31,L$t._tempV33),L$gb.subtract(L$t._tempV33,L$t._tempV32,L$a[1]),L$gb.subtract(L$t._tempV31,L$t._tempV30,L$t._tempV33),L$gb.subtract(L$t._tempV33,L$t._tempV30,L$a[2]),L$gb.subtract(L$t._tempV31,L$t._tempV30,L$t._tempV33),L$gb.add(L$t._tempV33,L$t._tempV32,L$a[3]),L$gb.subtract(L$t._tempV30,L$t._tempV31,L$t._tempV33),L$gb.add(L$t._tempV33,L$t._tempV32,L$a[4]),L$gb.subtract(L$t._tempV30,L$t._tempV31,L$t._tempV33),L$gb.subtract(L$t._tempV33,L$t._tempV32,L$a[5]),L$gb.scale(L$a[0],-1,L$a[6]),L$gb.subtract(L$t._tempV32,L$t._tempV30,L$t._tempV33),L$gb.subtract(L$t._tempV33,L$t._tempV31,L$a[7])},L$a.equals=function(L$a){return this.extents==L$a.extents&&this.transformation==L$a.transformation},L$a.cloneTo=function(L$a){var L$b=L$a;this.extents.cloneTo(L$b.extents),this.transformation.cloneTo(L$b.transformation)},L$t.createByBoundBox=function(L$a,L$b){var L$c=L$a.min,L$d=L$a.max;L$gb.subtract(L$d,L$c,L$t._tempV30),L$gb.scale(L$t._tempV30,.5,L$t._tempV30),L$gb.add(L$c,L$t._tempV30,L$t._tempV31),L$gb.subtract(L$d,L$t._tempV31,L$t._tempV32),L$ab.translation(L$t._tempV31,L$t._tempM0);var L$e=L$t._tempV32.clone(),L$f=L$t._tempM0.clone();L$b.extents=L$e,L$b.transformation=L$f},L$t.createByMinAndMaxVertex=function(L$a,L$b){return L$gb.subtract(L$b,L$a,L$t._tempV30),L$gb.scale(L$t._tempV30,.5,L$t._tempV30),L$gb.add(L$a,L$t._tempV30,L$t._tempV31),L$gb.subtract(L$b,L$t._tempV31,L$t._tempV32),L$ab.translation(L$t._tempV31,L$t._tempM0),new L$t(L$t._tempV32,L$t._tempM0)},L$t._getRows=function(L$a,L$b){L$b.length=3;var L$c=L$a.elements,L$d=L$b[0].elements;L$d[0]=L$c[0],L$d[1]=L$c[1],L$d[2]=L$c[2];var L$e=L$b[1].elements;L$e[0]=L$c[4],L$e[1]=L$c[5],L$e[2]=L$c[6];var L$f=L$b[2].elements;L$f[0]=L$c[8],L$f[1]=L$c[9],L$f[2]=L$c[10]},L$t.getObbtoObbMatrix4x4=function(L$a,L$b,L$c,L$d){var L$e=L$a.transformation,L$f=L$b.transformation;if(L$c){L$t._getRows(L$e,L$t._rows1),L$t._getRows(L$f,L$t._rows2);for(var L$g=0;L$g<3;L$g++)for(var L$h=0;L$h<3;L$h++)L$d.setElementByRowColumn(L$g,L$h,L$gb.dot(L$t._rows2[L$g],L$t._rows1[L$h]));L$b.getCenter(L$t._tempV30),L$a.getCenter(L$t._tempV31),L$gb.subtract(L$t._tempV30,L$t._tempV31,L$t._tempV32);var L$i=L$d.elements;L$i[12]=L$gb.dot(L$t._tempV32,L$t._rows1[0]),L$i[13]=L$gb.dot(L$t._tempV32,L$t._rows1[1]),L$i[14]=L$gb.dot(L$t._tempV32,L$t._rows1[2]),L$i[15]=1}else L$e.invert(L$t._tempM0),L$ab.multiply(L$f,L$t._tempM0,L$d)},L$t.merge=function(L$a,L$b,L$c){var L$d=L$a.extents,L$e=L$a.transformation;L$t.getObbtoObbMatrix4x4(L$a,L$b,L$c,L$t._tempM0),L$b._getLocalCorners(L$t._corners),L$gb.transformCoordinate(L$t._corners[0],L$t._tempM0,L$t._corners[0]),L$gb.transformCoordinate(L$t._corners[1],L$t._tempM0,L$t._corners[1]),L$gb.transformCoordinate(L$t._corners[2],L$t._tempM0,L$t._corners[2]),L$gb.transformCoordinate(L$t._corners[3],L$t._tempM0,L$t._corners[3]),L$gb.transformCoordinate(L$t._corners[4],L$t._tempM0,L$t._corners[4]),L$gb.transformCoordinate(L$t._corners[5],L$t._tempM0,L$t._corners[5]),L$gb.transformCoordinate(L$t._corners[6],L$t._tempM0,L$t._corners[6]),L$gb.transformCoordinate(L$t._corners[7],L$t._tempM0,L$t._corners[7]),L$gb.scale(L$d,-1,L$t._boxBound1.min),L$d.cloneTo(L$t._boxBound1.max),L$Za.createfromPoints(L$t._corners,L$t._boxBound2),L$Za.merge(L$t._boxBound2,L$t._boxBound1,L$t._boxBound3);var L$f=L$t._boxBound3.min,L$g=L$t._boxBound3.max;L$gb.subtract(L$g,L$f,L$t._tempV30),L$gb.scale(L$t._tempV30,.5,L$t._tempV30),L$gb.add(L$f,L$t._tempV30,L$t._tempV32),L$gb.subtract(L$g,L$t._tempV32,L$d),L$gb.transformCoordinate(L$t._tempV32,L$e,L$t._tempV33)},L$l(L$t,["_tempV30",function(){return this._tempV30=new L$gb},"_tempV31",function(){return this._tempV31=new L$gb},"_tempV32",function(){return this._tempV32=new L$gb},"_tempV33",function(){return this._tempV33=new L$gb},"_tempV34",function(){return this._tempV34=new L$gb},"_tempV35",function(){return this._tempV35=new L$gb},"_tempV36",function(){return this._tempV36=new L$gb},"_tempM0",function(){return this._tempM0=new L$ab},"_tempM1",function(){return this._tempM1=new L$ab},"_corners",function(){return this._corners=[new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb]},"_rows1",function(){return this._rows1=[new L$gb,new L$gb,new L$gb]},"_rows2",function(){return this._rows2=[new L$gb,new L$gb,new L$gb]},"_ray",function(){return this._ray=new L$eb(new L$gb,new L$gb)},"_boxBound1",function(){return this._boxBound1=new L$Za(new L$gb,new L$gb)},"_boxBound2",function(){return this._boxBound2=new L$Za(new L$gb,new L$gb)},"_boxBound3",function(){return this._boxBound3=new L$Za(new L$gb,new L$gb)}])}(),function(){function L$v(L$a,L$b){this.normal=null,this.distance=NaN,void 0===L$b&&(L$b=0),this.normal=L$a,this.distance=L$b}return L$n(L$v,"laya.d3.math.Plane"),L$v.prototype.normalize=function(){var L$a=this.normal.elements,L$b=L$a[0],L$c=L$a[1],L$d=L$a[2],L$e=1/Math.sqrt(L$b*L$b+L$c*L$c+L$d*L$d);L$a[0]=L$b*L$e,L$a[1]=L$c*L$e,L$a[2]=L$d*L$e,this.distance*=L$e},L$v.createPlaneBy3P=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$b.elements,L$f=L$c.elements,L$g=L$e[0]-L$d[0],L$h=L$e[1]-L$d[1],L$i=L$e[2]-L$d[2],L$j=L$f[0]-L$d[0],L$k=L$f[1]-L$d[1],L$l=L$f[2]-L$d[2],L$m=L$h*L$l-L$i*L$k,L$n=L$i*L$j-L$g*L$l,L$o=L$g*L$k-L$h*L$j,L$p=1/Math.sqrt(L$m*L$m+L$n*L$n+L$o*L$o),L$q=L$m*L$p,L$r=L$n*L$p,L$s=L$o*L$p,L$t=L$v._TEMPVec3.elements;L$t[0]=L$q,L$t[1]=L$r,L$t[2]=L$s;var L$u=-(L$q*L$d[0]+L$r*L$d[1]+L$s*L$d[2]);return new L$v(L$v._TEMPVec3,L$u)},L$v.PlaneIntersectionType_Back=0,L$v.PlaneIntersectionType_Front=1,L$v.PlaneIntersectionType_Intersecting=2,L$l(L$v,["_TEMPVec3",function(){return this._TEMPVec3=new L$gb}]),L$v}()),L$cb=function(){function L$e(L$a,L$b,L$c,L$d){this.elements=new Float32Array(4),void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=1),this.elements[0]=L$a,this.elements[1]=L$b,this.elements[2]=L$c,this.elements[3]=L$d}L$n(L$e,"laya.d3.math.Quaternion");var L$a=L$e.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.scaling=function(L$a,L$b){var L$c=L$b.elements,L$d=this.elements;L$c[0]=L$d[0]*L$a,L$c[1]=L$d[1]*L$a,L$c[2]=L$d[2]*L$a,L$c[3]=L$d[3]*L$a},L$a.normalize=function(L$a){var L$b=L$a.elements,L$c=this.elements,L$d=L$c[0],L$e=L$c[1],L$f=L$c[2],L$g=L$c[3],L$h=L$d*L$d+L$e*L$e+L$f*L$f+L$g*L$g;0<L$h&&(L$h=1/Math.sqrt(L$h),L$b[0]=L$d*L$h,L$b[1]=L$e*L$h,L$b[2]=L$f*L$h,L$b[3]=L$g*L$h)},L$a.length=function(){var L$a=this.elements,L$b=L$a[0],L$c=L$a[1],L$d=L$a[2],L$e=L$a[3];return Math.sqrt(L$b*L$b+L$c*L$c+L$d*L$d+L$e*L$e)},L$a.rotateX=function(L$a,L$b){var L$c=L$b.elements,L$d=this.elements;L$a*=.5;var L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$d[3],L$i=Math.sin(L$a),L$j=Math.cos(L$a);L$c[0]=L$e*L$j+L$h*L$i,L$c[1]=L$f*L$j+L$g*L$i,L$c[2]=L$g*L$j-L$f*L$i,L$c[3]=L$h*L$j-L$e*L$i},L$a.rotateY=function(L$a,L$b){var L$c=L$b.elements,L$d=this.elements;L$a*=.5;var L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$d[3],L$i=Math.sin(L$a),L$j=Math.cos(L$a);L$c[0]=L$e*L$j-L$g*L$i,L$c[1]=L$f*L$j+L$h*L$i,L$c[2]=L$g*L$j+L$e*L$i,L$c[3]=L$h*L$j-L$f*L$i},L$a.rotateZ=function(L$a,L$b){var L$c=L$b.elements,L$d=this.elements;L$a*=.5;var L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$d[3],L$i=Math.sin(L$a),L$j=Math.cos(L$a);L$c[0]=L$e*L$j+L$f*L$i,L$c[1]=L$f*L$j-L$e*L$i,L$c[2]=L$g*L$j+L$h*L$i,L$c[3]=L$h*L$j-L$g*L$i},L$a.getYawPitchRoll=function(L$a){L$gb.transformQuat(L$gb.ForwardRH,this,L$e.TEMPVector31),L$gb.transformQuat(L$gb.Up,this,L$e.TEMPVector32);var L$b=L$e.TEMPVector32.elements;L$e.angleTo(L$gb.ZERO,L$e.TEMPVector31,L$e.TEMPVector33);var L$c=L$e.TEMPVector33.elements;L$c[0]==Math.PI/2?(L$c[1]=L$e.arcTanAngle(L$b[2],L$b[0]),L$c[2]=0):L$c[0]==-Math.PI/2?(L$c[1]=L$e.arcTanAngle(-L$b[2],-L$b[0]),L$c[2]=0):(L$ab.createRotationY(-L$c[1],L$e.TEMPMatrix0),L$ab.createRotationX(-L$c[0],L$e.TEMPMatrix1),L$gb.transformCoordinate(L$e.TEMPVector32,L$e.TEMPMatrix0,L$e.TEMPVector32),L$gb.transformCoordinate(L$e.TEMPVector32,L$e.TEMPMatrix1,L$e.TEMPVector32),L$c[2]=L$e.arcTanAngle(L$b[1],-L$b[0])),L$c[1]<=-Math.PI&&(L$c[1]=Math.PI),L$c[2]<=-Math.PI&&(L$c[2]=Math.PI),L$c[1]>=Math.PI&&L$c[2]>=Math.PI&&(L$c[1]=0,L$c[2]=0,L$c[0]=Math.PI-L$c[0]);var L$d=L$a.elements;L$d[0]=L$c[1],L$d[1]=L$c[0],L$d[2]=L$c[2]},L$a.invert=function(L$a){var L$b=L$a.elements,L$c=this.elements,L$d=L$c[0],L$e=L$c[1],L$f=L$c[2],L$g=L$c[3],L$h=L$d*L$d+L$e*L$e+L$f*L$f+L$g*L$g,L$i=L$h?1/L$h:0;L$b[0]=-L$d*L$i,L$b[1]=-L$e*L$i,L$b[2]=-L$f*L$i,L$b[3]=L$g*L$i},L$a.identity=function(){var L$a=this.elements;L$a[0]=0,L$a[1]=0,L$a[2]=0,L$a[3]=1},L$a.fromArray=function(L$a,L$b){void 0===L$b&&(L$b=0),this.elements[0]=L$a[L$b+0],this.elements[1]=L$a[L$b+1],this.elements[2]=L$a[L$b+2],this.elements[3]=L$a[L$b+3]},L$a.cloneTo=function(L$a){var L$b,L$c,L$d;if((L$c=this.elements)!==(L$d=L$a.elements))for(L$b=0;L$b<4;++L$b)L$d[L$b]=L$c[L$b]},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$a.equals=function(L$a){var L$b=this.elements,L$c=L$a.elements;return L$wa.nearEqual(L$b[0],L$c[0])&&L$wa.nearEqual(L$b[1],L$c[1])&&L$wa.nearEqual(L$b[2],L$c[2])&&L$wa.nearEqual(L$b[3],L$c[3])},L$a.lengthSquared=function(){var L$a=this.elements[0],L$b=this.elements[1],L$c=this.elements[2],L$d=this.elements[3];return L$a*L$a+L$b*L$b+L$c*L$c+L$d*L$d},L$o(0,L$a,"x",function(){return this.elements[0]}),L$o(0,L$a,"y",function(){return this.elements[1]}),L$o(0,L$a,"z",function(){return this.elements[2]}),L$o(0,L$a,"w",function(){return this.elements[3]}),L$e.createFromYawPitchRoll=function(L$a,L$b,L$c,L$d){var L$e=.5*L$c,L$f=.5*L$b,L$g=.5*L$a,L$h=Math.sin(L$e),L$i=Math.cos(L$e),L$j=Math.sin(L$f),L$k=Math.cos(L$f),L$l=Math.sin(L$g),L$m=Math.cos(L$g),L$n=L$d.elements;L$n[0]=L$m*L$j*L$i+L$l*L$k*L$h,L$n[1]=L$l*L$k*L$i-L$m*L$j*L$h,L$n[2]=L$m*L$k*L$h-L$l*L$j*L$i,L$n[3]=L$m*L$k*L$i+L$l*L$j*L$h},L$e.multiply=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$b.elements,L$f=L$c.elements,L$g=L$d[0],L$h=L$d[1],L$i=L$d[2],L$j=L$d[3],L$k=L$e[0],L$l=L$e[1],L$m=L$e[2],L$n=L$e[3],L$o=L$h*L$m-L$i*L$l,L$p=L$i*L$k-L$g*L$m,L$q=L$g*L$l-L$h*L$k,L$r=L$g*L$k+L$h*L$l+L$i*L$m;L$f[0]=L$g*L$n+L$k*L$j+L$o,L$f[1]=L$h*L$n+L$l*L$j+L$p,L$f[2]=L$i*L$n+L$m*L$j+L$q,L$f[3]=L$j*L$n-L$r},L$e.arcTanAngle=function(L$a,L$b){return 0==L$a?1==L$b?Math.PI/2:-Math.PI/2:0<L$a?Math.atan(L$b/L$a):L$a<0?0<L$b?Math.atan(L$b/L$a)+Math.PI:Math.atan(L$b/L$a)-Math.PI:0},L$e.angleTo=function(L$a,L$b,L$c){L$gb.subtract(L$b,L$a,L$e.TEMPVector30),L$gb.normalize(L$e.TEMPVector30,L$e.TEMPVector30),L$c.elements[0]=Math.asin(L$e.TEMPVector30.y),L$c.elements[1]=L$e.arcTanAngle(-L$e.TEMPVector30.z,-L$e.TEMPVector30.x)},L$e.createFromAxisAngle=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements;L$b*=.5;var L$f=Math.sin(L$b);L$d[0]=L$f*L$e[0],L$d[1]=L$f*L$e[1],L$d[2]=L$f*L$e[2],L$d[3]=Math.cos(L$b)},L$e.createFromMatrix3x3=function(L$a,L$b){var L$c,L$d=L$b.elements,L$e=L$a.elements,L$f=L$e[0]+L$e[4]+L$e[8];if(0<L$f)L$c=Math.sqrt(L$f+1),L$d[3]=.5*L$c,L$c=.5/L$c,L$d[0]=(L$e[5]-L$e[7])*L$c,L$d[1]=(L$e[6]-L$e[2])*L$c,L$d[2]=(L$e[1]-L$e[3])*L$c;else{var L$g=0;L$e[4]>L$e[0]&&(L$g=1),L$e[8]>L$e[3*L$g+L$g]&&(L$g=2);var L$h=(L$g+1)%3,L$i=(L$g+2)%3;L$c=Math.sqrt(L$e[3*L$g+L$g]-L$e[3*L$h+L$h]-L$e[3*L$i+L$i]+1),L$d[L$g]=.5*L$c,L$c=.5/L$c,L$d[3]=(L$e[3*L$h+L$i]-L$e[3*L$i+L$h])*L$c,L$d[L$h]=(L$e[3*L$h+L$g]+L$e[3*L$g+L$h])*L$c,L$d[L$i]=(L$e[3*L$i+L$g]+L$e[3*L$g+L$i])*L$c}},L$e.createFromMatrix4x4=function(L$a,L$b){var L$c,L$d,L$e=L$a.elements,L$f=L$b.elements,L$g=L$e[0]+L$e[5]+L$e[10];0<L$g?(L$c=Math.sqrt(L$g+1),L$f[3]=.5*L$c,L$c=.5/L$c,L$f[0]=(L$e[6]-L$e[9])*L$c,L$f[1]=(L$e[8]-L$e[2])*L$c,L$f[2]=(L$e[1]-L$e[4])*L$c):L$e[0]>=L$e[5]&&L$e[0]>=L$e[10]?(L$d=.5/(L$c=Math.sqrt(1+L$e[0]-L$e[5]-L$e[10])),L$f[0]=.5*L$c,L$f[1]=(L$e[1]+L$e[4])*L$d,L$f[2]=(L$e[2]+L$e[8])*L$d,L$f[3]=(L$e[6]-L$e[9])*L$d):L$e[5]>L$e[10]?(L$d=.5/(L$c=Math.sqrt(1+L$e[5]-L$e[0]-L$e[10])),L$f[0]=(L$e[4]+L$e[1])*L$d,L$f[1]=.5*L$c,L$f[2]=(L$e[9]+L$e[6])*L$d,L$f[3]=(L$e[8]-L$e[2])*L$d):(L$d=.5/(L$c=Math.sqrt(1+L$e[10]-L$e[0]-L$e[5])),L$f[0]=(L$e[8]+L$e[2])*L$d,L$f[1]=(L$e[9]+L$e[6])*L$d,L$f[2]=.5*L$c,L$f[3]=(L$e[1]-L$e[4])*L$d)},L$e.slerp=function(L$a,L$b,L$c,L$d){var L$e,L$f,L$g,L$h,L$i,L$j=L$a.elements,L$k=L$b.elements,L$l=L$d.elements,L$m=L$j[0],L$n=L$j[1],L$o=L$j[2],L$p=L$j[3],L$q=L$k[0],L$r=L$k[1],L$s=L$k[2],L$t=L$k[3];return(L$f=L$m*L$q+L$n*L$r+L$o*L$s+L$p*L$t)<0&&(L$f=-L$f,L$q=-L$q,L$r=-L$r,L$s=-L$s,L$t=-L$t),L$i=1e-6<1-L$f?(L$e=Math.acos(L$f),L$g=Math.sin(L$e),L$h=Math.sin((1-L$c)*L$e)/L$g,Math.sin(L$c*L$e)/L$g):(L$h=1-L$c,L$c),L$l[0]=L$h*L$m+L$i*L$q,L$l[1]=L$h*L$n+L$i*L$r,L$l[2]=L$h*L$o+L$i*L$s,L$l[3]=L$h*L$p+L$i*L$t,L$l},L$e.lerp=function(L$a,L$b,L$c,L$d){var L$e=L$d.elements,L$f=L$a.elements,L$g=L$b.elements,L$h=L$f[0],L$i=L$f[1],L$j=L$f[2],L$k=L$f[3];L$e[0]=L$h+L$c*(L$g[0]-L$h),L$e[1]=L$i+L$c*(L$g[1]-L$i),L$e[2]=L$j+L$c*(L$g[2]-L$j),L$e[3]=L$k+L$c*(L$g[3]-L$k)},L$e.add=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=L$e[0]+L$f[0],L$d[1]=L$e[1]+L$f[1],L$d[2]=L$e[2]+L$f[2],L$d[3]=L$e[3]+L$f[3]},L$e.dot=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;return L$c[0]*L$d[0]+L$c[1]*L$d[1]+L$c[2]*L$d[2]+L$c[3]*L$d[3]},L$e.rotationLookAt=function(L$a,L$b,L$c){L$e.lookAt(L$gb.ZERO,L$a,L$b,L$c)},L$e.lookAt=function(L$a,L$b,L$c,L$d){L$xa.lookAt(L$a,L$b,L$c,L$e._tempMatrix3x3),L$e.rotationMatrix(L$e._tempMatrix3x3,L$d)},L$e.invert=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$a.lengthSquared();L$wa.isZero(L$e)||(L$e=1/L$e,L$d[0]=-L$c[0]*L$e,L$d[1]=-L$c[1]*L$e,L$d[2]=-L$c[2]*L$e,L$d[3]=L$c[3]*L$e)},L$e.rotationMatrix=function(L$a,L$b){var L$c=L$a.elements,L$d=L$c[0],L$e=L$c[1],L$f=L$c[2],L$g=L$c[3],L$h=L$c[4],L$i=L$c[5],L$j=L$c[6],L$k=L$c[7],L$l=L$c[8],L$m=L$b.elements,L$n=NaN,L$o=NaN,L$p=L$d+L$h+L$l;0<L$p?(L$n=Math.sqrt(L$p+1),L$m[3]=.5*L$n,L$n=.5/L$n,L$m[0]=(L$i-L$k)*L$n,L$m[1]=(L$j-L$f)*L$n,L$m[2]=(L$e-L$g)*L$n):L$h<=L$d&&L$l<=L$d?(L$o=.5/(L$n=Math.sqrt(1+L$d-L$h-L$l)),L$m[0]=.5*L$n,L$m[1]=(L$e+L$g)*L$o,L$m[2]=(L$f+L$j)*L$o,L$m[3]=(L$i-L$k)*L$o):L$l<L$h?(L$o=.5/(L$n=Math.sqrt(1+L$h-L$d-L$l)),L$m[0]=(L$g+L$e)*L$o,L$m[1]=.5*L$n,L$m[2]=(L$k+L$i)*L$o,L$m[3]=(L$j-L$f)*L$o):(L$o=.5/(L$n=Math.sqrt(1+L$l-L$d-L$h)),L$m[0]=(L$j+L$f)*L$o,L$m[1]=(L$k+L$i)*L$o,L$m[2]=.5*L$n,L$m[3]=(L$e-L$g)*L$o)},L$e.DEFAULT=new L$e,L$l(L$e,["TEMPVector30",function(){return this.TEMPVector30=new L$gb},"TEMPVector31",function(){return this.TEMPVector31=new L$gb},"TEMPVector32",function(){return this.TEMPVector32=new L$gb},"TEMPVector33",function(){return this.TEMPVector33=new L$gb},"TEMPMatrix0",function(){return this.TEMPMatrix0=new L$ab},"TEMPMatrix1",function(){return this.TEMPMatrix1=new L$ab},"_tempMatrix3x3",function(){return this._tempMatrix3x3=new L$xa},"NAN",function(){return this.NAN=new L$e(NaN,NaN,NaN,NaN)}]),L$e}(),L$db=function(){function L$a(L$a){this._temp=new Uint32Array(1),this.seeds=new Uint32Array(4),this.seeds[0]=L$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}L$n(L$a,"laya.d3.math.Rand");var L$b=L$a.prototype;return L$b.getUint=function(){return this._temp[0]=this.seeds[0]^this.seeds[0]<<11,this.seeds[0]=this.seeds[1],this.seeds[1]=this.seeds[2],this.seeds[2]=this.seeds[3],this.seeds[3]=this.seeds[3]^this.seeds[3]>>>19^this._temp[0]^this._temp[0]>>>8,this.seeds[3]},L$b.getFloat=function(){return this.getUint(),(8388607&this.seeds[3])*(1/8388607)},L$b.getSignedFloat=function(){return 2*this.getFloat()-1},L$o(0,L$b,"seed",function(){return this.seeds[0]},function(L$a){this.seeds[0]=L$a,this.seeds[1]=1812433253*this.seeds[0]+1,this.seeds[2]=1812433253*this.seeds[1]+1,this.seeds[3]=1812433253*this.seeds[2]+1}),L$a.getFloatFromInt=function(L$a){return 1/8388607*(8388607&L$a)},L$a.getByteFromInt=function(L$a){return(8388607&L$a)>>>15},L$a}(),L$eb=(function(){function L$e(L$a){if(this._state0U=NaN,this._state0L=NaN,this._state1U=NaN,this._state1L=NaN,!(L$a instanceof Array)||4!==L$a.length)throw new Error("Rand:Seed must be an array with 4 numbers");this._state0U=0|L$a[0],this._state0L=0|L$a[1],this._state1U=0|L$a[2],this._state1L=0|L$a[3]}L$n(L$e,"laya.d3.math.RandX");var L$a=L$e.prototype;L$a.randomint=function(){var L$a=this._state0U,L$b=this._state0L,L$c=this._state1U,L$d=this._state1L,L$e=(L$d>>>0)+(L$b>>>0),L$f=L$c+L$a+(L$e/2>>>31)>>>0,L$g=L$e>>>0,L$h=0,L$i=0;L$h=(L$a^=L$h=L$a<<23|(-512&L$b)>>>9)^(this._state0U=L$c),L$i=(L$b^=L$i=L$b<<23)^(this._state0L=L$d);L$h^=L$a>>>18,L$i^=L$b>>>18|(262143&L$a)<<14;return L$h^=L$c>>>5,L$i^=L$d>>>5|(31&L$c)<<27,this._state1U=L$h,this._state1L=L$i,[L$f,L$g]},L$a.random=function(){var L$a=this.randomint(),L$b=L$a[0],L$c=1023<<20|L$b>>>12,L$d=0|(L$a[1]>>>12|(4095&L$b)<<20);return L$e._CONVERTION_BUFFER.setUint32(0,L$c,!1),L$e._CONVERTION_BUFFER.setUint32(4,L$d,!1),L$db._CONVERTION_BUFFER.getFloat64(0,!1)-1},L$l(L$e,["_CONVERTION_BUFFER",function(){return this._CONVERTION_BUFFER=new DataView(new ArrayBuffer(8))},"defaultRand",function(){return this.defaultRand=new L$db([0,Date.now()/65536,0,Date.now()%65536])}])}(),function(){function L$a(L$a,L$b){this.origin=null,this.direction=null,this.origin=L$a,this.direction=L$b}return L$n(L$a,"laya.d3.math.Ray"),L$a}()),L$fb=function(){function L$a(L$a,L$b){this.elements=new Float32Array(2),void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0);var L$c=this.elements;L$c[0]=L$a,L$c[1]=L$b}L$n(L$a,"laya.d3.math.Vector2");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.fromArray=function(L$a,L$b){void 0===L$b&&(L$b=0),this.elements[0]=L$a[L$b+0],this.elements[1]=L$a[L$b+1]},L$b.cloneTo=function(L$a){var L$b=L$a.elements,L$c=this.elements;L$b[0]=L$c[0],L$b[1]=L$c[1]},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"x",function(){return this.elements[0]},function(L$a){this.elements[0]=L$a}),L$o(0,L$b,"y",function(){return this.elements[1]},function(L$a){this.elements[1]=L$a}),L$a.scale=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements;L$d[0]=L$e[0]*L$b,L$d[1]=L$e[1]*L$b},L$l(L$a,["ZERO",function(){return this.ZERO=new L$a(0,0)},"ONE",function(){return this.ONE=new L$a(1,1)}]),L$a}(),L$gb=function(){function L$k(L$a,L$b,L$c){this.elements=new Float32Array(3),void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0);var L$d=this.elements;L$d[0]=L$a,L$d[1]=L$b,L$d[2]=L$c}L$n(L$k,"laya.d3.math.Vector3");var L$a=L$k.prototype;return L$v.imps(L$a,{"laya.d3.core.IClone":!0}),L$a.fromArray=function(L$a,L$b){void 0===L$b&&(L$b=0),this.elements[0]=L$a[L$b+0],this.elements[1]=L$a[L$b+1],this.elements[2]=L$a[L$b+2]},L$a.cloneTo=function(L$a){var L$b=L$a.elements,L$c=this.elements;L$b[0]=L$c[0],L$b[1]=L$c[1],L$b[2]=L$c[2]},L$a.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$a.toDefault=function(){this.elements[0]=0,this.elements[1]=0,this.elements[2]=0},L$a.reset=function(L$a,L$b,L$c){this.elements[0]=L$a,this.elements[1]=L$b,this.elements[2]=L$c},L$o(0,L$a,"x",function(){return this.elements[0]},function(L$a){this.elements[0]=L$a}),L$o(0,L$a,"y",function(){return this.elements[1]},function(L$a){this.elements[1]=L$a}),L$o(0,L$a,"z",function(){return this.elements[2]},function(L$a){this.elements[2]=L$a}),L$k.distanceSquared=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$c[0]-L$d[0],L$f=L$c[1]-L$d[1],L$g=L$c[2]-L$d[2];return L$e*L$e+L$f*L$f+L$g*L$g},L$k.distance=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$c[0]-L$d[0],L$f=L$c[1]-L$d[1],L$g=L$c[2]-L$d[2];return Math.sqrt(L$e*L$e+L$f*L$f+L$g*L$g)},L$k.min=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=Math.min(L$e[0],L$f[0]),L$d[1]=Math.min(L$e[1],L$f[1]),L$d[2]=Math.min(L$e[2],L$f[2])},L$k.max=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=Math.max(L$e[0],L$f[0]),L$d[1]=Math.max(L$e[1],L$f[1]),L$d[2]=Math.max(L$e[2],L$f[2])},L$k.transformQuat=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements,L$g=L$e[0],L$h=L$e[1],L$i=L$e[2],L$j=L$f[0],L$k=L$f[1],L$l=L$f[2],L$m=L$f[3],L$n=L$m*L$g+L$k*L$i-L$l*L$h,L$o=L$m*L$h+L$l*L$g-L$j*L$i,L$p=L$m*L$i+L$j*L$h-L$k*L$g,L$q=-L$j*L$g-L$k*L$h-L$l*L$i;L$d[0]=L$n*L$m+L$q*-L$j+L$o*-L$l-L$p*-L$k,L$d[1]=L$o*L$m+L$q*-L$k+L$p*-L$j-L$n*-L$l,L$d[2]=L$p*L$m+L$q*-L$l+L$n*-L$k-L$o*-L$j},L$k.scalarLength=function(L$a){var L$b=L$a.elements,L$c=L$b[0],L$d=L$b[1],L$e=L$b[2];return Math.sqrt(L$c*L$c+L$d*L$d+L$e*L$e)},L$k.scalarLengthSquared=function(L$a){var L$b=L$a.elements,L$c=L$b[0],L$d=L$b[1],L$e=L$b[2];return L$c*L$c+L$d*L$d+L$e*L$e},L$k.normalize=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$c[0],L$f=L$c[1],L$g=L$c[2],L$h=L$e*L$e+L$f*L$f+L$g*L$g;0<L$h&&(L$h=1/Math.sqrt(L$h),L$d[0]=L$c[0]*L$h,L$d[1]=L$c[1]*L$h,L$d[2]=L$c[2]*L$h)},L$k.multiply=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=L$e[0]*L$f[0],L$d[1]=L$e[1]*L$f[1],L$d[2]=L$e[2]*L$f[2]},L$k.scale=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements;L$d[0]=L$e[0]*L$b,L$d[1]=L$e[1]*L$b,L$d[2]=L$e[2]*L$b},L$k.lerp=function(L$a,L$b,L$c,L$d){var L$e=L$d.elements,L$f=L$a.elements,L$g=L$b.elements,L$h=L$f[0],L$i=L$f[1],L$j=L$f[2];L$e[0]=L$h+L$c*(L$g[0]-L$h),L$e[1]=L$i+L$c*(L$g[1]-L$i),L$e[2]=L$j+L$c*(L$g[2]-L$j)},L$k.transformV3ToV3=function(L$a,L$b,L$c){var L$d=L$k._tempVector4;L$k.transformV3ToV4(L$a,L$b,L$d);var L$e=L$d.elements,L$f=L$c.elements;L$f[0]=L$e[0],L$f[1]=L$e[1],L$f[2]=L$e[2]},L$k.transformV3ToV4=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$b.elements,L$i=L$c.elements;L$i[0]=L$e*L$h[0]+L$f*L$h[4]+L$g*L$h[8]+L$h[12],L$i[1]=L$e*L$h[1]+L$f*L$h[5]+L$g*L$h[9]+L$h[13],L$i[2]=L$e*L$h[2]+L$f*L$h[6]+L$g*L$h[10]+L$h[14],L$i[3]=L$e*L$h[3]+L$f*L$h[7]+L$g*L$h[11]+L$h[15]},L$k.TransformNormal=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$b.elements,L$i=L$c.elements;L$i[0]=L$e*L$h[0]+L$f*L$h[4]+L$g*L$h[8],L$i[1]=L$e*L$h[1]+L$f*L$h[5]+L$g*L$h[9],L$i[2]=L$e*L$h[2]+L$f*L$h[6]+L$g*L$h[10]},L$k.transformCoordinate=function(L$a,L$b,L$c){var L$d=L$k._tempVector4.elements,L$e=L$a.elements,L$f=L$e[0],L$g=L$e[1],L$h=L$e[2],L$i=L$b.elements;L$d[0]=L$f*L$i[0]+L$g*L$i[4]+L$h*L$i[8]+L$i[12],L$d[1]=L$f*L$i[1]+L$g*L$i[5]+L$h*L$i[9]+L$i[13],L$d[2]=L$f*L$i[2]+L$g*L$i[6]+L$h*L$i[10]+L$i[14],L$d[3]=1/(L$f*L$i[3]+L$g*L$i[7]+L$h*L$i[11]+L$i[15]);var L$j=L$c.elements;L$j[0]=L$d[0]*L$d[3],L$j[1]=L$d[1]*L$d[3],L$j[2]=L$d[2]*L$d[3]},L$k.Clamp=function(L$a,L$b,L$c,L$d){var L$e=L$a.elements,L$f=L$e[0],L$g=L$e[1],L$h=L$e[2],L$i=L$b.elements,L$j=L$i[0],L$k=L$i[1],L$l=L$i[2],L$m=L$c.elements,L$n=L$m[0],L$o=L$m[1],L$p=L$m[2],L$q=L$d.elements;L$f=(L$f=L$n<L$f?L$n:L$f)<L$j?L$j:L$f,L$g=(L$g=L$o<L$g?L$o:L$g)<L$k?L$k:L$g,L$h=(L$h=L$p<L$h?L$p:L$h)<L$l?L$l:L$h,L$q[0]=L$f,L$q[1]=L$g,L$q[2]=L$h},L$k.add=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=L$e[0]+L$f[0],L$d[1]=L$e[1]+L$f[1],L$d[2]=L$e[2]+L$f[2]},L$k.subtract=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=L$e[0]-L$f[0],L$d[1]=L$e[1]-L$f[1],L$d[2]=L$e[2]-L$f[2]},L$k.cross=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$b.elements,L$f=L$c.elements,L$g=L$d[0],L$h=L$d[1],L$i=L$d[2],L$j=L$e[0],L$k=L$e[1],L$l=L$e[2];L$f[0]=L$h*L$l-L$i*L$k,L$f[1]=L$i*L$j-L$g*L$l,L$f[2]=L$g*L$k-L$h*L$j},L$k.dot=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;return L$c[0]*L$d[0]+L$c[1]*L$d[1]+L$c[2]*L$d[2]},L$k.equals=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;return L$wa.nearEqual(Math.abs(L$c[0]),Math.abs(L$d[0]))&&L$wa.nearEqual(Math.abs(L$c[1]),Math.abs(L$d[1]))&&L$wa.nearEqual(Math.abs(L$c[2]),Math.abs(L$d[2]))},L$k.ZERO=new L$k(0,0,0),L$k.ONE=new L$k(1,1,1),L$k.NegativeUnitX=new L$k(-1,0,0),L$k.UnitX=new L$k(1,0,0),L$k.UnitY=new L$k(0,1,0),L$k.UnitZ=new L$k(0,0,1),L$k.ForwardRH=new L$k(0,0,-1),L$k.ForwardLH=new L$k(0,0,1),L$k.Up=new L$k(0,1,0),L$k.NAN=new L$k(NaN,NaN,NaN),L$l(L$k,["_tempVector4",function(){return this._tempVector4=new L$hb}]),L$k}(),L$hb=function(){function L$a(L$a,L$b,L$c,L$d){this.elements=new Float32Array(4),void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=0);var L$e=this.elements;L$e[0]=L$a,L$e[1]=L$b,L$e[2]=L$c,L$e[3]=L$d}L$n(L$a,"laya.d3.math.Vector4");var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b.fromArray=function(L$a,L$b){void 0===L$b&&(L$b=0),this.elements[0]=L$a[L$b+0],this.elements[1]=L$a[L$b+1],this.elements[2]=L$a[L$b+2],this.elements[3]=L$a[L$b+3]},L$b.cloneTo=function(L$a){var L$b=L$a.elements,L$c=this.elements;L$b[0]=L$c[0],L$b[1]=L$c[1],L$b[2]=L$c[2],L$b[3]=L$c[3]},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$b.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},L$b.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},L$o(0,L$b,"x",function(){return this.elements[0]},function(L$a){this.elements[0]=L$a}),L$o(0,L$b,"y",function(){return this.elements[1]},function(L$a){this.elements[1]=L$a}),L$o(0,L$b,"z",function(){return this.elements[2]},function(L$a){this.elements[2]=L$a}),L$o(0,L$b,"w",function(){return this.elements[3]},function(L$a){this.elements[3]=L$a}),L$a.lerp=function(L$a,L$b,L$c,L$d){var L$e=L$d.elements,L$f=L$a.elements,L$g=L$b.elements,L$h=L$f[0],L$i=L$f[1],L$j=L$f[2],L$k=L$f[3];L$e[0]=L$h+L$c*(L$g[0]-L$h),L$e[1]=L$i+L$c*(L$g[1]-L$i),L$e[2]=L$j+L$c*(L$g[2]-L$j),L$e[3]=L$k+L$c*(L$g[3]-L$k)},L$a.transformByM4x4=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$d[0],L$f=L$d[1],L$g=L$d[2],L$h=L$d[3],L$i=L$b.elements,L$j=L$c.elements;L$j[0]=L$e*L$i[0]+L$f*L$i[4]+L$g*L$i[8]+L$h*L$i[12],L$j[1]=L$e*L$i[1]+L$f*L$i[5]+L$g*L$i[9]+L$h*L$i[13],L$j[2]=L$e*L$i[2]+L$f*L$i[6]+L$g*L$i[10]+L$h*L$i[14],L$j[3]=L$e*L$i[3]+L$f*L$i[7]+L$g*L$i[11]+L$h*L$i[15]},L$a.equals=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;return L$wa.nearEqual(Math.abs(L$c[0]),Math.abs(L$d[0]))&&L$wa.nearEqual(Math.abs(L$c[1]),Math.abs(L$d[1]))&&L$wa.nearEqual(Math.abs(L$c[2]),Math.abs(L$d[2]))&&L$wa.nearEqual(Math.abs(L$c[3]),Math.abs(L$d[3]))},L$a.normalize=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$a.length();0<L$e&&(L$d[0]=L$c[0]*L$e,L$d[1]=L$c[1]*L$e,L$d[2]=L$c[2]*L$e,L$d[3]=L$c[3]*L$e)},L$a.add=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=L$e[0]+L$f[0],L$d[1]=L$e[1]+L$f[1],L$d[2]=L$e[2]+L$f[2],L$d[3]=L$e[3]+L$f[3]},L$a.subtract=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=L$e[0]-L$f[0],L$d[1]=L$e[1]-L$f[1],L$d[2]=L$e[2]-L$f[2],L$d[3]=L$e[3]-L$f[3]},L$a.multiply=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=L$e[0]*L$f[0],L$d[1]=L$e[1]*L$f[1],L$d[2]=L$e[2]*L$f[2],L$d[3]=L$e[3]*L$f[3]},L$a.scale=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements;L$d[0]=L$e[0]*L$b,L$d[1]=L$e[1]*L$b,L$d[2]=L$e[2]*L$b,L$d[3]=L$e[3]*L$b},L$a.Clamp=function(L$a,L$b,L$c,L$d){var L$e=L$a.elements,L$f=L$e[0],L$g=L$e[1],L$h=L$e[2],L$i=L$e[3],L$j=L$b.elements,L$k=L$j[0],L$l=L$j[1],L$m=L$j[2],L$n=L$j[3],L$o=L$c.elements,L$p=L$o[0],L$q=L$o[1],L$r=L$o[2],L$s=L$o[3],L$t=L$d.elements;L$f=(L$f=L$p<L$f?L$p:L$f)<L$k?L$k:L$f,L$g=(L$g=L$q<L$g?L$q:L$g)<L$l?L$l:L$g,L$h=(L$h=L$r<L$h?L$r:L$h)<L$m?L$m:L$h,L$i=(L$i=L$s<L$i?L$s:L$i)<L$n?L$n:L$i,L$t[0]=L$f,L$t[1]=L$g,L$t[2]=L$h,L$t[3]=L$i},L$a.distanceSquared=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$c[0]-L$d[0],L$f=L$c[1]-L$d[1],L$g=L$c[2]-L$d[2],L$h=L$c[3]-L$d[3];return L$e*L$e+L$f*L$f+L$g*L$g+L$h*L$h},L$a.distance=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements,L$e=L$c[0]-L$d[0],L$f=L$c[1]-L$d[1],L$g=L$c[2]-L$d[2],L$h=L$c[3]-L$d[3];return Math.sqrt(L$e*L$e+L$f*L$f+L$g*L$g+L$h*L$h)},L$a.dot=function(L$a,L$b){var L$c=L$a.elements,L$d=L$b.elements;return L$c[0]*L$d[0]+L$c[1]*L$d[1]+L$c[2]*L$d[2]+L$c[3]*L$d[3]},L$a.min=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=Math.min(L$e[0],L$f[0]),L$d[1]=Math.min(L$e[1],L$f[1]),L$d[2]=Math.min(L$e[2],L$f[2]),L$d[3]=Math.min(L$e[3],L$f[3])},L$a.max=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b.elements;L$d[0]=Math.max(L$e[0],L$f[0]),L$d[1]=Math.max(L$e[1],L$f[1]),L$d[2]=Math.max(L$e[2],L$f[2]),L$d[3]=Math.max(L$e[3],L$f[3])},L$l(L$a,["ZERO",function(){return this.ZERO=new L$a},"ONE",function(){return this.ONE=new L$a(1,1,1,1)},"UnitX",function(){return this.UnitX=new L$a(1,0,0,0)},"UnitY",function(){return this.UnitY=new L$a(0,1,0,0)},"UnitZ",function(){return this.UnitZ=new L$a(0,0,1,0)},"UnitW",function(){return this.UnitW=new L$a(0,0,0,1)}]),L$a}(),L$ib=function(){function L$f(L$a,L$b,L$c,L$d){this.minDepth=0,this.maxDepth=1,this.x=L$a,this.y=L$b,this.width=L$c,this.height=L$d}L$n(L$f,"laya.d3.math.Viewport");var L$a=L$f.prototype;return L$a.project=function(L$a,L$b,L$c){L$gb.transformV3ToV3(L$a,L$b,L$c);var L$d=L$a.elements,L$e=L$b.elements,L$f=L$c.elements,L$g=L$d[0]*L$e[3]+L$d[1]*L$e[7]+L$d[2]*L$e[11]+L$e[15];1!==L$g&&(L$f[0]=L$f[0]/L$g,L$f[1]=L$f[1]/L$g,L$f[2]=L$f[2]/L$g),L$f[0]=.5*(L$f[0]+1)*this.width+this.x,L$f[1]=.5*(1-L$f[1])*this.height+this.y,L$f[2]=L$f[2]*(this.maxDepth-this.minDepth)+this.minDepth},L$a.unprojectFromMat=function(L$a,L$b,L$c){var L$d=L$a.elements,L$e=L$b.elements,L$f=L$c.elements;L$f[0]=(L$d[0]-this.x)/this.width*2-1,L$f[1]=-((L$d[1]-this.y)/this.height*2-1);var L$g=(this.maxDepth-this.minDepth)/2;L$f[2]=(L$d[2]-this.minDepth-L$g)/L$g;var L$h=L$f[0]*L$e[3]+L$f[1]*L$e[7]+L$f[2]*L$e[11]+L$e[15];L$gb.transformV3ToV3(L$c,L$b,L$c),1!==L$h&&(L$f[0]=L$f[0]/L$h,L$f[1]=L$f[1]/L$h,L$f[2]=L$f[2]/L$h)},L$a.unprojectFromWVP=function(L$a,L$b,L$c,L$d,L$e){L$ab.multiply(L$b,L$c,L$f._tempMatrix4x4),L$d&&L$ab.multiply(L$f._tempMatrix4x4,L$d,L$f._tempMatrix4x4),L$f._tempMatrix4x4.invert(L$f._tempMatrix4x4),this.unprojectFromMat(L$a,L$f._tempMatrix4x4,L$e)},L$l(L$f,["_tempMatrix4x4",function(){return this._tempMatrix4x4=new L$ab}]),L$f}(),L$jb=function(){function L$E(L$a){this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._indexInMesh=0,this._vertexBuffer=null,this._vertexStart=0,this._vertexCount=0,this._indexBuffer=null,this._indexStart=0,this._indexCount=0,this._indices=null,this._bufferUsage={},this._mesh=L$a,this._boneIndicesList=[],this._subIndexBufferStart=[],this._subIndexBufferCount=[]}L$n(L$E,"laya.d3.resource.models.SubMesh");var L$a=L$E.prototype;return L$v.imps(L$a,{"laya.d3.core.render.IRenderable":!0,"laya.resource.IDispose":!0}),L$a._getVertexBuffer=function(L$a){return void 0===L$a&&(L$a=0),0===L$a?this._vertexBuffer:null},L$a._getIndexBuffer=function(){return this._indexBuffer},L$a._getStaticBatchBakedVertexs=function(L$a,L$b){var L$c,L$d,L$e=this._vertexBuffer,L$f=L$e.vertexDeclaration,L$g=L$f.getVertexElementByUsage(0).offset/4,L$h=L$f.getVertexElementByUsage(3).offset/4,L$i=L$b.meshRender.lightmapScaleOffset,L$j=0,L$k=0,L$l=0,L$m=0,L$n=0,L$o=0;if(L$i)if(L$d=L$f.getVertexElementByUsage(15))L$l=L$f.vertexStride/4,L$c=0<this._vertexCount?L$e.getData().slice(this._vertexStart*L$l,(this._vertexStart+this._vertexCount)*L$l):L$e.getData().slice(),L$m=L$d.offset/4;else{L$l=(L$o=L$f.vertexStride/4)+2,L$c=this._vertexCount?new Float32Array(this._vertexCount*(L$e.vertexDeclaration.vertexStride/4+2)):new Float32Array(L$e.vertexCount*(L$e.vertexDeclaration.vertexStride/4+2)),L$m=(L$n=L$f.getVertexElementByUsage(2).offset/4)+2;var L$p=L$e.getData();for(L$j=0,L$k=L$p.length/L$o;L$j<L$k;L$j++){var L$q=0;L$q=0<this._vertexCount?(this._vertexStart+L$j)*L$o:L$j*L$o;var L$r=L$j*L$l,L$s=0;for(L$s=0;L$s<L$m;L$s++)L$c[L$r+L$s]=L$p[L$q+L$s];for(L$s=L$m;L$s<L$o;L$s++)L$c[L$r+L$s+2]=L$p[L$q+L$s]}}else L$l=L$f.vertexStride/4,L$c=this._vertexCount?L$e.getData().slice(this._vertexStart*L$l,(this._vertexStart+this._vertexCount)*L$l):L$e.getData().slice();if(L$a){var L$t=L$a.worldMatrix,L$u=L$E._tempMatrix4x40;L$t.invert(L$u);var L$v=L$E._tempMatrix4x41,L$y=L$b.transform.worldMatrix;L$ab.multiply(L$u,L$y,L$v)}else L$v=L$b.transform.worldMatrix;var L$z=L$E._tempQuaternion0;for(L$v.decomposeTransRotScale(L$E._tempVector30,L$z,L$E._tempVector31),L$j=0,L$k=L$c.length/L$l;L$j<L$k;L$j++){var L$A=L$j*L$l+L$g,L$B=L$j*L$l+L$h;if(L$qb.transformVector3ArrayToVector3ArrayCoordinate(L$c,L$A,L$v,L$c,L$A),L$qb.transformVector3ArrayByQuat(L$c,L$B,L$z,L$c,L$B),L$i){var L$C=L$j*L$l+L$m;if(L$d)L$qb.transformLightingMapTexcoordByUV1Array(L$c,L$C,L$i,L$c,L$C);else{var L$D=L$j*L$o+L$n;L$qb.transformLightingMapTexcoordByUV0Array(L$p,L$D,L$i,L$c,L$C)}}}return L$c},L$a._getVertexBuffers=function(){return null},L$a._beforeRender=function(L$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},L$a._render=function(L$a){var L$b,L$c=0,L$d=L$a.renderElement;if(1<this._indexCount){var L$e=this._boneIndicesList.length;if(1<L$e){for(var L$f=0;L$f<L$e;L$f++)(L$b=L$d._skinAnimationDatas||this._skinAnimationDatas)&&(L$d._shaderValue.setValue(0,L$b[L$f]),L$a._shader.uploadRenderElementUniforms(L$d._shaderValue.data)),L$F.mainContext.drawElements(4,this._subIndexBufferCount[L$f],5123,2*this._subIndexBufferStart[L$f]);L$A.drawCall+=L$e}else(L$b=L$d._skinAnimationDatas||this._skinAnimationDatas)&&(L$d._shaderValue.setValue(0,L$b[0]),L$a._shader.uploadRenderElementUniforms(L$d._shaderValue.data)),L$F.mainContext.drawElements(4,this._indexCount,5123,2*this._indexStart),L$A.drawCall++;L$c=this._indexCount}else L$c=this._indexBuffer.indexCount,(L$b=L$d._skinAnimationDatas||this._skinAnimationDatas)&&(L$d._shaderValue.setValue(0,L$b[0]),L$a._shader.uploadRenderElementUniforms(L$d._shaderValue.data)),L$F.mainContext.drawElements(4,L$c,5123,0),L$A.drawCall++;L$A.trianglesFaces+=L$c/3},L$a.getIndices=function(){return 0<this._indexCount?this._indices:this._indexBuffer.getData()},L$a.dispose=function(){this._indexBuffer.destroy(),this._vertexBuffer.destroy(),this._mesh=null,this._boneIndicesList=null,this._subIndexBufferStart=null,this._subIndexBufferCount=null,this._skinAnimationDatas=null,this._bufferUsage=null,this._vertexBuffer=null,this._indexBuffer=null},L$o(0,L$a,"_vertexBufferCount",function(){return 1}),L$o(0,L$a,"triangleCount",function(){return this._indexBuffer.indexCount/3}),L$l(L$E,["_tempVector30",function(){return this._tempVector30=new L$gb},"_tempVector31",function(){return this._tempVector31=new L$gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new L$cb},"_tempMatrix4x40",function(){return this._tempMatrix4x40=new L$ab},"_tempMatrix4x41",function(){return this._tempMatrix4x41=new L$ab}]),L$E}(),L$kb=function(){function L$a(L$a){this.defineCounter=0,this.defines=null,L$a?(this.defineCounter=L$a.defineCounter,this.defines=L$a.defines.slice()):(this.defineCounter=0,this.defines=[])}return L$n(L$a,"laya.d3.shader.ShaderDefines",null,"ShaderDefines$1"),L$a.prototype.registerDefine=function(L$a){var L$b=Math.pow(2,this.defineCounter++);return this.defines[L$b]=L$a,L$b},L$a}(),L$lb=function(){function L$a(){}return L$n(L$a,"laya.d3.shader.ShaderInit3D"),L$a.__init__=function(){var L$a,L$b;L$Ab._globalRegDefine("HIGHPRECISION",L$Ab.SHADERDEFINE_HIGHPRECISION),L$Ab._globalRegDefine("FOG",L$Ab.SHADERDEFINE_FOG),L$Ab._globalRegDefine("DIRECTIONLIGHT",L$Ab.SHADERDEFINE_DIRECTIONLIGHT),L$Ab._globalRegDefine("POINTLIGHT",L$Ab.SHADERDEFINE_POINTLIGHT),L$Ab._globalRegDefine("SPOTLIGHT",L$Ab.SHADERDEFINE_SPOTLIGHT),L$Ab._globalRegDefine("UV",L$Ab.SHADERDEFINE_UV0),L$Ab._globalRegDefine("COLOR",L$Ab.SHADERDEFINE_COLOR),L$Ab._globalRegDefine("UV1",L$Ab.SHADERDEFINE_UV1),L$Ab._globalRegDefine("CASTSHADOW",L$nb.SHADERDEFINE_CAST_SHADOW),L$Ab._globalRegDefine("SHADOWMAP_PSSM1",L$nb.SHADERDEFINE_SHADOW_PSSM1),L$Ab._globalRegDefine("SHADOWMAP_PSSM2",L$nb.SHADERDEFINE_SHADOW_PSSM2),L$Ab._globalRegDefine("SHADOWMAP_PSSM3",L$nb.SHADERDEFINE_SHADOW_PSSM3),L$Ab._globalRegDefine("SHADOWMAP_PCF_NO",L$nb.SHADERDEFINE_SHADOW_PCF_NO),L$Ab._globalRegDefine("SHADOWMAP_PCF1",L$nb.SHADERDEFINE_SHADOW_PCF1),L$Ab._globalRegDefine("SHADOWMAP_PCF2",L$nb.SHADERDEFINE_SHADOW_PCF2),L$Ab._globalRegDefine("SHADOWMAP_PCF3",L$nb.SHADERDEFINE_SHADOW_PCF3),L$Ab._globalRegDefine("DEPTHFOG",L$Ab.SAHDERDEFINE_DEPTHFOG),L$Lb.addInclude("LightHelper.glsl","\nstruct DirectionLight\n{\n vec3 Direction;\n vec3 Diffuse;\n};\n\nstruct PointLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n float Range;\n};\n\nstruct SpotLight\n{\n vec3 Diffuse;\n vec3 Attenuation;\n vec3 Position;\n vec3 Direction;\n float Spot;\n float Range;\n};\n\n\nvec3 NormalSampleToWorldSpace(vec3 normalMapSample, vec3 unitNormal, vec3 tangent)\n{\n\tvec3 normalT = 2.0*normalMapSample - 1.0;\n\n\t// Build orthonormal basis.\n\tvec3 N = normalize(unitNormal);\n\tvec3 T = normalize(tangent- dot(tangent, N)*N);\n\tvec3 B = cross(T, N);\n\n\tmat3 TBN = mat3(T, B, N);\n\n\t// Transform from tangent space to world space.\n\tvec3 bumpedNormal = TBN*normalT;\n\n\treturn bumpedNormal;\n}\n\n\nvoid  computeDirectionLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in DirectionLight dirLight,in vec3 ambinentColor,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);//不初始化在IOS中闪烁，PC中不会闪烁\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec=-normalize(dirLight.Direction);\n\t\n\tamb=matAmb*ambinentColor;\n\t\n\tfloat  diffuseFactor=dot(lightVec, normal);\n\t\n\tif(diffuseFactor>0.0)\n\t{\n\t   vec3 v = reflect(-lightVec, normal);\n\t   float specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t   \n\t   dif = diffuseFactor * matDif * dirLight.Diffuse;\n\t   spec = specFactor * matSpe.rgb;\n\t}\n\t\n}\n\nvoid computePointLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in PointLight poiLight,in vec3 ambinentColor, in vec3 pos,in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tdif=vec3(0.0);\n\tamb=vec3(0.0);\n\tspec=vec3(0.0);\n\tvec3 lightVec = poiLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > poiLight.Range )\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif( diffuseFactor > 0.0 )\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * poiLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\n\tfloat attenuate = 1.0 / dot(poiLight.Attenuation, vec3(1.0, d, d*d));\n\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\nvoid ComputeSpotLight(in vec3 matDif,in vec3 matAmb,in vec4 matSpe,in SpotLight spoLight,in vec3 ambinentColor,in vec3 pos, in vec3 normal,in vec3 toEye,out vec3 dif,out vec3 amb,out vec3 spec)\n{\n\tamb = vec3(0.0);\n\tdif =vec3(0.0);\n\tspec= vec3(0.0);\n\tvec3 lightVec = spoLight.Position - pos;\n\t\t\n\tfloat d = length(lightVec);\n\t\n\tif( d > spoLight.Range)\n\t\treturn;\n\t\t\n\tlightVec /= d; \n\t\n\tamb = matAmb*ambinentColor;\t\n\n\tfloat diffuseFactor = dot(lightVec, normal);\n\n\tif(diffuseFactor > 0.0)\n\t{\n\t\tvec3 v= reflect(-lightVec, normal);\n\t\tfloat specFactor = pow(max(dot(v, toEye), 0.0), matSpe.w);\n\t\t\t\t\t\n\t\tdif = diffuseFactor * matDif * spoLight.Diffuse;\n\t\tspec = specFactor * matSpe.rgb;\n\t}\n\t\n\tfloat spot = pow(max(dot(-lightVec, normalize(spoLight.Direction)), 0.0), spoLight.Spot);\n\n\tfloat attenuate = spot/dot(spoLight.Attenuation, vec3(1.0, d, d*d));\n\n\tamb *= spot;\n\tdif *= attenuate;\n\tspec*= attenuate;\n}\n\n"),L$Lb.addInclude("ShadowHelper.glsl","uniform sampler2D u_shadowMap1;\nuniform sampler2D u_shadowMap2;\nuniform sampler2D u_shadowMap3;\nuniform vec2\t  u_shadowPCFoffset;\nuniform vec4     u_shadowPSSMDistance;\nvec4 packDepth(const in float depth)\n{\n\tconst vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n\tconst vec4 bitMask\t= vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n\tvec4 res = mod(depth*bitShift*vec4(255), vec4(256))/vec4(255);\n\tres -= res.xxyz * bitMask;\n\treturn res;\n}\nfloat unpackDepth(const in vec4 rgbaDepth)\n{\n\tconst vec4 bitShift = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n\tfloat depth = dot(rgbaDepth, bitShift);\n\treturn depth;\n}\nfloat tex2DPCF( sampler2D shadowMap,vec2 texcoord,vec2 invsize,float zRef )\n{\n\tvec2 texelpos =texcoord / invsize;\n\tvec2 lerps = fract( texelpos );\n\tfloat sourcevals[4];\n\tsourcevals[0] = float( unpackDepth(texture2D(shadowMap,texcoord)) > zRef );\n\tsourcevals[1] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x,0))) > zRef );\n\tsourcevals[2] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(0,invsize.y))) > zRef );\n\tsourcevals[3] = float( unpackDepth(texture2D(shadowMap,texcoord + vec2(invsize.x, invsize.y) )) > zRef );\n\treturn mix( mix(sourcevals[0],sourcevals[2],lerps.y),mix(sourcevals[1],sourcevals[3],lerps.y),lerps.x );\n}\nfloat getShadowPSSM3( sampler2D shadowMap1,sampler2D shadowMap2,sampler2D shadowMap3,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\tnPSNum += int(posViewZ>pssmDistance.z);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\telse if( nPSNum == 2 )\n\t{\n\t\tlightVP = lightShadowVP[3];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t} \n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap3,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 2 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap3,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM2( sampler2D shadowMap1,sampler2D shadowMap2,mat4 lightShadowVP[4],vec4 pssmDistance,vec2 shadowPCFOffset,vec3 worldPos,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tint nPSNum = int(posViewZ>pssmDistance.x);\n\tnPSNum += int(posViewZ>pssmDistance.y);\n\t//真SB,webgl不支持在PS中直接访问数组\n\tmat4 lightVP;\n\tif( nPSNum == 0 )\n\t{\n\t\tlightVP = lightShadowVP[1];\n\t}\n\telse if( nPSNum == 1 )\n\t{\n\t\tlightVP = lightShadowVP[2];\n\t}\n\tvec4 vLightMVPPos = lightVP * vec4(worldPos,1.0);\n\t//为了效率，在CPU计算/2.0 + 0.5\n\t//vec3 vText = (vLightMVPPos.xyz / vLightMVPPos.w)/2.0 + 0.5;\n\tvec3 vText = vLightMVPPos.xyz / vLightMVPPos.w;\n\tfloat fMyZ = vText.z - zBias;\n\t/*\n\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\tbool bInFrustum = all( bInFrustumVec );\n\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\tbool bFrustumTest = all( bFrustumTestVec );\n\tif ( bFrustumTest ) \n\t*/\n\tif( fMyZ <= 1.0 )\n\t{\n\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,\tfMyZ );\n\t\t\tvalue = value/4.0;\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF2\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap2,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tvec4 color = texture2D( shadowMap2,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n\t\t}\n#endif\n#ifdef SHADOWMAP_PCF_NO\n\t\tvec4 color;\n\t\tif ( nPSNum == 0 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap1,vText.xy );\n\t\t}\n\t\telse if( nPSNum == 1 )\n\t\t{\n\t\t\tcolor = texture2D( shadowMap2,vText.xy );\n\t\t}\n\t\tzdepth = unpackDepth(color);\n\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t}\n\treturn value;\n}\nfloat getShadowPSSM1( sampler2D shadowMap1,vec4 lightMVPPos,vec4 pssmDistance,vec2 shadowPCFOffset,float posViewZ,float zBias )\n{\n\tfloat value = 1.0;\n\tif( posViewZ < pssmDistance.x )\n\t{\n\t\tvec3 vText = lightMVPPos.xyz / lightMVPPos.w;\n\t\tfloat fMyZ = vText.z - zBias;\n\t\t/*\n\t\tbvec4 bInFrustumVec = bvec4 ( vText.x >= 0.0, vText.x <= 1.0, vText.y >= 0.0, vText.y <= 1.0 );\n\t\tbool bInFrustum = all( bInFrustumVec );\n\t\tbvec2 bFrustumTestVec = bvec2( bInFrustum, fMyZ <= 1.0 );\n\t\tbool bFrustumTest = all( bFrustumTestVec );\n\t\t*/\n\t\tif ( fMyZ <= 1.0 ) \n\t\t{\n\t\t\tfloat zdepth=0.0;\n#ifdef SHADOWMAP_PCF3\n\t\t\tvalue =  tex2DPCF( shadowMap1, vText.xy,shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.xy),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(shadowPCFOffset.x,0),shadowPCFOffset,fMyZ );\n\t\t\tvalue += tex2DPCF( shadowMap1, vText.xy+vec2(0,shadowPCFOffset.y),shadowPCFOffset,fMyZ );\n\t\t\tvalue = value/4.0;\n#endif\n#ifdef SHADOWMAP_PCF2\t\t\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF1\n\t\t\tvalue = tex2DPCF( shadowMap1,vText.xy,shadowPCFOffset,fMyZ);\n#endif\n#ifdef SHADOWMAP_PCF_NO\t\t\n\t\t\tvec4 color = texture2D( shadowMap1,vText.xy );\n\t\t\tzdepth = unpackDepth(color);\n\t\t\tvalue = float(fMyZ < zdepth);\n#endif\n\t\t}\n\t}\n\treturn value;\n}"),L$a={a_Position:0,a_Color:1,a_Normal:3,a_Texcoord0:2,a_Texcoord1:15,a_TexcoordNext0:14,a_BoneWeights:7,a_BoneIndices:6,a_Tangent0:5},L$b={u_Bones:[0,0],u_DiffuseTexture:[1,1],u_SpecularTexture:[3,1],u_NormalTexture:[2,1],u_AmbientTexture:[5,1],u_ReflectTexture:[6,1],u_AlphaTestValue:[0,1],u_Albedo:[7,1],u_UVMatrix:[13,1],u_UVAge:[14,1],u_UVAniAge:[8,1],u_MaterialDiffuse:[10,1],u_MaterialAmbient:[9,1],u_MaterialSpecular:[11,1],u_MaterialReflect:[12,1],u_TilingOffset:[15,1],u_WorldMat:[0,2],u_MvpMatrix:[1,2],u_LightmapScaleOffset:[2,2],u_LightMap:[3,2],u_CameraPos:[0,3],u_FogStart:[1,4],u_FogRange:[2,4],u_FogColor:[0,4],"u_DirectionLight.Direction":[3,4],"u_DirectionLight.Diffuse":[4,4],"u_PointLight.Position":[5,4],"u_PointLight.Range":[6,4],"u_PointLight.Attenuation":[7,4],"u_PointLight.Diffuse":[8,4],"u_SpotLight.Position":[9,4],"u_SpotLight.Direction":[10,4],"u_SpotLight.Range":[12,4],"u_SpotLight.Spot":[11,4],"u_SpotLight.Attenuation":[13,4],"u_SpotLight.Diffuse":[14,4],u_AmbientColor:[21,4],u_shadowMap1:[18,4],u_shadowMap2:[19,4],u_shadowMap3:[20,4],u_shadowPSSMDistance:[15,4],u_lightShadowVP:[16,4],u_shadowPCFoffset:[17,4]};var L$c=L$Lb.nameKey.add("SIMPLE");shaderCompile=L$Ab.add(L$c,"attribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\nattribute vec2 a_Texcoord0;\nvarying vec2 v_Texcoord0;\n  #ifdef UVTRANSFORM \n  uniform mat4 u_UVMatrix;\n  #endif\n#endif\n\n#if defined(AMBIENTMAP)||(defined(LIGHTMAP)&&defined(UV1))\nattribute vec2 a_Texcoord1;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec4 u_LightmapScaleOffset;\nvarying vec2 v_LightMapUV;\n#endif\n\n\n#ifdef COLOR\nattribute vec4 a_Color;\nvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\nattribute vec4 a_BoneIndices;\nattribute vec4 a_BoneWeights;\nconst int c_MaxBoneCount = 24;\nuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nattribute vec3 a_Normal;\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\nattribute vec3 a_Tangent0;\nvarying vec3 v_Tangent0;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\nuniform mat4 u_WorldMat;\nvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n \n//TODO没考虑UV动画呢\n#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\tv_Texcoord0=a_Texcoord0;\n#endif\n\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n#ifdef BONE\n\tmat4 skinTransform=mat4(0.0);\n\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\tvec4 position=skinTransform*a_Position;\n\tgl_Position = u_MvpMatrix * position;\n#else\n\tgl_Position = u_MvpMatrix * a_Position;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tmat3 worldMat;\n\t#ifdef BONE\n\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t#else\n\t\tworldMat=mat3(u_WorldMat);\n\t#endif  \n\tv_Normal=worldMat*a_Normal;\n\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tv_Tangent0=worldMat*a_Tangent0;\n\t#endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t#ifdef BONE\n\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t#else\n\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t#endif\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\n\tv_Texcoord0=a_Texcoord0;\n\t#ifdef TILINGOFFSET\n\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\tv_Texcoord0=vec2(v_Texcoord0.x,v_Texcoord0.y+1.0);\n\t#endif\n\t#ifdef UVTRANSFORM\n\t\tv_Texcoord0=(u_UVMatrix*vec4(v_Texcoord0,0.0,1.0)).xy;\n\t#endif\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\n\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t#else\n\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t#endif \n\t#else\n\t\t#ifdef UV1\n\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t#else\n\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t#endif \n\t#endif \n#endif\n\n#ifdef COLOR\n\tv_Color=a_Color;\n#endif\n\n#ifdef RECEIVESHADOW\n\tv_posViewZ = gl_Position.w;\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t#endif\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\n\tmain_castShadow();\n#else\n\tmain_normal();\n#endif\n}",'#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#include "LightHelper.glsl";\n\nuniform vec4 u_Albedo;\n\n#ifdef ALPHATEST\nuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\nuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\nuniform samplerCube u_ReflectTexture;\nuniform vec3 u_MaterialReflect;\n#endif\n\n#if   defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(COLOR)&&defined(SPECULARMAP)||defined(NORMALMAP)))\nvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(AMBIENTMAP)||defined(LIGHTMAP)\nvarying vec2 v_LightMapUV;\n#endif\n#ifdef AMBIENTMAP\nuniform sampler2D u_AmbientTexture;\n#endif\n#ifdef LIGHTMAP\nuniform sampler2D u_LightMap;\n#endif\n\n#ifdef COLOR\nvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\nuniform vec3 u_MaterialDiffuse;\nuniform vec4 u_MaterialSpecular;\n  #if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP) \n  uniform sampler2D u_SpecularTexture;\n  #endif\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(AMBIENTMAP)||defined(LIGHTMAP)\nuniform vec3 u_MaterialAmbient;\n#endif\n\n#if defined(FOG)||defined(DEPTHFOG)\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\nvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\nuniform sampler2D u_NormalTexture;\nvarying vec3 v_Tangent0;\n#endif\n\n#ifdef DIRECTIONLIGHT\nuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\nuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\nuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)||(defined(RECEIVESHADOW)&&(defined(SHADOWMAP_PSM2)||defined(SHADOWMAP_PSM3)))\nuniform vec3 u_CameraPos;\n#endif\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(DEPTHFOG)||defined(REFLECTMAP)\nvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\nvarying float v_posViewZ;\n\n\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n#if defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n#endif \n  \n#if defined(COLOR)&&!defined(DIFFUSEMAP)\n\tgl_FragColor=v_Color;\n#endif \n  \n#if defined(DIFFUSEMAP)&&defined(COLOR)\n\tvec4 texColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\tgl_FragColor=texColor*v_Color;\n#endif\n  \n#if !defined(DIFFUSEMAP)&&!defined(COLOR)\n\tgl_FragColor=vec4(1.0,1.0,1.0,1.0);\n#endif \n    \n#ifdef ALPHATEST\n\tif(gl_FragColor.a-u_AlphaTestValue<0.0)\n\t\tdiscard;\n#endif\n  \n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvec3 normal;\n    #if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent0));\n\t#else\n\t\tnormal = normalize(v_Normal);\n    #endif\n#endif\n\t\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tvec3 diffuse = vec3(0.0);\n\tvec3 ambient = vec3(0.0);\n\tvec3 specular= vec3(0.0);\n\tvec3 dif, amb, spe;\n#endif\n  \n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(FOG)||defined(REFLECTMAP)\n\tvec3 toEye;\n\t#ifdef FOG\n\t\ttoEye=u_CameraPos-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t#else\n\t\ttoEye=normalize(u_CameraPos-v_PositionWorld);\n\t#endif\n#endif\n\t\n#ifdef DIRECTIONLIGHT\n\tcomputeDirectionLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_DirectionLight,u_AmbientColor,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n \n#ifdef POINTLIGHT\n\tcomputePointLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_PointLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef SPOTLIGHT\n\tComputeSpotLight(u_MaterialDiffuse,u_MaterialAmbient,u_MaterialSpecular,u_SpotLight,u_AmbientColor,v_PositionWorld,normal,toEye, dif, amb, spe);\n\tdiffuse+=dif;\n\tambient+=amb;\n\tspecular+=spe;\n#endif\n\n#ifdef RECEIVESHADOW\n\tfloat shadowValue = 1.0;\n\t#ifdef SHADOWMAP_PSSM3\n\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif\n\t#ifdef SHADOWMAP_PSSM2\n\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t#endif \n\t#ifdef SHADOWMAP_PSSM1\n\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t#endif\n#endif\n\n#ifdef AMBIENTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_AmbientTexture, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\n#ifdef LIGHTMAP\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t#else\n\t\t#if defined(RECEIVESHADOW)\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb * shadowValue);\n\t\t#else\n\t\t\tgl_FragColor.rgb=gl_FragColor.rgb*(u_MaterialAmbient+texture2D(u_LightMap, v_LightMapUV).rgb); \n\t\t#endif\n\t#endif\n#endif\n\ngl_FragColor=gl_FragColor*u_Albedo;\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t#if (defined(DIFFUSEMAP)||defined(COLOR))&&defined(SPECULARMAP)\n\t\tspecular =specular*texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n    #endif\n\t#ifdef RECEIVESHADOW\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse*shadowValue) + specular*shadowValue,gl_FragColor.a);\n\t#else\n\t\tgl_FragColor =vec4( gl_FragColor.rgb*(ambient + diffuse) + specular,gl_FragColor.a);\n\t#endif\n#endif\n  \n#ifdef REFLECTMAP\n\tvec3 incident = -toEye;\n\tvec3 reflectionVector = reflect(incident,normal);\n\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n#endif\n  \n#ifdef FOG\n\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t#ifdef ADDTIVEFOG\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t#else\n\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t#endif\n#endif\n#ifdef DEPTHFOG\n\tfloat lerpFact = (-v_PositionWorld.y-u_FogStart)/u_FogRange;\n\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n#endif\n}\n\nvoid main()\n{\n#ifdef CASTSHADOW\t\t\n\tmain_castShadow();\n#else\n  main_normal();\n#endif  \n}\n\n',L$a,L$b),L$Mb.SHADERDEFINE_DIFFUSEMAP=shaderCompile.registerMaterialDefine("DIFFUSEMAP"),L$Mb.SHADERDEFINE_NORMALMAP=shaderCompile.registerMaterialDefine("NORMALMAP"),L$Mb.SHADERDEFINE_SPECULARMAP=shaderCompile.registerMaterialDefine("SPECULARMAP"),L$Mb.SHADERDEFINE_EMISSIVEMAP=shaderCompile.registerMaterialDefine("EMISSIVEMAP"),L$Mb.SHADERDEFINE_AMBIENTMAP=shaderCompile.registerMaterialDefine("AMBIENTMAP"),L$Mb.SHADERDEFINE_REFLECTMAP=shaderCompile.registerMaterialDefine("REFLECTMAP"),L$Mb.SHADERDEFINE_UVTRANSFORM=shaderCompile.registerMaterialDefine("UVTRANSFORM"),L$Mb.SHADERDEFINE_TILINGOFFSET=shaderCompile.registerMaterialDefine("TILINGOFFSET"),L$Mb.SHADERDEFINE_ADDTIVEFOG=shaderCompile.registerMaterialDefine("ADDTIVEFOG")},L$a}(),L$mb=function(){function L$a(){this._data=null,this._data=[]}L$n(L$a,"laya.d3.shader.ValusArray");var L$b=L$a.prototype;return L$b.setValue=function(L$a,L$b){this._data[L$a]=L$b},L$o(0,L$b,"data",function(){return this._data}),L$a}(),L$nb=function(){function L$a(){}return L$a.SHADERDEFINE_RECEIVE_SHADOW=1,L$a.SHADERDEFINE_CAST_SHADOW=512,L$a.SHADERDEFINE_SHADOW_PSSM1=1024,L$a.SHADERDEFINE_SHADOW_PSSM2=2048,L$a.SHADERDEFINE_SHADOW_PSSM3=4096,L$a.SHADERDEFINE_SHADOW_PCF_NO=8192,L$a.SHADERDEFINE_SHADOW_PCF1=16384,L$a.SHADERDEFINE_SHADOW_PCF2=32768,L$a.SHADERDEFINE_SHADOW_PCF3=65536,L$a.MAX_PSSM_COUNT=3,L$a}(),L$ob=function(){function L$X(){}return L$n(L$X,"laya.d3.utils.Picker"),L$X.calculateCursorRay=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$a.elements[0],L$h=L$a.elements[1],L$i=L$X._tempVector30,L$j=L$i.elements;L$j[0]=L$g,L$j[1]=L$h,L$j[2]=L$b.minDepth;var L$k=L$X._tempVector31,L$l=L$k.elements;L$l[0]=L$g,L$l[1]=L$h,L$l[2]=L$b.maxDepth;var L$m=L$f.origin,L$n=L$X._tempVector32;L$b.unprojectFromWVP(L$i,L$c,L$d,L$e,L$m),L$b.unprojectFromWVP(L$k,L$c,L$d,L$e,L$n);var L$o=L$f.direction.elements;L$o[0]=L$n.x-L$m.x,L$o[1]=L$n.y-L$m.y,L$o[2]=L$n.z-L$m.z,L$gb.normalize(L$f.direction,L$f.direction)},L$X.rayIntersectsPositionsAndIndices=function(L$a,L$b,L$c,L$d,L$e){for(var L$f=L$c.vertexStride/4,L$g=L$c.getVertexElementByUsage(0).offset/4,L$h=Number.MAX_VALUE,L$i=-1,L$j=-1,L$k=-1,L$l=0;L$l<L$d.length;L$l+=3){var L$m=L$X._tempVector35,L$n=L$m.elements,L$o=L$d[L$l]*L$f,L$p=L$o+L$g;L$n[0]=L$b[L$p],L$n[1]=L$b[1+L$p],L$n[2]=L$b[2+L$p];var L$q=L$X._tempVector36,L$r=L$q.elements,L$s=L$d[L$l+1]*L$f,L$t=L$s+L$g;L$r[0]=L$b[L$t],L$r[1]=L$b[1+L$t],L$r[2]=L$b[2+L$t];var L$u=L$X._tempVector37,L$v=L$u.elements,L$y=L$d[L$l+2]*L$f,L$z=L$y+L$g;L$v[0]=L$b[L$z],L$v[1]=L$b[1+L$z],L$v[2]=L$b[2+L$z];var L$A=laya.d3.utils.Picker.rayIntersectsTriangle(L$a,L$m,L$q,L$u);!isNaN(L$A)&&L$A<L$h&&(L$h=L$A,L$i=L$o,L$j=L$s,L$k=L$y)}if(L$h===Number.MAX_VALUE)return L$e.position.toDefault(),L$e.distance=Number.MAX_VALUE,L$e.trianglePositions[0].toDefault(),L$e.trianglePositions[1].toDefault(),L$e.trianglePositions[2].toDefault(),L$e.triangleNormals[0].toDefault(),L$e.triangleNormals[1].toDefault(),L$e.triangleNormals[2].toDefault(),!1;L$e.distance=L$h,L$gb.scale(L$a.direction,L$h,L$e.position),L$gb.add(L$a.origin,L$e.position,L$e.position);var L$B=L$e.trianglePositions,L$C=L$B[0],L$D=L$B[1],L$E=L$B[2],L$F=L$C.elements,L$G=L$D.elements,L$H=L$E.elements,L$I=L$i+L$g;L$F[0]=L$b[L$I],L$F[1]=L$b[L$I+1],L$F[2]=L$b[L$I+2];var L$J=L$j+L$g;L$G[0]=L$b[L$J],L$G[1]=L$b[L$J+1],L$G[2]=L$b[L$J+2];var L$K=L$k+L$g;L$H[0]=L$b[L$K],L$H[1]=L$b[L$K+1],L$H[2]=L$b[L$K+2];var L$L=L$c.getVertexElementByUsage(3);if(L$L){var L$M=L$L.offset/4,L$N=L$e.triangleNormals,L$O=L$N[0],L$P=L$N[1],L$Q=L$N[2],L$R=L$O.elements,L$S=L$P.elements,L$T=L$Q.elements,L$U=L$i+L$M;L$R[0]=L$b[L$U],L$R[1]=L$b[L$U+1],L$R[2]=L$b[L$U+2];var L$V=L$j+L$M;L$S[0]=L$b[L$V],L$S[1]=L$b[L$V+1],L$S[2]=L$b[L$V+2];var L$W=L$k+L$M;L$T[0]=L$b[L$W],L$T[1]=L$b[L$W+1],L$T[2]=L$b[L$W+2]}return!0},L$X.rayIntersectsTriangle=function(L$a,L$b,L$c,L$d){var L$e=L$X._tempVector30,L$f=L$X._tempVector31;L$gb.subtract(L$c,L$b,L$e),L$gb.subtract(L$d,L$b,L$f);var L$g,L$h=L$X._tempVector32;if(L$gb.cross(L$a.direction,L$f,L$h),(L$g=L$gb.dot(L$e,L$h))>-Number.MIN_VALUE&&L$g<Number.MIN_VALUE)return Number.NaN;var L$i,L$j=1/L$g,L$k=L$X._tempVector33;if(L$gb.subtract(L$a.origin,L$b,L$k),L$i=L$gb.dot(L$k,L$h),(L$i*=L$j)<0||1<L$i)return Number.NaN;var L$l,L$m,L$n=L$X._tempVector34;return L$gb.cross(L$k,L$e,L$n),L$l=L$gb.dot(L$a.direction,L$n),(L$l*=L$j)<0||1<L$i+L$l?Number.NaN:(L$m=L$gb.dot(L$f,L$n),(L$m*=L$j)<0?Number.NaN:L$m)},L$l(L$X,["_tempVector30",function(){return this._tempVector30=new L$gb},"_tempVector31",function(){return this._tempVector31=new L$gb},"_tempVector32",function(){return this._tempVector32=new L$gb},"_tempVector33",function(){return this._tempVector33=new L$gb},"_tempVector34",function(){return this._tempVector34=new L$gb},"_tempVector35",function(){return this._tempVector35=new L$gb},"_tempVector36",function(){return this._tempVector36=new L$gb},"_tempVector37",function(){return this._tempVector37=new L$gb}]),L$X}(),L$pb=(function(){function L$a(){this.distance=NaN,this.trianglePositions=null,this.triangleNormals=null,this.position=null,this.sprite3D=null,this.distance=-1,this.trianglePositions=[new L$gb,new L$gb,new L$gb],this.trianglePositions.length=3,this.triangleNormals=[new L$gb,new L$gb,new L$gb],this.triangleNormals.length=3,this.position=new L$gb}L$n(L$a,"laya.d3.utils.RaycastHit"),L$a.prototype.cloneTo=function(L$a){L$a.distance=this.distance,this.trianglePositions[0].cloneTo(L$a.trianglePositions[0]),this.trianglePositions[1].cloneTo(L$a.trianglePositions[1]),this.trianglePositions[2].cloneTo(L$a.trianglePositions[2]),this.triangleNormals[0].cloneTo(L$a.triangleNormals[0]),this.triangleNormals[1].cloneTo(L$a.triangleNormals[1]),this.triangleNormals[2].cloneTo(L$a.triangleNormals[2]),this.position.cloneTo(L$a.position),L$a.sprite3D=this.sprite3D}}(),function(){function L$a(L$a,L$b){this._width=0,this._height=0,this._width=L$a,this._height=L$b}L$n(L$a,"laya.d3.utils.Size");var L$b=L$a.prototype;return L$o(0,L$b,"width",function(){return-1===this._width?L$Y.clientWidth:this._width}),L$o(0,L$b,"height",function(){return-1===this._height?L$Y.clientHeight:this._height}),L$o(1,L$a,"fullScreen",function(){return new L$a(-1,-1)}),L$a}()),L$qb=function(){function L$I(){}return L$n(L$I,"laya.d3.utils.Utils3D"),L$I._rotationTransformScaleSkinAnimation=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l){var L$m,L$n,L$o,L$p,L$q,L$r=L$I._tempArray16_0,L$s=L$I._tempArray16_1,L$t=L$I._tempArray16_2,L$u=L$d+L$d,L$v=L$e+L$e,L$y=L$f+L$f,L$z=L$d*L$u,L$A=L$e*L$u,L$B=L$e*L$v,L$C=L$f*L$u,L$D=L$f*L$v,L$E=L$f*L$y,L$F=L$g*L$u,L$G=L$g*L$v,L$H=L$g*L$y;for(L$r[15]=1,L$r[0]=1-L$B-L$E,L$r[1]=L$A+L$H,L$r[2]=L$C-L$G,L$r[4]=L$A-L$H,L$r[5]=1-L$z-L$E,L$r[6]=L$D+L$F,L$r[8]=L$C+L$G,L$r[9]=L$D-L$F,L$r[10]=1-L$z-L$B,L$s[15]=1,L$s[0]=L$h,L$s[5]=L$i,L$s[10]=L$j,L$m=0;L$m<4;L$m++)L$n=L$r[L$m],L$o=L$r[L$m+4],L$p=L$r[L$m+8],L$q=L$r[L$m+12],L$t[L$m]=L$n,L$t[L$m+4]=L$o,L$t[L$m+8]=L$p,L$t[L$m+12]=L$n*L$a+L$o*L$b+L$p*L$c+L$q;for(L$m=0;L$m<4;L$m++)L$n=L$t[L$m],L$o=L$t[L$m+4],L$p=L$t[L$m+8],L$q=L$t[L$m+12],L$k[L$m+L$l]=L$n*L$s[0]+L$o*L$s[1]+L$p*L$s[2]+L$q*L$s[3],L$k[L$m+L$l+4]=L$n*L$s[4]+L$o*L$s[5]+L$p*L$s[6]+L$q*L$s[7],L$k[L$m+L$l+8]=L$n*L$s[8]+L$o*L$s[9]+L$p*L$s[10]+L$q*L$s[11],L$k[L$m+L$l+12]=L$n*L$s[12]+L$o*L$s[13]+L$p*L$s[14]+L$q*L$s[15]},L$I._createNodeByJson=function(L$a,L$b,L$c,L$d){if(!L$c)switch(L$b.type){case"Sprite3D":L$c=new L$Kb;break;case"MeshSprite3D":L$c=new L$Xb;break;case"SkinnedMeshSprite3D":L$c=new SkinnedMeshSprite3D;break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":L$c=new ShuriKenParticle3D;break;case"TrailSprite3D":L$c=new TrailSprite3D;break;case"Terrain":L$c=new Terrain;break;case"Camera":L$c=new L$Wb;break;case"DirectionLight":L$c=new DirectionLight;break;default:throw new Error("Utils3D:unidentified class type in (.lh) file.")}var L$e=L$b.props;if(L$e)for(var L$f in L$e)L$c[L$f]=L$e[L$f];var L$g=L$b.customProps;L$g&&(L$c instanceof laya.d3.core.Sprite3D?(L$c._parseBaseCustomProps(L$g),L$c._parseCustomProps(L$a,L$d,L$g,L$b),L$c._parseCustomComponent(L$a,L$d,L$b.components)):L$c._parseCustomProps(L$a,L$d,L$g,L$b));var L$h=L$b.child;if(L$h)for(var L$i=0,L$j=L$h.length;L$i<L$j;L$i++){var L$k=L$I._createNodeByJson(L$a,L$h[L$i],null,L$d);L$c.addChild(L$k)}return L$c},L$I._computeBoneAndAnimationDatasByBindPoseMatrxix=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g,L$h,L$i=0,L$j=0,L$k=L$a.length;for(L$g=0;L$g<L$k;L$i+=L$a[L$g].keyframeWidth,L$j+=16,L$g++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(L$b[L$i+0],L$b[L$i+1],L$b[L$i+2],L$b[L$i+3],L$b[L$i+4],L$b[L$i+5],L$b[L$i+6],L$b[L$i+7],L$b[L$i+8],L$b[L$i+9],L$d,L$j),0!=L$g&&(L$h=16*L$a[L$g].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(L$d,L$h,L$d,L$j,L$d,L$j));var L$l=L$c.length;for(L$g=0;L$g<L$l;L$g++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(L$d,16*L$f[L$g],L$c[L$g],L$e,16*L$g)},L$I._computeAnimationDatasByArrayAndMatrixFast=function(L$a,L$b,L$c,L$d){for(var L$e=0,L$f=L$a.length;L$e<L$f;L$e++)laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(L$b,16*L$d[L$e],L$a[L$e],L$c,16*L$e)},L$I._computeBoneAndAnimationDatasByBindPoseMatrxixOld=function(L$a,L$b,L$c,L$d,L$e){var L$f,L$g,L$h=0,L$i=0,L$j=L$a.length;for(L$f=0;L$f<L$j;L$h+=L$a[L$f].keyframeWidth,L$i+=16,L$f++)laya.d3.utils.Utils3D._rotationTransformScaleSkinAnimation(L$b[L$h+7],L$b[L$h+8],L$b[L$h+9],L$b[L$h+3],L$b[L$h+4],L$b[L$h+5],L$b[L$h+6],L$b[L$h+0],L$b[L$h+1],L$b[L$h+2],L$d,L$i),0!=L$f&&(L$g=16*L$a[L$f].parentIndex,laya.d3.utils.Utils3D.mulMatrixByArray(L$d,L$g,L$d,L$i,L$d,L$i));var L$k=L$c.length;for(L$f=0;L$f<L$k;L$f++){var L$l=16*L$f;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(L$d,L$l,L$c[L$f],L$e,L$l)}},L$I._computeAnimationDatasByArrayAndMatrixFastOld=function(L$a,L$b,L$c){for(var L$d=L$a.length,L$e=0;L$e<L$d;L$e++){var L$f=16*L$e;laya.d3.utils.Utils3D.mulMatrixByArrayAndMatrixFast(L$b,L$f,L$a[L$e],L$c,L$f)}},L$I._computeRootAnimationData=function(L$a,L$b,L$c){for(var L$d=0,L$e=0,L$f=0,L$g=L$a.length;L$d<L$g;L$e+=L$a[L$d].keyframeWidth,L$f+=16,L$d++)laya.d3.utils.Utils3D.createAffineTransformationArray(L$b[L$e+0],L$b[L$e+1],L$b[L$e+2],L$b[L$e+3],L$b[L$e+4],L$b[L$e+5],L$b[L$e+6],L$b[L$e+7],L$b[L$e+8],L$b[L$e+9],L$c,L$f)},L$I.transformVector3ArrayByQuat=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$c.elements,L$g=L$a[L$b],L$h=L$a[L$b+1],L$i=L$a[L$b+2],L$j=L$f[0],L$k=L$f[1],L$l=L$f[2],L$m=L$f[3],L$n=L$m*L$g+L$k*L$i-L$l*L$h,L$o=L$m*L$h+L$l*L$g-L$j*L$i,L$p=L$m*L$i+L$j*L$h-L$k*L$g,L$q=-L$j*L$g-L$k*L$h-L$l*L$i;L$d[L$e]=L$n*L$m+L$q*-L$j+L$o*-L$l-L$p*-L$k,L$d[L$e+1]=L$o*L$m+L$q*-L$k+L$p*-L$j-L$n*-L$l,L$d[L$e+2]=L$p*L$m+L$q*-L$l+L$n*-L$k-L$o*-L$j},L$I.mulMatrixByArray=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g,L$h,L$i,L$j,L$k;if(L$e===L$c){for(L$c=L$I._tempArray16_3,L$g=0;L$g<16;++L$g)L$c[L$g]=L$e[L$f+L$g];L$d=0}for(L$g=0;L$g<4;L$g++)L$h=L$a[L$b+L$g],L$i=L$a[L$b+L$g+4],L$j=L$a[L$b+L$g+8],L$k=L$a[L$b+L$g+12],L$e[L$f+L$g]=L$h*L$c[L$d+0]+L$i*L$c[L$d+1]+L$j*L$c[L$d+2]+L$k*L$c[L$d+3],L$e[L$f+L$g+4]=L$h*L$c[L$d+4]+L$i*L$c[L$d+5]+L$j*L$c[L$d+6]+L$k*L$c[L$d+7],L$e[L$f+L$g+8]=L$h*L$c[L$d+8]+L$i*L$c[L$d+9]+L$j*L$c[L$d+10]+L$k*L$c[L$d+11],L$e[L$f+L$g+12]=L$h*L$c[L$d+12]+L$i*L$c[L$d+13]+L$j*L$c[L$d+14]+L$k*L$c[L$d+15]},L$I.mulMatrixByArrayFast=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g,L$h,L$i,L$j,L$k;for(L$g=0;L$g<4;L$g++)L$h=L$a[L$b+L$g],L$i=L$a[L$b+L$g+4],L$j=L$a[L$b+L$g+8],L$k=L$a[L$b+L$g+12],L$e[L$f+L$g]=L$h*L$c[L$d+0]+L$i*L$c[L$d+1]+L$j*L$c[L$d+2]+L$k*L$c[L$d+3],L$e[L$f+L$g+4]=L$h*L$c[L$d+4]+L$i*L$c[L$d+5]+L$j*L$c[L$d+6]+L$k*L$c[L$d+7],L$e[L$f+L$g+8]=L$h*L$c[L$d+8]+L$i*L$c[L$d+9]+L$j*L$c[L$d+10]+L$k*L$c[L$d+11],L$e[L$f+L$g+12]=L$h*L$c[L$d+12]+L$i*L$c[L$d+13]+L$j*L$c[L$d+14]+L$k*L$c[L$d+15]},L$I.mulMatrixByArrayAndMatrixFast=function(L$a,L$b,L$c,L$d,L$e){var L$f,L$g,L$h,L$i,L$j,L$k=L$c.elements,L$l=L$k[0],L$m=L$k[1],L$n=L$k[2],L$o=L$k[3],L$p=L$k[4],L$q=L$k[5],L$r=L$k[6],L$s=L$k[7],L$t=L$k[8],L$u=L$k[9],L$v=L$k[10],L$y=L$k[11],L$z=L$k[12],L$A=L$k[13],L$B=L$k[14],L$C=L$k[15],L$D=L$b,L$E=L$b+4,L$F=L$b+8,L$G=L$b+12,L$H=L$e,L$I=L$e+4,L$J=L$e+8,L$K=L$e+12;for(L$f=0;L$f<4;L$f++)L$g=L$a[L$D+L$f],L$h=L$a[L$E+L$f],L$i=L$a[L$F+L$f],L$j=L$a[L$G+L$f],L$d[L$H+L$f]=L$g*L$l+L$h*L$m+L$i*L$n+L$j*L$o,L$d[L$I+L$f]=L$g*L$p+L$h*L$q+L$i*L$r+L$j*L$s,L$d[L$J+L$f]=L$g*L$t+L$h*L$u+L$i*L$v+L$j*L$y,L$d[L$K+L$f]=L$g*L$z+L$h*L$A+L$i*L$B+L$j*L$C},L$I.createAffineTransformationArray=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l){var L$m=L$d+L$d,L$n=L$e+L$e,L$o=L$f+L$f,L$p=L$d*L$m,L$q=L$d*L$n,L$r=L$d*L$o,L$s=L$e*L$n,L$t=L$e*L$o,L$u=L$f*L$o,L$v=L$g*L$m,L$y=L$g*L$n,L$z=L$g*L$o;L$k[L$l+0]=(1-(L$s+L$u))*L$h,L$k[L$l+1]=(L$q+L$z)*L$h,L$k[L$l+2]=(L$r-L$y)*L$h,L$k[L$l+3]=0,L$k[L$l+4]=(L$q-L$z)*L$i,L$k[L$l+5]=(1-(L$p+L$u))*L$i,L$k[L$l+6]=(L$t+L$v)*L$i,L$k[L$l+7]=0,L$k[L$l+8]=(L$r+L$y)*L$j,L$k[L$l+9]=(L$t-L$v)*L$j,L$k[L$l+10]=(1-(L$p+L$s))*L$j,L$k[L$l+11]=0,L$k[L$l+12]=L$a,L$k[L$l+13]=L$b,L$k[L$l+14]=L$c,L$k[L$l+15]=1},L$I.transformVector3ArrayToVector3ArrayCoordinate=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$I._tempArray4_0,L$g=L$a[L$b+0],L$h=L$a[L$b+1],L$i=L$a[L$b+2],L$j=L$c.elements;L$f[0]=L$g*L$j[0]+L$h*L$j[4]+L$i*L$j[8]+L$j[12],L$f[1]=L$g*L$j[1]+L$h*L$j[5]+L$i*L$j[9]+L$j[13],L$f[2]=L$g*L$j[2]+L$h*L$j[6]+L$i*L$j[10]+L$j[14],L$f[3]=1/(L$g*L$j[3]+L$h*L$j[7]+L$i*L$j[11]+L$j[15]),L$d[L$e+0]=L$f[0]*L$f[3],L$d[L$e+1]=L$f[1]*L$f[3],L$d[L$e+2]=L$f[2]*L$f[3]},L$I.transformLightingMapTexcoordByUV0Array=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$c.elements;L$d[L$e+0]=L$a[L$b+0]*L$f[0]+L$f[2],L$d[L$e+1]=(L$a[L$b+1]-1)*L$f[1]+L$f[3]},L$I.transformLightingMapTexcoordByUV1Array=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$c.elements;L$d[L$e+0]=L$a[L$b+0]*L$f[0]+L$f[2],L$d[L$e+1]=1+L$a[L$b+1]*L$f[1]+L$f[3]},L$I.getURLVerion=function(L$a){var L$b=L$a.indexOf("?");return 0<=L$b?L$a.substr(L$b):null},L$I._quaternionCreateFromYawPitchRollArray=function(L$a,L$b,L$c,L$d){var L$e=.5*L$c,L$f=.5*L$b,L$g=.5*L$a,L$h=Math.sin(L$e),L$i=Math.cos(L$e),L$j=Math.sin(L$f),L$k=Math.cos(L$f),L$l=Math.sin(L$g),L$m=Math.cos(L$g);L$d[0]=L$m*L$j*L$i+L$l*L$k*L$h,L$d[1]=L$l*L$k*L$i-L$m*L$j*L$h,L$d[2]=L$m*L$k*L$h-L$l*L$j*L$i,L$d[3]=L$m*L$k*L$i+L$l*L$j*L$h},L$I._createAffineTransformationArray=function(L$a,L$b,L$c,L$d){var L$e=L$b[0],L$f=L$b[1],L$g=L$b[2],L$h=L$b[3],L$i=L$e+L$e,L$j=L$f+L$f,L$k=L$g+L$g,L$l=L$e*L$i,L$m=L$e*L$j,L$n=L$e*L$k,L$o=L$f*L$j,L$p=L$f*L$k,L$q=L$g*L$k,L$r=L$h*L$i,L$s=L$h*L$j,L$t=L$h*L$k,L$u=L$c[0],L$v=L$c[1],L$y=L$c[2];L$d[0]=(1-(L$o+L$q))*L$u,L$d[1]=(L$m+L$t)*L$u,L$d[2]=(L$n-L$s)*L$u,L$d[3]=0,L$d[4]=(L$m-L$t)*L$v,L$d[5]=(1-(L$l+L$q))*L$v,L$d[6]=(L$p+L$r)*L$v,L$d[7]=0,L$d[8]=(L$n+L$s)*L$y,L$d[9]=(L$p-L$r)*L$y,L$d[10]=(1-(L$l+L$o))*L$y,L$d[11]=0,L$d[12]=L$a[0],L$d[13]=L$a[1],L$d[14]=L$a[2],L$d[15]=1},L$I._mulMatrixArray=function(L$a,L$b,L$c,L$d){var L$e,L$f,L$g,L$h,L$i,L$j=L$b.elements,L$k=L$j[0],L$l=L$j[1],L$m=L$j[2],L$n=L$j[3],L$o=L$j[4],L$p=L$j[5],L$q=L$j[6],L$r=L$j[7],L$s=L$j[8],L$t=L$j[9],L$u=L$j[10],L$v=L$j[11],L$y=L$j[12],L$z=L$j[13],L$A=L$j[14],L$B=L$j[15],L$C=L$d,L$D=L$d+4,L$E=L$d+8,L$F=L$d+12;for(L$e=0;L$e<4;L$e++)L$f=L$a[L$e],L$g=L$a[L$e+4],L$h=L$a[L$e+8],L$i=L$a[L$e+12],L$c[L$C+L$e]=L$f*L$k+L$g*L$l+L$h*L$m+L$i*L$n,L$c[L$D+L$e]=L$f*L$o+L$g*L$p+L$h*L$q+L$i*L$r,L$c[L$E+L$e]=L$f*L$s+L$g*L$t+L$h*L$u+L$i*L$v,L$c[L$F+L$e]=L$f*L$y+L$g*L$z+L$h*L$A+L$i*L$B},L$I.getYawPitchRoll=function(L$a,L$b){L$I.transformQuat(L$gb.ForwardRH,L$a,L$cb.TEMPVector31),L$I.transformQuat(L$gb.Up,L$a,L$cb.TEMPVector32);var L$c=L$cb.TEMPVector32.elements;L$I.angleTo(L$gb.ZERO,L$cb.TEMPVector31,L$cb.TEMPVector33);var L$d=L$cb.TEMPVector33.elements;L$d[0]==Math.PI/2?(L$d[1]=L$I.arcTanAngle(L$c[2],L$c[0]),L$d[2]=0):L$d[0]==-Math.PI/2?(L$d[1]=L$I.arcTanAngle(-L$c[2],-L$c[0]),L$d[2]=0):(L$ab.createRotationY(-L$d[1],L$cb.TEMPMatrix0),L$ab.createRotationX(-L$d[0],L$cb.TEMPMatrix1),L$gb.transformCoordinate(L$cb.TEMPVector32,L$cb.TEMPMatrix0,L$cb.TEMPVector32),L$gb.transformCoordinate(L$cb.TEMPVector32,L$cb.TEMPMatrix1,L$cb.TEMPVector32),L$d[2]=L$I.arcTanAngle(L$c[1],-L$c[0])),L$d[1]<=-Math.PI&&(L$d[1]=Math.PI),L$d[2]<=-Math.PI&&(L$d[2]=Math.PI),L$d[1]>=Math.PI&&L$d[2]>=Math.PI&&(L$d[1]=0,L$d[2]=0,L$d[0]=Math.PI-L$d[0]),L$b[0]=L$d[1],L$b[1]=L$d[0],L$b[2]=L$d[2]},L$I.arcTanAngle=function(L$a,L$b){return 0==L$a?1==L$b?Math.PI/2:-Math.PI/2:0<L$a?Math.atan(L$b/L$a):L$a<0?0<L$b?Math.atan(L$b/L$a)+Math.PI:Math.atan(L$b/L$a)-Math.PI:0},L$I.angleTo=function(L$a,L$b,L$c){L$gb.subtract(L$b,L$a,L$cb.TEMPVector30),L$gb.normalize(L$cb.TEMPVector30,L$cb.TEMPVector30),L$c.elements[0]=Math.asin(L$cb.TEMPVector30.y),L$c.elements[1]=L$I.arcTanAngle(-L$cb.TEMPVector30.z,-L$cb.TEMPVector30.x)},L$I.transformQuat=function(L$a,L$b,L$c){var L$d=L$c.elements,L$e=L$a.elements,L$f=L$b,L$g=L$e[0],L$h=L$e[1],L$i=L$e[2],L$j=L$f[0],L$k=L$f[1],L$l=L$f[2],L$m=L$f[3],L$n=L$m*L$g+L$k*L$i-L$l*L$h,L$o=L$m*L$h+L$l*L$g-L$j*L$i,L$p=L$m*L$i+L$j*L$h-L$k*L$g,L$q=-L$j*L$g-L$k*L$h-L$l*L$i;L$d[0]=L$n*L$m+L$q*-L$j+L$o*-L$l-L$p*-L$k,L$d[1]=L$o*L$m+L$q*-L$k+L$p*-L$j-L$n*-L$l,L$d[2]=L$p*L$m+L$q*-L$l+L$n*-L$k-L$o*-L$j},L$I.quaterionNormalize=function(L$a,L$b){var L$c=L$a[0],L$d=L$a[1],L$e=L$a[2],L$f=L$a[3],L$g=L$c*L$c+L$d*L$d+L$e*L$e+L$f*L$f;0<L$g&&(L$g=1/Math.sqrt(L$g),L$b[0]=L$c*L$g,L$b[1]=L$d*L$g,L$b[2]=L$e*L$g,L$b[3]=L$f*L$g)},L$I.matrix4x4MultiplyFFF=function(L$a,L$b,L$c){var L$d,L$e,L$f,L$g,L$h;if(L$c===L$b)for(L$b=new Float32Array(16),L$d=0;L$d<16;++L$d)L$b[L$d]=L$c[L$d];for(L$d=0;L$d<4;L$d++)L$e=L$a[L$d],L$f=L$a[L$d+4],L$g=L$a[L$d+8],L$h=L$a[L$d+12],L$c[L$d]=L$e*L$b[0]+L$f*L$b[1]+L$g*L$b[2]+L$h*L$b[3],L$c[L$d+4]=L$e*L$b[4]+L$f*L$b[5]+L$g*L$b[6]+L$h*L$b[7],L$c[L$d+8]=L$e*L$b[8]+L$f*L$b[9]+L$g*L$b[10]+L$h*L$b[11],L$c[L$d+12]=L$e*L$b[12]+L$f*L$b[13]+L$g*L$b[14]+L$h*L$b[15]},L$I.matrix4x4MultiplyMFM=function(L$a,L$b,L$c){L$I.matrix4x4MultiplyFFF(L$a.elements,L$b,L$c.elements)},L$l(L$I,["_typeToFunO",function(){return this._typeToFunO={INT16:"writeInt16",SHORT:"writeInt16",UINT16:"writeUint16",UINT32:"writeUint32",FLOAT32:"writeFloat32",INT:"writeInt32",UINT:"writeUint32",BYTE:"writeByte",STRING:"writeUTFString"}},"_tempVector3_0",function(){return this._tempVector3_0=new L$gb},"_tempVector3_1",function(){return this._tempVector3_1=new L$gb},"_tempVector3_2",function(){return this._tempVector3_2=new L$gb},"_tempVector3_3",function(){return this._tempVector3_3=new L$gb},"_tempVector3_4",function(){return this._tempVector3_4=new L$gb},"_tempVector3_5",function(){return this._tempVector3_5=new L$gb},"_tempVector3_6",function(){return this._tempVector3_6=new L$gb},"_tempArray4_0",function(){return this._tempArray4_0=new Float32Array(4)},"_tempArray16_0",function(){return this._tempArray16_0=new Float32Array(16)},"_tempArray16_1",function(){return this._tempArray16_1=new Float32Array(16)},"_tempArray16_2",function(){return this._tempArray16_2=new Float32Array(16)},"_tempArray16_3",function(){return this._tempArray16_3=new Float32Array(16)}]),L$I}(),L$rb=function(){function L$G(){}return L$n(L$G,"Laya3D"),L$G._cancelLoadByUrl=function(L$a){L$v.loader.cancelLoadByUrl(L$a),L$G._innerFirstLevelLoaderManager.cancelLoadByUrl(L$a),L$G._innerSecondLevelLoaderManager.cancelLoadByUrl(L$a),L$G._innerThirdLevelLoaderManager.cancelLoadByUrl(L$a),L$G._innerFourthLevelLoaderManager.cancelLoadByUrl(L$a)},L$G._changeWebGLSize=function(L$a,L$b){L$F.onStageResize(L$a,L$b),L$Y.clientWidth=L$a,L$Y.clientHeight=L$b},L$G.__init__=function(){var L$a=L$b.createMap;L$a.lh=[L$Kb,"SPRITE3DHIERARCHY"],L$a.ls=[L$Jb,"SPRITE3DHIERARCHY"],L$a.lm=[L$Rb,"MESH"],L$a.lmat=[L$Mb,"MATERIAL"],L$a.jpg=[L$Tb,"nativeimage"],L$a.jpeg=[L$Tb,"nativeimage"],L$a.png=[L$Tb,"nativeimage"],L$a.pkm=[L$Tb,"arraybuffer"],L$a.raw=[L$Pb,"arraybuffer"],L$a.mipmaps=[L$Pb,"arraybuffer"],L$r.parserMap.SPRITE3DHIERARCHY=L$G._loadHierarchy,L$r.parserMap.MESH=L$G._loadMesh,L$r.parserMap.MATERIAL=L$G._loadMaterial,L$r.parserMap.TEXTURECUBE=L$G._loadTextureCube,L$r.parserMap.TERRAIN=L$G._loadTerrain,L$G._innerFirstLevelLoaderManager.on("error",null,L$G._eventLoadManagerError),L$G._innerSecondLevelLoaderManager.on("error",null,L$G._eventLoadManagerError),L$G._innerThirdLevelLoaderManager.on("error",null,L$G._eventLoadManagerError),L$G._innerFourthLevelLoaderManager.on("error",null,L$G._eventLoadManagerError)},L$G.READ_BLOCK=function(){return L$G._readData.pos+=4,!0},L$G.READ_DATA=function(){return L$G._DATA.offset=L$G._readData.getUint32(),L$G._DATA.size=L$G._readData.getUint32(),!0},L$G.READ_STRINGS=function(){var L$a=[],L$b={offset:0,size:0};L$b.offset=L$G._readData.getUint16(),L$b.size=L$G._readData.getUint16();L$G._readData.pos;L$G._readData.pos=L$b.offset+L$G._DATA.offset;for(var L$c=0;L$c<L$b.size;L$c++){var L$d=L$G._readData.readUTFString();-1===L$d.lastIndexOf(".lmat")&&-1===L$d.lastIndexOf(".lpbr")||L$a.push(L$d)}return L$a},L$G.formatRelativePath=function(L$a,L$b){var L$c;if("."===L$b.charAt(0)){for(var L$d=(L$a+L$b).split("/"),L$e=0,L$f=L$d.length;L$e<L$f;L$e++)if(".."==L$d[L$e]){var L$g=L$e-1;0<L$g&&".."!==L$d[L$g]&&(L$d.splice(L$g,2),L$e-=2)}L$c=L$d.join("/")}else L$c=L$a+L$b;return null!=L$E.customFormat&&(L$c=L$E.customFormat(L$c,null)),L$c},L$G._eventLoadManagerError=function(L$a){L$v.loader.event("error",L$a)},L$G._addHierarchyInnerUrls=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g=L$G.formatRelativePath(L$d,L$e);L$c&&(L$g+=L$c),L$a.push({url:L$g,clas:L$f}),L$b[L$e]=L$g},L$G._getSprite3DHierarchyInnerUrls=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){var L$h,L$i=0,L$j=0;switch(L$a.type){case"Scene":var L$k=L$a.customProps.lightmaps;for(L$i=0,L$j=L$k.length;L$i<L$j;L$i++){var L$l=L$k[L$i].replace(".exr",".png");L$G._addHierarchyInnerUrls(L$d,L$e,L$f,L$g,L$l,L$Tb)}break;case"MeshSprite3D":case"TrailSprite3D":case"LineSprite3D":case"SkinnedMeshSprite3D":var L$m;if(L$a.instanceParams)(L$m=L$a.instanceParams.loadPath)&&L$G._addHierarchyInnerUrls(L$b,L$e,L$f,L$g,L$m,L$Rb);else{(L$m=(L$h=L$a.customProps).meshPath)&&L$G._addHierarchyInnerUrls(L$b,L$e,L$f,L$g,L$m,L$Rb);var L$n=L$h.materials;if(L$n)for(L$i=0,L$j=L$n.length;L$i<L$j;L$i++){for(var L$o=L$n[L$i],L$p=L$o.type.split("."),L$q=L$H.window,L$r=0,L$s=L$p.length;L$r<L$s;++L$r){L$q=L$q[this.clasPaths[L$r]]}if("function"!=typeof L$q)throw"_getSprite3DHierarchyInnerUrls 错误: "+L$o.type+" 不是类";L$G._addHierarchyInnerUrls(L$c,L$e,L$f,L$g,L$o.path,L$q)}}break;case"ShuriKenParticle3D":case"MyShuriKenParticle3D":var L$t=(L$h=L$a.customProps).meshPath;L$t&&L$G._addHierarchyInnerUrls(L$b,L$e,L$f,L$g,L$t,L$Rb);var L$u=L$h.material;if(L$u){L$p=L$u.type.split("."),L$q=L$H.window;for(L$r=0,L$s=L$p.length;L$r<L$s;++L$r){L$q=L$q[this.clasPaths[L$r]]}L$G._addHierarchyInnerUrls(L$c,L$e,L$f,L$g,L$u.path,L$q)}else{var L$v=L$h.materialPath;if(L$v)L$G._addHierarchyInnerUrls(L$c,L$e,L$f,L$g,L$v,ShurikenParticleMaterial);else{var L$y=L$h.texturePath;L$y&&L$G._addHierarchyInnerUrls(L$d,L$e,L$f,L$g,L$y,L$Tb)}}break;case"Terrain":L$G._addHierarchyInnerUrls(L$d,L$e,L$f,L$g,L$a.customProps.dataPath,TerrainRes)}var L$z=L$a.components;for(var L$A in L$z){var L$B=L$z[L$A];switch(L$A){case"Animator":var L$C=L$B.avatarPath;if(L$C)L$G._addHierarchyInnerUrls(L$d,L$e,L$f,L$g,L$C,Avatar);else{var L$D=L$B.avatar;L$D&&L$G._addHierarchyInnerUrls(L$d,L$e,L$f,L$g,L$D.path,Avatar)}var L$E=L$B.clipPaths;for(L$i=0,L$j=L$E.length;L$i<L$j;L$i++)L$G._addHierarchyInnerUrls(L$d,L$e,L$f,L$g,L$E[L$i],AnimationClip)}}var L$F=L$a.child;for(L$i=0,L$j=L$F.length;L$i<L$j;L$i++)L$G._getSprite3DHierarchyInnerUrls(L$F[L$i],L$b,L$c,L$d,L$e,L$f,L$g)},L$G._loadHierarchy=function(L$a){L$a.on("loaded",null,L$G._onHierarchylhLoaded,[L$a,L$a._class._getGroup()]),L$a.load(L$a.url,"json",!1,null,!0)},L$G._onHierarchylhLoaded=function(L$a,L$b,L$c){if(L$a._class.destroyed)L$a.endLoad();else{var L$d=L$a.url,L$e=L$qb.getURLVerion(L$d),L$f=L$E.getPath(L$d),L$g=[],L$h=[],L$i=[],L$j={};L$G._getSprite3DHierarchyInnerUrls(L$c,L$g,L$h,L$i,L$j,L$e,L$f);var L$k=L$g.length+L$h.length+L$i.length,L$l=L$k+1,L$m=1/L$l;if(L$G._onProcessChange(L$a,0,L$m,1),0<L$i.length){var L$n=L$k/L$l,L$o=L$D.create(null,L$G._onProcessChange,[L$a,L$m,L$n],!1);L$G._innerFourthLevelLoaderManager.create(L$i,L$D.create(null,L$G._onHierarchyInnerForthLevResouLoaded,[L$a,L$b,L$o,L$c,L$j,L$g,L$h,L$m+L$n*L$i.length,L$n]),L$o,null,null,1,!0,L$b)}else L$G._onHierarchyInnerForthLevResouLoaded(L$a,L$b,null,L$c,L$j,L$g,L$h,L$m,L$n)}},L$G._onHierarchyInnerForthLevResouLoaded=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){if(L$a._class.destroyed)L$a.endLoad();else if(L$c&&L$c.recover(),0<L$g.length){var L$j=L$D.create(null,L$G._onProcessChange,[L$a,L$h,L$i],!1);L$G._innerSecondLevelLoaderManager.create(L$g,L$D.create(null,L$G._onHierarchyInnerSecondLevResouLoaded,[L$a,L$b,L$j,L$d,L$e,L$f,L$h+L$i*L$g.length,L$i]),L$c,null,null,1,!0,L$b)}else L$G._onHierarchyInnerSecondLevResouLoaded(L$a,L$b,null,L$d,L$e,L$f,L$h,L$i)},L$G._onHierarchyInnerSecondLevResouLoaded=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h){if(L$a._class.destroyed)L$a.endLoad();else if(L$c&&L$c.recover(),0<L$f.length){var L$i=L$D.create(null,L$G._onProcessChange,[L$a,L$g,L$h],!1);L$G._innerFirstLevelLoaderManager.create(L$f,L$D.create(null,L$G._onHierarchyInnerFirstLevResouLoaded,[L$a,L$i,L$d,L$e]),L$c,null,null,1,!0,L$b)}else L$G._onHierarchyInnerFirstLevResouLoaded(L$a,null,L$d,L$e)},L$G._onHierarchyInnerFirstLevResouLoaded=function(L$a,L$b,L$c,L$d){L$b&&L$b.recover(),L$a.endLoad([L$c,L$d])},L$G._loadTerrain=function(L$a){L$a.on("loaded",null,L$G._onTerrainLtLoaded,[L$a,L$a._class._getGroup()]),L$a.load(L$a.url,"json",!1,null,!0)},L$G._onTerrainLtLoaded=function(L$a,L$b,L$c){if(L$a._class.destroyed)L$a.endLoad();else{var L$d,L$e,L$f=L$a.url,L$g=L$qb.getURLVerion(L$f),L$h=L$E.getPath(L$f),L$i=[],L$j={},L$k=0,L$l=0,L$m=L$c.heightData;L$d=L$m.url,L$e=L$G.formatRelativePath(L$h,L$d),L$g&&(L$e+=L$g),L$d=L$j[L$d]=L$e;var L$n=L$c.detailTexture;for(L$k=0,L$l=L$n.length;L$k<L$l;L$k++)L$i.push({url:L$n[L$k].diffuse});var L$o=L$c.normalMap;for(L$k=0,L$l=L$o.length;L$k<L$l;L$k++)L$i.push({url:L$o[L$k]});var L$p=L$c.alphaMap;for(L$k=0,L$l=L$p.length;L$k<L$l;L$k++)L$i.push({url:L$p[L$k],params:[!1,!1,6408,!0]});for(L$k=0,L$l=L$i.length;L$k<L$l;L$k++){var L$q=L$i[L$k].url;L$e=L$G.formatRelativePath(L$h,L$q),L$g&&(L$e+=L$g),L$i[L$k].url=L$e,L$j[L$q]=L$e}var L$r=L$i.length,L$s=L$r+2,L$t=1/L$s;L$G._onProcessChange(L$a,0,L$t,1);var L$u={heightMapLoaded:!1,texturesLoaded:!1},L$v=L$D.create(null,L$G._onProcessChange,[L$a,L$t,L$t],!1);L$G._innerFourthLevelLoaderManager.create(L$d,L$D.create(null,L$G._onTerrainHeightMapLoaded,[L$a,L$v,L$c,L$j,L$u]),L$v,null,[L$m.numX,L$m.numZ,L$m.bitType,L$m.value],1,!0,L$b);var L$y=L$D.create(null,L$G._onProcessChange,[L$a,2*L$t,L$r/L$s],!1);L$G._innerFourthLevelLoaderManager.create(L$i,L$D.create(null,L$G._onTerrainTexturesLoaded,[L$a,L$y,L$c,L$j,L$u]),L$y,null,null,1,!0,L$b)}},L$G._onTerrainHeightMapLoaded=function(L$a,L$b,L$c,L$d,L$e){L$e.heightMapLoaded=!0,L$e.texturesLoaded&&(L$a.endLoad([L$c,L$d]),L$b.recover())},L$G._onTerrainTexturesLoaded=function(L$a,L$b,L$c,L$d,L$e){L$e.texturesLoaded=!0,L$e.heightMapLoaded&&(L$a.endLoad([L$c,L$d]),L$b.recover())},L$G._loadMesh=function(L$a){L$a.on("loaded",null,L$G._onMeshLmLoaded,[L$a,L$a._class._getGroup()]),L$a.load(L$a.url,"arraybuffer",!1,null,!0)},L$G._onMeshLmLoaded=function(L$a,L$b,L$c){if(L$a._class.destroyed)L$a.endLoad();else{var L$d,L$e,L$f,L$g=L$a.url,L$h=L$qb.getURLVerion(L$g),L$i=L$E.getPath(L$g),L$j={},L$k=0,L$l=0;switch((L$G._readData=new L$y(L$c)).pos=0,L$G._readData.readUTFString()){case"LAYAMODEL:02":case"LAYAMODEL:03":case"LAYAMODEL:0301":var L$m=L$G._readData.getUint32();L$G._readData.pos=L$G._readData.pos+4,L$l=L$G._readData.getUint16(),L$G._readData.pos=L$G._readData.pos+8*L$l;var L$n=L$G._readData.getUint32();for(L$l=L$G._readData.getUint16(),L$G._readData.pos=L$m+L$n,L$d=[],L$k=0;L$k<L$l;L$k++){var L$o=L$G._readData.readUTFString();-1!==L$o.lastIndexOf(".lmat")&&L$d.push(L$o)}break;default:for(L$G.READ_BLOCK(),L$k=0;L$k<2;L$k++){var L$p=L$G._readData.getUint16(),L$q=L$G._strings[L$p],L$r=L$G["READ_"+L$q];if(null==L$r)throw new Error("model file err,no this function:"+L$p+" "+L$q);1===L$k?L$d=L$r.call():L$r.call()}}for(L$k=0,L$f=L$d.length;L$k<L$f;L$k++){var L$s=L$d[L$k];L$e=L$G.formatRelativePath(L$i,L$s),L$h&&(L$e+=L$h),L$d[L$k]=L$e,L$j[L$s]=L$e}if(0<L$d.length){L$G._onProcessChange(L$a,0,.5,1);var L$t=L$D.create(null,L$G._onProcessChange,[L$a,.5,.5],!1);L$G._innerSecondLevelLoaderManager.create(L$d,L$D.create(null,L$G._onMeshMateialLoaded,[L$a,L$t,L$c,L$j]),L$t,null,null,1,!0,L$b)}else L$a.endLoad([L$c,L$j])}},L$G._onMeshMateialLoaded=function(L$a,L$b,L$c,L$d){L$a.endLoad([L$c,L$d]),L$b.recover()},L$G._getMaterialTexturePath=function(L$a,L$b,L$c){var L$d=L$a.length-4;return L$a.indexOf(".dds")!=L$d&&L$a.indexOf(".tga")!=L$d&&L$a.indexOf(".exr")!=L$d&&L$a.indexOf(".DDS")!=L$d&&L$a.indexOf(".TGA")!=L$d&&L$a.indexOf(".EXR")!=L$d||(L$a=L$a.substr(0,L$d)+".png"),L$a=L$G.formatRelativePath(L$c,L$a),L$b&&(L$a+=L$b),L$a},L$G._loadMaterial=function(L$a){L$a.on("loaded",null,L$G._onMaterilLmatLoaded,[L$a,L$a._class._getGroup()]),L$a.load(L$a.url,"json",!1,null,!0)},L$G._onMaterilLmatLoaded=function(L$a,L$b,L$c){if(L$a._class.destroyed)L$a.endLoad();else{var L$d,L$e=L$a.url,L$f=L$qb.getURLVerion(L$e),L$g=L$E.getPath(L$e),L$h=[],L$i={},L$j=L$c.customProps,L$k=L$c.version;if(L$k)switch(L$k){case"LAYAMATERIAL:01":case"LAYAMATERIAL:02":for(var L$l=L$c.props.textures,L$m=0,L$n=L$l.length;L$m<L$n;L$m++){var L$o=L$l[L$m],L$p=L$o.path;if(L$p){var L$q=L$p.length-4;L$p.indexOf(".exr")!=L$q&&L$p.indexOf(".EXR")!=L$q||(L$p=L$p.substr(0,L$q)+".png"),L$d=L$G.formatRelativePath(L$g,L$p),L$f&&(L$d+=L$f),L$h.push({url:L$d,params:L$o.params}),L$i[L$p]=L$d}}break;default:throw new Error("Laya3D:unkonwn version.")}else{var L$r=L$j.diffuseTexture.texture2D;if(L$r&&(L$d=L$G._getMaterialTexturePath(L$r,L$f,L$g),L$h.push(L$d),L$i[L$r]=L$d),L$j.normalTexture){var L$s=L$j.normalTexture.texture2D;L$s&&(L$d=L$G._getMaterialTexturePath(L$s,L$f,L$g),L$h.push(L$d),L$i[L$s]=L$d)}if(L$j.specularTexture){var L$t=L$j.specularTexture.texture2D;L$t&&(L$d=L$G._getMaterialTexturePath(L$t,L$f,L$g),L$h.push(L$d),L$i[L$t]=L$d)}if(L$j.emissiveTexture){var L$u=L$j.emissiveTexture.texture2D;L$u&&(L$d=L$G._getMaterialTexturePath(L$u,L$f,L$g),L$h.push(L$d),L$i[L$u]=L$d)}if(L$j.ambientTexture){var L$v=L$j.ambientTexture.texture2D;L$v&&(L$d=L$G._getMaterialTexturePath(L$v,L$f,L$g),L$h.push(L$d),L$i[L$v]=L$d)}if(L$j.reflectTexture){var L$y=L$j.reflectTexture.texture2D;L$y&&(L$d=L$G._getMaterialTexturePath(L$y,L$f,L$g),L$h.push(L$d),L$i[L$y]=L$d)}}var L$z=L$h.length,L$A=L$z+1,L$B=1/L$A;if(L$G._onProcessChange(L$a,0,L$B,1),0<L$z){var L$C=L$D.create(null,L$G._onProcessChange,[L$a,L$B,L$z/L$A],!1);L$G._innerFourthLevelLoaderManager.create(L$h,L$D.create(null,L$G._onMateialTexturesLoaded,[L$a,L$C,L$c,L$i]),L$C,L$Tb,null,1,!0,L$b)}else L$G._onMateialTexturesLoaded(L$a,null,L$c,null)}},L$G._onMateialTexturesLoaded=function(L$a,L$b,L$c,L$d){L$a.endLoad([L$c,L$d]),L$b&&L$b.recover()},L$G._loadTextureCube=function(L$a){L$a.on("loaded",null,L$G._onTextureCubeLtcLoaded,[L$a]),L$a.load(L$a.url,"json",!1,null,!0)},L$G._onTextureCubeLtcLoaded=function(L$a,L$b){if(L$a._class.destroyed)L$a.endLoad();else{var L$c=L$E.getPath(L$a.url),L$d=[L$G.formatRelativePath(L$c,L$b.px),L$G.formatRelativePath(L$c,L$b.nx),L$G.formatRelativePath(L$c,L$b.py),L$G.formatRelativePath(L$c,L$b.ny),L$G.formatRelativePath(L$c,L$b.pz),L$G.formatRelativePath(L$c,L$b.nz)];L$G._onProcessChange(L$a,0,1/7,1);var L$e=L$D.create(null,L$G._onProcessChange,[L$a,1/7,6/7],!1);L$G._innerFourthLevelLoaderManager.load(L$d,L$D.create(null,L$G._onTextureCubeImagesLoaded,[L$a,L$d,L$e]),L$e,"nativeimage")}},L$G._onTextureCubeImagesLoaded=function(L$a,L$b,L$c){var L$d=[];L$d.length=6;for(var L$e=0;L$e<6;L$e++){var L$f=L$b[L$e];L$d[L$e]=L$r.getRes(L$f),L$r.clearRes(L$f)}L$a.endLoad(L$d),L$c.recover()},L$G._onProcessChange=function(L$a,L$b,L$c,L$d){(L$d=L$b+L$d*L$c)<1&&L$a.event("progress",L$d)},L$G.init=function(L$a,L$b,L$c,L$d,L$e,L$f){if(void 0===L$c&&(L$c=!1),void 0===L$d&&(L$d=!1),void 0===L$e&&(L$e=!0),void 0===L$f&&(L$f=!0),L$s.update3DLoop=function(){},L$s.cancelLoadByUrl=function(L$a){L$G._cancelLoadByUrl(L$a)},L$i.isAntialias=L$c,L$i.isAlpha=L$d,L$i.premultipliedAlpha=L$e,L$i.isStencil=L$f,!L$F.enable())throw new Error("Laya3D启动失败！\n模拟器：请尝试使用《雷电模拟器》最新版本！\n浏览器：请尝试关闭浏览器，确保浏览器进程全部结束后再进游戏！");L$s.changeWebGLSize=L$G._changeWebGLSize,L$p.is3DMode=!0,L$v.init(L$a,L$b),L$I.__init__(),L$lb.__init__(),L$Xb.__init__(),L$Q.__init__(),L$G.__init__(),L$g.maxTextureCount=2,(L$G.debugMode||L$Z.debugMode)&&(L$G._debugPhasorSprite=new L$V)},L$G.HIERARCHY="SPRITE3DHIERARCHY",L$G.MESH="MESH",L$G.MATERIAL="MATERIAL",L$G.PBRMATERIAL="PBRMTL",L$G.TEXTURECUBE="TEXTURECUBE",L$G.TERRAIN="TERRAIN",L$G._readData=null,L$G._debugPhasorSprite=null,L$G.debugMode=!1,L$l(L$G,["_DATA",function(){return this._DATA={offset:0,size:0}},"_strings",function(){return this._strings=["BLOCK","DATA","STRINGS"]},"_innerFirstLevelLoaderManager",function(){return this._innerFirstLevelLoaderManager=new L$b},"_innerSecondLevelLoaderManager",function(){return this._innerSecondLevelLoaderManager=new L$b},"_innerThirdLevelLoaderManager",function(){return this._innerThirdLevelLoaderManager=new L$b},"_innerFourthLevelLoaderManager",function(){return this._innerFourthLevelLoaderManager=new L$b}]),L$G}(),L$sb=function(L$a){function L$e(L$a){L$e.__super.call(this),this._owner=L$a,this._childs=[],this._localMatrix=new Float32Array(16),this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0}L$n(L$e,"laya.d3.animation.AnimationTransform3D",L$f);var L$b=L$e.prototype;return L$b._getlocalMatrix=function(){return this._localUpdate&&(L$qb._createAffineTransformationArray(this._localPosition,this._localRotation,this._localScale,this._localMatrix),this._localUpdate=!1),this._localMatrix},L$b._onWorldTransform=function(){if(!this._worldUpdate){this._worldUpdate=!0;for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._onWorldTransform()}},L$b._setWorldMatrixAndUpdate=function(L$a){if(this._worldMatrix=L$a,null==this._parent)throw new Error("don't need to set worldMatrix to root Node.");if(null==this._parent._parent)for(var L$b=this._getlocalMatrix(),L$c=0;L$c<16;++L$c)this._worldMatrix[L$c]=L$b[L$c];else L$qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);this._worldUpdate=!1},L$b._setWorldMatrixNoUpdate=function(L$a){this._worldMatrix=L$a},L$b._setWorldMatrixIgnoreUpdate=function(L$a){this._worldMatrix=L$a,this._worldUpdate=!1},L$b.getLocalPosition=function(){return this._localPosition},L$b.setLocalPosition=function(L$a){if(this._parent)this._localPosition=L$a,this._localUpdate=!0,this._onWorldTransform();else{var L$b=this._entity.owner._transform,L$c=this._entity.localPosition,L$d=L$c.elements;L$d[0]=L$a[0],L$d[1]=L$a[1],L$d[2]=L$a[2],L$b.localPosition=L$c}},L$b.getLocalRotation=function(){if(this._localQuaternionUpdate){var L$a=this._localRotationEuler;L$qb._quaternionCreateFromYawPitchRollArray(L$a[1]/L$e._angleToRandin,L$a[0]/L$e._angleToRandin,L$a[2]/L$e._angleToRandin,this._localRotation),this._localQuaternionUpdate=!1}return this._localRotation},L$b.setLocalRotation=function(L$a){if(this._parent)this._localRotation=L$a,L$qb.quaterionNormalize(this._localRotation,this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var L$b=this._entity.owner._transform,L$c=this._entity.localRotation,L$d=L$c.elements;L$d[0]=L$a[0],L$d[1]=L$a[1],L$d[2]=L$a[2],L$d[3]=L$a[3],L$b.localRotation=L$c}},L$b.getLocalScale=function(){return this._localScale},L$b.setLocalScale=function(L$a){if(this._parent)this._localScale=L$a,this._localUpdate=!0,this._onWorldTransform();else{var L$b=this._entity.owner._transform,L$c=this._entity.localScale,L$d=L$c.elements;L$d[0]=L$a[0],L$d[1]=L$a[1],L$d[2]=L$a[2],L$b.localScale=L$c}},L$b.getLocalRotationEuler=function(){if(this._locaEulerlUpdate){L$qb.getYawPitchRoll(this._localRotation,L$e._tempVector3);var L$a=L$e._tempVector3,L$b=this._localRotationEuler;L$b[0]=L$a[1]*L$e._angleToRandin,L$b[1]=L$a[0]*L$e._angleToRandin,L$b[2]=L$a[2]*L$e._angleToRandin,this._locaEulerlUpdate=!1}return this._localRotationEuler},L$b.setLocalRotationEuler=function(L$a){if(this._parent)L$qb._quaternionCreateFromYawPitchRollArray(L$a[1]/L$e._angleToRandin,L$a[0]/L$e._angleToRandin,L$a[2]/L$e._angleToRandin,this._localRotation),this._localRotationEuler=L$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!1,this._localUpdate=!0,this._onWorldTransform();else{var L$b=this._entity.owner._transform,L$c=this._entity.localRotationEuler,L$d=L$c.elements;L$d[0]=L$a[0],L$d[1]=L$a[1],L$d[2]=L$a[2],L$b.localRotationEuler=L$c}},L$b.getWorldMatrix=function(){if(this._worldUpdate){if(null!=this._parent._parent)L$qb.matrix4x4MultiplyFFF(this._parent.getWorldMatrix(),this._getlocalMatrix(),this._worldMatrix);else for(var L$a=this._getlocalMatrix(),L$b=0;L$b<16;++L$b)this._worldMatrix[L$b]=L$a[L$b];this._worldUpdate=!1}return this._worldMatrix},L$b.setParent=function(L$a){if(this._parent!==L$a){if(this._parent){var L$b=this._parent._childs,L$c=L$b.indexOf(this);L$b.splice(L$c,1)}L$a&&(L$a._childs.push(this),L$a&&this._onWorldTransform()),this._parent=L$a}},L$l(L$e,["_tempVector3",function(){return this._tempVector3=new Float32Array(3)},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),L$e}(),L$tb=function(L$a){function L$b(){this._destroyed=!1,this._id=0,this._enable=!1,this._owner=null,this.started=!1,L$b.__super.call(this),this._destroyed=!1,this._id=L$b._uniqueIDCounter,L$b._uniqueIDCounter++}L$n(L$b,"laya.d3.component.Component3D",L$f);var L$c=L$b.prototype;return L$v.imps(L$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.IDestroy":!0}),L$c._initialize=function(L$a){this._owner=L$a,this._enable=!0,this.started=!1,this._load(L$a)},L$c._destroy=function(){this._unload(this._owner),this._owner=null,this._destroyed=!0},L$c._load=function(L$a){},L$c._start=function(L$a){},L$c._update=function(L$a){},L$c._lateUpdate=function(L$a){},L$c._preRenderUpdate=function(L$a){},L$c._postRenderUpdate=function(L$a){},L$c._unload=function(L$a){this.offAll()},L$c._cloneTo=function(L$a){},L$o(0,L$c,"id",function(){return this._id}),L$o(0,L$c,"destroyed",function(){return this._destroyed}),L$o(0,L$c,"owner",function(){return this._owner}),L$o(0,L$c,"enable",function(){return this._enable},function(L$a){this._enable!==L$a&&(this._enable=L$a,this.event("enablechanged",this._enable))}),L$o(0,L$c,"isSingleton",function(){return L$b._isSingleton}),L$b._isSingleton=!0,L$b._uniqueIDCounter=1,L$b}(),L$ub=function(L$a){function L$b(){this._destroyed=!1,L$b.__super.call(this),this._destroyed=!1}L$n(L$b,"laya.d3.core.GeometryFilter",L$f);var L$c=L$b.prototype;return L$v.imps(L$c,{"laya.resource.IDestroy":!0}),L$c._destroy=function(){this.offAll(),this._destroyed=!0},L$o(0,L$c,"_isAsyncLoaded",function(){return!0}),L$o(0,L$c,"_originalBoundingBoxCorners",function(){throw new Error("BaseRender: must override it.")}),L$o(0,L$c,"_originalBoundingSphere",function(){throw new Error("BaseRender: must override it.")}),L$o(0,L$c,"_originalBoundingBox",function(){throw new Error("BaseRender: must override it.")}),L$o(0,L$c,"destroyed",function(){return this._destroyed}),L$b}(),L$vb=function(L$a){function L$d(L$a){L$d.__super.call(this),this._id=++L$d._uniqueIDCounter,this._indexInSceneFrustumCullingObjects=-1,this._boundingBox=new L$Za(new L$gb,new L$gb),this._boundingBoxCenter=new L$gb,this._boundingSphere=new L$_a(new L$gb,0),this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0,this._materials=[],this._renderElements=[],this._isPartOfStaticBatch=!1,this._destroyed=!1,this._owner=L$a,this._enable=!0,this._materialsInstance=[],this.lightmapIndex=-1,this.castShadow=!1,this.receiveShadow=!1,this.sortingFudge=0,this._owner.transform.on("worldmatrixneedchanged",this,this._onWorldMatNeedChange)}L$n(L$d,"laya.d3.core.render.BaseRender",L$f);var L$b=L$d.prototype;return L$v.imps(L$b,{"laya.resource.IDestroy":!0}),L$b._changeMaterialReference=function(L$a,L$b){L$a&&L$a._removeReference(),L$b._addReference()},L$b._getInstanceMaterial=function(L$a,L$b){var L$c=new L$a.constructor;return L$a.cloneTo(L$c),L$c.name=L$c.name+"(Instance)",this._materialsInstance[L$b]=!0,this._changeMaterialReference(this._materials[L$b],L$c),this._materials[L$b]=L$c},L$b._setShaderValuelightMap=function(L$a){this._setShaderValueTexture(3,L$a)},L$b._onWorldMatNeedChange=function(){this._boundingSphereNeedChange=!0,this._boundingBoxNeedChange=!0,this._boundingBoxCenterNeedChange=!0,this._octreeNodeNeedChange=!0},L$b._renderRenderableBoundBox=function(){var L$a=L$rb._debugPhasorSprite,L$b=this.boundingBox,L$c=L$d._tempBoundBoxCorners;L$b.getCorners(L$c),L$a.line(L$c[0],L$d._greenColor,L$c[1],L$d._greenColor),L$a.line(L$c[2],L$d._greenColor,L$c[3],L$d._greenColor),L$a.line(L$c[4],L$d._greenColor,L$c[5],L$d._greenColor),L$a.line(L$c[6],L$d._greenColor,L$c[7],L$d._greenColor),L$a.line(L$c[0],L$d._greenColor,L$c[3],L$d._greenColor),L$a.line(L$c[1],L$d._greenColor,L$c[2],L$d._greenColor),L$a.line(L$c[2],L$d._greenColor,L$c[6],L$d._greenColor),L$a.line(L$c[3],L$d._greenColor,L$c[7],L$d._greenColor),L$a.line(L$c[0],L$d._greenColor,L$c[4],L$d._greenColor),L$a.line(L$c[1],L$d._greenColor,L$c[5],L$d._greenColor),L$a.line(L$c[4],L$d._greenColor,L$c[7],L$d._greenColor),L$a.line(L$c[5],L$d._greenColor,L$c[6],L$d._greenColor)},L$b._calculateBoundingSphere=function(){throw"BaseRender: must override it."},L$b._calculateBoundingBox=function(){throw"BaseRender: must override it."},L$b._setShaderValueTexture=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b)},L$b._setShaderValueMatrix4x4=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b?L$b.elements:null)},L$b._setShaderValueColor=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b?L$b.elements:null)},L$b._setShaderValueBuffer=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b)},L$b._setShaderValueInt=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b)},L$b._setShaderValueBool=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b)},L$b._setShaderValueNumber=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b)},L$b._setShaderValueVector2=function(L$a,L$b){this._owner._shaderValues.setValue(L$a,L$b?L$b.elements:null)},L$b._addShaderDefine=function(L$a){this._owner._shaderDefineValue|=L$a},L$b._removeShaderDefine=function(L$a){this._owner._shaderDefineValue&=~L$a},L$b._renderUpdate=function(L$a){return!0},L$b._applyLightMapParams=function(){if(0<=this._lightmapIndex){var L$a=this._owner.scene;if(L$a){var L$b=L$a.getlightmaps()[this._lightmapIndex];L$b?(this._addShaderDefine(L$Vb.SAHDERDEFINE_LIGHTMAP),L$b.loaded?this._setShaderValuelightMap(L$b):L$b.once("loaded",this,this._setShaderValuelightMap)):this._removeShaderDefine(L$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(L$Vb.SAHDERDEFINE_LIGHTMAP)}else this._removeShaderDefine(L$Vb.SAHDERDEFINE_LIGHTMAP)},L$b._updateOctreeNode=function(){var L$a=this._treeNode;L$a&&this._octreeNodeNeedChange&&(L$a.updateObject(this),this._octreeNodeNeedChange=!1)},L$b._destroy=function(){this.offAll();var L$a=0,L$b=0;for(L$a=0,L$b=this._renderElements.length;L$a<L$b;L$a++)this._renderElements[L$a]._destroy();for(L$a=0,L$b=this._materials.length;L$a<L$b;L$a++)this._materials[L$a]._removeReference();this._renderElements=null,this._owner=null,this._materials=null,this._boundingBox=null,this._boundingBoxCenter=null,this._boundingSphere=null,this._lightmapScaleOffset=null,this._destroyed=!0},L$o(0,L$b,"boundingSphere",function(){return this._boundingSphereNeedChange&&(this._calculateBoundingSphere(),this._boundingSphereNeedChange=!1),this._boundingSphere}),L$o(0,L$b,"id",function(){return this._id}),L$o(0,L$b,"material",function(){var L$a=this._materials[0];if(L$a&&!this._materialsInstance[0]){var L$b=this._getInstanceMaterial(L$a,0);this.event("materialchanged",[this,0,L$b])}return this._materials[0]},function(L$a){this.sharedMaterial=L$a}),L$o(0,L$b,"sharedMaterial",function(){return this._materials[0]},function(L$a){var L$b=this._materials[0];L$b!==L$a&&(this._materials[0]=L$a,this._materialsInstance[0]=!1,this._changeMaterialReference(L$b,L$a),this.event("materialchanged",[this,0,L$a]))}),L$o(0,L$b,"lightmapIndex",function(){return this._lightmapIndex},function(L$a){this._lightmapIndex=L$a,this._applyLightMapParams()}),L$o(0,L$b,"lightmapScaleOffset",function(){return this._lightmapScaleOffset},function(L$a){this._lightmapScaleOffset=L$a,this._setShaderValueColor(2,L$a),this._addShaderDefine(L$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV)}),L$o(0,L$b,"enable",function(){return this._enable},function(L$a){this._enable=L$a,this.event("enablechanged",[this,L$a])}),L$o(0,L$b,"materials",function(){for(var L$a=0,L$b=this._materials.length;L$a<L$b;L$a++)if(!this._materialsInstance[L$a]){var L$c=this._getInstanceMaterial(this._materials[L$a],L$a);this.event("materialchanged",[this,L$a,L$c])}return this._materials.slice()},function(L$a){this.sharedMaterials=L$a}),L$o(0,L$b,"sharedMaterials",function(){return this._materials.slice()},function(L$a){if(!L$a)throw new Error("MeshRender: shadredMaterials value can't be null.");var L$b=L$a.length;this._materialsInstance.length=L$b;for(var L$c=0;L$c<L$b;L$c++){var L$d=this._materials[L$c];L$d!==L$a[L$c]&&(this._materialsInstance[L$c]=!1,this._changeMaterialReference(L$d,L$a[L$c]),this.event("materialchanged",[this,L$c,L$a[L$c]]))}this._materials=L$a}),L$o(0,L$b,"boundingBox",function(){return this._boundingBoxNeedChange&&(this._calculateBoundingBox(),this._boundingBoxNeedChange=!1),this._boundingBox}),L$o(0,L$b,"boundingBoxCenter",function(){if(this._boundingBoxCenterNeedChange){var L$a=this.boundingBox;L$gb.add(L$a.min,L$a.max,this._boundingBoxCenter),L$gb.scale(this._boundingBoxCenter,.5,this._boundingBoxCenter),this._boundingBoxCenterNeedChange=!1}return this._boundingBoxCenter}),L$o(0,L$b,"receiveShadow",function(){return this._receiveShadow},function(L$a){this._receiveShadow!==L$a&&((this._receiveShadow=L$a)?this._addShaderDefine(L$nb.SHADERDEFINE_RECEIVE_SHADOW):this._removeShaderDefine(L$nb.SHADERDEFINE_RECEIVE_SHADOW))}),L$o(0,L$b,"destroyed",function(){return this._destroyed}),L$d._uniqueIDCounter=0,L$l(L$d,["_tempBoundBoxCorners",function(){return this._tempBoundBoxCorners=[new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb,new L$gb]},"_greenColor",function(){return this._greenColor=new L$hb(0,1,0,1)}]),L$d}(),L$yb=function(L$a){function L$h(L$a){this._owner=null,this._localQuaternionUpdate=!1,this._locaEulerlUpdate=!1,this._localUpdate=!1,this._worldUpdate=!0,this._positionUpdate=!0,this._rotationUpdate=!0,this._scaleUpdate=!0,this._parent=null,this._childs=null,this._dummy=null,this.pivot=null,L$h.__super.call(this),this._localPosition=new L$gb,this._localRotation=new L$cb(0,0,0,1),this._localScale=new L$gb(1,1,1),this._localRotationEuler=new L$gb,this._localMatrix=new L$ab,this._position=new L$gb,this._rotation=new L$cb(0,0,0,1),this._scale=new L$gb(1,1,1),this._worldMatrix=new L$ab,this._forward=new L$gb,this._up=new L$gb,this._right=new L$gb,this._owner=L$a,this._childs=[]}L$n(L$h,"laya.d3.core.Transform3D",L$f);var L$b=L$h.prototype;return L$b._updateLocalMatrix=function(){if(!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z)L$ab.createAffineTransformation(this._localPosition,this.localRotation,this._localScale,this._localMatrix);else{var L$a=L$h._tempVector30;L$gb.multiply(this.pivot,this._localScale,L$a);var L$b=L$h._tempVector31;L$gb.subtract(L$a,this.pivot,L$b);var L$c=L$h._tempVector32,L$d=this.localRotation;L$gb.transformQuat(L$a,L$d,L$c),L$gb.subtract(L$c,L$a,L$c);var L$e=L$h._tempVector33;L$gb.subtract(this._localPosition,L$b,L$e),L$gb.subtract(L$e,L$c,L$e),L$ab.createAffineTransformation(L$e,L$d,this._localScale,this._localMatrix)}},L$b._onWorldPositionRotationTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._rotationUpdate){this._worldUpdate=this._positionUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._onWorldPositionRotationTransform()}},L$b._onWorldPositionScaleTransform=function(){if(!this._worldUpdate||!this._positionUpdate||!this._scaleUpdate){this._worldUpdate=this._positionUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._onWorldPositionScaleTransform()}},L$b._onWorldPositionTransform=function(){if(!this._worldUpdate||!this._positionUpdate){this._worldUpdate=this._positionUpdate=!0,this.event("worldmatrixneedchanged");for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._onWorldPositionTransform()}},L$b._onWorldRotationTransform=function(){if(!this._worldUpdate||!this._rotationUpdate){this._worldUpdate=this._rotationUpdate=!0,this.event("worldmatrixneedchanged");for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._onWorldPositionRotationTransform()}},L$b._onWorldScaleTransform=function(){if(!this._worldUpdate||!this._scaleUpdate){this._worldUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._onWorldPositionScaleTransform()}},L$b._onWorldTransform=function(){if(!(this._worldUpdate&&this._positionUpdate&&this._rotationUpdate&&this._scaleUpdate)){this._worldUpdate=this._positionUpdate=this._rotationUpdate=this._scaleUpdate=!0,this.event("worldmatrixneedchanged");for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._onWorldTransform()}},L$b.translate=function(L$a,L$b){void 0===L$b&&(L$b=!0),L$b?(L$ab.createFromQuaternion(this.localRotation,L$h._tempMatrix0),L$gb.transformCoordinate(L$a,L$h._tempMatrix0,L$h._tempVector30),L$gb.add(this.localPosition,L$h._tempVector30,this._localPosition),this.localPosition=this._localPosition):(L$gb.add(this.position,L$a,this._position),this.position=this._position)},L$b.rotate=function(L$a,L$b,L$c){var L$d;void 0===L$b&&(L$b=!0),void 0===L$c&&(L$c=!0),L$d=L$c?L$a:(L$gb.scale(L$a,Math.PI/180,L$h._tempVector30),L$h._tempVector30),L$cb.createFromYawPitchRoll(L$d.y,L$d.x,L$d.z,L$h._tempQuaternion0),L$b?(L$cb.multiply(this._localRotation,L$h._tempQuaternion0,this._localRotation),this.localRotation=this._localRotation):(L$cb.multiply(L$h._tempQuaternion0,this.rotation,this._rotation),this.rotation=this._rotation)},L$b.lookAt=function(L$a,L$b,L$c){void 0===L$c&&(L$c=!1);var L$d,L$e=L$a.elements;if(L$c){if(L$d=this._localPosition.elements,Math.abs(L$d[0]-L$e[0])<L$wa.zeroTolerance&&Math.abs(L$d[1]-L$e[1])<L$wa.zeroTolerance&&Math.abs(L$d[2]-L$e[2])<L$wa.zeroTolerance)return;L$cb.lookAt(this._localPosition,L$a,L$b,this._localRotation),this._localRotation.invert(this._localRotation),this.localRotation=this._localRotation}else{var L$f=this.position;if(L$d=L$f.elements,Math.abs(L$d[0]-L$e[0])<L$wa.zeroTolerance&&Math.abs(L$d[1]-L$e[1])<L$wa.zeroTolerance&&Math.abs(L$d[2]-L$e[2])<L$wa.zeroTolerance)return;L$cb.lookAt(L$f,L$a,L$b,this._rotation),this._rotation.invert(this._rotation),this.rotation=this._rotation}},L$o(0,L$b,"_isFrontFaceInvert",function(){var L$a=this.scale,L$b=L$a.x<0;return L$a.y<0&&(L$b=!L$b),L$a.z<0&&(L$b=!L$b),L$b}),L$o(0,L$b,"owner",function(){return this._owner}),L$o(0,L$b,"localRotation",function(){if(this._localQuaternionUpdate){var L$a=this._localRotationEuler.elements;L$cb.createFromYawPitchRoll(L$a[1]/L$h._angleToRandin,L$a[0]/L$h._angleToRandin,L$a[2]/L$h._angleToRandin,this._localRotation)}return this._localRotation},function(L$a){this._localRotation=L$a,this._localRotation.normalize(this._localRotation),this._locaEulerlUpdate=!0,this._localQuaternionUpdate=!1,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),L$o(0,L$b,"worldMatrix",function(){return this._worldUpdate&&(null!=this._parent?L$ab.multiply(this._parent.worldMatrix,this.localMatrix,this._worldMatrix):this.localMatrix.cloneTo(this._worldMatrix),this._worldUpdate=!1),this._worldMatrix},function(L$a){null===this._parent?L$a.cloneTo(this._localMatrix):(this._parent.worldMatrix.invert(this._localMatrix),L$ab.multiply(this._localMatrix,L$a,this._localMatrix)),this.localMatrix=this._localMatrix,this._worldMatrix=L$a,this._worldUpdate=!1}),L$o(0,L$b,"worldNeedUpdate",function(){return this._worldUpdate}),L$o(0,L$b,"localMatrix",function(){return this._localUpdate&&(this._updateLocalMatrix(),this._localUpdate=!1),this._localMatrix},function(L$a){this._localMatrix=L$a,this._localMatrix.decomposeTransRotScale(this._localPosition,this._localRotation,this._localScale),this._localUpdate=!1,this._onWorldTransform()}),L$o(0,L$b,"dummy",function(){return this._dummy},function(L$a){this._dummy!==L$a&&(this._dummy&&(this._dummy._entity=null),L$a&&(L$a._entity=this),this._dummy=L$a)}),L$o(0,L$b,"localPosition",function(){return this._localPosition},function(L$a){this._localPosition=L$a,this._localUpdate=!0,this._onWorldPositionTransform()}),L$o(0,L$b,"position",function(){if(this._positionUpdate){if(null!=this._parent){var L$a=this._parent.position;L$gb.multiply(this._localPosition,this._parent.scale,L$h._tempVector30),L$gb.transformQuat(L$h._tempVector30,this._parent.rotation,L$h._tempVector30),L$gb.add(L$a,L$h._tempVector30,this._position)}else this._localPosition.cloneTo(this._position);this._positionUpdate=!1}return this._position},function(L$a){if(null!=this._parent){L$gb.subtract(L$a,this._parent.position,this._localPosition);var L$b=this._parent.scale.elements,L$c=L$b[0],L$d=L$b[1],L$e=L$b[2];if(1!==L$c||1!==L$d||1!==L$e){var L$f=L$h._tempVector30,L$g=L$f.elements;L$g[0]=1/L$c,L$g[1]=1/L$d,L$g[2]=1/L$e,L$gb.multiply(this._localPosition,L$f,this._localPosition)}this._parent.rotation.invert(L$h._tempQuaternion0),L$gb.transformQuat(this._localPosition,L$h._tempQuaternion0,this._localPosition)}else L$a.cloneTo(this._localPosition);this.localPosition=this._localPosition,this._position=L$a,this._positionUpdate=!1}),L$o(0,L$b,"localScale",function(){return this._localScale},function(L$a){this._localScale=L$a,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldScaleTransform():this._onWorldPositionScaleTransform()}),L$o(0,L$b,"localRotationEuler",function(){if(this._locaEulerlUpdate){this._localRotation.getYawPitchRoll(L$h._tempVector30);var L$a=L$h._tempVector30.elements,L$b=this._localRotationEuler.elements;L$b[0]=L$a[1]*L$h._angleToRandin,L$b[1]=L$a[0]*L$h._angleToRandin,L$b[2]=L$a[2]*L$h._angleToRandin}return this._localRotationEuler},function(L$a){this._localRotationEuler=L$a,this._locaEulerlUpdate=!1,this._localQuaternionUpdate=!0,this._localUpdate=!0,!this.pivot||0===this.pivot.x&&0===this.pivot.y&&0===this.pivot.z?this._onWorldRotationTransform():this._onWorldPositionRotationTransform()}),L$o(0,L$b,"rotation",function(){return this._rotationUpdate&&(null!=this._parent?L$cb.multiply(this._parent.rotation,this.localRotation,this._rotation):this.localRotation.cloneTo(this._rotation),this._rotationUpdate=!1),this._rotation},function(L$a){null!=this._parent?(this._parent.rotation.invert(L$h._tempQuaternion0),L$cb.multiply(L$a,L$h._tempQuaternion0,this._localRotation)):L$a.cloneTo(this._localRotation),this.localRotation=this._localRotation,this._rotation=L$a,this._rotationUpdate=!1}),L$o(0,L$b,"scale",function(){return this._scaleUpdate&&(null!==this._parent?L$gb.multiply(this._parent.scale,this._localScale,this._scale):this._localScale.cloneTo(this._scale),this._scaleUpdate=!1),this._scale},function(L$a){if(null!==this._parent){var L$b=this._parent.scale.elements,L$c=L$h._tempVector30.elements;L$c[0]=1/L$b[0],L$c[1]=1/L$b[1],L$c[2]=1/L$b[2],L$gb.multiply(L$a,L$h._tempVector30,this._localScale)}else L$a.cloneTo(this._localScale);this.localScale=this._localScale,this._scale=L$a,this._scaleUpdate=!1}),L$o(0,L$b,"rotationEuler",null,function(L$a){L$cb.createFromYawPitchRoll(L$a.y,L$a.x,L$a.z,this._rotation),this.rotation=this._rotation}),L$o(0,L$b,"forward",function(){var L$a=this.worldMatrix.elements;return this._forward.elements[0]=-L$a[8],this._forward.elements[1]=-L$a[9],this._forward.elements[2]=-L$a[10],this._forward}),L$o(0,L$b,"up",function(){var L$a=this.worldMatrix.elements;return this._up.elements[0]=L$a[4],this._up.elements[1]=L$a[5],this._up.elements[2]=L$a[6],this._up}),L$o(0,L$b,"right",function(){var L$a=this.worldMatrix.elements;return this._right.elements[0]=L$a[0],this._right.elements[1]=L$a[1],this._right.elements[2]=L$a[2],this._right}),L$o(0,L$b,"parent",function(){return this._parent},function(L$a){if(this._parent!==L$a){if(this._parent){var L$b=this._parent._childs,L$c=L$b.indexOf(this);L$b.splice(L$c,1)}L$a&&(L$a._childs.push(this),L$a&&this._onWorldTransform()),this._parent=L$a}}),L$l(L$h,["_tempVector30",function(){return this._tempVector30=new L$gb},"_tempVector31",function(){return this._tempVector31=new L$gb},"_tempVector32",function(){return this._tempVector32=new L$gb},"_tempVector33",function(){return this._tempVector33=new L$gb},"_tempQuaternion0",function(){return this._tempQuaternion0=new L$cb},"_tempMatrix0",function(){return this._tempMatrix0=new L$ab},"_angleToRandin",function(){return this._angleToRandin=180/Math.PI}]),L$h}(),L$zb=(function(L$a){function L$b(){this._rotation=0,this._matNeedUpdte=!1,L$b.__super.call(this),this._matrix=new L$ab,this._offset=new L$fb,this._tiling=new L$fb(1,1)}L$n(L$b,"laya.d3.core.TransformUV",L$f);var L$c=L$b.prototype;L$v.imps(L$c,{"laya.d3.core.IClone":!0}),L$c._updateMatrix=function(){L$b._tempOffsetV3.elements[0]=this._offset.x,L$b._tempOffsetV3.elements[1]=this._offset.y,L$cb.createFromYawPitchRoll(0,0,this._rotation,L$b._tempRotationQua),L$b._tempTitlingV3.elements[0]=this._tiling.x,L$b._tempTitlingV3.elements[1]=this._tiling.y,L$ab.createAffineTransformation(L$b._tempOffsetV3,L$b._tempRotationQua,L$b._tempTitlingV3,this._matrix)},L$c.cloneTo=function(L$a){L$a._matrix=this._matrix.clone(),L$a._offset=this._offset.clone(),L$a._rotation=this._rotation,L$a._tiling=this._tiling.clone()},L$c.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$c,"matrix",function(){return this._matNeedUpdte&&(this._updateMatrix(),this._matNeedUpdte=!1),this._matrix}),L$o(0,L$c,"tiling",function(){return this._tiling},function(L$a){this._tiling=L$a,this._matNeedUpdte=!0}),L$o(0,L$c,"offset",function(){return this._offset},function(L$a){this._offset=L$a,this._matNeedUpdte=!0}),L$o(0,L$c,"rotation",function(){return this._rotation},function(L$a){this._rotation=L$a,this._matNeedUpdte=!0}),L$l(L$b,["_tempOffsetV3",function(){return this._tempOffsetV3=new L$gb(0,0,0)},"_tempRotationQua",function(){return this._tempRotationQua=new L$cb},"_tempTitlingV3",function(){return this._tempTitlingV3=new L$gb(1,1,1)}])}(),function(L$c){function L$a(){this.x=NaN,this.y=NaN,this.z=NaN,L$a.__super.call(this),this.x=1,this.y=1,this.z=1,this.randomDirection=!1}L$n(L$a,"laya.d3.core.particleShuriKen.module.shape.BoxShape",L$c);var L$b=L$a.prototype;L$b._getShapeBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=.5*-this.x,L$b[1]=.5*-this.y,L$b[2]=.5*-this.z;var L$c=L$a.max.elements;L$c[0]=.5*this.x,L$c[1]=.5*this.y,L$c[2]=.5*this.z},L$b._getSpeedBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=0,L$b[1]=0,L$b[2]=0;var L$c=L$a.max.elements;L$c[0]=0,L$c[1]=1,L$c[2]=0},L$b.generatePositionAndDirection=function(L$a,L$b,L$c,L$d){var L$e=L$a.elements,L$f=L$b.elements;L$c?(L$c.seed=L$d[16],L$T._randomPointInsideHalfUnitBox(L$a,L$c),L$d[16]=L$c.seed):L$T._randomPointInsideHalfUnitBox(L$a),L$e[0]=this.x*L$e[0],L$e[1]=this.y*L$e[1],L$e[2]=this.z*L$e[2],this.randomDirection?L$c?(L$c.seed=L$d[17],L$T._randomPointUnitSphere(L$b,L$c),L$d[17]=L$c.seed):L$T._randomPointUnitSphere(L$b):(L$f[0]=0,L$f[1]=0,L$f[2]=1)},L$b.cloneTo=function(L$a){L$c.prototype.cloneTo.call(this,L$a);var L$b=L$a;L$b.x=this.x,L$b.y=this.y,L$b.z=this.z,L$b.randomDirection=this.randomDirection}}(L$O),function(L$c){function L$g(){this.radius=NaN,this.arc=NaN,this.emitFromEdge=!1,L$g.__super.call(this),this.radius=1,this.arc=2*Math.PI,this.emitFromEdge=!1,this.randomDirection=!1}L$n(L$g,"laya.d3.core.particleShuriKen.module.shape.CircleShape",L$c);var L$a=L$g.prototype;L$a._getShapeBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=L$b[2]=-this.radius,L$b[1]=0;var L$c=L$a.max.elements;L$c[0]=L$c[2]=this.radius,L$c[1]=0},L$a._getSpeedBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=L$b[1]=-1,L$b[2]=0;var L$c=L$a.max.elements;L$c[0]=L$c[1]=1,L$c[2]=0},L$a.generatePositionAndDirection=function(L$a,L$b,L$c,L$d){var L$e=L$a.elements,L$f=L$g._tempPositionPoint.elements;L$c?(L$c.seed=L$d[16],this.emitFromEdge?L$T._randomPointUnitArcCircle(this.arc,L$g._tempPositionPoint,L$c):L$T._randomPointInsideUnitArcCircle(this.arc,L$g._tempPositionPoint,L$c),L$d[16]=L$c.seed):this.emitFromEdge?L$T._randomPointUnitArcCircle(this.arc,L$g._tempPositionPoint):L$T._randomPointInsideUnitArcCircle(this.arc,L$g._tempPositionPoint),L$e[0]=-L$f[0],L$e[1]=L$f[1],L$e[2]=0,L$gb.scale(L$a,this.radius,L$a),this.randomDirection?L$c?(L$c.seed=L$d[17],L$T._randomPointUnitSphere(L$b,L$c),L$d[17]=L$c.seed):L$T._randomPointUnitSphere(L$b):L$a.cloneTo(L$b)},L$a.cloneTo=function(L$a){L$c.prototype.cloneTo.call(this,L$a);var L$b=L$a;L$b.radius=this.radius,L$b.arc=this.arc,L$b.emitFromEdge=this.emitFromEdge,L$b.randomDirection=this.randomDirection},L$l(L$g,["_tempPositionPoint",function(){return this._tempPositionPoint=new L$fb}])}(L$O),function(L$c){function L$m(){this.angle=NaN,this.radius=NaN,this.length=NaN,this.emitType=0,L$m.__super.call(this),this.angle=25/180*Math.PI,this.radius=1,this.length=5,this.emitType=0,this.randomDirection=!1}L$n(L$m,"laya.d3.core.particleShuriKen.module.shape.ConeShape",L$c);var L$a=L$m.prototype;L$a._getShapeBoundBox=function(L$a){var L$b=this.radius+this.length*Math.sin(this.angle),L$c=this.length*Math.cos(this.angle),L$d=L$a.min.elements;L$d[0]=L$d[1]=-L$b,L$d[2]=0;var L$e=L$a.max.elements;L$e[0]=L$e[1]=L$b,L$e[2]=L$c},L$a._getSpeedBoundBox=function(L$a){var L$b=Math.sin(this.angle),L$c=L$a.min.elements;L$c[0]=L$c[1]=-L$b,L$c[2]=0;var L$d=L$a.max.elements;L$d[0]=L$c[1]=L$b,L$d[2]=1},L$a.generatePositionAndDirection=function(L$a,L$b,L$c,L$d){var L$e,L$f=L$a.elements,L$g=L$b.elements,L$h=L$m._tempPositionPoint.elements,L$i=NaN,L$j=NaN,L$k=Math.cos(this.angle),L$l=Math.sin(this.angle);switch(this.emitType){case 0:L$c?(L$c.seed=L$d[16],L$T._randomPointInsideUnitCircle(L$m._tempPositionPoint,L$c),L$d[16]=L$c.seed):L$T._randomPointInsideUnitCircle(L$m._tempPositionPoint),L$i=L$h[0],L$j=L$h[1],L$f[0]=L$i*this.radius,L$f[1]=L$j*this.radius,L$f[2]=0,this.randomDirection?(L$c?(L$c.seed=L$d[17],L$T._randomPointInsideUnitCircle(L$m._tempDirectionPoint,L$c),L$d[17]=L$c.seed):L$T._randomPointInsideUnitCircle(L$m._tempDirectionPoint),L$e=L$m._tempDirectionPoint.elements,L$g[0]=L$e[0]*L$l,L$g[1]=L$e[1]*L$l):(L$g[0]=L$i*L$l,L$g[1]=L$j*L$l),L$g[2]=L$k;break;case 1:L$c?(L$c.seed=L$d[16],L$T._randomPointUnitCircle(L$m._tempPositionPoint,L$c),L$d[16]=L$c.seed):L$T._randomPointUnitCircle(L$m._tempPositionPoint),L$i=L$h[0],L$j=L$h[1],L$f[0]=L$i*this.radius,L$f[1]=L$j*this.radius,L$f[2]=0,this.randomDirection?(L$c?(L$c.seed=L$d[17],L$T._randomPointInsideUnitCircle(L$m._tempDirectionPoint,L$c),L$d[17]=L$c.seed):L$T._randomPointInsideUnitCircle(L$m._tempDirectionPoint),L$e=L$m._tempDirectionPoint.elements,L$g[0]=L$e[0]*L$l,L$g[1]=L$e[1]*L$l):(L$g[0]=L$i*L$l,L$g[1]=L$j*L$l),L$g[2]=L$k;break;case 2:L$c?(L$c.seed=L$d[16],L$T._randomPointInsideUnitCircle(L$m._tempPositionPoint,L$c)):L$T._randomPointInsideUnitCircle(L$m._tempPositionPoint),L$i=L$h[0],L$j=L$h[1],L$f[0]=L$i*this.radius,L$f[1]=L$j*this.radius,L$g[L$f[2]=0]=L$i*L$l,L$g[1]=L$j*L$l,L$g[2]=L$k,L$gb.normalize(L$b,L$b),L$c?(L$gb.scale(L$b,this.length*L$c.getFloat(),L$b),L$d[16]=L$c.seed):L$gb.scale(L$b,this.length*Math.random(),L$b),L$gb.add(L$a,L$b,L$a),this.randomDirection&&(L$c?(L$c.seed=L$d[17],L$T._randomPointUnitSphere(L$b,L$c),L$d[17]=L$c.seed):L$T._randomPointUnitSphere(L$b));break;case 3:L$c?(L$c.seed=L$d[16],L$T._randomPointUnitCircle(L$m._tempPositionPoint,L$c)):L$T._randomPointUnitCircle(L$m._tempPositionPoint),L$i=L$h[0],L$j=L$h[1],L$f[0]=L$i*this.radius,L$f[1]=L$j*this.radius,L$g[L$f[2]=0]=L$i*L$l,L$g[1]=L$j*L$l,L$g[2]=L$k,L$gb.normalize(L$b,L$b),L$c?(L$gb.scale(L$b,this.length*L$c.getFloat(),L$b),L$d[16]=L$c.seed):L$gb.scale(L$b,this.length*Math.random(),L$b),L$gb.add(L$a,L$b,L$a),this.randomDirection&&(L$c?(L$c.seed=L$d[17],L$T._randomPointUnitSphere(L$b,L$c),L$d[17]=L$c.seed):L$T._randomPointUnitSphere(L$b));break;default:throw new Error("ConeShape:emitType is invalid.")}},L$a.cloneTo=function(L$a){L$c.prototype.cloneTo.call(this,L$a);var L$b=L$a;L$b.angle=this.angle,L$b.radius=this.radius,L$b.length=this.length,L$b.emitType=this.emitType,L$b.randomDirection=this.randomDirection},L$l(L$m,["_tempPositionPoint",function(){return this._tempPositionPoint=new L$fb},"_tempDirectionPoint",function(){return this._tempDirectionPoint=new L$fb}])}(L$O),function(L$c){function L$a(){this.radius=NaN,this.emitFromShell=!1,L$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}L$n(L$a,"laya.d3.core.particleShuriKen.module.shape.HemisphereShape",L$c);var L$b=L$a.prototype;L$b._getShapeBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=L$b[1]=L$b[2]=-this.radius;var L$c=L$a.max.elements;L$c[0]=L$c[1]=this.radius,L$c[2]=0},L$b._getSpeedBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=L$b[1]=-1,L$b[2]=0;var L$c=L$a.max.elements;L$c[0]=L$c[1]=L$c[2]=1},L$b.generatePositionAndDirection=function(L$a,L$b,L$c,L$d){var L$e=L$a.elements;L$c?(L$c.seed=L$d[16],this.emitFromShell?L$T._randomPointUnitSphere(L$a,L$c):L$T._randomPointInsideUnitSphere(L$a,L$c),L$d[16]=L$c.seed):this.emitFromShell?L$T._randomPointUnitSphere(L$a):L$T._randomPointInsideUnitSphere(L$a),L$gb.scale(L$a,this.radius,L$a);var L$f=L$e[2];L$f<0&&(L$e[2]=-1*L$f),this.randomDirection?L$c?(L$c.seed=L$d[17],L$T._randomPointUnitSphere(L$b,L$c),L$d[17]=L$c.seed):L$T._randomPointUnitSphere(L$b):L$a.cloneTo(L$b)},L$b.cloneTo=function(L$a){L$c.prototype.cloneTo.call(this,L$a);var L$b=L$a;L$b.radius=this.radius,L$b.emitFromShell=this.emitFromShell,L$b.randomDirection=this.randomDirection}}(L$O),function(L$c){function L$a(){this.radius=NaN,this.emitFromShell=!1,L$a.__super.call(this),this.radius=1,this.emitFromShell=!1,this.randomDirection=!1}L$n(L$a,"laya.d3.core.particleShuriKen.module.shape.SphereShape",L$c);var L$b=L$a.prototype;L$b._getShapeBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=L$b[1]=L$b[2]=-this.radius;var L$c=L$a.max.elements;L$c[0]=L$c[1]=L$c[2]=this.radius},L$b._getSpeedBoundBox=function(L$a){var L$b=L$a.min.elements;L$b[0]=L$b[1]=L$b[2]=-1;var L$c=L$a.max.elements;L$c[0]=L$c[1]=L$c[2]=1},L$b.generatePositionAndDirection=function(L$a,L$b,L$c,L$d){L$c?(L$c.seed=L$d[16],this.emitFromShell?L$T._randomPointUnitSphere(L$a,L$c):L$T._randomPointInsideUnitSphere(L$a,L$c),L$d[16]=L$c.seed):this.emitFromShell?L$T._randomPointUnitSphere(L$a):L$T._randomPointInsideUnitSphere(L$a),L$gb.scale(L$a,this.radius,L$a),this.randomDirection?L$c?(L$c.seed=L$d[17],L$T._randomPointUnitSphere(L$b,L$c),L$d[17]=L$c.seed):L$T._randomPointUnitSphere(L$b):L$a.cloneTo(L$b)},L$b.cloneTo=function(L$a){L$c.prototype.cloneTo.call(this,L$a);var L$b=L$a;L$b.radius=this.radius,L$b.emitFromShell=this.emitFromShell,L$b.randomDirection=this.randomDirection}}(L$O),function(L$a){function L$b(){this._batchIndexStart=0,this._batchIndexEnd=0,this._skinAnimationDatas=null,L$b.__super.call(this)}return L$n(L$b,"laya.d3.core.render.SubMeshRenderElement",L$W),L$b}()),L$Ab=function(L$a){function L$q(L$a,L$b,L$c,L$d,L$e,L$f){this._name=NaN,this._attributeMap=null,this._renderElementUniformMap=null,this._materialUniformMap=null,this._spriteUniformMap=null,this._cameraUniformMap=null,this._sceneUniformMap=null,this.sharders=null,this._spriteDefineCounter=3,this._spriteInt2name=[],this._spriteName2Int={},this._materialDefineCounter=1,this._materialInt2name=[],this._materialName2Int={},this._conchShader=null,this._name=L$a,this._renderElementUniformMap={},this._materialUniformMap={},this._spriteUniformMap={},this._cameraUniformMap={},this._sceneUniformMap={},this.sharders=[],this._spriteInt2name[L$nb.SHADERDEFINE_RECEIVE_SHADOW]="RECEIVESHADOW",this._spriteInt2name[L$Vb.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV]="SCALEOFFSETLIGHTINGMAPUV",this._spriteInt2name[L$Vb.SAHDERDEFINE_LIGHTMAP]="LIGHTMAP",this._spriteInt2name[0]="BONE",this._materialInt2name[L$Eb.SHADERDEFINE_ALPHATEST]="ALPHATEST";L$q.__super.call(this,L$a,L$b,L$c,null,{}),this._attributeMap=L$d;var L$g;for(L$g in L$e){var L$h=L$e[L$g];switch(L$h[1]){case 0:this._renderElementUniformMap[L$g]=L$h[0];break;case 1:this._materialUniformMap[L$g]=L$h[0];break;case 2:this._spriteUniformMap[L$g]=L$h[0];break;case 3:this._cameraUniformMap[L$g]=L$h[0];break;case 4:this._sceneUniformMap[L$g]=L$h[0];break;default:throw new Error("ShaderCompile3D: period is unkonw.")}}}L$n(L$q,"laya.d3.shader.ShaderCompile3D",L$t);var L$b=L$q.prototype;return L$b._definesToNameDic=function(L$a,L$b){for(var L$c={},L$d=1,L$e=0;L$e<32&&!(L$a<(L$d=1<<L$e));L$e++)if(L$a&L$d){var L$f=L$b[L$d];L$f&&(L$c[L$f]="")}return L$c},L$b.withCompile=function(L$a,L$b,L$c,L$d){var L$e,L$f,L$g;if(L$f=this.sharders[L$a])if(L$g=L$f[L$b]){if(L$e=L$g[L$c])return L$e}else L$g=L$f[L$b]=[];else L$g=(L$f=this.sharders[L$a]=[])[L$b]=[];var L$h,L$i=this._definesToNameDic(L$a,L$q._globalInt2name),L$j=this._definesToNameDic(L$b,this._spriteInt2name),L$k=this._definesToNameDic(L$c,this._materialInt2name),L$l={},L$m="";if(L$i)for(L$h in L$i)L$m+="#define "+L$h+"\n",L$l[L$h]=!0;if(L$j)for(L$h in L$j)L$m+="#define "+L$h+"\n",L$l[L$h]=!0;if(L$k)for(L$h in L$k)L$m+="#define "+L$h+"\n",L$l[L$h]=!0;var L$n=L$Lb.nameKey.getName(this._name)+" compile ("+L$a+","+L$b+","+L$c+")",L$o=this._VS.toscript(L$l,[]),L$p=this._PS.toscript(L$l,[]);L$H.now();if(L$e=L$Lb.create(L$m+L$o.join("\n"),L$m+L$p.join("\n"),this._attributeMap,this._sceneUniformMap,this._cameraUniformMap,this._spriteUniformMap,this._materialUniformMap,this._renderElementUniformMap,L$d,L$n),L$g[L$c]=L$e,laya.d3.shader.ShaderCompile3D.debugMode)L$H.now();return L$e},L$b.precompileShaderWithShaderDefine=function(L$a,L$b,L$c){this.withCompile(L$a,L$b,L$c,!0)},L$b.addMaterialDefines=function(L$a){var L$b=L$a.defines;for(var L$c in L$b){var L$d=L$b[L$c],L$e=parseInt(L$c);this._materialInt2name[L$e]=L$d,this._materialName2Int[L$d]=L$e}},L$b.addSpriteDefines=function(L$a){var L$b=L$a.defines;for(var L$c in L$b){var L$d=L$b[L$c],L$e=parseInt(L$c);this._spriteInt2name[L$e]=L$d,this._spriteName2Int[L$d]=L$e}},L$b.getMaterialDefineByName=function(L$a){return this._materialName2Int[L$a]},L$b.registerMaterialDefine=function(L$a){var L$b=Math.pow(2,this._materialDefineCounter++);return this._materialInt2name[L$b]=L$a,this._materialName2Int[L$a]=L$b},L$b.registerSpriteDefine=function(L$a){var L$b=Math.pow(2,this._spriteDefineCounter++);return this._spriteInt2name[L$b]=L$a,this._spriteName2Int[L$a]=L$b},L$q._globalRegDefine=function(L$a,L$b){L$q._globalInt2name[L$b]=L$a},L$q.add=function(L$a,L$b,L$c,L$d,L$e){return laya.d3.shader.ShaderCompile3D._preCompileShader[L$a]=new L$q(L$a,L$b,L$c,L$d,L$e,L$t.includes)},L$q.get=function(L$a){return laya.d3.shader.ShaderCompile3D._preCompileShader[L$Lb.nameKey.getID(L$a)]},L$q._preCompileShader={},L$q._globalInt2name=[],L$q.debugMode=!1,L$q.SHADERDEFINE_HIGHPRECISION=1,L$q.SHADERDEFINE_FOG=4,L$q.SHADERDEFINE_DIRECTIONLIGHT=8,L$q.SHADERDEFINE_POINTLIGHT=16,L$q.SHADERDEFINE_SPOTLIGHT=32,L$q.SHADERDEFINE_UV0=64,L$q.SHADERDEFINE_COLOR=128,L$q.SHADERDEFINE_UV1=256,L$q.SAHDERDEFINE_DEPTHFOG=131072,L$q}(),L$Bb=function(L$a){function L$o(){L$o.__super.call(this)}L$n(L$o,"laya.d3.graphics.MeshSprite3DStaticBatchManager",L$da);var L$b=L$o.prototype;return L$b._getStaticBatch=function(L$a,L$b,L$c,L$d){var L$e,L$f;return L$f=L$a?L$a.id.toString()+L$c.id.toString()+L$b.id.toString()+L$d.toString():L$c.id.toString()+L$b.id.toString()+L$d.toString(),this._staticBatches[L$f]?L$e=this._staticBatches[L$f]:this._staticBatches[L$f]=L$e=new L$Cb(L$f,this,L$a,L$b,L$c),L$e},L$b._initStaticBatchs=function(L$a){var L$b,L$c;this._initBatchRenderElements.sort(L$o._sortPrepareStaticBatch);for(var L$d,L$e=!1,L$f=0,L$g=0,L$h=this._initBatchRenderElements.length;L$g<L$h;L$g++){var L$i,L$j=this._initBatchRenderElements[L$g],L$k=L$j.renderObj._getVertexBuffer(0);L$j._sprite3D;if(L$c===L$k.vertexDeclaration&&L$b===L$j._material)if(L$e)L$d._addCombineBatchRenderObjTest(L$j)?(L$i=L$j._staticBatch)!==L$d&&(L$i&&L$i._deleteCombineBatchRenderObj(L$j),L$d._addCombineBatchRenderObj(L$j)):(L$e=!1,L$f++);else{var L$l=this._initBatchRenderElements[L$g-1],L$m=L$l.renderObj,L$n=L$j.renderObj;L$e=!(65535<L$m._getVertexBuffer().vertexCount+L$n._getVertexBuffer().vertexCount)&&(L$d=this._getStaticBatch(L$a,L$c,L$b,L$f),(L$i=L$l._staticBatch)!==L$d&&(L$i&&L$i._deleteCombineBatchRenderObj(L$l),L$d._addCombineBatchRenderObj(L$l)),(L$i=L$j._staticBatch)!==L$d&&(L$i&&L$i._deleteCombineBatchRenderObj(L$j),L$d._addCombineBatchRenderObj(L$j)),!0)}else L$e=!1,L$f=0;L$b=L$j._material,L$c=L$k.vertexDeclaration}},L$o._sortPrepareStaticBatch=function(L$a,L$b){var L$c=L$a._render,L$d=L$b._render,L$e=L$c.lightmapIndex-L$d.lightmapIndex;if(0!=L$e)return L$e;var L$f=L$c.receiveShadow-L$d.receiveShadow;if(0!=L$f)return L$f;var L$g=L$a._mainSortID-L$b._mainSortID;return 0==L$g?L$a.renderObj.triangleCount-L$b.renderObj.triangleCount:L$g},L$o}(),L$Cb=function(L$a){function L$f(L$a,L$b,L$c,L$d,L$e){this._batchOwnerIndices=null,this._batchOwners=null,this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=null,this._vertexBuffer=null,this._indexBuffer=null,L$f.__super.call(this,L$a,L$b,L$c),this._batchOwnerIndices=[],this._batchOwners=[],this._needFinishCombine=!1,this._currentCombineVertexCount=0,this._currentCombineIndexCount=0,this._vertexDeclaration=L$d,this._material=L$e}L$n(L$f,"laya.d3.graphics.SubMeshStaticBatch",L$ea);var L$b=L$f.prototype;return L$b._compareBatchRenderElement=function(L$a,L$b){return L$a._batchIndexStart>L$b._batchIndexStart},L$b._addCombineBatchRenderObjTest=function(L$a){var L$b=L$a.renderObj._vertexCount;return!(65535<(0<L$b?this._currentCombineVertexCount+L$b:this._currentCombineVertexCount+L$a.renderObj._getVertexBuffer().vertexCount))},L$b._addCombineBatchRenderObj=function(L$a){var L$b=L$a.renderObj,L$c=L$b._vertexCount;this._initBatchRenderElements.push(L$a),L$a._staticBatch=this,0<L$c?(this._currentCombineIndexCount+=L$b._indexCount,this._currentCombineVertexCount+=L$c):(this._currentCombineIndexCount=this._currentCombineIndexCount+L$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount+L$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0},L$b._deleteCombineBatchRenderObj=function(L$a){var L$b=L$a.renderObj,L$c=this._initBatchRenderElements.indexOf(L$a);if(-1!==L$c){this._initBatchRenderElements.splice(L$c,1),L$a._staticBatch=null;var L$d=L$b._vertexCount;0<L$d?(this._currentCombineIndexCount=this._currentCombineIndexCount-L$b._indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-L$d):(this._currentCombineIndexCount=this._currentCombineIndexCount-L$b._getIndexBuffer().indexCount,this._currentCombineVertexCount=this._currentCombineVertexCount-L$b._getVertexBuffer().vertexCount),this._needFinishCombine=!0}},L$b._finishInit=function(){if(this._needFinishCombine){var L$a=0,L$b=0;0<=this._initBatchRenderElements[0]._sprite3D._render.lightmapIndex?this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration):this._material instanceof laya.d3.core.material.StandardMaterial&&this._material.ambientTexture&&(this._vertexDeclaration=this._getVertexDecLightMap(this._vertexDeclaration));var L$c=new Float32Array(this._vertexDeclaration.vertexStride/4*this._currentCombineVertexCount),L$d=new Uint16Array(this._currentCombineIndexCount);this._vertexBuffer&&(this._vertexBuffer.destroy(),this._indexBuffer.destroy()),this._vertexBuffer=L$Ob.create(this._vertexDeclaration,this._currentCombineVertexCount,35044),this._indexBuffer=L$Nb.create("ushort",this._currentCombineIndexCount,35044);for(var L$e=0,L$f=this._initBatchRenderElements.length;L$e<L$f;L$e++){var L$g=this._initBatchRenderElements[L$e],L$h=L$g.renderObj,L$i=L$h._getStaticBatchBakedVertexs(this._rootOwner?this._rootOwner._transform:null,L$g._sprite3D),L$j=L$h.getIndices(),L$k=L$g._sprite3D.transform._isFrontFaceInvert,L$l=L$a/(this._vertexDeclaration.vertexStride/4)-L$h._vertexStart,L$m=L$b,L$n=L$m+L$j.length;L$g._batchIndexStart=L$m,L$g._batchIndexEnd=L$n,L$d.set(L$j,L$b);var L$o=0;if(L$k)for(L$o=L$m;L$o<L$n;L$o+=3){L$d[L$o]=L$l+L$d[L$o];var L$p=L$d[L$o+1],L$q=L$d[L$o+2];L$d[L$o+1]=L$l+L$q,L$d[L$o+2]=L$l+L$p}else for(L$o=L$m;L$o<L$n;L$o+=3)L$d[L$o]=L$l+L$d[L$o],L$d[L$o+1]=L$l+L$d[L$o+1],L$d[L$o+2]=L$l+L$d[L$o+2];L$b+=L$j.length,L$c.set(L$i,L$a),L$a+=L$i.length}this._vertexBuffer.setData(L$c),this._indexBuffer.setData(L$d),this._needFinishCombine=!1}},L$b._getCombineRenderElementFromPool=function(){return this._combineRenderElementPool[this._combineRenderElementPoolIndex++]||(this._combineRenderElementPool[this._combineRenderElementPoolIndex-1]=new L$zb)},L$b._getRenderElement=function(L$a,L$b,L$c){for(var L$d,L$e,L$f=this._batchRenderElements.length,L$g=!0,L$h=0;L$h<L$f;L$h++){var L$i,L$j,L$k=(L$e=this._batchRenderElements[L$h])._sprite3D._render;if(0!==L$h&&(L$g=(L$i=(L$d=this._batchRenderElements[L$h-1])._sprite3D._render).lightmapIndex!==L$k.lightmapIndex||L$i.receiveShadow!==L$k.receiveShadow||L$d._batchIndexEnd!==L$e._batchIndexStart),L$g){(L$j=this._getCombineRenderElementFromPool()).renderObj=this,L$j._material=this._material,L$j._batchIndexStart=L$e._batchIndexStart,L$j._batchIndexEnd=L$e._batchIndexEnd;var L$l=L$k.lightmapIndex,L$m=L$l+1,L$n=this._batchOwnerIndices[L$m];L$n||(L$n=this._batchOwnerIndices[L$m]=[]);var L$o,L$p=L$n[L$e._render.receiveShadow?1:0];void 0===L$p?(L$n[L$k.receiveShadow?1:0]=this._batchOwners.length,(L$o=new L$Xb(null,"StaticBatchMeshSprite3D"))._scene=L$b,L$o._transform=this._rootOwner?this._rootOwner._transform:null,L$o._render.lightmapIndex=L$l,L$o._render.receiveShadow=L$e._render.receiveShadow,this._batchOwners.push(L$o)):L$o=this._batchOwners[L$p],L$o._render._renderUpdate(L$c),L$j._sprite3D=L$o,L$a.push(L$j)}else L$j._batchIndexEnd=L$e._batchIndexEnd}},L$b._beforeRender=function(L$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},L$b._render=function(L$a){var L$b=L$a.renderElement,L$c=L$b._batchIndexStart,L$d=L$b._batchIndexEnd-L$c;L$F.mainContext.drawElements(4,L$d,5123,2*L$c),L$A.drawCall++,L$A.trianglesFaces+=L$d/3},L$b.dispose=function(){this._batchOwnerIndices=null,this._batchOwners=null,this._vertexDeclaration=null,this._vertexBuffer.destroy(),this._indexBuffer.destroy()},L$b._getVertexBuffer=function(L$a){return void 0===L$a&&(L$a=0),this._vertexBuffer},L$f}(),L$Db=function(L$a){function L$b(){this._componentsMap=null,this._typeComponentsIndices=null,this._components=null,this._scripts=null,L$b.__super.call(this),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[],this._scripts=[]}L$n(L$b,"laya.d3.core.ComponentNode",L$j);var L$c=L$b.prototype;return L$c.addComponent=function(L$a){var L$b,L$c=this._componentsMap.indexOf(L$a);if(-1===L$c)L$b=[],this._componentsMap.push(L$a),this._typeComponentsIndices.push(L$b);else if(L$b=this._typeComponentsIndices[L$c],this._components[L$b[0]].isSingleton)throw new Error("无法单实例创建"+L$a+"组件，"+L$a+"组件已存在！");var L$d=L$e.getInstance(L$a);return L$b.push(this._components.length),this._components.push(L$d),L$d instanceof laya.d3.component.Script&&this._scripts.push(L$d),L$d._initialize(this),L$d},L$c._removeComponent=function(L$a,L$b){var L$c=this._typeComponentsIndices[L$a],L$d=L$c[L$b],L$e=this._components[L$d];this._components.splice(L$d,1),L$e instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(L$e),1),L$c.splice(L$b,1),0===L$c.length&&(this._typeComponentsIndices.splice(L$a,1),this._componentsMap.splice(L$a,1));for(var L$f=0,L$g=this._componentsMap.length;L$f<L$g;L$f++)for(var L$h=(L$c=this._typeComponentsIndices[L$f]).length-1;0<=L$h;L$h--){var L$i=L$c[L$h];if(!(L$d<L$i))break;L$c[L$h]=--L$i}L$e._destroy()},L$c.getComponentByType=function(L$a,L$b){void 0===L$b&&(L$b=0);var L$c=this._componentsMap.indexOf(L$a);return-1===L$c?null:this._components[this._typeComponentsIndices[L$c][L$b]]},L$c.getComponentsByType=function(L$a,L$b){var L$c=this._componentsMap.indexOf(L$a);if(-1!==L$c){var L$d=this._typeComponentsIndices[L$c],L$e=L$d.length;L$b.length=L$e;for(var L$f=0;L$f<L$e;L$f++)L$b[L$f]=this._components[L$d[L$f]]}else L$b.length=0},L$c.getComponentByIndex=function(L$a){return this._components[L$a]},L$c.removeComponentByType=function(L$a,L$b){void 0===L$b&&(L$b=0);var L$c=this._componentsMap.indexOf(L$a);-1!==L$c&&this._removeComponent(L$c,L$b)},L$c.removeComponentsByType=function(L$a){var L$b=this._componentsMap.indexOf(L$a);if(-1!==L$b)for(var L$c=this._typeComponentsIndices[L$b],L$d=0,L$e=L$c.length;L$d<L$e;L$c.length<L$e?L$e--:L$d++)this._removeComponent(L$b,L$d)},L$c.removeAllComponent=function(){for(var L$a=0,L$b=this._componentsMap.length;L$a<L$b;this._componentsMap.length<L$b?L$b--:L$a++)this.removeComponentsByType(this._componentsMap[L$a])},L$c._updateComponents=function(L$a){for(var L$b=0,L$c=this._components.length;L$b<L$c;L$b++){var L$d=this._components[L$b];!L$d.started&&(L$d._start(L$a),L$d.started=!0),L$d.enable&&L$d._update(L$a)}},L$c._lateUpdateComponents=function(L$a){for(var L$b=0;L$b<this._components.length;L$b++){var L$c=this._components[L$b];!L$c.started&&(L$c._start(L$a),L$c.started=!0),L$c.enable&&L$c._lateUpdate(L$a)}},L$c._preRenderUpdateComponents=function(L$a){for(var L$b=0;L$b<this._components.length;L$b++){var L$c=this._components[L$b];!L$c.started&&(L$c._start(L$a),L$c.started=!0),L$c.enable&&L$c._preRenderUpdate(L$a)}},L$c._postRenderUpdateComponents=function(L$a){for(var L$b=0;L$b<this._components.length;L$b++){var L$c=this._components[L$b];!L$c.started&&(L$c._start(L$a),L$c.started=!0),L$c.enable&&L$c._postRenderUpdate(L$a)}},L$b}(),L$Eb=function(L$d){function L$a(){L$a.__super.call(this),this._shaderDefineValue=0,this._disablePublicShaderDefine=0,this._shaderValues=new L$mb,this._values=[],this.renderQueue=2e3,this._alphaTest=!1,this.cull=2,this.blend=0,this.srcBlend=1,this.dstBlend=0,this.srcBlendRGB=1,this.dstBlendRGB=0,this.srcBlendAlpha=1,this.dstBlendAlpha=0,this.blendConstColor=new L$hb(1,1,1,1),this.blendEquation=0,this.blendEquationRGB=0,this.blendEquationAlpha=0,this.depthTest=513,this.depthWrite=!0}L$n(L$a,"laya.d3.core.material.BaseMaterial",L$d);var L$b=L$a.prototype;return L$v.imps(L$b,{"laya.d3.core.IClone":!0}),L$b._addShaderDefine=function(L$a){this._shaderDefineValue|=L$a},L$b._removeShaderDefine=function(L$a){this._shaderDefineValue&=~L$a},L$b._addDisablePublicShaderDefine=function(L$a){this._disablePublicShaderDefine|=L$a},L$b._removeDisablePublicShaderDefine=function(L$a){this._disablePublicShaderDefine&=~L$a},L$b._setBuffer=function(L$a,L$b){this._shaderValues.setValue(L$a,L$b),this._values[L$a]=L$b},L$b._getBuffer=function(L$a){return this._values[L$a]},L$b._setMatrix4x4=function(L$a,L$b){this._shaderValues.setValue(L$a,L$b?L$b.elements:null),this._values[L$a]=L$b},L$b._getMatrix4x4=function(L$a){return this._values[L$a]},L$b._setInt=function(L$a,L$b){this._shaderValues.setValue(L$a,L$b),this._values[L$a]=L$b},L$b._getInt=function(L$a){return this._values[L$a]},L$b._setNumber=function(L$a,L$b){this._shaderValues.setValue(L$a,L$b),this._values[L$a]=L$b},L$b._getNumber=function(L$a){return this._values[L$a]},L$b._setBool=function(L$a,L$b){this._shaderValues.setValue(L$a,L$b),this._values[L$a]=L$b},L$b._getBool=function(L$a){return this._values[L$a]},L$b._setVector2=function(L$a,L$b){this._shaderValues.setValue(L$a,L$b?L$b.elements:null),this._values[L$a]=L$b},L$b._getVector2=function(L$a){return this._values[L$a]},L$b._setColor=function(L$a,L$b){this._shaderValues.setValue(L$a,L$b?L$b.elements:null),this._values[L$a]=L$b},L$b._getColor=function(L$a){return this._values[L$a]},L$b._setTexture=function(L$a,L$b){var L$c=this._values[L$a];this._values[L$a]=L$b,this._shaderValues.setValue(L$a,L$b),0<this.referenceCount&&(L$c&&L$c._removeReference(),L$b&&L$b._addReference())},L$b._getTexture=function(L$a){return this._values[L$a]},L$b._upload=function(){this._shader.uploadMaterialUniforms(this._shaderValues.data)},L$b._getShader=function(L$a,L$b,L$c){var L$d=(L$a|L$b)&~this._disablePublicShaderDefine;return this._shader=this._shaderCompile.withCompile(L$d,L$c,this._shaderDefineValue),this._shader},L$b._setRenderStateBlendDepth=function(){var L$a=L$F.mainContext;switch(L$G.setDepthMask(L$a,this.depthWrite),0===this.depthTest?L$G.setDepthTest(L$a,!1):(L$G.setDepthTest(L$a,!0),L$G.setDepthFunc(L$a,this.depthTest)),this.blend){case 0:L$G.setBlend(L$a,!1);break;case 1:L$G.setBlend(L$a,!0),L$G.setBlendFunc(L$a,this.srcBlend,this.dstBlend);break;case 2:L$G.setBlend(L$a,!0)}},L$b._setRenderStateFrontFace=function(L$a,L$b){var L$c=L$F.mainContext,L$d=0;switch(this.cull){case 0:L$G.setCullFace(L$c,!1);break;case 1:L$G.setCullFace(L$c,!0),L$d=L$a?L$b&&L$b._isFrontFaceInvert?2305:2304:L$b&&L$b._isFrontFaceInvert?2304:2305,L$G.setFrontFace(L$c,L$d);break;case 2:L$G.setCullFace(L$c,!0),L$d=L$a?L$b&&L$b._isFrontFaceInvert?2304:2305:L$b&&L$b._isFrontFaceInvert?2305:2304,L$G.setFrontFace(L$c,L$d)}},L$b.onAsynLoaded=function(L$a,L$b,L$c){var L$d=L$b[0],L$e=L$b[1];switch(L$d.version){case"LAYAMATERIAL:01":var L$f=0,L$g=0,L$h=L$d.props;for(var L$i in L$h)switch(L$i){case"vectors":var L$j=L$h[L$i];for(L$f=0,L$g=L$j.length;L$f<L$g;L$f++){var L$k=L$j[L$f],L$l=L$k.value;switch(L$l.length){case 2:this[L$k.name]=new L$fb(L$l[0],L$l[1]);break;case 3:this[L$k.name]=new L$gb(L$l[0],L$l[1],L$l[2]);break;case 4:this[L$k.name]=new L$hb(L$l[0],L$l[1],L$l[2],L$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}}break;case"textures":var L$m=L$h[L$i];for(L$f=0,L$g=L$m.length;L$f<L$g;L$f++){var L$n=L$m[L$f],L$o=L$n.path;L$o&&(this[L$n.name]=L$r.getRes(L$e[L$o]))}break;case"defines":var L$p=L$h[L$i];for(L$f=0,L$g=L$p.length;L$f<L$g;L$f++){var L$q=this._shaderCompile.getMaterialDefineByName(L$p[L$f]);this._addShaderDefine(L$q)}break;case"cull":case"blend":case"srcBlend":case"dstBlend":case"depthWrite":this[L$i]=L$h[L$i];break;case"renderQueue":switch(L$h[L$i]){case 1:this.renderQueue=2e3;break;case 2:this.renderQueue=3e3}break;default:this[L$i]=L$h[L$i]}break;case"LAYAMATERIAL:02":for(L$i in L$h=L$d.props)switch(L$i){case"vectors":for(L$f=0,L$g=(L$j=L$h[L$i]).length;L$f<L$g;L$f++)switch((L$l=(L$k=L$j[L$f]).value).length){case 2:this[L$k.name]=new L$fb(L$l[0],L$l[1]);break;case 3:this[L$k.name]=new L$gb(L$l[0],L$l[1],L$l[2]);break;case 4:this[L$k.name]=new L$hb(L$l[0],L$l[1],L$l[2],L$l[3]);break;default:throw new Error("BaseMaterial:unkonwn color length.")}break;case"textures":for(L$f=0,L$g=(L$m=L$h[L$i]).length;L$f<L$g;L$f++)(L$o=(L$n=L$m[L$f]).path)&&(this[L$n.name]=L$r.getRes(L$e[L$o]));break;case"defines":for(L$f=0,L$g=(L$p=L$h[L$i]).length;L$f<L$g;L$f++)L$q=this._shaderCompile.getMaterialDefineByName(L$p[L$f]),this._addShaderDefine(L$q);break;default:this[L$i]=L$h[L$i]}break;default:throw new Error("BaseMaterial:unkonwn version.")}this._endLoaded()},L$b._addReference=function(){L$d.prototype._addReference.call(this);for(var L$a=0,L$b=this._values.length;L$a<L$b;L$a++){var L$c=this._values[L$a];L$c&&L$c instanceof laya.d3.resource.BaseTexture&&L$c._addReference()}},L$b._removeReference=function(){L$d.prototype._removeReference.call(this);for(var L$a=0,L$b=this._values.length;L$a<L$b;L$a++){var L$c=this._values[L$a];L$c&&L$c instanceof laya.d3.resource.BaseTexture&&L$c._removeReference()}},L$b.disposeResource=function(){this.blendConstColor=null,this._shader=null,this._shaderValues=null,this._values=null},L$b.setShaderName=function(L$a){var L$b=L$Lb.nameKey.getID(L$a);if(-1===L$b)throw new Error("BaseMaterial: unknown shader name.");this._shaderCompile=L$Ab._preCompileShader[L$b]},L$b.cloneTo=function(L$a){var L$b=L$a;L$b.name=this.name,L$b.cull=this.cull,L$b.blend=this.blend,L$b.srcBlend=this.srcBlend,L$b.dstBlend=this.dstBlend,L$b.srcBlendRGB=this.srcBlendRGB,L$b.dstBlendRGB=this.dstBlendRGB,L$b.srcBlendAlpha=this.srcBlendAlpha,L$b.dstBlendAlpha=this.dstBlendAlpha,this.blendConstColor.cloneTo(L$b.blendConstColor),L$b.blendEquation=this.blendEquation,L$b.blendEquationRGB=this.blendEquationRGB,L$b.blendEquationAlpha=this.blendEquationAlpha,L$b.depthTest=this.depthTest,L$b.depthWrite=this.depthWrite,L$b.renderQueue=this.renderQueue,L$b._shader=this._shader,L$b._disablePublicShaderDefine=this._disablePublicShaderDefine,L$b._shaderDefineValue=this._shaderDefineValue;var L$c,L$d=0,L$e=L$b._shaderValues;L$b._shaderValues.data.length=this._shaderValues.data.length;var L$f=this._values.length,L$g=L$b._values;for(L$d=0,L$c=L$g.length=L$f;L$d<L$c;L$d++){var L$h=this._values[L$d];if(L$h)if("number"==typeof L$h)L$g[L$d]=L$h,L$e.data[L$d]=L$h;else if("number"==typeof L$h&&Math.floor(L$h)==L$h)L$g[L$d]=L$h,L$e.data[L$d]=L$h;else if("boolean"==typeof L$h)L$g[L$d]=L$h,L$e.data[L$d]=L$h;else if(L$h instanceof laya.d3.math.Vector2){var L$i=L$g[L$d]||(L$g[L$d]=new L$fb);L$h.cloneTo(L$i),L$e.data[L$d]=L$i.elements}else if(L$h instanceof laya.d3.math.Vector3){var L$j=L$g[L$d]||(L$g[L$d]=new L$gb);L$h.cloneTo(L$j),L$e.data[L$d]=L$j.elements}else if(L$h instanceof laya.d3.math.Vector4){var L$k=L$g[L$d]||(L$g[L$d]=new L$hb);L$h.cloneTo(L$k),L$e.data[L$d]=L$k.elements}else if(L$h instanceof laya.d3.math.Matrix4x4){var L$l=L$g[L$d]||(L$g[L$d]=new L$ab);L$h.cloneTo(L$l),L$e.data[L$d]=L$l.elements}else L$h instanceof laya.d3.resource.BaseTexture&&(L$g[L$d]=L$h,L$e.data[L$d]=L$h)}},L$b.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$o(0,L$b,"alphaTestValue",function(){return this._getNumber(0)},function(L$a){this._setNumber(0,L$a)}),L$o(0,L$b,"alphaTest",function(){return this._alphaTest},function(L$a){(this._alphaTest=L$a)?this._addShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST):this._removeShaderDefine(laya.d3.core.material.BaseMaterial.SHADERDEFINE_ALPHATEST)}),L$a.__init__=function(){L$a.SHADERDEFINE_ALPHATEST=L$a.shaderDefines.registerDefine("ALPHATEST")},L$a.RENDERQUEUE_OPAQUE=2e3,L$a.RENDERQUEUE_ALPHATEST=2450,L$a.RENDERQUEUE_TRANSPARENT=3e3,L$a.CULL_NONE=0,L$a.CULL_FRONT=1,L$a.CULL_BACK=2,L$a.BLEND_DISABLE=0,L$a.BLEND_ENABLE_ALL=1,L$a.BLEND_ENABLE_SEPERATE=2,L$a.BLENDPARAM_ZERO=0,L$a.BLENDPARAM_ONE=1,L$a.BLENDPARAM_SRC_COLOR=768,L$a.BLENDPARAM_ONE_MINUS_SRC_COLOR=769,L$a.BLENDPARAM_DST_COLOR=774,L$a.BLENDPARAM_ONE_MINUS_DST_COLOR=775,L$a.BLENDPARAM_SRC_ALPHA=770,L$a.BLENDPARAM_ONE_MINUS_SRC_ALPHA=771,L$a.BLENDPARAM_DST_ALPHA=772,L$a.BLENDPARAM_ONE_MINUS_DST_ALPHA=773,L$a.BLENDPARAM_SRC_ALPHA_SATURATE=776,L$a.BLENDEQUATION_ADD=0,L$a.BLENDEQUATION_SUBTRACT=1,L$a.BLENDEQUATION_REVERSE_SUBTRACT=2,L$a.DEPTHTEST_OFF=0,L$a.DEPTHTEST_NEVER=512,L$a.DEPTHTEST_LESS=513,L$a.DEPTHTEST_EQUAL=514,L$a.DEPTHTEST_LEQUAL=515,L$a.DEPTHTEST_GREATER=516,L$a.DEPTHTEST_NOTEQUAL=517,L$a.DEPTHTEST_GEQUAL=518,L$a.DEPTHTEST_ALWAYS=519,L$a.SHADERDEFINE_ALPHATEST=1,L$a.ALPHATESTVALUE=0,L$l(L$a,["shaderDefines",function(){return this.shaderDefines=new L$kb}]),L$a}(L$q),L$Fb=function(L$a){function L$b(){this._type=0,this._width=0,this._height=0,this._size=null,this._repeat=!1,this._mipmap=!1,this._minFifter=0,this._magFifter=0,this._format=0,this._source=null,this._conchTexture=null,this._wrapModeU=0,this._wrapModeV=0,L$b.__super.call(this),this._repeat=!0,this.mipmap=!0,this.minFifter=-1,this.magFifter=-1}L$n(L$b,"laya.d3.resource.BaseTexture",L$q);var L$c=L$b.prototype;return L$o(0,L$c,"width",function(){return this._width}),L$o(0,L$c,"repeat",function(){return this._repeat},function(L$a){if(this._repeat!==L$a&&(this._repeat=L$a,this._source)){var L$b=L$F.mainContext;L$G.bindTexture(L$b,this._type,this._source),L$u.isPOT(this._width,this._height)&&this._repeat?(L$b.texParameteri(this._type,10242,10497),L$b.texParameteri(this._type,10243,10497)):(L$b.texParameteri(this._type,10242,33071),L$b.texParameteri(this._type,10243,33071))}}),L$o(0,L$c,"height",function(){return this._height}),L$o(0,L$c,"magFifter",function(){return this._magFifter},function(L$a){(this._magFifter=L$a)!=this._magFifter&&this._conchTexture&&this._conchTexture.setMaxFifter(L$a)}),L$o(0,L$c,"wrapModeV",function(){return this._wrapModeV}),L$o(0,L$c,"size",function(){return this._size}),L$o(0,L$c,"wrapModeU",function(){return this._wrapModeU}),L$o(0,L$c,"mipmap",function(){return this._mipmap},function(L$a){this._mipmap=L$a,this._mipmap!=L$a&&this._conchTexture&&this._conchTexture.setMipMap(L$a)}),L$o(0,L$c,"minFifter",function(){return this._minFifter},function(L$a){this._minFifter=L$a,this._minFifter!=L$a&&this._conchTexture&&this._conchTexture.setMinFifter(L$a)}),L$o(0,L$c,"format",function(){return this._format}),L$o(0,L$c,"source",function(){return this.activeResource(),this._source}),L$o(0,L$c,"defaulteTexture",function(){return L$Sb.grayTexture}),L$b.WARPMODE_REPEAT=0,L$b.WARPMODE_CLAMP=1,L$b}(),L$Gb=function(L$a){function L$b(){this._subMeshCount=0,this._boundingBox=null,this._boundingSphere=null,this._boundingBoxCorners=null,this._positions=null,L$b.__super.call(this),this._boundingBoxCorners=L$d(8,null)}L$n(L$b,"laya.d3.resource.models.BaseMesh",L$q);var L$c=L$b.prototype;return L$c._getPositions=function(){throw new Error("未Override,请重载该属性！")},L$c._generateBoundingObject=function(){this._boundingSphere=new L$_a(new L$gb,0),L$_a.createfromPoints(this._positions,this._boundingSphere),this._boundingBox=new L$Za(new L$gb,new L$gb),L$Za.createfromPoints(this._positions,this._boundingBox),this._boundingBox.getCorners(this._boundingBoxCorners)},L$c.getRenderElementsCount=function(){throw new Error("未Override,请重载该属性！")},L$c.getRenderElement=function(L$a){throw new Error("未Override,请重载该属性！")},L$o(0,L$c,"subMeshCount",function(){return this._subMeshCount}),L$o(0,L$c,"boundingBox",function(){return this._boundingBox}),L$o(0,L$c,"boundingBoxCorners",function(){return this._boundingBoxCorners}),L$o(0,L$c,"boundingSphere",function(){return this._boundingSphere}),L$b}(),L$Hb=(function(L$a){function L$b(){L$b.__super.call(this)}L$n(L$b,"laya.d3.component.Script",L$tb);var L$c=L$b.prototype;L$c.onTriggerEnter=function(L$a){},L$c.onTriggerExit=function(L$a){},L$c.onTriggerStay=function(L$a){},L$o(0,L$c,"isSingleton",function(){return L$b._isSingleton}),L$b._isSingleton=!1}(),function(L$a){function L$b(L$a){this._owner=null,this._sharedMesh=null,L$b.__super.call(this),this._owner=L$a}L$n(L$b,"laya.d3.core.MeshFilter",L$a);var L$c=L$b.prototype;return L$c._sharedMeshLoaded=function(){this.event("loaded")},L$c._destroy=function(){L$a.prototype._destroy.call(this),this._owner=null,this._sharedMesh&&(this._sharedMesh._removeReference(),this._sharedMesh=null)},L$o(0,L$c,"sharedMesh",function(){return this._sharedMesh},function(L$a){var L$b=this._sharedMesh;L$b&&L$b._removeReference(),(this._sharedMesh=L$a)._addReference(),this.event("meshchanged",[this,L$b,L$a]),L$a.loaded||this._sharedMesh.once("loaded",this,this._sharedMeshLoaded)}),L$o(0,L$c,"_isAsyncLoaded",function(){return this._sharedMesh.loaded}),L$o(0,L$c,"_originalBoundingBoxCorners",function(){return this._sharedMesh.boundingBoxCorners}),L$o(0,L$c,"_originalBoundingSphere",function(){return this._sharedMesh.boundingSphere}),L$o(0,L$c,"_originalBoundingBox",function(){return this._sharedMesh.boundingBox}),L$b}(L$ub)),L$Ib=function(L$a){function L$b(L$a){L$b.__super.call(this,L$a),L$a.meshFilter.on("meshchanged",this,this._onMeshChanged)}L$n(L$b,"laya.d3.core.MeshRender",L$vb);var L$c=L$b.prototype;return L$c._onMeshChanged=function(L$a,L$b,L$c){L$c.loaded?this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0:L$c.once("loaded",this,this._onMeshLoaed)},L$c._onMeshLoaed=function(L$a,L$b){this._boundingSphereNeedChange=this._boundingBoxNeedChange=this._boundingBoxCenterNeedChange=this._octreeNodeNeedChange=!0},L$c._calculateBoundingSphereByInitSphere=function(L$a){var L$b=NaN,L$c=this._owner.transform,L$d=L$c.scale.elements,L$e=Math.abs(L$d[0]),L$f=Math.abs(L$d[1]),L$g=Math.abs(L$d[2]);L$b=L$f<=L$e&&L$g<=L$e?L$e:L$g<=L$f?L$f:L$g,L$gb.transformCoordinate(L$a.center,L$c.worldMatrix,this._boundingSphere.center),this._boundingSphere.radius=L$a.radius*L$b},L$c._calculateBoundBoxByInitCorners=function(L$a){for(var L$b=this._owner.transform.worldMatrix,L$c=0;L$c<8;L$c++)L$gb.transformCoordinate(L$a[L$c],L$b,L$vb._tempBoundBoxCorners[L$c]);L$Za.createfromPoints(L$vb._tempBoundBoxCorners,this._boundingBox)},L$c._calculateBoundingSphere=function(){var L$a=this._owner.meshFilter.sharedMesh;null==L$a||null==L$a.boundingSphere?this._boundingSphere.toDefault():this._calculateBoundingSphereByInitSphere(L$a.boundingSphere)},L$c._calculateBoundingBox=function(){var L$a=this._owner.meshFilter.sharedMesh;null==L$a||null==L$a.boundingBox?this._boundingBox.toDefault():this._calculateBoundBoxByInitCorners(L$a.boundingBoxCorners)},L$c._renderUpdate=function(L$a){var L$b=this._owner.transform;if(L$b){this._setShaderValueMatrix4x4(0,L$b.worldMatrix);var L$c=this._owner.getProjectionViewWorldMatrix(L$a);this._setShaderValueMatrix4x4(1,L$c)}else this._setShaderValueMatrix4x4(0,L$ab.DEFAULT),this._setShaderValueMatrix4x4(1,L$a);return L$rb.debugMode&&this._renderRenderableBoundBox(),!0},L$b}(),L$Jb=function(L$b){function L$d(){this._time=0,this._enableLightCount=3,this._customRenderQueneIndex=11,this.enableLight=!0,L$d.__super.call(this),this._renderState=new L$Y,this._lights=[],this._quenes=[],this._cameraPool=[],this._renderableSprite3Ds=[],this.__loaded=!0,this._lightmaps=[],this._shaderValues=new L$mb,this.parallelSplitShadowMaps=[],this._dynamicBatchManager=new L$ba,this._cullingRenders=[],this._cullingRendersLength=0,this.enableFog=!1,this.fogStart=300,this.fogRange=1e3,this.fogColor=new L$gb(.7,.7,.7),this.ambientColor=new L$gb(.212,.227,.259),L$F.shaderHighPrecision&&this.addShaderDefine(L$Ab.SHADERDEFINE_HIGHPRECISION),this.on("display",this,this._display),this.on("undisplay",this,this._unDisplay),this._componentsMap=[],this._typeComponentsIndices=[],this._components=[]}L$n(L$d,"laya.d3.core.scene.Scene",L$b);var L$a=L$d.prototype;return L$v.imps(L$a,{"laya.webgl.submit.ISubmit":!0,"laya.resource.ICreateResource":!0}),L$a._setUrl=function(L$a){this._url=L$a},L$a._getGroup=function(){return this._group},L$a._setGroup=function(L$a){this._group=L$a},L$a._display=function(){L$v.stage._scenes.push(this),L$v.stage._scenes.sort(L$d._sortScenes);for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++){var L$c=this._childs[L$a];L$c.active&&L$c._activeHierarchy()}},L$a._unDisplay=function(){var L$a=L$v.stage._scenes;L$a.splice(L$a.indexOf(this),1);for(var L$b=0,L$c=this._childs.length;L$b<L$c;L$b++){var L$d=this._childs[L$b];L$d.active&&L$d._inActiveHierarchy()}},L$a._addChild3D=function(L$a){L$a.transform._onWorldTransform(),L$a._setBelongScene(this),this.displayedInStage&&L$a.active&&L$a._activeHierarchy()},L$a._removeChild3D=function(L$a){L$a.transform.parent=null,this.displayedInStage&&L$a.active&&L$a._inActiveHierarchy(),L$a._setUnBelongScene()},L$a.initOctree=function(L$a,L$b,L$c,L$d,L$e){void 0===L$e&&(L$e=6),this.treeSize=new L$gb(L$a,L$b,L$c),this.treeLevel=L$e,this.treeRoot=new L$Z(this,0),this.treeRoot.init(L$d,this.treeSize)},L$a._prepareUpdateToRenderState=function(L$a,L$b){L$b.elapsedTime=this._lastCurrentTime?this.timer.currTimer-this._lastCurrentTime:0,this._lastCurrentTime=this.timer.currTimer,L$b.scene=this},L$a._prepareSceneToRender=function(L$a){var L$b=this._lights.length;if(0<L$b)for(var L$c=0,L$d=0;L$d<L$b&&!(this._lights[L$d]._prepareToScene(L$a)&&++L$c>=this._enableLightCount);L$d++);},L$a._updateChilds=function(L$a){for(var L$b=0,L$c=this._childs.length;L$b<L$c;++L$b)this._childs[L$b]._update(L$a)},L$a._preRenderScene=function(L$a,L$b,L$c){var L$d,L$e=L$b._viewMatrix,L$f=L$b._projectionMatrix,L$g=L$b._projectionViewMatrix,L$h=0,L$i=L$b.camera;for(L$i.useOcclusionCulling?this.treeRoot?L$ca.renderObjectCullingOctree(L$c,this,L$i,L$e,L$f,L$g):L$ca.renderObjectCulling(L$c,this,L$i,L$e,L$f,L$g):L$ca.renderObjectCullingNoBoundFrustum(this,L$i,L$e,L$f,L$g),L$h=0,L$d=this._quenes.length;L$h<L$d;L$h++)this._quenes[L$h]&&this._quenes[L$h]._preRender(L$b)},L$a._clear=function(L$a,L$b){var L$c=L$b._viewport,L$d=L$b.camera,L$e=L$c.x,L$f=L$d.renderTargetSize.height-L$c.y-L$c.height,L$g=L$c.width,L$h=L$c.height;L$a.viewport(L$e,L$f,L$g,L$h);var L$i=256,L$j=L$d.renderTarget;switch(L$d.clearFlag){case 0:var L$k=L$d.clearColor;if(L$k){L$a.enable(3089),L$a.scissor(L$e,L$f,L$g,L$h);var L$l=L$k.elements;L$a.clearColor(L$l[0],L$l[1],L$l[2],L$l[3]),L$i|=16384}if(L$j)switch(L$k||(L$i=16384),L$j.depthStencilFormat){case 33189:L$i|=256;break;case 36168:L$i|=1024;break;case 34041:L$i|=256,L$i|=1024}L$a.clear(L$i),L$k&&L$a.disable(3089);break;case 1:case 2:if(L$j)switch(L$i=16384,L$j.depthStencilFormat){case 33189:L$i|=256;break;case 36168:L$i|=1024;break;case 34041:L$i|=256,L$i|=1024}L$a.clear(L$i);break;case 3:break;default:throw new Error("BaseScene:camera clearFlag invalid.")}},L$a._renderScene=function(L$a,L$b){var L$c,L$d,L$e=L$b.camera,L$f=0;for(L$f=0;L$f<2;L$f++)(L$d=this._quenes[L$f])&&(L$e.renderTarget?L$d._render(L$b,!0):L$d._render(L$b,!1));if(1===L$e.clearFlag){var L$g=L$e.sky;L$g&&(L$G.setCullFace(L$a,!1),L$G.setDepthFunc(L$a,515),L$G.setDepthMask(L$a,!1),L$g._render(L$b),L$G.setDepthFunc(L$a,513),L$G.setDepthMask(L$a,!0))}for(L$f=2,L$c=this._quenes.length;L$f<L$c;L$f++)(L$d=this._quenes[L$f])&&(L$d._sortAlpha(L$b.camera.transform.position),L$e.renderTarget?L$d._render(L$b,!0):L$d._render(L$b,!1))},L$a._set3DRenderConfig=function(L$a){L$a.disable(3042),L$G._blend=!1,L$a.blendFunc(770,771),L$G._sFactor=770,L$G._dFactor=771,L$a.disable(2929),L$G._depthTest=!1,L$a.enable(2884),L$G._cullFace=!0,L$a.depthMask(1),L$G._depthMask=!0,L$a.frontFace(2304),L$G._frontFace=2304},L$a._set2DRenderConfig=function(L$a){L$G.setBlend(L$a,!0),L$G.setBlendFunc(L$a,1,771),L$G.setDepthTest(L$a,!1),L$G.setCullFace(L$a,!1),L$G.setDepthMask(L$a,!0),L$G.setFrontFace(L$a,2305),L$a.viewport(0,0,L$k.width,L$k.height)},L$a._parseCustomProps=function(L$a,L$b,L$c,L$d){var L$e=L$d.customProps.lightmaps,L$f=L$e.length,L$g=this._lightmaps;L$g.length=L$f;for(var L$h=0;L$h<L$f;L$h++)L$g[L$h]=L$r.getRes(L$b[L$e[L$h].replace(".exr",".png")]);this.setlightmaps(L$g);var L$i=L$d.customProps.ambientColor;L$i&&(this.ambientColor=new L$gb(L$i[0],L$i[1],L$i[2]));var L$j=L$d.customProps.fogColor;L$j&&(this.fogColor=new L$gb(L$j[0],L$j[1],L$j[2]))},L$a._addLight=function(L$a){this._lights.indexOf(L$a)<0&&this._lights.push(L$a)},L$a._removeLight=function(L$a){var L$b=this._lights.indexOf(L$a);0<=L$b&&this._lights.splice(L$b,1)},L$a._updateScene=function(){var L$a=this._renderState;this._prepareUpdateToRenderState(L$F.mainContext,L$a),this._updateComponents(L$a),this._updateChilds(L$a),this._lateUpdateComponents(L$a),this._time+=L$a.elapsedTime/1e3,this._shaderValues.setValue(22,this._time)},L$a._updateSceneConch=function(){var L$a=this._renderState;this._prepareUpdateToRenderState(L$F.mainContext,L$a),this._updateComponents(L$a),this._lateUpdateComponents(L$a),this._prepareSceneToRender(L$a);for(var L$b=0,L$c=this._cameraPool.length;L$b<L$c;L$b++){var L$d=this._cameraPool[L$b];(L$a.camera=L$d)._prepareCameraToRender()}},L$a._preRenderShadow=function(L$a,L$b,L$c,L$d,L$e){this.treeRoot?L$ca.renderShadowObjectCullingOctree(this,L$b,L$c,L$d,L$e):L$ca.renderShadowObjectCulling(this,L$b,L$c,L$d,L$e);for(var L$f=0,L$g=L$c.length;L$f<L$g;L$f++)L$c[L$f]&&L$c[L$f]._preRender(L$a)},L$a._renderShadowMap=function(L$a,L$b,L$c){var L$d=this.parallelSplitShadowMaps[0];L$d._calcAllLightCameraInfo(L$c);var L$e,L$f,L$g,L$h=L$d.PSSMNum;if(this._preRenderShadow(L$b,L$d._lightCulling,L$d._shadowQuenes,L$d._lightVPMatrix[0],L$h),this.addShaderDefine(L$nb.SHADERDEFINE_CAST_SHADOW),1<L$h)for(var L$i=0;L$i<L$h;L$i++)L$e=L$d.getRenderTarget(L$i+1),L$d.beginRenderTarget(L$i+1),L$a.clearColor(1,1,1,1),L$a.clear(16640),L$a.viewport(0,0,L$e.width,L$e.height),L$b.camera=L$g=L$d.getLightCamera(L$i),L$g._prepareCameraToRender(),L$g._prepareCameraViewProject(L$g.viewMatrix,L$g.projectionMatrix),L$b._projectionViewMatrix=L$d._lightVPMatrix[L$i+1],(L$f=L$d._shadowQuenes[L$i])._preRender(L$b),L$f._renderShadow(L$b,!1),L$d.endRenderTarget(L$i+1);else L$e=L$d.getRenderTarget(1),L$d.beginRenderTarget(1),L$a.clearColor(1,1,1,1),L$a.clear(16640),L$a.viewport(0,0,L$e.width,L$e.height),L$b.camera=L$g=L$d.getLightCamera(0),L$g._prepareCameraToRender(),L$g._prepareCameraViewProject(L$g.viewMatrix,L$g.projectionMatrix),L$b._projectionViewMatrix=L$d._lightVPMatrix[0],(L$f=L$d._shadowQuenes[0])._preRender(L$b),L$f._renderShadow(L$b,!0),L$d.endRenderTarget(1);this.removeShaderDefine(L$nb.SHADERDEFINE_CAST_SHADOW)},L$a.addTreeNode=function(L$a){this.treeRoot.addTreeNode(L$a)},L$a.removeTreeNode=function(L$a){this.treeSize&&L$a._treeNode&&L$a._treeNode.removeObject(L$a)},L$a.setlightmaps=function(L$a){this._lightmaps=L$a;for(var L$b=0,L$c=this._renderableSprite3Ds.length;L$b<L$c;L$b++)this._renderableSprite3Ds[L$b]._render._applyLightMapParams()},L$a.getlightmaps=function(){return this._lightmaps},L$a.addChildAt=function(L$a,L$b){if(!(L$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.  className="+(L$a&&L$a.__className));if(!L$a||this.destroyed||L$a===this)return L$a;if(L$a.zOrder&&this._set$P("hasZorder",!0),0<=L$b&&L$b<=this._childs.length){if(L$a._parent===this){var L$c=this.getChildIndex(L$a);this._childs.splice(L$c,1),this._childs.splice(L$b,0,L$a),this.conchModel&&(this.conchModel.removeChild(L$a.conchModel),this.conchModel.addChildAt(L$a.conchModel,L$b)),this._childChanged()}else L$a.parent&&L$a.parent.removeChild(L$a),this._childs===L$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(L$b,0,L$a),this.conchModel&&this.conchModel.addChildAt(L$a.conchModel,L$b),(L$a.parent=this)._addChild3D(L$a);return L$a}throw new Error("appendChildAt:The index is out of bounds")},L$a.addChild=function(L$a){if(!(L$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!L$a||this.destroyed||L$a===this)return L$a;if(L$a.zOrder&&this._set$P("hasZorder",!0),L$a._parent===this){var L$b=this.getChildIndex(L$a);L$b!==this._childs.length-1&&(this._childs.splice(L$b,1),this._childs.push(L$a),this.conchModel&&(this.conchModel.removeChild(L$a.conchModel),this.conchModel.addChildAt(L$a.conchModel,this._childs.length-1)),this._childChanged())}else L$a.parent&&L$a.parent.removeChild(L$a),this._childs===L$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(L$a),this.conchModel&&this.conchModel.addChildAt(L$a.conchModel,this._childs.length-1),(L$a.parent=this)._childChanged(),this._addChild3D(L$a);return L$a},L$a.removeChildAt=function(L$a){var L$b=this.getChildAt(L$a);return L$b&&(this._removeChild3D(L$b),this._childs.splice(L$a,1),this.conchModel&&this.conchModel.removeChild(L$b.conchModel),L$b.parent=null),L$b},L$a.removeChildren=function(L$a,L$b){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=2147483647),this._childs&&0<this._childs.length){var L$c=this._childs;if(0===L$a&&L$f<=L$b){var L$d=L$c;this._childs=L$j.ARRAY_EMPTY}else L$d=L$c.splice(L$a,L$b-L$a);for(var L$e=0,L$f=L$d.length;L$e<L$f;L$e++)this._removeChild3D(L$d[L$e]),L$d[L$e].parent=null,this.conchModel&&this.conchModel.removeChild(L$d[L$e].conchModel)}return this},L$a.addFrustumCullingObject=function(L$a){this.treeRoot?this.addTreeNode(L$a):(this._cullingRendersLength===this._cullingRenders.length?this._cullingRenders.push(L$a):this._cullingRenders[this._cullingRendersLength]=L$a,L$a._indexInSceneFrustumCullingObjects=this._cullingRendersLength++)},L$a.removeFrustumCullingObject=function(L$a){if(this.treeRoot)this.removeTreeNode(L$a);else{this._cullingRendersLength--;var L$b=L$a._indexInSceneFrustumCullingObjects;if(L$b!==this._cullingRendersLength){var L$c=this._cullingRenders[this._cullingRendersLength];(this._cullingRenders[L$b]=L$c)._indexInSceneFrustumCullingObjects=L$b,L$a._indexInSceneFrustumCullingObjects=-1}}},L$a.getRenderQueue=function(L$a){return L$a<3e3?this._quenes[1]||(this._quenes[1]=new L$X(this)):this._quenes[2]||(this._quenes[2]=new L$X(this))},L$a.addRenderQuene=function(){this._quenes[this._customRenderQueneIndex++]=new L$X(this)},L$a.addShaderDefine=function(L$a){this._shaderDefineValue|=L$a},L$a.removeShaderDefine=function(L$a){this._shaderDefineValue&=~L$a},L$a.addScript=function(L$a){return this._addComponent(L$a)},L$a.getScriptByType=function(L$a,L$b){return void 0===L$b&&(L$b=0),this._getComponentByType(L$a,L$b)},L$a.getScriptsByType=function(L$a,L$b){this._getComponentsByType(L$a,L$b)},L$a.getScriptByIndex=function(L$a){return this._getComponentByIndex(L$a)},L$a.removeScriptByType=function(L$a,L$b){void 0===L$b&&(L$b=0),this._removeComponentByType(L$a,L$b)},L$a.removeScriptsByType=function(L$a){this._removeComponentByType(L$a)},L$a.removeAllScript=function(){this._removeAllComponent()},L$a.render=function(L$a,L$b,L$c){(L$p._context.ctx._renderKey=0)<this._childs.length&&L$a.addRenderObject(this)},L$a.renderSubmit=function(){var L$a=L$F.mainContext,L$b=this._renderState;this._set3DRenderConfig(L$a),this._prepareSceneToRender(this._renderState);var L$c,L$d=0,L$e=0;if(L$rb.debugMode||L$Z.debugMode)for(L$d=0,L$e=this._cameraPool.length;L$d<L$e;L$d++)L$c=this._cameraPool[L$d],L$rb._debugPhasorSprite.begin(1,L$c),L$c.activeInHierarchy&&L$c._renderCamera(L$a,L$b,this),L$rb._debugPhasorSprite.end();else for(L$d=0,L$e=this._cameraPool.length;L$d<L$e;L$d++)(L$c=this._cameraPool[L$d]).activeInHierarchy&&L$c._renderCamera(L$a,L$b,this);return this._set2DRenderConfig(L$a),1},L$a.onAsynLoaded=function(L$a,L$b,L$c){var L$d=L$b[0];if("Scene"!==L$d.type)throw new Error("Scene: the .lh file root type must be Scene,please use other function to  load  this file.");var L$e=L$b[1];L$qb._createNodeByJson(this,L$d,this,L$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),this.destroyed||(L$b.prototype.destroy.call(this,L$a),this._renderState=null,this._lights=null,this._lightmaps=null,this._renderTargetTexture=null,this._shaderValues=null,this._cullingRenders=null,this._dynamicBatchManager=null,this._quenes=null,this._cameraPool=null,this._renderableSprite3Ds=null,this.treeRoot=null,this.treeSize=null,this.parallelSplitShadowMaps=null,this._typeComponentsIndices=null,this._components=null,L$r.clearRes(this.url),this.loaded||L$rb._cancelLoadByUrl(this.url))},L$a.getRenderType=function(){return 0},L$a.releaseRender=function(){},L$a._addComponent=function(L$a){var L$b,L$c=this._componentsMap.indexOf(L$a);if(-1===L$c)L$b=[],this._componentsMap.push(L$a),this._typeComponentsIndices.push(L$b);else if(L$b=this._typeComponentsIndices[L$c],this._components[L$b[0]].isSingleton)throw new Error("无法单实例创建"+L$a+"组件，"+L$a+"组件已存在！");var L$d=L$e.getInstance(L$a);L$b.push(this._components.length),this._components.push(L$d);return L$d._initialize(this),L$d},L$a._removeComponent=function(L$a,L$b){var L$c=this._typeComponentsIndices[L$a],L$d=L$c[L$b],L$e=this._components[L$d];this._components.splice(L$d,1),L$c.splice(L$b,1),0===L$c.length&&(this._typeComponentsIndices.splice(L$a,1),this._componentsMap.splice(L$a,1));for(var L$f=0,L$g=this._componentsMap.length;L$f<L$g;L$f++)for(var L$h=(L$c=this._typeComponentsIndices[L$f]).length-1;0<=L$h;L$h--){var L$i=L$c[L$h];if(!(L$d<L$i))break;L$c[L$h]=--L$i}L$e._destroy()},L$a._getComponentByType=function(L$a,L$b){void 0===L$b&&(L$b=0);var L$c=this._componentsMap.indexOf(L$a);return-1===L$c?null:this._components[this._typeComponentsIndices[L$c][L$b]]},L$a._getComponentsByType=function(L$a,L$b){var L$c=this._componentsMap.indexOf(L$a);if(-1!==L$c){var L$d=this._typeComponentsIndices[L$c],L$e=L$d.length;L$b.length=L$e;for(var L$f=0;L$f<L$e;L$f++)L$b[L$f]=this._components[L$d[L$f]]}else L$b.length=0},L$a._getComponentByIndex=function(L$a){return this._components[L$a]},L$a._removeComponentByType=function(L$a,L$b){void 0===L$b&&(L$b=0);var L$c=this._componentsMap.indexOf(L$a);-1!==L$c&&this._removeComponent(L$c,L$b)},L$a._removeComponentsByType=function(L$a){var L$b=this._componentsMap.indexOf(L$a);if(-1!==L$b)for(var L$c=this._typeComponentsIndices[L$b],L$d=0,L$e=L$c.length;L$d<L$e;L$c.length<L$e?L$e--:L$d++)this._removeComponent(L$b,L$d)},L$a._removeAllComponent=function(){for(var L$a=0,L$b=this._componentsMap.length;L$a<L$b;this._componentsMap.length<L$b?L$b--:L$a++)this._removeComponentsByType(this._componentsMap[L$a])},L$a._updateComponents=function(L$a){for(var L$b=0,L$c=this._components.length;L$b<L$c;L$b++){var L$d=this._components[L$b];!L$d.started&&(L$d._start(L$a),L$d.started=!0),L$d.enable&&L$d._update(L$a)}},L$a._lateUpdateComponents=function(L$a){for(var L$b=0;L$b<this._components.length;L$b++){var L$c=this._components[L$b];!L$c.started&&(L$c._start(L$a),L$c.started=!0),L$c.enable&&L$c._lateUpdate(L$a)}},L$a._preRenderUpdateComponents=function(L$a){for(var L$b=0;L$b<this._components.length;L$b++){var L$c=this._components[L$b];!L$c.started&&(L$c._start(L$a),L$c.started=!0),L$c.enable&&L$c._preRenderUpdate(L$a)}},L$a._postRenderUpdateComponents=function(L$a){for(var L$b=0;L$b<this._components.length;L$b++){var L$c=this._components[L$b];!L$c.started&&(L$c._start(L$a),L$c.started=!0),L$c.enable&&L$c._postRenderUpdate(L$a)}},L$o(0,L$a,"_loaded",null,function(L$a){this.__loaded=L$a}),L$o(0,L$a,"fogColor",function(){return this._fogColor},function(L$a){this._fogColor=L$a,this._shaderValues.setValue(0,L$a.elements)}),L$o(0,L$a,"enableFog",function(){return this._enableFog},function(L$a){this._enableFog!==L$a&&((this._enableFog=L$a)?(this.addShaderDefine(L$Ab.SHADERDEFINE_FOG),this.removeShaderDefine(L$Ab.SAHDERDEFINE_DEPTHFOG)):this.removeShaderDefine(L$Ab.SHADERDEFINE_FOG))}),L$o(0,L$a,"url",function(){return this._url}),L$o(0,L$a,"loaded",function(){return this.__loaded}),L$o(0,L$a,"enableDepthFog",function(){return this._enableDepthFog},function(L$a){this._enableDepthFog!=L$a&&((this._enableDepthFog=L$a)?(this.addShaderDefine(L$Ab.SAHDERDEFINE_DEPTHFOG),this.removeShaderDefine(L$Ab.SHADERDEFINE_FOG)):this.removeShaderDefine(L$Ab.SAHDERDEFINE_DEPTHFOG))}),L$o(0,L$a,"fogStart",function(){return this._fogStart},function(L$a){this._fogStart=L$a,this._shaderValues.setValue(1,L$a)}),L$o(0,L$a,"fogRange",function(){return this._fogRange},function(L$a){this._fogRange=L$a,this._shaderValues.setValue(2,L$a)}),L$o(0,L$a,"ambientColor",function(){return this._ambientColor},function(L$a){this._ambientColor=L$a,this._shaderValues.setValue(21,L$a.elements)}),L$o(0,L$a,"scene",function(){return this}),L$o(0,L$a,"renderableSprite3Ds",function(){return this._renderableSprite3Ds.slice()}),L$d._sortScenes=function(L$a,L$b){if(L$a.parent!==L$v.stage||L$b.parent!==L$v.stage)return L$a.parent!==L$v.stage&&L$b.parent!==L$v.stage?L$d._sortScenes(L$a.parent,L$b.parent):L$a.parent===L$v.stage?-1:1;var L$c=L$v.stage._childs;return L$c.indexOf(L$a)-L$c.indexOf(L$b)},L$d.load=function(L$a){return L$v.loader.create(L$a,null,null,L$d)},L$d.FOGCOLOR=0,L$d.FOGSTART=1,L$d.FOGRANGE=2,L$d.LIGHTDIRECTION=3,L$d.LIGHTDIRCOLOR=4,L$d.POINTLIGHTPOS=5,L$d.POINTLIGHTRANGE=6,L$d.POINTLIGHTATTENUATION=7,L$d.POINTLIGHTCOLOR=8,L$d.SPOTLIGHTPOS=9,L$d.SPOTLIGHTDIRECTION=10,L$d.SPOTLIGHTSPOT=11,L$d.SPOTLIGHTRANGE=12,L$d.SPOTLIGHTATTENUATION=13,L$d.SPOTLIGHTCOLOR=14,L$d.SHADOWDISTANCE=15,L$d.SHADOWLIGHTVIEWPROJECT=16,L$d.SHADOWMAPPCFOFFSET=17,L$d.SHADOWMAPTEXTURE1=18,L$d.SHADOWMAPTEXTURE2=19,L$d.SHADOWMAPTEXTURE3=20,L$d.AMBIENTCOLOR=21,L$d.TIME=22,L$d}(L$z),L$Kb=function(L$a){function L$b(L$a){L$b.__super.call(this),this.__loaded=!0,this._projectionViewWorldUpdateLoopCount=-1,this._activeInHierarchy=!1,this._projectionViewWorldMatrix=new L$ab,this._shaderValues=new L$mb,this._colliders=[],this._id=++L$b._uniqueIDCounter,this._transform=new L$yb(this),this.name=L$a||"Sprite3D-"+L$b._nameNumberCounter++,this.layer=L$I.currentCreationLayer,this.active=!0}L$n(L$b,"laya.d3.core.Sprite3D",L$Db);var L$c=L$b.prototype;return L$v.imps(L$c,{"laya.d3.core.render.IUpdate":!0,"laya.resource.ICreateResource":!0,"laya.d3.core.IClone":!0}),L$c._setUrl=function(L$a){this._url=L$a},L$c._getGroup=function(){return this._group},L$c._setGroup=function(L$a){this._group=L$a},L$c._addChild3D=function(L$a){L$a.transform.parent=this.transform,this._hierarchyAnimator&&(!L$a._hierarchyAnimator&&L$a._setHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(L$a,!0,[L$a.name])),this._scene&&(L$a._setBelongScene(this._scene),this._activeInHierarchy&&L$a._active&&L$a._activeHierarchy())},L$c._removeChild3D=function(L$a){L$a.transform.parent=null,this._scene&&(this._activeInHierarchy&&L$a._active&&L$a._inActiveHierarchy(),L$a._setUnBelongScene()),this._hierarchyAnimator&&(L$a._hierarchyAnimator==this._hierarchyAnimator&&L$a._clearHierarchyAnimator(this._hierarchyAnimator,null),this._getAnimatorToLinkSprite3D(L$a,!1,[L$a.name]))},L$c._parseBaseCustomProps=function(L$a){var L$b=this.transform.localPosition;L$a.translate?(L$b.fromArray(L$a.translate),L$b.x*=100,L$b.y*=100,L$b.z*=100):L$b.elements.fill(0),this.transform.localPosition=L$b;var L$c=this.transform.localRotation;L$a.rotation?L$c.fromArray(L$a.rotation):L$c.fromArray([0,0,0,-1]),this.transform.localRotation=L$c;var L$d=this.transform.localScale;L$a.scale?L$d.fromArray(L$a.scale):L$d.elements.fill(1),this.transform.localScale=L$d;var L$e=L$a.layer;null!=L$e&&(this.layer=L$I.getLayerByNumber(L$e))},L$c._parseCustomComponent=function(L$a,L$b,L$c){for(var L$d in L$c){var L$e=L$c[L$d];switch(L$d){case"Animator":var L$f=this.addComponent(Animator);if(L$e.avatarPath)L$f.avatar=L$r.getRes(L$b[L$e.avatarPath]);else{var L$g=L$e.avatar;if(L$g){L$f.avatar=L$r.getRes(L$b[L$g.path]);var L$h=L$g.linkSprites;L$h&&L$a.once("hierarchyloaded",this,this._onRootNodeHierarchyLoaded,[L$f,L$h])}}for(var L$i=L$e.clipPaths,L$j=L$i.length,L$k=0;L$k<L$j;L$k++)L$f.addClip(L$r.getRes(L$b[L$i[L$k]]));L$f.clip=L$r.getRes(L$b[L$i[0]]);var L$l=L$e.playOnWake;void 0!==L$l&&(L$f.playOnWake=L$l);break;case"Rigidbody":this.addComponent(Rigidbody);break;case"SphereCollider":var L$m=this.addComponent(SphereCollider);L$m.isTrigger=L$e.isTrigger;var L$n=L$m.center;L$n.fromArray(L$e.center),L$m.center=L$n,L$m.radius=L$e.radius;break;case"BoxCollider":var L$o=this.addComponent(BoxCollider);L$o.isTrigger=L$e.isTrigger,L$o.center.fromArray(L$e.center);var L$p=L$o.size;L$p.fromArray(L$e.size),L$o.size=L$p;break;case"MeshCollider":this.addComponent(MeshCollider)}}},L$c._onRootNodeHierarchyLoaded=function(L$a,L$b){for(var L$c in L$b){for(var L$d=this,L$e=L$b[L$c],L$f=0,L$g=L$e.length;L$f<L$g;L$f++){var L$h=L$e[L$f];if(""===L$h)break;if(!(L$d=L$d.getChildByName(L$h)))break}L$d&&L$a.linkSprite3DToAvatarNode(L$c,L$d)}},L$c._setHierarchyAnimator=function(L$a,L$b){this._changeHierarchyAnimator(L$a);for(var L$c=0,L$d=this._childs.length;L$c<L$d;L$c++){var L$e=this._childs[L$c];L$e._hierarchyAnimator==L$b&&L$e._setHierarchyAnimator(L$a,L$b)}},L$c._clearHierarchyAnimator=function(L$a,L$b){this._changeHierarchyAnimator(L$b);for(var L$c=0,L$d=this._childs.length;L$c<L$d;L$c++){var L$e=this._childs[L$c];L$e._hierarchyAnimator==L$a&&L$e._clearHierarchyAnimator(L$a,L$b)}},L$c._getAnimatorToLinkSprite3D=function(L$a,L$b,L$c){var L$d=this.getComponentByType(Animator);if(L$d&&(L$d.avatar?L$d.avatar._version||L$a._setAnimatorToLinkAvatar(L$d,L$b):L$a._setAnimatorToLinkSprite3DNoAvatar(L$d,L$b,L$c)),this._parent&&this._parent instanceof laya.d3.core.Sprite3D){L$c.unshift(this._parent.name);var L$e=this._parent;L$e._hierarchyAnimator&&L$e._getAnimatorToLinkSprite3D(L$a,L$b,L$c)}},L$c._setAnimatorToLinkSprite3DNoAvatar=function(L$a,L$b,L$c){var L$d=0,L$e=0;for(L$d=0,L$e=L$a.getClipCount();L$d<L$e;L$d++)L$a._handleSpriteOwnersBySprite(L$d,L$b,L$c,this);for(L$d=0,L$e=this._childs.length;L$d<L$e;L$d++){var L$f=this._childs[L$d],L$g=L$c.length;L$c.push(L$f.name),L$f._setAnimatorToLinkSprite3DNoAvatar(L$a,L$b,L$c),L$c.splice(L$g,1)}},L$c._changeHierarchyAnimator=function(L$a){this._hierarchyAnimator=L$a},L$c._isLinkSpriteToAnimationNode=function(L$a,L$b,L$c){var L$d=L$a._avatarNodes.indexOf(L$b),L$e=L$a._cacheSpriteToNodesMap;if(L$c)this._transform.dummy=L$b.transform,L$a._cacheNodesToSpriteMap[L$d]=L$e.length,L$e.push(L$d);else{this._transform.dummy=null;var L$f=L$a._cacheNodesToSpriteMap[L$d];L$a._cacheNodesToSpriteMap[L$d]=null,L$e.splice(L$f,1)}},L$c._setBelongScene=function(L$a){this._scene=L$a;for(var L$b=0,L$c=this._childs.length;L$b<L$c;L$b++)this._childs[L$b]._setBelongScene(L$a)},L$c._setUnBelongScene=function(){this._scene=null;for(var L$a=0,L$b=this._childs.length;L$a<L$b;L$a++)this._childs[L$a]._setUnBelongScene()},L$c._activeHierarchy=function(){var L$a=0,L$b=0;for(this._activeInHierarchy=!0,this._addSelfRenderObjects(),L$a=0,L$b=this._colliders.length;L$a<L$b;L$a++)this._layer._addCollider(this._colliders[L$a]);for(this.event("activeinhierarchychanged",!0),L$a=0,L$b=this._childs.length;L$a<L$b;L$a++){var L$c=this._childs[L$a];L$c._active&&L$c._activeHierarchy()}},L$c._inActiveHierarchy=function(){var L$a=0,L$b=0;for(this._activeInHierarchy=!1,this._clearSelfRenderObjects(),L$a=0,L$b=this._colliders.length;L$a<L$b;L$a++){var L$c=this._colliders[L$a];L$c._clearCollsionMap(),this._layer._removeCollider(L$c)}for(this.event("activeinhierarchychanged",!1),L$a=0,L$b=this._childs.length;L$a<L$b;L$a++){var L$d=this._childs[L$a];L$d._active&&L$d._inActiveHierarchy()}},L$c.addComponent=function(L$a){var L$b,L$c=this._componentsMap.indexOf(L$a);if(-1===L$c)L$b=[],this._componentsMap.push(L$a),this._typeComponentsIndices.push(L$b);else if(L$b=this._typeComponentsIndices[L$c],this._components[L$b[0]].isSingleton)throw new Error("无法单实例创建"+L$a+"组件，"+L$a+"组件已存在！");var L$d=L$e.getInstance(L$a);return L$b.push(this._components.length),this._components.push(L$d),L$d instanceof laya.d3.component.Script&&this._scripts.push(L$d),L$d._initialize(this),L$d},L$c._removeComponent=function(L$a,L$b){var L$c,L$d=0,L$e=this._typeComponentsIndices[L$a],L$f=L$e[L$b],L$g=this._components[L$f];for(L$g instanceof laya.d3.component.Script&&this._scripts.splice(this._scripts.indexOf(L$g),1),L$e.splice(L$b,1),0===L$e.length&&(this._typeComponentsIndices.splice(L$a,1),this._componentsMap.splice(L$a,1)),L$d=0,L$c=this._componentsMap.length;L$d<L$c;L$d++)for(var L$h=(L$e=this._typeComponentsIndices[L$d]).length-1;0<=L$h;L$h--){var L$i=L$e[L$h];if(!(L$f<L$i))break;L$e[L$h]=--L$i}L$g._destroy()},L$c._clearSelfRenderObjects=function(){},L$c._addSelfRenderObjects=function(){},L$c._parseCustomProps=function(L$a,L$b,L$c,L$d){},L$c._updateChilds=function(L$a){var L$b=this._childs.length;if(0!==L$b)for(var L$c=0;L$c<L$b;++L$c)this._childs[L$c]._update(L$a)},L$c._getSortID=function(L$a,L$b){return 1e3*L$b.id+L$a._getVertexBuffer().vertexDeclaration.id},L$c._update=function(L$a){(L$a.owner=this)._activeInHierarchy&&(this._updateComponents(L$a),this._lateUpdateComponents(L$a),L$A.spriteCount++,this._childs.length&&this._updateChilds(L$a))},L$c.getProjectionViewWorldMatrix=function(L$a){return L$ab.multiply(L$a,this.transform.worldMatrix,this._projectionViewWorldMatrix),this._projectionViewWorldMatrix},L$c.loadHierarchy=function(L$a){this.addChild(laya.d3.core.Sprite3D.load(L$a))},L$c.addChildAt=function(L$a,L$b){if(!(L$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!L$a||this.destroyed||L$a===this)return L$a;if(L$a.zOrder&&this._set$P("hasZorder",!0),0<=L$b&&L$b<=this._childs.length){if(L$a._parent===this){var L$c=this.getChildIndex(L$a);this._childs.splice(L$c,1),this._childs.splice(L$b,0,L$a),this.conchModel&&(this.conchModel.removeChild(L$a.conchModel),this.conchModel.addChildAt(L$a.conchModel,L$b)),this._childChanged()}else L$a.parent&&L$a.parent.removeChild(L$a),this._childs===L$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(L$b,0,L$a),this.conchModel&&this.conchModel.addChildAt(L$a.conchModel,L$b),(L$a.parent=this)._addChild3D(L$a);return L$a}throw new Error("appendChildAt:The index is out of bounds")},L$c.addChild=function(L$a){if(!(L$a instanceof laya.d3.core.Sprite3D))throw new Error("Sprite3D:Node type must Sprite3D.");if(!L$a||this.destroyed||L$a===this)return L$a;if(L$a.zOrder&&this._set$P("hasZorder",!0),L$a._parent===this){var L$b=this.getChildIndex(L$a);L$b!==this._childs.length-1&&(this._childs.splice(L$b,1),this._childs.push(L$a),this.conchModel&&(this.conchModel.removeChild(L$a.conchModel),this.conchModel.addChildAt(L$a.conchModel,this._childs.length-1)),this._childChanged())}else L$a.parent&&L$a.parent.removeChild(L$a),this._childs===L$j.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(L$a),this.conchModel&&this.conchModel.addChildAt(L$a.conchModel,this._childs.length-1),(L$a.parent=this)._childChanged(),this._addChild3D(L$a);return L$a},L$c.removeChildAt=function(L$a){var L$b=this.getChildAt(L$a);return L$b&&(this._removeChild3D(L$b),this._childs.splice(L$a,1),this.conchModel&&this.conchModel.removeChild(L$b.conchModel),L$b.parent=null),L$b},L$c.removeChildren=function(L$a,L$b){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=2147483647),this._childs&&0<this._childs.length){var L$c=this._childs;if(0===L$a&&L$f<=L$b){var L$d=L$c;this._childs=L$j.ARRAY_EMPTY}else L$d=L$c.splice(L$a,L$b-L$a);for(var L$e=0,L$f=L$d.length;L$e<L$f;L$e++)this._removeChild3D(L$d[L$e]),L$d[L$e].parent=null,this.conchModel&&this.conchModel.removeChild(L$d[L$e].conchModel)}return this},L$c.onAsynLoaded=function(L$a,L$b,L$c){var L$d=L$b[0];if("Sprite3D"!==L$d.type)throw new Error("Sprite3D: The .lh file root type must be Sprite3D,please use other function to  load  this file.");var L$e=L$b[1];L$qb._createNodeByJson(this,L$d,this,L$e),this.event("hierarchyloaded",[this]),this.__loaded=!0},L$c.cloneTo=function(L$a){if(this.destroyed)throw new Error("Sprite3D: Can't be cloned if the Sprite3D has destroyed.");var L$b=L$a;L$b.name=this.name,L$b._destroyed=this._destroyed,L$b.timer=this.timer,L$b._$P=this._$P,L$b.active=this._active;var L$c=L$b.transform.localPosition;this.transform.localPosition.cloneTo(L$c),L$b.transform.localPosition=L$c;var L$d=L$b.transform.localRotation;this.transform.localRotation.cloneTo(L$d),L$b.transform.localRotation=L$d;var L$e=L$b.transform.localScale;this.transform.localScale.cloneTo(L$e),L$b.transform.localScale=L$e,L$b.isStatic=this.isStatic;var L$f=0,L$g=0;for(L$f=0,L$g=this._componentsMap.length;L$f<L$g;L$f++){var L$h=L$b.addComponent(this._componentsMap[L$f]);this._components[L$f]._cloneTo(L$h)}for(L$f=0,L$g=this._childs.length;L$f<L$g;L$f++)L$b.addChild(this._childs[L$f].clone());var L$i=L$b.getComponentByType(Animator);if(L$i){var L$j=L$i._linkSpritesData;if(L$j)for(var L$k in L$j){for(var L$l=L$j[L$k],L$m=L$b,L$n=0,L$o=L$l.length;L$n<L$o&&(L$m=L$m.getChildByName(L$l[L$n]));L$n++);if(L$m){var L$p=L$i._avatarNodeMap[L$k];L$m._isLinkSpriteToAnimationNode(L$i,L$p,!0)}}}},L$c.clone=function(){var L$a=new this.constructor;return this.cloneTo(L$a),L$a},L$c.destroy=function(L$a){if(void 0===L$a&&(L$a=!0),!this.destroyed){laya.display.Node.prototype.destroy.call(this,L$a);var L$b,L$c=0;for(L$c=0,L$b=this._components.length;L$c<L$b;L$c++)this._components[L$c]._destroy();this._components=null,this._componentsMap=null,this._typeComponentsIndices=null,this._transform=null,this._colliders=null,L$r.clearRes(this.url),this.loaded||L$rb._cancelLoadByUrl(this.url)}},L$c._handleSpriteToAvatar=function(L$a,L$b){L$a._avatarNodes;var L$c=L$a._avatarNodeMap[this.name];L$c&&L$c.name===this.name&&!this._transform.dummy&&this._isLinkSpriteToAnimationNode(L$a,L$c,L$b)},L$c._setAnimatorToLinkAvatar=function(L$a,L$b){this._handleSpriteToAvatar(L$a,L$b);for(var L$c=0,L$d=this._childs.length;L$c<L$d;L$c++){this._childs[L$c]._setAnimatorToLinkAvatar(L$a,L$b)}},L$o(0,L$c,"activeInHierarchy",function(){return this._activeInHierarchy}),L$o(0,L$c,"_loaded",null,function(L$a){this.__loaded=L$a}),L$o(0,L$c,"active",function(){return this._active},function(L$a){this._active!==L$a&&(this._active=L$a,this._parent&&(this._parent===this._scene&&this._parent.displayedInStage||this._parent._activeInHierarchy)&&(L$a?this._activeHierarchy():this._inActiveHierarchy()))}),L$o(0,L$c,"componentsCount",function(){return this._components.length}),L$o(0,L$c,"loaded",function(){return this.__loaded}),L$o(0,L$c,"id",function(){return this._id}),L$o(0,L$c,"url",function(){return this._url}),L$o(0,L$c,"layer",function(){return this._layer},function(L$a){if(this._layer!==L$a){if(!L$a)throw new Error("Layer value can be null.");if(this._activeInHierarchy){var L$b=0,L$c=this._colliders.length;if(this._layer)for(L$b=0;L$b<L$c;L$b++)this._layer._removeCollider(this._colliders[L$b]);for(L$b=0;L$b<L$c;L$b++)L$a._addCollider(this._colliders[L$b])}this._layer=L$a,this.event("layerchanged",L$a)}}),L$o(0,L$c,"scene",function(){return this._scene}),L$o(0,L$c,"transform",function(){return this._transform}),L$b.instantiate=function(L$a,L$b,L$c,L$d,L$e){void 0===L$c&&(L$c=!0);var L$f=L$a.clone();L$b&&L$b.addChild(L$f);var L$g=L$f.transform;if(L$c){var L$h=L$g.worldMatrix;L$a.transform.worldMatrix.cloneTo(L$h),L$g.worldMatrix=L$h}else L$d&&(L$g.position=L$d),L$e&&(L$g.rotation=L$e);return L$f},L$b.load=function(L$a){return L$v.loader.create(L$a,null,null,L$b)},L$b.WORLDMATRIX=0,L$b.MVPMATRIX=1,L$b._uniqueIDCounter=0,L$b._nameNumberCounter=0,L$b}(),L$Lb=function(L$a){function L$k(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){if(this._curActTexIndex=0,this._program=null,this._attributeParams=null,this._uniformParams=null,this._attributeParamsMap=[],this._sceneUniformParamsMap=[],this._cameraUniformParamsMap=[],this._spriteUniformParamsMap=[],this._materialUniformParamsMap=[],this._renderElementUniformParamsMap=[],L$k.__super.call(this),!L$a||!L$b)throw"Shader Error";this._id=++L$k._count,this._vs=L$a,this._ps=L$b,this._attributeMap=L$c,this._sceneUniformMap=L$d,this._cameraUniformMap=L$e,this._spriteUniformMap=L$f,this._materialUniformMap=L$g,this._renderElementUniformMap=L$h,this._precompile=L$i,this._define=L$j,this._precompile&&L$k.extCompileObj&&L$k.extCompileFunc?L$k.extCompileFunc.call(L$k.extCompileObj,L$a,L$b,L$j):this.recreateResource()}L$n(L$k,"laya.d3.shader.Shader3D",L$c);var L$b=L$k.prototype;return L$b.recreateResource=function(){L$H.now();this._compile(),this.completeCreate(),this.memorySize=0},L$b.disposeResource=function(){L$F.mainContext.deleteShader(this._vshader),L$F.mainContext.deleteShader(this._pshader),L$F.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._attributeParams=null,this._uniformParams=null,this.memorySize=0,this._curActTexIndex=0},L$b._compile=function(){if(!L$F.mainContext.isContextLost()&&this._vs&&this._ps&&!this._attributeParams&&!this._uniformParams){this._reCompile=!0,this._attributeParams=[],this._uniformParams=[];var L$a=[this._vs,this._ps],L$b=L$F.mainContext;if(this._program=L$b.createProgram(),this._vshader=L$k._createShader(L$b,L$a[0],35633),this._pshader=L$k._createShader(L$b,L$a[1],35632),L$b.attachShader(this._program,this._vshader),L$b.attachShader(this._program,this._pshader),L$b.linkProgram(this._program),!L$p.isConchApp&&L$Ab.debugMode&&!L$b.getProgramParameter(this._program,35714))throw L$b.getProgramInfoLog(this._program);var L$c,L$d=0,L$e=0,L$f=0;for(L$f=L$p.isConchApp?L$b.getProgramParameterEx(this._vs,this._ps,"",35721):L$b.getProgramParameter(this._program,35721),L$d=0;L$d<L$f;L$d++){var L$g=null;L$c={vartype:"attribute",ivartype:0,attrib:L$g=L$p.isConchApp?L$b.getActiveAttribEx(this._vs,this._ps,"",L$d):L$b.getActiveAttrib(this._program,L$d),location:L$b.getAttribLocation(this._program,L$g.name),name:L$g.name,type:L$g.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._attributeParams.push(L$c)}var L$h=0;for(L$h=L$p.isConchApp?L$b.getProgramParameterEx(this._vs,this._ps,"",35718):L$b.getProgramParameter(this._program,35718),L$d=0;L$d<L$h;L$d++){var L$i=null;L$i=L$p.isConchApp?L$b.getActiveUniformEx(this._vs,this._ps,"",L$d):L$b.getActiveUniform(this._program,L$d),0<(L$c={vartype:"uniform",ivartype:1,attrib:L$g,location:L$b.getUniformLocation(this._program,L$i.name),name:L$i.name,type:L$i.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")&&(L$c.name=L$c.name.substr(0,L$c.name.length-3),L$c.isArray=!0,L$c.location=L$b.getUniformLocation(this._program,L$c.name)),this._uniformParams.push(L$c)}for(L$d=0,L$e=this._attributeParams.length;L$d<L$e;L$d++)(L$c=this._attributeParams[L$d]).indexOfParams=L$d,L$c.index=1,L$c.value=[L$c.location,null],L$c.codename=L$c.name,L$c.name=null!=this._attributeMap[L$c.codename]?this._attributeMap[L$c.codename]:L$c.codename,this._attributeParamsMap.push(L$c.name),this._attributeParamsMap.push(L$c),L$c._this=this,L$c.uploadedValue=[],L$c.fun=this._attribute;for(L$d=0,L$e=this._uniformParams.length;L$d<L$e;L$d++)switch((L$c=this._uniformParams[L$d]).indexOfParams=L$d,L$c.index=1,L$c.value=[L$c.location,null],L$c.codename=L$c.name,null!=this._sceneUniformMap[L$c.codename]?(L$c.name=this._sceneUniformMap[L$c.codename],this._sceneUniformParamsMap.push(L$c.name),this._sceneUniformParamsMap.push(L$c)):null!=this._cameraUniformMap[L$c.codename]?(L$c.name=this._cameraUniformMap[L$c.codename],this._cameraUniformParamsMap.push(L$c.name),this._cameraUniformParamsMap.push(L$c)):null!=this._spriteUniformMap[L$c.codename]?(L$c.name=this._spriteUniformMap[L$c.codename],this._spriteUniformParamsMap.push(L$c.name),this._spriteUniformParamsMap.push(L$c)):null!=this._materialUniformMap[L$c.codename]?(L$c.name=this._materialUniformMap[L$c.codename],this._materialUniformParamsMap.push(L$c.name),this._materialUniformParamsMap.push(L$c)):null!=this._renderElementUniformMap[L$c.codename]?(L$c.name=this._renderElementUniformMap[L$c.codename],this._renderElementUniformParamsMap.push(L$c.name),this._renderElementUniformParamsMap.push(L$c)):console.log("Shader:can't find uinform name:"+L$c.codename+" in shader file."),L$c._this=this,L$c.uploadedValue=[],L$c.type){case 5124:L$c.fun=L$c.isArray?this._uniform1iv:this._uniform1i;break;case 5126:L$c.fun=L$c.isArray?this._uniform1fv:this._uniform1f;break;case 35664:L$c.fun=L$c.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:L$c.fun=L$c.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:L$c.fun=L$c.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:L$c.fun=this._uniform_sampler2D;break;case 35680:L$c.fun=this._uniform_samplerCube;break;case 35676:L$c.fun=this._uniformMatrix4fv;break;case 35670:L$c.fun=this._uniform1i;break;case 35674:L$c.fun=this._uinformMatrix2fv;break;case 35675:L$c.fun=this._uinformMatrix3fv;break;default:throw new Error("compile shader err!")}}},L$b._attribute=function(L$a,L$b){var L$c=L$F.mainContext,L$d=L$h._enableAtributes,L$e=L$a.location;return L$d[L$e]||L$c.enableVertexAttribArray(L$e),L$c.vertexAttribPointer(L$e,L$b[0],L$b[1],L$b[2],L$b[3],L$b[4]),L$d[L$e]=L$h._bindVertexBuffer,1},L$b._uniform1f=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b?(L$F.mainContext.uniform1f(L$a.location,L$c[0]=L$b),1):0},L$b._uniform1fv=function(L$a,L$b){if(L$b.length<4){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$F.mainContext.uniform1fv(L$a.location,L$b),L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3],1):0}return L$F.mainContext.uniform1fv(L$a.location,L$b),1},L$b._uniform_vec2=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]?(L$F.mainContext.uniform2f(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1]),1):0},L$b._uniform_vec2v=function(L$a,L$b){if(L$b.length<2){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$F.mainContext.uniform2fv(L$a.location,L$b),L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3],1):0}return L$F.mainContext.uniform2fv(L$a.location,L$b),1},L$b._uniform_vec3=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]?(L$F.mainContext.uniform3f(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2]),1):0},L$b._uniform_vec3v=function(L$a,L$b){return L$F.mainContext.uniform3fv(L$a.location,L$b),1},L$b._uniform_vec4=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$F.mainContext.uniform4f(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3]),1):0},L$b._uniform_vec4v=function(L$a,L$b){return L$F.mainContext.uniform4fv(L$a.location,L$b),1},L$b._uniformMatrix2fv=function(L$a,L$b){return L$F.mainContext.uniformMatrix2fv(L$a.location,!1,L$b),1},L$b._uniformMatrix3fv=function(L$a,L$b){return L$F.mainContext.uniformMatrix3fv(L$a.location,!1,L$b),1},L$b._uniformMatrix4fv=function(L$a,L$b){return L$F.mainContext.uniformMatrix4fv(L$a.location,!1,L$b),1},L$b._uinformMatrix2fv=function(L$a,L$b){return L$F.mainContext.uniformMatrix2fv(L$a.location,!1,L$b),1},L$b._uinformMatrix3fv=function(L$a,L$b){return L$F.mainContext.uniformMatrix3fv(L$a.location,!1,L$b),1},L$b._uniform1i=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b?(L$F.mainContext.uniform1i(L$a.location,L$c[0]=L$b),1):0},L$b._uniform1iv=function(L$a,L$b){return L$F.mainContext.uniform1iv(L$a.location,L$b),1},L$b._uniform_ivec2=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]?(L$F.mainContext.uniform2i(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1]),1):0},L$b._uniform_ivec2v=function(L$a,L$b){return L$F.mainContext.uniform2iv(L$a.location,L$b),1},L$b._uniform_vec3i=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]?(L$F.mainContext.uniform3i(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2]),1):0},L$b._uniform_vec3vi=function(L$a,L$b){return L$F.mainContext.uniform3iv(L$a.location,L$b),1},L$b._uniform_vec4i=function(L$a,L$b){var L$c=L$a.uploadedValue;return L$c[0]!==L$b[0]||L$c[1]!==L$b[1]||L$c[2]!==L$b[2]||L$c[3]!==L$b[3]?(L$F.mainContext.uniform4i(L$a.location,L$c[0]=L$b[0],L$c[1]=L$b[1],L$c[2]=L$b[2],L$c[3]=L$b[3]),1):0},L$b._uniform_vec4vi=function(L$a,L$b){return L$F.mainContext.uniform4iv(L$a.location,L$b),1},L$b._uniform_sampler2D=function(L$a,L$b){var L$c=L$b.source||L$b.defaulteTexture.source,L$d=L$F.mainContext,L$e=L$a.uploadedValue;if(null!=L$e[0])return L$d.activeTexture(L$k._TEXTURES[L$e[0]]),L$c&&L$G.bindTexture(L$d,3553,L$c),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return L$e[0]=this._curActTexIndex,L$d.uniform1i(L$a.location,this._curActTexIndex),L$d.activeTexture(L$k._TEXTURES[this._curActTexIndex]),L$c&&L$G.bindTexture(L$d,3553,L$c),this._curActTexIndex++,1},L$b._uniform_samplerCube=function(L$a,L$b){var L$c=L$b.source||L$b.defaulteTexture.source,L$d=L$F.mainContext,L$e=L$a.uploadedValue;if(null!=L$e[0])return L$d.activeTexture(L$k._TEXTURES[L$e[0]]),L$c?L$G.bindTexture(L$d,34067,L$c):L$G.bindTexture(L$d,34067,SolidColorTextureCube.grayTexture.source),0;if(7<this._curActTexIndex)throw new Error("Shader3D: shader support textures max count is 8,can't large than it.");return L$e[0]=this._curActTexIndex,L$d.uniform1i(L$a.location,this._curActTexIndex),L$d.activeTexture(L$k._TEXTURES[this._curActTexIndex]),L$c?L$G.bindTexture(L$d,34067,L$c):L$G.bindTexture(L$d,34067,SolidColorTextureCube.grayTexture.source),this._curActTexIndex++,1},L$b._noSetValue=function(L$a){console.log("no....:"+L$a.name)},L$b.bind=function(){return L$c.activeShader=this,(L$c.bindShader=this).activeResource(),L$G.UseProgram(this._program)},L$b.uploadAttributes=function(L$a,L$b){for(var L$c,L$d,L$e=0,L$f=0,L$g=this._attributeParamsMap.length;L$f<L$g;L$f+=2)L$d=this._attributeParamsMap[L$f+1],null!=(L$c=L$a[this._attributeParamsMap[L$f]])&&(L$b&&L$b[L$d.name]&&L$b[L$d.name].bind(),L$e+=L$d.fun.call(this,L$d,L$c));L$A.shaderCall+=L$e},L$b.uploadAttributesX=function(L$a,L$b){for(var L$c,L$d,L$e=0,L$f=0,L$g=this._attributeParamsMap.length;L$f<L$g;L$f+=2)L$d=this._attributeParamsMap[L$f+1],null!=(L$c=L$a[this._attributeParamsMap[L$f]])&&(L$b._bind(),L$e+=L$d.fun.call(this,L$d,L$c));L$A.shaderCall+=L$e},L$b.uploadSceneUniforms=function(L$a){for(var L$b,L$c,L$d=0,L$e=0,L$f=this._sceneUniformParamsMap.length;L$e<L$f;L$e+=2)L$c=this._sceneUniformParamsMap[L$e+1],null!=(L$b=L$a[this._sceneUniformParamsMap[L$e]])&&(L$d+=L$c.fun.call(this,L$c,L$b));L$A.shaderCall+=L$d},L$b.uploadCameraUniforms=function(L$a){for(var L$b,L$c,L$d=0,L$e=0,L$f=this._cameraUniformParamsMap.length;L$e<L$f;L$e+=2)L$c=this._cameraUniformParamsMap[L$e+1],null!=(L$b=L$a[this._cameraUniformParamsMap[L$e]])&&(L$d+=L$c.fun.call(this,L$c,L$b));L$A.shaderCall+=L$d},L$b.uploadSpriteUniforms=function(L$a){for(var L$b,L$c,L$d=0,L$e=0,L$f=this._spriteUniformParamsMap.length;L$e<L$f;L$e+=2)L$c=this._spriteUniformParamsMap[L$e+1],null!=(L$b=L$a[this._spriteUniformParamsMap[L$e]])&&(L$d+=L$c.fun.call(this,L$c,L$b));L$A.shaderCall+=L$d},L$b.uploadMaterialUniforms=function(L$a){for(var L$b,L$c,L$d=0,L$e=0,L$f=this._materialUniformParamsMap.length;L$e<L$f;L$e+=2)L$c=this._materialUniformParamsMap[L$e+1],null!=(L$b=L$a[this._materialUniformParamsMap[L$e]])&&(L$d+=L$c.fun.call(this,L$c,L$b));L$A.shaderCall+=L$d},L$b.uploadRenderElementUniforms=function(L$a){for(var L$b,L$c,L$d=0,L$e=0,L$f=this._renderElementUniformParamsMap.length;L$e<L$f;L$e+=2)L$c=this._renderElementUniformParamsMap[L$e+1],null!=(L$b=L$a[this._renderElementUniformParamsMap[L$e]])&&(L$d+=L$c.fun.call(this,L$c,L$b));L$A.shaderCall+=L$d},L$k.create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){return new L$k(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j)},L$k.addInclude=function(L$a,L$b){L$t.addInclude(L$a,L$b)},L$k._createShader=function(L$a,L$b,L$c){var L$d=L$a.createShader(L$c);if(L$a.shaderSource(L$d,L$b),L$a.compileShader(L$d),L$Ab.debugMode&&!L$a.getShaderParameter(L$d,35713))throw L$a.getShaderInfoLog(L$d);return L$d},L$k.PERIOD_RENDERELEMENT=0,L$k.PERIOD_MATERIAL=1,L$k.PERIOD_SPRITE=2,L$k.PERIOD_CAMERA=3,L$k.PERIOD_SCENE=4,L$k._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,33991],L$k._count=0,L$k._preCompile=!1,L$k.extCompileFunc=null,L$k.extCompileObj=null,L$l(L$k,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new L$B}]),L$k}(),L$Mb=function(L$h){function L$i(){this._transformUV=null,L$i.__super.call(this),this.setShaderName("SIMPLE"),this._setColor(9,new L$gb(.6,.6,.6)),this._setColor(10,new L$gb(1,1,1)),this._setColor(11,new L$hb(1,1,1,8)),this._setColor(12,new L$gb(1,1,1)),this._setColor(7,new L$hb(1,1,1,1)),this._setNumber(0,.5),this._setColor(15,new L$hb(1,1,0,0)),this.renderMode=1}L$n(L$i,"laya.d3.core.material.StandardMaterial",L$h);var L$a=L$i.prototype;return L$a.disableLight=function(){this._addDisablePublicShaderDefine(L$Ab.SHADERDEFINE_POINTLIGHT|L$Ab.SHADERDEFINE_SPOTLIGHT|L$Ab.SHADERDEFINE_DIRECTIONLIGHT)},L$a.disableFog=function(){this._addDisablePublicShaderDefine(L$Ab.SHADERDEFINE_FOG)},L$a.onAsynLoaded=function(L$a,L$b,L$c){var L$d=L$b[0];if(L$d.version)L$h.prototype.onAsynLoaded.call(this,L$a,L$b,L$c);else{var L$e=L$b[1],L$f=L$d.props;for(var L$g in L$f)this[L$g]=L$f[L$g];L$i._parseStandardMaterial(L$e,this,L$d),this._endLoaded()}},L$a.cloneTo=function(L$a){L$h.prototype.cloneTo.call(this,L$a);var L$b=L$a;this._transformUV&&(L$b._transformUV=this._transformUV.clone())},L$o(0,L$a,"ambientColor",function(){return this._getColor(9)},function(L$a){this._setColor(9,L$a)}),L$o(0,L$a,"ambientTexture",function(){return this._getTexture(5)},function(L$a){L$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_AMBIENTMAP),this._setTexture(5,L$a)}),L$o(0,L$a,"renderMode",null,function(L$a){switch(L$a){case 1:this.renderQueue=2e3,this.depthWrite=!0,this.cull=2,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 2:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 3:this.depthWrite=!0,this.cull=2,this.blend=0,this.renderQueue=2e3,this.alphaTest=!0,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 4:this.renderQueue=2e3,this.depthWrite=!0,this.cull=0,this.blend=0,this.alphaTest=!0,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 13:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 14:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 15:this.renderQueue=3e3,this.depthWrite=!0,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 16:this.renderQueue=3e3,this.depthWrite=!0,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 5:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 6:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 7:this.renderQueue=3e3,this.depthWrite=!1,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 8:this.renderQueue=3e3,this.depthWrite=!1,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 9:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 10:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=771,this.alphaTest=!1,this._removeShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 11:this.renderQueue=3e3,this.depthTest=513,this.cull=2,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;case 12:this.renderQueue=3e3,this.depthTest=513,this.cull=0,this.blend=1,this.srcBlend=770,this.dstBlend=1,this.alphaTest=!1,this._addShaderDefine(L$i.SHADERDEFINE_ADDTIVEFOG);break;default:throw new Error("Material:renderMode value error.")}this._conchMaterial&&this._conchMaterial.setRenderMode(L$a)}),L$o(0,L$a,"reflectColor",function(){return this._getColor(12)},function(L$a){this._setColor(12,L$a)}),L$o(0,L$a,"tilingOffset",function(){return this._getColor(15)},function(L$a){if(L$a){var L$b=L$a.elements;1!=L$b[0]||1!=L$b[1]||0!=L$b[2]||0!=L$b[3]?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET)}else this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_TILINGOFFSET);this._setColor(15,L$a)}),L$o(0,L$a,"albedo",function(){return this._getColor(7)},function(L$a){this._setColor(7,L$a)}),L$o(0,L$a,"diffuseColor",function(){return this._getColor(10)},function(L$a){this._setColor(10,L$a)}),L$o(0,L$a,"albedoColor",function(){return this._getColor(7)},function(L$a){this._setColor(7,L$a)}),L$o(0,L$a,"specularColor",function(){return this._getColor(11)},function(L$a){this._setColor(11,L$a)}),L$o(0,L$a,"diffuseTexture",function(){return this._getTexture(1)},function(L$a){L$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_DIFFUSEMAP),this._setTexture(1,L$a)}),L$o(0,L$a,"normalTexture",function(){return this._getTexture(2)},function(L$a){L$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_NORMALMAP),this._setTexture(2,L$a)}),L$o(0,L$a,"specularTexture",function(){return this._getTexture(3)},function(L$a){L$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_SPECULARMAP),this._setTexture(3,L$a)}),L$o(0,L$a,"emissiveTexture",function(){return this._getTexture(4)},function(L$a){L$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_EMISSIVEMAP),this._setTexture(4,L$a)}),L$o(0,L$a,"reflectTexture",function(){return this._getTexture(6)},function(L$a){L$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_REFLECTMAP),this._setTexture(6,L$a)}),L$o(0,L$a,"transformUV",function(){return this._transformUV},function(L$a){this._transformUV=L$a,this._setMatrix4x4(13,L$a.matrix),L$a?this._addShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM):this._removeShaderDefine(laya.d3.core.material.StandardMaterial.SHADERDEFINE_UVTRANSFORM),this._conchMaterial&&this._conchMaterial.setShaderValue(13,L$a.matrix.elements,0)}),L$i.__init__=function(){L$i.SHADERDEFINE_DIFFUSEMAP=L$i.shaderDefines.registerDefine("DIFFUSEMAP"),L$i.SHADERDEFINE_NORMALMAP=L$i.shaderDefines.registerDefine("NORMALMAP"),L$i.SHADERDEFINE_SPECULARMAP=L$i.shaderDefines.registerDefine("SPECULARMAP"),L$i.SHADERDEFINE_EMISSIVEMAP=L$i.shaderDefines.registerDefine("EMISSIVEMAP"),L$i.SHADERDEFINE_AMBIENTMAP=L$i.shaderDefines.registerDefine("AMBIENTMAP"),L$i.SHADERDEFINE_REFLECTMAP=L$i.shaderDefines.registerDefine("REFLECTMAP"),L$i.SHADERDEFINE_UVTRANSFORM=L$i.shaderDefines.registerDefine("UVTRANSFORM"),L$i.SHADERDEFINE_TILINGOFFSET=L$i.shaderDefines.registerDefine("TILINGOFFSET"),L$i.SHADERDEFINE_ADDTIVEFOG=L$i.shaderDefines.registerDefine("ADDTIVEFOG")},L$i.load=function(L$a){return L$v.loader.create(L$a,null,null,L$i)},L$i._parseStandardMaterial=function(L$a,L$b,L$c){var L$d=L$c.customProps,L$e=L$d.ambientColor;L$b.ambientColor=new L$gb(L$e[0],L$e[1],L$e[2]);var L$f=L$d.diffuseColor;L$b.diffuseColor=new L$gb(L$f[0],L$f[1],L$f[2]);var L$g=L$d.specularColor;L$b.specularColor=new L$hb(L$g[0],L$g[1],L$g[2],L$g[3]);var L$h=L$d.reflectColor;L$b.reflectColor=new L$gb(L$h[0],L$h[1],L$h[2]);var L$i=L$d.albedoColor;L$i&&(L$b.albedo=new L$hb(L$i[0],L$i[1],L$i[2],L$i[3]));var L$j=L$d.diffuseTexture.texture2D;L$j&&(L$b.diffuseTexture=L$r.getRes(L$a[L$j]));var L$k=L$d.normalTexture.texture2D;L$k&&(L$b.normalTexture=L$r.getRes(L$a[L$k]));var L$l=L$d.specularTexture.texture2D;L$l&&(L$b.specularTexture=L$r.getRes(L$a[L$l]));var L$m=L$d.emissiveTexture.texture2D;L$m&&(L$b.emissiveTexture=L$r.getRes(L$a[L$m]));var L$n=L$d.ambientTexture.texture2D;L$n&&(L$b.ambientTexture=L$r.getRes(L$a[L$n]));var L$o=L$d.reflectTexture.texture2D;L$o&&(L$b.reflectTexture=L$r.getRes(L$a[L$o]))},L$i.RENDERMODE_OPAQUE=1,L$i.RENDERMODE_OPAQUEDOUBLEFACE=2,L$i.RENDERMODE_CUTOUT=3,L$i.RENDERMODE_CUTOUTDOUBLEFACE=4,L$i.RENDERMODE_TRANSPARENT=13,L$i.RENDERMODE_TRANSPARENTDOUBLEFACE=14,L$i.RENDERMODE_ADDTIVE=15,L$i.RENDERMODE_ADDTIVEDOUBLEFACE=16,L$i.RENDERMODE_DEPTHREAD_TRANSPARENT=5,L$i.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,L$i.RENDERMODE_DEPTHREAD_ADDTIVE=7,L$i.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,L$i.RENDERMODE_NONDEPTH_TRANSPARENT=9,L$i.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,L$i.RENDERMODE_NONDEPTH_ADDTIVE=11,L$i.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,L$i.SHADERDEFINE_DIFFUSEMAP=0,L$i.SHADERDEFINE_NORMALMAP=0,L$i.SHADERDEFINE_SPECULARMAP=0,L$i.SHADERDEFINE_EMISSIVEMAP=0,L$i.SHADERDEFINE_AMBIENTMAP=0,L$i.SHADERDEFINE_REFLECTMAP=0,L$i.SHADERDEFINE_UVTRANSFORM=0,L$i.SHADERDEFINE_TILINGOFFSET=0,L$i.SHADERDEFINE_ADDTIVEFOG=0,L$i.DIFFUSETEXTURE=1,L$i.NORMALTEXTURE=2,L$i.SPECULARTEXTURE=3,L$i.EMISSIVETEXTURE=4,L$i.AMBIENTTEXTURE=5,L$i.REFLECTTEXTURE=6,L$i.ALBEDO=7,L$i.UVANIAGE=8,L$i.MATERIALAMBIENT=9,L$i.MATERIALDIFFUSE=10,L$i.MATERIALSPECULAR=11,L$i.MATERIALREFLECT=12,L$i.UVMATRIX=13,L$i.UVAGE=14,L$i.TILINGOFFSET=15,L$l(L$i,["defaultMaterial",function(){var L$a=new L$i;return L$a.lock=!0,this.defaultMaterial=L$a},"shaderDefines",function(){return this.shaderDefines=new L$kb(L$Eb.shaderDefines)}]),L$i}(L$Eb),L$Nb=function(L$a){function L$g(L$a,L$b,L$c,L$d,L$e){this._indexType=null,this._indexTypeByteCount=0,this._indexCount=0,this._canRead=!1,void 0===L$c&&(L$c=35044),void 0===L$d&&(L$d=!1),L$g.__super.call(this),this._indexType=L$a,this._indexCount=L$b,this._bufferUsage=L$c,this._bufferType=34963,this._canRead=L$d;var L$f;if("ushort"==L$a)this._indexTypeByteCount=2;else{if("ubyte"!=L$a)throw new Error("unidentification index type.");this._indexTypeByteCount=1}L$f=this._indexTypeByteCount*L$b,this._byteLength=L$f,this._bind(),L$h._gl.bufferData(this._bufferType,L$f,this._bufferUsage),this.uri=L$e,L$d?("ushort"==L$a?this._buffer=new Uint16Array(L$b):"ubyte"==L$a&&(this._buffer=new Uint8Array(L$b)),this.memorySize=2*L$f):this.memorySize=L$f}L$n(L$g,"laya.d3.graphics.IndexBuffer3D",L$a);var L$b=L$g.prototype;return L$b.setData=function(L$a,L$b,L$c,L$d){void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=4294967295);var L$e=0;if("ushort"==this._indexType?(L$e=2,0===L$c&&4294967295===L$d||(L$a=new Uint16Array(L$a.buffer,L$c*L$e,L$d))):"ubyte"==this._indexType&&(L$e=1,0===L$c&&4294967295===L$d||(L$a=new Uint8Array(L$a.buffer,L$c*L$e,L$d))),this._bind(),L$h._gl.bufferSubData(this._bufferType,L$b*L$e,L$a),this._canRead)if(0!==L$b||0!==L$c||4294967295!==L$d){var L$f=this._buffer.length-L$b;L$f<L$d&&(L$d=L$f);for(var L$g=0;L$g<L$d;L$g++)this._buffer[L$b+L$g]=L$a[L$g]}else this._buffer=L$a},L$b.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},L$b.disposeResource=function(){L$a.prototype.disposeResource.call(this),this._buffer=null,this.memorySize=0},L$o(0,L$b,"indexType",function(){return this._indexType}),L$o(0,L$b,"indexTypeByteCount",function(){return this._indexTypeByteCount}),L$o(0,L$b,"indexCount",function(){return this._indexCount}),L$o(0,L$b,"canRead",function(){return this._canRead}),L$g.INDEXTYPE_UBYTE="ubyte",L$g.INDEXTYPE_USHORT="ushort",L$g.create=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$c&&(L$c=35044),void 0===L$d&&(L$d=!1),new L$g(L$a,L$b,L$c,L$d,L$e)},L$g}(L$h),L$Ob=function(L$f){function L$g(L$a,L$b,L$c,L$d,L$e){this._vertexDeclaration=null,this._vertexCount=0,this._canRead=!1,void 0===L$d&&(L$d=!1),L$g.__super.call(this),this._vertexDeclaration=L$a,this._vertexCount=L$b,this._bufferUsage=L$c,this._bufferType=34962,this._canRead=L$d,this.uri=L$e,this.memorySize=this._byteLength=this._vertexDeclaration.vertexStride*L$b,this._bind(),L$h._gl.bufferData(this._bufferType,this._byteLength,this._bufferUsage),L$d&&(this._buffer=new Float32Array(this._byteLength/4))}L$n(L$g,"laya.d3.graphics.VertexBuffer3D",L$f);var L$a=L$g.prototype;return L$a.bindWithIndexBuffer=function(L$a){L$a&&L$a._bind(),this._bind()},L$a.setData=function(L$a,L$b,L$c,L$d){if(void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=4294967295),0===L$c&&4294967295===L$d||(L$a=new Float32Array(L$a.buffer,4*L$c,L$d)),this._bind(),L$h._gl.bufferSubData(this._bufferType,4*L$b,L$a),this._canRead)if(0!==L$b||0!==L$c||4294967295!==L$d){var L$e=this._buffer.length-L$b;L$e<L$d&&(L$d=L$e);for(var L$f=0;L$f<L$d;L$f++)this._buffer[L$b+L$f]=L$a[L$f]}else this._buffer=L$a},L$a.getData=function(){if(this._canRead)return this._buffer;throw new Error("Can't read data from VertexBuffer with only write flag!")},L$a.disposeResource=function(){for(var L$a=L$F.mainContext,L$b=this._vertexDeclaration.getVertexElements(),L$c=L$h._enableAtributes,L$d=0,L$e=L$b.length;L$d<L$e;L$d++)L$c[L$d]===this._glBuffer&&(L$a.disableVertexAttribArray(L$d),L$c[L$d]=null);L$f.prototype.disposeResource.call(this),this._buffer=null,this._vertexDeclaration=null,this.memorySize=0},L$o(0,L$a,"vertexDeclaration",function(){return this._vertexDeclaration}),L$o(0,L$a,"vertexCount",function(){return this._vertexCount}),L$o(0,L$a,"canRead",function(){return this._canRead}),L$g.create=function(L$a,L$b,L$c,L$d,L$e){return void 0===L$c&&(L$c=35044),void 0===L$d&&(L$d=!1),new L$g(L$a,L$b,L$c,L$d,L$e)},L$g}(L$h),L$Pb=function(L$a){function L$t(){this.simLodInfo=null,this._src=null,this._buffer=null,this._image=null,this._mipmaps=null,this._recreateLock=!1,this._needReleaseAgain=!1,L$t.__super.call(this),this._type=3553}L$n(L$t,"laya.d3.resource.DataTexture2D",L$Fb);var L$b=L$t.prototype;return L$b.genDebugMipmaps=function(){var L$a=[];return L$a.push(new Uint8Array(new Uint32Array(131072).fill(4278190335).buffer)),L$a.push(new Uint8Array(new Uint32Array(32768).fill(4278223103).buffer)),L$a.push(new Uint8Array(new Uint32Array(8192).fill(4278255615).buffer)),L$a.push(new Uint8Array(new Uint32Array(2048).fill(4278255360).buffer)),L$a.push(new Uint8Array(new Uint32Array(512).fill(4286595072).buffer)),L$a.push(new Uint8Array(new Uint32Array(128).fill(4294901760).buffer)),L$a.push(new Uint8Array(new Uint32Array(32).fill(4294901888).buffer)),L$a.push(new Uint8Array(new Uint32Array(8).fill(0).buffer)),L$a.push(new Uint8Array(new Uint32Array(2).fill(4286611584).buffer)),L$a.push(new Uint8Array(new Uint32Array(1).fill(4294967295).buffer)),L$a},L$b._onTextureLoaded=function(L$a){},L$b._createWebGlTexture=function(){if(!this._buffer&&!this._image&&!this._mipmaps)throw"create GLTextur err:no data";var L$a=L$F.mainContext,L$b=this._source=L$a.createTexture(),L$c=this._width,L$d=this._height,L$e=L$G.curBindTexTarget,L$f=L$G.curBindTexValue,L$g=!1;if(L$G.bindTexture(L$a,this._type,L$b),this._mipmaps){if(laya.d3.resource.DataTexture2D.lodasatlas){var L$h=0;L$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null);for(var L$i=0;L$i<this._mipmaps.length;L$i++){if(this._mipmaps[L$i].byteLength!=L$j*L$k*4)throw"mipmap size error  level:"+L$i;L$a.texSubImage2D(this._type,0,L$t.simLodRect[L$h++],L$t.simLodRect[L$h++],L$t.simLodRect[L$h++],L$t.simLodRect[L$h++],6408,5121,new Uint8Array(this._mipmaps[L$i]))}this.minFifter=9729,this.magFifter=9729}else{var L$j=this._width,L$k=this._height;for(L$h=0,L$a.texImage2D(this._type,0,6408,this._width,this._height,0,6408,5121,null),L$i=0;L$i<this._mipmaps.length;L$i++){if(this._mipmaps[L$i].byteLength!=L$j*L$k*4)throw"mipmap size error  level:"+L$i;L$a.texImage2D(this._type,L$i,6408,L$j,L$k,0,6408,5121,new Uint8Array(this._mipmaps[L$i])),(L$j/=2)<1&&(L$j=1),(L$k/=2)<1&&(L$k=1),this.minFifter=9987,this.magFifter=9729}}this.mipmap=!1}else if(this._image)6407==this._format&&L$a.pixelStorei(L$a.UNPACK_ALIGNMENT,1),L$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);else if(this._buffer){var L$l=0,L$m=!1,L$n=!1;this._buffer.byteLength==4*L$c*L$d?(L$l=6408,L$m=!0):this._buffer.byteLength==3*L$c*L$d?(L$l=6407,L$n=!0):L$l=this._format,L$m||L$n?(this._buffer instanceof Uint8Array||(this._buffer=new Uint8Array(this._buffer)),L$n&&L$a.pixelStorei(L$a.UNPACK_ALIGNMENT,1),L$a.texImage2D(this._type,0,L$l,L$c,L$d,0,L$l,5121,this._buffer)):L$a&&L$l==L$a.ALPHA?(L$a.texImage2D(3553,0,L$l,L$c,L$d,0,L$l,L$a.UNSIGNED_BYTE,this._buffer),L$g=!0):0!=L$l&&(L$a.compressedTexImage2D(3553,0,L$l,L$c,L$d,0,this._buffer),L$g=!0)}var L$o=this._minFifter,L$p=this._magFifter,L$q=0==this._wrapModeU?10497:33071,L$r=0==this._wrapModeV?10497:33071,L$s=L$u.isPOT(L$c,L$d);L$s?(this._mipmap||this._mipmaps?-1!==L$o||(L$o=9987):-1!==L$o||(L$o=9729),-1!==L$p||(L$p=9729),L$a.texParameteri(this._type,10241,L$o),L$a.texParameteri(this._type,10240,L$p),L$a.texParameteri(this._type,10242,L$q),L$a.texParameteri(this._type,10243,L$r),this._mipmap&&L$a.generateMipmap(this._type)):(-1!==L$o||(L$o=9729),-1!==L$p||(L$p=9729),L$a.texParameteri(this._type,10241,L$o),L$a.texParameteri(this._type,10240,L$p),L$a.texParameteri(this._type,10242,33071),L$a.texParameteri(this._type,10243,33071)),L$e&&L$f&&L$G.bindTexture(L$a,L$e,L$f),this.memorySize=L$g?this._buffer.length:L$s?L$c*L$d*4*(1+1/3):L$c*L$d*4,this.src&&0<this.src.length&&(this._buffer=null,this._image=null),this._recreateLock=!1},L$b.recreateResource=function(){if(this._buffer||this._image||null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._buffer||this._image||this._mipmaps){if(this._recreateLock)return;this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0}},L$b.onAsynLoaded=function(L$a,L$b,L$c){var L$d;L$c&&(L$d=L$c[0].call(this,L$b)),L$d&&(this._width=L$d.width,this._height=L$d.height,this._buffer=L$d.data),this._src=L$a,this._size=new L$pb(this._width,this._height),this._conchTexture?alert("怎么给runtime传递datatexture数据"):this.activeResource(),this._endLoaded()},L$b.getPixels=function(){return new Uint8Array(this._buffer)},L$b.disposeResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(L$F.mainContext.deleteTexture(this._source),this._source=null,this._buffer=null,this._image=null,this.memorySize=0)},L$o(0,L$b,"src",function(){return this._src}),L$t.create=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){if(void 0===L$d&&(L$d=9729),void 0===L$e&&(L$e=9729),void 0===L$f&&(L$f=!0),!L$a||L$a.byteLength<L$b*L$c*4)throw"DataTexture2D create error";var L$h=new L$t;return L$h.uri=L$g,L$h._buffer=L$a,L$h._width=L$b,L$h._height=L$c,L$h._mipmap=L$f,L$h._magFifter=L$d,L$h._minFifter=L$e,L$h._size=new L$pb(L$h._width,L$h._height),L$h._conchTexture?alert("怎么给runtime传递datatexture数据"):L$h.activeResource(),L$h},L$t.load=function(L$a,L$b,L$c,L$d,L$e){if(void 0===L$b&&(L$b=0),void 0===L$c&&(L$c=0),void 0===L$d&&(L$d=9729),void 0===L$e&&(L$e=9729),"mipmaps"===L$C.getFileExtension(L$a)){var L$f=L$v.loader.create(L$a,null,null,L$t,[function(L$a){this._mipmaps=[];var L$b=new Uint32Array(L$a);this._width=L$b[0];var L$c=512;if(laya.d3.resource.DataTexture2D.lodasatlas&&(this._width*=2,L$c=1024),this._width!=L$c)throw"现在只支持512x256的环境贴图。当前的是"+L$b[0];this._height=L$b[1];for(var L$d=laya.d3.resource.DataTexture2D.lodasatlas?this._width/2:this._width,L$e=this._height,L$f=8;;){var L$g=L$d*L$e*4;if(L$f+L$g>L$a.byteLength)throw"load mipmaps data size error ";var L$h=new Uint8Array(L$a,L$f,L$g);if(this._mipmaps.push(L$h),L$f+=L$g,1==L$d&&1==L$e)break;(L$d/=2)<1&&(L$d=1),(L$e/=2)<1&&(L$e=1)}return null}]);if(laya.d3.resource.DataTexture2D.lodasatlas){L$f.simLodInfo=new Float32Array(40);for(var L$g=0;L$g<L$f.simLodInfo.length;)L$f.simLodInfo[L$g]=(L$t.simLodRect[L$g]+.5)/1024,L$g++,L$f.simLodInfo[L$g]=(L$t.simLodRect[L$g]+.5)/256,L$g++,L$f.simLodInfo[L$g]=Math.max(L$t.simLodRect[L$g]-1,.1)/1024,L$g++,L$f.simLodInfo[L$g]=Math.max(L$t.simLodRect[L$g]-1.5,.1)/256,L$g++}return L$f}if("number"==typeof L$b)return L$v.loader.create(L$a,null,null,L$t,[function(L$a){return this._width=L$b,this._height=L$c,this._buffer=L$a,null}]);if("function"==typeof L$b)return L$v.loader.create(L$a,null,null,L$t,[L$b]);throw new Error("unknown params.")},L$t.lodasatlas=!1,L$l(L$t,["simLodRect",function(){return this.simLodRect=new Uint32Array([0,0,512,256,512,0,256,128,768,0,128,64,896,0,64,32,960,0,32,16,992,0,16,8,1008,0,8,4,1016,0,4,2,1020,0,2,1,1022,0,1,1])}]),L$t}(),L$Qb=function(L$a){function L$b(){this._numberVertices=0,this._numberIndices=0,this._vertexBuffer=null,this._indexBuffer=null,L$b.__super.call(this)}L$n(L$b,"laya.d3.resource.models.PrimitiveMesh",L$Gb);var L$c=L$b.prototype;return L$v.imps(L$c,{"laya.d3.core.render.IRenderable":!0}),L$c._getVertexBuffer=function(L$a){return void 0===L$a&&(L$a=0),0===L$a?this._vertexBuffer:null},L$c._getVertexBuffers=function(){return null},L$c._getIndexBuffer=function(){return this._indexBuffer},L$c._getPositions=function(){var L$a,L$b=[],L$c=this._vertexBuffer.vertexDeclaration.getVertexElements(),L$d=0;for(L$d=0;L$d<L$c.length;L$d++){var L$e=L$c[L$d];if("vector3"===L$e.elementFormat&&0===L$e.elementUsage){L$a=L$e;break}}var L$f=this._vertexBuffer.getData();for(L$d=0;L$d<L$f.length;L$d+=this._vertexBuffer.vertexDeclaration.vertexStride/4){var L$g=L$d+L$a.offset/4,L$h=new L$gb(L$f[L$g+0],L$f[L$g+1],L$f[L$g+2]);L$b.push(L$h)}return L$b},L$c.getRenderElement=function(L$a){return this},L$c.getRenderElementsCount=function(){return 1},L$c.disposeResource=function(){this._vertexBuffer&&(this._vertexBuffer._removeReference(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer._removeReference(),this._indexBuffer=null),this.memorySize=0},L$c._beforeRender=function(L$a){return this._vertexBuffer._bind(),this._indexBuffer._bind(),!0},L$c._render=function(L$a){L$F.mainContext.drawElements(4,this._numberIndices,5123,0),L$A.drawCall++,L$A.trianglesFaces+=this._numberIndices/3},L$o(0,L$c,"_vertexBufferCount",function(){return 1}),L$o(0,L$c,"triangleCount",function(){return this._indexBuffer.indexCount/3}),L$b}(),L$Rb=function(L$a){function L$b(){this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null,this._skinnedDatas=null,L$b.__super.call(this),this._subMeshes=[],this._materials=[],this._vertexBuffers=[]}L$n(L$b,"laya.d3.resource.models.Mesh",L$Gb);var L$c=L$b.prototype;return L$c._getPositions=function(){var L$a,L$b,L$c,L$d,L$e,L$f=[],L$g=0,L$h=0,L$i=0;if(0!==this._vertexBuffers.length){var L$j=this._vertexBuffers.length;for(L$g=0;L$g<L$j;L$g++){for(L$c=(L$a=this._vertexBuffers[L$g]).vertexDeclaration.getVertexElements(),L$h=0;L$h<L$c.length;L$h++)if("vector3"===(L$d=L$c[L$h]).elementFormat&&0===L$d.elementUsage){L$b=L$d;break}for(L$e=L$a.getData(),L$h=0;L$h<L$e.length;L$h+=L$a.vertexDeclaration.vertexStride/4)L$i=L$h+L$b.offset/4,L$f.push(new L$gb(L$e[L$i+0],L$e[L$i+1],L$e[L$i+2]))}}else{var L$k=this._subMeshes.length;for(L$g=0;L$g<L$k;L$g++){for(L$c=(L$a=this._subMeshes[L$g]._getVertexBuffer()).vertexDeclaration.getVertexElements(),L$h=0;L$h<L$c.length;L$h++)if("vector3"===(L$d=L$c[L$h]).elementFormat&&0===L$d.elementUsage){L$b=L$d;break}for(L$e=L$a.getData(),L$h=0;L$h<L$e.length;L$h+=L$a.vertexDeclaration.vertexStride/4)L$i=L$h+L$b.offset/4,L$f.push(new L$gb(L$e[L$i+0],L$e[L$i+1],L$e[L$i+2]))}}return L$f},L$c._setSubMeshes=function(L$a){this._subMeshes=L$a,this._subMeshCount=L$a.length;for(var L$b=0;L$b<this._subMeshCount;L$b++)L$a[L$b]._indexInMesh=L$b;this._positions=this._getPositions(),this._generateBoundingObject()},L$c.onAsynLoaded=function(L$a,L$b,L$c){var L$d=L$b[0],L$e=L$b[1];L$Ya.read(L$d,this,this._materials,this._subMeshes,L$e),this.completeCreate(),this._endLoaded()},L$c.getSubMesh=function(L$a){return this._subMeshes[L$a]},L$c.getSubMeshCount=function(){return this._subMeshes.length},L$c.getRenderElementsCount=function(){return this._subMeshes.length},L$c.getRenderElement=function(L$a){return this._subMeshes[L$a]},L$c.disposeResource=function(){for(var L$a=0;L$a<this._subMeshes.length;L$a++)this._subMeshes[L$a].dispose();this._materials=null,this._subMeshes=null,this._vertexBuffers=null,this._indexBuffer=null,this._boneNames=null,this._inverseBindPoses=null},L$o(0,L$c,"materials",function(){return this._materials.slice()}),L$o(0,L$c,"InverseAbsoluteBindPoses",function(){return this._inverseBindPoses}),L$b.load=function(L$a){return L$v.loader.create(L$a,null,null,L$b)},L$b}(),L$Sb=(function(L$a){function L$j(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i){this._alreadyResolved=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._frameBuffer=null,this._depthStencilBuffer=null,void 0===L$c&&(L$c=6408),void 0===L$d&&(L$d=5121),void 0===L$e&&(L$e=33189),void 0===L$f&&(L$f=!1),void 0===L$g&&(L$g=!1),void 0===L$h&&(L$h=-1),void 0===L$i&&(L$i=-1),L$j.__super.call(this),this._type=3553,this._width=L$a,this._height=L$b,this._size=new L$pb(L$a,L$b),this._surfaceFormat=L$c,this._surfaceType=L$d,this._depthStencilFormat=L$e,L$p.isConchWebGL&&34041===this._depthStencilFormat&&(this._depthStencilFormat=33189),this._mipmap=L$f,this._repeat=L$g,this._minFifter=L$h,this._magFifter=L$i,this.activeResource(),this._alreadyResolved=!0}L$n(L$j,"laya.d3.resource.RenderTexture",L$Fb);var L$b=L$j.prototype;L$b.recreateResource=function(){var L$a=L$F.mainContext;this._frameBuffer=L$a.createFramebuffer(),this._source=L$a.createTexture();var L$b=L$G.curBindTexTarget,L$c=L$G.curBindTexValue;L$G.bindTexture(L$a,this._type,this._source),L$a.texImage2D(this._type,0,6408,this._width,this._height,0,this._surfaceFormat,this._surfaceType,null);var L$d=this._minFifter,L$e=this._magFifter,L$f=this._repeat?10497:33071;if(L$u.isPOT(this._width,this._height)?(this._mipmap?-1!==L$d||(L$d=9987):-1!==L$d||(L$d=9729),-1!==L$e||(L$e=9729),L$a.texParameteri(this._type,10241,L$d),L$a.texParameteri(this._type,10240,L$e),L$a.texParameteri(this._type,10242,L$f),L$a.texParameteri(this._type,10243,L$f),this._mipmap&&L$a.generateMipmap(this._type)):(-1!==L$d||(L$d=9729),-1!==L$e||(L$e=9729),L$a.texParameteri(this._type,10241,L$d),L$a.texParameteri(this._type,10240,L$e),L$a.texParameteri(this._type,10242,33071),L$a.texParameteri(this._type,10243,33071)),L$b&&L$c&&L$G.bindTexture(L$a,L$b,L$c),L$a.bindFramebuffer(36160,this._frameBuffer),this._depthStencilFormat)switch(this._depthStencilBuffer=L$a.createRenderbuffer(),L$a.bindRenderbuffer(36161,this._depthStencilBuffer),L$a.renderbufferStorage(36161,this._depthStencilFormat,this._width,this._height),L$a.bindRenderbuffer(36161,null),this._depthStencilFormat){case 33189:L$a.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:L$a.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:L$a.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}L$a.framebufferTexture2D(36160,36064,3553,this._source,0),L$a.bindFramebuffer(36160,null),this.memorySize=this._width*this._height*4,this.completeCreate()},L$b.start=function(){L$F.mainContext.bindFramebuffer(36160,this.frameBuffer),(L$j._currentRenderTarget=this)._alreadyResolved=!1},L$b.end=function(){L$F.mainContext.bindFramebuffer(36160,null),L$j._currentRenderTarget=null,this._alreadyResolved=!0},L$b.getData=function(L$a,L$b,L$c,L$d){var L$e=L$F.mainContext;if(L$e.bindFramebuffer(36160,this._frameBuffer),!(36053===L$e.checkFramebufferStatus(36160)))return L$e.bindFramebuffer(36160,null),null;var L$f=new Uint8Array(this._width*this._height*4);return L$e.readPixels(L$a,L$b,L$c,L$d,this._surfaceFormat,this._surfaceType,L$f),L$e.bindFramebuffer(36160,null),L$f},L$b.disposeResource=function(){if(this._frameBuffer){var L$a=L$F.mainContext;L$a.deleteTexture(this._source),L$a.deleteFramebuffer(this._frameBuffer),L$a.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0}},L$o(0,L$b,"surfaceFormat",function(){return this._surfaceFormat}),L$o(0,L$b,"surfaceType",function(){return this._surfaceType}),L$o(0,L$b,"depthStencilFormat",function(){return this._depthStencilFormat}),L$o(0,L$b,"source",function(){return this._alreadyResolved?L$v.superGet(L$Fb,this,"source"):null}),L$o(0,L$b,"depthStencilBuffer",function(){return this._depthStencilBuffer}),L$o(0,L$b,"frameBuffer",function(){return this._frameBuffer}),L$j._currentRenderTarget=null}(),function(L$a){function L$b(L$a){this._color=null,this._pixels=null,L$b.__super.call(this),this._type=3553,this._width=1,this._height=1,this._size=new L$pb(this.width,this.height),this._color=L$a,this._pixels=new Uint8Array([255*L$a.x,255*L$a.y,255*L$a.z,255*L$a.w]),this.uri="SolidColorTexture2D_"+this.id}L$n(L$b,"laya.d3.resource.SolidColorTexture2D",L$Fb);var L$c=L$b.prototype;return L$c._createWebGlTexture=function(){var L$a=L$F.mainContext,L$b=this._source=L$a.createTexture(),L$c=this._width,L$d=this._height,L$e=L$G.curBindTexTarget,L$f=L$G.curBindTexValue;L$G.bindTexture(L$a,this._type,L$b),L$a.texImage2D(this._type,0,6408,L$c,L$d,0,6408,5121,this._pixels);var L$g=this._minFifter,L$h=this._magFifter,L$i=this._repeat?10497:33071,L$j=L$u.isPOT(L$c,L$d);L$j?(this._mipmap?-1!==L$g||(L$g=9987):-1!==L$g||(L$g=9729),-1!==L$h||(L$h=9729),L$a.texParameteri(this._type,10241,L$g),L$a.texParameteri(this._type,10240,L$h),L$a.texParameteri(this._type,10242,L$i),L$a.texParameteri(this._type,10243,L$i),this._mipmap&&L$a.generateMipmap(this._type)):(-1!==L$g||(L$g=9729),-1!==L$h||(L$h=9729),L$a.texParameteri(this._type,10241,L$g),L$a.texParameteri(this._type,10240,L$h),L$a.texParameteri(this._type,10242,33071),L$a.texParameteri(this._type,10243,33071)),L$e&&L$f&&L$G.bindTexture(L$a,L$e,L$f),this.memorySize=L$j?L$c*L$d*4*(1+1/3):L$c*L$d*4},L$c.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},L$c.disposeResource=function(){this._source&&(L$F.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},L$l(L$b,["magentaTexture",function(){var L$a=new L$b(new L$hb(1,0,1,1));return L$a.lock=!0,this.magentaTexture=L$a},"grayTexture",function(){var L$a=new L$b(new L$hb(.5,.5,.5,1));return L$a.lock=!0,this.grayTexture=L$a}]),L$b}()),L$Tb=function(L$a){function L$e(L$a,L$b,L$c,L$d){this._canRead=!1,this._image=null,this._pixels=null,void 0===L$a&&(L$a=!1),void 0===L$b&&(L$b=!0),void 0===L$c&&(L$c=6408),void 0===L$d&&(L$d=!0),L$e.__super.call(this),this._type=3553,this._repeat=L$b,this._canRead=L$a,this._format=L$c,this._mipmap=L$d}L$n(L$e,"laya.d3.resource.Texture2D",L$Fb);var L$b=L$e.prototype;return L$b._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var L$a=L$F.mainContext,L$b=this._source=L$a.createTexture(),L$c=this._width,L$d=this._height,L$e=L$G.curBindTexTarget,L$f=L$G.curBindTexValue;switch(L$G.bindTexture(L$a,this._type,L$b),this._format){case 6407:case 6408:this._canRead?L$a.texImage2D(this._type,0,this._format,L$c,L$d,0,this._format,5121,this._pixels):this._image&&this._image instanceof laya.webgl.resource.WebGLImage?L$a.texImage2D(this._type,0,this._image._format,L$c,L$d,0,this._image._format,5121,this._image.atlasSource):L$a.texImage2D(this._type,0,this._format,this._format,5121,this._image);break;case L$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:L$a.compressedTexImage2D(this._type,0,this._format,this._width,this._height,0,this._image);break;default:console.error("收到其他的纹理类型：",this._format)}var L$g=this._minFifter,L$h=this._magFifter,L$i=this._repeat?10497:33071,L$j=0==this._wrapModeU?10497:33071,L$k=0==this._wrapModeV?10497:33071,L$l=L$u.isPOT(L$c,L$d);L$l?(this._mipmap?-1!==L$g||(L$g=9987):-1!==L$g||(L$g=9729),-1!==L$h||(L$h=9729),L$a.texParameteri(this._type,10241,L$g),L$a.texParameteri(this._type,10240,L$h),L$a.texParameteri(this._type,10242,L$i),L$a.texParameteri(this._type,10243,L$i),L$a.texParameteri(this._type,10242,L$j),L$a.texParameteri(this._type,10243,L$k),this._mipmap&&L$a.generateMipmap(this._type)):(-1!==L$g||(L$g=9729),-1!==L$h||(L$h=9729),L$a.texParameteri(this._type,10241,L$g),L$a.texParameteri(this._type,10240,L$h),L$a.texParameteri(this._type,10242,33071),L$a.texParameteri(this._type,10243,33071)),L$e&&L$f&&L$G.bindTexture(L$a,L$e,L$f),this._image.onload=null,this._image=null,this.memorySize=L$l?L$c*L$d*4*(1+1/3):L$c*L$d*4},L$b.recreateResource=function(){this._createWebGlTexture(),this.completeCreate()},L$b.onAsynLoaded=function(L$a,L$b,L$c){if(L$c){var L$d=L$c[0];void 0!==L$d&&(this._canRead=L$d);var L$e=L$c[1];void 0!==L$e&&(this._repeat=L$e);var L$f=L$c[2];void 0!==L$f&&(this._format=L$f);var L$g=L$c[3];void 0!==L$g&&(this._mipmap=L$g);var L$h=L$c.wrapModeU;void 0!==L$h&&(this._wrapModeU=L$h);var L$i=L$c.wrapModeV;void 0!==L$i&&(this._wrapModeV=L$i)}switch(this._format){case 6407:case 6408:var L$j=(this._image=L$b).width,L$k=L$b.height;this._width=L$j,this._height=L$k,this._size=new L$pb(L$j,L$k),this._canRead&&(L$p.isConchApp?L$b instanceof L$m.HTMLElement&&(this._pixels=new Uint8Array(L$b.getImageData(0,0,L$j,L$k))):(L$H.canvas.size(L$j,L$k),L$H.canvas.clear(),L$H.context.drawImage(L$b,0,0,L$j,L$k),this._pixels=new Uint8Array(L$H.context.getImageData(0,0,L$j,L$k).data.buffer)));break;case L$F.compressEtc1.COMPRESSED_RGB_ETC1_WEBGL:var L$l=new L$y(L$b);L$l.readUTFBytes(4),L$l.readUTFBytes(2),L$l.getInt16();L$l.endian="bigEndian",this._width=L$l.getInt16(),this._height=L$l.getInt16(),this._size=new L$pb(this._width,this._height);L$l.getInt16(),L$l.getInt16();this._image=new Uint8Array(L$b,L$l.pos)}this.recreateResource(),this._endLoaded()},L$b.getPixels=function(){if(this._canRead)return this._pixels;throw new Error("Texture2D: must set texture canRead is true.")},L$b.disposeResource=function(){this._source&&(L$F.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},L$o(0,L$b,"_src",function(){return this.url}),L$o(0,L$b,"src",function(){return this.url}),L$e.load=function(L$a){return L$v.loader.create(L$a,null,null,L$e)},L$e}(),L$Ub=function(L$b){function L$c(L$a,L$b){L$c.__super.call(this),void 0===L$a&&(L$a=.3),void 0===L$b&&(L$b=1e3),this._tempVector3=new L$gb,this._position=new L$gb,this._up=new L$gb,this._forward=new L$gb,this._right=new L$gb,this._fieldOfView=60,this._useUserProjectionMatrix=!1,this._orthographic=!1,this._viewportExpressedInClipSpace=!0,this._renderTargetSize=L$pb.fullScreen,this._orthographicVerticalSize=10,this.renderingOrder=0,this._nearPlane=L$a,this._farPlane=L$b,this.cullingMask=2147483647,this.clearFlag=0,this.useOcclusionCulling=!0,this._calculateProjectionMatrix(),L$v.stage.on("resize",this,this._onScreenSizeChanged)}L$n(L$c,"laya.d3.core.BaseCamera",L$b);var L$a=L$c.prototype;return L$a._sortCamerasByRenderingOrder=function(){if(this._displayedInStage)for(var L$a=this.scene._cameraPool,L$b=L$a.length-1,L$c=0;L$c<L$b;L$c++)if(L$a[L$c].renderingOrder>L$a[L$b].renderingOrder){var L$d=L$a[L$c];L$a[L$c]=L$a[L$b],L$a[L$b]=L$d}},L$a._calculateProjectionMatrix=function(){},L$a._onScreenSizeChanged=function(){this._calculateProjectionMatrix()},L$a._prepareCameraToRender=function(){L$I._currentCameraCullingMask=this.cullingMask;var L$a=this._shaderValues;L$a.setValue(0,this.transform.position.elements),L$a.setValue(5,this.forward.elements),L$a.setValue(6,this.up.elements)},L$a._prepareCameraViewProject=function(L$a,L$b){var L$c=this._shaderValues;L$c.setValue(1,L$a.elements),L$c.setValue(2,L$b.elements)},L$a._renderCamera=function(L$a,L$b,L$c){},L$a.addLayer=function(L$a){29!==L$a.number&&30!=L$a.number&&(this.cullingMask=this.cullingMask|L$a.mask)},L$a.removeLayer=function(L$a){29!==L$a.number&&30!=L$a.number&&(this.cullingMask=this.cullingMask&~L$a.mask)},L$a.addAllLayers=function(){this.cullingMask=2147483647},L$a.removeAllLayers=function(){this.cullingMask=0|L$I.getLayerByNumber(29).mask|L$I.getLayerByNumber(30).mask},L$a.ResetProjectionMatrix=function(){this._useUserProjectionMatrix=!1,this._calculateProjectionMatrix()},L$a.moveForward=function(L$a){this._tempVector3.elements[0]=this._tempVector3.elements[1]=0,this._tempVector3.elements[2]=L$a,this.transform.translate(this._tempVector3)},L$a.moveRight=function(L$a){this._tempVector3.elements[1]=this._tempVector3.elements[2]=0,this._tempVector3.elements[0]=L$a,this.transform.translate(this._tempVector3)},L$a.moveVertical=function(L$a){this._tempVector3.elements[0]=this._tempVector3.elements[2]=0,this._tempVector3.elements[1]=L$a,this.transform.translate(this._tempVector3,!1)},L$a._addSelfRenderObjects=function(){var L$a=this.scene._cameraPool,L$b=L$a.length;if(0<L$b){for(var L$c=L$b-1;0<=L$c;L$c--)if(this.renderingOrder<=L$a[L$c].renderingOrder){L$a.splice(L$c+1,0,this);break}}else L$a.push(this),this.scene.conchModel&&this.scene.conchModel.setCurrentCamera(this.conchModel)},L$a._clearSelfRenderObjects=function(){var L$a=this.scene._cameraPool;L$a.splice(L$a.indexOf(this),1)},L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),this._sky&&this._sky.destroy(),this.renderTarget=null,L$v.stage.off("resize",this,this._onScreenSizeChanged),L$b.prototype.destroy.call(this,L$a)},L$o(0,L$a,"sky",function(){return this._sky},function(L$a){(this._sky=L$a)._ownerCamera=this}),L$o(0,L$a,"forward",function(){var L$a=this.transform.worldMatrix.elements,L$b=this._forward.elements;return L$b[0]=-L$a[8],L$b[1]=-L$a[9],L$b[2]=-L$a[10],this._forward}),L$o(0,L$a,"position",function(){var L$a=this.transform.worldMatrix.elements,L$b=this._position.elements;return L$b[0]=L$a[12],L$b[1]=L$a[13],L$b[2]=L$a[14],this._position}),L$o(0,L$a,"renderTarget",function(){return this._renderTarget},function(L$a){null!=(this._renderTarget=L$a)&&(this._renderTargetSize=L$a.size)}),L$o(0,L$a,"up",function(){var L$a=this.transform.worldMatrix.elements,L$b=this._up.elements;return L$b[0]=L$a[4],L$b[1]=L$a[5],L$b[2]=L$a[6],this._up}),L$o(0,L$a,"right",function(){var L$a=this.transform.worldMatrix.elements,L$b=this._right.elements;return L$b[0]=L$a[0],L$b[1]=L$a[1],L$b[2]=L$a[2],this._right}),L$o(0,L$a,"renderTargetSize",function(){return this._renderTargetSize},function(L$a){null!=this.renderTarget&&this._renderTargetSize,this._renderTargetSize=L$a,this._calculateProjectionMatrix()}),L$o(0,L$a,"fieldOfView",function(){return this._fieldOfView},function(L$a){this._fieldOfView=L$a,this._calculateProjectionMatrix()}),L$o(0,L$a,"nearPlane",function(){return this._nearPlane},function(L$a){this._nearPlane=L$a,this._calculateProjectionMatrix()}),L$o(0,L$a,"farPlane",function(){return this._farPlane},function(L$a){this._farPlane=L$a,this._calculateProjectionMatrix()}),L$o(0,L$a,"orthographic",function(){return this._orthographic},function(L$a){this._orthographic=L$a,this._calculateProjectionMatrix()}),L$o(0,L$a,"orthographicVerticalSize",function(){return this._orthographicVerticalSize},function(L$a){this._orthographicVerticalSize=L$a,this._calculateProjectionMatrix()}),L$o(0,L$a,"renderingOrder",function(){return this._renderingOrder},function(L$a){this._renderingOrder=L$a,this._sortCamerasByRenderingOrder()}),L$c.CAMERAPOS=0,L$c.VIEWMATRIX=1,L$c.PROJECTMATRIX=2,L$c.VPMATRIX=3,L$c.VPMATRIX_NO_TRANSLATE=4,L$c.CAMERADIRECTION=5,L$c.CAMERAUP=6,L$c.ENVIRONMENTDIFFUSE=7,L$c.ENVIRONMENTSPECULAR=8,L$c.SIMLODINFO=9,L$c.DIFFUSEIRRADMATR=10,L$c.DIFFUSEIRRADMATG=11,L$c.DIFFUSEIRRADMATB=12,L$c.HDREXPOSURE=13,L$c.RENDERINGTYPE_DEFERREDLIGHTING="DEFERREDLIGHTING",L$c.RENDERINGTYPE_FORWARDRENDERING="FORWARDRENDERING",L$c.CLEARFLAG_SOLIDCOLOR=0,L$c.CLEARFLAG_SKY=1,L$c.CLEARFLAG_DEPTHONLY=2,L$c.CLEARFLAG_NONE=3,L$l(L$c,["_invertYScaleMatrix",function(){return this._invertYScaleMatrix=new L$ab(1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1)},"_invertYProjectionMatrix",function(){return this._invertYProjectionMatrix=new L$ab},"_invertYProjectionViewMatrix",function(){return this._invertYProjectionViewMatrix=new L$ab}]),L$c}(L$Kb),L$Vb=function(L$c){function L$b(L$a){this._render=null,this._geometryFilter=null,L$b.__super.call(this,L$a)}L$n(L$b,"laya.d3.core.RenderableSprite3D",L$c);var L$a=L$b.prototype;return L$a._addToInitStaticBatchManager=function(){},L$a._setBelongScene=function(L$a){L$c.prototype._setBelongScene.call(this,L$a),L$a._renderableSprite3Ds.push(this),this._render._applyLightMapParams()},L$a._setUnBelongScene=function(){var L$a=this._scene._renderableSprite3Ds,L$b=L$a.indexOf(this);L$a.splice(L$b,1),this._render._removeShaderDefine(laya.d3.core.RenderableSprite3D.SAHDERDEFINE_LIGHTMAP),L$c.prototype._setUnBelongScene.call(this)},L$a._update=function(L$a){(L$a.owner=this)._activeInHierarchy&&(this._updateComponents(L$a),this._render._updateOctreeNode(),this._lateUpdateComponents(L$a),L$A.spriteCount++,this._childs.length&&this._updateChilds(L$a))},L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$c.prototype.destroy.call(this,L$a),this._render._destroy(),this._render=null},L$b.__init__=function(){L$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=L$b.shaderDefines.registerDefine("SCALEOFFSETLIGHTINGMAPUV"),L$b.SAHDERDEFINE_LIGHTMAP=L$b.shaderDefines.registerDefine("LIGHTMAP")},L$b.SHADERDEFINE_SCALEOFFSETLIGHTINGMAPUV=2,L$b.SAHDERDEFINE_LIGHTMAP=4,L$b.LIGHTMAPSCALEOFFSET=2,L$b.LIGHTMAP=3,L$l(L$b,["shaderDefines",function(){return this.shaderDefines=new L$kb}]),L$b}(L$Kb),L$Wb=(function(L$a){function L$d(L$a,L$b,L$c){this._long=NaN,this._width=NaN,this._height=NaN,void 0===L$a&&(L$a=1),void 0===L$b&&(L$b=1),void 0===L$c&&(L$c=1),L$d.__super.call(this),this._long=L$a,this._width=L$b,this._height=L$c,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}L$n(L$d,"laya.d3.resource.models.BoxMesh",L$Qb);var L$b=L$d.prototype;L$b.recreateResource=function(){this.disposeResource(),this._numberVertices=24,this._numberIndices=36;var L$a=L$Fa.vertexDeclaration,L$b=(L$a.vertexStride,this._long/2),L$c=this._height/2,L$d=this._width/2,L$e=new Float32Array([-L$b,L$c,-L$d,0,1,0,0,0,L$b,L$c,-L$d,0,1,0,1,0,L$b,L$c,L$d,0,1,0,1,1,-L$b,L$c,L$d,0,1,0,0,1,-L$b,-L$c,-L$d,0,-1,0,0,1,L$b,-L$c,-L$d,0,-1,0,1,1,L$b,-L$c,L$d,0,-1,0,1,0,-L$b,-L$c,L$d,0,-1,0,0,0,-L$b,L$c,-L$d,-1,0,0,0,0,-L$b,L$c,L$d,-1,0,0,1,0,-L$b,-L$c,L$d,-1,0,0,1,1,-L$b,-L$c,-L$d,-1,0,0,0,1,L$b,L$c,-L$d,1,0,0,1,0,L$b,L$c,L$d,1,0,0,0,0,L$b,-L$c,L$d,1,0,0,0,1,L$b,-L$c,-L$d,1,0,0,1,1,-L$b,L$c,L$d,0,0,1,0,0,L$b,L$c,L$d,0,0,1,1,0,L$b,-L$c,L$d,0,0,1,1,1,-L$b,-L$c,L$d,0,0,1,0,1,-L$b,L$c,-L$d,0,0,-1,1,0,L$b,L$c,-L$d,0,0,-1,0,0,L$b,-L$c,-L$d,0,0,-1,0,1,-L$b,-L$c,-L$d,0,0,-1,1,1]),L$f=new Uint16Array([0,1,2,2,3,0,4,7,6,6,5,4,8,9,10,10,11,8,12,15,14,14,13,12,16,17,18,18,19,16,20,23,22,22,21,20]);this._vertexBuffer=new L$Ob(L$a,this._numberVertices,35044,!0),this._indexBuffer=new L$Nb("ushort",this._numberIndices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer._addReference(),this._vertexBuffer.setData(L$e),this._indexBuffer.setData(L$f),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},L$o(0,L$b,"long",function(){return this._long},function(L$a){this._long!==L$a&&(this._long=L$a,this.releaseResource(),this.activeResource())}),L$o(0,L$b,"width",function(){return this._width},function(L$a){this._width!==L$a&&(this._width=L$a,this.releaseResource(),this.activeResource())}),L$o(0,L$b,"height",function(){return this._height},function(L$a){this._height!==L$a&&(this._height=L$a,this.releaseResource(),this.activeResource())})}(),function(L$a){function L$e(L$a,L$b,L$c,L$d){this._long=NaN,this._width=NaN,this._stacks=0,void(this._slices=0)===L$a&&(L$a=10),void 0===L$b&&(L$b=10),void 0===L$c&&(L$c=10),void 0===L$d&&(L$d=10),L$e.__super.call(this),this._long=L$a,this._width=L$b,this._stacks=L$c,this._slices=L$d,this.activeResource(),this._positions=this._getPositions(),this._generateBoundingObject()}L$n(L$e,"laya.d3.resource.models.PlaneMesh",L$Qb);var L$b=L$e.prototype;L$b.recreateResource=function(){this.disposeResource(),this._numberVertices=(this._stacks+1)*(this._slices+1),this._numberIndices=this._stacks*this._slices*2*3;for(var L$a=new Uint16Array(this._numberIndices),L$b=L$Fa.vertexDeclaration,L$c=L$b.vertexStride/4,L$d=new Float32Array(this._numberVertices*L$c),L$e=this._long/2,L$f=this._width/2,L$g=this._long/this._stacks,L$h=this._width/this._slices,L$i=0,L$j=0;L$j<=this._slices;L$j++)for(var L$k=0;L$k<=this._stacks;L$k++)L$d[L$i++]=L$k*L$g-L$e,L$d[L$i++]=0,L$d[L$i++]=L$j*L$h-L$f,L$d[L$i++]=0,L$d[L$i++]=1,L$d[L$i++]=0,L$d[L$i++]=1*L$k/this._stacks,L$d[L$i++]=1*L$j/this._slices;var L$l=0;for(L$j=0;L$j<this._slices;L$j++)for(L$k=0;L$k<this._stacks;L$k++)L$a[L$l++]=(L$j+1)*(this._stacks+1)+L$k,L$a[L$l++]=L$j*(this._stacks+1)+L$k,L$a[L$l++]=(L$j+1)*(this._stacks+1)+L$k+1,L$a[L$l++]=L$j*(this._stacks+1)+L$k,L$a[L$l++]=L$j*(this._stacks+1)+L$k+1,L$a[L$l++]=(L$j+1)*(this._stacks+1)+L$k+1;this._vertexBuffer=new L$Ob(L$b,this._numberVertices,35044,!0),this._vertexBuffer._addReference(),this._indexBuffer=new L$Nb("ushort",this._numberIndices,35044,!0),this._indexBuffer._addReference(),this._vertexBuffer.setData(L$d),this._indexBuffer.setData(L$a),this.memorySize=2*(this._vertexBuffer._byteLength+this._indexBuffer._byteLength),this.completeCreate()},L$o(0,L$b,"long",function(){return this._long},function(L$a){this._long!==L$a&&(this._long=L$a,this.releaseResource(),this.activeResource())}),L$o(0,L$b,"width",function(){return this._width},function(L$a){this._width!==L$a&&(this._width=L$a,this.releaseResource(),this.activeResource())}),L$o(0,L$b,"stacks",function(){return this._stacks},function(L$a){this._stacks!==L$a&&(this._stacks=L$a,this.releaseResource(),this.activeResource())}),L$o(0,L$b,"slices",function(){return this._slices},function(L$a){this._slices!==L$a&&(this._slices=L$a,this.releaseResource(),this.activeResource())})}(),function(L$a){function L$g(L$a,L$b,L$c){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=.3),void 0===L$c&&(L$c=1e3),this._viewMatrix=new L$ab,this._projectionMatrix=new L$ab,this._projectionViewMatrix=new L$ab,this._viewport=new L$ib(0,0,0,0),this._normalizedViewport=new L$ib(0,0,1,1),this._aspectRatio=L$a,this._boundFrustumUpdate=!0,this._boundFrustum=new L$$a(L$ab.DEFAULT),L$g.__super.call(this,L$b,L$c),this.transform.on("worldmatrixneedchanged",this,this._onWorldMatrixChanged)}L$n(L$g,"laya.d3.core.Camera",L$Ub);var L$b=L$g.prototype;return L$b._onWorldMatrixChanged=function(){this._boundFrustumUpdate=!0},L$b._parseCustomProps=function(L$a,L$b,L$c,L$d){var L$e=L$c.clearColor;this.clearColor=new L$hb(L$e[0],L$e[1],L$e[2],L$e[3]);var L$f=L$c.viewport;this.normalizedViewport=new L$ib(L$f[0],L$f[1],L$f[2],L$f[3])},L$b._calculateProjectionMatrix=function(){if(!this._useUserProjectionMatrix)if(this._orthographic){var L$a=this.orthographicVerticalSize*this.aspectRatio*.5,L$b=.5*this.orthographicVerticalSize;L$ab.createOrthoOffCenterRH(-L$a,L$a,-L$b,L$b,this.nearPlane,this.farPlane,this._projectionMatrix)}else L$ab.createPerspective(3.1416*this.fieldOfView/180,this.aspectRatio,this.nearPlane,this.farPlane,this._projectionMatrix);this._boundFrustumUpdate=!0},L$b._update=function(L$a){this.conchModel&&(this.conchModel.setViewMatrix(this.viewMatrix.elements),this.conchModel.setProjectMatrix(this.projectionMatrix.elements)),laya.d3.core.Sprite3D.prototype._update.call(this,L$a)},L$b._renderCamera=function(L$a,L$b,L$c){var L$d,L$e;L$c.parallelSplitShadowMaps[0]&&L$c._renderShadowMap(L$a,L$b,this),(L$b.camera=this)._prepareCameraToRender(),L$c._preRenderUpdateComponents(L$b),L$d=L$b._viewMatrix=this.viewMatrix;var L$f=this._renderTarget;L$f?(L$f.start(),L$ab.multiply(L$Ub._invertYScaleMatrix,this._projectionMatrix,L$Ub._invertYProjectionMatrix),L$ab.multiply(L$Ub._invertYScaleMatrix,this.projectionViewMatrix,L$Ub._invertYProjectionViewMatrix),L$e=L$b._projectionMatrix=L$Ub._invertYProjectionMatrix,L$b._projectionViewMatrix=L$Ub._invertYProjectionViewMatrix):(L$e=L$b._projectionMatrix=this._projectionMatrix,L$b._projectionViewMatrix=this.projectionViewMatrix),this._prepareCameraViewProject(L$d,L$e),L$b._viewport=this.viewport,L$c._preRenderScene(L$a,L$b,this.boundFrustum),L$c._clear(L$a,L$b),L$c._renderScene(L$a,L$b),L$c._postRenderUpdateComponents(L$b),L$f&&L$f.end()},L$b.viewportPointToRay=function(L$a,L$b){L$ob.calculateCursorRay(L$a,this.viewport,this._projectionMatrix,this.viewMatrix,null,L$b)},L$b.normalizedViewportPointToRay=function(L$a,L$b){var L$c=L$g._tempVector20,L$d=this.viewport,L$e=L$a.elements,L$f=L$c.elements;L$f[0]=L$e[0]*L$d.width,L$f[1]=L$e[1]*L$d.height,L$ob.calculateCursorRay(L$c,this.viewport,this._projectionMatrix,this.viewMatrix,null,L$b)},L$b.worldToViewportPoint=function(L$a,L$b){L$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.viewport.project(L$a,this._projectionViewMatrix,L$b);var L$c=L$b.elements;L$c[0]=L$c[0]/L$v.stage.clientScaleX,L$c[1]=L$c[1]/L$v.stage.clientScaleY},L$b.worldToNormalizedViewportPoint=function(L$a,L$b){L$ab.multiply(this._projectionMatrix,this._viewMatrix,this._projectionViewMatrix),this.normalizedViewport.project(L$a,this._projectionViewMatrix,L$b);var L$c=L$b.elements;L$c[0]=L$c[0]/L$v.stage.clientScaleX,L$c[1]=L$c[1]/L$v.stage.clientScaleY},L$b.convertScreenCoordToOrthographicCoord=function(L$a,L$b){if(this._orthographic){var L$c=L$Y.clientWidth,L$d=L$Y.clientHeight,L$e=this.orthographicVerticalSize*this.aspectRatio/L$c,L$f=this.orthographicVerticalSize/L$d,L$g=L$a.elements,L$h=L$b.elements;return L$h[0]=(-L$c/2+L$g[0])*L$e,L$h[1]=(L$d/2-L$g[1])*L$f,L$h[2]=(this.nearPlane-this.farPlane)*(L$g[2]+1)/2-this.nearPlane,L$gb.transformCoordinate(L$b,this.transform.worldMatrix,L$b),!0}return!1},L$o(0,L$b,"projectionViewMatrix",function(){return L$ab.multiply(this.projectionMatrix,this.viewMatrix,this._projectionViewMatrix),this._projectionViewMatrix}),L$o(0,L$b,"aspectRatio",function(){if(0!==this._aspectRatio)return this._aspectRatio;var L$a=this.viewport;return L$a.width/L$a.height},function(L$a){if(L$a<0)throw new Error("Camera: the aspect ratio has to be a positive real number.");this._aspectRatio=L$a,this._calculateProjectionMatrix()}),L$o(0,L$b,"boundFrustum",function(){return this._boundFrustumUpdate&&(this._boundFrustum.matrix=this.projectionViewMatrix),this._boundFrustum}),L$o(0,L$b,"needViewport",function(){var L$a=this.normalizedViewport;return 0===L$a.x&&0===L$a.y&&1===L$a.width&&1===L$a.height}),L$o(0,L$b,"viewport",function(){if(this._viewportExpressedInClipSpace){var L$a=this._normalizedViewport,L$b=this.renderTargetSize,L$c=L$b.width,L$d=L$b.height;this._viewport.x=L$a.x*L$c,this._viewport.y=L$a.y*L$d,this._viewport.width=L$a.width*L$c,this._viewport.height=L$a.height*L$d}return this._viewport},function(L$a){if(null!=this.renderTarget&&(L$a.x<0||L$a.y<0||0==L$a.width||0==L$a.height))throw new Error("Camera: viewport size invalid.","value");this._viewportExpressedInClipSpace=!1,this._viewport=L$a,this._calculateProjectionMatrix()}),L$o(0,L$b,"normalizedViewport",function(){if(!this._viewportExpressedInClipSpace){var L$a=this._viewport,L$b=this.renderTargetSize,L$c=L$b.width,L$d=L$b.height;this._normalizedViewport.x=L$a.x/L$c,this._normalizedViewport.y=L$a.y/L$d,this._normalizedViewport.width=L$a.width/L$c,this._normalizedViewport.height=L$a.height/L$d}return this._normalizedViewport},function(L$a){L$a.x<0&&(L$a.x=0,console.warn("Camera: viewport.x must large than 0.0.")),L$a.y<0&&(L$a.y=0,console.warn("Camera: viewport.y must large than 0.0.")),1<L$a.x+L$a.width&&(L$a.width=1-L$a.x,console.warn("Camera: viewport.width + viewport.x must less than 1.0.")),1<L$a.y+L$a.height&&(L$a.height=1-L$a.y,console.warn("Camera: viewport.height + viewport.y must less than 1.0.")),this._viewportExpressedInClipSpace=!0,this._normalizedViewport=L$a,this._calculateProjectionMatrix()}),L$o(0,L$b,"projectionMatrix",function(){return this._projectionMatrix},function(L$a){this._projectionMatrix=L$a,this._useUserProjectionMatrix=!0}),L$o(0,L$b,"viewMatrix",function(){return this.transform.worldMatrix.invert(this._viewMatrix),this._viewMatrix}),L$l(L$g,["_tempVector20",function(){return this._tempVector20=new L$fb}]),L$g}()),L$Xb=function(L$c){function L$d(L$a,L$b){L$d.__super.call(this,L$b),this._geometryFilter=new L$Hb(this),this._render=new L$Ib(this),this._geometryFilter.on("meshchanged",this,this._onMeshChanged),this._render.on("materialchanged",this,this._onMaterialChanged),L$a&&(this._geometryFilter.sharedMesh=L$a)instanceof laya.d3.resource.models.Mesh&&(L$a.loaded?this._render.sharedMaterials=L$a.materials:L$a.once("loaded",this,this._applyMeshMaterials))}L$n(L$d,"laya.d3.core.MeshSprite3D",L$c);var L$a=L$d.prototype;return L$a._changeRenderObjectByMesh=function(L$a){var L$b=this._render._renderElements,L$c=L$b[L$a];L$c||(L$c=L$b[L$a]=new L$zb),L$c._render=this._render;var L$d=this._render.sharedMaterials[L$a];L$d||(L$d=L$Mb.defaultMaterial);var L$e=this._geometryFilter.sharedMesh.getRenderElement(L$a);return L$c._mainSortID=this._getSortID(L$e,L$d),L$c._sprite3D=this,L$c.renderObj=L$e,L$c._material=L$d,L$c},L$a._changeRenderObjectByMaterial=function(L$a,L$b){var L$c=this._render._renderElements[L$a];L$b||(L$b=L$Mb.defaultMaterial);var L$d=this._geometryFilter.sharedMesh.getRenderElement(L$a);return L$c._mainSortID=this._getSortID(L$d,L$b),L$c._sprite3D=this,L$c.renderObj=L$d,L$c._material=L$b,L$c},L$a._changeRenderObjectsByMesh=function(){var L$a=this._geometryFilter.sharedMesh.getRenderElementsCount();this._render._renderElements.length=L$a;for(var L$b=0;L$b<L$a;L$b++)this._changeRenderObjectByMesh(L$b)},L$a._onMeshChanged=function(L$a){var L$b=L$a.sharedMesh;L$b.loaded?this._changeRenderObjectsByMesh():L$b.once("loaded",this,this._onMeshLoaded)},L$a._onMeshLoaded=function(L$a){L$a===this.meshFilter.sharedMesh&&this._changeRenderObjectsByMesh()},L$a._onMaterialChanged=function(L$a,L$b,L$c){L$b<this._render._renderElements.length&&this._changeRenderObjectByMaterial(L$b,L$c)},L$a._clearSelfRenderObjects=function(){this.scene.removeFrustumCullingObject(this._render)},L$a._addSelfRenderObjects=function(){this.scene.addFrustumCullingObject(this._render)},L$a._parseCustomProps=function(L$a,L$b,L$c,L$d){var L$e=this.meshRender,L$f=L$c.lightmapIndex;null!=L$f&&(L$e.lightmapIndex=L$f);var L$g,L$h,L$i=L$c.lightmapScaleOffset;if(L$i&&(L$e.lightmapScaleOffset=new L$hb(L$i[0],L$i[1],L$i[2],L$i[3])),L$d.instanceParams)(L$g=L$d.instanceParams.loadPath)&&(L$h=L$r.getRes(L$b[L$g]),(this.meshFilter.sharedMesh=L$h).loaded?L$e.sharedMaterials=L$h.materials:L$h.once("loaded",this,this._applyMeshMaterials));else{(L$g=L$c.meshPath)&&(L$h=L$r.getRes(L$b[L$g]),this.meshFilter.sharedMesh=L$h);var L$j=L$c.materials;if(L$j){var L$k=L$e.sharedMaterials,L$l=L$j.length;L$k.length=L$l;for(var L$m=0;L$m<L$l;L$m++)L$k[L$m]=L$r.getRes(L$b[L$j[L$m].path]);L$e.sharedMaterials=L$k}}},L$a._applyMeshMaterials=function(L$a){for(var L$b=this._render.sharedMaterials,L$c=L$a.materials,L$d=0,L$e=L$c.length;L$d<L$e;L$d++)L$b[L$d]||(L$b[L$d]=L$c[L$d]);this._render.sharedMaterials=L$b},L$a._addToInitStaticBatchManager=function(){L$d._staticBatchManager._addInitBatchSprite(this)},L$a.cloneTo=function(L$a){var L$b=L$a;L$b._geometryFilter.sharedMesh=this._geometryFilter.sharedMesh;var L$c=this._render,L$d=L$b._render;L$d.enable=L$c.enable,L$d.sharedMaterials=L$c.sharedMaterials,L$d.castShadow=L$c.castShadow;var L$e=L$c.lightmapScaleOffset;L$e&&(L$d.lightmapScaleOffset=L$e.clone()),L$d.lightmapIndex=L$c.lightmapIndex,L$d.receiveShadow=L$c.receiveShadow,L$d.sortingFudge=L$c.sortingFudge,laya.d3.core.Sprite3D.prototype.cloneTo.call(this,L$a)},L$a.destroy=function(L$a){if(void 0===L$a&&(L$a=!0),!this.destroyed){var L$b=this.meshFilter.sharedMesh;null!=L$b&&(L$b.loaded||L$b.off("loaded",this,this._applyMeshMaterials)),L$c.prototype.destroy.call(this,L$a),this._geometryFilter._destroy()}},L$o(0,L$a,"meshFilter",function(){return this._geometryFilter}),L$o(0,L$a,"meshRender",function(){return this._render}),L$d.__init__=function(){L$da._staticBatchManagers.push(L$d._staticBatchManager)},L$d.load=function(L$a){return L$v.loader.create(L$a,null,null,L$d)},L$l(L$d,["_staticBatchManager",function(){return this._staticBatchManager=new L$Bb}]),L$d}(L$Vb)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(L$a,L$b){"use strict";for(var L$c in Object.defineProperty(L$b,"__esModule",{value:!0}),Laya){var L$d=Laya[L$c];L$d&&L$d.__isclass&&(L$b[L$c]=L$d)}}),function(L$a,L$b,L$ea){L$ea.un,L$ea.uns;var L$c=L$ea.static,L$d=L$ea.class,L$f=L$ea.getset,L$p=L$ea.__newvec,L$h=laya.maths.Bezier,L$l=laya.utils.Browser,L$Fa=laya.utils.Byte,L$e=(laya.events.Event,laya.events.EventDispatcher),L$g=laya.display.Graphics,L$i=(laya.resource.HTMLCanvas,laya.utils.Handler),L$j=laya.net.Loader,L$m=laya.maths.MathUtil,L$Ga=laya.maths.Matrix,L$q=(laya.display.Node,laya.maths.Point,laya.maths.Rectangle,laya.renders.Render),L$k=(laya.renders.RenderContext,laya.resource.Resource),L$n=laya.utils.RunDriver,L$fa=laya.display.Sprite,L$o=laya.utils.Stat,L$Ha=laya.resource.Texture,L$r=(laya.net.URL,laya.utils.Utils),L$G=function(){function L$a(){this.nodes=null,this.name=null,this.playTime=NaN,this.bone3DMap=null,this.totalKeyframeDatasLength=0}return L$d(L$a,"laya.ani.AnimationContent"),L$a}(),L$H=function(){function L$a(){this.name=null,this.parentIndex=0,this.parent=null,this.keyframeWidth=0,this.lerpType=0,this.interpolationMethod=null,this.childs=null,this.keyFrame=null,this.playTime=NaN,this.extenData=null,this.dataOffset=0}return L$d(L$a,"laya.ani.AnimationNodeContent"),L$a}(),L$t=function(){function L$a(){}return L$d(L$a,"laya.ani.AnimationParser01"),L$a.parse=function(L$a,L$b){var L$c=L$b.__getBuffer(),L$d=0,L$e=0,L$f=0,L$g=0,L$h=0,L$i=0,L$j=0,L$k=L$b.readUTFString();L$a._aniClassName=L$k;var L$l,L$m=L$b.readUTFString().split("\n"),L$n=L$b.getUint8(),L$o=L$b.getUint32(),L$p=L$b.getUint32();0<L$o&&(L$l=L$c.slice(L$o,L$p));var L$q=new L$Fa(L$l);for(0<L$p&&(L$a._publicExtData=L$c.slice(L$p,L$c.byteLength)),L$a._useParent=!!L$b.getUint8(),L$a._anis.length=L$n,L$d=0;L$d<L$n;L$d++){var L$r=L$a._anis[L$d]=new L$G;L$r.nodes=new Array;var L$s=L$r.name=L$m[L$b.getUint16()];L$a._aniMap[L$s]=L$d,L$r.bone3DMap={},L$r.playTime=L$b.getFloat32(),L$r.playTime<=0&&console.error("播放时间不能为0  url="+L$a.url+" name="+L$r.name);var L$t=L$r.nodes.length=L$b.getUint8();for(L$e=L$r.totalKeyframeDatasLength=0;L$e<L$t;L$e++){var L$u=L$r.nodes[L$e]=new L$H;L$u.childs=[];var L$v=L$b.getInt16();0<=L$v&&(L$u.name=L$m[L$v],L$r.bone3DMap[L$u.name]=L$e),L$u.keyFrame=new Array,L$u.parentIndex=L$b.getInt16(),-1==L$u.parentIndex?L$u.parent=null:L$u.parent=L$r.nodes[L$u.parentIndex],L$u.lerpType=L$b.getUint8();var L$y=L$b.getUint32();L$q.pos=L$y;var L$z=L$u.keyframeWidth=L$q.getUint16();if(L$r.totalKeyframeDatasLength+=L$z,0===L$u.lerpType||1===L$u.lerpType)for(L$u.interpolationMethod=[],L$u.interpolationMethod.length=L$z,L$f=0;L$f<L$z;L$f++)L$u.interpolationMethod[L$f]=L$K.interpolation[L$q.getUint8()];null!=L$u.parent&&L$u.parent.childs.push(L$u);var L$A=L$b.getUint16();0<L$A&&(L$u.extenData=L$c.slice(L$b.pos,L$b.pos+L$A),L$b.pos+=L$A);var L$B,L$C=L$b.getUint16(),L$D=0;for(L$f=0,L$g=L$u.keyFrame.length=L$C;L$f<L$g;L$f++){if((L$B=L$u.keyFrame[L$f]=new L$I).duration=L$b.getFloat32(),L$B.startTime=L$D,2===L$u.lerpType){L$B.interpolationData=[];var L$E,L$F=L$b.getUint8();switch(L$E=L$b.getFloat32()){case 254:for(L$B.interpolationData.length=L$z,L$j=0;L$j<L$z;L$j++)L$B.interpolationData[L$j]=0;break;case 255:for(L$B.interpolationData.length=L$z,L$j=0;L$j<L$z;L$j++)L$B.interpolationData[L$j]=5;break;default:for(L$B.interpolationData.push(L$E),L$i=1;L$i<L$F;L$i++)L$B.interpolationData.push(L$b.getFloat32())}}for(L$B.data=new Float32Array(L$z),L$h=0;L$h<L$z;L$h++)L$B.data[L$h]=L$b.getFloat32(),-1e-8<L$B.data[L$h]&&L$B.data[L$h]<1e-8&&(L$B.data[L$h]=0);L$D+=L$B.duration}L$B.startTime=L$r.playTime,L$u.playTime=L$r.playTime,L$a._calculateKeyFrame(L$u,L$C,L$z)}}},L$a}(),L$u=function(){function L$v(){}return L$d(L$v,"laya.ani.AnimationParser02"),L$v.READ_DATA=function(){L$v._DATA.offset=L$v._reader.getUint32(),L$v._DATA.size=L$v._reader.getUint32()},L$v.READ_BLOCK=function(){for(var L$a=L$v._BLOCK.count=L$v._reader.getUint16(),L$b=L$v._BLOCK.blockStarts=[],L$c=L$v._BLOCK.blockLengths=[],L$d=0;L$d<L$a;L$d++)L$b.push(L$v._reader.getUint32()),L$c.push(L$v._reader.getUint32())},L$v.READ_STRINGS=function(){var L$a=L$v._reader.getUint32(),L$b=L$v._reader.getUint16(),L$c=L$v._reader.pos;L$v._reader.pos=L$a+L$v._DATA.offset;for(var L$d=0;L$d<L$b;L$d++)L$v._strings[L$d]=L$v._reader.readUTFString();L$v._reader.pos=L$c},L$v.parse=function(L$a,L$b){L$v._templet=L$a;(L$v._reader=L$b).__getBuffer();L$v.READ_DATA(),L$v.READ_BLOCK(),L$v.READ_STRINGS();for(var L$c=0,L$d=L$v._BLOCK.count;L$c<L$d;L$c++){var L$e=L$b.getUint16(),L$f=L$v._strings[L$e],L$g=L$v["READ_"+L$f];if(null==L$g)throw new Error("model file err,no this function:"+L$e+" "+L$f);L$g.call()}},L$v.READ_ANIMATIONS=function(){var L$a=L$v._reader,L$b=L$a.__getBuffer(),L$c=0,L$d=0,L$e=0,L$f=0,L$g=L$a.getUint16(),L$h=[];for(L$h.length=L$g,L$c=0;L$c<L$g;L$c++)L$h[L$c]=L$K.interpolation[L$a.getByte()];var L$i=L$a.getUint8();for(L$v._templet._anis.length=L$i,L$c=0;L$c<L$i;L$c++){var L$j=L$v._templet._anis[L$c]={};L$j.nodes=new Array;var L$k=L$j.name=L$v._strings[L$a.getUint16()];L$v._templet._aniMap[L$k]=L$c,L$j.bone3DMap={},L$j.playTime=L$a.getFloat32();var L$l=L$j.nodes.length=L$a.getInt16();for(L$d=L$j.totalKeyframeDatasLength=0;L$d<L$l;L$d++){var L$m=L$j.nodes[L$d]={};L$m.keyframeWidth=L$g,L$m.childs=[];var L$n=L$a.getUint16();0<=L$n&&(L$m.name=L$v._strings[L$n],L$j.bone3DMap[L$m.name]=L$d),L$m.keyFrame=new Array,L$m.parentIndex=L$a.getInt16(),-1==L$m.parentIndex?L$m.parent=null:L$m.parent=L$j.nodes[L$m.parentIndex],L$j.totalKeyframeDatasLength+=L$g,L$m.interpolationMethod=L$h,null!=L$m.parent&&L$m.parent.childs.push(L$m);var L$o=L$a.getUint16(),L$p=null,L$q=null;for(L$e=0,L$f=L$m.keyFrame.length=L$o;L$e<L$f;L$e++){(L$p=L$m.keyFrame[L$e]={}).startTime=L$a.getFloat32(),L$q&&(L$q.duration=L$p.startTime-L$q.startTime);var L$r=L$v._DATA.offset,L$s=L$a.getUint32(),L$t=4*L$g,L$u=L$b.slice(L$r+L$s,L$r+L$s+L$t);L$p.data=new Float32Array(L$u),L$q=L$p}L$p.duration=0,L$m.playTime=L$j.playTime,L$v._templet._calculateKeyFrame(L$m,L$o,L$g)}}},L$v._templet=null,L$v._reader=null,L$v._strings=[],L$c(L$v,["_BLOCK",function(){return this._BLOCK={count:0}},"_DATA",function(){return this._DATA={offset:0,size:0}}]),L$v}(),L$Ia=(function(){function L$a(){}L$d(L$a,"laya.ani.AnimationState"),L$a.stopped=0,L$a.paused=1,L$a.playing=2}(),function(){function L$e(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new L$Va,this.resultMatrix=new L$Ga,this._children=[]}L$d(L$e,"laya.ani.bone.Bone");var L$a=L$e.prototype;return L$a.setTempMatrix=function(L$a){this._tempMatrix=L$a;var L$b,L$c=0;for(L$c=0,L$b=this._children.length;L$c<L$b;L$c++)this._children[L$c].setTempMatrix(this._tempMatrix)},L$a.update=function(L$a){var L$b;if(this.rotation=this.transform.skX,L$a)L$b=this.resultTransform.getMatrix(),L$Ga.mul(L$b,L$a,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)L$b=this.resultTransform.getMatrix(),L$Ga.mul(L$b,this.parentBone.resultMatrix,this.resultMatrix);else{var L$c=this.parentBone,L$d=NaN,L$e=NaN,L$f=NaN,L$g=this.parentBone.resultMatrix;L$b=this.resultTransform.getMatrix();var L$h=L$g.a*L$b.tx+L$g.c*L$b.ty+L$g.tx,L$i=L$g.b*L$b.tx+L$g.d*L$b.ty+L$g.ty,L$j=new L$Ga;this.inheritRotation?(L$d=Math.atan2(L$c.resultMatrix.b,L$c.resultMatrix.a),L$e=Math.cos(L$d),L$f=Math.sin(L$d),L$j.setTo(L$e,L$f,-L$f,L$e,0,0),L$Ga.mul(this._tempMatrix,L$j,L$Ga.TEMP),L$Ga.TEMP.copyTo(L$j),L$b=this.resultTransform.getMatrix(),L$Ga.mul(L$b,L$j,this.resultMatrix),this.resultTransform.scX*this.resultTransform.scY<0&&this.resultMatrix.rotate(.5*Math.PI)):(this.inheritScale,L$b=this.resultTransform.getMatrix(),L$Ga.TEMP.identity(),L$Ga.TEMP.d=this.d,L$Ga.mul(L$b,L$Ga.TEMP,this.resultMatrix)),this.resultMatrix.tx=L$h,this.resultMatrix.ty=L$i}else(L$b=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var L$k,L$l=0;for(L$l=0,L$k=this._children.length;L$l<L$k;L$l++)this._children[L$l].update()},L$a.updateChild=function(){var L$a,L$b=0;for(L$b=0,L$a=this._children.length;L$b<L$a;L$b++)this._children[L$b].update()},L$a.setRotation=function(L$a){this._sprite&&(this._sprite.rotation=180*L$a/Math.PI)},L$a.updateDraw=function(L$a,L$b){L$e.ShowBones&&!L$e.ShowBones[this.name]||(this._sprite||(this._sprite=new L$fa,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),L$ea.stage.addChild(this._sprite)),this._sprite.x=L$a+this.resultMatrix.tx,this._sprite.y=L$b+this.resultMatrix.ty);var L$c,L$d=0;for(L$d=0,L$c=this._children.length;L$d<L$c;L$d++)this._children[L$d].updateDraw(L$a,L$b)},L$a.addChild=function(L$a){this._children.push(L$a),L$a.parentBone=this},L$a.findBone=function(L$a){if(this.name==L$a)return this;var L$b,L$c,L$d=0;for(L$d=0,L$b=this._children.length;L$d<L$b;L$d++)if(L$c=this._children[L$d].findBone(L$a))return L$c;return null},L$a.localToWorld=function(L$a){var L$b=L$a[0],L$c=L$a[1];L$a[0]=L$b*this.resultMatrix.a+L$c*this.resultMatrix.c+this.resultMatrix.tx,L$a[1]=L$b*this.resultMatrix.b+L$c*this.resultMatrix.d+this.resultMatrix.ty},L$e.ShowBones={},L$e}()),L$Ja=function(){function L$p(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}L$d(L$p,"laya.ani.bone.BoneSlot");var L$a=L$p.prototype;return L$a.showSlotData=function(L$a,L$b){void 0===L$b&&(L$b=!0),this.currSlotData=L$a,L$b&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},L$a.showDisplayByName=function(L$a){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(L$a))},L$a.replaceDisplayByName=function(L$a,L$b){if(this.currSlotData){var L$c;L$c=this.currSlotData.getDisplayByName(L$a);var L$d;L$d=this.currSlotData.getDisplayByName(L$b),this.replaceDisplayByIndex(L$c,L$d)}},L$a.replaceDisplayByIndex=function(L$a,L$b){this.currSlotData&&(this._replaceDic[L$a]=L$b,this.displayIndex==L$a&&this.showDisplayByIndex(L$a))},L$a.showDisplayByIndex=function(L$a){if(null!=this._replaceDic[L$a]&&(L$a=this._replaceDic[L$a]),this.currSlotData&&-1<L$a&&L$a<this.currSlotData.displayArr.length){if(this.displayIndex=L$a,this.currDisplayData=this.currSlotData.displayArr[L$a],this.currDisplayData){var L$b=this.currDisplayData.name;this.currTexture=this.templet.getTexture(L$b),this.currTexture&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(!L$q.isConchApp||L$q.isConchApp&&"0.9.15"<L$fa.RUNTIMEVERION)&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},L$a.replaceSkin=function(L$a){this._diyTexture=L$a,this._curDiyUV&&(this._curDiyUV.length=0),this.currDisplayData&&this._diyTexture==this.currDisplayData.texture&&(this._diyTexture=null)},L$a.setParentMatrix=function(L$a){this._parentMatrix=L$a},L$a.draw=function(L$a,L$b,L$c,L$d){if(void 0===L$c&&(L$c=!1),void 0===L$d&&(L$d=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var L$e,L$f=this.currTexture;switch(this._diyTexture&&(L$f=this._diyTexture),this.currDisplayData.type){case 0:if(L$a){var L$g=this.getDisplayMatrix();if(this._parentMatrix){var L$h=!1;if(L$g){var L$i;if(L$Ga.mul(L$g,this._parentMatrix,L$Ga.TEMP),L$i=L$c?(null==this._resultMatrix&&(this._resultMatrix=new L$Ga),this._resultMatrix):new L$Ga,!L$q.isWebGL&&this.currDisplayData.uvs||L$q.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var L$j=L$p._tempMatrix;L$j.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(L$j.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(L$h=!0,L$j.rotate(-Math.PI/2)),L$Ga.mul(L$j,L$Ga.TEMP,L$i)}else L$Ga.TEMP.copyTo(L$i);L$h?L$a.drawTexture(L$f,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,L$i):L$a.drawTexture(L$f,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,L$i)}}}break;case 1:if(null==(L$e=L$c?(null==this._skinSprite&&(this._skinSprite=L$p.createSkinMesh()),this._skinSprite):L$p.createSkinMesh()))return;var L$k;if(null==this.currDisplayData.bones){var L$l,L$m=this.currDisplayData.weights;this.deformData&&(L$m=this.deformData),L$l=this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=L$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=L$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs,this._mVerticleArr=L$m;this.currDisplayData.triangles.length;L$k=this.currDisplayData.triangles,L$e.init2(L$f,null,L$k,this._mVerticleArr,L$l);var L$n,L$o=this.getDisplayMatrix();if(this._parentMatrix)if(L$o)L$Ga.mul(L$o,this._parentMatrix,L$Ga.TEMP),L$n=L$c?(null==this._resultMatrix&&(this._resultMatrix=new L$Ga),this._resultMatrix):new L$Ga,L$Ga.TEMP.copyTo(L$n),L$e.transform=L$n}else this.skinMesh(L$b,L$e,L$d);L$a.drawSkin(L$e);break;case 2:if(null==(L$e=L$c?(null==this._skinSprite&&(this._skinSprite=L$p.createSkinMesh()),this._skinSprite):L$p.createSkinMesh()))return;this.skinMesh(L$b,L$e,L$d),L$a.drawSkin(L$e)}}},L$a.skinMesh=function(L$a,L$b,L$c){var L$d,L$e=this.currTexture,L$f=this.currDisplayData.bones;L$d=this._diyTexture?(L$e=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=L$z.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=L$z.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),this._curDiyUV):this.currDisplayData.uvs;var L$g,L$h,L$i=this.currDisplayData.weights,L$j=this.currDisplayData.triangles,L$k=0,L$l=0,L$m=0,L$n=NaN,L$o=NaN,L$p=0,L$q=0,L$r=[],L$s=0,L$t=0;if(this.deformData&&0<this.deformData.length){var L$u=0;for(L$s=0,L$t=L$f.length;L$s<L$t;){for(L$m=L$f[L$s++]+L$s,L$l=L$k=0;L$s<L$m;L$s++)L$h=L$a[L$f[L$s]],L$n=L$i[L$p]+this.deformData[L$u++],L$o=L$i[L$p+1]+this.deformData[L$u++],L$q=L$i[L$p+2],L$k+=(L$n*L$h.a+L$o*L$h.c+L$h.tx)*L$q,L$l+=(L$n*L$h.b+L$o*L$h.d+L$h.ty)*L$q,L$p+=3;L$r.push(L$k,L$l)}}else for(L$s=0,L$t=L$f.length;L$s<L$t;){for(L$m=L$f[L$s++]+L$s,L$l=L$k=0;L$s<L$m;L$s++)L$h=L$a[L$f[L$s]],L$n=L$i[L$p],L$o=L$i[L$p+1],L$q=L$i[L$p+2],L$k+=(L$n*L$h.a+L$o*L$h.c+L$h.tx)*L$q,L$l+=(L$n*L$h.b+L$o*L$h.d+L$h.ty)*L$q,L$p+=3;L$r.push(L$k,L$l)}this._mVerticleArr=L$r,L$g=L$j,L$b.init2(L$e,null,L$g,this._mVerticleArr,L$d)},L$a.drawBonePoint=function(L$a){L$a&&this._parentMatrix&&L$a.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},L$a.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},L$a.getMatrix=function(){return this._resultMatrix},L$a.copy=function(){var L$a=new L$p;return L$a.type="copy",L$a.name=this.name,L$a.attachmentName=this.attachmentName,L$a.srcDisplayIndex=this.srcDisplayIndex,L$a.parent=this.parent,L$a.displayIndex=this.displayIndex,L$a.templet=this.templet,L$a.currSlotData=this.currSlotData,L$a.currTexture=this.currTexture,L$a.currDisplayData=this.currDisplayData,L$a},L$p.createSkinMesh=function(){return L$q.isWebGL||L$q.isConchApp?L$n.skinAniSprite():(L$q.isWebGL,null)},L$c(L$p,["_tempMatrix",function(){return this._tempMatrix=new L$Ga}]),L$p}(),L$Ka=function(){function L$a(){this.skinName=null,this.deformSlotDataList=[]}return L$d(L$a,"laya.ani.bone.DeformAniData"),L$a}(),L$La=function(){function L$a(){this.deformSlotDisplayList=[]}return L$d(L$a,"laya.ani.bone.DeformSlotData"),L$a}(),L$Ma=function(){function L$a(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}L$d(L$a,"laya.ani.bone.DeformSlotDisplayData");var L$b=L$a.prototype;return L$b.binarySearch1=function(L$a,L$b){var L$c=0,L$d=L$a.length-2;if(0==L$d)return 1;for(var L$e=L$d>>>1;;){if(L$a[Math.floor(L$e+1)]<=L$b?L$c=L$e+1:L$d=L$e,L$c==L$d)return L$c+1;L$e=L$c+L$d>>>1}return 0},L$b.apply=function(L$a,L$b,L$c){if(void 0===L$c&&(L$c=1),L$a+=.05,!(this.timeList.length<=0)){var L$d=0;if(!(L$a<this.timeList[0])){var L$e=this.vectices[0].length,L$f=[],L$g=this.binarySearch1(this.timeList,L$a);if(this.frameIndex=L$g,L$a>=this.timeList[this.timeList.length-1]){var L$h=this.vectices[this.vectices.length-1];if(L$c<1)for(L$d=0;L$d<L$e;L$d++)L$f[L$d]+=(L$h[L$d]-L$f[L$d])*L$c;else for(L$d=0;L$d<L$e;L$d++)L$f[L$d]=L$h[L$d];this.deformData=L$f}else{this.tweenKeyList[this.frameIndex];var L$i=this.vectices[this.frameIndex-1],L$j=this.vectices[this.frameIndex],L$k=this.timeList[this.frameIndex-1],L$l=this.timeList[this.frameIndex];L$c=this.tweenKeyList[L$g-1]?(L$a-L$k)/(L$l-L$k):0;var L$m=NaN;for(L$d=0;L$d<L$e;L$d++)L$m=L$i[L$d],L$f[L$d]=L$m+(L$j[L$d]-L$m)*L$c;this.deformData=L$f}}}},L$a}(),L$Na=function(){function L$a(){this.time=NaN,this.drawOrder=[]}return L$d(L$a,"laya.ani.bone.DrawOrderData"),L$a}(),L$Oa=function(){function L$a(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return L$d(L$a,"laya.ani.bone.EventData"),L$a}(),L$s=function(){function L$da(L$a,L$b){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=L$a,this._targetBone=L$b[L$a.targetBoneIndex],this.isSpine=L$a.isSpine,null==this._bones&&(this._bones=[]);for(var L$c=this._bones.length=0,L$d=L$a.boneIndexs.length;L$c<L$d;L$c++)this._bones.push(L$b[L$a.boneIndexs[L$c]]);this.name=L$a.name,this.mix=L$a.mix,this.bendDirection=L$a.bendDirection}L$d(L$da,"laya.ani.bone.IkConstraint");var L$a=L$da.prototype;return L$a.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},L$a._applyIk1=function(L$a,L$b,L$c,L$d){var L$e=L$a.parentBone,L$f=1/(L$e.resultMatrix.a*L$e.resultMatrix.d-L$e.resultMatrix.b*L$e.resultMatrix.c),L$g=L$b-L$e.resultMatrix.tx,L$h=L$c-L$e.resultMatrix.ty,L$i=(L$g*L$e.resultMatrix.d-L$h*L$e.resultMatrix.c)*L$f-L$a.transform.x,L$j=(L$h*L$e.resultMatrix.a-L$g*L$e.resultMatrix.b)*L$f-L$a.transform.y,L$k=Math.atan2(L$j,L$i)*L$da.radDeg-0-L$a.transform.skX;L$a.transform.scX<0&&(L$k+=180),180<L$k?L$k-=360:L$k<-180&&(L$k+=360),L$a.transform.skX=L$a.transform.skY=L$a.transform.skX+L$k*L$d,L$a.update()},L$a.updatePos=function(L$a,L$b){this._sp&&this._sp.pos(L$a,L$b)},L$a._applyIk2=function(L$a,L$b,L$c,L$d,L$e,L$f){if(0!=L$f){var L$g=L$a.resultTransform.x,L$h=L$a.resultTransform.y,L$i=L$a.transform.scX,L$j=L$a.transform.scY,L$k=L$b.transform.scX,L$l=0,L$m=0,L$n=0;L$n=L$i<0?(L$i=-L$i,L$l=180,-1):(L$l=0,1),L$j<0&&(L$j=-L$j,L$n=-L$n),L$m=L$k<0?(L$k=-L$k,180):0;var L$o=L$b.resultTransform.x,L$p=NaN,L$q=NaN,L$r=NaN,L$s=L$a.resultMatrix.a,L$t=L$a.resultMatrix.c,L$u=L$a.resultMatrix.b,L$v=L$a.resultMatrix.d,L$y=Math.abs(L$i-L$j)<=1e-4;L$r=L$y?(L$q=L$s*L$o+L$t*(L$p=L$b.resultTransform.y)+L$a.resultMatrix.tx,L$u*L$o+L$v*L$p+L$a.resultMatrix.ty):(L$p=0,L$q=L$s*L$o+L$a.resultMatrix.tx,L$u*L$o+L$a.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new L$fa,L$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(L$c,L$d,15,"#ffff00"),this._sp.graphics.drawCircle(L$q,L$r,15,"#ff00ff")),L$a.setRotation(Math.atan2(L$r-L$a.resultMatrix.ty,L$q-L$a.resultMatrix.tx));var L$z=L$a.parentBone;L$s=L$z.resultMatrix.a,L$t=L$z.resultMatrix.c,L$u=L$z.resultMatrix.b;var L$A=1/(L$s*(L$v=L$z.resultMatrix.d)-L$t*L$u),L$B=L$c-L$z.resultMatrix.tx,L$C=L$d-L$z.resultMatrix.ty,L$D=(L$B*L$v-L$C*L$t)*L$A-L$g,L$E=(L$C*L$s-L$B*L$u)*L$A-L$h,L$F=((L$B=L$q-L$z.resultMatrix.tx)*L$v-(L$C=L$r-L$z.resultMatrix.ty)*L$t)*L$A-L$g,L$G=(L$C*L$s-L$B*L$u)*L$A-L$h,L$H=Math.sqrt(L$F*L$F+L$G*L$G),L$I=L$b.length*L$k,L$J=NaN,L$K=NaN;if(L$y){var L$L=(L$D*L$D+L$E*L$E-L$H*L$H-(L$I*=L$i)*L$I)/(2*L$H*L$I);L$L<-1?L$L=-1:1<L$L&&(L$L=1),L$K=Math.acos(L$L)*L$e,L$s=L$H+L$I*L$L,L$t=L$I*Math.sin(L$K),L$J=Math.atan2(L$E*L$s-L$D*L$t,L$D*L$s+L$E*L$t)}else{var L$M=(L$s=L$i*L$I)*L$s,L$N=(L$t=L$j*L$I)*L$t,L$O=L$D*L$D+L$E*L$E,L$P=Math.atan2(L$E,L$D),L$Q=-2*L$N*L$H,L$R=L$N-L$M;if(0<(L$v=L$Q*L$Q-4*L$R*(L$u=L$N*L$H*L$H+L$M*L$O-L$M*L$N))){var L$S=Math.sqrt(L$v);L$Q<0&&(L$S=-L$S);var L$T=(L$S=-(L$Q+L$S)/2)/L$R,L$U=L$u/L$S,L$V=Math.abs(L$T)<Math.abs(L$U)?L$T:L$U;L$V*L$V<=L$O&&(L$C=Math.sqrt(L$O-L$V*L$V)*L$e,L$J=L$P-Math.atan2(L$C,L$V),L$K=Math.atan2(L$C/L$j,(L$V-L$H)/L$i))}var L$W=0,L$X=Number.MAX_VALUE,L$Y=0,L$Z=0,L$$=0,L$_=0,L$w=0,L$x=0;L$_<(L$v=(L$B=L$H+L$s)*L$B)&&(L$$=0,L$_=L$v,L$w=L$B),(L$v=(L$B=L$H-L$s)*L$B)<L$X&&(L$W=Math.PI,L$X=L$v,L$Y=L$B);var L$aa=Math.acos(-L$s*L$H/(L$M-L$N));(L$v=(L$B=L$s*Math.cos(L$aa)+L$H)*L$B+(L$C=L$t*Math.sin(L$aa))*L$C)<L$X&&(L$W=L$aa,L$X=L$v,L$Y=L$B,L$Z=L$C),L$_<L$v&&(L$$=L$aa,L$_=L$v,L$w=L$B,L$x=L$C),L$K=L$O<=(L$X+L$_)/2?(L$J=L$P-Math.atan2(L$Z*L$e,L$Y),L$W*L$e):(L$J=L$P-Math.atan2(L$x*L$e,L$w),L$$*L$e)}var L$ba=Math.atan2(L$p,L$o)*L$n,L$ca=L$a.resultTransform.skX;180<(L$J=(L$J-L$ba)*L$da.radDeg+L$l-L$ca)?L$J-=360:L$J<-180&&(L$J+=360),L$a.resultTransform.x=L$g,L$a.resultTransform.y=L$h,L$a.resultTransform.skX=L$a.resultTransform.skY=L$ca+L$J*L$f,L$ca=L$b.resultTransform.skX,180<(L$K=((L$K+L$ba)*L$da.radDeg-0)*L$n+L$m-(L$ca%=360))?L$K-=360:L$K<-180&&(L$K+=360),L$b.resultTransform.x=L$o,L$b.resultTransform.y=L$p,L$b.resultTransform.skX=L$b.resultTransform.skY=L$b.resultTransform.skY+L$K*L$f,L$a.update()}},L$a._applyIk3=function(L$a,L$b,L$c,L$d,L$e,L$f){if(0!=L$f){var L$g,L$h,L$i=L$b.resultMatrix.a*L$b.length,L$j=L$b.resultMatrix.b*L$b.length,L$k=L$i*L$i+L$j*L$j,L$l=Math.sqrt(L$k),L$m=L$a.resultMatrix.tx,L$n=L$a.resultMatrix.ty,L$o=L$b.resultMatrix.tx,L$p=L$b.resultMatrix.ty,L$q=L$o-L$m,L$r=L$p-L$n,L$s=L$q*L$q+L$r*L$r,L$t=Math.sqrt(L$s),L$u=(L$q=L$c-L$a.resultMatrix.tx)*L$q+(L$r=L$d-L$a.resultMatrix.ty)*L$r,L$v=Math.sqrt(L$u);if(L$l+L$t<=L$v||L$v+L$l<=L$t||L$v+L$t<=L$l){var L$y=NaN;L$o=L$m+(L$y=L$l+L$t<=L$v?1:-1)*(L$c-L$m)*L$t/L$v,L$p=L$n+L$y*(L$d-L$n)*L$t/L$v}else{var L$z=(L$s-L$k+L$u)/(2*L$u),L$A=Math.sqrt(L$s-L$z*L$z*L$u)/L$v,L$B=L$m+L$q*L$z,L$C=L$n+L$r*L$z,L$D=-L$r*L$A,L$E=L$q*L$A;L$p=0<L$e?(L$o=L$B-L$D,L$C-L$E):(L$o=L$B+L$D,L$C+L$E)}L$g=L$o,L$h=L$p,this.isDebug&&(this._sp||(this._sp=new L$fa,L$ea.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(L$m,L$n,15,"#ff00ff"),this._sp.graphics.drawCircle(L$c,L$d,15,"#ffff00"),this._sp.graphics.drawCircle(L$g,L$h,15,"#ff00ff"));var L$F,L$G;L$F=Math.atan2(L$h-L$a.resultMatrix.ty,L$g-L$a.resultMatrix.tx),L$a.setRotation(L$F),(L$G=L$da._tempMatrix).identity(),L$G.rotate(L$F),L$G.scale(L$a.resultMatrix.getScaleX(),L$a.resultMatrix.getScaleY()),L$G.translate(L$a.resultMatrix.tx,L$a.resultMatrix.ty),L$G.copyTo(L$a.resultMatrix),L$a.updateChild();var L$H,L$I;L$H=Math.atan2(L$d-L$h,L$c-L$g),L$b.setRotation(L$H),(L$I=L$da._tempMatrix).identity(),L$I.rotate(L$H),L$I.scale(L$b.resultMatrix.getScaleX(),L$b.resultMatrix.getScaleY()),L$I.translate(L$g,L$h),L$G.copyTo(L$b.resultMatrix),L$b.updateChild()}},L$c(L$da,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new L$Ga}]),L$da}(),L$Pa=function(){function L$a(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return L$d(L$a,"laya.ani.bone.IkConstraintData"),L$a}(),L$v=function(){function L$I(L$a,L$b){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=L$a,this.position=L$a.position,this.spacing=L$a.spacing,this.rotateMix=L$a.rotateMix,this.translateMix=L$a.translateMix,this.bones=[];for(var L$c=this.data.bones,L$d=0,L$e=L$c.length;L$d<L$e;L$d++)this.bones.push(L$b[L$c[L$d]])}L$d(L$I,"laya.ani.bone.PathConstraint");var L$a=L$I.prototype;return L$a.apply=function(L$a,L$b){if(this.target){var L$c=this.translateMix,L$d=this.translateMix,L$e=0<L$d,L$f=this.data.spacingMode,L$g="length"==L$f,L$h=this.data.rotateMode,L$i="tangent"==L$h,L$j="chainScale"==L$h,L$k=[],L$l=this.bones.length,L$m=L$i?L$l:L$l+1,L$n=[];(this._spaces=L$n)[0]=this.position;var L$o=this.spacing;if(L$j||L$g)for(var L$p=0,L$q=L$m-1;L$p<L$q;){var L$r=this.bones[L$p],L$s=L$r.length,L$t=L$s*L$r.resultMatrix.a,L$u=L$s*L$r.resultMatrix.b;L$s=Math.sqrt(L$t*L$t+L$u*L$u),L$j&&(L$k[L$p]=L$s),L$n[++L$p]=L$g?Math.max(0,L$s+L$o):L$o}else for(L$p=1;L$p<L$m;L$p++)L$n[L$p]=L$o;var L$v=this.computeWorldPositions(this.target,L$a,L$b,L$m,L$i,"percent"==this.data.positionMode,"percent"==L$f);if(this._debugKey){for(L$p=0;L$p<L$v.length;L$p++)L$b.drawCircle(L$v[L$p++],L$v[L$p++],5,"#00ff00");var L$y=[];for(L$p=0;L$p<L$v.length;L$p++)L$y.push(L$v[L$p++],L$v[L$p++]);L$b.drawLines(0,0,L$y,"#ff0000")}var L$z=L$v[0],L$A=L$v[1],L$B=this.data.offsetRotation,L$C="chain"==L$h&&0==L$B,L$D=NaN;for(L$p=0,L$D=3;L$p<L$l;L$p++,L$D+=3){(L$r=this.bones[L$p]).resultMatrix.tx+=(L$z-L$r.resultMatrix.tx)*L$c,L$r.resultMatrix.ty+=(L$A-L$r.resultMatrix.ty)*L$c;var L$E=(L$t=L$v[L$D])-L$z,L$F=(L$u=L$v[L$D+1])-L$A;if(L$j&&0!=(L$s=L$k[L$p])){var L$G=(Math.sqrt(L$E*L$E+L$F*L$F)/L$s-1)*L$d+1;L$r.resultMatrix.a*=L$G,L$r.resultMatrix.c*=L$G}if(L$z=L$t,L$A=L$u,L$e){var L$H=L$r.resultMatrix.a,L$I=L$r.resultMatrix.c,L$J=L$r.resultMatrix.b,L$K=L$r.resultMatrix.d,L$L=NaN,L$M=NaN,L$N=NaN;L$L=L$i?L$v[L$D-1]:0==L$n[L$p+1]?L$v[L$D+2]:Math.atan2(L$F,L$E),L$L-=Math.atan2(L$J,L$H)-L$B/180*Math.PI,L$C&&(L$M=Math.cos(L$L),L$N=Math.sin(L$L),L$z+=((L$s=L$r.length)*(L$M*L$H-L$N*L$J)-L$E)*L$d,L$A+=(L$s*(L$N*L$H+L$M*L$J)-L$F)*L$d),L$L>Math.PI?L$L-=2*Math.PI:L$L<-Math.PI&&(L$L+=2*Math.PI),L$L*=L$d,L$M=Math.cos(L$L),L$N=Math.sin(L$L),L$r.resultMatrix.a=L$M*L$H-L$N*L$J,L$r.resultMatrix.c=L$M*L$I-L$N*L$K,L$r.resultMatrix.b=L$N*L$H+L$M*L$J,L$r.resultMatrix.d=L$N*L$I+L$M*L$K}}}},L$a.computeWorldVertices2=function(L$a,L$b,L$c,L$d,L$e,L$f){var L$g,L$h,L$i=L$a.currDisplayData.bones,L$j=L$a.currDisplayData.weights,L$k=L$a.currDisplayData.triangles,L$l=0,L$m=0,L$n=0,L$o=0,L$p=0,L$q=0,L$r=0,L$s=0,L$t=0,L$u=0,L$v=0;if(null!=L$i){for(L$l=0;L$l<L$c;L$l+=2)L$m+=(L$o=L$i[L$m])+1,L$n+=L$o;var L$y=L$b;for(L$p=L$f,L$q=3*L$n;L$p<L$d;L$p+=2){for(L$s=L$r=0,L$o=L$i[L$m++],L$o+=L$m;L$m<L$o;L$m++,L$q+=3){L$g=L$y[L$i[L$m]].resultMatrix,L$t=L$j[L$q],L$u=L$j[L$q+1];var L$z=L$j[L$q+2];L$r+=(L$t*L$g.a+L$u*L$g.c+L$g.tx)*L$z,L$s+=(L$t*L$g.b+L$u*L$g.d+L$g.ty)*L$z}L$e[L$p]=L$r,L$e[L$p+1]=L$s}}else{var L$A,L$B;if(L$k||(L$k=L$j),L$a.deformData&&(L$k=L$a.deformData),L$A=L$a.parent,L$b)for(L$v=L$b.length,L$l=0;L$l<L$v;L$l++)if(L$b[L$l].name==L$A){L$h=L$b[L$l];break}L$h&&(L$B=L$h.resultMatrix),L$B||(L$B=L$I._tempMt);var L$C=L$B.tx,L$D=L$B.ty,L$E=L$B.a,L$F=L$B.b,L$G=L$B.c,L$H=L$B.d;for(L$h&&(L$H*=L$h.d),L$m=L$c,L$p=L$f;L$p<L$d;L$m+=2,L$p+=2)L$t=L$k[L$m],L$u=L$k[L$m+1],L$e[L$p]=L$t*L$E+L$u*L$F+L$C,L$e[L$p+1]=-(L$t*L$G+L$u*L$H+L$D)}},L$a.computeWorldPositions=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g){L$a.currDisplayData.bones,L$a.currDisplayData.weights,L$a.currDisplayData.triangles;var L$h=[],L$i=0,L$j=L$a.currDisplayData.verLen,L$k=this.position,L$l=this._spaces,L$m=[],L$n=[],L$o=L$j/6,L$p=-1,L$q=NaN,L$r=0,L$s=0,L$t=NaN,L$u=NaN,L$v=NaN,L$y=NaN;if(L$o--,L$j-=4,this.computeWorldVertices2(L$a,L$b,2,L$j,L$h,0),this._debugKey)for(L$i=0;L$i<L$h.length;)L$c.drawCircle(L$h[L$i++],L$h[L$i++],10,"#ff0000");L$m=L$h,this._curves.length=L$o;var L$z=this._curves,L$A=L$m[L$q=0],L$B=L$m[1],L$C=0,L$D=0,L$E=0,L$F=0,L$G=0,L$H=0,L$I=NaN,L$J=NaN,L$K=NaN,L$L=NaN,L$M=NaN,L$N=NaN,L$O=NaN,L$P=NaN,L$Q=0;for(L$i=0,L$Q=2;L$i<L$o;L$i++,L$Q+=6)L$C=L$m[L$Q],L$D=L$m[L$Q+1],L$E=L$m[L$Q+2],L$F=L$m[L$Q+3],L$M=2*(L$I=.1875*(L$A-2*L$C+L$E))+(L$K=.09375*(3*(L$C-L$E)-L$A+(L$G=L$m[L$Q+4]))),L$N=2*(L$J=.1875*(L$B-2*L$D+L$F))+(L$L=.09375*(3*(L$D-L$F)-L$B+(L$H=L$m[L$Q+5]))),L$O=.75*(L$C-L$A)+L$I+.16666667*L$K,L$P=.75*(L$D-L$B)+L$J+.16666667*L$L,L$q+=Math.sqrt(L$O*L$O+L$P*L$P),L$O+=L$M,L$P+=L$N,L$M+=L$K,L$N+=L$L,L$q+=Math.sqrt(L$O*L$O+L$P*L$P),L$O+=L$M,L$P+=L$N,L$q+=Math.sqrt(L$O*L$O+L$P*L$P),L$O+=L$M+L$K,L$P+=L$N+L$L,L$q+=Math.sqrt(L$O*L$O+L$P*L$P),L$z[L$i]=L$q,L$A=L$G,L$B=L$H;if(L$f&&(L$k*=L$q),L$g)for(L$i=0;L$i<L$d;L$i++)L$l[L$i]*=L$q;var L$R=this._segments,L$S=0,L$T=0;for(L$T=L$s=L$r=L$i=0;L$i<L$d;L$i++,L$r+=3)if((L$t=L$k+=L$u=L$l[L$i])<0)this.addBeforePosition(L$t,L$m,0,L$n,L$r);else if(L$q<L$t)this.addAfterPosition(L$t-L$q,L$m,L$j-4,L$n,L$r);else{for(;;L$s++)if(!((L$y=L$z[L$s])<L$t)){0==L$s?L$t/=L$y:L$t=(L$t-(L$v=L$z[L$s-1]))/(L$y-L$v);break}if(L$s!=L$p){var L$U=6*(L$p=L$s);for(L$A=L$m[L$U],L$B=L$m[L$U+1],L$C=L$m[L$U+2],L$D=L$m[L$U+3],L$E=L$m[L$U+4],L$F=L$m[L$U+5],L$M=2*(L$I=.03*(L$A-2*L$C+L$E))+(L$K=.006*(3*(L$C-L$E)-L$A+(L$G=L$m[L$U+6]))),L$N=2*(L$J=.03*(L$B-2*L$D+L$F))+(L$L=.006*(3*(L$D-L$F)-L$B+(L$H=L$m[L$U+7]))),L$O=.3*(L$C-L$A)+L$I+.16666667*L$K,L$P=.3*(L$D-L$B)+L$J+.16666667*L$L,L$S=Math.sqrt(L$O*L$O+L$P*L$P),L$R[0]=L$S,L$U=1;L$U<8;L$U++)L$O+=L$M,L$P+=L$N,L$M+=L$K,L$N+=L$L,L$S+=Math.sqrt(L$O*L$O+L$P*L$P),L$R[L$U]=L$S;L$O+=L$M,L$P+=L$N,L$S+=Math.sqrt(L$O*L$O+L$P*L$P),L$R[8]=L$S,L$O+=L$M+L$K,L$P+=L$N+L$L,L$S+=Math.sqrt(L$O*L$O+L$P*L$P),L$R[9]=L$S,L$T=0}for(L$t*=L$S;;L$T++)if(!((L$y=L$R[L$T])<L$t)){0==L$T?L$t/=L$y:L$t=L$T+(L$t-(L$v=L$R[L$T-1]))/(L$y-L$v);break}this.addCurvePosition(.1*L$t,L$A,L$B,L$C,L$D,L$E,L$F,L$G,L$H,L$n,L$r,L$e||0<L$i&&0==L$u)}return L$n},L$a.addBeforePosition=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$b[L$c],L$g=L$b[L$c+1],L$h=L$b[L$c+2]-L$f,L$i=L$b[L$c+3]-L$g,L$j=Math.atan2(L$i,L$h);L$d[L$e]=L$f+L$a*Math.cos(L$j),L$d[L$e+1]=L$g+L$a*Math.sin(L$j),L$d[L$e+2]=L$j},L$a.addAfterPosition=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$b[L$c+2],L$g=L$b[L$c+3],L$h=L$f-L$b[L$c],L$i=L$g-L$b[L$c+1],L$j=Math.atan2(L$i,L$h);L$d[L$e]=L$f+L$a*Math.cos(L$j),L$d[L$e+1]=L$g+L$a*Math.sin(L$j),L$d[L$e+2]=L$j},L$a.addCurvePosition=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k,L$l){0==L$a&&(L$a=1e-4);var L$m=L$a*L$a,L$n=L$m*L$a,L$o=1-L$a,L$p=L$o*L$o,L$q=L$p*L$o,L$r=L$o*L$a,L$s=3*L$r,L$t=L$o*L$s,L$u=L$s*L$a,L$v=L$b*L$q+L$d*L$t+L$f*L$u+L$h*L$n,L$y=L$c*L$q+L$e*L$t+L$g*L$u+L$i*L$n;L$j[L$k]=L$v,L$j[L$k+1]=L$y,L$j[L$k+2]=L$l?Math.atan2(L$y-(L$c*L$p+L$e*L$r*2+L$g*L$m),L$v-(L$b*L$p+L$d*L$r*2+L$f*L$m)):0},L$I.NONE=-1,L$I.BEFORE=-2,L$I.AFTER=-3,L$c(L$I,["_tempMt",function(){return this._tempMt=new L$Ga}]),L$I}(),L$Qa=function(){function L$a(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return L$d(L$a,"laya.ani.bone.PathConstraintData"),L$a}(),L$Ra=function(){function L$a(){this.name=null,this.slotArr=[]}return L$d(L$a,"laya.ani.bone.SkinData"),L$a}(),L$Sa=function(){function L$a(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}L$d(L$a,"laya.ani.bone.SkinSlotDisplayData");var L$b=L$a.prototype;return L$b.createTexture=function(L$a){return this.texture||(this.texture=new L$Ha(L$a.bitmap,this.uvs),L$a.bitmap.alphaTexture&&(this.texture.alphaTexture=new L$Ha(L$a.bitmap.alphaTexture,this.uvs)),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=L$a.height,this.texture.height=L$a.width,this.texture.offsetX=-L$a.offsetX,this.texture.offsetY=-L$a.offsetY,this.texture.sourceWidth=L$a.sourceHeight,this.texture.sourceHeight=L$a.sourceWidth):(this.texture.width=L$a.width,this.texture.height=L$a.height,this.texture.offsetX=-L$a.offsetX,this.texture.offsetY=-L$a.offsetY,this.texture.sourceWidth=L$a.sourceWidth,this.texture.sourceHeight=L$a.sourceHeight),L$q.isWebGL||this.uvs[1]>this.uvs[5]&&(this.texture.offsetY=this.texture.sourceHeight-this.texture.height-this.texture.offsetY)),this.texture},L$b.destory=function(){this.texture&&this.texture.destroy()},L$a}(),L$Ta=function(){function L$a(){this.name=null,this.displayArr=[]}return L$d(L$a,"laya.ani.bone.SlotData"),L$a.prototype.getDisplayByName=function(L$a){for(var L$b=0,L$c=this.displayArr.length;L$b<L$c;L$b++)if(this.displayArr[L$b].attachmentName==L$a)return L$b;return-1},L$a}(),L$y=function(){function L$a(L$a,L$b){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=L$p(2,0),this._data=L$a,null==this._bones&&(this._bones=[]),this.target=L$b[L$a.targetIndex];var L$c,L$d=0;for(L$d=0,L$c=L$a.boneIndexs.length;L$d<L$c;L$d++)this._bones.push(L$b[L$a.boneIndexs[L$d]]);this.rotateMix=L$a.rotateMix,this.translateMix=L$a.translateMix,this.scaleMix=L$a.scaleMix,this.shearMix=L$a.shearMix}return L$d(L$a,"laya.ani.bone.TfConstraint"),L$a.prototype.apply=function(){for(var L$a,L$b=this.target.resultMatrix.a,L$c=this.target.resultMatrix.b,L$d=this.target.resultMatrix.c,L$e=this.target.resultMatrix.d,L$f=0,L$g=this._bones.length;L$f<L$g;L$f++){if(L$a=this._bones[L$f],0<this.rotateMix){var L$h=L$a.resultMatrix.a,L$i=L$a.resultMatrix.b,L$j=L$a.resultMatrix.c,L$k=L$a.resultMatrix.d,L$l=Math.atan2(L$d,L$b)-Math.atan2(L$j,L$h)+this._data.offsetRotation*Math.PI/180;L$l>Math.PI?L$l-=2*Math.PI:L$l<-Math.PI&&(L$l+=2*Math.PI),L$l*=this.rotateMix;var L$m=Math.cos(L$l),L$n=Math.sin(L$l);L$a.resultMatrix.a=L$m*L$h-L$n*L$j,L$a.resultMatrix.b=L$m*L$i-L$n*L$k,L$a.resultMatrix.c=L$n*L$h+L$m*L$j,L$a.resultMatrix.d=L$n*L$i+L$m*L$k}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),L$a.resultMatrix.tx+=(this._temp[0]-L$a.resultMatrix.tx)*this.translateMix,L$a.resultMatrix.ty+=(this._temp[1]-L$a.resultMatrix.ty)*this.translateMix,L$a.updateChild()),0<this.scaleMix){var L$o=Math.sqrt(L$a.resultMatrix.a*L$a.resultMatrix.a+L$a.resultMatrix.c*L$a.resultMatrix.c),L$p=Math.sqrt(L$b*L$b+L$d*L$d),L$q=1e-5<L$o?(L$o+(L$p-L$o+this._data.offsetScaleX)*this.scaleMix)/L$o:0;L$a.resultMatrix.a*=L$q,L$a.resultMatrix.c*=L$q,L$o=Math.sqrt(L$a.resultMatrix.b*L$a.resultMatrix.b+L$a.resultMatrix.d*L$a.resultMatrix.d),L$p=Math.sqrt(L$c*L$c+L$e*L$e),L$q=1e-5<L$o?(L$o+(L$p-L$o+this._data.offsetScaleY)*this.scaleMix)/L$o:0,L$a.resultMatrix.b*=L$q,L$a.resultMatrix.d*=L$q}if(0<this.shearMix){L$i=L$a.resultMatrix.b,L$k=L$a.resultMatrix.d;var L$r=Math.atan2(L$k,L$i);(L$l=Math.atan2(L$e,L$c)-Math.atan2(L$d,L$b)-(L$r-Math.atan2(L$a.resultMatrix.c,L$a.resultMatrix.a)))>Math.PI?L$l-=2*Math.PI:L$l<-Math.PI&&(L$l+=2*Math.PI),L$l=L$r+(L$l+this._data.offsetShearY*Math.PI/180)*this.shearMix,L$q=Math.sqrt(L$i*L$i+L$k*L$k),L$a.resultMatrix.b=Math.cos(L$l)*L$q,L$a.resultMatrix.d=Math.sin(L$l)*L$q}}},L$a}(),L$Ua=function(){function L$a(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return L$d(L$a,"laya.ani.bone.TfConstraintData"),L$a}(),L$Va=function(){function L$a(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}L$d(L$a,"laya.ani.bone.Transform");var L$b=L$a.prototype;return L$b.initData=function(L$a){null!=L$a.x&&(this.x=L$a.x),null!=L$a.y&&(this.y=L$a.y),null!=L$a.skX&&(this.skX=L$a.skX),null!=L$a.skY&&(this.skY=L$a.skY),null!=L$a.scX&&(this.scX=L$a.scX),null!=L$a.scY&&(this.scY=L$a.scY)},L$b.getMatrix=function(){var L$a;return(L$a=this.mMatrix?this.mMatrix:this.mMatrix=new L$Ga).identity(),L$a.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(L$a,this.skewX*Math.PI/180,this.skewY*Math.PI/180),L$a.rotate(this.skX*Math.PI/180),L$a.translate(this.x,this.y),L$a},L$b.skew=function(L$a,L$b,L$c){var L$d=Math.sin(L$c),L$e=Math.cos(L$c),L$f=Math.sin(L$b),L$g=Math.cos(L$b);return L$a.setTo(L$a.a*L$g-L$a.b*L$d,L$a.a*L$f+L$a.b*L$e,L$a.c*L$g-L$a.d*L$d,L$a.c*L$f+L$a.d*L$e,L$a.tx*L$g-L$a.ty*L$d,L$a.tx*L$f+L$a.ty*L$e),L$a},L$a}(),L$z=function(){function L$a(){}return L$d(L$a,"laya.ani.bone.UVTools"),L$a.getRelativeUV=function(L$a,L$b,L$c){var L$d=L$a[0],L$e=L$a[2]-L$a[0],L$f=L$a[1],L$g=L$a[5]-L$a[1];L$c||(L$c=[]),L$c.length=L$b.length;var L$h,L$i=0;L$h=L$c.length;var L$j=1/L$e,L$k=1/L$g;for(L$i=0;L$i<L$h;L$i+=2)L$c[L$i]=(L$b[L$i]-L$d)*L$j,L$c[L$i+1]=(L$b[L$i+1]-L$f)*L$k;return L$c},L$a.getAbsoluteUV=function(L$a,L$b,L$c){if(0==L$a[0]&&0==L$a[1]&&1==L$a[4]&&1==L$a[5])return L$c?(L$r.copyArray(L$c,L$b),L$c):L$b;var L$d=L$a[0],L$e=L$a[2]-L$a[0],L$f=L$a[1],L$g=L$a[5]-L$a[1];L$c||(L$c=[]),L$c.length=L$b.length;var L$h,L$i=0;for(L$h=L$c.length,L$i=0;L$i<L$h;L$i+=2)L$c[L$i]=L$b[L$i]*L$e+L$d,L$c[L$i+1]=L$b[L$i+1]*L$g+L$f;return L$c},L$a}(),L$I=function(){function L$a(){this.startTime=NaN,this.duration=NaN,this.interpolationData=null,this.data=null,this.nextData=null}return L$d(L$a,"laya.ani.KeyFramesContent"),L$a}(),L$A=function(){function L$k(){}return L$d(L$k,"laya.ani.math.BezierLerp"),L$k.getBezierRate=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$k._getBezierParamKey(L$b,L$c,L$d,L$e),L$g=100*L$f+L$a;if(L$k._bezierResultCache[L$g])return L$k._bezierResultCache[L$g];var L$h,L$i=L$k._getBezierPoints(L$b,L$c,L$d,L$e,L$f),L$j=0;for(L$h=L$i.length,L$j=0;L$j<L$h;L$j+=2)if(L$a<=L$i[L$j])return L$k._bezierResultCache[L$g]=L$i[L$j+1],L$i[L$j+1];return L$k._bezierResultCache[L$g]=1},L$k._getBezierParamKey=function(L$a,L$b,L$c,L$d){return 100*(100*(100*(100*L$a+L$b)+L$c)+L$d)},L$k._getBezierPoints=function(L$a,L$b,L$c,L$d,L$e){return L$k._bezierPointsCache[L$e]?L$k._bezierPointsCache[L$e]:(L$f=[0,0,L$a,L$b,L$c,L$d,1,1],L$g=(new L$h).getBezierPoints(L$f,100,3),L$k._bezierPointsCache[L$e]=L$g);var L$f,L$g},L$k._bezierResultCache={},L$k._bezierPointsCache={},L$k}(),L$B=function(L$a){function L$b(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!1,L$b.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60,this.returnToZeroStopped=!1}L$d(L$b,"laya.ani.AnimationPlayer",L$e);var L$c=L$b.prototype;return L$ea.imps(L$c,{"laya.resource.IDestroy":!0}),L$c._onTempletLoadedComputeFullKeyframeIndices=function(L$a,L$b,L$c){this._templet===L$c&&this._cachePlayRate===L$a&&this._cacheFrameRate===L$b&&this._computeFullKeyframeIndices()},L$c._computeFullKeyframeIndices=function(){for(var L$a=this._fullFrames=[],L$b=this._templet,L$c=this._cacheFrameRateInterval*this._cachePlayRate,L$d=0,L$e=L$b.getAnimationCount();L$d<L$e;L$d++){for(var L$f=[],L$g=0,L$h=L$b.getAnimation(L$d).nodes.length;L$g<L$h;L$g++){for(var L$i=L$b.getAnimation(L$d).nodes[L$g],L$j=Math.floor(L$i.playTime/L$c+.01),L$k=new Uint16Array(L$j+1),L$l=-1,L$m=0,L$n=L$i.keyFrame.length;L$m<L$n;L$m++){var L$o=L$i.keyFrame[L$m],L$p=L$o.startTime,L$q=L$p+L$o.duration+L$c;do{for(var L$r=Math.floor(L$p/L$c+.5),L$s=L$l+1;L$s<L$r;L$s++)L$k[L$s]=L$m;L$k[L$l=L$r]=L$m,L$p+=L$c}while(L$p<=L$q)}L$f.push(L$k)}L$a.push(L$f)}},L$c._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},L$c._calculatePlayDuration=function(){if(0!==this.state){var L$a=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=L$a),this._playEnd>L$a&&(this._playEnd=L$a),this._playDuration=this._playEnd-this._playStart}},L$c._setPlayParams=function(L$a,L$b){this._currentTime=L$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/L$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*L$b},L$c._setPlayParamsWhenStop=function(L$a,L$b){this._currentTime=L$a,this._currentKeyframeIndex=Math.max(Math.floor(L$a/L$b+.01),0),this._currentFrameTime=this._currentKeyframeIndex*L$b,this._currentAnimationClipIndex=-1},L$c._update=function(L$a){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var L$b=this._cacheFrameRateInterval*this._cachePlayRate,L$c=0;this._startUpdateLoopCount!==L$o.loopCount&&(L$c=L$a*this.playbackRate,this._elapsedPlaybackTime+=L$c);var L$d=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=L$d)return this._setPlayParamsWhenStop(L$d,L$b),void this.event("stopped");if(L$c+=this._currentTime,0<L$d)if(L$d<=L$c)do{if(L$c-=L$d,this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(L$d,L$b),this._stopWhenCircleFinish=!1,void this.event("stopped");L$c<L$d&&(this._setPlayParams(L$c,L$b),this.event("complete"))}while(L$d<=L$c);else this._setPlayParams(L$c,L$b);else{if(this._stopWhenCircleFinish)return this._setPlayParamsWhenStop(L$d,L$b),this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},L$c._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},L$c.play=function(L$a,L$b,L$c,L$d,L$e){if(void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=1),void 0===L$c&&(L$c=2147483647),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(L$c<0||L$d<0||L$e<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==L$e&&L$e<L$d)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=L$b,this._overallDuration=L$c,this._playStart=L$d,this._playEnd=L$e,this._paused=!1,this._currentAnimationClipIndex=L$a,this._currentKeyframeIndex=0,this._startUpdateLoopCount=L$o.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this._update(0)},L$c.playByFrame=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$a&&(L$a=0),void 0===L$b&&(L$b=1),void 0===L$c&&(L$c=2147483647),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=30);var L$g=1e3/L$f;this.play(L$a,L$b,L$c,L$d*L$g,L$e*L$g)},L$c.stop=function(L$a){void 0===L$a&&(L$a=!0),L$a?(this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},L$f(0,L$c,"playEnd",function(){return this._playEnd}),L$f(0,L$c,"templet",function(){return this._templet},function(L$a){0===!this.state&&this.stop(!0),this._templet!==L$a&&((this._templet=L$a).loaded?this._computeFullKeyframeIndices():L$a.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),L$f(0,L$c,"playStart",function(){return this._playStart}),L$f(0,L$c,"playDuration",function(){return this._playDuration}),L$f(0,L$c,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),L$f(0,L$c,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),L$f(0,L$c,"overallDuration",function(){return this._overallDuration}),L$f(0,L$c,"currentFrameTime",function(){return this._currentFrameTime}),L$f(0,L$c,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),L$f(0,L$c,"currentPlayTime",function(){return this._currentTime+this._playStart}),L$f(0,L$c,"cachePlayRate",function(){return this._cachePlayRate},function(L$a){this._cachePlayRate!==L$a&&(this._cachePlayRate=L$a,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[L$a,this._cacheFrameRate])))}),L$f(0,L$c,"cacheFrameRate",function(){return this._cacheFrameRate},function(L$a){this._cacheFrameRate!==L$a&&(this._cacheFrameRate=L$a,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,L$a])))}),L$f(0,L$c,"currentTime",null,function(L$a){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(L$a<this._playStart||L$a>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=L$o.loopCount;var L$b=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=L$a,this._currentKeyframeIndex=Math.max(Math.floor(this.currentPlayTime/L$b),0),this._currentFrameTime=this._currentKeyframeIndex*L$b}}),L$f(0,L$c,"paused",function(){return this._paused},function(L$a){(this._paused=L$a)&&this.event("paused")}),L$f(0,L$c,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),L$f(0,L$c,"destroyed",function(){return this._destroyed}),L$b}(),L$J=function(L$a){function L$b(){L$b.__super.call(this),L$q.isConchNode&&(this.drawSkin=function(L$a){L$a.transform||(L$a.transform=L$Ga.EMPTY),this._addCmd([L$a]),this.setSkinMesh&&this.setSkinMesh(L$a._ps,L$a.mVBData,L$a.mEleNum,0,L$a.mTexture,L$a.transform)})}return L$d(L$b,"laya.ani.GraphicsAni",L$g),L$b.prototype.drawSkin=function(L$a){var L$b=[L$a];this._saveToCmd(L$q._context._drawSkin,L$b)},L$b.create=function(){return L$b._caches.pop()||new L$b},L$b.recycle=function(L$a){L$a.clear(),L$b._caches.push(L$a)},L$b._caches=[],L$b}(),L$K=function(L$a){function L$s(){this._aniMap={},this.unfixedLastAniIndex=-1,L$s.__super.call(this),this._anis=new Array}L$d(L$s,"laya.ani.AnimationTemplet",L$k);var L$b=L$s.prototype;return L$b.parse=function(L$a){var L$b=new L$Fa(L$a);this._aniVersion=L$b.readUTFString(),L$t.parse(this,L$b)},L$b._calculateKeyFrame=function(L$a,L$b,L$c){var L$d=L$a.keyFrame;L$d[L$b]=L$d[0];for(var L$e=0;L$e<L$b;L$e++){var L$f=L$d[L$e];L$f.nextData=0===L$f.duration?L$f.data:L$d[L$e+1].data}L$d.length--},L$b.onAsynLoaded=function(L$a,L$b,L$c){var L$d=new L$Fa(L$b);switch(this._aniVersion=L$d.readUTFString(),this._aniVersion){case"LAYAANIMATION:02":L$u.parse(this,L$d);break;default:L$t.parse(this,L$d)}this._endLoaded()},L$b.disposeResource=function(){this._aniVersion=null,this._anis=null,this._aniMap=null,this._publicExtData=null,this.unfixedCurrentFrameIndexes=null,this.unfixedCurrentTimes=null,this.unfixedKeyframes=null,this._aniClassName=null,this._animationDatasCache=null},L$b.getAnimationCount=function(){return this._anis.length},L$b.getAnimation=function(L$a){return this._anis[L$a]},L$b.getAniDuration=function(L$a){return this._anis[L$a].playTime},L$b.getNodes=function(L$a){return this._anis[L$a].nodes},L$b.getNodeIndexWithName=function(L$a,L$b){return this._anis[L$a].bone3DMap[L$b]},L$b.getNodeCount=function(L$a){return this._anis[L$a].nodes.length},L$b.getTotalkeyframesLength=function(L$a){return this._anis[L$a].totalKeyframeDatasLength},L$b.getPublicExtData=function(){return this._publicExtData},L$b.getAnimationDataWithCache=function(L$a,L$b,L$c,L$d){var L$e=L$b[L$c];if(L$e){var L$f=L$e[L$a];return L$f?L$f[L$d]:null}return null},L$b.setAnimationDataWithCache=function(L$a,L$b,L$c,L$d,L$e){var L$f=L$b[L$c]||(L$b[L$c]={});(L$f[L$a]||(L$f[L$a]=[]))[L$d]=L$e},L$b.getOriginalData=function(L$a,L$b,L$c,L$d,L$e){for(var L$f=this._anis[L$a].nodes,L$g=0,L$h=0,L$i=L$f.length,L$j=0;L$h<L$i;L$h++){var L$k,L$l=L$f[L$h];L$k=L$l.keyFrame[L$c[L$h][L$d]],L$l.dataOffset=L$j;var L$m=L$e-L$k.startTime,L$n=L$l.lerpType;if(L$n)switch(L$n){case 0:case 1:for(L$g=0;L$g<L$l.keyframeWidth;)L$g+=L$l.interpolationMethod[L$g](L$l,L$g,L$b,L$j+L$g,L$k.data,L$m,null,L$k.duration,L$k.nextData);break;case 2:var L$o=L$k.interpolationData,L$p=L$o.length,L$q=0;for(L$g=0;L$g<L$p;){var L$r=L$o[L$g];switch(L$r){case 6:case 7:L$g+=L$s.interpolation[L$r](L$l,L$q,L$b,L$j+L$q,L$k.data,L$m,null,L$k.duration,L$k.nextData,L$o,L$g+1);break;default:L$g+=L$s.interpolation[L$r](L$l,L$q,L$b,L$j+L$q,L$k.data,L$m,null,L$k.duration,L$k.nextData)}L$q++}}else for(L$g=0;L$g<L$l.keyframeWidth;)L$g+=L$l.interpolationMethod[L$g](L$l,L$g,L$b,L$j+L$g,L$k.data,L$m,null,L$k.duration,L$k.nextData);L$j+=L$l.keyframeWidth}},L$b.getNodesCurrentFrameIndex=function(L$a,L$b){var L$c=this._anis[L$a].nodes;L$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(L$c.length),this.unfixedCurrentTimes=new Float32Array(L$c.length),this.unfixedLastAniIndex=L$a);for(var L$d=0,L$e=L$c.length;L$d<L$e;L$d++){var L$f=L$c[L$d];for(L$b<this.unfixedCurrentTimes[L$d]&&(this.unfixedCurrentFrameIndexes[L$d]=0),this.unfixedCurrentTimes[L$d]=L$b;this.unfixedCurrentFrameIndexes[L$d]<L$f.keyFrame.length&&!(L$f.keyFrame[this.unfixedCurrentFrameIndexes[L$d]].startTime>this.unfixedCurrentTimes[L$d]);)this.unfixedCurrentFrameIndexes[L$d]++;this.unfixedCurrentFrameIndexes[L$d]--}return this.unfixedCurrentFrameIndexes},L$b.getOriginalDataUnfixedRate=function(L$a,L$b,L$c){var L$d=this._anis[L$a].nodes;L$a!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(L$d.length),this.unfixedCurrentTimes=new Float32Array(L$d.length),this.unfixedKeyframes=L$p(L$d.length),this.unfixedLastAniIndex=L$a);for(var L$e=0,L$f=0,L$g=L$d.length,L$h=0;L$f<L$g;L$f++){var L$i=L$d[L$f];for(L$c<this.unfixedCurrentTimes[L$f]&&(this.unfixedCurrentFrameIndexes[L$f]=0),this.unfixedCurrentTimes[L$f]=L$c;this.unfixedCurrentFrameIndexes[L$f]<L$i.keyFrame.length&&!(L$i.keyFrame[this.unfixedCurrentFrameIndexes[L$f]].startTime>this.unfixedCurrentTimes[L$f]);)this.unfixedKeyframes[L$f]=L$i.keyFrame[this.unfixedCurrentFrameIndexes[L$f]],this.unfixedCurrentFrameIndexes[L$f]++;var L$j=this.unfixedKeyframes[L$f];L$i.dataOffset=L$h;var L$k=L$c-L$j.startTime;if(L$i.lerpType)switch(L$i.lerpType){case 0:case 1:for(L$e=0;L$e<L$i.keyframeWidth;)L$e+=L$i.interpolationMethod[L$e](L$i,L$e,L$b,L$h+L$e,L$j.data,L$k,null,L$j.duration,L$j.nextData);break;case 2:var L$l=L$j.interpolationData,L$m=L$l.length,L$n=0;for(L$e=0;L$e<L$m;){var L$o=L$l[L$e];switch(L$o){case 6:case 7:L$e+=L$s.interpolation[L$o](L$i,L$n,L$b,L$h+L$n,L$j.data,L$k,null,L$j.duration,L$j.nextData,L$l,L$e+1);break;default:L$e+=L$s.interpolation[L$o](L$i,L$n,L$b,L$h+L$n,L$j.data,L$k,null,L$j.duration,L$j.nextData)}L$n++}}else for(L$e=0;L$e<L$i.keyframeWidth;)L$e+=L$i.interpolationMethod[L$e](L$i,L$e,L$b,L$h+L$e,L$j.data,L$k,null,L$j.duration,L$j.nextData);L$h+=L$i.keyframeWidth}},L$s._LinearInterpolation_0=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){var L$k=0===L$h?0:L$f/L$h;return L$c[L$d]=(1-L$k)*L$e[L$b]+L$k*L$i[L$b],1},L$s._QuaternionInterpolation_1=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){var L$k=0===L$h?0:L$f/L$h;return L$m.slerpQuaternionArray(L$e,L$b,L$i,L$b,L$k,L$c,L$d),4},L$s._AngleInterpolation_2=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){return 0},L$s._RadiansInterpolation_3=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){return 0},L$s._Matrix4x4Interpolation_4=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){for(var L$k=0;L$k<16;L$k++,L$b++)L$c[L$d+L$k]=L$e[L$b]+L$f*L$g[L$b];return 16},L$s._NoInterpolation_5=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j){return L$c[L$d]=L$e[L$b],1},L$s._BezierInterpolation_6=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k){return void 0===L$k&&(L$k=0),L$c[L$d]=L$e[L$b]+(L$i[L$b]-L$e[L$b])*L$A.getBezierRate(L$f/L$h,L$j[L$k],L$j[L$k+1],L$j[L$k+2],L$j[L$k+3]),5},L$s._BezierInterpolation_7=function(L$a,L$b,L$c,L$d,L$e,L$f,L$g,L$h,L$i,L$j,L$k){return void 0===L$k&&(L$k=0),L$c[L$d]=L$j[L$k+4]+L$j[L$k+5]*L$A.getBezierRate((.001*L$f+L$j[L$k+6])/L$j[L$k+7],L$j[L$k],L$j[L$k+1],L$j[L$k+2],L$j[L$k+3]),9},L$s.load=function(L$a){return L$ea.loader.create(L$a,null,null,L$s)},L$s.interpolation=[L$s._LinearInterpolation_0,L$s._QuaternionInterpolation_1,L$s._AngleInterpolation_2,L$s._RadiansInterpolation_3,L$s._Matrix4x4Interpolation_4,L$s._NoInterpolation_5,L$s._BezierInterpolation_6,L$s._BezierInterpolation_7],L$s}(),L$C=function(L$b){function L$c(L$a,L$b){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,L$c.__super.call(this),void 0===L$b&&(L$b=0),L$a&&this.init(L$a,L$b)}L$d(L$c,"laya.ani.bone.Skeleton",L$b);var L$a=L$c.prototype;return L$a.init=function(L$a,L$b){void 0===L$b&&(L$b=0);var L$c,L$d,L$e,L$f=0,L$g=0;if(1==L$b)for(this._graphicsCache=[],L$f=0,L$g=L$a.getAnimationCount();L$f<L$g;L$f++)this._graphicsCache.push([]);if(this._yReverseMatrix=L$a.yReverseMatrix,this._aniMode=L$b,this._templet=L$a,this._player=new L$B,this._player.cacheFrameRate=L$a.rate,this._player.templet=L$a,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=L$a.mBoneArr,this._rootBone=L$a.mRootBone,this._aniSectionDic=L$a.aniSectionDic,0<L$a.ikArr.length)for(this._ikArr=[],L$f=0,L$g=L$a.ikArr.length;L$f<L$g;L$f++)this._ikArr.push(new L$s(L$a.ikArr[L$f],this._boneList));if(0<L$a.pathArr.length)for(null==this._pathDic&&(this._pathDic={}),L$f=0,L$g=L$a.pathArr.length;L$f<L$g;L$f++)L$c=L$a.pathArr[L$f],L$d=new L$v(L$c,this._boneList),(L$e=this._boneSlotDic[L$c.name])&&((L$d=new L$v(L$c,this._boneList)).target=L$e),this._pathDic[L$c.name]=L$d;if(0<L$a.tfArr.length)for(this._tfArr=[],L$f=0,L$g=L$a.tfArr.length;L$f<L$g;L$f++)this._tfArr.push(new L$y(L$a.tfArr[L$f],this._boneList));if(0<L$a.skinDataArray.length){var L$h=this._templet.skinDataArray[this._skinIndex];this._skinName=L$h.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},L$a.load=function(L$a,L$b,L$c){},L$a._onLoaded=function(){},L$a._parseComplete=function(){var L$a=L$D.TEMPLET_DICTIONARY[this._aniPath];L$a&&(this.init(L$a,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},L$a._parseFail=function(){console.error("[Error]:"+this._aniPath+"解析失败")},L$a._onPlay=function(){this.event("played")},L$a._onStop=function(){var L$a,L$b=this._templet.eventAniArr[this._aniClipIndex];if(L$b&&this._eventIndex<L$b.length)for(;this._eventIndex<L$b.length;this._eventIndex++)(L$a=L$b[this._eventIndex]).time>=this._player.playStart&&L$a.time<=this._player.playEnd&&this.event("label",L$a);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},L$a._onPause=function(){this.event("paused")},L$a._parseSrcBoneMatrix=function(){var L$a=0,L$b=0;for(L$b=this._templet.srcBoneMatrixArr.length,L$a=0;L$a<L$b;L$a++)this._boneMatrixArray.push(new L$Ga);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var L$c,L$d,L$e=this._templet.boneSlotArray;for(L$a=0,L$b=L$e.length;L$a<L$b;L$a++)L$c=L$e[L$a],null==(L$d=this._bindBoneBoneSlotDic[L$c.parent])&&(this._bindBoneBoneSlotDic[L$c.parent]=L$d=[]),this._boneSlotDic[L$c.name]=L$c=L$c.copy(),L$d.push(L$c),this._boneSlotArray.push(L$c)}},L$a._emitMissedEvents=function(L$a,L$b,L$c){void 0===L$c&&(L$c=0);var L$d=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(L$d){var L$e,L$f,L$g=0;for(L$e=L$d.length,L$g=L$c;L$g<L$e;L$g++)(L$f=L$d[L$g]).time>=this._player.playStart&&L$f.time<=this._player.playEnd&&this.event("label",L$f)}},L$a._update=function(L$a){if(void 0===L$a&&(L$a=!0),!(this._pause||L$a&&this._indexControl)){var L$b=this.timer.currTimer,L$c=this._player.currentKeyframeIndex,L$d=L$b-this._lastTime;if(L$a?this._player._update(L$d):L$c=-1,this._lastTime=L$b,this._player&&(this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||0<L$d&&this._clipIndex==L$c&&this._lastUpdateAniClipIndex==this._aniClipIndex))){var L$e;this._lastUpdateAniClipIndex=this._aniClipIndex,L$c>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var L$f,L$g=this._templet.eventAniArr[this._aniClipIndex];if(L$g&&this._eventIndex<L$g.length&&((L$e=L$g[this._eventIndex]).time>=this._player.playStart&&L$e.time<=this._player.playEnd?this._player.currentPlayTime>=L$e.time&&(this.event("label",L$e),this._eventIndex++):this._eventIndex++),0==this._aniMode){if(L$f=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=L$f&&(this.graphics=L$f));var L$h=0,L$i=0;for(L$i=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,L$i-1)&&0<L$i;)L$i--;if(L$i<this._clipIndex)for(L$h=L$i;L$h<this._clipIndex;L$h++)this._createGraphics(L$h)}else if(1==this._aniMode){if(L$f=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=L$f&&(this.graphics=L$f));for(L$i=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,L$i-1)&&0<L$i;)L$i--;if(L$i<this._clipIndex)for(L$h=L$i;L$h<this._clipIndex;L$h++)this._createGraphics(L$h)}this._createGraphics()}}},L$a._createGraphics=function(L$a){void 0===L$a&&(L$a=-1),-1==L$a&&(L$a=this._clipIndex);var L$b,L$c,L$d=L$a*this._player.cacheFrameRateInterval,L$e=this._templet.drawOrderAniArr[this._aniClipIndex];if(L$e&&0<L$e.length)for(this._drawOrderIndex=0,L$b=L$e[this._drawOrderIndex];L$d>=L$b.time&&(this._drawOrder=L$b.drawOrder,this._drawOrderIndex++,!(this._drawOrderIndex>=L$e.length));)L$b=L$e[this._drawOrderIndex];0==this._aniMode||1==this._aniMode?this.graphics=L$J.create():this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=L$J.create(),L$c=this.graphics;var L$f=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],L$a,L$d);var L$g,L$h,L$i,L$j,L$k=this._aniSectionDic[this._aniClipIndex],L$l=0,L$m=0,L$n=0,L$o=0,L$p=0,L$q=this._templet.srcBoneMatrixArr.length;for(L$p=L$k[L$m=0];L$m<L$q;L$m++)L$j=this._boneList[L$m],L$i=this._templet.srcBoneMatrixArr[L$m],L$j.resultTransform.scX=L$i.scX*this._curOriginalData[L$l++],L$j.resultTransform.skX=L$i.skX+this._curOriginalData[L$l++],L$j.resultTransform.skY=L$i.skY+this._curOriginalData[L$l++],L$j.resultTransform.scY=L$i.scY*this._curOriginalData[L$l++],L$j.resultTransform.x=L$i.x+this._curOriginalData[L$l++],L$j.resultTransform.y=L$i.y+this._curOriginalData[L$l++],8===this._templet.tMatrixDataLen&&(L$j.resultTransform.skewX=L$i.skewX+this._curOriginalData[L$l++],L$j.resultTransform.skewY=L$i.skewY+this._curOriginalData[L$l++]);var L$r,L$s={},L$t={};for(L$p+=L$k[1];L$m<L$p;L$m++)L$s[(L$r=L$f[L$m]).name]=this._curOriginalData[L$l++],L$t[L$r.name]=this._curOriginalData[L$l++],this._curOriginalData[L$l++],this._curOriginalData[L$l++],this._curOriginalData[L$l++],this._curOriginalData[L$l++];var L$u,L$v,L$y={},L$z={};for(L$p+=L$k[2];L$m<L$p;L$m++)L$y[(L$r=L$f[L$m]).name]=this._curOriginalData[L$l++],L$z[L$r.name]=this._curOriginalData[L$l++],this._curOriginalData[L$l++],this._curOriginalData[L$l++],this._curOriginalData[L$l++],this._curOriginalData[L$l++];if(this._pathDic)for(L$p+=L$k[3];L$m<L$p;L$m++){if(L$r=L$f[L$m],L$u=this._pathDic[L$r.name])switch(new L$Fa(L$r.extenData).getByte()){case 1:L$u.position=this._curOriginalData[L$l++];break;case 2:L$u.spacing=this._curOriginalData[L$l++];break;case 3:L$u.rotateMix=this._curOriginalData[L$l++],L$u.translateMix=this._curOriginalData[L$l++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(L$Ga.TEMP.identity()),this._ikArr)for(L$m=0,L$p=this._ikArr.length;L$m<L$p;L$m++)L$v=this._ikArr[L$m],L$y.hasOwnProperty(L$v.name)&&(L$v.bendDirection=L$y[L$v.name]),L$z.hasOwnProperty(L$v.name)&&(L$v.mix=L$z[L$v.name]),L$v.apply();if(this._pathDic)for(var L$A in this._pathDic)(L$u=this._pathDic[L$A]).apply(this._boneList,L$c);if(this._tfArr)for(L$m=0,L$o=this._tfArr.length;L$m<L$o;L$m++)this._tfArr[L$m].apply();for(L$m=0,L$o=this._boneList.length;L$m<L$o;L$m++)if(L$j=this._boneList[L$m],L$h=this._bindBoneBoneSlotDic[L$j.name],L$j.resultMatrix.copyTo(this._boneMatrixArray[L$m]),L$h)for(L$n=0,L$p=L$h.length;L$n<L$p;L$n++)(L$g=L$h[L$n])&&L$g.setParentMatrix(L$j.resultMatrix);var L$B,L$C,L$D,L$E,L$F={},L$G=this._templet.deformAniArr;if(L$G&&0<L$G.length){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,L$m=0,L$p=this._boneSlotArray.length;L$m<L$p;L$m++)(L$g=this._boneSlotArray[L$m]).deformData=null;var L$H,L$I=L$G[this._aniClipIndex];for(L$H in L$B=L$I.default,this._setDeform(L$B,L$F,this._boneSlotArray,L$d),L$I)"default"!=L$H&&L$H!=this._skinName&&(L$B=L$I[L$H],this._setDeform(L$B,L$F,this._boneSlotArray,L$d));L$B=L$I[this._skinName],this._setDeform(L$B,L$F,this._boneSlotArray,L$d)}if(this._drawOrder)for(L$m=0,L$p=this._drawOrder.length;L$m<L$p;L$m++)L$C=L$s[(L$g=this._boneSlotArray[this._drawOrder[L$m]]).name],L$D=L$t[L$g.name],isNaN(L$D)||(L$c.save(),L$c.alpha(L$D)),isNaN(L$C)||-2==L$C||(this._templet.attachmentNames?L$g.showDisplayByName(this._templet.attachmentNames[L$C]):L$g.showDisplayByIndex(L$C)),L$F[this._drawOrder[L$m]]?(L$E=L$F[this._drawOrder[L$m]],L$g.currDisplayData&&L$E[L$g.currDisplayData.attachmentName]?L$g.deformData=L$E[L$g.currDisplayData.attachmentName]:L$g.deformData=null):L$g.deformData=null,isNaN(L$D)?L$g.draw(L$c,this._boneMatrixArray,2==this._aniMode):L$g.draw(L$c,this._boneMatrixArray,2==this._aniMode,L$D),isNaN(L$D)||L$c.restore();else for(L$m=0,L$p=this._boneSlotArray.length;L$m<L$p;L$m++)L$C=L$s[(L$g=this._boneSlotArray[L$m]).name],L$D=L$t[L$g.name],isNaN(L$D)||(L$c.save(),L$c.alpha(L$D)),isNaN(L$C)||-2==L$C||(this._templet.attachmentNames?L$g.showDisplayByName(this._templet.attachmentNames[L$C]):L$g.showDisplayByIndex(L$C)),L$F[L$m]?(L$E=L$F[L$m],L$g.currDisplayData&&L$E[L$g.currDisplayData.attachmentName]?L$g.deformData=L$E[L$g.currDisplayData.attachmentName]:L$g.deformData=null):L$g.deformData=null,isNaN(L$D)?L$g.draw(L$c,this._boneMatrixArray,2==this._aniMode):L$g.draw(L$c,this._boneMatrixArray,2==this._aniMode,L$D),isNaN(L$D)||L$c.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,L$a,L$c):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,L$a,L$c)},L$a._setDeform=function(L$a,L$b,L$c,L$d){if(L$a){var L$e,L$f,L$g,L$h=0,L$i=0,L$j=0;if(L$a)for(L$h=0,L$i=L$a.deformSlotDataList.length;L$h<L$i;L$h++)for(L$e=L$a.deformSlotDataList[L$h],L$j=0;L$j<L$e.deformSlotDisplayList.length;L$j++)L$g=L$c[(L$f=L$e.deformSlotDisplayList[L$j]).slotIndex],L$f.apply(L$d,L$g),L$b[L$f.slotIndex]||(L$b[L$f.slotIndex]={}),L$b[L$f.slotIndex][L$f.attachment]=L$f.deformData}},L$a.getAnimNum=function(){return this._templet.getAnimationCount()},L$a.getAniNameByIndex=function(L$a){return this._templet.getAniNameByIndex(L$a)},L$a.getSlotByName=function(L$a){return this._boneSlotDic[L$a]},L$a.showSkinByName=function(L$a,L$b){void 0===L$b&&(L$b=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(L$a),L$b)},L$a.showSkinByIndex=function(L$a,L$b){void 0===L$b&&(L$b=!0);for(var L$c=0;L$c<this._boneSlotArray.length;L$c++)this._boneSlotArray[L$c].showSlotData(null,L$b);if(this._templet.showSkinByIndex(this._boneSlotDic,L$a,L$b)){var L$d=this._templet.skinDataArray[L$a];this._skinIndex=L$a,this._skinName=L$d.name}this._clearCache()},L$a.showSlotSkinByIndex=function(L$a,L$b){if(0!=this._aniMode){var L$c=this.getSlotByName(L$a);L$c&&L$c.showDisplayByIndex(L$b),this._clearCache()}},L$a.showSlotSkinByName=function(L$a,L$b){if(0!=this._aniMode){var L$c=this.getSlotByName(L$a);L$c&&L$c.showDisplayByName(L$b),this._clearCache()}},L$a.replaceSlotSkinName=function(L$a,L$b,L$c){if(0!=this._aniMode){var L$d=this.getSlotByName(L$a);L$d&&L$d.replaceDisplayByName(L$b,L$c),this._clearCache()}},L$a.replaceSlotSkinByIndex=function(L$a,L$b,L$c){if(0!=this._aniMode){var L$d=this.getSlotByName(L$a);L$d&&L$d.replaceDisplayByIndex(L$b,L$c),this._clearCache()}},L$a.setSlotSkin=function(L$a,L$b){if(0!=this._aniMode){var L$c=this.getSlotByName(L$a);L$c&&L$c.replaceSkin(L$b),this._clearCache()}},L$a._clearCache=function(){if(1==this._aniMode)for(var L$a=0,L$b=this._graphicsCache.length;L$a<L$b;L$a++){for(var L$c=0,L$d=this._graphicsCache[L$a].length;L$c<L$d;L$c++){var L$e=this._graphicsCache[L$a][L$c];L$e!=this.graphics&&L$J.recycle(L$e)}this._graphicsCache[L$a].length=0}},L$a.play=function(L$a,L$b,L$c,L$d,L$e,L$f){void 0===L$c&&(L$c=!0),void 0===L$d&&(L$d=0),void 0===L$e&&(L$e=0),void 0===L$f&&(L$f=!0),this._indexControl=!1;var L$g=-1,L$h=NaN;if(L$h=L$b?2147483647:0,"string"==typeof L$a)for(var L$i=0,L$j=this._templet.getAnimationCount();L$i<L$j;L$i++){var L$k=this._templet.getAnimation(L$i);if(L$k&&L$a==L$k.name){L$g=L$i;break}}else L$g=L$a;-1<L$g&&L$g<this.getAnimNum()&&(this._aniClipIndex=L$g,(L$c||this._pause||this._currAniIndex!=L$g)&&(this._currAniIndex=L$g,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(L$g)),this._drawOrder=null,this._eventIndex=0,this._player.play(L$g,this._player.playbackRate,L$h,L$d,L$e),L$f&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=L$l.now(),this.timer.frameLoop(1,this,this._update,null,!0)),this._update()))},L$a.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),this.timer.clear(this,this._update))},L$a.playbackRate=function(L$a){this._player&&(this._player.playbackRate=L$a)},L$a.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),this.timer.clear(this,this._update))},L$a.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=L$l.now(),this.timer.frameLoop(1,this,this._update,null,!0))},L$a._getGrahicsDataWithCache=function(L$a,L$b){return this._graphicsCache[L$a][L$b]},L$a._setGrahicsDataWithCache=function(L$a,L$b,L$c){this._graphicsCache[L$a][L$b]=L$c},L$a.destroy=function(L$a){void 0===L$a&&(L$a=!0),L$b.prototype.destroy.call(this,L$a),this._templet=null,this._player&&this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,this.timer.clear(this,this._update)},L$f(0,L$a,"url",function(){return this._aniPath},function(L$a){this.load(L$a)}),L$f(0,L$a,"index",function(){return this._index},function(L$a){this.player&&(this._index=L$a,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),L$f(0,L$a,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),L$f(0,L$a,"templet",function(){return this._templet}),L$f(0,L$a,"player",function(){return this._player}),L$c.useSimpleMeshInCanvas=!1,L$c}(L$fa),L$D=function(L$b){function L$e(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._isDestroyed=!1,this._rate=30,this.isParserComplete=!1,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,L$e.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}L$d(L$e,"laya.ani.bone.Templet",L$b);var L$a=L$e.prototype;return L$a.getLoadList=function(){return this._loadList},L$a.loadAni=function(L$a){this._skBufferUrl=L$a,L$ea.loader.load(L$a,L$i.create(this,this.onComplete),null,"arraybuffer")},L$a.onComplete=function(L$a){if(this._isDestroyed)this.destroy();else{var L$b=L$j.getRes(this._skBufferUrl);L$b?(this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,L$b)):this.event("error","load failed:"+this._skBufferUrl)}},L$a.parseData=function(L$a,L$b,L$c){void 0===L$c&&(L$c=30),!this._path&&this.url&&(this._path=this.url.slice(0,this.url.lastIndexOf("/"))+"/"),this._mainTexture=L$a,this._mainTexture&&L$q.isWebGL&&L$a.bitmap&&(L$a.bitmap.enableMerageInAtlas=!1),this._rate=L$c,this.parse(L$b)},L$a.buildArmature=function(L$a){return void 0===L$a&&(L$a=0),new L$C(this,L$a)},L$a.parse=function(L$a){L$b.prototype.parse.call(this,L$a),this._endLoaded(),this._aniVersion!=L$e.LAYA_ANIMATION_VISION&&(console.error("[Error] 版本不一致，请使用IDE版本配套的重新导出"+this._aniVersion+"->"+L$e.LAYA_ANIMATION_VISION),this._loaded=!1),this.loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},L$a._parseTexturePath=function(){if(this._isDestroyed)this.destroy();else{var L$a=0;this._loadList=[];var L$b,L$c=new L$Fa(this.getPublicExtData()),L$d=0,L$e=0,L$f=0,L$g=L$c.getInt32(),L$h=L$c.readUTFString(),L$i=L$h.split("\n");for(L$a=0;L$a<L$g;L$a++)L$b=this._path+L$i[2*L$a],L$h=L$i[2*L$a+1],L$c.getFloat32(),L$c.getFloat32(),L$d=L$c.getFloat32(),L$e=L$c.getFloat32(),L$f=L$c.getFloat32(),isNaN(L$f)?0:L$f,L$f=L$c.getFloat32(),isNaN(L$f)?0:L$f,L$f=L$c.getFloat32(),isNaN(L$f)?L$d:L$f,L$f=L$c.getFloat32(),isNaN(L$f)?L$e:L$f,-1==this._loadList.indexOf(L$b)&&this._loadList.push(L$b);this.event("inited",this)}},L$a._textureComplete=function(){for(var L$a,L$b,L$c=0,L$d=this._loadList.length;L$c<L$d;L$c++)L$b=this._loadList[L$c],L$a=this._textureDic[L$b]=L$j.getRes(L$b),L$q.isWebGL&&L$a&&L$a.bitmap&&(L$a.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},L$a._parsePublicExtData=function(){var L$a=0,L$b=0,L$c=0,L$d=0,L$e=0;for(L$a=0,L$e=this.getAnimationCount();L$a<L$e;L$a++)this._graphicsCache.push([]);var L$f;L$f="Dragon"!=this._aniClassName;var L$g,L$h,L$i=new L$Fa(this.getPublicExtData()),L$j=0,L$k=0,L$l=0,L$m=0,L$n=0,L$o=0,L$p=0,L$q=0,L$r=0,L$s=L$i.getInt32(),L$t=L$i.readUTFString(),L$u=L$t.split("\n");for(L$a=0;L$a<L$s;L$a++){if(L$g=this._mainTexture,L$h=this._path+L$u[2*L$a],L$t=L$u[2*L$a+1],null==this._mainTexture&&(L$g=this._textureDic[L$h]),!L$g)return this.event("error",this),void(this.isParseFail=!0);L$j=L$i.getFloat32(),L$k=L$i.getFloat32(),L$l=L$i.getFloat32(),L$m=L$i.getFloat32(),L$r=L$i.getFloat32(),L$n=isNaN(L$r)?0:L$r,L$r=L$i.getFloat32(),L$o=isNaN(L$r)?0:L$r,L$r=L$i.getFloat32(),L$p=isNaN(L$r)?L$l:L$r,L$r=L$i.getFloat32(),L$q=isNaN(L$r)?L$m:L$r,this.subTextureDic[L$t]=L$Ha.create(L$g,L$j,L$k,L$l,L$m,-L$n,-L$o,L$p,L$q),L$g.alphaTexture&&(this.subTextureDic[L$t].alphaTexture=L$Ha.create(L$g.alphaTexture,L$j,L$k,L$l,L$m,-L$n,-L$o,L$p,L$q))}this._mainTexture=L$g;var L$v,L$y,L$z,L$A,L$B,L$C=L$i.getUint16();for(L$a=0;L$a<L$C;L$a++)(L$v=[]).push(L$i.getUint16()),L$v.push(L$i.getUint16()),L$v.push(L$i.getUint16()),L$v.push(L$i.getUint16()),this.aniSectionDic[L$a]=L$v;var L$D,L$E=L$i.getInt16(),L$F={};for(L$a=0;L$a<L$E;L$a++)L$y=new L$Ia,0==L$a?L$D=L$y:L$y.root=L$D,L$y.d=L$f?-1:1,L$A=L$i.readUTFString(),L$B=L$i.readUTFString(),L$y.length=L$i.getFloat32(),1==L$i.getByte()&&(L$y.inheritRotation=!1),1==L$i.getByte()&&(L$y.inheritScale=!1),L$y.name=L$A,L$B&&((L$z=L$F[L$B])?L$z.addChild(L$y):this.mRootBone=L$y),L$F[L$A]=L$y,this.mBoneArr.push(L$y);this.tMatrixDataLen=L$i.getUint16();var L$G,L$H,L$I=L$i.getUint16(),L$J=Math.floor(L$I/this.tMatrixDataLen),L$K=this.srcBoneMatrixArr;for(L$a=0;L$a<L$J;L$a++)(L$G=new L$Va).scX=L$i.getFloat32(),L$G.skX=L$i.getFloat32(),L$G.skY=L$i.getFloat32(),L$G.scY=L$i.getFloat32(),L$G.x=L$i.getFloat32(),L$G.y=L$i.getFloat32(),8===this.tMatrixDataLen&&(L$G.skewX=L$i.getFloat32(),L$G.skewY=L$i.getFloat32()),L$K.push(L$G),(L$y=this.mBoneArr[L$a]).transform=L$G;var L$L,L$M=L$i.getUint16(),L$N=0;for(L$a=0;L$a<L$M;L$a++){for(L$H=new L$Pa,L$N=L$i.getUint16(),L$b=0;L$b<L$N;L$b++)L$H.boneNames.push(L$i.readUTFString()),L$H.boneIndexs.push(L$i.getInt16());L$H.name=L$i.readUTFString(),L$H.targetBoneName=L$i.readUTFString(),L$H.targetBoneIndex=L$i.getInt16(),L$H.bendDirection=L$i.getFloat32(),L$H.mix=L$i.getFloat32(),L$H.isSpine=L$f,this.ikArr.push(L$H)}var L$O,L$P=L$i.getUint16(),L$Q=0;for(L$a=0;L$a<L$P;L$a++){for(L$L=new L$Ua,L$Q=L$i.getUint16(),L$b=0;L$b<L$Q;L$b++)L$L.boneIndexs.push(L$i.getInt16());L$L.name=L$i.getUTFString(),L$L.targetIndex=L$i.getInt16(),L$L.rotateMix=L$i.getFloat32(),L$L.translateMix=L$i.getFloat32(),L$L.scaleMix=L$i.getFloat32(),L$L.shearMix=L$i.getFloat32(),L$L.offsetRotation=L$i.getFloat32(),L$L.offsetX=L$i.getFloat32(),L$L.offsetY=L$i.getFloat32(),L$L.offsetScaleX=L$i.getFloat32(),L$L.offsetScaleY=L$i.getFloat32(),L$L.offsetShearY=L$i.getFloat32(),this.tfArr.push(L$L)}var L$R=L$i.getUint16(),L$S=0;for(L$a=0;L$a<L$R;L$a++){for((L$O=new L$Qa).name=L$i.readUTFString(),L$S=L$i.getUint16(),L$b=0;L$b<L$S;L$b++)L$O.bones.push(L$i.getInt16());L$O.target=L$i.readUTFString(),L$O.positionMode=L$i.readUTFString(),L$O.spacingMode=L$i.readUTFString(),L$O.rotateMode=L$i.readUTFString(),L$O.offsetRotation=L$i.getFloat32(),L$O.position=L$i.getFloat32(),L$O.spacing=L$i.getFloat32(),L$O.rotateMix=L$i.getFloat32(),L$O.translateMix=L$i.getFloat32(),this.pathArr.push(L$O)}var L$T,L$U,L$V,L$W,L$X,L$Y=0,L$Z=0,L$$=0,L$_=NaN,L$w=0,L$x=L$i.getInt16();for(L$a=0;L$a<L$x;L$a++){var L$aa=L$i.getUint8(),L$ba={};this.deformAniArr.push(L$ba);for(var L$ca=0;L$ca<L$aa;L$ca++)for((L$T=new L$Ka).skinName=L$i.getUTFString(),L$ba[L$T.skinName]=L$T,L$Y=L$i.getInt16(),L$b=0;L$b<L$Y;L$b++)for(L$U=new L$La,L$T.deformSlotDataList.push(L$U),L$Z=L$i.getInt16(),L$c=0;L$c<L$Z;L$c++)for(L$V=new L$Ma,L$U.deformSlotDisplayList.push(L$V),L$V.slotIndex=L$i.getInt16(),L$V.attachment=L$i.getUTFString(),L$$=L$i.getInt16(),L$d=0;L$d<L$$;L$d++)for(1==L$i.getByte()?L$V.tweenKeyList.push(!0):L$V.tweenKeyList.push(!1),L$_=L$i.getFloat32(),L$V.timeList.push(L$_),L$W=[],L$V.vectices.push(L$W),L$w=L$i.getInt16(),L$e=0;L$e<L$w;L$e++)L$W.push(L$i.getFloat32())}var L$da,L$ea,L$fa=L$i.getInt16(),L$ga=0,L$ha=0;for(L$a=0;L$a<L$fa;L$a++){for(L$ga=L$i.getInt16(),L$X=[],L$b=0;L$b<L$ga;L$b++){for((L$da=new L$Na).time=L$i.getFloat32(),L$ha=L$i.getInt16(),L$c=0;L$c<L$ha;L$c++)L$da.drawOrder.push(L$i.getInt16());L$X.push(L$da)}this.drawOrderAniArr.push(L$X)}var L$ia,L$ja=L$i.getInt16(),L$ka=0;for(L$a=0;L$a<L$ja;L$a++){for(L$ka=L$i.getInt16(),L$ea=[],L$b=0;L$b<L$ka;L$b++)(L$ia=new L$Oa).name=L$i.getUTFString(),L$ia.intValue=L$i.getInt32(),L$ia.floatValue=L$i.getFloat32(),L$ia.stringValue=L$i.getUTFString(),L$ia.time=L$i.getFloat32(),L$ea.push(L$ia);this.eventAniArr.push(L$ea)}var L$la=L$i.getInt16();if(0<L$la)for(this.attachmentNames=[],L$a=0;L$a<L$la;L$a++)this.attachmentNames.push(L$i.getUTFString());var L$ma,L$na,L$oa=L$i.getInt16();for(L$a=0;L$a<L$oa;L$a++)(L$ma=new L$Ja).name=L$i.readUTFString(),L$ma.parent=L$i.readUTFString(),L$ma.attachmentName=L$i.readUTFString(),L$ma.srcDisplayIndex=L$ma.displayIndex=L$i.getInt16(),(L$ma.templet=this).boneSlotDic[L$ma.name]=L$ma,null==(L$na=this.bindBoneBoneSlotDic[L$ma.parent])&&(this.bindBoneBoneSlotDic[L$ma.parent]=L$na=[]),L$na.push(L$ma),this.boneSlotArray.push(L$ma);var L$pa,L$qa,L$ra,L$sa=L$i.readUTFString().split("\n"),L$ta=0,L$ua=L$i.getUint8(),L$va=0,L$ya=0,L$za=0,L$Aa=0,L$Ba=0,L$Ca=0,L$Da=0;for(L$a=0;L$a<L$ua;L$a++){for((L$pa=new L$Ra).name=L$sa[L$ta++],L$va=L$i.getUint8(),L$b=0;L$b<L$va;L$b++){for((L$qa=new L$Ta).name=L$sa[L$ta++],L$ma=this.boneSlotDic[L$qa.name],L$ya=L$i.getUint8(),L$c=0;L$c<L$ya;L$c++){if(L$ra=new L$Sa,this.skinSlotDisplayDataArr.push(L$ra),L$ra.name=L$sa[L$ta++],L$ra.attachmentName=L$sa[L$ta++],L$ra.transform=new L$Va,L$ra.transform.scX=L$i.getFloat32(),L$ra.transform.skX=L$i.getFloat32(),L$ra.transform.skY=L$i.getFloat32(),L$ra.transform.scY=L$i.getFloat32(),L$ra.transform.x=L$i.getFloat32(),L$ra.transform.y=L$i.getFloat32(),L$qa.displayArr.push(L$ra),L$ra.width=L$i.getFloat32(),L$ra.height=L$i.getFloat32(),L$ra.type=L$i.getUint8(),L$ra.verLen=L$i.getUint16(),0<(L$E=L$i.getUint16()))for(L$ra.bones=[],L$d=0;L$d<L$E;L$d++){var L$Ea=L$i.getUint16();L$ra.bones.push(L$Ea)}if(0<(L$za=L$i.getUint16()))for(L$ra.uvs=[],L$d=0;L$d<L$za;L$d++)L$ra.uvs.push(L$i.getFloat32());if(0<(L$Aa=L$i.getUint16()))for(L$ra.weights=[],L$d=0;L$d<L$Aa;L$d++)L$ra.weights.push(L$i.getFloat32());if(0<(L$Ba=L$i.getUint16()))for(L$ra.triangles=[],L$d=0;L$d<L$Ba;L$d++)L$ra.triangles.push(L$i.getUint16());if(0<(L$Ca=L$i.getUint16()))for(L$ra.vertices=[],L$d=0;L$d<L$Ca;L$d++)L$ra.vertices.push(L$i.getFloat32());if(0<(L$Da=L$i.getUint16()))for(L$ra.lengths=[],L$d=0;L$d<L$Da;L$d++)L$ra.lengths.push(L$i.getFloat32())}L$pa.slotArr.push(L$qa)}this.skinDic[L$pa.name]=L$pa,this.skinDataArray.push(L$pa)}1==L$i.getUint8()?(this.yReverseMatrix=new L$Ga(1,0,0,-1,0,0),L$D&&L$D.setTempMatrix(this.yReverseMatrix)):L$D&&L$D.setTempMatrix(new L$Ga),this.showSkinByIndex(this.boneSlotDic,0),this.isParserComplete=!0,this.event("complete",this)},L$a.getTexture=function(L$a){var L$b=this.subTextureDic[L$a];return L$b||(L$b=this.subTextureDic[L$a.substr(0,L$a.length-1)]),null==L$b?this._mainTexture:L$b},L$a.showSkinByIndex=function(L$a,L$b,L$c){if(void 0===L$c&&(L$c=!0),L$b<0&&L$b>=this.skinDataArray.length)return!1;var L$d,L$e,L$f=0,L$g=0,L$h=this.skinDataArray[L$b];if(L$h){for(L$f=0,L$g=L$h.slotArr.length;L$f<L$g;L$f++)(L$e=L$h.slotArr[L$f])&&(L$d=L$a[L$e.name])&&(L$d.showSlotData(L$e,L$c),L$c&&"undefined"!=L$d.attachmentName&&"null"!=L$d.attachmentName?L$d.showDisplayByName(L$d.attachmentName):L$d.showDisplayByIndex(L$d.displayIndex));return!0}return!1},L$a.getSkinIndexByName=function(L$a){for(var L$b=0,L$c=this.skinDataArray.length;L$b<L$c;L$b++)if(this.skinDataArray[L$b].name==L$a)return L$b;return-1},L$a.getGrahicsDataWithCache=function(L$a,L$b){return this._graphicsCache[L$a][L$b]},L$a.setGrahicsDataWithCache=function(L$a,L$b,L$c){this._graphicsCache[L$a][L$b]=L$c},L$a.destroy=function(){var L$a;for(var L$b in this._isDestroyed=!0,this.subTextureDic)(L$a=this.subTextureDic[L$b])&&L$a.destroy();for(L$b in this._textureDic)(L$a=this._textureDic[L$b])&&L$a.destroy();for(var L$c=0,L$d=this.skinSlotDisplayDataArr.length;L$c<L$d;L$c++)this.skinSlotDisplayDataArr[L$c].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete L$e.TEMPLET_DICTIONARY[this.url],laya.resource.Resource.prototype.destroy.call(this)},L$a.getAniNameByIndex=function(L$a){var L$b=this.getAnimation(L$a);return L$b?L$b.name:null},L$f(0,L$a,"rate",function(){return this._rate},function(L$a){this._rate=L$a}),L$e.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",L$e.TEMPLET_DICTIONARY=null,L$e}(L$K)}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(L$a,L$b){"use strict";for(var L$c in Object.defineProperty(L$b,"__esModule",{value:!0}),Laya){var L$d=Laya[L$c];L$d&&L$d.__isclass&&(L$b[L$c]=L$d)}});