function DOMParser(C$zut){this.options=C$zut||{locator:{}}}function buildErrorHandler(C$zur,C$zut,C$zuo){function r(C$zue){var C$zun=C$zur[C$zue];!C$zun&&C$zua&&(C$zun=2==C$zur.length?function(C$zut){C$zur(C$zue,C$zut)}:C$zur),C$zui[C$zue]=C$zun?function(C$zut){C$zun("[xmldom "+C$zue+"]\t"+C$zut+_locator(C$zuo))}:function(){}}if(!C$zur){if(C$zut instanceof DOMHandler)return C$zut;C$zur=C$zut}var C$zui={},C$zua=C$zur instanceof Function;return C$zuo=C$zuo||{},r("warning"),r("error"),r("fatalError"),C$zui}function DOMHandler(){this.cdata=!1}function position(C$zut,C$zue){C$zue.lineNumber=C$zut.lineNumber,C$zue.columnNumber=C$zut.columnNumber}function _locator(C$zut){return C$zut?"\n@"+(C$zut.systemId||"")+"#[line:"+C$zut.lineNumber+",col:"+C$zut.columnNumber+"]":void 0}function _toString(C$zut,C$zue,C$zun){return"string"==typeof C$zut?C$zut.substr(C$zue,C$zun):C$zut.length>=C$zue+C$zun||C$zue?new java.lang.String(C$zut,C$zue,C$zun)+"":C$zut}function appendElement(C$zut,C$zue){(C$zut.currentElement||C$zut.doc).appendChild(C$zue)}DOMParser.prototype.parseFromString=function(C$zut,C$zue){var C$zun=this.options,C$zur=new XMLReader,C$zuo=C$zun.domBuilder||new DOMHandler,C$zui=C$zun.errorHandler,C$zua=C$zun.locator,C$zuc=C$zun.xmlns||{},C$zul={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return C$zua&&C$zuo.setDocumentLocator(C$zua),C$zur.errorHandler=buildErrorHandler(C$zui,C$zuo,C$zua),C$zur.domBuilder=C$zun.domBuilder||C$zuo,/\/x?html?$/.test(C$zue)&&(C$zul.nbsp="\xa0",C$zul.copy="\xa9",C$zuc[""]="http://www.w3.org/1999/xhtml"),C$zuc.xml=C$zuc.xml||"http://www.w3.org/XML/1998/namespace",C$zut?C$zur.parse(C$zut,C$zuc,C$zul):C$zur.errorHandler.error("invalid doc source"),C$zuo.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(C$zut,C$zue,C$zun,C$zur){var C$zuo=this.doc,C$zui=C$zuo.createElementNS(C$zut,C$zun||C$zue),C$zua=C$zur.length;appendElement(this,C$zui),this.currentElement=C$zui,this.locator&&position(this.locator,C$zui);for(var C$zuc=0;C$zuc<C$zua;C$zuc++){var C$zut=C$zur.getURI(C$zuc),C$zul=C$zur.getValue(C$zuc),C$zun=C$zur.getQName(C$zuc),C$zus=C$zuo.createAttributeNS(C$zut,C$zun);this.locator&&position(C$zur.getLocator(C$zuc),C$zus),C$zus.value=C$zus.nodeValue=C$zul,C$zui.setAttributeNode(C$zus)}},endElement:function(){var C$zut=this.currentElement;C$zut.tagName,this.currentElement=C$zut.parentNode},startPrefixMapping:function(){},endPrefixMapping:function(){},processingInstruction:function(C$zut,C$zue){C$zut=this.doc.createProcessingInstruction(C$zut,C$zue);this.locator&&position(this.locator,C$zut),appendElement(this,C$zut)},ignorableWhitespace:function(){},characters:function(C$zut){var C$zue;(C$zut=_toString.apply(this,arguments))&&(C$zue=this.cdata?this.doc.createCDATASection(C$zut):this.doc.createTextNode(C$zut),this.currentElement?this.currentElement.appendChild(C$zue):/^\s*$/.test(C$zut)&&this.doc.appendChild(C$zue),this.locator&&position(this.locator,C$zue))},skippedEntity:function(){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(C$zut){(this.locator=C$zut)&&(C$zut.lineNumber=0)},comment:function(C$zut){C$zut=_toString.apply(this,arguments);var C$zue=this.doc.createComment(C$zut);this.locator&&position(this.locator,C$zue),appendElement(this,C$zue)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(C$zut,C$zue,C$zun){var C$zur=this.doc.implementation;C$zur&&C$zur.createDocumentType&&(C$zur=C$zur.createDocumentType(C$zut,C$zue,C$zun),this.locator&&position(this.locator,C$zur),appendElement(this,C$zur))},warning:function(C$zut){console.warn("[xmldom warning]\t"+C$zut,_locator(this.locator))},error:function(C$zut){console.error("[xmldom error]\t"+C$zut,_locator(this.locator))},fatalError:function(C$zut){throw console.error("[xmldom fatalError]\t"+C$zut,_locator(this.locator)),C$zut}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(C$zut){DOMHandler.prototype[C$zut]=function(){return null}});var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser;