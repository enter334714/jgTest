import AKSDK from"./wxsdk/wx_aksdk.js";window.versions={wxVersion:window.config.game_ver},window.DEBUG=!1,window.PLATFORM=1,window.ENV=1,window.PACK=!0,window.WSS=!0,window.workerJsURL="",window.isWaiFangWx=!1,window.PF_INFO={base_cdn:"https://cdn-tjqy.shzbkj.com/weixin_0/",cdn:"https://cdn-tjqy.shzbkj.com/weixin_0/"},PF_INFO.pay_infos={},PF_INFO.package="0",PF_INFO.version=window.versions.wxVersion,PF_INFO.mac="",PF_INFO.os="1",PF_INFO.sdk_name="9130",PF_INFO.apiurl="https://api-tjqytest.shzbkj.com",PF_INFO.logurl="https://log-tjqytest.shzbkj.com",PF_INFO.payurl="https://pay-tjqytest.shzbkj.com",PF_INFO.apikey="MQx0mYlUWO5XYKvgAIPKWgK1w722GKih",PF_INFO.partnerId="1",PF_INFO.pkgName="",PF_INFO.device_id="",PF_INFO.from_scene=0,PF_INFO.serverList={},PF_INFO.channelNum=parseInt(PF_INFO.partnerId),PF_INFO.channel=PF_INFO.partnerId,PF_INFO.selectedServer={},PF_INFO.clientlog="https://jgcenter.sh9130.com/clientlog/",PF_INFO.showLogo=!1,PF_INFO.debugUsers="39927500|58163716|74597555",PF_INFO.tick=Date.now(),PF_INFO.configType="_weixin",PF_INFO.exposeType="_a",PF_INFO.loadingType=2,PF_INFO.lastVersion=1985,PF_INFO.wxVersion=window.versions.wxVersion,PF_INFO.wxShield=!1,PF_INFO.wxIOS=!1,PF_INFO.wxAndroid=!1,PF_INFO.wxPC=!1,window.apiRetryAmount=5,window.isCheckBan=!1,window.loadProbPkg=!1,window.loadMainPkg=!1,window.loadServerRes=!1,window.loadLoadingRes=!1,window.loadVersion=!1,window.loadOption=!1,window.loadServer=!1,window.bEnterGame=!1,window.sdkInitRes=null,window.alert=function(C$zue){console.log("alert",C$zue),wx.hideLoading({}),wx.showModal({title:"\u63d0\u793a",content:C$zue,success(C$zue){C$zue.confirm?console.log("\u7528\u6237\u70b9\u51fb\u786e\u5b9a"):C$zue.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})},window.loginAlert=function(C$zue){console.log("loginAlert",C$zue),wxHideLoading(),wx.showModal({title:"\u63d0\u793a",content:C$zue,confirmText:"\u91cd\u8bd5",cancelText:"\u9000\u51fa",success(C$zue){C$zue.confirm?window.sdkInit():C$zue.cancel&&(console.log("\u9000\u51fa\u6e38\u620f"),wx.exitMiniProgram({}))}})},window.exitAlert=function(C$zue){console.log("exitAlert",C$zue),wx.showModal({title:"\u63d0\u793a",content:C$zue,confirmText:"\u91cd\u767b",showCancel:!1,complete(C$zue){console.log("\u9000\u51fa\u6e38\u620f"),wx.exitMiniProgram({})}})},window.isShowLoading=!1,window.wxShowLoading=function(C$zue){window.isShowLoading=!0,wx.showLoading(C$zue)},window.wxHideLoading=function(){window.isShowLoading&&(window.isShowLoading=!1,wx.hideLoading({}))},window.changeServerLoading=function(C$zue){window.ServerLoading.instance.changeServerLoading(C$zue)},window.msgCheck=function(C$zue,C$zun){AKSDK.msgCheck(C$zue,function(C$zue){C$zue&&C$zue.data?1==C$zue.data.state?C$zun(!0):(C$zun(!1),console.info("\u5b58\u5728\u654f\u611f\u8bcd\uff1a "+C$zue.data.msg)):console.log("msgCheck",C$zue)})},window.getJsURL=function(C$zue){console.log("getJsURL",C$zue)},window.toAllProgress=function(C$zue){},window.toProgress=function(C$zue,C$zun,C$zur){},window.toEnterGame=function(C$zue){console.log("toEnterGame",C$zue),window.ServerLoading.instance.closeAuthor(),window.ServerLoading.instance.closeServer(),window.ServerLoading.instance.closeLoading()},window.onApiError=function(C$zue){window.toErrorAlarm(14,"onApiError "+C$zue),window.loginAlert("on api error");C$zue={id:window.PF_INFO.roleId,role:window.PF_INFO.roleName,level:window.PF_INFO.roleLevel,account:window.PF_INFO.account,version:window.PF_INFO.lastVersion,cdn:window.PF_INFO.cdn,pkgName:window.PF_INFO.pkgName,gamever:window.config.game_ver,serverid:window.PF_INFO.selectedServer?window.PF_INFO.selectedServer.server_id:0,systemInfo:window.systemInfo,error:"onApiError",stack:C$zue||"on api error"};C$zue=JSON.stringify(C$zue);console.error("API\u9519\u8bef\uff1a"+C$zue),window.clientlog(C$zue)},window.toErrorAlarm=function(C$zue,C$zun){sendApi(PF_INFO.logurl,"log.client_error",{game_pkg:PF_INFO.pkgName,partner_id:PF_INFO.partnerId,server_id:PF_INFO.selectedServer&&0<PF_INFO.selectedServer.server_id?PF_INFO.selectedServer.server_id:0,uid:0<PF_INFO.account?PF_INFO.account:0,type:C$zue,info:C$zun})},window.reqRecordError=function(C$zue){C$zue=JSON.parse(C$zue);C$zue.gamever=window.config.game_ver,C$zue.serverid=window.PF_INFO.selectedServer?window.PF_INFO.selectedServer.server_id:0,C$zue.systemInfo=window.systemInfo;C$zue=JSON.stringify(C$zue);console.error("\u4e0a\u62a5\u9519\u8bef\uff1a"+C$zue),window.clientlog(C$zue)},window.reqRecordInfo=function(C$zue,C$zun){C$zue={id:window.PF_INFO.roleId,role:window.PF_INFO.roleName,level:window.PF_INFO.roleLevel,account:window.PF_INFO.account,version:window.PF_INFO.lastVersion,cdn:window.PF_INFO.cdn,pkgName:window.PF_INFO.pkgName,gamever:window.config.game_ver,serverid:window.PF_INFO.selectedServer?window.PF_INFO.selectedServer.server_id:0,systemInfo:window.systemInfo,error:C$zue,stack:C$zun};C$zun=JSON.stringify(C$zue);console.warn("\u4e0a\u62a5\u4fe1\u606f\uff1a"+C$zun),window.clientlog(C$zun)},window.clientlog=function(C$zue){var C$zun;"devtools"!=window.PF_INFO.wxPlatform&&(C$zun=PF_INFO.clientlog+"?account="+PF_INFO.account,wx.request({url:C$zun,method:"POST",data:C$zue,header:{"content-type":"application/json","cache-control":"no-cache"},success:function(C$zue){},fail:function(C$zue){},complete:function(){}}))},window.guild=function(){function S4(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"+"+S4()+S4()+S4()};var wx_develop=!(window.sdkInit=function(){console.log("#SDK \u521d\u59cb\u5316\uff1a");var C$zue=AKSDK.getConfig();PF_INFO.channel=C$zue.partner_id,PF_INFO.channelNum=C$zue.partner_id,PF_INFO.partnerId=C$zue.partner_id,PF_INFO.pkgName=C$zue.game_pkg;C$zue={game_ver:PF_INFO.version};PF_INFO.device_id=this.guild(),wxShowLoading({title:"\u6b63\u5728\u521d\u59cb\u5316"}),AKSDK.init(C$zue,this.sdkOnInited.bind(this))});window.sdkOnInited=function(C$zue){var C$zun=C$zue.develop;sdkInitRes=C$zue,wx_develop=1==C$zun,console.log("#\u521d\u59cb\u5316\u6210\u529f   \u63d0\u5ba1\u72b6\u6001:"+C$zun+"   \u662f\u5426\u63d0\u5ba1:"+(1==C$zun)+"   \u63d0\u5ba1\u7248\u672c\u53f7:"+C$zue.game_ver+"   \u5f53\u524d\u7248\u672c\u53f7:"+window.versions.wxVersion),!C$zue.game_ver||window.compareVersion(window.versions.wxVersion,C$zue.game_ver)<0?(console.log("#\u6b63\u5f0f\u7248============================="),PF_INFO.apiurl="https://api-tjqy.shzbkj.com",PF_INFO.logurl="https://log-tjqy.shzbkj.com",PF_INFO.payurl="https://pay-tjqy.shzbkj.com",PF_INFO.cdn="https://cdn-tjqy-ll.shzbkj.com/weixin_1/",PF_INFO.spareCdn="https://cdn-tjqy-ali.shzbkj.com/weixin_1/",PF_INFO.version_name="ll",PF_INFO.wxShield=!1):0==window.compareVersion(window.versions.wxVersion,C$zue.game_ver)?(console.log("#\u5ba1\u6838\u7248============================="),PF_INFO.apiurl="https://api-tjqytest.shzbkj.com",PF_INFO.logurl="https://log-tjqytest.shzbkj.com",PF_INFO.payurl="https://pay-tjqytest.shzbkj.com",PF_INFO.cdn="https://cdn-tjqy-ll.shzbkj.com/weixin_0/",PF_INFO.spareCdn="https://cdn-tjqy-ali.shzbkj.com/weixin_1/",PF_INFO.version_name="weixin",PF_INFO.wxShield=!0):(console.log("#\u5f00\u53d1\u7248============================="),PF_INFO.apiurl="https://api-tjqytest.shzbkj.com",PF_INFO.logurl="https://log-tjqytest.shzbkj.com",PF_INFO.payurl="https://pay-tjqytest.shzbkj.com",PF_INFO.cdn="https://cdn-tjqy-ll.shzbkj.com/weixin_0/",PF_INFO.spareCdn="https://cdn-tjqy-ali.shzbkj.com/weixin_1/",PF_INFO.version_name="weixin",PF_INFO.wxShield=!1),PF_INFO.from_scene=config.from||0,this.loadVersionConfig(),this.reqPkgOptions(),window.sdkLoginRetry=5,wxShowLoading({title:"\u6b63\u5728\u767b\u5f55\u8d26\u53f7"}),AKSDK.login(this.sdkOnLogin.bind(this))},window.sdkLoginRetry=5,window.sdkOnLogin=function(C$zue,C$zun){0==C$zue&&C$zun&&C$zun.token?(PF_INFO.sdk_token=C$zun.token,wxShowLoading({title:"\u6b63\u5728\u9a8c\u8bc1\u8d26\u53f7"}),sendApi(PF_INFO.apiurl,"User.login",{platform:PF_INFO.sdk_name,partner_id:PF_INFO.partnerId,token:C$zun.token,game_pkg:PF_INFO.pkgName,deviceId:PF_INFO.device_id,scene:"WX_"+PF_INFO.from_scene},this.onUserLogin.bind(this),apiRetryAmount,onApiError)):C$zun&&C$zun.errMsg&&0<window.sdkLoginRetry&&(-1!=C$zun.errMsg.indexOf("fail interrupted")||-1!=C$zun.errMsg.indexOf("network api interrupted")||-1!=C$zun.errMsg.indexOf("Network Error")||-1!=C$zun.errMsg.indexOf("ERR_TIMED_OUT")||-1!=C$zun.errMsg.indexOf("ERR_CONNECTION_ABORTED")||-1!=C$zun.errMsg.indexOf("ERR_CONNECTION_RESET"))?(window.sdkLoginRetry--,AKSDK.login(this.sdkOnLogin.bind(this))):(window.toErrorAlarm(1,"AKSDK.login fail: status="+C$zue+",errMsg="+(C$zun?C$zun.errMsg:"")),window.reqRecordInfo("sdkOnLoginError",JSON.stringify({status:C$zue,data:C$zun})),window.loginAlert("\u767b\u5f55/\u6ce8\u518c\u5931\u8d25"+(C$zun&&C$zun.errMsg?"\uff0c"+C$zun.errMsg:"")))},window.onUserLogin=function(C$zue){if(!C$zue)return window.toErrorAlarm(2,"User.login fail: response is null"),window.reqRecordInfo("userLoginError","response is null"),void window.loginAlert("User.login failed");if("success"!=C$zue.state)return window.toErrorAlarm(2,"User.login fail: state="+C$zue.state),window.reqRecordInfo("userLoginError",JSON.stringify(C$zue)),void window.loginAlert("User.login failed: "+C$zue.state);PF_INFO.userId=String(C$zue.account),PF_INFO.account=String(C$zue.account),PF_INFO.platform=String(C$zue.platform),PF_INFO.channel=String(C$zue.platform),PF_INFO.platform_uid=String(C$zue.platform_uid),PF_INFO.php_sign=String(C$zue.sign),PF_INFO.php_signtime=String(C$zue.time),PF_INFO.sign="";wxShowLoading({title:"\u8bf7\u6c42\u670d\u52a1\u5668"});C$zue=localStorage.getItem("LastSer_"+PF_INFO.pkgName+PF_INFO.account);C$zue&&""!=C$zue?(C$zue=Number(C$zue),this.getCheckServers(C$zue)):this.getDefaultServers()},window.getDefaultServers=function(){sendApi(PF_INFO.apiurl,"Server.defaultServer",{partner_id:PF_INFO.partnerId,uid:PF_INFO.account,version:PF_INFO.version,game_pkg:PF_INFO.pkgName,device:PF_INFO.device_id},this.onUserLoginDefaultServers.bind(this),apiRetryAmount,onApiError)},window.onUserLoginDefaultServers=function(C$zue){return C$zue?"success"!=C$zue.state?(window.toErrorAlarm(3,"Server.defaultServer failed: "+C$zue.state),void window.loginAlert("Server.defaultServer failed: "+C$zue.state)):C$zue.data&&0!=C$zue.data.length?void this.updCurServer(C$zue):(window.toErrorAlarm(3,"Server.defaultServer failed: data null"),void window.loginAlert("\u670d\u52a1\u5668\u5c1a\u672a\u5f00\u542f")):(window.toErrorAlarm(3,"Server.defaultServer failed"),void window.loginAlert("Server.defaultServer failed"))},window.getCheckServers=function(C$zue){sendApi(PF_INFO.apiurl,"Server.check_server",{server_id:C$zue,time:Date.now()/1e3},this.onUserLoginCheckServers.bind(this),apiRetryAmount,onApiError)},window.onUserLoginCheckServers=function(C$zue){return C$zue?"success"!=C$zue.state?(window.toErrorAlarm(4,"Server.check_server failed: "+C$zue.state),void this.getDefaultServers()):C$zue.data&&0!=C$zue.data.length?(this.updCurServer(C$zue),void(window.ServerLoading&&window.ServerLoading.instance.openJumpTipsBtn&&window.ServerLoading.instance.openJumpTipsBtn(sdkInitRes.isShowSdkAge,sdkInitRes.sdk_age_adaptation_icon,sdkInitRes.sdk_age_adaptation_content,sdkInitRes.coordinate_x,sdkInitRes.coordinate_y))):(window.toErrorAlarm(4,"Server.check_server failed: data null"),void this.getDefaultServers()):(window.toErrorAlarm(4,"Server.check_server failed"),void this.getDefaultServers())},window.updCurServer=function(C$zue){PF_INFO.newRegister=null!=C$zue.is_new?C$zue.is_new:0,PF_INFO.selectedServer={server_id:String(C$zue.data[0].server_id),server_name:String(C$zue.data[0].server_name),entry_ip:C$zue.data[0].entry_ip,entry_port:parseInt(C$zue.data[0].entry_port),status:get_status(C$zue.data[0]),start_time:C$zue.data[0].start_time,maintain_time:C$zue.data[0].maintain_time||"",cdn:PF_INFO.cdn},this.initComplete()},window.initComplete=function(){if(1==PF_INFO.newRegister){var C$zue=PF_INFO.selectedServer.status;if(-1===C$zue||0===C$zue)return window.toErrorAlarm(15,"new register selectedServer status error: id="+PF_INFO.selectedServer.id+",status="+PF_INFO.selectedServer.status),void window.loginAlert(-1===C$zue?"\u5f53\u524d\u670d\u52a1\u5668\u5728\u7ef4\u62a4\u4e2d":"\u5f53\u524d\u670d\u52a1\u5668\u5c1a\u672a\u5f00\u542f\uff0c\u656c\u8bf7\u671f\u5f85");req_server_check_ban(0,PF_INFO.selectedServer.server_id),window.ServerLoading.instance.openLoading(PF_INFO.newRegister)}else window.ServerLoading.instance.openServer(),wxHideLoading();window.loadServer=!0,window.initMain(),window.enterToGame()},window.loadVersionConfig=function(){sendApi(PF_INFO.apiurl,"User.getCdnVersion",{game_pkg:PF_INFO.pkgName,version_name:PF_INFO.version_name},this.reqVersionConfigCallBack.bind(this),apiRetryAmount,onApiError)},window.reqVersionConfigCallBack=function(C$zue){return C$zue?"success"!=C$zue.state?(window.toErrorAlarm(5,"User.getCdnVersion failed: state="+C$zue.state),void window.loginAlert("User.getCdnVersion failed: state="+C$zue.state)):C$zue.data&&C$zue.data.version?(C$zue.data.cdn_url&&10<C$zue.data.cdn_url.length&&(PF_INFO.base_cdn=C$zue.data.cdn_url,PF_INFO.cdn=C$zue.data.cdn_url),C$zue.data.version&&(PF_INFO.lastVersion=C$zue.data.version),console.info("lastVersion:"+PF_INFO.lastVersion+", version_name:"+PF_INFO.version_name),window.loadVersion=!0,window.initMain(),void window.enterToGame()):(window.toErrorAlarm(5,"User.getCdnVersion failed: version="+(C$zue.data&&C$zue.data.version)),void window.loginAlert("User.getCdnVersion failed: version="+(C$zue.data&&C$zue.data.version))):(window.toErrorAlarm(5,"User.getCdnVersion failed"),void window.loginAlert("User.getCdnVersion failed"))},window.pkgOptions,window.reqPkgOptions=function(){sendApi(PF_INFO.apiurl,"Common.get_option_pkg",{game_pkg:PF_INFO.pkgName},this.reqPkgOptionsCallBack.bind(this),apiRetryAmount,onApiError)},window.reqPkgOptionsCallBack=function(C$zue){if(C$zue&&"success"===C$zue.state&&C$zue.data)for(var C$zun in window.pkgOptions=C$zue.data,C$zue.data)PF_INFO[C$zun]=C$zue.data[C$zun];else window.toErrorAlarm(11,"Common.get_option_pkg failed"),console.info("reqPkgOptionsCallBack "+C$zue.state);window.loadOption=!0,window.enterToGame()},window.toPay=function(C$zue,C$zun,C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud,C$zus,C$zuw){C$zui=String(C$zui);PF_INFO.pay_infos[C$zui]={productid:C$zui,productname:C$zua,productdesc:C$zud,roleid:C$zue,rolename:C$zun,rolelevel:C$zur,price:C$zut,callback:C$zus},sendApi(PF_INFO.payurl,"Order.order",{game_pkg:PF_INFO.pkgName,server_id:PF_INFO.selectedServer.server_id,server_name:PF_INFO.selectedServer.server_name,level:C$zur,uid:PF_INFO.account,role_id:C$zue,role_name:C$zun,product_id:C$zui,product_name:C$zua,product_desc:C$zud,money:C$zut,partner_id:PF_INFO.partnerId},toPayCallBack,apiRetryAmount,onApiError)},window.toPayCallBack=function(C$zur){var C$zue,C$zuo;!C$zur||200!==C$zur.errCode&&"success"!=C$zur.state?(C$zue=C$zur?"errCode="+C$zur.errCode+",state="+C$zur.state+",info="+C$zur.info:"\u83b7\u53d6\u8ba2\u5355\u5931\u8d25",window.toErrorAlarm(13,"Order.order fail: "+C$zue),alert(C$zue)):((C$zuo=PF_INFO.pay_infos[String(C$zur.product_id)]).callback&&C$zuo.callback(C$zur.product_id,C$zur.cp_order_id,-1),AKSDK.pay({cpbill:C$zur.cp_order_id,productid:C$zur.product_id,productname:C$zuo.productname,productdesc:C$zuo.productdesc,serverid:PF_INFO.selectedServer.server_id,servername:PF_INFO.selectedServer.server_name,roleid:C$zuo.roleid,rolename:C$zuo.rolename,rolelevel:C$zuo.rolelevel,price:C$zuo.price,extension:JSON.stringify({cp_order_id:C$zur.cp_order_id})},function(C$zue,C$zun){C$zuo.callback&&0==C$zue&&C$zuo.callback(C$zur.product_id,C$zur.cp_order_id,C$zue),console.info(JSON.stringify({type:"paycallback",status:C$zue,data:C$zur,role_name:C$zuo.rolename}))}))},window.loadCreateRole=function(){},window.toCreate=function(C$zue,C$zun,C$zur,C$zuo,C$zui){AKSDK.logCreateRole(PF_INFO.selectedServer.server_id,PF_INFO.selectedServer.server_name||PF_INFO.selectedServer.server_id,C$zue,C$zun,C$zur),sendApi(PF_INFO.apiurl,"User.create_role",{game_pkg:PF_INFO.pkgName,server_id:PF_INFO.selectedServer.server_id,role_id:C$zue,uid:PF_INFO.account,role_name:C$zun,role_type:C$zuo,level:C$zur})},window.toLogin=function(C$zue,C$zun,C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud,C$zus,C$zuw){PF_INFO.roleId=C$zue,PF_INFO.roleName=C$zun,PF_INFO.roleLevel=C$zur,AKSDK.logEnterGame(PF_INFO.selectedServer.server_id,PF_INFO.selectedServer.server_name||PF_INFO.selectedServer.server_id,C$zue,C$zun,C$zur),sendApi(PF_INFO.apiurl,"User.update_role",{game_pkg:PF_INFO.pkgName,server_id:PF_INFO.selectedServer.server_id,role_id:C$zue,uid:PF_INFO.account,role_name:C$zun,role_type:C$zuo,level:C$zur,evolution:C$zui})},window.toLevelUp=function(C$zue,C$zun,C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud,C$zus,C$zuw){PF_INFO.roleId=C$zue,PF_INFO.roleName=C$zun,PF_INFO.roleLevel=C$zur,AKSDK.logRoleUpLevel(PF_INFO.selectedServer.server_id,PF_INFO.selectedServer.server_name||PF_INFO.selectedServer.server_id,C$zue,C$zun,C$zur),sendApi(PF_INFO.apiurl,"User.update_role",{game_pkg:PF_INFO.pkgName,server_id:PF_INFO.selectedServer.server_id,role_id:C$zue,uid:PF_INFO.account,role_name:C$zun,role_type:C$zuo,level:C$zur,evolution:C$zui})},window.toRealName=function(C$zue){},window.openShare=function(C$zun){AKSDK.share("share",function(C$zue){C$zun&&C$zun(C$zue)})},window.openService=function(){AKSDK.openService()},window.microPortGuide=function(){AKSDK.weiduanHelper()},window.reqSMSCode=function(C$zue,C$zun,C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud){C$zud=C$zud||PF_INFO.selectedServer.server_id,sendApi(PF_INFO.apiurl,"User.get_code",{phone:C$zue,role_id:C$zun,uid:PF_INFO.account,game_pkg:PF_INFO.pkgName,partner_id:PF_INFO.partnerId,server_id:C$zud},C$zua,2,null,function(){return!0})},window.onShow=function(C$zue){window.onShowCallback=C$zue,window.onShowCallback&&window.onShowData&&(console.info("\u5c0f\u6e38\u620f\u5207\u524d\u53f0\u4e8b\u4ef6\uff0c\u573a\u666f\u503c\uff1a"+window.onShowData.scene),window.onShowCallback(window.onShowData),window.onShowData=null)},window.reqPlayerAskInfo=function(C$zue,C$zun,C$zur,C$zuo){window.send("https://sdk.sh9130.com/game/?ct=min&ac=getInviter",{game_pkg:window.PF_INFO.pkgName,role_id:C$zun,server_id:C$zur},C$zuo)},window.openSubscribeMsg=function(C$zui,C$zud,C$zus){wx.onTouchEnd(function onTouchEnd(C$zue){var C$zut=[];var C$zun=[];var C$zua=C$zus||window.config.tmpId;for(var C$zur in C$zua){var C$zuo=Number(C$zur);C$zui&&C$zui.length&&-1==C$zui.indexOf(C$zuo)||(C$zun.push(C$zua[C$zur]),C$zut.push([C$zuo,3]))}0<=window.compareVersion(window.SDKVersion,"2.4.4")?(console.log("\u8c03\u7528\u8ba2\u9605"),AKSDK.subscribeMessage&&AKSDK.subscribeMessage(C$zun,function(C$zue){if(console.log("\u8ba2\u9605\u56de\u8c03\uff1a"),console.log(C$zue),C$zue&&"requestSubscribeMessage:ok"==C$zue.errMsg)for(var C$zun in C$zua)if("accept"==C$zue[C$zua[C$zun]]){var C$zur=Number(C$zun);for(var C$zuo=0;C$zuo<C$zut.length;C$zuo++)if(C$zut[C$zuo][0]==C$zur){C$zut[C$zuo][1]=1;break}}0<=window.compareVersion(window.SDKVersion,"2.10.1")?wx.getSetting({withSubscriptions:!0,success:function(C$zue){var C$zun=C$zue.subscriptionsSetting.itemSettings;if(C$zun){for(var C$zur in console.log("\u83b7\u5f97\u8ba2\u9605\u8bbe\u7f6e\uff1a"),console.log(C$zun),C$zua)if("accept"==C$zun[C$zua[C$zur]]){var C$zuo=Number(C$zur);for(var C$zui=0;C$zui<C$zut.length;C$zui++)if(C$zut[C$zui][0]==C$zuo){C$zut[C$zui][1]=2;break}}console.log(C$zut),C$zud&&C$zud(C$zut)}else console.log("\u83b7\u5f97\u8ba2\u9605\u8bbe\u7f6e\uff1a\u6ca1\u6709\u957f\u671f\u8ba2\u9605\u6d88\u606f"),console.log(C$zue),console.log(C$zut),C$zud&&C$zud(C$zut)},fail:function(){console.log("\u83b7\u5f97\u8ba2\u9605\u8bbe\u7f6e\uff1a\u5931\u8d25"),console.log(C$zut),C$zud&&C$zud(C$zut)}}):(console.log("\u7248\u672c\u8fc7\u4f4e\uff0c\u83b7\u5f97\u8ba2\u9605\u8bbe\u7f6e\uff1a\u5931\u8d25 "+window.SDKVersion),console.log(C$zut),C$zud&&C$zud(C$zut))})):(console.log("\u7248\u672c\u8fc7\u4f4e\uff0c\u4e0d\u652f\u6301\u8ba2\u9605 "+window.SDKVersion),console.log(C$zut),C$zud&&C$zud(C$zut)),wx.offTouchEnd(onTouchEnd)})},window.batteryInfo={isSuccess:!1,level:"100",isCharging:!1},window.getBatteryInfo=function(C$zur){wx.getBatteryInfo({success:function(C$zue){var C$zun=window.batteryInfo;C$zun.isSuccess=!0,C$zun.level=Number(C$zue.level).toFixed(0),C$zun.isCharging=C$zue.isCharging,C$zur&&C$zur(C$zun.isSuccess,C$zun.level,C$zun.isCharging)},fail:function(C$zue){console.log("\u8c03\u7528\u83b7\u53d6\u7535\u6c60\u4fe1\u606f\u5931\u8d25",C$zue.errMsg);C$zue=window.batteryInfo;C$zur&&C$zur(C$zue.isSuccess,C$zue.level,C$zue.isCharging)}})},window.getNetworkType=function(C$zun){wx.getNetworkType({success:function(C$zue){C$zun&&C$zun(!0,C$zue)},fail:function(C$zue){C$zun&&C$zun(!1,C$zue)}})},window.onNetworkStatusChange=function(C$zue){C$zue&&wx.onNetworkStatusChange(C$zue)},window.offNetworkStatusChange=function(C$zue){wx.offNetworkStatusChange(C$zue)},window.send=function(C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud,C$zue,C$zun){null==C$zut&&(C$zut=1),wx.request({url:C$zur,method:C$zue||"GET",responseType:"text",data:C$zuo,header:{"content-type":C$zun||"application/json"},success:function(C$zue){var C$zun;C$zue&&200==C$zue.statusCode?(C$zun=C$zue.data,!C$zud||C$zud(C$zun)?C$zui&&C$zui(C$zun):window.sendFail(C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud,C$zue)):window.sendFail(C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud,C$zue)},fail:function(C$zue){window.sendFail(C$zur,C$zuo,C$zui,C$zut,C$zua,C$zud,C$zue)},complete:function(){}})},window.sendFail=function(C$zue,C$zun,C$zur,C$zuo,C$zui,C$zut,C$zua){0<C$zuo-1?setTimeout(function(){window.send(C$zue,C$zun,C$zur,C$zuo-1,C$zui,C$zut)},1e3):C$zui&&C$zui(JSON.stringify({url:C$zue,response:C$zua}))},window.sendApi=function(C$zue,C$zun,C$zur,C$zuo,C$zui,C$zul,C$zuc){C$zur=C$zur||{};var C$zut=Math.floor(Date.now()/1e3);C$zur.time=C$zut,C$zur.method=C$zun;var C$zua=Object.keys(C$zur).sort();var C$zud="";var C$zus="";for(var C$zuw=0;C$zuw<C$zua.length;C$zuw++)C$zud=C$zud+(0==C$zuw?"":"&")+C$zua[C$zuw]+C$zur[C$zua[C$zuw]],C$zus=C$zus+(0==C$zuw?"":"&")+C$zua[C$zuw]+"="+encodeURIComponent(C$zur[C$zua[C$zuw]]);C$zud+=PF_INFO.apikey;C$zut="sign="+md5(C$zud);send(C$zue+"?"+C$zus+(""==C$zus?"":"&")+C$zut,null,C$zuo,C$zui,C$zul,C$zuc||function(C$zue){return"success"==C$zue.state},null,"application/x-www-form-urlencoded")},window.onRoleRecordStep=function(C$zue,C$zun){var C$zur=0;PF_INFO.selectedServer&&(C$zur=PF_INFO.selectedServer.server_id),sendApi(PF_INFO.logurl,"UserLog.reportUidStep",{partnerId:PF_INFO.partnerId,gamePkg:PF_INFO.pkgName,logTime:Math.floor(Date.now()/1e3),platformUid:PF_INFO.platform_uid,type:C$zue,serverId:C$zur},null,2,null,function(){return!0})},window.req_server_group=function(C$zue){sendApi(PF_INFO.apiurl,"Server.getServerGroup",{partner_id:PF_INFO.partnerId,uid:PF_INFO.account,version:PF_INFO.version,game_pkg:PF_INFO.pkgName,device:PF_INFO.device_id},reqServerGroupCallBack,apiRetryAmount,onApiError)},window.reqServerGroupCallBack=function(C$zue){C$zue&&"success"===C$zue.state&&C$zue.data?(C$zue.data.unshift({id:-2,name:"\u6700\u65b0\u670d"}),C$zue.data.unshift({id:-1,name:"\u5df2\u6709\u89d2\u8272"}),PF_INFO.groupList=C$zue.data,window.initPanel&&window.initPanel.showGroupList()):(PF_INFO.hasGroupReq=!1,C$zue=C$zue?C$zue.state:"",window.toErrorAlarm(7,"Server.getServerGroup fail: "+C$zue),window.loginAlert("reqServerGroupCallBack "+C$zue))},window.req_server_owner=function(C$zue){sendApi(PF_INFO.apiurl,"Server.getServerByUid",{partner_id:PF_INFO.partnerId,uid:PF_INFO.account,version:PF_INFO.version,game_pkg:PF_INFO.pkgName,device:PF_INFO.device_id},reqServerOwnerCallBack,apiRetryAmount,onApiError)},window.reqServerOwnerCallBack=function(C$zue){if(PF_INFO.hasServerReq=!1,C$zue&&"success"===C$zue.state&&C$zue.data){for(var C$zun=0;C$zun<C$zue.data.length;C$zun++)C$zue.data[C$zun].status=get_status(C$zue.data[C$zun]);PF_INFO.serverList[-1]=window.changeServerName(C$zue.data),window.initPanel.showServerList(-1)}else{var C$zur=C$zue?C$zue.state:"";window.toErrorAlarm(8,"Server.getServerByUid fail: "+C$zur),window.loginAlert("reqServerOwnerCallBack "+C$zur)}},window.req_server_owner_status=function(C$zue){sendApi(PF_INFO.apiurl,"Server.getServerByUid",{partner_id:PF_INFO.partnerId,uid:PF_INFO.account,version:PF_INFO.version,game_pkg:PF_INFO.pkgName,device:PF_INFO.device_id},C$zue,apiRetryAmount,onApiError)},window.req_server_list=function(C$zue,C$zun){sendApi(PF_INFO.apiurl,"Server.getServerByGroup",{partner_id:PF_INFO.partnerId,uid:PF_INFO.account,version:PF_INFO.version,game_pkg:PF_INFO.pkgName,device:PF_INFO.device_id,server_group_id:C$zun},reqServerListCallBack,apiRetryAmount,onApiError)},window.reqServerListCallBack=function(C$zue){if(PF_INFO.hasServerReq=!1,C$zue&&"success"===C$zue.state&&C$zue.data&&C$zue.data.data){var C$zun=C$zue.data.server_group_id;var C$zur=[];for(var C$zuo=0;C$zuo<C$zue.data.data.length;C$zuo++)C$zue.data.data[C$zuo].status=get_status(C$zue.data.data[C$zuo]),0!=C$zur.length&&0==C$zue.data.data[C$zuo].status||(C$zur[C$zur.length]=C$zue.data.data[C$zuo]);PF_INFO.serverList[C$zun]=window.changeServerName(C$zur),window.initPanel.showServerList(C$zun)}else{C$zun=C$zue?C$zue.state:"";window.toErrorAlarm(9,"Server.getServerByGroup fail: "+C$zun),window.loginAlert("reqServerListCallBack "+C$zun)}},window.req_recommend_server_list=function(C$zue){sendApi(PF_INFO.apiurl,"Server.getRecommendServerList",{partner_id:PF_INFO.partnerId,uid:PF_INFO.account,version:PF_INFO.version,game_pkg:PF_INFO.pkgName,device:PF_INFO.device_id},reqServerRecommendCallBack,apiRetryAmount,onApiError)},window.reqServerRecommendCallBack=function(C$zue){if(PF_INFO.hasServerReq=!1,C$zue&&"success"===C$zue.state&&C$zue.data){for(var C$zun=0;C$zun<C$zue.data.length;C$zun++)C$zue.data[C$zun].status=get_status(C$zue.data[C$zun]);PF_INFO.serverList[-2]=window.changeServerName(C$zue.data),window.initPanel.showServerList(-2)}else{var C$zur=C$zue?C$zue.state:"";window.toErrorAlarm(10,"Server.getRecommendServerList fail: "+C$zur),alert("reqServerRecommendCallBack "+C$zur)}},window.changeServerName=function(C$zue){return C$zue},window.req_server_notice=function(C$zue,C$zun){C$zue=C$zue||PF_INFO.selectedServer.server_id,sendApi(PF_INFO.apiurl,"Common.get_anno",{type:"4",game_pkg:PF_INFO.pkgName,server_id:C$zue},C$zun)},window.req_multi_server_notice=function(C$zue,C$zun,C$zur,C$zuo){C$zur=C$zur||PF_INFO.selectedServer.server_id,sendApi(PF_INFO.apiurl,"Common.get_new_anno",{type:C$zue,game_pkg:C$zun,server_id:C$zur},C$zuo)},window.req_privacy=function(C$zue,C$zun){sendApi(PF_INFO.apiurl,"Common.get_option_pkg_detail",{game_pkg:C$zue},C$zun)},window.get_status=function(C$zue){return C$zue?1==C$zue.status?1==C$zue.online_status?2:1:0==C$zue.status?0:-1:-1},window.req_server_check_ban=function(C$zue,C$zun){PF_INFO.last_check_ban={step:C$zue,server_id:C$zun};wxShowLoading({title:"\u6b63\u5728\u9a8c\u8bc1\u89d2\u8272"}),sendApi(PF_INFO.apiurl,"User.checkInfo",{partner_id:PF_INFO.partnerId,uid:PF_INFO.account,game_pkg:PF_INFO.pkgName,server_id:C$zun,platform:PF_INFO.platform,platform_uid:PF_INFO.platform_uid,check_login_time:PF_INFO.php_signtime,check_login_sign:PF_INFO.php_sign,version_name:PF_INFO.version_name},reqServerCheckBanCallBack,apiRetryAmount,onApiError,function(C$zue){return"success"==C$zue.state||"time_err"==C$zue.info||"sign_err"==C$zue.info})},window.reqServerCheckBanCallBack=function(C$zue){var C$zun;C$zue&&"success"===C$zue.state&&C$zue.data?((C$zun=PF_INFO.selectedServer).channel_num=PF_INFO.channelNum,C$zun.sign=String(C$zue.data.login_sign),C$zun.tick=parseInt(C$zue.data.time),C$zue.data.server_num?C$zun.server_num=parseInt(C$zue.data.server_num):C$zun.server_num=parseInt(C$zue.data.server_id),C$zun.is_domain=0,C$zun.cdn=PF_INFO.base_cdn,C$zun.resver=C$zue.data.cdn_version,C$zun.server_options=C$zue.data.server_options,C$zue.data.max_create&&(C$zun.max_create=parseInt(C$zue.data.max_create)),console.log("server_options\uff1a"+JSON.stringify(C$zun.server_options)),1==PF_INFO.newRegister&&C$zun.server_options&&1==C$zun.server_options.show_btn&&(PF_INFO.showGetBtn=1,window.ServerLoading.instance.setShowBtn()),checkBanSuccess()):3<=PF_INFO.last_check_ban.step?(C$zun=C$zue?C$zue.state:"",window.toErrorAlarm(12,"User.checkInfo fail: "+C$zun),onApiError(JSON.stringify(C$zue)),window.loginAlert("User.checkInfo failed: "+C$zun)):sendApi(PF_INFO.apiurl,"User.login",{platform:PF_INFO.sdk_name,partner_id:PF_INFO.partnerId,token:PF_INFO.sdk_token,game_pkg:PF_INFO.pkgName,deviceId:PF_INFO.device_id,scene:"WX_"+PF_INFO.from_scene},function(C$zue){C$zue&&"success"==C$zue.state?(PF_INFO.php_sign=String(C$zue.sign),PF_INFO.php_signtime=String(C$zue.time),setTimeout(function(){req_server_check_ban(PF_INFO.last_check_ban.step+1,PF_INFO.last_check_ban.server_id)},1500)):window.loginAlert("User.login failed: "+C$zue&&C$zue.state)},apiRetryAmount,onApiError,function(C$zue){return"success"==C$zue.state||"failed"==C$zue.state})},window.checkBanSuccess=function(){ServerLoading.instance.openLoading(PF_INFO.newRegister),window.isCheckBan=!0,window.enterToGame()},window.initMain=function(){var C$zue;window.loadProbPkg&&window.loadMainPkg&&window.loadServerRes&&window.loadLoadingRes&&window.loadVersion&&window.loadServer&&(window.MainWX.instance||(console.log("Main \u521d\u59cb\u5316"+window.MainWX.instance),C$zue=wx.getLaunchOptionsSync().scene||0,C$zue={cdn:window.PF_INFO.cdn,spareCdn:window.PF_INFO.spareCdn,newRegister:window.PF_INFO.newRegister,wxPC:window.PF_INFO.wxPC,wxIOS:window.PF_INFO.wxIOS,wxAndroid:window.PF_INFO.wxAndroid,wxParam:{limitLoad:window.PF_INFO.wxLimitLoad,benchmarkLevel:window.PF_INFO.wxBenchmarkLevel,wxFrom:"txcps"==window.config.from?1:0,wxSDKVersion:window.SDKVersion},configType:window.PF_INFO.configType,exposeType:window.PF_INFO.exposeType,scene:C$zue},new window.MainWX(C$zue,window.PF_INFO.lastVersion,window.workerJsURL)))},window.enterToGame=function(){if(window.loadProbPkg&&window.loadMainPkg&&window.loadServerRes&&window.loadLoadingRes&&window.loadVersion&&window.loadServer&&window.isCheckBan&&window.loadOption){if(wxHideLoading(),!bEnterGame){bEnterGame=!0,window.MainWX.instance||window.initMain();var C$zue=0;var C$zun=wx.getMenuButtonBoundingClientRect();C$zun&&(window.PF_INFO.wxPhone&&(C$zue=C$zun.top),console.info("MenuButton  top:"+C$zun.top+",bottom:"+C$zun.bottom+",left:"+C$zun.left+",right:"+C$zun.right+",width:"+C$zun.width+",height:"+C$zun.height));var C$zur={};for(const C$zut in PF_INFO.selectedServer)C$zur[C$zut]=PF_INFO.selectedServer[C$zut];var C$zuo={channel:window.PF_INFO.channel,account:window.PF_INFO.account,userId:window.PF_INFO.userId,cdn:window.PF_INFO.cdn,data:window.PF_INFO.data,package:window.PF_INFO.package,newRegister:window.PF_INFO.newRegister,pkgName:window.PF_INFO.pkgName,partnerId:window.PF_INFO.partnerId,platform_uid:window.PF_INFO.platform_uid,deviceId:window.PF_INFO.device_id,selectedServer:C$zur,configType:window.PF_INFO.configType,exposeType:window.PF_INFO.exposeType,debugUsers:window.PF_INFO.debugUsers,wxMenuTop:C$zue,wxShield:window.PF_INFO.wxShield};if(window.pkgOptions)for(var C$zui in window.pkgOptions)C$zuo[C$zui]=window.pkgOptions[C$zui];window.MainWX.instance.initPlatdata(C$zuo),PF_INFO.selectedServer&&PF_INFO.selectedServer.server_id&&localStorage.setItem("LastSer_"+PF_INFO.pkgName+PF_INFO.account,PF_INFO.selectedServer.server_id)}}else console.info("\u3010\u767b\u5f55\u3011loadProbPkg:"+window.loadProbPkg+",loadMainPkg:"+window.loadMainPkg+",loadServerRes:"+window.loadServerRes+",loadLoadingRes:"+window.loadLoadingRes+",loadVersion:"+window.loadVersion+",loadServer:"+window.loadServer+",isCheckBan:"+window.isCheckBan+",loadOption:"+window.loadOption)};