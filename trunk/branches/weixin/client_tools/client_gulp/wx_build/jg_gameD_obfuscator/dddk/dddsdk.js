var v=wx.$d;import SDKyyw from"./dddhelp";var config={game_id:v[30201],game_pkg:v[30202],partner_id:v[30203],game_ver:v[30204],is_auth:!1};window.config=config;var partner_config={app_id:1000221,app_key:v[30205]};var D$YLZSA=D$YZASL();var HOST=v[30206];var D$YLZAS=null;var D$YZSAL=null;var D$YZSLA=null;var partner_user_info=null;var partner_swtich_info=null;function D$YZASL(){var o={};return{order_data:{},init:function(e,t){e=e&&e.game_ver?e.game_ver:0;console.log(v[30207]);var r=this;var a;a=wx.getStorageSync(v[30208])?0:(a=r.uuid(16,32),wx.setStorageSync(v[30208],a),1),wx.getStorageSync(v[30209])||(n=r.uuid(16,32),wx.setStorageSync(v[30209],n));var n=wx.getLaunchOptionsSync();var o=n.scene||"";a&&n.query&&n.query.ad_code&&wx.setStorageSync(v[30210],n.query.ad_code),r.log(v[282],{install:a,scene:o}),wx.showShareMenu();r=n.query&&n.query.invite?n.query.invite:"";n=n.query&&n.query.invite_type?n.query.invite_type:"";r&&(D$YZSAL={invite:r,invite_type:n,is_new:a,scene:o}),e&&this.checkGameVersion(e,function(e){t&&t(e)})},login:function(e,t){console.log(v[30211]);var r=this;o[v[30064]]=typeof t==v[29882]?t:null,SDKyyw.initLoginCallback=e=>{if(console.log(v[30212]+JSON.stringify(e)),0==e.status)return console.log(v[30213]),void t(1,{errMsg:v[30214]});partner_swtich_info={showSwitchOn:e.data.showSwitchOn,switchApp:e.data.switchApp,switchContent:e.data.switchContent},partner_user_info=e.data,r.do_login(partner_user_info)},SDKyyw.init(partner_config.app_id,partner_config.app_key)},do_login:function(e){var r=this;var t=r.getPublicData();if(t[v[30215]]=e?e.nick_name:"",t[v[30216]]=e?e.head_img:"",D$YZSAL&&typeof D$YZSAL==v[277])for(var a in D$YZSAL)t[a]=D$YZSAL[a];t[v[30217]]=e.uid,wx.request({url:v[26101]+HOST+v[30218],method:v[30219],dataType:v[5987],header:{"content-type":v[30090]},data:t,success:function(e){if(console.log(v[30220]+JSON.stringify(e)),200==e.statusCode){e=e.data;if(e.state){var t={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};try{wx.setStorageSync(v[30221],e.data.sdk_token),wx.setStorageSync(v[30222],e.data.user_id),wx.setStorageSync(v[30223],e.data.username),e.data.ext&&wx.setStorageSync(v[30224],e.data.ext)}catch(e){}o[v[30064]]&&o[v[30064]](0,t)}else o[v[30064]]&&o[v[30064]](1,{errMsg:e.msg});r.getShareInfo(v[30225],function(e){console.log(v[30226]),wx.onShareAppMessage(function(){return r.logStartShare(v[30225]),{title:e.title,imageUrl:e.img,query:e.query}})})}else o[v[30064]]&&o[v[30064]](1,{errMsg:v[30227]})}})},share:function(e){o[v[30190]]=typeof callback==v[29882]?callback:null;var t=e.type||v[30190];console.log(v[30228]+t);var r=this;this.getShareInfo(t,function(e){r.logStartShare(t),wx.shareAppMessage({title:e.title,imageUrl:e.img,query:e.query})})},switchEnv:function(e){e(partner_swtich_info)},switchGame:function(t){SDKyyw.cutGameCallback=e=>{t(e)},1==partner_swtich_info.showSwitchOn?SDKyyw.cutGame():t({status:0,msg:v[30229]})},logStartShare:function(e){var t=wx.getStorageSync(v[30221]);wx.request({url:v[26101]+HOST+v[30230],method:v[30219],dataType:v[5987],header:{"content-type":v[30090]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,server_id:D$YLZAS?D$YLZAS.server_id:"",role_id:D$YLZAS?D$YLZAS.role_id:"",type:e},success:function(e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(e,r){console.log(v[30231]);wx.getStorageSync(v[30221]);wx.request({url:v[26101]+HOST+v[30232],method:v[30219],dataType:v[5987],header:{"content-type":v[30090]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var t;console.log(v[30233]),console.log(e),200==e.statusCode&&(t=e.data).state?r&&r(t.data):r&&r({develop:0})}})},getShareInfo:function(e,t){console.log(v[30234]);var r=wx.getStorageSync(v[30221]);wx.request({url:v[26101]+HOST+v[30235],method:v[30219],dataType:v[5987],header:{"content-type":v[30090]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:r,type:e,server_id:D$YLZAS?D$YLZAS.server_id:"",role_id:D$YLZAS?D$YLZAS.role_id:"",no_log:1},success:function(e){console.log(v[30236]),console.log(e),200==e.statusCode?(e=e.data).state?t&&t(e.data):o[v[30190]]&&o[v[30190]](1,{errMsg:v[30237]+e.msg}):o[v[30190]]&&o[v[30190]](1,{errMsg:v[30238]})}})},updateShare:function(e,t,r,a,n,o){console.log(v[30239]);var i=wx.getStorageSync(v[30221]);wx.request({url:v[26101]+HOST+v[30240],method:v[30219],dataType:v[5987],header:{"content-type":v[30090]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:t,is_new:r,role_id:a,sever_id:n,scene:o},success:function(e){console.log(v[30241]),console.log(e)}})},pay:function(e,t){var r=this;wx.checkSession({success:function(){r.startPay(e,t)},fail:function(){console.log(v[30242]),r.login({},function(){r.startPay(e,t)})}})},startPay:function(e,t){console.log(v[30243]),console.log(e);var r=this;o[v[30244]]=typeof t==v[29882]?t:null;t=wx.getStorageSync(v[30221]);var a=wx.getStorageSync(v[30224]);var n;t||a?(n=wx.getSystemInfoSync(),e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:t,session_key:a,platform:n.platform},r.order_data=e,(t=r.getPublicData())[v[30246]]=JSON.stringify(e),wx.request({url:v[26101]+HOST+v[30247],method:v[30219],dataType:v[5987],header:{"content-type":v[30090]},data:t,success:function(t){if(console.log(v[30248]+JSON.stringify(t)),200==t.statusCode){t=t.data;if(t.state)if(""==t.data.ext){SDKyyw.onPayCallback=e=>{};let e={};e.serverId=t.data.pay_data.serverId,e.serverName=t.data.pay_data.serverName,e.roleId=t.data.pay_data.roleId,e.roleName=t.data.pay_data.roleName,e.roleLevel=t.data.pay_data.roleLevel,e.gameOrderid=t.data.pay_data.orderId,e.pext=t.data.pay_data.orderId,e.money=t.data.pay_data.amount,e.productName=t.data.pay_data.productName,e.productId=t.data.pay_data.productId,console.log(v[30249]+JSON.stringify(e)),SDKyyw.pay(e)}else r.extDo({ext1:t.data.ext,ext2:t.data.pay_data});else o[v[30244]]&&o[v[30244]](1,{errMsg:t.msg})}else o[v[30064]]&&o[v[30064]](1,{errMsg:v[30227]})}})):o[v[30244]]&&o[v[30244]](1,{errMsg:v[30245]})},extDo:function(e){wx.navigateToMiniProgram({appId:e.ext1,path:v[30250]+e.ext2.orderId+v[30251]+e.ext2.amount,extraData:{},envVersion:v[30014],success(e){}})},logCreateRole:function(e){var t=wx.getStorageSync(v[30222]);var r=wx.getStorageSync(v[30223]);var a={};a[v[30252]]=t,a[v[30253]]=r,a[v[11052]]=e.roleid,a[v[30254]]=e.rolelevel,a[v[30255]]=e.rolename,a[v[11727]]=e.serverid,e.roleid&&e.serverid&&(D$YLZAS={role_id:e.roleid,server_id:e.serverid}),this.log(v[6],a);let n={};n.type=2,n.roleId=e.roleid,n.roleName=e.rolename,n.serverId=e.serverid,SDKyyw.pushData(n)},logEnterGame:function(e){var t=wx.getStorageSync(v[30222]);var r=wx.getStorageSync(v[30223]);var a={};a[v[30252]]=t,a[v[30253]]=r,a[v[11052]]=e.roleid,a[v[30254]]=e.rolelevel,a[v[30255]]=e.rolename,a[v[11727]]=e.serverid,e.roleid&&e.serverid&&(D$YLZAS={role_id:e.roleid,server_id:e.serverid}),this.log(v[5869],a),D$YZSAL&&this.updateShare(D$YZSAL.invite,D$YZSAL.invite_type,D$YZSAL.is_new,e.roleid,e.serverid,D$YZSAL.scene);let n={};n.type=1,n.roleId=e.roleid,n.roleName=e.rolename,n.serverId=e.serverid,SDKyyw.pushData(n);let o={};o.type=5,o.roleId=e.roleid,o.roleName=e.rolename,o.serverId=e.serverid,SDKyyw.pushData(o)},logRoleUpLevel:function(e){var t=wx.getStorageSync(v[30222]);var r=wx.getStorageSync(v[30223]);var a={};a[v[30252]]=t,a[v[30253]]=r,a[v[11052]]=e.roleid,a[v[30254]]=e.rolelevel,a[v[30255]]=e.rolename,a[v[11727]]=e.serverid,e.roleid&&e.serverid&&(D$YLZAS={role_id:e.roleid,server_id:e.serverid}),this.log(v[30256],a);let n={};n.type=4,n.roleId=e.roleid,n.roleName=e.rolename,n.serverId=e.serverid,n.level=e.rolelevel,SDKyyw.pushData(n)},uuid:function(e,t){var r=v[30257].split("");var a,n=[];var o;if(e=e||r.length,t)for(a=0;a<t;a++)n[a]=r[0|Math.random()*e];else for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",a=0;a<36;a++)n[a]||(o=0|16*Math.random(),n[a]=r[19==a?3&o|8:o]);return n.join("")},getPublicData:function(){var e=wx.getSystemInfoSync();var t=wx.getStorageSync(v[30208]);var r=wx.getStorageSync(v[30209]);var a=wx.getStorageSync(v[30210]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,is_from_min:1,ad_code:a,uuid:t,idfv:r,dname:e.model,mac:v[30258],net_type:0==e.wifiSignal?"4G":v[30259],os_ver:e.system,sdk_ver:e.version,game_ver:config.game_ver,device:e.platform==v[29976]?1:2}},log:function(e,t){var r=this.getPublicData();for(var a in t)r[a]=t[a];console.log(v[30260]+e),console.log(r),wx.request({url:v[26101]+HOST+v[30261]+e+v[30262]+encodeURIComponent(JSON.stringify(r))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()},getLaunchOptionsSync:function(e){var t=SDKyyw.getLaunchOptionsSync();e(t),console.log(v[30263]+JSON.stringify(t))},msgCheck:function(e,r){SDKyyw.msgSecCheck(e,function(e){console.log(v[30264]+JSON.stringify(e));let t={data:{}};1==e.status?(t.statusCode=200,t.data.state=1):(t.statusCode=0,t.data.state=0),r&&r(t)})},sendCode:function(e,t){console.log(v[30265],e.phone),SDKyyw.getCaptchaCallback=e=>{console.log(e),1==e.status?t&&t(0,e):t&&t(1,e)},SDKyyw.getCaptcha({telephone:e.phone})},bindPhone:function(e,t){console.log(v[30266],e.phone,e.code),SDKyyw.bindTelephoneCallback=e=>{console.log(v[30267],e),1==e.status?t&&t(0,e):t&&t(1,e)},SDKyyw.bindTelephone({telephone:e.phone,captcha:e.code})}}}function run(e,t,r){e in D$YLZSA&&D$YLZSA[e](t,r)}exports.init=function(e,t){run(v[363],e,t)},exports.login=function(e){run(v[30064],"",e)},exports.login=function(e){run(v[30064],"",e)},exports.pay=function(e,t){run(v[30244],e,t)},exports.switchEnv=function(e){run(v[30268],e)},exports.switchGame=function(e){run(v[30269],e)},exports.openService=function(){run(v[25553])},exports.logCreateRole=function(e,t,r,a,n){run(v[30270],{serverid:e,servername:t,roleid:r,rolename:a,rolelevel:n})},exports.logEnterGame=function(e,t,r,a,n){run(v[30271],{serverid:e,servername:t,roleid:r,rolename:a,rolelevel:n})},exports.logRoleUpLevel=function(e,t,r,a,n){run(v[30272],{serverid:e,servername:t,roleid:r,rolename:a,rolelevel:n})},exports.share=function(e){run(v[30190],{type:e})},exports.downloadClient=function(){run(v[30273])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getLaunchOptionsSync=function(e){run(v[30274],e)},exports.msgCheck=function(e,t){run(v[12419],e,t)},exports.sendCode=function(e,t){run(v[30275],e,t)},exports.bindPhone=function(e,t){run(v[11857],e,t)};