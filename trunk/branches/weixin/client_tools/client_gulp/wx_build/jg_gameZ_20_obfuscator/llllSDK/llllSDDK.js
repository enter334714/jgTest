var W=wx.$l;import sdk from"../utils/hywxgsdk_v102";var config={game_id:256,game_pkg:W[49688],partner_label:W[49689],partner_id:W[49690],game_ver:W[49691],is_auth:!1,partner_appid:W[49692]};window.config=config;var $LMUXR7=$LMX7RU();var HOST=W[49693];var $LMUX7R=null;var $LMXR7U=null;var sysInfo=wx.getSystemInfoSync();var platform=sysInfo.platform;var partner_user_info=null;var hysdkobj;function $LMX7RU(){var n={};return{order_data:{},init:function(e,t){e=e&&e.game_ver?e.game_ver:0;console.log(W[49694]);var o=this;var r;r=wx.getStorageSync(W[49695])?0:(r=o.uuid(16,32),wx.setStorageSync(W[49695],r),1),wx.getStorageSync(W[49696])||(n=o.uuid(16,32),wx.setStorageSync(W[49696],n));var n=wx.getLaunchOptionsSync();var a=n.scene||"";r&&n.query&&n.query.ad_code&&wx.setStorageSync(W[49697],n.query.ad_code),o.log(W[407],{install:r,scene:a});o=n.query&&n.query.invite?n.query.invite:"";n=n.query&&n.query.invite_type?n.query.invite_type:"";o&&($LMXR7U={invite:o,invite_type:n,is_new:r,scene:a}),e&&this.checkGameVersion(e,function(e){t&&t(e)}),hysdkobj=new sdk({appid:config.partner_appid})},login:function(e,t){console.log(W[49698]),n[W[49104]]=typeof t==W[49605]?t:null;var o=this;hysdkobj.login({success:function(e){0==e.code?(console.log(W[49699]+JSON.stringify(e)),o.do_login({token:e.data.token})):n[W[49104]]&&n[W[49104]](1,{errMsg:e.msg})},fail:function(e){console.log(W[49700]),console.log(e)}})},do_login:function(e){var o=this;var t=o.getPublicData();if(t[W[49105]]=e.token,$LMXR7U&&typeof $LMXR7U==W[402])for(var r in $LMXR7U)t[r]=$LMXR7U[r];wx.request({url:W[43040]+HOST+W[49701],method:W[49075],dataType:W[9778],header:{"content-type":W[49220]},data:t,success:function(e){if(console.log(W[49702]+JSON.stringify(e)),200==e.statusCode){e=e.data;if(e.state){try{wx.setStorageSync(W[49703],e.data.sdk_token),wx.setStorageSync(W[49704],e.data.user_id),wx.setStorageSync(W[49705],e.data.username),e.data.ext&&wx.setStorageSync(W[49706],e.data.ext),wx.setStorageSync(W[49707],e.data.openid)}catch(e){}var t={userid:e.data.user_id,account:e.data.nick_name,token:e.data.token,invite_uid:e.data.invite_uid||"",invite_nickname:e.data.invite_nickname||"",invite_head_img:e.data.invite_head_img||"",head_img:e.data.head_img||"",is_client:e.data.is_client||"0",ios_pay:e.data.ios_pay||"0"};n[W[49104]]&&n[W[49104]](0,t)}else n[W[49104]]&&n[W[49104]](1,{errMsg:e.msg});o.getShareInfo(W[49708],function(e){console.log(W[49709]),wx.onShareAppMessage(function(){return o.logStartShare(W[49708]),{title:e.title,imageUrl:e.img,query:e.query}})})}else n[W[49104]]&&n[W[49104]](1,{errMsg:W[49710]})}})},share:function(e){n[W[49189]]=typeof callback==W[49605]?callback:null;var t=e.type||W[49189];console.log(W[49711]+t);var o=this;this.getShareInfo(t,function(e){o.logStartShare(t);e.query;wx.shareAppMessage({title:e.title,imageUrl:e.img,query:e.query})})},logStartShare:function(e){var t=wx.getStorageSync(W[49703]);wx.request({url:W[43040]+HOST+W[49712],method:W[49075],dataType:W[9778],header:{"content-type":W[49220]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:t,server_id:$LMUX7R?$LMUX7R.server_id:"",role_id:$LMUX7R?$LMUX7R.role_id:"",type:e},success:function(e){}})},openService:function(){wx.openCustomerServiceConversation()},checkGameVersion:function(e,o){console.log(W[49713]);wx.getStorageSync(W[49703]);wx.request({url:W[43040]+HOST+W[49714],method:W[49075],dataType:W[9778],header:{"content-type":W[49220]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,game_ver:e},success:function(e){var t;console.log(W[49715]+JSON.stringify(e)),200==e.statusCode&&(t=e.data).state?o&&o(t.data):o&&o({develop:0})}})},getShareInfo:function(e,t){console.log(W[49716]);var o=wx.getStorageSync(W[49703]);wx.request({url:W[43040]+HOST+W[49717],method:W[49075],dataType:W[9778],header:{"content-type":W[49220]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:o,type:e,server_id:$LMUX7R?$LMUX7R.server_id:"",role_id:$LMUX7R?$LMUX7R.role_id:"",no_log:1},success:function(e){console.log(W[49718]),console.log(e),200==e.statusCode?(e=e.data).state?t&&t(e.data):n[W[49189]]&&n[W[49189]](1,{errMsg:W[49719]+e.msg}):n[W[49189]]&&n[W[49189]](1,{errMsg:W[49720]})}})},updateShare:function(e,t,o,r,n,a){console.log(W[49721]);var i=wx.getStorageSync(W[49703]);wx.request({url:W[43040]+HOST+W[49722],method:W[49075],dataType:W[9778],header:{"content-type":W[49220]},data:{game_pkg:config.game_pkg,partner_id:config.partner_id,sdk_token:i,invite:e,invite_type:t,is_new:o,role_id:r,sever_id:n,scene:a},success:function(e){console.log(W[49723]+JSON.stringify(e))}})},msgCheck:function(e,o){console.log(W[49724]+e),wx.request({url:W[43040]+HOST+W[49725]+config.partner_id+"/"+config.game_pkg,method:W[49075],dataType:W[9778],header:{"content-type":W[49220]},data:{content:e,user_id:wx.getStorageSync(W[49707])},success:function(e){console.log(W[49726]+JSON.stringify(e));let t={data:{}};1==e.data.code?(t.statusCode=200,t.data.state=1):(t.statusCode=0,t.data.state=0),o&&o(t)}})},pay:function(e,t){this.startPay(e,t)},startPay:function(e,t){console.log(W[49727]+JSON.stringify(e));var o=this;n[W[49172]]=typeof t==W[49605]?t:null;t=wx.getStorageSync(W[49703]);var r=wx.getStorageSync(W[49706]);t?(e={cpbill:e.cpbill,productid:e.productid,productname:e.productname,productdesc:e.productdesc,serverid:e.serverid,servername:e.servername,roleid:e.roleid,rolename:e.rolename,rolelevel:e.rolelevel,price:e.price,extension:e.extension,sdk_token:t,session_key:r,platform:platform,uid:wx.getStorageSync(W[49707])},o.order_data=e,(t=o.getPublicData())[W[49729]]=JSON.stringify(e),wx.request({url:W[43040]+HOST+W[49730],method:W[49075],dataType:W[9778],header:{"content-type":W[49220]},data:t,success:function(e){var t;console.log(W[49731]+JSON.stringify(e)),200==e.statusCode?(e=e.data).state?""==e.data.ext?(t=e.data.pay_data,hysdkobj.pay({orderParams:t,success:function(e){console.log(W[49732]),console.log(e)},fail:function(e){console.log(W[49733],e)}})):o.extDo({ext1:e.data.ext,ext2:e.data.pay_data}):n[W[49172]]&&n[W[49172]](1,{errMsg:e.msg}):n[W[49104]]&&n[W[49104]](1,{errMsg:W[49710]})}})):n[W[49172]]&&n[W[49172]](1,{errMsg:W[49728]})},extDo:function(e){wx.navigateToMiniProgram({appId:e.ext1,path:W[49734]+e.ext2.cpOrderId+W[49735]+e.ext2.amount/100,extraData:{},envVersion:W[49736],success(e){}})},logCreateRole:function(e){var t=wx.getStorageSync(W[49704]);var o=wx.getStorageSync(W[49705]);var r={};r[W[49737]]=t,r[W[49738]]=o,r[W[18045]]=e.roleid,r[W[49739]]=e.rolelevel,r[W[49740]]=e.rolename,r[W[19227]]=e.serverid,e.roleid&&e.serverid&&($LMUX7R={role_id:e.roleid,server_id:e.serverid}),this.log(W[6],r);t={role_id:e.roleid,role_name:e.rolename,role_level:e.rolelevel,server_id:e.serverid,user_id:wx.getStorageSync(W[49707])};hysdkobj.sendrole({roleInfo:t,success:function(e){console.log(W[49741]+JSON.stringify(e))},fail:function(e){console.log(W[49742],e)}})},logEnterGame:function(e){var t=wx.getStorageSync(W[49704]);var o=wx.getStorageSync(W[49705]);var r={};r[W[49737]]=t,r[W[49738]]=o,r[W[18045]]=e.roleid,r[W[49739]]=e.rolelevel,r[W[49740]]=e.rolename,r[W[19227]]=e.serverid,e.roleid&&e.serverid&&($LMUX7R={role_id:e.roleid,server_id:e.serverid}),this.log(W[9652],r),$LMXR7U&&this.updateShare($LMXR7U.invite,$LMXR7U.invite_type,$LMXR7U.is_new,e.roleid,e.serverid,$LMXR7U.scene)},logRoleUpLevel:function(e){var t=wx.getStorageSync(W[49704]);var o=wx.getStorageSync(W[49705]);var r={};r[W[49737]]=t,r[W[49738]]=o,r[W[18045]]=e.roleid,r[W[49739]]=e.rolelevel,r[W[49740]]=e.rolename,r[W[19227]]=e.serverid,e.roleid&&e.serverid&&($LMUX7R={role_id:e.roleid,server_id:e.serverid}),this.log(W[49743],r);t={role_id:e.roleid,role_name:e.rolename,role_level:e.rolelevel,server_id:e.serverid,user_id:wx.getStorageSync(W[49707])};hysdkobj.sendrole({roleInfo:t,success:function(e){console.log(W[49744]+JSON.stringify(e))},fail:function(e){console.log(W[49745],e)}})},uuid:function(e,t){var o=W[49746].split("");var r,n=[];var a;if(e=e||o.length,t)for(r=0;r<t;r++)n[r]=o[0|Math.random()*e];else for(n[8]=n[13]=n[18]=n[23]="-",n[14]="4",r=0;r<36;r++)n[r]||(a=0|16*Math.random(),n[r]=o[19==r?3&a|8:a]);return n.join("")},getPublicData:function(){var e=wx.getStorageSync(W[49695]);var t=wx.getStorageSync(W[49696]);var o=wx.getStorageSync(W[49697]);return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id,partner_label:config.partner_label,ad_code:o,uuid:e,idfv:t,mac:W[49747],is_from_min:1,dname:sysInfo.model,net_type:0==sysInfo.wifiSignal?"4G":W[49748],os_ver:sysInfo.system,sdk_ver:sysInfo.version,game_ver:config.game_ver,device:sysInfo.platform==W[49001]?1:2}},log:function(e,t){var o=this.getPublicData();for(var r in t)o[r]=t[r];console.log(W[49749]+e),console.log(o),wx.request({url:W[43040]+HOST+W[49750]+e+W[49751]+encodeURIComponent(JSON.stringify(o))})},getDate:function(){var e=new Date;return e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},downloadClient:function(){wx.openCustomerServiceConversation()},weiduanHelper:function(){sdk.goBindPhone()},sendUrl:function(){sdk.goBindPhone()},setMessageToFriendQuery:function(e,t){e=e.activity_id;t(wx.setMessageToFriendQuery({shareMessageToFriendScene:e}))},getSvipInfo:function(e,t){console.log(W[49752]);var o=W[49753];wx.request({url:o,method:W[42557],dataType:W[9778],success:function(e){e={qrcode:e.data};t&&t(e)}})},subscribeMessage:function(e,t){console.log(W[49754]+e),n[W[49196]]=typeof t==W[49605]?t:null,wx.requestSubscribeMessage({tmplIds:e,success(e){console.log(W[49755]),console.log(e),n[W[49196]]&&n[W[49196]](e)},fail(e){console.log(W[49756]),console.log(e),n[W[49196]]&&n[W[49196]](e)}})}}}function run(e,t,o){e in $LMUXR7&&$LMUXR7[e](t,o)}exports.init=function(e,t){run(W[546],e,t)},exports.login=function(e){run(W[49104],"",e)},exports.login=function(e){run(W[49104],"",e)},exports.pay=function(e,t){run(W[49172],e,t)},exports.openService=function(){run(W[42269])},exports.logCreateRole=function(e,t,o,r,n){run(W[49184],{serverid:e,servername:t,roleid:o,rolename:r,rolelevel:n})},exports.logEnterGame=function(e,t,o,r,n){run(W[49186],{serverid:e,servername:t,roleid:o,rolename:r,rolelevel:n})},exports.logRoleUpLevel=function(e,t,o,r,n){run(W[49188],{serverid:e,servername:t,roleid:o,rolename:r,rolelevel:n})},exports.share=function(e){run(W[49189],{type:e})},exports.msgCheck=function(e,t){run(W[20455],e,t)},exports.downloadClient=function(){run(W[49757])},exports.getConfig=function(){return{game_id:config.game_id,game_pkg:config.game_pkg,partner_id:config.partner_id}},exports.getPublicData=function(){run(W[49758])},exports.weiduanHelper=function(){run(W[40226])},exports.sendUrl=function(){run(W[49759])},exports.setMessageToFriendQuery=function(e,t){run(W[49760],e,t)},exports.getSvipInfo=function(e,t){run(W[49761],e,t)},exports.subscribeMessage=function(e,t){run(W[49196],e,t)};