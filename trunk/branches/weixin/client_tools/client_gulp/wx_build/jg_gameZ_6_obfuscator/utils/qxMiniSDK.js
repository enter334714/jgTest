const version="3.0";const sdkVersion="8.0";var channel_cfg_version=1;const domain={yisdk:"https://yisdk-api.gowan8.com",api:"https://api.gowan8.com"};const test_domain={yisdk:"http://yisdk-api.gowanme.com",api:"http://api.gowanme.com"};const USER_INFO="gowan_user_info";const XCX_USER_INFO="xcx_user_info";wx&&wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]});const uuid=()=>{var e=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};function getUuid(){let e=getStorageSync("qx_uuid");return e||(saveStorageSync("qx_uuid",e=uuid()),e)}var md5=require("./utility/qx_md5.js"),qx_auth=require("./utility/qx_auth.js"),{requestEncrypt,returnDecrypt}=qx_auth;var shareCfg={img_url:"https://yxfile.gowan8.com/share/default/share_logo.png",title:"\u5343\u79a7\u6e38\u620f"};var _globalData={},localUserInfo={},microParame=getUuid();function request(e,a,t={},s=1){var o=String((new Date).getTime()).substr(0,10);var n=t.domain||"yisdk";var i;t.hasOwnProperty("domain")&&delete t.domain;let r={ts:o};n=("test"==qxMiniSDK.reqEnv?test_domain:domain)[n];return null===a?(i=n+"/"+e,r=t):(i=n+`/?ct=${e}&ac=`+a,1==s?(r.is_jsdk=1,t.is_jsdk=1):r.js=1,console.log("[\u8bf7\u6c42\u53c2\u6570]",t),n=requestEncrypt(JSON.stringify(t),o).e,r.p=n),new Promise((s,t)=>{wx.request({url:i,data:r,header:{"content-type":"application/x-www-form-urlencoded;charset=utf-8"},method:"POST",success(e){var t;!e.data.data||(t=e.data.data).d&&(e.data.data=JSON.parse(returnDecrypt(t.d,String(t.ts)).d)),console.log(`[${a}接口返回值]`,e),s(e.data)},fail(e){"request:fail abort"!==e.errMsg&&(t?t(e):wx.showModal({title:"\u63d0\u793a",content:"\u8bf7\u6c42\u5931\u8d25,\u8bf7\u68c0\u67e5\u7f51\u7edc",showCancel:!1,confirmColor:"#0f77ff",success:e=>{}}))}})})}function getRoleBaseMsg(e){return{server_id:e.serverId,server_name:e.serverName,role_id:e.roleId,role_name:e.roleName,role_level:e.roleLevel,balance:e.userMoney||0,vip_level:e.vipLevel||1,fighting:e.fighting||"",role_c_time:e.roleCTime||""}}function extFooter(){let e=wx.getSystemInfoSync();return{screen:e.windowWidth+"x"+e.windowHeight,os_version:e.system.replace(/[a-zA-Z]+\s*/,""),simulator:"0",isroot:0,serial_number:"",imsi:"",android_id:"",net:4,operators:4,location:"",version:version,game_version:"1.0",platform_version:e.SDKVersion,server_version:"1.2",imei:microParame.replace(/-/g,""),mac:microParame.replace(/-/g,""),utma:microParame.replace(/-/g,""),os:0==e.system.indexOf("iOS")?2:1,model:e.model.replace(/\<(.*?)\>/g,""),gosdk_type:"wxmini"}}function sdkFooter(){let e=wx.getSystemInfoSync();return{version:sdkVersion,device:microParame.replace(/-/g,""),imei:microParame.replace(/-/g,""),screen:e.windowWidth+"x"+e.windowHeight,platform:0==e.system.indexOf("iOS")?1:2,model:e.model.replace(/\<(.*?)\>/g,""),system:e.system.replace(/[a-zA-Z]+\s*/,""),system_language:"zh",net:4,operator:"",location:"",gosdk_type:"wxmini"}}function removeStorageSync(t){try{wx.removeStorageSync(t),_globalData[t]&&delete _globalData[t]}catch(e){delete _globalData[t]}}function saveStorageSync(t,s={}){try{wx.setStorageSync(t,s)}catch(e){_globalData[t]=s}}function getStorageSync(t){let s;try{s=(s=wx.getStorageSync(t))||(_globalData[t]||"")}catch(e){s=_globalData[t]||""}return s}function getZjwlScene(){var t=wx.getLaunchOptionsSync().query;if(t.scene){let e=decodeURIComponent(t.scene);return(e=e.replace(/^\s+|\s+$/g,"").replace(/^(scene=)/g,"")).replace(/^\s+|\s+$/g,"")}return 0}var __assign=Object.assign||function(e){var t,s=arguments.length;for(var a=1;a<s;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};var qxMiniSDK={sdkChannel:"minigame",initData:{channel:"gowan"},apiStart(){this.apiRuning=!0},apiEnd(){this.apiRuning=!1},liveDt:{},isApiRunning(){return this.apiRuning},reqEnv:"prod",init(e={},s){var a=this;var t,o;a.isApiRunning()||(a.apiStart(),o=getZjwlScene()||e.channel_id,t={},wx.getAccountInfoSync&&(t=wx.getAccountInfoSync()),t=e.wxmini_appid||t.miniProgram.appId,o={game_id:e.game_id,channel:a.initData.channel,game_name:e.game_name,from_id:o,original_from_id:e.channel_id,wxmini_appid:t||""},a.initData=__assign(a.initData,o),a.reqEnv=e.req_env||"prod",request("init","index",__assign({},o,extFooter(),{channel:a.sdkChannel}),1).then(e=>{var t;a.apiEnd(),0==e.code?((e=e.data).share&&(shareCfg=__assign(shareCfg,e.share)),(t=e.init_notice)&&wx.showModal({title:t.title,content:t.content,showCancel:!1,success(e){e.confirm}}),channel_cfg_version=e.channel_cfg_version||channel_cfg_version,a._active(),t=wx.getLaunchOptionsSync(),s&&s({statusCode:0,status:"\u521d\u59cb\u5316\u6210\u529f",launchOptions:t})):s&&s({statusCode:1,status:"\u521d\u59cb\u5316\u5931\u8d25",launchOptions:t})}))},checkSession(a){var o=this;wx.checkSession({success(e){var t=getStorageSync(USER_INFO);var s=getStorageSync(XCX_USER_INFO);t&&t.ext.openid?(console.log("[session_key \u672a\u8fc7\u671f-------\x3e\u76f4\u63a5\u6267\u884c\u767b\u5f55\u65b9\u6cd5]"),o._dologin(s,"checkSession",a)):a&&a({statusCode:1,status:"\u767b\u5f55\u5df2\u7ecf\u8fc7\u671f"})},fail(){console.log("session_key \u5df2\u7ecf\u8fc7\u671f-------\x3e\u9700\u8981\u91cd\u65b0\u6267\u884c\u767b\u5f55\u6d41\u7a0b"),a&&a({statusCode:1,status:"session_key \u5df2\u7ecf\u8fc7\u671f"})}})},login(t={},s){var a=this;saveStorageSync(XCX_USER_INFO,t);a.checkSession(function(e){console.log("[checkSessionRes]",e),0===e.statusCode?s&&s(e):a._dologin(t,"login",s)})},_dologin(s,o,n){console.log("[\u767b\u5f55\u7c7b\u578b]",o);let i=this;if(!i.isApiRunning()){i.apiStart();let a=getStorageSync(USER_INFO);wx.login({success:e=>{let t={code:e.code,userinfo:encodeURIComponent(JSON.stringify(s))};"checkSession"==o&&(t.uopenid=a.ext.openid),request("minigame","login",__assign({},{ext:JSON.stringify({}),data:JSON.stringify(t)},i.initData,extFooter(),{channel_cfg_version:channel_cfg_version}),1).then(e=>{var t,s;i.apiEnd(),0==e.code?(1==(s=e.data).ext.is_bind_user&&i.getUnionid(s),a&&removeStorageSync(USER_INFO),saveStorageSync(USER_INFO,s),localUserInfo=s,t=i.onShareToArk({}),wx.onShareAppMessage(()=>t),i.initData.from_id=s.from_id,s={statusCode:0,userId:s.user_id,platformChanleId:Number(0),userName:s.userName||"",timestamp:String(s.timestamp),sign:s.new_sign,guid:s.guid,cp_ext:s.cp_ext||"",ext:s.ext||""},n&&n({statusCode:0,loginParams:s,status:"\u767b\u5f55\u6210\u529f"})):n&&n({statusCode:1,status:e.msg||"\u767b\u5f55\u5931\u8d25"})})}})}},getUnionid:function(s){var a=this;var e=wx.getSystemInfoSync();let o=e.screenWidth;let n=e.screenHeight;wx.getSetting({success(e){if(e.authSetting["scope.userInfo"]&&"1"!=s.ext.is_unionid)console.log("\u7528\u6237\u5df2\u6388\u6743");else{console.log("\u7528\u6237\u672a\u6388\u6743");let t=wx.createUserInfoButton({type:"text",text:"",style:{left:0,top:0,width:o,height:n,backgroundColor:"#00000001",color:"#ffffff",fontSize:20,textAlign:"center",lineHeight:n}});t.onTap(e=>{e.userInfo?request("h5","bind_user",__assign({},extFooter(),a.initData,{data:{uopenid:s.ext.openid,userinfo:encodeURIComponent(JSON.stringify(e))}}),0).then(e=>{0==e.code?t.destroy():wx.showModal({title:"\u63d0\u793a",showCancel:!1,content:"\u6388\u6743\u5931\u8d25\uff0c\u8bf7\u5378\u8f7d\u5fae\u4fe1\u5c0f\u6e38\u620f\u540e\uff0c\u91cd\u65b0\u767b\u5f55\u6388\u6743"})}):(console.log("\u7528\u6237\u62d2\u7edd\u6388\u6743:",e),wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",content:"\u9700\u8981\u540c\u610f\u5fae\u4fe1\u6388\u6743\u624d\u53ef\u4ee5\u767b\u5f55\u6e38\u620f\uff01",showCancel:!1,confirmText:"\u6715\u77e5\u9053\u4e86",confirmColor:"#576B95",success(e){console.log("\u7528\u6237\u5df2\u67e5\u9605\u6388\u6743\u63d0\u793a\u6846")}}))})}}})},loginDuration(e=0,t){e=(new Date).getTime()-e;var s=getStorageSync(USER_INFO);request("loadlog","login_duration",__assign({},extFooter(),this.initData,{user_id:s.user_id,guid:s.guid,duration:e/1e3}),1).then(e=>{0==e.code?t&&t({statusCode:0,status:"\u4e0a\u62a5\u6210\u529f"}):t&&t({statusCode:1,status:"\u4e0a\u62a5\u5f02\u5e38"})})},recharge(e,t){var s=getStorageSync(USER_INFO);var a=s.user_id;s={openid:s.ext.openid,pf:0==wx.getSystemInfoSync().system.indexOf("iOS")?"ios":"android"};s=__assign({},{ext:JSON.stringify(s),user_id:a},extFooter(),getRoleBaseMsg(e),this.initData,{product_name:e.productName,amount:e.amount,notify_url:e.callbackURL,callback_info:e.callbackInfo,cp_product_id:e.cpProductId,charge_mount:e.chargeMount,cp_order_id:e.cpOrderId,channel_cfg_version:channel_cfg_version});console.log("payParams---------\x3e",s),localUserInfo.ext.is_realname&&1==localUserInfo.ext.is_realname?this._isRealName(s,t):this._doMakeOrder(s,t)},_isRealName(t,s){let a=this;let o=getStorageSync(USER_INFO).user_id;request("user","real_name",__assign({},extFooter(),a.initData,{user_id:o,real_name:"",guid:localUserInfo.guid,id_number:"",mode:2}),1).then(e=>{0==e.code?this._doMakeOrder(t,s):1==e.code?wx.showModal({title:"\u5b9e\u540d\u8ba4\u8bc1",showCancel:!1,content:"\u6839\u636e\u56fd\u5bb6\u76f8\u5173\u6cd5\u89c4\uff0c\u9700\u8981\u60a8\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1",success(e){if(e.confirm){e=a.initData;let t={guid:localUserInfo.guid,game_id:e.game_id,channel:a.channel,user_id:o,qx_event_type:"real_name",from_id:e.from_id};a._customerService(t,!0,"\u5b9e\u540d\u8ba4\u8bc1(\u7ed1\u5b9aid:"+localUserInfo.guid+")","http://yxfile.gowan8.com/upload/image/202008/realname.jpg",function(e){1==e.statusCode&&wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",cancelText:"\u6715\u77e5\u9053\u4e86",confirmText:"\u524d\u5f80\u5b9e\u540d",content:"\u5145\u503c\u9700\u8981\u5b9e\u540d\u8ba4\u8bc1\uff0c\u8bf7\u60a8\u8c05\u89e3",success:function(e){e.confirm?a._customerService(t,!0,"\u5b9e\u540d\u8ba4\u8bc1(\u7ed1\u5b9aid:"+localUserInfo.guid+")","http://yxfile.gowan8.com/upload/image/202008/realname.jpg"):e.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})})}}}):console.log("\u8bf7\u6c42\u9519\u8bef\uff0c\u68c0\u67e5\u5b9e\u540d\u5f02\u5e38")})},_doMakeOrder(i,r){var l=this;var e=getStorageSync(USER_INFO);let c;let d=e.user_id;let u=e.ext.openid;request("minigame","make_order",i,1).then(e=>{if(0==e.code){var t=e.data;var s=t.ext.op_type;c=t.order_id;var a={mode:"game",env:t.ext.env,offerId:t.ext.offerId,currencyType:"CNY",platform:"android",buyQuantity:t.ext.buyQuantity,zoneId:"1"};var o=Date.parse(new Date)/1e3;var n={op_msg:t.ext.op_msg||"",op_type:s,money:i.amount,user_id:d,order_id:c,openid:u,pf:0==wx.getSystemInfoSync().system.indexOf("iOS")?"ios":"android",ts:o,game_id:l.initData.game_id,sign:md5(c+d+u+i.amount+l.initData.game_id+o),channel:l.initData.channel};if(console.log("op_type",s),0<=s)switch(s){case 0:wx.showLoading({title:"\u52a0\u8f7d\u4e2d\u2026\u2026"}),l._payCustomerService(n,r);break;case 1:case 2:l._requestMidasPayment(a,n,r);break;case 3:r&&r({statusCode:0,status:"\u4e0b\u5355\u6210\u529f"});break;case 4:wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",showCancel:!1,content:e.msg}),r&&r({statusCode:1,status:"\u4e0b\u5355\u5931\u8d25"});break;case 5:l._payCallback(n,r)}else-2==s?t.ext.qrcode_url?wx.previewImage({current:t.ext.qrcode_url,urls:[t.ext.qrcode_url]}):wx.showToast({title:"\u4e0b\u5355\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u4e0b\u5355",icon:"none"}):-3==s?wx.navigateToMiniProgram({appId:"wxb42f1c9f32c599b2",path:"pages/wxpay/wxpay?order_id="+t.order_id,extraData:{},envVersion:"release",success(e){console.log("\u6253\u5f00\u6210\u529f")},fail:function(e){console.log(e,"\u6253\u5f00\u5931\u8d25")}}):wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",showCancel:!1,content:e.msg})}else""!==e.msg&&wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",showCancel:!1,content:e.msg})})},_requestMidasPayment(e={},t={},s){var a=this;console.log("[data]",e),wx.requestMidasPayment({mode:"game",env:e.env,offerId:e.offerId,currencyType:"CNY",platform:"android",buyQuantity:e.buyQuantity,zoneId:"1",success(e){console.log(e,"\u7c73\u5927\u5e08\u6210\u529f"),a._payCallback(t,s)},fail(e){console.log(e,"\u7c73\u5927\u5e08\u5931\u8d25"),s&&s({statusCode:1,status:"\u7c73\u5927\u5e08fail"})}})},_payCustomerService(t={},e){wx.hideLoading();var s=this;wx.showModal({title:"\u5145\u503c\u6559\u7a0b",showCancel:!1,content:t.op_msg,success(e){e.confirm&&s._customerService("",!0,t.order_id,"https://yxfile.gowan8.com/xcxmajia/mjwsw/imgs/xcx_pay.png",function(e){1==e.statusCode&&wx.showModal({title:"\u6e29\u99a8\u63d0\u793a",cancelText:"\u6715\u77e5\u9053\u4e86",confirmText:"\u524d\u5f80\u5145\u503c",content:"\u662f\u5426\u786e\u5b9a\u53d6\u6d88\uff1f",success:function(e){e.confirm?s._customerService("",!0,t.order_id,"https://yxfile.gowan8.com/xcxmajia/mjwsw/imgs/xcx_pay.png"):e.cancel&&console.log("\u7528\u6237\u70b9\u51fb\u53d6\u6d88")}})})}})},_payCallback(e,t){delete e.op_msg,request("notify/jsdk/channel/minigame",null,e,1).then(e=>{t&&t({statusCode:e.code,status:e.msg})})},_active(){var e=getStorageSync("active_qx_uuid");e&&e==microParame||request("loadlog","active",__assign({},extFooter(),this.initData),1).then(e=>{saveStorageSync("active_qx_uuid",microParame)})},loginTips:function(e){this._loginTips(e)},_loginTips:function(e){var t=localUserInfo.ext.login_tips;var s;t&&(s=!1,2==t.open?e.roleLevel<=t.cfg.max_role_level&&e.roleLevel>=t.cfg.min_role_level&&(s=!0):1==t.open&&(s=!0),s&&t.content&&(5<=(e=(e=getStorageSync("login_tips_times"))?parseInt(e,10):0)?delete localUserInfo.ext.login_tips:(saveStorageSync("login_tips_times",e+1),this._loginTipsItem())))},_loginTipsItem(){var s=this;var a=getStorageSync(USER_INFO);var e=a.ext.login_tips;if(!e.title)return!1;wx.showModal({title:e.title,content:e.content,cancelText:"\u6b8b\u5fcd\u62d2\u7edd",confirmText:"\u524d\u5f80\u5ba2\u670d",success:function(e){var t;e.confirm&&(e=a.user_id,t=s.initData,console.log("[initData]",t),e={game_id:t.game_id,user_id:e,channel:t.channel,qx_event_type:"user_account"},s._customerService(e,!0,"\u624b\u673a\u7248(token:"+localUserInfo.guid+")","https://yxfile.gowan8.com/upload/image/202008/icon_gift.jpg"))},fail:function(){}})},createRole(e){let s=__assign({},this.initData,extFooter(),getRoleBaseMsg(e),{user_id:localUserInfo.user_id});return this._loginTips(e),new Promise((e,t)=>{this._reportRequst("add",s,e)})},changeRole(e){let s=__assign({},this.initData,extFooter(),getRoleBaseMsg(e),{user_id:localUserInfo.user_id});return this._loginTips(e),new Promise((e,t)=>{this._reportRequst("login",s,e)})},upgradeRole(e){let s=__assign({},this.initData,extFooter(),{user_id:localUserInfo.user_id},getRoleBaseMsg(e));return this._loginTips(e),new Promise((e,t)=>{this._reportRequst("level",s,e)})},_reportRequst(e,t,s){request("role",e,t,1).then(e=>{e={statusCode:e.code,status:e.msg};s(e)})},shareToArk(e={},t){var s=this.onShareToArk();s=__assign(s,e),wx.shareAppMessage(s),t&&t({statusCode:0,status:"\u5206\u4eab\u6210\u529f"})},onShareToArk(e={}){var t={title:shareCfg.title,imageUrl:shareCfg.img_url,query:"share_user="+localUserInfo.user_id};return __assign(t,e)},bannerAdShow(e={},t){e.adUnitId?(e={adUnitId:e.adUnitId,adIntervals:30<=e.adIntervals?e.adIntervals:30,style:{left:e.left||30,top:e.top||520,width:e.width||320}},_globalData.bannerAd&&(_globalData.bannerAd.destroy(),delete _globalData.bannerAd),_globalData.bannerAd=wx.createBannerAd(e),_globalData.bannerAd.show().then(()=>{t&&t({statusCode:0,status:"\u6210\u529f"})}),_globalData.bannerAd.onError(e=>{t&&t({statusCode:1,status:"\u53d1\u751f\u9519\u8bef"})})):wx.showToast({title:"\u8bf7\u4f20\u5165\u5e7f\u544a\u4f4dID",icon:"none"})},bannerAdHide(e){_globalData.bannerAd?_globalData.bannerAd.hide().then(()=>{e&&e({statusCode:0,status:"\u5173\u95edbanner\u5e7f\u544a\u6210\u529f"})}).catch(()=>{e&&e({statusCode:1,status:"\u5173\u95edbanner\u5e7f\u544a\u5f02\u5e38"})}):e&&e({statusCode:0,status:"\u5173\u95edbanner\u5e7f\u544a\u6210\u529f"})},rewardedVideoAd(e="",t){let s=wx.createRewardedVideoAd({adUnitId:e});s.show().catch(e=>{s.load().then(()=>s.show())}),s.onClose(function(e){s.offClose(),e&&e.isEnded||void 0===e?t&&t({statusCode:0,status:"\u6b63\u5e38\u64ad\u653e\u7ed3\u675f"}):t&&t({statusCode:-1,status:"\u64ad\u653e\u4e2d\u9014\u9000\u51fa"})}),s.onError(function(e){t({statusCode:1,status:"\u89c6\u9891\u64ad\u653e\u9519\u8bef"})})},interstitialAd(e,t){let s=wx.createInterstitialAd({adUnitId:e});s.show().catch(e=>{t&&t({statusCode:1,status:"\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u53d1\u751f\u9519\u8bef"})}),s.onLoad(()=>{t&&t({statusCode:0,status:"\u63d2\u5c4f\u5e7f\u544a\u5df2\u6b63\u5e38\u663e\u793a"})}),s.onClose(()=>{t&&t({statusCode:-1,status:"\u63d2\u5c4f\u5e7f\u544a\u5df2\u5173\u95ed"})})},_customerService(e,t,s,a,o){console.log("[sf]",e),e&&"object"==typeof e&&(e=JSON.stringify(e)),wx.openCustomerServiceConversation({sessionFrom:e,showMessageCard:t||!1,sendMessageTitle:s||"",sendMessageImg:a||"",success:function(e){console.log("\u6253\u5f00\u5ba2\u670d\u6d88\u606f\u6210\u529f",e),o&&o({statusCode:0,status:"\u6253\u5f00\u5ba2\u670d\u6210\u529f"})},fail:function(e){o&&o({statusCode:1,status:"\u6253\u5f00\u5ba2\u670d\u5931\u8d25"})}})},goKefu(e){var t={guid:localUserInfo.guid,game_id:this.initData.game_id,user_id:localUserInfo.user_id,channel:this.channel,qx_event_type:"kefu",from_id:this.initData.from_id};this._customerService(t,!1,"\u8054\u7cfb\u5ba2\u670d","",e)},requestSubscribeMessage(e=[],t){wx.requestSubscribeMessage({tmplIds:e,success:function(e){t&&t({statusCode:0,status:"\u6d88\u606f\u8ba2\u9605\u6210\u529f"})},fail:function(e){t&&t({statusCode:1,status:e.errMsg+",\u6d88\u606f\u8ba2\u9605\u5931\u8d25"})}})},navigateToMiniProgram(e,t){wx.navigateToMiniProgram({appId:e,success:function(e){t&&t({statusCode:0,status:"\u8df3\u8f6c\u6210\u529f"})},fail:function(e){t&&t({statusCode:1,status:"\u8df3\u8f6c\u5931\u8d25"})}})},canPay(e,t){let s={statusCode:0,status:""};var a=wx.getSystemInfoSync();var o=0==a.system.indexOf("iOS")?2:1;request("h5","wxmini_can_pay",__assign({},this.initData,getRoleBaseMsg(e),{os:o,platform:a.platform,is_test:e.isTest||0}),0).then(e=>{0!=e.code&&(s={statusCode:e.code,status:e.msg}),t&&t(s)})},checkBindPhone(t){let s={statusCode:0,status:""};var e=getStorageSync(USER_INFO);request("user","check_bind_phone",__assign({},this.initData,sdkFooter(),{user_id:e.user_id,domain:"api"}),0).then(e=>{0!=e.code&&(s={statusCode:e.code,status:e.msg}),t&&t(s)})},bindSendCode(e,t){delete _globalData.bindSendCodeRes;let s={statusCode:0,status:""};request("send_code","index",__assign({},this.initData,sdkFooter(),{phone:e.phone||"",domain:"api",user_id:localUserInfo.user_id,pos:3}),0).then(e=>{0!=e.code?s={statusCode:e.code,status:e.msg}:_globalData.bindSendCodeRes=e.data,t&&t(s)})},bindPhone(e,t){let s={statusCode:0,status:""};var a=getStorageSync(USER_INFO);var o=_globalData.bindSendCodeRes;if(!o)return s={statusCode:1,status:"\u8bf7\u5148\u83b7\u53d6\u9a8c\u8bc1\u7801"},void(t&&t(s));delete _globalData.bindSendCodeRes,request("user","bind_phone",__assign({},{user_id:a.user_id,phone:e.phone,code:e.code,code_sign:o.code_sign,code_timeout:o.timeout,domain:"api"},sdkFooter(),this.initData),0).then(e=>{0!=e.code&&(s={statusCode:e.code,status:e.msg}),t&&t(s)})},showEgretFloatBall(s,e={}){var t=localUserInfo.ext.floating_ball;var a=!1;if(2==t.open?e.roleLevel<=t.cfg.max_role_level&&e.roleLevel>=t.cfg.min_role_level&&(a=!0):1==t.open&&(a=!0),a){let t=this;let e=new window.qxMiniButton.cross.MiniButton;s.addChildAt(e,100),e.init({iconpath:["https://yxfile.gowan8.com/upload/icon/wxmini/bg-left.png","https://yxfile.gowan8.com/upload/icon/wxmini/bg-right.png","https://yxfile.gowan8.com/upload/icon/wxmini/main.png","https://yxfile.gowan8.com/upload/icon/wxmini/weixin.png","https://yxfile.gowan8.com/upload/icon/wxmini/youxi.png"],texts:["\u516c\u4f17\u53f7","\u5347 \u7ea7"],icon:{posX:200,posY:340},onClick:e=>{switch(console.log("btn call idx ",e),Number(e)){case 0:t.goGzh();break;case 1:t._loginTipsItem()}}})}},goGzh(){var e={qx_event_type:"gzh",game_id:this.initData.game_id};this._customerService(e,!0,"\u4e0b\u65b9\u626b\u7801\u5173\u6ce8\u516c\u4f17\u53f7\uff0c\u9886\u793c\u5305","https://yxfile.gowan8.com/upload/image/202008/icon_gift.jpg")},isSourceMy(e){var t=wx.getLaunchOptionsSync();console.log("[source]",t),1089==t.scene?e&&e({statusCode:0,status:"\u6765\u6e90\u6211\u7684\u5c0f\u7a0b\u5e8f"}):e&&e({statusCode:1,status:"\u4e0d\u662f\u6765\u6e90\u6211\u7684\u5c0f\u7a0b\u5e8f"})},getLiveInfo(t,s){var a=this;wx.getChannelsLiveInfo?wx.getChannelsLiveInfo({finderUserName:t.finderUserName,success:function(e){a.liveDt=e,a.liveDt.finderUserName=t.finderUserName,s&&s({statusCode:0,liveInfo:a.liveDt,status:"\u83b7\u53d6\u76f4\u64ad\u5ba4\u4fe1\u606f\u6210\u529f"})},fail:function(e){s&&s({statusCode:1,status:"\u83b7\u53d6\u76f4\u64ad\u5ba4\u4fe1\u606f\u5931\u8d25"})}}):s&&s({statusCode:1,status:"\u8be5\u5fae\u4fe1\u7248\u672c\u4e0d\u652f\u6301\u6b64api"})},goLive(e){var t={finderUserName:this.liveDt.finderUserName,feedId:this.liveDt.feedId,nonceId:this.liveDt.nonceId};wx.openChannelsLive?(wx.openChannelsLive(t),e&&e({statusCode:0,status:"\u8fdb\u5165\u76f4\u64ad\u5ba4\u6210\u529f"})):e&&e({statusCode:1,status:"\u5f53\u524d\u5fae\u4fe1\u4e0d\u652f\u6301\u6b64api,\u8fdb\u5165\u76f4\u64ad\u5ba4\u5931\u8d25"})},showGameClub(){wx.createGameClubButton({icon:"light",style:{left:10,top:76,width:40,height:40}})},isShowVideoAd(e={},t){request("h5","role_charge",{game_id:this.initData.game_id,channel:this.initData.channel,role_id:e.roleId,server_id:e.serverId},0).then(e=>{0==e.code?t&&t({statusCode:1,status:"\u4e0d\u5c55\u793a\u6fc0\u52b1\u89c6\u9891"}):t&&t({statusCode:0,status:"\u5c55\u793a\u6fc0\u52b1\u89c6\u9891"})})}};"undefined"!=typeof module&&(module.exports=qxMiniSDK),"undefined"!=typeof window&&(window.qxMiniSDK=qxMiniSDK);