/**
 * wxasdk - 微信小游戏SDK
 * @version v2.0.6
 */
!function n(o,i,r){function s(a,e){if(!i[a]){if(!o[a]){var t="function"==typeof require&&require;if(!e&&t)return t(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+a+"'")}t=i[a]={exports:{}};o[a][0].call(t.exports,function(e){var t=o[a][1][e];return s(t||e)},t,t.exports,n,o,i,r)}return i[a].exports}for(var c="function"==typeof require&&require,e=0;e<r.length;e++)s(r[e]);return s}({1:[function(t,s,e){!function(e){var n,o,a,i,{}=t("../src/config"),r=t("./wxxsdk");n="undefined"!=typeof GameGlobal?GameGlobal:e,a=o="",i={init:function(e){var t={};t.appVersion=e.appVersion,t.ogameID=Number(e.gameID),t.wxAppID=e.wxAppID,t.adID=Number(e.adID),t.appID=Number(e.pid),t.appKey=e.appKey,t.shareAdID=e.shareAdID,t.kfMsgPayImg=e.kfMsgImg,t.kfMsgDownImg=e.kfMsgDownImg,t.shareImg=e.shareImg,t.shareTitle=e.shareTitle,o=e.pid,a=t.shareAdID,r.init(t)},login:function(a){r.login(function(e){var t=""==o?n.asdkConfig.appID:o;e.state&&(t={code:e.data.code,app_id:t},a(t))})},pay:function(e,t){var a={};a.out_trade_no=e.out_trade_no,a.callback_url=e.callback_url,a.product_amount=e.coin,a.product_id=e.product_id,a.product_name=e.product_name||"充值",a.product_desc=e.product_desc||"",a.server_id=e.server_id,a.role_id=e.role_id,a.role_name=e.role_name,a.total_charge=e.total_fee,r.pay(a,function(e){t(e)})},logout:function(e){e()},onLoginRsp:function(e){r.onLoginRsp(e)},getChlInfo:function(t){r.login(function(e){e.state&&(e={user_id:e.data.uid&&e.data.uid.toString()},t(e))})},dataReport:function(e,t){var a={};switch(e){case"enterServer":i._onLoginRsp({userGrade:Number(t.roleLevel)||1});break;case"enterGame":e="enter",a.server_zone=t.serverZone,a.server_id=Number(t.serverID),a.server_name=t.serverName,a.role_id=Number(t.roleID),a.role_level=Number(t.roleLevel),a.role_name=t.roleName,a.role_cts=t.createTime,t.roleIds&&(a.role_id_s=t.roleIds),r.reportInfo(e,a);break;case"createRole":break;case"levelUp":e="levelUp",a.server_zone=t.serverZone,a.server_id=Number(t.serverID),a.server_name=t.serverName,a.role_id=Number(t.roleID),a.role_level=Number(t.roleLevel),a.role_name=t.roleName,a.role_cts=t.createTime,t.roleIds&&(a.role_id_s=t.roleIds),r.reportInfo(e,a)}},isShowPayUI:function(e,t){r.canPay(function(e){t({state:1,data:{show:e},msg:""})})},checkContent:function(e,t){r.checkContent(e,function(e){t(e)})},getShareParamStr:function(){var e="",t=""==a?n.asdkConfig.shareAdID:a;return e=t?"scene="+t:e},_onLoginRsp:function(e){n.wxmdsdk.onLoginRsp(e)}},s.exports=i}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../src/config":3,"./wxxsdk":2}],2:[function(d,e,t){!function n(o,i,r){function s(t,e){if(!i[t]){if(!o[t]){var a="function"==typeof d&&d;if(!e&&a)return a(t,!0);if(c)return c(t,!0);throw new Error("Cannot find module '"+t+"'")}a=i[t]={exports:{}},o[t][0].call(a.exports,function(e){return s(o[t][1][e]||e)},a,a.exports,n,o,i,r)}return i[t].exports}for(var c="function"==typeof d&&d,e=0;e<r.length;e++)s(r[e]);return s}({1:[function(e,h,t){!function(e){"use strict";var r,t,a;function n(e){this.eventType={},e&&(this.node=new e)}function o(){}g=d={},r="undefined"!=typeof GameGlobal?GameGlobal:e,Object.defineProperty(n.prototype,"x",{get:function(){return this.node.x},set:function(e){this.node&&(this.node.x=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.node.y},set:function(e){this.node&&(this.node.y=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.node.width},set:function(e){this.node&&(this.node.width=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.node.height},set:function(e){this.node&&(this.node.height=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"opacity",{get:function(){return this.node.alpha},set:function(e){this.node&&(this.node.alpha=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scaleX",{get:function(){return this.node.scaleX},set:function(e){this.node&&(this.node.scaleX=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scaleY",{get:function(){return this.node.scaleY},set:function(e){this.node&&(this.node.scaleY=e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.node.visible},set:function(e){this.node&&(this.node.visible=e)},enumerable:!1,configurable:!0}),n.prototype.eventCallBack=function(e){var t={type:"",target:this,stageX:e.stageX,stageY:e.stageY};switch(e.type){case"mousedown":case"touchBegin":t.type="touchstart";break;case"mouseup":case"touchEnd":t.type="touchend";break;case"touchMove":case"mousemove":t.type="touchmove"}if(0<(null===(e=this.eventType[t.type])||void 0===e?void 0:e.length))for(var a=0;a<this.eventType[t.type].length;a++)this.eventType[t.type][a][0].call(this.eventType[t.type][a][1],t)},n.prototype.addEventListener=function(e,t,a){var n=e;switch(e){case"touchstart":e=r.Laya?"mousedown":"touchBegin";break;case"touchend":e=r.Laya?"mouseup":"touchEnd";break;case"touchmove":e=r.Laya?"mousemove":"touchMove"}this.eventType[n]||(this.eventType[n]=[]);for(var o=0;o<this.eventType[n].length;o++)if(this.eventType[n][o][0]===t&&this.eventType[n][o][1]===a)return console.log("重复添加");this.eventType[n].push([t,a||r]),1==this.eventType[n].length&&(this.node.addEventListener?(this.node.touchEnabled=!0,this.node.addEventListener(e,this.eventCallBack,this)):this.node.on(e,this,this.eventCallBack))},n.prototype.removeEventListener=function(e,t,a){var n,o=e;switch(e){case"touchstart":e=r.Laya?"mousedown":"touchBegin";break;case"touchend":e=r.Laya?"mouseup":"touchEnd";break;case"touchmove":e=r.Laya?"mousemove":"touchMove"}if(this.eventType[o])for(var i=this.eventType[o].length-1;0<=i;i--)this.eventType[o][i][0]===t&&this.eventType[o][i][1]===a&&this.eventType[o].splice(i,1);0==(null===(n=this.eventType[o])||void 0===n?void 0:n.length)&&(this.node.removeEventListener?this.node.removeEventListener(e,t,a||r):this.node.off(e,a||r,t))},n.prototype.appendChild=function(e){this.node.addChild(e.node)},n.prototype.removeChild=function(e){this.node.removeChild(e.node)},n.prototype.addToStage=function(){(r.egret?r.egret.MainContext.instance:r.Laya).stage.addChild(this.node)},n.prototype.removeToStage=function(){(r.egret?r.egret.MainContext.instance:r.Laya).stage.removeChild(this.node)},g.BaseNode=n,t=d,a="undefined"!=typeof GameGlobal?GameGlobal:e,Object.defineProperty(o,"Ins",{get:function(){return this._ins||(this._ins=new o),this._ins},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ScreenWidth",{get:function(){return a.Laya?a.Laya.stage.width:a.egret.MainContext.instance.stage.stageWidth},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ScreenHeight",{get:function(){return a.Laya?a.Laya.stage.height:a.egret.MainContext.instance.stage.stageHeight},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"stage",{get:function(){return this._stage||(this._stage=new t.BaseNode,this._stage.node=(a.Laya||a.egret.MainContext.instance).stage),this._stage},enumerable:!1,configurable:!0}),t.Common=o;var i,s,c,d,g,l,u,_=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});function f(e){var t=c.call(this,s.egret?s.egret.Bitmap:s.Laya.Image)||this;return t._src="",e&&(t.src=e),t}function p(e){var t=u.call(this,l.Laya?l.Laya.Text:l.egret.TextField)||this;return e&&(t.text=e),t}g=d,s="undefined"!=typeof GameGlobal?GameGlobal:e,_(f,c=g.BaseNode),Object.defineProperty(f.prototype,"src",{get:function(){return this._src},set:function(e){var t=this;s.RES?s.RES.getResByUrl(e).then(function(e){t.node.texture=e}):this.node.skin=e,this._src=e},enumerable:!1,configurable:!0}),g.Image=f,g=e.c_Float=d,l="undefined"!=typeof GameGlobal?GameGlobal:e,_(p,u=g.BaseNode),Object.defineProperty(p.prototype,"text",{get:function(){return this.node.text},set:function(e){this.node.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"color",{get:function(){return this.node.textColor||this.node.color},set:function(e){l.Laya?this.node.color=e:this.node.textColor=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"textAlign",{get:function(){return l.Laya?this.node.align:this.node.textAlign},set:function(e){l.Laya?this.node.align=e:this.node.textAlign=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"verticalAlign",{get:function(){return l.Laya?this.node.valign:this.node.verticalAlign},set:function(e){l.Laya?this.node.valign=e:this.node.verticalAlign=e},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"size",{get:function(){return this.node.fontSize||this.node.size},set:function(e){l.egret?this.node.size=e:this.node.fontSize=e},enumerable:!1,configurable:!0}),g.Text=p,h.exports=d}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,a){var d={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,a,n,o,i,r,s="",c=0;for(e=d._utf8_encode(e);c<e.length;)n=(r=e.charCodeAt(c++))>>2,o=(3&r)<<4|(t=e.charCodeAt(c++))>>4,i=(15&t)<<2|(a=e.charCodeAt(c++))>>6,r=63&a,isNaN(t)?i=r=64:isNaN(a)&&(r=64),s=s+this._keyStr.charAt(n)+this._keyStr.charAt(o)+this._keyStr.charAt(i)+this._keyStr.charAt(r);return s},decode:function(e){var t,a,n,o,i,r,s="",c=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");c<e.length;)n=this._keyStr.indexOf(e.charAt(c++)),t=(15&(o=this._keyStr.indexOf(e.charAt(c++))))<<4|(i=this._keyStr.indexOf(e.charAt(c++)))>>2,a=(3&i)<<6|(r=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(n<<2|o>>4),64!=i&&(s+=String.fromCharCode(t)),64!=r&&(s+=String.fromCharCode(a));return d._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){var t,a="",n=0;for(c1=c2=0;n<e.length;)(t=e.charCodeAt(n))<128?(a+=String.fromCharCode(t),n++):191<t&&t<224?(c2=e.charCodeAt(n+1),a+=String.fromCharCode((31&t)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),a+=String.fromCharCode((15&t)<<12|(63&c2)<<6|63&c3),n+=3);return a}};t.exports=d},{}],3:[function(t,e,a){!function(e){(e="undefined"!=typeof GameGlobal?GameGlobal:e).MD5=t("./md5"),e.WXXSDK=t("./sdk")}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./md5":4,"./sdk":5}],4:[function(e,t,a){t.exports=function(e){return function(e){for(var t,a=i?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<e.length;o++)t=e.charCodeAt(o),n+=a.charAt(t>>>4&15)+a.charAt(15&t);return n}(function(e){return function(e){for(var t="",a=0;a<32*e.length;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a=1732584193,n=-271733879,o=-1732584194,i=271733878,r=0;r<e.length;r+=16){var s=a,c=n,d=o,g=i,a=l(a,n,o,i,e[r+0],7,-680876936),i=l(i,a,n,o,e[r+1],12,-389564586),o=l(o,i,a,n,e[r+2],17,606105819),n=l(n,o,i,a,e[r+3],22,-1044525330);a=l(a,n,o,i,e[r+4],7,-176418897),i=l(i,a,n,o,e[r+5],12,1200080426),o=l(o,i,a,n,e[r+6],17,-1473231341),n=l(n,o,i,a,e[r+7],22,-45705983),a=l(a,n,o,i,e[r+8],7,1770035416),i=l(i,a,n,o,e[r+9],12,-1958414417),o=l(o,i,a,n,e[r+10],17,-42063),n=l(n,o,i,a,e[r+11],22,-1990404162),a=l(a,n,o,i,e[r+12],7,1804603682),i=l(i,a,n,o,e[r+13],12,-40341101),o=l(o,i,a,n,e[r+14],17,-1502002290),a=u(a,n=l(n,o,i,a,e[r+15],22,1236535329),o,i,e[r+1],5,-165796510),i=u(i,a,n,o,e[r+6],9,-1069501632),o=u(o,i,a,n,e[r+11],14,643717713),n=u(n,o,i,a,e[r+0],20,-373897302),a=u(a,n,o,i,e[r+5],5,-701558691),i=u(i,a,n,o,e[r+10],9,38016083),o=u(o,i,a,n,e[r+15],14,-660478335),n=u(n,o,i,a,e[r+4],20,-405537848),a=u(a,n,o,i,e[r+9],5,568446438),i=u(i,a,n,o,e[r+14],9,-1019803690),o=u(o,i,a,n,e[r+3],14,-187363961),n=u(n,o,i,a,e[r+8],20,1163531501),a=u(a,n,o,i,e[r+13],5,-1444681467),i=u(i,a,n,o,e[r+2],9,-51403784),o=u(o,i,a,n,e[r+7],14,1735328473),a=_(a,n=u(n,o,i,a,e[r+12],20,-1926607734),o,i,e[r+5],4,-378558),i=_(i,a,n,o,e[r+8],11,-2022574463),o=_(o,i,a,n,e[r+11],16,1839030562),n=_(n,o,i,a,e[r+14],23,-35309556),a=_(a,n,o,i,e[r+1],4,-1530992060),i=_(i,a,n,o,e[r+4],11,1272893353),o=_(o,i,a,n,e[r+7],16,-155497632),n=_(n,o,i,a,e[r+10],23,-1094730640),a=_(a,n,o,i,e[r+13],4,681279174),i=_(i,a,n,o,e[r+0],11,-358537222),o=_(o,i,a,n,e[r+3],16,-722521979),n=_(n,o,i,a,e[r+6],23,76029189),a=_(a,n,o,i,e[r+9],4,-640364487),i=_(i,a,n,o,e[r+12],11,-421815835),o=_(o,i,a,n,e[r+15],16,530742520),a=f(a,n=_(n,o,i,a,e[r+2],23,-995338651),o,i,e[r+0],6,-198630844),i=f(i,a,n,o,e[r+7],10,1126891415),o=f(o,i,a,n,e[r+14],15,-1416354905),n=f(n,o,i,a,e[r+5],21,-57434055),a=f(a,n,o,i,e[r+12],6,1700485571),i=f(i,a,n,o,e[r+3],10,-1894986606),o=f(o,i,a,n,e[r+10],15,-1051523),n=f(n,o,i,a,e[r+1],21,-2054922799),a=f(a,n,o,i,e[r+8],6,1873313359),i=f(i,a,n,o,e[r+15],10,-30611744),o=f(o,i,a,n,e[r+6],15,-1560198380),n=f(n,o,i,a,e[r+13],21,1309151649),a=f(a,n,o,i,e[r+4],6,-145523070),i=f(i,a,n,o,e[r+11],10,-1120210379),o=f(o,i,a,n,e[r+2],15,718787259),n=f(n,o,i,a,e[r+9],21,-343485551),a=p(a,s),n=p(n,c),o=p(o,d),i=p(i,g)}return Array(a,n,o,i)}(function(e){for(var t=Array(e.length>>2),a=0;a<t.length;a++)t[a]=0;for(a=0;a<8*e.length;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t}(e),8*e.length))}(function(e){for(var t,a,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),a=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=a&&a<=57343&&(t=65536+((1023&t)<<10)+(1023&a),o++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}(e)))};var i=0;function s(e,t,a,n,o,i){return p((i=p(p(t,e),p(n,i)))<<o|i>>>32-o,a)}function l(e,t,a,n,o,i,r){return s(t&a|~t&n,e,t,o,i,r)}function u(e,t,a,n,o,i,r){return s(t&n|a&~n,e,t,o,i,r)}function _(e,t,a,n,o,i,r){return s(t^a^n,e,t,o,i,r)}function f(e,t,a,n,o,i,r){return s(a^(t|~n),e,t,o,i,r)}function p(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}},{}],5:[function(a,o,e){!function(e){var n,g,t=a("./base64"),c=a("../wxxconfig"),d=a("../floating_ball");function l(){}n="undefined"!=typeof GameGlobal?GameGlobal:e,g={_config:{isDev:!0,isSandbox:!1,isPersonal:!1,ogameID:0,appID:0,adID:0,appKey:"",appVersion:"",version:"",os:0,platform:"",system:"",wxAppID:"",wxLibVersion:"",apiOrigin:{user:"https://userapi.zkyouxi.com",pay:"https://yapapi.zkyouxi.com"},shareTitle:"",shareImg:"",shareAdID:0,kfMsgPayImg:"https://fecdn.zkyouxi.com/weixin-pay/click_pay.png",kfMsgDownImg:"https://fecdn.zkyouxi.com/weixin-pay/click_down.png",convertRatio:1},_callbacks:{},_data:{inpayOrderQueue:[],hasRequestIfPurchase:!1,canPay:!1,userGrade:1,userPass:1,userOnlineTime:1,isCallPay:!1,isRequestMidasPayment:!1,launchParams:null,isShowKF:!1,isShowVipKF:!1,isShowMoreGame:!1,isShowUI1:!1,isShowUI2:!1,isShowUI3:!1,isShowUI4:!0,canGetAward:!1,referrer:0,from:"",qs:"",img:{},img2:{}},utils:{log:function(e){g._config.isDev&&console.log(e)},generateUUID:function(){var a=(new Date).getTime();return n.performance&&"function"==typeof n.performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==e?t:3&t|8).toString(16)})},getBaseParams:function(e,i,t=!1,a=!1){return e=e||{},a||(t?(e.ts=Date.parse(new Date)/1e3,e.game_id=Number(g._config.appID),e.ad_id=Number(g._config.adID),e.trace_id=g.utils.generateUUID()):(e.app_id=g._config.appID,e.ad_id=g._config.adID,e.time=Date.parse(new Date)/1e3),t=function e(t){var a,n,o=[];for(a in t)i&&"object"==typeof t[a]?(n=e(t[a]),o.push(a+"="+n)):(i||!i&&"extra"!=a&&"order"!=a)&&o.push(a+"="+t[a]);return o.sort(),o.join("&")}(e),console.log("[XSDK]#unsignStr#: "+t),t+=g._config.appKey,e.sign=n.MD5(t)),e},request:function(e,t,a,n,o,i){var r="application/x-www-form-urlencoded;charset=utf-8",s=!1,c=!1,d=!1;n="function"==typeof n?n:l,o="function"==typeof failed?o:l,i="function"==typeof i?i:l,-1<t.indexOf("mapi")&&(r="application/json;charset=utf-8",s=!0),(-1<t.indexOf("check")||-1<t.indexOf("jump")||-1<t.indexOf("platform/get"))&&(r="application/json",c=!0),-1<t.indexOf("notice/web")&&(d=!0),a=g.utils.getBaseParams(a,s,c,d),g.utils.log("[XSDK]request params"),g.utils.log(JSON.stringify(a)),wx.request({url:t,method:e,data:a,header:{"content-type":r},success:function(e){200==e.statusCode&&n(e.data)},fail:function(e){g.utils.log("[XSDK]request fail"),o(e)},complete:function(e){i(e)}})}},_getLaunchParams:function(e){this._data.launchParams=e,Object.keys(e.query)&&Object.keys(e.query).length&&(this._data.qs=t.encode(JSON.stringify(e.query)),console.log("bs64",this._data.qs)),console.log("getLaunch",e),e.query.scene&&(this._config.adID=decodeURIComponent(e.query.scene),-1!=this._config.adID.indexOf("?")&&(this._config.adID=this._config.adID.split("?")[0]),console.log("[XSDK]adID: "+this._config.adID),wx.getStorageSync("zksdk_source_adid")||wx.setStorageSync("zksdk_source_adid",this._config.adID)),e.query.ticket&&(console.log("res.query.ticket",e.query.ticket),wx.setStorageSync("zksdk_source_ticket",decodeURIComponent(e.query.ticket))),e.query.from&&(console.log("res.query.from",e.query.from),this._data.from=decodeURIComponent(e.query.from))},_getInitConfig:function(){var t=this,e="https://upload.zkyouxi.com/wxsdk/data/"+t._config.appVersion+".json";t.utils.request("GET",e,{},function(e){e.kf&&(t._data.isShowKF=!0),e.vip_kf&&(t._data.isShowVipKF=!0),e.moregame&&(t._data.isShowMoreGame=!0),e.ui_1&&(t._data.isShowUI1=!0),e.ui_2&&(t._data.isShowUI2=!0),e.ui_3&&(t._data.isShowUI3=!0),e.ui_4&&(t._data.isShowUI4=!0)})},_init:function(){var e=this;try{var t=wx.getSystemInfoSync();e._config.wxLibVersion=t.SDKVersion,-1<t.system.toLowerCase().indexOf("ios")?e._config.os=2:e._config.os=1,e._config.system=t.system,e._config.platform=t.platform}catch(e){}var a,n,t=wx.getLaunchOptionsSync();e.utils.log("launchInfo"),e.utils.log(t),e._getLaunchParams(t),wx.showShareMenu(),e._config.shareTitle&&e._config.shareImg&&(a=e._config.shareImg,n=e.getShareParamStr(),e.utils.log("share query："+n),-1<a.indexOf("http")&&(a+="?t="+(new Date).getTime()),wx.onShareAppMessage(function(){return{title:e._config.shareTitle,imageUrl:a,query:n}}))},_ifPurchase:function(e,t,a){var n=this,o=n._config.apiOrigin.pay+"/config?_action=wxgame_purchase",i={};i.app_version=n._config.appVersion,i.access_token=wx.getStorageSync("zksdk_token"),i.total_charge=e,i.os=n._config.os,i.user_grade=n._data.userGrade,i.user_pass=n._data.userPass,i.user_onlinetime=n._data.userOnlineTime,n.utils.request("POST",o,i,function(e){e.state?"function"==typeof t&&t(e.data.in_purchase):(n._data.isCallPay=!1,"function"==typeof a&&a(1))},function(){n._data.isCallPay=!1,"function"==typeof a&&a(1)})},_getOpenid:function(){return this._data.openid||wx.getStorageSync("zksdk_openid")||""},init:function(e){this._config.isDev=(void 0!==e.isDev?e:this._config).isDev,this._config.isSandbox=(void 0!==e.isSandbox?e:this._config).isSandbox,this._config.isPersonal=(void 0!==e.isPersonal?e:this._config).isPersonal,this._config.appID=e.appID||"",this._config.ogameID=e.ogameID||"",this._config.adID=(""==this._config.adID?e:this._config).adID,this._config.appKey=e.appKey||"",this._config.appVersion=void 0!==e.version?e.version:e.appVersion||"1.0.0",this._config.shareTitle=e.shareTitle||"",this._config.shareImg=e.shareImg||"",this._config.wxAppID=e.wxAppID||this._config.wxAppID,this._config.kfMsgPayImg=e.kfMsgPayImg||this._config.kfMsgPayImg,this._config.kfMsgDownImg=e.kfMsgDownImg||this._config.kfMsgDownImg,this._config.shareAdID=e.shareAdID||this._config.shareAdID,this._init()},_onLogin:function(e,t){var a=e.user_id,n=e.access_token,o=e.open_id;wx.setStorageSync("zksdk_openid",o),wx.setStorageSync("zksdk_token",n),wx.setStorageSync("zksdk_session_key",e.wxgame_session_key),wx.setStorageSync("zksdk_uid",a),"function"==typeof t&&t(),this._trackActive(o)},_trackActive:function(e){var t=this,e={app_version:t._config.appVersion,os:1,action_type:"active",clientid:e,extra:{system:t._config.system,platform:t._config.platform}};t.utils.log("[XSDK]激活上报"),t.utils.request("GET","https://trackapi.zkyouxi.com/v2/sdkinit?v=2.0",e)},login:function(e){var a=this,n={state:0,data:{},msg:"登录失败"};this._callbacks.login=e,wx.login({success:function(e){var t;e.code&&(t=a._config.apiOrigin.user+"/authorize?_action=login_wxgame",e={code:e.code,system:a._config.system.toLowerCase()},wx.getStorageSync("zksdk_source_ticket")&&!wx.getStorageSync("zksdk_session_key")&&"pay"==a._data.from&&wx.setStorageSync("zksdk_source_jump","true"),wx.getStorageSync("zksdk_source_ticket")&&wx.getStorageSync("zksdk_session_key")&&"pay"==a._data.from&&!wx.getStorageSync("zksdk_source_jump")&&wx.removeStorageSync("zksdk_source_ticket"),(wx.getStorageSync("zksdk_source_ticket")&&!wx.getStorageSync("zksdk_session_key")||wx.getStorageSync("zksdk_source_ticket")&&wx.getStorageSync("zksdk_session_key")&&""==a._data.from||wx.getStorageSync("zksdk_source_ticket")&&wx.getStorageSync("zksdk_session_key")&&"pay"==a._data.from&&wx.getStorageSync("zksdk_source_jump"))&&(e.ticket=wx.getStorageSync("zksdk_source_ticket")),a._data.qs&&(e.qs=a._data.qs),a.utils.request("POST",t,e,function(e){var t;e.state?(a.utils.log("[XSDK]登录成功"),t=e.data,a._data.openid=t.open_id,n.state=1,n.data.uid=t.user_id,n.data.token=t.access_token,n.data.openid=t.open_id,n.data.code=t.authorize_code,n.msg="登录成功",a.utils.log(n),a._onLogin(t,function(){"function"==typeof a._callbacks.login&&a._callbacks.login(n)})):(a.utils.log("[XSDK]登录失败"),n.msg=e.msg,"function"==typeof g._callbacks.login&&a._callbacks.login(n))},function(){"function"==typeof a._callbacks.login&&a._callbacks.login(n)}))},fail:function(e){"function"==typeof a._callbacks.login&&a._callbacks.login(n)},complete:function(e){}})},onLoginRsp:function(e){var t=this;void 0!==e.userGrade&&(this._data.userGrade=e.userGrade,this.utils.log("玩家等级："+this._data.userGrade)),void 0!==e.userPass&&(this._data.userPass=e.userPass,this.utils.log("玩家通过关卡数："+this._data.userPass)),void 0!==e.userOnlineTime&&(this._data.userOnlineTime=e.userOnlineTime,this.utils.log("玩家在线时长："+this._data.userOnlineTime)),t._data.hasRequestIfPurchase||t._ifPurchase(0,function(e){t._data.hasRequestIfPurchase=!0,t._data.canPay=1!=e})},_afterInPay:function(t){var a=this,e={},n=a._config.apiOrigin.pay+"/v2/payments?_action=wxgame_deduct_coin";e.session_key=wx.getStorageSync("zksdk_session_key"),e.open_id=wx.getStorageSync("zksdk_openid"),e.access_token=wx.getStorageSync("zksdk_token"),e.order_no=t,a.utils.request("POST",n,e,function(e){a.utils.log("[XSDK]afterInPay"),a.utils.log(e),e.state?(""!=wx.getStorageSync(t)&&" "!=wx.getStorageSync(t)&&wx.removeStorageSync(t),console.log("[XSDK]inPay扣款成功："+t),null!==a._data.orderExtra&&(a._data.orderExtra=null,e={list:a._data.orderExtra},wx.setStorageSync("zksdk_order_extra",JSON.stringify(e)))):(a._retryAfterInPay(t),console.log("[XSDK]inPay扣款失败："+t))},function(){a._retryAfterInPay(t),console.log("[XSDK]inPay扣款失败(network)："+t)})},_coroutineDeduct:function(){var t=this,a=0;try{var e=wx.getStorageSync("zksdk_order");(e=e&&JSON.parse(e))&&void 0!==e.list&&0<e.list.length&&(t._data.inpayOrderQueue=e.list)}catch(e){console.log(e)}setInterval(function(){var e;0<t._data.inpayOrderQueue.length&&(e=t._data.inpayOrderQueue[0].split(",")[0],console.log("[XSDK]coroutineDeduct"),3<a&&(a=0,t._data.inpayOrderQueue.shift()),a++,t._afterInPay(e))},3e3)},_checkDeductOnShow:function(){try{console.log("[XSDK]_checkDeductOnShow");var e,t=wx.getStorageSync("zksdk_order_extra");this.utils.log("orderJson："+t),(t=t&&JSON.parse(t))&&void 0!==t.list&&null!==t.list&&void 0!==t.type&&1===t.type&&(this._data.orderExtra=t.list,e=t.list.split(",")[0],this.utils.log("_checkDeductOnShow准备进入扣款："+e),this._afterInPay(e))}catch(e){console.log(e)}},_retryAfterInPay:function(e){var t,a=this;""!=wx.getStorageSync(e)&&" "!=wx.getStorageSync(e)||wx.setStorageSync(e,"0"),Number(wx.getStorageSync(e))<3?(t=Number(wx.getStorageSync(e)),t++,console.log("请求失败次数：",t),wx.setStorageSync(e,t.toString()),setTimeout(function(){a._afterInPay(e)},3e3)):(null!=a._data.orderExtra&&-1!=a._data.orderExtra.indexOf(e)&&(a._data.orderExtra=null,t={list:a._data.orderExtra},wx.setStorageSync("zksdk_order_extra",JSON.stringify(t))),wx.removeStorageSync(e))},pay:function(o,e){var i,r=this,s={state:0,data:{},msg:"支付失败"},a={};if(r._data.isCallPay)return wx.showToast({title:"\b正在调起支付",icon:"none"}),!1;r._data.isCallPay=!0,this._callbacks.pay=e,o.rate=100*o.product_amount/o.total_charge,o.product_amount=Number(o.product_amount),o.currency_code="CNY",o.product_id=o.product_id.toString(),o.server_id=o.server_id.toString(),o.role_id=o.role_id.toString(),r._data.orderExtra=null,r._ifPurchase(o.total_charge,function(e){return i=e,r._config.isPersonal&&i?(r._data.isCallPay=!1,void wx.showModal({title:"提示",content:"政策原因不支持充值",showCancel:!1})):(e=i&&!r._config.isPersonal&&1==r._config.os,void r._isPayJump(e,o.role_id,function(e){var t;-1==e?(t=function(e){var t,a=e.data;if("200"==e.code&&a.order_no&&(e=a.order_no+","+parseInt(o.total_charge/100),r._data.orderExtra=e),i&&!r._config.isPersonal)if(1==r._config.os)if(r._data.isRequestMidasPayment)wx.showToast({title:"正在调起支付",icon:"none"});else try{var n={list:r._data.orderExtra,type:1};wx.setStorageSync("zksdk_order_extra",JSON.stringify(n)),t=a,r._data.isRequestMidasPayment=!0,setTimeout(function(){r._data.isRequestMidasPayment=!1,r._data.isCallPay=!1},1e3),wx.requestMidasPayment({mode:"game",env:r._config.isSandbox?1:0,offerId:t.offer_id,platform:"android",buyQuantity:o.total_charge,currencyType:"CNY",zoneId:"1",success:function(){var e;console.log("[XSDK]inPay:success"),r._data.orderExtra&&(e={list:r._data.orderExtra,type:2},wx.setStorageSync("zksdk_order_extra",JSON.stringify(e))),r._afterInPay(t.order_no)},fail:function(e){r._data.isRequestMidasPayment=!1,r._data.isCallPay=!1,console.log("[XSDK]inPay:fail "+e.errCode+" - "+e.errMsg),r._data.orderExtra=null,e={list:r._data.orderExtra},wx.setStorageSync("zksdk_order_extra",JSON.stringify(e)),wx.showToast({title:"支付失败",icon:"none"}),"function"==typeof r._callbacks.pay&&r._callbacks.pay(s)},complete:function(){r._data.isRequestMidasPayment=!1,r._data.isCallPay=!1}})}catch(e){}else r._data.isCallPay=!1,wx.showModal({title:"提示",content:"受苹果政策影响，iOS暂未开放充值，请到安卓系统上充值。",showCancel:!1});else r._data.isCallPay=!1,wx.showModal({title:"支付提示",content:"即将打开客服聊天界面，点击右下角图片可以获取安全支付链接",showCancel:!1,success:function(e){e.confirm&&(e=a.order_no,o.order_no=e,e={chan_info:{user_id:wx.getStorageSync("zksdk_uid"),app_id:g._config.appID,ad_id:g._config.adID},order_info:o},console.log(e),wx[c.usercet(1)]({sessionFrom:JSON.stringify(e),showMessageCard:!0,sendMessageTitle:"",sendMessageImg:g._config.kfMsgPayImg,success:function(e){console.log(e)},fail:function(e){console.log(e)}}))}})},e=r._config.apiOrigin.pay+"/v2/payments?_action=wxgame_init_pay",o.pay_type=1==i?96:95,a.access_token=wx.getStorageSync("zksdk_token"),a.order=JSON.stringify(o),a.wxlib_version=r._config.wxLibVersion,a.system=r._config.system.toLowerCase(),wx.showLoading({mask:!0}),r.utils.request("POST",e,a,function(e){r.utils.log("[XSDK]requestPay"),r.utils.log(e),e.state?"200"==e.code&&t&&t(e):(r._data.isCallPay=!1,wx.showModal({title:"提示",content:"微信支付系统繁忙，请稍后尝试，或联系客服",showCancel:!1}),"function"==typeof r._callbacks.pay&&r._callbacks.pay(s))},function(){r._data.isCallPay=!1,"function"==typeof r._callbacks.pay&&r._callbacks.pay(s)},function(){wx.hideLoading()})):r._data.isCallPay=!1}))})},canPay:function(e){var t=this;return t._callbacks.canPay=e,t.isPersonal||1!=t._config.os?t._data.hasRequestIfPurchase?"function"==typeof t._callbacks.canPay&&t._callbacks.canPay(t._data.canPay):t._ifPurchase(0,function(e){t._data.hasRequestIfPurchase=!0,1!=e&&(t._data.canPay=!0),"function"==typeof t._callbacks.canPay&&t._callbacks.canPay(t._data.canPay)},function(){"function"==typeof t._callbacks.canPay&&t._callbacks.canPay(t._data.canPay)}):(t._data.canPay=!0,"function"==typeof t._callbacks.canPay&&t._callbacks.canPay(t._data.canPay)),t._data.canPay},getShareParamStr:function(){var e="",t=this._config.shareAdID;return t?"scene="+t:e},isBindPhone:function(e){var t=this,a=t._config.apiOrigin.user+"/user/"+wx.getStorageSync("zksdk_uid")+"?_action=phone_is_existed",n={access_token:wx.getStorageSync("zksdk_token")},o={state:0,data:{},msg:"请求失败"};t._callbacks.isBindPhone=e,t.utils.request("POST",a,n,function(e){e.state?"function"==typeof g._callbacks.isBindPhone&&t._callbacks.isBindPhone(e.data.is_bind):(t.utils.log("[XSDK]isBindPhone："+e.msg),o.msg=e.msg,"function"==typeof g._callbacks.isBindPhone&&t._callbacks.isBindPhone(!0))},function(){"function"==typeof t._callbacks.isBindPhone&&t._callbacks.isBindPhone(!0)})},getVerifyCode:function(e,t){var a=this,n=a._config.apiOrigin.user+"/verifycode",e={phone:e,scene:"phone_bind"},o={state:0,data:{},msg:"发送失败"};a._callbacks.getVerifyCode=t,a.utils.request("POST",n,e,function(e){e.state?(o.state=1,o.msg="发送成功"):(a.utils.log("[XSDK]getVerifyCode"+e.msg),o.msg=e.msg),"function"==typeof g._callbacks.getVerifyCode&&a._callbacks.getVerifyCode(o)},function(){"function"==typeof a._callbacks.getVerifyCode&&a._callbacks.getVerifyCode(o)})},bindPhone:function(e,t,a){var n=this,o=n._config.apiOrigin.user+"/user/"+wx.getStorageSync("zksdk_uid")+"?_action=phone_bind",t={access_token:wx.getStorageSync("zksdk_token"),phone:e,verifycode:t},i={state:0,data:{},msg:"绑定失败"};n._callbacks.bindPhone=a,n.utils.request("POST",o,t,function(e){e.state?(i.state=1,i.msg="绑定成功"):(n.utils.log("[XSDK]bindPhone"+e.msg),i.msg=e.msg),"function"==typeof g._callbacks.bindPhone&&n._callbacks.bindPhone(i)},function(){"function"==typeof n._callbacks.bindPhone&&n._callbacks.bindPhone(i)})},reportInfo:function(a,n){var e=this,t="",o=wx.getStorageSync("zksdk_pre_level")||0,i=n.role_cts||wx.getStorageSync("zksdk_role_cts"+n.role_id)||0,r={};switch(a){case"enter":t="https://mapi.zkyouxi.com/game/v1.0/role_login","true"!=wx.getStorageSync("zksdk_isLogin")&&(wx.setStorageSync("zksdk_isLogin","true"),e._showNotice(),e._showFloatDialog(n.role_level));break;case"levelUp":t="https://mapi.zkyouxi.com/game/v1.0/role_lvlup",r.pre_level=o}r.access_token=wx.getStorageSync("zksdk_token"),r.ogame_id=e._config.ogameID,r.server_id=Number(n.server_id),r.server_name=n.server_name||"default",r.server_zone=n.server_zone||"1",r.role_id=Number(n.role_id)||0,n.role_id_s&&(r.role_id_s=n.role_id_s),r.role_name=n.role_name,r.role_level=Number(n.role_level),r.role_cts=i,r.is_test_server=0,r.role_info={},r.client_info={},r.system=e._config.system.toLowerCase(),console.log("[XSDK]reportInfo: "+a),console.log(r),e._data.userGrade=r.role_level,wx.setStorageSync("zksdk_pre_level",r.role_level),e.utils.request("POST",t,r,function(e){var t;e.state?"enter"==a&&(t=e.data.role_cts||0,wx.setStorageSync("zksdk_role_cts"+n.role_id,t)):console.log("[XSDK]"+e.msg)})},checkContent:function(e,t){var a={state:0,data:{},msg:"不通过"},e={content:e.content,openid:wx.getStorageSync("zksdk_openid"),client_id:wx.getStorageSync("zksdk_openid")};this.utils.request("POST","https://ares.zkyouxi.com/api/v1/wxgame/msg/check",e,function(e){1==e.ret&&"pass"==e.data.suggest&&(a={state:1,data:{},msg:"通过"}),t(a)},function(){t(a={state:0,data:{},msg:"检查失败"})})},_showNotice:function(){var e={access_token:wx.getStorageSync("zksdk_token"),app_id:g._config.appID};this.utils.request("GET","https://webapi.zkyouxi.com/cms/notice/web",e,function(e){var t;1==e.state&&"undefined"!=e.data.content&&""!=e.data.content&&(t=e.data.content,wx.showModal({title:e.data.title,content:e.data.content,showCancel:!1,confirmText:"关闭",success:function(e){!e.confirm||(e=t.match(/[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+|[1-9][0-9]{8,10}/))&&0<e.length&&wx.setClipboardData({data:e[0],success:function(e){console.log(e)},fail:function(e){console.log(e)}})}}))})},_isPayJump:function(e,t,n){e?(t={open_id:wx.getStorageSync("zksdk_openid"),client_id:wx.getStorageSync("zksdk_openid"),role_level:Number(wx.getStorageSync("zksdk_pre_level")),role_id:t.toString(),access_token:wx.getStorageSync("zksdk_token")},this.utils.request("POST","https://ares.zkyouxi.com/api/v1/wxgame/pay/jump",t,function(e){var t,a;console.log("jump",e),1==e.ret&&1==e.data.jump?(t=e.data.app_id,a=e.data.ticket,wx.showModal({title:"尊敬的玩家",content:"敬爱的玩家，您好目前小程序暂时无法支付已加急处理中，请您重新登录支付，感谢您的理解与支持！",showCancel:!1,success:function(e){e.confirm&&wx[c.usercet(0)]({appId:t,path:"?ticket="+a+"&from=pay",envVersion:wx.getAccountInfoSync().miniProgram.envVersion,success:function(){n(1)},fail:function(e){console.log("jump失败"),n(0)}})}})):n(-1)},function(){n(-1)})):n(-1)},_isJumpMiniProgram:function(){var e={access_token:wx.getStorageSync("zksdk_token"),client_id:wx.getStorageSync("zksdk_openid")};this.utils.request("POST","https://ares.zkyouxi.com/api/v1/wxgame/miniprogram/jump",e,function(e){1==e.ret&&1==e.data.enable&&(e=e.data.app_id,wx[c.usercet(0)]({appId:e,path:"pages/index/index?userid="+wx.getStorageSync("zksdk_uid")+"&appid="+g._config.appID+"&adid="+g._config.adID+"&type="+g._config.os+"&guide=true",envVersion:wx.getAccountInfoSync().miniProgram.envVersion,success:function(){console.log("jumpM成功")},fail:function(e){console.log("jumpM失败")}}))},function(){})},_openCustomerService:function(){var e={event:"gift",chan_info:{user_id:wx.getStorageSync("zksdk_uid"),app_id:g._config.appID,ad_id:g._config.adID},details:{os_type:g._config.os}};console.log(e),wx[c.usercet(1)]({sessionFrom:JSON.stringify(e),showMessageCard:!0,sendMessageTitle:"点击下方绑定手机拿奖励",sendMessageImg:g._config.kfMsgDownImg,success:function(e){console.log(e)},fail:function(e){console.log(e)}})},_showFloatDialog:function(e){var t=this,a=0,a=""==(a=wx.getStorageSync("zksdk_loginCount"))?0:Number(a);a++,wx.setStorageSync("zksdk_loginCount",a.toString()),a={access_token:wx.getStorageSync("zksdk_token"),client_id:wx.getStorageSync("zksdk_openid"),role_level:Number(e),login_times:a,version:t._config.appVersion},t.utils.request("POST","https://ares.zkyouxi.com/api/v1/wxgame/platform/get",a,function(e){t._removeStage(),1==e.ret&&0==e.data.is_origin_plat&&t._getFloatDialog()},function(){})},_getFloatDialog:function(){var t=this,a=!1,n=new d.Common;t._data.img=new d.Image("https://fecdn.zkyouxi.com/zksdk/4.1.x/images/icon-wx-ball.png"),t._data.img2=new d.Image("https://fecdn.zkyouxi.com/zksdk/4.1.x/images/icon-wx-jump.png"),t._data.img.x=-30,t._data.img.y=.4*n.ScreenHeight,t._data.img.opacity=.7,t._data.img.addToStage(),t._data.img2.x=t._data.img.width,t._data.img2.y=.4*n.ScreenHeight,t._data.img2.visible=!1,t._data.img2.addToStage();var o=!1,i={x:0,y:0},r={x:0,y:0};function s(e){1==o&&(t._data.img.x=e.stageX-i.x,t._data.img.y=e.stageY-i.y,t._data.img.x>n.ScreenWidth&&(t._data.img.x=a?n.ScreenWidth:n.ScreenWidth+30),t._data.img.x<0&&(t._data.img.x=a?0:-30),t._data.img.x<n.ScreenWidth/2?1==t._data.img.scaleX?t._data.img2.x=t._data.img.x+t._data.img.width:t._data.img2.x=t._data.img.x-2*t._data.img.width:1==t._data.img.scaleX?t._data.img2.x=t._data.img.x-t._data.img.width:t._data.img2.x=t._data.img.x-2*t._data.img.width,t._data.img2.y=t._data.img.y)}t._data.img.addEventListener("touchstart",function(e){o=!0,i.x=e.stageX-t._data.img.x,i.y=e.stageY-t._data.img.y,r.x=t._data.img.x,n.stage.addEventListener("touchmove",s,this)},this),t._data.img.addEventListener("touchend",function(e){o=!1,Math.abs(t._data.img.x-r.x)<100&&(t._data.img2.visible=!0,a=!a),t._data.img.y<t._data.img.height?t._data.img.y=t._data.img.height:t._data.img.y>n.ScreenHeight-t._data.img.height&&(t._data.img.y=n.ScreenHeight-t._data.img.height),t._data.img.x<n.ScreenWidth/2?(a?(t._data.img.x=0,t._data.img.opacity=1,t._data.img2.x=t._data.img.x+t._data.img.width,t._data.img2.y=t._data.img.y):(t._data.img.x=-30,t._data.img.opacity=.7,t._data.img2.visible=!1),t._data.img.scaleX=1):(a?(t._data.img.x=n.ScreenWidth,t._data.img.opacity=1,t._data.img2.x=t._data.img.x-2*t._data.img.width,t._data.img2.y=t._data.img.y):(t._data.img.x=n.ScreenWidth+30,t._data.img.opacity=.7,t._data.img2.visible=!1),t._data.img.scaleX=-1),n.stage.removeEventListener("touchmove",s,this)},this),t._data.img2.addEventListener("touchstart",t._isJumpMiniProgram,this)},_removeStage:function(){Object.keys(g._data.img)&&0<Object.keys(g._data.img).length&&(g._data.img.removeToStage(),g._data.img2.removeToStage())}},wx.onShow(function(e){console.log("onShow"),console.log(e),g._getLaunchParams(e),g._checkDeductOnShow(),wx.setStorageSync("zksdk_isLogin","")}),o.exports=g}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../floating_ball":1,"../wxxconfig":6,"./base64":2}],6:[function(e,t,a){var n={usercet:function(e){for(var t="",a="wxxconfig",n="",t=0==e?"\t\03\b*\t7\b\0\n":"\b\t$\b\n4$\b\t\b\t",o=0;o<t.length;o++){for(var i=0;i<a.length;i++)var r=a.charCodeAt(i),s=t.charCodeAt(o)^r;n+=String.fromCharCode(s)}return console.log("result@@@",n),n}};t.exports=n},{}]},{},[3]),e.exports=WXXSDK},{}],3:[function(e,t,a){t.exports={chl:"1232003",appKey:"568ab683-fa8c-430d-8b3d-3fb4610be643",shareAdID:1256047,apiUrl:"https://fxapi.zkmob.net/",appID:"11594",gameID:5135,kfMsgImg:"",kfMsgDownImg:"",shareImg:"",shareTitle:"",wxAppID:"wx97a8eedb93142ab2",wxMdSDK:"../lib/wxmdsdk",isCode:!0}},{}],4:[function(t,e,a){!function(e){(e="undefined"!=typeof GameGlobal?GameGlobal:e).asdkConfig=t("../src/config"),e.wxmdsdk=t("../lib/wxmdsdk"),e.WXASDK=t("./sdk")}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/wxmdsdk":1,"../src/config":3,"./sdk":6}],5:[function(e,t,a){t.exports=n;var i=0;function n(e){return r(o(s(e)))}function o(e){return d(g(c(e),8*e.length))}function r(e){for(var t,a=i?"0123456789ABCDEF":"0123456789abcdef",n="",o=0;o<e.length;o++)t=e.charCodeAt(o),n+=a.charAt(t>>>4&15)+a.charAt(15&t);return n}function s(e){for(var t,a,n="",o=-1;++o<e.length;)t=e.charCodeAt(o),a=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=a&&a<=57343&&(t=65536+((1023&t)<<10)+(1023&a),o++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n}function c(e){for(var t=Array(e.length>>2),a=0;a<t.length;a++)t[a]=0;for(a=0;a<8*e.length;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t}function d(e){for(var t="",a=0;a<32*e.length;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t}function g(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a=1732584193,n=-271733879,o=-1732584194,i=271733878,r=0;r<e.length;r+=16){var s=a,c=n,d=o,g=i,a=u(a,n,o,i,e[r+0],7,-680876936),i=u(i,a,n,o,e[r+1],12,-389564586),o=u(o,i,a,n,e[r+2],17,606105819),n=u(n,o,i,a,e[r+3],22,-1044525330);a=u(a,n,o,i,e[r+4],7,-176418897),i=u(i,a,n,o,e[r+5],12,1200080426),o=u(o,i,a,n,e[r+6],17,-1473231341),n=u(n,o,i,a,e[r+7],22,-45705983),a=u(a,n,o,i,e[r+8],7,1770035416),i=u(i,a,n,o,e[r+9],12,-1958414417),o=u(o,i,a,n,e[r+10],17,-42063),n=u(n,o,i,a,e[r+11],22,-1990404162),a=u(a,n,o,i,e[r+12],7,1804603682),i=u(i,a,n,o,e[r+13],12,-40341101),o=u(o,i,a,n,e[r+14],17,-1502002290),a=_(a,n=u(n,o,i,a,e[r+15],22,1236535329),o,i,e[r+1],5,-165796510),i=_(i,a,n,o,e[r+6],9,-1069501632),o=_(o,i,a,n,e[r+11],14,643717713),n=_(n,o,i,a,e[r+0],20,-373897302),a=_(a,n,o,i,e[r+5],5,-701558691),i=_(i,a,n,o,e[r+10],9,38016083),o=_(o,i,a,n,e[r+15],14,-660478335),n=_(n,o,i,a,e[r+4],20,-405537848),a=_(a,n,o,i,e[r+9],5,568446438),i=_(i,a,n,o,e[r+14],9,-1019803690),o=_(o,i,a,n,e[r+3],14,-187363961),n=_(n,o,i,a,e[r+8],20,1163531501),a=_(a,n,o,i,e[r+13],5,-1444681467),i=_(i,a,n,o,e[r+2],9,-51403784),o=_(o,i,a,n,e[r+7],14,1735328473),a=f(a,n=_(n,o,i,a,e[r+12],20,-1926607734),o,i,e[r+5],4,-378558),i=f(i,a,n,o,e[r+8],11,-2022574463),o=f(o,i,a,n,e[r+11],16,1839030562),n=f(n,o,i,a,e[r+14],23,-35309556),a=f(a,n,o,i,e[r+1],4,-1530992060),i=f(i,a,n,o,e[r+4],11,1272893353),o=f(o,i,a,n,e[r+7],16,-155497632),n=f(n,o,i,a,e[r+10],23,-1094730640),a=f(a,n,o,i,e[r+13],4,681279174),i=f(i,a,n,o,e[r+0],11,-358537222),o=f(o,i,a,n,e[r+3],16,-722521979),n=f(n,o,i,a,e[r+6],23,76029189),a=f(a,n,o,i,e[r+9],4,-640364487),i=f(i,a,n,o,e[r+12],11,-421815835),o=f(o,i,a,n,e[r+15],16,530742520),a=p(a,n=f(n,o,i,a,e[r+2],23,-995338651),o,i,e[r+0],6,-198630844),i=p(i,a,n,o,e[r+7],10,1126891415),o=p(o,i,a,n,e[r+14],15,-1416354905),n=p(n,o,i,a,e[r+5],21,-57434055),a=p(a,n,o,i,e[r+12],6,1700485571),i=p(i,a,n,o,e[r+3],10,-1894986606),o=p(o,i,a,n,e[r+10],15,-1051523),n=p(n,o,i,a,e[r+1],21,-2054922799),a=p(a,n,o,i,e[r+8],6,1873313359),i=p(i,a,n,o,e[r+15],10,-30611744),o=p(o,i,a,n,e[r+6],15,-1560198380),n=p(n,o,i,a,e[r+13],21,1309151649),a=p(a,n,o,i,e[r+4],6,-145523070),i=p(i,a,n,o,e[r+11],10,-1120210379),o=p(o,i,a,n,e[r+2],15,718787259),n=p(n,o,i,a,e[r+9],21,-343485551),a=h(a,s),n=h(n,c),o=h(o,d),i=h(i,g)}return Array(a,n,o,i)}function l(e,t,a,n,o,i){return h((i=h(h(t,e),h(n,i)))<<o|i>>>32-o,a)}function u(e,t,a,n,o,i,r){return l(t&a|~t&n,e,t,o,i,r)}function _(e,t,a,n,o,i,r){return l(t&n|a&~n,e,t,o,i,r)}function f(e,t,a,n,o,i,r){return l(t^a^n,e,t,o,i,r)}function p(e,t,a,n,o,i,r){return l(a^(t|~n),e,t,o,i,r)}function h(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}},{}],6:[function(t,a,e){!function(e){var o,i,r;o="undefined"!=typeof GameGlobal?GameGlobal:e,i=t("./utils"),r={_config:{sdk_version:"2.0.0",clientID:""},_initData:{gameID:0,wxAppID:"",adID:0,pid:0,appKey:"",appVersion:"",shareAdID:"",kfMsgImg:"",kfMsgDownImg:"",shareImg:"",shareTitle:"",ogameID:0,key:"",appID:"",chid:0,isCode:""},_orderData:{out_trade_no:"",product_id:"",product_name:"",coin:0,server_id:"",server_name:"",role_id:"",role_name:"",role_level:"1",total_fee:0,callback_url:"",product_desc:"",extend:""},_partnerData:{gameID:o.asdkConfig.gameID,wxAppID:o.asdkConfig.wxAppID,adID:o.asdkConfig.chl,pid:o.asdkConfig.appID,appKey:o.asdkConfig.appKey,appVersion:"",shareAdID:o.asdkConfig.shareAdID,kfMsgImg:o.asdkConfig.kfMsgImg,kfMsgDownImg:o.asdkConfig.kfMsgDownImg,shareImg:o.asdkConfig.shareImg,shareTitle:o.asdkConfig.shareTitle},_paying:!1,_activate:function(e){i.request({url:"activate/init",type:"post",data:e,callback:null})},init:function(e){Object.assign(r._initData,e),r._initData.adID=e.cid,r._config.clientID=""===i.getData("uuid")?i.generateUUID():i.getData("uuid"),i.saveData("gid",r._initData.gameID),i.saveData("pid",r._initData.pid),i.saveData("cid",r._initData.adID),i.saveData("key",r._initData.appKey);e={client_id:r._config.clientID,sdk_version:r._config.sdk_version},e=JSON.stringify(e);r._activate({game_id:Number(r._initData.gameID),package_id:Number(r._initData.pid),chl_id:Number(r._initData.adID),time:Math.floor((new Date).getTime()/1e3),client_info:e}),r._partnerData.appVersion=r._initData.appVersion,r._partnerData.gameID=0==r._initData.ogameID?o.asdkConfig.gameID:r._initData.ogameID,r._partnerData.wxAppID=(""==r._initData.wxAppID?o.asdkConfig:r._initData).wxAppID,r._partnerData.adID=0==r._initData.chid?o.asdkConfig.chl:r._initData.chid,r._partnerData.pid=(""==r._initData.appID?o.asdkConfig:r._initData).appID,r._partnerData.appKey=""==r._initData.key?o.asdkConfig.appKey:r._initData.key,r._partnerData.shareAdID=(""==r._initData.shareAdID?o.asdkConfig:r._initData).shareAdID,r._partnerData.kfMsgImg=(""==r._initData.kfMsgImg?o.asdkConfig:r._initData).kfMsgImg,r._partnerData.kfMsgDownImg=(""==r._initData.kfMsgDownImg?o.asdkConfig:r._initData).kfMsgDownImg,r._partnerData.shareImg=(""==r._initData.shareImg?o.asdkConfig:r._initData).shareImg,r._partnerData.shareTitle=(""==r._initData.shareTitle?o.asdkConfig:r._initData).shareTitle,o.wxmdsdk.init(r._partnerData)},login:function(t){var a={game_id:Number(r._initData.gameID),package_id:Number(r._initData.pid),chl_id:Number(r._initData.adID),time:Math.floor((new Date).getTime()/1e3),client_info:{},chl_info:{}};a.client_info.client_id=r._config.clientID,a.client_info.sdk_version=r._config.sdk_version,i.isIOS()?a.client_info.os="0":a.client_info.os="1",a.client_info=JSON.stringify(a.client_info);var n={state:0,data:{},msg:"登录失败"};(""==r._initData.isCode?o.asdkConfig:r._initData).isCode?o.wxmdsdk.login(function(e){a.chl_info=JSON.stringify(e),i.request({url:"user/authorize",type:"post",data:a,callback:function(e){e.state&&(i.saveData("partner_uid",e.data.chl_info.user_id),i.saveData("partner_uname",e.data.chl_info.user_name),i.saveData("partner_token",e.data.chl_info.access_token),i.saveData("uid",e.data.user_id),i.saveData("sid",e.data.session_id),n.data.uid=i.getData("uid"),i.getData("sid")&&(n.data.sid=i.getData("sid")),n.state=1,n.msg="登录成功"),t(n)}})}):o.wxmdsdk.getChlInfo(function(e){a.chl_info=JSON.stringify(e),i.request({url:"user/custom/login",type:"post",data:a,callback:function(e){e&&e.data&&(i.saveData("uid",e.data.user_id),i.saveData("sid",e.data.session_id),n.data.uid=i.getData("uid"),i.getData("sid")&&(n.data.sid=i.getData("sid")),n.state=1,n.msg="登录成功"),t(n)}})})},logout:function(){i.removeData("partner_uid"),i.removeData("partner_uname"),i.removeData("partner_token"),i.removeData("uid");var t={state:0,data:{},msg:"注销失败"};o.wxmdsdk.logout(function(e){t.state=1,t.msg="注销成功"})},pay:function(e){r._orderData.out_trade_no=e.orderNo,r._orderData.product_id=e.productID,r._orderData.product_name=e.productName,r._orderData.coin=e.amount,r._orderData.server_id=e.serverID&&e.serverID.toString()||"",r._orderData.server_name=e.serverName,r._orderData.role_id=e.roleID&&e.roleID.toString()||"",r._orderData.role_name=e.roleName,r._orderData.role_level=e.roleLevel,r._orderData.total_fee=e.totalCharge,r._orderData.product_desc=e.productDesc,r._orderData.extend=e.extra,r._orderData.callback_url=e.cbUrl||"";e={user_id:i.getData("uid"),game_id:Number(i.getData("gid")),package_id:Number(i.getData("pid")),chl_id:Number(i.getData("cid")),order_info:JSON.stringify(Object.assign({},r._orderData)),time:Math.floor((new Date).getTime()/1e3)};r._paying||(r._paying=!0,setTimeout(()=>{r._paying=!1},2e3),i.request({url:"order/",type:"post",data:e,callback:function(e){e&&e.data&&(r._orderData.out_trade_no=e.data.order_no,r._orderData.callback_url=e.data.callback_url,o.wxmdsdk.pay(r._orderData,function(e){}))}}))},downloadApp:function(){o.wxmdsdk.downloadApp()},dataReport:function(e,t){switch(e){case"enterServer":r._enterServer(t);break;case"enterGame":r._enterGame(t);break;case"createRole":r._createRole(t);break;case"levelUp":r._levelUp(t)}o.wxmdsdk.dataReport(e,t)},getShareParamStr:function(){return o.wxmdsdk.getShareParamStr()},goShare:function(e,t){return{state:1,data:{},msg:"成功"}},checkContent:function(e,t){o.wxmdsdk.checkContent(e,function(e){t(e)})},isShowPayUI:function(e,t){o.wxmdsdk.isShowPayUI(e,function(e){t(e)})},_createRole:function(e){var t={role_id:e.roleID,role_name:e.roleName,role_level:e.roleLevel||1,create_time:e.createTime||Math.floor((new Date).getTime()/1e3)},e={user_id:i.getData("uid"),game_id:Number(i.getData("gid")),package_id:Number(i.getData("pid")),chl_id:Number(i.getData("cid")),server_id:e.serverID&&e.serverID.toString(),role_info:JSON.stringify(t),action_type:0},t=new Date;e.time=Math.floor(t.getTime()/1e3),i.request({url:"role/role_change",type:"post",data:e,callback:function(e){}})},_enterServer:function(e){var t={user_id:i.getData("uid"),game_id:Number(i.getData("gid")),package_id:Number(i.getData("pid")),chl_id:Number(i.getData("cid")),server_id:e.serverID&&e.serverID.toString()};!e.is_first_access&&0!==e.is_first_access||(t.is_first_access=e.is_first_access),!e.has_role&&0!==e.has_role||(t.has_role=e.has_role);e=new Date;t.time=Math.floor(e.getTime()/1e3),i.request({url:"game/server_access",type:"post",data:t,callback:function(e){}})},_enterGame:function(e){var t={role_id:e.roleID,role_name:e.roleName,role_level:e.roleLevel},e={user_id:i.getData("uid"),game_id:Number(i.getData("gid")),package_id:Number(i.getData("pid")),chl_id:Number(i.getData("cid")),server_id:e.serverID&&e.serverID.toString(),role_info:JSON.stringify(t)},t=new Date;e.time=Math.floor(t.getTime()/1e3),i.request({url:"game/game_access",type:"post",data:e,callback:function(e){}})},_levelUp:function(e){var t={role_id:e.roleID,role_name:e.roleName,role_level:e.roleLevel},e={user_id:i.getData("uid"),game_id:Number(i.getData("gid")),package_id:Number(i.getData("pid")),chl_id:Number(i.getData("cid")),server_id:e.serverID&&e.serverID.toString(),role_info:JSON.stringify(t),action_type:1},t=new Date;e.time=Math.floor(t.getTime()/1e3),i.request({url:"role/role_change",type:"post",data:e,callback:function(e){}})}},a.exports=r}.call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils":7}],7:[function(e,t,a){var c=e("./md5"),n=e("./config"),e={generateUUID:function(){var a=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(a+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==e?t:3&t|8).toString(16)})},extend:function(e,t){if("object"==typeof e&&"object"==typeof t)for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e},getStrByObj:function(e){var t,a="";for(t in e)e.hasOwnProperty(t)&&"object"==typeof e[t]?a+=t+"="+JSON.stringify(e[t])+"&":e.hasOwnProperty(t)&&"object"!=typeof e[t]&&(a+=t+"="+e[t]+"&");return a.substring(0,a.length-1)},isAndroid:function(){var e=navigator.userAgent;return-1<e.indexOf("Android")||-1<e.indexOf("Adr")},isIOS:function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},formateData:function(e,t){var a,n,o,i,r=[],s=[];for(o in e)r.push(o);for(i in r.sort(),r)s.push(r[i]+"="+e[r[i]]);return n=s.join("&"),a=s.join("&")+t,e.sign=c(a),n+="&sign="+e.sign},saveData:function(e,t){wx.setStorageSync(e,JSON.stringify(t))},getData:function(e){return""!=wx.getStorageSync(e)?JSON.parse(wx.getStorageSync(e)):""},removeData:function(e){wx.removeStorageSync(e)},request:function(e){var t={url:"",type:"post",contentType:"application/x-www-form-urlencoded",timeout:3e4,data:"",callback:null};e.data=this.formateData(e.data,this.getData("key")),this.extend(t,e),wx.request({header:{"content-type":t.contentType},url:n.apiUrl+t.url,data:"application/json"==t.contentType?JSON.stringify(t):t.data,method:t.type,timeout:t.timeout,success(e){"function"==typeof t.callback&&t.callback(e.data)},fail(e){"function"==typeof t.callback&&t.callback({state:0}),console.log("request-fail",e)},complete(){}})}};t.exports=e},{"./config":3,"./md5":5}]},{},[4]);
module.exports = WXASDK